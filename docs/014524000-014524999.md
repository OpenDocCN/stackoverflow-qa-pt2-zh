# StackOverflow 问答 14524000-14524999

# c++ - cpp中的三元运算符可能吗？

> ID：14524000
> 
> 赞同：-2
> 
> 时间：2013-01-25T14:39:20.807
> 
> 标签：c++, stream, operator-keyword, put, ternary

我正在考虑在 cpp 中实现一个类似于“<<”的三元 put 运算符：

```
mystream <<< param2 param3; 
```

这可能吗？它已经存在了吗？一句话：我记得看过这个：

```
out <<STDERR param 
```

这不是已经是三元运算符了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:47:30.613

要将 C++ 输出发送到 stderr 流，请使用`cerr << var1 << var2`或`clog << 1 << 2`。

C++ 中只有一个三元运算符 , `?:`，它不能被重载。

`<<<`是我见过的所有语言中的二元运算符。C++ 没有它；这样的字符序列将被解析为`<< <`无意义的，因为它们都不能用作一元运算符。

最后，那里的第二个和第三个“操作数”仅由空格分隔。C++ 没有语法产生式，包括`expression expression`; 这将导致严重的歧义。

* * *

中的链接行为`cerr << var1 << var2`是通过形式的重载来实现的

```
std::ostream & operator << ( std::ostream &, my_class const & ); 
```

`ostream &`返回类型允许将第一次调用的结果用作`cerr << var1`的左侧操作数`<< var2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:40:16.493

不，你不能编造新的运营商。您只能使用现有的，而`<<<`不是其中的。

```
out <<STDERR param 
```

这可以意味着任何东西，都可以是宏或文字。

# maps - Google Maps Android API v2 - 带有可点击按钮的信息窗口

> ID：14524002
> 
> 赞同：6
> 
> 时间：2013-01-25T14:39:21.133
> 
> 标签：maps, infowindow

我正在尝试在 GoogleMaps InfoWindos 中放置多个按钮。

我知道：“信息窗口不是实时视图，而是将视图呈现为地图上的图像。因此，您在视图上设置的任何侦听器都将被忽略，并且您无法区分不同部分的点击事件视图。建议您不要将交互式组件（例如按钮、复选框或文本输入）放置在您的自定义信息窗口中。”

所以我正在寻找替代方案。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-05-01T06:52:23.870

暗示`infowindowcliclistner`.

# javascript - 为什么'B'与[az]匹配？

> ID：14524004
> 
> 赞同：4
> 
> 时间：2013-01-25T14:39:31.697
> 
> 标签：javascript, regex

一个非常简单和天真的问题：为什么这是真的？

```
new RegExp('^[a-z]+$', 'i').test('B') 
```

显然“B”不在 [az] 范围内？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T14:40:37.303

是的，但是你有`i`告诉正则表达式忽略大小写的参数。

[来自RegEx](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)的 MDN 文档：

> # 参数
> 
> ### 图案
> 
> 正则表达式的文本。
> 
> ### 旗帜
> 
> 如果指定，标志可以具有以下值的任意组合：
> 
> ...
> 
> *   `i`
>     
>     
>     
>     忽略大小写

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T14:40:42.310

它定义了一个类，也就是说，它`[a-z]`象征着“任何字符，从`a`到`z`”。

正则表达式本质上也是区分大小写的，因此会`[a-z]`有所不同`[A-Z]`（除非您使用`i`（不区分大小写）标志，就像您所展示的那样）。

例如

```
/[a-z]/              -- Any single character, a through z
/[A-Z]/              -- Any single uppercase letter, A through Z
/[a-zA-Z]/           -- Any single upper or lowercase letter, a through z
/[a-z]/i or /[A-Z]/i -- (note the i) Any upper or lowercase letter, a through z 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T14:40:29.493

**概括**

*   [az] 表示包含字符 az 的字符集。

*   ^ 是一个锚，这意味着该集合必须以输入的第一个字符开头。

*   + 表示您必须匹配字符集中的一个或多个。

*   $ 是一个结束锚，意味着该集合必须结束输入的最后一个字符。

*   i 表示忽略输入字母的大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T14:40:22.810

`a`它表示和之间的任何字符`z`。

当您指定`i`标志（不区分大小写）时，它还包含`B`.

整个正则表达式检查字符串是否包含至少一个字符并且所有字符都在 az 或 AZ 中。

您可以检查`new RegExp('^[a-z]+$', 'i').test('B')`返回`true`。

# objective-c - viewWillAppear 是如何工作的？

> ID：14524005
> 
> 赞同：0
> 
> 时间：2013-01-25T14:39:35.090
> 
> 标签：objective-c, uiviewcontroller, uiapplicationdelegate

我的 viewWillAppear 方法调用“-(void)doSomething”。

```
- (void)doSomething
{
    Y4AppDelegate * delegate = (Y4AppDelegate *)[[UIApplication sharedApplication] delegate];
    if(delegate.booSomeValue == 0) {
        UIButton * aButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [aButton setFrame:CGRectMake(20,360,280,40)];
        [aButton setTitle:@"Title"
                 forState:UIControlStateNormal];
        [aButton addTarget:self
                    action:@selector(mySelector)
          forControlEvents:UIControlEventTouchDown];
        [self.view addSubview:aButton];
    }
} 
```

它可以工作，但 aButton 仍然可见。我该怎么做才能隐藏aButton？我有三个 UIViewController。第三，我将 delegate.booSomeValue 设置为 true。当我回到之前的 UIViewController 时，我调用了这个 viewWillAppear，但是 aButton 是可见的。我想隐藏它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:43:25.500

问题是您添加了一次，当您返回它时，您并没有添加第二个，但是您添加的第一个仍然存在，因此您必须将其删除。

为此，您首先需要创建一个属性来存储按钮，并检查它是否存在

```
if ( ... show button condition ... ) {

    if (!aButton) {
        ... create and show button ...
    }
}
else {
    if (aButton) {
         [aButton removeFromSuperview];
         aButton = nil;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:48:28.350

将此代码移动到 viewDidLoad

```
- (void)viewDidLoad {
    [super viewDidLoad]
    UIButton * aButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    aButton.tag = 101;
    [aButton setFrame:CGRectMake(20,360,280,40)];
    [aButton setTitle:@"Title"
             forState:UIControlStateNormal];
    [aButton addTarget:self
                action:@selector(mySelector)
      forControlEvents:UIControlEventTouchDown];
    [self.view addSubview:aButton];
} 
```

和

```
- (void)doSomething
{
    Y4AppDelegate * delegate = (Y4AppDelegate *)[[UIApplication sharedApplication] delegate];
    UIButton * aButton =  (UIButton*)[self.view viewWithTag:101]; 
    aButton.hidden = delegate.booSomeValue;
} 
```

# c# - 在 Windows Phone 8 上访问 OpenReadCompleted 方法中的标头

> ID：14524007
> 
> 赞同：0
> 
> 时间：2013-01-25T14:39:37.313
> 
> 标签：c#, windows-phone-7.1, windows-phone-8

我有一个将图像下载到手机的应用程序，它会根据图像类别将其分配给新闻提要。我正在使用这个功能：

```
 private static void DownloadImage(string furl, string ids)
    {
        // Connect Again to the API
        WebClient client = new WebClient();
        client.Headers["NewsID"] = ids;

        string url = "www.xxx.com/image/xyz";

        client.OpenReadCompleted += new OpenReadCompletedEventHandler(client_OpenReadCompleted);
        client.OpenReadAsync(new Uri(url));
    }

    private static void client_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (e.Error == null && !e.Cancelled)
            {
                Stream reply = null;
                StreamReader s = null;

                // i am not able to read the sender who is a webclient to retrieve the information it is always skipping it 
                WebClient wcd = sender as WebClient;

                reply = (Stream)e.Result;
                s = new StreamReader(reply);
                //Console.WriteLine(s.ReadToEnd());
                s.Close();
                reply.Close();

                if (!myIsolatedStorage.DirectoryExists("ImageCache"))
                {
                    myIsolatedStorage.CreateDirectory("ImageCache");
                }

                //try
                //{//((MS.Internal.InternalMemoryStream)(e.Result)).FinalUri.Segments[2]
                var graphImage = e.Result;
                Random rand = new Random();
                string fileName = string.Format("ImageCache/{0}.jpg", rand.Next());
                IsolatedStorageFileStream fileStream = myIsolatedStorage.CreateFile(fileName);

                BitmapImage image = new BitmapImage();
                image.SetSource(e.Result);
                WriteableBitmap wb = new WriteableBitmap(image);

                // Encode WriteableBitmap object to a JPEG stream.
                Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
                fileStream.Close();

                //}
                //catch (IsolatedStorageException ex)
                //{
                //IsolatedStorageException
                //Exception handle appropriately for your app  
                //}
            }
        }
    } 
```

在`OpenReadComplete`我用来下载图像的函数中，我想`newsID`从标题中获取，然后将其分配给图像，然后再将其保存到数据库中。我似乎无法访问标题。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:45:59.950

我认为您可以使用发件人阅读它。

```
WebClient c = (WebClient)sender;
        string id = c.Headers["NewsID"]; 
```

# php - 根据两列值和每组中一列的总和值对多维数组数据进行分组

> ID：14524013
> 
> 赞同：4
> 
> 时间：2013-01-25T14:39:57.690
> 
> 标签：php, arrays, multidimensional-array, grouping, composite-key

我有一个数组，它是作为来自两个单独数据库的两个数据库查询的组合创建的，它看起来类似于：

```
$arr1 = [
    ['part' => '1', 'address' => 'aaa', 'type' => '1', 'count' => 5],
    ['part' => '1', 'address' => 'bbb', 'type' => '1', 'count' => 5],
    ['part' => '1', 'address' => 'ccc', 'type' => '1', 'count' => 5],
    ['part' => '2', 'address' => 'aaa', 'type' => '1', 'count' => 5],
    ['part' => '2', 'address' => 'bbb', 'type' => '1', 'count' => 5],
    ['part' => '2', 'address' => 'ccc', 'type' => '2', 'count' => 5]
]; 
```

我正在寻找一种方法来按`part`和`type`值对这个数组进行分组。我还需要知道`count`它们被分组时的总和。

结果将类似于：

```
$arr2 = [
    ['part' => '1', 'type' => '1', 'count' => 15],
    ['part' => '2', 'type' => '1', 'count' => 10],
    ['part' => '2', 'type' => '2', 'count' => 5]
]; 
```

但我只是看不到如何做到这一点。我见过一些按单个键/值分组的示例，但不是一次按多个值分组。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T14:46:07.147

这个功能应该可以完成这项工作。

```
function groupByPartAndType($input) {
  $output = Array();

  foreach($input as $value) {
    $output_element = &$output[$value['part'] . "_" . $value['type']];
    $output_element['part'] = $value['part'];
    $output_element['type'] = $value['type'];
    !isset($output_element['count']) && $output_element['count'] = 0;
    $output_element['count'] += $value['count'];
  }

  return array_values($output);
} 
```

如果两个数据库都在同一个数据库服务器上，您将能够使用 SQL`GROUP BY`功能执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:12:51.967

**以下：**

```
$arr2 = array();
foreach ($arr1 as $a) {

  unset($a['address']);
  $key = $a['type'] . '-' . $a['part'];

  if (isset($arr2[$key])) {
    $arr2[$key]['count'] += $a['count'];
  } else {
    $arr2[$key] = $a;
  }

}
$arr2 = array_values($arr2); 
```

**会输出**

```
array
  0 => 
    array
      'part' => string '1' (length=1)
      'type' => string '1' (length=1)
      'count' => int 15
  1 => 
    array
      'part' => string '2' (length=1)
      'type' => string '1' (length=1)
      'count' => int 10
  2 => 
    array
      'part' => string '2' (length=1)
      'type' => string '2' (length=1)
      'count' => int 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T14:50:28.360

就像是

```
 $newarr=array();
 foreach ( $arr as $Key => $Value ) {
 $newarr[$Value[part]][]=$arr[$key];
 }

 foreach ( $newarr[part] as $Key => $Value ) {
 ...
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-24T14:20:21.307

多键数组分组的完整答案是

```
// *    $arr - associative multi keys data array
// *    $group_by_fields - array of fields to group by
// *    $sum_by_fields - array of fields to calculate sum in group

function array_group_by($arr, $group_by_fields = false, $sum_by_fields = false) {
    if ( empty($group_by_fields) ) return; // * nothing to group

    $fld_count = 'grp:count'; // * field for count of grouped records in each record group

    // * format sum by
    if (!empty($sum_by_fields) && !is_array($sum_by_fields)) {
        $sum_by_fields = array($sum_by_fields);
    }

    // * protected  from collecting
    $fields_collected = array();

    // * do
    $out = array();
    foreach($arr as $value) {
        $newval = array();
        $key = '';
        foreach ($group_by_fields as $field) {
            $key .= $value[$field].'_';
            $newval[$field] = $value[$field];
            unset($value[$field]);
        }
        // * format key
        $key = substr($key,0,-1);

        // * count
        if (isset($out[$key])) { // * record already exists
            $out[$key][$fld_count]++;
        } else {
            $out[$key] = $newval;
            $out[$key][$fld_count]=1;
        }
        $newval = $out[$key];

        // * sum by
        if (!empty($sum_by_fields)) {
            foreach ($sum_by_fields as $sum_field) {
                if (!isset($newval[$sum_field])) $newval[$sum_field] = 0;
                $newval[$sum_field] += $value[$sum_field];
                unset($value[$sum_field]);
            }
        }

        // * collect differencies
        if (!empty($value))
            foreach ($value as $field=>$v) if (!is_null($v)) {
                if (!is_array($v)) {
                    $newval[$field][$v] = $v;
                } else $newval[$field][join('_', $v)] = $v; // * array values 
            }

        $out[$key] = $newval;
    }
    return array_values($out);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-05T14:24:30.923

如果在我的一个项目中这个任务是必要的，我会制作一个不需要引用变量或任何迭代函数调用的片段。

在循环内部，将复合临时键声明为变量（因为它被多次使用）。使用复合键作为临时一级键将新行推入结果数组。

使用 null 合并运算符以使用给定组的预先存在的计数，如果尚未遇到该组，则使用零。然后将新`count`值添加到先前累积的`count`.

每次重复时，此技术都会无条件地覆盖遇到的组。在此过程中，数据将在整个迭代过程中使用正确`part`的`type`、 和值进行更新。`count`

当循环结束时，通过调用重新索引结果数组`array_values()`。

代码：（[演示](https://3v4l.org/2auVN)）

```
$arr1 = [
    ['part' => '1', 'address' => 'aaa', 'type' => '1', 'count' => 5],
    ['part' => '1', 'address' => 'bbb', 'type' => '1', 'count' => 5],
    ['part' => '1', 'address' => 'ccc', 'type' => '1', 'count' => 5],
    ['part' => '2', 'address' => 'aaa', 'type' => '1', 'count' => 5],
    ['part' => '2', 'address' => 'bbb', 'type' => '1', 'count' => 5],
    ['part' => '2', 'address' => 'ccc', 'type' => '2', 'count' => 5]
];

$result = [];
foreach ($arr1 as $row) {
    $compositeKey = $row['part'] . '-' . $row['type'];
    $result[$compositeKey] = [
        'part' => $row['part'],
        'type' => $row['type'],
        'count' => ($result[$compositeKey]['count'] ?? 0) + $row['count']
    ];
}
var_export(array_values($result)); 
```

输出：

```
array (
  0 => 
  array (
    'part' => '1',
    'type' => '1',
    'count' => 15,
  ),
  1 => 
  array (
    'part' => '2',
    'type' => '1',
    'count' => 10,
  ),
  2 => 
  array (
    'part' => '2',
    'type' => '2',
    'count' => 5,
  ),
) 
```

ps 理想情况下，此任务可能/应该在 sql 中执行，但我们没有提供任何具体指导的详细信息。

# javascript - Angular JS 不允许 preventDefault 或返回 false 来处理表单提交

> ID：14524020
> 
> 赞同：30
> 
> 时间：2013-01-25T14:40:08.023
> 
> 标签：javascript, angularjs, forms, http-post

我有一个表格，我想通过 AJAX 传递：

```
<form class="form-inline ng-pristine" ng-submit="sendForm()" method="post" action="/sign_up" accept-charset="UTF-8">

$scope.sendForm = (e) ->
  e.preventDefault ->
  console.log 'sendForm()'
  return false 
```

出现`console.log`，并立即交付表格。

它同时忽略`e.preventDefault()`和`return false`。

AngularJS 让我想起了蜜獾。它只是不在乎。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-03-16T21:17:24.517

我知道我参加聚会已经很晚了，但是如果您还没有弄清楚，您可以保留该操作并通过传递`$event`给该`ng-submit`函数来确保该表单实际上并未提交。然后，您可以`event.preventDefault();`在完成所有处理后在控制器中使用。

因此，在您的情况下，它将是：

```
<form class="form-inline ng-pristine" ng-submit="sendForm($event)" method="post" action="/sign_up" accept-charset="UTF-8">

$scope.sendForm = (e) ->
  // doing stuff
  e.preventDefault() 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-01-25T14:46:54.000

好吧，你不是用“Angular 方式”来做的。Angular 提供了一个名为 ng-submit 的指令，它会为您执行 preventDefault **（只要您没有在表单上指定 action 属性）**。

标记（带验证！）

```
<form name="myForm" ng-submit="sendForm()">
  <div>
    <input type="text" name="name" ng-model="data.name" required/>
    <span ng-show="myForm.name.$error.required && myForm.name.$dirty">required</span>
  </div>
  <div>
    <input type="email" name="email" ng-model="data.email" required/>
    <span ng-show="myForm.name.$error.required && myForm.name.$dirty">required</span>
    <span ng-show="myForm.name.$error.email && myForm.name.$dirty">invalid email</span>
  </div>
  <button type="submit" ng-disabled="myForm.$invalid">Submit</button>
</form> 
```

代码

```
app.controller("MyCtrl", function($scope, $http) {
    $scope.sendForm = function (){
       $http.post('/Submit/To/Url', $scope.data).success(function(data) {
           alert('done!');
       });
    };
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-12T18:03:23.407

你可以通过`$event`传入你的 ng-click 或 ng-submit 来获取事件。这就像依赖注入，除了在你的表达式中。

html

```
<form class="form-inline ng-pristine" ng-submit="sendForm($event)" method="post" action="/sign_up" accept-charset="UTF-8"> 
```

咖啡脚本

```
$scope.sendForm = (e) ->
  e.preventDefault()
  console.log 'sendForm()'
  false 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-07T07:05:29.830

这是所有其他答案的更好解决方案。

假设您将 html5 验证 required 属性附加到表单元素。

现在

```
<button ng-submit="Save($event)">SEND ME</button> 
```

现在你的功能

```
$scope.Save = function($event){

    $event.preventDefault();
    .
    . // may be an ajax request
    .

    return false;
} 
```

这不仅会触发 html5 验证，还会阻止表单提交重定向。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-13T04:40:27.877

解决此问题的其他方法是使用指令。

```
app.directive("submit", [function () {
    return {
        scope: {
            submit: "="
        },
        link: function (scope, element, attributes) {
            element.bind("submit", function (loadEvent) {
                return scope.submit(loadEvent);
            });
        }
    }
}]); 
```

* * *

```
<form submit="sendForm" method="post" action="/sign_up"> 
```

* * *

```
$scope.sendForm = function(e) {
  if ($scope.whatever)
      return true;
  else
      return false;
}; 
```

# macos - 如何在 Terminal.app 和 Vim 中滚动浏览历史记录？

> ID：14524022
> 
> 赞同：0
> 
> 时间：2013-01-25T14:40:12.960
> 
> 标签：macos, vim, terminal, scroll

我在浏览 Terminal.app 中的命令历史记录时遇到问题。看起来有什么东西可以清除它们。

看一下截屏视频。（视频）=> [http://www.screencast.com/t/JgrQv5XNOH](http://www.screencast.com/t/JgrQv5XNOH)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:19:58.363

解决方案是 SIMBL + MouseTerm。

# javascript - jQuery推送功能

> ID：14524024
> 
> 赞同：2
> 
> 时间：2013-01-25T14:40:15.713
> 
> 标签：javascript, jquery, arrays, array-push

我正在开发三星 SDK 并修改智能电视的 javascript 应用程序。我偶然发现了这段代码，但我不明白它是做什么`if($('.menuButton').push()){...`的。本机推送功能没有被覆盖，但这仍然有效。我认为 push 会将一个元素附加到数组中，但事实并非如此

```
if(direction==tvKey.KEY_ENTER){
        if($('.menuButton').push()){
            $('.simple_menu').slideDown('easy');
     ........ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T14:44:13.827

调用`.push(x)`JQuery 选择器的行为与调用`.push(x)`Javascript 中的普通数组相同。

来自[W3Schools](http://www.w3schools.com/jsref/jsref_push.asp)和[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)：

> push() 方法将新项目添加到数组的末尾，并返回新的长度。

和

> 返回： 调用该方法的对象的新长度属性。

如果没有参数传递给`.push()`，则数组保持原样，并且仍然返回长度。所以这里发生的是数组长度被返回并用于评估`if`语句。

示例：以下将返回`p`标签的数量：

```
$("p").push(); 
```

**但请注意：** JQuery 对象 的`.push`方法[标记为仅供内部使用](https://github.com/jquery/jquery/blob/master/src/core.js#L263)，因此**不应依赖**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:14:25.663

**不应依赖此方法。**不要使用它。

`push()`是[在 jQuery 对象](https://github.com/jquery/jquery/blob/master/src/core.js#L263)（这是一个类似数组的对象）上定义的，它映射到本机`Array.prototype.push()`方法，但它仅供内部使用，未记录在案，您无法确定它在未来版本中是否会以相同的方式工作。

在这段代码中，它似乎是用来获取jQuery对象中元素的数量（这是native[`.push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)所做的，它返回`length`属性的值）。

但是有一个记录的方法可以做到这一点：

```
$('.menuButton').length 
```

该代码依赖于这样一个事实，即如果`length`为 0，则在转换为布尔值时它将`false`在 Javascript 中求值，因此该`if`块中的代码仅在 jQuery 对象不为空时才会运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T14:43:09.107

我不确定是什么`$().push`，或者它是否存在（不要与本机 JavaScript`array.push()`方法混淆），但您可能正在寻找[`$().add`](http://api.jquery.com/add/)：

> 给定一个表示一组 DOM 元素的 jQuery 对象，.add() 方法从这些元素的并集和传递给该方法的元素构造一个新的 jQuery 对象。

另请注意，jQuery 对象永远不会为假，您的 if 语句可能应该是：

```
if($('.menuButton').add(something).length > 0) { 
```

编辑：看起来您正在使用**仅限内部、未记录且不受支持**的 jQuery 方法。如果您想获取当前 jQuery 对象的长度（这`$().push()`似乎是这样做的），只需使用`length`：

```
if($('.menuButton').length > 0) { 
```

# c# - 实体框架过滤 GrandChildren

> ID：14524030
> 
> 赞同：0
> 
> 时间：2013-01-25T14:40:29.293
> 
> 标签：c#, frameworks, entity

对实体框架来说还是很新的。如果这是一个菜鸟问题，请原谅我。希望有人可以对此有所了解。

我正在尝试从 3 个相关表中选择数据。

```
Leagues -> Teams -> Rosters -> 
```

关系是`League.LeagueID => Team.LeagueID => Roster.TeamID`

在名册表中有一个`PlayerID`列

我需要一个可以选择名册拥有的所有联赛的查询`PlayerID = 1`

无论我尝试什么，我似乎都无法过滤孙子记录上的结果。在互联网上也找不到太多。

我找到了一种使用匿名类型的方法，但它们是只读的，因此我可以更改数据。我必须能够在数据返回后更新数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:43:10.887

```
db.Leagues.Where(l => l.Teams.Any(t => t.Roster.PlayerID == 1)); 
```

生成的 SQL 应该可以得到你想要的，即使它看起来不可读；）

如果您想专门使用内部连接来执行此操作，可以使用如下代码执行此操作：

```
from l in db.Leagues
join t in db.Teams on l.LeagueID equals t.LeagueID
join r in db.Rosters on t.TeamID equals r.TeamID
where r.PlayerID = 1
select l 
```

**更新**

要处理急切加载子关联，请使用`Include()`：

```
((from l in db.Leagues
join t in db.Teams on l.LeagueID equals t.LeagueID
join r in db.Rosters on t.TeamID equals r.TeamID
where r.PlayerID = 1
select l) as ObjectQuery<League>).Include(l => l.Teams.Select(t => t.Rosters)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:28:48.007

```
db.Roasters.Where(r=>r.PlayerId ==1).Select(r=>r.Team).Select(t=>t.League).Distinct() 
```

如果 Roaster 有很多球队并且球队有很多联赛，你可以使用`.SelectMany`而不是`.Select`

`.SelectMany`来自[MSDN](http://msdn.microsoft.com/en-us/library/bb534336.aspx)的示例：

```
PetOwner[] petOwners = 
                    { new PetOwner { Name="Higa, Sidney", 
                          Pets = new List<string>{ "Scruffy", "Sam" } },
                      new PetOwner { Name="Ashkenazi, Ronen", 
                          Pets = new List<string>{ "Walker", "Sugar" } },
                      new PetOwner { Name="Price, Vernette", 
                          Pets = new List<string>{ "Scratches", "Diesel" } } };

                // Query using SelectMany().
                IEnumerable<string> query1 = petOwners.SelectMany(petOwner => petOwner.Pets); 
```

# jquery - 有没有更好的方法来编写这个动态 jQuery 页码加载器？

> ID：14524033
> 
> 赞同：2
> 
> 时间：2013-01-25T14:40:37.107
> 
> 标签：jquery, html, css

目前我正在使用一个寻呼机，当您单击页码时会加载页面。目前，代码显示当前 10 个最接近的页面，然后显示第一页、上一页、下一页和最后一页的箭头。

我的目标是创建 jQuery 以`#pages`使用正确的数字动态更新 div 和/或在用户位于第一页或最后一页时删除箭头。

**HTML**

```
<div id="pages">
    <a href="1" class="first">&laquo;</a>
    <a href="1" class="previous">&lsaquo;</a>    
    <span class="current">2</span>  
    <a href="3">3</a>
    <a href="4">4</a>
    <a href="5">5</a>
    <a href="6">6</a>
    <a href="7">7</a>
    <a href="8">8</a>
    <a href="9">9</a>
    <a href="10">10</a>
    <a href="11">11</a>   
    <a href="3" class="next">&rsaquo;</a>
    <a href="128" class="last">&raquo;</a>
</div> 
```

**用于最高点击次数的示例 jQuery**

```
//change page numbers if highest number clicked
$(document).on("click", "#pages a", function(){
    if($(this).index() == 11){
        $("#pages :nth-child(3)").remove();
        $("#pages a:nth-child(11)").after('<a href="'+ (parseInt($(this).text()) + 1) + '" rel="nofollow" class="current">'+ (parseInt($(this).text()) + 1) + '</a>');
    }
}); 
```

这是一个 jFiddle，其中包含我目前拥有的工作示例：

[http://jsfiddle.net/84NaC/5/](http://jsfiddle.net/84NaC/5/)

您可以在 jFiddle 示例中看到，如果您单击下方箭头或最低数字，则将删除最低数字并插入一个新的高数字。评论解释了这个位是如何工作的。

**问题**

目前的方法有点问题，我对它的功能不太满意，有没有更可靠的方法来做我正在寻找的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:39:27.117

我玩过你的 JSFiddle 并将 HTML 修改为

```
<div id="content">Default</div>
<div id="pages">
    <a href="1" class="goto-first-page">&laquo;</a>
    <a href="#" class="goto-previous-page">&lsaquo;</a>
    <a href="1" class="goto-page">1</a>
    <a href="2" class="goto-page current-page">2</a>
    <a href="3" class="goto-page">3</a>
    <a href="4" class="goto-page">4</a>
    <a href="5" class="goto-page">5</a>
    <a href="6" class="goto-page">6</a>
    <a href="7" class="goto-page">7</a>
    <a href="8" class="goto-page">8</a>
    <a href="9" class="goto-page">9</a>
    <a href="10" class="goto-page">10</a>
    <a href="11" class="goto-page">11</a>
    <a href="#" class="goto-next-page">&rsaquo;</a>
    <a href="128" class="goto-last-page">&raquo;</a>
</div> 
```

定义了一些函数

```
function update_page_content(n)
{
    $('#content').html('Page ' + n + ' Content');
}

function update_page_range(lower_bound)
{
    var range = range_last_page - range_first_page;
    range_first_page = lower_bound;
    range_last_page = lower_bound + range;
    $('.goto-page').each(function(index) {
        $(this).attr('href', lower_bound + index).text(lower_bound + index);
    });

}

function goto_page(n) {
    // adjust current page
    var current = $('.goto-page[href="' + n + '"]');
    if (current.length == 0) {
        if (n <  range_first_page) {
            if (n >= first_page) {
                var lower_bound = Math.max(first_page, n - 5);
                update_page_range(lower_bound);
                current = $('.goto-page[href="' + n + '"]');
            }
        } else if (n > range_last_page) {
            if (n <= last_page) {
                var upper_bound = Math.min(last_page, n + 5);
                update_page_range(upper_bound - 10);
                current = $('.goto-page[href="' + n + '"]');
            }
        }
    }

    if (current.length > 0) {
        // set content
        update_page_content(n);

        $('.goto-page').removeClass('current-page');
        current.addClass('current-page');
    }
} 
```

然后`click()`单独设置 s

```
$('.goto-previous-page').click(function () {
    var n = $('.current-page').attr('href');
    goto_page(+n - 1);
    return false;
});
$('.goto-next-page').click(function () {
    var n = $('.current-page').attr('href');
    goto_page(+n + 1);
    return false;
});
$('.goto-first-page, .goto-last-page, .goto-page').click(function () {
    var n = $(this).attr('href');
    goto_page(+n);
    return false;
}); 
```

完整[的 JSFiddle](http://jsfiddle.net/84NaC/12/)

# android - 当前工作目录被预先添加到 import 语句中，破坏了路径

> ID：14524035
> 
> 赞同：1
> 
> 时间：2013-01-25T14:40:41.127
> 
> 标签：android, ant

我正在尝试设置我自己的自定义构建脚本来构建我的 Android 应用程序的发布版本。Android SDK 生成的项目根 build.xml 文件按预期工作并生成发布版本。我现在要做的是编写其他自定义构建脚本，这些脚本在进行一些预处理和最终处理后调用这个 build.xml 文件。我不想修改 build.xml 脚本。脚本如下所示：

MyCustomScript1.xml 像这样导入 .../MyAndroidProjectRoot/build.xml：

```
<import file="../build.xml"/> 
```

该项目根 build.xml 文件依次从 SDK 的工具目录中导入 build.xml 文件，如下所示：

```
<import file="${sdk.dir}/tools/ant/build.xml" /> 
```

但是我的问题是导入失败（如 MyCustomScript1.xml build.xml 导入语句中的警告消息所示）并带有以下消息：

> 找不到 /home/cknight/workspace/application/MyAndroidProjectRoot/${sdk.dir}/tools/ant/build.xml 从 /home/cknight/workspace/applictoin/MyAndroidProjectRoot/build.xml 导入

我无法从 MyCustomScript1.xml 访问 skd buld.xml 文件中的目标

为什么当前工作目录被预先添加到项目根 build.xml 文件中的 import 语句中，我该如何解决这个问题？

# c++ - 为什么我得到一个“预期的”；在我的 C++ 代码中的“RegistrationHandler”之前

> ID：14524044
> 
> 赞同：-2
> 
> 时间：2013-01-25T14:41:04.587
> 
> 标签：c++

为什么我的`expected ';' before 'RegistrationHandler'`代码中有一个，找不到错误？

```
Q_DECL_EXPORT int main(int argc, char **argv)
{
    // this is where the server is started etc
    Application app(argc, argv);

    // localization support
    QTranslator translator;
    QString locale_string = QLocale().name();
    QString filename = QString( "MyApp_%1" ).arg( locale_string );
    if (translator.load(filename, "app/native/qm")) {
        app.installTranslator( &translator );
    }

    new MyApp(&app);

    const QString uuid(QLatin1String("abc"));
    RegistrationHandler *registrationHandler = new RegistrationHandler(uuid, &app);

    return Application::exec();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:41:53.253

我重新缩进了您的代码，很难阅读。

请说明声明的`RegistrationHandler`工作原理，此代码中没有`#include`显示 s ，并且显然它也没有在包含的代码中声明。

# java - 从 Web-Inf/Lib 文件夹中排除一些 JAR

> ID：14524052
> 
> 赞同：3
> 
> 时间：2013-01-25T14:41:27.990
> 
> 标签：java, web-applications, ant

我从蚂蚁开始。我创建了一个`build.xml`来生成 Web 项目的 WAR 文件，它工作正常。

`WEB-INF/lib`然后，我进行了一些更改以从文件夹中排除所有 *.jar并且也可以正常工作。

现在我需要进行更改以排除所有 JAR 文件，但在`WEB-INF/lib`文件夹中保留一些特殊的 JAR。这个 JAR 来自我创建的其他项目。

这个想法排除了所有第三方 JAR，只将我自己的 JAR 留在`WEB-INF/lib`文件夹中。

有办法做到这一点吗？

我所有的罐子都以“fnet”开头，所以也许我可以用它来创建一些规则，但我不知道该怎么做

这是我的 Build.xml：

```
<?xml version="1.0" ?> 
<project name="warConLibs" default="build-war">
    <target name="clean">
        <delete file="c:/projweb.war"/>
        <delete file="c:/projweb_sl.war"/>
    </target>   

    <target name="build-war">
        <war destfile="c:/projweb.war" webxml="./WebContent/WEB-INF/web.xml">
            <fileset dir="./WebContent">
                <include name="**/*.*"/>            
            </fileset>

            <classes dir="./bin"/>
        </war>
    </target>

    <target name="build-war-sin-libs">
        <war destfile="c:/projweb_sl.war" webxml="./WebContent/WEB-INF/web.xml">
            <fileset dir="./WebContent">
                <include name="**/*.*"/> 
                <exclude name="**/*.jar"/>      
            </fileset>

            <classes dir="./bin"/>
        </war>
    </target>   
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-30T12:56:06.543

[文档](https://ant.apache.org/manual/Tasks/war.html)中给出了排除 jar 文件的正确方法。如果有人遇到同样的问题，他们可以参考这个链接。

这个例子取自文档，这里我们`jdbc1.jar`从`lib`

```
Assume the following structure in the project's base directory:

thirdparty/libs/jdbc1.jar
thirdparty/libs/jdbc2.jar
build/main/com/myco/myapp/Servlet.class
src/metadata/myapp.xml
src/html/myapp/index.html
src/jsp/myapp/front.jsp
src/graphics/images/gifs/small/logo.gif
src/graphics/images/gifs/large/logo.gif
then the war file myapp.war created with

<war destfile="myapp.war" webxml="src/metadata/myapp.xml">
  <fileset dir="src/html/myapp"/>
  <fileset dir="src/jsp/myapp"/>
  <lib dir="thirdparty/libs">
    <exclude name="jdbc1.jar"/>
  </lib>
  <classes dir="build/main"/>
  <zipfileset dir="src/graphics/images/gifs"
              prefix="images"/>
</war>

will consist of
WEB-INF/web.xml
WEB-INF/lib/jdbc2.jar
WEB-INF/classes/com/myco/myapp/Servlet.class
META-INF/MANIFEST.MF
index.html
front.jsp
images/small/logo.gif
images/large/logo.gif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T00:20:08.343

您可能想再次阅读有关`war`Ant 任务的信息：[https ://ant.apache.org/manual/Tasks/war.html](https://ant.apache.org/manual/Tasks/war.html)

正确的语法是：

```
<war destfile="..." webxml="...">
    <lib dir="WebContent/WEB-INF/lib">
        <include name="fnet*.jar"/>
    </lib>
    <classes dir="bin"/>
</war> 
```

# excel - 通过列名引用单元格

> ID：14524053
> 
> 赞同：3
> 
> 时间：2013-01-25T14:41:30.857
> 
> 标签：excel, vba

我想更新工作簿中单元格的内容。我的代码看起来有点像这样：

```
ProductionWorkBook.Sheets("Production Schedule").Cells(StartRow, 1).Value = EstJobName(i) 
```

使用`Cells(StartRow, 1)`其中 StartRow 是一个预先声明和预先定义的整数变量来引用单元格，它指定行，“ `1`”表示列。

编辑：现在，我想更改此代码以改为通过**列 HEADERS**引用列。

例如，一列的标题是：“Fab Hours Date”，我该如何引用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T14:46:00.397

是的，您可以简单地使用引号中的列的字母名称：

```
Cells(StartRow, "A") 
```

编辑以回答您的进一步问题：要查找特定的列名，请尝试以下操作：

```
columnNamesRow = 1           ' or whichever row your names are in
nameToSearch = "Fab Hours"   ' or whatever name you want to search for
columnToUse = 0
lastUsedColumn = Worksheets("Foo").Cells(1, Worksheets("Foo").Columns.Count).End(xlToLeft).Column

For col = 1 To lastUsedColumn
   If Worksheets("Foo").Cells(columnNamesRow, col).Value = nameToSearch Then
      columnToUse = col
   End If
Next col

If columnToUse > 0 Then
' found the column you wanted, do your thing here using "columnToUse" as the column index
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T15:40:59.483

这里有两个不同的功能来获得你想要的。要使用它们，您必须将它们放入您的代码中。

```
Function ColumnNumberByHeader(text As String, Optional headerRange As Range) As Long
    Dim foundRange As Range
    If (headerRange Is Nothing) Then
        Set headerRange = Range("1:1")
    End If

    Set foundRange = headerRange.Find(text)
    If (foundRange Is Nothing) Then
        MsgBox "Could not find column that matches header: " & text, vbCritical, "Header Not Found"
        ColumnNumberByHeader = 0
    Else
        ColumnNumberByHeader = foundRange.Column
    End If
End Function

Function ColumnNumberByHeader2(text As String, Optional headerRange As Range) As Long
    If (headerRange Is Nothing) Then
        Set headerRange = Range("1:1")
    End If
    On Error Resume Next
    ColumnNumberByHeader2 = WorksheetFunction.Match(text, headerRange, False)
    If Err.Number <> 0 Then
        MsgBox "Could not find column that matches header: " & text, vbCritical, "Header Not Found"
        ColumnNumberByHeader2 = 0
    End If
    On Error GoTo 0
End Function 
```

示例调用：

```
 ColumnNumberByHeader ("Extn")
 ColumnNumberByHeader("1718", Range("2:2")) 
```

或者在你的情况下：

```
ProductionWorkBook.Sheets("Production Schedule"). _
Cells(StartRow, ColumnNumberByHeader("Fab Hours Date")).Value = EstJobName(i) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T14:46:10.043

```
ProductionWorkBook.Sheets("Production Schedule").Range("A" & StartRow).Value = EstJobName(i) 
```

除非您的意思是该列是您定义的命名范围？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T14:46:31.340

```
ProductionWorkBook.Sheets("生产计划").Range("E"& StartRow).Value = ...

```

将完成这项工作。

但请记住，使用像列字母这样的硬编码引用会冒着在编辑工作表时宏中断的风险（例如插入一列）。因此，最好使用命名范围并`Offset`访问：

```
ProductionWorkBook.Sheets("生产计划").Range("StartCell").Offset(StartRow-1).Value

```

现在您只需要为`StartCell`您的第一个单元格提供名称（确保它是名称管理器中的本地名称）

# c++ - C++ 中的子字符串

> ID：14524054
> 
> 赞同：0
> 
> 时间：2013-01-25T14:41:35.277
> 
> 标签：c++, string, substring

这是我的 C++ 代码。

```
int main(){
        string str("xxxxx     250 15");
        string data(str,10,13);

        cout<<data;
    return 0;
} 
```

在这里，我需要从上面的字符串中获取值“250”。我的总字符串大小为 16。运行此程序后，我得到以下输出。

250 15。但我给出的索引只得到“250”。但我得到错误的答案。它给了我一个结果，直到字符串结束。为什么我得到结果 "250 15" ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T14:42:21.360

`10,13`错了，你不应该给它一个范围，而是字符的开头和数量 - 即`10,3`- 从字符 10 开始，给我 3 个字符。

```
string data(str,10,3); 
```

# azure - 如何在 Azure 上为 Web Sites Preview 选择 Windows Server 2012

> ID：14524055
> 
> 赞同：0
> 
> 时间：2013-01-25T14:41:40.697
> 
> 标签：azure, azure-web-app-service

如何为 Azure 上的网站预览选择 Windows Server 2012？或者 Server 2012 还不能用于 Web 站点预览？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:47:00.780

您无需为 Windows Azure 网站选择 Windows Server 2012（或任何操作系统类型）。仅当您将应用程序部署为云服务 (PaaS) 或创建 Windows Azure 虚拟机 (IaaS) 时才选择它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:47:26.287

我不相信您可以选择带有 Windows Azure 网站的操作系统版本。如果您的应用程序具有特定于操作系统的需求，您可能应该考虑云服务。

# google-analytics - 谷歌分析与 Flurry 分析

> ID：14524056
> 
> 赞同：13
> 
> 时间：2013-01-25T14:41:41.047
> 
> 标签：google-analytics, flurry

在我的应用程序中：

Flurry 展示了超过 11,000 名新用户。

我在应用程序中也有谷歌分析，它显示了 8,200 名唯一访问者。

有没有人有这方面的经验，并且可以引导我找到解决为什么会出现这种数字差异的方向。

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-30T07:04:55.037

Flurry 和 Google Analytics 报告“新用户”的方式有两个主要区别。

1) Flurry 着眼于独特的设备，而不是用户 ID。这意味着如果用户使用相同的用户 ID 在多台设备上安装应用程序，Google 会将其计为 1 次销售，而 Flurry 会将其计为多个“新用户”。

2) Flurry 仅在用户启动应用程序时计算用户，而不是在安装时计算用户。这意味着如果 Google Analytics 今天报告了“安装”，但用户明天启动了该应用程序，Flurry 系统明天会将其视为新用户。

全面披露：我在 Flurry 工作

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-30T19:06:37.443

我发现无论是谁设置了我们的 Google 帐户，都将其设置为“Web”配置文件，而不是“App”配置文件。在谷歌的最佳实践指南中，它指出如果你这样做，结果是不可预测的！我可能会将此添加为这个特定问题的答案

# ios - 如何在另一个视图中打开图像？

> ID：14524058
> 
> 赞同：0
> 
> 时间：2013-01-25T14:41:48.440
> 
> 标签：ios, objective-c, image, uiimagepickercontroller

我正在尝试制作具有 2 个视图的 iOS 应用程序。第一个视图包含两个按钮：相机和库。当我选择图书馆时，我访问相机胶卷。我想选择一张照片并在另一个视图中打开它。直到现在我写这个函数

```
-(IBAction) getPhoto:(id) sender {
    UIImagePickerController * picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;

    if((UIButton *) sender == choosePhotoBtn) {
        picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    } else {
        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    }

    [self presentViewController:picker animated:YES completion:nil];

}   

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [picker dismissViewControllerAnimated:YES completion: Nil];
    imageView.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
} 
```

女巫在同一视图中打开我的图像。如何在另一个视图中打开此图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:56:15.697

你可以做这样的事情

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    [picker dismissViewControllerAnimated:YES completion:^{
        YourSeconViewController *svc = [[UIViewController alloc] initWithNibName:@"YourSeconViewController" bundle:nil];
        svc.imageView.Image = image;
        [self presentViewController:svc animated:YES completion:nil];
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:51:26.007

我建议的步骤是：

1.  确保您声明了一个视图控制器子类，最好使用 xib 文件，并确保其中包含图像视图；
2.  如果您不使用任何导航控制器，请创建一个并使其成为窗口的根视图控制器；
3.  推送一个视图控制器并将其图像视图的图像设置为您要设置的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:19:16.843

在同一个视图控制器的另一个视图中显示图像非常简单 - 假设您在 viewController 中引用了新视图，只需使用它：

```
 NewImageView.image = ... 
```

我假设您的意思是要将图像传递给另一个视图*控制器*。

为此，您应该从您的`imagePickerController:didFinishPickingMediaWithInfo:`方法启动到新 viewController 的转换。

在您的新视图控制器中，您应该声明一个可以设置的公共属性：

```
@property (monatomic, strong) UIImage* Image; 
```

您可以在转换到新视图控制器之前在新视图控制器上设置该属性，并在新视图控制器的 viewWillAppear 中使用该属性来设置 imageView 的内容。

您如何进行转换取决于您的应用程序的设计。例如，您可以使用 Segue，在这种情况下，您可以启动 segue`didFinishPickingMediaWithInfo:`并将新视图控制器的属性设置为`prepareForSegue`. 或者您可以直接创建新的 VC：

```
 MyCustomViewController* viewController = [[MyCustomViewController alloc] init];

   //pass the image ref to the new view controller here
  ViewController.image = image;

   //modally present, no navController
  [self presentViewController:viewController animated:YES];

   //alternatively, push via a nav controller
  [self.navigationController pushViewController:viewController animated:YES]; 
```

# php - Rest API 的令牌认证

> ID：14524065
> 
> 赞同：1
> 
> 时间：2013-01-25T14:42:01.630
> 
> 标签：php, codeigniter, expressionengine

我正在开发一个模块，以通过 REST 访问表达式引擎后端（控制面板）的某些信息。

我已经制定了 REST 功能和信息的传递，它可以工作并经过测试。

目前我的一个模块控制面板有几个功能，当我登录时返回一组信息，我将会话 ID 与请求一起传递。

但是，在会话之外，我无法访问 API，因为它会将我重定向到登录。我正在寻求绕过某些控制器功能的经典身份验证，并将其替换为基于 API 令牌的身份验证，该身份验证将与 Web 请求一起传递。

我试过搜索如何禁用后端某些页面的身份验证，但找不到任何东西。如果有人能指出正确的方向，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:08:52.877

查看模块操作。这些 URL 看起来像`/?ACT=123`where`123`指的是该模块中的特定模块和方法。这些 URL 不需要任何身份验证即可命中。您可以控制方法所需的身份验证。

Stephen Lewis 在他的博客上有一篇很好的文章（EE 开发文档并没有很好地解释动作，如果有的话）。[http://experienceinternet.co.uk/blog/a-brief-introduction-to-expressionengine-actions/](http://experienceinternet.co.uk/blog/a-brief-introduction-to-expressionengine-actions/)

我个人可以通过使用 API 来保证这种方法，因为我们的团队为 ExpressionEngine 构建了一个使用这些“动作”URL 的 CRUD Rest API。

# c# - 如何将 xml 文件复制到文件夹中并隐藏它？

> ID：14524067
> 
> 赞同：2
> 
> 时间：2013-01-25T14:42:09.783
> 
> 标签：c#

使用此代码，我可以从 Internet 复制 xml 文件并将其保存在文件夹中。

```
WebClient client = new WebClient();
client.DownloadFile("http://www.studiovincent.net/list.xml", "test.xml"); 
```

代码工作正常，但我需要隐藏 test.xml 文件（复制到文件夹中的文件），以便只有当我打开“显示隐藏的文件和文件夹”时它才可见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T14:47:39.250

您需要设置文件属性，`File.SetAttributes`用于此。虽然我也先使用`File.GetAttributes`，以便保留任何现有属性。

```
string filename = "test.xml";
FileAttributes attr = File.GetAttributes(filename);

attr |= FileAttributes.Hidden;

File.SetAttributes(filename,attr); 
```

MSDN：

[http://msdn.microsoft.com/en-us/library/system.io.file.setattributes.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.setattributes.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T14:47:49.597

File.SetAttributes("pathToFile",FileAttributes.Hidden)

# file - 带有包含空格的键的属性文件

> ID：14524069
> 
> 赞同：0
> 
> 时间：2013-01-25T14:42:11.053
> 
> 标签：file, properties, groovy, map

我想直接将属性文件读入地图。我找到了一个例子，例如：

```
def propsFile = new File(fileName)
props.load(propsFile.newDataInputStream())
props.each { k,v->
     println "${k} /// ${v}\n"
} 
```

好的，它适用于如下线：

```
toto=titi 
```

即键不包含空格的地方。但我必须处理一个属性文件，其中键看起来像

```
This is a key (example)=Value 
```

关键在哪里`This is a key (example)`。上面的例子根本不起作用，因为它给出了第一个单词 (This) 作为键。那么，有没有办法告诉键值分隔符是 = 而没有其他字符。

如果没有，我将逐行阅读并拆分......但如果有的话，我更喜欢更优雅的解决方案。

感谢您的帮助 JLP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:57:25.390

如果您的属性文件不符合规范（键名中有转义空格），那么我相信您将不得不编写自己的解析器，并逐行执行。

不过不太难，你应该可以使用类似的东西：

```
String props = '''toto = titi
                 |foo=bar
                 |# comment
                 |
                 |way and hay = yes'''.stripMargin()

Map properties = props.split( '\n' )
                      .findAll { !it.startsWith( '#' ) && it.trim().length() }
                      .collectEntries { line ->
  line.tokenize( '=' )*.trim()
} 
```

# android - 确定服务的启动方式

> ID：14524076
> 
> 赞同：0
> 
> 时间：2013-01-25T14:42:35.083
> 
> 标签：android, android-service

还没有找到类似的问题，如果有，请指点我。

基本上我想知道一个正在运行的服务是如何启动的。主要是我感兴趣的是，如果服务是用 StartService() 启动的，不管它有多少绑定。

所以，我正在寻找类似的东西：

```
if(service has (also) been started with startService) {
   // do something
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:48:51.323

您可以保存传入的标志和意图`onStartCommand`。如果您想了解自己是如何开始的，请参考这些内容。

# c# - 使用 Moq 模拟 COM+ 包装器失败

> ID：14524083
> 
> 赞同：0
> 
> 时间：2013-01-25T14:42:56.753
> 
> 标签：c#, unit-testing, lambda, moq

我有一个 COM+ 接口的包装类，我需要模拟它。

这是 Socket 接口上该方法的签名

```
int MakeRequest(object ServiceId, object Host, object Port,
                object Request, ref object pResponse); 
```

我正在使用 Moq 来尝试模拟它，就像这样

```
object pResponse = String.Empty;
var socket = new Mock<Socket>();
socket.Setup(x => x.MakeRequest(It.IsAny<int>(), It.IsAny<string>(), 
                                It.IsAny<int>(), It.IsAny<string>(),
                                ref pResponse))
            .Returns((int i, string s, int ii, string ss, object o) => 
            { 
                o = "Response";
                return 0;
            }); 
```

但是对于 Returns 中的 'o' 参数，我得到

```
The value passed to the method is never used because it is overwritten in the 
method body before being read 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:50:33.817

这是因为`ref`关键字。看到这些问题。第二个对此进行了一些尝试，尽管它们可能无法满足您的需求。

[不能在 lambda 表达式中使用 ref 或 out 参数](https://stackoverflow.com/questions/1365689/cannot-use-ref-or-out-parameter-in-lambda-expressions)

[在 Moq 中分配 out/ref 参数](https://stackoverflow.com/questions/1068095/assigning-out-ref-parameters-in-moq)

如果您可以重构以避免使用`ref`，请这样做。否则，手卷存根。

```
public class StubSocket
{
    int MakeRequest(object ServiceId, object Host, object Port, object Request, ref object pResponse)
    {
        pResonse = "Response";
        return 0;
    }
} 
```

# ruby-on-rails - 为什么使用 Kaminari 时此分页不起作用？

> ID：14524091
> 
> 赞同：0
> 
> 时间：2013-01-25T14:43:11.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3, kaminari

这是错误和我的代码。我正在使用`Kaminari`

```
Error:  undefined method `model_name' for #<Array:0x0000001d5abeb0>
73:     <%= page_entries_info(@communities).html_safe %> 
```

**看法**

```
<%= page_entries_info(@communities).html_safe %> 
```

**社区控制器**

更新*这就是我现在获取的方式

```
 @search = Community.search do  
    fulltext params[:search]
        with(:location_id, params[:location]) if params[:location].to_i >0           
        with(:type_id, params[:type]) if params[:type].to_i >0
        order_by :cached_votes_up, :desc
        paginate :page => params[:page], :per_page => 10
    end

    @communities = @search.results 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:52:43.190

您的翻译有问题：

```
"%{total} total records. Displaying　%{first} - %{last}" 
```

当您调用此翻译时，这里需要 3 个参数： variables `total`，但“您”只给出这 2 个变量：&`first``last``entry_name``count`

您能否提供有关该`page_entries_info`方法的更多信息？

# 编辑：

正如您评论的那样，[https ://github.com/amatsuda/kaminari/blob/master/lib/kaminari/helpers/action_view_extension.rb#L102](https://github.com/amatsuda/kaminari/blob/master/lib/kaminari/helpers/action_view_extension.rb#L102) **第 102-109 行**：您需要在 .yml 翻译文件中包含一些内容像这样：

```
en:
  helpers:
    page_entries_info:
      one_page:
        display_entries: "%{count} total records for %{entry_name}."
      more_pages:
        display_entries: "%{total} total records. Displaying　%{first} - %{last}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T14:55:23.637

如果你同时使用**kaminari**和**will_paginate**，你肯定会遇到这个错误。简而言之，**kaminari**和**will_paginate**互不兼容。

如果您正在使用`rails_admin`（使用 kaminari 进行分页）并且还使用`will_paginate`，则需要将以下代码添加到 config 目录下的初始值设定项之一，或者您可以创建一个新文件，假设名称为 'will_paginate' 添加代码，并将其放入初始化程序目录。

```
if defined?(WillPaginate)
  module WillPaginate
    module ActiveRecord
      module RelationMethods
        def per(value = nil) per_page(value) end
        def total_count() count end
      end
    end
    module CollectionMethods
      alias_method :num_pages, :total_pages
    end
  end
end 
```

# java - 定位到地址

> ID：14524093
> 
> 赞同：1
> 
> 时间：2013-01-25T14:43:13.817
> 
> 标签：java, android, geocoding

我正在使用以下代码将位置转换为地址（字符串）。它工作正常，但有时返回的字符串是城市级别的，例如：“以色列，特拉维夫”。

这对我来说非常糟糕，因为我需要向我的用户展示他们在哪里，而且城市级别的位置非常不详细。跟我代码有关吗？或者是一些无法处理的异常。

```
public String reverseGeocode(Location loc) 
{
    Geocoder geocoder = new Geocoder(this, Locale.getDefault());

    List<Address> addresses = null;
    try {
        addresses = geocoder.getFromLocation(loc.getLatitude(), loc.getLongitude(), 1);
    } catch (IOException e) {
        e.printStackTrace();
        // Update address field with the exception.
        return e.toString();
    }
    if (addresses != null && addresses.size() > 0) 
    {
        Address address = addresses.get(0);
        // Format the first line of address (if available), city, and country name.
        String addressText = String.format("%s, %s, %s",
                address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                address.getLocality(),
                address.getCountryName());
        // Update address field on UI.
       // Message.obtain(mHandler, UPDATE_ADDRESS, addressText).sendToTarget();
        return addressText;
    }
    return "";
} 
```

# internet-explorer - 仅内部网络上的 IE 仅错误

> ID：14524098
> 
> 赞同：0
> 
> 时间：2013-01-25T14:43:30.657
> 
> 标签：internet-explorer, doctype, internal

我最近刚刚启动了我们的新网站，它应该可以正常工作，在内部开发过程中从未遇到过问题。一旦实际部署到域，但是为了替换旧站点，我们开始只有内部用户抱怨在每个页面上的 IE（主要是 IE8）中弹出安全警报消息。我已经验证这不是我们本地网络之外的问题。警报对话框指出：

![在此处输入图像描述](../Images/04313cb66bd290e273bbfaf8b8e41752.png)

无论选择“是”还是“否”，页面都将呈现完全相同的内容。这发生在每个页面上，但是一旦您选择“是”，在您关闭/打开浏览器之前，它将不会显示该页面。

我对此进行了相当多的研究，我怀疑以下几点：

1.  Doctype ...我已将其设置为html5，如图所示

![在此处输入图像描述](../Images/76db60576a9e7ef56cab954b4bd69174.png)

2.  浏览器模式和文档模式...我可以通过在 IE 开发工具中将这两者都更改为 8 来显示错误。似乎只要我可以将所有内容保持在 IE9 模式下，错误就不会显示。

3.  模式的 Meta 标签...我将其设置为 IE-edge, chrome-1（见上面的截图）

4.  网站上的任何内容都在 https:// 之下，所以我知道这不是原因。

5.  根本没有任何跨域 js 或任何疯狂的事情发生。

请注意，我工作的组织很大，我们在内部管理自己的 DNS。直到我将站点翻转到新域上才出现此错误。因此，它在 www.dev-mysite.com 域的开发过程中运行良好......但是一旦我将其更改为 www.mysite.com，警报就会立即开始出现。

我知道我可以通过更改每个用户机器上的区域权限来消除此错误，但这不是一个选项。感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:25:59.430

好吧，我想通了。这是由于我必须参考托管在 Google 上的 CSS3 媒体查询 .js 文件。它在 IE 条件语句中，因此 IE 仅警告:)。完全删除此文件是我的方案唯一可行的解​​决方案。

岩石。

# yii - yii基本分页不起作用

> ID：14524099
> 
> 赞同：1
> 
> 时间：2013-01-25T14:43:31.270
> 
> 标签：yii, pagination

我正在尝试使用基本分页列出结果，但它不起作用。我看到了分页栏，但所有结果都在一个镜头中列出，而不是一页一页。当我点击一个数字时，没有任何变化。

这是我第一次尝试分页。我以为我犯了一个简单的错误，但找不到它。我刚刚尝试了一个简单的教程，例如这个链接。 [http://www.yiiframework.com/doc/api/1.1/CPagination](http://www.yiiframework.com/doc/api/1.1/CPagination)

有任何想法吗？

控制器：

```
 $Criteria = new CDbCriteria();
    $Criteria->order = "creation_date desc";
    $resultSet=MyTable::model()->findAll($Criteria);
    $count=  count($resultSet);

    $pages = new CPagination($count);
    $pages->applyLimit($Criteria);
    $pages->pageSize = 7;

    $this->renderPartial('index',array('resultSet'=>$resultSet,'pages' => $pages)); 
```

看法：

```
$this->widget('CLinkPager', array('pages' => $pages, "cssFile" => false));

foreach ($resultSet as $x => $res):
    echo $res->name;
endforeach; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:17:35.430

看来你已经`pageSize`在你的电话后被设置了`applyLimit()`。这意味着查询将使用默认值（我认为）30。如果您希望每页 7 个，这可能是所有内容？

# r - 具有 2 个因子和 3 个 DV 的均值折线图

> ID：14524101
> 
> 赞同：-2
> 
> 时间：2013-01-25T14:43:43.563
> 
> 标签：r, ggplot2

我正在尝试使用 ggplot2 创建一个包含因子和几个因变量的折线图。数据框的结构如下：

组时间 DVName 平均值 SE

我想生成一个折线图，其中 x=Time，y=Mean，color=DVName，linetype=Group。然而，当我尝试填写这些时，我得到了一些奇怪的结果，其中一些数据点是垂直连接的，而不是水平连接的。我还注意到，我输入数据集的顺序会对图表的外观产生影响（按组排序产生的图表与按时间排序不同）。

有什么帮助吗？

干杯! D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:52:58.207

类似的东西？模拟数据相当丑陋...

```
df <- data.frame(Group=factor(rep(1:3,20)),Time=runif(60),DVName=sample(c("a","b","c"), 60, rep=TRUE),Mean=rnorm(60))
ggplot(data=df) + geom_line(aes(x=Time, y=Mean, colour=DVName, linetype=Group)) 
```

![在此处输入图像描述](../Images/a593337abfec5293661608515281d888.png)

# algorithm - 使用 Lat Long、major、minor 和 Rotation 限定椭圆

> ID：14524103
> 
> 赞同：1
> 
> 时间：2013-01-25T14:43:47.050
> 
> 标签：algorithm, geometry

我有一个文件，其中包含一个椭圆，该椭圆具有经纬度、主要和次要距离和旋转。我可以仅使用此信息来计算椭圆沿线的所有点吗？主要目标是采用一组具有这些参数的椭圆，并让椭圆包含所有其他参数。如果它是一个最小界限会很好，但接近的东西会做。

我想我在这里看到了一个算法，它允许您获取一组点并绘制一个边界椭圆，所以我的计划是使用主要和次要纬度/经度信息来获取椭圆集的所有点并对其进行绑定不知何故。这是一个好策略吗？我认为这不会是最小的，因为轮换可能不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:34:15.077

假设这些椭圆所在的表面是平坦的（或实际上是平坦的），您可以仅使用该信息生成一系列点。可能有更有效的方法，但我在[此页面](http://mathworld.wolfram.com/Ellipse.html)上使用了等式 (13) 和 (14)来获取轴对齐椭圆上的点，然后将它们[旋转](http://en.wikipedia.org/wiki/Rotation_matrix)并偏移实际角度和位置。

我相信你将不得不迭代一个边界椭圆，[这个问题](https://stackoverflow.com/questions/1768197/bounding-ellipse)的答案提供了一个算法。我会根据每个椭圆的大小为每个椭圆生成一些点（因此，对于较大的椭圆来说更多），然后找到一个[凸包](http://en.wikipedia.org/wiki/Convex_hull_algorithms)以将您正在使用的点减少到重要的点。

# php - 在mySQL中按相关性匹配单词的一部分和顺序

> ID：14524105
> 
> 赞同：0
> 
> 时间：2013-01-25T14:44:01.550
> 
> 标签：php, mysql, sql

我正在尝试对按相关性排序的数据库进行搜索。

以下两个查询都有效，只有第一个不返回任何结果。

我曾尝试使用 IN BOOLEAN MODE，但这只会使我的 title_relevance 和 desc_relevance 字段为 0 或 1，并且我想根据术语的相关性来正确排名，而不仅仅是它是否出现。

有什么办法可以做到这一点？？

谢谢！

第一个查询：

```
SELECT 
    rcv_id,
    rcv_title,
    rcv_desc,
    (MATCH(rcv_title) AGAINST ('nur*')) AS title_relevance,
    (MATCH(rcv_desc) AGAINST ('nur*')) AS desc_relevance
FROM rc_vacancy
WHERE
    ( MATCH(rcv_title,rcv_desc) AGAINST ('nur*') )
    AND rcv_deleted = 'off'
    AND rcv_active = 'on'
    AND rcv_type = 'P'
ORDER BY title_relevance DESC, desc_relevance DESC, rcv_lastupdated 
```

第二个查询：

```
SELECT
    rcv_id,
    rcv_title,
    rcv_desc,
    (MATCH(rcv_title) AGAINST ('nurse')) AS title_relevance,
    (MATCH(rcv_desc) AGAINST ('nurse')) AS desc_relevance
FROM rc_vacancy
WHERE
    ( MATCH(rcv_title,rcv_desc) AGAINST ('nurse') )
    AND rcv_deleted = 'off'
    AND rcv_active = 'on'
    AND rcv_type = 'P'
ORDER BY title_relevance DESC, desc_relevance DESC, rcv_lastupdated 
```

不使用通配符搜索 'nur' 也会产生零结果：

```
SELECT
    rcv_id,
    rcv_title,
    rcv_desc,
    (MATCH(rcv_title) AGAINST ('nur')) AS title_relevance,
    (MATCH(rcv_desc) AGAINST ('nur')) AS desc_relevance
FROM rc_vacancy
WHERE
    ( MATCH(rcv_title,rcv_desc) AGAINST ('nur') )
    AND rcv_deleted = 'off'
    AND rcv_active = 'on'
    AND rcv_type = 'P'
ORDER BY title_relevance DESC, desc_relevance DESC, rcv_lastupdated 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:49:54.987

可能是表达式中`AGAINST`不应该包含通配符？您正在执行全文搜索，而不是类似`LIKE`查询。

# jquery - jquery datepicker [对象对象]

> ID：14524117
> 
> 赞同：1
> 
> 时间：2013-01-25T14:44:42.953
> 
> 标签：jquery, datepicker

我试图将日期`datePicker`放在 JavaScript 变量中，但变量的内容显示`[object Object]`. 你能告诉我为什么吗？

这是代码：

```
<script type="text/javascript" src="../js/jquery-1.9.0.js"></script>  
<script type="text/javascript" src="../js/jquery-ui-1.10.0.custom.min.js"></script>
<link href="datepicker.css" rel="stylesheet" type="text/css"/> 

<script type="text/javascript">  
   $(function(){  
      $('#datepicker').datepicker({             
    inline: true,              
    showOtherMonths: true,          
    altFormat: 'dd-mm-yy'
    });  
 });  

</script>  
<script type="text/javascript"> 
   var x = $('#datepicker').datepicker("getDate");
   alert(x);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:48:12.173

使用`console.log()`代替`alert()`并检查浏览器的 JavaScript 控制台。（`firebug`例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:52:06.937

正如其他人所说，日期的默认呈现是字符串“[object Object]”。您需要找到不同的方式来查看结果（例如 via`console.log`或 Firebug），或者您需要以人类可读的形式输出它，例如：

```
alert(x.toLocaleDateString()); 
```

有关详细信息，请参阅[Date.toLocaleDateString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T14:54:25.490

这是对我有用的代码...我使用类而不是 id，因为我在 asp.net 中工作...

```
 var div2Date = $(".dateDiv2").datepicker('getDate'); 
```

# html - Z-index 适用于 Firefox 和 IE，但不适用于 Chrome

> ID：14524122
> 
> 赞同：0
> 
> 时间：2013-01-25T14:45:03.917
> 
> 标签：html, css, google-chrome, z-index

我对 Chrome 中的 z-indexes 有疑问。橙色 div 应该在黑色 div 后面。它确实如此，但在 Chrome 中除外。任何人都可以帮忙吗？情况如下：

```
.page {
    height:900px;
    background:orange;
    width:80%;
    position:relative;
    z-index:8;
    top:120px;
} 
```

[http://jsfiddle.net/yXTF6/4/](http://jsfiddle.net/yXTF6/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:13:36.973

您在 top-img 类中设置 z-index，但您应该在后台类中进行设置

如果背景类本身不高于其他类，则无论如何您都无法在该类的后代中解决此问题。

编辑：

这是小提琴 - [http://jsfiddle.net/vals/cTf72/](http://jsfiddle.net/vals/cTf72/)

```
.top-img {
    height:100px;
    background:black;
    position:relative;
    z-index:9;
} 
```

我刚刚将 .top-img 中的 z-index: 9 添加到 .background

top、page 和 background 是同级的，因此它们在 z-index 之间“竞争”。但是一旦他们中的一个被选中，他们所有的后代都会归为一类，可以这么说。在top-img中设置一个z-index是没有用的，因为它没有兄弟可以竞争，并且不能改变父（背景）的z-index

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:40:55.307

正如@vals 在他的回答中提到的那样，您使用的标记是不可能的。所以我决定调整它并向你展示它是如何工作的。

如果您删除了`<div class="background">`包裹黑条和图像的内容，那么您可以让页面按照您的意愿工作。我调整了黑条`<div>`和黑条的类`<img>`，使其仍然具有与之前相同的效果。

这是[jsfiddle 的链接](http://jsfiddle.net/TuKtv/)。

这是更新的标记和 CSS。

```
<div class='top-img background'></div>
<img class="background" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSJGQ7eqRuhZQqbX1roKW8zBGVHW-VlmQq0uTGCZjDGDHCRljPp" />
<div class='top'>
</div>
<div class='page'>
</div> 
```

和 CSS

```
.background {
    position:fixed;
    width:100%;
}
.top-img {
    height:100px;
    background:black;
    z-index:9;
}
img {
    width:100%;
    z-index:7;
    top : 100px;
}
.top {
    position:fixed;
    width:60%;
    height:60px;
    top:60px;
    background:yellow;
    z-index:10;
}
.page {
    height:900px;
    background:orange;
    width:80%;
    position:relative;
    z-index:8;
    top:120px;
} 
```

# linux - 如何使用 grep（或其他 LSB 工具）计算 .po 中的空翻译？

> ID：14524124
> 
> 赞同：6
> 
> 时间：2013-01-25T14:45:21.943
> 
> 标签：linux, bash, grep, gettext

我可以使用如下命令在 vim 中搜索空翻译：

```
/""\n\n 
```

但我的任务是查找未翻译字符串的数量。任何想法如何使用每个 linux 机器都应该拥有的**标准**工具来做到这一点（请不要单独的包）。

这是包含 2 个已翻译字符串和 2 个未翻译字符串（长和短变体）的 .po 文件示例。

```
msgid "translated string"
msgstr "some translation"

msgid "non-translated string"
msgstr ""

msgid ""
"Some long translated string which starts from new line "
"and can last for few lines"
msgstr ""
"Translation of some long string which starts from new line "
"and lasts for few lines"

msgid ""
"Some long NON-translated string which starts from new line "
"and can last for few lines"
msgstr "" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T14:57:58.770

这是一种使用方法`awk`：

```
awk '$NF == "msgstr \"\"" { c++ } END { print c }' FS="\n" RS= file 
```

结果：

```
2 
```

解释：

进入`awk`段落模式。然后测试每个块中的最后一行。如果最后一行与模式完全匹配，则计算它。然后，在脚本的最后，打印出计数。如果您稍后决定要计算已翻译字符串的数量，只需更改`==`为`!=`. HTH。

* * *

从下面的评论中，处理包含空格的空行：

您需要使用正则表达式，例如：（`RS="\n{2,}|\n([ \t]*\n)+|\n$"`这可能会被简化）。但是，应该注意的是，成为正则表达式的[能力`RS`是`GNU awk`扩展](http://www.delorie.com/gnu/docs/gawk/gawk_116.html)。Other`awk`将无法以某种方式处理多字符记录分隔符。幸运的是，上述文件格式看起来相当严格，因此不需要处理包含空格的行。

如果遇到包含空格的分隔符，快速修复是调用`sed`：

```
< file sed 's/^ *$//' | awk ... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T16:47:46.307

我建议使用可用的`gettext`工具，而不是尝试`.po`直接解析文件：

```
$ msggrep -v -T -e "." test.po 
msgid "non-translated string"
msgstr ""

msgid ""
"Some long NON-translated string which starts from new line and can last for "
"few lines"
msgstr "" 
```

`msggrep`标志是：

*   `-v`反转匹配
*   `-T`将下一个模式应用于`msgstr`
*   `-e`搜索模式

即显示任何`msgstr`不匹配`/./`的，因此是空的。

由于`msggrep`没有`-c`，单行中的计数为：

```
 msggrep -v -T -e "." test.po  | grep -c ^msgstr 
```

（自 2002 年 1 月 v0.11 以来`msggrep`一直是`gettext`软件包的一部分*。LSB 核心*又名 ISO/IEC 23360-1:2006(E) 仅强制要求`gettext`和`msgfmt`二进制文件，但我还没有看到没有它的系统，所以它应该希望能满足你的要求。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T14:45:27.720

由于`awk`已经给出了（不错的）解决方案，因此还有其他 4*种*方法：

所有命令都使用您的示例和一个好的`.po`文件进行了测试。

### 使用`sed`

```
sed -ne '/msgstr ""/{N;s/\n$//p}' <poFile | wc -l
2 
```

解释：每次我找到`msgstr ""`，我合并下一行，如果我可以将换行符作为字符串的最后一个字符`s/\n$//`，我打印它们`p`。最后计算行数。

### 仅重击

不使用 bash 以外的任何二进制文件：

```
total=0
while read line;do
    if [ "$line" == 'msgstr ""' ] ;then
        read line
        [ -z "$line" ] && ((total++))
      fi
  done <poFile
echo $total
2 
```

解释：每次我找到`msgstr ""`时，我都会阅读下一行，如果为空，我会增加我的计数器。

其他 bash 方式

```
mapfile -t line <poFile
count=0
for ((i=${#line[@]};i--;));do
    [ -z "${line[i]}" ] && [ "${line[i-1]}" == 'msgstr ""' ] && ((count++))
  done
echo $count
2 
```

解释：在一个数组中读取整个`.po`文件，而不是浏览数组以查找前一个字段包含的空字段`msgstr ""`，递增计数器，而不是打印。

### Perl（在命令行模式下）

```
perl -ne '$t++if/^$/&&$l=~/msgstr\s""\s*$/;$l=$_;END{printf"%d\n",$t}' <poFile
2 
```

解释：每次我发现一个空行**并且**前一行（存储在变量中`$l`）包含`msgstr ""`然后我增加计数器。

### 破折号（不是 bash！）

```
count=0
while read line ; do
    [ "$line" = "" ] && [ "$prev" = 'msgstr ""' ] && true $((count=count+1))
    prev="$line"
  done <poFile
echo $count
2 
```

基于 perl 示例，这适用于[bash](/questions/tagged/bash "显示标记为“bash”的问题") **和** [dash](/questions/tagged/dash "显示标记为“破折号”的问题")

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T14:50:53.643

~~尝试：~~

 ~~```
grep -c '^""$' 
```~~ 

~~它计算唯一内容是两个“的行。~~

**编辑：**

根据您的评论，我发现上述内容不符合您的需求。要执行多行匹配，您可以按以下方式使用 GNU grep：

```
grep -Pzo '^msgstr ""\n\n' en.po | grep -c msgstr 
```

使用 GNU grep 2.14 测试并发现它可以工作。但是，我不知道 GNU grep 对您来说是否足够标准。

第一个 grep 的解释：

`-P`激活 Perl 正则表达式扩展。

`-z`用 null 替换行尾的换行符，允许 grep 跟踪新行。

`-o`print 'only-matching'，需要，因为`-z`正在使用；否则我们会打印整个文件。

第二个grep的解释：

`-c`计算匹配的行数，在本例中为*msgstr*。这必须在单独的`grep`语句中，`-c`如果与 一起使用将返回 1 `-z`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-25T14:52:07.003

```
grep -n ^msg your.po | grep -v '""' | uniq -D -f1 
```

这会查找以 开头的行`msg`，忽略那些只是空字符串 ( `""`) 的行，然后用于`uniq`查找重复的行（忽略`msgid`/`msgstr`字段）。

CUPS 文件的示例输出：

```
$ grep -n ^msg /usr/share/locale/es/cups_es.po | grep -v '""' | uniq -D -f1
3742:msgid "ParamCustominCutInterval"
3743:msgstr "ParamCustominCutInterval"
3745:msgid "ParamCustominTearInterval"
3746:msgstr "ParamCustominTearInterval"
3858:msgid "Quarto"
3859:msgstr "Quarto"
3967:msgid "Stylus Color Series"
3968:msgstr "Stylus Color Series"
3970:msgid "Stylus Photo Series"
3971:msgstr "Stylus Photo Series"
3973:msgid "Super A"
3974:msgstr "Super A" 
```

# .net - 异步等待方法比较

> ID：14524134
> 
> 赞同：4
> 
> 时间：2013-01-25T14:46:01.723
> 
> 标签：.net, asynchronous, task-parallel-library, async-await

我开始使用 TPL，并且有一个关于在标记为异步的被调用方法中调用 await 的重要性的问题，而不是仅仅等待调用未设为异步的方法的调用函数。

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    TBox.Text += await WebClientDownloader();
    TBox.Text += await WebClientDownloadWithAwait(); 
}

private async static Task<string> WebClientDownloadWithAwait()
{
    using (var wc = new WebClient())
    {
        return await wc.DownloadStringTaskAsync("http://google.com");
    }
}

private static Task<string> WebClientDownloader()
{
    using (var wc = new WebClient())
    {
        return wc.DownloadStringTaskAsync("http://google.com");
    }
} 
```

有区别吗？它们似乎表现相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:01:31.167

不同之处在于何时`Dispose()`调用。如果您不使用`await`，则`WebClient`d`Dispose()`在您开始下载之后和下载完成*之前。*它可能在您的特定情况下有效，但不能保证有效，因此您绝对应该`await`在这里使用。

# teradata - Teradata dbc.columns：为什么 ColumnFormat 列与表 DDL 的列定义不同？

> ID：14524139
> 
> 赞同：1
> 
> 时间：2013-01-25T14:46:25.123
> 
> 标签：teradata

我运行这个 SQL：

```
select * from dbc.columns
where
    databasename = 'mydb' and
    tablename = 'mytable' and
    columntype = 'ts' and
    1=1
order by tablename; 
```

该列是 Timestamp(6)，其 ColumnFormat 列返回`yyyy-mm-dd hh:mm:ss.s(6)`. 但是，当我使用 来查看 DDL 时`show table mydb.mytable`，该列的列格式显示为`yyyy-mm-ddbhh:mi:ss.s(6)`. 注意分钟格式字符串。dbc 视图显示`mm`，而表 DDL 显示`mi`。那是怎么回事？

# javascript - 无法使用 html 表单和 infobox.js 显示默认文本

> ID：14524145
> 
> 赞同：0
> 
> 时间：2013-01-25T14:46:35.153
> 
> 标签：javascript, forms, infobox

这里是网页设计师新手，所以我希望这些术语是正确的，并且问题不会太尴尬。我得到的是一个包含 4 个项目的 html 表单（在 html5 文档中）（尽管还会有更多）：

1.  选择一个页面
2.  第 1 页
3.  第2页
4.  第 3 页

…以及这 3 个页面中的每一页的文本，全部使用 CSS 隐藏。首次打开或刷新页面时，“选择页面”在表单菜单框中可见。当一个页面被选中时，“infobox.js”（我多年前在网上的某个地方）使该页面的文本在菜单框下方可见。完美运行。

我想要的是：第一次打开页面时，“选择页面”在表单菜单框中可见，并且第 1 页的文本已经在其下方可见。

我假设这是可能的，但我已经把头发扯掉了几天，希望解决方案对某人来说真的很容易。提前感谢您的帮助！

HTML

```
<form>
<select id="someID_1" name="someID_1" onChange="selectForm1(this.options[this.selectedIndex].value)">
<option>Choose a Page</option>
<option value="1">Page 1</option>
<option value="2">Page 2</option>
<option value="3">Page 3</option>
</select>
</form>

<div id="allForms1">
<form class="hidden">Text of Page 1</form>
<form class="hidden">Text of Page 2</form>
<form class="hidden">Text of Page 3</form>
</div> 
```

CSS

```
.hidden { display: none; } 
```

信息框.JS

```
function selectForm1(frm){
/* Select the div containing all the hidden forms */
  var hiddenForms1 = document.getElementById("allForms1");
/* Select every form within the above div and assign it to an array */
  theForm1 = hiddenForms1.getElementsByTagName("form");
/* Set the display for each of the above forms to NONE */
  for(x=0; x<theForm1.length; x++){
    theForm1[x].style.display = "none";
  }
/* If the form selected from the list exists, set its display to BLOCK */
  if (theForm1[frm-1]){
    theForm1[frm-1].style.display = "block";
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:42:32.697

好吧，我终于 - 在又一次猜测之后得到了它。这成功了：

```
<body onload="selectForm1(1)"> 
```

# c++ - 由字符串而不是整数值索引的矩阵

> ID：14524149
> 
> 赞同：2
> 
> 时间：2013-01-25T14:46:50.917
> 
> 标签：c++, string, map, stl, matrix

在 C++ 中是否有可能有一个 int 值矩阵，我可以通过字符串索引访问这些值？做类似 M["one"]["two"]++; 等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T14:48:49.653

使用`unordered_map`（在 boost 或 中`c++11`）或只是`map`在 good old 中使用`C++`。做一个`unordered_map<string, unordered_map<string, int> >`. 应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:55:09.343

这不是直接的，但既然你问了，你可能不知道`operator []()`. 您可以定义您的自定义`[]`运算符。

只是为了向您解释背后的概念：您可以定义一个类 Row 或 Column，拥有一个`std::vector<int>`. 对于此类，您可以定义`operator[]`：

```
class Row
{
public:
    int& operator[](const std::string& );
    //...
    std::vector<int> ints;
} 
```

您的班级矩阵将拥有一个`std::vector<Row>`

```
class Matrix
{
public:
    Row& operator[](const std::string& );
    //...
    std::vector<Row> rows;
} 
```

这将使您能够使用语法`Matrix m; m["one"]["two"]=2;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:06:27.297

我会将内部细节与用户界面分开。

What if you want to use a different language, for example?

Have a map from the word to the integer:

```
map<string, unsigned int> index;
index["one"] = 1;
// .etc 
```

Use the integer on a 2D array, as normal.

```
int x = index["one"];
int y = index["two"];

doSomething(array[x][y]); 
```

# ssl - 将 ENGINE 上下文附加到 SSL_CTX

> ID：14524152
> 
> 赞同：7
> 
> 时间：2013-01-25T14:46:53.430
> 
> 标签：ssl, openssl, openssl-engine

我想知道是否有可能将`ENGINE*`实现附加到 a`SSL_CTX*`和/或`SSL*`结构。我想要实现的是使用`SSL_CTX*`OpenSSL 中内置的默认加密操作设置一个，另一个`SSL_CTX*`使用专用 HSM 作为加密层。

有一种方法可以实现这一目标吗？从我读到的内容可以注册并设置为默认一些加密操作（随机、密码、md 等），但那些已经设置的将被使用，而不是内置的。

eg`EVP_CipherInit_ex`有它的第三个参数 an `ENGINE*`。以`EVP_CIPHER_CTX*`这种方式初始化的加密/解密将通过 ENGINE 实现处理加密/解密。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-17T01:43:21.673

从我所见所闻，你不能。如果您需要在代码中使用引擎，您有两种选择：

1.  将您的引擎设置为默认值，OpenSSL 将为引擎提供的所有方法使用它，对于所有其他方法 - 将使用 OpenSSL 内置方法。这是您在这种情况下需要使用的调用：

    ENGINE_set_default（引擎，ENGINE_METHOD_ALL）

2.  为几个选定的方法设置你的引擎，例如下面的代码将只为方法 RAND 设置它：

    ENGINE_set_default（引擎，ENGINE_METHOD_RAND）

您可以在此处找到更多示例：[https](https://www.openssl.org/docs/manmaster/crypto/engine.html) : //www.openssl.org/docs/manmaster/crypto/engine.html 和 openssl 的 README.ENGINE。

换句话说，引擎是一个全局设置，如果要将其映射到 SSL_CTX 对象，则需要手动维护该映射。

顺便说一句，我很高兴被证明是错误的，因为我自己需要这种功能，并希望将来能实现它。

# count - 计算 Business Objects 中一列中的相似值

> ID：14524158
> 
> 赞同：-1
> 
> 时间：2013-01-25T14:47:24.867
> 
> 标签：count, business-objects

我正在使用 Webi 12.2。我如何计算一列中的相似值并将值放在另一列中。

像这样（从数据库中查询“形状”列）：

```
Count  |  Shape
----------------------
2      |  Triangle
3      |  Circle
3      |  Circle
1      |  Star
2      |  Triangle
3      |  Circle 
```

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T18:15:53.130

为此，我将在报告中创建一个新变量。该变量将根据类型计数。然后可以将该变量制成一个新列。

# mysql - 加入 2 个表格并选择更多单元格

> ID：14524163
> 
> 赞同：0
> 
> 时间：2013-01-25T14:47:31.277
> 
> 标签：mysql, sql, select, join

嗨，我有 mysql 的问题。我有 2 张桌子。

餐桌工作和餐桌人。

在表格工作中，我有 4 列 ID 人喜欢

```
person1, person2, person3, person4, person5
  5          3       111      15       8 
```

一定是这样。

现在我想选择任何带有表格工作但名称为 person 的行。首先我用这个：

```
JOIN person p1 ON(w.person1 = p1.id)
JOIN person p2 ON(w.person1 = p1.id)
JOIN person p3 ON(w.person1 = p1.id)
JOIN person p4 ON(w.person1 = p1.id)
JOIN person p5 ON(w.person1 = p1.id) 
```

并使用选择喜欢

```
SELECT p1.name, p2.name, p3.name.... 
```

但是如果我有很多行，比如 10000，这个查询会很慢。

如何将其更改为使用 1 JOIN？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:19:40.800

您的`person`表未规范化，因此为了检索数据，您必须像您发现的那样多次加入，或者您可以使用`UNION ALL`查询来*取消*数据透视。

这种类型的查询将类似于：

```
select *
from work w
inner join
(
  select person1 p_name
  from person
  union all
  select person2
  from person
  union all
  select person3
  from person
  union all
  select person4
  from person
  union all
  select person5
  from person
) p
  on w.person1 = p.p_name 
```

通过取消透视数据，您可以获取列并将其转换为行，以便您可以对数据执行一次连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:01:37.473

您不能在一次 JOIN 中完成所有操作，您可以选择查看数据库设计，因为 1000 次连接是不正常的......

我最好的建议是创建一个关系表，所以你会有类似的东西

IE：

**table_person 1 是 table_person_2 的朋友**

您不需要 1000 次加入就可以知道谁是谁的朋友……您只需要一个加入，具有正确的表结构和索引。

请查看[E/R 建模](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)

**编辑**

我的建议是不要有一个包含 5 列的表（person1、person2、person3...），用 person1 和 person2 创建一个额外的表，然后添加它们之间的所有关系。

现在你有

```
person1, person2, person3, person4, person5
  5          3       111      15       8 
```

我建议把这个放在桌子上。

```
person1, person2
  5          3  
  5         111  
 5          15  
 5           8 
```

# sql - SQL select 语句 - 返回字段的最大数值

> ID：14524165
> 
> 赞同：0
> 
> 时间：2013-01-25T14:47:37.593
> 
> 标签：sql, postgresql, select

我有以下 SQL 选择语句

```
SELECT first_name, year FROM users WHERE username='$username' 
```

这可以返回许多结果，因为每年可能存在一个用户记录，例如 2012 年、2011 年等一个。因此我只想从用户记录存在的最近一年中获取用户的详细信息。

有什么想法我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:49:07.597

```
Select top 1 first_name, year 
from users 
where username ='$username' 
order by year desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:53:29.337

您可以找到用户的最大年份，然后将其嵌套，以便您只选择具有该年份的一条记录。

```
SELECT first_name, year FROM users U1 WHERE username='$username'
 and year = (select max(year) FROM users U2 WHERE U1.username=U2.username) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T14:49:01.000

**MySQL**

> ```
> SELECT first_name,MAX(year)
> FROM users
> WHERE username = 'username' 
> ```

除此之外，您必须添加`GROUP BY`子句。

```
SELECT first_name,MAX(year)
    FROM users
    WHERE username = 'username'
    GROUP BY username 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:06:21.757

做这件事有很多种方法：

如果您只需要一个用户，那么 Avitus 的答案（使用 LIMIT 而不是 TOP 调整为 Postgres）可能是最好的答案。请注意，如果用户有多行具有相同的“顶级”年份，您将只看到一个。可能这没关系，如果不是，下面的解决方案可以解决这个问题。

如果您需要在单个语句中为多个用户执行此操作，则这样的操作可能比使用来自 user1988097 的共同相关子查询更快，因为只需要对表进行一次扫描。

```
select first_name, 
       year
from (
   select first_name,
          year,
          max(year) over (partition by username) as max_year
   from users
) t
where year = max_year; 
```

您可以根据需要向结果中添加任意数量的列，但您需要在内部和外部查询中执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T17:06:21.443

PostgreSQL 最简单的形式：

```
SELECT first_name, year
FROM   users
WHERE  username = '$username'
ORDER  BY year DESC
LIMIT  1; 
```

# scala - Scala 的 for-comprehension 优化（恒等映射）

> ID：14524167
> 
> 赞同：1
> 
> 时间：2013-01-25T14:47:42.750
> 
> 标签：scala, for-comprehension

我怎样才能避免`map(identity)`在 Scala 中的`for`理解？

例如，考虑：

```
import scala.concurrent._
import scala.concurrent.duration._

object Test extends App {
  implicit val executorContext = ExecutionContext.global
  val future = Future.successful { 1 }
  val result = for (
    value <- future;
    b <- Future { value * 2 }
  ) yield b
  println(Await.result(result, 60 seconds))
} 
```

IIUC，`for`-comprehension 转换为类似

```
future.flatMap(value => Future { value * 2 }).map(identity) 
```

我可以`map(identity)`以某种方式避免尾随吗？或者Scala是否/可以/可以优化它？（我想它不能，因为不清楚是否`map`有任何副作用，对吧？）

PS我知道在这个特定的例子中，事情可以改进。我想知道一般情况，例如`Future { value * 2}`调用返回未来`f(value)`的函数。`f`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:15:54.590

创建自己的 Future 只是为了在其中进行应用操作是[一种反模式。](http://twitter.github.com/effectivescala/#Concurrency-Futures)您可以改为：

*   `future.map()`最后得到你的结果`onSuccess`（这是最简单的模型）
*   如果你在理解上死心塌地，`yield Future { value * 2 }`然后得到你的结果......（虽然这并不能解决虚假的未来创造问题）
*   `transform`你的未来，然后得到你的结果......
*   `collect`关于你的未来，然后`map(f)`是结果

根据您的上下文和计算模型，这些解决方案中的一个或另一个可能更合适：您似乎在呈现一般情况的特定情况，但目前尚不清楚一般情况是否应该涉及迭代 Futures，在一个 Future 中链接转换，或完全不同的东西。

# ruby-on-rails-3 - 缺少在模型类上声明的属性

> ID：14524168
> 
> 赞同：0
> 
> 时间：2013-01-25T14:47:43.413
> 
> 标签：ruby-on-rails-3, activerecord

使用 Rails 3（尚未确认这在 Rails 2.x 中是否有所不同），当您使用生成器创建模型时，例如：

```
rails generate model Person first_name:string last_name:string 
```

它没有在它创建的 Person 模型类上声明 first_name 或 last_name 属性。我知道它仍然有效，即迁移在数据库中创建字段，由于动态语言魔术，我可以在运行时设置它们。但是，我认为模型类是一种“文档”，用于说明模型可用的属性。因此，生成器没有添加它们对我来说很奇怪。

我一直在补充：

```
attr_accessor :first_name, :last_name 
```

到我的模型课。或者更好的是[attr_accessible](https://stackoverflow.com/questions/2652907/what-is-difference-between-attr-accessibleattributes-attr-protectedattrib/2652919#2652919)。但即便如此，也不清楚数据类型是什么。

我只是好奇其他人的想法是什么：

1.  为什么生成器默认不这样做？
2.  您自己添加访问器吗？为什么或者为什么不？
3.  奖励：我可以以某种方式指定数据类型吗？

**更新**：好吧，忘记 attr_accessor，我明白为什么这没有意义。假设我应该添加 attr_accessible 。尽管如此，仍然希望人们对上述问题的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:55:17.947

***不要***为模型属性添加`attr_accessor`- 您将破坏它们的预期功能。 `attr_accessible`很好并且通常被推荐，但它们仅用于白名单以实现[批量分配保护](http://guides.rubyonrails.org/security.html#mass-assignment)目的。你不需要为你的模型添加任何东西来让 getter/setter 工作；ActiveRecord 通过检查您的数据库模式为您完成这项工作。

如果您想在模型中添加“文档”，请查看[annotate](http://rubygems.org/gems/annotate) gem，它将自动生成字段信息作为模型/夹具/测试/规范顶部的注释。

# emacs - 在 emacs 中拆分窗口时下一个缓冲区跳过缓冲区

> ID：14524172
> 
> 赞同：5
> 
> 时间：2013-01-25T14:47:58.367
> 
> 标签：emacs, emacs24

我是 Emacs 的新用户，正在学习如何垂直拆分窗口并循环每个窗格中的缓冲区。

但是，在一个窗格中打开一个新文件后，next-buffer 不会在另一个窗格中循环遍历该文件，而只会在它在新窗格中出现一次之后循环。这可以复制如下：

> 在新的 emacs 会话中打开 2 个文件 A 和 B。
> 
> 使用“split-window-right”垂直拆分窗口。
> 
> 'next-buffer' 在 PaneLeft 和 PaneRight 中循环通过 A 和 B。
> 
> 在 PaneLeft 中打开文件 C。
> 
> “下一个缓冲区”在 PaneLeft 中的 A、B、C 中循环。
> 
> 确保 C 聚焦在 PaneLeft，然后切换到 PaneRight。“下一个缓冲区”仅在 PaneRight 中的 A 和 B 中循环。它跳过 C 可能是因为 C 在 PaneLeft 中已经可见。
> 
> 切换回 PaneLeft，并确保 A 或 B 聚焦在 PaneLeft。
> 
> 切换回 PaneRight，现在“下一个缓冲区”循环通过 A、B 和 C，而不管 PaneLeft 中可见什么。

这是预期的行为吗？我将如何让它按我的预期工作？

注意：我在没有任何自定义扩展的情况下运行，我的 .emacs 几乎是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:56:43.803

有一个`switch-to-visible-buffer`变量可以控制这种行为。来自 GNU Emacs 24.2 的文档：

```
switch-to-visible-buffer is a variable defined in `window.el'.
Its value is t

Documentation:
If non-nil, allow switching to an already visible buffer.
If this variable is non-nil, `switch-to-prev-buffer' and
`switch-to-next-buffer' may switch to an already visible buffer
provided the buffer was shown in the argument window before.  If
this variable is nil, `switch-to-prev-buffer' and
`switch-to-next-buffer' always try to avoid switching to a buffer
that is already visible in another window on the same frame.

You can customize this variable.

This variable was introduced, or its default value was changed, in
version 24.1 of Emacs. 
```

如果这不能正常工作，则可能存在错误。

# direct2d - Direct2D 可共享资源

> ID：14524174
> 
> 赞同：0
> 
> 时间：2013-01-25T14:48:08.597
> 
> 标签：direct2d

我看到了这个问题的答案：[我需要重新创建 Direct2D 可共享资源吗？](https://stackoverflow.com/questions/5378644/do-i-need-to-recreate-direct2d-sharable-resources)，但是我有些不明白：共享资源A是RT1创建的，RT2使用的，如果RT2的EndDraw返回D2DERR_RECREATE_TARGET，A和RT1怎么办？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:02:34.183

Direct2D 共享资源是由同一硬件设备分配并存储在同一硬件设备上的资源。此类资源由共享相同底层设备的渲染目标创建，并使用相同的 D2D1_RENDER_TARGET_USAGE 标志创建。

D2DERR_RECREATE_TARGET 错误代码表示底层设备不再可用。任何 Direct3D、DXGI、Direct2D 设备、设备上下文、交换链、渲染目标、位图等都需要释放和重新创建。

在您的示例中，哪个渲染目标返回错误并不重要。收到后，必须释放两个渲染目标以及它们可能创建的任何共享资源。

# c - 基本的 C 编程生命游戏

> ID：14524178
> 
> 赞同：-3
> 
> 时间：2013-01-25T14:48:14.783
> 
> 标签：c, windows

我的代码有问题。我有一个由用户调整大小的动态框架，他需要在这个框架中输入一个单元格的位置。我的问题是，我怎样才能确保这个职位是有效的，或者它还没有被录入？

这是代码：

```
for (i = 0; i < a; i++)
{
    while (x < 1 || y < 1)
    {
        printf("Entrez les coordonnees de la cellule %d: ", i+1); //The user gives the position of the cell
        scanf("%d %d", &x, &y);
    }

    tab[x - 1][y - 1] = 1; //We affect 1 to the cell given by the user
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:57:22.380

您可以使用`memset`将整个`tab`矩阵设置为零，

这样当你想查看用户是否已经输入了这个坐标时，

你这样做`if(tab[x-1][y-1] != 0)`，至于确保坐标有效，你可以

```
while(true){
   ....
   scanf("%d %d", &x, &y);
   if(x > 1 && x < X_MAX && y > 1 && y < Y_MAX){
     if(tab[x-1][y-1] != 0)
        printf("This coordinate was already typed.\n");
     else
        break;
    }
 }
 tab[x-1][y-1] = 1; 
```

其中 X_MAX 和 Y_MAX 指定矩阵的最大边界（大小`tab`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:57:59.837

假设大小`tab`分别为 N 和 M，您可以执行以下操作：

```
if (x < 0 || x>= N || y < 0 || y >= M) {
  printf("O-oh fell out of the field\n!");
  .. do stuff ...
} 
```

至于是否已经输入了某个字段，您必须使用一种算法来记住哪些字段已经输入。或者创建一个带有布尔值的矩阵，指示是否已经输入了一个字段，或者使用一些哈希表来存储输入的坐标对。

# .net - 实体框架会自动更新外键值吗？

> ID：14524180
> 
> 赞同：1
> 
> 时间：2013-01-25T14:48:17.577
> 
> 标签：.net, entity-framework, foreign-keys

这是一个很简单的问题，我一直没能找到满意的答案。我的设置很简单，两个表用外键连接它们。我可以使用 EF 成功更新这两个表，但是当我调用 SaveChanges 时，没有填充父表中的 ID 值。**我是否必须手动将父表中的 ID 值分配给子表中的相应属性，才能将外键填充到数据库中？**我不得不这样做似乎很奇怪，因为它似乎应该是自动的，但我是 EF 的新手。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:00:02.250

是的，它确实使这些保持同步，但有限制。[这是对所涉及的内容的解释。](http://msdn.microsoft.com/en-us/data/jj713564.aspx)您不必手动分配 ID。

您没有在问题中提供足够的信息来解决您的问题，但这里有一些事情需要检查：

*   实体是否在相同的上下文中？
*   如果您使用的是 POCO，[这可能会变得复杂](http://blog.oneunicorn.com/2012/03/10/secrets-of-detectchanges-part-1-what-does-detectchanges-do/)。您可能已关闭[AutoDetectChanges](http://blog.staticvoid.co.nz/2012/5/7/entityframework_performance_and_autodetectchanges)。
*   尝试一个简单的测试应用程序。也许您的应用程序中的其他一些代码会干扰这一点。

# php - Laravel 4：多租户应用程序，每个租户都有自己的数据库和一个全局数据库

> ID：14524181
> 
> 赞同：27
> 
> 时间：2013-01-25T14:48:25.130
> 
> 标签：php, laravel, laravel-4

目前我有一个托管多个租户的应用程序，这些租户是用 CodeIgniter 编写的。但我真的很喜欢 Laravel 4，我想开始将应用程序迁移到 Laravel。

这是当前的设置：

*   每个租户都有自己的数据库。
*   只有一组应用程序文件。
*   当我们创建一个新租户时，会创建一个新数据库并运行一个安装脚本，并为数据库播种一些初始信息。
*   每个租户也有自己的子域。这就是我们可以检测使用哪个数据库的方法。
*   有一个主数据库，其中包含租户信息和用户以及其他一些通用表。
*   当需要更新架构时，我们只需创建一个将为每个租户运行的更新脚本。这是通过 Codeigniter 的特殊编码 CLI 脚本实现的

在 Codeigniter 中，启动和结束新的数据库连接相对容易。

对于 Laravel，我有以下问题/疑问。

*   您将如何即时启动/结束数据库连接？
*   我想使用迁移，但我想为每个租户运行它们。迁移目前仅在“主”数据库连接上运行。它只运行一次。
*   播种也一样。。

这些是我的主要问题，我还有其他一些小问题，但可以解决。

希望有人可以阐明..

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-25T16:09:58.150

我只是对此进行尝试，因此请注意:) DatabaseManager 类，在您调用 DB 时使用，具有和扩展方法。这是[源代码的链接](https://github.com/laravel/framework/blob/master/src/Illuminate/Database/DatabaseManager.php#L160)。[DB::connection() 方法应该返回一个Illuminate\Database\Connection](https://github.com/laravel/framework/blob/master/src/Illuminate/Database/Connection.php#L95)的实例。从这一切开始，我将创建一个新的用户连接，如下所示：

```
$user = Auth::user();
DB::extend($user->username, function() use ($user) {
   // $pdo = new PDO(); set this up how you see fit
    return new Illuminate\Database\Connection($pdo, $user->databaseName, $tablePrefix);
}); 
```

就个人而言，我会为每个用户添加一个新方法 User::databaseConnection()，并在我扩展 DatabaseManager 时调用它。

```
DB::extend($user->username, function() use ($user) {
    return $user->databaseConnection();
}); 
```

在整个应用程序中，您应该能够通过以下方式调用注册用户的连接：

```
DB::connection(Auth::user()->username); 
```

**更新**

根据您调用租户连接的频率和时间，您可能希望使用 IOC 容器。

```
App::bind('tenantDB', function()
{
     return DB::connection(Auth::user()->username);
});

App::make('tenantDB')->insert(...); 
```

我忘记了迁移和播种。对于迁移，您可以设置文件路径

```
php artisan migrate:make foo --path=app/migrations 
```

因此，如果您使用 Config 类来设置默认数据库或 DB::setDefaultConnection($username)，我会假设所有迁移和播种都将为当前连接完成。当该过程完成后，您可以切换回主数据库。

**更新 2**

laravel 开发人员很棒，我绝对应该有冲动去看看这个。您可以在您创建的任何数据库连接上进行迁移和播种。

```
artisan migrate --database='userConnectionName' 
artisan db:seed --database='userConnectionName' 
```

看看 Barry 的回答，这可能比扩展 DatabaseManager 简单得多。

如果您想查看这些命令的所有选项，只需运行：

```
artisan help migrate
artisan help db:seed 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T16:46:14.263

您可以使用租户数据库凭据创建 1 个数据库，并在您的应用程序中动态设置它们：

```
$tenant = Tenant::where('username', '=', $username)->first();
Config::set('database.connections.tenant.username', $tenant->db_username);
Config::set('database.connections.tenant.password', $tenant->db_password);
Config::set('database.connections.tenant.database', $tenant->db_database); 
```

这将需要在您的 database.php 文件中创建 2 个连接。（例如应用程序和租户）并在您的模型中指定要使用的数据库（1 用于存储租户，1 用于租户特定数据库）

并且可能创建一个路由/脚本来创建/更新表。不确定与多个数据库的迁移。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-04T05:31:31.170

您可以使用以下语法在 laravel 中创建动态数据库连接

```
Config::set('database.connections.key', array(
    'driver'    => 'mysql',
    'host'      => 'localhost',
    'database'  => 'dbname',
    'username'  => 'dbuser',
    'password'  => 'dbpass',
    'charset'   => 'utf8',
    'collation' => 'utf8_unicode_ci',
    'prefix'    => '',
)); 
```

接着就，随即`DB::connection('key'); would just work.`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-13T20:22:09.350

我最近遇到了类似的问题，不得不为多个模型使用不同的数据库。

我发现以下方法可以解决问题。

1.  在 app/config/database.php 添加一个新连接 MY_NEW_CONNECTION
2.  对于新连接，将数据库名称设置为
3.  在您的 filters.php 或 routes.php 或控制器的 __construct 方法中添加以下内容：

    $db = '获取数据库名称'; Config::set('database.connections.MY_NEW_CONNECTION.database',$db); DB::setDefaultConnection('MY_NEW_CONNECTION');

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-25T15:04:18.440

1) 您可以在 database.php 配置文件中定义多个命名连接

```
'connections' => array(
    'tenant1' => array(
     ...
    ),
    'tenant2' => array(
     ...
    ), 
```

然后你可以选择使用哪一个来处理这样的事情。

```
$something = DB::connection('tenant1')->select(...); 
```

2）这不是一个完整的解决方案，因为我认为它需要对核心进行一些黑客攻击，但您可以选择在哪个连接上运行迁移。也许您可以遍历您的租户列表并在所有租户上运行它。

```
Schema::connection('tenant1')->create('users', function($table) 
```

3）不幸的是，我认为播种还不支持多个连接。您可能必须推出自己的播种功能。

# javascript - 值/选择器中的反斜杠

> ID：14524184
> 
> 赞同：4
> 
> 时间：2013-01-25T14:48:35.527
> 
> 标签：javascript, jquery, internet-explorer-7, backslash

我有一个包含网络设备列表的 HTML（多）选择列表。

```
<select id="Printers" multiple="multiple" name="Printers">
  <option value="\\ABCDEF01\PRINTER1\">\\ABCDEF01\PRINTER1\</option>
  <option value="\\ABCDEF02\PRINTER2">\\ABCDEF02\PRINTER2</option>
  ...
  ...
</select> 
```

我想用javascript自动选择值。这是我目前使用的代码：

```
//Assume: val.Name == "\\ABCDEF02\PRINTER2"

var select = document.getElementById('Printers');
var escapedName = val.Name.replace(/\\/g, "\\\\"); // Escape backslashes.
$("option[value=\"" + escapedName + "\"]", select).attr('selected', 'selected'); 
```

此代码适用于 chrome，但不适用于 IE7。有没有我应该知道的怪癖会阻止它在 IE7 上正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:04:23.897

似乎工作.. 与 jquery 1.9

[http://jsfiddle.net/2nGnm/](http://jsfiddle.net/2nGnm/)

html:

```
<select id="Printers" multiple="multiple" name="Printers">
  <option value="\\ABCDEF01\PRINTER1\">\\ABCDEF01\PRINTER1\</option>
  <option value="\\ABCDEF02\PRINTER2">\\ABCDEF02\PRINTER2</option>
</select> 
```

js：

```
var select = document.getElementById('Printers');
var escapedName = $('[name="Printers"] option:last').val().replace(/\\/g, "\\\\"); // Escape backslashes.
$('option[value="' + escapedName + '"]').prop('selected', true); 
```

# impersonation - 使用带有用户名和密码的 cassia 获取会话

> ID：14524188
> 
> 赞同：2
> 
> 时间：2013-01-25T14:48:47.373
> 
> 标签：impersonation, remote-desktop, terminal-services

我有一台远程机器，我想获取所有登录的用户详细信息。[我使用此链接](https://stackoverflow.com/a/809906/815600)使用 cassia 作为 follwoign 编写了代码

```
 ITerminalServicesManager manager = new TerminalServicesManager();
    using (ITerminalServer server = manager.GetRemoteServer("SERVERIPADDRESS"))
    {
        server.Open();
        foreach (ITerminalServicesSession session in server.GetSessions())
        {
            NTAccount account = session.UserAccount;
            string userName = session.UserName;

            if (account != null)
            {
                Console.WriteLine(account);
            }
        }
    } 
```

现在我想使用特定的`UserId`and连接到这个服务器`Password`。我该怎么做？我没有任何选择。

我尝试的是，我给了服务器 IP 地址并构建了解决方案。然后我以其他用户身份尝试该`exe`文件并提供凭据但无法登录。

任何人都可以请帮忙。我已经准备好并愿意放弃 Cassia，但想要一个可行的解决方案。

请帮我标记这个问题，我无法理解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-17T19:11:38.577

正如 Dan Ports 所提到的，[模仿](http://blogs.msdn.com/b/shawnfa/archive/2005/03/21/400088.aspx)肯定是要走的路。

如果在使用模拟后仍然无法连接，我发现非服务器操作系统（例如 Windows 7 或 Windows 8.1）需要在以下位置进行[注册表编辑才能使 Cassia 请求正常工作：](https://technet.microsoft.com/en-us/library/ff710472%28WS.10%29.aspx)

```
 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TerminalServer 
```

在此位置，将**AllowRemoteRPC**的值更改为**1**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:38:54.113

您需要使用模拟——底层远程桌面服务 API 不支持将凭据作为参数传递。有关模拟的更多信息，请参阅[Cassia 问题 32](https://code.google.com/p/cassia/issues/detail?id=32)和评论中的链接。

# php - CakePHP中的jqplot由于未知原因未呈现

> ID：14524189
> 
> 赞同：0
> 
> 时间：2013-01-25T14:48:48.863
> 
> 标签：php, html, cakephp, jqplot

我有一个 CakePHP 站点并希望即时渲染 jqplots。目前我根本无法渲染任何东西......

在我的默认布局中，我有：

```
// ../layouts/default.ctp
echo $this->Html->script('jquery');
echo $this->Html->script('jquery.jqplot.min');
echo $this->Html->css('jquery.jqplot.min'); 
```

当我查看源代码时，所有这些文件都对浏览器可用（即我可以单击每个 src 链接，它会很好地提取文件）。

在我的视图文件中：

```
// ..Views/Plots/index.ctp
<div id="mychart" style="height:400px;width:500px; "></div>

<script>
    $(document).ready(function(){
        $.jqplot('mychart', [[3,7,9,1,4,6,8,2,5]]);
    });
</script> 
```

当我查看源代码时，所有内容都显示在正确的位置，即该`<head>`部分中的脚本，并且视图很好地位于我的`#content`div 中。我到底做错了什么？！过去三个小时一直在扯头发！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:54:45.270

**固定的**

问题似乎与我使用的 jquery 版本有关。我现在正在使用 jqplot (v1.6.4) 中包含的 jquery 版本。

# algorithm - 在给定布尔数组中找到最大矩形区域的算法

> ID：14524191
> 
> 赞同：3
> 
> 时间：2013-01-25T14:48:50.623
> 
> 标签：algorithm, geometry

所以这个问题本身就很简单，每次输入，给我一个宽度和高度，都不会超过200，然后是一系列的0和1来代表二维平面。

像这样。

```
4 5
0 0 1 1 1
0 1 1 1 1
1 1 1 1 1
1 1 1 1 1 
```

目标是找到右边的区域，面积为12。不用说，矩形只能由1组成。

我在写这篇文章时正在考虑洪水填充，但它必须为数组中的每个 1 重新评估。什么是最佳算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:19:02.260

类似于以下问题：找到总和最大的子矩阵。这可以通过 O(n^3) 算法来完成。我相信你可以在 stackoverflow 上找到它或在互联网上搜索。

对于这个问题，你可以用 -INF 替换 0，然后应用上述算法找到最大的矩形区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:52:13.197

有几条评论指向线性复杂度的答案，但我想我会提到似乎是一个简单的 O(n^2) 算法。

对于每个单元格，计算完全位于其下方和完全位于其左侧的单元格的数量。您可以通过从左下角开始按行排列，查看其下方的单元格并查看其左侧单元格的小计，从而在线性时间内完成此操作。

一个矩形可以由其左下角的点和右上角的点来定义。当然，它有四个角。如果您将先前计算的左下角和右上角的总数相加，并减去左上角和右下角的总数，您将得到矩形中的单元格数量 - 矩形之外的单元格要么根本不计算，要么被取消。该矩形的确切位置取决于您在极端情况下所做的事情以及您如何解释“完全在其下方并完全在其左侧”。但是，给定定义一个矩形的两个角，您可以通过检索四个数字并进行加法和减法来计算其中的总和。

对于由两个点定义的矩形，需要考虑 O(n^2) 个矩形（因为我将 n 视为数据的大小，这意味着要搜索的区域有 O(n) 个点）。由于我可以在恒定时间内计算每个矩形内的总和并丢弃那些没有总和的那些，这意味着所有点都被覆盖，所以总成本是 O(n^2)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T17:37:03.413

我能想到的最好的算法是遍历 2D 矩阵并从左上角的一个角开始，在这种情况下，从右下角的一个角开始，执行以下操作：

对于你找到的每一个 1，找到最长的水平字符串 1 以及垂直字符串。为了效率，右边的位置比左边的位置少一个（你仍然需要得到它的垂直最大值）；您只需在每次达到 0 时重新开始计数。当您进入下一行时同样适用。

这两个数字的乘积是从该位置开始的矩形的最大可能面积。在另一个数据结构中，存储位置、maxWidth 和 maxHeight，并根据顶部区域最大的区域进行排序。避免放置子矩形以提高效率；您可以通过忽略 maxHeight 小于或等于其自身值的右相邻 1 来做到这一点。我把数据结构的选择留给你。

现在您浏览您创建的数据结构并从最大矩形开始。找到最接近的 0。您将矩形分成 2 个子矩形，排除 0 所在的水平线和 2 个排除 0 所在的垂直线的子矩形。如果 0 在边缘，您将只得到 3 个子矩形如果它在一个角落，只有 2。删除矩形，插入新创建的子矩形并保持最大区域顺序。现在对数据结构中的下一个矩形重复此过程，直到找到一个没有 0 的矩形。那是最大的一个。

这应该比检查每个可能的子矩阵更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T04:44:00.080

```
 /*

Given a 2D binary array(2D array of 0's and 1's) with m rows and n columns,find area of largest sub-array(rectangle) 
consisting entirely of 1's.
*/

public int findMaxRectangleArea(int[][] A,int m,int n){
        // m=rows & n=cols according to question

        int[] single;
        int largeX = 0,largest = 0; 
        for (int i = 0; i < m; i++) {
              single = new int[n];            //one d array used to check line by line & it's size will be n
              for (int k = i; k < m; k++) {                // this is used for to run until i contains element
                        int a = 0;
                    int y = k - i + 1;  // is used for row and col of the comming array
                    int shrt = 0,ii = 0,small = 0; 
                                    int mix = 0;
                    int findX = 0; 
                   for (int j = 0; j < n; j++) {
                       single[j] = single[j] + A[k][j]; // postions element are added
                      if (single[j] == y) {           //element position equals
                            shrt = (a == 0) ? j : shrt;       //shortcut
                            a=a+1;
                        if (a > findX) {
                            findX = a;
                            mix = shrt;
                        }
                    } else {
                        a = 0;
                    }
                }
                   a = findX;
                   a = (a == y) ? a - 1 : a;
                         if (a * y > largeX * largest) {  // here i am checking the values with xy
                           largeX = a;
                           largest = y;
                           ii = i;
                           small = mix;
                           }
            }
        }// end of  loop

return largeX*largest;
    }       //end of method

/*
     Time complexity = method contains 2 inner loops so m*m & 1 outer loop n

     so the complexity is------------------->  O((m^2)*n)

     Space Complexity is-------it's directly proportional to the size of the array i.e ---------------> (m*m)+n

*/ 
```

# android - 未调用 ListView onItemClickListener

> ID：14524194
> 
> 赞同：6
> 
> 时间：2013-01-25T14:48:56.677
> 
> 标签：android, listview, onitemclicklistener

我试图做一个自定义`ListView`。ListView 包含一个`RelativeLayout`who 包含 a`TextView`和 a `Switch`。当您按下开关时，开关必须从真变为假（反之亦然）。

这是我的 getView 方法：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.item_gproblem, null);

    //vi.setClickable(true); Tried this
    //vi.setFocusable(true);

    TextView txt_comment_description = (TextView) vi
            .findViewById(R.id.txt_comment_description);
    txt_comment_description.setText(MyTasks.allGComments.get(position)
            .getProblemDescription());
    //txt_comment_description.setFocusable(false); Tried this
    //txt_comment_description.setClickable(false);

    Switch switch_comment = (Switch) vi.findViewById(R.id.switch_comment);
    //switch_comment.setFocusable(false); Tried this
    //switch_comment.setClickable(false);

    //First time running getMyGComments returns a empty ArrayList
    if (MyTasks.allCustomers.get(ServerData.myID - 1).getMyGComments()
            .size() > position) {
        switch_comment.setChecked(MyTasks.allCustomers
                .get(ServerData.myID - 1).getMyGComments().get(position)
                .isProblemValue());
    }
    return vi;
} 
```

这是我的 onClickListener：

```
list_quality.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

               //Do Something
            }
        }); 
```

`onItemClickListener`当我单击 TextView、Switch 或两个对象之间的空间时，不会调用My 。当我按下开关时，开关动作正常（状态改变）。但我`onItemClickListener`的没有被调用。我试图禁用Switch`clickable`和`focusable`TextView ，但这也不起作用。

执行 setOnItemClickListeren。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T14:53:18.180

将下面的行添加到列表视图行的容器中：

```
android:descendantFocusability="blocksDescendants" 
```

从您放置它们的任何位置删除所有可点击/可聚焦。如果您按下整个项目，则应该调用 onItemClick。

此外，如果您希望 listview 行内的按钮也可点击，请将 onClickListener 添加到 ListView 适配器 getView() 方法内的按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-17T19:05:43.490

某些 UI 元素可能会获得焦点而不是列表项，因此请使用它来获取焦点

```
android:focusable="false" 
```

# c# - 另一个项目限制中的引用项目

> ID：14524195
> 
> 赞同：2
> 
> 时间：2013-01-25T14:48:57.223
> 
> 标签：c#, .net, visual-studio-2010, dll, visual-studio-2012

在 Visual Studio 中是否有可能标记类，以便只能访问某些项目？我有域项目，并且该项目被引用到其他项目（构建输出上的 DLL）。但我需要这样，一个项目（Pr1）仅使用域项目中的部分逻辑，我不希望其余的域项目逻辑在 Pr1 中可访问。这是一些解决方案，除了将它的域项目分解为许多小项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T14:51:50.223

> 但我需要这样，一个项目（Pr1）仅使用域项目中的部分逻辑，我不希望其余的域项目逻辑在 Pr1 中可访问。

然后听起来基本上你真的真的应该有单独的项目。

您可以授予一个程序集比标准*更多*的访问权限，[`InternalsVisibleToAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)但您不能说“除程序集 X 之外的每个人都可以使用此成员。”

（即使您将域项目分成两个项目，您也无法阻止`Pr1`对这两个项目的引用......但至少这是显而易见的。）

# javascript - 修改基本的 JavaScript ScrollTop 函数

> ID：14524196
> 
> 赞同：0
> 
> 时间：2013-01-25T14:48:58.130
> 
> 标签：javascript, jquery, html, scrolltop

我有一些非常基本的 JavaScript，我正在努力解决。它允许用户单击链接，然后视口向下移动到页面中的该点。这是我目前的修补程序：[https](https://tinker.io/8e585/16) ://tinker.io/8e585/16 。

我希望它能够工作，所以当用户单击“**测试 2** ”下的图像^时，它会向下滚动并同时***打开***“**测试 2** ”中的文本？

非常感谢您对此的任何指示。

^`<h3 class="head"><a href="javascript:slideonlyone('newboxes7');"><img src="/wp-content/themes/boilerplate/images/image_corner_btn_offstate.png" class="small" style="position:absolute;margin-left: 241px;margin-top: 128px;" /><img src="/wp-content/themes/boilerplate/images/sector-21.jpg"></a></h3>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:59:00.217

您可以调用该`$(this).scrollTop()`函数并定义 scrollTop 事件

```
$(this).scrollTop(function(){
    //your code to do both tasks
)}; 
```

希望能帮助到你 ：）

**更新：**

```
function slideonlyone(thechosenone) {
     $('.newboxes2').each(function(index) {
          if (this.id == thechosenone) {
                if($(this).is('.active') )
                   $(this).removeClass('active').slideUp(600);
              else 
              $(this).addClass('active').slideDown(200);
          }
          else              
               $(this).removeClass('active').slideUp(600);

         if($(this).is('.active') )
             jQuery(this).parent('.grid_4').children().find('img.small').attr('src', '/wp-content/themes/boilerplate/images/image_corner_btn_onstate.png');
         else
             jQuery(this).parent('.grid_4').children().find('img.small').attr('src', '/wp-content/themes/boilerplate/images/image_corner_btn_offstate.png');
     });
}

$('#box1 h2').click(function () {   
    $('html, body').animate({
         scrollTop: $('#box2').offset().top}, 'slow');
    slideonlyone(thechosenone);
    return false;
});
$('#box2 h2').click(function () {   
    $('html, body').animate({
         scrollTop: $('#box1').offset().top}, 'slow');
    slideonlyone(thechosenone);
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:12:47.820

答案：[https:](https://tinker.io/8e585/19) //tinker.io/8e585/19 :-D

我基本用过`$("#box2 h3 a").click(function () {`。

# c++ - C++：函数参数中的别名

> ID：14524199
> 
> 赞同：0
> 
> 时间：2013-01-25T14:49:04.667
> 
> 标签：c++

我对在函数参数中使用别名有疑问。这是我的问题。

让我们考虑这个函数定义

```
void thisIsSparta(int& number){
    ...
} 
```

在调用时，它与以下代码完美配合：

```
int king = 1;
thisIsSparta(king); 
```

但是当我尝试这个时出现不匹配错误：

```
thisIsSparta(1); 
```

我可以很容易地猜到错误的发生，因为根本没有别名变量，因此错误。但是，我不希望程序员担心只使用这两种方法中的一种，第二个函数调用应该可以正常工作！

我看到的唯一解决方案是创建另一个没有别名参数的函数，除了第一个：

```
void thisIsSparta(int number){

} 
```

但这会导致可怕的代码重复，我不是这个的超级粉丝。

此外，当我使用变量时，程序可以决定使用第二个定义而不是前者。然后我失去了别名的兴趣，其目的是避免变量复制。

有没有人可以解决我的问题？事实上，这是一个简化的例子，实际上我在这个函数的参数中有一个泛型类型，它可以任意大。这就是为什么我想使用别名来避免复制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T14:50:37.223

对于基本类型，只需按值传递。它比传递引用要快，所以放弃通过引用传递，只需要

```
void thisIsSparta(int number) 
```

对于大型类型，您只能将临时对象绑定到`const`引用，因此您可以将方法声明为

```
void thisIsSortOfSparta(const MyClass& obj) 
```

如果您正在修改函数内部的值，那么将临时参数作为参数传递是没有意义的，因此编译器抱怨是正确的，但如果您不这样做，请使用上述两个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T14:51:42.260

复制原始样`int`完全可以忽略不计。由于几个原因，通过参考可能更昂贵。

其次，你可以超载

```
const int&
int& 
```

这将为所有`int`对象选择第二个，为临时对象和`const int`对象选择第一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T15:48:08.880

通过引用传递参数的问题是函数可以修改它：

```
void thisIsSparta(int& number) {
    ++number;
} 
```

现在，该怎么`thisIsSparta(1)`办？（不，这不是古老的 FORTRAN，在那里修改常量是可能的......）

如果你想传递不可修改的变量，函数必须保证不修改它的参数：

```
void thisIsSparta(const int& number) {
    // whatever
} 
```

而且，正如其他人指出的那样，对于内置类型，按值传递总是比通过 const 引用传递更可取：

```
void thisIsSparta(int number) {
    // whatever
} 
```

# javascript - 通过 javascript 清除浏览器缓存和历史记录并加载最新的 js 文件

> ID：14524203
> 
> 赞同：6
> 
> 时间：2013-01-25T14:49:18.980
> 
> 标签：javascript, jquery

如何通过javascript清除浏览器缓存和历史记录我发现了一些链接，例如：-

[如何清除浏览器历史记录并清除缓存？](https://stackoverflow.com/questions/12671371/how-to-clear-browser-history-oan-clear-cache)

[如何在javascript中清除浏览器哈希历史](https://stackoverflow.com/questions/13622460/how-to-clear-browser-hash-history-in-javascript)

但他们没有正确描述如何通过javascript（或jQuery）实现这一点

我需要这样做，以便用户不必执行 [Ctrl+F5] 或手动清除缓存，并且最新版本的 javascript 文件会加载到浏览器中。

主要目的是在用户每次访问网站时加载最新的 javascript 文件。我在基于 ASP.NET MVC 的应用程序和 javascript 文件包含在 .csHtml 文件中。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-25T15:10:34.707

调用from 脚本`window.location.reload(true)`。`ctrl+F5`:)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-25T14:52:52.563

还有其他方法可以防止 JavaScript 文件（或其他文件）被缓存。

只需将一些虚拟参数附加到 url 的末尾。例如 -

```
http://www.yourCoolSite.com/resources/js/main.js?r=SOME_RANDOM_VALUE 
```

您最好在服务器端执行此操作。在 PHP 中，这看起来像这样 -

```
echo "http://www.yourCoolSite.com/resources/js/main.js?r=".time(); 
```

使用该`time()`函数，我们将当前纪元时间戳附加到 URL 中，因此保证*该文件每次在浏览器中看起来都不同。

[^(* 直到 2038 年 ;))](http://en.wikipedia.org/wiki/Year_2038_problem)

# php - Header() 和上面的目录

> ID：14524207
> 
> 赞同：0
> 
> 时间：2013-01-25T14:49:31.977
> 
> 标签：php, header

> **可能重复：**
> [PHP 如何将标题位置定位到父目录中的页面？](https://stackoverflow.com/questions/13366217/php-how-to-header-location-to-a-page-in-a-parent-directory)

函数 header() 找不到上面的目录。

```
$link = "../hide/success-registr.phtml";
header("Location: $link"); 
```

它的路径正确且文件存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:52:04.637

您需要提供一个绝对 URL，例如：

```
$link = "http://www.mydomain.tld/public/success-registr.phtml";
header("Location: $link"); 
```

注意：浏览器将请求提供的 URL，因此无法使用“隐藏”页面/响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:57:06.950

来自 php.net

> HTTP/1.1 需要绝对 URI 作为 » Location 的参数：包括方案、主机名和绝对路径，但有些客户端接受相对 URI。

始终建议使用带有 header() 位置的绝对路径（完整 uri）。

有时相对路径会起作用，但肯定不会在目录结构中上升一个级别，除非您在将路径作为参数传递之前对路径进行一些操作。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-25T14:52:18.403

你可以试试

```
$link = realpath('../hide/success-registr.phtml');
$rootPath = 'some/root/path';

$link = str_replace($rootPath, 'http://', $link); 
```

# r - 窗口（又名滚动）加入 data.table

> ID：14524208
> 
> 赞同：3
> 
> 时间：2013-01-25T14:49:40.760
> 
> 标签：r, join, data.table

我正在尝试找到解决此请求功能的方法：[[#2300] 向后添加和 firstback 到 roll=TRUE](https://r-forge.r-project.org/tracker/?group_id=240&atid=978&func=detail&aid=2300)，这在[这篇文章](https://stackoverflow.com/questions/14293791/more-efficient-rolling-join-backwards-not-forwards)中提到。

基本上我想执行以下`X`查找的“窗口连接”`Y`

1.  在前 n 列上左连接（在以下示例中`{x,y}`）
2.  AND 选择最后一列（`t`在以下示例中）的值`Y`，`[t-w1,t+w2]`其中 t 是 中的最后一列`X`，通常`t`是时间列和`{w1,w2}`一些整数（可能是`w1=w2=something`或`w1=0`）

我构建了以下示例（但随时提供另一个/更好的示例）

```
library(data.table)
set.seed(123);
X <- data.table(x=c(1,1,1,2,2),y=c(T,T,F,F,F),t=as.POSIXct("08:00:00.000",format="%H:%M:%OS")+sample(0:999,5,TRUE)/1e3)
Y <- copy(X)
set.seed(123)
Y[,`:=`(IDX=.I,t=t+sample(c(-5:5)/1e3,5,T))]
Y <- rbindlist(list(Y, X[5,][,IDX:=6][,t:=t+0.001], X[5,][,IDX:=7][,t:=t+0.002])) 
```

所以随着`(w1,w2) = (.002,.002)`

```
R) X                                 R) Y
   x     y                       t      x     y                       t IDX
1: 1  TRUE 2013-01-25 08:00:00.286   1: 1  TRUE 2013-01-25 08:00:00.284   1
2: 1  TRUE 2013-01-25 08:00:00.788   2: 1  TRUE 2013-01-25 08:00:00.791   2
3: 1 FALSE 2013-01-25 08:00:00.407   3: 1 FALSE 2013-01-25 08:00:00.407   3
4: 2 FALSE 2013-01-25 08:00:00.882   4: 2 FALSE 2013-01-25 08:00:00.886   4
5: 2 FALSE 2013-01-25 08:00:00.940   5: 2 FALSE 2013-01-25 08:00:00.945   5
                                     6: 2 FALSE 2013-01-25 08:00:00.941   6 #by hand
                                     7: 2 FALSE 2013-01-25 08:00:00.942   7 #by hand 
```

结果将是

```
R) ans
   x     y                       t IDX
1: 1  TRUE 2013-01-25 08:00:00.286   1
2: 1  TRUE 2013-01-25 08:00:00.788  NA
3: 1 FALSE 2013-01-25 08:00:00.407   3
4: 2 FALSE 2013-01-25 08:00:00.882  NA
5: 2 FALSE 2013-01-25 08:00:00.940  6,7 
```

但是：`IDX`这里很可能是一个列表，如果有几行`Y`（可以有比 更多的行`X`）匹配，一个只有一个，或者`NA`没有匹配。

我也会对一些非 data.table 的答案感到满意......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:44:46.667

这是`data.table`（v.1.8.7 r797）中juba代码的翻译

```
setkey(X,x,y,t); setkey(Y,x,y,t)
m <- merge(X,Y, by=c("x","y"), all.x=TRUE, all.y=FALSE, allow.cartesian=TRUE)
m <- m[t.x>=(t.y-w1) & t.x<=(t.y+w2)]
m <- m[, list(IDX=list(IDX)), by=c("x","y","t.x")];
setnames(m,"t.x","t");
m <- m[X]; 
```

我明白了（注意`NULL`，Matthew Dowle 可能会解释为什么我们得到这个而不是`NA`）

```
R) m
   x     y                       t IDX
1: 1 FALSE 2013-01-25 08:00:00.407   3
2: 1  TRUE 2013-01-25 08:00:00.286   1
3: 1  TRUE 2013-01-25 08:00:00.788
4: 2 FALSE 2013-01-25 08:00:00.882
5: 2 FALSE 2013-01-25 08:00:00.940 6,7 
```

我会等待专家说是否是`data.table-optimal`关闭帖子的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:50:51.277

这是一个尝试，不是很优雅，没有`data.table`但有`plyr`. 不知道对你是否有用。

样本数据 ：

```
X <- data.frame(x=c(1,1,1,2,2),y=c(T,T,F,F,F),t=rep(1,5)+sample(0:999,5,TRUE)/1e3)
Y <- data.frame(x=c(1,1,1,2,2),y=c(T,T,F,F,F),t=rep(1,5)+sample(0:999,5,TRUE)/1e3, IDX=1:5)
w1 <- 0.3
w2 <- 0.3 
```

这使 ：

```
R> X
  x     y     t
1 1  TRUE 1.880
2 1  TRUE 1.364
3 1 FALSE 1.288
4 2 FALSE 1.170
5 2 FALSE 1.172
R> Y
  x     y     t IDX
1 1  TRUE 1.482   1
2 1  TRUE 1.252   2
3 1 FALSE 1.216   3
4 2 FALSE 1.674   4
5 2 FALSE 1.047   5 
```

然后您可以使用以下代码：

```
m <- merge(X,Y, by=c("x","y"), all.x=TRUE, all.y=FALSE)
m <- m[m$t.x>m$t.y-w1 & m$t.x<m$t.y+w2,]
m <- ddply(m, c("x","y","t.x"), summarize, IDX=list(IDX))
names(m) <- c("x","y","t","IDX")
merge(X, m, by=c("x","y","t"), all.x=TRUE, all.y=FALSE) 
```

这给出了以下结果：

```
 x     y     t  IDX
1 1 FALSE 1.288    3
2 1  TRUE 1.364 1, 2
3 1  TRUE 1.880   NA
4 2 FALSE 1.170    5
5 2 FALSE 1.172    5 
```

# c# - 取消不接受 CancellationToken 的异步操作的正确方法是什么？

> ID：14524209
> 
> 赞同：31
> 
> 时间：2013-01-25T14:49:43.707
> 
> 标签：c#, .net, asynchronous, task-parallel-library, async-await

取消以下的正确方法是什么？

```
var tcpListener = new TcpListener(connection);
tcpListener.Start();
var client = await tcpListener.AcceptTcpClientAsync(); 
```

简单地调用`tcpListener.Stop()`似乎会导致一个`ObjectDisposedException`并且该`AcceptTcpClientAsync`方法不接受`CancellationToken`结构。

我完全错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-25T15:07:30.260

假设您不想调用该[`Stop`方法](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.stop.aspx)[`TcpListener`class](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)上，这里没有完美的解决方案。

如果您可以在操作未在特定时间范围内完成时收到通知，但允许原始操作完成，那么您可以创建一个扩展方法，如下所示：

```
public static async Task<T> WithWaitCancellation<T>( 
    this Task<T> task, CancellationToken cancellationToken) 
{
    // The tasck completion source. 
    var tcs = new TaskCompletionSource<bool>(); 

    // Register with the cancellation token.
    using(cancellationToken.Register( s => ((TaskCompletionSource<bool>)s).TrySetResult(true), tcs) ) 
    {
        // If the task waited on is the cancellation token...
        if (task != await Task.WhenAny(task, tcs.Task)) 
            throw new OperationCanceledException(cancellationToken); 
    }

    // Wait for one or the other to complete.
    return await task; 
} 
```

以上来自[Stephen Toub 的博文“如何取消不可取消的异步操作？”](http://blogs.msdn.com/b/pfxteam/archive/2012/10/05/how-do-i-cancel-non-cancelable-async-operations.aspx) .

这里需要重复一下，这实际上并没有*取消*操作，因为没有采用 a的[`AcceptTcpClientAsync`方法](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.accepttcpclientasync.aspx)[`CancellationToken`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)的重载，它不能*被*取消。

这意味着，如果扩展方法表明*确实*发生了取消，则您正在取消对原始回调的等待[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)，*而不是*取消操作本身。

为此，这就是为什么我将方法重命名为`WithCancellation`to`WithWaitCancellation`以表明您正在取消*等待*，而不是实际操作。

从那里，它很容易在您的代码中使用：

```
// Create the listener.
var tcpListener = new TcpListener(connection);

// Start.
tcpListener.Start();

// The CancellationToken.
var cancellationToken = ...;

// Have to wait on an OperationCanceledException
// to see if it was cancelled.
try
{
    // Wait for the client, with the ability to cancel
    // the *wait*.
    var client = await tcpListener.AcceptTcpClientAsync().
        WithWaitCancellation(cancellationToken);
}
catch (AggregateException ae)
{
    // Async exceptions are wrapped in
    // an AggregateException, so you have to
    // look here as well.
}
catch (OperationCancelledException oce)
{
    // The operation was cancelled, branch
    // code here.
} 
```

请注意，您必须为您的客户打包电话以捕获[`OperationCanceledException`](http://msdn.microsoft.com/en-us/library/system.operationcanceledexception.aspx)请注意，如果等待被取消

我也投了一个[`AggregateException`](http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx)异常（在这种情况下你应该自己测试）。

面对像[`Stop`方法](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.stop.aspx)时，哪种方法更好（基本上，无论发生什么，任何猛烈地破坏一切的东西），这当然取决于你的情况。

如果您没有共享您正在等待的资源（在这种情况下，`TcpListener`），那么调用 abort 方法并吞下来自您正在等待的操作的任何异常可能会更好地利用资源（当您调用 stop 并在您等待操作的其他区域中监视该位时，您必须稍微翻转一下）。这给代码增加了一些复杂性，但如果您担心资源利用率和尽快清理，并且您可以选择此选项，那么这就是要走的路。

如果资源利用*不是*问题，并且您对更协作的机制感到满意，并且您*不*共享资源，那么使用该`WithWaitCancellation`方法就可以了。这里的优点是它的代码更简洁，更易于维护。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-15T05:03:50.333

虽然 casperOne 的答案是正确的，但`WithCancellation`(or `WithWaitCancellation`) 扩展方法有一个更简洁的潜在实现，可以实现相同的目标：

```
static Task<T> WithCancellation<T>(this Task<T> task, CancellationToken cancellationToken)
{
    return task.IsCompleted
        ? task
        : task.ContinueWith(
            completedTask => completedTask.GetAwaiter().GetResult(),
            cancellationToken,
            TaskContinuationOptions.ExecuteSynchronously,
            TaskScheduler.Default);
} 
```

*   首先，我们通过检查任务是否已经完成来进行快速路径优化。
*   然后我们只需向原始任务注册一个延续并传递`CancellationToken`参数。
*   延续如果可能（）同步提取原始任务的结果（或异常，如果有），如果不是（）则`TaskContinuationOptions.ExecuteSynchronously`使用`ThreadPool`线程，`TaskScheduler.Default`同时观察`CancellationToken`for 取消。

如果原始任务在`CancellationToken`被取消之前完成，则返回的任务存储结果，否则任务被取消并`TaskCancelledException`在等待时抛出一个。

# ios - 并非所有 NSOperations 返回值

> ID：14524210
> 
> 赞同：2
> 
> 时间：2013-01-25T14:49:44.947
> 
> 标签：ios, nsoperation, nsoperationqueue

我在 a 中运行一个数学公式`NSOperation`：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[queue setMaxConcurrentOperationCount:20];

for (int i = 0; i<runCount; i++) {
    NSInvocationOperation *op =[[NSInvocationOperation alloc] initWithTarget:self selector:@selector(runFormula:) object:frm];
    [queue addOperation:op];
} 
```

这是方法体：

```
-(void)runFormula:(NSDictionary *)frm
{
    NSMutableString *formula = [[frm objectForKey:kFormulaExpresion] mutableCopy];
    NSArray *variables = [frm objectForKey:kVariableArray];
    evals = [self evaluateVariables:variables];

    for (NSDictionary *var in evals) {
        NSString *sym = [var objectForKey:kVariableSymbol];
        [formula replaceOccurrencesOfString:sym withString:[[var objectForKey:@"numVal"] stringValue] options:NSCaseInsensitiveSearch range:NSMakeRange(0, [formula length])];
    }

    //parse formula

    double result = [formula evaluateMath];
    NSLog(@"formula %@ the result : %f",formula,result);
    NSNumber *resNo = [NSNumber numberWithDouble:result];
    [self performSelectorOnMainThread:@selector(addNewResult:) withObject:resNo waitUntilDone:NO];
} 
```

问题是，如果我将 runCount 设为 100，我只会收到大约 96 个结果……这是为什么呢？还有一件事：第一个结果是胡说八道，但其他94-95都可以。

这是数据聚合方法...

```
#pragma mark -- data aggregation delegate
-(void)addNewResult:(NSNumber *)nr
{
     NSLog(@"index : %i result: %f",currentIndex,[nr doubleValue]);
    [[self delegate] didReceiveResult:nr];
    resultsArray[currentIndex]=[nr doubleValue];
    currentIndex ++;
    if (  (currentIndex % percentVal) == 0) {
        [[self delegate] percentCompleted];
    }
} 
```

问题可能是这与并发方法在同一个类中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:51:46.980

两个想法：

1.  您没有向我们展示足够多的东西来诊断这一点，但是您可能有 20 个并发操作迭代您的`evals`实例变量，它们都会更新。那可不好。`[self evaluateVariables:variables]`我可能会为您可以迭代的结果建议一个局部变量。请参阅下面的示例。

2.  当您说只有 96 正在运行时，您绝对确定吗？他们是否有可能没有按照您将它们添加到队列中的顺序完成？

所以，我可能会建议：

```
-(void)runFormula:(NSDictionary *)frm
{
    NSMutableString *formula = [[frm objectForKey:kFormulaExpresion] mutableCopy];
    NSArray *variables = [frm objectForKey:kVariableArray];
    NSArray *evals = [self evaluateVariables:variables];  // LOCAL VAR

    for (NSDictionary *var in evals) {
        NSString *sym = [var objectForKey:kVariableSymbol];
        [formula replaceOccurrencesOfString:sym withString:[[var objectForKey:@"numVal"] stringValue] options:NSCaseInsensitiveSearch range:NSMakeRange(0, [formula length])];
    }

    //parse formula

    double result = [formula evaluateMath];
    NSLog(@"formula %@ the result : %f",formula,result);
    NSNumber *resNo = [NSNumber numberWithDouble:result];
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        [self addNewResult:resNo];
    }];
} 
```

请注意，在上面的代码块中，就风格而言，如果我使用操作，则`NSOperationQueue`在调度回主队列时我会停留在隐喻中。没关系，我不认为，但感觉更一致。

同样，在初始调用中，您始终可以考虑块变体，如果它使其更具可读性。如果您想查看识别各个操作的诊断信息，还可以记录日志`i`，这样您就可以确保它们都在运行：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[queue setMaxConcurrentOperationCount:20];

for (int i = 0; i < runCount; i++) {
    [queue addOperationWithBlock:^{
        NSLog("started %d", i);        // log i if you want to see that diagnostic information, too
        [self runFormula:frm];
        NSLog("finished %d", i);
    }];
} 
```

# c# - ApplicationPhysicalPath 为空？

> ID：14524212
> 
> 赞同：1
> 
> 时间：2013-01-25T14:49:47.423
> 
> 标签：c#, wcf

当我的 Windows 服务（selfhost 中的 WCF 服务）启动时（`ServiceBase.Main`），我得到了一些需要知道`ApplicationPhysicalPath`.

问题是`System.Web.Hosting.HostingEnvironment.ApplicationPhysicalPath`总是这样`null`？

为什么？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:14:26.900

它为空，因为 Windows 服务与 Web 托管无关（除非您在其中创建一个配置了 http 绑定的 WCF ServiceHost）。

只是回落怎么样`System.Environment.CurrentDirectory`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T05:43:01.070

您是否尝试过 Assembly.CodeBase 或 Assembly.Location ？

```
 Assembly.GetExecutingAssembly().CodeBase
        Assembly.GetExecutingAssembly().Location 
```

# api - 主要零售的礼品卡 API

> ID：14524214
> 
> 赞同：2
> 
> 时间：2013-01-25T14:49:50.900
> 
> 标签：api, e-commerce

我正在寻找一个礼品卡 API，它允许我从各种主要零售商（Target、亚马逊、百思买等）购买礼品卡。那里有类似的东西吗？这些第三方如何销售特定品牌的礼品卡？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T15:30:57.027

Tango Card API 正是这样做的，并且是免费的开源代码。此处提供的文档：[https](https://github.com/tangocarddev) ://github.com/tangocarddev 。

# javascript - jQuery Mobile 的最低要求

> ID：14524217
> 
> 赞同：2
> 
> 时间：2013-01-25T14:50:05.237
> 
> 标签：javascript, jquery, html, web-applications, mobile

我正处于使用[Intermec HTML 5 浏览器为](http://www.intermec.co.uk/products/html5/index.aspx)[CN50](http://www.intermec.co.uk/products/cmptrcn50/index.aspx)构建移动 Web 应用程序的早期阶段。我想使用 jQuery Mobile，但我有点担心，因为该设备只有 128MB 的 RAM。

现在我只是在使用基本的 HTML、CSS 和 JS。你建议我改用 jQuery Mobile 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:56:36.193

我会说，如果它是基于 Web Kit 的 HTML 5 支持的浏览器，那么使用 JQuery 移动。最简单的检查方法是获取演示站点，然后在您的设备中查看它，看看它在测试期间的表现如何。

这是 JQuery Mobile 1.2 中支持的系统/设备表

**A 级 - 基于 Ajax 的动画页面转换的全面增强体验。**

```
Apple iOS 3.2*-6.0 - Tested on the original iPad (4.3 / 5.0), iPad 2 (4.3), iPad 3 (5.1 / 6.0), original iPhone (3.1), iPhone 3 (3.2), 3GS (4.3), 4 (4.3 / 5.0), and 4S (5.1 / 6.0)
Android 2.1-2.3 – Tested on the HTC Incredible (2.2), original Droid (2.2), HTC Aria (2.1), Google Nexus S (2.3). Functional on 1.5 & 1.6 but performance may be sluggish, tested on Google G1 (1.5)
Android 3.2 (Honeycomb)  – Tested on the Samsung Galaxy Tab 10.1 and Motorola XOOM
Android 4.0 (ICS)  – Tested on a Galaxy Nexus. Note: transition performance can be poor on upgraded devices
Android 4.1 (Jelly Bean)  – Tested on a Galaxy Nexus and Galaxy 7
Windows Phone 7-7.5 – Tested on the HTC Surround (7.0) HTC Trophy (7.5), LG-E900 (7.5), Nokia Lumia 800
Blackberry 6.0 – Tested on the Torch 9800 and Style 9670
Blackberry 7 – Tested on BlackBerry® Torch 9810
Blackberry Playbook (1.0-2.0) – Tested on PlayBook
Palm WebOS (1.4-2.0) – Tested on the Palm Pixi (1.4), Pre (1.4), Pre 2 (2.0)
Palm WebOS 3.0 – Tested on HP TouchPad
Firefox Mobile 15 – Tested on Android 2.3 and 4.1 devices
Chrome for Android 18 – Tested on Android 4.0 and 4.1 devices
Skyfire 4.1 - Tested on Android 2.3 device
Opera Mobile 11.5-12: Tested on Android 2.3
Meego 1.2 – Tested on Nokia 950 and N9
Tizen (pre-release) – Tested on early hardware
Samsung Bada 2.0 – Tested on a Samsung Wave 3, Dolphin browser
UC Browser – Tested on Android 2.3 device
Kindle 3 and Fire - Tested on the built-in WebKit browser for each
Nook Color 1.4.1 – Tested on original Nook Color, not Nook Tablet
Chrome Desktop 11-21 - Tested on OS X 10.7 and Windows 7
Safari Desktop 4-5 - Tested on OS X 10.7 and Windows 7
Firefox Desktop 4-15 – Tested on OS X 10.7 and Windows 7
Internet Explorer 7-10 – Tested on Windows XP, Vista and 7
Opera Desktop 10-12 - Tested on OS X 10.7 and Windows 7 
```

**B 级 - 增强的体验，但没有 Ajax 导航功能。**

```
Blackberry 5.0*: Tested on the Storm 2 9550, Bold 9770
Opera Mini 7 - Tested on iOS 5.1 and Android 2.3
Nokia Symbian^3 - Tested on Nokia N8 (Symbian^3), C7 (Symbian^3), also works on N97 (Symbian^1) 
```

**C 级 - 基本的、非增强的 HTML 体验仍然有效**

```
Blackberry 4.x - Tested on the Curve 8330
Windows Mobile - Tested on the HTC Leo (WinMo 5.2)
All older smartphone platforms and featurephones – Any device that doesn’t support media queries will receive the basic, C grade experience 
```

# caching - 借助缓存或 CDN（例如 cloudflare.com）提高 Heroku Dynos 启动的性能

> ID：14524221
> 
> 赞同：2
> 
> 时间：2013-01-25T14:50:15.663
> 
> 标签：caching, heroku, cdn

我想知道如何增加空闲的启动`Heroku Dynos`（[Heroku Devcenter on Idling](https://devcenter.heroku.com/articles/dynos#dyno-idling)）。长话短说：如果`Webapplication`一个小时没有访问您的站点，则将关闭，如果用户再次访问该站点，`Dyno`则需要重新开始。

我对此进行了一些研究，我知道您可以每小时 ping 您的应用程序，但我真的不喜欢欺骗 heroku 家伙。所以我正在寻找另一种解决方案。

我发现有人推荐一个`CDN`（`Content Delivery Network`例如[Cloudflare](https://www.cloudflare.com/)）。我想知道这将如何工作？我`Webapplication`从一个静态开始`Welcome Page`，从那里你可以点击一个`Link`来动态创建`WebPage`。所以我想知道是否可以访问 my `Webapplication`on`www.example.com`并获取 static 的内容`Welcome Page`，但是`CDN`请求 my `Webapplication`on 更新，因此`Dyno`将开始启动。如果用户现在单击动态创建的链接，则该链接`WebPage`已经`Dyno`开始。

也许它也适用于缓存？你对这个话题有什么想法吗？

这是可能的还是`Heroku`提供类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:02:41.907

> 但我真的不喜欢欺骗 Heroku 的家伙

如果您担心不欺骗 Heroku 的家伙，只需将您的 Dynos 提高到 2 个或更多 :)

空转仅对具有一个 Dyno 的应用程序产生影响。

无论如何，我不认为使用[Pingdom](https://www.pingdom.com/)之类的服务来 ping 站点是一个坏主意。

# security - JSF 安全性：页面重定向与页面转发

> ID：14524223
> 
> 赞同：4
> 
> 时间：2013-01-25T14:50:22.417
> 
> 标签：security, jsf

我是 JSF 的新手，我想了解为什么页面重定向和页面转发不会产生相同的安全渲染。

我有一个调用支持方法的 JSF 按钮：

```
<h:form>
    <!-- content... -->
    <p:commandButton action="#{login.play}" ... />
</h:form> 
```

登录托管 bean

```
public String play() {
   ...
   //forward implementation
   return "play";
}

public String play() {
   ...
   //redirect implementation
   return "play?faces-redirect=true";
} 
```

我的页面`play.xhtml`是安全的。只有角色`admin`或`user`可以访问它，但使用我的第`play`一种方法，未​​启用安全约束，我可以访问。为什么不一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:36:40.140

安全性是根据每个请求执行的。转发重用当前请求的响应以获取不同的视图。重定向创建一个全新的请求，其响应用于不同的视图。您可以通过查看浏览器地址栏中的请求 URL 轻松看到这一点。在前锋的情况下，它保持不变。

在不相关的说明中，通过 POST 导航是不好的做法。您应该有条件地在同一页面中显示结果，或者通过 GET 使用普通链接或通过 POST 后的重定向进行导航。

# vb.net - 检查文件是否在线存在的最快和最简单的方法是什么？

> ID：14524229
> 
> 赞同：1
> 
> 时间：2013-01-25T14:50:39.767
> 
> 标签：vb.net

检查文件是否在线存在的最快和最简单的方法是什么？

我知道如何检查文件系统上是否存在文件或网站是否存在，但我不知道如何检查文件是否在线存在。我该怎么做呢？

我想验证以下链接是否在线存在：

[http://ccc-itgs2012.wikispaces.com/file/view/AP+Human+Geography+Gapminder.flv](http://ccc-itgs2012.wikispaces.com/file/view/AP+Human+Geography+Gapminder.flv)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:08:25.983

对于 HTTP，使用 HTTP HEAD 方法。它的行为类似于 GET 方法，只是它只返回内容标头。如果文件不存在，服务器应该返回 404 状态码。否则，您可以假设该文件存在（甚至从内容标题中获取其大小）。

**编辑**

您可以使用以下代码：

```
Public Function ResourceExists(location As Uri) As Boolean
    If (Not String.Equals(location.Scheme, Uri.UriSchemeHttp, StringComparison.InvariantCultureIgnoreCase)) And (Not String.Equals(location.Scheme, Uri.UriSchemeHttps, StringComparison.InvariantCultureIgnoreCase)) Then
        Throw New NotSupportedException("URI scheme is not supported")
    End If

    Dim request = Net.WebRequest.Create(location)
    request.Method = "HEAD"

    Try
        Using response = request.GetResponse
            Return DirectCast(response, Net.HttpWebResponse).StatusCode = Net.HttpStatusCode.OK
        End Using
    Catch ex As Net.WebException
        Select Case DirectCast(ex.Response, Net.HttpWebResponse).StatusCode
            Case Net.HttpStatusCode.NotFound
                Return False
            Case Else
                Throw
        End Select
    End Try
End Function 
```

用法：

```
Dim itExists As Boolean = ResourceExists(New Uri("http://ccc-itgs2012.wikispaces.com/file/view/AP+Human+Geography+Gapminder.flv")) 
```

这确实会锁定调用者的线程，因此您可能希望将其重构为异步方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:53:19.780

您以与检查文件系统相同的方式在线检查：尝试访问文件，并在尝试失败时处理异常（顺便说一句：如果您在文件系统上使用 File.Exists()，您可能[正在做它错了](https://stackoverflow.com/a/265958/3043)）。

唯一的额外问题是，在线检查时，您可以发送资源的 http 请求并访问响应流，而无需实际阅读流，这意味着您不必下载整个文件即可知道请求将完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T16:27:12.810

此代码为我工作

```
Public Function CheckAddress(ByVal URL As String) As Boolean
    Try
        Dim request As WebRequest = WebRequest.Create(URL)
        Dim response As WebResponse = request.GetResponse()
    Catch ex As Exception
        Return False
    End Try
    Return True
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-10T19:12:26.643

我想出的最好的方法实际上发现它可以按需要工作，因为所有的方法都只是检查是否找到了域，所以如果找到了域而文件没有找到，它仍然会告诉你找到该文件，我的方法是尝试下载该文件**`DownloadFileAsync`**并使用计时器运行 3 秒，然后在 3 秒后检查是否从该文件下载了任何字节，如果是，则通过该文件找到该文件链接，如果没有，则找不到，然后您可以取消下载并删除已在您的PC上创建的文件。

这是我的代码：

```
Imports System.IO
Imports System.Net
Public Class Form1
    Dim BytesReceived As Integer

    Public WithEvents Download As WebClient

    Private Sub DownloadBUT_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Download = New WebClient
        Download.DownloadFileAsync(New Uri("http://example.com/FileName.exe"), My.Computer.FileSystem.SpecialDirectories.Desktop & "FileName.exe")
        CheckFileTimer.Start()
        DownloadBUT.Enabled = False
    End Sub

    Private Sub Download_DownloadProgressChanged(ByVal sender As Object, ByVal e As DownloadProgressChangedEventArgs) Handles Download.DownloadProgressChanged
        BytesReceived = e.BytesReceived
    End Sub

    Private Sub CheckFileTimer_Tick(sender As Object, e As EventArgs) Handles CheckFileTimer.Tick
        CheckFileTimer.Stop()
        If BytesReceived = 0 Then
            MsgBox("File not found!")
        Else
            MsgBox("File found!")
        End If
        DownloadBUT.Enabled = True
        Download.CancelAsync()
        Try
            File.Delete(My.Computer.FileSystem.SpecialDirectories.Desktop & "FileName.exe")
        Catch ex As Exception : End Try
    End Sub
End Class 
```

**希望这对你有用:)**

# java - 持久化与双向一对多拥有关系链接的对象时出现“预提交期间出现意外错误”异常

> ID：14524230
> 
> 赞同：1
> 
> 时间：2013-01-25T14:50:39.913
> 
> 标签：java, google-app-engine, maven, testng, datanucleus

## 语境

我在我的一个基于云的 java 项目中使用了 JDO 的*双向拥有的两个对象之间的一对多关系*（就像在[App Engine 的文档中描述的那样）。](http://developers.google.com/appengine/docs/java/datastore/jdo/relationships?hl=en#Owned_One_to_Many_Relationships)

```
@PersistenceCapable
public class IndexPage implements Page {

    @Persistent(mappedBy = "index")
    @Order(extensions =
      @Extension(
        vendorName = "datanucleus",
        key = "list-ordering",
        value = "title asc"))
    private List<MotherCategoryPage> motherCategoryPages;

    (...)
}

@PersistenceCapable
public class MotherCategoryPage implements Page {
    private String title;

    @Persistent
    private IndexPage index;

    (...)
} 
```

然后使用以下非常常见的 JDO 代码片段将这些对象存储到 appengine 的数据存储区中：

```
public void persistPage(Page page) {
    PersistenceManager pm = PMF.get();
    Transaction tx = pm.currentTransaction();
    tx.begin();
    // persist a Page object
    pm.makePersistent(page);
    tx.commit();
    pm.close();
} 
```

我还使用 testNG 实现了一个（非常简单的）单元测试，其中我实例化了 IndexPage 对象和 MotherCategoryPage 对象，并使用上述方法将它们持久化。

## 问题

这就是问题所在。我的代码**在生产环境中运行良好**（页面在本地和 App Engine 的服务器上都很好地保留了下来），并且**我的单元测试通过 Eclipse 完美运行**。但是**当它通过 maven 执行时测试失败了！**（使用万能插件）

这是万无一失的报告：

```
"Unexpected error during precommit"
org.datanucleus.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:419)
org.datanucleus.jdo.JDOTransaction.commit(JDOTransaction.java:132)
org.datanucleus.store.appengine.jdo.DatastoreJDOTransaction.commit(DatastoreJDOTransaction.java:59)
com.mycompany.PageManager.persistPage(PageManager.java:102)
com.mycompany.pages.PageTest.putPagesIntoDb(PageTest.java:167)
com.mycompany.pages.PageTest.pageTest(PageTest.java:90)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
org.testng.internal.Invoker.invokeMethod(Invoker.java:702)
org.testng.internal.Invoker.invokeTestMethod(Invoker.java:894)
org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1219)
org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
org.testng.TestRunner.privateRun(TestRunner.java:768)
org.testng.TestRunner.run(TestRunner.java:617)
org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
org.testng.SuiteRunner.run(SuiteRunner.java:240)
org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:87)
org.testng.TestNG.runSuitesSequentially(TestNG.java:1188)
org.testng.TestNG.runSuitesLocally(TestNG.java:1113)
org.testng.TestNG.run(TestNG.java:1025)
org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:177)
org.apache.maven.surefire.testng.TestNGXmlTestSuite.execute(TestNGXmlTestSuite.java:92)
org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:105)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)

NestedThrowablesStackTrace:
com.google.apphosting.api.ApiProxy$UnknownException: An error occurred for the API request datastore_v3.RunQuery().
at     com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.callInternal(ApiProxyLocalImpl.java:518)
at     com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:452)
at     com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:430)
at java.util.concurrent.Executors$PrivilegedCallable$1.run(Executors.java:463)
at java.security.AccessController.doPrivileged(Native Method)
at java.util.concurrent.Executors$PrivilegedCallable.call(Executors.java:460)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at     java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: org/mortbay/xml/XmlParser
at     com.google.appengine.api.datastore.dev.LocalCompositeIndexManager.getCompositeIndicesNode(LocalCompositeIndexManager.java:446)
at     com.google.appengine.api.datastore.dev.LocalCompositeIndexManager.manageIndexFile(LocalCompositeIndexManager.java:247)
at     com.google.appengine.api.datastore.dev.LocalCompositeIndexManager.processQuery(LocalCompositeIndexManager.java:200)
at     com.google.appengine.api.datastore.dev.LocalDatastoreService$9.run(LocalDatastoreService.java:1068)
at java.security.AccessController.doPrivileged(Native Method)
at     com.google.appengine.api.datastore.dev.LocalDatastoreService.runQuery(LocalDatastoreService.java:1065)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at     com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.callInternal(ApiProxyLocalImpl.java:498)
... 10 more 
```

换句话说，错误发生在提交更改时（上述*persistPage*方法的第 6 行），并且是由以下原因引起的：

```
java.lang.NoClassDefFoundError: org/mortbay/xml/XmlParser 
```

知道发生了什么吗？这不是一个主要问题，但我必须从 maven 预提交中排除这个测试，以便能够将项目推送到我的仓库中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:35:31.897

因此，对于 Maven，它没有 Mortbay 的 XMLParser 所需的所有依赖项（GAE 索引过程使用它 - 所以与持久性无关，但更多的 AppEngine 内部），并且在其他环境中它使用其他一些 XML 解析器，或者有那些必需的部门。因此，调试 CLASSPATH 中的 jar 以及 Maven 为您包含的内容并查看差异。

# delphi - 为什么我的插入符号没有返回到 TRichViewEdit 的开头？

> ID：14524231
> 
> 赞同：2
> 
> 时间：2013-01-25T14:50:40.553
> 
> 标签：delphi, caret

我正在将 TRichViewEdit 用于聊天应用程序，并在编辑中发送文本后将其清除。问题是在我清除编辑后，插入符号出现在最后一项的末尾。如果我单击编辑或再次开始输入，插入符号将返回到开头。为什么它不立即向后移动？

我试过打电话`RichViewEdit.Update`，`.SelectWordAt(0,0)`但这些似乎都不起作用。

例子： ![在此处输入图像描述](../Images/56ad4c85de1ed18ec13220e2c33dea96.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:52:42.800

所以我通过`RVEdit.SetSelectionBounds(0,0,0,0)`在清除后调用找到了一种解决方法，它将插入符号移回编辑框的开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T21:20:53.923

做这个：

```
RichViewEdit1.Clear; 
RichViewEdit1.Format; 
```

# python - 用列表推导在 Python 中转置多维矩阵

> ID：14524235
> 
> 赞同：1
> 
> 时间：2013-01-25T14:50:45.097
> 
> 标签：python, matrix, list-comprehension

我有一个 Python 任务，我必须在不使用任何 for 循环但仅使用列表理解的情况下转置多维矩阵（3x3、4x4、5x5 ...）。

作为 2x2 矩阵的示例，我们有：

```
a2 = [[1, 2], [3, 4]]
n = len(a2)
print [[row[i] for row in a2] for i in range(n)] 
```

但我不确定我是否真的了解它的工作原理或如何将其调整为 3x3、4x4、5x5... 矩阵

例如，与

```
a3 = [[[1, 2], [3, 4]], [[5, 6], [7, 8]]] 
```

我不一定要你给我答案（仍然需要自己弄清楚），但任何提示都会非常有帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T14:56:27.467

我很确定你已经在你的例子中拥有它......

```
a2 = [[1, 2], [3, 4]]  #2x2
n = len(a2)
print [[row[i] for row in a2] for i in range(n)]

a2 = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]  #3x3
n = len(a2)
print [[row[i] for row in a2] for i in range(n)] 
```

物体：

```
a3 = [[[1, 2], [3, 4]], [[5, 6], [7, 8]]] 
```

不是 2x2、3x3 或 4x4——它是 2x2x2。您需要准确解释`transpose`该数据结构的含义。

作为旁注，如果您没有将列表理解作为约束，`zip`那么按照 Lattyware 的建议使用是您应该这样做的方式——我只是想指出您的解决方案已经适用于这种`NxN`情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T14:54:16.827

有一个内置的[-`zip()`函数](http://docs.python.org/3.3/library/functions.html#zip)。

```
>>> list(zip(*[[1, 2], [3, 4]]))
[(1, 3), (2, 4)] 
```

请注意，调用`list()`是为了显示结果，在 3.x 中，这会产生一个可迭代的，而不是一个列表（这是惰性的，提供内存优势）。在 2.x 中，它无论如何都会返回一个列表。

如果您还想在具有更多嵌套列表的示例中转置内部部分，那么使用列表推导在子列表上运行相对简单`zip()`。

为了便于阅读，2.x 中的示例：

```
>>> zip(*(zip(*part) for part in [[[1, 2], [3, 4]], [[5, 6], [7, 8]]]))
[((1, 3), (5, 7)), ((2, 4), (6, 8))] 
```

# php - php页面出错后星级插件未设置值

> ID：14524236
> 
> 赞同：0
> 
> 时间：2013-01-25T14:50:45.130
> 
> 标签：php, javascript, codeigniter

我在代码点火器中使用[starratty 。](http://wbotelhos.com/raty/)由于某些错误，我想检查来自控制器的选中星。除此之外，它工作正常。

编码：

```
<script type="text/javascript">
$(function() {
    $('#click').raty({
        scoreName : 'score',
        number    : 7,
        click: function(score){
        }
    });
});

</script> 
```

请提示如何进行。在此先感谢。

# magento - Magento，在项目标题旁边添加一些文本

> ID：14524238
> 
> 赞同：-1
> 
> 时间：2013-01-25T14:50:48.690
> 
> 标签：magento, magento-1.7

我是 Magento 的新手，但愿意学习。:)

对于当前项目，我们需要在购买的项目旁边添加序列号。序列号应添加在发票中（PDF 和 html）。它不需要是新字段，只需将其添加到项目名称旁边或下方即可。我已经在数据库中保存了序列号，所以我唯一需要的是找到要修改的 html 文件并调用 SQL 语句来获取序列号。

请我真的可以使用任何帮助来找到该文件以及要更改的内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:56:17.683

尝试`template/sales/order/invoice/items/renderer/default.phtml`前端显示

模板文件夹可以在`/app/design/frontend/base/default/`商店的包/主题文件夹中，也可以在其中。

后台展示使用 `/app/design/adminhtml/default/default/template/sales/order/invoice/view/items/renderer/`文件夹，包含两个模板文件：`configurable.phtml`可配置类型产品，`default.phtml`, 其他类型

# restlet - 需要将过滤器放入 Restlet 组件的示例

> ID：14524239
> 
> 赞同：4
> 
> 时间：2013-01-25T14:50:51.057
> 
> 标签：restlet, restlet-2.0

我有一个使用 ServerResource 处理 HTTP GET 请求的 Restlet (v2.1.1) 组件。

我想将过滤器和/或路由器放入组件中，以便它们可以在请求到达 ServerResource 之前进行一些处理。

我一直在 Internet 上搜索执行此操作的示例，以及阅读“Restlet in Action”一书。我发现了一些有趣的东西：

有很多关于如何在组件中设置 ServerResource 的示例。

有很多关于如何创建和设置过滤器和路由器的示例。

不幸的是，无论我在书中还是在互联网上搜索，我都找不到同时使用这两种方法的示例！

根据这本书和网上的教程，我们应该可以创建一个组件，在组件中设置一个ServerResource，并使用过滤器对去往ServerResource的请求进行预处理。任何地方的文档似乎都没有确切地告诉我们如何做到这一点。

我误读了一切吗？真的没有办法将过滤器或路由器放在带有 ServerResources 的组件中吗？还是我在某处遗漏了一些文档，该文档提供了如何执行此操作的真实示例？

有人可以提供一个简单的例子或提供一个这样做的例子的链接吗？

谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T12:22:20.963

您需要将过滤器附加到路由器，然后使用以下方法将 ServerResource 附加到过滤器`setNext(Class<? extends ServerResource> targetClass)`：

```
Filter myFilter = new MyFilter(getContext());
myFilter.setNext(MyServerResource.class);
router.attach("/test", myFilter); 
```

`beforeHandle(Request request, Response response)`现在您可以使用过滤器的方法进行预处理。如果`CONTINUE`在此方法中返回，过滤器会将请求传递给 ServerResource。

# java - 无法在静态 Java 方法中获取数据源

> ID：14524240
> 
> 赞同：0
> 
> 时间：2013-01-25T14:50:52.363
> 
> 标签：java, sql, oracle, jsf, jsf-2

我正在尝试从 CDI bean 访问 Oracle 数据源。

```
import java.io.Serializable;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import javax.annotation.Resource;
import javax.faces.bean.ViewScoped;
import javax.inject.Named;
import javax.sql.DataSource;

@Named("ParentIDNameResolveController")
@ViewScoped
public class ParentIDNameResolve implements Serializable
{

    // Call the Oracle JDBC Connection driver
    @Resource(name = "jdbc/Oracle")
    private static DataSource ds;

    // Get the ID if the parent

    public static int ParentId(int chieldId) throws SQLException
    {

        int ParentId = 0;

        if (ds == null)
        {
            throw new SQLException("Can't get data source");
        }

        Connection conn = null;
        PreparedStatement ps = null;
        ResultSet rs;
        try
        {
            conn = ds.getConnection();
            ps = conn.prepareStatement("SELECT COMPONENTID, FKCOMPONENTID, COMPONENTSTATSID from COMPONENT where COMPONENTID = ?");
            ps.setLong(1, chieldId);
            rs = ps.executeQuery();

            while (rs.next())
            {
                ParentId = rs.getInt("FKCOMPONENTID");
            }

        }
        finally
        {
            if (ps != null)
            {
                ps.close();
            }
            if (conn != null)
            {
                conn.close();
            }
        }

        return ParentId;
    }

    // Get Parent Name

    public static String ParentName(int ParentId) throws SQLException
    {

        String ParentName = null;

        if (ds == null)
        {
            throw new SQLException("Can't get data source");
        }

        Connection conn = null;
        PreparedStatement ps = null;
        ResultSet rs;
        try
        {
            conn = ds.getConnection();
            ps = conn.prepareStatement("SELECT COMPONENTSTATSID, NAME from COMPONENTSTATS where COMPONENTSTATSID = ?");
            ps.setLong(1, ParentId);
            rs = ps.executeQuery();

            while (rs.next())
            {
                ParentName = rs.getString("NAME");
            }

        }
        finally
        {
            if (ps != null)
            {
                ps.close();
            }
            if (conn != null)
            {
                conn.close();
            }
        }

        return ParentName;
    }

} 
```

不幸的是，当我从静态 Java 方法引用数据源时，我得到了这个错误：

```
Can't get data source 
```

我不确定是否可以从静态 Java 方法访问数据源。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:41:29.310

不确定您的容器是否会`@Resource`向静态字段或静态方法注入任何带有注释的内容。尝试重新考虑你的类，也许让它成为`@ApplicationScoped`每个应用程序只有一个实例。

以下是对您的班级的一些小改动：

```
@Named("ParentIDNameResolveController")
@javax.enterprise.context.ApplicationScoped  // not from javax.faces.bean
public class ParentIDNameResolve implements Serializable
{

  // Call the Oracle JDBC Connection driver
  @Resource(name = "jdbc/Oracle")
  private DataSource dataSource;

  /* 
    Add getter/setter for DataSource
  */
  public DataSource getDataSource() {
    return this.ds;
  }

  public void DataSource setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
  }

  /* Change method signature to non static */
  public int ParentId(int chieldId) throws SQLException
  {

    DataSource ds = getDataSource();

    // your code here

    return ParentId;
  }

  /* Change method signature to non static */
  public String ParentName(int ParentId) throws SQLException
  {

    DataSource ds = getDataSource();

    // your code here

    return ParentName;
  }
} 
```

接下来，您也可以在代码中将其用作注入对象，并且您可以确定`DataSource`不会，`null`但如果会 - 检查它是否`DataSource`在配置文件中正确定义。

# c# - 适用于小型团队的 c#/.net 项目的 Git 存储库结构

> ID：14524246
> 
> 赞同：0
> 
> 时间：2013-01-25T14:51:26.510
> 
> 标签：c#, .net, git

我正在考虑将我们的 .net(c#) 项目从 TFS 转移到 git。tema 中的普遍共识是我们不想继续使用 tfs，我们希望试用 git。我们目前没有那么多项目要迁移，但我们希望随着我们的旧系统被替换，这些项目会增长。

目前，我们有一个 tfs 项目，用于处理我们认为多个项目、数据库、第 3 方 dll 等所需的所有东西。在 git 中拥有类似结构的最佳方法是什么？

我能看到的最好的方法是拥有与我们当前结构类似的东西，为所有公共文件提供一个单独的存储库。
我已经阅读了有关使用子模块的信息，但似乎有很多关于这些的抱怨。是否值得尝试类似 repo 或其他替代方案？或者有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:05:59.750

这个问题将是非常主观的，但 IMO 我会通过为您的常用内容建立一个单独的存储库来解决这个问题。

另一种选择是将常用的东西迁移到[Nuget 包](https://www.google.com/search?q=private+nuget+repository)，这样你就可以向前移动常用的东西，而不必担心破坏所有现有项目。

**以我的经验，企业环境中的常见项目往往会降低您快速响应变化的能力。**相反，您会花费大量时间担心“Core”或“Lib”模块中的更改将如何影响您拥有的 80 多个正在使用它们的项目。更糟糕的是，人们只是开始将所有内容都塞进这些模块中，即使它只与少数项目相关，仅仅是因为它*很简单*。

# ios - 使用 [tableview reloadData] 和 [tableview reloadRowsAtIndexPaths:] 调整 UITableViewCell 的高度都不能正常工作

> ID：14524248
> 
> 赞同：1
> 
> 时间：2013-01-25T14:51:34.490
> 
> 标签：ios, cocoa-touch, uitableview

这可能是一个很长的问题，以便我能够解释我遇到的所有问题。所以，我想实现这样的 UI 功能：

![在此处输入图像描述](../Images/8a36557838fb509e4eb47812ce597e43.png)

![在此处输入图像描述](../Images/cf9c55d4f3412b9f50d3df8440bb64a0.png)

所以我有一个在一个文件中实现的 UITableView，它是在另一个文件 TableViewCell.m 中实现的单元格，我需要在单击按钮后阅读更多内容以在第二个屏幕上使用文本消息展开 UILabel，然后单击关闭消息按钮恢复 UILabel 并因此调整 TableView 单元格的大小（这是一个按钮，我只更改它的图像）。因此，为了调整 UILabel 的大小，我使用 [UILabel sizeToFit] 并将 label.numberOfLines 从 3 更改为 0（据我所知是 iOS 6 功能）。这里创建单元格的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:  (NSIndexPath *)indexPath {
CPNTalkCell *cell = (CPNTalkCell *)[tableView  dequeueReusableCellWithIdentifier:kCellIdentifier];
NSString *modelId = [[models objectAtIndex:indexPath.row] valueForKey:@"modelId"];
NSDictionary *model = [[models objectAtIndex:indexPath.row] valueForKey:@"model"];
return [self setupCell:cell forModel:model withId:modelId];
} 
```

在 setupCell 方法中，我进行了额外的调整，在 CPNTalkCell 中，单元格被描述为 vi IB。这里是按钮 ReadMore 事件处理程序的代码，我尝试调整单元格和标签的大小：

```
-(void)ResizeLabel:(id)sender
{
  UIView* sender_button = (UIView*)sender;
  UIButton* _resizingSenderButton = (UIButton*)sender;
  CGRect _button_before = _resizingSenderButton.frame;
  NSIndexPath* indexPath = [listView indexPathForCell:(UITableViewCell*)[[ sender_button superview]superview ]]; //In such an ugly way may be i
  //access NSIndexpath of the current cell from
  // which button was clicked
  CPNTalkCell *cell = (CPNTalkCell*)[listView cellForRowAtIndexPath:indexPath];
  if (cell.messageLabel.numberOfLines==3) {
  [self.listView  beginUpdates];
  cell.messageLabel.numberOfLines=0;
  [cell.messageLabel sizeToFit];
  _button_before.origin.y = cell.messageLabel.frame.origin.y+ cell.messageLabel.frame.size.height+7;
  _resizingSenderButton.frame=_button_before;
 [_resizingSenderButton setBackgroundImage:[UIImage imageNamed:@"readmore2.png" ] forState:UIControlStateNormal];
 [cell sizeToFit];
 //  [self.listView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationTop];
 [self.listView reloadData];
 [self.listView endUpdates];
 }
  else
 {
  cell.messageLabel.numberOfLines = 3;
  [self.listView  beginUpdates];
  [cell.messageLabel sizeToFit];
   CGRect _button_after = _resizingSenderButton.frame;
  _button_after.origin.y = cell.messageLabel.frame.origin.y+ cell.messageLabel.frame.size.height+7;
  _resizingSenderButton.frame=_button_after;
  [_resizingSenderButton setBackgroundImage:[UIImage imageNamed:@"readmore1.png" ] forState:UIControlStateNormal];
  [cell sizeToFit];
  [self.listView reloadData];
  //[self.listView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationTop];
  [self.listView endUpdates];
  }
   } 
```

因此，此代码有效，并且在单击单元格后调整大小以适应文本，它的长度但工作很奇怪 - 有时按钮会在滚动列表按钮后消失或出现在文本上，也可能会消失甚至是文本。我在更改单元格时使用 reloadData - 我知道这不是最佳的，但正如您所见，我已经评论了重新加载一个单元格的代码，因为它在第一次点击时会更加奇怪或不工作。我还重载了 heightForRowatIndexPath：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *modelId = [[models objectAtIndex:indexPath.row] valueForKey:@"modelId"];
NSDictionary *model = [[models objectAtIndex:indexPath.row] valueForKey:@"model"];
CPNTalkCell *cell = [_cells objectForKey:modelId];

if (cell == nil) {
    cell = [self setupCell:nil forModel:model withId:modelId];
}

return cell.rowHeight;
} 
```

但在其中我描述了初始单元格参数，然后通过调用 TalkCell 文件中描述的 rowHeight 单击按钮！

我知道这是一个很长的问题，有时我解释得不是很清楚，但我认为 iOS 专家将能够理解我的问题并提出解决方案。我真的需要帮助，因为我试图解决这个问题不是一天。

非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:53:11.933

您需要重载`heightForRowAtIndexPath`以根据展开的单元格返回适当的值

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *mode

    lId = [[models objectAtIndex:indexPath.row] valueForKey:@"modelId"];
    NSDictionary *model = [[models objectAtIndex:indexPath.row] valueForKey:@"model"];
    CPNTalkCell *cell = [_cells objectForKey:modelId];

    if (cell == nil) {
        cell = [self setupCell:nil forModel:model withId:modelId];
    }

    if ( indexPath == expandedIndexPath )//save the expanded cell's index path somewhere
    {
        return expandedCellHeight;
    }

    return cell.rowHeight;
} 
```

# logging - 如何使用 DailyRollingFileAppender 为 log4j 配置生成的文件获取正确的扩展名（.log）

> ID：14524254
> 
> 赞同：1
> 
> 时间：2013-01-25T14:51:52.727
> 
> 标签：logging, log4j

我有 log4j 配置，所有配置都正确设置为在单独的文件中获取每日日志。我正在使用 org.apache.log4j.DailyRollingFileAppender。我确实遇到的问题是扩展名。我得到带有名称的 log_files，例如：abc.log.2013-1-23 和 abc.log.2013-1-24。但我想要的是获得这些文件的名称，如 abc.2013-1-23.log 和 abc.2013-1-24.log。我应该能够在包含日期的文件名之后看到扩展名（.log）！任何指针？任何帮助将不胜感激。

# java - 使用 ArrayLists 的递归不会重复

> ID：14524260
> 
> 赞同：0
> 
> 时间：2013-01-25T14:52:06.810
> 
> 标签：java, recursion, for-loop, arraylist

当我遇到这个问题时，我正忙于 projecteuler 的问题 151，[http ://projecteuler.net/problem=151。](http://projecteuler.net/problem=151)

我正在尝试使用 ArrayList `envelope`（仅包含 2 的幂）和 int`index`作为参数进行简单的递归。它首先用它下面的所有 2 的幂替换包络位置的整数`index`（例如，16 变为 8、4、2、1）。然后它将索引从 0 循环到新的末尾，`envelope`并以新包络和新索引作为参数应用相同的递归，直到包络等于 {1}。假设我正在计算可以做到这一点的方法的数量。这是代码：

```
import java.util.ArrayList;

public class Prob151 {

public static void main(String[] args) {
    totalCount = 0;
    ArrayList<Integer> list = new ArrayList<Integer>();
    list.add(8);
    recursion(list,0,1);
    System.out.printf("%d",totalCount);
}

public static int totalCount;

public static void recursion(ArrayList<Integer> envelope, int index, int batch) {
    int number = envelope.get(index); 
    if (envelope.size() == 1 && number == 1) {

        totalCount += 1;

    } else {

        // Updates the envelope
        envelope.remove(index);
        while (number > 1) {
            number /= 2;
            envelope.add(number);
        }
        batch += 1;

        for (int i = 0; i < envelope.size(); i++) {
            // Displays current information
            System.out.printf("batch = %d, envelope = {",batch);
            for (int j : envelope) {
                System.out.printf("%d,",j);
            }
            System.out.printf("}, i = %d\n",i);

            recursion(envelope,i,batch);
        }

    }
}

} 
```

这是我得到的输出：

```
batch = 2, envelope = {4,2,1,}, i = 0
batch = 3, envelope = {2,1,2,1,}, i = 0
batch = 4, envelope = {1,2,1,1,}, i = 0
batch = 5, envelope = {2,1,1,}, i = 0
batch = 6, envelope = {1,1,1,}, i = 0
batch = 7, envelope = {1,1,}, i = 0
batch = 8, envelope = {1,}, i = 0
1 
```

它没有返回索引 i = 1 的第 7 批，而是在遇到信封 = {1} 的第一个实例后停止。为了获得所需的结果，我应该改变什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:03:31.860

这里有几件事可以帮助您：

1）您使用了错误的数据结构，问题清楚地表明他随机抓取了一个信封。我强烈推荐使用`Bag`.

2) 第一批运行后，您的信封包含以下元素：

```
1 A2    
1 A3  
1 A4  
1 A5 
```

所以第一次选择 A5 的几率是`1 in 4`，所以如果`A5`在第一次选择中找不到 A5，我们会得到`A2`你的信封，如下所示：

```
2 A3  
2 A4  
2 A5 
```

现在第三批有`2 in 6`（三分之一）的机会选择一个`A5`。

让我知道这个澄清是否需要更多解释。

# c# - NullException 错误。帮助一个菜鸟

> ID：14524263
> 
> 赞同：0
> 
> 时间：2013-01-25T14:52:20.633
> 
> 标签：c#, xna, argumentnullexception

有人可以告诉我这里哪里出错了吗？我不断收到错误消息：

> “ArgumentNullException 未处理。此方法不接受此参数的 null。参数名称：song”

我找不到解决办法。

```
Song BGmusic;
bool songstart = false;

protected override void LoadContent()
{
    currentgamescreen = Gamescreen.menuscreen;

    if (!songstart)
    {
        MediaPlayer.Play(BGmusic);
    }

    BGmusic = Game.Content.Load<Song>("audio/rockTheDragon");
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T14:53:34.440

好吧，您调用尚未初始化的地方，因此为空`MediaPlayer.Play(BGmusic);`。`BGmusic`

*可能*使它像：

```
protected override void LoadContent()
{
    currentgamescreen = Gamescreen.menuscreen;

    if (!songstart)
    {
        BGmusic = Game.Content.Load<Song>("audio/rockTheDragon");
        MediaPlayer.Play(BGmusic);
    }
 } 
```

会解决一个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T14:54:26.810

您在`MediaPlayer.Play(BGmusic)`为`BGmusic`. 尝试以下操作：

```
Song BGmusic;
bool songstart = false;

protected override void LoadContent()
{
    currentgamescreen = Gamescreen.menuscreen;

    BGmusic = Game.Content.Load<Song>("audio/rockTheDragon");

    if (!songstart)
    {
        MediaPlayer.Play(BGmusic);
    }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T14:54:56.753

移动

```
 BGmusic = Game.Content.Load<Song>("audio/rockTheDragon"); 
```

到该方法的顶部

# jquery - JQuery mouseenter div暂停动画恢复持续时间在mouseleave时重新启动

> ID：14524266
> 
> 赞同：1
> 
> 时间：2013-01-25T14:52:36.290
> 
> 标签：jquery

我想在某些 div 有 mouseenter 时暂停动画，并在 mouseleave 时恢复。问题在于，当动画恢复时，它会重新启动持续时间，并且会变得越来越慢。

```
$(document).ready(function() {
    $('.timer').animate({ 'width': 940 }, { queue: false, duration: 5000, easing: 'linear' });

    $('.slider_app').mouseenter(function() {
        $('.timer').stop();          
    });

    $('.slider_app').mouseleave(function() {
        $('.timer').animate({ 'width': 940 }, { queue: false, duration: 5000, easing: 'linear'});
    });
}); 
```

# sql-server - SQL Server：获取最低值

> ID：14524268
> 
> 赞同：0
> 
> 时间：2013-01-25T14:52:49.790
> 
> 标签：sql-server, min

目标：我想找到最低的`DayInStock`NR`Cummsold > Balance`

查询如下

```
SELECT TOP (100) PERCENT 
       a.MonthNR
     , a.DayNR
     , a.DayInStock
     , a.CummSold
     , a.WarehouseID
     , a.ItemID
     , a.[Group]
     , a.Balance
     , a.CountryNumber
     , a.Country
  FROM dbo.VW_Critical_01_01 AS a 
  JOIN (SELECT MIN(DayInStock) AS DayInStock
             , MIN(CummSold) AS Cummsold
             , Balance
             , ItemID
             , [Group]
          FROM dbo.VW_Critical_01_01
         WHERE CummSold > Balance
         GROUP BY DayInStock, CummSold, Balance, ItemID, [Group]
      ) AS b 
   ON b.DayInStock = a.DayInStock 
  AND b.ItemID = a.ItemID 
  AND b.[Group] = a.[Group]
ORDER BY a.ItemID, a.DayInStock 
```

查询给出了我的结果：

```
MonthNR DayNR DayInStock CummSold   ItemID   Group  Balance CountryNumber   Country
**2 4   11  2902.492233 100049V3            1   2894    370 Sweden
2   4   11  2902.492233 100049V3            1   2894    280 Norway
2   4   11  2902.492233 100049V3            1   2894    270 Portugal
2   4   11  2902.492233 100049V3            1   2894    460 Finland
2   4   11  2902.492233 100049V3            1   2894    110 Switzerland**

2   5   12  2982.376102 100049V3            1   2894    370 Sweden
2   5   12  2982.376102 100049V3            1   2894    280 Norway
2   5   12  2982.376102 100049V3            1   2894    270 Portugal
2   5   12  2982.376102 100049V3            1   2894    460 Finland
2   5   12  2982.376102 100049V3            1   2894    110 Switzerland 
```

我只想看到标记为**BOLD的值**

至于那些`CummSold > Balance`（2902 大于 2894）并且`daynumber`是最低的 11 而不是 12

我的 SQL Server 知识似乎到此为止。我搜索并尝试了很多东西，也许我只是忽略了一些非常“愚蠢”的东西

任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:21:18.760

对于 SQL Server 2005+，您可以尝试使用分析函数：

```
;WITH CTE AS
(
    SELECT  a.MonthNR,
            a.DayNR,
            a.DayInStock,
            a.CummSold,
            a.WarehouseID,
            a.ItemID,
            a.[Group],
            a.Balance,
            a.CountryNumber,
            a.Country,
            ROW_NUMBER() OVER(PARTITION BY ItemID, [Group], Country
                              ORDER BY DayInStock) RN
    FROM dbo.VW_Critical_01_01 a
    WHERE CummSold > Balance
)
SELECT *
FROM CTE
WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:59:26.420

像这样的东西？

```
select DayNR
     , DayInStock
     , CummSold
     , WarehouseID
     , ItemID
     , [Group]
     , Balance
     , CountryNumber
     , Country
from(SELECT DayInStock 
          , DayNR
          , DayInStock
          , CummSold
          , WarehouseID
          , ItemID
          , [Group]
          , Balance
          , CountryNumber
          , Country
          , min(DayInStock) over (partition by itemID,Group,Country) as minDayInStock
      FROM dbo.VW_Critical_01_01
      WHERE CummSold > Balance
)V
where V.DayInStock = V.minDayInStock 
```

# opengl-es - GL_TRIANGLE_STRIP - 为单个绘图调用生成网格（退化三角形）

> ID：14524271
> 
> 赞同：1
> 
> 时间：2013-01-25T14:52:53.723
> 
> 标签：opengl-es, indexing, vertex

我需要为 GL_TRIANGLE_STRIP 渲染创建一个网格。

我的**网格**只是一个：

*   职位（不言自明）
*   尺寸（x,y 尺寸）
*   分辨率（x,y 中每个顶点之间的间距）

这是用于创建顶点/索引并返回它们的方法：

```
int iCols = vSize.x / vResolution.x;
int iRows = vSize.y / vResolution.y;

// Create Vertices
for(int y = 0; y < iRows; y ++)
{
    for(int x = 0; x < iCols; x ++)
    {
        float startu  = (float)x / (float)vSize.x;
        float startv  = (float)y / (float)vSize.y; 

        tControlVertex.Color    = vColor;
        tControlVertex.Position = CVector3(x * vResolution.x,y * vResolution.y,0);
        tControlVertex.TexCoord = CVector2(startu, startv - 1.0 );

        vMeshVertices.push_back(tControlVertex);   
    }
}

// Create Indices
rIndices.clear();

for (int r = 0; r < iRows - 1; r++)
{
    rIndices.push_back(r*iCols);

    for (int c = 0; c < iCols; c++)
    {
        rIndices.push_back(r*iCols+c);
        rIndices.push_back((r+1)*iCols+c);
    }
    rIndices.push_back((r + 1) * iCols + (iCols - 1));
} 
```

为了形象化，先举几个例子。

1) 尺寸 512x512 分辨率 64x64，所以它应该由 8 x 8 四边形组成，但我只得到 7x7

![512x512 网格 / 64x64 = 7x7 而不是 8x8 ？](../Images/037bca9a0632fcae49e29a4b2ef687bc.png)

2) 尺寸 512x512 分辨率 128x128，所以它应该由 4 x 4 四边形组成，但我只得到 3x3

![在此处输入图像描述](../Images/0701dacebe8b80d4433396415f8ae61c.png)

3) 尺寸 128x128 分辨率 8x8 所以它应该由 16 x 16 四边形组成，但我只得到 15x15

![在此处输入图像描述](../Images/3e0691f019dc25232704d9fe0bf462d1.png)

如您所见，我在某处缺少最后一行和最后一列。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:01:41.447

简短的回答：`<=`与 just 相比`<`，在生成顶点和索引时进行 for-loop test 。

问题是您的`iRows`和`iCols`变量的计算是计算一系列像素的特定分辨率的图元数量；称之为*n*。*对于n*个基元的三角形条带，您需要*n+2 个*基元，因此您只是缺少顶点的最后“行”和“列”。

索引生成循环需要：

```
for ( int r = 0; r <= iRows; ++r ) {
    for ( int c = 0; c <= iCols; ++c ) {
        rIndices.push_back( c + r + r*iCols );
        rIndices.push_back( c + r + (r+1)*iCols + 1 );
    }
} 
```

# objective-c - XCode Analyzer：对象的潜在泄漏

> ID：14524273
> 
> 赞同：1
> 
> 时间：2013-01-25T14:53:05.163
> 
> 标签：objective-c, xcode, memory-management, memory-leaks, cocos2d-iphone

这是一段代码，您能帮我正确管理其中的内存吗？

```
- (void) buildSpritesWithName:(NSString*)sN {

    self.arrayPages = [[NSMutableArray alloc] initWithCapacity:self.numPages];
    NSString *spriteName0 = [NSString stringWithFormat:@"%@%i.png", sN, 0];
    CCSprite *temp0 = [CCSprite spriteWithSpriteFrameName:spriteName0];

    NSLog(@"temp sprite %@ size : %f / %f",spriteName0, temp0.contentSize.width, temp0.contentSize.height);

    self.imgSize = CGSizeMake(temp0.contentSize.width, temp0.contentSize.height);

    for (int c = 1; c <= numberOfWheelFacesCycles; c++) {

        for (int x = 1; x <= self.numPages; x++) {

            NSString *spriteName = [NSString stringWithFormat:@"%@%i.png",sN, x];
            CCSprite *temp = [CCSprite spriteWithSpriteFrameName:spriteName];

            [self.arrayPages addObject:temp];
        }
    }

    NSLog(@"%i Pages built",self.arrayPages.count);
} 
```

分析器在以下行显示“对象的潜在泄漏”：

```
NSString *spriteName0 = [NSString stringWithFormat:@"%@%i.png", sN, 0]; 
```

为什么 ？NSString 是自动释放对吗？那么哪个对象可能被泄露？

我在另一堂课上有以下内容，又是什么问题：

```
self.name = [playersNames objectAtIndex:type]; 
```

顺便说一句，如果循环管理不好，您也可以提出建议吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:03:06.830

查看您的财产或访问者`arrayPages`。如果它保留，那么当您调用时，您的潜在泄漏就会出现：

```
self.arrayPages = [[NSMutableArray alloc] initWithCapacity:self.numPages]; 
```

如果`arrayPages`保留，则改为执行以下操作：

```
self.arrayPages = [[[NSMutableArray alloc] initWithCapacity:self.numPages] autorelease]; 
```

或更简单地说：

```
self.arrayPages = [NSMutableArray arrayWithCapacity:self.numPages]; 
```

至于你的循环，它看起来不错，但要小心在其中创建很多自动释放的对象；他们直到某个时候才会被释放。

# inheritance - 如何在使用 Coffeescript 时扩展 Backbone 模型并保持默认值

> ID：14524276
> 
> 赞同：3
> 
> 时间：2013-01-25T14:53:09.573
> 
> 标签：inheritance, backbone.js, coffeescript, default-value

鉴于我在咖啡脚本中有以下继承。

我收到一个错误，因为 myCat 似乎未定义“哺乳动物”。

我在其他一些帖子中读到，我实际上必须将默认值设为一个函数来继承默认值。但是我如何用咖啡脚本做到这一点？

```
class Animal extends Backbone.Model
  defaults:
    mammal: true

class Cat extends Animal
  defaults:
    furColor: "gray"

myCat = new Cat
alert(myCat.get('mammal')) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:25:10.223

最简单的方法是对两者都使用函数`defaults`，然后您`Cat`可以简单地调用`super`并添加一些东西：

```
class Animal extends Backbone.Model
  defaults: ->
    mammal: true

class Cat extends Animal
  defaults: ->
    _(super()).extend(furColor: "gray") 
```

您可以保留非功能`defaults`，`Animal`但这会变得丑陋，所以不要打扰。

请注意，它[`_.extend`](http://underscorejs.org/#extend)改变了它的第一个参数，所以通常你想说一些话，比如`_({}).extend(...)`避免在你不拥有的东西上乱涂乱画。在这种情况下，您知道`Animal#defaults`每次调用它都会返回一个全新的对象，因此您不必担心。如果你是偏执狂，你可以这样做：

```
defaults: ->
  _({}).extend(super(), furColor: 'gray') 
```

演示：http: [//jsfiddle.net/ambiguous/LETAc/](http://jsfiddle.net/ambiguous/LETAc/)

# c++ - 深入了解受保护的 C++

> ID：14524278
> 
> 赞同：1
> 
> 时间：2013-01-25T14:53:12.733
> 
> 标签：c++, protected

2011 [C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)在第 11.4 节中指出

> 当非静态数据成员或非静态成员函数是其命名类 (11.2) 的受保护成员 115 如前所述，授予对受保护成员的访问权限是因为引用发生在某个 C 类的朋友或成员中。如果访问要形成指向成员的指针（5.3.1），则嵌套名称说明符应表示 C 或从 C 派生的类。所有其他访问都涉及（可能是隐式的）对象表达式（ 5.2.5 ）。在这种情况下，对象表达式的类应该是 C 或从 C 派生的类。

（在旧标准中，第 11.5 节有类似的措辞。）

该规则限制了经常重复的想法，即“任何 B 或 B 的派生类都可以访问 B 的受保护成员”。然而，解释规则是困难的，不同的当前编译器执行规则的方式不同就证明了这一点。

例如，请参阅此测试代码。我使用 Apple LLVM Compiler 4.1、GCC 4.7.2 和 Visual Studio 2010 编译了这段代码。它们报告的错误既有相似之处，也有不同之处。

```
class Base
{
protected:
    int A;
};

class Derived : public Base
{
protected:
    int B;
};

class Grandchild : public Derived
{
    void access_protected(Base* b, Derived* d,
                          Grandchild* g, class GreatGrandchild* gg );
};

class GreatGrandchild : public Grandchild {};

void Grandchild::access_protected(Base* b, Derived* d,
                                  Grandchild* g, GreatGrandchild* gg )
{
    int* p;

    Base lb;
    Derived ld;
    Grandchild lg;
    GreatGrandchild lgg;

    A = 1;              // Legal...
    B = 2;

    Base::A = 1;
    Derived::B = 2;

    b->A = 1;           // Illegal ALL
    p = &(b->A);        // Illegal ALL
    lb.A = 1;           // Illegal ALL
    p = &(lb.A);        // Illegal ALL

    d->A = 1;           // Illegal GCC, VS
    p = &(d->A);        // Illegal GCC, VS
    ld.A = 1;           // Illegal GCC, VS
    p = &(ld.A);        // Illegal GCC, VS
    d->B = 2;           // Illegal ALL
    p = &(d->B);        // Illegal ALL
    ld.B = 2;           // Illegal ALL
    p = &(ld.B);        // Illegal ALL

    g->A = 1;           // Legal...
    g->B = 2;
    lg.A = 1;
    lg.B = 2;

    gg->A = 1;
    gg->B = 2;
    lgg.A = 1;
    lgg.B = 2;
} 
```

从这些结果中我了解到：（1）访问您自己的类和派生类的受保护成员总是可以的；(2) 访问声明它们的基类的受保护成员始终是非法的，但从该类除外；(3) 尽管标准注意区分指向成员的指针和“对象表达式”，但标准和编译器都给了它们相同的限制；`Derived`(4) 目前尚不清楚访问“中间”基类（在示例中）的受保护成员是否合法，该成员在中间基类中声明。

那么，令人困惑的是，我是否可以谈论我的祖父母的受保护成员归我父母所有。没有双关语的意思。

`friends`（为了简单和理智，我忽略了。）

由于`protected`它是该语言的基本组成部分，因此我有动力去理解它。请：

1.  根据您对标准的解释，哪个编译器正确实现了这一点？
2.  整体限制的理由是什么？为什么我*不能*自由访问基类的受保护成员？它旨在避免什么具体错误？您是否知道在线讨论（理想情况下由标准委员会举行）来探讨这一基本原理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T13:38:00.317

我无法引用参考或权威来源，但在我看来 g++ 和 VS 在这里都是正确的（他们第一次同意？）因为空的中间注入类可以更改父级受保护数据的访问控制。

至于基本原理，几乎可以肯定是因为你做`protected`的限制越少，它就越像`public`它（它已经与 public 有很多相似之处，你只需要派生一个类就可以不受限制地访问父内部）。如果您开始允许甚至不是同一个实例的子类来操纵您的状态，那么违反类不变量的机会就会显着增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:13:38.587

我会说 GCC 和 Visual Studio 是正确的。

鉴于以下情况：

```
class Base
{
protected:
  int A;
};

class Derived : public Base
{
protected:
  int B;
};

class OtherGrandchild : Derived
{
};

class Grandchild : Derived
{
  void access_protected(OtherGrandchild* otherGrandchild);
};

void Grandchild::access_protected(OtherGrandchild* otherGrandchild)
{
  otherGrandchild->A = 1; // Should be illegal
  otherGrandchild->B = 1; // Should be illegal

  Derived* derived = static_cast<Derived*>(otherGrandchild);

  derived->A = 1; // Should still be illegal
  derived->B = 1; // Should still be illegal
} 
```

如果您没有受到限制，您可以通过转换为通用基类型来更改`OtherGrandchild`from的其他私有成员。`Grandchild`这种访问应该只允许通过友元声明。

我不确定有关该主题的任何讨论，但这将是我对它的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:36:22.993

这样做的原因是派生对象 D 只能使用 D 或从 D 派生的另一个类的对象表达式访问基的受保护成员。

该标准不允许 D 使用 B 类型的对象表达式访问另一个对象的受保护成员

这正是（大致可以）上面引用想要表达的意思。

```
class base
{
protected:
   int x;
};

class derived : public base
{
public:
   void f(base *p)   
   {
      x = 2;     // good
      p->x = 3;  // not good. base is not 'derived' nor derived from 'derived'
   }
};

int main() { } 
```

想一想。基 B 的公共成员可在任何派生类 D 中访问。B 的私有成员在任何派生类 D 中均不可访问。只有受保护的成员需要考虑。标准中的上述引用说明了这一考虑。B 的受保护的非静态成员只能使用 D 类型的对象表达式或从 D 进一步派生的类型在派生类 D 中访问

# javascript - AngularJS 路由不起作用：链接点击没有事件，没有 $routeParams

> ID：14524287
> 
> 赞同：4
> 
> 时间：2013-01-25T14:53:41.507
> 
> 标签：javascript, angularjs

不知何故，我的应用程序在开发过程中停止了工作，我真的无法理解它有什么问题。

我已经删除了所有内容，剩下的唯一代码是：

```
function handlerControl($scope, $routeParams, $location){
    $scope.route = $routeParams;
}

var app = angular.module('Hello', []).config(
    function($routeProvider){
        $routeProvider.when('/:a/:b', {controller: handlerControl});
    }
); 
```

和 html 是

```
<body ng-app="Hello">

<div ng-controller="handlerControl">
    {{route}}
</div>

</body> 
```

省略头部，包括所有内容。

当我去

```
http://helloday/#/a/b/ 
```

我得到一个空哈希，同时期望得到 {a: 'a', b: 'b'}

我做错了什么？

位修改（使其工作）jsFiddle： http: [//jsfiddle.net/wWDj2/](http://jsfiddle.net/wWDj2/) [http://jsfiddle.net/wWDj2/](http://jsfiddle.net/wWDj2/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:13:32.393

路由要求您使用 ngView，并且您指定 a`template`或 a `templateUrl`：

应用程序代码。

```
var app = angular.module('myApp', []);

app.config(function($routeProvider) {
   $routeProvider.when('/foo/:id', {
        controller: 'FooCtrl',
        template: '<h1>Foo {{id}}</h1>'
   })
   .when('/bar/:test', {
        controller: 'BarCtrl',
        templateUrl: 'bartemplate.html'
   })
   .otherwise({ 
        controller: 'DefaultCtrl',
        template: '<h1>This is the default</h1>'
   });
});

app.controller('FooCtrl', function($scope, $routeParams) {
   $scope.id = $routeParams.id;
});

app.controller('BarCtrl', function($scope, $routeParams) {
   $scope.test = $routeParams.test;
});

app.controller('DefaultCtrl', function($scope){}); 
```

您的主页的标记：

```
<div ng-app="myApp">
   <a href="#/foo/123">Foo 123</a>
   <a href="#/bar/blah">Bar Blah</a>
   <a href="#">Default route</a>
   <hr/>
   <div ng-view>
       <!-- your processed view will show up here -->
   </div>
</div> 
```

# jquery - $.browser 是未定义的错误

> ID：14524289
> 
> 赞同：61
> 
> 时间：2013-01-25T14:53:54.377
> 
> 标签：jquery, jquery-ui, jquery-1.9

> **可能重复：**
> [jQuery $.browser 是否已弃用？](https://stackoverflow.com/questions/9638247/is-jquery-browser-deprecated)
> [jQuery 最新的 $.browser](https://stackoverflow.com/questions/14505301/jquery-latest-browser)

在我使用 JQuery 的代码中正在加载。我已经浏览了所有应该加载的文件，但是我找不到 JQuery 的加载位置。我需要包含第二个 JQuery 脚本，以便我包含的文件可以正常工作，因为第一个脚本加载到较晚。但是，这会导致其他错误，因为在加载第一个 JQuery 文件时会覆盖定义（我没有声明的那个）。所以现在我正在尝试使用 jQuery.noConflict 来解决这个问题。

以下是我的代码中的一些用法示例：

```
<script>
var $jquery190 = jQuery.noConflict();
</script>

jQuery.noConflict();
    (function($) {
//$(function() {
// more code using $ as alias to jQuery
//});
 $.fn.setupSpinner = function () {
        $(this)
            .ajaxStart(function () {
                $(this).show();
            })
            .ajaxStop(function () {
                $(this).hide();
            })
        ;
        return this;
    };

})(jQuery);

$jquery190(config.ids.datepicker + ", " + config.ids.todatepicker).datepicker("disable");
$jquery190(config.ids.datepicker + ", " + config.ids.todatepicker).datepicker("setDate", "-2d");
$jquery190(config.ids.datepicker + ", " + config.ids.todatepicker).datepicker("enable");
//        $(config.ids.datepicker + ", " + config.ids.todatepicker).datepicker("hide"); 
```

在做了一些这些替换后，我得到了错误：

```
TypeError: $.browser is undefined
[Break On This Error]   

...= buttonPanel + ($.browser.msie && parseInt($.browser.version,10) < 7 && !inst.i... 
```

该网站可在此处找到：[链接](http://www.roros.kommune.no/Politikk/Postliste/Journalpost-info1/) 这是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-01-25T14:56:03.973

.browser 调用已在 jquery 1.9 中删除，请查看[http://jquery.com/upgrade-guide/1.9/](http://jquery.com/upgrade-guide/1.9/)了解更多详细信息。

# wpf - VSTO 应用部署错误

> ID：14524290
> 
> 赞同：2
> 
> 时间：2013-01-25T14:53:56.320
> 
> 标签：wpf, excel, vsto, excel-addins

当我尝试使用单击一次安装程序安装应用程序时，我遇到了 VSTO 错误。我已经在 Windows XP 机器和 Windows 7 机器上尝试过。在客户端计算机上打开应用程序时的确切错误是

> “无法加载以下 Microsoft 解决方案，因为未安装兼容版本的 .NET Framework：myApplicationName.vsto”</p>

该应用程序是 C# 中的 VSTO 应用程序，在 Excel 应用程序（框架 4）中嵌入了 WPF 选项卡。开发应用程序的框架已经安装在客户端机器上。我在这个线程中没有找到任何解决方案；任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-16T20:17:17.767

我今天有同样的问题。我相信这是您的应用程序随附的 VSTO 2010 安装程序的问题。

我去[微软](https://www.microsoft.com/en-us/download/details.aspx?id=48217)下载了最新版本，安装它，重试我的安装程序，然后一切正常。

# jquery - jQuery：使一个按钮模拟另一个按钮

> ID：14524296
> 
> 赞同：1
> 
> 时间：2013-01-25T14:54:19.460
> 
> 标签：jquery

如何使“删除”（我将其重命名为“替换”）按钮模拟浏览按钮？我的意思是当点击“删除”来实际浏览另一个文件时？

![在此处输入图像描述](../Images/82bcae9e1478cd4567293adcc49bc45e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:05:22.543

您可以使用 JQuery，有关工作示例，请参阅 jsfiddle [http://jsfiddle.net/AF2c5/1 ：](http://jsfiddle.net/AF2c5/1)

HTML 标记：

```
<input type="file" id="fileButton" />
<button id="myButton">Delete</button> 
```

和javascript：

```
$('#myButton').on('click', function() {
    $('#fileButton').click();
}); 
```

您还可以删除原始文件输入，仅使用自定义按钮浏览： http: [//jsfiddle.net/AF2c5/2/](http://jsfiddle.net/AF2c5/2/)：

```
<input type="file" id="fileButton" style="display: none" /> 
```

请注意，隐藏输入可能会在某些（移动）浏览器中中断。那么你最好将原始输入定位在屏幕之外而不是隐藏它，请参阅[http://jsfiddle.net/AF2c5/3/](http://jsfiddle.net/AF2c5/3/)：

```
<input type="file" id="fileButton" style="position: absolute;  top: -50%; left: -50%" /> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:58:30.147

如果“删除”按钮与“浏览”按钮具有相同的功能和目标，我会在目标上触发一个点击事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T15:45:18.197

您始终可以在第二个按钮上使用 onclick javascript 事件。

例如，如果您有名为“file1”的文件输入标记和名为“form1”的表单内的按钮，则单击“file1”输入上的第二个按钮触发 click()。

就像是：

```
<form name="form1">
   <input name="file1" type=file />
   <button type="button" onclick="document.form1.file1.click()">replace</button>
</form> 
```

# jquery - 在我的菜单中单击关于或联系人后如何滚动到 div？

> ID：14524297
> 
> 赞同：6
> 
> 时间：2013-01-25T14:54:21.433
> 
> 标签：jquery, twitter-bootstrap

在我的菜单中单击关于或联系人后如何滚动到 div（例如：#about、#contact）？

```
<div class="masthead">
    <ul class="nav nav-pills pull-right">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
    </ul>
    <h3 class="muted">Name site</h3>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T14:59:36.547

你的html：

```
<div class="masthead">
    <ul class="nav nav-pills pull-right">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#contact">Contact</a></li>
    </ul>
    <h3 class="muted">Name site</h3>
</div>
<div id="about">about</div>
<div id="contact">contact</div> 
```

你的JavaScript：

```
$('ul.nav').find('a').click(function(){
    var $href = $(this).attr('href');
    var $anchor = $('#'+$href).offset();
    window.scrollTo($anchor.left,$anchor.top);
    return false;
}); 
```

如果要使用动画，请替换

```
window.scrollTo($anchor.left,$anchor.top); 
```

经过

```
$('body').animate({ scrollTop: $anchor.top }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T14:57:29.217

这比你想象的要容易。

```
 <div class="masthead">
    <ul class="nav nav-pills pull-right">
      <li class="active"><a href="#">Home</a></li>
      <li><a href="#About">About</a></li>
      <li><a href="#Contact">Contact</a></li>
    </ul>
    <h3 class="muted">Name site</h3>
  </div>

<div id="About">Here's my about</div>

...

<div id="Contact">Here's my contact</div> 
```

通过使用哈希，它会自动滚动到具有该 id 的元素（或具有该`name`属性的锚点）。如果您希望它平滑滚动，您可以使用 javascript 库（如 jquery）增强滚动效果。看到这个问题：[How to scroll HTML page to given anchor using jQuery or Javascript?](https://stackoverflow.com/questions/3163615/how-to-scroll-html-page-to-given-anchor-using-jquery-or-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T14:59:12.220

您可以通过以下方式使用 HTML 跳转到它：

```
<a href="#tips">Visit the Useful Tips Section</a> 
```

您可以通过以下方式使用 CSS 来实现：

[http://css-tricks.com/snippets/jquery/smooth-scrolling/](http://css-tricks.com/snippets/jquery/smooth-scrolling/)

# django - 生产服务器上的 Django South 迁移？

> ID：14524299
> 
> 赞同：0
> 
> 时间：2013-01-25T14:54:27.327
> 
> 标签：django, django-south

在我的本地开发屏幕上，我正在使用 South 数据迁移。我将我的应用程序部署到使用 git 到我的生产服务器。我已将所有 /south/ 文件夹放入我的 git .ignore 文件中。但是，南方仍然列在我安装的应用程序中。

我的问题是。我是否应该在生产服务器上也包含南，或者只是将我的设置文件拆分为本地和生产，南仅安装在本地。

其他人如何处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:01:12.550

我认为没有理由不在您的生产服务器中安装/使用南，它将为您提供一种在未来也可以在生产服务器中更改数据库模式的方法。我通常这样做，并使用[fabric](http://docs.fabfile.org/en/1.5/)管理开发和生产模式迁移。

无论如何都可能需要拆分设置文件（例如，对于 DB/Debug 设置）

您还可以根据 settings.py 中的某些内容有条件地将南添加到 INSTALLED_APPS：

例如

```
if DEBUG:  // or hostname == 'localhost', path=='...', anything else
    INSTALLED_APPS += ('south',) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:10:08.460

我个人在我的生产服务器上使用南。这允许我使用普通`manage.py migrate`命令在实时数据库上运行数据迁移。这可确保将实时数据库迁移到已部署代码版本的正确位置。

# jboss5.x - 如何在 jboss soa 5.3 中启用堆栈跟踪日志以摆脱启用更详细的日志记录以查看整个堆栈跟踪

> ID：14524302
> 
> 赞同：1
> 
> 时间：2013-01-25T14:54:33.640
> 
> 标签：jboss5.x, jboss-logging

我正在使用在 jboss 5.1 上运行的 jboss 5.3 soa。在尝试使用管理员用户访问 teiid 客户端时，我得到“启用更详细的日志记录以查看整个堆栈跟踪。”。事实上，我得到这个错误的地方很少。请让 mw 知道使用堆栈跟踪启用更多详细信息登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-06T17:49:03.387

稍后已修复此问题 访问[https://issues.jboss.org/browse/TEIID-3574](https://issues.jboss.org/browse/TEIID-3574)

# ios - UICollectionView - 水平分页，3 个页面可见，1 个在中间使用 UICollectionView

> ID：14524304
> 
> 赞同：2
> 
> 时间：2013-01-25T14:54:41.193
> 
> 标签：ios, uicollectionview, horizontal-scrolling, scroll-paging

在使用 UICollectionView 在不同页面之间滚动时，我正在尝试实现与移动 Safari 相同的功能。一页在中间，其他部分也可见。

![在此处输入图像描述](../Images/507a130ec7c62549c82aae9e882a4214.png)

我正在努力使用 UICollectionView 实现这种行为。有一种方法我找到了如何在一个屏幕上放置 3 个页面 - 使页面更小并设置适当的插图。但是，一旦我将页面设置为更小并启用了分页，页面就不会按应有的方式滚动到中心。我也可以禁用分页并在 UICollectionViewFlowLayout 的子类中使用此方法：

```
- (CGRect)rectForTargetPageForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity 
```

在这种方法中，我可以准确设置 UICollectionView 将停止的位置。但是，滚动体验不如使用启用分页的 UIScrollview 好。当我以更大的速度滑动时，滚动了几页并停在建议的页面上。我想要实现的是与启用分页的正常滚动视图相同的行为——无论我使用什么速度，我只会多得到 1 页。

有谁知道如何使用 UICollectionView 解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:21:35.850

所以你想让页面的大小小于滚动视图的大小，对吧？页面大小**始终**与滚动视图的大小相同，因此您必须*使滚动视图更小*。

然后还有另一个问题。**如何接收*超出*滚动视图范围的触摸？**

覆盖`-[UIView pointInside:withEvent:]`滚动视图以检查比实际更大的范围。然后触摸应该起作用。

* * *

事实上，我自己并没有尝试过，我是通过在上面放置带有所需 bounds 和 override 的补充视图来做到这一点的`-[UIView hitTest:withEvent:]`。在里面我修改了点并称为滚动视图命中测试。这样触摸是由滚动视图处理的，但它们的位置是错误的。您可能想尝试结合这两种方法来获得正确的位置。

# java - 哪种方案更适合管理 User 和 UserPreference 的休眠关系？

> ID：14524315
> 
> 赞同：1
> 
> 时间：2013-01-25T14:55:17.403
> 
> 标签：java, hibernate

我也想看看有经验的hibernate开发人员的一些意见，所以我可以详细说明一下。

我有以下情况：

*   用户有很多 UserPreference
*   UserPreference 有一个用户
*   UserPreference 有一个 Preference
*   Preference 有很多 UserPreference

我可以想到两种方法（为了清楚起见，省略了一些字段）：

1）用户端的用户偏好：

```
@Entity
public class User implements Serializable {

     private String username;

     private String password;

     @OneToMany(cascade = CascadeType.ALL, orphanRemoval=true)
     private Set<UserPreference> userPreferences;
}

@Entity
public class UserPreference implements Serializable {

     private String value;

     @ManyToOne
     private Preference preference;
}

@Entity
public class Preference implements Serializable {

     private String preferenceName;

     private String defaultValue;
 } 
```

2) UserPreference 端的用户：

```
@Entity
public class UserPreference implements Serializable {

     private String value;

     @ManyToOne
     private User user;

     @ManyToOne
     private Preference preference;
}

@Entity
public class User implements Serializable {

     private String username;

     private String password;
}

@Entity
public class Preference implements Serializable {

     private String preferenceName;

     private String defaultValue;
} 
```

在您看来，您认为哪个更好？为什么？如果与我的不同，请随意展示您自己的方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:58:44.977

我认为第一个更好，只是因为你可以做到

`userPreferences.contains(aPreference);`

检查给定的首选项是否存在（提供的 hashCode 和 equals 都可以）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:24:09.557

由于您是休眠新手，因此不要弄乱 Beans 的数量。

仅使用 User 和 Preference bean。

因此，用户可能有多个偏好，偏好可能有多个用户。

在双方使用多对多。

# z3 - Z3 4.3：获取完整模型

> ID：14524316
> 
> 赞同：2
> 
> 时间：2013-01-25T14:55:16.883
> 
> 标签：z3

[这个问题与这个](https://stackoverflow.com/questions/11115004/z3-4-0-get-complete-model)问题几乎相同，但解决方案对我不起作用。抱歉，我想对该答案发表评论，而不是提出新问题，但我没有足够的声誉......

我正在[为电梯建模一个简单的状态机](http://rise4fun.com/Z3/VhiR)。有两个楼层和两个按钮*Up*和*Down*。我已经将转换建模为谓词*Action x Elevator x Elevator* (Elevator = State)，这样*T(a,s,s')*成立，如果动作*a*可能导致从*s*到*s'*的转换，其中一个动作是按*向上*或*向下*按钮。问题的可满足性不取决于按下按钮的人，但我希望 Z3 对功能*主题分配一些解释： Action -> Person*。

目标是找到状态机的*k*轨迹，这可能有助于理解电梯的行为。

我尝试了不同的选项组合，包括`auto-config=false`and `model-completion=true`，但没有成功。我还尝试强制完成模型，询问*(subject Action0)*的值，但 Z3 仍然没有为*subject*分配解释。

我的 Z3 版本是 4.3.1，在 Linux amd64 上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:41:18.793

参数问题`:model-completion`已修复。该修复程序已在[http://z3.codeplex.com/SourceControl/changeset/a895506dac75](http://z3.codeplex.com/SourceControl/changeset/a895506dac75)提供。

该修复程序将在下一个正式版本中提供。如果你愿意，你可以下载`unstable`(work-in-progress) 分支，然后编译它。要下载，您只需`Download`点击上面链接中的按钮即可。

顺便说一句，新的 Z3 有一个新的参数设置框架，允许我们设置内部模块参数。在下一个版本中（和`unstable`分支中）。我们必须使用

```
(set-option :model_evaluator.completion true) 
```

代替

```
(set-option :model_completion true) 
```

因为我们正在设置模块的参数`model_evaluator`。此外，我们必须使用

```
(eval <term> :completion true) 
```

代替

```
(eval <term> :model_completion true) 
```

因为我们正在设置`completion`模型评估器的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T16:01:23.907

好例子。抽象排序 Person 没有出现在断言中，返回 Person 的函数也没有在断言中使用。

您可以通过将参数直接传递给函数来强制 eval 完成模型：

[http://rise4fun.com/Z3/Pslt4](http://rise4fun.com/Z3/Pslt4)

换句话说，使用

```
 (eval <term> :model-completion true) 
```

代替

```
 (eval <term>) 
```

一种不同但很老套的方法是确保您要评估的术语包含在原始模型中：[http ://rise4fun.com/Z3/Yukv](http://rise4fun.com/Z3/Yukv)

# python - 如何将日期字符串转换为不同的格式

> ID：14524322
> 
> 赞同：132
> 
> 时间：2013-01-25T14:55:41.600
> 
> 标签：python

我需要在 python 中将日期**字符串**“2013-1-25”转换为**字符串**“1/25/13”。我看了看，`datetime.strptime`但仍然找不到解决方法。

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2013-01-25T14:57:06.720

我假设我`import datetime`在运行下面的每一行代码之前

```
datetime.datetime.strptime("2013-1-25", '%Y-%m-%d').strftime('%m/%d/%y') 
```

打印`"01/25/13"`。

如果你不能忍受前导零，试试这个：

```
dt = datetime.datetime.strptime("2013-1-25", '%Y-%m-%d')
print '{0}/{1}/{2:02}'.format(dt.month, dt.day, dt.year % 100) 
```

这打印`"1/25/13"`。

编辑：这可能不适用于每个平台：

```
datetime.datetime.strptime("2013-1-25", '%Y-%m-%d').strftime('%m/%d/%y') 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-02-19T19:38:06.690

如果您可以在一月份使用 01 而不是 1，那么请尝试...

```
d = datetime.datetime.strptime("2013-1-25", '%Y-%m-%d')
print datetime.date.strftime(d, "%m/%d/%y") 
```

您可以查看[文档](http://docs.python.org/2/library/datetime.html?highlight=strftime#strftime-and-strptime-behavior)以获取其他格式指令。

# php - 如何验证 PHP 中的字符串是否仅包含字母、单引号和破折号

> ID：14524324
> 
> 赞同：1
> 
> 时间：2013-01-25T14:55:44.380
> 
> 标签：php

> **可能重复：**
> [正则表达式允许 AZ，- 和 '](https://stackoverflow.com/questions/7385420/regex-to-allow-a-z-and)

我有一个要求输入名字的表格，名字不能包含任何数字，但可以有 (') 或 (-) 例如 O'Neal, O-man。

我已经使用过`is_string()`，但似乎很严格，你们中有人知道如何验证接受这些值的字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:00:34.433

尝试这个：

```
if (!preg_match("/^[A-Za-z\\- \']+$/",$name)) {
  echo "Invalid";
}
else {
  echo "Valid";
} 
```

# android - 恢复 Facebook 3 SDK 会话

> ID：14524325
> 
> 赞同：2
> 
> 时间：2013-01-25T14:55:44.870
> 
> 标签：android, facebook

我正在使用 Facebook 登录构建一个 Android 应用程序，但我坚持将会话持续到内部存储器。这是我实例化它的方式：

```
private static Session openActiveSession(Activity activity, boolean allowLoginUI, StatusCallback callback, List<String> permissions) {
    OpenRequest openRequest = new OpenRequest(activity).setPermissions(permissions).setCallback(callback);
    Session session = getSession(activity);
    if (SessionState.CREATED_TOKEN_LOADED.equals(session.getState()) || allowLoginUI) {
        Session.setActiveSession(session);
        session.openForRead(openRequest);
        return session;
    }
    return null;
}

private static Session getSession(Activity activity) {
    return new Builder(activity).setTokenCachingStrategy(new SharedPreferencesTokenCachingStrategy(activity)).build();
} 
```

问题是这个检查会话是否可以恢复的代码永远不会触发，因为 isOpened() 将始终返回 false

```
if((facebookSession = getSession(this)) != null && facebookSession.isOpened()) {
        waitDialog = ProgressDialog.show(this, getResources().getString(R.string.pleaseWait), getResources().getString(R.string.loadingData));
        onPostLogin();
        return;
    } 
```

我试图用这两个函数来解决这个问题：

```
private void saveFacebookSession() {
Bundle facebookCache = new Bundle();
        Parcel parceledCache = Parcel.obtain();
        Session.saveSession(facebookSession, facebookCache);
        parceledCache.writeBundle(facebookCache);
        try {
            FileOutputStream output = openFileOutput(FACEBOOK_SESSION_FILE, MODE_PRIVATE);
            byte[] marshalledParcel = parceledCache.marshall();
            Editor prefsEditor = preferences.edit();
            prefsEditor.putInt(RESTORE_BYTE_COUNT, marshalledParcel.length);
            prefsEditor.commit();
            output.write(marshalledParcel);
            output.flush();
            output.close();
        } catch (Exception e) {
            Log.e(getClass().getName(), "Could not save the facebook session to storage");
        }
}

private boolean restoreFacebookSession() {
        try {
            FileInputStream input = openFileInput(FACEBOOK_SESSION_FILE);
            int arraySize = preferences.getInt(RESTORE_BYTE_COUNT, -1);
            if(arraySize == -1) {
                Log.e(getClass().getName(), "Could not read the facebook restore size");
                return false;
            }
            byte[] sessionData = new byte[arraySize];
            input.read(sessionData);
            Parcel readParcel = Parcel.obtain();
            readParcel.unmarshall(sessionData, 0, arraySize);
            Bundle sessionBundle = readParcel.readBundle();
            facebookSession = Session.restoreSession(getApplicationContext(), null, (StatusCallback)this, sessionBundle);
            return true;
        } catch (Exception e) {
            Log.e(getClass().getName(), "Could not restore the session");
            return false;
        }
    } 
```

第二种方法不起作用，因为在读取捆绑包时会引发有关幻数的异常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-24T00:23:49.753

我遇到了同样的问题，问题是你在第一次创建 Session 之后没有调用 Session.setActiveSession() 所以我猜你就像我在 onActivityResult 方法上所做的那样做这样的事情：

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        com.facebook.Session fbSession = com.facebook.Session.getActiveSession();
        if (fbSession != null) {
            fbSession.onActivityResult(this, requestCode, resultCode, data);
        }
    } 
```

因此从未从 facebook sdk getActiveSession 读取回调始终返回 null。

# css - 更改占位符的字体系列

> ID：14524328
> 
> 赞同：31
> 
> 时间：2013-01-25T14:55:50.823
> 
> 标签：css, input, stylesheet, font-face, placeholder

输入字段是否可以有一个`font-family`而占位符是另一个？

我尝试使用 CSS 中`font-family`已经定义的输入占位符进行更改，`@font-face`但它不起作用：

**CSS**

```
 .mainLoginInput::-webkit-input-placeholder { 
      font-family: 'myFont', Arial, Helvetica, sans-serif;
    }

    .mainLoginInput:-moz-placeholder { 
      font-family: 'myFont', Arial, Helvetica, sans-serif;
    } 
```

**HTML**

```
 <input class="mainLoginInput" type="text" placeholder="Username"  /> 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-05-06T10:12:17.467

如果有人想要所有浏览器的占位符选择器：

```
.mainLoginInput::-webkit-input-placeholder {
  font-family: 'myFont', Arial, Helvetica, sans-serif;
}

.mainLoginInput:-ms-input-placeholder {
  font-family: 'myFont', Arial, Helvetica, sans-serif;
}

.mainLoginInput:-moz-placeholder {
  font-family: 'myFont', Arial, Helvetica, sans-serif;
}

.mainLoginInput::-moz-placeholder {
  font-family: 'myFont', Arial, Helvetica, sans-serif;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-12-14T09:01:56.787

将此用于主要浏览器支持：

**HTML：**

```
<input type="text" placeholder="placeholder text.." class="mainLoginInput" /> 
```

**CSS：**

```
.mainLoginInput::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */
  font-family: 'myFont', Arial, Helvetica, sans-serif;
  opacity: 1; /* Firefox */
}

.mainLoginInput:-ms-input-placeholder { /* Internet Explorer 10-11 */
  font-family: 'myFont', Arial, Helvetica, sans-serif;
}

.mainLoginInput::-ms-input-placeholder { /* Microsoft Edge */
  font-family: 'myFont', Arial, Helvetica, sans-serif;
} 
```

详细参考[链接](https://www.w3schools.com/howto/howto_css_placeholder.asp)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T15:13:39.873

找到了...

Firefox 19+ 用户的前缀是`::-moz-placeholder`

代码看起来像这样

```
.mainLoginInput::-moz-placeholder {
   font-family: 'myFont', Arial, Helvetica, sans-serif;  
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-06-13T06:50:34.207

简直就是这样

```
.mainLoginInput::placeholder{
     font-family: -Your font here-;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-02T15:30:22.503

下面是`::placeholder`伪元素的完整使用：

```
::-webkit-input-placeholder { /* Chrome/Opera/Safari */
  color: pink;
}
::-moz-placeholder { /* Firefox 19+ */
 color: pink;
}
:-ms-input-placeholder { /* IE 10+ */
 color: pink;
}
:-moz-placeholder { /* Firefox 18- */
 color: pink;
} 
```

Firefox 中的所有占位符都应用了不透明度值，因此为了解决这个问题，我们需要重置该值：

```
::-moz-placeholder {
  opacity: 1;
} 
```

[资源](https://css-tricks.com/almanac/selectors/p/placeholder/)

# ios - 将动态单元格添加到静态 UITableView：动态单元格为空

> ID：14524334
> 
> 赞同：0
> 
> 时间：2013-01-25T14:56:11.807
> 
> 标签：ios, objective-c, ios6, uitableview

我已经完成了我的研究并遵循了这个过程的众多指南，包括：

1.  [将未知数量的行添加到“静态单元”UITableView](https://stackoverflow.com/questions/10043521/adding-unknown-number-of-rows-to-static-cells-uitableview)
2.  [https://devforums.apple.com/message/502990#502990](https://devforums.apple.com/message/502990#502990)

但是后续问题中反复出现的主题始终是“TableViewCells 出现了，但它们是空的”。我假设人们解决了这个问题，但没有发布任何解决方案。

因此，我所处的阶段包括：静态单元格显示并正确填充数据，动态单元格正确显示数量，但不显示其元素（它们是空的）。

我相信我已经正确连接了所有内容。我有：

1.  在我的 UITableViewController 子类中，包含并覆盖了上面两个链接中标记为“Answer”的所有必需方法。
2.  子类化 UITableViewCell，并在子类中包含两个 UILabel 属性。
3.  将 Storyboard 中单元格的类设置为我的子类，并给定一个适当的标识符，该标识符在 Controller 子类中正确使用。
4.  在情节提要的单元格上放置了两个 UILabel。
5.  将两个标签连接到 Cell 子类中的属性。

我实例化并为属性赋值，就像上面的答案一样。

```
static NSString *CellIdentifier = @"DynamicCell";
    OwnersInfoEventsCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[OwnersInfoEventsCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.eventName.text = @"Name"; //this doesn't show up
    cell.eventNeed.text = @"Need"; //this doesn't show up
    cell.backgroundColor = [UIColor redColor]; //this works, the cell shows up red
    return cell; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:44:19.553

首先，您需要检查您是否已 `OwnersInfoEventsCell`正确定义。检查您在单元类中定义的标签是否正确定义。检查该标签的框架。

```
 _ eventName = [[UILabel alloc]initWithFrame:CGRectMake(25, 2, 40 , 40)];
 _ eventName.backgroundColor = [UIColor clearColor];
 [_ eventName setBaselineAdjustment:UIBaselineAdjustmentAlignCenters];
 eventName.font = [UIFont fontWithName:@"King" size:12];
 [self.contentView addSubview:_ eventName ]; 
```

检查您是否在单元格的内容视图中添加了标签。这可能是个问题。让我展示您的代码，`OwnersInfoEventsCell`然后我可以更简短地建议您。

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:20:03.363

这发生在我身上，问题是当您创建自己的单元格时（以防您找不到可重复使用的单元格），它的两个标签为零。因此，您还必须创建两个标签并将它们设置为您的单元格的标签，希望它会起作用。

# python - 在 Python 中自动登录 Gmail

> ID：14524340
> 
> 赞同：-1
> 
> 时间：2013-01-25T14:56:25.017
> 
> 标签：python, gmail

我正在编写一个可以登录 Gmail 的 Python 程序。

该程序的目的是检查用户名/密码组合是否存在且正确。

由于这个程序是测试用户名/密码组合的存在，所以不需要知道Gmail中的任何邮件内容。

该程序的输入是**用户名**和**密码**。

该程序的输出是

> 登录成功

或者

> 登录失败

登录失败可能是：

1.  现有用户名+错误密码
2.  不存在的用户名

我的想法是先登录 Gmail。之后，当登录失败时，gmail网页会在登录网页上显示特定的消息。我可以解析网页内容并检查它是否有特定的消息。

但是，我仍然不知道如何在 Python 中登录 Gmail。请让我知道可以使用哪个模块或给我写一小段示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:17:32.957

这是一个想法：

您为什么不尝试从该帐户发送电子邮件并查看它是否发送？您可以`smtplib`在 python 标准模块中执行此操作。[这里](http://www.blog.pythonlibrary.org/2010/05/14/how-to-send-email-with-python/)有代码示例。您必须查看模块的文档，但如果登录失败，它似乎会引发异常，其中应该包含您感兴趣的详细信息。

在编辑中：

我挖出我写的这段代码就是为了做到这一点。您需要`try/catch`在底部放置一个位以检测错误的登录凭据。

```
# Subject
now = dt.datetime.now().ctime()
subject = 'Change to system on %s' % now

# Body
body = 'Subject: %s,\n' % subject
body += 'On %s, a change to the system was detected. Details follow.\n\n' % now

relevantFiles = list(set([x.file for x in relevantChunks]))
for file in relevantFiles:

    fileChunks = [x for x in relevantChunks if x.file == file]
    for chunk in fileChunks:
        body += '****** Affected file %s. ' % chunk.file
        <some other stuff>

server = smtp.SMTP(args.host) # host = smtp.gmail.com:<port> look this bit up
server.starttls()
server.login(args.username, args.password)
server.sendmail(args.sender, args.recipient, body)
server.quit() 
```

* * *

顺便说一句，我不太清楚为什么这个问题被否决了，甚至除了你问错问题的事实之外，还有什么被否决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-02T19:51:18.640

试试这个：

```
from email.mime.text import MIMEText
import smtplib

msg = MIMEText("Hello There!")

msg['Subject'] = 'A Test Message'
msg['From'] = 'username@gmail.com'
msg['To'] = 'username@gmail.com'

s = smtplib.SMTP('smtp.gmail.com:587')
s.starttls()  ##Must start TLS session to port 587 on the gmail server
s.login('username', 'passsword') ##Must pass args gmail username & password in quotes to authenticate on gmail
s.sendmail('username@gmail.com',['username@gmail.com'],msg.as_string())

print("Message Sent") 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T15:02:45.053

这种事情就像是被*禁止*的，这就是创建 OAuth 或 OpenID 之类的东西的原因。这种东西允许用户在**不**输入*用户名*和*密码*的情况下登录。所以要小心。

# spring - 休眠 3 -> 4，没有当前会话

> ID：14524341
> 
> 赞同：1
> 
> 时间：2013-01-25T14:56:25.010
> 
> 标签：spring, hibernate, session

早上好，

当我从 Hibernate 3 升级到 4 时，我得到了“臭名昭著的”当前会话错误。我搜索它，一切似乎都设置正确。我需要一些见解:)

这是我的配置：Spring 3.2 Hibernate 4.1.9

数据源上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.2.xsd
    http://www.springframework.org/schema/tx 
    http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver">
        </property>
        <property name="url"
            value="jdbc:mysql://xxxxx:3306/db?zeroDateTimeBehavior=convertToNull&amp;autoReconnect=true">
        </property>
        <property name="username" value="xxxx"></property>
        <property name="password" value="xxxx"></property>
    </bean>
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource">
            <ref bean="dataSource" />
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">
                    org.hibernate.dialect.MySQLDialect
                </prop>
            </props>
        </property>
        <property name="mappingResources">
            <list>
                <value>
                    com/dao/user/User.hbm.xml
                </value>                        
            </list>
        </property>
    </bean>

    <context:component-scan base-package="com.dao" />
    <context:annotation-config />
    <tx:annotation-driven transaction-manager="hibernateTransactionManager" proxy-target-class="true"/>

    <bean id="hibernateTransactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory">
            <ref bean="sessionFactory" />
        </property>
    </bean>

    <bean id="userDAO" class="com.dao.user.UserDAOImpl">
        <property name="sessionFactory">
            <ref bean="sessionFactory" />
        </property>
    </bean>

</beans> 
```

业务背景：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.2.xsd
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">

    <context:component-scan base-package="com.services" />
    <context:annotation-config />   

    <bean id="userServices" class="com.services.user.UserService">
        <property name="UserDAO" ref="userDAO" />
    </bean>     
</beans> 
```

我的服务层：

```
package com.services.user;

@Service
@Transactional
public class UserService implements IUserService{

    @Autowired
    private UserDAO         userDAO;

    @Override
    public User findUser(String email) {
        return this.getUserDAO().findById(email);
    }

    public UserDAO getUserDAO() {
        return this.userDAO;
    }

    public void setUserDAO(UserDAO userDAO) {
        this.userDAO = userDAO;
    }
} 
```

最后，DAO 实现：

```
package com.dao.user;

@Repository("userDAO")
@Transactional
public class UserDAOImpl implements UserDAO {

    private SessionFactory  sessionFactory;

    @Autowired
    @Resource(name = "sessionFactory")
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    @Override
    public User findById(String id) {
        try {
            User instance = (User) this.sessionFactory.getCurrentSession().get("com.dao.user.User",id);
            return instance;
        } catch (RuntimeException re) {
            throw re;
        }
    }
} 
```

这里是 stackTrace ：

```
ERROR - UserDAOImpl.findById(111) | get failed
org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:978)
    at com.dao.user.UserDAOImpl.findById(UserDAOImpl.java:107)
    at com.dao.user.UserDAOImpl$$FastClassByCGLIB$$bec6ba.invoke(<generated>)
    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:698)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:631)
    at com.dao.user.UserDAOImpl$$EnhancerByCGLIB$$9b54939b.findById(<generated>)
    at com.services.user.UserService.findUser(UserService.java:68)
    at com.services.user.UserService$$FastClassByCGLIB$$41c85d92.invoke(<generated>)
    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:698)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:631)
    at com.services.user.UserService$$EnhancerByCGLIB$$1bf5e773.findUser(<generated>)
    at com.beans.login.Login.doLogin(Login.java:100)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:166)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
```

谢谢您的帮助 ！

**编辑：**

好的，所以我清理了 conf，现在有了：

对于 DAO：

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver">
        </property>
        <property name="url"
            value="jdbc:mysql://xxxxx:3306/db?zeroDateTimeBehavior=convertToNull&amp;autoReconnect=true">
        </property>
        <property name="username" value="xxxx"></property>
        <property name="password" value="xxxx"></property>
    </bean>
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource">
            <ref bean="dataSource" />
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">
                    org.hibernate.dialect.MySQLDialect
                </prop>
            </props>
        </property>
        <property name="mappingResources">
            <list>
                <value>
                    com/dao/user/User.hbm.xml
                </value>                        
            </list>
        </property>
    </bean>

    <context:component-scan base-package="com.dao" />
    <context:annotation-config />
    <tx:annotation-driven transaction-manager="hibernateTransactionManager" proxy-target-class="true"/>

    <bean id="hibernateTransactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory">
            <ref bean="sessionFactory" />
        </property>
    </bean> 
```

对于业务层：

```
<context:component-scan base-package="com.services" />
<context:annotation-config /> 
```

并从 DAO 中删除 @Transactional 注释。

我仍然得到：

```
ERROR - UserDAOImpl.findById(105) | get failed
org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:978)
    at com.dao.user.UserDAOImpl.findById(UserDAOImpl.java:101)
    at com.services.user.UserService.findUser(UserService.java:68)
    at com.services.user.UserService$$FastClassByCGLIB$$41c85d92.invoke(<generated>)
    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:698)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:631)
    at com.services.user.UserService$$EnhancerByCGLIB$$67156d46.findUser(<generated>)
    at com.beans.login.Login.doLogin(Login.java:100)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:166)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:137)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

SEVERE: null
org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:978)
    at com.dao.user.UserDAOImpl.findById(UserDAOImpl.java:101)
    at com.services.user.UserService.findUser(UserService.java:68)
    at com.services.user.UserService$$FastClassByCGLIB$$41c85d92.invoke(<generated>)
    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:698)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:631)
    at com.services.user.UserService$$EnhancerByCGLIB$$67156d46.findUser(<generated>)
    at com.beans.login.Login.doLogin(Login.java:100)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:166)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:137)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:18:57.933

行 ！我在进步！我怀疑某事并得到证实。好的，在我给你们的例子中，我只展示了一个 DAO 配置，我有另一个 DAO 配置（我有 2 个数据库）。

所以看来要工作我必须添加

```
<tx:annotation-driven transaction-manager="hibernateTransactionManager"/> 
```

到我的服务配置。所以 ：

```
<context:component-scan base-package="com.services" />
<context:annotation-config />  
<tx:annotation-driven transaction-manager="hibernateTransactionManager"/> 
```

它有效（但仅适用于一个数据库）。在数据库 1 conf 我有：

```
 <tx:annotation-driven transaction-manager="hibernateTransactionManager"/> 
```

在数据库 2 conf 中，我有：

```
 <tx:annotation-driven transaction-manager="hibernateTransactionManagerA"/> 
```

我尝试将两者都添加到服务 conf 中：

```
 <context:component-scan base-package="com.services" />
    <context:annotation-config />  
    <tx:annotation-driven transaction-manager="hibernateTransactionManager"/>
    <tx:annotation-driven transaction-manager="hibernateTransactionManagerA"/> 
```

但是只有第一个数据库在工作，当我尝试访问第二个的 DAO 时，我得到了 Session 错误（这是有道理的，我相信只有第一个事务管理器在使用）。

**编辑：**

好的，在阅读了关于多数据源的文档后，我只需要添加：

```
<qualifier value="managerTransactionA"/> 
<qualifier value="managerTransactionB"/> 
```

到我的两个hibernate manager事务bean。然后只需要添加正确的事务：

```
@Transactional("managerTransactionA")
or
@Transactional("managerTransactionB") 
```

它成功了:) :)

谢谢你们的帮助！！！

# java - 你能帮助我吗

> ID：14524342
> 
> 赞同：-14
> 
> 时间：2013-01-25T14:56:27.250
> 
> 标签：java

我在java中学习了泛型。我可以理解泛型类型、原始类型、有界类型参数和类型推断。我在泛型中学习了通配符。通配符将`?`未知类型表示为类型参数。虽然我将一个类定义为`Company`，但编译器告诉它是一个未定义的类型参数。但是我传入`List`了一个方法，这里不会出现错误。你能告诉我必须在哪里使用通配符及其用途吗？

```
Class Company<?> // error is occurred at this line
{
    void sum(List<? extends Number> ls) //does not occur here
    { } 
} 
```

你能解释一下这些之间的区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T15:00:47.310

```
Class Company<?> 
```

你不能`?`在泛型类声明中使用，你必须像这样声明泛型类：

```
Class Company<T> 
```

从[**文档**](http://docs.oracle.com/javase/tutorial/java/generics/types.html)：

泛型类使用以下格式定义：

```
class name<T1, T2, ..., Tn> { /* ... */ } 
```

> 由尖括号 (<>) 分隔的类型参数部分跟在类名之后。它指定类型参数（也称为类型变量）T1、T2、...和Tn。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:03:14.403

您必须为该类型指定一个名称，以便稍后您可以引用它。也许你想用这种方式：

```
class Company<T extends Number> {

    void sum(List<T> ls) {
    }
} 
```

# ios - self.window cornerRadius - 没有状态栏

> ID：14524347
> 
> 赞同：1
> 
> 时间：2013-01-25T14:56:37.623
> 
> 标签：ios, objective-c, cornerradius

我想在我的整个应用程序上使用圆角，我使用了：

```
[self.window.layer setCornerRadius:5.0];
[self.window.layer setMasksToBounds:YES];
self.window.layer.opaque = NO; 
```

但是现在我的 StatusBar 有roundCorners，我如何使用没有状态栏的 self.window？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:13:18.983

```
[self.window.layer setCornerRadius:5.0];
[self.window.layer setMasksToBounds:YES];
self.window.layer.opaque = NO; 
```

将围绕窗口的角落而不是它的子视图。

请更改 to 的值`5`以`45`查看清晰的效果，如下所示

```
[self.window.layer setCornerRadius:45.0];
[self.window.layer setMasksToBounds:YES];
self.window.layer.opaque = NO; 
```

# three.js - 如何在 THREE.JS 中创建可调整大小的对象

> ID：14524348
> 
> 赞同：2
> 
> 时间：2013-01-25T14:56:38.680
> 
> 标签：three.js, webgl

假设我有一个简单的立方体和一些指定其宽度、高度和深度的变量。

当 w/h/d 发生变化时，如何更新我的三个网格？（我有其他的东西，比如 changelisteners 等）。我是否直接更新顶点？还是重绘所有内容更容易？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T17:15:07.883

我认为最简单的方法是创建具有 1 个单位尺寸 (1x1x1) 的立方体。然后通过缩放来设置尺寸：

```
mesh.scale.x = width;
mesh.scale.y = height;
mesh.scale.z = depth; 
```

实际上不确定网格是否支持缩放，如果不支持，您可以将其包装在 Object3D 中

```
var obj = new THREE.Object3D();
    obj.add(mesh);
obj.scale.x = width;
obj.scale.y = height;
obj.scale.z = depth; 
```

没有什么能阻止您直接修改顶点。我认为您需要指定`geometry.dynamic=true;`然后`geometry.verticesNeedUpdate=true;`在这种情况下。

# arrays - Delphi - 检查元素是否在 TArray 中存在两次

> ID：14524350
> 
> 赞同：2
> 
> 时间：2013-01-25T14:56:46.147
> 
> 标签：arrays, delphi

我有这个代码

```
var
arr: TArray<string>;
e1, e2, e3, e4: string;
begin

e1 := 'val1';
e2 := 'val2';
e3 := 'val3';
e4 := 'val4';

arr := TArray<string>.Create(e1, e2, e3, e4); 
```

我现在需要检查上述数组中是否存在 e1 到 e4**两次**最好的方法是什么？我也应该跳过检查任何元素是否为空值。

还请告知我是否应该手动释放这个数组

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T16:23:59.827

为了玩算法的乐趣；如果原始数组大到足以使天真的`O(n^2)`算法不切实际，并且由于 OP 使用的是具有泛型的 Delphi 版本，我建议使用 an`TDictionary<string, integer>`来跟踪所有字符串*而不进行*排序，并识别重复项。

出于多种原因，这将是有效的：

*   TDictionary 提供恒定时间插入，它几乎是`O(n)`. 我们从一开始就知道数组的大小，因此我们可以`TDictionary`在不增加它的情况下使用它。这使得整个算法`O(n)`。
*   由于字符串已经在数组中，并且 Delphi 字符串是引用计数的，所以将字符串放入数组中并不会实际复制字符串！
*   使用这种算法，数组只遍历一次。

编码：

```
type
  TZeroWidthRecord = record
  end;

function FindFirstDuplicate(const ArrayOfString: array of string): Integer;
var Dict: TDictionary<string, TZeroWidthRecord>;
    i: Integer;
    ZW: TZeroWidthRecord;
begin
  Dict := TDictionary<string, TZeroWidthRecord>.Create(Length(ArrayOfString));
  try
    for i:=0 to High(ArrayOfString) do
      try
        Dict.Add(ArrayOfString[i], ZW);
      except on E:Exception do
        Exit(i);
      end;
  finally Dict.Free;
  end;
  // No duplicates found:
  Result := -1;
end; 
```

* * *

为了回答大卫的评论，我制作了一个简短的测试程序，将这种`TDictionary`基于算法的算法与算法进行了比较`sort-and-search`。我创建了随机的字符串数组，然后尝试找到第一个重复项。我的数组不包含重复项，如果有重复项，则 TDictionary 的运行时间将与平均首次命中重复项成正比。例如，如果平均而言，TDictionary 会在数组中间找到一个重复项，那么 TDict 算法的平均运行时间将是一半。基于排序的算法需要对整个数组进行排序，排序是占用时间最多的。

与基于排序和字典的算法一样，需要使用*真实*数据进行测试。例如，如果我在 OP 的问题中使用短字符串进行测试，TDict 和 sort 之间就不会有竞争：即使对于微不足道的长度数组，Dict 也会更快。但是在平均字符串长度增加的那一刻，基于排序的算法开始变得更好；但是话又说回来，这取决于字符串：例如，如果大多数字符串共享一个长前缀，那么排序算法中的“比较”阶段将花费更长的时间，从而使 TDictionary 再次看起来更好！

## 测试表1，无重复

```
*==========*===========================*
|          | Number of strings         |
| Avg str  | in the Array for          |
| length   | TDictionary to be faster  |
*======================================*
| 7        | 33                        |
| 10       | 73                        |
| 13       | 73                        |
| 16       | 163                       |
| 19       | 163                       |
| 22       | 366                       |
| 25       | 366                       |
| 28       | 549                       |
| 37       | 2776                      |
| 40       | 2776                      |
| 43       | 2776                      |
| 46       | 4164                      |
| 49       | 9369                      |
| 52       | 9369                      |
| 55       | 9369                      |
| 58       | 21079                     |
*==========*===========================* 
```

## 测试表 2，在数组的 1/2 处重复

如果第一个副本恰好位于数组的中间，这将是结果。请注意平均字符串长度 58 的巨大差异：

```
*==========*===========================*
|          | Number of strings         |
| Avg str  | in the Array for          |
| length   | TDictionary to be faster  |
*======================================*
| 30       | 109                       |
| 33       | 163                       |
| 36       | 163                       |
| 58       | 366                       |
*==========*===========================* 
```

## 测试表 3，按 1/4 重复

如果在数组的 1/4 左右找到第一个重复项，就会发生这种情况：

```
*==========*===========================*
|          | Number of strings         |
| Avg str  | in the Array for          |
| length   | TDictionary to be faster  |
*======================================*
| 29       | 73                        |
| 32       | 73                        |
| 38       | 73                        |
| 57       | 109                       |
*==========*===========================* 
```

这是测试应用程序：http: [//pastebin.com/vDznwKtZ](http://pastebin.com/vDznwKtZ)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T15:06:14.757

不需要释放动态数组。它们是托管类型，编译器确保当不再引用该对象时，该对象被销毁。

至于检测重复，你可以这样做：

```
function HasDuplicates(const arr: array of string): Boolean;
var
  i, j: Integer;
begin
  for i := 0 to high(arr) do
    if arr[i]<>'' then
      for j := i+1 to high(arr) do
        if arr[i]=arr[j] then
          exit(True);
  Result := False;
end; 
```

我假设当您说“null”时，在字符串的上下文中您的意思是该字符串为空。

这是一个复杂度为 O(n^2) 的算法。如果数组很大，那是个坏消息。

如果您的数组是有序的，您可以使用 O(n) 算法进行测试。

```
function OrderedHasDuplicates(const arr: array of string): Boolean;
var
  i: Integer;
begin
  for i := 0 to high(arr)-1 do
    if arr[i]<>'' then
      if arr[i]=arr[i+1] then
        exit(True);
  Result := False;
end; 
```

自然地，这些函数可以很容易地修改以识别哪个索引是重复的：

```
function IndexOfDuplicate(const arr: array of string): Integer;
var
  i: Integer;
begin
  for Result := 0 to high(arr) do
    if arr[Result]<>'' then
      for i := Result+1 to high(arr) do
        if arr[Result]=arr[i] then
          exit;
  Result := -1;
end; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T15:11:04.683

要检查一个字符串是否存在两次，请使用 TStringList 的功能。创建一个 TStringList 对象，添加数组的所有元素（字符串），将 Sorted 属性设置为 True，然后从头到尾循环检查当前元素是否等于最后一个元素，如果相等则您找到了复制。

使用 TStringList 的主要优点是提供的排序功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T15:05:15.193

TArray 类型是泛型风格的经典动态数组。此类型由 Delphi 管理，因此您无需手动释放所涉及的内存。如果您存储对象或其他动态创建的变量，您仍然有责任释放该内存，但同样，不是数组本身。

特别是在 TArray 上，它们都是托管类型，您根本不关心内存。

要检查无序数组中的重复项，您必须遍历它并对每个元素进行循环，与数组的其余部分进行比较，如下所示：

```
var
  arr: TArray<string>;
  e1, e2, e3, e4: string;
  I, J: Integer;
begin
  e1 := 'val1';
  e2 := 'val2';
  e3 := 'val3';
  e4 := 'val4';

  arr := TArray<string>.Create(e1, e2, e3, e4);
  //check for duplicates
  for I := low(arr) to High(arr) do
    for J := I + 1 to High(arr) do
      if arr[I] = arr[J] then
        ShowMessage('A duplicate was found'); 
```

最后，字符串不能为空，因此您不必检查空元素。

准确地说，任何空字符串 ( `''`) 实际上都是一个 nil 指针，但这是故事的另一面。

# java - 如何在java中正确测试多线程/并发方法？

> ID：14524354
> 
> 赞同：1
> 
> 时间：2013-01-25T14:57:00.547
> 
> 标签：java, multithreading, concurrency

有没有类似的工具`JUnit`？

关于为多线程/并发方法编写测试的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:12:48.517

您可以设计基本的多线程测试，通常使用诸如 CountDownLatch 之类的东西来让不同的线程在特定时间做不同的事情。然而，多线程的本质是，当它被破坏时，有无数种微妙的方式可能会搞砸，而测试通常不会遇到*这些*情况。

因此，在实践中，虽然您*可以*编写多线程单元测试，但它们没有失败的事实通常证明不了任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T23:08:33.483

我有类似的要求，并且正在探索很多。遇到了来自 Google @ [https://code.google.com/p/thread-weaver/wiki/UsersGuide](https://code.google.com/p/thread-weaver/wiki/UsersGuide)的 Thread-Weaver 框架。看起来是一个相当不错的框架。虽然，我没有看到很多这个框架的博客/用户。我的下一个堆栈溢出问题将是相同的:-)

# c# - ASP.net - 从共享相同接口的不同 URL/主机连接到多个 Web 服务？

> ID：14524359
> 
> 赞同：1
> 
> 时间：2013-01-25T14:57:14.053
> 
> 标签：c#, asp.net, web-services

我希望我的 ASP.NET 应用程序能够与任意数量的不同主机通信，所有主机都提供具有完全相同接口的 Web 服务，但在不同的域/ASMX URL 上。我在[这里](https://stackoverflow.com/questions/9482773/web-service-without-adding-a-reference)找到了一个解决方案，它允许我为一个 Web 服务生成一个类，但是 URL 地址/前缀/命名空间在方法属性中是硬编码的，我不知道如何更改它们（相关问题[here](https://stackoverflow.com/questions/14523135/c-curly-bracket-alternative-a-class-for-multiple-soap-addresses)）。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:42:52.487

一种可能的解决方案是使用 DynWsib- [HERE](http://www.thinktecture.com/resourcearchive/tools-and-software/dynwslib)。请注意，这不适用于 WCF。

然后您可以在运行时调用。为每个 url 创建和缓存二进制文件。下面的函数是基本思想。根据需要进行更改。

```
public object InvokeWebserviceCall(string wsdUrl, string actionUrl, string functionName,
        string domain, string username, string password, params object[] parameters)
    {
        ///todo: validate input

        var proxy = new DynamicWebServiceProxy();

        //credentials if needed
        if (!string.IsNullOrEmpty(domain))
        {
            proxy.Credentials = new NetworkCredential(username, password, domain);
        }
        else if (!string.IsNullOrEmpty(username))
        {
            proxy.Credentials = new NetworkCredential(username, password);
        }

        proxy.EnableMessageAccess = true;
        proxy.Wsdl = wsdUrl;

        //get type name
        var type = proxy.ProxyAssembly.GetTypes().SingleOrDefault(t => t.BaseType == typeof(SoapHttpClientProtocolExtended));

        if (type != null)
        {
            proxy.TypeName = type.Name;
        }

        proxy.MethodName = functionName;
        proxy.Url = new Uri(actionUrl);

        if (parameters != null)
        {
            parameters.ToList().ForEach(proxy.AddParameter);
        }

        object result = proxy.InvokeCall();

        return result;
    } 
```

# java - 将动态 ArrayList 转换为 Json

> ID：14524360
> 
> 赞同：2
> 
> 时间：2013-01-25T14:57:15.623
> 
> 标签：java, json, playframework-2.0

我想将数组列表转换为特定格式的 json 字符串。我在数组列表中获取所有用户电子邮件，并希望将其转换为以下 JSON 格式。

```
 [
  {"email":"abc@gmail.com"},
  {"email":"xyz@gmail.com"}
 ] 
```

我的控制器动作是

```
 public static Result apiCustomers(){
    List<Customer> customerList = Model.coll(Customer.class).find().toArray();
    List<String> emails = new ArrayList<String>();

    for(Customer c : customerList){
        emails.add(c.email);
    }

    //ObjectNode result = Json.newObject();
    //result.put("emails", Json.toJson(emails));        
    return ok();
} 
```

如何将电子邮件列表转换为上述 json 格式？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T15:30:15.547

为什么要使用另一个 JSON ser/des lib？Play 有一个内置的（杰克逊的包装器 - 非常快）。

从您的代码开始：

```
public static Result apiCustomers(){
    List<Customer> customerList = Model.coll(Customer.class).find().toArray();
    List<String> emails = new ArrayList<String>();

    for(Customer c : customerList){
        emails.add(c.email);
    }

    return ok(Json.toJson(emails));
} 
```

这使用了一些默认值，但应该足够了。

或手动：

```
public static Result apiCustomers(){
        ArrayNode arrayNode = new ArrayNode(JsonNodeFactory.instance);

        List<Customer> customerList = Model.coll(Customer.class).find().toArray();

        for(Customer c : customerList){
            ObjectNode mail = Json.newObject();
            mail.put("email", c.email);
            arrayNode.add(mail);
        }

        return ok(arrayNode);
} 
```

不需要Gson。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:05:48.890

你可以使用这个库： [http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

关于它的非常简单的教程： [http ://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/](http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/)

或者您可以为您的类或 util Json 编写自定义 toJson 方法（没什么大不了的）

在你的情况下，它应该是这样的（我没有测试过）：

```
public String toJson(List<String> emails) {
    StringBuilder result = new StringBuilder();
    result.append("[");
    result.append("\n");

    for (String s : emails) {
        result.append("{");
        result.append("\"email\":");
        result.append("\"");
        result.append(s);
        result.append("\"");
        result.append("}");
        result.append(",");
        result.append("\n");
    }
    result.append("]");
    return result.toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-30T10:06:22.893

借助 Java 8（我怀疑是更新的 Jackson 版本）：

```
private static final ObjectMapper mapper = new ObjectMapper();

...

List<Customer> customerList = Model.coll(Customer.class).find().toArray();
ArrayNode emails = mapper.createArrayNode();
customerList.forEach(c -> emails.add(c.email)); 
```

# php - 定义动态块名称

> ID：14524361
> 
> 赞同：2
> 
> 时间：2013-01-25T14:57:17.037
> 
> 标签：php, smarty, block, smarty3

我正在使用 Smarty 3 模板继承。我有以下问题：

这是父模板代码：

```
{foreach from=$items_collection item=single_item name=foo}
  {block name="bar_{$smarty.foreach.foo.index}"}
    some html goes here that I need to make editable if required
  {/block}
{/foreach} 
```

在此之后，当我通过以下方式扩展模板时：

```
{extends file='path/to/template/file.tpl'}

{block name="bar_0"}random stuff{/block}
{block name="bar_1"}random stuff{block}
... 
```

或任何其他动态生成的块名称，它不会更改模板值......我在孩子身上得到的只是父级，但没有更改的块内容。

是否有特殊的语法或任何其他技术来实现动态块名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:53:41.597

我认为不可能。块不作为变量保存，然后在显示时填充到模板中，而是编译一次，然后对于缓存的模板是静态的。

> 模板继承是一个编译时过程，它创建一个单独的编译模板文件。与基于包含在 {include} 标签中的子模板的相应解决方案相比，它在渲染时确实具有更好的性能。

很难就如何做你想做的事给出建议，因为你很模糊，但你可以用[块函数做你想做的事](http://www.smarty.net/docsv2/en/plugins.block.functions.tpl)

# hibernate - @ManyToMany 错误未保存瞬态实例或重复条目

> ID：14524366
> 
> 赞同：0
> 
> 时间：2013-01-25T14:57:25.550
> 
> 标签：hibernate, many-to-many

我在 @ManyToMany 关系中有 2 个实体：网络和站点代码。

网络：

```
@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name = "network_id")
public int getNetworkId() {
    return this.networkId;
}

public void setNetworkId(int networkId) {
    this.networkId = networkId;
}

@ManyToMany(cascade = CascadeType.MERGE, fetch = FetchType.EAGER)
@JoinTable(name = "site_code_map", 
joinColumns = { @JoinColumn(name = "network_id") },  
inverseJoinColumns = { @JoinColumn(name = "site_code_id") })
public Set<SiteCodes> getSiteCodes() {
    return siteCodes;
}

public void setSiteCodes(Set<SiteCodes> siteCodes) {
    this.siteCodes = siteCodes;
} 
```

站点代码：

```
@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name = "site_code_id")
public Integer getSiteCodeId() {
    return this.siteCodeId;
}

public void setSiteCodeId(Integer siteCodeId) {
    this.siteCodeId = siteCodeId;
}

@Column(name = "site_code", nullable = false)
@NotNull
@NaturalId
public String getSiteCode() {
    return siteCode;
}

@ManyToMany(mappedBy="siteCodes",cascade = CascadeType.MERGE)
public Set<Networks> getNetworks() {
    return networks;
}

public void setNetworks(Set<Networks> networks) {
    this.networks = networks;
} 
```

我的主要课程：

```
session.beginTransaction();

Networks nw1 = new Networks(345);
Networks nw2 = new Networks(789);

SiteCodes sc1 = new SiteCodes("0123");
SiteCodes sc2 = new SiteCodes("0001");
SiteCodes sc3 = new SiteCodes("0ABC");

// The real code would do this inside a loop, ie create a new network, figure out 
// the site codes and assign them.
session.beginTransaction();
Networks nw1 = new Networks(345);
nw1.getSiteCodes().add(sc1);
nw1.getSiteCodes().add(sc2);
session.merge(nw1);
session.getTransaction().commit();

session.beginTransaction();
Networks nw2 = new Networks(789);
nw2.getSiteCodes().add(sc3);
nw2.getSiteCodes().add(sc2);
session.merge(nw2);
session.getTransaction().commit(); 
```

结果是重复输入错误：

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '0001' for key 'site_code' 
```

我玩过 CascadeType 和我能想到的任何其他东西。我已经搜索了有关此主题的现有问题，但尚未找到解决此问题的方法。有时，在我尝试过的变体中，我收到了“对象引用未保存的瞬态实例”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:35:56.020

很基础！（希望这将有助于其他新手学习一些基本知识）

问题是第二次使用站点代码时，它只是一个包含重复信息的 SiteCode 对象。Hibernate 尝试将其作为新记录插入。

为了正确进行更新，SiteCode 需要是一个托管对象，即它需要从数据库中加载。

用这个替换第二笔交易，问题就消失了：

```
session.beginTransaction();
SiteCodes sc4 = (SiteCodes) session.bySimpleNaturalId(SiteCodes.class).load(sc2.getSiteCode());
Networks nw2 = new Networks(789);
nw2.getSiteCodes().add(sc3);
nw2.getSiteCodes().add(sc4); // Same as sc2
session.merge(nw2);
session.getTransaction().commit(); 
```

感谢我的同事指出了这一点。

# matlab - 使用小波进行图像压缩 - MATLAB

> ID：14524368
> 
> 赞同：1
> 
> 时间：2013-01-25T14:57:30.543
> 
> 标签：matlab, wavelet

我正在研究基于 MATLAB 中的小波的图像压缩......我已经构建了以下代码。一切正常，但压缩图像显示为纯黑白图像。如果我将分解级别设为 1，它将压缩图像显示为全黑，对于分解级别：2，它给出全白图像。对于分解级别 3，它给出 3/4 白色和 1/4 黑色。 。 请帮忙。我使用的代码是

```
clear all;

close all;

input_image1=imread('C:\Users\Prem\Documents\MATLAB\mandrill.jpg');

input_image=imnoise(input_image1,'speckle',.01);

figure;

imshow(input_image);

n=input('enter the decomposition level=');

[Lo_D,Hi_D,Lo_R,Hi_R] = wfilters('haar');

[c,s]=wavedec2(input_image,n,Lo_D,Hi_D);

disp(' the decomposition vector Output is');

disp(c);

[thr,nkeep] = wdcbm2(c,s,1.5,3*prod(s(1,:)));

 [compressed_image,TREED,comp_ratio,PERFL2] =wpdencmp(thr,'s',n,'haar','threshold',5,1);

 disp('compression ratio in percentage');

 disp(comp_ratio);

  re_ima1 = waverec2(c,s,'haar'); 

 re_ima=uint8(re_ima1);

  subplot(1,3,1);

 imshow(input_image);

 title('i/p image');

 subplot(1,3,2);

 imshow(compressed_image);

 title('compressed image');

 subplot(1,3,3);

 imshow(re_ima);

 title('reconstructed image'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-11T10:45:42.643

我认为缩放图像的问题。您可以按合适的数量划分结果图像或使用

```
imagesc(desire image);

subplot(1,3,2);

imshow(compressed_image/156);

title('compressed image');

subplot(1,3,3);

imagesc(re_ima);

title('reconstructed image'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T15:07:15.963

在这条线上

```
 [compressed_image,TREED,comp_ratio,PERFL2] =wpdencmp(thr,'s',n,'haar','threshold',5,1); 
```

您将阈值作为信号传递......这是不正确的。

# facebook - Facebook Open Graph 没有标题属性

> ID：14524371
> 
> 赞同：3
> 
> 时间：2013-01-25T14:57:35.540
> 
> 标签：facebook, facebook-opengraph, meta, caption

所以基本上，因为我在手机上，我不能使用 www.facebook.com/sharer.php。我必须在我的页面上使用 Open Graph 元标记并使用 m.facebook.com/sharer.php 共享该页面。我目前遇到的问题是无法通过开放图形元标记指定共享的标题。它继续使用 URL 的域。使用网络共享器，您可以指定标题并将其放在标题下方。

有谁知道我如何使用元标记在打开图表中指定共享的标题？似乎没有等同于网络共享者的标题查询字符串参数的元标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:07:12.930

`sharer.php`端点已经正式弃用了一段时间。您不应该开发依赖这些的新代码，因为它们可能随时停止工作。

您应该改用[提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)。它使您能够设置自定义标题。

# c++ - 在winapi，WTL中为复选框制作更薄的边框

> ID：14524372
> 
> 赞同：2
> 
> 时间：2013-01-25T14:57:44.530
> 
> 标签：c++, atl, wtl

我有以下复选框，在 Visual Studio 中，我将它的 flat 属性设置为 TRUE，我想让它的矩形边框更薄。我怎么能在 windows api、WTL、ATL 中做到这一点？C++。是否有某种消息可以发送到对话框以执行此操作？

![我有以下复选框](../Images/bd43b7c0cff10d9ec5395c1b5d085de2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:01:47.857

您可以在控件[样式](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775951%28v=vs.85%29.aspx)之间进行选择，例如平面与非平面，并且您可以使用所有者绘制的控件（按钮）来接管控件的视觉呈现。没有专门的消息来调整盒子的厚度。

# wpf - 如何使用没有绑定路径的转换器？

> ID：14524373
> 
> 赞同：17
> 
> 时间：2013-01-25T14:57:52.153
> 
> 标签：wpf, xaml, binding, combobox

我有一个 Combobox，其 ItemsSource 是**int**值的 ObservableCollection。我的组合框项目模板包含一个图像和一个文本块，其内容由 2 个转换器给出。

如何设置这 2 个绑定？以下代码无法编译：

```
<ComboBox.ItemTemplate>
     <DataTemplate>
          <StackPanel Orientation="Horizontal">
               <Image Source="{Binding, Converter={StaticResource IntToImageConverter}}" Stretch="None" />
               <TextBlock Text="{Binding, Converter={StaticResource IntToStringConverter}}" />
          </StackPanel>
     </DataTemplate>
</ComboBox.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-25T15:00:14.380

您需要删除以下`,`内容：

```
<ComboBox.ItemTemplate>
     <DataTemplate>
          <StackPanel Orientation="Horizontal">
               <Image Source="{Binding Converter={StaticResource IntToImageConverter}}" Stretch="None" />
               <TextBlock Text="{Binding Converter={StaticResource IntToStringConverter}}" />
          </StackPanel>
     </DataTemplate>
</ComboBox.ItemTemplate> 
```

# jquery - JQplot 问题 - 使用 IE 8 打印

> ID：14524376
> 
> 赞同：0
> 
> 时间：2013-01-25T14:58:01.620
> 
> 标签：jquery, internet-explorer, printing, jqplot

我在 IE 中打印带有 jqPlot 的页面时遇到问题。我一直在尝试解决这个问题，并且看到了几篇关于修复的帖子；但是，它们并没有解决我的问题。

我已经尝试过 CanvasHack 和对 excanvas.js 的编辑，以注释掉 overlayE1 逻辑（来自这篇文章 - [Print issue with JQplot on IE](https://stackoverflow.com/questions/3113250/ie8-printing-issues-with-jqplot)）。从所有的解决方案中，我没有看到任何工作，所以我必须有一个尚未公开的解决方案。

为了说明这个问题，jqPlot 在所有浏览器（IE、Chrome、Firefox）中都是正确的；但是，当我执行打印预览或打印（PDF 或打印到打印机）时，一些 div 发生了变化。见效

下面是我的 HTML。

```
<!DOCTYPE HTML>
<html>
<head>
    <!--[if lt IE 9]><script language="javascript" type="text/javascript" src="dist/excanvas.js"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="dist/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="dist/jquery.jqplot.min.js"></script>
    <script type="text/javascript" src="dist/plugins/jqplot.highlighter.min.js"></script>
    <script type="text/javascript" src="dist/plugins/jqplot.cursor.min.js"></script>
    <script type="text/javascript" src="dist/plugins/jqplot.canvasTextRenderer.min.js"></script>
    <script type="text/javascript" src="dist/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>
    <link rel="stylesheet" type="text/css" href="dist/jquery.jqplot.css" />

    <script language="javascript" type="text/javascript">
         (function($) {
         $.fn.CanvasHack = function() {
          var canvases = this.find('canvas').filter(function() {
           return $(this).css('position') == 'absolute';
          });

          canvases.wrap(function() {
           var canvas = $(this);
           var div = $('<div />').css({
            position: 'absolute',
            top: canvas.css('top'),
            left: canvas.css('left')
           });
           canvas.css({
            top: '0',
            left: '0'
           });
           return div;
          });

          return this;
         };
        })(jQuery);

 </script>
 </head>
 <body>
   <div id="displaysection" style="width:400px;height:400px;"></div>
    <script>
       $.jqplot.config.enablePlugins = true;
       $(document).ready(function () {
                        var sinPoints = []; 
                          for (var i=0; i<2*Math.PI; i+=0.1){ 
                             sinPoints.push([i, 2*Math.sin(i-.8)]); 
                        }                            

                        plot = $.jqplot("displaysection", [sinPoints], {
                          title: {
                            text: "Title",
                            textAlign: "center",
                            fontSize: 20
                          },
                          legend: {
                            show: false
                          },
                          axes: {
                            xaxis: {
                              label: "x-Axis",
                              min: 0//,
                              //labelRenderer: $.jqplot.CanvasAxisLabelRenderer
                            },
                            yaxis: {
                              label: "y-Axis"//,
                              //labelRenderer: $.jqplot.CanvasAxisLabelRenderer
                            }
                          },
                          highlighter: {
                            show: true,
                            sizeAdjust: 3
                          },
                          cursor: {
                            show: true,
                            tooltipLocation:"nw",
                            zoom:true
                          },
                          seriesDefaults:{
                            showMarker: false,
                            showLine:true,
                            showLabel: true,
                            shadow: false,
                            lineWidth:3
                          },
                          series:[
                            { 
                              label: "Sin Curve",
                              color: "purple"
                            }                   
                          ]
                        });
            });
    $('body').CanvasHack();
   </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:17:43.870

免责声明：在IE8浏览器模式下在IE9下测试。这种模式确实存在曲线向左偏移的问题。

当我调试您的代码时，我发现它`var canvases = this.find('canvas')...`总是返回一个不包含任何内容的 jQuery 对象，尽管要找到几个画布对象。

查看代码，`$('body').CanvasHack();`实际上并没有在`$(document).ready`块内执行。我发现移动该调用以使其在创建图表后直接执行似乎可以解决问题。

在上面的代码中，这是：

```
 });
});
$('body').CanvasHack(); 
```

需要是：

```
 });
    $('body').CanvasHack();
}); 
```

我还发现`excanvas.js`不需要修改 —— 这两种方式似乎都没有什么不同。

# wordpress - 想创建一个动态页面按字母列出内容

> ID：14524377
> 
> 赞同：0
> 
> 时间：2013-01-25T14:58:02.247
> 
> 标签：wordpress, themes

我想在 WP 主题中创建一个动态页面，这样当我传递来自“AZ”的一封信时，它将显示标题从该信开始的所有帖子。你能告诉我如何进行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:59:55.623

如果您正在使用主题并通过查询参数获取索引键，那么您可以创建一个新的自定义主题文件并添加以下代码以获取帖子列表。

```
$thePostIdArray = null;
    $indexkey = $_GET['indexkey']; 
    if ($indexkey!=null){
        $querystr = "
            SELECT wposts.ID 
            FROM $wpdb->posts wposts
            WHERE UPPER(wposts.post_title) like '".$indexkey."%' 
            AND wposts.post_status = 'publish' 
            AND wposts.post_type = 'post' 
            ORDER BY wposts.post_title ASC
         ";
        $thePostArray = $wpdb->get_results($querystr); 
        $i = 0;
        foreach ($thePostArray as $currentPost){
            $thePostIdArray[$i] = $currentPost->ID;
            $i++;
        } 
```

之后，只需通过 post 数组并显示它们即可。

# java - Scala、Spring、WebFlow、Hibernate 和 Maven 或 Java、Spring、WebFlow、Hibernate 和 Maven

> ID：14524379
> 
> 赞同：2
> 
> 时间：2013-01-25T14:58:23.157
> 
> 标签：java, spring, scala, maven, jboss

我用 Java、Spring、WebFlow、Hibernate 和 Maven 编写了许多系统，在 JBoss 服务器上运行它们。我正在考虑学习 Scala ..

是否有人在大公司运行的现实项目中使用 Scala、Spring、WebFlow、Hibernate 和 Maven？

我应该转向 Scala、Spring、WebFlow、Hibernate 和 Maven 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:01:28.707

好吧，这完全取决于项目。我们使用了大量的 Spring MVC (REST) + 纯 html/js UI。这真的很合理。我认为你最好看一些比较，比如[http://www.slideshare.net/mraible/comparing-jvm-web-frameworks-jfokus-2012](http://www.slideshare.net/mraible/comparing-jvm-web-frameworks-jfokus-2012) - 他们会给你更多关于使用什么的信息。

至于我，我永远不会使用 WebFlow 或 JSF ..

# r - 将数据读入数据框

> ID：14524381
> 
> 赞同：1
> 
> 时间：2013-01-25T14:58:29.593
> 
> 标签：r, types, dataframe

我正在尝试将 CSV 文件中的数据读取到数据框中。数据包含我不想作为因素的名称。我不能使用该`stringAsFactors=FALSE`参数，因为我想将其他列作为因素。

如何实现所需的行为？

注意：数据有数千列……我只需要修改一列的数据类型……其余的默认分配的类型都可以

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T14:59:58.647

使用`colClasses`参数指定每列的类型。例如：

```
x <- read.csv("myfile.csv", colClasses=c("numeric","factor","character")) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T15:00:07.670

您可以指定列类。从 `?read.table`

```
colClasses: character.  A vector of classes to be assumed for the
      columns.  Recycled as necessary, or if the character vector
      is named, unspecified values are taken to be 'NA'.

      Possible values are 'NA' (the default, when 'type.convert' is
      used), '"NULL"' (when the column is skipped), one of the
      atomic vector classes (logical, integer, numeric, complex,
      character, raw), or '"factor"', '"Date"' or '"POSIXct"'.
      Otherwise there needs to be an 'as' method (from package
      'methods') for conversion from '"character"' to the specified
      formal class.

      Note that 'colClasses' is specified per column (not per
      variable) and so includes the column of row names (if any). 
```

所以像：

```
types = c("numeric", "character", "factor")
read.table("file.txt", colClasses = types) 
```

应该做的伎俩。

**就个人而言**，我只会将列作为字符串*或*因子读取，然后更改您想要的列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T15:45:41.903

正如[先前答案](https://stackoverflow.com/a/14524412/697568)中的文档所述，如果您在读取数据之前知道列的名称，则可以使用命名字符向量仅指定该列。

```
types <- c(b="character") #Set the column named "b" to character
df <- read.table(header=TRUE,sep=",",colClasses=types,text="
a,b,c,d,e
1,asdf,morning,4,greeting
5,fiewhn,evening,12,greeting
9,ddddd,afternoon,292,farewell
33,eianzpod,evening,1111,farewell
191,dnmxzcv,afternoon,394,greeting
")
sapply(df,class)
#          a           b           c           d           e 
#  "integer" "character"    "factor"   "integer"    "factor" 
```

如果没有表头，也可以按位置来做：

```
types <- c(V2="character") #Set the second column to character
df <- read.table(header=FALSE,sep=",",colClasses=types,text="
1,asdf,morning,4,greeting
5,fiewhn,evening,12,greeting
9,ddddd,afternoon,292,farewell
33,eianzpod,evening,1111,farewell
191,dnmxzcv,afternoon,394,greeting
")
sapply(df,class)
#       V1          V2          V3          V4          V5 
#"integer" "character"    "factor"   "integer"    "factor" 
```

最后，如果您知道位置但有标题，则可以构建适当长度的向量。对于`colClasses`,`NA`表示默认值。

```
types <- rep.int(NA_character_,5) #make this length the number of columns
types[2] <- "character" #force the second column as character
df <- read.table(header=TRUE,sep=",",colClasses=types,text="
a,b,c,d,e
1,asdf,morning,4,greeting
5,fiewhn,evening,12,greeting
9,ddddd,afternoon,292,farewell
33,eianzpod,evening,1111,farewell
191,dnmxzcv,afternoon,394,greeting
")
sapply(df,class)
#       V1          V2          V3          V4          V5 
#"integer" "character"    "factor"   "integer"    "factor" 
```

# plone - 在 Plone 中使用用户名和密码登录

> ID：14524383
> 
> 赞同：1
> 
> 时间：2013-01-25T14:58:39.730
> 
> 标签：plone, zope

在给定的 BrowserView 中，我需要以会员身份登录。这个视图实际上是一个仅供会员使用的网络服务。我从请求 XML 中提取用户名和密码，我需要作为该成员进行身份验证。

到目前为止，我已经找到了方法：

```
self.portal.acl_users.authenticate(user, password, self.portal.REQUEST) 
```

但是这个方法只返回成员对象（如果用户和密码正确的话）。它不执行身份验证。我通过执行确认这一点：

```
from AccessControl import getSecurityManager
getSecurityManager().getUser() #Get the current authenticated user
>>>Anonymous User 
```

我想知道如何在此 BrowserView 中以该成员身份进行身份验证。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:16:54.447

在身份验证后，我会为这样的工作创建一个新的安全管理器：

```
from AccessControl.SecurityManagement import newSecurityManager
from AccessControl.SecurityManagement import getSecurityManager

uf = self.portal.acl_users
if not uf.authenticate(user, password, self.request):
    # Unauthorized, better raise a 401 here.

smanager = getSecurityManager()
user = uf.getUserById(user)
if not hasattr(user, 'aq_base'):
    user = user.__of__(uf) # acquisition wrap the user
newSecurityManager(self.request, user)

# Do anything the new user should be able to do

setSecurityManager(smanager) 
```

# sql - 如何根据日期获取字段的最大值并获取其他字段？

> ID：14524387
> 
> 赞同：1
> 
> 时间：2013-01-25T14:58:49.903
> 
> 标签：sql, oracle, oracle10g, oracle11g

我知道我的问题有点令人困惑，但如果我向你展示数据，我想要实现的目标会更有意义。

我只从一张表 T 中读取所有内容。

我正在从该表 T 中读取 6 个字段。

**StartKey
Name
Min
LName
MName
ID** 

上表是数据，下表是我想要实现的。我需要为每个 startkey 获取 max(minutes)
**FORGOT TO INCLUDE`20130221`**输出。

![在此处输入图像描述](../Images/f4883994d057a73c415e411f671e499f.png)

这是我到目前为止尝试过的

```
select 
       startkey,
       name,
       min,
       lname,
       mname,
       id
from T
where startkey >= '20130118'
group by startkey,name,lname,mname,id
order by startkey 
```

但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:08:08.590

对于每个开始键，您都想找到最大“最小”值。这可以通过嵌套的子查询来完成。然后，仅选择最小值等于最大值（最小值）的位置。此外，如果您遇到两条记录可以具有相同的 startkey 和 min 值的情况，那么您将需要解决该问题，否则您将同时选择它们。

```
select  startkey, name, min, lname, mname, id
from T T1
where min = 
 (select max(min) from T T2 where T1.startkey=T2.startkey)

order by startkey 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:10:16.490

```
Select *
  From T 
      Inner Join (Select StartKey, Max(Min) AS MaxMinutes
                    From T
                   Group By StartKey
                  ) DerrivedView
    On T.Start = DerrivedView.StartKey And
       T.Min = DerrivedView.MaxMinutes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:01:57.930

我不知道我是否正确理解了您的问题，但是从我得到的信息中，您正在尝试获取一组特定的数据。您可以通过仅获取所需的 StartKeys 来强制过滤器。这应该有效：

```
SELECT StartKey, Name, Min, Lname, Mname, ID 
FROM T 
WHERE StartKey IN ('20130118','20130119','20130120') 
```

如果这不起作用，你可以试试这个：

```
SELECT StartKey, Name, Min, Lname, Mname, ID
FROM T
WHERE Month(StartKey) >= 1 
```

假设 StartKey 是一个 Date 字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:04:35.523

```
select startkey, name, min, lname, mname, id
  from (select startkey, name, min, lname, mname, id,
               row_number() over (partition by startkey order by min desc) rn
          from t)
 where rn = 1; 
```

应该这样做。

例如：[http ://sqlfiddle.com/#!4/59f6a0/1](http://sqlfiddle.com/#!4/59f6a0/1)

请注意，如果您有 2 行以上的时间相同并且想要全部返回，请更改`row_number`为`rank`. 如果您只想要其中一个，那么`row_number`这就是您想要的（尽管您可以添加额外的订购来选择特定的订购。

# windows - winUSB 错误（可能是 .inf 问题）

> ID：14524388
> 
> 赞同：0
> 
> 时间：2013-01-25T14:58:56.453
> 
> 标签：windows, visual-studio-2010, visual-c++, winusb

我真的很感谢winUSB的一些帮助。我遵循了 msdn 网站中列出的所有步骤

[http://msdn.microsoft.com/en-us/library/windows/hardware/hh450799(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh450799(v=vs.85).aspx)

[http://msdn.microsoft.com/en-us/library/windows/hardware/ff540174(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540174(v=vs.85).aspx)

我尝试使用 Visual Studio 2010 在 Windows 7 上运行它。即使它编译没有错误，我也无法传递函数 SetupDiEnumDeviceInfo，并且它出错（我认为是错误 #259）。我不知道如何传递这个错误。

但是，我不确定该过程中的几个步骤：

1.  msdn 与“软件包的签名目录文件。此文件是在 x64 版本上安装 WinUSB 所必需的”谈什么？什么是签名目录包？我该如何设置？
2.  它还谈到了制作一些目录（例如，c:\UsbDevice）以将 .inf 文件放在那里！但是我的VS项目怎么知道我指向c:\UsbDevice，它怎么知道“.inf”文件的名字应该是什么？我应该怎么称呼.inf文件？以及如何指向项目给它？
3.  在 .inf 文件中有两个 GUID 编号。我可以通过设备管理器获取类 GUID 编号。但是如何设置设备接口 GUID？请帮忙。我得到的错误是否可能是因为我没有正确设置以下项目之一？

谢谢，
--鲁迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:38:51.443

大约 2 年前，我开发了一个需要使用 WinUSB 的应用程序，它在我的脑海中并不新鲜，但现在查看我的代码，我可以看到我确实使用了这个函数：SetupDiEnumDeviceInfo，但我记得这不是问题我。

您可能知道，WinUSB 是 Windows 的 API，用于与 USB 硬件进行通信。硬件必须已经有它的驱动程序，所以，你必须知道你的设备的 GUID

回答您的步骤：
1\. 签名目录是从 inf 生成的 .cat 文件，您可以使用 inf2cat.exe 生成它，它位于您机器的某个位置。这只是签署您的 winusb 驱动程序的一个步骤。要签署它，您需要为 WHQL（Windows 硬件质量实验室）[http://www.microsoft.com/whdc/whql/](http://www.microsoft.com/whdc/whql/)提交您的 .inf 和 .cat 文件，目前这并不重要，我我从来没有签署过我的 WinUSB 驱动程序，它在 x64 机器上工作，带有一个不雅的警告，说我的 WinUSB 驱动程序可能很危险（尽管它不是！）
2.您正在开发的应用程序不需要知道.inf文件在哪里，.inf文件是为了安装WinUSB驱动程序，驱动程序安装后应用程序将通过设备的GUID号与驱动程序通信正确安装。这是正确安装 WinUSB 驱动程序后连接到设备所需的部分代码。

```
LPGUID _lpGuid = (LPGUID) malloc (sizeof(GUID));
HRESULT result = CLSIDFromString (L"{A54E04AD-E06A-4A03-95BB-25AACC4E6CCA}", _lpGuid);

    ...

bResult = SetupDiEnumDeviceInterfaces(deviceInfo,
                                    NULL,
                                    _lpGuid,
                                    0,
                                    &interfaceData);    //If the function succeeds
                                    //the return value is nonzero.
    // [1]
deviceInfo = SetupDiGetClassDevs(_lpGuid,
                 NULL, NULL,
                 DIGCF_PRESENT | DIGCF_DEVICEINTERFACE);

if (deviceInfo == INVALID_HANDLE_VALUE)
{
    //lblDispStatus->Caption = "Erro 1 - deviceInfo";
    return false;
}

    // [2]
interfaceData.cbSize = sizeof(SP_DEVICE_INTERFACE_DATA);
bResult = SetupDiEnumDeviceInterfaces(deviceInfo,
                                    NULL,
                                    _lpGuid,
                                    0,
                                    &interfaceData);    //If the function succeeds
                                                        //the return value is nonzero. 
```

InterfaceData 作为引用传递，因此您将能够调用下一个函数，即 SetupDiGetDeviceInterfaceDetail

3.驱动是谁开发的？他必须知道您需要的 GUID。

我从 WinUSB 了解到的所有信息，我都在糟糕的 WinUSB 文档中找到，你需要大量的专利才能阅读他们所有的混乱信息。对于您的不幸，我的脑海中并不新鲜，知道吗，我必须深入研究这个主题才能为您提供更多帮助。

这个页面似乎很重要，看看这个：http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff540174%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540174%28v=vs.85%29.aspx)

# java - 从软键盘捕捉“DONE”按键

> ID：14524393
> 
> 赞同：0
> 
> 时间：2013-01-25T14:59:15.373
> 
> 标签：java, android

我正在寻找可以从软键盘捕获“完成”按钮的按键的代码。当按下完成按钮时，我需要将按钮状态更改为启用，然后用户可以继续下一个活动。

我在stackoverflow上找到了这段代码，但我无法在没有错误的情况下实现它。你能帮我吗？

```
editText = (EditText) findViewById(R.id.edit_text);

editText.setOnEditorActionListener(new OnEditorActionListener() {
   @Override
   public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
       if (actionId == EditorInfo.IME_ACTION_DONE) {
           // do your stuff here
       }
       return false;
}
}); 
```

这是整个 .java 文件

```
package com.example.start201;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.view.inputmethod.InputMethodManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class FirstActivity extends Activity {

   private EditText editText;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.layout_firstactivity);

       editText = (EditText) findViewById(R.id.editText2);

       editText.setOnEditorActionListener(new OnEditorActionListener() {
           @Override
           public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
               if (actionId == EditorInfo.IME_ACTION_DONE) {
                   // do your stuff here
               }
               return false;
           }
       });

}

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T23:32:00.227

我把它整理好了，这段代码运行顺利，它可以识别软键盘上的 DONE 按钮的按键。

布局文件：

```
 <EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:imeOptions="actionDone"
    android:inputType="numberDecimal" />

   <Button
    android:id="@+id/button1"
    android:layout_width="80dp"
    android:layout_height="30dp"
    android:text="NEXT"
    android:textSize="10sp" />

</RelativeLayout> 
```

.java 文件：

```
package com.example.drywallcalculator102v;

import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.inputmethod.EditorInfo;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.TextView.OnEditorActionListener;

public class FirstActivity extends Activity {

   private EditText editText;
   private Button btnNext;

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.layout_firstactivity);

       btnNext = (Button) findViewById(R.id.button1);
       btnNext.setEnabled(false);

       editText = (EditText) findViewById(R.id.editText2);

       editText.setOnEditorActionListener(new OnEditorActionListener() {

           @Override
           public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
               // TODO Auto-generated method stub
               if (actionId == EditorInfo.IME_ACTION_DONE) {
                   // do your stuff here
                   btnNext.setEnabled(true);
               }
               return false;
           }
       });

   }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T15:13:45.733

尝试添加此导入：

```
import android.widget.TextView.OnEditorActionListener; 
```

# android - ViewPager, Fragments, ListView with Images OutOfmemoryException

> ID：14524394
> 
> 赞同：0
> 
> 时间：2013-01-25T14:59:20.280
> 
> 标签：android, android-fragments, out-of-memory

我有一个 viewpager 并使用 FragmentPagerAdapter 来管理 3 个片段。在其中一个片段中，我有一个包含图像的 ListView。当我在每个片段之间滑动时，我最终会得到（从 frag1 到 frag3 大约 20 次滑动之后）OutOfmemoryException，我将在下面包含 logcat，似乎是 Bitmap/ImageViews 是导致触发内存不足异常的错误的原因。在我的 ListAdapter 中，我使用 convertview 来回收位图。

这是我的片段活动：

```
public class MainActivity extends SherlockFragmentActivity implements
        ActionBar.TabListener {

    SectionsPagerAdapter mSectionsPagerAdapter;
    ViewPager mViewPager;
    SimpleDateFormat sdf;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        actionBar.setSelectedNavigationItem(position);
                    }
                });

        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {

            actionBar.addTab(actionBar.newTab()
                    .setText(mSectionsPagerAdapter.getPageTitle(i))
                    .setTabListener(this));
        }

    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {

            Fragment fragment = null;

            if (position == 0) {

                fragment = new BrowseVidsFragment();
                Bundle args = new Bundle();
                args.putInt(BrowseVidsFragment.ARG_SECTION_NUMBER, position + 1);
                fragment.setArguments(args);
            }
            if (position == 1) {
                fragment = new RecordTodaysVidFragment();
                Bundle args = new Bundle();
                args.putInt(RecordTodaysVidFragment.ARG_SECTION_NUMBER,
                        position + 1);
                fragment.setArguments(args);
            }
            if (position == 2) {
                fragment = new CompleteVidFragment();

            }

            return fragment;
        }

        @Override
        public int getCount() {
            // Show 3 total pages.
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase();
            case 1:
                return getString(R.string.title_section2).toUpperCase();
            case 2:
                return getString(R.string.title_section3).toUpperCase();
            }
            db = new DBAdapter(MainActivity.this);
            return null;
        }
    }

    @Override
    public void onResume() {
        super.onResume();

        Log.d("", "MainActiity onResume()");

    }
} 
```

这是包含 ListView 的 Fragment 类，其中包含 ImageViews

```
public class BrowseVidsFragment extends Fragment {

    ListView yearsLv, monthsLv, lv;
    VidsObject vidsobj;
    Spinner spinner1;
    TheListAdapter adapter;
    ArrayList<String> thumbsToShow;
    ArrayList<String> vidsToShow;
    ArrayList<String> uniqueMonths;
    ArrayList<String> captions;
    String selectedYear = "";
    String selectedMonth = "";
    MyVideoFragment myFragment;
    int currentVid = 0;
    DBAdapter db;

    public static final String ARG_SECTION_NUMBER = "section_number";

    public BrowseVidsFragment() {

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View myFragmentView = inflater.inflate(R.layout.browsevidsfragment,
                container, false);
        try {

            FragmentTransaction fragmentTransaction = getActivity()
                    .getSupportFragmentManager().beginTransaction();

            myFragment = new MyVideoFragment();
            fragmentTransaction.add(R.id.myfragment, myFragment);
            fragmentTransaction.commit();
            lv = (ListView) myFragmentView.findViewById(R.id.list);

        } catch (Exception ex) {
            ex.getMessage().toString();
        }

        return myFragmentView;
    }

    @Override
    public void onResume() {
        super.onResume();

        setLists();

    }

    public void setLists() {

        selectedYear = getCurrentYear();
        selectedMonth = getCurrentMonth();

        db = new DBAdapter(getActivity());

        Toast.makeText(getActivity(), "on resume", 2000).show();
        File dir = new File(Environment.getExternalStorageDirectory()
                .getAbsolutePath() + "/");

        final String[] vids = dir.list(new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return name.endsWith(".mp4") && !name.contains("temp");

            }
        });

        ArrayList<String> vidslist = new ArrayList<String>();
        Arrays.sort(vids);

        for (String s : vids) {

            String noExtension = s.substring(0, s.length() - 4);
            vidslist.add(noExtension + ".jpg");
            Log.d("", "added: " + noExtension + ".jpg");
        }
        captions = new ArrayList<String>();
        db.open();

        Cursor c = db.getCaptions();
        if (c.moveToFirst()) {
            while (c.isAfterLast() == false) {
                captions.add(c.getString(0));
                c.moveToNext();
            }
        }
        c.close();
        db.close();
        Collections.reverse(captions);

        vidsobj = new VidsObject(new ArrayList(Arrays.asList(vids)));
        vidsToShow = vidsobj.getAllVids(false);
        thumbsToShow = vidsobj.getAllVids(true);
        Collections.reverse(vidsToShow);
        Collections.reverse(thumbsToShow);

        adapter = new TheListAdapter(getActivity(),
                vidsToShow.toArray(new String[vidsToShow.size()]),
                thumbsToShow.toArray(new String[thumbsToShow.size()]),
                captions.toArray(new String[captions.size()]));

        lv.setAdapter(adapter);

        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                myFragment.setVid(String.valueOf(vidsToShow.get(position)
                        + ".mp4"));
                currentVid = position;

            }

        });

    }

    public String getCurrentYear() {

        Calendar now = Calendar.getInstance();
        return String.valueOf(now.get(Calendar.YEAR));
    }

    public String getCurrentMonth() {

        Calendar now = Calendar.getInstance();
        return String.valueOf(now.get(Calendar.MONTH));
    }

    @Override
    public void onPause() {
        super.onPause();
        Toast.makeText(getActivity(), "onPause()", 200).show();

    }

} 
```

这是发生错误时的Logcat

> 01-26 14:49:52.409: E/AndroidRuntime(21281): java.lang.OutOfMemoryError 01-26 14:49:52.409: E/AndroidRuntime(21281): at android.graphics.BitmapFactory.nativeDecodeStream(Native Method) 01 -26 14:49:52.409: E/AndroidRuntime(21281): 在 android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:529) 01-26 14:49:52.409: E/AndroidRuntime(21281): 在 android.graphics .BitmapFactory.decodeFile(BitmapFactory.java:302) 01-26 14:49:52.409: E/AndroidRuntime(21281): 在 android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:328) 01-26 14:49:52.409 : E/AndroidRuntime(21281): 在 android.graphics.drawable.Drawable.createFromPath(Drawable.java:898) 01-26 14:49:52.409: E/AndroidRuntime(21281): 在 android.widget.ImageView.resolveUri( ImageView.java:643) 01-26 14:49:52.409: E/AndroidRuntime(21281): 在 android.widget。ImageView.setImageURI(ImageView.java:381) 01-26 14:49:52.409: E/AndroidRuntime(21281): 在 com.example.myapp.TheListAdapter.getView(TheListAdapter.java:80) 01-26 14:49: 52.409: E/AndroidRuntime(21281): 在 android.widget.AbsListView.obtainView(AbsListView.java:2159) 01-26 14:49:52.409: E/AndroidRuntime(21281): 在 android.widget.ListView.makeAndAddView(ListView .java:1831) 等等

为了尝试阻止 OutOfMemoryError 的发生，我将 System.gc() 添加到 Fragment 类的 onPause() 中，但错误仍然存​​在。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:55:03.107

检查本指南：http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

您可以使用 BitmapFactory.Options inSampleSize 加载较小的图像并避免 OutOfMemoryError。

# php - Highchart 带有 2 个图表 - 换档麻烦

> ID：14524395
> 
> 赞同：0
> 
> 时间：2013-01-25T14:59:26.660
> 
> 标签：php, highcharts, live

我使用带有 2 个实时图表的 LIVE Highchart。该图表应仅准时显示 5 个数据点。因此是移位参数

```
 var series1 = chart.series[0];
 shift1 = series1.data.length > 5;       
 series1.addPoint(point1, true, shift1); 
```

所以当第六点到达时，第一点就被扔掉了。但是当我禁用一个系列一段时间......并再次启用它后......没有转变。

[http://www.abload.de/img/errorh5kko.jpeg](http://www.abload.de/img/errorh5kko.jpeg)

我在 jsfiddle 上为你复制了它

[http://jsfiddle.net/yeDYr/1/](http://jsfiddle.net/yeDYr/1/)

因此，无论是启用还是禁用，都应该移动两个实时图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:37:10.097

在我看来，这就像 Highcharts 中的一个错误。作为一种解决方法，只有`.show()`系列，然后`hide()`是它（如果需要）。Highcharts 似乎能够做到这一点而没有任何明显的闪烁。

```
// the button action
$('#button1').click(function() {

    var point1 = Math.random() * 10;
    var point2 = Math.random() * 10;

    var series1 = chart.series[0];
    shift1 = series1.data.length > 5;

    isVisible = series1.visible;
    if (!isVisible) series1.show();
    series1.addPoint(point1, true, shift1);
    if (!isVisible) series1.hide();

    var series2 = chart.series[1];
    shift2 = series2.data.length > 5;

    isVisible = series2.visible;
    if (!isVisible) series2.show();
    series2.addPoint(point2, true, shift2);
    if (!isVisible) series2.hide();
}); 
```

更新[了小提琴](http://jsfiddle.net/yeDYr/2/)。

# sql - 有效地选择最新的答案

> ID：14524396
> 
> 赞同：5
> 
> 时间：2013-01-25T14:59:27.157
> 
> 标签：sql, sql-server, sql-server-2008, tsql

SQL 小提琴：[http ://sqlfiddle.com/#!3/9b459/6](http://sqlfiddle.com/#!3/9b459/6)

我有一张表格，其中包含对“你会参加这个活动吗？”这个问题的答案。每个用户可能会响应多次，所有答案都存储在表中。通常我们只对最新的答案感兴趣，我正在尝试为此构建一个有效的查询。我正在使用 SQL Server 2008 R2。

一个事件的表格内容：

![表格内容](../Images/1f36636dc779562d111b6dca34eef288.png)

```
Column types: int, int, datetime, bit
Primary key: (EventId, MemberId, Timestamp) 
```

请注意，成员 18 先回答“否”后回答“是”，成员 20 先回答“是”后回答“否”，成员 11 回答“否”后再次回答“否”。我想过滤掉这些成员的第一个答案。此外，应该过滤的答案可能不止一个 - 例如，用户可能会回答是、是、否、是、否、否、否。

我尝试了一些不同的想法，并在 SQL Server Management Studio 中通过输入所有查询、选择显示估计的执行计划并比较每个查询的总成本百分比来评估它们。这是评估性能的好方法吗？

到目前为止测试的不同查询：

```
-----------------------------------------------------------------
-- Subquery to select Answer (does not include Timestamp)
-- Cost: 63 %
-----------------------------------------------------------------
select distinct a.EventId, a.MemberId,
(
  select top 1 Answer
  from    Attendees
  where EventId   = a.EventId
  and   MemberId  = a.MemberId
  order by Timestamp desc
) as Answer
from    Attendees a
where a.EventId = 68

-----------------------------------------------------------------
-- Where with subquery to find max(Timestamp)
-- Cost: 13 %
-----------------------------------------------------------------
select a.EventId, a.MemberId, a.Timestamp, a.Answer
from     Attendees a
where  a.EventId = 68
and    a.Timestamp =
(
  select max(Timestamp)
  from     Attendees
  where  EventId  = a.EventId
  and    MemberId = a.MemberId
)
order by a.TimeStamp;

-----------------------------------------------------------------
-- Group by to find max(Timestamp)
-- Subquery to select Answer matching max(Timestamp)
-- Cost: 23 %
-----------------------------------------------------------------
select a.EventId, a.MemberId, max(a.Timestamp),
(
  select top 1 Answer
  from    Attendees
  where EventId   = a.EventId
  and   MemberId  = a.MemberId
  and   Timestamp = max(a.Timestamp)
) as Answer
from    Attendees a
where a.EventId = 68
group by a.EventId, a.MemberId
order by max(a.TimeStamp); 
```

最好避免对每个成员使用子查询。在我尝试使用的最后一个查询中，`group by`但仍然必须对 Answer 列使用子查询。我真的很想要这样的东西，但这当然不是有效的 SQL：

```
select a.EventId, a.MemberId, max(a.Timestamp), a.Answer <-- Picked from the line selected by max(a.Timestamp)
from  Attendees a
where a.EventId = 68
group by a.EventId, a.MemberId
order by max(a.TimeStamp); 
```

有效查询的任何其他想法？

* * *

编辑：

SQL Fiddle 给我留下了深刻的印象，我现在已经在那里输入了我的实际数据： [http ://sqlfiddle.com/#!3/9b459/6](http://sqlfiddle.com/#!3/9b459/6)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T15:01:50.467

SQL Server 2008 支持公用表表达式和窗口函数。

```
WITH recordsList
AS
(
    SELECT  EventID, MemberID, TimeStamp, Answer,
            ROW_NUMBER() OVER (PARTITION BY EventID, MemberID
                                ORDER BY Timestamp DESC) rn
    FROM    tableName
)
SELECT  EventID, MemberID, TimeStamp, Answer
FROM    recordsList
WHERE   rn = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:08:22.253

我也更喜欢 CTE 方法，但这是另一个使用子查询的选项，它应该可以工作：

```
SELECT T.EventId, T.MemberId, T.TimeStamp, T.Answer
FROM TableName T
 JOIN (
   SELECT EventId, MemberId, Max(Timestamp) MaxTimeStamp
   FROM TableName
   GROUP BY EventId, MemberId ) T2 ON T.EventId = T2.EventId 
    AND T.MemberId = T2.MemberId 
    AND T.TimeStamp = T2.MaxTimeStamp 
```

话虽如此，我想 CTE 会有更好的表现。

编辑——不再确定性能——这里是两者的[SQL Fiddle——](http://sqlfiddle.com/#!3/474a0/2)你可以看到每个的执行计划。

祝你好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T16:47:54.493

另一种选择

```
SELECT a.EventId, a.MemberId, a.Timestamp, a.Answer
FROM Attendees a
WHERE a.EventId = 68 AND EXISTS (
              SELECT 1
              FROM Attendees
              WHERE EventId = a.EventId             
              GROUP BY MemberId
              HAVING  MAX(Timestamp) = a.Timestamp                      
                      AND MemberId  = a.MemberId
              ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/9b459/8/0)上的演示[](http://sqlfiddle.com/#!3/9b459/8/0)

# javascript - xmlHttpRequest.send（Params）在tomcat 7中不起作用

> ID：14524404
> 
> 赞同：0
> 
> 时间：2013-01-25T14:59:43.287
> 
> 标签：javascript

我正在尝试通过编写在 JS 文件中的 xmlHttpRequest.send(params) 将一些参数发送到我的 servlet，在那里我尝试通过 req.getParameter("some_Parameter"); 获取参数 它在 servlet 上返回 null。虽然如果我通过将参数附加到 url 来发送参数，它工作正常。但是当 url 很大时，它会破坏代码。所以请有人帮助我。

提前致谢。

```
function doHttpPost(theFormName, completeActivity) 
{ 
    var xmlhttp = new ActiveXObject("MSXML2.XMLHTTP"); 
    var xmlMessage = buildPOST(theFormName, completeActivity); 
    var responseTxt; 
    try { 
        xmlhttp.Open(document.forms[theFormName].method, document.forms[theFormName].action+'?'+xmlMessage, false); 
        xmlhttp.onreadystatechange=function() { 
            if (xmlhttp.readyState==4) { 
                responseTxt = xmlhttp.responseText; 
            } 
        } 
        xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        enableDisableLinks(true);
        setPointer();  
        xmlhttp.Send(); 
        if(xmlhttp.Status != 200) { 
            alert("Post to server failed"); 
        } 
    } catch (e) { 
        responseTxt = "Exception while posting form data: Error No: " + e.number + ", Message: " + e.description; 
    } 

    resetPointer();  
    enableDisableLinks(false);
    var expectedTxt = "Form Data had been successfully posted to the database." 
    if(responseTxt.toString() == expectedTxt.toString()) { 
        // MNP: New requirement from Jeanne, should not refresh CM page, commenting it off for now
        //if(completeActivity) {
        //  if (typeof (ViewCaseDetailBtn) != 'undefined') {
        //      ViewCaseDetailBtn.click();
        //  }
        //}
        return true; 
    } else {
        alert (responseTxt); 
    }
    return false; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:03:18.017

**错误**

```
//IE only - shooting yourself in the
// Not all IE versions use ActiveX!
var xmlhttp = new ActiveXObject("MSXML2.XMLHTTP");    foot. 

//JavaScript case sensitive, open !== Open
xmlhttp.Open(document.fo...

//JavaScript case sensitive, send !== Send
xmlhttp.Send();

//JavaScript case sensitive, status !== Status
xmlhttp.Status 
```

如果您使用同步，它不会调用 onreadystatechange。

如果您使用 POST，则该值必须`send("valuestosendup")`不在查询字符串中。

这段代码说明了为什么您应该真正使用框架来进行 Ajax 调用而不是自己进行调用。

# java - Axis2/Tomcat 上的 Web 服务的外部库问题

> ID：14524405
> 
> 赞同：1
> 
> 时间：2013-01-25T14:59:44.170
> 
> 标签：java, mysql, web-services, axis2, tomcat7

我必须**在 Java 中实现一个 Web 服务，并将它部署在一个带有 Axis2 的 Tomcat 服务器上**。

它在我的 tomcat localhost 上就像一个魅力，现在我想将它部署在 Tomcat 服务器上。

我使用两个 Eclipse 插件：

*   **Axis2 代码生成器**：生成我的 WSDL
*   **Axis2 Server Archiver**：生成存档 aar 以部署我的 Web 服务

我在 Tomcat 服务器上安装了axis2，并添加了带有管理模块/上传Axis 服务存档文件的存档aar。

Axis2 正确安装了 Web 服务，我可以在我的 Tomcat 服务器上在线看到 WSDL。

**我重新启动了服务器，现在我尝试从我的网络服务中使用一个操作，但我在屏幕上出现了这个错误：**

*“尝试调用服务方法 identifierUtilisateur 时发生异常”。*

**我查看了我的 Tomcat 服务器的日志，我看到了这个异常：**

*“java.sql.SQLException：找不到适合 jdbc:mysql 的驱动程序”*

我知道库“mysql-connector-java-5.1.22-bin.jar”有问题，但是当我从 Eclipse 生成 aar 存档时，我将该库添加为 Web 服务的外部库源。

当我打开 arr 存档时，该库已正确放置在文件夹 /lib/mysql-connector-java-5.1.22-bin 中。

我尝试将库放在tomcat的文件夹lib（/usr/share/apache-tomcat-7.0.35/lib/）和axis的文件夹lib中（/usr/share/apache-tomcat-7.0.35/ webapps/axis2/WEB-INF/lib/) 但它仍然不起作用。

现在我被困在这个例外上，我无法在我的项目中取得进展。我不明白为什么它在我的本地主机服务器上运行良好，但在我的 Tomcat 服务器上运行良好。

也许有人可以帮我解决这个问题。非常感谢。

再见

# c++ - SDL Xcode。没有错误，但表面不会出现

> ID：14524407
> 
> 赞同：0
> 
> 时间：2013-01-25T14:59:55.477
> 
> 标签：c++, xcode, macos, cocoa, sdl

我正在尝试使用此处的教程使用 Xcode 设置 SDL。 [http://www.sdltutorials.com/sdl-tutorial-basics](http://www.sdltutorials.com/sdl-tutorial-basics)

我根据本教程正确设置了所有内容，并且构建后没有错误。唯一的问题是，当我运行程序时，SDL_Surface 永远不会出现。控制台什么也没说，也没有抛出任何错误。我一直在寻找说的解决方案，但我找不到与我的问题相关的任何内容。如果有人想检查它并告诉我我做错了什么，我将我的代码放在 Git 上。非常感谢！

[https://github.com/syobonaction/rubicon.git](https://github.com/syobonaction/rubicon.git)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:27:50.347

这是一个愚蠢但容易犯的错误！

在您的项目中，您已经包含了 main.m（包含在默认的可可应用程序项目中）并且没有包含 SDLMain.m，因此您的 SDL 代码永远不会执行，而您只是在运行一个空白的 Cocoa 应用程序！

要解决此问题，请单击 SDLMain.m，打开右侧的实用程序窗格，然后单击复选框以将 SDLMain.m 添加到您的目标。接下来，转到左侧导航窗格中的 Supporting Files，找到 main.m，然后将其从项目中删除。你根本不需要 main.m，因为它所做的只是启动一个你不想做的 Cocoa 应用程序！（SDLMain.m 也会启动一个 cocoa 应用程序，但不是在将 cocoa 应用程序链接到 SDL 系统之前。）

# authentication - 哪些身份验证宝石适用于使用 mongoid 的 API？

> ID：14524409
> 
> 赞同：0
> 
> 时间：2013-01-25T15:00:00.083
> 
> 标签：authentication

我熟悉设计和omniauth，它们适用于mongoid3，但我想知道是否还有其他我可能不考虑的东西？例如，authlogic 是否适用于mongoid3？我不确定在哪里可以找到此信息。有没有建议的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:38:33.477

好像 authlogic 使用 active_record，所以我想我要么坚持使用漂亮的生成器，要么只使用设计。

[http://cl.ly/image/1V0r0z0q2g2K](http://cl.ly/image/1V0r0z0q2g2K)

# c++ - 文件处理 C++，以 ios::app 模式打开，文件被擦除

> ID：14524415
> 
> 赞同：-1
> 
> 时间：2013-01-25T15:00:14.257
> 
> 标签：c++, file-io

我正在用 Turbo C++ 编写一个程序，该程序需要输入和输出到文件以及检索文件数据以供以后使用。 `fstream file("playlist.txt",ios::in|ios::app);`

这是我使用的，但每次我关闭程序并再次运行它时，所有以前的内容都会被擦除。我认为 ios::app “在每次输出操作之前将流的位置指示器设置为流的末尾”。我也试过 ios::nocreate ，但没​​有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:09:12.657

你也应该有`fstream::out`：

```
fstream file("playlist.txt", fstream::in | fstream::out); 
```

然后您可以将文件指针移动到文件末尾。`in`并且`app`不能一起使用：您需要为 R/W 打开，因为这`app`意味着您不会阅读。

# ruby-on-rails - 自动测试失败，宝石规格无效

> ID：14524419
> 
> 赞同：2
> 
> 时间：2013-01-25T15:00:32.960
> 
> 标签：ruby-on-rails, autotest

我正在尝试运行自动测试，有一次它对我有用，然后它停止了。我一直在关注 ruby​​ on rails 教程。

```
lexi87$ autotest
Invalid gemspec in [/Users/lexi87/.rvm/gems/ruby-1.9.3-p374/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
Invalid gemspec in [/Users/lexi87/.rvm/gems/ruby-1.9.3-p374/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
loading autotest/rspec2
/Users/lexi87/rails_projects/sample_app/.autotest:1:in `require': cannot load such file -- autotest/growl (LoadError)
    from /Users/lexi87/rails_projects/sample_app/.autotest:1:in `<top (required)>'
    from /Users/lexi87/.rvm/gems/ruby-1.9.3-p374/gems/ZenTest-4.8.3/lib/autotest.rb:315:in `load' 
```

因此，如果有人可以提供正确的步骤以使自动测试正常工作，那就太好了！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T11:23:39.483

看到这个问题：[无法安装 ZenTest 4.8.4](https://stackoverflow.com/questions/14488605/cant-install-zentest-4-8-4) 看起来 ruby​​ gems 中有一个错误。建议的解决方案是将 zentest 降级到 4.8.3

# c# - 文本框中的永久前缀

> ID：14524422
> 
> 赞同：4
> 
> 时间：2013-01-25T15:00:39.650
> 
> 标签：c#, winforms

我正在尝试在文本框中输入永久前缀。就我而言，我想要以下前缀：

`DOMAIN\`

这样用户只需在域前缀之后键入他们的用户名。这不是我必须做或追求的事情，但我的问题更多是出于好奇。

我试图想出一些逻辑来做到这一点`TextChangedEvent`但是，这意味着我需要知道哪些字符已被删除，然后预先附加`DOMAIN\`到他们的输入是什么 - 我无法计算出这个逻辑所以除了我要去的地方，我无法发布我尝试过的内容。

```
public void TextBox1_TextChanged(object sender, EventArgs e)
{
  if(!TextBox1.Text.Contains(@"DOMAIN\")
  {
    //Handle putting Domain in here along with the text that would be determined as the username
  }
} 
```

我在互联网上查看并找不到任何内容，[如何在 winforms 文本框中的文本以不可更改的文本为前缀？](https://stackoverflow.com/questions/6298083/how-do-i-have-text-in-a-winforms-textbox-be-prefixed-with-unchangable-text)试图做类似的事情，但答案并没有真正帮助。

关于如何将前缀保留`DOMAIN\`在 a 中的任何想法`TextBox`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T15:18:01.090

这里指出了使用 KISS 原则。当用户使用 Ctrl+V 或上下文菜单的剪切和粘贴命令时，试图捕捉按键不会做任何事情。当发生任何混淆前缀的事情时，只需恢复文本即可：

```
 private const string textPrefix = @"DOMAIN\";

    private void textBox1_TextChanged(object sender, EventArgs e) {
        if (!textBox1.Text.StartsWith(textPrefix)) {
            textBox1.Text = textPrefix;
            textBox1.SelectionStart = textBox1.Text.Length;
        }
    } 
```

并帮助用户避免意外编辑前缀：

```
 private void textBox1_Enter(object sender, EventArgs e) {
        textBox1.SelectionStart = textBox1.Text.Length;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:08:55.867

为什么不在 textChanged 的​​事件 args 中查看之前的值和新值，如果新值`Domain\`中不存在，则保留旧值。

或者，为什么不将 显示`Domain\`为 TextBox 前面的标签，然后将其添加到后面的代码中，以便最终文本类似于`Domain\<username>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T15:09:02.550

是的，一旦我问了这个问题，我就解决了这个问题......我不会删除这个问题，以防其他人将来有同样的问题，因为我找不到合适的答案。我设置`Text`为`Domain\`然后使用该`KeyPress`事件。

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
  e.Handled = (textBox1.GetCharIndexFromPosition(Cursor.Position) < 7);
} 
```

一旦我提出要求，我倾向于继续工作，而不是让人们为我做所有的工作:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:52:36.487

一个可重用的自定义 TextBox 控件怎么样。代码中有注释

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        textBox1.Prefix = @"DOMAIN\";
    }
}

class PrefixedTextBox : TextBox
{
    private string _prefix = String.Empty;
    public string Prefix
    {
        get { return _prefix; }
        set
        {
            _prefix = value;
            Text = value;
        }
    }

    protected override void OnKeyDown(KeyEventArgs e)
    {
        // Don't allow Backspace and Delete if the only text is Prefix
        if (Text == Prefix && (e.KeyCode == Keys.Back || e.KeyCode == Keys.Delete))
            e.Handled = true;

        // If home key is pressed set cursor just after the prefix
        if (e.KeyCode == Keys.Home)
        {
            e.Handled = true;
            SelectionStart = Prefix.Length;
        }

        // Don't allow cursor to be moved inside Prefix
        if (SelectionStart <= Prefix.Length && (e.KeyCode == Keys.Left || e.KeyCode == Keys.Up))
            e.Handled = true;

        base.OnKeyDown(e);
    }

    protected override void OnClick(EventArgs e)
    {
        EnsureCursorPosition();
        base.OnClick(e);
    }

    protected override void OnKeyPress(KeyPressEventArgs e)
    {
        EnsureCursorPosition();

        // this was checked OnKeyDown. This prevents deleting and writing back behaviour
        if (Text == Prefix && e.KeyChar == '\b')
            e.Handled = true;

        base.OnKeyPress(e);
    }

    protected override void OnKeyUp(KeyEventArgs e)
    {
        // Yet, some how an invalid text is entered fix it by just displaying the Prefix
        if (!Text.StartsWith(Prefix))
            Text = Prefix;

        base.OnKeyUp(e);
    }

    private void EnsureCursorPosition()
    {
        // Never allow cursor position before Prefix
        if (SelectionStart < Prefix.Length)
            SelectionStart = Text.Length;
    }
} 
```

# mysql - 只计算男性用户的回答

> ID：14524423
> 
> 赞同：0
> 
> 时间：2013-01-25T15:00:41.933
> 
> 标签：mysql, database

我有这样的数据库：

```
+-----+---------+--------------+
| id  | user_id | form_answers |
+-----+---------+--------------+
|  1  |    1    | yes          |
|  2  |    1    | M            |
|  3  |    2    | yes          |
|  4  |    2    | M            |
|  5  |    3    | no           |
|  6  |    3    | F            |
|  7  |    4    | no           |
|  8  |    4    | M            |
+-----+---------+--------------+ 
```

有一个表格插入到这个数据库中。它有一个问题和下拉列表（男性或女性）。是否可以计算男性（M）用户给出了多少“是”的答案？不必计算它......它可以从男性用户那里选择所有回答“是”的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:03:59.130

您可以自己加入答案表。这将返回男性用户给出的“是”答案列表：

```
SELECT a1.*
FROM answers a1 inner join answers a2
     on a1.user_id=a2.user_id
        and a1.form_answers='yes'
        and a2.form_answers='M' 
```

要计算行数，只需将选择行替换为：

```
SELECT COUNT(*) 
```

[在这里](http://sqlfiddle.com/#!2/36550/5)看小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:17:47.510

```
SELECT  COUNT(*) totalUsers
FROM
    (
        SELECT  user_id
        FROM    tableName
        WHERE   form_answers IN ('YES','M')
        GROUP   BY user_ID
        HAVING  COUNT(*) = 2
    ) s 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c742d/4)

# javascript - Javascript 元素创建

> ID：14524425
> 
> 赞同：1
> 
> 时间：2013-01-25T15:00:48.020
> 
> 标签：javascript, forms, element, creation

我有以下创建隐藏输入的代码：

```
var hidden_id = document.createElement("INPUT");
            hidden_id.setAttribute("type","hidden");
            hidden_id.setAttribute("value","test");
            hidden_id.setAttribute("name","quick");
            hidden_id.setAttribute("id","quick"); 
```

此输入被创建到一个表单中，但该值不会从表单传递到我需要使用它的 php 页面。我知道表单没有问题，因为表单中有其他输入是硬编码的，可以毫无问题地传递值。

任何帮助表示赞赏:)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:02:31.387

您应该将输入附加到表单中：

```
var hidden_id = document.createElement("INPUT");
hidden_id.setAttribute("type","hidden");
hidden_id.setAttribute("value","test");
hidden_id.setAttribute("name","quick");
hidden_id.setAttribute("id","quick");

//Appending to the form...
document.forms[0].appendChild(hidden_id); 
```

# c# - 一般将 IQueryable 转换为 IOrderedQueryable

> ID：14524427
> 
> 赞同：12
> 
> 时间：2013-01-25T15:00:49.623
> 
> 标签：c#, entity-framework, linq-to-entities

我有一个通用方法，我在其中使用 Linq-to-Entities`IQueryable<T>`并返回一个。`IOrderedQuerable<T>`

一个简单的`input.OrderBy(p => p.something)`行不通，因为我不知道它的任何属性`T`（而且我不能将它限制在一个接口上）。

将结果转换为 ( `IOrderedQuerable<T>`) 似乎有效，直到您尝试将其与`.Skip()`or一起实际使用`.Take()`，此时您会收到运行时错误。

我想我理论上可以使用反射，看看我是否找到一个`int`或什么东西并构建一个表达式用作排序，但这似乎很脏。

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T15:07:52.967

```
input.OrderBy(p => 0); 
```

这样，您将按照最初的顺序获得这些项目。但是，这将花费额外的 CPU。

# java - 从另一个类中调用一个变量

> ID：14524431
> 
> 赞同：0
> 
> 时间：2013-01-25T15:01:13.267
> 
> 标签：java, eclipse, class, contentpane

我正在为我的一个类编写原始地址簿的代码，我们需要为地址簿本身使用一个类，然后使用另一个类来放入新条目。我明白这一点，但是当我调用输入新联系人的类方法时，我想更改 GUI。我正在使用 JFrame，因此对于我的 GUI 基础，我使用的是`contentPane`. 在我的第一堂课中，我`contentPane`用一个基本的 GUI 创建了我的：

```
public class Address extends JFrame implements ActionListener
{
    Container contentPane;

    public Address()
    {
        super();
        contentPane = getContentPane();
        contentPane.setLayout(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setTitle("Address Book");
        setSize(775,775);
        setLocation(0,0);
        setBackground(Color.BLUE);
    }
} 
```

现在在我的第二节课中，输入一节，我想清除`contentPane`with `contentPane.removeAll()`。

```
class Entries
{
    public void newContact()
    {
        contentPane.removeAll();
    }
} 
```

不幸的是，我的班级条目中没有任何内容可以识别`contentPane`以及我正在尝试修改的其他变量。有没有一种特殊的方法来命名`contentPane`类地址中的变量和其他变量，以便它们在条目中可用，或者我需要重新创建变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:06:12.730

当您创建一个对象时，`Entries`您需要给它一个对该`Address`对象的引用，以便您可以使用它的变量。我不确定你的程序布局是如何设置的，但如果`Entries`是在`Address`你调用的内部创建的，`Entries entry = new Entry(this);`或者它是从父类到两个类的，你需要设置变量......

```
Address address = new Address();
Entries entry = new Entry(address); 
```

关于如何在条目中访问它的代码：

```
class Entries
{
    private Address reference;

    public Entries(Address reference) {
        this.reference = reference;
    }

    public void newContact()
    {
        reference.contentPane.removeAll();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:06:46.253

您需要一个引用来访问东西，或者您复制变量并在 Entries 构造函数中提供 contentPane ：

```
private Container contentPane;

public Entries(Container contentPane) {
    this.contentPane = contentPane;
} 
```

或者，您在 Address 类中的 contentPane 上创建一个 getter 并传递 contentPane。

在我看来，这两种解决方案都很糟糕，也许您应该考虑为您的条目类扩展一个 JPanel，并将条目添加到您的主 contentPane，然后您将能够在条目类中执行您想要的任何 UI 内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:05:29.743

您需要将 contentPane 的引用作为构造函数 arg 传递给 Entries，或者将 contentPane 属性（getter，setter）添加到 Entries。

# svn - 可以通过右键菜单忽略 RabbitVCS 中的文件吗？

> ID：14524436
> 
> 赞同：5
> 
> 时间：2013-01-25T15:01:33.873
> 
> 标签：svn, ubuntu-12.04, svnignore, rabbitvcs

在 Windows 中，像 TortoiseSVN 这样的工具`ignore file/folder`在其右键菜单中具有功能。在 Linux Ubuntu 上，我安装了一个名为 RabbitVCS 的工具，它应该是 Linux 上 TortoiseSVN 的最佳替代品。

但是，我无法`ignore`在其右键菜单中找到功能。

谁能告诉我如何使用 RabbitSVN 工具忽略来自 SVN 提交的文件或文件夹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T09:47:02.333

**仅当**您之前未提交文件时，`Ignore File`菜单选项才会存在。

 **如果您之前已提交过，则必须先将其从存储库中删除，然后再忽略它。**

# oracle - PL/SQL 检查日期是否有效

> ID：14524448
> 
> 赞同：2
> 
> 时间：2013-01-25T15:02:08.167
> 
> 标签：oracle, validation, date, plsql

如果我在 PL/SQL 中有一个日期格式`DDMM`并且我想验证它。正确的方法是什么？

`DD`是天，`MM`是蛾子。

```
For an example:
0208 - is a valid date
3209 - is not a valid date
0113 - is not a valid date. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T15:36:15.040

你可以写一个像这样的函数，例如：

```
create or replace function is_valid(p_val in varchar2)
return number
is
  not_a_valid_day   exception;
  not_a_valid_month exception;
  pragma exception_init(not_a_valid_day, -1847);
  pragma exception_init(not_a_valid_month, -1843);
  l_date date;
begin
  l_date := to_date(p_val, 'ddmm');
  return 1;
exception
  when not_a_valid_day or not_a_valid_month
  then return 0;
end;

SQL> with test_dates(dt) as(
  2    select '0208' from dual union all
  3    select '3209' from dual union all
  4    select '0113' from dual
  5  )
  6  select dt, is_valid(dt) as valid
  7    from test_dates
  8  /

DT        VALID
---- ----------
0208          1
3209          0
0113          0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:37:13.430

`to_date`如果其输入参数不是有效日期，则引发异常。因此，您可以执行以下操作：

```
declare
  x date;
begin
  x := to_date('3210', 'DDMM'); -- Will raise ORA-1847
  x := to_date('0113', 'DDMM'); -- Will raise ORA-1843
exception
  when others then 
    if sqlcode in (-1843, -1847) then
      dbms_output.put_line('Invalid Date!');
      null;
    else
      raise;
    end if;
end; 
```

# r - 如何通过代理安装 R 包 [用户 + 密码]

> ID：14524449
> 
> 赞同：5
> 
> 时间：2013-01-25T14:27:43.500
> 
> 标签：r

我需要身份验证才能使用互联网，说这些是我的变量：

1.  代理：1ncproxy1
2.  端口：80
3.  登录：MyLogiN
4.  通行证：MyPaSs

**如何在 R 及其插件包中安装包？** 这样以下将起作用：

```
install.packages("TSA", dependencies=TRUE) 
```

如果我们没有互联网连接失败？

我试过这个：

```
Sys.setenv("ftp_proxy" = "1ncproxy1","ftp_proxy_user"="MyLoGiN","ftp_proxy_password"="MyPaSs")#Port = 80 
```

但我得到：

```
Warning: unable to access index for repository http://cran.ma.imperial.ac.uk/src/contrib
# or 
cannot open: HTTP status was '407 Proxy Authentication Required' 
```

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:16:20.923

您可能使用的是 Windows，所以我建议您查看安装随附的“R on Windows FAQ”，特别是[**问题 2.19：Internet 下载功能失败**](http://cran.r-project.org/bin/windows/base/rw-FAQ.html#The-Internet-download-functions-fail_002e)。您可能需要使用`--internet2`选项 (IIRC) 重新启动 R 才能使代理设置生效。

我一直觉得这很麻烦。另一种方法是安装代理感知网络下载器，例如`wget`（作为 Windows 二进制文件），您可以在主目录的文件中设置代理选项。这一切都来自记忆，我想我上一次遇到这样的代理是在 2005 年所以 YMMV。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-05T19:01:53.930

+1 朱巴，上面。这对我有用：

```
$ export http_proxy=http://username:password@the-proxy.mycompany.com:80
$ R
> install.packages("quantmod") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T15:41:50.173

正如@juba 所说，我认为您想设置 http_proxy。来自`?download.file`：

> 可以通过环境变量 http_proxy_user 以 user:passwd 的形式为 HTTP 代理传输设置用户名和密码。或者，http_proxy 可以是“http://user:pass@proxy.dom.com:8080/”的形式

所以，试试：`Sys.setenv(http_proxy="http://MyLoGiN:MyPaSs@1ncproxy1:80")`

但请注意：

> 这些环境变量必须在第一次使用下载代码之前设置：以后不能通过调用 Sys.setenv 来更改它们。

所以你最好在你的`.Rprofile`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-26T09:55:30.243

正如 Jeff Taylor 所写，R 可以间接使用代理服务器。您需要为 http 和 https 协议指定代理服务器，如下所示：

```
$ export http_proxy=http://user:pass@proxy_server:port
$ export https_proxy=http://user:pass@proxy_server:port
$ R
> install.packages("<package_name>") 
```

我刚刚测试了这个解决方案，它就像一个魅力。Jeff 的回答是正确的，但不幸的是，在大多数情况下是不完整的，因为现在大多数服务器都可以通过 https 访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-25T13:38:02.237

我尝试安装 swirl 包，但遇到了同样的问题 - 授权代理。

经过一些实验，我找到了决定。可能是我的回答对任何人都有帮助。在 Windows 7 上：

1.  设置 1 个或多个（如果需要）env 变量 http_proxy（如果需要，可以设置 https_proxy 和 ftp_proxy）（如果你不`t know how - read there http://www.computerhope.com/issues/ch000549.htm ) It`喜欢 [代理的 env 变量](http://i.stack.imgur.com/5fzzb.jpg)

2.  格式 http_proxy="http://Proxyusername:ProxyUserPassw@proxyServName:ProxyPort"

3.  使用“ **@** ”而不是 %40

4.  在 RStudio **Tools->Global Options->Packages** release 复选框“使用 Internet Explorer library /proxy for HTTP”

# asp.net - 使用 FileUpload asp.net 上传多个文件

> ID：14524450
> 
> 赞同：0
> 
> 时间：2013-01-25T15:02:17.550
> 
> 标签：asp.net, database, linq, file-upload, multifile-uploader

我一直在为这个问题苦苦挣扎一段时间。我有一个创建项目的 Web 界面，通过这个界面，您应该能够将多个文档上传到服务器，该服务器附加到它们所属的项目。到目前为止，我一次只上传一个文件。

我的想法可能是在 arralylist 中添加“文件”对象，然后将其绑定到 gridview，然后将其上传到服务器？我知道这听起来有点令人困惑，但我也很困惑！

当我将单个文件上传到服务器并将文件的 ID、名称和上下文保存在数据库中时，这就是我的方法的样子：

```
 File file = new File();
                Projects_Overview po = new Projects_Overview();
                po.Name = TextBoxName.Text;
                po.Time = time;
                po.Owner = TextBoxOwner.Text;
                po.Responsibility = TextBoxResp.Text;
                po.Created = datecreate;
                po.StartDate = datestart;
                po.FinishDate = datefinish;
                po.ETC = dateETC;
                po.Description = TextBoxDesc.Text;
                po.Comments = TextBoxComments.Text;
                po.Remember = TextBoxRemember.Text;

                ie.Projects_Overview.AddObject(po);
                ie.SaveChanges();

                if (uploadFile.HasFile)
                {
                    string filepath = uploadFile.PostedFile.FileName;
                    string fileName = Path.GetFileName(filepath);

                    file.Context = Path.GetFileNameWithoutExtension(uploadFile.PostedFile.FileName);
                    file.Extension = Path.GetExtension(uploadFile.PostedFile.FileName).Replace(".", "").Substring(0, 4);
                    file.FileName = Guid.NewGuid();

                    string fileSavePath = Server.MapPath("") + "\\Wordfiles\\" + Convert.ToString(file.FileName) + ".upl";
                    uploadFile.PostedFile.SaveAs(fileSavePath);

                    file.ProjectID = po.ID;
                    ie.File.AddObject(file);
                    ie.SaveChanges(); 
```

有人可以告诉我如何“附加”多个文件，然后将它们与我上面发布的其他数据一起保存在文件夹中吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:07:40.587

我相信 HTML 5 具有处理多文件上传的内置功能（HTML4 没有），但我还没有使用过 HTML5。对于 HTML4，您必须使用外部控件（通常是 javascript 或 flash），因为没有允许多文件上传的内置机制。

我确实编写了一个与 HTML4 或 HTML5 一起使用的多文件上传页面，使用[PLupload](http://www.plupload.com/)（一个外部控件）来执行文件选择。我必须找到一个通用文件处理程序来将控件连接到 .aspx 上传页面。我想我在[这里](https://stackoverflow.com/questions/4350686/using-plupload-with-asp-net-c)找到了。

实施花了几个小时，但效果很好。

# printing - 为什么我的全局表被认为是零？

> ID：14524451
> 
> 赞同：0
> 
> 时间：2013-01-25T15:02:25.590
> 
> 标签：printing, lua, runtime-error, null, lua-table

**背景：**

我正在尝试自学 Lua，但我很难理解为什么当一个表里面有数据时它被认为是 nil。谁能帮我分析一下，为什么我会从下面的代码片段中收到此错误消息？这是我的第一个程序之一，在开始我的实际项目之前，我真的需要了解这些概念。谢谢！

**错误信息：**

```
C:\Users\<user>\Desktop>lua luaCrap.lua
lua: luaCrap.lua:7: attempt to call global 'entry' (a nil value)
stack traceback:
        luaCrap.lua:7: in main chunk
        [C]: ? 
```

**代码：**

```
--this creates the function to print
function fwrite (fmt, ...)
  return io.write(string.format(fmt, unpack(arg)))
end

--this is my table of strings to print
entry{
    title = "test",
    org = "org",
    url = "http://www.google.com/",
    contact = "someone",
    description = [[
                    test1
                    test2
                    test3]]
}

--this is to print the tables first value  
fwrite(entry[1])

--failed loop attempt to print table
-- for i = 1, #entry, 1 do
    -- local entryPrint = entry[i] or 'Fail'
    -- fwrite(entryPrint)
-- end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:04:02.350

你错过了进入的分配。

您需要将入口代码更改为：

```
entry = 
{
    title = "test",
    org = "org",
    url = "http://www.google.com/",
    contact = "someone",
    description = [[
                    test1
                    test2
                    test3]]
} 
```

为了澄清错误消息，在某些情况下假定使用括号，例如当您有一个直接跟在标签后面的表格时。解释器认为您正在尝试将一个表传递给一个名为 的函数`entry`，但它找不到该函数。它假设你真的是这个意思：

```
entry({title = "test", ...}) 
```

# ios - 每次请求都重新加载 UIWebView？

> ID：14524452
> 
> 赞同：0
> 
> 时间：2013-01-25T15:02:26.090
> 
> 标签：ios, cocoa-touch, uiwebview

我有一个 UIWebView，我正在尝试获取在 Safari 中打开的链接。通常的代码有效，只是不适用于 m.youtube.com。所以我正在尝试一种不同的方法 - 有没有一种方法，每次加载 webView 时，页面都会完全重新加载，而是使用新的 URL？这是我能想到的唯一解决方案。

这是我引用的问题：

[从 UIWebView 在 Safari 中打开（使用 youtube.com）](https://stackoverflow.com/questions/14510191/open-in-safari-from-uiwebview-using-youtube-com/14514058#comment20251699_14514058)

谢谢。

# jquery - 阻止在 div 中缩放的标签

> ID：14524455
> 
> 赞同：1
> 
> 时间：2013-01-25T15:02:28.633
> 
> 标签：jquery, html

我使用 div 制作了一个“图像映射”，其中包含一堆`<a>`div。它工作正常，但现在我希望能够缩放它，以便它可以调整 div 的大小，但我`<a>`将保持相对于 div 的相同位置。

```
<div class="container">
    <a href="#a1" class="dot" style="top: 138px; left: 28px"></a>
    <a href="#a18" class="dot" style="top: 45px; left: 261px"></a>
    <a href="#a20" class="dot" style="top: 45px; left: 336px"></a> 
```

和CSS

```
#kit .container {
position: relative;
margin: auto;
background-image: url(../img/9829-Kit.png);
background-repeat: no-repeat;
height: 670px;
width: 700px;
}
a.dot {
position: absolute;
display: block;
height: 33px;
width: 34px;
cursor: pointer;
background-position: 0px 0px;
background-image: url(../img/dots.png);
background-repeat: no-repeat;
}
a.dot:hover {
background-position: 0px -40px;
cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:18:12.403

因为您使用像素作为偏移量，所以您的 div 永远不会相对于其父级的左边缘和上边缘移动。您需要将像素转换为百分比，然后当父元素调整大小时，子元素的大小和位置会增长和移动。

但是，由于您将 sprite 用于悬停伪类，因此如果您调整父 div 的大小，并且子 div 也会调整大小，设计将会中断。如果您不需要子 div 调整大小，请将其大小保留为像素值，并将顶部/左侧设置为百分比。

例如，#a1 div 设置为距顶部 138px，距左侧 28px。

28px / 700px（父级宽度）* 100 = 0.4%

138px / 670px（父级高度）* 100 = 20.597015%

所以#a1 div 应该设置为 left:0.4% 和 top:20.597015%。

我相信只要您不使用边距，而是使用实际的绝对定位，这将起作用。如果没有，则每次调整父 div 的大小时，您都必须使用 javascript 将百分比转换为像素值（基于父大小）。

# testing - 在 MSBuild 构建服务器上运行 selenium 测试

> ID：14524456
> 
> 赞同：0
> 
> 时间：2013-01-25T15:02:31.300
> 
> 标签：testing, msbuild, mstest

我们部门使用 Visual Studio 2008 Team System，并且我们有一个与我们的 TFS 源代码控制服务器集成的构建服务器。它提取源代码，构建解决方案并运行单元测试，就像我们在 VS 中所做的那样，并通过电子邮件发送报告。使用 MSBuild 和 MSTest 作为主要工具设置构建服务器。都非常甜蜜。

在我们的开发机器上，我们还运行了一组 selenium 单元测试，我想将其包含在构建服务器上的测试套件中。有人告诉我“使用 MSBuild/MSTest 无法做到这一点”，但我不知道为什么。

有没有人有运行 selenium 测试的经验（它们只是用 C# 编写的传统测试方法）谁可以告诉我这是否可行以及有什么问题？想一想，除了在服务器未登录时让浏览器访问桌面之外，一旦 MSBuild 将测试列表交给 MSTest，它与我们开发机器上的过程完全相同。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-08T16:08:16.060

我知道它已经过去了 3 年，但有人可能会在这篇文章中出现而看不到答案。这是可能的。

与运行单元测试的方式类似，在使用默认模板的构建定义中，您需要指定 UnitTest DLL 的名称并确保未禁用运行单元测试。还要确保构建正在构建您的自动化 UI 测试解决方案。

简单的。

# mongodb - 使用河流到 MongoDB 的 ElasticSearch

> ID：14524459
> 
> 赞同：0
> 
> 时间：2013-01-25T15:02:37.417
> 
> 标签：mongodb, elasticsearch

我已经使用 mongodb River 安装并配置了 MongoDB 和 ES。但我不确定我是否真的了解 ES 中的河流。例如，我想要来自 mongodb 的索引集合“用户”。

我会将 curl PUT/POST 请求发送到 url /_river/mongodb_users/_meta

```
{
  "type": "mongodb",
  "mongodb": {
    "db": "somedb",
    "collection": "users"
  },
  "index": {
    "name": "users",
    "type": "user"
  }
} 
```

但现在，我想索引第二个集合，例如“users2”。我真的需要在 /_river/mongodb_users2/_meta 等带有 JSON 的 URL 上使用 curl POST/PUT 创建新河流：

```
{
  "type": "mongodb",
  "mongodb": {
    "db": "somedb",
    "collection": "users2"
  },
  "index": {
    "name": "users2",
    "type": "user"
  }
} 
```

我不能使用已经创建的河“mongodb_users”？我需要为一个集合创建一条河流吗？

谢谢你的解释！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:09:11.303

是的。MongoDB River 的工作方式不允许从一条 River 中的多个集合中获取内容。

但是，您可以根据需要创建任意数量的河流。

也就是说，如果您想将 users1 索引到 Elasticsearch 中的用户类型，并将 users2 索引到相同的用户类型，您可以（只要他们不使用相同的 ID）。

只需修改`index.type`为`"users"`.

它有帮助吗？

# c# - 将 for 和 if 循环组合在一起

> ID：14524462
> 
> 赞同：-1
> 
> 时间：2013-01-25T15:02:42.737
> 
> 标签：c#, loops, for-loop

编程和阅读如何预订的新手。问题是关于循环的。我有以下代码：

```
public bool DoThisJob(string job, int numShift) {
        if (!string.IsNullOrEmpty(currentJob))
            return false;
        for (int i = 0; i < jobsICanDo.Length; i++) {
            if (jobsICanDo[i] == job) {
                currentJob = job;
                this.shiftsToWork = numberOfShifts;
                shiftsWorked = 0;
                return true;
            }
        return false; 
```

如果 currentJob 字符串不为空则返回 false 还是返回 true？没有**其他**声明，所以如果它是真的，我们怎么知道该怎么做？

接下来运行一个**for循环**，然后for循环再次运行，因为它返回false或true？最后运行一个不言自明的 if 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:06:30.107

由于“return”声明，没有其他内容。它立即中止函数的执行并返回到调用函数。你可以用 else 来写它，它的功能是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:07:07.657

如果 currentJob 字符串为空，则该`if`语句将不会运行，它将进入`for`循环。

如果`for`循环中的条件触发它返回 true，则该方法返回 true，并且永远不会达到最后一次返回。

如果`for`循环没有返回 true，它将落到最后一行，并且该方法将返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:09:33.987

return 语句在该点停止函数的执行并将控制权返回给调用过程。

```
public bool DoThisJob(string job, int numShift) {
        if (!string.IsNullOrEmpty(currentJob))
            return false; // If it is not empty then function call returns from this statement

        // Else, flow control falls through and below code is executed
        for (int i = 0; i < jobsICanDo.Length; i++) {
            if (jobsICanDo[i] == job) {
                currentJob = job;
                this.shiftsToWork = numberOfShifts;
                shiftsWorked = 0;
                return true;
            }

        return false;
        } 
```

我希望，这可以澄清这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:05:40.517

`There is no else statement so how do we know what to do if it is true?.`

在`if ... else`（或经典称为`if .. then .. else`）构造`else`中，如果是可选的，并且在它不存在的情况下，它将落入`if`块外的下一个语句，在这种情况下，它的`for`语句

您的上述功能可以等效地类似于

```
public bool DoThisJob(string job, int numShift) {
        if (!string.IsNullOrEmpty(currentJob))
            return false;
        else {
            for (int i = 0; i < jobsICanDo.Length; i++) {
                if (jobsICanDo[i] == job) {
                    currentJob = job;
                    this.shiftsToWork = numberOfShifts;
                    shiftsWorked = 0;
                    return true;
                }
            return false;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T15:21:27.760

您的功能可以简化如下，无需循环；

```
public bool DoThisJob(string job, int numShift) {

    if (!string.IsNullOrEmpty(currentJob) || !jobsICanDo.Contains<string>(job))
    {
       //if currentJob NOT null/empty OR 
       //job is not in the jobsICanDo[] array
       return false;
    }
    else
    {
        currentJob = job;
        this.shiftsToWork = numberOfShifts;
        shiftsWorked = 0;
        return true;
    }
} 
```

# .net - 'System.Net.Mail.SmtpClient' 类型的'使用' 操作数必须实现 'System.IDisposable' - (.NET 3.5)

> ID：14524466
> 
> 赞同：3
> 
> 时间：2013-01-25T15:03:06.290
> 
> 标签：.net, vb.net, idisposable, smtpclient

我有一个要求，我需要将 .NET 4.0 项目转换为 .NET 3.5 项目，除了“SmtpClient”之外，其他一切都很好 到目前为止，我发现 .NET 3.5 SmtpClient 没有实现 IDisposable，而在 .NET 4.0 中它做！

以下是在 .NET4.0 上运行良好但在 .NET3.5 上运行良好的代码：

```
Using MailServer As New SmtpClient(MailServerName)
MailServer.Credentials = New System.Net.NetworkCredential(MailServerUserName, MailServerPassword)
SendMail(MailServer, msgBody, msgSubject, FromEmail, ToEmail)
End Using 
```

任何想法如何使用 .NET 3.5（我更喜欢使用“使用”代码块来自动处置对象而不是旧式手动处置）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T15:33:34.647

之前的`TryCast`to怎么样：`IDisposable``Using`

```
Dim MailServer As New SmtpClient(MailServerName)
Using TryCast(MailServer, IDisposable)
    MailServer.Credentials = New System.Net.NetworkCredential(MailServerUserName, MailServerPassword)
    SendMail(MailServer, msgBody, msgSubject, FromEmail, ToEmail)
End Using 
```

如果在 .NET 4.0 中运行，则`TryCast()`返回 ，`SmtpClient`因为它实现了 IDisposable。

如果在 .NET 3.5 中运行，则忽略`TryCast()`返回`Nothing`和。`Using`

.NET 3.5中似乎不需要任何清理`SmtpClient`，因为据我所知，它们没有提供`Dispose()`任何其他清理方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T15:08:16.553

您将不得不显式地编写与 Using 语句等效的语句。像这样：

```
 Dim MailServer As New SmtpClient(MailServerName)
    Try
        '' etc..
    Finally
        Dim disp = TryCast(MailServer, IDisposable)
        If disp IsNot Nothing Then disp.Dispose()
    End Try 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T15:46:23.520

以下为我工作（使用.NET 3.5）：

```
Dim MailServer = New SmtpClient(MailServerName)
Using TryCast(MailServer, IDisposable)
    MailServer.Credentials = New System.Net.NetworkCredential(MailServerUserName,MailServerPassword)
    SendMail(MonthlyMailServer, msgBody, msgSubject, FromEmail, ToEmail)
End Using 
```

# ios - 如何在 popViewController 之前刷新视图的内容？

> ID：14524468
> 
> 赞同：0
> 
> 时间：2013-01-25T15:03:10.960
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, viewdidload, popviewcontroller

我有两个`viewcontroller`。第一个视图控制器包括地图和注释，当我触摸注释时，我的第二个视图来了。在第二个视图中，我触摸删除按钮。所以我的第一个视图的内容必须在此代码之前刷新：`[self.navigationController popViewControllerAnimated:YES];` 我需要调用`viewdidload`方法或从第二个视图刷新我以前的视图的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T15:14:37.360

-（无效）viewWillAppear：动画

不确定它是否在 [self.navigationController popViewControllerAnimated:YES] 之前调用；但肯定是在你看到风景之前。拨打电话以在其中重新加载地图的注释。

还要确保调用 viewWillAppear 超级。

如果两个视图都不能从同一个数据对象中工作，您将需要一个委托来将数据发回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:14:39.343

正如安迪所说，您可以使用委托模式，也可以使用 `NSNotificationCenter`. 我个人使用`NSNotificationCenter`.

要使用通知中心，您需要将观察者添加到您的视图控制器类中。当您弹出视图时，您会向 center 发送通知，假设您的通知是`update` 当您通知中心时`update`， center 告诉任何类已`update`运行方法.. .. 很简单。

`[[NSNotificationCenter defaultCenter] postNotificationName:@"update" object:nil];`

检查此答案以获取完整代码： [IOS：移回两个视图](https://stackoverflow.com/questions/14245603/ios-move-back-two-views/14246148#14246148)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T10:55:41.263

ViewWillApear 或 ViewDidApear 将被调用，因为 viewcontroller 中有任何对象更改，但是如果您想从另一个 viewcontrollerB 更改您的 viewcontrollerA，则需要 NSNotificationCenter 从 viewcontrollerA 调用该函数

你总是可以使用 NSNotificationCenter 来更新你的父视图控制器

在你的父视图控制器上放这个：

```
//since child view controller calls turnItOff, notification center calls function "turnButtonCountinuesOff"
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(turnButtonCountinuesOff) name:@"turnItOff" object:nil]; 
```

turnButtonCountinesOff 是您在父视图控制器中的功能

在你的孩子 viewcontroller 放这个：

```
//connect to parent UI view controller calls notification turnItOff.
[[NSNotificationCenter defaultCenter] postNotificationName:@"turnItOff" object:nil]; 
```

希望能帮助到你。

# javascript - 从 JS 变量中获取数据并设置在 ASP.NET 变量中

> ID：14524472
> 
> 赞同：1
> 
> 时间：2013-01-25T15:03:21.027
> 
> 标签：javascript, asp.net

我想将数据从一个用户控件传递到另一个用户控件，但是我尝试了几件事来做到这一点，但它们都不起作用，例如 JS 中的 sessionStorage、ASPX 中的 Session、它们中的 cookie。该数据是动态的，因此我现在不知道如何将其传输到其他用户控件。

我什至尝试将 aspx 代码放入 javascript 函数中（然后当我单击按钮时，它可以触发代码，但效果不佳）。我上面提到的这个按钮是用文字控件编写的。

**JavaScript 函数**

这个函数是 LoadUsers UserControl

```
 function getID(ID) {
        sessionStorage.setItem("userID", ID);
    } 
```

此功能在 Access UserControl 中

```
 function catchIP() {
               var ID = sessionStorage.getItem("userID");
               $('#<%= value.ClientID %>').val(ID);
           } 
```

**用户控件**

加载用户：

```
 ...
 string _str = "<a href'#lastAccess' css='btn btn-success' onclick='javascript:getID(" + _id[_contForeach] + "); catchID();'>Access</a>";
 _loadUsers.Controls.Add(new LiteralControl(_str)); 
```

使用权：

如何在不使用 Page_Load 的情况下访问 JavaScript 函数中的 ID 并应用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:54:01.313

要在服务器端代码和客户端代码 (JavaScript) 之间传递信息，请使用 ajax

**阿贾克斯**

所以使用jquery，有这样的功能：

```
$.get('getuserid.aspx', function(response) {
 //Do something with return response
}); 
```

然后在getuserid.aspx.cs后面的代码中

```
private void Page_Load(object sender, System.EventArgs e)
{
    Response.Expires = -1;
    //required to keep the page from being cached on the client's browser

   //set userid

    Response.ContentType = "text/plain";
    Response.Write(userid);
    Response.End();
} 
```

# javascript - 为什么这段代码使用 。称呼（）？

> ID：14524473
> 
> 赞同：2
> 
> 时间：2013-01-25T15:03:24.263
> 
> 标签：javascript

代码来自[Mozilla网站](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

```
function Product(name, price) {
  this.name = name;
  this.price = price;

  if (price < 0)
    throw RangeError('Cannot create product "' + name + '" with a negative price');
  return this;
}

function Food(name, price) {
   Product.call(this, name, price);/// why not this be Product(name,price)
   this.category = 'food';
}
Food.prototype = new Product(); 
```

可能很傻的东西，看不懂这条线
`Product.call(this, name, price);`

既然 Product 和 Food 都是全局函数，为什么我们必须使用 Product.call

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:09:53.693

该`Product`函数是一个构造函数，通常会使用`new`. 在调用函数时使用`new`创建一个新的空对象，并以新对象为上下文调用函数，同时也建立了原型链。

在这个例子`Food`中是子类化`Product`，它想在 的新实例上运行 Product 构造函数`Food`。

一个例子应该让事情变得清楚：

```
var f = new Food ('apple', 10)

f.name = 'apple'
f.price = 10
f.category = 'food' 
```

`Product`通过使用 的新实例调用构造函数，将名称和价格类别添加到对象中`Food`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T15:04:58.560

因为你想`Product`在食物对象上应用这个函数。仅仅调用它[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)会导致错误的[`this`值](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)，并且添加的属性`Product`将附加到错误的对象上。

也在[这里学习关于继承](https://stackoverflow.com/a/13418980/1048572)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T15:06:10.007

```
Product.call(this, name, price); 
```

此行`this`以调用对象和名称和价格作为参数调用产品函数

这使您可以将产品视为 Food 的一种方法，而无需明确指定它。如果不这样做，产品内对“this”的任何调用都将指向全局对象。相反，它们现在被分配给正在创建的 Food 实例。

在这种情况下，这样做的一个可能目的是使用 Product 在构造函数中准备对象，而不使 product 成为 Food 对象定义的永久部分（如果您将其分配为 Food 的方法，则会发生这种情况，同时仍然允许它被其他人重用（如果您将其作为构造函数的逻辑的一部分或构造函数中的内部函数，这是不可能的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T15:05:38.930

在这种情况下

```
Product.call(this, name, price); 
```

this -> 是 Food 实例，而不是 window

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T15:05:53.363

在 JavaScript 中有多种调用函数的方法。

其中之一是通过调用`call`函数对象的方法。它接受上下文（`this`函数内部的含义）和函数的参数作为其他参数。

*例子：*

```
var context = { foo: 'bar' };
function func(a, b, c) {
   console.log(this.foo);
   console.log(a, b, c);
}
func.call(context, 1, 2, 3);
//'bar'
//1 2 3 
```

`call`还有一种与它类似的方法`apply`。它接受两个参数——上下文和带有函数参数的数组。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-25T15:05:54.320

该`call`函数是所有`Function`对象的方法。它允许您将特定上下文传递给函数，本质上是设置`this`函数内部的关键字。

[call() 的 MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

# python - 来自python上json中的属性

> ID：14524474
> 
> 赞同：1
> 
> 时间：2013-01-25T15:03:27.133
> 
> 标签：python, json

我调用了一个 url，它返回一个 json 对象，其属性名为`from`. 所以当我想在 python 中得到这个时，我尝试：

```
object.from.username

$ python sample_app.py
  File "sample_app.py", line 63
    print comment.from.username
                     ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:05:16.847

`from`是 python 关键字，不应用作属性。

幸运的是，当使用`json`python 自带的库时，JSON 对象变成了字典：

```
object['from']['username'] 
```

对于您实际上确实有一个将 python 关键字用作属性的对象的情况，您必须改用该`getattr()`函数：

```
frm = getattr(object, 'from') 
```

# c++ - Qt 和静态库文件 - 如何编译

> ID：14524476
> 
> 赞同：0
> 
> 时间：2013-01-25T15:03:31.010
> 
> 标签：c++, c, windows, qt, qt5

我需要构建一个链接到静态 .lib 库（使用 /MT 编译）的 Qt5 64 位程序。我尝试将下面的行从 MD 更改为 MT：

```
QMAKE_CFLAGS_RELEASE    = -O2 -MT
QMAKE_CFLAGS_RELEASE_WITH_DEBUGINFO += -O2 -MT -Zi
QMAKE_CFLAGS_DEBUG      = -Zi –MTd 
```

在文件 D:\Qt\Qt5.0.0src\qtbase\mkspecs\win32-msvc2010\qmake.conf

并重新编译它

```
configure -prefix %CD%\qtbase -debug-and-release -opensource -platform win32-msvc2010 -opengl desktop 
```

然后nmaking它，但它失败了：

```
XPathGrammar.cpp
Generating Code...
        lib /NOLOGO  /OUT:release\WebCore.lib @C:\Users\Paul\AppData\Local\Temp\WebCore.lib.4480.3319717.jom
LINK : fatal error LNK1181: cannot open input file '.obj\release_shared\SettingsMacros.obj'
jom: D:\Qt\Qt5.0.0src\qtwebkit\Source\WebCore\Makefile.WebCore.Target.Release [release\WebCore.lib] Error 1181
jom: D:\Qt\Qt5.0.0src\qtwebkit\Source\WebCore\Makefile.WebCore.Target [release] Error 2
jom: D:\Qt\Qt5.0.0src\qtwebkit\Source\WebCore\Makefile.WebCore [sub-Target-pri-make_first-ordered] Error 2
jom: D:\Qt\Qt5.0.0src\qtwebkit\Makefile [sub-Source-WebCore-WebCore-pro-make_first-ordered] Error 2
jom: D:\Qt\Qt5.0.0src\Makefile [module-qtwebkit-make_first] Error 2 
```

似乎没有生成“SettingsMacros.obj”文件。这是为什么？

我需要在配置字符串中包含“-static”吗？我知道[Qt 不能与 /MT 相处，](http://qt-project.org/faq/answer/why_does_a_statically_built_qt_use_the_dynamic_visual_studio_runtime_librar)但我的项目需要它，否则我将无法链接那些 .lib 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:41:44.173

是的，您确实需要添加`-static`. 为我工作。

# c# - 如何使用业务对象和存储过程填充表单视图？（数据源对象/数据绑定控件）

> ID：14524478
> 
> 赞同：0
> 
> 时间：2013-01-25T15:03:35.207
> 
> 标签：c#, asp.net, data-binding

我成功地使用了一个业务对象、一个存储过程和结构来填充一个带有文本框控件列表的页面，以显示并允许编辑一些客户详细信息数据。我分别将每个文本框控件分配给结构中的一个值。

然后，我成功地使用 SqlDataSource 填充表单视图以显示相同的客户详细信息数据。

我现在想使用总线对象、存储过程和结构（或其他对象）在表单视图中显示客户详细信息数据。

下面是我如何调用业务对象来获取数据并将其返回到 Customer Details 页面的 Load 事件中的结构：

```
 CustomerDetailsStruct cd = CustomerDetailsAccess.GetCustomerDetails(customerId); 
```

如何告诉表单视图使用该结构？或者，我是否需要将数据检索到不同的对象中？

这是我最初使用 SqlDataSource 时显示客户详细信息数据的页面中的代码：

```
 <asp:FormView ID="FormView1" runat="server" DataSourceID="SqlDataSource1" CellPadding="4" DataKeyNames="CustomerID" ForeColor="#333333"> 
```

我看到有一个 DataSource 属性可用。此 MSDN 页面上的示例使用 DataSet。 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.aspx) 我还在 MSDN 上阅读了有关 ObjectDataSource 的信息。

如果我需要提供更多详细信息或更多代码，请告诉我。

我还想问一个更广泛的问题：有人可以推荐一本可以解释 DataSource 对象和 DataBound 控件以及如何将它们配对的好书或网站吗？我目前正在阅读一本书，其中有一些关于如何做一些事情的好例子。但是，有没有很好的数据绑定参考指南？

* * *

这是我的更多表单视图。

TheKingDave：我没有 DataSource 或 DataSourceID 属性，因为我不知道如何在 Page_Load 事件中使用结构或备用对象作为我的数据源，这是我的主要问题。我在 Page_Load 事件中得到了结构。我想我需要以某种方式使它成为这里的数据源：

```
 // Get the Customer Details data with the business object.
        CustomerDetailsStruct cd = CustomerDetailsAccess.GetCustomerDetails(customerId); 
```

这是 EditItemTemplate 的开始。我从使用 SqlDataSource 的表单视图中的代码复制/粘贴了它，因此我不必重新创建表。它只是一个表格，在 EditItemTemplate 中具有文本框控件，在 ItemItemplate 中具有标签。

```
 <asp:FormView ID="FormView1" runat="server"  CellPadding="4"  ForeColor="#333333">
<FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
<RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
<EditItemTemplate>

    <table cellpadding="5" class="UserDetailsTable">       
   <tr>
        <td class="UserDetailsTitleCell">Address1:</td>
        <td><asp:TextBox ID="Address1TextBox" runat="server" Text='<%# Bind("Address1") %>'>
        </asp:TextBox></td>
   </tr> 
```

这是项目模板的开始：

```
 <ItemTemplate>
    <table cellpadding="5" class="UserDetailsTable">
<tr>
    <th colspan="2">Customer Details:</th> 
</tr> 
    <tr>
        <td class="UserDetailsTitleCell">Address1:</td>
    <td class="UserDetailsTitleCell"><asp:Label ID="Address1Label" runat="server" Text='<%# Bind("Address1") %>'></asp:Label></td> 
    </tr> 
```

需要更多/其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:42:41.777

尝试这个：

```
CustomerDetailsStruct cd = CustomerDetailsAccess.GetCustomerDetails(customerId);

//FormView DataSource has to be IListSource, IEnumerable, or IDataSource
List<CustomerDetailsStruct> list = new List<CustomerDetailsStruct>();
list.Add(cd);
FormView.DataSource = list;

//Choose the proper mode (templates have to be defined) 
FormView.ChangeMode(FormViewMode.ReadOnly);
FormView.DataBind(); 
```

# java - HTML 不显示我的带有 JLabel 的 Java Applet

> ID：14524480
> 
> 赞同：1
> 
> 时间：2013-01-25T15:03:45.323
> 
> 标签：java, html, applet, jlabel

当我执行与我的小程序关联的 HTML 文件时，没有绘制任何内容并且屏幕为空。为什么会这样？如何将字符串添加到 Applet 中？

Java 小程序的源代码：

```
package m2mcom.web;
import m2mcom.entities.AutomatedTelnetClient;
import javax.swing.JApplet;
import javax.swing.SwingUtilities;
import javax.swing.JLabel;

public class Displaytext extends JApplet {
//Called when this applet is loaded into the browser.
public void init() {
    //Execute a job on the event-dispatching thread; creating this applet's GUI.
    try {
        SwingUtilities.invokeAndWait(new Runnable() {
            public void run() {
                AutomatedTelnetClient telnet = new AutomatedTelnetClient();
                String answer = telnet.request();
                JLabel lbl = new JLabel(answer);
                add(lbl);
            }
        });
    } catch (Exception e) {
        System.err.println("createGUI didn't complete successfully");
    }
}
} 
```

# security - 对用户隐藏 REST 数据

> ID：14524481
> 
> 赞同：0
> 
> 时间：2013-01-25T15:03:48.093
> 
> 标签：security, http, rest, https

使用 HTTPS 使用 REST API 时，有没有办法阻止客户端用户查看调用中的数据？

我认为 HTTPS 可以做到这一点，但是当我运行 Fiddler 时，我看到了一个安装假证书和查看请求内容的选项。

如何确保这一点？

巴特克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:02:00.837

那个“安装假证书并查看请求内容”被称为 MITM。Mitm 是中间人攻击，黑客试图将其自己的 [fake] 证书注入用户，用户使用黑客证书加密数据，黑客解密数据，存储解密数据，使用服务器证书重新加密并将其发送到服务器等

您再次保护 MITM 的唯一方法是检查证书并确保它是有效的证书，如果客户端是您自己的应用程序，您的应用程序应该存储您真实证书的序列号。

因此，只有防止 SSL MITM 是在发送请求之前存储或验证您的证书。

# c++ - 调用 C++ DLL 时在 C# 中正确设置参数

> ID：14524482
> 
> 赞同：1
> 
> 时间：2013-01-25T15:03:54.323
> 
> 标签：c++, c#-4.0, dll, interop, dllimport

我的任务是在源代码错误的旧 C++ dll 周围放置一个 C# 包装器。我确实有一些 dll 的详细信息：

```
enum DataItemType {DataItemType_String, DataItemType_Number, DataItemType_Date};

typedef struct Data_Item_Node_
{
    char *field_name;
    char *field_value;
    enum DataItemType field_type;
    struct Data_Item_Node_ *next;
} Data_Item_Node;

typedef struct Data_Item_List_
{
    Data_Item_Node *first;      // points to first item in the list
    Data_Item_Node *last;       // points to last item in the list
    long count;                 // number of data items in the list
    Data_Item_Node **index;     // sorted array of pointers to the list items
    char *pDataDumpBuffer;      // pointer to a buffer used by the [*DumpData] command
} Data_Item_List;

extern "C" SAIL_IMP_EXP BOOL WINAPI Sail_Validate(const char *sail, const char *streams, const char *inserts)

extern "C" SAIL_IMP_EXP BOOL WINAPI Sail_GetStreamAndInserts(char *sail, Data_Item_List_ *data, char *stream, char inserts[][9], int insert_count)

extern "C" SAIL_IMP_EXP LONG WINAPI Sail_GetErrorMessage(LPSTR error, DWORD len) 
```

如您所见，我需要调用 3 个方法。我创建了一个 C# 命令行包装器来测试它，并使用 DLLImport 来引用公开的方法：

```
 class Program
    {

        [DllImport("Sail_.dll")]
        public static extern bool Sail_Validate(string sail, string streams, string inserts);

        static void Main(string[] args)
        {
            string p_sail = args[0];
            string p_streams = args[1];
            string p_inserts = args[2];

            try
            {
                bool Result = Sail_Validate(p_sail, p_streams, p_inserts);

                Console.WriteLine("Result: " + Result.ToString());
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error: " + ex.Message);
            }
        }
    } 
```

到目前为止，此 C# 代码似乎适用于它调用的一个方法，但我在下一个“Sail_GetStreamAndInserts”中遇到了一些障碍，主要是使用 Data_Item_List_ 和二维数组参数。

对于如何为其余方法定义参数的任何帮助，我将不胜感激。

# jsch - Java jsch和中断后恢复文件上传？

> ID：14524489
> 
> 赞同：1
> 
> 时间：2013-01-25T15:04:13.353
> 
> 标签：jsch

我目前在我的代码中使用 com.jcraft.jsch 库，以便我可以将一个文件（或多个文件）从我的本地机器上传到某个远程机器。对于 5KB、100KB、200KB 的文件大小，我没有任何顾虑。但是，当我倾向于上传文件大小为 500MB、1GB、2GB 及以上的文件时，我有一个很大的担忧，因为互联网连接总是有可能在任一端（本地计算机或远程）失败我做了一点我自己的研究发现图书馆有一个叫RESUME的字段，它指的是“文件传输模式”，但我没有找到关于它正确使用的解释。

所以我的问题是：如果连接失败，有没有办法在修复后，文件传输从中断点继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T20:37:01.530

我只是在我的应用程序中“解决”了这个问题，并认为我会分享我学到的东西。

我研究了 RESUME 是如何工作的，发现它取决于您使用的方法。对我来说，我同时使用了 PipedInputStream 和 PipedOutputStream，因为我可能正在向本地文件传输/从本地文件传输，甚至从远程服务器传输到/从远程服务器传输。

我发现对我来说，我将我的 PipedOutputStream 提供给 get 方法，但没有提供模式（默认为 OVERWRITE），然后将我的 PipedInputStream 提供给 put 方法，参数为 RESUME。put 方法使我的 InputStream 的字节数等于我发送到的文件的当前大小。

这需要一段时间，因为我已经在推进 PipedOutputStream X 个字节数，然后 PipedInputStream 正在推进另一个 X 个字节，我得到了很大的差距。我通过查看[ChannelSftp 源代码发现了这一点](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.6/com.jcraft/jsch/0.1.41/com/jcraft/jsch/ChannelSftp.java)

当然，如果您不做与我完全相同的事情，情况会有所不同，但如果您的来源或目的地是本地的，您可能不需要担心这一点。如果你不知道你是怎么做的，我会尝试查看源代码。

我正在使用 Grails，所以这可能不适合你，但这就是我所做的

```
/*    
 * This was initially copied from
 * <a href="http://www.intelligrape.com/blog/2013/04/04/using-ftp-with-grails/">
 * http://www.intelligrape.com/blog/2013/04/04/using-ftp-with-grails/</a> for
 * the basic structure. JavaDoc and additional method were added as needed.
 *
 * @author Puneet Behl
 * @author jonathan.tinsman
 */
class FtpService {

    /**
     * Gets the file from the server and loads it into the provided output stream
     *
     * @param outputStream
     *      - the output stream to have the file loaded to
     * @param fileName
     *      - the desired file
     * @param ftpCredential
     *      -the server credentials
     */
    def load(OutputStream outputStream, String fileName, FtpCredential ftpCredential) {
        connect(ftpCredential) { ChannelSftp sftp ->
            sftp.get fileName, outputStream, new FtpMonitor()
        }
    }

    /**
     * Writes the file on the server
     *
     * @param inputStream
     *      - the input stream for writing
     * @param fileName
     *      - the file name
     * @param mode
     *      - the mode for the transfer (defaults to {@link ChannelSftp#OVERWRITE}
     * @param ftpCredential
     *      - the server credentials
     */
    def save(InputStream inputStream, String fileName, Integer mode = ChannelSftp.OVERWRITE, FtpCredential ftpCredential) {
        connect(ftpCredential) { ChannelSftp sftp ->
            sftp.put inputStream, fileName, mode
        }
    }

    /**
     * Transfers the file from the input server to the output server.
     * <p>
     * The usage of {@link PipedInputStream} and {@link PipedOutputStream} is
     * from <a href="http://ostermiller.org/convert_java_outputstream_inputstream.html">OsterMiller.org</a>
     *
     * @param fileName
     *      - the file name
     * @param inputFtpCredential
     *      - the input server
     * @param outputFtpCredential
     *      - the output server
     * @param mode
     *      - the mode for the transfer (defaults to {@link ChannelSftp#OVERWRITE}
     */
    def transfer(String fileName, FtpCredential inputFtpCredential, FtpCredential outputFtpCredential, Integer mode = ChannelSftp.OVERWRITE) {

        // To change the size of the buffer, add an int with the desired pipe
        // size. The default is 1024
        PipedInputStream input = new PipedInputStream();
        PipedOutputStream output = new PipedOutputStream(input);

        // Starting in different threads so they do not deadlock each other
        new Thread(
                new Runnable(){
                    public void run(){
                        new FtpService().load output, fileName, inputFtpCredential
                    }
                }
                ).start();
        /* 
         * only passing the mode to the "save" as the save will progress the 
         * input stream on it's own. 
         * 
         * If we pass the mode to the "load" method, then there will be a gap
         * in the data as the "load" will progress the stream xx bytes and the
         * "save" will progress it another xx bytes (the size of the existing
         * file).
         */
        save input, fileName, mode, outputFtpCredential
    }

    /**
     * Connect to the server and call the provided ChannelSftp Closure.
     *
     * @param ftpCredential
     *      - the server to connect to
     * @param closure
     *      - the closure to call
     * @param disconnectOnFinish
     *      - to disconnect the Session when the Closure is done (defaults to true)
     */
    private def connect(FtpCredential ftpCredential, Closure closure, boolean disconnectOnFinish = true) {
        Session session = null
        ChannelSftp sftp = null
        try {
            JSch jSch = new JSch()
            session = jSch.getSession ftpCredential?.username, ftpCredential?.server, ftpCredential?.port
            session.setConfig "StrictHostKeyChecking", "no"
            if (ftpCredential?.password) {
                session.password = ftpCredential?.password
            } else {
                File keyFile = new File("${grailsApplication.config.pathToKeyFile}")
                jSch.addIdentity(keyFile?.absolutePath)
            }
            session.connect()
            Channel sFtpChannel = session.openChannel "sftp"
            sFtpChannel.connect()
            sftp = sFtpChannel as ChannelSftp
            sftp.cd ftpCredential?.remoteBaseDir
            closure.call sftp
        } catch (Exception ex) {
            ex.printStackTrace()
        } finally {
            if (disconnectOnFinish) {
                sftp?.exit()
                session?.disconnect()
            }
        }
    }
} 
```

# c++ - 无法实现单例模式

> ID：14524492
> 
> 赞同：0
> 
> 时间：2013-01-25T15:04:14.787
> 
> 标签：c++, visual-studio-2010

请看下面的代码

**UIHandler.cpp**

```
#include "UIHandler.h"
#include <iostream>

using namespace std;

UIHandler::UIHandler()
{

}

UIHandler::~UIHandler(void)
{
}

UIHandler *UIHandler::getInstance()
{
    if(uiHandler==NULL)
    {
        uiHandler = new UIHandler();
    }

    return uiHandler;
} 
```

**UIHandler.h**

```
#pragma once
class UIHandler
{
public:

    ~UIHandler(void);

    static UIHandler *getInstance();

private:

    UIHandler *uiHandler();
    UIHandler();
}; 
```

我是 C++ 新手，我正在尝试在这里实现单例模式。但是，这个是错误的！它说“ `expression must be a modifiable lvalue`”，在那个地方`uiHandler = new UIHandler();`

为什么是这样？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:05:05.723

`UIHandler *uiHandler();`声明`uiHandler`为方法，而不是数据成员。将其更改为

```
static UIHandler *uiHandler; 
```

之所以`static`存在，是因为您正在从一种`static`方法访问它。

请注意，更好的方法是

```
UIHandler& UIHandler::getInstance()
{
    static UIHandler uiHandler;
    return uiHandler;
} 
```

并摆脱该成员。

不要忘记禁止复制。

# android - 使用 ScaleGestureDetector 进行无限缩放

> ID：14524493
> 
> 赞同：0
> 
> 时间：2013-01-25T15:04:17.307
> 
> 标签：android, view, scale

我正在尝试使用 ScaleGestureDetector`setScaleX`和方法来缩放视图。`setScaleY`如果您只想将视图缩放 5 到 7 倍，它可以正常工作。但是有一个大问题，你需要比原来大 20-30 的视图。ScaleGestureDetector 不考虑视图的当前比例，因此您不能无限缩放 - 不会触发 onScaleBegin。

我确定这是因为 ScaleGestureDetector 源代码中的这些行：

```
if (!mInProgress && span >= mMinSpan &&
       (wasInProgress || Math.abs(span - mInitialSpan) > mSpanSlop)) {
        ...
        mInProgress = mListener.onScaleBegin(this);
} 
```

是否有一种简单的方法可以使用 ScaleGestureDetector 将视图缩放 20-30 倍，或者是否有适用于 Android 的自定义比例检测器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:19:40.697

我不确定我明白你想要什么。`ScaleGestureDetector`简单地将用户的触摸事件转换为比例因子。

如何使用比例因子取决于您。如果您遇到限制，那么限制在于您使用比例值的方式。即您的代码正在缩放视图，而不是`ScaleGestureDetector`.

您在上面复制的代码只是将触摸倾斜应用于触摸事件，以便它不会检测到不用于缩放的触摸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T00:52:04.560

这是一个非常好用的缩放实现。我用它只需一个捏缩放手势就可以将视图放大 20 倍。

```
private final Matrix mMatrix = new Matrix();

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getPointerCount() == 2) {
        float scale = (float) Math.sqrt(getScaleX());
        float focalX = (event.getX(0) + event.getX(1)) / 2;
        float focalY = (event.getY(0) + event.getY(1)) / 2;
        mMatrix.setScale(scale, scale, focalX, focalY);
        event.transform(mMatrix);
        return mScaleGestureDetector.onTouchEvent(event);
    } 
    return false;
} 
```

在这种情况下，尺度 x 和 y 相等。为了使用不同的比例，只需将 setScale 方法的第二个参数更改为 y 轴的比例。

# radio-button - 如何在 Visual C++ 6.0 中检查单选按钮的值

> ID：14524496
> 
> 赞同：3
> 
> 时间：2013-01-25T15:04:22.170
> 
> 标签：radio-button, visual-c++-6, checked

我最近接手了一个项目，它有一个用 Microsoft Visual C++ 6.0 编写的 GUI，我并不熟悉。GUI 最初的开发者已经不在我们身边，这里没有其他人熟悉 Visual C++ 6.0。MSDN 集合显然从未安装过，而且我们缺少安装材料。[最重要的是，微软的文档站点](http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcedit98/HTML/vcstartpage.asp)似乎已关闭。

幸运的是，我不需要对 GUI 做太多工作。我现在只需要知道如何确定是否选中了单选按钮。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:12:04.027

[在此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.radiobutton.checked%28v=vs.71%29.aspx)的 Microsoft 文档中明确提到了单选按钮选中属性。希望这可以帮助。

# android - 带有 Android NDK 的标头

> ID：14524502
> 
> 赞同：4
> 
> 时间：2013-01-25T15:04:41.360
> 
> 标签：android, android-ndk

我正在尝试使用 Android NDK 编译我自己的库，但我遇到了一些问题。

这是我的 Android.mk 文件：

```
# Define vars for library that will be build statically.
include $(CLEAR_VARS)
LOCAL_MODULE     := MyLib
LOCAL_SRC_FILES  := ../../../src/mylib/utils/Timer.cpp
LOCAL_C_INCLUDES := ../../../src/mylib/

# Optional compiler flags.
LOCAL_LDLIBS     = -lz -lm
LOCAL_LDLIBS    := -llog  
LOCAL_CPPFLAGS  := -std=c++0x

include $(BUILD_SHARED_LIBRARY) 
```

当我使用“ndk-build”构建项目时，出现以下错误：

```
Clean: mylib [armeabi]
Clean: stlport_shared [armeabi]
Clean: stlport_static [armeabi]
Compile++ thumb  : mylib <= Timer.cpp
jni/../../../src/mylib/utils/Timer.cpp:1:34: fatal error: mylib/utils/Timer.hpp: No such file or directory
compilation terminated. 
```

有关信息，我将 .hpp 包括在内：

```
#include <mylib/utils/Timer.hpp> 
```

我不知道为什么找不到标题，我的库在 Xcode 和 eclipse 中工作。谢谢你的时间！

编辑：这是我的项目架构来理解我的问题： http: [//i.imgur.com/aiah6zH.jpg](http://i.imgur.com/aiah6zH.jpg) 我试图指出我的“.hpp”文件在 Android.mk 文件中的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:14:07.117

您的 LOCAL_C_INCLUDES 应该包含`../../../src/`or`../../../inc`目录以便您使用，`#include <mylib/utils/Timer.hpp>`即：

```
LOCAL_C_INCLUDES := ../../../src/ 
```

为什么不将 C 和 C++ 头文件和源文件放在 Android 项目的 jni/ 目录中，靠近 Android.mk 文件？

请参阅：[#include <filename> 和 #include "filename" 有什么区别？](https://stackoverflow.com/q/21593/313113)

这也是不正确的，因为第二个 LOCAL_LDLIBS 覆盖了当前模块中的前一个 LOCAL_LDLIBS 指令：

```
LOCAL_LDLIBS     = -lz -lm
LOCAL_LDLIBS    := -llog 
```

如果要附加到 make 指令，请使用：

```
LOCAL_LDLIBS    := -lz -lm
LOCAL_LDLIBS    += -llog 
```

或者`LOCAL_LDLIBS := -lz -lm -llog`

**编辑：如果您从 Android/jni 目录运行 ndk-build ，**使用以下 Android.mk 似乎可以工作。

 **```
LOCAL_PATH := $(call my-dir)

# first lib, which will be built statically
#
include $(CLEAR_VARS)
LOCAL_MODULE     := MyLib
LOCAL_C_INCLUDES := ../../../inc/
LOCAL_SRC_FILES  := ../../../src/mylib/utils/Timer.cpp
include $(BUILD_STATIC_LIBRARY)

# second lib, which will depend on and include the first one
#
include $(CLEAR_VARS)
LOCAL_MODULE    := MyNativeFinalSharedLib
LOCAL_LDLIBS    := -lz -lm -llog  
LOCAL_CPPFLAGS  := -std=c++0x
LOCAL_STATIC_LIBRARIES := MyLib   
include $(BUILD_SHARED_LIBRARY) 
```

此外，您忘记将 LOCAL_PATH := (call my-dir) 放在第一行以及其他一些缺少的 make 指令。

> Android.mk 文件必须以 LOCAL_PATH 变量的定义开头。它用于在开发树中定位源文件。在这个例子中，构建系统提供的宏函数'my-dir'用于返回当前目录的路径（即包含Android.mk文件本身的目录）。

（来自 android-ndk-r8d/docs/ANDROID-MK.html）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:20:53.423

强烈建议让您的`Android.mk`文件定义`$(LOCAL_PATH)`. 在你的情况下，最好的选择可能是

```
LOCAL_PATH := $(call my-dir)/../../../../src 
```

现在你可以简单地写

```
LOCAL_SRC_FILES  := mylib/utils/Timer.cpp 
```

但是对于包含，路径应该定义为相对于*当前*的路径，即`MyProject/build/Android`目录。在您的情况下，正确的路径似乎是

```
LOCAL_C_INCLUDES := ../../../inc 
```

当您`mylib`在`#include`语句中指定时：

```
#include <mylib/utils/Timer.hpp> 
```**

# c++ - 矩阵乘法后的赋值运算符和复制构造函数

> ID：14524504
> 
> 赞同：0
> 
> 时间：2013-01-25T15:04:49.763
> 
> 标签：c++, constructor, copy-constructor

复制构造函数和赋值运算符有问题。编写了乘法矩阵的代码：

```
Matrix& Matrix::operator * (const Matrix &second) const
{
    // Create result matrix
    Matrix result(Rows(), second.Columns());

    // Multiply matricies
    for (unsigned i = 0; i < Rows(); i++)
    {
         for (unsigned j = 0; j < second.Columns(); j++)
         {
             result[i][j] = 0.0;

             for (unsigned k = 0; k < Columns(); k++)
             {
                 result[i][j] += m_matrix[i][k] * second[k][j];
             }
         }
    }

    return result;
} 
```

在主代码中，我调用操作员：

```
Matrix C = A * B; 
```

然而代码在赋值之前破坏了结果变量，如何正确编写这样的代码来返回结果矩阵？复制构造函数是：

```
Matrix::Matrix(const Matrix& matrix)
{
    AllocateMatrixArray(matrix.Rows(), matrix.Columns());
    CopyMatrixData(matrix);
} 
```

赋值运算符是：

```
Matrix& Matrix::operator = (const Matrix& other)
{
    AllocateMatrixArray(other.Rows(), other.Columns());
    CopyMatrixData(other);
    return *this;
} 
```

但是我看到编译器不使用它 - 复制构造函数就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:06:44.170

您不应该返回对局部变量的引用。按照惯例`opertor*`（我的意思当然是两个参数版本）返回结果的**副本**。同样适用于其他操作，如`operator+`,`operator-`等等。引用由这些运算符的修改版本返回，例如`operator *=`,`operator +=`等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:07:59.870

您的代码返回对局部变量的引用，该变量将在函数作用域的末尾被销毁。不要这样做：

```
Matrix Matrix::operator * (const Matrix &second) const {
     // same as above
} 
```

请注意，返回值现在是 a`Matrix`而不是 a `Matrix&`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T15:51:02.747

如果你想写像 C = A*B 这样的表达式，所有的 CA 和 B 都必须是“值”。

所以返回值`operator*`must be`matrix`和 not `matrix&`，特别是如果`&`引用局部变量（如`result`），则将在`}`（因此在执行 = 之前）销毁。

也就是说，还有一些问题：

*   该示例`Matrix C = A*B`不是**赋值**：赋值发生在**已经存在**的对象的值发生更改时。但是Matrix C是根据上下文创建的：其实这里调用的是`Matrix`构造函数（本例中是拷贝构造函数）

*   可能存在内存泄漏：虽然我看不到如何处理矩阵数据，但您`operator=` 似乎分配了新空间，然后将数据复制到其中。但是包含旧数据的空间会发生什么？它是否仍然被遗忘？是由智能指针自动释放吗？

*   Similarly, just like `=` should dismiss the old data, also the class itself should dismiss its own data on destruction, hence a destructor should also be implemented. Otherwise every time a Matrix is dismissed (like the local `result`), its data will stay around.

# java - JPQL 查询：查找集合中最大的对象

> ID：14524506
> 
> 赞同：0
> 
> 时间：2013-01-25T15:05:01.590
> 
> 标签：java, hibernate, jpa, jpql

我有两个实体

```
Class A{

@OneToMany(mappedBy = "a", cascade = CascadeType.REMOVE)
private List<B> b;

private Integer credits;
//other fields
}

Class B{

@ManyToOne
@JoinColumn(name = "a_fk")
private A a;

private Integer reputations;
//other fields
} 
```

**现在我想为每个 A 选择具有最高声誉的 B。**

我目前正在做的是

```
 "select a FROM A a ORDER BY a.credits DESC"; //maximum results set to 500 
```

然后在每个 A 中找到最高的 B。

```
 for (A a: aList) {
            bList.add(Collections.max(a.getB(),new bComparator()));
        } 
```

但是这个解决方案不是很直观。

我尝试编写下面的查询，但没有给出预期的结果。

```
select b FROM B b WHERE b.reputations = (SELECT MAX(b.reputations) FROM B bInner WHERE bInner.a.id = b.a.id) ORDER BY b.a.credits DESC 
```

对优化查询有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:13:42.533

这应该是您的查询，我已经测试过了：

```
select distinct a,b
FROM A a JOIN a.b b  
WHERE b.reputations=(SELECT MAX(b2.reputations) FROM B b2 WHERE b2.a=a) 
```

# php - Ajax 文件上传仅适用于 Opera

> ID：14524509
> 
> 赞同：0
> 
> 时间：2013-01-25T15:05:13.380
> 
> 标签：php, javascript, ajax, file-upload

我尝试使用 Ajax 上传照片，编写的代码在 Opera（我的标准浏览器）中没有问题。现在我已经在其他浏览器中对其进行了测试，它们都返回错误。我的 PHP 脚本以

```
if(!empty($_FILES)) {
    //todo
} else {
    exit();
} 
```

所以我试着把`var_dump($_FILES); die();`开始看看有什么问题。他们都把这个还给了`array(0) {}`。我已经在 FireFox、Chrome、Safari（所有最新版本）、win7 上的 IE9 和 Debian 上的最新 Firefox 上对其进行了测试。最大的问题，我不明白为什么它不起作用，因为在开发人员工具和上面的所有浏览器中，我可以在正确的位置看到具有正确名称的文件。

这是我要上传的JS：

```
var photo_input1 = document.createElement('input');

photo_input1.setAttribute('type','file');
photo_input1.setAttribute('class','photo_input');
photo_input1.setAttribute('id','photo1');
photo_input1.addEventListener('change', function() {
    upload_photo(this.id,this.files[0])
});

var upload_photo = function(filename,file) {
    var data_arr = Array();
    data_arr['callback_name'] = 'upload_photo';
    upload_file(filename,file,'add_photo.php',data_arr);
}

var upload_file = function(filename,file,url,data_arr) {
    var datapack = null;
    var ajaxanswer = function() {
        try {
            if (ajax.readyState == 4) {
                if (ajax.status == 200) {
                    //todo
                } else {
                    alert('Problems:' + "\n" + ajax.statusText);
                }
            }
        } catch(e) {
        }
    }

    try {
        var ajax = new XMLHttpRequest();
    } catch(e) {
        try {
            var ajax = new ActiveXObject("Msxml2.XMLHTTP");
        } catch(e) {
            try {
                var ajax = new ActiveXObject("Microsoft.XMLHTTP");
            } catch(e) {
                return false;
            }
        }
    }

    if(ajax) {
        if(typeof url != 'undefined') {
            datapack = new FormData;
            datapack.append(filename,file);
            if(typeof data_arr != 'undefined') {
                for(key in data_arr) {
                    datapack.append(key, data_arr[key]);
                }
            }
            ajax.open('POST',url, true);
            ajax.setRequestHeader('Content-type', 'multipart/form-data');
            ajax.onreadystatechange = ajaxanswer;
            ajax.send(datapack);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:32:02.823

无法使用 ajax 上传文件。正常的做法是使用 iframe 内部并使用 iframe 提交表单。[您可以在此处](http://www.ajaxf1.com/tutorial/ajax-file-upload-tutorial.html)阅读其中一种方式。

您也可以阅读[此答案](https://stackoverflow.com/questions/2320069/jquery-ajax-file-upload#answer-2320097)。

> XHR2 支持通过 AJAX 上传文件。例如通过[FormData](https://developer.mozilla.org/en/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)对象，但不幸的是，所有/旧浏览器都不支持它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:32:38.627

FormData 仅适用于 Opera v12 及更高版本，与其他相对较新的浏览器一样： http: [//caniuse.com/#search=FormData](http://caniuse.com/#search=FormData)

您可以尝试使用类似 Ajax 的文件上传：[https](https://github.com/valums/file-uploader) ://github.com/valums/file-uploader 。正如 Arun P Johny 所提到的，没有使用 Ajax 上传，但您可以使用一些解决方法，例如在这种情况下隐藏 iframe。

# ios - 升级到 MonoTouch 6 后自动旋转停止工作

> ID：14524510
> 
> 赞同：2
> 
> 时间：2013-01-25T15:05:14.163
> 
> 标签：ios, xamarin.ios, uikit, xamarin, screen-rotation

我用 MonoTouch 5 做了一个项目。升级到 MonoTouch 6 后，我的 UIViewControllers 不再自动旋转。这些托管在 tabviewcontroller 中。我收到这个警告：

```
ShouldAutorotateToInterfaceOrientation(MonoTouch.UIKit.UIInterfaceOrientation)' overrides obsolete member `MonoTouch.UIKit.UIViewController.ShouldAutorotateToInterfaceOrientation(MonoTouch.UIKit.UIInterfaceOrientation)'. Add the Obsolete attribute to ShouldAutorotateToInterfaceOrientation(MonoTouch.UIKit.UIInterfaceOrientation)' (CS0672) 
```

但是在我调试时仍然会调用该方法。新的`ShouldAutorotate`永远不会被调用。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:26:37.430

可能有几个原因。其中之一是您应该（如果还没有）[`RootViewController`](https://bugzilla.xamarin.com/show_bug.cgi?id=7361)在您的 AppDelegate 中设置（[此处](http://yusinto.blogspot.co.uk/2012/08/ios-6-auto-rotate-and-orientation.html)的另一个链接）。在 iOS6 之前，这不是必需的。

另一个是开始使用新的 iOS6 API，而不保留早期 iOS 版本的回退。这将符合您的评论，即**适用于 6.0 但不适用于 5.1**。

请注意，由于您仍然以 iOS 5.x 为目标，您可以放心地[忽略](https://stackoverflow.com/a/12805880/220643)过时的警告。iOS 6 引入了新的 API 来处理旋转，但它会*自动*回退到旧 API 以保持与现有应用程序的兼容性。

这也意味着，如果您开始使用新的（仅限 iOS6）API，那么您将需要自己处理旧 API ，**否则旋转将不适用于 iOS 5.x。**

老实说，我认为这是一场测试噩梦——你最好让 iOS 处理这个并保留一个单一的代码路径来处理旋转。这就是为什么我强烈建议您继续使用旧 API，直到您的部署目标最低版本变为 iOS 6.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T07:56:42.927

升级后我遇到了同样的问题，我[在这里](http://yusinto.blogspot.com/2012/08/ios-6-auto-rotate-and-orientation.html)得到了问题的答案。这是问题的核心，引用自链接：

> 应用程序窗口应该在应用程序启动结束时有一个根视图控制器
> 
> 因此，如果以前像我一样，您在 main.cs 的 FinishedLaunching(UIApplication app) 方法中有这个：
> 
> window.AddSubview(mainVC.View);
> 
> 用这个替换它：
> 
> window.RootViewController = mainVC;

就是这样！快乐的时光！旋转再次起作用。:) 至少它为我解决了这个问题。

我不知道这个导致应用程序出错的小事情是苹果的错还是 Monotouch/Xamarin 的错，但我认为 Xamarin 团队应该为此做点什么。当然这是可以在编译时检测和纠正的东西吗？

反正。希望这些信息可以帮助其他人节省这个问题花费我的时间！

# ajax - 网页的连接状态小部件

> ID：14524516
> 
> 赞同：2
> 
> 时间：2013-01-25T15:05:34.023
> 
> 标签：ajax, web, connection

我正在开发一个 Ajax-heavy Web 应用程序，并且在用户的网络连接不稳定的情况下，我们收到了关于不稳定行为的投诉。作为处理该问题的第一步，我们想在受影响页面的右上角添加一个网络状态小部件。

最简单的版本是让脚本每隔 n 秒通过 Ajax ping 服务器，并根据是否成功显示绿灯/红灯；这应该很容易实现。但是，是否有可用的小部件可以执行类似的操作，可能采用更复杂或信息更丰富的方法？我最初的谷歌搜索没有出现任何结果，所以我在这里查看是否有人知道这个问题的任何好的现有解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:25:38.707

一些可能有帮助的链接。

*   [检测到 Internet 连接处于脱机状态？](https://stackoverflow.com/questions/189430/javascript-how-to-detect-that-the-internet-connection-is-offline)如果您决定创建自己的问题，或者它可能会直接给出答案，这个问题可能会很有帮助。有很多有用的答案。
*   [如何在进行 jQuery Ajax 调用时检测您的服务器是否已关闭](http://maxheapsize.com/2010/04/26/how-to-detect-if-your-server-is-down-when-making-jquery-ajax-calls/)- 也可能证明对自制解决方案很有帮助。
*   [检查是否存在使用 Javascript 的 Internet 连接？](https://stackoverflow.com/questions/2384167/check-if-internet-connection-exists-with-javascript)- 更多关于简单 AJAX 解决方案的好建议。
*   [在 HTML 5 中检测离线状态](http://ednortonengineeringsociety.blogspot.com/2010/10/detecting-offline-status-in-html-5.html)- 可能会有所帮助。

根据我的发现，我认为问题中描述的简单 AJAX 解决方案效果最好。我没有看到任何已建立的小部件。尽管如此，我仍然会查看链接中的一些建议/答案，因为对于不同的情况有许多聪明的解决方案。

# java - 如何从另一种方法访问数组中的元素？

> ID：14524518
> 
> 赞同：0
> 
> 时间：2013-01-25T15:05:37.467
> 
> 标签：java, arrays

我正在尝试在一种方法中实现一种算法，该方法接受两个类型的列表，`studentlist`我需要从构造函数方法访问数组，`studentList`以获取大小和学生人数以在列表之间进行比较。

例如

```
for (int i = 0; i < L1.studentID.length-1; i++) {
    for (int j = 0; j < L2.studentID.length-1; j++) {
        if (L1.studentID[i] = L2.studentID[j]) {
            num++; }}} 
```

大多数构造函数，不包括用于访问文件中列表而不是随机生成的第二个构造函数：

```
studentID=new int[size];
boolean[] usedID=new boolean[IDrange];
for (int i=0;i<IDrange;i++) usedID[i]=false;
for (int i=0;i<size;i++) {
    int t;
    do {
    t=(int)(Math.random()*IDrange);
    } while (usedID[t]);
    usedID[t]=true;
    studentID[i]=t; } 
```

大小（list.studentID.length 或者我可以使用内置的 list.numberOfStudents）看起来不错，但是我在获取数组元素本身时遇到了麻烦。我想我可以这样做`list.studentID[i]`，但我得到一个“类型不匹配：无法从 int 转换为 boolean”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:10:21.507

> '类型不匹配：无法从 int 转换为 boolean'

你得到一个，`int`因为你正在做一个赋值：`=`运算符。要比较两个整数，您需要使用`==`运算符。

尝试

```
if (L1.studentID[i] == L2.studentID[j]) { 
```

你会得到一个布尔值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T15:10:25.310

你的问题在这里：

```
if (L1.studentID[i] = L2.studentID[j]) 
```

您正在对 to 进行归因，`L2.studentID[j]`然后`L1.studentID[i]`将 的值传递`L1.studentID[i]`给`if`

java 中的 if 明确需要一个布尔值。

你要么想做：

```
if (L1.studentID[i] == L2.studentID[j]) 
```

或者

```
if ((L1.studentID[i] = L2.studentID[j])!=0) 
```

您当前拥有的代码与执行以下操作相同：

```
L1.studentID[i] = L2.studentID[j];
if (L1.studentID[i]){  <-- this won't work because L1.studentID[i] is an int and the if expects a boolean
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T15:11:08.553

你应该像这样比较它们

```
if (L1.studentID[i] == L2.studentID[j]) 
```

否则，您将 L2 归因于 L1。

# python - 在保存对话框wxpython中实现“另存为”

> ID：14524525
> 
> 赞同：3
> 
> 时间：2013-01-25T15:05:49.327
> 
> 标签：python, wxpython

我有一个保存例程，应该以下列方式提示用户：

*   如果当前选择的文件名存在，提示覆盖
*   如果当前选择的文件名是空的（即“”），设置一个对话框要求用户插入文件名
*   如果当前选择的文件名不存在，请保存！

我的代码目前如下所示，但我觉得应该有更好的方法来做到这一点。就像现在一样，提示用户选择“是，否，取消”的对话框，但我希望它是“是，另存为，取消”。我真的找不到任何方法将“否”按钮更改为“另存为”按钮，该按钮会打开一个对话框，用户可以在其中插入所需的文件名。有什么改进的建议吗？

```
def saveProject(window):

if os.path.exists(window.getGlobalSettings().getCurrentFileName()): #File exists from before   
    dlg = wx.MessageDialog(window,
                "Overwrite existing project file " + window.getGlobalSettings().getCurrentFileName() + "?",
                "Overwrite existing project file",
                wx.SAVE|wx.CANCEL|wx.ICON_QUESTION)

    result = dlg.ShowModal()
    dlg.Destroy()

    if result == wx.ID_YES:
        save(window,currentFileName)
        return True
    elif result == wx.ID_SAVEAS:
        #TODO: do shit here
        return False
    elif result == wx.ID_NO:
        return False
    elif result == wx.ID_CANCEL:
        return False

elif window.getGlobalSettings().getCurrentFileName == "":
    #TODO: do shit here
    return False

else:
    save(window,window.getGlobalSettings().getCurrentFileName())
    return True 
```

**更新**

代码成功改成：

```
def saveProject(window):

dlg = wx.FileDialog(window, "Save project as...", os.getcwd(), "", "*.kfxproject", \
                    wx.SAVE|wx.OVERWRITE_PROMPT)
result = dlg.ShowModal()
inFile = dlg.GetPath()
dlg.Destroy()

if result == wx.ID_OK:          #Save button was pressed
    save(window,inFile)
    return True
elif result == wx.ID_CANCEL:    #Either the cancel button was pressed or the window was closed
    return False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:11:32.110

您使用了错误的对话框类型。改用[FileDialog](http://www.wxpython.org/docs/api/wx.FileDialog-class.html)：

*   它已经包含“如果文件将被覆盖，则提示确认”功能`wx.FD_OVERWRITE_PROMPT`
*   这就是其他人都使用的，所以用户会期待这种对话，当他们得到其他东西时会感到困惑

我找不到在对话框中将“保存”替换为“另存为”的方法（它只有`wx.FD_SAVE`），但大多数人不会注意到这一点。

# three.js - 三：如何获得自定义形状的平滑边角

> ID：14524533
> 
> 赞同：0
> 
> 时间：2013-01-25T15:06:09.130
> 
> 标签：three.js, webgl

我创建了一个自定义形状 ![自定义形状](../Images/7e3732db9b0a171f45d946ae7de2422e.png)

我如何给它一些圆润的边缘，让它看起来更自然。

在不改变几何形状的情况下，使用细分似乎不是一个合适的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:07:35.010

如果细分不适合您，则在 3D 编辑器（如[Blender](http://www.blender.org/)、3dsmax、C4D、maya 等）中创建几何体并应用倒角修改器对边缘进行倒角可能会更简单。然后，您应该能够对模型进行三角测量并导出一个 obj 以供 three.js 使用。

这比移植（或从头开始编写）three.js 的通用几何倒角修改器更快

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:39:34.567

使用 antialias 参数创建渲染器实例，将其设置为 true。

```
renderer = new THREE.WebGLRenderer({ antialias: true }) 
```

# ios - lldb 断点，加载了 nib 但没有得到 UITableView

> ID：14524536
> 
> 赞同：0
> 
> 时间：2013-01-25T15:06:12.727
> 
> 标签：ios, uitableview, pushviewcontroller, lldb

我有一个没有笔尖的应用程序。它的rootviewcontroller 是一个tableviewcontroller。我让它推送到第二个 tableviewcontroller，它控制一个 detailview。就在本周早些时候，我成功地将它推送到了下一个 tableviewcontroller。几天后（并且可能保存了错误的版本），

我得到一个

**(lldb)**在我选择表项时在 pushViewController 方法处设置断点。我启用了所有异常的断点。如果我再按两次播放按钮，我会在输出框中得到这个：

" **** 由于未捕获的异常 'NSInternalInconsistencyException' 导致应用程序终止，原因：'-[UITableViewController loadView] 加载了 "TopicsDetailViewController" nib 但没有获得 UITableView。'"**

这里有什么问题还是我需要在我的项目中寻找其他地方？

这是在我的标题界面中：

```
 TopicsDetailViewController *tdvController; 
```

:) 这是我的 didSelectRowAt...

```
 tdvController = [[TopicsDetailViewController alloc] init];

             tdvController.aFeed = afeed;
    [self.navigationController pushViewController:tdvController animated:YES];
    tdvController = nil; 
```

谢谢，如果我叫错了树，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:12:10.610

如果我理解正确，接口文件中的 tdvController 声明的名称与获取异常的实例方法中的 tdvController 相同。

如果您的意图是在此实例方法中创建和使用实例变量，请不要再次声明它，只需执行以下操作：

self.tdvcController = [[TopicsDetailViewController alloc] init];

这是在堆上创建对象。

如果您打算在此实例方法中使用 TopicsDetailViewController 类型的局部变量而不是 iVar，则将局部变量重命名为其他变量。

# facebook - 如何设置测试 Facebook 帐户？

> ID：14524537
> 
> 赞同：0
> 
> 时间：2013-01-25T15:06:13.510
> 
> 标签：facebook, user-accounts

我们开发了一个网站，允许用户使用他们的 Facebook 凭据订阅服务。

我们如何创建可用于执行此功能的最终用户测试用例的测试 Facebook 帐户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:10:09.320

您可以通过 Graph API 创建测试用户。您不应该将他们称为“假”用户，因为这有一些负面含义；Facebook 积极细读并关闭虚假账户。我相信您所说的是用于测试 Facebook 应用程序的帐户...

[文档](https://developers.facebook.com/docs/test_users/)详细介绍了如何通过 api 创建测试用户-

```
https://graph.facebook.com/APP_ID/accounts/test-users?
  installed=true
  &name=FULL_NAME
  &locale=en_US
  &permissions=read_stream
  &method=post
  &access_token=APP_ACCESS_TOKEN 
```

您需要在请求中替换您自己的所有数据，您将得到的响应应该如下所示 -

```
{ 
  "id": "1234...",  
  "access_token":"1234567..." , 
  "login_url":"https://www.facebook.com/platform/test_account..."
  "email": "example...@tfbnw.net",
  "password": "1234..."
} 
```

然后，您可以使用该用户凭据来测试您的应用程序身份验证过程和功能。

除了通过 api 创建测试帐户外，您还可以使用应用程序仪表板中“角色”部分下的界面 -`https://developers.facebook.com/apps/APP_ID/roles`

> ![](../Images/8e4e4b915ccbc0932cc7650668ba380b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:57:02.427

设置测试帐户没有问题。终于找到了让帐户与网站正确交互的参数。

干杯。

# android - 识别数位板位置

> ID：14524546
> 
> 赞同：0
> 
> 时间：2013-01-25T15:06:35.930
> 
> 标签：android

我想建立一个系统，其中平板电脑沿着 1.5 米的轨道移动，有 10 个站点。用户可以沿着轨道将平板电脑从一个站点移动到另一个站点。为此提出一个问题：

应用程序可能通过什么方式识别：“平板电脑已到达位置 #10”。加速度传感器无法解决这个问题。我想在每个站点上都安装一个 NFC 终端，但这既复杂又昂贵。

你知道平板电脑如何识别它已经移动了吗？顺便说一句，是否有可能取消主页和电源按钮？

谢谢，最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:21:38.533

也许您可以使用磁传感器并在每个站点上放置磁铁来做到这一点。
或者您可以使用相机检测将放置在每个站点上的二维码或彩色方块。

您无法抑制 Home 按钮的效果。
对于电源按钮，尝试通过覆盖方法拦截它`onKeyEvent`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:41:33.613

> 我想在每个站点上都安装一个 NFC 终端，但这既复杂又昂贵。

每个 NFC 标签的成本远低于 1 美元。假设您的平板电脑支持 NFC，那么这些应该可以工作，假设您可以将标签放置在正确的位置，这样当平板电脑在正确的位置时，标签就位于平板电脑上 NFC 天线所在位置的下方。

> 你知道平板电脑如何识别它已经移动了吗？

NFC 可能是最简单和最便宜的选择。

> 顺便说一句，是否有可能取消主页和电源按钮？

下载 Android 源代码，根据需要对其进行修改，将结果编译成 ROM 模块，然后将其安装在平板电脑上。

# java - 回复不会从回复队列中消耗

> ID：14524548
> 
> 赞同：0
> 
> 时间：2013-01-25T15:06:41.567
> 
> 标签：java, jms, apache-camel, fuseesb, jbossfuse

我正在将带有 InOut 模式的消息发送到 JMS 队列，并将 replyTo 设置为预定义的队列。有时一切正常，有时骆驼不会从该队列中读取回复并因 TimedOutException 而失败。有时我可以在回复队列中看到 2 个或更多消费者（使用 AMQ Web 控制台），但骆驼不会消费它。

当我在回复队列上看到一个消费者（使用 AMQ Web 控制台）时，一切正常
，当我在回复队列上看到许多消费者（使用 AMQ Web 控制台）时，camel 不会从该队列读取回复并因 TimedOutException 而失败。

环境：保险丝 ESB

**Java 代码**

```
from("activemq:spirit.adapter.producer.shippingorder.commands") 
.id("router-Shipping-Order-Commands") 
.log(LoggingLevel.INFO, "Transport1", "router-Shipping-Order-Commands request: ${body}")
.to("activemq:transport.consumer.shippingorder.commands?replyTo=tra‌nsport.prod‌ucer.shippingorder.event&replyToType=Exclusive&requestTimeout=120000")‌​
.log(Logg‌​ingLevel.INFO, "Transport1", "router response: ${body}"); 
```

**活动MQ配置**

```
<bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
<property name="brokerURL" value="tcp://10.10.40.94:61616"/>
 </bean>

 <bean id="pooledConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory"
    init-method="start" destroy-method="stop">
    <property name="maxConnections" value="1" />
    <property name="connectionFactory" ref="jmsConnectionFactory" />
 </bean>

 <bean id="jmsConfig" class="org.apache.camel.component.jms.JmsConfiguration">
    <property name="connectionFactory" ref="pooledConnectionFactory" />
 </bean>

  <bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="configuration" ref="jmsConfig" />
  </bean> 
```

此配置写在 camel-context.xml 文件中，在同一个文件中还有另一个用于另一个路由的 activemq 配置

您能否提一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:09:44.350

你能发布你正在使用的activemq配置吗？例如，确保您在池上配置了 init 和 destroy 方法，以便它可以正确启动|停止，如此处所述：http: [//camel.apache.org/activemq](http://camel.apache.org/activemq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:13:52.390

大家好 - 问题是由 camel-jms 2.9.x
中的一些错误引起的，该错误在 Fuse ESB 7.0.1 中提供并在 Fuse ESB 7.1.0 中解决

# android - CursorAdapter 实现 Filterable

> ID：14524554
> 
> 赞同：2
> 
> 时间：2013-01-25T15:06:50.240
> 
> 标签：android, android-listview, android-cursoradapter

我有一个使用字母索引器的自定义 CursorAdapter 类，我想实现可过滤，但我在让它正常运行时遇到了一些问题。

```
 c = db.selectData();

    lv = (ListView) findViewById(android.R.id.list);
    searchTerm = (EditText) findViewById(R.id.inputSearch);

    lv.setFastScrollEnabled(true);

    adapter = new MyCursorAdapter(getApplicationContext(), R.layout.rowlayout, c, new String[]{"_id, name, company, job_title"},
            new int[]{R.id.company, R.id.job_title, R.id.name});

    adapter.setFilterQueryProvider(new FilterQueryProvider() {
        public Cursor runQuery(CharSequence constraint) {
            // Search for states whose names begin with the specified letters.
            Cursor cursor = db.searchAttendees(constraint.toString());
            return cursor;

        }
    });

    lv.setAdapter(adapter);

    getListView().setTextFilterEnabled(true);

    searchTerm.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            System.out.println("Text ["+s+"]");
            adapter.getFilter().filter(s.toString());
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void afterTextChanged(Editable s) {
        }
    });

  } 
```

这是 MyCustomAdapter 类

```
 public class MyCursorAdapter extends CursorAdapter  implements SectionIndexer, Filterable
{

    AlphabetIndexer mAlphabetIndexer;

    public MyCursorAdapter(Context context, int simpleListItem1,
            Cursor cursor, String[] strings, int[] is)
    {
        super(context, cursor);
        mAlphabetIndexer = new AlphabetIndexer(cursor,
                cursor.getColumnIndex("name"),
                " ABCDEFGHIJKLMNOPQRTSUVWXYZ");
        mAlphabetIndexer.setCursor(cursor);//Sets a new cursor as the data set and resets the cache of indices.

    }

    /**
     * Performs a binary search or cache lookup to find the first row that matches a given section's starting letter.
     */
    @Override
    public int getPositionForSection(int sectionIndex)
    {
        return mAlphabetIndexer.getPositionForSection(sectionIndex);
    }

    /**
     * Returns the section index for a given position in the list by querying the item and comparing it with all items
     * in the section array.
     */
    @Override
    public int getSectionForPosition(int position)
    {
        return mAlphabetIndexer.getSectionForPosition(position);
    }

    /**
     * Returns the section array constructed from the alphabet provided in the constructor.
     */
    @Override
    public Object[] getSections()
    {
        return mAlphabetIndexer.getSections();
    }

    @Override
    public Cursor runQueryOnBackgroundThread(CharSequence constraint) {
        //What to do here?

    }

    /**
     * Bind an existing view to the data pointed to by cursor
     */
    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        TextView name = (TextView)view.findViewById(R.id.name);
        name.setText(cursor.getString(
                cursor.getColumnIndex("name")));
        TextView company = (TextView)view.findViewById(R.id.company);
        company.setText(cursor.getString(
                cursor.getColumnIndex("company")));
        TextView jobTitle = (TextView)view.findViewById(R.id.job_title);
        jobTitle.setText(cursor.getString(
                cursor.getColumnIndex("job_title")));
    }

    /**
     * Makes a new view to hold the data pointed to by cursor.
     */
    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        LayoutInflater inflater = LayoutInflater.from(context);
        View newView = inflater.inflate(
                R.layout.attendee_item_row, parent, false);
        return newView;
    } 
```

我知道我需要使用 runQueryOnBackgroundThread 但我不知道我打算在这个方法中实现什么。有人可以在这里帮助我吗？或者指出一些例子的方向？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T15:49:23.357

> 我知道我需要使用 runQueryOnBackgroundThread 但我不知道我打算在这个方法中实现什么。

如果您`FilterQueryProvider`在 the 上设置 a ，`CursorAdapter`那么您不会覆盖该方法（默认情况下会调用 的`runQuery`方法`FilterQueryProvider`）。当您想要过滤适配器时，只需调用`getFilter().filter(constraint)`为其提供新约束的方法。

# c++ - 指向函数成员的已删除指针的类型

> ID：14524556
> 
> 赞同：1
> 
> 时间：2013-01-25T15:06:55.527
> 
> 标签：c++, c++11, function-pointers

类型：

```
std::remove_pointer<int(*)(int)>::type 
```

是`int(int)`。这段代码：

```
#include <iostream>
#include <type_traits>

using namespace std;

int main()
{
   cout << boolalpha;
   cout << is_same<remove_pointer<int(*)(int)>, int(int)>::value;
   cout << endl;
} 
```

打印“真实”。但是，“函数成员”的（书面）类型是什么？

```
#include <iostream>
#include <type_trais>

using namespace std;

struct A {};

int main()
{
    cout << boolalpha;
    cout << is_same<remove_pointer<int(A::*)(int)>, int(int)>::value;
    cout << endl;
} 
```

返回`false`。诸如`int A::(int)`抛出编译错误（无效类型）之类的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:10:37.493

指向成员的指针不是指针。

`remove_pointer`不会改变类型。

*   演示：http: [//ideone.com/OiGGpf](http://ideone.com/OiGGpf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:16:10.830

它是这样的：非成员类型是对象或函数类型：

```
T = int;                 // object type
T = double(char, bool)   // function type 
```

对于非静态类成员，您只能有*指向成员*类型的指针。这些是以下形式：

```
class Foo;

PM = U Foo::*;           // pointer to member type 
```

问题是什么`U`：

```
U = int                 =>  PM = int Foo::*                  // pointer-to-member-object
U = double(char, bool)  =>  PM = double (Foo::*)(char, bool) // pointer-to-member-function 
```

“指向成员的指针”不是指针，因此您不能从中“删除指针”。充其量你可以得到底层类型，即从`PM = U Foo::*`to `U`。据我所知，不存在这样的特征，但很容易编造出来：

```
template <typename> struct remove_member_pointer;

template <typename U, typename F> struct remove_member_pointer<U F::*>
{
    typedef U member_type; 
    typedef F class_type;
}; 
```

# python - MS Word 分隔符

> ID：14524557
> 
> 赞同：0
> 
> 时间：2013-01-25T15:07:01.907
> 
> 标签：python, ms-word, character

我只是想格式化一些输出，以便我可以轻松地将其复制到剪贴板和预先格式化的 Microsoft Word 文档（表格）中。

我想出的`\t`字符是从数据单元格到数据单元格的分隔字符，以及`\n`一个新的数据行。我遇到的麻烦是当我想要一个单元格内的换行符时。

我已将表格单元格的内容复制到编辑器中，并进行了十六进制转储，导致`0a20`（新的换行符和数据链接空格）。我试图在我想要一行的末尾用这些字符输出我的数据，但是当我将它复制到 word 中时，它总是跳到下一个表格行。

任何想法它可能是哪个角色？还是将其输出到文件并从那里复制的问题？

# symfony - Twig 的自定义过滤器不起作用

> ID：14524559
> 
> 赞同：4
> 
> 时间：2013-01-25T15:07:04.293
> 
> 标签：symfony, twig

我从文档中创建了一个简单的 Twig 过滤器：

```
public function getFilters() {

        return array(
            'price' => new \Twig_Filter_Method($this, 'priceFilter'),
        );
    }

    public function priceFilter($number, $decimals = 0, $decPoint = '.', $thousandsSep = ',')
    {
        $price = number_format($number, $decimals, $decPoint, $thousandsSep);
        $price = '$' . $price;

        return $price;
    } 
```

它已在配置中注册（因为在该文件中我有一个运行良好的功能）：

```
services:
    sybio.twig_extension:
        class: %sybio.twig_extension.class%
        tags:
            - { name: twig.extension } 
```

但它不起作用，说`The filter "price" does not exist`。怎么来的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T07:31:37.057

几件事首先确保您在 twig 类中具有此功能

```
public function getName()
    {
        return 'acme_extension';
    } 
```

其次尝试将其更改为完整的类名以进行调试，然后您可以更改它

`class: %sybio.twig_extension.class%`至`class: Acme\DemoBundle\Twig\AcmeExtension`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T07:47:37.140

可能您可以使用我的简单示例。

类过滤器：

```
namespace Project\Bundle\Twig;

class Price extends \Twig_Extension
{
    public function getFilters()
    {
        return array(
            'price' => new \Twig_Filter_Method($this, 'priceFilter'),
        );
    }

    public function priceFilter($arg)
    {
        return number_format($arg);
    }

    public function getName()
    {
        return 'price';
    }
} 
```

配置：

```
services:
    bundle.twig.price:
        class: Project\Bundle\Twig\Price
        tags:
            - { name: twig.extension } 
```

# web - 无法使用 https 连接在 chrome 中下载 jpg 文件

> ID：14524563
> 
> 赞同：1
> 
> 时间：2013-01-25T15:07:15.957
> 
> 标签：web, https, http-headers

我正在创建一个按钮，当您单击它时将下载一个 jpg 文件。我所做的是重定向到指向 img 文件的超链接，并使用下面的代码在那里设置 content-type 和 content-disposition 标头

```
 header('Content-Description: File Transfer');
    header('Content-Type: image/jpeg' );
    header('Content-Length: ' . filesize($fullpath));
    header('Content-Disposition: attachment; filename=' . basename($filename));
    readfile($fullpath); 
```

$fullpath 是 jpg 文件的物理位置

它在我使用http连接的开发网站的chrome IE和firefox中运行良好。

但是当我把它放在使用 https 连接的实时网站时，IE 和 firefox 仍然可以正常工作，但 chrome 有时可以工作，有时它会显示一个带有混乱字符串的页面，而不是下载 jpg 文件。我想也许 chrome 无法识别 jpg 文件的 MIME 类型并将其视为纯文本。这很奇怪（有时它可以识别 jpg 文件并下载它，有时不能）。有没有人以前遇到过同样的问题或有任何想法来解决这个问题？

# c - WinCE 中的 iMX6Q NAND 启动问题

> ID：14524567
> 
> 赞同：1
> 
> 时间：2013-01-25T15:07:37.890
> 
> 标签：c, visual-studio, embedded, storage, windows-ce

我正在尝试`eboot.nb0`从 NAND 启动。(Micron, `MT29F4G08ABBDA`) 在 WinCE7 中。处理器：`i.MX6Q`

我已经使用linux成功地`u-boot.bin`从 NAND启动。`kobs-ng tool`另外，如果我使用 modified`eboot.nb0`而不是`u-boot.bin`in `kobs`，它可以毫无问题地启动。

但是当我使用`MFGTool`（在 WinCE 中）进行闪烁`eboot.nb0`时，它没有启动。

以下是我使用`kobs`（linux）进行闪烁时的 nanddump 输出：

中央银行：

```
0x00000000: 00 00 00 00 00 00 00 00 00 00 00 00 cf fc ff ff
0x00000010: 46 43 42 20 00 00 00 01 50 3c 19 06 00 00 00 00
0x00000020: 00 08 00 00 40 08 00 00 40 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00 04 00 00 00 00 02 00 00
0x00000040: 00 02 00 00 04 00 00 00 0a 00 00 00 03 00 00 00
0x00000050: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x00000060: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 02 00 00 00 0b 00 00 01 01 00 00
0x00000080: 01 01 00 00 00 01 00 00 cf 07 00 00 00 00 00 00
0x00000090: 00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x000000a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x000000c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
```

DBBT：

```
0x00080000: 00 ff ff ff ff ff ff ff ff ff 00 00 00 00 44 42
0x00080010: 42 54 00 00 00 01 00 00 00 00 00 00 00 00 00 00
0x00080020: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0x00080030: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
```

在第`eboot.nb0`200 页。

在这里，为什么我们将前 12 个字节设为零？（`METADATA_SIZE`设置为 10）。为什么要加两个零？

在 WinCE 中（使用 MFGTool）：

FCB：[元数据：`ff ff ff ff ff ff fe ff ff ff`]（元数据只有 10 个字节）

```
75      b8      fe      ff
46      43      42      20
0       0       0       1
50      3c      19      6
0       0       0       0
0       8       0       0
40      8       0       0
40      0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
4       0       0       0
0       2       0       0
0       2       0       0
4       0       0       0
a       0       0       0
3       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
d8      f9      8a      d9
11      0       0       0
0       2       0       0
40      3       0       0
40      1       0       0
40      1       0       0
0       1       0       0
cf      7       0       0
0       0       0       0
0       8       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
0       0       0       0
44      cd      ab      ef
d4      84      a9      ef
ff      ff      ff      ff
ff      ff      ff      ff
ff      ff      ff      ff 
```

DBBT：

```
0       0       0       0
44      42      42      54
0       0       0       1
0       0       0       0
0       0       0       0 
```

并`eboot.nb0`在`200`页面。

以下是 nandtype 信息结构：

```
//MT29F4G08ABBDAHC
    {
       {NAND, 4096, 2048 * 64, 64, 2048},           //FlashInfo   fi;
       {0x2C, 0xAC, 0x90, 0x15},                    //BYTE        NANDCode[NANDID_LENGTH]
        3,                                          //BYTE        NumBlockCycles
        5,                                          //BYTE        ChipAddrCycleNum
        8,                                          //BYTE        DataWidth
        1,                                          //BYTE        BBMarkNum
        {0},                                        //BYTE        BBMarkPage
        6,                                          //BYTE        StatusBusyBit
        0,                                          //BYTE        StatusErrorBit
        64,                                         //WORD        SpareDataLength
        0x70,                                       //BYTE        CmdReadStatus
        0x00,                                       //BYTE        CmdRead1
        0x30,                                       //BYTE        CmdRead2
        0x90,                                       //BYTE        CmdReadId
        0xff,                                       //BYTE        CmdReset
        0x80,                                       //BYTE        CmdWrite1
        0x10,                                       //BYTE        CmdWrite2
        0x60,                                       //BYTE        CmdErase1
        0xD0,                                       //BYTE        CmdErase2
        {80, 60, 25, 6}                            //NANDTiming  timings
} 
```

下面是 BootBlock 结构：

```
typedef struct _BootBlockStruct_t
{
    UINT32    m_u32Checksum;         //!< First fingerprint in first byte.
    UINT32    m_u32FingerPrint;      //!< 2nd fingerprint at byte 4.
    UINT32    m_u32Version;          //!< 3rd fingerprint at byte 8.
    union
    {
        struct
        {         
            NAND_Timing_t   m_NANDTiming;                   //!< Optimum timing parameters for Tas, Tds, Tdh in nsec.
            UINT32        m_u32Reserved;                  //mx28 needs a dword reservation

            UINT32        m_u32DataPageSize;              //!< 2048 for 2K pages, 4096 for 4K pages.
            UINT32        m_u32TotalPageSize;             //!< 2112 for 2K pages, 4314 for 4K pages.
            UINT32        m_u32SectorsPerBlock;           //!< Number of 2K sections per block.
            UINT32        m_u32NumberOfNANDs;             //!< Total Number of NANDs - not used by ROM.
            UINT32        m_u32TotalInternalDie;          //!< Number of separate chips in this NAND.
            UINT32        m_u32CellType;                  //!< MLC or SLC.
            UINT32        m_u32EccBlockNEccType;         //!< Type of ECC, can be one of BCH-0-20
            UINT32        m_u32EccBlock0Size;             //!< Number of bytes for Block0 - BCH
            UINT32        m_u32EccBlockNSize;             //!< Block size in bytes for all blocks other than Block0 - BCH
            UINT32        m_u32EccBlock0EccType;         //!< Ecc level for Block 0 - BCH
            UINT32        m_u32MetadataBytes;             //!< Metadata size - BCH
            UINT32        m_u32NumEccBlocksPerPage;       //!< Number of blocks per page for ROM use - BCH
            UINT32        m_u32EccBlockNEccLevelSDK;      //!< Type of ECC, can be one of BCH-0-20
            UINT32        m_u32EccBlock0SizeSDK;          //!< Number of bytes for Block0 - BCH
            UINT32        m_u32EccBlockNSizeSDK;          //!< Block size in bytes for all blocks other than Block0 - BCH
            UINT32        m_u32EccBlock0EccLevelSDK;      //!< Ecc level for Block 0 - BCH
            UINT32        m_u32NumEccBlocksPerPageSDK;    //!< Number of blocks per page for SDK use - BCH
            UINT32        m_u32MetadataBytesSDK;          //!< Metadata size - BCH
            UINT32        m_u32EraseThreshold;            //!< To set into BCH_MODE register.
            UINT32        m_u32BootPatch;                 //!< 0 for normal boot and 1 to load patch starting next to FCB.
            UINT32        m_u32PatchSectors;              //!< Size of patch in sectors.
            UINT32        m_u32Firmware1_startingSector;  //!< Firmware image starts on this sector.
            UINT32        m_u32Firmware2_startingSector;  //!< Secondary FW Image starting Sector.
            UINT32        m_u32SectorsInFirmware1;        //!< Number of sectors in firmware image.
            UINT32        m_u32SectorsInFirmware2;        //!< Number of sector in secondary FW image.
            UINT32        m_u32DBBTSearchAreaStartAddress;//!< Page address where dbbt search area begins
            UINT32        m_u32BadBlockMarkerByte;        //!< Byte in page data that have manufacturer marked bad block marker, this will
                                                            //!< bw swapped with metadata[0] to complete page data.
            UINT32        m_u32BadBlockMarkerStartBit;    //!< For BCH ECC sizes other than 8 and 16 the bad block marker does not start
                                                            //!< at 0th bit of m_u32BadBlockMarkerByte. This field is used to get to the
                                                            //!< start bit of bad block marker byte with in m_u32BadBlockMarkerByte.
            UINT32        m_u32BBMarkerPhysicalOffset;    //!< FCB value that gives byte offset for bad block marker on physical NAND page.

  UINT32  m_u32BCHType;
  UINT32  m_u32TMTiming2_ReadLatency;
  UINT32  m_u32TMTiming2_PreambleDelay;
  UINT32  m_u32TMTiming2_CEDelay;
  UINT32  m_u32TMTiming2_PostambleDelay;
  UINT32  m_u32TMTiming2_CmdAddPause;
  UINT32  m_u32TMTiming2_DataPause;
  UINT32  m_u32TMSpeed;
  UINT32  m_u32TMTiming1_BusyTimeout;
  UINT32  m_u32DISBBM;
  UINT32  m_u32BBMark_spare_offset;
  UINT32  m_u32Onfi_sync_enable;
  UINT32  m_u32Onfi_sync_speed;
  UINT32  m_u32Onfi_syncNANDData;
  UINT32  m_u32DISBB_Search;

        } FCB_Block;
        struct
        {                         
            UINT32        m_u32NumberBB;                    //!< # Bad Blocks stored in this table for NAND0.
            UINT32        m_u32Number2KPagesBB;           //!< Bad Blocks for NAND0 consume this # of 2K pages.
        } DBBT_Block;
    };
} BootBlockStruct_t;

Following are the values i'm assigning (Which are equal to linux):
FCB
  m_u32FingerPrint = 0x20424346
  m_u32Version = 0x01000000
  m_u32Reserved = 0
  m_NANDTiming.m_u8DataSetup = 80
  m_NANDTiming.m_u8DataHold = 60
  m_NANDTiming.m_u8AddressSetup = 25
  m_NANDTiming.m_u8DSAMPLE_TIME = 6
  m_u32PageDataSize = 2048
  m_u32TotalPageSize = 2112
  m_u32SectorsPerBlock = 64
  m_u32NumberOfNANDs = 0
  m_u32TotalInternalDie = 0
  m_u32CellType = 0
  m_u32EccBlockNEccType = 4
  m_u32EccBlock0Size = 512
  m_u32EccBlockNSize = 512
  m_u32EccBlock0EccType = 4
  m_u32MetadataBytes = 10
  m_u32NumEccBlocksPerPage = 3
  m_u32EccBlockNEccLevelSDK = 0
  m_u32EccBlock0SizeSDK = 0
  m_u32EccBlockNSizeSDK = 0
  m_u32EccBlock0EccLevelSDK = 0
  m_u32NumEccBlocksPerPageSDK = 0
  m_u32MetadataBytesSDK = 0
  m_u32EraseThreshold = 0
  m_u32Firmware1_startingPage = 512
  m_u32Firmware2_startingPage = 2816
  m_u32PagesInFirmware1 = 91
  m_u32PagesInFirmware2 = 91
  m_u32DBBTSearchAreaStartAddress = 256
  m_u32BadBlockMarkerByte = 1999
  m_u32BadBlockMarkerStartBit = 0
  m_u32BBMarkerPhysicalOffset = 2048
  m_u32BCHType = 0
  m_NANDTMTiming.m_u32TMTiming2_ReadLatency = 0
  m_NANDTMTiming.m_u32TMTiming2_PreambleDelay = 0
  m_NANDTMTiming.m_u32TMTiming2_CEDelay = 0
  m_NANDTMTiming.m_u32TMTiming2_PostambleDelay = 0
  m_NANDTMTiming.m_u32TMTiming2_CmdAddPause = 0
  m_NANDTMTiming.m_u32TMTiming2_DataPause = 0
  m_NANDTMTiming.m_u32TMSpeed = 0
  m_NANDTMTiming.m_u32TMTiming1_BusyTimeout = 0
  m_u32DISBBM = 0
DBBT
  m_u32Checksum = 0x00000000
  m_u32FingerPrint = 0x54424244
  m_u32Version = 0x01000000 
```

在 WinCE 中，它根本无法启动。

错误在哪里？如果元数据大小差异是问题所在，我该如何解决？（我也尝试过更改`METADATA_SIZE`= 12，这会增加元数据大小，但不会启动。） linux (kobs) 中的那两个额外字节是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:44:50.003

解决了。

Eboot 现在正在从 NAND 启动。

要为引导写入的正确数据：

中央银行：

```
00 00 00 00 00 00 00 00 00 00 00 00 cf fc ff ff
46 43 42 20 00 00 00 01 50 3c 19 06 00 00 00 00
00 08 00 00 40 08 00 00 40 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 04 00 00 00 00 02 00 00
00 02 00 00 04 00 00 00 0a 00 00 00 03 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 02 00 00 00 0b 00 00 01 01 00 00
01 01 00 00 00 01 00 00 cf 07 00 00 00 00 00 00
00 08 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 1b 0c 06 06
10 1f 03 07 00 00 00 1c 0f 17 1f 05 00 00 00 00
00 19 00 00 15 19 00 00 15 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 13 00 00 00 00 16 00 00
00 16 00 00 13 00 00 00 0f 00 00 00 0a 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 16 00 00 00 13 00 00 1c 1c 00 00
1c 1c 00 00 00 1c 00 00 1b 19 00 00 00 00 00 00
00 19 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
```

DBBT：

```
00 ff ff ff ff ff ff ff ff ff 00 00 00 00 44 42
42 54 00 00 00 01 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 74 9c 34 5d ed 4b
6d 24 4d 04 d8 e4 48 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
```

电子启动：

```
e5 ff ff ff ff ff ff ff ff ff 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 c2 02 c8 c7 39 aa
0c a8 ef 77 29 f1 78 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 d1 00 20 40 60 74 90 00 00 00 00 00
00 00 00 00 40 74 90 00 00 74 90 00 00 00 00 00
00 00 00 00 d1 00 20 40 00 20 04 80 00 00 00 00
00 00 00 00 54 74 90 00 20 74 90 00 00 00 00 00
00 00 00 00 00 70 90 00 00 10 00 00 01 00 00 00
00 0c 04 80 00 04 08 00 00 0c 04 80 00 04 08 00
00 00 00 00 ff 40 2d e9 00 70 a0 e1 09 06 50 e3
28 30 1f e5 00 30 80 85 18 36 9f e5 00 30 81 85
42 3e a0 e3 00 30 82 85 40 40 4f e2 40 50 4f e2
40 60 4f e2 00 06 9f e5 00 10 e0 e3 68 20 a0 e3
02 10 80 e7 00 10 e0 e3 6c 20 a0 e3 02 10 80 e7
00 10 e0 e3 70 20 a0 e3 02 10 80 e7 00 10 e0 e3
74 20 a0 e3 02 10 80 e7 00 10 e0 e3 78 20 a0 e3
02 10 80 e7 00 10 e0 e3 7c 20 a0 e3 02 10 80 e7
00 10 e0 e3 80 20 a0 e3 02 10 80 e7 00 10 e0 e3
84 20 a0 e3 02 10 80 e7 9c 05 9f e5 9c 15 9f e5
18 20 a0 e3 02 10 80 e7 94 05 9f e5 94 15 9f e5
94 25 9f e5 02 10 80 e7 88 15 9f e5 5b 2e a0 e3
02 10 80 e7 7c 15 9f e5 80 25 9f e5 02 10 80 e7
70 15 9f e5 78 25 9f e5 02 10 80 e7 64 15 9f e5
70 25 9f e5 02 10 80 e7 58 15 9f e5 68 25 9f e5
02 10 80 e7 4c 15 9f e5 60 25 9f e5 02 10 80 e7
40 15 9f e5 17 2d a0 e3 02 10 80 e7 38 10 a0 e3
4c 25 9f e5 02 10 80 e7 38 10 a0 e3 44 25 9f e5
02 10 80 e7 38 10 a0 e3 3c 25 9f e5 02 10 80 e7
38 10 a0 e3 52 2e a0 e3 02 10 80 e7 38 10 a0 e3
28 25 9f e5 02 10 80 e7 38 10 a0 e3 51 2e a0 e3
02 10 80 e7 38 10 a0 e3 14 25 9f e5 02 10 80 e7
38 10 a0 e3 0c 25 9f e5 02 10 80 e7 38 10 a0 e3
04 25 9f e5 02 10 80 e7 00 15 9f e5 00 25 9f e5
02 10 80 e7 38 10 a0 e3 f8 24 9f e5 02 10 80 e7
38 10 a0 e3 f0 24 9f e5 02 10 80 e7 38 10 a0 e3
e8 24 9f e5 2f 4b 52 82 fe b2 58 65 c4 a5 96 f4
3e 02 10 80 e7 38 10 a0 e3 59 2e a0 e3 02 10 80
e7 38 10 a0 e3 d4 24 9f e5 02 10 80 e7 00 10 a0
e3 cc 24 9f e5 02 10 80 e7 38 10 a0 e3 c4 24 9f
e5 02 10 80 e7 38 10 a0 e3 5a 2e a0 e3 02 10 80
e7 38 10 a0 e3 b0 24 9f e5 02 10 80 e7 38 10 a0
e3 a8 24 9f e5 02 10 80 e7 38 10 a0 e3 a0 24 9f
e5 02 10 80 e7 38 10 a0 e3 98 24 9f e5 02 10 80
e7 38 10 a0 e3 7a 2e a0 e3 02 10 80 e7 38 10 a0
e3 84 24 9f e5 02 10 80 e7 38 10 a0 e3 7c 24 9f
e5 02 10 80 e7 38 10 a0 e3 74 24 9f e5 02 10 80
e7 38 10 a0 e3 6c 24 9f e5 02 10 80 e7 02 18 a0
e3 75 2e a0 e3 02 10 80 e7 00 10 a0 e3 58 24 9f
e5 02 10 80 e7 02 18 a0 e3 50 24 9f e5 02 10 80
e7 38 10 a0 e3 48 24 9f e5 02 10 80 e7 02 17 a0
e3 40 24 9f e5 02 10 80 e7 3c 04 9f e5 02 19 a0
e3 1c 10 80 e5 02 19 a0 e3 30 24 9f e5 02 10 80
e7 2c 14 9f e5 5c 18 80 e5 24 14 9f e5 24 24 9f
e5 02 10 80 e7 20 14 9f e5 00 18 80 e5 18 14 9f
e5 12 2b a0 e3 02 10 80 e7 01 15 a0 e3 90 18 80
e5 01 15 a0 e3 04 24 9f e5 02 10 80 e7 00 14 9f
e5 00 24 9f e5 02 10 80 e7 02 1b a0 e3 b8 18 80
e5 02 1b a0 e3 f0 23 9f e5 02 10 80 e7 ec 13 9f
e5 1c 18 80 e5 e4 13 9f e5 20 18 80 e5 e0 13 9f
e5 24 18 80 e5 d4 13 9f e5 28 18 80 e5 d0 13 9f
e5 d0 23 9f e5 02 10 80 e7 c4 13 9f e5 c8 23 9f
e5 02 10 80 e7 b8 13 9f e5 c0 23 9f e5 02 10 80
e7 ac 13 9f e5 b8 23 9f e5 02 10 80 e7 b4 13 9f
e5 2c 18 80 e5 ac 13 9f e5 30 18 80 e5 a4 13 9f
e5 34 18 80 e5 9c 13 9f e5 38 18 80 e5 94 13 9f

.

.

. 
```

# html - img在popup中的绝对定位

> ID：14524569
> 
> 赞同：0
> 
> 时间：2013-01-25T15:07:43.893
> 
> 标签：html, css, image, css-position

我在弹出窗口中定位图像（箭头）时遇到很多问题。使用相对于框的定位，我无法将 img 移动到正确的位置。

所以我尝试了绝对的，或者更确切地说，在 div 中放置一个 div（显示摘录。）

```
<div style="position:relative;top:0px;bottom:500px;left:100px">
<img src="my_image.png" style="position:absolute" height="50" width="100" alt="Arrow pointing to the top right corner of the page" />
</div> 
```

但是，既然它与框的其余部分无关，它实际上并没有移动 - 只是扩展了弹出窗口。

有没有做我想做的事？我在正确的轨道上吗？

干杯!

编辑：这个箭头应该指向标题（弹出说“在标题中......”）；我不是特别喜欢这种设置，但想不出其他任何东西。如果您有更好的主意，请发布:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:12:29.583

您将需要这样的组合：

*   您的父元素（容器 div，即弹出窗口）需要具有 position:relative 或 absolute
*   您的孩子（箭头）需要： position:absolute,top:123px,left:245px （顶部和左侧表示其相对于包含元素的位置）。

img 的宽度和高度是没有用的，除非你正在缩小或扩大 IMG，这是你不应该做的：放下它们。我不明白您代码中的 div 是否只是箭头的包装器，还是弹出容器。在第一种情况下，您可以直接删除它，并将 display:block 设置为 img 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:13:15.677

您最好将其设为 div 的背景图像。

```
<div style="background-image: url('my_image.png'); background-position:top right; background-repeat:no-repeat;">

</div> 
```

# php - 这种 SQL 注入保护怎么会被破坏

> ID：14524575
> 
> 赞同：3
> 
> 时间：2013-01-25T15:08:06.563
> 
> 标签：php, sql-injection

**这个问题不是关于为经过验证的函数创建一个实际的替代方案来防止注入，而是关于如何与那些没有看到他们自制的注入预防代码中的缺陷的人争论！**

我试图向一位同事说明一点，但似乎他对 SQL 注入的“解决方案”对我来说似乎相当安全。

他通过执行清除查询

```
$query = $_POST['username'];
$look = array('&', '#', '<', '>', '"', '\'', '(', ')', '%');
$safe = array('&amp;', '&#35;', '&lt;', '&gt;', '&quot;', '&#39;', '&#40;', '&#41;', '&#37;');
str_replace($look, $safe, $query); 
```

然后继续登录

```
"SELECT * FROM users WHERE username = '" . $query . "'
    AND password = '" . md5($_POST['password']) . "'"; 
```

我试图让他使用 PDO 或等效项，但你怎么能真正违反这种保护？我没有答案，这真的让我很烦，因为我无法向他解释这有多不安全以及为什么不应该这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:12:26.643

虽然这可能涵盖最典型的 SQL 注入问题 - 有几个已知问题使用多字节字符集和服务器上的某些区域设置。

然而，这不仅仅是逃避——这实际上是在改变输入到数据库的数据。考虑在适当的地方简单地添加斜杠，或者在将数据重新显示到浏览器时使用其中一种内置的转义方法，例如`mysqli_real_escape_string`在输入数据时等等。`htmlentities`这可以确保您存储在数据库中的内容始终是用户实际输入的内容 - 除非您有理由不这样做。

更好的是，当有疑问时，使用准备好的语句和绑定参数。然后你就可以完全避免 SQL 注入了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T15:16:13.130

我建议“是否可以违反这种方法”的问题是不相关的。真正要问的问题是“为什么要使用自产的*临时*解决方案，而不是已经编写、测试和调试过并且已经被数千名用户使用的解决方案？”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T09:00:21.607

这实际上是一种可怕的“逃跑”方式，陷阱很多，而且只有少数是

1.  此代码实际上是在假设唯一的输出媒体是 HTML 的情况下更改数据。根据我 15 年的经验，我会说这不是真的。改变你的数据总是一件坏事，它会导致未来的不一致和很多痛苦。其中一个直接原因是这样的“格式”将在每次编辑时成倍增加，从而使 &ampamp 仅靠引用。
2.  通过数字注射。
3.  通过标识符注入。
4.  二阶注射。

...以及更多。
本网站的严格规则使我无法使用适当的词语来命名这样的“保护”，但您可以自己想象它们。

# arrays - 加快在 fortran read(1)columnA,columnB,columnC 中读取数据 - 只需要 A 列和 C 列吗？

> ID：14524577
> 
> 赞同：1
> 
> 时间：2013-01-25T15:08:09.263
> 
> 标签：arrays, fortran

我有一系列数据：

列ABC，列DEF，列G

我只想要列 ABC 和列 G，有没有办法跳过列DEF？

```
 allocate(ABC(1:3,1:N))
   read(1)ABC
   allocate(DEF(1:3,1:N))
   read(1)DEF
   deallocate(DEF)
   allocate(G(N))
   read(1)G

   use ABC and G for calculations 
```

我是否必须分配和读取 DEF 才能访问 G？必须有一种方法可以跳过这三个而不实际填充分配的数组 DEF？还是我有相当标准的程序？谢谢堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:59:43.350

对于未格式化的顺序访问读取，只需执行 `read(1)`将跳过数据记录，无需声明/分配 DEF。

# javascript - 查找我正在滚动的当前元素的索引 - Jquery

> ID：14524579
> 
> 赞同：0
> 
> 时间：2013-01-25T15:08:16.477
> 
> 标签：javascript, jquery, indexing, scroll

假设我有一些类名为“class”的固定高度自动滚动的 div。我想找到我正在滚动的当前“类”的 div 的索引，如下所示：

```
var type = -1;
$(window).scroll(function(type_request){
    type = $('.class').index($(this));console.log(type);
}); 
```

但是滚动后我没有输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:10:48.193

看起来您的方法调用已反转。尝试这个：

```
$(window).scroll(function(){
    type = $(this).index();
    console.log(type);
}); 
```

编辑：如果您只希望能够使用 class 滚动 div `.class`，那么您需要专门绑定到它：

```
$('.class').scroll(function(){
    type = $(this).index();
    console.log(type);
}); 
```

此外，如果您使用的是 jQuery 1.7+，您应该使用`on`而不是`scroll`（它是 的简写`bind('scroll')`）：

```
$('.class').on('scroll', function(){
    type = $(this).index();
    console.log(type);
}); 
```

# jquery - grails ajax 适用于表单并创建但不适用于编辑

> ID：14524582
> 
> 赞同：0
> 
> 时间：2013-01-25T15:08:20.757
> 
> 标签：jquery, ajax, grails

我正在使用 grails 进行交通项目。这是我第一次使用grails！

我有一个带有两个布尔值*h​​asroad*和*hasrail的域**站*。在站控制器中，我使用这种方法：

 **```
def hasroadhasrail() {
    def station = Station.get(params.stationid)

    def response = ['hasroad': station?.hasroad, 'hasrail': station?.hasrail]
    render response as JSON
} 
```

然后我有一个域*流量*，它与 Station 相关联

```
Station station 
```

有很多数据。如果没有道路/铁路数据，输入字段将被禁用并显示为灰色。

我正在使用*jquery 1.8.0*

*流量的_form.gsp*中的ajax 调用如下所示：

```
 <script>
        $(document).ready(function(){
            // correct for create
            $("input.data1").prop('disabled', ${trafficInstance?.station?.hasroad ?: true});
            $("input.data2").prop('disabled', ${trafficInstance?.station?.hasrail ?: true});

            $("#station").change(function() {
                $.ajax({
                      type: "POST",
                      url: "${createLink(controller: 'station', action: 'hasroadhasrail')}",
                      data: { stationid: $(this).val()}
                    }).done(function( response ) {
                        if (response.hasroad) {
                            $("input.data1").prop('disabled', false);
                            $('input.data1').css('background-color', 'white');
                        } 
                        else {
                            $("input.data1").prop('disabled', true);
                            $('input.data1').css('background-color', 'grey');
                        }

                        if (response.hasrail) {
                            $("input.data2").prop('disabled', false);
                            $('input.data2').css('background-color', 'white');
                        } 
                        else {
                            $("input.data2").prop('disabled', true);
                            $('input.data2').css('background-color', 'grey');
                        } 
                    });
            });
        })
    </script> 
```

这里是*Stations*的下拉菜单，格式为_ *form.gsp* of traffic

```
 <li class="fieldcontain ${hasErrors(bean: trafficInstance, field: 'station', 'error')} required"> <span class="lbl">Station</span>
        <g:select id="station" name="station.id" from="${trafproj.Station.list()}" optionKey="id" required="" value="${trafficInstance?.station?.id}" class="many-to-one" noSelection="['':'-Choose station-']"/>
    </li> 
```

当我创建新的交通数据时，一切都很完美。我从下拉列表中选择了一个站点，例如，如果该站点的*hasroad*为 false，则输入字段将被禁用并显示为灰色。**以上所有代码都很好用！**

现在我的问题：如果我编辑以前创建的流量，一个站点已经加载到站点下拉列表中。没有变化，因此 ajax 不能立即工作。当我再次更改下拉菜单中的电台时，一切正常。

我要补充的是，下拉菜单不仅适用于更改，而且还适用于最初加载站点时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:20:33.923

将 ajax 函数放入单独的函数中，而不是匿名的内联函数。

然后从 document.ready() 调用该函数，并将其用作 onchange 处理程序。

一定要改变

```
data: { stationid: $(this).val()} 
```

到

```
data: { stationid: $("#station").val()} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:21:57.087

那是因为您只有在您的电台内容发生变化时才进行 ajax 调用。页面加载时不会触发此事件。为此，请将逻辑包装在一个函数中，并在更改内部调用，并在页面加载时调用一次。

```
$(document).ready(function(){
  ...
  function getStationData() {
    $.ajax({
                  type: "POST",
                  url: "${createLink(controller: 'station', action: 'hasroadhasrail')}",
                  data: { stationid: $(this).val()}
                }).done(function( response ) {
                    if (response.hasroad) {
                        $("input.data1").prop('disabled', false);
                        $('input.data1').css('background-color', 'white');
                    } 
                    else {
                        $("input.data1").prop('disabled', true);
                        $('input.data1').css('background-color', 'grey');
                    }

                    if (response.hasrail) {
                        $("input.data2").prop('disabled', false);
                        $('input.data2').css('background-color', 'white');
                    } 
                    else {
                        $("input.data2").prop('disabled', true);
                        $('input.data2').css('background-color', 'grey');
                    } 
                });
  }

  $('#station').change(function(){
    getStationData();
  });

  //call this first time when page loads.
  getStationData();
}); 
```**

# linux - 如何在 bash_profile 文件中添加导出语句？

> ID：14524590
> 
> 赞同：22
> 
> 时间：2013-01-25T15:09:02.350
> 
> 标签：linux, bash, .bash-profile

我正在尝试了解是否必须添加导出语句才能在 bash_profile 文件中设置变量。我该怎么做？例如，如果我必须添加 export AX = 'name' 那么我应该简单地将它写在文件末尾还是我还需要写其他任何东西

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-25T15:12:54.197

只需`export AS='name'`在`~/.bash_profile`文件中的任何位置写入：

```
# Append to the end of the file
$ echo "export AS='name'" >> ~/.bash_profile

# Update shell 
$ source ~/.bash_profile 
```

第一个命令将您想要的行添加到文件中*（或仅使用文本编辑器）*，第二个命令使用新变量更新 shell。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-25T17:42:15.497

有2种情况：

**1\. 导出自变量**

例如，如果您想独立导出变量“AX”，则使用：

```
AX = 'name'
export AX 
```

**2\. 导出一个自变量，然后将其附加到某个现有变量**

例如，如果要独立导出变量“AX”，然后将其附加到类路径，则使用：

```
AX = 'name'
export AX
PATH=$PATH:AX
export PATH 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T15:11:13.373

通常，变量在一个地方声明和定义，并在另一个地方导出：

```
AX='name'
export AX 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-26T00:04:57.250

无需在单独的行上定义和导出。你可以写：

```
export yourVar="yourStringOrYourPathEtc" 
```

请务必`source ~/.bash_profile`查看您所在的 shell 中的更改。如果有疑问，请关闭终端并重新打开它:)

# javascript - 匹配主干路由中的空路由和尾部斜杠？

> ID：14524592
> 
> 赞同：2
> 
> 时间：2013-01-25T15:09:06.187
> 
> 标签：javascript, backbone.js, url-routing, trailing-slash

我知道重复内容 (SEO) 存在一些问题，但这不是我的项目所关心的。

在我的骨干路由器中，我有这个：

```
routes: {
    "": "startOrder",
    "order/:orderNumber/:stepName": "getOrder",
    "order/:orderNumber/:stepName/": "getOrder"
}, 
```

请注意，第二条和第三条路线导致相同的事情。

问题是如果有人输入一个以“/”字符结尾的 URL，我希望它调用一个单独的函数（然后删除斜杠），但这不会发生，它总是匹配空白路由。然后我稍后会遇到问题，因为 URL 有一个不应该的斜杠。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-21T15:50:18.167

现在可以在括号内放一个斜杠作为路由的可选部分：

```
var Router = Backbone.Router.extend({
  routes: {
    'order/:orderNumber/:stepName(/)': 'getOrder'
  },
  // ...
}); 
```

来自[关于 Backbone 路由末尾的斜线主题的非常全面的问题线程](https://github.com/jashkenas/backbone/issues/848)。

但正如该线程中所指出的，为了防止为您的页面记录多个 URL，最好在 Apache 或其他服务器配置中删除路径末尾的斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:45:49.057

它总是匹配空白路由而不是不匹配，因为你可能不是从 开始`Backbone.history.start`的`{ pushState: true }`，所以像这样开始`Backbone.history.start({pushState: true });`

如果你想要一个匹配任何以 a 结尾的路由`/`，你可以使用 a`*splat`并以 a 结尾`/`。像这样的东西应该工作：

```
routes: {
    "": "startOrder",
    "order/:orderNumber/:stepName": "getOrder",
    "order/:orderNumber/:stepName/": "getOrder",
    "*dummy/": "endsWithSlash"
} 
```

确保虚拟路线是最后一个。否则，虚拟路线将在您的订单之前以斜线匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T04:11:42.970

此路由在内部转换为正则表达式。您可以在两种情况下通过路由方法传递原始正则表达式

# ios - 对齐的散点图问题

> ID：14524596
> 
> 赞同：0
> 
> 时间：2013-01-25T15:09:17.997
> 
> 标签：ios, core-plot

我在我的项目中使用核心图并且我正在创建散点图并且我正在启用用户交互是。但问题是绘图显示在 x 轴的中心值，我想从 Axes 开始查看绘图。

我正在使用以下代码在主要刻度之间留出空间，但是当它看到中心位置并且滚动后我将转到第一个点。

我想先看到第一个点，然后再滚动另一个点。

```
CPTMutablePlotRange *xRange = [plotSpace.xRange mutableCopy];
[xRange expandRangeByFactor:CPTDecimalFromCGFloat(0.5)];
plotSpace.xRange = xRange; 
```

我被这个问题困住了。

我正在发布此问题的屏幕截图。在这里我上传两张图片 1) 图表显示在中心。2）我想在启动时显示这样的图表。

问题图片[1](http://i.stack.imgur.com/q0Awe.png)

第二张图片[2](http://i.stack.imgur.com/kBmML.png)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:40:49.693

从您提供的图片来看，我想您想确保始终显示垂直轴。你可以用

```
CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
CPTXYAxis *y = axisSet.yAxis;
y.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0];
graph.plotAreaFrame.paddingLeft += 60.0; // to make some room for the axis 
```

如果你只想显示第一个点，试试这个

```
CPTMutablePlotRange *xRange = [[plotSpace.xRange mutableCopy] autorelease];
xRange.location = CPTDecimalFromDouble(yourFirstDataPoint.x);  // insert your data her
plotSpace.xRange = xRange; 
```

# emacs - Mx org-plot/gnuplot 给出“符号的函数定义是无效的：org-find-library-dir”

> ID：14524597
> 
> 赞同：1
> 
> 时间：2013-01-25T15:09:18.777
> 
> 标签：emacs, gnuplot

我试图在 Emacs 中使用 gnuplot 来绘制一些数据。我正在阅读的教程是[一些官方的](http://orgmode.org/worg/org-tutorials/org-plot.html)。

[由于这个不错的教程](https://github.com/bruceravel/gnuplot-mode)，我的 gnuplot-mode 已经安装

我的 emacs 是 v24，带有 Mac OS。Gnuplot 安装在`usr/bin/local/`

我的 Org 模式已更新到 2013 的版本。

但是我不知道错误时该怎么办

```
"symbol's function definition is void: org-find-library-dir" 
```

当我尝试运行 org-plot/gnuplot 时出现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:10:58.313

我也有这个问题—— void function org-find-library-dir。

最后我发现问题是我加载 o-blog 包比 org 模式更早。o-blog 依赖 org-mode，需要很多 org 包。

我相信你的问题是类似的，你应该调整你的 init 文件以便首先加载 org-mode。

# javascript - 单击完成后如何在 kendo ui 网格中捕获破坏事件？

> ID：14524600
> 
> 赞同：7
> 
> 时间：2013-01-25T15:09:30.460
> 
> 标签：javascript, jquery, kendo-ui, kendo-grid

我想在网格中删除按钮的单击事件完成时执行一个动作。我怎么知道什么时候在 Javascript 中被点击？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-25T15:30:46.437

（最后阅读**重要**）

采用：

```
$("tr .k-grid-delete", "#grid").on("click", function(e) {
    alert("deleted pressed!");
}) 
```

`#grid`你的网格的id在哪里。

如果您想知道数据项，您可以执行以下操作：

```
var item = $("#grid").data("kendoGrid").dataItem($(this).closest("tr")); 
```

或者，您可以`command`在`grid.columns`as 中定义：

```
{
    command: [
        "edit",
        {
            name : "destroy",
            text : "remove",
            click: myFunction
        }
    ],
    title  : "Commands",
    width  : "210px" 
} 
```

哪里`myFunction`是：

```
function myFunction(e) {
    alert("deleted pressed!");
    var item = $("#grid").data("kendoGrid").dataItem($(this).closest("tr"));
    // item contains the item corresponding to clicked row
} 
```

**重要提示：**您可能希望定义自己的`destroy`按钮，其中仅从原始样式复制样式（没有其他操作/检查）。如果是这样，请将您的定义`grid.columns.command`为：

```
{
    command: [
        "edit",
        {
            name     : "destroy",
            text     : "remove",
            className: "ob-delete"
        }
    ],
    title  : "&nbsp;",
    width  : "210px"
} 
```

然后定义：

```
$(document).on("click", "#grid tbody tr .ob-delete", function (e) {
    e.preventDefault();
    alert("deleted pressed!");
    var item = $("#grid").data("kendoGrid").dataItem($(this).closest("tr"));
    // item contains the item corresponding to clicked row
    ...
    // If I want to remove the row...
    $("#grid").data("kendoGrid").removeRow($(this).closest("tr"));
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-08T10:04:58.727

简单的。您可以利用`remove:`在剑道中捕获破坏事件。

```
$('#grid').kendoGrid({
        dataSource: gridDataSource,
        scrollable: true,
        sortable: true,
        toolbar: ['create'],
        columns: [
            { field: 'id', title: 'ID', width: 'auto' },
            { field: 'description', title: 'Description', width: 'auto' },
            { field: 'begin', title: 'Begin', width: 'auto', format: '{0:d}' },
            { command: ['edit', 'destroy'], title: '&nbsp;', width: '172px' }
        ],
        editable: {
            mode: 'inline',
            confirmation: false
        },
        save:function(e){
          alert("save event captured");
          //Do your logic here before save the record.
        },       
        remove:function(e){ 
          alert("delete event captured");
          //Do your logic here before delete the record.
        }
    }); 
```

```
$(document).ready(function() {  
    var gridDataSource = new kendo.data.DataSource({
        data: [
            { id: 1, description: 'Test 1', begin: new Date() }
        ],
        schema: {
            model: {
                id: 'id',
                fields: {
                    id: { type: 'number' },
                    description: { type: 'string' },
                    begin: { type: 'date' }
                }
            }
        }
    });

    $('#grid').kendoGrid({
        dataSource: gridDataSource,
        scrollable: true,
        sortable: true,
        toolbar: ['create'],
        columns: [
            { field: 'id', title: 'ID', width: 'auto' },
            { field: 'description', title: 'Description', width: 'auto' },
            { field: 'begin', title: 'Begin', width: 'auto', format: '{0:d}' },
            { command: ['edit', 'destroy'], title: '&nbsp;', width: '172px' }
        ],
        editable: {
            mode: 'inline',
            confirmation: false
        },
        save:function(e){
          alert("save event captured");
        },       
        remove:function(e){
          alert("delete event captured");
        }
    });
      });
```

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <link rel="stylesheet" href="http://cdn.kendostatic.com/2014.1.318/styles/kendo.common.min.css" />
    <link rel="stylesheet" href="http://cdn.kendostatic.com/2014.1.318/styles/kendo.default.min.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="grid"></div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="http://cdn.kendostatic.com/2014.1.318/js/jquery.min.js"></script>
    <script src="http://cdn.kendostatic.com/2014.1.318/js/kendo.all.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
```

# javascript - 在 p:commandButton 中刷新了两次，与 oncomplete 竞争条件

> ID：14524602
> 
> 赞同：0
> 
> 时间：2013-01-25T15:09:35.663
> 
> 标签：javascript, jquery, jsf, primefaces

我正在使用 执行服务器操作`p:commandButton`。完成这些操作后，我正在刷新表单（以显示隐藏字段）并显示对话框。我也尝试过只刷新带有隐藏按钮的面板，但效果是一样的：

在我调用之后第二次刷新启动`dialog.show().`问题是，对话框内定义的小部件和对话框本身目前不存在！因此，当我的 JavaScript 代码运行速度过快时，在更新对话框的帖子完成之前，我遇到了一个异常，因为我要修改的对象在 DOM 树中不存在。

所以我的第一个问题，是否可以避免这种情况和第二次刷新，对话框不能与页面一起刷新吗？

其次，如果第一个无法回答，我如何在第二个帖子完成**后**启动我的代码？当对话框组件的刷新完成时，我只需要一个回调，然后运行我的操作。

```
 <p:commandButton id="doTask" value="Do task" widgetVar="doTaskButton"
        action="#{service.doTask}" update="@form"
        onclick="disableMainButtons()"
        oncomplete="async.showAsyncDialog()" /> 
```

HTTP 序列：

```
// button click
POST http://localhost:9080/myapp/order.xhtml 200 OK
// oncomplete launches dialog.show()
// I receive answer from COMET before the dialog to display it is shown
POST http://localhost:9080/myapp/channel/async 200 OK
// refresh triggered by dialog.show(), only now the dialog is shown and it's widgets are rendered
POST http://localhost:9080/myapp/order.xhtml 200 OK 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:48:43.230

解决方法，从编程的角度来看并不漂亮，是检查对话框是否被渲染，如果没有，延迟我的过程。如果对话框仍未呈现，请再次延迟等。

```
waitForDialogRendered: function() {
    var visible = asyncDialog.jq.css('visibility') == 'visible';
    if (!visible) {
        setTimeout(waitForDialogRendered, 250);
        return;
    }
    runComet();
} 
```

即使用户看不到对话框，也不会返回`asyncDialog.jq.is(':visible')`！`true`

不过，如果不需要编写这样的代码，我会更开心。

# c++ - 将缓冲区与另一个缓冲区连接起来

> ID：14524603
> 
> 赞同：1
> 
> 时间：2013-01-25T15:09:35.907
> 
> 标签：c++, pointers, memory, buffer

我在处理缓冲区（复制、连接等）时非常困惑，尤其是“新”或 malloc 的使用。我可以正确编码而不会出现编译错误，但是在运行时会出现问题。我收到运行时错误，例如访问冲突、断言失败等。

例如，我从 MSDN 中给出了 winhttp api 演示的源代码。在该代码中，他们使用 while 循环从服务器查询数据，直到收到所有数据。在控制台上打印每个查询数据后。

但我希望它将每次收到的（附加）数据存储到一个新变量中，最后在控制台上打印整个数据。在 dll 的情况下也会有帮助

代码本身提供了更多详细信息。

```
 #include <Windows.h>
    #include <iostream>
    #include <winhttp.h>

    #pragma comment(lib,"winhttp")
    using namespace std;

    int strcat_b(LPTSTR &dest, LPTSTR &src, int size);

    int main()
    {
        DWORD dwSize = 0;
        DWORD dwDownloaded = 0;

        LPSTR pszOutBuffer;
        LPTSTR pszFullCode;

        HINTERNET  hSession = NULL, 
                    hConnect = NULL,
                    hRequest = NULL;

        hSession = WinHttpOpen( L"Test WinHttp", WINHTTP_ACCESS_TYPE_DEFAULT_PROXY, WINHTTP_NO_PROXY_NAME, WINHTTP_NO_PROXY_BYPASS, 0);
        hConnect = WinHttpConnect( hSession, L"google.com", INTERNET_DEFAULT_HTTP_PORT, 0);
        hRequest = WinHttpOpenRequest( hConnect,  L"GET", 0, 0, 0, 0 ,0);
        WinHttpSendRequest( hRequest, WINHTTP_NO_ADDITIONAL_HEADERS, 0, WINHTTP_NO_REQUEST_DATA, 0, 0, 0);
        WinHttpReceiveResponse( hRequest, NULL);

        do 
        {
            dwSize = 0;
            WinHttpQueryDataAvailable( hRequest, &dwSize);
            pszOutBuffer = new char[dwSize+1];
            ZeroMemory(pszOutBuffer, dwSize+1);
            WinHttpReadData( hRequest, (LPVOID)pszOutBuffer, dwSize, &dwDownloaded);

            // Actual code here was :
            printf("%s", pszOutBuffer);

            // I want to append pszOutBuffer into pszFullCode..
            // So I tried something like strcat(pszFullCode, pszOutBuffer)
            // And finally, when while loop ends, pszFullCode will be printed or Copied into another variable.

            // But I get "Access Violation error" at runtime.

            delete [] pszOutBuffer;

        } while (dwSize > 0);

        // Here it should be able print final result: printf("%s", pszFullCode);
        // In case of Dll, It should be able to copy data from pszFullCode to required Pointer.

        if (hRequest) WinHttpCloseHandle(hRequest);
        if (hConnect) WinHttpCloseHandle(hConnect);
        if (hSession) WinHttpCloseHandle(hSession);

        cin.get();
        return 0;
    } 
```

任何人都可以提供一些链接来了解这样的概念吗？（处理缓冲区、'new' 运算符。malloc、最小化访问冲突错误等）

非常感谢..：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:40:41.520

我认为这几乎可以回答所提出的问题：

如果你想处理“缓冲区、新运算符、malloc、最小化访问冲突错误”，你应该学习使用*标准 C++ 库*。它充满了有用的东西，可以承担管理您的记忆的负担。

例如，考虑 contiguos 内存块。它可以表示为：

```
std::vector<unsigned char> Block; 
```

它的大小（可以被 读取`Block.size()`）现在是 0。要为其分配内存，我们可以这样写：

```
Block.reserve(size); 
```

您也可以直接在构造函数中执行此操作：

```
std::vector<unsigned char> Block (size, 0); // fill it with zeros 
```

现在，如果你想将它与另一个块连接起来，它很简单：

```
std::vector<unsigned char> Block2;

Block.insert( Block.end(), Block2.begin(), Block2.end() ); 
```

或者

```
std::copy(Block2.begin(), Block2.end(), std::back_inserter(Block)); 
```

一切都会正确重新分配，您不会收到任何运行时错误。但是，如果您需要向设计不佳的 API 或用 C 编写的 API 提供数据，您仍然可以`vector`通过方法获得对内存的原始访问`.data()`（仅限 C++11；`&Block[0]`在旧编译器中使用熟悉）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:18:14.147

看来您没有初始化 pszFullCode。如果您希望使用某个指针作为 strcat 的第一个参数，您应该事先使其指向一个合适的缓冲区。

# wpf - Visual Studio 2012 深色主题 WPF 资源字典 xaml 文件

> ID：14524605
> 
> 赞同：2
> 
> 时间：2013-01-25T15:09:46.593
> 
> 标签：wpf, visual-studio-2012, resourcedictionary

是否存在用于 WPF 应用程序的带有 Visual Studio 2012 深色主题的 xaml 文件？

也就是说，一个资源字典，其颜色和样式来自 VS2012 深色主题，适用于所有标准 WPF 控件。

我对黑暗主题或类似的表达不感兴趣。这些我知道存在，但它们有“铬”画笔等。我想要 VS2012 的简单深色和扁平主题。

也许有人可以解释为什么微软没有这个以及为什么 Visual Studio 中的主题不是标准资源字典？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:19:12.823

显然，Winfried Lötzsch 已经做到了这一点，详见此处的代码项目文章：http: [//www.codeproject.com/Articles/442856/Visual-Studio-2012-Metro-Styles-for-WPF](http://www.codeproject.com/Articles/442856/Visual-Studio-2012-Metro-Styles-for-WPF)

# visual-studio-2012 - 在 Visual Studio 2012 中以编程方式指定专用扩展库

> ID：14524606
> 
> 赞同：3
> 
> 时间：2013-01-25T15:09:50.150
> 
> 标签：visual-studio-2012, visual-studio-extensions, vsix

VS 2012 的最新功能之一是能够创建[私有扩展](http://blogs.msdn.com/b/visualstudio/archive/2011/10/03/private-extension-galleries-for-the-enterprise.aspx)库，它允许您构建自己的扩展存储库，而不必将它们发布到世界（内部公司工具等）。我已经按照我引用的 MSDN 博客中的描述成功创建了一个，但我想知道是否有人知道一种以编程方式设置画廊细节的方法——名称和 URL，然后“应用”它——这样每个想要访问它的人不必手动输入信息。

我查看了注册表以查看是否可以安装密钥，我认为这是可能的，但并不完全是微不足道的。任何人有任何见解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T01:23:31.327

要设置的注册表项记录在[http://msdn.microsoft.com/en-us/library/hh266735.aspx](http://msdn.microsoft.com/en-us/library/hh266735.aspx)下。$RootPath$ 表示`HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0`用户机器上的路径。最低限度，您可以编写一个只设置这些注册表项的小工具。

如果您想真正花哨，可以使用 .pkgdef 示例并将其粘贴在 .vsix 中。然后，安装该扩展将注册私有扩展库。有点元，但这可能很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T22:14:03.467

我将把 Jason 的回答标记为已接受，因为他向我指出了如何正确地做到这一点的方向，这是我的终极问题。但是，我确实想添加另一个解决方案，如果这就是您所需要的：

如果您手动将私人画廊详细信息添加到 Visual Studio，则会为您创建注册表项。去：

`HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\ExtensionManager\Repositories\[Dynamic Guid]`

并将该密钥导出到普通的 .reg 文件。然后，您可以创建一个简单的批处理脚本在其他计算机上为您安装密钥，或者让人们使用 .reg 文件自行安装。

# vba - 根据某种值选择/分组数据透视表中的顶部/底部 *x* 行

> ID：14524607
> 
> 赞同：1
> 
> 时间：2013-01-25T15:09:50.337
> 
> 标签：vba, excel, excel-2010, pivot-table

我正在尝试根据这些行的值的排序对数据透视表中的项目进行分组。我正在尝试根据这些数据建立一个帕累托图。我已经在 SO 和 google 上查看了许多问题，但找不到太多帮助......不幸的是，这看起来并不是一个真正常见的问题。

**示例**：

*原始枢轴*

```
State  |  Count
AK     |  14
AL     |  76
AR     |  40
AZ     |  129
CA     |  2666
CO     |  244
CT     |  61 
```

*排序枢轴*

```
State  |  Count
CA     |  2666
CO     |  244
AZ     |  129
AL     |  76
CT     |  61
AR     |  40
AK     |  14 
```

*分组/最终枢轴*

```
State  |  Count
CA     |  2666
CO     |  244
AZ     |  129
OTHER  |  191 
```

我以前从未在 VBA 中进行过枢轴排序/分组（但手动执行此操作相当简单），所以我开始录制宏。我首先想出了如何应用排序，但是尝试分组给了我这样的东西：

```
ActiveSheet.PivotTables("PT7").PivotSelect _
    "State[AL,CT,AR,AK] Original 'NON-AA'", _
    xlDataAndLabel + xlFirstRow, True 
```

这样做的问题是状态是基于枢轴中的值进行硬编码的。如果我想在不同状态低于阈值的另一组数据上运行此分组（前 3 行，而不是 的实际值`count`），则将包括错误的状态。

有没有办法只读取顶部/底部*x*行数，而无需知道它们对应的行标签？

我想要这样的工作（使用行号而不是标题/标签）：

```
ActiveSheet.PivotTables("PT7").PivotSelect _
    "State[4, 5, 6, 7] Original 'NON-AA'", _
    xlDataAndLabel + xlFirstRow, True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:05:10.120

我相信这样做：

```
Sub GroupLowerPivotItems()
Dim pt As Excel.PivotTable
Dim ptField As Excel.PivotField
Dim ptItem As Excel.PivotItem
Dim GroupStart As Long
Dim FirstCell As Excel.Range
Dim LastCell As Excel.Range

GroupStart = 4
Set pt = ActiveSheet.PivotTables(1)
Set ptField = pt.PivotFields("State")
Set ptItem = ptField.PivotItems(GroupStart)
Set FirstCell = ptItem.LabelRange
Set ptItem = ptField.PivotItems(ptField.PivotItems.Count)
Set LastCell = ptItem.LabelRange
pt.Parent.Range(FirstCell, LastCell).Group
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:19:24.867

我相信我已经自己解决了这个问题——需要重构。

```
Dim iFilterLoop As Integer
Dim vValue2List As Variant
Dim sValue2List As String

vValue2List = ActiveSheet.PivotTables("PT7").RowRange.Value2
sValue2List = ""

'Here's the key step in reading the string values:
For iFilterLoop = 4 To ActiveSheet.PivotTables("PT7").RowRange.Count ' Get all but the top 3 -- skip the first (start at 4), since that's the title
    sValue2List = sValue2List & vValue2List(iFilterLoop, 1) & ","
Next iFilterLoop

sValue2List = Left(sValue2List, Len(sValue2List) - 1)

ActiveSheet.PivotTables("PT7").PivotSelect( _
"State[" & sValue2List & "] Original 'NON-AA'", _
xlDataAndLabel + xlFirstRow, True).Group 
```

# java - javacv cvExtractSURF

> ID：14524612
> 
> 赞同：0
> 
> 时间：2013-01-25T15:10:04.280
> 
> 标签：java, opencv, javacv, surf, javacpp

我正在尝试实现使用 JavaCv Surf 的示例。我下载了示例代码、.jar 文件并安装了官方网页要求的所有内容 (http://code.google.com/p/javacv/)。但是似乎缺少一个函数： cvExtractSURF() 无论我做什么，我都无法让 Netbeans 或 Eclipse 编译该示例。也许我做错了什么，或者该函数有一个新名称或其他一些参数。这是我错误代码的快照

```
import com.googlecode.javacv.cpp.opencv_core;
import com.googlecode.javacv.cpp.opencv_core.CvMemStorage;
import com.googlecode.javacv.cpp.opencv_core.CvSeq;
import com.googlecode.javacv.cpp.opencv_core.CvSeqReader;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
import com.googlecode.javacv.cpp.opencv_features2d.*;
import com.googlecode.javacv.cpp.opencv_imgproc;
import com.googlecode.javacv.cpp.opencv_imgproc.CvChainPtReader;
import com.googlecode.javacv.cpp.opencv_legacy.CvSURFParams;
import com.googlecode.javacv.cpp.opencv_legacy.CvSURFPoint;
import java.awt.Point;
import java.awt.geom.Point2D;
import java.awt.image.BufferedImage;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.nio.MappedByteBuffer;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Hashtable;

public class SurftDetection {

    public static Hashtable<Point2D,Point2D> detectSurfPts(BufferedImage object, BufferedImage image) {
        IplImage firstFrame = IplImage.createFrom(object);
        IplImage secondFrame = IplImage.createFrom(image);

        CvSeq objectKeypoints = new CvSeq(null);
        CvSeq objectDescriptors = new CvSeq(null);
        CvSeq imageKeypoints = new CvSeq(null);
        CvSeq imageDescriptors = new CvSeq(null);

        CvSURFParams params = new CvSURFParams();
        params.extended(1).hessianThreshold(500).nOctaves(3).nOctaveLayers(4);

        IplImage firstFramegray = opencv_core.cvCreateImage(opencv_core.cvSize(firstFrame.width(),firstFrame.height()), opencv_core.IPL_DEPTH_8U, 1);
        opencv_imgproc.cvCvtColor(firstFrame, firstFramegray,opencv_imgproc.CV_BGR2GRAY);

        IplImage secondFramecolor = opencv_core.cvCreateImage(opencv_core.cvGetSize(secondFrame), opencv_core.IPL_DEPTH_8U, 1);
        opencv_imgproc.cvCvtColor(secondFrame, secondFramecolor,opencv_imgproc.CV_BGR2GRAY);
        // convert images to grayscale

        // compute surf
        CvMemStorage storage1 = CvMemStorage.create();
        opencv_core.cvClearMemStorage(storage1);
        cvExtractSURF(firstFramegray, null, objectKeypoints, objectDescriptors, storage1, params, 0);

        CvMemStorage storage2 = CvMemStorage.create();
        opencv_core.cvClearMemStorage(storage2);
        cvExtractSURF(secondFramecolor, null, imageKeypoints, imageDescriptors, storage2, params, 0);

        return findPairs(objectKeypoints, objectDescriptors, imageKeypoints, imageDescriptors);
    }

    private static double compareSURFDescriptors(FloatBuffer d1, FloatBuffer d2, double best) {
        double totalCost = 0;
        assert (d1.capacity() == d2.capacity() && d1.capacity() % 4 == 0);
        for (int i = 0; i < d1.capacity(); i += 4 ) {
            double t0 = d1.get(i  ) - d2.get(i  );
            double t1 = d1.get(i+1) - d2.get(i+1);
            double t2 = d1.get(i+2) - d2.get(i+2);
            double t3 = d1.get(i+3) - d2.get(i+3);
            totalCost += t0*t0 + t1*t1 + t2*t2 + t3*t3;
            if (totalCost > best)
                break;
        }
        return totalCost;
    }

    private static int naiveNearestNeighbor(FloatBuffer vec, int laplacian,
        CvSURFPoint[] modelKeypoints, FloatBuffer[] modelDescriptors) {
        int neighbor = -1;
        double d, dist1 = 1e6, dist2 = 1e6;
        for (int i = 0; i < modelDescriptors.length; i++) {
            CvSURFPoint kp = modelKeypoints[i];
            FloatBuffer mvec = modelDescriptors[i];
            if (laplacian != kp.laplacian()) {
                continue;
            }
            d = compareSURFDescriptors(vec, mvec, dist2);
            if (d < dist1) {
                dist2 = dist1;
                dist1 = d;
                neighbor = i;
            } else if (d < dist2) {
                dist2 = d;
            }
        }
        if (dist1 < 0.6 * dist2) {
            return neighbor;
        }
        return -1;
    }

    private static ArrayList<Integer> findPairs(CvSURFPoint[] objectKeypoints, FloatBuffer[] objectDescriptors,
        CvSURFPoint[] imageKeypoints, FloatBuffer[] imageDescriptors) {
        ArrayList<Integer> ptpairs = new ArrayList<Integer>(2 * objectDescriptors.length);
        for (int i = 0; i < objectDescriptors.length; i++) {
            CvSURFPoint kp = objectKeypoints[i];
            FloatBuffer descriptor = objectDescriptors[i];
            int nearestNeighbor = naiveNearestNeighbor(descriptor, kp.laplacian(), imageKeypoints, imageDescriptors);
            if (nearestNeighbor >= 0) {
                ptpairs.add(i);
                ptpairs.add(nearestNeighbor);
            }
        }
        return ptpairs;
    }

    private static Hashtable<Point2D,Point2D> findPairs(CvSeq objectKeypoints, CvSeq objectDescriptors, CvSeq imageKeypoints, CvSeq imageDescriptors) {

        //CvSeqReader reader = new CvSeqReader(), kreader = new CvSeqReader();

        // copy object info
        int total = objectDescriptors.total();
        int elem_size = objectDescriptors.elem_size();
//        opencv_core.cvStartReadSeq(objectKeypoints, kreader, total);
//        opencv_core.cvStartReadSeq(objectDescriptors, reader, elem_size);

        CvSURFPoint[] objectKeypointsArr = new CvSURFPoint[total];
        FloatBuffer[] objectDescriptorsArr = new FloatBuffer[total];

        for (int i = 0; i < total; i++) {
//            objectKeypointsArr[i] = new opencv_features2d.CvSURFPoint(kreader.ptr());
//            objectDescriptorsArr[i] = reader.ptr().capacity(elem_size).asByteBuffer().asFloatBuffer();
            objectKeypointsArr[i] = new CvSURFPoint(opencv_core.cvGetSeqElem(objectKeypoints, i));
            objectDescriptorsArr[i] = opencv_core.cvGetSeqElem(objectDescriptors,i).capacity(elem_size).asByteBuffer().asFloatBuffer();
//            opencv_core.CV_NEXT_SEQ_ELEM(kreader.seq().elem_size(), kreader);
//            opencv_core.CV_NEXT_SEQ_ELEM(reader.seq().elem_size(), reader);
        }

        total = imageDescriptors.total();
        elem_size = imageDescriptors.elem_size();

        CvSURFPoint[] imageKeypointsArr = new CvSURFPoint[total];
        FloatBuffer[] imageDescriptorsArr = new FloatBuffer[total];

//        opencv_core.cvStartReadSeq(imageKeypoints, kreader, 0);
//        opencv_core.cvStartReadSeq(imageDescriptors, reader, 0);

        for (int i = 0; i < total; i++) {
            imageKeypointsArr[i] = new CvSURFPoint(opencv_core.cvGetSeqElem(imageKeypoints, i));
            imageDescriptorsArr[i] = opencv_core.cvGetSeqElem(imageDescriptors,i).capacity(elem_size).asByteBuffer().asFloatBuffer();
//            opencv_core.CV_NEXT_SEQ_ELEM(kreader.seq().elem_size(), kreader);
//            opencv_core.CV_NEXT_SEQ_ELEM(reader.seq().elem_size(), reader);
        }

        ArrayList<Integer> pairs = findPairs(objectKeypointsArr,objectDescriptorsArr,imageKeypointsArr,imageDescriptorsArr);

        Hashtable<Point2D,Point2D> map = new Hashtable<Point2D, Point2D>(pairs.size());
        for(int i=0;i<pairs.size();i+=2){
            map.put(new Point2D.Float(objectKeypointsArr[pairs.get(i)].pt().x(), objectKeypointsArr[pairs.get(i)].pt().y()),
                    new Point2D.Float(imageKeypointsArr[pairs.get(i+1)].pt().x(), imageKeypointsArr[pairs.get(i+1)].pt().y()));
        }
        return map;
    }

    public static BufferedImage resizeImage(BufferedImage im, int new_Width, int new_height){
        IplImage cv_im = IplImage.createFrom(im);
        IplImage cv_res = IplImage.create(new_Width, new_height, cv_im.depth(), cv_im.nChannels());
        opencv_imgproc.cvResize(cv_im, cv_res);
        return cv_res.getBufferedImage();
    }

    public static IplImage resizeImage(IplImage cv_im, int new_Width, int new_height){
        IplImage cv_res = IplImage.create(new_Width, new_height, cv_im.depth(), cv_im.nChannels());
        opencv_imgproc.cvResize(cv_im, cv_res);
        return cv_res;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-07T16:17:26.637

尝试导入

```
import static com.googlecode.javacv.cpp.opencv_legacy.cvExtractSURF; 
```

或更一般的

```
import static com.googlecode.javacv.cpp.opencv_legacy.*; 
```

# android - 如何将图像和文本一起发送到其他应用程序？

> ID：14524613
> 
> 赞同：0
> 
> 时间：2013-01-25T15:10:06.800
> 
> 标签：android, android-intent

我有两个应用程序：`App1`它获取图像并将其分配给地址（拍摄照片的位置），另一个应用程序`App2`从`App1`. 当用户单击 中的按钮时`App1`，我必须将此图像和文本传递给`App2`.

到目前为止，我能够成功地将图像发送到`App2`使用`ACTION_SEND`. 我该如何将文本与图像一起发送？

我已经看过这个 android 教程：http: [//developer.android.com/training/sharing/send.html#send-multiple-content](http://developer.android.com/training/sharing/send.html#send-multiple-content)

但它谈到发送多个图像，而不是发送图像和文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:16:59.133

您可以尝试制作一个 Parcelable 对象来保存文本和图像并发送它。对于 Parcelable，请查看[http://developer.android.com/reference/android/os/Parcelable.html](http://developer.android.com/reference/android/os/Parcelable.html)

```
MyObject obj = new MyObject();
obj.text = "some text";
obj.image = imageUri;

Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE);
shareIntent.putExtras("MyObj", obj);
startActivity(Intent.createChooser(shareIntent, "Share images to.."));

public class MyObject implements Parcelable{
private String image;
private String text;
public void setImage(String _image){
image = _image;
}
public void setText(String _text){
text = _text;
}
public String getImage(){
return image;
}
public String getText(){
return text;
}
public MyObject(Parcel in) {
        readFromParcel(in);
    }
@Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {

        dest.writeString(image);
        dest.writeString(text);
    }
private void readFromParcel(Parcel in) {

        image = in.readString();
        text = in.readString();
    }
public static final Parcelable.Creator CREATOR =
        new Parcelable.Creator() {
            public MyObject createFromParcel(Parcel in) {
                return new MyObject(in);
            }

            public MyObject[] newArray(int size) {
                return new MyObject[size];
            }
        };

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:20:58.447

您可以通过为您的文本添加 putExtra 来使用您发布的示例：

```
ArrayList<Uri> imageUris = new ArrayList<Uri>();
imageUris.add(imageUri1); // Add your image URIs here
imageUris.add(imageUri2);

Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE);
shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUris);
shareIntent.setType("image/*"); 
```

现在你可以添加这个：

```
shareIntent.putExtra("yourkey", "yourtext");
startActivity(Intent.createChooser(shareIntent, "Share images to..")); 
```

# configuration - Unity配置扫描

> ID：14524616
> 
> 赞同：0
> 
> 时间：2013-01-25T15:10:09.873
> 
> 标签：configuration, dependency-injection, unity-container

我正在使用 Microsoft Unity 2.1 IoC 容器。这没有像 Windsor 或 StructureMap 这样的自动/基于约定的配置，所以我通过 NuGet下载了 UnityConfiguration 1.4.1（请参阅[http://thedersen.com/projects/unityconfiguration/ ）。](http://thedersen.com/projects/unityconfiguration/)

通过创建 UnityRegistries（如其他容器中的安装程序和模块）来执行配置。我创建了其中几个用于注册不同类型的类：

```
internal class WidgetRegistry : UnityRegistry
{
    public WidgetRegistry()
    {
        Register<IWidget, Widget>();
    }
}

internal class GubbinsRegistry : UnityRegistry
{
    public GubbinsRegistry()
    {
        Register<IGubbins, FirstGubbins>().WithName("gubbins1");
        Register<IGubbins, SecondGubbins>().WithName("gubbins2");
    }
} 
```

在组合根中，我可以添加以下内容：

```
container.Configure(
    unityRegistry =>
        {
            unityRegistry.AddRegistry<WidgetRegistry>();
            unityRegistry.AddRegistry<GubbinsRegistry>();
        }); 
```

...一切正常。但这意味着每次添加新注册表时都要手动修改组合根代码。我想做的是使用 UnityConfiguration 的扫描工具自动为我完成这项工作；也就是说，删除上述对 AddRegistry() 的调用并将它们替换为如下内容：

```
container.Configure(
    unityRegistry =>
    {
        unityRegistry.Scan(
            scanner =>
            {
                scanner.AssembliesInBaseDirectory();
                scanner.ForRegistries();
            });
    }); 
```

不幸的是，这根本不起作用。WidgetRegistry 和 GubbinsRegistry 构造函数永远不会被调用。

我怀疑我没有正确使用 UnityConfiguration 的这个功能。有谁知道如何做到这一点？

非常感谢，

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:44:30.027

尝试将您的注册表从内部更改为公共。

# arrays - Fortran 内存管理和子程序/函数

> ID：14524625
> 
> 赞同：0
> 
> 时间：2013-01-25T15:10:34.383
> 
> 标签：arrays, function, memory-management, fortran, subroutine

目前我正在编写 Fortran 95 中的数值模拟代码。我的平台是 WIndows，我利用 MSVC 环境和 Intel Fortran 编译器。该代码与该领域中的许多代码一样，创建了一个待解决的方程组。在数值上，这发生在存储一个方阵和一个已知值的向量。现在，为了优化内存，矩阵以方便的形式存储，如压缩稀疏行格式 (CSR) 或类似格式，因此不存储零值。

鉴于这个简短的介绍，这里有我的疑问。由于在编译时我不知道数组的维度，我只是将它们声明为：

```
REAL, DIMENSION(:), ALLOCATABLE :: myArray 
```

一旦我检索到这样一个向量的维度，我就会调用

```
ALLOCATE(myArray(N)) where N is the number of elements that I want to allocate 
```

*   尽管如此，内存还是空的，因为没有存储值，但是为了避免堆栈溢出，会进行内存检查。这样对吗？

现在，用值填充它，占用的空间增加了。Fortran 数组的结构，无论是一维向量还是多维数组，都是在列序中填充一个与值的个数相等的空间。也就是说，如果我们有一个维度为 1000x1000 的 2D 数组，它将存储在按列号排序的 1M 个“连续框”中（首先存储第一列，然后存储第二列，依此类推..）。

*   如果这是真的，那么数据的结构是相同的，对特定值的访问时间是多维向量和一维向量之间的唯一区别吗？

*   那么命令是否`RESHAPE`只改变程序“看到”数组的方式？

我需要的数组在每个子例程/函数共享的模块中定义。特别是，子程序分配和填充它。回到主程序，这没有问题，因为我向用户显示了一些关于它的统计数据。假设我们分配了 400M REAL*4 值，使用了大约 1.5GB 的内存。

*   但是，一旦我进入另一个子程序，程序就会停止说`forrtl: severe(170): Program Exception - Stack Overflow`. 我内存不足。但是如果矩阵已经分配并且我没有分配更多的东西怎么办？注意：子程序使用相同的模块，所以变量已经声明了；我的 RAM 仍有大约 1.3GB 的可用空间；停止在子程序的第一行。

*   子程序（以及函数）是否将数据加倍？我认为在这种情况下，Fortran 会传递我的变量地址，避免复制并直接处理这些值。

最后，和你们中的许多人一样，我喜欢 C++ 中的 STD 库函数，比如 vector::push_back 等等。在 Fortran 中，没有这么漂亮的例程，但仍然有一些非常有用的函数。屏蔽数组，使用`WHERE`or `COUNT`or`MERGE`可以帮助你有效地处理一些操作。

*   但是，当我的矩阵大于 1M 条目时，它们会非常缓慢。在这种情况下，即使是顺序搜索和替换也比创建掩码或使用 where 更快。怎么可能？他们不是多线程的吗？

预先感谢您的耐心等待！！非常欢迎所有建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:59:53.310

评论空间有限，所以我将其发布为答案。显然，您的*堆栈空间*不足，而不是内存不足。Windows 上主线程的堆栈大小在链接时是固定的（默认为 1 MiB），任何更大的堆栈分配都可能导致堆栈溢出。发生这种情况的原因有很多，但主要是：

*   您调用的子程序使用大堆栈数组（例如非`ALLOCATABLE`数组）；
*   您将一个不连续的数组小节传递给子例程，例如`myArray(1:10:2)`，并且您没有该子例程的显式接口。在这种情况下，编译器将对正在传递的数据制作一个最有可能的临时堆栈副本，这可能会耗尽堆栈空间并触发异常。

我猜第一点是与您的情况相关的，因为当您进入子例程时会发生异常（可能在序言中，所有局部变量的堆栈空间都被保留）。您可以指示 Intel Fortran 在项目设置中启用堆数组，看看是否有帮助（不确定 Windows 版本是否默认启用堆数组）。

甚至没有显示一行代码，就很难猜测问题的根源并解决它。

# jquery - 如何将图像标签设置为交替属性左对齐以右对齐

> ID：14524626
> 
> 赞同：1
> 
> 时间：2013-01-25T15:10:37.260
> 
> 标签：jquery

我有一个动态页面，其中元素总是被删除和添加。我正在左右对齐图像。

而不是每次添加或删除某人时都必须更改它。如何使用 jQuery 将 align 属性添加到图像标签？

```
$(".teamcontainer p img").attr("align","left"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:12:26.753

试试这个：

```
$(".teamcontainer p img").each(function(index, el) {
    $(this).attr('align', index % 2 == 0 ? 'left' : 'right');
}); 
```

它遍历选择器中的所有`img`元素，如果它是循环中的偶数项，则分配`align = left`，否则分配`align = right`。

# authentication - composer / satis svn存储库http基本认证

> ID：14524629
> 
> 赞同：1
> 
> 时间：2013-01-25T15:10:46.710
> 
> 标签：authentication, svn, satis, mod-dav-svn

我正在尝试使用 satis 为我的公司创建一个作曲家包存储库。我的 svn 存储库是通过 http (apache svn) 访问的。

我正在尝试将此添加到我的 config.json 的 satis

```
{
    "name": "packages",
    "homepage": "http://packages.example.org",
    "repositories": [
        { "type": "svn",
          "url": "myrepourl" 
       }

    ],
    "require-all": true
} 
```

问题是我无法在存储库中进行身份验证：

```
Repository could  not be processed, svn: OPTIONS of  authorization failed. basic authentication rejected. 
```

如何将用户名/密码传递给 satis？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:18:54.613

根据[作曲家文档](http://getcomposer.org/doc/articles/handling-private-packages-with-satis.md#security)，您必须将用户密钥文件或证书放在项目中，而不是在满足配置中：

使用 SSH：

```
{
    "repositories": [
        {
            "type": "composer",
            "url": "ssh2.sftp://example.org",
            "options": {
                "ssh2": {
                    "username": "composer",
                    "pubkey_file": "/home/composer/.ssh/id_rsa.pub",
                    "privkey_file": "/home/composer/.ssh/id_rsa"
                }
            }
        }
    ]
} 
```

使用证书：

```
{
    "repositories": [
        {
            "type": "composer",
            "url": "https://example.org",
            "options": {
                "ssl": {
                    "cert_file": "/home/composer/.ssl/composer.pem",
                }
            }
        }
    ]
} 
```

# java - Java 为特定会话变量配置超时

> ID：14524632
> 
> 赞同：1
> 
> 时间：2013-01-25T15:10:55.720
> 
> 标签：java, servlets, session-variables, session-timeout

我知道该`web.xml`文件允许为所有会话变量设置超时。但是有没有办法为特定会话变量（如错误消息等）配置超时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:14:50.983

不，会话就是会话，它“一次性”超时。

您可能需要考虑某种形式的“对话范围”；有几种方法可以实现这一点，大多数使用某种过滤器/拦截器。

# templates - 流星：在模板中比较#ifparty.owner == currentUserId？

> ID：14524634
> 
> 赞同：1
> 
> 时间：2013-01-25T15:10:57.803
> 
> 标签：templates, meteor

我对流星很陌生我正在向派对演示添加更新功能我现在只想向我尝试过的派对所有者显示“修改”按钮

```
{{# with party}}
{{#if owner currentUser }}
    <br/><input type="button" value="Modifier" class="btn btn-small edit">
    {{/if} 
```

但是当然这不是正确的方法我找不到如何访问模板中的用户对象来比较它

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:56:34.807

您始终可以使用辅助方法中的`this`（本示例中的一个实例）访问 Template 对象实例：`party`

```
Template.details.isOwner = function() {
    return this.owner === Meteor.userId();
};

{{#if isOwner}}
    <br/><input type="button" value="Modifier" class="btn btn-small edit">
{{/if}} 
```

`canRemove`（它与示例中已经存在的助手非常相似`Parties`。）

# visual-studio - 在 Visual Studio 中创建或切换 pascal 和 camel 大小写的快捷方式

> ID：14524638
> 
> 赞同：3
> 
> 时间：2013-01-25T15:11:02.007
> 
> 标签：visual-studio, keyboard-shortcuts, options, visual-studio-extensions

是否可以在 Visual Studio (2012) 中定义键盘快捷键以在帕斯卡和骆驼大小写之间切换？如果没有，是否存在任何扩展（例如在 ReSharper 中是否可能）？

在 VS2012 中，您可以使用键盘快捷键用于小写和大写，因此您的 myParam 将更改为 MYPARAM 或 myparam，但我需要将其更改为 MyParam。

例如，更改 isEnabled -> IsEnabled -> isEnabled 的快捷方式

# css - 如何使导航菜单拉伸并适合浏览器窗口的边框？

> ID：14524644
> 
> 赞同：0
> 
> 时间：2013-01-24T18:28:42.653
> 
> 标签：css, ajax

在某些网站中，例如这个网站，显示各种选项和链接（如搜索、聊天、问题、标签等）的蓝色框的边框被拉伸并适合浏览器窗口。

我尝试在使用 div 标签创建的网页中这样做，但我无法使框拉伸并适合浏览器窗口。可以使用 div 标签完成吗？或者还有其他方法可以用于例如 CSS 吗？

我不想使用 jQuery 或 AJAX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:59:34.600

是的，DIV 非常适合制作填充到边缘的导航菜单。

您遇到的最可能的问题是您在另一个具有规则的 DIV 中创建 DIV。

例如

CSS

```
.container {width:768px;}
.menu {width:1000px;} 
```

HTML

```
<div class="container">
    <div class="menu">
    The Menu Would Go here
    </div>
</div> 
```

现在正如您在上面的示例中看到的那样，您在容器中有一个菜单 - 现在因为容器的宽度是 768px，所以菜单不能不是 1000px，因为 768px 是第一个容器设置的最大尺寸。

现在有几种方法可以解决这个问题并使用 position:absolute;

因此，假设您希望您的菜单 100% 宽以到达边缘，并且您希望菜单位于顶部，它在 CSS 中将如下所示。

让我们把它付诸实践，看看会发生什么，这样你就知道从这里开始该做什么了：P

CSS

```
.container {min-height:500px;background:#000;width:300px;margin:120px auto;}
.menu {
  position:absolute; /* Tells Menu to ignore the size and position of container */
  background:#CCC;
  width:100%; /* This tells the the Div to be 100% in Width */
  top:0; /* This sets the menu to the top increase number for distance */
  left:0; /* This sets where it should start from left to right */
  height:100px; /* This sets the height of the menu */
  } 
```

这是我刚刚制作的示例中的演示：http: [//jsfiddle.net/9j2pa/](http://jsfiddle.net/9j2pa/) 玩弄它并习惯发生的事情。

此外，您始终可以将 MENU 移出容器，例如：

```
<div class="menu">
The menu is not contained within the container and width:100% will work.
</div>
<div class="container">
The rest of the site is contained within here
</div> 
```

# google-apps-script - Google Apps 脚本写入 JDBC 数据库

> ID：14524646
> 
> 赞同：1
> 
> 时间：2013-01-25T15:11:19.880
> 
> 标签：google-apps-script, google-cloud-sql

我需要一些有关如何写入和读取 MS SQL 数据库的语法帮助。

我想出了连接字符串，现在我只需要一些关于如何写入数据库和读取的帮助。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:19:41.763

下面是一些用于写入（然后取回 ID）、简单标量读取和表格读取的简单示例。

```
function write() {
  var conn = Jdbc.getCloudSqlConnection("jdbc:google:rdbms://your-connection-string-helloworld/mysql");
  var stmt = conn.createStatement();
  var sql = "INSERT INTO animals (name) VALUES ('lion')";
  var count = stmt.executeUpdate(sql,1)//pass in any integer to get auto incremented IDs back
  //check to see any auto generated keys come back. that is optional. 
  var rs = stmt.getGeneratedKeys();
  while(rs.next()) {
    Logger.log(rs.getString(1));
  }
  rs.close();
  stmt.close();
  conn.close();
}

function read() {
var conn = Jdbc.getCloudSqlConnection("jdbc:google:rdbms://your-connection-string-helloworld/mysql");
  var stmt = conn.createStatement();
  var rs = stmt.executeQuery("select * from animals");

  var doc = SpreadsheetApp.create('gdg test');
  var cell = doc.getRange('a1');
  var row = 0;
  while(rs.next()) {
    cell.offset(row, 0).setValue(rs.getString(1));
    cell.offset(row, 1).setValue(rs.getString(2));
    row++;
  }
  rs.close();
  stmt.close();
  conn.close();
}

function simpleRead() {
  var conn = Jdbc.getCloudSqlConnection("jdbc:google:rdbms://your-connection-string-helloworld/mysql");
  var stmt = conn.createStatement();
  var rs = stmt.executeQuery("select database()");
  rs.next(); //if you expect multiple rows, then do this in while(rs.next()) loop
  Logger.log(rs.getString(1));
  rs.close();
  stmt.close();
  conn.close();
} 
```

# c# - 来自字节枚举的字符串

> ID：14524647
> 
> 赞同：0
> 
> 时间：2013-01-25T15:11:23.753
> 
> 标签：c#, .net, string, enums

> **可能重复：**
> [C# 枚举 - 我的枚举可以有友好的名称吗？](https://stackoverflow.com/questions/1415140/c-sharp-enums-can-my-enums-have-friendly-names)
> [使用枚举属性将字符串转换为枚举](https://stackoverflow.com/questions/2787506/cast-string-to-enum-with-enum-attribute)

我有字节值的枚举：

```
enum MarketingEventType : byte {MARKETING_CAMPAIGN, TELESALES, MARKETING_ACTIONS}; 
```

我想给所有元素名称，我将通过 ToSting() 方法获得。例如：

```
MarketingEventType.TELESALES.ToString(); // I get "bla bla bla"
MarketingEventType.MARKETING_ACTIONS.ToString(); // I get "la la la" 
```

可能没有将枚举类型从 BYTE 更改为 STRING？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T15:13:33.900

您不能将枚举类型设置为`string`. 有效的基本类型是`byte`, `sbyte`, `short`, `ushort`, `int`, `uint`, `long`, 和`ulong`.

但是，您可以使用该`Description`属性：

```
enum MarketingEventType
{
    [Description("bla bla bla")]
    TELESALES,
} 
```

检索枚举描述有点麻烦，但您可以使用此方法（甚至可以使用它制作扩展方法！）：

```
public static string GetEnumDescription(Enum value)
{
    FieldInfo fi = value.GetType().GetField(value.ToString());

    DescriptionAttribute[] attributes =
        (DescriptionAttribute[])fi.GetCustomAttributes(
        typeof(DescriptionAttribute),
        false);

    if (attributes != null &&
        attributes.Length > 0)
        return attributes[0].Description;
    else
        return value.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:15:54.050

如果您想要的只是“营销”和“电话销售”，那么您将执行

```
MarketingEventType.TELESALES.ToString(); 
```

...正如您在问题中所说的那样。

如果您想要基础字节值“0”和“1”，您将执行

```
MarketingEventType.TELESALES.ToString("d"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:19:55.903

为什么不简单地创建将为您的枚举值返回字符串的方法？

```
public string GetMarketingEventName(MarketingEventType eventType)
{
    switch(eventType)
    {
        case MarketingEventType.MARKETING_CAMPAIGN: return "blah blah blah";
        case MarketingEventType.TELESALES: return "lalala";
        case MarketingEventType.MARKETING_ACTIONS: return "boo";
        default:
            throw new ArgumentException("eventType");
    }
} 
```

你为什么要点那个？因为您需要在 UI 上显示字符串，并且最好将 UI 与域分开。所以，我认为控制器类上的这种方法比你域中的属性更好。还要考虑本地化。

# java - 在 JTable 中移动行

> ID：14524657
> 
> 赞同：2
> 
> 时间：2013-01-25T15:11:39.743
> 
> 标签：java, swing, jtable

我使用 MVC 模式，我有一个这样的 JTable：

```
List<Enregistrement> desEnregistrements = dao.lireTousLesEnregistrements(1);

    ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addColumn("Date Enregistrement");
    ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addColumn("Libellé");
    ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addColumn("Motif");
    ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addColumn("Date facture");
    ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addColumn("Mode de règlement");
    ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addColumn("Montant");
    ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addColumn("Solde");
    ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addColumn("Etat");
    ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addColumn("Modifier");
    ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addColumn("RecDep");
    ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addColumn("Anticipation");

    for (Enregistrement unEnregistrement : desEnregistrements) {
        ((VueAfficherCompteCIO)vue).getModeleJTableCIO().addRow(new String[]{unEnregistrement.getDate(), unEnregistrement.getIdLibelle(), unEnregistrement.getMotif(), unEnregistrement.getDateFacture(), unEnregistrement.getModeReglement(), unEnregistrement.getMontant(), unEnregistrement.getNouveauSolde(), unEnregistrement.getIdEtat(),unEnregistrement.getId(), unEnregistrement.getRecetteDepense(), unEnregistrement.getAnticipation()});   
    }

    aspectJtable(); 
```

我想在这个 JTable 中使用拖放行，所以我实现了这段代码：[如何在 JTable 中拖放一行？](https://stackoverflow.com/questions/638807/how-do-i-drag-and-drop-a-row-in-a-jtable)

但我不明白如何为我的 TableModel 实现接口“Reorderable”。

当我运行我的项目时，我可以使用拖动和移动（我看到拖动......）但没有移动。

接下来，我有这个错误：

```
java.lang.ClassCastException: vues.VueAfficherCompteCIO$1 cannot be cast to controleurs.Reorderable
at controleurs.TableRowTransferHandler.importData(TableRowTransferHandler.java:55)
at javax.swing.TransferHandler$DropHandler.drop(TransferHandler.java:1536)
at java.awt.dnd.DropTarget.drop(DropTarget.java:450)
at javax.swing.TransferHandler$SwingDropTarget.drop(TransferHandler.java:1274)
at sun.awt.dnd.SunDropTargetContextPeer.processDropMessage(SunDropTargetContextPeer.java:537)
at sun.awt.X11.XDropTargetContextPeer.processDropMessage(XDropTargetContextPeer.java:184)
at sun.awt.dnd.SunDropTargetContextPeer$EventDispatcher.dispatchDropEvent(SunDropTargetContextPeer.java:851)
at sun.awt.dnd.SunDropTargetContextPeer$EventDispatcher.dispatchEvent(SunDropTargetContextPeer.java:775)
at sun.awt.dnd.SunDropTargetEvent.dispatch(SunDropTargetEvent.java:48)
at java.awt.Component.dispatchEventImpl(Component.java:4716)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processDropTargetEvent(Container.java:4566)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4417)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:682)
at java.awt.EventQueue$3.run(EventQueue.java:680)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:696)
at java.awt.EventQueue$4.run(EventQueue.java:694)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

第 55 行是：

```
((Reorderable)table.getModel()).reorder(rowFrom, index); 
```

有人可以帮助我，并解释它是如何工作的？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T15:43:56.770

如果我正确理解示例中的代码来实现接口`Reorderable`，您只需获取放置在 的行`fromIndex`并插入`toIndex`.

例子：

```
public class ReorderableTableModel extends DefaultTableModel implements Reorderable {
  public void reorder(int from, int to) {
    Object o = getDataVector().remove(from);
    getDataVector().add(to, o);
    fireTableDataChanged();
  }
} 
```

不要忘记将此表模型的instanceo设置为您的表

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T15:49:45.063

问题[如何在 JTable 中拖放一行？](https://stackoverflow.com/questions/638807/how-do-i-drag-and-drop-a-row-in-a-jtable)包含您需要的所有信息。

创建时`JTable`，您必须指定一个表模型。该模型必须实现接口`Reorderable`（复制上述问题中的代码）`TransferHandler`才能正常工作。这不是官方的 Swing API，它只是使`TransferHandler`可重用的东西。

新方法必须将行`fromIndex`移到新位置`toIndex`。如果您使用`ArrayList`：

```
 Object row = list.remove( fromIndex );
 if( fromIndex < toIndex ) { toIndex --; } // We now have one row less!
 list.add( toIndex, row ); 
```

# batch-file - 在后台运行时批处理文件不起作用 - 替换驱动器问题

> ID：14524658
> 
> 赞同：0
> 
> 时间：2013-01-25T15:11:54.620
> 
> 标签：batch-file, windows-xp, mapped-drive

我会尽量保持简短，不包括这个批处理文件过程的所有细节。

操作系统：Windows XP 操作：计划任务（后台，我找不到在前台运行它的方法） 问题：未在映射驱动器上创建文件。直接运行批处理文件时，它可以工作。

它执行以下操作（或至少尝试）：

*   清理目录：作品
*   根据替换位置创建可执行文件我们使用以下内容将本地文件夹映射到 K: 驱动器：

`subst K: /D subst K: D:\Development\SVN`

可执行文件是从位于（例如）K:\Sources 到 K:\Executables 上的源代码构建的。

这失败了，原因我还没有发现。如上所述，如果直接运行批处理文件，它不会失败。如果我用 C:\Development\SVN 替换 K:\，问题似乎已经解决，但这并不能解决我在使用 K: 时无法运行它的事实。

我希望这里的任何人都有一个想法，我尝试了很长时间的谷歌搜索+扫描，但无济于事。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:19:57.687

`subst`ed 驱动器在会话本地，并且您的计划任务在另一个会话中运行，然后是您的登录会话。

似乎可以使用命令行为[用户登录会话安排任务，但](https://superuser.com/questions/278233/windows-7-task-scheduler-to-start-application-in-user-session)*只有在用户登录时任务才会运行*。它可能不是您想要的，因此使用完整的非替代路径可能是最好的解决方案。`schtasks.exe`

# jquery - 使用表单值构建 href 调用

> ID：14524667
> 
> 赞同：-3
> 
> 时间：2013-01-25T15:12:26.880
> 
> 标签：jquery, html

我有一个像这样的简单表格：

```
<form action="emplist.html" method="post" rel="external">
Please enter one or several search items. Can be partial.
<label for="empid" class="ui-hidden-accessible">Employee ID:</label>
<input type="text" name="empid" id="s_empid" value="" placeholder="Employee ID"/>
<label for="lname" class="ui-hidden-accessible">Last Name:</label>
<input type="text" name="lname" id="s_lname" value="" placeholder="Last Name"/>
<label for="fname" class="ui-hidden-accessible">First Name:</label>
<input type="text" name="fname" id="s_fname" value="" placeholder="First Name"/>
<label for="department" class="ui-hidden-accessible">Department:</label>
<input type="text" name="department" id="s_department" value="" placeholder="Department"/>
<a href="emplist.html?eid=%s_empid&lnam=%s_lname&fnam=%s_fname&dep=%s_department" data-role="button" data-theme="b" data-icon="search" rel="external">Submit Search </a>
<input type="reset" value="Reset Form" data-theme="e" data-icon="delete"/> 
```

当然不能按原样工作，但总体思路是使用我正在捕获的表单参数构建 href URL。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:13:29.883

这就是[GET 方法](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3)的用途。在您的表单中使用它：

```
<form action="emplist.html" method="get" rel="external">
    <!-- all your fields should go here... -->
    <input type="submit" value="Submit Search" />
</form> 
```

# c# - 如何让newtonsoft将yes和no反序列化为布尔值

> ID：14524669
> 
> 赞同：19
> 
> 时间：2013-01-25T15:12:35.787
> 
> 标签：c#, class, serialization, extend, json.net

注意：我在此提要的底部提供了解决方案。

我有一个 C# Win 8 应用程序，我正在反序列化一些看起来像这样的 json：

```
{
    'Unit': [
        {
            'name':'House 123',
            isAvailable:'no'
        },
        {
            'name':'House 456',
            isAvailable:'yes'
        }]
} 
```

进入使用此接口的类：

```
public interface IUnit
{
    string Name { get; }
    bool isAvailable { get; }
} 
```

但是 Newtonsoft 抛出一个错误：

> 解析值时遇到意外字符：n。路径 'Unit[0].isAvailable，第 1 行，位置 42。

有没有办法扩展 Newtonsoft 以根据得到的 bool 对象属性类型解析 yes/no 或 1/0？现在它只适用于真/假。

有几篇关于类的自定义转换器的帖子，但不是像 bool 这样的原始类型。

有什么建议么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-25T15:26:36.090

```
public class MyBooleanConverter : JsonConverter
{
    public override bool CanWrite { get { return false; } }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var value = reader.Value;

        if (value == null || String.IsNullOrWhiteSpace(value.ToString()))
        {
            return false;
        }

        if ("yes".Equals(value, StringComparison.OrdinalIgnoreCase))
        {
            return true;
        }

        return false;
    }

    public override bool CanConvert(Type objectType)
    {
        if (objectType == typeof(String) || objectType == typeof(Boolean))
        {
            return true;
        }
        return false;
    }
}

public interface IUnit
{
    string Name { get; }

    [JsonConverter(typeof(MyBooleanConverter))]
    bool isAvailable { get; }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-27T10:15:28.603

我会建议[这种方法](https://gist.github.com/randyburden/5924981)

```
using System;
using Newtonsoft.Json;

namespace JsonConverters
{
    public class BooleanJsonConverter : JsonConverter
    {
        public override bool CanConvert( Type objectType )
        {
            return objectType == typeof( bool );
        }

        public override object ReadJson( JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer )
        {
            switch ( reader.Value.ToString().ToLower().Trim() )
            {
                case "true":
                case "yes":
                case "y":
                case "1":
                    return true;
                case "false":
                case "no":
                case "n":
                case "0":
                    return false;
            }

            // If we reach here, we're pretty much going to throw an error so let's let Json.NET throw it's pretty-fied error message.
            return new JsonSerializer().Deserialize( reader, objectType );
        }

        public override void WriteJson( JsonWriter writer, object value, JsonSerializer serializer )
        {
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-27T23:30:51.800

这就是我想出的。

```
public class JsonBooleanConverter : JsonConverter
{
    public override bool CanWrite { get { return false; } }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var value = reader.Value.ToString().ToLower().Trim();
        switch (value)
        {
            case "true":
            case "yes":
            case "y":
            case "1":
                return true;
        }
        return false;
    }

    public override bool CanConvert(Type objectType)
    {
        if (objectType == typeof(Boolean))
        {
            return true;
        }
        return false;
    }
} 
```

用法：

```
var myObj = JsonConvert.DeserializeObject<T>(json, new JsonBooleanConverter()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T16:33:53.990

//这是我想出来的...

```
 using System;
 using System.Collections.Generic;
 using System.IO;
using System.Linq;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;

namespace NewtonTest
{

internal class NewtonTest
{
    public class Data
    {
        public IEnumerable<IUnit> Unit { get; set; }

        public override string ToString()
        {
            return string.Format("Data{{Unit=[{0}]}}",
                string.Join(", ", Unit.Select(c =>
                                string.Format("{0} - Single Unit: {1}", 
                                    c.Name,
                                    c.isSingleUnit.ToString()))));
        }
    }

    public interface IUnit
    {
        string Name { get; }

        // [JsonConverter(typeof(Converter))]
        bool isSingleUnit { get; }
    }

    public class House : IUnit
    {
        public House(string name, bool isSingle)
        {
            this.Name = name;
            this.isSingleUnit = isSingle;
        }

        public string Name { get; private set; }

        public bool isSingleUnit { get; private set; }
    }

    public class Apartment : IUnit
    {
        public Apartment(string name, bool isSingle)
        {
            this.Name = name;
            this.isSingleUnit = isSingle;
        }

        public string Name { get; private set; }

        public bool isSingleUnit { get; private set; }
    }

    private static bool ConvertToBool(string value)
    {
        value =
            value.ToUpper().
                  Replace("YES", "TRUE").
                  Replace("Y", "TRUE").
                  Replace("1", "TRUE").
                  Replace("NO", "FALSE").
                  Replace("N", "FALSE").
                  Replace("0", "FALSE");

        bool result = false;

        bool.TryParse(value, out result);

        return result;
    }

    private class UnitConverter : Newtonsoft.Json.JsonConverter
    {
        public override bool CanConvert(Type objectType)
        {
            return typeof (NewtonTest.IUnit).IsAssignableFrom(objectType);
        }

        public override object ReadJson(Newtonsoft.Json.JsonReader reader, Type objectType, object existingValue,
                                        Newtonsoft.Json.JsonSerializer serializer)
        {
            JObject obj = serializer.Deserialize<JToken>(reader) as JObject;

            if (obj != null)
            {
                string result = obj["isSingleUnit"].ToObject<string>();

                bool isSingleUnit = ConvertToBool(result);

                string name = obj["name"].ToObject<string>();

                if (isSingleUnit)
                {
                    return new NewtonTest.House(name, isSingleUnit);
                }
                else
                {
                    return new NewtonTest.Apartment(name, isSingleUnit);
                }
            }
            else
            {
                return null;
            }
        }

        public override void WriteJson(Newtonsoft.Json.JsonWriter writer, object value,
                                       Newtonsoft.Json.JsonSerializer serializer)
        {
            throw new NotImplementedException();
        }
    }

    public static void Main()
    {
        Newtonsoft.Json.JsonSerializer serializer = new Newtonsoft.Json.JsonSerializer();
        serializer.Converters.Add(new UnitConverter());
        string json =
            "{'Unit':[{'name':'Apartment 123',isSingleUnit:'no'},{'name':'House 456',isSingleUnit:'yes'}]}".Replace(
                '\'', '\"');
        var obj = serializer.Deserialize(new StringReader(json), typeof (Data));
        Console.WriteLine(obj);
        Console.ReadKey();
    }
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-24T21:05:47.910

这是 vb 中 @John 解决方案的一个版本，供任何需要的人使用。它处理布尔值和可为空的布尔值。在写入时它转换为 0/1 以在传输中保存一些字节（而不是真/假）：

```
Imports Newtonsoft.Json

Public Class MyBooleanConverter
    Inherits JsonConverter

Public Overrides ReadOnly Property CanWrite As Boolean
    Get
        Return True
    End Get
End Property

Public Overrides Sub WriteJson(writer As JsonWriter, value As Object, serializer As JsonSerializer)
    Dim boolVal As Boolean = value
    writer.WriteValue(If(boolVal, 1, 0))
End Sub

Public Overrides Function ReadJson(reader As JsonReader, objectType As Type, existingValue As Object, serializer As JsonSerializer) As Object
    Dim value = reader.Value
    If IsNothing(value) OrElse String.IsNullOrWhiteSpace(value.ToString()) OrElse "0" = value Then
        Return False
    End If
    If 0 = String.Compare("yes", value, True) OrElse 0 = String.Compare("true", value, True) Then
        Return True
    End If
    Return False
End Function

Public Overrides Function CanConvert(objectType As Type) As Boolean
    Return objectType = GetType(Boolean) OrElse objectType = GetType(Boolean?) 'OrElse objectType = GetType(String)
End Function
End Class 
```

# nhibernate - 为什么一切都被急切地加载？

> ID：14524671
> 
> 赞同：1
> 
> 时间：2013-01-25T15:12:36.967
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping, queryover

我正在尝试掌握 QueryOver，我希望这会返回一个摘要项目，其中包含急切加载的 ReportRows 集合。

**更新** 第一块代码不在我原来的问题中，但它是我问题的原因 - 感谢 dotjoe 的回答

```
 // some code to create a Summary and a whole graph of child records
    ...
    // then...
    session.Save(summary);
    session.Flush(); // write the changes
    session.Evict(summary); // clear out session to check my query below is 'fresh'

    // Originally-posted code
    Summary summaryAlias = null;
    Report reportAlias = null;
    var summaryQuery =
        session.QueryOver<Summary>(() => summaryAlias)
            .Fetch(x => summaryAlias.Reports).Eager
            .Left.JoinAlias(() => summaryAlias.Reports, () => reportAlias)
            .Where(() => summaryAlias.Id == workItemId);                    

    Summary summary = summaryQuery.SingleOrDefault<Summary>();
    session.Close(); 
```

*但是，当我在调用 session.Close()之后*遇到断点（以防止任何进一步的延迟加载）时，我发现我的 Summary 类中的所有内容都已填充，而不仅仅是 ReportRows 集合。

即使我没想到它们也会填充的一些示例：

```
ReportRow.Student
ReportRow.Programme
ReportRow.Programme.Modules (a collection)
ReportRow.Programme.Modules.Components (another collection inside each 'Module') 
```

我正在使用 Fluent 自动映射，并且我已将其配置为延迟加载，以确保使用：

```
.Conventions.Add(FluentNHibernate.Conventions.Helpers.DefaultLazy.Always()) 
```

并且还尝试了...

```
.Conventions.Add(FluentNHibernate.Conventions.Helpers.LazyLoad.Always()) 
```

为什么要加载所有内容？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:54:36.950

你能发布生成的 hbm.xml 吗？[例子](https://stackoverflow.com/a/3204587/40822)

另外，试试这个查询，看看如果你在 using 语句之后访问任何惰性属性会发生什么......

```
Summary summary  = null;

using(var session = factory.OpenSession())
using(var tx = session.BeginTransaction())
{
    summary = session.QueryOver<Summary>()
        //.Fetch(x => x.Reports).Eager
        .Where(x => x.Id == workItemId)
        .SingleOrDefault<Summary>();

    tx.Commit();
} 
```

# rest - 如何使用 REST 接口在 Glassfish 3.1.2 中创建连接器连接池

> ID：14524681
> 
> 赞同：1
> 
> 时间：2013-01-25T15:13:06.187
> 
> 标签：rest, glassfish

对于多个 Glassfish 3.1.2.2 实例的远程管理，我想配置资源适配器连接池和连接器资源。这些配置只能在资源适配器部署之后进行。

如果我用 asadmin 做事，一切正常。

通过 REST 获取访问权限按预期工作。
例子：

```
curl --user admin:pwd -X GET -H "Accept: application/JSON" 
     http://localhost:4848/management/domain/resources/connector-connection-pool 
```

现在我想使用以下命令和 REST 创建一个连接池

```
asadmin create-connector-connection-pool --raname MulticastDNS-connector
         --connectiondefinition multicastdns.outbound.MulticastDNSRegistry multicastdns/pool 
```

我遵循了一些 Oracle 示例
[http://docs.oracle.com/cd/E18930_01/html/821-2416/gjipx.html#gjijx](http://docs.oracle.com/cd/E18930_01/html/821-2416/gjipx.html#gjijx)或
[http://docs.oracle.com/cd/E19798-01/821 -1751/gjijx/index.html](http://docs.oracle.com/cd/E19798-01/821-1751/gjijx/index.html)
但我尝试过的所有事情都收到了 400 个错误请求。
例子：

```
curl --user admin:pwd -X POST -H "Accept: application/JSON" -H "Content-Type: application/json"
     -d '{"id":"multicastdn%2fspool","connectiondefinitionname":"multicastdns.outbound.MulticastDNSRegistry","resourceAdapterName":"MulticastDNS-connector"}'\
     http://localhost:4848/management/domain/resources/connector-connection-pool -v

# other check
curl --user admin:pwd -X POST -H "Accept: application/JSON" \
    -d id=multicastdns%2fpool \
    -d connectiondefinitionname=multicastdns.outbound.MulticastDNSRegistry \
    -d resourceAdapterName=MulticastDNS-connector \
    http://localhost:4848/management/domain/resources/connector-connection-pool -v 
```

如果我想删除现有资源，结果类似。

```
curl --user admin:pwd -X DELETE -H "Accept: application/JSON" \ 
     http://localhost:4848/management/domain/resources/connector-connection-pool/multicastdns%2fpool -v

# other try
curl --user admin:pwd -X DELETE -H "Accept: application/JSON" \
     -d id=multicastdns%2fpool \
     http://localhost:4848/management/domain/resources/connector-connection-pool -v 
```

如果使用连接器资源 asadmin create-connector-resource --poolname multicastdns/pool jca/multicastdns 尝试第二步，同样的问题

通过 REST 获取有效，但添加和删除条目无效。

谢谢弗洛里安

# php - 用php发送邮件：脚本正在等待答复？

> ID：14524683
> 
> 赞同：1
> 
> 时间：2013-01-25T15:13:10.873
> 
> 标签：php, email, smtp, phpmailer

我正在使用[PHPMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/wiki/PHPMailer?tm=6)类通过 SMTP 发送邮件：

```
 <?php 
require 'php_mailer/class.phpmailer.php';

    $mail = new PHPMailer;

    $mail->IsSMTP();                                      // Set mailer to use SMTP
    $mail->Host = 'smtp.dfgdfgdfg.de';              // Specify main and backup server
    $mail->SMTPAuth = true;                               // Enable SMTP authentication
    $mail->Username = 'dfgdfg';                            // SMTP username
    $mail->Password = 'dfgsdfgdsfg';                           // SMTP password
    //$mail->SMTPSecure = 'tls';                            // Enable encryption, 'ssl' also accepted

    $mail->From = 'community@fdgdfg.de';
    $mail->FromName = 'dfgdfgdg';
    $mail->AddAddress('interview@dfgdfg.de', 'Udo');  // Add a recipient
$mail->AddBCC('bcc@example.com');

    $mail->WordWrap = 50;                                 // Set word wrap to 50 characters
    $mail->IsHTML(true);                                  // Set email format to HTML

    $mail->Subject = 'HTML-Mail mit Logo';
    $mail->Body    = 'Nachfolgend das <b>Logo</b>';
    $mail->AltBody = 'Aktiviere HTML, damit das Logo angezeigt wird';

    if(!$mail->Send()) {
       echo 'Message could not be sent.';
       echo 'Mailer Error: ' . $mail->ErrorInfo;
       exit;
    }

?> 
```

我的问题：

1.  发送到大量邮件的最佳方式是什么（相同的 Mailtext，只是名称不同（Hello $NAME）？
2.  PHP 脚本是否要等到每封邮件都送达？因为有时我想在用户在网站上执行操作时向数百人发送邮件。所以这个用户当然不能等待，直到所有这些邮件都发送成功！

谢谢！亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:20:15.287

您正在设置 PHPMailer 与 SMTP 交互，所以我猜它会等待它完成。这不是最佳选择，因为正如您所说，您将阻止 PHP 脚本，直到 SMTP 响应。

最好通过您的本地主机发送：将 PHPMailer 设置为使用 sendmail，它通常是本地 exim4 或 postfix 的包装器，然后它将为您处理邮件。这要好得多，因为本地服务器将处理任何可能的临时错误，并稍后重试。PHP 不会。

您可能还想探索其他选项，例如 Mandrill 或 Sendgrid 来完成这项工作，尤其是在您进行大量邮寄或批量邮寄的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:16:35.147

> 发送到大量邮件的最佳方式是什么（相同的 Mailtext，只是名称不同（Hello $NAME）？

您可以执行类似设置名称的操作。

```
// rest of code first
$mail->AddAddress("you@example.com")

$ids = mysql_query($select, $connection) or die(mysql_error());
while ($row = mysql_fetch_row($ids)) {
  $mail->AddBCC($row[0]);
}

$mail->Send();//Sends the email 
```

您可以在正文中使用特殊字符串“name_here”并`$name`使用[str_replace](http://php.net/manual/en/function.str-replace.php)函数放置

```
Is the PHP script waiting until every mail is delivered? Because sometimes I want to send a mail to some hundreds people, when a user is doing an action on the website. so this user cant wait of course, until all those mail were sent succesful! 
```

是的，据我所知，您将不得不等待。

如何做一个 str_replace ？假设你的邮件正文如下

```
$body = " Dear %first_name%,

other stuff goes here....... ";

$body = str_replace("%first_name%", $first_name, $body); 
```

以上将用您提供的名称（$first_name）替换 %first_name%。

# excel - 通过 Rally Excel 插件的依赖关系

> ID：14524684
> 
> 赞同：1
> 
> 时间：2013-01-25T15:13:12.020
> 
> 标签：excel, ms-office, rally

我正在尝试通过 Rally Excel 插件重试一组用户故事的依赖信息。我在“管理查询”下的“列”框中看不到“前任、继任者”。

有人知道我如何检索这些数据吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:15:57.490

即使它们没有在对话框中显示为可选列，您仍然可以在 Columns 列表中键入 Predecessors 和 Successors：

![前任 继任者 手动输入](../Images/610cefade411ae953325adf06ef62a9b.png)

它们将在您的工作表中显示为结果：

![在此处输入图像描述](../Images/65a6c57b49b218c882fc04107e3ebaac.png)

# c# - 不正确的语句覆盖含义的更好示例？

> ID：14524688
> 
> 赞同：0
> 
> 时间：2013-01-25T15:13:26.420
> 
> 标签：c#, code-coverage

我试图证明 100% 的语句覆盖率在证明和测试方面并没有多大意义。我想不出任何简单的例子，这是我最好的尝试：

```
TestObject t = null;

            if (Console.ReadLine() == "A")
            {
                t = new TestObject();
                t.Value = 5;

            }
            Console.WriteLine(t.Value);  //exception only when the IF statement was not run as the variable remains null. 
```

此外，当用户按“A”时，语句覆盖率为 100%。但是，当按下其他任何内容时，就会发生异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:05:54.267

我会说你的例子是为此目的的好处。

*   您只需一个测试用例就拥有完整的 (100%) 语句覆盖率。该错误没有被发现。
*   从覆盖率来看，有两个分支（IF 评估 TRUE 或 FALSE），只有一个被覆盖（50%）。如果分支覆盖率达到 100%，就会暴露 bug。这称为分支覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:24:36.903

来自 Bullseye 测试覆盖工具的 Steve Cornnett 有一篇很棒的文章，名为“[语句覆盖有什么问题？](http://www.bullseye.com/statementCoverage.html) ”

您将找到一个完整的分析，说明为什么语句覆盖被认为是最弱的覆盖形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:18:39.420

我认为你的断言是不正确的。通过 100% 的语句覆盖率，您可以确保您能够设计测试用例来验证您的所有代码。您似乎混淆了这样的想法，因为您可以使用单元测试来访问代码中的每一行，因此它正在使用一个测试用例进行全面测试。

# javascript - 使用 jQuery 在所选文本下显示工具栏

> ID：14524696
> 
> 赞同：0
> 
> 时间：2013-01-25T15:13:47.143
> 
> 标签：javascript, jquery, select, text, toolbar

一旦用户选择了一些文本，我试图在一些选定的文本下显示一个工具栏。我浏览了许多 stackoverflow 答案，我能想到的最好的就是下面的代码。

我希望工具栏在用户不仅在**鼠标单击**而且在**键盘选择** *（alt+shift+箭头键）*上选择一些文本时触发。很像在[这个文本编辑器](http://hallojs.org)中。

该`getSelected()`函数在鼠标或键盘选择时返回选定的文本。但是当我在那个范围内插入一个虚拟元素时，它总是在文本区域的顶部插入*（我添加了一些文本，“bar”，以查看虚拟元素的插入位置） 。*

我猜这与`.getRangeAt(0)`. 我想获取所选文本的位置（插入 dummy `<span>`）。

```
function getSelected(){
  var t = '';
  if(window.getSelection){
    t = window.getSelection();
  }else if(document.getSelection){
    t = document.getSelection();
  }else if(document.selection){
    t = document.selection.createRange().text;
  }
  return t;//.toString()
}

$('#post_content').on('select',function(){
    var range = getSelected().getRangeAt(0);
    range.collapse(false);
    var dummy = document.createElement("span");
    // dummy.innerHTML = "bar";
    range.insertNode(dummy);
    var rect = dummy.getBoundingClientRect();
    var x = rect.left, y = rect.top;
    dummy.parentNode.removeChild(dummy);
    alert(x + "/" + y);
}); 
```

查看 JSFiddle：http: [//jsfiddle.net/aTq5q/](http://jsfiddle.net/aTq5q/)

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T12:18:27.083

看起来你有两个问题：

1.  [确定文本区域中插入符号的 X/Y 坐标](https://stackoverflow.com/a/22446703/1269037)
2.  捕获选择更改事件。

对于第一个问题，请查看[Component.io textarea-caret-position 插件](https://github.com/component/textarea-caret-position/)。小，简单，跨浏览器，并且没有任何依赖 - **[demo](http://is.gd/Po7reS)**。

# jquery - jQuery 动画嵌套 div：壁虎和 webkit 的区别

> ID：14524697
> 
> 赞同：0
> 
> 时间：2013-01-25T15:13:55.053
> 
> 标签：jquery, webkit, jquery-animate

这是一个 jQuery 动画问题，我正在为我的 DOM 树中的元素实现滑动效果。

在我的代码的某处，我有一个父 div 充当滑动选项卡，其中嵌套了其他 div。当在按钮上检测到鼠标单击时，父 div 及其内容会滑入屏幕视图，或滑出屏幕。

为简单起见，这里有一些片段。有问题的 div 的 HTML 如下所示：

```
<div id="parentTab" class="tabby">
    <!-- nested here are other divs -->
    <div id="child1"> </div>
</div> 
```

动画代码的javascript：

```
$('#parentTab').animate(
{'left':'-=' +
      ($('#parentTab').width())}, 'slow',
            function() {
                // do something after tab comes into view
            }); 
```

在我的代码中，我只在父 div 上调用 jquery 的 animate()。该代码在 Firefox 上按预期工作。所有嵌套的 div 与父 div 一起向左/向右滑动。但是对于基于 webkit 的浏览器（例如 Safari 或 Chrome），我遇到了一个问题，即父 div 动画正确，但嵌套 div 在视觉上定位不正确，并且似乎停止在它们应该定位的位置。有趣的是，当我使用 Developer 工具检查 HTML 元素时，嵌套的 div 会捕捉到父 div 中的正确位置。所以从这个角度来看，浏览器似乎认为元素的位置正确，但从视觉上看，元素的位置并不正确。

有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:23:55.027

我建议您使用变量来设置动画值，并且不要忘记添加`'px'`Internet Explorer 错误修复。

```
var targetWidth = $('#parentTab').width();

$('#parentTab').animate({'left':'-=' +targetWidth+ 'px'}, 'slow', function() {
      // do something after tab comes into view
}); 
```

# ruby-on-rails - Rails：如何从控制器方法内部模拟表单提交？

> ID：14524699
> 
> 赞同：0
> 
> 时间：2013-01-25T15:13:59.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个 Ruby on Rails 项目，我们希望在该项目中自动化一些表单提交。我们如何模拟从控制器方法内部发布表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:40:06.273

您可以按照下面的 POST 使用 net/http 将表单发布到外部或内部 HTTP 端点。

[将 POST 数据从 rails 中的控制器提交到另一个网站](https://stackoverflow.com/questions/1195962/submitting-post-data-from-the-controller-in-rails-to-another-website)

或者您可以使用流行的 HTTP 客户端或 REST 客户端，例如 httparty、wrest、mechanize 等。查看此处的列表。[https://www.ruby-toolbox.com/projects/rest-client](https://www.ruby-toolbox.com/projects/rest-client)

# php - 是否可以操纵此 PHP 代码输出的日期？

> ID：14524703
> 
> 赞同：0
> 
> 时间：2013-01-25T15:14:22.410
> 
> 标签：php, date

```
<?php echo invoice_due_date($invoice); ?> 
```

上面的代码输出格式为**dd/mm/yyyy**的日期。我正在寻找一种方法来获取该日期，然后从中添加或删除 x 天，然后打印结果。我是 PHP 新手，所以我尝试过的一切都失败了。提前致谢！

此外，如果有帮助，此代码片段来自一个不再受支持的名为“myclientbase”的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:20:14.050

PHP5 有一个很好的类叫做[DateTime](http://php.net/manual/en/class.datetime.php)。

您可以从这样的字符串初始化它：

```
$date = DateTime::createFromFormat('d/m/Y', invoice_due_date($invoice)); 
```

然后，从 PHP 5.3.0 开始，这个类有一个添加时间量的方法：

```
$date->add(new DateInterval('P10D')); 
```

这会使您的日期增加 10 天。请参阅[http://php.net/manual/en/datetime.add.php](http://php.net/manual/en/datetime.add.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:19:41.813

您可以使用 DateTime::add 函数。完整的解释和示例可以在[http://php.net/manual/en/datetime.add.php找到](http://php.net/manual/en/datetime.add.php)

```
$invoice->add(new DateInterval('P20D')); 
```

这将使发票日期增加 20 天。您可以在回显`$invoice`变量之前简单地运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:26:58.250

[strtotime](http://ch2.php.net/strtotime)可以将日期转换为时间值（尽管您必须将斜杠替换为破折号）并在同一操作中添加日期：

```
strtotime(str_replace('/','-',invoice_due_date($invoice)) . ' + 1 day') 
```

[date](http://ch1.php.net/manual/en/function.date.php)可用于将日期格式化为合适的符号。

# html - 剃须刀中的打印收据按钮

> ID：14524716
> 
> 赞同：0
> 
> 时间：2013-01-25T15:14:49.730
> 
> 标签：html, asp.net-mvc-3, razor, printing

我是 Razor 的新手。我的网页已经完成，但我现在想在我的表单中添加一个打印按钮。

我看到我可以在[这里](http://www.codeproject.com/Questions/330502/Asp-net-Print-the-page-on-image-button-click)使用 Asp.Net 添加打印按钮，但我找不到使用 MVC 使用 Razor 添加它的位置。

如果有这方面的线索，请指出正确的方向，但我没有找到。

我要添加css并使用javascript吗？

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:52:30.653

我用了这个答案：

[打印 ASP.NET Web 表单](https://stackoverflow.com/questions/3184852/print-asp-net-web-form/3184862#3184862)

```
<input type="button" value="Print Form" onclick="window.print()" /> 
```

它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:29:11.903

您可以将任何 javascript 事件添加到任何 html-helper。例如将 Html-Attribute 添加到 Link。

```
@Html.ActionLink(
"print window", 
"Print", 
new { id = "someId" }, 
new { onclick = "window.print();" }) 
```

# javascript - 如何在 html 5 中嵌入日历？

> ID：14524717
> 
> 赞同：0
> 
> 时间：2013-01-25T15:14:49.470
> 
> 标签：javascript, html

可以在不使用脚本语言的情况下将日历嵌入网站吗？可以使用 java 脚本完成，但我不确定 html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:00:51.293

如果您的意思是，我如何通过 HTML5 向表单添加日期选择器...使用支持不佳的`<input type="date">`. 欲了解更多信息[http://diveintohtml5.info/forms.html#type-date](http://diveintohtml5.info/forms.html#type-date)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T23:33:40.090

当然，您可以使用 HTML5 日期控件。看看[http://caniuse.com/#feat=input-datetime](http://caniuse.com/#feat=input-datetime)可以看出，实现它​​们的浏览器严重不足，标准化也不是最好的。

尽管如此，基本标记还是很简单的：

```
<input type="date"> 
```

不过，我仍然会推荐 jQuery UI 日历控件之类的东西。

# ios - CGPoint 在 MKPolygonView 中吗？

> ID：14524718
> 
> 赞同：0
> 
> 时间：2013-01-25T15:14:49.917
> 
> 标签：ios, mkoverlay

我试图找出一种方法来检测哪个`MKOverlayView`（实际上`MKPolygonView`）被点击，然后改变它的颜色。

我使用以下代码运行它：

```
- (void)mapTapped:(UITapGestureRecognizer *)recognizer {

    MKMapView *mapView = (MKMapView *)recognizer.view;
    MKPolygonView *tappedOverlay = nil;
    for (id<MKOverlay> overlay in mapView.overlays)
    {
        MKPolygonView *view = (MKPolygonView *)[mapView viewForOverlay:overlay];

        if (view){
            // Get view frame rect in the mapView's coordinate system
            CGRect viewFrameInMapView = [view.superview convertRect:view.frame toView:mapView];
            // Get touch point in the mapView's coordinate system
            CGPoint point = [recognizer locationInView:mapView];
            // Check if the touch is within the view bounds
            if (CGRectContainsPoint(viewFrameInMapView, point))
            {

                tappedOverlay = view;
                break;
            }
        }
    }

    if([[tappedOverlay fillColor] isEqual:[[UIColor cyanColor] colorWithAlphaComponent:0.2]]){
        [listOverlays addObject:tappedOverlay];
        tappedOverlay.fillColor = [[UIColor redColor] colorWithAlphaComponent:0.2];
    }
    else{
        [listOverlays removeObject:tappedOverlay];
        tappedOverlay.fillColor = [[UIColor cyanColor] colorWithAlphaComponent:0.2];
    }
    //tappedOverlay.strokeColor = [[UIColor blueColor] colorWithAlphaComponent:0.7];

} 
```

哪个有效，但有时，取决于我在哪里点击它会出错`MKPolygonView`。我想是因为`CGRectContainsPoint`没有正确计算面积，因为它不是矩形而是多边形。

还有什么其他方法可以做到这一点？我试过了`CGPathContainsPoint`，但结果更糟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:47:17.417

感谢@Ana Karenina，指出了正确的方法，这就是您必须转换手势以使方法`CGPathContainsPoint`' 正常工作的方式。

```
- (void)mapTapped:(UITapGestureRecognizer *)recognizer{

MKMapView *mapView = (MKMapView *)recognizer.view;

MKPolygonView *tappedOverlay = nil;
int i = 0;
for (id<MKOverlay> overlay in mapView.overlays)
{
    MKPolygonView *view = (MKPolygonView *)[mapView viewForOverlay:overlay];

    if (view){
        CGPoint touchPoint = [recognizer locationInView:mapView];
        CLLocationCoordinate2D touchMapCoordinate =
        [mapView convertPoint:touchPoint toCoordinateFromView:mapView];

        MKMapPoint mapPoint = MKMapPointForCoordinate(touchMapCoordinate);

        CGPoint polygonViewPoint = [view pointForMapPoint:mapPoint];
        if(CGPathContainsPoint(view.path, NULL, polygonViewPoint, NO)){
            tappedOverlay = view;
            tappedOverlay.tag = i;
            break;
        }
    }
    i++;
}

if([[tappedOverlay fillColor] isEqual:[[UIColor cyanColor] colorWithAlphaComponent:0.2]]){
    [listOverlays addObject:tappedOverlay];
    tappedOverlay.fillColor = [[UIColor redColor] colorWithAlphaComponent:0.2];
}
else{
    [listOverlays removeObject:tappedOverlay];
    tappedOverlay.fillColor = [[UIColor cyanColor] colorWithAlphaComponent:0.2];
}
//tappedOverlay.strokeColor = [[UIColor blueColor] colorWithAlphaComponent:0.7];

} 
```

# c# - 在此 P/Invoke 用例中正确使用 SafeHandles

> ID：14524720
> 
> 赞同：2
> 
> 时间：2013-01-25T15:14:57.893
> 
> 标签：c#, pinvoke, marshalling, dllimport, handles

在 C# 中使用使用不透明句柄和内部引用计数的本机 Dll，我有以下 P/Invoke 签名（全部用 DllImport 属性装饰）

```
[DllImport("somedll.dll"]
public extern IntPtr getHandleOfA(IntPtr handleToB, int index);  //(1)
public extern IntPtr makeNewHandleOfA();                         //(2)
public extern void   addRefHandleToA(IntPtr handleToA);          //(3)
public extern void   releaseHandleToA(IntPtr handleToA);         //(4)
public extern void   doSomethingWithHandle(IntPtr handleToA)     //(5) 
```

这些调用的含义如下：

1.  从现有句柄 B 获取指向不透明类型 A 的指针/句柄。返回的句柄的内部引用计数不受影响。

2.  新建一个A的句柄，内部引用计数是预先递增的，这个句柄应该由客户端用函数4释放，否则会发生泄漏。

3.  告诉 dll 在内部增加句柄 A 的引用计数。这使我们可以确保 dll 不会在内部释放我们通过函数 1 获得的句柄。

4.  告诉 dll 减少句柄的引用计数。如果我们增加了句柄的引用计数，或者通过函数 2 获取它，则应该调用它。

5.  使用句柄执行一些操作

我想用我自己的 SafeHandle 子类替换 IntPtr。当我通过创建新句柄来获取句柄时，过程很明显；句柄的引用计数在 dll 中是预先递增的，所以我只是重写了 SafeHandle 的 Release 函数，并调用 releaseHandleToA(handle)。使用这个新类“MySafeHandle”，我可以像这样更改上面的 P/Incvoke 签名：

```
public extern MySafeHandleA getHandleOfA(MySafeHandleB handleToB, int index);  //(1)
public extern MySafeHandleA makeNewHandleOfA();                                //(2)
public extern void          addRefHandleToA(MySafeHandleA handleToA);          //(3)
public extern void          releaseHandleToA(MySafeHandleA handleToA);         //(4)
public extern void          doSomethingWithHandle(MySafeHandleA handleToA)     //(5) 
```

但是这里有一个错误：在函数 1 中，获取的句柄没有增加其引用计数，因此尝试释放句柄将是错误的。

所以，也许我应该始终确保 getHandleOfA 调用与立即 addRefHandleToA 配对，如下所示：

```
[DllImport("somedll.dll"]
private extern MySafeHandleA getHandleOfA(MySafeHandleB handleToB, int index);  //(1)
[DllImport("somedll.dll"]
private extern void          addRefHandleToA(MySafeHandleA handleToA);          //(3)

public MySafeHandleA _getHandleOfA(MySafeHandleB handleToB, int index)
{
    var safehandle = getHandleOfA(handleToB, index);
    addRefHandleToA(safeHandle);
    return safeHandle;
} 
```

这安全吗？

编辑：好吧，不，这显然不安全，因为 addRefHandleToA(safeHandle); 可能会失败。有什么办法可以让它安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:22:36.947

当您调用 时`makeNewHandleOfA`，您**拥有**返回的实例，因此您必须释放它。当您调用 时`getHandleOfA`，您**并不拥有**返回的实例，但您仍想管理它的生命周期（即：阻止底层原生库释放它）。

这意味着您基本上需要针对这两个用例使用不同的发布策略。

**选项1**

和：

```
internal class MyOwnedSafeHandleA : MySafeHandleA
{
    protected override bool ReleaseHandle()
    {
        releaseHandleToA(handle);
        return true;
    }
}

internal class MySafeHandleA : SafeHandle
{
    private int refCountIncremented;

    internal void IncrementRefCount(Action<MySafeHandleA> nativeIncrement)
    {
        nativeIncrement(this);
        refCountIncremented++;
    }

    protected override bool ReleaseHandle()
    {
        while (refCountIncremented > 0)
        {
            releaseHandleToA(handle);
            refCountIncremented--;
        }

        return true;
    }
} 
```

您可以像这样声明您的 DllImports：

```
 [DllImport("somedll.dll")]
    public extern MyOwnedSafeHandleA makeNewHandleOfA();
    [DllImport("somedll.dll")]
    private extern MySafeHandleA getHandleOfA(MySafeHandleB handleToB, int index);
    [DllImport("somedll.dll")]
    private extern void addRefHandleToA(MySafeHandleA handleToA); 
```

**选项 2**

您可以像这样声明您的 SafeHandle：

```
internal class MySafeHandleA : SafeHandle
{
    MySafeHandleA(IntPtr handle) : base(IntPtr.Zero, true)
    {
        SetHandle(handle);
    }

    protected override bool ReleaseHandle()
    {
        releaseHandleToA(handle);
        return true;
    }
} 
```

并像这样使用它：

```
[DllImport("somedll.dll"]
private extern IntPtr getHandleOfA(MySafeHandleB handleToB, int index);
[DllImport("somedll.dll"]
private extern void addRefHandleToA(IntPtr ptr);  

public MySafeHandleA _getHandleOfA(MySafeHandleB handleToB, int index)
{
    IntPtr ptr = getHandleOfA(handleToB, index);
    addRefHandleToA(ptr);
    return new MySafeHandleA(ptr);
} 
```

# file - 如何为 samba 配置文件编写 antlr 解析器

> ID：14524722
> 
> 赞同：2
> 
> 时间：2013-01-25T15:15:06.053
> 
> 标签：file, parsing, configuration, antlr, samba

我想为与以下 samba 配置文件非常相似的文档创建解析器。它有很多部分，每个部分都有一个标题行，以 [ 开头，后跟关键字部分名称，例如 global、share_name 等，直到行尾。节标题行之后是此节的参数。我们不知道一个节的结尾，直到我们到达另一个节的开头换行[..，我怎样才能为这种文档编写规则？我发现的所有 antlr 示例都确切地知道何时开始一个部分以及何时结束一个部分。非常感谢！

```
[global]
    netbios name = NETBIOS_NAME
    workgroup = WORKGROUP
    security = user
[SHARE_NAME]
    comment = COMMENT
    force create mode = 0770
    locking = yes
[printers]
    comment = COMMENT
    path = /var/spool/samba
    browseable = No 
```

这是我的语法：

```
grammar SambaConfiguration;

file    :   global_section
    share_name_section
    printer_section
    EOF
;

global_section 
    :   SECTION_TAG_START GLOBAL_SECTION_TAG (.)* SECTION_TAG_END NEW_LINE
    (~SECTION_TAG_START (.)* NEW_LINE)*
    ;

share_name_section 
    :   SECTION_TAG_START SHARE_NAME_SECTION_TAG (.)*  SECTION_TAG_END NEW_LINE
    ((~SECTION_TAG_START) (.)* NEW_LINE)*
    ;

printer_section
    :   SECTION_TAG_START PRINTER_SECTION_TAG (.)* SECTION_TAG_END NEW_LINE
    ((~SECTION_TAG_START) (.)* NEW_LINE)*
    ;

SECTION_TAG_START 
    :   '['
    ;

SECTION_TAG_END
    :   ']'
    ;

GLOBAL_SECTION_TAG
    :   'global' 
    ;

SHARE_NAME_SECTION_TAG 
    :   'SHARE_NAME' 
    ;

PRINTER_SECTION_TAG 
    :   'printer'
    ;   

NEW_LINE :
    '\r' ? '\n' | '\r'
    ;
WHITE_SPACE 
    :   ' ' | '\t'
    ; 
```

不知何故，它无法正常工作。在 Antlrworks 中运行时，它给了我以下异常：

> 在 12:19 NoViableAltException('o'@[1:1: Tokens : (SECTION_TAG_START | SECTION_TAG_END | GLOBAL_SECTION_TAG | SHARE_NAME_SECTION_TAG | PRINTER_SECTION_TAG | NEW_LINE | WHITE_SPACE);])

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:38:39.667

错误信息：

> 在 12:19 NoViableAltException('o'@[1:1: Tokens : (SECTION_TAG_START | SECTION_TAG_END | GLOBAL_SECTION_TAG | SHARE_NAME_SECTION_TAG | PRINTER_SECTION_TAG | NEW_LINE | WHITE_SPACE);])

意味着 ANTLR 遇到一个字符 , `'o'`，它不能为其创建标记。您可能认为它会与`.`解析器规则中的 匹配，但事实并非如此。在解析器规则中，`.`匹配任何标记，而只有在词法分析器规则中，它匹配任何字符。

您的词法分析器仅创建以下标记：`SECTION_TAG_START`、`SECTION_TAG_END`、`GLOBAL_SECTION_TAG`、`SHARE_NAME_SECTION_TAG`、`PRINTER_SECTION_TAG`和。因此，解析器规则内部的一个匹配这些标记中的任何一个，仅此而已。`NEW_LINE``WHITE_SPACE``.`

除非你这样做是为了学习 ANTLR，否则我会犹豫使用 ANTLR 来完成这项任务。您可以通过一些内置的字符串操作和逐行读取输入来更轻松地做到这一点。

使用 ANTLR，您可以执行类似的操作：

```
grammar T;

parse
 : section* EOF
 ;

section
 : header line*
 ;

header
 : SECTION_TAG_START name=text SECTION_TAG_END NEW_LINE
   {
     System.out.println("name=" + $name.text);
   }
 ;

line
 : key=text ASSIGN value=text (NEW_LINE | EOF)
   {
     System.out.println("  key=`" + $key.text.trim() + 
         "`, value=`" + $value.text.trim() + "`");
   }
 ;

text
 : OTHER+
 ;

SECTION_TAG_START : '[';
SECTION_TAG_END   : ']';
ASSIGN            : '=';
NEW_LINE          : '\r'? '\n';
OTHER             : . /* any other char: must be the last rule! */; 
```

解析您的示例输入会将以下内容打印到您的控制台：

```
名称=全局
  键=`netbios 名称`，值=`NETBIOS_NAME`
  键=`工作组`，值=`工作组`
  键=`安全`，值=`用户`
名称=SHARE_NAME
  键=`评论`，值=`评论`
  key=`强制创建模式`, value=`0770`
  键=`锁定`，值=`是`
名称=打印机
  键=`评论`，值=`评论`
  键=`路径`，值=`/var/spool/samba`
  键=`可浏览`，值=`否`
```

# matlab - 我可以使用什么 MATLAB 函数来添加声音剪辑？

> ID：14524724
> 
> 赞同：-1
> 
> 时间：2013-01-25T15:15:17.653
> 
> 标签：matlab, audio, signals, analysis

这是我到目前为止的代码，我被困在 F 部分

```
% Project 1
% Part B

[S1,Fs1,bits] = wavread('F1');
[S3,Fs3,bits3] = wavread('F3');
[S6,Fs6,bits6] = wavread('F6');

S12=downsample(S1,2);
S32=downsample(S3,2);
S62=downsample(S6,2);

% Part D
%F1
L1=length(S1);       %Number of samples
F1=Fs1 ;             %Sampling Frequency
E1 =sum((S1).^2);    %Energy
P1=E1/L1;            %Power
%S12
L12=length(S12);     %Number of samples
F12=Fs1   ;          %Sampling Frequency
E12 =sum((S12).^2);  %Energy
P12=E12/L12     ;    %Power
%F6
L6=length(S6) ;      %Number of samples
F6=Fs6    ;          %Sampling Frequency
E6 =sum((S6).^2) ;   %Energy
P6=E6/L6   ;         %Power
%S62
L62=length(S62);     %Number of samples
F62=Fs6;             %Sampling Frequency
E62 =sum((S62).^2);  %Energy
P62=E62/L62;         %Power

% L1 = 93648
% F1 = 22050
% E1 = 1.3476e+03
% P1 = 0.0144
% L12 = 46824
% F12 = 22050
% E12 = 673.5918
% P12 = 0.0144
% L6 = 5934
% F6 = 22050
% E6 = 34.8697
% P6 = 0.0059
% L62 = 2967
% F62 = 22050
% E62 = 17.4075
% P62 = 0.0059

% Part E

S14=downsample(S1,4);

% Part F
[S2,Fs2,bits2] = wavread('F2');
[S4,Fs4,bits4] = wavread('F4');
[S5,Fs5,bits5] = wavread('F5');
[S7,Fs7,bits7] = wavread('F7'); 
```

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～

我想添加剪辑 S2、S6、S4、S5、S3、S7、S7。

我应该使用什么功能？我一直在寻找一段时间没有运气。

这是这部分代码给我带来的问题：

如何生成一个新信号（F8），其中包含“remember”一词，然后是 0.2 秒的沉默，然后是“you will be with force, always, always”</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:46:55.323

您可能知道 matlab 中的所有内容都与向量有关（S2、S3、... 确实是向量），因此您可以将它们连接起来：您可以`c = vertcat(S2,S3,...)`用于垂直连接或`c = horzcat(S2,S3,...)`水平连接

# cassandra - 分页时的 MutliGet 或多个 Get 操作

> ID：14524726
> 
> 赞同：1
> 
> 时间：2013-01-25T15:15:24.847
> 
> 标签：cassandra

我有一个广泛的列族用作“时间线”索引，其中列名是时间戳。为了防止热点，我按月对 CF 进行分片，以便每个月在 CF 中都有自己的行。

我在 CF 中查询两个日期之间的切片范围，并根据每页的页面记录限制返回的列数，例如 10。

问题是，如果我的日期范围跨越几个月，我会从每行返回 10 列，即使第一行中有 10 个匹配列 - 从而满足我的分页要求。

我可以看到其中的逻辑，但是当我只需要前 10 个匹配列而不管它们跨越多少行时，如果我必须从潜在的多个节点检索冗余记录，这让我觉得效率非常低。

所以我的问题是，如果我的第一次调用没有返回 10 条记录，我最好在第一行执行一个 Get 操作，然后在第二行执行另一个 Get 操作并继续，直到我获得所需的编号。记录数（或达到行数限制），还是只接受冗余并转储不需要的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:23:00.387

我将对您的查询进行采样并记录您需要为每个查询获取多少行才能获得 10 个结果并构建这些数字的直方图。然后，根据直方图，计算出您需要一次获取多少行才能完成，例如，只需对 Cassandra 进行一次查询即可完成 90% 的查找。至少这是一个好的开始。

如果您几乎总是需要获取多于一行，请考虑将您的时间线分成比一个月更大的块。或者，如果您想采用更灵活的方法，请根据每个单独时间线的流量使用不同的存储桶大小：[http](http://www.datastax.com/dev/blog/advanced-time-series-with-cassandra) ://www.datastax.com/dev/blog/advanced-time-series-with-cassandra （请参阅“可变时间桶大小”部分）。

# c# - 无法在设计器中打开数据集 - 缺少 XSD

> ID：14524727
> 
> 赞同：0
> 
> 时间：2013-01-25T15:15:28.580
> 
> 标签：c#, winforms, xsd, dataset

我的`DataSet`C# Winforms 项目中有一个用于向 Crystal 发送数据的项目。今天早上，VS不再允许我`DataSet`在设计器中打开。它显示以下错误消息：项目目录中不存在“ScribbleSoftDataSet”项。它可能已被移动、重命名或删除。我已经验证这些文件仍然在项目目录中，并且我使用数据集中适配器的解决方案仍然可以编译。我还尝试`DataSet`从解决方案中排除，然后重新添加。任何人都可以提出另一种解决方案吗？我真的不想再次构建数据集，因为它有大约 35 个适配器。下面是我在 VS 2008 Pro 中看到的屏幕截图。

![在此处输入图像描述](../Images/5cf6efcdf3397ef72c23b43304eb663a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T03:10:22.503

好吧，我想我知道出了什么问题。出于某种原因，VS 删除了我的 XSD 文件并损坏了项目文件。我找到了 DataSet 的 XSD 的最新备份，并在删除了与 DataSet 相关的所有旧文件后将其包含在项目中。创建了两个 Designer 文件，因为项目文件中仍然存在旧设计器文件的条目。这导致了一堆编译器错误，直到我理顺了项目文件

# c# - 正确使用string.format在winform c#中显示字符串

> ID：14524728
> 
> 赞同：0
> 
> 时间：2013-01-25T15:15:30.650
> 
> 标签：c#, winforms

**我有一个窗口形式，在其中显示列表视图中的所有目录。如果文件已经存在，则复制文件，它会再次将其复制附加 file.txt(1)。如果再次复制 file.txt(2)**

```
string fileNameOnly = Path.GetFileNameWithoutExtension(file);
string extension = Path.GetExtension(file);
string pathDir = Path.GetDirectoryName(file);
string tempFileName = string.Format("{0}({1})", fileNameOnly, count++);
string newfileName = Path.Combine(pathDir, tempFileName + extension);

if (MessageBox.Show(file + "is already exists\r\nDo you want to copy Again?",
                    "Overwrite", MessageBoxButtons.OKCancel,
                    MessageBoxIcon.Asterisk) == DialogResult.OK)
{
    //  Directory.Move(file, Path.Combine(new string[] { DestinationFolder, newfileName }));
    File.Copy(file, Path.Combine(new string[] { DestinationFolder, newfileName }));
    MessageBox.Show("File Copied"); 
```

但问题是，当我一次又一次地复制文件时，模式就像 file.txt(1)/file.txt(1)(1)/file.txt(1)(1)(1)/ 它没有增加里面的数字..我不知道每次复制时如何增加计数..任何人都可以告诉我我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:17:40.420

我认为以下应该对你有用。

```
string tempFileName = string.Format("{0}({1})", fileNameOnly, count++); 
```

{} 中的任何内容都是占位符。您使用了 {(1)}，它始终为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:20:31.470

`count++`意味着变量在评估后会递增。你可能想要这个：

```
string tempFileName = string.Format("{0}({1})", fileNameOnly, ++count); 
```

（请注意，我还将括号移到大括号之外）

**编辑**：

此外，您总是使用完整的文件名（不带扩展名）来创建新文件名。但是你应该用 old-number+1 替换 old-number。

试试这个：

```
int count = 0;
string fullPath = file;
while (File.Exists(fullPath))
{
    string fileName = Path.GetFileName(file);
    string extension = Path.GetExtension(fileName);
    string fileNameWithoutExtension = Path.GetFileNameWithoutExtension(fileName);
    int lastIndexOfOpenBracket = fileNameWithoutExtension.LastIndexOf('(');
    string fileNameWithoutNumber = fileNameWithoutExtension.Substring(0, lastIndexOfOpenBracket);
    fileNameWithoutExtension = string.Format("{0}({1})", fileNameWithoutNumber, ++count);
    fullPath = Path.Combine(DestinationFolder, fileNameWithoutExtension + extension);
}
if (MessageBox.Show(file + " already exists\r\nDo you want to copy Again?",
        "Overwrite", MessageBoxButtons.OKCancel,
        MessageBoxIcon.Asterisk) == DialogResult.OK)
{
    File.Copy(file, fullPath);
    MessageBox.Show("File Copied");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:20:49.297

你犯了简单的错误

```
string tempFileName = string.Format("{0}({1})", fileNameOnly, count++); 
```

将 {(1)} 替换为 ({1})

# javascript - jQuery Slide on Hover 单独移动

> ID：14524733
> 
> 赞同：0
> 
> 时间：2013-01-25T15:15:56.577
> 
> 标签：javascript, jquery, mouseover

如果鼠标结束，我在一些帮助下制作了一些样式来移动文本。我的问题是我无法分开动作。如果我结束了任何盒子，那么所有盒子都会产生效果。

```
$(document).ready(function(){
    $('.up-down').mouseover(function(){
        $('.default').stop().animate({
            height: 200    
        }, 200);                        
    }).mouseout(function(){
        $('.default').stop().animate({
            height: 240 
        }, 200)    
    })
}); 
```

看这里：http: [//jsfiddle.net/snHhN/](http://jsfiddle.net/snHhN/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:17:54.763

您必须选择当前悬停元素的子元素：

```
$(document).ready(function(){
    $('.up-down').mouseover(function(){
        $(this).children('.default').stop().animate({
            height: 200    
        }, 200);                        
    }).mouseout(function(){
        $(this).children('.default').stop().animate({
            height: 240 
        }, 200)    
    })
}); 
```

[**演示**](http://jsfiddle.net/snHhN/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:21:33.240

因为您正在使用`$('.default')`具有类默认值的元素，所以将对其进行操作。

如果 .default 在 .up-down 内，您可以使用

```
$(this).find('.default') 
```

...它只会作用于正确的元素。

# ios - 如何恢复显示 UIAlertView 时消失的 MBProgressHUD？

> ID：14524736
> 
> 赞同：1
> 
> 时间：2013-01-25T15:16:07.840
> 
> 标签：ios, uialertview, mbprogresshud

我的应用程序在从服务器获取数据时显示添加到主窗口的 MBProgressHUD。如果它需要登录，它会显示一个 UIAlertView 来提示用户输入用户名和密码。当 UIAlertView 显示时，MBProgressHUD 隐藏 - 这不是由于我的代码中的任何内容，而是我想要的行为。但是，当 UIAlertView 消失时，我希望 HUD 回来。我可以通过调用来获取它们`[MBProgressHUD allHUDsForView:window]`，但是它们的超级视图现在是`nil`并且调用`-[show:]`没有效果。

如何恢复显示 UIAlertView 时消失的 MBProgressHUD？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:26:27.293

这不是您确切问题的答案，而是解决您问题的另一种方法，

我会尝试自己控制进度，因为我知道我是调用 uilaertview 并驳斥它的人。那么为什么不使用两个 hud 呢？

```
// Add when your fetch method is called
        MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
        hud.labelText = @"Loading...";

//in your alertview method
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                    message:@"Message"
                                                   delegate:self
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];

    //dissmiss progress hud before alertview is shown
    [MBProgressHUD hideHUDForView:self.view animated:YES];

    [alert show];

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"OK"])
    {
        NSLog(@"OK button is clicked on alertview");

         //show another hud
         MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
        hud.labelText = @"Loading...";

    }
} 
```

# mysql - 如何用 MySQL 中的值替换 NULL？

> ID：14524740
> 
> 赞同：0
> 
> 时间：2013-01-25T15:16:20.167
> 
> 标签：mysql, database

我有一张足球比分表。每当我向一个玩家添加分数时，它会自动在同一行中为其他玩家添加 NULL：

像这样：

```
player1 1-0, NULL, 4-1
player2 5-2, 4-1, NULL
player3 2-1, NULL, NULL 
```

我想要的是当我向玩家添加新分数时，Null 应该替换为该值（例如对于玩家一，它应该是`1-0`,`4-1`而不是`1-0`, `NULL`, `4-1`）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:19:47.673

即使在[手册](http://dev.mysql.com/doc/refman/5.0/en/update.html)上很容易找到，像这样的东西应该可以工作......

```
UPDATE yourTable p
SET p.SomeField = p.NewValue
WHERE p.SomeField is NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:32:20.817

在您的问题中，您似乎在每个玩家旁边都有三列。这是为什么？这些列代表什么？

我建议您示例中的单元格是游戏，这就是您要建模的内容。您应该创建一个包含, , ,`game`等列的表。这将模拟谁与谁交手，以及各自的得分是多少。`player1``player2``score1``score2`

您可以为每个游戏添加更多信息，例如，玩游戏的时间。

# android - 通知自定义 ListAdapter 有关特定对象的更改

> ID：14524743
> 
> 赞同：0
> 
> 时间：2013-01-25T15:16:31.710
> 
> 标签：android, listview, android-activity, fragment, listview-adapter

我有扩展 ArrayAdapter 的自定义 ListAdapter ：

```
private class MyPrivateClassListAdapter extends ArrayAdapter<someObject> {

            private ArrayList<someObject> items;

            public MyPrivateClassListAdapter(Context context, int textViewResourceId, ArrayList<someObject> items) {
                    super(context, textViewResourceId, items);
                    this.items = items;                             
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                    View v = convertView;

                    if (v == null)
                    {
                        LayoutInflater vi = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        //cashedHolder=new CashedValuesForListView(convertView);
                        v = vi.inflate(R.layout.some_xml, null);

                    }

                    someObject o = items.get(position);      

                    if (o != null) {    

                                TextView myTxt = (TextView) v.findViewById(R.id.myTextboxId);

                                myText.setText("some text");

                    }
                    return v;
            }
        } 
```

这个 ArrayAdapter 在我的主要活动中，所以我在点击的主要活动中调用它：

```
 this.m_adapter = new MyPrivateClassListAdapter(getActivity(), R.layout.rows_to_fill, someObject);
         myList.setAdapter(this.m_adapter); 
```

到目前为止一切都很好，但问题是，从这个主要活动中，我正在调用另一个片段，它将更改 myListview 中的值（在某些点击触发时）（例如，它将在特定行上设置另一个文本。）。

我可以在短时间内更改列表视图中的值（滚动列表后它会回到旧状态）：

```
int visiblePosition = myList.getFirstVisiblePosition();
View v = mylist.getChildAt(itemIndex - visiblePosition);

 TextView mytextView = (TextView )v.findViewById(R.id.myTextboxId);         
 mytextView.setTxt("I ' va changed"); 
```

，这样做的正确方法是什么（告诉自定义适配器数据已更改（由实例片段引起）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:20:01.857

更好的方法是在数组列表中进行更改并通过调用 notifyDataSetChanged 通知列表视图

# python - 获取字符串以列值开头的所有行

> ID：14524745
> 
> 赞同：2
> 
> 时间：2013-01-25T15:16:33.757
> 
> 标签：python, sqlalchemy

使用 SQLAlchemy，很容易获取给定列以给定字符串开头的所有行。但是如何翻转它，以便获得字符串开头与列匹配的行？

即，如果字符串是“stackoverflow”，我希望它与值为“stack”的行匹配

如有必要，我可以将正则表达式存储在列中，而不仅仅是字符串，但我也不知道如何反转正则表达式比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:40:46.733

这是实现为 sqlalchemy 表达式的[SQL 解决方案](https://stackoverflow.com/a/9667309/1296661)

```
class Foo(Base):
    __tablename__="foo_tablename"
    bar = Column(String(80))

bar = 'stackoverflow'
session.query(Foo).filter(literal('stackoverflow').like(func.concat(Foo.bar, '%'))) 
```

SQLAlchey 日志显示生成的查询：

```
>>INFO sqlalchemy.engine.base.Engine SELECT bar FROM foo_tablename WHERE :param1 LIKE CONCAT(foo_tablename.bar_column,'%')
>>INFO sqlalchemy.engine.base.Engine {'param1': 'stack'} 
```

请注意：

*   这种类型的 sql 查询会阻止数据库使用列索引 - 因此它是潜在的性能瓶颈。

因此，如果我需要将此类功能添加到生产中，我会考虑使用数据库提供的全文搜索功能。SQLAlchemy 不支持全文搜索，因为它是特定于数据库的功能。请参阅[将 PostgreSQL 全文搜索与 SQLAlchemy 相结合](http://lowmanio.co.uk/blog/entries/postgresql-full-text-search-and-sqlalchemy/)的示例。

**更新**

用户[Audrius Kažukauskas](https://stackoverflow.com/users/1870151/audrius-kazukauskas)建议如何摆脱原始 sql。所以这消除了[使用文字 SQL](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#using-literal-sql)的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:16:35.137

也许有更好的方法，但这应该有效：

```
bar = 'stackoverflow'
session.query(Foo).filter(
    Foo.data.in_([bar[:i] for i in xrange(5, len(bar) + 1)])
) 
```

# entity-framework - 安装特定版本的 EntityFramework

> ID：14524748
> 
> 赞同：2
> 
> 时间：2013-01-25T15:16:46.980
> 
> 标签：entity-framework, nuget

我想安装旧版本的 EF，但我不知道版本号。我们可以在 Nuget 中做到这一点吗？使用管理控制台总是得到最新的而不是想要的。

我想从下拉菜单中查找它并选择一个。使用命令行有点愚蠢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:57:01.820

要使用包管理器控制台查看 EntityFramework NuGet 包的所有版本，您可以运行：

```
Get-Package -Filter EntityFramework -ListAvailable -AllVersions | Where-Object { $_.Id -eq 'EntityFramework' } 
```

如果您想使用 GUI，请查看[NuGet 包资源管理器](http://npe.codeplex.com/)。有一个选项可以显示所有版本的 NuGet 包。

[或者，您可以在NuGet 网站](http://nuget.org/packages/EntityFramework)上浏览 NuGet 包版本。

# java - 将对象转换为通用类型以返回

> ID：14524751
> 
> 赞同：162
> 
> 时间：2013-01-25T15:16:54.220
> 
> 标签：java, generics, casting

有没有办法将对象转换为方法的返回值？我尝试过这种方式，但它在“instanceof”部分给出了编译时异常：

```
public static <T> T convertInstanceOfObject(Object o) {
    if (o instanceof T) {
        return (T) o;
    } else {
        return null;
    }
} 
```

我也试过这个，但它给出了一个运行时异常，ClassCastException：

```
public static <T> T convertInstanceOfObject(Object o) {
    try {
        T rv = (T)o;
        return rv;
    } catch(java.lang.ClassCastException e) {
        return null;
    }
} 
```

有没有一种方法可以轻松做到这一点：

```
String s = convertInstanceOfObject("string");
System.out.println(s); // should print "string"
Integer i = convertInstanceOfObject(4);
System.out.println(i); // should print "4"
String k = convertInstanceOfObject(345435.34);
System.out.println(k); // should print "null" 
```

编辑：我写了一份正确答案的工作副本：

```
public static <T> T convertInstanceOfObject(Object o, Class<T> clazz) {
    try {
        return clazz.cast(o);
    } catch(ClassCastException e) {
        return null;
    }
}

public static void main(String args[]) {
    String s = convertInstanceOfObject("string", String.class);
    System.out.println(s);
    Integer i = convertInstanceOfObject(4, Integer.class);
    System.out.println(i);
    String k = convertInstanceOfObject(345435.34, String.class);
    System.out.println(k);
} 
```

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2013-01-25T15:19:52.510

`Class`由于编译期间的泛型类型擦除，您必须使用实例。

```
public static <T> T convertInstanceOfObject(Object o, Class<T> clazz) {
    try {
        return clazz.cast(o);
    } catch(ClassCastException e) {
        return null;
    }
} 
```

[该方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#cast%28java.lang.Object%29)的声明是：

```
public T cast(Object o) 
```

这也可以用于数组类型。它看起来像这样：

```
final Class<int[]> intArrayType = int[].class;
final Object someObject = new int[]{1,2,3};
final int[] instance = convertInstanceOfObject(someObject, intArrayType); 
```

请注意，当`someObject`传递给它时，`convertToInstanceOfObject`它具有编译时类型`Object`。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-06-02T07:26:44.420

我偶然发现了这个问题，它引起了我的兴趣。接受的答案是完全正确的，但我认为我确实在 JVM 字节码级别提供了我的发现来解释为什么 OP 遇到`ClassCastException`.

我的代码与 OP 的代码几乎相同：

```
public static <T> T convertInstanceOfObject(Object o) {
    try {
       return (T) o;
    } catch (ClassCastException e) {
        return null;
    }
}

public static void main(String[] args) {
    String k = convertInstanceOfObject(345435.34);
    System.out.println(k);
} 
```

对应的字节码是：

```
public static <T> T convertInstanceOfObject(java.lang.Object);
    Code:
       0: aload_0
       1: areturn
       2: astore_1
       3: aconst_null
       4: areturn
    Exception table:
       from    to  target type
           0     1     2   Class java/lang/ClassCastException

  public static void main(java.lang.String[]);
    Code:
       0: ldc2_w        #3                  // double 345435.34d
       3: invokestatic  #5                  // Method java/lang/Double.valueOf:(D)Ljava/lang/Double;
       6: invokestatic  #6                  // Method convertInstanceOfObject:(Ljava/lang/Object;)Ljava/lang/Object;
       9: checkcast     #7                  // class java/lang/String
      12: astore_1
      13: getstatic     #8                  // Field java/lang/System.out:Ljava/io/PrintStream;
      16: aload_1
      17: invokevirtual #9                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      20: return 
```

请注意，`checkcast`字节码指令发生在 main 方法中，而不是`convertInstanceOfObject`and`convertInstanceOfObject`方法没有任何可以 throw 的指令`ClassCastException`。因为 main 方法没有捕获，`ClassCastException`因此当您执行 main 方法时，您将得到 a`ClassCastException`而不是 print 的期望`null`。

现在我将代码修改为接受的答案：

```
public static <T> T convertInstanceOfObject(Object o, Class<T> clazz) {
        try {
            return clazz.cast(o);
        } catch (ClassCastException e) {
            return null;
        }
    }
    public static void main(String[] args) {
        String k = convertInstanceOfObject(345435.34, String.class);
        System.out.println(k);
    } 
```

对应的字节码为：

```
public static <T> T convertInstanceOfObject(java.lang.Object, java.lang.Class<T>);
    Code:
       0: aload_1
       1: aload_0
       2: invokevirtual #2                  // Method java/lang/Class.cast:(Ljava/lang/Object;)Ljava/lang/Object;
       5: areturn
       6: astore_2
       7: aconst_null
       8: areturn
    Exception table:
       from    to  target type
           0     5     6   Class java/lang/ClassCastException

  public static void main(java.lang.String[]);
    Code:
       0: ldc2_w        #4                  // double 345435.34d
       3: invokestatic  #6                  // Method java/lang/Double.valueOf:(D)Ljava/lang/Double;
       6: ldc           #7                  // class java/lang/String
       8: invokestatic  #8                  // Method convertInstanceOfObject:(Ljava/lang/Object;Ljava/lang/Class;)Ljava/lang/Object;
      11: checkcast     #7                  // class java/lang/String
      14: astore_1
      15: getstatic     #9                  // Field java/lang/System.out:Ljava/io/PrintStream;
      18: aload_1
      19: invokevirtual #10                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      22: return 
```

请注意，方法中有一条`invokevirtual`指令`convertInstanceOfObject`调用`Class.cast()`throws的方法，该方法`ClassCastException`将被`catch(ClassCastException e)`bock 捕获并返回`null`；因此，“null”会毫无例外地打印到控制台。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-06-28T09:01:47.467

如果你不想依赖抛出异常（你可能不应该），你可以试试这个：

```
public static <T> T cast(Object o, Class<T> clazz) {
    return clazz.isInstance(o) ? clazz.cast(o) : null;
} 
```

# coded-ui-tests - 如何在编码的 ui 测试中刷新浏览器

> ID：14524756
> 
> 赞同：3
> 
> 时间：2013-01-25T15:16:58.610
> 
> 标签：coded-ui-tests

我的应用程序已在 IE 9 中启动并运行，但有时页面上的所有内容都无法正确加载，这会导致我的编码 ui 测试失败。因此，我想在我的编码 ui 测试中添加代码以在发生这种情况时刷新（F5）浏览器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:52:11.430

当您启动 Web 浏览器时，它会返回该`BrowserWindow`对象的一个​​实例。该`BrowserWindow`对象包含一个`Rrefresh`您可以调用的方法：

```
BrowserWindow currentBrowser = BrowserWindow.Launch(new Uri("https://www.google.com/"));
currentBrowser.Refresh(); 
```

如果您需要在不同的地方进行刷新，您还可以调用 use`Locate`方法来获取您正在使用的实例：`BrowserWindow`

```
BrowserWindow currentBrowser = BrowserWindow.Locate("title of your browser window");
currentBrowser.Refresh(); 
```

# r - ggplot 和 geom_bar 的问题

> ID：14524761
> 
> 赞同：2
> 
> 时间：2013-01-25T15:17:19.700
> 
> 标签：r, ggplot2, bar-chart

这里更新的例子：

```
df <- data.frame(a=rep(c("A","B"),each=10),
                 b=rep(rep(c("C","D"),each=5),2),
                 c=c(sample(letters[1:5]), sample(letters[6:10]),           
                     sample(letters[1:5]), sample(letters[6:10])),
                 d=c(0.10,0.18,0.34,0.35,0.59,0.16,0.38,0.40,0.53,0.58,
                     0.37,0.62,0.83,1.46,-0.91,-0.79,-0.52,-0.43,-0.01,0.34))

> df
   a b c     d
1  A C b  0.10
2  A C e  0.18
3  A C a  0.34
4  A C c  0.35
5  A C d  0.59
6  A D i  0.16
7  A D j  0.38
8  A D h  0.40
9  A D f  0.53
10 A D g  0.58
11 B C e  0.37
12 B C d  0.62
13 B C a  0.83
14 B C c  1.46
15 B C b -0.91
16 B D f -0.79
17 B D i -0.52
18 B D h -0.43
19 B D j -0.01
20 B D g  0.34 
```

如果仔细观察，您会发现 d 列在 b 列中总是从小到大排序。

第一个情节是我希望情节与事实不同的事实，即显示的条形不是按 d 的顺序。所以条形图不会从小到大出现：

```
p <- ggplot(df, aes(x=c, y=d, fill=b, stat="identity")) +

facet_grid(. ~ a) +

geom_bar()  

print(p) 
```

![条形图1](../Images/27f36ce087789e7aab2cae3fdd50dff0.png)

这是因为 c 列是一个因子，并且这些因子的排序显然与 d 列的顺序不同。所以我做了以下事情：

```
df$c <- paste(1:nrow(df), df$c, sep="_")

df$c <- factor(df$c, levels = unfactor(df$c))

p <- ggplot(df, aes(x=c, y=d, fill=b, stat="identity")) +

            facet_grid(. ~ a) +

            geom_bar()  

print(p) 
```

产生以下情节：

![在此处输入图像描述](../Images/b26ca9b3a0317afcc439713a5aefff22.png)

这里的顺序是正确的。但是，正如您所看到的，我创建了独特的因素，我分别为 A 和 B 中不存在的那些空间获得了这些空间。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:49:38.383

我认为这实际上是“ggplot”函数的一个常见错误。如果您设置轮廓颜色（即`aes(colour="red")`），您将看到您实际上是在绘制所有四个值，但它们是在彼此之上绘制的。堆叠警告是因为 'position' 的默认值是“stack”。只需包含`position="dodge"`论点，它就会消失。

现在，要实际解决您的问题。你需要给 'ggplot' 一些东西来区分 X(A)、X(B)、Y(A) 和 Y(B) 的值。乍一看，您可能很想使用 [b] 值，但您不想要所有额外的空格。让我们调整您的数据框，使 [b] 只有 1s 和 2s：

```
df <- data.frame(a=rep(rep(c("A","B"),each=2),2), 
b=rep(1:2,4), 
c=rep(c("X","Y"),each=4), 
d=c(1.2,1.1,1.15,1.1, -1.1,-1.05,-1.2,-1.08)) 
```

一旦你知道问题，情节实际上很容易修复。首先，将 [b] 设置为您的 x 轴，并将 [a] 添加到您的构面。然后使用带有空白元素的“主题”从 [b] 中删除所有烦人的乱码：

```
p <- ggplot(NULL, aes(x=b, y=d)) +      
facet_grid(. ~ c + a) +
geom_bar(data = df, stat="identity", position="dodge") +
theme(axis.ticks = element_blank(), axis.text.x = element_blank(), axis.title.x = element_blank())

print(p) 
```

如果这不是您想要的，它至少应该足够接近，您只需要进行外观更改。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:22:32.910

现在你已经改变了问题，'ggplot' 不能为你做这件事。通过给出 [df$c] 级别，您可以对数据进行排序，但只能基于第一组 [c] 值。例如：

```
df$c <- factor(df$c, levels=levels(df$c)[order(df$d)]) 
```

但这不起作用，因为您尝试对 [df$c] 进行两次排序（一次用于“A”，一次用于“B”）。

您确实需要将其分成两个单独的图，然后将两个视口彼此相邻地绘制。

**设置视口**：

```
grid.newpage()
pushViewport(viewport(layout = grid.layout(1, 2))) 
```

**地块 A**：

```
a_df <- df[df$a=="A",]
a_df$c <- factor(a_df$c, levels=levels(a_df$c)[order(a_df$d)])

a_p <- ggplot(a_df, aes(x=1:10, y=d, fill=b)) +
facet_grid(. ~ a) +
geom_bar(stat="identity", position="dodge")

print(a_p, vp = viewport(layout.pos.row=1, layout.pos.col=1)) 
```

**B地块**：

```
b_df <- df[df$a=="B",]
b_df$c <- factor(b_df$c, levels=levels(b_df$c)[order(b_df$d)])

b_p <- ggplot(b_df, aes(x=1:10, y=d, fill=b)) +
facet_grid(. ~ a) +
geom_bar(stat="identity", position="dodge")

print(b_p, vp = viewport(layout.pos.row=1, layout.pos.col=2)) 
```

从这里，您可以担心删除多余的图例，选择要标记的轴等，但它看起来与您的示例图完全相同，只是删除了空位置。

这确实是一个例子，说明“ggplot”有时更像是一种障碍，而不是一种恩惠。以我的经验，最好先设计你的情节，然后选择工具。经常，我发现自己回到原始的“网格”来做我的视觉效果，因为我想要一些“网格”包装器“ggplot”做不到的东西。

注意：以后不要删除你原来的问题内容；只需添加更新的信息。删除旧内容使该页面上的许多答案和评论变得无关紧要。

# redirect - 跟踪主机域上的 302 临时重定向

> ID：14524767
> 
> 赞同：0
> 
> 时间：2013-01-25T15:17:30.280
> 
> 标签：redirect, google-analytics, analytics, web-analytics

我有域 X，我想做一个**302 临时重定向**到域 Z。
我还想跟踪（使用谷歌分析？）所有访问域 X 并被重定向到域 Z 的访问者。

目前，我无权访问域 Z，因此我无法使用引荐来源网址跟踪来自域 X 的传入访问者。

有没有办法使用谷歌分析来实现这一目标？

*   如果是这样，我应该以某种方式编码这个重定向吗？
*   否则，是否有可以执行此操作的 Analytics 替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:55:09.283

如果你想使用谷歌分析，你需要一个 javascript 重定向（因为 GA 基本上是 Javascript 并且需要一个 html 页面作为“主机”）。

可以构建一个服务器端脚本，在进行重定向之前将数据发送到 GA（使用类似[http://code.google.com/p/php-ga/](http://code.google.com/p/php-ga/)之类的东西），只是不值得麻烦- 你不会从重定向页面中学到任何有用的分析知识，所以一个简单的计数器就足够了。

# ruby-on-rails - 具有关联的嵌套模型/表单

> ID：14524769
> 
> 赞同：1
> 
> 时间：2013-01-25T15:17:33.297
> 
> 标签：ruby-on-rails, nested-forms, nested-attributes

我有以下三个具有关系的模型：

```
# category.rb
class Category < ActiveRecord::Base
  has_many :category_marks
  accepts_nested_attributes_for :category_marks
end

# category_mark.rb
class CategoryMark < ActiveRecord::Base
  attr_accessible: :add, :stu, :inc

  validates_presence_of :user_group
  validates_presence_of :category_id
  belongs_to :category
  belongs_to :user_group
end

# user_group.rb
class UserGroup < ActiveRecord::Base
  has_many :category_marks
end 
```

`category_marks`描述不同用户组对不同类别的访问权限。我在创建新类别时尝试创建类别标记，因此`accepts_nested_attributes_for`. 我可以同时编辑类别和更新 category_marks，但不是在我创建新类别时。这是我的`categories_controller.rb`（删除了不相关的位）：

```
class Admin::CategoriesController < ApplicationController

    def new
      @category = Category.new
      @category.category_marks.build(UserGroup.all.map{|ug| { user_group: ug }})

      respond_to do |format|
        format.html # new.html.erb
        format.json { render json: @category }
      end
    end

    def edit
      @category = Category.find(params[:id])
    end

    def create
      @category = Category.new
      @category.category_marks.build(UserGroup.all.map{|ug| { user_group: ug }})
      @category.attributes = params[:category]

      respond_to do |format|
        if @category.save
          format.html { redirect_to [:admin, :categories], notice: 'Category was successfully created.' }
          format.json { render json: @category, status: :created, location: @category }
        else
          format.html { render action: "new" }
          format.json { render json: @category.errors, status: :unprocessable_entity }
        end
      end
    end

    def update
      @category = Category.find(params[:id])

      respond_to do |format|
        if @category.update_attributes(params[:category])
          format.html { redirect_to [:admin, :categories], notice: 'Category was successfully updated.' }
          format.json { head :no_content }
        else
          format.html { render action: "edit" }
          format.json { render json: @category.errors, status: :unprocessable_entity }
        end
      end
    end
  end 
```

每个类别都需要每个用户组的类别标记，因此在`new`操作中，我正在为每个用户组构建一个类别标记对象和关联到我的新`@category`对象。这很好用，使我能够使用嵌套表单显示每个类别标记的表单字段。我现在遇到的困难是让这些类别标记保存在`create`行动中。

`params`变成`create`这样：

```
{"utf8"=>"✓",
"authenticity_token"=>"0rNpYy7OB+DPuzmu8HoxX2MvTnkjUyU+Vej+a4RMh7s=",
"category"=>{
  "name"=>"test category",
  "color"=>"#00f",
  "parent_id"=>"3",
  "category_marks_attributes"=>{
    "0"=>{
      "stu"=>"1",
      "inc"=>"0",
      "add"=>"1"},
    "1"=>{
      "stu"=>"0",
      "inc"=>"1",
      "add"=>"1"}}},
"button"=>"",
"action"=>"create",
"controller"=>"admin/categories"} 
```

查看表单的代码：

```
<%= form_for([:admin, @category]) do |category_form| %>
  <ul>
    <li><%= category_form.label :name %> <%= category_form.text_field :name %></li>
    <li><%= category_form.label :color %> <%= category_form.text_field :color, class: :add_colour_picker %></li>
    <li><%= category_form.label :parent_id, "Parent category" %> <%= category_form.select :parent_id, Category.roots.delete_if{|c| c == @category}.map{|c| [c.name, c.id]}, include_blank: true %></li>
    <br />
    <h2>User Group Permissions</h2>
    <table>
      <tr>
        <th>User Group</th>
        <th>View Students</th>
        <th>View Incidents</th>
        <th>Add Incidents</th>
      </tr>
      <%= category_form.fields_for :category_marks do |category_marks_form| %>
      <%= category_marks_form.hidden_field :user_group_id, value: category_marks_form.object.user_group_id %>
        <tr>
          <td><%= category_marks_form.object.user_group.name %></td>
          <td><%= category_marks_form.check_box :stu %></td>
          <td><%= category_marks_form.check_box :inc %></td>
          <td><%= category_marks_form.check_box :add %></td>
        </tr>
      <% end %>
    </table>

    <li><%= button_tag "Save Category" %></li>
  </ul>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:30:07.683

您`category_marks_attributes`的 in`params`缺少`user_group_id`，因此不会根据用户输入进行验证或保存。

您可能需要在视图中添加以下内容：

```
= category_marks_builder.hidden_field :group_id, value: category_marks_builder.object.group_id 
```

另外，我很确定它可以按照您的方式工作，但是我会摆脱`@category.attributes=`线路并调用`@category.update_attributes params[:category]`而不是`@category.save`.

最后，我不确定你为什么要在控制器`@category.category_marks.build`中再次调用。`create`我想这会给你两套`category_marks`. 一种是用户输入，另一种是默认值。

我希望它有所帮助。

# php - 我的 PHP 不循环，仅在第一个结果后停止

> ID：14524771
> 
> 赞同：-1
> 
> 时间：2013-01-25T15:17:36.303
> 
> 标签：php, wordpress

我是 PHP 的初学者，我正在使用 wordpress。

我在表单（重力表单）中调用帖子标题并使用这行代码：

```
add_filter('gform_field_value_testtitle', create_function("", '$value = testing_title(); return $value;' )); 
```

我需要做的是一个函数，它允许我用帖子标题预先填充一个重力表单字段，我这样做是这样的：

```
function testing_title() {
    global $wp_query;
    while ($postid = $wp_query->post->ID) {
        return $postid;
    }
} 
```

这将返回第一个帖子 ID，然后停止。所以我有一个帖子列表，但是只有第一个帖子出现，并且 id 被插入到表单中。

我如何得到其余的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:19:57.660

“返回”离开你的功能。

如果要检索其余数据，则应将其存储在变量（即数组）中，并在循环完成后返回该变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:26:29.943

return 将结束函数，将结果存储在数组中，并在完成后返回。

```
function testing_title() {
    global $wp_query;

    $results = array();

    while ($postid = $wp_query->post->ID) {
        $results[] =  $postid;
    }
    return $results;
} 
```

# security - ExpressJS：req.session 是如何工作的？

> ID：14524774
> 
> 赞同：4
> 
> 时间：2013-01-25T15:17:39.013
> 
> 标签：security, session, express

我正在编写一个支持用户登录的 ExpressJS 后端。从多个示例中，我看到了 req.session 对象的使用。似乎该对象用于跨服务器和客户端存储和检索信息，因此服务器可以设置“已登录”标志，然后检查此标志以查看用户是否已登录。

我的问题是，这究竟是如何工作的？服务器如何在客户端存储信息并从每个请求中检索信息，是通过 cookie 吗？客户端是否可以在客户端手动操作此对象的内容以破坏安全性？如果是，那么检查用户登录的更安全方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T16:22:03.270

我从 ExpressJS Google 小组中找到[了一些东西](https://groups.google.com/forum/?fromgroups=#!searchin/express-js/How%2420does%2420req.session%2420work?/express-js/de9sf9Ly_rY/q_PjZR9WLIEJ)，因此 ExpressJS 中的会话和 cookie 有点不同。基本上：

> Res.cookie 在响应中添加一个 cookie；req.session 是服务器端的键/值存储。默认情况下，会话数据位于服务器内存中，尽管您可以配置备用存储。
> 
> 您可以在会话中存储您想要的任何内容。客户端看到的唯一内容是标识会话的 cookie。

（归功于[劳里·哈珀](http://laurie.holoweb.net/)）

所以看起来 ExpressJS 已经在做@Vahid 提到的事情，将值存储在服务器上并将密钥保存为客户端的 cookie。据我了解， req.session 使用自己的 cookie（仅包含一个键），独立于 req.cookie 的自定义 cookie。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-30T06:51:57.853

实际上 req.session 中的会话对象不是由客户端传递的。在您的语法中，您可能使用过`app.use(session{options})`

这是一个中间件。现在，从 express 服务器传递的每个请求都必须通过这个中间件。该中间件获取 cookie（只是存储在服务器上的 sessionId 的编码版本）并将其解码以获取 sessionId。从服务器获取与该 sessionId 对应的会话并作为 req.session 附加到 req 对象。它给人一种我们从客户端获取会话的感觉，但实际上是中间件通过从客户端获取 cookie 将会话对象附加到 req 对象的工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T18:06:31.290

我不知道您的确切实施，所以我不专门针对您的情况发表评论。但通常你可以验证每个请求从浏览器发送到服务器的内容，你可以安装一个 firefox 扩展，如“Live HTTP Header”或“Tamper Data”，甚至是一个wireshark（如果不是https）或firebug、firecookie等。

然后检查通过 Cookie 发送的内容，我确信 ExpressJS 在成功验证用户身份后会生成会话 ID，将其存储在数据库中并将相同的值存储在浏览器 cookie 中。在每个请求（甚至图像）上，您的浏览器都会发送 cookie，服务器会使用 db 验证会话 ID 并检测您的会话。

我见过一些旧的不安全代码将用户的会话设置为login=1之类的值，如果是你的情况，你必须知道它真的很容易绕过。您必须为每个客户端生成、保存和设置会话 ID。

# c++ - 如何使用opencv在ios中编写一个简单的图像加载函数

> ID：14524779
> 
> 赞同：1
> 
> 时间：2013-01-25T15:17:55.510
> 
> 标签：c++, iphone, ios, opencv, computer-vision

我可以在 ios 中使用 Opencv 编写一个简单的 C++ 代码来加载图像吗？你能指出我可以开始的一些简单项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:48:25.053

看看我在 GitHub 上的简单入门项目...

[开放CV方](http://www.github.com/foundry/OpenCVSquares)

[OpenCVCircles](http://www.github.com/foundry/OpenCVCircles)

图像*加载*在 cocoa/objective C 中完成，openCV*处理*在 C++ 中使用 openCV 框架。有一个小的 obctiveC++ 包装器对象在两者之间传递图像数据，并从 iOS (UIImage) 和 openCV (cv::Mat) 转换图像格式。

您不必这样做，但我发现将 C++ 代码与 Objective-C 代码尽可能分开是有帮助的。

# string - 如何在 pagerTabStrip 中使用 id 和字符串

> ID：14524780
> 
> 赞同：0
> 
> 时间：2013-01-25T15:17:58.550
> 
> 标签：string, android-fragments, android-viewpager

关于访问字符串信息的超级新手问题。我已经将一个使用 fragmentpager 和 PagerTabStrip 的应用程序分块在一起。

它应该在选项卡上显示标题，但我的没有显示任何内容......因为我是一个完全的新手，正在破解他的方式。我非常感谢这个社区。

从我调用内容的布局文件中（一旦我修复它的标题--id@pager_header 对吗？）：

```
<android.support.v4.view.PagerTabStrip
    android:id="@+id/pager_header"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:paddingBottom="4dp"
    android:paddingTop="4dp"
    android:textColor="#ffffff" /> 
```

我的代码让我获得了可滑动的内容页面：

公共类诗歌扩展 FragmentActivity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contentpage);

    /** Getting a reference to the ViewPager defined the layout file */        
    ViewPager pager = (ViewPager) findViewById(R.id.pager);

    /** Getting fragment manager */
    FragmentManager fm = getSupportFragmentManager();

    /** Instantiating FragmentPagerAdapter */
    MyFragmentPagerAdapter pagerAdapter = new MyFragmentPagerAdapter(fm);

    /** Setting the pagerAdapter to the pager object */
    pager.setAdapter(pagerAdapter);

} 
```

}

我的代码应该让我从字符串参考文件中获得标题。

```
public class MyFragment extends Fragment{

int mCurrentPage;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /** Getting the arguments to the Bundle object */
    Bundle data = getArguments();

    /** Getting integer data of the key current_page from the bundle */
    mCurrentPage = data.getInt("current_page", 0);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {     
    View v = inflater.inflate(R.layout.myfragment_layout, container,false);
    TextView tv = (TextView ) v.findViewById(R.id.tv);
    tv.setMovementMethod(new ScrollingMovementMethod());
    switch(mCurrentPage){
    case 0:
       tv.setText("  ");
    break;
    case 1:
        tv.setText(R.string.content_1);
    break;
    case 2:
        tv.setText(R.string.content_2);
        break;
    case 3:
        tv.setText(R.string.content_3);
        break;
                    }
        return tv;

} 
```

}

如何从中获取 pager_header？

示例相关字符串是：

```
<string name="content_1">Welcome to this app!</string> 
```

我认为我需要更好地理解字符串，因为我来自更多的文本内容背景。

如何在 stings.xml 文件中包含允许应用引用与综合浏览量相关的内容的指示符，以便我可以在选项卡中显示该内容？我如何做到这一点，以便内容显示“欢迎使用此应用程序”但选项卡中的标题显示“主页”？

我认为好像每个条目（页面）就像数据库中的一行，一个参考点是标题，一个是内容，一个是链接或其他内容。每个人都有自己的id，对吧？

提前感谢您向初学者解释这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:16:14.033

您需要`getPageTitle(int position)`在`MyFragmentPagerAdapter`. `String`从此方法返回的 用于设置 的标题`PagerTabStrip`。

```
@Override
public CharSequence getPageTitle(int position) {
    Log.v(TAG, "getPageTitle");

    String tabTitle;
    switch(position) {
        case 0:
            tabTitle = "Tab #0";
            break;
        case 1:
            tabTitle = "Home";
            break;
        case 2:
            tabTitle = "Tab #2";
            break;
        case 3:
            tabTitle = "Tab #3";
            break;
        default:
            tabTitle = "Default Tab Title";
            break;
    }
    return tabTitle;
} 
```

您可以`Bundle`通过调用`setArguments(Bundle args)`您`MyFragments`添加到您的`ViewPager`. `MyFragment`然后，您可以根据`onCreateView()`传入的内容`String`参数设置您的内容。然后在`MyFragmentPagerAdapter`你可以获得对`Fragment`at 的引用`position`并直接从`MyFragment`.

# html - HTML 对象元素覆盖以下元素

> ID：14524785
> 
> 赞同：2
> 
> 时间：2013-01-25T15:18:12.540
> 
> 标签：html

我在这样的页面中嵌入了一个 .pdf 文件：

```
<div id="main">
<object type="application/pdf" data="/blah.pdf" width="675" height="830" />
<p>other HTML elements<p>
</div> 
```

在哪里：

```
#main
{
    width: 675px;
    margin: 0px 0px 0px 10px;
    padding: 5px 20px 5px 20px;
    background-color: #fff;
} 
```

.pdf 以我指定的大小呈现，但对象元素后面的元素（例如 p 元素）不会被呈现或被覆盖。

在最新的 IE 和 Firefox 中都是这样。知道怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:20:55.553

`object`元素不是自动关闭的。所以 HTML 解析器会把它变成：

```
<div id="main">
    <object type="application/pdf" data="/blah.pdf" width="675" height="830">
        <p>other HTML elements<p>
    </object>
</div> 
```

*如果未*`<object>`显示替换的内容，则显示元素的内容，因此您的段落（以及结束标记之前的任何其他内容）将从视图中隐藏。*`</div>`*

# apache - 使用 .htaccess 更改文件名

> ID：14524787
> 
> 赞同：2
> 
> 时间：2013-01-25T15:18:27.690
> 
> 标签：apache, .htaccess, mod-rewrite

**我的主要问题是**，出于安全原因，我想知道是否可以使用 .htaccess 虚拟更改网站文件的名称（在某种意义上）。例如，如果我有一个文件`/index.php`，并且我希望将调用`/mysite`重定向到`/index.php`，但我*还*希望调用`/index.php`返回为错误 403 或 404。这可能吗？如果是这样，怎么办？

此外，我一直在寻找有关 .htaccess 指令语法的完整文档，但我找不到任何东西。**我的第二个问题是**，有人知道所有指令及其语法的通用参考吗？（我什至在 w3schools 都找不到）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:44:24.080

首先，我首先要说 w3schools 没有特别好的参考资料。[Apache mod_rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)非常好，我总是先去那里。

您的请求的第一部分作为重写非常简单。但在我们到达那里之前，让我们首先防止直接请求`index.php`. 为了做到这一点而不弄乱我们的其他规则，我们将使用该`%{THE_REQUEST}`变量来匹配`index.php`和禁止访问。

```
RewriteEngine On

# If the request sent by the browser includes index.php...
RewriteCond %{THE_REQUEST} index\.php
# forbid access (403)
RewriteRule ^. - [F]

# Then you just need a generic rule to rewrite /mysite into index.php
RewriteRule ^mysite index.php [L] 
```

我们需要使用第一部分`THE_REQUEST`来避免与第二部分重写为 index.php 造成冲突。

如果您想提供 404 以使其看起来`index.php`甚至不存在，请将其替换`[F]`为`[R=404,L]`

# mysql - Mysql导入语句不影响数据库

> ID：14524789
> 
> 赞同：0
> 
> 时间：2013-01-25T15:18:28.183
> 
> 标签：mysql, mysqlimport

我正在尝试将 .sql 文件导入到我在 Linux 上的 MySql 服务器上的数据库中。我已经运行了命令

```
mysql -u root -p database_name < file_location 
```

...但似乎什么也没发生。当我运行该命令时，它会询问我的密码，我将其输入，并且该命令应该已运行（我没有看到任何结果或消息）。我知道它不起作用，因为我登录到 MySql 服务器并检查数据库，但那里什么也没有。有人知道发生了什么吗？

我试图添加详细选项，但我得到了一堆错误，或者我认为是错误。以下是前几行：

```
--------------
/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */
--------------

--------------
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */
--------------

--------------
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */
--------------

--------------
/*!40101 SET NAMES utf8 */
--------------

--------------
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */
--------------

--------------
/*!40103 SET TIME_ZONE='+00:00' */
--------------

--------------
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */
-------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:14:48.487

使用选项运行您的脚本`-vvv`以获取执行的每个查询的回显。

```
mysql -vvv -u root -p database_name < file_location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:47:57.443

我已经修好了。不知何故，文件损坏了，我只是重新下载了它。谢谢您的帮助

# magento - Magento：在代码中启用或禁用模块

> ID：14524791
> 
> 赞同：1
> 
> 时间：2013-01-25T15:18:32.637
> 
> 标签：magento, magento-1.7

我有一个模块可以为一个主题的特定任务加载一大堆观察者。我已经设置了一个不需要这个特定模块的移动主题。如何禁用该主题的模块？
我阅读了[Magento 上的答案，如何以编程方式禁用模块？](https://stackoverflow.com/questions/6520634/magento-how-to-disable-module-programmatically)这对我的情况并没有真正的帮助，因为我在模块中没有任何控制器。

我正在检查包名称`if (Mage::getSingleton('core/design_package')->getPackageName() == 'package') return true;`，但这不适用于观察到的`core_collection_abstract_load_after`，它只是崩溃。所以我不想加载任何东西来节省一些处理时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:12:49.943

您不能从 magento 中禁用 magento 模块，因为它们在观察者系统初始化时已经加载。

你可以做的是禁用你的观察者：

```
Mage::getConfig()->setNode('frontend/events/yourEventName/observers/yourObserverName/type', 'disabled'); 
```

这可以在每个事件中完成，尤其是在您的`core_collection_abstract_load_after`

# jquery-mobile - JQuery Mobile：页面标题上的后退按钮，但不是弹出标题

> ID：14524795
> 
> 赞同：2
> 
> 时间：2013-01-25T15:18:45.660
> 
> 标签：jquery-mobile

我想在页面上有一个后退按钮，使用`data-add-back-btn="true"`. 但是，我还希望在同一页面上有一个带有标题的弹出窗口，上面没有后退按钮。该`data-add-back-btn="true"`属性似乎适用于页面上的所有内容。

我在这里玩过不同的设置：http: [//jsfiddle.net/n9trV/4/](http://jsfiddle.net/n9trV/4/)但没有运气。谁能得到这个工作？

有没有使用 JQM 属性的巧妙方法？否则我可能会在页面初始化后手动删除按钮。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:13:21.973

我认为您应该将此报告为错误（我觉得是这样）。但是，要仅使用标记来解决您的问题，您可以删除

```
data-add-back-btn="true" 
```

并放置在您的页眉内，无论是 a`<div>`还是 a `<header>`（更好），如下所示的链接：

```
<a href="#" data-icon="back" data-rel="back" title="Go back">Back</a> 
```

如果您想使用以前的图标，请在链接中使用此属性：

```
data-icon="arrow-l" 
```

所以你应该有这样的东西：

```
<div data-role="page" id="page2">   
   <header data-role="header">
      <a href="#" data-icon="back" data-rel="back" title="Go back">Back</a>
      <h1>Page 2</h1>
   </header>
   <!-- other code goes here -->
</div> 
```

# java - 在特定布局中添加矩阵

> ID：14524798
> 
> 赞同：1
> 
> 时间：2013-01-25T15:18:52.290
> 
> 标签：java, arrays, matrix, add

我的教授希望我在两个矩阵之间用“+”和“=”符号并排打印出矩阵。最后，他希望我们将矩阵相加。

这是迄今为止的工作。

所以结果会是：

```
1 2 3   9 8 7   10 10 10
4 5 6 + 6 5 4 = 10 10 10
7 8 9   3 2 1   10 10 10

enter code here public static void main(String[] args) {
    int matrix1[][] = {{1,2,3},{4,5,6},{6,7,8}};
    int matrix2[][] = {{9,8,7},{6,5,4},{3,2,1}};
    int result1;
    int[][] result2 = new int[2][3];

    for (int i = 0; i < matrix1.length; i++) {
        for (int j = 0; j < matrix1[0].length; j++) {
            System.out.printf(matrix1[i][j] + " ");
            System.out.print("");
        }
        System.out.println("");

    }

    for (int i = 0; i < matrix2.length; i++) {
        for (int j = 0; j < matrix2[0].length; j++) {
            System.out.printf(matrix2[i][j] + " ");

        }

    System.out.println("");

    }
} 
```

我的问题是，我怎样才能将它与解决方案并排打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:50:04.557

考虑矩阵的两个打印循环：

```
for (int i = 0; i < matrix1.length; i++) {
    for (int j = 0; j < matrix1[0].length; j++) {
        System.out.printf(matrix1[i][j] + " ");
    }
    System.out.println("");
}

for (int i = 0; i < matrix2.length; i++) {
    for (int j = 0; j < matrix2[0].length; j++) {
        System.out.printf(matrix2[i][j] + " ");
    }
    System.out.println("");
} 
```

他们打印矩阵 1，然后打印 2 - 因此矩阵将位于彼此下方。

如果你想要并排的矩阵，你需要打印每个矩阵的第 1 行，然后 - 在新行之后 - 每个矩阵的第 2 行，等等。通过重新安排循环如何通过矩阵，你可以让你的新版面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:58:17.807

不幸的是，您不能一次打印一个，您需要逐行打印。此解决方案**要求**矩阵 1 和矩阵 2 的高度相同。但这里有一个模板可以帮助您入门。

```
for (int i = 0; i < matrix1.length; i++) {
  for (int j = 0; j < matrix1[i].length; j++) {

  }

  if (i == matrix1/2) {

  } else {  //One part of if handles when "+" is needed, other one doesn't

  }

  for (int j = 0; j < matrix2[i].length; j++) {

  }

  if (i == matrix1/2) {

  }

  for (int j = 0; j < ???; j++) {

  }
} 
```

# jquery - 通过数据计数-*产生双倍的预期结果

> ID：14524805
> 
> 赞同：0
> 
> 时间：2013-01-25T15:19:30.980
> 
> 标签：jquery, html

[使用 jQuery 计算数据属性的值](https://stackoverflow.com/questions/10176593/count-values-of-data-attribute-with-jquery)

我正在使用公认的答案作为我在表格上运行的一些统计数据的基础。下面的函数是我重新使用的，它的计数是我期望它计数的两倍。例如，我有 20`td`个`data-vaction`“拒绝”。它计数为 40。作为记录，我目前在函数外部声明了用于调试的对象。就好像整个过程运行了两次，或者每个`each`.

查询：

```
var vactions = {};
$(document).ready(function() {  
  $('td[data-vaction]').each(function() {
    var td = $(this), 
        vaction = td.data('vaction'); 

    if (!vactions[vaction]) {  
        vactions[vaction] = {count : 1 } 
    }
    else {
        vactions[vaction]['count'] = vactions[vaction]['count'] + 1;
    }
  });
}); 
```

示例行：

```
<td>[<A class="doThings" HREF="http://somewhere.com">3787</A>]<!--entry--> </td>
<td>  2013-01-25    </td>
<td class="daysAgo">0 </td>
<td>  Item    </td>
<td>  Description  </td>
<td align="RIGHT" > Count    </td>
<td> Vendor    </td>
<td></td> <td style="font-size:10px;" data-col="workcenter"> Assembly</td>
<td  colspan="1"><!--//RGA--></td>
<td data-col="closed">      Open    </td>
<td> 0  </td>
<td colspan="2" class="vendorAct" style="background:#b20000;color:white;" data-col="vaction" data-vaction="unresolved" >    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:22:38.210

对不起这个问题，如果你想删除。

答案是：在准备就绪的事件期间，我有`script`一个在页面上移动的内部。`div`我假设它导致它准备好了两次。不管因为变量是在文档之外声明的，我都在破坏我自己的统计数据。

# c# - c# Bruteforce 从指定点开始

> ID：14524808
> 
> 赞同：2
> 
> 时间：2013-01-25T15:19:37.893
> 
> 标签：c#, algorithm, recursion, brute-force

我需要找到一种方法来在指定的字符串而不是开头开始这个字符串生成算法。例如，不是从 'aaaa' 开始，而是从 'baxi' 开始，然后遍历字符串空间的其余部分。

```
 private static String Charset = "abcdefghijklmnopqrstuvwxyz";

    /// <summary>
    /// Start Brute Force.
    /// </summary>
    /// <param name="length">Words length.</param>
    public static void StartBruteForce(int length)
    {
        StringBuilder sb = new StringBuilder(length);
        char currentChar = Charset[0];

        for (int i = 1; i <= length; i++)
        {
            sb.Append(currentChar);
        }

        int counter = 0;
        ChangeCharacters(0, sb, length, ref counter);
        Console.WriteLine(counter);
    }

    private static void ChangeCharacters(int pos, StringBuilder sb, int length, ref int counter)
    {
        for (int i = 0; i <= Charset.Length - 1; i++)
        {                
            sb[pos] = Charset[i];
            if (pos == length - 1)
            {
                counter++;
                Console.WriteLine(sb.ToString());
            }
            else
            {
                ChangeCharacters(pos + 1, sb, length, ref counter);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:01:41.180

你所拥有的非常接近，但看起来你的问题的根源是`ChangeCharacters`总是从第一个可能的字符串开始，例如每个位置的字符总是从你的字母表的第一个字母开始（`'a'`在你的例子中）。您需要在起始字符串中的每个位置进行第一次传递，以从已经存在的字母开始，随后的传递将从生成字母表的第一个字符开始。

因此，使用您已经拥有的代码，您需要进行以下更改：

1.  传递一个标志，表明这是第一次传递。
2.  根据第一次通过标志选择循环的起点。
3.  将第一个传递标志传递给您的递归调用。
4.  在每个位置第一次通过后重置标志。
5.  用你的起始字符串初始化`StringBuilder`，而不是当前的默认起始点。

为了清楚起见，还有一些其他项目值得更改。这些都不是正确性的严格要求，但它们确实使代码更易于阅读和理解：

1.  没有必要绕过`length`，因为它总是一样`sb.Length`。重复的信息充其量会迫使读者跟踪更多信息，而在最坏的情况下，如果以后的代码更改破坏了这种关系，则可能会导致错误。
2.  使用从零开始的索引的语言中索引循环的标准习惯用法是“端点排他”形式，使用“小于”（甚至“不等于”）比较器，因为这样可以避免边界处的溢出错误，例如`i < length`而不是`i <= length - 1`. 大多数代码读者本能地理解这个成语，而包含端点的形式通常会迫使读者考虑为什么需要反成语。

3.  而不是通过引用传递您的计数器，只需返回生成的字符串的计数。不改变外部状态的方法，通常称为“纯”或“功能”，通常更容易理解。（但是请注意，您也有`StringBuilder`被传递的状态。）

    *   作为进一步的改进，我什至建议返回一个`IEnumerable<string>`，这不仅消除了跟踪计数的需要，而且还让调用者确定如何处理字符串，而不是做出决定（例如调用`Console.WriteLine`和递增计数器) 了解您的方法。

将所有这些放在一起，您的代码就变成了这样（用注释指出哪些更改或建议正在发挥作用）：

```
public static void StartBruteForce(string start)
{
   /*change 5*/ StringBuilder sb = new StringBuilder(start);
   /*sugg 3*/ int counter = ChangeCharacters(0, /*change 1*/ true, sb);
   Console.WriteLine(counter);
}

private static int ChangeCharacters(int pos, /*change 1*/ bool firstPass , StringBuilder sb)
{
    /*sugg 3*/ int counter = 0;
    for (int i = /*change 2*/ firstPass ? Charset.IndexOf(sb[pos]) : 0; /*sugg 2*/ i < Charset.Length; i++)
    {                
        sb[pos] = Charset[i];
        if (pos == /*sugg 1*/ sb.Length - 1)
        {
            counter++;
            Console.WriteLine(sb.ToString());
        }
        else
        {
            /*sugg 3*/ counter += ChangeCharacters(pos + 1, /*change 3*/ firstPass, sb);
            /*change 4*/ firstPass = false;
        }
    }
    /*sugg 3*/ return counter;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:07:46.827

您的递归算法需要分解为多个步骤，以便可以恢复。

看到[这个分解为步骤的阶乘算法](https://stackoverflow.com/a/2529771/41153)，以便可以恢复它。

* * *

或者，您需要知道恢复点[在任何情况下都需要]，但在达到该点之前忽略所有值。

这是一个（比）幼稚的实现，并且**在 CPU 方面它使恢复计算的整个想法无效**——因为它实际上并没有恢复，它只是不捕获/打印早期的值：

```
private static String Charset = "abcdefghijklmnopqrstuvwxyz";

/// <summary>
/// Start Brute Force.
/// </summary>
/// <param name="length">Words length.</param>
public static void StartBruteForce(int length)
{
    StringBuilder sb = new StringBuilder(length);
    char currentChar = Charset[0];

    for (int i = 1; i <= length; i++)
    {
        sb.Append(currentChar);
    }

    int counter = 0;

    var resumePoint = 60975;

    ChangeCharacters(0, sb, length, ref counter, resumePoint);

    Console.WriteLine(counter);
}

private static void ChangeCharacters(int pos, StringBuilder sb, int length, ref int counter, int resumePoint)
{
    for (int i = 0; i <= Charset.Length - 1; i++)
    {
        sb[pos] = Charset[i];
        if (pos == length - 1)
        {
            counter++;
            if (counter >= resumePoint)
            {
                Console.WriteLine(string.Format("{0} : {1}", counter, sb.ToString()));
            }
        }
        else
        {
            ChangeCharacters(pos + 1, sb, length, ref counter, resumePoint);
        }
    }
} 
```

# javascript - 单击外部链接时更改谷歌地图标记图标？

> ID：14524809
> 
> 赞同：0
> 
> 时间：2013-01-25T15:19:37.977
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一张谷歌地图，上面有很多标记（从 MySQL 数据库收集）。我目前正在使用以下代码在单击该标记时更改该标记的图标：

```
var redbikeicon = "images/bike_red.png";

<?php
    $result=mysql_query("select * from sites") or die(mysql_error());
    while($row=mysql_fetch_assoc($result)){
        ?>
        marker = new google.maps.Marker({
        position: new google.maps.LatLng(<?php echo $row['Latitude']; ?>, <?php echo $row['Longitude']; ?>),
        map: map, icon: bikeicon});

        //add event to every marker
        google.maps.event.addListener(marker, 'click', function(){
            //change icon color
            this.setIcon(redbikeicon);      //replace default icon with red version (color-marking all chosen markers)

        })
        <?php
    }
    ?> 
```

这段代码工作正常，但我现在需要在点击页面上的链接时发生同样的事情 - 地图旁边的页面上有一个链接列表，每个链接对应于地图上的一个标记. 单击链接时，相应的标记应更改颜色，就像单击标记本身时一样。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T15:29:47.267

我做了类似的事情，除了我使用悬停。我在下面将其更改为单击。我也在为此使用 jQuery。无论如何，您在链接上设置了单击事件。该链接有一个名为“record_id”的属性，它对应于您为标记设置的属性，也称为“record_id”。

单击链接时，您获取 id，然后遍历所有标记，直到找到匹配的标记，然后使用 googlemaps api 中提供的 setIcon 方法更改图标。

希望有帮助。

设置标识：

```
marker = new google.maps.Marker({
    record_id: record_id,
    position: point,
    map: map,
    title: name,
    icon: 'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=whatever|BDD73C|000000'
}); 
```

在锚点上设置你的动作：

```
$("a.whatever").click(function(){
    var id = $(this).attr('id');
    changeMarker(id);                             
}); 
```

使用 setIcon 将图标换成另一种颜色：

```
function changeMarker(record_id){
    for (i in Markers){
        if(Markers[i].record_id == record_id){
            Markers[i].setIcon('http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=title|EC2A8C|000000');
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T15:36:13.777

单击链接时触发标记上的“单击”事件。

```
google.maps.event.trigger(gmarkers[i], "click"); 
```

[带有可点击动态侧边栏](http://www.geocodezip.com/v3_MW_example_map2.html)的示例（点击监听器打开一个信息窗口）

# c# - Visual Studio 找不到 XML 文件

> ID：14524813
> 
> 赞同：0
> 
> 时间：2013-01-25T15:19:46.283
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我正在尝试开发 Windows 7 Phone，并且正在使用需要解析然后执行 Linq 查询的 XML 文件。

问题是这样的：

每当我尝试访问该文件（它存储在本地）时，它都会返回一个错误，指出无法找到该文件，因为它不是 XAP 包的一部分。

我尝试了另一种我使用的解决方案，`StreamReader`但我仍然收到一个类似的错误：

> 尝试访问方法失败 System.IO.File.OpenText(System.String)

这是我正在使用的代码：

```
using (StreamReader reader = File.OpenText("C:/Users/Desktop/Assign/obj/Debug/buildings.kml"))
        {
            var xdoc = XDocument.Load ("buildings.kml");
            XNamespace kml = "http://www.opengis.net/kml/2.2";

            var dict = xdoc.Descendants(kml + "Placemark")
                          .ToDictionary(d => d.Element(kml + "name").Value,
                          d => d.Element(kml + "id").Value);

            foreach (var b in dict) {
                Console.WriteLine ("Building Name -> " + b.Key + " Building ID -> " + b.Value);
            }
        } 
```

该文件位于：> C:/Users/Desktop/Assign/obj/Debug/buildings.kml 所以我看不到问题所在。在 Visual Studio 之外，我可以很好地读取 .xml 文件。

希望有人可以帮助

编辑：

新代码 -

```
Dictionary<string, string> getBuildingNames()
    {
        Uri uri = new Uri(@"Data\mydata.kml", UriKind.Relative);

        StreamResourceInfo sri = Application.GetResourceStream(uri);

        StreamReader sr = new StreamReader(sri.Stream);

        var xdoc = XDocument.Load(sr);
        XNamespace kml = "http://www.opengis.net/kml/2.2";

        var dict = xdoc.Descendants(kml + "Placemark")
                      .ToDictionary(d => d.Element(kml + "name").Value,
                      d => d.Element(kml + "id").Value);

        return dict;

    } 
```

错误：-'NullReferenceException 未处理'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T15:29:48.317

Assuming you really are trying to do this as part of a WP7 project (rather than some non-mobile project related to it, e.g. preprocessing) you shouldn't be using `File.OpenText`.

Options:

*   Include the XML in your XAP file, and read from that using [`Application.GetResourceStream`](http://msdn.microsoft.com/en-us/library/cc190632%28v=vs.95%29.aspx) (see this [blog post for details](http://www.steveives.com/2011/11/reading-files-from-a-windows-phone-xap-file/))
*   Somehow get the XML into isolated storage, and use the [isolated storage API](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage%28v=vs.95%29.aspx)
*   Embed the resource into your assembly, and use [`Assembly.GetManifestResourceStream`](http://msdn.microsoft.com/en-us/library/xc4235zt%28v=vs.95%29.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:49:16.930

Just a couple of some more tips to help you along:

1) Change the Build action property of the xml file to "Content". (Select the file and go to the properties window in Visual Studio)

2) If you only want to read from the file, then there is no need to have the file in IsolatedStorage. You can simply read it if you correctly set the Build Action property.

You can use XDocument to read the file.

```
XDocument xdoc = XDocument.Load(filepath); 
```

where *filepath* is simply the relative path to the XML file, i.e. if you did not place it inside any folder in your project then it will be just the file name (assume it like being the root directory)

# yii - Yii - 从模块渲染到根文件夹

> ID：14524816
> 
> 赞同：4
> 
> 时间：2013-01-25T15:19:54.993
> 
> 标签：yii, yii-modules

我正在尝试将视图从模块渲染到项目基础视图，但它给出了错误。

我尝试了以下组合，但没有任何运气。它给出了错误“DefaultController 找不到请求的视图“appsMenu”。”

```
echo $this->renderPartial("appsMenu",array("moduleName"=>""),true, true);
echo $this->renderPartial("//appsMenu",array("moduleName"=>""));
echo $this->renderPartial("views/site/appsMenu",array("moduleName"=>""));
echo $this->renderPartial("views/site/appsMenu",array("moduleName"=>""));
echo $this->renderPartial("/appsMenu",array("moduleName"=>""));
echo $this->renderPartial("protected/views/site/appsMenu",array("moduleName"=>""));
echo $this->renderPartial("/protected/views/site/appsMenu",array("moduleName"=>""));
echo $this->renderPartial("views/appsMenu",array("moduleName"=>""));
echo $this->renderPartial("/views/appsMenu",array("moduleName"=>""));
echo $this->renderPartial("site/views/appsMenu",array("moduleName"=>""));
echo $this->renderPartial("site/views/appsMenu",array("moduleName"=>""));
echo $this->renderPartial("site/appsMenu",array("moduleName"=>""));
echo $this->renderPartial("protected/views/site/appsMenu",array("moduleName"=>""));
echo $this->renderPartial("//protected/views/site/appsMenu",array("moduleName"=>"")); 
```

并尝试过扩展

```
echo $this->renderPartial("appsMenu.php",array("moduleName"=>""),true, true);
echo $this->renderPartial("//appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("views/site/appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("views/site/appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("/appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("protected/views/site/appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("/protected/views/site/appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("views/appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("/views/appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("site/views/appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("site/views/appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("site/appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("protected/views/site/appsMenu.php",array("moduleName"=>""));
echo $this->renderPartial("//protected/views/site/appsMenu.php",array("moduleName"=>"")); 
```

我在“表单”模块中并尝试呈现文件“protected/views/site/appsMenu.php”。请帮帮我..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T15:54:53.677

使用`//`：

```
$this->renderPartial("//site/appsMenu"); 
```

这可以在[文档中看到](http://www.yiiframework.com/doc/api/1.1/CController#getViewFile-detail)

> 应用程序中的绝对视图：视图名称以双斜杠“//”开头。在这种情况下，将在应用程序的视图路径下搜索视图。此语法从 1.1.3 版开始可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-10T23:00:31.537

这个讨厌的一点点对我有用

```
$this->renderPartial('//../modules/MyMod/views/MyCon/MyView'); 
```

使用`//`别名`$root/protected/views`，然后把那个`../`位放在那里让我明白`$root/protected/views/../modules/$m/views/$c/$v`这真的意味着`$root/protected/modules/$m/views/$c/$v`

当然，为上面的 $X 和/或 MyXXX 值输入合理的值。

# r - R中使用的k-means的结果

> ID：14524818
> 
> 赞同：5
> 
> 时间：2013-01-25T15:19:56.787
> 
> 标签：r, cluster-analysis, k-means

我使用 R 的 kmeans 指令在数据集中执行 k-means 算法。我对我要去的一些参数有疑问。结果是：

```
Cluster means:
  Sepal.Length Sepal.Width Petal.Length Petal.Width
1     5.006000    3.428000     1.462000    0.246000 
```

在那种情况下，集群意味着什么？它是集群内所有对象距离的平均值吗？

同样在最后一部分我有：

```
Within cluster sum of squares by cluster:
[1] 15.15100 39.82097 23.87947
 (between_SS / total_SS =  88.4 %) 
```

那 88.4% 的值又是什么解释呢？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T16:21:19.597

聚类意味着组合以在由输入变量定义的多元空间中给出聚类的质心（中心）。因此，您显示的集群 1 的一组均值是该集群的质心（中心）的坐标。*它们被计算为分配给该集群的那些样本*的每个变量的值的平均值。

`88.4 %`是由聚类解释的数据集中总方差的度量。*k* -means 最小化样本的组内分散（传播），即平方和。这使组间分散最大化。通过将样本分配给*k*个集群而不是*n*（样本数）集群，平方和减少了 88.4%。

# search - mediawiki没有搜索wonder这个词？

> ID：14524823
> 
> 赞同：-1
> 
> 时间：2013-01-25T15:20:01.997
> 
> 标签：search, mediawiki

我有一个标题中带有单词 wonder 的页面（在名称空间主页中），还有另一个文件，在他的文本中包含 wonder 单词，但搜索引擎没有找到它们（默认），为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:31:18.990

默认搜索引擎很糟糕:)

如果这对您来说还不够，我建议您看看使用全文搜索引擎的扩展之一，请参阅[https://www.mediawiki.org/wiki/Fulltext_search_engines](https://www.mediawiki.org/wiki/Fulltext_search_engines)

# c# - c# 中的 get 是做什么的？

> ID：14524824
> 
> 赞同：0
> 
> 时间：2013-01-25T15:20:04.047
> 
> 标签：c#, forms, get

我从其他地方获取了这段代码，以便有效地显示和隐藏表单。虽然我了解其中的大部分内容，但我不明白 get 在这种情况下和一般情况下的作用。这可以解释吗？WinForms

```
public class FormProvider
{
    public static Form1 frm1
    {
        get
        {
            if (_frm1 == null)
            {
                _frm1 = new Form1();
            }
            return _frm1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:21:36.890

它只不过是自动生成函数的语法包装器

```
public static Form1 get_frm1()
{       
   return _frm1;       
} 
```

所以每次你引用`FormProvider.frm1`时，就像你在打电话`FormProvider.get_frm1()`

实际上，如果您尝试编写如下代码：

```
public class A {

    public string Name {get;}

    public string get_Name() {
       return "James Bond";
    }
} 
```

它将给出编译时错误，因为存在定义冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:30:18.407

这些在 C#中称为[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)

属性是一种封装字段的方式，可以使用这些所谓的“Getter”和“Setter”方法访问它们，这些方法可以包含所需的任何逻辑。

在这种情况下，“Getter”将返回您的现有实例`Form1`（如果有）或创建一个新实例（如果没有找到），将其分配给该`_form1`字段并返回。

我建议您研究上面的链接以进一步了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:22:28.033

**它用作属性的getter方法**

## 来自 MSDN

* * *

> 属性结合了字段和方法的各个方面。对于对象的用户来说，属性似乎是一个字段，访问该属性需要相同的语法。对于类的实现者来说，属性是一个或两个代码块，代表一个 get 访问器和/或一个 set 访问器。get 访问器的代码块在读取属性时执行；set 访问器的代码块在属性被分配一个新值时执行。没有 set 访问器的属性被认为是只读的。没有 get 访问器的属性被认为是只写的。具有两个访问器的属性是可读写的。
> 
> 与字段不同，属性不属于变量。因此，您不能将属性作为 ref（C# 参考）或 out（C# 参考）参数传递。

### 设置访问器

> set 访问器类似于返回类型为 void 的方法。它使用一个名为 value 的隐式参数，其类型是属性的类型。在以下示例中，将 set 访问器添加到 Value 属性：

```
**When you assign a value to the property, the set accessor is invoked by using an argument that provides the new value** 
```

例如考虑这个类

```
class DemoClass
{
    private int value;
    public Int32 Value
    {
        get 
        { 
            return value;
        }
        set
        {
            this.value = value;
        }
    }
} 
```

如果查看反射器中的编译程序集，您会注意到

```
.class private auto ansi beforefieldinit DemoClass
    extends [mscorlib]System.Object
{
    .method public hidebysig specialname rtspecialname instance void .ctor() cil managed
    {
        .maxstack 8
        L_0000: ldarg.0 
        L_0001: call instance void [mscorlib]System.Object::.ctor()
        L_0006: ret 
    }

    .property instance int32 Value
    {
        .get instance int32 ConsoleApplication1.DemoClass::get_Value()
        .set instance void ConsoleApplication1.DemoClass::set_Value(int32)
    }

    .field private int32 value

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:29:04.690

`frm1`是一个属性。

属性通常有一个 getter`get`和一个可选的 setter `set`。

这些用于在访问您的`Property`

在这种情况下，如果属性的支持者`_frm1`（即字段）是`null`，则 getter 负责将其设置为 的新实例`Form1`。

# php - 如何在循环中获取过去十二个月的开始和结束的 unix 时间？

> ID：14524825
> 
> 赞同：1
> 
> 时间：2013-01-25T15:20:06.003
> 
> 标签：php, mysql, sql, date, time

我希望打印我的数据库中去年每个月的列的总数。到目前为止，我要做的代码是：

```
$month = date("n");
$year  = date("Y");

$loop = 12;
while($loop>1) {
    $first = mktime(0,0,0,$month,1,$year);
    $last = mktime(23,59,00,$month+1,0,$year);

    $spendingData = mysql_query("SELECT * FROM spending WHERE date BETWEEN $first AND $last") or die(mysql_error());
    $totalMonth = 0;
    while($spending = mysql_fetch_array($spendingData))
    {
        $totalMonth = $totalMonth + $spending['amount'];
    }
    print "&pound;".$totalMonth;
    $loop = $loop-1;
    print "<br>";
} 
```

我的问题是如何在循环中调整每个月的时间？我想从时间戳中花几个月的时间，但由于我不知道每个月有多少天，我认为这不会奏效。我也不认为我可以只从月份数字中减去 1，因为这不会考虑数年。我也不想硬编码这些数字，因为它们会随着每个新的月份而改变。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:26:54.220

你可以在 MySQL 中相当简单地做到这一点：

```
SELECT MONTH(date) AS month, SUM(amount) AS amount
FROM yourtable
WHERE YEAR(date) = $year
GROUP BY MONTH(date) 
```

无需让 PHP 参与日期操作。

# php - CodeIgniter num_rows 和affected_rows 上下文

> ID：14524832
> 
> 赞同：2
> 
> 时间：2013-01-25T15:20:32.853
> 
> 标签：php, mysql, codeigniter

这可能是一个有点愚蠢的问题，但我不明白：

我的模型中有这两个功能

```
public function count()
{
    return $this->db->num_rows();
}

public function changes()
{
    return $this->db->affected_rows();
} 
```

当我调用`changes();`我的控制器时，它会显示最后（更新）查询的受影响行。但是，当我使用`count();`显示最后一个（选择）查询的行时，我得到一个错误..

控制器中的代码是这样的：

```
if (!$this->synchronization_model->get_contact_knowledge($contact['account_id'], SERVER_LOCATION_ID)) {
                        throw new Exception("Failed to update knowledge");
                    }

                    if( $this->synchronization_model->count() == 0) {
                        $this->synchronization_model->insert_knowledge($contact['account_id'], $contact_server_time);
                    } 
```

有没有办法解决或解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:28:53.463

这是我正确解决此问题的方法。

而不是这个功能：

```
public function check_account_already_exists($email_address)
{
    if ($query = $this->db->query('SELECT * FROM account WHERE email_address = ?', array($email_address)))
    {
        return true;
    }
} 
```

我有这个功能：

```
public function check_account_already_exists($email_address)
{
    if ($query = $this->db->query('SELECT * FROM account WHERE email_address = ?', array($email_address)))
    {
        return $query;
    }
} 
```

所以当我在我的控制器中调用它时：

```
 // Check whether the e-mail address has not already been taken
        if (!($count = $this->account_model->check_account_already_exists($email_address))) {
          throw new Exception("Failed to fetch account");
        }

       $this->account_model->count($count); 
```

我可以这样使用它。这样，上面的 if 语句仍然可以以相同的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:30:40.770

`num_rows()`不是`db`类的方法。应该针对`resultset`对象调用它。

```
$query = $this->db->query('SELECT * FROM my_table');
echo $query->num_rows(); 
```

正如你在这里看到的，我们不是在打电话，`$this->db->num_rows()`而是在打电话`$query->num_rows();`

作为一种解决方法，您可以将查询对象传递给`count()`方法，如下所示：

```
public function count($query)
{
    return $query->num_rows();
} 
```

**更新：**

根据您更新的代码，我建议以下内容：

我假设查询是在`synchronization_model`. 在这种情况下，你应该做的是。`synchronization_model`在say中有一个变量`row_count`。并将`num_rows()`返回的值放入这个变量中。中`count()` 只是返回这个变量。所以它会是这样的：

内部`synchronization_model`：

```
......
$query = $this->db->query('SELECT * FROM my_table');
$this->row_count = $query->num_rows();
......    
public function count()
{
    return $this->row_count;
}
...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:23:00.200

```
$this->db->num_rows(); 
```

正在返回结果在选择时获取的行数，您将需要将其用作

```
 $query = $this->db->get('table');

             OR           

   $query = $this->db->query('select * from table');
   $query->num_rows(); 
```

`return $this->db->affected_rows();`

正在返回更新、删除或插入时受影响的行

以及相关代码在哪里，以便我们可以看到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:23:48.433

在 CodeIgniter 中，`num_rows()`函数是查询对象的方法，而不是数据库对象……见[http://ellislab.com/codeigniter/user-guide/database/results.html](http://ellislab.com/codeigniter/user-guide/database/results.html)

例如，您将以`num_rows()`以下方式使用：

```
$query = $this->db->query("SELECT * FROM some_table WHERE some_col = 'blah'");

if($query->num_rows()){
    //yay, data!
} else {
    //no data for you
} 
```

# android - 处理后退按钮 (Android)

> ID：14524836
> 
> 赞同：2
> 
> 时间：2013-01-25T15:20:42.537
> 
> 标签：android, back-button

我有一个应用程序需要用户登录才能查看内容。当用户按下后退按钮时，会提示他是要退出还是留在应用程序上。但是，我想这样做，如果用户再次按下后退按钮，应用程序会将他发送回注销屏幕。我怎样才能做到这一点？

```
@Override
public void onBackPressed() {
    exitPrompt();

}
private void exitUser(){
    UserFunctions userFunk = new UserFunctions();   
    userFunk.logoutUser(getApplicationContext());
    userFunk.resetCarcoord(getApplicationContext());
    Intent logout = new Intent(getApplicationContext(), MainActivity.class);
    logout.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(logout);
    finish();

}
private void exitPrompt(){
    new AlertDialog.Builder(this)
    .setIcon(android.R.drawable.ic_dialog_alert)
    .setTitle("Log out")
    .setMessage("Are you sure you want to log out?")
    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {   
        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            exitUser();
        }
    })
    .setNegativeButton("No", null)
    .show();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:28:43.317

当调用 exitPrompt() 时，使用布尔变量 mIsexitPromptShowing 和 AlertDialog 实例定义一个类；将 mIsexitPromptShowing 实例设为 true 并存储 AlertDialog 实例。

在 onBackPressed() 函数上：

```
public void onBackPressed() {

   if (!mIsexitPromptShowing) {
      exitPrompt();
   } else {
      AlertDialog.dismiss();
   }

} 
```

我刚刚给出了一个示例代码，请处理安全检查。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:25:39.247

在第一次单击后退按钮时，启动计时器。（例如 CountDownTimer）
然后，如果用户再次单击后退按钮，取消计时器并将他重定向到注销屏幕。
如果，他没有，当计时器结束时，显示对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:49:30.947

您可以使用`AlertDialog.setOnCancelListener(...)`. 当用户取消对话框时调用此方法。请注意，这与被解除不同 - 可以以其他方式解除 Dialog，例如作为配置更改的一部分。

```
private void exitPrompt(){
    new AlertDialog.Builder(this)
        /*...*/
        .setOnCanelListener(new DialogInterface.OnCancelListener()) {
            @Override
            public void onCancel(DialogInterface dialog) {
                exitUser();
            }
        })
        /*...*/
} 
```

如果您改为使用 DialogFragment 进行对话，则可以替代地覆盖该`onCancel()`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-15T08:24:57.177

在您的活动或片段中覆盖此方法

```
 @Override
 public void onBackPressed() {
    if(condition) {
        //Write your code with this condition
    }
    else {  
        //To finish this activity  
    super.onBackPressed();
    }
  } 
```

# android - Android：无法在 Eclipse 项目中导入库

> ID：14524844
> 
> 赞同：2
> 
> 时间：2013-01-25T15:21:04.360
> 
> 标签：android, eclipse, libraries

我真的被日食惹恼了！我正在尝试将外部项目用作库（J. Feinstein 的滑动菜单）。在eclipse中导入库是可以的，但是当我打开我的项目的属性并将其添加为库时，它不起作用。Eclipse告诉我没问题，但是在我构建项目时，我有一个错误告诉我eclipse找不到library.apk。如果我再次检查属性，我的图书馆前面有一个红十字标识。

这是 Eclipse 中属性窗口的一个小屏幕截图。 [http://snag.gy/4jnKk.jpg](http://snag.gy/4jnKk.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:40:27.167

尝试删除此行，并使用“添加”将您的库项目连接到当前项目。如果您有 .jar 文件，请将其复制到 libs 文件夹并使用“Properties -> Java Build Path -> Add jars”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:43:58.823

我自己解决了这个问题......我使用 Egit 插件作为 CVS 并且它搞砸了一些东西！现在我正在使用控制台来处理 git，我再也没有问题了.. 无论如何谢谢 :)

# python - 将文件中的块解析为没有换行符的 Python 列表

> ID：14524848
> 
> 赞同：1
> 
> 时间：2013-01-25T15:21:29.380
> 
> 标签：python, file-io, python-2.7

**我**在一个包含许多内容的通用文件中有一个特定的内容块，该文件任意长，可以包含任何字符，每行以空格开头，并且在某些文本文件中具有以下形式：

```
 1\1\GINC-NODE9999\Scan\...
 ... ... ... ... ... ... ...
 ... ... ... ... ...\HF=-568
 .8880019,-568.2343213, -568
 .2343432, ... , -586.328492
 1\RMSD=... 
```

**我对**`\HF=`位于和之间的特定序列感兴趣`\RMSD=`。 **我想将这些数字放入 Python 列表中。**此序列只是一系列以逗号分隔的数字，**但是**，这些数字可以翻转到第二行。ALSO，`\HF=`并且`\RMSD`可以通过滚动到换行符来打破。

**目前的努力**

我目前有以下内容：

```
 with open(infile) as data:
        d1 = []
        start = '\\HF'     
        end = 'RMSD'
        should_append = False
        for line in data:
            if start in line:
                data = line[len(start):]
                d1.append(data)
                should_append=True
            elif end in line:
                should_append = False
                break
            elif should_append:
                d1.append(line) 
```

吐出以下列表

```
['.6184082129,7.5129238742\\\\Version=EM64L-G09RevC.01\\
State=1-A\\HF=-568\n', ' .8880019,-568.8879907,-568.8879686,
-568.887937,-\n'] 
```

**问题**不仅在于我在整个过程中都有换行符，而且我还保留了比我应该的更多的数据。此外，滚动到其他行的数字在列表中具有自己的位置。我需要它看起来像

```
['-568.8880019', '-568.8879907', ... ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:36:10.303

对于快速解决方案，您可以基于正则表达式实现简单的字符串连接。

我为您的数据格式实施了一个简短的解决方案。

```
import re

def naiveDecimalExtractor(data):
    p = re.compile("(-?\d+)[\n\s]*(\d+\.\d+)[\n\s]*(\d+)")
    brokenNumbers = p.findall(data)

    return ["".join(n) for n in brokenNumbers]

data = """
1\1\GINC-NODE9999\Scan\...
 ... ... ... ... ... ... ...
 ... ... ... ... ...\HF=-568
 .8880019,-568.2343213, -568
 .2343432, ... , -586.328492
 1\RMSD=...
"""

print naiveDecimalExtractor(data) 
```

问候，

和过去

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:44:44.723

多行非贪婪正则表达式可用于提取介于 \HF= 和 \RMSD= 之间的文本。提取文本后，应该很容易将其标记为组成数字

```
import re
import os
pattern = r'''\HF=(.*?)\RMSD='''
pat = re.compile(pattern, re.DOTALL)
for number in pat.finditer(open('file.txt').read()):
    print number.group(1).replace(os.linesep, '').replace(' ', '').strip(r'''\\''')
... 
-568 .8880019,-568.2343213, -568 .2343432, ... , -586.328492 1\ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:34:59.377

使用类似这样的东西将所有内容加入一行：

```
with open(infile) as data:
    joined = ''.join(data.read().splitlines()) 
```

然后解析它而不用担心换行符。

如果您的文件非常大，您可能需要考虑另一种方法来避免将其全部存储在内存中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:52:33.730

像这样的东西怎么样：

```
# open the file to read
f = open("test.txt")

# read the whole file, then concatenate the list as one big string (str)
str = " ".join(f.readlines())

# get the substring between \HF= and \RMDS, then remove any '\', 'n', or ' '
values = str[str.find("\HF=")+5:str.find("\RMSD")].translate(None, "\n ")

# the string is now just numbers separated by commas, so split it to a list
# using the ',' deliminator 
list = values.split(',') 
```

现在列表有：

```
['568.8880019', '-568.2343213', '-568.2343432', '...', '-586.3284921'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T17:52:30.743

我有这样的东西打开并忘记发布 - 一个“稍微”不同的答案，它使用`mmap`'d 文件和`re.finditer`：

这样做的好处是可以相对有效地处理较大的文件，因为它允许正则表达式引擎将文件视为一个长字符串，而不会立即进入内存。

```
import mmap
import re

with open('/home/jon/blah.txt') as fin:
    mfin = mmap.mmap(fin.fileno(), 0, access=mmap.ACCESS_READ)
    for match in re.finditer(r'\\HF=(.*?)\\RMSD=', mfin, re.DOTALL):
        print match.group(1).translate(None, '\n ').split(',')

# ['-568.8880019', '-568.2343213', '-568.2343432', '...', '-586.3284921'] 
```

# mysql - 从视图中调用存储过程

> ID：14524850
> 
> 赞同：4
> 
> 时间：2013-01-25T15:21:36.050
> 
> 标签：mysql, stored-procedures, view

我有一个创建表的过程，是否有可能有一个视图（或类似的）可以调用该过程然后从表中选择？

我试过这个：

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` FUNCTION `new_routine`(p1 INT) RETURNS int(1)
BEGIN
    CALL rMergeDateFields();
    RETURN 1;
END

CREATE VIEW `db`.`vIntervals` AS
  SELECT new_routine(0) AS col1;
  SELECT * FROM MergedData; 
```

但我得到这个错误

> 错误 1422：存储函数或触发器中不允许显式或隐式提交。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:30:58.140

你不能。视图*通常是*只读操作；如果调用存储过程，则无法保证该行为。

相关问题：

[如何在视图中调用存储过程？](https://stackoverflow.com/questions/916784/how-to-call-stored-procedure-in-a-view)

[是否可以在视图中调用存储过程？](https://stackoverflow.com/questions/5799489/is-it-possible-to-call-stored-procedure-in-view)

这是一个规范的资源：

[http://dev.mysql.com/doc/refman/5.1/en/view-updatability.html](http://dev.mysql.com/doc/refman/5.1/en/view-updatability.html)

> 一些视图是可更新的。也就是说，您可以在 UPDATE、DELETE 或 INSERT 等语句中使用它们来更新基础表的内容。要使视图可更新，视图中的行与基础表中的行之间必须存在一对一的关系。还有某些其他构造使视图不可更新。

由于调用存储过程不能保证与视图行的 1:1 关系，因此不允许更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T20:11:47.577

您不能从视图中执行此操作，但存储过程本身可以返回结果集。

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `merge_and_select` ()
BEGIN
    CALL rMergeDateFields();
    SELECT * FROM MergeData;
END $$ 
```

如果您调用 merge_and_select() rMergeDateFields 过程将运行，然后您将在一个步骤中将 MergeData 表的内容返回给您......这听起来像是您想要的。

然而，这是一个非常糟糕的实现，因为无法控制对 merge_and_select() 的并发调用，因此如果同时运行多次，各种事情都可能出错。

但是，根据您*真正*需要 rMergeDateFields() 执行的操作，您可以重写 rMergeDateFields() 以实际执行您需要完成的任何工作并将其直接返回给客户端，而无需使用无界 SELECT 使用 MergeData 表，如图所示以上。

您在存储过程中选择而不使用`INTO`变量的任何内容都将作为来自`CALL`.

# teamsite - Interwoven TeamSite 6.7.2：如何重新生成所有页面？

> ID：14524857
> 
> 赞同：3
> 
> 时间：2013-01-25T15:22:21.710
> 
> 标签：teamsite

是否可以在 Interwoven TeamSite 6.7.2 中重新生成所有页面？只需选择一个文件夹并单击 Actions -> regenerate page 不起作用。它收到错误消息：“不是生成的文件”。

那么是否有通过文件夹层次结构重新生成的技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:28:50.560

TeamSite 将处理您作为参数传递的任何内容，无论是文件还是文件夹。如果它不是基于模板的，您将看到该错误。没有办法在本地递归地重新生成整个工作区的页面。

我编写了 Perl 脚本来遍历文件系统，测试每个文件的扩展属性以查看它是否基于模板，如果是则重新生成页面。这可能是实现大规模再生的最简单方法。

如果您必须通过 GUI 进行此操作，您可以创建一个调用上述脚本的自定义菜单项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:43:20.923

不确定这个问题是什么时候发布的——它说的是 1 月 25 日，但没有透露年份，但 TeamSite 6.7 已经被供应商 HP Autonomy 停产了几年。

在撰写本文时，该软件的最新版本是 TeamSite 7.3.2，即将发布 7.4 版。我之所以提到版本，是因为创建和呈现页面的范式已经发生了彻底的变化。

页面不再“生成”和部署。SitePublisher - 现在是 TeamSite 的一部分，允许使用所见即所得工具创作页面。

也就是说，“生成”页面的旧范式仍然向后兼容，但如果您计划升级，则可以通过使用 SitePublisher 和 LiveSite 从系统中获得更多价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T03:41:40.450

从 unix 命令行运行此命令：

```
find /your/folder/startpoint -exec /path/to/iwregen {} \; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-06T12:51:04.480

您收到的错误消息：“不是生成的文件”是因为您正在尝试选择一个文件夹，因为文件夹的内容可能不同，有些可能是您的实际页面，而有些可能是 .pdf 文件、.txt 文件或任何其他扩展文件。

请尝试使用以下步骤重新生成页面：

1.  双击文件夹以打开您的实际页面所在的文件夹
2.  在此之后尝试选择所有页面（不是手动，但 UI 上有选项/复选框作为“全选”或“选择”）。
3.  现在，在选择全部之后，只需向下滚动并查看所有选定的内容，无论它们是实际页面还是其他内容。如果它们不是页面，则仅取消选择该特定文件。
4.  现在，单击“操作”并立即重新生成所有页面。这肯定会奏效。

如果它有用，请投票给这个解决方案，否则请添加您的进一步问题/问题将尽我所知为您提供帮助。

**谢谢！**

# c# - sql 探查器调用堆栈

> ID：14524865
> 
> 赞同：1
> 
> 时间：2013-01-25T15:23:01.867
> 
> 标签：c#, sql, sql-server, sql-server-2008

环境：Visual Studio 2008 SP1 和 SQL Server 2008

我有一个网页，显示我的 sql server 数据库中的一条记录。有很多动态的东西在发生，所以调用了大约一百个方法和 100 多个 sql server 事务。我是调试它的幸运者。

所以我真的不知道从哪里开始，但我认为如果我可以在我在 sql profiler 中看到的每个事务上设置一个断点并能够追溯到它来自的代码，那就太好了。只是一个想法。

您能否就如何实现这一壮举提出任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:31:08.993

通常，您可以在 C# 中的某个高级点中断并一点一点地向前推进，直到您到达 SQL 生成/执行部分。如果您的问题出在 C# 端，您可以通过这种方式进行调试。如果没有，则在第一次 SQL 执行之前单步执行，启动 SQL Server 管理工具，打开 SQL 分析器并设置为记录，然后单步执行 SQL 执行的 C# 端。停止 SQL 探查器并定位生成的 SQL 查询；您现在可以将其复制出来并 (1) 检查它，(2) 手动运行它以观察和分析结果。

对每个单独的 SQL 语句或每个相关批次执行此操作。

如果您对出错的地方或原因有更具体的想法，那将真的很有帮助。

# java - Android蓝牙串口RFCOMM低波特率/慢速传输

> ID：14524866
> 
> 赞同：4
> 
> 时间：2013-01-25T15:23:02.407
> 
> 标签：java, android, bluetooth, connectivity, rfcomm

我正在开发一个**Android 蓝牙**项目，以从定制硬件发送和接收数据。我使用SDK 中的*蓝牙聊天示例*作为基础。

我意识到无法更改客户端（Android 手机）上的*波特率*，波特率将取决于硬件。我尝试在硬件上设置不同的*波特率，但没有一个符合我们的预期；*

我能得到的最快速度是 91Kbps（当波特率设置为 2.7Mbps ~ 910Kbps 时）。使用最小波特率（115Kbps）我得到 43Kbps。我试过用不同的手机，都是一样的。我需要每秒将 170KB 的数据传输到硬件。

* * *

**规范**
*协议*：同步或生成的数据使用最大 520 字节大小的包发送到硬件。硬件在收到并批准每个数据包后发送验证命令，然后手机发送下一个数据包。
*客户端*：Android 2.3.3，三星 Galaxy w i8150，蓝牙 v3.0，RFCOMM
*硬件*：自定义，蓝牙 v2.1 BlueGiga WT11i

* * *

我完全糊涂了..这可能是手机上的Android或蓝牙设备引起的问题吗？我想知道最大波特率是多少？有没有办法加快传输速度（比如增加最大包大小，或者在不等待硬件验证命令的情况下发送所有包）。

* * *

> **编辑**
> 将包大小更改为 4160 字节后，吞吐量增加到 254Kbps。我试图找出达到 1.5Mbps 的最佳封装大小。我很感激任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T17:16:44.260

首先更改蓝牙**RFCOMM / 串行端口协议的***波特率*应该没有什么区别，因为它不是*真正的*串行端口，而只是一个*仿真*。（特定的制造商可以用它做一些特别的事情，但一般蓝牙或 Android 不使用该参数来控制空中比特率）

 ****影响**SPP**数据速率的因素将是*数据包的大小、*您可以通过蓝牙获得的*实际最大数据速率以及接收器读取的速度/发送器发送的频率。*对于数据包大小，您可以查看内部文档或尝试不同的大小以达到您应用程序的最佳数量。另外我建议发送*多个数据包*（或全部），直到流可以连续发送数据，类似地连续读取。

对您来说，这里的主要问题似乎是您可以通过蓝牙实现的实际**吞吐量。**如果您使用问题中提到的非**EDR**版本，那么极低级别的理论速度为*720Kbps*，并且在头上添加协议和应用程序以及**RFCOMM**协议开销，您最多可以获得*450-500 Kbps*左右。

如果您可以访问 + **EDR**即蓝牙版本 2.0 或更高版本 + EDR 的两个设备，那么您可以预期应用程序**吞吐量约为**1.2 到 1.5 Mbps（理论上的空中比特率为 2.0 或 3.0 Mbps）****

# android - 像用于存储关键数据的 KeyChain 结构？

> ID：14524867
> 
> 赞同：0
> 
> 时间：2013-01-25T15:23:14.677
> 
> 标签：android, security

我想在android中存储一些关键信息。我不想使用 SharedPreferences 因为不安全，它正在删除管理应用程序的“清除数据”属性。我认为这个工作钥匙串类的理想之选，但它需要 api 级别 14。我的 android 应用程序是 api 级别 8。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:37:39.443

> 我认为这个工作钥匙串类的理想之选，但它需要 api 级别 14。

AFAIK，钥匙串 API 仅用于证书，而不是“一些关键信息”。

> 我该怎么做呢？

你没有。我什至怀疑钥匙串 API 是防篡改的，因为加密密钥和算法都在设备上。如果您不希望用户拥有“一些关键信息”，请不要将这些信息放在设备上。

# grails - log4j : 参数附加文件名

> ID：14524870
> 
> 赞同：0
> 
> 时间：2013-01-25T15:23:29.473
> 
> 标签：grails, groovy, log4j, grails-2.0

我用`Grails`

在我的文件中`Config.groovy` ，我创建了一个附加程序：

```
log4j = {

    appenders {
        file name:'myAppli', file:'/tmp/myAppli.log'
    }
...
} 
```

是否可以通过数据参数我的附加程序的文件路径`file.properties`？

类似的东西：

```
file.properties:
myAppli.log.path=C:\\tmp\\

Config.groovy:
appenders {
    file name:'myLogs', file:myAppli.log.path + 'myLogs.log'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:43:15.140

文档中有一个部分：[externalized configuration](http://grails.org/doc/latest/guide/single.html#configExternalized)。您可以设置绝对位置或让 Grails 查看类路径。这是文档的示例：

```
grails.config.locations = [
    "classpath:${appName}-config.properties",
    "classpath:${appName}-config.groovy",
    "file:${userHome}/.grails/${appName}-config.properties",
    "file:${userHome}/.grails/${appName}-config.groovy" ] 
```

**编辑**：我在这里测试过。似乎该值仅在运行时通过配置对象可用，而在 Config.groovy 中不可用。根据[这个](http://grails.1312388.n4.nabble.com/using-an-external-property-w-in-Config-groovy-td3095970.html)线程，不可能做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:57:54.627

myAppli.log.path 应该可以工作！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:45:40.803

你几乎是对的。`log4j`闭包在整个配置被解析和组装后执行，在闭包中你可以通过变量访问完整的配置`config`。你可以说

```
grails.config.locations = ['file:file.properties']

log4j = {
    appenders {
        file name:'myAppli', file:"${config.myAppli.log.path}myLogs.log"
    }
    // ...
} 
```

我已经用 Grails 2.2 对此进行了测试：运行`grails create-app log4jtest`以创建一个新应用程序，然后编辑`log4jtest/grails-app/conf/Config.groovy`以在顶部添加

```
grails.config.locations = ["file:file.properties"]
logfile.name = "from-config.log" 
```

和`log4j`关闭

```
// log4j configuration
log4j = {
    println "filename: ${config.logfile.name}"
    // rest of closure as before 
```

使用运行此应用程序`grails run-app`，您将看到它打印`filename: from-config.log`（实际上是两次）。现在在包含该行`file.properties`的顶级文件夹中创建一个名为的文件`log4jtest`

```
logfile.name=from-external.log 
```

再次运行该应用程序，这一次它将打印出来`filename: from-external.log`。

# java - 为什么我的 android applciation 强制关闭？

> ID：14524871
> 
> 赞同：0
> 
> 时间：2013-01-25T15:23:34.143
> 
> 标签：java, android, eclipse, sqlite

我有一个将使用`SQLite`数据库的 android 应用程序。但是当它到达 select 语句时，它会强制关闭。我有一个用于执行此操作的类文件：

```
package com.thesis.menubook;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;
import java.util.ArrayList;
import java.util.List;

public class DBConnect {

        int id = 0;
        public static final String KEY_ROWID = "_id";
        public static final String KEY_IP = "saved_ip_address";
        private static final String TAG = "DBConnect";

        private static final String DATABASE_NAME = "MenuBook";
        private static final String DATABASE_TABLE_1 = "ipaddress";
       //private static final String DATABASE_TABLE_2 = "menudb";
       //private static final String DATABASE_TABLE_3 = "recipelist";
        private static final int DATABASE_VERSION = 1;

        private static final String DATABASE_CREATE_TABLE_1 =
            "CREATE TABLE ipaddress (_id integer primary key autoincrement, " +
                                 "saved_ip_address text not null " +
                                 "); ";
        private static final String DATABASE_CREATE_TABLE_2 =
            "CREATE TABLE menudb (menu_ID varchar primary key not null, " +
                                 "menu_name longtext, " +
                                 "menu_price double null default, " +
                                 "menu_description longtext, " +
                                 "menu_category text, " +
                                 "menu_status text " +
                                 "); ";
        private static final String DATABASE_CREATE_TABLE_3 =
            "CREATE TABLE recipelist (recipe_ID integer primary key not null autoincrement, " +
                                 "menu_ID varchar null default, " +
                                 "stock_ID varchar null default, " +
                                 "recipe_quantity double null defualt " +
                                 ");" ;

        private final Context context;

        private static DatabaseHelper DBHelper;
        private static SQLiteDatabase db;

        public DBConnect(Context ctx)
        {
            this.context = ctx;
            DBHelper = new DatabaseHelper(context);
        }

        public static class DatabaseHelper extends SQLiteOpenHelper
        {
            DatabaseHelper(Context context)
            {
                super(context, DATABASE_NAME, null, DATABASE_VERSION);
            }

            @Override
            public void onCreate(SQLiteDatabase db)
            {
                db.execSQL(DATABASE_CREATE_TABLE_1);
                db.execSQL(DATABASE_CREATE_TABLE_2);
                db.execSQL(DATABASE_CREATE_TABLE_3);
            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion,
                                  int newVersion)
            {
                Log.w(TAG, "Upgrading database from version " + oldVersion
                      + " to "
                      + newVersion + ", which will destroy all old data");
                db.execSQL("DROP TABLE IF EXISTS ipaddress");
                db.execSQL("DROP TABLE IF EXISTS menudb");
                db.execSQL("DROP TABLE IF EXISTS recipelist");
                onCreate(db);
            }

        }

        //---opens the database---
        public DBConnect open() throws SQLException
        {
            db = DBHelper.getWritableDatabase();
            return this;
        }

        //---closes the database---
        public void close()
        {
            DBHelper.close();
        }

        //---insert a title into the database---
        public long insertIPAddress(String ipaddress)
        {
            ContentValues initialValues = new ContentValues();
            initialValues.put(KEY_IP, ipaddress);
            return db.insert(DATABASE_TABLE_1, null, initialValues);
        }

        public String getIP()
        {
            String retrievedIP;

            String query = "SELECT saved_ip_address FROM ipaddress WHERE _id = (SELECT MAX(_id) FROM ipaddress)";
            Cursor cursor = db.rawQuery(query, null);
            retrievedIP= cursor.getString(cursor.getColumnIndex("saved_ip_address"));
            cursor.close();
            return retrievedIP;
        }

        public List<ColumnValue[]> select(final String query)
        {
            List<ColumnValue[]> result = null;
            Cursor cursor = db.rawQuery(query, null);

            if (cursor.moveToFirst())
            {
                result = new ArrayList<ColumnValue[]>();

                do
                {
                    int columns = cursor.getColumnCount();
                    ColumnValue[] cvarray = new ColumnValue[columns];

                    for (int i=0; i<columns; i++)
                    {
                        String key = cursor.getColumnName(i);
                        String value = cursor.getString(i);
                        ColumnValue cv = new ColumnValue(key, value);
                        cvarray[i] = cv;
                    }

                    result.add(cvarray);
                }
                while (cursor.moveToNext());
            }

            cursor.close();

            return result;
        }

        public class ColumnValue
        {
            public String column, value;

            public ColumnValue(String c, String v)
            {
                column = c; value = v;
            }
        }

} 
```

现在，当我查看 LogCat 时，我注意到“红色”错误（我真的不知道颜色的含义）从应用程序开始使用 onCreate 中的数据库的位置开始。

我在我的 sql 上看不到任何错误。这是因为 Eclipse、我的系统，还是我的 create 语句真的有错误？一定要指出来！

这是我的 LogCat，错误的开始以粗体显示。

谢谢你

```
01-25 22:58:30.245: DEBUG/AndroidRuntime(521): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
01-25 22:58:30.248: DEBUG/AndroidRuntime(521): CheckJNI is ON
01-25 22:58:34.103: DEBUG/AndroidRuntime(521): Calling main entry com.android.commands.pm.Pm
01-25 23:03:39.518: INFO/ActivityManager(83): Starting: Intent { cmp=com.thesis.menubook/.ChooseTable } from pid 541
01-25 23:03:40.161: WARN/ActivityManager(83): Activity pause timeout for ActivityRecord{4078a9e0 com.thesis.menubook/.IPAddress} 
```

**01-25 23:03:40.769：INFO/SqliteDatabaseCpp(541)：sqlite 返回：错误代码 = 1，msg = 接近“自动增量”：语法错误，db=/data/data/com.thesis.menubook/databases/MenuBook**

```
01-25 23:03:40.849: WARN/System.err(541): android.database.sqlite.SQLiteException: near "autoincrement": syntax error
01-25 23:03:40.889: WARN/System.err(541):     at android.database.sqlite.SQLiteStatement.native_executeSql(Native Method)
01-25 23:03:40.889: WARN/System.err(541):     at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:89)
01-25 23:03:40.889: WARN/System.err(541):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1933)
01-25 23:03:40.939: WARN/System.err(541):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1864)
01-25 23:03:40.939: WARN/System.err(541):     at com.thesis.menubook.DBConnect$DatabaseHelper.onCreate(DBConnect.java:68)
01-25 23:03:40.958: WARN/System.err(541):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
01-25 23:03:40.958: WARN/System.err(541):     at com.thesis.menubook.DBConnect.open(DBConnect.java:89)
01-25 23:03:40.958: WARN/System.err(541):     at com.thesis.menubook.IPAddress$InsertIPAddress$1.run(IPAddress.java:92)
01-25 23:03:40.978: WARN/System.err(541):     at android.os.Handler.handleCallback(Handler.java:587)
01-25 23:03:40.978: WARN/System.err(541):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 23:03:40.978: WARN/System.err(541):     at android.os.Looper.loop(Looper.java:132)
01-25 23:03:40.978: WARN/System.err(541):     at android.app.ActivityThread.main(ActivityThread.java:4025)
01-25 23:03:41.046: WARN/System.err(541):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 23:03:41.049: WARN/System.err(541):     at java.lang.reflect.Method.invoke(Method.java:491)
01-25 23:03:41.068: WARN/System.err(541):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-25 23:03:41.078: WARN/System.err(541):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-25 23:03:41.124: WARN/System.err(541):     at dalvik.system.NativeStart.main(Native Method)
01-25 23:03:49.440: INFO/ActivityManager(83): Displayed com.thesis.menubook/.ChooseTable: +9s277ms
01-25 23:03:49.678: WARN/ActivityManager(83): Launch timeout has expired, giving up wake lock!
01-25 23:03:50.244: WARN/ActivityManager(83): Activity idle timeout for ActivityRecord{408897c0 com.thesis.menubook/.ChooseTable}
01-25 23:03:51.832: WARN/InputConnectionWrapper.ICC(136): Timed out waiting on IInputContextCallback
01-25 23:03:53.015: INFO/InputConnectionWrapper.ICC(136): Got out-of-sequence callback 189 (expected 190) in setCursorCapsMode, ignoring.
01-25 23:04:47.188: INFO/SqliteDatabaseCpp(541): sqlite returned: error code = 1, msg = near "autoincrement": syntax error, db=/data/data/com.thesis.menubook/databases/MenuBook
01-25 23:04:47.258: WARN/System.err(541): android.database.sqlite.SQLiteException: near "autoincrement": syntax error
01-25 23:04:47.327: WARN/System.err(541):     at android.database.sqlite.SQLiteStatement.native_executeSql(Native Method)
01-25 23:04:47.329: WARN/System.err(541):     at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:89)
01-25 23:04:47.359: WARN/System.err(541):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1933)
01-25 23:04:47.359: WARN/System.err(541):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1864)
01-25 23:04:47.389: WARN/System.err(541):     at com.thesis.menubook.DBConnect$DatabaseHelper.onCreate(DBConnect.java:68)
01-25 23:04:47.398: WARN/System.err(541):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
01-25 23:04:47.398: WARN/System.err(541):     at com.thesis.menubook.DBConnect.open(DBConnect.java:89)
01-25 23:04:47.448: WARN/System.err(541):     at com.thesis.menubook.ChooseTable$GetTableDetails$1.run(ChooseTable.java:102)
01-25 23:04:47.448: WARN/System.err(541):     at android.os.Handler.handleCallback(Handler.java:587)
01-25 23:04:47.448: WARN/System.err(541):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 23:04:47.448: WARN/System.err(541):     at android.os.Looper.loop(Looper.java:132)
01-25 23:04:47.458: WARN/System.err(541):     at android.app.ActivityThread.main(ActivityThread.java:4025)
01-25 23:04:47.471: WARN/System.err(541):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 23:04:47.471: WARN/System.err(541):     at java.lang.reflect.Method.invoke(Method.java:491)
01-25 23:04:47.499: WARN/System.err(541):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-25 23:04:47.499: WARN/System.err(541):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-25 23:04:47.499: WARN/System.err(541):     at dalvik.system.NativeStart.main(Native Method)
01-25 23:04:47.751: DEBUG/AndroidRuntime(541): Shutting down VM
01-25 23:04:47.751: WARN/dalvikvm(541): threadid=1: thread exiting with uncaught exception (group=0x40014760)
01-25 23:04:47.838: ERROR/AndroidRuntime(541): FATAL EXCEPTION: main
01-25 23:04:47.838: ERROR/AndroidRuntime(541): java.lang.IllegalArgumentException: Host name may not be null
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at org.apache.http.HttpHost.<init>(HttpHost.java:83)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at org.apache.http.impl.client.AbstractHttpClient.determineTarget(AbstractHttpClient.java:497)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at com.thesis.menubook.JSONParser.makeHttpRequest(JSONParser.java:62)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at com.thesis.menubook.ChooseTable$GetTableDetails$1.run(ChooseTable.java:119)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at android.os.Handler.handleCallback(Handler.java:587)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at android.os.Looper.loop(Looper.java:132)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at android.app.ActivityThread.main(ActivityThread.java:4025)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at java.lang.reflect.Method.invoke(Method.java:491)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-25 23:04:47.838: ERROR/AndroidRuntime(541):     at dalvik.system.NativeStart.main(Native Method)
01-25 23:04:47.950: WARN/ActivityManager(83):   Force finishing activity com.thesis.menubook/.ChooseTable
01-25 23:04:48.575: WARN/ActivityManager(83): Activity pause timeout for ActivityRecord{408897c0 com.thesis.menubook/.ChooseTable}
01-25 23:04:52.609: INFO/Process(541): Sending signal. PID: 541 SIG: 9
01-25 23:04:53INFO.259: /ActivityManager(83): Process com.thesis.menubook (pid 541) has died.
01-25 23:04:53.279: ERROR/InputDispatcher(83): channel '4099fdb0 com.thesis.menubook/com.thesis.menubook.IPAddress (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
01-25 23:04:53.279: ERROR/InputDispatcher(83): channel '4099fdb0 com.thesis.menubook/com.thesis.menubook.IPAddress (server)' ~ Channel is unrecoverably broken and will be disposed!
01-25 23:04:53.420: INFO/WindowManager(83): WIN DEATH: Window{4099fdb0 com.thesis.menubook/com.thesis.menubook.IPAddress paused=false}
01-25 23:04:54.193: INFO/WindowManager(83): WIN DEATH: Window{408347c8 com.thesis.menubook/com.thesis.menubook.ChooseTable paused=false}
01-25 23:04:54.819: INFO/WindowManager(83): WIN DEATH: Window{407c8fa8 com.thesis.menubook/com.thesis.menubook.ChooseTable paused=false}
01-25 23:04:55.620: INFO/WindowManager(83): WINDOW DIED Window{4099fdb0 com.thesis.menubook/com.thesis.menubook.IPAddress paused=false}
01-25 23:04:55.690: ERROR/InputDispatcher(83): Received spurious receive callback for unknown input channel.  fd=187, events=0x8
01-25 23:04:55.690: ERROR/InputDispatcher(83): Received spurious receive callback for unknown input channel.  fd=190, events=0x8
01-25 23:04:56.698: WARN/InputManagerService(83): Got RemoteException sending setActive(false) notification to pid 541 uid 10004
01-25 23:04:58.078: WARN/ActivityManager(83): Launch timeout has expired, giving up wake lock!
01-25 23:04:59.405: DEBUG/dalvikvm(147): GC_EXPLICIT freed 2K, 4% free 12941K/13383K, paused 76ms+28ms
01-25 23:07:14.329: DEBUG/SntpClient(83): request time failed: java.net.SocketException: Address family not supported by protocol
01-25 23:08:58.401: DEBUG/dalvikvm(83): GC_CONCURRENT freed 1467K, 15% free 12265K/14279K, paused 28ms+36ms
01-25 23:12:14.398: DEBUG/SntpClient(83): request time failed: java.net.SocketException: Address family not supported by protocol 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:31:51.047

您有两个“创建”语句。一个包含

```
_id integer primary key autoincrement 
```

根据文档，这是正确的。另一个有

```
recipe_ID integer primary key not null autoincrement 
```

我怀疑额外的“非空”是问题所在。因为它是一个主键，它本质上应该是“not null”，所以这可能是你的语法错误。

您还可以使用调试器找出导致问题的语句执行。围绕每个 sql 语句执行的 try/catch 块也可能是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:47:14.027

不需要添加（非空）自动增量主键，可以在声明下面使用/添加。请注意，一旦您将字段声明为自动增量，您就不必在该字段中插入任​​何值。它将是非空值和增量值。

整数主键自动增量

更多详情，请查看以下链接： [http ://www.sqlite.org/faq.html#q1](http://www.sqlite.org/faq.html#q1)

# javascript - 在加载表单上显示自定义 HTML5 验证错误

> ID：14524872
> 
> 赞同：1
> 
> 时间：2013-01-25T15:23:38.087
> 
> 标签：javascript, html, validation

有没有办法在加载表单上显示自定义[HTML5 表单验证错误？](http://msdn.microsoft.com/en-us/magazine/hh547102.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:57:31.000

看看这个： [http ://www.w3.org/html/wg/drafts/html/master/forms.html#dom-cva-setcustomvalidity](http://www.w3.org/html/wg/drafts/html/master/forms.html#dom-cva-setcustomvalidity)

`object.setCustomValidity(error)`

示例：http: [//jsfiddle.net/makque/DQvsH/](http://jsfiddle.net/makque/DQvsH/)

我自己有问题`type="email"`，因为它仍然接受像**you@mail**这样的输入作为有效的电子邮件地址，谢谢你的提问。

[已编辑] 我不明白，但是像这样吗？[http://jsfiddle.net/makque/wk4HY/](http://jsfiddle.net/makque/wk4HY/)

# css - 如何在不使用百分比的情况下计算边界半径的最大值？

> ID：14524875
> 
> 赞同：10
> 
> 时间：2013-01-25T15:23:49.040
> 
> 标签：css

CSS3 使用该`border-radius`属性在元素中设置圆角。这些值通常在*px*中设置，允许的最小值是*0px*。根据具有此属性的元素的尺寸，视觉结果是可变的。例如，尺寸为*100px X 100px*的元素`border-radius: 20px;`不会完全圆润（圆形），否则*尺寸为 10px X 10px*的元素将是。允许的最大值没有限制。

问题是：如何根据元素大小计算**最大值**，使其 100% 舍入？

[小提琴页面](http://jsfiddle.net/Jp5L3/)

**编辑：如何计算以像素（px）为单位的值？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T15:27:35.430

为什么不使用百分比？

```
border-radius: 50%; 
```

只要确保你应用它的任何东西都是方形的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-25T15:27:00.697

正确的方法应该是

```
border-radius: 50%; 
```

[规范](http://www.w3.org/TR/css3-background/#the-border-radius)声明您可以在此处使用百分比值，并且它应该来自 `border-box`元素的相应尺寸。

[规范](http://www.w3.org/TR/css3-background/corner.png)中的图像说明了如果您需要一个圆圈，为什么`50%`是正确的值：

![在此处输入图像描述](../Images/059f2f13a0af751a5a3b83eb167df59e.png)

如果您的元素不是方形的（高度！= 宽度），您仍然可以使用它来获得一个漂亮的椭圆。

# c# - 实体框架。需要帮助过滤结果

> ID：14524879
> 
> 赞同：2
> 
> 时间：2013-01-25T15:24:01.400
> 
> 标签：c#, entity-framework, filtering

需要在实体框架中选择数据，但需要过滤子孙

我有 4 张桌子。`Parent -> Child -> GrandChild -> GreatGrandChild`我想返回所有父母，但过滤孩子和曾孙。

换句话说（例如）

```
SELECT     Parent.* 
FROM       Parent 
INNER JOIN Child      
INNER JOIN Grandchild 
INNER JOIN GreatGrandChild 
WHERE      child.Column5           =  600   AND
           GreatGrandChild.Column3 = 1000 
```

它不能是匿名类型，因为我需要更新数据并将saveChanges 保存到数据库。

使用 vs 2010 和 EF 4.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:26:42.867

使用 linq 你应该需要这样的东西。

```
var q = from q1 in dbContext.Parent
        join q2 in dbContext.Children
        on q1.key equals q2.fkey
        join q3 in  ........
        where q4.col1 == 3000
        select q1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:24:05.643

这个查询应该做你想做的事。是的，它有点乱，因为它嵌套得太深了。

```
var result = context.Parent
                    .Where(parent => parent.Child
                                           .Any(child => (child.Column5 == 600) &&
                                                          child.GrandChild
                                                               .Any(grandchild => grandchild.GreatGrandChild
                                                                                            .Any(greatgrandchild => greatgrandchild.Column3 == 1000)))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:35:15.133

你的表结构——如果你的例子不仅仅是为了说明，让我认为你可能想在这里更多地考虑你的模型（即孩子是独立的实体类型还是应该是定义的关系？）

您描述的是一个简单的连接和 where 子句，并且基本上以相同的方式编写：假设您从 DBContext 返回 DBSet：

```
_context.Parents.Join(context.Child, p=>p.Parent.ID, c=>c.ParentID)
.Join(...Grandchild...).Where(o=>o.Column5=600)
.Join(...GreatGrandChild...).Where(o=>o.Column3=1000) 
```

**编辑**以取回您可能需要执行以下操作的强类型实体：

```
var greatgrandchildren = context.GreatGrandchildren.Where(o=>o.Column3=1000).ToList();
var grandchildren = context.Grandchildren.Where(o=>o.Column3=600 and greatgrandchildren.contains(o)).ToList();     
var children = context.Children.Where(o=>grandchildren.Contains(o)).ToList();
var parents = context.Parent(o=>children.Contains(o).ToList(); 
```

我的语法可能已关闭，有人可以添加，我可以避免 .ToList() 以防止往返直到最后一次通话吗？

# asp.net - Validationengine jquery 无法正常工作以进行本地化

> ID：14524881
> 
> 赞同：1
> 
> 时间：2013-01-25T15:24:15.433
> 
> 标签：asp.net, localization, master-pages, jquery-validation-engine

我正在使用 validationEngine jquery 2.6.2 在 ASP.NET 中进行验证。我想根据选择的语言（如英语或日语）加载其语言规则文件。我在应用程序中使用母版页。对此给出一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:59:30.163

您没有指定如何选择语言以及如何检查当前选择的语言。

要本地化验证引擎，您必须引用正确的脚本语言。

如果您使用脚本管理器，您可以在母版页后面的代码中动态引用本地化脚本。

脚本管理器标记声明：

```
<asp:ScriptManager ID="scrManager" runat="server">
  <Scripts>
    <asp:ScriptReference Path="~/js/jquery.validationEngine.js" />
  </Scripts>
</asp:ScriptManager> 
```

然后你可以动态添加你的语言脚本（代码后面）：

```
ScriptReference validationEngineLanguage = new ScriptReference();
// #### Assign the correct script reference based on the selected language #####
validationEngineLanguage.Path = "~/js/jquery.validationEngine-en.js";
this.scrManager.Scripts.Add(validationEngineLanguage); 
```

动态引用脚本的另一个选项是在代码隐藏中获取标签引用并添加脚本标签。

# oracle - 如何在单个中合并重叠日期

> ID：14524890
> 
> 赞同：-5
> 
> 时间：2013-01-25T15:25:00.227
> 
> 标签：oracle, oracle10g, oracle11g

我如何从同一个表的两个重叠日期行中为相同的 id 获取一行。我有超过 50000 条记录。

我有以下示例数据。

```
ID    start_dt    end_dt       division
1212  04/01/2006  03/01/2007   second
1212  05/01/2009  01/01/2010   second
1212  04/01/2006  03/01/2008   second   --- This should be selected as longest timeframe
1212  09/03/2007  03/01/2008   third
1213  05/03/2005  04/11/2009   second
1214  07/03/2007  03/01/2008   third 
```

我应该得到的数据如下。

```
ID    start_dt    end_dt       division
1212  04/01/2006  03/01/2008   second
1212  05/01/2009  01/01/2010   second
1213  05/03/2005  04/11/2009   second
1214  07/03/2007  03/01/2008   third 
```

谢谢你。拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:40:13.390

现在我了解了您的问题，只需减去 2 个日期即可确定时间范围差异：

```
SELECT S.Id, S.Start_dt, S.End_dt, S.Division
FROM Sample S
 JOIN (
   SELECT S.Id, Max(S.end_dt-S.start_dt) as timeframe
FROM Sample S
GROUP BY S.Id ) S2 ON S.Id = S2.Id 
    AND S.end_dt-S.start_dt = s2.timeframe 
```

这是[小提琴](http://sqlfiddle.com/#!4/91076/2)。

祝你好运。

# github - 在 Github 上是否有进入 ZenMode 的命令键？

> ID：14524891
> 
> 赞同：-4
> 
> 时间：2013-01-25T15:25:04.823
> 
> 标签：github, editor

GitHub 现在允许人们在编写文档时 [切换到大部分空白屏幕。](https://github.com/blog/1379-zen-writing-mode)

是否有一个命令键可以快速进入此模式而无需单击并进一步分散自己的注意力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:05:36.880

当然。`<CTRL>-<SHIFT>-<L>`将进入该区域。

# matrix - Stata是否存在相当于matlab的xlswrite（）？

> ID：14524894
> 
> 赞同：1
> 
> 时间：2013-01-25T15:25:16.257
> 
> 标签：matrix, stata

我需要将在 Stata 中创建的几个矩阵导出到已经存在的 excel 文件的几个不同的专门命名的工作表中。这将是使用 xlswrite() 在 Matlab 中的小菜一碟。我在 Stata 中找不到类似的命令。

“xml_tab”可以工作，但它似乎不想让我打开并更改*已经存在的*excel 文件。它总是从创建一个新的 excel 文件开始。

我将不胜感激有关如何获得“xml_tab”或其他一些Stata命令的帮助，以打开一个已经存在的excel文件，对其进行更改（用新矩阵覆盖特定工作表），然后保存它而不覆盖所有其他床单上我不想碰的其他东西。

Stata能做到吗？

谢谢

编辑：

我需要做的一个例子是：

```
 *Define poverty line
    scalar povlin=29347.5
    *1) SETUP sheet
    mat SETUP=(1,J(1,3,0),1,J(1,2,0),1,1,J(1,5,0),povlin)

    /* Here I need to export the matrix SETUP to sheet "SETUP" in an 
    already existing excel file.  In matlab it would be
    xlswrite('filename','SETUP','A2')  */

    *2) FARM sheet
    tabstat acres,stat(sum) save
    mat acrtot=r(StatTotal)
    tabstat aehh07 offrinc07,save
    mat vmeans=r(StatTotal)
    mat maehh=vmeans[1,1]
    mat moffrinc=vmeans[1,2]
    tabstat aehh07 offrinc07 acres,stat(cv) save
    mat CV=r(StatTotal)
    tabstat acres,save
    mat macres=r(StatTotal)
    mat FARM=(1,acrtot,maehh,CV[1,1],moffrinc,CV[1,2],moffrinc,CV[1,2],J(1,3,0),macres)

    /* Here I need to export the matrix FARM to sheet "FARM" in the 
    same already existing excel file where I put the SETUP matrix.  In matlab it would 
    be xlswrite('filename','FARM','A2')  */ 
```

我需要为几张纸做这种事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:51:41.347

矩阵可能是指 (a) Mata 矩阵 (b) Stata 矩阵 (c) 包含一个或多个 Stata 变量的完整或部分数据集。最后一个（c）似乎最有可能。

在 Excel 中更改某些内容的方法是打开 Excel。Stata 不提供，因为它是您似乎要求的 Excel 操作的远程控制。但 Stata 命令`import excel`并`export excel`似乎提供了替代方案。

我从未使用过`xml_tab`（Stata Journal 2008），但我一直理解它的主要目的是导出结果表，而不是数据。

如果你的意思是（b），你可以`svmat`先使用。

我猜你的意思不是（a）。

（2013 年 7 月更新）Stata 13 现在有一个`putexcel`命令。有关介绍，请参见[http://www.stata.com/help.cgi?putexcel](http://www.stata.com/help.cgi?putexcel)。

# android - 操作栏 Sherlock 在打字时移动

> ID：14524899
> 
> 赞同：0
> 
> 时间：2013-01-25T15:26:33.250
> 
> 标签：android, keyboard, android-edittext, actionbarsherlock

在我的 Layout-XML 中，有五个 EditText，我正在使用 Actionbar Sherlock。当我输入第五个 EditText 并出现键盘时，整个布局向上移动，甚至是操作栏。为什么它会有这样的行为，我该怎么做才能使操作栏保持静态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T13:45:50.710

根据我的经验，最好的方法是在包含所有编辑文本的布局中放置一个垂直滚动视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:39:04.590

尝试`android:windowSoftInputMode`在清单中针对该特定活动使用不同的设置。听起来你想要`adjustResize`或`adjustNothing`。有关 windowSoftInputMode 选项的更多信息，请参阅此处的文档（朝向底部）：http: [//developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

# codeigniter - 用于 ajax url 的 Codeigniter 和 i18n

> ID：14524903
> 
> 赞同：0
> 
> 时间：2013-01-25T15:26:56.610
> 
> 标签：codeigniter, internationalization

我在 codeginiter 中将 i18n 用于多语言站点。但是我如何获得带有语言 ID（'en'、'fr'、...）的 baseURL 以将其用于 js 文件中的 Ajax 调用。

# c# - 将多个文件合并为一个文件

> ID：14524909
> 
> 赞同：21
> 
> 时间：2013-01-25T15:27:24.603
> 
> 标签：c#, .net, file-io, copy

代码：

```
static void MultipleFilesToSingleFile(string dirPath, string filePattern, string destFile)
{
    string[] fileAry = Directory.GetFiles(dirPath, filePattern);

    Console.WriteLine("Total File Count : " + fileAry.Length);

    using (TextWriter tw = new StreamWriter(destFile, true))
    {
        foreach (string filePath in fileAry)
        {
            using (TextReader tr = new StreamReader(filePath))
            {
                tw.WriteLine(tr.ReadToEnd());
                tr.Close();
                tr.Dispose();
            }
            Console.WriteLine("File Processed : " + filePath);
        }

        tw.Close();
        tw.Dispose();
    }
} 
```

我需要对其进行优化，因为它非常慢：45 个平均大小为 40 - 50 Mb XML 文件的文件需要 3 分钟。

请注意：平均 45 MB 的 45 个文件只是一个示例，它可以是大小`n`的文件数`m`，其中`n`以千`m`为单位，平均可以是 128 Kb。简而言之，它可能会有所不同。

您能否提供有关优化的任何意见？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-25T20:47:37.380

# 一般回答

为什么不直接使用[`Stream.CopyTo(Stream destination)`方法](https://msdn.microsoft.com/en-us/library/system.io.stream.copyto(v=vs.100).aspx)？

```
private static void CombineMultipleFilesIntoSingleFile(string inputDirectoryPath, string inputFileNamePattern, string outputFilePath)
{
    string[] inputFilePaths = Directory.GetFiles(inputDirectoryPath, inputFileNamePattern);
    Console.WriteLine("Number of files: {0}.", inputFilePaths.Length);
    using (var outputStream = File.Create(outputFilePath))
    {
        foreach (var inputFilePath in inputFilePaths)
        {
            using (var inputStream = File.OpenRead(inputFilePath))
            {
                // Buffer size can be passed as the second argument.
                inputStream.CopyTo(outputStream);
            }
            Console.WriteLine("The file {0} has been processed.", inputFilePath);
        }
    }
} 
```

# 缓冲区大小调整

请注意，上述方法已重载。

有两种方法重载：

1.  [`CopyTo(Stream destination)`](https://docs.microsoft.com/en-us/dotnet/api/system.io.stream.copyto?view=netframework-4.0#System_IO_Stream_CopyTo_System_IO_Stream_).
2.  [`CopyTo(Stream destination, int bufferSize)`](https://docs.microsoft.com/en-us/dotnet/api/system.io.stream.copyto?view=netframework-4.0#System_IO_Stream_CopyTo_System_IO_Stream_System_Int32_).

第二种方法重载通过`bufferSize`参数提供缓冲区大小调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T15:35:31.827

你可以做几件事：

*   根据我的经验，默认缓冲区大小可以增加到大约 120K 的显着优势，我怀疑在所有流上设置一个大缓冲区将是最简单和最显着的性能提升：

    ```
    new System.IO.FileStream("File.txt", System.IO.FileMode.Open, System.IO.FileAccess.Read, System.IO.FileShare.Read, 150000); 
    ```

*   使用`Stream`类，而不是`StreamReader`类。

*   将内容读入一个大缓冲区，立即将它们转储到输出流中——这将加快小文件的操作。
*   不需要多余的关闭/处置：你有`using`声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T16:06:50.770

一种选择是使用[复制](http://www.computerhope.com/copyhlp.htm)命令，让它做它擅长的事情。

就像是：

```
static void MultipleFilesToSingleFile(string dirPath, string filePattern, string destFile)
{
    var cmd = new ProcessStartInfo("cmd.exe", 
        String.Format("/c copy {0} {1}", filePattern, destFile));
    cmd.WorkingDirectory = dirPath;
    cmd.UseShellExecute = false;
    Process.Start(cmd);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T16:20:00.267

我会使用 BlockingCollection 来读取，这样您就可以同时读取和写入。
显然应该写入单独的物理磁盘以避免硬件争用。此代码将保留顺序。
读取将比写入快，因此不需要并行读取。
同样，由于读取速度会更快，因此限制了集合的大小，因此读取不会比写入更远。
在写入电流的同时并行读取单个 next 的简单任务存在文件大小不同的问题 - 写入小文件比读取大文件快。

我使用这种模式在 T1 上读取和解析文本，然后在 T2 上插入到 SQL。

```
public void WriteFiles()
{
    using (BlockingCollection<string> bc = new BlockingCollection<string>(10))
    {
        // play with 10 if you have several small files then a big file
        // write can get ahead of read if not enough are queued

        TextWriter tw = new StreamWriter(@"c:\temp\alltext.text", true);
        // clearly you want to write to a different phyical disk 
        // ideally write to solid state even if you move the files to regular disk when done
        // Spin up a Task to populate the BlockingCollection
        using (Task t1 = Task.Factory.StartNew(() =>
        {
            string dir = @"c:\temp\";
            string fileText;      
            int minSize = 100000; // play with this
            StringBuilder sb = new StringBuilder(minSize);
            string[] fileAry = Directory.GetFiles(dir, @"*.txt");
            foreach (string fi in fileAry)
            {
                Debug.WriteLine("Add " + fi);
                fileText = File.ReadAllText(fi);
                //bc.Add(fi);  for testing just add filepath
                if (fileText.Length > minSize)
                {
                    if (sb.Length > 0)
                    { 
                       bc.Add(sb.ToString());
                       sb.Clear();
                    }
                    bc.Add(fileText);  // could be really big so don't hit sb
                }
                else
                {
                    sb.Append(fileText);
                    if (sb.Length > minSize)
                    {
                        bc.Add(sb.ToString());
                        sb.Clear();
                    }
                }
            }
            if (sb.Length > 0)
            {
                bc.Add(sb.ToString());
                sb.Clear();
            }
            bc.CompleteAdding();
        }))
        {

            // Spin up a Task to consume the BlockingCollection
            using (Task t2 = Task.Factory.StartNew(() =>
            {
                string text;
                try
                {
                    while (true)
                    {
                        text = bc.Take();
                        Debug.WriteLine("Take " + text);
                        tw.WriteLine(text);                  
                    }
                }
                catch (InvalidOperationException)
                {
                    // An InvalidOperationException means that Take() was called on a completed collection
                    Debug.WriteLine("That's All!");
                    tw.Close();
                    tw.Dispose();
                }
            }))

                Task.WaitAll(t1, t2);
        }
    }
} 
```

[BlockingCollection 类](http://msdn.microsoft.com/en-us/library/vstudio/dd267312%28v=vs.100%29.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-23T09:45:04.520

[sergey-brunov](https://stackoverflow.com/users/490018/sergey-brunov)发布的用于合并 2GB 文件的尝试解决方案。系统为此工作占用了大约 2 GB 的 RAM。我进行了一些更改以进行更多优化，现在合并 2GB 文件需要 350MB RAM。

```
private static void CombineMultipleFilesIntoSingleFile(string inputDirectoryPath, string inputFileNamePattern, string outputFilePath)
        {
            string[] inputFilePaths = Directory.GetFiles(inputDirectoryPath, inputFileNamePattern);
            Console.WriteLine("Number of files: {0}.", inputFilePaths.Length);
            foreach (var inputFilePath in inputFilePaths)
            {
                using (var outputStream = File.AppendText(outputFilePath))
                {
                    // Buffer size can be passed as the second argument.
                    outputStream.WriteLine(File.ReadAllText(inputFilePath));
                    Console.WriteLine("The file {0} has been processed.", inputFilePath);

                }
            }
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-15T20:45:53.213

```
 // Binary File Copy
    public static void mergeFiles(string strFileIn1, string strFileIn2, string strFileOut, out string strError)
    {
        strError = String.Empty;
        try
        {
            using (FileStream streamIn1 = File.OpenRead(strFileIn1))
            using (FileStream streamIn2 = File.OpenRead(strFileIn2))
            using (FileStream writeStream = File.OpenWrite(strFileOut))
            {
                BinaryReader reader = new BinaryReader(streamIn1);
                BinaryWriter writer = new BinaryWriter(writeStream);

                // create a buffer to hold the bytes. Might be bigger.
                byte[] buffer = new Byte[1024];
                int bytesRead;

                // while the read method returns bytes keep writing them to the output stream
                while ((bytesRead =
                        streamIn1.Read(buffer, 0, 1024)) > 0)
                {
                    writeStream.Write(buffer, 0, bytesRead);
                }
                while ((bytesRead =
                        streamIn2.Read(buffer, 0, 1024)) > 0)
                {
                    writeStream.Write(buffer, 0, bytesRead);
                }
            }
        }
        catch (Exception ex)
        {
            strError = ex.Message;
        }
    } 
```

# selenium - Selenium，开发测试用例的工作流程

> ID：14524915
> 
> 赞同：2
> 
> 时间：2013-01-25T15:28:14.593
> 
> 标签：selenium, selenium-webdriver

我想听听您为 Selenium 2 / webdriver 开发测试用例的工作流程。例如，在 JUnit 中，开发人员可能在编写功能之前就开始编写测试。然后他不断地针对功能运行该测试，可能在调试器中，根据自己的意愿修改代码（热交换）。是否有一种更具交互性的方式来编写 Selenium 代码 (java) 的点点滴滴并立即查看结果？您是否使用 Selenium IDE 来帮助您？

[https://stackoverflow.com/a/92250/374512](https://stackoverflow.com/a/92250/374512)

现在，我有一堆 PageObjects 和一堆我从头开始编写的测试代码。每次我进行更改时，我都会运行测试，它必须从登录到应用程序的顺序开始，导航一堆页面以到达我的测试点。启动 FF 配置文件冷启动 webdriver 至少需要 5 秒钟，导航需要另外几秒钟。如何以迭代的方式针对一个 UI 功能编写和测试 selenium 测试。我希望能够编写一行代码并在特定状态下针对 UI 执行它，这种状态需要很长的一系列步骤才能到达。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:57:05.443

根据我的经验，没有快速的方法可以使用浏览器进入某个状态。因为 Selenium 测试在每次执行时都从头开始，所以有启动时间才能到达您想要测试的点，这使得浏览器集成测试本质上很慢。如果有一种方法可以在特定状态下针对 UI 执行测试，那也将加速任何回归测试，但我不认为这是可能的或测试功能的正确方法。

我发现它足以对页面对象中的操作进行编程，同时开发 UI 功能，然后编写脚本以使用这些操作，类似于您一直在做的事情。至于何时执行它，我会说在你提交到你的 repo 和持续集成环境之前在本地运行它。我认为运行我的测试是一个检查点，或者是提交代码的先决条件。

# powershell - 删除已终止用户提出的会议请求

> ID：14524919
> 
> 赞同：0
> 
> 时间：2013-01-25T15:28:58.620
> 
> 标签：powershell, exchange-server, exchange-server-2010

需要一次删除多个已终止用户的所有会议室中已终止用户的会议请求。

下面是我为从所有会议室中删除两个已终止用户的会议请求而构建的脚本。`OR`如果我想删除两个终止用户的会议（种类：日历来自：sasi OR Kalai），我使用操作员。如何一次添加两个以上的已终止用户？我有 500 多名已终止的用户从所有会议室中删除他们的会议请求。

```
Write-Progress -Activity "Preparing" -Status "Retrieving mailbox list" -PercentComplete 0
$rooms=get-mailbox -recipienttypedetails roommailbox -resultsize unlimited -warningaction:silentlycontinue| where {$_.name -notlike "*test*"}

$count=$rooms.count

foreach($room in $rooms)

{

    $i=$i+1
    $percentage=$i/$count*100

    Write-Progress -Activity "Collecting mailbox details" -Status "Processing mailbox $i of $Count - $room" -PercentComplete $percentage

$room | search-mailbox -searchquery "kind:calendar from:sasi OR Kalai" -targetmailbox sankar_munirathinam@domain.com -targetfolder "Deleting Meeting" -deletecontent -force

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-09T21:04:21.083

因此，如果我正确理解上述内容，您会执行以下操作吗？如果这只是调查，你可以采取“删除内容 -force”吗？

```
Write-Progress -Activity "Preparing" -Status "Retrieving mailbox list" -PercentComplete 0
$rooms=get-mailbox -recipienttypedetails roommailbox -resultsize unlimited -    
warningaction:silentlycontinue| where {$_.name -notlike "*test*"}

$count=$rooms.count
$TerminatedUsers = Get-Content .\TerminatedUsersList.txt
foreach ($User in $TerminatedUsers) {
foreach($room in $rooms)

{

$i=$i+1
$percentage=$i/$count*100

Write-Progress -Activity "Collecting mailbox details" -Status "Processing mailbox $i of $Count -
$room" -PercentComplete $percentage

$room | search-mailbox -searchquery "kind:calendar from:$($user)" -targetmailbox    
administrator@domain.com -targetfolder "Deleting Meeting" -deletecontent -force

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T19:28:47.123

我想我真的可以为你回答这个问题！我在堆栈上的第一个答案（我记得）:)

您应该将终止用户的用户名（或其他标识符）放在一个文本文件中，然后在您的行下方插入一个新行

`$count=$rooms.count`

那是

`$TerminatedUsers = Get-Content .\TerminatedUsersList.txt`.

然后添加另一行

`foreach ($User in $TerminatedUsers) {`

`}`然后在脚本的最后添加一个结束大括号。

最后，将您的更改`from:sasi OR Kalai`为`from:$($User)`

这将遍历每个终止的用户，并且对于每个人，它将搜索所有房间邮箱以查找他们的会议。

我希望这对你有意义。

# eclipse - Eclipse 中 shell 脚本的大纲视图插件

> ID：14524921
> 
> 赞同：0
> 
> 时间：2013-01-25T15:29:05.383
> 
> 标签：eclipse, shell, plugins

是否有任何 Eclipse Indigo 插件（或构建插件的简单方法）可以为 shell 脚本显示良好的大纲视图？我尝试了 ShellEd，但大纲视图显示的不仅仅是函数列表（就像所有`if`的...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:26:17.467

[Eclipse Colorer](http://marketplace.eclipse.org/content/eclipsecolorer)成功了。

# ldap - 在 CQ5 中创建 LDAP 认证登录子目录/DAM 资产

> ID：14524924
> 
> 赞同：1
> 
> 时间：2013-01-25T15:29:23.597
> 
> 标签：ldap, aem

我目前正在运行 CQ 5.4（5.5 升级挂起），需要建立一些子目录，这些子目录只能通过登录和验证 LDAP 来访问。这也意味着用户在登录后可以下载的文件也必须经过身份验证。

我已经尽可能多地阅读了 Adob​​e 的文档（和第 3 方）：

[http://dev.day.com/docs/en/cq/5-4/howto/create_apply_cug.html](http://dev.day.com/docs/en/cq/5-4/howto/create_apply_cug.html)

[http://dev.day.com/docs/en/cq/5-4/deploying/dispatcher.html#/sessionmanagement](http://dev.day.com/docs/en/cq/5-4/deploying/dispatcher.html#/sessionmanagement)

[http://www.wemblog.com/2013/01/how-to-associate-cug-with-dam-asset-in.html](http://www.wemblog.com/2013/01/how-to-associate-cug-with-dam-asset-in.html)

我们启用了 LDAP 以在我们的开发服务器上登录和使用 CQ5，但这与让我们的发布服务器将其用于特定于子目录的身份验证并允许缓存所有其他静态页面不同。除非我读错了所有这些，否则没有人指出如何做到这一点。

让默认登录组件与 LDAP 身份验证一起使用会很棒，但我并没有屏住呼吸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T08:15:01.767

可以为每个节点配置 ACL（访问列表）。

例如，通过 LDAP，您可以导出属于 ldap-users 组的用户。然后，如果您转到 Content Repository Explorer (/crx/explorer/index.jsp) -> Content Explorer -> 选择需要设置 ACL 的节点 -> Security Access Control Editor -> New ACE。您可以在此处设置节点的访问权限。

有关如何设置 ACL 的更多信息：http: [//helpx.adobe.com/cq/kb/CQ53ACLsMappingToCRX2.html](http://helpx.adobe.com/cq/kb/CQ53ACLsMappingToCRX2.html)

# java - 每x次做一个任务

> ID：14524927
> 
> 赞同：0
> 
> 时间：2013-01-25T15:29:55.157
> 
> 标签：java

我使用附加的代码每 5 分钟向我的数据库发送一些信息，其中一些信息是时间戳。当我查看我的数据库时，我看到有 6 分钟差异甚至 7 分钟的记录，怎么会？有人告诉我，我的任务耗时太长。

无论如何，我的问题是如何强制我的代码每 5 分钟将信息发送到数据库。

*重要的是我不得不说我对任务有一个条件，这意味着有时它不会做任何事情，所以记录之间的差异应该是五的倍数。

```
this.timer.schedule(new Send(), new Date(), TEN_SECONDS*6*5);

class Send extends TimerTask
{
    public void run()
    {
        if(location!=null)
        {
            if (mGeocoderAvailable) 
                address = reverseGeocode(LocationService.this.location);
            if(address != "" && !address.equals(lastAddress))
            {
                lastAddress = address;
                new SendLocation(LocationService.this.id,address);
            }
        }
    }
} 
```

SendLocation 正文是这样的：

```
public SendLocation(int id,String address)
{
    // taking care the parameters
    this.start();
}
public void run() 
{ 
    //connect to db
    //send location to db
    this.destroy();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:47:29.610

时间是在 SendLocation 线程中安排的，而不是从 Send 任务中安排的。

# php - 如何通过电子邮件系统创建帖子？

> ID：14524940
> 
> 赞同：1
> 
> 时间：2013-01-25T15:31:58.150
> 
> 标签：php, email

就像 Wordpress 和 Blogger 一样。例如，我向 something_blog_post@myblog.com 发送电子邮件，我发送的电子邮件将转换为我博客上的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:37:23.783

有像[mailgun](http://mailgun.com/)这样的服务可以很容易地做到这一点，因为它们将入站电子邮件转换为 API 调用。

另一种方法是找到一种方法来使用 PHP 轮询 IMAP，然后解析消息。这可能要困难得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:52:02.503

这个问题有几种解决方案：

1.  首先，您可以设置一个系统来轮询现有的 IMAP 或 POP3 系统并返回结果。
2.  您可以设置一个电子邮件服务器，该服务器将在收到电子邮件时自行调用脚本。
3.  您可以使用第三方提供商（例如[CloudMailin](http://www.cloudmailin.com)或 MailGun）。

不久前，我写了[一篇博](http://steve.dynedge.co.uk/2010/09/07/incoming-email-in-rails-3-choosing-the-right-approach/)文，概述了 Rails 应用程序的一些选项，但它们也都直接适用于 PHP。

# jquery - 链接中的空格被替换为 %2520 而不是 %20 jquery

> ID：14524942
> 
> 赞同：2
> 
> 时间：2013-01-25T15:32:09.220
> 
> 标签：jquery, json

```
$(".row").each(function(){
    $(this).attr('href', $(this).attr("href").replace(/\s/g,"%20"));
    }); 
```

当您单击此链接时，它会生成 %2520 而不是 %20。

```
...position=Administrative%2520Assistant-%2520Robotics 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:34:33.623

您可能对字符串进行了两次 URL 编码，因为`%20`URL 编码是`%2520`.

[**小提琴**](http://jsfiddle.net/jbqCQ/1/)

# java - 在 GWT 服务器上保存文件

> ID：14524943
> 
> 赞同：-2
> 
> 时间：2013-01-25T15:32:10.150
> 
> 标签：java, gwt, file-io

如何在 gwt RemoteServiceServlet 中保存 gwt-server 站点上的文件？位置应该是tomcat中war目录下的文件夹。在客户端站点上不使用 FileUpload 是否可以在 RemoteServiceServlet 中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:40:45.490

您可以在服务器端写入文件。

```
File f = new File("/my/path/file.txt");
FileOutputStream fos = new FileOutputStream(f);
fos.write("text".getBytes("UTF-8"));
fols.close(); 
```

如果应该上传该文件，您必须先上传：http: [//google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/FileUpload.html](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/FileUpload.html)

也许，这个项目有帮助：[http ://code.google.com/p/lib-gwt-file/](http://code.google.com/p/lib-gwt-file/)

**GWT：谷歌网络工具包**

用于创建在客户端浏览器中运行的 JavaScript 的框架

**GAE：谷歌应用引擎**

服务器基础设施，允许创建在谷歌服务器场运行的应用程序。文件可通过[Blobstore API获得](https://developers.google.com/appengine/docs/java/blobstore/overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:45:02.823

FileUpload 仅用于生成正确键入的 HTML 输入标记（如果您计划不通过表单发送数据）。

# jquery - jQuery UI Draggable 在第一次拖动时跳转

> ID：14524944
> 
> 赞同：1
> 
> 时间：2013-01-25T15:32:10.803
> 
> 标签：jquery, user-interface, draggable

请参考[这个 jsFiddle 示例](http://jsfiddle.net/a5FSj/)。

第一次拖动可拖动对象时，它会跳出可视区域。然而它仍然是可拖动的。它只是不粘在鼠标光标上。

以下代码是我使用的主要 JS 代码。

```
$('.sortable').sortable({
    revert: true
});

$('.draggable').draggable({
    connectToSortable : '.sortable',
    revert            : 'invalid'
}); 
```

# ios - 如何控制 UITextField 的复制和粘贴弹出位置？

> ID：14524949
> 
> 赞同：2
> 
> 时间：2013-01-25T15:32:51.580
> 
> 标签：ios, objective-c, cocoa-touch, uitextfield

是否可以控制 的`Paste`弹出位置`UITextField`，例如，高于或低于`UITextField`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:59:00.593

是的，我相信您正在寻找的方法是`setTargetRect:inView:`. [您可以在Apple Docs](http://developer.apple.com/library/IOS/documentation/iPhone/Reference/UIMenuController_Class/UIMenuController.html#//apple_ref/occ/instm/UIMenuController/setTargetRect%3ainView%3a)中阅读有关它的更多信息。

这是[Apple的一些通用代码](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/AddingCustomEditMenuItems/AddingCustomEditMenuItems.html)

```
UIMenuController *theMenu = [UIMenuController sharedMenuController];
CGRect selectionRect = CGRectMake (currentSelection.x, currentSelection.y, SIDE, SIDE);
[theMenu setTargetRect:selectionRect inView:self];
[theMenu setMenuVisible:YES animated:YES]; 
```

# javascript - NodeJS 的连接池

> ID：14524950
> 
> 赞同：1
> 
> 时间：2013-01-25T15:33:05.623
> 
> 标签：javascript, node.js, http, mongodb, connection-pooling

我有一个应用程序一直在最大限度地连接到 MongoDB 的数量，我假设如果驱动程序设置正确，你不需要担心关闭连接。

我见过有人提到通用池模块，但是使用 Node 和 MongoDB 关闭或池化连接的最佳过程是什么？

这是我的应用程序连接代码：

```
var sys = require("sys");
var app = require('http').createServer(handler);
var io = require('socket.io').listen(app);

app.listen(1337);

io.configure(function () {
io.set('authorization', function (handshakeData, callback) {
    callback(null, true);
    });
});

function handler (req, res, data) {
    sys.puts('request made to trackerapp.js'); 
    res.writeHead(200);
    res.end(data);
}

io.sockets.on('connection', function (socket) {
  socket.on('adTracker', function (data) {
  var adRequestData = data;
  var databaseUrl = "mongodb://dbuser:dbpass@mongolab.com/tracker";
  var collections = ["cmnads"]
  var db = require("mongojs").connect(databaseUrl, collections);

    db.cmnads.insert({adRequest : adRequestData},function(err, updated) {
        if( err || !updated ) console.log("mongo not updated" + err);
        else console.log("data stored");
      });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:31:08.140

看到 JohnnyHK 的评论后，我能够将连接事件从 Socket.io 连接中拉出，并且工作正常，请参阅下面的解决方案：

```
var databaseUrl = "mongodb://dbuser:dbpass@mongolab.com/tracker";
var collections = ["cmnads"];
var db = mongojs.connect(databaseUrl, collections);

io.sockets.on('connection', function (socket) {
  socket.on('adTracker', function (data) {
  var adRequestData = data;

  //vars for MongoDB used to be created here... so new connect function was called on every request to socket.io

  db.cmnads.insert({adRequest : adRequestData},function(err, updated) {
      if( err || !updated ) console.log("mongo not updated" + err);
        else console.log("data stored");
      });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:33:33.083

我在我的快速应用程序中使用的一项似乎取得了一定成功的技术是打开一个与 mongo 实例的连接（从而获得一个连接池），然后在任何地方共享该数据库（现在处于“连接”状态）实例需要。像这样的东西：

```
server = new Server(app.settings.dbsettings.host, app.settings.dbsettings.port, {auto_reconnect: true, poolSize: 5})
db = new Db(app.settings.dbsettings.db, server, {native_parser:false})
db.open(function(err, db) {
  app.db = db;
  server = app.listen(app.settings.port);
  console.log("Express server listening on port %d in %s mode", app.settings.port, app.settings.env);

  require('./apps/socket-io')(app, server);
}); 
```

在程序进入等待侦听状态之前，这会在我的应用程序中连接到最高级别的数据库。

在我使用这种模式之前，每当我需要与数据库交互时，我都会创建一个新的数据库对象。我发现的问题是新的数据库对象会创建一个新的线程池，消耗一堆端口。这些从未被正确清理过。一段时间后，托管该应用程序的机器将耗尽端口！

无论如何，我所展示的代码的变体应该是我相信你应该思考的地方。

# ios - 复制项目并更改其名称

> ID：14524951
> 
> 赞同：0
> 
> 时间：2013-01-25T15:33:08.877
> 
> 标签：ios, objective-c, xcode

我正在创建一个新项目，它是另一个项目的副本。问题是当我想重命名项目时，当我想执行我的应用程序时会出现一些连接问题。有人能告诉我一个替换旧项目所有名称的好方法吗？新的类名是相同的，所以我不必更改它们。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:40:27.043

我最近这样做了，这是一个简单的过程。

我建议你重新开始。制作项目的副本，然后在项目导航器中的项目名称上缓慢单击两次。然后，您可以重命名该项目。

Xcode 然后建议更改哪些文件/资源​​ - 您可以接受所有更改或根据需要进行修改。

完成后，您的项目将毫无问题地构建和运行。

# clojure - 如何找出 IntelliJ 中的类路径

> ID：14524952
> 
> 赞同：2
> 
> 时间：2013-01-25T15:33:14.540
> 
> 标签：clojure, intellij-idea, classpath, packages

这是一个非常简单的问题，但我无法解决，所以我希望你能忍受我。我在 Windows 上运行 IntelliJ，并将它用作 Clojure IDE。我试图通过运行 RT.loadResourceScript 来调用我的 core.clj，但我无法找出我的 core.clj 的正确路径。我是 IntelliJ 的新手，之前曾在 Linux 上与 Leiningen 合作过。

项目在 C:\Users\L\IdeaProjects\LearningClojure 下的 core.clj 和 Driver.java 文件位于 src 文件夹中。

我已经尝试使用“src/core.clj”“core.clj”“src\core.clj”和变体在树上为我的 CLJ 变量“LearningClojure”。

我的 Driver.java 文件如下

```
import clojure.lang.RT;
public class Driver
{
private static final String CLJ = "src/core.clj";
public static void main( String[] args)
{
    try
    {
        RT.loadResourceScript(CLJ);
        RT.var("learning", "main").invoke(args);
    }
    catch(Exception E)
    {
        E.printStackTrace();
    }
    finally
    {
        System.out.println("End of Execution");
    }
}

} 
```

输出回报

```
End of Execution
java.io.FileNotFoundException: Could not locate Clojure resource on classpath: src/core.clj
at clojure.lang.RT.loadResourceScript(RT.java:366)
at clojure.lang.RT.loadResourceScript(RT.java:346)
at clojure.lang.RT.loadResourceScript(RT.java:338)
at Driver.main(Driver.java:16)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

Process finished with exit code 0 
```

在一些相关的注释上，是否有人有一个很好的解释 Java 包的链接，以及在处理 IDE 项目布局时它们如何对应于类路径和目录布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:46:57.157

默认情况下，源文件不会复制到输出（类路径），安装了 LaClojure 插件的文件`*.clj`被视为源文件。

如果您的用例非常具体并且需要源文件出现在类路径中，因此您必须调整`Settings`| `Compiler`| `Resource Patterns`包括（或不排除）`*.clj`文件。

您也不需要在路径前加上`src/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:48:37.907

正如您在 CrazyCoder 的评论中看到的那样，这里的问题是 IntelliJ IDEA 需要将必要的文件复制到模块编译器输出。这适用于所有文件。

File -> Settings -> Compiler（高亮编译器，不要用+号展开）

在我的 IntelliJ IDEA 中，资源模式显示

```
!?*.java;!?*.form;!?*.class;!?*.groovy;!?*.scala;!?*.flex;!?*.kt;!?*.clj 
```

我认为这是正确的，但是！表示该文件未被复制。对于 .clj 文件，我需要删除 !。对于任何其他类型的文件，您需要使用以下语法添加它：

```
";*.extension" 
```

# sql - 临时表+索引创建副多表group by无索引复杂度比较

> ID：14524955
> 
> 赞同：-1
> 
> 时间：2013-01-25T15:33:43.267
> 
> 标签：sql, performance, oracle, oracle10g, complexity-theory

我有两条潜在的道路可以解决以下问题，由于服务器上的负载不断变化，因此尝试并查看方法不会为该解决方案带来回报。我有两种方法如下：

```
select *  
from  
  (  
      select foo.a,bar.b,baz.c  
      from foo,bar,baz
      -- updated for clarity sake  
      where foo.a=b.bar  
      and  b.bar=baz.c  
  )  
group by a,b,c 
```

副

```
create table results as
select foo.a,bar.b,baz.c  
from foo,bar,baz  
where foo.a=b.bar  
and  b.bar=baz.c ;  

create index results_spanning on results(a,b,c);  

select * from results group by a,b,c; 
```

所以万一不清楚。顶部查询直接针对多表选择执行分组，从而阻止我使用索引。第二个查询允许我创建一个存储查询结果的新表，继续创建一个跨越索引，然后按查询完成分组以利用索引。

这两种方法的复杂性差异是什么，即它们如何扩展以及在大量数据的情况下哪种方法更可取。此外，主要问题是整体选择的性能，所以这就是我试图在这里解决的问题。

**注释**

> 你真的在三个表上做一个 CROSS JOIN 吗？这三列是否单独编入索引？您希望多久运行一次提供最终结果的查询？

1) 不。
2) 是的，为了讨论而省略了 where 子句，因为这显然是一个非常微不足道的例子
3) 没关系。

**第二次更新**

这是一个临时表，因为它只在短时间内有效，所以是的，这个表只会被查询一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:14:27.867

那么问题来了，哪个更快？

1.  运行一次查询并对结果集进行排序？

2.  运行一次查询构建表，然后构建索引，然后再次运行查询并对结果集进行排序？

嗯。棘手的一个。

临时表的用例在 Oracle 中非常少见。它们通常仅在我们需要冻结结果集时才适用，然后我们将重复查询该结果集。这显然不是这里的情况。

因此，请采用第一个选项，并在必要时调整查询。

* * *

答案是，就像调优问题经常出现的情况一样，这取决于。

你为什么首先做一个 GROUP BY 。您发布的查询不会进行任何聚合，因此执行 GROUP BY 的唯一原因是消除重复行，即 DISTINCT 操作。如果确实是这种情况，那么您执行某种形式的笛卡尔连接并且调整查询将是修复 WHERE 子句，使其仅返回离散记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:36:39.160

如果您的查询经常执行并且速度慢得令人无法接受，您可以考虑创建物化视图来预先计算结果。这为您提供了可索引“表”的好处，而无需每次都创建表的开销。

您需要刷新物化视图（`fast`如果表很大）`on commit`或者`on demand`. 关于如何在提交时创建快速可刷新视图有一些限制，它们会稍微增加提交时间处理，但它们总是给出与运行基本查询相同的结果。随着基础数据的变化，按需 MV 将变得陈旧，直到这些数据被刷新。您需要确定这是否可以接受。

# android - 在 Android 中下载和显示输入流时遇到问题

> ID：14524957
> 
> 赞同：1
> 
> 时间：2013-01-25T15:33:46.807
> 
> 标签：android

我正在尝试从安全网站获取 inputStream，将其转换为位图并显示。我现在设置代码的方式（日志显示字节数组的长度等）是因为我的错误是

01-25 10:29:44.857: D/skia(13452): --- SkImageDecoder::Factory 返回 null

但是，该字节数组长度检查会响应：

01-25 10:29:44.834：W/字节长度（13452）：21844

我认为这一定意味着我的字节数组没有被正确下载，但我不知道如何检查/无论如何我将如何修复它。

我包含了我的 defaultHttpClient 代码，因为我想确保我处理安全性的方式不会以某种方式影响数据。

```
HttpPost post = new HttpPost("https://my.patlive.com//mailbox/messages/get.aspx?MsgID=" + messageId + "&format=bmp");

List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);

nameValuePairs.add(new BasicNameValuePair("username", username));
nameValuePairs.add(new BasicNameValuePair("password", password));

post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

BitmapFactory.Options o = new BitmapFactory.Options();

o.inJustDecodeBounds = true;

InputStream is = httpclient.execute(post).getEntity().getContent();
byte[] bytes = readFully(is);

Log.w("bytes length", "" + bytes.length);

bmp = BitmapFactory.decodeByteArray(bytes, 0, bytes.length); 
```

在此先感谢，这让我困扰了几天。

# c# - Websphere MQ - WCF - AMQ9504 的常见原因：协议

> ID：14524958
> 
> 赞同：0
> 
> 时间：2013-01-25T15:33:59.817
> 
> 标签：c#, wcf, ibm-mq

我们偶尔会遇到一个错误，导致我们的一个 WCF/Websphere MQ 应用程序出现问题。我们遇到错误：

Websphere MQ 服务器：7.1 Websphere MQ 客户端：7.1 .Net 4.0

----- amqrmrsa.c : 887 ---------------------------------------- ---------------- 2013 年 1 月 23 日 06:13:26 - 进程（2928.79887）用户（svcPrideDaca）程序（amqrmppa.exe）主机（MQTEST）安装（MQServer7101）VRMF (7.1.0.0) QMgr(QM_mqtest)

```
AMQ9504: A protocol error was detected for channel 'SYSTEM.DEF.SVRCONN'.

EXPLANATION:
During communications with the remote queue manager, the channel program
detected a protocol error. The failure type was 11 with associated data of 252.
ACTION:
Contact the systems administrator who should examine the error logs to
determine the cause of the failure. 
```

我们在 WCF .Net 应用程序中遇到的错误：

```
2013-01-23 06:13:25,435 [113] ERROR - [pride-N25Scan].[EnqueueMessage] <54321> (9999) Error enquing message:WCFCH0309E: An error occurred while attempting to open the channel for endpoint 'jms:/queue?destination=Q_Daca_JMS@QM_mqtest&connectionFactory=binding(client)connectQueueManager(QM_mqtest)clientConnection(test.mq.com(1415))clientChannel(SYSTEM.DEF.SVRCONN)&initialContextFactory=com.ibm.mq.jms.Nojndi'
The operation could not be completed.
The endpoint may be down, unavailable, or unreachable, review the linked exception for further details.
    Server stack trace: 
       at IBM.XMS.WCF.ExceptionHelper.ThrowCommsException(OperationType op, Exception innerException, String endpointURI)
       at IBM.XMS.WCF.XmsOutputChannel.OnEndOpen(IAsyncResult result)
       at IBM.XMS.WCF.XmsOutputChannel.OnOpen(TimeSpan timeout)
       at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
       at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
       at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at IMessage.ProcessMqMessage(String msg)
       at N25Scan.EnqueueMessage(String message) 
```

我们无法隔离导致问题的原因。遇到此问题时，我们已尝试对应用程序进行修改以重新建立连接，但仍在尝试找出原因。

当应用程序遇到此错误时，所有连接都开始失败/超时，因此我们必须确保所有连接成功或失败都正确处理 WCF / Websphere MQ 连接。

任何提示/信息将不胜感激。到目前为止在网上找不到任何帮助。

谢谢，

小号

# ruby - 如何使用“selenium-webdriver-xpath”从中获取文本值？

> ID：14524959
> 
> 赞同：0
> 
> 时间：2013-01-25T15:34:09.023
> 
> 标签：ruby, xpath, selenium-webdriver

找到以下`html`代码：

```
<table id="supplier_list_data" cellspacing="1" cellpadding="0" class="data">
   <tr class="rowLight">
      <td class="extraWidthSmall">
         <a href="/aems/do.list">  Cdata </a>
      </td>
      <td class="extraWidthSmall">
         <a href="/aem/do.list">  xyz </a>
      </td>
      <td class="extraWidthSmall">
         <a href="/bem/do.list">  ppm </a>
      </td>
   </tr>
</table> 
```

现在使用`xpath`如何获取值`xyz`（总是指第二个`"<td>"`）。请给我一个想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:11:54.763

试试`//tr/td[2]/data()`。

`//tr/td`选择所有`<td/>`元素，`[2]`每个元素中的第二个结果`<tr/>`并`data()`返回它们的内容。

# jquery - 在 mvc3 中实现时的 Datepicker 问题？

> ID：14524961
> 
> 赞同：1
> 
> 时间：2013-01-25T15:34:16.697
> 
> 标签：jquery, asp.net-mvc-3, datepicker, jquery-ui-datepicker

使用`Mvc3`剃须刀。我尝试在表单上使用输入框实现 Jquery 数据选择器，当我单击日历上的日期时，出现此异常“Microsoft JScript 运行时错误：无法设置属性' `currentDay`'：`object`是`null`或”的值。`undefined`

**查询**：

```
 $(document).ready(function () {           
      $(".datepicker").datepicker();
 }); 
```

**网页**：

```
<div class='answer'>
  <input class='datepicker' type='text' id='4' name='4' value='' />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:54:32.703

我发现日期字段与另一个输入字段具有相同的 id。它们必须是独一无二的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T21:01:07.883

终于得到了这个错误的解决方案

解决方案是我们需要提供唯一的 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:45:29.803

在一个简单的测试中，您的代码在 MVC3 框架之外工作，所以我会检查页面实际呈现时包含的 JQuery/JQuery UI 的版本。

# c# - 如何在gridview中获取行的值并在文本框中显示？

> ID：14524965
> 
> 赞同：0
> 
> 时间：2013-01-25T15:34:37.847
> 
> 标签：c#, asp.net

如何获取行中的值`Gridview`并显示在中`Textbox`？

不要使用此代码。而且我不想使用这段代码：

```
protected void GridView1_SelectedIndexChanging(object sender, GridViewSelectEventArgs e) {
        LinkButton lnkButton = sender as LinkButton;
        GridViewRow row = (GridViewRow) lnkButton.NamingContainer;
        lblSender.Text = row.Cells[2].Text;
        lblSubject.Text = row.Cells[5].Text;
        txtReadMsg.Text = row.Cells[6].Text; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:51:20.373

你确定你的 GridView 的单元格里面没有控件。

也许[这](https://stackoverflow.com/questions/437137/cant-get-values-from-rows-cells-in-gridview)对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:14:39.163

要获取该行，请执行以下操作：

```
var row = GridView1.Rows[e.NewSelectedIndex]; 
```

然后其余的代码应该适合你。然后，您可以删除前两行。此外，请注意 Text 仅在您使用 BoundColumn 列定义时才有效；如果您使用不同类型的列，它将不起作用。

如果你得到一个不同的错误，那么它与其他东西有关；请添加评论，我们可以帮助解决它。

# linux - 如何在 Linux 中查看守护进程的输出？

> ID：14524966
> 
> 赞同：1
> 
> 时间：2013-01-25T15:34:40.217
> 
> 标签：linux, tty

我写了一个test.c：

```
#include <unistd.h>
#include <stdio.h>

int main()
{
    while(1)
    {
        sleep(1);
        printf("====test====\r\n");
    }
    return 0;
} 
```

然后我编译它： gcc ./test.c -o ./test 我写了一个shell脚本：

```
#!/bin/sh
./test & 
```

然后我让这个脚本在系统启动时自动执行。然后我使用 SSH 协议中的 secureCRT 登录 Linux 系统。使用“ps aux | grep test”我可以看到测试过程正在运行，但我只是看不到测试的输出，有人告诉我因为测试输出到 tty，而我正在使用 pts。谁能告诉我具体原因以及如何获得输出？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:20:10.840

它没有输出任何东西，因为它没有连接终端。

如果您希望连接到系统的每个终端都可以看到您的输出，请使用`wall`

```
./test | wall 
```

*（会很烦）*

我建议您将输出重定向到日志文件。

# java - 重新加载 Servlet？

> ID：14524968
> 
> 赞同：1
> 
> 时间：2013-01-25T15:34:52.020
> 
> 标签：java, servlets

我是 servlet 的新手，所以请耐心等待。

我想制作一个 servlet，它使用默认值（例如 2 行、2 列）在两个文本值下面编写一个标准表。

在这些文本框中，我想填写想要的行和列。将这些文本值填入表格后，必须更改为要求的表格。

此时我收到 404 错误

```
/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
 *      response)
 */
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    doPost(request, response);
}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
 *      response)
 */
@SuppressWarnings("unchecked")
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    response.setContentType("Text/html");
    PrintWriter pw = response.getWriter();
    pw.println("<html><body>");
    pw.println("<h1>Table generator</h1><table border=1>");

    Integer row = (Integer) request.getAttribute("rows");
    Integer col = (Integer) request.getAttribute("cols");

    if (row != null && col != null) {

        for (int i = 1; i < col; i++) {
            pw.print(HtmlUtils.getTH("center", "COL" + i));
        }

        @SuppressWarnings("rawtypes")
        Vector av = new Vector();

        for (int i = 1; i < row; i++) {

            for (int y = 1; i < col; y++) {

                av.addElement("index" + col + "." + y);

            }
        }

    } else {

        pw.print(HtmlUtils.getTableHead("center", 1));

        pw.print(HtmlUtils.getTH("center", "COL1"));
        pw.print(HtmlUtils.getTH("center", "COL2"));

        @SuppressWarnings("rawtypes")
        Vector av = new Vector();

        for (int i = 1; i < 5; i++) {

            av.addElement("index1." + i);
            av.addElement("index2." + i);

        }

        pw.print(HtmlUtils.getTableContents("center", av, 2));

    }

    pw.println("</table>");

    pw.println("<form action='input' method='post'>");
    pw.println("Rows : <input type='text' name='rows'><br>");
    pw.println("Cols : <input type='text' name='cols'><br>");
    pw.println("<input type='submit'>");
    pw.println("</form></body></html>");
} 
```

有什么建议么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:27:17.373

从您的代码看来，您可能对请求属性和参数感到困惑。

填写值后，用户应单击表单的提交按钮。您需要将表单配置为提交到同一个 servlet。然后这个 servlet 可以进行任何需要的处理（例如，将值存储到数据库中）并重新显示网页，但它应该检查并查看用户在表单中输入的值（如果有的话）。如果他们填写了两个文本值中的任何一个，则 servlet 可以将这些值放入表中。

假设您的表单如下所示：

```
<form name="input" action="your-servlet-name.action" method="get">
  Text1: <input type="text" name="text1">
  Text2: <input type="text" name="text2">
  <input type="submit" value="Submit">
</form> 
```

表单的 action 属性必须设置为您的 servlet 所在的 URL。在您的 Java 代码中，您可以调用 request.getParameter("text1") 等来获取用户输入的值。

在编写的代码中，您尝试访问与参数不同的请求属性。参数是从浏览器发送的值。属性是由服务器上的 Java 代码插入到请求中的值。

# sybase - Sybase SQL：获得超过最大值的总和

> ID：14524971
> 
> 赞同：0
> 
> 时间：2013-01-25T15:35:09.003
> 
> 标签：sybase

抱歉，这个问题太独特了，我想不出更好的标题。

我有一个表格如下：

```
--------EXAMPLE---------------------------------------------------------
Cat1           Cat2          Value
a              e1            113
b              e1            14
a              e2            15
c              e3            13
a              e1            13
a              e2            11
c              e4            1 
```

对于 Cat1 中的每个不同值，我想找到按 Cat2 分组的最大值，然后将它们相加。

因此，对于 Cat1 = 'a' 的上表

第 1 步：我想提取以下行：

```
Cat1           Cat2          Value
a              e1            113
a              e2            15
a              e1            13
a              e2            11 
```

第2步：我想提取对应于Cat2的最大值：

```
Cat1           Cat2          Value
a              e1            113
a              e2            15 
```

第 3 步：对值求和以获得：

```
Cat1           SumOfValueColumn
a              128
b              14
c              14 
```

我可以分多个步骤完成上述操作，但我想一步完成。我正在使用 Sybase。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:53:44.387

使用以下查询：-

SELECT cat1,sum(Value) as sum_Value FROM (SELECT cat1,cat2,max(Value) as Value FROM #tmp1 group by cat1,cat2 ) d1 GROUP BY cat1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:12:56.070

-- 创建一个不再占用数据库空间的视图。

```
create view max_cat_tbl_view
( Cat1, Cat2, Maxvalue ) as 
select Cat1, Cat2, max(Value) 
from cat_tbl 
group by Cat1, Cat2
go 
```

-- 查询视图以获得超过最大值的总和

```
select Cat1, sum(Maxvalue) from max_cat_tbl_view group by Cat1 order by Cat1
go 
```

好 SQL，晚安。凯利805

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T21:23:32.650

-- 前面的答案可以通过删除中间的 go 一步完成。-- 这是另一个使用 Sybase 临时表的答案

```
select Cat1, Cat2, max(Value) Maxvalue
into   #max_cat_tbl
from   cat_tbl
group by Cat1, Cat2  order by 1, 2
select Cat1, sum(Maxvalue) from #max_cat_tbl group by Cat1 order by Cat1
drop table #max_cat_tbl
go 
```

# parse-platform - 使用云代码或 parse.com 的 javascript sdk 对忘记密码进行自定义散列

> ID：14524973
> 
> 赞同：1
> 
> 时间：2013-01-25T15:35:20.147
> 
> 标签：parse-platform

我有一个应用于密码的自定义哈希，以便它与旧的 .net 成员资格提供程序哈希匹配。我在注册用户时应用了哈希客户端，但是忘记密码的链接，因为它是通过没有 has 的解析完成的，所以会产生问题。

我可以创建一个可以捕获密码重置事件的云代码方法或事件处理程序，以便我可以散列它吗？

我尝试创建自己的忘记密码云代码功能，但似乎无法设置密码，因为在云代码功能请求期间没有登录用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:29:51.893

如果您想在 Cloud Code 中操作用户对象，请使用 Parse.useMasterKey() 方法覆盖正常的安全设置。尽管我当然不建议您自己尝试操纵密码。

# ios - 为什么 URL 在几秒钟后才在 UIWebView 中显示为超链接？

> ID：14524979
> 
> 赞同：0
> 
> 时间：2013-01-25T15:35:59.580
> 
> 标签：ios, uiwebview

我有一个使用 a`UIWebView`来显示电子邮件的应用程序。如果电子邮件是 HTML 电子邮件并且包含 URL 或电子邮件地址等内容，这些内容会立即显示为超链接。但是，如果电子邮件是纯文本，则相同类型的内容会被超链接，但仅在几秒钟后。当电子邮件是纯文本时，我会像这样加载它：

```
[self.webViewBody loadData:[self.webViewRawHTML 
    dataUsingEncoding:NSUTF8StringEncoding]
    MIMEType:@"text/plain"
    textEncodingName:@"utf-8"
    baseURL:nil]; 
```

我 99% 确定这完全超出了我的控制范围，这正是 UIWebView 的行为方式，但我想确定一下。谷歌搜索似乎并不表明这是一个普遍问题，但我认为我的搜索词不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:47:34.583

UIWebview 有一个属性 `@property(nonatomic) UIDataDetectorTypes dataDetectorTypes` ，它告诉 webview 自动解析其全部内容以搜索链接、地址、电话号码等，即使没有`<a>`.

由于它必须检查所有内容，因此有时需要几秒钟。

# binary - 文本文件的定义

> ID：14524984
> 
> 赞同：0
> 
> 时间：2013-01-25T15:36:18.173
> 
> 标签：binary, text-files

我不是一个真正的专业程序员（我只是做一些数字运算），我只是想了解更多关于计算的东西。

我在这里要求 - 参考 - 阅读有关“文件”的基本方面的内容。我很难理解文本文件和二进制文件之间的区别。根据我目前的理解，图像文件并不比文本文件更“二进制”。我想了解是什么使文件成为文本文件。它是一个特殊的位序列吗？

拜托，我只需要一个很好的阅读参考（尽管欢迎进行一些澄清），我并不是真的想提出一个模糊、笼统的问题。

最好，我想指出一个包含定义的技术阅读，例如“文本文件是一系列位，其等......”

谢谢，塞内卡。

顺便说一句：例如，在维基百科上找到的不是我想要的。

编辑：纠正了可怕的语法错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:43:57.207

> 文本文件是一种计算机文件，它将键入的文档存储为一系列字母数字字符，通常没有视觉格式信息。内容可以是个人笔记或列表、期刊或报纸文章、书籍或可以以打字形式准确呈现的任何其他文本。文本文件与文字处理文件类似，两者的内容主要是文本；它们的不同之处在于文本文件通常不记录诸如字符样式和大小、分页或其他指定完成文档外观的详细信息。一些计算机操作系统对旨在直接翻译成人类可读文本的文本文件和由计算机直接解释的二进制文件进行了基本区分。

来源 : [二进制文件](http://www.wisegeek.com/what-is-a-binary-file.htm)和[文本文件](http://www.wisegeek.com/what-is-a-text-file.htm)[WikiPedia](http://en.wikipedia.org/wiki/Text_file)
上的更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:44:18.507

这应该可以帮助您回答您的问题:-)

[http://www.wisegeek.com/what-is-a-binary-file.htm](http://www.wisegeek.com/what-is-a-binary-file.htm)

# c# - LinqToSql 查询将不需要的数据加载到内存中

> ID：14524990
> 
> 赞同：1
> 
> 时间：2013-01-25T15:36:40.967
> 
> 标签：c#, sql, linq-to-sql, linq-to-entities

我正在通过 linq to sql 模拟链接服务器上的连接。我的问题是，linqtosql 似乎将 y.Xstatuses 的所有行都带入内存，然后进行连接。**如果这是真的，我如何将所有内存保留在 sql server 上（并且仍然进行跨数据上下文连接操作），如果这不是真的，那会发生什么正在吃掉我所有的 ram？**

```
var x = new fooDataContext();
var y = new barDataContext();

var allXNotDeleted = (from w in x.CoolTable
                      where x.IsDeleted != false).ToList();//for our demo this returns 218 records

var allXWithCompleteStatus = (from notDeleted in allXNotDeleted
                              join s in y.XStatuses on notDeleted.StatusID equals s.StatusID
                              where s.StatusID == 1
                              select notDeleted).Tolist();// insert massive memory gobbler here

return allXwithCompleteStatus; 
```

编辑：尝试实现 Kevinbabcock 的想法

```
 using (x = new fooDataContext())
    using (var y = new barDataContext())
    {

        var n = (from notDeleted in x.GetTable<CoolTable>()
             join z in y.GetTable<Xstatus>() on x.StatusID equals z.StatusID
             where z.StatusID == 1 and x.IsDeleted != false
             select x).ToList();

    } 
```

这仍然会引发跨上下文查询异常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:44:06.547

无法直接在数据库上执行跨数据上下文查询。在内存中获取其中一个记录集 (ToList()) 会强制另一个加入的记录集在内存中进行处理。

如果要在 sql server 上执行所有操作，则必须将每个实体都放在同一个 DataContext 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:40:52.713

~~我建议不要打电话`ToList`开始`allXNotDeleted`。这会将这些记录拉入内存，这可能意味着您在执行第二次查询时无法避免将所有其他数据拉入内存。~~

编辑：

~~作为附加说明，如果您的表特别大，并且您只需要来自几列的数据，您可以在数据库对象模型中为不需要的列设置`Delay Loaded`为。`True`~~

编辑2：

我刚刚注意到这两个查询都来自不同的上下文。在这种情况下，我建议您创建一个存储过程并从其中一个上下文中调用它。存储过程应该负责跨越上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:45:30.603

不要打电话`ToList()`。`allXNotDeleted`这会在内存中具体化这些记录，这将导致整个`XStatuses`表也在内存中具体化以执行连接。

试试这个：

```
using(var context = new DataContext(connectionString))
{
    var allXNotDeleted =
        from w in context.GetTable<CoolTable>()
        where x.IsDeleted != false;
    var allXWithCompleteStatus = (
        from notDeleted in allXNotDeleted
        join s in context.GetTable<XStatuses>()
            on notDeleted.StatusID equals s.StatusID
        where s.StatusID == 1
        select notDeleted)
        .ToList();
    return allXwithCompleteStatus;
} 
```

这只会向 SQL Server 发送一个查询，并且只会具体化从查询返回的“notDeleted”值。不要忘记将您的`DataContext`实例包装在 using 语句中，以便`Dispose()`在它们脱离上下文时正确调用。

另外，你的意思是过滤`CoolTable`吗`IsDeleted != false`？这相当于`IsDeleted == true`，对我来说，这表明您要加入所有已删除的记录（变量的名称`allXNotDeleted`似乎与此相矛盾）。

编辑：更新代码以使用单个`DataContext`实例，这应该消除“查询包含对另一个 DataContext 的引用”错误。如果您不使用派生类，则需要将 传递`ConnectionString`给构造函数。`DataContext``DataContext`

# git - 在 Git 中工作的安全方式

> ID：14524992
> 
> 赞同：2
> 
> 时间：2013-01-25T15:36:43.547
> 
> 标签：git, github

我在我的 unix 服务器上安装了 Git，并且我的 webapps 目录包含了我设置为非裸仓库的整个网站内容。

我的团队中还有另外 2 名成员也从事网站方面的工作。

我们 3 名开发人员如何在同一个非裸仓库中工作并提交我们的更改，而不会有任何提交其他开发人员文件的风险，如果我这样做`git add .`然后提交它们可能会发生？

任何人都可以为在这种情况下工作的 3 个人或更多人建议一种安全的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:28:15.947

您真的不希望两个开发人员共享一个工作副本。在这种情况下没有办法确保安全：如果你们俩同时编辑同一个文件怎么办？

`git`有很多用于合并冲突管理的工具，但是如果您有两个开发人员共享一个用于他们正在进行的工作的存储库，那么它们*都不会对您有所帮助。*

相反，请进行设置，以便每个开发人员都有自己的测试环境，他们可以在其中评估对其本地副本所做的更改是否有效。当更改准备好“发布”时，他们会将其推送到中央共享存储库。该中央存储库中的代码最终会进入生产环境。

开发人员用来测试他们的更改的 Web 服务器可能不需要什么花哨的东西。例如，Python 有一个内置的微型 Web 服务器，可以通过`python -m SimpleHTTPServer`. 这个或类似的小型服务器可能适合测试 HTML 和 Javascript 项目。如果您有更复杂的设置，您仍然可以为每个开发人员建立一个“临时”副本：复制您的数据库、您的 Web 服务器等等。如果您想全力以赴，请让每个开发人员在克隆的虚拟机上工作，并完全复制您的实时环境。

如果您想要真正有力地保证进入主存储库的代码是好的，请使用像[Gerrit](https://code.google.com/p/gerrit/)这样的看门人系统和/或像[Jenkins](http://jenkins-ci.org/)这样的自动构建器。对于一个三人团队，让每个开发人员在推出之前仔细检查他们自己的更改可能就足够了。

如果您**必须**共享一个工作副本，您将不得不回退到旧系统：CVS 风格的锁。在开发人员对文件进行更改之前，他们需要“检查”。当它被“签出”时，没有其他开发人员可以触摸它（使其成为只读）。在任何人做出承诺之前，你对你的同事大喊“嘿，我正在做出承诺！没有其他人做任何事情！”。然后你做一个`git add -i`或类似的，做出提交，然后告诉其他人一切都清楚了，他们可以继续。**这是一种糟糕的工作方式**。不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:35:17.783

我建议您创建一个用于更新实时 web 应用程序的裸存储库，然后为每个开发人员设置一个测试环境（单独的 tomcat 安装或虚拟域），或者让开发人员编辑 web 应用程序的非实时安装。

在任何一种情况下，从开发人员的角度来看，工作流程都会如下所示：

```
$ cd ~/webapp
$ git add file.html
$ git commit -m "Updating file to perform task."
$ git push origin
$ cd /path/to/production/webapp
$ git fetch origin
$ git merge origin/testbranch 
```

该流程比仅使用 Web 应用程序的一个工作副本要长一点，但是这允许每个开发人员使用 Git 的全部功能。如果所有开发人员都共享同一个工作副本，那么您也可以使用 RCS 等逐个文件的修订控制系统。

# php - 获取多维数组中每个唯一键的最大值

> ID：14524994
> 
> 赞同：1
> 
> 时间：2013-01-25T15:36:49.013
> 
> 标签：php, multidimensional-array

我有一个类似于下面的数组。我正在尝试获取数组中每个唯一键的最大权重值，例如 Store A = 230、Store B = 180、Store C = 439，对于品牌键也是如此。

```
Array ( 
[0] => Array ( [cid] => 123 [weight] => 230 [store] => Store A [brand] => Brand A)
[1] => Array ( [cid] => 124 [weight] => 180 [store] => Store B [brand] => Brand B ) 
[2] => Array ( [cid] => 131 [weight] => 439 [store] => Store C [brand] => Brand B ) 
[3] => Array ( [cid] => 128 [weight] => 124 [store] => Store B [brand] => Brand B ) 
[4] => Array ( [cid] => 130 [weight] => 249 [store] => Store C [brand] => Brand C ) 
) 
```

我可以获得整个数组的最大权重值（使用 max()，但需要每个相应键的最大权重。已经搞砸了几个小时，却没有得到任何地方！

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:40:32.573

```
$array = $array() // Your array
$max = array();

foreach ( $array as $product) {
    if ( ! isset( $max[ $product['store'] ] ) ) {
        $max[ $product['store'] ] = $product['weight'];
    } else {
        $max[ $product['store'] ] = max( $max[ $product['store'] ], $product['weight'] );
    }
} 
```

在此处查看实际操作：[http ://codepad.viper-7.com/eF4ZQ7](http://codepad.viper-7.com/eF4ZQ7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:40:42.573

```
$maxes = array();

foreach ($array as $i) {
    if (!isset($maxes[$i['store']]) || $maxes[$i['store']] < $i['weight']) {
        $maxes[$i['store']] = $i['weight'];
    }
}

var_dump($maxes); 
```

# c - inet_pton() 函数只给出 ip 或 ip 和端口号？

> ID：14524995
> 
> 赞同：0
> 
> 时间：2013-01-25T15:36:51.363
> 
> 标签：c, network-programming

在 C 中，函数 inet_pton() 是否仅将 ip 地址从 printble 转换为字符串格式，或者它也转换 ip 地址和端口号？我的意思是，如果我有一个格式为 ABCD:E 的字符串，其中 ABCD 是 IP，E 是端口号，我可以使用 inet_pton 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:42:50.230

不，它不处理端口号。[手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/inet_pton.3.html)准确地指定了它对 IPv4 地址的期望：

> `src`指向包含点分十进制格式的 IPv4 网络地址的字符串，“ddd.ddd.ddd.ddd”，其中 ddd 是 0 到 255 范围内最多三位的十进制数。地址转换为`struct in_addr`并复制到`dst`，其长度必须为`sizeof(struct in_addr)`(4) 个字节（32 位）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:58:54.183

您必须自己拆分端口号。这是相当有问题的，因为您执行此操作的方式取决于地址是 ipv4 还是 ipv6。我相信这个问题是许多 unix 实用程序使用`-p`选项而不是`:port`语法来指定端口的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T16:09:39.830

使用`getaddrinfo()`地址转换的瑞士刀。