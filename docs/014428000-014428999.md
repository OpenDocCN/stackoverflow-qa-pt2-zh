# StackOverflow 问答 14428000-14428999

# android - 将默认联系人管理器更改为我自己的

> ID：14428000
> 
> 赞同：0
> 
> 时间：2013-01-20T18:53:23.353
> 
> 标签：android

我为 android 编写了一个联系人管理器，我想知道如何将默认联系人管理器更改为我自己的程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:54:55.910

出于安全原因，您不能自己更改默认应用程序。当“选择器”对话框出现时，用户必须手动选择您作为某些操作的默认设置。

这是出于安全原因，就好像它在没有用户干预的情况下被允许，任何恶意应用程序都可以使自己成为任何想要的操作的默认值。

# xml - Magento XML 块质量

> ID：14428006
> 
> 赞同：0
> 
> 时间：2013-01-20T18:54:07.177
> 
> 标签：xml, magento

我不知道你怎么称呼这些不同类型的块，但我需要制作这个块：

```
 <block type="poll/poll" name="enquete2" template="poll/poll.phtml">
    <action method="setPollId">
      <poll_id>2</poll_id>
    </action>
    </block> 
```

...进入以下类型的块之一：

```
{{block type="poll/poll" name="poll_one" template="poll/poll.phtml" poll_id="1"}} 
```

我有第一部分，但可以添加**动作部分**吗？我遇到的问题是我想将其添加到 magento 中的 CMS 块中，然后将其添加到 Widget 块中，这样我就可以控制它放入布局的位置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:46:50.507

不是一个真正的答案，但我需要更多的空间。

是的，这行得通。实际上，这似乎两种方式都有效。问题是投票结果停留在投票并刷新页面后。

我在 poll.phtml 中使用此代码：

```
<?php
$pollActive = $this->getLayout()->createBlock("poll/activePoll"); 
if ($this->poll_id) {
$pollActive->setPollId($this->poll_id);
$pollActive->setPollTemplate('poll/active.phtml', 'poll');
$pollActive->setPollTemplate('poll/result.phtml', 'results');
} 
echo $pollActive->toHtml();
?> 
```

我从这里得到：http: [//inchoo.net/ecommerce/magento/magento-frontend/reusing-magento-poll-on-any-page-or-any-block/](http://inchoo.net/ecommerce/magento/magento-frontend/reusing-magento-poll-on-any-page-or-any-block/)

我不知道如何让投票在投票后像 Magento 默认投票一样消失。我认为这与我的 XML 有关。

# php - 在 PHP (Windows) 中参考网站根目录

> ID：14428007
> 
> 赞同：-1
> 
> 时间：2013-01-20T18:54:10.467
> 
> 标签：php, windows, filesystems, xampp

我想引用我的网站根目录，或者更准确地说，是指脚本上面的目录。

假设我的网站是 example.com/test。我创建了一个安装站点，它编写了一个配置文件。但它不应该将其写入 example.com/test/install/config.php，而是写入 example.com/test/config.php。****中最大的痛苦是我在 Windows（我的开发 PC）上运行。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:57:29.437

如果要获取网站文档根目录，可以使用：

```
$_SERVER['DOCUMENT_ROOT'] 
```

无论操作系统如何，这都应该有效，并为您提供本地文件系统上的路径（因此没有 www.etc.）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:57:28.860

如果要获取站点根目录的完全限定路径，请从该文件中获取：

```
$root = realpath(dirname(__FILE__) . '/../../..'); 
```

双点沿着目录结构向上移动，然后`realpath()`用于将其转换为正确的路径。因此，如果您想向上遍历少一个文件夹，请使用两组点而不是三组。

# ios - iOS从图像数组创建视频

> ID：14428008
> 
> 赞同：0
> 
> 时间：2013-01-20T18:54:15.987
> 
> 标签：ios, image-processing, video-capture, video-processing

我有一组要传递给此类的图像：

[https://github.com/jberlana/iOSKenBurns](https://github.com/jberlana/iOSKenBurns)

这基本上会获取所有图像并从中构建幻灯片，然后添加自动和随机的 ken burns 效果。

一切都很棒；但是，我现在正在尝试添加将幻灯片放映导出到电影文件的功能。只需一个简单的按钮即可完成此操作，但我不知道从哪里开始将其转换为视频。

我发现了这个：[QTMovie Class Reference](https://developer.apple.com/library/mac/#documentation/QuickTime/Reference/QTKitFramework/Classes/QTMovie_Class/Reference/Reference.html)，这正是我正在寻找的（将图像数组编译成电影文件），但我需要保留该类添加的 ken burns 效果，我不知道这是否也适用于 iOS。

不确定这是否可能，或者如何处理。任何帮助都会很棒，至少在正确的方向上有一点！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T04:47:14.103

QTMovie 类在 iOS 下不起作用。您可以查看我创建的示例 Xcode 项目，以在我的库中展示这种电影合成逻辑，Xcode 项目位于[AVRender](http://www.modejong.com/AVAnimator/examples.html#AVRender)。此示例创建一个无损输出文件，该文件基本上包含所有图像作为视频帧。如果您想在完成后将其实际转换为 h.264，则在同一页面上还有另一个名为 AVDecodeEncode 的示例显示了如何执行此操作并使用 AVPlayer 播放结果。您也可以使用 iOS 下的 AVAssets API 编写自己的代码来完成所有这些工作，但请注意，这些 API 使用起来并不简单。

# ruby-on-rails - 使用 form_for 将数据保存在关联表中

> ID：14428018
> 
> 赞同：1
> 
> 时间：2013-01-20T18:55:07.250
> 
> 标签：ruby-on-rails

我对 Rails 比较陌生——因此这个问题应该很容易回答。我试图在其他帖子中找到该问题的解决方案，但我可以找到它（可能是因为我现在不知道正确的词汇）。

这是我的问题/案例：

我有两个模型：

1）模型一：用户

2）模型二：FreelancerData

它们通过“用户有一个 FreelancerData”和“FreelancerData 属于_to User”连接。FreelancerData 包含三个字段“daily_rate”、“status”和“user_id”（= 外部字段）。

现在我想用form_for创建一个Form，我可以在其中填写当前用户的FreelancerData。

我尝试了以下代码，但这不起作用

```
<% provide(:title, "Edit freelancer") %>
<div class="row">   
    <aside class="span4">
        <section>
            <%= render ('layouts/profile') %>
        </section>
    </aside>
    <div class="span8">
        <h1>Edit your profile</h1>
        <h5>Please edit your current working status and your daily rate:</h5>
        <%= form_for @user.freelancer_data do |f| %>

          <%= render 'shared/error_messages', object: f.object %>

          <%= f.label :status %>
          <%= f.select :status, ['Busy', 'Available'] %>

            <%= f.label :daily_rate, "Daily rate in Euro ('.' and ',' are not allowed)" %>
          <%= f.text_field :daily_rate %>

          <%= f.submit "Save changes", class: 'btn-large btn-primary' %>

        <% end -%>
        <h5>If you want to change your picture, you can do it here:</h5>
        <%= gravatar_for @user %>
    <a href="http://gravatar.com/emails">change</a>

    </div>
</div> 
```

所以我的问题是：是否可以通过用户数据编辑关联表 FreelancerData 的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:23:10.083

是的。您可以使用 fields_for。看看这个[链接](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)。

# ssrs-2008 - SSRS 报告需要在 SSRS 2008 (VS 2008) 中重用来自 SSRS 2005 (VS 2005) 的 rdl 文件

> ID：14428022
> 
> 赞同：2
> 
> 时间：2013-01-20T18:55:53.350
> 
> 标签：ssrs-2008, reporting-services, dynamics-ax-2009, rdl

[我最初在这里](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/f76c3170-d6f5-45a5-91c3-21748d15320b)发布了一个帖子。由于我没有收到任何答复，所以我也在这里发帖。

这都是关于从 VS 2005 构建和导出的 Dynamics AX 2009 和 SSRS 报告。我有来自 Dynamics AX 2009 SQL Server 2005 ERP 环境的 rdl 和 rdl.data 文件。

我的问题在这些线程中得​​到了部分解决（[这里](http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/75a46847-806e-49da-96b5-691e31813f6e)、[这里](https://stackoverflow.com/questions/7875252/is-it-possible-to-import-existing-ssrs-reports-in-visual-studio)和[这里](https://stackoverflow.com/questions/183953/how-to-get-visual-studio-2008-to-edit-ssrs-2005-report-projects-w-o-installing-s)）。

开发人员设置了一个类似的环境来研究具有客户端数据的客户端系统，但有以下例外

*   数据库：SQL Server 2008 R2 SP1（不是 2005）
*   Microsoft SQL Server Reporting Services 版本 10.50.1600.1（猜测客户端由于 sql Server 2005 而旧）。
*   视觉工作室 2008 SP1

现在我唯一想做的就是以某种方式获取与 Visual Studio 2008/bids 中的某个报告项目相关联的 rdl 文件（或在某些线程中重命名时的 rdlc 文件），以便我可以重用 rdlc 文件中的布局，关联它到一些数据集/模型（来自 AX，所以我需要在这里查询可用性）并将我的报告部署在 AX 2009 AOT 中。

我在 VS 2008 中选择 Dynamics AX Reporting 项目模板。问题是，一旦我将 rdl 重命名为 rdlc 并在 VS 2008 中打开它，它也开始提供非常好的布局，如图所示。

![在此处输入图像描述](../Images/503b8f2ad582e015d9f2411bff4f61d7.png)

但是所有这些布局，这些字段都是无用的，因为它们绑定的数据集不可用。而且我找不到其他方法来附加我可以在新报告中创建的模型（也许是 .moxl 文件）

如果我不重命名 rdl 文件，它将打开其 xml 架构，如下所示：

![在此处输入图像描述](../Images/2bd0b49585d5e4b4972a8da3f17ac065.png)

我尝试了这个，因为我找到了一个转换线程，我更改了架构并保存了文件，重新打开它和相同的 xml，我猜这对我来说没用。

SSDT 的作用是什么，我认为这仅在 VS 2010 之后才可用，这是我[在此处](http://msdn.microsoft.com/en-us/data/tools.aspx)阅读的 rdl 文件转换的必要条件吗？

我如何重用这个 2005 rdl 文件或重命名的 rdlc 文件，它在 VS 2008 中成功呈现其布局/设计，只需将其绑定到 AX 数据源/查询/临时表，我就完成了。

根本不可能吗？或者它只是不是这样 - 我有大量这样的 rdl 文件，我想重用它们的布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:42:31.907

使用 vanila Visual Studio 报表设计器，它将数据集与设计图面分离。设计图面并不关心您如何获得每个数据集中的行和列。因此，您的挑战可能是在报表设计器中创建一个新的数据源，然后编辑数据集定义，以便从您的新数据源中生成相同的列。

我没有对 AX 使用过 SSRS，也没有听说过模型或 .moxl 文件。这可能会使您的情况复杂化。

# ios - SIGABRT 线程错误运行简单的 ios 应用程序

> ID：14428025
> 
> 赞同：1
> 
> 时间：2013-01-20T18:56:05.847
> 
> 标签：ios, xcode, multithreading, sigabrt

好的，这样的问题有很多答案，但没有一个对我有用。基本上我已经编写了一个非常简单的 iOS 应用程序，它有一个标签和一个按钮。单击按钮，标签将更改。这是代码

```
//ViewController.h
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
- (IBAction)buttonPressed:(id)sender;
@property (strong, nonatomic) IBOutlet UILabel *predictionLabel;

@end

    //
//  ViewController.m
//  CrystalBall
//
//  
//

#import "ViewController.h"

@implementation ViewController
@synthesize predictionLabel;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setPredictionLabel:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
        [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
        [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)buttonPressed:(id)sender {
    self.predictionLabel.text = @"Definitley Yes!";
}
@end 
```

当我在模拟器中运行它时，应用程序打开正常，然后我单击“预测”按钮，然后它冻结，这是以绿色显示的错误

```
Thread 1: Program recieved signal: "SIGABRT". 
```

那是沿着一条线 `return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));`

调试器说：2013-01-19 22:53:30.511 CrystalBall[441:f803] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIView setText:]：无法识别的选择器发送到实例 0x6a19c70”***首先抛出调用堆栈： `2013-01-19 22:53:30.511 CrystalBall[441:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIView setText:]: unrecognized selector sent to instance 0x6a19c70' *** First throw call stack: (0x13b9052 0x154ad0a 0x13baced 0x131ff00 0x131fce2 0x2385 0x13baec9 0x135c2 0x1355a 0xb8b76 0xb903f 0xb82fe 0x38a30 0x38c56 0x1f384 0x12aa9 0x12a3fa9 0x138d1c5 0x12f2022 0x12f090a 0x12efdb4 0x12efccb 0x12a2879 0x12a293e 0x10a9b 0x1da8 0x1d05) terminate called throwing an exception(gdb)`

希望这是足够的信息。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:16:52.527

> ```
>  '-[UIView setText:]: unrecognized selector sent to instance 0x6a19c70' 
> ```

表示您正在尝试将`setText`消息发送到`UIView`没有任何此类方法的实例。

这可能来自以下声明：

```
 self.predictionLabel.text = @"Definitley Yes!"; 
```

所以你应该检查你是如何定义`predictionLabel`的，并确保它是正确的类型。

关于调试器向您显示该行的事实：

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

你应该在 Xcode 中定义一个异常断点来捕获所有异常：

1.  转到左侧窗格中的断点选项卡；

2.  在窗格的底部，您会找到一个`+`图标；

3.  单击它并选择添加异常断点；

4.  确认并完成。

现在，调试器将停止在导致 sigabrt 的实际行上，以便您可以检查对象的状态。

# c++ - 删除双指针会导致堆损坏

> ID：14428026
> 
> 赞同：0
> 
> 时间：2013-01-20T18:56:07.280
> 
> 标签：c++, pointers, memory-management

我正在使用双指针，但是当我尝试删除它时会导致堆损坏：CRT 检测到应用程序在堆结束后写入内存。它在对象的析构函数内“崩溃”：

```
Map::~Map()
{
    for(int i = 0; i < mTilesLength; i++)
        delete mTiles[i];

    delete[] mTiles;
} 
```

mTiles 声明如下：

```
Tile **mTiles = NULL;
mTiles = new Tile *[mTilesLength];

for(int i = 0; i < mTilesLength; i++)
    mTiles[i] = new Tile(...); 
```

如果值得注意的 mTiles 是从对象“Sprite”继承的“Tile”对象，则所有 3 个析构函数都设置为虚拟（地图、瓷砖、精灵），不确定这是否有任何区别，但直到现在似乎都有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:46:56.043

您发布的代码似乎没有任何问题。我从中创建了一个简单、自包含、编译（且正确）的示例：

```
struct Tile {int x; Tile():x(7) {}};

struct Map {
  Tile **mTiles;
  int mTilesLength;
  Map(int TilesLength_);
  ~Map();
};
Map::~Map()
{
  for(int i = 0; i < mTilesLength; i++) {
    delete mTiles[i];
  }

  delete[] mTiles;
}
Map::Map(int TilesLength_):
  mTiles(),
  mTilesLength(TilesLength_)
{
  mTiles = new Tile *[mTilesLength];

  for(int i = 0; i < mTilesLength; i++) {
    mTiles[i] = new Tile();
  }
}
int main() {
  Map* m = new Map(1000);
  delete m;
} 
```

我[编译并运行它](http://liveworkspace.org/code/1j0kr8%240)<- 链接，并没有发现任何不好的地方。

您的问题在于您没有与我们共享的代码。为了找到导致问题的代码并提出正确的问题，请访问：http: [//sscce.org/](http://sscce.org/)

然后拿出你的代码并开始修剪它的部分，直到代码很简单，但仍然显示你的堆损坏。在删除不相关的代码时保留每个版本的副本，这样您就不会跳过出现问题的部分（这是即使在您的个人项目中也需要版本控制系统的众多原因之一）。

# documentation - 在哪里可以找到 PyGObject 的参考资料

> ID：14428028
> 
> 赞同：0
> 
> 时间：2013-01-20T18:56:20.480
> 
> 标签：documentation, pygobject

我正在开发基于 Python 的源代码编辑器。我创建了一个干净的布局，带有`Gtk.Notebook`. 使用 Glade 创建主布局很容易，但是在我导入之后`gi.repository`，一切都变得很困难。很难找到文档。从`pydoc`我什么都得不到，只有方法签名，通常是 *args，**kwargs。我经常需要检查方法返回或接收的内容，而我还没有真正开始使用信号和其他东西。

是否有完整/几乎完整的文档，尤其是对于 GtkSource？GtkSource 尤其没有记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:49:19.653

您可能应该阅读我对类似 SO 问题的回答：[PyGObject GTK+ 3 Documentation](https://stackoverflow.com/questions/11586396/pygobject-gtk-3-documentation/11589779#11589779)。总之，你应该参考[GtkSourceView API Reference](http://developer.gnome.org/gtksourceview/stable/) for C。别担心，这并不难。当您在 C 文档中看到“GtkSourceView”时，您就知道它是 Python 中的“GtkSource.View”。当您在 C 文档中看到“gtk_source_view_new”时，您就知道它是 Python“GtkSouce.View()”中的构造函数。您可以在构造函数中设置*任何*GTK+ 属性，并且每个属性通常都有 get_foo/set_foo 样式的方法。

因此，您可以执行以下操作：

```
view = GtkSouce.View(indent_width=4, show_line_numbers=True)
view.get_buffer().set_text("Hello World!") 
```

请记住，GTK+ 小部件是对象，因此您需要注意层次结构以查找小部件的所有方法和属性。

# jekyll - 如何让我的帖子暂时不公开？

> ID：14428029
> 
> 赞同：18
> 
> 时间：2013-01-20T18:56:33.783
> 
> 标签：jekyll, github-pages, yaml-front-matter

我正在使用`jekyll`和`github pages`。我目前正忙于新帖子，还没有完成。我在不同的地方工作，这就是为什么我需要`push`更改为`github`. 我创建了新帖子并将其推送`github`。但是在`push`我写了一半的帖子之后，每个人都可以看到。在我完成之前我不想让它可见。

我怎么能隐藏它？有没有标准的方式或标志？

我知道我可以将其复制到另一个文件夹，但不是首选方式。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-21T14:37:47.500

您可以在[YAML Front Matter](https://github.com/mojombo/jekyll/wiki/YAML-Front-Matter)中包含一行来指示帖子是否已发布：

```
published: true 
```

或者

```
published: false 
```

如果您不想在网站生成时显示帖子，请设置`published`为。`false`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T07:00:37.917

这些页面只有在您将它们推送到[分支`gh-pages`时才](https://github.com/blog/272-github-pages)可见。

您可以维护一个`gh-pages-draft`分支来推送正在进行的工作，并将该分支合并到`gh-pages`您准备好发布时。

例如，应用程序[middleman-deploy](https://github.com/tvaughan/middleman-deploy)（用于[Middleman](http://middlemanapp.com/)，一个静态站点生成器）最近支持[推送到其他分支，而不仅仅是 gh-pages](https://github.com/tvaughan/middleman-deploy/pull/4)。

* * *

注意：[kleinfreund](https://stackoverflow.com/users/2036825/kleinfreund)[在评论中](https://stackoverflow.com/questions/14428029/how-to-make-my-post-not-public-for-a-while/14433771?noredirect=1#comment38780316_14433771)添加

> 草稿的想法在 Jekyll 中得到了支持。
> 将帖子草稿存储在文件名中`/_drafts`并省略文件名中的日期

这在“[使用草稿](http://jekyllrb.com/docs/drafts/)”中有详细说明

# postgresql - PostgreSQL 复制语句

> ID：14428031
> 
> 赞同：0
> 
> 时间：2013-01-20T18:56:56.967
> 
> 标签：postgresql

我的数据库中有表

```
CREATE TABLE user_user (
    id bigint NOT NULL,
    creationdate timestamp without time zone,
    externalid character varying(255),
    installdate timestamp without time zone,
    lastlogindate timestamp without time zone,
    password character varying(255),
    status character varying(255),
    username character varying(255) NOT NULL,
    usertype character varying(255),
    information_fk bigint,
    operator_id bigint,
    loginip character varying(255),
    logged boolean,
    bonuspercent integer DEFAULT 20,
    factor integer DEFAULT 100,
    givefree boolean,
    flashfile character varying(255),
    useraccess integer DEFAULT 0 NOT NULL,
    reportsaccess integer DEFAULT 0 NOT NULL,
    gamesaccess integer DEFAULT 0 NOT NULL,
    transactionsaccess integer DEFAULT 0 NOT NULL
); 
```

现在我需要给它提供数据。我有查询，但它不起作用。怎么了？SQL Editor 说 ERROR: syntax error ("51" 的大概位置)

```
COPY user_user (id, creationdate, externalid, installdate, lastlogindate, password, status, username, usertype, information_fk, operator_id, loginip, logged, bonuspercent, factor, givefree, flashfile, useraccess, reportsaccess, gamesaccess, transactionsaccess) FROM stdin;
51  2011-12-16 15:30:57.901 \N  \N  2013-01-19 09:10:02.789 101918  ENABLED ceco    USER    51  50  \N  f   20  100 f   localhost   0   0   0   0
53  2011-12-16 15:30:57.989 \N  \N  2012-08-17 14:46:32.052 101918  ENABLED kostas  USER    53  50  \N  f   20  100 f   localhost   0   0   0   0
1650    \N  \N  \N  2012-08-08 10:57:07.79  101918  ENABLED lubo    USER    1600    50  \N  f   20  100 f   localhost   0   0   0   0
52  2011-12-16 15:30:57.943 \N  \N  2012-08-19 12:00:42.198 101918  ENABLED vania   USER    52  50  \N  f   20  100 f   localhost   0   0   0   0
10  \N  \N  \N  \N  22222   ENABLED root    GROUP   10  \N  \N  f   20  100 f   localhost   0   0   0   0
21  \N  \N  \N  2012-03-23 06:33:23.38  karakondjoli    ENABLED rootadmin22 ADMIN   21  20  \N  f   20  100 f   localhost   0   0   0   0
20  \N  \N  \N  \N  dsjadsghjghjghsag   ENABLED rootaf  GROUP   20  \N  \N  f   20  100 f   localhost   0   0   0   0
11  \N  \N  \N  2013-01-17 08:52:07.279 101918  ENABLED rootadmin   ADMIN   11  10  127.0.0.1   f   20  100 f   localhost   15  0   0   0
50  2011-12-16 15:30:57.825 \N  \N  2013-01-18 08:43:54.433 opera   ENABLED operator    OPERATOR    50  10  \N  f   0   100 f   192.168.1.103   0   0   0   0
\. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:16:52.837

也许您正在使用 pgAdmin 或其他编辑器中的复制命令，请使用如下命令行：

```
psql -d yournewdatabase -U username -f yourbackupfile 
```

在 Windows 中，你必须去`c:\Program files (x86)\Postgres\8.3\bin`发出命令（用你正在使用的实际版本的 postgresql 替换 8.3）

# jquery - jQuery、jCrumb 配置

> ID：14428034
> 
> 赞同：1
> 
> 时间：2013-01-20T18:57:00.693
> 
> 标签：jquery, ruby-on-rails-3, jquery-ui

我决定试用 jQuery 插件“jCrumb”。我有点坚持的是如何添加我自己的图像作为分隔符以及如何控制它生成的面包屑的名称。

[所以我从http://www.somethinghitme.com/projects/jCrumb/index.html?t=JCrumb%20Page%203](http://www.somethinghitme.com/projects/jCrumb/index.html?t=JCrumb%20Page%203)下载了 jCrumb 

您可以通过函数传递选项

```
(function($){
 $.fn.jCrumb = function(options) {
 var settings = {
    maxCrumbs : 4,
    maxMemory : 15,
    defaultClass : 'jCrumb',
    jqUI : false,
    seperator : "&gt;"
  }, 
```

面包屑工作正常，因为它遵循我的导航，而不是例如显示面包屑

```
Home / News / Contact 
```

他们这样表现

```
Nameofmysite | Home > nameofmysite | News > nameofmysite | Contact Us 
```

插件从哪里获取信息，我将如何将其更改为

```
Home / News / Contact Us 
```

编辑

标题取自这个方法

```
 def title
 base_title = "Newbridges"
 if @title.nil?
  base_title
 else
  "#{base_title} | #{@title}"
 end
 end 
```

我如何让插件忽略基本标题？

编辑

使用插件中的此部分设置标题

```
 setCrumb(document.title + '^' +  window.location.href);

  var crumbs = getCrumbs(),
    crumbVal = "",
    crumbList =  $(document.createElement('ul')).addClass(settings.defaultClass).appendTo($(this)),
    crumbListItem = "";

  if(settings.jqUI){
    crumbList.addClass('fg-buttonset fg-buttonset-single ui-helper-clearfix');
  }

  if(crumbs){
    crumbs = crumbs.split('*');
    startIndex = 0; 
```

我正在用 Rails 开发网站，不确定这是否会对我拥有的任何选项产生影响

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:51:38.353

的使用`document.title`被硬编码到 jCrumb 插件中，这意味着它将采用 Rails 设置的任何内容。

所以你有两个选择：

在 Rails 中更改您的`title`方法，使其不会将站点名称添加到文档标题：

```
def title
  base_title = "Newbridges"
  if @title.nil?
   base_title
  else
   @title
  end
end 
```

...或扩展或修改 jCrumb 插件，以便`document.title`它使用`document.title.split(" | ")[1]`.

# silverlight-5.0 - SL 5 Expander 内容模板建议

> ID：14428035
> 
> 赞同：0
> 
> 时间：2013-01-20T18:57:07.843
> 
> 标签：silverlight-5.0, controltemplate, expander

我无法选择正确的模板来管理扩展控件的内容。
我希望扩展器的内容——不管内容是什么类型的控件——缩进。
例如，扩展器可能有一个扩展器作为内容，然后子扩展器可能有一个列表框或文本块的集合。

任何帮助，将不胜感激....

更新：
用这样的 DataTemplate 进行试验：

```
<DataTemplate x:Key="DataTemplate1">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>  
            <ContentPresenter Grid.Row="1" />  <!-- With this in place, content doesn't show at all -->
        </Grid>
    </DataTemplate> 
```

并像这样使用它：

```
 <controls2:Expander Header="Two" ContentTemplate="{StaticResource DataTemplate1}"> 
```

到目前为止，任何处理内容的尝试都会在 Expander 展开时使应用程序崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:04:53.557

我认为这段代码应该可以帮助你

```
 <toolkit:Accordion x:Name="SearchAcco" Grid.Row="0" Margin="3"  ExpandDirection="Down" HorizontalAlignment="Stretch" SelectionMode="ZeroOrOne">
                <toolkit:AccordionItem Header="Advance Search" Style="{StaticResource AccordianPanalStyle}"  HorizontalContentAlignment="Left">
<--Add Content Here-->
</toolkit:AccordionItem>

     </toolkit:Accordion> 
```

# php - 在附加的 HTML 上使用 jQuery 效果

> ID：14428036
> 
> 赞同：1
> 
> 时间：2013-01-20T18:57:08.830
> 
> 标签：php, javascript, jquery, html, css

我有我的代码在这里。

```
// HTML Code
<div class="article"></div>

// jQuery
$('.article').append('<a href="" class="toggle">Toggle div</a>'); 
```

是否可以使用新创建的 href 链接并像这样切换 div：

```
// jQuery
$('.toggle').click(function() { 
   $('.article').toggle('slow');
}); 
```

我已经尝试了上述方法，但没有运气。我只是被重定向到索引页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T18:58:12.803

不要使用`click()`: 它已被弃用，即使不是这样也无法使用。使用[`on()`](http://api.jquery.com/on/)：

```
$('.toggle').on('click', function() { 
   $('.article').toggle('slow');
}); 
```

另外，将您的`a`标签更改为`<a href="javascript:void(0)" class="toggle">Toggle div</a>`.

* * *

至于为什么`on()`起作用和`click()`不起作用的原因，您需要阅读 jQuery 的文档。简而言之，点击事件已经绑定到页面上的某个元素；此范围不包括将来添加到 DOM 的元素。`On()`但是，是委托事件：

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。

# python - Python - 将 unicode 字符串写入文件和漂亮的汤

> ID：14428037
> 
> 赞同：0
> 
> 时间：2013-01-20T18:57:12.207
> 
> 标签：python, unicode, beautifulsoup

我正在使用 BeautifulSoup 来解析一些 XML 文件。此文件中的字段之一经常使用 Unicode 字符。我尝试使用编码将 unicode 写入文件，但未成功。

到目前为止的过程基本上是：

1.  获取名称

    gamename = items.find('name').string.strip()

2.  然后将该名称合并到一个列表中，该列表稍后会转换为一个字符串：

    stringtoprint = userid, gamename.encode('utf-8') #

    newstring = "插入集合值" + str(stringtoprint) + ";" +"\n"

然后将该字符串写入文件。

listofgamesowned.write(newstring.encode("UTF-8"))

看来我不必如此频繁地进行 .encode 了。我曾尝试在解析名称时直接进行编码，例如`gamename = items.find('name').string.strip().encode('utf-8')`- 但是，这似乎不起作用。

目前 - 'Uudet L\xc3\xb6yt\xc3\xb6retket'

正在打印和保存，而不是 Uudet Löytöretket。

如果这是我正在生成的字符串，那么我会使用`something.write(u'Uudet L\xc3\xb6yt\xc3\xb6retket')`; 但是，它是嵌入在字符串中的一个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:03:10.607

Unicode 是字符串的内存表示。当您写出或读入时，您需要编码和解码。

`Uudet L\xc3\xb6yt\xc3\xb6retket`是 的`utf-8`编码版本`Uudet Löytöretket`，所以它就是您要写出的内容。当您想从文件中读回字符串时，您需要对其进行解码。

```
>>> print 'Uudet L\xc3\xb6yt\xc3\xb6retket'
Uudet LÃ¶ytÃ¶retket
>>> print 'Uudet L\xc3\xb6yt\xc3\xb6retket'.decode('utf-8')
Uudet Löytöretket 
```

只需记住在输出之前立即编码并在读回后立即解码。

# jquery - .load() 回调函数不起作用

> ID：14428038
> 
> 赞同：0
> 
> 时间：2013-01-20T18:57:20.310
> 
> 标签：jquery, ajax, wordpress

我在我的 wordpress 主题中有这段代码来加载其中的页面，检查它：

```
($j for no conflict)

$j = jQuery.noConflict();
$j(document).ready(function () {
    $j("#main-nav a").click(function (event) {
        event.preventDefault();
        $jloca = this.href;
        $j("#content").load($jloca '#main-content');
        alert('****');

    });
}); 
```

它`#main-content`从我`href`在`#main-nav a`. 它在OK
内加载。`#content`

但是我的警报不起作用！

好吧，我不想提醒，我想做一些 CSS 更改，但提醒是为了测试。

我还尝试将其作为回调函数，请参阅：

```
$j=jQuery.noConflict();

$j(document).ready(function () {
    $j("#main-nav a").click(function (event) {
        event.preventDefault();
        $jloca = this.href;
        $j("#content").load($jloca '#main-content', function () {
            alert('Load was performed.');
        });
    });
}); 
```

似乎没有任何效果。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:58:34.623

您的代码无法编译。

改变

```
$j("#content").load($jloca '#main-content'); 
```

至

```
$j("#content").load($jloca + ' #main-content'); 
```

请注意，您应该首先查看控制台以查看这些错误。我建议您阅读有关[开发人员工具的](https://developers.google.com/chrome-developer-tools/)信息。

# php - 在 Ajax 响应中执行 JavaScript

> ID：14428039
> 
> 赞同：0
> 
> 时间：2013-01-20T18:57:21.587
> 
> 标签：php, javascript, jquery, ajax

我有一个ajax表单过程。但是当我单击一个功能时，我会执行此过程。当我单击它时，它会在 Jquery 对话框中打开一个 PHP 表单。但是当我处理表单时，POST VARs 是 NULL。

这是代码：

具有请求表单功能的主文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Aircrafts</title>
    <link rel="stylesheet" type="text/css" href="../../../lib/css/style.css">
    <link rel="stylesheet" href="../../../lib/css/flick/jquery.ui.all.css">
    <script src="../../../lib/js/jquery.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.button.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.core.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.widget.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.mouse.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.button.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.draggable.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.position.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.resizable.js"></script>
    <script src="../../../lib/js/ui/jquery.ui.dialog.js"></script>

    <script>
    $(function() {
        $( "#loadingdialog" ).dialog({
            autoOpen: false,
            width: 300,
            height: 65
        });

        $("#loadingdialog").dialog('widget').find(".ui-dialog-titlebar").hide();
        $("#loadingdialog").dialog('widget').find(".ui-resizable-se").hide();

        $( "#editaircraftdialog" ).dialog({
            autoOpen: false,
            width: 425
        });

        $("#editaircraftdialog").dialog('widget').find(".ui-resizable-se").hide();                   
    });

        if (window.XMLHttpRequest)
                {
                ajax=new XMLHttpRequest();
                }
            else
                {
                ajax=new ActiveXObject("Microsoft.XMLHTTP");
                }

     function edit(str) {
            $.ajax({
                url: "./edit_aircraft.php?icao="+str,
                context: document.body,
                success: function(responseText) {
                    $("#editaircraftdialog").html(responseText);
                    $("#editaircraftdialog").find("script").each(function(i) {
                        eval($(this).text());
                    });
                    $("#editaircraftdialog").dialog('open');
                }
            });
        };
    </script>
    </head>
    <body>

    <div id="result"></div></br>

    <div id="loadingdialog"><center><p><img src="../../../lib/images/loading.gif"></center></p></div>

    <div id="editaircraftdialog"></div>

 <?php
    require_once('../../config.php');

$query = "SELECT * FROM aircrafts ORDER BY ICAO ASC LIMIT";

$result = mysql_query($query);
if (!$result)
{
die (mysql_error());
}

echo "<table border='0' cellspacing='0'>";
echo "<tr><th class=tabletitles>ICAO</th><th class=tabletitles>Edit</th></tr>";

while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    if($i++%2==0){
       $color="#FFFFFF";
    }else{
       $color="#CCCCCC";
    }

    ?>

    <tr bgcolor='<?php echo $color; ?>' onmouseover="this.style.background='#ABFB04';" onmouseout="this.style.background='<?php echo $color; ?>';">
    <?php

echo "<td class=tablelist>";

echo $row["ICAO"] . '</td><td class=tablelist>';

echo "<img src=\"../../../lib/images/edit.png\" onclick=\"edit('".$row["ICAO"]."')\"></td><td class=tablelist>";

}

echo "</table>";
mysql_close();
    ?>

    </body>
    </html> 
```

带有 AJAX 表单流程和 PHP 表单的文件：

```
<?php
require_once ('../../config.php');
$icao = $_GET["icao"];

$query = "SELECT * FROM aircrafts WHERE ICAO = '$icao'";

$result = mysql_query($query);
if (!$result)
{
die (mysql_error());
}

?>
<form action="javascript:editForm();" method="post" enctype="application/x-www-form-urlencoded"> 
<?php
echo '<table border="0">';
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){

echo '<tr><td class="forms">ICAO:</td><td><input type="text" id="icao" name="icao" size="30" value=';
echo $row["ICAO"] . "></td></tr>";

echo '<tr><td class="forms">Name:</td><td><input type="text" id="name" name="name" size="30" value=';
echo $row["Name"] . "></td></tr>";

echo '<tr><td class="forms">Weight Empty:</td><td><input type="text" id="weightempty" name="weightempty" size="30" value=';
echo $row["WeightEmpty"] . "></td></tr>";

echo '<tr><td class="forms">Weight Full:</td><td><input type="text" id="weightfull" name="weightfull" size="30" value=';
echo $row["WeightFull"] . "></td></tr>";

echo '<tr><td class="forms">Cargo Full:</td><td><input type="text" id="cargofull" name="cargofull" size="30" value=';
echo $row["CargoFull"] . "></td></tr>";

echo '<tr><td class="forms">Cruise Speed:</td><td><input type="text" id="cruisespeed" name="cruisespeed" size="30" value=';
echo $row["CruiseSpeed"] . "></td></tr>";

echo '<tr><td class="forms">Range:</td><td><input type="text" id="range" name="range" size="30" value=';
echo $row["Range"] . "></td></tr>";

echo '<tr><td class="forms">Price:</td><td><input type="text" id="price" name="price" size="30" value=';
echo $row["Price"] . "></td></tr>";

if($row["FirstClassSeats"] != NULL && $row["FirstClassSeats"] != 0){
echo '<tr><td class="forms">First Class Seats:</td><td><input type="text" id="firstclassseats" name="firstclassseats" size="30" value=';
echo $row["FirstClassSeats"] . "></td></tr>";}

if($row["BusinessClassSeats"] != NULL && $row["BusinessClassSeats"] != 0){
echo '<tr><td class="forms">Business Class Seats:</td><td><input type="text" id="businessclassseats" name="businessclassseats" size="30" value=';
echo $row["BusinessClassSeats"] . "></td></tr>";}

if($row["EconomyClassSeats"] != NULL && $row["EconomyClassSeats"] != 0){
echo '<tr><td class="forms">Economy Class Seats:</td><td><input type="text" id="economyclassseats" name="economyclassseats" size="30" value=';
echo $row["EconomyClassSeats"] . "></td></tr>";}

echo '<tr><td><input id="editaircraft" type="submit" value="Edit Aircraft"></td></tr>';

}
echo "</table>";
?>

</form>
<script>

    $(function() {
        $("#editaircraft")
            .button()
            .click(function editForm() {
        });
    });

function editForm(){

            var icao = document.getElementById('icao').value;
            var name = document.getElementById('name').value;
            var weightempty = document.getElementById('weightempty').value;
            var weightfull = document.getElementById('weightfull').value;
            var cargofull = document.getElementById('cargofull').value;
            var cruisespeed = document.getElementById('cruisespeed').value;
            var range = document.getElementById('range').value;
            var price = document.getElementById('price').value;
            var firstclassseats = document.getElementById('firstclassseats').value;
            var businessclassseats = document.getElementById('businessclassseats').value;
            var economyclassseats = document.getElementById('economyclassseats').value;
            ajax.open("POST","edit_aircraft_process.php",true);
            ajax.onreadystatechange=function(){
                if(ajax.readyState==4)
                {
                refreshTable(function(){$("#loadingdialog").dialog('close');});

                refreshTable(function(){$("#result").fadeIn(); document.getElementById("result").innerHTML=ajax.responseText;});
                setTimeout(function() { $("#result").fadeOut() }, 5000);
                }
            }
        ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        ajax.send("icao="+icao+"&name="+name+"&weightempty="+weightempty+"&weightfull="+weightfull+"&cargofull="+cargofull+"&cruisespeed="+cruisespeed+"&range="+range+"&price="+price+"&firstclassseats="+firstclassseats+"&businessclassseats="+businessclassseats+"&economyclassseats="+economyclassseats);
        $("#editaircraftdialog").dialog('close');
        $("#loadingdialog").dialog('open');
        }
</script> 
```

当我执行 editForm 时，可以正常工作并将过程的结果`<div id="result">`很好地处理。但是，发送到数据库中编辑的变量（例如 icao）是 NULL 并且它什么也不编辑。

我认为错误是因为在 ajax 请求之后它不能执行`document.getElementById`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:37:06.670

在 XML 中，片段标识符属于 ID 类型，每个元素只能有一个 ID 类型的属性。因此，在 XHTML 1.0 中，id 属性被定义为 ID 类型。为了确保 XHTML 1.0 文档是结构良好的 XML 文档。

在这种情况下，您将数据循环到相同的输入 id 中。将您的代码更改为：

```
var i = 1;
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){

echo '<tr><td class="forms">ICAO:</td><td><input type="text" id="icao_' . i . '" name="icao" size="30" value="';
echo $row["ICAO"] . '"></td></tr>"';

echo '<tr><td class="forms">Name:</td><td><input type="text" id="name_' . i . '" name="name" size="30" value="';
echo $row["Name"] . '"></td></tr>"';

echo '<tr><td class="forms">Weight Empty:</td><td><input type="text" id="weightempty_' . i . '" name="weightempty" size="30" value="';
echo $row["WeightEmpty"] . '"></td></tr>"';

echo '<tr><td class="forms">Weight Full:</td><td><input type="text" id="weightfull_' . i . '" name="weightfull" size="30" value="';
echo $row["WeightFull"] . '"></td></tr>"';

echo '<tr><td class="forms">Cargo Full:</td><td><input type="text" id="cargofull_' . i . '" name="cargofull" size="30" value="';
echo $row["CargoFull"] . '"></td></tr>"';

echo '<tr><td class="forms">Cruise Speed:</td><td><input type="text" id="cruisespeed_' . i . '" name="cruisespeed" size="30" value="';
echo $row["CruiseSpeed"] . '"></td></tr>"';

echo '<tr><td class="forms">Range:</td><td><input type="text" id="range_' . i . '" name="range" size="30" value="';
echo $row["Range"] . '"></td></tr>"';

echo '<tr><td class="forms">Price:</td><td><input type="text" id="price_' . i . '" name="price" size="30" value="';
echo $row["Price"] . '"></td></tr>"';

if($row["FirstClassSeats"] != NULL && $row["FirstClassSeats"] != 0){
echo '<tr><td class="forms">First Class Seats:</td><td><input type="text" id="firstclassseats_' . i . '" name="firstclassseats" size="30" value="';
echo $row["FirstClassSeats"] . '"></td></tr>"';}

if($row["BusinessClassSeats"] != NULL && $row["BusinessClassSeats"] != 0){
echo '<tr><td class="forms">Business Class Seats:</td><td><input type="text" id="businessclassseats_' . i . '" name="businessclassseats" size="30" value="';
echo $row["BusinessClassSeats"] . '"></td></tr>"';}

if($row["EconomyClassSeats"] != NULL && $row["EconomyClassSeats"] != 0){
echo '<tr><td class="forms">Economy Class Seats:</td><td><input type="text" id="economyclassseats_' . i . '" name="economyclassseats" size="30" value="';
echo $row["EconomyClassSeats"] . '"></td></tr>"';}

echo '<tr><td><input id="editaircraft_' . i . '" type="submit" value="Edit Aircraft"></td></tr>';
i++;
} 
```

然后您可以使用 jquery serialize 发送数据

改变这个：

```
ajax.send("icao="+icao+"&name="+name+"&weightempty="+weightempty+"&weightfull="+weightfull+"&cargofull="+cargofull+"&cruisespeed="+cruisespeed+"&range="+range+"&price="+price+"&firstclassseats="+firstclassseats+"&businessclassseats="+businessclassseats+"&economyclassseats="+economyclassseats); 
```

进入这个：

```
ajax.send($("form").serialize()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:13:51.840

好吧，不确定确切的问题是什么，但是在快速检查您的代码时，这里有两件事：

1.  您没有正确关闭输入标签，例如：

    ```
     echo '<tr><td class="forms">ICAO:</td><td><input type="text" id="icao" name="icao" size="30" value=';
    echo $row["ICAO"] . "/></td></tr>";// <--- notice the added forward slash to close the input 
    ```

2.  您没有使用以下属性包围该`value`属性`""`：

    ```
     echo '<tr><td class="forms">ICAO:</td><td><input type="text" id="icao" name="icao" size="30" value="'; //<-- open here
    echo $row["ICAO"] . '"/></td></tr>'; //<--- notice the closing " 
    ```

# php - PHP 数组错误：资源 ID #4

> ID：14428051
> 
> 赞同：0
> 
> 时间：2013-01-20T18:58:22.407
> 
> 标签：php, mysql

我面临的当前问题是，当我输入 url 时，我的 MySql 表没有显示：`www.mydoman.com/search-results.php?town=Blackpool`-venuetbl 中的结果没有显示并且打印错误正在说明`Resource id #4`

```
<?php
session_start();

include('dbconnect.php');

if(isset($_GET['town']))   {
$town = $_GET['town'];

            mysql_connect("$host", "$username", "$passwd")or die("cannot connect"); 
            mysql_select_db("$db")or die("cannot select DB");
    $res=mysql_query("SELECT * from venuetbl where town = '$town'") or die("error");        

}
?>
<?php while($row = mysql_fetch_array($res))    { ?>
        <div class="search-results">
            <div class="result">
                <img src="images/<? echo $rows['imageurl']; ?>.jpg" alt="" width="150" height="100" />
                <h2><? echo $rows['name']; ?></h2>
                <p><? echo $rows['description']; ?></p>

                <a class="button" href="http://www.mydomain.co.uk/result.php?id=<? echo $rows['venueid']; ?>">View More</a>
                <a class="button green" href="#">Add To My Venues</a>
            </div><!--END Result-->
        </div><!--END Search Results-->

                    <?php
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:00:46.210

您正在尝试回显 $rows['SOME_KEY'] 而不是 $row['SOME_KEY']

# ios - 图像缩放 CGDataProviderCopyData

> ID：14428053
> 
> 赞同：0
> 
> 时间：2013-01-20T18:58:25.400
> 
> 标签：ios, xcode, image-processing

**更新 1**

[我在这里找到了一个很有前途的苹果文档，](http://developer.apple.com/library/ios/#qa/qa1509/_index.html)描述了 CGDataProviderCopyData。我认为这通过从上下文中获取绘图并提取像素值来完成我最初询问的问题。

示例代码使用`CGImageGetDataProvider`了一些我不理解的其他功能，因此我无法弄清楚如何实现它们的功能。如何从变量`con`或其上下文中获取信息并访问像素？

**更新 1**

**更新 0**

也许我在这里问错了问题。`CGContextDrawImage`在我的情况下，将图像从 104 x 104 缩放到 13 x 13，然后`CGContextDrawImage`显示图像。也许我需要找到`CGContextDrawImage`仅进行缩放的部分。

我`initWithData:scale:`在“UIImage 类参考”中找到了。但我不知道如何为该方法提供数据。我想要的比例是 0.25 。

```
- (id)initWithData:(NSData *)data scale:(CGFloat)scale 
```

有人可以告诉我如何`(NSData *)data`为我的应用程序提供吗？

**更新 0**

```
//
//  BSViewController.m

#import "BSViewController.h"

@interface BSViewController ()
@end

@implementation BSViewController

- (IBAction) chooseImage:(id) sender{

    [self.view addSubview:self.imageView];
    UIImage* testCard = [UIImage imageNamed:@"ipad 7D.JPG"];
    CGSize sz = [testCard size];
    CGImageRef num = CGImageCreateWithImageInRect([testCard CGImage],CGRectMake(532, 0, 104, 104));
    UIGraphicsBeginImageContext(CGSizeMake( 250,650));
    CGContextRef con = UIGraphicsGetCurrentContext();
    CGContextDrawImage(con, CGRectMake(0, 0, 13, 13) ,num);
    UIGraphicsEndImageContext();
    self.workingImage = CFBridgingRelease(num);
    CGImageRelease(num); 
```

我正在研究从上到下的过渡。

更具体地说，我需要为 imageRef 提供正确的输入。我想给 imageRef 一个 13 x 13 的图像，但是当我给 imageRef`num`它得到一个 104 x 104 的图像，而当我给 imageRef`con`它得到一个 0 x 0 的图像。（底部提到了另一种尝试性的方法。）

[下面的代码是 Brandon Trebitowski 的](http://brandontreb.com/image-manipulation-retrieving-and-updating-pixel-values-for-a-uiimage/)

```
 CGImageRef imageRef = num;
    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef);
    NSLog(@"the width: %u", width);
    NSLog(@"the height: %u", height);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                                 bitsPerComponent, bytesPerRow, colorSpace,
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
    CGContextRelease(context);
    NSLog(@"Stop 3");

    // Now your rawData contains the image data in the RGBA8888 pixel format.
    int byteIndex = (bytesPerRow * 0) + 0 * bytesPerPixel;
    for (int ii = 0 ; ii < width * height ; ++ii)
    {
        int outputColor = (rawData[byteIndex] + rawData[byteIndex+1] + rawData[byteIndex+2]) / 3;

        rawData[byteIndex] = (char) (outputColor);
        rawData[byteIndex+1] =  (char) (outputColor);
        rawData[byteIndex+2] = (char) (outputColor);

        byteIndex += 4;
    }
}

- (void)viewDidLoad
{

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我还尝试定义`self.workingImage`以下两种方式之一并将其提供给`imageRef`.

```
self.workingImage = num;
self.workingImage = (__bridge UIImage *)(num);
CGImageRef imageRef = [self.workingImage CGImage]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:02:03.547

我更改了 2 行并添加了 3 行并得到了我想要的结果。主要的变化是使用`UIGraphicsBeginImageContextWithOptions`代替，`UIGraphicsBeginImageContext`以便可以在绘制图像之前完成重新缩放。

```
@implementation BSViewController

- (IBAction) chooseImage:(id) sender{

    [self.view addSubview:self.imageView];
    UIImage* testCard = [UIImage imageNamed:@"ipad 7D.JPG"];
    CGSize sz = [testCard size];
    CGImageRef num = CGImageCreateWithImageInRect([testCard CGImage],CGRectMake(532, 0, 104, 104));
    UIGraphicsBeginImageContextWithOptions(CGSizeMake( 104,104), NO, 0.125);  // Changed
    CGContextRef con = UIGraphicsGetCurrentContext();
    CGContextDrawImage(con, CGRectMake(0, 0, 104, 104) ,num);  // Changed
    UIImage* im = UIGraphicsGetImageFromCurrentImageContext();  // Added
    UIGraphicsEndImageContext();
    self.workingImage = CFBridgingRelease(num);
    CGImageRelease(num);

    UIImageView* iv = [[UIImageView alloc] initWithImage:im];   // Added
    [self.imageView addSubview: iv];  // Added
    CGImageRef imageRef = [im CGImage];
    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef); 
```

等等

# python - html 格式的 matplotlib 文档

> ID：14428056
> 
> 赞同：4
> 
> 时间：2013-01-20T18:58:37.790
> 
> 标签：python, html, documentation, matplotlib, offline

我喜欢这个网址上的 matplotlib 文档，

[http://matplotlib.org/index.html](http://matplotlib.org/index.html)

但是当我的笔记本电脑离线（旅行等）时我无法访问它

谁能推荐一种下载matplotlib的html文档的方法？这对于 python 文档是可能的。

谢谢。账单

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:30:05.800

整个**matplotlib.org**网站存储在 github 存储库中。您可以从以下位置下载整个内容：

[https://github.com/matplotlib/matplotlib.github.com](https://github.com/matplotlib/matplotlib.github.com)

（直接压缩链接：[https](https://github.com/matplotlib/matplotlib.github.com/archive/master.zip) ://github.com/matplotlib/matplotlib.github.com/archive/master.zip ）

结果可能是一个相当大的 zip 文件。或者，正如其他人所说，您可以通过以下方式自己构建文档：

[http://matplotlib.org/devel/documenting_mpl.html](http://matplotlib.org/devel/documenting_mpl.html)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T17:00:07.063

该文档以 PDF 格式提供，可从以下网址下载： http: [//matplotlib.org/Matplotlib.pdf](http://matplotlib.org/Matplotlib.pdf)

# c - 有效检查 Bitflag 不变量（可能的位旋转）

> ID：14428058
> 
> 赞同：1
> 
> 时间：2013-01-20T18:58:49.910
> 
> 标签：c, performance, bit-manipulation, bitflags

我有一个`byte`用来存储位标志的。我有 8 个标志（每个位一个），可以分为 2 个标志的 4 对，它们是互斥的。我按以下方式排列了位标志：

```
ABCDEFGH
10011000 
```

标志 A 不能设置，而标志 B 也已设置，反之亦然，因此标志 A 和 B 是互斥的。*标志 A 和 B 都可以取消设置，但不能同时设置。*旗标 C 和 D、旗标 E 和 F 以及旗标 G 和 H 的规则相同。

**当前测试用例（在 C 中）：**

```
#include <stdio.h>

int check(char b) { // used to check invariant
  return ((b&0xC0)==0xC0||(b&0x30)==0x30||(b&0x0C)==0x0C||(b&0x03)==0x03)?0:1;
}
int main() {
  char input[256] = {
  0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,
  0x10,0x11,0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,
  0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,0x2d,0x2e,0x2f,
  0x30,0x31,0x32,0x33,0x34,0x35,0x36,0x37,0x38,0x39,0x3a,0x3b,0x3c,0x3d,0x3e,0x3f,
  0x40,0x41,0x42,0x43,0x44,0x45,0x46,0x47,0x48,0x49,0x4a,0x4b,0x4c,0x4d,0x4e,0x4f,
  0x50,0x51,0x52,0x53,0x54,0x55,0x56,0x57,0x58,0x59,0x5a,0x5b,0x5c,0x5d,0x5e,0x5f,
  0x60,0x61,0x62,0x63,0x64,0x65,0x66,0x67,0x68,0x69,0x6a,0x6b,0x6c,0x6d,0x6e,0x6f,
  0x70,0x71,0x72,0x73,0x74,0x75,0x76,0x77,0x78,0x79,0x7a,0x7b,0x7c,0x7d,0x7e,0x7f,
  0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8a,0x8b,0x8c,0x8d,0x8e,0x8f,
  0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9a,0x9b,0x9c,0x9d,0x9e,0x9f,
  0xa0,0xa1,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,0xa8,0xa9,0xaa,0xab,0xac,0xad,0xae,0xaf,
  0xb0,0xb1,0xb2,0xb3,0xb4,0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xbb,0xbc,0xbd,0xbe,0xbf,
  0xc0,0xc1,0xc2,0xc3,0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xcb,0xcc,0xcd,0xce,0xcf,
  0xd0,0xd1,0xd2,0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xdb,0xdc,0xdd,0xde,0xdf,
  0xe0,0xe1,0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,0xeb,0xec,0xed,0xee,0xef,
  0xf0,0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,0xf9,0xfa,0xfb,0xfc,0xfd,0xfe,0xff};

  char truth[256] = {
  1,1,1,0,1,1,1,0,1,1,1,0,0,0,0,0,
  1,1,1,0,1,1,1,0,1,1,1,0,0,0,0,0,
  1,1,1,0,1,1,1,0,1,1,1,0,0,0,0,0,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  1,1,1,0,1,1,1,0,1,1,1,0,0,0,0,0,
  1,1,1,0,1,1,1,0,1,1,1,0,0,0,0,0,
  1,1,1,0,1,1,1,0,1,1,1,0,0,0,0,0,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  1,1,1,0,1,1,1,0,1,1,1,0,0,0,0,0,
  1,1,1,0,1,1,1,0,1,1,1,0,0,0,0,0,
  1,1,1,0,1,1,1,0,1,1,1,0,0,0,0,0,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

  int i,r;
  int f = 0;
  for(i=0; i<256; ++i) {
    r=check(input[i]);
    if(r != truth[i]) {
      printf("failed %d : 0x%x : %d\n",i,0x000000FF & ((int)input[i]),r);
      f += 1;
    }
  }
  if(!f) { printf("passed all\n");  }
  else   { printf("failed %d\n",f); }
  return 0;
} 
```

上面的`check()`方法目前通过了所有的测试用例。我想知道是否有一种更有效的方法来检查这个不变量是否正确，使用一些比特旋转黑客。我可能必须每秒多次检查这个不变量，所以效率很重要。如果新的安排允许一些原始安排没有的小玩意儿，我愿意改变旗帜的安排。

置换 EX：`ABCDEFGH`-->`AHBGCFDE`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T19:08:03.183

我没有对此进行分析，所以没有承诺，但你可以尝试：

```
int check(char b)
{
    return ! ( (b << 1) & b & 0xaa );
} 
```

`!`如果您接受非零（不仅仅是 1）作为失败，并且接受零作为通过，您可以取消反转。

或者，您可以只使用已经生成的查找表：

```
int check(char b)
{
    return truth[(unsigned char)b];
} 
```

无论您尝试什么，请配置文件！

（哦，我建议使用无符号字符而不是有符号字符来存储这样的位字段，因为对于位移和布尔值之类的行为可以更好地定义。大多数编译器可能会按照您的期望进行，但更安全比对不起）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:08:23.480

您基本上有四个三态值：设置了选项 1，或者设置了选项 2，或者两者都不设置。您可能需要考虑在结构中使用位字段来显式获取两位的无符号整数来跟踪这些三态：

```
struct Flags {
    unsigned opt1: 2;
    unsigned opt2: 2;
    unsigned opt3: 2;
    unsigned opt4: 2;
};
const unsigned NEITHER = 0;
const unsigned FIRSTOPT = 1;
const unsigned SECONDOPT = 2;
const unsigned INVALIDOPT = 3; 
```

使用此设置，您的问题归结为检查所有四个字段是否不等于 INVALIDOPT。因此，您的检查功能可能是

```
bool IsValid(struct Flags flags) {
    return flags.opt1 != INVALIDOPT &&
           flags.opt2 != INVALIDOPT &&
           flags.opt3 != INVALIDOPT &&
           flags.opt4 != INVALIDOPT;
} 
```

这也意味着，您可以使用命名常量进行正常的变量读取和写入，而不是使用旋转位来设置选择哪个选项。它应该更容易，更安全。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:08:08.987

首先要防止它：

```
#define NONE_SET 0 // 00
#define FIRST_SET 1 // 10
#define SECOND_SET 2 // 01

int magic(int AB, int CD, int EF, int GH) {
  return (((AB*3+CD)*3+EF)*3+GH)*3
} 
```

更好的是，使用 an`enum`而不是`#define`s

示例调用（例如 ABCDEFGH=10000100）

```
int magic_number = magic(FIRST_SET, NONE_SET, SECOND_SET, NONE_SET); 
```

没有一点玩弄，只是一些乘法。（这显然可以自动化）

如果您只想检查一个字节中的位对是否都未设置：

```
uint8_t in; // the input byte
uint8_t out = in & (in >> 1) & 0x55; 
// if out != 0, the invariant is violated 
```

注意：0x55 是二进制的 01010101（即我们屏蔽了相邻的 BC 对，只留下 AB 和 CD 之类的对）

# java - 需要休眠映射吗？

> ID：14428059
> 
> 赞同：1
> 
> 时间：2013-01-20T18:59:02.860
> 
> 标签：java, hibernate, hibernate-mapping

我是 Hibernate 的新手，我下载了一个示例 Java 应用程序并将其修改为更有用，到目前为止，在我的应用程序中，我有两个在我的 Java 应用程序中定义的数据库类：Actor.java 和 City.java 他们每个都有.hbm.xml 文件如下所示：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Jun 17, 2009 11:42:48 AM by Hibernate Tools 3.2.1.GA -->
<hibernate-mapping>
    <class name="sakila.entity.Actor" table="actor" catalog="sakila">
        <id name="actorId" type="java.lang.Short">
            <column name="actor_id" />
            <generator class="identity" />
        </id>
        <property name="firstName" type="string">
            <column name="first_name" length="45" not-null="true" />
        </property>
        <property name="lastName" type="string">
            <column name="last_name" length="45" not-null="true" />
        </property>
        <property name="lastUpdate" type="timestamp">
            <column name="last_update" length="19" not-null="true" />
        </property>
    </class>
</hibernate-mapping> 
```

```
<hibernate-mapping>
    <class name="sakila.entity.City" table="city" catalog="sakila">
        <id name="cityId" type="java.lang.Short">
            <column name="city_id" />
            <generator class="identity" />
        </id>
        <property name="city" type="string">
            <column name="city" length="45" not-null="true" />
        </property>
        <property name="countryId" type="string">
            <column name="country_Id" length="45" not-null="true" />
        </property>
        <property name="lastUpdate" type="timestamp">
            <column name="last_update" length="19" not-null="true" />
        </property>
    </class>
</hibernate-mapping> 
```

到目前为止，该应用程序运行良好。但我的问题是，如果我需要更改我的应用程序以便它可以处理数据库中的数百个对象，如 Actor 和 City，我是否需要定义所有映射文件？如果我在编程时不知道用户可能会查询哪些数据库对象，我是否需要定义所有这些对象，这似乎是不可能的，所以我的问题是：*.hbm.xml 文件是否必要？如果我需要编写一个应用程序，让用户查询他需要的任何对象，我什至可能不知道数据库中有什么，如何编写这样的应用程序？可以用休眠吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T05:03:12.380

Frank *.hbm.xml 文件不是必需的。Hibernate 注释是在不使用 XML 文件的情况下定义映射的最新方法。您可以使用注释作为 XML 映射元数据的补充或替代。在你的情况下，

```
@Entity
@Table(name ="actor")
public Class Actor
{
    @Column(name = "actor_id")
    private Short actorId;

    @Column(name = "first_name")
    private String firstName;

    @Column(name = "last_name")
    private String lastName;

    @Column(name = "last_update")
    private Timestamp lastUpdate;
}

@Entity
@Table(name ="city")
public Class City
{
    @Column(name = "city_id")
    private Short cityId;

    @Column(name = "city")
    private String city;

    @Column(name = "country_Id")
    private String countryId;

    @Column(name = "last_update")
    private Timestamp lastUpdate;
} 
```

Hibernate Annotation 将元数据与代码一起放入 POJO java 文件中，这有助于用户在开发过程中同时理解表结构和 POJO

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T03:23:35.123

如果您的系统是如此动态以至于您不知道用户将要查询的表，那么我看不到您将如何将这些表映射到相应的 POJO。Hibernate 的主要重点是将架构中的表映射到 Java 应用程序中的对象，主要是通过 Hibernate 查询语言 (HQL) 或可用的编程 API 之一。

但是，可以在 hibernate 中直接使用 SQL 并返回非托管对象，尽管这比使用 HQL 或查询 API 的能力要有限得多。为此，您将使用类似于以下的代码：

```
createSQLQuery( "SELECT * FROM someTable" ).addTransformer(Transformers.aliasToBean(MyJavaClass.class)); 
```

此转换器按名称将 SQL 查询中的列映射到指定 POJO 的属性。在实践中，类型转换具有挑战性，并且在许多情况下都需要 .setScalar。您还可以使用 Transformers.aliasToEntityMap 返回一个映射列表，其中每个映射是列名到值的映射。

当前 Hibernate Core 文档的第 18.1.5 节简要介绍了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T06:00:01.547

如果您需要查询数据库，我假设您知道要查找哪些表。Netbeans 会自动为我们创建所有 .hbm 和 .java 文件。查看链接 - [http://netbeans.org/kb/docs/web/hibernate-webapp.html#05](http://netbeans.org/kb/docs/web/hibernate-webapp.html#05)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T19:13:01.663

好吧，您想要与 Hibernate 一起使用的数据库中的每个表都需要在应用程序端定义实体。您可以通过 xml 配置文件或使用注释来定义此实体（我强烈建议，它更“用户友好”）。所以这基本上是你需要维持的 1:1 关系。

# javascript - 一个表单可以有多个 onsubmit() 吗？

> ID：14428063
> 
> 赞同：2
> 
> 时间：2013-01-20T18:59:41.430
> 
> 标签：javascript

我有一个表单可以发布到它所在的页面，我想使用一些 javascript 来使页面在表单提交时保持其滚动位置。我有使用 onsubmit 的脚本，但我已经有另一个使用它的脚本。

是否可以将 onsubmit() 用于多个脚本，例如..

```
onsubmit="return validateForm(), return saveScroll()" 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T19:02:31.597

或者你可以做

`onsubmit="validateForm();saveScroll(); return false;"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T19:02:35.880

您可以简单地调用两者：

```
onsubmit="return validateForm() && saveScroll()" 
```

仅当两个函数都返回 true 时，才使用`&&`表单提交。您可以使用其他逻辑运算符来获得所需的返回值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T19:01:00.337

您可以从第一个函数调用您想要的任何其他函数

例如。来电`saveScroll()`_`validateForm()`

或者您可以简单地将调用分开 a`;`然后两者都将被执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T19:03:19.780

一个表单只能有一个`onsubmit`属性。

该属性的值是函数的主体，因此如果您从其中的一条语句返回，那么您将结束该函数，而不是继续执行下一条语句。

`onsubmit`因此，要使用属性运行这两个函数：

```
onsubmit="validateForm(); return saveScroll()" 
```

您可能希望根据对函数调用的反应方式来更改那里的逻辑。如果返回值`validateForm`很重要，那么你应该对它做点什么。

# php - 如何在 URL 中使用带有非英文符号的 file_get_contents()？

> ID：14428064
> 
> 赞同：4
> 
> 时间：2013-01-20T18:59:51.377
> 
> 标签：php, url, unicode, file-get-contents

当我尝试使用 PHP 的`file_get_contents()`函数访问非英语 (Unicode) URL 时出现此错误。网址是： http: [//ml.wikipedia.org/wiki/%E0%B4%B2%E0%B4%AF%E0%B4%A3%E0%B5%BD_%E0%B4%AE%E0%B5 %86%E0%B4%B8%E0%B5%8D%E0%B4%B8%E0%B4%BF](http://ml.wikipedia.org/wiki/%E0%B4%B2%E0%B4%AF%E0%B4%A3%E0%B5%BD_%E0%B4%AE%E0%B5%86%E0%B4%B8%E0%B5%8D%E0%B4%B8%E0%B4%BF)

我有这个错误：

> 警告：file_get_contents(http://ml.wikipedia.org/wiki/%E0%B4%B2%E0%B4%AF%E0%B4%A3%E0%B5%BD_%E0%B4%AE%E0%B5 %86%E0%B4%B8%E0%B5%8D%E0%B4%B8%E0%B4%BF) [function.file-get-contents]：打开流失败：HTTP 请求失败！HTTP/1.0 403 禁止..
> 
> 致命错误：在第 8 行的 G:\xampp\htdocs\codes\htmlParse1.php 中的非对象上调用成员函数 find()

功能有什么限制`file_get_contents()`吗？它只接受英文网址吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:09:27.450

您缺少诸如用户代理之类的标头信息。我建议你只使用 Just use`curl`

```
$url = 'http://ml.wikipedia.org/wiki/%E0%B4%B2%E0%B4%AF%E0%B4%A3%E0%B5%BD_%E0%B4%AE%E0%B5%86%E0%B4%B8%E0%B5%8D%E0%B4%B8%E0%B4%BF';
$ch = curl_init($url); // initialize curl handle
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17");
curl_setopt($ch, CURLOPT_REFERER, "http://ml.wikipedia.org");
curl_setopt($ch, CURLOPT_ENCODING, "UTF-8");
$data = curl_exec($ch);
print($data); 
```

[现场卷曲演示](http://codepad.viper-7.com/pHyKpN)

如果你必须使用`file_get_content`

```
$options = array(
        'http'=>array(
                'method'=>"GET",
                'header'=>"Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n" .
                "Cookie: centralnotice_bucket=0-4.2; clicktracking-session=M7EcNiC2Zcuko7exVGUvLfdwxzSK3Boap; narayam-scheme=ml\r\n" . 
                "User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17"
        )
);

$url = 'http://ml.wikipedia.org/wiki/%E0%B4%B2%E0%B4%AF%E0%B4%A3%E0%B5%BD_%E0%B4%AE%E0%B5%86%E0%B4%B8%E0%B5%8D%E0%B4%B8%E0%B4%BF';
$context = stream_context_create($options);
$file = file_get_contents($url, false, $context);
echo $file ; 
```

[直播 file_get_content 演示](http://codepad.viper-7.com/QMExaE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:25:11.183

如果有`403 Forbidden`，则连接应该有效。这只是一个警告，网络服务器以状态码 403 响应。维基百科拒绝在没有有效用户代理的情况下进行下载：

> 脚本应使用包含联系信息的用户代理字符串，否则它们可能会被 IP 阻止，恕不另行通知。

第二个错误应该来自处理`file_get_contents(...)`调用结果（字符串对象）的下一行。

**编辑：**您应该`ini_set('user_agent', 'wikiPHP');`在发出请求之前尝试使用例如设置您的用户代理。那应该可以正常工作。

# image - AS3 中的异步图像加载

> ID：14428067
> 
> 赞同：1
> 
> 时间：2013-01-20T19:00:14.227
> 
> 标签：image, actionscript-3, asynchronous

我知道图像将在 AS3 中异步加载，并且应该使用事件和事件侦听器来处理同步。

因此，在一个简单的情况下，它看起来像这样：

```
var loader : Loader = new Loader();
var im_file: URLRequest = new URLRequest ("imfile.png");
loader.load(im_file);
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loading_complete);

function loading_complete (e : Event) : void
{ // ... do smt with your loaded data // } 
```

我想要做的是有一个 PreLoader 类，它将预先加载我需要的所有图像。在这种情况下，我如何让所有其他类知道加载何时完成？

我要发送事件吗？在这种情况下，最佳做法是什么？

提前致谢，

普拉斯卡顿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:50:11.263

您很可能想要创建一个队列并将您的图像路径添加到队列中。然后在每个图像完成加载后，您继续到队列中的下一个项目。当所有图像都加载完毕后，你会发送一个 COMPLETE 事件或类似的东西来让你的应用知道它已经完成了。

检查[QueueLoader](http://code.google.com/p/queueloader-as3/)或[Casalib](http://casalib.org/)以了解它们如何实现单个或批量图像加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:50:42.853

除了@Boon 提供的答案之外，这就是您实际设置图像队列的方式。

首先，您需要一个列表来存储所有仍需要加载的图像。这使您可以轻松定义任意数量的图像。它可以是“队列”：

```
var queue:Array = [
    "http://interfacelift.com/wallpaper/previews/03177_orionnebulaintheinfrared@2x.jpg",
    "http://interfacelift.com/wallpaper/previews/03175_purpleclouds@2x.jpg",
    "http://interfacelift.com/wallpaper/previews/03173_goodmorning2013@2x.jpg"
]; 
```

接下来要做的是设置我所说的我们正在做的“核心”方法。它将处理加载下一个图像以及在队列为空时通知我们。它看起来像这样：

```
function loadNext():void
{
    if(queue.length > 0)
    {
        // Notice here that we use .pop() on the queue, which will select and
        // remove the last item from queue.
        var req:URLRequest = new URLRequest( queue.pop() );
        var photo:Loader = new Loader();

        photo.load(req);
        photo.contentLoaderInfo.addEventListener(Event.COMPLETE, loadComplete);
    }
    else
    {
        // The queue is finished - dispatch an event or whatever you fancy to
        // let the rest of the application know we're done here.
        trace("Queue finished.");
    }
} 
```

然后当然是我们的监听函数来处理加载图像的完成。请注意，我们在这里调用`loadNext()`- 这是仅在当前加载图像完成后才开始加载队列中下一个图像的关键。

```
function loadComplete(e:Event):void
{
    addChild(e.target.content as Bitmap);

    // Begin loading next image in the queue.
    loadNext();
} 
```

为了开始这个过程，我们当然只是使用它，如果队列为空，它将立即通知我们队列已完成，或者开始按顺序加载图像。

```
// Start loading the queue.
loadNext(); 
```

* * *

**补充/整理：**

如果您希望能够回收此代码或只是整理一下，您可以轻松地将其制作成一个类。可以调用该类`ImageQueue`，其结构将包含上述`queue`数组、`loadNext()`方法和`loadComplete()`方法。它还可以有一种`add()`方法，以一种更简洁的方式将图像最初添加到队列中。

这是该课程的基础，如果您有兴趣，可以完成：

```
public class ImageQueue
{

    private var _queue:Array = [];

    public function add(image:String):void{ }
    public function loadNext():void{ }

    private function _loadComplete(e:Event):void{ }

} 
```

# mysql - 非技术人员的 SQL 和 NoSQL 类比

> ID：14428069
> 
> 赞同：11
> 
> 时间：2013-01-20T19:00:17.540
> 
> 标签：mysql, sql, sql-server, mongodb, nosql

我正在使用第三个客户端，它将同时使用 SQL 和 NoSQL 解决方案（通常是 SQL Server 和 Mongo）。我与之合作的最后两个客户了解大量技术信息，因此关系数据库或文档存储之类的短语对他们来说很有意义。我倾向于将银行处理用作 SQL 示例，将博客存储用作 NoSQL 示例，到目前为止，这对我的客户来说是有意义的。当客户想到交易和“实时提要”等可能包含数十万个字符的示例时，他们有时可能更喜欢这两种解决方案。

另一个客户，他的业务很出色，但没有那种技术优势（他是一位杰出的有魅力的领导者，所以我绝不会贬低他，因为我们都有自己的长处）。我很好奇这里是否有人不得不从技术角度向不熟悉它们的人解释这些数据库概念，以及您使用什么类比来解释每个过程如何单独工作以及它们如何协同工作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-20T19:15:12.373

NoSQL（或无模式，或文档存储，或你有什么）数据库存储信息，就像你在书中的食谱一样。当你想知道如何做蛋糕时，你会去那个食谱，关于如何做蛋糕的*所有*信息（配料、准备、混合、烘焙、整理等）都在那一页上。

SQL 就像购买食谱的原料。为了将所有食材放入购物车，您必须前往许多不同的过道来获取每种食材。当您完成购物时，您的购物车将装满您必须跑来跑去收集的所有食材。

如果有一家商店是按食谱组织的，这样你可以去商店的一个地方，从那个地方拿走你需要的一切，那不是更好吗？当然，你会在 50 个不同的地方找到像鸡蛋这样的原料，所以在货架上放货时会有一些开销，但从消费者的角度来看，找到他们想要的东西要容易/快捷得多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-20T19:15:02.467

没有 noSQL 这样的东西。只有一大堆新的数据库技术具有完全不同的理念和用例，它们的共同点是它们与 SQL 数据库也有共同点。但是，当您真正要问的是“**我如何向非技术人员解释异构存储策略**”时，我会使用办公室的比喻。

你的办公室里堆满了各种信息的纸张。但是您不会以相同的方式存储它们：

*   有些存储在您的文件柜中
*   有些在你的桌子上
*   有些固定在您的针板上

你为什么这样做？因为每种信息都有不同的访问特性。您的插板充满了您需要快速访问的数据（例如 memcached）。您的橱柜充满了您很少查看或更改的数据，但这些数据在未来的某个时候可能会变得非常重要。它也非常有组织地优化搜索（如关系数据库）。您的办公桌上堆满了您当前需要快速访问的数据。没有太多的顺序，因为你办公桌上的东西的严格顺序会抑制你的工作效率（比如文件存储）。

就像您为办公室中的每种数据选择不同的存储方式一样，我们对计算机系统中的每种信息使用不同的存储方式。

# php - 使用学说 2 和代码点火器 2 保存实体的正确方法是什么

> ID：14428076
> 
> 赞同：0
> 
> 时间：2013-01-20T19:00:53.877
> 
> 标签：php, doctrine-orm, codeigniter-2

我是否在控制器中创建一个新实体并使用我在 $POST 上收到的内容设置所有字段，或者有自动执行此操作的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:03:47.433

您的帖子信息有点稀缺，但通常，是的，您必须隐式创建一个新实体

```
$entity = new Entity;
$entity->setFoo($bar);
$this->entityManager->persist($entity);
$this->entityManager->flush(); 
```

# php - 在 iframe 中获取 php 文件

> ID：14428079
> 
> 赞同：0
> 
> 时间：2013-01-20T19:01:01.153
> 
> 标签：php, iframe

我有两个文件，其中一个`index.php`包含一个提交给 abc.php 的表单。现在的问题是有一个框架，`index.php`我想在其中显示提交表单后得到的数据`abc.php`。我试过但我不能it.Hope 我已经提到了所有需要的东西。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:46:09.430

设置表单的目标（[phpfiddle demo](http://phpfiddle.org/main/code/nm1-0hz)）：

```
<?php
if(!empty($_POST['submit_to_frame']))
{
    echo htmlspecialchars($_POST['the_data']);
}
else
{
?>
<iframe id="the_frame" name="the_frame"></iframe>
<form method="POST" target="the_frame">
    <input type="hidden" name="submit_to_frame" value="true" />
    <input type="text" name="the_data"/>
    <input type="submit" value="OK">
</form>
<?php
}
?> 
```

# asp.net - IEnumerable 不能与类型参数一起使用

> ID：14428084
> 
> 赞同：28
> 
> 时间：2013-01-20T19:01:11.710
> 
> 标签：asp.net, linq

我想使用数据列表来显示用户名下方的每个评论的用户名及其评论和附件。

我有一个`ReviewList`用于显示评论的用户控件`efiles`。但我在这一行（s.tblDraft.Comments）有错误，下面有一个错误：

```
The non-generic type 'System.Collections.IEnumerable' cannot be used with type arguments 
```

请帮忙。问题是什么？

```
private void Displayuser()
{
    var reviews =
      (from s in _DataContext.tblSends
       from u in _DataContext.Users

       where (s.DraftId == _Draftid) && (s.ToEmailId == u.ID)
       orderby u.Name
       select new
{
    userid = u.ID,
    username = u.Name,
    comments =s.tblDraft.Comments,
    w = s.tblDraft.Comments.SelectMany(q => q.CommentAttaches)

}).Distinct();

    DataList1.DataSource = reviews;
    DataList1.DataBind();

    var theReview = reviews.Single();

    DisplayReviews(theReview.comments, theReview.w);
}

private void DisplayReviews(IEnumerable<Comment> comments,
     IEnumerable<CommentAttach> w)
{
    ReviewList reviewList = (ReviewList)DataList1.FindControl("ReviewList1");
    reviewList.Comments = comments;
    reviewList.CommentAttachs = w;
    reviewList.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-20T19:04:06.860

编译器看到的类型[`System.Collections.IEnumerable`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)是非通用 IEnumerable。您导入了该命名空间，因此这是编译器认为您正在尝试使用的类型。

您尝试使用的类型是[`System.Collections.Generic.IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx). 添加该名称空间的导入，并且应该编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-02-20T14:10:28.700

您需要添加命名空间的导入：

```
using System.Collections.Generic; 
```

# ios - iOS - 检查粘贴板是否有有效的邮寄地址

> ID：14428088
> 
> 赞同：1
> 
> 时间：2013-01-20T19:01:43.323
> 
> 标签：ios, street-address, mailing, pasteboard

我正在寻找一些关于如何在 iOS 中检查粘贴板以获取有效邮寄地址的指导。

如果有人贴

> ```
> 1234 Apple Street
> New York, NY 10011 
> ```

它解析字符串的每个部分以填写地址、城市、州和邮编。它可以是任何地址，如果它可以在更长的字符串中找到，那将是理想的。

例如

> ```
> Meet me at 1234 Apple Street New York, NY 10011 See you there! 
> ```

仍然会解析正确的地址、城市、州和邮编。

任何帮助将非常感激！

-韦斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T03:15:12.313

我是 SmartyStreets 的一名开发人员。我们对街道地址有点疯狂，街道地址让我发疯（*尤其是*解析它们）。这是一条双向的街道。（我完成了街头双关语吗？）

首先，让我们谈谈地址本身的情况，因为这更容易，尽管仍然很困难......

请参考[this other question and answer](https://stackoverflow.com/questions/11160192/how-to-parse-freeform-street-postal-address-into-components) about the very same thing。我也强烈建议您关注问题和答案中相关问题的链接。解析地址是一罐蠕虫，但这并非不可能。可靠地做到这一点真的*很难。*

请注意该问题的答案中可以出现多少种不同格式的有效地址。您有什么保证用户会在其中*任何*一种格式中键入它？而这只是少数。还有其他的。考虑军事、邮政信箱、乡村路线和其他不符合典型格式的“特殊”地址。有两个或三个单词城市名称的地址呢？使用网格系统（如 100 N 500 E）或次要号码（如套房、公寓、楼层等）的地址呢？带有“1/2”、连字符（作为必需的标点符号）等的地址呢？地址缺少邮政编码或城市/州？

所有这些以及更多可能都是有效的。这仅适用于美国地址。

如果您的所有地址，甚至大多数地址（不是这种情况）都以您上面建议的形式出现，例如：

> [主要号码] [街道名称] [[任何这些街道后缀](http://pe.usps.com/text/pub28/28apc_002.htm)]
> 
> [城市名称，后跟逗号]，[州缩写] [5位邮政编码]

那么这将非常容易。那不是很好吗？

您可以尝试编写一个像[this guy](https://stackoverflow.com/questions/1962376/extract-address-from-string-in-php-with-regex)或[that guy](http://usaddress.codeplex.com/SourceControl/changeset/view/8750#159596)这样的正则表达式，但这只有在地址是正则语言时才有效。它们不是正则的，[正则表达式也不是答案](http://smartystreets.com/how-to/regex-street-address)。

有一些服务可以为您做到这一点，因为它们有一个主列表（种类），并且软件必须符合严格的认证标准。

显然，由于我在 SmartyStreets 工作，我倾向于建议您从那里开始寻找答案。您可以在主页上尝试一些自由格式的地址（只需填写“街道”字段）。[但请注意一些可能永远是个问题的事情。](http://smartystreets.com/kb/faq/parse-and-verify-freeform-street-addresses)大多数时候，LiveAddress API 将能够为您解析街道地址。货比三家，但这应该给你一个想法。

现在您的第二个问题：从文本字符串中提取街道地址。这已在 SO 和互联网的其他地方广泛介绍，因此我不会详细介绍。基本上，要可靠地做到这一点，您可能需要一些自然语言处理和人工交互来确认或纠正最佳猜测。

永远不要假设这些关于非标准化地址的事情：

*   以数字开头
*   以数字结尾
*   两个数字之间的一切都是地址
*   有邮政编码
*   一个地址中不超过 2 个数字
*   这是明确的
*   它存在
*   街道后缀将始终存在
*   它拼写正确
*   ...ETC。

同样，请参阅有关此问题的其他一些链接帖子。你可以做出猜测，但如果你这样做，总是总是有人来确认猜测。（一些 Mac 应用程序会这样做。如果他们检测到一个地址，它会突出显示，您可以将该地址添加到您的联系人中。不幸的是，我看到了很多误报，它也错过了很多。）

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T02:46:30.840

我也在 SmartyStreets 工作，由于我不是开发人员，因此我不受任何约束，例如“无法完成”或“无法可靠地完成”。事实上，我提出的想法甚至可能并不总是可能的，但是，我是一个解决问题的人，一个寻找解决方案的人，这个特定的问题绝对有解决方案。

您将需要以下内容：一点正则表达式、脚本语言知识（python、php，无论您喜欢什么）和访问地址验证工具（这是必需的，以便您知道什么时候做对了）。

那么，让我们从例句开始：

**在 1234 Apple Street New York, NY 10011 见！**

我们可以确定每个地址都有开始和结束。（你可以把它交给银行！）

因此，如果您运行一个正则表达式来查找字符串中地址的开头，您可以在地址开始之前消除所有内容。这是一个可以做到这一点的正则表达式：

```
(^(.*(?=p\.?o\.? box|h\.?c\.?r\.? |c\.?m\.?r\.?)|^[^0-9]+)) 
```

这将为您返回以下内容：

**1234 Apple Street New York, NY 10011 见！**

现在，您已经完成了一半，但您需要遍历剩余的字符串。您当然可以做出的另一个假设是，地址的长度永远不会超过 328 个字符（我编了这个数字，但您明白了。地址也必须有结尾，您可以通过确定最大可接受的 USPS 地址长度。）

您将遍历地址字符串，直到从中获得有效地址。为此，请从头开始，每增加一个排列，就向右移动一个单词。这就是地址验证服务派上用场的地方，因为您不知道地址在哪里结束，而这正是您需要知道的。因此，您从字符串生成的每个排列（请记住，您从左侧开始）将被发送以进行验证。由于任何有效地址都不能少于两个单词，因此您将从那里开始。以下是示例地址的排列以及验证结果（我正在尝试通过在 smartystreets.com 上地址搜索框的地址行中输入每个地址：

第1234章

苹果街 1234 号 ==> 失败

1234 Apple Street New ==> 失败

纽约苹果街 1234 号 ==> 失败

1234 Apple Street New York, NY ==> Bingo，有效地址匹配。无需继续迭代。

现在，显然这不是一个有效的地址，但你可以用一个真实的地址尝试同样的事情，你会得到相同的结果。显然，这不是从字符串中提取有效地址的最复杂的方法，但它确实有效。而且，由于 SmartyStreets 允许您每次查询最多发送 100 个地址，您可以将地址字符串排列多达 99 次，并在 300 毫秒内返回结果。正如您肯定会发现的那样，这不适用于每个地址，但它可以很容易地处理其中的大部分，无论地址在文本字符串中的模糊程度如何。

所以，我们开始**在 1234 Apple Street New York, NY 10011 与我见面！**并在不到半秒钟的时间内想出了这个**1234 Apple Street New York, NY 10011-1000**。

很酷吧？来自非程序员的声音甚至听起来很容易。

* * *

让我们用一个真实的地址试试：

在 4219 jon young orlando fl 32839 与我见面！

应用正则表达式，你会得到：

4219 乔恩·杨奥兰多佛罗里达州 32839 见！

置换、迭代、验证：

第4219章 ==>失败

第4219章

第4219章

4219 jon young orlando fl ==> Bingo，有效地址匹配。

![地址输入字段](../Images/0a971c383493dd8267688a97e6dab9e0.png) ![生成的地址数据](../Images/59c3234b63ddc0e550eb34737b58fc1b.png)

# c++ - 不能调用其他类的方法？

> ID：14428089
> 
> 赞同：0
> 
> 时间：2013-01-20T19:01:44.850
> 
> 标签：c++, .net, visual-c++

我有一个只是方法的头文件，一个实现这些方法的第二个 C++ 文件，以及我想从第二个 C++ 文件调用方法的第三个主文件。

我已经显示了注释出现在哪些行上。

**Root.h**文件（只是方法）：

```
class Root
{
    //File
    public: void NewFile(void);
    public: void OpenFile(void);
    public: void SaveFile(void);
    public: void SaveAsFile(void);
    public: void Print(void);
    public: void Exit(void);

    //Edit
    public: void Undo(void);
    public: void Redo(void);
    public: void Cut(void);
    public: void Copy(void);
    public: void Paste(void);
    public: void SelectAll(void);

    //Tools
    public: void Options(void);

    //Help
    public: void About(void);
}; 
```

**根.cpp**

```
#include "stdafx.h"
#include "Root.h"

using namespace System::Windows::Forms;
using namespace System::IO;

class Nroot : public Root
{
    void OpenFile()
    {
        OpenFileDialog^ opf = gcnew OpenFileDialog();
        opf->InitialDirectory = "C://";
        opf->Filter = "Text Files|*.txt";
        if(opf->ShowDialog() == DialogResult::OK) //here is first error C3063: operator '==':  all operands must have the same enumeration type 
        {
            StreamReader^ sr = gcnew StreamReader(opf->FileName);
            MessageBox::Show(sr->ReadToEnd());
        }
    }
}; 
```

**主文件**（只是事件）

```
private: System::Void openToolStripMenuItem_Click(System::Object^  sender, System::EventArgs^  e) {
    Nroot nr;
    nr.OpenFile; //here is second error C3867: 'WindowsFormsApplication2::Nroot::OpenFile': function call missing argument list; use '&WindowsFormsApplication2::Nroot::OpenFile' to create a pointer to member c:\users\srdjan\documents\visual studio 2012\projects\windowsformsapplication2\windowsformsapplication2\Form1.h 325
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:24:17.487

1.  看起来`DialogResult::OK`枚举值的定义不同，然后在一个地方，所以你必须使用值的完整路径：`::System::Windows::Forms::DialogResult::OK`。至少 MSDN 示例[是这样做的](http://msdn.microsoft.com/ru-ru/library/e61ft40c.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-2)：

    ```
    if(opf->ShowDialog() == ::System::Windows::Forms::DialogResult::OK) 
    ```

2.  你忘记了括号：

    ```
    nr.OpenFile();
               ^^ 
    ```

3.  要`Nroot::OpenFile()`在课堂外访问，您应该将其设为`public`. 在`c++`中，私有访问修饰符默认应用于成员：

    ```
    class Nroot : public Root
    {
    public:
        void OpenFile()
    //... 
    ```

# php - 如何获取 3,200 条推文（Twitter API 1.1）

> ID：14428091
> 
> 赞同：5
> 
> 时间：2013-01-20T19:01:56.020
> 
> 标签：php, curl, twitter, twitter-oauth

经过大量的反复试验，我终于设法使用 Twitter 的新 API（1.1 版）获取推文。我正在使用 PHP TwitterOauth 库。尽管我能够获取推文，但有两件事我不明白。

1.  statuses/user_timeline 的限制是 200 条推文。如何遍历结果以获取最大数量的 3,200 条推文？我读过一些关于发出多个 GET 请求的内容，但我不知道该怎么做。

2.  似乎获取的推文数量是随机变化的，实际上很少达到参数“count”中指定的数量。这是为什么？

我的应用程序只是让访问者输入用户名并获取该用户的推文。这是我的代码。

```
if (isset($_GET['user'])) {
   $user = $_GET['user'];
   $content = $connection->get("statuses/user_timeline", array('count' => 200, 'exclude_replies' => true, 'screen_name' => $user));?>

   $j = 0;
   foreach ($content as $tweet) {
      echo $j.' '.$tweet->text. '<br />';
      $j++;
   } 
} 
```

更新：在尝试了下面的 queremys 建议后，我想出了一个看起来非常难看的“解决方案”，它有几个主要缺点。至少它显示了最多 3,200 条推文（和一些重复）。如果相关 Twitter 帐户的推文少于 3,200 条，结果会看起来很奇怪。无论如何，只是想如果它可以激发灵感，我会分享它。

```
if (isset($_GET['user'])) {
    $user = $_GET['user'];

    $content = $connection->get('statuses/user_timeline', array(
    'count' => 200, 'exclude_replies' => true, 'screen_name' => $user, 'include_rts' => 1
));

    $x = 0;
    while ($x < 15) {
        $text = array();

        foreach ($content as $tweet) {
            $text[] = $tweet->id_str;
            echo $tweet->text.'<br />';
        }

        $last_tweet = end($text);

        $content = $connection->get('statuses/user_timeline', array(
    'count' => 200, 'exclude_replies' => true, 'screen_name' => $user, 'include_rts' => 1, 'max_id' => $last_tweet
));
        foreach ($content as $tweet) {
            echo $tweet->text.'<br />';
        }
        $x++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:05:41.600

它可能有点贵，但我认为可能（你可以测试类似的东西）；

```
$contents = array();
$limit = 3200;
$max_id = null;
for ($count = 200; $count < $limit; $count += 200) {
    if (null !== $max_id && $max_id == '') {
        break;
    }

    $content = $connection->get('statuses/user_timeline', array(
        'count' => $count, 'exclude_replies' => true, 'screen_name' => $user,
        'max_id' => $max_id
    ));
    $contents[] = $content;
    // this indicates the last index of $content array
    $max_id = $content[count($content) - 1]->id_str;
} 
```

更新！

您需要 make`$max_id`来继续循环，并且需要`$max_id`NULL 来中断循环。

```
// option 1, makes $max_id NULL silently
@ $max_id = $content[count($content) - 1]->id_str;

// option 2, search for last index of array
if (count($content)) {
    $last_tweet = end($content);
    $max_id = $last_tweet->id_str;
} else $max_id = null; 
```

# matlab - 以编程方式在绘图上显示数据提示

> ID：14428092
> 
> 赞同：1
> 
> 时间：2013-01-20T19:02:00.370
> 
> 标签：matlab, plot, tooltip

如何在 matlab 绘图上以编程方式显示**数据提示消息**，只需单击鼠标，而不使用`Data Cursor`，以在不同位置显示自定义消息，如下所示：

![数据光标](../Images/98f8859b4a8ce11150a7bf6f7931ee31.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-10T15:12:57.190

“你不能。” 从功能[帮助页面](http://www.mathworks.com/help/matlab/ref/datacursormode.html)的“提示”部分`datacursormode`：

> 您只能通过单击图表上的数据对象来放置数据提示。您不能以编程方式放置它们（通过执行代码来定位数据游标）。

但是人们确实通过黑客来实现这一点，就像[这里](http://undocumentedmatlab.com/blog/controlling-plot-data-tips)一样。他们正在做的事情的简短版本是

```
h = ezplot('sin(x)')
cursorMode = datacursormode(gcf);
hDatatip = cursorMode.createDatatip(h); 
```

# actionscript-3 - 停止对象时间线循环

> ID：14428093
> 
> 赞同：0
> 
> 时间：2013-01-20T19:02:01.347
> 
> 标签：actionscript-3

我有一部电影有几个movieClips。其中一个movieClips 有一个带有补间动画的时间线。我创建了这个movieClip的一个实例：

```
var board:Board = new Board(); 
```

并用于`board.gotoAndStop(1);` 防止影片剪辑在影片开头播放。

一个 eventListener 检查看板何时与某物发生碰撞；当它这样做时，会调用一个函数，用于`board.gotoAndPlay(2)`使板子的时间线继续运行。

我希望该时间线上的播放头在动作结束时停止，而不是循环播放。我试图`stop()`在该时间线的最后一帧上放置一个，但 Flash 告诉我我不能对一个对象放置一个动作。

你能帮我解决这个问题吗？

非常非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T09:04:37.527

确保选择要添加操作的单个框架，然后添加代码

```
stop(); 
```

使时间线停止循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:04:32.880

如果没记错的话，您需要确保您已单击时间轴中的帧，因此选择的是帧，而不是舞台上的对象。然后输入您的动作脚本。

# css - div的多个ID在css中不起作用

> ID：14428094
> 
> 赞同：0
> 
> 时间：2013-01-20T19:02:21.533
> 
> 标签：css

我有以下CSS：

```
 #form1,#form2,#form3,#form5,#form6,#form7,#form8 div{
    padding:10px;
    border:1px solid blue;
    background-color: grey;
    font-family:"lucida grande",tahoma,sans-serif;
  } 
```

由于某种原因，最后一个 id 没有得到样式。（即#form8 没有得到样式）。

如果我像这样切换css（不更改任何html代码）：

```
#form1,#form2,#form3,#form5,#form8,#form6,#form7 div{ 
```

现在#form7 没有样式。

请问我的结构编码错误吗？它很奇怪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T19:07:04.853

这可能是 HTML 标记问题。你能提供吗？

一个疯狂的猜测是你的代码看起来像：

```
<div id="form8">
...
</div> 
```

CSS 选择器的最后一部分（#form8 div）实际上是针对如下标记：

```
<div id="form8">
  <div>
  ...
  </div>
</div> 
```

这是一个元建议：如果您的选择器列表很长并且显然针对相同类型的元素（表单），请**使用类**！

```
.form{
padding:10px;
border:1px solid blue;
background-color: grey;
font-family:"lucida grande",tahoma,sans-serif;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T19:04:38.607

似乎您的目标是 div#form1, div#form2 ...等等...您可以跳过为选择器编写 div 。尝试这个

```
#form1, #form2, #form3, #form5, #form6, #form7, #form8 {
    padding:10px;
    border:1px solid blue;
    background-color: grey;
    font-family:"lucida grande",tahoma,sans-serif;
} 
```

甚至更好......给他们所有人一个类名，比如`<form class="myform" id="whatever"></form>`并使用：

```
.myform {
    padding:10px;
    border:1px solid blue;
    background-color: grey;
    font-family:"lucida grande",tahoma,sans-serif;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:08:31.200

你应该只使用 `#form1,#form2,#form3,#form5,#form6,#form7,#form8`

`#foem8 div``div`用 this指代元素的所有子元素`#foem8`

# php - 使用 sqlite / PHP 获取两个不同行/列中两个数字的方差和标准差

> ID：14428095
> 
> 赞同：6
> 
> 时间：2013-01-20T19:02:25.640
> 
> 标签：php, sql, sqlite, variance

我有一个具有以下结构的 SQLite 数据库：

```
rowid       ID                  startTimestamp   endTimestamp   subject
1           00:50:c2:63:10:1a   1000             1090           entrance
2           00:50:c2:63:10:1a   1100             1270           entrance
3           00:50:c2:63:10:1a   1300             1310           door1
4           00:50:c2:63:10:1a   1370             1400           entrance
.
.
. 
```

我在这里准备了一个 sqlfiddle：[http ://sqlfiddle.com/#!2/fe8c6/2](http://sqlfiddle.com/#!2/fe8c6/2)

使用此 SQL 查询，我可以获得一行和下一行之间 endTime 和 startTime 之间的平均差异，按主题和 ID 排序：

```
SELECT
    id,
    ( MAX(endtimestamp) - MIN(startTimestamp)
    - SUM(endtimestamp-startTimestamp)
    ) / (COUNT(*)-1) AS averageDifference
FROM
    table1
WHERE ID = '00:50:c2:63:10:1a'
AND subject = 'entrance'
GROUP BY id; 
```

我的问题：计算平均值没问题，就是这样查询。但是我怎样才能得到这个值的标准偏差和方差呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T21:21:04.040

首先通过将表连接到自身并按 ID 分组来找到感兴趣的时间差，然后找到平均值、方差`V(x) = E(x^2) - (E(x))^2`和标准差`sqrt(V)`

```
SELECT ID, AVG(diff) AS average,
       AVG(diff*diff) - AVG(diff)*AVG(diff) AS variance,
       SQRT(AVG(diff*diff) - AVG(diff)*AVG(diff)) AS stdev
FROM
    (SELECT t1.id, t1.endTimestamp,
            min(t2.startTimeStamp) - t1.endTimestamp AS diff
    FROM table1 t1
    INNER JOIN table1 t2
    ON t2.ID = t1.ID AND t2.subject = t1.subject
    AND t2.startTimestamp > t1.startTimestamp  -- consider only later startTimestamps
    WHERE t1.subject = 'entrance'
    GROUP BY t1.id, t1.endTimestamp) AS diffs
GROUP BY ID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T20:53:01.757

对于比简单求和更复杂的公式，您必须通过查找相应的下一个开始时间来计算每条记录的实际差值，如下所示：

```
SELECT (SELECT MIN(startTimestamp)
        FROM table1 AS next
        WHERE next.startTimestamp > table1.startTimestamp
          AND ID = '...'
       ) - endTimestamp AS timeDifference
FROM table1
WHERE nextStartTimestamp IS NOT NULL
  AND ID = '...' 
```

然后您可以使用所有差异值进行计算：

```
SELECT SUM(timeDifference) / COUNT(*) AS average,
       AVG(timeDifference)            AS moreEfficientAverage,
       SUM(timeDifference * timeDifference) / COUNT(*) -
       AVG(timeDifference) * AVG(timeDifference) AS variance
FROM (SELECT (SELECT MIN(startTimestamp)
              FROM table1 AS next
              WHERE next.startTimestamp > table1.startTimestamp
                AND next.ID = '...'
             ) - endTimestamp AS timeDifference
      FROM table1
      WHERE nextStartTimestamp IS NOT NULL
        AND ID = '...') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T20:58:37.330

几点：

1.  你的平均值公式是错误的，正确的公式是`SUM(endtimestamp-starttimestamp)/COUNT(endtimestamp)`。我不知道你为什么有这些`MIN/MAX`条款。`COUNT(*)`将计算`NULL`行数并给出错误的结果。
2.  SQLlite 有一个`avg`找到平均值的函数。
3.  方差的公式是`SUM((endtimestamp-starttimestamp)*(endtimestamp-starttimestamp)) - AVG(endtimestamp-starttimestamp)*AVG(endtimestamp-starttimestamp)`
4.  标准差是方差的平方根。

作为对问题作者评论的回应，为了计算方差，必须通过自连接将开始时间和结束时间相互配对。

由于 SQL lite 中没有 row_number 函数，这有点不雅。

```
SELECT id,
       AVG(startTimestamp-endTimestamp) as mean,
       SUM((startTimestamp-endTimestamp)^2) - AVG(startTimestamp-endTimestamp)^2 as variance,
       SQRT(SUM((startTimestamp-endTimestamp)^2) - AVG(startTimestamp-endTimestamp)^2) as stDev
FROM
    (SELECT
        t1.id,
        t1.endTimestamp,
        MIN(t2.startTimestamp) as starttimestamp
    FROM table1 t1
         INNER JOIN
         table1 t2 ON t1.endTimestamp<=t2.startTimestamp
    GROUP BY t1.id, t1.endTimestamp) t
GROUP BY id; 
```

请参阅[SQL 小提琴](http://sqlfiddle.com/#!2/fe8c6/56)

# ios - 适用于 iOS 的 OpenCV 2.4.3 是否在后台使用 Accelerate Framework？

> ID：14428098
> 
> 赞同：2
> 
> 时间：2013-01-20T19:02:36.630
> 
> 标签：ios, opencv, frameworks

[我最近从这里](http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/2.4.3/opencv2.framework.zip/download.)下载了 opencv 以了解 iOS 项目

它似乎需要 opencv2/highgui/cap_ios.h 中的 Accelerate Framework，它似乎主要处理视频捕获。我很想知道是否有人知道是否有任何重要的 CV 算法实际上正在利用 iOS 上的框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:59:55.433

如您所说，cap_ios.h 仅用于视频和照片捕获。这是 openCV 中唯一需要 Accelerate 框架的部分，因此它的用途不能超出此范围。但这甚至不是必需的：无论是否包含框架，我都可以使用 cap_ios.h 运行 CVVideoCamera 视频捕获。

[文档](http://docs.opencv.org/trunk/doc/tutorials/ios/video_processing/video_processing.html)中对它的唯一引用是

“Accelerate 框架提供了一些 CPU 加速的 DSP 过滤器……”

所以......我认为*没有*任何重要的算法正在使用它。`cap_ios.h`是 2.4.3 中的一个新特性，也是 openCV 中*唯一*的Objective-C 接口，这可能解释了框架的犹豫使用和提及。

# c++ - C ++“没有命名类型” - 无法编译源文件

> ID：14428099
> 
> 赞同：-2
> 
> 时间：2013-01-20T19:02:36.767
> 
> 标签：c++, compilation, header-files

我正在尝试编译我的代码，但我不知道我做错了什么。我相信这可能是我的编译顺序，但我无法弄清楚我的错误。

我的错误代码：

```
g++ -w -c JokeServer.cpp
In file included from JokeServer.h:4:0,
                 from JokeServer.cpp:52:
AdminServer.h:9:2: error: ‘JokeServer’ does not name a type
make: *** [JokeServer.o] Error 1 
```

谢谢你。

JokeServer.h 文件：

```
#ifndef JOKESERVER_H
#define JOKESERVER_H

#include "AdminServer.h"
#include "Subject.h"
#include "Observer.h"
#include "Worker.h"

class JokeServer: public Subject {
private:
    AdminServer* m_admin_server;

public:
     //public functions
};

#endif 
```

AdminServer.h 文件：

```
#ifndef ADMINSERVER_H
#define ADMINSERVER_H

#include "JokeServer.h"
#include "AdminWorker.h"

class AdminServer {
private:
    JokeServer* m_joke_server;

public:
  //public functions        
};

#endif 
```

我的制作文件：

```
CPPFLAGS = g++ -w

all: JokeServer JokeClient AdminClient

#-------------------------------------
# JOKE SERVER
#-------------------------------------
JokeServer: JokeServer.o Worker.o JokeGenerator.o ProverbGenerator.o AdminServer.o AdminWorker.o
    $(CPPFLAGS) JokeServer.o Worker.o JokeGenerator.o ProverbGenerator.o AdminServer.o AdminWorker.o -o JokeServer -lpthread

JokeServer.o: JokeServer.cpp JokeServer.h Subject.h
    $(CPPFLAGS) -c JokeServer.cpp

Worker.o: Worker.cpp Worker.h Observer.h
    $(CPPFLAGS) -c Worker.cpp

JokeGenerator.o: JokeGenerator.cpp JokeGenerator.h
    $(CPPFLAGS) -c JokeGenerator.cpp

ProverbGenerator.o: ProverbGenerator.cpp ProverbGenerator.h
    $(CPPFLAGS) -c ProverbGenerator.cpp

AdminServer.o: AdminServer.cpp AdminServer.h
    $(CPPFLAGS) -c AdminServer.cpp

AdminWorker.o: AdminWorker.cpp AdminWorker.h
    $(CPPFLAGS) -c AdminWorker.cpp 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T19:05:37.103

您的文件之间有一个**循环引用**`.h`。文件`AdminServer.h`并`JokeServer.h`相互包含。您应该使用前向声明来解决此问题。

例如，在`JokeServer.h`：

```
#ifndef JOKESERVER_H
#define JOKESERVER_H

// REMOVE THIS
// #include "AdminServer.h"

// ADD THIS
class AdminServer; 
```

另请注意，通过包含（例如，我怀疑， ）*间接*包含的所有文件都必须包含才能访问类的定义`AdminServer.h``JokeServer.h``JokeServer.cpp``AdminServer.h``AdminServer`

# cuda - 使用 CUDA 实现神经网络

> ID：14428110
> 
> 赞同：3
> 
> 时间：2013-01-20T19:03:53.520
> 
> 标签：cuda, artificial-intelligence, neural-network, gpgpu

我正在尝试使用 CUDA 创建神经网络：

我的内核看起来像：

```
__global__ void feedForward(float *input, float *output, float **weight) {

//Here the threadId uniquely identifies weight in a neuron
int weightIndex = threadIdx.x;

//Here the blockId uniquely identifies a neuron
int neuronIndex = blockIdx.x;

if(neuronIndex<NO_OF_NEURONS && weightIndex<NO_OF_WEIGHTS)
output[neuronIndex] += weight[neuronIndex][weightIndex]
        * input[weightIndex];
} 
```

将输出复制回主机时，出现错误

在第 xx 行出现错误未指定的启动失败

在第 xx 行：

```
CUDA_CHECK_RETURN(cudaMemcpy(h_output, d_Output, output_size, cudaMemcpyDeviceToHost)); 
```

我在这里做错了吗？

是因为我如何同时使用块索引和线程索引来引用权重矩阵。还是问题出在其他地方？

我将权重矩阵分配如下：

```
cudaMallocPitch((void**)&d_Weight, &pitch_W,input_size,NO_OF_NEURONS); 
```

我的内核调用是：

```
feedForward<<<NO_OF_NEURONS,NO_OF_WEIGHTS>>>(d_Input,d_Output,d_Weight); 
```

之后我打电话： cudaThreadSynchronize();

我是使用 CUDA 编程的新手。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:19:02.683

输出代码有问题。虽然它不会产生所描述的错误，但它会产生不正确的结果。

```
int neuronIndex = blockIdx.x;

if(neuronIndex<NO_OF_NEURONS && weightIndex<NO_OF_WEIGHTS)
output[neuronIndex] += weight[neuronIndex][weightIndex] * input[weightIndex]; 
```

我们可以看到单个块中的所有线程都在同时写入一个内存单元。所以 udefined 结果是预期的。为了避免这种情况，我建议减少共享内存中一个块内的所有值，并对全局内存执行一次写入。像这样的东西：

```
__global__ void feedForward(float *input, float *output, float **weight) {

  int weightIndex = threadIdx.x;
  int neuronIndex = blockIdx.x;
  __shared__ float out_reduce[NO_OF_WEIGHTS];

  out_reduce[weightIndex] = 
     (weightIndex<NO_OF_WEIGHTS && neuronIndex<NO_OF_NEURONS) ? 
       weight[neuronIndex][weightIndex] * input[weightIndex]
       : 0.0;
  __syncthreads();

  for (int s = NO_OF_WEIGHTS; s > 0 ; s >>= 1)
  {
    if (weightIndex < s) out_reduce[weightIndex] += out_reduce[weightIndex + s];
    __syncthreads();
  }

  if (weightIndex == 0) output[neuronIndex] += out_reduce[weightIndex]; 
} 
```

原来我不得不重写你一半的小内核来帮助减少代码......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T23:22:06.860

我使用 CUDA 构建了一个非常简单的 MLP 网络。如果您可能感兴趣，您可以在这里找到我的代码：[https](https://github.com/PirosB3/CudaNeuralNetworks/) ://github.com/PirosB3/CudaNeuralNetworks/ 如有任何问题，请拍！

丹尼尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:04:31.657

您正在使用 cudaMallocPitch，但不显示变量是如何初始化的；我愿意打赌这就是你的错误的根源。cudaMallocPitch 相当棘手；第三个参数应该以字节为单位，而第四个参数不是。IE

```
int width = 64, height = 64;
float* devPtr;
size_t pitch;
cudaMallocPitch(&device_Ptr, &pitch, width * sizeof(float), height); 
```

您的变量 input_size 是否以字节为单位？如果不是，那么您可能分配的内存太少（即您会认为您正在请求 64 个元素，但实际上您将获得 64 个字节），因此您将访问内核中超出范围的内存. 根据我的经验，“未指定的启动失败”错误通常意味着我有段错误

# java - PostgreSQL（奇怪）：NoClassDefFoundError：com/mysql/jdbc/StringUtils

> ID：14428115
> 
> 赞同：1
> 
> 时间：2013-01-20T19:04:41.767
> 
> 标签：java, postgresql, tomcat, noclassdeffounderror

我得到了众所周知的 NoClassDefFoundError: com/mysql/jdbc/StringUtils，但我的情况略有不同：我根本没有使用 MySQL。

我正在使用 JDK 1.6 处理 PostgreSQL 9.1 数据库。在我的计算机上一切正常（加载了 PostgreSQL 驱动程序，没有类路径问题等），但我必须将我的项目上传到我大学的服务器，在那里我收到以下错误：

```
java.lang.NoClassDefFoundError: Could not initialize class com.mysql.jdbc.StringUtils 
```

这是完整的堆栈跟踪：

```
com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:286)
java.sql.DriverManager.getConnection(DriverManager.java:582)
java.sql.DriverManager.getConnection(DriverManager.java:185)
elections.ConnectionManager.getConnection(ConnectionManager.java:29)
elections.daos.LoginDAO.login(LoginDAO.java:23) 
elections.controllers.LoginController.doPost(LoginController.java:46) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:641) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
sun.reflect.GeneratedMethodAccessor35.invoke(Unknown Source) 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
java.lang.reflect.Method.invoke(Method.java:597) 
org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:274) 
org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:271) 
java.security.AccessController.doPrivileged(Native Method) 
javax.security.auth.Subject.doAsPrivileged(Subject.java:517) 
org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:306) 
org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:166)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:299) 
org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:57) 
org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:193) 
org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189) 
java.security.AccessController.doPrivileged(Native Method) 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188) 
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:208) 
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) 
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) 
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) 
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) 
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) 
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 
org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197) 
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579) 
org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770) 
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 
java.lang.Thread.run(Thread.java:662) 
```

这是我提供连接的类（这是我的第一个 JDBC 项目；我知道下面的代码不是线程安全的；我将使用连接池重写它，但首先我需要让它工作......）

```
static Connection conn;

public static Connection getConnection() throws Exception {
    try {

        String url = "jdbc:postgresql://host/database";
        String username = "username";
        String pwd = "password";

        Class.forName("org.postgresql.Driver");

        try {
            conn = DriverManager.getConnection(url, username, pwd);
        } catch (SQLException e) {
            e.printStackTrace();
            throw e;
        }
    } catch (ClassNotFoundException e) {
        throw e;
    }
    return conn;
} 
```

我在互联网上进行了大量搜索，但我似乎是世界上唯一一个遇到这种问题的人......其他人只有 MySQL 有这个问题。

我什至尝试将 MySQL 驱动程序（包含缺少的 com.mysql.jdbc.StringUtils 类）放入 WEB-INF/lib 文件夹，但这没有帮助。

我发现的唯一有用信息是错误可能隐藏在其他地方（这意味着 com.mysql.jdbc.StringUtils 依赖的某些类无法加载），但我不知道在哪里搜索。

我真的不明白为什么要搜索 MySQL 类，而我只使用 PostgreSQL。

任何形式的帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:01:01.870

JDBC 4.0 自动发现可以自动扫描和加载 JDBC 驱动程序，我猜 DriverManager 也会扫描和加载 MySQL JDBC 驱动程序，即使它从未被您的程序使用。

那么我们可以猜测您的服务器为流行的数据库供应商保留了许多 jdbc 驱动程序。您可以在本地使用 mysql 进行测试以找出 MySQL 驱动程序无法工作的原因，然后您可以告诉服务器管理员更新 mysql 的驱动程序或设置。

[http://www.techfaq360.com/tutorial/jdbc/jdbc3_jdbc4.jsp](http://www.techfaq360.com/tutorial/jdbc/jdbc3_jdbc4.jsp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:21:16.413

好的，原来是 Tomcat 安全管理器的权限问题。一旦管理员检查确切原因是什么，我将在此处发布并接受最佳答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:55:56.947

通常，JDBC 驱动程序放在 Tomcat SHARED 库中。因此，您部署的tomcat 可能有一些库会干扰您的项目。

在项目的 WEB-INF/lib 中添加缺少的库无法解决问题，因为如果导致您遇到问题的代码正在尝试使用另一个类加载器中缺少的类，则可能无法看到您尝试从应用程序中提供的内容“范围”。

因此，由于我假设您无权访问服务器的共享库，因此您应该在 sys.lib 中看到这一点。行政。

# java - 即使 convertView 不为 null，convertView.findViewById 也会返回 null

> ID：14428116
> 
> 赞同：0
> 
> 时间：2013-01-20T19:04:45.240
> 
> 标签：java, android

我正在尝试显示具有不同类型行的 ListView。我有一个由,等`Result`继承的抽象类。我从 JSON 响应中获取结果。解析没问题，我的工厂设法正确创建了一些对象。`Artist``Label``Release``Result`

使用这些指南[1、2](http://antew.com/?p=162)，我[最终](http://android.amberfog.com/?p=296)扩展了`BaseAdapter`。

```
public class SearchResultsActivity extends ListActivity {

    private static final String SEARCH_API_ENDPOINT = "http://xxxx.com/database/search?q=";

    SearchResultAdapter searchAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.result_list);
        searchAdapter = new SearchResultAdapter();
        // handleIntent is needed because android:launchMode="singleTop" mode uses onNewIntent
        handleIntent(getIntent());
    }

    @Override
    protected void onNewIntent(Intent intent) {
        handleIntent(intent);
    }

    private void handleIntent(Intent intent) {

        if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
            String query = intent.getStringExtra(SearchManager.QUERY); // get user input from search widget 
            String[][] params = new String[][]{{"q", query}}; // prepare GET parameters
            HttpRequestHandler requestHandler = new HttpRequestHandler("GET");
            String result;

            requestHandler.setURL(HttpRequestHandler.API_URL, HttpRequestHandler.SEARCH_QUERY_ENDPOINT);
            requestHandler.addParameters(params);
            result = requestHandler.sendRequest();
            if (result != null && !result.isEmpty()) {
                try {
                    ArrayList<Result> resultList = new ResultFactory(new JSONObject(result)).getResults(); // JSON to Result objects
                    for (Result res: resultList) {
                        searchAdapter.addItem(res);
                    }
                    setListAdapter(searchAdapter);
                } catch (JSONException e) {
                    System.out.println("xxjsonexception");
                }
            }
        }
    }

    public class SearchResultAdapter extends BaseAdapter {

        private List<Result> searchResults = new ArrayList<Result>();
        private LayoutInflater mInflater;

        public SearchResultAdapter() {
            mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        public void addItem(Result result) {
            searchResults.add(result);
            notifyDataSetChanged();
        }

        @Override
        public Object getItem(int position) {
            return searchResults.get(position);
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public int getCount() {
            return searchResults.size();
        }

        @Override
        public int getViewTypeCount() {
            return Result.Type.values().length; // enum length
        }

        @Override
        public int getItemViewType(int position) {
            return searchResults.get(position).getType().ordinal();
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            Result tmp = searchResults.get(position); // only for testing
            System.out.println("xxItem type " + tmp.getType());
            View v = searchResults.get(position).getView(mInflater, convertView);
            if (v == null) {
                System.out.println("xxgetviewnull");
            } else {
                System.out.println("xxgetviewok");
            }
            return v;
        }
    }
} 
```

结果.java：

```
public abstract class Result {
    // general search result class

    public enum Type {
        ARTIST,
        RELEASE,
        MASTER,
        LABEL,
        ERROR,
    }

    public static final String NODE_RESULTS = "results";
    public static final String NODE_TITLE = "title";
    public static final String NODE_THUMB = "thumb";
    public static final String NODE_RESSOURCE = "resource_url";
    public static final String NODE_TYPE = "type";
    public static final String NODE_URI = "uri";
    public static final String NODE_ID = "id";

    public static final String TYPE_ARTIST = "artist";
    public static final String TYPE_RELEASE = "release";
    public static final String TYPE_MASTER = "master";
    public static final String TYPE_LABEL = "label";

    protected String thumb;
    protected String title;
    protected String ressource_url;
    protected static Type type;
    protected String uri;
    protected int id;

    public void setData(JSONObject jsonResult) {
        try {
            setId(jsonResult.getInt(Result.NODE_ID));
            setUri(jsonResult.getString(Result.NODE_URI));
            setRessource_url(jsonResult.getString(Result.NODE_RESSOURCE));
            setThumb(jsonResult.getString(Result.NODE_THUMB));
            setTitle(jsonResult.getString(Result.NODE_TITLE));
        } catch (JSONException e) {
            type = Type.ERROR;
        }
    }

    // getters and setters ..

    public abstract View getView(LayoutInflater inflater, View convertView);
} 
```

艺术家.java：

```
public class Artist extends Result{

    public Artist(){
        type = Type.ARTIST;
    }

    @Override
    public View getView(LayoutInflater inflater, View convertView) {
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.list_item_artist, null);
        }
        TextView textTitle = (TextView) convertView.findViewById(R.id.title_artist);
        if (textTitle == null) {
            System.out.println("xxtexttitle null");
        } else {
            System.out.println("xxtexttitleok " + title);
        }
        textTitle.setText(title);
        return convertView;
    }

} 
```

标签.java

```
public class Label extends Result {

    public Label() {
        type = Type.LABEL;
    }

    @Override
    public View getView(LayoutInflater inflater, View convertView) {
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.list_item_label, null);
        }
        if (convertView == null) {
            System.out.println("xxconvertviewisnull");
        } else {
            System.out.println("xxconvertviewok");
        }
        TextView titleText = (TextView) convertView.findViewById(R.id.title_label);
        titleText.setText(title);
        return convertView;
    }

} 
```

如您所见，我`Artist`和`Label`班级非常相似，但只有我的`Label`班级在`TextView titleText = (TextView) convertView.findViewById(R.id.title_label)`.

这不是`setContentView()`我正在做的`onCreate`。
我的`Result`对象从来`null`没有，也没有`null`字段。
我确实检查了是否`convertView`在`null`我的`getView`方法中，如果有，则对 View 进行膨胀`null`。
我没有使用 ViewHolder，因为`Release`并且`Master`将显示额外的字段。

编辑 ：

list_item_label.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <TextView android:id="@+id/title_label"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"/>

</LinearLayout> 
```

list_item_artist.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <TextView android:id="@+id/title_artist"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:textColor="#FFAAAA"
              android:textSize="14pt"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:44:53.097

这是因为当您到达列表中的标签对象时，您的 convertView 是一个“list_item_artist”视图。然后convertview不是null，而是找不到title_label的错误视图类型。

颠倒列表顺序，您将获得一个带有艺术家视图的空指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:17:16.240

我的猜测是 list_item_layout 没有 id 为 title_label 的元素，这将导致`convertView.findViewById(R.id.title_label)`返回 null 然后在`titleText.setText(title)`. 如果有另一个包含 title_lable id 的布局，它将构建得很好，但随后在运行时抛出 NPE。

# javafx-2 - JAR 文件中的 JavaFX MEDIA_UNAVAILABLE

> ID：14428117
> 
> 赞同：1
> 
> 时间：2013-01-20T19:04:54.610
> 
> 标签：javafx-2, javafx, executable-jar

我目前正在尝试让 JavaFX 媒体播放器工作，并且在打包我的应用程序时定位我的媒体文件有一些奇怪的行为。在 eclipse 中运行它时它工作得很好，但是一旦我将它与 maven 打包为一个 jar，就无法再找到媒体文件，并且出现以下错误：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.simontuffs.onejar.Boot.run(Boot.java:340)
    at com.simontuffs.onejar.Boot.main(Boot.java:166)
Caused by: MediaException: MEDIA_UNAVAILABLE : \resources-0.0.1-SNAPSHOT.one-jar.jar     
(Das System kann die angegebene Datei nicht finden)
    at javafx.scene.media.AudioClip.<init>(AudioClip.java:65)
    at com.example.test.MyResourceTest.getResource(MyResourceTest.java:11)
    at com.example.test.MyResourceTest.main(MyResourceTest.java:18)
    ... 6 more 
```

错误原因表明系统找不到给定的文件。有趣的是，它实际上在一个 jar 文件中可用，因此它应该可以工作。这对我来说是一种阻碍，我无法从 Oracle 论坛得到任何回应。

我上传了我的简单 Eclipse 项目供任何人尝试： [http ://www.fileswap.com/dl/itytDY7mcY/](http://www.fileswap.com/dl/itytDY7mcY/)

否则这是代码：

```
public class MyResourceTest {

    public String getResource() {
        final URL sound = getClass().getResource("/com/example/data/sound.mp3");
        AudioClip soundEffect = new AudioClip(sound.toString());
        return sound.toString();
    }

    public static void main(String[] args) {
        System.out.println(new MyResourceTest().getResource());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:52:07.133

其实我刚刚找到了一个非常好的方法来解决这个问题：

```
 getHostServices().getDocumentBase() 
```

在您的应用程序类中获取文档库，然后使用类似

```
 Media media = new Media(documentBase + "/resources/" + name + ".mp3");
 player = new MediaPlayer(media); 
```

或者在你的情况下：

```
Media media = new Media(documentBase + "/com/example/data/sound.mp3");
player = new MediaPlayer(media); 
```

（这仅在您使用 javafx 应用程序时才有效）

# vba - 使用 vba 将范围值复制到变体中

> ID：14428122
> 
> 赞同：0
> 
> 时间：2013-01-20T19:05:49.613
> 
> 标签：vba, excel

我在宏中有以下代码，但是当我运行它时，它只复制单元格 B2 中的值，而不是复制 B2:D2 中的整个值范围，正如我在下面代码的第 5 行中指定的那样。

```
Sub copying()
Dim calval as variant
With worksheets("sheet1")
Set calval=.Cells(Rows.Count,"B").End(xlUp).Offset(2,3)
calval.value=Range("B2:D2").Value 'copy range of values
End With
End Sub 
```

这是单元格 B2:D2 中的数据

```
21.7 21.3 22.4 
```

有人可以告诉我如何让 calval 被分配 B2:D2 的全部值，而不仅仅是 B2 中的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:05:46.893

你在这里有几个问题。首先，当复制到变体时，它们不是对象，所以你不需要使用 set。它们也没有范围，因为它们是变量。您还需要先将该值复制到一个变体，然后才能将其设置为输出范围，因此顺序有点偏离。以下代码将起作用：

```
Sub Copying()
    Dim calval as Variant

    'Read it in from the worksheet
    With Worksheets("Sheet1")
        calval=.Range("B2:D2").value

        'Set it back to the dsired range using the bounds of the variant instead of hardcoding.
       .Range(.Cells(Rows.Count,"B").End(xlUp).Offset(2,3), .Cells(Rows.Count,"B").End(xlUp).Offset(1 + UBound(calval, 1), 2 + UBound(calval, 2))).Value = calval
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T04:06:32.463

我知道您已经接受了答案，这是实现您需要的另一种方法：使用`WorkSheetFunction.Transpose`方法。

```
Dim calval as Variant
'--- Range("B2:D2").Value

calval = WorkSheetFunction.Transpose(Sheets(1).Range("B2:D2").Value) 
```

您可以根据需要自由使用`offset`, 。`resize`例如将您的范围扩大到`B12`

```
calval = WorkSheetFunction.Transpose(Sheets(1).Range("B2:D2").Resize(10).Value) 
```

# macos - mongodb 启动不了

> ID：14428123
> 
> 赞同：23
> 
> 时间：2013-01-20T19:05:52.190
> 
> 标签：macos, mongodb

我使用 Mac Homebrew 命令安装了 MongoDB，但是当我运行时`mongod`

我的终端无法识别：/

如果我输入`export PATH=$PATH:/usr/local/mongodb/bin`然后运行`mongod`它会启动但很快退出

```
mongod --help for help and startup options
Sun Jan 20 18:59:25 [initandlisten] MongoDB starting : pid=59800 port=27017 dbpath=/data/db/ 64-bit host=Kevin-Tucks-MacBook-Pro.local
Sun Jan 20 18:59:25 [initandlisten] db version v2.0.4, pdfile version 4.5
Sun Jan 20 18:59:25 [initandlisten] git version: 329f3c47fe8136c03392c8f0e548506cb21f8ebf
Sun Jan 20 18:59:25 [initandlisten] build info: Darwin erh2.10gen.cc 9.8.0 Darwin Kernel Version 9.8.0: Wed Jul 15 16:55:01 PDT 2009; root:xnu-1228.15.4~1/RELEASE_I386 i386 BOOST_LIB_VERSION=1_40
Sun Jan 20 18:59:25 [initandlisten] options: {}
Sun Jan 20 18:59:25 [initandlisten] journal dir=/data/db/journal
Sun Jan 20 18:59:25 [initandlisten] recover : no journal files present, no recovery needed
Sun Jan 20 18:59:25 [initandlisten] preallocateIsFaster=true 2.38
Sun Jan 20 18:59:25 [websvr] ERROR: listen(): bind() failed errno:48 Address already in use for socket: 0.0.0.0:28017
Sun Jan 20 18:59:25 [websvr] ERROR:   addr already in use
Sun Jan 20 18:59:25 [initandlisten] ERROR: listen(): bind() failed errno:48 Address already in use for socket: 0.0.0.0:27017
Sun Jan 20 18:59:25 [initandlisten] ERROR:   addr already in use
Sun Jan 20 18:59:25 [initandlisten] now exiting
Sun Jan 20 18:59:25 dbexit: 
Sun Jan 20 18:59:25 [initandlisten] shutdown: going to close listening sockets...
Sun Jan 20 18:59:25 [initandlisten] shutdown: going to flush diaglog...
Sun Jan 20 18:59:25 [initandlisten] shutdown: going to close sockets...
Sun Jan 20 18:59:25 [initandlisten] shutdown: waiting for fs preallocator...
Sun Jan 20 18:59:25 [initandlisten] shutdown: lock for final commit...
Sun Jan 20 18:59:25 [initandlisten] shutdown: final commit...
Sun Jan 20 18:59:25 [initandlisten] shutdown: closing all files...
Sun Jan 20 18:59:25 [initandlisten] closeAllFiles() finished
Sun Jan 20 18:59:25 [initandlisten] journalCleanup...
Sun Jan 20 18:59:25 [initandlisten] removeJournalFiles
Sun Jan 20 18:59:25 [initandlisten] shutdown: removing fs lock...
Sun Jan 20 18:59:25 dbexit: really exiting now 
```

我尝试重新启动我的 shell，但如果我尝试`mongod`再次运行，它会以无法识别的形式返回，并要求我重新输入`export PATH=$PATH:/usr/local/mongodb/bin`.

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2014-10-02T00:08:50.287

Kyle：“看起来 mongo 已经在运行，或者另一个进程正在使用端口 27017”

在这种情况下，键入以下命令

```
ps wuax | grep mongo 
```

你应该看到像这样的东西

```
User           31936   0.5 0.4 2719784 35624   ?? S     7:34pm   0:09.98 mongod
User           31945   0.0 0.0 2423368   184 s000 R+   8:24pm   0:00.00 grep mongo 
```

现在输入 mongod 实例的 kill 命令（在本例中为 31936）：

```
kill 31936 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-02T22:56:23.850

我刚刚在 osx (10.9.3)、mongod (2.6.1) 上安装了 brew 并且遇到了同样的问题。Def没有运行第二个副本。

```
$ lsof -i | grep 2701 
```

显示没有开放端口。

我发现以下内容有所帮助。

brew 写入的默认配置文件 (/usr/local/etc/mongod.conf) 包含以下行：

```
bind_ip = 127.0.0.1,<my-machine>.local 
```

如果您编辑此文件并将该行更改为以下任一行：

```
bind_ip = 127.0.0.1
or
bind_ip = <my-machine>.local 
```

然后使用以下命令重新启动服务，它应该按预期启动。

```
$ brew services restart mongodb 
```

您可以通过在启动时在另一个窗口中跟踪日志文件来检查成功或失败

```
$ tail -f /usr/local/var/log/mongodb/mongo.log 
```

它似乎正在尝试打开此处列出的两个地址，并且它们都解析为 127.0.0.1，因此当它尝试打开第二个端口然后关闭整个端口时，我们总是会失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-20T19:11:34.010

> Sun Jan 20 18:59:25 [websvr] 错误：地址已在使用 Sun Jan 20 18:59:25 [initandlisten] 错误：listen(): bind() failed errno:48 地址已用于套接字：0.0。 0.0:27017 Sun Jan 20 18:59:25 [initandlisten] 错误：地址已在使用中

看起来 mongo 已经在运行或另一个进程正在使用端口`27017`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-20T11:35:35.813

`mongodb`对于在这里登陆的任何人，通过停止已经运行的服务来解决（至少在我这边） ：

`brew services stop mongodb`

然后运行`mongod`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-08T16:46:06.910

这个解决方案对我有用。我正在使用 mongodb 3.2 版

我设置路径，

```
/usr/local/bin 
```

我将 mongodb 数据目录设置为 /data/db 并将权限设置为我自己的帐户。mkyong 的这个[教程真的很有帮助。](http://www.mkyong.com/mongodb/how-to-install-mongodb-on-mac-os-x/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T20:37:39.993

对于 mongod 不在您的 PATH 中，看起来支持的逻辑自您使用的版本以来已经调整了几次。如果您升级，该问题很可能会自动修复。

*   [https://github.com/mxcl/homebrew/commit/9348b1030b53558ae9311ccd528888a28fade0c4#Library/Formula/mongodb.rb](https://github.com/mxcl/homebrew/commit/9348b1030b53558ae9311ccd528888a28fade0c4#Library/Formula/mongodb.rb)
*   [https://github.com/mxcl/homebrew/commit/475e63dc7e7574bc5b8e4d037b6dded461cab727#Library/Formula/mongodb.rb](https://github.com/mxcl/homebrew/commit/475e63dc7e7574bc5b8e4d037b6dded461cab727#Library/Formula/mongodb.rb)

正如其他人已经说过的那样，它给出的错误表明另一个进程已经在使用配置的端口。一种可能性是，在过去，您运行 Homebrew 提供给您的命令以将 MongoDB 安装为 LaunchAgent。如果是这种情况，此命令应该撤消该操作，允许您从命令行启动它。

`launchctl unload ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-12T15:49:52.850

当您配置自动启动时，它不允许杀死，因此删除锁定文件并修复它（mac osx）。

```
 cd /data/db
 rm mongod.lock
 sudo mongod --repair 
```

# ios - 在 ios MapView 上控制缩放时间

> ID：14428124
> 
> 赞同：0
> 
> 时间：2013-01-20T19:05:57.210
> 
> 标签：ios, mapkit

MKMapKit 的缩放动画很棒，但是它总是需要一个预定义的时间来完成动作，也就是说，我作为一个程序员，没有办法为它设置一个自定义的时间来放大到一个特定的位置。

我尝试将 setRegion 函数放入动画块中，但这不起作用，无论哪种方式，缩放都需要相同的时间。如何设置自定义缩放时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:15:24.167

您的问题的解决方案是[`Nstimer`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface NSTimerExampleViewController : UIViewController {
    NSTimer *aTimer;
}

@end 
```

视图控制器.m

```
#import "NSTimerExampleViewController.h"

    @implementation NSTimerExampleViewController

    -(void)timerFired:(NSTimer *) theTimer
    {    
        NSLog(@"timerFired @ %@", [theTimer fireDate]);
    }

    - (void)viewDidLoad {
        [super viewDidLoad];
        //This starts the Timer
        aTimer = [NSTimer scheduledTimerWithTimeInterval:10.0
                                                  target:self 
                                                selector:@selector(timerFired:) 
                                                userInfo:nil 
                                                 repeats:YES];

    } 
```

# ruby-on-rails - Ruby 中的范围日期：从现在到 7 天之间“到期”的即将到来的工作？

> ID：14428125
> 
> 赞同：0
> 
> 时间：2013-01-20T19:06:07.680
> 
> 标签：ruby-on-rails, ruby, date, time, scope

我正在尝试从现在到“到期”日期之间的所有“工作”范围，如果该日期在接下来的 7 天内即将到来。

我知道如何根据 created_at 确定范围 - 但不确定如何处理特定日期。

这是我所得到的。但我不确定应该在哪里坚持。以下当然是行不通的。

```
def self.due_soon # in next 7 days
   where(Time.now-due.7.days)
end 
```

或者这是一个更好的方法：

```
def self.due_soon 
    where(':due < ?', Time.now-7.days)
end 
```

同样，您将如何确定过期的“工作”？

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:44:28.557

解决方案[在这里](http://guides.rubyonrails.org/active_record_querying.html#hash-conditions)：

```
scope :due_soon, lambda { where(:created_at => (Time.now - 7.days)..Time.now) } 
```

# c++ - const_reference_type 未编译但 const value_type& 正在编译

> ID：14428144
> 
> 赞同：4
> 
> 时间：2013-01-20T19:07:31.843
> 
> 标签：c++, gcc, constants

```
#include <iostream>

template <typename T>
struct ref_exp{
    typedef T value_type;
    typedef value_type& reference_type;
    typedef const reference_type const_reference_type;

    ref_exp(value_type data): _data(data){}
    const_reference_type data() const {return _data;}
  private:
    value_type _data;
};

int main(){
    ref_exp<int> exp1(2);
    std::cout << exp1.data() << std::endl;

    return 0;
} 
```

上面的代码无法编译

```
ref.cpp: In member function ‘T& ref_exp<T>::data() const [with T = int]’:
ref.cpp:17:   instantiated from here
ref.cpp:10: error: invalid initialization of reference of type ‘int&’ from expression of type ‘const int’ 
```

但如果我`const_reference_type data() const`用它代替`const value_type& data() const`它。此外，如果我用它替换`typedef const reference_type const_reference_type`
它`typedef const value_type& const_reference_type`编译

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T19:17:56.773

你的`const_reference_type`typedef 没有按照你的想法做：

```
typedef const reference_type const_reference_type; 
```

`const_reference_type`是`int& const`——也就是说，整个类型`reference_type`都`const`应用于它——并且`const`引用不能存在，所以你得到`int&`. 您没有得到`const int&`预期的结果。

正如您所指出的，这里的解决方法是：

```
typedef const value_type& const_reference_type; 
```

这里的提示是不要认为`typedef`只是类型名称的查找和替换，因为它的行为方式并非如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T19:23:46.863

在您的 typedef 中，`const reference_type`并不等于您似乎认为的那样**。**`const value_type &`而是`value_type & const`哪个有效`value_type &`。

**这就是为什么我更喜欢`const`在右侧而不是左侧**申请的原因之一。如果你写

```
reference_type const 
```

那么很明显它*实际上是*这样的：

```
value_type & const   //actually 
```

*而*不是这个：

```
value_type const &   //intended 
```

现在很清楚了，不是吗？

请注意`value_type const &`和`const value_type &`是*同一*类型。

无论如何，要解决问题，您需要将 typedef 定义为：

```
typedef value_type const & const_reference_type; 
```

我更喜欢`const`在右侧申请。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-20T19:17:42.133

`const reference_type`表示引用是 const，而不是被引用的对象是 const。

```
typedef int &int_ref;  // int_ref is a reference to a non-const int
typedef const int_ref int_ref_const; 
     // int_ref_const is a const reference to a non-const int 
```

第二种情况下的 const 限定符基本上是无操作的，因为引用是隐式的 const。

考虑一个类似的带有指针的案例：

```
typedef int *int_ptr; // int_ptr is a pointer to a non-const int
typedef const int_ptr int_ptr_const; 
    // int_ptr_const is a const pointer to a non-const int. 
```

# excel - 如何根据另一列的值增加一列中的值

> ID：14428146
> 
> 赞同：3
> 
> 时间：2013-01-20T19:07:36.577
> 
> 标签：excel, vbscript

如何根据另一列的值增加一列中的值？

例如

如果是

```
 A             B    

TS-1
TS-1
TS-1
TS-2
TS-2
TS-3
TS-3
TS-3
TS-3 
```

它应该是

```
 A             B
TS-1        TC-1-1
TS-1        TC-1-2
TS-1        TC-1-3
TS-2        TC-2-1
TS-2        TC-2-2
TS-3        TC-3-1
TS-3        TC-3-2
TS-3        TC-3-3
TS-3        TC-3-4 
```

B 列中应该是这样的，具体取决于 A 列中的值的数量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:23:44.287

1.  将此公式复制到单元格 B1 中：`=A1 & "-" & COUNTIF(A$1:A1;A1)`
2.  将内容从 B1 拖到数据选择的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:31:39.583

这看起来很容易完成。

**设置**

*   有一个变量**valA**将数字存储在 colA 中。
*   有一个变量**valB**，它存储要在 colB 中打印的最右边的数字。

**算法**

*   连续解析文本。
*   当**valA**与上一行不同时，您知道必须将 valB 重置为 1。
*   打印**valB**并将其增加 1。
*   继续解析直到结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:55:17.423

在好的情况下，您可以通过将函数应用于后者来基于旧值计算新值。在这种情况下，您不能编写纯公式/函数，因为新值不仅取决于旧值，还取决于它所属的组 (1, 2, 3, ...) 的元素数到。

因此，您必须在源元素上编写一个循环来跟踪组。看到“组”时，请考虑“字典”——不要使用 If 和变量来跟踪组标识符的变化，而是让字典为您工作。额外的好处：不依赖于订单。

在代码中：

```
 Dim aSrc : aSrc = Split("TS-1 TS-1 TS-1 TS-2 TS-2 TS-3 TS-3 TS-3 TS-3")
  WScript.Echo "aSrc:", Join(aSrc)
  Dim aExp : aExp = Split("TC-1-1 TC-1-2 TC-1-3 TC-2-1 TC-2-2 TC-3-1 TC-3-2 TC-3-3 TC-3-4")
  ReDim aRes(UBound(aSrc))
  Dim dicN : Set dicN = CreateObject("Scripting.Dictionary")
  Dim nRow : nRow     = 0
  Dim sInp
  For Each sInp In aSrc
      Dim aParts : aParts = Split(sInp, "-")
      dicN(aParts(1)) = dicN(aParts(1)) + 1
      aRes(nRow) = "TC-" & aParts(1) & "-" & dicN(aParts(1))
      nRow = nRow + 1
  Next
  WScript.Echo "aExp:", Join(aExp)
  WScript.Echo "aRes:", Join(aRes) 
```

输出：

```
aSrc: TS-1 TS-1 TS-1 TS-2 TS-2 TS-3 TS-3 TS-3 TS-3
aExp: TC-1-1 TC-1-2 TC-1-3 TC-2-1 TC-2-2 TC-3-1 TC-3-2 TC-3-3 TC-3-4
aRes: TC-1-1 TC-1-2 TC-1-3 TC-2-1 TC-2-2 TC-3-1 TC-3-2 TC-3-3 TC-3-4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T09:04:24.217

您也可以使用辅助列在没有 VBA 的情况下执行此操作。将以下公式放入 C 列（从 C2 开始！）：

```
=IF(A1A2,1,C1+1)

```

注意：这假设您在 a 列中的列表已排序！

然后，在 B 列中使用以下公式：

```
=SUBSTITUTE(A2,"S","C")&"-"&C2

```

# histogram - 图像中每个区域的直方图均衡化

> ID：14428147
> 
> 赞同：0
> 
> 时间：2013-01-20T19:07:36.873
> 
> 标签：histogram, cdf

我在这里需要一些帮助.. 如何使用 matlab 创建此应用程序.. 使用自适应对比度增强的图像增强.. 这是我将遵循的建议方法..

这里提出的方法以受控和局部的方式使用 HE 来拉伸暗图像中的细节，同时提高更亮图像的整体对比度。由于在每一帧中产生的局部自适应效果，它被称为自适应对比度增强 (ACE)。所提出的算法首先将亮度水平的直方图划分为三个区域——暗、中和亮。这些区域大小相同。然后使用 HE 独立处理这三个区域中的每一个。

我仍然没有得到对每个区域使用直方图均衡的解决方案..我得到了正常直方图均衡的代码......这是我的代码..

```
K = handles.GRAY;

numofpixels=size(K,1)*size(K,2);

L=uint8(zeros(size(K,1),size(K,2)));
freq=zeros(256,1);
probf=zeros(256,1);
probc=zeros(256,1);
cum=zeros(256,1);
output=zeros(256,1);

%freq counts the occurrence of each pixel value.

%The probability of each occurrence is calculated by probf.

for i=1:size(K,1)
    for j=1:size(K,2)
        value=K(i,j);
        freq(value+1)=freq(value+1)+1;
        probf(value+1)=freq(value+1)/numofpixels;
    end
end

sum=0;
no_bins=255;

%The cumulative distribution probability is calculated. 

for i=1:size(probf)
   sum=sum+freq(i);
   cum(i)=sum;
   probc(i)=cum(i)/numofpixels;
   output(i)=round(probc(i)*no_bins);
end

for i=1:size(K,1)
    for j=1:size(K,2)  
      L(i,j)=output(K(i,j)+1);     
    end
end

axes(handles.axes3);
imshow(L);

axes(handles.axes4);
imhist(L); 
```

# javafx - JavaFX 效果中的不透明度？

> ID：14428149
> 
> 赞同：0
> 
> 时间：2013-01-20T19:07:55.717
> 
> 标签：javafx, opacity

我正在尝试创建一个 java 代码来显示等轴测图。

它只是一个`3-dimensional table`带有一些`for`循环的显示。

我刚刚完成了一个处理来自某些来源的光分布的代码。所以，我知道：

*   它没有优化
*   这不现实
*   光在一些方块后面传播（每个方块都是独一无二的，如果它从一侧被照亮，它将是完整的，等等）。

我的问题是：我使用 JavaFX 的一些效果来改变每个块的色调和亮度。问题是，正如您在图片中看到的：

![插图](../Images/630ddb740ca7ddc04f6d60c6d5ac5bac.png)

随着光线的变化，我可以改变亮度/色调，但是如何改变不透明度呢？确保光的效果逐渐消失，而不是像现在这样变暗/橙色？

谢谢 ！

PS1：如你所见，岩石上的光线还可以，但草地上的光线……不好。我不知道为什么色调会这样。这是因为岩石只有灰色/白色。所以色调不会影响它。那么我可以让它改变它的颜色吗？

PS2：对不起，我有点菜鸟。我敢肯定这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:37:27.283

LOL 好的，实际上使用了多种效果，如 gaussianBlur、sepiaTone 和亮度级别。

它使它完美；）

# javascript - IE 在删除时不触发输入事件

> ID：14428159
> 
> 赞同：3
> 
> 时间：2013-01-20T19:08:47.800
> 
> 标签：javascript, jquery, internet-explorer, input

我正在尝试在表单中放置一些占位符。它们在 Chrome 和 Firefox 中运行良好，但我无法让它们在 IE 上运行（我正在使用 IE9 进行测试）。问题是输入事件仅在向输入添加文本时触发，而不是在删除时触发（使用删除键、剪切、右键单击等）。

这是我的代码（使用 jQuery）：

```
$input.on('input propertychange', function() {
    if($input.val() == '')
        $placeholder.show();
    else $placeholder.hide();
}); 
```

我读到这可能是一个已知问题。如果是这样，是否有任何解决方法？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:54:15.120

如果你想检查特殊键，你应该使用 keyup：

[http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

```
$('input').keyup(function(e){
   if (e.keyCode == 13)
      console.log('enter!');  
}); 
```

如果您只想在任何更改上触发事件，您应该使用更改事件：

[http://api.jquery.com/change/](http://api.jquery.com/change/)

```
$('input').change(function(){
   //When it changes
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:15:34.607

尝试使用`keyup`事件。每次用户释放按键时都会进行检查，因此对于按下删除和剪切组合键等的检查非常一致。

# cuda - 如何从文本编辑器在远程终端中运行脚本？

> ID：14428161
> 
> 赞同：0
> 
> 时间：2013-01-20T19:09:38.800
> 
> 标签：cuda, terminal, text-editor, textmate, qsub

我的问题有点针对我所面临的情况。我真的不确定要在这里搜索什么来找到并回答它。

作为我研究的一部分，我正在开发一些基于 CUDA 的程序。我可以访问带有 GPU 节点的超级计算集群 ( [http://www.rcac.purdue.edu/userinfo/resources/carter/](http://www.rcac.purdue.edu/userinfo/resources/carter/) )。我的开发机器是 2011 年末的 13 英寸 MacBook Pro，没有 nVidia GPU。

有两种方法可以在节点上运行 CUDA 应用程序。我可以使用“qsub”来安排作业并等待它运行并获取输出文件。或者我可以使用“qsub -I”命令在 gpu 节点本身上启动一个交互式 shell。这有一些与启动相关的等待时间，但一旦启动，我几乎可以实时运行应用程序，就好像我在本地机器上一样。

现在，我使用 TextMate 或 TextWrangler 之类的东西来编写我的代码。有什么方法可以直接从我的文本编辑器（或任何编辑器）在那个终端（ qsub -I one ）中运行命令。这样，我将能够比手动将文件复制到服务器、在那里编译和运行它更快地进行更改和测试。

——托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:30:17.470

您知道吗？新版本的[Textmate](https://github.com/textmate/textmate)允许您在本地 textmate 安装上编辑远程计算机上的内容，并立即将其保存在服务器上。这个技巧可能会为您节省大量时间。当然，大多数编辑器命令行都可以做到这一点（使用简单的 SSH 反向隧道技巧）。但是能够继续使用 Textmate 使 rmate 成为更好的选择。

在此处查看有关此内容的作者博客。[http://blog.macromates.com/2011/mate-and-rmate/](http://blog.macromates.com/2011/mate-and-rmate/)

Ernie [Miller 的博客](http://erniemiller.org/2011/12/12/textmate-2-rmate-awesome/)提供了一个很棒的循序渐进的方法。

# ubuntu - 如何修复“无法初始化与 ProtocolHandler 关联的端点”错误？

> ID：14428162
> 
> 赞同：5
> 
> 时间：2013-01-20T19:09:42.333
> 
> 标签：ubuntu, tomcat7

我已经在我的 Ubuntu 12.04 中安装了 Tomcat 7。

不知何故Tomcat没有启动。尝试了所有可能的步骤，查看了论坛；没有任何帮助。

谁能告诉我出了什么问题？

从我的电脑登录，命令：

```
~$ sh  /usr/share/tomcat7/bin/catalina.sh run

Using CATALINA_BASE:   /usr/share/tomcat7
Using CATALINA_HOME:   /usr/share/tomcat7
Using CATALINA_TMPDIR: /usr/share/tomcat7/temp
Using JRE_HOME:        /usr/lib/jvm/java-6-openjdk/jre
Using CLASSPATH:       /usr/share/tomcat7/bin/bootstrap.jar:/usr/share/tomcat7/bin/tomcat-juli.jar
21 Jan, 2013 12:34:17 AM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/var/lib/tomcat7/common/classes], exists: [false], isDirectory: [false], canRead: [false]
21 Jan, 2013 12:34:17 AM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/var/lib/tomcat7/common], exists: [false], isDirectory: [false], canRead: [false]
21 Jan, 2013 12:34:17 AM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/var/lib/tomcat7/server/classes], exists: [false], isDirectory: [false], canRead: [false]
21 Jan, 2013 12:34:17 AM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/var/lib/tomcat7/server], exists: [false], isDirectory: [false], canRead: [false]
21 Jan, 2013 12:34:17 AM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/var/lib/tomcat7/shared/classes], exists: [false], isDirectory: [false], canRead: [false]
21 Jan, 2013 12:34:17 AM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/var/lib/tomcat7/shared], exists: [false], isDirectory: [false], canRead: [false]
21 Jan, 2013 12:34:17 AM org.apache.catalina.startup.Catalina initDirs
SEVERE: Cannot find specified temporary folder at /usr/share/tomcat7/temp
21 Jan, 2013 12:34:17 AM org.apache.catalina.startup.Catalina load
WARNING: Unable to load server configuration from [/usr/share/tomcat7/conf/server.xml]
21 Jan, 2013 12:34:17 AM org.apache.catalina.startup.Catalina initDirs
SEVERE: Cannot find specified temporary folder at /usr/share/tomcat7/temp
21 Jan, 2013 12:34:17 AM org.apache.catalina.startup.Catalina load
WARNING: Unable to load server configuration from [/usr/share/tomcat7/conf/server.xml]
21 Jan, 2013 12:34:17 AM org.apache.catalina.startup.Catalina start
SEVERE: Cannot start server. Server instance is not configured. 
```

## 提前致谢。

## 从下面编辑。

## 重新安装Tomcat7。

这次丢失的“server.xml”文件位于路径：`/usr/share/tomcat7/skel/conf/server.xml`.

再次尝试：

```
~$ sh  /usr/share/tomcat7/bin/catalina.sh run 
```

日志如下。

```
Using CATALINA_BASE:   /usr/share/tomcat7
Using CATALINA_HOME:   /usr/share/tomcat7
Using CATALINA_TMPDIR: /usr/share/tomcat7/temp
Using JRE_HOME:        /usr/lib/jvm/java-6-openjdk/jre
Using CLASSPATH:       /usr/share/tomcat7/bin/bootstrap.jar:/usr/share/tomcat7/bin/tomcat-juli.jar
21 Jan, 2013 1:27:40 AM org.apache.catalina.startup.Catalina initDirs
SEVERE: Cannot find specified temporary folder at /usr/share/tomcat7/temp
21 Jan, 2013 1:27:40 AM org.apache.catalina.startup.Catalina load
WARNING: Unable to load server configuration from [/usr/share/tomcat7/conf/server.xml]
21 Jan, 2013 1:27:40 AM org.apache.catalina.startup.Catalina initDirs
SEVERE: Cannot find specified temporary folder at /usr/share/tomcat7/temp
21 Jan, 2013 1:27:40 AM org.apache.catalina.startup.Catalina load
WARNING: Unable to load server configuration from [/usr/share/tomcat7/conf/server.xml]
21 Jan, 2013 1:27:40 AM org.apache.catalina.startup.Catalina start
SEVERE: Cannot start server. Server instance is not configured. 
```

* * *

## 从下面编辑。

## 强行试图压制警告

现在我已经执行了以下操作：

1.  获取 bash 身份验证通行证：

    ```
    ~$ sudo bash 
    ```

2.  在 /usr/share/tomcat7/skel 创建一个临时目录

    ```
    ~# mkdir /usr/share/tomcat7/skel/temp 
    ```

3.  告诉 Tomcat7 我的 conf/server.xml 在哪里

    ```
    ~# export CATALINA_BASE=/usr/share/tomcat7/skel 
    ```

4.  运行 Catalina.sh

    ```
    ~# sh  /usr/share/tomcat7/bin/catalina.sh run 
    ```

日志：

```
Using CATALINA_BASE:   /usr/share/tomcat7/skel
Using CATALINA_HOME:   /usr/share/tomcat7
Using CATALINA_TMPDIR: /usr/share/tomcat7/skel/temp
Using JRE_HOME:        /usr/lib/jvm/java-6-openjdk/jre
Using CLASSPATH:       /usr/share/tomcat7/bin/bootstrap.jar:/usr/share/tomcat7/bin/tomcat-juli.jar
21 Jan, 2013 4:04:57 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
21 Jan, 2013 4:04:57 AM org.apache.coyote.AbstractProtocol init
SEVERE: Failed to initialize end point associated with ProtocolHandler ["http-bio-8080"]
java.net.BindException: Address already in use <null>:8080
    at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:391)
    at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:554)
    at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:409)
    at org.apache.coyote.http11.AbstractHttp11JsseProtocol.init(AbstractHttp11JsseProtocol.java:119)
    at org.apache.catalina.connector.Connector.initInternal(Connector.java:956)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:815)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:594)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:619)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:449)
Caused by: java.net.BindException: Address already in use
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:353)
    at java.net.ServerSocket.bind(ServerSocket.java:336)
    at java.net.ServerSocket.<init>(ServerSocket.java:202)
    at java.net.ServerSocket.<init>(ServerSocket.java:158)
    at org.apache.tomcat.util.net.DefaultServerSocketFactory.createSocket(DefaultServerSocketFactory.java:49)
    at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:378)
    ... 17 more
21 Jan, 2013 4:04:57 AM org.apache.catalina.core.StandardService initInternal
SEVERE: Failed to initialize connector [Connector[HTTP/1.1-8080]]
org.apache.catalina.LifecycleException: Failed to initialize component [Connector[HTTP/1.1-8080]]
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:106)
    at org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:815)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:594)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:619)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:449)
Caused by: org.apache.catalina.LifecycleException: Protocol handler initialization failed
    at org.apache.catalina.connector.Connector.initInternal(Connector.java:958)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    ... 12 more
Caused by: java.net.BindException: Address already in use <null>:8080
    at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:391)
    at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:554)
    at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:409)
    at org.apache.coyote.http11.AbstractHttp11JsseProtocol.init(AbstractHttp11JsseProtocol.java:119)
    at org.apache.catalina.connector.Connector.initInternal(Connector.java:956)
    ... 13 more
Caused by: java.net.BindException: Address already in use
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:353)
    at java.net.ServerSocket.bind(ServerSocket.java:336)
    at java.net.ServerSocket.<init>(ServerSocket.java:202)
    at java.net.ServerSocket.<init>(ServerSocket.java:158)
    at org.apache.tomcat.util.net.DefaultServerSocketFactory.createSocket(DefaultServerSocketFactory.java:49)
    at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:378)
    ... 17 more
21 Jan, 2013 4:04:57 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 811 ms
21 Jan, 2013 4:04:57 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
21 Jan, 2013 4:04:57 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.26
21 Jan, 2013 4:04:57 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 37 ms
21 Jan, 2013 4:04:57 AM org.apache.catalina.core.StandardServer await
SEVERE: StandardServer.await: create[localhost:8005]: 
java.net.BindException: Address already in use
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:353)
    at java.net.ServerSocket.bind(ServerSocket.java:336)
    at java.net.ServerSocket.<init>(ServerSocket.java:202)
    at org.apache.catalina.core.StandardServer.await(StandardServer.java:427)
    at org.apache.catalina.startup.Catalina.await(Catalina.java:727)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:673)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
21 Jan, 2013 4:04:57 AM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["http-bio-8080"]
21 Jan, 2013 4:04:57 AM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
21 Jan, 2013 4:04:57 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["http-bio-8080"]
21 Jan, 2013 4:04:57 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["http-bio-8080"] 
```

虽然存在 SEVERE 消息日志，但是当我在浏览器中测试 http://localhost:8080 时，我看到***它有效！***

**需要专家建议**：我应该继续我在 Tomcat7 上的工作还是需要解决一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:14:20.773

异常是错误消息中的状态，

```
SEVERE: Failed to initialize end point associated with ProtocolHandler ["http-bio-8080"]
java.net.BindException: Address already in use <null>:8080 
```

您有另一个服务器实例在同一台机器上运行任何其他进程，因此您将不允许您使用相同的端口，因此您需要首先停止该正在运行的实例或更改当前的 tomcat 端口号。

您可以停止正在运行的实例，

```
ps ax | grep java  //lists all java processes 
```

然后杀死进程，

```
sudo kill -9 pid  //pid-process id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-07T14:01:07.050

我已经通过 apt-get 在 Linux Mint 17 Qiana 上安装了 tomcat7，并使用以下方法解决了某种相同的问题：

```
cd /usr/share/tomcat7
ln -s /etc/tomcat7 conf
chmod -R 655 /etc/tomcat7/ 
```

[更多信息](https://stackoverflow.com/a/27342704/732328)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-29T13:30:55.610

通过重新下载重新安装解决了问题（下载了 *tar.gz 压缩版本）。

*   礼貌 harpun（[https://stackoverflow.com/users/283084/harpun](https://stackoverflow.com/users/283084/harpun)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-17T14:20:10.030

其中一些问题如“缺少”server.xml”等问题可以通过符号链接解决

```
cd /usr/share/tomcat7
ln -s /etc/tomcat7 conf 
```

在修复了类似的事情之后，这对我有用，所以我的意思是要注意这些链接。

我希望它会有用

我的配置是 Linux Mint 16, tomcat7 via apt-get

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T10:59:59.703

以下异常已经说明：

```
Caused by: java.net.BindException: Address already in use <null>:8080 
```

您在本地计算机上启动了另一台服务器，该服务器不允许 Tomcat 7 启动。“It Works”消息与 Tomcat7 无关，相反，应该会看到一个 Tomcat 管理器（带有 Tomcat 徽标）出现。

停止本地运行的任何 HTTP 服务器并重新启动 Tomcat7。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-23T19:06:32.183

正如布哈克·辛迪（Buhake Sindi）指出的那样，“它有效！” 消息不是Tomcat。为了将来参考，该特定消息来自 Apache httpd。

`service apache2 stop`在尝试启动 Tomcat7 之前尝试运行。我认为这是端口 8080 锁定最有可能的罪魁祸首。

# css - Chrome 和 Safari 错误或背景覆盖错误？

> ID：14428168
> 
> 赞同：0
> 
> 时间：2013-01-20T19:10:04.833
> 
> 标签：css, google-chrome, safari, webkit, border

我有这个网页，我有一张图片作为封面背景。我注意到在调整页面大小时背景会移动一点。现在这不是问题，我想这也是背景封面属性的功能。但是，在 Safari 和 Google Chrome 的某些百分比为 125% 和 150% 时，屏幕左侧会出现 2 像素或 1 像素的白色边框。从上到下。我不知道这是什么原因，我在 style.css 中找不到问题。所以我想知道你们中是否有人知道这是一个错误还是与我有关的事情？白色边框显示在 Google Chrome、Safari、Opera，但不是 Internet Explorer :P

# java - 即使我只需要其中一个，我是否应该设置 getter 和 setter？

> ID：14428169
> 
> 赞同：4
> 
> 时间：2013-01-20T19:10:05.490
> 
> 标签：java

我有一个对象，其中构造函数的工作是设置字段，并且在此之后不会设置或更改它们。但是，我需要一个吸气剂。然后，我是否需要设置器，即使我永远不会使用它们“以防万一”，或者我可以删除它们并只留下 getter，同时将值设置给构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:13:10.240

根据**java bean 规范**，省略 getter 或 setter 方法是合法的。所以，如果你从不使用 setter，你可以放心地忽略它们

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T19:19:32.350

如果您的构造函数正在设置字段并且您不需要更改它们，它们听起来像是不可变的。

我会让它们成为最终的，然后只有吸气剂。

如果您省略了决赛，那么您允许将来有人添加二传手。如果您不需要 setter，那么您应该将其作为设计的一部分强制执行，并使用带有最终字段的 gettets。

这将使任何阅读代码的人清楚地知道它们在设计上是不可变的。

还有一个问题是编写比我们需要的更多的代码。如果您编写 setter，那么您可能会引入错误，因为此代码可能未经过全面测试，因为您认为不需要它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:12:56.510

如果您想将对象属性用作只读并在对象的构造函数中对其进行初始化，那么您不需要设置器。如果你想在这个类之外访问这个属性，那么你需要 getter。

还建议您阅读此[SO Question](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T19:13:02.797

以下来自谷歌的建筑师：

```
class Foo{

   private int a;
   private int b;

   public Foo(int num1, int num2){
      a= num1;
      b= num2;
   }

   public int getA(){
     return a;
   }

   public int getB(){
     return b;
   }

} 
```

在这里你不需要设置器，一旦你构造了你的对象。你不能改变它的状态。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-20T19:16:11.547

对于只有您会看到的内容，这完全是个人选择，因为大多数编辑器都可以为您自动添加它们。

如果它是永远不应该改变的东西并且如果它改变了可能会发生坏事，那么它不应该有一个设置器并且应该是一个私有变量。

如果你写的东西着眼于重用和与他人共享，那么你确实需要 getter 和 setter 任何可以这样做的地方，因为你不知道其他人可能需要对你的 API 做什么。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-20T19:21:24.983

我认为这取决于您的构造函数在做什么。如果您的构造函数只是对变量进行原始设置，那么我认为您不需要为它们包含设置器。

但是，如果您的构造函数代码在设置变量的值之前执行任何类型的业务逻辑，那么我认为这保证至少为所讨论的变量（如果不是全部）创建一个设置器。

例如，如果您的构造函数代码执行此操作，则不要包含任何设置器：

```
public MyClass( String varA, String varB, int varC )
{
  this.varA = varA;
  this.varB = varB;
  this.varC = varC;
} 
```

但是，如果您的代码这样做，您应该包含一个 setter 来解耦逻辑并使其更清晰：

```
public MyClass( String varA, String varB, int varC )
{
  if ( varA == null )
  {
    this.varA = '(empty)';
  }
  else
  {
    this.varA = varA;
  }

  this.varB = varB;

  if ( varC < 0 )
  {
    callSomeMethod();
  }

  this.varC = varC;
} 
```

这种逻辑值得创建二传手。

# powershell - Powershell：检查是否使用 -ErrorAction 调用了脚本？

> ID：14428175
> 
> 赞同：4
> 
> 时间：2013-01-20T19:10:37.953
> 
> 标签：powershell

脚本（使用 CmdletBinding）和 cmdlet 在调用时都有一个可用的标准 -ErrorAction 参数。如果确实使用-ErrorAction调用了您的脚本，那么在您的脚本中是否有办法？

我问的原因是因为我想知道 $ErrorActionPreference 的自动变量值，就您的脚本而言，是由 -ErrorAction 设置的，还是来自您的会话级别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T19:43:03.153

`$ErrorActionPreference`是全局（会话）范围内的变量。如果您运行脚本但未指定`-ErrorAction`参数，它会从全局范围 ( ) 继承值`$global:ErrorActionPreference`。

如果您指定`-ErrorAction`参数，`$ErrorActionPreference`则会针对您的私有范围进行更改，这意味着它在脚本中保持不变，除非在运行您指定其他内容的代码时（例如，您使用另一个`-ErrorAction`值调用另一个脚本）。测试示例：

测试.ps1

```
[CmdletBinding()]
param()

Write-Host "Session: $($global:ErrorActionPreference)"
Write-Host "Script: $($ErrorActionPreference)" 
```

输出：

```
PS-ADMIN > $ErrorActionPreference
Continue

PS-ADMIN > .\Test.ps1
Session: Continue
Script: Continue

PS-ADMIN > .\Test.ps1 -ErrorAction Ignore
Session: Continue
Script: Ignore

PS-ADMIN > $ErrorActionPreference
Continue 
```

如果你想测试脚本是否被`-ErrorAction`参数调用，你可以使用 ex.

```
if ($global:ErrorActionPreference -ne $ErrorActionPreference) { Write-Host "changed" } 
```

如果您不知道作用域是什么，请在 powershell 控制台中输入：`Get-Help about_scopes`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T21:40:54.410

检查 $MyInvocation.BoundParameters 对象。您可以使用内置的 $PSBoundParameters 变量，但我发现在某些情况下它是空的（与此问题没有直接关系），因此使用 $MyInvocation 更安全。

```
function Test-ErrorAction
{
    param()

    if($MyInvocation.BoundParameters.ContainsKey('ErrorAction'))
    {
        'The ErrorAction parameter has been specified'
    }
    else
    {
        'The ErrorAction parameter was not specified'
    }
}

Test-ErrorAction 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T21:09:29.683

如果您需要知道是否使用`-ErrorAction`参数调用了 cmdlet，请执行以下操作：

```
[CmdletBinding()]
param()

if ($myinvocation.Line.ToLower() -match "-erroraction" )
    {
      "yessss"
    }
else
    {
      "nooooo"
    } 
```

这也是`true`当参数具有与全局相同的值时`$ErrorActionPreference`

# postgresql - 将旧表从已删除的 postgresql 导入到新安装的 postgresql

> ID：14428176
> 
> 赞同：1
> 
> 时间：2013-01-20T19:10:43.047
> 
> 标签：postgresql, import

我的 postgresql 有问题，我复制了所有文件，然后将其删除。然后，我安装了新的，问题就解决了。现在可以将旧文件和文件导入新文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:12:08.933

如果它们是相同的主要版本（即 9.0 到 9.0.4，而不是 9.0 到 9.1），那么您可以在旧数据目录中启动并获取所有内容。PostgreSQL 没有用于表文件的简单导入工具，因此如果您只想拉入一些表，最好的选择是`pg_dump -c`紧随其后，`pg_restore -t tablename`这样您就可以有选择地将表恢复到新集群中。

# javascript - 如何在服务器端捕获 JSON 对象并做出响应（在 javascript 中）

> ID：14428180
> 
> 赞同：1
> 
> 时间：2013-01-20T19:11:04.597
> 
> 标签：javascript, ajax, json, html

我尝试构建一个应用程序`using Javascript, HTML, CSS, AJAX, JSON`，其中客户端填写表格并发送到服务器，然后服务器响应客户端。

**对于这个问题，我已经完成了这些步骤，**

> 1.  首先，我构建了一个具有表单的 HTML 页面。
> 2.  然后，我使用 onClick 事件处理程序将信息发送到 javascript。
> 3.  然后，我构建了一个包含表单信息的 JSON 对象。

代码是，

**HTML 代码：-**

```
<div id="stylized" class="myform">
            <form name = "user_form" action = "operation.js" method = "post">
                <h1>Sign-up form</h1>
                <p>This is the basic look of my form without table</p>

                <label>Name
                <span class="small">Add your name</span>
                </label>
                <input type="text" name="name" id = "name_data"  /><br>
                <p id = "name_update"></p><br>

                <label>Email
                <span class="small">Add a valid address</span>
                </label>
                <input type="text" name="email"  /><br>
                <p id = "email_update"></p><br>

                <label>Url
                <span class="small">Complete URL</span>
                </label>
                <input type="text" name="url"  />

                <label>Comment
                <span class="small">That you want to say</span>
                </label>
                <textarea type="text" name="comment"  ></textarea>

                <button type="button" name = "button"  onClick="operatn(this.form)">Submit</button>
                <div class="spacer"></div>
                <h4 align = "center" id = "submit_update"></h4>
                <div class="spacer"></div>
            </form>
        </div> 
```

**JAVASCRIPT 代码：-**

```
function operatn(x) {
    var name1 = x.name.value;
    var email1 = x.email.value;
    var url1 = x.url.value;
    var comment1 = x.comment.value;
    //alert(comment);

    var txt = '{ "details" : [ ' +
                        ' { "name_key" : "name", "name_value" : "' + name1 + '" }, ' + 
                        ' { "email_key": "email" , "email_value" : "' + email1 + '" }, ' +
                        ' { "url_key" : "url" , "url_value" : "' + url1 + '"  }, ' +
                        ' { "comment_key" : "comment" , "comment_value" : "' + comment1 + '" } ] }';

    var obj = eval( "(" + txt + ")" );
    //alert(obj.details[3].comment_value);

} 
```

但我很困惑，如何将此对象发送到服务器？（告诉我该代码或任何好的链接）并且，

客户端如何与具有服务器 IP 地址和端口号信息的服务器建立连接。

**帮我 。提前致谢。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:25:29.530

您缺少的是代码的“ajax”部分，您的代码需要向服务器发出请求。这是使用`XMLHttpRequest`.

使用抽象 XMLHttmlRequest 的 jQuery，

```
function operatn(x) {
    $.ajax({
       url:"http://yoursiteurl.com",
       data:{
           comment:x.comment.value,
           email: x.email.value,
           url:x.url.value,
           name:x.name,value,
       }
    }).done(function(serverResponse){
         //here you can handle server response
    }).fail(function(err){
         //here you can handle errors
    });

    //alert(obj.details[3].comment_value);

} 
```

只是不要忘记它是异步的。

**编辑：**我稍微改变了键值对，因为 JSON 对象是键值对。

# jquery - 使用jquery同时聚焦和（聚焦）

> ID：14428181
> 
> 赞同：0
> 
> 时间：2013-01-20T19:11:10.890
> 
> 标签：jquery

我想保护我的输入免受暴力破解
，所以我对我的输入进行了一些验证..我希望他们也能处理焦点事件和
焦点事件！有什么优雅的方法可以做到这一点，除了这个：

```
$(this).focus(function(){
// excute my code
}); 
```

接着

```
$(this).focusout(function(){
// excute the same code !
}); 
```

我想对太多输入执行此操作..我不想为（焦点和焦点输出）做两次相同的工作以避免页面的额外负载！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:13:12.983

虽然我不同意这个问题的前提（你不能通过客户端代码防止暴力攻击），但你可以通过将两个事件作为空格分隔的字符串传递给来简化你的代码[`on`](http://api.jquery.com/on/)：

```
$(this).on('focus focusout', function() {
    // excute my code
}); 
```

这是小提琴：http: [//jsfiddle.net/bL79F/](http://jsfiddle.net/bL79F/)

* * *

如果您使用的是旧版本的 jQuery，请[`bind`](http://api.jquery.com/bind/)改用：

```
$(this).bind('focus focusout', function() {
    // excute my code
}); 
```

这是小提琴：http: [//jsfiddle.net/bL79F/1/](http://jsfiddle.net/bL79F/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:13:35.130

只需创建一次函数，然后在需要的地方使用它

```
function validate(){
   // validation code
}

$(this).on('focus focusout', validate ); 
```

但是任何客户端验证都必然会被覆盖......
您将**需要**进行服务器端验证..

* * *

对于早期版本的 jQuery 使用

```
$(this).bind('focus focusout', validate ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:17:25.757

正如大家所说，无论如何，您都需要服务器端验证。我不确定 jQuery 是否将`focusin`and转换`focusout`为`focus`and `blur`，但我想它会。

较新的版本：

```
$(this).on('focusin focusout focus blur', function () { 
```

旧版本只是替换`.on`为`.bind`，它应该工作相同

# python - NumPy 最小/最大就地分配

> ID：14428183
> 
> 赞同：7
> 
> 时间：2013-01-20T19:11:24.390
> 
> 标签：python, numpy

是否可以在没有额外副本的情况下使用 NumPy 多维数组执行最小/最大就地分配？

说`a`and`b`是两个 2D numpy 数组，我想`a[i,j] = min(a[i,j], b[i,j])`为所有`i`and `j`.

一种方法是：

```
a = numpy.minimum(a, b) 
```

但根据文档，`numpy.minimum`创建并返回一个新数组：

> numpy.minimum(x1, x2[, out])
> 数组元素的元素最小值。
> 比较两个数组并返回一个包含元素最小值**的新数组。**

所以在上面的代码中，它会创建一个新的临时数组（`a`和的最小值`b`），然后将它分配给`a`并处置它，对吧？

有没有办法做类似的事情，`a.min_with(b)`以便将最小结果分配回`a`原位？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T19:13:38.007

`numpy.minimum()`接受一个可选的第三个参数，即输出数组。您可以`a`在此处指定对其进行修改：

```
In [9]: a = np.array([[1, 2, 3], [2, 2, 2], [3, 2, 1]])

In [10]: b = np.array([[3, 2, 1], [1, 2, 1], [1, 2, 1]])

In [11]: np.minimum(a, b, a)
Out[11]: 
array([[1, 2, 1],
       [1, 2, 1],
       [1, 2, 1]])

In [12]: a
Out[12]: 
array([[1, 2, 1],
       [1, 2, 1],
       [1, 2, 1]]) 
```

# android - android listview插入顶部动画

> ID：14428184
> 
> 赞同：1
> 
> 时间：2013-01-20T19:11:24.967
> 
> 标签：android, android-listview, android-animation

我正在使用 a`ListView`来显示自定义元素列表。我在列表顶部添加元素，我如何编写一个在列表上腾出空间并从顶部“滑入”新项目的动画？

# polymorphism - OCaml 中最简单的多态性示例？

> ID：14428189
> 
> 赞同：0
> 
> 时间：2013-01-20T19:11:48.267
> 
> 标签：polymorphism, ocaml, sample

我对 OCaml 很陌生。你能给我一个新手能理解的OCaml中最简单的多态性例子吗？我了解 Java、C# 和 C++，并且对函数式语言也有一定的了解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T19:35:46.483

身份是多态的：

```
let id x = x 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T19:29:40.493

这是 OCaml 中多态函数的一个非常简单的示例：

```
let rec length = function
| [] -> 0
| _ :: tail -> 1 + length tail 
```

此函数计算任何列表的长度。换句话说，列表中事物的类型是完全多态的。这种多态性被称为参数化，以将其与更多 OO 类型的“ad hoc”多态性（如在 Java 中）区分开来，后者通过针对不同情况给出不同的实现来实现多态性。使用参数多态性，只有一种实现适用于多种类型。当然，OCaml 也有 OO 风格的多态性。Java 有一种参数多态性，称为“泛型”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T19:35:28.880

这是 Jeffrey 谈论的即席多态的经典 OO “坏例子”，以防您感兴趣：

```
class virtual animal = object
  method virtual say : unit
end

class dog = object
  inherit animal
  method say = print_endline "bark"
end

class cat = object
  inherit animal
  method say = print_endline "meow"
end

let my_animals = [new dog; new cat]

let () = List.iter (fun x -> x#say) my_animals 
```

# performance - 加速嵌套的 for 循环

> ID：14428190
> 
> 赞同：3
> 
> 时间：2013-01-20T19:12:12.707
> 
> 标签：performance, matlab, vectorization

我一直在努力加快以下功能，但没有结果：

```
function beta = beta_c(k,c,gamma)
beta = zeros(size(k));
E = @(x) (1.453*x.^4)./((1 + x.^2).^(17/6));
for ii = 1:size(k,1)
    for jj = 1:size(k,2)
        E_int = integral(E,k(ii,jj),10000);
        beta(ii,jj) = c*gamma/(k(ii,jj)*sqrt(E_int));
    end
end
end 
```

到目前为止，我是这样解决的：

```
function beta = beta_calc(k,c,gamma)
k_1d = reshape(k,[1,numel(k)]);
E_1d =@(k) 1.453.*k.^4./((1 + k.^2).^(17/6));
E_int = zeros(1,numel(k_1d));
parfor ii = 1:numel(k_1d)
E_int(ii) = quad(E_1d,k_1d(ii),10000);
end
beta_1d = c*gamma./(k_1d.*sqrt(E_int));
beta = reshape(beta_1d,[size(k,1),size(k,2)]);
end 
```

在我看来，它并没有真正提高性能。你怎么看待这件事？

你介意发光吗？

我提前谢谢你。

**编辑**

我将介绍一些涉及我的问题的理论背景。一般情况下，beta 计算如下

![在此处输入图像描述](../Images/edf88e97af47124a6cb6c0903e43c854.png)

因此，在一维 k 数组的简化情况下，E_int 可以计算为

```
E = 1.453.*k.^4./((1 + k.^2).^(17/6));
E_int = 1.5 - cumtrapz(k,E); 
```

或者，或者，作为

```
E_int(1) = 1.5;
for jj = 2:numel(k)
E =@(k) 1.453.*k.^4./((1 + k.^2).^(17/6));
E_int(jj) = E_int(jj - 1) - integral(E,k(jj-1),k(jj));
end 
```

尽管如此，`k`目前是一个矩阵`k(size1,size2)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:47:08.723

我喜欢这个问题。

*问题：*该函数`integral`将积分限制为仅标量。因此，很难对 的计算进行矢量化`E_int`。

*一条线索：*似乎有很多冗余将*相同*的功能一遍又一遍地集成`k(ii,jj)`到无穷大......

*建议的解决方案：*如何将值`k`从最小到最大排序并`E_sort_int(si) = integral( E, sortedK(si), sortedK(si+1) );`与`sortedK( numel(k) + 1 ) = 10000;`. 然后是 的全部值`E_int = cumsum( E_sort_int );`（您只需要“撤消”排序并将其重新整形为 的大小`k`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T07:23:30.910

这是另一种方法，并行化，因为它很容易使用`spmd`or `parfor`。而不是`integral`考虑`quad`，请参阅此[链接](http://people.sc.fsu.edu/~jburkardt/m_src/quad_parfor/quad_parfor.html)以获取示例...

# unix - grep -f 最大模式数？

> ID：14428191
> 
> 赞同：7
> 
> 时间：2013-01-20T19:12:21.400
> 
> 标签：unix, grep

我想在带有 -f 的文本文件上使用 grep 来匹配一长串（10,000）模式。原来 grep 不喜欢这个（谁知道？）。一天后，它没有产生任何东西。较小的列表几乎可以立即生效。

我在想我可以把我的长长的名单分开做几次。知道模式列表的最大长度可能是多少吗？

另外，我对unix很陌生。欢迎替代方法。模式列表或搜索项位于纯文本文件中，每行一个。

谢谢大家的指导。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T14:15:32.713

从评论来看，您匹配的模式似乎是固定字符串。如果是这种情况，您绝对应该使用`-F`. 这将大大提高匹配的速度。（在中等功率的机器上使用 479,000 个字符串匹配 3 行的输入文件 using`-F`需要不到 1.5 秒。不使用`-F`，同一台机器在几分钟后还没有完成。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-24T12:45:51.467

我遇到了同样的问题。在一个包含 900 万行的文件中搜索 400 万个模式。好像是RAM的问题。所以我得到了这个整洁的小工作，它可能比拆分和加入要慢，但它只需要这一行。

```
 while read line; do grep $line fileToSearchIn;done < patternFile 
```

我需要使用该解决方法，因为该`-F`标志不是该大文件的解决方案...

编辑：这对于大文件来说似乎真的很慢。[经过更多研究后，我发现了来自 Kent NGS-editing-Tools](http://genomewiki.ucsc.edu/index.php/Kent_source_utilities)的“faSomeRecords”和其他很棒的工具

我自己尝试从 550 万条记录文件中提取 200 万条 fasta-rec。花了大约。30秒..

干杯

编辑：[直接下载链接](http://hgdownload.cse.ucsc.edu/admin/exe/linux.x86_64/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T23:32:46.297

这是一个 bash 脚本，您可以在文件上运行（或者，如果您愿意，也可以是文件的子集）。它将密钥文件分割成越来越大的块，并为每个块尝试 grep 操作。这些操作是计时的——现在我正在计时每个 grep 操作，以及处理所有子表达式的总时间。输出以秒为单位 - 通过一些努力，您可以获得毫秒，但您遇到的问题不太可能需要这种粒度。使用以下形式的命令在终端窗口中运行脚本

`./timeScript keyFile textFile 100 > outputFile`

这将运行脚本，使用 keyFile 作为存储搜索键的文件，使用 textFile 作为您要查找键的文件，并使用 100 作为初始块大小。在每个循环中，块大小将加倍。

在第二个终端中，运行命令

`tail -f outputFile`

这将跟踪您的其他进程的输出到文件中`outputFile`

我建议您打开第三个终端窗口，并`top`在该窗口中运行。您将能够看到您的进程占用了多少内存和 CPU - 同样，如果您看到大量内存消耗，它会提示您事情进展不顺利。

这应该可以让您找出事情何时开始放缓 - 这就是您问题的答案。我不认为有一个“神奇的数字”——它可能取决于你的机器，特别是文件大小和你拥有的内存量。

您可以获取脚本的输出并将其通过 grep：

`grep entire outputFile`

您最终会得到摘要 - 块大小和所花费的时间，例如

`Time for processing entire file with blocksize 800: 4 seconds`

如果您将这些数字相互绘制（或简单地检查数字），您将看到算法何时最佳，何时变慢。

这是代码：我没有进行广泛的错误检查，但它似乎对我有用。显然，在你的最终解决方案中，你需要对 grep 的输出做一些事情（而不是`wc -l`像我做的那样通过管道来查看匹配了多少行）......

```
#!/bin/bash
# script to look at difference in timing
# when grepping a file with a large number of expressions
# assume first argument = name of file with list of expressions
# second argument = name of file to check
# optional third argument = initial block size (default 100)
#
# split f1 into chunks of 1, 2, 4, 8... expressions at a time
# and print out how long it took to process all the lines in f2

if (($# < 2 )); then
  echo Warning: need at leasttwo parameters.
  echo Usage: timeScript keyFile searchFile [initial blocksize]
  exit 0
fi

f1_linecount=`cat $1 | wc -l`
echo linecount of file1 is $f1_linecount

f2_linecount=`cat $2 | wc -l`
echo linecount of file2 is $f2_linecount
echo

if (($# < 3 )); then
  blockLength=100
else
  blockLength=$3
fi

while (($blockLength < f1_linecount))
do
  echo Using blocks of $blockLength
  #split is a built in command that splits the file
  # -l tells it to break after $blockLength lines
  # and the block$blockLength parameter is a prefix for the file
  split -l $blockLength $1 block$blockLength
  Tstart="$(date +%s)"
  Tbefore=$Tstart

  for fn in block*
    do
      echo "grep -f $fn $2 | wc -l"
      echo number of lines matched: `grep -f $fn $2 | wc -l`
      Tnow="$(($(date +%s)))"
      echo Time taken: $(($Tnow - $Tbefore)) s
      Tbefore=$Tnow
    done
  echo Time for processing entire file with blocksize $blockLength: $(($Tnow - $Tstart)) seconds
  blockLength=$((2*$blockLength))
  # remove the split files - no longer needed
  rm block*
  echo block length is now $blockLength and f1 linecount is $f1_linecount
done

exit 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T23:51:33.930

你当然可以尝试 sed 看看你是否得到了更好的结果，但是在任何大小的文件上都需要做很多工作。您没有提供有关您的问题的任何详细信息，但是如果您有 10k 模式，我会尝试考虑是否有某种方法可以将它们概括为较少数量的正则表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-04T18:51:46.903

这是一个 perl 脚本“match_many.pl”，它解决了“大量键与大量记录”问题的一个非常常见的子集。从标准输入每行接受一个键。两个命令行参数是要搜索的文件的名称和必须匹配键的字段（空格分隔）。原始问题的这个子集可以快速解决，因为记录中匹配（如果有）的位置是提前知道的，并且键始终对应于记录中的整个字段。在一个典型的案例中，它使用 42899 个键搜索了 9400265 条记录，匹配​​了 42401 个键并在 41 秒内发出了 1831944 条记录。更一般的情况，其中键可能作为子字符串出现在记录的任何部分，是这个脚本没有解决的更困难的问题。

```
#!/usr/bin/perl -w
use strict;
use warnings;
my $kcount;
my ($infile,$test_field) = @ARGV;
if(!defined($infile) || "$infile" eq "" || !defined($test_field) || ($test_field <= 0)){
  die "syntax: match_many.pl infile field" 
}
my %keys;       # hash of keys
$test_field--;  # external range (1,N) to internal range (0,N-1)

$kcount=0;
while(<STDIN>) {
   my $line = $_;
   chomp($line);
   $keys {$line} = 1;
   $kcount++
}
print STDERR "keys read: $kcount\n";

my $records = 0;
my $emitted = 0;
open(INFILE, $infile )  or die "Could not open $infile";
while(<INFILE>) {
   if(substr($_,0,1) =~ /#/){ #skip comment lines
     next;
   }
   my $line = $_;
   chomp($line);
   $line =~ s/^\s+//;
   my @fields = split(/\s+/, $line);
   if(exists($keys{$fields[$test_field]})){
      print STDOUT "$line\n";
      $emitted++;
      $keys{$fields[$test_field]}++;
   }
   $records++;
}

$kcount=0;
while( my( $key, $value ) = each %keys ){
   if($value > 1){ 
      $kcount++; 
   }
}

close(INFILE);
print STDERR "records read: $records, emitted: $emitted; keys matched: $kcount\n";

exit; 
```

# php - PHP 无符号右移 - 故障

> ID：14428193
> 
> 赞同：6
> 
> 时间：2013-01-20T19:12:31.430
> 
> 标签：php, negative-number, bit-shift

因此，当使用我的方法在 PHP 中执行 ( >>> ) 无符号右移时，当数字涉及负数时，结果是不正确的。

PHP 应用结果：

```
INPUT: 10 >>> 3
INPUT: -10 >>> 3
OUTPUT: 1
OUTPUT: 2684354558 
```

JAVA应用结果：

```
INPUT: 10 >>> 3
INPUT: -10 >>> 3
OUTPUT: 1
OUTPUT: 536870910 
```

（上面的结果正确，由Java生成，下面的结果不正确，由PHP生成）

只有当 PHP 中的数字为负数时才会失败。

这些应用程序中使用的转变是：

如果可以的话请帮忙！

PHP中的移位方法：

```
function urshift($x, $n){
$mask = 0x40000000;
if ($x < 0){
    $x &= 0x7FFFFFFF;
    $mask = $mask >> ($n-1);
    $ret = ($x >> $n) | $mask;
    $ret = str_pad(decbin($ret), 32, '0', STR_PAD_LEFT);
    $ret[0] = '1';
    $ret = bindec($ret);
} else {
        $ret = (int)$x >> (int)$n;
}
return $ret; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-20T19:39:50.097

这个 uRShift 更短，可以在 32 位和 64 位 PHP 上正常工作，并且在 32 位 PHP 上给出与 Java 版本相同的结果，它具有与 Java 相同的整数大小；

```
function uRShift($a, $b)
{
    if($b == 0) return $a;
    return ($a >> $b) & ~(1<<(8*PHP_INT_SIZE-1)>>($b-1));
}

> uRShift(-10,3)  
536870910

> uRShift(10,3)
1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T19:29:12.923

试试这个功能。

```
function uRShift($a, $b) 
{ 
    $z = hexdec(80000000); 
    if ($z & $a) 
    { 
        $a = ($a >> 1); 
        $a &= (~$z); 
        $a |= 0x40000000; 
        $a = ($a >> ($b - 1)); 
    } else { 
        $a = ($a >> $b); 
    } 
    return $a; 
} 
```

# wordpress - Wordpress 上的固定链接问题

> ID：14428194
> 
> 赞同：0
> 
> 时间：2013-01-20T19:12:46.657
> 
> 标签：wordpress, permalinks

一年前我将我的永久链接结构更改为`/%postname%/zippy`

现在我想把它改回`/%postname%/`，但是当我这样做时，没有从 **/zippy 到帖子的重定向。

谢谢你帮我摆脱这个烂摊子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T09:32:38.577

This plugin [http://tutslog.com/tutorials/plugin-wordpress-supermalink-139.html](http://tutslog.com/tutorials/plugin-wordpress-supermalink-139.html) may can't help you fix this issue. But It helps you avoid issues like that.

# sql - Postgresql 记录每日统计信息

> ID：14428195
> 
> 赞同：0
> 
> 时间：2013-01-20T19:12:47.360
> 
> 标签：sql, postgresql, database-design, relational-database, postgresql-9.0

晚上所有，

我正在尝试创建一个表，该表每天存储我的应用程序的一系列网络使用统计信息（微不足道的事情，例如没有新用户、总访问量等），我目前正在动态查询这些，但是我会现在想开始存储它们，部分是为了提高性能（将聚合查询的负载减少到单个查找），部分是为了允许历史分析。

我已经为表提出了以下基本模式（列会比这更多，只是为了给出一个想法）

```
create table web_stats(
    web_stat_id bigserial primary key,
    date_created timestamp not null default now(),
    user_count integer not null,
    new_user_count integer not null
);
comment on table web_stats is 'Table stores statistics on web usage'; 
```

现在，我很高兴创建查询来填充表（我使用 Quartz 调度程序每天运行查询）

但是，我不太确定为过去日期追溯填充表的最佳方法，我是否应该使用 INSERT 语句为应用程序上线以来的每一天（大约 2 年前）创建一个空白行，然后使用 UPDATE 填充空白行？还是可以一举搞定？有人可以提供一些 SQL 来创建行吗？

如果我的设计假设有任何问题，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:45:21.830

这就是我最终这样做的方式

```
INSERT INTO web_stats (date_created)
    SELECT DATE('2011-08-20')+x.id
    FROM generate_series(0,521) AS x(id); 
```

其中 2011-08-20 是应用程序上线的日期，521 是从现在到那时的天数

这将创建空表，以便我可以使用 date_created 字段使用 UPDATE 语句填充其他字段

也许不是最有效的方法，但它有效

# facebook - 为什么我在 wordpress 中使用 facebook 评论的评论页面上存在巨大差距？

> ID：14428202
> 
> 赞同：0
> 
> 时间：2013-01-20T19:13:11.783
> 
> 标签：facebook, facebook-like, wordpress-theming, wordpress

我对 wordpress 有点陌生，我研究了如何在我的网页上添加 facebook 评论，并且我已经成功地做到了，但是页面顶部和有人可以发布回复的位置之间存在巨大差距。谁能帮助我并告诉我我做错了什么？我刚上过第一堂关于 php 的课，所以我知道一点，应该明白这一点，但我觉得好像我错过了一些东西。

这是该页面的链接：

[http://tamericanpatriot.co.nf/2013/01/16/test-number-1/#respond](http://theamericanpatriot.co.nf/2013/01/16/test-number-1/#respond)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:48:39.573

看起来一个名为“Wordpress 的 Facebook 评论”的插件正在造成这种差距。您应该禁用该插件，因为如果您在上面的评论中编写了代码，则不需要它。

# .net - Windows 服务中的 ODBC 连接在第二次连接尝试时失败

> ID：14428214
> 
> 赞同：0
> 
> 时间：2013-01-20T19:14:14.607
> 
> 标签：.net, service, ado.net, odbc, 4d-database

我编写了一个 .Net Windows 服务，每 4 小时将数据从 4D 数据库 (v12) 复制到 SQL Server 数据库。它在 Windows 7 32 位上运行并作为本地系统运行。我正在使用 4D ODBC 驱动程序的 12.02 版。

当服务 1st 运行时，一切正常。在第二次运行时，与 SQL Server 的连接仍然有效，但与 4D 的 ODBC 连接出现以下错误：

> System.Data.Odbc.OdbcException (0x80131937): 错误 [08001] 客户端无法建立连接: System.Data.Odbc.OdbcConnection.HandleError(OdbcHandle hrHandle, RetCode retcode) 处的 SQL Se 在 System.Data.Odbc.OdbcConnectionHandle ..ctor（OdbcConnection 连接，OdbcConnectionString constr，OdbcEnvironmentHandle environmentHandle）在 System.Data.Odbc.OdbcConnectionOpen..ctor（OdbcConnection outerConnection，OdbcConnectionString connectionOptions）在 System.Data.Odbc.OdbcConnectionFactory.CreateConnection（DbConnectionOptions 选项，DbConnectionPoolKey poolKey，对象 poolGroupProviderInfo , DbConnectionPool 池, DbConnection owningObject) 在 System.Data.ProviderBase.DbConnectionFactory.CreateConnection(DbConnectionOptions 选项, DbConnectionPoolKey poolKey, 对象 poolGroupProviderInfo,DbConnectionPool 池，DbConnection owningConnection，DbConnectionOptions userOptions）在 System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection（DbConnection owningConnection，DbConnectionPoolGroup poolGroup，DbConnectionOptions userOptions）在 System.Data.ProviderBase.DbConnectionFactory.TryGetConnection（DbConnection owningConnection，TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 次重试，DbConnectionOptions userOptions) at System.Data.ProviderBase.DbConnectionInternal.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) at System.Data.Odbc.OdbcConnection.Open() at DataWarehouseLoader.DAL.DWGenerator.Run() at DataWarehouseSvc.DataWarehouseSvc。 OnTimerElapsed（对象发送者，ElapsedEventArgs e）

每次运行后，代码都会小心处理与 SQL Server 和 4D 的连接，方法如下：

```
using (_connSQL = new SqlConnection(DataWarehouseCS))
{
   _connSQL.Open();

   using (_conn4D = new OdbcConnection(4DCS))
   {
      _conn4D.Open();
      Load4DTables();
   }   
} 
```

一旦发生错误，在我停止/启动服务之前，ODBC 连接将不再工作。这将允许它再次工作一次。我尝试使用系统 DSN 和无 DSN 连接进行连接，但结果是一样的。我相信如果我让服务更频繁地运行，比如每 10 分钟一次，它会工作不止一次，但是当足够长的时间让它停止工作时，一定会发生一些事情。

我很困惑问题是什么。我非常感谢任何帮助或建议尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:15:09.443

我一直找不到问题所在。我相信这是 4D ODBC 驱动程序中的一个错误。我的解决方法是创建一个单独的控制台应用程序来处理 4D 部分。

我可以在需要时将此控制台应用程序作为服务的新进程启动。这样，当它完成连接到 4D 的控制台应用程序时，它会从内存中卸载，但服务可以保持运行。

从内存中卸载程序似乎可以清除任何 4D 连接问题，并允许后续运行仍然有效。

# javascript - 我应该在没有特殊含义的情况下使用 HTML 中的什么标签，仅用于携带元数据？

> ID：14428215
> 
> 赞同：4
> 
> 时间：2013-01-20T19:14:22.330
> 
> 标签：javascript, html, metadata

是否有任何无意义的 HTML 标签来携带额外的元数据，例如指定块/区域的 JavaScript 属性？喜欢：

```
<div class="item">
   <meaninglesselement data-id="123">
   <meaninglesselement data-type="sometype">
   <meaninglesselement data-validate="true">

   ...
</div> 
```

我知道我可以将`data-*`属性移动到，`div class="item"`但我想要一个干净代码的解决方案，即使会有很多参数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-20T19:23:21.357

如果整个文档的元数据可能对访问者或机器人有用，则应使用[`meta`element](http://www.w3.org/TR/html5/document-metadata.html#the-meta-element)。您只能使用已[定义](http://www.w3.org/TR/html5/document-metadata.html#standard-metadata-names)或[注册的`name`值](http://wiki.whatwg.org/wiki/MetaExtensions)（但您可以在 wiki 中[注册](http://www.w3.org/TR/html5/document-metadata.html#other-metadata-names)新值）。

对于只需要脚本等的元数据，您可以在现有元素（例如）上使用[`data-*`属性](http://www.w3.org/TR/html5/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)`body`，或者您可以使用[`script`元素](http://www.w3.org/TR/html5/scripting-1.html#the-script-element)：

> 该`script`元素允许作者在他们的文档中包含动态脚本和**数据块。**该元素**不代表用户的内容**。
> 
> […]
> 
> 用于包含数据块时（相对于脚本），数据必须内嵌，数据的格式必须使用`type`属性给出，`src`属性不能指定，`script`元素的内容必须符合要求为使用的格式定义。

您可以将此元素放置在`head`或 文档正文中，其中也可以使用[短语内容](http://www.w3.org/TR/html5/dom.html#phrasing-content-1)（如）。`span`

有一个用作数据块（而不是脚本）的信息示例：

> ```
>  <script type="text/x-game-map">
>  ........U.........e
>  o............A....e
>  .....A.....AAA....e
>  .A..AAA...AAAAA...e
>  </script> 
> ```

因此，您可以使用 HTML 或 JSON 或任何您需要的格式。

如果您想使用 HTML，它可能 (***) 看起来像：

```
<div class="item">
  <script type="text/html">
    <div data-id="123"></div>
    <div data-foo="bar"></div>
    <div>foobar</div>
  </script>
</div> 
```

***（[我不确定](https://stackoverflow.com/q/19135200/1591669)它是否必须是“完整”的符合 HTML 文档，或者是否也允许像我的示例中那样使用“片段”）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-20T19:16:38.640

数据适用于div，属性应该在div上。如果你想用每行一个项目来格式化你的代码，那么你可以。

```
<div class="item"
     data-id="123"
     data-type="sometype"
     data-validate="true"> 
```

没有设计用于存储文档正文中的元数据的元素。

# wpf - WPF ListBox 选择问题，向用户提供反馈

> ID：14428216
> 
> 赞同：1
> 
> 时间：2013-01-20T19:14:22.597
> 
> 标签：wpf, listbox, selection

我正在尝试为具有一个画布但多个“页面”的应用程序创建一个显示页面内容缩略图视图的列表框。是的，这可能不是最好的起点，但由于历史原因，这就是我所拥有的。我已经实现了 ListBox，其数据绑定到具有 PageData 的 ObservableCollection 的单例“工作簿”（页面上出现的所有内容，包括它的背景）。我真正想要的是能够在 ListBoxItem 被选中时更改它的边框颜色，并在其内容是托管集合的类中当前选定的项目时保持该边框颜色。

我的问题是：- 1/我无法让 ListBox 在程序启动时选择第一项。

2/当 ListBox 失去焦点时 SelectedIndex 总是-1（所以没有选择）

3/ 添加到列表框导致没有选择（SelectedIndex == -1）

4/ 使用触发器，我可以设置 selectedItem 的边框，但是当 ListBox 失去焦点时这会丢失。由于 ListBoxItem 显示不透明的图像，因此当失焦时使选择颜色保持不变的“标准”方式不起作用 - 即

```
<Style x:Key="PsThumb">
                <Style.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="White"></SolidColorBrush>
                    <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="White"></SolidColorBrush>
                </Style.Resources>
</Style> 
```

我的 ListBox 代码如下：-

```
<ListBox  x:Name="PageSorter" Style="{StaticResource PsThumb}"  Width="148" BorderThickness="4" HorizontalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled"
        VerticalAlignment="Stretch" ItemsSource="{Binding Pages,Source={StaticResource WorkBook}}" SelectedItem="{Binding Path=CurrentPageData, Mode=TwoWay}" 
         AllowDrop="True" ScrollViewer.VerticalScrollBarVisibility="Auto">
                <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                         <Border x:Name="border" BorderBrush="DarkGray" BorderThickness="4" Margin="2,4,2,4" CornerRadius="5">
                             <Border.Effect>
                                 <DropShadowEffect ShadowDepth="6"/>
                             </Border.Effect>
                             <Image Source="{Binding Thumbnail}" Width="130" Height="95" Stretch="Fill"/>
                         </Border>
                    </Grid>
                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}},Path=IsSelected}" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="Red"></Setter>
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:44:56.393

实现您所要求的最简单方法是将 绑定`DataTrigger`到`ListBox`. 在下面的示例中，我`Selected`在我的类中添加了该属性`Contact`：

```
public class Contact : INPCBase
{
    public string Name { get; set; }

    private bool _Selected;
    public bool Selected 
    {
        get { return _Selected; }
        set
        {
            _Selected = value;
            NotifyPropertyChanged("Selected");
        }
    }
} 
```

然后我将我的绑定`ListBox`到一个`List<Contact>`. 当用户检查 时`CheckBox`，我们更改`Selected`属性并依次触发`Style`：

```
<Window x:Class="WpfApp.ListboxKeepSelectionWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="ListboxKeepSelectionWindow" Height="277" Width="343"
    xmlns:me="clr-namespace:WpfApp">

<Window.Resources>
    <me:ContactList x:Key="sample"/>

    <Style TargetType="ListBoxItem" x:Key="SelectedListBoxItemStyle">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=Selected}" Value="True">
                <Setter Property="BorderBrush" Value="Orange"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Window.Resources>

<Grid>
    <ListBox Name="lbxContacts"
             ItemsSource="{StaticResource ResourceKey=sample}"
             SelectionMode="Extended"
             ItemContainerStyle="{StaticResource ResourceKey=SelectedListBoxItemStyle}" 
             SelectionChanged="lbxContacts_SelectionChanged">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <CheckBox IsChecked="{Binding Path=Selected}">
                        <TextBlock Text="{Binding Path=Name}"/>
                    </CheckBox>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

为了允许用户在不使用复选框的情况下选择项目，我在`ListBox`. 由于`Contact`该类实现了`INotifyPropertyChanged`接口，`CheckBox`因此更新了 的值，因此用户知道选择有效：

```
 private void lbxContacts_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        foreach (Contact c in e.AddedItems)
        {
            c.Selected = !c.Selected;
        }
    } 
```

当您想要获取选定项目的列表时，您只需在 上使用 LINQ 查询`ItemsSource`来获取项目 where `Selected == true`。

# c# - 我如何实现 == 并在 c# 中检查 null

> ID：14428218
> 
> 赞同：-2
> 
> 时间：2013-01-20T19:14:44.653
> 
> 标签：c#, operator-overloading

> **可能的重复：**
> [比较引用类型的两个实例的“最佳实践”是什么？](https://stackoverflow.com/questions/104158/what-is-best-practice-for-comparing-two-instances-of-a-reference-type)
> [如何在没有无限递归的情况下检查“==”运算符重载中的空值？](https://stackoverflow.com/questions/73713/how-do-i-check-for-nulls-in-an-operator-overload-without-infinite-recursion)

我有一个名为“Criterion”的类，我想实现 == 运算符，但我正在努力解决以下问题：

当我实现 == 运算符时，我正在检查我的一个或两个实例是否为空，但是当我这样做时，它会导致对 == 的递归调用，然后我得到“StackOverflow”（he he）异常。

从技术上讲，我可以实现 Equals 运算符而不覆盖 ==，但是如果我实现 == 运算符，代码将更具可读性。

这是我的代码：

```
public static bool operator == (Criterion c1, Criterion c2)
{
    if (null == c1)
    {
        if (null == c2)
            return true;
        return false;
    }
    if (null == c2)
        return false;                
    if ((c1.mId == c2.mId) && (c1.mName == c2.mName))
        return true;
    return false;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T19:16:46.520

尝试[ReferenceEquals](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)：

```
public static bool operator ==(Criterion c1, Criterion c2) {
    var nullC1 = ReferenceEquals(null, c1);
    var nullC2 = ReferenceEquals(null, c2);
    if (nullC1 && nullC2)
        return true;

    if (!nullC1 && !nullC2)
        if (c1.mId == c2.mId && c1.mName == c2.mName)
            return true;

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:20:17.287

我会这样做：

```
bool isC1Null = Object.Equals(c1, null)
bool isC2Null = Object.Equals(c2, null)
if (isC1Null ^ isC2Null)
{
    return false
}
if (isC1Null && isC2Null)
{
    return true
}
//your code 
```

# vba - MS Access 将表单中的值复制到另一个表单文本框中

> ID：14428225
> 
> 赞同：1
> 
> 时间：2013-01-20T19:15:35.553
> 
> 标签：vba, forms, ms-access

这是我的问题：我有以下代码，当我单击 FormB 中的记录时，它从 FormB 复制员工用户名并将其放入 FrmEmployee（通过 FrmEmployee 上的 cmd 按钮打开并列出公司中的所有员工及其轮班模式）。

```
Private Sub Form_Click()
Forms!FrmEmployeee.Form.Username = Me.Username
End Sub 
```

这可行，但它只会将当前用户名字段设置为在 FormB 上选择的内容。FormB 位于数据表视图中，将为员工用户名保存多个值。所以我想要做的是以某种方式扩展上面的代码，这样它就会把我带到 FrmEmployee 上的下一条记录，这意味着当我从 FormB 中选择另一个用户时，这个值将被复制到下一个用户名记录中，允许我建立一个员工列表.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T05:00:54.583

据我了解，您实际上需要的是存储 FORM B 中的多个行/项目。

所以我的建议是将 FrmEmployee 上的文本框更改为 ListBox。因此，每次您将光标移出活动记录时，它都会将该记录添加到列表框中

# php - 注意：未定义变量：F:\wamp\www 中的页面

> ID：14428227
> 
> 赞同：0
> 
> 时间：2013-01-20T19:16:00.330
> 
> 标签：php

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T19:21:10.977

当您的变量`$_GET['page']`为空时，`$page`将不会被定义。

为避免这种情况，您可以更改

```
if($page) { 
```

到

```
if (isset($page)) { 
```

...或具有类似效果的东西。

更好的是`$page`在使用它之前进行初始化，但这可能需要在之后更改一些逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:18:18.067

只需在 if isset 语句之前初始化`$page`，错误就会消失

这是因为如果 if 语句返回 false，`$page`将是一个未定义的变量。该通知意味着无论代码采用何种路径，都应定义变量。

# c++ - 字符串导致内存损坏

> ID：14428228
> 
> 赞同：0
> 
> 时间：2013-01-20T19:16:02.217
> 
> 标签：c++, string

我对 C++ 生疏了，最近使用 python/php 太多了，这让一切都太容易了哈哈。当我尝试这样做时，我遇到了内存损坏：

```
// values is passed to the function as std::string &values
// and values is declared earlier as std::string values = "";
values += std::string("\n") 
```

理想情况下，我想最终真正做到这一点，但只是一块一块地做 std::string 的东西，因为我似乎遇到了错误：

```
// data is an int array
values += std::string("\n") + data[l] + " " + data[j-1]; 
```

我怎样才能将字符、整数和 std::strings 再次连接在一起？谢谢

PS 这是我在上面尝试执行 "\n" 时得到的 gdb 堆栈：

```
34                                      values += std::string("\n");// + data[l] + " " + data[j-1];
(gdb)
*** glibc detected *** /{HIDDEN}/main: malloc(): memory corruption (fast): 0x0000000000603030 ***
======= Backtrace: =========
/lib64/libc.so.6[0x38ec07b776]
/lib64/libc.so.6[0x38ec07e107]
/lib64/libc.so.6(__libc_malloc+0x63)[0x38ec07f443]
/lib64/libstdc++.so.6(_Znwm+0x1d)[0x38eec5f59d]
/lib64/libstdc++.so.6(_ZNSs4_Rep9_S_createEmmRKSaIcE+0x59)[0x38eecbc339]
/lib64/libstdc++.so.6(_ZNSs12_S_constructIPKcEEPcT_S3_RKSaIcESt20forward_iterator_tag+0x35)[0x38eecbdd25]
/lib64/libstdc++.so.6(_ZNSsC2EPKcRKSaIcE+0x43)[0x38eecbde03]
/{HIDDEN}/main[0x400cb6]
/{HIDDEN}/main[0x400ba7]
/{HIDDEN}/main[0x400eeb]
/lib64/libc.so.6(__libc_start_main+0xf5)[0x38ec021a05]
/{HIDDEN}/main[0x400a29]
======= Memory map: ========
00400000-00402000 r-xp 00000000 00:23 549601814                          /{HIDDEN}/main
00601000-00602000 r--p 00001000 00:23 549601814                          /{HIDDEN}/main
00602000-00603000 rw-p 00002000 00:23 549601814                          /{HIDDEN}/main
00603000-00624000 rw-p 00000000 00:00 0                                  [heap]
38ebc00000-38ebc20000 r-xp 00000000 08:07 7604569                        /usr/lib64/ld-2.16.so
38ebe20000-38ebe21000 r--p 00020000 08:07 7604569                        /usr/lib64/ld-2.16.so
38ebe21000-38ebe22000 rw-p 00021000 08:07 7604569                        /usr/lib64/ld-2.16.so
38ebe22000-38ebe23000 rw-p 00000000 00:00 0
38ec000000-38ec1ad000 r-xp 00000000 08:07 7604570                        /usr/lib64/libc-2.16.so
38ec1ad000-38ec3ad000 ---p 001ad000 08:07 7604570                        /usr/lib64/libc-2.16.so
38ec3ad000-38ec3b1000 r--p 001ad000 08:07 7604570                        /usr/lib64/libc-2.16.so
38ec3b1000-38ec3b3000 rw-p 001b1000 08:07 7604570                        /usr/lib64/libc-2.16.so
38ec3b3000-38ec3b8000 rw-p 00000000 00:00 0
38ed000000-38ed100000 r-xp 00000000 08:07 7604585                        /usr/lib64/libm-2.16.so
38ed100000-38ed2ff000 ---p 00100000 08:07 7604585                        /usr/lib64/libm-2.16.so
38ed2ff000-38ed300000 r--p 000ff000 08:07 7604585                        /usr/lib64/libm-2.16.so
38ed300000-38ed301000 rw-p 00100000 08:07 7604585                        /usr/lib64/libm-2.16.so
38ed800000-38ed815000 r-xp 00000000 08:07 7604600                        /usr/lib64/libgcc_s-4.7.2-20121109.so.1
38ed815000-38eda14000 ---p 00015000 08:07 7604600                        /usr/lib64/libgcc_s-4.7.2-20121109.so.1
38eda14000-38eda15000 r--p 00014000 08:07 7604600                        /usr/lib64/libgcc_s-4.7.2-20121109.so.1
38eda15000-38eda16000 rw-p 00015000 08:07 7604600                        /usr/lib64/libgcc_s-4.7.2-20121109.so.1
38eec00000-38eece5000 r-xp 00000000 08:07 7604613                        /usr/lib64/libstdc++.so.6.0.17
38eece5000-38eeee4000 ---p 000e5000 08:07 7604613                        /usr/lib64/libstdc++.so.6.0.17
38eeee4000-38eeeec000 r--p 000e4000 08:07 7604613                        /usr/lib64/libstdc++.so.6.0.17
38eeeec000-38eeeee000 rw-p 000ec000 08:07 7604613                        /usr/lib64/libstdc++.so.6.0.17
38eeeee000-38eef03000 rw-p 00000000 00:00 0
7ffff7fd6000-7ffff7fdb000 rw-p 00000000 00:00 0
7ffff7ffc000-7ffff7ffe000 rw-p 00000000 00:00 0
7ffff7ffe000-7ffff7fff000 r-xp 00000000 00:00 0                          [vdso]
7ffffffde000-7ffffffff000 rw-p 00000000 00:00 0                          [stack]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:21:13.353

您可以使用`std::stringstream`来组合`string`、`int`和`chars`，如下所示：

```
#include<iostream>
#include<sstream>

void main()
{

    std::stringstream ss;

    int x = 5;
    std::string y = "Hello";
    char z = 'z';

    ss<<x<<y<<z;

    std::string result = ss.str();

    std::cout<<result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:30:38.787

您可以使用 C++11`std::to_string()`函数：

```
#include <string>
#include <iostream>

int main() {

   int const i { 77 };

   std::string const s {
      std::string("Hello") + ',' + std::to_string(i) };

   std::cout << s << std::endl;

   return 0;
} 
```

# google-maps - Google Maps v3 块地图交互

> ID：14428232
> 
> 赞同：1
> 
> 时间：2013-01-20T19:16:13.803
> 
> 标签：google-maps, google-maps-api-3

我正在尝试制作折线编辑器，就像[Google Drawings Library 中的](http://www.geocodezip.com/v3_GoogleEx_DrawingTools_deleteAll.html)编辑器一样。（由于特定原因，我不能使用那个）

它的工作原理相同。从一个点开始，然后为每次单击添加新点并制作多段线。

在 Google 绘图库的编辑器中，当您编辑折线时，您的鼠标无法与地图中的其他项目进行交互。

用萤火虫检查，我看到他们在地图内有 20000000 z-index 的叠加层。

![使用 Google 绘图库编辑时叠加](../Images/cc8e668d2867f4b424cafd719c87436c.png)

有没有办法使用默认的谷歌地图功能为我的地图创建相同的叠加层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:03:17.720

它是-pane内的[自定义叠加层](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)`overlayMouseTarget`，其大小与地图相同，并且是更新叠加层位置的绘制方法。你也可以这样做。

# php - 通过 PHP 将阿拉伯数字 html 实体转换为字符

> ID：14428235
> 
> 赞同：3
> 
> 时间：2013-01-20T19:16:41.293
> 
> 标签：php, character-encoding, html-entities

我有一些带有阿拉伯语编码和乌克兰语（西里尔）字的字符串，如下所示：

```
$string = "&#1575;&#1616;&#1574;&#1618;&#1578;&#1616;&#1604;&#1575;&#1601;&#1616;&#1610;&#1617;&#1612; - коаліційний, гармонійний;"; 
```

我想得到字符（阿拉伯语）而不是所有这些“&#xxxx;”。

如果我把这个字符串放入 html，我得到的正是我想要的：“اِئْتِلافِيٌّ - коаліційний, гармонійний;”

但是当我使用 html_entitis_​​decode 时，它​​什么也没做。（mb，因为此功能不支持阿拉伯语编码，仅支持基本 ASCII）。那么，请告诉我应该怎么做才能获得与浏览器解释器相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:38:59.393

您的 PHP 版本可能早于**5.4.0**，因此`html_entity_decode`未使用**UTF-8**。

> 要使用的编码。如果省略，则此参数的默认值在 PHP 5.4.0 之前的版本中为 ISO-8859-1，从 PHP 5.4.0 开始为 UTF-8。

^([http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php))

* * *

尝试以下操作：

```
$decoded_string = html_entity_decode($string, ENT_COMPAT | ENT_HTML401, "UTF-8"); 
```

[在键盘上查看输出](http://codepad.org/NqFRJt0a)

# otrs - OTRS-我在本地主机上的 Windows 系统上运行它作为测试系统

> ID：14428243
> 
> 赞同：0
> 
> 时间：2013-01-20T19:16:54.213
> 
> 标签：otrs

我在本地主机上的 Windows 上运行 OTRS 作为测试系统。每当我从客户网站创建票证时，我都会收到此错误。错误：需要 ArticleTypeID！

评论：回溯：错误：OTRS-CGI-10 Perl：5.12.3 操作系统：MSWin32 时间：2013 年 1 月 20 日星期日 13:13:30

消息：需要 ArticleTypeID！

远程地址：127.0.0.1 请求URI：/otrs/customer.pl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:41:33.197

我认为您以某种方式更改了此值： Ticket::Frontend::CustomerTicketMessage###ArticleType 到数据库中不存在的东西。

导航到 Admin > SysConfig > Ticket > Frontend::Customer::Ticket::ViewNew 并使用圆形箭头重置值。

# jquery - 上一个/下一个 jQuery 效果

> ID：14428244
> 
> 赞同：0
> 
> 时间：2013-01-20T19:16:56.020
> 
> 标签：jquery, jquery-ui

我一直在尝试为[我在此网站上看到](http://na.square-enix.com/ffxiii-2/#/media)的上一个/下一个效果创建一个效果，但无法正确实现它，并且想知道是否有人可以帮助我。

[这是我的，所以你可以检查它并查看代码](http://www.freewaymotors.com.ar/prueba/index.html)，它在 Firefox 中不能正常工作，只有你快速通过鼠标它会闪烁并且工作非常糟糕。我想达到和最终幻想网站一样的效果。

我也尝试过使用 jQuery UI 隐藏和显示，但也无法让它在 Firefox 和 Opera 上正确运行。

由于我只是想正确实现效果，因此我没有悬停状态，仅在使用时反转箭头`mouseenter`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:41:15.427

*尝试在每个<a>*中添加跨度。

将 mouseEnter 添加到您的并使其为您的跨度设置动画。图像/背景应该在跨度内。

像这样的东西（未经测试）：

```
$('a').on('mouseEnter', function () {
    $(this).find('span').animate({
        //Animation stuff
    });
}); 
```

ps：如果您避免盗链，我将不胜感激。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T21:50:00.113

把它放在previousNextSlider.js中的Previous按钮：

```
//Previous
$('.bx-prev').on('mouseenter', function(){
    $(this).removeClass(".js-opened").stop().animate({
        'margin-left': '-87px'
        }, {
        duration: 300,
        complete: function(){
            $(this).css({
                'background-image' : 'url(images/nextSliderButton.png)'
            }).addClass(".js-opened").stop().animate({
                'margin-left' : 0
            }, {duration: 100});
        }
    });
}).on('mouseleave', function(){
    if ($(this).hasClass(".js-opened"))
        $(this).stop().animate({
            'margin-left': '-87px'
            }, {
            duration: 100,
            complete: function(){
                $(this).css({
                    'background-image' : 'url(images/previousSliderButton.png)'
                }).removeClass(".js-opened").stop().animate({
                    'margin-left' : 0
                }, {duration: 300});
            }
        });
    else
        $(this).stop().animate({
            'margin-left': 0
            }, {duration: 300});
}); 
```

刚刚尝试过，它完美地解决了“快速鼠标移动”问题。

# wordpress - WordPress。电子商务。添加到购物车之前的操作挂钩

> ID：14428248
> 
> 赞同：21
> 
> 时间：2013-01-20T19:17:34.930
> 
> 标签：wordpress, hook, woocommerce

**我需要做的：** 我想在将产品添加到购物车之前对产品进行一些检查。 *更准确地说：* 我想将我即将添加到购物车的产品与已经添加的产品进行比较，看看是否存在一些冲突。 *一个例子：* 假设我们有一个名为“Both shoes”的产品和一个名为“left shoe”的产品。用户将“左鞋”添加到购物车。然后他添加了“双鞋”。我想打印一个错误而不是添加“双鞋”：抱歉，如果您已将左鞋添加到购物车，则无法同时添加这双鞋。如果要买“双鞋”，请先去掉“左鞋”。

我查看了 class-wc-cart.php 并在第**811**行找到了一个动作挂钩，**但为时已晚！这是在添加产品之后**

“do_action（'woocommerce_add_to_cart'，$ca​​rt_item_key，$product_id，$quantity，$variation_id，$variation，$cart_item_data）；”

add_to_cart 方法从第**705**行开始。 [http://wcdocs.woothemes.com/apidocs/source-class-WC_Cart.html#705](http://wcdocs.woothemes.com/apidocs/source-class-WC_Cart.html#705)

我的“产品冲突管理器”功能如何在第 801 行之前被钩住，**而无需破解 woocommerce？**

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-03-31T00:02:50.760

有点晚了，但我认为您正在寻找可过滤的添加到购物车验证。这是一个过度简化的版本：

```
function so_validate_add_cart_item( $passed, $product_id, $quantity, $variation_id = '', $variations= '' ) {

    // do your validation, if not met switch $passed to false
    if ( 1 != 2 ){
        $passed = false;
        wc_add_notice( __( 'You can not do that', 'textdomain' ), 'error' );
    }
    return $passed;

}
add_filter( 'woocommerce_add_to_cart_validation', 'so_validate_add_cart_item', 10, 5 ); 
```

# design-patterns - 聚合 ID 设计模式

> ID：14428250
> 
> 赞同：0
> 
> 时间：2013-01-20T19:17:39.377
> 
> 标签：design-patterns, nosql, elasticsearch, uniqueidentifier

我遇到了一个设计问题，我想我会征求你的意见。

我目前正在通过轮询他们的 api 来索引来自不同服务的信息。根据这些数据，我正在构建一个量身定制的模型，用于我自己的服务。

我遇到的问题是我的 ID 应该是什么样子。这些服务为其集合中的每个元素提供了一个 ID（这很好），但我认为我不想使用外部 ID 作为我的文档上的标识符。如果两个服务有重复的 id 怎么办？我该如何处理？我正在考虑只向 ids 添加一个字符（这是一个问题，因为我希望 ids 是数字），取自轮询服务的名称？还是我应该只创建自己的唯一 ID？

我使用 ElasticSearch 作为数据存储。

谢谢，

詹姆斯福特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T01:23:28.163

我可以想到三种方法来处理这个问题：

1.  引入表示数据源的新键以避免冲突。因此，您在 Elastic Search 中的文档中有一个 API ID（1、2、3 等），然后是他们提供的实体 ID。所有查询都将使用 API ID 和实体 ID。

2.  向 ID 添加一个大数字以将它们分隔在一个新的全局空间中。只需在每个 ID 上添加大约 1 万亿，然后他们都可以获得自己的 ID 空间。显然，这里的技巧是预测数据可以增长多少。（您不希望将来发生碰撞。）

3.  在映射到您的定制模型的新实体上创建您自己的自动增量。

无论您选择哪一个，我都建议您保留原始 ID，以防您需要将其映射回源 API。

# android - 如何在列表视图之间存储和传递信息

> ID：14428253
> 
> 赞同：0
> 
> 时间：2013-01-20T19:17:45.180
> 
> 标签：android, android-listview

我的应用程序的功能可以模仿[wanelo](http://wanelo.com/)之类的东西。

用户将在一个活动中输入他们想要购买的搜索词。他们将获得与该搜索词匹配的项目列表。因此，`ListView`将包含`Item`s。An`Item`有很多属性，主要有：

*   `id`- 对应`Item`于数据库中的 id
*   `date_modified`- 时间戳知道是否`Item`已更新
*   `remote_directory``Item`- 指向的资产（如图标和其他图像）的基本目录的 URL 。URL 的格式如下：`http://my.domain.com/items/a1bc234d/`where`a1bc234d`是随机生成的，由`date_modified`.
*   `remote_dir_name`- 的子串`remote_directory`。从上面的示例中，该值将是`a1bc234d`。

从搜索结果列表中，用户可以标记要稍后查看的项目。这将触发几件事：

*   首先，我想将 s 添加到代表用户“下载”的 s 的`Item`不同位置。`ListView``Item`
*   然后，我想实际下载所有的`Item`数据：描述，所有资产`remote_directory`。这些东西被存储在我的应用程序的内部存储文件夹中`remote_dir_name`：`/data/data/my.app.package.name/files/a1bc234d/`。

这些“下载”的项目旨在离线模式下查看。

此“已下载”`ListView`对应于不同的 Activity，并且将具有显示下载状态进度条的列表项`Item`。此外，这`ListView`应该是可编辑的：使用应该能够删除和重新排序`Item`列表中的 s。

最后，“下载”`ListView`需要持久化。它应该保持秩序。搜索结果的`ListView`不需要持续存在。

我在弄清楚如何存储`Item`下载的 s 列表时遇到了很多麻烦。如果列表项正在下载，“下载”`ListView`需要知道何时更新列表项的进度条。我认为将 s 存储在数据库中有点矫枉过正，`Item`因为我会不断更新一行的列，直到下载完成。我应该如何在这两个`ListView`s之间传递这个下载状态信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:37:06.183

我不完全确定我在这里掌握了全貌，但在我看来，您需要两个 ArrayList 字段。

```
List<Item> downloadedItems = new ArrayList<Item>;
List<Item> searchItems = new ArrayList<Item>; 
```

那么您需要做的是为 DownloadListView 创建您自己的自定义 ListAdapter，并创建您自己的自定义 download_item.xml，您将在 ListAdapter 中进行膨胀。在您的情况下，听起来这个 download_item.xml 将包含一个文本视图和一个进度条，并且需要包含（或顶层）布局集来包装内容。

现在在 SearchListView 的点击监听器中设置它，以便它将调用一个函数，该函数将获取被点击的项目并将其添加到下载的项目 ArrayList 并开始下载，以及刷新 listadapter 数据集以便它知道更新列表中的项目。

下载应该在 AsyncTask 中，您将需要使用其中的`@Override publishProgress()`一部分，以便您可以更新下载栏的状态。

请原谅我的任何失误或错误，我刚醒来。

# mysql - MySQL 将 DATETIME 更新为 DATE

> ID：14428254
> 
> 赞同：1
> 
> 时间：2013-01-20T19:17:48.190
> 
> 标签：mysql, indexing, sql-update

我有一个带有一`DATETIME`列的大表，出于索引原因，我想添加一个仅包含 DATE 类型的列。似乎 MySQL 无法通过以下表达式使用索引，`GROUP BY DATE(datetime)`因此我想添加具有第二个索引的另一列。

对于更新，我使用这个简单的语句：

```
UPDATE table SET datecol = DATE(datetimecol) 
```

现在发生了一个奇怪的行为：`datecol-column`包含正确的值。但`datetimecolumn`变化也是如此：对当前的`timestamp`. 这是此列的默认值。

我现在已经使用数据库和 MySQL 工作了很多年，但我无法解释这种行为。

当前版本是`MySQL 5.1.66-0`.

您对此有什么建议或解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:19:29.510

您`datetimecol`的不是 type `DATETIME`，而是 type `TIMESTAMP`（默认情况下）具有在修改记录时[自动更新](http://dev.mysql.com/doc/en/timestamp-initialization.html)到当前时间的`ON UPDATE CURRENT_TIMESTAMP`属性。

> 要抑制第一`TIMESTAMP`列的自动属性，请执行以下任一操作：
> 
> *   `DEFAULT`使用指定常量默认值的子句定义列。
>     
>     
> *   指定`NULL`属性。这也会导致列允许`NULL`值，这意味着您不能通过将列设置为来分配当前时间戳`NULL`。分配`NULL`将列设置为`NULL`。

所以：

```
ALTER TABLE my_table
  MODIFY datetimecol TIMESTAMP DEFAULT CURRENT_TIMESTAMP; 
```

要在不更改 中的值的情况下更新一次记录`datetimecol`，您应该将它们显式设置为其现有值：

```
UPDATE my_table SET
  datetimecol = datetimecol,
  datecol     = DATE(datetimecol); 
```

# php - 如何在 PHP 中实现模糊效果？

> ID：14428257
> 
> 赞同：3
> 
> 时间：2013-01-20T19:18:17.610
> 
> 标签：php, gd

我一直在寻找 PHP 代码来对图像应用高斯模糊。

我所做的是这样的：

```
<?php
$image = imagecreatefromjpeg('new.jpg'); 
imagefilter($image, IMG_FILTER_GAUSSIAN_BLUR);
imagejpeg($image, 'blur.jpeg');
imagedestroy($image);
?> 
```

但是效果很弱，如果我重复模糊效果，需要很长时间来处理，最终结果仍然不是那么好。

我也用过 Timthumb ，我一直很喜欢它的简洁，但它默认裁剪图像，而且它的模糊效果很弱。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T19:53:52.777

您可以使用 ImageMagic

**原始图像**

![在此处输入图像描述](../Images/fd95a9aea55f4196e8d19ec20bcf2ada.png)

运行方式`exec`

```
convert a.png -blur 0x3 a_blur.png 
```

**![输出](../Images/ed063d5b3f4c4e2649d39efe0f07d2e0.png)**

或运行

```
convert a.png -blur 0x8 a_blur.png 
```

![在此处输入图像描述](../Images/152ca5373586480345e387bbee63e84d.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-20T21:02:36.217

没有 ImageMagic 库也是可能的；

```
header('Content-Type: image/png');

$blurs = 10;
$image = imagecreatefrompng('blur.png');
for ($i = 0; $i < $blurs; $i++) {
    imagefilter($image, IMG_FILTER_GAUSSIAN_BLUR);
}
imagepng($image, 'blur10.png');
imagedestroy($image); 
```

应用 10 次模糊后；

![在此处输入图像描述](../Images/76554020f36253eb05182de4edb20ba1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T11:08:02.253

图像优化是一个非常繁重的过程，所以如果我在 PHP 中有这类任务，那么我个人使用这个名为[PhpThumb](http://phpthumb.sourceforge.net/)的 PHP 图像库它可以创建模糊图像而无需任何代码，您只需通过 url 调用它的脚本并根据其文档提供参数检查它的[演示](http://phpthumb.sourceforge.net/demo/demo/phpThumb.demo.demo.php)。

# python - sweetpie - 禁用嵌套对象创建

> ID：14428259
> 
> 赞同：1
> 
> 时间：2013-01-20T19:18:18.670
> 
> 标签：python, django, tastypie

当我创建具有外部关系的新资源时，指定为，即，`{"pk": 20}`我创建了一个新的不需要的 FK 项。

我有`Order`与模型有关系的模型类`Language`，因此在创建 Order 实例时，我可能必须指定订单的语言。语言列表应该是恒定的，用户不能修改现有语言或创建新语言。

`Order`资源：

```
class OrderResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user', null=True, full=True)
    src_lang = fields.ForeignKey(LanguageResource, 'src_lang', null=True, full=True)
    dst_lang = fields.ForeignKey(LanguageResource, 'dst_lang', null=True, full=True)

    def obj_create(self, bundle, request=None, **kwargs):
        return super(OrderResource, self).obj_create(bundle, request, user=request.user)

    class Meta:
        resource_name = 'orders'
        queryset = Order.objects.all()
        serializer = Serializer(['json'])

        authentication = MultiAuthentication(SessionAuthentication(), ApiKeyAuthentication())
        authorization = ResourceAuthorization() 
```

这是一个`Language`资源：

```
class Language(models.Model):
    name = models.CharField(max_length=100)
    code = models.CharField(max_length=100)

class LanguageResource(ModelResource):
    class Meta:
        resource_name = 'languages'
        queryset = Language.objects.all()
        allowed_methods = ['get']
        authorization = ReadOnlyAuthorization()
        serializer = Serializer(['json']) 
```

我正在尝试`Order`使用 jQuery 创建一个新的：

```
var data = JSON.stringify({
    "comment": "Something random",
    "src_lang": {"pk": "20"},
    "dst_lang": "/api/v2/languages/72/"
});

$.ajax({
    type: 'POST',
    url: '/api/v2/orders/',
    data: data,
    dataType: "json",
    contentType: "application/json"
}); 
```

它没有设置`pk:20`to`src_lang_id`字段，而是创建一个`Language`带有空字段的新 for`src_lang`并为 设置正确的值`dst_lang`。但是空字段受`Language`模型定义的限制。它是如何保存的？

这也很奇怪，因为我直接指定了语言模型的只读访问权限，以及`get`访问受支持语言列表的唯一方法。

如果我将类的语言字段声明`OrderResource`为 ie: `src_lang = fields.ForeignKey(LanguageResource, 'src_lang', null=True, full=True, readonly=True)`，它不会创建任何内容，但也不会为外键设置任何值。

所以，我只需要指定一种现有的语言，我不需要创建它。

# 更新

`ResourceAuthorization`：

```
class ResourceAuthorization(Authorization):
    def is_authorized(self, request, object=None):
        user = getattr(request, 'user', None)
        if not user:
            return False

        return user.is_authenticated()

    def apply_limits(self, request, object_list):
        if request and hasattr(request, 'user'):
            if request.user.is_superuser:
                return object_list

            return object_list.filter(user=request.user)

        return object_list.none() 
```

# 更新 2

我发现没有什么比让字段只读和覆盖`obj_create`方法更聪明的了：

```
class OrderResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user', null=True, full=True)
    src_lang = fields.ForeignKey(LanguageResource, 'src_lang', null=True, full=True, blank=True, readonly=True)
    dst_lang = fields.ForeignKey(LanguageResource, 'dst_lang', null=True, full=True, blank=True, readonly=True)

    def obj_create(self, bundle, request=None, **kwargs):
        src_lang_id, dst_lang_id = bundle.data.get('src_lang', None), bundle.data.get('dst_lang', None)

        if not all([src_lang_id, dst_lang_id]):
            raise BadRequest('You should specify both source and destination language codes')

        src_lang, dst_lang = Language.objects.guess(src_lang_id), Language.objects.guess(dst_lang_id)
        if not all([src_lang, dst_lang]):
            raise BadRequest('You should specify both source and destination language codes')

        return super(OrderResource, self).obj_create(
            bundle, request, user=request.user, src_lang=src_lang, dst_lang=dst_lang
        )

    class Meta:
        resource_name = 'orders'
        queryset = Order.objects.all()
        serializer = Serializer(['json'])

        authentication = MultiAuthentication(SessionAuthentication(), ApiKeyAuthentication())
        authorization = ResourceAuthorization() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:54:40.803

如您的问题的答案中所述[，](https://stackoverflow.com/a/14428613/302243)应对`src_lang`应于*资源*，而不是其他值。我怀疑当 POST 发生并且它没有找到资源`pk=20`时，它会创建一个新`Language`对象并在没有 Django 模型验证的情况下调用`save`，从而允许在 created 中存在一个空白字段`Language`。

强制只读类型资源的一种方法是创建一个不允许`obj_create`.

```
class ReadOnlyLanguageResource(ModelResource):
    # All the meta stuff here.
    def obj_create(self):
        # This should probably raise some kind of http error exception relating
        # to permission denied rather than Exception.
        raise Exception("Permission denied, cannot create new language resource") 
```

然后从您的资源中引用此资源`Order`，仅覆盖`src_lang`指向您的只读资源的字段。

```
class OrderResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user', null=True, full=True)
    src_lang = fields.ForeignKey(ReadOnlyLanguageResource, 'src_lang')
    dst_lang = fields.ForeignKey(ReadOnlyLanguageResource, 'dst_lang') 
```

任何引用现有资源的请求都将正常完成（但您需要正确引用资源，而不是使用`pk=20`）。任何引用未知语言的请求都将失败，因为`Language`无法创建新对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:55:21.017

您应该以对应的`src_lang`格式指定.`/api/v2/languages/72/``pk=20`

其次究竟是`ResourceAuthorization`什么？可能对您有用的[文档](http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html)列表。`ReadOnlyAuthorization`

授权也应用资源，而不是底层模型。在为 创建新对象时`fk`，它不使用 REST Api 而是使用`django.db.models`它的权限。因此，授权可能不适用于外键约束。

# c# - 如何使用 C# 更新 Google 电子表格中的特定行

> ID：14428260
> 
> 赞同：1
> 
> 时间：2013-01-20T19:18:22.890
> 
> 标签：c#, google-sheets

我想将 column 更新为 column`B`值为的`1`行。在 SQL 术语中，一个简单的`A``2`

```
UPDATE SpreadSheet 
SET B = 1
WHERE A = 2 
```

这可以通过对 Google Docs 的一两次调用来完成，而不必遍历行/列吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:49:19.927

我无法使用`B`或`A`找不到不循环进行更新的方法。此示例使用列标题（第一行的值）。用您自己的列替换`id`和。`val`

```
WorksheetFeed wsFeed = spreadsheet.Worksheets;
WorksheetEntry worksheet = (WorksheetEntry)wsFeed.Entries[0];

// Define the URL to request the list feed of the worksheet.
AtomLink listFeedLink = worksheet.Links.FindService(GDataSpreadsheetsNameTable.ListRel, null);

// Fetch the list feed of the worksheet.
ListQuery listQuery = new ListQuery(listFeedLink.HRef.ToString());
listQuery.SpreadsheetQuery = "id = 2";
ListFeed listFeed = service.Query(listQuery);

var row = (ListEntry)listFeed.Entries[0];

foreach (ListEntry.Custom element in row.Elements)
{
    if (element.LocalName == "val")
    {
        element.Value = "1";
    }
}
row.Update(); 
```

# java - 如何列出保持顺序和反向迭代的元素？

> ID：14428261
> 
> 赞同：0
> 
> 时间：2013-01-20T19:18:25.130
> 
> 标签：java, data-structures, collections, linked-list

结合以下方面的Java中最好的列表/集合/数组是什么：

*   保持添加元素的顺序
*   如果可能的话，向前和向后迭代
*   当然性能好

我想到了一个 LinkedList，然后我可以插入元素来`add(0, element)`模拟相反的顺序。大多数时候我会使用反向迭代，所以使用它我可以迭代低谷。如果没有，我可以`list.listIterator().hasPrevious()`。

但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:30:41.953

ArrayList 可能是你最好的选择。您可以通过以下方式迭代它：

```
for (ListIterator it = list.listIterator(list.size()); it.hasPrevious();) {
    Object value = it.previous();
} 
```

LinkedList 可以工作，但它会产生更多的对象创建开销，因为您需要为存储的每个元素实例化一个 Link。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:21:54.653

如果您可以通过索引获取并希望遍历集合，那么您可以使用 a`List`并`get(index)`允许您获取列表中该位置的对象。数组允许你这样做，你可以像往常一样引用索引，但是如果你的数组可能会增长，那么 Collection 将更容易使用。

您可以使用循环而不是使用`List.size()`对象来通过对象使用和元素，这将允许您向前和向后迭代列表。例如：`for``Iterator`

```
List<AnObject> myList = new ArrayList<AnObject>;
// Add things to the list

for (int i = 0 ; i < myList.size; i++) {
  AnObject myObject = myList.get(i);
} 

for (int i = myList.size()-1 ; i <= 0 ; i--) {
  AnObject myObject = myList.get(i);
} 
```

Set 不适用，因为 Set 不保持顺序。

# android - 读取支持 NFC 的智能手机的 NFC 硬件信息

> ID：14428264
> 
> 赞同：2
> 
> 时间：2013-01-20T19:18:34.137
> 
> 标签：android, nfc

是否可以在 Android 设备中读取 NFC 硬件的详细信息？

编辑：更具体地说，任何可用于唯一标识 NFC 芯片的信息。

# ruby - 无论如何要搜索并获得..的值？

> ID：14428265
> 
> 赞同：1
> 
> 时间：2013-01-20T19:18:37.280
> 
> 标签：ruby, selenium-webdriver, mechanize-ruby

在网页中假设我有以下值：

```
<td> <a href="https://www.test.com/test123/a.html"> test11 </a> </td>
<td> <a href="https://www.test.com/test12333/r.html"> test12 </a> </td>
<td> <a href="https://www.test.com/testaa123/t.html"> test21 </a> </td>
<td> <a href="https://www.test.com/test123123/b.html"> test31 </a> </td> 
```

`test21`反正有没有使用 Ruby找到价值？

或者无论如何要找到`href`具有子字符串的值`/testaa123/t.html`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:59:35.763

试试这个Nokogiri[教程](http://ruby.bastardsbook.com/chapters/html-parsing/)。

`<li>`标签示例：

```
require 'rubygems'
require 'nokogiri'   
require 'open-uri'
PAGE_URL = "http://ruby.bastardsbook.com/files/hello-webpage.html"

page.css('li')[0].text 
```

这将从以下站点输出 YouTube：

```
<div id="funstuff">
   <p>Here are some entertaining links:</p>
   <ul>
      <li><a href="http://youtube.com">YouTube</a></li>
      <li><a data-category="news" href="http://reddit.com">Reddit</a></li>
      <li><a href="http://kathack.com/">Kathack</a></li>
      <li><a data-category="news" href="http://www.nytimes.com">New York Times</a></li>
  </ul>
</div> 
```

# javascript - 将文本框的值作为参数传递给没有提交按钮的 Javascript 函数

> ID：14428269
> 
> 赞同：0
> 
> 时间：2013-01-20T19:18:48.700
> 
> 标签：javascript, jtextfield, jquery-events, keycode

我正在写作，因为我在没有提交按钮的情况下通过文本框的值有问题，但从键盘管理事件。`Enter`目标是在我单击该键时启动该功能。我写了这段代码，但现在它不起作用：

```
 <form method="GET">
<input type="textfield"  id="testo_libero" onkeydown="javascript: if (event.Keycode==13) desc_ricerca(this.value);">
  </form> 
```

在 Javascript 文件中：

```
function desc_ricerca(valore){
     console.log("valore"+valore);
 } 
```

谁能帮我？我试过了，但没有...

```
 function desc_ricerca(valore){    
     var cat = $("#testo_libero").val();
     console.log(cat);
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:21:29.813

看来您正在使用 jQuery。如果是这样，您应该考虑使用[不显眼的 JavaScript](https://stackoverflow.com/questions/259614/unobtrusive-javascript-with-jquery-good-10-minute-tutorial)。（即使没有 jQuery，你也可以编写不显眼的 JavaScript，但是 jQuery 让它*变得*容易多了）。

例如，您的代码可以重写如下：

**HTML：**

```
<form method="GET">
    <input type="textfield"  id="testo_libero">
</form> 
```

**jQuery：**

```
$('#testo_libero').on('keydown', function (e) {
    if (e.keyCode != 13) return;
    console.log('valore ' + this.value);
    return false;
}); 
```

这是小提琴：http: [//jsfiddle.net/wS5Db/](http://jsfiddle.net/wS5Db/)

# objective-c - 从 AppDelegate 更改值故事板

> ID：14428270
> 
> 赞同：0
> 
> 时间：2013-01-20T19:18:55.300
> 
> 标签：objective-c, cocoa-touch

我的故事板中有一个`imageView`。现在我想`imageView`在应用程序进入后台（`applicationDidEnterBackground`和`applicationWillTerminate`）时设置为零。但我找不到这样做的好方法。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    .... imageView.image = nil; ?
} 
```

从 AppDelegate 更改 imageView 值的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:02:35.540

`viewDidLoad`我通过在我的 viewcontroller.m 文件中添加这个解决了这个问题：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(removeImage)
                                             name:UIApplicationDidEnterBackgroundNotification
                                           object:nil]; 
```

和 removeImage 功能：

```
- (void) removeImage {
    ImageView.image = nil;
} 
```

# java - Java 堆空间不足，有大量可用堆空间

> ID：14428271
> 
> 赞同：0
> 
> 时间：2013-01-20T19:19:16.673
> 
> 标签：java, out-of-memory, heap-memory

我收到了这个错误：

```
Exception in thread "543" java.lang.OutOfMemoryError: Java heap space
at java.util.Arrays.copyOf(Arrays.java:2894)
at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:117)
at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:407)
at java.lang.StringBuffer.append(StringBuffer.java:241) 
```

在使用此命令启动的应用程序中：

```
java -Xms1024M -Xmx3072M -jar MyJar.jar >> /var/log/MyLog.log 2>&1 & 
```

而操作系统报告 27% 的 4GB RAM 正在使用中。

根据我的计算，应该有将近 2GB 的可用堆空间。是不是因为某种原因，JVM 没有从一开始就增加堆大小？

实际可用的堆空间是否有任何可能导致此错误？

请注意，这一切都在 1.6JVM 上。具体来说：java-1.6.0-openjdk-1.6.0.0-1.50.1.11.5.el6_3.x86_64

编辑：正在构建的字符串不能长 2GB。它是由固定长度的对象数组构成的，最终长度不能超过几百个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:25:57.487

如果正在分配的对象不适合堆，则会引发 OutOfMemoryError。根据使用的垃圾收集器，堆可能会被分成几代。如果即使在垃圾回收之后分配的数组也大于适当的内存段，则 JVM 可能会抛出 OutOfMemory，即使它仍有剩余内存。

要验证是否是这种情况，请尝试记录无法创建的数组的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:25:59.093

当 java 尝试分配内存（在您的情况下`Array#copyOf`）并且看到不可能适合使用 -Xmx 选项指定的最大堆大小时，它不会执行实际分配，但会引发 OOM 异常。这就是操作系统报告 27% 的 RAM 正在使用的原因。

# php - 使用一个框架副本是个坏主意吗？

> ID：14428275
> 
> 赞同：1
> 
> 时间：2013-01-20T19:20:16.633
> 
> 标签：php, frameworks

目前，我正在与一家拥有多个不同项目的公司合作，这些项​​目都在 PHP 框架的旧副本上运行。该 PHP 框架安装在服务器上的共享目录中，并添加到 PHP 的包含路径中，以便键入`require 'Framework/Lib.php`或任何内容从共享目录中加载 Lib.php。这些项目都没有自己的框架副本。

我认为这是一个非常糟糕的主意，但我不太确定为什么（除了无法更新框架的要点，所以我们被困在使用旧版本）。

是否有任何其他负面影响，或者它没有我想的那么糟糕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:25:52.980

这不是问题，也不是不寻常的。

如果您需要一个库或框架的多个副本，您可以根据需要在其自己的 php.ini 或 htaccess 文件中为每个项目单独设置 PHP 包含路径。

这意味着您可以继续按原样工作，但可以为任何给定项目使用您想要的任何库版本。

额外的好处是，如果您需要升级您的项目之一，您只需更改 htaccess 文件中的包含路径即可更改该项目的库版本，而无需安装任何额外的库副本或影响任何其他项目.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:51:45.067

唯一的问题可能是如果您要修改框架代码库，因为您可能永远不知道如果您修补框架可能会破坏哪个应用程序。

但是：如果您正在对依赖于框架的每个应用程序进行单元测试，那么您可以启动测试并检查是否有任何故障并最终恢复到以前的情况，或者以足够的信心修复测试失败。

如果您没有进行自动化测试或无法修改应用程序代码库，那么这可能是一个问题（我重复一遍，仅当您需要修改框架代码时）。

我看不出由此产生的任何其他问题，它甚至可能是一个（小而有争议的）优势（因此每个人都使用相同版本的框架）。

而且由于它是旧东西，因此无需担心 Composer 依赖管理，我认为您不会使用它，对吗？

# mysql - 为一个实体拥有许多图像和（缩略图？）的最佳方式是什么？

> ID：14428278
> 
> 赞同：0
> 
> 时间：2013-01-20T19:20:32.467
> 
> 标签：mysql, database, database-design, symfony

我正在使用 PHP 和 MySQL（通过 Symfony 2 框架）创建一个网站来展示我收藏的一些自行车。我想存储一辆自行车所需的尽可能多的图像。

所以我在想一个好方法是让我的**Bike 实体**和一个**Picture 实体，并通过****一对多的关系**将 Bike 实体与 Picture 实体链接起来。

所以，图片实体看起来像这样：

```
id     bike_id    title   path 
```

这是最好的方法吗？非常感谢您的建议。

**编辑**：**关于存储缩略图..**
我们也必须存储缩略图版本吗？由于我将在一页中显示许多图片，我读到用宽度和高度缩小图片是一种不好的做法，最好存储图片的缩小版本。

所以图片实体宁愿看起来像这样？：

```
id     bike_id    title    path     path_thumbnail 
```

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:39:48.430

是的，尽管您可以通过将图像报废`path`并将图像存储为`{id}.jpg`.

**更新**-从您的编辑中，我认为您错过了我所说的关于命名图像的要点。我建议您*根本不要*存储任何图像或缩略图 URL。相反，只需有一个如下所示的表：

```
Id    BikeId    Title
277   123       "Cool picture" 
```

然后根据它们的 . 命名所有图像和缩略图文件`Id`。在上面的示例中，“酷图片”文件可以称为**/img/277.jpg**和**/img/277-thumb.jpg**。

这样您就不必在数据库中存储大量文件名，并且文件名冲突也不会有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:51:51.310

你需要有`One to many`这样的实体和图片之间的关系

图片.php

```
/**
     * @ORM\ManyToOne(targetEntity="Bike", inversedBy="images")
     * @ORM\JoinColumn(name="bike_id", referencedColumnName="id")
     */
    protected $Bike; 
```

然后你可以为每张图片设置一行，你可以像处理单张图片一样使用[symfony 图片](http://symfony.com/doc/2.0/cookbook/doctrine/file_uploads.html)上传

# android - OnPreferenceChangeListener

> ID：14428279
> 
> 赞同：0
> 
> 时间：2013-01-20T19:20:32.550
> 
> 标签：android, sharedpreferences

我有`EditText`一个首选项菜单，允许我编辑 URL 地址。问题是当我在“首选项”菜单中单击“确定”后，主活动中的首选项值没有立即更新。不知道如何解决这个问题。我尝试了一堆想法，最后决定问。

```
public class PreferencesActivityTest extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.radio_preferences);
        PreferenceManager.setDefaultValues(PreferencesActivityTest.this,
                R.xml.radio_preferences, false);
        EditTextPreference editPref =(EditTextPreference)findPreference("MyText");
        editPref.setOnPreferenceChangeListener(
                                    new Preference.OnPreferenceChangeListener() {
            @Override
            public boolean onPreferenceChange(Preference preference,
                    Object newValue) {
                if (newValue.toString().length() > 0) {
                    return true;
                }
                // If now create a message to the user
                Toast.makeText(PreferencesActivityTest.this,
                        "Invalid Input", Toast.LENGTH_SHORT).show();
                return false;
            }
        });
    }
} 
```

PS：此代码将 更新`newValue`为我在 中输入的内容，在我再次修改之前`EditTextPreference`不会将新值带到......`MainActivity`

更新：在`OnResume()`我可以看到该值已更新为我在`PreferenceActivityTest`from中修改的值`EditTextPreference`。我想要做的是将它传递`newValue`到`SetDataSource("")`.

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_radio);
    initializeMediaPlayer();
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_edit:
        editURL();
        // make a Dialog or show an Activity
        return true;
    }
}

private void initializeMediaPlayer() {
    PreferenceManager.setDefaultValues(this, R.xml.radio_preferences, false);
    SharedPreferences pref =PreferenceManager.getDefaultSharedPreferences(this);
    String radioPath = pref.getString("MyText", "default value");
    // Toast.makeText(this, radioPath, Toast.LENGTH_SHORT).show();
    try {
        radioPlayer.reset();
        // radioPlayer.setDataSource("http://31.xx.xxx");
        // Toast.makeText(this, radioPath, Toast.LENGTH_SHORT).show();
        radioPlayer.setDataSource(radioPath);
    } catch {
    }
}

public void editURL() {
    stopPlaying();
    startActivity(new Intent(getBaseContext(), PreferencesActivityTest.class));
} 
```

我在做一些根本错误的事情，但我需要帮助。先感谢您 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:21:32.603

你怎么称呼偏好活动？如果您直接调用它，您可能需要更改对[startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)的调用，以便在从 Activity 返回后刷新数据

# java - Android：Youtube API 播放列表

> ID：14428280
> 
> 赞同：1
> 
> 时间：2013-01-20T19:20:43.237
> 
> 标签：java, android, eclipse, youtube, youtube-api

我一直在做一个在我的项目中使用 YouTube API 的应用程序。我有代表 3 个选项卡的选项卡。第一个频道标签，第二个热门视频，最后是最喜欢的视频。我想使用独立的 YouTube，但不知何故它无法显示每个标签的视频。所以，我首先测试顶部选项卡中的代码，它给出了这个错误“ERROR_CONNECTING_TO_SERVICE”。请帮我。谢谢 ：）

```
/import android.app.Activity;
import android.os.Bundle;

import org.brickred.socialshare.YouTubeFailureRecoveryActivity;
//import com.google.android.youtube.player.YouTubeBaseActivity;
import com.google.android.youtube.player.YouTubePlayer;
//import com.google.android.youtube.player.YouTubePlayerFragment;
import com.google.android.youtube.player.YouTubePlayerView;
import com.google.android.youtube.player.YouTubeInitializationResult;

public class Top extends YouTubeFailureRecoveryActivity {

        public static final String PLAYLIST_ID = "PLC7961A4662BB1042";
        /** Called when the activity is first created. */

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.top);

            YouTubePlayerView youTubeView = (YouTubePlayerView) findViewById(R.id.youtube_view);
            youTubeView.initialize(DeveloperKey.DEV_KEY, this);
        }

        @Override
        public void onInitializationSuccess(YouTubePlayer.Provider provider, YouTubePlayer player,
            boolean wasRestored) {
          if (!wasRestored) {
            player.loadPlaylist(PLAYLIST_ID);
          }
        }

        @Override
        protected YouTubePlayer.Provider getYouTubePlayerProvider() {
          return (YouTubePlayerView) findViewById(R.id.youtube_view);
        }
} 
```

# ruby-on-rails - 为 Web 界面和 API 构建我的应用程序

> ID：14428290
> 
> 赞同：0
> 
> 时间：2013-01-20T19:21:30.213
> 
> 标签：ruby-on-rails, api

我有一个也提供 API 的 Web 应用程序。API 相当简单，所以我只是在 response_to 块中处理它并在请求时返回 json。现在我想对我的 API 进行版本控制。我在看版本主义宝石。这提到使用 config/routes.rb 中的 api_version 方法来更改基于 API 版本的路由。不过我不明白这一点，因为我认为路线是相同的，但响应的行为会改变。

我的问题是，我的 Web 和 API 部分是否需要单独的控制器？另外，我需要一个单独的 API 命名空间吗？或者有没有办法保持现在的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:30:15.477

在提供 API 时，您可能希望做一些不同的事情。其中之一是能够设置 API 版本，这样您就可以通过添加新版本来增强 API 而不会破坏现有客户端。如果您的 API 非常简单，您可以通过提供包含该版本的第二组路由来实现此目的。您可以为此使用版本控制程序。但是，当您需要添加版本时，最简单的解决方案（以及将关注点很好分离的解决方案）将是持有一组单独的控制器，并保持它们精简，这样就不会出现代码重复。这可能允许您为 API 使用额外的 gem（例如 RABL、JBuilder 或 Rocketpants）。他们每个人都有 railscast，我建议观看他们以了解 API 构建的背景。

# c++ - 写入向量数组时，fwrite 失败，参数无效

> ID：14428291
> 
> 赞同：0
> 
> 时间：2013-01-20T19:21:41.533
> 
> 标签：c++, vector, fwrite

尝试将结构向量写入文件时遇到问题。

```
void Obj::Write(wchar_t const* filename)
{
    FILE* file;
    errno_t err = _wfopen_s(&file, filename, L"wb");
    assert (file && !err);

    assert (sizeof(VertexData_VNT) == 32);
    assert (vertexArray.size() == 1654);

    //unsigned int const vertexCount = vertexArray.size();
    //if (fwrite(&vertexCount, sizeof(unsigned int), 1, file) != 1) {
    //    perror ("fwrite(&vertexCount, ...) error:");
    //}

    if (fwrite(&vertexArray, sizeof(VertexData_VNT), vertexArray.size(), file) != vertexArray.size()) {
        perror ("fwrite(&vertexArray, ...) error:");
    }

    fclose(file);
} 
```

其中 vertexArray 定义为：

```
std::vector<VertexData_VNT> vertexArray; 
```

而 VertexData_VNT 是一个 32 字节的结构，只包含浮点数。

大多数时候 fwrite 失败并出现“无效参数”错误，并且什么也不写。虽然有时它工作得很好......这对我来说没有意义。

如果我取消注释上面的行，我会在同一个 fwrite 语句中得到一个“访问冲突读取位置”异常。fwrite.c 第 139 行中的 memcpy 似乎存在问题。

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:26:51.663

它应该是：

```
&vertexArray[0] 
```

在

```
if (fwrite(&vertexArray[0], sizeof(VertexData_VNT), vertexArray.size(), file) != vertexArray.size()) {
    perror ("fwrite(&vertexArray, ...) error:");
} 
```

您正在获取矢量对象的地址。不是元素的地址。

由于向量的元素保证在连续空间中，因此获取第一个元素的地址就像 C 数组前面的地址一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T19:26:59.997

尝试`&vertexArray[0]`代替`&vertexArray`

`std::vector`动态分配空间。数据*不*位于`std::vector`对象所在的位置，而是位于堆上的某个位置，并且向量通常只包含几个指针。

# javascript - jQuery从html标签中提取属性id

> ID：14428292
> 
> 赞同：0
> 
> 时间：2013-01-20T19:21:46.667
> 
> 标签：javascript, jquery, html, tags

我正在使用一段代码，该代码应该从 html 中的标签中提取值。它适用于单个单词，例如“desk”，但不适用于由两个或多个单词组成的 id：`<a href='#' id='hello world'> Hello world </a>`

在这种情况下，我只得到“你好”这个词，而不是“你好世界”。这是我的代码：

```
 $('ul').on('click', 'li', function(){ 
            var id = $(this).attr('id');
            console.log(id);
     }); 
```

有什么方法可以提取多个单词 id？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T19:39:31.950

[根据规范](http://www.w3.org/TR/2010/WD-html5-20101019/elements.html#the-id-attribute)，该`id`属性不能包含空格，但即使可以，该属性也是存储通用数据的更好位置。 s 用于*标识*元素。[`data-*`](http://www.w3.org/TR/2010/WD-html5-20101019/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)`id`

 *html:

```
<li data-value="hello world"></li> 
```

js：

```
$('ul').on('click', 'li', function(){ 
    var val = $(this).data('value');
    console.log(val);
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T19:25:51.950

ID 只支持一个值。在这种情况下，使用一个类。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-20T19:28:00.803

ID 应该是唯一值，因此其中只有一个值。使用空格不好，我会用下划线替换它们。如果您需要多个值，您可能希望使用类来代替。

但是，这就像您要求的那样工作。

HTML：

```
<li id='hello_world'> Hello world </li> 
```

JS：

```
$('li').on('click', function(){ 
        var id = $(this).attr('id');
        alert(id);
}); 
```*

# json - 使用 Actionscript 的封面艺术 API URLRequest

> ID：14428296
> 
> 赞同：0
> 
> 时间：2013-01-20T19:22:06.013
> 
> 标签：json, actionscript-3, api, http-status-codes

我正在尝试使用封面艺术存档 api。[封面艺术档案](http://musicbrainz.org/doc/Cover_Art_Archive/API)

```
var request:URLRequest = new URLRequest();
request.url = "http://coverartarchive.org/release/76df3287-6cda-33eb-8e9a-044b5e15ffdd/";
request.method = URLRequestMethod.GET;

var loader:URLLoader = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.TEXT;
loader.addEventListener(Event.COMPLETE, loaderComplete);
loader.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatusHandler);
loader.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);

loader.load(request);

function loaderComplete(evt:Event):void {
    trace("Load Succcsed");
}

function ioErrorHandler(evt:IOErrorEvent):void {
    trace("io: " + evt + "\n");
}

function httpStatusHandler(evt:HTTPStatusEvent):void {
    trace("status: " + evt + "\n");
} 
```

但我得到的是：

状态：[HTTPStatusEvent type="httpStatus" bubbles=false cancelable=false eventPhase=2 status=0 responseURL=null]

io: [IOErrorEvent type="ioError" bubbles=false cancelable=false eventPhase=2 text="Error #2032: Stream Error. URL: [http://coverartarchive.org/release/76df3287-6cda-33eb-8e9a-044b5e15ffdd/](http://coverartarchive.org/release/76df3287-6cda-33eb-8e9a-044b5e15ffdd/) "]

谁能告诉我我做错了什么？

谢谢

编辑1：添加：reqest.requestHeaders = new Array(new URLRequestHeader("accept", "application/json")); 还是不行。。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:19:33.083

我不认为你做错了什么。似乎 HTTP 请求返回`307 TEMPORARY REDIRECT`状态：

```
$ curl -v http://coverartarchive.org/release/76df3287-6cda-33eb-8e9a-044b5e15ffdd/
* About to connect() to coverartarchive.org port 80 (#0)
*   Trying 72.29.166.157... connected
* Connected to coverartarchive.org (72.29.166.157) port 80 (#0)
> GET /release/76df3287-6cda-33eb-8e9a-044b5e15ffdd/ HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: coverartarchive.org
> Accept: */*
> 
< HTTP/1.1 307 TEMPORARY REDIRECT
< Date: Sun, 20 Jan 2013 21:09:02 GMT
< Content-Type: text/plain; charset=utf-8
< Connection: keep-alive
< Keep-Alive: timeout=20
< Content-Length: 86
< Location: http://archive.org/download/mbid-76df3287-6cda-33eb-8e9a-044b5e15ffdd/index.json
< Access-Control-Allow-Origin: *
< Server: CherryPy/3.1.2 WSGI Server
< 
See: http://archive.org/download/mbid-76df3287-6cda-33eb-8e9a-044b5e15ffdd/index.json
* Connection #0 to host coverartarchive.org left intact
* Closing connection #0 
```

AFAIK，Flash`URLLoader/URLRequest`无法为您处理重定向；我看到的唯一解决方案是自己使用`Socket`该类发出 HTTP 请求，然后`Location`自己掌握！[显然有人已经尝试过了](http://forums.adobe.com/message/4354054#4356510)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T22:40:05.023

添加到 Antoine 的答案中，AS3 url 加载器可以遵循重定向。

```
loader.followRedirects = true; 
```

更多详细信息来自[adobes 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html#followRedirects)。

# javascript - 如何使用 JavaScript 子字符串来检测 iFrame 源是否包含 youtube URL？

> ID：14428300
> 
> 赞同：1
> 
> 时间：2013-01-20T19:22:16.613
> 
> 标签：javascript, url, youtube

我正在尝试检测页面上包含[http://www.youtube.com](http://www.youtube.com) URL 的所有 iframe，这就是我到目前为止所得到的：

```
 var iframes = document.getElementsByTagName('iframe');

    for (var i = 0; i != iframes.length; ++i) {
        if(iframes[i].src.substr(0,22) != 'http://www.youtube.com' {
            alert('YouTube video exists');
        }
    } 
```

它不起作用，所以我不知道我在做什么，或者我是否正确使用它，非常感谢任何帮助。然后我想为每个嵌入的 youtube 视频运行一个函数。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:29:02.660

试试这个：

```
<script>
    var iframes = document.getElementsByTagName('iframe');
    var key = /http:\/\/www.youtube.com/;

    for (var i = 0; i != iframes.length; ++i) {
       var match = iframes[i].src.search(key);
       if(match != -1) {
          alert('YouTube video exists');
       }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:32:34.180

```
if(iframes[i].src.substr(0,22) === 'http://www.youtube.com') 
```

而不是！=

# iphone - 向上或向下计数动画

> ID：14428305
> 
> 赞同：0
> 
> 时间：2013-01-20T19:22:47.953
> 
> 标签：iphone, objective-c, xcode

> **可能重复：**
> [在 for() 循环中间更新 UILabel](https://stackoverflow.com/questions/6363828/updating-uilabel-in-the-middle-of-a-for-loop)

我的应用程序中有一个 UItextfield（称为结果），它根据多个输入返回结果。

我希望结果显示动画，使数字从当前的数字增加。我对动画了解不多，但我正在考虑使用 for 循环来实现这一点。

我写了一些测试代码来看看这种方法是否可行，但它似乎没有做任何事情。任何我出错的想法，或者这是否是实现这一目标的好方法？

```
-(IBAction)test;
{
    float result = ([maintenance.text floatValue]);
    result=0;
    int i;

    for (i=1; i==100; i++) {

        //Assign result figure to result text box
        resultVal.text = [NSString stringWithFormat:@"%2.f",result];

        result =result+10;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:06:32.897

这段代码永远不会执行

```
for (i=1; i==100; i++) {...} 
```

此外，这两个代码片段的结果是完全等价的：

```
float result = ([maintenance.text floatValue]);
result=0;

// or
float result = 0; 
```

也许通过C底漆会是为了？

# c# - linq .Sum() 不适用于 Short 属性

> ID：14428307
> 
> 赞同：0
> 
> 时间：2013-01-20T19:22:58.317
> 
> 标签：c#, linq

我有一个包含对象列表的对象模型，这些对象具有定义为短的属性。它看起来有点像这样：

```
public class MyObject
{
   public short TheNumber { get; set;}
}

List<MyObject> TheListOfMyObjects = SomeMethodThatReturnsList(); 
```

现在我想对列表中所有对象的 TheNumber 进行求和，所以我写了这个：

```
var TheSum = (from a in TheListOfMyObjects 
              where....
              select a.TheNumber).Sum(); 
```

我收到一条错误消息，提示 Sum() 没有定义。为什么这不起作用，我该如何解决？

编辑：

我有这个工作：

```
var TheCount = (from a in TheListOfMyObjects 
                where....
                select a).Count(); 
```

所以是的，我`System.Linq`在 using 声明中。不知道为什么反对票。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T19:30:39.327

Sum 没有简称重载（Int16），即[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)

要么先转换/解析，要么做`.Sum(i => i)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:39:24.937

```
var TheSum = (from a in TheListOfMyObjects 
          where....
          select (int)a.TheNumber).Sum(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:27:06.530

`Sum``IEnumerable<T>`是 中定义的扩展方法[`System.Linq.Enumerable`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)。为了使用扩展方法，它需要在范围内，因此您需要将 using 添加到所需的命名空间。

```
using System.Linq; 
```

# php - 在 Doctrine 2 中创建博客文章时插入标签数组

> ID：14428309
> 
> 赞同：2
> 
> 时间：2013-01-20T19:23:07.133
> 
> 标签：php, symfony, doctrine-orm

我有一个相对简单的 Blog Post 对象，命名为`Blog`每个新创建（或更新）的帖子都有一些标签（以 json 数组的形式）分配给它，这些标签需要循环并插入到`blog_link_tags`连接表中，因此每个博客帖子可以有多个标签分配给它。

目前我的代码看起来像这样，但这似乎是错误的。

```
public function insertAction(Request $request)
{

    $blogPost
        ->setTitle( $request->request->get('post_title', '') )
        ->setBody( $request->request->get('post_body', '') );

    $em = $this->getDoctrine()->getManager();
    $em->persist($blogPost);

    $tags = new BlogLinkTag();
    $tags->setBlogId( */get blog post id* );
    $tags->setTagId(1);

    $em->persist($tags);
    $em->flush();

} 
```

有没有更好的方法来执行此操作？例如，这样的事情更有意义：

```
$blogPost
    ->setTitle( $request->request->get('post_title', '') )
    ->setBody( $request->request->get('post_body', '') )
    ->setTags( json_decode($request->request->get('post_tags')) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:06:18.077

这是一个[多对多的关系](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-unidirectional)。
您确实需要一个额外的表来将 a 链接`BlogPost`到 a `Tag`，但您不需要`BlogLinkTag`实体，ORM 会处理这个问题。

你应该做的是`$tags`在你的`BlogPost`:

```
class BlogPost
{
    /**
     * @Column(type="string")
     */
    protected $title;

    /**
     * @Column(type="string")
     */
    protected $body;

    /**
     * @ManyToMany(targetEntity="Tag") @JoinTable(
     *  name="blog_link_tags",
     *  joinColumns={@JoinColumn(name="blogPostId", referencedColumnName="id")},
     *  inverseJoinColumns={@JoinColumn(name="tagId", referencedColumnName="id")}
     * )
     */
    protected $tags;

    public function __construct() {
        $this->tags = new \Doctrine\Common\Collections\ArrayCollection();
    }

    public function addTag(Tag $tag) {
        $this->tags->add($tag);
    }

    public function removeTag(Tag $tag) {
        $this->tags->removeElement($tag);
    }
} 
```

当您 persist 时`BlogPost`，它的标签将被保存在一起，而无需您进行任何明确的操作。

与您希望在问题中实现的目标相比，唯一的问题是您需要实例化每个`Tag`以将其添加/删除到`BlogPost`. 您将使用对象，而不是 id！

# linux - Vagrant 中具有简单 LAMP 的多个虚拟主机

> ID：14428311
> 
> 赞同：6
> 
> 时间：2013-01-20T19:23:08.320
> 
> 标签：linux, lamp, vagrant

我正在尝试通过 Vagrant 创建一个简单的 LAMP，它可以支持存储在 /var/www 中的多个网站。这可以通过虚拟主机来完成。

每个项目都应该以 .dev 结尾

无法忍受创建每个构建都支持一个项目的想法，每个构建都支持一个数据库。

我不能用 Puppet 或 Chef 做头或尾。我宁愿避免这种情况，但很高兴从回购中克隆它。

我需要一些建议或指出正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-27T13:39:05.803

# 
Vagrant LAMP 多个虚拟主机 - 已更新！

*请参阅下面的更新信息*

我一直在寻找如何改进我的 Web 开发工作流程的方法。我目前在主题项目等中使用各种工具和应用程序，例如 LAMP、Webmin 和 Filezilla。然后我发现了这个名为**Vagrant**的神奇工具的存在，在用我的项目对其进行测试后，我爱上了它，并决定将它集成到我当前的本地 Web 开发环境中。因此，我进一步挖掘并搜索了如何使用我选择的基本框使用**Vagrant创建和设置****Multi Vhosts**设置的可能性。搜索 Google 会返回许多结果，但我决定点击 stackoverflow 中的链接并找到这个问题。我按照中提到的链接**`Ubuntu 12.04 Precise Pangolin 32-bit``Dimitri Kouvdis`的答案，这是一个 Github Repo。我已经对其进行了测试，并遇到了与`Dimitri Kouvdis`也遇到的非常相似的问题。但是现在已经解决了，多亏了他的评论，我才成功。但是在我寻找***具有多个虚拟支持的理想 Vagrant Box 的***过程中，我从 Github 搜索并测试了几个存储库，直到找到适合我的一个，并且我确实找到了一个。我寻找这些存储库的原因是我还不知道如何使用 Puppet 和 Chef 来配置我自己的 Dev Server，这就是原因。** 

 **## 我找到了另一个对我有用的 Github 存储库

### 感谢这个回购

`onema / vagrant-lamp-development`

[https://github.com/onema/vagrant-lamp-development](https://github.com/onema/vagrant-lamp-development)

测试 Github Repo`Dimitri Kouvdis`提到过，我遇到了几个问题，在那段时间我停止了工作，并决定从 Github 搜索类似的 repo。我找到了几个并测试了其中一些，包括 Nino Paolo 的 Repo ( [https://github.com/paolooo/vagrant-lamp](https://github.com/paolooo/vagrant-lamp) )。特别是在`vagrant up`. 我决定再次搜索另一个，直到找到并成功设置[**onema**](https://github.com/onema/vagrant-lamp-development)的 repo。我最终决定在我的 Web 开发实践环境中使用并将此解决方案集成到我当前的工作流程中。我开始喜欢`onema`'s repo 因为；

*   它很容易设置，因为说明很容易遵循，特别适合像我这样的新手和自学者。
*   它有几个文档和示例设置。
*   最重要的是，与我测试过的其他虚拟主机相比，添加新虚拟主机很容易。
*   您可以选择并设置本地驱动器中的任何文件夹作为源站点/项目文件夹。
*   没有不必要的（在我的情况下）附加组件（node.js，less 等），这很简单。我只需要 LAMP Stack，加上 vhost 支持和 phpmyadmin。

## 如何设置 - 对于像我这样的初学者和自学者

正如我上面提到的，通过阅读并遵循从它的 Github Repo 页面中找到的说明，设置很容易（特别是对于像我这样的新手和自学者）。- [https://github.com/onema/vagrant-lamp-development](https://github.com/onema/vagrant-lamp-development)。您可以选择使用下载的[**zip 文件**](https://github.com/onema/vagrant-lamp-development/archive/master.zip)或选择用于`git clone https://github.com/onema/vagrant-lamp-development`将`Vagrant`文件复制到本地驱动器。

### 这就是我设置它的方式（在我的 *nix 机器上，Ubuntu 12.04 x64）；

1.  使用下载的 zip 文件将文件下载到本地驱动器，或者进行`git`基本的 Vagrant 和 VirtualBox 设置。从[Github Page](https://github.com/onema/vagrant-lamp-development)阅读说明，并执行以下步骤。

2.  通过我的设置，我已经编辑`Vagrantile`了一点。在`line: 70`原始文件中，我通过向以下位置添加注释来`Vagranfle`禁用 NFS`#`

    `config.vm.synced_folder "~/Sites", "/vagrant", nfs: true`

    所以，它现在看起来像这样......

    `#config.vm.synced_folder "~/Sites", "/vagrant", nfs: true`

    然后注释掉...

    `#config.vm.synced_folder "~/Sites", "/vagrant"`

    `line: 140`从原`Vagrantfile`

    所以，它现在看起来像这样......

    `config.vm.synced_folder "~/Sites", "/vagrant"`

    我这样做是因为在我的机器中`vagrant up`，它会抛出几个我不理解的与 NFS 相关的错误。

3.  现在，为了这个例子，从它的 Repo Page 的例子中，创建一个文件夹，你必须命名它`Sites`。这应该位于您的**用户帐户的**文件夹根目录或您的**主文件夹**中。

    `/home/your-user-account-home-folder/Sites`

    就我而言，（注意大写的 S）

    `/home/gary/Sites`

    *   A.

        创建您的示例 dev-site/vhost 并创建一个名为的新文件夹`wordpress.dev`，并将其作为 vhost 的文档根目录`wordpress.dev`然后在此处添加您的项目文件。见下面的例子；

        `/home/gary/Sites/wordpress.dev`

    *   B.

        现在，为您新创建的虚拟主机创建一个简单的启动页面，以便在您从浏览器访问开发站点时确认您的配置正在将您重定向到目标虚拟主机根文件夹。当然，当您的配置正确时，您会看到启动页面。这就是我制作启动页面的方式。

        我创建了一个`index.php`文件并在其中放入了一些代码，就像这样；

        `<?php echo "Success!!! Your wordpress.dev looks fine"; ?>`

        因此，当您成功到达您的虚拟主机时，您会收到消息`Success!!! Your wordpress.dev looks fine`

4.  现在，将您的 Vagrant Box 的 IP 地址添加到您的`hosts`文件中，并将您的开发站点映射`wordpress.dev`到它，如下所示；

    `192.168.50.4 wordpress.dev`

    注意：`192.168.50.4`是 Vagrant Box 的默认配置 IP 地址，您可以根据自己的喜好更改此地址并更新您的`hosts`文件。

    **就我而言**，我是这样说的，

    *   A

        `10.10.10.10 wordpress.dev`- 在我的主机文件中，而

    *   B

        `config.vm.network "private_network", ip: "10.10.10.10"`

        在我的流浪文件中。***您可以通过查看您的内部并在此行下方导航***

        ***来找到此设置，`Vagrantfile`***

        `# Host-Only networking required for nfs shares`

        然后从那里更改`ip:`设置并更新您的`hosts`文件以匹配 IP。

5.  再次编辑`Vagrantfile`并添加您的虚拟主机设置，指向您的开发站点文件夹，像这样添加这些代码块；

    ```
    :wordpress => {
       :name => "wordpress",
       :host => "wordpress.dev", 
       :aliases => ["wordpress.dev"],
       :docroot => "/wordpress.dev"
    } 
    ```

    当您将代码添加到 orig`Vagrantfile`时，它应该如下所示；

    ```
     :vhost => {
        :localhost => {
        :name => "localhost",
        :host => "localhost", 
        :aliases => ["localhost.web", "dev.localhost-static.web"],
        :docroot => ""
      },
        :wordpress => {
        :name => "wordpress",
        :host => "wordpress.dev", 
        :aliases => ["wordpress.dev"],
        :docroot => "/wordpress.dev"
      } 
    ```

    所以你`Vagrantfile`现在看起来像下面这个；注意右花括号右上方`,`的`w`逗号。里面应该有一个逗号，当你添加另一个虚拟主机时，你应该在 wordpress的右花括号右侧添加另一个逗号。`:wordpress``}`

    `}`

    ```
     Vagrant.configure("2") do |config|
      config.vm.box = "precise32"
      config.vm.box_url = "http://files.vagrantup.com/precise32.box"
      config.vm.host_name = "localhost"
      config.vm.provision "chef_solo"  do |chef|
        chef.cookbooks_path = "cookbooks"    
        chef.add_recipe "vagrant_main"
        #####################################
        # MONGODB
        # https://github.com/edelight/chef-cookbooks
        #####################################
        chef.add_recipe "mongodb::10gen_repo"
        chef.add_recipe "mongodb::default"
        #####################################
        # REDIS
        # https://github.com/phlipper/chef-redis
        #####################################
        chef.add_recipe "redis"
        chef.json.merge!({
          :mysql => {
            :server_root_password => "root",
            :server_debian_password => "root",
            :server_repl_password => "root"
          },
          #####################################
          # YOU WILL NEED TO ADD THESE DOMAINS 
          # TO THE LIST OF HOSTS IN YOUR LOCAL 
          # ENVIRONMENT FOR THESE TO BE PROPERLY 
          # ROUTED
          #####################################
          :vhost => {
            :localhost => {
                :name => "localhost",
                :host => "localhost", 
                :aliases => ["localhost.web", "dev.localhost-static.web"],
                :docroot => ""
            },
            :symfony => {
                    :name => "symfony",
                    :host => "symfony.web", 
                    :aliases => ["symfony"],
                    :docroot => "/symfony/web"
            },
            :wordpress => {
                :name => "wordpress",
                :host => "wordpress.dev", 
                :aliases => ["wordpress"],
                :docroot => "/wordpress.dev"
            }
          }
        })
      end
      config.vm.network "forwarded_port", guest: 80, host: 8080
      config.vm.network "forwarded_port", guest: 3306, host: 3307

      ##########################################################################
      # UNCOMMENT IF NFS IS DISABLED
      ##########################################################################
      config.vm.synced_folder "~/Sites", "/vagrant"

      ##########################################################################
      # NFS 
      # Enable if you have performance issues with large projects. 
      # see the following links for more info:
      # http://forum.symfony-project.org/viewtopic.php?t=52241&p=167041#p147056
      # http://docs.vagrantup.com/v2/synced-folders/nfs.html
      # http://www.phase2technology.com/blog/vagrant-and-nfs/
      ###########################################################################
      # Host-Only networking required for nfs shares
      config.vm.network "private_network", ip: "10.10.10.10"
      #config.vm.synced_folder "~/Sites", "/vagrant", nfs: true

      config.vm.provider :virtualbox do |vb|
        #   # Don't boot with headless mode
        #   vb.gui = true
        #
        #   # Use VBoxManage to customize the VM. For example to change memory:
        vb.customize ["modifyvm", :id, "--memory", "512"]
      end
    end 
    ```

6.  您现在可以启动 Vagrant Box，打开终端窗口

    `ctrl + alt + t`并输入

    `cd vagrant-lamp-development`以将目录更改为`vagrant-lamp-development`文件夹并输入，

    `vagrant up`

    这样您就可以启动 Vagrant Box 虚拟机，然后等待它完全启动。**FIRST INITIAL BOOT UP**需要几分钟时间。成功启动后，打开浏览器并导航到

    [http://wordrpress.dev](http://wordrpress.dev)

    您应该会看到您在前面的**步骤 3 B**中制作的网页启动消息。

7.  **要添加新虚拟主机**，只需在其中创建一个新文件夹`/home/your-home-folder/Sites/new-project-folder`，然后...

    *   重复**步骤 3B、4A、5**

    *   如果您`Vagrantfle`在 VM Box**运行**时进行了更改或添加了 Vhost，请在终端中键入 ..

        `vagrant provision`

        以使更改生效。

    *   如果您`Vagrantfile`在 VM Box**关闭**时进行了更改或添加了虚拟主机，请在您的终端中键入 ...

        `vagrant up --provision`

        以使更改生效。

        **注意：**本`Vagrantfile`指南中使用的将下载一个`64-bit Precise Pangolin Basebox Base Box`，您可以`32-bit Precise Pangolin Basebox`通过将配置从`Vagrantfile`.

        我是这样做的，因为我已经下载了我的 32 位基础盒。于是我把它改成了32位，这样就不用再下载了。

        改变...

        ```
        Vagrant.configure("2") do |config|
             config.vm.box = "precise64"
             config.vm.box_url = "http://files.vagrantup.com/precise64.box" 
        ```

        到

        ```
        Vagrant.configure("2") do |config|
                config.vm.box = "precise32"
                config.vm.box_url = "http://files.vagrantup.com/precise32.box" 
        ```

        # 完毕！

* * *

### 我测试过的其他 Vagrant LAMP 存储库有效 - 但不一定支持多个虚拟主机

*   [r8/流浪灯](https://github.com/r8/vagrant-lamp) `Supports Multiple Vhosts`
*   [马坦德森/流浪灯](https://github.com/mattandersen/vagrant-lamp)
*   [乍得-汤普森/vagrantpress](https://github.com/chad-thompson/vagrantpress)

### 其他 Vagrant LAMP 存储库

*   [流浪灯回购](https://github.com/search?q=vagrant-lamp&type=Repositories&ref=searchresults)

### 如果你想使用 R8 的 Vagrant-LAMP 回购 - 用于多 Vhosts 目的

[r8/流浪灯](https://github.com/r8/vagrant-lamp)

以下是如何添加新的`vhosts`

1.  创建一个`.json`与您所需的开发站点名称匹配的新文件，例如：`wordpress.dev`in
    `vagrant-lamp/data_bags/sites`

    所以它应该看起来像......
    `vagrant-lamp/data_bags/sites/wordpress.json`

2.  编辑新创建的文件`wordpress.json`并添加以下内容（仅作为示例）；

    ```
    {
        "id": "wordpress",
        "host": "wordpress.dev",
        "aliases": [
            "www.wordpress.dev"
        ]
    } 
    ```

3.  `wordpress.dev`在里面创建一个名为的新文件夹`vagrant-lamp/public`
    所以它看起来像......
    `vagrant-lamp/public/wordpress.dev`

4.  编辑您的`hosts`文件以添加和映射`192.168.33.10``wordpress.dev`
    所以它应该看起来像这样...... `192.168.33.10 wordpress.dev`

5.  你很高兴... 启动 vagrant 并键入`vagrant up --provision`，如果该框已关闭
    如果在您执行该过程时该框已打开，则`vagrant provision`改为键入。

6.  在此之后，启动您的浏览器并测试您的配置，浏览到`http://wordpress.dev`.
    确保将一些索引文件放在那里。

## 更新：从 Github 添加了新的存储库。

伙计们，我的 Linux Mint 13（基于 Ubuntu 12.04）开发盒坏了。这就是为什么我不得不再次从头开始重新安装我的操作系统（我的坏...使用假 RAID 并且没有备份）。但是这一次，我使用了基于 Ubuntu 14.0.4 LTS 的 Linux Mint 17。

所以我从头开始重新安装了所有东西，并快速设置了我的 Web 开发环境。但事实证明，我之前使用 vagrant 的工作设置不再有效。因此，我搜索了有关如何设置另一个可与 Ubuntu 14.04 LTS 一起使用的 Web 开发环境的解决方案。幸运的是，我找到了一个使用另一个 Github repo 的工作设置，称为`CPT Server`

### 设置

所以这就是你设置它的方式。

*   克隆这个 repo：[cptserver](https://github.com/pigeontech/cptserver)
    或者下载 zip 文件
*   浏览到您克隆或下载 repo 的位置（提取 zip 文件）
*   打开 config/config.yaml 并自定义您想要的方式。就我而言，我没有触及任何默认配置，我只是添加了我的虚拟主机。
*   现在从您的终端浏览到您下载或克隆 repo 的位置，然后`vagrant up`

就是这样！第一次启动需要很长时间。

### 添加新的虚拟主机很容易

只需编辑 config/config.yaml 并转到文件的最底部。查找`vhost:`行并插入您的新虚拟主机，如下所示：

```
 ServerName: mydevsite.dev
    ServerAlias: mydevsite.dev
    DocumentRoot: /var/www/mydevsite.dev
    ServerAdmin: webmaster@localhost 
```

然后在里面创建一个新文件夹`www`并将其命名为与 ServerName 或 DocumentRoot 文件夹匹配`mydevsite.dev`

如果您在 vagrant 运行时添加了新主机，请执行此操作；`vagrant provision` 如果您在 vagrant box 运行时修改了 config.yaml 的上半部分，请执行此操作；`vagrant reload --provision`

不要忘记更新主机的 hosts 文件，将您的 vhost 指向 vagrant 的 ip。

就是这样了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T09:39:54.857

你也可以使用这个：

```
https://github.com/paolooo/vagrant-lamp 
```

你可以检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-09T18:20:26.267

最简单直接的 Vagrant 设置

[https://github.com/fideloper/Vaprobash](https://github.com/fideloper/Vaprobash)

观看[“Apache 虚拟主机配置”](http://fideloper.github.io/Vaprobash/index.html)视频以快速开始创建虚拟主机

不要忘记在安装之前取消注释您喜欢的数据库类型:)

**奖励**：我可以在几秒钟内通过 Sequel Pro 连接到 db 的唯一流浪设置**

# mysql - 在 Wordpress 中查询日志

> ID：14428314
> 
> 赞同：0
> 
> 时间：2013-01-20T19:23:11.093
> 
> 标签：mysql, wordpress, logging

如何通过 Wordpress 获取 MySQL 查询的日志？我需要一段时间的查询，例如一天。由于站点在共享主机上，因此无法启用慢查询日志。

我知道如何获取生成特定页面的查询列表。但我需要找出是什么在服务器数据库上造成了负载。

# windows-7 - 尝试创建 MonoGame Windows 7 桌面项目

> ID：14428315
> 
> 赞同：1
> 
> 时间：2013-01-20T19:23:15.677
> 
> 标签：windows-7, xna, visual-studio-2012, monogame

我打开了 Visual Studio 2012。在模板 > Visual C# > Windows 中，我目前没有看到 Monogame 模板。有人可以给我一些指示吗？我不确定我做错了什么。在解决方案资源管理器中，我看到以下 3 个项目...

*   Lidgren.Network.Windows

*   MonoGame.Framework.Content.Pipeline.Windows

*   MonoGame.Framework.Windows

难道不应该有一个 MonoGame 项目模板可以选择来启动我的项目吗？MonoGame 是否需要安装 XNA？

基本上我正在尝试做一个helloworld。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:19:07.387

从您的描述看来，您正在查看 MonoGame 的源代码。您应该使用[安装程序](http://monogame.codeplex.com/downloads/get/511666)安装 MonoGame ，这会将 MonoGame 项目模板放在正确的位置，以便 Visual Studio 找到它们。

# jquery - 额外的 使用 jquery .append() 创建

> ID：14428319
> 
> 赞同：2
> 
> 时间：2013-01-20T19:23:30.860
> 
> 标签：jquery, json

我将 json 响应附加到 html 元素。代码很简单

HTML

```
<div>
  <ul id='grid'></ul>
</div> 
```

jQuery

```
data = ["Paintings",{ "age":0}]

$(function() {
   $.each(data, function(i,index) {         
     $('div').find('ul').append('<li>'+index.age+'</li>');
  });
}); 
```

输出看起来像这样

不明确的

0

undefined 来自哪里？

我尝试使用它来删除未定义的

```
$('#grid').children(':first-child').remove('li'); 
```

但它删除了“0”和未定义的。

[http://jsfiddle.net/ccUKH/](http://jsfiddle.net/ccUKH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:27:05.423

您的数据是一个包含两个元素的数组，一个字符串`'Paintings'`和一个对象`{age:0}`。

当您的代码迭代“数据”时，`data.0.age`评估为“未定义”（因为它是一个字符串并且不能有子级），并`data.1.age`评估为“0”。

也不需要在 中找到`<ul>`，`<div>`因为您已经给出了`<ul>`“网格”的 和 id（除非您想将此数据附加到每个`<div>`包含 a 的数据`<ul>`）。

尝试重组数据，并`<ul>`像这样直接定位您：

```
data = {"Paintings" : [{"age":0}, {"age":5}]};

$.each(data.Paintings, function(i,index) {
  $('#grid').append('<li>'+index.age+'</li>');
}); 
```

[http://jsfiddle.net/ccUKH/2/](http://jsfiddle.net/ccUKH/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:27:33.507

是`undefined`从`"Pages".age`。试试这个：

```
$.each(data, function(i,index) {
    if (index.hasOwnProperty('age')) {         
        $('div').find('ul').append('<li>'+index.age+'</li>');
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T19:27:39.947

`data`是一个数组，数组的第一个元素是一个字符串`Paintings`。数组的第二个元素是具有属性的对象`age`。

循环遍历数组中的`each`两个元素，并且由于 string 没有属性`age`，它创建了一个带有 text 的 LI `undefined` 。

您可以更改数据结构或在数组中查找`object`or`string`并做出相应的反应......不确定您想要做什么。不清楚你在做什么`Paintings`

# ios - ScrollView 灵敏度 iOS

> ID：14428327
> 
> 赞同：1
> 
> 时间：2013-01-20T19:24:12.927
> 
> 标签：ios, xcode, performance, uiscrollview

如何降低 ScrollView 的速度。

因为 TableView 中的图像有问题。我想让 Scroll 变慢，或者也可以（如果可能的话）它停止得更快

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:55:31.407

AFAIK，你不能减慢滚动视图的滚动速度。这也可能感觉很尴尬，因为用户习惯于移动内容，例如用手指在桌子上的一张纸周围移动。

但是，您可以做的是使滚动视图快速减速，这意味着它不会继续滚动，甚至会在触摸结束后立即停止。（参见[UIScrollView](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html)`decelerationRate`的属性）

另一种选择是在滚动视图上放置另一个视图并让它拦截所有触摸事件，这样您就有机会根据需要选择手指移动和内容移动之间的比率。不过，这将是相当乏味的，因为您必须实现所有的弹跳、惯性运动，并且——最重要的是——从其他动作中区分滚动事件并将它们传递给下面的界面元素。

# java - 有人可以帮助排序部分吗？

> ID：14428328
> 
> 赞同：-1
> 
> 时间：2013-01-20T19:24:15.663
> 
> 标签：java, database, arrays, sorting

我很难为我的程序创建排序方法。我创建了一个程序，询问用户是否要从 AZ 添加、删除、搜索或排序。这是我的程序代码

```
import java.util.Scanner;
import java.io.*;
/**
 * Write a description of class Final_Project here.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
public class Final_Project
{
    public static void main (String args[])throws IOException 
    {
        Scanner c = new Scanner(System.in);
        Scanner a = new Scanner(System.in);
        Scanner f = new Scanner(System.in);
        Scanner g = new Scanner(System.in);
        String car[][] = new String [20][4];
         System.out.println("JD Car Inventory");
         System.out.println();
        System.out.println();
         while (true)
        {
            System.out.println(); 
            System.out.println("What would you like to do?");
            System.out.println("a= Add vehicle");
            System.out.println("b= Delete vehicle");
            System.out.println("c= Search Inventory");
            System.out.println("d= Sort Inventory");
            System.out.println("e= Exit Program");
            System.out.println("f= View database");
            System.out.println();
            String get = g.nextLine();
            System.out.println();
             if (get.equalsIgnoreCase("a")){
                a(car);
            }
             else if(get.equalsIgnoreCase("b")){
                del(car);
            }
            else if (get.equalsIgnoreCase("c")){
                search(car);
            }
            else if (get.equalsIgnoreCase("d")){
                 sort(car);
            }
            else if (get.equalsIgnoreCase("e"))
            {   
                System.out.println ("Thank you for visiting JD CAR'S.");
                break;
            }
            else if (get.equalsIgnoreCase("f"))
            { 
                BufferedReader input = new BufferedReader (new FileReader("name.txt"));
                 for (int y=0;y<20;++y)
                {
                    for (int x=0;x<4;++x)
                    {   
                        String line = input.readLine();
                        car[y][x] = line;
                        if (line == null)
                        {
                            car[y][x] = "";
                        }
                    }
                }
                input.close();
                 PrintWriter output = new PrintWriter (new FileWriter("name.txt"));
                for (int y=0; y<20; y++) //rows
                {
                    for (int x=0; x<4; x++) //columns
                    {    
                        System.out.print (String.format("%1$-" + 32 + "s", car[y][x]));
                        output.println(car[y][x]);
                    }
                    System.out.println ();
                    System.out.println("------------------------------------------------------------------------------------------------------------------------");
                    //output.println();
                    //output.println("-------------------------------------------------------------------------------------");
                }
                output.close();
             }
            else 
            {
                System.out.println ("This is invalid. Enter again.");
            }
         }
     }  
    public static void a (String car[][])throws IOException
    {
        Scanner sc = new Scanner(System.in);
         for (int y=11;y<20;++y)
        {
            for (int x=0;x<4;++x)
            {   
                if (car[y][x].equals(""))
                {
                    while (true)
                    {    
                        System.out.println ("What is the name of the vehicle?");
                        car[y][x] = sc.nextLine ();
                         x+=1;
                        System.out.println ("How much Horsepower does it have?");
                        car[y][x]  = sc.nextLine ();
                         x+=1;
                        System.out.println ("What is the Engine Size (L)?");
                        car[y][x]  = sc.nextLine ();
                         x+=1;
                        System.out.println ("What is the price ($)?");
                        car[y][x] = sc.nextLine ();
                         x+=1;
                        System.out.println ("Would you like to add more?");
                        String add = sc.nextLine ();
                    }
                }                     
            }
         }
    }
     public static void del (String car[][])throws IOException
    {
        Scanner l = new Scanner(System.in);
        Scanner cs = new Scanner(System.in);
         System.out.println("Do you want to remove any vehicle?");
        String del = l.nextLine();
        if (del.equalsIgnoreCase("yes")){   
            System.out.println("Enter the field number you would like to remove (1,2,3,4)");
            double d= cs.nextDouble();
             System.out.println();
             if (d == 1){
                car[1][0] = "";
                car[1][1] = "";
                car[1][2] = "";
                car[1][3] = "";
            }
             else if (d == 2){
                car[2][0] = "";
                car[2][1] = "";
                car[2][2] = "";
                car[2][3] = "";
             }
             else if (d == 3){
                car[3][0] = "";
                car[3][1] = "";
                car[3][2] = "";
                car[3][3] = "";
            }
             else if (d == 4){
                car[4][0] = "";
                car[4][1] = "";
                car[4][2] = "";
                car[4][3] = "";
            }
             else if (d == 5){
                car[5][0] = "";
                car[5][1] = "";
                car[5][2] = "";
                car[5][3] = "";
                car[5][4] = "";
                car[5][5] = "";
            }
             else if (d == 6){
                car[6][0] = "";
                car[6][1] = "";
                car[6][2] = "";
                car[6][3] = "";
            }
             else if (d == 7){
                car[7][0] = "";
                car[7][1] = "";
                car[7][2] = "";
                car[7][3] = "";
            }
             else if (d == 8){
                car[8][0] = "";
                car[8][1] = "";
                car[8][2] = "";
                car[8][3] = "";
             }
            else if (d == 9){
                car[9][0] = "";
                car[9][1] = "";
                car[9][2] = "";
                car[9][3] = "";
            }
            else if (d == 10){
                car[10][0] = "";
                car[10][1] = "";
                car[10][2] = "";
                car[10][3] = "";
            }
         }
     }
     public static void search( String car[][])throws IOException
    {
         Scanner f = new Scanner(System.in);
        Scanner a = new Scanner(System.in);
        Scanner o = new Scanner(System.in);
         while(true){

            System.out.println ("0 = Car Name");
            System.out.println ("1 = Horsepower");
            System.out.println ("2 = Engine Size");
            System.out.println ("3 = Price");
            int cNumber = f.nextInt (); 
            System.out.println ("Enter what to search?");
            String sA = a.nextLine ();
            boolean flag=true;
            for (int j=11;j<20;++j)
            {
                for (int k=0;k<4;++k)
                {   
                    if(sA.equals (car[j][cNumber]))
                     {
                        while (true)
                        {  
                            flag=true;
                            int t=0; 
                            int q=0;
                             System.out.print (String.format("%1$-" + 32 + "s", car[t][q]));
                            q+=1;
                            System.out.print (String.format("%1$-" + 32 + "s", car[t][q]));
                            q+=1;
                            System.out.print (String.format("%1$-" + 32 + "s", car[t][q]));
                            q+=1;
                            System.out.print (String.format("%1$-" + 32 + "s", car[t][q]));
                            q+=1;
                            System.out.println();
                            break;
                        }
                    }
                }
                if (flag == false )
                    {
                        System.out.println();
                        System.out.println ("No search resulst for" + sA + ". Trying to see if you spelt the word right.");
                    }
                    System.out.println();
                    System.out.println ("Would you like to search again?");
                    sA = o.nextLine ();
                    if (sA.equalsIgnoreCase ("no"))
                    {
                        break;
                    }
                } 
            }
        }

    public static void sort (String car[][])throws IOException
    {

}

    }
 } 
```

有人可以告诉我该怎么做，我应该使用冒泡排序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:56:05.757

由于这看起来像研究，只有建议：

将问题拆分为*已经完成*（最初为空）和*待做*（最初全部）。然后反复从待办事项中挑选一个候选人并增加待办事项。

有一点像：

```
int sortedCars = 0;

while (sortedCars < car.length) {

    // Pick the smallest from the unsorted cars:
    int smallest  = sortedCars;
    for (int i = smallest + 1; i < car.length; i++) {
        if (car[i] less than car[smallest]) {
            smallest = i;
        }
    }

    // Exchange car[sortedCars] with car[smallest]:
    ...
    ++sortedCars;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:29:10.697

我认为您不应该编写自己的排序方法。而是利用 Java 的内置`Arrays.sort`方法

例如。

```
Arrays.sort(car, new Comparator() {
    public int compare(Object o1, Object o2) {
        // compare based on which column you want
        return o1[0].compareTo(o2[0]);
    }
}); 
```

# algorithm - 带有传送器的网格上的 A* 可接受的启发式方法？

> ID：14428331
> 
> 赞同：21
> 
> 时间：2013-01-20T19:24:21.927
> 
> 标签：algorithm, artificial-intelligence, path-finding, a-star, heuristics

假设您有一个 2D 单元格网格，其中一些被墙填充。角色可以从一个方格跨步到任何水平或垂直的方格，但不能穿过墙壁。

给定一个起始位置和一个结束位置，我们可以通过使用具有可接受启发式的 A* 算法找到从起始位置到结束位置的最短路径。在当前的设置中，曼哈顿距离是可以接受的，因为它永远不会高估到目的地的距离。

现在假设除了墙之外，世界还有成对的传送器。踏上传送器会立即将角色传送到链接的传送器。传送器的存在打破了上面给出的可接受的启发式方法，因为通过使用传送器缩短距离，可能比采取最佳曼哈顿距离步行更快地到达目的地。例如，考虑这个线性世界，传送器标记为 T，起始位置标记为 S，结束位置标记为 E：

```
T . S . . . . . . . . . . . . . E . T 
```

在这里，最好的路线是步行到左边的传送器，然后向左走两步。

我的问题是：**在带有传送器的网格世界中，什么是 A* 的良好可接受启发式？**

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-20T19:29:38.747

如果你的世界中没有太多的传送器，我会尝试以下启发式方法，其中`MHD(a,b)`是 cell 之间的曼哈顿距离`a`，`b`并且`T(i)`是最接近 cell 的传送器`i`：

```
h(x,y) = min( MHD(x,y), MHD(x,T(x)) + MHD(T(y),y) ) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-20T19:38:41.157

形成传送器的图表：

*   每个传送器都有一个节点，末端位置有一个节点。
*   您有一条边将每个节点连接到其他节点，形成一个完全连接的图。
*   对于边权重，使用每个节点的目标单元格（当您进入传送器时进入的单元格）与所有其他节点之间的曼哈顿距离。

使用 Dijkstra 算法计算每个节点到末端的最短距离。

您现在可以使用特定位置与所有节点之间的距离的最小值加上从节点到末端的预先计算的距离作为启发式函数。Dijkstra 的算法只需运行一次作为预处理步骤。但是，如果传送器的数量占细胞数量的很大百分比，则与使用更简单的启发式函数相比，您可能不会获得任何好处。

# ruby-on-rails - 使用 Rails 资产管道提供 Slim/Jade

> ID：14428333
> 
> 赞同：2
> 
> 时间：2013-01-20T19:24:59.810
> 
> 标签：ruby-on-rails, angularjs, asset-pipeline, pug, slim-lang

我正在编写一个 Angular.js 应用程序，它需要为其各种视图获取静态 HTML 文件。

我想使用 Slim 或 Jade 来编写这些静态预编译视图，并使用 Rails 资产管道为它们提供服务。

我想出了如何在我的 config/application.rb 中使用它从资产管道中提供 html 文件： `config.assets.paths << "#{Rails.root}/app/assets/html"`

至于将 slim 或 jam 编译为 html，我已经搜索了 hi 和 low 的解决方案，但我得到的最接近的是[slim_assets](https://github.com/crowdint/slim_assets)，但它编译为 JST，而不是 HTML。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T08:11:28.983

您可以将 Jade 与此 [https://github.com/inossidabile/jade一起使用](https://github.com/inossidabile/jade)

[您可以通过此https://github.com/leshill/handlebars_assets](https://github.com/leshill/handlebars_assets)使用 Handlebars

# java - 无法启动活动 ComponentInfo 问题

> ID：14428335
> 
> 赞同：0
> 
> 时间：2013-01-20T19:25:07.987
> 
> 标签：java, android, android-activity

单击按钮时，我想打开另一个活动。我看不出问题出在哪里。我希望这里有人能告诉我出了什么问题。

onClick 活动一：

```
 public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bBerakna:

        if (isEditTextEmpty(anslag_mm) | isEditTextEmpty(bladVikten)
                | isEditTextEmpty(jamnViktsLage)
                | isEditTextEmpty(rotorSpann) | isEditTextEmpty(varv_Minut)) {

            Toast t = Toast.makeText(this,
                    "Du måste fylla i alla parametrarna!",
                    Toast.LENGTH_SHORT);
            t.show();
            break;
        } else {
            Intent resultat = new Intent(Input.this,
                    ExpandableListViewAppActivity.class);
            resultat.putExtra("ROTOR", rotorSp);
            resultat.putExtra("RPM", rpm);
            resultat.putExtra("JVIKT", jämVikL);
            resultat.putExtra("BVIKT", bladVikt);
            resultat.putExtra("ANSLAG", anslFäLä);              
            startActivity(resultat);
        }
    }; 
```

这是应该打开的活动二的 onCreate：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

        Intent getIntent = getIntent();
        rotorSp = (double) getIntent.getDoubleExtra("ROTOR", 0);
        rpm = (double) getIntent.getDoubleExtra("RPM", 0);
        jämVikL = (double) getIntent.getDoubleExtra("JVIKT", 0);
        bladVikt = (double) getIntent.getDoubleExtra("BVIKT", 0);
        anslFäLä = (double) getIntent.getDoubleExtra("ANSLAG", 0);

    berakna();

    // Döljer tangentbordet
    InputMethodManager inputManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    inputManager.hideSoftInputFromWindow(
            getCurrentFocus().getWindowToken(),
            InputMethodManager.HIDE_NOT_ALWAYS);

    setContentView(R.layout.main);

} 
```

这是来自 LogCat：

```
 01-20 19:09:09.068: E/AndroidRuntime(722): FATAL EXCEPTION: main
    01-20 19:09:09.068: E/AndroidRuntime(722): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.rotorbladen.tobias/com.rotorbladen.tobias.ExpandableListViewAppActivity}: java.lang.NullPointerException
    01-20 19:09:09.068: E/AndroidRuntime(722):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    01-20 19:09:09.068: E/AndroidRuntime(722):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    01-20 19:09:09.068: E/AndroidRuntime(722):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    01-20 19:09:09.068: E/AndroidRuntime(722):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    01-20 19:09:09.068: E/AndroidRuntime(722):  at android.os.Handler.dispatchMessage(Handler.java:99)
    01-20 19:09:09.068: E/AndroidRuntime(722):  at android.os.Looper.loop(Looper.java:123)
    01-20 19:09:09.068: E/AndroidRuntime(722):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    01-20 19:09:09.068: E/AndroidRuntime(722):  at java.lang.reflect.Method.invokeNative(Native Method)
    01-20 19:09:09.068: E/AndroidRuntime(722):  at java.lang.reflect.Method.invoke(Method.java:521)
   01-20 19:09:09.068: E/AndroidRuntime(722):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
   01-20 19:09:09.068: E/AndroidRuntime(722):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
   01-20 19:09:09.068: E/AndroidRuntime(722):   at dalvik.system.NativeStart.main(Native Method)
   01-20 19:09:09.068: E/AndroidRuntime(722): Caused by: java.lang.NullPointerException
   01-20 19:09:09.068: E/AndroidRuntime(722):   at com.rotorbladen.tobias.ExpandableListViewAppActivity.onCreate(ExpandableListViewAppActivity.java:92)
   01-20 19:09:09.068: E/AndroidRuntime(722):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
   01-20 19:09:09.068: E/AndroidRuntime(722):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
   01-20 19:09:09.068: E/AndroidRuntime(722):   ... 11 more 
```

# concurrency - 与 withPool 并行

> ID：14428337
> 
> 赞同：2
> 
> 时间：2013-01-20T19:25:13.883
> 
> 标签：concurrency, groovy, parallel-processing, gpars

我找到了一个关于如何使用的例子`withPool`。它说我只需要将单词添加`Parallel`到 Groovy 的方法中，例如`collect, find, each`，将其放入`withPool`并并行执行代码。

```
import static groovyx.gpars.GParsPool.withPool

list = 1..1000000

withPool{
    squares = list.collectParallel { it * it}
}
println squares 
```

有没有机会检查它是否真的平行？
我尝试使用相同的代码进行基准测试，但顺序方式
和并行方式要慢得多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T21:04:36.753

不知道你的意思是*'但顺序和并行方式要慢得多'* ......

这将并行运行，但对于这个简单的示例，将作业启动到其他处理器和处理结果排序的额外成本最终可能会比仅仅乘以一些数字花费更长的时间

对于显示它工作的简单示例，您可以执行以下操作：

```
import static groovyx.gpars.GParsPool.withPool

list = [ 2, 2, 2, 2, 2 ]

withPool{
    result = list.collectParallel {
        Thread.sleep( it * 1000 )
        it
    }
}
println result 
```

所以结果应该是`[2,2,2,2,2]`，但`collectParallel`应该在不到 10 秒的时间内完成，您期望使用串行`collect`版本

显然，这取决于您拥有多个核心；-)

# linux - Resolv.conf 的结构是什么？

> ID：14428338
> 
> 赞同：1
> 
> 时间：2013-01-20T19:25:23.413
> 
> 标签：linux, apache, networking, dns

我一直在广泛搜索，没有人真正从简单的角度解释这个文件中应该包含的内容，我有什么样的选择？

目前我已经购买了具有专用 IP 的 VPS。我在域 888x7.com 下设置了名称服务器，并为 ns1.888x7.com（也为 ns2）分配了 IP 109.169.46.109。

如果您查询 IP，您会得到一个测试页面，Web 服务器正在工作。

但是，如果您尝试使用 888x7.com 或链接到 ns1 和 ns2 的任何其他域访问该页面，则会收到错误消息：

```
ERR_NAME_RESOLUTION_FAILED 
```

目前我的 resolv.conf 看起来像这样：

```
nameserver 109.169.46.109 888x7.com
nameserver 109.169.46.109 lolysoft.com 
```

它是否正确？没有在网上（我可以找到）详细描述此文件。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:33:42.673

我相信你误解了`/etc/resolv.conf`文件的目的。该文件用于在本地机器上配置名称解析客户端（存根解析器）。它应该列出一个或多个愿意为您提供名称解析服务的递归解析器。

配置您的权威名称服务是完全不同的事情。如果类似的域`888x7.com`被委派给您的权威名称服务服务，那么您需要在该服务上运行权威名称服务器（例如 BIND），并为其配置一个区域文件，`888x7.com`其中包含您要在 DNS 中发布的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:29:46.720

“man resolv.conf”将记录该文件中可以包含的内容。

你也可以在这里在线查看：http: [//linux.die.net/man/5/resolv.conf](http://linux.die.net/man/5/resolv.conf)

名称服务器指令应该只包含名称服务器的 IP 地址，而不是主机名。

如果您需要命名一些不在 DNS 中的主机，请在 /etc/hosts 文件中进行。

我的 VPS 上的 hosts 文件：

```
[nedwidek@sv ~]$ cat /etc/hosts
127.0.0.1       localhost
68.169.43.71      sv.lighthouseitc.com sv 
```

这是在那里，如果名称服务器出现故障，它仍然可以自行解决。基本上，网络名称解析首先转到主机文件，然后如果主机未在此处列出，则转到 DNS。您可以通过查看 hosts 指令中的 /etc/nsswitch.conf 来查看您的服务器设置为做什么（属性文件表示 /etc/hosts 和相关文件）。

现在resolv.conf是指导系统如何使用DNS系统进行网络名称解析。我的 VPS 的 /etc/resolv.conf 我使用 Google 的名称服务器之一来解析主机。

```
[nedwidek@sv ~]$ cat /etc/resolv.conf
domain lighthouseitc.com
nameserver 8.8.8.8 
```

我本地机器上的 resolv.conf（我运行自己的 DNS 服务器来为我自己的私人网络提供服务）：

```
[nedwidek@yule ~]$ cat /etc/resolv.conf
# Generated by NetworkManager
domain ejnhome.net
search ejnhome.net
nameserver 192.168.101.1 
```

该域只是我编造的东西，希望没有人使用过（看一些小丑决定现在注册它）。搜索行基本上是 sys 如果我执行“ping printer1”来处理它，就好像我执行了“ping printer1.ejnhome.net”一样。

最终，我会尝试在当地（朋友或专业人士）找到可以帮助您的人。参加当地的 Linux 用户组 (LUG) 可能会帮助您找到一个热心的业余爱好者来帮助您。希望现实世界的例子有所帮助。我有 15 年的系统管理员经验，所以有时我并没有把它降低到足够的程度。

# mysql - 内存缓存日志 mysql

> ID：14428346
> 
> 赞同：0
> 
> 时间：2013-01-20T19:26:02.630
> 
> 标签：mysql, logging, memcached

我运行一个 php 代码来存储内存缓存数据。在 debian 系统上安装 PHP5-memcache、memcached、mysql。最新。

但是，我注意到即使我的 php 代码找到了键/值，仍然有一个 sql 查询。

以下是步骤： 1) 使用 Memcache 类设置键/值 2) 转到另一页 3) 回到页面，以便它应该获取键/值。没有其他改变，缓存设置为 1000 秒。

我放了回声，以便我知道发生了什么：它回答我它找到了集合/值对。

但我的 mysql 日志告诉我查询仍在执行。

我的意思是，查询日志在我的网站导航之后一遍又一遍地显示相同的查询，这是正常情况吗？

这个问题非常理论化。

非常感谢，

再见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:12:50.587

啊！！知道了 ！

我使用的是 php5-memcached，这在 Debian 上看起来有点邪恶。

相反，php5-memcache 可以完美运行。

所以，我认为一切都很好。

谢谢 Qeremy

# java - Java Hashtable哈希查找中的按位与？

> ID：14428347
> 
> 赞同：2
> 
> 时间：2013-01-20T19:26:08.577
> 
> 标签：java, data-structures, hash, hashtable, bit-manipulation

我注意到作为一部分的[哈希函数代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Hashtable.java#Hashtable.get%28java.lang.Object%29)`java.util.Hashtable#get(K key)`执行以下操作`int index = (hash & 0x7FFFFFFF) % tab.length;`：这个二进制“与”操作是否仅用于重置符号位？因此避免负面的表访问。

更新：他们使用 0x7FFFFFFF 而不是 0xEFFFFFFF 的事实让我感到困惑。为什么符号需要一个完整的字节而不是一个位？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T19:28:04.283

对，那是正确的。这是为了避免对哈希表中的底层数组进行负索引。

请注意，在 C 或 C++ 等具有无符号整数类型的语言中，只需在哈希函数中使用无符号值即可避免这种情况。

**编辑：**考虑到你关于为什么`0x7FFFFFF`vs的新问题`0xEFFFFFF`- 这些数字中的第一个全是 1，最高位设置为 0。其中第二个没有这个属性；结果是`1110`很多 1。因此，使用第一个屏蔽将清除 1 位，而使用第二个屏蔽可能不会这样做。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T21:28:18.410

> 他们使用 0x7FFFFFFF 而不是 0xEFFFFFFF 的事实让我感到困惑。为什么符号需要一个完整的字节而不是一个位？

0x7FFFFFFF 只是最高位。在二进制中，它是 01111111111111111111111111111111。而 0xEFFFFFFF 是 11101111111111111111111111111111，所以它会屏蔽不同的位。

# ios - 什么数据库更适合 iOS 应用程序开发以及如何实现搜索？

> ID：14428350
> 
> 赞同：13
> 
> 时间：2013-01-20T19:26:28.497
> 
> 标签：ios, database, xcode

在过去的两周里，我一直在阅读和学习如何使用以下书籍创建 iPhone 应用程序：*iOS 6 开发*入门、*故事板*和*使用和学习目标*C。我一直在浏览在线教程和这些书籍，但无法找到我想要的东西。

我正在创建一个简单的应用程序，它是一个可搜索的动物列表，然后当您单击单个动物时，它会显示有关它的信息（名称、图片、体重和原生位置）。我希望能够通过通用名称或其物种进行搜索，并且用户能够选择动物并阅读有关它的信息。没有添加新动物或编辑列表。接下来我希望能够按大陆排序。因此，例如，第一个场景将动物作为一个单元格，将大陆作为另一个单元格。如果他们点击动物，它会拉出所有动物并有一个 UISearchbar 来搜索所有动物，他们可以继续点击。如果他们单击大陆（澳大利亚），它将仅在该位置填充可搜索列表。

我的问题是：如何创建一个将这些变量链接在一起的数据库，然后能够通过搜索栏（plist、核心数据、sqlite）进行搜索？我应该为学习工具或教程使用什么资源？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-20T20:53:08.603

最佳选择取决于数据的数量和复杂性。如果你只有几百只动物，每只动物有几个属性，那么将所有数据放在一个 plist 中并将所有数据加载到内存中就可以了。

如果您有更多带有大注释和其他属性的数据，那么您可能无法将所有数据加载到内存中。那么使用 SQLite 将是一个更好的选择。

核心数据是另一种选择，但它具有最大的学习曲线，对于如此简单的数据来说可能是矫枉过正。如果您有更多关系，并且您希望跨设备同步用户数据，那么核心数据将是一个不错的选择，因为数据不是只读的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-21T08:21:30.280

你正在阅读所有这些东西是件好事。我将尝试为您创建一个“愚蠢”的答案。

你问数据库。这对您来说意味着我将数据存储在哪里。苹果和大多数技术人员用持久性或我在哪里持久化数据来谈论这个问题。

三种常用的（但我确信不是唯一的）存储方法是：

(1) 在称为 plist 文件
的文本文件中 (2) 在 xml 格式的文本文件中和
(3) 在 sqlite 文件或数据库文件中

我如何访问这些数据？

然后你会听到 CoreData，CoreData 是由 Apple 引入的，它可以更容易地访问你存储的数据，也可以帮助小型设备处理大量数据。在没有 coredata 的情况下访问 Sqlite 数据库需要一些工作，但是由于 CoreData，它们使这变得更容易。

至于 xml 和 plist，可以通过简单地将文件读入数组或字典来访问它们，然后像​​往常一样从这些对象中搜索或显示数据。

（关于 sqlite/core data 理念的一件事是，在设置 CoreData 时，您可以设置 sqlite 数据库，也可以是 xml 格式。）

一旦你知道了这两件事，你就可以根据你的目的需要混合和匹配。如果您有大量数据并使用它做很多事情，那么具有 CoreData 访问权限的 sqilte 文件将是一个不错的选择。如果是非常少量的信息，那么您可以使用简单的 plist 文件并使用 Array 或 Dictionary 对象来获取信息，使用它然后将其再次存储在文件中。

在您的情况下，听起来确实像一个简单的 plist 会起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-20T20:04:47.560

Core Data 通常被视为首选的 iOS 数据库技术，如果您想熟悉 iOS 中的数据库，您可能应该从那里开始。使用您最喜欢的搜索引擎并查找“核心数据教程”。[Ray Wenderlich经常在他的教程中做得很好，您绝对应该查看 Apple 链接（在](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)[http://developer.apple.com](http://developer.apple.com)上找到的视频和各种“入门”文档）。在考虑在 Stack Overflow 上发布后续问题之前，请先阅读一两个教程。

# javascript - 单击弹出按钮后，我想在网页上显示一些文本。但不工作，有什么建议吗？

> ID：14428360
> 
> 赞同：0
> 
> 时间：2013-01-20T19:27:07.607
> 
> 标签：javascript, dom

单击弹出按钮后，我想在网页上显示一些文本。但不工作，有什么建议吗？

我不是 javascript 专家，但我正在学习。

```
<html>
<head>
    <script type="text/javascript">
        var showMessage = "";
        window.onload = function(){
            if (confirm("Your Details have been Saved.")) {
                showMessage = "Please wait .. going to viewProfile";
                window.location.assign("viewProfile.php");
            } else {
                showMessage = "Please wait ..";    
                window.location.assign("editProfile.php");
            }
        }
    </script>
    </head>
    <body id="save-profile-page">
        <script type="text/javascript">    
            document.writeln(showMessage);
        </script>
    </body>
    </html> 
```

由于某种原因，消息不显示，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:38:37.523

变量`showMessage`是空的，直到 javascript 函数运行之后，也就是文档已经加载之后。相反，创建一个函数并在你`HTML`的地方调用它

```
function callConfirm(){
    if(confirm("...?")){
        document.writeln("Message1…");
    }
    else{
        document.writeln("Message2…");
    }
} 
```

在你的调用它`HTML`

```
<script>
    callConfirm();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T21:10:01.597

正如@mavili 所说，当您尝试打印它时，尚未定义 showMessage 。但是，此代码存在更严重的逻辑问题。变量 showMessage 分配在与重定向相同的范围内。一旦到达重定向调用，新页面就会加载，因此即使您重新排列代码，也没有机会显示消息。

# hibernate - 当服务在自动发现包中时，无法使用 tynamo-resteasy 持久化实体

> ID：14428364
> 
> 赞同：1
> 
> 时间：2013-01-20T19:27:28.060
> 
> 标签：hibernate, jpa, resteasy, tapestry, tynamo

在我发现 tynamo 和 resteasy 集成时，我遇到了保存数据的问题，我部分解决了（所以我将部分分享它;））。用户指南在这里：[http ://docs.codehaus.org/display/TYNAMO/tapestry-resteasy+guide](http://docs.codehaus.org/display/TYNAMO/tapestry-resteasy+guide)

我写了一个休息服务，允许在我的系统用户中注册“用户”：

```
package com.myorg.mobile.pushup.rest;
//[...]

/**
 * bla blah obfuscated pretty comments.
 * 
 * @author jrrevy
 * 
 */
@Path("/user")
public class UserResource {

    private Session session;

    /**
     * Constructeur du service
     * 
     * @param session
     *            Hibernate session
     */
    public UserResource(Session session) {
        this.session = session;
    }   

    /**
     * Lecture de tous les utilisateurs
     * 
     * @return une liste des utilisateurs existants
     */
    @GET
    @Produces("application/json")
    public List<User> getAllDomains() {
        return session.createCriteria(User.class).list();
    }

    /**
     * Create User.
     * 
     * @param user
     *            user to create
     * @return a Web Response
     */
    @POST
    @PUT
    @Produces({ "application/xml", "application/json" })
    public Response createOrUpdate(User user) {
        session.saveOrUpdate(user);
        return Response.ok().build();
    } 
```

对数据库的访问效果很好（我让我的用户回来了，在日志中看到了 INSERT INTO 命令），但是这个服务永远不会持久化任何东西。似乎该事务从未提交。

我正在使用 0.3.0 版本的 Tapestry-model-hibernate 和 Tapestry-resteasy ：

```
<dependencies>

    <dependency>
        <groupId>org.tynamo</groupId>
        <artifactId>tapestry-model-hibernate</artifactId>
        <version>0.3.0</version>
    </dependency>

    <dependency>
        <groupId>org.tynamo</groupId>
        <artifactId>tapestry-resteasy</artifactId>
        <version>0.3.0</version>
    </dependency>

</dependencies> 
```

请参阅上面的答案，但如果您找到更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:27:28.060

根据这个线程： http: [//osdir.com/ml/java-tynamo-user/2012-04/msg00005.html](http://osdir.com/ml/java-tynamo-user/2012-04/msg00005.html)，这只是一个提交问题:)。

在标准上下文中，事务由调用服务的页面处理。在 REST 方法中，这项工作应该由服务本身完成。

实际上，这个想法是将您的自动发现的 REST 服务更改为真正的挂毯 IOC 服务。

## 1 - 将其从自动发现中移开

将它移动到服务包（或任何允许 Tapestry 绑定而不是在休息自动发现包中）：

*   正如 Alejandro Scandroli 在每个文档中建议的那样：[http ://docs.codehaus.org/pages/viewpage.action?pageId=151847035#tapestry-resteasyguide-Contributesingletonresources](http://docs.codehaus.org/pages/viewpage.action?pageId=151847035#tapestry-resteasyguide-Contributesingletonresources)
*   在这篇文章中：[当 xxx 成为 Tapestry 服务时，类 xxx 不包含自动构建所需的公共构造函数](https://stackoverflow.com/questions/14389232/class-xxx-does-not-contain-a-public-constructor-needed-to-autobuild-when-xxx-bec)

## 2 - 提取界面

提取接口，在要处理事务的地方加上注解 + CommitAfter 。

```
package com.myorg.mobile.pushup.services.user;

@Path("/user")
public interface IUserResource {

    /**
     * Lecture de tous les utilisateurs
     * 
     * @return une List des utilisateurs existants
     */
    @GET
    @Produces("application/json")
    List<User> getAllDomains();

    /**
     * Méthode d'enregistrement / MAJ d'un utilisateur.
     * 
     * @param user
     *            l'utilisateur à créer
     * @return
     */
    @POST
    @PUT
    @Produces({ "application/xml", "application/json" })
    @Consumes({ "application/xml", "application/json" })
    @CommitAfter
    Response registerOrUpdate(User user);
} 
```

删除实现注释

```
package com.myorg.mobile.pushup.services.user.impl;

public class HibernateUserResourceImpl implements IUserResource {
    /* (non-Javadoc)
     */

    public List<User> getAllDomains() {

        return session.createCriteria(User.class).list();
    }

    /* (non-Javadoc)
     */

    Response registerOrUpdate(User user);
        session.saveOrUpdate(user);
        return Response.ok().build();
    } 
```

## 3 - 将其作为单例资源提供

```
public class AppModule {
    public static void bind(ServiceBinder binder) {
        binder.bind(IUserResource.class, HibernateUserResourceImpl.class);
    }

    /**
     * Contributions to the RESTeasy main Application, insert all your RESTeasy
     * singletons services here.
     */
    @Contribute(javax.ws.rs.core.Application.class)
    public static void configureRestResources(Configuration<Object> singletons,
            IUserResource userResource) {
        singletons.add(userResource);
    }

} 
```

## 4 - 建议注释方法它们是事务性的

```
public class AppModule {

    @Match("*Resource*")
    public static void adviseTransactionally(
            HibernateTransactionAdvisor advisor, MethodAdviceReceiver receiver) {

        advisor.addTransactionCommitAdvice(receiver);
    } 
```

如果您更喜欢使用 JPATransactionAdvision 而不是 Hibernate one，则可以添加另一个依赖项：

```
 <dependency>
        <groupId>org.tynamo</groupId>
        <artifactId>tapestry-jpa-core</artifactId>
        <version>2.0.1</version>
    </dependency> 
```

## 5 - 结论

这个解决方案对我有用，但据我了解，这实际上是唯一的方法。

Alejandro > 如果您阅读了这些行，请告诉我是否还有另一种（最短）方式，我是对的 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T08:31:59.343

您可以使用 HibernateSessionManager 实现（在 Tapestry-hibernate 依赖项中给出）来获取会话并立即提交数据，如下所示，

```
@Inject 
HibernateSessionManager hibernateSessionManager;

public  void saveOrUpdate(MyEntity instance) {
    Session session = hibernateSessionManager.getSession();
    session.saveOrUpdate(instance);
    hibernateSessionManager.commit();
    session.flush();
} 
```

在这里你不能关闭会话。因为会话是共享的，如果您尝试关闭会话，您可能会遇到“休眠会话已关闭”之类的异常。

这里也共享事务，因此您只能使用 hibernateSessionManager 中提供的 commit() 函数提交事务，而不知道当前事务。

# android - Android制作基本的主屏幕启动器应用程序

> ID：14428369
> 
> 赞同：0
> 
> 时间：2013-01-20T19:27:54.160
> 
> 标签：android, launcher, homescreen

我想让我的应用程序主屏幕启动器。是否有任何**基本**示例显示如何在 Android 中制作主屏幕启动器应用程序？

# .net - 使用延迟加载替换急切加载

> ID：14428376
> 
> 赞同：0
> 
> 时间：2013-01-20T19:29:01.753
> 
> 标签：.net, performance, entity-framework, c#-4.0, entity-framework-4.1

如何`Eager Loading`通过使用替换`Lazy loading`？

可以这样说。我有以下类型的 EF 查询，其中有很多`Include keys`.Performance wise 这**非常慢**。

那么如何通过使用来提高以下代码的性能`Lazy loading`？

```
from owner in Catalog.Owners
            where owner.Key == ownerKey
            from invoice in owner.Invoices
            where invoice.Provider.Key == providerKey
            where invoice.Id == id
            select invoice)
            .Include(i => i.Owner.Credits)
            .Include(i => i.Provider)
            .Include(i => i.Items.Select(s => s.Allocation.Service))
            .Include(i => i.Items.Select(s => s.Allocation.Pet))
            .FirstOrDefault(); 
```

如果你能给我一个**示例代码解释**，那就完美了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:58:06.923

使用 EF 4.1 及更高版本，您只需确保将代码优先导航属性（链接到其他实体的属性）定义为`virtual`. 然后，如果您在 a`DbContext`中，则仅在实际使用（延迟加载）时才从数据库中查询链接的实体。

但是，当您需要立即获取所有数据时，会使用急切加载。这通常有充分的理由。所以，我首先要说的是，如果你不知道你为什么急于加载，那就不要这样做。确保链接实体的属性是虚拟的，然后删除`.Include`查询中的语句。

但是，如果您将要在 a 之外查询的`DbContext`数据或立即使用数据，则在操作期间将该数据拉入内存是有意义的。

因此，在回答您的问题时，并不总是将`eager`加载替换为`lazy`加载。查询数据后，您必须查看对数据的处理情况，并了解如何仅返回所需的最小集合。

添加示例：

```
 public class Person
    {
        public int Id { get; set; }
        public string Name { get; set; }

        public virtual ICollection<Car> Cars { get; set; } //make it virtual

    }

    public class Car
    {
        public int Id { get; set; }
        public string Make { get; set; }
        public string Model { get; set; }
    }

    public class MyContext : DbContext
    {
        public IDbSet<Person> People { get; set; }
        public IDbSet<Car> Cars { get; set; }
    }

    class Program
    {
        private static void Main(string[] args)
        {
            using (var context = new MyContext())
            {
                var person = context.People.FirstOrDefault(p => p.Id == 1); // calls the database

                var car = person.Cars.FirstOrDefault(c => c.Id == 2); // Lazy loads Cars

            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T19:58:25.767

如果您不使用急切加载（`Include`调用），如果您已正确设置所有内容，则会自动使用延迟加载：

*   `virtual`导航属性
*   允许延迟加载和代理创建（应该默认）
*   在用于加载根对象的对象上下文范围内执行延迟加载

延迟加载仅在您访问导航属性时执行查询以加载相关实体，因此它可以提高性能，例如，如果您并不总是需要所有相关数据，但如果您始终需要它们，则可能会导致性能更差，因为很多数据库往返。

# jquery - AngularJS jQuery组合 - 范围内的模型未更新

> ID：14428380
> 
> 赞同：0
> 
> 时间：2013-01-20T19:29:08.663
> 
> 标签：jquery, angularjs

我在 ng-repeat 内呈现的元素上附加了简单的模型和 jquery 效果。有人知道为什么在 destroyElement() 函数结束后没有立即更新模型吗？

JSFiddle：http: [//jsfiddle.net/nEzpS/33/](http://jsfiddle.net/nEzpS/33/)

```
HTML:
<div ng-controller="TestController">
    <ul>
        <li ng-repeat="field in Fields" ng-animate-repeat-slide="500">
            <span>{{field.name}}</span> <button ng-click="RemoveItem(field)"> Remove</button>
        </li>    
    </ul>    

    <br />

    <code style="color: green;">
        Fields.length: {{Fields.length}}
    </code>

    <code>
        {{Fields}}
    </code>

    <br />
</div>

JS:
var myApp = angular.module('myApp', []);

function TestController($scope) {
    $scope.Fields = [{name: 'One'}, {name: 'Two'}, {name: 'Three'}, {name: 'Four'}, {name: 'Five'}];

    $scope.RemoveItem = function (item) {
            var index = $scope.Fields.indexOf(item);

        this.destroyElement(function () {
            $scope.Fields.splice(index, 1);
        });
    }
}

myApp.directive('ngAnimateRepeatSlide', function () {
        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                var duration = parseInt(attrs['ngAnimateRepeatSlide']);
                duration = !isNaN(duration) ? duration : 500;
                jQuery(element).css('display', 'none').slideDown(duration);

                scope.destroyElement = function (onCompleteFn) {

                    jQuery(element).animate({ opacity: 0 }, 200);
                    jQuery(element).slideUp(duration,
                        function () {
                            onCompleteFn.call();
                        }
                    );
                }
            }
        };
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T20:37:55.687

它不再直接在事件范围内运行，它会被自动观看（因为你有执行回调的动画）。

在这种情况下，您需要调用 $scope.$apply()

```
$scope.RemoveItem = function (item) {
    var index = $scope.Fields.indexOf(item);

this.destroyElement(function () {            
        $scope.Fields.splice(index, 1);
        $scope.$apply();
});
} 
```

如果您删除并在函数调用之后`slideUp`直接执行，您可以看到差异。`onCompleteFn.call()``animate`

# spring - 自定义 Ldapauthenticationprovider spring security

> ID：14428383
> 
> 赞同：0
> 
> 时间：2013-01-20T19:29:15.287
> 
> 标签：spring, spring-security, ldap

我们正在开发一个 SaaS 应用程序，它应该能够针对每个客户端的 LDAP 服务器对用户进行身份验证。因此，与其在安全 xml 中硬编码 ldap 凭据，我应该能够从数据库中动态获取 url、dc 等 ldap 凭据并使用它们访问 ldap 服务器。为此，我需要自定义 Ldapautheticationprovider。任何有关如何自定义 Ldapauthenticationprovider 的教程、链接或指导将不胜感激。非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:41:34.047

您可以编写 CustomLdapauthenticationprovider 并扩展原始的 Ldapauthenticationprovider。在 CustomLdapauthenticationprovider 中，您可以覆盖需要更改的方法。

在 xml 中，您需要将身份验证提供程序更改为您的自定义类：

```
 <beans:bean id="ldapAuthProvider" class="my.package.security.CustomLdapAuthenticationProvider"> 
```

# php - 从表中获取记录

> ID：14428384
> 
> 赞同：-2
> 
> 时间：2013-01-20T19:29:16.170
> 
> 标签：php, mysql, pdo

我无法使用以下内容从我的表中获取数据。

```
$email = $_POST['email'];
$password = md5($_POST['password']);

$query = "SELECT * FROM users WHERE (email,password) VALUES (:email,:password)";
  $stmt = $dbh->prepare($query);
  $stmt->bindParam(':email', $email);
  $stmt->bindParam(':password', $password);
  $stmt->execute();

if(!$query){
    echo 'Whoops, something went wrong!';
} else {
    while($r = $stmt->fetch(PDO::FETCH_LAZY)){
        echo $r['surname']; 
    }
}; 
```

谁能看到我哪里出错了？由于不工作，没有任何内容输出到我的浏览器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:33:47.280

您似乎混淆了插入和选择语法。

您的选择语法应该类似于：

```
$query = "SELECT * FROM users WHERE email=:email AND password=:password"; 
```

除此之外，您应该查看一下 SO 并搜索`secure password hashing`as `md5`is not secure。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:39:15.290

您没有使用有效的 SQL 查询。`VALUES()`仅与`UPDATE`语句一起使用。

尝试使用语句

```
SELECT * FROM users WHERE email = :email AND password =:password 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:44:33.063

```
SELECT * FROM users WHERE (email,password) VALUES (:email,:password) 
```

需要是

```
SELECT * FROM users WHERE email = :email AND password = :password 
```

我还鼓励您在密码中使用 SALT 值来防御彩虹表攻击。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-20T19:52:59.823

正如上述用户所注意到的，问题出在 SQL 查询上。为了捕获和显示 SQL 错误，您应该在以后使用 try catch 语句。

```
try {
  /*Code to access database with PDO*/
}
catch(PDOException $e) {
  echo $e->getMessage();
} 
```

# c - 调用带参数的主函数

> ID：14428393
> 
> 赞同：0
> 
> 时间：2013-01-20T19:29:55.067
> 
> 标签：c

```
#include <string.h>
#include <stdio.h>
#include <windows.h>
#include <wchar.h>
#include <unistd.h>
#define sleep(x) Sleep(1000 * x)

int checkTime();

int main ( int argc, char *argv[] ) { 

    char *getFirstArgument = argv[1];
    char *getSecondArgument = argv[2];
    char getCheckTime;

    checkTime(&getCheckTime);

    if(*getFirstArgument != getCheckTime) {
        sleep(1);
        main(*getFirstArgument);
    } else if(*getFirstArgument == getCheckTime && *getSecondArgument == 'r') {
        system("shutdown /r");
    } else if(*getFirstArgument == getCheckTime) {
        system("shutdown /s"); 
    }

    return 0;

}

int checkTime() {

    char getConvertedTime[5] = {};

    SYSTEMTIME localTime;
    GetLocalTime ( &localTime );

    sprintf( getConvertedTime, "%d:%d", localTime.wHour, localTime.wMinute );
    printf( "%s\n", getConvertedTime );

    return 0;

} 
```

你好！当我回想 main 函数时，我不知道我需要提出什么论据，我真的找不到答案，我知道它存在于某个地方。:) 这是向我展示 MinGW 编译器的错误。

```
$ gcc -Wall test.c -o test.exe 
test.c: in function 'main':
test.c:20:3: error: to few arguments to function 'main'
test.c:10:5: note: declared here 
```

对不起，我的英语不好！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:35:12.693

*您可以使用实际*的循环，而不是在 1 秒后调用`main()`创建某种循环来等待指定的时间！尝试这样的事情：

 *```
checkTime(&getCheckTime);
while(*getFirstArgument != getCheckTime) {
    sleep(1);
    checkTime(&getCheckTime);
}

// Do something after the provided time
if(*getSecondArgument == 'r') {
    system("shutdown /r");
} else {
    system("shutdown /s"); 
} 
```

此外，我真的不明白你打算做什么。因此，上面的代码段不太可能修复您的完整程序。*

# authentication - 一个 HttpSession 中的多个 SecurityContexts

> ID：14428398
> 
> 赞同：0
> 
> 时间：2013-01-20T19:30:45.587
> 
> 标签：authentication, spring-security, httpsession, pre-authentication, security-context

我一直在研究使用弹簧安全的应用程序。我对 spring security 很陌生，最终遇到了类似于[this](https://stackoverflow.com/questions/4664893/how-to-manually-set-an-authenticated-user-in-spring-security-springmvc)和[this](https://stackoverflow.com/questions/4824395/spring-security-forward-directive-cant-forward-to-login-form/)的问题。但它有点不同。

我以这种方式进行手动身份验证：

```
UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(username, password);
Authentication authentication = this.authenticationProvider.authenticate(token);
SecurityContextHolder.getContext().setAuthentication(authentication); 
```

当页面加载时，一切似乎都正常。但是，当我在应用程序中导航时，似乎我失去了我的 SecurityContext。（如果用户登录，我有显示用户名的状态栏）

我这样得到我的上下文：

```
SecurityContextHolder.getContext() 
```

更重要的是，在某些不正确的加载之后，有时它会正确加载上下文并不会完全丢失。似乎我在一个会话中有多个上下文（我有 HttpSessionListener 和 sessionCreated 只触发一次）。我尝试打印出上下文的对象哈希，并注意到有几个不同的哈希重复。只有一个与我的连接用户有关，其他则不是。

所以我假设一个会话中有几个上下文（如果这可能的话）。我希望我清楚地解释了一切。如果有人可以为我提供一些帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:06:31.017

对于您正在执行的操作，上下文需要绑定到当前线程。因为，当你打电话

```
SecurityContextHolder.getContext() 
```

`ThreadLocal`返回来自商店的上下文。确保*每个请求*的上下文都绑定到您当前的线程（无法提供更多信息，因为您没有描述您是如何做到的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:23:00.153

最后我做到了！**Marcel Stör**的回答确实帮助我寻找正确的关键词等等。谢谢你。

问题是我在不知道安全过滤器链的 bean 中设置 SecurityContext。它是在@PostConstruct 上调用的，但它是不正确的。

我真正需要的是**PRE_AUTH_FILTER**和正确的 Spring 安全配置。所以 PRE_AUTH_FILTER 在 SpringSecurity 过滤器链中正确放置了身份验证对象。

# windows-phone-7 - 将 WP7.1 项目升级到 WP8

> ID：14428401
> 
> 赞同：0
> 
> 时间：2013-01-20T19:31:15.963
> 
> 标签：windows-phone-7, windows-phone-8

所以我又被搞砸了。我有一个 WP7.1 项目，我添加了一些用于捏合[和缩放工具](http://franantares.wordpress.com/2013/01/18/windows-phone-resuming-your-app-from-the-start-screen-or-not-part-i/) 的代码按上述添加代码后，我开始收到此错误

```
AppManifest Validation failed. Invalid AppPlatformVersion in WMAppmanifest.xml 
```

现在我检查了 My WPAppManifest.xml(Window Interface)，发现默认情况下没有检查任何屏幕分辨率。当我尝试检查（wvga）时，我看到了错误

> 无法加载设计器，在 XML 视图中打开以修复

我的 WPManifest 看起来像这样（前几行）

```
<?xml version="1.0" encoding="utf-8"?>
<Deployment xmlns="http://schemas.microsoft.com/windowsphone/2009/deployment" AppPlatformVersion="7.1">
  <App xmlns="" ProductID="{60d84a47-d758-4f91-8111-0bd47bb9a6c0}" Title="Effects" RuntimeType="Silverlight" Version="1.0.0.0" Genre="apps.normal" Author="AviaryDemo author" Description="Sample description" Publisher="AviaryDemo">
    <IconPath IsRelative="true" IsResource="false">ApplicationIcon.png</IconPath>
    <Capabilities>
      <Capability Name="ID_CAP_MEDIALIB" />
      <Capability Name="ID_CAP_NETWORKING" />
      <Capability Name="ID_CAP_ISV_CAMERA" />
    </Capabilities>
    <Tasks>
      <DefaultTask Name="_default" NavigationPage="MainPage.xaml"/>
    </Tasks> 
```

2）我想添加[这个](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206974%28v=vs.105%29.aspx) 我很困惑，如何在我的 App.xaml 中添加第（7）点，看起来像这样

```
<Application 
    x:Class="AviaryDemo.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"       
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:h="clr-namespace:AviaryDemo"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone">

    <!--Application Resources-->
    <Application.Resources>

        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/AviarySDK;component/Themes/generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <resources:Images xmlns:resources="clr-namespace:AviarySDK.Resources;assembly=AviarySDK"  x:Key="ImageResources"/>
            <aviary:LocalizedStrings xmlns:aviary="clr-namespace:AviarySDK;assembly=AviarySDK" x:Key="LocalizedStrings" />
        </ResourceDictionary>

    </Application.Resources>

    <Application.ApplicationLifetimeObjects>
        <!--Required object that handles lifetime events for the application-->
        <shell:PhoneApplicationService 
            Launching="Application_Launching" Closing="Application_Closing" 
            Activated="Application_Activated" Deactivated="Application_Deactivated"/>
    </Application.ApplicationLifetimeObjects>

</Application> 
```

需要帮助！多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:50:15.120

将项目升级到 Windows Phone 8 意味着一些更改是在内部完成的，而不仅仅是在应用程序清单中。您提到在向项目中添加类后清单中出现了一些错误的唯一事实意味着您可能对清单本身做了一些事情。

首先**，Windows Phone 7.1 不支持**`ActivationPolicy`该属性。

 **如果您决定将 WP 7.1 项目升级到 Windows Phone 8，则需要使用内置升级选项：

![在此处输入图像描述](../Images/ca564e5bd45c66c87156d18700d2f731.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T20:39:31.643

您的 AppPlatformVersion 显示为“7.1”。不应该是8.0吗？

```
<Deployment xmlns="http://schemas.microsoft.com/windowsphone/2012/deployment" AppPlatformVersion="8.0">
  <DefaultLanguage xmlns="" code="en-US" />
  <App xmlns="" ProductID="{30975ea2-5c89-4e55-8d5a-a4292a6e4890}" Title="PhoneApp1" RuntimeType="Silverlight" Version="1.0.0.0" Genre="apps.normal" Author="PhoneApp1 author" Description="Sample description" Publisher="PhoneApp1" PublisherID="{7f9f8c45-61d1-486a-9d02-4d7a2f563445}">
    <IconPath IsRelative="true" IsResource="false">ApplicationIcon.png</IconPath>
    <Capabilities> 
```**

# c# - 为什么在未取消订阅事件时这不会导致内存泄漏

> ID：14428402
> 
> 赞同：5
> 
> 时间：2013-01-20T19:31:35.493
> 
> 标签：c#, .net, memory-leaks, event-handling, windbg

我试图了解事件如何导致内存泄漏。[我在这个](https://stackoverflow.com/questions/3662842/how-do-events-cause-memory-leaks-in-c-sharp-and-how-do-weak-references-help-miti)stackoverflow 问题上找到了一个很好的解释， 但是在查看 Windg 中的对象时，我对结果感到困惑。首先，我有一个简单的类，如下所示。

```
class Person
    {
        public string LastName { get; set; }
        public string FirstName { get; set; }

        public event EventHandler UponWakingUp;
        public Person()  {  }

        public void Wakeup()
        {
            Console.WriteLine("Waking up");
            if (UponWakingUp != null)
                UponWakingUp(null, EventArgs.Empty);
        }
    } 
```

现在我在 Windows 窗体应用程序中使用这个类，如下所示。

```
public partial class Form1 : Form
    {
        Person John = new Person() { LastName = "Doe", FirstName = "John" };

        public Form1()
        {
            InitializeComponent();

            John.UponWakingUp += new EventHandler(John_UponWakingUp);
        }

        void John_UponWakingUp(object sender, EventArgs e)
        {
            Console.WriteLine("John is waking up");
        }

        private void button1_Click(object sender, EventArgs e)
        {
            John = null;
            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();
            MessageBox.Show("done");
         }
    } 
```

如您所见，我实例化了 Person 类并订阅了 OnWakingUp 事件。我在这个表格上有一个按钮。当用户单击此按钮时，我将此 Person 实例设置为 null 而不取消订阅该事件。然后我调用 GC.Collect 以确保执行 Garbade 收集。我在这里显示一个消息框，以便我可以附加 Windbg 以查看 Form1 类的参考帮助，在此类中我没有看到对该事件的任何引用（Windbg 输出如下所示，尽管 Form1 的数据太长，我正在显示与我的问题有关）。此类具有对 Person 类的引用，但它为空。基本上这对我来说似乎不是内存泄漏，因为 Form1 没有任何对 Person 类的引用，即使它没有取消订阅该事件。

我的问题是这是否会导致内存泄漏。如果不是，为什么不呢？

```
0:005> !do 0158d334   
Name:        WindowsFormsApplication1.Form1  
MethodTable: 00366390  
EEClass:     00361718  
Size:        332(0x14c) bytes  
File:        c:\Sandbox\\WindowsFormsApplication1\WindowsFormsApplication1\bin\Debug\WindowsFormsApplication1.exe  
Fields:  
      MT    Field   Offset                 Type VT     Attr    Value Name  
619af744  40001e0        4        System.Object  0 instance 00000000 __identity  
60fc6c58  40002c3        8 ...ponentModel.ISite  0 instance 00000000 site  
619af744  4001534      b80        System.Object  0   static 0158dad0 EVENT_MAXIMIZEDBOUNDSCHANGED  
**00366b70  4000001      13c ...plication1.Person  0 instance 00000000 John**  
60fc6c10  4000002      140 ...tModel.IContainer  0 instance 00000000 components  
6039aadc  4000003      144 ...dows.Forms.Button  0 instance 015ad06c button1  

0:008> !DumpHeap -mt 00366b70    
 Address       MT     Size  
total 0 objects  
Statistics:  
      MT    Count    TotalSize Class Name  
Total 0 objects 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T20:44:26.890

这是一个*循环引用*的例子。该表单具有对通过*John*字段侦听事件的对象的引用。反过来，当表单的构造函数订阅了它的 OnWakingUp 事件时，John 具有对表单的引用。

在某些自动内存管理方案中，循环引用可能是一个问题，尤其是在引用计数中。但是.NET 垃圾收集器没有问题。只要表单对象和 Person 对象都没有任何额外的引用，两者之间的循环引用就无法让对方保持活力。

您的代码中没有任何其他引用。这通常会导致两个对象都被垃圾收集。但是 Form 类是特殊的，只要它的本机 Windows 窗口存在，存储在 Winforms 维护的对象句柄表中的内部引用就会使表单对象保持活动状态。这让约翰活着。

所以通常的清理方式是用户通过点击右上角的 X 来关闭窗口。这反过来会导致本机窗口句柄被破坏。这会从该内部表中删除表单引用。下一次垃圾收集现在只看到循环引用并收集它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T19:40:07.107

答案实际上在您链接到的问题的答案中：

> 当侦听器将事件侦听器附加到事件时，源对象将获得对侦听器对象的引用。这意味着在**分离事件处理程序或收集源对象**之前，垃圾收集器无法收集**侦听**器。

 **您正在释放**源**对象 ( `Person`)，因此可以收集**侦听器**(您的`Form`)，这就是没有内存泄漏的原因。

当这种情况与 IE 不同时，当您想要处置`Form`但事件**源**（您的`Person`对象）仍然存在并持有对它的引用时，就会发生内存泄漏。**

# c++ - c ++相同的字符串无法比较检查

> ID：14428405
> 
> 赞同：3
> 
> 时间：2013-01-20T19:31:40.913
> 
> 标签：c++, string, visual-studio-2012, compare

我已经被这件事难住了好几天了。我正在对我的一个班级进行单元测试，以确保一切正确。

但是，在比较对象的名称时，我遇到了一个非常奇怪的“错误”。当我调用构造函数时设置名称。根据我传入的注释正确设置了名称。但是在这种情况下，BOOST_CHECK 失败

为了说明这有多奇怪，以下是调试器中两个字符串的值：

```
Fdim.name() // "F Diminished"
BOOST_CHECK(Fdim.name() == "F Diminished");  // this fails 
```

以下是两个字符串的规格，取自调试器：

```
Fdim.name() 
// size - 12, capacity - 15, 
// chars: [70, 32, 68, 105, 109, 105, 110, 105, 115, 104, 101, 100]

"F Diminished" stored inside a variable (to see specs of string)
// size - 12, capacity - 15,
// chars: [70, 32, 68, 105, 109, 105, 110, 105, 115, 104, 101, 100] 
```

如您所见，字符串是相同的，但 == 和 .compare 都失败了。

这是更奇怪的事情：

```
std::string n = Fdim.name();
std::string r = "F Diminished";
unsigned val = n.compare(r);       // RETURNS 0, everytime
BOOST_CHECK(val == 0);             // fails 
BOOST_CHECK(val == ((unsigned) 0));// fails 
```

我完全傻眼了。当我比较字符串时 val 总是返回 0 （所以它们相等）但是当我比较时 val != 0 ？

有谁知道是什么问题？我应该知道的字符串是否有任何属性可能会导致此比较检查失败？

**编辑* *** *** 字符串被存储为 std::string，我没有使用 char* 或 cstring。成员 _name 是 std::string。

这是升压输出：

```
c:/directory etc(64): error in "ChordIdentification": check val == 0 failed
c:/directory etc(65): error in "ChordIdentification": check n == r failed
c:/directory etc(66): error in "ChordIdentification": check val == ((unsigned) 0) failed
c:/directory etc(67): error in "ChordIdentification": check Fdim.name() == "F Diminished" failed 
```

这是测试用例的代码，只是为了确保人们知道 val、n 和 r 是什么：

```
BOOST_AUTO_TEST_CASE(ChordIdentification)
{
MAKE_NOTE(Db, 'D', FLAT);   // macro that creates a note
MAKE_NOTE(F, 'F', NATURAL);
MAKE_NOTE(Ab, 'A', FLAT);
MAKE_NOTE(Cb, 'C', FLAT);

Chord DbMajor7 = Chord(Cb, Ab, F, Db);
Chord Fdim = Chord(Ab, Cb, F);

CHORD_TEST(DbMajor7, "Db Dominant7", MAJ, THIRD_INVERSION, DOMINANT7); macro of several boost tests, checking members. This test passes completely for this instance of chord. name() check is passed
std::string n = Fdim.name();
std::string r = "F Diminished";
unsigned val = n.compare(r);
//if (val == 0)
BOOST_CHECK(val == 0);
BOOST_CHECK(n == r);
BOOST_CHECK(Fdim.name() == std::string("F Diminished"));    // these strings fail to compare. no idea why, lengths are same, chars same?????
BOOST_CHECK(std::strcmp(Fdim.name(), "F Diminished") == 0);
CHORD_TEST(Fdim, "F Diminished", DIM, FIRST_INVERSION, DIMINISHED); // partially successful, again the string comparison is responsible for this
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T21:11:35.767

我终于发现了为什么会这样。这与调试器无法确定它试图评估的子类的实例有关。

和弦是通过具有多态键的映射来识别的，具有抽象基类 (Composite_Key)、子 (Composite_Key_2Intervals) 和来自该子的子 (Composite_Key_3Intervals)

失败的事实是，任何关于键是否确实是 3 个间隔或 2 的测试总是返回 true，因为 3intervals : 2intervals。编译器无法理解这一点，并且总是返回在查找表中找到的错误值。

此外，地图从未在调试器模式下排序，因此插入键的顺序保持不变。然而实际上它们正在被重新洗牌，这导致调试时的整个评估是完全错误的。

为了解决这个问题，我现在确保这两个类只从抽象基类继承，这样它们就不会以任何方式相互关联。现在所有测试都通过了，一切都恢复了。

这个问题的原因仅仅是调试器。它没有进行适当的评估。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T19:40:40.863

如果我们看这个：

```
BOOST_CHECK(Fdim.name() == "F Diminished") 
```

那么 Fdim.name() 是一个 C 风格的字符串，我希望，因此只是一个指向字符数组的指针 - 该字符数组的地址（很可能）与您的`BOOST_CHECK()`.

您可以通过以下方式修复它：

```
BOOST_CHECK(Fdim.name() == string("F Diminished")) 
```

或者

```
BOOST_CHECK(strcmp(Fdim.name(), "F Diminished") == 0) 
```

# c - 将输出从标准输出重定向到字符串？

> ID：14428406
> 
> 赞同：6
> 
> 时间：2013-01-20T19:31:46.487
> 
> 标签：c, redirect, stdout

在 C 中，我想将进程的输出从 stdout 重定向到写入“共享内存段”，它可以被认为是一个 char 数组或带有指针的字符串
我知道有 dup2 但它需要文件描述符作为参数不是指向数组的指针。有没有办法将它重定向到一个字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T19:39:35.387

```
char string[SIZE];
freopen("/dev/null", "a", stdout);
setbuf(stdout, string); 
```

有关它们的定义，请参见[freopen](http://linux.die.net/man/3/freopen)和[setbuf](http://www.kernel.org/doc/man-pages/online/pages/man3/setbuf.3.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-21T18:02:57.137

这应该适用于 UNIX 系统：

```
// set buffer size, SIZE
SIZE = 255;

char buffer[SIZE];
freopen("/dev/null", "a", stdout);
setbuf(stdout, buffer);
printf("This will be stored in the buffer");
freopen ("/dev/tty", "a", stdout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:34:51.133

您可以写入管道，然后将其读取到共享内存中（也就是说，如果您不能使用管道*而不是*共享内存中的字符串）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-30T03:36:19.823

为了将标准输出简单地重定向到内存字符串，只需执行以下操作：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define PATH_MAX 1000

int main()
{
    FILE *fp;
    int status;
    char path[PATH_MAX];

    fp = popen("ls ", "r");

    if (fp == NULL)  return 0;

    while (fgets(path, PATH_MAX, fp) != NULL)
        printf("\nTest=> %s", path);

    status = pclose(fp);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-23T07:22:52.343

使用[shm_open](http://linux.die.net/man/3/shm_open)您可以有一个指向共享内存的文件描述符并将其传递给 dup2 函数，如下所示：

```
int fd = shm_open("shm-name", O_CREAT | O_RDWR, S_IRUSR | S_IWUSR);
dup2(fd, STDOUT_FILENO);
fprintf(stdout, "This is string is gonna be printed on shared memory"); 
```

毕竟寻找共享内存到开头（使用 lseek 读取它并将其保存到字符串；但要小心

您还可以在[此处找到缓冲到管道中的示例](https://github.com/pouyanh/isolated-iostream/blob/master/src/main.c#L58)

# jdbc - 是否有 JDBC 驱动程序在关闭 Statement 时无法关闭 ResultSet？

> ID：14428407
> 
> 赞同：2
> 
> 时间：2013-01-20T19:31:48.193
> 
> 标签：jdbc

[JavaDoc for`Statement`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#close%28%29)很清楚：

> Statement 接口中的所有执行方法都会隐式关闭语句的当前`ResultSet`对象（如果存在打开的对象）。
> 
> 当一个`Statement`对象被关闭时，它的当前`ResultSet`对象（如果存在的话）也被关闭。

但是，一般而言，在 Stack Overflow 和 Web 上`ResultSet`都有多项建议要关闭。`Statement`是否存在已知的情况（可能是由于有错误的驱动程序）关闭`Statement`但不会`ResultSet`导致问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:38:35.120

有错误的 JDBC 驱动程序可能无法关闭 ResultSet。无论如何，最好是具体和有意的，因此您应该在 try...finally 块中关闭 ResultSet。如果您使用的是 JDK7，您可以在 try 子句中声明 ResultSet 变量，因为它实现了 AutoCloseable，所以它会在没有 finally 子句的情况下自动关闭。

# ios - 给 UIImageView 深色 Facebook ios 效果

> ID：14428408
> 
> 赞同：0
> 
> 时间：2013-01-20T19:31:50.523
> 
> 标签：ios, xcode

我试图做的是使 UIImageView 更暗，以便图像结果顶部的按钮和视图。我想给它一个在 ios6 中用户使用 Facebook 分享时给出的效果。它后面的所有内容都变得更暗，但它是可见的。我尝试使用：

```
[myImageView setOpaque:YES]; 
```

但它什么也没做。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:41:51.983

我相信如果我理解你很好，是在单击按钮后使 uiimageview 变暗并且 imageview 不是按钮图像对吗？

如果是这样，您可以在单击按钮时为 uimageview 图层添加掩码。你像这样创建一个遮罩层

```
CALayer * layer = [CALayer layer];
layer.frame = yourImageView.bounds;
layer.backgroundColor = [UIcolor colorWithWhite:0.f alpha:.5f].CGColor;
[yourImageView.layer setMask:layer]; 
```

您当然可以更改 alpha 值 1 使其完全变暗 0 使其完全透明。好吧，也许这段代码不适用于 uiimageview 我很抱歉。它适用于 UIView 和 UIscrollViews。我不知道该怎么做...对不起

# mysql - SQL如何格式化时间？

> ID：14428409
> 
> 赞同：-3
> 
> 时间：2013-01-20T19:31:57.473
> 
> 标签：mysql, sql

我有一个简单的 SQL 查询：

```
SELECT now() 
```

它以格式返回日期和时间：`YYYY-MMM-DD HH:MM:SS`例如：`2013-01-20 21:26:36`

我将此值用作文件名的一部分，问题是不允许使用 char ':'。
我怎样才能将时间格式更改为没有的东西`':'`？
例如：`YYYY-MMM-DD HHMMSS`
我已经阅读了很多关于该主题的内容，如果没有 ，我找不到任何形式的日期和时间`':'`，我发现 AM/PM .. 或不同的日期格式.. 但时间总是`':'`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:36:07.523

假设您使用的是 MySQL，只需使用：

```
SELECT DATE_FORMAT(now(), '%Y-%m-%d %H%i%S') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:44:14.637

如果您使用的是 MySQL，这应该可以。

```
select REPLACE(getdate(),':','-'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:36:46.993

```
SELECT DATE_FORMAT(NOW(), "%Y-%m-%d %H%i%S") 
```

# php - 在 php 中使用双精度/浮点数

> ID：14428412
> 
> 赞同：1
> 
> 时间：2013-01-20T19:32:25.553
> 
> 标签：php, floating-point

> **可能重复：**
> [PHP：将数字显示到小数点后 2 位](https://stackoverflow.com/questions/4483540/php-show-a-number-to-2-decimal-places)

```
$b = $del['Antal'];
$y = $info['Pris'];
$z = $y * $b; 
```

$y 来自一个 mysql 数据库，它的类型是“double(10,2)”，所以当我尝试 echo $y; 时它可以工作。它以两位小数响应。

但现在我想将它与 $b 相乘。

例如 10.20 * 2 = 20.40

但现在它就像：10.20 * 2 = 20.4（只有一位小数）

我想要两位小数，怎么办？我用 (double) 函数尝试了一些东西，但并没有真正奏效。该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:35:35.277

您可以使用[number_format](http://php.net/manual/en/function.number-format.php)：

```
$b = $del['Antal'];
$y = $info['Pris'];
$z = number_format($y * $b ,2); 
```

`number_format`功能：

```
string number_format ( float $number [, int $decimals = 0 ] ) 
```

如果您不想要默认格式：

```
string number_format ( float $number , int $decimals = 0 , string $dec_point = '.' , string $thousands_sep = ',' ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T19:36:00.270

您描述的数据类型是*定*点数，而不是*浮点数*（float）。PHP 没有这样的数据类型，但是它可以[`format`](http://php.net/manual/en/function.number-format.php)为您浮动。看起来这就是您正在寻找的，格式化输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T19:35:38.010

您可以通过使用 sprintf 并将其存储为字符串来确保将其存储在小数点后两位：

```
$z = sprintf('%.2f', $y * $b); 
```

`%.2f`确保小数点后始终有两位数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T19:34:47.247

尝试[`floatval`](http://php.net/manual/en/function.floatval.php)：

```
$z = $y * floatval($b); 
```

或者：

```
$b = (float) $b; 
```

但是，如果将其乘以 10.20，它应该会自动转换为浮点数。阅读 PHP 关于[type juggling](http://php.net/manual/en/language.types.type-juggling.php)的文档。

* * *

如果它只是一个造型的东西：

```
$b = number_format($b, 2); 
```

# f# - 将 F# seq 表达式转换为 OCaml

> ID：14428420
> 
> 赞同：3
> 
> 时间：2013-01-20T19:33:59.490
> 
> 标签：f#, ocaml

在我尝试转换为 OCaml 的 F# 代码中，我遇到了以下问题：

```
 let rec parseList lst off =
        seq {
            if List.isEmpty lst then ()
            else
                match parse off <| List.head lst with
                | (Unmatched, _) as y -> yield y
                | (y, z) -> yield (y, z)
                            yield! parseList (List.tail lst) z
        } 
```

我想知道如何将带有*yield的**seq{...}* 表达式转换为 OCaml？我的第一个猜测是*seq*必须成为一个列表。

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T19:44:07.353

最简单的翻译（不是尾递归）是：

```
let rec parseList lst off =
  match lst with
  | [] -> []
  | x::xs ->
      match parse off x with
      | Unmatched, _ as y -> [y]
      | y, z -> (y, z)::parseList xs z 
```

尾递归版本是：

```
let parseList lst off =
  let rec loop xs off = function
    | [] -> xs
    | y::ys ->
        match parse off y with
        | Unmatched, _ as x -> x::xs
        | _, z as x -> loop (x::xs) z ys in
  List.rev (loop [] off lst) 
```

请注意，您开始使用的 F# 代码还有很多不足之处。当您可以更轻松地改用模式匹配时，对`List.head`和的调用是不必要的潜在异常来源。`List.tail`还有多余的括号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T19:42:57.197

我会说这`seq`是一个惰性列表，即在需要时计算其尾部而不是一次计算的列表。OCaml 中最接近的东西可能是流解析器，它是可通过 camlp4 获得的扩展。它记录在 OCaml 手册的[语言扩展](http://caml.inria.fr/pub/docs/manual-ocaml/manual021.html#toc69)部分。

您还可以创建自己的显式惰性列表工具，`fun () -> expr`用于表示列表的尾部。

如果您的列表相当小，您也可以按照您的建议转换为普通列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T19:55:32.577

我会看看`LazyList.from`电池： http: [//ocaml-batteries-team.github.com/batteries-included/hdoc2/BatLazyList.html](http://ocaml-batteries-team.github.com/batteries-included/hdoc2/BatLazyList.html)

但是，我认为它不会像您的解决方案那样方便。**

# c++ - WinMain 重新定义

> ID：14428429
> 
> 赞同：3
> 
> 时间：2013-01-20T19:35:15.510
> 
> 标签：c++, winapi

我刚开始使用 C++，遇到了一个我无法修复的错误。

到目前为止，这是我的所有代码（甚至无法让 hello world 工作）：

```
#include "stdafx.h"
#include <windows.h>

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, 
               LPSTR lpCmdLine, int nCmdShow)
{
                   MessageBox(NULL, L"Hello World!",
                       L"Hello World!",
                       MB_ICONEXCLAMATION | MB_OK);
                   return 0;
} 
```

但是当我尝试运行它时会出现这个错误：

> Test.cpp(11)：错误 C2373：'WinMain'：重新定义；不同的类型修饰符 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\include\winbase.h(2588) ：参见“WinMain”的声明

当我查看 WinMain 的声明时，我看到每个参数前都有一个“__in”。我尝试添加它，但没有运气。我也尝试用 CALLBACK 替换 WINAPI，但这也不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T19:46:47.583

简单的解决方案是

    **使用标准`main`函数**。

像这样：

```
#undef UNICODE
#define UNICODE
#incude <windows.h>

int main()
{
    MessageBox(
        0,
        L"Hello World!",
        L"Hello World!",
        MB_ICONEXCLAMATION | MB_SETFOREGROUND
        );
} 
```

现在您唯一的问题是使用 Microsoft 的工具集将其构建为 GUI 子系统应用程序，这在这方面有点迟钝（GNU 工具链没有这样的问题）。

为此，对于 Microsoft 的`link`，使用此链接器选项（除了选择 GUI 子系统之外）：`/entry:mainCRTStartup`.

请注意，您可以将该选项放在名为`LINK`.

快乐编码！:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:28:34.557

WinMain 是一个 C 函数，因此您需要用`extern "C"`

```
#include "stdafx.h"
#include <windows.h>

extern "C"
{

    int CALLBACK WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, 
               LPSTR lpCmdLine, int nCmdShow)
    {
                   MessageBox(NULL, L"Hello World!",
                       L"Hello World!",
                       MB_ICONEXCLAMATION | MB_OK);
                   return 0;
    }
} 
```

# linux - linux上有没有通用的接口来模拟鼠标移动和点击？

> ID：14428438
> 
> 赞同：3
> 
> 时间：2013-01-20T19:36:04.420
> 
> 标签：linux, mouse, device

我已经参考了很多关于如何通过将这些事件映射到您自己的真实鼠标来控制鼠标光标移动和点击的教程，但我注意到每次我必须将此鼠标关联到 /dev/input/ 中的一个指定事件，如果我没有连接一只真正的鼠标，或者如果linux没有在这个真正的鼠标上给出正确的事件编号，程序肯定会失败。

现在我需要写一个通用的程序，可以在linux上制作一个完整的虚拟鼠标，也就是说，这个程序可以应用到任何机器上，即使机器实际上没有鼠标，但只要光标会反应我给他们距离、鼠标光标移动的方向、点击所需的时间以及点击持续的时间。

所以我只是想知道是否有任何不需要我必须映射到的真实鼠标设备的通用界面，我试图访问 /dev/input/mice 事件，但似乎我只能获取光标的位置和单击信息为只要它移动或点击，谁能告诉我一个更通用的界面？提前谢谢你！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T23:43:16.120

您可以使用 XTest 功能。这个 X11 扩展包括模拟按键、鼠标按钮按下和鼠标移动的功能。

您可以在此处阅读手册页：http: [//linux.die.net/man/3/xtestfakekeyevent](http://linux.die.net/man/3/xtestfakekeyevent)

这个简短的 C 示例，当与`-lX11`and链接时`-lXtst`，应该将鼠标移动到屏幕的左上角并单击鼠标左键：

```
#include <X11/Xlib.h>
#include <X11/extensions/XTest.h>

void move_mouse(Display* display, int x, int y){
    XTestFakeRelativeMotionEvent(display, x, y, 0);
    XFlush(display);
}
void set_mouse(Display* display, int x, int y){
    XTestFakeMotionEvent(display, 0, x, y, 0);
    XFlush(display);
}
void button_make(Display* display, unsigned int button){
    XTestFakeButtonEvent(display, button, True, 0);
    XFlush(display);
}
void button_break(Display* display, unsigned int button){
    XTestFakeButtonEvent(display, button, False, 0);
    XFlush(display);
}
int main(int argc, char **argv){
    Display *display = XOpenDisplay(NULL);
    set_mouse(display, 0, 0);
    button_make(display, 1);
    button_break(display, 1);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:01:42.580

请参阅此[相关问题](https://stackoverflow.com/a/12747819/841108)。

假设 X11 桌面环境，您可以使用`XSendEvent`; 然而，接收应用程序可以区分此类“假”事件。

# nsdata - Snappy 压缩仅返回 SNAPPY_INVALID_INPUT

> ID：14428444
> 
> 赞同：5
> 
> 时间：2013-01-20T19:37:02.813
> 
> 标签：nsdata, snappy

我在 NSData 上写了一个简短的类别，它使用 libSnappy 进行压缩。它在压缩过程中就像一个魅力，但是解压缩代码导致`SNAPPY_INVALID_INPUT`. 有趣的是，尽管操作码无效，但 snappy 仍然`result`用未压缩的数据填充 my 的缓冲区。有人知道为什么 snappy 把这个扔给我吗？

```
- (NSData*)dataBySnappyUncompression {
    NSMutableData *result = nil;
    if (self.bytes != NULL) {
        size_t uncompress_result = 0;
        snappy_status opCode = snappy_uncompressed_length(self.bytes, self.length, &uncompress_result);
        if (opCode == SNAPPY_OK) {
            result = [NSMutableData dataWithLength:uncompress_result];
            opCode = snappy_uncompress(self.bytes, self.length, [result mutableBytes], &uncompress_result);
            if (opCode == SNAPPY_OK) {
                [result setLength:uncompress_result];
                return result;
            }
        }
    }
    LEPLog(@"Failed snappy de-compress: tried to de-compress %lu bytes", self.length);
    NSAssert(nil, @"Failed Snappy de-compress");
    result = nil;
    return result;
} 
```

我应该注意，正在压缩/解压缩的数据是`NSKeyedArchiver`调用的结果。

# angularjs - 二级模型编译

> ID：14428445
> 
> 赞同：0
> 
> 时间：2013-01-20T19:37:04.263
> 
> 标签：angularjs

我有以下模型：

```
{
  content: "Hello world, this is a sample content",
  notes: {
    content: "side note, some text here.",
    index: 2
  }
} 
```

我喜欢将上述模型编译为以下 HTML：

```
<div class="content">
    Hello world,*
    <div class="note">side note, some text here.</div>
    this is a sample text. 
</div> 
```

如何才能做到这一点？据我所知，最好的方法是使用指令，比如`<div content="{{ content }}"></div>`. 我尝试编写此指令并使用编译服务但没有取得多大成功......

我想将使用其 HTML 编译的注释注入到第二个单词之后的内容中（参见注释索引位置为 2）。

我这里有两个模板，一个用于内容，第二个用于注释。我想用它的视图来编译注释，然后在第二个工作之后将它输入到内容文本中。然后，我想根据它的观点编译内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:21:20.530

我想我跟着。注释的样式将看起来像边注或工具提示，对吗？

这应该很容易在指令中完成。我会像这样实例化它（尽管实现细节取决于你）：

```
<div note-section 
  note="{{notes.content}}" 
  note-index="{{notes.index}}" 
  content="{{content}}">
</div> 
```

好吧。然后，在您的链接功能中，您可以访问所有这些属性。所以我会 $watch 寻找变化，当它们发生时，在`scope.content`字符串中搜索单词所在的适当索引`scope.noteIndex`，然后将字符串分成两部分，在其中插入如下注释模板：

```
var tmpl, childElement;

tmpl = beforeNote + '<span note="{{note}}"></span>' + afterNote;
childElement = $compile( tmpl )( scope );

element.append( childElement ); 
```

该`note`元素是具有隔离范围的指令（用于安全性）。

然后渲染的 DOM 节点将匹配您上面的目标。这是非常通用的，并且有无数种变化取决于您的实现，但这是我要遵循的一般模式。

在 Plunker 或 jsFiddle 上尝试一下，然后发布你的想法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:37:26.620

问题：为什么注释必须出现在 HTML 中的特定位置（索引），为什么不能总是出现在之前或之后？是否有特定原因，或者这是为了支持样式？

如果您尝试支持样式，则有更好更简单的方法来完成此操作，例如使用`float: right`等。

据我所知，没有内置的方法来完成这样的输出。如果您必须拥有该特定 HTML，您可以尝试以下 jsFiddle：http: [//jsfiddle.net/69ApD/](http://jsfiddle.net/69ApD/)。

# c# - 使用 LINQ 从多个表中检索数据

> ID：14428449
> 
> 赞同：0
> 
> 时间：2013-01-20T19:37:14.110
> 
> 标签：c#, sql, linq-to-sql, sql-server-ce

我是 linq 的初学者，并且有三个像这样的表（sql ce 3.5）：课程：（PK）CourseCode，CourseName Class：（PK）ClassCode，FieldCode，ClassName ClsCrs：（PK）ClassCode，（PK）CourseCode

我想将此查询转换或重写为 linq 并将结果分配给组合框数据源：

```
`SELECT CourseName FROM class, clscrs, course WHERE
ClassTitel = @ClassTitel and class.classcode = clscrs.classcode and
clscrs.coursecode = course.coursecode` 
```

我怎样才能做到这一点 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:52:11.887

你可以试试这个

```
var query = (from c in db.class 
             from v in db.clscrs 
             from n in db.course 
             where c.ClassTitel=="yourinput" 
                 && c.classcode = v.classcode 
                 && v.coursecode = n.coursecode 
             select n.CourseName).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:41:29.780

不清楚 ClassTitel 字段属于哪个表（假设类表）。还将集合名称替换为 EF 或 Linq to SQL 生成的名称

```
var query = from cl in db.class
            join cc in db.clscrs on cl.classcode equals cc.classcode
            join cs in db.course on cc.coursecode equals cs.coursecode
            where cl.ClassTitel == "value"
            select cl.CourseName;

comboBox1.DataSource = query.ToList(); 
```

# visual-c++ - 当类向导损坏时，将计时器 (WM_TIMER) 处理程序添加到 Visual C++ 6.0？

> ID：14428451
> 
> 赞同：1
> 
> 时间：2013-01-20T19:37:37.447
> 
> 标签：visual-c++, mfc, visual-c++-6

我有一个 MFC Visual C++ 应用程序，它似乎无法在类向导中工作，但是，我有一个视图 (CServerView)，我想向其中添加一个 WM_TIMER 事件处理程序。

我已经知道如何调用`CWnd::SetTimer`，`CWnd::KillTimer`但十多年来我没有做的是修改消息映射。我不确定我应该为我的 CView 子类修改的地图是 ServerView.cpp 文件的这一部分，还是 ServerView.h 中的某个内容：

```
BEGIN_MESSAGE_MAP(CServerView, CListView)
    //{{AFX_MSG_MAP(CServerView)
    ON_COMMAND(ID_DRIVER_START, OnDriverStart)
    ON_UPDATE_COMMAND_UI(ID_DRIVER_START, OnUpdateDriverStart)
        ...
    // Standard printing commands
END_MESSAGE_MAP() 
```

这可能是一件微不足道的事情，但我面临的两个复杂问题是在线文档都是针对最近的 Visual Studio 版本的，而我在 Visual C++ 6.0 中坚持这样做

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T19:45:13.673

在你的头文件中：

```
afx_msg void OnTimer(UINT_PTR nIDEvent); 
```

在您的 cpp 文件中：

```
BEGIN_MESSAGE_MAP(CMyView, CView)
    ON_WM_TIMER()
END_MESSAGE_MAP()

void CMyView::StartTimer
{
    m_nTimerID = SetTimer(2348,100,0);
}

void CMyView::OnTimer(UINT_PTR nIDEvent)
{
    if(nIDEvent==m_nTimerID)
    {
    }
    CView::OnTimer(nIDEvent);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:41:58.613

我认为它被称为 ON_TIMER 或 ON_WM_TIMER。检查已安装的包含定义 ON_COMMAND&Co 的位置，在那里你会找到它。或者，在 MS' 在线搜索 MSDN。顺便说一句，这个东西的名字没有改变，所以最近版本的文档还可以。我强烈建议升级，VC6，又名 VS98，今年已经 15 年了，MS 早就停止了对它的任何支持。

# java - Play Framework 2.1-RC2：在模板中通过反向路由创建 NoSuchFieldError

> ID：14428452
> 
> 赞同：4
> 
> 时间：2013-01-20T19:37:54.127
> 
> 标签：java, routing, playframework, playframework-2.1

我正在开发一个使用 MongoDB 作为数据存储的 Java Play 2.1-RC2 应用程序。我正在使用 Jongo 模块来处理 MongoDB。一切都很顺利，直到我遇到这些错误：

java.lang.NoSuchFieldError: 主页

这些错误源自我的模板，是由使用反向路由引起的。在这种特殊情况下，我试图访问我的 Home 控制器。

反向路由如下所示：@routes.Home.edit(document.url)

路线本身是这样的： GET /homepage/:url/edit controllers.Home.edit(url)

这以前有效，但自从我开始研究 MongoDB 实现以来就开始出现这些错误。我想不通这两者之间有什么联系。我认为我不会以任何方式干扰路由。这个项目从 2.0.4 项目开始。迁移到 2.1-RC1 很顺利，而且 2.1-RC2 似乎也能正常工作，直到现在。我创建了自己的 Model 便利类来处理 Mongo 模型。那里有什么东西会导致这种行为吗？

```
@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = "_class")
public class Model {

  @JsonProperty("_id")
  public ObjectId id;

  public MongoCollection models() {
    String collectionName = this.getClass().getName() + "s";
    return PlayJongo.getCollection(collectionName);
  }

  public void save() {
    models().save(this);
  }

  public void update() {
    this.remove();
    this.save();
  }

  public void remove() {
    models().remove(this.id);
  }

  public static class Finder<T> {

    private final Class<T> type;

    public Finder(Class<T> type) {
      this.type = type;
    }

    public MongoCollection models() {
      String collectionName = type.getName() + "s";
      return PlayJongo.getCollection(collectionName);
    }

    public List<T> all() {

      List<T> list = new ArrayList<>();
      Iterator<T> it = models().find().as(type).iterator();
      while (it.hasNext()) {
        list.add(it.next());
      }
      return list;
    }

    public T byId(ObjectId id) {
      return models().findOne(id).as(type);
    }

    public T byUrl(String url) {
      return models().findOne("{url: #}", url).as(type);
    }

    public List<T> byQuery(String query) {
      List<T> list = new ArrayList<>();
      Iterator<T> it = models().find(query).as(type).iterator();
      while (it.hasNext()) {
        list.add(it.next());
      }
      return list;
    }
  } 
```

我的插件.sbt：

```
// Comment to get more information during initialization
logLevel := Level.Warn

// The Typesafe repository
resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/"

// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.1-RC2") 
```

我的 build.properties：

```
sbt.version=0.12.2-RC2 
```

我的 Build.scala：

```
import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

  val appName = "Test"
  val appVersion = "0.1-SNAPSHOT"

  val appDependencies = Seq(
    javaCore,
    "uk.co.panaxiom" %% "play-jongo" % "0.3"
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    lessEntryPoints <<= (sourceDirectory in Compile)(base => (
      (base / "assets" / "css" / "bootstrap.less") +++
        (base / "assets" / "css" / "responsive.less")
      )
    )
  )
} 
```

唯一可能相关的 application.conf 行：

```
playjongo.uri="mongodb://127.0.0.1:27017/test"
playjongo.gridfs.enabled=false

ehcacheplugin=enabled 
```

和堆栈跟踪：

```
! @6d48738mo - Internal server error, for (GET) [/] ->

play.api.Application$$anon$1: Execution exception[[RuntimeException: java.lang.NoSuchFieldError: Home]]
    at play.api.Application$class.handleError(Application.scala:289) ~[play_2.10.jar:2.1-RC2]
    at play.api.DefaultApplication.handleError(Application.scala:383) [play_2.10.jar:2.1-RC2]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:114) [play_2.10.jar:2.1-RC2]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:110) [play_2.10.jar:2.1-RC2]
    at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1-RC2]
    at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1-RC2]
java.lang.RuntimeException: java.lang.NoSuchFieldError: Home
    at play.libs.F$Promise$6.apply(F.java:377) ~[play_2.10.jar:2.1-RC2]
    at scala.concurrent.Future$$anonfun$map$1.liftedTree2$1(Future.scala:253) ~[scala-library.jar:na]
    at scala.concurrent.Future$$anonfun$map$1.apply(Future.scala:249) ~[scala-library.jar:na]
    at scala.concurrent.Future$$anonfun$map$1.apply(Future.scala:249) ~[scala-library.jar:na]
    at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:29) ~[scala-library.jar:na]
    at akka.dispatch.BatchingExecutor$Batch$$anonfun$run$1.liftedTree1$1(BatchingExecutor.scala:67) ~[akka-actor_2.10.jar:na]
Caused by: java.lang.NoSuchFieldError: Home
    at views.html.documents.homepage$.apply(homepage.template.scala:45) ~[na:na]
    at views.html.documents.homepage$.render(homepage.template.scala:51) ~[na:na]
    at views.html.documents.homepage.render(homepage.template.scala) ~[na:na]
    at controllers.Home.read(Home.java:24) ~[na:na]
    at controllers.Application.index(Application.java:24) ~[na:na]
    at Routes$$anonfun$routes$1$$anonfun$applyOrElse$17$$anonfun$apply$17.apply(routes_routing.scala:251) ~[na:na] 
```

如果有人能告诉我这些错误可能来自哪里或指出我正确的方向，我将不胜感激！如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:01:17.110

好的，我在 Play 2.1.0 上遇到了完全相同的错误，在花了两个晚上之后，我似乎终于找到了问题所在！

我使用的模块有一个名为 controllers.Application 的控制器，其路由填充在模块的 conf/routes 文件中，我的项目中有完全相同的控制器（也有路由）。对我来说，这似乎是问题的根源。

因此，在您的模块（或子项目？）中查找冲突的控制器或路由，它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T06:17:43.557

您应该在路由中附加参数类型。所以应该是：

```
 GET /homepage/:url/edit controllers.Home.edit(url: String) 
```

Play 文档中有几个示例没有这样做。但我认为声明 explisit 类型是最佳实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:30:35.233

[https://github.com/hongsw/play2-JongoModel](https://github.com/hongsw/play2-JongoModel)

我为 JongoModel 做了一个示例项目

（玩！框架2.1）

# algorithm - 任意点网格的拓扑排序？

> ID：14428453
> 
> 赞同：3
> 
> 时间：2013-01-20T19:38:02.517
> 
> 标签：algorithm, graph, grid, topological-sort

我有一个点 x,y 网格，只要新点具有更大的 x、y 或两者，您就可以从一个点移动到立即可见的点。我将如何对它进行拓扑排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:45:10.317

这个网格有大量的拓扑排序。但是，其中一些非常容易计算，没有任何空间开销：

1.  从下到上，从左到右遍历行。
2.  从左到右、从下到上遍历列。
3.  列出所有 x 和 y 之和为零的点，然后列出 x 和 y 之和为 1 的所有点，以此类推。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:44:07.733

因为这是一个传递关系（即，如果您可以从 a 到 b，并且从 b 到 c，那么您必须能够从 a 到 c）您可以简单地对点进行排序以实现拓扑排序。

例如，此 C 代码将通过根据第一个坐标对点进行排序，或者如果第一个坐标匹配，则按第二个坐标对点数组进行拓扑排序。

```
int C[1000][2];

int compar(const void*a,const void*b)
{
  int *a2=(int*)a;
  int *b2=(int*)b;
  int d=a2[0]-b2[0];
  if (d)
    return d;  // Sort on first coordinate
  return a2[1]-b2[1];  // Sort on second coordinate
}

...
qsort(C,1000,sizeof(int)*2,compar);
... 
```

对于您的示例 (0,0) (1,99) (9,16) (16,9) (36,64) (64,36) (100,100)，这些点已经根据第一个坐标排序，所以这将是调用 qsort 的输出。

这种方法之所以有效，是因为如果你可以从 a 转到 b，那么 a 必须要么有一个较小的 x（因此出现在列表中的前面），或者相同的 x 和一个较小的 y（并且再次出现在排序列表中的前面）。

# ruby-on-rails - 设计恢复密码链接

> ID：14428454
> 
> 赞同：1
> 
> 时间：2013-01-20T19:38:07.803
> 
> 标签：ruby-on-rails, devise, forgot-password

我尝试在我的布局视图中设置设计恢复密码链接...我尝试这样做：

```
= link_to "Забыли пароль?", new_password_path(resource_name), :class => "login-link" 
```

但我明白了

```
undefined local variable or method `resource_name' 
```

如何在布局中渲染忘记密码？在rails视图中链接？

还有我的模型：

```
devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, 
         :token_authenticatable, :timeoutable 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T20:01:03.107

利用

```
= link_to "Забыли пароль?", new_password_path('user'), :class => "login-link" 
```

使用“用户”或任何您的设计模型类。

# c# - 动态添加 wpf 控件以包装面板

> ID：14428456
> 
> 赞同：3
> 
> 时间：2013-01-20T19:38:21.037
> 
> 标签：c#, wpf, wpf-controls

我正在尝试将控件动态添加到窗口上的换行面板，但是在将两个换行面板控件添加到原始换行面板控件之后，它不再添加这里是我用来添加图像的代码

```
 Random rn = new Random();
 ImageContainer.Children.Add(displayimage(rn.Next(amount)));            
 ImageContainer.InvalidateVisual(); 
```

我是 wpf 的新手，只是想知道我是否做错了什么或遗漏了什么。

任何帮助将不胜感激

**编辑**

```
 public WrapPanel displayimage(int i)
       {

        WrapPanel pn = new WrapPanel();
        pn.Width = 350;
        pn.Height = 400;
        pn.Background = new SolidColorBrush(Colors.White);
        BitmapImage bm = new BitmapImage(new Uri(imagePaths[i]));
        Image im = new Image();
        im.Source = bm;
        im.Height = 300;
        im.Width = 400;
        im.Margin = new Thickness(25,25,25,25);
        pn.Children.Add(im);
        pn.Margin = Location(pn);
        pn.ClipToBounds = true;

        return pn;

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T20:28:02.867

为了将图像放置在容器控件中的随机位置，您不应使用 WrapPanel，而应使用[Canvas](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.aspx)。画布用于元素的绝对定位。您可以通过设置`Canvas.Left`and`Canvas.Top`属性（或`Canvas.Right`或`Canvas.Bottom`）来设置 Canvas 的子元素的位置。

此外，您不需要任何“内部”面板，`Image`可以直接添加到任何容器的控件也是如此。

所以改变你的`displayimage`方法是这样的：

```
public UIElement GetDisplayImage(int i)
{
    var bm = new BitmapImage(new Uri(imagePaths[i]));
    var im = new Image
    {
        Source = bm,
        Height = 300,
        Width = 400
    };
    var location = Location(im);
    Canvas.SetLeft(im, location.X);
    Canvas.SetTop(im, location.Y);
    return im;
} 
```

现在将这些图像添加到画布：

```
Random rn = new Random();
ImageCanvas.Children.Add(GetDisplayImage(rn.Next(amount)); 
```

`InvalidateVisual`没有必要。

* * *

您可能还必须注意不要多次添加图像，因为`Random.Next`可能会多次返回相同的数字。

# jquery - 使用查询将元素拖动到父 div 之外

> ID：14428464
> 
> 赞同：0
> 
> 时间：2013-01-20T19:39:13.673
> 
> 标签：jquery, html, web

我一直在寻找解决此问题的方法，但尚未找到解决方案。我在可滚动区域中有一个列表，其中包含可拖动元素。我正在尝试对其进行设置，以便我可以将该父 div 之外的元素拖到可放置区域中，但是当我尝试拖动它时，它似乎只是在父 div 内移动。

```
.inputs{
                overflow-y: scroll;
                overflow-x:visible;
                height: 100px;
                float:left;
            }
            ul{
                width:50px;
                float:left;
            }
.spaces{
                float:right;
                border: 0px;
                width: 500px;
            }

.spaces td {
                background-color:#666666;
                margin:2px;
                width:184px;
                height: 99px;
                border:0px;
            } 
```

这是可拖放项目的代码

```
$(".inputs li").draggable( {
                                                         opacity: .4,
                                                         create: function(){$(this).data('position',$(this).position())},
                                                         cursorAt:{left:15},
                                                         cursor:'move', 
                                                         revert:function(event, ui) {
                                                         $(this).data("draggable").originalPosition = {
                                                         top: 0,
                                                         left: 0
                                                         };
                                                         return !event;
                                                         },
                                                         start:function(){
                                                            $('.info').css('visibility', 'hidden');

                                                         }
                                                         });

                              $('.spaces').find('td').droppable({
                                                                drop:function(event, ui){
                                                                snapToMiddle(ui.draggable,$(this));
                                                                $(this).droppable('option', 'accept', ui.draggable);
                                                                $(this).css('background-color', 'red');
                                                                },
                                                                out: function(event, ui){
                                                                $(this).droppable('option', 'accept', '.inputs li');
                                                                $(this).css('background-color', '#666');
                                                                }  
                                                                });

                              }); 
```

```
<div class="inputs">
            <ul>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
            <li>7</li>
            <li>8</li>
            <li>9</li>
            </ul>                
            </div>
            <br/>
            <table class="spaces">
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td class = "hidden"></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class = "hidden"></td>
                </tr>
                <tr>
                    <td class = "hidden"></td>
                    <td class = "hidden"></td>
                    <td></td>
                    <td class = "hidden"></td>
                    <td class = "hidden"></td>
                </tr>
            </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:53:24.573

[`containment`](http://jqueryui.com/draggable/#constrain-movement)创建可拖动对象时使用参数。就像是：

```
$(".inputs li").draggable({
 containment: "document"
 ....
}); 
```

有关更详细的文档： [http ://api.jqueryui.com/draggable/#option-containment](http://api.jqueryui.com/draggable/#option-containment)

# c# - 我可以在数据驱动测试中使用动态生成的 XML 文件吗

> ID：14428469
> 
> 赞同：2
> 
> 时间：2013-01-20T19:39:31.827
> 
> 标签：c#, visual-studio-2010, unit-testing, mstest

我正在尝试将动态生成的 XML 文件与数据驱动测试一起使用。我正在使用 Visual Studio 2010 和 .NET 4.0 。

```
[TestMethod]
[DataSource("Microsoft.VisualStudio.TestTools.DataSource.XML", @"|DataDirectory|\StudentData.xml", "Student", DataAccessMethod.Sequential)] 
```

这个`StudentData.xml`文件是由代码生成的，我没有部署这个文件。我已经编写了用于`StudentData.xml`在方法中生成文件的代码`TestInitialize()`，该文件也保存在当前工作目录中。

每当我要运行测试方法时，它都会抛出错误：

```
The unit test adapter failed to connect to the data source or to read the data. For more information on troubleshooting this error, see "Troubleshooting Data-Driven Unit Tests" (http://go.microsoft.com/fwlink/?LinkId=62412) in the MSDN Library.
Error details: Object reference not set to an instance of an object. 
```

我认为在创建文件之前，框架正在尝试访问该文件。那么，如何将这个 XML 文件用于单元测试呢？另外，我可以在属性中使用变量名吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:46:28.917

过去 17 小时内我没有收到任何回复。因为这对我很重要，所以我试图探索其他的可能性。

最后我让它工作了。下面是一个简单的解决方案（我发布这个是因为它将来可能会帮助像我这样的其他初学者）。

我刚刚将我的 XML 文件生成代码移动到`[ClassInitialize]`方法而不是`TestInitialize()`它工作正常。

此外，以下是将运行方法的顺序是：

```
1\.  Methods marked with the AssemblyInitializeAttribute.
2\.  Methods marked with the ClassInitializeAttribute.
3\.  Methods marked with the TestInitializeAttribute.
4\.  Methods marked with the TestMethodAttribute 
```

[在这里](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testinitializeattribute%28v=vs.80%29.aspx)查看更多

谢谢...

# php - 会话相关的 apc 变量

> ID：14428471
> 
> 赞同：1
> 
> 时间：2013-01-20T19:39:47.980
> 
> 标签：php, caching, apc

我想在数据存储中存储一个明智的密钥（只是为了避免将它存储在标准会话中），但我想让它只能被存储在其下的会话访问。

我怎样才能做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:29:26.423

据我所知，APC 不为存储变量提供任何访问保护（即您可以访问每个会话中的所有存储变量）。

```
apc_store(session_id() . "_key", $value); 
```

如前所述，您可以简单地使用当前会话密钥作为前缀。但是，如果在应用程序内部没有进一步的保护，数据将只能通过会话密钥的保密性来保护，但仍然可以从每个会话中访问。

# javascript - 关闭包含框架的父窗口

> ID：14428475
> 
> 赞同：0
> 
> 时间：2013-01-20T19:40:04.850
> 
> 标签：javascript, window

我有一个名为**abc.html**的 html 页面，其中包含 2 个水平框架。框架 2 包含一些 php 和 javascript 代码。框架 2 内的页面的设计方式是，它将执行一些任务，然后打开一个新选项卡。打开一个新标签后，我的工作转移到该页面，并且不再需要当前页面“abc.html”。所以我需要关闭它。打开新标签后需要一些帮助才能关闭它。我试过**window.close()**和**close();** . 他们都没有完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:49:52.150

我不相信以前没有通过 javascript 创建的 javascript 关闭窗口是可能的。

# mysql - 如何按赞订购？

> ID：14428477
> 
> 赞同：0
> 
> 时间：2013-01-20T19:40:10.207
> 
> 标签：mysql, sql-order-by

我正在尝试显示表格中的项目并按喜欢的数量对它们进行排序。喜欢在另一张桌子上，这让我很困惑。第一个表`images`如下所示：

```
images

id   url
1    blablabla.jpg
2    hejhej.png
3    picture.jpg 
```

第二个`likes`，看起来像这样：

```
likes

id   image
1    2
2    2
3    1
4    3
5    2 
```

现在我希望大多数喜欢的图像都可以订购。我在查询中写什么使它看起来像这样？：

```
hejhej.png - 3 likes
blablabla.jpg - 1 like
picture.jpg - 1 like 
```

如果您能帮助我解决我的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:42:39.397

```
SELECT url, COUNT(likes.id) as likes
FROM images, likes
WHERE likes.image = images.id
GROUP BY images.id
ORDER BY likes DESC 
```

* * *

要仅获取过去 24 小时的记录，请将其添加到您的查询中：

```
WHERE likes.date > DATE_SUB(CURDATE(), INTERVAL 1 DAY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:44:01.287

```
SELECT 
    url,
    COUNT(likes.id) Likes
FROM
    images,
    likes
WHERE
    likes.image = images.id
GROUP BY
    images.url
ORDER BY
    Likes DESC 
```

您依次选择`FROM`两个表格、`grouped by`图像 url 和`ordered`喜欢的`descending`数量。

# php - 在 CakePHP 中将两个 JSON 响应组合在一起

> ID：14428478
> 
> 赞同：0
> 
> 时间：2013-01-20T19:40:11.390
> 
> 标签：php, cakephp

在我的 CakePHP 应用程序中，我在 beforeFilter 中做一些事情来传递额外的 JSON 数据以及关于用户或身份验证等的响应。

例如：

```
public function beforeFilter()
{
    $this->Auth->allow(array('index'));

    // If the request is either JSON or XML
    if ( $this->params['ext'] == 'json' || $this->params['ext'] == 'xml' )
    {
        if( $this->Auth->user() )
        {
            // User is logged in so send userdata and usual response will also be passed
            $response = array('meta' => 
                array(
                    'auth' => true,
                    'user_id' => $this->Auth->user('id')
                )
            );
            echo json_encode($response);
        }
        else
        {
            $requiresAuth = !in_array($this->params['action'], $this->Auth->allowedActions);
            if ($requiresAuth)
            {
                $response = array('meta' => 
                    array(
                        'auth' => false
                    )
                );
                echo json_encode($response);
                exit; // exit so no other responses go through
            }
            else
            {
                // Send JSON usual response
                $response = array('meta' => 
                    array(
                        'auth' => false
                    )
                );
                echo json_encode($response);
            }
        }
    }

    parent::beforeFilter();

} 
```

这用于为移动应用程序构建我的 RESTful API。这里的问题是完整返回的 JSON 如下所示：

```
{
    "meta": {
        "auth": false,
    }
} {
    "posts": [{
        "Post": {
            "id": "136",
            "user_id": "8",
            "datetime": "2012-09-11 15:49:52",
            "modified": "2012-09-16 15:31:38",
            "title": "Where is good to eat in New York?",
            "slug": "Where_is_good_to_eat_in_New_York",
            "content": "Preferably italian or mexican and with a good atmosphere.\r\n\r\nAlso within the **Manhattan** area!",
            "status": "1",
            "promoted": "0",
            "latitude": "53.6570794",
            "longitude": "-1.8277604"
        },... 
```

如您所见，这两个 JSON 对象没有正确组合在一起......我该如何解决这个问题？

使用 CakePHP 2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:09:34.033

试试 json_encode(array_merge($response));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:39:16.230

解决方法如下：

1）不要从你的 beforeFilter() 函数中回显任何东西——它会破坏单元测试。

2) 在 app_controller 中创建一个名为 $extra_data 的受保护变量；

3) 在你有 echo 语句的地方，只需将 $extra_data 设置为 $response;

4）在你的控制器动作中回显你的主json，检查！empty($this->extra_data) 如果是这样，请将您的主要操作响应与额外数据合并，并将其设置为您的视图以在此处作为 json 回显。

# r - 马尔可夫决策过程的评估

> ID：14428479
> 
> 赞同：1
> 
> 时间：2013-01-20T19:40:21.313
> 
> 标签：r, simulation

我想比较使用决策树/状态转换/马尔可夫模型的两种干预措施的成本。用于此类分析的最常被引用的商业软件之一是[Treeage](http://www.treeage.com/shop/treeage-pro-suite/)。

是否有在 R 中执行这些分析的包？这样的分析在 R 中是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:14:34.860

你可以试试这个：[打包'VLMC'](http://cran.r-project.org/web/packages/VLMC/VLMC.pdf) ，看看它是否适合你的需要。

# ruby-on-rails - 如何在 Rails 中导航和阅读 URL？

> ID：14428480
> 
> 赞同：0
> 
> 时间：2013-01-20T19:40:35.857
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, rake

这部分问题是这个问题的一部分[上一个问题](https://stackoverflow.com/questions/14427776/rails-devise-not-working-for-rails-3-2-1-on-localhost)

在运行`rake routes`命令并了解错误分类后，我终于想出了这个窗口，但作为 ROR 的新手，我无法追踪 URL 以产生效果。

这就是结果，我相信它也没有错误 -

![正确的](../Images/bf199b70e091d08f0effa3c1232a9470.png)

但是我尝试了这些 URL，但没有一个有效:(

```
http://localhost:3000/
http://localhost:3000/users
http://localhost:3000/user 
```

Routes.rb 文件——

```
Prjmgt::Application.routes.draw do
  devise_for :users

  # The priority is based upon order of creation:
  # first created -> highest priority.

  # Sample of regular route:
  #   match 'products/:id' => 'catalog#view'
  # Keep in mind you can assign values other than :controller and :action

  # Sample of named route:
  #   match 'products/:id/purchase' => 'catalog#purchase', :as => :purchase
  # This route can be invoked with purchase_url(:id => product.id)

  # Sample resource route (maps HTTP verbs to controller actions automatically):
  #   resources :products

  # Sample resource route with options:
  #   resources :products do
  #     member do
  #       get 'short'
  #       post 'toggle'
  #     end
  #
  #     collection do
  #       get 'sold'
  #     end
  #   end

  # Sample resource route with sub-resources:
  #   resources :products do
  #     resources :comments, :sales
  #     resource :seller
  #   end

  # Sample resource route with more complex sub-resources
  #   resources :products do
  #     resources :comments
  #     resources :sales do
  #       get 'recent', :on => :collection
  #     end
  #   end

  # Sample resource route within a namespace:
  #   namespace :admin do
  #     # Directs /admin/products/* to Admin::ProductsController
  #     # (app/controllers/admin/products_controller.rb)
  #     resources :products
  #   end

  # You can have the root of your site routed with "root"
  # just remember to delete public/index.html.
  # root :to => 'welcome#index'
    root :to => 'home#index'

  # See how all your routes lay out with "rake routes"

  # This is a legacy wild controller route that's not recommended for RESTful applications.
  # Note: This route will make all actions in every controller accessible via GET requests.
   match ':controller(/:action(/:id))(.:format)'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:50:03.643

您的根 URL 应该可以正常工作。

但是，请注意

```
/user 
```

在您的路线中不存在任何地方，并且

```
/users 
```

只能通过发布请求访问。在设计中，这用于使用 post 方法提交表单以创建新用户。

只需在浏览器中打开一个 url 就意味着使用 get 请求，并且没有为`/users`.

`/users/sign_up`在您的浏览器中试用，它应该会引导您进入设计的注册页面。

我建议您阅读[rails guide on routing](http://guides.rubyonrails.org/routing.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:51:03.713

没有定义`http://localhost:3000/`，即根目录。并且`http://localhost:3000/user`根本没有任何意义，因为控制器总是复数。

`http://localhost:3000/users`对于控制器来说通常没问题，但似乎你正在使用一些用户管理的东西，所以它不接受获取请求。

尝试：`http://localhost:3000/users/sign_up`或`http://localhost:3000/users/sign_in`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:53:27.257

查看您之前的问题，您还没有设置 /users 。尝试添加

```
resources :users 
```

到你的 routes.rb。

至于设计路线，请尝试访问 http://localhost:3000/users/sign_in]

**编辑：**

还有这条线，

```
/:controller/:action/:id 
```

不是字面意思。

这只是 match 方法的一个示例。它应该看起来像

```
match "/users/:id" => "users#show" 
```

这会将 /users/1 与您的 UsersController 中的 show 方法匹配。

# java - 在 JDT 中找出调用方法的类型

> ID：14428483
> 
> 赞同：2
> 
> 时间：2013-01-20T19:41:12.803
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-jdt

在此代码中，prosseek.B#bar() 方法调用 prosseek.SuperA#foo()。

```
package prosseek;

public class SuperA {
    int i = 0;
    public void foo()
    {
        System.out.println(i);
    }
}

public class B {
    public void bar()
    {
        SuperA a = new SuperA();
        a.foo();
    }
} 
```

我需要检测在 bar() 中调用的 foo() 的类型。我使用 ASTVisitor 来检测 MethodInvocation 代码 (a.foo())，但我不确定我应该怎么做才能从中获取`SuperA`类型。

```
ICompilationUnit icu = type.getCompilationUnit();
final ASTParser parser = ASTParser.newParser(AST.JLS3);
parser.setKind(ASTParser.K_COMPILATION_UNIT);
parser.setSource(icu);
parser.setResolveBindings(true); // we need bindings later on
CompilationUnit unit = (CompilationUnit) parser.createAST(null);

unit.accept(new ASTVisitor() {
    public boolean visit(MethodInvocation methodInvocation)
    {
        // ???

        return false;
    }
} 
```

## 添加

我从 JDT 基础教程中得到了提示。

![在此处输入图像描述](../Images/3f739d8f1296a7ebd9cd8a270592e858.png)

我尝试了以下代码：

```
IBinding binding = methodInvocation.resolveTypeBinding();
IType type = (IType)binding.getJavaElement();
if (type == null)
    return false; 
```

但是，对于 binding.getJavaElement(); 的返回值，我得到了 null；

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T05:58:46.573

您可能需要从*Expression*中获取类型，而不是获取*MethodInvocation*的类型。我没有对此进行测试，但这可能会有所帮助。

 *```
public boolean visit(MethodInvocation node) {
    Expression exp = node.getExpression();
    ITypeBinding typeBinding = node.getExpression().resolveTypeBinding();
    System.out.println("Type: " + typeBinding.toString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T03:35:15.313

您可能从以下位置获得空值：

`methodInvocation.resolveTypeBinding();`

因为您没有正确设置解析器。根据resolveTypeBinding的JDT文档：

“解析并返回此表达式类型的绑定。请注意，除非在构建 ​​AST 时请求，否则绑定通常不可用。” ( [http://goo.gl/IAUtR8](http://goo.gl/IAUtR8) )

为了启用绑定，您必须在解析器上调用此方法：

`parser.setBindingsRecovery(true);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T19:49:49.463

我可以使用此代码来获取 IType：查找方法，查找 ICompilationUnit，查找包含该方法的类。

我认为代码相当愚蠢，可能有一种方法可以给我从 IMethod 返回 IType 的方法。

```
public boolean visit(MethodInvocation methodInvocation)
{
    //IBinding binding = methodInvocation.resolveTypeBinding();
    IBinding binding = methodInvocation.resolveMethodBinding();
    IMethod method = (IMethod)binding.getJavaElement();
    ICompilationUnit cu = method.getCompilationUnit();
    IType type = null;
    try {
        IType[] types = cu.getTypes();
        if (types.length == 1) {
            type = types[0];
        }
        else {
            for (IType t : types)
            {
                IMethod[] methods = t.getMethods();
                for (IMethod m : methods)
                {
                    if (m == method) {
                        type = t;
                        break;
                    }
                }
                if (type != null)
                    break;
            }
        }
    } catch (JavaModelException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# 添加

这段代码适用于我。

```
public boolean visit(MethodInvocation node)
{
    String methodName = node.getName().toString();
    ITypeBinding typeBinding = node.getExpression().resolveTypeBinding();
    IType type = (IType)typeBinding.getJavaElement();

    System.out.printf("Type %s (method %s) calls %s\n", typeName, methodName, type.getFullyQualifiedName());
    return false;
} 
```*

# vb.net - GlovePIE 和应用程序之间的通信

> ID：14428486
> 
> 赞同：2
> 
> 时间：2013-01-20T19:41:21.260
> 
> 标签：vb.net, osc

如何在 VB.net 和 VB.net 之间进行通信`GlovePIE`？

我知道您可以发送`OSC` *（打开声音控制-它不仅仅是用于声音）*数据，`GlovePIE`所以如果您可以`send/receive`在没有任何可以工作的库的情况下在 VB.net 中发送数据，但我找不到任何资源。

请发布您可以发布的任何代码。

**编辑：**我想要的只是一种在`GlovePIE`和 VB.net 之间进行通信的基本方式，我发现你可以发送`OSC`数据`GlovePIE`但你不能在 VB.net 中我会接受我能得到的任何帮助。如果您有更好的方法，请随时告诉我。我正在使用本指南发送[数据](http://www.glovepie.org/w/index.php?title=Preliminary_Documentation_v0.43#Using_the_SendOsc_and_BroadcastOsc_functions)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:55:19.137

经过大量的创造性思考和浪费时间，我终于想出了一个主意。（感谢 spajce 帮助我意识到没有完美的解决方案，我必须跳出框框思考才能完成这项工作。）这就是我要做的。（我还没写代码，写完我会尽量提交。）

**我将如何设置它：**

*   我将在 VB.net 中有一个将数据发送到 COM 端口的表单。它的 GUI 将让用户选择 COM 端口并有一个连接按钮。
*   在我的 GlovePIE 脚本中，我会让它自动隐藏。

**将数据传输到 VB.net：**

*   GlovePIE 将判断是否使用该`Window.Title`属性选择了表单。如果是，它将模拟按键。表单将寻找按键。

**将数据传输到 GlovePIE：**

*   表单会将`Me.text`属性更改为已发生的事情。例如，我正在构建一个机器人，如果 ping 传感器感应到某些东西，我的 Aduino 将通过串行方式将数据发送到 VB.net，这会将标题更改为“Robot Connect-OBJECT DETECTED” GlovePIE 将知道多个名称表单可能是，当搜索它是否处于活动状态时，它可以判断是否检测到某些东西。在 GlovePIE 收到信号后，VB.net 会将标题改回“Robot Connect”。

**会有一些错误，但 VB.net 足够聪明，可以判断另一个窗口是否是活动窗口。**如果您正在浏览这个问题，您可能需要调整它。我将不得不设置一些安全功能，以防止机器人在 VB.net 窗口失去焦点时不会停止。

感谢试图提供帮助的人。

# java - ResultSet 和 ResultSetMetaData 之间的交互是单向的吗？

> ID：14428496
> 
> 赞同：0
> 
> 时间：2013-01-20T19:42:50.063
> 
> 标签：java, jdbc, resultset

我的一位同事从网上提取了一些代码，这些代码执行以下操作：

```
ResultSetMetaData rsmd = rs.getMetaData();
while (rs.next()) {
  count = rsmd.getColumnCount();
  validateSame(firstRowCount, count);
} 
```

这意味着 RSMD 正在维护对 的内部引用，`ResultSet`并且列数可能因行而异。

对我来说，每个 RS 会有一组元数据似乎很直观，我想重构这段代码，但我无法在 Java 文档中验证这一点或通过谷歌搜索得到它。有人可以确认或否认元数据是不变的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:31:30.843

SQL 结果集是一个表，其结构完全由查询和被查询的基础表定义。它不能逐行变化。你可以重构它。

# django - Django下的数据库设计

> ID：14428499
> 
> 赞同：0
> 
> 时间：2013-01-20T19:43:01.943
> 
> 标签：django, database-design

我有一个可能很基本的问题：我目前正在为我的课程中的学生和他们的分数建立一个数据库。我的 models.py 目前有两个主要类：学生（包含他们的姓名、ID、电子邮件地址等）和课程（包含 ID、运行年份和评估信息 - 例如“论文”“40% ““演示文稿”“10%”“考试”“50%”）。当然，Student 有一个 ManyToMany 字段，这样我就可以将学生分配给课程，反之亦然。我必须能够添加和修改这些东西。

现在，显然，我希望能够为不同作业中的学生添加分数（因课程而异）。由于我在数据库编程方面非常缺乏经验，我希望你们中的一个可以给我一个提示，如何在我的模型中进行设置。

谢谢，托比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:08:05.323

也许解决方法是有一个单独的课程来分配，就像这样。

```
class Assignment(models.Model):
    ASSIGNMENT_TYPES = (
        ('essay', "Essay"),
        ...
    )
    ASSIGNMENT_GRADES = (
        ('a+', "A+"),
        ('a', "A"),
        ...
    )
    student = models.ForeignKey("Student")
    course = models.ForeignKey("Course")
    assignment_type = models.CharField(choices=ASSIGNMENT_TYPES, max_length=15, default='essay')
    progress = models.IntegerField()
    grade = models.CharField(choices=ASSIGNMENT_GRADES, max_length=3, default="a+") 
```

这样，您就可以将一项作业与一名学生和一门课程相关联。如果每个作业有多个学生，则可以通过添加另一个类（例如 StudentGroup）并将其包含在模型中，相对容易地对其进行修改。

希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:53:16.697

创建一个名为“Assessments”的模型，它有一个指向 Course 的外键。此外，创建一个名为“Assessment Type”的字段，另一个名为“Assessment Result”，最后一个名为“Assesment Date”。应该是这样的：

```
ASSESSMENTS = (('E','Essay'),('P','Presentation'))

class Assessment(models.MOdel):
    course = models.ForeignKey('Course')
    assessment = models.CharField(choices=ASESSMENTS)
    result = models.CharField(max_length=250)
    taken_on = models.DateField()
    overall_result = models.BooleanField()
    is_complete = models.BooleanField() 
```

每次有考试时，您都会在此表中填写每项评估的记录。您可以使用总体结果作为标志来查看学生是否通过或失败，并使用 is_complete 来查看是否有任何课程等待考试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:06:05.440

您应该查看[classcomm](http://code.google.com/p/classcomm/source/browse/django_projects/classcomm/student_portal/models.py)`models.py`文件，这是一个用 Django 编写的内容管理系统，用于在 Web 上交付和管理课程。

它有以下型号

1.  部门
2.  课程
3.  讲师
4.  导师
5.  注册
6.  任务
7.  DueDateOverride
8.  提交
9.  年级
10.  额外信用
11.  信息
12.  资源
13.  公告

您可能不需要如此复杂的关系来处理您的情况，但它的`models design`.

您可以在该项目的[主页](http://code.google.com/p/classcomm/)上找到更多详细信息。

# c# - 等待winform事件的方法

> ID：14428503
> 
> 赞同：0
> 
> 时间：2013-01-20T19:43:38.633
> 
> 标签：c#, .net, winforms, multithreading, wait

在我一直在开发的程序中，需要一种方法来等到在特定文本框内单击 ENTER （通常是调用 winform 事件）。我知道我应该用线程来做这件事，但不知道如何制作一个可以做到这一点的方法。更具体地说，我不知道如何在线程上调用事件方法，也无法在 Main 上调用，因为在调用此方法之前它会被阻塞。

停止主线程的方法是：

```
 void WaitForInput()
 {
     while (!gotInput)
     {
         System.Threading.Thread.Sleep(1);
     }
 } 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:46:57.600

只需订阅文本框的[KeyDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown.aspx)（或[KeyPress](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx)）事件：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        // do your stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:59:28.213

您可以首先使用以下任务将 WaitForInput 方法更改为线程化：

```
 private void WaitForInput()
  {
      Task.Factory.StartNew(() =>
          {
              while (!gotInput)
              {
                  System.Threading.Thread.Sleep(1);
              }
              MessageBox.Show("Test");
          });
  } 
```

然后捕获文本框的 KeyPressed 事件并将布尔值 gotInput 的状态更改为 true，如下所示：

```
 private void KeyDown(object sender, KeyPressEventArgs e)
  {
      if (e.KeyChar == (char)13)
          gotInput = true;
  } 
```

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:28:43.680

使用`async/await`.NET 4.5 中的关键字。你可以这样做：

```
CancellationTokenSource tokenSource; // member variable in your Form

// Initialize and wait for input on Form.Load.
async void Form_Load(object sender, EventArgs e)
{
  tokenSource = new CancellationTokenSource();
  await WaitForInput(tokenSource.Token);

  // ENTER was pressed!
}

// Our TextBox has input, cancel the wait if ENTER was pressed.
void TextBox_KeyDown(object sender, KeyEventArgs e)
{
  // Wait for ENTER to be pressed.
  if(e.KeyCode != Keys.Enter) return;

  if(tokenSource != null)
    tokenSource.Cancel();
}

// This method will wait for input asynchronously.
static async Task WaitForInput(CancellationToken token)
{
  await Task.Delay(-1, token); // wait indefinitely
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T21:13:00.883

目前我被一台装有 XP 的恐龙电脑困住了（.NET 2008，直到四月左右才能升级）。我最终遵循了评论中的解决方案，并让主线程等待并在线程上运行条目。谢谢！

# android - 在 Android 中将 HttpResponse 对象作为额外的意图传递

> ID：14428508
> 
> 赞同：0
> 
> 时间：2013-01-20T19:44:11.367
> 
> 标签：android, android-intent

我有一个特殊要求，我想将一个 HttpResponse（来自 Apache CORE API）对象作为额外的对象传递给另一个 Intent。

问题：我的 HTTP 服务器（Apache CORE）运行服务 S。当我收到 POST 请求时，应在执行意图 A 后发送响应，该意图 A 向已运行的服务 S 发送广播（其设计基于根据我的要求）。所以我需要在广播接收器中处理 HTTP POST 响应。这可能吗？因此，我需要将 handle() 方法中的 HttpResponse 发送到广播接收器并从那里发送响应。如果您需要更多详细信息，请告诉我。

我找到了传递原始类型（如字符串、整数类型等）的链接。感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:52:36.667

您可以使用[`Serializable`](http://developer.android.com/reference/java/io/Serializable.html)如下界面：

```
// pass:
intent.putExtra("MotherClass", obj);

// receive:
getIntent().getSerializableExtra("MotherClass"); 
```

甚至更好，[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)如下使用（来自[@BomberMan 的回答](https://stackoverflow.com/questions/9323044/android-parcelable-and-serializable)和[这个博客](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)）：

```
public class CustomObject1 implements Parcelable {

   // parcelable code CustomObject1
}
public class CustomObject2 implements Parcelable {

    private CustomObject1 obj1;

   // add  CustomObject1 here with getter setter
   // parcelable code for CustomObject2 

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeParcelable(obj1, flags);
    }  
    private void readFromParcel(Parcel in) {
        obj1 = in.readParcelable(CustomObject1.class.getClassLoader());
    }
  ............
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:47:54.887

为了将对象作为额外的传递。您可能需要实现 Parclable 或 Serializable。但是 HttpResponse 的默认实现并没有实现两者。因此，您需要扩展 BasicHttpResponse 并实现其中之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:23:28.393

我用了一个

```
HashMap<Object,Object> requestValue.put(response,"httpResponse"), 
```

其中 response 是 HttpResponse 对象， httpResponse 是用作此请求 ID 的字符串。我在我的活动和服务之间传递了字符串。稍后，使用其值（字符串值）检索对象（键）的值。HttpResponse 没有实现 Serializable ，因此这很有效 :) 感谢大家的回复。

# xml - 使用 BaseX 读取多个 XML 文件

> ID：14428510
> 
> 赞同：6
> 
> 时间：2013-01-20T19:44:21.690
> 
> 标签：xml, basex

嗨，我是 BaseX 的新手，我正在尝试从文件夹中读取一堆 XML 文件。读取这些文件后，我会将数据输出到数据库表（一些 RDBMS）中。但是我不知道从哪里开始，因为我找不到太多关于使用 BaseX 的教程。我在互联网上搜索过，但仍然没有太大帮助。有人可以帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T20:21:11.807

用于`CREATE DB yourdbname /path/to/folder`创建包含此文件夹中所有文档[的数据库。](http://docs.basex.org/wiki/Databases#Create_Databases)要[访问文档](http://docs.basex.org/wiki/Databases#XML_Documents)，请使用`collection("yourdbname")`. 如果您需要访问特定文件，请使用`collection("yourdbname/document.xml")`.

要查询所有这些文件，您可以执行类似的操作

```
for $document in collection("yourdbname")
return string-join((
    document-uri($document),
    ": ",
    xs:string(count($document//*))
  )) 
```

这将返回所有文档路径及其相关节点数。

如需进一步阅读，请查看[BaseX 文档](http://docs.basex.org/wiki/Main_Page)中的[入门部分](http://docs.basex.org/wiki/Getting_Started)，您应该能够在其中找到所有需要的信息。要使用 SQL 在 RDBMS 中存储数据，请查看[SQL 模块](http://docs.basex.org/wiki/SQL_Module)，其中还包含一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-16T15:23:08.653

分别添加几个文件：

```
nicholas@mordor:~/flwor/bookstore$ 
nicholas@mordor:~/flwor/bookstore$ cat book1.xml 
  <book category="cooking">
    <title lang="en">Everyday Italian</title>
    <author>Giada De Laurentiis</author>
    <year>2005</year>
    <price>30.00</price>
  </book>

nicholas@mordor:~/flwor/bookstore$ 
nicholas@mordor:~/flwor/bookstore$ cat book2.xml 
  <book category="children">
    <title lang="en">Harry Potter</title>
    <author>J K. Rowling</author>
    <year>2005</year>
    <price>29.99</price>
  </book>

nicholas@mordor:~/flwor/bookstore$ 
nicholas@mordor:~/flwor/bookstore$ basex
BaseX 9.0.1 [Standalone]
Try 'help' to get more information.
> 
> create database books
Database 'books' created in 225.89 ms.
> 
> open books
Database 'books' was opened in 0.04 ms.
> 
> set parser xml
PARSER: xml
> 
> add book1.xml
Resource(s) added in 160.76 ms.
> 
> add book2.xml
Resource(s) added in 4.86 ms.
> 
> xquery /book/title
<title lang="en">Everyday Italian</title>
<title lang="en">Harry Potter</title>
Query executed in 188.71 ms.
> 
> exit
Have a nice day.
nicholas@mordor:~/flwor/bookstore$ 
```

数据来自：

[https://www.w3schools.com/xml/books.xml](https://www.w3schools.com/xml/books.xml)

其中介绍了 Xquery 和 FLWOR

您可能更喜欢图形前端而不是控制台（文本）界面。

# jquery - jQuery 事件处理程序不起作用或仅在第一页加载时触发，但在刷新后检查 dom 后起作用

> ID：14428513
> 
> 赞同：-1
> 
> 时间：2013-01-20T19:44:28.850
> 
> 标签：jquery, cross-browser, internet-explorer-9

我对 ie9 和 jQuery 有疑问。

在 Chrome、Firefox 和 Opera 中，我的点击事件在锚标记上起作用，但在 IE9 中，该事件无法触发或发生某些事情。它只发生在我没有缓存的第一页加载时，它不起作用。

我单击一个链接，没有菜单淡入，但是当我刷新页面并使用 f12 开发人员工具检查它时，它可以工作。

这很奇怪，在检查 dom 后可以在所有其他浏览器和 IE9 中使用。感谢您的任何帮助。

好的，查看页面后，我有相同类型的事件注册到另一组在 ie9 中正常工作的链接。

我认为这个选择器有问题：

```
 var catTopSelector= '#pc_lhs_top_ul > li:not( #main_menu_top )';
   var catBottomSelector= '#pc_lhs_bottom_ul > li:not( #main_menu_bottom )'; 
```

出于某种原因，它仅在检查后才有效。适用于所有其他浏览器。

更新答案：

好的，我找到了原因。我在动画之前的代码中有一个console.log，并且因为控制台仅在调试器打开时可用，所以它会在动画之前崩溃。再次感谢伙计们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:57:29.703

好的，我找到了原因。我在动画之前的代码中有一个console.log，并且因为控制台仅在调试器打开时才可用，它会在动画之前崩溃！

# jquery - 使用 JQuery 设置表单字段的值 - 仅在用户未编辑时才有效？

> ID：14428514
> 
> 赞同：0
> 
> 时间：2013-01-20T19:44:29.460
> 
> 标签：jquery, html

我有一个输入框，其中的值用逗号分隔。由于其中一些值可能非常大，我想我会使用一些 JQuery 在模式对话框中拆分它们，以便用户一眼就能看到列表。

但是，JQuery 代码仅在用户编辑其中一个字段之前有效，之后任何尝试使用 JQuery .val() 或 .attr('value','data') 都无效。

我的代码如下：

[http://pastebin.com/8jt93yhr](http://pastebin.com/8jt93yhr)

在您开始更改字段之前，这些按钮工作正常，然后没有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:57:20.243

用于`.val()`获取/设置的内容`textarea`以及..

**演示在** [http://jsfiddle.net/gaby/Y4YkL/1/](http://jsfiddle.net/gaby/Y4YkL/1/)

# javascript - 在服务器上使用 javascript 验证

> ID：14428519
> 
> 赞同：1
> 
> 时间：2013-01-20T19:44:36.963
> 
> 标签：javascript

在我的 LAMP 应用程序中，我使用 Javascript 进行表单验证，但互联网用户当然可以在他们的浏览器中关闭 Javascript，因此我还使用 PHP 函数验证服务器上的表单数据。

有谁知道是否有一些聪明的方法可以在服务器上重用我的 Javascript 验证以避免编写 PHP 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:05:23.207

如果不知道您是如何构建应用程序的，这有点难以判断，但您不太可能能够在服务器端回收您的 JavaScript。另一方面，如果你构建了一个轻量级、快速的 php 验证工具，你可以通过 XHR*而不是*（很多）JavaScript 使用服务器端验证，并在另一个方向为自己节省一些冗余。

但是，这种方式肯定会更慢，因此用户体验和安全性的最佳组合可能来自验证中的一些冗余。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:57:51.637

这可能是您正在寻找的。它不是一个 javascript 实现。但这应该提供您所有的基本验证方法。我不相信你能找到任何接近 javascript 的东西，除非你使用 Node.js

[验证器.php](http://www.phpclasses.org/package/1338-PHP-Form-Validation-class.html)

# ruby - 嵌套资源中的索引不起作用

> ID：14428523
> 
> 赞同：0
> 
> 时间：2013-01-20T19:45:37.227
> 
> 标签：ruby, ruby-on-rails-3

我有一条嵌套路线，`appointments`当`schedules` 我尝试前往`doctors/1/appointments/`或`doctors/1/schedules/`遇到路线错误时。对我来说，索引页面内的链接似乎存在错误，但我检查了 rake 路线，一切似乎都很好。编辑、显示和新操作工作正常。

我究竟做错了什么？

路由.rb

```
Pgranges::Application.routes.draw do

  root :to => "Doctors#index"

  resources :doctors do
    resources :appointments  
    resources :schedules  
  end

  resources :appointment_steps
end 
```

这是我的索引文件：

```
<h1>Listing appointments</h1>

<table>
  <tr>
    <th>Doctor</th>
    <th>Adate</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @appointments.each do |appointment| %>
  <tr>
    <td><%= appointment.doctor_id %></td>
    <td><%= appointment.adate %></td>
    <td><%= link_to 'Show', doctor_appointment_path %></td>
    <td><%= link_to 'Edit', edit_doctor_appointment_path(appointment) %></td>
    <td><%= link_to 'Destroy', doctor_appointment, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Appointment', new_doctor_appointment_path %> 
```

我的控制器看起来像这样：

```
class SchedulesController < ApplicationController
  def index
    @doctor = Doctor.find(params[:doctor_id])    
    @schedules = @doctor.schedules.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @schedules }
    end
  end

  def show
    @doctor = Doctor.find(params[:doctor_id])        
    @schedule = @doctor.schedules.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @schedule }
    end
  end

  def new
    @doctor = Doctor.find(params[:doctor_id])
    @schedule = @doctor.schedules.new

    @doctors = Doctor.all

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @schedule }
    end
  end

  def edit
    @doctor = Doctor.find(params[:doctor_id])    
    @schedule = @doctor.schedules.find(params[:id])
  end

  def create
    @doctor = Doctor.find(params[:doctor_id])    
    @schedule = @doctor.schedules.new(params[:schedule])

    if @schedule.save
      redirect_to doctor_url(@schedule.doctor_id)
    else
      render action: 'new'
    end

  end

  def update
    @schedule = Schedule.find(params[:id])

    respond_to do |format|
      if @schedule.update_attributes(params[:schedule])
        format.html { redirect_to @schedule, notice: 'Schedule was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @schedule.errors, status: :unprocessable_entity }
      end
    end
  end

  def destroy
    @schedule = Schedule.find(params[:id])
    @schedule.destroy

    respond_to do |format|
      format.html { redirect_to schedules_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:52:36.660

您应该将两种资源（医生和约会）传递给嵌套资源的路由助手。此外，您忘记了删除链接的 _path。试试这个：

```
<td><%= link_to 'Show', doctor_appointment_path(appointment.doctor, appointment) %></td>
<td><%= link_to 'Edit', edit_doctor_appointment_path(appointment.doctor, appointment) %></td>
<td><%= link_to 'Destroy', doctor_appointment_path(appointment.doctor, appointment), method: :delete, data: { confirm: 'Are you sure?' } %></td> 
```

**更新：**

另外，对于新的约会链接：

```
<%= link_to 'New Appointment', new_doctor_appointment_path(appointment.doctor) %> 
```

# python - 在特定范围python内随机播放列表

> ID：14428524
> 
> 赞同：8
> 
> 时间：2013-01-20T19:45:48.553
> 
> 标签：python, list, range, shuffle

我对 Python 很陌生，所以请耐心等待。我想运行一个程序，它将在特定范围内打乱一串整数，但不必输入该范围内的每个整数。即，我想在不输入 (1, 2, 3...100) 的情况下随机化整数列表 b/w 1-100。

是的，我已经查看了类似问题的其他答案，但都要求特定范围内的一个整数，或者没有针对 Python 的答案，或者要求更复杂的东西。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-20T19:47:24.557

您可以使用`range()`with`list()`来生成整数列表，然后应用于`random.shuffle()`该列表。

```
>>> lst = list(range(1,11))
>>> lst
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> random.shuffle(lst)
>>> lst
[4, 5, 3, 9, 2, 10, 7, 1, 6, 8] 
```

* * *

`range`模块内置类的帮助：

```
class range(object)
 |  range(stop) -> range object
 |  range(start, stop[, step]) -> range object
 |
 |  Return an object that produces a sequence of integers from start (inclusive)
 |  to stop (exclusive) by step.  range(i, j) produces i, i+1, i+2, ..., j-1.
 |  start defaults to 0, and stop is omitted!  range(4) produces 0, 1, 2, 3.
 |  These are exactly the valid indices for a list of 4 elements.
 |  When step is given, it specifies the increment (or decrement). 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-20T19:58:36.887

如果您希望整个人口在给定范围内，正如@Ashwini 建议的那样，您可以使用[random.shuffle](http://docs.python.org/2/library/random.html#random.shuffle)

如果您对人口的一个子集感兴趣，您可以期待使用[random.sample](http://docs.python.org/2/library/random.html#random.sample)

```
>>> random.sample(range(1,10),5)
[3, 5, 2, 6, 7] 
```

您也可以使用它来模拟[random.shuffle](http://docs.python.org/2/library/random.html#random.shuffle)

```
>>> random.sample(range(1,10),(10 - 1))
[4, 5, 9, 3, 2, 8, 6, 1, 7] 
```

**注意**，使用 random.sample 优于 random.shuffle 的优点是，它可以在迭代器上工作，所以在

*   Python 3.X 你不需要转换`range()`为列表
*   在 Python 2,X 中，您可以使用`xrange`
*   相同的代码可以在 Python 2.X 和 3.X 中运行

# java - 从测试类外部将数据传递到 JUnit 测试类

> ID：14428525
> 
> 赞同：1
> 
> 时间：2013-01-20T19:46:01.297
> 
> 标签：java, junit

如何将数据传递到我以编程方式开始的测试类中

```
junitCore.run(MyAwesomeClass.class); 
```

我需要传入一些基于命令行输入构建的对象。我的程序是一个可执行的 jar。

关于我为什么要这样做的一点背景。我正在为我的 QA 人员编写一个命令行程序，以根据电子表格中的输入来驱动测试。我正在尝试测试一些混合了 Android 代码的代码，并且我想在 JVM 上运行它。为此，我使用 Robolectric 填充存根以便我可以运行，但需要注意的是，您必须使用他们的 JUnit 测试运行器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:38:50.547

您想要的实际上并不是 JUnit 应该使用的方式，因为测试类应该是完整的可运行测试代码。

但是，您始终可以在运行测试类之前使用静态初始化来实现您想要的，例如：

```
MyAwesomeClass.prepare(myParameter);
junitCore.run(MyAwesomeClass.class); 
```

例如：

```
public class Test2 {
    private static int param;
    public static void prepare(int param) {
        Test2.param = param;
    }

    @Test public void test() {
        Assert.assertEquals(param, 2);
    }

    public static void main(String[] args) {
        JUnitCore jUnitCore = new JUnitCore();
        Test2.prepare(2);
        jUnitCore.run(Test2.class);
    }
} 
```

# iphone - cellForRowAtIndexPath 中的 rowHeight 不变

> ID：14428526
> 
> 赞同：0
> 
> 时间：2013-01-20T19:46:10.083
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview

我对 rowHeight 有疑问，它似乎没有改变（尽管我在方法 heightForRow 中这样做......）

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if(indexPath.section == 0 && indexPath.row == 0) {
        return 80;
    } else
        return 0;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    [cell setSelectionStyle:UITableViewCellSeparatorStyleNone];

    // Configure the cell...

    if(indexPath.section == 0 && indexPath.row == 0) {

        NSLog(@"frame.size.height: %f rowHeight: %f", cell.frame.size.height, tableView.rowHeight);
    }

    return cell;
} 
```

它表示两个值都是 44.0000：cell.frame.size.height 和 rowHeight。

以下是我如何在 navcontroller 中初始化此表：

```
DPSettingsInformations *settingsInformations = [[DPSettingsInformations alloc] initWithStyle:UITableViewStyleGrouped];
    [self.navigationController pushViewController:settingsInformations animated:YES]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:59:34.283

44 是默认高度，所以听起来好像您没有设置`UITableViewDelegate`.

`tableView:heightForRowAtIndexPath:`需要`UITableViewDelegate`设置。确保在 Nib、Storyboard 或代码中正确设置。通常您将它与`UITableViewDataSource`.

示例（如果在代码中设置）：

```
// UITableViewDataSource delegate
self.tableView.dataSource = self;
// UITableViewDelegate delegate
self.tableView.delegate = self; 
```

# .net - ClaimsAuthorize 动作和资源之间的关系

> ID：14428527
> 
> 赞同：0
> 
> 时间：2013-01-20T19:46:19.833
> 
> 标签：.net, claims-based-identity, claims

使用`ClaimsAuthorizeAttribute`（**.net4.5**）我可以定义所需的资源和操作，如下所示：

```
[ClaimsAuthorize("View", "Administration")] 
```

我还可以添加多个属性以获得更精细的权限

```
[ClaimsAuthorize("View", "Person")]
[ClaimsAuthorize("Edit", "Settings")] 
```

但在`CheckAccess`方法中，我有两个**单独**的集合，它们没有任何关系。

```
 public override bool CheckAccess(AuthorizationContext context)
        { 
```

所以我知道有“查看”和“编辑”，另一边是“个人”和“设置”

但是不知道是不是这个意思

“查看人员”或“查看设置”也不

“编辑人员”或“编辑设置”

如何处理？

我是否以不应该的方式使用资源和操作？（.net 4.5）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T08:10:34.467

`ClaimsAuthorize` is not part of .NET 4.5 - maybe you mean my version in `IdentityModel` ;)

When you have two attributes on e.g. a method - you will invoke `ClaimsAuthorizationManager` twice. Are you seeing something different?

Then there is a clear relationship between action and resource.

# sas - PROC IML - 矩阵作为频率交叉表

> ID：14428528
> 
> 赞同：1
> 
> 时间：2013-01-20T19:46:25.357
> 
> 标签：sas, crosstab

我需要使用 PROC IML 准备一个交叉表（我知道在这种情况下使用 PROC FREQ 更常见，但这是针对学校项目的，他们强迫我们使用 IML）。

数据集如下所示：

A 橙
B 苹果
C 橙
B 芒果
B 苹果

并且输出应该在列中包含 ORANGE APPLE MANGO，在行中包含 ABC，在矩阵中包含频率，基本上：

橙苹果芒果
A 1 0 0
B 0 2 1
C 1 0 0

**编辑添加：**

我正在接近解决方案，但在选择符合某些条件的行时仍然存在一些问题 - 代码中的“（...）”。您可以在下面找到我的想法：

```
PROC IML;
USE work.data;
    read all var {fruits } into fruits;
    read all var {names} into names;
    read all var {fruits names} into matrix;
close;
u1 = unique(fruits);
u2 = unique(names);
s = j(ncol(u2),ncol(u1),0);
do  i=1 to ncol(u1);
do  z=1 to ncol(u2);
    idx=loc(…);
s[z,i]=countn(idx);
end;
end;
print s; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:40:55.073

有几种方法可以做到这一点。既然是针对一堂课，我会提供提示，而不是提供完整的解决方案。

1）第一种方法是同时使用UNIQUE函数和LOC函数。这种所谓的“UNIQUE-LOC 技术”对于类别计算非常有用。[文章“ UNIQUE-LOC 技巧](http://blogs.sas.com/content/iml/2011/11/01/the-unique-loc-trick-a-real-treat/)”中展示了一个一维示例。我将把它留给您将其概括为交叉表。

2) 第二种方法是同时使用 SORT 和 UNIQUEBY 函数。第二种技术在文章“ [UNIQUE-LOC 技术的有效替代方案](http://blogs.sas.com/content/iml/2011/11/07/an-efficient-alternative-to-the-unique-loc-technique/)”中进行了描述。同样，我将留给你阅读这篇文章并弄清楚如何将它应用到你的课堂项目中。

我也可以告诉你哪种解决方案更容易......但我会让你做出决定。

祝你好运！

# machine-learning - 感知器训练 - delta 规则

> ID：14428529
> 
> 赞同：3
> 
> 时间：2013-01-20T19:46:45.260
> 
> 标签：machine-learning, artificial-intelligence, neural-network, perceptron

根据[wikipedia](http://en.wikipedia.org/wiki/Delta_rule)，使用 delta 规则，我们通过以下方式调整权重：

dw = alpha * (ti-yi)*g'(hj)xi

当 alpha = 学习常数时，ti - 真实答案，yi - 感知器的猜测，g' = 激活函数 g 相对于感知器输入的加权和的导数，xi - 输入。

在这个公式中我不明白的部分是乘以导数 g'。让 g = sign(x)（加权和的符号）。所以 g' 总是 0，并且 dw = 0。但是，在我在互联网上看到的代码示例中，作者只是省略了 g' 并使用了公式：

dw = alpha * (ti-yi)*(hj)xi

我会很高兴阅读正确的解释！

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T20:43:30.730

你是对的，如果你对激活函数使用阶跃函数`g`，梯度总是为零（0 除外），所以 delta 规则（又名梯度下降）什么都不做（`dw = 0`）。这就是为什么阶跃函数感知器不能很好地用于梯度下降的原因。:)

对于线性感知器，您将拥有`g'(x) = 1`, for `dw = alpha * (t_i - y_i) * x_i`。

您已经看到使用`dw = alpha * (t_i - y_i) * h_j * x_i`. 我们可以对这里发生的事情进行逆向工程，因为显然`g'(h_j) = h_j`，这意味着记住我们必须拥有的微积分`g(x) = e^x + constant`。显然，您找到的代码示例使用了指数激活函数。

这必须意味着神经元输出被限制为开启`(0, infinity)`（或者我猜`(a, infinity)`对于任何有限`a`的，对于`g(x) = e^x + a`）。我以前没有遇到过这种情况，但我在网上看到了一些参考资料。[Logistic](http://en.wikipedia.org/wiki/Sigmoid_function)或[tanh](http://en.wikipedia.org/wiki/Tanh#Standard_algebraic_expressions)激活对于有界输出（分类或已知边界的回归）更为常见。

# ruby - 具有 attr_accessor 的类上的 Ruby instance_eval

> ID：14428531
> 
> 赞同：6
> 
> 时间：2013-01-20T19:46:53.623
> 
> 标签：ruby, attr-accessor, class-eval, instance-eval

`instance_eval`我了解和之间的基本区别`class_eval`。我在玩耍时发现了一些奇怪的东西`attr_accessor`。这是一个例子：

```
A = Class.new
A.class_eval{ attr_accessor :x }

a = A.new
a.x = "x"
a.x
=> "x"  # ... expected

A.instance_eval{ attr_accessor :y }

A.y = "y"
=> NoMethodError: undefined method `y=' for A:Class

a.y = "y"
=> "y"      # WHATTT? 
```

这是怎么回事：

1.  instance_eval 没有访问我们的 A 类（对象）
2.  然后它实际上将它添加到 A 的实例中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T02:28:57.650

一开始，你的理解（或直觉）是正确的，里面定义的方法`#instance_eval`和`#class_eval`不一样

```
A = Class.new

A.instance_eval { def defined_in_instance_eval; :instance_eval; end }
A.class_eval { def defined_in_class_eval; :class_eval; end }

A.new.defined_in_class_eval # => :class_eval
A.defined_in_instance_eval # => :instance_eval 
```

*附注：虽然`self`两者相同`instance_eval`，`class_eval`但**默认定义**不同，请参阅[http://yugui.jp/articles/846](http://yugui.jp/articles/846)*

真正的诀窍是`Module#attr_accessor`它本身，看看它的定义： [http ://rxr.whitequark.org/mri/source/vm_method.c#620](http://rxr.whitequark.org/mri/source/vm_method.c#620)

它不使用`def`，不读取上下文`self`或默认定义者。它只是“手动”将方法插入到模块中。这就是为什么结果是违反直觉的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T00:56:20.893

`class_eval`和的区别`instance_eval`见[动态创建类方法](https://stackoverflow.com/questions/13866047/dynamically-creating-class-method/13870694#13870694)

```
class A; end
A.class_eval do
    attr_accessor :x
    def barx; end
    define_method :foox do; end
end

print 'A.instance_methods  : '; p A.instance_methods(false).sort
print 'A.singleton_methods : '; p A.singleton_methods

class B; end
B.instance_eval do
    attr_accessor :y
    def bary; end
    define_method :fooy do; end
end

print 'B.instance_methods  : '; p B.instance_methods(false).sort
print 'B.singleton_methods : '; p B.singleton_methods

class C; end
singleton_class = class << C; self end
singleton_class.instance_eval do
    attr_accessor :z
    def barz; puts 'where is barz ?' end
    define_method :fooz do; end
end

print 'C.instance_methods  : '; p C.instance_methods(false).sort
print 'C.singleton_methods : '; p C.singleton_methods

print 'singleton_class.barz : '; singleton_class.barz
print 'singleton_class.methods  : '; p singleton_class.methods(false) 
```

输出（红宝石 1.8.6）：

```
A.instance_methods  : ["barx", "foox", "x", "x="]
A.singleton_methods : []
B.instance_methods  : ["fooy", "y", "y="]
B.singleton_methods : ["bary"]
C.instance_methods  : []
C.singleton_methods : ["z", "z=", "fooz"]
singleton_class.barz : where is barz ?
singleton_class.methods  : ["barz"] 
```

正如您在 B 中看到的那样，尽管 instance_eval 通常创建单例方法，但显然`attr_accessor`并`define_method`强制定义实例方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T06:09:11.997

```
A.singleton_class.class_eval { attr_accessor :y }
A.y = 'y'
A.y 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T00:55:50.397

该方法`attr_accessor`是一种类方法，当在类的主体中调用时**，****访问**器方法会在该类的**实例**上定义。

 ****当你这样做时，你是在一个**类的****主体**`A.class_eval{...}`中调用它，所以它的**实例**被分配了访问器。 ****`A`**`a`******

 ******当你这样做时，你在一个**类的****非主体**中`A.instance_eval{...}`调用它，所以它的实例没有被分配访问器。 ****`A`****

 ****如果你这样做了，那么你就是在一个**类的****主体**`Class.class_eval{attr_accessor :z}`中调用它，所以它的**实例**例如将被分配访问器：。 ****`Class`**`A``A.z = ...`********************

# objective-c - 如何从类和选择器创建哈希？（目标 c）

> ID：14428535
> 
> 赞同：1
> 
> 时间：2013-01-20T19:46:59.597
> 
> 标签：objective-c, hash

我有一个字典，它使用类名和选择器的组合作为键来存储对象。我正在使用以下函数来计算哈希：

```
+(NSString*) getKeyForClass:(Class) clazz andSelector:(SEL) selector {
    return [NSString stringWithFormat:@"%@_%@",NSStringFromClass(clazz), NSStringFromSelector(selector)];
} 
```

在运行分析器时，我发现这个函数是计算的瓶颈。有没有更好（= 更有效）的方法来从类和选择器创建键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:16:22.003

几个备选方案。

## 继续使用字符串作为键，但速度更快：

使用字符串比你真正需要的要重一些，但它至少很简单。

使用`-[NSString stringByAppendingString]`会更快。解析格式字符串需要做很多工作。

```
return [[NSStringFromClass(clazz) stringByAppendingString:@"_"] stringByAppendingString:NSStringFromSelector(selector)]; 
```

使用单个`NSMutableString`而不是制作中间字符串可能会更好。配置文件并查看。

```
NSMutableString* result = [NSStringFromClass(clazz) mutableCopy];
[result appendString:@"_"];
[result appendString:NSStringFromSelector(selector)];
return result; 
```

## 使用自定义对象作为键：

您可以将自定义对象作为引用类和选择器的键。在它上面实现`NSCopying`and `-isEqual:`，`-hash`所以你可以将它用作字典中的键。

```
@interface MyKey : NSObject <NSCopying>
{
    Class _clazz;
    SEL _selector;
}

- (id)initWithClass:(Class)clazz andSelector:(SEL)selector;

@end

@implementation MyKey

- (id)initWithClass:(Class)clazz andSelector:(SEL)selector
{
    if ((self = [super init])) {
        _clazz = clazz;
        _selector = selector;
    }
    return self;
}

- (id)copyWithZone:(NSZone*)zone
{
    return self; // this object is immutable, so no need to actually copy it
}

- (BOOL)isEqual:(id)other
{
    if ([other isKindOfClass:[MyKey class]]) {
        MyKey* otherKey = (MyKey*)other;
        return _clazz == otherKey->_clazz && _selector == otherKey->_selector;
    } else {
        return NO;
    }
}

// Hash combining method from http://www.mikeash.com/pyblog/friday-qa-2010-06-18-implementing-equality-and-hashing.html
#define NSUINT_BIT (CHAR_BIT * sizeof(NSUInteger))
#define NSUINTROTATE(val, howmuch) ((((NSUInteger)val) << howmuch) | (((NSUInteger)val) >> (NSUINT_BIT - howmuch)))

- (NSUInteger)hash
{
    return NSUINTROTATE([_clazz hash], NSUINT_BIT / 2) ^ (NSUInteger)_selector;
}

@end

+ (MyKey*)keyForClass:(Class)clazz andSelector:(SEL)selector
{
    return [[MyKey alloc] initWithClass:clazz andSelector:selector];
} 
```

## 消除中间人：

如果您永远不需要将类和选择器从关键对象中拉出，那么您可以使用上面计算的哈希值，存储在`NSNumber`.

```
// Hash combining method from http://www.mikeash.com/pyblog/friday-qa-2010-06-18-implementing-equality-and-hashing.html
#define NSUINT_BIT (CHAR_BIT * sizeof(NSUInteger))
#define NSUINTROTATE(val, howmuch) ((((NSUInteger)val) << howmuch) | (((NSUInteger)val) >> (NSUINT_BIT - howmuch)))

+ (NSNumber*)keyForClass:(Class)clazz andSelector:(SEL)selector
{
    NSUInteger hash = NSUINTROTATE([clazz hash], NSUINT_BIT / 2) ^ (NSUInteger)selector;
    return [NSNumber numberWithUnsignedInteger:hash];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:59:01.660

`SEL`s 本身是独一无二的；您可以使用`NSValue`并包装：

```
[NSValue valueWithBytes:&selector objCType:@encode(SEL)]; 
```

# django - 带有 GAE 设置的 Django 中的 SMTPException

> ID：14428536
> 
> 赞同：0
> 
> 时间：2013-01-20T19:46:58.877
> 
> 标签：django, google-app-engine, smtp, smtp-auth

我正在尝试用我的 django 项目设置 Django 邀请。它将部署在 Google App Engine 和 Google Cloud SQL 上。现在我有这个问题“服务器不支持 SMTP AUTH 扩展”。

这是settings.py

```
DEFAULT_FROM_EMAIL='username@gmail.com'
EMAIL_PORT = '587'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'username@gmail.com'
EMAIL_HOST_PASSWORD = 'password'
EMAIL_USE_TLS = True 
```

我正在等待您的惊人建议。

**已编辑**

如果我从 settings.py 中删除邮件设置，我将收到以下错误：

```
SMTPServerDisconnected: please run connect() first 
```

**已编辑**

我的 django 项目开发需要什么配置，GAE（Google App Engine）的生产部署需要什么配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:08:14.887

GAE 带有自己的内部邮件发送基础设施。您不能定义自己的 SMTP 服务器。

# cuda - gpuocelot 是否支持 CUDA 设备中的动态内存分配？

> ID：14428544
> 
> 赞同：0
> 
> 时间：2013-01-20T19:47:49.170
> 
> 标签：cuda, nvidia, dynamic-memory-allocation, gpu

我的算法（并行多前高斯消除）需要在 CUDA 内核中动态分配内存（树构建）。有谁知道 gpuocelot 是否支持这些东西？

根据这个：[stackoverflow-link](https://stackoverflow.com/questions/4715238/cuda-allocate-memory-in-device-function)和CUDA编程指南我可以做这样的事情。但是使用 gpuocelot 我会在运行时出错。

**错误：**

1.  当我`malloc()`在内核内部调用时，出现此错误：

    ```
    (2.000239) ExternalFunctionSet.cpp:371：断言消息：从 PTX 调用外部主机函数需要 LLVM。
    求解器：ocelot/ir/implementation/ExternalFunctionSet.cpp:371: void ir::ExternalFunctionSet::ExternalFunction::call(void*, const ir::PTXKernel::Prototype&): Assertion false' 失败。
    ```

2.  当我尝试获取或设置 malloc 堆大小（在主机代码内）时：

    ```
    求解器：ocelot/cuda/implementation/CudaRuntimeInterface.cpp:811: virtual cudaError_t cuda::CudaRuntimeInterface::cudaDeviceGetLimit(size_t*, cudaLimit): Assertion '0 && "unimplemented"' 失败。
    ```

也许我必须（以某种方式）指向我想使用 device 的编译器`malloc()`？

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:51:21.097

您可以在 gpu ocelot 邮件列表中找到答案：

[gpuocelot 邮件列表链接](https://groups.google.com/d/topic/gpuocelot/XU-LcwXdHG8/discussion)

# java - 将对象添加到对象数组中

> ID：14428546
> 
> 赞同：1
> 
> 时间：2013-01-20T19:47:58.033
> 
> 标签：java, oop, object

我正在构建一个模拟潜水比赛的程序。我有一个`Athlete`基本上试图访问另一个类中的数组元素的类。有人知道我如何访问数据吗？

这是`Athlete`课程：

```
public class Athlete {

    public static String[] name = { "Art Class", "Dan Druff", "Jen Tull" };
    public static String[] country = { "Canada", "Germany", "USA" };
    Performance[] performance = new Performance[2];

    public Athlete(String[] name, String[] country) {
        this.name = name;
        this.country = country;
        // this.event = event;
    }

    public void perform() {
        Dive mydive = new Dive(Dive.diveName, Dive.difficulty);
        Performance event = new Performance(event.dive, Performance.judgeScores);
        performance[0] = event(event.dive.diveNames[0], event.judgeScores); // here
        performance[1] = event; // Here
        performance[2] = event; // Here
    }

    public void printResults() {
    }
} 
```

用“//Here”指示的地方我试图从下面显示的类中访问数据，我想知道我该怎么做？

表现：

```
public class Performance {

    Dive dive = new Dive(Dive.diveName, Dive.difficulty);
    public static float[] judgeScores = new float[7];

    public Performance(Dive dive, float[] judgeScores) {
        this.dive = dive;
        // this.dive=difficulty;
        this.judgeScores = judgeScores;
        // this.judgeScores = judgeScores;
    }
} 
```

潜水：

```
import java.util.Random;

public class Dive {
    public static String diveName;
    public static int difficulty;

    public static final String[] diveNames = { "reverse pike", "forward pike",
            "reverse armstand with double somersault", "reverse triple twist",
            "double forward with triple somersault", "cannon ball" };
    public static final int[] diveDifficulties = { 3, 2, 2, 4, 4, 1 };

    public static Dive chosenRandomly() {
        Random rand = new Random();
        int num = rand.nextInt(6) + 1;
        String diveName = diveNames[num];
        int difficulty = diveDifficulties[num];

        Dive dive = new Dive(diveName, difficulty);
        return dive;
    }

    public Dive(String diveName, int difficulty) {
        this.diveName = diveName;
        this.difficulty = difficulty;
    }
} 
```

我的构造函数都错了吗？

***PS：***这是作业，所以有些人可能不认为我的方法是解决问题的合适方法，但请记住我正在按照说明进行操作。

提前感谢您的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:54:50.860

通常这不是从其他类（甚至是公共）访问字段的好主意。您应该为您的数组字段创建[吸气剂并访问它们。](https://stackoverflow.com/questions/2036970/tutorial-on-getters-and-setters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:56:35.193

假设您正在一个名为 Javadir 的目录中工作，并且您创建了四个文件，其内容如下所示。

文件 1

```
package ListPkg;
public class List { ... }
class ListNode {...} 
```

文件 2

```
package ListPkg;
public class NoNextItemException { ... } 
```

文件 3

```
public class Test { ... }
class Utils { ... } 
```

文件 4

```
class Test2 { ... } 
```

以下是您必须使用的目录和文件名：

文件 1 必须位于名为 ListPkg 的子目录中，位于名为`List.java`.

文件 2 还必须位于 ListPkg 子目录中的一个名为`NoNextItemException.java`.

文件 3 必须位于名为`Test.java`（在 Javadir 目录中）的文件中。

文件 4 可以在任何 .java 文件中（在 Javadir 目录中）。

有关更多指南，请阅读[有关 java 包的注释](http://pages.cs.wisc.edu/~hasti/cs368/JavaTutorial/NOTES/Packages.html)

# ruby-on-rails - 了解如何通过 Postgres/rails 解释数据优化查询

> ID：14428547
> 
> 赞同：3
> 
> 时间：2013-01-20T19:47:59.750
> 
> 标签：ruby-on-rails, postgresql, postgresql-9.1

我有以下查询：

```
c = Invite.where(:invite_method => 'email', :email => email, :created_at => Time.zone.now.beginning_of_day..Time.zone.now.end_of_day).count 
```

此查询需要一些时间，因为该表有 1m+ 条记录。这是查询输出：

```
> invites_sent_today = Invite.where(:invite_method => 'email', :email => email, :created_at => Time.zone.now.beginning_of_day..Time.zone.now.end_of_day).exp 

Invite Load (62.3ms)  SELECT "invites".* FROM "invites" WHERE "invites"."invite_method" = 'email' AND "invites"."email" = 'santa@site.com' AND ("invites"."created_at" BETWEEN '2013-01-20 00:00:00.000000' AND '2013-01-20 23:59:59.999999')

EXPLAIN (2.2ms)  EXPLAIN SELECT "invites".* FROM "invites" WHERE "invites"."invite_method" = 'email' AND "invites"."email" = 'santa@site.com' AND ("invites"."created_at" BETWEEN '2013-01-20 00:00:00.000000' AND '2013-01-20 23:59:59.999999')

=> EXPLAIN for:

SELECT \"invites\".*
  FROM \"invites\"
 WHERE \"invites\".\"invite_method\" = 'email' 
   AND \"invites\".\"email\" = 'santa@site.com'
   AND (\"invites\".\"created_at\"
    BETWEEN '2013-01-2000:00:00.000000'                                                             
       AND'2013-01-20 23:59:59.999999'
      ;

QUERY PLAN\n------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 
Index Scan using index_invites_on_created_at on invites  (cost=0.00..17998.11 rows=2 width=129)\n   
Index Cond: ((created_at >= '2013-01-20 00:00:00'::timestamp without time zone) AND (created_at <= '2013-01-20 23:59:59.999999'::timestamp without time zone))\n   
Filter: (((invite_method)::text = 'email'::text) AND ((email)::text = 'santa@site.com'::text))\n(3 rows)\n" 
```

有关如何提高此查询性能的任何建议？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:25:41.223

按照 Igor 的建议，尝试使用复合索引：

```
CREATE INDEX index_invites_email_created_at on invites(email,created_at); 
```

# asp.net - paypal 立即购买按钮流程

> ID：14428550
> 
> 赞同：0
> 
> 时间：2013-01-20T19:48:43.803
> 
> 标签：asp.net, redirect, paypal

我通过“立即购买”按钮将贝宝付款添加到我的网站，据我了解，它会向贝宝发布表格，然后用户在贝宝的网站上完成付款。

在使用 IPN 监听器确认付款后处理订单，但我也喜欢在订购时在我们的服务器上进行一些处理。是否可以先将“立即购买”按钮提交到我们自己的服务器，以便我可以记录订单，然后再重定向到贝宝以获取付款详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:21:47.863

您在这里有两个选择。

第一个更简单但如果用户没有 javascript 可能会失败的选项是**使用 ajax 向您的服务器发布您喜欢的数据**，并且只有在返回后您才能让用户继续提交。

第二种选择是将您的数据发布到您的服务器上的代码后面，在那里您准备一个带有自动提交到贝宝的简单页面 - 实际上您**使用 post 进行重定向**。在这里你可以找到源代码和一个如何制作它的例子：

[http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET](http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:30:34.403

事实上，你有很多选择。

正如您所说，“立即购买”按钮只不过是 PayPal 的一个表单帖子。[您可以使用它们的任何标准变量](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/Appx_websitestandard_htmlvariables)来构建自己的表单，而不仅限于这些按钮。他们称之为[购物车上传方法](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/cart_upload)。

使用这种方法，您可以在将用户发送到 PayPal 之前执行您需要执行的任何本地处理。在您自己的系统中创建某种订单记录是一种很好的做法，然后您可以将其包含在您的 PayPal 付款信息中。相同的值将在 IPN 中返回，因此您也可以在付款后处理它。

另一个让您更加开放的选择是使用[Express Checkout API](https://www.x.com/developers/paypal/development-and-integration-guides#ec)。这使您可以完全控制结帐系统，并且具有比标准付款更多的功能。如果您熟悉 Web 服务 API，我建议您这样做。

当然，IPN 也适用于 Express Checkout，因此您仍然可以将它用于您想要/需要的任何东西。

# java - 尝试向 SQLite 数据库创建/添加数据时出错

> ID：14428555
> 
> 赞同：0
> 
> 时间：2013-01-20T19:49:21.200
> 
> 标签：java, android, sqlite

当我尝试向我的 SQLite 数据库创建/添加数据时，我遇到了很多错误，但不知道为什么它看起来对我应该有用。代码在下面，并在下面发布错误。提前一百万感谢您的帮助。

```
enter code here
public class MyActivity extends Activity
{
   @Override
   public void onCreate(Bundle savedInstanceState)
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      //create an instance of the PlayerDatabase class and pass this context through parameters;
      PlayerDatabase playerProfile = new PlayerDatabase(this);

      try
      {
         //open the database;
         playerProfile.open();
      }//try;
      catch (SQLException e)
      {
         //print description of the error;
         e.printStackTrace();
      }//catch;

      //insert data into the table;
      playerProfile.createInsert("Player", "Connor", "5", "1234");
      //close the database;
      playerProfile.close();
   }//onCreate;
}//class;

public class PlayerDatabase
{
   public static final String KEY_PLAYER = "Player";
   public static final String KEY_NAME = "Name";
   public static final String KEY_GUESSES = "NumberOfGuesses";
   public static final String KEY_NUMBER= "NumberToGuess";

   private static final String DATABASE_NAME = "PlayerData.db";
   private static final String DATABASE_MARKSTABLE = "PlayerData";
   private static final int DATABASE_VERSION = 1;

   //create instance of DbHelper class called ourHelper;
   private DbHelper ourHelper;
   //create a context called ourContext;
   private final Context ourContext;
   //create an instance of SQLiteDatabase called ourDatabase to be the database;
   private SQLiteDatabase ourDatabase;

   //constructor to pass through context;
   public PlayerDatabase(Context c)
   {
      ourContext = c;
   }//constructor;

   //open the database;
   public PlayerDatabase open()throws SQLException
   {
      //finish creating the instance of the DbHelper class;
      ourHelper = new DbHelper(ourContext);
      //create database;
      ourDatabase = ourHelper.getWritableDatabase();
      return this;
   }//open;

   //close the database;
   public void close()
   {
      ourHelper.close();
   }//close;

   //insert data into the database;
   public long createInsert(String player, String name, String guesses,
                        String number)
   {
      // TODO Auto-generated method stub
      ContentValues cv = new ContentValues();
      cv.put(KEY_PLAYER, player);
      cv.put(KEY_NAME, name);
      cv.put(KEY_GUESSES, guesses);
      cv.put(KEY_NUMBER, number);
      return ourDatabase.insert(DATABASE_MARKSTABLE, null, cv);
   } //createInsert;

   //DbHelper class within PlayerDatabase class;
   private static class DbHelper extends SQLiteOpenHelper
   {

      public DbHelper(Context context)
      {
         super(context, DATABASE_NAME, null, DATABASE_VERSION);
         // TODO Auto-generated constructor stub
      }//DbHelper constructor;

      //when DbHelper is first created it will create this table;
      @Override
      public void onCreate(SQLiteDatabase db)
      {
         // TODO Auto-generated method stub
         db.execSQL(" CREATE TABLE " + DATABASE_MARKSTABLE + " (" +
             KEY_PLAYER + " TEXT PRIMARY KEY, " +
             KEY_NAME + " TEXT NOT NULL, " +
             KEY_GUESSES + " TEXT NOT NULL, " +
             KEY_NUMBER + " TEXT NOT NULL);"
         );
      }//DbHelper onCreate;

      //only used when database is upgraded;
      @Override
      public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
      {
         // TODO Auto-generated method stub

         db.execSQL("DROP TABLE IF EXISTS " + DATABASE_MARKSTABLE);
         onCreate(db);
      }//DbHelper onUpgrade;
    } //class DbHelper;
}//class; 
```

**这是错误报告**

```
12-27 13:15:43.549: ERROR/ActivityThread(6572): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cea8d8 that was originally bound here
        android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cea8d8 that was originally bound here
        at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
        at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
        at android.app.ContextImpl.bindService(ContextImpl.java:1418)
        at android.app.ContextImpl.bindService(ContextImpl.java:1407)
        at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
        at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
        at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
        at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
        at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
        at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
        at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
        at android.os.AsyncTask$2.call(AsyncTask.java:287)
        at java.util.concurrent.FutureTask.run(FutureTask.java:234)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
        at java.lang.Thread.run(Thread.java:856)
12-27 13:15:43.549: ERROR/StrictMode(6572): null
        android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cea8d8 that was originally bound here
        at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
        at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
        at android.app.ContextImpl.bindService(ContextImpl.java:1418)
        at android.app.ContextImpl.bindService(ContextImpl.java:1407)
        at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
        at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
        at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
        at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
        at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
        at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
        at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
        at android.os.AsyncTask$2.call(AsyncTask.java:287)
        at java.util.concurrent.FutureTask.run(FutureTask.java:234)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
        at java.lang.Thread.run(Thread.java:856)
12-27 13:15:43.739: ERROR/ActivityThread(6572): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cd08b0 that was originally bound here
        android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cd08b0 that was originally bound here
        at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
        at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
        at android.app.ContextImpl.bindService(ContextImpl.java:1418)
        at android.app.ContextImpl.bindService(ContextImpl.java:1407)
        at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
        at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
        at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
        at com.android.emailcommon.service.AccountServiceProxy.getDeviceId12-27 13:24:07.950: ERROR/StrictMode(6572): null
12-27 13:24:10.041: ERROR/ThrottleService(6245): problem during onPollAlarm: java.lang.IllegalStateException: problem parsing stats: java.io.FileNotFoundException: /proc/net/xt_qtaguid/iface_stat_all: open failed: ENOENT (No such file or directory) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:18:02.510

您看到的错误来自 Android 中的内置电子邮件应用程序。它似乎有一个泄漏的`ServiceConnection`，并且您在 LogCat 中看到了一些错误。这与您的应用程序完全无关，您可以放心地忽略它。

将来，您可以尝试使用您的应用程序进程 ID 过滤 logcat，以便仅显示来自您的应用程序的消息，并隐藏此类可能导致误报的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T09:25:36.440

这个问题是因为你的 android emolator 无法获取 ID 的交换服务。您应该设置-> 应用程序-> 所有应用程序-> 并从那里禁用交换服务。

希望问题的答案。

# pascal - 是否可以只读取/写入文件打开一次？

> ID：14428556
> 
> 赞同：2
> 
> 时间：2013-01-20T19:49:27.390
> 
> 标签：pascal, freepascal

是否可以仅使用 1 个 assign() 从文件读取和写入文件？

我的意思是：

```
assign(fl, 'file.txt');
reset(fl) 
// I know, that when I use reset - I have only read permission, 
// but is there any other option to read and write opening the file only once?
read(fl, variable);
write(fl, 'asdf);
close(fl); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T22:03:03.380

`Reset`不授予您只读权限；默认是读/写 ( `FileMode = 2`)，至少在 Delphi 的 Pascal 中是这样，并且 FP 与它非常兼容。

从关于[`FileMode`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.FileMode)（**强调我**的）的帮助主题：

> 指示重置过程打开的类型和非类型文件的访问模式。
> 
> 在 Delphi 代码中，FileMode 确定使用 Reset 过程打开有类型和无类型文件（不是文本文件）时使用的访问模式。
> 
> 可以分配给 FileMode 变量的文件打开模式在 System.SysUtils 的常量列表中定义。**默认的 FileMode 是 2（读/写访问）。**为 FileMode 分配另一个值会导致所有后续重置使用该模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:39:13.160

由于您的问题很笼统，因此您没有说明文件中将存储哪种数据。如果您将文件定义为“TRecord 文件”（您必须先定义您的记录类型），那么首先您“重置”文件以打开它；之后，您可以使用预定义的过程“seek”在文件中查找特定记录，将数据读入 TRecord 类型的局部变量，更改该记录，然后将其写回文件。文件的当前位置将是您刚刚阅读的记录的位置。

读取和写入文本文件更加棘手 - 存在预定义的过程“附加”，它允许将文本添加到文件的末尾（但不在中间）。

三十年前，我曾经使用这样的系统来创建自己的数据库；幸运的是，现在数据库编程要简单得多。

# ruby-on-rails - 没有 http 请求的 Ruby on rails

> ID：14428558
> 
> 赞同：0
> 
> 时间：2013-01-20T19:49:27.673
> 
> 标签：ruby-on-rails, webserver, server-side

我目前正在开发一个服务器，它可以通过互联网从我拥有的特定设备获取数据并将其记录到数据库中。不幸的是，我无法控制此设备的通信方式。

目前我设置了一个 IP 地址和一个端口号，设备将打开一个套接字并发送一个字符串。我真的不想从头开始开发服务器，我更喜欢基于 Web 服务器。但数据是纯字符串，而不是完整的 http 请求。

有没有办法使用 Ruby on rails 解决它？是否可以使用其他基于 Web 服务器的技术？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:21:08.690

听起来像是一个[node.js](http://nodejs.org/)有用的应用程序，如果你想要一个预制的 node+rails 应用程序，它会做你想做的事，请查看[本文](https://stackoverflow.com/questions/3527482/ruby-on-rails-and-node-js)中提到的[GitHub 上的化合物](https://github.com/1602/compound)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:52:35.673

您可以只使用普通的旧 ruby​​ 套接字来接收字符串。

# datetime - 如何将 SWT DateTime 控件添加到 JPanel？

> ID：14428559
> 
> 赞同：0
> 
> 时间：2013-01-20T19:49:29.373
> 
> 标签：datetime, swt, jpanel

我有一个包含两个 JPanel 的 JDialog。我想向 JPanel 添加一个 DateTime 选择器。我一直在尝试使用可以运行的 SWT DateTime；但是，它显示在我的 JDialog 之外。我想不出将 DateTime 嵌入 JPanel 的方法。我试过`jpanelname.add(datetimename)`了，但是 Eclipse 拒绝了，想要一个“组件”。SWT 确实似乎很难集成（可能只有我一个人！）。也许 DateTime 选择器的另一个来源会更容易实现。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:13:59.443

听起来您正在寻找[SWT_AWT 桥](http://www.eclipse.org/articles/article.php?file=Article-Swing-SWT-Integration/index.html)，特别是`new_Shell(Display, Canvas)`。

看看[这里](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/awt/SWT_AWT.html)的 javadoc 。

# python - Flask-WTF 使用 input=submit 而不是 button type=submit

> ID：14428564
> 
> 赞同：7
> 
> 时间：2013-01-20T19:49:51.203
> 
> 标签：python, flask, wtforms, flask-wtforms

我想使用 Flask 的“SubmitField”

```
<button type="submit" title="Save this form"><span>Save</span></button> 
```

代替：

```
<input type="submit" title="Save this form" /> 
```

我在模板中打印出来：

```
{{ field(class=css_class, title=field.description, **kwargs) }} 
```

我猜我必须以某种方式修改 SubmitInput（SubmitField 后面的小部件），但我不确定如何准确地做到这一点，我是否必须以某种方式修改 __html__()？

**编辑：**

```
from flask.ext.wtf import Required, Length, EqualTo, Field, TextInput
from flask import Markup
class InlineButtonWidget(object):
    html = """
    <button type="submit" title="%s"><span>%s</span></button>
    """

    def __init__(self, input_type='submit'):
        self.input_type = input_type

    def __call__(self, field, **kwargs):
        kwargs.setdefault('id', field.id)
        kwargs.setdefault('type', self.input_type)
        if 'value' not in kwargs:
            kwargs['value'] = field._value()
        return HTMLString(self.html % (field.name, field.label ))

class InlineButton(Field):
  widget = InlineButtonWidget()
  def _value(self):
    if self.data:
        return u', '.join(self.data)
    else:
        return u''

class SignupForm(Form):
    name = TextField('Name', [Length(min=1, max=200)])
    submit = InlineButton('sign up') 
```

**我希望能够做到这一点：**

**submit = InlineButton({'name' : 'submit', 'title' : '今天注册有奖。', 'type' : 'submitfieldtype', 'textInsideSpan' : '保存当前工作' })**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T11:24:21.023

很简单，您可以创建像 InlineButtonWidget() 这样的新小部件，但我认为最好从表单中删除提交并在模板中使用它

```
<button type="submit" title="Save this form"><span>Save</span></button> 
```

当然，您也可以使用它：

```
{% for name, label in buttons %}
    <button type="submit" title="{{name}}"><span>{{name}}</span></button>
{% endfor %} 
```

示例小部件：

```
class InlineButtonWidget(object):
    html = """
    <button type="submit" title="%s"><span>%s</span></button>
    """

    def __init__(self, input_type='submit'):
        self.input_type = input_type

    def __call__(self, field, **kwargs):
        kwargs.setdefault('id', field.id)
        kwargs.setdefault('type', self.input_type)
        if 'value' not in kwargs:
            kwargs['value'] = field._value()
        return HTMLString(self.html % (field.name, field.lable )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T14:01:46.127

以下实现更通用。

```
from wtforms.widgets.core import html_params
from wtforms.widgets import HTMLString

class InlineButtonWidget(object):
    """
    Render a basic ``<button>`` field.
    """
    input_type = 'submit'
    html_params = staticmethod(html_params)

    def __call__(self, field, **kwargs):
        kwargs.setdefault('id', field.id)
        kwargs.setdefault('type', self.input_type)
        kwargs.setdefault('value', field.label.text)
        return HTMLString('<button %s>' % self.html_params(name=field.name, **kwargs))

class InlineSubmitField(BooleanField):
    """
    Represents an ``<button type="submit">``.  This allows checking if a given
    submit button has been pressed.
    """
    widget = InlineButtonWidget()

class SignupForm(Form):
    name = TextField('Name', [Length(min=1, max=200)])
    submit = InlineSubmitField('sign up') 
```

# python - 设置 UserProfile 值

> ID：14428565
> 
> 赞同：0
> 
> 时间：2013-01-20T19:49:54.747
> 
> 标签：python, django

我已经[按照文档中的说明](https://docs.djangoproject.com/en/1.4/topics/auth/#adding-userprofile-fields-to-the-admin)创建了我的 UserProfile 模型，但是如何传递要从我的视图中保存的值。这就是我的观点：

```
if request.method == 'POST':
    form = RegistrationForm(request.POST)
    if form.is_valid():
        now = timezone.now()
        user = User.objects.create(
            username     = form.cleaned_data['username'],
            first_name   = form.cleaned_data['username'],
            last_name    = form.cleaned_data['username'],
            email        = form.cleaned_data['email'],
            is_staff     = False,
            is_active    = False,
            is_superuser = False,
            last_login   = now,
            date_joined  = now
        )

    user.set_password(form.cleaned_data['password'])
    user.save() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:30:59.167

## 更新 1

由于您在模型上使用 post_save() 信号`User`来创建`UserProfile`对象，因此您可以在调用 user.save() 后访问新创建的配置文件用户

```
profile = user.get_profile()
profile.verified = False
profile.ip_address = get_client_ip()
profile.save() 
```

* * *

我假设，您`UserProfile`的`models.py`.

```
## Create a forms.py file inside your app and define an UserProfileForm similar to this

from django.forms import ModelForm

## using relative import because it's good practice, and I don't know what's name of your app
from .models import UserProfile

class UserProfileForm(ModelForm)
    class Meta:
        model = UserProfile
        exclude = ("user",)

## In views.py

if request.method == 'POST':
    form = RegistrationForm(request.POST)
    profile_form = UserProfileForm(request.POST)
    if form.is_valid() and profile_form.is_valid():
        now = timezone.now()
        user = User.objects.create(
            username     = form.cleaned_data['username'],
            first_name   = form.cleaned_data['username'],
            last_name    = form.cleaned_data['username'],
            email        = form.cleaned_data['email'],
            is_staff     = False,
            is_active    = False,
            is_superuser = False,
            last_login   = now,
            date_joined  = now
        )

    user.set_password(form.cleaned_data['password'])
    user.save()
    profile = profile_form.save(commit=False)
    profile.user = user
    profile.save() 
```

但是，我不明白为什么`RegistrationForm`即使在初始化和验证之后你也不使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:54:33.513

好吧，如果请求是 POST，则收集所有表单数据，您只需将其传递给字典即可将其传递回视图。

```
d=dict(username=form.cleaned_data["username"]), ... )
...
return render_to_resopnse("mytemplate.html", d, context_instance) 
```

# javascript - 重复区域中的jquery单击事件

> ID：14428569
> 
> 赞同：0
> 
> 时间：2013-01-20T19:50:12.747
> 
> 标签：javascript, jquery-plugins

我正在尝试通过将一些旧的 javascript 代码转换为 jQuery 语法来用 jQuery 进行自我教育，但我似乎遇到了一个绊脚石，我对这种语言不是很有经验，所以请对我放轻松.....哈哈。

我正在尝试将其转换为 jQuery：

```
function getData (id) {
    document.form1.numID.value = id;
    document.form1.submit();
} 
```

id 由 javascript onClick 事件传递，然后将其添加到隐藏字段并与表单一起提交。我遇到的问题是，当我将 jQuery 绑定到被点击的 div 的点击事件时，我只会让重复区域中的第一项工作，其余的什么都不做，我已经包含了我到目前为止收集的 jquery ，我假设它是因为 div 在重复区域内都被命名为相同？

```
$('#Editor').click(function () {
    var id = $('#this').attr('value');
    alert('You Clicked Edit Job '+id+'..!!');
}); 
```

我刚刚将这一点与警报相呼应，同时我想知道如何做到这一点，其余的我可以做的就是即使在谷歌搜索之后也无法解决这个问题。一旦我想到这一点，我就会将旧的 asp 应用程序转换为 ajax 事件。

`<div id="Editor" value="123">Some database info displayed on the page</div>`
`<div id="Editor" value="456">Some more data info displayed on the page</div>`
`<div id="Editor" value="789">Even more info displayed from the database</div>`

我已经从数据库中编辑了所有数据，这些 div 是根据从数据库返回的记录数创建的，我想将“值”传递到另一个页面，其中 id 用于获取单击的项目。希望这能更清楚地解释我的困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:05:23.487

id 应该是唯一的！在 DIV 中使用 value 属性不是标准的..

```
<div id="Editor">
    <div class="field" id="123">Some database info displayed on the page</div>
    <div class="field" id="456">Some more data info displayed on the page</div>
    <div class="field" id="789">Even more info displayed from the database</div>
</div>

 $('#Editor').click(function (e) {
        var id = $(e.target).attr('id');
        alert('You Clicked Edit Job '+id+'..!!');
    }); 
```

[http://api.jquery.com/category/events/event-object/](http://api.jquery.com/category/events/event-object/)

演示：http: [//jsfiddle.net/mnsJT/2/](http://jsfiddle.net/mnsJT/2/)

# wordpress - 自定义帖子类型子类别存档

> ID：14428571
> 
> 赞同：0
> 
> 时间：2013-01-20T19:50:32.287
> 
> 标签：wordpress, categories, custom-post-type

经过几天的搜索，现在对 WordPress 有点头疼。我在一个名为视频的新网站上有一个自定义帖子类型，我想要该网站上的一系列视频。我决定使用标准类别将这些视频组织到系列中。

所以，我的结构是：

视频（帖子类型）-> 系列（类别）-> 制作（子类别）。

就层次结构而言，我不知道哪个模板可以让我显示子类别中的所有帖子？我尝试了很多变化，但似乎没有一个有效。是的，我一直在研究模板层次结构。

也许我只是错过了显而易见的事情，但有谁知道显示这个子类别需要什么模板？每次有新系列要展示时，我都不想制作一个页面。

[更新]

因此，我已按照以下评论中的建议更改为自定义分类法。我已经设法将我的`making-of`类别中的帖子列表显示在列表中。这使用`taxonomy-$term.php`模板。

这显示在 url 中`mysite.com/series/making-of/`。

但是，我正在努力寻找一种方法来在单个页面上显示来自帖子类型的所有不同类别。我认为它只会使用该`taxonomy.php`文件，但这似乎不起作用。

我以为网址是`mysite.com/series/`

# c# - 如何为实现多个接口的类使用 RegisterType？

> ID：14428572
> 
> 赞同：1
> 
> 时间：2013-01-20T19:50:37.973
> 
> 标签：c#, .net, dependency-injection, castle-windsor

鉴于：

```
public interface IFeedOperations : IOperationsWithPreInstalledData
{
    ...
}

public class FeedOperations : IFeedOperations
{
} 
```

如何将 RegisterType 用于实现`IFeedOperations`AND 因此的类`IOperationsWithPreInstalledData`？

```
public class FeedsInstaller : IDependencyInstaller
{
    public void Install(IDependencyContainer container)
    {
        container.RegisterType(typeof(IFeedOperations), typeof(FeedOperations));
        container.RegisterType(typeof(IOperationsWithPreInstalledData), typeof(FeedOperations));
    }
} 
```

当前代码产生以下错误。如果我删除第二个 RegisterType ，那么当我调用`container.ResolveAll<IOperationsWithPreInstalledData>()`.

> 组件 ...Feeds.FeedOperations 无法注册。已经有一个具有该名称的组件。您是否想修改现有组件？如果不是，请确保指定一个唯一名称。

如果我删除第二个 RegisterType ，那么当我调用`container.ResolveAll<IOperationsWithPreInstalledData>()`. Castle Windsor 似乎没有看到实现的类`IFeedOperations`也实现了`IOperationsWithPreInstalledData`.

我如何向 Castle Windsor 注册我的实现类，以便它知道我的类实现了这两个接口——或者更确切地说，我的类可以解析任何一个接口。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T02:45:12.407

```
container.Register(Component.For<IFoo,IBar>().ImplementedBy<FooBar>()); 
```

# actionscript-3 - 如何在Flash中导入具有透明背景的图片

> ID：14428576
> 
> 赞同：0
> 
> 时间：2013-01-20T19:51:20.127
> 
> 标签：actionscript-3, flash, import

如何在 Flash 中为导入的图像制作透明背景，因为现在我导入了它并且图像周围有白框。

将图像添加到舞台的代码

```
var imageBD = (Math.floor(Math.random()*2))? new Trees() : new Rocks;
            var bitmap:Bitmap = new Bitmap();
            var BD:BitmapData = new BitmapData(imageBD.width, imageBD.height);
            BD.draw(imageBD);
            bitmap.bitmapData = BD;
            bitmap.width = mRadius * 2 * mToPx;
            bitmap.height = mRadius * 2 * mToPx;
            bitmap.x = pxStartX;
            bitmap.y = pxStartY;
            this.addChild(bitmap);
            obstacleImages.push(bitmap) 
```

因为我是喵，我不能发布图片，所以我给你一个图片链接：http://prntscr.com/pugdl

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:09:31.693

您需要明确告诉`BitmapData`( [docs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#BitmapData%28%29) ) 对象是透明的。

在您的情况下，请替换此行：

```
var BD:BitmapData = new BitmapData(imageBD.width, imageBD.height); 
```

...有了这个：

```
var BD:BitmapData = new BitmapData(imageBD.width, imageBD.height, true, 0x00000000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:15:04.337

确保图像本身具有透明度。这些图像的一般文件类型是**PNG**或**GIF**。

您无需为 Flash 执行任何操作即可找到透明度。

# php - 使用 PDO 的多插入中的基数违规

> ID：14428577
> 
> 赞同：0
> 
> 时间：2013-01-20T19:51:23.550
> 
> 标签：php, mysql, pdo

我正在尝试运行以下查询，它是一个多插入。一切似乎都很好，但它抛出了这个错误：

```
SQLSTATE[21000]: Cardinality violation: 1241 Operand should contain 1 column(s) 
```

我的代码如下

```
$report_categories=array(1,2,3);
$report_categories=array_unique($report_categories);    
$rowPlaces = '(' . implode(', ', array_fill(0, 2, '?')) . ')';
$allPlaces = implode(', ', array_fill(0, count($report_categories), $rowPlaces));

$add_report_types=$this->prepare("
    INSERT INTO report_types (
        report_id,
        category
    ) VALUES (
        " . $allPlaces . "
    )");

$i=1;
foreach($report_categories as $category_id){
    $add_report_types->bindValue($i, $report_id, PDO::PARAM_INT);
    $i++;
    $add_report_types->bindValue($i, $category_id, PDO::PARAM_INT);
    $i++;
}
$add_report_types->execute(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T21:42:15.683

您可能想在查询的值部分不带括号尝试：

```
$add_report_types=$this->prepare("
    INSERT INTO report_types (
        report_id,
        category
    ) VALUES " . $allPlaces); 
```

如果我理解正确，`$allPlaces`应该包含一个如下所示的字符串：

```
(?, ?), (?, ?), (?, ?) 
```

所以你希望你的查询看起来像：

```
INSERT INTO report_types (
    report_id,
    category
) VALUES (?, ?), (?, ?), (?, ?); 
```

[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

# format - postgreSQL 中保存表的格式

> ID：14428581
> 
> 赞同：1
> 
> 时间：2013-01-20T19:51:42.527
> 
> 标签：format, postgresql-9.2

Postgresql 中保存的模式和表的格式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:39:11.120

如果您使用`pg_dump`保存模式和表，您可以选择纯文本（默认）或一些适合输入的二进制格式- 您可以[在此处](http://www.postgresql.org/docs/9.2/static/app-pgdump.html)`pg_restore`阅读有关它们的所有信息。

# css - 动态 div 调整为静态 div

> ID：14428583
> 
> 赞同：0
> 
> 时间：2013-01-20T19:51:56.637
> 
> 标签：css, html, dynamic, static

我在使用动态 div 调整为静态 div 时遇到了一些问题。起初，我以为它只是 IE9 本身，但在 Chrome 和 Firefox 中测试后，我发现我遇到了更大的问题。

我想要做的是让左侧的动态 div 调整为右侧的静态 div，但是，我正在阅读使用 margin-left 和 margin-right 做的事情并没有正确处理它。

的HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<link href="css/base.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div class="container">
    <div class="Heading">aaaa</div>
    <div class="CharacterPanel"></div>
    <div class="content">aaa</div>
</div>

</body>

</html> 
```

CSS：

```
div.container {
overflow: hidden;
width: 100%;
height: 100%;
body {
background-color: #000000;
div.Heading {
border-top-style: solid;
border-width: thin;
border-color: #000000;
background-color: #808080;
width: 100%;
height: 45px;
float: left;
border-right-style: solid;
overflow: hidden;
margin-left: -151px;
}
div.content {
overflow: auto;
border-width: thin;
border-color: #000000;
width: 100%;
height: 500px;
float: left;
background-color: #808080;
border-top-style: solid;
border-right-style: solid;
margin-left: -151px;
display: inline;
position: relative;
}
div.CharacterPanel {
border-width: thin;
border-color: #000000;
float: right;
width: 150px;
height: 550px;
background-color: #808080;
border-top-style: solid;
text-align: center;
margin-left: 0px;
margin-right: 0px;
} 
```

问题发生在这 3 个特定的 div 标签上。查看 HTML 页面时，div 组合在一起，问题是由于 margin-left 设置为负数，它的作用就像整个 div 标签向左移动 151 像素，将所有字符封装到 151 像素为止关闭页面进入容器的隐藏溢出。

# google-drive-api - FDT - 使用 Google Drive 从不同计算机访问同一项目 - 错误“项目描述文件丢失”

> ID：14428585
> 
> 赞同：0
> 
> 时间：2013-01-20T19:52:00.980
> 
> 标签：google-drive-api, fdt

我正在使用 FDT 64 位的最新订阅版本（订阅，而不是免费版本）。我的 FDT 工作区和项目文件保存在我的 Google Drive 中。我正在尝试从两台计算机上处​​理同一个 FDT 项目：一台 Windows 7 台式机和一台新的 MacBook Pro。

免责声明：我是 FDT 的新手，因为我刚拿到 MacBook，我正在尝试从 FlashDevelop 迁移到 FDT，这样我就可以在我的台式机和笔记本电脑上拥有本机 IDE。

我在 Windows 7 桌面上浏览 FDT 教程时创建了该项目并开始着手处理它。编译，调试，一切都很好。我现在正在尝试打开该项目并从 MacBook 进行处理。启动 FDT 并在 Google Drive 中选择工作区（已完成同步）后，我可以在 FDT Explorer 中看到该项目，但如果我尝试通过双击它来打开它，则会出现错误：

“‘打开项目’遇到问题。‘我的项目’的项目描述文件 (.project) 丢失。此文件包含有关项目的重要信息。在恢复此文件之前，项目将无法正常运行。”

但是，显示隐藏文件并使用 Finder 浏览表明 .project 文件确实存在，以及项目文件夹中的所有其他文件。我比较了 PC 和 Mac 上文件的内容，它们看起来是一样的。

其他注意事项：台式机和 MacBook 都安装了 64 位版本的 FDT。

我想要的结果是轻松地从我的 Windows 桌面转移到我的 MacBook，并继续从事同一个项目。也许我在尝试使用 Google Drive 并将工作区设置为相同时做错了。请批评并告诉我我应该怎么做:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:08:27.710

在根据对我的问题的评论进行更多研究之后，我决定使用版本控制系统而不是网络驱动器。共享网络驱动器不是这样的正确工作流程，损坏的文件将始终是一个问题。我现在正在使用 BitBucket：[https ://bitbucket.org/](https://bitbucket.org/)

有关更多相关信息，请参见此处： [作为版本控制和异地备份的 DropBox](https://stackoverflow.com/questions/5891361/dropbox-as-version-control-and-offsite-backup/5892635#5892635)

更新：对于任何开始使用 Bit Bucket 的人，这就是我曾经开始使用的内容：

本教程：[http](http://www.youtube.com/watch?v=pp2S2lHjzZI) ://www.youtube.com/watch?v=pp2S2lHjzZI （适用于 Git Hub，但适用于 Bit Bucket）

我在 Windows 上使用 TortoiseGit，在 Mac 上使用 Tower。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:38:32.357

您应该在 Mac 上确认几件事以解决问题（在终端中）：

1.  检查文件是否存在`ls ~/Google\ Drive/[your_project]/.project`
2.  更改文件的文件权限`sudo chmod 0777 ~/Google\ Drive/[your_project]/.project`

# algorithm - 为什么运行 DFA 需要线性时间？

> ID：14428588
> 
> 赞同：1
> 
> 时间：2013-01-20T19:52:31.000
> 
> 标签：algorithm, complexity-theory, theory, dfa

我刚开始学习自动机。给定 DFA 似乎很容易理解，设计一个也不是太难。但我觉得很难证明事情......

任何人都可以为这个问题或一些提示提供非正式的证据吗？非常感谢！

PS：对不起，我没有说得很清楚。@Dan 所说的正是我的意思：

> 为什么要决定“给定一个字符串 w。自动机接受还是拒绝 w？”这个问题。可以在线性时间内完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T19:58:01.343

试着这样想：

1.  DFA 读取输入字符串中的每个字符多少次？
2.  在处理输入中的单个字符时，DFA 做了多少工作？

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T19:58:55.400

我猜你想知道为什么要决定“给定一个字符串 w。自动机接受还是拒绝 w？”这个问题。可以在线性时间内完成吗？

假设 w=a_1...a_n。从初始状态 q_0 开始并应用转换 \delta(q_0, a_1) = q_1，这会将您带到 q_1。现在，重复此操作 n 次，直到处理完最后一个字母。这是一个线性时间算法；）

# meteor - 是否有 Meteor template.ready，而不仅仅是 template.rendered？

> ID：14428589
> 
> 赞同：1
> 
> 时间：2013-01-20T19:52:34.470
> 
> 标签：meteor

如何知道模板中我关心的 dom 节点何时渲染。我希望能够使用 jQuery 或 template.find 选择它并修改它或附加回调？我一直在使用 Template.templateName.rendered，但它是命中注定的。有时即使渲染了模板，我想要的元素也没有插入到 dom 中。如果我在 template.rendered 中 setTimeout 2-3 秒，然后尝试选择一个元素，它几乎总是在那里，但这显然是一个杂项。

```
Template.templateName.rendered = ->
    # This is a kludge!
    wait 2000, =>
        $(window).resize =>
            # Neither of these selectors find anything without the wait
            $iframe = $(this.find('#embed-html iframe'))
            width = $('#embed-html').innerWidth()
            resizeIframe($iframe, width)
        $(window).resize() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T02:38:48.010

该`rendered`事件是执行此操作的正确方法，每次将模板插入 DOM 时都会触发该事件。您是否尝试过在没有 iframe 的情况下执行此操作？iframe 可能搞砸了，在这种情况下，您可以尝试使用本地文档源测试 iframe，以查看 iframe 的加载速度是否影响`find`方法返回元素的方式。

在与 DOM 交谈之前，您绝对不必等待任何事情，所以发生了一些奇怪的事情。

# android - ProgressDialog 不要在 AsyncTask 中关闭（）

> ID：14428593
> 
> 赞同：1
> 
> 时间：2013-01-20T19:52:41.330
> 
> 标签：android, android-asynctask, progressdialog

我想在 AsyncTask 中显示一个 ProgressDialog。这运行太棒了。但如果我打电话请不要跑`mLoginPD.dissmiss()`。`onPostExecute()`

ProgressDialog 始终在屏幕上。

这是我的代码：

```
SherlockActivity mActivity;
ProgressDialog mLoginPD;

public Task_Login(String name, String pass, SherlockActivity activity) {
    this.passwort = pass;
    this.benutzername = name;
    this.mActivity = activity;
}

protected void onPreExecute() {
    super.onPreExecute();

    mLoginPD = new ProgressDialog(mActivity);
    mLoginPD.show(mActivity, "Login", "Logge Spieler ein...");
}

protected void onPostExecute(Void result) {             
    Log.e("hello", "hello");

    mLoginPD.dismiss();
    mLoginPD.cancel();
    if(mLoginPD.isShowing()) {
        mLoginPD.dismiss();
    }
} 
```

onPostExecute() 调用。我可以在 LogCat 中看到“你好”。

（我有 doInBackground() 但我无关紧要）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:47:39.270

问题是您正在创建两个`ProgressDialog`对象。

这一行：

```
mLoginPD = new ProgressDialog(mActivity); 
```

创建一个对话框并将其分配给`mLoginPD`，但不显示它。

这一行：

```
mLoginPD.show(mActivity, "Login", "Logge Spieler ein..."); 
```

创建*另一个*对话框并显示该对话框。问题是这`show()`是一种静态方法，它可以在一个整体中创建并显示一个对话框。所以它正在创建第二个独立`mLoginPD`的显示。`mLoginPD`从未显示，因此调用`dismiss()`或`cancel()`不执行任何操作。

你需要做的是：

```
mLoginPD = ProgressDialog.show(mActivity, "Login", "Logge Spieler ein..."); 
```

代替这两条线。这用于`show()`创建和显示对话框并将其分配给`mLoginPD`以便您以后可以将其关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T20:31:35.287

如果您要覆盖 onPreExecute，我认为您不应该调用 super.onPreExecute()？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:59:20.167

Geobits 的答案也在运行。总是显示一个`NullPointerException`.

这是解决我的问题的代码：

```
mLoginPD = new ProgressDialog(mActivity);
mLoginPD.setTitle("Login");
mLoginPD.setMessage("Logge Spieler ein...");
mLoginPD.show(); 
```

我不能打电话`mLoginDP.dismiss()`或`cancel()`打电话`onPostExecute()`

# mysql - 时间戳比较器

> ID：14428597
> 
> 赞同：1
> 
> 时间：2013-01-20T19:53:05.790
> 
> 标签：mysql, time, comparison

我希望有人可以帮助处理似乎并没有完全按照我需要的方式执行的 MySQL 查询。

客户要求我改进他们网站登录页面的更新系统。目前，更新系统允许他们提供`2`有关站点最近更改的快速行条目。他们这样做是将数据输入 HTML 表单并将数据加载到 MySQL 数据库中。

目前，该系统仅使用“已创建”列，该列`TIMESTAMP`设置为`CURRENT_TIMESTAMP`. 我在表中添加了一个名为 postdate 的列。Postdate 对 null 友好`TIMESTAMP`，通过`PHP`和设置值`HTML`。

到目前为止，这一切都相当简单（并且特定于我的项目）。这对我来说很奇怪：

给定表格规格为：

```
CREATE TABLE `updates` (
  `update` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) DEFAULT NULL,
  `comment` text,
  `created` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `status` int(11) DEFAULT '1',
  `gallery` int(11) DEFAULT NULL,
  `website` int(11) DEFAULT NULL,
  `covers` int(11) DEFAULT NULL,
  `resume` int(11) DEFAULT NULL,
  `calendar` int(11) DEFAULT NULL,
  `postdate` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`update`)
) ENGINE=InnoDB 
```

为什么要查询：

```
select updates.name, updates.comment, updates.status, updates.gallery, updates.website, 
                    updates.covers, updates.resume, updates.calendar, 
                    ifnull(postdate, updates.created) as `created`
                from angela.updates
                where updates.status = 1
                and updates.created <= now()
                order by `updates`.`created` desc
        limit 15; 
```

返回以下时间戳顺序：

```
2012-10-15 00:00:00
2013-12-25 00:00:00
2012-12-25 00:00:00
2013-02-01 00:00:00
2013-01-20 13:48:48
2013-01-20 13:36:44
2013-01-20 12:59:57
2013-01-20 12:56:35
2013-01-20 12:49:20
2012-10-29 11:00:12
2012-10-24 14:10:13
2012-08-14 23:53:53
2012-08-14 23:53:18
2012-08-14 23:50:34
2012-08-14 23:50:08 
```

请注意，从 Postdate 列中提取没有特定时间的行，而从 Created 列中提取具有特定时间值的值。

MySQL 时间比较肯定有某种微妙之处，我只是在这里没有理解。

任何帮助将不胜感激，我为此放弃了互联网。

# php - MySQL：通过用户名获取结果

> ID：14428599
> 
> 赞同：0
> 
> 时间：2013-01-20T19:53:21.767
> 
> 标签：php, mysql

您好我正在尝试通过用户名获取一个用户个人资料字段值（捐赠按钮代码）。这是表格

![在此处输入图像描述](../Images/5778e965ce4bda8126b3327315b2b883.png)

由于我对 MySQL 和学习没有多少经验，所以我尝试了很少的条件，但不知何故，我无法理解如何使用 userprofile 表检查用户名并获取捐赠内容。

```
SELECT ^users.userid, ^users.handle, ^userprofile.title, ^userprofile.content 
FROM ^users, ^userprofile
WHERE ^userprofile.userid=^users.handle AND title= 'donation' 
```

并尝试使用`echo $donation['content']`

但是我当然知道查询语句不对，但是现在我不知道该怎么写。请帮我。

**注意：^ 只是数据库前缀**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:58:23.350

您需要做的是执行[表连接](http://dev.mysql.com/doc/refman/5.0/en/join.html)。

（从技术上讲，您正在使用 FROM 字段中的逗号执行连接，但是在查询中指定一种连接类型是明智的，如果不仅仅是为了可读性）。

可能会有更多的结果，而不是只有一个，比如说如果用户提供了多次捐款。在任何情况下，您都需要从查询结果中获取行（我不知道您是否这样做，因为您没有发布足够的代码）。因为您要从多个表中获取结果，所以打印该行返回的数组。

```
$result = mysql_query(/* YOUR QUERY */)
while ($row = mysql_fetch_assoc($result)) {
    //do stuff here later.
}
print_r($row); 
```

一旦您知道查询给出的输出，您就可以在 while 循环中访问您需要的列。

我还要提一下，mysql_ 函数现在已被贬值，建议您使用 mysqli_ 函数或 pdo::query 来访问 sql 信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:08:38.653

最简单的解决方案是嵌套 SELECT

```
SELECT `content` FROM `userprofile` WHERE `userid` = (SELECT `id` FROM `users` WHERE `handle` = ? LIMIT 1) AND `title` = 'donation' LIMIT 1 
```

# gnu-parallel - bash gnu 并行 argfile 语法

> ID：14428609
> 
> 赞同：2
> 
> 时间：2013-01-20T19:54:55.057
> 
> 标签：gnu-parallel

我刚刚发现了 GNU 并行，我在运行一个简单的并行任务时遇到了一些麻烦。我有一个在多个值上运行的模拟，我想将它拆分为使用命令行参数并行运行。从[docs](http://www.gnu.org/software/parallel/man.html)看来，您似乎可以`parallel mycommand :::: myargfile`在其中`myargfile`并行运行包含您想要提供命令的各种参数。但是，我没有看到任何关于如何列出 args 的信息，并假设`myargfile`像这样可以工作：

```
--pmin 0 --pmax 0.1
--pmin 0.1 --pmax 0.2
... 
```

`mycommand --pmin 0 --pmax 0.1`执行没有问题。但是当我运行时，`parallel mycommand :::: myargfile`我得到`error: unknown option pmin 0 --pmax 0.1`（捕获并解码礼貌提升程序选项）。 `parallel echo :::: myargfile`正确打印出参数。就好像它们被包装在一个程序无法读取的字符串中，并且不像它们来自标准 bash 脚本一样。

这是怎么回事？我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:47:47.760

在@DmitriChubarov 链接到[https://stackoverflow.com/a/6258206/1328439](https://stackoverflow.com/a/6258206/1328439)之后，我发现我缺少`colsep`标志：

```
parallel --colsep ' ' mycommand :::: myargfile 
```

成功执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-07T13:23:24.490

在浏览了手册和帮助页面后，我想出了这个例子。也许它会拯救那里的人。:)

```
#!/usr/bin/env bash

COMMANDS=(
  "cnn -a mode=flat"
  "cnn -a mode=xxx"
  "cnn_x -a mode=extreme"
)

parallel --verbose --progress --colsep ' ' scrapy crawl {.} ::: "${COMMANDS[@]}" 
```

# windows-7 - 为什么我的项目的图标在 Windows 7 中看起来如此糟糕？

> ID：14428612
> 
> 赞同：4
> 
> 时间：2013-01-20T19:55:20.733
> 
> 标签：windows-7, vb6

我有一个针对 Windows 7 更新的旧 VB6 项目，包括 48x48 大小的图标。当我运行它时，任务栏中的图标出现褪色。

![在此处输入图像描述](../Images/431a17baa8d2b9dd4041c297e79a95e7.png)

我想我在 .ico 文件中有所有必要的图标大小，但也许我遗漏了一些东西：

![在此处输入图像描述](../Images/5e3de63ae6863a32a0bbd78fc3f8f72f.png)

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T06:41:32.960

VB6 仅支持 16 色图标，这会导致抖动，因此，透明度信息仅限于指示像素是否透明的单个位。

与往常一样，您可以依靠一组 Windows 的 API 来克服此限制。这是一个论坛帖子的链接，解释了如何使用 256 色图标：[VB6 System Tray Icon Color Depth](http://www.vbforums.com/showthread.php?640863-RESOLVED-VB6-System-Tray-Icon-Color-Depth)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T05:54:09.017

我从 XP 时代发现了一篇似乎也适用于 Windows 7的[vbaccelerator 文章。](http://www.vbaccelerator.com/home/VB/Tips/Setting_the_App_Icon_Correctly/article.asp)关键是要按照信中的说明进行操作。它仅适用于已编译的应用程序，不适用于 IDE。最后，当您将 256x256 图像添加到您的图标时，请确保在保存图标时它不是 PNG 压缩的（大多数编辑器都倾向于将其隐藏在某个地方）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-17T06:29:23.860

解决方案很简单：启用视觉样式；将清单添加到您的应用程序和 VB IDE。

在 Vista 及更高版本中，将清单添加到 VB IDE 有点棘手。按照此处的说明进行操作：http: //vbnet.mvps.org/index.html?code/forms/ [vbidevista.htm](http://vbnet.mvps.org/index.html?code/forms/vbidevista.htm)

然后，将清单添加到您的应用程序。这也将使您能够使您的应用程序以提升的方式启动（启动时具有管理员访问权限）： 第 1 步：创建您的清单文本文件。有 2 个选项：普通清单文件和需要管理员权限的清单文件。

清单文件：（最后有下载链接）

清单管理文件：（最后有下载链接）

创建清单文件后，将其添加到项目中：

打开资源编辑器，然后单击“添加自定义资源...”（问号旁边的按钮）。选择您的清单文件并将其添加到编辑器中。现在，双击新添加的资源，编辑它的属性。设置这些值：

类型：#24

编号：1

现在，这是最后也是最重要的一步：

将您的项目设置为从 Sub Main 开始。在 Sub Main 中，首先要调用函数 InitCommonControls。在加载任何表单、控件或其他对话框之前，必须调用它！

InitCommonControls：（最后有下载链接）

而已！您的 VB6 尚未完全更新并使用视觉样式。

下载链接，如承诺： [https ://www.dropbox.com/sh/neyueoozv87k1qd/AACbID8_aC718LCjs12T16Oqa?dl=0](https://www.dropbox.com/sh/neyueoozv87k1qd/AACbID8_aC718LCjs12T16Oqa?dl=0)

# html - Safari 不播放 HTML 5 视频（IE 9、Firefox 和 Chrome 都可以）

> ID：14428617
> 
> 赞同：2
> 
> 时间：2013-01-20T19:55:47.007
> 
> 标签：html, safari, video-streaming

我知道我需要用于 Chrome 和 Firefox 的 ogg 以及用于 IE 9 的 H.264，并且我使用多个资源来支持我的视频的所有浏览器，并且我还拥有保持 IE 9 足够快乐所需的元数据：

```
 <!DOCTYPE html>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

  <video loop autoplay> 
    <source src="fito.ogg" type="video/ogg">    
    <source src="fito.mp4" type="video/mp4">
    <source src="fito.m4v" type="video/x-m4v">
  </video> 
```

第一个是最新的 ogg，第二个是旧版 H.264（IE 9 似乎没有播放较新的 M4V）。最后一个是m4v，似乎没有浏览器在播放。现在所有三个主要浏览器都可以播放视频，而 Safari 不可以，我也需要支持这个。有人知道 Safari 在 HTML 5 视频支持方面与 IE 9 有何不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T08:44:26.833

它在 Windows 7 上的 Safari 5.1 上运行良好。

你有安装 QuickTime 吗？Safari 需要 QuickTime 才能播放 HTML5 视频。

# ubuntu - Ubuntu 更新失败；如何修复触发器损坏的软件包？

> ID：14428618
> 
> 赞同：-1
> 
> 时间：2013-01-20T19:55:49.223
> 
> 标签：ubuntu, updates

我最近在 Ubuntu 12.04.1 LTS x86_64 上进行了更新，在一台机器上，当它有一个嵌入式终端提示询问 [y/N] 时，它意外关闭了更新对话框。这导致安装后触发器在尚未安装的软件包上中断。打开 Synaptic 并不能解决问题，它提到了 dpkg...

```
$ sudo dpkg --configure -a
Setting up linux-image-3.2.0-36-generic-pae (3.2.0-36.57) ...
Running depmod.
update-initramfs: deferring update (hook will be called later)
Examining /etc/kernel/postinst.d.
run-parts: executing /etc/kernel/postinst.d/initramfs-tools 3.2.0-36-generic-pae /boot/vmlinuz-3.2.0-36-generic-pae
update-initramfs: Generating /boot/initrd.img-3.2.0-36-generic-pae
run-parts: executing /etc/kernel/postinst.d/pm-utils 3.2.0-36-generic-pae /boot/vmlinuz-3.2.0-36-generic-pae
run-parts: executing /etc/kernel/postinst.d/update-notifier 3.2.0-36-generic-pae /boot/vmlinuz-3.2.0-36-generic-pae
run-parts: executing /etc/kernel/postinst.d/zz-update-grub 3.2.0-36-generic-pae /boot/vmlinuz-3.2.0-36-generic-pae
debconf: DbDriver "config": /var/cache/debconf/config.dat is locked by another process: Resource temporarily unavailable
run-parts: /etc/kernel/postinst.d/zz-update-grub exited with return code 1
Failed to process /etc/kernel/postinst.d at /var/lib/dpkg/info/linux-image-3.2.0-36-generic-pae.postinst line 1010.
dpkg: error processing linux-image-3.2.0-36-generic-pae (--configure):
 subprocess installed post-installation script returned error exit status 2
dpkg: dependency problems prevent configuration of linux-image-generic-pae:
 linux-image-generic-pae depends on linux-image-3.2.0-36-generic-pae; however:
  Package linux-image-3.2.0-36-generic-pae is not configured yet.
dpkg: error processing linux-image-generic-pae (--configure):
 dependency problems - leaving unconfigured
dpkg: dependency problems prevent configuration of linux-image:
 linux-image depends on linux-image-generic-pae (= 3.2.0.36.43); however:
  Package linux-image-generic-pae is not configured yet.
dpkg: error processing linux-image (--configure):
 dependency problems - leaving unconfigured
dpkg: dependency problems prevent configuration of linux-generic-pae:
 linux-generic-pae depends on linux-image-generic-pae (= 3.2.0.36.43); however:
  Package linux-image-generic-pae is not configured yet.
dpkg: error processing linux-generic-pae (--configure):
 dependency problems - leaving unconfigured
dpkg: dependency problems prevent configuration of linux:
 linux depends on linux-image (= 3.2.0.36.43); however:
  Package linux-image is not configured yet.
dpkg: error processing linux (--configure):
 dependency problems - leaving unconfigured
Errors were encountered while processing:
 linux-image-3.2.0-36-generic-pae
 linux-image-generic-pae
 linux-image
 linux-generic-pae
 linux
$ 
```

如何回滚更新并重新应用它，或者只是强制重新安装损坏的更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:52:47.743

哇，第一次投反对票。谢谢。好吧，我会回答我自己的问题。这不是极简或完美的解决方案，但是当我随后安装另一个软件包时，这会导致触发器再次运行，从而解决了问题。

sudo apt-get 安装 git

（Git与它无关，我只是需要它，并且包系统自己修复了！）

# sqlite - 使这个 SQLite 查询更高效

> ID：14428619
> 
> 赞同：0
> 
> 时间：2013-01-20T19:55:55.257
> 
> 标签：sqlite, android-sqlite

我开发了一个 Android 应用程序，它允许用户以各种方式查看电视指南。其中一个视图是现在/下一个视图，它基本上是一个带有分隔符的列表（显示频道名称），每个分隔符后跟当前/下一个电视节目的详细信息。

我遇到的问题是测试我自己的 67 个频道阵容，生成视图需要 20-30 秒（移动应用程序非常慢），我知道我的一些用户有大约 200 多个频道。

我用来获取 1 个通道的现在/下一个详细信息的 SQL 查询如下...

```
SELECT
    b.oid AS _id,
    b.channel_oid,
    b.title,
    b.start_time,
    b.end_time
FROM epg_event b,
    (
        SELECT
            MIN(a.start_time) AS start_time,
            a.channel_oid,
            a.end_time
        FROM epg_event a
        WHERE a.start_time  > datetime('now')
          AND a.channel_oid = 10029
        GROUP BY a.channel_oid
        UNION
        SELECT
            MIN(a.start_time) AS start_time,
            a.channel_oid,
            a.end_time
        FROM epg_event a
        WHERE a.start_time <= datetime('now')
          AND a.end_time    > datetime('now')
          AND a.channel_oid = 10029
        GROUP BY a.channel_oid
    ) c
WHERE c.start_time  = b.start_time
  AND c.channel_oid = b.channel_oid
ORDER BY b.start_time 
```

对于我只想提取 2 条记录的查询来说，这似乎非常复杂，其中第 1 条的开始时间在（或等于）当前时间之前（或等于）当前时间，结束时间在当前时间（现在）之后，并且第二条记录有开始时间这与第一个（下一个）的结束时间相匹配。

我只是想知道是否有更有效的方法来查询这种情况。

epg_event 表是使用以下内容创建的（为了说明架构）...

```
CREATE TABLE [EPG_EVENT] (
    [oid] integer PRIMARY KEY,
    [title] varchar(50),
    [subtitle] varchar(50),
    [description] varchar(50),
    [start_time] datetime,
    [end_time] datetime,
    [channel_oid] int,
    [unique_id] varchar(50),
    [rating] varchar(50),
    [original_air_date] datetime,
    [season] int,
    [episode] int,
    [dvb_service_event_id] int,
    [dvb_table_version] int,
    [genres] varchar(50)
) 
```

显示的查询将返回...

```
_id, channel_oid, title, start_time, end_time
10467376, 10029, Ripper Street, 2013-01-20 21:00:00, 2013-01-20 22:00:00
10467377, 10029, BBC News; Regional News and Weather, 2013-01-20 22:00:00, 2013-01-20 22:25:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:41:05.777

据我所知，您查询的这一部分应该得到任何仍在播出或尚未开始的节目：

```
 SELECT
        MIN(a.start_time) AS start_time,
        a.channel_oid,
        a.end_time
    FROM epg_event a
    WHERE a.start_time  > datetime('now')
      AND a.channel_oid = 10029
    GROUP BY a.channel_oid
    UNION
    SELECT
        MIN(a.start_time) AS start_time,
        a.channel_oid,
        a.end_time
    FROM epg_event a
    WHERE a.start_time <= datetime('now')
      AND a.end_time    > datetime('now')
      AND a.channel_oid = 10029
    GROUP BY a.channel_oid 
```

但是，这两个条件等价于表演还没有结束的条件，或者：

```
 SELECT
        MIN(a.start_time) AS start_time,
        a.channel_oid,
        a.end_time
    FROM epg_event a
    WHERE a.end_time    > datetime('now')
      AND a.channel_oid = 10029
    GROUP BY a.channel_oid 
```

现在，在这里您按已知的 channel_oid 过滤，但`GROUP BY`它 - 为什么？应该简化为

```
 SELECT
        MIN(a.start_time) AS start_time,
        a.channel_oid,
        a.end_time
    FROM epg_event a
    WHERE a.end_time > datetime('now')
      AND a.channel_oid = 10029 
```

据我所知，您最好`datetime('now')`用`CURRENT_TIMESTAMP`. 这会产生您的最终 SQL：

```
SELECT
    b.oid AS _id,
    b.channel_oid,
    b.title,
    b.start_time,
    b.end_time
FROM epg_event b,
    (
        SELECT
            MIN(a.start_time) AS start_time,
            a.channel_oid,
            a.end_time
        FROM epg_event a
        WHERE a.end_time > CURRENT_TIMESTAMP
          AND a.channel_oid = 10029
    ) c
WHERE c.start_time  = b.start_time
  AND c.channel_oid = b.channel_oid
ORDER BY b.start_time 
```

为了使其快速工作，请确保创建正确的索引。[这个答案](https://stackoverflow.com/questions/13401642/android-sqlite-performance-in-complex-queries/13549991#13549991)可以为您提供一些如何优化它的想法，但乍一看，您至少应该在`epg_event`table:`(channel_oid, start_time)`和`(channel_oid, end_time)`.

# asp.net-mvc - 绕过asp.net mvc中特定类型的DataAnnotationsModelValidatorProvider

> ID：14428620
> 
> 赞同：3
> 
> 时间：2013-01-20T19:56:00.203
> 
> 标签：asp.net-mvc, validation

我有一个**不能**由 DataAnnotationsModelValidatorProvider 验证的类型“内容”（来自自定义 CMS）。我不想从提供程序中删除 DataAnnotationsModelValidatorProvider，因为我需要它用于所有其他类型。

我想创建一个从 DataAnnotationsModelValidatorProvider 继承的自定义 ModelValidatorProvider，并在唯一的公共入口点（方法 GetValidators）中检查 containerType 是否为“Content”类型，然后返回一个空的验证器集合并让另一个自定义 ModelValidatorProvider 处理此验证具体类型。但是我在微软的朋友决定把这个方法封装在DataAnnotationsModelValidatorProvider的基类AssociatedValidatorProvider中。

您是否看到任何其他跳过特定类型的 DataAnnotationsModelValidatorProvider 的方法？

如果没有，您能否在这里投票支持我的建议：http: [//aspnet.uservoice.com/forums/41201-asp-net-mvc/suggestions/3571625-remove-sealed-on-method-getvalidators-of-type-阿索](http://aspnet.uservoice.com/forums/41201-asp-net-mvc/suggestions/3571625-remove-sealed-on-method-getvalidators-of-type-asso)

这是其他人面临类似问题的讨论：[http ://forums.asp.net/t/1751517.aspx/1](http://forums.asp.net/t/1751517.aspx/1)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T21:38:56.877

你不能直接继承自`ModelValidatorProvider`吗？然后，您可以根据需要进行修改`GetValidators`。例如：

```
public class CustomValidatorProvider : ModelValidatorProvider
{
    private readonly DataAnnotationsModelValidatorProvider _provider = new DataAnnotationsModelValidatorProvider();

    public override IEnumerable<ModelValidator> GetValidators(ModelMetadata metadata, ControllerContext context)
    {
        if (metadata.ModelType == typeof(Content) || metadata.ContainerType == typeof(Content))
        {
            return Enumerable.Empty<ModelValidator>();
        }

        return _provider.GetValidators(metadata, context);
    }
} 
```

# php - 根据函数参数从数组中回显一个值

> ID：14428624
> 
> 赞同：0
> 
> 时间：2013-01-20T19:56:11.853
> 
> 标签：php, arrays

如果在类中调用方法，我需要能够从我的一个类中的私有属性中回显一个值。解释起来有点棘手，所以让我演示一下，希望有人可以为我填空:)

```
 <?php
     class test {
          private $array['teachers']['classes'][23] = "John";

             public function __construct($required_array) {

                 $this->array['teachers']['classes'][23] = "John";
                 $this->array['students'][444] = "Mary";
                 $this->echo_array($required_array);

             }
             public function echo_array($array) {

                     // Echo the value from the private $this->array;
                     // remembering that the array I pass can have either 
                     // 1 - 1000 possible array values which needs to be 
                     // appended to the search. 

             }
     }

     // Getting the teacher:     
     $test = new test(array('teachers','classes',23));

     // Getting the student:     
     $test = new test(array('students',444));

?> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:58:40.730

```
$tmp = $this->array;
foreach ($array as $key) {
    $tmp = $tmp[$key];
}
// $tmp === 'John'
return $tmp; // never echo values but only return them 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:35:08.697

另一种获得价值的方法；

```
class Foo {
    private $error = false,
            $stack = array(
        'teachers' => array(
            'classes' => array(
                23 => 'John',
                24 => 'Jack',
            )
        )
    );

    public function getValue() {
        $query  = func_get_args();
        $stack  = $this->stack;
        $result = null;
        foreach ($query as $i) {
            if (!isset($stack[$i])) {
                $result = null;
                break;
            }
            $stack  = $stack[$i];
            $result = $stack;
        }

        if (null !== $result) {
            return $result;
        }
        // Optional
        // trigger_error("$teacher -> $class -> $number not found `test` class", E_USER_NOTICE);
        // or
        $this->error = true;
    }

    public function isError() {
        return $this->error;
    }
}

$foo = new Foo();
$val = $foo->getValue('teachers', 'classes', 24); // Jack
// $val = $foo->getValue('teachers', 'classes'); // array: John, Jack
// $val = $foo->getValue('teachers', 'classes', 25); // error
if (!$foo->isError()) {
    print_r($val);
} else {
    print 'Value not found!';
} 
```

# collections - 测试有序集合

> ID：14428630
> 
> 赞同：1
> 
> 时间：2013-01-20T19:56:49.590
> 
> 标签：collections, smalltalk, pharo

```
|email addressList|
email:= '<abc@gmail.com>,abcd ,<abcef@domail.com>'.
addressList:= MailAddressParser addressesIn:email. 
```

上面的代码将为我提供一个包含所有字符串的有序集合，尽管“abcd”不是有效的电子邮件 ID，但它仍然存在于集合中。

我的问题是如何删除不包含“@”的无效电子邮件地址。

```
addressList do[:ele | " How can i check each item if it includes @ , if not remove it."] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:43:38.897

您可以使用

```
addressList select: [ :email | email includes: $@ ] 
```

如果您只是在寻找一个字符`@`（如@dh82 所建议的那样），或者如果您需要寻找可以使用的子字符串：

```
addressList select: [ :email | email includesSubString: '@' ] 
```

`select:`创建一个新集合，其中的元素与块中指定的条件匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T07:40:54.300

您可以采取几种方法：

完全按照您的要求执行（从现有集合中删除）

```
addressList removeAllSuchThat: [:string| (string includes: $@) not ] 
```

或者，您可以生成一个新列表，其中仅包含 Uko 提议的有效元素。在这里，您将 addressList 与新列表交换。

```
addressList select: [:string| string includes: $@ ] 
```

或者您可以生成一个排除无效元素的新列表

```
addressList reject: [:string| (string includes: $@) not ] 
```

# javascript - window.blur() - 我做错了什么

> ID：14428633
> 
> 赞同：0
> 
> 时间：2013-01-20T19:56:58.840
> 
> 标签：javascript

我试图在打开窗口时取消焦点，情况是：

*   我有一个带有按钮的主窗口，单击该按钮会打开一个新窗口并自动调用 blur() 方法，因此该窗口应该在后台，但是什么也没发生，我在 Firefox 和 Chrome 的最新版本上进行了尝试。

    ```
    function openWindow() {
      var exampleWin = window.open('example.html','Example','width=500,height=500');
      exampleWin.blur();
    }
    // and the HTML:
    <button onclick="openWindow();">Open Window</button> 
    ```

代码很简单，但我不确定为什么它不起作用，我什至查看了 MDN 文档，一切似乎都很好。

**- 编辑 -**

最后我找到了一个稍微不同的解决方案：

```
function openWindow() {
            /* This time I don't use var keyword, so the exampleWin variable 
               will have a global scope */
    exampleWin = window.open('example.html','Example','width=500,height=500');
}

function focusFn() {
    exampleWin.focus();
}

function blurFn() {
    exampleWin.blur();
}

// The HTML:
<button onclick="openWindow();">Open Window</button>
<button onclick="focusFn();">Focus</button>
<button onclick="blurFn();">Blur</button> 
```

它以这种方式正常工作，但如果我使用 onclick 事件调用焦点/模糊函数，而不是在 openWindow() 函数中调用它们，无论如何这对我来说都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:01:46.903

尝试给主窗口焦点：

```
function openWindow() {
  var exampleWin = window.open('example.html','Example','width=500,height=500');
  window.focus();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T20:26:05.603

这样做在大多数情况下效果更好......

```
$('a').click(function(e){
    e.preventDefault();
    var evt = document.createEvent("MouseEvents"),
        ele = document.createElement('a');

    ele.href = $(this)[0].href;
    evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, true, false, false, false, 0, null);
    ele.dispatchEvent(evt);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:05:20.087

使用 exampleWin.focus() 而不是 exampleWin.blur()

# windows - 在 Windows 中使用 qxt 的问题

> ID：14428642
> 
> 赞同：1
> 
> 时间：2013-01-20T19:57:45.270
> 
> 标签：windows, qt, libqxt

我一直在尝试让 qxt 在 Windows 中使用 MSVC 2010 工作。

我已将 Qt 4.8.4 安装到“D:\Qt\4.8.4”中，并将 qxt 安装到“D:\libqxt”中。我配置qxt如下：

```
D:\libqxt>configure -prefix D:\libqxt -debug_and_release 
```

然后从 Qt 命令行编译：

```
D:\libqxt>nmake 
```

配置或编译时没有显示错误，但是当我尝试编译示例时，我得到以下信息：

```
D:\libqxt\examples>qmake examples.pro

D:\libqxt\examples>nmake

Microsoft (R) Program Maintenance Utility Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

        cd displaysettings\ && "C:\Program Files (x86)\Microsoft Visual Studio 1
0.0\VC\BIN\nmake.exe" -f Makefile

Microsoft (R) Program Maintenance Utility Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

        d:\Qt\4.8.4\bin\qmake.exe -o Makefile displaysettings.pro
        "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\nmake.exe" -
f Makefile.Debug all

Microsoft (R) Program Maintenance Utility Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

compiling .\displaysettingsdialog.cpp .\main.cpp
displaysettingsdialog.cpp
D:\libqxt\include\QxtGui\QxtScreen(1) : fatal error C1083: Cannot open include f
ile: 'qxtscreen.h': No such file or directory
main.cpp
D:\libqxt\include\QxtGui\QxtScreen(1) : fatal error C1083: Cannot open include f
ile: 'qxtscreen.h': No such file or directory
Generating Code...
NMAKE : fatal error U1077: 'echo' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 10.0
\VC\BIN\nmake.exe"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop. 
```

检查makefile，我发现“D:\libqxt\include”在包含路径中，但这不是“qxtscreen.h”所在的位置——它在“D:\libqxt\src”树中。当然，我可以手动编辑 makefile 来添加它，但我觉得这不是必需的，也许这表明我错过了一步。我做错了什么？

谢谢你的帮助！

# vb.net - 透明边缘

> ID：14428643
> 
> 赞同：0
> 
> 时间：2013-01-20T19:57:46.893
> 
> 标签：vb.net, vb.net-2010

我有一个使用透明度的应用程序，因此应用程序的背景是自定义形状。我遇到的问题是圆角是锯齿状的。不像您在图标或小部件上看到的那样干净的圆角。我尝试了几种不同的图像类型（即 PNG、GIF 等）。但似乎当我使用透明度键时，边缘的质量会变差。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:45:11.920

我找到了一个解决方案，我只是用 photophop 笔在拐角处画了小像素点……这保持了一个很好的寄宿生！谢谢

# google-analytics - 在 Google Analytics 中过滤来自特定引用者的数据

> ID：14428647
> 
> 赞同：0
> 
> 时间：2013-01-20T19:58:02.537
> 
> 标签：google-analytics

我在我的网站上使用谷歌分析。我想查看来自特定域的流量/人数。我如何在谷歌分析中进行设置？例如，我的网站是 wwww.foo.com。我想知道有多少人从 www.bar.com 登陆我的网站（或从 www.bar.com 获得推荐）。如果有人能够分享在谷歌分析中进行设置的步骤，将会非常有帮助。

非常感谢 -

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T02:32:17.193

在报告主页的“标准报告”部分，您可以转到

流量来源 > 来源 > 推荐

然后在右侧，指标正上方是一个搜索字段。只需输入“www.bar.com”并单击望远镜图标。

# drop-down-menu - 下拉菜单在不正确的导航栏项下呈现

> ID：14428659
> 
> 赞同：7
> 
> 时间：2013-01-20T19:59:07.280
> 
> 标签：drop-down-menu, alignment, twitter-bootstrap-2

我正在使用 Bootstrap 2 构建一个站点，并且我想在导航栏中的一个项目中添加一个下拉菜单。

很简单。但是，当下拉菜单展开时，它会出现在导航栏中不正确的项目下方：

![下拉菜单在最左边的导航栏元素下方展开，而不是下拉容器。](../Images/4e1333e9d93747eadfb4e439c2ffcd72.png)

请注意，在上面的屏幕截图中，下拉菜单呈现在“Admin”（最左侧的导航栏元素）下方，而不是“Locator”（激活下拉菜单的元素）下方。

如何解决此问题，以便下拉菜单出现在正确的导航栏元素下方？

这是导航栏的 HTML：

```
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="...">Dashboard</a>

      <div class="nav-collapse collapse pull-right">
        <ul class="nav">
          <li><a href="...">Admin</a></li>
          <li><a href="...">Find Trips</a></li>

          <!-- Locator Dropdown -->
          <li>
            <a id="nav-locator-dropdown" class="dropdown-toggle" href="..."
                   data-toggle="dropdown" data-target="#">
              Locator
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" role="menu" aria-labelledby="nav-locator-dropdown">
              <li><a href="...">My Trips</a></li>
              <li><a href="...">Create Trip</a></li>
            </ul>
          </li>

          <li><a href="...">My Profile</a></li>
          <li><a href="...">Log Out</a></li>
        </ul>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T00:53:41.430

您的下拉菜单出现在错误的位置，因为您缺少定义下拉菜单相对位置的类。要解决此问题，只需将`.dropdown`类添加到您的菜单项中，并使用如下子菜单：

`<li class="dropdown"> ... </li>`

这是您的固定标记：

**HTML**

```
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="...">Dashboard</a>

      <div class="nav-collapse collapse pull-right">
        <ul class="nav">
          <li><a href="...">Admin</a></li>
          <li><a href="...">Find Trips</a></li>

          <!-- Locator Dropdown -->
          <li class="dropdown">
            <a id="nav-locator-dropdown" class="dropdown-toggle" href="..."
                   data-toggle="dropdown" data-target="#">
              Locator
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" role="menu" aria-labelledby="nav-locator-dropdown">
              <li><a href="...">My Trips</a></li>
              <li><a href="...">Create Trip</a></li>
            </ul>
          </li>

          <li><a href="...">My Profile</a></li>
          <li><a href="...">Log Out</a></li>
        </ul>
      </div>
    </div>
  </div>
</div> 
```

# c# - 如何在 ASP.NET MVC 中允许 /Controller/Id？

> ID：14428660
> 
> 赞同：2
> 
> 时间：2013-01-20T19:59:14.610
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我想访问这个网址

```
/thread/123 
```

`123`线程在哪里`id`。

我不知道如何设置我的路线或其他路线。

我想添加`thread`到我的**HomeController**中，但它似乎只有在我去的时候才有效`/home/thread`。

如何设置此项目以使 url`/thread/123`正常工作？

我尝试`/thread`作为控制器，但似乎它认为`123`是一种操作方法，而另一种尝试是线程在 Home 而不是 root。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T20:02:52.417

您要添加为此 URI 指定的 Route

```
routes.MapRoute(
        "Thread", // Route name
        "thread/{id}", // URL with parameters*
        new { controller = "Thread", action = "Display", id = UrlParameter.Optional }
                ); 
```

**非常重要：**在“默认”路线上方添加您的新路线！

# php - Jquery + 下拉日期以存储日期和时间 - 格式问题

> ID：14428665
> 
> 赞同：0
> 
> 时间：2013-01-20T19:59:36.243
> 
> 标签：php, jquery, date, drop-down-menu, strtotime

我的问题：当我结合我的 Jquery datepicker 日历输入和我放在它旁边的下拉菜单来捕获小时、分钟和 AM/PM 时，我无法获得正确的打印日期。

这是我的php代码：

```
echo protect($_POST['truck_arrive'])." - truck arrive<br>";
echo protect($_POST['truck_arrive_hours'])." - truck arrive hours<br>";
echo protect($_POST['truck_arrive_mins'])." - truck arrive mins<br>";
echo protect($_POST['truck_arrive_ampm'])." - truck arrive ampm<br>";

$truck_arrive_comb = protect($_POST['truck_arrive']).protect($_POST['truck_arrive_hours']).protect($_POST['truck_arrive_mins']).protect($_POST['truck_arrive_ampm']);

echo $truck_arrive_comb." - truck arrive combination<br>";
echo strtotime($truck_arrive_comb)." - truck arrive combination string to time<br>";
echo date("Y-m-d h:i:s",strtotime($truck_arrive_comb))." - truck arrive combination string to time date format<br>";

//$truck_arrive = date("Y-m-d h:i:s",strtotime($truck_arrive_comb));
$truck_arrive = date("Y-m-d h:i:s",strtotime(protect($_POST['truck_arrive'])));
echo $truck_arrive." - truck arrive date format<br>"; 
```

它输出这个：

```
01/16/2013 - truck arrive
01 - truck arrive hours
04 - truck arrive mins
AM - truck arrive ampm
01/16/20130104AM - truck arrive combination
- truck arrive combination string to time
1969-12-31 07:00:00 - truck arrive combination string to time date format
2013-01-16 12:00:00 - truck arrive date format 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:43:06.680

问题是这`$truck_arrive_comb`是一个无效的格式`strtotime()`

请看这里[strtotime()](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:46:59.503

这是您可以使用的简化，只需用适当的替换硬编码值`$_POST`：

```
/* hard coded values for test*/
$hours=1;
$minutes=40;
$am_pm='am';

$hours = $am_pm == 'pm' ? $hours +12 : $hours;
$dateTime=strtotime('01/16/2013')  ;/* returns seconds*/

$timeInSeconds= ($minutes * 60) + ($hours*3600);
/* add time in seconds to date in seconds*/
$totalSeconds= $dateTime + $timeInSeconds;

echo date('Y-m-d H:i:s',$totalSeconds ); 
```

如果需要考虑时区，将需要修改。

另一种方法是将时间和日期字符串解析为与上述输出相同的格式，并将其传递给`strtotime()`或简单地匹配`date()`使用字符串创建的输出

# c# - 当键存在时，C# Dictionary 抛出 KeyNotFoundException

> ID：14428668
> 
> 赞同：3
> 
> 时间：2013-01-20T20:00:00.680
> 
> 标签：c#, dictionary, nullreferenceexception, keynotfoundexception

我正在存储一个二维数组，它将向量之间的距离矩阵表示为`Dictionary<DistanceCell, double>`. 我的实现`DistanceCell`有两个字符串字段代表被比较的向量。

```
class DistanceCell
{
    public string Group1 { get; private set; }
    public string Group2 { get; private set; }

    public DistanceCell(string group1, string group2)
    {
        if (group1 == null)
        {
            throw new ArgumentNullException("group1");
        }

        if (group2 == null)
        {
            throw new ArgumentNullException("group2");
        }

        this.Group1 = group1;
        this.Group2 = group2;
    }
} 
```

由于我将此类用作键，因此我覆盖了`Equals()`and `GetHashCode()`：

```
public override bool Equals(object obj)
{
    // False if the object is null
    if (obj == null)
    {
        return false;
    }

    // Try casting to a DistanceCell. If it fails, return false;
    DistanceCell cell = obj as DistanceCell;
    if (cell == null)
    {
        return false;
    }

    return (this.Group1 == cell.Group1 && this.Group2 == cell.Group2) 
           || (this.Group1 == cell.Group2 && this.Group2 == cell.Group1);
}

public bool Equals(DistanceCell cell)
{
    if (cell == null)
    {
        return false;
    }

    return (this.Group1 == cell.Group1 && this.Group2 == cell.Group2) 
           || (this.Group1 == cell.Group2 && this.Group2 == cell.Group1);
}

public static bool operator ==(DistanceCell a, DistanceCell b)
{
    // If both are null, or both are same instance, return true.
    if (System.Object.ReferenceEquals(a, b))
    {
        return true;
    }

    // If either is null, return false.
    // Cast a and b to objects to check for null to avoid calling this operator method
    // and causing an infinite loop.
    if ((object)a == null || (object)b == null)
    {
        return false;
    }

    return (a.Group1 == b.Group1 && a.Group2 == b.Group2) 
           || (a.Group1 == b.Group2 && a.Group2 == b.Group1);
}

public static bool operator !=(DistanceCell a, DistanceCell b)
{
    return !(a == b);
}

public override int GetHashCode()
{
    int hash;
    unchecked
    {
        hash = Group1.GetHashCode() * Group2.GetHashCode();
    }

    return hash;
} 
```

正如您所看到的，其中一个要求是`DistanceCell`可以互换的。所以对于两个字符串and ，必须相等。这就是为什么我用乘法实现的原因，因为must equal 。`Group1``Group2``x``y``DistanceCell("x", "y")``DistanceCell("y", "x")``GetHashCode()``DistanceCell("x", "y").GetHashCode()``DistanceCell("y", "x").GetHashCode()`

我遇到的问题是它大约 90% 的时间都可以正常工作，但在其余时间它会抛出 a`KeyNotFoundException`或 a 。`NullReferenceException`前者在从字典中获取键时被抛出，后者在我使用循环遍历字典`foreach`并检索一个空键时被抛出，然后它会尝试调用该键`Equals()`。我怀疑这与我的`GetHashCode()`实施中的错误有关，但我并不积极。另请注意，由于我的算法的性质，当我检查它时，永远不应该存在字典中不存在密钥的情况。该算法每次执行都采用相同的路径。

**更新**

我只是想告诉大家问题已解决。事实证明，这与我的 Equals() 或 GetHashCode() 实现无关。我做了一些广泛的调试，发现我得到 KeyNotFoundException 的原因是因为字典中首先不存在该键，这很奇怪，因为我确信它正在被添加。问题是我使用多个线程将键添加到字典中，据此，c# Dictionary 类不是线程安全的。因此，Add() 失败的时机一定是完美的，因此密钥从未添加到字典中。我相信这也可以解释 foreach 循环如何偶尔产生一个空键。添加（）'

感谢每一个人的帮助！很抱歉，这完全是我的错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T20:18:27.957

看看Eric Lippert的[这篇博文](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)

它表示即使您更改对象的内容，GetHashCode 的结果也不应该改变。原因是 Dictionary 使用存储桶来加快索引速度。更改 GetHasCode 结果后，字典将无法为您的对象找到正确的存储桶，这可能导致“找不到密钥”

我可能错了，但值得测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T20:03:27.283

我相信你缺少的是这个答案 [Using an object as a generic Dictionary key](https://stackoverflow.com/questions/634826/using-an-object-as-a-generic-dictionary-key-in-net)

你可能没有说你实现了 IEquatable 接口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:23:57.090

对我来说，您的代码看起来是正确的。（它可能是（微）优化的，但它看起来好像在所有情况下都是正确的。）你能提供一些你创建和使用的代码`Dictionary<DistanceCell, double>`吗？问题可能在于您没有向我们展示的代码。

# java - JPQL：与group by的内部连接

> ID：14428669
> 
> 赞同：3
> 
> 时间：2013-01-20T20:00:05.270
> 
> 标签：java, mysql, jpa, criteria-api

我正在尝试使用标准构建器从数据库中检索数据。它工作得很好，查询几乎是完美的......几乎。不幸的是，Java 不希望我使用 group by 或 distinct 作为查询的结果。如何让Java只检索唯一记录？我的代码在这里：

```
List<Documentation> documentationList = new ArrayList<>();
DatabaseConnector dc = new DatabaseConnector();
List<Predicate> criteria = new ArrayList<Predicate>();
EntityManager em = dc.getEntityManager();
CriteriaBuilder builder = em.getCriteriaBuilder();

CriteriaQuery<Documentation> select = builder.createQuery(Documentation.class);
Root<Documentation> u = select.from(Documentation.class);
Join<Documentation, DocumentationUser> du = u.join("documentationUserCollection",     JoinType.INNER);

javax.persistence.Query q = em.createQuery(select);
select.groupBy(u.<String>get("documentationId"));
select.distinct(true);

documentationList = q.setMaxResults(pageSize).setFirstResult(first).getResultList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:04:43.173

尝试交换 2 行降低创建查询的行：

```
select.groupBy(u.<String>get("documentationId"));
select.distinct(true);

javax.persistence.Query q = em.createQuery(select); 
```

# rest - WSO2 ESB 公开一个保留 URI 部分的 REST API

> ID：14428671
> 
> 赞同：1
> 
> 时间：2013-01-20T20:00:41.333
> 
> 标签：rest, proxy, wso2, wso2esb

假设我有一个托管在网络服务器上的 REST API：someone.com/api/

我想通过使用 WSO2 ESB 的代理服务公开这个 REST API。esb.com/api/

它应该转发 esb.com/api/ 之后的任何内容。所以如果我打：

esb.com/api/param1/param2

它应该使用：

某人.com/api/param1/param2

如何将 URI 部分从代理服务传递给真正的 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:45:28.727

不要尝试为 REST API 使用代理服务。代理服务用于 Web 服务。使用WSO2 ESB 中可用的**API** ，这些 API类似于代理服务并用于 REST API。[此](http://wso2.org/library/articles/2012/10/implementing-restful-services-wso2-esb)氧气罐文章和[此](http://wso2.org/project/esb/java/4.0.3/docs/samples/rest_api_samples.html)示例文档将对您有用。

# mysql - 又一个 SQL 查询

> ID：14428672
> 
> 赞同：-6
> 
> 时间：2013-01-20T20:00:46.850
> 
> 标签：mysql

我有一个 mySQL 表，其中包括以下三列：IDENT、TIME 和 USER。都是 varchar 类型。例如：

```
IDENT = someuser::24::myisp.net::us
TIME = 2012-11-05 1:45:42
USER = someuser 
```

我要做的是计算过去 5 天内不同 IDENT 的数量。我尝试了以下方法，但失败了（并非所有不同的 IDENT 都被拉出）：

```
SELECT DISTINCT(IDENT)
     , (  UNIX_TIMESTAMP(now()) 
        - UNIX_TIMESTAMP(STR_TO_DATE(TIME, '%Y-%m-%d %H:%i:%s'))
       ) / 86400 AS numdays
FROM `PS_LOGIN_LOG` 
WHERE `USER` = 'someuser' 
GROUP BY IDENT
HAVING `numdays` <= 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:12:52.817

尚不完全清楚您所说的“*过去 5 天*”是什么意思，但以下内容应该可以解决问题：

```
SELECT COUNT(DISTINCT IDENT)
FROM   PS_LOGIN_LOG
WHERE  USER = 'someuser'
   AND TIME >= CURRENT_DATE - INTERVAL 5 DAY
   AND TIME <  CURRENT_DATE + INTERVAL 1 DAY 
```

# c# - 从 asp.net 中的用户控件调用基页方法

> ID：14428674
> 
> 赞同：1
> 
> 时间：2013-01-20T20:00:50.487
> 
> 标签：c#, asp.net, inheritance, user-controls

我一直试图找到这个问题的好答案，但似乎找不到。我有一个派生自基本页面的 ASP.NET 页面，如下所示：

```
public partial class MainPage : MyBasePage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        var loginTime = GetLoginTime(); // This works fine
    }
} 
```

和基本页面：

```
public partial class MyBasePage: Page
{
}

protected DateTime GetLoginTime()
{
    // Do stuff
    return loginTime;
} 
```

现在我在该页面上有一个需要调用我的方法的用户控件......就像这样：

```
public partial class TimeClock : UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
        var loginTime = GetLoginTime(); // This does not work!
    }
} 
```

如您所见，出于显而易见的原因，我无法调用我的基本方法。我的问题是，如何从我的用户控件中调用此方法？我发现的一种解决方法是这样的：

```
var page = Parent as MyBasePage;
page.GetLoginTime(); // This works IF I make GetLoginTime() a public method 
```

如果我将我的功能公开而不是受保护，这将有效。这样做似乎不是解决此解决方案的一种非常面向对象的方法，因此如果有人可以为我提供更好的解决方案，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:18:41.903

TimeClock 继承自 UserControl，而不是 MyBasePage，那么 TimeClock 为什么要查看方法 GetLoginTime()？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:33:26.340

你应该让你的 UserControl 远离你的页面。它应该在 OOP 中解耦。添加属性以设置值和委托以挂钩事件：

```
public partial class TimeClock : UserControl
{
    public DateTime LoginTime{ get; set; }

    public event UserControlActionHandler ActionEvent;
    public delegate void UserControlActionHandler (object sender, EventArgs e);

    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected void Button_Click(object sender, EventArgs e)
    {
       if (this.ActionEvent!= null)
       {
           this.ActionEvent(sender, e);
       }
    }

} 
```

页

```
public partial class MainPage : MyBasePage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        var loginTime = GetLoginTime();
        TimeClock1.LoginTime = loginTime;
        TimeClock1.ActionEvent += [tab][tab]...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T13:19:28.640

(this.Page as BasePage).MethodName()

# android - Android：启动服务后停止活动

> ID：14428676
> 
> 赞同：0
> 
> 时间：2013-01-20T20:00:54.967
> 
> 标签：android, android-intent, android-activity, android-service

我的代码中有以下流程：

```
 Activity1 : startActivity(Activity2) --->
             Activity2: startActivity(Activity3) --->
                        Activity3: startService(MyService) --->
                                   MyService: startActivity(Activity4) 
```

上面的每个活动都显示一个视图，并代表 4 步设置中的一个步骤。最后的Activity——`Activity 4`在里面完成一些设置工作后启动`MyService`，基本上告诉用户，

`"The service has started, you can close the application by pressing Back or Home button"`

当用户按下 Back 或 Home 时，我想销毁`Activities 1-4`，并且只有 `MyService`运行。此外，如上所述停止应用程序后，当用户通过菜单导航回应用程序并启动它时，我将检查是否`MyService`已在运行。如果它已经在运行，我不想显示`Activities 1-3`，我想显示另一个`Control Panel View`（另一个活动），它说，

`"Dude, the service is already running, do you want to Stop or Restart it?"`

此视图将有一个停止和重新启动按钮，以执行相应的任务。

**我的问题：**

1.  当按下返回或主页时，如何从活动 4 中安全地停止活动 1-4？我的想法是为`static stopActivity()`每个 Activity 添加一个方法，并从`Activity[1-3].stopActivity()`or`onBackPressed()`调用**Activity4**。然后在 each 内部，我会调用，从而结束每个 Activity。但是这样做安全有效吗？`onPause()`**`stopActivity()``finish()`**

***   我上面说明的流程，它是做事的最佳方式，还是有更清洁的方式？我已经`BroadcastReceivers`注册了这些Activity，所以我需要为每个Activity执行干净的退出，没有泄漏的接收器，或者更糟糕的是，由于不干净的退出策略导致应用程序崩溃或影响用户的手机。** 

 **感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:11:04.410

1.  您无需停止活动，Android 会为您完成。[使用带有标志FLAG_ACTIVITY_NO_HISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY)的意图启动您的活动，这样当用户按下回击时它们就不会出现。这些活动将在用户离开后立即停止。

2.  在`onStop`您的每个活动的方法中，如果您想要手动解除分配内存，请编写您想要解除分配内存的任何代码，尽管这不是必需的，因为当设备内存不足时，Android 会自行解除分配。在这些`onStop`方法中，取消注册任何`BroadcastReceiver`以前注册的。**

# jpa - JPQL 查询中的@OrderColumn

> ID：14428678
> 
> 赞同：4
> 
> 时间：2013-01-20T20:01:03.513
> 
> 标签：jpa, join, many-to-many, jpql

我与@OrderColumn 有一个@ManyToMany 映射，如下所示：

```
class Tag {
    @ManyToMany(fetch = FetchType.LAZY) @Getter
    @JoinTable(
            name = "tag_graph",
            inverseJoinColumns = @JoinColumn(name = "parent_id"))
    private Set<Tag> parents = new TreeSet<>();

    @ManyToMany(fetch = FetchType.LAZY, mappedBy = "parents") @Getter @OrderColumn
    private List<Tag> children = new ArrayList<>();
} 
```

我的问题是我想编写一个使用生成的@JoinTable 的@OrderColumn 的JPQL 查询。就像是：

```
 SELECT t FROM Tag t WHERE ... ORDER BY t.ORDER_COLUMN 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:07:14.497

您应该能够在 JPQL 中使用 INDEX 函数。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/JPQL#Special_Operators](http://en.wikibooks.org/wiki/Java_Persistence/JPQL#Special_Operators)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T08:41:54.493

不需要在查询中指定 order 列，它会在后台自动使用以保留将元素添加到关系列表中的顺序。如需更好的解释，您可以参考此[链接](http://www.developer.com/java/ent/article.php/3898336/The-Top-5-New-Annotations-in-JPA-2.htm)。

# plugins - IntellijIdea 插件 - RegexFilter 不突出显示行号

> ID：14428685
> 
> 赞同：0
> 
> 时间：2013-01-20T20:02:12.187
> 
> 标签：plugins, intellij-idea

我有下一个问题：在插件的控制台中仅突出显示文件名，而不是行。但是，当我单击链接时，编辑器会打开指定文件，并且光标位于指定行：

![在此处输入图像描述](../Images/608a08747cd201b2d16d01cb6232f9b8.png)

RegexpFilter 以以下方式初始化：

```
console.addMessageFilter(new RegexpFilter(project, RegexpFilter.FILE_PATH_MACROS + ":" + RegexpFilter.LINE_MACROS)); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:43:16.680

此行为是设计`RegexpFilter`实现的，请参阅如何[`highlightEndOffset`定义](https://github.com/JetBrains/intellij-community/blob/master/platform/lang-api/src/com/intellij/execution/filters/RegexpFilter.java#L176)。

行号不高亮，只有文件路径。如果您也希望它被突出显示，请创建您自己的`Filter`实现，该实现将使用不同的逻辑来突出显示结果。

# mysql - 在 MySQL 表中获取行的位置

> ID：14428686
> 
> 赞同：0
> 
> 时间：2013-01-20T20:02:28.167
> 
> 标签：mysql

我有一张表格，用于存储赛车锦标赛的积分榜数据。问题是 - 我实际上并没有存储驾驶员的位置，但我只是存储了点数以及其他数据（获胜次数等），然后让 MySQL 为我排序。这通常可以正常工作，但如果我想知道某个赛季的车手位置怎么办？我可以使用以下代码：

```
SELECT  l.driver, @curRow := @curRow + 1 AS position
FROM    driverStandings l
JOIN    (SELECT @curRow := 0) r
WHERE   l.season = 1
ORDER BY l.points DESC, l.racesWon DESC 
```

但是，这将返回每个车手及其在第 1 季中的位置的列表。如果我只想知道一个车手（例如“维特尔”）的位置，我能做什么？我已经尝试了我能想到的一切，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:29:58.197

```
SELECT       COUNT(v.id) + 1
FROM         driverStandings d
  LEFT JOIN  driverStandings v
         ON  d.points > v.points
         OR (d.points = v.points AND d.racesWon > v.racesWon)
WHERE        v.id = ? 
```

如果需要，您可以`GROUP BY`代替过滤`v.id`（只需记住将其添加到`SELECT`列表中，以便您可以识别每条记录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:08:57.137

在点数大于该驱动程序点的情况下进行选择计数。这在第二个查询中是最简单的，但是有可能出现竞争条件（没有双关语）。

从 driverStandings l 中选择 (count(*) + 1) 作为位置，其中 l.points > :driverPoints

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:18:14.990

您确实应该按照对原始帖子的评论中提到的那样明确存储位置。它将使围绕此问题的所有代码更清晰。

应该可以填充这些值，以便新的驱动程序位置字段填充当前行，如您的示例中使用[惰性...选择](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

但是，您也可以使用子查询低效地获取相同的信息

# r - RcppArmadillo 传递用户自定义函数

> ID：14428687
> 
> 赞同：40
> 
> 时间：2013-01-20T20:02:33.333
> 
> 标签：r, rcpp, armadillo

考虑以下 R 代码，

```
## ----------- R version -----------

caller <- function(x=1:3, fun = "identity", ...){

  ## do some other stuff
  ## ...
  ## then call the function
  eval(call(fun, x))

}

fun1 <- function(x, ...){
  x + x
}

fun2 <- function(x, a = 10) a * x

caller(fun = "fun1")
caller(fun = "fun2") 
```

用户可以传递一个函数名“fun”，由`caller`. 我希望对`RcppArmadillo`对象执行相同的任务（显然，作为更复杂任务的一部分）。该函数将在 中定义`C++`，并且用户通过引用其名称在 R 级别选择它：

```
caller_cpp(1:3, "fun1_cpp") 
```

或者

```
caller_cpp(1:3, "fun2_cpp") 
```

等等

这是我对调用函数的天真尝试，甚至无法编译：

```
## ----------- C++ version -----------

library(Rcpp)
require( RcppArmadillo )    

sourceCpp( code = '

       // [[Rcpp::depends("RcppArmadillo")]]

       #include <RcppArmadillo.h>

       using namespace arma ; 
       using namespace Rcpp ;

       colvec fun1_cpp(const colvec x)
      {
       colvec y ;
       y = x + x;
       return (y);
      }

       colvec fun2_cpp(const colvec x)
      {
       colvec y ;
       y = 10*x;
       return (y);
      }

     // mysterious pointer business in an attempt 
     // to select a compiled function by its name

      typedef double (*funcPtr)(SEXP);
      SEXP putFunPtrInXPtr(SEXP funname) {
            std::string fstr = Rcpp::as<std::string>(funname);
            if (fstr == "fun1")
                return(Rcpp::XPtr<funcPtr>(new funcPtr(&fun1_cpp)));
            else if (fstr == "fun2")
            return(Rcpp::XPtr<funcPtr>(new funcPtr(&fun2_cpp)));

       }

       // [[Rcpp::export]]
       colvec caller_cpp(const colvec x, character funname)
      {
       Rcpp::XPtr fun = putFunPtrInXPtr(funname);
       colvec y ;
       y = fun(x);
       return (y);
      }

   ') 
```

* * *

**编辑**：在遵循 Dirk 的建议来查看 RcppDE 后修改了示例。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-20T20:10:36.170

（有时您需要`svn log ...`在文件上使用以查看它们的日期...）

我认为一个更好的用例是在我的基于 C 的 DEoptim 到 Rcpp / RcppArmadillo 的“端口”：RcppDE。在其中，我允许优化例程使用 R 函数（如 DEoptim 所做的那样）或用户提供的编译函数——据我所知，这就是你想要的。

有一点点 C++ 脚手架，但你应该没有问题。

*编辑于 2013-01-21*下面是一个完整的解决方案，我也[刚刚在 Rcpp Gallery 上发布了这个新帖子](http://gallery.rcpp.org/articles/passing-cpp-function-pointers/)——包括一些评论和示例用法。

```
// [[Rcpp::depends(RcppArmadillo)]]
#include <RcppArmadillo.h>

using namespace arma; 
using namespace Rcpp;

vec fun1_cpp(const vec& x) {    // a first function 
    vec y = x + x;
    return (y);
}

vec fun2_cpp(const vec& x) {    // and a second function
    vec y = 10*x;
    return (y);
}

typedef vec (*funcPtr)(const vec& x);

// [[Rcpp::export]]
XPtr<funcPtr> putFunPtrInXPtr(std::string fstr) {
    if (fstr == "fun1")
        return(XPtr<funcPtr>(new funcPtr(&fun1_cpp)));
    else if (fstr == "fun2")
        return(XPtr<funcPtr>(new funcPtr(&fun2_cpp)));
    else
        return XPtr<funcPtr>(R_NilValue); // runtime error as NULL no XPtr
}

// [[Rcpp::export]]
vec callViaString(const vec x, std::string funname) {
    XPtr<funcPtr> xpfun = putFunPtrInXPtr(funname);
    funcPtr fun = *xpfun;
    vec y = fun(x);
    return (y);
}

// [[Rcpp::export]]
vec callViaXPtr(const vec x, SEXP xpsexp) {
    XPtr<funcPtr> xpfun(xpsexp);
    funcPtr fun = *xpfun;
    vec y = fun(x);
    return (y);
} 
```

# ruby-on-rails - 在 Rails 中调用外部模型方法

> ID：14428689
> 
> 赞同：0
> 
> 时间：2013-01-20T20:02:49.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, models

我有两个模型，`A`在`B`哪里`A` `has_many` `B`。

在`A`模型中，我有一个公共方法，它遍历所有关联`B`对象并更新每个对象中的数据库字段。我想将这些方法放入`B`其中并仅运行其中的循环`A`，但它们似乎没有正确保存。这种方法有问题吗？

以下是这些方法的示例：

```
def update_fields # A Method
  self.b.each do |b|
    b.b_method
  end
end

def b_method # B Method
  self.field = '5'
  self.save
end 
```

运行这种类型的代码，不会将任何内容保存到数据库中，并且不会更新输出。

我怎样才能完成这种类型的事情？或者，是否所有逻辑都需要在`A`控制器中，即使它正在处理`B`字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:18:31.607

尝试使用 update_attributes

```
def update_fields
  b.each { |x| x.update_attributes(field: "5") }
end 
```

或者

```
def b_method
  update_attributes(field: "5")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:44:54.243

它最终成为验证的问题，因此一般方法有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:08:10.423

如果 a belongs_to b 那么 a 只有一个 b - 所以你尝试在 a 方法中迭代多个 b 是没有意义的。

编辑

你不需要“自我”。如果您调用即时方法。self 用于声明类方法。

但最让我困惑的是，你试图在模型中保存一些东西。属于控制器！

# ember.js - Ember 路由器 rootURL 选项（未捕获的错误：没有与 URL '/admin' 匹配的路由）

> ID：14428693
> 
> 赞同：3
> 
> 时间：2013-01-20T20:03:38.823
> 
> 标签：ember.js, ember-router, ember-rails

我正在尝试构建一个将在 /admin/ 前缀上运行的管理系统。

这是我的路线文件

```
App.Router.reopen
  location: 'history'
  rootURL: '/admin'

App.IndexRoute = Ember.Route.extend
  setupController: (controller, model) ->
    @controllerFor('application').set('currentRoute', 'home') 
```

当我转到 /admin 时，我收到以下错误：

```
Uncaught Error: No route matched the URL '/admin' 
```

我只是从emberjs开始，我的代码是基于[这个serie](http://reefpoints.dockyard.com/ember/2013/01/07/building-an-ember-app-with-rails-api-part-1.html)

```
Ember version: v1.0.0-pre.4
Ember-data current api revision:: 11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T22:51:26.260

在旧路由器中，解析路由时会忽略“rootURL”属性。在最新版本的 ember 中，rootURL 似乎只在构建链接时使用。不确定这是错误还是疏忽。作为一种解决方法，请尝试以下方法：

```
App.Router.map(function() {    
  this.resource("admin",  { path: "/admin" }, function() {
    this.route("other");
  });
});

App.IndexRoute = Ember.Route.extend({
  redirect: function() {
    this.transitionTo('admin');
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T22:42:25.277

在讨论 emberjs 中的路由时，这取决于您使用的是哪个版本。1.0pre2 和 1.0pre3 之间有很大的 API 变化。www.emberjs.com 上的文档已经是新 API 的最新版本，并且易于理解。

下面是一个非常小的例子

*   IndexRoute 自动重定向到 '/members' 处所有成员的概览。
*   基于 ID 的动态路由
*   序列化/反序列化，以防参数不是“id”而是其他东西。在下面的示例中，它是“refId”（代表参考 ID）。

好吧，这个例子并没有真正比官方文档显示更多。但附加信息总是很好。

所以，希望这会有所帮助。干杯。

```
App.Router.map(function() {    
  this.resource("members", { path: '/members' });
  this.resource("member",  { path: "/members/:refId" }, function() {
    this.route("delete");
  });
});

App.IndexRoute = Ember.Route.extend({
  redirect: function() {
    this.transitionTo('members');
  }
});

App.MembersRoute = Ember.Route.extend({
  model: function() {
    return App.Member.findAll();
  }
});

App.MemberRoute = Ember.Route.extend({
  model: function(params) {
    return App.Member.find(params.refId);
  },
  // overwrite default serializer (defaults to 'id', member has 'refId')
  serialize: function(model) {
    return { refId: model.refId };
  }
}); 
```

# asp.net - Ajax + 浏览器历史

> ID：14428697
> 
> 赞同：1
> 
> 时间：2013-01-20T20:03:48.800
> 
> 标签：asp.net, ajax

我正在关注管理浏览器历史记录 asp.net 示例文章，但在单击浏览器后退按钮后更新**LabelHistoryData标签时遇到问题。**我在

```
LabelHistoryData.Text = Server.HtmlEncode(e.State["s"]); 
```

但不知何故，单击 btnGetInboxList 或 btnGetSentboxList 后跟浏览器后退按钮，LabelHistoryData.Text 值始终为空。下面是我的一部分代码。有人请善意建议。

谢谢。

```
 <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="True" OnNavigate="OnNavigateHistory" EnableHistory="true" EnableSecureHistoryState="false" />  

      <asp:UpdatePanel ID="uiupInboxMainGrid" runat="server" UpdateMode="Conditional">
                        <ContentTemplate>
                            <asp:Label runat="server" ID="LabelHistoryData" />
                            <asp:Button ID="btnGetMessageContent" runat="server" Text="MsgContent" OnClick="GetMessageContent_Click" />
                            <asp:Button ID="btnGetInboxList" runat="server" Text="Inbox" OnClick="GetInboxList_Click"/>
                            <asp:Button ID="btnGetSentboxList" runat="server" Text="OutBox" OnClick="GetSentBoxList_Click" />
                        </ContentTemplate>
                    </asp:UpdatePanel>

        public void OnNavigateHistory(object sender, HistoryEventArgs e)
            {
                LabelHistoryData.Text = Server.HtmlEncode(e.State["s"]);
            }

        protected void GetInboxList_Click(object sender, EventArgs e)
            {
                LabelHistoryData.Text = ((Button)sender).Text;
                ScriptManager.GetCurrent(this).AddHistoryPoint("s", LabelHistoryData.Text, "Entry: " + LabelHistoryData.Text);
            }

        protected void GetSentBoxList_Click(object sender, EventArgs e)
            {
                LabelHistoryData.Text = ((Button)sender).Text;
                ScriptManager.GetCurrent(this).AddHistoryPoint("s", LabelHistoryData.Text, "Entry: " + LabelHistoryData.Text);
            }

        protected void GetMessageContent_Click(object sender, EventArgs e)
            {
                LabelHistoryData.Text = ((Button)sender).Text;
                ScriptManager.GetCurrent(this).AddHistoryPoint("s", LabelHistoryData.Text, "Entry: " + LabelHistoryData.Text);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:25:25.687

事实证明，UpPanel UpdateMode 必须设置为 Always。

# php - 使用我的PHP，如果用户点击提交（到达那里）或刚刚加载页面，我正在尝试检查页面加载，但如果他们刚刚加载我得到一个错误

> ID：14428700
> 
> 赞同：-2
> 
> 时间：2013-01-20T20:04:37.163
> 
> 标签：php, html

我正在检查它，`if ($_POST["submit"])`但当然如果他们没有，它正在尝试访问一个不存在的变量。但是，我首先使用此检查来查看它是否确实存在，但 PHP 为我输出了错误。

可以吗？我没有对它做任何事情，我只是在检查它是否在那里。或者有更好的方法吗？

我的单选按钮也是如此。如果他们点击提交，我会检查他们的值，但如果他们点击提交而不按任何我会得到一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:05:10.773

你会想要使用[`isset`](http://php.net/manual/en/function.isset.php)它：

```
if ( isset($_POST["submit"]) ) 
```

* * *

更好的方法是只检查[REQUEST_METHOD](http://php.net/manual/en/reserved.variables.server.php)，看看它是否是一个 POST 请求：

```
if ( $_SERVER['REQUEST_METHOD') == 'POST' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:18:22.353

我认为你需要先检查你的表单方法，在处理时确保你的代码是这样的`$_POST`；

```
<form method="post">
    ...
    <input type="radio" name="gender" value="1">
    <input type="radio" name="gender" value="2">
    ...
    <input type="submit" name="submit">
</form> 
```

然后您可以通过以下方式轻松检查您的`$_POST`参数；

```
if (isset($_POST['submit'])) {
    echo "Form submitted!";
    // this makes gender and integer value or 0 silently
    @ $gender = (int) $_POST['gender'];
    if ($gender === 1) echo "Gender = 1";
    else if ($gender === 2) echo "Gender = 2";
    else echo "Gender = NULL";
    // and so on 
```

# java - 如何导出带有外部 JAR、图像、声音文件、字体、dll 等的 Eclipse 项目？

> ID：14428705
> 
> 赞同：0
> 
> 时间：2013-01-20T20:04:56.603
> 
> 标签：java, eclipse, lwjgl

我有一个使用外部 JAR（用于 LWJGL 和 Slick）、本地程序（dll）和资源文件夹（图像、声音文件和 TrueType 字体）的游戏。我怎样才能发布这个游戏，以便其他人可以下载和玩它？

我尝试将其导出为可运行的 JAR，使用 WinRAR 添加资源文件夹，并使用 JarSplice 添加外部 JAR 和本机，但运行时没有任何反应。

[这是我尝试过的每一步的专辑。](http://imgur.com/a/NEzCP#0)

我需要一个循序渐进的教程，而且我不是很有经验。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:59:08.347

最简单的（对用户而言）是：

1.  将所有资源放入罐子中。（按包路径分类，单独签名的 Jars 根目录中的本地，其他任何方便的资源）。
2.  创建一个 JNLP 启动文件（很像加载小程序的页面，但用于自由浮动应用程序。）
3.  [使用Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从网站上的链接部署批次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:47:02.630

从 LWJGL 的 wiki 中试用此链接：http://lwjgl.com/wiki/index.php?title=
[Distributing_Your_LWJGL_Application](http://lwjgl.com/wiki/index.php?title=Distributing_Your_LWJGL_Application)

它描述了如何设置您的类路径以包含必要的文件（Natives/jars 等）

# android - Android：如何从 Main Activity 运行和停止多个线程？

> ID：14428706
> 
> 赞同：1
> 
> 时间：2013-01-20T20:04:57.857
> 
> 标签：android, multithreading, timer

我正在通过按开始按钮运行服务。在服务中运行一个主线程，我从数据库中获取电话号码。获取数据后，我必须以不同的时间间隔执行一些任务。**为此，我使用了在20 秒 pause**后运行的 schedule 。在该暂停期间，我在 2 秒暂停后调用我的**doMyWork() （函数） 。**

我面临的问题是，当 20 秒的计划完成其周期时，**doMyWork()**函数被调用两次、三次……等等。其次，当我从活动中停止我的服务时，**OnDestroy**方法会停止我的服务和 MainThread，但直到它执行 30 次才停止循环。

代码是

```
@Override
public void onCreate() {
    super.onCreate();
    // The service is being created
    myThread.run();
}

private Runnable MainThread = new Runnable() {

    public void run() {
        try {
            Cursor c = db.getNumbers(); // DB operation
            scheduleTaskExecutor = Executors.newScheduledThreadPool(5);
            // This schedule a runnable task every 20 seconds
            scheduleTaskExecutor.scheduleAtFixedRate(new Runnable() {

                public void run() {

                    for (int i = 0; i < 30; i++) {
                        Thread.sleep(2000); // Wait 2 Seconds 
                        Log.v(TAG, "  wait" + i );

                        doMyWork(); // perform this operation
                    }// for
                }
            },  0, 20 , TimeUnit.SECONDS);

        } catch (Exception e) {
            // TODO: handle exception
        }
    }
};      
Thread myThread = new Thread( MainThread);

@Override
public void onDestroy() {
    super.onDestroy();
    Log.v(TAG, "onDestroy()");
    scheduleTaskExecutor.shutdown();
    myThread.stop();
} 
```

请给我建议如何在线程中顺序使用多个计时器。

**编辑**

我想做的是运行循环代码。假设 Loop 有 20 次迭代，并且在每个循环循环中等待 2 秒，然后再执行**doMyWork()**。scheduleTaskExecutor 计时器是可变的而不是固定值。假设我给它一个值 10 秒。然后它应该去 for 循环运行 doMyWork() 函数，暂停 2 秒。

这意味着当 for 循环运行 (i= 1,2,..5) 5 次时 scheduleTaskExecutor (5 x 2 = 10) 应该停止 10 秒。

等待之后应该从 (i = 6,7,...10) 迭代运行循环。

迭代：

```
scheduleTaskExecutor     Step 0
 run
 {
    loop i = 0  till 20   Step 1
      wait 2 seconds     Step 2
       doMyWork()        Step 3 
    loop i = 1  
      wait 2 seconds
       doMyWork()
    loop i = 2  
      wait 2 seconds
       doMyWork()
    loop i = 3  
      wait 2 seconds
       doMyWork()
    loop i = 4  
      wait 2 seconds
       doMyWork()
    loop i = 5  
      wait 5 seconds
       doMyWork()
} 
```

scheduleTaskExecutor 等待 10 步骤 4

第 4 步之后 再次转到第 1 步

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:31:35.637

您每 20 秒运行一次所述循环。

在循环中，您每 2 秒运行 30 次例程。

所以执行循环需要 30 x 2 秒。（60 秒）

第一个循环 20 秒后，您将开始一个新循环。

因此，在创建后 20 秒时，您拥有：

```
Loop 1 20/60 seconds complete.
Loop 2 0/60 seconds complete. 
```

所以每2秒，`doMyWork()`运行两次。

40 秒后，您有：

```
Loop 1 40/60 seconds complete.
Loop 2 20/60 seconds complete.
Loop 3 0/60 seconds complete. 
```

所以每2秒，`doMyWork()`运行三次。

等等。

就您的最后一个问题而言，您需要告诉 Runnable 在销毁时停止。因此需要一个全局变量来执行此操作，以便您可以访问 Runnable。

# python - Python - 函数无法在新线程中运行

> ID：14428707
> 
> 赞同：3
> 
> 时间：2013-01-20T20:04:59.603
> 
> 标签：python, multithreading, wmi

我正在尝试`notepad.exe`使用此功能终止 Windows 上的进程：

```
import  thread, wmi, os
print 'CMD: Kill command called'
def kill():
    c = wmi.WMI ()
    Commands=['notepad.exe']

    if Commands[0]!='All':
        print 'CMD: Killing: ',Commands[0]
        for process in c.Win32_Process ():
          if process.Name==Commands[0]:
              process.Terminate()
    else:
        print 'CMD: trying to kill all processes'
        for process in c.Win32_Process ():
            if process.executablepath!=inspect.getfile(inspect.currentframe()):           
                try:
                    process.Terminate()
                except:
                    print 'CMD: Unable to kill: ',proc.name

kill() #Works               
thread.start_new_thread( kill, () ) #Not working 
```

当我这样调用函数时，它就像一个魅力：

`kill()`

但是在新线程中运行该函数时它会崩溃，我不知道为什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T20:34:43.280

```
import  thread, wmi, os
import pythoncom
print 'CMD: Kill command called'
def kill():
    pythoncom.CoInitialize()
    . . . 
```

在线程中运行 Windows 函数可能很棘手，因为它通常涉及 COM 对象。使用`pythoncom.CoInitialize()`通常可以让你做到这一点。此外，您可能想查看[线程](http://docs.python.org/2/library/threading.html)库。它比线程更容易处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:38:58.553

有几个问题（编辑：自从我开始回答以来，第二个问题已经被“MikeHunter”解决了，所以我将跳过它）：

首先，您的程序在启动线程后立即结束，并带走线程。我会假设这不是一个长期的问题，因为大概这将成为更大事情的一部分。为了解决这个问题，您可以通过`time.sleep()`在脚本末尾添加一个调用来模拟其他保持程序运行的东西，例如 5 秒作为睡眠长度。

这将允许程序给我们一个有用的错误，在你的情况下是：

```
CMD: Kill command called
Unhandled exception in thread started by <function kill at 0x0223CF30>
Traceback (most recent call last):
  File "killnotepad.py", line 4, in kill
    c = wmi.WMI ()
  File "C:\Python27\lib\site-packages\wmi.py", line 1293, in connect
    raise x_wmi_uninitialised_thread ("WMI returned a syntax error: you're probably running inside a thread without first calling pythoncom.CoInitialize[Ex]")
wmi.x_wmi_uninitialised_thread: <x_wmi: WMI returned a syntax error: you're probably running inside a thread without first calling pythoncom.CoInitialize[Ex] (no underlying exception)> 
```

如您所见，这揭示了真正的问题，并将我们引向 MikeHunter 发布的解决方案。

# javascript - RequireJS - 获取参数名称

> ID：14428717
> 
> 赞同：0
> 
> 时间：2013-01-20T20:05:46.237
> 
> 标签：javascript, arguments, requirejs

我有一个使用 requirejs 的应用程序，方法非常简单：

```
define([
    'jquery',
    'scriptone',
    'scripttwo'
], function ($,scriptone,scripttwo) {

for(var i=0, max=arguments.length; i<max; i++){

    // What is the name of the argument ????

}

}); 
```

在 for 循环中，我希望能够检索参数的名称，以便循环通过它将返回 '$'、'scriptone'、'scripttwo' ...

我知道这最终是关于函数和参数的问题，只是想知道在 RequireJS 的上下文中是否有一个简单/好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:27:12.407

您永远不需要在运行时知道变量名。你的申请有问题。

但是，你可以做到。获取[函数的序列化](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/toString)，删除注释等，并解析参数列表。要获取函数本身，您可以使用 deprecated[`arguments.callee`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)但更好地获取对它的命名引用。所以你最终可能会得到

```
var fn = arguments.callee.toString();
var args = fn
  .replace(/\/\/.*?\n|\/\*.*?\*\//g, "") // remove comments
  .match(/^function\s*\S*\s*\(\s*(.+?)\s*\)/)[1] // match arguments list
  .split(/\s*,\s*/) // get argument names
for (var i=0; i<arguments.length; i++)
  console.log((args[i] || "unnamed argument")+":", arguments[i]); 
```

# azure - 使用普通 IP 部署到 Azure

> ID：14428719
> 
> 赞同：0
> 
> 时间：2013-01-20T20:06:00.980
> 
> 标签：azure

我按照[这些说明](http://www.silverlighthack.com/post/2011/05/15/Step-by-step-instructions-to-deploy-ASPNET-MVC-3-to-Windows-Azure.aspx)部署到 Azure：

它确实有效，但我得到了一个网站 URL 的指南。如何将其连接到 Azure 网站？像 patrickinmpls.azure.com 这样的东西？

![指导IP](../Images/dc97b508ed5658193b17da7e9a17d000.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:02:45.720

添加到@mfanto 的评论中，您需要将应用程序发布到生产槽，然后您将获得一个**yourservicename.cloudapp.net** URL，然后您可以将其映射到您的自定义域名。有关更多详细信息，请参阅此链接：http: [//www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/)。

# windows - 程序启动时执行操作

> ID：14428726
> 
> 赞同：0
> 
> 时间：2013-01-20T20:06:31.377
> 
> 标签：windows, winapi, hook, vcl

假设我想在启动特定 EXE 时运行批处理文件。Win32 API 中是否有任何挂钩？

我将 VCL 与 Delphi 一起使用，但关于这方面的一般信息也会很好。该程序应该在后台运行，并且当用户启动应用程序时，程序会检测到这一点，检查应用程序是否符合条件，如果符合，则运行相关的批处理文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:12:03.613

你试过用Delphi的Create Process Function吗？

这是一个小链接，它可以指导您完成该过程：

[http://snipplr.com/view/59064/using-createprocess-to-execute-programs/](http://snipplr.com/view/59064/using-createprocess-to-execute-programs/)

# c++ - 仅使用数值格式化 wx.TextCtrl - 浮点精度

> ID：14428727
> 
> 赞同：2
> 
> 时间：2013-01-20T20:06:36.330
> 
> 标签：c++, visual-c++, wxpython, wxwidgets

我创建了一个简单的应用程序，它使用带有 wxFILTER_NUMERIC 的纯 TextCtrl 小部件，以便只接受数值（参见下面的代码）。

我希望这些值具有固定的显示精度，而不管用户如何输入它们（例如，在指定 17.0 或 17.000000 值的情况下将始终显示 17.0000）。我发现在 wxPython 中有一个选项可以使用派生的 NumCtrl 小部件（http://wxpython.org/docs/api/wx.lib.masked.numctrl-module.html），但我找不到它在基本的 wxWidgets 库中。

那么，是否有一个现成的解决方案可用在某个地方，我根本找不到，或者我必须编写一个函数，一旦插入它就会手动更改数字的格式（处理 EVT_TEXT 和 EVT_TEXT_ENTER 事件并修改输入字符串） ?

到目前为止我所拥有的：

**事件表**

```
BEGIN_EVENT_TABLE(MyFrame, wxFrame) 
    EVT_MENU(ID_Quit, MyFrame::OnQuit)
    EVT_MENU(ID_About, MyFrame::OnAbout)
    EVT_TEXT(ID_textBox, MyFrame::ValueChanged)
    EVT_TEXT_ENTER(ID_textBox, MyFrame::ValueChanged)
END_EVENT_TABLE() 
```

**MyFrame中文本框的实现**

```
wxPanel *panel = new wxPanel(this, -1);

    _textBox1 = new wxTextCtrl(panel,
         ID_textBox, 
         "0.0000", 
         wxPoint(100, 100), 
         wxSize(80,20),
         wxTE_PROCESS_ENTER,
         wxTextValidator(wxFILTER_NUMERIC,&_myValue),
         wxTextCtrlNameStr); 
```

**处理功能**

```
void MyFrame::ValueChanged(wxCommandEvent& WXUNUSED(event))
{
    // modify the string or do something clever
} 
```

**采用的解决方案** 感谢答案，问题已得到解决。这是我的选择：

`

```
wxFloatingPointValidator<double> _val(2,&_myValue,wxNUM_VAL_ZERO_AS_BLANK);
    _val.SetRange(0.,100.);     // set allowable range

_textBox1 = new wxTextCtrl(panel,   // create a textCtrl
     ID_textBox, 
     "0.0000", 
     wxPoint(100, 30), 
     wxSize(80,20),
     wxTE_PROCESS_ENTER,
     _val,          // associate the text box with the desired validator
     wxTextCtrlNameStr); 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:35:33.020

请参阅wxWidgets 2.9 中提供的[wxFloatingPointValidator 。](http://docs.wxwidgets.org/trunk/classwx_floating_point_validator.html)

# javascript - 禁用提交按钮时弹出警报

> ID：14428732
> 
> 赞同：0
> 
> 时间：2013-01-20T20:07:09.123
> 
> 标签：javascript, html

我有一个禁用的提交按钮，除非您选择一个选项

如果用户没有选择一个选项，我想要做的是弹出一个警报

我使用单选按钮作为选项

我有以下代码

```
 <form name="choose" action="index.php" method="post" target="_self">
            <br />
                            <fieldset >
                        <legend class="show_legend">Convert To</legend>
            <div class="radio_buttons">
            <img alt="" src="images/flv.jpg" class="format_button">
            <input  name="type" type="radio" class="blue_font" value="flv" onclick="javascript:document.choose.quality.disabled=false;document.choose.audio.disabled=false;document.choose.size.disabled=false;document.choose.OK.disabled=false;"/>
            <img alt="" src="images/mp4.jpg" class="format_button">
            <input name="type" type="radio" value="mp4"  onclick="javascript:document.choose.quality.disabled=false;document.choose.audio.disabled=false;document.choose.size.disabled=false;document.choose.OK.disabled=false;"/>
            <img alt="" src="images/wmv.png" class="format_button">
            <input name="type" type="radio" value="wmv" onclick="javascript:document.choose.quality.disabled=false;document.choose.audio.disabled=false;document.choose.size.disabled=false;document.choose.OK.disabled=false;" />
            <img alt="" src="images/avi.png" class="format_button">
            <input name="type" type="radio" value="avi" onclick="javascript:document.choose.quality.disabled=false;document.choose.audio.disabled=false;document.choose.size.disabled=false;document.choose.OK.disabled=false;"/>
            <img alt="" src="images/mp3.png" class="format_button">
            <input name="type" type="radio" value="mp3" onclick="javascript:document.choose.quality.disabled=true;document.choose.audio.disabled=false;document.choose.size.disabled=true;document.choose.OK.disabled=false;" /> 
            <img alt="" src="images/ogg.png" class="format_button">
            <input name="type" type="radio" value="ogg" onclick="javascript:document.choose.quality.disabled=false;document.choose.audio.disabled=false;document.choose.size.disabled=false;document.choose.OK.disabled=false;document.choose.audio.low.disabled=true;"/>
            <img alt="" src="images/webm.png" class="format_button">
            <input name="type" type="radio" value="webm" onclick="javascript:document.choose.quality.disabled=false;document.choose.audio.disabled=false;document.choose.size.disabled=false;document.choose.OK.disabled=false;"/>
            </div>
            </fieldset>
                <fieldset >
                        <legend class="show_legend">Optional settings</legend>

            <div class="radio_buttons"style="display:inline;padding:10px" >
            <br />Video quality:
            <select name="quality" class="radio_buttons" disabled="disabled">
              <option  value="2000000" >high</option>
              <option value="1000000">medium</option>
              <option value="800000">low</option>
            </select>
            </div>

            <div class="radio_buttons"style="display:inline;padding:10px" >Audio quality:
            <select name="audio" class="radio_buttons" disabled="disabled">
              <option value="44100" >high</option>
              <option value="22050">medium</option>
              <option name="low" value="11025" >low</option>
            </select>

            <div class="radio_buttons"style="display:inline;padding:10px" >Video size:
            <select name="size" class="radio_buttons" disabled="disabled" >
              <option value="320x240">320x240</option>
              <option value="512x384" selected="selected">512x384</option>
              <option value="640x360">640x360</option>
              <option value="854x480">854x480</option>
              <option value="1280x720">1280x720</option>
            </select>
            </div>

            </fieldset>
            <div class="radio_buttons">

              <input name="OK" type="submit" disabled="disabled" value="" class="send_bt" />
            </div> 
```

如果有人点击提交按钮，它不会提交表单或通知用户任何事情

我想提醒用户他不能提交，除非他选择了一个选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:36:54.107

我解决了这个问题，我得到了一些对我有用的东西

我没有显示禁用的提交按钮，而是将其隐藏并单击它显示

我使用愚蠢的 javascript 代码

```
<script type="text/javascript">
function showStuff(id) {
    document.getElementById(id).style.display = 'block';
} 
```

单选按钮代码

和提交按钮代码

```
<input name="OK" type="submit" disabled="disabled" value="" id="send_bt"  style="display:none"/> 
```

因此，如果有人单击它显示的单选按钮，则 sbumit 按钮将被隐藏，通过这种方式，我设法不显示提交按钮，除非有人选择一个选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:08:43.310

禁用元素不触发任何事件。因此，您无法绑定事件以将该消息显示到按钮。

但是有一个解决方法：创建一个`<div>`与按钮大小相同且位于其正上方的不可见对象。将 click 事件绑定到该元素。启用按钮时隐藏该元素，以便可以单击按钮本身。

# c# - 以编程方式将文件移动到没有管理员权限的程序文件？

> ID：14428733
> 
> 赞同：2
> 
> 时间：2013-01-20T20:07:34.783
> 
> 标签：c#

我有一个非常简单的 exe，它可以与其他一些东西一起下载到一个 zip 文件中。我想要做的是将这些文件之一移动到程序文件中的某个位置。但是，当我这样做时，它说我没有权限，除非我以管理员身份运行它。我并不总是有这个选项。我对此表示怀疑，但是如果没有管理员权限，有没有办法做到这一点？这就是它所做的一切：

```
File.Copy(@"c:/file.txt", @"C:/Program Files (x86)/Folder/file.txt"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T20:22:23.567

不，除非您（作为管理员）已经为您的用户设置了写入该目录的访问权限，否则无法做到这一点。Program Files 的正常访问权限不会让普通用户写入该位置，并且没有覆盖。

这样做的一个原因是为了防止[病毒](http://en.wikipedia.org/wiki/Plural_form_of_words_ending_in_-us#Virus)感染您的系统。由于`Program Files`是所有用户共享的，因此放置在那里的文件可能会被所有登录系统的用户执行。

此外，它还可以防止写得不好的程序将设置保存在程序文件中，这可能会影响/覆盖其他用户的设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-02T04:11:17.783

```
using System.Security.AccessControl;
using System.Security.Principal;

 var dir = System.Environment.ExpandEnvironmentVariables("%systemdrive%\\Program Files");

        if (!Directory.Exists(dir))
            {
            //System.IO.Directory.CreateDirectory(dir);
            string fileName = "file.txt";
            string sourcePath = @"C:/"; //@AppDomain.CurrentDomain.BaseDirectory;
            string targetPath = dir;

            string sourceFile = System.IO.Path.Combine(sourcePath, fileName);
            string destFile = System.IO.Path.Combine(targetPath, fileName);

            System.IO.File.Copy(sourceFile, destFile, true);

        } 
```

# facebook - 为什么 Facebook 不推荐使用 offline_access 并支持具有长期过期时间的 access_tokens ？

> ID：14428737
> 
> 赞同：0
> 
> 时间：2013-01-20T20:08:04.980
> 
> 标签：facebook, oauth

Facebook 弃用offline_access 并支持具有长有效期的access_tokens 的理由是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:31:36.107

这一决定背后的基本原理是确保应用程序在 60 天内至少被用户访问一次。为了扩展用户访问令牌，您的应用程序应该获得短暂的访问令牌，这可以在用户通过您的应用程序**登录**时完成，然后您可以请求图形 api 扩展它。

因此，通过这个扩展程序，Facebook 确保应用程序代表其**活跃用户**“执行”操作。如果用户超过 60 天不使用您的应用，那么您的应用将无法代表其**非活跃**用户执行操作。

但是，请注意，如果您使用永不过期的应用程序访问令牌，即使是非活动用户也可以执行这些操作。当然，您必须申请特殊权限并使用 Facebook 的“实时更新”。

# build - OpenSSL 构建奇怪的行为

> ID：14428738
> 
> 赞同：1
> 
> 时间：2013-01-20T20:08:10.323
> 
> 标签：build, console, openssl, console-redirect

它有点奇怪的故事。我正在尝试构建 openssl 库。好吧，这不是我第一次这样做，直到现在还不错。但是，我决定向 TeamCity 添加构建配置（实际上问题与 TeamCity 无关）以按需构建我所有的第三方库。因此，我使用一组常用的 openssl 构建命令创建了一个步骤：

perl 配置VC-WIN64A

ms\do_win64a.bat

nmake /d /f ms\ntdll.mak

...并且在组装第一个 asm 文件时构建失败。所以我在 VS2012 x64 命令提示符下运行了相同的命令，并且构建成功，正如预期的那样。我花了一段时间才发现问题出在输出重定向上。Teamcity 将构建步骤的输出重定向到 teamcity 构建日志，我也通过将“>1.txt”添加到“nmake /d /f ms\ntdll.mak”命令，构建失败。我会说构建失败的原因有点出乎意料。到目前为止，我已经尝试过：

*   从带有重定向的 VS2010 命令提示符构建相同的内容，失败。
*   在没有重定向的情况下从 VS2010 命令提示符构建相同的内容，成功。
*   从 VS2010/VS2012 命令提示符构建相同的重定向到文件并强制重定向到 CON (nmake /d /f ms\ntdll.mak >CON >1.txt) 失败。
*   谷歌搜索“重定向控制台输出时出现的 nmake 问题” - 没有
*   谷歌搜索“重定向控制台输出时的openssl构建问题” - 没有

我的设置 - Win2008R2，虚拟机。- VS2010，最新更新 - VS2012，更新 1

实际错误： NMAKE : 致命错误 U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\amd64\ml64.EXE"' : return code '0x1' ml64.exe 抱怨 asm 文件说明它应该以“END”语句结尾。确实如此，但是……有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:58:43.820

好的，由于问题出在 perl 并将文件写入标准输出然后重定向它，因此您必须更改以下文件以构建 x64 版本：

1.  加密\aes\asm\aes-x86_64.pl
2.  加密\bn\asm\modexp512-x86_64.pl
3.  加密\bn\asm\x86_64-gf2m.pl
4.  加密\bn\asm\x86_64-mont.pl
5.  加密\bn\asm\x86_64-mont5.pl
6.  加密\md5\asm\md5-x86_64.pl
7.  加密\模式\asm\gash-x86_64.pl
8.  加密\rc4\asm\rc4-md5-x86_64.pl
9.  加密\rc4\asm\rc4-x86_64.pl
10.  加密\sha\asm\sha1-x86_64.pl
11.  加密\sha\asm\sha512-x86_64.pl
12.  加密\whrlpool\asm\wp-x86_64.pl
13.  加密\x86_64cpuid.pl
14.  引擎\asm\e_padlock-x86_64.pl

您必须打开这些文件并将所有“open STDOUT“whateverfile””更改为“open my $asmfile”whaeverfile“”，然后处理字符串连接（仅在 x86_64cpuid.pl 中），然后将其打印到文件中的 STDOUT，类似于“print $code”到“print $asm $code”，当然，不要忘记关闭文件，换句话说，将“close STDOUT”更改为“close $asmfile”

显然，在构建 x64 以外的目标时，必须更改另一组文件。

将尝试将其传达给 openssl 维护者。

# javascript - JQGrid 数据不会在第二次或后续单击事件时重新加载...（它在第一次 getdata 按钮单击时加载）

> ID：14428740
> 
> 赞同：0
> 
> 时间：2013-01-20T20:08:10.300
> 
> 标签：javascript, jquery, jqgrid, jqgrid-asp.net

我正在使用 JQGrid 根据从下拉列表中选择的 LogID 显示来自 db 的一些数据列表。ITS 在第一次点击时正确显示内容。但是在所有后续点击中，页面不会更改或重新加载或做任何事情，但如果我尝试调试脚本，我可以看到按钮点击事件在每次点击时都会被触发，但它仍然没有带回来数据库中更改的 LogID 数据。我不确定，但我认为它与 reloadGrid 触发器有关......

```
 <script type="text/javascript">
    var firstClick = true;
    $(document).ready(function () {
        $('.editor-date > input').datepicker();
        $('.getdata').click(function () {
            if (!firstClick) {
                $("#GridTable").trigger("reloadGrid");
            }
                firstClick = false;
                $('#GridTable').jqGrid({
                    url: '<%= Url.Action("GetData", "Report") %>',
                    datatype: 'json',
                    mtype: 'POST',
                    colNames: ['Log ID'],
                    colModel: [{ name: 'LogID', index: 'MessageLogID', key: true, formatter: pointercursor }],
                    multiselect: true,
                    sortname: 'LogID',
                    sortorder: "asc",
                    viewrecords: true,
                    pager: $('#pager'),
                    rowNum: 20,
                    rowList: [5, 10, 20, 50],
                    postData: {
                        IdParam: $('#testLogID').val()
                    },
                    jsonReader: {
                        repeatitems: false,
                        id: 'LogID',
                        records: 'TotalRecords',
                        total: 'TotalPages',
                        page: 'CurrentPage',
                        root: 'Rows'
                    },
                    loadError: function (xhr, status, error) {
                        messageBox('Error', 'Error occurred loading data.');
                    },
                    height: 'auto',
                    width: 'auto'
                });

            }); 
```

我发现了一个类似的问题，但解决方案不起作用[jQuery 按钮单击刷新 jqGrid 只触发一次](https://stackoverflow.com/questions/1155644/jquery-button-click-refresh-of-jqgrid-only-firing-once)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T21:36:31.140

我认为你应该改变

```
postData: {
    IdParam: $('#testLogID').val()
} 
```

到

```
postData: {
    IdParam: function () {
        return $('#testLogID').val();
    }
} 
```

（有关更多信息，请参阅[我的旧答案](https://stackoverflow.com/a/2928819/315935)）。

您当前的代码保存在第一次调用`$('#testLogID').val()` **时创建网格时的值。**以后的调用使用相同的旧值。`postData`在每次重新加载网格期间调用函数时，函数/方法的使用如下。它将间接完成： jqGrid 使用`$.ajax`which uses which uses `$.param`which calls the function `postData.IdParam`。

此外，我建议您添加`gridview: true`选项并更改`pager: $('#pager')`并`pager: "#pager"`移动`var firstClick = true;`功能内部的行`$(document).ready(function () {...});`。我还想念`} else {`. `if (!firstClick) {`重要的是要理解一个人应该创建*一次*网格并`$('#GridTable').jqGrid({...});`只`$("#GridTable").trigger("reloadGrid");`在以后使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-17T14:02:19.740

插入并刷新 jqgrid，请参阅我的代码。

```
$("#Tab1").click( function(){ 

 var gridArrayData = [];
   var ids =jQuery("#jqGrid").jqGrid('getGridParam','selarrrow'); 
   var totalRowsCount = ids.length;
   if(totalRowsCount>0)
  {
   $.ajax({ 
     type: "POST", 
     url: 'Operaciones_Grilla.php?Op=30'+'&Filtro='+ids+'&page=1&rows=10', 
     dataType: "json",
     success: function(data) {
		$("#jqGrid2")[0].grid.beginReq();
     	var data = data.rows;
		var ii =0;
        for(var i in data)
               {
						gridArrayData.push({
                                id: data[i].id,
                                sistema: data[i].des_sistema,
                                opcion: data[i].des_opciones_sistema,
								id_sistema:data[i].id_sistema,
								id_opcion:data[i].id

                            });                            
                }// cierra el for each
					  jQuery('#jqGrid2').jqGrid('clearGridData')
                     .jqGrid('setGridParam', {data: gridArrayData})
                     .trigger('reloadGrid');
					$("#jqGrid2")[0].grid.endReq();
						$("#jqGrid2").trigger('reloadGrid');
		       }
           }); 
						   $('#tabs a[href="#tabs-2"]').trigger('click');	
						   }else{
							  alert('debe escoger un registro') ;
					}// cierra el íf que cuenta el numero de registros
	});

//*************** PHP CODE ************************//

Operaciones_Grilla.php?Op=30 call this function:

 public function Sube_Data_Grid_Perfiles22($page,$rows,$filtro)
	  {

		 $respuesta = new stdClass();
	     $this->page =$page;
		 $this->limit=$rows;
		 $sql="";
		 $sql='select count(a.*) from opciones_sistema a where a.id_opciones_sistema in  '."(".$filtro.")";
         $count = $this->dbh2->query($sql)->fetchColumn();
		 if( $count >0 ) {
	                $total_pages = ceil($count/$this->limit);
               } else {
	                $total_pages = 0;
               }
              if ($this->page > $total_pages)$this->page=$total_pages;

             $start = $this->limit*$page - $this->limit; 
           $i=0;

           $Sql='select a.id_opciones_sistema, b.des_sistema,a.des_opciones_sistema, b.id_sistema from opciones_sistema a,sistemas b where a.id_sistema = b.id_sistema and a.id_opciones_sistema in '."(".$filtro.") order by b.id_sistema,a.id_opciones_sistema ";

		$stmt = $this->dbh2->prepare($Sql);
		$stmt->execute();

		foreach ($stmt as $row) {

		        $respuesta->rows[$i]['id']=$row["id_opciones_sistema"];
				$respuesta->rows[$i]['des_sistema']=$row["des_sistema"];
				$respuesta->rows[$i]['des_opciones_sistema']=$row["des_opciones_sistema"];
				$respuesta->rows[$i]['id_sistema']=$row["id_sistema"];

                $i++;

   }// cierra sube data grid

     $this->dbh2 = null;

	 return json_encode($respuesta);

}// cierra metodo suba data grid
```

# iphone - 在 cocos2D 场景中推送 Viewcontroller

> ID：14428742
> 
> 赞同：0
> 
> 时间：2013-01-20T20:08:16.150
> 
> 标签：iphone, cocos2d-iphone, uikit

我有一个应用程序。这个应用结合了 UIKit 和 Cocos2D。我有一个 UIKit 菜单，带有一个调用 cocos2D 游戏的按钮。它工作正常。

现在，我想移除 cocos 场景来推送 UIKit 菜单。（游戏结束，需要进入菜单视图）

我试过了

```
[[CCDirector sharedDirector] end];
[[CCDirector sharedDirector].openGLView removeFromSuperview]; 
```

它不起作用。我不知道该怎么做。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:02:00.153

尝试做这样的事情。当您在 uiviewcontroller 上推送 cocos 场景时，请在 ViewDidLoad 方法中添加此代码。

```
-(void)viewDidLoad{
[super viewDidLoad];
CCDirector *director = [CCDirector sharedDirector];

if([director isViewLoaded] == NO)
{

CCGLView *glView = [CCGLView viewWithFrame:[[[UIApplication sharedApplication] keyWindow] bounds]
                               pixelFormat:kEAGLColorFormatRGB565
                               depthFormat:0
                        preserveBackbuffer:NO
                                sharegroup:nil
                             multiSampling:NO
                           numberOfSamples:0];

director.view = glView;

[director setAnimationInterval:1.0f/60.0f];
[director enableRetinaDisplay:YES];
}

director.delegate = self;
[self addChildViewController:director];
[self.view addSubview:director.view];

[director didMoveToParentViewController:self];

if(director.runningScene)
{

[director replaceScene:[SceneFirst scene]];
}
else
{

[director runWithScene:[SceneFirst scene]];
}

} 
```

这里 SceneFirst 是你想要推送的 cocos 场景。只需在你的 UiViewController 中添加 CCDirectorDelegate 作为委托。并在您的 ViewDidUnload 方法中添加这行代码

```
[[CCDirector sharedDirector] setDelegate:nil]; 
```

要弹回您的 Uikit 视图，请在点击的任何 CCmenu 上调用此代码

```
[[CCDirector sharedDirector] stopAnimation];
AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[app.navigationController popViewControllerAnimated:YES]; 
```

希望这有帮助！！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:14:41.087

在 cocos2d 2.0 及以上版本中试试这个：

展示视图控制器：

```
AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];    

//presentModalViewController 
[app.navController presentModalViewController:leaderboardViewController animated:YES];

//dismissModalViewControllerAnimated:YES
[app.navController dismissModalViewControllerAnimated:YES]; 
```

添加子视图：

```
AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
[app.navController.view addSubview:mSegmentedControl]; 
```

# php - 在 PHP 的 split 方法中使用两个标志。为什么| 但不是 &&?

> ID：14428743
> 
> 赞同：-2
> 
> 时间：2013-01-20T20:08:36.120
> 
> 标签：php, bitwise-operators

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

我正在尝试学习 PHP 和编程。在我正在学习的书中，有这样的内容： $flags = PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE；

$flags 用于 split() 方法。

第一个标志是：如果设置了这个标志，preg_split() 只会返回非空的部分。第二个是：如果设置了此标志，则将捕获并返回分隔符模式中的括号表达式。

为什么他不使用 && 运算符而是 | ?

你能解释一下吗？实际上呢？

据我所知，这些是

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T20:14:40.723

&& 是*逻辑与，*而 | 是位运算符。

`a && b`当两个操作数都计算为*true时，计算为**true*。由于标志几乎总是大于 1 的数字，因此该表达式总是计算为*true*。

## 接受位掩码的函数如何工作

### 他们指定常量

请注意，这些常数必须是 2 的幂：

```
FLAG_INT1 = 1
FLAG_INT2 = 2
FLAG_INT3 = 4
FLAG_INT4 = 8 
```

### 您调用组合一些标志的函数

```
myFunction(FLAG_INT1 | FLAG_INT3) 
```

这导致*按位或运算*：

```
 0001
OR 0100
=======
   0101 
```

一个（或两个）操作数中的设置位（ 1 ）也将导致结果中的设置位（*1* *）*。

### 该函数在内部检查每个标志

这需要*按位与运算*：

```
 0101
AND 0001 // check for FLAG_INT1
========
    0001 // true

    0101
AND 0010 // check for FLAG_INT2
========
    0000 // false

    0101
AND 0100 // check for FLAG_INT3
========
    0100 // true 
```

*按位与*要求两个操作数在位置 X 处都有一个设置位 ( 1 *)*，以便在位置 X 的结果中产生一个设置位 ( *1* )。

维基百科也有一篇关于常见位运算符的好文章：[http ://en.wikipedia.org/wiki/Bitwise_operation](http://en.wikipedia.org/wiki/Bitwise_operation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:12:52.037

&& 是逻辑“与”，但 | 是按位的

# c# - 当 .NET 依赖项的版本不匹配时，如何解析引用？

> ID：14428747
> 
> 赞同：2
> 
> 时间：2013-01-20T20:08:58.630
> 
> 标签：c#, .net, visual-studio, windows-phone-8, azure-storage

我试图在我的 Windows Phone 8 项目中包含 WindowsAzure.Storage 库，但由于此错误，它无法解析引用：

> 警告 3 无法解析主要引用“Microsoft.WindowsAzure.Storage”，因为它间接依赖于 .NET Framework 程序集“System.Net.Primitives, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”在当前目标框架中具有比版本“3.9.0.0”更高的版本“4.0.0.0”。站在那里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-16T00:54:58.213

在TechEd [2014 上查看 Microsoft Azure 存储的新增功能](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/14/what-s-new-for-microsoft-azure-storage-at-teched-2014.aspx)- 最新的 4.0 .NET 客户端库包括 Windows、Phone 和 RT 支持。

杰森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T22:04:07.407

您使用的是什么版本的客户端库？此 Nuget 包使您能够使用 Windows Phone 项目 - [nuget storage-preview](http://www.nuget.org/packages/WindowsAzure.Storage-Preview)。有关最终版本的更多信息，请参阅[存储团队博客](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/04/08/microsoft-azure-storage-build-2014.aspx)。

# java - 在 Java 中使用过多的 Ram

> ID：14428749
> 
> 赞同：0
> 
> 时间：2013-01-20T20:09:07.993
> 
> 标签：java, arrays, memory, ram

我正在用java编写一个程序，它必须使用一个大的哈希表，哈希表越大越好（这是一个国际象棋程序：P）。基本上，作为我的哈希表的一部分，我有一个“long[]”数组、一个“short[]”数组和两个“byte[]”数组。所有这些都应该是相同的大小。但是，当我将表大小设置为一千万时，它崩溃并显示“java heap out of memory”。这对我来说毫无意义。这是我的看法：

```
1 Long + 1 Short + 2 Bytes = 12 bytes
x 10,000,000 = 120,000,000 bytes
/ 1024 = 117187.5 kB
/ 1024 = 114.4 Mb 
```

现在，114 Mb 的 RAM 对我来说似乎并不算多。我的 CPU 在我的 Mac 上总共有 4Gb 的 RAM，我有一个名为 FreeMemory 的应用程序，它显示了我有多少可用的 RAM，并且在运行这个程序时它大约是 2Gb。此外，我设置了 java 首选项，如 -Xmx1024m，因此 java 应该能够使用最多内存。那么为什么不让我只分配 114Mb 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:19:41.923

您预测它应该使用 114 MB，如果我运行它（在 4 GB 的 windows 盒子上）

```
public static void main(String... args) {
    long used1 = memoryUsed();
    int Hash_TABLE_SIZE = 10000000;
    long[] pos = new long[Hash_TABLE_SIZE];
    short[] vals = new short[Hash_TABLE_SIZE];
    byte[] depths = new byte[Hash_TABLE_SIZE];
    byte[] flags = new byte[Hash_TABLE_SIZE];
    long used2 = memoryUsed() - used1;
    System.out.printf("%,d MB used%n", used2 / 1024 / 1024);
}

private static long memoryUsed() {
    return Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
} 
```

印刷

```
114 MB used 
```

我怀疑您正在做其他事情，这是导致您的问题的原因。

我正在使用 Oracle HotSpot Java 7 更新 10

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:54:38.647

没有考虑到每个对象都是一个引用并且也使用内存，还有更多“隐藏的东西”......我们还必须考虑对齐......字节并不总是一个字节;-)

*   [Java 对象内存结构](http://www.codeinstructions.com/2008/12/java-objects-memory-structure.html)
*   [Java使用了多少内存](http://kohlerm.blogspot.com.es/2008/12/how-much-memory-is-used-by-my-java.html)

要查看实际使用了多少内存，可以使用分析器：

*   [视觉虚拟机](http://visualvm.java.net/)

如果您使用标准 HashMap（或来自 JDK 的类似），每个“长”（装箱/拆箱）确实超过 8 个字节），您可以将其用作基础......（使用更少的内存）

*   [NativeIntHashMap](https://github.com/ggrandes/kvstore/blob/master/src/main/java/org/kvstore/structures/hash/IntHashMap.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T21:06:05.267

根据我所读到的有关 BlueJ 的信息，几乎不可能找到严肃的技术信息，BlueJ VM 很可能根本不支持原始类型；您的数组实际上是盒装原语。BlueJ 使用所有 Java 功能的一个**子集**，强调面向对象。

如果是这种情况，再加上考虑到 BlueJ VM 的优先级列表中的性能和效率非常低，您实际上可能使用的内存比您想象的要多得多：整个数量级是完全可以想象的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-20T20:15:09.040

我相信一种方法是在每次执行后清理堆内存，这里有一个链接：

[Java 堆空间内存不足](https://stackoverflow.com/questions/6748432/java-heap-space-out-of-memory)

# ios - segue为什么延迟很慢

> ID：14428752
> 
> 赞同：0
> 
> 时间：2013-01-20T20:09:36.500
> 
> 标签：ios, uistoryboardsegue

我已阅读其他 segue 延迟文章，但它们没有提供足够的信息。

我正在使用以下 UIImageView（背景）和 15 个按钮来查看视图。转换有很大的延迟（在 iPhone 4 上）这可能是因为按钮的数量吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:13:27.747

图像更有可能需要时间来加载。加载 15 个按钮几乎不需要任何时间，即使在原始 iPhone 上也是如此。

# c++ - 如果引擎位于线程内，如何处理事件？

> ID：14428755
> 
> 赞同：1
> 
> 时间：2013-01-20T20:09:59.860
> 
> 标签：c++, multithreading, events

所以我有线程`A`是事件发起者（网络/gui）。我在线程`B`中有一个引擎，它在某些`run()`函数中运行并随时更新`update()`。我想知道如何在这种结构之上实现事件。这里的问题是我得到类似的东西

*   每个事件一个互斥锁
*   每个事件的向量
*   每个事件 2 个函数 - 一个用于逐项填充向量，一个用于清空向量并将新数据插入引擎。

所以我**对每个事件**都有这样的伪代码：

```
boost::mutex SomeEventMutex;
std::vector< T > SomeEventFrameData;
void ThreadASendsSomeEvent(T data)
{
    boost::mutex::scoped_lock lock(SomeEventMutex);
    SomeEventFrameData.push_back(data);
}

void ParseIncomeDartaFromSomeEvent()
{
    boost::mutex::scoped_lock lock(SomeEventMutex);
    BOOST_FOREACH(T dataItem, SomeEventFrameData)
    {
        // here can be some more complex operation with given data
        engine->DoStuff(dataItem);
    }
    SomeEventFrameData.clear();
}

void run()
{
    while(1){
        // for each event type
        ParseIncomeDartaFromSomeEvent();
        //Engine Update
        update();
    }
} 
```

看起来很糟糕......我想知道这些问题是否有共同的解决方案？此外，我不知道如何将这个事件变成对象/类，而不是让它的创建和设置更加混乱......（

# error-handling - EitherT 是如何工作的？

> ID：14428756
> 
> 赞同：8
> 
> 时间：2013-01-20T20:10:06.197
> 
> 标签：error-handling, monad-transformers, haskell, either

我花了半天时间试图弄清楚如何使用 EitherT 来处理我的代码中的错误。

我已经定义了一个这样的变压器堆栈。

```
-- Stuff Monad

data StuffConfig = StuffConfig {
  appId     :: T.Text,
  appSecret :: T.Text
}

data StuffState = StuffState {
  stateToken :: Maybe Token,
  stateTime  :: POSIXTime
}

newtype Stuff a = Stuff {
  runStuff :: (ReaderT StuffConfig (StateT StuffState (EitherT T.Text IO))) a
} deriving (Monad, Functor, Applicative, 
            MonadIO, 
            MonadReader StuffConfig,
            MonadState StuffState
            )

askStuff :: StuffConfig -> Stuff a -> IO (Either T.Text a)
askStuff config a = do
  t <- getPOSIXTime 
  runEitherT (evalStateT (runReaderT (runStuff a) config) (StuffState Nothing t)) 
```

只要我只使用`ReaderT`and`StateT`函数，它就可以很好地工作。我的印象是现在我应该能够写出这样的东西：

```
faultyFunction :: String -> Stuff String
faultyFunction s = do
  when s == "left" $ left "breaking out"
  "right" 
```

更重要的是从包中捕获`Either`应该可能的返回值：`hoistEither``errors`

```
faultyLookup :: Map -> String -> Stuff String
faultyLookup m k = do
  hoistEither $ lookup k m 
```

我阅读了关于 monad 转换器的*真实世界的 haskell*章节并摆弄了`lift`. 但是我无法进行任何类型检查。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T20:53:44.887

您不能直接使用`left`and`hoistEither`函数的原因是与`StateT`包不同，`ReaderT`包不提供类似于or的类型类。[`mtl`](http://hackage.haskell.org/package/mtl)[`either`](http://hackage.haskell.org/package/either)`MonadReader``MonadState`

上述类型类透明地处理 monad 堆栈中的提升，但是对于`EitherT`，您必须自己进行提升（或编写`MonadEither`类似于`MonadReader`et al 的类型类）。

```
faultyFunction :: String -> Stuff String
faultyFunction s = do
  when (s == "left") $ Stuff $ lift $ lift $ left "breaking out"
  return "right" 
```

首先，您需要应用`Stuff`包装器，然后`lift`在`ReaderT`变压器上，然后`lift`再在`StateT`变压器上。

您可能想为自己编写实用程序函数，例如

```
stuffLeft :: T.Text -> Stuff a
stuffLeft = Stuff . lift . lift . left 
```

然后你可以像这样简单地使用它：

```
faultyFunction :: String -> Stuff String
faultyFunction s = do
  when (s == "left") $ stuffLeft "breaking out"
  return "right" 
```

或者，如果您为 定义实例，您可以使用[`Control.Monad.Error`](http://hackage.haskell.org/packages/archive/mtl/2.1.2/doc/html/Control-Monad-Error.html)from 。`mtl``Error``Text`

```
instance Error T.Text where
  strMsg = T.pack 
```

现在您可以更改`Stuff`实现的定义`left`，`hoistEither`如下所示：

```
newtype Stuff a = Stuff {
  runStuff :: (ReaderT StuffConfig (StateT StuffState (ErrorT T.Text IO))) a
} deriving (Monad, Functor, Applicative,
            MonadIO,
            MonadReader StuffConfig,
            MonadState StuffState,
            MonadError T.Text
            )

left :: T.Text -> Stuff a
left = throwError

hoistEither :: Either T.Text a -> Stuff a
hoistEither = Stuff . lift . lift . ErrorT . return 
```

有了这个您的原始`faultyFunction`类型检查，无需任何手动提升。

您还可以为（使用from ）的任何实例编写通用实现`left`并适用于：`hoistEither``MonadError``either``Data.Either`

```
left :: MonadError e m => e -> m a
left = throwError

hoistEither :: MonadError e m => Either e a -> m a
hoistEither = either throwError return 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T08:34:50.193

只是添加到shang的答案：`MonadError`基本上是对应的类型类`EitherT`。您可以添加它的实例`EitherT`（由于某种原因它在库中被注释掉了`either`）：

```
import Control.Monad.Trans.Either
  hiding (left, right, hoistEither)

instance Monad m => MonadError e (EitherT e m) where
  throwError = EitherT . return . Left
  EitherT m `catchError` h = EitherT $ m >>= \a -> case a of
    Left  l -> runEitherT (h l)
    Right r -> return (Right r) 
```

然后，定义您自己的方法，这些方法可以概括为`MonadError`：

```
left :: MonadError e m => e -> m a
left = throwError
{-# INLINE left #-}

right :: MonadError e m => a -> m a
right = return
{-# INLINE right #-}

hoistEither :: MonadError e m => Either e a -> m a
hoistEither (Left a)  = throwError a
hoistEither (Right e) = return e
{-# INLINE hoistEither #-} 
```

现在您可以执行以下操作：

```
import qualified Data.Map as Map

newtype Stuff a = Stuff {
  runStuff :: (ReaderT Int (StateT Char (EitherT T.Text IO))) a
} deriving (Monad, Functor,
            MonadReader Int,
            MonadError T.Text, -- <--- MonadError instance
            MonadState Char
            )

faultyLookup :: (Ord k) => Map.Map k a -> k -> Stuff a
faultyLookup m k =
  maybe (left $ T.pack "Lookup error") right $ Map.lookup k m 
```

或将其概括为

```
faultyLookup :: (MonadError T.Text m, Ord k) => Map.Map k a -> k -> m a
faultyLookup m k =
  maybe (left $ T.pack "Lookup error") right $ Map.lookup k m 
```

# vba - VBA和案例，根据范围内的值分配值

> ID：14428757
> 
> 赞同：1
> 
> 时间：2013-01-20T20:10:22.593
> 
> 标签：vba, excel

我有学生的成绩和熟练程度。

例如，对于五年级，有四个熟练程度。四个熟练程度对应字母表中的字母，所以如果一个五年级学生的字母分配为 B，那么他的熟练程度将是“低于熟练”，因为 A 到 R 中的任何字母都会得到“低于熟练”的水平“我想知道如何处理案件，

我对代码的粗略想法如下：

```
Function ConvertScores(Grade, Letter_Score)
Select Case ConvertScore(5, like "[A-R]")
    Case ConvertScore(5, like" 
        ConvertScores = "F & P Remedial"
    Case 2
        ConvertScores = "F & P Below Proficient"
    Case 3
        ConvertScores = "F & P Proficient"
    Case 4
        ConvertScores = "F & P Advanced"

End Function 
```

所以是的，我希望 VBA 有一个列表对象，VBA 中的列表对象是什么？

编辑：我可以使用多个 If 语句来做到这一点，但在我看来，案例会是一个更好的方法。

这是我想用于案例而不是多个 if-thens 的代码

```
Function ConvertScoresMOY(Grade, Letter_Score) As String
If Grade = "5" And Letter_Score Like "[A-R]" Then
    ConvertScoresMOY = "F & P Remedial"
ElseIf Grade = "5" And Letter_Score Like "[S-T]" Then
    ConvertScoresMOY = "F & P Below Proficient"
ElseIf Grade = "5" And Letter_Score Like "[U-V]" Then
    ConvertScoresMOY = "F & P Proficient"
ElseIf Grade = "5" And Letter_Score Like "[W-Z]" Then
    ConvertScoresMOY = "F & P Advanced"
Else:
End If
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:46:54.093

让我们从在一个简单条件中插入所有条件开始：

```
If Grade = "5" Then

End If 
```

那么你可以使用SWITCH CASE：

```
 Select Case Letter_Score
       Case Letter_Score Like "[A-R]"
             ConvertScoresMOY = "F & P Remedial"
       Case val Letter_Score Like "[S-T]"
             ConvertScoresMOY = "F & P Below Proficient"
 End Select 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T21:49:14.143

您可以在另一张表中创建您的字典，然后使用 VLOOKUP() 函数在第一列中搜索值并获取第二列中的值。

# django - 一对多关系上的Django数据库错误

> ID：14428759
> 
> 赞同：1
> 
> 时间：2013-01-20T20:10:40.687
> 
> 标签：django, datamodel

我在 Django 中创建了一个数据模型，它具有多对一的关系（N 个主题到 1 个用户），如下所示：

从 django.db 导入模型 从 django.contrib.auth.models 导入用户

```
# Create your models here.
class Topic(models.Model):
    content = models.CharField(max_length=2000)
    pub_date = models.DateTimeField('date published')
    author = models.ForeignKey(User) 
```

当我尝试在管理页面中加载数据模型时，我收到此错误：

```
Exception Value:    
no such column: talk_comment.author_id 
```

我错过了数据模型中的某些内容吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:11:38.290

您不能使用 修改表`syncdb`。你需要使用[南迁](http://south.readthedocs.org/en/latest/tutorial/part1.html)

它真的非常好，如果出现问题，您甚至可以恢复到以前的迁移

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:14:44.717

您忘记实际修改/创建数据库中的表（手动，使用`South`or `manage.py syncdb`）。

# javascript - 从变量调用的 js array.length 不起作用，为什么？

> ID：14428762
> 
> 赞同：1
> 
> 时间：2013-01-20T20:11:00.343
> 
> 标签：javascript, jquery

这是我从 w3schools 复制的代码，我有不同的代码，但我遇到的问题仍然发生在这个简化的编码中。

```
<!DOCTYPE html>
<html>
<body>

<p id="demo">Click the button to create an array, then display it's length</p>

<button onclick="myFunction()">Try it</button>

<script>
function myFunction()
{
var fruits = ["Banana", "Orange", "Apple", "Mango"];
var foods = ["steak","pizza","bread","fruits"];
var x=document.getElementById("demo");
var y=foods[3];
x.innerHTML= y.length;
}
</script>

</body>
</html> 
```

当我这样做时`x.innerHTML= fruits.length;`，我会`4`回来，这就是我想要得到的。

但是当我打电话

```
var y=foods[3];
x.innerHTML= y.length; 
```

我得到`6`了单词的长度，`"fruits"`但我想要数组的长度`fruits`。

我该怎么做呢？

我正在使用jQuery，不知道这是否会影响任何事情。我必须在某处添加括号或括号吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:20:44.043

如果（且仅当）一个变量 ( `myVar`) 包含另一个对象 ( `myObj`) 的属性名称，您可以使用：

```
myObj[myVar] 
```

访问该属性。

在这种情况下，您的`fruits`数组只是一个普通的局部变量，因此无法（缺少皱眉`eval`函数）间接访问它。

您当然可以使用`fruits.length`直接找到它的长度。

更好的解决方案是食物的嵌套对象，而不是数组：

```
var foods = {
    fruits: [ "Banana", "Orange", "Apple", "Mango" ],
    steak: [ ... ],
    pizza: [ ... ],
    bread: [ ... ]
}; 
```

此时您可以使用上面的语法并编写：

```
var myType = 'fruits';
var count = foods[myType].length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T20:17:21.607

也许你想要的是

```
var fruits = ["Banana", "Orange", "Apple", "Mango"];
var foods = ["steak","pizza","bread", fruits]; 
```

这样你的代码就可以工作了，因为我们在`fruits`里面存储了一个对数组的引用`foods`而不是字符串`"fruits"`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T20:33:00.593

`fruits`您似乎对变量标识符和字符串之间的区别有很大的误解`"fruits"`。

让我们一起描述您的代码，以便您了解自己在做什么。

* * *

*   `var fruits = ["Banana", "Orange", "Apple", "Mango"];`

您有一个名为的变量`fruits`，它标识一个由四个元素组成的数组，**全部为 strings**。您可以使用该数组执行以下操作：

```
alert(fruits.length); // 4
alert(fruits[0]); // Banana
alert(fruits[3]); // Mango
alert(fruits); // Banana, Orange, Apple, Mango 
```

* * *

*   `var foods = ["steak","pizza","bread","fruits"];`

您有一个名为的变量`foods`，它再次标识四个元素的数组：**所有字符串**。您可以再次执行以下操作：

```
alert(foods.length); // 4
alert(foods[0]); // steak
alert(foods[3]); // fruits
alert(foods); // steak, pizza, bread, fruits 
```

* * *

*   你试着数水果，做`foods[3].length`

您应该注意到，当我们这样做时`alert(fruits)`，它会显示出来`Banana, Orange, Apple, Mango`。当我们这样做时`alert(foods[3])`，它就显示出来了`fruits`。这应该给你一个提示：你命名的数组`fruits`和字符串`"fruits"`是两个不同的东西！

这就是为什么`foods[3].length`是 6，因为 的长度`"fruits"`是 6。

* * *

**解决方案**

*编辑：检查 Altiniak 的答案。我留下我的帖子的其余部分进行冗长而有效的解释。使用的想法`window`几乎比使用`eval()`...*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T20:13:24.643

在下面的：

```
var y=foods[3];
x.innerHTML= y.length;" 
```

`foods`您将数组中的第 4 个元素分配给`y`变量，即字符串“fruits”。如果您想要数组的长度，只需执行以下操作：

```
x.innerHTML = foods.length; 
```

**编辑：我假设你只想要 food 数组的长度而不是将 fruits 数组存储在 foods 变量中（如果你需要，Gaby 的回答可以给你）**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T20:20:00.670

希望我能得到你想要的。你有“fruits”这个词，你想从中获取 var named 的内容`fruits`，对吧？

这可以使用`eval`.

```
var fruitlen = eval('fruits').length; 
```

这是你想要的吗？

# delphi - Delphi Twebbrowser 更改文本框的值。

> ID：14428765
> 
> 赞同：5
> 
> 时间：2013-01-20T20:11:13.517
> 
> 标签：delphi, twebbrowser

我在更改 twebbrowser 中文本框的值时遇到了一些困难。我已经尝试过`WebBrowser1.OleObject.Document.getElementById('verification_control_0').value := 'mytext';`和其他一些方法，但它似乎不起作用。

网站代码：

```
 <div id="verification_control_0" class="verification_control">
 <div class="smalltext">
 What are the first 3 letters of our website's name?:<br />
 <input type="text" name="register_vv[q][71]" size="30" value=""  tabindex="6"    class="input_text" />
  </div>
 </div> 
```

如果你能告诉我如何改变价值，`<input type="text" name="register_vv[q][71]" size="30" value="" tabindex="6" class="input_text" />`我将非常感激。感谢阅读和所有回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T10:03:21.760

尝试这个：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  col: IHTMLElementCollection;
  el: IHTMLInputElement;
begin
  col := (WebBrowser1.Document as IHTMLDocument3).getElementsByName('register_vv[q][71]');
  if col.length <> 0 then
  begin
    el := col.item(0, 0) as IHTMLInputElement;
    el.value := 'mytext';
  end;
end; 
```

在 IE8 标准模式下，仅对属性[`getElementById`](http://msdn.microsoft.com/en-us/library/ms536437.aspx)执行区分大小写的匹配。在 IE7 标准模式和以前的模式中，此方法对and属性 执行不区分大小写的匹配，这可能会产生[意外结果](http://www.456bereastreet.com/archive/200802/beware_of_id_and_name_attribute_mixups_when_using_getelementbyid_in_internet_explorer/)。`ID`
`ID``NAME`

因此，如果您`TWebBrowser`使用 IE7 标准模式和以前的模式`getElementById`也应该可以工作：

```
procedure TForm1.Button2Click(Sender: TObject);
var
  el: IHTMLElement;
  inputElement: IHTMLInputElement;
begin
  el := (WebBrowser1.Document as IHTMLDocument3).getElementById('register_vv[q][71]');
  if Assigned(el) then
    if Supports(el, IID_IHTMLInputElement, inputElement) then
      inputElement.value := 'mytext';
end; 
```

使用`getElementsByName`集合来定位元素`NAME`应该是首选的解决方案。

* * *

**编辑：** @SertacAkyuz 第一条评论：

```
WebBrowser1.OleObject.Document.getElementByID('register_vv[q][71]').Value:='tes‌​t'; 
```

我很确定 OP 没有测试*您的*代码（默认情况下*应该可以*工作，除非 OP 明确更改了 IE 浏览模式），`getElementByID('verification_control_0')`而是使用了 - 这是一个`DIV`元素并且不`value`支持方法。（因此出现错误消息`"Method 'value' not supported by automation object"`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:48:53.483

您的 getElementById('verification_control_0') 将获得 DIV 元素，它没有“值”。

您的文本框没有 ID。对于测试，将“name”属性更改为“id”，如下所示

```
<input type="text" id="register_vv[q][71]" size="30" value=""  tabindex="6" class="input_text" /> 
```

并像这样更改您的代码

```
WebBrowser1.OleObject.Document.getElementById('register_vv[q][71]').value := 'mytext'; 
```

# android - 在应用程序生命周期中的什么时候可以/应该使用布局测量？

> ID：14428766
> 
> 赞同：7
> 
> 时间：2013-01-20T20:11:21.953
> 
> 标签：android, view

关于这个问题有很多问题，但大多数都太专业而无法回答我的问题。

我有一个`GoogleMap`我告诉它把它的相机安装到一定的范围内。也许并不奇怪，我收到一个错误：

`java.lang.IllegalStateException: Map size should not be 0\. Most likely, layout has not yet occured for the map view.`

因此，让我们将这个问题抽象为 any `View`。

这个“布局”事件实际发生在什么时候？`onMeasure()`例如，没有出现在[Activity Lifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)中。什么时候调用我的布局需要方法是安全的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T09:52:43.170

正如文档所说，你应该使用这个

```
mapa.moveCamera(CameraUpdateFactory.newLatLngBounds(Builder.build(), 
                    this.getResources().getDisplayMetrics().widthPixels, 
                    this.getResources().getDisplayMetrics().heightPixels, 
                    50)); 
```

这是一项活动，而是

```
mapa.moveCamera(CameraUpdateFactory.newLatLngBounds(Builder.build(), 
                    50)); 
```

这对我有用。

文档

> 注意：如果要在地图经过布局后移动相机，请仅使用更简单的方法 newLatLngBounds(boundary, padding) 生成 CameraUpdate。在布局期间，API 计算正确投影边界框所需的地图显示边界。相比之下，您可以随时使用由更复杂的方法 newLatLngBounds(boundary, width, height, padding) 返回的 CameraUpdate，甚至在地图进行布局之前，因为 API 会根据您传递的参数计算显示边界。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-20T20:47:57.973

要解决更新后的 Maps API 中的这个特殊问题，您应该使用

```
map.moveCamera(CameraUpdateFactory.newLatLngBounds(Builder.build(), 50)); 
```

对于任何其他视图和较旧的 Maps API，请使用[`ViewTreeObserver.OnGlobalLayoutListener`](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html#onGlobalLayout())Simon 的答案。

您也可以使用`View.post()`向`View`消息队列添加一些内容，但我不知道布局是否保证在它的末尾发生（有人说它没有，但[即使是 Groupon + Google 也做错了](https://stackoverflow.com/questions/1343222/is-there-an-example-of-how-to-use-a-touchdelegate-in-android-to-increase-the-siz)）。

对于地图片段：

```
MapFragment.getView().post(new Runnable(){
    run() {
       ...Use the layout params...
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T20:13:59.867

我认为您的意思是在显示 UI 后执行某些操作。

使用全局布局监听器对我来说一直很有效。它还具有在布局更改时能够重新测量事物的优点，例如，如果某些内容设置为 View.GONE 或添加/删除子视图。

```
public void onCreate(Bundle savedInstanceState)
{
     super.onCreate(savedInstanceState);

     // inflate your main layout here (use RelativeLayout or whatever your root ViewGroup type is
     LinearLayout mainLayout = (LinearLayout ) this.getLayoutInflater().inflate(R.layout.main, null); 

     // set a global layout listener which will be called when the layout pass is completed and the view is drawn
     mainLayout.getViewTreeObserver().addOnGlobalLayoutListener(
     new ViewTreeObserver.OnGlobalLayoutListener() {
          public void onGlobalLayout() {
               // at this point, the UI is fully displayed
          }
     }
 );

 setContentView(mainLayout); 
```

[http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T20:20:57.913

我会使用[onWindowFocusChanged(boolean)](http://developer.android.com/reference/android/app/Activity.html#onWindowFocusChanged%28boolean%29)。只需检查活动的窗口是否刚刚获得焦点

```
@Override
public void onWindowFocusChanged(boolean hasFocus)
{
    super.onWindowFocusChanged(hasFocus);

    if( hasFocus )
    {
        // Ask for any view size here
    }
} 
```

# asp.net-mvc - 通过 ajax 向 mvc 控制器发送口音

> ID：14428767
> 
> 赞同：0
> 
> 时间：2013-01-20T20:11:34.897
> 
> 标签：asp.net-mvc, jquery, encode, diacritics

我正在编写一个 MVC 应用程序，它使用 AJAX 向控制器发送和返回数据。我使用巴西葡萄牙语在文本框上写信息，例如*Hidróxido de alumínio*，然后通过 ajax 将它们发送到控制器。关键是文本被截断，例如*HidrÃ³xido de alumÃnio* ....

这是我的部分代码：

```
 $.ajax({
            url: "/Prescricoes/AddToBin",
            type: "POST",
            dataType: "json",
            data: {
                Descricao: medposologia,
                Via: $("#Vias option:selected").val(),
                DVia: $("#Vias option:selected").text(),
                CodigoPrescricao: $("#CodigoPrescricao").val()
            },
            success:
                function (data) {
                    if (data === "ERRO!") {
                        alert("Ocorreu um erro ao adicionar esta linha à prescrição.");
                        return false;
                    }
                    seeBin();
                }
        }); 
```

*medposologia*是被丢弃的字符串。这是控制器的一部分：

```
 [HttpPost]
    public JsonResult AddToBin (PrescricaoSaidaBIN bin, string descricao, int? via, string dvia ,int codigoPrescricao )
    {
        DetalhePrescricao detalheprescricao = new DetalhePrescricao();

        detalheprescricao.DVia = dvia;
        detalheprescricao.CodigoPrescricao = codigoPrescricao;
        detalheprescricao.Descricao = descricao;
        detalheprescricao.Via = via;

        string resultado = "OK";

        try
        {
            bin.AddItem(detalheprescricao);
        }
        catch {
            resultado = "ERRO!";
        }

        return Json(resultado);
    } 
```

字符串*descricao*接收*到 medposologia*已经垃圾了！

如何以正确的方式发送带有重音和其他字符的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:40:29.657

用这个

```
var data = {
    Via: $("#Vias option:selected").val(),
    Descricao: medposologia,
}; 
```

和

```
 $.ajax({
            url: "/Prescricoes/AddToBin",
            type: "POST",
            dataType: "json",
            data: JSON.stringify(data),
            success:
                function (data) {
                    if (data === "ERRO!") {
                        alert("Ocorreu um erro ao adicionar esta linha à prescrição.");
                        return false;
                    }
                    seeBin();
                }
        }); 
```

最后请使用英文名称

# dependencies - CMake：如何将依赖项从可执行文件设置为自定义目标

> ID：14428768
> 
> 赞同：3
> 
> 时间：2013-01-20T20:11:55.293
> 
> 标签：dependencies, cmake

我在使用 cmake 2.8.1 的 Linux 环境中使用 CMake。我还尝试了 cmake 2.8.7，结果相同。

我需要对存档（静态库）进行一些特殊的调节。这是作为 cmake custom_command 完成的。结果是一个新的存档，应该在可执行文件的链接中使用。调节的输入档案也是一个 cmake 目标。

我需要的是存档的条件版本和可执行文件之间的依赖关系。使用 add_dependencies 不起作用，我不明白为什么。

我创建了一个示例来显示 cmake 的行为。该示例包含 2 个 C 文件，一个用于存档，一个包含 main()。作为简单的存档条件，我只是制作了先前生成的存档的副本。

这是2个源文件：

主.c：

```
int myPrint(void);

int main(void)
{
  myPrint();
} 
```

mylib.c：

```
#include <stdio.h>

int myPrint(void)
{
  printf("Hello World\n");
} 
```

这是我创建的 CMakeLists.txt：

```
cmake_minimum_required(VERSION 2.8)

project(cmake_dependency_test)

add_library(mylib STATIC mylib.c)

add_custom_command(OUTPUT libmylib_conditioned.a
                   COMMAND cp libmylib.a libmylib_conditioned.a
                   DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/libmylib.a
                   COMMENT "Conditioning library")
add_custom_target(conditioning DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/libmylib_conditioned.a)
add_dependencies(conditioning mylib)

add_executable(cmake_dependency_test main.c)
add_dependencies(cmake_dependency_test conditioning)
target_link_libraries(cmake_dependency_test -L. mylib_conditioned) 
```

首先，我创建档案 mylib。使用 add_custom_command 我进行条件处理， add_custom_target 为条件存档提供顶级目标。由于我需要在构建条件存档之前更新输入存档，因此我在输入存档顶级目标和条件存档顶级目标之间添加了依赖关系。这完美！当我触摸 mylib.c 并运行 make conditions 时，会构建输入存档，然后是条件存档。

好的。现在我使用条件存档进行链接。为了使可执行文件依赖于条件存档，我再次使用了 add_dependencies。但是触摸库源 mylib.c 然后运行 ​​make 不会按预期更新可执行文件。

CMakeLists.txt 中的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:01:16.043

您可以尝试为目标 cmake_dependency_test 设置目标**属性**[LINK_DEPENDS](http://cmake.org/cmake/help/v2.8.8/cmake.html#prop_tgt%3aLINK_DEPENDS)。

 **```
...
add_executable(cmake_dependency_test main.c )  
set_property(TARGET cmake_dependency_test PROPERTY LINK_DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/libmylib_conditioned.a)  
add_dependencies(cmake_dependency_test conditioning mylib)
target_link_libraries(cmake_dependency_test -L. mylib_conditioned) 
```**

# php - 实时搜索没有给出正确的结果

> ID：14428769
> 
> 赞同：0
> 
> 时间：2013-01-20T20:11:57.220
> 
> 标签：php, ajax, mysqli

试图让我的实时搜索“正常”工作。当我输入“a”时，我在框下方的区域（如下拉菜单）中得到“aussie”和“australian”（不确定它们来自哪里，因为它们不在我的数据库中）。我可以选择其中之一，它会填充文本框。向我建议的代码使用我不熟悉的 mysqli。当我添加一个典型的 SELECT 语句时，我习惯于看到正确的数据（或多或少），但它是不可选择的。我说或多或少的原因是“a”像以前一样给了我“澳大利亚”和“澳大利亚”（在下拉菜单中）。添加“n”（即搜索“an”）为我提供了我的数据库中包含 DIV 中的字符串但不可选择的所有名称的列表。

索引.html

```
<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript"> 
        $(document).ready(function() {
            $("#faq_search_input").keyup(function() {
                var faq_search_input = $(this).val();
                var dataString = 'keyword='+ faq_search_input;

                if(faq_search_input.length>1) {
                    $.ajax({
                        type: "GET",
                        url: "ajax-search.php",
                        data: dataString,
                        success: function(server_response) {
                            document.getElementById("searchresultdata").style.display = "block";
                            $('#searchresultdata').html(server_response).show();
                        }
                    });
                } return false;
            });
        });
    </script>

</head>
<body>
    <div class="searchholder">
       <input  name="query" class="quicksearch" type="text" id="faq_search_input" />
       <div id="searchresultdata" class="searchresults" style="display:none;"> </div>
    </div>
</body>
</html> 
```

ajax-search.php

```
<?php
    //you must define your database settings
    define("DB_HOST", "localhost");
    define("DB_USERNAME", "root");
    define("DB_PASSWORD", "");
    define("DB_NAME", "mydb");
    if(isset($_GET['keyword'])) {
        $search = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);
        if ($search->connect_errno) {
            echo "Failed to connect to MySQL: (" . $search->connect_errno . ") " .     $search->connect_error;
            $search->close();
        }
        $keyword =  trim($_GET['keyword']) ;

        //original statement
        //$query ="SELECT COLUMN_NAME FROM ".DB_NAME.".INFORMATION_SCHEMA.COLUMNS WHERE COLUMN_NAME LIKE '%".$keyword."%'";

        //my edited statement
        //$query ="SELECT name FROM ".DB_NAME.".INFORMATION_SCHEMA.COLUMNS WHERE name LIKE '%".$keyword."%'";

        //basic sql statement
        $query ="SELECT name FROM users WHERE name LIKE '%".$keyword."%'";

        $values = $search->query($query);
        if( $search->error ) exit( $search->error ); 

        if($values->num_rows != 0) {
            while($row = $values->fetch_assoc()) { 
                echo $row['name']."<br>";
            } 
        }
        else {
            echo 'No Results for :"'.$_GET['keyword'].'"';
        }
    }
?> 
```

数据库包含一个名为 users 的用户数据表，其中包含一个名为 name 的列。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:58:07.973

在此处的教程中找到使用的解决方案 [http://www.htmlblog.us/jquery-autocomplete](http://www.htmlblog.us/jquery-autocomplete)

# xcode - 如何指定 XCode 存储已编译二进制文件的位置？

> ID：14428770
> 
> 赞同：5
> 
> 时间：2013-01-20T20:11:59.273
> 
> 标签：xcode, binary-data

我正在用 C++11 编写，由于某种原因，我无法让 gcc 编译它，所以我一直在使用 XCode。但是，我正在编写从命令行获取参数的程序，因此我需要能够从 shell 运行它们。现在，XCode 正在将它编译的二进制文件埋在一个很深且不方便的位置（/Users/username/Library/Developer/XCode/DerivedData/ProjectName/Build/Products/Debug/...哎呀！）。我希望能够为他们指定一个更好的位置，并且可能还有另一个名字。我正在使用 XCode 4.5.2。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T00:36:25.853

You can configure this once globally for all projects in the Xcode preferences:

"Xcode" Menu -> "Preferences..." -> "Locations" Tab -> "Advanced..." Button

Or you can change it per project. Just open a project, select one of the project windows and then:

"File" Menu -> "Project Settings..." -> "Advanced..."

Unless otherwise configured, new projects use the defaults you have configured in the global Xcode prefs, but you may want to override them for individual projects.

Note that if you select "Legacy", Xcode will place them by default into the folder where the Xcode project itself is located, but "Legacy" also allows you to specify the location using build settings, thus you can even set different locations per target. The project settings are named `Build Products Path` and `Intermediate Build Files Path`. If you are not in "Legacy" mode (either by setting it on the project or globally for all projects), these two build settings have no effect and are entirely ignored.

Also note that when you build Xcode projects on command line using `xcodebuild`, they are always built in legacy mode, regardless what you configured in Xcode or in the project settings. This is useful, since it allows you to override the output location from command line by overriding the two projects settings I mentioned above. This can be either done in a `xcconfig` file, just tell `xcodebuild` to read config from such a file (`-xcconfig <filename>`) or it can be done directly on the command line by adding `<setting>=<value>` as an argument at the end of the `xcodebuild` call. When specified in a `xcconfig` file or via command line, the two settings are named `SYMROOT` (=`Build Products Path`) and `OBJROOT` (=`Intermediate Build Files Path`).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T23:24:04.897

您可以在 Preferences -> Locations 中指定位置。我使用`~/tmp`：

![在此处输入图像描述](../Images/18574cdb597277964fbaee8655bc1fec.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-03T01:52:29.167

或者在 Xcode 中，您可以转到“构建阶段”和“添加新的构建阶段”，选择“新运行脚本阶段”。然后只需添加一个类似于`cp /path/to/build/products/productname /path/to/where/you/want/to/copy/newproductname`. 是`cp`命令行**复制**命令。这是将构建产品放置在您想要的位置的好方法。

# android - 自动完成下拉列表不会显示

> ID：14428772
> 
> 赞同：2
> 
> 时间：2013-01-20T20:12:06.370
> 
> 标签：android, web-services, autocomplete

最终，我试图从 web 服务结果中实现自动完成列表，到目前为止，我有这段代码，我记录了从服务返回的结果，这些结果是正确的，但结果不会被填充到下拉列表中，因此我可以从中进行选择。我认为这可能与我放置适配器的方式有关。

```
 AlertDialog.Builder adb = new AlertDialog.Builder(SettingsMain.this);
                LayoutInflater inflater = SettingsMain.this.getLayoutInflater(); 
                final View searchlayout = inflater.inflate(R.layout.search_friend, null);

                friend_name = (AutoCompleteTextView) searchlayout.findViewById(R.id.friend_name);
                friend_name.setThreshold(3);
                dpy = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_dropdown_item_1line,adapterList);
                friend_name.setAdapter(dpy);
                friend_name.addTextChangedListener(new TextWatcher() {
                    public void afterTextChanged(Editable editable) {

                    }

                    public void beforeTextChanged(CharSequence charSequence, int arg1, int arg2, int arg3) {

                    }

                    public void onTextChanged(CharSequence charSequence, int start, int before, int count) {
                        String text = charSequence.toString();
                        if (text.length() > 3) {
                            new MyAsyncTask().execute(url+text);

                        }
                    }
                });

                adb.setView(searchlayout)

               .setPositiveButton("Ok", new DialogInterface.OnClickListener() {  
                    public void onClick(DialogInterface dialog, int whichButton) {  

                        String name = friend_name.getText().toString();
                        Log.d( "ECHO" , "text : " + name);
                        return;                  
                       }  
                  })
               .setNegativeButton("Done", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {

                        dialog.cancel(); 
                    }
                }); 

                    adb.show(); 
```

这是我的 asynctask 类

```
 class MyAsyncTask extends AsyncTask<String, Void, JSONObject>{
    ArrayList<String> names;
    JSONObject jArray;

    @Override
    protected void onPreExecute(){

    }

    @Override
    protected JSONObject doInBackground(String... params) {
        try {
            String url = params[0];
            HttpClient httpClient = new DefaultHttpClient();
            HttpResponse response = null;
            InputStream is = null;
            String result = null;
            StringBuilder sb = null;

            response = httpClient.execute(new HttpPost(url));
            is = response.getEntity().getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");
            String line = "0";

            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }

            is.close();
            result = sb.toString();
            jArray = new JSONObject(result);

        } catch(Exception e){
            Log.v("DOIB",e.getMessage());
        }
        return jArray;
    }

    @Override
    protected void onPostExecute(JSONObject result_data){
        try{

            for (int i = 0; i < result_data.length(); i++) {

                adapterList.add(result_data.getJSONObject("friend"+i).optString("user"));
                Log.d("NMES", result_data.getJSONObject("friend"+i).optString("user").toString());
            }
            dpy.notifyDataSetChanged();
        }catch(Exception e){ Log.d("SYNCERR", e.toString());}
    }

} 
```

任何提示或帮助将不胜感激。谢谢 ：）

# 更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:19:50.363

您无法以您尝试的方式从 asynctask 返回数据。你必须这样做：

```
ArrayList<String> adapterList = new ArrayList<String>();
new MyAsyncTask() {
    @Override
    protected void onPostExecute( ArrayList<String> list ) {
        adapterList = list;
    }
}.execute( ... ); 
```

# ruby-on-rails - 如何仅获取视图中最新的嵌套列？

> ID：14428777
> 
> 赞同：1
> 
> 时间：2013-01-20T20:12:33.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如果我试图仅在视图内获取它。
我怎样才能？

**控制器**

```
@last_comment = @topic.comments.last 
```

**看法**

```
<%= @last_comment.user.nickname %> 
```

应该是这样的吗？

```
<%= topic.comments.last.user.nickname %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:27:23.927

尝试

```
topic.comments.order("id").last.user.nickname 
```

# java - 我不确定如何修复此代码。第一部分是一个循环（需要是第一部分），我不知道如何关闭它

> ID：14428780
> 
> 赞同：1
> 
> 时间：2013-01-20T20:12:45.747
> 
> 标签：java

好的，这里是代码，第一部分试图继续滚动 2 个骰子，直到它们加到 7 或 11，然后继续其余代码。我只能让它滚动一次，如果它是 7 或 11，代码就会停止。

```
import java.io.*;

public class JavaOlympics {

    public static void main(String args[]) throws IOException {
        int die1, die2, total;
        // Continue loop until reaches a total of 7 or total of 11
        while (true) {
            die1 = 1 + (int) (Math.random() * 6);
            die2 = 1 + (int) (Math.random() * 6);
            // Display the dice roll
            System.out.println("Die_1 = " + die1);
            System.out.println("Die_2 = " + die2);
            // Add the results
            total = die1 + die2;
            // Output total
            System.out.println("Total = " + total);
            System.out.println();
            // Break loop when total of 7 or 11 is reached
            if (total == 7 || total == 11)
                break;

            String s1, s2;
            // DataInputStream dis = new DataInputStream(System.in); //deprecated
            BufferedReader dis = new BufferedReader(new InputStreamReader(System.in));
            // Ask for string input
            System.out.println("Input two strings one by one");
            s1 = dis.readLine();
            s2 = dis.readLine();
            // Organize strings in alphabetical order
            System.out.println("\nStrings in alphabetical order");
            if (s1.compareTo(s2) <= 0) {
                System.out.println(s1);
                System.out.println(s2);
            } else {
                System.out.println(s2);
                System.out.println(s1);
            }
            // Count characters in the strings
            System.out.println("\nNo.of characters");
            System.out.println(s1 + " :: " + s1.length());
            System.out.println(s2 + " :: " + s2.length());

            // Convert strings between lowercase and uppercase
            System.out
                    .println("\nFirst String in Uppercase and Second String in Lowercase");
            System.out.println(s1.toUpperCase());
            System.out.println(s2.toLowerCase());

            String s;
            // DataInputStream dis2 = new DataInputStream(System.in); // deprecated
            BufferedReader dis2 = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("Enter a sentence");
            // Request sentence input from user
            s = dis2.readLine();
            // Count number of spaces
            int space_count = 0;
            for (int i = 0; i < s.length(); i++) {
                if (s.charAt(i) == ' ') {
                    space_count++;
                }
            }
            // Output number of words
            System.out.println("Number of words = " + (space_count + 1));
            // Output number of characters and average characters per word
            System.out.println("Number of characters = " + (s.length()));
            System.out.println("Average number of characters/word = "
                    + (1.0 * (s.length() / space_count)));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:16:09.443

> 然后继续剩下的代码

您的所有代码都包含在`while`循环中。当你`break`离开它时，没有更多的代码可以执行。

看你是否使用了合理的缩进会容易得多。

要修复，您可能只需要移动一个右括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:17:28.183

您的所有代码都在 while 循环内，您错过了需要循环结束的封闭括号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:50:05.543

你到底想在你的代码中做什么。您的代码工作正常，但它会运行到一个循环中，除非并且直到 2 个骰子的总和的值等于 11 或 7。

您的整个代码都在 while 循环中。因此，根据我对您问题的理解，如果您希望在 while 循环完成后执行其余代码，则只需按如下方式关闭 while 循环

```
while(true)
{
die1 = 1 + (int)(Math.random()*6);
die2 = 1 + (int)(Math.random()*6);
//Display the dice roll
System.out.println("Die_1 = " + die1);
System.out.println("Die_2 = " + die2);
//Add the results
total = die1 + die2;
//Output total
System.out.println("Total = " + total);
System.out.println();
//Break loop when total of 7 or 11 is reached
if (total == 7 || total == 11) break;
} // close your while loop here and remove one brace at the end of your class. 
```

如果我的理解有误可以指正

# php - Laravel 会话在原生 PHP 中不可用？

> ID：14428785
> 
> 赞同：4
> 
> 时间：2013-01-20T20:13:24.283
> 
> 标签：php, laravel

Laravel 新手，在使用 Sessions 时遇到了一些问题。具体来说，从 Laravel 之外的 PHP 文件中读取会话数据。

例如，假设我像这样设置会话变量：`Session::put('isAuthorized', 'yes')`- 我可以在 Laravel 上下文中很好地检索它，`Session::get('isAuthorized')`但以下 PHP 不会检索此会话密钥 -

```
<?php
session_start();
echo $_SESSION['isAuthorized'];
?> 
```

返回

```
Notice: Undefined index: isAuthorized in C:\xampp\htdocs\session.php on line 3 
```

我尝试将 Laravel 会话驱动程序设置为默认`cookie`和`file`模式，结果相同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-12T12:54:17.037

您还可以编写一个会话适配器，因此该`$_SESSION`变量将是它的一个实例：

```
<?php 
class SessionAdapter implements \ArrayAccess {

  public function offsetExists($offset) {
      return Session::has($offset);
  }

  public function offsetGet($offset) {
      return Session::get($offset);
  }

  public function offsetSet($offset, $value) {
      return Session::put($offset, $value);
  }

  public function offsetUnset($offset) {
      return Session::forget($offset);
  }

} 
```

然后在你的代码中的某个地方：

```
<?php 
$_SESSION = new SessionAdapter();
// or
$GLOBALS['_SESSION'] = new SessionAdapter(); 
```

这样原生 PHP 会话和 Laravel 会话将是“相同的”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T20:39:53.173

Laravel 为其会话使用存储驱动程序，即 cookie、文件、数据库、内存、memcached 和 redis（以及 Laravel 4 中的 APC）。

> 网络是一个无状态的环境。这意味着对您的应用程序的每个请求都被认为与之前的任何请求无关。但是，会话允许您为应用程序的每个访问者存储任意数据。每个访问者的会话数据存储在您的网络服务器上，而包含会话 ID 的 cookie 存储在访问者的机器上。此 cookie 允许您的应用程序“记住”该用户的会话，并在对您的应用程序的后续请求中检索他们的会话数据。

^([http://laravel.com/docs/session/config](http://laravel.com/docs/session/config))

默认存储驱动程序是 Cookie，所以试试这个：

```
print_r($_COOKIE); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-22T09:56:29.067

**请注意，此答案特定于 Laravel 3**

Laravel 不使用 PHP 会话，所以忘记`session_start()`,`$_SESSION`等。

如果您使用文件会话驱动程序运行，则会话数据存储在 storage/sessions 中的文件中。您可以通过从 cookie 中读取 Laravel 会话 ID 来获取文件的名称。因此，解决您的问题的 hacky 方法是编写一些从 cookie 获取会话 ID 的代码，然后在 storage/sessions 文件夹中查找具有该名称的文件，读入该文件，`json_decode()`然后您就可以阅读整个事物。

如果您使用 cookie 会话驱动程序运行，则所有会话数据都存储在 cookie 中，但它是加密的，因此您必须拥有密钥的副本（应该在 application/config/application.php ) 然后找出 Laravel 使用的加密方法，以便您可以解密它。然后您可以读取所有会话变量。

要实现您希望实现的目标 - 即确定当前人员是否已获得授权，最好将 API 构建到您的应用程序中并对其进行保护，以便只能由 localhost 访问。从性能的角度来看，这不是一个很好的解决方案，但可能更优雅，因为您没有在 Laravel 会话管理的内部进行修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T07:46:11.133

Session handling in Laravel is indeed different from native PHP session. To use native PHP session, set the value as below:

```
<?php
    session_start();

    $_SESSION['isAuthorized'] = 'yes';

    echo $_SESSION['isAuthorized']; // output yes
?> 
```

# clojure - Clojure 编译

> ID：14428788
> 
> 赞同：1
> 
> 时间：2013-01-20T20:13:44.583
> 
> 标签：clojure, compilation

我在 clojure 编译时遇到问题：当我在 windows 和终端（在主目录中）的 cmd.exe（在 clojure 的主文件夹中执行）中使用“（编译 app.clj）”函数时linux-clojure 中的 ubuntu 软件中心）抛出 classnotfoundexception 并且在准备好所需设置时找不到源。请有人帮我设置编译。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:43:36.487

首先，您没有正确使用编译功能。 [文档](http://clojuredocs.org/clojure_core/clojure.core/compile)明确指出参数必须是命名空间符号。我不知道 app.clj 的命名空间，但它应该看起来像*my-project.app*。因此正确的调用将类似于：

```
(compile 'my-project.app) 
```

可能还有其他问题（比如没有定义正确的类路径），但可以使用[Leiningen](http://leiningen.org/)轻松解决。如果您还没有使用它，那么您绝对应该使用它。

# javascript - 如何使用谷歌分析跟踪用户听了一首歌的秒数？

> ID：14428791
> 
> 赞同：3
> 
> 时间：2013-01-20T20:14:04.457
> 
> 标签：javascript, google-analytics

所以基本上我有一个简单的 javascript 播放器，当用户点击播放歌曲开始时，我用这段代码跟踪它：

```
_gaq.push(['_trackEvent', 'player', 'play', 'songName', '0']); 
```

这很完美，现在每 10 秒我再次触发此代码，我想知道是否有办法告诉谷歌这是同一用户正在收听的同一首歌曲，只需几秒钟。

也许是这样的：

```
_gaq.push(['_trackEvent', 'player', 'play', 'songName', '10']); 
```

接着：

```
_gaq.push(['_trackEvent', 'player', 'play', 'songName', '20']); 
```

依此类推，直到结束，但到目前为止，谷歌似乎认为它们都是不同的事件。有没有人遇到过这样的事情？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T02:03:29.543

AFAIK 在 GA 中确实没有一种简单的方法可以做到这一点（在 Omniture 等其他报告工具中实际上很容易），但是，你得到你所支付的！但这里有一些建议...

不是传递歌曲的当前位置，而是传递上一个事件滴答声消耗了多少。因此，换句话说，每 10 秒弹出一个值 10。然后在您的报告中，在指标组中，您可以使用“内容”>“事件值”指标来显示总量。这样做的主要缺点是它会告诉你一首歌的整体听了多少，但并不能真正告诉你人们听了多远。例如，如果它说“100”，那么它可能是 1 个人听 100 秒或 10 个人听 10 秒。当然，有一些方法可以获得更多的粒度，比如整体平均消费，但没有真正的桶可言。

另一种方法是为达到的里程碑百分比创建存储桶。大多数人做 10% 的增量或 25% 的增量。这是更常见的方法，因为它减少了向 GA 发出的请求数量，并使报告更清晰，需要排序的值更少（如果你仔细想想，知道有多少人在 36 秒与37 秒的东西可能不是很可操作）。

它看起来像这样：

初始播放

`_gaq.push(['_trackEvent', 'player', 'songName', 'play']);`

25% 听过

`_gaq.push(['_trackEvent', 'player', 'songName', '25%']);`

50% 听过

`_gaq.push(['_trackEvent', 'player', 'songName', '75%']);`

100% 聆听

`_gaq.push(['_trackEvent', 'player', 'songName', '100%']);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:34:02.320

正如我在评论中所说。只需触发开始事件，如果用户单击停止按钮或离开页面（onbeforeunload），则推送停止事件。

```
var isPlaying = false;
// the play start event
somestartbutton.onclick = function () {
   isPlaying = true;
  _gaq.push(['_trackEvent', 'player', 'songName', 'play']);
};

// the play start event
somestopbutton.onclick = function () {
  if (isPlaying) {
    isPlaying = false;
    _gaq.push(['_trackEvent', 'player', 'songName', 'stop']);
  }
};

// before the window is unloaded, which means the user leaves the page
window.onbeforeonload = function () {
  if (isPlaying) {
    isPlaying = false;
    _gaq.push(['_trackEvent', 'player', 'songName', 'stop']);
  }
} 
```

当然，您应该稍微重构一下并稍微干燥代码，但它应该只是让您了解它如何解决您的问题。

# php - 在PHP中出现一定数量的子字符串后截断字符串？

> ID：14428801
> 
> 赞同：1
> 
> 时间：2013-01-20T20:15:01.560
> 
> 标签：php, string, variables, substring, truncate

> **可能重复：**
> [如何在第 n 次出现针时拆分 PHP 中的字符串？](https://stackoverflow.com/questions/5956066/how-to-split-a-string-in-php-at-nth-occurrence-of-needle)

假设我有一个字符串变量：
`$string = "1 2 3 1 2 3 1 2 3 1 2 3";`

我想从子字符串“2”的第四次出现开始切断这个字符串的结尾，所以`$string`现在等于：
`"1 2 3 1 2 3 1 2 3 1"`
有效地切断第四次出现的“2”及其之后的所有内容。怎么做呢？我知道如何用 来计算出现次数`substr_count($string,"2");`，但我还没有在网上搜索到任何其他内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:23:31.743

要找到第四个的位置，`2`您可以从偏移量 0 开始并递归调用`$offset = strpos($str, '2', $offset) + 1`，同时跟踪到目前为止您匹配了多少个 2。一旦达到 4，您就可以使用`substr()`.

当然，上面的逻辑并没有考虑`false`returns或者没有足够的2，我就交给你了。

* * *

您也可以使用`preg_match_all`with `PREG_OFFSET_CAPTURE`flag 来避免自己进行递归。

* * *

另一种选择，扩展@matt 想法：

```
implode('2', array_slice(explode('2', $string, 5), 0, -1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:26:21.423

可能这对你有用：

```
$str = "1 2 3 1 2 3 1 2 3 1 2 3"; // initial value
preg_match("#((.*)2){0,4}(.*)#",$str, $m);
//var_dump($m);
$str = $m[2]; // last value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T20:26:22.433

此代码段应该这样做：

```
 implode($needle, array_slice(explode($needle, $string), 0, $limit)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T20:29:37.987

```
$string = explode( "2", $string, 5 );
$string = array_slice( $string, 0, 4 );
$string = implode( "2", $string ); 
```

在此处查看实际操作：[http ://codepad.viper-7.com/GM795F](http://codepad.viper-7.com/GM795F)

* * *

为了增加一些混乱（因为人们不会这样做），你可以把它变成一个单行：

```
implode( "2", array_slice( explode( "2", $string, 5 ), 0, 4 ) ); 
```

在此处查看实际操作：[http ://codepad.viper-7.com/mgek8Z](http://codepad.viper-7.com/mgek8Z)

* * *

对于更理智的方法，将其放入一个函数中：

```
function truncateByOccurence ($haystack, $needle,  $limit) {
    $haystack = explode( $needle, $haystack, $limit + 1 );
    $haystack = array_slice( $haystack, 0, $limit );
    return implode( $needle, $haystack );
} 
```

在此处查看实际操作：[http ://codepad.viper-7.com/76C9VE](http://codepad.viper-7.com/76C9VE)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T20:23:47.573

像这样简单的东西怎么样

```
$newString = explode('2',$string); 
```

然后根据需要多次循环遍历数组：

```
$finalString = null;
for($i=0:$i<2;$i++){
    $finalString .= 2 . $newString[$i];
}

echo $finalString; 
```

# return - 对此的新手，控制流没有按我认为应该的方式工作

> ID：14428806
> 
> 赞同：-1
> 
> 时间：2013-01-20T20:15:30.313
> 
> 标签：return, autohotkey, flow

所以我正在尝试制作一个自动化脚本来帮助使用一个名为 CDex 的程序将一个非常大的 CD 库翻录为 mp3。问题是脚本没有保持打开状态。

上次我尝试编写脚本时确实很糟糕，但至少它奏效了。当它运行时，AHK 图标在系统托盘中，但这个脚本似乎什么都不做，并且在进程下的任务管理器中没有任何内容。

我相当确定我的问题在于控制流程和我对“返回”的使用。我认为当您使用它时，它会从顶部重新启动脚本？

这是我的代码，请帮助我找出我出错的地方。

```
ifwinexist, copying
{
    return
}
else
{
    Gosub chktry
    return
}

chktry:
driveget, traystatus, statuscd
ifequal, traystatus, open
{
    return
}
else
{
    Gosub matchchk
    return
}

matchchk:
ifwinexist, no match found
{
    Gosub nomatch
    return
}
else
{
    Gosub inxmatch
    return
}

nomatch:
sendinput {Tab}{Tab}{Tab}{Tab}{Enter}{f9}
Gosub renameunknownloop
    return

inxmatch:
ifwinexist, inexact match found
{
    sendinput {tab}{tab}{enter}
    Gosub inicopy
    return
}
else
{
    Gosub inicopy
    return
}

inicopy:
sendinput {f9}
ifwinexist, overwrite
{
    sendinput {tab}{enter}
    return
}
else
{
    Gosub midoverproa
    return
}

midoverproa:
ifwinexist, copying
{
    Gosub midoverprob
    return
}
else
{
    return
}

midoverprob:
ifwinexist, overwrite
{
    sendinput {tab}{enter}
    return
}
else
{
    Gosub midoverproa
    return
}

renameunknownloop:
ifwinexist, copying
{
    Gosub renameunknownloop
    return
}
else
{
    formattime, localtime,, MM/dd/yyyy-h.mm.tt
    filemovedir, S:\Dad's music\no name, S:\Dad's music\%localtime%, r
    return
}

return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:15:21.873

您需要将代码放入一个循环中，以便它可以继续检查托盘状态，例如以下更新每半秒检查一次：

```
while 1
{
  ifwinexist, copying
  {
      return
  }
  else
  {
      Gosub chktry
      return
  }

  Sleep,500 // Sleep for 500 milliseconds
}

... 
```

# c++ - 让用户写入列表

> ID：14428807
> 
> 赞同：-3
> 
> 时间：2013-01-20T20:15:36.873
> 
> 标签：c++, arrays, list, vector

我是 C++ 新手，我正在尝试制作一个程序，以允许运行该程序的任何人写入列表，当他们完成键入“exit”时，它将显示列表。我不知道如何实现这一目标，有人可以帮忙吗？

这是我所拥有的：

```
#include <iostream>
#include <string>
#include <unistd.h>
#include <math.h>
#include <vector>

using namespace std;
int main()
{
    string uid;
    write(1,"\E[H\E[2J",7);
    cout << "Enter UID: ";
    cin >> uid;
    cout << "DB: \n\n" << uid << " \n\n""end\n\n";
    return 0;
} 
```

我怎么能把它放在一个循环中，以便他们每个人都可以继续写入列表，直到他们输入“退出”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:18:35.057

std - 中有一个列表`std::list`。查一下。有向其中插入元素的功能，您可以在最后遍历它以打印值。

循环很简单

```
do{
    //whatever you want to do in the loop
    //read input
    //insert into list
}while(/*condition*/); //condition should be something like
                       //the string is not "exit" 
```

`std::string`具有与其他字符串进行比较的方法以及重载的运算符。找到要使用的可以作为一个很好的练习。

没有给出实际代码是因为……好吧，那对你没有多大帮助，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:28:57.763

由于这个问题没有表现出太多的努力，我会给出一个你无法理解的复杂答案......

```
std::vector<std::string> list;
for(std::string i; std::cin >> i && i != "exit"; list.push_back(i));
std::copy(list.begin(), list.end(), std::ostream_iterator<std::string>(std::cout, "\n")); 
```

..但可能是最小的方法（我相信有人会做一个更小的现在我说过）

# ios - Cocos2d：在运行时为在 sprite 节点中批处理的 CCSprite 设置 zOrder 似乎不起作用

> ID：14428811
> 
> 赞同：1
> 
> 时间：2013-01-20T20:16:43.463
> 
> 标签：ios, cocos2d-iphone, opengl-es-2.0, particle-system

我能够在运行时在 CCSprite 对象上调用这些方法，现在我决定在 CCSpriteBatchNode 中对其进行批处理，它似乎不再起作用了：

```
sprt = [CCSprite spriteWithSpriteFrameName:@"sprt.png"];
sprt.anchorPoint = CGPointMake(0.5f, 0.5f);
sprt.position = CGPointMake(40.0f, 60.0f);
[batchNode addChild:sprt z:-1];  // It used to work when I was simply "adding as child" the sprt object, I guess now doesn't set the order anymore because somehow the CCSpriteBatch node doesn't allow the re-ordering of child added to it

CCCallFunc *callback = [CCCallFunc actionWithTarget:self selector:@selector(moveBackwards)];
CCCallFunc *callback2 = [CCCallFunc actionWithTarget:self selector:@selector(moveForward)];

[sprt runAction: [CCRepeatForever actionWithAction: [CCSequence actions:  callback2,  callback ,  nil]]];

-(void) moveBackwards
{
    [sprt setZOrder:-1];
 }

-(void) moveForward
{
    [sprt setZOrder:1];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T19:48:04.800

以防万一其他人遇到此问题，以下将重新排序精灵...

[self.parent reorderChild:self z:x];

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T19:17:37.780

如果你有一个 CCSpriteBatchNode，你必须考虑所有的 CCSprite 都在同一层（spritebatch 节点）。

这意味着精灵批处理节点中的精灵可以相对于精灵批处理节点中的其他精灵更改它们的 z 顺序，但是您不能更改 z 顺序以使精灵批处理精灵出现在另一个不是的节点的后面或前面精灵的 CCSpriteBatchNode 的子节点。

我很确定这是您遇到的问题。如果您无法理解这一点，请考虑 CCSpriteBatchNode 在 z 排序方面与 CCLayer 具有相同的行为（除了开发人员之外的任何其他节点似乎都挂在 CCLayer 上，作为唯一/主要的分层结构）。也许这样更容易理解。

# html - Joomla 1.5 剥离 &

> ID：14428812
> 
> 赞同：1
> 
> 时间：2013-01-20T20:16:45.450
> 
> 标签：html, joomla

有没有人发现 Joomla 1.5 从 html 中剥离 & 尤其是在通过使用客户 html 模块添加 html 时？

我在自定义 html 模块中拥有的一些 html 的示例是：

```
<span style="font-size: 12pt;"> <strong><a href="https://www.feedblitz.com/f/?Sub=869335&amp;cids=1"> 
```

但是当我卷曲我的网站时，我得到了..

```
<span style="font-size: 12pt;"> <strong><a href="https://www.feedblitz.com/f/?Sub=869335&cids=1"> 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:20:39.747

很正常，用html

```
&amp; = & 
```

如果您只是创建一个新的 html 文件并编写

```
&amp; 
```

进去，当你打开它你会看到

```
& 
```

# java - 将第二个 onclick 添加到 Listview

> ID：14428819
> 
> 赞同：0
> 
> 时间：2013-01-20T20:17:45.350
> 
> 标签：java, android

我想向`on click`ListViewItem 添加一秒钟。我已经创建了视图（ImageView）并设置了点击。该函数被调用。但是：我怎样才能得到这个 ListViewItem 的信息？在 ListView 中获得 Position 就足够了吗？

图像视图：

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right|center_vertical"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:onClick="favorite"
    android:src="@drawable/star" /> 
```

我的点击功能的代码：

```
public void favorite(View view){
    ImageView iView = (ImageView) view;
    iView.setImageResource(R.drawable.star_checked);

    ViewParent v = iView.getParent();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:21:17.347

使用匿名内部类：

```
 ImageView iView = (ImageView) findViewById(R.id.imageView1);
  iView.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                //Your code
            }
        });

myListView.setOnItemClickListener(new OnItemClickListener() {     ![enter image description here][2]

                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                    String value = myListView.getAdapter().getItem(position).toString(); // String value of the clicked item
                    //Code

                    }
                  }); 
```

如果您想制作更大的应用程序，您应该考虑更好地命名您的组件，'imageView1' 不是很方便。将组件命名为“imageview_main”或“imageview_customerdetails”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:24:50.767

子类[OnItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)而不是 OnClickListener。

编辑：

好的，我想我明白你现在想要做什么。我会将您的 ListAdapter 子类化并`getView(int position, ...)`像这样覆盖该方法：

```
private OnClickListener mImgClickListener = new OnClickListener() {
        @Override
        public void onClick(View view) {
            int position = (Integer) view.getTag();
            // do stuff with position knowledge!
        }
    });

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView != null) {
        v = convertView;
    } else {
        v = newView(int position);
    }
    v.findViewById(R.id.imageView1).setTag(position);
    return v;
}

private View newView(int position) {
    View v;
    // inflate your view here
    View imageView = v.findViewById(R.id.imageView1);
    imageView.setOnClickListener(mImgClickListener);
    return v;
} 
```

当然，更好的是在 getView 方法中实现 ViewHolder 模式，以消除对`findViewById`.

我相信视图层次结构会优先考虑单击 ImageView （而不是整个列表项），但我可能是错的。

# windows - 配置 Jenkins 在 Windows 上使用 GIT，得到标准错误：权限被拒绝（公钥）

> ID：14428829
> 
> 赞同：2
> 
> 时间：2013-01-20T20:18:36.957
> 
> 标签：windows, git, jenkins

我的 Git 版本是 1.8.0，对于这个版本，Jenkins 中的 Git 安装路径是 C:\Git\cmd\git.exe（旧版本是 C:\Git\cmd\git.cmd）。这解决了我遇到的问题：删除工作区时出错。在 Jenkins 中，Git 存储库 URL 使用 ssh 协议：git@github.com:xxxxx/xxx.git，对我来说，这个 URL 有效。如果找不到您的密钥，此 URL 将返回错误，您需要定义 %HOME%，那么您的密钥应该在 %HOME%.ssh 中。然后我开始构建。当我构建它时，我得到了：

```
 stdout: Cloning into 'C:\Jenkins\workspace\Lily'...

 stderr: Permission denied (publickey).
 fatal: Could not read from remote repository.

 Please make sure you have the correct access rights
 and the repository exists.

at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:897)
at hudson.plugins.git.GitAPI.access$000(GitAPI.java:42) 
```

我不明白为什么 Jenkins 可以找到我的存储库 URL 的密钥，但在克隆存储库时却找不到我的密钥。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:20:19.590

我公司有代理服务器，对我来说，使用SSH协议非常困难，可能有办法解决代理服务器和ssh-to-github的结合，但我放弃了。相反，我使用了 https 协议。为了不提示 Jenkins 的凭据，我使用 github credential cache 来解决这个问题。在此处查看凭据缓存：[http](http://www.kernel.org/pub/software/scm/git/docs/git-credential-cache.html) ://www.kernel.org/pub/software/scm/git/docs/git-credential-cache.html 。现在我的 Jenkins/Git 构建在 Windows 中工作。

# css - 为仅使用 CSS 的多个元素对设置一个显示悬停行为 - 这是如何工作的？

> ID：14428832
> 
> 赞同：0
> 
> 时间：2013-01-20T20:18:43.837
> 
> 标签：css, css-selectors

*也许这是一个奇怪的问题，因为我不想知道“如何”而是“为什么”，但我认为答案对于那些希望了解 css 更好地工作方式的人来说可能是有价值的。*

我试图让我页面上的每个 div 都显示一个“x”div，这将允许用户关闭该 div。有几个动态创建的 div。

我有这个（动态）html：

```
<div class="box">
  <div class="x">X</div>
</div>
<div class="box">
  <div class="x">X</div>
</div> 
```

['box' div 的数量不同]

这个CSS：

```
.x {
  visibility: hidden;
}
.box:hover .x {
  visibility: visible;
} 
```

我真的认为这行不通，但不知怎的：

[jsFiddle](http://jsfiddle.net/7aPuw/)

**但是这个简单的 css 代码如何“知道”应该显示哪个 x div，没有 id 来区分“box”div 和“x”div？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:22:50.457

因为它会寻找**后代** `.x` 所以当您将鼠标悬停在框 2 上时，它会应用并且`:hover`根据 css 规则`.x`，应该是可见的。`.box``:hover`

真的不知道如何以不同的方式解释它：P

# python - 在.sort python期间忽略字符

> ID：14428835
> 
> 赞同：5
> 
> 时间：2013-01-20T20:19:05.473
> 
> 标签：python

我需要一些帮助来对 2 个列表进行排序。一个带有文件列表，一个带有目录列表。这些列表是通过一个更大的脚本中的另一部分生成的，我不能在这里放。

```
filelist = ['EN088_EFH_030_comp_v011.mov', 'EN086_EHA_010_comp_v031.mov', 'EN083_WDA_400_comp_v021.mov', 'EN086_EHA_020_comp_v010.mov', 'EN083_WDA_450_comp_v012.mov']

folderlist = ['[EN086_EHA_010_comp_v031]', '[EN083_WDA_400_comp_v021]', '[EN086_EHA_020_comp_v010]', '[EN083_WDA_450_comp_v012]'] 
```

使用 .sort 我可以让数据像这样输出。

```
[CB083_WDA_400_comp_v021]
[CB083_WDA_450_comp_v012]
[CB086_EHA_010_comp_v031]
[CB086_EHA_020_comp_v010]
CB083_WDA_400_comp_v021.mov
CB083_WDA_450_comp_v012.mov
CB086_EHA_010_comp_v031.mov
CB086_EHA_020_comp_v010.mov
CB088_EFH_030_comp_v011.mov 
```

但我需要它像这样输出

```
[CB083_WDA_400_comp_v021]
CB083_WDA_400_comp_v021.mov
[CB083_WDA_450_comp_v012]
CB083_WDA_450_comp_v012.mov
[CB086_EHA_010_comp_v031]
CB086_EHA_010_comp_v031.mov
[CB086_EHA_020_comp_v010]
CB086_EHA_020_comp_v010.mov
CB088_EFH_030_comp_v011.mov 
```

我怎样才能对它进行排序但在排序过程中忽略 [] ？
或者我该怎么做才能获得第二个输出？
我有点不知道我应该做什么。
有什么提示或建议吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-20T20:21:20.840

```
....sort(key=lambda x: x.strip('[]')) 
```

# java - 通过深入研究 js 源代码来解决 HTML 抓取问题

> ID：14428836
> 
> 赞同：3
> 
> 时间：2013-01-20T20:19:27.533
> 
> 标签：java, javascript, html, jsoup

我最近了解了 jSoup，并想更深入地研究它。但是，我遇到了使用 javascript 处理障碍物的网页（我还没有 js 知识：/）。

我已经[读过](https://stackoverflow.com/questions/12625043/)htmlunit 将是执行 webbrowser 操作的正确工具，但我发现如果我可以找到使用 javascript 在网页中获得的 JSON 对象，我不需要 js 知识。

例如，[这个页面](http://www.dota2.com/items/)：在源文件中，其中一个是tooltips.js。在这个文件中，生成变量*rgNeededFeeds*并在方法*LoadHeropediaData()*中调用，该方法是生成获取 json 对象的整个 URL 链接的方法。

```
URL = URL + 'jsfeed/heropediadata?feeds='+strFeeds+'&v=3633666222511362823&l=english'; 
```

我无法理解*strFeeds*到底是什么。我尝试了各种组合，但它不起作用（它返回一个空数组......）。或者，我的猜测完全错误？

我真正需要的是当您单击其中一个“项目”时它显示在顶部的数据。“悬停”中的信息也可以，但它缺少“recepi”信息。我假设通过从上面的完整 URL 获取 json 对象，基本上所有数据信息都应该在那个 json 中。

无论如何，这只是基于我盯着这些源文件几个小时所理解的。如果我错了，请纠正我。（顺便说一句，我在Java中）

**p/s：我也想借此机会向Balusc表示感谢，当我对jSoup有疑问时，他无处不在。:>*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:23:10.153

`strFeeds`只不过是这两个字符串之一：`itemdata`或`abilitydata`

您可以`tooltips.js`在第 38-45 行找到它

```
var rgNeededFeeds = [];
$.each( [ 'item', 'ability' ], 
function( i, ttType ){
        icons = GetIconCollection( ttType );
        if ( icons.length ){
            rgNeededFeeds.push( ttType+'data' );
                 //..............
            }
     }
) 
```

`ttType``[ 'item', 'ability' ]`是与字符串连接的数组的迭代值`data`被推入数组`rgNeededFeeds`

该函数`LoadHeropediaData`在上述函数的末尾以`rgNeededFeeds`as 参数调用：

```
LoadHeropediaData( rgNeededFeeds ); 
```

旁注：如果您开始抓取网站，学习 javascript 将是强制性的。

注意：你是对的，JSON 包含所有需要的信息......

# php - Flash图像上传和编辑

> ID：14428838
> 
> 赞同：0
> 
> 时间：2013-01-20T20:19:43.437
> 
> 标签：php, javascript, image, flash, actionscript-2

我将如何在 ActionScipt 2 而不是 3 中制作 Flash 图像上传器/编辑器？我希望用户能够上传 PNG 或 JPG 图像，然后将其显示在屏幕上。然后他们可以裁剪它，如果可能的话，添加文本并使用其他正常的编辑工具。我对如何做到这一点有一个想法，但我对某些部分不太确定。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:10:01.633

好吧，如果我是你，我会把这个任务分成两个，所以一个是上传图像，然后是创建裁剪和编辑..

除非您想在 actionscript 中制作整个项目，否则基本原理仍然相同。如果是这样，那么只需在 actionscript 中找到一些文件上传的东西。

**上传**
所以看看如何制作一个简单的上传项目，所以你会遇到“AJAX”，我做了一些它很容易，但是如果你想使用ajax，如果你使用“jquery”也很好（所以你每次用户必须上传图片时都不必重新加载页面）互联网上有数百万的教程和示例，在您顺利完成此工作后，您必须制定项目的基础知识，因为例如我将如何裁剪图像，使用javascript（我很确定你不能但值得一看，我认为你将能够做到这一点动作脚本。）

所以这里有一些文件上传的例子..

没有重新加载页面“AJAX”
我使用这个，当我学习时它真的很有帮助。
[nettuts+](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)
[csstrinks](http://css-tricks.com/ajax-image-uploading/)
[zurb](http://www.zurb.com/playground/ajax_upload)

重新加载页面
[SO...purejs](https://stackoverflow.com/questions/5523714/upload-file-using-pure-javascript)
[Purejs](http://igstan.ro/posts/2009-01-11-ajax-file-upload-with-pure-javascript.html)

下一个任务是进行整个编辑和裁剪，并将其与您的测试上传项目集成

**编辑** 只需在 Flash 中制作 ui，然后用 Google 搜索你不知道该怎么做的东西……我对 actionscript 不太擅长，所以我无法帮助你。

但是，如果您想要一种 javascript 方式，那么您将不得不在服务器端进行裁剪，因为 javascript 不能（据我所知）进行裁剪。

和编辑我不太确定你的意思是什么，但如果你想要简单的编辑，比如改变亮度，然后使用谷歌搜索，我确定有人已经做到了..

**请记住**，当有疑问时谷歌一下：-P

# flash - Flash 游戏错误 #1063

> ID：14428843
> 
> 赞同：0
> 
> 时间：2013-01-20T20:20:35.037
> 
> 标签：flash, actionscript

我一直在编写一个非常基本的游戏的开头，但我碰壁了。当我编译我的代码时，游戏会运行但会出现运行时错误：

> ArgumentError：错误 #1063：block() 上的参数计数不匹配。预期 2，得到 0。
> 在 flash.display::Sprite/constructChildren()
> 在 flash display::Sprite()
> 在 flash.display::MovieClip()
> 在 AvoiderGame()。

这是我的文档类，标题为`AvoiderGame`：

```
package
{
    import flash.display.MovieClip;
    import flash.utils.Timer;
    import flash.events.TimerEvent;

    public class AvoiderGame extends MovieClip
    {

        public var avatar1:avatar;
        public var gameTimer:Timer;
        public var army:Array;

        public function AvoiderGame()
        {
            army=new Array();
            var newblock= new block(100,-15);
            army.push(newblock);
            addChild(newblock);

            avatar1=new avatar();
            addChild (avatar1);
            avatar1.x=mouseX;
            avatar1.y=mouseY;

            gameTimer=new Timer(25);
            gameTimer.addEventListener(TimerEvent.TIMER, onTick);
            gameTimer.start();

        }

        public function onTick(timerEvent:TimerEvent):void
        {
            if ( Math.random() < 0.1 )
            {
                var randomX:Number = Math.random() * 400;
                var newblock:block = new block( randomX, -15 );

                army.push( newblock );
                addChild( newblock );
            }

            avatar1.x = mouseX;
            avatar1.y = mouseY;

            for each (var block1:block in army)
            {
                block1.moveDownaBit();

                if (avatar1.hitTestObject(block1))
                {
                    gameTimer.stop();
                }
            }
        }
    }
} 
```

最后这是我的`block`类，它似乎具有导致错误的构造函数。

```
package 
{
    import flash.display.MovieClip;

    public class block extends MovieClip
    {
        public var block1:block;

        public function block(startX:Number, startY:Number)
        {
            x=startX;
            y=startY;
        }

        public function moveDownaBit():void
        {
            y=y+3;
        }
    }
} 
```

我想要开始工作的只是一系列在舞台上随机生成的敌人并在没有头像图标击中的情况下倒下。我会很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:34:41.243

听起来您`block`在舞台上有一个 的实例，所以 Flash 正在创建它而没有传递`startX`and `startY`。您可以删除任何预先放置的块，或者只是将默认值添加到构造函数：

```
public function block(startX:Number = 0,startY:Number = 0)
{
    x = startX;
    y = startY;
} 
```

# c - 如何将 unsigned int 转换为 uint64

> ID：14428845
> 
> 赞同：0
> 
> 时间：2013-01-20T20:20:41.323
> 
> 标签：c, r, uint64

我想在 C 函数中将 unsigned int 转换为 uint64。uint64 在 R 包 int64 中定义。

编辑

这个问题是关于从 C unsigned int 数据类型到 uint64 R 语言数据类型的转换。

“已经开发了 int64 包，因此 64 位整数向量仅使用 R 数据结构表示，即数据不表示为指向某些 C++ 对象的外部指针。相反，每个 64 位整数表示为一对常规的 32 位整数，它们每个都携带底层 64 位整数的一半位。这是设计上的选择，以便可以将 64 位整数向量序列化并用作数据帧列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:57:28.860

需要一个无符号整数才能存储至少介于 0-65536 之间的值。int64_t （即便携式版本， from `<stdint.h>`）将能够存储 -(2 ^(63) -1) 和 2 ^(63)之间的值。这里有一个问题，即 unsigned int 的长度可能为 64 位，并且可能表示 int64_t 范围之外的值（参见 C 标准的 §5.2.4.2.1 p1 和下面的部分）。

这是标准所说的：

**6.3.1.3 有符号和无符号整数**

1.  当整数类型的值转换为_Bool以外的其他整数类型时，如果该值可以用新类型表示，则保持不变。
2.  否则，如果新类型是无符号的，则在新类型可以表示的最大值的基础上重复加减一，直到该值在新类型的范围内。[60)]
3.  否则，新类型是有符号的，值不能在其中表示；结果是实现定义的，或者引发了实现定义的信号。

[60) 规则描述的是数学值的算术，而不是给定类型表达式的值。]

* * *

忽略对应于计算异常的实现定义的信号是未定义的行为。

对于无符号到有符号的转换，我建议明确定义您的行为。饱和是最简单的：当您的 unsigned int 值大于 INT64_MAX 时，转换将导致 INT64_MAX。这看起来像`x > INT64_MAX : INT64_MAX ? x`. `unsigned int x = UINT_MAX; ++x == 0`由于 int64_t 保证不包含填充，因此可以为 int64_t包装 LIA 样式（例如），但需要做更多工作来保证可移植性。我建议类似`(x & INT64_MIN) > INT64_MAX ? -(x & INT64_MAX) : x & INT64_MAX`，如果你能找到一些断言你的 int64 将具有与 C 标准 int64_t 相同的表示。

# internet-explorer-8 - css3-mediaqueries.js 在 IE8 中不起作用

> ID：14428846
> 
> 赞同：2
> 
> 时间：2013-01-20T20:20:43.287
> 
> 标签：internet-explorer-8, media-queries

css3-mediaqueries.js 只有在标签内的 html 中出现 @media 样式时才能在 IE8 中工作。我浪费了太多时间，试图让它在 IE8 中工作，所以我希望这篇文章对其他人有所帮助。我的解决方案很简单：如果您的文件仅在网络服务器上运行，则一切正常，bun 在本地计算机上不起作用。因此，如果您想测试 css3-mediaqueries.js，您需要将所有文件复制到您的服务器并在线测试！

# actionscript-3 - 离开舞台时从舞台和数组中移除对象

> ID：14428848
> 
> 赞同：1
> 
> 时间：2013-01-20T20:20:43.277
> 
> 标签：actionscript-3, flash

在某种程度上这是可行的，但它只会在 tempBullet 对象的 y 位置从 < 200 开始时删除它，而不是在它在舞台下方的某个地方生成后到达该点：

```
 if(firing && bulletTimeOut == 0)
        {
            var tempBullet = new Bullet();
            bullets.push(tempBullet);
            tempBullet.x = x;
            tempBullet.y = y-10;
            stage.addChild(tempBullet);
            trace(bullets.length);
            if(tempBullet.y < 200)
            {
                bullets.splice(tempBullet, 1);
                stage.removeChild(tempBullet);
            }
            bulletTimeOut = 5;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:31:36.687

这段代码是循环发生的吗？

我认为这不仅仅是检查您的位置，`tempBullet`而是打算遍历整个子弹阵列以删除任何超过 200 像素的子弹。

```
if(firing && bulletTimeOut == 0)
{
    var tempBullet = new Bullet();
    bullets.push(tempBullet);
    tempBullet.x = x;
    tempBullet.y = y-10;
    stage.addChild(tempBullet);
    trace(bullets.length);
    bulletTimeOut = 5;
}
// test bullet positions whether firing or not
for each (b:Bullet in bullets) {
    if(b.y < 200)
    {
        bullets.splice(b, 1);
        stage.removeChild(b);
    }
} 
```

# android - Android Webview 以编程方式更改显示网页的方向

> ID：14428850
> 
> 赞同：1
> 
> 时间：2013-01-20T20:20:47.243
> 
> 标签：android, android-webview

我有一个 webview，我希望能够以编程方式更改显示页面的方向。当用户通过在我的清单文件中设置它来更改手机的方向时，我可以防止我的活动再次被重新创建。

```
android:screenOrientation="nosensor"
android:configChanges="orientation|screenSize|keyboardHidden" 
```

但是，在我的一个选项卡上，我想在用户更改网页时以编程方式更改网页的方向。所以我想听听电话方向的变化，并相应地改变页面视图的变化。目前，当手机的方向更改为横向时，网页仍以纵向显示。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:58:11.103

如果您只想旋转 WebView 而不想旋转其他任何东西，请创建一个自定义 WebView，如下所示：

```
public class VerticalWebView extends WebView {
    final boolean topDown = true;

    public VerticalWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void draw(Canvas canvas) {
        if (topDown) {
            canvas.translate(getHeight(), 0);
            canvas.rotate(90);
        } else {
            canvas.translate(0, getWidth());
            canvas.rotate(-90);
        }
        canvas.clipRect(0, 0, getWidth(), getHeight(), android.graphics.Region.Op.REPLACE);
        super.draw(canvas);
    }
} 
```

`topDown`（如果你想以其他方式旋转，请更改为 false）

现在只需在您的 XML 中使用它，如下所示：

```
<com.my.package.VerticalWebView
    android:id="@+id/myview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</com.my.package.VerticalWebView> 
```

请记住，这只会旋转屏幕上显示的视图，并且任何链接等都将无法工作，因为它不会将触摸坐标重新映射到相应点的新位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:46:58.130

当您想更改为横向/纵向时，请尝试此操作。 [http://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation(int](http://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation(int) )

# java - JSSC 异常：java.library.path 中没有 libjssc

> ID：14428855
> 
> 赞同：3
> 
> 时间：2013-01-20T20:21:13.007
> 
> 标签：java, linux, jssc

我一直在使用 JSSC 连接器进行串行连接，但出现了下一个异常：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no libjssc in java.library.path
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860)
at java.lang.Runtime.loadLibrary0(Runtime.java:845)
at java.lang.System.loadLibrary(System.java:1084)
at jssc.SerialNativeInterface.<clinit>(SerialNativeInterface.java:34)
at jssc.SerialPort.<init>(SerialPort.java:93)
at cl.raien.jssc.SerialExample.main(SerialExample.java:22) 
```

编码：

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import jssc.SerialPort;
import jssc.SerialPortException;

public class SerialExample {

static Logger log = LoggerFactory.getLogger(SerialExample.class);

/**
 * @param args the command line arguments
*/
public static void main(String[] args) {

log.info(System.getProperty("java.library.path"));

SerialPort serialPort = new SerialPort("ttyUSB0");

try {
  System.out.println("Port opened: " + serialPort.openPort());
  System.out.println("Params setted: " + serialPort.setParams(9600, 8, 1, 0));
  System.out.println("\"Hello World!!!\" successfully writen to port: " + serialPort.writeBytes("Hello World!!!".getBytes()));
  System.out.println("Port closed: " + serialPort.closePort());
 }
 catch (SerialPortException ex){
 System.out.println(ex);
 }
} 
```

}

我正在使用 ubuntu 12.10 86x_64 和 de jssc 安装**$HOME/.jssc/linux/libjSSC-0.9_x86_64.so**

在 Eclipse 中，我在**jssc.jar的****Native Library Location**中设置为首先指向该目录。然后，我将该文件放在项目根文件夹中，如[scream3r.org 所说](http://code.google.com/p/java-simple-serial-connector/wiki/jSSC_Start_Working)。最后，我将文件名更改为**libjssc**和**libjssc.so**。

 ******提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:30:14.263

1.- 在 maven 中手动安装 jssc.jar

2.-仅此而已！可能有必要解决有关 maven 中本地库位置的一些问题，但就我而言，我没有问题。******

# c# - 访问实体数据库的单元测试功能

> ID：14428859
> 
> 赞同：0
> 
> 时间：2013-01-20T20:21:38.870
> 
> 标签：c#, .net, winforms, entity-framework

尝试对访问实体框架的函数进行单元测试。所以我尝试将所有实体代码放入下面的测试函数中？然而它在 Linq 语句处停止；显然，试图访问数据库对它来说太过戏剧化了。也许解决方法也可以在基于 sql lite 或 compact 的单元测试函数中创建一个副本数据库；（它不是一个大数据库）然后执行不必离开测试函数？这可能吗？我将如何实施？

```
public void RetreiveKeyFnTest()
    {
        StegApp target = new StegApp(); // TODO: Initialize to an appropriate value
        string username = "david"; // TODO: Initialize to an appropriate value
        string password = "david1"; // TODO: Initialize to an appropriate value
        string ConnectionString = ConfigurationManager.ConnectionStrings["DatabaseEntities"].ToString();
        var dataContext = new DatabaseEntities(ConnectionString);
        var user = dataContext.Users.FirstOrDefault(u => u.Username.Equals(username) && u.Password.Equals(password));
        Assert.IsNotNull(user);

        //target.RetreiveKeyFn(username, password);
        //Assert.IsInstanceOfType(target.RetreiveLogs,typeof(DataAccess));
        //Assert.IsInstanceOfType(target.p);
        //Assert.IsNotNull(target.RetreiveLogs.AuthenitcateCredentials(username,password));
        //Assert.Inconclusive("A method that does not return a value cannot be verified.");
    } 
```

以下是我要测试的代码：

```
public void RetreiveKeyFn(string username, string password)
    {

        BusinessObjects.User p = RetreiveLogs.AuthenitcateCredentials(username,password);
        if (p != null)
        {
            if (RetreiveLogs.RetreiveMessages(p.UserId) == null)
            {
                DisplayLogs.Text = "Sorry No messages for you recorded in Database, your correspondant might have chose not to record the entry";
            }
            else
            {
                MessageBox.Show("LogId = " + RetreiveLogs.RetreiveMessages(p.UserId).LogId + "\n" +
                "UserId = " + RetreiveLogs.RetreiveMessages(p.UserId).UserId + "\n" +
                "Message Key = " + RetreiveLogs.RetreiveMessages(p.UserId).MessageKey + "\n" + "PictureId = " + RetreiveLogs.RetreiveMessages(p.UserId).PictureId +
                " Date & time = " + RetreiveLogs.RetreiveMessages(p.UserId).SentDateTime);
                DisplayLogs.Visible = true;
            }
        }
        else
        {
            MessageBox.Show("Please enter your correct username and password in order to retreive either key, image or both from Databse");
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:34:36.630

首先，您应该能够在您的测试应用程序中访问与您在主/实际应用程序中使用的数据库相同的数据库。您只需要确保您的测试项目在其自己的 App.config 中包含您的连接字符串。

上下文的初始化应该在您的 StegApp()**内部**完成，或者您应该能够从不同的范围将上下文传递给您的 StegApp()。根据我对您的代码的阅读，您的 StegApp() 将无法访问您创建的 dataContext 变量。

您对空用户的测试已经在 AuthenticateCredentials() 方法下的 RetrieveKeyFn() 内进行，因此不需要第一个“Assert.IsNotNull(user)”。我建议您将 RetrieveKeyFn 的业务逻辑与您的 UI 行为分开，以便您可以轻松地进行单元测试。您可以将“消息框”操作绑定到一个按钮单击事件处理程序，该处理程序仅调用 RetrieveKeyFn()。我建议可能是这样的：

```
public class StegApp
{

      public DatabaseEntities context;
      //other properties

      public StegApp()
      {
           //assuming your DatabaseEntities class inherits from DbContext. 
           //You should create other constructors that allow you to set options
           //like lazy loading and mappings
           this.context = new DatabaseEntities(); 
      } 

      //ASSUMING YOUR RetrieveLogs.RetrieveMessages() function returns 
      //a Message object. replace this type with whatever type the
      //RetrieveLogs.RetrieveMessages() method returns.
      public Message RetrieveKeyFn (string username, string password)
      {

          BusinessObjects.User p = RetreiveLogs.AuthenitcateCredentials(username,password);
          if (p != null)
          {
              var message = RetrieveLogs.RetrieveMessages(p.UserId);
              if (message == null)
                  // handle behavior for no messages. In this case 
                  // I will just create a new Message object with a -1 LogId
                  return new Message {LogId =-1};
              else
                  return message;
          }
          else
              //handle behavior when the user is not authenticated. 
              //In this case I throw an exception
              throw new Exception();

      }

     //on your button click handler, do something like:
     // try 
     // {
     //     var message = RetrieveKeyFn(txtUsername.Text.Trim(), txtPassword.Text.Trim());
     //     if (message.LogId == -1)
     //         DisplayLogs.Text = "Sorry No messages for you recorded in Database, your correspondant might have chose not to record the entry";
     //     else
     //     {
     //         MessageBox.Show("Log Id = " + message.LogId)
     //         etc. etc. etc.
     //     }
     // }
     // catch
     // {
     //       MessageBox.Show ("user is not authenticated");
     // }

} 
```

进行单元测试时，**请记住在测试项目的 App.Config 中包含适当的配置字符串。**如果 app.config 尚不存在，请继续创建一个。您应该为所有可能性创建测试（即1）用户有效，您收到消息，2）用户有效，没有消息，3）用户无效）。

这是案例 2 的示例

```
 [TestMethod]
    public void RetrieveKeyFnTest1()
    {
        StegApp target = new StegApp(); // this creates your context. I'm assuming it also creates your RetrieveLogs object, etc
        var username = "UserWithNotMessages"; //this user should exist in your database but should not have any messages. You could insert this user as part of your TestInitialize method
        var password = "UserWithNotMessagesPassword"; //this should be the proper password
        var message = target.RetrieveKeyFn(username, password);
        Assert.AreEqual (-1, message.LogId);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:14:35.800

我的单元测试工作正常。我的错误是没有将 app.config 文件复制到测试项目中！虽然老实说，我希望 Visual Studio 无论如何都会这样做。

# dns - 主机别名的不当行为

> ID：14428860
> 
> 赞同：-1
> 
> 时间：2013-01-20T20:21:43.913
> 
> 标签：dns, alias, hosts, g-wan, virtual-hosts

我的目录结构中有两个主机别名无法正确注册到 g-wan。我的文件夹结构如下：

> /srv/gwan_linux64-bit/192.168.3.101_80/$dg.lcl
> /srv/gwan_linux64-bit/192.168.3.101_80/$myapp
> /srv/gwan_linux64-bit/192.168.3.101_80/#192.168.3.101
> /srv/gwan_linux64 -bit/192.168.3.101_80/#192.168.3.101:gwan.klickitat.lcl
> /srv/gwan_linux64-bit/192.168.3.101_80/#192.168.3.101:test.lcl

启动 g-wan 时，我收到错误：

> 加载......... *未解析的别名：2

从默认 g-wan 配置中的示例服务器报告：

> 侦听器
> 5 个主机：192.168.3.101_80
> 虚拟：$dg.lcl
> 根：#test.lcl
> 根：#gwan.klickitat.lcl
> 虚拟：$myapp
> 根：#192.168.3.101

如您所见，g-wan 将两个根别名标识为附加根。G-wan 仅允许单个根主机，因此这两个别名无法在浏览器中运行并出现 404 错误。每个主机都正确响应 ping，因此它们由 dns 负责。虚拟主机和根主机按预期运行。

想法？

* * *

## 补充研究：

我已更正了我的发布错误并简化了演示文稿。我希望你会觉得这很简洁。

对于所有测试，我的主机文件如下：

> 127.0.0.1 localhost.klickitat.lcl 本地主机
> 192.168.3.101 gwan.klickitat.lcl test.lcl

我实现了一个与您的测试相同的示例，除了我使用不同的 IP 地址来匹配我的本地子网并且我消除了虚拟主机，这不会影响我的测试结果。

对默认 gwan 配置的唯一更改如下：

*   将监听器从 0.0.0.0_8080 更改为 192.168.3.101_8080
*   将根主机 IP 从 #0.0.0.0 更改为 #192.168.3.101
*   添加了两个主机别名 #192.168.3.101:gwan.klickitat.lcl 和 #192.168.3.101:test.lcl

这是我的文件夹结构：

> /srv/gwan_linux64-bit/192.168.3.101_8080
> /srv/gwan_linux64-bit/192.168.3.101_8080/#192.168.3.101
> /srv/gwan_linux64-bit/192.168.3.101_8080/#192.168.3.101:glickitl.wan
> _ srv/gwan_linux64-bit/192.168.3.101_8080/#192.168.3.101:test.lcl

这是 gwans 报告的我的结果，包括服务器报告应用程序：

> 3 台主机：192.168.3.101_8080
> 根目录：#test.lcl
> 根目录：#gwan.klickitat.lcl
> 根目录：#192.168.3.101

Gwan 无法识别别名，我无法访问别名网址。我的结果和你的不一致。

本文的其余部分仅旨在说明 gwan 在我的环境中以替代配置报告的别名，但与预期结果有些不一致。我只是确定文件夹结构和我的结果。

**备用配置 1**
/srv/gwan_linux64-bit/0.0.0.0_8080
/srv/gwan_linux64-bit/0.0.0.0_8080/#localhost
/srv/gwan_linux64-bit/0.0.0.0_8080/#localhost:gwan.klickitat.lcl
/srv /gwan_linux64-bit/0.0.0.0_8080/#localhost:test.lcl

**结果：**
3 主机：0.0.0.0_8080
根目录：#localhost
别名： 0.0.0.0:#gwan.klickitat.lcl 别名：0.0.0.0:#
test.lcl

**备用配置 2**
/srv/gwan_linux64-bit/192.168.3.101_8080
/srv/gwan_linux64-bit/192.168.3.101_8080/#localhost
/srv/gwan_linux64-bit/192.168.3.101_8080/#localhost:gwan.klickitat.lcl
/srv /gwan_linux64-bit/192.168.3.101_8080/#localhost:test.lcl

**结果：**
3 主机：192.168.3.101_8080
根目录：#localhost
别名：192.168.3.101 :#gwan.klickitat.lcl 别名：
192.168.3.101 :#test.lcl

虽然备用配置起作用，但请注意别名命名与文件夹结构中的显式命名不同。似乎正在正确设置侦听器，但是在如何生成主机 laiase 方面存在一些问题。如果您愿意，我很乐意进一步测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:52:28.530

使用 G-WAN v4.18 我使用以下结构没有问题：

```
5 host(s): 192.168.2.8:8080
Root:     #192.168.2.8
Alias:     192.168.2.8:#gwan.ch
Virtual:  $trustleap.com
Alias:     192.168.2.8:#gwan.com
Virtual:  $secure.gwan.ch 
```

主机是在一个`/etc/hosts`原子的 LAN 上定义的（更改会立即反映）。

正如预期的那样，它们都可以从 Internet 浏览器访问，并显示预期的文档。

请注意，与您的报告不同，没有这样的事情`Root: #gwan.ch`（别名按预期报告：）`Alias: 192.168.2.8:#gwan.com`。

我建议 (1) 您确保您使用的是 v4.18（今天的最新版本）和 (2) 测试您的配置，`/etc/hosts`这样您就不会遇到可能的 DNS 问题。

# spring - 为什么从 GroovyTestCase 继承会导致 Grails 2.2 中出现 Spring 错误？

> ID：14428864
> 
> 赞同：1
> 
> 时间：2013-01-20T20:22:10.443
> 
> 标签：spring, grails, groovy, integration-testing

在我创建域类时由 Grails 为我生成的集成测试类不扩展类 GroovyTestCase。但是，我已经看到许多作者推荐它（[这](http://mrhaki.blogspot.com/2009/11/groovy-goodness-testing-for-expected.html)是一个使用该`shouldFail`方法的示例，它确实似乎有效）。

`test-app`但是，当我在交互式 Grails 控制台中运行时，从 GroovyTestCase 扩展我的测试类会导致以下错误消息：

```
Spring Loaded: Cannot reload new version of foo.barTests
Reason: Supertype changed from java/lang/Object to groovy/util/GroovyTestCase 
```

这是我应该关心的事情吗？我在网上搜索过，找不到其他人抱怨这个错误，所以它可能是 Grails 2.2 的新内容。请指教。

* * *

我在 grails 交互式控制台中运行我的测试（当你`grails`没有参数运行时你会得到什么）。我已经让我的测试从 Object 继承了一段时间，但是当我运行时，`test-app`我仍然偶尔会将这些消息输出到 HTML 测试报告（“从 GroovyTestCase 更改为 Object”种类）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:19:13.883

我很确定这是一个与 Grails 相关的错误

1.  AST 转换注释
2.  弹簧加载模块

因为我也遇到过这种奇怪的行为。

导致这个问题的步骤似乎是一个 Groovy 类在没有转换的情况下编译一次，因此它是`java.lang.Object`.

当 AST 转换启动它时，该类将再次重新编译。这一次，它成为另一个类的子类。然后 Spring-loaded 无法将它们重新加载到内存中（因为 JVM 不允许同一个类重新定义其超类）。

# java - 使用 Android 发布表单

> ID：14428868
> 
> 赞同：-1
> 
> 时间：2013-01-20T20:22:56.190
> 
> 标签：java, android

我正在尝试为 Android 创建一个应用程序，用户可以在几个文本区域中输入信息，然后单击提交，应用程序将信息发送到 URL。输入将具有变量名称，以便 PHP 脚本可以在另一端获取它。这通常在带有 HTML 表单的网站上完成，但希望能够从应用程序中完成。我已经弄清楚了如何创建输入区域和按钮，但在尝试将其发送到 URL 时有点卡住了。任何建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:37:40.020

前段时间我开设了一个课程来简化发布请求的所有工作：

```
import java.io.*;
import java.net.URL;
import java.net.URLConnection;
import java.net.URLEncoder;
import java.util.Vector;

public class SiteFX {

   private String postParameters = "";
   private String webPage;
   private Vector<String>names;
   private Vector<String>values;

   public SiteFX(){
      values = new Vector<String>();
      names = new Vector<String>();
   }

   /**
    * Adds a post variable (page.php?name=value)
    *
    * @param name the variable name
    * @param value the variable value, can be set to null, the url will simply become &name instead of &name=value
    * null
    */
   public void addPostValue(String name, String value) {
      if (value == null) {
         try {
            postParameters += "&" + URLEncoder.encode(name, "UTF-8");
            names.add(name);
            values.add("");
         } catch (Exception ex) {
            ex.printStackTrace();
         }
      } else {
         postParameters += "&" + URLEncoder.encode(name, "UTF-8") + "=" + URLEncoder.encode(value, "UTF-8");
         names.add(name);
         values.add(value);
      }
   }

   /**
    * Send post data without waiting for site output
    *
    * @return true if sending data terminated succesfully
    */
   public boolean sendPost() {
      try {
         if (webPage == null || webPage.equals("")) {
            throw new Exception("Empty url");
         }
         URL url = new URL(webPage);
         URLConnection conn = url.openConnection();
         conn.setDoOutput(true);
         OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
         wr.write(postParameters);
         wr.flush();
      } catch (Exception e) {
         e.printStackTrace();
         return false;
      }
      postParameters = "";
      return true;
   }

   /**
    * Sends data, then waits for site output
    *
    * @return null if no data is received, or a String containing the data
    */
   public String sendPostWithReturnValue() {

      String returnValue = "";
      try {
         if (webPage == null || webPage.equals("")) {
            throw new Exception("Empty url");
         }
         URL url = new URL(webPage);
         URLConnection conn =
                 url.openConnection();
         conn.setDoOutput(true);
         OutputStreamWriter wr =
                 new OutputStreamWriter(conn.getOutputStream());
         wr.write(postParameters);
         wr.flush();
         BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
         String line;
         while ((line = rd.readLine()) != null) {
            returnValue += line + "\n";
         }
         wr.close();
         rd.close();
      } catch (Exception e) {
         e.printStackTrace();
         return null;
      }
      postParameters = "";
      values = null;
      names=null;
      values = new Vector<String>();
      names = new Vector<String>();
      return returnValue;
   }

   /**
    * Sets the page to point at for sending post variables
    *
    * @param webPageToPointAt the page that will receive your post data
    */
   public void setWebPageToPointAt(String webPageToPointAt) {
      webPage = webPageToPointAt;
   }

   /**
    * @returns A Nx2 matrix containing all parameters name and values
    */
   public String[][] getParameters() {
      String[][] str = new String[names.size()][2];
      for (int i = 0; i < str.length; i++) {
         str[i][0] = names.get(i);
         str[i][1] = values.get(i);
      }
      return str;
   }
} 
```

希望这可以帮助

# c++ - 包含/排除设置禁用加载

> ID：14428878
> 
> 赞同：1
> 
> 时间：2013-01-20T20:23:41.083
> 
> 标签：c++, visual-studio-2010, visual-c++

我使用 Visual Studio 2010。现在我正在测试一个从文件加载数据的过程。出了点问题，我不记得编译器为什么生气了。无论如何，现在我的程序根本没有执行，就好像被忽略了一样。

我明白了：

```
'coursework.exe': Loaded 'C:\Users\Гость\Documents\Visual Studio 2010\Projects\coursework\Debug\coursework.exe', Symbols loaded.
'coursework.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Cannot find or open the PDB file
'coursework.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Cannot find or open the PDB file
'coursework.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Cannot find or open the PDB file
'coursework.exe': Loaded 'C:\Windows\SysWOW64\msvcr100d.dll', Symbols loaded.
'coursework.exe': Loaded 'C:\Windows\SysWOW64\msvcp100d.dll', Symbols loaded.
'coursework.exe': Loaded 'C:\Windows\SysWOW64\apphelp.dll', Cannot find or open the PDB file
'coursework.exe': Loaded 'ImageAtBase0x4aa50000', Loading disabled by Include/Exclude setting.
'coursework.exe': Unloaded 'ImageAtBase0x4aa50000'
'coursework.exe': Loaded 'ImageAtBase0x49fe0000', Loading disabled by Include/Exclude setting.
'coursework.exe': Unloaded 'ImageAtBase0x49fe0000 
```

我试图查看调试器选项，但没有解决任何问题。

现在我有一个想法，要杀死 Debug 目录中的所有文件。与 sln 文件位于同一文件夹中的文件。好吧，还有另一个 Debug 目录，其中包含 cpp 文件。

我是对的，这可能会有所帮助吗？我是否选择了正确的调试目录（其中有 3 个文件：exe、ilk、pdb）。

稍后添加

这是一个似乎引起问题的提取物。

```
ifstream myfile ("grablevskij.txt");
    delete[] pointer;

    AR_POINT ar_point = {NULL, 0, 0};   
    POINT * tmp_point = new POINT();

    if (myfile.is_open())
    {       
        string line;
        while (myfile.good() )
        {
            getline (myfile, line);
            int x_first = line.find('(') + 1;
            int x_last = line.find(',') - 1;
            string x_substr = line.substr(x_first, x_last);
            int tmp_x = atoi(x_substr.c_str());

            int y_first = line.find(',') + 1;
            int y_last = line.find(')') - 1;
            string y_substr = line.substr(y_first, y_last);
            int tmp_y = atoi(y_substr.c_str());             
            ar_point.occup++;           
            (*tmp_point).id = ar_point.occup;
            (*tmp_point).x = tmp_x;
            (*tmp_point).y = tmp_y;
            ar_point.p = new_point(ar_point.p, tmp_point, ar_point.occup);          
        }
    } 
```

# ruby-on-rails - Omniauth-Facebook 重定向到注册表单 - Rails 3.2

> ID：14428883
> 
> 赞同：0
> 
> 时间：2013-01-20T20:24:16.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3, omniauth, facebook-authentication

我有一个现有的注册表单，用于处理想要使用电子邮件、用户名和密码进行注册的用户。我还想选择使用 Facebook 进行注册。我已经设法让身份验证部分正常工作，但是当 FB 应用程序提供身份验证时，我想重定向回相同的注册表单，以便用户可以添加继续使用用户名/密码注册（并添加其他选项在注册表单中）-因此可以选择真正使用 Facebook 登录-但他们也可以使用用户名和密码登录。这可能吗？我目前正在使用omniauth-facebook gem，但真的不知道如何重定向到user#new 控制器或存储从facebook 返回的数据的位置。

这是[用户控制器和会话控制器的要点](https://gist.github.com/4581431)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:39:05.620

尝试

```
redirect_to request.referrer 
```

# css - 具有相同图像的多个背景

> ID：14428886
> 
> 赞同：0
> 
> 时间：2013-01-20T20:24:35.667
> 
> 标签：css, background-image

如果同一张图片被两次用作同一元素的背景，如下所示：

```
 url(http://i.imgur.com/On0lt.png) -162px -551px no-repeat,
    url(http://i.imgur.com/On0lt.png) -200px -530px no-repeat, 
```

它会被加载两次吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:40:02.690

不，它只会被请求一次。

您可以从 Chrome 开发人员工具中的网络选项卡中进行验证。它只会显示一个请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:40:02.703

不，它应该只加载一次，所以你会在时间上很好:)

# r - 溢出 X 轴 (ggplot2)

> ID：14428887
> 
> 赞同：5
> 
> 时间：2013-01-20T20:24:38.017
> 
> 标签：r, ggplot2

我有一个公司列表，其中包括三个变量：成立年份、市值和公司名称（实际上是股票代码）。

我想按成立年份（X 轴）和市值（Y 轴）绘制它们，填充由供应商名称确定。

这样做：

```
 qplot(factor(Founded), Market.Cap, data = mcap, geom = "bar", fill = Vendor) 
```

明白了，但 X 轴难以辨认（见下文）。我尝试输入 scale_x_discrete() 值（1900 - 2012 等），但没有运气。我如何告诉 ggplot2 不要显示实际值，而是显示我选择的频谱？

作为旁注，如果你能提醒我如何避免 Y 轴上的科学记数法，那就太好了。

![在此处输入图像描述](../Images/d25e20946c533b6e5925f2f3c30c1c3a.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T21:28:15.897

我希望这有帮助。如果旋转轴不起作用，那么您可以使用`breaks`and手动设置轴`labels`的中断和标签，`scale_x_continuous`如下所示：

```
require(ggplot2)
# dummy data
set.seed(45)
len <- 50
df <- data.frame(years = factor(seq(1901, 1950, length.out = len)), 
           values = 1e6 * runif(len), group=factor(rep(1:5, each=len/5)))
p <- ggplot(data = df, aes(x = years, fill=group)) + geom_bar(aes(weight = values))
require(scales) # for removing scientific notation
p <- p + scale_y_continuous(labels = comma)
# manually generate breaks/labels
labels <- seq(1901, 2000, length.out=10)
# and set breaks and labels
p <- p + scale_x_discrete(breaks=labels, labels=as.character(labels))
p 
```

![ggplot2](../Images/db63c75a96555c270198d731f1520dc9.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T20:50:12.780

答案在[这里](http://wiki.stdout.org/rcookbook/Graphs/Axes%20%28ggplot2%29/)

对于您的情况，我建议将 x 轴标签旋转 90 度：

```
+ theme(axis.text.x=element_text(angle=90, hjust=1)) 
```

并更改 y 轴符号：

```
+ scale_y_continuous(labels=comma) 
```

# math - 使用 OpenStreetMap 数据的路由引擎

> ID：14428891
> 
> 赞同：0
> 
> 时间：2013-01-20T20:24:54.560
> 
> 标签：math, graph, routing, mapping, openstreetmap

作为我学术项目的一部分，我必须根据 OSM 提供的数据构建一个路由引擎。我已经查看了 OSM 的数据模型，我对它很好。但是，我无法将 OSM XML 文件转换为可用于应用搜索算法（Dijkstra、A* 等）的图形结构（节点和边）。我希望将图形存储在内存中以允许快速读/写。

因此，任何人都可以阐明或建议如何做到这一点的技术，甚至可以为进一步研究提供指导。

请注意，我不允许重复使用现有的路由引擎，因为这会破坏执行该项目的目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:51:22.207

您需要做的就是：

1.  为每个`<node>`项目创建一个节点
2.  每个`<way>`条目都是一个有序的`<nd>`项目列表，每个项目都是一个节点的反向引用。因此，对于 each `<way>`，您可以成对地遍历其`<nd>`s 并在引用的两个节点之间创建一条弧线。

您可以使用流式 XML 解析器一次性完成此操作，因为 XML 数据在路径之前定义了所有节点。

数据本质上不包括距离，因此您需要根据每个节点的纬度计算距离。您还应该在路由中考虑道路类型`highway=*`（`access=*``waterway=stream`

[http://wiki.openstreetmap.org/wiki/Elements](http://wiki.openstreetmap.org/wiki/Elements)

# windows-phone-8 - Windows Phone 8 AdControl AdException？

> ID：14428896
> 
> 赞同：3
> 
> 时间：2013-01-20T20:25:53.697
> 
> 标签：windows-phone-8, windows-phone, ads

在过去的几周里，我一直在测试一个新的 Windows Phone 8 应用程序。我还没有将它发布到商店，所以我只测试了我`AdControls`的测试值（即“test_client”和“Image480_80”）。

我注意到前几天我一启动我的应用程序，我看到了`AdControl`一秒钟，然后它就消失了。应用程序的界面上没有抛出错误，但在输出窗口中我可以看到以下异常：

> Microsoft.Advertising.Mobile.DLL 中出现“Microsoft.Advertising.Shared.AdException”类型的异常，并且在托管/本机边界之前未处理

这是堆栈跟踪：

> 在 Microsoft.Advertising.Shared.AdvertisementFactory.CreateFromResponse（字符串响应，AdDownloadCompleteCallback adDownloadCompleteCallback）\r\n
> 在 Microsoft.Advertising.Shared.AdPlacement.CreateAdvertisement（字节 [] 字节）\r\n 在 Microsoft.Advertising.Shared.AdPlacement。 AdRequestComplete(IWebRequestWrapper 请求)

这是我的代码，它添加`AdControl`到我的`Grid`：

```
 AdControl adControl = new AdControl("test_client", "Image480_80", true);

    adControl.Width = 480;
    adControl.Height = 80;

    adControl.ErrorOccurred += AdUnit_ErrorOccurred;

    MyGrid.Children.Add(adControl);

    Grid.SetRow(adControl, 4);
    Grid.SetColumn(adControl, 4); 
```

直到几天前这一切都很好，所以我不确定代码是否需要更改，但还有什么我可以检查的吗**？**我看到一篇文章说要确保我的 WMAppManifest.xml 文件中具有所需的功能。这是我目前所拥有的：

```
<Capabilities>
  <Capability Name="ID_CAP_NETWORKING" />
  <Capability Name="ID_CAP_MEDIALIB_AUDIO" />
  <Capability Name="ID_CAP_MEDIALIB_PLAYBACK" />
  <Capability Name="ID_CAP_SENSORS" />
  <Capability Name="ID_CAP_WEBBROWSERCOMPONENT" />
  <Capability Name="ID_CAP_IDENTITY_USER" />
  <Capability Name="ID_CAP_MEDIALIB_PHOTO" />
  <Capability Name="ID_CAP_PHONEDIALER" />
</Capabilities> 
```

有谁知道我可以检查的其他任何事情 - 或者知道我可能做错了什么？我真的很难过。如果我可以从我的 Exception 对象中发布任何其他内容（除了上面的堆栈跟踪），请告诉我，尽管我没有看到任何暗示可能存在问题的内容。

**更新：**

我还可以确认使用我的实际 ApplicationID 和 AdUnitID 代替测试值会发生完全相同的事情。有没有其他人经历过这个？

**更新 2：**

我一直在与 PubCenter 支持部门来回发送电子邮件，他们显然已经能够复制问题，因为帮助我的分析师（支持分析师 II）现在已经聘请了工程团队来调查问题。分辨率上没有 ETA，但他们说在实际设备上测试时使用我的实际 ApplicationID 和 AdUnitID*应该可以*工作（尽管我已经确认它在我的模拟器中不起作用）。

**更新 3：**

我仍在等待 PubCenter 支持的回复，但我现在已经确认，如果我使用真实的 ApplicationID 和 AdUnitID，广告可以成功运行。以前，我认为这不起作用，但它似乎只是在模拟器中运行时不起作用 - 在设备本身上，它们工作正常。所以只有测试广告似乎不起作用，既然是这样，我不太担心。

**更新 4（解决方案）：**

好的 - 经过数周与 PubCenter 支持的来回反复，我终于有了一个解决方案，尽管我很确定这是他们的问题，现在已经解决了。我创建了一个非常简单的测试解决方案，展示了我发送给他们的问题，他们最终得出以下结论：

```
AdControl adControl = new AdControl("Test_client", "Image480_80", true); 
```

需要是这样的：

```
AdControl adControl = new AdControl("test_client", "Image480_80", true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:37:41.350

要找出更具体的错误信息，您可以检查传递给您已注册的[AdControl.ErrorOccurred 事件的](http://msdn.microsoft.com/en-us/library/advertising-mobile-windows-phone-adcontrol-silverlight-erroroccurred-event(v=msads.20).aspx)[AdErrorEventArgs 。](http://msdn.microsoft.com/en-us/library/advertising-mobile-windows-phone-aderroreventargs-class(v=msads.20).aspx)如果从该信息中仍不清楚，请将错误/错误代码添加到您的问题中。

我看到此异常出现的原因是没有广告可显示（即您指定的广告选择范围太窄，并且没有可用的匹配广告），但在这种情况下，当您查看错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:28:09.567

显然，这是：

```
AdControl adControl = new AdControl("Test_client", "Image480_80", true); 
```

需要这样（注意 中的小写“t” `test_client`）：

```
AdControl adControl = new AdControl("test_client", "Image480_80", true); 
```

谁曾想到？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T18:31:52.727

我也有同样的问题。我的 WP7.5 应用程序中的广告在模拟器和手机中都可以使用。当我将我的应用程序升级到 WP8 时，广告停止工作。因此，我在我的应用程序中添加了第二个广告提供程序控件，并使其在 MS 广告控件出现错误时隐藏并显示来自不同公司的第二个广告。

# php - 使用不同类型的变量简化 empty() + echo

> ID：14428899
> 
> 赞同：-1
> 
> 时间：2013-01-20T20:26:15.287
> 
> 标签：php, echo, string

我试图让我的代码错误并免费通知。因此，我应该检查我想要回显的每个变量。我感兴趣的具体案例是一个“新”页面，也可以作为“编辑”。如果选择了某些内容，它会显示编辑页面，其中的字段填写了要编辑的内容。如果没有选择任何内容，则为同一页面，但字段为空。这让我明白了我的意思：

```
 <li class="bordertop">
    <label>Recommended knowledge</label>
    <input class="first_input" name="recommended[]" value="<?php if (count ($Subject->retrieveLink('recommended')) > 0) echo current($Subject->retrieveLink('recommended')); ?>" placeholder="Title"/>
    <input class="second_input" name="recommended_url[]" value="<?php if (key ($Subject->retrieveLink('recommended')) != null) echo key($Subject->retrieveLink('recommended')); ?>" placeholder="http://www.example.com"/>
  </li> 
```

我真的不喜欢我的页面中有那么多代码。我正在尝试尽可能多地将逻辑与演示分开，并保持 OOP 方法。我正在考虑做类似的事情：

```
// Check + echo
function checko($arg = null)
  {
  if (!is_array($arg))
    if (!empty($arg))
      echo $arg;
  } 
```

但这似乎也给未来带来了麻烦（从内部回响并不能让我进一步修改字符串，而且感觉根本不是一个“正确”的解决方案）。我想检查和回显许多变量，这些变量有时会被填充，有时会为空。最好的方法是什么？我知道我可以通过执行 , 在任何地方重复我的代码`if (empty($variable)) echo $variable`，但是：

1.  这对从对象返回值不起作用（从 PHP 5.4 开始，我相信它会在 5.5 中起作用）。这是我主要关心的问题，因为我经常使用它。

2.  我会有太多重复的代码。不

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:39:05.470

> 我试图让我的代码错误并免费通知。因此，我应该检查我想要回显的每个变量。

不，你不应该。
看，这些通知不仅仅是为了让你忙于与它们作斗争。他们是为了帮助，而不是让你的代码变得复杂。
您只需要确定您操作的变量是什么。并且增加批量`if(empty())`不会有任何好处。

> 我真的不喜欢我的页面中有那么多代码。

对于模板来说，这确实是太多的代码。其中一些应该移动到控制器中
在调用模板之前准备好你的数据，然后让它变得简单

```
<input class="first_input" name="recommended[]" value="<?=$recommended?>" placeholder="Title"/>
<input class="second_input" name="recommended_url[]" value="<?=$recommended_url?>" placeholder="http://www.example.com"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:31:38.633

不要在函数内部回显，只返回值

```
// Check + echo
function checko($arg = null) {
  if (!is_array($arg))
    if (!empty($arg))
      return $arg;
} 
```

另外，如果你想缩短代码，你可以使用三元运算符：http: [//phpmaster.com/using-the-ternary-operator/](http://phpmaster.com/using-the-ternary-operator/)

# java - 从 UML 生成 Java 项目的程序

> ID：14428904
> 
> 赞同：2
> 
> 时间：2013-01-20T20:26:29.183
> 
> 标签：java, uml, code-generation

您是否知道任何程序可以使用您定义的类、属性、包和函数从 UML 为您生成整个 Java 项目？

该程序应该是免费的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:33:43.327

它实际上比一般认为的更常见。我见过 Enterprise Architect 和 MagicDrawn 的使用最多。例如，它们甚至可以让您运行模拟并在状态图中使用实际代码填充方法。

# ruby-on-rails - 为什么我的视图代码同时使用实例变量和局部变量？

> ID：14428905
> 
> 赞同：0
> 
> 时间：2013-01-20T20:26:35.337
> 
> 标签：ruby-on-rails, ruby, instance-variables, local-variables

我正在看一本书的例子。在 Products 模型的视图部分，我看到一些类似这样的代码：

```
<table>
  <% @products.each do |product| %>
    <tr class="<%= cycle ('list_line_odd', 'list_line_even') %>">
      <td>
        <%= image_tag(product.image_url, class: 'list_image' %>
      </td>
    <td class ="list_description ">
       <dl>
           <dt> <%= product.title %> </dt> 
```

请注意，它在顶部使用*@products*，而表中的最后一行使用*products*而不是*@products*。有人可以再解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:37:24.813

Ruby 中有三种类型的变量：

*   常规变量，仅在`product`示例代码的范围内可用
*   实例变量，在类的特定实例中可用。`@products`在您的示例中，每个实例都有自己的一组实例变量
*   类变量，在类的*所有*实例中可用。这些也可以直接访问（没有实例），`@@variable`（你没有这种类型的例子）

最后一行说`product`and 是一个与 完全不同的变量`@products`。`@products`由控制器的类实例（可能称为`ProductsController`）填充。它是一个产品列表，该`each()`方法用于遍历每个列表项。在迭代循环`product`中用于指定当前正在迭代的产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:47:09.880

在控制器和视图的上下文中，您在控制器中声明实例变量（以@-符号开头）以将它们传递给视图。

开头没有@符号的变量是仅在有限范围内可用的变量，例如迭代的元素。

所以你将你的@products 从控制器传递给视图。之后，您可以使用 product 作为 @products 变量元素的临时标识符来遍历元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T20:32:39.797

在您的示例中，*@products*是一个响应[Enumerator#each](http://www.ruby-doc.org/core-1.9.3/Enumerator.html#method-i-each)方法的集合。在实践中，这通常意味着一个数组。*然后，您将@products*的每个元素作为*产品*变量迭代地传递到一个块中。

换句话说，*product*是在执行循环时取自*@products的单个元素。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T20:34:46.423

@products 包含 Product 对象的集合。product 变量包含 Product 的一个实例。

# c++ - 如何捕获和控制发送到 OPOS 打印机驱动程序的数据流

> ID：14428906
> 
> 赞同：0
> 
> 时间：2013-01-20T20:26:38.253
> 
> 标签：c++, driver, thermal-printer, opos

我正在尝试捕获发送到 OPOS 打印机驱动程序的数据，并控制它是否应该继续。

我的第一个想法是开发一个虚拟 OPOS 打印机驱动程序，但在深入研究代码之前，我想问问你是否知道其他更好的方法来实现这一点。

有没有办法在特定的OPOS驱动入口处监听，然后控制数据是否传到打印机OPOS驱动？

**更新** 我说的是 MS Windows XP 及更高版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T02:45:17.157

您可以编写一个薄服务对象楔块，将其在 OPOS 中注册为打印机 SO，并在其中将所有调用传递给真正的 SO。然后，您可以就是否打印做出业务决策。

# ios - 使用页面缩放的内容缩放 UIWebview

> ID：14428908
> 
> 赞同：0
> 
> 时间：2013-01-20T20:26:56.927
> 
> 标签：ios, objective-c, uiwebview, cgaffinetransform

我正在尝试模仿移动 Safari 应用程序的标签系统。当您进入选项卡模式时，页面看起来正在缩小。在我的应用程序中，我尝试了 3 种不同的方法来实现这种效果。

1) 捕获 UIWebView 的图像，隐藏 web 视图并缩放图像。2) 缩放 UIWebView 3) 对 web 视图应用变换。

第一种方法是最好的方法之一，除非我旋转屏幕，图像看起来很时髦，因为它会扩大图像或缩小图像。

第二种方法不起作用，网络视图确实会显示，但它基本上只是放大网络视图内容，所以如果你在 google.com 上，它会放大谷歌徽标或页面上的某个位置，而不是保持如何它在不放大时看起来，然后缩小。

第三种方法也有效！除了使用变换，我看不到控制 Web 视图的 x、y、宽度和高度的方法。我可以添加平移或缩放它，但是旋转时效果不佳。

对于 iPhone 5 上的 Web 视图的纵向尺寸，我试图使其（64、91.5、192、315）和横向 CGRectMake（113、65、341、161）。如何解决此问题以使其正确扩展？

![在此处输入图像描述](../Images/2b1f2f12a898054e46e016975a1aa943.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:57:11.947

转换方法可能是最好的；当您将变换应用于图层（包括通过视图间接）时，您会指示 GPU 在合成时执行一些特殊操作。因此，您可以自由地做任何您想做的事情，而无需考虑如何将事物放入特定空间产生任何影响的视图逻辑。由于都是合成效果，视图的原始像素渲染是不变的。

但是，当您旋转设备时，您想要调整视图本身，因为您真正想要的是让 Web 视图重新布局内容。

如果您只是在模拟 Safari，那么使用视图`frame`设置正常的全屏布局；当您想显示缩小的视图时，还应用缩放变换并创建合适的分页滚动视图以在页面之间滑动。如果设备旋转，那么这应该会影响`frame`和滚动视图，但不会影响转换。

# django - 为 Django 项目选择一个好的异步解决方案

> ID：14428910
> 
> 赞同：3
> 
> 时间：2013-01-20T20:27:12.417
> 
> 标签：django, node.js, asynchronous, websocket, tornado

我目前正在使用在 Apache (mod_wsgi) 上提供的 Django 来开发我的应用程序。我最喜欢的事情之一是使用 JavaScript 的`setInterval()`函数和 AJAX 来“伪造”异步请求以从数据库中检索新数据。例如：

```
// javascript

function someFunction() {
    // do some stuff
    setInterval(function() { fetchNewStuff() }, 1000); // run fetchNewStuff() every second
}

function fetchNewStuff() {
    Dajaxice.main.fetch_new_stuff(fetch_new_stuff_callback, {'id':$(this).attr('user_id')});
}

function fetch_new_stuff_callback(data){
    // append new stuff to my table, list or whatever in HTML page
} 
```

据我所知，这完全可以满足我的需求。然而，随着我的应用程序变得越来越大、越来越复杂，无论我如何尽量减少传输的数据，这最终都会对我的服务器和我的客户端来说变得太麻烦。此外，我无法接受在当今世界我仍然在“伪造”这个 :) 所以，我想为我当前和未来的项目找到一些具有推送功能的“真实”解决方案。

我确实尝试用谷歌搜索我的问题，我发现了很多有趣的东西（Tornado、Nginx、Node.js、Twisted 等），但大多数教程/文章/博客至少有 6 个月的历史，我相信很多事情都发生了变化那时。到目前为止，我已经尝试测试 Tornado 并且测试成功，但是在我的生产服务器上设置它时遇到了一些问题。我还尝试了 Node.js，它非常简单，因为我非常了解 JavaScript，但话又说回来，我不确定它是否是一个好的解决方案。

我的问题是 - 根据这些条件，在我当前和未来的应用程序中实现的最佳事物（服务器、平台、框架等）是什么：

*   **易于使用**（例如 Node.js 可以在这里使用）
*   **尽可能消除第 3 方的东西**（一些开箱即用的解决方案，例如 Django+Websockets 就是这样*[这真的只是一个愚蠢的例子]*）
*   **与 Django 一起使用的良好文档**（最好有一些关于我的新技术和 Django 的真实示例，因为我对 Web 服务器和相关内容非常熟悉）
*   **有一个很好的前景和未来**（我真的很想学习一些我会经常使用并且我不必经常重新配置的东西）

感谢您的想法和任何形式的帮助（非常欢迎提供一些好的、最近更新的阅读材料的链接：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:40:19.083

你应该看看[django-socketio](https://github.com/stephenmcd/django-socketio.git)项目，这是一个 Django 应用程序，它提供了通过 Socket.IO 将 websockets 与 Django 一起使用所需的功能。

它使用[gevent](http://www.gevent.org/)库和[socket.io](http://socket.io/)。

# php - 使用 MySQL 数据库中的数据填写 PDF 表格

> ID：14428913
> 
> 赞同：3
> 
> 时间：2013-01-20T20:27:29.980
> 
> 标签：php, mysql, forms, pdf

我正在开发一个在线考勤卡系统来替换纸质考勤卡。我所做的是在 PHP 中创建一个网页，该网页需要时间以及用户输入的职位描述和其他值，并将它们存储在 MySQL 数据库中。一切正常。

接下来我想做的是从数据库中获取特定用户和星期的信息，并让它填写我通过扫描旧纸质考勤卡并将其制作成 PDF 表单创建的 PDF 模板文件。我不知道这是否可能我一直在网上研究它，我能想到的只是如何生成一个新的 PDF 文件。我希望这里有人可以指出我如何做到这一点的信息来源。

这是我想要做的一个例子[http://try.fillpdf-service.com/](http://try.fillpdf-service.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:41:06.017

您好，祝贺您及时完成了第一步，您可以使用非常完整的 pdf 生成器 php 类 TCPDF 它始于 2002 年，TCPDF 现在是世界上最活跃的开源项目之一，每天有数百万用户使用并包含数千CMS 和 Web 应用程序。

[http://www.tcpdf.org/](http://www.tcpdf.org/)用于生成您的 pdf 您想要什么样的此类具有非常有用的文档网且易于使用

干杯，法尔扎姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:45:45.387

看看这个

[http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)

它可以作为命令行工具调用，并且在其他功能中可以填写表单字段（在您提供的现有 PDF 上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:34:46.083

也许[FPDF](http://www.fpdf.org/)已经很老了，但仍然可以很好地处理 PDF 生成。只需获取模板 PDF（随心所欲地创建）并在其上放置您想要的信息。您必须将数据放在特定位置，请参阅教程部分以获得更好的理解。另一个流行的解决方案是使用来自知名 Zend Framework 的[Zend_PDF ，但我认为如果您不是很有经验，FPDF 会更容易使用。](http://framework.zend.com/manual/1.12/en/zend.pdf.pages.html)

# java - Java添加自己的接口后抛出NotSerializableException

> ID：14428917
> 
> 赞同：5
> 
> 时间：2013-01-20T20:28:08.937
> 
> 标签：java, android, serialization

伙计们，我对我正在开发的一个新的 Android 应用程序感到很困惑。对于应用程序（纸牌游戏），我需要保存一些数据。我使用序列化来完成这项工作。

**现在的问题是：** 当我尝试实现一个用于跟踪付款人轮次的接口时，应用程序从 Game 类（主要活动）返回 NoSerializableException。当我删除界面时，一切正常。

**turn 类包含以下代码：**

```
public class Turn<T> implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 1L;

public interface OnTurnEndedListener<T>{
    void onTurnEnded(T currentPlayer);
}

private ArrayList<T> players;
private int turnIndex;
private int rounds;
private ArrayList<OnTurnEndedListener<T>> turnEndListenerList;

public Turn() {
    throw new UnsupportedOperationException("cannot init without players");
}

public Turn(ArrayList<T> players, int startingPlayerIndex) {
    this.players = players;
    this.turnIndex = startingPlayerIndex;
    this.rounds = 0;
    turnEndListenerList = new ArrayList<OnTurnEndedListener<T>>();
}

public int getRounds() {
    return rounds;
}

public T next() {
    turnIndex = (turnIndex + 1) % players.size();
    if (turnIndex == 0) {
        rounds++;
    }
    T retVal = players.get(turnIndex);
    for (OnTurnEndedListener<T> l : turnEndListenerList) {
        l.onTurnEnded(retVal);
    }
    return retVal;
}

public T peek() {
    return players.get(turnIndex);
}

public void addOnTurnEndedListener(OnTurnEndedListener<T> l) {
    this.turnEndListenerList.add(l);

}
} 
```

当我在主要活动（游戏）中添加以下代码时，每次关闭活动时都会出现异常。

```
gameData.getTurn().addOnTurnEndedListener(new Turn.OnTurnEndedListener<Hand>() {
            @Override
            public void onTurnEnded(Hand hand) {
                turnEndedHandler(hand);
            }
        }); 
```

您可以在下面找到 Game 和 GameData 类的完整代码，以及错误日志。

```
import java.util.ArrayList;
import java.util.Collections;

import android.app.Activity;
import android.content.Intent;
import android.content.res.Configuration;
import android.os.Bundle;
import android.util.Log;
import android.view.Gravity;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class Game extends Activity implements OnTouchListener{

    private Deck deck;
    private GameData gameData;
    Hand playerHand, oppHand;
    private ImageView ivDeckClosed, ivDeckOpen, ivPlayerCard1, ivPlayerCard2,ivPlayerCard3, ivPlayerCard4, ivPlayerCard5, ivPlayerCard6,ivPlayerCard7, ivPlayerCard8, ivPlayerCard9, ivPlayerCard10,ivPlayerCard11, ivPlayerCard12, ivPlayerCard13, ivPlayerCard14;
    private ImageView[] playerCards;
    private TextView tvOpp1;
    private ArrayList<Hand> playersInOrder;
    private LinearLayout llPlayGround,llPlayGroundRow1,llPlayGroundRow2,llCardDeck;
    private ArrayList<PlayedSet> playedSets;
    public static final String SAVE_FILENAME = "jokerensave.ser";
    private SaveHandler savehandler;
    private Hand currentHand;
    private int defaultStartingPlayer = 0;

    public static enum STATES {
        start, resume, end
    };

    public static final int START_CODE = 0;
    public static final int RESUME_CODE = 1;
    public static final String GAME_STATE = "STATE";
    public static final String GAME_DATA = "GameData";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d("PUKI","onCreate");

        // Get save game
        savehandler = SaveHandler.getInstance(this);
        gameData = savehandler.readLastState();

        setContentView(R.layout.gamescreen);

        // Load which state was given by the mainscreen
        switch ((STATES) getIntent().getExtras().get(GAME_STATE)) {
        case start:
            gameData.setFirstRun(true);
            Log.i("ONCREATE", "Received state: start");
            break;
        case resume:
            gameData.setFirstRun(false);
            Log.i("ONCREATE", "Received state: resume");
            break;
        default:
            gameData.setFirstRun(true);
            Log.i("ONCREATE", "Received state: none");
            break;
        }

        // Transferring game data to MainScreen
        Bundle b = new Bundle();
        b.putInt("int", 5);
        b.putSerializable(GAME_DATA, gameData);
        Intent i = new Intent();
        i.putExtras(b);
        setResult(0, i);
    }

    @Override
    protected void onStart() {
        super.onStart();
        Log.d("PUKI","onStart");
        Log.i("FIRSTRUN", "Firstrun = "+gameData.getFirstRun());

        init(gameData.getFirstRun());

        gameData.getTurn().addOnTurnEndedListener(new Turn.OnTurnEndedListener<Hand>() {
            @Override
            public void onTurnEnded(Hand hand) {
                turnEndedHandler(hand);
            }
        });
    }

    private void init(boolean first) {
        initGraphics(first);
        Log.i("INIT", "Game init graphics");
        if (first) {
            Log.i("INIT", "Game init core");
            initGameCore();
        }
    }

    private void initGameCore() {
        deck = new Deck();
        playedSets = new ArrayList<PlayedSet>();

        // Create array with players and their hand
        playersInOrder = new ArrayList<Hand>();
        playerHand = new PlayerHand(playerCards, "Player name");
        playersInOrder.add(playerHand);
        oppHand = new OppHand(new GameStrategy(), null, "Opponent");
        playersInOrder.add(oppHand);

        // Push all data to gamedata class
        gameData.init(playerHand, oppHand, playersInOrder, deck, playedSets, new Turn<Hand>(playersInOrder,defaultStartingPlayer));
        gameData.setGameInProgress(true);

        // Deal cards to players
        dealCards();
    }

    //TODO
    protected void turnEndedHandler(final Hand hand) {
        if(hand.isAwaitingInput()){
            // This means the turn is for a human player, so do nothing.
            Log.i("TURN", "The turn is for the human player: "+hand.getPlayerName());
        }
        else{
            // This means the turn is for a AI. Decide!
            Log.i("TURN", "The turn is for the AI player: "+hand.getPlayerName());
            gameData.getTurn().next();

            // Update players hand size for human player
            this.updateOppScore();
        }
    } 
```

（我从上面的例子中删除了很多代码，因为解决这个问题不需要这些代码）

```
import java.io.Serializable;
import java.util.ArrayList;

public class GameData implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = -3796450525724090900L;

    private Hand playerHand, oppHand;
    private ArrayList<Hand> playersInOrder;
    private Deck deck;
    private boolean gameInProgress,grabbedCard,playerMustThrow,firstRun;
    private ArrayList<PlayedSet> playedSets; 
    private Turn<Hand> turn;

    private static GameData instance = new GameData();

    public GameData(){
        // Do nothing
    }

    public static GameData getInstance(){
        return instance;
    }

    public void init(Hand playerHand, Hand oppHand, ArrayList<Hand> playersInOrder, Deck deck, ArrayList<PlayedSet> playedSets, Turn<Hand> turn) {
        this.playerHand = playerHand;
        this.playersInOrder = playersInOrder;
        this.oppHand = oppHand;
        this.deck = deck;
        this.grabbedCard = false;
        this.playerMustThrow = false;
        this.playedSets = playedSets;
        this.firstRun = false;
        this.turn = turn;
    }

    public Hand getPlayerHand(){
        return playerHand;
    }
    public Hand getOppHand(){
        return oppHand;
    }
    public Deck getDeck(){
        return deck;
    }
    public ArrayList<Hand> getPlayersInOrder(){
        return playersInOrder;
    }
    public void setGrabbedCard(boolean set){
        this.grabbedCard = set;
    }
    public boolean getGrabbedCard(){
        return grabbedCard;
    }

    public void setGameInProgress(boolean progress) {
        this.gameInProgress = progress;
    }

    public boolean isGameInProgress(){
        return gameInProgress;
    }

    public void createNewPlaySet(PlayedSet newSet){
        playedSets.add(newSet);
    }

    public ArrayList<PlayedSet> getAllPlayedSets(){
        return playedSets;
    }

    public void setPlayerCanThrow(boolean set){
        this.playerMustThrow = set;
    }

    public boolean canPlayerThrow(){
        return playerMustThrow;
    }

    public boolean getFirstRun(){
        return firstRun;
    }

    public void setFirstRun(boolean set){
        this.firstRun = set;
    }

    public Turn<Hand> getTurn(){
        return turn;
    }

} 
```

**日志：**

```
01-20 21:05:16.678: W/dalvikvm(27035): threadid=1: thread exiting with uncaught exception (group=0x40c5c1f8)
01-20 21:05:16.693: E/AndroidRuntime(27035): FATAL EXCEPTION: main
01-20 21:05:16.693: E/AndroidRuntime(27035): java.lang.RuntimeException: Parcelable encountered IOException writing serializable object (name = nl.dirkgroenen.jokeren.GameData)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.os.Parcel.writeSerializable(Parcel.java:1181)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.os.Parcel.writeValue(Parcel.java:1135)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.os.Parcel.writeMapInternal(Parcel.java:493)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.os.Bundle.writeToParcel(Bundle.java:1612)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.os.Parcel.writeBundle(Parcel.java:507)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.content.Intent.writeToParcel(Intent.java:6224)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.app.ActivityManagerProxy.finishActivity(ActivityManagerNative.java:1831)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.app.Activity.finish(Activity.java:3709)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.app.Activity.onBackPressed(Activity.java:2124)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.app.Activity.onKeyUp(Activity.java:2099)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.view.KeyEvent.dispatch(KeyEvent.java:2633)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.app.Activity.dispatchKeyEvent(Activity.java:2334)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1958)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3565)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.view.ViewRootImpl.handleFinishedEvent(ViewRootImpl.java:3538)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2646)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.os.Looper.loop(Looper.java:137)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.app.ActivityThread.main(ActivityThread.java:4511)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.lang.reflect.Method.invokeNative(Native Method)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.lang.reflect.Method.invoke(Method.java:511)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at dalvik.system.NativeStart.main(Native Method)
01-20 21:05:16.693: E/AndroidRuntime(27035): Caused by: java.io.NotSerializableException: nl.dirkgroenen.jokeren.Game$6
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1364)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.util.ArrayList.writeObject(ArrayList.java:644)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.lang.reflect.Method.invokeNative(Native Method)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.lang.reflect.Method.invoke(Method.java:511)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1053)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1404)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:979)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:368)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1074)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1404)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:979)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:368)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1074)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1404)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
01-20 21:05:16.693: E/AndroidRuntime(27035):    at android.os.Parcel.writeSerializable(Parcel.java:1176)
01-20 21:05:16.693: E/AndroidRuntime(27035):    ... 23 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:56:12.747

如果我错了，有人纠正我，但我不建议使用序列化来保存数据。由于对类的任何更改都会导致任何先前保存的数据版本不可用。您应该考虑使用一种独立的格式来构建数据，例如 JSON 或 XML，或者自定义格式。

使用 JSON 非常简单，并且非常容易映射到（和从）Java 对象，例如，可以很容易地保存为应用程序中的字符串首选项。并且您还可以处理对保存状态的 Data pojo 的任何更改，以防您将来要添加或删除内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T21:52:46.533

让 OnTurnEndedListener 扩展 Serializable

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T01:21:27.857

> 应用程序从 Game 类（主要活动）返回 NoSerializableException。

不，它*提到*了Game$6 类，它是您在开始的行中创建`NotSerializableException`的匿名实例`OnTurnEndedListener,`

```
gameData.getTurn().addOnTurnEndedListener(...) 
```

不扩展`Serializable`。所以要么你必须解决这个问题，要么让

```
private ArrayList<OnTurnEndedListener<T>> turnEndListenerList; 
```

成一个`transient`变量，无论是你想要的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-21T04:27:20.527

你的 Turn 接口有一个 ArrayList 和一个 ArrayList。如果它们中的任何一个都不可序列化，您将收到此错误。T 在运行时决定的事实带来了另一个`debugging`挑战。虽然它是一个很好的设计，但我建议您使用 javadoc，以便使用您的 Turn 接口的开发人员知道 T 也必须是可序列化的，否则它可能会在运行时中断。

> > > 在您的情况下，类`Hand`很可能是不可序列化的。

# c - 分叉关于父/子进程

> ID：14428918
> 
> 赞同：0
> 
> 时间：2013-01-20T20:28:16.623
> 
> 标签：c, fork, parent-child, file-descriptor

我对C中的父/子进程有一个小问题：子进程如何访问父进程在fork*之后*打开的文件描述符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T20:36:04.647

假设问题是关于父进程*分叉然后打开新的文件描述符*：简短的回答是：它不能。

有一些特定于平台的方法可以在进程之间传递文件描述符（例如，使用 unix 套接字发送的 SCM_RIGHTS 辅助消息），但它们不依赖于进程的父子关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T20:35:19.907

文件描述符是通过`fork`系统调用携带的，因此子进程可以随意使用它们。`man 2 pipe`这就是通常使用管道的 IPC（请参阅 参考资料）完成的方式。

如果您需要访问在 fork 之后打开的文件描述符，您可以使用`sendmsg`. 请参阅[如何使用 sendmsg() 在 2 个进程之间通过套接字发送文件描述符？](https://stackoverflow.com/questions/8481138/how-to-use-sendmsg-to-send-a-file-descriptor-via-sockets-between-2-processes)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T20:36:33.567

在 fork() 之后，子进程得到它自己的父文件描述符**的副本。**

子文件的每个文件描述符与父文件的相应文件描述符引用相同的打开文件描述。

一旦他们拥有自己的文件描述符副本，子/父关系就无关紧要了。它与使用自己的文件描述符集访问同一文件的两个不同进程相同。之后文件锁定和同步可能会发挥作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T20:39:06.510

[已编辑 - 抱歉误读了问题，您不能因为进程不共享相同的内存空间。最好在分叉之前打开文件描述符或使用其他 IPC 机制，具体取决于您要实现的目标]

子进程将继承父进程的文件描述符，因此可以直接使用。

```
void example()
{
    int fd = open("My file", O_WRONLY );

    pid_t pid = fork();
    if(pid == 0)
    {
         /* child */
         char * child_msg = "Hi there from child\n";
         write(fd, my_msg, sizeof(my_msg);

         /* ... other stuff */
    } 
    else
    {
        /* parent */
        char * parent_msg = "Hi there from parent\n";
        write(fd, my_msg, sizeof(my_msg);

        /* ... other stuff */
    }
} 
```

两条消息都将写入“我的文件”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T20:45:48.723

你的问题不清楚。

无论如何，如果您尝试在使用父进程的子进程中使用数据，则可以将数据从父进程传输到子进程。为简化起见，只需在*POSIX* `int pipe(int anFD[2])`中使用匿名管道，然后您就可以使用`write`and `read`（of`fread`和`fwrite`函数）。在父进程中，您必须使用函数`popen`打开具有写/读访问权限的文件。

请记住，这`fork()`是一个完整的副本（父母和孩子有共享页面，这些页面是只读的）。如果您尝试在源页面中写入，内核将检查子进程是否是一个所有者，然后该源页面将可写）。

# javascript - 重温 MDN JavaScript 继承 - 理解示例

> ID：14428932
> 
> 赞同：2
> 
> 时间：2013-01-20T20:29:47.467
> 
> 标签：javascript

我正在查看 MDN 页面上关于[Inheritance Revisited](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_Revisited)`doSomething`的示例，并认为让这些方法真正*做*一些事情会很好。所以我从以下代码开始，基于示例：

```
function A(a) { this.varA = a };
A.prototype = { varA: null, doSomething: function() { console.log('do something with ' + this.varA) } };
function B(a, b) {
    A.call(this, a);
    this.varB = b;
};
B.prototype = Object.create(new A(), {
    varB: { value: null, enumerable: true, configurable: true, writeable: true },
    doSomething: { value: function() {
        A.prototype.doSomething.apply(this, arguments);
        console.log("do something with " + this.varB);
    }, enumerable: true, configurable: true, writeable: true}
});
var b = new B('a', 'b');
b.doSomething(); 
```

我将代码复制并粘贴到 Chrome 控制台中，预计会看到

```
do something with a
do something with b 
```

但相反我得到了

```
do something with a
do something with null 
```

我在这里俯瞰什么？对“new B”的调用不应该导致上面定义的构造函数（函数B（...））被调用吗？如果构造函数被调用，b.varB 不应该有一个值吗？我如何需要更改示例以使输出符合预期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T21:15:49.137

Accidentally you specified `varB` as being **non-writable** and hence the assignment `this.varB = b` failed (or was ignored).

`writeable: true` should be spelled `writable: true` (without `e`). By default, properties defined using the a property descriptor are non-writable.

So the whole descriptor becomes:

```
varB: { value: null, enumerable: true, configurable: true, writable: true } 
```

Since you are assigning a value inside the constructor function anyway, you don't really have to use the descriptor though.

* * *

More information: [MDN - `Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty).

# java - 默认 java 任务的 Ant 类路径上有什么（fork 设置为“false”）

> ID：14428937
> 
> 赞同：2
> 
> 时间：2013-01-20T20:30:04.937
> 
> 标签：java, ant

我做了以下测试：

### 代码

```
public class FooMain {
   public static void main(String args[]) throws ClassNotFoundException {
      Class klass = Class.forName("com.sun.xml.internal.ws.spi.ProviderImpl");
   }
} 
```

### $CLASSPATH 环境变量

```
echo $CLASSPATH
/usr/lib/jvm/java-7-openjdk-i386/jre/lib/rt.jar:.
jar tvf /usr/lib/jvm/java-7-openjdk-i386/jre/lib/rt.jar | grep com.sun.xml.internal.ws.spi.ProviderImpl

 1742 Wed Oct 24 18:52:52 EEST 2012 com/sun/xml/internal/ws/spi/ProviderImpl$1.class
 1349 Wed Oct 24 18:52:52 EEST 2012 com/sun/xml/internal/ws/spi/ProviderImpl$2.class
12412 Wed Oct 24 18:52:52 EEST 2012 com/sun/xml/internal/ws/spi/ProviderImpl.class 
```

所以寻找的类在 $CLASSPATH 上。

**但是，在 Ant 的java**任务和**fork**设置为**"false"**的情况下运行上述代码会失败，并且只有在**fork**设置为**"true"**时才会成功。

然而，这与[ANT in Action 书中](http://www.amazon.co.uk/Ant-Action-Steve-Loughran/dp/193239480X/ref=sr_1_1?ie=UTF8&qid=1358713527&sr=8-1)所写的内容背道而驰，该书在 pg 中注明。152 基本 Ant 的 java 任务使用 Ant 类路径运行，其中包括“CLASSPATH 环境变量中的所有内容”。

那么为什么当 fork 设置为“false”时，Ant 的 java 任务不能**找到****所**寻找的类，并且只有当**fork**设置为“true”时才能成功，即使在这两种情况下类都在 $CLASSPATH 上？

 ***** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T23:07:01.380

任务使用一个特殊`fork="false"`的`<java>`“隔离”类加载器，*它只*从任务自己的类路径（`classpathref`属性或`<classpath>`嵌套元素）加载类，除了一[组特定的硬编码包前缀](http://svn.apache.org/viewvc/ant/core/tags/ANT_184/src/main/org/apache/tools/ant/util/JavaEnvUtils.java?view=markup#l378)，如果它们将尝试从父加载器加载它们在任务自己的类路径中找不到。由于`com.sun.xml`不在此硬编码列表中，因此不会将其委托给父级，因此会给您一个`ClassNotFoundException`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T21:57:35.683

[手册页](http://ant.apache.org/manual/Tasks/java.html)对java任务的操作有如下解释：

> 在正在运行的 (Apache Ant) VM 中执行 Java 类，或者在指定时分叉另一个 VM。
> 
> 如果在运行此任务时出现奇怪的问题，请设置 fork="true" 以使用新的 JVM。

# 使用 ANT 管理类路径

我强烈建议您始终 fork JVM 并利用 ANT 类路径管理工具：

```
<path id="runtime.path">
    <fileset dir="lib/runtimejars" includes="*.jar"/>
</path>

<java classname="???" fork="true" classpathref="runtime.path">
    <arg line="arg1 arg2 arg3"/>
</java> 
```

为什么？如果您将构建移植到另一台机器上，您无法确定 CLASSPATH 变量的设置方式是否相同。

# 可执行jar

减少对 CLASSPATH 变量的依赖的另一种方法是创建一个可执行的 jar。以下答案演示了如何使用[manifestclasspath](http://ant.apache.org/manual/Tasks/manifestclasspath.html)任务创建一个可以嵌入到 jar 清单中的类路径：

*   [在使用 Ant 编译的文件中找不到主类](https://stackoverflow.com/questions/3143567/cannot-find-main-class-in-file-compiled-with-ant/3144290#3144290)
*   [带有外部 jar 的 Java 构建文件](https://stackoverflow.com/questions/11398530/buildfile-for-java-with-external-jars/11403201#11403201)****

# c++ - _i64toa_s 的等价物是什么？

> ID：14428938
> 
> 赞同：0
> 
> 时间：2013-01-20T20:30:20.177
> 
> 标签：c++, visual-c++, llvm

我正在尝试使用 LLVM 编译我的 MSVC++ 模块，但我找不到 _i64toa_s 函数的好选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:08:42.927

使用[std::stringstream](http://en.cppreference.com/w/cpp/io/basic_stringstream)、[std::to_string](http://en.cppreference.com/w/cpp/string/basic_string/to_string)或[boost::lexical_cast](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_lexical_cast.html)

# php - 防止 PHP 在响应中透明地转换链接

> ID：14428939
> 
> 赞同：-1
> 
> 时间：2013-01-20T20:30:29.757
> 
> 标签：php

在我的 PHP 响应中，我设置了标题“内容类型：应用程序/二进制”，但这并没有阻止 PHP 重写我的响应。

当我的虚拟主机启用了 use_trans_sid 时，如何防止 PHP 透明地转换响应以插入 PHPSESSID？是否可以在不使用 ini_set 或修改 htaccess 文件的情况下执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:56:14.353

从未尝试过，但根据文档，[output_reset_rewrite_vars()](http://php.net/manual/en/function.output-reset-rewrite-vars.php)做了正确的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:58:00.147

[您](http://php.net/manual/en/configuration.changes.modes.php)可以在此处更改 INI 设置。`session.use_trans_sid`有一个 PHP_INI_ALL 模式，这让你

1.  ini_set()
2.  php.ini
3.  .htaccess
4.  .user.ini
5.  httpd.conf

编辑：忽略这个，今天我了解到`output_reset_rewrite_vars`

# json - json解析返回null

> ID：14428952
> 
> 赞同：0
> 
> 时间：2013-01-20T20:31:57.400
> 
> 标签：json, web-services, parsing

我第一次尝试解析一些json。我的 json 看起来像这样：

{"categoryid":"2","accountid":"1","title":"待售床","price":"2.99","description":"全新床....}]

我一直在尝试遵循本教程：

[http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

然而，他的 JSON 看起来像：

{"paging":{"page":1,"total":123,"page_size":20,"pages":7},"loans":[{"id":519535,"name":"Oyunbat" "描述":{"语言": ....

本教程中的代码需要 objectID “贷款”，但是我尝试解析的 JSON 没有此 objectID。它只有值/键对。

我的问题似乎与这部分代码有关：

```
NSArray* latestLoans = [json objectForKey:@"title"]; 
```

字典放置在数组中的位置。但是由于我的 JSON 中没有这个 objectID，所以我得到了一个 null 返回并且没有数据。

我怎样才能通过放入一个数组来对我拥有的 JSON 进行简单的解析？

非常感谢您的帮助！我对此很陌生，并试图开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:42:51.607

看起来像根和孩子。尝试这个：

```
dict = [resp objectForKey:@"paging"]; 
  if( ( dict == nil ) || ![dict isKindOfClass:[NSDictionary class]] ) { 
NSLog( @"WARNING: %@", [dict description]); 
  return; 
 } 

 Title = [[dict objectForKey:@"title"]copy];

 NSLog(@"Your Value: %@", Title); 
```

# php - opendir 数组从结果中排除文件

> ID：14428954
> 
> 赞同：0
> 
> 时间：2013-01-20T20:32:00.827
> 
> 标签：php, arrays, directory, opendir

下面的代码将从命名文件夹中选择我的所有 php 文件，然后将它们打乱并在我的页面上回显 10 个结果，该文件夹包含一个 index.php 文件，我希望将其从结果中排除。

```
<?php 

if ($handle = opendir('../folder/')) {
    $fileTab = array();
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != "..") {
            $fileTab[] = $file;
        }
    }
    closedir($handle);
    shuffle($fileTab);
    foreach(array_slice($fileTab, 0, 10) as $file) {
        $title = str_replace('-', ' ', pathinfo($file, PATHINFO_FILENAME));
        $thelist .= '<p><a href="../folder/'.$file.'">'.$title.'</a></p>';
    }
}
?>
<?=$thelist?> 
```

我找到了一个排除 index.php 的代码，但我不确定如何将它合并到我上面的代码中。

```
<?php
$random = array_values( preg_grep( '/^((?!index.php).)*$/', glob("../folder/*.php") ) );
$answer = $random[mt_rand(0, count($random) -1)];
include ($answer);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:34:35.170

为什么不直接修改行

```
if ($file != "." && $file != "..") { 
```

到

```
if ($file != "." && $file != ".." && $file != 'index.php') { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:37:30.787

基于 glob() 而不是 readdir() 的方法：

```
<?php 
$files = glob('../folder/*.php');
shuffle($files);
$selection = array_slice($files, 0, 11);

foreach ($selection as $file) {
    $file = basename($file);
    if ($file == 'index.php') continue;

    $title = str_replace('-', ' ', pathinfo($file, PATHINFO_FILENAME));
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T20:38:54.923

您可以使用

```
$it = new FilesystemIterator(__DIR__, FilesystemIterator::SKIP_DOTS);
$it = new RegexIterator($it, '/.php$/i', RegexIterator::MATCH);
$exclude = array("index.php");
foreach ( $it as $splFileInfo ) {
    if (in_array($splFileInfo->getBasename(), $exclude))
        continue;

    // Do other stuff
} 
```

或者简单地说

```
$files = array_filter(glob(__DIR__ . "/*.php"), function ($v) {
    return false === strpos($v, 'index.php');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T20:35:37.313

您可以在阅读目录内容时排除它（就像使用“.”和“..”一样）：

```
if ($handle = opendir('../folder/')) {
    $fileTab = array();
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != ".." && $file != "index.php") {
            $fileTab[] = $file;
        }
    }
    closedir($handle);
    shuffle($fileTab);
    foreach(array_slice($fileTab, 0, 10) as $file) {
        $title = str_replace('-', ' ', pathinfo($file, PATHINFO_FILENAME));
        $thelist .= '<p><a href="../folder/'.$file.'">'.$title.'</a></p>';
    }
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T20:36:46.110

```
while (false !== ($file = readdir($handle)))
{
    if ($file != "." && $file != ".." && $file != 'index.php')
        $fileTab[] = $file;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T20:36:49.257

你可以把这条线`if ($file != "." && $file != "..") {`改成`if ($file != "." && $file != ".." && $file != 'index.php') {`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-20T20:44:32.863

您找到的代码取代了繁琐的目录读取循环。

它应该只是：

```
 $files = preg_grep('~/index\.php$~', glob("../folder/*.php"), PREG_GREP_INVERT); 
```

像以前一样获取10个元素：

```
 $files = array_slice($files, 0, 10); 
```

然后输出那些。

# ruby-on-rails - 使用 Rails 中的地图了解 options_for_select

> ID：14428956
> 
> 赞同：3
> 
> 时间：2013-01-20T20:32:18.293
> 
> 标签：ruby-on-rails

```
<form id="earnings_select" action="<%= publishers_earnings_statements_url %>" method="get">
  <% unless current_publisher.earnings_statements.all.size == 0 %>
    <%= select_tag 'id', 
                   options_for_select(current_publisher.earnings_statements.all.map{|s| [s.label, s.id.to_s]}, params[:id]),
                   :id => 'earnings_select_id' %>  
    <input type="submit" value="Go">
  <% end %>
</form> 
```

这就是我拥有的代码......有人可以解释一下这个`current_publisher.earnings_statements.all.map{|s| [s.label, s.id.to_s]}`位的用途吗？

我不是 Rails 专家，很难理解它的含义。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T20:42:07.517

Map 根据传递给它的块返回的内容创建一个新数组。在这种情况下，它返回一个数组数组，其中包含来自 Earning_statements 的标签和 id。它看起来像

```
[[label1, id1], [label2, id2]] 
```

然后将该数组用作选择标记的选项。label 是显示的文本，id 是用户做出选择的参考。

# java - 我必须实现 Java Media Framework 接口吗？

> ID：14428957
> 
> 赞同：1
> 
> 时间：2013-01-20T20:32:18.757
> 
> 标签：java, jmf

我一直在阅读有关 Java Media Framework 的内容，对此我感到困惑。例如，接口 Player 和 Processor。我必须`start()`为这些接口实现方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T01:54:34.277

查看[`Manager`](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/javax/media/Manager.html#method_summary)API 的方法。它有许多方法可以提供同时实现`Player`和的对象`Processor`。

# java - GWT：尝试通过 GWT AsyncCallback 检索对象列表我得到了一个只有最后一个值的列表

> ID：14428958
> 
> 赞同：1
> 
> 时间：2013-01-20T20:32:28.583
> 
> 标签：java, gwt, arraylist, asynccallback

我正在尝试使用 AsyncCallback 调用检索对象列表。在我查看 onSuccess 过程中的列表数据之前，一切看起来都很好。确实，我收到了一个包含正确行数的列表，但每一行都与 SQL 语句检索到的最后一个相同

这是入口点客户端模块：

```
package com.fantaprica.client;

import java.util.List;
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.fantaprica.shared.GameDay;

/**
 * Entry point classes define <code>onModuleLoad()</code>.
 */
public class Fantaprica implements EntryPoint {

private final ODBConnectionAsync odbconnectionSvc = GWT
        .create(ODBConnection.class);

/**
 * Entry point classes define <code>onModuleLoad()</code>.
 */

public void onModuleLoad() {

    odbconnectionSvc
            .getGameDayList(new AsyncCallback<List<GameDay>>() {
                public void onFailure(Throwable caught) {
                }

                public void onSuccess(List<GameDay> result) {

                    System.out.println("#########################################");
                    System.out.println("OnModuleLoad");
                    for (int i = 0; i < result.size(); i++) {
                        System.out.println("index="+i);
                        System.out.println("result.get(i).getGameDayCompetition()="+result.get(i).getGameDayCompetition());
                        System.out.println("result.get(i).getGameDayCupFl()"+result.get(i).getGameDayCupFl());
                        System.out.println("result.get(i).getGameDayId()="+result.get(i).getGameDayId());
                        System.out.println("result.get(i).getGameDayOrder()="+result.get(i).getGameDayOrder());                                         
                        System.out.println("result.get(i).getGameDaySeason()="+result.get(i).getGameDaySeason());
                    }
                }
            });
}
} 
```

这是服务器端的实现：

```
package com.fantaprica.server;

import java.text.ParseException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Connection2DB {

public static ResultSet resultset(String p_sql_statement) throws ParseException {

    //String db_file_name_prefix = "/home/dario/workspace/fantaprica/src/com/fantaprica/server/database/database";
    //String db_file_name_prefix = "/home/dario/workspace/fantaprica/war/database/database";
    String db_file_name_prefix = "/home/dario/Workspace/Fantaprica/war/fantaprica/database/database";
    Connection con = null;

    // connect to the database. This will load the db files and start the
    // database if it is not alread running.
    // db_file_name_prefix is used to open or create files that hold the
    // state
    // of the db.
    // It can contain directory names relative to the
    // current working directory
    try {
        Class.forName("org.hsqldb.jdbcDriver");
        con = DriverManager.getConnection("jdbc:hsqldb:file:"
                + db_file_name_prefix, // filenames prefix
                "sa", // user
                ""); // pass
        Statement statement = con.createStatement();
        ResultSet rs = statement.executeQuery(p_sql_statement);
        System.out.println("query "+p_sql_statement+" eseguita");
        statement.close();
        con.close();
        return rs;
    } catch (ClassNotFoundException ex) {
        Logger.getLogger(TestConnection.class.getName()).log(Level.SEVERE,
                null, ex);
        System.out.println("errore "+ex.toString());
        return null;
    } catch (SQLException ex) {
        Logger.getLogger(TestConnection.class.getName()).log(Level.SEVERE,
                null, ex);
        ex.printStackTrace();
        System.out.println("errore "+ex.toString());
        return null;
    }

}

public static void  execstmt(String p_sql_statement) throws ParseException {

    String db_file_name_prefix = "/home/dario/Workspace/Fantaprica/war/fantaprica/database/database";
    Connection con = null;

    // connect to the database. This will load the db files and start the
    // database if it is not alread running.
    // db_file_name_prefix is used to open or create files that hold the
    // state
    // of the db.
    // It can contain directory names relative to the
    // current working directory
    try {
        Class.forName("org.hsqldb.jdbcDriver");
        con = DriverManager.getConnection("jdbc:hsqldb:file:"
                + db_file_name_prefix, // filenames prefix
                "sa", // user
                ""); // pass
        Statement statement = con.createStatement();
        statement.executeUpdate(p_sql_statement);

        System.out.println("statement "+p_sql_statement+" eseguito");

        statement.close();
        con.close();

    } catch (ClassNotFoundException ex) {
        Logger.getLogger(TestConnection.class.getName()).log(Level.SEVERE,
                null, ex);
        System.out.println("errore "+ex.toString());

    } catch (SQLException ex) {
        Logger.getLogger(TestConnection.class.getName()).log(Level.SEVERE,
                null, ex);
        ex.printStackTrace();
        System.out.println("errore "+ex.toString());
    }

}

} 
```

当我运行代码时，我得到以下结果：

```
#########################################
ODBConnectionImpl
Start creating the list
scanning resultset
v_game_day_tmp.getGameDayCompetition()=campionato
v_game_day_tmp.getGameDayCupFl()=false
v_game_day_tmp.getGameDayId()=0
v_game_day_tmp.getGameDayOrder()15
v_game_day_tmp.getGameDaySeason()2012/2013
0
index=0
v_game_day_list.get(i).getGameDayCompetition()=campionato
v_game_day_list.get(i).getGameDayCupFl()=false
v_game_day_list.get(i).getGameDayId()=0
v_game_day_list.get(i).getGameDayOrder()=15
v_game_day_list.get(i).getGameDaySeason()=2012/2013
scanning resultset
v_game_day_tmp.getGameDayCompetition()=campionato
v_game_day_tmp.getGameDayCupFl()=false
v_game_day_tmp.getGameDayId()=1
v_game_day_tmp.getGameDayOrder()14
v_game_day_tmp.getGameDaySeason()2012/2013
1
index=1
v_game_day_list.get(i).getGameDayCompetition()=campionato
v_game_day_list.get(i).getGameDayCupFl()=false
v_game_day_list.get(i).getGameDayId()=1
v_game_day_list.get(i).getGameDayOrder()=14
v_game_day_list.get(i).getGameDaySeason()=2012/2013
scanning resultset
v_game_day_tmp.getGameDayCompetition()=campionato
v_game_day_tmp.getGameDayCupFl()=false
v_game_day_tmp.getGameDayId()=2
v_game_day_tmp.getGameDayOrder()13
v_game_day_tmp.getGameDaySeason()2012/2013
2
index=2
v_game_day_list.get(i).getGameDayCompetition()=campionato
v_game_day_list.get(i).getGameDayCupFl()=false
v_game_day_list.get(i).getGameDayId()=2
v_game_day_list.get(i).getGameDayOrder()=13
v_game_day_list.get(i).getGameDaySeason()=2012/2013
scanning resultset
v_game_day_tmp.getGameDayCompetition()=mundialito
v_game_day_tmp.getGameDayCupFl()=false
v_game_day_tmp.getGameDayId()=3
v_game_day_tmp.getGameDayOrder()12
v_game_day_tmp.getGameDaySeason()2012/2013
3
index=3
v_game_day_list.get(i).getGameDayCompetition()=mundialito
v_game_day_list.get(i).getGameDayCupFl()=false
v_game_day_list.get(i).getGameDayId()=3
v_game_day_list.get(i).getGameDayOrder()=12
v_game_day_list.get(i).getGameDaySeason()=2012/2013
list created
#########################################
OnModuleLoad
index=0
result.get(i).getGameDayCompetition()=mundialito
result.get(i).getGameDayCupFl()false
result.get(i).getGameDayId()=3
result.get(i).getGameDayOrder()=12
result.get(i).getGameDaySeason()=2012/2013
index=1
result.get(i).getGameDayCompetition()=mundialito
result.get(i).getGameDayCupFl()false
result.get(i).getGameDayId()=3
result.get(i).getGameDayOrder()=12
result.get(i).getGameDaySeason()=2012/2013
index=2
result.get(i).getGameDayCompetition()=mundialito
result.get(i).getGameDayCupFl()false
result.get(i).getGameDayId()=3
result.get(i).getGameDayOrder()=12
result.get(i).getGameDaySeason()=2012/2013
index=3
result.get(i).getGameDayCompetition()=mundialito
result.get(i).getGameDayCupFl()false
result.get(i).getGameDayId()=3
result.get(i).getGameDayOrder()=12
result.get(i).getGameDaySeason()=2012/2013 
```

如您所见，该列表在 ODBConnectionImpl 中正确创建，并且由 4 个不同的行组成。但是当我扫描返回到 AsyncCallback 调用的列表时，我有四个相等的行，都等于 ResultSet 中的最后一行。

感谢您的帮助和建议，达里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:12:58.667

newnoise，SHIv16，对不起，我复制粘贴错误。这是 getGameDayList 程序的代码

```
public List<GameDay> getGameDayList() {
    // TODO Auto-generated method stub

    List<GameDay> v_game_day_list = new ArrayList<GameDay>();
    GameDay v_game_day_tmp = new GameDay();
    String v_sql_statement;

    try {

        v_sql_statement = "SELECT T1.\"game_day_id\",T1.\"game_day_date\",T1.\"game_day_competition\","
                + " T1.\"game_day_season\",T1.\"game_day_cup_fl\",T1.\"game_day_order\""
                + " FROM \"game_days\" T1 ORDER BY T1.\"game_day_order\" DESC";
        System.out.println("   -------   -------   -------");
        System.out.println("classe ODBConnectionImpl");
        System.out.println("getGameDayList");
        System.out.println("esecuzione statement " + v_sql_statement);
        ResultSet rs = Connection2DB.resultset(v_sql_statement);
        System.out.println("query eseguita");

        int i = 0;

        System.out.println("#########################################");
        System.out.println("ODBConnectionImpl");
        System.out.println("Start creating the list");

        while (rs.next()) {
            v_game_day_tmp.getGameDay(rs.getDate("game_day_date"),
                    rs.getString("game_day_competition"),
                    rs.getString("game_day_season"),
                    rs.getBoolean("game_day_cup_fl"),
                    rs.getInt("game_day_id"), rs.getInt("game_day_order"));

            System.out.println("scanning resultset");
            System.out.println("v_game_day_tmp.getGameDayCompetition()="+v_game_day_tmp.getGameDayCompetition());
            System.out.println("v_game_day_tmp.getGameDayCupFl()="+v_game_day_tmp.getGameDayCupFl());
            System.out.println("v_game_day_tmp.getGameDayId()="+v_game_day_tmp.getGameDayId());
            System.out.println("v_game_day_tmp.getGameDayOrder()"+v_game_day_tmp.getGameDayOrder());
            System.out.println("v_game_day_tmp.getGameDaySeason()"+v_game_day_tmp.getGameDaySeason());
            System.out.println(i);

            v_game_day_list.add(v_game_day_tmp);

            System.out.println("index="+i);
            System.out.println("v_game_day_list.get(i).getGameDayCompetition()="+v_game_day_list.get(i).getGameDayCompetition());
            System.out.println("v_game_day_list.get(i).getGameDayCupFl()="+v_game_day_list.get(i).getGameDayCupFl());
            System.out.println("v_game_day_list.get(i).getGameDayId()="+v_game_day_list.get(i).getGameDayId());
            System.out.println("v_game_day_list.get(i).getGameDayOrder()="+v_game_day_list.get(i).getGameDayOrder());
            System.out.println("v_game_day_list.get(i).getGameDaySeason()="+v_game_day_list.get(i).getGameDaySeason());

            i++;

        }

        for(i=0;i<v_game_day_list.size();i++)
            System.out.println("secondo loop v_game_day_list.get(i).getGameDayId()="+v_game_day_list.get(i).getGameDayId());

        System.out.println("list created");
        return v_game_day_list;

    } catch (SQLException e) {
        System.out.println("ODBConnectionImpl SQLException: "
                + e.toString());
        return null;
    } catch (ParseException e) {
        System.out.println("ODBConnectionImpl ParseException: "
                + e.toString());
        return null;
    }

} 
```

这是共享类 GameDay 的代码：

```
package com.fantaprica.shared;

import java.util.Date;
import java.io.Serializable;

@SuppressWarnings("serial")
public class GameDay implements Serializable {

private int v_game_day_id;
private Date v_game_day_date;
private String v_game_day_competition;
private String v_game_day_season;
private boolean v_game_day_cup_fl;
private int v_game_day_order;

public GameDay() {
    // TODO Auto-generated constructor stub

}

// questo metodo viene uitilizzato per l'UPDATE
public void setGameDay(int p_game_day_id,Date p_game_day_date, String p_game_day_competition,
        String p_game_day_season, boolean p_game_day_cup_fl) {

    v_game_day_id = p_game_day_id;
    v_game_day_date = p_game_day_date;
    v_game_day_competition = p_game_day_competition;
    v_game_day_season = p_game_day_season;
    v_game_day_cup_fl = p_game_day_cup_fl;

}

// questo metodo viene utilizzato per l'INSERT
public void setGameDay(Date p_game_day_date, String p_game_day_competition,
        String p_game_day_season, boolean p_game_day_cup_fl) {

    v_game_day_date = p_game_day_date;
    v_game_day_competition = p_game_day_competition;
    v_game_day_season = p_game_day_season;
    v_game_day_cup_fl = p_game_day_cup_fl;

}

public void getGameDay(Date p_game_day_date, String p_game_day_competition,
        String p_game_day_season, boolean p_game_day_cup_fl,
        int p_game_day_id, int p_game_day_order) {

    v_game_day_date = p_game_day_date;
    v_game_day_competition = p_game_day_competition;
    v_game_day_season = p_game_day_season;
    v_game_day_cup_fl = p_game_day_cup_fl;
    v_game_day_id = p_game_day_id;
    v_game_day_order = p_game_day_order;
}

public Date getGameDayDate() {
    return v_game_day_date;
}

public String getGameDayCompetition() {
    return v_game_day_competition;
}

public String getGameDaySeason() {
    return v_game_day_season;
}

public boolean getGameDayCupFl() {
    return v_game_day_cup_fl;
}

public int getGameDayId() {
    return v_game_day_id;
}

public int getGameDayOrder() {
    return v_game_day_order;
}
} 
```

我读到问题可能是 thr 类属性的“静态”实现，不是这种情况，因为 GameDay 类没有静态属性

达里奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:00:04.520

我认为问题出在 getGameDayList 中的代码上：

```
List<GameDay> v_game_day_list = new ArrayList<GameDay>();
GameDay v_game_day_tmp = new GameDay();
String v_sql_statement; 
```

从此代码块中删除 GameDay v_game_day_tmp = new GameDay()。

您正在做的是在列表中使用相同的对象 (v_game_day_tmp) 4 次。当 while 循环重新填充 v_game_day_tmp 并添加到列表中时，列表中的先前条目仍然引用相同的对象 (v_game_day_tmp)，因此必然具有相同的值。

不要使用 1 个临时对象。

该对象必须使用 new() 重新创建，填充然后添加到列表中。

简单地移动 GameDay v_game_day_tmp = new GameDay(); 成为 while(rs.next()) 的第一行应该可以解决您的问题。

问候。

# android - Android：用于在应用内播放视频的 Phonegap 插件

> ID：14428960
> 
> 赞同：0
> 
> 时间：2013-01-20T20:32:40.107
> 
> 标签：android, cordova, video

在我的 phonegap 应用程序中，我有一些从 youtube 播放的视频和 html 中的一些其他 MP4 (h263) 视频。

在 iOS 上，我发现了一个不错的插件，可以在稳定且可控的 MPMoviePlayerController 中本地播放这些视频，而不是这个有问题的 webview 对象。

现在在 Android 上，我错过了一个类似的 phonegap 插件，只能找到一个将视频 URL 发送到 youtube 应用程序的插件。即用户在播放不想要的视频时离开 phonegap 应用程序，当然。

相反， android.media.MediaPlayer 应该处理播放。

你能推荐一个phonegap插件来处理android上的视频吗？

感谢分享。

# c# - 索引器绑定

> ID：14428961
> 
> 赞同：0
> 
> 时间：2013-01-20T20:32:48.983
> 
> 标签：c#, wpf, binding

这可能是一个非常愚蠢的问题，但我就是想不通。假设我有一个由这两个类表示的数据结构：

```
class Accessor
{
}

class Row : INotifyCollectionChanged
{
    public object this[Accessor index] {get;}
} 
```

如果我也有这样的视图模型：

```
class ViewModel
{
     public Row CurrentRow{get;}
     public Accessor CurrentAccessor {get;}
} 
```

如何`CurrentRow[CurrentAccessor]`在 XAML 中定义绑定？我尝试过使用 `{Binding Path=CurrentRow[{Binding Path=CurrentAccessor}]}`，但这似乎不起作用。

**更新：**我应该指出 Row 类是一个实现`INotifyCollectionChanged`接口的集合，因此使用像这样的简单属性包装器
`public object WrappedProperty { get{return CurrentRow[CurrentAccessor];}}`将不起作用，因为如果存储在 CurrentRow[CurrentAccessor] 中的值发生更改，则不会有更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:38:29.790

在 ViewModel 中，您可以创建其他属性。

```
class ViewModel
{
     public object Obj { get { return CurrentRow[CurrentAccessor]; } }
     public Row CurrentRow{ get; }
     public Accessor CurrentAccessor { get; }
} 
```

现在绑定很简单：

```
{Binding Obj} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T21:13:48.390

您可以使用适当的转换器将您的 Binding 更改为[MultiBinding ：](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)

```
<MultiBinding Converter="{StaticResource RowAccessorConverter}">
    <Binding Path="CurrentRow"/>
    <Binding Path="CurrentAccessor"/>
</MultiBinding> 
```

转换器可能如下所示：

```
public class RowAccessorConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var row = values[0] as Row;
        var accessor = values[1] as Accessor;
        return row[accessor];
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

# jquery-ui - DIV 上的单击事件在 IE 中不起作用

> ID：14428967
> 
> 赞同：2
> 
> 时间：2013-01-20T20:33:56.153
> 
> 标签：jquery-ui, internet-explorer, html, click

这是我的代码（html）

```
<div id="navig" style="font-family: arial; font-size: 12px; font-weight: normal;">
<div id="navfirst"><a href="#"  style="text-decoration: none;">First</a></div>
<div id="navnum"><a href="#"  style="text-decoration: none;">1</a></div>
<div id="navnum"><a href="#"  style="text-decoration: none;">2</a></div>
<div id="navnum"><a href="#"  style="text-decoration: none;">3</a></div>
<div id="navnum"><a href="#"  style="text-decoration: none;">4</a></div>
<div id="navnum"><a href="#"  style="text-decoration: none;">5</a></div>
<div id="navlast"><a href="#"  style="text-decoration: none;">Last</a></div> 
```

```
 $( document ).ready(function( ) {
 $('div #navnum').click( function ( ) {
    var divtext =  $(this).text( ) ;
    $( this ).css('background-color', '#f99');
    $( this ).prevAll( ).css('background-color', '');
    $( this ).nextAll( ).css('background-color', '');
    $('#pgnum').html( '<p>clicked page number ' + divtext  + '</p>' ).fadeIn( 100 );
});

 }); 
```

在 Firefox 和 chrome 上工作正常，但在 IE 8 中不行，如何让它在 IE 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:37:59.370

您不应该`id`在 HTML 页面中的多个元素上声明相同的内容。`id`应该是唯一的`document`。相反，请尝试切换使用`navnum`for 的div`id`以将它们用作`class`. `class`名称可以在整个页面中共享。例如：

```
<div class="navnum"><a href="#"  style="text-decoration: none;">1</a></div> 
```

然后对于您的点击处理程序：

```
$('div.navnum').click( function ( ) 
```

我做了一个[jsFiddle](http://jsfiddle.net/uPMXq/1/)你可以在 IE 中测试。

# spring - 如何模拟弹簧注入的服务代理？

> ID：14428968
> 
> 赞同：2
> 
> 时间：2013-01-20T20:34:00.497
> 
> 标签：spring, spring-mvc, jmockit

我正在尝试对基于 Spring MVC 的控制器进行单元测试。此控制器调用服务。该服务实际上是远程的，并且通过 JSON-RPC 暴露给控制器，特别是 com.googlecode.jsonrpc4j.s​​pring.JsonProxyFactoryBean

控制器具有：

```
@Controller
@RequestMapping("/users")
public class UserController {

    /**
     * ID manager service that will be used.
     */
    @Autowired
    IdMService idMService;
    ...
    @ResponseBody
    @RequestMapping(value = "/{userId}", method = GET)
    public UserAccountDTO getUser(@PathVariable Long userId, HttpServletResponse response) throws Exception {
        try {
            return idMService.getUser(userId);
        } catch (JsonRpcClientException se) {
            sendJsonEncodedErrorRepsonse(response, se);
            return null;
        }
    }
    ...
} 
```

spring 配置像这样提供 IdMService：

```
<!-- Create the proxy for the Access Control service -->
<bean class="com.googlecode.jsonrpc4j.spring.JsonProxyFactoryBean">
    <property name="serviceUrl" value="${access_control.service.url}" />
    <property name="serviceInterface" value="com.phtcorp.service.accesscontrol.IdMService" />
</bean> 
```

因此，注入控制器的 IdMService 实际上是一个 JSON-RPC 代理，实现了 IdMService 接口。

我想测试控制器，但模拟 IdMService。我有这个：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:/test-context.xml" })
@SuppressWarnings("javadoc")
public class TestUserController {
    @Autowired
    private ApplicationContext applicationContext;

    private HandlerAdapter handlerAdapter;

    private MockHttpServletRequest request;
    private MockHttpServletResponse response;

    @Mocked IdMService service;

    @Test
    public void getUser() throws Exception {
        request.setMethod(RequestMethod.GET.name());
        request.setRequestURI("/users/1");
        HandlerMethod handler = (HandlerMethod) getHandler(request);
        handlerAdapter.handle(request, response, handler);
        new Verifications() {{
            service.getUser(1L); times=1;
        }};
    }
...
} 
```

但是，我发现注入控制器的 IdMService 不是模拟的，它毕竟是 JsonRpcProxy。我已经以这种方式成功地测试了一个不同的控制器，但是那个控制器并没有使用代理到它的服务。

所以问题是：如何使用 jmockit 将模拟 IdMService 注入到 UserController 中？请注意，我没有在任何地方自己实例化 UserController；spring/spring-mvc 就是这样做的。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:24:46.997

> Note that I'm not instantiating the UserController myself, anywhere; spring/spring-mvc does that.

This means that you're not writing a unit test. This is testing the spring wiring which makes it an integration test. When writing a unit test you instantiate the class under test and supply the dependencies yourself. This allows you to isolate the logic in the class being tested by providing mocked instances of the classes dependencies. That's where jmockit comes in.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:43:46.893

如果您正在对 UserController 进行单元测试，为什么不自己实例化它。将 Spring 排除在外，然后自行测试。

您在这里测试的不是 UserController，而是测试它的 Spring 接线和它的请求映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T20:07:29.750

我通过自己注入模拟解决了我的问题：

```
@Mocked IdMService service;

@Before
public void setUp() {
 controller.setIdMService(service);
   ...
} 
```

# android - 意图 setDataAndType 作为位图

> ID：14428969
> 
> 赞同：1
> 
> 时间：2013-01-20T20:34:07.670
> 
> 标签：android

我正在尝试使用一种方法来裁剪图像。正是这种方法：

```
private void performCrop() {
    try {
        //call the standard crop action intent (the user device may not support it)
        Intent cropIntent = new Intent("com.android.camera.action.CROP");
        //indicate image type and Uri
        cropIntent.setDataAndType(**HERE**, "image/*");
        //set crop properties
        cropIntent.putExtra("crop", "true");
        //indicate aspect of desired crop
        cropIntent.putExtra("aspectX", 1);
        cropIntent.putExtra("aspectY", 1);
        //indicate output X and Y
        cropIntent.putExtra("outputX", 256);
        cropIntent.putExtra("outputY", 256);
        //retrieve data on return
        cropIntent.putExtra("return-data", true);
        //start the activity - we handle returning in onActivityResult
        startActivityForResult(cropIntent, 1234);
    }
    catch(ActivityNotFoundException anfe){
        Log.d("debugging","EXCEPTION");/*
        //display an error message
        String errorMessage = "Whoops - your device doesn't support the crop action!";
        Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
        toast.show();*/
    }
} 
```

这一行要求提供 Uri 数据和字符串类型。

```
 cropIntent.setDataAndType(**HERE**, "image/*"); 
```

但我只想把这个位图

```
Bitmap fotoCreada; 
```

作为数据，但我不知道该怎么做。

有什么办法可以做到这一点？

谢谢。

# **编辑**

好的，这是我现在的代码：

有一个按钮。当你点击它时：

```
public void onClick(View v) {
            Boolean isSDPresent = android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);
            if(isSDPresent) {
                //Creem carpeta
                File folder = new File(Environment.getExternalStorageDirectory().toString()+"/pic/");
                folder.mkdirs();
                //Recuperem data actual
                SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
                String currentDateandTime = sdf.format(new Date());
                //Cridem a la camara.
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                resultingFile=new File(folder.toString() + "/"+currentDateandTime+".jpg");
                Uri uriSavedImage=Uri.fromFile(resultingFile);
                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);
                //Començem activity
                startActivityForResult(cameraIntent, 1888); 
            } else {
                Toast toast = Toast.makeText(getActivity(), "Issues while accessing sdcard.", Toast.LENGTH_SHORT);
                toast.show();
            }
        } 
```

如您所见，它正在调用 startActivityForResult。基本上拍了一张照片，我在activityResult上检索它：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.d("debugging",""+resultCode);
    if( requestCode == 1888 && resultCode == -1) { //-1 = TOT HA ANAT BE.
        Bitmap photo = BitmapFactory.decodeFile(resultingFile.getPath());
        Matrix matrix = new Matrix();
        matrix.postRotate(90);
        Bitmap photoRotated = Bitmap.createBitmap(photo, 0, 0, photo.getWidth(), photo.getHeight(), matrix, true);
        this.fotoCreada=photoRotated;
        ((ImageView) myFragmentView.findViewById(R.id.fotoCapturada)).setImageBitmap(this.fotoCreada);
        try {
            FileOutputStream out = new FileOutputStream(this.resultingFile.getPath());
            this.fotoCreada.compress(Bitmap.CompressFormat.PNG, 90, out);
        } catch (Exception e) {
            e.printStackTrace();
        }
        performCrop();
    }
    if (requestCode == 1234 && resultCode == -1){
        Bitmap bitmap = (Bitmap) data.getParcelableExtra("BitmapImage");
        Log.d("debugging",""+bitmap.getHeight());
    }
} 
```

从前面的代码可以看出，当我检索位图时，我调用方法 performCrop。**现在**的代码是：

```
private void performCrop() {
    try {
        //call the standard crop action intent (the user device may not support it)
        Intent cropIntent = new Intent("com.android.camera.action.CROP");
        //indicate image type and Uri
        //cropIntent.setDataAndType(this.picUri, "image/*");
        cropIntent.putExtra("BitmapImage", this.fotoCreada);
        //set crop properties
        cropIntent.putExtra("crop", "true");
        //indicate aspect of desired crop
        cropIntent.putExtra("aspectX", 1);
        cropIntent.putExtra("aspectY", 1);
        //indicate output X and Y
        cropIntent.putExtra("outputX", 256);
        cropIntent.putExtra("outputY", 256);
        //retrieve data on return
        cropIntent.putExtra("return-data", true);
        //start the activity - we handle returning in onActivityResult
        startActivityForResult(cropIntent, 1234);
        Log.d("debugging","he acabat performCrop");
    }
    catch(ActivityNotFoundException anfe){
        Log.d("debugging","EXCEPTION");
        //display an error message
        String errorMessage = "Whoops - your device doesn't support the crop action!";
        Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
        toast.show();
    }
} 
```

但是 performCrop 中的 startActivityForResult 永远不会调用 onActivityResult。日志猫说它只输入了一次，应该输入两次。第一个来自相机活动，第二个来自作物活动。

```
-1
he acabat performCrop 
```

希望它足够清楚。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:37:49.820

`Bitmap`implements `Parcelable`，所以你总是可以在意图中传递它：

```
Intent intent = new Intent(this, NewActivity.class);
intent.putExtra("BitmapImage", bitmap); 
```

并在另一端检索它：

```
Bitmap bitmap = (Bitmap) intent.getParcelableExtra("BitmapImage"); 
```

但是，如果位图作为文件或资源存在，最好传递位图的 URI 或 ResourceID，而不是位图本身。传递整个位图需要大量内存。传递 URL 需要很少的内存，并允许每个活动根据需要加载和缩放位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:37:14.780

使用 Intent.putExtra。位图是可解析的，所以它会起作用。setDataAndType 用于 URI，但您没有引用 Web 或磁盘上的资源。

# perl - 从 perl 中的另一个模块直接写入子例程中的引用变量

> ID：14428971
> 
> 赞同：0
> 
> 时间：2013-01-20T20:34:41.977
> 
> 标签：perl, perl-module

我试图将哈希的引用传递到另一个模块中定义的子例程中以提高性能。在此其他模块的子例程中，引用被取消引用为：

```
sub subRoutine{
    my $hash_ref = $_[0];
    my %hash = %$hash_ref;

    $hash{$a_key} = $a_value;
} 
```

因此，这会更改此模块中该键的值，但不会更改调用此子例程的 perl 程序中的值。是什么原因，我该如何避免这种情况？使用引用而不是传递散列/返回散列以提高性能是否正确？

提前致谢！最良好的祝愿！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T20:47:10.333

不要取消引用到本地副本，只需使用引用：

```
$hash_ref->{$a_key} = $a_value; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T20:49:27.427

如果您想像这里一样操作原始变量，则传递引用很好。问题是您正在立即创建引用哈希的副本，并对副本进行操作。

该行`my %hash = %$hash_ref;`正在创建一个新的哈希并从原始哈希中复制所有键/值对。当您更改此副本时，它对原件没有影响。

只需摆脱该行，并将该行替换`$hash{$a_key} = $a_value;`为`$hash_ref->{$a_key} = $a_value;`. 您现在指的是原始哈希的一个元素，并对其进行更改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-20T20:48:14.657

当您说 时`%hash = %$hash_ref`，您将其取消引用到本地副本（子例程范围）。如果要更改传递给子例程的哈希值，请使用

`$hash_ref->{$a_key} = $a_value`.

# python - 聚合空间搜索结果 MongoDB

> ID：14428977
> 
> 赞同：0
> 
> 时间：2013-01-20T20:35:00.230
> 
> 标签：python, mongodb, pymongo

我有一个包含点位置的集合，每个文档都有一个值。

我运行空间查询并获得结果没有问题，但有时我会返回大量结果，5+百万。我从这个结果中需要的不是单个文档，而是所有返回文档的值的总和。显然，对于 5+mil 的结果，这太多了，无法迭代，看来聚合函数是我可以使用的。

我使用 PyMongo Python API 完成大部分工作。

有人可以向我演示如何使用聚合函数对空间查询的值求和吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:38:30.020

最新版本的 MongoDB 有非常好的聚合框架，[文档中描述](http://docs.mongodb.org/manual/applications/aggregation/)了一些非常好的示例。

如果 oyu 需要更精确的帮助 - 很高兴看到您正在运行的示例记录和查询。

# php - jQuery - 将变量传递给 php

> ID：14428980
> 
> 赞同：0
> 
> 时间：2013-01-20T20:35:10.607
> 
> 标签：php, jquery, ajax, variables

我对此很陌生，今天我已经搜索了一整天以使其正常工作，但我还没有设法找到使用变量的方法，只有硬编码的值有效。这是我的带有硬编码值的代码：

```
<script type="text/javascript">
  FB.Event.subscribe('edge.create',
    function(response) {
      $.post("http://www.my-domain.com/fbtest.php", { category: "845" } );
      }
  );
</script> 
```

我想要的是将 845 值更改为一个名为 $vpostid 的变量。当我将其更改为它不起作用时，所以我假设我需要在数字周围加上双引号，但我看不到得到正确的组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:38:05.620

我**假设您的意思是“***从*php传递变量”：

如果启用了短手开口：

```
<script type="text/javascript">
  FB.Event.subscribe('edge.create',
    function(response) {
      $.post("http://www.my-domain.com/fbtest.php", { category: "<?=$vpostid?>" } );
      }
  );
</script> 
```

别的：

```
<script type="text/javascript">
  FB.Event.subscribe('edge.create',
    function(response) {
      $.post("http://www.my-domain.com/fbtest.php", { category: "<?php echo $vpostid; ?>" } );
      }
  );
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:38:40.897

试试这个代码：

```
<script type="text/javascript">
  FB.Event.subscribe('edge.create',
    function(response) {
      $.post("http://www.my-domain.com/fbtest.php", { category: "<?php echo($vpostid); ?>" } );
      }
  );
</script> 
```

# eclipse-plugin - 在 Eclipse Windows 中安装 apache.axiom

> ID：14428981
> 
> 赞同：0
> 
> 时间：2013-01-20T20:35:12.697
> 
> 标签：eclipse-plugin, axiom

我对将 apache.axiom 用于 Web 服务目的有特殊要求。我不知道如何在其中安装插件。我在 Eclipse 市场中搜索过，但找不到这个包。因此，我从 Apache 网站下载并卡在那里，因为我不知道如何继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:41:34.593

Axiom 只是一个库。Axiom 没有 Eclipse 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:22:46.223

我已经明白了。感谢@Andreas Veithen 的提示。这是一个图书馆。它是一个jar文件。我需要转到项目的“属性”>“Java 构建路径”>“库”>“添加外部 JAR”> 查找 axiom-api jar 文件。

然后是链接的。:))

# javascript - JavaScript 括号 (1,2,3,4,5)

> ID：14428982
> 
> 赞同：3
> 
> 时间：2013-01-20T20:35:19.200
> 
> 标签：javascript, namespaces, closures, parentheses

我刚刚在 JavaScript 中遇到了一些符号，如下所示：

```
var a = (1,2,3,4,5); 
```

在上述情况下，这将始终返回最后一个值`5`。我知道使用方括号来命名我的 JavaScript 代码，但从未见过它以这种方式使用。

这种表示法有什么用处，还是只是一些 JavaScript 副产品？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T20:41:31.057

它是逗号运算符。正如 mdn 状态（[链接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)）它总是返回后面的值。在您的示例中，它没有多大意义，因为它总是分配`a = 5`. 但是考虑一下：

```
for (var i = 0, j = 9; i <= 9; i++, j--) {
    ...
} 
```

它用于在单个语句中递增和递减：`i++, j--`

### 编辑：

您示例中的括号是必要的，因为它是一个变量声明。在其他情况下，它们可以被排除在外。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T20:43:08.170

Parens 用于将操作分组在一起。这对于设置操作优先级（例如 x = (2+3) * 5 vs x = 2 + 3 * 5）和使您的代码更易于阅读都有帮助。

我怀疑这更多是关于逗号运算符的问题。这是为了在同一行上进行多个分配或操作。这是一篇关于它的好文章：http: [//javascriptweblog.wordpress.com/2011/04/04/the-javascript-comma-operator/](http://javascriptweblog.wordpress.com/2011/04/04/the-javascript-comma-operator/)

# android - 无法覆盖片段中的 onContextItemSelected

> ID：14428992
> 
> 赞同：1
> 
> 时间：2013-01-20T20:36:09.943
> 
> 标签：android, actionbarsherlock, fragment

我正在尝试将 Activity 转换为片段并且无法覆盖此方法：`onCreateOptionsMenu`、、、`onOptionsItemSelected`。`onContextItemSelected`，也许缺少一些导入语句？不知道该怎么办。她是我的类文件：包com.wts.ui；

```
import java.util.Date;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemLongClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;

import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

public class MainFragment extends Fragment {

    protected final static int REQUEST_CODE = 1;

    public static WordsDBAdapter dbAdapter;
    private CustomAdapter cDataAdapter;
    private Button button;
    private EditText editWord;
    private EditText editTranslate;
    private ListView listView;
    private String selectedWord;
    private Cursor cursor;

    // context menu
    private final static int IDM_EDIT = 101;
    private final static int IDM_DELETE = 102;
    private final static int IDM_INFO = 103;

    // options menu
    private static final int IDM_ABOUT = 201;
    private static final int IDM_EXIT = 202;
    private static final int IDM_SETTINGS = 203;
    private static final int IDM_QUESTION = 204;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {

        super.onActivityCreated(savedInstanceState);

        dbAdapter = new WordsDBAdapter(getActivity());
        dbAdapter.open();

        displayListView();
        registerForContextMenu(listView);

        // ================ListView onLongClick========================
        listView.setOnItemLongClickListener(new OnItemLongClickListener() {
            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                cursor = (Cursor) listView.getItemAtPosition(arg2);
                selectedWord = cursor.getString(WordsDBAdapter.ID_COL);
                return false;
            }
        });

        // ================Button onClick========================
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                String word = editWord.getText().toString();
                String translate = editTranslate.getText().toString();

                if (word.length() > 0 && translate.length() >= 0) {
                    Cursor cursor = dbAdapter.fetchWordsByName(word);// chek is
                                                                        // word
                                                                        // repeat

                    if (cursor.moveToFirst()) {
                        Toast.makeText(getActivity().getApplicationContext(),
                                getResources().getString(R.string.word_exist),
                                Toast.LENGTH_SHORT).show();
                    } else if (!CheckWordInput(word)
                            || !CheckTranslateInput(translate)) {
                        Toast.makeText(
                                getActivity().getApplicationContext(),
                                getResources().getString(
                                        R.string.incorrect_input),
                                Toast.LENGTH_SHORT).show();
                    } else {
                        dbAdapter.insertWord(word, translate, " ",
                                String.valueOf(false), 0, 0, new Date());
                        displayListView();

                        editWord.setText("");
                        editTranslate.setText("");
                    }
                }
            }
        });
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.activity_main, container, false);

        button = (Button) view.findViewById(R.id.buttonAddWord);
        listView = (ListView) view.findViewById(R.id.listWords);
        editWord = (EditText) view.findViewById(R.id.editWord);
        editTranslate = (EditText) view.findViewById(R.id.editTranslate);

        return view;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setHasOptionsMenu(true);
        // setContentView(R.layout.activity_main);

    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        if (v.getId() == R.id.listWords) {
            String[] menuItems = getResources().getStringArray(
                    R.array.contextMenuItems);

            menu.add(Menu.NONE, IDM_EDIT, Menu.NONE,
                    menuItems[StartActivity.CONTEXT_MENU_EDIT]);
            menu.add(Menu.NONE, IDM_INFO, Menu.NONE,
                    menuItems[StartActivity.CONTEXT_MENU_INFO]);
            menu.add(Menu.NONE, IDM_DELETE, Menu.NONE,
                    menuItems[StartActivity.CONTEXT_MENU_DELETE]);

        }
    }

    //
    @Override
    public boolean onContextItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case IDM_EDIT: {
            Intent intent = new Intent(getActivity(), EditActivity.class);
            intent.putExtra(getResources().getString(R.string.fstRow),
                    cursor.getString(WordsDBAdapter.WORD_COL));
            intent.putExtra(getResources().getString(R.string.scndRow),
                    cursor.getString(WordsDBAdapter.TRANS_COL));
            intent.putExtra(getResources().getString(R.string.thrdRow),
                    cursor.getString(WordsDBAdapter.DESC_COL));

            startActivityForResult(intent, REQUEST_CODE);
        }
            break;
        case IDM_DELETE:
            dbAdapter.deleteWord(selectedWord);
            displayListView();
            break;
        case IDM_INFO: {
            Intent intent = new Intent(getActivity(), InformationActivity.class);
            for (int i = 1; i <= InformationActivity.nListItems; i++)
                intent.putExtra(String.valueOf(i), cursor.getString(i));

            startActivity(intent);
        }
            break;
        default:
            return super.onContextItemSelected(item);

        }
        return true;
    }

    private void displayListView() {
        // Cursor cursor = dbAdapter.fetchAllTranslated();
        Cursor cursor = dbAdapter.fetchAllTranslated();

        String[] columns = new String[] { WordsDBAdapter.KEY_WORD,
                WordsDBAdapter.KEY_TRANSLATION, WordsDBAdapter.KEY_SUCCEEDED, };

        int[] to = new int[] { R.id.textViewTranslate, R.id.textViewWord,
                R.id.textViewSuccessPoints };

        cDataAdapter = new CustomAdapter(getActivity(), R.layout.word_info,
                cursor, columns, to);

        listView.setAdapter(cDataAdapter);
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        inflater.inflate(R.menu.activity_main, menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case IDM_ABOUT: {
            Intent intent = new Intent(getActivity(), AboutActivity.class);
            startActivity(intent);
            break;
        }
        case IDM_EXIT: {
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
            getActivity().finish();
            break;
        }
        case IDM_SETTINGS: {
            Intent intent = new Intent(getActivity(), SettingsActivity.class);
            startActivity(intent);
            break;
        }
        case IDM_QUESTION: {
            if (!StartActivity.isMainActivitySart)
                getActivity().onBackPressed();
            else {
                Intent intent = new Intent(getActivity(),
                        QuestionActivity.class);
                startActivity(intent);
            }
        }
            break;
        }
        return true;
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (resultCode == Activity.RESULT_OK && requestCode == REQUEST_CODE) {
            if (intent.hasExtra(getResources().getString(R.string.fstRow))) {
                dbAdapter.changeValue(
                        selectedWord,
                        intent.getExtras().getString(
                                getResources().getString(R.string.fstRow)),
                        intent.getExtras().getString(
                                getResources().getString(R.string.scndRow)),
                        intent.getExtras().getString(
                                getResources().getString(R.string.thrdRow)),
                        null, null, null, null);
                displayListView();
            }
        }
    }

    @Override
    public void onResume() {
        super.onResume();
        SettingsManager.setPreferedLanguage(getActivity());// set language
        displayListView();
    }

    public static boolean CheckTranslateInput(String str) {
        Pattern inputPattern = Pattern.compile("[\\p{L} -]{0,25}");
        Matcher inputMatcher = inputPattern.matcher(str);
        return inputMatcher.matches();
    }

    public static boolean CheckWordInput(String str) {
        Pattern inputPattern = Pattern.compile("[\\p{L} -]{1,25}");
        Matcher inputMatcher = inputPattern.matcher(str);
        return inputMatcher.matches();
    }

    @Override
    public void onDetach() {
        super.onDetach();
        dbAdapter.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:43:20.717

你必须考虑你想要你的 Fragment 是什么——`Fragment`或者`SherlockFragment`？

你导入这个：

```
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem; 
```

因此，您的覆盖**不是**覆盖，因为`Menu`& 朋友现在是不同的类而不是`Fragment`需要的类 - 它们是 ActionBarSherlock 的类。

如果您`SherlockFragment`改为扩展，您的覆盖应该可以工作，并且`SherlockFragment`如果您使用 ActionBarSherlock（基于您的标签，您是），建议您进行扩展。

如果要将其保留为常规片段，请导入：

```
android.view.Menu
android.view.MenuItem
android.view.MenuInflater 
```

# c# - 如何在c#中从excel中逐行获取数据

> ID：14428993
> 
> 赞同：0
> 
> 时间：2013-01-20T20:36:10.433
> 
> 标签：c#, excel

我是 c# 新手，我在 c# 上有一个简单的项目，我想在 c# 中从 excel 中获取一些数据，我想将其保存在数据库中，我不知道，我发现以下代码及其运行良好但没有给我数据，这里是代码：

```
 var fileName = @"C:\Users\AhsanWindows8\Desktop\Book1.xlsx";
        var connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName + ";Extended Properties=\"Excel 12.0;IMEX=1;HDR=NO;TypeGuessRows=0;ImportMixedTypes=Text\""; ;
        using (var conn = new OleDbConnection(connectionString))
        {
            conn.Open();

            var sheets = conn.GetOleDbSchemaTable(System.Data.OleDb.OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });
            using (var cmd = conn.CreateCommand())
            {
                cmd.CommandText = "SELECT * FROM [" + sheets.Rows[0]["TABLE_NAME"].ToString() + "] ";

                var adapter = new OleDbDataAdapter(cmd);
                var ds = new DataSet();
                adapter.Fill(ds);
            }
        } 
```

现在这就是我的 excel 文件的样子

![在此处输入图像描述](../Images/cc8da2d985f90569879993b5bcedd75e.png)

我可以在像键值对这样的字典中获取这些数据吗，假设左侧的英文单词是键，右侧的文本是值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:52:00.100

试试这个：

```
cmd.CommandText =
        "SELECT * FROM [" + sheets.Rows[0]["TABLE_NAME"].ToString() + "$] "; 
```

当数据集被填充时，您可以使用此代码构建字典。

```
var dict = new Dictionary<string, string>();
foreach(DataRow row in ds.Tables[0].Rows)
{
  dict.Add(row[0].ToString(), row[1].ToString());
} 
```

如果你熟悉 LINQ，你可以尝试使用这个：

```
ds.Tables[0].Rows.ToDictionary(r => r[0].Tostring(), r => r[1].Tostring()); 
```