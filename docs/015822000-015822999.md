# StackOverflow 问答 15822000-15822999

# python - 如何在 Python 中替换字符串中的单词？

> ID：15822002
> 
> 赞同：0
> 
> 时间：2013-04-04T21:24:19.723
> 
> 标签：python, translation

我目前正在尝试编写一个可以反映陈述的基本“人工智能”。例如，如果用户输入“我的猫是棕色的”。AI 会返回“你的猫是棕色的？”

我写了一个变量数据表，打算用于翻译：

```
reflections = \
[["I",          "you"],
 ["i",          "you"],
 ["We",         "you"],
 ["we",         "you"],
 ["We're",      "you're"],
 ["we're",      "you're"],
 ["I'm",        "you're"],
 ["i'm",        "you're"],
 ["im",         "you're"],
 ["this",       "that"],
 ["This",       "that"],
 ["am",         "are"],
 ["Am",         "are"],
 ["My",         "your"],
 ["my",         "your"],
 ["you",        "I"], # Grammar: Sometimes "me" is better
 ["You",        "I"],
 ["u",          "me"],
 ["I'd",        "you'd"],
 ["I'll",       "you'll"],
 ["We'd",       "you'd"],
 ["we'd",       "you'd"],
 ["We'll",      "you'll"],
 ["we'll",      "you'll"],
 ["You're",     "I'm"],
 ["you're",     "I'm"],
 ["ur",         "I'm"],
 ["c",          "see"],
 ["I've",       "you've"],
 ["We've",      "you've"],
 ["we've",      "you've"],
 ["Our",        "your"],
 ["our",        "your"],
 ["was",        "were"],
 ["Was",        "were"],
 ["were",       "was"],
 ["Were",       "was"],
 ["me",         "you"],
 ["your",       "my"],
 ["Your",       "my"]] 
```

但是，我在实现数据时遇到了一些麻烦。

我目前对字符串反射的定义是：

```
from string import maketrans

intab = ".!"
outtab = "??"
translate_message = maketrans(intab, outtab) #used to replace punctuation

def reflect_statement(message):
    if ' ' not in message:
        if len(message) == 0:
            return elicitations[0]
        if len(message) == 1:
            return elicitations[1]
        if len(message) == 2:
            return elicitations[2]
        if len(message) == 3:
            return elicitations[3]
        if len(message) == 4:
            return elicitations[4]
        if len(message) == 5:
            return elicitations[5]
        if len(message) == 6:
            return elicitations[6]
        if len(message) == 7:
            return elicitations[7]
        if len(message) == 8:
            return elicitations[8]
        if len(message) == 9:
            return elicitations[9]
        if len(message) == 10:
            return elicitations[10]
        if len(message) > 10:
            return elicitations[11]
    if ' ' in message:
        message = message.translate(translate_message)
        return message 
```

忽略引出参考，这是我已完成的程序的一个单独部分。

我非常感谢有人可以为我提供的任何帮助。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:27:37.427

你真正想做的是定义一个语法，这样你就可以挑选出代词，然后只替换代词....

基本上对于这样的事情，无论如何你都需要创建一个语法......否则你的人工智能将永远不会有任何意义

看看[Neds List Of PyParsers](http://nedbatchelder.com/text/python-parsers.html) ...我倾向于喜欢 ply

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:29:19.873

```
if ' ' not in message:
    if len(message) < 11:
        return elicitations[len(message)]
    else:
        return elicitations[11]
else:
    for pair in reflections:
        message = message.replace(*pair) 
```

笔记：

1.  这将替换部分单词。要进行适当的替换，您需要仔细制作正则表达式。也许类似的东西`r'\b{}\b'.format(oldword)`会起作用，但我不确定：

    ```
    import re
    for old, new in reflections:
        message = re.sub(r'\b{}\b'.format(old), new, message) 
    ```

2.  嵌套列表不是最合乎逻辑的数据结构，请考虑使用字典。

# sql - 需要帮助创建 linq 选择

> ID：15822015
> 
> 赞同：4
> 
> 时间：2013-04-04T21:25:15.320
> 
> 标签：sql, linq, tsql, linq-to-sql, stored-procedures

我需要一些帮助来创建一个 LINQ 选择，我有一个包含一些列的表，但只有 2 个对这个问题感兴趣。

```
userid, type 
```

现在这个表有数千个条目，我只想要顶部，比如说 50。到目前为止一切都很好，但困难的部分是有很多成功的行应该只计为 1。示例

```
Type  UserId
============
Add   1
Add   1
Add   1
Add   2 
```

我希望这在我取出的行数限制中仅计为 2，但我希望所有行仍然输出。这是否可以通过单个 SQL 请求实现，还是我应该找到另一种方法来做到这一点？

编辑：如果这可以解决问题，我可以将列添加到表中。Edit2：Sotred 程序也是一种解决方案

示例 2：这应该算作 3 行

```
Type  UserId
============
Add   1
Add   1
Add   2
Add   1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:29:12.750

我现在离电脑不近，所以我不确定语法是否 100% 正确，但我相信你正在寻找这样的东西：

```
data.Select(x => new {x.Type, x.UserId})
    .GroupBy(x => x.UserId)
    .Take(50); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:58:14.233

你*可以*用 Linq 来做，但它可能比传统的`for`循环慢很多。一种方法是：

```
data.Where((s, i) => i == 0 || 
                     !(s.Type == data[i-1].Type && s.UserId == data[i-1].UserId)) 
```

这将跳过与“上一个”项目具有相同类型和用户 ID 的任何“重复”项目。

但是，这仅在`data`具有索引器（数组或实现的东西`IList`）时才有效。一个`IEnumerable`或`IQueryable`不会工作。此外，几乎可以肯定它不能转换为 SQL，因此您必须提取所有结果并在内存中进行过滤。

如果您想在 SQL 中执行此操作，我会尝试扫描游标并在其中一个值发生更改时填充临时表，或者使用包含`ROW_NUMBER`列的公用表表达式，然后执行类似于 Linq 的回顾子查询上面的方法：

```
WITH base AS
(
SELECT 
    Type,
    UserId, 
    ROW_NUMBER() OVER (ORDER BY ??? ) AS RowNum
    FROM Table
)
SELECT b1.Type, b1.UserId
FROM base b1
LEFT JOIN base b2 ON b1.RowNum = b2.RowNum - 1
WHERE (b1.Type <> b2.Type OR b1.UserId <> b2.UserId)
ORDER BY b1.RowNum 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T22:27:01.387

您可以使用 LINQ 执行此操作，但我认为走“for(each) 循环”路线可能更容易......

```
data.Select((x, i) => new { x.Type, x.UserId, i })
    .GroupBy(x => x.Type)
    .Select(g => new
    {
        Type = g.Key,
        Items = g
            .Select((x, j) => new { x.UserId, i = x.i - j })
    })
    .SelectMany(g => g.Select(x => new { g.Type, x.UserId, x.i }))
    .GroupBy(x => new { x.Type, x.i })
    .Take(50);
    .SelectMany(g => g.Select(x => new { x.Type, x.UserId })); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T22:53:08.463

你卡在LINQ上吗？

添加 PK 身份。
按PK订购。
使用 DataReader 并计算更改。
然后在更改计数达到最大值时停止。

如果您不在 .NET 环境中，那么使用游标也是如此。

由于 LINQ 被延迟，您可能只需在 LINQ 中订购，然后在 ForEach 上直接退出即可。

# mysql - mysql查询左连接或group_concat或？

> ID：15822021
> 
> 赞同：0
> 
> 时间：2013-04-04T21:25:43.540
> 
> 标签：mysql

这个 SQL 查询让我不知道该怎么做。

我有以下 2 个 mysql 表：

```
 [items]
      id
      title

    [ledger]
      id
      itemid
      qty
      stockcode 
```

我正在从 id = 123 的 [items] 表中执行选择。我还想在结果集中返回一个与 items.id = ledger.itemid 匹配的“附加”列，并且是 [ledger 的逗号分隔列表] 具有 SUM(qty) > 0 的股票代码。总和反映了一个项目可能有显示数量为 +5 和 -2 图像的分类帐条目 = 总共 3 个图像。这 3 个图像将在附加列中反映为“图像、图像、图像”。

```
 select
        id
        ,title
        ,???? as extras
    from
        items
    where
        items.id = 123 
```

“附加”列的示例结果可能是：

```
 bold,highlight,border,image,image,image 
```

这反映了总和（数量）> 0 的分类帐表的结果

```
 bold (1)
    highlight (1)
    border (1)
    image (3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:38:31.813

try something like

```
SELECT id, title, extras
FROM items
JOIN (
    SELECT itemsid, GROUP_CONCAT(stockcode SEPERATOR ',') extras
    FROM ledger
    GROUP BY itemsid
    HAVING SUM(qty) > 0
) t ON t.itemsid = items.id
WHERE id=123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:33:37.400

您可能想要执行 a`LEFT JOIN`和 a`GROUP_CONCAT`并`HAVING`获取您正在寻找的信息：

```
SELECT i.id, i.title, GROUP_CONCAT( l.stockcode SEPARATOR ',' ) extras
FROM items i
LEFT JOIN ledger l ON i.id = l.itemid
WHERE i.id = 123 
HAVING SUM(l.qty) > 0 
```

看到这个[SQL Fiddle](http://sqlfiddle.com/#!2/4db68/4)

# c++ - 无法在初始化中转换匿名枚举

> ID：15822023
> 
> 赞同：1
> 
> 时间：2013-04-04T21:25:53.587
> 
> 标签：c++, templates, enums, traits

为什么编译器会在这里抱怨？

```
 enum jit_ptx_type {f32=0,f64=1,u16=2,u32=3,u64=4,s16=5,s32=6,s64=7,u8=8,b16=9,b32=10,b64=11,pred=12 };

  //
  // MATCHING C TYPES TO PTX TYPES
  //
  template<class T> struct jit_type {};
  template<> struct jit_type<float>            { enum { value = jit_ptx_type::f32 }; };
  template<> struct jit_type<double>           { enum { value = jit_ptx_type::f64 }; };
  template<> struct jit_type<int>              { enum { value = jit_ptx_type::s32 }; };
  template<> struct jit_type<bool>             { enum { value = jit_ptx_type::pred }; }; 
```

稍后在代码中：

```
 some_func( float val ) {
    jit_ptx_type type = jit_type<float>::value;   // compiler complains here
  } 
```

编译器消息：

```
error: cannot convert ‘jit_type<float>::<anonymous enum>’ to ‘jit_ptx_type’ in assignment 
```

真奇怪！如果我将这些行放入一个单独的小示例文件中，它就可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:55:30.037

我会把外部枚举变成一个作用域枚举：

```
enum class jit_ptx_type {
    f32=0, //note the =x is unnecessary here
    f64=1,
    u16=2,
    u32=3,
    u64=4,
    s16=5,
    s32=6,
    s64=7,
    u8=8,
    b16=9,
    b32=10,
    b64=11,
    pred=12 
}; 
```

现在您不会用所有这些标识符污染周围的范围，并且您需要范围限定符来访问这些值，而无范围的枚举不允许这样做。接下来，在您的类中，只需使用一个静态常量成员：

```
template<> struct jit_type<float> { 
    static constexpr value = jit_ptx_type::f32; 
}; 
```

# ruby - Test First 的温度对象项目 - 它通过了所有测试，但这是我应该学习的吗？

> ID：15822025
> 
> 赞同：2
> 
> 时间：2013-04-04T21:25:58.363
> 
> 标签：ruby, rspec, test-first

我正在经历 Test First 的 Ruby 项目，并且我已经完成了大部分项目，但是 08_temperature_object 让我很困惑，尤其是因为即使我已经让它工作通过了测试，但我不确定我是否按照他们想要的方式做.

这是我想出的：

```
class Temperature
    def initialize(options = {})
        @options = options
        #@options = Hash.new { |h, key| h[key] = [] }
    end
    #end

    def in_fahrenheit
        @options.key?(:f) ? @options[:f] : (@options[:c] * 9.0 / 5) + 32
    end

    def in_celsius
        @options.key?(:c) ? @options[:c] : (@options[:f] - 32) * 5.0 / 9
    end

    def self.from_fahrenheit(num)
        self.new(:f => num)
    end

    def self.from_celsius(num)
        self.new(:c => num)
    end
end

class Celsius < Temperature

    def initialize(num, options = {})
        @options = options
        @options[:c] = num
    end

    def in_fahrenheit
        super
    end

    def in_celsius
        super
    end
end

class Fahrenheit < Temperature

    def initialize(num, options = {})
        @options = options
        @options[:f] = num
    end

    def in_fahrenheit
        super
    end

    def in_celsius
        super
    end
end 
```

根据说明：

请记住将`from_celsius`工厂方法定义为*类*方法，而不是*实例*方法。

？？？我是作为一个类方法来做的吗？有没有比创建新对象更好的方法？

温度对象的构造函数应接受包含条目或条目的*选项散列*。`:celcius``:fahrenheit`

？？？我知道我使用了散列，但我使用了“选项散列”吗？

工厂方法是一种设计模式......在 Ruby 中实现这种模式的一种方法是通过类方法

？？？这是写成工厂方法吗？

以下是 Rspec 测试的一些示例供参考：

```
describe Temperature do

  describe "can be constructed with an options hash" do
    describe "in degrees fahrenheit" do
      it "at 50 degrees" do
        Temperature.new(:f => 50).in_fahrenheit.should == 50
      end

 describe "can be constructed via factory methods" do

    it "in degrees celsius" do
      Temperature.from_celsius(50).in_celsius.should == 50
      Temperature.from_celsius(50).in_fahrenheit.should == 122
    end

  # test-driving bonus:
  #
  # 1\. make two class methods -- ftoc and ctof
  # 2\. refactor to call those methods from the rest of the object
  #
  # run *all* the tests during your refactoring, to make sure you did it right
  #
  describe "utility class methods" do

  end

  # Here's another way to solve the problem!
  describe "Temperature subclasses" do
    describe "Celsius subclass" do
      it "is constructed in degrees celsius" do
        Celsius.new(50).in_celsius.should == 50
        Celsius.new(50).in_fahrenheit.should == 122
      end

      it "is a Temperature subclass" do
        Celsius.new(0).should be_a(Temperature)
      end
    end 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T22:03:53.237

> ？？？我是作为一个类方法来做的吗？

**是的**

> 有没有比创建新对象更好的方法？

并非如此，这看起来像是本课的预期结果。

> 温度对象的构造函数应该接受一个包含 :celcius 条目或 :fahrenheit 条目的选项散列。
> 
> ？？？我知道我使用了散列，但我使用了“选项散列”吗？

**是的，有点**

在构造之后保留选项散列，并在所有计算中引用它可能不是最简单的解决方案。在内部，您可以/应该有一个温度的*数字*实例变量。甚至可能是开尔文。

子类的使用意味着它们在适当的单元中保留一个内部变量（尽管这不是必需的，但测试的重点是驱动公共接口行为，在很大程度上你可以自由地实现你认为合适的内部)

在某些情况下可以做一些您在帖子中所做的事情（例如正确地往​​返数据或延迟转换），并且测试场景非常简单，因此您选择的结果很难判断任何一种方式。所以你可能会得到其他意见。

您所做的最大问题是：

```
hash = { :c => 25 }
t = Temperature.new( hash )

# This reaches inside the new object and changes its state, breaking encapsulation:
hash[:c] = 30 
```

> 工厂方法是一种设计模式......在 Ruby 中实现这种模式的一种方法是通过类方法
> 
> ？？？这是写成工厂方法吗？

**是的**

工厂方法只是返回一个新的、有效的、正确初始化的对象的方法。

# c# - 为读取可变长度的混合类型数据设计更好的文本文件格式

> ID：15822026
> 
> 赞同：1
> 
> 时间：2013-04-04T21:26:06.823
> 
> 标签：c#, text-files, vb6-migration

我正在设计一种要在 C# 中读取的文本文件格式。我需要在一行中存储类型：int、double 和 string。我打算使用 .CSV 格式，以便可以手动打开和读取文件。一个特定的记录可能有 8 种已知类型，然后是（字符串、整数、双精度）或（字符串、整数、双精度、双精度）的可变数量的“指示符”组合，并且某些行可能不包含“指示符”。因此，每条记录可以是可变长度的。

在 VB6 中，我只需输入数据，将数据拆分为变量数组，然后确定数组中该行的元素数，并使用 ***VarType 函数确定最终的“指标”变量是否为字符串、 int 或 double 并相应地解析字段。

可能有更好的方法来设计文本文件，这可能是最好的解决方案。如果是这样，我有兴趣听到想法。我进行了搜索，但没有发现专门讨论将混合类型的可变长度文本行读入 C# 的问题。

如果没有更好的格式，有没有办法在 C# 中复制 VB6 VarType 函数，如上面两段所述***？我可以在 C# 中轻松处理文本文件读取和行拆分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:28:20.210

您可以使用 json 或 xml，因为它们在 .NET 中得到很好的支持并且具有自动序列化功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:40:01.797

首先，我同意 Keith 关于使用 Xml 或 JSON 的建议。你在这里重新发明了一个轮子。[此页面](http://msdn.microsoft.com/en-us/library/szzyf24s%28v=VS.80%29.aspx)有一个介绍性示例，说明如何将对象序列化为文件以及一些指向更多信息的链接。

如果您需要坚持使用自己的文件格式和自定义序列化/反序列化，请查看[Convert](http://msdn.microsoft.com/en-us/library/system.convert%28v=VS.71%29.aspx)类，以及与 int 和 double 等内在值类型挂钩的各种[TryParse](http://msdn.microsoft.com/en-us/library/system.convert%28v=VS.71%29.aspx)方法。

# php - 推进实例池中元素的“持续时间”

> ID：15822030
> 
> 赞同：2
> 
> 时间：2013-04-04T21:26:28.847
> 
> 标签：php, propel

我是 PHP 新手，也是 Propel 新手。

正如我所读到的，Propel 有一个实例池来重用查询。

例如

```
 <?php
// first call
$author1 = AuthorQuery::create()->getByFooField('foo');
$foo = $author1->getId();
// SELECT query
...
// second call
$author2 = AuthorQuery::create()->getByFooField('Foo');
// Skips the SQL query and returns the existing $author1 object
$foo = $author2->getId(); 
```

事情是

这个物体存活了多少时间？这是因为我必须解析一个 excel，并构建一些对象以将它们保存在数据库中。

所以，也许在我读了 100 行的 excel 中，我读了 25 次 'foo'，所以，如果我能避免 24 次查询，每次查询数据库以获得 PK 将是一件坏事。

看起来Instance Propel解决了这个问题，但我不知道多少次。

这取决于时间、使用的内存或执行查询的范围之类的东西？（我的意思是，可能在执行第一个查询的方法之后，实例池被清除了，所以，除非第二个查询在同一个方法中，否则它将再次查询数据库。或者当对象还活着时，我不知道不知道）

我搜索了一下，但没有找到任何东西，我的直觉告诉我这取决于使用的内存，但是，没有官方的。

或者也许有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:22:39.000

只需在我上面的评论之后添加一个答案。

基本上，实例池是按主键组织的对象集合。它**不是**查询缓存，而是特定实例之一。几乎在您请求特定记录的任何时候，它都会被添加到该类的实例池中。当你再次通过它的主键请求该记录时，Propel 将返回缓存的对象而不是访问数据库。任何时候你发出一个`->find()`Propel**都会**命中数据库，不管实例池是什么。

在您生成的基类中，您可以通过查找方法并查看其使用方式来查看此`findPk`行为。`getInstanceFromPool()``addInstanceToPool()`

例如：

```
$entity1 = EntityQuery::create()->findPk(13); // WILL hit database
$entity2 = EntityQuery::create()->findPk(13); // WILL NOT hit database

// This WILL hit DB, even if there is only 1 record & it is in the instance pool
$entity3 = EntityQuery::create()->findOneByName("Record Thirteen");
// This will also hit the DB EVERY TIME, regardless of the instance pool
// even though it is the same query
$entity4 = EntityQuery::create()->findOneByName("Record Thirteen");

// This will always hit the database, even if the instance is in the pool
$entity5 = EntityQuery::create()->findByUniqueField("Unique Value"); 
```

希望这可以帮助。同样，这不是猜测，我已经进入代码并仔细检查了这一点。您可以查看生成的基类和`propel/runtime/lib/query/ModelCriteria.php`（特别是`find()`方法）以了解它是如何工作的。

# c++ - C++ Boost递归变体重载apply_visitor

> ID：15822031
> 
> 赞同：1
> 
> 时间：2013-04-04T21:26:29.330
> 
> 标签：c++, recursion, g++, boost-variant

摘要：我希望在包含递归 boost::variant 对象的类中重载 apply_visitor() 方法。

在下面包含的代码中有方法：

```
template <typename T>
ostream& apply_visitor(const T& fn) const 
```

我想为不同的访问者重载这个方法。像这样的东西：

```
ostream& apply_visitor(const PrintData& fn) const 
```

但问题是 PrintData 类尚未完成（请参阅下面代码中的注释）。它是在 Node 类之后定义的。所以我有两个问题（除其他外——我欢迎对这段代码进行一般性批评，该代码正在建模我想投入生产的东西）。

1）有没有办法让 apply_visitor(PrintData&) 工作？

2）我可以重新排列（递归）变体，以便所有访问者方法都在 PrintData 中，并且我不必将 apply_visitor 添加到 Node 类吗？

```
/**
 * compiled with gcc (tested with 4.7.2 on linux)
 * requires the boost development headers to be discoverable
 * by the compiler.
 *
 * g++ -otest-recursive-visit -std=c++11 test-recursive-visit.cpp
 * ./test-recursive-visit
 **/

#include <iostream>
#include <map>
#include <string>
#include <vector>

#include "boost/variant.hpp"
#include "boost/variant/recursive_wrapper.hpp"
#include "boost/variant/static_visitor.hpp"

using namespace std;

/// type name demangler (as implemented in g++). For other compilers,
/// we could add more #elif statements, but for now, just return
/// the mangled name.
#ifdef __GNUG__ /// compiler is g++
#include <cxxabi.h>
string type_demangle(const string& name)
{
    int status;
    char* res = abi::__cxa_demangle(
        name.c_str(), NULL, NULL, &status);
    string demangled_name((status==0) ? res : name);
    free(res);
    return demangled_name;
}
#else /// compiler is not g++
string type_demangle(const string& name) { return name; }
#endif

/// forward declaration of the Node class
/// (needed for recursive variant type)
class Node;

/// the actual recursive variant type
/// (typically hidden from the users)
typedef boost::variant<
    boost::recursive_wrapper<Node>,
    vector<int>,
    vector<float>
> data_t;

// forward declaration for PrintData. See note below concerning
// Node::apply_visitor()
class PrintData;

/// this is the object users will see
/// for prototyping, the tree object is public
class Node
{
  public:
    /// sub-nodes are identified by unique strings
    /// which point to one of the objects that data_t
    /// can hold
    map<string,data_t> tree;

    /// constructor for a std::map object, passed to tree
    Node(const initializer_list<pair<const string,data_t>>& l)
    : tree(l)
    {}

    //
    // INTERESTING PART OF THIS EXAMPLE IS HERE
    //
    // I tried to replace T& with PrintData& adding
    // a forward declaration at the top but I get the
    // errors:
    //
    //  line 86:
    //      invalid use of incomplete type ‘const class PrintData’
    //  line 53:
    //      forward declaration of ‘const class PrintData’
    //

    /// This is called by boost::apply_visitor(Visitor(),Node)
    //ostream& apply_visitor(const PrintData& fn) const
    template <typename T>
    ostream& apply_visitor(const T& fn) const
    {
        for (auto i : tree)
        {
            *fn.os << fn.prefix << i.first;
            i.second.apply_visitor(fn);
        }
        return *fn.os;
    }
};

/// the printing visitor to ostream object
class PrintData : public boost::static_visitor<ostream&>
{
  public:
    ostream* os;
    string prefix;

    /// keep a pointer to the ostream and keep
    /// a prefix string which will hold and "indent"
    /// which is something like "  " for every level
    /// of recursion
    PrintData(ostream& out_stream, const string& prefix_str="")
    : os(&out_stream)
    , prefix(prefix_str)
    {}

    /// recurse into the tree, adding indent characters to prefix
    ostream& operator()(Node& n) const
    {
        *os << endl;
        n.apply_visitor(PrintData(*os, prefix+"  "));
        *os;
    }

    /// actual data types that we want to print out
    template <typename T>
    ostream& operator()(const vector<T>& d) const
    {
        *os << " (vector<" << type_demangle(typeid(T).name()) << ">):";
        for (T i : d)
        {
            *os << " " << i;
        }
        *os << endl;
        return *os;
    }
};

/// convenience operator to allow: cout << node;
ostream& operator<<(ostream& os, const Node& n)
{
    return boost::apply_visitor(PrintData(os), n);
}

int main()
{
    /// hooray for initialization lists!!!
    Node n {
        {"X", Node{
            {"a", vector<int>{1,2,3}},
            {"b", vector<float>{2,3,4}}
        }},
        {"Y", vector<int>{3,4,5}},
        {"Z", Node{
            {"A", Node{
                {"c", vector<float>{4,5,6}}
            }}
        }}
    };

    /**
    applying PrintData to n prints out the following:

    X
      a (vector<int>): 1 2 3
      b (vector<float>): 2 3 4
    Y (vector<int>): 3 4 5
    Z
      A
        c (vector<float>): 4 5 6

    **/
    cout << n;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:42:37.087

我遇到了类似的问题，`make_recursive_variant`然后我使用`map<Key,Value>`了变体而不是 Node 类。最后我的节点类变成了一个包含`std::map`引用的实用函数。如：

```
typedef boost::make_recursive_variant<
    std::map<std::string, boost::recursive_variant_>,
    vector<int>,
    vector<float>
>::type data_t;

// the printing visitor to ostream object
class PrintData : public boost::static_visitor<ostream&>
{
  public:
    ostream* os;
    string prefix;

    /// keep a pointer to the ostream and keep
    /// a prefix string which will hold and "indent"
    /// which is something like "  " for every level
    /// of recursion
    PrintData(ostream& out_stream, const string& prefix_str="")
    : os(&out_stream)
    , prefix(prefix_str)
    {}

    /// recurse into the tree, adding indent characters to prefix
    ostream& operator()(std::map<std::string, data_t>& tree) const
    {
        *os << endl;
        for (auto& i : tree)
        {
            *os << prefix << i.first;
            //you may want to change prefix and use new PrintData instead of *this
            boost::apply_visitor(*this, i.second);
        }
        return *os;
    }

    /// actual data types that we want to print out
    template <typename T>
    ostream& operator()(const vector<T>& d) const
    {
        *os << " (vector<" << type_demangle(typeid(T).name()) << ">):";
        for (T i : d)
        {
            *os << " " << i;
        }
        *os << endl;
        return *os;
    }
};

class Node
{
public:
    //implicit ctor for data_t conversion
    Node(data_t& data) : data(data) { }
    //...
private:
    data_t& data;
}; 
```

编辑：我忘了提到你不再需要 Node 类中的 apply_visitor，但我不确定`initializer_list`ctor。它可能不适用于`data_t`类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:38:07.860

*声明*函数，但不要在类中定义它。相反，等到定义它之后再定义它`PrintData`，此时它将是一个完整的类型。

```
class PrintData;

class Node
{
  public:
  ...
    ostream& apply_visitor(const PrintData& fn) const;
  ...
};

class PrintData : public boost::static_visitor<ostream&>
{ ... };

inline ostream& Node::apply_visitor(const PrintData& fn) const
{
  ...
} 
```

# html - 让 Canvas 元素覆盖我的页眉/导航

> ID：15822033
> 
> 赞同：0
> 
> 时间：2013-04-04T21:26:48.003
> 
> 标签：html, css, canvas

我试图让我的画布覆盖我的标题和导航面板，但它只是堆叠在顶部，即使它有更大的 Z-index。我是否使用绝对位置，它会覆盖我想要的元素，但它没有正确对齐。画布可能会在我不明白的中间点开始。它不应该从 topWrapper 规则继承定位/对齐吗？

HTML

```
<div id="topWrapper">
    <canvas id="canvas" width="850px" height="194px"></canvas>
    <a href="index.html">       
        <header id="top_header"></header>
    </a>    
    <nav id="topnav">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="video.html">Trailers</a></li>
            <li id='adminPage'><a href="admin.html">Admin</a></li>
        </ul>
    </nav>   
</div> 
```

CSS：

```
#topWrapper {
    background-color:#0d0d0d;
    text-align:center;
    position:absolute;
    z-index:9999;
    width:100%;
    max-width: 850px;
    margin: 0 auto; left:0px; right:0px;
    float:clear;
    background-image: url('images/headfoot/bg5.jpg');    
}
#top_header{
    width: auto;
    height: 120px; 
    border-bottom: 1px solid yellow;
    margin: 0px;
    padding: 2px 0px;
    cursor:pointer;
    background: url('images/banner.png') center no-repeat;
    background-size: contain;
}
#topnav{
    border-bottom: 1px solid yellow;
    width: 100%;
}
#canvas{
    background: green;
} 
```

我尝试在画布元素上使用绝对定位，它可以像我需要的那样放置自己，但是对齐不起作用：

![在此处输入图像描述](https://i.stack.imgur.com/rFCav.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:40:30.947

**根据您的代码工作小提琴：http:** [//jsfiddle.net/PZU9F/](http://jsfiddle.net/PZU9F/)

根据您的代码解释，这将解决您的问题。

如果您提供更多详细信息，则可以优化解决方案并提高效率。

```
#canvas{
    margin-bottom: -129px;
    background: green;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:49:20.350

你可以设置

```
#canvas{
    position: absoulute;
    left: 0;
    background: green;
} 
```

[http://jsfiddle.net/LfXME/2/](http://jsfiddle.net/LfXME/2/)

在您的示例中，它没有正确对齐，因为`#topWrapper`它具有`text-align: center;`属性，并且强制`#canvas`从中心开始。

# powershell - PowerShell 中 Get-ChildItem 中的通配符匹配

> ID：15822046
> 
> 赞同：1
> 
> 时间：2013-04-04T21:27:27.070
> 
> 标签：powershell

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:44:07.283

据我所知，它使用的是您所描述的 WildcardPattern。但是，cmdlet`Get-ChildItem`将其限制为当前目录（字符除外`\`），因此它不会与`-Recurse`进入无限级别的开关冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:04:01.113

对于“C:\*\testfile.txt”，星号只对第一级目录起作用（例如test）。您要查找的文件不存在，并且您得到的输出是预期的。为第二级添加另一个星号，您将获得所需的输出（例如“C:\*\*\testfile.txt”）。您还可以添加递归开关以从当前位置开始搜索，一直向下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:45:01.010

要么工作：

```
gci c:\test\*\testfile.txt 
```

或者

```
gci c:\*\testfile.txt -recurse 
```

例子：

```
PS C:\temp\test2> dir

    Directory: C:\temp\test2

Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-a---          4/4/2013  10:41 PM          0 testfile.txt

PS C:\temp\test2> cd \
PS C:\> gci c:\*\testfile.txt -recurse -ea SilentlyContinue

    Directory: C:\Temp\test2

Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-a---          4/4/2013  10:41 PM          0 testfile.txt 
```

# c - 使用 MinGW 构建依赖于 Visual Studio CRT (msvcr110.dll) 而非 Windows CRT (msvcrt.dll) 的 Windows DLL

> ID：15822048
> 
> 赞同：11
> 
> 时间：2013-04-04T21:27:34.530
> 
> 标签：c, visual-c++, visual-studio-2012, mingw, msvcrt

我正在尝试使用 MinGW for Windows 构建一个 DLL。我知道默认情况下，使用 MinGW 构建会引入对 Windows 附带的 msvcrt.dll 的依赖。但是，我希望我的 DLL 不依赖于 msvcrt.dll。相反，我希望使用 msvcr110.dll（Visual Studio 2012 CRT）来满足我的 DLL 的 C 运行时依赖项。

我需要这样做的原因是因为我尝试构建的源代码使用了一些在 VC11 编译器中不可用的 C99 功能，因此必须使用 MinGW 构建它。同时，在 Windows 8 Store 应用程序（这是我正在尝试构建的）中不允许使用依赖于 msvcrt.dll 的 DLL。相反，如果 DLL 依赖于 msvcr110.dll，则它在 Windows 应用商店中是允许的。

所以我唯一的选择是使用 MinGW 构建，但仍然链接到 msvcr110.dll。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T17:54:39.867

我鼓励您下载并安装最新的**[MinGW-w64](http://mingw-w64.sourceforge.net/download.php#mingw-builds)**，不仅因为它是最先进的，而且它还包含`libmsvcr110.a`要链接的导入库。然后尝试以下操作：

## `specs.msvcr110`

* * *

```
%rename cpp msvcrXX_cpp

%rename cc1plus msvcrXX_cc1plus

*cpp:
%(msvcrXX_cpp) -D__MSVCRT_VERSION__=0x1100 -D__USE_MINGW_ACCESS

*cc1plus:
%(msvcrXX_cc1plus) -D__MSVCRT_VERSION__=0x1100 -D__USE_MINGW_ACCESS

*libgcc:
%{mthreads:-lmingwthrd} -lmingw32 %{shared-libgcc:-lgcc_s} -lgcc -lmoldname110 -lmingwex -lmsvcr110 
```

## `libmoldname110.a`

* * *

正如你们中的一些人正确地注意到的那样，确实没有`libmoldname110.a`开箱即用的提供（并且有充分的理由）。然而，像往常一样，没有人阻止你自己建造一个。为此，您首先需要获取[`<mingw-w64-source-dir>/mingw-w64-crt/lib64/moldname-msvcrt.def`](http://sourceforge.net/p/mingw-w64/mingw-w64/ci/master/tree/mingw-w64-crt/lib64/moldname-msvcrt.def)，然后`dlltool`按如下方式使用（甜蜜）：

```
$ dlltool -k -U --as=as --def=moldname-msvcrt.def --dllname=msvcr110.dll --output-lib=libmoldname110.a 
```

**注意：**
不幸的是，目前，我没有机会亲自测试这个。因此，请在评论中报告您的经验，以便我们共同提出最终解决方案。

## `test.rc`

* * *

```
#include <winuser.h>

// Choose:
1 RT_MANIFEST msvcr110.manifest // if linking executable
2 RT_MANIFEST msvcr110.manifest // if linking DLL 
```

## `msvcr110.manifest`

* * *

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel level="asInvoker" uiAccess="false"></requestedExecutionLevel>
      </requestedPrivileges>
    </security>
  </trustInfo>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type="win32" name="Microsoft.VC110.CRT" version="11.0.51106.1" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b">
        <file name="msvcr110.dll" />
        <file name="msvcp110.dll" />
        <file name="msvcm110.dll" />
      </assemblyIdentity>
    </dependentAssembly>
  </dependency>
</assembly> 
```

查看**[应用程序清单](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374191%28v=vs.85%29.aspx)**以获取更多信息。

## 建造

* * *

```
$ windres -i test.rc -o test.rc.o --output-format=coff
$ gcc -specs=specs.msvcr110 -o test test.c test.rc.o 
```

## 推荐

* * *

尽管*Microsoft Visual C Runtime*包含在大多数平台上，但它有许多不同的版本，其中一些是**错误**的或/并且**破坏了向后兼容性**。`msvcr*.dll`因此，分发您知道肯定适用于您的应用程序的版本始终是一个好主意。

# .net - 我可以检查字符串来自数组中的哪个部分吗？

> ID：15822051
> 
> 赞同：1
> 
> 时间：2013-04-04T21:27:41.887
> 
> 标签：.net, arrays, vb.net

如果我有一个像

```
Dim list As String() 
```

并从文件中读取列表

```
list = Split("filehere.txt", ",") 
```

我使用类似的东西

```
If list.Contains("string") then
code here
End If 
```

我可以找出数组“string”的哪个字符串来自，例如：string(0) 或 string(16)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T21:31:16.663

在 .NET 中，要在列表中查找对象的位置，您可以使用[`IndexOf`](http://msdn.microsoft.com/en-us/library/e4w08k17.aspx).

如果找不到对象，该方法将返回 -1。这允许您使用相同的方法来检查列表是否包含对象以及它在哪里。

# c++ - 条件语句后的多个单独的括号代码段

> ID：15822059
> 
> 赞同：0
> 
> 时间：2013-04-04T21:28:07.097
> 
> 标签：c++, conditional-statements, brackets

在下面的代码示例中 - 这是不好的做法吗？另外为什么编译器会进入第二个括号语句？奇怪的是，我以前从未经历过这种情况，但它是在面试的情况下出现的。我原以为第二个括号部分会寻找另一个条件语句。代码如下：

```
if ( condition )
{
    // some code
}
{
    // some code
} 
```

感谢您提前提供任何有用的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:29:06.787

```
if ( condition )
{
    // gets executed if condition == TRUE
}
{
    // always gets executed, has nothing to do with previous if statement
    int a = 42 ; //only exists inside brackets
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:31:25.630

你可以在任何地方使用`{`and来创建一个块`}`；它不需要附加到`if`条件上。

它对于控制对象的生命周期很有用。

```
{
    MyObject foo;
    // ... do something with foo ...
}   // MyObject just went out of scope, so its destructor is called
// foo is no longer defined 
```

# c++ - C ++从文件末尾向后读取文件

> ID：15822062
> 
> 赞同：7
> 
> 时间：2013-04-04T21:28:10.173
> 
> 标签：c++, eof, seekg

我正在尝试编写一个带有菜单的程序，该菜单以几种不同的方式从文本文件中读取。我仍在处理菜单选项#2（从文件末尾向后读取），但我无法理解我做错了什么。我已经在这里待了几天了，只是找不到任何好的资源来帮助解决这个问题。任何帮助，将不胜感激。

```
#include <iostream>
#include <string>
#include <iomanip>
#include <istream>
#include <math.h>
#include <fstream>

using namespace std;

const int SIZE = 20;                     
typedef char String[SIZE];

//prototypes
void Menu(int &);
void ReadFile(ifstream &);
void BackwardFile(ifstream &,long &);
long CountFile(ifstream &,long &);

int main()
{  
    char filename[]= "grades.txt";
    int choice;
    long numBytes;

    ifstream InList;
    InList.open(filename);

    if(InList.good())
    {
        do
        {         
            Menu(choice); 
            switch(choice)
            {
                case 1:  
                    ReadFile(InList);
                    break;
                case 2:
                    CountFile(InList,numBytes);
                    BackwardFile(InList,numBytes);
                    break;
                case 3:
                    cout << "Pick a start position between 0 - " << numBytes << endl;
                    break;
                /*case 4:*/

                case 5:
                    cout << "\n GOOD BYE." << endl << endl; 
                    break;
            }

        }while (choice != 5);                         
    }
    else
        cout << "File did not open successfully." << endl << endl;

    system("PAUSE");
    return EXIT_SUCCESS;
}

void Menu(int &choice) 
{ 
    cout << "\n    Choose an option:";
    cout << "\n...................................";
    cout << "\n 1- Display All Contents of the File";
    cout << "\n 2- Display Content in Reverse Order";
    cout << "\n 3- Display from Point A to Point B";
    cout << "\n 4- Display from Point B to Point A";
    cout << "\n 5- Exit";
    cout << "\n\n Enter your choice: ";
    cin >> choice; 
} 

void ReadFile(ifstream& inFile)
{
    char byte;

    inFile.clear();

    cout<< "\nReading contents from the file:" <<endl;
    if(inFile)
    {
        inFile.get(byte);
        while(inFile.good())
        {
            cout << byte;
            inFile.get(byte);  
        }
    }
    inFile.close();
}

void BackwardFile(ifstream& inFile, long& numBytes)
{
    char byte;

    inFile.clear();
    cout<< "\nReading contents backwards from the file:" <<endl;

    inFile.seekg(numBytes, ios::end);

    while(inFile)
    {
        inFile.get(byte);               
        cout << byte;
        numBytes--;
        inFile.seekg(numBytes);  
    }
    inFile.close();
}                              

long CountFile(ifstream& inFile, long& numBytes)                           
{
    inFile.seekg(0L, ios::end);
    numBytes = inFile.tellg();
    return numBytes;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-01-03T00:53:26.910

以下是我对该问题的解决方案。打开文件时，我使用 ios::ate 将文件位置设置为文件末尾，并使用 seekg 方法读回。我不确定是否有更有效的方法来解决这个问题。

```
void readFile(char *fileName){
    char c;
    std::ifstream myFile(fileName,std::ios::ate);
    std::streampos size = myFile.tellg();
    for(int i=1;i<=size;i++){
        myFile.seekg(-i,std::ios::end);
        myFile.get(c);
        printf("%c\n",c);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T21:56:00.270

`ios::end`实际上并不表示`seekg`应该向后寻找；相反，它只是表示偏移量是相对于文件末尾的。（是的，我认为调用类是一个糟糕的命名约定`ios_base::seekdir`。）据我所知，没有标准的方法来实际向后读取文件，尽管这里有一些关于如何模拟这样做的建议：[读取文件向后？](https://stackoverflow.com/questions/10813930/read-a-file-backwards)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-14T00:20:11.173

除非您的主要目的是浪费时间，否则您希望找到正确的位置，向前读取文件，然后反转内存中的数据。如果您正在读取大量数据，并且一次只需要少量内存，则可以稍微修改一下以读取（例如）16 或 64 千字节块。

一旦你在内存中有一大块数据，你有两个选择。您可以从头向后处理它，也可以反转它，然后从头到尾处理它。后者可能看起来像这样：

```
// Warning: I have only tested this, not proven it correct.
std::vector<char> read_backwards(std::istream &is, int size) {
    std::vector<char> buffer;

    buffer.resize(size);

    is.seekg(-size, std::ios::end);
    is.read(&buffer[0], size);
    std::reverse(buffer.begin(), buffer.end());
    return buffer;
} 
```

尝试实际向后读取文件可能（并且通常会）导致严重的性能问题。具体来说，标准库通常会在您对流进行搜索时刷新其缓冲区，因此每次搜索后立即读取通常会导致调用内核函数从磁盘（或至少从操作系统的缓存）读取数据.

如果您关心为什么会这样：C++ 标准基于其对文件如何在 C 标准上工作的描述。C 标准规定，如果您打开一个用于读取和写入的流，则当/如果您从读取切换到写入（反之亦然）时，您必须在流上进行搜索。正因为如此，很多在流上查找的实现在每次查找时都会刷新缓冲区，以防万一您可能从写入切换到读取，并且需要读回查找之前写入缓冲区中的数据。

*通常*这无关紧要：无论如何，寻道通常会将您带到缓冲区中的范围之外，因此您最终不得不从磁盘读取数据。但是，在此处处理的特定情况下，只要您“向前”读取数据，然后将其反转而不是对每个字节进行搜索，缓冲就可以很好地工作。虽然最好使用实际的最大缓冲区，但即使是相当小的缓冲区也会对速度产生很大影响。

# java - Card and Deck toString and shuffle

> ID：15822063
> 
> 赞同：0
> 
> 时间：2013-04-04T21:28:11.770
> 
> 标签：java, tostring, shuffle

因此，在我的 Java 课程中，我们获得了这些纸牌和套牌类，它们将用于稍后的纸牌游戏。这是卡代码：

```
public class Card {

    // public constants:

    public static final int ACE     = 1;
    public static final int DEUCE   = 2;
    public static final int TWO     = 2;
    public static final int THREE   = 3;
    public static final int FOUR    = 4;
    public static final int FIVE    = 5;
    public static final int SIX     = 6;
    public static final int SEVEN   = 7;
    public static final int EIGHT   = 8;
    public static final int NINE    = 9;
    public static final int TEN     = 10;
    public static final int JACK    = 11;
    public static final int KNAVE   = 11;
    public static final int QUEEN   = 12;
    public static final int KING    = 13;

    public static final int SPADES  = 1;
    public static final int HEARTS  = 2;
    public static final int DIAMONDS = 3;
    public static final int CLUBS   = 4;

    // private instance data;

    private int rank;
    private int suit;

    // public constructor:
    public Card ( int rank, int suit ) {
        if ( rank < Card.ACE | rank > Card.KING | suit < Card.SPADES | suit > Card.CLUBS ) {
            throw new IllegalArgumentException();
        } else {
            this.rank = rank;
            this.suit = suit;
        }
    }

    /** Returns this card's suit. */
    public int getSuit() {
        return this.suit;
    }

    /** Returns this card's rank. */
    public int getRank() {
        return this.rank;
    }   

    /** Returns a stringy version of this card. */
    public String toString() {
        // Replace the next instruction with your code:
        throw new UnsupportedOperationException();
    }

} 
```

这是甲板类代码：

```
public class Deck {

    // private instance data;
    private Card[] cards;

    // public constructor:
    public Deck() {
        this.cards = new Card[52];
        int i = 0;
        for ( int suit = Card.SPADES; suit <= Card.CLUBS; suit++ ) {
            for ( int rank = Card.ACE; rank <= Card.KING; rank++ ) {
                this.cards[i] = new Card(rank,suit);
                i++;
            }
        }
    }

    /** Returns a copy of the card at the specified index in this deck. */
    public Card cardAt(int index) {
        if ( index < 0 | index > 51 ) {
            throw new IllegalArgumentException();
        } else {
            return new Card( this.cards[index].getRank(),this.cards[index].getSuit() ); 
        }
    }

    /** Shuffles this deck. */
    public void shuffle() {
        // Replace the next instruction with your code:
        throw new UnsupportedOperationException();

    }

    /** Returns a stringy version of this deck. */
    public String toString() {
        // Replace the next instruction with your code:
        throw new UnsupportedOperationException();
    }

} 
```

我的问题是我被困在两个类的 toString 方法和甲板类的 shuffle 方法上。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T21:34:23.853

shuffle可以实现如下

```
 /** Shuffles this deck. */
    public void shuffle() {
       // Shuffle the elements in the array
       Collections.shuffle(Arrays.asList(cards));

    } 
```

toString 只是构建一个字符串并返回它。这可以是您想要描述您的班级的任何内容。这就是我要做的。

甲板用

```
 /** Returns a stringy version of this deck. */
    public String toString() {
         String output="Current Deck:\n";
         for (int i=0; i <cards.length ; i++){
          output+= cardAt(i).toString();
         }
       return output;
    } 
```

至于卡，我会改变一些东西。您分配一堆整数来表示卡片，如果您不关心这些值，我会亲自使用枚举。这样，具有数字以外的值的牌，即 1 点与 10 点，将由它们的名称表示，而不是某个数字。谁真的说过“我有 12 个俱乐部”。我会把我的东西改成这个。

```
public enum Rank{ACE,TWO,THREE ....SO ON}
public enum Suit {HEARTS,CLUBS,SPADES,DIAMONDS} 
```

然后，您将更改所有的 get 方法，但真正的优势在于您不需要长的 switch 语句来从枚举值中推断出卡片名称。你可以像这样实现 toString 。

```
//change rank and suit type from int to the Enums
Rank rank;
Suit suit;

/*modify all your getters*/

 /** Returns a stringy version of this deck. */
    public String toString() {
        //enum will be printed out!

        return rank+" of " + suit +"\n";
    } 
```

# java - if taglib 与 forEach jstl 的两项比较

> ID：15822065
> 
> 赞同：0
> 
> 时间：2013-04-04T21:28:13.460
> 
> 标签：java, jsp, jstl, taglib

我在另一个里面有一个 forEach 标签库。我想比较在其各自的 taglib 中列出的每个对象的一个​​属性。

```
<c:forEach items="${andares}" var="andar">

        ..........

        <c:forEach items="${lojas}" var="loja">
            <c:if test="${loja.andar == andar.numero}">
                     .....
            </c:if>      
        </c:forEach>

    </c:forEach> 
```

我只想在对象andar的属性“numero”等于对象loja的属性“andar”时执行一些代码。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:20:53.457

我不记得了，但似乎应该可以。如果没有，也许是这个？

```
<c:forEach items="${andares}" var="andar">
    <c:set var="andarval" value="${anar.numero}"/>
    ..........
    <c:forEach items="${lojas}" var="loja">
        <c:set var="lojaval" value="${loja.andar}"/>
        <c:if test="${lojaval == andarval}">
        ....
        </c:if>
    </c:forEach>
</c:forEach> 
```

# c++ - 使用重载的 << 运算符打印出矩阵

> ID：15822069
> 
> 赞同：-1
> 
> 时间：2013-04-04T21:28:21.057
> 
> 标签：c++

我有 2d 数组，它代表矩阵，我需要通过重载的 << 运算符打印它。

该重载运算符的声明是

```
std::ostream &operator <<(std::ostream &os, const Matrix &matrix) {

return os;
} 
```

而且效果很好——当我写的时候

```
 ostringstream os;
 Matrix a;
 // fill in the matrix
 os << a; 
```

这个函数被调用......但是虽然我已经阅读了一些教程，但我没有找到，如何让它打印出值......有人可以告诉我 soma 示例代码，如何实现一些非常从矩阵中打印出值的基本操作？

顺便说一句-矩阵可以有随机大小..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:49:32.493

You either need to write the result from the `ostringstream` to `cout`:

```
ostringstream os;
Matrix a;
// fill in the matrix
os << a;
cout << os.str(); 
```

or you do it directly:

```
Matrix a;
// fill in the matrix
cout << a; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:32:19.577

Without seeing your `Matrix` class definition it's hard to guess how it's implemented, but you probably want something like this:

```
std::ostream& operator<< (std::ostream &os, const Matrix &matrix) {
    for (int i = 0; i < matrix.rows; ++i)
    {
        for (int j = 0; j < matrix.cols; ++j)
            os << " " << matrix.data[i * matrix.cols + j];
        os << std::endl;
    }
    return os;
} 
```

To display the matrix you would then just do this:

```
 Matrix a;
 // fill in the matrix
 cout << a; 
```

This invokes the above `operator<<` implementation to print the matrix to stdout. Obviously you can use any other appropriate output stream instead of `cout`.

# php - 将大 mysql 表导出为 .xls 格式

> ID：15822070
> 
> 赞同：0
> 
> 时间：2013-04-04T21:28:28.630
> 
> 标签：php, phpexcel

我需要 exposrt mysql 表来`.xls`格式化，这是我代码中的片段

```
 $result = mysql_query( /* here query */ );
    $objPHPExcel = new PHPExcel();
    $rowNumber = 1;

    while ($row = mysql_fetch_row($result)) {
       $col = 'A';

       foreach($row as $cell) {
         $objPHPExcel->getActiveSheet()->setCellValue($col.$rowNumber,$cell);
         $col++;
      }

       $rowNumber++;
    } 
```

问题是，在表中是 500 000 行，并且在`while`每次迭代时循环，当我也`foreach`循环时，这在 php 文件执行中需要很长时间。

可以优化这段代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:53:23.847

编写 500,000 行总是需要花费大量时间....即使您通过使用工作表的 fromArray() 方法来摆脱 foreach 循环来加快它的速度；并且（正如 nichar 所指出的那样）这对于 xls 格式来说太多了，除非您将它们拆分到多个工作表中。

您可以通过启用单元缓存来减少内存需求（SQLite 提供了最佳的内存使用率），但是执行 500,000 行仍然需要很长时间，并且任何这种大小的东西都应该作为批处理/cron 作业运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:34:12.773

这是需要注意的一点，而不是直接回答您的问题 - 但如果您输出的 Excel 文件格式为`.xls`，则最大行数为 65,536，如果是 MS Excel 2007+ 格式，例如`.xlsx`，最大行数为 1,048,576 .

因此，如果不将输出格式更改为`.xlsx`（这是一个完全不同的结构），文件将太大而无法打开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T21:36:14.387

考虑将数据转储到 csv 文件中，然后将其导入 Excel。应该快很多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T21:38:11.317

If you get a php timeout, you can reset the limit by adding this inside the while or for loop:

```
set_time_limit(300); //whatever seconds you want 
```

If you're running it through the browser, your server may be timing out. I recommend you run it on command line to avoid this.

Also, similar to what nickhar mentioned, it can be an excel issue. I would try outputting as a csv file. I think it will allow you to output more lines.

# compiler-errors - 在 Mountain Lion 上编译/安装 libdvdcss

> ID：15822074
> 
> 赞同：1
> 
> 时间：2013-04-04T21:28:50.543
> 
> 标签：compiler-errors, osx-mountain-lion, configure

我下载了最新的 libdvdcss 源代码并想编译然后安装在 Mountain Lion 上。

我挂断了./configure。看来我没有正确的引导程序。

关于从这里去哪里的任何想法？我应该调整“LT_INIT”吗？达到什么价值？

这是 ./configure 的输出。

```
BRETTs-Mac-Pro:libdvdcss brettmichaels$ ./configure --prefix=/usr
checking build system type... x86_64-apple-darwin12.3.0
checking host system type... x86_64-apple-darwin12.3.0
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... ./install-sh -c -d
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether to enable maintainer-specific portions of Makefiles... yes
checking whether make supports nested variables... (cached) yes
./configure: line 2853: syntax error near unexpected token `win32-dll'
./configure: line 2853: `LT_INIT(win32-dll)'
BRETTs-Mac-Pro:libdvdcss brettmichaels$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T21:45:10.717

我有同样的问题。我可以通过安装 libtool 包在我的系统（GNU/Linux - Debian 7）上修复它。您是否检查过是否安装了此工具（或等效工具）？LT_INIT 宏似乎不需要任何更改。如安装文件中所述，我必须在安装 libtool 后执行`aclocal`and命令。`autoreconf -i`之后`configure`命令运行没有任何错误。

# ruby - 如何在 Rails 中使用 jQuery？

> ID：15822076
> 
> 赞同：0
> 
> 时间：2013-04-04T21:28:55.543
> 
> 标签：ruby, ruby-on-rails-3

我尝试在 Rails 视图中使用 jQuery，`if`但效果不佳。有什么建议吗？

这是视图：

```
 jquery when the page ready
 :javascript
  $(document).ready(function{
 $('#msg').hide(); 
  })

 -if !@x || !@p 
  :javascript
   $(document).ready(function{
   $('#msg').show(); 
   })
  %h5.alert.alert-error#msg.put Invalid email or password 
```

这是控制器：

```
@x=Profolio.find_by_email(params[:user])
@p=Profolio.find_by_password(params[:userpassword]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:32:20.870

一方面，看起来您的 jQuery 格式不正确。您的视图应如下所示：

```
:javascript
$(document).ready(function()
{
  $('#msg').show();
}); 
```

注意`()`by `function`。

我也不确定您使用的是 HAML 还是什么，但`:javascript`可能只是`:script`.

此外，Rails 应该自己加载 jQuery，因为 jQuery 是新版本 Rails 的事实上的 JavaScript 框架。

# asp.net-mvc - 调试安装到空 Web 应用程序中的整个 Web 的 nuget

> ID：15822078
> 
> 赞同：2
> 
> 时间：2013-04-04T21:28:58.243
> 
> 标签：asp.net-mvc, nuget, visual-studio-debugging

我们正在开发一个核心 ASP.NET MVC Web 项目和一个 MvcContrib 插件 Web 项目形式的客户插件——一个作为区域注入到核心 Web 的 Web 项目。该插件是核心项目中的软引用，因此可以完全单独开发并放入。

*我正在尝试生成一种调试/编码插件的方法，以便可以独立于核心 web 开发多个自定义插件。*

开发人员只需要担心编码和测试插件代码。另外，我不希望他们更改这个自定义插件项目中的核心代码——无论如何都应该在核心中完成。

我将核心 Web 创建为 NuGet 包，并包含所有必要的文件，因此我可以将其包含在 Web 中。

我的想法是，我可以创建一个空 web，安装我的核心 web，开发人员可以拥有一个 F5 驱动的调试环境。

我通过创建一个空白 Mvc 项目进行了测试，安装了我的核心包并包含了我的一个插件。我将这个空 Web 应用程序的命名空间更改为核心 Web 的命名空间，认为 Visual Studio 调试会正确附加和我的核心程序集。

空应用程序中的简单 VS 调试不起作用 - 我收到 HTTP 异常，很可能是由于我的路由未注册。我还看到我的 log4net 没有创建它的日志文件夹，所以我知道程序集的应用程序启动没有被调用。

所以我看到 VS 没有附加并调用我的核心程序集。

**我可以使用这个空的 web 作为我的 nuget 安装的 web 和调试的宿主项目吗？如果是这样，我缺少什么配置？**

**如果没有，我如何在每个客户插件项目中包含核心网络，以便我可以将我的 DLL 放入 bin 并对其进行调试？**

使用：Visual Studio 2010

ASP.NET MVC2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:38:13.273

我们做事的方式非常好，是结合使用 Web Activator 和[Razor Generator](http://razorgenerator.codeplex.com/)（作为[Visual Studio 扩展](http://visualstudiogallery.msdn.microsoft.com/1f6ec6ff-e89b-4c47-8e79-d2d68df894ec)提供）。为了访问核心 Web 应用程序中的视图，消费客户端应用程序需要了解它们，因为它们都作为文件引用包含在 Nuget 包中（混乱），或者因为它们被编译到核心 Web dll 中。你可以使用 Razor Generator 来做到这一点。通过 Nuget 安装后，您需要将每个文件的`Custom Tool`属性更改为，这将为每个视图创建一个文件。这将允许您的示例客户端使用来自核心 Web 应用程序的布局和视图。`.cshtml``RazorGenerator``.generated.cs`

David Ebbo[在 Razor Generator 上有一些有用的博客文章](http://blog.davidebbo.com/search/label/RazorGenerator)

将它与 Web Activator 结合起来，创建一个`PostActivationStartMethod`运行您的初始化代码（例如 initialising `Log4Net`）的程序，您应该一切顺利。我们已经在 2 个场景中运行了这个 - 通过 Nuget 使用框架包并直接添加项目引用。调试不适用于 Nuget 包消费路线，但我们没有在 Nuget 包中包含 pdb 文件。我们可以在直接添加项目引用时进行调试。

# javascript - 如何将参数传递给onclick函数参数到动态创建的按钮中？

> ID：15822079
> 
> 赞同：1
> 
> 时间：2013-04-04T21:28:58.957
> 
> 标签：javascript, jquery

我的 javascript 从文件中读取文本并根据下面的按钮创建动态创建按钮。我面临的问题是它无法在点击时调用该函数。我已经尝试删除参数来调用它并且它可以工作但是我似乎无法让它与参数传递一起工作。有人可以帮我吗？

JS：

```
function toggleVisibility(type){
    alert(type);
} 
```

按钮创建：

```
var button='<button type="button" class="btn btn-block btn-inverse active" data-toggle="button tooltip" title="Click this to enable/disable viewing of '+this+'" onclick="toggleVisibility('+"'"+this+"'"+')">'+word+'</button>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T21:32:53.853

首先，您不应该使用内联处理程序，而且无论如何使用 jQuery 创建它更容易：

```
var that = this;
var button = $("<button>");
button.addClass("btn btn-block btn-inverse active");
button.attr({
    type: "button",
    "data-toggle": "button tooltip",
    title: "Click this to enable/disable viewing of " + that
});
button.text(word);
button.on("click", function () {
    toggleVisibility(that);
}); 
```

（是的，我知道你可以链接所有的方法调用，我只是想这样做）

当您准备好将此按钮放在某处时，只需使用`$container.append(button);`.

一切都取决于是什么`this`或您想要/期望它是什么。如果您需要传递给的参数`toggleVisibility`是刚刚单击的特定按钮（我猜是切换其可见性），只需传递`this`（忽略`that`）。至于设置`title`属性，我不确定你想要什么:)

如果您有一个 HTML 结构，例如：

```
<div id="container">
    <!-- Buttons go somewhere in here -->
</div> 
```

并且您将按钮附加到该容器（或该容器中的某处），`click`使用事件委托将单个处理程序绑定到容器会更有效：

```
$("#container").on("click", ".special-btn-identifier", function () {
    toggleVisibility(this);
}); 
```

当然，您需要向按钮添加一个“special-btn-identifier”类，以便此事件处理程序能够工作（并删除`click`每个按钮的单独处理程序，因为这将覆盖它们）。这个单一的事件处理程序只需要运行一次，最好是一旦`#container`准备好......就像在`$(document).ready(function () {});`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:32:42.133

替换您的以下行：

```
.. onclick="toggleVisibility('+"'"+this+"'"+')">'+word+'</button>'; 
```

对于这个：

```
.. onclick="toggleVisibility(this)">'+word+'</button>'; 
```

因为您不需要转义`this`关键字，也不需要包含与`this`您创建按钮文本的上下文不同的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T21:33:00.210

创建按钮时，在文档而不是 html 中注册 onClick 事件。

```
$(document).on('click', 'button.btn-inverse', function() { toggleVisibility(this); return false;}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T21:37:59.447

不要创建内联 HTML 字符串，不要使用侵入式 Javascript。

虽然我什至不建议您使用 vanilla jQuery 创建它们，但您可以尝试：

```
var $button = $('<button></button>', {
  'text'        : word
  'type'        : 'button',
  'class'       : 'btn btn-block btn-inverse active',
  'data-toggle' : 'button tooltip',
  ...
  // any other attributes
});

// append the $button anywere

$( someContainer ).append($button);

$( someContainer ).on('click', '.btn', function(event){

  // you can refer to the button with $(this) here

}); 
```

# haskell - Haskell错误：不在范围内

> ID：15822081
> 
> 赞同：1
> 
> 时间：2013-04-04T21:29:09.307
> 
> 标签：haskell, compiler-errors

我是 Haskell 的新手，我遇到了编译器错误的问题。运行以下代码时，我不断收到以下错误：src\Main.hs:26:22 Not in scope: 'threadDelay'。我认为它一定与间距或制表符有关，因为 Haskell 对此非常挑剔，但我似乎无法找到我的问题所在。

```
eachMinute :: Bool -> Int -> [a] -> [a] -> String
eachMinute keepGoing num resevoir bin1 
    | keepGoing == False =  ""                             
    | otherwise = do answer resevoir bin1
                     threadDelay (1000 * 1000)
                     eachMinute keepGoing 0 resevoir bin1 
```

# node.js - 想要猴子补丁快递 res.json - 有更好的方法吗？

> ID：15822085
> 
> 赞同：1
> 
> 时间：2013-04-04T21:29:20.123
> 
> 标签：node.js, express

我想修补 express`res.json()`并将`res.render()`对象与闪烁和错误结合起来。所以我可以这样做：

```
res.flash('error', 'You suck!');
res.formError('moneyInput', 'Give me more!');
... later
res.json({success: false}); 
```

它会返回： `{flashes: [{error: 'You suck!'}], errors: [{'moneyInput': 'Give me more!'}], content: {success: false}}`

并且同样`res.render`会将这些东西粘贴到模板的本地人中。

所以现在 - 猴子补丁似乎是最好的课程。我计划在中间件中对其进行猴子补丁。

**问题：**
有没有更好的选择？
有没有其他人这样做过？
有什么陷阱？（除了每次升级快递时都必须更新我的代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:17:40.000

一种替代方法是将待处理的数据存储在响应对象上，但不对其中的方法进行猴子修补：

```
function flash (res, type, message) { //stick this in a shared module
    res._flash = {};
    res._flash[type] = message;
    return res;
}
//in some handler function
flash(res, 'error', 'You suck!'); 
```

但是，对于少数真正有用的功能，我会说，只需对其进行修补并承担风险。`res.body`例如，在使用`bodyParser`中间件时，将数据字段动态添加到响应中已经是惯例。如果您想对名称冲突保持偏执，只需添加一个前缀，如`res._mkFlash`.

# ember.js - 如何在 emberjs RC 2 中将“需求”与嵌套路由/控制器一起使用

> ID：15822087
> 
> 赞同：4
> 
> 时间：2013-04-04T21:29:37.150
> 
> 标签：ember.js

我有一个非常基本的路线设置，允许我首先显示某个对象的“所有”记录。然后，如果用户选择一个下拉列表，他们可以使用日期对其进行过滤。

我最近升级到 RC2 并意识到“需要”已经替换或即将替换 controllerFor。

I'm curious how I can use "needs" in the below situation where I need the nested / inner route for "records.date" to change the content for the parent "records" route when a date is selected.

下面缺少的是在 App.RecordsDateRoute 内部，我需要将“记录”控制器的内容更改为新过滤器（这次按日期），而我似乎所做的一切只是转储车把模板并且什么都不显示-即使我尝试使用简单的东西，比如

```
this.controllerFor("records").set('content', App.Record.find(new Date(model.loaded))) 
```

从 RecordsDateRoute 的 setupController 方法中

```
App.Router.map(function(match) {
  return this.resource("records", { path: "/" }, function() {
    return this.route("date", { path: "/:date_loaded" });
  });
});

App.RecordsController = Ember.ArrayController.extend({
  selected: 0,
  dates: Ember.computed(function() {
    return App.Date.find();
  }).property()
});

App.RecordsIndexRoute = Ember.Route.extend({
  model: function() {
    this.controllerFor("records").set("selected", 0);
    return App.Record.find();
  }
});

App.RecordsDateRoute = Ember.Route.extend({
  model: function(params) {
    //the controllerFor below seems to be working great ... but what about needs?
    this.controllerFor("records").set("selected", params.date_loaded);
    return App.Date.create({ loaded: params.date_loaded });
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T01:40:31.000

使用 rc2，可以通过“controllers.controllerName”检索其他控制器的实例，在您的情况下，它将是`this.get('controllers.records')`.

“需要”声明使引用控制器排序导入到另一个控制器的引用；在您的情况下，日期控制器将是：

```
App.RecordsDateRoute = Ember.Route.extend({
  needs: ['records'],
  model: function(params) {
    this.get("controllers.records").set("selected", params.date_loaded);
    return App.Date.create({ loaded: params.date_loaded });
  }
}); 
```

关于`App.Record.find(new Date(model.loaded))`， find() 需要一个 id 或一个对象，其键和值将用于过滤模型集合，但您给它一个 Javascript 日期。

你的意思是`App.Record.find(new App.Date(model.loaded))`，或者类似的东西`App.Record.find({ loaded: model.loaded }) /* assuming it's already a Date */`？

路由中还有一个`initController(controller, model)`名为 的方法，也许您可​​以使用它而不是“重载”具有太多职责的 model() 方法。[http://emberjs.com/api/classes/Ember.Route.html#method_setupController](http://emberjs.com/api/classes/Ember.Route.html#method_setupController)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T03:50:00.177

> 我最近升级到 RC2 并意识到“需要”已经替换或即将替换 controllerFor。

要从路由挂钩访问另一个控制器，您应该继续使用`controllerFor`. `Controller.needs`用于控制器之间的通信，它取代了控制器上现在不推荐使用的`controllerFor`方法。AFAIK 没有计划在 ember Routes 上弃用 controllerFor。

> I'm curious how I can use "needs" in the below situation where I need the nested / inner route for "records.date" to change the content for the parent "records" route when a date is selected.

对于这个用例，最好坚持使用 controllerFor。通过指定您可以从路由的钩子中`App.RecordsDateController needs = ['records']`访问记录控制器，可以通过这种方式使用需求。`controller.get('controllers.records')``setupController`

> 下面缺少的是在 App.RecordsDateRoute 内部，我需要将“记录”控制器的内容更改为新过滤器（这次按日期），而我似乎所做的一切都只是转储车把模板并且什么都不显示 -即使我尝试`this.controllerFor("records").set('content', App.Record.find(new Date(model.loaded)))`在 RecordsDateRoute 的 setupController 方法中使用简单的东西

```
App.RecordsDateRoute = Ember.Route.extend({
  model: function(params) {
    return App.Date.create({ loaded: params.date_loaded });
  },
  setupController: function(controller, model) {
    var recordsController = this.controllerFor("records");
    // Moved this from model hook, since here you are 'setting up a controller'
    recordsController.set("selected", model.date_loaded);
    // Set query based on current route's model
    var query = { loaded: model.loaded };
    recordsController.set("content", App.Record.find(query));
  }
}); 
```

# asp.net-mvc - ASP.NET 会员配置网站 - 数据库设置（aspnet_ 表） - 指向正确的数据库时出现问题

> ID：15822088
> 
> 赞同：1
> 
> 时间：2013-04-04T21:29:44.460
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-membership, membership

我正在我的 ASP.NET MVC4 应用程序中设置成员资格，因此我打开解决方案，然后从那里打开“项目”菜单下的 ASP.NET 配置网站选项。这将打开 ASP.NET 配置工具来创建/修改/删除用户。我发现当我创建用户时，当我在 web.config 中专门设置为指向由我的网络托管公司托管的不同数据库时，它会在本地数据库中创建用户。我`<remove name="LocalSqlServer" />`删除了 machine.config 中定义的连接。

这是我的应用程序的 web.config 中的连接字符串：

```
<remove name="LocalSqlServer" />
<add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=cp.speedwell.arvixe.com; Initial Catalog=*********; User ID=********; Password=********;" /> 
```

这是我的网络托管公司的数据库结构。如您所见，我已经创建了所有 aspnet_ 表：

![在此处输入图像描述](https://i.stack.imgur.com/oNyY0.jpg)

当我单击 ASP.NET 配置选项卡中的“提供程序”时，这是我的提供程序列表：

![在此处输入图像描述](https://i.stack.imgur.com/dMgWc.jpg)

DefaultMembershipProvider 指向“DefaultConnection”，它是与我的网络托管公司托管的数据库的连接字符串。当我单击“测试”时，它立即返回说：

![在此处输入图像描述](https://i.stack.imgur.com/kdPnK.jpg)

最后，当我单击安全性时，这是我收到的消息（请记住，我从连接字符串中删除了 LocalSqlServer）：

![在此处输入图像描述](https://i.stack.imgur.com/VruV5.jpg)

任何想法我做错了什么？

**更新**

这是我的 web.config 的 Membership、Profile、RoleManager 和 SessionState 部分：

```
<profile defaultProvider="DefaultProfileProvider">
  <providers>
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</profile>
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <add connectionStringName="DefaultConnection" enablePasswordRetrieval="false"
      enablePasswordReset="true" requiresQuestionAndAnswer="false"
      requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6"
      minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
      applicationName="/" name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
  <providers>
    <add connectionStringName="DefaultConnection" applicationName="/"
      name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</roleManager>
<sessionState mode="InProc" customProvider="DefaultSessionProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
  </providers>
</sessionState> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T11:26:57.337

在您的 Web.config 中，只需替换它，

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership> 
```

有了这个，

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <add name="DefaultMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:22:49.027

您不需要删除**LocalSqlServer**而是需要删除**DefaultConnection**。

```
<remove name="DefaultConnection" />
<add name="DefaultConnection" providerName="System.Data.SqlClient" .../> 
```

此外，如果您使用新的[ASP.Net Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)，则不需要使用`aspnet_regsql.exe`它来生成已弃用的表。

`ASP.Net Universal Providers`使用实体框架。

如果您的数据库是新的（没有现有数据），我的建议是删除该数据库并使用 ASP.Net Universal Providers 创建表（无需使用 aspnet_regsql.exe）。

放在`<clear/>`标签之前`add`。

```
<profile defaultProvider="DefaultProfileProvider">
  <providers>
    <clear/>
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
</profile>
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <clear/>
    <add connectionStringName="DefaultConnection" enablePasswordRetrieval="false"
      enablePasswordReset="true" requiresQuestionAndAnswer="false"
      requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6"
      minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
      applicationName="/" name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
  <providers>
    <clear/>
    <add connectionStringName="DefaultConnection" applicationName="/"
      name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</roleManager>
<sessionState mode="InProc" customProvider="DefaultSessionProvider">
  <providers>
    <clear/>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
  </providers>
</sessionState> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T21:39:13.087

您的 web.config 是否通过 connectionStringName 指向该连接字符串以获得成员资格，如下所示：

```
<add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="NameOfConnectionString" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" /> 
```

或者您可能遇到构建配置问题？您是否验证上传的配置文件指向正确的位置？

还可以尝试在您的会员声明之前添加一个明确的：

```
<membership defaultProvider="DefaultMembershipProvider">
<providers>
 <clear />    
<add name="DefaultMembershipProvider" ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T02:22:35.743

事实证明，我的用户/角色/等实际上一直被插入到正确的数据库中——它们被插入到用户表中，而不是我所期望的 aspnet_Users 表中。这是因为我的应用程序被配置为使用 asp.net 通用提供程序。

由于我使用的是 MYWSAT，并且它需要旧的 aspnet 表，因此我删除了通用提供程序，现在它已经解决了这个问题。我收到该消息说它无法建立与数据库的连接的原因正是因为这个。

# sql-server-2008-r2 - 如何更改 CRM 2011 SQL 数据库的排序规则？

> ID：15822089
> 
> 赞同：2
> 
> 时间：2013-04-04T21:29:51.187
> 
> 标签：sql-server-2008-r2, dynamics-crm-2011

我有一组 CRM 2011 数据库，所有这些数据库都安装在运行 SQL 2008 R2 的同一 SQL 服务器上。其中一个数据库的排序规则为`Modern_Spanish_Cl_Al`，而所有其他数据库都设置为`Latin1_General_Cl_Al`。我希望所有这些都设置为 Latin1，所以我想返回并修复西班牙语数据库，使其与其他数据库一样。

如何将数据库排序规则从 更改`Modern_Spanish_Cl_Al`为`Latin1_General_Cl_Al`？

我尝试使用 UI 在数据库级别执行此操作，但收到一百万个错误，例如：

**统计信息“TeamBase.fndx_Sync_VersionNumber”取决于数据库排序规则。如果模式绑定对象依赖于它，则无法更改数据库排序规则。删除对数据库排序规则的依赖项，然后重试该操作。**

我尝试在使用 UI 的同时进入列级别，但收到了不同的错误消息：

**不允许保存更改。您所做的更改需要删除并重新创建以下表...**

我正在测试环境中处理这个问题，所以我愿意进行实验，并且我意识到如果不破坏 CRM，我正在尝试做的事情可能是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T11:40:04.250

您是否尝试使用正确的排序规则创建新数据库

```
CREATE DATABASE DatabaseName COLLATE Latin1_General_Cl_Al; 
```

然后备份 - 将您的数据库以不正确的排序规则恢复到新的数据库中？
如果这可行，您必须使用部署管理器中的“导入组织向导”基于新数据库导入新组织。

**编辑**

在研究了这一点之后，即使在进行备份/恢复时，似乎也很难更改排序规则。
如果要更改数据库级别的排序规则，您唯一的选择似乎是

```
ALTER DATABASE ... COLLATE 
```

但这只会影响新对象。然后，您必须使用 ALTER TABLE 来更改现有表。

此外，由于排序规则指定了数据的排序和存储方式，因此您需要导出所有数据并再次将其引入（例如使用 BCP 和 BULK INSERT）。

除此之外，列的某些属性会阻止其排序规则被更改（例如某些约束和模式绑定函数引用）。如果您确实想更改整个数据库的排序规则，最简单的方法可能是编写数据库脚本并使用正确的排序规则创建一个新数据库，然后将数据洗牌到新数据库中。

# .net - 将旧的 .Net 1.1 Windows 服务升级到 3.5，我需要卸载/重新安装吗？

> ID：15822094
> 
> 赞同：1
> 
> 时间：2013-04-04T21:30:17.103
> 
> 标签：.net, .net-3.5, windows-services, upgrade, .net-1.1

我已在 Visual Studio 中将解决方案从 .Net 1.1 升级到 .Net 3.5，并且重新编译没有错误。旧的 1.1 Windows 服务已安装在 Windows Server 2008 R2 上。请问我需要完全卸载旧服务，还是只用新文件覆盖？在所有旧应用升级到 3.5 后，我们将从服务器卸载 1.1。

仅供参考，是的，我知道 2008R2 上的 1.1 很糟糕，并且没有得到官方支持（不是我的选择）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:44:34.280

我想您有该服务的安装程序。

卸载服务。无需卸载 .NET 1.1。

# go - Go中的索引突然超出范围

> ID：15822096
> 
> 赞同：2
> 
> 时间：2013-04-04T21:30:21.643
> 
> 标签：go

我正在尝试实现一种[算法来查找低于某个限制的所有素数](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。但是，当达到限制时，`46350`我突然收到一条`out of range`错误消息：

```
panic: runtime error: index out of range

goroutine 1 [running]:
main.main()
    /tmpfs/gosandbox-433...fd004/prog.go:16 +0x1a8 
```

任何帮助我指出这里有什么问题都值得赞赏（这个神奇的数字`46350`是从哪里来的？）。

要重现将以下代码放入[谷歌沙箱](http://play.golang.org/)并取消注释`limit++`（或使用[此链接](http://play.golang.org/p/vRCRCPRdp2)）：

```
package main

func main() {
    limit := 46349
    //limit++
    sieved_numbers := make([]bool, limit)
    var j = 0
    var i = 2

    for ; i < limit; i++ {
        if !sieved_numbers[i] {
            for j = i * i; j < limit;j += i {
                sieved_numbers[j] = true
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T21:38:40.987

因为当`i == 46349`,`j = i * i`溢出并且你留下一个负数。循环条件仍然为真，但它超出了数组的边界，因此您会感到恐慌。

在嵌套循环中添加一个`fmt.Println(i, j)`作为第一条语句，并在本地机器上运行它（它会在沙箱上超时），你会看到它发生。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T21:48:43.343

`i*i = 2148229801`当`i==46349`. `2^31`有符号的 32 位整数在变为负数之前只能达到 ~ （32 位 - 符号的 1 位）。具体来说，您的变量将采用 is 的`(2^32)/2 - (46349^2)`值`-746153`。

如果您想执行此计算，请尝试使用 unsigned int 或 int64。

```
package main

// import "fmt"

func main() {
    var limit uint
    limit = 46349
    limit++
    sieved_numbers := make([]bool, limit)
    var j uint = 0
    var i uint = 2

    for ; i < limit; i++ {
        if !sieved_numbers[i] {
            for j = i * i; j < limit; j += i {
                sieved_numbers[j] = true
            }
        }
    }
} 
```

[在操场上试试](http://play.golang.org/p/9uuIifu-UY)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T21:39:35.930

`i * i`产生一个大于 32 位有符号整数的最大大小的数字。

您应该为`j`.

[在维基百科](http://en.wikipedia.org/wiki/Integer_%28computer_science%29)上阅读整数

# angularjs - Can't invoke action on the button inside ng-repeat directive

> ID：15822114
> 
> 赞同：0
> 
> 时间：2013-04-04T21:31:45.187
> 
> 标签：angularjs

I'm new to AngularJS, and while playing with it, i have encountered with the problem.... I have a table like this :

```
...
<tr ng-repeat="line in lines">
<remove-line>
            <input id="line_id" type="hidden" value="{{line.id}}">
            <td id="sn">{{$index+1}}</td>
            <td>{{line.ref}}</td>
            <td>{{line.label}}</td>
            <td class="tva">{{line.tva}}</td>
            <td class="qty">{{line.qty}}</td>
            <td class="unity">{{line.unity}}</td>
            <td class="prix">{{line.prix}}</td>
            <td>{{line.prix*line.qty}}</td>

            <td><button class="btn" id= "remove"><i class="icon-remove"></i> </button></td>
         </remove-line>
        </tr>
... 
```

I want to have some behavior when clicking on the remove button, using custom directive. AngularJS code looks like :

```
angular.module('myApp', []).directive('removeLine',function(){
    var remove = function(){
    ...
        alert ("Oops removed!");
    }

    return {
           restrict: 'E',
           link : function(scope,element, attrs){
               $("#remove").on('click', remove);

           }

    };
}); 
```

But this doesn't work.... Nothing happens when i click on the remove button in the table..... But all this work fine when the button is out of the tag. Why is it so and how make it work?

I have created jsfiddle to illustrate my situation [http://jsfiddle.net/alexrussinov/cs8RP/71/](http://jsfiddle.net/alexrussinov/cs8RP/71/). What is strange that when I test this code on my local machine buttons in the table don't work but two separate under it, work fine. On jsfiddle, neither in the table nor below it, it doesn't work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:46:06.760

您不能在一个页面上拥有多个具有相同 ID 的元素，这就是您对按钮所做的事情。

我认为最简单的解决方案是将`remove()`调用直接粘贴在带有 的按钮标签中`ng-click`，并传入您希望删除的行。这当然假设您的`remove()`方法是`$scope`.

```
<button class="btn" ng-click="remove(line)"><i class="icon-remove"></i></button> 
```

# php - PHP: How to replace existing XML node with XMLWriter

> ID：15822118
> 
> 赞同：2
> 
> 时间：2013-04-04T21:31:54.490
> 
> 标签：php, xml, large-files, xmlreader, xmlwriter

I am editing an XML file and need to populate it with data from a database. DOM works but it is unable to scale to several hundreds of MBs so I am now using XMLReader and XMLWriter which can write the very large XML file. Now, I need to select a node and add children to it but I can't find a method to do it, can someone help me out?

I can find the node I need to add children to by:

```
if ($xmlReader->nodeType == XMLReader::ELEMENT && $xmlReader->name == 'data')
    {
        echo 'data was found';
        $data = $xmlReader->getAttribute('data');

    } 
```

How do I now add more nodes/children to the found node? Again for clarification, this code will read and find the node, so that is done. What is required is how to modify the found node specifically? Is there a way with XMLWriter for which I have not found a method that will do that after reading through the class documentation?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T22:45:31.143

默认扩展节点（您的问题中缺少）

```
$node = $xmlReader->expand(); 
```

不可使用 XMLReader 进行编辑（通过该名称有意义）。但是，如果将其导入新的，则可以使特定的`DOMNode` *可编辑*`DOMDocument`：

```
$doc  = new DOMDocument();
$node = $doc->importNode($node); 
```

然后，您可以执行 DOM 提供的任何 DOM 操作，例如添加文本节点：

```
$textNode = $doc->createTextNode('New Child TextNode added :)');
$node->appendChild($textNode); 
```

如果您更喜欢 SimpleXML 进行操作，您还可以在将节点导入到 SimpleXML*后将*其导入`DOMDocument`：

```
$xml = simplexml_import_dom($node); 
```

上面的一个示例使用了我的[xmlreader-iterators](https://gist.github.com/hakre/5147685)，它只是为我提供了一些更好的接口`XMLReader`：

```
$reader  = new XMLReader();
$reader->open($xmlFile);

$elements = new XMLElementIterator($reader, 'data');
foreach ($elements as $element) 
{
    $node = $element->expand();
    $doc  = new DOMDocument();
    $node = $doc->importNode($node, true);
    $node->appendChild($doc->createTextNode('New Child TextNode added :)'));

    echo $doc->saveXML($node), "\n";
} 
```

使用以下 XML 文档：

```
<xml>
    <data/>
    <boo>
        <blur>
            <data/>
            <data/>
        </blur>
    </boo>
    <data/>
</xml> 
```

上面的小示例代码产生以下输出：

```
<data>New Child TextNode added :)</data>
<data>New Child TextNode added :)</data>
<data>New Child TextNode added :)</data>
<data>New Child TextNode added :)</data> 
```

# sql-server-2012 - Trouble installing SQL Server 2012 Express with Advanced Services

> ID：15822127
> 
> 赞同：1
> 
> 时间：2013-04-04T21:32:26.697
> 
> 标签：sql-server-2012, sql-server-2012-express

Whenever I try to install SQL Server 2012 Express with Advanced Services I am getting this error:

![Error](https://i.stack.imgur.com/MiZJe.png)

I have tried both version (32-bit/64-bit) and re-downloaded multiple times.

How can I solve it ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:17:51.713

检查您的机器上是否安装了 .Net framework 4。如果没有 - 下载并安装它，然后使用 SQL Server 重试。

还可以在 Microsoft 网站上查看有关 .Net framework 4 的此[错误（错误中解释了解决方法）。](http://connect.microsoft.com/VisualStudio/feedback/details/632812/dotnetfx40-full-x86-x64-exe-install-fails#details)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:21:46.740

FWIW，我刚刚`SQLEXPRADV_x86_ENU.exe`从[HERE](http://www.microsoft.com/en-ca/download/details.aspx?id=29062)下载并安装在 vanilla Win7Pro/64 VirtualBox 虚拟机上，没有遇到任何错误。

## 编辑

我还在`SQLEXPRADV_x64_ENU.exe`旧的 Vista 机器上从同一位置安装。SQL Server 安装程序告诉我它需要一些新的 .NET 组件，然后它继续下载并安装它们。我不需要提前手动安装任何东西。

**也可能值得注意：**

我安装成功的两台机器都没有安装防病毒软件。（它们是防火墙后面的开发箱，我不会在它们上面做电子邮件或网上冲浪。）

# php - 向 mySQL 表添加大量复选框

> ID：15822128
> 
> 赞同：1
> 
> 时间：2013-04-04T21:32:27.087
> 
> 标签：php, mysql, checkbox

我目前正在创建一个带有复选框的表单。在我让它工作的那一刻，它只是将最后一个选中的复选框添加到数据库表中。我需要它将所有选定的值添加到表中。我想我可能需要使用内爆，但我不确定把它放在哪里。任何帮助将不胜感激。

***行动计划.php***

```
<h1>My Action Plan</h1>

<?php
if (isset($_GET['success']) && empty($_GET['success'])) {

} else {
if (empty($_POST) === false && empty($errors) === true) {
$actionplan = array(
    'studentid'             => $user_data['studentid'],
    'interests_hobbies'     => $_POST['interests_hobbies'],
);
actionplan($actionplan);
header ('Location: actionplan.php');
exit();

} else if(empty($errors) === false){
echo output_errors($errors);
}
?>

 <form action="" method="post">

    <li>
    <p class="p4">
        What are your interests and hobbies?*
    <center>
    <table border="0">

 <tr>
 <td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Animal Care"/>Animal Care</td>
 <td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Computer Games"/>Computer Games </td>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Gardening"/>Gardening</td>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Internet Browsing"/>Internet Browsing</td>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Sculpting"/>Sculpting</td>
</tr>
<tr>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Bird Watching "/>Bird Watching</td>
  <td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Fishing"/>Fishing</td>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Golfing"/>Golfing </td>
  <td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Painting"/>Painting </td>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Social Networking"/>Social Networking</td>
</tr>
<tr>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Bowling"/>Bowling</td>
 <td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Food Tasting"/>Food Tasting </td>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Gymnastics"/>Gymnastics </td>
 <td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Reading"/>Reading </td>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Watching Movies"/>Watching Movies</td>
</tr>
<tr>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Camping"/>Camping</td>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Football"/>Football </td>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Interior Design"/>Interior Design </td>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Surfing"/>Surfing </td>
<td><p class="p6"><input type="checkbox" name="interests_hobbies" value="Yoga"/>Yoga</td>
</tr>
</table>    

    <li>
    <input type="submit" value="Submit">
    </li>

 </ul>

 </form> 
```

***用户.php***

```
function actionplan($actionplan) {
array_walk($actionplan, 'array_sanitize');

 $fields = '`' . implode('`, `', array_keys($actionplan)) . '`';
 $data = '\'' . implode('\', \'', $actionplan) . '\'';

mysql_query("INSERT INTO `actionplan` ($fields) VALUES ($data)");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:37:06.003

您需要在 PHP 中包含大括号：

```
<input type="checkbox" name="interests_hobbies[]"... 
```

这将为您提供 $_POST 中的数组`$_POST['interests_hobbies']`。请记住，如果选中该复选框，您只会获得一个 POST 值。因此，如果未选中任何复选框，您可能会为 $_POST['interests_hobbies'] 设置一个空值，因此请确保您的代码能够处理该问题。

**更新：** 如果 user.php 是处理您的 POST 的脚本，那么您的表单操作需要是：

```
<form action="users.php" method="post"> 
```

然后在 users.php 的顶部，添加以下代码以将 POST 转储到屏幕：

```
echo "<pre>";var_dump($_POST['interests_hobbies']);echo "</pre>" 
```

（你不需要标签，但我喜欢在 HTML 中使用 var_dump 时使用它们。）

一旦您确认您获得了正确的 POST 值，您就可以从那里继续输出或存储这些值。

# version-control - 根据 CVS 中的分支名称查找前分支标记 - 有可能吗？

> ID：15822129
> 
> 赞同：2
> 
> 时间：2013-04-04T21:32:27.487
> 
> 标签：version-control, tags, branch, cvs

我是存储库的新手，我只有一个 CVS 分支名称。我正在尝试确定该分支的分支点或基点。如何找到 pre-branch 标签？是否可以？

更清楚一点 - 创建分支的过程如下：

```
create base tag:
$ cvs tag BASE

Create branch:
$ cvs tag -r BASE -b BRANCH 
```

以上面的例子，我知道 BRANCH - 我正在尝试找到 BASE。我已经搜索了很长时间，唯一出现的是如何创建 pre-branch 标签和分支（如上所示），但没有出现关于如何找出基于分支的 pre-branch 标签的内容姓名。

谢谢， - 查克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:04:25.573

用命令

`$ cvs status -v {file}`

您将获得`{file}`.

输出将类似于（最后）：

```
Existing tags:
    tag_name_1      (revision 1.1)
    BASE      (revision 1.2)
    BRANCH  (branch 1.2.1) 
```

然后你就会知道你的分支版本是什么，以及之前的版本。在示例中，您知道您的分支名称 (BRANCH)。其修订版为 1.2.1。之前的版本是 1.2，这个版本的标签是 BASE。

也许示例中的修订号与 CVS 不同，但您可以理解。

# javascript - fmt:massage 标签的问题

> ID：15822138
> 
> 赞同：0
> 
> 时间：2013-04-04T21:33:15.680
> 
> 标签：javascript, ajax, jsp, tags

我通过 ajax 更新我的页面元素，但我遇到了困难：如果我在 javascript 中设置它，我的 fmt:message 标记将不起作用。

在 jsp 页面上（工作正常）

```
<div id="div">
  <fmt:message key="search_select_country"/>
</div> 
```

但是在javascript之后（没有）：

```
document.getElementById("div").innerHTML = "<fmt:message key=\"search_select_country\"/>"; 
```

**PS**以这种方式一切正常：

```
document.getElementById("div").innerHTML = "It works"; 
```

**问题**：为什么 fmt:message 不起作用？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:44:32.233

不能在双引号前加反斜杠：

```
document.getElementById("div").innerHTML = "<fmt:message key="search_select_country"/>"; 
```

或者，如果你想让它更清楚

```
document.getElementById("div").innerHTML = "<fmt:message key='search_select_country'/>"; 
```

# java - 如何在不重置之前返回的成员变量的情况下返回成员变量（对象）并重置它？

> ID：15822143
> 
> 赞同：0
> 
> 时间：2013-04-04T21:33:43.267
> 
> 标签：java

你如何返回一个成员变量（包含对象）

*   没有低效复制（在内存中复制）成员变量的对象

然后重置成员变量

*   没有覆盖返回的成员变量的对象，让观察者获得之前的“副本”？

这是一个示例代码：

```
public class SomeClass extends Observable {

  private Object someObject;

  private void whenSomethingHappens() {
    this.setChanged();        
    this.notifyObservers(someObject); // TODO: return the object without copying it in RAM
    this.someObject = new Object(); // TODO: create a new empty object somwhere else in RAM such as it doesn't override the returned object of before
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T21:40:52.237

您已经拥有的代码可以执行您想要的操作。

```
this.notifyObservers(someObject) 
```

这会将 someObject 的引用传递给方法`notifyObservers`。没有创建新对象，因此没有使用额外的内存（除了创建对现有对象的额外引用）。

```
this.someObject = new Object(); 
```

这会在内存中创建一个新对象，然后覆盖引用`someObject`。如果`notifyObservers`存储了对原始对象的引用，则不受这行代码的影响。

# c++ - C++ CreateProcess() 与第一个在同一窗口中运行

> ID：15822144
> 
> 赞同：0
> 
> 时间：2013-04-04T21:33:44.993
> 
> 标签：c++

我正在使用`CreateProcess()`控制台**程序**运行另一个**控制台**程序，但它与第一​​个程序**在同一个窗口**中运行。

```
STARTUPINFO sinfo;
PROCESS_INFORMATION pinfo;

LPSTR commandLine = " \"Cows and Bulls.exe\" test ";

ZeroMemory(&sinfo, sizeof(sinfo));
ZeroMemory(&pinfo, sizeof(pinfo));

if(!CreateProcess(0,commandLine, 0, 0, FALSE, 0, 0, 0, &sinfo, &pinfo))
    cout << "failed"; 
```

这是我的代码。我究竟做错了什么？当我添加一个

```
for(int i=0; true; i++)
{
    cout << i;
    Sleep(1000);
} 
```

到第一个。然后它开始输出下一个数字**中**的数字。

这就像两个程序**合并**了..我不想要那个，我想打开一个**新**窗口。

PS我正在传递参数，是的，但如果我削减`test`结果是一样的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T21:37:53.943

要给子进程一个新的控制台，您需要在调用`CREATE_NEW_CONSOLE`的参数中设置标志。此处的文档：http: [//msdn.microsoft.com/en-gb/library/windows/desktop/ms682425 (v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682425(v=vs.85).aspx)`dwCreationFlags``CreateProcess`

# javascript - 制作一个链接，点击后消失并显示一个 div

> ID：15822149
> 
> 赞同：1
> 
> 时间：2013-04-04T21:34:10.000
> 
> 标签：javascript, html

我将如何使用 javascript 创建一个链接，当单击该链接时，该链接会消失并在其位置出现一个隐藏的 div？

我希望这样的事情：

```
[link]
<div id="hidden" style="hidden">
//hidden content
</div> 
```

当您单击链接时，div 变为“style='show'”，链接消失。

我希望这是有道理的...

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:36:40.127

简单来说，不使用库：

```
<a href="javascript:void(0)" onclick="this.style.display = 'none'; document.getElementById('hidden').style.display = 'block'">Click me</a>
<div id="hidden" style="display: none">...</div> 
```

# regex - 正则表达式只有 2 项

> ID：15822154
> 
> 赞同：-2
> 
> 时间：2013-04-04T21:34:19.693
> 
> 标签：regex

这是我的网络列表

```
mywebsite/
mywebsite/myweb.html
mywebsite/children1
mywebsite/clidrend2
mywebsite/clidrens3
mywebsite/clidrend4
mywebsite/parent1/S2
mywebsite/parent1/S3
mywebsite/parent1/S4 
```

我怎么有

```
 mywebsite/myweb.html
 mywebsite/ 
```

并忽略其他人。

这是我的正则表达式

```
mywebsite/|mywebsite/myweb.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:04:51.910

完成了:-)谢谢大家

```
^mywebsite\/myweb\.html|mywebsite\/$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:36:55.053

您可以尝试以下方法，如果您向我们展示您实际使用的正则表达式，我可能会更准确。

```
(WhateverYouAreUsing){2} 
```

`(...)`是一个组并且`{...}`是一个量词，它将恰好需要您正在寻找的两个匹配项。{1,2} 至少需要一个，最多需要两个，以防只有一个而您仍然想要匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T21:43:36.263

这是你想要的结果吗？

```
mywebsite(/m.*|/) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T21:57:26.513

在您的正则表达式中放置一些括号并转义`.`：

```
(mywebsite/)|(mywebsite/myweb\.html) 
```

或者，对于更一般的东西：

```
(\w+/)|(\w+/\w+\.html) 
```

# matlab - 如何在matlab中找到矩形的长度距离？

> ID：15822155
> 
> 赞同：1
> 
> 时间：2013-04-04T21:34:23.010
> 
> 标签：matlab, shape

这是矩形的二进制图像： [http ://www.google.com/search?tbm=isch&source=mog&hl=en&gl=us&client=ms-rim&tab=wi&q=rectangle%20binary&sa=N](http://www.google.com/search?tbm=isch&source=mog&hl=en&gl=us&client=ms-rim&tab=wi&q=rectangle%20binary&sa=N)

我想从左边（xo）和右边（x1）找到坐标来找到距离长度，还要从坐标底部（yo）和上面（y1）找到宽度。其中：对于长度 » 距离 (X) = |X1-X0| 对于宽度 » 距离(Y) = |Y1-Y0|

衷心感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:43:54.523

对于[此](http://homepages.inf.ed.ac.uk/rbf/HIPR2/images/art5.gif)输入图像，您可以简单地执行以下操作：

```
A = imread('art5.gif');
[y, x] = find(A==1);
my_length = max(x) - min(x) + 1
my_width = max(y) - min(y) + 1 
```

这会给你：

```
my_length =

   171

my_width =

    89 
```

这里因为它是一个逻辑 gif，上面的代码就足够了。但是，如果输入图像在 RGB 空间中，您将需要：

```
A = im2bw(rgb2gray(imread('art5.gif'))); 
```

如果是灰度图像：

```
A = im2bw(imread('art5.gif')); 
```

## 编辑

如果您`'BoundingBox'`通过该`regionprops()`功能使用：

```
A = imread('art5.gif');
s = regionprops(A, 'BoundingBox');
my_length = s.BoundingBox(3)
my_width = s.BoundingBox(4) 
```

这会给你：

```
my_length =

   171

my_width =

    89 
```

# pdf - 将 matplotlib 填充的等高线图保存为 .pdf 或 .eps 时出现别名

> ID：15822159
> 
> 赞同：8
> 
> 时间：2013-04-04T21:34:44.823
> 
> 标签：pdf, matplotlib, eps

我正在使用 matplotlib.pyplot.contourf() 函数生成一个归档的等高线图。函数调用中的参数是：

```
contourf(xvec,xvec,w,levels,cmap=matplotlib.cm.jet) 
```

在哪里

```
xvec = numpy.linspace(-3.,3.,50)
levels = numpy.linspace(-0.01,0.25,100) 
```

w 是我的数据。

生成的绘图在屏幕上看起来相当不错，但是当我使用调用 matplotlib.pyplot.savefig() 保存到 pdf 时，生成的 pdf 有很多别名（我认为就是这样）正在发生。对 savefig 的调用很简单`savefig('filename.pdf')`。我曾尝试使用 dpi 参数，但没有运气。呼叫`matplotlib.get_backend()`吐出“TkAgg”。

我将附上一个保存为 pdf 的图，与保存为 png 的图相比（类似于屏幕上的样子）来演示问题：

没有别名的png：[https ://dl.dropbox.com/u/6042643/wigner_g0.17.png](https://dl.dropbox.com/u/6042643/wigner_g0.17.png)

带别名的pdf：[https ://dl.dropbox.com/u/6042643/wigner_g0.17.pdf](https://dl.dropbox.com/u/6042643/wigner_g0.17.pdf)

请让我知道我是否可以提供任何其他详细信息来帮助您回答。我应该提到，保存为 .eps 会产生与保存为 pdf 类似的不良结果。但是pdf更清楚地显示了问题。我的目标是最终制作出高质量的 .eps 文件，我可以将其附加到乳胶文档中，以作为科学论文发表。如果我能找到一种能提供令人满意结果的方法，我会很高兴能以某种格式保存，然后转换它。

最好的，

阿恩

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-10-02T16:32:54.373

在使用了@pelson 的有用答案一段时间后，我终于找到了解决这个长期存在的问题（目前在 Matplotlib 3 中）的适当解决方案，它不需要多次调用轮廓或光栅化图形。

[我在这里](https://stackoverflow.com/a/32911283/)参考我的原始答案以获得更广泛的解释和示例。

总之，解决方案由以下几行组成：

```
cnt = plt.contourf(x, y, z)

for c in cnt.collections:
    c.set_edgecolor("face")

plt.savefig('test.pdf') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T10:01:16.807

我不知道pdf中的轮廓是如此糟糕。你是对的，我认为轮廓正在被 matplotlib 之外的 PDF 渲染器消除锯齿。正是出于这个原因，我认为您需要特别小心使用哪个应用程序来查看生成的 PDF——我见过的最好的行为是使用 GIMP，但我相信还有很多其他的查看器表现良好。

为了解决这个问题（使用 GIMP 查看 PDF 时），我能够“光栅化”使用 matplotlib 生成的轮廓以避免丑陋的白线问题：

```
import matplotlib.pyplot as plt
import numpy as np

xs, ys = np.mgrid[0:30, 0:40]
data = (xs - 15) ** 2 + (ys - 20) ** 2 + (np.sin(ys) + 10) ** 2

cs = plt.contourf(xs, ys, data, 60, cmap='jet')

# Rasterize the contour collections
for c in cs.collections:
    c.set_rasterized(True)

plt.savefig('test.pdf') 
```

这产生了一个等高线图，它没有表现出你所展示的问题。

另一种可能更好的方法是通过在轮廓下方放置彩色线条来欺骗抗锯齿。

```
import matplotlib.pyplot as plt
import numpy as np

xs, ys = np.mgrid[0:30, 0:40]
data = (xs - 15) ** 2 + (ys - 20) ** 2 + (np.sin(ys) + 10) ** 2

# contour the plot first to remove any AA artifacts
plt.contour(xs, ys, data, 60, cmap='jet', lw=0.1)
cs = plt.contourf(xs, ys, data, 60, cmap='jet')

plt.savefig('test.pdf') 
```

我应该注意，如果我将图形保存为“.ps”而不是“.pdf”，我看不到这些问题——也许这是第三种选择。

希望这可以帮助您使论文看起来完全符合您的要求。

# php - 强制 Laravel 忽略异常

> ID：15822161
> 
> 赞同：12
> 
> 时间：2013-04-04T21:34:52.963
> 
> 标签：php, laravel, laravel-4

在下面的代码中，PHP 应该捕获异常并继续执行而不抛出任何错误/异常页面。

**问：**但是在 Laravel 4 中，出现了异常页面。设置`app.debug`为`false`仅隐藏堆栈跟踪。你如何强制 Laravel 忽略并继续执行？

```
 try
  {
      SomeOperation();
  }
  catch (SomeException $e)
  {
      // do nothing... php will ignore and continue    
  } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-05T18:56:58.857

这可能是一个命名空间问题。

您是否尝试在异常前加上斜线？

```
catch(\Exception $e)
{
   Log::error($e->getMessage());
} 
```

# vb.net - 无法从 Azure 虚拟机调用 google api

> ID：15822162
> 
> 赞同：0
> 
> 时间：2013-04-04T21:35:08.553
> 
> 标签：vb.net, google-api, azure-vm-role

```
Public Class Geocode
Public Structure GeocodeResult
    Public Latitude As String
    Public Longitude As String
    Public Result As String
End Structure

Public Shared Function GetGeocode(ByVal Address As String) As GeocodeResult
    Dim strLat As String = ""
    Dim strLon As String = ""
    Dim strResult As String = ""
    Dim oXmlDoc As Object
    GetGeocode.Latitude = ""
    GetGeocode.Longitude = ""
    GetGeocode.Result = ""
    Try
        Dim baseURL As String = "https://maps.google.com/maps/api/geocode/xml?sensor=false&address=" & Address
        baseURL = Replace(baseURL, " ", "+")
        oXmlDoc = CreateObject("Microsoft.XMLDOM")
        With oXmlDoc
            .Async = False
            If .Load(baseURL) And Not .selectSingleNode("GeocodeResponse/status") Is Nothing Then
                GetGeocode.Result = .selectSingleNode("GeocodeResponse/status").Text
                If Not .selectSingleNode("GeocodeResponse/result") Is Nothing Then
                    GetGeocode.Latitude = .selectSingleNode("//location/lat").Text
                    GetGeocode.Longitude = .selectSingleNode("//location/lng").Text
                    Return GetGeocode
                End If
            End If
        End With
        oXmlDoc = Nothing
        Return GetGeocode
        Exit Function
    Catch ex As Exception
        Throw (ex)
    End Try
    Return GetGeocode
End Function
End Class 
```

好的，在我们将它移到 Azure VM 之前，这在生产、质量保证和 localhost 中都可以正常工作。我们可以从 VM 使用浏览器访问[https://maps.google.com/maps/api/geocode/xml?sensor=false&address=](https://maps.google.com/maps/api/geocode/xml?sensor=false&address=) URL。但是当另一个页面调用 getgeocode 函数时，结果总是空白，这意味着其余的 api 调用以某种方式失败。

我不认为它是域密钥限制，因为 a）我在此调用中没有使用密钥，b）我将我的 google api 密钥设置为任何域来测试它。编辑：我尝试过使用另一个具有相同结果的服务。它适用于开发人员和本地计算机，但不适用于 Azure VM。我不明白的是如何通过浏览器访问 REST api，但从代码调用时什么也不返回。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:29:02.713

显式创建 Web 客户端并将其加载到 xml 文档中为我解决了这个问题。

```
Imports Microsoft.VisualBasic
Imports System.Xml
Imports System.Linq
Imports System.Xml.Linq
Imports System.Net
Imports System.IO

Public Class Geocode
    Public Structure GeocodeResult
        Public Latitude As String
        Public Longitude As String
        Public Result As String
    End Structure

    Public Shared Function GetGeocode(ByVal Address As String) As GeocodeResult
        Dim oXmlDoc As Object
        GetGeocode.Latitude = ""
        GetGeocode.Longitude = ""
        GetGeocode.Result = ""
        Try
            Dim baseURL As String = "https://maps.google.com/maps/api/geocode/xml?sensor=false&address=" & Address
            baseURL = Replace(baseURL, " ", "+")
            Using WC As New WebClient()
                oXmlDoc = CreateObject("Microsoft.XMLDOM")
                With oXmlDoc
                    .Async = False
                    If .Load(WC.DownloadData(baseURL)) And Not .selectSingleNode("GeocodeResponse/status") Is Nothing Then
                        GetGeocode.Result = .selectSingleNode("GeocodeResponse/status").Text
                        If Not .selectSingleNode("GeocodeResponse/result") Is Nothing Then
                            GetGeocode.Latitude = .selectSingleNode("//location/lat").Text
                            GetGeocode.Longitude = .selectSingleNode("//location/lng").Text
                            Return GetGeocode
                        End If
                    End If
                End With
                oXmlDoc = Nothing
            End Using

            Return GetGeocode
            Exit Function
        Catch ex As Exception
            Throw (ex)
        End Try
        Return GetGeocode
    End Function
End Class 
```

# winforms - 更改 Windows 中另一个进程的任务栏图标

> ID：15822164
> 
> 赞同：3
> 
> 时间：2013-04-04T21:35:15.070
> 
> 标签：winforms, winapi, windows-shell

我有 2 个在 Windows 7 中运行的应用程序。第一个应用程序是启动第二个应用程序的 C++ 引导程序。我想在运行时从第一个应用程序以编程方式更改 Windows 任务栏（屏幕底部的栏）中的第二个应用程序的图标。

这可能吗？

有没有办法创建第二个进程，使其与第一个进程共享一个公共任务栏图标？

我正在尝试为 ROBLOX 游戏创建一个独立的可再发行组件（这里的第二个应用是游戏玩家，我想加载一个特定于游戏的图标，否则用户体验会令人困惑）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:39:35.100

您所要求的通常是不可能的。只有拥有任务栏按钮的进程才能操作它。一个进程不能操作另一个进程的任务栏按钮。您的引导程序可能需要注入在第二个进程内部运行的代码，例如使用 CreateRemoteThread()

# django - 在保存期间更新其他字段

> ID：15822166
> 
> 赞同：-1
> 
> 时间：2013-04-04T21:35:19.633
> 
> 标签：django, django-models, django-signals

我已经为 UserProfile 模型声明了一个信号，它更新了一些其他字段。存储的数据来自网络服务。

```
 post_save.connect(user_profile_update, sender=UserProfile) 
```

在 user_profile_update 中，我这样做了：

```
 profile = get_object_or_404(UserProfile, user=instance) 
 profile.province = xml.duzeltilmisil #this comes from a web service
 profile.save() 
```

我得到了这个错误：

```
 'NoneType' object is not callable
 profile.save() 
```

还有一个错误，但我所做的也是递归的。当我更新 UserProfile 时，它​​应该再次触发 user_profile_update。

在保存期间是否有任何合理的方法来更新这些字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:48:53.057

由于您正在解析地址，因此在视图中处理解析是一种更好的方法，而不是作为信号。

信号通常用于对其他模型的小更新。.

因此，您的代码可以是：

```
profile = get_object_or_404(UserProfile, user=instance) 
profile.province = xml.duzeltilmisil #this comes from a web service

//parse the address here, and then save the models
profile.save() 
```

# google-drive-api - 在 Files#list 请求中使用查询字符串时忽略 Google Drive maxResults

> ID：15822170
> 
> 赞同：0
> 
> 时间：2013-04-04T21:35:48.783
> 
> 标签：google-drive-api

我正在尝试检索某个文件夹的文件并对结果进行分页。

查询如下所示：

*   请求：文件#List
*   最大结果：1
*   q：父母中的“根”

如果我的根文件夹中有 2 个文档，我将收到 2 个结果而不是 1 个。不会有任何*nextPageToken*或*nextLink*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:34:52.510

我刚刚尝试过，无法重现您报告的行为。我的查询是：

```
https://www.googleapis.com/drive/v2/files?q='root'+in+parents&maxResults=2 
```

我得到了 2 个文件资源，同时也得到了 nextPageToken 和 nextLink。

# amazon-web-services - 如何通过 IAM 共享具有 MFA 保护的 Amazon S3 内容？

> ID：15822177
> 
> 赞同：2
> 
> 时间：2013-04-04T21:36:18.353
> 
> 标签：amazon-web-services, amazon-s3, amazon-iam

我喜欢与成员分享我的[Amazon S3](http://aws.amazon.com/s3/)私有内容。最初，我通过创建[AWS Identity and Access Management (IAM)](http://aws.amazon.com/iam/)用户账户来做到这一点，但人们开始传递这些凭证。

所以我发现我可以向通过 IAM 创建的每个用户账户分发一个[AWS 多重身份验证 (MFA)令牌/密钥卡。](http://aws.amazon.com/mfa/)但是，测试显示我仍然可以下载文件，S3 不会询问令牌/离岸生成的 6 位数字。

我在这里想念什么？或者，如果我走错了路，请提出一种检测/防止成员共享这些凭据的方法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:15:30.940

您需要为您尝试保护的资源（即您的案例中的 S3 内容）专门[配置受 MFA 保护的 API 访问，请参阅有关](http://docs.aws.amazon.com/IAM/latest/UserGuide/MFAProtectedAPI.html)[受 MFA 保护的 API 访问](http://aws.typepad.com/aws/2012/07/new-aws-feature-mfa-protected-api-access.html)的介绍性博客文章，以了解此功能的工作原理。

幸运的是，有一些示例可用于[添加存储桶策略以要求 MFA 身份验证](http://docs.aws.amazon.com/AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html#AccessPolicyLanguage_UseCase7_s3)- 请阅读该部分以了解详细信息，但第一个示例已经解决了您的用例（第三个示例通过添加条件来*限制其持续时间） aws:MultiFactorAuthAge 密钥有效*）：

```
{
   "Version": "2008-10-17",
   "Id": "123",
   "Statement": [
      {
         "Sid": "",
         "Effect": "Deny",
         "Principal": { "AWS": "*" },
         "Action": "s3:**",
         "Resource": "arn:aws:s3:::examplebucket/taxdocuments/*",
         "Condition": { "Null": { "aws:MultiFactorAuthAge": true }}
      }
   ]
} 
```

# java - 如何在面向对象编程（最好在 Java 中）中使用 if 语句？

> ID：15822180
> 
> 赞同：-6
> 
> 时间：2013-04-04T21:36:25.730
> 
> 标签：java, oop, if-statement

如何在面向对象编程（最好在 Java 中）中使用 if 语句？

```
import java.util.*;
class item 
{
    Random rand = new Random();
    int chance = rand.nextInt(20);
    String name;
    double price;
    {
        if (chance <= 20){
             price = price * 0.70 ;
        }
    }
}

public class tutorial{
public static void main (String[] args)
{   

    item i1 = new item();   
    item i2 = new item();

    i1.name = "Soda";
    i1.price = 5;

    i2.name = "Candy";
    i2.price = 2;

    System.out.println ("Name : " + i1.name + 
            " Price : " + i1.price );
    System.out.println ("Name : " + i2.name + 
            " Price : " + i2.price );
}
} 
```

我想要：

*   在项目类中创建一个随机生成器
*   item 类中的随机生成器应该会影响主教程类中的价格
*   如果机会变量在 1 到 20 之间，则将价格削减 30%
*   它必须与项目 1 和 2 一起使用

**注意：**我不想在教程课程中这样做，因为我必须为每个代码执行 if 语句。希望这会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:47:05.407

我的心理调试感觉说你希望你的`item`类有某种构造函数

```
class item 
{

    static Random rand = new Random();

    String name;
    double price;

    public item(String nameIn, double priceIn)
    {

        this.name = nameIn;

        int chance = rand.nextInt(20);    
        if (chance <= 20)
        {
            this.price = priceIn * 0.70 ;
        }
    }
} 
```

然后你在你的主要创建它

```
item i1 = new item("Soda", 5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:00:55.643

首先，由于您的随机设置，这种方法总是正确的。整数机会 = rand.nextInt(20); 总是会给你一个 0-19 之间的数字，所以你不需要一个 if。当您有两个或更多可能的结果或应该处理某些输入时，您通常使用 if 语句。假设根据您购买的克数，您有两种产品价格 P1 和 P2。如果超过 400 克，您将获得 P2，如果少于 400 克，您将获得 P1。if 方法的示例可能是这样的。

```
 double p1 = 12;
    double p2 = 10;

    public double findPrice(int grams){
        double price = 0;
        if(grams >= 400){
            price = price * p2;
        } else {
            price = price * p1;
        }
        return price;
    } 
```

在这里，您可以使用基于一个变量的值的 if 语句。希望这可以帮助！

# jms - 在 WAS 上设置队列时的目标客户端选项

> ID：15822186
> 
> 赞同：2
> 
> 时间：2013-04-04T21:36:41.753
> 
> 标签：jms, websphere, ibm-mq

在 WAS 控制台的 Queues 页面上，有一个名为“Target Client”的选项，选项为 MQ 和 JMS。现在我理解的 MQ 是 websphere MQ，但是 JMS 是什么？Websphere MQ 以外的任何 JMS 提供程序？因为在我的情况下，目标实际上是 websphere MQ，但我在这里选择了 JMS，它仍然可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:30:49.203

目标客户端定义接收应用程序将如何解释消息。如果您选择 MQ，则将添加带有 MQ 特定信息的 RFH2 标头，否则将添加 JMS 信息（jms_bytes、jms_text 等）。

[IBM 有一些关于它的信息](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=/com.ibm.mq.csqzaw.doc/jm10910_.htm)

# wcf - How to call Sharepoint web services with Forms Authentication from a console application using "service reference"

> ID：15822189
> 
> 赞同：1
> 
> 时间：2013-04-04T21:36:57.087
> 
> 标签：wcf, .net-4.0, sharepoint-2007, asmx, console-application

My question is somewhat related the post here [Accessing SharePoint content (list) from a WCF service](https://stackoverflow.com/questions/5027192/accessing-sharepoint-content-list-from-a-wcf-service/5027229)

Basically, I know how to get the web service calls working with .Net 2.0 "Web Reference", as most examples I found are based on this. For instance, see [http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopmentlegacy/thread/21867e28-75d5-42c8-850b-bfb5c5894eed](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopmentlegacy/thread/21867e28-75d5-42c8-850b-bfb5c5894eed)

and [http://sharepoint.infoyen.com/2012/02/23/upload-file-in-document-library-with-metadata-inculding-lookup-field-using-sharepoint-web-service/](http://sharepoint.infoyen.com/2012/02/23/upload-file-in-document-library-with-metadata-inculding-lookup-field-using-sharepoint-web-service/)

I just don't know how to do this by using newer WCF "Service Reference", particularly when it involves forms authentication for the Sharepoint Site in question.

Most examples on this topic, including an excellent one by Steve B here - [http://blog.hand-net.com/sharepoint/2010-04-14-sharepoint-2007-et-wcf.htm](http://blog.hand-net.com/sharepoint/2010-04-14-sharepoint-2007-et-wcf.htm) describe an approach with NTLM authentication.

So in summary, can you please show me how to configure the end points, bindings etc to access the Sharepoint's ASMX web services from a console application, using "Service Reference" ?

EDIT: The .Net 2.0 approach described here: [http://www.codeproject.com/Articles/24244/Access-a-Forms-Based-SharePoint-Site-s-Web-Service](http://www.codeproject.com/Articles/24244/Access-a-Forms-Based-SharePoint-Site-s-Web-Service) worked for me and I essentially am lookin to do the same but with WCF based client application.

# javascript - FB.login not calling callback if cancel is selected

> ID：15822190
> 
> 赞同：2
> 
> 时间：2013-04-04T21:36:59.723
> 
> 标签：javascript, facebook-javascript-sdk, facebook-login

I'm trying to get the users permission if they haven't granted the publish_stream permission.

I have this function:

```
 function AskPermission()
        {
            ResizeUnity(0);

            FB.login(function(response)
            {
                alert("Hit");
                if (response.authResponse) 
                {
                    alert('Granted!');
                    GetUnity().SendMessage("POST", "POST", "Granted");
                }
                else 
                {
                    alert('User cancelled login or did not fully authorize.');
                    GetUnity().SendMessage("POST", "POST", "");
                }

                ResizeUnity(1);
            }, {scope: 'publish_stream'});  
        } 
```

When it's called a small window pops up asking .... would like to access your public profile and friends list. There's 2 buttons Okay and cancel. When Okay is pressed it goes on to another screen asking .... would like to post to your friends on your behalf. Again 2 button, Okay and Skip.

When I press the first skip denying all permissions it doesn't return anything. the alert("Hit"); is not called.

When I do press Okay on the first prompt it goes on to the second popup and asks about the posting on behalf. I press Okay, the alert 'Granted' is called.

When I press skip the alert 'Granted' is also called even though I hit skip.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:09:04.330

```
FB.getLoginStatus(function(response) {    
    if (response.status === 'connected') {
       // the user is logged in and has authenticated your
       // app, and response.authResponse supplies
       // the user's ID, a valid access token, a signed
       // request, and the time the access token 
       // and signed request each expire
      var uid = response.authResponse.userID;
      var accessToken = response.authResponse.accessToken;
    } else if (response.status === 'not_authorized'){
        // the user is logged in to Facebook, 
        // but has not authenticated your app
    } else {
        // the user isn't logged in to Facebook.
  }
}); 
```

使用此 Facebook 功能检查用户是否授予权限。

如果用户不允许您的应用，您可以调用相同的功能。如需更多代码方面的帮助，我可以为您提供帮助。:)

有关更多信息，请参阅：[Fb.getLoginStatus](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T15:47:39.713

可能发生这种情况是因为您试图在弹出窗口中打开 Facebook 登录，但它在您调用 fb.login 的同一窗口中打开。当您单击取消时，Facebook 会尝试关闭窗口，但由于它不是由 facebook 打开的，因此窗口不会关闭。它从不尝试跟踪回调 url。

尝试在配置 {display: "touch"} 或 {display: "page"} 中使用，如下所示：

```
 function AskPermission()
    {ResizeUnity(0);

        FB.login(function(response)
        {
            alert("Hit");
            if (response.authResponse) 
            {
                alert('Granted!');
                GetUnity().SendMessage("POST", "POST", "Granted");
            }
            else 
            {
                alert('User cancelled login or did not fully authorize.');
                GetUnity().SendMessage("POST", "POST", "");
            }

            ResizeUnity(1);
        }, {scope: 'publish_stream', display: 'page'});  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:46:35.267

是否有理由不要求在一个屏幕本身中获得所需的所有权限。但是，请记住，根据 facebook 文档，开始时要求很少的权限，然后在旅途中不断增加权限请求。

[https://developers.facebook.com/docs/reference/login/#permissions](https://developers.facebook.com/docs/reference/login/#permissions)

试试这个代码

```
FB.login(function(response) {
   if (response.authResponse) {
     var access_token =   FB.getAuthResponse()['accessToken'];
     console.log('Access Token = '+ access_token);
     FB.api('/me', function(response) {
     console.log('Good to see you, ' + response.name + '.');
     });
   } else {
     console.log('User cancelled login or did not fully authorize.');
   }
 }, {scope: ''}); 
```

希望有帮助

# jquery - How to slice a String Object and return the new value in jQuery?

> ID：15822195
> 
> 赞同：1
> 
> 时间：2013-04-04T21:37:20.627
> 
> 标签：jquery, string, gallery, src, slice

So basically I have a gallery script in jQuery. When a user clicks on a thumbnail image the image attribute src is then transferred to the main gallery img element. However I now want the user to be able to click a next/prev button and iterate through all the images in the folder. I named them all img0.jpg, img1.jpg and so on. I was thinking I could simply get the current img src via "attr()" and "slice()" then increment the number in the img'0', img'1' etc... with a variable. Heres my code. I hope you guys can understand!

```
$("#next").click(function () {
   var i = 0;
   var sliceImg = $("#gallerycover").attr("src").slice('0', String.length - 5);
   $("#gallerycover").attr("src", sliceImg + i++ +."jpg");
}); 
```

```
<div id="gallerycontainer">
  <img id="gallery" src="" />
</div>

<div id="thumbcontainer">
  <div id="box4"><img class="thumb" src="" /></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:42:00.280

尝试替换以下代码：

```
var sliceImg = $("#gallerycover").attr("src").slice('0', String.length - 5);
$("#gallerycover").attr("src", sliceImg + i++ +."jpg"); 
```

对于这个：

```
var src = $("#gallerycover").attr("src");
var idx = src.indexOf('img');
var sliceImg = src.slice(idx+3, src.length - 4);
$("#gallerycover").attr("src", (parseInt(sliceImg, 10) + 1) + ".jpg"); 
```

查看[**工作演示**](http://tinker.io/e6f7b)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:44:18.710

```
var myInt = 0;
var myInt++;

var sliceImg = $("#gallerycover").attr("src").replace(/\d+/, myInt);

$("#gallerycover").attr("src", sliceImg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T21:42:09.310

您可以使用正则表达式来拆分图像源字符串，或者您可以通过向缩略图添加一个属性来让滑块更好地跟踪单个幻灯片，您的下一个/上一个函数可以检查和增加，而无需解析字符串（将来可能会改变）。

# scala - IntelliJ IDEA scala 类型信息

> ID：15822197
> 
> 赞同：12
> 
> 时间：2013-04-04T21:37:30.813
> 
> 标签：scala, intellij-idea

Eclipse scala 插件有一个非常好的信息。可以将鼠标悬停在几乎任何东西上，无论是函数定义、val、var、函数调用等，并获取类型信息。这对我确保类型兼容性非常有用，尤其是在我尝试新事物时。

IntelliJ Idea 12.1（此评论的最新版本）中是否有类似的功能？

我能找到的最接近的是类型信息设置。在 Mac OS 10.7.5 上，默认键绑定甚至对我不起作用。即使经过调整，它也不能像在 Eclipse 中那样普遍工作，它显示了几乎所有东西的类型。有没有人设法让它工作？我的理想设置是在悬停时输入信息，就像在 Eclipse 中一样。

我听说过有关 Scala 的 IntelliJ IDE 的好消息，但到目前为止，Eclipse Scala 插件胜出。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-04-10T13:53:57.810

To enable on mouse hover type information go to Settings->Scala and select the "Show type info on mouse motion with delay" checkbox.

![enter image description here](https://i.stack.imgur.com/6gFHI.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-04T21:43:52.797

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-04T21:45:02.677

Not exactly what you're looking for but close enough - you can press alt + '=' when the cursor inside the function name, val name etc., and you will get popup with the type.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-14T20:42:30.130

Intellij IDEA 14 (OSX) has this option in the Preferences -> Languages and Frameworks -> Scala Compile Server menu option.

Ensure that the **Show type info on mouse motion with delay** option is **ticked**.

![enter image description here](https://i.stack.imgur.com/MDuCF.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-21T22:12:14.733

I'm using Idea 13.0.2 with scala plugin 0.30.387 -- there is an option to display type info on hover just like eclipse. To turn it on, see

Preferences -> Scala

# sql - 获取 Top N Distinct 值的所有记录

> ID：15822199
> 
> 赞同：2
> 
> 时间：2013-04-04T21:37:41.180
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我有一个`BookAuthor`如下表（SQL Server 2008 R2 Ent）：

```
BookID  AuthorID
------  --------
43      676
43      76
43      354
71      89
71      76
99      71
64      50
64      39
64      354 
```

我想获取前 2 个不同 BookID 的所有记录。因此，预期输出如下：

```
 BookID  AuthorID
    ------  --------
    43      676
    43      76
    43      354
    71      89
    71      76 
```

我尝试了下面最简单的查询，它只返回 2 行。

```
Select top 2 * from BookAuthor order by BookID ASC 
```

那么，我该如何继续呢？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T21:43:56.750

您可以使用以下内容获取`TOP 2 DISTINCT`BookId：

```
select t1.bookid, t1.authorid
from BookAuthor t1
inner join
(
  select distinct top 2 bookid
  from BookAuthor
  order by bookid
) t2
  on t1.bookid = t2.bookid 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/0fc4e/1)

您说您希望返回 ID 为 43、71 的书籍，因为它们是前 2 个书籍 ID，但表中的数据并不是天生有序的。除非您有另一列可以按该顺序获取行，否则如果您按 bookid 升序排序，则您将返回 43、64。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:58:48.330

下面的查询呢：

```
Select * from BookAuthor where BookID in(
select Distinct top 2 BookID from BookAuthor order by BookID asc) 
```

它对我来说很好用

# ms-access - Convert Access 2010 accdb to 2007 accdb

> ID：15822201
> 
> 赞同：2
> 
> 时间：2013-04-04T21:37:50.273
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

I'm trying to convert an accdb file from use in Access 2010 to Access 2007\. I first tried opening the file with Access 2007 and I get the error `Unrecognized database format`. I was able to get my backend to open in 2007 by removing the `MSysResources` table (which uses the new attachment datatype) but the same technique has not worked with my front end.

My front end does use a webbrowser control (which Microsoft claims won't work but also won't stop the file form being opened). I thought I'd better import one form at a time to see where the error is. While in a new, blank 2007 file I tried to use `External Data`>`Access` to import one form (a very simple form, a button, two text boxes). Same error as opening the whole file. I tried having 2010 open at the same time as 2007 and copy/pasting the form over. Same error. `Unrecognized database format`.

I then try to export the form using `Application.SaveAsText` in 2010 and import using `Application.LoadFromText` in 2007\. There were errors importing but at least this method generates an error log. The `error.txt` file has issue with the header line `PublishOption =1`. After I remove that I continually get errors regarding theme settings. I remove every line it has a problem with which are from there on all theme related (`HoverForeThemeColorIndex`, `AlternateBackThemeColorIndex`...). I never did get rid of enough of these to successfully import the form though.

Where am I going wrong? If, like I suspect, I cannot use a theme generated in 2010 in 2007, how can I remove all these references from all my forms? Is this actually the problem? How can I more smoothly move back to a 2007 file?

**Edit:** It turns out the client is on Office 2007 SP2\. I'm going to update my development machine and try all this again. I was not using nay service packs originally.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-17T20:44:51.087

根据微软支持文章

[Access 2010 和 Access 2007 之间的向后兼容性](http://msdn.microsoft.com/library/office/dn602608%28v=office.14%29.aspx)

Access 2010 数据库可以通过以下方式恢复为“Access 2007 格式”

1.  从数据库中删除所有 Access_2010 特定的功能（详细信息在文章中），
2.  创建一个新的“空白数据库”（不是“空白 Web 数据库”），以及
3.  在 Access 2010 中使用`External Data > Import`将所有对象（表、表单等）从以前的数据库导入到新的（空的）数据库中。

必须删除的功能列表包括一些对于原始 Access 2010 数据库的随意检查可能不会立即显而易见的功能，例如

*   使用新的或更新的数据库排序顺序，以及
*   使用“Access 2010 加密合规性”。

# r - 在 NA 上传播值

> ID：15822209
> 
> 赞同：2
> 
> 时间：2013-04-04T21:38:09.663
> 
> 标签：r, split, dataframe

我有一个`data.frame`我想分成一个列表。

我有：

```
data.frame(value=c(1:4,NA,11:12,NA,21:23,NA),
           key=as.factor(c(NA,NA,NA,NA,"a",NA,NA,"b",NA,NA,NA,"c")))
   value  key
1      1 <NA>
2      2 <NA>
3      3 <NA>
4      4 <NA>
5     NA    a
6     11 <NA>
7     12 <NA>
8     NA    b
9     21 <NA>
10    22 <NA>
11    23 <NA>
12    NA    c 
```

我想：

```
list(a=data.frame(value=1:4), 
     b=data.frame(value=11:12),
     c=data.frame(value=21:23))
$a
  value
1     1
2     2
3     3
4     4

$b
  value
1    11
2    12

$c
  value
1    21
2    22
3    23 
```

`split`如果我可以将列`key`转换为

```
[1] a a a a a b b b c c c c
Levels: a b c 
```

但是，唉，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:05:16.277

如果您愿意，这将为您提供平面矢量`split`：

```
library(zoo)
na.locf(f$key, fromLast = TRUE)

[1] a a a a a b b b c c c c
Levels: a b c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T21:50:28.300

这是我的解决方案：

```
> f <- data.frame(value=c(1:4,NA,11:12,NA,21:23,NA),
                  key=as.factor(c(NA,NA,NA,NA,"a",NA,NA,"b",NA,NA,NA,"c")))
> keys <- f$key
> good <- !is.na(keys)
> f$key <- NULL
> l <- split(f,head(cumsum(c(0,good)),-1))
> names(l) <- keys[good]
> lapply(l, function(df) head(df,-1))
$a
  value
1     1
2     2
3     3
4     4

$b
  value
6    11
7    12

$c
   value
9     21
10    22
11    23 
```

有没有更好的办法？

具体来说，我不喜欢的是

1.  `head`++组合`cumsum`很丑_`c`
2.  +组合很难`lapply`看`head`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T23:05:56.580

这也很脏，但如果你不介意丑陋的循环，它可以工作

```
> dat <- data.frame(value=c(1:4,NA,11:12,NA,21:23,NA),key=as.factor(c(NA,NA,NA,NA,"a",NA,NA,"b",NA,NA,NA,"c")))
> 
> labels <- which(!is.na(dat$key))
> j <- 1
> for(i in labels){
+   dat$key[j:i] <- dat$key[i]
+   j = i + 1
+ }
> 
> split(dat$value[!is.na(dat$value)],as.factor(dat$key[-labels]))
$a
[1] 1 2 3 4

$b
[1] 11 12

$c
[1] 21 22 23 
```

# php - mthaml Illegal nesting: nesting within echo is illegal

> ID：15822211
> 
> 赞同：2
> 
> 时间：2013-04-04T21:38:13.500
> 
> 标签：php, haml

I need to execute the following haml

```
 = form_open('login', array('method' => 'POST'))
    %p
      %label{:for => "password"} Password
      = form_input($login_password)
    %p
      %input{:name => "submit", :type => "submit", :value => "Login"}
  = form_close() 
```

But I keep getting

```
with message 'Illegal nesting: nesting within echo is illegal in 
```

I understand the error and that it's nested but how do i fix it? It worked fine with the other php library called phamlp

# java - Import a project to STS iMac

> ID：15822212
> 
> 赞同：0
> 
> 时间：2013-04-04T21:38:19.780
> 
> 标签：java, spring

I recently purchased an iMac and installed Springsource Tool Suite. I am currently trying to import a project. If I import the project as 'an existing Java project', all the files import but I have build path errors and a couple of other errors that I have not been able to resolve. I also tried creating a new java project and importing the file system of the project I want to import, saying no to all when prompted with the Overwrite '.classpath' message. The result of this is nothing gets imported. I tried saying 'yes to all' and the result is the same. I am relatively new to java. Any assistance would greatly be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:21:35.430

对于大多数 spring 项目，您应该将它们作为 maven 项目导入。

文件 -> 导入 -> Maven -> 现有的 Maven 项目

# sql - 在 Visual Studio 2012 中使用内置 SQL 文件

> ID：15822217
> 
> 赞同：1
> 
> 时间：2013-04-04T21:38:46.527
> 
> 标签：sql, visual-studio-2012, database-connection, sql-server-2012

我正在使用 Visual Studio 2012 创建一个 Windows 应用程序，并使用其内置的 SQL Server，我已经创建了数据库和表，但无法访问数据库。我正在尝试使用插入查询在表中插入值，但它显示错误 Ünable to connect to server

我正在使用的连接字符串是

```
 <connectionStrings>
        <add     name="GRTU_Library_Management.Properties.Settings.GRTU_Library_ManagementConnectionString"
        connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|    \GRTU_Library_Management.mdf;Integrated Security=True"
            providerName="System.Data.SqlClient" />
    </connectionStrings> 
```

我正在尝试的查询是

```
SqlConnection con = new SqlConnection("GRTU_Library_Management.Properties.Settings.GRTU_Library_ManagementConnectionString");

        con.Open();
        SqlCommand cmd = new SqlCommand("insert into Category values('" + txtcategory.Text + "')", con);
            cmd.ExecuteNonQuery();
            con.Close(); 
```

请在这方面帮助我，

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:00:11.450

没有接受连接字符串*名称*[`SqlConnection`](http://msdn.microsoft.com/en-gb/library/system.data.sqlclient.sqlconnection.aspx)的类的构造函数。

 *如果你想从配置文件中检索连接字符串，你必须自己做，也许通过[`ConfigurationManager.ConnectionStrings`](http://msdn.microsoft.com/en-gb/library/system.configuration.configurationmanager.connectionstrings.aspx).

```
SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["GRTU_Library_Management.Properties.Settings.GRTU_Library_ManagementConnectionString"].ConnectionString); 
```*

# mysql - Writing a correlated sub-query in my select query

> ID：15822224
> 
> 赞同：0
> 
> 时间：2013-04-04T21:39:14.120
> 
> 标签：mysql, correlated-subquery

I have a funky query that works fine with static data but I need my data to be dynamic. So the static data is like this

```
SELECT c.my_name, c.my_id, (SELECT count(d.friendship_id) FROM another_table d WHERE d.my_id = 1 AND d.my_friends_id = 2) as count FROM myprofile c WHERE c.my_id = 1; 
```

This returns the data I want like this:

```
my_name   my_id   count
parijat    123     1 (OR 0 if the row doesn't exist)

```

For reference, both another_table.my_id (foreign key), another_table.my_friends_id references myprofile.my_id (primary key). another_table.friendship_id is the primary key here and is auto incremented.

Now the actual question:

I want my subquery to be something like this: (SELECT count(d.friendship_id) FROM another_table d WHERE d.my_id = 1 AND d.my_friends_id = CURRENT_ROW_ID)

where CURRENT_ROW_MY_ID is the c.my_id that is being selected upon in the main query.

Is this possible and if not, what should my approach be to get the results I need ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:46:27.940

您可以执行子查询来获取该表的当前 auto_increment 值：

```
select auto_increment from information_schema.tables where table_schema = 'you_db_name' and table_name = 'your_table_name' 
```

高温高压

弗朗西斯科

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:06:28.073

有时我会在完全探索该选项之前询问。刚刚发现相关子查询即使在选择语句中也能正常工作。这是我为使其正常工作所做的工作：

SELECT c.my_name, c.my_id, (SELECT count(d.friendship_id) FROM another_table d WHERE d.my_id = 1 AND d.my_friends_id = c.my_id) as count FROM myprofile c WHERE c.my_id = 1;

my_id 有点模棱两可。一个更好的词是 profile_id，但是处理遗留数据库肯定不是很有趣。

# c - 如何使指向 C（不是 C++）中的结构的指针数组为空

> ID：15822227
> 
> 赞同：-1
> 
> 时间：2013-04-04T21:39:22.243
> 
> 标签：c, arrays, pointers, null

我目前正在尝试将指向结构的指针数组归零。任何帮助或文档都会很好。我是初学者，所以请尽可能清楚。

这是我的代码示例。抱歉，如果我没有正确列出这个，这是我的第一次发帖。在此处输入代码

```
#include "stdlib.h"

enum boxtype
{
    Card,
        Mask,
};

typedef struct 
{
    enum boxtype type;
    int L;
    int H;
    int x;
    int y;
    int Area;
    Float ManBox;
    Float WomanBox;
}Boxes;

typedef struct
{
    Boxes Info;
    float Hight;
}Male;

typedef struct
{
    Boxes Info;
    int Size;
}Female;

void main()
{
    Man Male[100];
    Woman Female[100];
    Boxes *Spaces[600]; //This is the array of pointers that needs to be nulled.

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T21:43:08.787

您可以使用初始化列表初始化数组，如下所示：

```
Boxes *Spaces[600] = { NULL }; 
```

数组中的所有元素都将设置为 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:41:16.417

如果您使用`calloc()`内存进行初始化，则在返回之前将被归零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T17:17:03.917

`for(int i=0;i<600;i++) { *Space[i]=NULL; }` 之前给出的答案也是正确的。如果你不理解前面的代码，那么你可以试试这个。

# r - 你如何订购一个名义变量。例如 R 中的月份？

> ID：15822228
> 
> 赞同：0
> 
> 时间：2013-04-04T21:39:22.500
> 
> 标签：r

这是一个非常基本的问题，但我找不到答案。如何订购我的变量“月份”，以便在制作条形图时，一月是第一个，然后是二月......？

非常感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T03:09:43.793

@PhilipPham 的回答是正确的：这是等效的，但更简单一些：

```
Month <- factor(Month,levels=month.name) 
```

因为 R 中有一个内置`month.name`变量可以按顺序给出英文月份名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T21:44:04.290

```
df$Month <- factor(df$Month,format(seq(as.Date("2013-01-01"),by="1 month",length=12),"%B")) 
```

然后，再次绘制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-16T08:09:37.820

添加 Ben 的答案（因为我还不能添加评论），假设您有一个带有 Month 列的数据框，您可以执行以下操作：

```
df$Month <- factor(df$Month,levels=month.name)
df = df[order(df$Month,decreasing=FALSE),] 
```

# tomcat - 即使密码错误，信任库也可以工作，为什么？

> ID：15822234
> 
> 赞同：0
> 
> 时间：2013-04-04T21:39:58.327
> 
> 标签：tomcat, ssl, ssl-certificate, tomcat7, tomcat6

我只是将我的 tomcat webapp 设置为支持 SSL，并以此为指导： [SSL 配置](http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html#Configuration)

有人告诉我将其添加到 server.xml：

```
"<Connector 
 port="8443" maxThreads="200"
 scheme="https" secure="true" SSLEnabled="true"
 keystoreFile="${user.home}/.keystore" **keystorePass="changeit"**
 clientAuth="false" sslProtocol="TLS"/> 
```

现在，SSL 工作正常，但是当我想通过另一个使用 mytruststore.jks 的程序进入 web 服务时，即使 mytruststore 密码错误也有可能。

为了更清楚，-我必须使用这个“mytruststore.jks”进入网络服务-“mytruststore.jks”密码没有被tomcat服务器检查

这种情况是否与server.xml 中使用的**keystorePass有关？**当我删除“keystorePass”时，Tomcat 不起作用。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:47:21.550

当使用密钥库文件作为信任库时，密码仅用于验证，验证中的错误很可能会被完全忽略。密码实际上仅用于保护私钥，而信任库中没有密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:03:03.373

听起来您正在尝试使用 keystorePass 为受 SSL 保护的网站提供某种级别的身份验证安全性。这不是 SSL 的工作方式，您正在保护 Web 服务器和客户端浏览器之间传输的数据。它不会阻止对网站的访问。

keystorePass 指定使用 keytool 之类的工具对 .jks 文件进行解密的密码。

我可能会走得很远，但这就是我对这种情况的解释，请更新您期望发生的事情。

# c# - 为什么“i”会被“ı”取代

> ID：15822236
> 
> 赞同：2
> 
> 时间：2013-04-04T21:40:05.240
> 
> 标签：c#, xml, localization, culture

我收到了来自一个应用程序的崩溃报告，该应用程序试图从之前编写的文件中读取 XML。在请求用户向我发送文件后，我将它与应该编写的文件进行了比较，发现了一个我以前没有遇到过的非常奇怪的问题。

一些（但不是全部）`i`字符已被替换为`ı`- 无点 i。例如，一个名为“title”的节点很好，但一个名为“initialdirectory”的节点将第一个 i 替换，第二个被单独保留，即`ınitialdirectory`.

直到今天，我什至不知道有这样一个字符，但现在我知道了，但我只是不知道它是如何编写的——XML 是使用`XmlWriter`UTF8 编码编写的。只是一个普通的日常写作，没有什么复杂的。

我通常（嗯，因为得到 Resharper 并且它因为跳过参数而对我大喊大叫）`StringComparison.OrdinalIgnoreCase`在执行`IndexOf`等操作时使用，但是我不知道在写入数据时应该如何执行此操作，除非我应该开始改变线程文化。

以前有没有人遇到过类似的问题，如果有，最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T21:47:44.077

在土耳其语中有两个 i：一个带点 ,`i`一个不带点 , `ı`。在大写的情况下，第一个有一个点，，`İ`而第二个没有，`I`。

在某些时候，您的程序会`InitialDirectory`根据默认语言环境转换为小写字母，在世界某些地方，默认语言环境是土耳其语。要解决此问题，您可以使用固定的已知语言环境（例如美式英语）转换大小写。

**更新：**更好的是，在[“不变文化”](http://msdn.microsoft.com/en-us/library/4c5zdc6a%28v=vs.71%29.aspx)[`ToLowerInvariant()`](http://msdn.microsoft.com/en-us/library/system.string.tolowerinvariant.aspx)中使用将字符串转换为小写的方法。

# css - 远程内容 - 阻止 CSS 覆盖

> ID：15822237
> 
> 赞同：1
> 
> 时间：2013-04-04T21:40:05.450
> 
> 标签：css

我正在开发一个允许用户将内容嵌入到他们有权访问的网页中的系统。

从概念上讲，用户将在他们的页面上创建一个具有特定 ID（我们称之为“myId”）的 div，并包含一个我控制的 JavaScript 文件，该文件基本上会将标记注入“myId”。

返回的标记将包括带有内联样式的 div。我不能允许将此内容嵌入其页面的用户覆盖 CSS 样式。

我已经阅读了数百篇关于 CSS 特殊性、!Important 等的文章和线程。似乎阻止用户覆盖您的样式的唯一真正方法是使用 iFrame。

以下是一些同事的三篇文章，我一直在弹跳。 [http://weblog.bocoup.com/3pjs-css-defense/](http://weblog.bocoup.com/3pjs-css-defense/) [https://speakerdeck.com/antonkovalyov/achieving-harmony-with-third-party-javascript](https://speakerdeck.com/antonkovalyov/achieving-harmony-with-third-party-javascript) [http://weblog.bocoup.com/3pjs-css -交货/](http://weblog.bocoup.com/3pjs-css-delivery/)

其中一个担忧是 iOS 将停止支持 iFrame，老实说，多年来我们都被告知不要使用 iFrame。虽然它看起来是完美且唯一的解决方案，但它确实听起来“hacky”。

有没有人对任何其他解决方案有任何见解？我查看了linkedIn如何嵌入他们的“与linkedIn按钮连接”，他们只是用一个！important（a）看起来超级hacky并且b）不考虑未声明的属性和值）包装每个属性值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:05:47.613

您对 !important 的主要关注是他们仍然可以使用 !important 关键字在以后的声明中覆盖它。

您对 iFrame 的看法是正确的。

所以你没有很多选择：

*   一种选择是在您自己的 CSS 声明之前添加一个自定义的非通用包类名称，这样用户覆盖它们的机会就会非常渺茫：

    . 内容 h1

会变成

```
.my-custom-css .content h1 
```

*   另一种选择是修改他们的 CSS 降价而不是你的。在他们的每个声明前面加上一个特定的 css 类，并将该类用于他们的 div 容器，以便它适用于它的所有内容。

# asp.net - OLEDBException：没有为 vb.net 中的一个或多个必需参数提供值

> ID：15822240
> 
> 赞同：2
> 
> 时间：2013-04-04T21:40:18.810
> 
> 标签：asp.net, vb.net, parameters, oledbexception

我是编程新手，我在 VB.net 中编写的 Web 应用程序有问题。我的项目中有一个 Access 数据库，并且正在使用参数化查询从中检索信息。奇怪的是，我在另一个工作正常的页面上使用了几乎相同的查询，但是这个查询给了我“没有为一个或多个必需参数提供值”错误。我一天中的大部分时间都在搜索，并意识到问题已被提出，但找不到我的问题的解决方案。我想我正在使用“？” 正确，以正确的顺序具有正确数量的参数，并且所有内容都拼写正确。这是我的代码：

```
 Dim strWthStn As String
    strWthStn = cboRainProb2.Text
    Dim strWthStnParm As New OleDb.OleDbParameter()
    strWthStnParm.Value = strWthStn

    Dim strMonth As String
    strMonth = cboRainProb.Text
    Dim strMonthParm As New OleDb.OleDbParameter()
    strMonthParm.Value = strMonth

    Dim sql As String 'Query to select the station for rainfall probability values

    sql = "SELECT 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 " &
    "FROM Rainfall Probability " &
    "WHERE Station = ?" &
    "AND Mth = ?"

    'Connects to the Access database and selects data based on query
    Dim AccessConnect As String
    AccessConnect = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=F:\Megan\Visual Studio Projects\DroughtCalculatorND_Web\DroughtCalculatorND_Web\NDStations.mdb"
    Dim conn As New OleDb.OleDbConnection
    Dim selectCommand As New OleDbCommand(sql, conn)
    selectCommand.Parameters.Add(strWthStnParm)
    selectCommand.Parameters.Add(strMonthParm)
    conn.ConnectionString = AccessConnect
    conn.Open()

    'Reads the data into a list
    Dim reader As OleDbDataReader =
        selectCommand.ExecuteReader(CommandBehavior.CloseConnection)
    Dim RainByYear As New List(Of Double)
    reader.Read()
    RainByYear.Add(reader("1999"))
    RainByYear.Add(reader("2000"))
    RainByYear.Add(reader("2001"))
    RainByYear.Add(reader("2002"))
    RainByYear.Add(reader("2003"))
    RainByYear.Add(reader("2004"))
    RainByYear.Add(reader("2005"))
    RainByYear.Add(reader("2006"))
    RainByYear.Add(reader("2007"))
    RainByYear.Add(reader("2008"))
    RainByYear.Add(reader("2009"))
    RainByYear.Add(reader("2010"))

    RainByYear.Sort() 
```

等等

在 OleDBDataReader 行的 Dim 阅读器上出现程序错误。我在那里使用了一个断点来检查所有内容，并且两个参数都有正确的值。我感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T21:54:25.323

有空格的名称需要括号：

```
"FROM [Rainfall Probability] " 
```

您编号的字段名称也可能：

```
SELECT [1999], [2000] etc... 
```

# android - ListView items don't become visually "highlighted" when selected during contextual action mode

> ID：15822243
> 
> 赞同：9
> 
> 时间：2013-04-04T21:40:40.503
> 
> 标签：android, android-layout, android-widget

I followed the official Android site's [tutorial on creating contextual action menus](http://developer.android.com/guide/topics/ui/menus.html#CAB). Using the code below, when I long press on one of my ListView items, it *does* become selected, but it does not visually indicate that its been selected. I am using the Holo Light theme, and I expect the background color of every selected item in my ListView to change to a shade of blue.

Is this normal behavior?

I have tried testing `listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);` and not even a single row will highlight.

Using `listView.setSelector(android.R.color.holo_blue_light);` does appear to highlight the row which was last selected, but it does not highlight the other rows which are selected.

Have I done something wrong, or do I need to make the background change manually? If so, how?

I have also tried `listView.setSelector(android.R.drawable.list_selector_background);` which is a real selector that contains items for different states. Unfortunately, it still only applies to the most recently selected ListView item.

```
public class MyActivity extends ListActivity {

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        // The list is generated here

        ListView listView = getListView();
        listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);

        listView.setMultiChoiceModeListener(new MultiChoiceModeListener() {
            // implements empty methods
        }
    }
} 
```

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-30T12:34:45.140

我刚刚实现了上下文操作模式，并且遇到了与您相同的问题。我也认为默认行为是以某种方式突出显示每个选定的行，但不是。

获得所需效果的最简单方法是更改​​用于 ListActivity 的列表项资源。

我正在使用 ArrayAdapter，所以我的选择是在适配器的构造函数中进行的：

```
new ArrayAdapter<Exercise>(context, android.R.layout.simple_list_item_1); 
```

最后一个参数是适配器将用于在列表视图中实例化新视图（列表项）的布局文件的资源 ID。

我选择了我认为是最基本的一个。通过将其更改为：

```
new ArrayAdapter<Exercise>(context, android.R.layout.simple_list_item_activated_1); 
```

我得到了想要的效果，在上下文操作模式中选择的行现在保持突出显示。

在 android.R.layout 中还定义了一些其他资源 id，您可以从中选择以获得类似但不同的结果：[http://developer.android.com/reference/android/R.layout.html](http://developer.android.com/reference/android/R.layout.html)， simple_list_item_activated_1 只是为我做的。

不知道

```
// The list is generated here 
```

隐藏一个适配器，如果是一个数组适配器，但如果是这样，这应该会有所帮助。

否则，我认为您可以在其他地方使用预定义的资源，或者采取稍长的方式并按照 Brabbeldas 的建议定义选择器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-25T10:18:00.480

在我看来，描述的方式应该是可能的，但不幸的是它没有。

到目前为止，我发现您必须使用 XML 资源来描述当项目的“状态”被“激活”时背景的外观。

在“res/drawable/”目录中创建一个名为“list_item_background_activated.xml”的文件。

在其中定义类型选择器的根元素：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item 
    android:state_activated="true"
    android:drawable="@android:color/darker_gray" />

</selector> 
```

现在您应该修改相关资源（定义 ListItem 外观的资源）以引用此可绘制对象：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_item_background_activated" >
    ...
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-01T08:36:22.390

在 ActionMode 中，当用户单击项目时，ListView 会自动跟踪项目检查状态。

当您为 ListView 使用适配器时，您可以根据选中状态设置项目的背景：

```
@Override
public void bindView(final View view, final Context context, final Cursor cursor)
{
    int pos = cursor.getPosition();

    boolean selected = ((SessionsActivity)context).listView.isItemChecked(pos);
    if(!selected)
        view.setBackgroundResource(R.drawable.list_selector);
    else
        view.setBackgroundResource(R.drawable.list_selector_active);
... 
```

并且，您还需要在每个项目单击后使 ListView 无效：

```
 private AbsListView.MultiChoiceModeListener multiChoiceModeListener = new AbsListView.MultiChoiceModeListener()
    {
        @Override
        public void onItemCheckedStateChanged(ActionMode mode, int position,
                                              long id, boolean checked)
        {
            // Here you can do something when items are selected/de-selected,
            // such as update the title in the CAB
            listView.invalidateViews();
        } 
```

# batch-file - 批处理文件 - 读取 xml 文件并返回值

> ID：15822244
> 
> 赞同：-2
> 
> 时间：2013-04-04T21:40:41.040
> 
> 标签：batch-file

需要能够读取一个 xml 文件并返回一个值：

XML 文件：

```
<?xml version="1.0" encoding="UTF-16"?>
<CONFIGSETTINGS>
    <GENERAL>
        <PROGRAM>App/PROGRAM>
        <CURRENCY>GBP</CURRENCY>
        <VERSION>3</VERSION>
        <RELEASE>0</RELEASE>
        <FULLVERSION>24.0.12.123</FULLVERSION>
    </GENERAL>
    <WEBLINKS> 
```

…………………………………………………………………………

需要能够提取完整版本号并放入批处理文件中的变量中，即：24.0.12.123

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T21:49:36.287

试试这个：

```
@echo off &setlocal
for /f "tokens=2delims=<>    " %%i in ('type file.xml ^|find "FULLVERSION"') do set "version=%%i"
echo(%version%
endlocal 
```

# jquery - jQuery easing of an image not working

> ID：15822245
> 
> 赞同：2
> 
> 时间：2013-04-04T21:40:45.597
> 
> 标签：jquery, easing, jquery-easing

For whatever reason I cannot get the easing to work on some images. The browser just loads them instantly without easing.

What I'm trying to accomplish is so that the side images slide from the bottom to it's position and the middle image slides from the top.

[http://jsfiddle.net/DPX9G/1/](http://jsfiddle.net/DPX9G/1/)

```
$(document).ready(function() {
            $('.banner1 img, .banner3 img').animate({bottom:"0"}, '1000', 'easeOutBack');
            $('.banner2 img').animate({top:"0"}, '1000', 'easeOutBack')
        }); 
```

Any help would greatly be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:50:27.630

尝试将 $(document).ready 更改为

```
$(window).load 
```

$(document).ready 在图像加载之前触发并且可以访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:56:01.163

我看到你使用了内联样式。如果您没有其他 CSS 将图像的位置设置为绝对或相对，您将无法对其进行动画处理。尝试：

```
<img src="images/banner1.jpg" alt="" style="bottom: 0px; position: relative;"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T21:23:14.513

弄清楚了！

[http://jsfiddle.net/DPX9G/4/](http://jsfiddle.net/DPX9G/4/)

我必须将横幅图像上的内联样式设置为负值才能过渡。

```
style="bottom:-100%;"
style="top:-100%;"
style="bottom:-100%;" 
```

# jquery - Browsers status bar href

> ID：15822246
> 
> 赞同：0
> 
> 时间：2013-04-04T21:40:47.870
> 
> 标签：jquery, browser, status

We have a site that has lightbox images but the client does not want to reveal the img src thats displayed in the browser status bar…

Any bright idea how we can achieve this consistently for all browsers?

I would add that this is for a site where we have a thumbnail that links (a href="") to another larger image and its this link thats displayed in the status bar thats the clients main concern.

We have also tried using an option wit the CMS we are using that allows us to use an Obfuscated time limited url to the images, this seemed great but is severely slowed the load times to a point where its unacceptable.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:14:47.397

网页本身是否支持任何类型的身份验证？

如果是这样，那么正确的方法是将图像从公共根目录中取出并通过身份验证脚本运行访问。我认为Devot:ee 有几个这样的ExpressionEngine 工具。或者，一个简单的插件可以采用私有路径，检查登录成员，然后提供图像。

如果页面上没有认证，那么残酷的事实是你们都在浪费时间，我感到你们的痛苦！如果是这种情况，我不会放弃“教育客户”的路线，就好像图像真的很敏感，那么它们需要适当的保护。

顺便说一句，您可能还需要考虑[阻止盗链](https://www.google.co.uk/search?q=images+prevent+hot+linking&client=ubuntu&channel=cs&aq=f&oq=images+prevent+hot+linking&aqs=chrome.0.57.5722&sourceid=chrome&ie=UTF-8)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:48:45.483

您可以使用模态对话框。不完全是弹出窗口，但它会打开另一个容器。就像一个覆盖。你看到人们经常用图像做这件事，但你也可以将它用于 html。jquery 有很多插件。

这里有一些例子：http: [//jquery.com/demo/thickbox/](http://jquery.com/demo/thickbox/)

我个人喜欢[http://fancybox.net/](http://fancybox.net/)

唯一的问题是您不能使用 ajax 调用另一个网站，但您可以在 php 或其他任何内容中创建一个页面并获取另一个页面的内容，然后在 ajax 中返回该内容。

你会想为此使用 curl 之类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T22:03:46.347

我认为最好的解决方案可能是对页面中的图像路径进行编码（例如使用 base64），然后有一个介于两者之间的独立 PHP 脚本，它接收编码的文件路径并即时将原始图像作为字符串返回。

显然，与直接提供图像相比，开销更大，但它会阻止用户知道真实的文件位置或名称。

像这样的东西：

[隐藏下载文件位置。- 重定向下载](https://stackoverflow.com/questions/6647165/hide-download-file-location-redirect-download)

可能是一个很好的起点。

:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T21:49:11.907

如果要在浏览器中显示图像，浏览器必须知道该图像的位置。因此，用户始终可以看到该图像的 URL。没有办法向用户隐藏它。

虽然您可以将其从状态栏中隐藏，但阻止用户右键单击图像并说“在新选项卡中打开图像”（或等效项）是什么。如果您要“禁用右键单击”（这对于所有意图和目的来说都是不可能的），您可以通过 Firebug 等开发工具轻松查看图像 URL。

因此，虽然您可能会稍微伪装一下 URL，但没有什么可以阻止真正想要找到它的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T21:50:23.853

不知道这里的目标是什么......但要回答你的问题，只需将图像写为 base64 编码的字符串。例子比比皆是：[http](http://en.wikipedia.org/wiki/Data_URI_scheme#Examples) ://en.wikipedia.org/wiki/Data_URI_scheme#Examples 。因此，可以隐藏图像的位置，事实上，只要您在服务器上写入数据字符串，它甚至不必向外访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T21:51:58.720

我将创建一个脚本，该脚本在数据属性中具有图像的位置，并在单击时绑定一个手动触发灯箱的事件，并使用该数据属性中的位置。

# paypal - SetExpressCheckout first call failed

> ID：15822247
> 
> 赞同：1
> 
> 时间：2013-04-04T21:40:48.767
> 
> 标签：paypal, paypal-sandbox

Since the API have changed all the times i try to pay with a developper test business i get an error like this :

```
array (
  'TIMESTAMP' => '2013-04-04T21:30:54Z',
  'CORRELATIONID' => 'c1929df7ab60a',
  'ACK' => 'Failure',
  'VERSION' => '97',
  'BUILD' => '5618210',
  'L_ERRORCODE0' => '10002',
  'L_SHORTMESSAGE0' => 'Security error',
  'L_LONGMESSAGE0' => 'Security header is not valid',
  'L_SEVERITYCODE0' => 'Error',
) 
```

This is the call i make :

```
https://api-3t.sandbox.paypal.com/nvp?VERSION=97
METHOD=SetExpressCheckout&
CANCELURL=http://url.com&
RETURNURL=http://url.com&
PAYMENTREQUEST_0_AMT=78&
PAYMENTREQUEST_0_CURRENCYCODE=EUR&
PAYMENTREQUEST_0_PAYMENTACTION=SALE&
PAYMENTREQUEST_0_CUSTOM=2856 
```

But all the data in the API call is rightly filled. I can't add a business account to my developper account. Just befoire the API changes everything was fine, maybe i'm missing something ? Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T19:25:39.973

Are you missing "&" after [https://api-3t.sandbox.paypal.com/nvp?VERSION=97](https://api-3t.sandbox.paypal.com/nvp?VERSION=97) <--- missing "&"

So you must change to : [https://api-3t.sandbox.paypal.com/nvp?VERSION=97&METHOD=SetExpressCheckout&](https://api-3t.sandbox.paypal.com/nvp?VERSION=97&METHOD=SetExpressCheckout&)...

Hope this help, thank.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:10:02.727

仔细检查您传递的凭据，再次尝试复制它们，并确保您的凭据之前或之后没有多余的空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:17:03.367

我遇到了同样的问题。我将参数名称 PAYMENTREQUEST_0_AMT 更改为 AMT 并将 PAYMENTREQUEST_0_PAYMENTACTION 更改为 PAYMENTACTION 并且效果很好。希望它也适用于你。

# c# - 消耗 CPU 使用率的过程

> ID：15822250
> 
> 赞同：1
> 
> 时间：2013-04-04T21:40:57.093
> 
> 标签：c#, process, cpu-usage

这可能是一个“外面”的问题，但这里有：

我目前正在为应用程序编写一个创可贴脚本，以检查同名下的多个进程，例如使用 C# 中的 PerformanceCounter 的 chrome.exe。该进程的多个实例可能同时在机器上运行，因此需要检查每个实例以查看其是否高于 X%。不幸的是，这个应用程序没有测试环境，也没有简单的方法来设置它。

所以我的问题是，有没有人知道我可以用来提高 CPU 使用率以便测试我的脚本的工具或“模拟”进程？我基本上是想创建 CPU 使用率。有这样的测试工具吗？或者有没有办法以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T21:42:34.867

```
for (int i = 0; i < 10; i++)
{
    ThreadPool.QueueUserWorkItem(new WaitCallback((a) =>
    {
        while (true) { }
    }));
}

while (true) { } 
```

这很可能会导致你的 CPU 跳得相当高，因为一个线程将不停地不停地转来转去，没有任何中断。

我的机器上的利用率高达 85%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:45:43.490

您可以使用 chrome 在线执行此操作。==> [http://www.fossiltoys.com/cpuload.html](http://www.fossiltoys.com/cpuload.html)

有史以来最真实的测试！

# jquery - 如何动态删除 Django HTML 代码

> ID：15822254
> 
> 赞同：0
> 
> 时间：2013-04-04T21:41:03.703
> 
> 标签：jquery, html, django

当我想显示超过 600 个字符的文本时，我正在使用“truncatechars”。

我正在做的是：当文本有超过 600 个字符时，我会截断字符以仅显示一个小文本，而不是我有一个“显示更多”按钮来显示所有文本。

```
 {{ad.description|truncatechars:"600"}} {% if ad.description|length > 150 %}<a href="#">ver mais...</a> {% endif %} 
```

如何动态删除“truncatechars”属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:53:05.370

您不必使用`truncatechars`. 您可以执行此功能的纯 javascript/jquery 实现。

您可以使用一些[插件。](http://plugins.learningjquery.com/expander/)

或者

如果您要自己实现它，请查看[此](http://viralpatel.net/blogs/dynamically-shortened-text-show-more-link-jquery/)链接

您所要做的就是添加一个包装器`{{ad.description|safe}}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:58:59.490

如果你想“显示更多”，那么你根本不应该使用 django 的模板标签，因为它们是在服务器端呈现的。这意味着客户端（浏览器）将永远不会得到超过前 600 个字符的任何内容。而是用javascript来做。有很多插件和教程可以处理这个问题（例如[这里](http://plugins.learningjquery.com/expander/)、[这里](http://shakenandstirredweb.com/240/jquery-moreless-text)和[这里](http://www.jeremymartin.name/projects.php?project=jTruncate)）

# php - 过滤 MySql 查询以进行距离计算

> ID：15822256
> 
> 赞同：0
> 
> 时间：2013-04-04T21:41:05.550
> 
> 标签：php, mysql

我正在寻找一些帮助，我很确定这个查询很简单，但我看不到树木的树木，我希望有人能提供帮助。

我正在搜索我的用户数据库，计算用户之间的距离并输出结果如下：

```
$result = queryMysql("SELECT user FROM $table WHERE x= 'y'");
$num = mysql_num_rows($result);

for ($j = 0 ; $j < $num ; ++$j)
    {
    $row = mysql_fetch_row($result);
    if ($row[0] == $user) continue;

    $query = "SELECT * FROM $table WHERE user='$row[0]'";
    $res=mysql_query($query);
    $results=mysql_fetch_assoc($res);
    $userlocation=$results['location'];
    //run distance function which outputs $distance
    if($distance <= $maximumdistance)
    {
           //echo user info
    } 
```

我想要做的是运行距离函数，识别它返回为真的用户，并以数组或其他方式获取他们的用户 ID（唯一），这样我就可以计算结果，然后通过它们进行输出.

这是否有意义和/或是否有更好的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:23:32.280

当您说距离时，您是在谈论地理距离吗？MySQL 在运行距离计算方面将比 PHP 快得多。就个人而言，这就是我会做的。创建另一个名为**user_distances**的表，其中包含字段**user_id1**、**user_id2**和**distance**。将 user_id1 和 user_id2 一起设为您的主键。

现在，让我们用我们的距离填充该表。我将假设您已经拥有最有可能基于城市/邮政编码的用户的纬度和经度（如果没有，请获取邮政编码数据库）。你要做这样的事情：

```
INSERT INTO user_distances 
    (user_id1, user_id2, distance)
SELECT 
    u1.user_id,
    u2.user_id,
    (69.172 * SQRT( POW(u1.latitude-u2.latitude, 2) + POW(u1.longitude-u2.longitude, 2) ) ) as `distance`
FROM
    users as u1,
    users as u2
WHERE
    u1.user_id != u2.user_id; 
```

现在，您可以通过距离计算获得更精确的结果，这只是一个非常简单的示例，以英里为单位粗略估计距离（高级算法将考虑地球的形状）。现在您已经有了这个新表 user_distances，其中填充了每个用户 ID 对之间的距离，您可以运行简单的查询，例如选择距离 < 10 的位置。

我希望这有帮助。我没有测试 SQL，但你应该明白这一点:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T18:15:04.377

嗯，只是关于距离 latitude1 - Latitude2 * 69 的快速说明。随便什么都可以

但是纬度和经度不一样

对于经度，一个好的猜测是 * *53

你离赤道越远，这些工作就越少（当然）

是的，美国海岸警卫队认证的船长，所以我*确实*了解经度和纬度 - 我们不是生活在平坦的地球上......

# r - R：将顶点属性添加到网络（使用 statnet）

> ID：15822259
> 
> 赞同：1
> 
> 时间：2013-04-04T21:41:14.330
> 
> 标签：r, attributes, network-programming, social-networking

我目前正在使用 Statnet 包（[http://statnet.csde.washington.edu/](http://statnet.csde.washington.edu/)）在 R 中进行网络分析

到目前为止，我已经能够：

1) 使用 network() 函数构建社交网络。我拥有的信息最初包含在关联矩阵形式中（每个项目一行，列中的项目成员），我在 R 中构建网络之前将其转换为邻接（社会矩阵）形式。

2) 绘制网络并计算一般统计数据（对于整个网络和网络顶点）

3) 向网络添加外部顶点属性

4）根据属性绘制具有不同颜色顶点的网络。

现在我想通过向网络添加边缘属性来补充我的分析（以区分关系，例如不同类型的项目）。

我知道我可以使用 set.edge.attribute() 函数，并且我需要输入一个与网络中存在的边总数相同大小的向量。但是，我不确切知道如何对这个边缘属性向量进行排序，以便函数将它们正确分配给相应的边缘。

有人知道 network() 函数如何在内部对边进行排序吗？关于如何对我的边缘属性向量进行排序以获得适当匹配的任何想法？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:33:47.833

该`network()`函数可以从各种类型的输入（例如边缘列表或邻接矩阵）创建网络，因此如果您提供更多代码示例来解释您如何创建网络以及边缘属性的结构格式，这将有所帮助数据在。

我相信通常`network()`会以与输入边缘列表相同的顺序创建边缘。因此，如果您的边缘属性向量与原始数据的顺序相同，则应该可以`set.edge.attribute()`安全使用。如果您的边缘属性是矩阵形式，您可以使用`set.edge.value()`.

# java - ArrayIndexOutOfBounds。Java 螺旋程序

> ID：15822263
> 
> 赞同：-3
> 
> 时间：2013-04-04T21:41:38.970
> 
> 标签：java, arrays, loops, 2d, spiral

我不断收到错误 ArrayIndexOutOfBounds: 4 在第 21 行。该行是 Spiral[VIndx][HIndx]=number。该程序应该在给定特定维度时创建数字螺旋。例如，如果给定维度 3，则为螺旋数字的 3x3 二维数组。螺旋应该是这样的：

7 8 9

6 1 2

5 4 3

为什么我的循环不起作用？

```
 import java.util.*;import java.io.*;
   public class Spiral{

   public static void Spiral(int dimensions, int [][] Spiral)
   {
   int endNumber = (int)Math.pow(dimensions, 2);
   int number = 1;

   int rightmovement = 1;
   int downmovement = 1;
   int leftmovement = 2;
   int upmovement = 2;

   int HIndx = (dimensions-1)/2;
   int VIndx = (dimensions-1)/2;

   while(number<=endNumber)
   {
for(int i = 0;i<=rightmovement;i++)
{
   Spiral[VIndx][HIndx]=number;
   number++;
   HIndx++;
   if(number==endNumber)break;
}
rightmovement++;

for(int i = 0;i<=downmovement;i++)
{
Spiral[VIndx][HIndx]=number;
number++;   
VIndx++;
if(number==endNumber)break;
}
downmovement++;

for(int i = 1;i<=leftmovement;i++)
{
 Spiral[VIndx][HIndx]=number;
number++;   
HIndx--;
if(number==endNumber)break;
}
leftmovement++;

for(int i = 1;i<=upmovement;i++)
{
 Spiral[VIndx][HIndx]=number;
number++;   
VIndx--;
if(number==endNumber)break;
}
upmovement++;

 }

 }
 public static void main(String[]args)throws IOException
 {
 File file = new File("spiral.txt");
 Scanner input = new Scanner(file);
 String [] numbers = new String [2];
 int i =0;
 while (input.hasNextLine())
 {
 String line = input.nextLine();
 numbers[i]=line;
 i++;
 }
 int dimensions = 0;
 input.close();
 int [][] Spiral = new int [dimensions][dimensions];  

 dimensions = Integer.parseInt(numbers[0]);
 int range = Integer.parseInt(numbers[1]);
  if(dimensions%2==0)
  {
    dimensions+=1;
  }

 Spiral(dimensions, Spiral);

 for(i = 0; i<dimensions;i++){
   for(int j = 0; j<dimensions;j++){ 
   System.out.println(Spiral[i][j]);
                       }
        }

     }
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:48:27.030

首先，您的循环条件应该使用`<`而不是`<=`.

其次，如果您考虑螺旋式，您会意识到您总是以正确的运动结束。`break`你第一次击中

```
if(number==endNumber)break; 
```

但这不会让你退出`while`循环——这只会让你离开`for`循环。因此，您进入向下移动`for`循环并获取索引超出范围异常。

第三，循环前需要先输入中心号。

此外，`rightmovement`, `leftmovement`, ... 每次都应该增加 2。这样做的原因在更大的网格中更容易看到。

```
21 22 23 24 25
20  7  8  9 10
19  6  1  2 11
18  5  4  3 12
17 16 15 14 13 
```

注意第一个向右运动 writes `2`，然后下一个 writes `8 9 10`，最后一个 writes`22 23 24 25`并且`26`如果你要继续写，就会写。

要解决`break`不离开`while`循环的问题，只需将其更改为`return`语句。

# ajax - 如何在使用 webdis 和 redis 滚动时动态显示数据

> ID：15822272
> 
> 赞同：1
> 
> 时间：2013-04-04T21:42:23.460
> 
> 标签：ajax, jquery, web-applications, nosql, redis

我目前正在尝试使用 webdis 在网页中显示来自 redis 的数据以连接到 redis，因为我有 300000 多个数据并且它可以变得更大，我只想在滚动时显示数据以使其快速加载，我知道我们如何通过使用身份在 my-sql 中执行此操作，但是 redis 中存在的数据就像“1.2.3.4,11.22.33.44”。我怎样才能在滚动上显示数据？

目前我正在使用这样的东西

```
<script>
var xmlhttp;
function loadXMLDoc()
{ 
url = "http://127.0.0.1:7379/zrangebyscore/key_name/-inf/+inf"; 
xmlhttp=null;
if (window.XMLHttpRequest)
{// code for all new browsers
xmlhttp=new XMLHttpRequest();
}
else if (window.ActiveXObject)
{// code for IE5 and IE6
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
if (xmlhttp!=null)
{
xmlhttp.onreadystatechange=state_Change;
xmlhttp.open("GET",url,true);
xmlhttp.send(null);
}
else
{
alert("Your browser does not support XMLHTTP.");
}
}

function state_Change()
{
if (xmlhttp.readyState==4)
{// 4 = "loaded"
if (xmlhttp.status==200)
{// 200 = OK
//alert(xmlhttp.responseText);
var jsonData = JSON.parse(xmlhttp.responseText);
//alert(jsonData.zrangebyscore.length);

document.write('<center><table>');
//loop for rows 
for(var i=0;i < jsonData.zrangebyscore.length;i++)
{ 
document.write('<tr>'); 
document.write('<td>' + i + ']</td>'); 
document.write('<td>' + jsonData.zrangebyscore[i] + '</td>');
document.write('</tr>'); 
}
document.write('</table></center>');

}
else
{
alert("Problem retrieving data");
}
}
}
</script> 
```

这将至少需要 2-3 分钟才能显示完整数据

# matlab - 如何在 MATLAB 中加快帧速率？

> ID：15822274
> 
> 赞同：1
> 
> 时间：2013-04-04T21:42:24.327
> 
> 标签：matlab, image-processing, computer-vision, real-time, image-recognition

# 问题本身。

我目前正在使用 MATLAB 开发实时图像识别软件，但在尝试使用网络摄像头加快帧速率时遇到了一些麻烦。即使我只处理图像的一小部分（使用 ROI 来裁剪它），它也不会大大提高帧速率。

这让我相信我在每一帧中的计算（或者它们的大小，更具体地说）不是问题。因此，为了寻找答案，我编写了简单的代码：

```
imaqreset;

% Turn the webcam on with a MJPG_6480x480 acquisition format.
webcam1 = videoinput('winvideo',1,'MJPG_640x480');
set(webcam1,'FramesPerTrigger',1);
set(webcam1,'TriggerRepeat',Inf);
triggerconfig(webcam1,'Manual');
start(webcam1);

% Pre-allocate for the variable wich will hold the frame rates over time.
a = zeros(1,100)';

% Acquire frames in a loop and saves the frame rate in each iteration.
for i=1:100

    % Starts the timer.
    tic;

    % Triggers the webcam1 to capture a frame.
    trigger(webcam1);

    % Saves the frame in a dummy variable (just to simulate the acquisition time)
    i1 = getdata(webcam1,1);

    % The frame rate for this iteration will 1/(time for iteration).
    a(i) = 1/toc;    
end

% Plots the frame rates over time.
plot(a);

% Cleans up.
delete(webcam1); 
```

在我的电脑中，这段代码在 12.4 fps 左右运行时比较稳定。现在，棘手的部分是：如果我将采集格式更改为“MJPG_160x120”，代码将以相同的帧速率运行！或'MJPG_1280_1024'！！

这是否意味着无论 MATLAB 需要从网络摄像头获取多大的图像，我在这台计算机上能够达到的最快帧速率是 ~12.4fps？还是我错过了什么？

# 最后一件事...

在我的软件中（也就是说，不是上面发布的简化代码，而是我处理每一帧的真实代码），当处理整个帧时，帧速率下降到大约 7 fps，但是当计算机找到目标时（因此，使用 ROI 缩小搜索范围）帧速率回升至 12 fps 左右（如我所料，没有更高）。对我来说，这是一个很好的证据，证明最大帧速率不是由我的代码决定的，而是由图像采集速度决定的。

* * *

任何帮助将不胜感激，在此先感谢！

# ruby-on-rails - 雾 - 在 S3 中获取对象的大小

> ID：15822280
> 
> 赞同：3
> 
> 时间：2013-04-04T21:42:48.580
> 
> 标签：ruby-on-rails, ruby, amazon-s3, fog

如何在不下载雾中获取 s3 对象的大小？

例如：

```
connection.get_object(dir.key, latest_backup.key).body.size 
```

需要我先下载对象。

如何在下载前找出大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-18T02:58:33.877

要查找文件的大小，请执行以下操作：

```
connection.head_object(bucket_name, object_name, options = {}) 
```

并在返回的对象中寻找它：

```
Content-Length 
```

这还将为您提供其他有用的信息，例如 ETag 中的校验和以及其他类似的信息。

参考：[http ://rubydoc.info/gems/fog/Fog/Storage/AWS/Real#head_object-instance_method](http://rubydoc.info/gems/fog/Fog/Storage/AWS/Real#head_object-instance_method)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T21:12:16.723

`remote_file.content_length`对我有用（雾 1.21.0）

从`remote_file`远程目录获取的位置，如下所示：

```
def connection
  Fog::Storage.new(fog_config)
end

def directory
  connection.directories.get(bucket)
end

def remote_file
  remote_files = directory.files.last
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-28T10:45:38.900

```
module S3
  def self.directory
    connection.directories.new(key: ENV['AWS_BUCKET'])
  end

  def self.connection
    Fog::Storage.new(
      provider: 'AWS',
      aws_access_key_id: ENV['AWS_ACCESS_KEY_ID'],
      aws_secret_access_key: ENV['AWS_SECRET_ACCESS_KEY'],
      region: ENV['AWS_REGION']
    )
  end

  def self.file(key)
    directory.files.head(key)
  end
end 
```

```
file = S3.file(key)
file.content_length 
```

# performance - 函数 restoreView（JSF 生命周期）中的性能问题

> ID：15822282
> 
> 赞同：1
> 
> 时间：2013-04-04T21:43:03.667
> 
> 标签：performance, spring, jsf, osgi, spring-webflow

我们的应用程序在各个部分都存在渲染时间问题。我们已经能够在 JSF restoreView 阶段（生命周期）中使用分析器（YourKit Java Profiler）查明性能问题。由于我们在某些页面中使用了很多组件，因此树的渲染肯定是问题的根源。[关于 stackoverflow 的一些问题](https://stackoverflow.com/questions/7190225/jsf-view-getting-rebuild-on-each-ajax-request)看起来很像我们正在处理的问题。此外，我们可以看到开发和生产的速度同样缓慢。

一些规格：

*   我的面孔 2.1.7
*   javax.el 2.1.0

探查器（CTRL+滚动查看详细信息）： ![在此处输入图像描述](https://i.stack.imgur.com/c978A.png)

我们正在努力寻找解决方案。到目前为止，我们提出了这些：

*   使用更少的组合/组件（这不是很好，因为我们喜欢制作通用组件）。
*   我们也可以进入 JSF 无状态模式。
*   找到 JSF 的实际问题（IN DEEP）。
*   最近，我们发现一些 JUEL 库（表达式语言）可以大大[增加渲染时间](http://forum.primefaces.org/viewtopic.php?f=3&t=7453)。

我一直在处理让 JUEL 与 Spring 3（使用 OSGI）一起工作。这是规范： [JUEL 2.1.3.1 捆绑包](http://mvnrepository.com/artifact/org.apache.servicemix.bundles/org.apache.servicemix.bundles.juel/2.1.3_1)（注意：此捆绑包使用的 javax.el 版本与我在应用程序中使用的版本不同，这会导致冲突吗？）

我找到了另一个仅执行[Juel 实现和更新版本的](http://mvnrepository.com/artifact/de.odysseus.juel/juel-impl/2.2.6)maven 存储库。

**更新：** 找到了 javax.el 冲突的解决方案，因为 juel-api 中存在很多问题（因为它是导出他自己的 javax.el）我用那行***Fragment-Host: javax.el***修改了清单以消除它.

是否有配置/设置来实现更好的性能？或者，如何使用 MyFaces 和 Spring 实际配置 JUEL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:20:00.207

我会说这个问题是由 Spring Web Flow 引起的。我记得这个问题[SWF-1540](https://jira.springsource.org/browse/SWF-1540)。首先检查您是否使用了正确的版本（2.4.0.M1 或更高版本）。请注意，我个人没有测试过该配置是否存在性能问题，但我可以说 MyFaces 2.1.7 和更高版本没有任何问题。众所周知，某些 EL 版本存在性能问题，因此请尝试使用 juel 或 apache EL（jasper-el，与 Tomcat 捆绑在一起）。

作为个人意见，请注意 Spring 代理，众所周知，在某些情况下，当页面非常大且复杂时，代理会对性能产生重大影响。建议的解决方案是使用[Apache OpenWebbeans](http://openwebbeans.apache.org/)，这是一个非常快速的 CDI 实现，针对有大量 bean 互连的情况进行了优化。

您也可以查看这篇文章[“了解 JSF 2 和 Wicket：性能比较”](http://lu4242.blogspot.com/2012/05/understandingjsf-2-and-wicket.html)以获取有关 MyFaces 性能的提示。

您必须自己尝试适合您的情况的方法，但我希望通过这些建议，您可以更好地专注于搜索。

# java - jaxb继承自定义映射

> ID：15822284
> 
> 赞同：0
> 
> 时间：2013-04-04T21:43:09.920
> 
> 标签：java, xml, inheritance, jaxb

我有那些课

```
@XmlRootElement
public class Root{
    @element
    public B element = new B(); 
}

public abstract class A {

}
public class B extends A{
    @XmlElement
    String param1;
    @XmlElement
    String param2;
    public B(){
        param1 = "0";
        param2 = "102";
    }
} 
```

它们都属于根元素，我想创建这个 XML：

```
<root>
    <A>
        <B>
            <param1>0</param1>
            <param2>102</param2>
        </B>
    </A>
</root> 
```

可以这样做，否则我将不得不创建一个`List`（一个元素列表）而不是使用 `@XmlWrapperElement`注释？

根据要求，我将通过真正的 src 代码，但它有点大。
这是 jaxb 生成的：http: [//pastebin.com/Nccnv52W](http://pastebin.com/Nccnv52W)

问题是我的 xsd 看起来像 [http://pastebin.com/mpdMs2zF](http://pastebin.com/mpdMs2zF)

正如你所看到的，它是一个选择元素，所以我不能有这样的东西 [http://pastebin.com/VBQaSft5](http://pastebin.com/VBQaSft5)
否则我将在解组 XML 时遇到验证问题

# plugins - notepad++ 按下回车键时将结束标记向下移动两行

> ID：15822287
> 
> 赞同：1
> 
> 时间：2013-04-04T21:43:20.997
> 
> 标签：plugins, notepad++, auto-indent

我正在使用记事本++ 6.1 版。我安装了 TextFX 插件，以便在插入后自动关闭我的标签。然后我安装了 Indent By Fold 插件以在输入时缩进。我的问题是在标签之间，它将结束标签向下移动一行，并缩进它。我想将结束标记向下移动两行（不缩进），并且只缩进开始和结束标记之间的行。

这是当前在打开和关闭标签之间按 Enter 时发生的情况：

```
<table>
     </table> 
```

这是我在结束标签之间按下回车时想要得到的：

```
<table>
     Indent starts here
</table> 
```

# java - JOptionPane 循环输入，具有两个增量

> ID：15822291
> 
> 赞同：0
> 
> 时间：2013-04-04T21:43:38.693
> 
> 标签：java, arrays, swing, for-loop, joptionpane

好的，所以我在下面的循环中遇到了麻烦。此循环的预期目标是 userinput[k] 是已经在方法中按字母顺序排序的名称列表。然后这些名称将显示在下面的 InputDialog 中，其中将输入一个代表学位的数字。

我正在尝试匹配名称和学位。例如：在循环中，第一个用户输入将是 userinput[0]。我希望将数字输入然后蜜蜂度数[0]，然后依此类推....

问题是我如何使用 J 增量器存储该输入。所以我基本上得到的错误是 String degree[] = Integer......

```
for ( int k = 0;  k < userinput.length;  k++ ){      
     for (int j = 0; j < userinput.length; j++ ) {                    
         String input = JOptionPane.showInputDialog("Please enter the highest earned degree for the following person : " + userinput [ k ] +  "\n 1 = BS \n 2 = MS \n 3 = PhD");
         String degree[] = Integer.parseInt(input[]);
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:56:49.597

这是你想要做的吗？

```
int[] degree = new int[userInput.length];
for(int k = 0; k < userInput.length; k++) {
    String input = JOptionPane.showInputDialog("Please enter the highest earned degree for the following person : " + userinput [ k ] +  "\n 1 = BS \n 2 = MS \n 3 = PhD");
    degree[k] = Integer.parseInt(input);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:03:34.237

这是你想做的吗？

> 假设您已经将 userinput 声明为一定大小的字符串数组并为其赋值，并将 degree 声明为相同大小的字符串数组。

```
for ( int k = 0;  k < userinput.length;  k++ ){      
         String input = JOptionPane.showInputDialog("Please enter the highest earned degree for the following person : " + userinput [ k ] +  "\n 1 = BS \n 2 = MS \n 3 = PhD");
         degree[k] = input;
     }
} 
```

# delphi - Delphi TSplitter闪烁问题

> ID：15822299
> 
> 赞同：5
> 
> 时间：2013-04-04T21:44:03.470
> 
> 标签：delphi, flicker, vcl-styles

我正在使用启用了 VCL 样式的 Delphi，我想为我的表单更改 TSplitter 的颜色。我`TSplitter.Paint`在插入器类中重写以绘制比默认 VCL 样式`cBtnFace`颜色更深的颜色，但是在调整大小时表单上有明显的闪烁。有没有办法消除这种闪烁？

我已经尝试过这些方法来尝试减少闪烁，但都没有奏效：

1.  禁用 VCL 样式 ( `TSplitter.StyleElements := []`)。

2.  更改“拆分器”的 VCL 样式位图样式设计器的对象元素，但修改此对象元素不会更改拆分器的外观。

3.  试图处理对象`WM_ERASEBKGND`上的消息`TControl`，但我无法在我的插入器类中调用该过程。

    ```
    procedure WMEraseBkgnd(var Msg: TWMEraseBkgnd); message WM_ERASEBKGND;
    ...
    procedure TSplitter.WMEraseBkgnd(var Msg: TWMEraseBkgnd);
    begin
        // this is never invoked by the TSplitter
        Msg.Result := 1;
    end; 
    ```

摆脱闪烁的任何其他想法`TSplitter`？据我所知，没有 DoubleBuffer 属性`TSplitter`或类似的东西。

**更新**

不幸的是，我不能分享代码库，但我可以告诉你，这是在`TSplitter`闪烁时设置应用程序 UI 的方式：

```
TForm (DoubleBuffered = False)
-> BackgroundPanel (DoubleBuffered = True, ParentBackground = False)
-> -> A TGradient, image and label to fill the BackgroundPanel
-> LeftPanel (ParentBackground = False`, no flickering)
-> -> LeftPanelFrame and frame content (selective double buffering)
-> TSplitter
-> RightPanel (ParentBackground = False, no flickering)
-> -> RightPanelFrame and frame content (selective double buffering) 
```

表单顶部还有一个工具栏和一个主菜单，但其余的 UI 组件设置为 alClient（或 OnResized 以填充空间）。

我假设由于 BackgroundPanel 位于 LeftPanel `TSplitter`、 和 RightPanel 后面（即 Control -> Send to Back），BackgroundPanel 上的`DoubleBuffered = True`和`ParentBackground = False`将有助于减少/消除其前面直接 UI 层上任何组件的闪烁（即`TSplitter`)。但是，情况似乎并非如此。

也许我会尝试将 a`TPanel`作为 LeftPanel `TSplitter`、 和 RightPanel 的父级并设置它的`DoubleBuffered = True`and `ParentBackground = False`。稍后我将不得不尝试并返回。所以，它看起来像这样：

```
TForm
-> BackgroundPanel (DoubleBuffered = True, ParentBackground = False)
-> -> A TGradient, image and label to fill the BackgroundPanel
-> EncapsulatingPanel (DoubleBuffered = True, ParentBackground = False)
-> -> LeftPanel (ParentBackground = False)
-> -> -> LeftPanelFrame and frame content
-> -> TSplitter
-> -> RightPanel (ParentBackground = False)
-> -> -> RightPanelFrame and frame content 
```

最后，我应该注意，在调整大小时（窗口右侧的黑色轨迹），双缓冲 TForm 会显着减慢 UI，而不是在应用程序未调整大小时执行其他 UI 操作时。

**更新 2**

不幸的是，虽然我上面的方法（创建背景父级`TPanel`）修复了 上的闪烁`TSplitter`，但它也导致了其他奇怪的 UI 问题，也许@David Heffernan 在评论中提到了其中的一些问题。现在，我刚刚离开了闪烁的问题，因为拆分器只有 1px 宽，并且只有在调整宽度 + 高度时才会闪烁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T23:47:48.583

该`TSplitter`控件可能没有`DoubleBuffered`属性，但该属性应该在您体验闪烁的最上面的控件上实现——在大多数情况下是窗体。只要所有控件`ParentDoubleBuffered`仍然默认启用，它们都将获得此更改。

`DoubleBuffered`并不总能解决闪烁问题，在某些情况下会使情况变得更糟。您可以考虑仅`DoubleBuffered`在调整大小期间使用，然后在调整大小完成后将其关闭。此属性应仅用于实际正在调整大小的控件。例如，在调整表单大小时，在表单上启用`DoubleBuffered`。但是，当仅调整面板内容的大小时，请仅为该面板（及其所有子控件）启用它。

至于由于此更改导致的应用程序性能下降，您还可以考虑在调整大小时实现一个标志，这将暂停任何可能使其陷入困境的程序执行（任何重绘，如标签、图像等）。这本身也可能是您问题的解决方案（实际上可能是第二个答案）。

# r - 动物园时间序列在将多变量时间序列减少为单变量时间序列后丢失了 colname 信息

> ID：15822305
> 
> 赞同：1
> 
> 时间：2013-04-04T21:44:12.343
> 
> 标签：r, zoo

假设我们有以下多元时间序列

```
A=zoo(data.frame(x=100:101,y=200:201,z=300:301),1:2) 
```

在这里一切都很好`colnames(A)`。该函数给出

```
[1] "x" "y" "z" 
```

现在选择时间序列的特定日期

```
B=A[1,] 
```

`colnames(B)`给出与上面相同的结果。所以，一切都还好。

让我们进一步减少时间序列

```
C=B[,abs(B)>=300] 
```

在这种情况下，`colnames(C)`返回`NULL`。即，列名信息`z`丢失。

有关如何解决此问题的任何指示？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T21:46:13.817

设置`drop=FALSE`：

```
C=B[,abs(B)>=300,drop=FALSE] 
```

# jira - 在 Jira 中未选择具有默认值的自定义复选框

> ID：15822307
> 
> 赞同：0
> 
> 时间：2013-04-04T21:44:17.487
> 
> 标签：jira

在 Jira (5.1.3) 中，我创建了一个自定义 (Multi) 复选框

我只定义了一个选项（是），并将默认值设置为是。

编辑 jira 时，不会预先选中该复选框，即使默认值与该复选框的值相同。

这是jira中的错误吗？或者我需要做些什么来预先选择复选框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:02:50.563

我已经与 Atlassian (Jira) 支持人员进行了交谈，并且知道答案。问题的配置、问题是否已经存在以及您做事的顺序很重要。

当您设置默认值时，jira 会检测到更改并告诉您需要重新索引问题。但这并没有为现有问题设置默认值

您必须重新索引，然后选择应该使用默认值的所有问题（使用过滤器），并手动进行批量更新并设置它们的默认值。

之后的新问题应自动使用默认值。

# android - Android片段替换不做任何事情

> ID：15822310
> 
> 赞同：3
> 
> 时间：2013-04-04T21:44:42.353
> 
> 标签：android, android-fragments, master-detail, fragmenttransaction

我希望有人能澄清我在这里做错了什么。我在横向模式范例的平板电脑上有一个共同的主细节。唯一需要注意的是，master 中的一些元素在 Detail 部分打开 FragA，而其他元素在 detail 部分打开 FragB。一切似乎都很好，除了切换片段的实际过程。首先显示的片段是唯一显示的片段。我一直在使用 replace 方法将它们换掉，我能找到的关于该主题的所有 SO 评论都指出，如果我在 XML 中添加了详细信息片段，这将不起作用。不幸的是，这不适用于我，因为我动态添加了所有片段。我的代码如下所示：

```
FragmentInfo frag = (Helper.isImageViewable(fileSelected)) ?  getFragInfoByClass(ImageViewerFragment.class) : getFragInfoByClass(DownloadProgressFragment.class) ;
         FragmentTransaction ft = getFragmentManager().beginTransaction();
         if(frag.mFragment == null){
             frag.mFragment = Fragment.instantiate(NewMainActivity.this, frag.mClass.getName());
             ft.add(frag.target.getId(), frag.mFragment);
             ft.commit();
             ft = getFragmentManager().beginTransaction();
         } 
         ft.replace(frag.target.getId(), frag.mFragment);
         ft.commit(); 
```

这是在任何地方添加这些片段的唯一代码，似乎发生的情况是首先添加的片段都可以正常工作，但替换方法根本不起作用。无论是哪个片段都只是……仍然存在。

有谁知道我做错了什么？

**编辑**

布局文件的相关部分如下所示：

```
 <LinearLayout
    android:id="@+id/fragments_holder"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <FrameLayout
        android:id="@+id/list_fragment"
        android:layout_width="0dp"
        android:layout_weight="0.39"
        android:layout_height="match_parent" />

    <FrameLayout
        android:id="@+id/details_fragment"
        android:layout_height="match_parent"
        android:layout_weight="0.61"
        android:layout_width="0dp" />

    <!-- ADD METADATA VIEW HERE -->

</LinearLayout> 
```

两个 FragmentInfo 对象都正确地具有带有 id/details_fragment 的 FrameLayout 目标，这可以通过以下事实证明：如果它是添加的第一个，则任何一个都可以正常工作。

**编辑 2** 注意：使用这个代码块也有完全相同的结果：

```
FragmentInfo frag = (Helper.isImageViewable(fileSelected)) ?  getFragInfoByClass(ImageViewerFragment.class) : getFragInfoByClass(DownloadProgressFragment.class) ;
         FragmentTransaction ft = getFragmentManager().beginTransaction();
         if(frag.mFragment == null){
             frag.mFragment = Fragment.instantiate(NewMainActivity.this, frag.mClass.getName());
             ft.add(frag.target.getId(), frag.mFragment);
             //ft.commit();
             //ft = getFragmentManager().beginTransaction();
         } else{
             ft.replace(frag.target.getId(), frag.mFragment);
         }
         //ft.replace(frag.target.getId(), frag.mFragment);
         ft.commit();
         detailsContainer.setFragmentInfo(frag); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T12:16:06.840

替换实际上与一系列删除和添加操作相同。即使容器是空的，替换仍然可以安全使用（与简单的添加相同）。我更喜欢使用显式删除和添加操作，因为它更容易推理它们。

我认为您的代码示例在开始时存在一些问题，但是一旦初始化完成，似乎有一些正确的路径通过它。在第一个代码示例中，您使用相同的片段实例调用添加和替换（在尚未创建片段的情况下）。在您的第二个代码示例中，您不会删除旧片段（在尚未创建要添加的第二个片段的情况下）。

如果您注释掉（删除）双重添加，我认为您的第一个代码示例将正确执行替换操作：

```
FragmentInfo frag = (Helper.isImageViewable(fileSelected)) ?  getFragInfoByClass(ImageViewerFragment.class) : getFragInfoByClass(DownloadProgressFragment.class) ;
         FragmentTransaction ft = getFragmentManager().beginTransaction();
         if(frag.mFragment == null){
             frag.mFragment = Fragment.instantiate(NewMainActivity.this, frag.mClass.getName());
             // ft.add(frag.target.getId(), frag.mFragment);
             // ft.commit();
             // ft = getFragmentManager().beginTransaction();
         } 
         ft.replace(frag.target.getId(), frag.mFragment);
         ft.commit(); 
```

# cakephp - cakePHP：如何将持续时间格式化为 MM:SS

> ID：15822314
> 
> 赞同：1
> 
> 时间：2013-04-04T21:45:00.677
> 
> 标签：cakephp, cakephp-2.0

我的表单中有一个输入，需要以分钟和秒为单位指定时间长度（不是特定的日期/时间）。我该怎么做呢？

```
 echo $this->Form->input('time', array('type'=>'time', 'timeFormat'=>24));
    //results in HH:MM but I need MM:SS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:54:43.863

默认的 FormHelper 不支持这一点，因此您必须使用常规的“文本”输入 ( `'type' => 'text'`) 并解析/格式化`beforeValidate()`模型中的值。

或者，您可以创建两个下拉列表（分钟和秒），或者使用 dateTime 输入并使用 CSS 隐藏不相关的下拉列表，但这可能有点“脏”

您还需要创建自定义验证规则来验证您的价值；请参阅[添加您自己的验证方法](http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods)，因为内置的“时间”验证规则不会验证秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:55:45.390

我宁愿你选择 JS timepicker。只需将插件添加到您的项目中，并按照以下链接 [http://www.jquery4u.com/plugins/10-jquery-time-picker-plugins/中列出的要求使用其功能](http://www.jquery4u.com/plugins/10-jquery-time-picker-plugins/)

希望这会有所帮助！

# c# - 选择另一个值后，下拉列表变为默认值

> ID：15822316
> 
> 赞同：-1
> 
> 时间：2013-04-04T21:45:09.700
> 
> 标签：c#, asp.net, drop-down-menu, detailview

我在 Visual Studio 2010 中创建了一个下拉列表。我进行了代码设置，以便当我单击列表中的某个值时，文本框变得可见。然后，我可以将值插入文本框，单击插入，这些值将存储到我的数据库中。

问题：我的下拉列表具有值（按顺序：“选择值”、“值 1”、“值 2”、“值 3”。选择值 1 时，下拉列表下方会出现正确的文本框，但值下拉列表默认为“选择一个值”。因此，当我插入数据时，“选择一个值”出现在我的数据库中（糟糕！！）。我发现解决此问题的唯一方法是单击一个值两次。只有这样下拉列表的值才会保持为选定的值。我想只单击一次下拉列表值，并保持设置值。我做错了什么？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:56:01.537

如果没有实际的代码，很难确定问题所在，所以我只是在这里给你我最好的猜测......

您可能在页面加载或其他地方重新绑定下拉列表的数据源。在您的 Page_Load 事件中，像这样绑定项目：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        this.initialize();
    }
}

private void initialize()
{
    // populate the items of your dropdownlist here!
} 
```

# macos - 在 Cocoa 中，在给定的持续时间内以给定的频率产生音调

> ID：15822318
> 
> 赞同：2
> 
> 时间：2013-04-04T21:45:16.110
> 
> 标签：macos, cocoa

我正在为 mac os x 编写一个应用程序，该应用程序需要以用户指定的频率在用户指定的持续时间内产生哔哔声。我搜索了答案，但 iOS 只有几个代码片段，而 mac os x 则没有。

我是 Cocoa 编程的新手；有人可以指出我应该在哪里寻找我需要的功能吗？

编辑：在发布这个问题之前，我已经检查了其他答案；接受的答案基本上是说没有办法做到这一点（这不是答案）。此外，它还解决了使用哔哔声作为警报的问题，但我并不是要提醒用户。

我不想发出*一声*哔哔声。生成 .wav 文件对我没有帮助。考虑一个摩尔斯电码生成器，其中用户提供输入，程序输出 dit-dah-dits，除了我还需要输出的频率根据用户输入而变化。

# jquery - $.parseJSON 与 JsonConvert.SerializeObject

> ID：15822323
> 
> 赞同：2
> 
> 时间：2013-04-04T21:45:37.740
> 
> 标签：jquery, json, asp.net-mvc-3

将 .net 类序列化为 json 并在 javascript 中使用它的正确方法是什么？

例如在服务器端我们有这个：

```
 public ActionResult Index()
    {
        var someClass = new SomeClass { Message = "let's try <b> this </b> and this \" " };
        ViewBag.someDataJson = JsonConvert.SerializeObject(someClass);
        return View();
    }

    public class SomeClass
    {
        public string Message;
    } 
```

在客户端：

```
<script type="text/javascript">
    $(document).ready(function() {
        var someData = $.parseJSON("@Html.Raw(ViewBag.someDataJson)");
        alert(someData.Message);
    });
</script> 
```

将导致：

```
var someData = $.parseJSON("{"Message":"let's try <b> this </b> and this \" "}"); 
```

这是不正确的。同样没有 Html.Raw() 结果也将是不正确的：

```
var someData = $.parseJSON("{&quot;Message&quot;:&quot;let&#39;s try &lt;b&gt; this &lt;/b&gt; and this \&quot; &quot;}"); 
```

谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T21:49:42.827

这是[一篇关于如何做到这一点的小博客文章。](http://blog.falafel.com/Blogs/basem-emara/2012/05/16/convert-a-c-object-to-javascript-in-mvc-razor)

它用[`Json.Encode(someClass)`](http://msdn.microsoft.com/en-us/library/system.web.helpers.json.encode%28v=vs.111%29.aspx)

```
var someData = @Html.Raw(Json.Encode(yourViewModelCSharpObject)) 
```

您会将实际对象传递给视图，而不是 JSON 字符串表示。

祝你好运！

# c++ - 删除指针数组及其对象的正确方法是什么？

> ID：15822327
> 
> 赞同：0
> 
> 时间：2013-04-04T21:45:51.413
> 
> 标签：c++, arrays, pointers, dynamic

```
ppTile = new Tile*[tileN];
    for(int x=0; x<tileN; x++)
    {
        ppTile[x] = new Tile(Tile::TileType(pCData->GetdefaultTile()),
                            ((x*2)+1) % (mapSize+(mapSize-1)),
                            ( x/ ((float)mapSize-0.5) )+1,
                            pCData->GetdefaultHeight()
                            );
    } 
```

如何删除 Tile* 数组和 Tile 对象？

编辑：这是我的猜测：

```
Map::~Map()
{
    if(ppTile)
    {
        for(int x=0; x<mapSize*(mapSize-1); x++)
        {
            delete ppTile[x];
        }
        delete[] ppTile;
    }
} 
```

是对的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T21:47:35.493

您遍历`Tile*`s 和`delete`每个，然后`delete[]`是大的。

```
for(int x=0; x<tileN; x++)
{
    delete ppTile[x];
}
delete[] ppTile; 
```

一个好的经验法则是有一个`delete`for each`new`和一个`delete[]`for each `new[]`。

您可以通过使用`std::vector`智能指针来避免麻烦。

**根据您的编辑：**

我会避免检查`if(ppTile)`。调用`delete`NULL 指针是明确定义的，但检查也容易出错 - 如果该指针 is`NULL`和`mapSize*(mapSize-1)`is not `0`，您将隐藏一个逻辑错误。

# php - 计算具有条件的子类别

> ID：15822331
> 
> 赞同：0
> 
> 时间：2013-04-04T21:46:07.383
> 
> 标签：php, mysql

我有 2 张桌子：`categories`和`products`.

类别有父子关系结构，数据是通过加入同一张表来获取的。

获取数据时，我必须计算：

1.  每个类别包含多少***产品***`stock >= 1`
2.  一个类别包含多少***个子***类别，其中至少包含 1 个产品`stock >= 1`

 ````
SELECT c. * , count( DISTINCT s.cat_id ) AS number_of_subcategories, count( DISTINCT p.id ) AS number_of_products FROM categories c
LEFT JOIN categories s 
  ON s.parent_id = c.cat_id
LEFT JOIN products p 
  ON p.cat_id = c.cat_id AND p.stock >= 1
GROUP BY c.cat_name
ORDER BY number_of_products ASC 
```

乍一看一切顺利，但不幸的是我得到***了所有子类别的总数***。

我是否会再错过一次加入，或者到目前为止我的问题是什么？

这是代码：[SQLFiddle](http://sqlfiddle.com/#!2/82494/7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:11:35.440

您可以更改查询以使用子查询来获取与此类似的子类别的数量：

```
SELECT c.cat_id,
  c.parent_id,
  c.cat_name,
  count(sp.cat_id)  AS number_of_subcategories,
  count(DISTINCT p.id) AS number_of_products
FROM `categories` c
LEFT JOIN
(
  select distinct s.cat_id, s.parent_id
  from categories s 
  inner join products p
    on s.cat_id = p.cat_id
  where p.stock > 1
) sp
  ON sp.parent_id = c.cat_id
LEFT JOIN products p 
  ON p.cat_id = c.cat_id 
  AND p.stock >= 1
GROUP BY c.cat_id, c.parent_id, c.cat_name; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/82494/36)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:49:43.397

尝试更改`AND`为`WHERE`. 它有效吗？

弗朗西斯科`

# c# - UpdatePanel 定时器触发器不工作

> ID：15822332
> 
> 赞同：2
> 
> 时间：2013-04-04T21:46:13.023
> 
> 标签：c#, asp.net, ajax, timer, updatepanel

我正在尝试让计时器触发对 UpdatePanel 的更新，但无法触发事件。我正在使用的示例非常基本，我不确定需要检查什么才能深入了解。

我有一个长时间运行的过程（大约一个小时）来评估数据库内容并挑选出有问题的行。我想创建一个页面，允许用户执行该过程并在它移动时查看进度。当发现问题行时，我想将该信息打印到页面上，以便用户可以立即看到它，而不是等待任务完成。

为此，我想我会使用每秒有一个 Timer 触发器的 UpdatePanel。此页面只能由私人服务器上的管理员访问，因此流量不是问题。我不确定这是不是最好的方法，所以如果我应该考虑另一种方法来完成这项任务，请随时提出建议。

为了测试我从 UpdatePanel Timer 的示例开始的概念，[会导致所有面板更新](https://stackoverflow.com/questions/11634232/updatepanel-timer-causes-all-panels-to-update)。我按照建议修改了一些东西，并提出了下面显示的代码。

当我执行代码时，我可以选择一个下拉选项并让第二个 UpdatePanel 进行更新，但 Timer 永远不会执行。我在 Timer1_Tick 函数上放置了一个断点，但它没有被命中。

我还观察到，当我从下拉列表中选择一个项目时，会点击 Page_Load。我没想到更新时会触发此功能，是吗？

ASPX 文件：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="MissingTitles2.aspx.cs" Inherits="TestCode_AJAX_MissingTitles2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
 <form id="form1" runat="server">
<div>
    <asp:Label runat="server" ID="NoChangeLabel"></asp:Label>
    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <br />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Label ID="Label1" runat="server" Text="not updated yet"></asp:Label>
            <asp:Timer ID="Timer1" runat="server" Interval="3000" OnTick="Timer1_Tick"></asp:Timer>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
        </Triggers>
    </asp:UpdatePanel>
    <br />
    <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Label ID="Label2" runat="server" Text="also not updated yet"></asp:Label>
    <br />
    <br />
    <asp:DropDownList  OnSelectedIndexChanged="dropDown_indexChange" ID="DropDownList1" runat="server" AutoPostBack="True">
        <asp:ListItem>This</asp:ListItem>
        <asp:ListItem>That</asp:ListItem>
        <asp:ListItem>The Other</asp:ListItem>
    </asp:DropDownList>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="DropDownList1"  EventName="SelectedIndexChanged" />
        </Triggers>
    </asp:UpdatePanel>
</div>
</form>
</body>
</html> 
```

这是 ASPX.CS 文件：

```
using System;

public partial class TestCode_AJAX_MissingTitles2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        NoChangeLabel.Text = "Current time: " + DateTime.Now.ToLongTimeString();
    }

    protected void Timer1_Tick(object sender, EventArgs e)
    {
        Label1.Text = "UpdatePanel1 refreshed at: " +
      DateTime.Now.ToLongTimeString();

    }

    protected void dropDown_indexChange(object sender, EventArgs e)
    {
        Label2.Text = "UpdatePanel2 refreshed at: " +
          DateTime.Now.ToLongTimeString();
    }
} 
```

我正在使用带有 ASP.NET 4.0 的 Visual Studio 2010。
我已经使用 localhost 和 127.0.0.1 作为域进行了测试。

Web.Config 摘录：

```
<system.web>
    <webParts>
      <personalization defaultProvider="EktronPersonalizationProvider">
        <providers>
          <add connectionStringName="Ektron.DbConnection" name="EktronPersonalizationProvider" type="Ektron.Cms.EktronPersonalizationProvider"/>
        </providers>
        <authorization>
          <allow users="*" verbs="enterSharedScope"/>
          <allow users="*" verbs="modifyState"/>
        </authorization>
      </personalization>
    </webParts>
    <membership defaultProvider="EktronMembershipProvider">
      <providers>
        <remove name="AspNetSqlProvider"/>
        <add name="EktronMembershipProvider" type="Ektron.Cms.EktronMembershipProvider" connectionStringName="Ektron.DbConnection"/>
      </providers>
    </membership>
    <compilation debug="true" targetFramework="4.0">
      <buildProviders>
        <add extension=".htm" type="System.Web.Compilation.PageBuildProvider"/>
        <add extension=".html" type="System.Web.Compilation.PageBuildProvider"/>
      </buildProviders>
      <codeSubDirectories>
        <add directoryName="CSCode"/>
        <add directoryName="VBCode"/>
      </codeSubDirectories>
      <assemblies>
        <add assembly="System.DirectoryServices,Version=4.0.0.0,Culture=neutral,PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Security,Version=4.0.0.0,Culture=neutral,PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Management,Version=4.0.0.0,Culture=neutral,PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Configuration.Install,Version=4.0.0.0,Culture=neutral,PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Windows.Forms,Version=4.0.0.0,Culture=neutral,PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.ServiceProcess,Version=4.0.0.0,Culture=neutral,PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Messaging,Version=4.0.0.0,Culture=neutral,PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Runtime.Remoting,Version=4.0.0.0,Culture=neutral,PublicKeyToken=B77A5C561934E089"/>
        <add assembly="Microsoft.VisualBasic.Compatibility,Version=10.0.0.0,Culture=neutral,PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Design,Version=4.0.0.0,Culture=neutral,PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Web.Extensions,Version=4.0.0.0,Culture=neutral,PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="Microsoft.VisualBasic,Version=10.0.0.0,Culture=neutral,PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Data.DataSetExtensions,Version=4.0.0.0,Culture=neutral,PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.ComponentModel.Composition,Version=4.0.0.0,Culture=neutral,PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
    <caching>
      <outputCacheSettings>
        <outputCacheProfiles>
          <add name="PageLevelCaching" duration="120" varyByCustom="IsLoggedIn" varyByParam="*" location="Server"/>
        </outputCacheProfiles>
      </outputCacheSettings>
    </caching>
    <pages clientIDMode="AutoID" controlRenderingCompatibilityVersion="3.5" validateRequest="false">
      <controls>
        <add tagPrefix="ektronUI" namespace="Ektron.Cms.Framework.UI.Controls.EktronUI" assembly="Ektron.Cms.Framework.UI.Controls.EktronUI, Culture=neutral, PublicKeyToken=559a2c4fa21e63be"/>
        <add tagPrefix="ektron" namespace="Ektron.Cms.Framework.UI.Controls" assembly="Ektron.Cms.Framework.UI.Controls, Culture=neutral, PublicKeyToken=559a2c4fa21e63be"/>
        <add tagPrefix="ektron" namespace="Ektron.Cms.Framework.UI.Controls.Views" assembly="Ektron.Cms.Framework.UI.Controls, Culture=neutral, PublicKeyToken=559a2c4fa21e63be"/>
      </controls>
      <namespaces>
        <clear/>
        <add namespace="System"/>
        <add namespace="System.Collections"/>
        <add namespace="System.Collections.Generic"/>
        <add namespace="System.Collections.Specialized"/>
        <add namespace="System.Configuration"/>
        <add namespace="System.Text"/>
        <add namespace="System.Text.RegularExpressions"/>
        <add namespace="System.Linq"/>
        <add namespace="System.Xml.Linq"/>
        <add namespace="System.Web"/>
        <add namespace="System.Web.Caching"/>
        <add namespace="System.Web.SessionState"/>
        <add namespace="System.Web.Security"/>
        <add namespace="System.Web.Profile"/>
        <add namespace="System.Web.UI"/>
        <add namespace="System.Web.UI.WebControls"/>
        <add namespace="System.Web.UI.WebControls.WebParts"/>
        <add namespace="System.Web.UI.HtmlControls"/>
      </namespaces>
    </pages>
    <customErrors mode="Off"/>
    <authentication mode="Forms">
      <forms cookieless="UseCookies"/>
    </authentication>
    <identity impersonate="false" userName="" password=""/>
    <authorization>
      <allow users="*"/>
    </authorization>
    <trace enabled="false" requestLimit="10" pageOutput="false" traceMode="SortByTime" localOnly="true"/>
    <sessionState mode="InProc" stateConnectionString="tcpip=127.0.0.1:42424" sqlConnectionString="data source=127.0.0.1;Trusted_Connection=yes" cookieless="false" timeout="20"/>
    <globalization requestEncoding="utf-8" responseEncoding="utf-8"/>
    <webServices>
      <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
      </protocols>
    </webServices>
    <httpRuntime maxRequestLength="2097151" requestLengthDiskThreshold="2097151" requestValidationMode="2.0"/>
  </system.web>
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <clear/>
      <add name="WebServiceHandlerFactory-Integrated" path="*.asmx" verb="*" type="System.Web.Script.Services.ScriptHandlerFactory" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
      <add name="rules-Integrated" path="*.rules" verb="*" type="System.ServiceModel.Activation.HttpHandler, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="integratedMode"/>
      <add name="rules-ISAPI-2.0" path="*.rules" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv2.0,bitness32"/>
      <add name="rules-64-ISAPI-2.0" path="*.rules" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv2.0,bitness64"/>
      <add name="xoml-Integrated" path="*.xoml" verb="*" type="System.ServiceModel.Activation.HttpHandler, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="integratedMode"/>
      <add name="xoml-ISAPI-2.0" path="*.xoml" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv2.0,bitness32"/>
      <add name="xoml-64-ISAPI-2.0" path="*.xoml" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv2.0,bitness64"/>
      <add name="ISAPI-dll" path="*.dll" verb="*" modules="IsapiModule" resourceType="File" requireAccess="Execute" allowPathInfo="true"/>
      <add name="TraceHandler-Integrated" path="trace.axd" verb="GET,HEAD,POST,DEBUG" type="System.Web.Handlers.TraceHandler" preCondition="integratedMode"/>
      <add name="WebAdminHandler-Integrated" path="WebAdmin.axd" verb="GET,DEBUG" type="System.Web.Handlers.WebAdminHandler" preCondition="integratedMode"/>
      <add name="AssemblyResourceLoader-Integrated" path="WebResource.axd" verb="GET,DEBUG" type="System.Web.Handlers.AssemblyResourceLoader" preCondition="integratedMode"/>
      <add name="WorkareaHandler" path="*/WorkArea/ContentDesigner/configurations/*.aspx" verb="GET,HEAD,POST,DEBUG" type="System.Web.UI.PageHandlerFactory" preCondition="integratedMode"/>
      <add name="PageHandlerFactory-Integrated" path="*.aspx" verb="GET,HEAD,POST,DEBUG" type="System.Web.UI.PageHandlerFactory" preCondition="integratedMode"/>
      <add name="SimpleHandlerFactory-Integrated" path="*.ashx" verb="GET,HEAD,POST,DEBUG" type="System.Web.UI.SimpleHandlerFactory" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode"/>
      <add name="HttpRemotingHandlerFactory-rem-Integrated" path="*.rem" verb="GET,HEAD,POST,DEBUG" type="System.Runtime.Remoting.Channels.Http.HttpRemotingHandlerFactory, System.Runtime.Remoting, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="integratedMode"/>
      <add name="HttpRemotingHandlerFactory-soap-Integrated" path="*.soap" verb="GET,HEAD,POST,DEBUG" type="System.Runtime.Remoting.Channels.Http.HttpRemotingHandlerFactory, System.Runtime.Remoting, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="integratedMode"/>
      <add name="AboMapperCustom-4879914" path="*.htw" verb="GET,HEAD,POST" modules="IsapiModule" scriptProcessor="C:\Windows\system32\webhits.dll" requireAccess="Script" responseBufferLimit="0"/>
      <add name="AboMapperCustom-4879915" path="*.ida" verb="GET,HEAD,POST" modules="IsapiModule" scriptProcessor="C:\Windows\system32\idq.dll" resourceType="File" requireAccess="Script" responseBufferLimit="0"/>
      <add name="AboMapperCustom-4879916" path="*.idq" verb="GET,HEAD,POST" modules="IsapiModule" scriptProcessor="C:\Windows\system32\idq.dll" resourceType="File" requireAccess="Script" responseBufferLimit="0"/>
      <add name="EktronWorkflowImage" path="*/wfactivities.png" verb="*" type="Ektron.Workflow.Image.Handler.WFImageHandler,Ektron.Workflow.Image"/>
      <add name="AXD-ISAPI-2.0-64" path="*.axd" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness64" responseBufferLimit="0"/>
      <add name="PageHandlerFactory-ISAPI-2.0-64" path="*.aspx" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness64" responseBufferLimit="0"/>
      <add name="SimpleHandlerFactory-ISAPI-2.0-64" path="*.ashx" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness64" responseBufferLimit="0"/>
      <add name="WebServiceHandlerFactory-ISAPI-2.0-64" path="*.asmx" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness64" responseBufferLimit="0"/>
      <add name="HttpRemotingHandlerFactory-rem-ISAPI-2.0-64" path="*.rem" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness64" responseBufferLimit="0"/>
      <add name="HttpRemotingHandlerFactory-soap-ISAPI-2.0-64" path="*.soap" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness64" responseBufferLimit="0"/>
      <add name="AXD-ISAPI-2.0" path="*.axd" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness32" responseBufferLimit="0"/>
      <add name="PageHandlerFactory-ISAPI-2.0" path="*.aspx" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness32" responseBufferLimit="0"/>
      <add name="SimpleHandlerFactory-ISAPI-2.0" path="*.ashx" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness32" responseBufferLimit="0"/>
      <add name="WebServiceHandlerFactory-ISAPI-2.0" path="*.asmx" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness32" responseBufferLimit="0"/>
      <add name="HttpRemotingHandlerFactory-rem-ISAPI-2.0" path="*.rem" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness32" responseBufferLimit="0"/>
      <add name="HttpRemotingHandlerFactory-soap-ISAPI-2.0" path="*.soap" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness32" responseBufferLimit="0"/>
      <add name="TRACEVerbHandler" path="*" verb="TRACE" modules="ProtocolSupportModule" requireAccess="None"/>
      <add name="ek*" path="*" verb="GET,HEAD,POST" type="Ektron.ASM.EkHttpDavHandler.EkDavHttpHandlerFactory" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" preCondition=""/>
      <add name="ekdav" path="*" verb="OPTIONS,PROPFIND,PUT,LOCK,UNLOCK,MOVE,COPY,GETLIB,PROPPATCH,MKCOL,DELETE,(GETSOURCE),(HEADSOURCE),(POSTSOURCE)" type="Ektron.ASM.EkHttpDavHandler.EkDavHttpHandlerFactory" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" preCondition=""/>
      <add name="StaticFile" path="*" verb="*" modules="StaticFileModule,DefaultDocumentModule,DirectoryListingModule" resourceType="Either" requireAccess="Read"/>

    </handlers>
    <modules>
      <add name="MyDigestAuthenticationModule" type="Ektron.ASM.EkHttpDavHandler.Security.DigestAuthenticationModule,Ektron.ASM.EkHttpDavHandler"/>
      <add name="EkUrlAliasModule" type="Ektron.Cms.Settings.UrlAliasing.URLAliasingModule" preCondition="integratedMode"/>
      <add name="EkUrlRedirectModule" type="Ektron.Cms.Settings.UrlAliasing.URLRedirectModule" preCondition="integratedMode"/>
      <add name="EkMobileDeviceModule" type="Ektron.Cms.Settings.UrlAliasing.MobileDeviceModule" preCondition="integratedMode"/>
      <add name="EkAssetServerModule" type="EktronAssetServerModule" preCondition="integratedMode"/>
      <add name="EkHelpModule" type="HelpModule" preCondition="integratedMode"/>
    </modules>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="2147483648"/>
      </requestFiltering>
    </security>
    <caching>
      <profiles>
        <add extension=".xslt" policy="DontCache" kernelCachePolicy="DontCache"/>
        <add extension=".xsl" policy="DontCache" kernelCachePolicy="DontCache"/>
        <add extension=".aspx.cs" policy="DontCache" kernelCachePolicy="DontCache"/>
      </profiles>
    </caching>
  </system.webServer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:41:28.923

我终于明白了这一点。最后，这归结为 web.config 文件中的设置。

混淆的一个来源是我创建的测试项目在 web.config 文件中不需要任何这些。非测试项目要复杂得多，并且必须具有导致需要这些附加行的设置。我很好奇导致需要这个的确切设置，所以如果有人知道，这将有助于添加到讨论中。

在 web.config 文件中添加以下条目可以纠正这种情况并允许 UpdatePanel 运行：

```
 <system.webServer>
    <handlers>
      <clear />
      <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      <!-- Make sure wildcard rules are below the ScriptResource tag -->
    </handlers>
    <modules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <!-- Other modules are added here -->
    </modules>
  </system.webServer> 
```

这是一个问题的链接，在故障排除时很有帮助，以防万一有人遇到同样的问题：[系统未定义](https://stackoverflow.com/questions/75322/sys-is-undefined/16109767)

感谢所有发表评论的人，他们对我继续前进并确保我在正确的位置进行故障排除非常有帮助.

# tfs - TFS2012 与 Jetbrains TeamCity+YouTrack

> ID：15822336
> 
> 赞同：4
> 
> 时间：2013-04-04T21:46:46.647
> 
> 标签：tfs, scrum, youtrack, teamcity-7.0

我们在云上使用了 TFS2012，但我们不喜欢没有报告服务，因此我们希望迁移到本地 TFS2012。同时，我们开始喜欢 Git，我们认为它可能比 TFS 版本控制更有意义。

这显然需要研究人员和开发人员“扮演管理员”的角色，因此我们正在花时间评估 Jetbrains 高度评价的解决方案是否更适合。

假设有一个 6-8 人的团队使用 Scrum 并渴望参加敏捷的“最佳实践”培训，以及一个结合了后端 .NET 技术和前端 Javascript (AngularJS) 的项目，考虑从 TFS2012 迁移到 TeamCity/YouTrack/Git 堆栈，用于 scrum 规划、源代码控制、持续集成和质量控制以及问题跟踪：

*   TFS2012 我们会/可能会错过什么？
*   我们将从新堆栈中享受什么？
*   新堆栈是否在 TFS 没有的任何方面都不足，反之亦然？

注意：这是 TFS2012 特有的问题 - 对于以前的 TFS 版本和 TeamCity，SO 和其他地方有几个比较，也许 YouTrack 也是如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T10:36:46.463

下面简要介绍一下我在 Git/YouTrack 方面的两周经验与 6 个月的 TFS 经验。

新堆栈感觉比 TFS 轻得多。安装（我们很快尝试了本地 TFS）和使用 TFS 都无缘无故地给人一种非常重量级的企业套件的感觉。这部分是 UI 设计给人的错觉，但在 YouTrack 中似乎是这样的：

*   如果您学习一些快捷方式以及如何使用命令，则执行任何操作所需的点击次数更少，甚至更少。
*   在视图之间导航更容易 - 视图较少，但比 TFS 提供更好的概览。这并不是因为它们提供了更多的信息——在大多数情况下，它们提供的信息更少——而是因为它们以一种视觉清晰的方式提供了关键信息。
*   在 YouTrack 中运行临时搜索的能力产生了如此大的不同！在 TFS 中，您必须创建一个带有 UI 的查询，该 UI 试图使其更容易，但最终使您更难于输入查询参数。我的意思是，我们毕竟是开发人员。
*   我很喜欢 Git 的本地提交，以及拉取请求如何将其他人的工作集成到主分支与在 TFS 上合并。
*   TeamCity 使用起来也非常轻量级——尽管我没有在 TFS 上使用 CI 的经验。话虽如此，这是一个我没有深入研究的领域，因为我已经花费了大量时间来管理 TFS。

我在 TFS 中错过的小问题和事情：

*   使用 YouTrack 管理发布有点困难，或者我还没有弄清楚如何有效地做到这一点。在 TFS 上，产品 backlog、release backlog 和 sprint backlog 的管理和分离更容易。
*   没有办法根据开发人员的能力来计划冲刺——不过我相信 JetBrains 正在努力。
*   你必须为私人 Git 付费——尽管 YouTrack/TeamCity 对少数用户是免费且功能齐全的。

我会尽量保持最新状态。

# javascript - 标题属性数组

> ID：15822339
> 
> 赞同：0
> 
> 时间：2013-04-04T21:47:05.953
> 
> 标签：javascript, variables, attributes

嗨，我得到了标题属性“Knit, Main”。目前 var 认为它是一个单词，是否有一些像 "," 这样的符号会让 var 在数组中处理它们？

title="针织，主要"

```
var titleIs = [this.title];
alert(titleIs.length); // at the moment this is 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:49:16.397

使用 JavaScript`split`函数

[http://www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:50:17.080

试试这个：

```
var titles = this.title.split(/,\s?/) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T21:52:37.487

尝试使用这个

```
var titleIs = this.title; //if use this.title like string not array [this.title]
alert(titleIs.split(/,\s?/)); 
```

# eclipse - Glassfish 4（开发构建）+ Eclipse Juno

> ID：15822344
> 
> 赞同：2
> 
> 时间：2013-04-04T21:47:28.250
> 
> 标签：eclipse, jakarta-ee, eclipse-plugin, glassfish, eclipse-juno

我正在尝试一些仅在 Glassfish4（开发版本）中可用的新功能。我当前的 Eclipse 插件不允许我连接到 glassfish4 - 列表中没有 4.x 版本。

有什么办法可以让它工作吗？我想从 Eclipse 部署/启动应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:54:22.600

如果您使用的是比 Juno 更早的 Eclipse……您不能使用 GlassFish 4。

如果您有 Juno，您可以安装一个插件来注册 GlassFish 4 服务器运行时。在尝试更新当前的 GlassFish 插件之前，请务必阅读[https://blogs.oracle.com/piotrik/entry/new_version_of_glassfish_eclipse 。](https://blogs.oracle.com/piotrik/entry/new_version_of_glassfish_eclipse)如果您没有在 Juno 中安装 GlassFish 插件，您可能会忽略该页面的几乎所有内容。

如果您安装了 Kepler M6，您可以试用 GlassFish 服务器适配器 (GFSA) 和 GlassFish 4 运行时插件 (GF4RTP)。GFSA 可在此处获得：http: [//download.java.net/glassfish/eclipse/kepler](http://download.java.net/glassfish/eclipse/kepler)

Kepler GFSA 的最新更新应该与集成到 Kepler 里程碑 6 版本中的 Java EE 7 功能很好地配合使用。

GF4RTP 可在此处获得：http: [//download.java.net/glassfish/eclipse/kepler/runtime](http://download.java.net/glassfish/eclipse/kepler/runtime)

注意：download.java.net/glassfish/eclipse/* 下的所有可用位都是开发人员流位。它们不是“生产质量”，并且可以从愿意尝试它们的用户那里获得反馈。如果您必须做一些关键的事情，您可能需要等待将被集成到 Oracle Enterprise Pack for Eclipse 中的位。

# java - ProgrammaticLogin 不起作用

> ID：15822349
> 
> 赞同：0
> 
> 时间：2013-04-04T21:47:45.050
> 
> 标签：java, jakarta-ee

我有企业应用程序和企业客户端应用程序（我使用 glassfish 服务器）。为了在客户端应用程序中使用 ProgrammaticLogin，我应该怎么做？每个博客或书籍都描述了如何在数据库中创建表、glassfish 上的 jdbc 领域和映射角色组。就这样。Oracle 官方网站说：

> 如果启用了安全管理器，则需要 ProgrammaticLoginPermission 权限才能调用应用程序的编程登录机制。有关安全管理器的信息，请参阅 server.policy 文件。默认情况下，此权限不会授予已部署的应用程序，因为这不是标准的 Java EE 机制。
> 
> 要授予应用程序所需的权限，请将以下内容添加到 domain-dir/config/server.policy 文件：
> 
> 授予 codeBase "file:jar-file-path" { 权限 com.sun.appserv.security.ProgrammaticLoginPermission "login"; };

但我没有找到任何关于它的例子，所以我不确定它是否是强制性的。更重要的是，我想应该有一个步骤告诉 ProgrammaticLogin 使用哪个领域？现在，ProgrammaticLogin 总是返回 true（对于错误的密码也是如此），我确信这是因为没有教程描述所有必要的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T13:05:31.800

我自己也在尝试同样的事情。到目前为止，我在网上发现的内容也很有趣，javaee5 规范中为此 api 指定的所有方法现在都已弃用，并且指定了带有 char[] arg1（而不是字符串密码）的方法可供使用。这些方法没有任何 api 信息，简单的 password.toCharArray() 根本不起作用。

另一方面，登录虽然部分适用于我。虽然它总是返回 true，但在登录失败时确实会引发异常。但我认为它本身并没有执行登录，即使在执行 ProgrammaticLogin 的登录功能后，容器仍然要求我登录。我在 web 容器中使用它，我想这可能是因为我没有使用提供 HttpServletRequest 和 Response 的功能......我已经在 Glassfish 域的 server.policy 中添加了权限，虽然像这样：

```
grant codeBase "file:${com.sun.aas.instanceRoot}/applications/-" {
    permission com.sun.appserv.security.ProgrammaticLoginPermission
    "login";
};
grant codeBase "file:${com.sun.aas.instanceRoot}/eclipseApps/-" {
    permission com.sun.appserv.security.ProgrammaticLoginPermission
    "login";
}; 
```

编辑：我已经放弃了这种登录方式，至少对于 web 容器。这对于验证 EJB 或类似的东西可能仍然有用，这部分至少可能会起作用。

就我而言，我只是使用了来自此处的 BalusC 的答案[Performing user authentication in Java EE / JSF using j_security_check](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0)（使用 Servlet 3.0 的 HttpServletRequest.login() ），另一个高票数的答案可能也可以解决问题。

# javascript - 风格 - 如何区分事件类型

> ID：15822352
> 
> 赞同：0
> 
> 时间：2013-04-04T21:47:56.073
> 
> 标签：javascript

简单的命名约定问题。

我在同一个全局变量下有两个事件系统。

```
NS 
```

一个抽象 dom 事件，另一个是基本的 pub/sub 系统。

每个都有自己的方法列表。

我打算这样命名事件。

```
NS.Event.trigger(name); 
```

另一个我打算这样命名。

```
NS.EventDom.add(type, func); 
```

这些是好名字吗？我需要好的 API 名称并希望遵循名词/动词约定。

会`NS.EventD.add(type, func)`工作吗？

缩写可以吗？

另一种选择是

```
NS.Event 
```

和

```
NS.Ev 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:52:42.347

很难明确回答的问题，因为 API 和命名是计算机科学中真正困难的两件事（我认为在某处有适当的引用，但无论如何......）。

我会在名称上保持某种一致性，例如`DomEvent`and `XXXEvent`，其中 XXX 是关于它是什么类型的事件的描述性内容，例如 - `XhrEvent`or `ServerEvent`。`EventDom`对我来说听起来不对。 `DomEvent`对我来说听起来更像是正确的英语，使用这种风格将是惯用的 Java（如果不是 JavaScript）。

而且我不会在名称中使用缩写。 `Ev`对我没有任何意义。

# google-api - 如何根据freebase中的位置过滤？

> ID：15822353
> 
> 赞同：1
> 
> 时间：2013-04-04T21:48:05.027
> 
> 标签：google-api, freebase

我一直在尝试根据位置过滤建议，但没有成功。我想显示国家的所有地点、城市、城镇、村庄：印度

我应该对以下代码进行哪些更改？

```
<script type="text/javascript">
$("#myinput")
  .suggest({
    "key": "my key",
  filter: '(any type:/location/location )'

  })
 .bind("fb-select", function(e, data) {
   alert(data.name + ", " + data.id + " (" + data['n:type'].name + ")");
});
      </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:59:42.143

使用搜索过滤器执行此操作的方法是使用`part_of` [Metaschema 谓词](https://developers.google.com/freebase/v1/search-cookbook#metaschema-constraints)，如下所示：

```
<script type="text/javascript">
$("#myinput")
  .suggest({
    "key": "my key",
  filter: '(all type:/location/location part_of:/m/03rk0)'

  })
 .bind("fb-select", function(e, data) {
   alert(data.name + ", " + data.id + " (" + data['n:type'].name + ")");
});
</script> 
```

Metaschema`part_of`谓词是可传递的，这意味着它匹配`part_of`印度 (/m/03rk0) 或印度等`part_of`位置的Freebase 主题。`part_of`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:51:25.470

Shawn 的方法适用于正确设置了包含属性的主题，但我不确定覆盖范围有多好。我怀疑简单的地理数据（纬度/经度）覆盖范围更好。如果您只想过滤与印度质心的距离，您可以执行以下操作：

```
filter=(all type:/location/location (within radius:500km+lon:82.7948 lat:21.7866)) 
```

[https://www.googleapis.com/freebase/v1/search?indent=true&filter=%28all+type%3A/location/location+%28within+radius%3A500km+lon%3A82.7948+lat%3A21.7866%29 %29&输出=%28地理编码%29](https://www.googleapis.com/freebase/v1/search?indent=true&filter=%28all+type%3A/location/location+%28within+radius%3A500km+lon%3A82.7948+lat%3A21.7866%29%29&output=%28geocode%29)

请注意，这是非常粗略的记录，我不确定这是否意味着它是全新的并且文档尚未完成或已弃用并且即将消失。

# excel - excel模板的动态扩展范围

> ID：15822362
> 
> 赞同：0
> 
> 时间：2013-04-04T21:48:46.063
> 
> 标签：excel, dynamic, salesforce, named-ranges

我是一个最基本的 excel 用户，具有编程背景，被投入了一个噩梦般的项目。

这是我需要制作的：

*   多页excel表格，将通过使用第三方工具转换为PDF。
*   每个页面都有相同的“页眉和页脚”，我“引用”了它们，因为它们不在实际的页眉和页脚中，因为它们需要引用背景表上的命名范围。
*   第一页将始终是相同的静态文本。
*   最后三页将始终是相同的静态文本。
*   中间页面将包含来自“背景”表的数据，其中包含一组原始数据，每次用户运行 3rd 方工具时都会填充这些数据。

我的问题：如何使这些中间页面像动态模板一样，如果报告中的数据需要传播到下一张表，这将动态发生，而所有其他页面都完好无损？我应该使用excel模板吗？有没有人做过类似的事情？

我只想提一下，报告来自 Salesforce，第三方工具是 Drawloop。

# sql - PLS-00049：错误的绑定变量 (1)

> ID：15822365
> 
> 赞同：-1
> 
> 时间：2013-04-04T21:48:56.560
> 
> 标签：sql, oracle, compiler-errors

有人可以帮我找出我的错误吗？

```
CREATE OR REPLACE TRIGGER  Assign_Prix
    BEFORE INSERT OR UPDATE 
    ON DetailCommande
    FOR EACH ROW

    DECLARE
        v_NOECHELLE Integer; v_PRIX Integer;

    BEGIN

    SELECT NOECHELLE INTO v_NOECHELLE
    FROM ECHELLE
    WHERE ddebut<=:new.ddebut AND dfin>=:new.dfin;

    SELECT Min(Prix) INTO v_Prix
    FROM DETAILECHELLE
    WHERE noechelle = v_Echelle AND qtemin<=:new.qtemin;

   :NEW.PRIX:= v_Prix;

END;

CREATE TABLE Echelle 
    ( 
     NoEchelle NUMBER  NOT NULL,
     CodeProduit VARCHAR2 (15)  NOT NULL ,
     DDebut DATE NOT NULL,
     DFin DATE NOT NULL
    ) 
;
ALTER TABLE Echelle 
    ADD CONSTRAINT Echelle_PK PRIMARY KEY ( NoEchelle ) ;
ALTER TABLE Echelle
    ADD CONSTRAINT Echelle_FK_Produit FOREIGN KEY (CodeProduit)
        REFERENCES Produit(CodeProduit);

CREATE TABLE DetailEchelle
    (
     NoEchelle NUMBER NOT NULL ,
     NoDetail NUMBER NOT NULL ,
     QteMin NUMBER  NOT NULL , 
     Prix NUMBER  NOT NULL 
     )
;
ALTER TABLE DetailEchelle
    ADD CONSTRAINT DetailEchelle_PK PRIMARY KEY ( NoEchelle, NoDetail);
ALTER TABLE DetailEchelle
    ADD CONSTRAINT DetailEchelle_FK_Echelle FOREIGN KEY (NoEchelle)
        REFERENCES Echelle(NoEchelle);

CREATE TABLE Produit 
    ( 
     CodeProduit VARCHAR2 (15)  NOT NULL , 
     CodeCategorie VARCHAR2 (5)  NOT NULL ,
     Nom VARCHAR2 (30)  NOT NULL , 
     Description VARCHAR2 (100) , 
     CoutFixe NUMBER , 
     LimiteSupCF NUMBER , 
     Delai NUMBER  
    ) 
;
ALTER TABLE Produit 
    ADD CONSTRAINT Produit_PK PRIMARY KEY ( CodeProduit ) ;
ALTER TABLE Produit
    ADD CONSTRAINT Produit_FK_Categorie FOREIGN KEY (CodeCategorie)
        REFERENCES Categorie(CodeCategorie);

CREATE TABLE DetailCommande 
    ( 
     NoCommande NUMBER  NOT NULL , 
     LigneCommande NUMBER  NOT NULL ,
     Qte NUMBER  NOT NULL ,  
     Message VARCHAR2 (100) NOT NULL,
     CodeProduit VARCHAR2 (15)  NOT NULL , 
     CodeCouleur VARCHAR2 (4)  NOT NULL , 
     PrixUnitVendu NUMBER, 
     CFVendu NUMBER
    ) 
;
ALTER TABLE DetailCommande 
    ADD CONSTRAINT DetailCommande_PK PRIMARY KEY ( LigneCommande, NoCommande ) ;
ALTER TABLE DetailCommande
    ADD CONSTRAINT DetailCommande_FK_Commande FOREIGN KEY (NoCommande)
        REFERENCES Commande(NoCommande);
ALTER TABLE DetailCommande
    ADD CONSTRAINT DetailCommande_FK_Produit FOREIGN KEY (CodeProduit, CodeCouleur)
        REFERENCES ProduitCouleur(CodeProduit, CodeCouleur); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:01:11.570

您的触发器是在`DetailCommande`表上定义的。此表没有名为`ddebut`、`dfin`或`qtemin`的列`prix`。因此，您的触发器无法引用`:new`伪记录中的这些列，因为它们在表中不存在。

不幸的是，如果表中不存在这些列`DetailCommande`，我很难猜测您的触发器应该做什么，所以我不知道正确的语法是什么。

# c# - 以编程方式更改 wpf 中切换（TreeView）的颜色

> ID：15822367
> 
> 赞同：0
> 
> 时间：2013-04-04T21:49:03.043
> 
> 标签：c#, wpf, treeview, wpf-controls, togglebutton

我在以编程方式更改 TreeView 中的切换颜色时遇到问题。我在 ResourceDictionary SolidColorBrush 中定义：

```
<SolidColorBrush x:Key="FillBrush" Color="#000000" /> 
```

我也在 ResourceDictionary 中为 toggleButton 创建了样式：

```
<Style x:Key="ExpandCollapseToggleStyle" TargetType="ToggleButton">
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToggleButton">
                    <Grid Width="auto" Height="auto" Background="Transparent" ShowGridLines="True">                        
                        <Path Fill="{StaticResource FillBrush}" x:Name="ExpandPath" HorizontalAlignment="Center"  VerticalAlignment="Center"
                                        Data="M 0 0 L 0 2 L 6 0 z M 6 2 L 6 0 L 0 2 z">
                        </Path>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter Property="Data" TargetName="ExpandPath" Value="M 0 0 L 0 8 L 2 0 z M 2 8 L 2 0 L 0 8 z"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

在代码中，我试图以编程方式更改 FillBrush 键的值：

```
SolidColorBrush cc = (SolidColorBrush)Resources["FillBrush"];
cc.Color=c.Color; 
```

但是当我改变它时，切换按钮不会改变。

任何提示如何更改现有组件的颜色？我对通过 ResourceDictionary 模板化组件有点困惑，所以我猜它那里有问题。感谢所有帮助

**编辑：**在代码中我“说”使用静态资源。我也用 DynamicResource 尝试过，但什么也没发生，颜色值也没有改变。

**编辑 2：**如果我检查 FillBrush 资源中的值：

```
MessageBox.Show(((SolidColorBrush)Resources["FillBrush"]).Color.ToString()); 
```

该值将替换为新值。所以它有效。在这种情况下，在 ToggleButton 样式中应用它一定有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:31:32.650

Try replacing the `Brush` - not changing its `Color`, e.g...

```
this.Resources["FillBrush"] = new SolidColorBrush(Colors.Red); 
```

i.e. `Brush` is likely `Freezed`. Check e.g. this link (just first) [Style Setter Freezing Brush](https://stackoverflow.com/questions/9235428/style-setter-freezing-brush)

If you do the following...

```
if( !brush.IsFrozen ) // 'not froze' i.e. free to change
    brush.Color = Colors.Red; 
```

...chances are you'll never enter. You also get exception if accessing a freezed object.

Or better yet, you should do...

```
var brush = (SolidColorBrush)this.Resources["FillBrush"];
if (brush.IsFrozen)
{
    SolidColorBrush clone = brush.Clone();
    clone.Color = Colors.Red;
    this.Resources["FillBrush"] = clone;
}
else
    brush.Color = Colors.Red; 
```

For more details check this very first MS link on the subject which involves exactly these issues...

[Freezable Objects Overview](http://msdn.microsoft.com/en-us/library/ms750509.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:56:36.420

A`StaticResource`只会读取初始颜色。为了动态更新颜色，您需要将您的声明`Brush`为`DynamicResource`.

```
<Path Fill="{DynamicResource FillBrush}" x:Name="ExpandPath" HorizontalAlignment="Center"
    VerticalAlignment="Center" Data="M 0 0 L 0 2 L 6 0 z M 6 2 L 6 0 L 0 2 z"> 
```

[这篇文章](https://stackoverflow.com/questions/558090/how-to-update-dynamic-resource-within-a-dynamic-resource#)中有一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:12:25.330

使用 Blend，我只需点击 5 次鼠标就可以做到这一点，

（要以全尺寸查看图像，请右键单击它并选择查看图像或在新选项卡中打开图像，具体取决于您使用的网络浏览器）

![在此处输入图像描述](https://i.stack.imgur.com/DRgdm.png)

我没有粘贴生成的 XAML，因为有很多，只是 Blends 突出显示的部分。

![在此处输入图像描述](https://i.stack.imgur.com/6nOzO.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-04T22:15:36.850

有时，如果您要更改的项目被“隐藏”在一种样式中，当您尝试更改它时似乎无法识别它，至少这是我在尝试设置项目样式然后想要能够时所经历的动态更改颜色或字体系列。尝试这个：

```
<Style x:Key="ExpandCollapseToggleStyle" TargetType="ToggleButton">
   <Setter Property="Focusable" Value="False"/>
   <Setter Property="Foreground" Value="{StaticResource FillBrush}"/>
   <Setter Property="Template">
      <Setter.Value>
         <ControlTemplate TargetType="ToggleButton">
            <Grid Width="Auto" Height="Auto" Background="Transparent" ShowGridLines="True">
               <Path Fill="{Binding Foreground}" x:Name="ExpandPath" HorizontalAlignment="Center" VerticalAlignment="Center" Data="M 0 0 L 0 2 L 6 0 z M 6 2 L 6 0 L 0 2 z"/>
            </Grid>
         </ControlTemplate>
      </Setter.Value>
   </Setter>
</Style> 
```

并且当您想要更改切换按钮的颜色时 - 而不是更改 FillBrush 的颜色 = 您更改实际切换按钮的前景值。由于路径的填充绑定到前景色，这应该会触发它发生变化。

希望这对您有所帮助并且对您有用，我承认我没有测试过这个特定的 XAML 代码片段，但我不得不在以前的项目中做类似的工作。

# sql - Postgres TextSearch 不过滤不同的条目

> ID：15822373
> 
> 赞同：0
> 
> 时间：2013-04-04T21:49:32.287
> 
> 标签：sql, postgresql, distinct, text-search

我们正在尝试使用文本查询清除特定列上的重复项。

这是一个示例查询：

```
SELECT 
    distinct on (title) title", 
    ts_rank_cd(to_tsvector(title), query, 1) AS rank 
FROM  
    products, 
    to_tsquery('english',''english','Ribeye | Starter | Cheese | Assortment'') query 
WHERE 
    query @@ to_tsvector(title) AND 
    book_id = '37' as result 
ORDER BY 
    rank DESC limit 10 offset 0 
```

出于某种原因，我们在使用文本搜索时仍然偶尔会收到重复的标题。

结果是：

```
"Ribeye Starter Cheese Assortment" 
"Filet Mignon Starter Cheese Assortment" 
"Ambassadors Assortment" 
"Ambassadors Assortment" 
"Strip Steak Starter Cheese Assortment"
"After Dinner Cheese  Assortment"
"Ambassadors Assortment"
"Chairmans Assortment" 
```

在没有 TSVectors 的情况下使用 distinct 可以正常工作，但引入文本搜索会忽略 PostGres Distinct 关键字。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:07:23.360

我面前没有要测试的 psql……但是文档中的这一行引起了我的注意：

> DISTINCT ON 表达式必须匹配最左边的 ORDER BY 表达式。ORDER BY 子句通常包含附加表达式，这些表达式确定每个 DISTINCT ON 组中行的所需优先级。

所以只需将“标题”添加到`ORDER`：

```
... ORDER BY title,rank DESC ... 
```

# python - is it possible to put forms in a notebook widget using tkinter and python?

> ID：15822378
> 
> 赞同：1
> 
> 时间：2013-04-04T21:49:45.877
> 
> 标签：python, forms, tkinter

I have been trying to desing a form in tkinter using python, but unfortunately I am stuck again, but now putting a form into the notebook I already have. I have run them separately and they work perfect, the problem starts when I try to put them together.

For example, if I write in "componentComb= ttk.Combobox(frameOne, width="19")" instead of frameOne I put firstStep which is what I want to do (merge them), I have an error like this:

```
componentComb= ttk.Combobox(firstStep, width="19") 
```

NameError: name 'firstStep' is not defined

Which I don't understand, I have already defined, but probably wrong!!! Can you help me with this problem?

Below you have the code I have been "fighting" with, and I hope you can help me!

Thanks in advance

Here is my code:

```
#Starts

import Tkinter 

from Tkinter import * 

from ttk import *   

import tkMessageBox 

import ttk  

# start of GUI code

root = Tk()

root.title("Model A")

root.minsize(1000, 150)

root.maxsize(1100, 200)

notebook = ttk.Notebook(root)

notebook.pack(fill='both', expand='yes')

notebook.pressed_index = None

# Child Frame

frameOne = Tkinter.Frame(notebook, bg='white')

frameOne.pack(fill='both', expand=True)

frameTwo = Tkinter.Frame(notebook, bg='white')

frameTwo.pack(fill='both', expand=True)

frameThree= Tkinter.Frame(notebook, bg='white')

frameThree.pack(fill='both', expand=True)

frameFour= Tkinter.Frame(notebook, bg='white')

frameFour.pack(fill='both', expand=True)

# Pages

notebook.add(frameOne, text='Standard')

notebook.add(frameTwo, text='TID')

notebook.add(frameThree, text='MEE')

notebook.add(frameFour, text='Final')

# Merging form and notebook
def defocus(event):

    event.widget.master.focus_set()

    if __name__ == '__main__':

        firstStep = Tkinter.Label(notebook, text=" 1\. Enter Main Details: ", font=("fixedsys", "16","bold italic"))
        firstStep.grid(row=2, columnspan=7, sticky='W', \
                 padx=5, pady=5, ipadx=5, ipady=5)

#Main Selection

componentComb= ttk.Combobox(frameOne, width="19")

componentComb = Combobox(frameOne, state="readonly", values=("TGB", "RST", "CCPa"))

componentComb.grid(column=4, row=0, columnspan="5", sticky="nswe")

componentComb.set("Main Selection")

#Temperature Selection

tempComb = ttk.Combobox(frameOne, width="14")

tempComb = Combobox(frameOne, state="readonly", values=("-40", "-30", "-20","-10", "0", "10","20", "30"))

tempComb.grid(column=0, row=2, columnspan="2", sticky="w")

tempComb.set("Temperature Selection")

#Device Type Selection

DeviceTypeComb = ttk.Combobox(frameOne, width="14")

DeviceTypeComb = Combobox(frameOne, state="readonly", values=("QML", "Non-QML"))

DeviceTypeComb.grid(column=3, row=2, columnspan="2", sticky="w")

DeviceTypeComb.set("Device Type Selection")

#Junction Temperature Selection

JunctionTempComb = ttk.Combobox(frameOne, width="16")

JunctionTempComb = Combobox(frameOne, state="readonly", values=("-40", "-30", "-20","-10", "0", "10","20", "30"))

JunctionTempComb.grid(column=5, row=2, columnspan="2", sticky="w")

JunctionTempComb.set("Junction Temp Selection")

#Chip Area in Cm2 Selection

ChipAreaComb = ttk.Combobox(frameOne, width="12")

ChipAreaComb = Combobox(frameOne, state="readonly", values=("0.001","0.002","0.003","0.004","0.005","0.006"))

ChipAreaComb.grid(column=7, row=2, columnspan="2", sticky="e")

ChipAreaComb.set("Chip Area Selection")

#Time of Exposure

TimeOfExpoComb = ttk.Combobox(frameOne, width="12")

TimeOfExpoComb = Combobox(frameOne, state="readonly", values=("1", "2", "3","4", "5"))

TimeOfExpoComb.grid(column=9, row=2, columnspan="2", sticky="w")

TimeOfExpoComb.set("Time of Exposure")

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:43:43.300

`firstStep`是`defocus`函数中的局部变量，您正试图在全局范围内访问它。

您必须在函数之外定义它，以便它在全局范围内具有意义。但请注意，因为您是在函数中分配它，所以您需要使用`global`关键字，这样它就不会认为您正在引入一个具有相同名称的新局部变量。

这应该有效：

```
firstStep = None  #define the variable globally
def defocus(event):

    event.widget.master.focus_set()

    if __name__ == '__main__':
        global firstStep  # we want to reassign the global version of this variable
        firstStep = Tkinter.Label(notebook, text=" 1\. Enter Main Details: ", font=("fixedsys", "16","bold italic"))
        firstStep.grid(row=2, columnspan=7, sticky='W', \
                 padx=5, pady=5, ipadx=5, ipady=5)

componentComb= ttk.Combobox(firstStep, width="19") 
```

# ruby - Ruby CSV UTF8 encoding error while reading

> ID：15822380
> 
> 赞同：9
> 
> 时间：2013-04-04T21:49:51.397
> 
> 标签：ruby, csv

This is what I was doing:

```
csv = CSV.open(file_name, "r") 
```

I used this for testing:

```
line = csv.shift
while not line.nil?
  puts line
  line = csv.shift
end 
```

And I ran into this:

```
ArgumentError: invalid byte sequence in UTF-8 
```

I read the [answer here](https://stackoverflow.com/a/4697471/724516) and this is what I tried

```
csv = CSV.open(file_name, "r", encoding: "windows-1251:utf-8") 
```

I ran into the following error:

```
Encoding::UndefinedConversionError: "\x98" to UTF-8 in conversion from Windows-1251 to UTF-8 
```

Then I came across a Ruby gem - charlock_holmes. I figured I'd try using it to find the source encoding.

```
CharlockHolmes::EncodingDetector.detect(File.read(file_name))
=> {:type=>:text, :encoding=>"windows-1252", :confidence=>37, :language=>"fr"} 
```

So I did this:

```
csv = CSV.open(file_name, "r", encoding: "windows-1252:utf-8") 
```

And still got this:

```
Encoding::UndefinedConversionError: "\x8F" to UTF-8 in conversion from Windows-1252 to UTF-8 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T22:25:16.413

It looks like you have problem with detecting the valid encoding of your file. *CharlockHolmes* provide you with useful tip of `:confidence=>37` which simply means the detected encoding may not be the right one.

Basing on error messages and `test_transcode.rb` from [https://github.com/MacRuby/MacRuby/blob/master/test-mri/test/ruby/test_transcode.rb](https://github.com/MacRuby/MacRuby/blob/master/test-mri/test/ruby/test_transcode.rb) I found the encoding that passes through both of your error messages. With help of `String#encode` it's easy to test:

```
"\x8F\x98".encode("UTF-8","cp1256") # => "ڈک" 
```

Your issue looks like strictly related to the file and not to ruby.

In case we are not sure which encoding to use and can agree to loose some character we can use `:invalid` and `:undef` params for `String#encode`, in this case:

```
"\x8F\x98".encode("UTF-8", "CP1250",:invalid => :replace, :undef => :replace, :replace => "?") # => "Ź?" 
```

other way is to use `Iconv` `*//IGNORE` option for target encoding:

```
Iconv.iconv("UTF-8//IGNORE","CP1250", "\x8F\x98") 
```

As a source encoding suggestion of *CharlockHolmes* should be pretty good.

PS. `String.encode` was introduced in ruby 1.9\. With ruby 1.8 you can use `Iconv`

# php - 以 JSON 格式从 PHP 文件中将内容返回到 javascript

> ID：15822387
> 
> 赞同：0
> 
> 时间：2013-04-04T21:50:26.850
> 
> 标签：php, jquery, json, jquery-mobile

当从 jQuery Mobile 脚本向指定的 PHP 文件发送请求时，不会返回任何内容，也不会将任何内容附加到 html 文件中。这是页面的网址：

localhost/basket/newstext.html?url= [http://www.basket-planet.com/ru/news/9235](http://www.basket-planet.com/ru/news/9235)

新闻文本.html：

```
<head>
<script src="js/newstext.js"></script> 
</head>
<body> 
<div data-role="page" id="newstext"> 
  <div data-role="content"> 
    <div id="textcontent"></div> 
    </div> 
  </div> 
</body> 
```

新闻文本.js：

```
var serviceURL = "http://localhost/basket/services/"; 
$('#newstext').bind('pageshow', function(event) { 
var url = getUrlVars()["url"]; 
$.getJSON(serviceURL + 'getnewstext.php?url='+url, displayNewsText); 
}); 

function displayNewsText(data){ 
  var newstext = data.item; 
  console.log(newstext);
  $('#textcontent').text(newstext); 
  $('#textcontent').trigger('create'); 
} 

function getUrlVars(){ 
//it displays in the alert perfectly, shortening the message here 
} 
```

获取新闻文本.php：

```
<?php 
include_once ('simple_html_dom.php'); 
$url = $_GET['url']; 
$html = file_get_html(''.$url.''); 

$article = $html->find('div[class=newsItem]'); 
$a = str_get_html(implode("\n", (array)$article)); 
//parse the article 
header("Content-type: application/json");
echo '{"item":'. json_encode($a) .'}';
?> 
```

我认为我的问题是我如何在 PHP 脚本中编码 $a 变量。$a 变量包含各种 html 标记...如何将其附加到 html 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:56:02.157

你有这条线的地方：

```
$.getJSON(serviceURL + 'getnewstext.php?url='+url, displayNewsText); 
```

将其更改为：

```
$.getJSON(serviceURL + 'getnewstext.php?url='+url, displayNewsText, function(response){
    $('#elem').append(response);
}); 
```

`#elem`要将 PHP 文件返回的数据附加到其中的元素的名称在哪里。

# php - 使用 Ajax 调用不同的 POST 变量

> ID：15822402
> 
> 赞同：0
> 
> 时间：2013-04-04T21:51:12.917
> 
> 标签：php, jquery

我还是 jQuery 的新手，一直在尝试解决这个问题，希望有人能提供帮助。我有这个 jQuery 代码需要根据单击的元素传递不同的值。创建的每个元素的 ID 中都有一个唯一编号（这是必需的）。如果我手动将 jQuery 代码更改为特定 ID 并调用，例如：

```
http://mysite/examplepost?effect=113 
```

这将起作用。但是我需要有 $('#div- ...这里的不同数字...') 才能处理同一页面上的多个元素。我已经让 PHP 端使用以下方法产生不同的值：

```
if($_GET['effect'] == $id){ 
```

我只需要它与 ajax 一起工作，这样它就不会重新加载页面。

例子：

```
$('#div-113').on('click', function() {

    var dataString = 'effect=113';  

        jQuery.ajax(
            {
            type:'GET',
            url:'?',
            data: dataString,
            success: function(data){
                alert('Works');         
            }
          }
        );

      }); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:56:08.223

我会给你所有的`div`sa 通用类名（即`myClickableDiv`）和一个特定的`data-id`.

这样，您可以通过该通用类名来定位所有 div，而不必根据 div 的形成方式来确定它`id`。允许您仅向单击处理程序提供非常具体的`data-id`信息（如整数），而无需解析`id`.

HTML：

```
<div class=".myClickableDiv" id="div-XXX" data-id="XXX">My Div</div> 
```

JS：

```
$('.myClickableDiv').on('click', function() {

    var dataString = $(this).attr('data-id');  

    jQuery.ajax({...});

}); 
```

# networking - recv() 和 recvfrom() 从内核缓冲区读取数据包（段）还是字节？

> ID：15822407
> 
> 赞同：0
> 
> 时间：2013-04-04T21:51:43.890
> 
> 标签：networking, network-programming

我构建了 UDP 服务器或 TCP 服务器，它们使用`recv()`或`recvfrom`接收来自客户端的数据包

但在我看来，机制是：内核从网络接收数据包并将IP / TCP / UDP标头条带化，然后将数据有效负载部分放入内核缓冲区，然后`recv()`或`recvfrom()`从内核缓冲区读取数据

所以这意味着缓冲区中只有字节，并且字节没有被分成部分，每个部分对应一个UDP数据报/TCP段的有效负载

如果我希望每次调用`recv()`或`recvfrom()`只接收一个 TCP 段或 UDP 数据报（注意，一个 TCP 或 UDP 数据包可能由于 IP 分片而包含多个 IP 数据包）

有可能吗？

如果是这样，如何？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:14:59.943

> 我希望每次调用 recv() 或 recvfrom() 只接收一个 TCP 段

不。它可能会返回从一个字节到您提供的长度的任何内容（或在非阻塞 mdoe 中返回零字节），并且数据可能会跨越 TCP 段边界，并不是说您有任何方法可以判断 TCP 段边界在第一名。您必须将 TCP 连接视为字节流，仅此而已。

> 或 UDP 数据报

是的。

# cuda - 使用原子操作的 CUDA 中的点积 - 得到错误的结果

> ID：15822412
> 
> 赞同：0
> 
> 时间：2013-04-04T21:52:10.263
> 
> 标签：cuda, gpu, gpgpu

我正在尝试在 CUDA 中实现点积并将结果与​​ MATLAB 返回的结果进行比较。我的 CUDA 代码（基于[本教程](http://goo.gl/k560d)）如下：

```
#include <stdio.h>

#define N (2048 * 8)
#define THREADS_PER_BLOCK 512
#define num_t float

// The kernel - DOT PRODUCT
__global__ void dot(num_t *a, num_t *b, num_t *c) 
{
  __shared__ num_t temp[THREADS_PER_BLOCK];
  int index = threadIdx.x + blockIdx.x * blockDim.x;
  temp[threadIdx.x] = a[index] * b[index];
  __syncthreads(); //Synchronize!
  *c = 0.00;
  // Does it need to be tid==0 that
  // undertakes this task?
  if (0 == threadIdx.x) {
    num_t sum = 0.00;
    int i;
    for (i=0; i<THREADS_PER_BLOCK; i++)
      sum += temp[i];
    atomicAdd(c, sum);        
    //WRONG: *c += sum; This read-write operation must be atomic!
  }
}

// Initialize the vectors:
void init_vector(num_t *x)
{
  int i;
  for (i=0 ; i<N ; i++){
    x[i] = 0.001 * i;
  }
}

// MAIN
int main(void)
{
  num_t *a, *b, *c;
  num_t *dev_a, *dev_b, *dev_c;
  size_t size = N * sizeof(num_t);

  cudaMalloc((void**)&dev_a, size);
  cudaMalloc((void**)&dev_b, size);
  cudaMalloc((void**)&dev_c, size);

  a = (num_t*)malloc(size);
  b = (num_t*)malloc(size);
  c = (num_t*)malloc(size);

  init_vector(a);
  init_vector(b);

  cudaMemcpy(dev_a, a, size, cudaMemcpyHostToDevice);
  cudaMemcpy(dev_b, b, size, cudaMemcpyHostToDevice);

  dot<<<N/THREADS_PER_BLOCK, THREADS_PER_BLOCK>>>(dev_a, dev_b, dev_c);

  cudaMemcpy(c, dev_c, sizeof(num_t), cudaMemcpyDeviceToHost);

  printf("a = [\n");
  int i;
  for (i=0;i<10;i++){
    printf("%g\n",a[i]);
  }
  printf("...\n");
  for (i=N-10;i<N;i++){
    printf("%g\n",a[i]);
  }
  printf("]\n\n");
  printf("a*b = %g.\n", *c);

  free(a); free(b); free(c);

  cudaFree(dev_a);
  cudaFree(dev_b);
  cudaFree(dev_c);

} 
```

我编译它：

```
/usr/local/cuda-5.0/bin/nvcc -m64  -I/usr/local/cuda-5.0/include -gencode arch=compute_20,code=sm_20 -o multi_dot_product.o -c multi_dot_product.cu
g++ -m64 -o multi_dot_product multi_dot_product.o -L/usr/local/cuda-5.0/lib64 -lcudart 
```

有关我的 NVIDIA 卡的信息，请访问[http://pastebin.com/8yTzXUuK](http://pastebin.com/8yTzXUuK)。我尝试使用以下简单代码在 MATLAB 中验证结果：

```
N = 2048 * 8;
a = zeros(N,1);
for i=1:N
    a(i) = 0.001*(i-1);
end

dot_product = a'*a; 
```

但是随着 N 的增加，我得到了显着不同的结果（例如，对于 N=2048*32 CUDA reutrns 6.73066e+07 而 MATLAB 返回 9.3823e+07。对于 N=2048*64 CUDA 给出 3.28033e+08 而 MATLAB给出 7.5059e+08)。我倾向于相信差异源于`float`在我的 C 代码中的使用，但如果我用编译器替换它，则会`double`抱怨`atomicAdd`不支持双参数。我应该如何解决这个问题？

**更新：**另外，对于高值`N`（例如 2048*64），我注意到 CUDA 返回的结果在每次运行时都会发生变化。`N`如果较低（例如 2048*8），则不会发生这种情况。

同时我有一个更基本的问题：变量`temp`是一个大小数组，`THREADS_PER_BLOCK`在同一块中的线程之间共享。它是否也在块之间共享，或者每个块都对该变量的不同副本进行操作？我应该将该方法`dot`视为对每个块的说明吗？有人可以详细说明在这个例子中工作是如何划分的以及变量是如何共享的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:34:18.947

从内核中注释掉这一行：

```
//   *c = 0.00; 
```

并将这些行添加到您的主机代码中，在内核调用之前（在 cudaMalloc 之后`dev_c`）：

```
num_t h_c = 0.0f;
cudaMemcpy(dev_c, &h_c, sizeof(num_t), cudaMemcpyHostToDevice); 
```

而且我相信您会或多或少地获得与 matlab 匹配的结果。

事实上，你的内核中的这条线不受任何同步的保护，这让你很困惑。每个块的每个线程，无论何时执行，都会`c`在您编写它时归零。

顺便说一句，通过使用经典的并行归约方法，我们通常可以在此操作上做得更好。一个基本的（未优化的）插图在[这里](https://stackoverflow.com/questions/15714131/cuda-kernel-with-reduction-logic-errors-for-dot-product-of-2-matrices/15715260#15715260)。如果您将该方法与共享内存的使用和最后的单个 atomicAdd（每个块一个 atomicAdd）结合起来，您将获得显着改进的实现。虽然它不是点积，[但这个例子](https://stackoverflow.com/questions/15733182/count3s-in-cuda-is-very-slow/15747269#15747269)结合了这些想法。

编辑：在评论中回答以下问题：

内核函数是*网格*中所有线程（根据定义与内核启动相关的所有线程）执行的指令集。但是，将执行视为由线程块管理是合理的，因为线程块中的线程在很大程度上是一起执行的。然而，即使在一个线程块中，所有线程的执行也不一定是完全同步的。通常，当我们想到锁步执行时，我们会想到*扭曲*这是单个线程块中的一组 32 个线程。因此，由于块内的扭曲之间的执行可能会出现偏差，因此即使对于单个线程块也存在这种危险。但是，如果只有一个线程块，我们可以使用适当的同步和控制机制等来消除代码中的危险`__syncthreads()`。`(if threadIdx.x == 0)`但是这些机制对于控制跨多个线程块执行的一般情况是无用的。多个线程块可以按任何顺序执行。整个网格中唯一定义的同步机制是内核启动本身。`c`因此，为了解决您的问题，我们必须在内核启动之前归零。

# sql-server - RESTORE 上的 Litespeed 错误 - 在 2005 年有效，在 2008 年失败

> ID：15822419
> 
> 赞同：0
> 
> 时间：2013-04-04T21:52:47.427
> 
> 标签：sql-server

我有一个 10 页的程序，它将一个 litespeed 压缩备份文件（从不同的服务器带到网络共享）提取到 3 个文件中，恢复文件列表和标题；然后将其还原到本地数据库。当我尝试在 SQL Server 2008 服务器上运行该过程时，它失败并出现以下错误，而在 SQL Server 2005 服务器上运行该过程时，它运行得很好并将其恢复到本地数据库。

> 错误：列名或提供的值数与表定义不匹配。

完整错误：

```
Extracting differential LiteSpeed backup into SQL Server backup files: Started
Extracting differential LiteSpeed backup into SQL Server backup files: Complete
Msg 213, Level 16, State 7, Line 1
Column name or number of supplied values does not match table definition.
Msg 3013, Level 16, State 1, Line 1
RESTORE FILELIST is terminating abnormally.
Msg 213, Level 16, State 7, Line 1
Column name or number of supplied values does not match table definition.
Msg 3013, Level 16, State 1, Line 1
RESTORE HEADERONLY is terminating abnormally. 
```

关于为什么它在 SQL Server 2008 上失败的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:22:03.597

因为您拥有的 Litespeed 版本（或您自己的存储过程）正在构建一个 #temp 表来转储`RESTORE`命令的结果，并且代码不考虑版本。

如果您将[2005 年的文档](http://msdn.microsoft.com/en-us/library/ms173778%28v=sql.90%29.aspx)与[2008 年的文档](http://msdn.microsoft.com/en-us/library/ms173778%28v=sql.100%29.aspx)进行比较`RESTORE FILELISTONLY`，您会看到 2008 年添加了一个名为的新列`TDEThumbprint`（可能还有其他更改；我看起来不是很努力）。

同样，将[2005 文档](http://msdn.microsoft.com/en-US/library/ms178536%28v=sql.90%29.aspx)与[2008 文档](http://msdn.microsoft.com/en-US/library/ms178536%28v=sql.100%29.aspx)进行比较`RESTORE HEADERONLY`，还有一个名为 的附加列`CompressedBackupSize`。

插入失败是因为用于转储此命令结果的 #temp 表是为 2005 版本构建的，并且缺少附加列。当#temp 表有 15 列并且您尝试将 16 列填充到其中时，SQL Server 不喜欢它。

如果是您的过程创建了#temp 表，您需要根据版本创建过程分支，或者创建特定于版本的过程，并在运行插入之前使用具有适当列数的表。

如果不是您的代码，那么您应该与 Dell/Quest 讨论此问题。他们很可能已经修复了它，但是您没有最新版本的 Litespeed ...

# xml - 找到匹配的标签时复制 XML 值

> ID：15822421
> 
> 赞同：2
> 
> 时间：2013-04-04T21:52:49.300
> 
> 标签：xml, xslt, copy

第一次在这里发帖，找不到我需要的东西。我有 2 个 XML 文档，它们具有相似但略有不同的结构，并且标签中的值可能不同。我需要遍历一个 XML 中的所有叶节点，如果相同的标记（仅通过完整的 XPath 位置）位于另一个 XML 中，我需要将该值复制到目标 XML。我需要自动执行此操作。不使用属性。

例如，我的基地：

```
<root>
 <a>abc</a>
 <b>def</b>
</root> 
```

目标：

```
<root>
 <a>xyz</a>
 <c>ghi</c>
</root> 
```

预期输出：

```
<root>
 <a>abc</a>
 <c>ghi</c>
</root> 
```

使用 XSLT 和简单的 Linux 工具/shell 脚本将比第三方工具更可取。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:09:35.330

**这是一个 XSLT 1.0 解决方案——我们只假设两个文档没有混合内容元素**（没有元素同时具有元素和非空白文本节点子节点）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

     <my:patternDoc>
        <root>
         <a>abc</a>
         <b>def</b>
        </root>
     </my:patternDoc>

 <xsl:variable name="vinitTarget" select="/"/>
 <xsl:variable name="vinitPattern" select="document('')/*/my:patternDoc"/>

 <xsl:template match="/*">
  <xsl:copy>
   <xsl:call-template name="clone"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template name="clone">
  <xsl:param name="pTargetNode" select="/*/*[1]"/>
  <xsl:param name="pPatterntNode" select="$vinitPattern/*/*[1]"/>

  <xsl:if test="$pTargetNode">
  <xsl:choose>
    <xsl:when test="not(name($pTargetNode) = name($pPatterntNode))">
      <xsl:copy-of select="$pTargetNode"/>

      <xsl:call-template name="clone">
        <xsl:with-param name="pTargetNode"
          select="$pTargetNode/following-sibling::*[1]"/>
        <xsl:with-param name="pPatterntNode"
          select="$pPatterntNode/following-sibling::*[1]"/>
      </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>
     <xsl:choose>
       <xsl:when test="$pTargetNode[not(*)] and $pPatterntNode[not(*)]">
         <xsl:copy-of select="$pPatterntNode"/>
             <xsl:call-template name="clone">
                <xsl:with-param name="pTargetNode"
                  select="$pTargetNode/following-sibling::*[1]"/>
                <xsl:with-param name="pPatterntNode"
                  select="$pPatterntNode/following-sibling::*[1]"/>
             </xsl:call-template>
       </xsl:when>
       <xsl:when test="$pTargetNode/*">
             <xsl:element name="{name($pTargetNode)}"
                  namespace="{namespace-uri($pTargetNode)}">
                 <xsl:call-template name="clone">
                    <xsl:with-param name="pTargetNode"
                      select="$pTargetNode/*[1]"/>
                    <xsl:with-param name="pPatterntNode"
                      select="$pPatterntNode/*[1]"/>
                 </xsl:call-template>
             </xsl:element>
           <xsl:call-template name="clone">
            <xsl:with-param name="pTargetNode"
              select="$pTargetNode/following-sibling::*[1]"/>
            <xsl:with-param name="pPatterntNode"
              select="$pPatterntNode/following-sibling::*[1]"/>
           </xsl:call-template>
       </xsl:when>
     </xsl:choose>
    </xsl:otherwise>
  </xsl:choose>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的“目标”XML 文档时：**

```
<root>
 <a>xyz</a>
 <c>ghi</c>
</root> 
```

**产生了想要的正确结果：**

```
<root>
   <a xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="my:my">abc</a>
   <c>ghi</c>
</root> 
```

**注意**：

复制的额外名称空间只是因为模式文档当前嵌入到 XSLT 样式表中。这只是为了方便。在实际情况下，模式文档将与 XSLT 样式表分开，并且不会复制额外的名称空间节点。

**让我们验证提供的转换是否可以在更复杂的 XML 文档上正常工作：**

```
<root>
    <a>
        <b>
            <c>xyz</c>
            <f/>
            <g>tuv</g>
        </b>
    </a>
    <d>
        <e>ghi</e>
    </d>
</root> 
```

**如果同一转换（上图）中的嵌入模式文档现在是：**

```
<my:patternDoc>
    <root>
        <a>
            <b>
             <c>abc</c>
         <f/>
         <g>mnk</g>
         </b>
        </a>
        <d>
            <e>pqr</e>
        </d>
     </root>
  </my:patternDoc> 
```

**再次产生所需的正确结果：**

```
<root>
   <a>
      <b>
         <c xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="my:my">abc</c>
         <f xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="my:my"/>
         <g xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="my:my">mnk</g>
      </b>
   </a>
   <d>
      <e xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="my:my">pqr</e>
   </d>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:51:33.873

此**XSLT 3.0**样式表为没有任何子元素的元素生成动态 XPath 字符串，并用于[`<xsl:evaluate>`](http://www.w3.org/TR/xslt-30/#element-evaluate)从“基本”XML 文件（名为“base.xml”并与 XML 输入位于同一目录中）选择匹配元素这个例子）。

如果“base”中有匹配元素，则使用该元素的文本，否则将复制匹配元素的文本。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:my="my"
    exclude-result-prefixes="xs"
    version="3.0">
    <xsl:output indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>        
    </xsl:template>

<!--Elements that do not have any child elements -->
    <xsl:template match="*[not(*)]">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
<!--select the equivalent element from the "base" XML file (if any), 
    using the XPath generated from the my:baseMatchXPath() function --> 
            <xsl:variable name="baseMatch" as="item()*">
                <xsl:evaluate xpath="my:baseMatchXPath(.)"  />    
            </xsl:variable>
<!--
Create a sequence of nodes using the $baseMatch and the currently matched element. 
Use a predicate filter to select the first one 
  (if there is no baseMatch, then the context node is the first).
Apply templates to that element's child node()'s. 

NOTE: In this example it is the text() node, 
      but this would also preserve any comments or processing instructions
-->
            <xsl:apply-templates select="($baseMatch, .)[1]/node()"/>   
        </xsl:copy>
    </xsl:template>

    <xsl:function name="my:baseMatchXPath" as="xs:string">
        <xsl:param name="contextNode"/>
        <xsl:variable name="base">document('base.xml')</xsl:variable>
        <xsl:sequence select="concat($base, 
                                     string-join(my:ancestors($contextNode), ''))"/>
    </xsl:function>

    <xsl:function name="my:ancestors" as="item()*">
      <xsl:param name="contextNode"/>

      <xsl:if test="$contextNode/ancestor::*[1]">
          <xsl:sequence select="my:ancestors($contextNode/ancestor::*[1])"/>
      </xsl:if>
      <xsl:sequence select="'/'"/>
      <xsl:sequence select="name($contextNode)"/>
      <xsl:if test="count($contextNode/parent::*/*[name()=name($contextNode)]) 
                      > 1">
          <xsl:sequence 
               select="concat(
                         '[', 
                         count($contextNode/preceding-sibling::*[name()=name($contextNode)])+1, 
                         ']')"/>
      </xsl:if>            
    </xsl:function>

</xsl:stylesheet> 
```

# php - 我在哪里可以找到 Zend PHP Debugger for PHP 5.4 的副本？

> ID：15822423
> 
> 赞同：7
> 
> 时间：2013-04-04T21:52:59.470
> 
> 标签：php, zend-debugger

我正在尝试为 PHP 5.4 找到 Zend 调试器的副本。

我已经按照网络上的各种教程告诉我从 zend 网站下载 Studio Web Debugger，但不幸的是它只包含 PHP 5.3（及以下）的二进制文件。我似乎在 PHP 5.4 的 Zend Debugger 的任何地方都找不到任何提及......似乎他们不再制造它，而是希望您使用他们的完整服务器产品。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T19:58:22.253

令人惊讶的是，“PHP 公司”Zend 将向您出售 Zend Studio，但他们不会在相关下载中打包 5.4 版本的 Studio Debugger。我认为他们可以得到一个更新版本，因为 5.4 已经发布了一年多......

无论如何，一种变通方法已经在 Internet 上流传开来。

这是基于 Debian 的系统的完整[说明](http://irtbfdev.wordpress.com/2012/07/18/zend-debugger-for-nginx-php-54/)。

它主要基于此 Zend 论坛帖子... [http://forums.zend.com/viewtopic.php?t=47568&f=59#p148893](http://forums.zend.com/viewtopic.php?t=47568&f=59#p148893)

要点是从旧的 Zend Server 下载中提取 5.4 调试器文件，然后使用它。

非常感谢原始海报。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-20T14:49:20.623

我遇到了同样的问题 - 但是最新版本的 php 5.3.x 和 php 5.4.x 调试器包含在 Zend Server 的免费版本中，因此您可以安装它，复制 .dll 或 .so需要，然后卸载。

我这样做是为了获得可以与 php 5.3 和 Zend Studio 10 一起使用的 ZendDebugger.dll 版本，但也有 Zend Server 的 5.4 版本。

# netezza - 是否可以将文本文件批量加载到表中而不是 Netezza 中的外部表？

> ID：15822434
> 
> 赞同：4
> 
> 时间：2013-04-04T21:53:51.180
> 
> 标签：netezza

我正在使用 EXTERNAL TABLE 将文本文件中的数据批量加载到 Netezza，在将数据加载到外部表后，我正在更新同一个外部表中的那些列，因为您无法更新外部表我必须暂存外部表中的所有数据到一个临时表，然后我能够进行更新，而有没有其他方法可以直接将文本文件数据批量加载到表中，而不是 Netezza 中的外部表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-21T18:36:55.383

如果您使用的是直接 ODBC。我会考虑一个“瞬态外部表”

`INSERT INTO target_table SELECT * FROM EXTERNAL 'C:\FileName.txt' using( delim '|' datestyle 'MDY' datedelim '/' REMOTESOURCE 'ODBC' MAXERRORS 50 LOGDIR 'C:\');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:34:05.223

看看`nzload` [http://www.enzeecommunity.com/message/12759](http://www.enzeecommunity.com/message/12759)

示例：使用密码 production 以用户 admin 身份加载数据库 dev，指定表名 areacode，使用制表符分隔符，并将输入文件指定为 phone-prefix。d，输入：

nzload -u admin -pw production -db dev -t areacode -delim '\t' -df phone-prefix.dat

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:45:29.113

正如@cairnz 所说，尝试 nzload。此外，如果您通过 ODBC 连接，则可以使用`REMOTESOURCE ODBC`从文本文件加载到表中的选项，绕过创建单独的外部表。查看 IBM 提供的 Netezza 数据加载指南 PDF。

# xcode - 如何关闭 Xcode 中的特定错误？

> ID：15822435
> 
> 赞同：0
> 
> 时间：2013-04-04T21:53:53.633
> 
> 标签：xcode, compiler-warnings, suppress-warnings

有没有办法选择性地关闭 Xcode 中的特定错误？

具体来说，我想关闭以下错误

`Use of undeclared identifier..`

`No visible @interface for ... declares the selector`

我希望这在某些目标的运行时失败，而不是在编译时失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:04:33.413

正如@CodaFi 所指出的，您不能合理地禁止“使用未声明的标识符”。如果编译器不知道符号代表什么，它就无法生成代码。

处理“没有可见的@interface 声明”警告的正常方法是只声明方法。您可以在这样的`NSObject`类别中执行此操作：

```
@interface NSObject (AdditionalMethods)
- (void)someUnknownSelector;
@end 
```

这就是我们过去在您拥有`@optional`成员之前创建协议的方式。可可周围仍然有很多。

虽然可以抑制警告，但不建议这样做，因为它会混淆 ARC。最好告诉编译器你知道你在做什么，并给它一些提示。

# c# - 如何将 dll 中包含的组件嵌入到 exe 中，以便可以从内存中运行？

> ID：15822436
> 
> 赞同：2
> 
> 时间：2013-04-04T21:53:55.127
> 
> 标签：c#, .net

我正在尝试使用位于（引用的）.dll 中的自定义组件来制作一个必须从内存运行的程序（通过如此[处](http://www.codeproject.com/Articles/13897/Load-an-EXE-File-and-Run-It-from-Memory)`Assembly.Load(bin)`所述）。

由于从内存运行的代码运行一个 .exe，如何将组件嵌入到 .exe 中，从而不需要 .dll？

我试过 ILMerge，但生成的 .exe 不会从内存中运行。我看过[这个](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx)，但如果你引用了 .dll，我认为它不起作用（我必须这样做，因为它在我的表单中包含组件）

**更新**

阅读了 NSGaga 的回答后，我尝试了以下方法：

*   将项目中包含的组件.dll设置为嵌入式资源
*   做了一个补充`Program.cs`：

    ```
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Reflection;
    using System.Windows.Forms;

    namespace MyApp
    {
        static class Program
        {
            /// <summary>
            /// The main entry point for the application.
            /// </summary>
            [STAThread]
            static void Main()
            {            
                AppDomain.CurrentDomain.AssemblyResolve +=
                (sender, args) =>
                {
                    // System.Diagnostics.Debugger.Break();
                    String resourceName = "MyApp." +

                        new AssemblyName(args.Name).Name + ".dll";

                    using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName))
                    {

                        Byte[] assemblyData = new Byte[stream.Length];

                        stream.Read(assemblyData, 0, assemblyData.Length);

                        return Assembly.Load(assemblyData);

                    }

                };
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);
                Application.Run(new MainForm());
            }
        }
    } 
    ```

不幸的是，这不起作用，我得到`FileNotFoundException`：

*无法加载文件或程序集“MetroFramework，Version=1.2.0.0，Culture=neutral，PublicKeyToken=5f91a84759bf584a”或其依赖项之一。该系统找不到指定的文件。*

异常发生就`Application.Run(new MainForm());`行了。此外，有断点/添加消息框等，我不相信`AssemblyResolve`处理程序曾经被调用 - 我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:43:44.137

您已经回答了很多 - `manual solution`Jeffrey Richter 应该可以正常工作 - ILMerge 有问题（例如 WPF）。

我已经很久没有玩这个了，但这大概是你需要做的......

1）稍微准备你的应用程序 - 意思是 - 在设置处理程序之前你不能加载任何东西`AssemblyResolve`。这也意味着任何从'main'调用的东西（甚至在之后）都必须在之前被'resolved'。简而言之，将您需要“引用”的所有内容移至“稍后”的代码，

2）添加处理程序 - 尽快。我将重复 Richter 的代码和一些信息。另请查看[http://support.microsoft.com/kb/319292](http://support.microsoft.com/kb/319292)。

```
AppDomain.CurrentDomain.AssemblyResolve +=
(sender, args) =>
{
    // System.Diagnostics.Debugger.Break();
    // Lookup what's your namespace in project properties
    String resourceName = "YourAssemblyNamespace." +
        new AssemblyName(args.Name).Name + ".dll";
    using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName))
    {
==>
        if (stream == null)
            return null;
==>
        Byte[] assemblyData = new Byte[stream.Length];
        stream.Read(assemblyData, 0, assemblyData.Length);
        return Assembly.Load(assemblyData);
    }
}; 
```

3）进行测试 - 移动你的“加载”库代码在一些“点击”或其他东西上 - 并放置一个“中断”（就像我一样），

4) 在根目录中添加您的 dll-s `作为嵌入式资源' - 即就像 bmp 之类的东西。添加外部文件 - 然后在属性中将其设置为“嵌入式资源”。

5）构建应用程序 - 并注意大小的变化，应该是 dll-s 的差异，

6) 转到您的 bin 目录 - 并删除 dll-s。不要再次构建项目并远离 VS/Debugger，

7）启动应用程序并观察...

**注意：** 您可能会遇到异常（例如您建议的 lib） - 如果 stream==null，您需要处理。“问题”是各种 dll-s 经常被“尝试加载（或从应用程序请求）并且它们安全失败 - 因为我们添加了我们负责以相同方式软失败的“处理程序”。请参阅上面的编辑代码。

**您的代码编辑：**

您可能需要稍后开始移动窗口 - 您是否检查过调用了处理程序（断点和所有 - 也进行一些跟踪）。

问题是`MainWindow`解决方案一旦开始`it gets visible`- 即在`Main`- 并且发生`before`实际代码运行或处理程序设置。所以...

```
static void Main(){
    ...
    DoAppSetup();
    // Application.EnableVisualStyles();
    // Application.SetCompatibleTextRenderingDefault(false);
    // Application.Run(new MainForm());
}
static void DoAppSetup(){
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
Application.Run(new MainForm());
} 
```

...这样你的处理程序应该在任何尝试解决之前设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:55:32.693

如果您可以直接访问嵌入式资源，那么只需将它们嵌入到 EXE 中，如果它们在第三方 DLL 中，那么您将无法将它们取出并嵌入它们而不会遇到实用性和潜在的法律问题.

如果可以的话，我建议直接嵌入到 EXE 中。

# javascript - 响应式砌体布局的问题

> ID：15822442
> 
> 赞同：0
> 
> 时间：2013-04-04T21:54:40.970
> 
> 标签：javascript, jquery, html, css, jquery-masonry

我正在使用[Masonry](http://masonry.desandro.com/demos/tumblelog.html)来布局我的网站，一切正常，但是响应能力存在问题。目前所有元素都设置为 31.8% 的宽度（也有一些边距等。）我假设通过调整浏览器窗口的大小我仍将保留 3 列，但所有元素的宽度只会减小，但那是并非如此，通过调整窗口大小，一切都开始分崩离析，我不知道这种奇怪的行为是从哪里来的。

你可以在这里看到我的现场演示网站：http: [//freshbeer.lv/test/index.html](http://freshbeer.lv/test/index.html)

我真的不知道是什么导致了这种奇怪的行为，所以我不知道在此处发布哪些代码，如果您知道哪些代码可能导致它，请告诉我，我会在此处添加。

**编辑：**有趣的是，在调整大小并刷新窗口后，它看起来更好，但并不完全正确。

我也试图实现类似于这个[http://tympanus.net/codrops/collective/collective-57/](http://tympanus.net/codrops/collective/collective-57/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:57:58.530

尝试在 Masonry 中设置宽度：

```
$('.grid').masonry({
  itemSelector: '.content-box',
  columnWidth: function(width) {
    return width * (31.8 / 100);
  }
}); 
```

# php - 如果 xml api 调用没有结果，那么

> ID：15822445
> 
> 赞同：-1
> 
> 时间：2013-04-04T21:54:49.607
> 
> 标签：php, xml, api

我正在运行一个基本的 api 调用，它返回一个 xml 文件..我遍历数据并将它们设置为等于变量，然后 echo..一切正常，除非没有结果，然后它只是空白。如何添加 if 语句来检查 api 调用是否返回任何结果？

```
 if($url_headers[0] == 'HTTP/1.1 200 OK' && (!empty($searchCode))) {
        $xml = simplexml_load_file($searchCode);
foreach ($xml->result->result as $result):
    $cake=$result->{'cakename'};
    $icecream=$result->{'icecreamname'};

   echo "<ul class='cakes' >";
        echo "<li>$cake and $icecream</li>";
    echo "</ul>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:58:49.217

您正在搜索功能[`property_exists()`](http://php.net/manual/en/function.property-exists.php)。像这样使用它：

```
$xml = simplexml_load_file($searchCode);
if(!$xml 
  || !property_exists($xml, 'result')
  || !property_exists($xml->result, 'result')) {
    die('no results');
} 
```

当然你可以详细说明这个有更详细的错误信息。

# php - JOIN 不适用于 PHP + ODBC + Microsoft Access

> ID：15822448
> 
> 赞同：1
> 
> 时间：2013-04-04T21:54:55.573
> 
> 标签：php, sql, ms-access, odbc

我正在尝试编写一个插入现有 Access 数据库的 PHP 脚本。如果我从头开始，我会使用 MySQL 来完成这项工作，但是因为有一个现有的 MS Access 应用程序，所以我只能使用数据库。

截至目前，我正在尝试使以下 PHP 代码正常工作。

```
$conn=odbc_connect('buju','','');
if (!$conn)
{
  exit("Connection Failed: " . $conn);
}

$sql="SELECT * 
      FROM Teilnehmer 
      INNER JOIN TeilnWerte ON Teilnehmer.LfdNr = TeilnWerte.Teilnehmer 
      WHERE Teilnehmer.Klasse = '$_POST[klasse]'";
$rs=odbc_exec($conn,$sql);

echo "\nErrorCode:\n".odbc_error($conn);
echo "\nErrorMessage:\n".odbc_errormsg($conn); 
```

我很确定，问题出在 SQL 查询中，因为如果我只这样做，它就可以正常工作

```
SELECT * FROM Teilnehmer WHERE Klasse = '$_POST[klasse]' 
```

没有尝试加入第二张桌子。

我正在使用 odbc 和 Microsoft Access 驱动程序。我得到的错误代码是`07001`. 错误消息是

```
[Microsoft][ODBC Microsoft Access Driver] Too few parameters. Expected 1. 
```

我也试过

```
SELECT * 
FROM Teilnehmer, TeilnWerte 
WHERE Teilnehmer.LfdNr = TeilnWerte.Teilnehmer 
  AND Teilnehmer.Klasse = '$_POST[klasse]' 
```

这也不起作用。

有什么我做错了吗？是否有某些 SQL 命令不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:03:29.413

既然`echo $sql`给你...

```
SELECT *
FROM
    Teilnehmer
    INNER JOIN TeilnWerte
    ON Teilnehmer.LfdNr = TeilnWerte.Teilnehmer
WHERE Teilnehmer.Klasse = '06A' 
```

在 Access 中测试与新查询相同的语句。在查询设计器中创建一个查询，切换到 SQL 视图，粘贴该语句并查看运行它时会发生什么。

大多数情况下，*“参数太少”*的原因是拼写错误的项目（对象名称、函数或 SQL 关键字）。由于 db 引擎找不到该项目，它假定该项目是一个参数。Access 将弹出一个参数对话框，要求您提供参数值，该对话框还包含参数的名称。所以它会告诉你哪个是拼写错误的项目。

# linux - 目录在 perl 中被检测为文件

> ID：15822449
> 
> 赞同：2
> 
> 时间：2013-04-04T21:55:06.033
> 
> 标签：linux, perl, file, unix, directory

我尝试`(-d $var)`在循环中使用此条件来检查给定目录上有多少子目录，但有些文件夹被检测为文件。无法识别目录的情况发生了什么？我该如何解决这个问题？

我的代码是：

```
foreach my $file (@files) {
    next if($file =~ m/^\./);
    if (-d $file and -e $file and !$seen{$file}) {
        $seen{$file} = 1;
        push @Dir, "$pwd/$file";
    }
    next if ($file !~ m/\s/i);
    my $new_name = s/\s//g;
    `mv $pwd/$file $pwd/$new_name`;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:48:50.330

我没有看到任何明显的东西。但是，我确实发现了一个错误。

*   你有`my $new_name = s/\s//g;`. 你有`=`而不是`=~`.
*   你也不会说你是如何得到`$new_name`替换的。

这些都没有指向您的问题本身。

另一种可能性是您同时使用三个不同的测试。我想知道您是否以某种方式遇到了`-d`通过但其他条件不正确的情况。你可能想把它们分开。

我还注意到您测试文件是否是带有 的目录`$file`，但是当您将目录名称放入`@Dir`数组时，您会在它前面加上`$pwd`. 这里发生了什么？你也需要做`if ( -d "$pwd/$file" )`吗？

我建议您放入一些调试语句以查看问题所在。

尝试这个：

```
use strict;
use warnings;

use feature qw(say);
use File::Copy;

my %seen;
my @dir;
for my $file ( @files ) {
    say qq(DEBUG: Looking at "$file");
    next if $seen{$file};
    say qq(DEBUG: "$file" has not been previously seen);
    $seen{$file} = 1;
    next if $file =~ /^\./;
    say qq(DEBUG: "$file" does not start with a period);
    if ( -d $file ) {
       say qq(DEBUG: "$file" is a directory);
       push @dir, "$pwd/$file;
    }
    else { #DEBUG:
       say qq(DEBUG: "$file" is a file);
   } #DEBUG:
   my $new_name = $file;
   if ( $new_name =~ s/\s+//g ) {
      say qq(DEBUG: Moving file "$file" to "$new_name");
      move $file, $new_name or
        die qq(Couldn't move "$file" to "$new_name");
   }
} 
```

*   `use feature qw(say);`允许您使用该命令`say`。这就像`print`除了它在最后为您添加了一个新行。
*   该`use File::Copy`模块允许您使用`move`语句。不再需要炮轰和依赖操作系统。Perl 附带了一大堆模块，让您的生活更轻松。例如，`File::Find`允许您查找文件和目录。
*   我包括所有文件和目录`%seen`（为什么不呢？）并在检查它是否是目录之前先检查它。
*   我使用`move $file, $new_name or die qq(...)`来查看该 move 语句是否有效。您应该始终测试函数的输出——尤其是容易失败的函数，例如移动文件名或复制文件等。
*   注意我做`if ( $new_name =~ s/\s+//g )`。这使我可以测试是否`$new_name`有空间并同时删除这些空间。
*   就像双`qq(...)`引号，但您可以在字符串中使用引号而无需反引号。这样，我可以查看我的文件名是否在名称末尾有空格或 NL。

一旦你的代码工作，你可以轻松地搜索字符串`DEBUG:`并消除噪音。

我还没有测试我的代码（当程序没有真正完成并且我不知道你的数据是什么样子时很难），但我希望你能明白。这些`DEBUG:`语句将允许您查看代码中发生的更多内容并帮助您找到逻辑问题。大约 1/2 的时间问题不在程序中，而在数据中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:21:12.923

这发生在我不久前写了一个类似的脚本。[尝试通过File::Spec](http://perldoc.perl.org/File/Spec.html)方法使用整个路径`catfile`一起使用。我假设您在与实际文件和目录不同的目录中运行它。

```
use Cwd;
use File::Spec;

my $dir = getcwd; # Or whatever directory name you want
my $full_name = File::Spec->catfile($dir, $file);
if (-d $full_name) {
  # Do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T00:47:27.083

您的代码存在许多问题。为什么你认为`-d`测试失败了？相同的重命名适用于目录和文件；唯一的区别是目录`@dir`在第一次出现时会被额外推送到数组中。

我不清楚你想要做什么，但这个版本只重命名名称中包含空格字符的文件。

```
foreach my $file (@files) {

    next if $file =~ m/^\./;

    if (-d $file ) {
        push @dir, "$pwd/$file" unless $seen{$file}++;
        next;
    }

    my $new_name = $file;
    if ($new_name =~ s/\s//g) {
        rename "$pwd/$file", "$pwd/$new_name" or warn $!;
    }
} 
```

# actionscript-3 - 如何通过代码减慢骨骼动画？

> ID：15822452
> 
> 赞同：0
> 
> 时间：2013-04-04T21:55:11.783
> 
> 标签：actionscript-3, flash

我在屏幕上用 ik 骨骼绘制了一条触手，当玩家足够近时，我想弯曲它以抵住玩家。我已经让它工作了，但是动画发生得太快了，即使我抛出了各种：

```
myMover.limitByTime = true;
myMover.timeLimit = 4000;
myMover.limitByIteration = true; 
myMover.iterationLimit = 1; 
myMover.limitByDistance = true
myMover.distanceLimit=1000; 
```

我认为可能会减慢它的代码，它根本不会减慢。我该如何解决？:S 我不确定这是否是好的形式，但我也有一个相关的问题：如果我没有将它设置为运行时而不是授权时间，我如何让闪存识别电枢？因为如果我将其设置为 authortime 那么以下代码将返回 null：

```
tentacle = IKManager.getArmatureByName("tentacle");
trace(tentacle); 
```

现在运行时的问题是一些聪明的用户可能能够用鼠标操纵我的触手怪物：|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:34:08.000

据我了解`IKMover`限制，它们旨在控制最大处理时间，而不是动画。您可以通过在 IDE 中选择它并查看“位置”属性来调整每个骨骼的速度。

我建议将速度保持在 100% 并消除限制，然后直接为目标点设置动画（并调用`moveTo`每一帧）。这样您就可以更精确地控制速度。

# xcode4 - 显示 Xcode 的“显示查找选项”的任何键盘快捷键？

> ID：15822453
> 
> 赞同：0
> 
> 时间：2013-04-04T21:55:12.180
> 
> 标签：xcode4

Xcode 提供了几个关键代码来打开**查找 (CMD-F)**或**查找和替换 (CMD-OPT-F)**编辑器工具栏，但是如何在无需将鼠标移到放大镜上并单击的情况下显示**查找选项**（这需要永远，我点击错误，然后必须选择菜单项 - 呃）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:55:12.180

I have not found a single key to do this, but just discovered that after using **CMD-F** or **CMD-OPT-F** that the **Find** search field has focus, and by tapping the **down arrow key** twice followed by a **Return** key, that it opened (do again to close)!

I added a key code sequence to **Butler** so I can use a single key to do this, so use your favorite **Macro** program to do likewise.

EDIT: Just discovered this still works in Xcode 7, you just need to do 2 down-arrows followed by a return.

# c++ - 我如何（如果有的话）在堆上模拟一个模拟类？

> ID：15822460
> 
> 赞同：3
> 
> 时间：2013-04-04T21:55:34.613
> 
> 标签：c++, googlemock

我创建了一个测试模拟类，就像文档中描述的那样简单：

```
class MockLogicLoopable : public LogicLoopable 
{
public:
  MOCK_METHOD0(update,void());
  MOCK_METHOD0(loopableType,LoopableType());
}; 
```

现在我想做这样的事情：

```
TEST(Examplegroup,Example)
{
    MockLogicLoopable* mll = new MockLogicLoopable();
    EXPECT_CALL(mll,loopableType())
        .WillRepeatedly(Return(LOGIC));
} 
```

我不确定如何（如果有的话）使用 googlemock 来实现这样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T22:29:36.590

您有一个 in 指针`mll`，但`EXPECT_CALL`希望它的第一个参数是一个值。使用 取消引用您的指针`*`，就像其他任何操作一样：

```
EXPECT_CALL(*mll, loopableType())
  .WillRepeatedly(Return(LOGIC)); 
```

# jquery - Changing value of a hidden field on postback

> ID：15822464
> 
> 赞同：0
> 
> 时间：2013-04-04T21:55:45.303
> 
> 标签：jquery, forms, asp.net-mvc-4, submit, hidden

I have spent all day trying to debug this and I need help. I am developing a JQuery Mobile application in ASP.Net MVC 4\. I have a form with a hidden field on it, with a value that is derived from a model property:

```
@<input type="hidden" id="hdnShowMsg" name="hdnShowMsg" value="@Model.ShowMsg" /> 
```

After form submission, Model.ShowMsg is modified by the controller and then the form is redisplayed. The problem is that by the time the view gets to its javascript (DOM fully loaded), Model.ShowMsg does not show the modified value but still shows the initial value (before the post).

I found this as a possible solution, which describes my situation almost exactly, however clearing the ModelState in the controller does not solve the issue: [http://blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx](http://blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx)

I understand how the modelstate retains the form field values so it can redisplay them in case of a validation error. I also understand that the HTML helpers in the view will use the ModelState first before using the model. Why do I still have the issue if I clear the modelstate?

I put a breakpoint in the controller and verified that the modelstate was cleared, however when the view is redisplayed after the postback, the following javascript code displays the old value:

```
<script>
    $(document).ready(function () {
        alert(document.getElementById("hdnShowMsg").value);
    });
</script> 
```

How can this be?

Here is the html helper for the form:

```
@Using Html.BeginForm("Index", "NewDocument", Model, FormMethod.Post, New With {.id = "newdocument-form"}) 
```

# php - 阿拉伯语支持 db,php & js

> ID：15822466
> 
> 赞同：0
> 
> 时间：2013-04-04T21:55:47.203
> 
> 标签：php, javascript, html, ajax, mysqli

当我在文本区域内输入阿拉伯语评论时，它会直接正确地出现在站点“عربي”并将其发送到数据库。

当我刷新页面时，它看起来像这样“Ø¹Ø±Ø¨Ù​​�”

我尝试使用“phpMyAdmin”直接在数据库中输入一些文本，我的网站显示它像这样“?????”。

我在我的 HTML 页面中使用了这段代码：

```
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta charset="windows-1256"> 
```

并且数据库的编码是utf8_unicode_ci。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:18:52.513

尝试在所有其他查询之前执行此查询：

```
$query="SET NAMES utf8"; 
```

# javascript - 如何在jQuery追加中输出图像链接

> ID：15822467
> 
> 赞同：1
> 
> 时间：2013-04-04T21:55:52.563
> 
> 标签：javascript, jquery, html, json

我创建了一个图库网格并尝试输出图像。我尝试将路径放入`var thumb ="path";`，然后将其连接到，`json_data`但无法读取图像的路径。有任何想法吗？

```
function ajaxfunction(json_data){
    var path = "images/products/shirts/smallthumbs/"; // path to image
    var url = "#";

    var table = $("<table></table>");
    var tr = $("<tr></tr>").appendTo(table);
    for (var i = 0; i < json_data.length ; i++){
        if (i %4==0)
            tr = $("<tr></tr>").appendTo(table);              
        $(tr).append("<td>"+json_data[i].prod_name+"<br/>"+
          " " + "<a href="+url+"><img src="+path+json_data[i].pic"/></a>"+"<br/>"+ //attempting output
          "\u00A3"+json_data[i].price+"</td>");
    }  

    $("#maindisplay").append(table);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:00:05.160

用单引号将`src`属性内容（即您的路径数据）括起来，因此请替换以下代码：

```
... +"><img src="+path+json_data[i].pic"/></a>"+ ... 
```

对于这个：

```
... +"><img src='"+path+json_data[i].pic"'/></a>"+ ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:00:42.537

这条线`$(tr).append("<td>"+json_data[i].prod_name+"<br/>"+ " " + "<a href="+url+"><img src="+path+json_data[i].pic"/></a>"+"<br/>"+ //attempting output "\u00A3"+json_data[i].price+"</td>");`

需要有适当的引号分隔字符串（最好`'`用于 JavaScript*字符串*，以便您可以`"`用于 HTML 中的属性：

```
 $(tr).append('<td>' + json_data[i].prod_name + '<br/>' +
  ' ' + '<a href="' + url + '"><img src="' + path + json_data[i].pic + '"/></a>' + '<br/>' + //attempting output
  '\u00A3' + json_data[i].price + '</td>'); 
```

此外，多次调用`.appendTo()`. 您应该一次性生成 HMTL 元素，而不是多次`.append()`调用。

# asp.net-mvc - 如何使用mvc4生成文件路径

> ID：15822473
> 
> 赞同：0
> 
> 时间：2013-04-04T21:56:12.183
> 
> 标签：asp.net-mvc, asp.net-mvc-4, fileresult

希望了解以下最佳实践。我正在运行一个 asp.net mvc 4 站点。

我有 2 个静态 PDF 文档，我网站的用户可以下载这些文档。文档的路径基于不同的标准。我有 3 个选项来生成文件的路径。

1.  当页面加载时在控制器中处理它并将我的视图模型中的路径传递给我的剃刀视图并将其添加到锚链接的 href 标记

2.  当用户单击链接以返回 FileResult 时调用控制器操作。

3.  有一个返回文件路径的 HtmlHelper。

以上哪一项是最佳实践？我倾向于排名第一，但希望反馈在架构上是最好的选择，也是对性能影响最小的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:01:06.633

我认为＃2是最好的选择。首先，您不必绕过路由。其次，我认为如果您不透露文件层次结构的实际结构总是更安全。最后，如果您更改了文件的位置，您的链接不会中断 - 您只需将控制器指向新的文件位置即可。

# jquery - tinymce 在 chrome 和 safari 中被白色对角矩形覆盖？

> ID：15822477
> 
> 赞同：1
> 
> 时间：2013-04-04T21:56:25.320
> 
> 标签：jquery, tinymce

我正在尝试在我的网站中使用 Tinymce。出于某种原因，当我在 chrome 和 safari 上使用它时，它被一个大的白色对角矩形覆盖......

它在 Firefox 中运行良好。

这是它的外观示例屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/1R1ZQ.png)

如您所见，tinymce 在对角线后面...

有什么想法可能导致这种情况吗？

# c++ - 在 c++ 中使用 Unions 时不理解输出

> ID：15822480
> 
> 赞同：1
> 
> 时间：2013-04-04T21:56:48.913
> 
> 标签：c++, unions

我不太明白以下代码的输出

```
union foo
{
    int a;
    double b;
};

int main()
{
    foo f;
    f.b = 12.0;
    cout << f.b << endl;

    f.a = 69;
    cout << f.b << endl;
    cout << f.a << endl;

    return 0;
} 
```

为什么打印 12 12 69

如果我没记错的话，第二个 12 应该是垃圾。我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T21:59:33.923

您的代码有错误。该标准规定，如果您从除最后一个成员之外的任何工会成员中读取，则结果未指定。如果你修复代码并遵守标准，谜团就会消失。

最有可能的是，编译器正在优化联合，只使用两个寄存器。

请参阅第 6.2.6.1 或 J.1 节，其中指出“除了最后一个存储到的联合成员的值”未指定，并且可能返回任何不会导致陷阱的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T22:04:43.970

如果我更精确地打印值，我会得到

```
12.000000000000122569 
```

`f.b`之后`f.a = 69`。_

除了未定义的行为之外，可能发生的情况是设置`f.a`仅更改有效位的最低有效位（`sizeof(int)`可能是`sizeof(double)`4、8），因此您得到的值接近`12.0`您最初设置的值，并且差异对于标准打印来说太小了展示它。

# breeze - 拒绝更改不会从父项中删除实体

> ID：15822482
> 
> 赞同：1
> 
> 时间：2013-04-04T21:57:00.853
> 
> 标签：breeze

当我创建一个新实体并设置其导航属性然后拒绝父级对空白实体进行的更改时。在拒绝更改之前，我是否需要明确地从父实体中删除新实体？我没有明确地将它添加到父级，我只是设置了新实体的父级 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:14:27.290

拒绝对新实体的更改只会丢弃该实体 - 使其 entityState “分离”。在这种情况下，任何依附于父母的孩子实际上都会陷入困境，即他们没有父母。

换句话说，Breeze 不会因为父级的rejectChanges 而对任何子级调用**rejectChanges 。**这是故意的。

所以你最好的选择是对孩子也调用**rejectChanges**。如果他们自己是新实体，他们也会变得分离，否则他们的父母将恢复到他们以前的父母的任何实体。

请注意，您可以使用 EntityManager.getEntities 方法返回指定 entityTypes 和 entityStates 的所有实体。这对于确定要“回滚”哪些实体很有用。

请参阅[实体管理器 getEntities 方法](http://www.breezejs.com/sites/all/apidocs/classes/EntityManager.html#method_getEntities)

# css - 全宽 div 内的响应式图像

> ID：15822493
> 
> 赞同：1
> 
> 时间：2013-04-04T21:58:14.410
> 
> 标签：css, responsive-design, media-queries, image-scaling

我有这个标记：

```
<div class="girls" style="text-align:center; margin-top:100px">
    <img src="images/1.png" />
    <img src="images/2.png" />
    <img src="images/3.png" />
    <img src="images/4.png" /> 
```

和这个 css（我正在使用 Twitter Bootstrap）：

```
img {

    height: auto;
    max-width: 100%;
    vertical-align: middle;
    border: 0;
    -ms-interpolation-mode: bicubic; 
```

}

图像具有相同的宽度和高度，并内联显示。

在我的分辨率上还可以，适合整个宽度（1366 像素），但在较低分辨率下，图像不适合。所以，我需要保持每个屏幕分辨率的比例（在我的情况下低于 1366px）

我找到了这个 [图片填充](https://github.com/scottjehl/picturefill)

我认为这对我有帮助，但我认为这对我的情况来说是一个更简单的解决方案，因为我有 4 个图像，我需要水平显示它们并使它们在每个分辨率上缩放。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:01:20.483

您可以将图像的样式`width`属性设置为 25%，而无需指定高度。如果你总是放 4 个图像，它们之间的宽度相同，并且你的容器 div 总是为 100%，那将是可行的。

高温高压

弗朗西斯科

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:14:15.543

如果您使用的是 Twitter Bootstrap，请像在[Twitter Bootstrap 文档](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)中一样正确使用标记：

```
<div class="row-fluid">
    <div class="span3">
        <img src="http://placehold.it/350x400"/>
    </div>
    <div class="span3">
        <img src="http://placehold.it/350x400"/>
    </div>
    <div class="span3">
        <img src="http://placehold.it/350x400"/>
    </div>
    <div class="span3">
        <img src="http://placehold.it/350x400"/>
    </div>
<div> 
```

[http://jsfiddle.net/zNLBG/](http://jsfiddle.net/zNLBG/)

# java - 如何在java中安全地存储用户密码以便在整个应用程序中重用

> ID：15822494
> 
> 赞同：1
> 
> 时间：2013-04-04T21:58:25.343
> 
> 标签：java, security, encryption, passwords

在我的 Java 应用程序开始时，我让用户输入他的用户名和密码。这些凭据存储在 ConnectionKey 对象中，该对象在应用程序对 Web 服务进行查询时使用。每个查询都需要有效的用户名和密码。此外，这些查询会在应用程序的整个生命周期中执行。

现在，我将用户密码作为简单的字符串存储在 ConnectionKey 中。我知道这是非常不安全的，我想通过某种加密使其更安全。但是，我需要能够检索原始用户密码才能查询此 Web 服务。

*   如何安全地存储用户密码，同时在整个应用程序中仍使用此密码？

谢谢！

编辑

ConnectionKey 只是一个像这样的类：

```
class ConnectionKey {

    private final String user;
    private final String pass;
    private final String server;

    public ConnectionKey(String user, String pass, String server) {
         this.user = user;
         this.pass = pass;
         this.server = server;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:13:30.583

To begin with, I am sure that you read the following question on SO [Why is char[] preferred over String for passwords?](https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords) Which implies that if you have plain password, at least be it a char[] not String

Other than that, to securely store a user password, you should encrypt it with a well-known, well-tested (and usually one-way) encryption algorithm.

This maybe contradicts with what you asked and how you use ConnectionKey, but the problem is easy encrypt your password and change your api/methods where password is used.

For example, if you are trying to validate a ConnectionKey on the server side, change that method to work with encrypted passwords, that is, use the same encryption algorithm for the known password and compare it with the incoming encrypted one.

# c++ - 是否可以在 C++ 中的 return 语句之后执行代码？

> ID：15822496
> 
> 赞同：5
> 
> 时间：2013-04-04T21:58:31.220
> 
> 标签：c++

我是一名 Java 程序员，不熟悉 C++。在下面的代码中，我知道 if(condition1) 为真 variable1 被返回。但是是否有任何机制可以在第一个 if 条件评估为 true 之后处理第二个 if ？我问这个是因为我见过这样的代码，并且在调试时发现了它。

```
if( condition1 )
{
    return variable1;
}

//do some processing here

if( condition2 )
{
    return variable2;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-04T22:07:52.443

尽管有一种方法可以在 return 语句之后运行代码，但在 return 语句执行后无法再次返回。

以下是如何让一些代码在 return 语句之后运行：

```
struct AfterReturn {
    ~AfterReturn() {
        // This code will run when an AfterReturn object goes out of scope
        cout << "after return" << endl;
    }
};

int foo() {
    AfterReturn guard; // This variable goes out of scope on return
    cout << "returning..." << endl;
    return 5;
    // This is when the destructor of "guard" will be executed
}

int main() {
    cout << foo() << endl;
    return 0;
} 
```

上面的程序[打印](http://ideone.com/Pijpfw)

```
returning...
after return
5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T22:04:52.273

不会。一旦`return`遇到 a，就不会处理函数中的任何其他内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T21:59:45.053

您的函数必须执行 1 条且正好 1`return`条语句。

因此，要么`return variable1`被执行，要么被执行`if(condition2)`，但绝不会同时执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T22:04:21.110

`return`不，到达语句后永远不会执行代码。但是，如果`condition1`为 false，则`return`未到达该语句，因此执行正常进行。这也正是 Java 的行为方式。

有反对早期`return`陈述的论据，但我个人认为它们很有帮助；试图避免它们可能会导致无关紧要的东西，例如对你没有任何好处的临时变量或大块`if`，由于它们的范围，它们大多只是令人困惑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T22:05:12.490

只有当它被调用时才会执行。此时，您将离开该功能/方法。在您的情况下，如果条件 1 为假，它将运行您的额外处理，然后继续测试条件 2。

现在，在您的情况下，您的代码可能无法编译。（我知道它不会在 Java 中）这是因为在这种情况下我们会迷路，这两个条件都可能不满足。因此，您可能应该在 if 语句之外获得一些回报。

简而言之，在调用 return 之后不会执行任何代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T22:02:16.030

据我记得（或者至少像我的老师告诉我的那样）在执行结束`return` *之前*使用并不是一个好主意，递归函数除外。

我建议您使用一个变量来存储您想要作为函数结果返回的值，并在函数结束时返回它：

```
if( condition1 )
{
    ans = variable1;
}

/* more code */

if( condition2 )
{
    ans = variable2;
}
return ans; 
```

# javascript - 选择一个元素的所有子元素并使用jQuery淡出它们？

> ID：15822499
> 
> 赞同：3
> 
> 时间：2013-04-04T21:58:54.013
> 
> 标签：javascript, jquery, fadeout, children

我正在使用以下 HTML 代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Project Quiz</title>
    <link rel="stylesheet" type="text/css" href="z/baseCss.CSS">
    <script src="/jquery-1.9.1.min.js"></script>
    <script src="/baseJS.js"></script>
</head>
<body>

<div id=header></div>
<div id=contain>
    <h1>Welcome to my web application</br>
  Please enter your name, click 'continue' and have fun</h1>
    <form>
        <input type="text" id="name" value="John Doe"/>
    </form>
    <div class="awesome">Continue</div><br/>
</div>
<div id=footer></div>

</body>
</html> 
```

和一个jQuery代码：

```
$(document).ready(function(){
    $("input")
        .focus(function(){
        $(this).css('outline-color','#559FFF');
        $(this).blur(function(){
            $(this).css("outline-color","#FF0000");
        });
    });
    $("input").click(function(){
     var value = $(this).val(function(){
         $(this).html("");
      });
    });
    $(".awesome").click(function(){
        b._slide(1000);
    });
    var b = $("div:nth-child(2)");
    alert(b);
}); 
```

我的问题是，我无法弄清楚如何选择所有子级，`<div id="contain">`并在单击具有“真棒”类的 div 按钮时让它们淡出。

这是我到目前为止所尝试的：

```
$(".contain").each(function(){
    $(this).fadeOut(1000);
});

but it didnt work also i tried: 
$(".contain").children(function(){
    $(this).fadeOut(1000);
}); 
```

这里的结果相同。

我究竟做错了什么？我只需要`fadeOut`内容`<div id="contain">`并保持其他所有内容不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:02:07.887

你需要使用：

```
$("#contain").children().fadeOut(1000); 
```

*   `$(this)`是你的选择器
*   [`.children()`](http://api.jquery.com/children/)选择一个元素的所有子元素
*   [`.fadeOut(1000)`](http://api.jquery.com/fadeOut/)淡出当前选择

您的尝试是错误的，因为：

```
$(".contain").each(function(){ $(this).fadeOut(1000); }); 
```

选择所有具有类的元素`.contain`并隐藏它们

```
$(".contain").children(function(){ $(this).fadeOut(1000); }); 
```

选择带有 class 的元素`.contain`，然后传递一个`.children()`它不处理的函数。

请注意，在您的情况下`contain`是 ID 而不是类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:22:34.027

旁边挂着“。” 以 "#" 形式形成 jquery 选择器，如果您不需要插入任何其他内容或在其中显示新内容`<div id="contain">`，您可以这样做

```
$("#contain").fade(1000); 
```

所有的孩子也会褪色

# python - 如何从python中的字典中删除所有0？

> ID：15822504
> 
> 赞同：5
> 
> 时间：2013-04-04T21:59:23.940
> 
> 标签：python, dictionary

假设我有一本这样的字典：

```
{'1': 2, '0': 0, '3': 4, '2': 4, '5': 1, '4': 1, '7': 0, '6': 0, '9': 0, '8': 0} 
```

我想删除所有值为零的项目

这样就出来了

```
{'1': 2, '3': 4, '2': 4, '5': 1, '4': 1} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T22:01:01.757

使用字典理解：

```
In [94]: dic={'1': 2, '0': 0, '3': 4, '2': 4, '5': 1, '4': 1, '7': 0, '6': 0, '9': 0, '8': 0}

In [95]: {x:y for x,y in dic.items() if y!=0}
Out[95]: {'1': 2, '2': 4, '3': 4, '4': 1, '5': 1} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T22:01:12.897

使用字典理解：

```
{k: v for k, v in d.items() if v} 
```

# html - 如何使用 CSS 将选择下拉列表中的文本对齐方式向顶部和左侧移动？

> ID：15822505
> 
> 赞同：4
> 
> 时间：2013-04-04T21:59:30.923
> 
> 标签：html, css, select, html-select

我正在尝试使用 JavaScript 和 CSS 在类似电子表格的表格顶部显示下拉列表，但在对齐方面存在问题。我已将所有边框、边距和填充设置为零，但是我无法确定如何将文本（默认文本，在显示下拉列表之前）移向左上角。我曾经`text-indent: -3px;`让它向左移动，但是有一个`3px-5px`间隙（清晰可见，`background-color: #888888;`而不仅仅是选择边界的边缘）剪辑了左侧的文本。

有谁知道如何将基于选择的 HTML 下拉列表的文本位置移动到左上角？

编辑：

从 Chrome 添加计算样式以演示文本框和带有屏幕截图的下拉列表之间的区别。

文本框 CSS：

```
-webkit-border-image: none;
-webkit-line-break: after-white-space;
-webkit-nbsp-mode: space;
-webkit-user-modify: read-write;
border-bottom-color: rgb(37, 66, 100);
border-bottom-style: none;
border-bottom-width: 0px;
border-left-color: rgb(37, 66, 100);
border-left-style: none;
border-left-width: 0px;
border-right-color: rgb(37, 66, 100);
border-right-style: none;
border-right-width: 0px;
border-top-color: rgb(37, 66, 100);
border-top-style: none;
border-top-width: 0px;
color: rgb(37, 66, 100);
cursor: auto;
display: block;
font-family: Calibri, sans-serif;
font-size: 15px;
height: 18px;
left: 204px;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 0px;
margin-top: 0px;
outline-color: rgb(37, 66, 100);
outline-style: none;
outline-width: 0px;
padding-bottom: 0px;
padding-left: 0px;
padding-right: 0px;
padding-top: 0px;
position: absolute;
top: 21px;
white-space: pre;
width: 73px;
word-wrap: break-word;
z-index: 99; 
```

选择 CSS：

```
-webkit-appearance: menulist-button;
-webkit-border-image: none;
-webkit-box-align: center;
-webkit-rtl-ordering: logical;
-webkit-user-select: none;
-webkit-writing-mode: horizontal-tb;
background-color: rgb(255, 255, 255);
border-bottom-color: rgb(37, 66, 100);
border-bottom-left-radius: 0px;
border-bottom-right-radius: 0px;
border-bottom-style: none;
border-bottom-width: 0px;
border-left-color: rgb(37, 66, 100);
border-left-style: none;
border-left-width: 0px;
border-right-color: rgb(37, 66, 100);
border-right-style: none;
border-right-width: 0px;
border-top-color: rgb(37, 66, 100);
border-top-left-radius: 0px;
border-top-right-radius: 0px;
border-top-style: none;
border-top-width: 0px;
box-sizing: border-box;
color: rgb(37, 66, 100);
cursor: default;
display: block;
font-family: Calibri, sans-serif;
font-size: 15px;
height: 16px;
left: 281px;
letter-spacing: normal;
line-height: normal;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 0px;
margin-top: 0px;
outline-color: rgb(37, 66, 100);
outline-style: none;
outline-width: 0px;
padding-bottom: 0px;
padding-left: 0px;
padding-right: 0px;
padding-top: 0px;
position: absolute;
text-align: start;
text-indent: -3px;
text-shadow: none;
text-transform: none;
top: 22px;
white-space: pre;
width: 135px;
word-spacing: 0px;
writing-mode: lr-tb;
z-index: 99; 
```

文本框 ![在此处输入图像描述](https://i.stack.imgur.com/y7EQ6.png) 截图： 选择截图： ![在此处输入图像描述](https://i.stack.imgur.com/EeQS8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-31T22:13:53.983

我和你有同样的情况......可悲的是，我能想出的唯一有助于使文本更正确地对齐的方法是添加：`&nbsp;`

```
<select name='something'>
<option value='nan'>&nbsp;&nbsp; Some Text Here</option>
<option value='nan'>&nbsp;&nbsp; Some Text Here</option>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:14:18.747

只是为了排除基础知识，您是否尝试过：

```
 option, select {
      text-align: left;
      vertical-align: top;
   } 
```

# mysql - sql加入2个具有相同外键的表

> ID：15822511
> 
> 赞同：0
> 
> 时间：2013-04-04T21:59:47.377
> 
> 标签：mysql

我有两个表，它们都有第三个表的外键，如何使用外键将这两个表链接在一起，注意外键在表中是唯一的。

```
SELECT A.id, B.id
FROM A, B
WHERE A.c_id = B.c_id; 
```

以上是我想出的，但它不起作用，因为它只返回 1 条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:07:31.407

你的方法对我有用。这是一个 SQL Fiddle 显示它的工作，您的确切代码： [http ://sqlfiddle.com/#!2/10b06/1](http://sqlfiddle.com/#!2/10b06/1)

也许您只返回了一条记录，因为`c_id`表 A 和表 B 中都只有一个非空值。

我建议做`SELECT DISTINCT c_id FROM A`and `SELECT DISTINCT c_id FROM B`，然后用眼睛查看列表。我希望您会发现两个结果集中只出现一个值（您当前正在返回的那个）。

# android - ListView 项目动画麻烦

> ID：15822513
> 
> 赞同：1
> 
> 时间：2013-04-04T21:59:51.570
> 
> 标签：android, listview, animation

我删除了一个带有向上滑动动画的 ListView 项目。然后下面的视图一起向上滑动。一切看起来都很棒，除了底部有一个空白空间。

有谁知道如何制作这样的动画？

或者如何使列表视图保留一个“屏幕外”视图，以便它也可以滑动而不是空白空间。

# ios - NSManagedObjectContext objectWithId 不返回对象，尽管 objectId 有效

> ID：15822514
> 
> 赞同：0
> 
> 时间：2013-04-04T21:59:52.537
> 
> 标签：ios, core-data

我有一个持久存储<->主线程上下文<->私有线程上下文（用作暂存器）的核心数据结构。

我的用户在“私人线程”/便笺上下文中创建和配置杂志对象后按“保存”。

我从主线程上下文中获取当前登录的帐户，因为必须为要创建的新杂志分配一个帐户。

```
Account* accountForMagazine = [self.accountsConnector getSelectedAccount];
NSLog(@"object id: %@",accountForMagazine.objectID); 
```

对象 id NSLog 输出为：

```
0xa677790 <x-coredata://F635CE5A-C335-48F0-BB27-61B7D9XXXXD8/Account/p4> 
```

所以它是一个永久 id，它告诉我该对象在持久存储中。

然后我切换到私有线程（databaseConnector 只是私有线程上托管对象上下文的包装器）并尝试将该帐户对象带到线程上，以便可以将其分配给将要保存的杂志对象。

```
[self.databaseConnector executeOnCorrectThread:^
{
    Account* account = (Account*)[self.databaseConnector.getContext objectWithID:accountForMagazine.objectID];
    self.magazine.account = account;
    if(!account) { NSLog(@"nil account"); }
    [self.databaseConnector save];
} 
```

我遇到的问题是，虽然新的杂志对象正在保存并进入持久存储，但它们都没有连接到帐户！当然，每次都会显示 NSLog 语句——表示该线程上的帐户对象为 nil。

因此，即使我有一个有效的 objectId，因此该对象存在于持久存储中，我也没有通过 objectWithId 在私有线程上获取帐户对象。

任何想法为什么会这样？

谢谢

维生素B

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:55:29.417

里面的东西是`nil`你不希望的`nil`。

原因如下：`objectWithID:` *总是*返回一个对象。但你得到`nil`. 最可能的原因是`self.databaseConnector.getContext`实际上是`nil`在该块中返回。可能`accountForMagazine`也是如此，但如果这是唯一出乎意料的情况，*那么* 您的应用程序将会崩溃（无法传递给该方法并继续运行）。`nil``nil``nil`

# wpf - 使用动画制作 WPF 标签（或其他元素）闪烁

> ID：15822519
> 
> 赞同：13
> 
> 时间：2013-04-04T22:00:36.180
> 
> 标签：wpf, animation, triggers, datatrigger

我有一个标签，我只根据我的 ViewModel 属性之一使其可见。这是 XAML：

```
<Label  HorizontalAlignment="Center" VerticalAlignment="Center"
        HorizontalContentAlignment="Center" 
        VerticalContentAlignment="Center" 
        FontSize="24" Width="200" Height="200" >
    <Label.Content >
        Option in the money! 
    </Label.Content>
    <Label.Style>
        <Style TargetType="{x:Type Label}">
            <Setter Property="Visibility" Value="Hidden" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding OptionInMoney}" Value="True">
                    <Setter Property="Visibility"
                Value="Visible" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Label.Style>

</Label> 
```

我不确定这是最好的方法，但无论如何，我也希望标签闪烁。显然，我只希望它在可见时闪烁。有人可以指点我一些示例代码，或者写一个简单的例子来做到这一点吗？我想我需要某种触发器和动画。据推测，当标签不再可见时我还需要一个触发器以便我停止动画？

谢谢， Dave PS 是否有一本关于所有这些 WPF 技巧的好书或网站？对于那些记得那本书的人来说，就像“MFC Answer Book”之类的东西。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-05T07:02:54.833

您可以向`Storyboard`中添加动画`Style.Resources`并`EnterActions`在`DataTrigger`.

一个简单`DoubleAnimation`的`Opacity`应该可以正常工作

像这样的东西：

```
<Label.Style>
    <Style TargetType="{x:Type Label}">
        <Style.Resources>
            <Storyboard x:Key="flashAnimation" >
                <DoubleAnimation Storyboard.TargetProperty="Opacity" From="1" To="0" AutoReverse="True" Duration="0:0:0.5" RepeatBehavior="Forever" />
            </Storyboard>
        </Style.Resources>

        <Setter Property="Visibility" Value="Hidden" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding OptionInMoney}" Value="True">
                <Setter Property="Visibility" Value="Visible" />
                <DataTrigger.EnterActions>
                    <BeginStoryboard Name="flash" Storyboard="{StaticResource flashAnimation}" />
                </DataTrigger.EnterActions>
                <DataTrigger.ExitActions>
                    <StopStoryboard BeginStoryboardName="flash"/>
                </DataTrigger.ExitActions>
            </DataTrigger>

        </Style.Triggers>
    </Style>
</Label.Style> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-04T07:38:02.740

StoryBoard 当然是 WPF 方式，但也可以通过简单的代码来实现。在这里，让标签背景闪烁：

**lblTimer**是您表单上的 Lebel，带有一些文字，例如“我正在闪烁”

这可以应用于任何属性，如 VISIBILITY。

```
// Create a timer.
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    DispatcherTimer timer = new DispatcherTimer();
    timer.Tick += timer_Tick;
    timer.Interval = new TimeSpan(0, 0, 0, 0, 500);
    timer.Start();
}

// The timer's Tick event.
private bool BlinkOn = false;
private void timer_Tick(object sender, EventArgs e)
{
    if (BlinkOn)
    {
        lblTimer.Foreground = Brushes.Black;
        lblTimer.Background = Brushes.White;
    }
    else
    {
        lblTimer.Foreground = Brushes.White;
        lblTimer.Background = Brushes.Black;
    }
    BlinkOn = !BlinkOn;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T22:11:14.013

试试[这个帖子](https://stackoverflow.com/questions/2652831/blinking-textblock#)。它被称为“闪烁文本块”，但您可以轻松地将 a 替换`TextBox`为 Label 。

# scala - 有条件地调用没有临时 var 的成员函数

> ID：15822527
> 
> 赞同：5
> 
> 时间：2013-04-04T22:01:03.170
> 
> 标签：scala

我有一个返回对象的表达式，并且我只想在某个布尔条件为真时才对结果对象调用一个方法。我想在 val.

一种方法是使用临时变量，例如在下面的示例中，其中`List(3, 1, 2)`（可能很复杂）表达式返回一个对象，`list`是临时变量，并且`.sorted`是我想要有条件地调用的方法：

```
import scala.util.Random

val condition = Random.nextBoolean
val result = {      
  var list = List(3, 1, 2);
  if (condition) list = list.sorted
  list
} 
```

这样做的规范方法是什么，也许*不*使用临时变量？

注意

```
if (condition) List(3, 1, 2).sorted else List(3, 1, 2) 
```

不太令人满意，因为`List(3, 1, 2)`通常可能是一个我不想重复的复杂表达式。

不幸的是，这是我发现的一种方法，它涉及提供显式类型（并且比如上所述引入临时 var 更长且更复杂）：

```
val condition = Random.nextBoolean
val result =
  (
    if (condition)
      {l: List[Int] => l.sorted}
    else
      identity(_: List[Int])
  ).apply(List(3, 1, 2)) 
```

我怀疑一定有一种我无法识别的更整洁的方式。

*更新：*一个稍微不那么难看的方法，不幸的是仍然需要明确的类型信息：

```
val condition = Random.nextBoolean    
val result = {
    l: List[Int] => if (condition) l.sorted else l
  }.apply(List(3, 1, 2)) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T22:32:05.507

您可以使用正向管道运算符：

```
implicit class PipedObject[A](value: A) {
  def |>[B](f: A => B): B = f(value)
}

scala> List(3, 1, 2) |> (xs => if (true) xs.sorted else xs)
res1: List[Int] = List(1, 2, 3) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-07T09:47:39.230

开始`Scala 2.13`，标准库现在提供链接操作[`pipe`](https://www.scala-lang.org/api/2.13.x/scala/util/ChainingOps.html#pipe[B](f:A=%3EB):B)，可用于转换/管道具有感兴趣函数的值，从而避免中间变量：

```
import scala.util.chaining._

List(3, 1, 2).pipe(list => if (condition) list.sorted else list) 
```

# php - MySql/PHP 查询返回空

> ID：15822533
> 
> 赞同：0
> 
> 时间：2013-04-04T22:01:24.120
> 
> 标签：php, mysql, sql

这是我的代码：

```
$result = mysqli_query($dbconnection, Data::followUser($user_id, $followUser_id)); 
```

`$result`此处返回空。

`followUser`类中的方法`Data`

```
public static function followUser($user_id, $followUser_id) {
    global $database;

    $query = "
        SELECT * 
        FROM profile_follow
        WHERE user_id = '{$user_id}' 
            AND follow_id = '{$followUser_id}';";

    $result = $database -> query($query);
    $num = mysqli_num_rows($result);

    if ($num  < 1) {
        $toast = "Follow";

        $query = "
        INSERT INTO profile_follow (user_id, follow_id)
            VALUES ('{$user_id}', '{$followUser_id}');";

        $result = $database -> query($query);

    } elseif ($num > 0) {
        $toast = "Unfollow";

        $query = "
        DELETE FROM profile_follow
        WHERE user_id = '{$user_id}' 
            AND follow_id = '{$followUser_id}';";

        $result = $database -> query($query);

    }

    return $toast;
} 
```

我已经验证该函数在回显 $toast 时可以正常工作。它要么是要么`Follow`基于`Unfollow`条件。我不认为我在它出来时处理它是正确的？

补充：

这是我对 $result 所做的事情：

```
if ($result == "Follow") {
            $output["result"] = "Follow";
            echo json_encode($output);
    } elseif ($result == "Unfollow") {
            $output["result"] = "Unfollow";
            echo json_encode($output);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:05:48.777

这一切都完成了什么？你基本上得到了：

```
mysqli_query($dbconnection, 'Unfollow'); 
```

这无论如何都不是有效的查询。`$result`不是空的。这是一个布尔值 false，表示查询失败...

# ruby-on-rails - 使用 rails 缓存

> ID：15822536
> 
> 赞同：1
> 
> 时间：2013-04-04T22:01:33.430
> 
> 标签：ruby-on-rails, caching

我正在尝试缓存我的视图中昂贵的片段。应用程序的其他部分有工作缓存。这是视图（在haml中）

```
@users.each do
  - cache user, expires_in: 60*60*8 do
    %tr{id: "user_id_#{user.id}"}
      %td= user.name
      # lots of other simple calcs
      -cache "user_#{user.id}_score", expires_in: 1.week do
        - score = #expensive calculation
        %td= score 
```

但是，当我查看生产时，我找不到缓存

```
Rails.cache.read('user_215_score') 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:06:16.620

忘记添加“视图”

```
Rails.cache.read 'views/user_215_retention' 
```

返回了预期的结果

# jquery - 如果显示块，从所有具有相同类的 DIV 中选择 DIV

> ID：15822540
> 
> 赞同：-1
> 
> 时间：2013-04-04T22:02:17.647
> 
> 标签：jquery

我有一个具有相同类名的以下 div 结构。我只想选择具有 display:block:- 的 DIV

```
<div class="popup popup-video" id="xyz_id" style="display: block; position: fixed; opacity: 1; z-index: 11000; left: 50%; margin-left: -275px; top: 50%; margin-top: -173px;">
   <h2 class="popup-title">XYZ</h2>    
</div>

 <div class="popup popup-video" id="abc_id">
    <h2 class="popup-title">ABC</h2>
 </div>

 <div class="popup popup-video" id="abc_id">
    <h2 class="popup-title">ABC</h2>
 </div>

<div class="popup popup-video" id="xyze_id" style="display: none; position: fixed; opacity: 1; z-index: 11000; left: 50%; margin-left: -275px; top: 50%; margin-top: -173px;">
    <h2 class="popup-title">XYZE</h2>    
</div> 
```

可以在 JQuery 中使用吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:04:37.397

```
$("div.popup-video").filter(function() {
    return $(this).css("display") === "block";
}); 
```

要获取此 div 中的第一个 div，请尝试以下操作：

```
$("div.popup-video").filter(function() {
    return $(this).css("display") === "block";
}).find("div:first"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:05:37.310

非常感谢迈克。

这就是我所做的。

```
$("div.popup-video").filter(function() {
    return $(this).css("display") === "block";
}).each(function () {
   alert($("#"+this.id).find(".jwplayer-video").children().children().attr("id"));
}); 
```

最好的祝福。

# java - JGit：如何获取分支的所有提交？（无需更改工作目录...）

> ID：15822544
> 
> 赞同：13
> 
> 时间：2013-04-04T22:03:02.843
> 
> 标签：java, jgit

如何在不更改工作目录的情况下使用 JGit 获取分支的所有提交？

不幸的是，JGit 文档不是很好......

在带有砂砾的红宝石中，这很容易：

```
repo = Grit::Repo.new(pathToRepo)

repo.commits(branchName, false).each do |commit|
    doSomethingWithTheCommit
end 
```

再见，胡里克

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T22:32:20.610

首先在这里尝试：[https ://stackoverflow.com/a/13925765/2246865](https://stackoverflow.com/a/13925765/2246865)

但它并不总是有效，所以我在这里找到了这个：http: [//www.eclipse.org/forums/index.php/t/280339/](http://www.eclipse.org/forums/index.php/t/280339/)

这是我的解决方案，它不是很好，但它正在工作......

```
public static void main(String[] args) throws IOException, GitAPIException {
    Repository repo = new FileRepository("pathToRepo/.git");
    Git git = new Git(repo);
    RevWalk walk = new RevWalk(repo);

    List<Ref> branches = git.branchList().call();

    for (Ref branch : branches) {
        String branchName = branch.getName();

        System.out.println("Commits of branch: " + branch.getName());
        System.out.println("-------------------------------------");

        Iterable<RevCommit> commits = git.log().all().call();

        for (RevCommit commit : commits) {
            boolean foundInThisBranch = false;

            RevCommit targetCommit = walk.parseCommit(repo.resolve(
                    commit.getName()));
            for (Map.Entry<String, Ref> e : repo.getAllRefs().entrySet()) {
                if (e.getKey().startsWith(Constants.R_HEADS)) {
                    if (walk.isMergedInto(targetCommit, walk.parseCommit(
                            e.getValue().getObjectId()))) {
                        String foundInBranch = e.getValue().getName();
                        if (branchName.equals(foundInBranch)) {
                            foundInThisBranch = true;
                            break;
                        }
                    }
                }
            }

            if (foundInThisBranch) {
                System.out.println(commit.getName());
                System.out.println(commit.getAuthorIdent().getName());
                System.out.println(new Date(commit.getCommitTime() * 1000L));
                System.out.println(commit.getFullMessage());
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-07-22T07:49:34.817

使用下面的代码，您可以获得**分支或标签的所有提交**：

```
Repository repository = new FileRepository("/path/to/repository/.git");
String treeName = "refs/heads/master"; // tag or branch
for (RevCommit commit : git.log().add(repository.resolve(treeName)).call()) {
    System.out.println(commit.getName());
} 
```

变量`treeName`将定义标签或分支。这是分支或标签的`treeName`完整名称，例如*master*分支或名为*v1.0*的标签。`refs/heads/master`*`refs/tags/v1.0`*

 **或者，您可以使用[gitective](https://github.com/kevinsawicki/gitective) API。以下代码与上面的代码相同：

```
Repository repository = new FileRepository("/path/to/repository/.git");

AndCommitFilter filters = new AndCommitFilter();
CommitListFilter revCommits = new CommitListFilter();
filters.add(revCommits);

CommitFinder finder = new CommitFinder(repository);
finder.setFilter(filters);
String treeName = "refs/heads/master"; // tag or branch
finder.findFrom(treeName);

for (RevCommit commit : revCommits) {
    System.out.println(commit.getName());
} 
```

一些 try/catch 将是必要的，我隐藏它们以使代码更短。祝你好运。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-07T13:14:40.533

我只是在寻找一种方法来列出每个分支下的所有提交，我发现了这个线程。我终于做了一些与我在这里找到并工作的一些答案有点不同的事情。

```
public static void main(String[] args) throws IOException, GitAPIException {
    Repository repo = new FileRepository("pathToRepo/.git");
    Git git = new Git(repo);

    List<Ref> branches = git.branchList().call();

    for (Ref branch : branches) {
        String branchName = branch.getName();

        System.out.println("Commits of branch: " + branchName);
        System.out.println("-------------------------------------");

        Iterable<RevCommit> commits = git.log().add(repo.resolve(branchName)).call();

        List<RevCommit> commitsList = Lists.newArrayList(commits.iterator());

        for (RevCommit commit : commitsList) {
            System.out.println(commit.getName());
            System.out.println(commit.getAuthorIdent().getName());
            System.out.println(new Date(commit.getCommitTime() * 1000L));
            System.out.println(commit.getFullMessage());
        }
    }

    git.close();
} 
```

谢谢您的帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:41:49.693

你是对的，文档*应该*真的更好。

您可以使用[JGit Log 命令](http://wiki.eclipse.org/JGit/User_Guide#LogCommand_.28git-log.29)或使用像[gitective](https://github.com/kevinsawicki/gitective)这样的库，这使得迭代提交变得容易。您可以查看源代码以了解有关 JGit 的更多信息。

[此 SO-question](https://stackoverflow.com/questions/4777453/looping-over-commits-for-a-file-with-jgit)中描述了其他（更复杂的）方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-23T08:07:21.103

可以通过 JGit 提供的“log”命令来完成更短更干净的解决方案：

```
 Repository repository = new FileRepository("pathToRepo/.git");
    logs = new Git(repository).log()
            .add(repository.resolve("remotes/origin/testbranch"))
            .call();
    count = 0;
    for (RevCommit rev : logs) {
        System.out.println("Commit: " + rev /* + ", name: " + rev.getName() + ", id: " + rev.getId().getName() */);
        count++;
    }
    System.out.println("Had " + count + " commits overall on test-branch"); 
```

请参阅[jgit-cookbook](https://github.com/centic9/jgit-cookbook)中的[完整片段](https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/ShowLog.java)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-10T22:22:31.750

这似乎可行，但我认为 add(ObjectId branch) 为活动分支提供了一个大门，但我似乎需要一个范围

```
Git git = ...
ObjectId master = git.repository.resolve("refs/heads/master")
ObjectId branch = git.repository.resolve("refs/heads/mybranch")

git.log().addRange(master,branch).call() 
```**

# r - 如何将列名从向量中的值放入矩阵？

> ID：15822546
> 
> 赞同：0
> 
> 时间：2013-04-04T22:03:09.750
> 
> 标签：r, matrix

我试图从向量的数据中命名矩阵的列。

假设我有以下矩阵：

```
A <- matrix(1:110, ncol=11) 
```

还有一个来自 read.table 的具有 11 个值的向量：

```
code <- data1$code 
```

我想做类似的事情：

```
colnames(A)=data.frame(code) 
```

使用向量代码中的值放置列的名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:09:02.057

`code`仅通过（或者`as.character(code)`，如果它是一个因子变量，则可能要简单得多

```
colnames(A) <- as.character(code) 
```

用一列传递 a`data.frame`将不起作用，因为这有`length =1`（一列）。

A`data.frame`是 `list`具有正确长度的两个元素的a，`dimnames`您可以同时设置这`rownames`两个元素`colnames`。

# image - Silverlight：设置一个图像源等于另一个

> ID：15822547
> 
> 赞同：0
> 
> 时间：2013-04-04T22:03:11.040
> 
> 标签：image, silverlight, expression-blend

我正在 Silverlight 中构建一个非常简单的视频播放器（使用 Expression Blend 4），并且我想要一个来自与另一个图像相同的图像文件的图像。（图像文件就在我的项目的根目录中。）如果有人在一个区域中选择了我的第一个视频缩略图，则所选视频的详细视图也包括此缩略图。

我很想这样做（在 C# 代码隐藏中）：

```
videoDetailImage.Source = _currentThumb.Source; 
```

但它似乎没有任何效果。我玩过：

```
videoDetailImage.Source = new BitmapImage(new Uri("t01-artifact.jpg", UriKind.Relative)); 
```

这也行不通。我什至尝试从网上抓取图像并使用 UriKind.Absolute - 仍然没有任何显示。

更新：我实际上放弃了这个并且做了一件非常懒惰的事情，只是将我需要的所有图像放入应用程序并切换它们的可见/折叠状态。这是一块垃圾，但重要的是它的工作。

# html - Django：如何在 CheckboxSelectMultiple 中分别访问标签和复选框？

> ID：15822552
> 
> 赞同：2
> 
> 时间：2013-04-04T22:03:39.573
> 
> 标签：html, django

我想将每个复选框变成一个切换按钮。但是，Django 会自动将复选框呈现为列表。我无法将它们分开。

这就是我现在所拥有的：

```
<div class="column">
    <div id="filters">
        {% for field in filter_form %}
            <div class="filter_category">
                {% for checkbox in field %}
                    {{ checkbox }}
                {% endfor %}
            </div>
        {% endfor %}
    </div> 
```

我想要这样的东西，所以我可以更灵活地做些什么。

```
<div class="column">
    <div id="filters">
        {% for field in filter_form %}
            <div class="filter_category">
                {% for checkbox in field %}
                    {{ checkbox.label }}{{ checkbox.tag }}
                {% endfor %}
            </div>
        {% endfor %}
    </div> 
```

这是我的表单类，构造函数只是填充每个字段的选项

```
class Class_filters_form(forms.Form):

    subject_code = forms.CharField(widget=forms.CheckboxSelectMultiple(attrs={"checked": ""}))
    subject_level_CLB = forms.CharField(widget=forms.CheckboxSelectMultiple(attrs={"checked": ""}))
    subject_level_CEFR = forms.CharField(widget=forms.CheckboxSelectMultiple(attrs={"checked": ""}))
    time_start = forms.TimeField(widget=forms.CheckboxSelectMultiple(attrs={"checked": ""}))
    campus = forms.CharField(widget=forms.CheckboxSelectMultiple(choices=Data_room.CAMPUS_CHOICE, attrs={"checked": ""}))

    def __init__(self, *args, **kwargs): ... 
```

# sql - VBA：将表格从 Excel 导入 SQL

> ID：15822562
> 
> 赞同：3
> 
> 时间：2013-04-04T22:04:20.927
> 
> 标签：sql, excel, vba, adodb

我正在尝试使用 VBA 将数据表从 excel 导入 SQL Server 2012。
最好在 UDF 的帮助下。

excel表看起来像这样。

```
TableID    2012  2011  2010  2009
row 1       11     12   13    14
row 2       21     22   23    24
row 3       31     32   33    34
etc.. 
```

（我将数字放在单元格中以指定它们的位置。例如 11 = 第 1 行，第 1 列）

数据库表看起来像这样。

```
Header:        id   |  year  |  row1  |  row2  |  row3  |  etc..
ExampData:  TableId    2012      11       21       31       ..
ExampData:  TableId    2011      12       22       32       .. 
```

（这不包括主键列，它可以是 id 和 year 的组合，也可以是 a `NEWID()`）

* * *

我知道如何导入特定的列，例如我可以运行以下代码：

```
INSERT INTO example_table (id, year, row1, row2, row3) VALUES ('001', '2012', '11', '21', '31') 
```

这适用于单个列，但我将如何让它适用于整个表（多列和多行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:12:37.857

所以我设法让它工作。这是使用 Excel 2010、SQL Sever 2012。
这假设 excel 中的行标题与 sql 中的列标题相同。
这也假设与问题帖子中的表格布局相似。

* * *

要将数据从 Excel 导入 SQL 服务器，我们可以使用 UDF 执行以下操作。在excel中创建
：`Public Function`

```
Public Function import_data(TableID, vHeader As Variant, vRow As Variant, vData As Variant)
End Function 
```

并使用您喜欢的连接方式连接到数据库。
然后对于`INSERT`语句使用以下内容：

```
'Declare the  variables
Dim vpush As String
Dim headerCount As Long
Dim rowTitles As String
Dim rowDatas As String
Dim i As Long

`Count the amount of columns 
headerCount = Application.CountA(vHeader)

`Create insert statement
For i = 1 To headerCount
   rowTitles = VBA.Join(WorksheetFunction.Transpose(vRow), ", ")
   rowDatas = VBA.Join(WorksheetFunction.Transpose(Application.Index(vData, , i)), "', '")
   vpush = "INSERT INTO example_table (id, " & rowTitles & ", year) VALUES ('" & TableID & "', '" & rowDatas & "', '" & vHeader(i) & "')"
Next i 
```

别忘了`.Execute (vpush)`。

与任何时候您想要导入表格相比，您将在 Excel 工作表中执行以下操作：

1.  在单元格类型中`=import_data(`并按`CTRL`+ `SHIFT`+`A`
2.  选择表 ID
3.  选择标题行（此处假定始终为年份）
4.  选择具有所有行标题的列（这将是您的 sql 中的标题）
5.  选择表中的所有数据

那应该这样做。
（PS如果这不是最有效的方法，或者你看到改进..随时编辑或添加）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T22:22:38.333

如果您使用的是 SQL Server 2008 或更高版本，则可以在 INSERT 语句中放置多行：

```
INSERT INTO example_table (id, year, row1, row2, row3)
VALUES ('001', '2012', '11', '21', '31'),
   ('002', '2012', '12', '22', '32'),
   ('003', '2012', '13', '23', '33') 
```

根据电子表格的大小，您可以在一个大的 INSERT 或几个较小的 INSERT 中完成。

# php - 单击按钮后运行 PHP 代码但不刷新页面

> ID：15822564
> 
> 赞同：5
> 
> 时间：2013-04-04T22:04:24.803
> 
> 标签：php, jquery, forms, button, coupon

我有一个 HTML 表单，可以将折扣券应用于当前的购物车。我希望用户只需单击应用（输入优惠券代码后），然后不刷新页面，运行一些 PHP 代码，以便计算相应的折扣。

这是我的表格：

```
<form action="">
   <input type="text" name="couponCode">
   <input type="submit" value="Apply">
</form> 
```

要运行的 PHP：

```
if (isset($_REQUEST['couponCode']) && $_REQUEST['couponCode']!='') 
{
 $couponCode = $_REQUEST['couponCode'];
    if ($couponCode == "TEST1") 
    {
    $discount=0.2;
    }
} 
```

这将如何使用 javascript 完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T22:11:45.940

您需要使用`onsubmit`表单的`onclick`事件或按钮的事件。

在事件处理程序中，您组装一个 URL 并“获取”它。例如：

```
<script type="text/JavaScript">

function submitCouponCode()
{
    var textbox = document.getElementById("couponCode");
    var url =
        "https://www.example.com/script.php?couponCode=" + encodeURIComponent(textbox.value);

    // get the URL
    http = new XMLHttpRequest(); 
    http.open("GET", url, true);
    http.send(null);

    // prevent form from submitting
    return false;
}

</script>

<form action="" onsubmit="return submitCouponCode();">
   <input type="text" id="couponCode">
   <input type="submit" value="Apply">
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T22:06:57.593

使用[jQuery AJAX](http://api.jquery.com/category/ajax/)。完成后，根据需要刷新页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T22:07:36.973

您可以使用 Jquery 做一个 AJAX 发布您的 PHP 脚本，然后使用 JS 更改调用页面的内容。

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-26T21:08:45.163

使用 jQuery 很简单。你只需要使用正确的标签。如果您使用“a”标签，页面将刷新。

```
<button id="MyButton">Click Me!</button>

<script>
  $("#MyButton").click( function(){
    $.post("somefile.php");
  });
</script> 
```

# java - 一个很好的插座

> ID：15822569
> 
> 赞同：2
> 
> 时间：2013-04-04T22:04:34.707
> 
> 标签：java, sockets, networking

我关于套接字的代码分为三个类，我已经研究了几个小时（并学习了 Socket Api），我已经把它归结为只剩下一个错误（我可以看到）。从服务器接收到的消息根本不会打印，而是抛出此错误。

> 线程“Thread-14”中的异常 java.lang.NullPointerException main.Listen.run(Listen.java:11) java.lang.Thread.run(Unknown Source)

控制台类

```
package main;

public class Console extends Handle {

    String nextl = System.getProperty("line.separator");
    String info = "[INFO] ";
    String ser = "[SERVER] ";
    String err = "[ERROR] ";
    String name = "[" + userName + "] ";

    public void log() {
        startupCon();
        Network network = new Network();
        int allgood = network.connect();
        if (allgood == 34) {
            Listen listen = new Listen();
            new Thread(listen).start();
        }
    }

    void startupCon() {

        System.out.println("===========");
        System.out.println("=+CONSOLE+=");
        System.out.println("===========" + nextl);
    }

    void networkCon(String net) {
        System.out.println(net);
    }

} 
```

网络类：

```
package main;

import java.net.*;
import java.io.*;

public class Network extends Console {

    int port = 7771;
    String host = "localhost";
    Socket client;

    OutputStream outToServer;
    DataOutputStream out;
    InputStream inFromServer;
    DataInputStream in;

    public int connect() {
        int getOpen = open();
        System.out.println(getOpen);
        int getStream = trans(getOpen);
        System.out.println(getStream);
        return getStream;
    }

    int open() {
        try {

            networkCon(info + "Attemping to connect to /" + host + ":" + port);
            client = new Socket(host, port);
            System.out.println(info + "Established connection with "
                    + client.getRemoteSocketAddress());
            return 42;
        } catch (SocketTimeoutException s) {
            networkCon(err + "Socket timed out!");
            return 9;
        } catch (IOException e) {
            System.out.println(err + "Could not connect to /" + host + ":"
                    + port);
            return 9;
        }
    }

    int trans(int hostup) {
        if (hostup == 42) {
            try {
                outToServer = client.getOutputStream();
                out = new DataOutputStream(outToServer);
                inFromServer = client.getInputStream();
                in = new DataInputStream(inFromServer);
                return 34;
            } catch (SocketTimeoutException s) {
                networkCon(err + "Socket timed out!");
                return 8;
            } catch (IOException e) {
                System.out.println(err + "Connection lost!");
                return 8;
            }
        }
        return 7;
    }

} 
```

听课（我存在的祸根）

```
package main;

import java.io.*;
import java.net.*;

public class Listen extends Network implements Runnable {

    public void run() {
            while (true) {
                try {
                    networkCon(in.readUTF());
                } catch (SocketTimeoutException s) {
                    networkCon(err + "Socket timed out!");
                } catch (IOException e) {
                    System.out.println(err + "Connection lost!");
                }
            }

        }
    } 
```

我猜 Stream 没有在 Listen 类中设置为变量“in”，但我不知道这是问题所在还是如何解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T22:09:10.307

你无处调用类的方法`connect()`..`Network`这就是为什么你`DataInputStream in`永远不会初始化..它总是`null`在你的程序中..

我猜您应该在`Listen`调用`connect`超类方法的类中定义一个构造函数，`Network`如下所示：

```
public Listen()
{
  connect();
} 
```

# c++ - 删除指向不完整类型'Point'的指针；没有调用析构函数

> ID：15822571
> 
> 赞同：11
> 
> 时间：2013-04-04T22:04:41.530
> 
> 标签：c++, class, pointers, destructor

我有 2 个文件：

`Point.h`：

```
class Point {
    int x;
    int y;
    char* name;
   public:
     Point() { name = new char[5]; }
    ~Point() { delete[] name; }
}; 
```

和`Line.h`：

```
class Point;
class Line {
    Point* p;
  public:
    Line() {
      p = new Point[2];
      ....
      ...
    }
    ~Line() {
       delete[] p;
    }
}; 
```

但是当我编译时，我得到了下一个错误：

```
deletion of pointer to incomplete type 'Point'; no destructor called 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-04T22:06:33.333

您需要添加`#include "Point.h"`到您的文件`Line.h`中。您只能构造和删除*完整*类型。

或者，从 中删除成员函数定义`Line.h`，并将它们放在单独的文件`Line.cpp`中，然后将 和 包含`Point.h`在`Line.h`该*文件*中。这是一种典型的依赖减少技术，可以使代码更快地编译，尽管可能会失去某些内联机会。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T22:06:50.887

您已经前向声明`Point`，这对于声明指针或引用很好，但对于编译器需要知道前向声明类的定义的其他任何事情都不好。

如果您需要头文件中的前向声明（是吗？如果不需要，就`#include "Point.h"`在 中`Line.h`）然后在s`Line`的实现文件中实现您的函数。`#include``Point.h`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T23:04:27.017

为了扩展其他人给出的建议——一条线总是由两个端点定义的。将这些点定义为堆分配内存没有多大意义。为什么不让两点成为`Line`班级的常客呢？这将节省内存、提高性能并产生更简洁的代码。不过，您必须包括在内`"Point.h"`才能使其正常工作。

# sql-server - 使用 Microsoft.ACE.OLEDB.12.0 将 Excel 导入 SQL Server

> ID：15822576
> 
> 赞同：5
> 
> 时间：2013-04-04T22:05:00.523
> 
> 标签：sql-server, sql-server-2008, excel

尝试在 SQL Server 2008 r2 64 位中打开 Excel 文件时出现以下错误：

```
Msg 7399, Level 16, State 1, Line 1
The OLE DB provider "Microsoft.ACE.OLEDB.12.0" for linked server "(null)" 
reported an error. The provider did not give any information about the error.
Msg 7303, Level 16, State 1, Line 1
Cannot initialize the data source object of OLE DB provider 
"Microsoft.ACE.OLEDB.12.0" for linked server "(null)". 
```

我正在使用以下查询：

```
SELECT * FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0', 'Excel 12.0; 
HDR=NO; IMEX=1; Database=\\filepath\filename.xlsx', 'SELECT * FROM [Sheet1$]') 
```

有趣的是，DBA 可以毫无问题地运行它。我已经完成并运行了以下查询：

```
sp_configure 'Show Advanced Options', 1;
RECONFIGURE;
GO
sp_configure 'Ad Hoc Distributed Queries', 1;
RECONFIGURE;
GO

EXEC sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'AllowInProcess', 1
GO
EXEC sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'DynamicParameters', 1
GO 
```

运行它的帐户看起来具有 sa 访问权限。什么可能导致此问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-06T20:53:00.200

正如菲利普所说...首先检查 xp_cmdshell 的执行。如果由于权限问题而未运行，则首先通过运行重新配置此选项

```
SP_CONFIGURE 'XP_CMDSHELL',1
GO             
RECONFIGURE 
```

在此之后运行以下命令以启用 ACE 驱动程序的 InProcess 功能的链接服务器权限：

```
USE [master]
GO
EXEC master . dbo. sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0' , N'AllowInProcess' , 1
GO

EXEC master . dbo. sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0' , N'DynamicParameters' , 1
GO 
```

现在运行这一系列命令：

```
sp_configure 'show advanced options', 1
GO
RECONFIGURE
GO
sp_configure 'Ad Hoc Distributed Queries', 1
GO
RECONFIGURE 
```

如果遇到错误，则分别运行每个命令。最后通过运行下面提到的命令运行将所有 excel 数据导入 SQL 服务器：

```
SELECT * INTO TargetTableName FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
                         'Excel 12.0;Database=FilePath\fileName.xlsx;HDR=YES',
                         'SELECT * FROM [sheetName$]') 
```

请记住，在 xls 的情况下，您必须使用 Jet Driver 而不是 ACE。而且 TargetTableName 在运行此查询之前不得存在。快乐编码:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T08:52:56.300

您是否尝试过（作为测试）将 Excel 文件复制到 SQL Server C:\ 驱动器并针对该路径执行查询？

当您进入服务器并在资源管理器/运行对话框中打开此路径时会发生什么：**\filepath\filename.xlsx**？

您是否能够执行此查询：**exec master..xp_cmdshell 'dir '\filepath\filename.xlsx'**？

这将帮助您确定这是否是网络权限问题，或者该帐户是否具有使用分布式查询的权限。

我的直觉是，这绝对是一个权限/权限问题，因为 DBA 可以运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-19T08:27:51.587

请使用正斜杠而不是反斜杠

```
Select * From OPENROWSET('MICROSOFT.ACE.OLEDB.12.0','EXCEL 12.0;DATABASE=//ComputerName/ShareMyLocation/DatabaseSheet.xlsx;IMEX=1','Select * From [SMDH-View2$]') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-24T08:00:17.713

SQL Server 管理工作室。在运行命令中键入 Services.msc 以打开服务窗口。

搜索 SQL Server 服务并右键单击它并选择属性。

在登录选项卡中，选择系统帐户/或选择您的域 ID 和帐户和密码。

一旦找到您的登录名，请按 OK。

现在在两个字段中输入您的登录密码。

重新启动服务，以便应用新的更改，如下图所示。

现在启动 SQL Server Management Studio 并尝试运行查询，如果仍然无法正常工作，请尝试重新启动系统。

或执行查询。

USE [master] GO EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'AllowInProcess', 1 GO EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0', N'DynamicParameters' , 1 次

# php - 如何确定类别 ID 是否是顶级父类别的后代

> ID：15822577
> 
> 赞同：0
> 
> 时间：2013-04-04T22:05:01.277
> 
> 标签：php, wordpress

如果用户正在查看的当前类别是特定顶级类别的后代，我想显示特定类别列表：

我知道我可以使用以下代码获取当前类别 ID：

```
$cat = get_query_var('cat'); 
```

但是，我如何检查类别 ID 是特定顶级父类别的后代：

```
 <?php if (.....) { ?> 
      <?php wp_list_categories('orderby=id&show_count=0&use_desc_for_title=0&child_of='.$men->term_id); ?>
                      <?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:16:21.583

您可以使用该`category_parent`属性来获取父项的 ID，然后使用`get_the_category()`函数来加载它，或者确定它是否是您想要的。对于多个级别，您需要使用递归。

```
$category_id = get_query_var('cat');
$category    = get_the_category( $category_id );
$parent_id   = $category[0]->category_parent;
$parent      = get_the_category( $parent_id ); 
```

# python - 循环未完全迭代

> ID：15822578
> 
> 赞同：1
> 
> 时间：2013-04-04T22:05:05.380
> 
> 标签：python

我正在创建一个简单的 RPG 作为学习体验。在我的代码中，我有一个可以很好地显示在 25x25 网格上的图块数组，以及一个包含与图块是否实心有关的真/假值的单独数组。后者不起作用；在我下面的代码中，我已经在它没有到达的地方准确地放置了一个打印语句，我不太确定问题是什么。

此外，关卡的数据只是一个文本文件，其中包含代表块的 25x25 字符网格。

```
def loadLevel(self, level):
    fyle = open("levels/" + level,'r')
    count = 0
    for lyne in fyle:
        if lyne.startswith("|"):
            dirs = lyne.split('|')
            self.north = dirs[1]
            self.south = dirs[2]
            self.east = dirs[3]
            self.west = dirs[4]
            continue

        for t in range(25):
            tempTile = Tiles.Tile()
            tempTile.value = lyne[t]
            tempTile.x = t
            tempTile.y = count
            self.levelData.append(tempTile)
        count += 1

    rowcount = 0
    colcount = 0

    for rows in fyle:
        print('Doesnt get here!')
        for col in rows:
            if col == 2:
                self.collisionLayer[rowcount][colcount] = False
            else:
                self.collisionLayer[rowcount][colcount] = True
            colcount += 1
            print(self.collisionLayer[rowcount[colcount]])
        if rows == 2:
            self.collisionLayer[rowcount][colcount] = False
        else:
            self.collisionLayer[rowcount][colcount] = True
        rowcount += 1

    print(self.collisionLayer) 
```

问题究竟出在哪里？我觉得这好像是一个快速修复，但我根本没有看到它。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T22:07:12.420

您在第一个`for`循环中通读了一次文件，因此第二个循环没有任何内容可读取。在开始第二个循环之前返回文件的开头：

```
fyle.seek(0) 
```

虽然我只是将这些行缓存为列表，但如果可能的话：

```
with open('filename.txt', 'r') as handle:
    lines = list(handle) 
```

此外，您可以替换它：

```
if rows == 2:
    self.collisionLayer[rowcount][colcount] = False
else:
    self.collisionLayer[rowcount][colcount] = True 
```

和：

```
self.collisionLayer[rowcount][colcount] = rows != 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:08:25.847

循环：

```
for lyne in fyle: 
```

...读取所有内容，`fyle`并且没有任何内容可供循环读取：

```
for rows in fyle: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T22:09:54.543

我想你只需要重新打开文件。如果我记得，python 会从你离开的地方继续前进。如果什么都没有，它就无法读取任何内容。您可以重新打开它，也可以使用 fyle.seek(0) 转到第一行的第一个字符。

# android - 试图使水平 LinearLayout 布局居中

> ID：15822587
> 
> 赞同：0
> 
> 时间：2013-04-04T22:05:32.740
> 
> 标签：android

我正在动态创建水平线性布局，每个视图都添加了 5 个视图。然后将其添加到滚动视图内的垂直 LinearLayout。

我通过 layout.setGravity(Gravity.CENTER); 设置了重力，但它不是居中而是左对齐。

创建水平线性布局的代码

```
for(int i=0; i<cGlobals.mNames.length; i+=2)
{
    LinearLayout layout = new  LinearLayout(this);
    layout.setOrientation(LinearLayout.HORIZONTAL);
    layout.setGravity( Gravity.CENTER );
    LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(
                  LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    layout.setLayoutParams(llp);
    AddButton( layout, cGlobals.mNames[i], i);

    TextView t=new TextView(this);
    t.setText("    ");
    layout.addView(t);

    if (i+1<cGlobals.mNames.length)
         AddButton( layout, cGlobals.mNames[i+1], i+1);

    Container.addView(layout);
} 
```

创建添加到线性布局的按钮的代码

```
void AddButton( LinearLayout layout,  String name, int i)
{    

    favBut[i]=new ImageView(this);
    if ( cGlobals.conFav.contains( name )  )
        favBut[i].setImageResource(R.drawable.heartselected2);
    else
        favBut[i].setImageResource(R.drawable.heartunselected2);

     favBut[i].setId(defStartFavId+i);
     favBut[i].setOnClickListener(this);

     layout.addView(favBut[i]);

     int w=getWindowManager().getDefaultDisplay().getWidth();
     w-=200; // hearts
     w=w/2;

     Button but1=new Button(this);
     but1.setText( name);
     but1.setWidth(w);
     layout.addView(but1);

     but1.setOnClickListener(this);
     but1.setId(defStartButId+i);       

} 
```

用于布局的 XML 文件

```
 <LinearLayout 
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center" 
android:orientation="horizontal" > 

        <Button
        android:id="@+id/butVol"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
        android:textSize="24px"
        android:text="Volume"   
        android:textColor="#ff0000ff"
        android:layout_gravity="center" 
    />

    <Button
        android:id="@+id/butRington"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
        android:textSize="24px"
        android:text="Rington"  
        android:textColor="#ff0000ff"
        android:layout_gravity="center" 
    /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:16:52.313

您可以尝试指定这样的布局参数...

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
layoutParams.gravity = Gravity.CENTER;
layout.addView(favBut[i], layoutParams); 
```

和/或

```
Container.addView(layout, layoutParams); 
```

并且可能根据您所追求的结果将 MATCH_PARENT 更改为 WRAP_CONTENT 。

[http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)

# ruby - Grape API 和 HTTP 摘要认证

> ID：15822593
> 
> 赞同：2
> 
> 时间：2013-04-04T22:05:57.627
> 
> 标签：ruby, rubygems, rack, datamapper, grape-api

我正在为我的 ruby​​ 应用程序创建一个 API，它基于 HTTP Digest Authentication 对用户进行身份验证。我决定使用 Grape API 库，因为它可以在 ruby​​ 中创建 API 清洁器。Grape 文档指出您可以使用摘要式身份验证，例如：

```
http_digest({ :realm => 'Test Api', :opaque => 'app secret' }) do |username|
  # lookup the user's password here
  { 'user1' => 'password1' }[username]
end 
```

上面的葡萄实现是一个包装器`Rack::Auth::Digest::MD5`

现在，为了安全起见，我读到，从 RFC 2617 开始，您不需要将密码作为纯文本存储在数据库中，您可以存储用户名的 MD5 摘要：realm:password 并针对它进行身份验证，因此我创建了一个 DataMapper 模型：

```
class Key
  include DataMapper::Resource

  property :id,              Serial

  property :username,        String
  property :password,        String

  property :active,          Boolean, :default => true
  property :created_at,      DateTime, :default => DateTime.now
  property :updated_at,      DateTime
end 
```

现在有了我提供的东西，我不知道如何将这两者联系起来并使其工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:20:56.467

不幸的是，`Rack::Auth::Digest::MD5`在服务器端需要一个明文密码。

Grape 示例代码显示了对密码的硬编码查找。

你可以`{ 'user1' => 'password1' }[username]`用

```
Key.first( :username => username ).password 
```

前提是您在课堂上存储了*明文*密码。`Key`我想您可以存储这些可逆加密的内容，尽管除非您为密钥管理构建相对复杂/昂贵的方案，否则这不会增加太多安全性。

不确定是否有办法让您存储散列密码。MD5 不是最安全的散列选择（尽管总比没有好！）。如果安全性是您的 API 的一个重要问题，您将希望超越摘要式身份验证 - 例如，使用 https 会有所帮助。

编辑：在讨论中反复讨论之后，Grape 示例的以下变体*确实*允许您存储 MD5 密码：

```
auth :http_digest, { :realm => { :realm => 'Llama', :passwords_hashed => true, :opaque => "7302c32d39bbacb5ed0ace096723fd" } } do |username|
  Digest::MD5.hexdigest( 'fred:Llama:654321' )
end 
```

该示例给出了一个硬编码的用户名：'fred'，密码：'654321' 响应。所以我认为你的目标代码是这样的：

```
auth :http_digest, { :realm => { :realm => 'Llama', :passwords_hashed => true, :opaque => "7302c32d39bbacb5ed0ace096723fd" } } do |username|
  k = Key.first( :username => username )
  k ? k.password : nil
end 
```

并将结果存储`Digest::MD5.hexdigest( "#{username}:#{realm}:#{password}" )`在每个用户的密码属性中。

`:realm`注意带有两次的双级哈希。这有点hacky，但至少您不必编写自己的中间件，Grape 仍在处理它。这*不是*Grape 的文档功能或测试覆盖，因此在未来的版本中可能无法使用。

# assembly - 检查内存地址是否在当前进程的堆栈空间内

> ID：15822599
> 
> 赞同：2
> 
> 时间：2013-04-04T22:06:22.450
> 
> 标签：assembly, x86, segmentation-fault, callstack, ptrace

我正在向我的调试器添加一个功能（我正在使用 Ptrace 来操纵跟踪的进程以及 libbfd/libopcodes）来展开堆栈并确定每个 CALL 分配的堆栈空间和静态派生的局部变量大小之间是否存在差异，沿途打印每个帧的地址和本地堆栈大小。

我的一般方法是获取基指针（`EBP`/ `RBP`）中的地址，将指针递增到应该包含存储的帧指针，取消引用该地址，检查它`PTRACE_PEEKDATA`并重复，直到我取消引用占用堆栈外区域的地址。

我知道如何检查代码/数据段寄存器，但理想情况下，我想要一种方法来检查我是否仍在调用堆栈内，即使分段已被 W^X 内存页或其他不可执行的堆栈更改。

简而言之，当我移出堆栈而不触发一般保护故障时，如何检查（在一般情况下）？

（顺便说一句，我意识到我正在假设检查地址的页段是这里的理想方法——也许存在另一种更简单的方法来确定地址是否在当前进程的堆栈空间内）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:04:47.643

C 标准不提供任何可移植的方式来访问特定于操作系统或特定于硬件的信息或功能（可能除了 system()）。如果您的 C 程序依赖于所述信息/功能，那么它的可移植性就很差。

如果您坚持使用 POSIX 功能，您可能会在一定程度上提高可移植性，但这种改进只会是对 POSIX 兼容操作系统的改进。对于所有其他人来说，这将与改进相反。同样，您可能会使用一些在 Linux 上始终可用的东西（特定功能或工具或库）。副手我不能指出你这样。您需要做进一步的研究或等待其他答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:21:13.340

我查看了[pstack](http://www.linuxcommand.org/man_pages/pstack1.html)命令的代码，该命令正在打印正在运行的进程的堆栈内容。此代码从结构中获取基地址`link_map`并将其存储在字段中`l_addr`。该字段在函数内部设置`readLinkMap()`：

```
static void readLinkMap(int pid, ElfN_Addr base, struct link_map *lm, 
                        char *name, unsigned int namelen)
{
  /* base address */
  lm->l_addr = (ElfN_Addr) ptrace(PTRACE_PEEKDATA, pid,
                                  base + offsetof(struct link_map,l_addr), 0);
  /* next element of link map chain */
  if (-1 != (long) lm->l_addr || !errno)
    lm->l_next = (struct link_map *) ptrace(PTRACE_PEEKDATA, pid,
                                            base + offsetof(struct link_map, l_next), 0);
  if ((-1 == (long) lm->l_addr || -1 == (long) lm->l_next) && errno) {
    perror("ptrace");
    quit("can't read target.");
  }

  loadString(pid, base + offsetof(struct link_map, l_name), name, namelen);
} 
```

# precision - Stata中的数据精度

> ID：15822600
> 
> 赞同：1
> 
> 时间：2013-04-04T22:06:23.250
> 
> 标签：precision, floating-accuracy, stata, floating-point-precision

这是一个微不足道的问题，我只是想知道这里发生了什么。

以下是我试图在其中找到最大行的示例数据`stata`

```
 x1            x2             x2
70001102    70001102    70001102
70001102    70001102    70001102 
```

现在，我使用以下代码找到`row max:`

```
egen maxi rmax(x1 x2 x3) 
```

但是，在数据表上，我发现第一行和第二行的 rmax 为 70001104，这显然不是真的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:23:29.610

尝试`egen double maxi = rmax(x1 x2 x3)`，或`egen double maxi = rowmax(x1 x2 x3)`。在这种情况下，long 也可以工作。

以下是各种存储类型的限制：

```
 type                   minimum                 maximum
     ------------------------------------------------------
     byte                      -127                     100
     int                    -32,767                  32,740
     long            -2,147,483,647           2,147,483,620
     ------------------------------------------------------
     float              -16,777,216              16,777,216
     double  -9,007,199,254,740,992   9,007,199,254,740,992 
```

[您可以在 Stata 博客上](http://blog.stata.com/tag/precision/)了解有关精度的更多信息

此外，数据中的第二个 x2 应该是上面的 x3。

# .net - dotfuscator 并行优化？

> ID：15822604
> 
> 赞同：9
> 
> 时间：2013-04-04T22:06:45.180
> 
> 标签：.net, obfuscation, dotfuscator

我的公司使用 Dotfuscator 进行 .NET 应用程序混淆。它工作得很好，但是我注意到它在我们的构建过程中是一个单线程操作。Dotfuscator.exe 总是在我们的 8 核构建机器的单核上运行，这让我有点哭泣。

有什么魔力让它运行得更平行一点吗？魔术/MPgogogo 标志？布勒？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T18:01:18.523

很遗憾，但它几乎都是单线程的（我是它的开发人员）。也不支持并行运行 Dotfuscator 的多个实例。主要是。

如果您有多个需要混淆的单独程序集/可执行文件，则可以运行 Dotfuscator 的多个实例（当然使用单独的命令行或配置文件），尽管使用了一些未记录的技巧。

如果你去`C:\Program Files(x86)\PreEmptive Solutions`你会看到你的 Dotfuscator 目录。（我的是`Dotfuscator Professional 4.9`）您可以将该目录复制到其他目录。因此，例如，如果您将该目录的 2 个副本复制到`C:\Dotfuscator1`and`C:\Dotfuscator2`中，那么您可以在每个目录中并行运行这两个`dotfuscator.exe`可执行文件中的每一个，而不会相互影响。我不会说它是“受支持的”，但它*应该*可以完美地工作。

此外，您需要将两个文件复制到从 Program Files 复制的两个文件夹中。第一个文件位于`C:\Users\YourName\AppData\Local\PreEmptive Solutions\Dotfuscator Professional Edition\4.0`. 该文件名为`dfusrprf.xml`. 只需将其复制到与每个`dotfuscator.exe`. 下一个文件在里面`C:\ProgramData\PreEmptive Solutions\Dotfuscator Professional Edition\4.0`，应该叫做`dotfuscator.dat. This should be copied to the same location as`dfusrprf.xml`

完成所有这些后，Dotfuscator 的两个实例应该可以并行运行。请注意，对多个实例执行此操作将导致您需要大量内存。在大型程序上，Dotfuscator 可能会占用大量内存（如不止一次演出）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:46:56.320

没有。一路单线程。

# objective-c - 如何为 NSView 制作网格背景图案？

> ID：15822610
> 
> 赞同：4
> 
> 时间：2013-04-04T22:07:02.013
> 
> 标签：objective-c, cocoa

有没有一种简单的方法来获得这个网格背景？还是我必须这样做`[NSColor colorWithPatternImage:[NSImage ...]]`？

![界面截图](https://i.stack.imgur.com/mXMIt.png)

我不想要完整的代码。我只是想知道是否有一种简单的方法可以做到这一点，如果是的话如何。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T22:52:52.913

这是我的解决方案：

```
- (void)drawRect:(NSRect)dirtyRect
{
CGContextRef context = [[NSGraphicsContext currentContext] graphicsPort];
[[NSColor whiteColor] setFill];
CGContextFillRect(context, dirtyRect);

for (int i = 1; i < [self bounds].size.height / 10; i++) {
    if (i % 10 == 0) {
        [[NSColor colorWithSRGBRed:100/255.0 green:149/255.0 blue:237/255.0 alpha:0.3] set];
    } else if (i % 5 == 0) {
        [[NSColor colorWithSRGBRed:100/255.0 green:149/255.0 blue:237/255.0 alpha:0.2] set];
    } else {
        [[NSColor colorWithSRGBRed:100/255.0 green:149/255.0 blue:237/255.0 alpha:0.1] set];
    }
    [NSBezierPath strokeLineFromPoint:NSMakePoint(0, i * 10 - 0.5) toPoint:NSMakePoint([self bounds].size.width, i * 10 - 0.5)];
}
for (int i = 1; i < [self bounds].size.width / 10; i++) {
    if (i % 10 == 0) {
        [[NSColor colorWithSRGBRed:100/255.0 green:149/255.0 blue:237/255.0 alpha:0.3] set];
    } else if (i % 5 == 0) {
        [[NSColor colorWithSRGBRed:100/255.0 green:149/255.0 blue:237/255.0 alpha:0.2] set];
    } else {
        [[NSColor colorWithSRGBRed:100/255.0 green:149/255.0 blue:237/255.0 alpha:0.1] set];
    }
    [NSBezierPath strokeLineFromPoint:NSMakePoint(i * 10 - 0.5, 0) toPoint:NSMakePoint(i * 10 - 0.5, [self bounds].size.height)];
}

} 
```

![网格](https://i.stack.imgur.com/XGk9J.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-11T11:13:59.043

相同，但对于**Swift 4**

```
override func draw(_ dirtyRect: NSRect) {
    super.draw(dirtyRect)

    if let context = NSGraphicsContext.current?.cgContext {
        NSColor.white.setFill()
        context.fill(dirtyRect)
        context.flush()
    }

    for i in 1...(Int(self.bounds.size.height) / 10) {
        if i % 10 == 0 {
            NSColor.init(red: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.3).set()
        }else if i % 5 == 0 {
            NSColor.init(red: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.2).set()
        }else{
            NSColor.init(red: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.1).set()
        }            
        NSBezierPath.strokeLine(from: CGPoint(x: 0, y: CGFloat(i) * 10 - 0.5), to: CGPoint(x: self.bounds.size.width, y: CGFloat(i) * 10 - 0.5))
    }

    for i in 1...(Int(self.bounds.size.width) / 10) {
        if i % 10 == 0 {
            NSColor.init(red: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.3).set()
        }else if i % 5 == 0 {
            NSColor.init(red: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.2).set()
        }else{
            NSColor.init(red: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.1).set()
        }
        NSBezierPath.strokeLine(from: CGPoint(x: CGFloat(i) * 10 - 0.5, y:0), to: CGPoint(x: CGFloat(i) * 10 - 0.5, y: self.bounds.size.height))
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T07:50:02.493

我认为图案颜色在这里不是一个好的解决方案，特别是因为您需要改变线条。而是对每条水平和垂直线使用 NSBezierPath 和 moveToPoint/lineToPoint 对。然后，您可以一次调用绘制网格。对那些具有不同颜色（alpha）和/或宽度的线条执行额外的步骤（即不要将较粗的线条添加到主网格路径，而是为它们创建一个单独的线条）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T07:50:40.883

只需查看每个 Xcode 安装附带[的 Sketch 示例，也可以单独下载。](http://developer.apple.com/library/mac/#samplecode/Sketch/Introduction/Intro.html)

它具有网格实现（以及许多其他有用的 Cocoa 技术演示......）允许缩放等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-24T15:13:57.453

与“悲伤的金枪鱼”相同，但在**Swift 3中**

```
override func drawRect(dirtyRect: NSRect) {
    super.drawRect(dirtyRect)
    if let context = NSGraphicsContext.currentContext()?.CGContext {
        NSColor.whiteColor().setFill()
        CGContextFillRect(context, dirtyRect)
        CGContextFlush(context)
    }

    for i in 1...(Int(self.bounds.size.height) / 10) {
        if i % 10 == 0 {
            NSColor(SRGBRed: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.3).set()
        }else if i % 5 == 0 {
            NSColor(SRGBRed: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.2).set()
        }else{
            NSColor(SRGBRed: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.1).set()
        }

        NSBezierPath.strokeLineFromPoint(CGPointMake(0, CGFloat(i) * 10 - 0.5), toPoint: CGPointMake(self.bounds.size.width, CGFloat(i) * 10 - 0.5))
    }

    for i in 1...(Int(self.bounds.size.width) / 10) {
        if i % 10 == 0 {
            NSColor(SRGBRed: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.3).set()
        }else if i % 5 == 0 {
            NSColor(SRGBRed: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.2).set()
        }else{
            NSColor(SRGBRed: 100/255.0, green: 149/255.0, blue: 237/255.0, alpha: 0.1).set()
        }

        NSBezierPath.strokeLineFromPoint(CGPointMake(CGFloat(i) * 10 - 0.5, 0), toPoint: CGPointMake(CGFloat(i) * 10 - 0.5, self.bounds.size.height))
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-26T06:46:23.303

在 MacOS 10.10 及更高版本中移植甲醇的解决方案以快速解决错误。

可以使用一个简单的静态函数并从 drawRect() 调用

```
static func makeGridBackground(dirtyRect: NSRect, view: NSView){
    //view.print("WMEditorUtils: initiated drawing")

    //Fill background with white color
    if let context = NSGraphicsContext.currentContext()?.CGContext {
        NSColor.whiteColor().setFill()
        CGContextFillRect(context, dirtyRect)
        CGContextFlush(context)
    }

    //Draw Lines: Horizontal
    for var i:Int = 1; i < (Int)(view.bounds.size.height / 10); i++ {
        if (i % 10 == 0) {
            NSColor(deviceRed: 100.0/255.0, green: 149.0/255.0, blue: 237.0/255.0, alpha: 0.3).set()
        }
        else if (i % 5 == 0) {
            NSColor(deviceRed: 100.0/255.0, green: 149.0/255.0, blue: 237.0/255.0, alpha: 0.2).set()
        }
        else{
            NSColor(deviceRed: 100.0/255.0, green: 149.0/255.0, blue: 237.0/255.0, alpha: 0.1).set()
        }
        NSBezierPath.strokeLineFromPoint(NSMakePoint(0, (CGFloat)(i * 10) - 0.5), toPoint: NSMakePoint(view.bounds.size.width, (CGFloat)(i * 10) - 0.5))
    }

    //Draw Lines: Vertical
    for var i:Int = 1; i < (Int)(view.bounds.size.width / 10); i++ {
        if (i % 10 == 0) {
            NSColor(deviceRed: 100.0/255.0, green: 149.0/255.0, blue: 237.0/255.0, alpha: 0.3).set()
        }
        else if (i % 5 == 0) {
            NSColor(deviceRed: 100.0/255.0, green: 149.0/255.0, blue: 237.0/255.0, alpha: 0.2).set()
        }
        else{
            NSColor(deviceRed: 100.0/255.0, green: 149.0/255.0, blue: 237.0/255.0, alpha: 0.1).set()
        }
        NSBezierPath.strokeLineFromPoint(NSMakePoint((CGFloat)(i * 10) - 0.5, 0), toPoint: NSMakePoint((CGFloat)(i * 10) - 0.5, view.bounds.size.width))
    }

} 
```

# jqplot - jqplot - x 轴

> ID：15822619
> 
> 赞同：-1
> 
> 时间：2013-04-04T22:07:25.860
> 
> 标签：jqplot

绘制折线图时，我有一长串 x 轴数据的数据（大约 800 个条目）。问题是它不会正确显示并相互覆盖。我正在考虑一种显示方式（例如，每一百个网格）并且不知道该怎么做。请帮帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:42:08.753

您可以指定要在您选择的轴上显示的刻度数组：

```
var xTicks = new Array(1,101,201,301,401,501,601,701,800);
--In your plot, add ticks option to your  chosen axis :
axes: {
 xaxis: {
  ticks: xTicks --my ticks array
  renderer: $.jqplot.CategoryAxisRenderer,
  autoscale: false
 }
} 
```

它应该可以解决问题。

# r - 透视大数据表

> ID：15822623
> 
> 赞同：8
> 
> 时间：2013-04-04T22:07:47.160
> 
> 标签：r, data.table

我在 R 中有一个大型数据表：

```
library(data.table)
set.seed(1234)
n <- 1e+07*2
DT <- data.table(
  ID=sample(1:200000, n, replace=TRUE), 
  Month=sample(1:12, n, replace=TRUE),
  Category=sample(1:1000, n, replace=TRUE),
  Qty=runif(n)*500,
  key=c('ID', 'Month')
)
dim(DT) 
```

我想旋转这个data.table，这样Category就变成了一列。不幸的是，由于组内的类别数量不是恒定的，我不能使用[这个答案](https://stackoverflow.com/a/15512437/345660)。

任何想法我可以如何做到这一点？

/edit：根据 joran 的评论和 flodel 的回答，我们真的在重塑以下内容`data.table`：

```
agg <- DT[, list(Qty = sum(Qty)), by = c("ID", "Month", "Category")] 
```

这种重塑可以通过多种方式完成（到目前为止我已经得到了一些很好的答案），但我真正想要的是能够很好地扩展到`data.table`具有数百万行和数百到数千个类别的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-13T14:58:06.670

`data.table`实现更快版本的`melt/dcast`data.table 特定方法（在 C 中）。它还增加了用于熔化和铸造*多根柱子*的附加功能。请参阅[使用 data.tables](https://github.com/Rdatatable/data.table/wiki/Getting-started)小插图进行高效重塑。

请注意，我们不需要加载`reshape2`包。

```
library(data.table)
set.seed(1234)
n <- 1e+07*2
DT <- data.table(
  ID=sample(1:200000, n, replace=TRUE), 
  Month=sample(1:12, n, replace=TRUE),
  Category=sample(1:800, n, replace=TRUE), ## to get to <= 2 billion limit
  Qty=runif(n),
  key=c('ID', 'Month')
)
dim(DT)

> system.time(ans <- dcast(DT, ID + Month ~ Category, fun=sum))
#   user  system elapsed
# 65.924  20.577  86.987
> dim(ans)
# [1] 2399401     802 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T22:25:34.970

像那样？

```
agg <- DT[, list(Qty = sum(Qty)), by = c("ID", "Month", "Category")]

reshape(agg, v.names = "Qty", idvar = c("ID", "Month"),
        timevar = "Category", direction = "wide") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T23:19:40.280

没有`data.table`具体的宽整形方法。

这是一种可行的方法，但它是相当值得考虑的。

有一个功能请求[#2619 为 LHS 划定范围，`:=`](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2619&group_id=240&atid=978)以帮助使其更简单。

这是一个简单的例子

```
# a data.table
DD <- data.table(a= letters[4:6], b= rep(letters[1:2],c(4,2)), cc = as.double(1:6))
# with not all categories represented
DDD <- DD[1:5]
# trying to make `a` columns containing `cc`. retaining `b` as a column
# the unique values of `a` (you may want to sort this...)
nn <- unique(DDD[,a])
# create the correct wide data.table
# with NA of the correct class in each created column
rows <- max(DDD[, .N,  by = list(a,b)][,N])
DDw <- DDD[, setattr(replicate(length(nn), {
                     # safe version of correct NA  
                     z <- cc[1]
                      is.na(z) <-1
                     # using rows value calculated previously
                     # to ensure correct size
                       rep(z,rows)}, 
                    simplify = FALSE), 'names', nn),
           keyby = list(b)]
# set key for binary search
setkey(DDD, b, a)
# The possible values of the b column
ub <- unique(DDw[,b])
# nested loop doing things by reference, so should be 
# quick (the feature request would make this possible to 
# speed up using binary search joins.
for(ii in ub){
  for(jj in nn){
    DDw[list(ii), {jj} := DDD[list(ii,jj)][['cc']]]
  }
}

DDw
#    b  d e  f
# 1: a  1 2  3
# 2: a  4 2  3
# 3: b NA 5 NA
# 4: b NA 5 NA 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T23:22:29.297

**编辑**

> 我发现了这个[SO post](https://stackoverflow.com/questions/10438969/fastest-way-to-add-rows-for-missing-values-in-a-data-frame)，其中包括将丢失的行插入 data.table 的更好方法。功能`fun_DT`相应调整。代码现在更干净了；我没有看到任何速度改进。

在另一篇文章中查看我的更新。Arun 的解决方案同样有效，但您必须手动插入缺失的组合。由于这里有更多标识符列（ID、Month），我在这里只提出了一个肮脏的解决方案（首先创建一个 ID2，然后创建所有 ID2-Category 组合，然后填充 data.table，然后进行整形）。

我很确定这不是最好的解决方案，但如果[这个 FR](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2627&group_id=240&atid=978)是内置的，这些步骤可能会自动完成。

解决方案的速度大致相同，尽管看看它是如何扩展的会很有趣（我的机器太慢了，所以我不想进一步增加 n ......计算机已经经常崩溃了 ;-)

```
library(data.table)
library(rbenchmark)

fun_reshape <- function(n) {

  DT <- data.table(
    ID=sample(1:100, n, replace=TRUE), 
    Month=sample(1:12, n, replace=TRUE),
    Category=sample(1:10, n, replace=TRUE),
    Qty=runif(n)*500,
    key=c('ID', 'Month')
  )
  agg <- DT[, list(Qty = sum(Qty)), by = c("ID", "Month", "Category")]
  reshape(agg, v.names = "Qty", idvar = c("ID", "Month"),
          timevar = "Category", direction = "wide")
}

#UPDATED!
fun_DT <- function(n) {

  DT <- data.table(
    ID=sample(1:100, n, replace=TRUE), 
    Month=sample(1:12, n, replace=TRUE),
    Category=sample(1:10, n, replace=TRUE),
    Qty=runif(n)*500,
    key=c('ID', 'Month')
  ) 

  agg <- DT[, list(Qty = sum(Qty)), by = c("ID", "Month", "Category")]
  agg[, ID2 := paste(ID, Month, sep="_")]

  setkey(agg, ID2, Category)
  agg <- agg[CJ(unique(ID2), unique(Category))]

  agg[, as.list(setattr(Qty, 'names', Category)), by=list(ID2)]

}

library(rbenchmark)

n <- 1e+07
benchmark(replications=10,
          fun_reshape(n),
          fun_DT(n))
            test replications elapsed relative user.self sys.self user.child sys.child
2      fun_DT(n)           10  45.868        1    43.154    2.524          0         0
1 fun_reshape(n)           10  45.874        1    42.783    2.896          0         0 
```

# c# - 在 C# 中运行时读取 .HTML 文件的内容。不使用物理路径

> ID：15822625
> 
> 赞同：0
> 
> 时间：2013-04-04T22:07:51.923
> 
> 标签：c#, html, runtime, read-write

在 c#/mvc 项目中我们如何在运行时读取 .HTML 文件的内容，该文件位于 VS 项目的“内容”文件夹下。不使用物理路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:09:31.380

请参见：

[Visual Studio 项目属性中的各种“构建操作”设置是什么？它们的作用是什么？](https://stackoverflow.com/questions/145752/what-are-the-various-build-action-settings-in-vs-net-project-properties-and-wh)

“内容”构建操作将资源作为文件连同但未嵌入应用程序中，您需要知道物理路径（相对或绝对）才能访问它。

因此，换句话说，将构建操作设置为“内容”时，您所要求的内容是不可能的。

* * *

您可以将其设置为嵌入式资源并使用以下方式访问它：

```
 using (Stream stream = Assembly.GetExecutingAssembly()
                           .GetManifestResourceStream("Your assembly namespace.your resource folder" + "file1.txt"))
        using (StreamReader reader = new StreamReader(stream))
        {
            string result = reader.ReadToEnd();
        } 
```

（摘自：[如何读取嵌入式资源文本文件](https://stackoverflow.com/questions/3314140/how-to-read-embedded-resource-text-file)）

`result`HTML 文件内容作为字符串在哪里。

# ruby-on-rails - Rails belongs_to 与原始表的条件

> ID：15822632
> 
> 赞同：1
> 
> 时间：2013-04-04T22:08:36.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, cancan, belongs-to

我有一个多态`Transaction`模型`from_owner`，因为事务可能来自其他几个模型。

```
class Transaction < ActiveRecord::Base
  belongs_to :from_owner, polymorphic: true
end 
```

我正在尝试`belongs_to`为何时`from_owner_type`是特定值设置一个特定的值：

```
belongs_to :from_person,
           conditions: ['from_owner_type = ?', Person.name],
           class_name: Person,
           foreign_key: 'from_owner_id' 
```

我遇到的问题是`conditions`似乎是 for`Person`而不是`Transaction`. 所以我在尝试调用`from_person`a 时收到以下 SQL 错误`Transaction`：

> ActiveRecord::StatementInvalid: SQLite3::SQLException: 没有这样的列: from_owner_type: SELECT "people".* FROM "people" WHERE "people"."id" = 1 AND (from_owner_type = 'Person') LIMIT 1

我想要的是`from_person`on a如果不是则`Transaction`返回，否则返回相关的。我可以设置一个自定义方法来执行此操作，但我认为它可能作为. 我想在 CanCan 条件下使用它。我正在使用 Rails 3。`nil``Transaction` `from_owner_type``Person``Person``from_person``belongs_to`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:39:43.730

从您的评论来看，这样做的目的似乎是能够建立一个 CanCan 规则，允许用户访问他们拥有的`:read`任何内容，对吗？`Transactions`您应该能够使用以下规则来做到这一点：

```
can :read, Transaction, from_owner_id: profile.id, from_owner_type: Person.name 
```

这应该意味着您根本不需要打扰您的`Transaction`模型。（我没有对此进行测试，但理论应该是正确的，即使语法不完全存在。例如，我不确定你`profile.id`来自哪里。）

# unity3d - UNITY 当玩家落水时失去一条生命

> ID：15822633
> 
> 赞同：0
> 
> 时间：2013-04-04T22:08:51.240
> 
> 标签：unity3d, collision-detection

我想在玩家每次下水时改变生命的数量。到目前为止，我写了这段代码：

```
public var dieSound:AudioClip;
static var lives = 3;

function Start () {

}

function Update () {
if(lives == 0)
{
Application.LoadLevel("menu");
}
}

public function OnGUI()
{
GUI.backgroundColor = Color.blue;
GUI.Button (Rect (10, 10, 100, 30), "Lives: " + lives);
}

function OnControllerColliderHit (hit : ControllerColliderHit)
{
if (hit.collider.tag == "Water")
{
// play dying sound
audio.PlayOneShot(dieSound);

// show mission fail UI
GameObject.Find("MissionTXT").guiText.enabled = true;
// wait until it's ended
yield WaitForSeconds(dieSound.length + 0.01);
transform.position = GameObject.FindWithTag("Respawn").transform.position;

if (transform.position == GameObject.FindWithTag("Respawn").transform.position)
{
GameObject.Find("MissionTXT").guiText.enabled = false;
lives = lives - 1;
}
}
} 
```

问题是当玩家下水时，生命值会从 3 变为 -120。我认为这是因为玩家在水面上停留了 6-7 秒。所以角色可能会打水 120 次，直到他回到原来的位置（重生位置）。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:35:32.920

首先想到的是：

1.  在你的水上`GameObject`，添加一个`Collider`组件。我认为 a`BoxCollider`适合这种情况。不要忘记标记`Is Trigger`复选框。
2.  在您的 player`GameObject`上，添加 a`RigidBody`和 a `CharacterController`（因为看起来您正在使用该`CharacterController`组件）。确保选中`RigidBody`'`Is Kinematic`复选框。另外，给你`GameObject`一个有意义的标签，比如“玩家”。
3.  回到 water `GameObject`，添加一个应该如下所示的新脚本：

    ```
    public class Water : MonoBehaviour {
        void OnTriggerEnter(Collider collider) {
            if(collider.CompareTag("Player")) {
                collider.SendMessage("Kill");
            }
        }
    } 
    ```

4.  回到播放器`GameObject`，添加一个应该如下所示的新脚本：

    ```
    public class Player : MonoBehaviour {
        public void Kill() {
            //Perform all necessary steps to kill the player such as...
            //Reduce the amount of lives by 1
            //Play the death sound
            //etc. etc. etc.
        }
    } 
    ```

这就是事情的“要点”，或者这至少应该让你开始。Unity 有一些非常好的文档，几乎你需要的任何东西都在那里，你只需要知道在哪里看。我不会深入讨论我上面提到的每一件事，因为正如我所说，“Unity 有一些非常好的文档。” 考虑到这一点，我强烈建议查看我提到的每一件事。希望这可以帮助！=)

# cuda - 按地图计数扩展和增加数据

> ID：15822635
> 
> 赞同：2
> 
> 时间：2013-04-04T22:08:52.910
> 
> 标签：cuda, thrust

我对推力（cuda）很陌生，并且正在寻找具有挑战性的东西。

* * *

（*要简化的编辑问题*）我有一个输入向量和一个地图：

```
 vector = [8,23,46,500,2,7,91,91]
    map = [1, 0, 4,  3,1,0, 5, 3] 
```

我想扩展它并增加值成为：

```
new_vec = [8,46,47,48,49,500,501,502,2,91,92,93,94,95,91,92,93] 
```

*   我意识到thrust/examples/expand.cu 示例已经主要执行此操作，但我不知道如何通过地图计数有效地增加数据值。
*   如果有人可以解释如何修改此示例以实现此目的，那将很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:50:56.400

调整 Thrust`expand`示例以用于`exclusive_scan_by_key`对其子序列中的每个输出元素进行排名，然后按该排名递增：

```
#include <thrust/device_vector.h>
#include <thrust/reduce.h>
#include <thrust/gather.h>
#include <thrust/scan.h>
#include <thrust/fill.h>
#include <thrust/copy.h>
#include <thrust/iterator/constant_iterator.h>
#include <thrust/functional.h>
#include <iterator>
#include <iostream>

template<typename Vector>
void print(const std::string& s, const Vector& v)
{
  typedef typename Vector::value_type T;

  std::cout << s;
  thrust::copy(v.begin(), v.end(), std::ostream_iterator<T>(std::cout, " "));
  std::cout << std::endl;
}

template<typename InputIterator1,
         typename InputIterator2,
         typename OutputIterator>
void expand_and_increment(InputIterator1 first1,
                          InputIterator1 last1,
                          InputIterator2 first2,
                          OutputIterator output)
{
  typedef typename thrust::iterator_difference<InputIterator1>::type difference_type;

  difference_type input_size  = thrust::distance(first1, last1);
  difference_type output_size = thrust::reduce(first1, last1);

  // scan the counts to obtain output offsets for each input element
  thrust::device_vector<difference_type> output_offsets(input_size);
  thrust::exclusive_scan(first1, last1, output_offsets.begin()); 

  print("output_offsets ", output_offsets);

  // scatter the nonzero counts into their corresponding output positions
  thrust::device_vector<difference_type> output_indices(output_size);
  thrust::scatter_if
    (thrust::counting_iterator<difference_type>(0),
     thrust::counting_iterator<difference_type>(input_size),
     output_offsets.begin(),
     first1,
     output_indices.begin());

  // compute max-scan over the output indices, filling in the holes
  thrust::inclusive_scan
    (output_indices.begin(),
     output_indices.end(),
     output_indices.begin(),
     thrust::maximum<difference_type>());

  print("output_indices ", output_indices);

  // gather input values according to index array (output = first2[output_indices])
  OutputIterator output_end = output; thrust::advance(output_end, output_size);
  thrust::gather(output_indices.begin(),
                 output_indices.end(),
                 first2,
                 output);

  // rank output_indices
  thrust::device_vector<difference_type> ranks(output_size);
  thrust::exclusive_scan_by_key(output_indices.begin(), output_indices.end(),
                                thrust::make_constant_iterator<difference_type>(1),
                                ranks.begin());

  print("ranks ", ranks);

  // increment output by ranks
  thrust::transform(output, output + output_size, ranks.begin(), output, thrust::placeholders::_1 + thrust::placeholders::_2);
}

int main(void)
{
  int values[] = {8,23,46,500,2,7,91,91};
  int counts[] = {1, 0, 4,  3,1,0, 5, 3};

  size_t input_size  = sizeof(counts) / sizeof(int);
  size_t output_size = thrust::reduce(counts, counts + input_size);

  // copy inputs to device
  thrust::device_vector<int> d_counts(counts, counts + input_size);
  thrust::device_vector<int> d_values(values, values + input_size);
  thrust::device_vector<int> d_output(output_size);

  // expand values according to counts
  expand_and_increment(d_counts.begin(), d_counts.end(),
                       d_values.begin(),
                       d_output.begin());

  std::cout << "Expanding and incrementing values according to counts" << std::endl;
  print(" counts ", d_counts);
  print(" values ", d_values);
  print(" output ", d_output);

  return 0;
} 
```

输出：

```
$ nvcc expand_and_increment.cu -run
output_offsets 0 1 1 5 8 9 9 14 
output_indices 0 2 2 2 2 3 3 3 4 6 6 6 6 6 7 7 7 
ranks 0 0 1 2 3 0 1 2 0 0 1 2 3 4 0 1 2 
Expanding and incrementing values according to counts
 counts 1 0 4 3 1 0 5 3 
 values 8 23 46 500 2 7 91 91 
 output 8 46 47 48 49 500 501 502 2 91 92 93 94 95 91 92 93 
```

# apache - 在子域重定向到主域 404 上找不到页面？

> ID：15822642
> 
> 赞同：-1
> 
> 时间：2013-04-04T22:09:49.053
> 
> 标签：apache, .htaccess, redirect, subdomain

我有一个移动子域，它没有主域的所有页面。我检查用户是否在移动设备上，以及是否将他们发送到移动子域。问题有时是移动子域上不存在该页面，因此我想将它们保留在主站点上，或者如果该页面不存在，则将它们重定向回主站点页面。

所以基本上我希望在 htaccess 中放一些东西，如果它是 404 发送到主域上的同一页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:28:26.527

假设文件具有相同的路径但不同的域，

如果找不到页面，将用户重定向到主域

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-s
RewriteRule ^(.*)$ http://mysite.com/%1 
```

# c - C 中 send() 返回的数字是否包含空终止符？

> ID：15822650
> 
> 赞同：0
> 
> 时间：2013-04-04T22:10:21.980
> 
> 标签：c, sockets, send

我写了这段代码来写入一个套接字（`Server`结构包含一个`socketfd`字段）

```
void writeToSocket(Server *server, const char *message) {
    size_t len = strlen(message);
    int bytesWritten = 0;
    while (true) {
        bytesWritten += send(server->socketfd, message + bytesWritten, len, 0);
        if (bytesWritten-len-1 == 0)
            break;
    }
} 
```

这段代码可能有几个问题——我是这方面的新手。随意提出您可能看到的任何危险信号。我主要担心的是循环可能不会终止。

例如：消息是`hello`（又名`h`, `e`, `l`, `l`, `o`, `\0`），`strlen(message)`则为 5，但如果`send`包含`\0`，则`bytesWritten`可能为 6。但如果不是，则为 5，在这种情况下`if (bytesWritten-len-1 == 0)`是错误的。哪个是对的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T23:22:07.277

`send(3)`发送给定的*字节*数；如果您发送的是字符串、整数数组或随机数，它不会在意`struct`。如果不包括结尾`'\0'`，则不包括在内。

# php - 使用 Web 服务的两个不同字段的 OR 查询代码

> ID：15822651
> 
> 赞同：1
> 
> 时间：2013-04-04T22:10:25.173
> 
> 标签：php, mysql, arrays, web-services

通常我可以弄清楚这一点，但格式看起来和我习惯的有点不同。我有一个使用 php 和 CodeIgnighter 的 Web 服务。该函数如下所示：

```
 function getCurrentSales($office_id)
    {
        $CI =& get_instance();
        $CI->load->model("properties");

        //Get the properties
        $where = array('field_SaleOfficeCode'=>$office_id);
        $where = array('field_ListOfficeCode'=>$office_id);
        $result = $CI->properties->getCurrentSales($where); 
        $properties = $result->result_array();

        foreach($properties as $p){
            //Get property images
            $where = array('ListingKey'=>$p['UniqueKey']);
            $property_arr[] = $p;
        }   

            return  $property_arr;
    }

    $this->nusoap_server->service(file_get_contents("php://input"));
} 
```

我想要做的是返回行其中`field_ListOfficeCode`或`field_ListOfficeCode`具有`$office_id`. 就像现在一样，仅当 时`field_ListOfficeCode=>$office_id`，而不是当其中一个或另一个等于该值时。

模型方法代码：

```
function getCurrentSales($where = null) {

    $this->db->select('field_ListingKey as UniqueKey,
                        field_LocaleListingStatus as Status,
                        field_CloseDate as ClosingDate,
                        field_ContractDate as ContractDate,
                        field_ListingID as MLS,
                        TRIM("#VARIES" from field_FullStreetAddress) as StreetAddress,
                        field_ListPrice as Price,
                        field_ListOfficeCode as BrokerID,
                        if(field_Beds != "", field_Beds, 0) as NumBeds,
                        if(field_BathsFull != "", field_BathsFull, 0) as NumFullBaths,
                        if(field_BathsHalf != "", field_BathsHalf, 0) as NumHalfBaths,
                        field_InternetRemarks as PropertyRemarks,
                        field_ListOfficeName as ListingOfficeName,
                        field_ListPicture3URL as MainPhoto,
                        CONCAT(field_ListAgentNickname, " ", field_ListAgentLastName, " ", (if(field_ListAgentNameSuffix = "NULL", field_ListAgentNameSuffix, ""))) as ListingAgent,
                        CONCAT(field_SaleAgentNickname, " ", field_SaleAgentLastName, " ", (if(field_SaleAgentNameSuffix = "NULL", field_SaleAgentNameSuffix, ""))) as SalesAgent,
                        CONCAT(field_City, ", ", field_State, " ", field_PostalCode) as AreaAddress', false);

    $this->db->from('TABLE_2');

    if($where != null){
        $this->db->where($where, false);
        $this->db->where('YEAR(field_ContractDate) = YEAR(NOW())', NULL, false);
        $this->db->where('MONTH(field_ContractDate) = MONTH(NOW())', NULL, false);
    }

    $this->db->order_by('ContractDate', 'desc'); //get random row
    //$this->db->limit($limit);

    $query = $this->db->get();
    return $query;     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:02:29.407

I'm not familiar with CodeIgniter, but I would suspect your problem is with these two lines

```
$where = array('field_SaleOfficeCode'=>$office_id);
$where = array('field_ListOfficeCode'=>$office_id); 
```

You aren't actually building up an array of where clauses, but rather overriding the first assignment with the second, which explains why you are only getting results that match `field_ListOfficeCode == $office_id`

Depending on how CodeIgniter expects these where clauses to be formed, I would assume it should be something like

```
$where = array(
    array('field_SaleOfficeCode'=>$office_id),
    array('field_ListOfficeCode'=>$office_id)
) 
```

Or from a quick look at [the documentation](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

```
$where = array(
    'field_SaleOfficeCode'=>$office_id,
    'field_ListOfficeCode'=>$office_id
) 
```

And then in your `getCurrentSales` function, it should be

```
$this->db->or_where($where) 
```

# jquery - JQuery Mobile 无法识别嵌套在 span 标签中的列表项

> ID：15822652
> 
> 赞同：1
> 
> 时间：2013-04-04T22:10:26.153
> 
> 标签：jquery, listview, jquery-mobile

我目前正在尝试将 JQuery Mobile 集成到基于 XML 的 Web 程序中（任何关心的人都可以使用 Logi Analytics）。问题是当我尝试用 JQuery Mobile 包装他们的报告时，它会中断，因为程序强制包装 HTML 元素被包装在 span 标签中。

**例子**

我要输入的代码如下所示：

```
<ul data-role="listview">
  <li>Cool list item!</li>
</ul> 
```

但是将输出的代码如下所示：

```
<span>
  <ul data-role="listview">
    <span>
      <li>Cool list item!</li>
    </span>
  </ul>
</span> 
```

从而破坏了 jquery mobile 最终会放在相关列表项上的类。有谁知道强制 JQM 以跨度或其他元素内的子列表项为目标的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:13:45.570

您可以尝试[**解开**](http://api.jquery.com/unwrap/)li 元素，如下所示：

```
$('ul > span > li').unwrap(); 
```

# spotify - 免费实现 Spotify 客户端的 API 密钥

> ID：15822657
> 
> 赞同：2
> 
> 时间：2013-04-04T22:11:00.500
> 
> 标签：spotify

我正在构建一个基于 Raspberry Pi 的电子管放大 MP3 播放器，安装在经过修复的威斯敏斯特收音机外壳中：

[http://www.youtube.com/watch?v=oTabLcVgvwo](http://www.youtube.com/watch?v=oTabLcVgvwo)

我想编写一个简单的免费客户端，它立即开始播放特定命名的播放列表（“Westiamp”，这是项目的名称）。它还将连接到 USB 连接的控制面板，用于在曲目之间跳过等。

将有一个简单的 Web UI，用于输入用户名和密码以登录 Spotify，以及 WiFi 详细信息。

我的问题与 API 密钥有关。我可以在这里看到几个选项：

*   申请个人API密钥，连同源代码一起发布
*   为项目申请API密钥，并随源码一起发布
*   在 Web UI 中为用户提供一个选项来指定 API 密钥，并使用它

我宁愿不分发个人 API 密钥，而且我认为要求软件的任何用户申请他们自己的密钥不会有助于提高可用性。

这里有 Spotify 批准的流程吗？我已经尝试在社区论坛上发帖（沉默）并寻求支持（谁在此处指导我）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:25:18.443

将密钥与源代码一起分发是严格违反 Spotify 服务条款的。

如果您只分发编译了 C API 密钥的二进制文件，那很好。否则，您必须要求代码的最终用户在编译时提供 C 密钥，或在运行时要求提供二进制密钥。

# c - 如何解析以逗号分隔的字符串？

> ID：15822660
> 
> 赞同：6
> 
> 时间：2013-04-04T22:11:15.910
> 
> 标签：c

```
Char *strings = "1,5,95,255" 
```

我想将每个数字存储到一个 int 变量中，然后将其打印出来。

例如输出变成这样。

值 1 = 1

值2 = 5

值 3= 95

值4 = 255

而且我想在循环中执行此操作，因此如果字符串中有 4 个以上的值，我应该能够获得其余的值。

我想看一个例子。我知道这对你们中的许多人来说是非常基础的，但我觉得它有点挑战性。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T22:17:40.863

从[cplusplus](http://www.cplusplus.com/reference/cstring/strtok/) `strtok`示例修改：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
int main ()
{
    char str[] ="1,2,3,4,5";
    char *pt;
    pt = strtok (str,",");
    while (pt != NULL) {
        int a = atoi(pt);
        printf("%d\n", a);
        pt = strtok (NULL, ",");
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:27:37.910

我不知道上面评论中提到的功能，但是按照你要求的方式做你想做的事，我会尝试这个或类似的东西。

```
char *strings = "1,5,95,255";
char number;
int i = 0; 
int value = 1;

printf ("value%d = ", value);
value++; 

while (strings[i] != NULL) {
   number = string[i];
   i++;
   if (number == ',') 
       printf("\nvalue%d = ",value++);
   else 
       printf("%s",&number);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T22:55:38.937

如果您没有可修改的字符串，我会使用`strchr`. 搜索下一个`,`，然后像这样扫描

```
#define MAX_LENGTH_OF_NUMBER 9
char *string = "1,5,95,255";
char *comma;
char *position;
// number has 9 digits plus \0
char number[MAX_LENGTH_OF_NUMBER + 1];

comma = strchr (string, ',');
position = string;
while (comma) {
    int i = 0;

    while (position < comma && i <= MAX_LENGTH_OF_NUMBER) {
        number[i] = *position;
        i++;
        position++;
    }

    // Add a NULL to the end of the string
    number[i] = '\0';
    printf("Value is %d\n", atoi (number));

    // Position is now the comma, skip it past
    position++;
    comma = strchr (position, ',');
}

// Now there's no more commas in the string so the final value is simply the rest of the string
printf("Value is %d\n", atoi (position)l 
```

# python - 将纯 python 包安装为另一个依赖于平台的包的子包

> ID：15822661
> 
> 赞同：2
> 
> 时间：2013-04-04T22:11:20.080
> 
> 标签：python, centos, rpm, distutils, setup.py

我有一个纯 python 包`B`和一个依赖于平台的包`A`（即`A`包含 C 扩展模块）。我希望安装`B`为 的子包`A`，并且预期的层次结构就像，

```
<python-libdir>/site-packages/
    + <A>
        + __init__.py
        + _<A>.so
        + <B>
            + __init__.py
            + _<B>.py 
```

由于许可和其他问题，我需要将它们放在单独的项目中，`A`并为每个`B`项目创建单独的`distutils`脚本（又名。`setup.py`）。

问题是`A`依赖于平台。当我`<A>`在 CentOS / RHEL (x86_64) 系统上（即通过`$ python setup.py bdist_rpm`）打包（rpm-）时，它会安装到，

```
/usr/lib64/python2.6/site-packages/<A> 
```

而`B`这是一个纯 python 包，默认情况下，它的内容是，

```
/usr/lib/python2.6/site-packages/<A>/<B> 
```

`--force-arch`我在为 构建 rpm 包时尝试了该选项`<B>`，即

```
$ python setupB.py bdist_rpm --force-arch x86_64 
```

这会在其文件名中生成`B`带有 with的 rpm 包（而不是），但它仍然安装到，而不是所需的.`x86_64``noarch``<B>``/usr/lib/...``/usr/lib64/...`

任何人都可以建议一种简单的配置方法`<B>`（即可能在`setup.py`or中设置一些参数`setup.cfg`），以便它安装到依赖于平台的 libdir （即`/usr/lib64/...`）？

编辑：我知道命令的`--install-purelib`选项`install`，即

```
$ python setupB.py install --install-purelib=/usr/lib64/python2.6/site-packages 
```

它确实实现了所需的包层次结构。但似乎没有`bdist_rpm`对`distutils`.

有没有办法在or中指定这个`--install-purelib`选项？`setup.py``setup.cfg`

# unit-testing - 在 Zend 框架 1 应用程序中，PHPUnit 无法在控制器中加载 application.ini，但在模型中可以正常工作

> ID：15822673
> 
> 赞同：4
> 
> 时间：2013-04-04T22:12:09.393
> 
> 标签：unit-testing, zend-framework, phpunit

我们正在使用 Zend 框架 1.11.11。我们的服务器有 PHPUnit 3.7.9。我们知道我们的 Zend Framework 版本不支持 PHPUnit 3.7.9。但到目前为止，我们已经能够使用 PHPUnit 来测试模型。

但是，在测试控制器时，PHPUnit 失败了。放入`dispatch()`代码后`try/catch block`，我们了解到它无法从`Zend_Registry`. 它被定义`application.ini`。模型中使用了相同的属性，我们在那里没有问题。

我们有可能遗漏了什么吗？还是不能在我们的 ZF 版本中使用 PHPUnit 3.7.9？

这是 phpunit.xml：

```
<phpunit bootstrap="./application/bootstrap.php" colors="true">
    <testsuite name="Precision Tests">
    <directory>./</directory>
</testsuite>

<filter>
    <whitelist>
        <directory suffix=".php">../application/</directory>
        <directory suffix=".php">../library/</directory>
        <exclude>
            <directory suffix=".phtml">../application/</directory>
            <directory>../library/Zend</directory>
            <file>../application/Bootstrap.php</file>
            <file>../application/controllers/ErrorController.php</file>
        </exclude>
    </whitelist>
</filter>
<logging>
    <log type="coverage-html" target="./log/report" charset="UTF-8" yui="true" hightlight="true"
        lowupperbound="50" highlowerbound="80">
        <log type="testdox" target="./log/testdox.html">
        </log>
    </log>
    </logging>
</phpunit> 
```

测试中的 bootstrap.php：

```
<?php

function load($name) {
    $paths = array(
        "../application/controllers",
        "../library",
        "../application/models"
    );
    foreach($paths as $dir) {
        $name = str_replace("_", "/", $name);
        if(file_exists($dir."/".$name.".php")) {
            require_once($dir."/".$name.".php");
            break;
        }
    }
}

error_reporting(E_ALL | E_STRICT);

// Define path to application directory
defined('APPLICATION_PATH')
|| define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../../application'));

// Define application environment
defined('APPLICATION_ENV')
|| define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'development'));
$_SERVER["APPLICATION_ENV"] = getenv('APPLICATION_ENV');
$_SERVER["APPLICATION_ENV"] = 'development';

set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    realpath(APPLICATION_PATH . '/controllers'),
    get_include_path(),
)));

require_once 'Zend/Application.php';
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);

//setting up env variables:
$_SERVER["REMOTE_ADDR"] = '0.0.0.0';
$_SERVER['SERVER_NAME'] ='PHP.UNIT.TEST';
$_SERVER['REQUEST_URI'] = 'PHPUNITTEST';
$_SERVER['QUERY_STRING'] = 'PHPUNITTEST';

require_once 'Zend/Loader/Autoloader.php';
$autoloader = Zend_Loader_Autoloader::getInstance();
$autoloader->registerNamespace('VP');
$autoloader->pushAutoloader("load");
spl_autoload_register();

require_once 'ControllerTestCase.php'; 
```

那么这里是`ControllerTestCase.php`。我们的模型也扩展了相同的`ControllerTestCase`：

```
<?php

require_once 'Zend/Test/PHPUnit/ControllerTestCase.php';

class ControllerTestCase extends Zend_Test_PHPUnit_ControllerTestCase
{
    /**
    * @var Zend_Application
    */
    protected $application;

    public function setUp() {
        $this->bootstrap = array($this, 'appBootstrap');
        parent::setUp();
    }

    public function appBootstrap() {
        $this->application = new Zend_Application(APPLICATION_ENV,
            APPLICATION_PATH . '/configs/application.ini');
        $this->application->bootstrap();
    }
} 
```

这是一个不从 application.ini 加载属性的示例控制器：

```
<?php

class MyControllerTest extends ControllerTestCase
{
    public function setUp()
    {
        $this->getFrontController()->setControllerDirectory(APPLICATION_PATH . '/controllers');
        Zend_Controller_Action_HelperBroker::addHelper(new Zend_Layout_Controller_Action_Helper_Layout);
    }

    public function testSubscriptionStatus()
    {
        try{
            $this->dispatch('/my/subscriptionstatus');
            $this->assertController('my');
            $this->assertAction('subscriptionstatus');

        } catch (Exception $e) {
            print_r($e->getTrace());
        }
    }
} 
```

在这里我们如何设置我们的测试模型：

```
<?php

class Model_CustomerTest extends ControllerTestCase
{
    public function testDoSearch(){
        $x = Customer::doSearch('s');
        $this->assertTrue(count($x) > 0);
    }

} 
```

最后，这是在模型中有效但在控制器中无效的违规代码（运行 PHPUnit 时）：

```
$registry = Zend_Registry::getInstance();
$options = $registry->webservices['logging']; 
```

我们通过阅读网络上的几个不同资源来设置我们的 PHPUnit 测试环境。我们都不是 PHPUnit 专家。所以我们只是不知道发生了什么。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T22:29:10.567

文档对此不是很清楚，但我认为控制器测试用例类实际上不应该执行引导，因为 PHPUnit 需要能够在每次测试之前执行此操作。至少这是我设置控制器基类（有效）的方式。因此，尝试将您的设置方法更改为：

```
public function setUp() {
    $this->bootstrap = new Zend_Application(APPLICATION_ENV,
        APPLICATION_PATH . '/configs/application.ini');
    parent::setUp();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T09:08:24.697

*ZEND1*

我为此寻找了一个解决方案，但没有什么能接近真正的解决方案，所以我将我的完整课程发布给某人，看看我是如何做到这一点的。我希望这有帮助。

```
 <?php

//We need to include these resources for bootstrapping of the Tests.
define('APPLICATION_ENV', "developer");
define('APPLICATION_PATH', realpath(dirname(__FILE__) . '../../../application'));

$libraryPath = realpath(dirname(__FILE__) . '../../../library');
  set_include_path($libraryPath. PATH_SEPARATOR . get_include_path());

require_once 'Zend/Application.php';
require_once 'Zend/Test/PHPUnit/ControllerTestCase.php';

class CommentControllerTest extends Zend_Test_PHPUnit_ControllerTestCase
{
    protected $_application;
    protected $front;

    protected function setUp()
    {
        $this->bootstrap = array($this, 'appBootstrap');
        parent::setUp();
    }

    public function appBootstrap()
    {
        $this->_application = new Zend_Application(APPLICATION_ENV,
              APPLICATION_PATH . '/configs/application.ini'
        );

        $this->_application->bootstrap();

        /**
         * Fix for ZF-8193
         * http://framework.zend.com/issues/browse/ZF-8193
         * Zend_Controller_Action->getInvokeArg('bootstrap') doesn't work
         * under the unit testing environment.
         */
        $this->front = Zend_Controller_Front::getInstance();

        if($this->front->getParam('bootstrap') === null) {
            $this->front->setParam('bootstrap', $this->_application->getBootstrap());
        }
    }

    public function testGoHome()
    {

        $this->dispatch('/');
        $request = $this->getRequest();
        $request->setMethod('POST')
                ->setPost(array(
                    'username' => 'yourusername',
                    'password' => 'putpassword',
                ));
        $this->dispatch('/');
        $this->assertNotRedirect();
        $this->assertQuery('form');

    }

} 
```

之后，将其保存为应用程序/控制器文件夹中的 CommentControllerTest.php。使用终端，导航到控制器文件夹并运行以下命令。

```
 phpunit CommentControllerTest 
```

# symfony - symfony2教义执行时间中选择和删除的不同

> ID：15822674
> 
> 赞同：0
> 
> 时间：2013-04-04T22:12:10.087
> 
> 标签：symfony, time, doctrine

我通常从 DB (很少) 1 中删除一些行...

但是当我检查探查器时，有三个查询：

前两个只是选择用户=>时间大约：时间：**1.31 ms**

第三个查询是删除：

```
DELETE 
FROM 
 likes
WHERE 
 user_id = ? AND status_id = ? 
```

外键和索引。

时间为：时间：**30.55 ms**

这不是太多了吗？还是很好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:53:00.460

`SELECT`一般来说，一个语句更快。

请记住，在`DELETE`一行（或一组行）之前，DBMS 必须找到（“所以选择”）必须涉及哪一行，然后删除这些行。也许他还必须以级联方式删除许多表中的其他记录，甚至重新索引这些表，所以，是的，很正常

# java - NullPointerException: How to resolve?

> ID：15822675
> 
> 赞同：-6
> 
> 时间：2013-04-04T22:12:10.933
> 
> 标签：java, nullpointerexception

How to resolver NullPointer in getSubstanciasEsquemasAbertos:

```
public Set<SubstanciaEsquemaAbertoSoroterapia> getSubstanciasEsquemasAbertos() {

    Set<SubstanciaEsquemaAbertoSoroterapia> substancias = new LinkedHashSet<SubstanciaEsquemaAbertoSoroterapia>();

    for (EsquemaAbertoSoroterapia esquema : getEsquemasAbertosOrdenados()) {
        substancias.addAll(esquema.getSubstanciasOrdenadas());

    }
    return substancias;
} 
```

Stack trace:

```
Caused by: org.apache.tapestry.runtime.ComponentEventException [at context:prontuario/prescricao/CriacaoPrescricao.tml, line 936, column 61]
at org.apache.tapestry.internal.structure.ComponentPageElementImpl.triggerContextEvent(ComponentPageElementImpl.java:1021)
at org.apache.tapestry.internal.structure.ComponentPageElementImpl.triggerEvent(ComponentPageElementImpl.java:934)
at org.apache.tapestry.internal.structure.InternalComponentResourcesImpl.triggerEvent(InternalComponentResourcesImpl.java:154)
at org.apache.tapestry.corelib.components.Form.onAction(Form.java:388)
at org.apache.tapestry.corelib.components.Form.dispatchComponentEvent(Form.java)
at org.apache.tapestry.internal.structure.ComponentPageElementImpl.dispatchEvent(ComponentPageElementImpl.java:851)
at org.apache.tapestry.internal.structure.ComponentPageElementImpl.triggerContextEvent(ComponentPageElementImpl.java:1004)
... 79 more 
```

Caused by: java.lang.NullPointerException at br.gov.mg.fhemig.sighfase2.entidade.prontuario.prescricao.ItemPrescricaoSoroterapia.getSubstanciasEsquemasAbertos(ItemPrescricaoSoroterapia.java:442) at br.gov.mg.fhemig.sighfase2.web.pages.prontuario.prescricao.CriacaoPrescricao.sucesso(CriacaoPrescricao.java:1480) at br.gov.mg.fhemig.sighfase2.web.pages.prontuario.prescricao.CriacaoPrescricao.dispatchComponentEvent(CriacaoPrescricao.java) at org.apache.tapestry.internal.structure.ComponentPageElementImpl.dispatchEvent(ComponentPageElementImpl.java:843) at org.apache.tapestry.internal.structure.ComponentPageElementImpl.triggerContextEvent(ComponentPageElementImpl.java:1004) ... 85 more

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:14:14.113

It's possible that either `getEsquemasAbertosOrdenados()` or one of the `esquema.getSubstanciasOrdenadas()` is returning `null`. It's hard to tell without looking at the actual stack trace, you should post it as part of the question.

# java - JColorChooser 不会改变 JLabel 的文本颜色

> ID：15822681
> 
> 赞同：0
> 
> 时间：2013-04-04T22:13:00.490
> 
> 标签：java, swing, jlabel, jcolorchooser

我正在尝试创建一个上面带有 JLabel 的 JColorChooser 对话框，以便 JLabel 文本颜色将更改为用户使用 JColorChooser 选择的颜色。这是我到目前为止所拥有的，但它不是为我编译的。

```
import javax.swing.*;
import java.awt.*;
import javax.swing.event.*;

public class JColorChooserExample extends JFrame
{       
private JColorChooser colorChooser;                                // instance variables          
private JLabel banner;

public JColorChooserExample()                                             // constructor
{
    add(banner = new JLabel("Welcome to the Tutorial Zone!", JLabel.CENTER), BorderLayout.NORTH);
  banner.setForeground(Color.BLACK);
    add(colorChooser = new JColorChooser(banner.getForeground()), BorderLayout.SOUTH);

    ListenerClass listener = new ListenerClass();
    colorChooser.addChangeListener(listener);
}

public static void main(String[] args)
{       
    JColorChooserExample frame = new JColorChooserExample();   // new frame object 
    frame.setTitle("JColorChooser Example");                   // set frame title
    frame.pack();                                                             // sizes the frame so components fit frame  
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);      // ends program on frame closing
    frame.setLocationRelativeTo(null);                                // centre frame
    frame.setVisible(true);                                    // make frame visible
}

private class ListenerClass implements ChangeListener
{   
    public void stateChanged(ChangeEvent e) 
    {
        Color newColor = colorChooser.getColor();
        banner.setForeground(newColor);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:30:20.557

A`ChangeListener`应该用 a 注册，`JColorChooser`而`ColorSelectionModel`不是直接用它`JColorChooser`本身注册。

```
colorChooser.getSelectionModel().addChangeListener(listener); 
```

[如何使用颜色选择器](http://docs.oracle.com/javase/tutorial/uiswing/components/colorchooser.html)

# c# - 从 sql 数据库列制作子字符串加数据

> ID：15822682
> 
> 赞同：0
> 
> 时间：2013-04-04T22:13:00.623
> 
> 标签：c#, asp.net, sql-server

我正在尝试创建一个用户 ID。我有一个 sql server 数据库，我有一个用 asp.net 开发的用户网页。在我的用户页面上，用户在文本框中填写信息（名字、姓氏、中间名首字母等），当用户单击提交按钮时，输入的信息将添加到数据库中。我在数据库中有一个自动增量列，因此当信息添加到数据库时，该行具有一个自动增量编号，例如 1。每次添加新行时，自动增量编号都会增加一。

我想创建一个唯一的用户 ID。它应该包含用户在用户网页上填写的姓氏的前 4 个字母和数据库中的自动递增编号。我有一个代码来检索姓氏的前 4 个字母（字符串 FirstFour = txtNewUserLN.Text.Substring(0, 4);），但我需要将数据库中的自动增量编号添加到该字符串。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:36:35.657

在sql数据库中创建sql用户定义函数

用于创建函数使用

```
CREATE FUNCTION ucernamehandle(@Lastname)
RETURNS nchar(50)
AS
BEGIN
    DECLARE @idfromauo int;
    DECLARE @newusernem nchar(50);
    SET @idfromauo =IDENT_CURRENT('yourtablename');
    return @Lastname+@idfromauo;
END 
```

然后在插入语句中使用它

```
INSERT INTO yourtablename (LastName) VALUES (ucernamehandle(@Lastname)) 
```

那么你会得到你想要的女巫

欢迎您的感谢

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:08:08.447

我的猜测是你将不得不进行插入然后更新。需要注意的事情 - 如果您使用任何检查最后一个或刚刚插入的身份值的东西，请确保将其放入事务中。如果不这样做，您可以在更新之前让其他进程添加记录。

所以尝试这样的事情：

```
insert into UserList(LastName, FirstName, ...) values (@LastName, @FirstName)
declare @UserID varchar(500)
set @UserID = left(@LastName, 4) + convert(varchar(10), SCOPE_IDENTITY())
update UserList set UserID = @UserID where RowID = Scope_identity() 
```

# ruby-on-rails - pgAdmin III 发生错误：连接服务器时出错：开发环境中的rails webrick服务器

> ID：15822684
> 
> 赞同：0
> 
> 时间：2013-04-04T22:13:15.840
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, ubuntu, pgadmin

我正在使用 PostgreSQL 构建我的第一个 rails 应用程序，一切都很好，但现在我需要直接访问数据库。我希望使用像 pgAdmin III 这样的 GUI，但我不确定如何将它连接到我的开发数据库？

我尝试了以下方法，但我只是猜测，因为我找不到指南

在我的**database.yml**文件中，我有

```
development:
  adapter: postgresql
  encoding: unicode
  database: myapp_development
  pool: 5
  username: ross
  password: 
```

在**pgAdmin III - 新服务器注册 - 属性**

```
Name: myapp_development
Host: 127.0.0.1
port: 3000
SSL:
Maintenance DB: postgres
username: ross
password: 
Store password: false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:23:28.743

不确定您在尝试连接时看到了什么错误？我猜我会说端口`3000`似乎不太可能...... postgres默认端口是`5432`.

# ios - iOS：控制另一个视图的音频播放器（控制器）

> ID：15822685
> 
> 赞同：0
> 
> 时间：2013-04-04T22:13:17.997
> 
> 标签：ios, avaudioplayer

我正在编写一个测验应用程序。在 Menu-ViewController 中，我将音乐添加到项目中。musicPlayer 运行良好，只要 Menu-ViewController 在前面，我也可以控制它（播放、暂停、停止等）。当我显示另一个 ViewController 时，音乐在后台运行，就像我想的那样。但是如果尝试调用第二个ViewController中第一个ViewController的play/pause方法，音乐就暂停了也没有停止。我不知道为什么！如果我在此方法中添加其他说明，一切都会好起来的。（我尝试了`exit(0);`方法。这是我的代码：

控制器 1 .h：

```
@implementation MenuViewController : <....> {
... }
@property (retain) AVAudioPlayer *backgroundPlayer;
- (void) playPauseMethod; 
```

控制器 1 .m：

```
@interface ...
@end
@implementation MenuViewController 
@ synthesize 
- (void) soundChanger {
if (hintergrundPlayer.isPlaying) {
    [backgroundPlayer pause];}
else if (!backgroundPlayer.isPlaying) {
    [backgroundPlayer play];}} 
```

控制器 2 .h：

```
#import "MenuViewController.h"
@interface QuizViewController : UIViewController{} 
```

控制器 2 .m：

```
@interface ...
@end
@implementation MenuViewController 
@ synthesize ...
//..... musicPlayer is playing music.
- (IBAction)myMusic:(id)sender {
//first try:
[[[MenuViewController alloc] init].backgroundPlayer pause];
//second try:
[[[MenuViewController alloc] init] soundChanger];} 
```

我想控制每个 ViewController 中的音乐。我期待着你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:18:32.427

您正在 Controller2 中创建一个全新的 MenuViewController

```
[[MenuViewController alloc] init] 
```

处理它的最佳方法是在控制器 2 中设置一个协议，例如

```
@protocol <Controller2Delegate>
-(void) playButtonPressed:(id)self;
@end 
```

然后像这样设置一个委托属性（仍在控制器 2 中）：

```
@property (weak) id <Controller2Delegate> delegate; 
```

然后，回到控制器 1，当您创建控制器 2 时，设置它的委托属性，如下所示：

```
QuizViewController *controller2 = [[QuizViewController alloc] init]];
controller2.delegate = self; 
```

然后在控制器 1 的某处创建 playButtonPressed 方法。在控制器 2 中，您将执行以下操作：

```
[self.delegate playButtonPressed:self]; 
```

这将调用控制器 1 中的方法，您可以在其中暂停后台播放器。

# ruby - Why is 'ruby' not recognized as an internal or external command?

> ID：15822686
> 
> 赞同：2
> 
> 时间：2013-04-04T22:13:21.263
> 
> 标签：ruby, railsinstaller, railsinstaller-windows

Path in user variable is the default path from the installation:

```
C:\RailsInstaller\Git\cmd;C:\RailsInstaller\Ruby1.9.3\bin 
```

Path in system variable is directed to:

```
C:\RailsInstaller\Ruby1.9.3\bin 
```

When I open the Command Prompt with Ruby and Rails, the command prompt says "'ruby' is not recognized as an internal or external command" immediately without any input.

The command prompt worked before. After I re-installed it using various methods due to unsuccessful setup, it got like this.

How can I fix it?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-01-22T21:43:45.553

请在运行 ruby​​ 命令之前重新启动 cmd。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-16T03:45:37.593

在 Windows PC 中：将已安装 ruby​​ 的 bin 路径添加到 PATH 环境变量 1\. 右键单击​​“我的电脑”-> 属性-> 高级系统设置-> 环境变量-> 选择“路径”-> 编辑如下所示的示例路径: D:\Ruby22\bin; 2.修改后重启cmd

参考下图： [Windows 7 和其他 Windows 操作系统中的 Ruby 路径设置](http://i.stack.imgur.com/Ushfq.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:30:24.007

那么， `C:\RailsInstaller\Ruby1.9.3.\bin`你的 ruby​​.exe 是保存在哪里？如果这是正确的，您应该能够通过命令提示符访问 ruby​​ 命令。

当您尝试：`REG QUERY "HKCU\Environment"`在控制台中，是否有类似的输出？：

```
PATH REG_EXPAND_SZ C:\RailsInstaller\Ruby1.9.3.\bin 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-21T09:20:48.943

1.  确保您安装了正确的 x32 或 x64 位版本的 Ruby。

2.  确保您已设置 PATH 环境变量，如果在安装时选择，则应自动完成。

3.  最后确保您重新启动命令提示符。

[![红宝石安装程序](https://i.stack.imgur.com/hy0yb.png)](https://i.stack.imgur.com/hy0yb.png)

# php - PHP Making Simplest query with MySQL using OOP MySQLi

> ID：15822692
> 
> 赞同：-2
> 
> 时间：2013-04-04T22:13:42.713
> 
> 标签：php, mysql, mysqli

I want to know if is possible to do the following in a simpler way:

```
$MyConn = new mysqli($host,$User,$Pass);
$TheKey = "...blablabla";
$QueryConvertedKey = "SELECT PASSWORD('".$TheKey."');";//Or SELECT YEAR(CURRENT_DATE); 
$RsltCK  = $MyConn->query($QueryConvertedKey);

//How to replace the while loop or if?
while ($NewRow = $RsltCK->fetch_row()) { //I think that I don't need to use a while or if for this.
    echo "The Converted Key is:".$NewRow[0];
} 
```

I'm sure the response of my query contains **exactly** one result, so I don't think I need to use a `while` loop or `if` clause.

Is it possible to do this without `while` and `if`, in one line of code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:54:57.877

要以更简单的方式做到这一点，您需要一个构建在 mysqli 之上的抽象库。因此，您将能够使用旨在从查询中直接获取结果的类方法，省略所有不必要的东西

```
$db   = new dbal();
$key  = "...blablabla";
$conv = $db->getOne("SELECT PASSWORD(?s)", $key);
echo "The Converted Key is: $conv"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T22:30:21.100

在 php5.4 中，您可以在创建实例 /object/ 时调用方法；​​-)。如 ：

> $RsltCK = new mysqli($host,$User,$Pass)->query($QueryConvertedKey);

但实际上，这不是 oop。您必须创建一个连接器类/连接器必须是单例的，例如仅实例化一次/，然后将其扩展到您的需要。在大多数情况下，简单意味着不是更少的代码，而是简单。易于理解，易于扩展/扩展。

# java - UnsatisfiedLinkError：库加载但我仍然收到链接错误

> ID：15822694
> 
> 赞同：1
> 
> 时间：2013-04-04T22:13:51.960
> 
> 标签：java, eclipse-plugin, swig, unsatisfiedlinkerror, java-native-library

我有两个 Eclipse 插件：

*   plugin-1：为其他插件提供 .jar 包。（用于 C++ 库的 Java 包装器）此插件是通过单击现有 JAR 档案中的文件->新建->其他->插件创建的。

*   plugin-2：拥有plugin-1的本地库.so（`Bundle-NativeCode`指令在MANIFEST.MF中）并从plugin-1实例化一个类

（我实际上尝试将 .so 放在 plugin-1 中，但我似乎无法加载库，即使在 plugin-1 MANIFEST.MF 中使用 Bundle-NativeCode 指令，在包含 .so 的插件项目之外，所以我想我必须将 .so 与任何使用 plugin-1 的插件捆绑在一起。）

我正在从插件 2 运行 JUnit 测试，它从插件 2 实例化，而插件 2又从插件 1`MyClass`实例化。成功加载本机库并实例化，而不会从本机库的加载或从实例化中引发其他异常。在这种情况下，我没有运行插件——只是 JUnit 测试。`MyLibraryClass``MyClass``MyLibraryClass``UnsatisfiedLinkError``MyLibraryClass`

当我运行 plugin-2 （使用产品配置）并实例化`MyClass`时，本机库加载正常，但我得到一个`UnsatisifiedLinkError`when `MyClass`instantiates `MyLibraryClass`。[在这种情况下，我相信该库是根据我使用发布如何获取已加载的 JNI 库列表中](https://stackoverflow.com/questions/1007861/how-do-i-get-a-list-of-jni-libraries-which-are-loaded/1008631#1008631)描述的类获得的输出加载的？

注意：我使用的是 Eclipse 3.6.1。

这是一个代码示例，它显示了我正在尝试做的事情的本质： package com.mylibrary;

```
import com.external_library.MyLibraryClass;

public class MyClass {

    public static void loadLibrary() {
      // Without Bundle-NativeCode in MANIFEST.MF I get 
      // "java.lang.UnsatisfiedLinkError: no mylibrary_java in java.library.path"
      System.loadLibrary("mylibrary_java"); // Loads libmylibrary_java.so. 

      // Works fine from JUnit Test
      // When I run the plugin, I get an UnsatisfiedLinkError:
      // "java.lang.UnsatisfiedLinkError: 
      // com.external_library.MyLibrary_javaJNI.new_MyLibraryClass__SWIG_3()J"
      MyLibraryClass instance = new MyLibraryClass(); 

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:10:33.380

我已经复制了你的设置，我得到了同样的例外。

**该问题可以通过以下方式解决：**

*   将本机库添加到 plugin-1
*   将 Bundle-NativeCode 指令添加到插件 1 的清单中
*   在 plugins-1 的 Activator 的静态构造函数中加载库（可以自己写一个添加到插件中）

**其他一些可能的错误来源：** 请注意，对于任何具有本机绑定的类，永远不要更改包路径、类名和方法签名。否则 JNI 将无法找到本地对应项，并且您会收到 UnsatisfiedLinkError。在您的导入指令中，您指定了以下类名 com.external_library.MyLibraryClass，但您的错误消息具有不同的类名 com.external_library.MyLibrary_javaJNI。检查这些错误来源。

**一些额外的解释：** 与 JUnit 插件测试相比，JUnit 测试不启动 OSGi 环境。因此，您有一个带有普通 JUnit 测试的普通 Java 应用程序。如果您的本机库和您的应用程序包含在同一个文件夹（顶级）中，本机库将自动在 Windows 上找到。如果在 UNIX 系统上也是如此，那么这就是您的 JUnit 测试成功的原因。如果它位于不同的文件夹中，则必须为普通 Java 应用程序指定 Java 库路径。

由 MrMas 编辑：通过将 .jar 文件添加到 plugin-2 来修改 plugin-2，使其不依赖于 plugin-1。

1.  将 .jar 文件复制到 plugin-2 中。我把它放在与.so 相同的目录中。
2.  通过以下方式将 jar 添加到项目中：Project->Properties->Libraries->Add Jar
3.  通过 plugin.xml->Runtime->ClassPath section->Add 将 jar 添加到类路径
4.  从 Jar 中导出包（如果下游插件需要它们）
5.  从 plugin.xml->dependencies 选项卡中移除 plugin-1 的依赖

现在您可以使用 System.loadLibrary 加载库，并使用插件内部和另一个插件中的类。

我选择不修改 plugin-1，因为它是从现有 jar 中创建的插件，我无法发现如何添加 Activator。相反，我选择了将 .jar 添加到 plugin-2 的路径。有关其他讨论，请参阅[将 jars 添加到 Eclipse 插件。](https://stackoverflow.com/questions/5744520/adding-jars-to-a-eclipse-plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-27T10:24:48.307

`Bundle-NativeCode`是一个 OSGI 标记。这意味着只有 OSGI 类加载器在使用它。就我而言，我有一个 E4-RCP 应用程序。一个插件包含 Java 类。但是，我将本机代码放入一个片段中。

当加载和查找库时，OSGI 类加载器有一个片段列表（根据所涉及的结构的命名）并检查它们`Bundle-NativeCode`使用的类`NativeCodeFinder`。如果遇到问题，请尝试在相关功能处添加断点。`getNativePath()`返回 OSGIpart 读取的条目。

# c - ld 手动解析多个定义

> ID：15822700
> 
> 赞同：2
> 
> 时间：2013-04-04T22:14:51.270
> 
> 标签：c, ld

我有一个单元测试文件，它是大型框架的一部分。我在测试中使用的一些框架类是模拟版本以返回我测试所需的值。那就是我在自己的c源文件中重新定义了一些框架类。

除了从链接器行中删除框架库之外，有没有办法在 Linux 上强制 ld 使用我自己的框架类对象？我无法真正删除这些库，因为我仍在使用一些未经修改的框架对象。

这是链接错误：

> `MyClass::MyClass' build/Debug/GNU-Linux-x86/tests/tests/my_ut.o:/usr/lib/gcc/x86_64-redhat-linux/4.4.5/../../../../include/c++/4.4.5/exception:62: first defined here ../frameworklib.a(MyClass.o): In function` /usr/lib/gcc/x86_64-redhat-linux/4.4.5/../../../../include/c++/4.4.5/bits/char_traits.h:250: MyClass'的多重定义：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:13:09.697

事实证明，我的 ld 版本在有多个定义的情况下会出现错误，而不管命令行上对象的顺序如何。[-z muldefs](http://www.delorie.com/gnu/docs/binutils/ld_3.html)改变了这种行为。

> ld --version GNU ld 版本 2.20.51.0.2-5.20.el6 20091009 版权所有 2009 Free Software Foundation, Inc.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T23:02:39.977

将包含您自己的框架类的对象或库文件放在命令行上大型框架的库之前`ld`，但在使用它们的对象/库文件之后。如果您希望自己的框架类也被大型框架使用，那么您就不走运了。

错误信息显示符号的第一个解析来自`frameworklib.a`并且重新定义发生在`my_ut.o`. 这表明`frameworklib.a`之前发生`my_ut.o`在`ld`. 然而，定义似乎也来自头文件（C++）是一个复杂的因素。我不是 C++ 专家，但可以想象，通过在不同位置使用不同的包含文件，这两个定义实际上都包含在应用程序中。如果您想否决类定义，您可能应该确保所有出现的类都被否决。如果是这种情况，我建议您花一些时间与同事讨论，以提出一个好的单元测试设计。

# javascript - 在 JavaScript 中，通过条件语句更改 css 的正确语法是什么？

> ID：15822701
> 
> 赞同：2
> 
> 时间：2013-04-04T22:14:55.947
> 
> 标签：javascript, css, syntax

这就是我所拥有的，我知道这是不对的。基本上，我想说的是，“如果名为 3 的 div 的高度是 445，则将背景图像更改为此 jpg。”

```
if ( ".three" == height:"445" ) {".three.style.background-image"= 'url(images/2.jpg)'}; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T22:24:03.443

假设你的 HTML 是这样的：

```
<div class="three" style="height: 445px;">
    <p>Some arbitrary content.</p>
</div> 
```

然后以下将起作用：

```
var elems = document.getElementsByClassName('three');
for (var i = 0, len = elems.length; i < len; i++){
    if (parseInt(elems[i].style.height, 10) == 445) {
        elems[i].style.backgroundImage = 'url(images/2.png)';
    }
} 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/MDa3d/)，为了简单起见，使用`background-color`而不是`background-image`）。

但是，如果您使用 CSS 来设置元素样式：

```
.three {
    height: 445px;
} 
```

然后你需要使用`window.getComputedStyle()`：

```
var elems = document.getElementsByClassName('three');
for (var i = 0, len = elems.length; i < len; i++){
    console.log(parseInt(window.getComputedStyle(elems[i], null).height, 10));
    if (parseInt(window.getComputedStyle(elems[i], null).height, 10) == 445) {
        elems[i].style.backgroundColor = 'red';
    }
} 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/MDa3d/2/)，（使用，如上所述，`background-color`而不是`background=image`）。

如果您要使用 JavaScript 库，则可以稍微简化一下；使用jQuery（例如，虽然我不是特别提倡jQuery，它只是我最熟悉的库），上面可以重写为：

```
$('.three').css('background-image', function(){
    return $(this).height() == 445 ? 'images/2.png' : '';
}); 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/MDa3d/3/)，（再次使用`background-color`代替`background=image`）。

请注意，Internet Explorer 与大多数浏览器的工作方式不同，因为`window.getComputedStyle()`它不可用，`currentStyle()`但是有（但没有 Windows，我无法提供有关如何使用它的建议）。

有关 JavaScript 的指导和参考，我建议（最重要的是）阅读 Mozilla Developer Network 的[JavaScript 文档](https://developer.mozilla.org/en-US/docs/JavaScript)。

参考：

*   [`currentStyle`对象](http://msdn.microsoft.com/en-us/library/ie/ms535231%28v=vs.85%29.aspx)。
*   [`Element.style`](https://developer.mozilla.org/en-US/docs/DOM/element.style).
*   [`for () {/*...*/}`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for).
*   [jQuery 库](http://www.jquery.com/)。
*   [`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt).
*   [`window.getComputedStyle()`](https://developer.mozilla.org/en/docs/DOM/window.getComputedStyle).

# .net - Log4net html 格式化的 SmtpAppender

> ID：15822709
> 
> 赞同：7
> 
> 时间：2013-04-04T22:16:14.213
> 
> 标签：.net, logging, smtp, log4net

我正在尝试以 HTML 格式向我发送电子邮件。

```
 <appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">

  <to value="zzz@zzz.com"/>
  <from value="do_not_reply@zz.com"/>
  <subject value="zzzAdmin Logged Event" />
  <smtpHost value="email.zzz.com"/>
  <bufferSize value="1"/>
  <lossy value="false"/>
  <authentication value="Basic" /> 
```

我将错误记录为 html 格式的文本，但电子邮件客户端将 HTML 呈现为纯文本。

如何告诉 SMTPAppender 向电子邮件添加 HTML 类型，以便客户端将消息呈现为 HTML。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-26T17:32:12.873

由于 log4net 到目前为止不支持消息正文中的 HTML 格式，我编写了自己的附加程序：

```
using System;
using System.Net.Mail;
using log4net.Appender;

namespace log4net.Appender
{
    public class ExtendedSmtpAppender : SmtpAppender
    {
        public bool IsBodyHtml { get; set; }

        protected override void SendEmail(string messageBody)
        {
            // .NET 2.0 has a new API for SMTP email System.Net.Mail
            // This API supports credentials and multiple hosts correctly.
            // The old API is deprecated.

            // Create and configure the smtp client
            SmtpClient smtpClient = new SmtpClient();
            if (!String.IsNullOrEmpty(SmtpHost))
            {
                smtpClient.Host = SmtpHost;
            }
            smtpClient.Port = Port;
            smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;
            smtpClient.EnableSsl = EnableSsl;

            if (Authentication == SmtpAuthentication.Basic)
            {
                // Perform basic authentication
                smtpClient.Credentials = new System.Net.NetworkCredential(Username, Password);
            }
            else if (Authentication == SmtpAuthentication.Ntlm)
            {
                // Perform integrated authentication (NTLM)
                smtpClient.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials;
            }

            using (MailMessage mailMessage = new MailMessage())
            {
                mailMessage.IsBodyHtml = IsBodyHtml;
                mailMessage.Body = messageBody;
                //mailMessage.BodyEncoding = BodyEncoding;
                mailMessage.From = new MailAddress(From);
                mailMessage.To.Add(To);
                if (!String.IsNullOrEmpty(Cc))
                {
                    mailMessage.CC.Add(Cc);
                }
                if (!String.IsNullOrEmpty(Bcc))
                {
                    mailMessage.Bcc.Add(Bcc);
                }
                if (!String.IsNullOrEmpty(ReplyTo))
                {
                    // .NET 4.0 warning CS0618: 'System.Net.Mail.MailMessage.ReplyTo' is obsolete:
                    // 'ReplyTo is obsoleted for this type.  Please use ReplyToList instead which can accept multiple addresses. http://go.microsoft.com/fwlink/?linkid=14202'
#if !FRAMEWORK_4_0_OR_ABOVE
                    mailMessage.ReplyTo = new MailAddress(ReplyTo);
#else
                    mailMessage.ReplyToList.Add(new MailAddress(m_replyTo));
#endif
                }
                mailMessage.Subject = Subject;
                //mailMessage.SubjectEncoding = m_subjectEncoding;
                mailMessage.Priority = Priority;

                // TODO: Consider using SendAsync to send the message without blocking. This would be a change in
                // behaviour compared to .NET 1.x. We would need a SendCompletedCallback to log errors.
                smtpClient.Send(mailMessage);
            }
        }
    }
} 
```

要在 log4net 配置中使用此附加程序，只需替换标准 SmtpAppender 定义的命名空间和类名并添加 isBodyHtml 选项，如下所示：

```
<appender name="SmtpAppender" type="log4net.Appender.ExtendedSmtpAppender">
    ...
    <isBodyHtml value="true" />
    ...
</appender> 
```

SendEmail 方法体源取自最新版本的标准 log4net 的 SmtpAppender。我只删除了旧的框架版本支持的东西并添加了这个字符串：

```
mailMessage.IsBodyHtml = IsBodyHtml; 
```

您可以在[此处获取](https://github.com/apache/logging-log4net/blob/master/src/Appender/SmtpAppender.cs)[标准 log4net 的`SmtpAppender`](https://github.com/apache/logging-log4net/blob/master/src/Appender/SmtpAppender.cs)最新版本。

**更新：**
下面是一个示例配置（受[这些](https://logging.apache.org/log4net/release/config-examples.html)示例的启发）：

```
<log4net>
  <!-- SmtpExAppender is set to be our ExtendedSmtpAppender -->
  <appender name="SmtpExAppender" type="log4net.Appender.ExtendedSmtpAppender">
    <to value="to@domain.com" />
    <from value="from@domain.com" />
    <subject value="test logging message" />
    <isBodyHtml value="true" />
    <smtpHost value="SMTPServer.domain.com" />
    <bufferSize value="512" />
    <lossy value="true" />
    <evaluator type="log4net.Core.LevelEvaluator">
      <threshold value="WARN"/>
    </evaluator>
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%newline%date [%thread] %-5level %logger [%property{NDC}] - %message%newline%newline%newline" />
    </layout>
  </appender>

  <!-- Set root logger level to DEBUG and its only appender to SmtpExAppender -->
  <root>
    <level value="DEBUG" />
    <appender-ref ref="SmtpExAppender" />
  </root>
</log4net> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T10:07:43.997

内置的 SmtpAppender 不支持此功能，因此您需要滚动自己的附加程序。

# macos - 在 Mac OSX Lion 中，如何使用 sed 将多个空格替换为单个空格？

> ID：15822711
> 
> 赞同：2
> 
> 时间：2013-04-04T22:16:37.717
> 
> 标签：macos, sed, osx-lion

朋友、同事、油嘴滑舌的知情人，以及受人尊敬的《最屈辱的职业》的受害者，

当尝试在 Max OSX 中做简单的 UNIXy 事情时，我正遭受着一种独特的疲劳。有人能告诉我如何使用 sed（不是 awk，不是 perl，除了 sed 以外的任何东西）来获取包含以下内容的 file.txt：

```
Oh         my I         have Mac                 fatigue 
```

让它看起来像这样：

```
Oh my I have Mac fatigue 
```

如果您真的在 Mac OSX Lion 上执行此操作，非常感谢您。（编辑：不是Mountain Lion，也不是不同的操作系统）。我只是花了很长时间在谷歌上搜索一般回答 linux 或 UNIX 的人，可悲的是，这并没有多大帮助。

我在标准模式匹配的幸福、被遗忘的日子里尝试了很多东西，那时人们可以喋喋不休地说出 UNIXy 命令，瞧！他们会表现：

```
cat file.txt | sed 's/ */ /g'        - O h m y I h a v e M a c f a t i g u e
cat file.txt | sed 's/ \+/ /g'       - no effect
cat file.txt | sed 's/\s\+/ /g'      - no effect
cat file.txt | sed -E -e 's/ */ /g'  - O h m y I h a v e M a c f a t i g u e 
```

告诉我在 linux 机器上使用 sed 会让我微笑，但不会得到支持 :) 在此先感谢。不知道如果没有 StackOverflow 我会做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T22:20:37.440

这有效（在股票 OS X 10.8.3 上测试）：

```
 cat file.txt | sed -e "s/  */ /g" 
```

（注意星号前有**两个**空格）

或摆脱[cat 的无用使用](https://en.wikipedia.org/wiki/Cat_%28Unix%29#Useless_use_of_cat)：

```
 sed -e "s/  */ /g" < file.txt 
```

# sage - 在 SAGE 笔记本中显示多个图形

> ID：15822723
> 
> 赞同：1
> 
> 时间：2013-04-04T22:17:42.297
> 
> 标签：sage

我想在笔记本中显示几个图，一个接一个。如果我只有一个图，我通常可以使用函数 sum() 来显示它，但是如果我在 sum() 之后添加其他内容，那么图就不会显示。所以，例如，我想通过在里面做一段时间来一个接一个地显示几个图，但这不起作用。它没有显示任何情节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:43:27.423

另一种选择是，如果您有多个要单独显示的图`p1`, `p2`, `p3`, , 是`p4`

```
graphics_array([[p1, p2], [p3, p4]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T23:10:15.520

解决方案是使用 show() 函数，例如

```
show(sum(...)) 
```

# ios - 带有 facebook iOS 6 的意见/评论系统

> ID：15822724
> 
> 赞同：2
> 
> 时间：2013-04-04T22:17:42.613
> 
> 标签：ios, facebook, facebook-comments

我正在开发 iOS 6.1 上的旅游指南。我有一些酒店或旅馆的部分。

我有一个 Facebook 登录系统。我希望用户可以在一个框中发布他们关于特定酒店的意见。

那么，最好的选择是什么？

1.  我可以用 Facebook 帐户发布它，并显示有关该酒店的所有评论吗？是否可以？如何？（会很好）
2.  我必须将用户 Facebook 名称保存在数据库的字段中，然后将所有评论保存在数据库中以加载它们？

**编辑：**

我做了一个设计来举例说明： ![在此处输入图像描述](https://i.stack.imgur.com/f4p5N.png)

**编辑 2：** 我将给予另一个赏金，因为我认为有最好的解决方案，我想获得完成这个系统的所有步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T02:34:06.300

**基于插件的解决方案：**

看起来 facebook 为 iOS 发布了一个评论插件：

[https://www.facebook.com/notes/facebook-media/bringing-facebook-comments-to-mobile/306485919386904](https://stackoverflow.com/questions/7343156/how-to-display-facebook-fan-wall-in-iphone-app)

这个人创建了一个基于内联 UIWebView 和一个小技巧的解决方案：

[http://suhinini.me/2011/05/24/embedding-facebook-social-comments-plugin-to-an-ios-application/](http://suhinini.me/2011/05/24/embedding-facebook-social-comments-plugin-to-an-ios-application/)

* * *

**基于粉丝页面的解决方案：**

根据[这篇 SO 帖子](https://stackoverflow.com/questions/7343156/how-to-display-facebook-fan-wall-in-iphone-app)，您可以从[https](https://graph.facebook.com/cocacola/statuses?access_token=) ://graph.facebook.com/cocacola/statuses?access_token= ... 将返回的 JSON 解析为显示它们。

**如果酒店没有粉丝页面：**

根据问题，您的 Facebook 登录有效。

使用 Hotel_ID 和用户 Facebook_ID 将评论保存到数据库，这样您就可以在您的应用程序中显示该评论。

提示一个简单的 Facebook“分享”窗口，如果他愿意，他可以把它贴在墙上。

希望这可以帮助！:D

# php - 如何将 2 个 php 文件中的数据提交到 mySQL

> ID：15822725
> 
> 赞同：0
> 
> 时间：2013-04-04T22:17:45.407
> 
> 标签：php, mysql, ajax, forms

我正在尝试将 p1.php 中的数据与 p2.php 中的数据结合起来，并**在 p1.php 中**一起提交给 mySQL ：

```
$.post("p2.php", $("#myForm1").serialize()); 
```

然后直接到 p2.​​php ：

```
location.href='p2.php'; 
```

在**p2.php 中**，我还有一个 ID 为 myForm2 的表单：

```
$.post("p2.php", $("#myForm2").serialize()); 
```

然后在 p2.php 中，我将数据插入到 mySQL，但结果是我无法真正拥有来自 myForm1（位于 p1.php 中）的数据，

我该怎么办？？？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:24:46.693

将数据保存在会话数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:24:25.273

从 myFOrm1 获取序列化数据，并将其放入 myForm2 的隐藏字段中，然后在提交 myForm2 时，您将从该表单中获取所有内容 + 来自第一个表单的数据。您可以将 myForm1 中的序列化数据设置为 $_SESSION 或 smth，因此无法从前端访问它。然后，您可以随时检索该数据。

# wordpress - 如何为客户制作完全可定制的主题

> ID：15822726
> 
> 赞同：0
> 
> 时间：2013-04-04T22:18:01.460
> 
> 标签：wordpress, themes, client

我想知道是否有某种方法可以为客户从头开始制作主题并使其完全可定制，或者至少尽可能可定制。

如果他们想更新多种形式的内容，而不仅仅是主要内容区域怎么办。例如，如果他们想更新左侧的 div 作为主要内容，然后右侧的 div 全部是“新闻”。

我正在尝试为具有零编码知识的人做这件事。

它需要插件吗？如果有，有哪些？

我知道这是一个菜鸟问题，但我很难找到一个直接的答案。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:00:44.657

我对（几乎）所有网站内容使用高级自定义字段插件。--> advancedcustomfields.com

这允许您通过文本框、文本区域和其他控件使帖子/页面条目更加精确，而不是让它们使用令人生畏的所见即所得编辑器进行 html/格式化。

使用 ACF 插件，您必须创建帖子/页面模板，并通过在特定 div 上回显每个字段来从用户友好的数据输入页面中提取数据，或者您也可以使用循环和检查是否使它们更具动态性-空的条件。

这里 - [http://pastebin.com/710U8T7R](http://pastebin.com/710U8T7R) - 我的页面模板示例显示了如何动态生成 div 表，如果用户没有填写字段则省略字段以及其他错误检查过程。

* * *

我也有通过用户友好的 ACF 输入来操作主题布局的想法，只是我还没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:27:32.317

我相信您可以使用小部件来完成此操作：

[http://codex.wordpress.org/WordPress_Widgets](http://codex.wordpress.org/WordPress_Widgets)

您可以在左侧有一个小部件，在右侧有一个独立于主页内容的小部件。您还可以创建页面模板：

[http://codex.wordpress.org/Pages#Page_Templates](http://codex.wordpress.org/Pages#Page_Templates)

这将使您在逐页布局方面具有更大的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T23:11:18.257

我强烈建议您看一下`http://wordpress.org/`并在谷歌上搜索一下，该网站上的 Wordpress 下载还包含非常基本的主题，可以添加小部件和可以使用插件，具体取决于您要做什么或使用该网站，以及是否有一个可用的，请记住，如果您不自己或与第 3 方一起主持，那么您可以做的事情相当有限，您最好为一个主题付费，因为您无法编辑它，所以我建议查看此站点以及如何设置 Web 服务器（WAMP - 取决于您的操作系统）。

如果他们满足您的需要，您可以使用免费主题，或者访问`http://themeforest.net/category/wordpress`并从 100 个更深入的图形和编码方面的主题中购买..

.. 一切都取决于最终结果，这将帮助您找到需要从哪里开始.. 您希望网站做什么？可以收款吗？是博客吗？个人投资组合.. wordpress 的好处是您可以从您的博客中收取费用，在您的电子商务网站中拥有一个博客.. 让我知道该网站将用于什么，我会提出一些建议。

我不得不说我认为 Wordpress 仪表板令人印象深刻，您可以登录、创建帖子、页面、添加用户帐户以便他们也可以登录和发布，而无需任何编码知识.. 甚至触摸/看到它就此而言，因此，如果您说每 5 分钟写一次博客并拥有 20 年的存档，那么考虑到您不知道 HTML 的含义，它的规模确实很好:)！- 那不是针对你的！希望这可以帮助。

# javascript - 修改自执行函数中的参数

> ID：15822727
> 
> 赞同：2
> 
> 时间：2013-04-04T22:18:01.537
> 
> 标签：javascript, pass-by-reference, anonymous-function, self-executing-function

我希望能够修改传递给自执行函数的参数。

这是一些示例代码：

```
var test = 'start';
(function (t) {t = 'end'} )(test);
alert(test) //alerts 'test' 
```

这[是一个小提琴](http://jsfiddle.net/MGurS/)。变量`test`没有改变。我怎样才能改变它，就像通过引用一样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T22:19:56.883

传入an `object`，它是*pass-by-reference*：

```
var test = {
    message: 'start'
};
(function (t) {t.message = 'end'} )(test);
alert(test.message) 
```

仅供参考，`Array`也是*pass-by-reference*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T22:20:09.080

你不能在 JavaScript 中做到这一点（嗯，**确切地说）。**但是，您可以执行以下操作：

```
 var testBox = { test: "hello" };
 (function(tb) { tb.test = "goodbye"; })(testBox);
 alert(testBox.test); // "goodbye" 
```

JavaScript 在函数调用中只有传值；只有一种极端的方法可以为变量（`arguments`对象和参数）之类的东西取别名，而且它很奇怪，令人无趣。

也就是说，对象属性（通常）是可变的，因此您可以在需要函数来修改值的情况下传递对象引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T22:21:18.483

你不能这样做。

您能做的最好的事情就是传入一个对象，然后更新该对象。

```
var test = { state: 'start' };
(function (t) {t.state = 'end'} )(test);
alert(test.state); // 'end' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-03T13:06:11.920

您只是将测试变量的值作为参数传递给函数。更改参数的值后，您需要分配回测试变量。

```
var test = 'start';
(function (t){t = 'end'; test = t;} )(test);
alert(test) //alerts 'test' 
```

或者

```
var myObject = {test: "start"};
var myFunc = function (theObject){
    theObject.test = 'end';
}(myObject);
alert(myObject.test); 
```

# python - xhtml2pdf 和 django，不同的文档大小

> ID：15822730
> 
> 赞同：3
> 
> 时间：2013-04-04T22:18:05.617
> 
> 标签：python, django, xhtml2pdf

我正在尝试构建一个将自身呈现为 PDF 的视图。每次访问视图时，我都会遇到一些随机呈现的文档/表格的结构问题。跟踪错误，我开始渲染完全静态的 html 代码，并发现 -**每个请求，生成的文档大小都是不同的**。

```
 template = get_template(self.get_report_template_name())
    html = template.render(Context({}))
    strobj = StringIO.StringIO()
    pisa.CreatePDF(html.encode("UTF-8"), strobj, encoding='UTF-8')
    return HttpResponse('len: %d' % strobj.len); 
```

如您所见，每次渲染相同的模板时，上下文为空，以确保没有任何变化。*无论如何，模板根本不使用 django 模板语言*

每次刷新页面时，上面的代码都会返回一些不同的结果

长度：2573，长度：2595 长度：2234，长度：2601，长度：2244，长度：2632，

等等......（一些值重复多次）。

保存和显示这些文档时 - 它们包含“损坏”的页面结构，例如不正确显示的表格单元格或其他内容。其中只有一个看起来是正确的。

有什么建议可以在哪里找到问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T12:36:16.367

我也遇到过同样的问题。试图修复它几个小时......我发现的唯一解决方案是将 xhtml2pdf 降级到版本 0.0.4。

# java - 无法在 IDEA IntelliJ 12 中调试 Java 项目

> ID：15822732
> 
> 赞同：6
> 
> 时间：2013-04-04T22:18:22.477
> 
> 标签：java, debugging, intellij-idea, tomcat7, catalina

在带有 Tomcat7 和 IDEA IntelliJ 12 的 OSX 上。

运行配置工作正常。调试配置抱怨：

```
 /usr/local/Cellar/tomcat/7.0.37/libexec/bin/catalina.sh run
    Error occurred during initialization of VM
    agent library failed to init: jdwp
    ERROR: Cannot load this JVM TI agent twice, check your java command line for duplicate jdwp options.
    Disconnected from server 
```

我从 11 年找到[了这篇](https://stackoverflow.com/questions/5993359/running-project-from-intellij-idea)文章，但没有帮助。

关于“一旦我从系统变量中删除它（在 IDEA 中它是只读的）问题已修复”的注释是有道理的。所以我尝试从 catalina.sh 中删除整个块

```
 if [ -z "$JPDA_OPTS" ]; then
    JPDA_OPTS="-agentlib:jdwp=transport=$JPDA_TRANSPORT,address=$JPDA_ADDRESS,server=y,suspend=$JPDA_SUSPEND"
    fi 
```

没有帮助。任何帮助将不胜感激。谢谢！

java运行命令：

```
 + eval exec '"/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java"' '"-Djava.util.logging.config.file=/Users/ryan/Library/Caches/IntelliJIdea12/tomcat/Unnamed_secure_post_3/conf/logging.properties"' -Xdebug -Xrunjdwp:transport=dt_socket,address=127.0.0.1:65523,suspend=y,server=n -Dcom.sun.management.jmxremote= -Dcom.sun.management.jmxremote.port=1099 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -Djava.rmi.server.hostname=127.0.0.1 -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000 -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager '-Djava.endorsed.dirs="/usr/local/Cellar/tomcat/7.0.37/libexec/endorsed"' -classpath '"/usr/local/Cellar/tomcat/7.0.37/libexec/bin/bootstrap.jar:/usr/local/Cellar/tomcat/7.0.37/libexec/bin/tomcat-juli.jar"' '-Dcatalina.base="/Users/ryan/Library/Caches/IntelliJIdea12/tomcat/Unnamed_secure_post_3"' '-Dcatalina.home="/usr/local/Cellar/tomcat/7.0.37/libexec"' '-Djava.io.tmpdir="/usr/local/Cellar/tomcat/7.0.37/libexec/temp"' org.apache.catalina.startup.Bootstrap start 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:45:16.110

问题是 catalina.sh 调用 setenv.sh 设置 JAVA_OPTS 如下：

```
 JAVA_OPTS="$JAVA_OPTS -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000" 
```

我不知道这个 setenv.sh 是从哪里来的，因为同事的自制安装的 tomcat 没有这个文件。

目前，我已将 IntelliJ 调试配置为使用 catalina_idea_debug.sh，它只是 catalina.sh 的副本减去对 setenv.sh 的调用。现在工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-19T14:30:42.453

IntelliJ 和 JBoss 也有类似的问题。对我来说，在包含 jdwp 配置的standalone.conf 中指定了 JAVA_OPTS。对此发表评论使我能够从 IntelliJ 进行调试。

也许这有助于其他人搜索这个短语，因为互联网上没有太多信息。

# objective-c - 如何访问 NSArray 中的奇数和偶数对象

> ID：15822740
> 
> 赞同：2
> 
> 时间：2013-04-04T22:19:58.123
> 
> 标签：objective-c, nsarray

我有一个 NSArray，我想在其中访问 NSArray 上的奇数和偶数对象，因为它们彼此持有不同的值。

实际上，这就是我目前正在做的一切

```
- (void)splitArray:(NSArray)array {
   for (id object in array) { // this itterates my array
      // do stuff in here
   }
} 
```

我需要弄清楚如何捕捉偶数或奇数的物体......我在想像

```
- (void)splitArray:(NSArray)array {
   int i = 1;
   for (id object in array) { // this itterates my array
      if (i == even) {
        // do stuff here
      }
      else if (i == odd) {
       // do stuff here
      }
     i++
   }
} 
```

只是我不知道在`if ()`

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T22:42:25.027

要确定整数是偶数还是奇数，请使用模`%`运算符。如果`index % 2 == 0`是偶数，则为奇数。

您可以使用`enumerateObjectsUsingBlock:`循环遍历您的数组，而无需单独维护索引。

```
- (void)splitArray:(NSArray *)array {
    [array enumerateObjectsUsingBlock:^(id obj, NSUInteger index, BOOL *stop) {
        if (index % 2 == 0) {
            // even stuff here
        } else {
            // odd stuff here
        }
     }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:34:15.040

如前所述，要么设置`i`为零并在循环中递增它，`for`要么只使用带有新 NSArray 语法的普通`for`循环（假设您使用的是最新版本的 Xcode）。另请注意，您应该传递一个`NSArray *`，而不是一个`NSArray`：

```
- (void)splitArray:(NSArray*)array {
    for ( int i = 0; i < [array count]; i++ )
    {
        id object = array[i];

        if ( i % 2 == 0 ) {
            // even stuff here
        }
        else {
            //  odd stuff here
        }
    }
} 
```

# java - 使用 Java DB 和 Derby 有什么区别吗？

> ID：15822741
> 
> 赞同：2
> 
> 时间：2013-04-04T22:20:01.840
> 
> 标签：java, eclipse, derby, javadb

我是基于 Java 的数据库的新手。我想从 Java DB 开始，因为它是 JDK 的一部分。我找不到足够的资源来理解：Java DB 和 Apache Derby 是一回事吗？如果是，哪个更容易从 Eclipse 中使用？它仅仅是基于命令行的数据库系统吗？

我尝试遵循 Java DB 的官方入门指南，上面写着

> Java DB 产品包括 Derby，无需对底层源代码进行任何修改。

但我无法弄清楚使用它的最佳方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T23:11:41.723

`JavaDB`是`Apache Derby`（某种分叉）的 oracle 支持版本，技术上完全相同的功能（相同的文档）。

> ```
> which one is easier to use from Eclipse? 
> ```

所以与Eclipse部分没有区别。

否则，将[H2](http://www.h2database.com/html/main.html)视为 的最佳替代品`Derby (JavaDB)`，相当[快](http://www.h2database.com/html/performance.html)且[易于](http://www.h2database.com/html/tutorial.html)使用，[FlyWay](http://flywaydb.org/getstarted/)将是作为数据库迁移工具的一个很好的补充（也是一个很好的实践）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T01:47:43.587

作为与 Derby 一起使用的工具，试试 Squirrel：[http ://squirrel-sql.sourceforge.net/](http://squirrel-sql.sourceforge.net/)

这是一个很棒的工具，它与 Derby 配合得很好。

# permissions - SSIS 在执行包期间使用了哪些用户权限？

> ID：15822746
> 
> 赞同：0
> 
> 时间：2013-04-04T22:20:15.403
> 
> 标签：permissions, ssis

SSIS 包包含一个脚本，用于检查目录是否存在。Directory.Exists() 方法返回 false，但我有权以管理员身份访问该文件夹。我如何确定在 SSIS 包执行期间使用了哪些用户权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:35:43.177

这取决于你如何运行它。在 BIDS 中，它是运行它的用户，在 SQL 代理中，它通常是 SQL 代理帐户。在存储过程中，它通常是 SQL Server 帐户。

要确定，请使用 ProcMon 监控 DTEXEC 过程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T23:38:04.727

除了来自@ElectricLlama 的评论之外，您还可以通过代理帐户在不同的凭据集的上下文中执行 SSIS 包。

# c++ - Qt 可检查动作

> ID：15822748
> 
> 赞同：2
> 
> 时间：2013-04-04T22:20:24.750
> 
> 标签：c++, qt, button, action, signals

我正在制作一个富文本编辑器，但我的可检查操作遇到了问题。现在我有：

```
void WordWriteMainWindow::on_actionItalic_toggled(bool arg1)
{
    if(arg1==true)
    {
        ui->textEdit->setFontItalic(true);
    }
    else
    {
        ui->textEdit->setFontItalic(false);
    }
} 
```

在大多数情况下，它都有效。但是，我想这样做，以便仅在您要输入斜体字时检查该操作。当您不以斜体书写时，只有特定的事情会检查操作。示例：如果您正在正常输入并单击斜体区域，您将开始输入斜体，但该操作将被取消选中。或者，如果您突出显示某些内容并单击斜体，然后单击离开到非斜体的某个位置，它将被选中，您将不会输入斜体。

我需要使用信号和插槽吗？或者可能是某种 if-else 阶梯？谢谢你的关心。我期待解决这个烦人的问题。并期待许多未来的道路颠簸，因为在保存文件等方面会有一些障碍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:42:52.363

首先，您的代码可读性不是很好。为什么不将“bool arg1”替换为更具描述性的内容，例如“bool enabled”甚至“bool italic”？之后，您还可以使该函数成为一个简单的单行函数：

```
void WordWriteMainWindow::on_actionItalic_toggled(bool italic)
{
    ui->textEdit->setFontItalic(italic);
} 
```

转到您的实际问题，是的，必须有“某些东西”将动作状态与`QTextEdit`当前认为的活动状态联系起来——到目前为止，您只指定了相反方向的耦合。QTextEdit 提供您可以连接的[currentCharFormatChanged(const QTextCharFormat &)信号。](http://qt-project.org/doc/qt-4.8/qtextedit.html#currentCharFormatChanged)将您的另一个插槽连接到其中并更新动作检查状态：

```
void WordWriteMainWindow::updateActionStateFromFormat(const QTextCharFormat &f)
{
    ui->yourItalicAction->setChecked(f.fontItalic());
} 
```

当然，您必须将该信号连接到您的插槽。最简单的方法是将其添加到构造函数中：

```
WordWriteMainWindow::WordWriteMainWindow()
{
    // your existing code goes here
    connect(ui->textEdit, SIGNAL(currentTextFormatChanged(QTextCharFormat)), 
                  this, SLOT(updateActionStateFromFormat(QTextCharFormat)));
} 
```

# ruby-on-rails - Rails 使用 has_secure_password 自动生成密码

> ID：15822750
> 
> 赞同：1
> 
> 时间：2013-04-04T22:20:45.207
> 
> 标签：ruby-on-rails, ruby-on-rails-4

我想在 Rails 4.0 应用程序中`User`使用时为 a 自动生成密码`has_secure_password`（注意：这就是为什么没有`attr_accessor`）。

我有一个非常简单的`User`模型：

```
class User < ActiveRecord::Base
  has_secure_password
  validates :email, presence: true
end 
```

我想知道如何`SecureRandom.hex(8)`在`before_save`通话中使用创建密码。我尝试添加`before_save { self.password = SecureRandom.hex(8) }`它的各种版本，但是当我尝试将它保存在 Rails 控制台中时，它说它`password`是空的。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:33:29.233

尝试改用`before_validation`回调。`before_save`之后运行`validate`，因此您的记录将始终无效。

还要考虑检查是否已经设置了密码。否则，您可以在每次更改记录时设置一个新记录。

在此处查找有关[ActiveRecord 回调链](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T19:58:36.767

回调是一个有用的解决方案，但在您添加所需的复杂层时会使测试变得困难。

另一种方法是创建一个位于用户“之上”的类。我不会争辩说这是最好的解决方案，但我发现它很有用。请注意，该类继承自`User`该类：

```
# user_with_default_password.rb
class UserWithDefaultPassword < User
  def initialize(options = {})
    random_password = SecureRandom.hex(8)

    options[:password] = random_password

    # If creating a user with confirmation requirements
    options[:password_confirmation] = random_password

    # Call User.new(options)
    super(options)
  end
end 
```

用法：

```
user = UserWithDefaultPassword.new() # => user.password = "ajfladfjkf..." 
```

这样做的好处是您可以测试 User 和 UserWithDefaultPassword 而无需强制执行通常会减慢测试速度的回调。

此外，如果您想简单地使用`User.new()`而不是`UserWithDefaultPassword.new()`. 它提供了更大的灵活性和更好的测试。

更新：2014-04-21

此外，我建议将用于创建随机密码等的代码提取到一个单独的类中，您可以快速测试（无需加载 Rails 框架）。下面是我最近为执行其中一些简单任务而开设的课程。

```
#==================================================
# Generates random/unique strings/tokens/IDs
# See: http://ruby-doc.org/stdlib-2.0.0/libdoc/securerandom/rdoc/SecureRandom.html
# See: http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-signin_success
#==================================================
class Generator
  require "securerandom"

  # General-purpose encryption using SHA1 instead of bcrypt; faster but LESS SECURE than bcrypt
  # (do not use for extremely sensitive data such as passwords)
  def self.encrypt(value)
    if value.nil? || value.empty?
      ""
    else
      Digest::SHA1.hexdigest(value.to_s)
    end
  end

  # Although a UUID would work as an auto-generated password,
  # it just seems more appropriate to make the password a random
  # string.
  def self.random_password
    SecureRandom.urlsafe_base64(32)
  end

  # Used as a random, unique token
  def self.uuid
    SecureRandom.uuid
  end

  # Returns random number as string for admin 2-step authentication
  def self.verification_code(length)
    value = ""

    if length.nil? || length.zero?
      length = 6
    elsif length > 20
      length = 20
    end

    length.times do |num|
      value += SecureRandom.random_number(10).to_s
    end

    value
  end
end 
```

用法：`Generator.random_password # => "abc123..."`

最大的好处是您可以在不加载 Rails 框架的情况下测试随机密码的创建，从而节省 3-4 秒的加载时间。这（大部分）通过 Rails 4.1 解决，它使用 Spring 预加载您的应用程序进行测试，但如果您不在 Rails 4.1（或使用 Spring gem）上，这是一个更好的解决方案。

# c# - 将 RichTextBlockOverflow 添加到 FlipView

> ID：15822756
> 
> 赞同：1
> 
> 时间：2013-04-04T22:21:01.777
> 
> 标签：c#, xaml, windows-store-apps, richtextblock, flipview

我有一个书籍应用程序，我正在使用`FlipView`控件在用户当前正在阅读的书中任何选定章节的页面之间翻转。

我正在`FlipView`使用以下代码动态创建页面并将它们作为项目添加到控件中：

```
 private void CreateNewFlipPage(RichTextBlockOverflow columnContent, int page)
    {
        var fvItem = new FlipViewItem();
        var grid = GetOverflowGrid();   // Pre-formatted grid with 4 columns (index 0, 2, 4, and 6) and three 30 pixel spacer columns in between (index 1, 3, and 5)

        var overFlow1 = new RichTextBlockOverflow();
        var overFlow2 = new RichTextBlockOverflow();
        var overFlow3 = new RichTextBlockOverflow();
        var overFlow4 = new RichTextBlockOverflow();
        var pageText = new TextBlock
        {
            VerticalAlignment = Windows.UI.Xaml.VerticalAlignment.Bottom,
            Opacity = 0.5,
            FontSize = 18.667,
            Margin = new Thickness(40, 0, 0, 0),
            Foreground = Application.Current.Resources["ApplicationPageTextOppositeBackgroundThemeBrush"] as SolidColorBrush,
            FontFamily = new FontFamily("Global User Interface"),
            Text = "Page " + page
        };

        overFlow4.Margin = new Thickness(0, 0, 0, 40);

        Grid.SetColumn(overFlow1, 0);
        Grid.SetColumn(overFlow2, 2);
        Grid.SetColumn(overFlow3, 4);
        Grid.SetColumn(overFlow4, 6);
        Grid.SetColumn(pageText, 6);

        grid.Children.Add(overFlow1);
        grid.Children.Add(overFlow2);
        grid.Children.Add(overFlow3);
        grid.Children.Add(overFlow4);
        grid.Children.Add(pageText);

        fvItem.Content = grid;
        FlipView.Items.Add(fvItem);

        overFlow1.OverflowContentTarget = columnContent;
        overFlow2.OverflowContentTarget = overFlow1;
        overFlow3.OverflowContentTarget = overFlow2;
        overFlow4.OverflowContentTarget = overFlow3;

        overFlow1.Measure(new Size(grid.ColumnDefinitions[0].ActualWidth, grid.ActualHeight));
        overFlow2.Measure(new Size(grid.ColumnDefinitions[0].ActualWidth, grid.ActualHeight));
        overFlow3.Measure(new Size(grid.ColumnDefinitions[0].ActualWidth, grid.ActualHeight));
        overFlow4.Measure(new Size(grid.ColumnDefinitions[0].ActualWidth, grid.ActualHeight));

        grid.UpdateLayout();

        if (overFlow4.HasOverflowContent)
        {
            CreateNewFlipPage(overFlow4, page++);
        }
    } 
```

一旦 UI 更新，我在我的 Initial UI 方法中调用此代码：

```
...
if (column4Content.HasOverflowContent)
{
    CreateNewFlipPage(column4Content, 2);  // column4Content is a RTBO object
}
... 
```

如果我不调用最后一部分，我会得到第一个完整页面，而没有其他任何内容。
如果我确实调用了最后一部分，我会在第一页上获得前 3 列，并将一个项目添加到`FlipView`，但第二页上没有显示任何文本，并且第 4 列消失了

我没有做什么来显示所有 RTBO 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T18:40:17.333

我认为您也应该**更新**您的 FlipView**布局**。通过这种方式，**HasOverflowContent**属性知道它是否有任何溢出内容并返回它的真值（无论是真还是假）。

```
grid.UpdateLayout();

FlipView.UpdateLayout(); // Add this Line Here

if (column4Content.HasOverflowContent)
{
    CreateNewFlipPage(column4Content, 2);
} 
```

但我对性能表示怀疑。在此处阅读**UpdateLayout()**文档：http:
[//msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.uielement.updatelayout](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.uielement.updatelayout)

> **...布局更新可以由应用程序代码强制执行，而不是使用UpdateLayout**方法依赖内置布局系统行为。但是，通常不建议这样做。它通常是不必要的，如果过度使用会导致性能下降。...

# javascript - 如何在javascript中使用关键字this？

> ID：15822757
> 
> 赞同：-2
> 
> 时间：2013-04-04T13:27:54.670
> 
> 标签：javascript

我是初学者 javascript 学生，我在理解关键字的主要目标`this`以及如何使用它时遇到了问题。

请任何人都可以帮我举个例子。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:32:40.777

*this*关键字是一个保留关键字，通常绑定到一个对象。

当*this*出现在函数体中时，*this*引用的对象通常取决于函数的调用方式。

[在MDN.this](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)上可以找到许多微妙的细节

您将遇到的经常被接受的用法（请注意，情况并非总是如此，具体取决于...上下文）：

*   处理对象方法时，*this*引用当前实例
*   在处理 DOM 事件时，*this*引用事件上下文中的 DOM 元素

# php - 如何在 212 WordPress 主题中设置固定标题？

> ID：15822759
> 
> 赞同：0
> 
> 时间：2013-04-04T22:21:15.040
> 
> 标签：php, css, wordpress

开始创建我自己的 Wordpress 博客后，我一直坚持将我的 Header 固定到位。

我只对 CSS/JavaScript 有过一点了解，所以我在学习的过程中不断改进！我想要实现的大部分目标已经完成，但我只想在添加帖子等之前尝试修复此标题。

在互联网上搜索后，我只能真正找到以下内容并将其添加到我的 style.css 文件中；

```
#masthead {position:fixed; top:0px; margin:auto; z-index:100000; width:100%;} 
```

这现在修复了标题图像和导航，但稍微偏离中心，但我的页面的其余部分现在仍然落后于此。一个问题是 Image 和 Nav 的实际背景是不透明的。请看下面的截图

```
Before code - http://tinypic.com/r/2vxm69t/6
After code - http://tinypic.com/r/34jd2t1/6 
```

我相信我可能需要在我的 header.php 中创建一个单独的“div”，或者以某种方式对其进行修改，但tbh，我不能 100% 确定实际上什么会使这项工作成为可能，因为我以前从未这样做过。理想情况下，我在导航链接下方添加的行显示在添加此代码之前的屏幕截图中，这将指示标题的底部，并且当您滚动时，其余部分将在此下方消失。整个背景将保持白色，并位于页面其余部分的中心，仍然包括顶部的间隙，该间隙与背景相得益彰。

！！我必须为截图道歉，它不是很清楚，但我希望这能说明正在发生的事情并且足够清楚，我会尽快主持这个！

我的 'style.css' 和 'header.php' 的链接如下 - 如果您需要其他任何内容，请告诉我；

```
style.css - http://codepad.org/c4BnqxlF
header.php - http://codepad.org/w4z19VLW 
```

我希望有人可以提供帮助，因为我认为这在我的博客上看起来很棒，然后我可以发布！

* * *

**编辑**

修改后的代码，现在显示正确的对齐和背景，但仍然在标题图像上方显示一个白色部分 - 最好在以下屏幕截图中显示`http://tinypic.com/view.php?pic=126bd7c&s=6`

```
#masthead {background: #FFF;position:fixed; top:0px; height: 350px; z-index:100000; width:960px;} 
#main {margin-top:335px;} 
```

.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:49:16.730

您将不得不调整您的代码以使其适合，但这里有一个示例，说明如何执行我认为您正在尝试实现的目标。

在您的代码中，您需要定义图像 + 导航的背景颜色和高度。之后，您需要为 id="main" 创建一个边距，使其低于其余信息，即图像 + 导航链接的边距顶部。

**更新：**将 Margin-top 添加到 24px

```
#masthead {background: #FFF;position: fixed; top: 0px; height: 350px; z-index: 100000; width: 100%;margin-top: 24px;} 
#main {margin-top:350px;} 
```

参考：http: [//jsfiddle.net/6VcZe/1/](http://jsfiddle.net/6VcZe/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T00:14:41.300

要正确居中对齐标题，您需要为标题 div 定义宽度：'#masthead { width: 900px }`

这将允许自动保证金技术正常工作，即使没有 position 属性。

# math - LabVIEW帮助解释简单的斐波那契数列

> ID：15822760
> 
> 赞同：0
> 
> 时间：2013-04-04T22:21:15.093
> 
> 标签：math, sequence, fibonacci, labview

我有一个涉及斐波那契数列的 LabVIEW 课程的作业，这是确切的问题：

> 创建一个使用 WHILE 循环持续计算斐波那契数列的迭代的 VI，直到 |fib(n-1)/fib(n) - fib(n-2)/fib(n-1)| 的比率。收敛。输入应包括序列的前两个元素和收敛幅度。输出应该是收敛所需的迭代次数。

我看了维基百科，没有帮助。我已经做了一些谷歌搜索，但仍然没有。我不明白斐波那契数列是什么，也不知道如何使其收敛。两个用户输入的元素从何而来，大小如何。我可以编写代码，但我不会编写代码。如果你明白，请给我解释一下。

需要说明的是，我真的不想让你给我代码，只是澄清一下；谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:43:51.650

你可能需要那种风格的东西。尝试将以下 Python 代码转换为 LabVIEW。在 while 循环中使用移位寄存器。：

```
import math
ordofmag = 4
result = 1
n = 0
while result >= ( 10 ** (-ordofmag) ):
  n = n + 1
  if n == 1 or n==2:
    x0 = 1.0     # fib(n)
    x1 = 1.0     # fib(n+1)
    x2 = x1 + x0 # fib(n+2)
    result = math.fabs(x1/x2 - x0/x1)  
  elif n > 2:
    x2 = x1 + x0
    result = math.fabs(x1/x2 - x0/x1)  
    x0 = x1
    x1 = x2
  print int(x1), round(result,ordofmag) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T11:53:38.520

在 while 循环内使用 for 循环。在 for 循环中，放置一个移位寄存器并向移位寄存器添加一个元素。在每个元素上创建一个数字控件。将加法和除法符号放在for循环中，将移位寄存器的两个元素连接到加法符号。在加法符号的另一端，将其连接到右侧对面的移位寄存器，在加法符号线输出后，将其连接到除法符号的顶部连接，您的除法符号的另一个输入部分，将其连接到加法符号的顶部输入。通过这样做，您的加法输出被传递到移位寄存器并围绕循环移回顶部输入，然后顶部输入中的前一个元素将传递到底部元素，传递给加法符号和输出除由previuos 移位的元素现在是当前的顶部输入。加法输出是斐波那契数字，除法符号输出将是您的黄金数字。然后您必须将数字指标和图形放在 for 循环中，使用反馈节点构建数组并将它们初始化并指定要运行的迭代次数，这可以通过在左上角的蓝色 N 上创建一个常量来完成for 循环。然后，while 循环将继续运行，或者如果您想在删除 while 循环后生成它们。任何进一步的帮助电子邮件。希望它会有所帮助，我还不算太晚。这可以通过在 for 循环左上角的蓝色 N 上创建一个常量来完成。然后，while 循环将继续运行，或者如果您想在删除 while 循环后生成它们。任何进一步的帮助电子邮件。希望它会有所帮助，我还不算太晚。这可以通过在 for 循环左上角的蓝色 N 上创建一个常量来完成。然后，while 循环将继续运行，或者如果您想在删除 while 循环后生成它们。任何进一步的帮助电子邮件。希望它会有所帮助，我还不算太晚。

# restsharp - RestSharp - 列表 XmlDeserialize 属性名称映射

> ID：15822771
> 
> 赞同：0
> 
> 时间：2013-04-04T22:22:21.657
> 
> 标签：restsharp

Restshap 仅在我给它一个属性名称“结果”时反序列化我的 XML 并映射到我的 List<BankStatementItemDetail>（我通过查看 response..base..content 找到了这个名称）。

XML 中的相应元素中没有名称“Results”的迹象。如果我在 XML 中使用元素名称 - BankStatementItemDetail（即 List<BankStatementItemDetail> BankStatementItemDetails），它会失败。

在其他情况下，我不得不将“列表”附加到属性名称以使其映射。我不明白 List 属性名称映射。他们是否记录在案，我看到的文件没有提到名为“结果”的属性。

任何人都可以为我阐明规则吗？

**我的结构**

```
public class BankStatementItemList
{
    public double openingBalance;
    public List<=BankStatementItemDetail=> Results { get; set; }
    public class BankStatementItemDetail
    {
        public string Id { get; set; }
        public Fund Fund { get; set; }
        public BankAccount BankAccount { get; set; }
        public DateTime TransactionDate { set; get; }
        public String DebitCreditIndicator { set; get; }
        public String LodgementReference { set; get; }
        // not in the xml
        public Double Debit { set; get; }
        public Double Credit { set; get; }
        public Double Balance { set; get; }
    }
    public class BankAccount
    {
        public string Code { get; set; }
        public string ScopeCode { get; set; }
        public string Description { get; set; }
    }
    public class Fund
    {
        public string Code { get; set; }
        public string ScopeCode { get; set; }
        public string Description { get; set; }
    }
} 
```

一些 XML

```
<BankStatementItemList xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<BankStatementItemDetail Key="95eb97a7-9be4-4d95-be47-ef2113414bf5">...</BankStatementItemDetail>
<BankStatementItemDetail Key="fd414e7f-5f12-4414-94eb-11ab4a6b5f7b">...</BankStatementItemDetail>
<BankStatementItemDetail Key="c7ed29dd-ef4a-4def-a486-60f5c6ac4253"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T15:09:13.353

这就是您进行映射的方式。

```
[XmlElement(ElementName = "Results")]
[SerializeAs(Name = "Results")]
public string BankStatementItemDetail{ get; set; } 
```

# uitableview - 在表格视图中放置搜索栏。选择结果给出错误的详细视图？

> ID：15822774
> 
> 赞同：0
> 
> 时间：2013-04-04T22:22:36.667
> 
> 标签：uitableview, uisearchdisplaycontroller, xcode4.6

我创建了一个包含自定义单元格的 TableView 控制器，并填充了来自 MySQL 数据库的数据。一切都很好。

我添加了一个搜索栏，搜索效果也很好。但是，当我选择搜索结果时，它会将我带到错误的详细视图（例如，我单击“Cookies”并将我发送到“Apples”的详细视图）。我的 .m 文件中是否缺少某些内容？这是我的代码：

**.m**

```
- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        return [searchResults count];

    } else {
        return [Strains count];

    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *strainTableIdentifier = @"StrainTableCell";

    StrainTableCell *cell = (StrainTableCell *)[tableView dequeueReusableCellWithIdentifier:strainTableIdentifier];
    if (cell == nil) 

        cell = [[StrainTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:strainTableIdentifier];

        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"StrainTableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];

    if (tableView == self.searchDisplayController.searchResultsTableView) {

        cell.titleLabel.text = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"Title"];
        cell.descriptionLabel.text = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"Description"];
        cell.ratingLabel.text = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"Rating"];

        NSLog(@"%@", searchResults);
    } else {
        cell.titleLabel.text = [[Strains objectAtIndex:indexPath.row] objectForKey:@"Title"];
         cell.descriptionLabel.text = [[Strains objectAtIndex:indexPath.row] objectForKey:@"Description"];
         cell.ratingLabel.text = [[Strains objectAtIndex:indexPath.row] objectForKey:@"Rating"];

    }

    {

    } 

return cell;

}

- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    NSPredicate *resultPredicate = [NSPredicate 
                                    predicateWithFormat:@"SELF contains[cd] %@",
                                    searchText];

    searchResults = [Strains filteredArrayUsingPredicate:resultPredicate];

}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller 
shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString 
                               scope:[[self.searchDisplayController.searchBar scopeButtonTitles]
                                      objectAtIndex:[self.searchDisplayController.searchBar
                                                     selectedScopeButtonIndex]]];

    return YES;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    StrainDetailViewController *detailViewController = [[StrainDetailViewController alloc]
                                                        initWithNibName:@"StrainDetailViewController" bundle:nil];
    detailViewController.title = [[Strains objectAtIndex:indexPath.row] objectForKey:@"Title"];
    detailViewController.strainDetail = [Strains objectAtIndex:indexPath.row];
              [self.navigationController pushViewController:detailViewController animated:YES];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:50:31.577

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
StrainDetailViewController *detailViewController = [[StrainDetailViewController alloc]                                                 initWithNibName:@"StrainDetailViewController" bundle:nil];
if (self.searchDisplayController.searchResultsTableView) {

      detailViewController.title = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"Title"];
      detailViewController.strainDetail = [searchResults objectAtIndex:indexPath.row];

} else {

     detailViewController.title = [[Strains objectAtIndex:indexPath.row] objectForKey:@"Title"];
     detailViewController.strainDetail = [Strains objectAtIndex:indexPath.row];
}

[self.navigationController pushViewController:detailViewController animated:YES];
} 
```

# ms-access - 如何在导航窗格中隐藏表单？

> ID：15822777
> 
> 赞同：2
> 
> 时间：2013-04-04T22:22:58.430
> 
> 标签：ms-access, ms-access-2010

我正在尝试限制在与表单共享的导航窗格中查看数据表。

我怎么做？我已经转到设计视图和属性表并更改了视图，但我不希望它显示在导航窗格中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:33:31.367

如果要防止表单显示在导航窗格中，可以设置其隐藏属性（在导航窗格中右键单击表单，然后选择查看属性）。除非用户在导航选项中设置了显示隐藏对象，否则它不会显示。

另一种方法是重命名表单，使其名称以*"USy"*开头。在这种情况下，除非用户在导航选项中设置了显示系统对象，否则它将不会显示在导航窗格中。

如果您以后想再次使表单在导航窗格中可见，请同时设置显示隐藏对象和显示系统对象。您可能需要关闭并重新打开导航窗格，然后才能真正显示它。然后在导航窗格中找到它，取消设置隐藏属性或重命名以删除*“USy”* ...取决于您最初隐藏它的方式。

# java - Java 中的 SQLite 连接池 - 锁定数据库

> ID：15822778
> 
> 赞同：3
> 
> 时间：2013-04-04T22:23:00.553
> 
> 标签：java, multithreading, sqlite, connection-pooling

我已经阅读了几个关于多线程环境中 SQLite 的相关主题，但我找不到明确的说法，所以请原谅我再次提出这个话题。

我需要从多个线程访问应用程序的数据库来执行更新语句。数据库本身可以是 SQLite 或 MySQL，这取决于用户的选择。对于 MySQL 处理程序，我使用 tomcat-jdbc 库实现了一个连接池。现在我正在寻找 SQLite 处理程序的最佳方式，因为正常的连接池不应该工作，因为 SQLite 一次只支持一个锁定整个数据库的写入连接。

我应该继续并让所有线程一个接一个地使用相同的连接（通过同步连接？）还是应该使用已经存在的仅包含连接的 tomcat 库创建一个连接池？一个连接的连接池可能会过大吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T22:28:56.480

由于它是单文件嵌入式数据库，池化几乎没有什么好处。

[https://web.archive.org/web/20130410192252/http://sqlite.phxsoftware.com/forums/p/682/3034.aspx](https://web.archive.org/web/20130410192252/http://sqlite.phxsoftware.com/forums/p/682/3034.aspx)

由于原站点已关闭，我将提供摘要：

> 我已经实现了池化并使用池化连接执行了 1000 个命令，并且池化速度更接近单连接速度。

```
Many non-pooled connections : 2875.0 ms
Many pooled connections     :   93.8 ms
Pooled with reset           :  546.9 ms
One Connection              :   46.9 ms 
```

所以共识是池化不是很有好处。

[http://www.sqlite.org/faq.html#q5](http://www.sqlite.org/faq.html#q5)

[http://www.sqlite.org/threadsafe.html](http://www.sqlite.org/threadsafe.html)

# entity-framework - 实体框架代码首先将实体映射到不同的表

> ID：15822781
> 
> 赞同：2
> 
> 时间：2013-04-04T22:23:12.640
> 
> 标签：entity-framework, dictionary, code-first

我有类似下面的课程。我想重用类并将它们保存在不同的表中，首先使用实体​​框架代码。

```
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public bool IsAvailable { get; set; }
    public List<Part> Parts { get; set; }
    public List<Promotion> Promotions { get; set; }
}

public class Field
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Value { get; set; }
}

public class Part
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<Field> Details { get; set; }
}

public class Promotion
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<Field> Details { get; set; }
} 
```

我想以这样的方式映射我的实体，以便生成如下所示的数据库表。

**产品：** ID、名称、IsAvailable

**ProductParts：** ID、名称、ProductId

**ProductPartDetails：** ID、名称、值、ProductPartId

**ProductPromotions：** ID、名称、ProductId

**ProductPromotionDetails：** ID、名称、值、ProductPromotionId

我在这里真正感兴趣的是我希望重用**Field**类并将其存储在不同的表**ProductPartDetails**和**ProductPromotionDetails**中，如上所述。有可能还是我的方法需要改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:19:06.413

你可以——但你需要重新安排一切。

您应该制作多对手动“手动”（定义自定义类，如 ProductPartDetails 等），

为它定义流利的配置

例如（更多伪代码）

```
[ComplexType()]
public class Field
{}
public class ProductPartDetails
{
    public int ProductId { get; set; }
    public int PartId { get; set; }
    public virtual Product Product { get; set; }
    public virtual Part Part { get; set; }
    public Field Field { get; set; }
}
modelBuilder.Entity<ProductPartDetails>()
    .HasKey(x => new { x.ProductId, x.PartId });

modelBuilder.Entity<ProductPartDetails>()
    .HasRequired(i => i.Product)
    .WithMany(u => u.Details)
    .HasForeignKey(i => i.ProductId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<ProductPartDetails>()
    .HasRequired(i => i.Part)
    .WithMany(u => u.Details)
    .HasForeignKey(i => i.PartId)
    .WillCascadeOnDelete(false); 
```

> `Details`现在指向而`ProductPartDetails`不是 .`Field`

...并`Field`作为属性添加到该表中。

制作字段 ComplexType 以便“重用”（仅转换为字段，而不是单独的表格）。两者都是这样的。

例如[，带有附加数据的 EF 代码优先多对多](https://stackoverflow.com/questions/10199158/ef-code-first-many-to-many-with-additional-data/10199455#10199455)

[连接表ASP.Net MVC 3 EF](https://stackoverflow.com/questions/10254677/asp-net-mvc-3-ef-introducing-foreign-key-constraint-on-table-may-cause-cycles-o/10255184#10255184)[中的 Code First Fluent API 和导航属性“在表上引入 FOREIGN KEY 约束可能会导致循环或多个级联路径”](https://stackoverflow.com/questions/10154512/code-first-fluent-api-and-navigation-properties-in-a-join-table/10155439#10155439)

# python - 取消引用外部 ctypes 指针时 Python 崩溃

> ID：15822782
> 
> 赞同：1
> 
> 时间：2013-04-04T22:23:16.360
> 
> 标签：python, windows, ctypes

我正在玩`ctypes`和`ReadProcessMemory`。

我希望能够读取一块内存并将其转换为 ctypes 类型，然后访问正确的值。

目前，当取消引用指针时，这会失败。这是一个最小的例子：

```
# a minimal example
from ctypes import *
import win32api

class Test(Structure):
    _fields_ = [
        ('p', POINTER(c_int)),
        ('pp', POINTER(POINTER(c_int)))
    ]

rpm = windll.kernel32.ReadProcessMemory
PROCESS_ALL_ACCESS = 0x1F0FFF

pid = 10520
addr = 0x409E4260
process = win32api.OpenProcess(PROCESS_ALL_ACCESS, 0, pid)

size = sizeof(Test)
buff = create_string_buffer(size)
bytes_read = c_size_t()

success = rpm(
    process.handle,
    addr,           # where to read from
    buff,    # output
    size,           # how much to read
    byref(bytes_read)
)

if not success:
    print " Error reading memory: " + str(get_last_error())
else:
    test = cast(buff, POINTER(Test)).contents
    print test
    # access pointers
    print test.p
    print test.pp
    # dereference pointers
    print test.p.contents
    print test.pp.contents 
```

最后两行使python崩溃，我认为是因为它试图访问另一个进程的内存。（？）

我编写了一个递归函数，可以通过重复调用 ReadProcessMemory 来取消引用指针，但是这对于复杂的结构来说很笨重。

**我究竟做错了什么？最好的方法是什么？**

# javascript - 替代谷歌分析跟踪代码？

> ID：15822783
> 
> 赞同：0
> 
> 时间：2013-04-04T22:23:26.080
> 
> 标签：javascript, google-analytics

我正在使用以下代码将 Google 分析添加到网站。

问题是......我无权访问源文件，只有（非常旧的）自定义 CMS 中的编辑框。

粘贴`<scripts>`通常可以正常工作，但是他们有一个使用方括号 ( `[`, `]`) 的模板解决方案，而 GA 代码把它搞砸了。

我可以想到两种可能的解决方案：

1.  某种替代语法，因此我可以省略跟踪代码中的括号
2.  包含跟踪代码的完全不同（较旧？）的方法。这存在吗？

**我现有的 GA 代码**

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxxxxx-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:49:13.847

能够在 CMS 之外托管文件，您可以将跟踪代码放在单独的文件中，并将其作为外部 javascript 包含在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:37:22.363

您可以尝试替换 HTML 实体

```
[ = &#91;
] = &#93; 
```

因此，当它们显示在浏览器中时，它们希望能得到正确解释——我以前在模板语言中看到过这种方法可以解决这类问题。

看不到[http://perishablepress.com/3-ways-track-google-analytics/](http://perishablepress.com/3-ways-track-google-analytics/) - 那里记录了一些老式的 GA 脚本选项。干杯本

# python - 将 .py 转换为 .ui 文件

> ID：15822786
> 
> 赞同：6
> 
> 时间：2013-04-04T22:23:52.387
> 
> 标签：python, user-interface, pyqt, pyqt4

我们已经知道我们可以使用 pyuic4 轻松地将 ui 转换为 py。

可以将 .py（仅包含 pyqt ui 相关内容）代码转换回 .ui。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-15T13:40:54.580

我可以举一个例子说明为什么会这样：当你继承了一个项目并且原始开发人员没有将 ui 文件放在存储库中时（只留下了由 pyuic4 生成的文件）。没错，这是一个非常特殊的例子，这也是我试图找到一些东西的原因（不是一个单一的 ui 文件的问题）。

以一种更通用的方式，我可以想象在磁盘故障的情况下，以前的开发人员会发生这种情况。

是的，我完全同意这样的工具不是像pyuic4那样提供的正常东西......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:33:04.200

Qt/PyQt 没有为此提供工具，而且 AFAIK 没有人编写过工具。

很难想象你为什么需要它。只需保留 .ui 文件，永远不要编辑生成的 .py 文件（甚至在运行时动态使用 .ui 文件`uic`），并且您永远不需要反向转换。

`pyuic4`同时，如果您有一些随机的PyQt4 代码生成的 GUI 甚至不是由`.ui`. （事实上​​，您在网上找到的大多数 PyQt 示例都不会以同样的方式做事`pyuic4`，而且很可能任何其他代码生成器也不会以同样的方式做事`pyuic4`。）

# iphone - 应用启动时读取属性列表，关闭时写入的模式

> ID：15822787
> 
> 赞同：0
> 
> 时间：2013-04-04T22:23:53.423
> 
> 标签：iphone, ios, cocoa-touch

当我的应用程序使用属性列表启动时，我需要将少量数据读入数组。在应用程序运行时，此数据可能会根据用户的操作而改变。当应用程序关闭时，我需要将数据写回文件。

从高层次的角度来看，我只是想知道这样做的最佳设计模式是什么？我的第一个直觉是简单地在 中声明一个数组，并在需要时`appDelegate`通过实例访问该数组。`appDelegate`然后最后，他`applicationWillResignActive`：方法将数据写回文件。

但是，有人告诉我在 appDelegate 中声明这样的变量是个坏消息，所以我想知道是否有人可以告诉我实现这一目标的最佳方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T23:25:20.833

这取决于您的应用程序想要对加载的数据做什么？如果您需要访问项目中的任何地方，您可以创建一个[单例模式](http://www.galloway.me.uk/tutorials/singleton-classes/)（例如 SharedData 类），获取静态实例

```
e.g: [SharedData sharedInstance] 
```

当你第一次得到这个实例时，你可以从你的属性文件中加载数据。

你应该创建一个实例方法，例如：

```
- (void) saveData; 
```

并在以下方法中调用它：

```
- (void)applicationWillTerminate:(UIApplication *)application{
   [[SharedData sharedInstance] saveData];
} 
```

和

```
- (void)applicationDidEnterBackground:(UIApplication *)application{
   [[SharedData sharedInstance] saveData];
} 
```

如果您想在按下主页按钮时保存。但是必须保存数据的确切时间取决于应用程序工作流程。最好在修改存储数据的操作之后立即保存（可能使用后台线程）。

# c# - 如何从 C# 调用 C++ API

> ID：15822788
> 
> 赞同：15
> 
> 时间：2013-04-04T22:23:57.957
> 
> 标签：c#, c++, dll, interop, pinvoke

我有一个用 C++ 实现的相当大的系统，我需要与之交互。该系统有一个相当大的 API，许多 C++ DLL。这些 DLL 导出 C++ 类，而不是漂亮的 C 风格 API。我需要从一个新的 C# 项目中使用它们。

据我所知，.NET 有三种与本机软件交互的方式：

1.  P/Invoke - 仅适用于 C API
2.  COM 对象
3.  C++/CLI

所以我理解它的方式，我有相应的三种方法：

1.  用 C 编写一个包装器并用 P/Invoke 调用它。这似乎工作太多了。
2.  用 COM 编写包装器。我不知道该怎么做，除非它非常容易，否则我不愿意学习对我来说似乎是一种垂死的技术。
3.  用 C++/CLI 编写包装器。这似乎是最少的工作，但仍然很多。

我的问题：

1.  首先，我想知道为什么.NET 不允许我简单地“按原样”使用 C++ 类？我假设这是内存管理的问题。如果是的话，我非常愿意编写终结器并实现 IDisposable 。据我所知，C++ 类只是非常花哨的结构，而且由于 P/Invoke 支持结构，以及将结构作为第一个参数的函数，为什么不支持类呢？

2.  其次，假设我真的很懒，而且工作很无聊，乏味，那么使用这些 DLL 的最佳方法是什么？直接从 C# 调用它们的可能性是最好的。如果没有，那么我会喜欢一个自动工具来生产包装器。此外，DLL 可能会改变，可能只是轻微的但仍然，id 而不是被迫手动重新编写包装器。

对于一个非常好的答案，特别是在第一部分，或者一个好的自动工具，我会奖励赏金......

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T08:32:53.830

如果您愿意采取懒惰的方式，我建议您使用工具为您的 C++ 类生成 C# 包装器。当然，生成这种包装器*的*工具是[SWIG](http://www.swig.org/)

[有关更多信息，请参阅我对类似问题](https://stackoverflow.com/questions/13682966/looking-for-tutorial-or-basic-information-to-get-me-started-on-implementing-c-c/13683498#13683498)的旧答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:27:20.767

我理解它的方式，在 C++ 中，类中方法的调用约定非常混乱。在链接器使用的 .LIB 文件级别，函数名称得到“修饰”（参见例如[Name mangling](http://en.wikipedia.org/wiki/Name_mangling)）。此外，与 C# 相比，C++ 的所有不同实现之间的内存中类变量的布局可能都不同，这就是为什么[Interop Marshaling](http://msdn.microsoft.com/en-us/library/eaw10et3.aspx)是一个如此大的话题。所以我的猜测是，微软认为有太多的低级问题，因此太难了，以至于不值得。

我已经使用 P/Invoke 和 COM 对象将我的 C# 链接到 C++，但我没有使用 C++/CLI。多年来我一直在涉足 COM，它非常像它自己的语言。因此，如果您从未做过任何 COM，我认为您是对的，现阶段不值得学习它。如果 C++/CLI 可以让您与对象交互，而不必通过 C 接口压缩所有内容，那么我认为您是对的，这将是最佳途径。

# bash - 计算 C 程序中函数调用的次数

> ID：15822792
> 
> 赞同：1
> 
> 时间：2013-04-04T22:24:16.700
> 
> 标签：bash, sed, awk, grep

给出了交流源程序。确定源中每个已定义函数的调用次数以及调用发生的行。

我能想到的最好的事情是，`grep -c 'function (' code.c` 但这只有在我知道函数名称的情况下才有效，并且它只会提供调用次数（考虑到该文件中没有原型）。不知道还有什么开始，所以任何建议都会得到很好的满足。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T08:19:58.623

`ctags`可以可靠地为您提供函数名称列表，例如

```
$ cat test.c
#include <stdio.h>

void foo(void)
{
    printf ("Hello World!\n");
}

int main(int argc, char *argv[])
{
    foo();
    return 0;
}

$ ctags -x --c-types=f test.c
foo              function      3 test.c           void foo(void)
main             function      8 test.c           int main(int argc, char *argv[]) 
```

这对您开始有帮助吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:26:06.313

从[http://cscope.sourceforge.net/](http://cscope.sourceforge.net/)下载 cscope ( [http://en.wikipedia.org/wiki/Cscope](http://en.wikipedia.org/wiki/Cscope) ) ，然后执行以下操作（检查选项/语法）：

1) 从您的源文件构建数据库（我将其命名为 db.csc）：

```
cscope -b -u -f db.csc *.c *.h .... 
```

2）在数据库中搜索所有函数调用：

```
cscope -d -f db.csc -L -3 '.*' 
```

它会给你一个每个函数的列表+它调用的函数+调用发生的行号。您可能需要阅读手册页并稍微使用选项，因为我上次这样做已经有好几年了。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-04T23:11:42.883

你最好分几步来做。

首先，使用 grep 和 awk 从文件中获取所有函数名称并将其保存在一个临时文件中。就像是：

```
$ grep ^function code.c | awk '{print $2 }' > /tmp/toto 
```

接下来，对于 temp 文件中的每个条目，在 code.c 文件中搜索所有出现的函数名称并获取每个调用的行号。就像是：

```
cat /tmp/toto | while read line; do
grep -n $line code.c
echo total: `grep $line code.c | wc -l` times
done 
```

希望能帮助到你。

# ios - 在用户在 UITextView 中输入内容之前，如何保持“完成”按钮处于禁用状态？

> ID：15822793
> 
> 赞同：3
> 
> 时间：2013-04-04T22:24:20.973
> 
> 标签：ios, objective-c, ios5, ios6, uitextview

如标题所述，如果用户在文本视图中键入内容，则“完成”按钮将启用。但是，如果他们删除了所有内容，它将再次被禁用。对于 UITextField，我只是为它何时更改并检查添加了一个目标，但我看不到 UITextView 的这种方法。

我尝试按如下方式实现委托，但它也不起作用：

```
- (void)textViewDidChange:(UITextView *)textView {
    if ([textView hasText]) {
        self.doneButton.enabled = YES;
    }
    else {
        self.doneButton.enabled = NO;
    }
} 
```

请注意，`viewDidLoad`我将 textview 设置为第一响应者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:29:12.927

您可以使用`UITextViewDelegate`'`– textViewDidChange:`方法，就像您已经拥有的一样。您还必须首先将`textView`的委托属性设置为符合委托协议并实现此方法的类的实例。

通常，您通过在超类名称后面`textView.delegate = self;`添加来设置并遵守 .h 文件中的协议。`<UITextViewDelegate>`

# jquery - 使用查询更改滚动百分比的 CSS

> ID：15822796
> 
> 赞同：2
> 
> 时间：2013-04-04T22:24:37.083
> 
> 标签：jquery, css, navigation, scroll, percentage

我有一个带有固定导航的单页网站。每个部分都设置为窗口高度的 100%。我想在您向下滚动时更改导航中文本的颜色。

到目前为止，我有这段代码，这正是我想要的，除了我需要基于百分比而不是像素数量的滚动。

到处寻找解决方案，任何人都可以帮忙！？

```
$(document).scroll(function(){

    var row = $('.navigation a'), scrollTop = $(this).scrollTop();
    if(scrollTop > 70)
    {   
        row .css({"color":"#333333"});
    }
    else if (scrollTop <= 70)
    {
        row.css({"color":"#d1d0ce"});
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:30:53.417

你试过用 自己计算`$(document).height()`吗？就像是

```
if ((scrollTop / $(document).height()) > 0.7) {
    row.css({"color":"#333333"});
} 
```

也许这也必须优化以尊重视口高度。

```
var docHeight = $(document).height() - $(window).height();
if ((scrollTop * 100 / docHeight) > 70) {
    row.css({"color":"#333333"});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:40:56.473

获取容器高度并使用它来计算高度的百分比

像这样的东西

```
$(document).scroll(function(){
    var percent = 20;
    var height = $(document).height();
    var point = height / 100 * percent;

    var row = $('.navigation a'), scrollTop = $(this).scrollTop();
    if(scrollTop > point)
    {   
        row.css({"color":"#333333"});
    }
    else if (scrollTop <= point)
    {
        row.css({"color":"#ffffff"});
    }
}); 
```

[例子](http://jsfiddle.net/axrwkr/W9wqm)

# jquery - jQuery 需要唯一的文本框问题

> ID：15822800
> 
> 赞同：0
> 
> 时间：2013-04-04T22:24:56.180
> 
> 标签：jquery, forms, each

我有一个包含三个必填字段的小表单。

```
<div class="span5 offset3 well">
  <legend>To begin, please enter the info below</legend>
  <div class="alert alert-error hide" id="error">
    <span>Incorrect Username or Password!</span>
  </div>
        <form accept-charset="UTF-8" action="" method="POST" name="check_form" id="check_form">
    <p>
      <label>Student ID</label>
      <input type="text" id="txtEmplid" placeholder="Student ID" name="txtEmplid" class="span5">
    </p>
    <p>
      <label>Email address</label>
      <input type="text" placeholder="Email address" id="txtEmail" name="txtEmail" class="span5">
    </p>
    <p>
      <label>OR</label>
    </p>
    <p>
      <label>DOB</label>
      <input type="text" placeholder="Date of Birth" id="dob" name="dob" class="span5">
    </p>
    <button type="submit" id="doCheck" name="doCheck" class="btn btn-warning">Submit</button>
    <input type="hidden" value="form-submit" name="form-submit">
  </form>
</div> 
```

本来，这很好。但是，现在我需要对其进行修改，以便用户需要输入 ID 和其他两个中的至少一个。例如。Id 和 DOB 已填写，但 Email 为空白。

最初，我编写了一个小的 jQuery 函数，用于将任何空文本框的背景颜色更改为红色。这是该代码：

```
function doFieldEmpty(input) {

    var ic = 0;
    var $i = input;

    $i.each(function( index, value ) {

        // if empty, add red background class
        if ($(this).val() == '') {

            $(this).addClass('inputerror')
                   .attr('placeholder', 'Required')
                   .val(index);
        } else {

            $(this).removeClass('inputerror');

        }
    });
} 
```

我用这个来称呼它。

```
doFieldEmpty($("#studentid, #email, #dob")); 
```

由于这段代码已经循环通过 jQuery 对象，我有点犹豫是否要编写另一个函数来满足我的需求。

所以我的问题是，我怎样才能修改它两者兼而有之的功能。

我希望我已经对我正在寻找的内容进行了足够详细的解释。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:48:43.813

如果您真的只有 3 个字段并且只是检查您提到的条件，那么您最好用基本的 2 条件检查替换现有代码：

```
function validateFields() {
    $('input').removeClass('inputerror');

    // Check if ID is blank
    if( $('#studentid').val() === '') {
        $('#studentid').addClass('inputerror');
    }

    // Check if both email and dob are blank
    if( $('#email').val() === '' && $('#dob').val() === '' ) {
         $('#email, #dob').addClass('inputerror');   
    }
} 
```

演示：http: [//jsfiddle.net/3X86W/](http://jsfiddle.net/3X86W/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:54:04.177

如果在 for each 循环中传递一个附加参数 minimumRequired 并增加计数呢？

```
function doFieldEmpty(input, minimumRequired) {

var ic = 0;
var $i = input;
var emptyCount = 0;

$i.each(function( index, value ) {

    // if empty, add red background class
    if ($(this).val() == '') {
        emptyCount++;
        if(emptyCount >= minimumRequired){
        $(this).addClass('inputerror')
               .attr('placeholder', 'Required')
               .val(index);
        }
    } else {

        $(this).removeClass('inputerror');

    }
});
} 
```

# android - Android - 通知远程视图更改文本颜色，使其可见

> ID：15822801
> 
> 赞同：1
> 
> 时间：2013-04-04T22:24:56.593
> 
> 标签：android, notifications

我正在编写一个需要在旧版本的 Android 中推送 3 行通知的应用程序，所以我使用的是远程视图。我遇到的问题是远程视图中的文本是黑色的，这对于 Gingerbread 来说是可以的，但在 ICS 和 JellyBean 中，通知栏是黑色的，因此文本不可见。无论系统通知背景颜色是什么，我有什么想法可以让文本可见吗？我应该只有一张图片作为我自己的背景吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:09:34.777

您应该使用`@android:style/TextAppearance.StatusBar.EventContent.Title`通知标题和`@android:style/TextAppearance.StatusBar.EventContent"`通知文本，而不是使用您自己的颜色。这些样式需要 API 级别 9。

# webdriver - Silencing ChromeDriver.exe logging

> ID：15822803
> 
> 赞同：5
> 
> 时间：2013-04-04T22:25:14.420
> 
> 标签：webdriver, watir, watir-webdriver, selenium-chromedriver

I am running ruby unit tests against Chrome using watir-webdriver. Whenever a test is run and chromedriver.exe is launched output similar to below appears:

```
Started ChromeDriver
port=9515
version=26.0.1383.0
log=C:\Home\Server\Test\Watir\web\chromedriver.log
[5468:8796:0404/150755:ERROR:accelerated_surface_win.cc(208)] Reseting D3D device
[5468:8996:0404/150758:ERROR:textfield.h(156)] NOT IMPLEMENTED
[WARNING:..\..\..\..\flash\platform\pepper\pep_module.cpp(63)] SANDBOXED 
```

None of this impacts the correct functioning of the tests, but as one might imagine the appearance of "ERROR" and "WARNING" might be rather confusing to, for example, parsing rules in Jenkins looking for failures. Sure I can get really fancy with regular expression in the parsing rules, but it would be really nice to turn off this verbose and unnecessary logging on the part of chromedriver.exe. I have seen many mentions of this searching for an answer. No one has come up with a solution. Yes, chromedriver possibly has a "--silent" option, but there seems to be no way to pass that to the executable. Code similar to below is supposed to work, but has zero effect as far as I can see. Any ideas?

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile['--cant-make-any-switches-work-here-how-about-you'] = true
browser = Watir::Browser.new :chrome, :profile => profile, :switches => %w[--ignore-certificate-errors --disable-extensions --disable-popup-blocking --disable-translate--allow-file-access] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-28T08:20:00.587

`chromeOptions`用这个设置`key --log-level=3`应该关闭它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T03:37:56.863

这是其他搜索的帮助

查找...`selenium\webdriver\chrome\service.rb` 路径开始可能在您的系统上有所不同

我在传递的参数中添加了“-silent”……但是，这使除错误/警告消息之外的所有内容都静音了。

```
 def initialize(executable_path, port)
      @uri           = URI.parse "http://#{Platform.localhost}:#{port}"
      server_command = [executable_path, " -silent", "--port=#{port}"]

      @process       = ChildProcess.build(*server_command)
      @socket_poller = SocketPoller.new Platform.localhost, port, START_TIMEOUT

      @process.io.inherit! if $DEBUG == true
    end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T19:29:11.437

通过使用 :service_log_path 参数，我能够转移数百甚至数百条显示在黄瓜标准输出中的 chrome 驱动程序日志消息。

```
@browser = Watir::Browser.new :chrome, :service_log_path => 'chromedriver.out' 
```

上面建议的`'-silent'`, or `'--silent'`, or ' `-silent'`or`' --silent'`参数在我添加到`...selenium\webdriver\chrome\service.rb`. 并且不得不调整 gem 本身并不是一个特别可行的解决方案。

我找不到捕获 chromedriver stderr 并将其转移到 null 的地方（更不用说必须在 windows 和 *nix/osx 中处理）

驱动程序应该默认使用不那么冗长的方式。在这种情况下，INFO 过于冗长，因为数百个日志条目会以 INFO 的形式弹出，其中 90% 以上是相同的。

至少 :`service_log_path`论点在大多数情况下都有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-19T04:19:06.977

您可以尝试`-Dwebdriver.chrome.logfile="/dev/null"`和/或`-Dwebdriver.chrome.args="--disable-logging"`运行 java 的选项`selenium-server-standalone-what.ever.jar`

# java - 使用迭代器和删除时出现 ConcurrentModificationException 错误

> ID：15822810
> 
> 赞同：0
> 
> 时间：2013-04-04T22:25:28.587
> 
> 标签：java, iterator

我从以下代码中得到一个 java.util.ConcurrentModificationException ，我可以找到原因。我可以成功地从 csv 文件中读取数据并制作一个名为 course list 的数组列表。然后我需要将我分类到一个数组列表中，其中每个单元格都包含一个相同课程的数组列表（具有相似名称的课程）。但是当我运行它时会生成 ConcurrentModificationException 我不明白为什么......

```
public class CourseLister {
    private static final String DATA = "data\\data.csv";
    File file;
    ArrayList<Course> courseList ; 

    public CourseLister(String filepath) {
        file = new File(filepath);
        courseList = new ArrayList<>();
    }

    public void readFromCsv(){
        // in this method a Csv file is written line by line , create a new object of course with some attribute such as name , number, instructor,... and is added to courseList //}

        }

    public Iterator<Course> getCourseIterator(){
        return courseList.iterator();
    }

    public ArrayList<Course> getCourseList(){
                return courseList;
    }

    public static void main(String [ ] args){

        CourseLister courseLister = new CourseLister(DATA);
        courseLister.readFromCsv();
        CourseFileSorter coursefilesoreter = new CourseFileSorter(courseLister.getCourseIterator());
        ArrayList<Course> curseList = courseLister.getCourseList();
        for (Course course : curseList) {
            System.out.println(course.getSemester());
        }
        System.out.println(curseList.size());
        coursefilesoreter.displayCategorizedList();
    }

} 
```

这是我的 CourefileSorter 类：

```
public class CourseFileSorter {

    Iterator<Course> courseItr ;

    public CourseFileSorter(Iterator<Course> courseItr) {
        this.courseItr = courseItr;
    }

    public ArrayList<ArrayList<Course>> getSourtedLists(){

        Iterator<Course> dissimilarCourseItr = null;
        ArrayList<Course> identicalCourseList = new ArrayList<Course>();
        ArrayList<Course> dissimilarCourseList = new ArrayList<Course>();
        ArrayList<ArrayList<Course>> categorizedCourseList = new ArrayList<ArrayList<Course>>();
        Course firstCourse = null;
        Course currentCourse ;
        if(courseItr.hasNext()){
        while(courseItr.hasNext()){
            firstCourse = courseItr.next();
            identicalCourseList.add(firstCourse);
            while(courseItr.hasNext()){
                currentCourse = courseItr.next();
                if(currentCourse.getCourseName().equals(firstCourse.getCourseName())){
                    identicalCourseList.add(currentCourse);
                    courseItr.remove();                 
                }
                else{
                    dissimilarCourseList.add(currentCourse);
                }
            }
            dissimilarCourseItr = dissimilarCourseList.iterator();
            courseItr = dissimilarCourseItr;
            categorizedCourseList.add(identicalCourseList);         
        }
        return categorizedCourseList;
        }
        else{
            return null;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:31:29.787

1\. 你得到 ConcurrentModificationException 因为：

dissimilarCourseList.add(currentCourse);

courseItr = 不同的CourseItr;

2\. 当你有数组列表时使用迭代器不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:32:12.637

将它们分类为不同的数据结构会容易得多。我看到它`course`有一个`getCourseName()`方法，我假设它会返回一个`String`对象。尝试使用 a`Map<String, List<Course>>`代替。

排序方法如下所示：

```
public Map<String, List<Course>> getSourtedLists(){
    Map<String, List<Course>> result = new HashMap<String, List<Course>>();
    while(courseItr.hasNext()) {
        course next = courseItr.next();
        if (!result.containsKey(next.getCourseName())) {
            result.put(next.getCourseName(), new ArrayList<Course>());
        }
        result.get(next.getCourseName()).add(next);
} 
```

此外，您真的不想调用`courseItr.remove();`This 从基础集合中删除`course`对象，这意味着您计划执行此操作的方式`courseList`将从您的`CourseLister`对象中清空。

# javascript - 解决没有代理的跨域问题

> ID：15822812
> 
> 赞同：0
> 
> 时间：2013-04-04T22:25:30.667
> 
> 标签：javascript, xmlhttprequest

我正在尝试使用 XmlHttpRequest 从 html 页面向服务器进行 Web 服务调用。在不使用代理的情况下解决跨域问题的最简单方法是什么？远程服务器将 XML 作为请求，响应也是 XML。我可以访问服务器 (IIS)。我需要跨域执行 GET 和 POST。这是我迄今为止研究过的——

1.  跨域.xml
2.  CORS
3.  JSONP

跨域仅适用于 Flash 播放器和其他东西吗？对于客户端和服务器来说，CORS 似乎很难实现。JSONP 可以用于 POST 吗？

谢谢你的帮助。

编辑：我正在尝试在智能设备上运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:15:41.430

这取决于您使用的 IIS 版本。

在此 URL，[http](http://enable-cors.org/) ://enable-cors.org/，它们描述了您可以采取的启用跨域访问的解决方案。

例如，从 www.zzz.com 调用数据服务 www.abc.com/Service 可以通过启用跨域协议来完成。

注意配置IIS6和IIS7/8的方法是不同的。

# android - Android IllegalStateException：尝试重新打开已经关闭的对象：SQLiteDatabase

> ID：15822816
> 
> 赞同：2
> 
> 时间：2013-04-04T22:26:25.723
> 
> 标签：android, android-sqlite

我知道有几个像这样的问题，但他们似乎都有不同的方法来解决问题，没有一个解决了我的问题。

我的主要活动工作正常，加载数据库并填充列表视图。然后我调用第二个活动，当我尝试加载列表视图时问题出现了。

`start/stop managingcursor(cursor)`即使它已被弃用，我也尝试过使用，但它并没有解决问题。此外，我尝试在我的主要活动中关闭光标和数据库，然后再触发下一个活动，但这也无济于事。

这两个类都从 ListActivity 扩展并遵循相同的顺序：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);        

    //Open db in writing mode
    MySQLiteHelper.init(this);
    MySQLiteHelper tpdbh =
        new MySQLiteHelper(this, "DB", null, 1);

    SQLiteDatabase db = tpdbh.getWritableDatabase();

    checkLocationAndDownloadData(); //this fires a Asynctask that calls method parseNearbyBranches shown bellow

   //I load the data to the ListView in the postExecute method of the asynctask by calling:
    /*
    Cursor cursor = MysSQLiteHelper.getBranchesNames();
    adapter = new SimpleCursorAdapter(this,
            R.layout.row, cursor, fields, new int[] { R.id.item_text },0);
    setListAdapter(adapter);
    */

    ListView lv = getListView();
    lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
     @Override
        public void onItemClick(AdapterView<?> listView, View view,
            int position, long id) {

         // Get the cursor, positioned to the corresponding row in the result set
         Cursor cursor = (Cursor) listView.getItemAtPosition(position);

       // Get the state's capital from this row in the database.
       String branch_id = cursor.getString(cursor.getColumnIndexOrThrow("branch_id"));

           cursor.close();

        openNextActivity(Integer.parseInt(branch_id));
        }
      });
} 
```

//在另一个文件中：

```
private void parseNearbyBranches(JSONObject jo) throws JSONException
{
 if (   jo.has(jsonTitle) && 
            jo.has("company_id") &&
            jo.has("id")
    ) {
        String branch = jo.getString(jsonTitle);

            MySQLiteHelper tpdbh = MySQLiteHelper.instance;
            SQLiteDatabase db = tpdbh.getWritableDatabase();

            db.execSQL("INSERT INTO Branches (branch_id, name, company_id) " +
                    "VALUES ('" +jo.getInt("id")+"', '" + branch +"', '" +jo.getInt("company_id")+"' )");

            db.close(); //no difference is I comment or uncomment this line

    }
} 
```

在 MySQLiteHelper.java 中：

```
public static Cursor getBranchesNames() {
        // TODO Auto-generated method stub
        String[] columns = new String[] { "_id", "branch_id", "name", "company_id" };
        Cursor c = getReadDb().query(branchesTable, columns, null, null, null, null,
                null);            
        return c;
    } 
```

我的其他活动基本相同：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_branch_surveys);

    //Read branch data from DB
        int companyID = -1;
        MySQLiteHelper.init(this);          

        String [] columns = new String [] {"company_id"};
        String [] args = {Integer.toString(branchID)};
        Cursor c = MySQLiteHelper.getReadDb().query(MySQLiteHelper.branchesTable, columns, "branch_id=?", args, null, null, null); //THIS QUERY WORKS JUST FINE

        if (c.moveToFirst())
            companyID = Integer.parseInt(c.getString(0));
        c.close();

        if( companyID != -1)
        {
            new DownloadTask().execute(Integer.toString(companyID) );
//where the Async task calls something just like NearByBranches shown above(but with different  objects of course)
//And the postExecute sets the listView:
/*  cursor = MySQLiteHelper.getAll();
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.row, cursor, fields, new int[] { R.id.item_text },0);
    setListAdapter(adapter);  
*/
        }

    }
} 
```

在 MySQLiteHelper.java 中：

```
public static Cursor getAll() {
    // TODO Auto-generated method stub
    String[] columns = new String[] { "_id","title", "points" };

//********IT IS IN THIS LINE WHERE I GET THE ERROR:********************
    Cursor c = getReadDb().query(theTable, columns, null, null, null, null,
            null);

    return c;
}

  public static SQLiteDatabase getReadDb() {
        if (null == db) {
            db = instance.getReadableDatabase();
        }
        return db;
    } 
```

我希望你能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:56:13.607

> 我只是尝试在 parseNeabyBranches 的类似方法中评论 db.close 并解决了问题。然而，在 parseNearbyBranches() 中使用 db.close() 时我没有得到同样的错误，你能解释一下为什么吗？

在`parseNearbyBranches()`您创建一个单独的 SQLiteDatabase 对象时：

```
SQLiteDatabase db = tpdbh.getWritableDatabase(); 
```

由于这是与返回的对象不同的对象`getReadDb()`，因此您可以（并且应该）关闭它。基本规则是每次你打电话`getWritableDatabase()`，`getReadableDatable()`你必须有一个匹配的`close()`语句。

# python - Flask mongoengine 分页

> ID：15822818
> 
> 赞同：8
> 
> 时间：2013-04-04T22:26:41.937
> 
> 标签：python, mongodb, flask, mongoengine

我有一个小的 Flask 应用程序，它呈现博客文章：

**视图.py：**

```
class ListView(MethodView):

    def get(self, page=1):
        posts = Post.objects.all()
        return render_template('posts/list.html', posts=posts) 
```

这一切都很好，但我想为`posts`对象添加分页。查看[项目文档](https://github.com/sbook/flask-mongoengine)，我看到有一个分页类。

所以我尝试了这个：

```
class ListView(MethodView):

    def get(self, page=1):
        posts = Post.objects.paginate(page=page, per_page=10)
        return render_template('posts/list.html', posts=posts) 
```

但现在我得到一个错误：

```
TypeError: 'Pagination' object is not iterable 
```

`posts`那么如何在模板中迭代我的呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T10:20:42.173

该`Pagination`对象有一个[`items`列表](https://github.com/MongoEngine/flask-mongoengine/blob/master/flask_mongoengine/pagination.py#L30)，其中将包含 mongoengine 文档对象（在您的情况下为`Post`对象）。可以迭代此列表以显示文档。

例如，在您的模板中：

```
{% for post in posts.items %}
    {{ post.title }}
    {{ post.content }}
{% endfor %} 
```

要获取分页链接的实际页码，请使用[`iter_pages()`](https://github.com/MongoEngine/flask-mongoengine/blob/master/flask_mongoengine/pagination.py#L83)：

```
<div id="pagination-links">
    {% for page in posts.iter_pages() %}
        {{ page }}
    {% endfor %}
</div> 
```

上面的[文档](https://flask-mongoengine.readthedocs.org/en/latest/#custom-queryset)和[github 链接](https://github.com/MongoEngine/flask-mongoengine/blob/master/flask_mongoengine/pagination.py#L83)都有一个更好的分页链接示例：

```
{% macro render_pagination(pagination, endpoint) %}
    <div class=pagination>
        {%- for page in pagination.iter_pages() %}
            {% if page %}
                {% if page != pagination.page %}
                    <a href="{{ url_for(endpoint, page=page) }}">{{ page }}</a>
                {% else %}
                    <strong>{{ page }}</strong>
                {% endif %}
            {% else %}
                <span class=ellipsis>…&lt;/span>
            {% endif %}
        {%- endfor %}
    </div>
{% endmacro %} 
```

# wordpress - 从 HTTP 重定向到 HTTPS 会复制 www

> ID：15822819
> 
> 赞同：2
> 
> 时间：2013-04-04T22:26:42.717
> 
> 标签：wordpress, .htaccess, redirect, ssl, https

我正在尝试将用户重定向到`https://www.example.com`, 当用户尝试`http://example.com`, `www.example.com`,等`https://example.com`时。`http://www.example.com`

为此，我在我的`.htaccess`-file 中使用此代码：

```
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^(.*) https://www.%{SERVER_NAME}/$1 [R,L] 
```

这样做的问题是，当用户输入`www.example.com`or`http://www.example.com`时，用户将被重定向到`https://www.www.example.com`. 换句话说，它复制了 www。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:33:11.863

也许这会起作用：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} (?:www\.)?(.*)  [NC]
RewriteRule ^(.*) https://www.%1/$1 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:29:12.043

你有没有尝试过：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

这使用 apache 来获取主机并且不依赖它进行重定向，并且还将使用 apache 保留请求的 URI。^^（无需使用任何实际匹配的内容`RewriteRule`）

# jquery - 用 jQuery 读取“data-id”属性

> ID：15822820
> 
> 赞同：1
> 
> 时间：2013-04-04T22:26:47.783
> 
> 标签：jquery, html, ajax

我正在尝试使用名为[jRating](http://demos.myjqueryplugins.com/jrating/)的漂亮插件，当我单击星星时，它应该会执行某种 AJAX 调用。它使用正确的速率值来执行此操作，但`data-id`将作为 AJAX 调用文件中 MySQL 查询的输入的属性未定义 (NaN)。这是代码：

**演示 HTML**：

```
<div class="exemple"> 
   <!-- in this exemple, 12 is the average and 1 is the id of the line to update in DB -->
   <div class="basic" data-average="12" data-id="1"></div> 
</div> 
```

**[jRating.jquery.js](http://demos.myjqueryplugins.com/jrating/jquery/jRating.jquery.js)**：

```
//Line 60:
//idBox = parseInt($(this).attr('data-id')), // old version, idBox=Nan
idBox = parseInt($(this).data("id")); // my version, still idBox=Nan 
```

**编辑**：主 php 页面标题中的 jquery 调用：

```
<script type="text/javascript">
  $(document).ready(function(){
    $(".exemple").jRating({
      length:10,
      decimalLength:0,
      onSuccess : function(){
        alert('Success : your rate has been saved :)');
      },
      onError : function(){
        alert('Error : please retry');
      }
    });
  });
</script> 
```

我似乎无法弄清楚出了什么问题。请帮我找到它。谢谢 ！

**解决方案**：

正如@ZachL 所认识到的， `$(this)`jRating.jquery.js 中的 ,​​ 指的是 div.exemple，而 data-id 位于 div.basic 中。

所以改变`$(this).data("id")`工作`$(this).find('.basic').data("id")`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:43:12.007

据我所知，该脚本正在寻找 上的数据属性`<div class="exemple">`，但它只存在于 上`<div class="basic">`。

你可以试试`idBox = parseInt($(this).find('.basic').data("id"));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:29:30.413

假设您的问题不是`$(this)`，请使用`$(this).data("id")`获取`data-id`属性。确保您使用的是 jQuery 1.6 或更新版本。

# c - wrong architecture for erlang runtime?

> ID：15822823
> 
> 赞同：0
> 
> 时间：2013-04-04T22:26:56.473
> 
> 标签：c, compilation, linker, erlang

I'm playing around with [http://www.erlang.org/doc/tutorial/nif.html](http://www.erlang.org/doc/tutorial/nif.html) on OSX 10.6 Snow Leopard. and I'm having some trouble running the example.

I compile using :

```
gcc -o complex_nif.so -fpic -I/usr/local/lib/erlang/usr/include -flat_namespace -undefined suppress complex.c complex_nif.c 
```

and run in erlang using:

```
Erlang R15B01 (erts-5.9.1) [source] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
1> c(complex).
{error,on_load_failure}

=ERROR REPORT==== 4-Apr-2013::15:24:51 ===
Error in process <0.37.0> with exit value: {{badmatch,{error,{load_failed,"Failed to load NIF library: 'dlopen(./complex_nif.so, 2): no suitable image found.  Did find:\n      ./complex_nif.so: mach-o, but wrong architecture'"}}},[{complex,init,0,[{file,"... 

=ERROR REPORT==== 4-Apr-2013::15:24:51 ===
The on_load function for module complex returned {{badmatch,
                                                   {error,
                                                    {load_failed,
                                                     "Failed to load NIF library: 'dlopen(./complex_nif.so, 2): no suitable image found.  Did find:\n\t./complex_nif.so: mach-o, but wrong architecture'"}}},
                                                  [{complex,init,0,
                                                    [{file,...},{...}]},
                                                   {code_server,
                                                    '-handle_on_load/4-fun-0-',
                                                    1,
                                                    [{...}|...]}]} 
```

I see that I'm finding the .so file. but erlang does not like the achitecture that it had been compiled for, what architecture would erlang prefer?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T23:14:14.780

验证您的 Erlang 运行时系统使用的架构。例如：

```
$ which erlc
/usr/local/bin/erlc
$ file /usr/local/bin/erlc
/usr/local/bin/erlc: Mach-O 64-bit executable x86_64 
```

确保您的库与上述架构匹配：

```
$ file complex_nif.so
complex_nif.so: Mach-O 64-bit executable x86_64 
```

如果它们不匹配，请使用`-arch i386`(or `-arch x86_64`) 标志编译库。

# gradle - configure custom plugin using params from extension

> ID：15822825
> 
> 赞同：2
> 
> 时间：2013-04-04T22:27:02.123
> 
> 标签：gradle

Hi i'm trying to dynamically create and configure task based on plugin extension values, problem seems to be evaluation order, is there any way to work around it?

```
apply plugin: SetupPlugin 

setup {
     destDir = 'some directory set per project in build.gradle'
     sourceFile = 'some file set per project in build.gradle' 
}

class PluginExtension {
    String destDir
    String sourceFile
}

class SetupPlugin implements Plugin<Project> {
    def placeholders

    void apply(Project project) {
        project.extensions.create("setup", PluginExtension)

        project.task ("setupEnvironment", type: Copy) {
            doFirst() {
                //computes placeholders <-- project.setup has value here
            }

            into (project.setup.destDir){ //<-- project.setup is null
                from project.setup.sourceFile
            }
            filter(org.apache.tools.ant.filters.ReplaceTokens, tokens: placeholders)
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:33:09.220

将此移动到 doFirst 块可能会导致一些副作用，因为 gradle up to date 任务可能会遇到问题，因为在执行时而不是配置时重新配置复制任务的参数。一个可以解决问题的快速修复是通过使用闭包来推迟评估：

```
...
void apply(Project project) {
        project.extensions.create("setup", PluginExtension)

        project.task ("setupEnvironment", type: Copy) {
            doFirst() {
                //computes placeholders <-- project.setup has value here
            }

            into {project.setup.destDir}
            from { project.setup.sourceFile }
            filter(org.apache.tools.ant.filters.ReplaceTokens, tokens: placeholders)
        }   
}
... 
```

希望有帮助！

干杯，勒内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:50:02.277

原来我问了一个我认为与这个问题非常相似的问题。我可能会遗漏一个细微的区别，但如果它有帮助：[就是这样。](https://stackoverflow.com/questions/16218888/can-gradle-extensions-handle-lazy-evaluation-of-a-property)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:57:35.207

这是因为`apply`在应用设置设置之前调用。

它之所以有效，是`doFirst`因为它`apply`在构建期间调用。也许你可以把你的副本包装成`doLast`?

# c# - Does Microsoft Fakes support abstract methods on a shim?

> ID：15822826
> 
> 赞同：6
> 
> 时间：2013-04-04T22:27:06.837
> 
> 标签：c#, abstract, microsoft-fakes

I have a class setup in the following manner:

```
public abstract FooClass {
    public FooClass() {
        // init stuff;
    }

    public void RandomMethod() {
        // do stuff;
    }

    public abstract WhatIWantToShim();
} 
```

What I want to do is set the WhatIWantToShim on the ShimFooClass like so:

```
ShimFooClass.AllInstances.WhatIWantToShim = () => Boo(); 
```

I can set RandomMethod just fine,

```
ShimFooClass.AllInstances.RandomMethod = () => CalculatePi(); 
```

However, it appears that the generated ShimFooClass does not create the WhatIWantToShim property on the AllInstances property of the ShimFooClass.

I've looked at [http://msdn.microsoft.com/en-us/library/hh549176.aspx#bkmk_shim_basics](http://msdn.microsoft.com/en-us/library/hh549176.aspx#bkmk_shim_basics) but I don't see anything there about abstract methods. The only thing I see referenced that is not supported is finalizers. Anybody know what is going on here and if this scenario is supported?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T22:55:54.960

啊……无赖

> 接口和抽象方法。存根提供可用于测试的接口和抽象方法的实现。Shim 不能检测接口和抽象方法，因为它们没有方法体。

[http://msdn.microsoft.com/en-us/library/hh549175(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh549175(v=vs.110).aspx)

更新：虽然可以做的是存根垫片。

```
using (ShimsContext.Create())
{
    bool wasAbstractMethodCalled = false;
    var targetStub = new StubFooClass()
    {
        WhatIWantToShim01 = () => wasAbstractMethodCalled = true
    };
    var targetShim = new ShimFooClass(targetStub);
    targetShim.AllInstances.RandomMethod = () => CalculatePi();
    FooClass  target = targetShim.Instance;
    target.WhatIWantToShim();
    Assert.IsTrue(wasAbstractMethodCalled, "The WhatIWantToShim method was not called.");
} 
```

由于 shim 无法处理 WhatIWantToShim 方法的迂回，而存根可以，只需创建存根类的新实例并为抽象方法设置迂回处理程序。（注意：WhatIWantToShim 末尾的 01 标记是在我的实际代码中生成 Fakes 时自动为我添加的）。

然后只需将实例化的存根传递给 shim 类的构造函数，并根据需要进行填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T22:28:17.233

我在这里回复是因为我很确定其他答案没有回答问题，因此将来的搜索会返回有用的信息。

首先，您不能填充接口。抽象方法等价于接口。此外，没有理由这样做。

```
{
    bool wasAbstractMethodCalled = false;
    var targetStub = new StubFooClass()
    {
        WhatIWantToShim01 = () => wasAbstractMethodCalled = true
    };
    ShimFooClass.AllInstances.RandomMethod = @class => targetStub.CalculatePi();
    targetStub.WhatIWantToShim();
    Assert.IsTrue(wasAbstractMethodCalled, "The WhatIWantToShim method was not called.");
} 
```

以上是先前答案的简化版本，将简单地调用您刚刚分配的操作。这可能不是你的意图。

记住为什么你垫片。当您想避免在您正在测试的方法中的方法调用的影响时，您可以使用 shim。抽象方法可以没有主体，因此不会影响任何东西。唯一有用的是在子类中，首先您可以使用 shim。

您可能遇到问题的唯一情况是，如果第三个类秘密持有抽象类的实例并使用子类实例化它。你不能假装那个。然而，这是一个糟糕的设计。实例应该来自某个方法（您可以填充）或传入（因为 DI 是一件好事！）否则抽象是没有价值的，您也可以将实例声明为子类型，因为您没有以任何方式使用抽象。

# ruby-on-rails - capistrano 使用错误版本的 Ruby 部署

> ID：15822827
> 
> 赞同：4
> 
> 时间：2013-04-04T22:27:11.920
> 
> 标签：ruby-on-rails, capistrano

在我使用 capistrano 部署到新服务器后，我看到：

> /shared/bundle/ruby/1.9.1/gems/

我什至没有在服务器上安装 ruby​​ 1.9.1。如果我运行：`ruby -v` 它返回 1.9.3 但在所有 capisrtano 操作中我一直看到 1.9.1 为什么会这样？我该如何阻止它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:46:12.400

不用担心。Ruby 1.9.1 到 1.9.3 默认使用该路径。这并不一定意味着您使用了错误的 Ruby。

# javascript - 使用 $ajax 检索内容

> ID：15822828
> 
> 赞同：0
> 
> 时间：2013-04-04T22:27:16.573
> 
> 标签：javascript, jquery

我正在使用[Pageguide.js 的这个分支](http://sprintly.github.com/jquery.pageguide/)来提供一些关于使用我的网络应用程序的各个页面的指导。这工作得很好，但是目前指南的所有内容都是静态设置在脚本中的：

```
var guide = {
  id: 'jQuery.PageGuide',
  title: 'What can I do here?',
  steps: [
    {
      target: '#user-tools',
      content: 'Some static content here'
    }
  ]
}

$(function() {
  // Load the default guide!
  $.pageguide(guide);
}); 
```

我希望使用`$ajax`对服务器的调用动态检索内容，因此我将代码更改为以下添加`$ajax`调用：

```
var guide = {
  id: 'jQuery.PageGuide',
  title: 'What can I do here?',
  steps: [
    {
      target: '#user-tools',
      content: function() {
        $.ajax({
          type: 'GET',
          url: 'user-guide',
          data: {elementId: '#user-tools'},
          success: function(html) {
            return html;
          }
        });
      }
    }
  ]
} 
```

尽管`$ajax`调用似乎工作正常（我使用 Chrome 调试器进行了检查，我可以看到返回了正确的 html，并且日志中没有出现错误），但该指南并未使用从服务器返回的 html 进行更新。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:30:51.010

那是行不通的，内容将包含一个`XHR`对象。您[不能从异步 AJAX 调用返回数据](https://stackoverflow.com/questions/4555079/ajax-jquery-async-return-value)。您需要在 AJAX 返回*后运行代码：*

```
$.ajax({type: 'GET',url: 'user-guide', data: {elementId: '#user-tools'}}).done(function(html){
  var guide = {
      id: 'jQuery.PageGuide',
      title: 'What can I do here?',
      steps: [{target: '#user-tools',content:html}]
  };
  //rest of your code goes here       
}); 
```

# dictionary - 来自 CMU 发音数据库的押韵词典

> ID：15822832
> 
> 赞同：7
> 
> 时间：2013-04-04T22:27:51.037
> 
> 标签：dictionary, phoneme

我正在寻找一个免费或开源的押韵数据库。

我找到了 CMU 发音“数据库”及其一系列应用程序，但我无法理解它们或弄清楚数据的来源。

我只需要一个包含单词及其音素的简单文本文件。

这里有人知道我在哪里可以找到或者我会从哪里开始从 CMU 文件中导出这样的列表吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-16T09:21:42.537

# 命令

cmudict 是一个文本文件，它的格式非常简单。首先，列出单词。然后，有两个空格。两个空格后面的都是发音。如果一个词可能有两种不同的发音方式，您会看到该词的两个条目，例如

```
word
word(1) 
```

在文件的开头，他们列出了符号和标点符号。符号后面是所述符号名称的英文拼写，它们之间没有空格。然后是两个空格分隔符和 arpabet 代码。由于您只是在寻找押韵，因此您不必对符号部分做任何特别的事情，因为您永远不会寻找押韵`...ELLIPSIS`

# 阿帕比特

[wikipedia http://en.wikipedia.org/wiki/Arpabet](http://en.wikipedia.org/wiki/Arpabet)中列出了有关 ARPAbet 代码如何映射到 IPA 的信息，并且每个映射都显示示例单词。很容易看出两者之间的关系，如果您熟悉 IPA，这可能有助于您了解如何阅读 ARPAbet 代码。

# 概括

基本上，如果你已经找到了 cmudict，那么你已经得到了你想要的东西：一个单词及其发音的数据库。要查找押韵的单词，您必须将平面文件解析为表格并运行查询以查找以相同 ARPAbet 代码结尾的单词。

# 做事的一般理论

## 部分：东西

1.  创建一个新的数据库
2.  在数据库中创建一个包含三个字段的表：index、word、arpabet
3.  逐行读取 cmudict 文件
4.  对于每一行，将其分成两部分，其中找到两个连续的空格和
5.  增加索引计数，然后插入索引号、单词和 arpabet 代码

## 然后嗯...

一旦您将数据输入到您选择的任何类型的数据库中，您就可以使用该数据库来查找 arpabet 代码之间的相关性。你可以找到押韵、谐音、谐音和其他助记符。它会像

## 部分：东西

1.  得到一个你想找到押韵的词
2.  在数据库中查询单词的 arpabet 等价物
3.  将 arpabet 代码拆分为多个片段，方法是在有空格的地方将其分解
4.  获取最后一段代码，并在数据库中查询其 arpabet 代码结尾与该段匹配的单词
5.  用押韵做花哨的事情

# 捷径和剧透

我感到无聊并编写了一个 Node.js 模块，其中涵盖了上面列出的“Part: Stuff”。如果你的机器上安装了 Node.js，你可以通过运行来获取该模块，`npm install cmudict-to-sqlite`请参阅[https://npmjs.org/package/cmudict-to-sqlite](https://npmjs.org/package/cmudict-to-sqlite)的 README 或查看模块中的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-01T01:44:04.707

## 使用 CMU 发音词典的韵律逻辑

好的。假设您想使用[CMU Pronouncing Dictionary](http://svn.code.sf.net/p/cmusphinx/code/trunk/cmudict/)数据（示例文件：cmudict-0.7b）构建所有与“LOVE”押韵的单词的列表。

您可以这样做：

首先，你需要学习“LOVE”的发音。您会在字典中找到这一行，其中“LOVE”和“L AH1 V”由两个空格分隔：

```
LOVE  L AH1 V 
```

这就是说这个词`LOVE`发音为like `L AH1 V`。

然后，找到具有主要重音的元音音素。换句话说，在那个发音中寻找数字“1”。直接在 1 左侧的文本是具有主要重音 ( ) 的元音`AH`。该文本及其右侧的所有内容都是您的“押韵音素”（因为没有更好的术语）。所以 LOVE 的押韵音位是`AH1 V`。

我们已经完成了一半！现在我们只需要找到其他发音以 . 结尾的单词`AH1 V`。如果您正在使用 Notepad++，请尝试`AH1 V$`使用“正则表达式”的搜索模式在当前文档中查找所有模式。这将匹配以下行：

```
Line 392: ABOVE  AH0 B AH1 V
Line 10266: BELOVE  B IH0 L AH1 V
Line 30204: DENEUVE  D IH0 N AH1 V
Line 30205: DENEUVE(1)  D IY0 N AH1 V
Line 34064: DOVE  D AH1 V
Line 48177: GLOVE  G L AH1 V
Line 49053: GOV  G AH1 V
... etc 
```

押韵woooooords！

有很多方法可以实现这一点，也有很多极端情况，但这大致是许多电子押韵词典在寻找完美押韵时似乎采用的方法。

## 存储押韵数据的假设 SQL 方法

显然，如果您每次有人想要押韵时都只扫描字典，那么性能将是一个问题。如果这是一个问题，您可以尝试以不同的方式存储或索引数据。

尽管它在磁盘空间上不是最有效的，但我在将这些东西存储在带有索引列的 SQL 表中时有很好的体验。

对于一个简单的概念示例，您可以计算字典中所有单词的“韵律音素”，然后将它们插入到列为 { WordText, RhymePhonemes } 的“韵律”表中。例如，您可能会看到如下记录：

```
{"ABOVE", "AH1 V"}
{"DOVE", "AH1 V"}
{"OUTLIVE", "IH1 V"}
{"GRADUATE", "AE1 JH AH0 W AH0 T"}
{"GRADUATE", "AE1 JH AH0 W EY2 T"} 
```

... ETC

然后，要查找押韵，您可以发出如下查询：

```
SELECT OTHER.WordText
FROM Rhymes INPUT
     INNER JOIN Rhymes OTHER ON OTHER.RhymePhonemes = INPUT.RhymePhonemes
WHERE INPUT.WordText = 'love' AND
      OTHER.WordText <> INPUT.WordText
ORDER BY OTHER.WordText 
```

如果您打算打印一本将所有发音相似的单词组合在一起的字典，这也会派上用场。

当然还有很多其他方法可以存储/搜索不同权衡的数据，但希望这能让你开始。

我也很幸运地将原始发音以不同的“完整”格式存储在数据库中（发音的正向和反向字符串，带有重音符号和没有重音符号等），但没有像押韵那样“切碎”成特定的片段-音素列。

## 陷阱

再一次，“爱”的原始解释绝对会让你进入押韵的范围。但是，在此过程中，您可能会遇到其他需要考虑的问题。这是一个提示：

1.  有些单词有多种发音。在 CMU 词典中，替代发音在单词后面标有 , 等文本`(1)`，`(2)`如 in `GRADUATE(2)`。如果有人想要这些单词的韵律，您必须在显示所有匹配发音的韵律之间做出决定，或者让用户选择他们真正想要的发音。
2.  当发音有两个或多个“1”时，你会怎么做？选第一个？选最后一个？如果你选择最后一个，你会发现更多的押韵，但这可能不是压力最自然的选择。
3.  读音没有“1”怎么办？它不会发生很多，但它会发生，例如:`ACCREDIT AH0 K R EH2 D AH0 T`和`AIKIN EY0 K IH0 N`. 在这种情况下，我会选择下一个最佳压力（例如，如果 1 不存在，则选择 2、3、4 等）。如果他们都是0，我没有任何好的建议。
4.  缺少一些发音。这是一个很好的开始，但它没有您可能想要的所有单词或单词拼写。美式拼写优于英式拼写。
5.  有些发音不是您所期望的，您可能需要修剪。例如，“or”的发音听起来像“er”。
6.  您可能想比较删除重音标记的“押韵音素”。这仅适用于主要重音不在最后一个元音上的单词（因此您在“love”示例中看不到问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-25T03:13:38.917

我现在正在积极研究类似的事情，使用 Plate 建议的一般方法，并对其进行扩展。[这是我的源代码。](https://github.com/pace212/rhyme-ninja)希望能帮助到你！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T01:22:07.340

如果您只使用一个小的演示子集，您总是可以使用[http://www.rhymezone.com/并搜索一个单词，然后将其韵律匹配放入一个文本文件中。](http://www.rhymezone.com/)如果你想要一个完整的单词数据库。您可以将字典连接到zombieJS UI 自动化，然后屏幕抓取单词并将它们放入您自己的数据库中。这将允许您创建自己的押韵数据库。虽然说实话，这对于您最初的要求来说是一项艰巨的任务

# android - Google 地图中的错误，“无法找到 com.google.android.gsf.gservices 的提供商信息”和“无法找到 com.google.settings 的提供商信息”

> ID：15822836
> 
> 赞同：3
> 
> 时间：2013-04-04T22:28:20.167
> 
> 标签：android, google-maps, android-emulator, google-maps-api-2

在我的 android 应用程序中实现谷歌地图片段时遇到了一个严重的问题。基本上，我遵循了谷歌网站上的所有说明。获取 Google Maps API v2 密钥、设置布局和清单、导入 google-play-service 库并使用 google 的示例代码启动 GoogleMap 后，我发现模拟器不支持 Google Maps API v2，所以我上网并下载最新版本的 com.android.vending.apk 和 com.google.android.gms.apk 然后使用 adb install 将它们安装到我的模拟器中（与此处相同的情况：[除非您更新 Google Play 服务（通过 Bazaar）](https://stackoverflow.com/questions/13691943/this-app-wont-run-unless-you-update-google-play-services-via-bazaar)）。安装它们之后，我终于能够实现一个 MapFragment 的接口。

但是当我在我的 Android 模拟器（OS 4.1.2；API 16）中运行它时，地图中没有任何效果。不断出现“无法找到 com.google.android.gsf.gservices 的提供商信息”的错误消息。我不确定它是否与无线提供商有关。有谁知道为什么一直出现？任何建议将不胜感激！

解释一些较早的问题：地图正确显示。但是地图上的按钮（“+”和“-”）根本不起作用。我也不能点击或拖动地图。每当我在地图上单击、拖动或双击任何按钮时，它都没有给我任何响应，但 LogCat 中的错误消息显示“无法找到 com.google.android.gsf.gservices 的提供程序信息”。

这是我在 AndroidManifest.xml 中的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.trackmyexercise"
        android:versionCode="1"
        android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="12"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.trackmyexercise.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.trackmyexercise.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.trackmyexercise.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyANkR-VPI4zy5IpYGK2Z0T1omLq3C46rFE" />
    </application>

</manifest> 
```

这是我的布局代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.MapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/recordsButton"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

这是我的 MainActivity 代码：

```
 package com.example.trackmyexercise;

import android.os.Bundle;
import android.app.Activity;
import android.app.FragmentTransaction;
import android.view.Menu;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;

public class MainActivity extends Activity {
    GoogleMap myMap;
    MapFragment myMapFragment;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity);

        myMapFragment = MapFragment.newInstance();
        FragmentTransaction fragmentTransaction = getFragmentManager()
                .beginTransaction();
        fragmentTransaction.add(R.id.map, myMapFragment);
        fragmentTransaction.commit();

        myMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                .getMap();
        this.setUpMapIfNeeded();
        myMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    private void setUpMapIfNeeded() {
        if (myMap == null) {
            myMap = ((MapFragment) getFragmentManager().findFragmentById(
                    R.id.map)).getMap();
        if (myMap != null) {
        }
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:08:36.003

错误就在这里 -->`android:name="com.example.tackmyexercise.permission.MAPS_RECEIVE"`

我想你的包名在这里不正确。

它应该是`"com.example.trackmyexercise.permission.MAPS_RECEIVE"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T22:58:10.840

我遵循了相同的教程，遇到了与您相同的问题，并通过执行以下操作设法获得了工作地图：

*   右键单击项目
*   选择“项目属性”
*   在左侧菜单中选择“Android”
*   在“项目构建目标”下，确保您选择了“Android XX”（我使用的是 4.2.2），而不是 Google API
*   还要确保您的 Android 虚拟设备将“Android XX”作为目标版本，而不是 Google API

为我工作，希望对你有帮助！

# linux - 通过 SSH 与另一个终端应用程序通信

> ID：15822840
> 
> 赞同：0
> 
> 时间：2013-04-04T22:29:06.963
> 
> 标签：linux, ssh, centos

我将首先说我不是 Linux 大师，甚至是接近的。我用它来开发嵌入式应用程序，它可以很好地满足我的目的。

我有一个在 CentOS 6.3 机器上运行的程序（我想正确的术语是“在终端中运行”）。对于调试和统计，我有一个例程来监视键盘（stdin 文件）并根据给定按键的请求吐出项目。当我坐在它前面时，一切都很好。

但我希望能够执行这些简单的功能：按一个键，远程查看一些输出。我可以通过 SSH 进入盒子并执行命令，但我无法“看到”这个程序。

我曾尝试搜索“使用 ssh 与其他终端通信”和无数变体，但我想我没有正确地问这个问题——搜索结果毫无价值。

我想做的是登录我的帐户，然后以某种方式“查看”我的程序正在运行并键入密钥并查看其输出。这是标准输入/标准输出重定向问题吗？

如果这很明显而且我只是个白痴，我提前道歉，但我仍然想知道该怎么做...... :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:31:49.793

如果您使用 linux 'screen' 实用程序，您可以重新附加到用于启动程序的原始终端会话。基本上你只需输入 screen 然后运行你的程序。这是屏幕上更有用的信息：

[http://www.rackaid.com/resources/linux-screen-tutorial-and-how-to](http://www.rackaid.com/resources/linux-screen-tutorial-and-how-to)

# sql - 当表中只有一个日期列时，如何将 SUM 列添加到按周汇总的 SQL 查询？

> ID：15822844
> 
> 赞同：1
> 
> 时间：2013-04-04T22:29:13.993
> 
> 标签：sql, sql-server, group-by, sql-order-by, pivot

我正在编写一个查询来分解在给定年份中每周订购的零件数量。但是，零件订单表中只有 1 个日期列。

这是我想要完成的事情：

```
PartNo    PartDesc    Type       Week1    Week2    Week3 ...
------------------------------------------------------------
000001    Shoe        Black         54       44       6
000001    Shoe        White         64       33       7
000002    GLove       Black          1       22       8
000002    Glove       White          7       11       9 
```

这是表格布局

```
PartsOrderTable
----------------
PartNo
PartDesc
PartType
Qty
DateField 
```

到目前为止，这是我的查询，它适用于第 1 周，我不确定如何将其他周附加到结果的末尾？

```
SELECT PartNo, PartDesc, Type, SUM(Qty) as Week1 
FROM PartsOrderTable
WHERE DateField >= '1/1/2013'
AND DateField <= '12/31/2013'
And DATEPART(ww, DateField) = 1
GROUP BY PartNo, PartDesc, Type, DATEPART(ww, DateField)
ORDER BY PartNo, Week1 
```

这是我目前得到的：

```
PartNo    PartDesc    Type       Week1
----------------------------------------
000001    Shoe        Black         54
000001    Shoe        White         64
000002    GLove       Black          1
000002    Glove       White          7 
```

是否可以在一个简单的查询中添加每周订购的数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T22:38:12.617

您可以使用该`PIVOT`函数来执行此操作，因此代码将类似于以下内容：

```
select *
from
(
  SELECT PartNo, PartDesc, Type, Qty,
    'Week'+cast(DATEPART(ww, DateField) as varchar(2)) WeekNo
  FROM PartsOrderTable
  WHERE year(DateField) = 2013
) d
pivot
(
  sum(qty)
  for WeekNo in (Week1, Week2, Week3, Week4)
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/e39c5/2)。

如果您有未知数量的列，或者想要传递一个日期范围，那么您可以使用动态 sql 来创建结果。我*强烈建议*您在动态返回日期时限制列数，您要确保不会返回太多列：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('Week'+cast(DATEPART(ww, DateField) as varchar(2))) 
                    from PartsOrderTable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT PartNo, PartDesc, Type,' + @cols + ' 
            from 
            (
                SELECT PartNo, PartDesc, Type, Qty,
                  ''Week''+cast(DATEPART(ww, DateField) as varchar(2)) WeekNo
                FROM PartsOrderTable
                WHERE year(DateField) = 2013
            ) x
            pivot 
            (
                sum(qty)
                for WeekNo in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/e39c5/4)

# php - ZF2 如何在表单字段集中包装内容？

> ID：15822845
> 
> 赞同：5
> 
> 时间：2013-04-04T22:29:18.067
> 
> 标签：php, zend-framework2

我有字段集的表单：

```
$formConfig = array(
    'fieldsets' => array(
        ...
    );
);

$factory = new Zend\Form\Factory();
$form = $factory->createForm($formConfig); 
echo $this->form($form); 
```

它呈现如下内容：

```
<form>
    <fieldset>
        <legend>Fieldset label</legend>
        <label><span>Elem 1</span><input type="text" name="f1[el1]" /></label>
        <label><span>Elem 2</span><input type="text" name="f1[el2]" /></label>
        <label><span>Elem 3</span><input type="text" name="f1[el3]" /></label>
    </fielset>
</form> 
```

问题是我需要在图例之后包装内容：

```
<form>
    <fieldset>
        <legend>Fieldset label</legend>
        <div class="wrapper">
            <label><span>Elem 1</span><input type="text" name="f1[el1]" /></label>
            <label><span>Elem 2</span><input type="text" name="f1[el2]" /></label>
            <label><span>Elem 3</span><input type="text" name="f1[el3]" /></label>
        <div>
    </fielset>
</form> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T06:12:38.420

您需要再次了解 a`Zend\Form\Fieldset`不等于 HTML `<fieldset>`！A`Zend\Form\Fieldset`只是`Zend\Form\Element`通常代表一个实体的集合，您可以为多个实体提供来自一个表单的数据。

现在，当涉及到渲染表单时，您应该了解的第一件事是几个[`Zend\Form\View\Helper`](https://github.com/zendframework/zf2/tree/master/library/Zend/Form/View/Helper)-Class。您正在使用`form()`view-helper，它会自动翻译所有`Zend\Form\Element`using`formRow()`和 all `Zend\Form\Fieldset`using `formCollection()`。但你不想那样做！

当需要您喜欢的输出时，您将需要自己呈现表单。像这样的东西可能是你的视图模板：

```
<?=$this->form()->openTag($form);?>
    <fieldset>
        <div class="wrapper">
            <?=$this->formRow($form->get('f1')->get('el1'));?>
            <?=$this->formRow($form->get('f1')->get('el2'));?>
            <?=$this->formRow($form->get('f1')->get('el3'));?>
        </div>
    </fieldset>
<?=$this->form()->closeTag();?> 
```

现在，这已经有了一点安慰，因为您将使用`formRow()`. 您还可以拆分每个表单行并采用非常详细的方式，例如：

```
<label>
    <span><?=$this->formLabel($form->get('f1')->get('el1'));?></span>
    <?=$this->formInput($form->get('f1')->get('el1'));=>
    <?=$this->formElementErrors($form->get('f1')->get('el1'));?>
</label> 
```

即使在那里，`formInput()`仍然有一种魔力可以衍生为`formText()`, `formSelect()`, `formTextarea()`, 等..., 等等...

# php - laravel 4 安装失败

> ID：15822850
> 
> 赞同：4
> 
> 时间：2013-04-04T22:29:39.887
> 
> 标签：php, laravel, composer-php, laravel-4

我一直在尝试安装 laravel，但没有成功。我一直在遵循似乎是通常的食谱

```
git clone -b develop git://github.com/laravel/laravel.git myapp
cd myapp
curl -sS https://getcomposer.org/installer | php
php composer.phar install 
```

当我运行它时，我总是得到以下信息。我尝试杀死缓存目录更新等。

运行 PHP 版本 5.4.6 open-ssl ，在 cli 中启用 mcrypt。

只是不知道我错过了什么。已经试了一个多星期。看了一些关于网络问题的讨论。当我在浏览器中手动下载 json 时，我注意到它重定向到一个安全的 https url。任何指针都会很棒。我从来没有遇到过这样的问题，我无法找到答案。

```
# php composer.phar 安装
使用包信息加载作曲家存储库
安装依赖项

  [作曲家\下载器\传输异常]
  “http://packagist.org/p/laravel/framework$de13d7a9bde179aa3dbe63308a250
  911fa2330b3e0ba7510dea52827ec3c2f14.json”文件无法下载：fai
  导致打开流：HTTP请求失败！

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:32:03.303

我注意到使用 wget 或浏览器，我会得到一个 https 重定向。似乎无论作曲家做什么，它都与其他 2 个足够不同，以至于它产生了防火墙问题。上面的链接通过在我的 composer.json 文件中添加一个部分来解决它。现在它不需要重定向，因为它从 https 开始。我在声波墙后面跑。我不确定为什么它可以与浏览器和 wget 一起使用，但不能与作曲家一起使用。然而它解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:51:13.080

您正在从 github 克隆 Developer 分支。这个版本可以瞬间破解。所以你可以等待稍后再试一次（也许它会同时得到修复）或者你下载这个[develop.zip](https://github.com/laravel/laravel/archive/develop.zip)，这是L4文档中描述的官方方式。

# java - 将 GXT 2.x 迁移到 GXT 3.x。如何处理模型？

> ID：15822852
> 
> 赞同：4
> 
> 时间：2013-04-04T22:29:41.443
> 
> 标签：java, gwt, migration, gxt

我现在正在将应用程序从 GXT 2 迁移到 GXT 3。

两者之间的主要区别之一是 GXT 3.x 允许在小部件中使用 POJO，而 GXT 2.x 小部件需要实现 ModelData 的对象。

问题是我不能简单地将所有 ModelData 对象扔掉并使用 POJO，因为 ModelData 对象包含许多仅与 GUI 相关的附加属性。
因此，这些属性不能放在 POJO（真实应用模型）中。

最有可能的是，我最终会构建自己的 ModelData 接口和一组要在小部件中使用的对象。这看起来有点丑陋和非 GXT3 风格。

有没有其他方法可以解决这样的问题？或者也许有人已经面对它了？任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:09:18.430

与 Chris Phillipson 的建议类似，您可以使用添加附加字段的客户端变体子类化您的 POJO，例如，您有一个名为 MyPojo 的类：

```
class MyPojo {
    private String name;
    private String address;
    ...
} 
```

在客户端上，您有子类：

```
class MyClientPojo extends MyPojo {
     private String additionalInfo;
     ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:33:38.970

我的建议是创建一个您自己的 YourModelData 类，该类包装 YourModel 类并添加您可能需要用于显示的其他属性（我建议不要为此目的进行子类化，因为 ModelData**不是**YourModel，它只有**一个**）。没有什么可以阻止您使用 ModelData，但您不再需要这样做。

# php - 使用访问者的时区获取昨天的 mySQL 数据

> ID：15822858
> 
> 赞同：2
> 
> 时间：2013-04-04T22:30:10.213
> 
> 标签：php, mysql

我正在使用成功获取昨天的 mySQL 数据

```
SELECT COUNT(*) as total FROM  track
WHERE  FROM_UNIXTIME(date,'%Y-%m-%d %h:%m:%s') > DATE_ADD(NOW(), INTERVAL -2 DAY) 
AND FROM_UNIXTIME(date,'%Y-%m-%d %h:%m:%s') < DATE_ADD(NOW(), INTERVAL -1 DAY) 
```

但是，它使用服务器的时区。我的服务器位于美国，如果访问者来自与美国不同的时区（例如：亚洲或欧洲），我昨天的数据对于用户来说将不正确。我想根据访问者的时区获取正确的昨天结果。我可以在 php 中获取访问者时区，但我不知道如何在 mySQL 中使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T22:51:17.073

不要将时间存储为 UNIX 时间戳，而是存储为[`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html). 然后您可以简单地设置[`time_zone`](https://dev.mysql.com/doc/en/server-system-variables.html#sysvar_time_zone)，一切都将按照您的意愿进行转换：

```
SET time_zone = '+10:00';

SELECT COUNT(*) AS total
FROM   track
WHERE  date > NOW() - INTERVAL 2 DAY
   AND date < NOW() - INTERVAL 1 DAY 
```

否则，您可以使用[`CONVERT_TZ()`](https://dev.mysql.com/doc/en/date-and-time-functions.html#function_convert-tz)：

```
SELECT COUNT(*) AS total
FROM   track
WHERE  date > UNIX_TIMESTAMP(CONVERT_TZ(NOW() - INTERVAL 2 DAY, '+3:00', '+10:00'))
   AND date < UNIX_TIMESTAMP(CONVERT_TZ(NOW() - INTERVAL 1 DAY, '+3:00', '+10:00')) 
```

# sublimetext2 - 单引号和双引号的自动配对在 Sublime Text 中不起作用

> ID：15822859
> 
> 赞同：3
> 
> 时间：2013-04-04T22:30:19.907
> 
> 标签：sublimetext2

当我在我的 Mac 上选择一个单词（例如 test）并写下“或”时，Sublime Text 2 会删除该单词，将其替换为“或”而不是“测试”或“测试”。我对 () 或 {} 没有任何问题。

我想这与：

```
{ "keys": ["\""], "command": "insert_snippet", "args": {"contents": "\"${0:$SELECTION}\""}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": false, "match_all": true }
    ]
}, 
```

有任何想法吗？我卸载了 sublime（删除包和插件），然后重新安装。问题仍然存在。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:24:46.503

我发现了问题。这与我的键盘语言偏好有关。我正在使用“US - International PC”来用西班牙语写口音。当我使用“美国”时，它完美无缺。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T00:08:22.417

这就是我所拥有的...

```
// Auto-pair quotes
{ "keys": ["\""], "command": "insert_snippet", "args": {"contents": "\"$0\""}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^(?:\t| |\\)|]|\\}|>|$)", "match_all": true },
        { "key": "preceding_text", "operator": "not_regex_contains", "operand": "[\"a-zA-Z0-9_]$", "match_all": true },
        { "key": "eol_selector", "operator": "not_equal", "operand": "string.quoted.double", "match_all": true }
    ]
},
{ "keys": ["\""], "command": "insert_snippet", "args": {"contents": "\"${0:$SELECTION}\""}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": false, "match_all": true }
    ]
},
{ "keys": ["\""], "command": "move", "args": {"by": "characters", "forward": true}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^\"", "match_all": true }
    ]
},
{ "keys": ["backspace"], "command": "run_macro_file", "args": {"file": "Packages/Default/Delete Left Right.sublime-macro"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "preceding_text", "operator": "regex_contains", "operand": "\"$", "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^\"", "match_all": true }
    ]
},

// Auto-pair single quotes
{ "keys": ["'"], "command": "insert_snippet", "args": {"contents": "'$0'"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^(?:\t| |\\)|]|\\}|>|$)", "match_all": true },
        { "key": "preceding_text", "operator": "not_regex_contains", "operand": "['a-zA-Z0-9_]$", "match_all": true },
        { "key": "eol_selector", "operator": "not_equal", "operand": "string.quoted.single", "match_all": true }
    ]
},
{ "keys": ["'"], "command": "insert_snippet", "args": {"contents": "'${0:$SELECTION}'"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": false, "match_all": true }
    ]
},
{ "keys": ["'"], "command": "move", "args": {"by": "characters", "forward": true}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^'", "match_all": true }
    ]
},
{ "keys": ["backspace"], "command": "run_macro_file", "args": {"file": "Packages/Default/Delete Left Right.sublime-macro"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "preceding_text", "operator": "regex_contains", "operand": "'$", "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^'", "match_all": true }
    ]
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T22:35:41.093

您需要`auto_match_enabled`在`Preferences->Settings-Default`.

# python - 使用 pygame 和多处理在单独进程中运行的并发函数

> ID：15822862
> 
> 赞同：1
> 
> 时间：2013-04-04T22:30:39.690
> 
> 标签：python, multithreading, serial-port, pygame, multiprocessing

假设我们想通过从先前收集的一组图像和标签中预测图像标签来驾驶自动驾驶汽车（机器学习应用程序）。对于这项任务，汽车通过蓝牙串行 (rfcomm) 连接到主机（带有 *NIX 的 PC），图像直接从 Android 手机使用 IP 网络摄像头进行流式传输，同时，PC 正在运行一个程序来链接这个两个功能，在创建的绘图环境中显示捕获的图像`pygame`，并使用串行将指令发送回汽车。

目前，我尝试使用该`multiprocessing`模块实现这些流程，似乎可以工作，但是当我执行客户端时，绘图函数（`if __name__ == '__main__'`）在`getKeyPress()`函数结束后工作。

问题是：是否可以将包含在 中的绘图函数`if __name__ == '__main__'`与在 中声明的进程并行或同步`getKyPress()`，从而使程序在两个独立的进程中工作？

这是到目前为止实现的代码：

```
import urllib
import time
import os
import sys
import serial
import signal
import multiprocessing 
import numpy as np
import scipy
import scipy.io as sio
import matplotlib.image as mpimg
from pygame.locals import *

PORT = '/dev/rfcomm0'
SPEED = 115200

ser = serial.Serial(PORT)

status = False
move = None
targets = []
inputs = []
tic = False

def getKeyPress():
    import pygame
    pygame.init()
    global targets
    global status
    while not status:
          pygame.event.pump()
          keys = pygame.key.get_pressed()
          targets, status = processOutputs(targets, keys)
    targets = np.array(targets)
    targets = flattenMatrix(targets)
    sio.savemat('targets.mat', {'targets':targets})       

def rgb2gray(rgb):
    r, g, b = np.rollaxis(rgb[...,:3], axis = -1)
    return 0.299 * r + 0.587 * g + 0.114 * b

def processImages(inputX, inputs):
    inputX = flattenMatrix(inputX)
    if len(inputs) == 0:
       inputs = inputX
    elif inputs.shape[1] >= 1:
       inputs = np.hstack((inputs, inputX))
    return inputs

def flattenMatrix(mat):
    mat = mat.flatten(1)
    mat = mat.reshape((len(mat), 1))
    return mat

def send_command(val):
    connection = serial.Serial( PORT,
                                SPEED,
                                timeout=0,
                                stopbits=serial.STOPBITS_TWO
                                )
    connection.write(val)
    connection.close()

def processOutputs(targets, keys):
    global move
    global status
    global tic
    status = False
    keypress = ['K_p', 'K_UP', 'K_LEFT', 'K_DOWN', 'K_RIGHT']
    labels = [1, 2, 3, 4, 5]
    commands = ['p', 'w', 'r', 'j', 's']
    text = ['S', 'Up', 'Left', 'Down', 'Right']
    if keys[K_q]:
       status = True
       return targets, status            
    else:
       for i, j, k, g in zip(keypress, labels, commands, text):
           cmd = compile('cond = keys['+i+']', '<string>', 'exec')
           exec cmd
           if cond:
              move = g
              targets.append(j)
              send_command(k)
              break
    send_command('p')
    return targets, status

targetProcess = multiprocessing.Process(target=getKeyPress)
targetProcess.daemon = True
targetProcess.start()

if __name__ == '__main__': 
   import pygame
   pygame.init()
   w = 288
   h = 352
   size=(w,h)
   screen = pygame.display.set_mode(size)
   c = pygame.time.Clock() # create a clock object for timing
   pygame.display.set_caption('Driver')
   ubuntu = pygame.font.match_font('Ubuntu')
   font = pygame.font.Font(ubuntu, 13)
   inputs = []
   try:
     while not status:
           urllib.urlretrieve("http://192.168.0.10:8080/shot.jpg", "input.jpg")
           try:
             inputX = mpimg.imread('input.jpg')
           except IOError:
             status = True
           inputX = rgb2gray(inputX)/255
           out = inputX.copy()
           out = scipy.misc.imresize(out, (352, 288), interp='bicubic', mode=None)
           scipy.misc.imsave('input.png', out)
           inputs = processImages(inputX, inputs)
           print inputs.shape[1]
           img=pygame.image.load('input.png')
           screen.blit(img,(0,0))
           pygame.display.flip() 
           c.tick(1)
           if move != None:
              text = font.render(move, False, (255, 128, 255), (0, 0, 0))
              textRect = text.get_rect()
              textRect.centerx = 20 #screen.get_rect().centerx
              textRect.centery = 20 #screen.get_rect().centery
              screen.blit(text, textRect)
              pygame.display.update()
           if status:
              targetProcess.join()
              sio.savemat('inputs.mat', {'inputs':inputs})
   except KeyboardInterrupt:
     targetProcess.join()
     sio.savemat('inputs.mat', {'inputs':inputs})

   targetProcess.join()
   sio.savemat('inputs.mat', {'inputs':inputs}) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:04:10.783

我个人建议在不使用`multiprocessing`模块的情况下编写此代码：它使用`fork()`which 对大多数复杂库具有未指定的效果，例如在这种情况下`pygame`。

您应该尝试将其编写为两个完全独立的程序。它迫使您考虑需要从一个到另一个的数据，这既是坏事也是好事（因为它可以澄清事情）。您可以使用一些进程间通信工具，例如 stdin/stdout 管道；例如，在一个程序（“主”程序）中，您将另一个程序作为子进程启动，如下所示：

```
popen = subprocess.Popen([sys.executable, '-u', 'my_subproc.py'],
                         stdin=subprocess.PIPE, stdout=subprocess.PIPE) 
```

（这`-u`是无缓冲的。）

然后将数据读/写到父进程中的popen.stdin/popen.stdout，以及子进程中的sys.stdin/sys.stdout。最简单的例子是如果两个进程只需要一个同步信号，例如父进程在循环中等待子进程说“请下一个”。为此，子进程执行此操作`print 'next please'`，而父进程执行此操作`popen.stdin.readline()`。（打印到子进程中的 sys.stdin。）

无关小记：

```
keypress = ['K_p', ...]
...
cmd = compile('cond = keys['+i+']', '<string>', 'exec')
exec cmd
if cond: 
```

这看起来像是非常繁重的代码：

```
keypress = [K_p, ...]     # not strings, directly the values
...
if keys[i]: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:27:50.490

我的建议是使用单独的线程。

```
#At the beginning
import threading

#Instead of def getKeyPress()
class getKeyPress(threading.Thread):
    def run(self):
        import pygame
        pygame.init()
        global targets
        global status
        while not status:
               pygame.event.pump()
               keys = pygame.key.get_pressed()
               targets, status = processOutputs(targets, keys)
        targets = np.array(targets)
        targets = flattenMatrix(targets)
        sio.savemat('targets.mat', {'targets':targets}) 

#Instead of 
#targetProcess = multiprocessing.Process(target=getKeyPress)
#targetProcess.daemon = True
#targetProcess.start()  
gkp = getKeyPress()
gkp.start() 
```

另一种方法是创建两个不同的脚本并使用套接字来处理进程间通信。

# spring - 从 spring 3.0.4 升级到 3.2.2 导致样式表不支持 405

> ID：15822864
> 
> 赞同：0
> 
> 时间：2013-04-04T22:30:47.760
> 
> 标签：spring, spring-mvc

如果我使用 spring 3.0.4 构建我的应用程序，则下载样式表没有问题。

但是，如果我使用 3.2.2.release 构建它，我会收到 405 错误，指出当它尝试获取样式表时不支持 GET。

没有进行其他更改。

我正在部署到 Glassfish

有没有人有任何想法可能导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:37:55.570

> 有没有人有任何想法可能导致这种情况？

可能很多东西。（我的猜测是某些请求被 SpringSecurity 重定向到错误的位置。）

但是，与其猜测，不如收集一些关于正在发生的事情的具体证据：

*   在 Web 浏览器中，准确找出请求和响应的模式是什么。例如，如果发生重定向，也要找出它正在重定向的内容。

*   在服务器端，为您的应用程序、Spring 堆栈以及必要的 Glassfish 启用调试日志记录。这应该为您提供更多关于正在发生的事情的线索。

# ios - 从路径加载笔尖

> ID：15822865
> 
> 赞同：0
> 
> 时间：2013-04-04T22:30:50.317
> 
> 标签：ios, objective-c

目前我一直在我的应用程序中使用`[NSBundle mainBundle] loadNibNamed:`. 我想做的只是将我所有的笔尖包含在一个子文件夹（及其引用的图像）中，但加载这些似乎几乎是不可能的。loadNibNamed 不允许指定路径。我已经进行了大量搜索，但找不到任何合适的方法。我尝试过的所有其他事情都给出了例外。我尝试从文件中加载数据并取消存档，但它说这是一个难以理解的存档。 `UINib`有同样的问题`NSBundle`。

必须有一种方法来指定文件路径，就像加载任何其他文件一样。

我希望最终内容与返回的`NSArray`一样。`loadNibNamed:`

任何见解都会有所帮助。

我得到的最接近的是使用`[NSBundle bundleWithPath:]`并指定完整路径。它说路径尚未加载，并抛出异常。为什么没有加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T23:24:13.947

我认为您正在“尚未加载”，因为您没有加载捆绑包[捆绑加载]。还要检查名称是否区分大小写，因为模拟器通常不区分大小写，而设备不区分大小写。试试这个，看看你怎么样。

问候，拉维

# ruby-on-rails - Railscast Formtastic

> ID：15822868
> 
> 赞同：0
> 
> 时间：2013-04-04T22:30:57.747
> 
> 标签：ruby-on-rails, associations, railscasts

我刚刚看了[http://railscasts.com/episodes/184-formtastic-part-1](http://railscasts.com/episodes/184-formtastic-part-1)并在实现我的代码后，表单和其他一切都运行良好，除了当我创建表单并转到显示页面时，它会添加一个整数而不是选择的名称

所以例如，如果我把

```
Category: Feline 
```

在显示页面上它会放

类别：1

如果我把

```
Category: Example 
```

在显示页面上它会放

类别：2

有谁知道它为什么显示这个以及我如何让它显示我选择的名字

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:51:09.320

它是不完整的。检查代码（他总是将代码上传到 Github）[https://github.com/railscasts/184-formtastic-part-1/blob/master/vet/app/views/animals/show.html.erb](https://github.com/railscasts/184-formtastic-part-1/blob/master/vet/app/views/animals/show.html.erb)

所以，而不是：

```
<p>
  <strong>Category:</strong>
  <%=h @animal.category_id %>
</p> 
```

放：

```
<p>
  <strong>Category:</strong>
  <%=h @animal.category.name %>
</p> 
```

使用 ActiveRecord 的关联

# macos - 使用 Pyinstaller 2、PyQt4 和 Qt5 创建 OSX PyQt 应用程序

> ID：15822870
> 
> 赞同：3
> 
> 时间：2013-04-04T22:31:27.333
> 
> 标签：macos, pyqt, qt5, pyinstaller

我正在尝试使用 PyInstaller 2 为 OSX 打包 PyQt 程序，其中 PyQt4（4.10）是针对 Qt 5.0.2（来自 Git）构建的。以下简单示例不起作用。

```
import sys
from PyQt4.QtGui import QApplication, QMessageBox

def main():
    print "Hello"
    a = QApplication(sys.argv)
    m = QMessageBox(QMessageBox.Information, "Title", "Hello")
    m.exec_()

if __name__=="__main__":
    main() 
```

使用 pyinstaller-2.0/utils/MakeSpec.py 生成规范文件并修改以添加 BUNDLE 类。

```
a = Analysis(['hello.py'],
         pathex=['/Users/glenn/rp/src/demo'],
         hiddenimports=[],
         hookspath=None)

pyz = PYZ(a.pure)

exe = EXE(pyz,
      a.scripts,
      exclude_binaries=1,
      name=os.path.join('build/pyi.darwin/hello', 'hello'),
      debug=False,
      strip=None,
      upx=True,
      console=False )

coll = COLLECT(exe,
           a.binaries,
           a.zipfiles,
           a.datas,
           strip=None,
           upx=True,
           name=os.path.join('dist', 'hello'))

app = BUNDLE(coll,
        name=os.path.join('dist', 'hello.app'),
        appname="Hello",
        version = '0.1'
        ) 
```

打包命令

```
> python pyinstaller.py --windowed hello.spec 
```

直接从终端运行二进制文件会在崩溃之前给出以下输出：

```
$ ./dist/hello.app/Contents/MacOS/hello 
Hello
Failed to load platform plugin "cocoa". Available platforms are: 

Abort trap: 6 
```

这是堆栈跟踪：

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
abort() called

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x9a671a6a __pthread_kill + 10
1   libsystem_c.dylib               0x93163b2f pthread_kill + 101
2   libsystem_c.dylib               0x9319a4ec abort + 168
3   QtCore                          0x03db156b qt_message_fatal(QtMsgType, QMessageLogContext const&, QString const&) + 11
4   QtCore                          0x03db19df QMessageLogger::fatal(char const*, ...) const + 63
5   QtGui                           0x068abceb QGuiApplicationPrivate::createPlatformIntegration() + 3547
6   QtGui                           0x068abd16 QGuiApplicationPrivate::createEventDispatcher() + 38
7   QtCore                          0x03f4f2c4 QCoreApplication::init() + 100
8   QtCore                          0x03f4f23b QCoreApplication::QCoreApplication(QCoreApplicationPrivate&) + 59
9   QtGui                           0x068aa0d0 QGuiApplication::QGuiApplication(QGuiApplicationPrivate&) + 32
10  QtWidgets                       0x06c695de QApplication::QApplication(int&, char**, int) + 238
11  PyQt4.QtGui.so                  0x06394454 init_QApplication + 196
12  sip.so                          0x007bc7d5 sipSimpleWrapper_init + 266
13  Python                          0x0385c174 type_call + 340
14  Python                          0x0380d401 PyObject_Call + 97
15  Python                          0x0389c093 PyEval_EvalFrameEx + 10131
16  Python                          0x038a0490 fast_function + 192
17  Python                          0x0389beae PyEval_EvalFrameEx + 9646
18  Python                          0x038998b2 PyEval_EvalCodeEx + 1922
19  Python                          0x03899127 PyEval_EvalCode + 87
20  Python                          0x038be06e PyRun_StringFlags + 126
21  Python                          0x038bdfb1 PyRun_SimpleStringFlags + 81
22  Python                          0x038bf619 PyRun_SimpleString + 25
23  hello                           0x00003240 runScripts + 240
24  hello                           0x0000280a main + 442
25  hello                           0x00001eb9 _start + 224
26  hello                           0x00001dd8 start + 40 
```

问题似乎是它找不到 libqcocoa.dylib 插件。这并不奇怪，因为它没有打包。这是这里的实际问题吗？我需要包含这个插件吗？如果是这样，它需要去哪里？我试过把它放在 demo.app/Contents/plugins 中，但这没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:35:38.037

放置 libqcocoa.dylib 的正确位置是`Contents/MacOS/qt4_plugins/platforms`：

```
extralibs = [("qt4_plugins/platforms/libqcocoa.dylib", "/path/to/libqcocoa.dylib", "BINARY")
             ]
coll = COLLECT(exe,
               a.binaries + extralibs,
               a.zipfiles,
               a.datas,
               strip=None,
               upx=False,
               name=os.path.join('dist', 'hello')) 
```

该应用程序现在启动，但对话窗口永远不会出现。编辑：这是因为 PyInstaller (v 2.0) 将 LSBackgroundOnly=true 添加到应用程序 Info.plist。删除它可以显示窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T13:12:00.390

尝试添加（但更改为 PyQt）：

```
from PySide import QtCore, QtGui 
```

至少这对我有用（PySide 1.1.1，Qt 4.8.1，最新的开发 Pyinstaller，OSX 10.7.5，没有更改规范文件和 pyinstaller 的 --onefile --windowed 参数。）没有这个片段，它也为我崩溃。

我想这会带来更多的依赖。

在另一个答案中找到了这个。

# c# - 将按钮设置为选定状态并更改样式

> ID：15822872
> 
> 赞同：3
> 
> 时间：2013-04-04T22:31:43.387
> 
> 标签：c#, wpf, button, styles, visualstatemanager

这是我的实际按钮样式：

```
<Style x:Key="CategoryButtonStyle" TargetType="{x:Type Button}">
    <Setter Property="HorizontalContentAlignment" Value="Center"/>
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="Padding" Value="1"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Grid x:Name="grid">
                    <Path x:Name="TabPath" StrokeThickness="2"
                          Margin="{Binding ElementName=buttonContent, Converter={x:Static c:ContentToMarginConverter.Value}}"
                          Stroke="{StaticResource BorderBrush1}"
                          Fill="{StaticResource TabItemPathBrush}">
                        <Path.Data>
                            <PathGeometry>
                                <PathFigure IsClosed="False" StartPoint="1,0" 
                                            Segments="{Binding ElementName=buttonContent, Converter={x:Static c:ContentToPathConverter.Value}}">
                                </PathFigure>
                            </PathGeometry>
                        </Path.Data>
                        <Path.LayoutTransform>
                            <!-- For some reason  -->
                            <ScaleTransform ScaleY="-1"/>
                        </Path.LayoutTransform>
                    </Path>
                    <Rectangle x:Name="TabItemTopBorder" Height="2" Visibility="Visible"
                               VerticalAlignment="Bottom" Fill="{StaticResource BorderBrush1}"
                               Margin="{Binding ElementName=TabPath, Path=Margin}" />
                    <ContentPresenter x:Name="buttonContent" Margin="10,2,10,2" VerticalAlignment="Center"
                                      TextElement.Foreground="{StaticResource ForegroundBrush}"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter Property="Fill" TargetName="TabPath">
                            <Setter.Value>
                                <SolidColorBrush Color="#FFe4f6fa"/>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="BitmapEffect">
                            <Setter.Value>
                                <DropShadowBitmapEffect Direction="302" Opacity="0.4" 
                                                        ShadowDepth="2" Softness="0.5"/>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Opacity" TargetName="grid" Value="0.25"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我需要添加可以将按钮设置为选定状态的代码，就像按下按钮时一样。我正在考虑使用 VisualStateManager 但我不确定它是否是好方法以及我该如何做到这一点。我从这样的事情开始：

```
<VisualStateManager.VisualStateGroups>
     <VisualState x:Name="Normal" />
     <VisualState x:Name="Selected">
        <Storyboard>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TabPath" 
                                   Storyboard.TargetProperty="Fill">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="#FFe4f6fa" />
             </ObjectAnimationUsingKeyFrames>
         </Storyboard>
     </VisualState>
</VisualStateManager.VisualStateGroups> 
```

但它不起作用。我只是不知道在情节提要中使用什么。

**编辑**- 几乎可以工作：

```
<VisualState x:Name="Selected">
     <Storyboard>
        <ColorAnimation Storyboard.TargetName="TabPath" Storyboard.TargetProperty="Fill.(LinearGradientBrush.GradientStops)[0].(GradientStop.Color)" To="#FFe4f6fa" Duration="0:0:0" />
        <ColorAnimation Storyboard.TargetName="TabPath" Storyboard.TargetProperty="Fill.(LinearGradientBrush.GradientStops)[1].(GradientStop.Color)" To="#FFa9cde7" Duration="0:0:0" />               
      </Storyboard>
 </VisualState> 
```

忘记添加我的画笔：

```
<LinearGradientBrush x:Key="TabItemSelectedPathBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Color="#FFe4f6fa" Offset="0"/>
    <GradientStop Color="#FFa9cde7" Offset="1"/>
</LinearGradientBrush>

<LinearGradientBrush x:Key="TabItemPathBrush" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Color="#FFa9cde7" Offset="0"/>
    <GradientStop Color="#FF3164a5" Offset="1"/>
</LinearGradientBrush> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-30T08:16:00.430

使用`ToggleButton`相同的样式和模板。

在您的样式（您原始问题中的样式）中，将`TargetType`样式和控件模板更改为`ButtonBase`.

在控制模板触发器中添加此触发器：

```
 <Trigger Property="ToggleButton.IsChecked" Value="True">
     <Setter Property="Fill" TargetName="TabPath">
         <Setter.Value>
             <SolidColorBrush Color="#FFe4f6fa"/>
         </Setter.Value>
     </Setter>
     <Setter Property="BitmapEffect">
         <Setter.Value>
             <DropShadowBitmapEffect Direction="302" Opacity="0.4" ShadowDepth="2" Softness="0.5"/>
         </Setter.Value>
     </Setter>
 </Trigger> 
```

现在您可以将此样式用于按钮、切换按钮、单选按钮和复选框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T00:52:26.407

我个人会使用 Blend 来完成这样的任务，它确实是 Visual Studio 开发 WPF 应用程序的伴侣。

只需单击几下，您就可以使用它，没有什么能阻止您使用它或将它生成的 XAML 复制到您的项目中。

*编辑按钮样式*

![在此处输入图像描述](https://i.stack.imgur.com/taokB.png)

*触发器*

![在此处输入图像描述](https://i.stack.imgur.com/29s02.png)

*这是您所有的按钮状态*

![在此处输入图像描述](https://i.stack.imgur.com/rqXiK.png)

混合就像黄油面包，WPF 更美味，除非你更喜欢纯黄油 :-)

请注意，如果您使用的是 VS2012 并且正在处理 WPF 项目，则[Microsoft Blend + SketchFlow Preview for Visual Studio 2012](http://msdn.microsoft.com/en-us/expression/jj154135.aspx)是允许您编辑 WPF 项目的版本。与 VS2012 捆绑的版本仅适用于 Windows Store 应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-29T06:10:04.447

`VisualStates`应该在`ControlTemplate`. 使用以下代码，

```
 <Grid>
    <Grid.Resources>
        <SolidColorBrush x:Key="FillBrush" Color="Magenta" />
        <Color x:Key="StateBrush" >#a3bfb1</Color>
        <Style x:Key="CategoryButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>

            <Setter Property="Padding" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border Background="Green" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" x:Name="root">

                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Selected">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TabPath" 
                               Storyboard.TargetProperty="Fill.(SolidColorBrush.Color)">
                                                <DiscreteObjectKeyFrame KeyTime="0"  Value="{StaticResource StateBrush}">

                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Grid x:Name="grid">
                                <Path x:Name="TabPath" StrokeThickness="1" 

                      Stroke="Blue"
                      Fill="{StaticResource FillBrush}" Canvas.Left="16.75"
          Canvas.Top="14"
          Width="50"
          Height="40"
          Data="F1 M 26.75,24L 16.75,34L 23.5,34L 34,24L 23.5,14L 16.75,14L 26.75,24 Z ">
                                    <Path.LayoutTransform>
                                        <!-- For some reason  -->
                                        <ScaleTransform ScaleY="-1"/>
                                    </Path.LayoutTransform>
                                </Path>
                                <ContentPresenter x:Name="buttonContent" Margin="10,2,10,2" VerticalAlignment="Center"
                                  TextElement.Foreground="{TemplateBinding Foreground}"/>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Grid.Resources>
    <Button x:Name="test" Style="{StaticResource CategoryButtonStyle}" Content="Test"  VerticalAlignment="Center" Width="200px" BorderBrush="#888" BorderThickness="1px"/>
</Grid> 
```

此代码将按预期更改状态。

> VisualStateManager.GoToState(test, "TestState", true);

根据需要对模板进行更改，但确保将 VisualState 声明放在`ControlTemplate`(`Border`在本例中)的 Root 元素中

**编辑**：我已经`VisualState`用正确的属性路径更新了 Selected 的转换声明。让我知道它是否能解决您的问题。

# android - HoloEverywhere pom.xml 错误

> ID：15822876
> 
> 赞同：0
> 
> 时间：2013-04-04T22:32:04.243
> 
> 标签：android, actionbarsherlock, android-holo-everywhere, android-compatibility

我正在尝试在 Action Bar Sherlock 旁边设置 HoloEverywhere，但出现以下错误。

找不到工件 org.holoeverywhere:resbuilder:pom:1.5.1-SNAPSHOT
pom.xml /HoloEverywhere 库第 1 行 Maven pom 加载问题

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:47:42.483

在导入 Eclipse 之前运行 mvn clean install。或者只是从项目中删除 Maven 性质。

# jquery-selectors - jQuery 选择器问题，不替换 HTML

> ID：15822882
> 
> 赞同：0
> 
> 时间：2013-04-04T22:32:30.493
> 
> 标签：jquery-selectors

```
 $.ajax({
    type: 'POST',
    url: "ajaxClients.php",
    data: '&m=removeAlert&id='+ alertId,
    success: function(resultData) {
        if ($('#noteRow_'+ alertId).length)
        {
            alert('ROW FOUND - CONTENT IS: '+ $('#noteRow_'+ alertId).html() +' -- REPLACING CONTENT NOW');
        }
        $('#noteRow_'+ alertId).html('<font color="red">- Note has been removed</font>');
    }
}); 
```

所以它很简单。成功后我确实收到了警报，它显示了警报中的内容等。

然后，当我尝试将 html 设置为其他内容时，它什么也不做。我试过 .empty()、.remove()... 没有控制台错误。任何想法我错过了什么？

编辑 - html...

```
<div id="noteRow_127"><img onclick="removeAlert('127')" style="cursor:pointer;" alt="Remove Message" title="Remove Message" src="images/notificationRemove.png" border="0"> [04/04/2013 06:26 PM] <b>Austin</b>: afvazf</div> 
```

“removeAlert()”是触发 ajax 调用的原因......

编辑 2...

我想不知何故这被放在页面上 2 次。虽然在 PHP 文件中只有一个构建行的函数实例，所以我想我只需要弄清楚那里发生了什么。因此，对于遇到此问题的其他人，请检查元素（使用 chrome 或类似元素）和 ctrl+f 并查看它是否多次出现在页面上！

最终编辑：

因为我不知道它是如何两次出现在页面上的

```
$('[id="noteRow_'+ alertId +'"]').html('<font color="red">- Note has been removed</font>'); 
```

照顾它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:43:52.420

[http://jsbin.com/ujimiw/2/edit](http://jsbin.com/ujimiw/2/edit)

从我的角度来看，它似乎工作正常。我只是将点击处理程序绑定到按钮，它就可以工作。

# c# - 相机跟随玩家，但“捕捉”到屏幕寄宿生

> ID：15822883
> 
> 赞同：0
> 
> 时间：2013-04-04T22:32:31.743
> 
> 标签：c#, xna

我正在尝试为 Jumping Platformer Example 创建一个相机类。[链接在这里](http://gamepopperdev.wordpress.com/games/2012-2/jumping-platformer-example/)

我只是不明白如何让相机跟随玩家的“球”。我知道瓷砖始终在屏幕上，但我想扩展地图 X、Y 并在您导航世界时使用相机跟随玩家。

如果有人可以查看教程，并向我解释如何添加相机类，我将非常感谢。（XNA 新手）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:01:46.710

简单的。它可能更容易完成，但这是一般的想法：

这是“X”坐标的简单方法。以后也可以为 Y 坐标复制，但是，它可以做得更简单。但这是为了展示整个过程。您可以只使用 Math.Max(Math.Min()) 并以较短的形式计算这些值，但这有效。

你可以在这里看到整个源代码：http: [//pastebin.com/G969mz0f](http://pastebin.com/G969mz0f)

将需要一个纹理文件“播放器”，并且您必须删除“Program.cs”，因为我将它们全部放在一个文件中。

```
public void Move(float x, float y, Camera2D Camera)
{

    Position.X += x;

    if ((Position.X < Camera.Min.X))
       Position.X = Camera.Min.X;

    if ((Position.X + Width) > Camera.Max.X)
       Position.X = Camera.Max.X - Width;

    float centerX = Position.X + (Width / 2);

    if (centerX > (Camera.Min.X + (ScreenDimension.X / 2)))
    {
        if (centerX < (Camera.Max.X - (ScreenDimension.X / 2)))
        {
            Camera.Move(-x, 0);
        }
        else
        {
            Camera.SetPosition(-(Camera.Max.X - ScreenDimension.X), Camera.Position.Y);
        }
    }
    else
    {
        Camera.SetPosition(Camera.Min.X, Camera.Position.Y);
    }

    // Removed Y because of code length

} 
```

# android - Android DHCP启用禁用检查

> ID：15822884
> 
> 赞同：1
> 
> 时间：2013-04-04T22:32:33.447
> 
> 标签：android, dhcp

我想知道是否有任何方法可以在 android 手机中以编程方式检查 DHCP 是启用还是禁用。（假设可以通过某种方式禁用 DHCP 或 dhcpd 未运行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:13:41.417

您可以执行以下操作来了解 Android 当前是使用静态 IP 地址还是 DHCP 属性地址：

```
try {
     if ( Settings.System.getInt(getContentResolver(), 
           Settings.System.WIFI_USE_STATIC_IP) == 0 )
         /* Static ip addresses mode is not enabled */
     ;
     } catch (SettingNotFoundException e) {
        /* Do something smart here */
     } 
```

但是，请注意，此方法现在似乎已弃用，并且它不适用于所有设备（例如 AVD）。

# javascript - IE 中同一域上的 Window.opener null

> ID：15822885
> 
> 赞同：1
> 
> 时间：2013-04-04T22:32:36.197
> 
> 标签：javascript, cross-domain, window.opener

我对此进行了广泛的研究（有很多类似的问题），但我没有找到我正在寻找的确切答案。

我正在创建一个单点登录小部件，因此用户流程如下：

用户点击登录打开窗口（域1）>登录流程（域2）>登陆页面（域1）

这是我在登录页面上使用的代码：

```
<html>
<head>
    <title>Redirect</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script type="text/javascript">
    if (window.opener && !window.opener.closed) {
        setTimeout(function(){
            window.opener.location.href = "[some URL]";
            window.close();
        },2000);
    }
    </script>
</head>
<body>
    <p>Logging you in...</p>
</body>
</html> 
```

最后设置登录页面的目的是为了消除访问 window.opener 的跨域问题。

这在除 IE 之外的所有浏览器中都像一个魅力（喘气！）。IE 说 window.opener 为空，即使我已返回自己的域。

到目前为止，我读过的任何内容都没有真正解决这个问题。我不得不认为必须有某种方法可以做到这一点，因为很多网站都在使用 FSSO。不幸的是，我们无法找到弹出窗口的替代方案。

由于浏览器相关的安全性，这在 IE 中是不可能的吗？我能想到的唯一另一件事是在父母身上放置某种监听器以等待孩子关闭。啊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:44:48.083

似乎问题与我们公司 IE 版本上设置的安全区域有关。不同的域被归入不同的区域。显然，IE 在通过这些区域时会丢失 window.opener 的值，并且不会费心去重置它。在 IE 的外部版本上进行测试时，它可以工作。

# php - 来自 CMS 帐户的 Youtube Data API PHP 频道列表查询

> ID：15822889
> 
> 赞同：0
> 
> 时间：2013-04-04T22:32:51.003
> 
> 标签：php, api, youtube

[对我询问的有关 Youtube Analytics API 的问题](https://stackoverflow.com/questions/15554106/using-the-youtube-analytics-api-with-a-cms-account)的回答的后续问题

根据上述问题的答案，我正在尝试使用 Google PHP API Client v0.6.1 查询 Youtube Data API（截至 2013 年 4 月 4 日的最新版本）

我的代码如下所示：

```
try { 
    $channelsResponse = $youtube->channels->listChannels('snippet,contentDetails', 
        array("managedByMe"=>"true", "maxResults"=>50, "onBehalfOfContentOwner"=>$youtube_partner_code));
} catch (Exception $e){
    return print "\n\nChannel list failed: ".$e->getMessage()."\n\n";
} 
```

但我收到以下异常消息：

```
Channel list failed: (list) unknown parameter: 'managedByMe' 
```

我在上面的代码中格式化参数的方式有问题，还是这个版本的 PHP 客户端库还不支持实验性 Youtbe Data V3 api 中的参数？

[当我使用Youtube Channel List doc 上的 API Explorer](https://developers.google.com/youtube/v3/docs/channels/list)尝试查询时，我的查询有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:45:15.447

[当前](https://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/Google_YouTubeService.php?spec=svn527&r=527)与 PHP 客户端库一起打包的YouTube Data API v3 服务定义文件不支持该新参数。[我将 ping 库的维护者并要求他重新生成服务定义以获取 API发现文档](https://developers.google.com/discovery/)中定义的最新参数。

其他 Google API 客户端库具有显式设置服务定义无法识别的参数的方法，但我不知道使用 PHP 客户端库有任何方法可以做到这一点。我会四处询问，如果我想出一个，我会更新这个答案。

# elasticsearch - 如何在 elasticsearch.yml 中编写相对路径？

> ID：15822890
> 
> 赞同：1
> 
> 时间：2013-04-04T22:32:54.737
> 
> 标签：elasticsearch

我想为 path.data 提供一个相对于 ElasticSearch 安装位置的值。

有可能做这样的事情吗？

`path.data: {ES_DIR}/../../data`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T23:26:53.043

是的，有可能：

```
path.data: ${path.home}/../../data 
```

# vb.net - axWebBrowser 不再触发事件/控制错误

> ID：15822892
> 
> 赞同：0
> 
> 时间：2013-04-04T22:33:04.737
> 
> 标签：vb.net, visual-studio-2010

我有一个包含 axWebBrowser 控件的项目。但是，该项目不再触发任何 axwebbrowser1 事件。如果我创建一个新项目，事件就会触发。删除 axWebBrowser 控件后，如果我尝试将 axWebBrowser 控件添加回窗体，则会收到此错误：

![电脑显示错误](https://i.stack.imgur.com/PC41H.png)

什么可能导致此错误？我的台式机/笔记本电脑上都存在此错误。我是否需要“接受”并从头开始重新创建 UI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T14:20:18.857

从我的项目中删除 /OBJ/ 文件夹并让它重建，解决了错误。

# c - 将 libpq-fe.h 添加到 qt 现有项目

> ID：15822893
> 
> 赞同：1
> 
> 时间：2013-04-04T22:33:05.920
> 
> 标签：c, qt, gcc, linker, libpq

我有一个使用 libpq-fe.h 连接到 postgresql 数据库的 C 代码。在本地它运行良好，一切正常，但现在我们正试图在 QT 现有项目中使用它。为什么不使用 qpsql 驱动程序呢？好吧，程序本身是纯 c++ 的，但我们只是使用 QT 作为编程的额外帮助，所以问题是......我如何告诉 QT 将代码与针对 libpq-fe.h 的标头链接？我们尝试添加路径 `LIBS += -I/usr/include/postgresql` ， `LIBS += -lpq` 但没有结果...我们还尝试将 CPPFLAGS 添加到 makefile 中，如文档所述，但是在重新编译时，程序会重新创建 makefile，所以它没有用 建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T22:23:43.760

试试这个。

```
INCLUDEPATH += -I"/usr/include/postgres"
LIBS += -L"[directory to postgres library files]" -lpq 
```

# php - PHP Simple HTML DOM - 获取标签内的文本

> ID：15822908
> 
> 赞同：8
> 
> 时间：2013-04-04T22:34:27.037
> 
> 标签：php, simple-html-dom

所以我有这个我必须分析的 .html 文件。在那个文件中，我有这样的行：

```
<tr>
    <td colspan=1 rowspan=1 bgcolor=#ffffff align=left valign=top>
        <font size=1 face="Tahoma" color=#000000>
            <nobr>
                 240,0000
            </nobr>
        </font>
    </td>

     <td colspan=1 rowspan=1 bgcolor=#ffffff align=left valign=top>
        <font size=1 face="Tahoma" color=#000000>
            <nobr>
                 340,0000
            </nobr>
        </font>
    </td>
</tr> 
```

我需要得到的是 240,0000 、 340,0000 等等。我尝试过这样的事情：

```
// Create DOM from URL or file
$html = file_get_html('File.html');

foreach($html->find('td') as $element) 
   echo $element->text. '<br>'; 
```

这样做我没有得到我想要的文本。

如何引用标签内的文本？所以我可以得到这些值。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T22:43:26.423

没有什么比`$element->text`使用`$element->plaintext`

```
foreach ( $html->find('td nobr') as $element ) {
    echo $element->plaintext . '<br>';
} 
```

# php - 将字符串转换为变量

> ID：15822910
> 
> 赞同：1
> 
> 时间：2013-04-04T22:34:35.633
> 
> 标签：php

好的，所以我想知道是否有任何（其他，最好是简单的）方法将字符串转换为变量。

我的有效代码如下：

```
echo eval('return $'. $date . ';'); 
```

$date 包含一个字符串。现在，代码可以工作了，如果没有别的，我可以保持原样，因为 $date 是从预编程的类声明中调用的：

```
Time::Format($id = 'id', $name = 'name', $date = 'date->format(Y)'); 
```

我问的原因是由于 PHP 官方对其使用的免责声明/警告： eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

因此，我认为我可以安全地使用它，因为 PHP 没有对用户输入的数据进行评估，这是我设置为编码器的字符串，但我想对它的使用以及任何使用提出第二意见输入另一种简单的方法来做到这一点（因为，如果我可以避免它，我宁愿不使用复杂且可能很长的代码块来完成可以简单完成的事情（前提是快速而肮脏地做是安全的） .

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T22:37:44.073

PHP 的变量变量将在这里帮助您。您可以通过在变量前面加上另一个美元符号来使用它们：

```
$foo = "Hello, world!";
$bar = "foo";
echo $$bar; // outputs "Hello, world!" 
```

# java - 如何创建一些查询机制——面向对象的设计

> ID：15822911
> 
> 赞同：0
> 
> 时间：2013-04-04T22:34:40.497
> 
> 标签：java, oop

我有一组对象（MyObject 类）。每个对象由三个名为`type`, `instance`,的字符串标识`name`。我将调用这些字符串`description`。我想创建一种机制来根据部分`description`或完整的`description`. 如果我有以下对象：

```
Object 1\. has type:myType; instance:myInstance; name:myName;
Object 2\. has type:myType; instance:myInstance2; name:myName2;
Object 3\. has type:myType2; instance:myInstance3; name:myName3;
Object 4\. has type:myType2; instance:myInstance3; name:myName4; 
```

我要那个

```
get("myType") returns objects 1\. and 2.
get("myType").get("myInstance") returns object 1.
get("myType2").get("myInstance3") returns objects 3\. and 4.
get("myType2").get("myInstance3").get("myName4") returns object 4. 
```

我的同事向我解释了如何实现这一点，但我不明白：| 他画了下图

![图表草稿](https://i.stack.imgur.com/GFLrk.jpg)

这张图上的什么地方`MyObject`？应该`MyObject`聚合`A`,`B`还是`C`反之亦然？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:16:17.643

你同事的图表看起来只是这个电话的一个例子：

```
get("myType2").get("myInstance3").get("myName4") returns object 4. 
```

如果我们重写它，那么它看起来像......

```
A = get("myType2");
B = A.get("myInstance3");
C = B.get("myName4"); 
```

但是无论 A/B/C 是什么，它的类都需要能够容纳多个项目，所以听起来你需要一个 MyObjectCollection<> 类，并为它实现 get()（它返回一个 MyObjectCollection<>）。

```
MyObjectCollection<MyObject> A = get("myType2");
MyObjectCollection<MyObject> B = A.get("myInstance3")
MyObjectCollection<MyObject> C = B.get("myName4") 
```

然后 C 将包含 MyObject 4。

# c++ - 调试网络应用程序和测试同步性？

> ID：15822913
> 
> 赞同：0
> 
> 时间：2013-04-04T22:34:45.587
> 
> 标签：c++, debugging, sockets, networking, synchronization

如果我的机器上运行着一台服务器，而其他网络上运行着几个客户端，那么测试它们之间的同步性的一些概念是什么？我怎么知道客户端何时不同步？
我对游戏设计领域的网络程序员如何做到这一点（或任何*持续*的网络交换应用程序）特别感兴趣，其中实时同步性通常是成功的重要方面。

我可以看到如何通过在不同机器上的并排比较在 LAN 上轻松实现这一点......但是一旦你将场景扩展到包括来自外国网络的客户端，我只是不确定如何在没有它的情况下完成用调试信息堵塞你的消息系统，因此有效地改变了同步性的产生方式*没有*通过网络传递调试信息。

那么人们有什么方法可以解决这个问题呢？
例如，他们是否只是简单地在本地网络上诱导/模拟延迟，然后再启动到外部网络，然后寄希望于最好的结果？我希望有一些更具体的解决方案，但这就是我在此期间正在做的事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:05:52.410

当您说同步时，我相信您是在谈论网络延迟。这意味着，本地网络上的客户端可能比该国另一端的客户端更快地获得其游戏信息。正确的？如果是这样，那么我相信您可以查找涵盖此类主题的书籍或论文，但我可以为您提供至少一种方法来检测这种延迟并提供一种管理它的方法。

为了检测延迟，您的服务器可以使用一种跟踪路由程序来确定数据到达每个客户端所需的时间。一个常见的 Linux 程序示例可以在这里找到[http://linux.about.com/library/cmd/blcmdl8_traceroute.htm](http://linux.about.com/library/cmd/blcmdl8_traceroute.htm)。在服务器处理客户端数据的同时，它还可以持续收集延迟统计数据并将数据提供给客户端。例如，服务器可以根据自己的网络延迟更新每个客户端，以及在游戏中互相玩的客户端组的最长延迟是多少。

然后，客户端可以使用延迟差异来确定他们应该何时处理从服务器接收到的数据。例如，服务器告诉客户端其网络延迟为 50 毫秒，其组的最大延迟为 300 毫秒。然后客户端知道在处理来自服务器的游戏数据之前要等待 250 毫秒。这样，每个客户端几乎同时处理来自服务器的游戏数据。

还有许多其他（可能更好）的方法来处理这种情况，但这应该会让你朝着正确的方向开始。

# xsd - 使用 JAXB 将 XSD 转换为 Java 的问题

> ID：15822915
> 
> 赞同：1
> 
> 时间：2013-04-04T22:35:21.980
> 
> 标签：xsd, jaxb

我正在尝试使用 JAXB 将我无法控制的 XSD 转换为 Java 类。我得到的错误是：

```
[ERROR] cvc-pattern-valid: Value 'true' is not facet-valid with respect to pattern '0|1' for type 'BooleanType'.
  line 139 of http://neon/meaweb/schema/common/meta/MXMeta.xsd

[ERROR] a-props-correct.2: Invalid value constraint value '1' in attribute 'mxencrypted'.
  line 139 of http://neon/meaweb/schema/common/meta/MXMeta.xsd 
```

XSD 中包含错误的代码位于：

```
 <xsd:complexType name="MXCryptoType">
    <xsd:simpleContent>
      <xsd:extension base="xsd:base64Binary">
        <xsd:attribute name="changed" type="ChangeIndicatorType" use="optional" />
        <xsd:attribute name="mxencrypted" type="BooleanType" use="optional" default="1" />
      </xsd:extension>
    </xsd:simpleContent> 
```

具体来说，它是使用 BooleanType 的属性 mxencrypted。BooleanType 定义为

```
 <xsd:simpleType name="BooleanType">
    <xsd:restriction base="xsd:boolean">
      <xsd:pattern value="0|1" />
    </xsd:restriction>
  </xsd:simpleType> 
```

从周围搜索来看，这似乎是一种常见的情况。据我所知，mxencrypted 行中的默认值不应该是 1？当我将 XSD 加载到 Liquid XML 中时，架构不会报告错误。在此处验证 XSD ( [http://www.utilities-online.info/xsdvalidation/#.UV3zkL_EW0s](http://www.utilities-online.info/xsdvalidation/#.UV3zkL_EW0s) ) 报告与 JAXB 相同的错误。

有没有办法告诉 JAXB 忽略这个问题，只生成忽略默认值的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:19:35.137

您的问题与[此](https://stackoverflow.com/questions/8975834/invalid-constraint-value)类似（我刚刚使用相关信息对其进行了更新）。我不知道有什么方法可以告诉 JAXB 忽略它，因为这个错误发生在 XSD 模式处理器中（在 JAXB 的 xjc 开始实际工作之前）。

唯一的方法可能是过滤掉默认属性；但是，在这种情况下，很明显 XSD 设计器打算使用默认值 true，而生成的代码并非如此（Java 默认为 false）。

这可能会产生不必要的争吵，我的建议是与 XSD 提供商合作来修复它。

也许是一个侧边栏，但我个人认为在 XSD 中使用默认值是一个*互操作性怪物*：任何不依赖 XSD 的 XML 处理器的行为都会与依赖 XSD 的处理器不同。

# java - CQ5 - 吊索访问节点

> ID：15822916
> 
> 赞同：2
> 
> 时间：2013-04-04T22:35:34.077
> 
> 标签：java, aem, sling

我完全是新手，所以我提前道歉。我已经设置了一个 CQ5 实例，但我不知道如何访问特定节点。所以说我有一个带有路径的组件： **/project/components/content/leftsidebar** 但我想在这里访问另一个节点的属性： **/content/dam/campaign**

我知道 properties.get 方法有效，但前提是您在该节点内 **properties.get("title", "placeholder");**

我是一个完整的新手，所以请发布代码示例是可能的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T23:50:12.747

您想使用`ResourceResolver`来获取您正在寻找的资源。从那里，您可以将其调整为`ValueMap`并读取其属性：

```
ResourceResolver resourceResolver = slingRequest.getResourceResolver();
Resource campaignResource = resourceResolver.getResource("/content/dam/campaign");
ValueMap campaignProperties = campaignResource.adaptTo(ValueMap.class);
String title = campaignProperties.get("title", "placeholder"); 
```

[**您可以在Apache Sling**网站](http://sling.apache.org/site/getting-resources-and-properties-in-sling.html)上阅读有关访问属性的更多信息。请记住，CQ5 是底层的 Sling，因此它是一个很好的资源，并且您仍然是直接访问 JCR 之上的抽象级别。

# forms - 输入字段加提交按钮在 Twitter Bootstrap 中的一行/行上覆盖整个列宽

> ID：15822917
> 
> 赞同：2
> 
> 时间：2013-04-04T22:35:39.153
> 
> 标签：forms, twitter-bootstrap

我正在尝试使用 Twitter Bootstrap 实现以下目标：

我想在 Twitter Bootstrap 中的一行或一行上有一个简单的`<input>`字段和一个简单的字段。`<button>`它们应该覆盖列/父容器的整个宽度（即与 span12 的宽度相同）。我不想给按钮一个固定的 - 我希望按钮是流体宽度（宽度由按钮文本确定）。输入字段应使用按钮左侧的剩余空间。

这是一个小提琴：http: [//jsfiddle.net/MgcDU/3202/](http://jsfiddle.net/MgcDU/3202/)

小提琴显示了向右对齐的按钮。

**现在：如何让输入字段扩展到父容器的最左边缘？**

当然，我想保留响应能力。

有任何想法吗？我确实更喜欢基于非 Javascript 的解决方案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T00:25:13.747

完毕

[http://jsfiddle.net/MgcDU/3251/](http://jsfiddle.net/MgcDU/3251/)

从这里使用方法：

[http://boulderinformationservices.wordpress.com/2011/02/02/input-field-and-submit-button-on-the-same-line-full-width/](http://boulderinformationservices.wordpress.com/2011/02/02/input-field-and-submit-button-on-the-same-line-full-width/)

```
 <div class="container">
        <div class="row">
            <div style="width:100%;background-color:#d0d0d0;text-align:center;">Example of a Full row</div>
        </div>
        <div class="row">
            <div class="span12">
                <div class="pull-right">
                    <form class="form-inline">
                        <button type="submit" class="btn" style="float:right;">Button</button>
                        <div style="overflow: hidden; padding-right: .3em;">
                            <input style="height:1.6em;width:100%" type="text" placeholder="full width minus button width" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T23:18:45.417

您可以使用 jQuery 获取按钮的宽度，并获取父 span12 的宽度，然后将输入宽度设置为两者的差。如果按钮宽度必须是动态的，我认为没有其他方法。

# f# - F# 加入 IQueryable

> ID：15822920
> 
> 赞同：2
> 
> 时间：2013-04-04T22:35:55.253
> 
> 标签：f#, type-providers, f#-3.0

我正在尝试使用 F# 查询表达式从数据库中检索数据。对于以下代码：

```
1   let q = query{
2       for i in dataContext.Incident do
3       select i
4   }
5   
6   let q2 = query{
7       for i in dataContext.Incident do
8       select i
9   }
10  
11  let q3 = query{
12      for i in q do
13      join i2 in q2
14      on(i.IncidentId = i2.IncidentId)
15      select i
17  } 
```

我在第 13 行收到错误，因为加入的语法不正确。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T23:09:48.687

F# 是一种对空格敏感的语言，这只是一个缩进问题；以下任何一项都应该起作用：

```
let q3 = query {
    for i in q do
    join i2 in q2 on (i.IncidentId = i2.IncidentId)
    select i
}

let q3' = query {
    for i in q do
    join i2 in q2 on
        (i.IncidentId = i2.IncidentId)
    select i
} 
```

# jquery - JQuery 日期插件

> ID：15822923
> 
> 赞同：1
> 
> 时间：2013-04-04T22:36:17.817
> 
> 标签：jquery, date, format

有谁知道一个 jquery 日期插件，或者另一种 jquery/javascript 方法来将默认格式化日期或 dd/mm/yyyy 转换为“人类可读”日期

2013 年 5 月 4 日

2013 年 4 月 5 日

? 我知道这可以通过制作我们自己的数组等手动完成......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:42:51.527

我用于日期解析的最棒的具有多种功能的插件是：

[http://momentjs.com/](http://momentjs.com/)

Moment 支持多种日期格式，可以将时间显示为经过的持续时间，与原生 JavaScript 库相比，可以读取多种格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:51:51.153

无需使用库...保持简单且不臃肿...

[http://jsbin.com/oyekaj/1/edit](http://jsbin.com/oyekaj/1/edit)

```
var date = '5/04/2013';
var months = ['January','February','March','April','May','June','July','Auguest','September','October','November','December'];

function daySuffix(d) {
    d = String(d);
    return d.substr(-(Math.min(d.length, 2))) > 3 && d.substr(-(Math.min(d.length, 2))) > 21 ? "th" : ["th", "st", "nd", "rd", "th"][Math.min(Number(d)%10, 4)];
}

var dataArray = date.split("/");
var newDate = new Date(dataArray[2], dataArray[1]-1, dataArray[0]);
var dateString = newDate.getDate()  + daySuffix(newDate.getDate()) + " " + months[newDate.getMonth()] + " " + (newDate.getYear()+1900);

console.log(dateString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T22:37:59.727

这非常棒且稳定： [http ://www.datejs.com/](http://www.datejs.com/)

# python - 为什么由代码创建的列表不包含大于 99,999 的值（Python）

> ID：15822924
> 
> 赞同：2
> 
> 时间：2013-04-04T22:36:19.490
> 
> 标签：python, list, palindrome

此代码旨在查找由两个 3 位数字的乘积创建的最大回文数。

我确信有更有效的方法来解决这个问题，欢迎您发布它们，但在我学习的这个阶段，我最感兴趣的是如何编辑我编写的代码使其正常工作。

当我运行这段代码时，它正确地创建了一个排序的回文列表，但列表中的最大数字是 99,999。我不明白为什么该列表没有超出此范围。

```
def palindromes():
    product_list=[]
    palindrome_list=[]
    for a in range(100,1000):
        for b in range(100,1000):
            product_list.append(a*b)
    for product in product_list:
        product = str(product)
        if len(product) % 2 == 0:
            if product[0]==product[5] and product[1]==product[4] and product[2]==product[3]:
                palindrome_list.append(product)
        if len(product) % 2 != 0:
            if product[0]==product[4] and product[1]==product[3]:
                palindrome_list.append(product)

    palindrome_list = sorted(set(palindrome_list))
    return palindrome_list

print(palindromes()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:57:48.423

你的代码正在做你告诉它做的事情。

与您的假设相反，**您的列表中有很多大于 99,999 的数字**。

我已经执行了你的代码，列表中的第一个结果是：`101101` 这显然是`> 99999`.

但是还有其他更大的`561165`和`888888`，它们也在您的列表中。

该列表总共包含`650`回文。这些是您唯一可以使用您的开始条件生成的

您**无法达到 999,999**，因为在您的`for`循环中无法达到...

Python 只是按照你说的去做。

编辑：就像奥斯卡的回答说的那样，你应该把你的限制设置为`1001`，然后回文`999,999`就会出现在你身上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:43:13.193

那是因为这部分是不正确的：

```
palindrome_list.append(product) 
```

您正在排序字符串，而不是数字 - 即使所有结果都出现在列表中，它们被排序为字符串，并且以与您预期不同的顺序出现。在出现的两个地方更改上面的代码，它应该是这样的：

```
palindrome_list.append(int(product)) 
```

现在很容易看出由两个 3 位数字（列表中的最后一个数字）的乘积创建的最大回文数是多少：

```
palindromes()[-1]
=> 906609 
```

# c# - 要调用此方法，“Membership.Provider”属性必须是“ExtendedMembershipProvider”的实例

> ID：15822925
> 
> 赞同：3
> 
> 时间：2013-04-04T22:36:27.147
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-web-api, authorization

我遇到了这个错误，我无法弄清楚。我正在通过 Chrome 中的 PostMan 将数据发布到我的控制器，到达 CreateUserAndAccount 方法，并收到此错误：

```
To call this method, the "Membership.Provider" property must be an instance of "ExtendedMembershipProvider". 
```

这是我的控制器：

```
[System.Web.Http.Authorize]
[InitializeSimpleMembership]
public class AccountController : ApiController
{
        // POST: /api/register
        [System.Web.Http.HttpPost]
        [System.Web.Http.AllowAnonymous]
        [ValidateAntiForgeryToken]
        //public HttpResponseMessage Register(RegisterModel model, string returnUrl)
        public HttpResponseMessage Register(RegisterModel model)
        {
            if (ModelState.IsValid)
            {
                // Attempt to register the user
                try
                {
                    WebSecurity.CreateUserAndAccount(model.UserName, model.Password); // blows up here
                    WebSecurity.Login(model.UserName, model.Password); 
```

我使用与 MVC SPA 模板相同的“InitializeSimpleMembershipAttribute”类：

```
{
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
    public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
    {
        private static SimpleMembershipInitializer _initializer;
        private static object _initializerLock = new object();
        private static bool _isInitialized;

        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            // Ensure ASP.NET Simple Membership is initialized only once per app start
            LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
        }

        private class SimpleMembershipInitializer
        {
            public SimpleMembershipInitializer()
            {
                Database.SetInitializer<UsersContext>(null);

                try
                {
                    using (var context = new UsersContext())
                    {
                        if (!context.Database.Exists())
                        {
                            // Create the SimpleMembership database without Entity Framework migration schema
                            ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                        }
                    }

                    WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
                }
                catch (Exception ex)
                {
                    throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
                }
            }
        }
    }
} 
```

在我的 web.config 中，我启用了 simpleMembership：

```
<add key="enableSimpleMembership" value="true" /> 
```

还能是什么？

编辑：我刚刚尝试了此链接中的提示：

[http://insomniacgeek.com/to-call-this-method-the-membership-provider-property-must-be-an-instance-of-extendedmembershipprovider/](http://insomniacgeek.com/to-call-this-method-the-membership-provider-property-must-be-an-instance-of-extendedmembershipprovider/)

我现在得到

> 在调用“WebSecurity”类的任何其他方法之前，您必须调用“WebSecurity.InitializeDatabaseConnection”方法。此调用应放置在站点根目录中的 _AppStart.cshtml 文件中。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T23:21:42.387

我发现了问题。我在我的 InitializeAttribute 类中引用了 System.Web.MVC……它应该是 System.Web.Http。

# oracle - 更新列（空值到整数）

> ID：15822926
> 
> 赞同：1
> 
> 时间：2013-04-04T22:36:28.420
> 
> 标签：oracle

所以我想要做的是更新我在 sql 中的一个表中的几列。我需要将当前为空的值更新为 0.75。我已经做了一些研究，但我无法具体找到与我的问题相关的答案。谁能帮我吗？我知道如果值不为空，它会读到这样的内容，

```
UPDATE copy_f_staffs
SET overtime_rate='11.10'
WHERE id=12; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:40:10.420

对于甲骨文

```
 UPDATE copy_f_staffs
 SET overtime_rate='11.10'
  WHERE overtime_rate is null; 
```

这会将您的 null overtime_rate 字段设置为“11.10”

# text - 如何从文本文件中删除不以某些字符开头的行（sed 或 grep）

> ID：15822927
> 
> 赞同：5
> 
> 时间：2013-04-04T22:36:33.767
> 
> 标签：text, sed, grep

如何删除文本文件中不以字符开头的所有行`#`，`&`或者`*`？我正在寻找使用`sed`or的解决方案`grep`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T22:44:07.437

**删除行：**

和`grep`

来自[http://lowfatlinux.com/linux-grep.html](http://lowfatlinux.com/linux-grep.html)：

> **grep**命令从文件（或一堆文件）中选择并打印与模式匹配的行。

我认为你可以这样做：

```
grep -v '^[\#\&\*]' yourFile.txt > output.txt 
```

* * *

你也可以`sed`用来做同样的事情（检查[http://lowfatlinux.com/linux-sed.html](http://lowfatlinux.com/linux-sed.html)）：

```
sed '^[\#\&\*]/d' yourFile.txt > output.txt 
```

由您决定

* * *

**过滤线：**

我的错误，我知道您想删除这些行。但是，如果您想“删除”所有其他行（或过滤以指定字符开头的行），那么`grep`方法就是：

```
grep '^[\#\&\*]' yourFile.txt > output.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T10:15:58.157

```
sed -n '/^[#&*].*/p' input.txt > output.txt 
```

这应该有效。

```
 sed -ni '/^[#&*].*/p' input.txt 
```

这个会直接编辑输入文件，小心+

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T22:45:56.793

```
egrep '^(&|#|\*)' input.txt > output.txt 
```

# php - 在 joomla 2.5 中自定义注册表单 - 根据单选按钮值动态启用字段

> ID：15822929
> 
> 赞同：0
> 
> 时间：2013-04-04T22:36:44.757
> 
> 标签：php, javascript, joomla

我想自定义 joomla 注册表单。我添加了 2 个文本字段（公司名称、增值税号），并创建了一个带有 2 个选项（商业用户、普通用户）的单选按钮 customerType。

现在所有字段都在表单中可见。我想要的是，当用户选择业务用户以启用 2 个文本字段时，当他选择普通用户以动态禁用它们时。

我想我需要在表单中添加 javascript。任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:11:45.480

我已经这样做了[`here`](http://www.farmleaseconnection.org/component/user/register.html)

```
# Script to show hide div
<script type="text/javascript">
    function show(obj) {

    if(obj == 'farmer')
    {
        document.getElementById('SkiDiv1').style.display = 'block';
        document.getElementById('SkiDiv2').style.display = 'none';
    }

    if(obj == 'landowner')
    {
        document.getElementById('SkiDiv2').style.display = 'block';
        document.getElementById('SkiDiv1').style.display = 'none';
    }
    if(obj == 0)
    {
        document.getElementById('SkiDiv2').style.display = 'none';
        document.getElementById('SkiDiv1').style.display = 'none';
    }

    }
    </script>

# Selct from dropdown
<select  name="siteusertype" class="inputbox1 required" onchange="show(this.value)">
    <option id="selectuser" value="0">Select User</option> 
    <option value="farmer">Are you a Farmer ?</option>
    <option value="landowner">Are you a Landowner ?</option>
</select>

# Both div with different IDs
<div id="SkiDiv1"> User 1 field </div>
<div id="SkiDiv2"> User 2 field </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:50:48.413

1-在javascript上创建一个函数并在每个收音机的onClick事件中引用。
2-内部javascript函数使用javascript的getElementById函数根据用户选择设置表单的任何html元素可见或不可见。

```
function hideElement()
{
   if (user select you want)
      document.getElementById("element-to-hide").style.visibility="hidden";
   else
     //if you want display element
      document.getElementById("element-to-display").style.visibility="visible";
} 
```

参见示例：
[http ://www.w3schools.com/jsref/met_doc_getelementbyid.asp](http://www.w3schools.com/jsref/met_doc_getelementbyid.asp)
[http://www.w3schools.com/jsref/prop_style_visibility.asp](http://www.w3schools.com/jsref/prop_style_visibility.asp)

# cocos2d-x - 2 翻页、翻页效果制作

> ID：15822930
> 
> 赞同：0
> 
> 时间：2013-04-04T22:36:45.153
> 
> 标签：cocos2d-x

试图实现一个简单的翻页效果，其中翻页从屏幕中心旋转，就像一本打开的书。我已经完成了一半的效果，但遇到了一个问题。这是我到目前为止正在做的事情......

1) 新场景在后面 (2 col) 2) 旧场景在前面 (2 col) 3) 将旧场景的右手 col 挤压到中心以显示新场景的右手侧。

这是我现在遇到问题的地方......下一步是在左侧的旧场景之上展开新场景，但新场景目前在旧场景后面。我想我需要一些如何实现以下...

1) 新场景右侧在后面 2) 旧场景右侧在前面 3) 新场景左侧在前面 4) 旧场景在后面左侧

然后应该是预先设置宽度并针对动画进行适当调整的情况。

关于如何实现这一目标的任何想法或指示......

提前致谢

# c - clock() - c 函数的执行时间

> ID：15822933
> 
> 赞同：1
> 
> 时间：2013-04-04T22:37:07.727
> 
> 标签：c, performance, time, clock

我正在尝试测量 C 中代码块的执行时间。我的代码中有这样的内容：

```
clock_t begin, end;
double time_spent;
begin = clock();
ATL_dsymv(122,n,alfa,A,n,X,1,beta,Y,1);
end = clock();
time_spent = (double)(end - begin) / CLOCKS_PER_SEC;
printf ("(%f seconds)",time_spent); 
```

但它总是返回：（0.000000 秒）。我在 for 等更简单的代码块上尝试了相同的操作，但结果相同。我究竟做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T22:56:09.783

`clock`通常分辨率**很差**，大约为 10 毫秒。这很可能是您的问题。如果您使用的是 POSIX 系统，`clock_gettime`请与`CLOCK_PROCESS_CPUTIME_ID`时钟一起使用以获得高分辨率结果。其他类型的系统可能具有特定于系统的方法来实现相同的目标。

# python - matplotlib imshow 如何绘制点而不是图像？

> ID：15822934
> 
> 赞同：0
> 
> 时间：2013-04-04T22:37:13.613
> 
> 标签：python, matplotlib

这是代码：

```
plots=imshow(Z,extent=extent,origin,cmap=cmap,aspect='auto',vmin=vmin,vmax=vmax)
plots.plot(Response,component,vrange) 
```

它根据数据列表 Z 绘制图像，我怎样才能让它打印数据点而不是图像？

看起来需要更改为 scatter(x, y,...) 来绘制数据点，将数组 Z 更改为 x, y 有多难？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:27:16.940

正如@jdj081 所说，您想要生成散点图。

```
import os.path

import matplotlib
import matplotlib.pyplot as plt
import numpy as np

# get an image from the sample data directory
fname = os.path.join(matplotlib.get_data_path(), 'sample_data', 'lena.png')
im = plt.imread(fname)

# Reduce the data by a factor of 4 (so that we can see the points)
im = im[::4, ::4]

# generate coordinates for the image. Note that the image is "top down", so the y coordinate goes from high to low.
ys, xs = np.mgrid[im.shape[0]:0:-1, 0:im.shape[1]]

# Scatter plots take 1d arrays of xs and ys, and the colour takes a 2d array,
# with the second dimension being RGB
plt.scatter(xs.flatten(), ys.flatten(), s=4,
            c=im.flatten().reshape(-1, 3), edgecolor='face')
plt.show() 
```

![莉娜的散点图](https://i.stack.imgur.com/OoIoF.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T23:13:50.277

您没有提供太多信息，但听起来您真的想创建一个散点图。

这里有很多选项，具体取决于您正在绘制的内容和您想要看到的内容，但我发现以下内容很有帮助：

[修复matplotlib中散点图中的颜色](https://stackoverflow.com/questions/2925806/fixing-color-in-scatter-plots-in-matplotlib)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T23:13:44.747

```
import pylab
pylab.figure(1)
pylab.plot([1,2,3,4],[1,7,3,5]) # draw on figure one
pylab.show() # show figure on screen 
```

# python - Python“系统找不到指定的文件”

> ID：15822935
> 
> 赞同：0
> 
> 时间：2013-04-04T22:37:16.113
> 
> 标签：python, windowserror

我正在尝试为 OpenDyslexic 字体编写安装程序。我已经在[https://github.com/kirbyfan64/OpenDyslexic-Installer](https://github.com/kirbyfan64/OpenDyslexic-Installer)有一个 Linux 版本，但 Windows 版本（显然）目前还不太好用。这是UAC问题吗？我想不出还有什么可做的。有两个奇怪的部分：程序正在通过`else`子句的事实以及`filecmp`找到第一个文件的事实。由于与问题相同的问题，我有一种感觉`else`正在执行`filecmp`。

代码：

```
"""This work is licensed under the
Creative Commons Attribution-
NonCommercial-ShareAlike 3.0 Unported
License. To view a copy of this license, visit
http://creativecommons.org/licenses/by-nc-sa/3.0/
or send a letter to Creative Commons,
444 Castro Street, Suite 900, Mountain View,
California, 94041, USA."""

import urllib
import os
import os.path
import shutil
import filecmp
import sys

def fcheck(filename):
    try:
        with open(filename) as f:
            return True
    except IOError:
        return False
homedir = os.environ['SystemRoot']
tempdir = os.environ['TEMP']
fontsdir = homedir + r'\Fonts'
installcheck = fontsdir + r'\OpenDyslexic-Regular.otf'
dpath = tempdir + r'\OpenDyslexic-Regular.otf'
dpath2 = tempdir + r'\OpenDyslexic-Bold.otf'
dpath3 = tempdir + r'\OpenDyslexic-Italic.otf'
dpath4 = tempdir + r'\OpenDyslexic-BoldItalic.otf'
print 'OpenDyslexic Installer Beta 1'
print ''
raw_input ('Press enter to install OpenDyslexic')
urllib.urlretrieve ('https://github.com/antijingoist/open-dyslexic/raw/master/otf/OpenDyslexic-Regular.otf', dpath)
urllib.urlretrieve ('https://github.com/antijingoist/open-dyslexic/raw/master/otf/OpenDyslexic-Bold.otf', dpath2)
urllib.urlretrieve ('https://github.com/antijingoist/open-dyslexic/raw/master/otf/OpenDyslexic-Italic.otf', dpath3)
urllib.urlretrieve ('https://github.com/antijingoist/open-dyslexic/raw/master/otf/OpenDyslexic-BoldItalic.otf', dpath4)
ifinstall = fcheck(installcheck)
if ifinstall == True:
    updcheck = 0
    originstall = fontsdir + r'\OpenDyslexic-Regular.otf'
    originstall2 = fontsdir + r'\OpenDyslexic-Bold.otf'
    originstall3 = fontsdir + r'\OpenDyslexic-Italic.otf'
    originstall4 = fontsdir + r'\OpenDyslexic-BoldItalic.otf'
    newupdate = filecmp.cmp(dpath, originstall)
    newupdate2 = filecmp.cmp(dpath2, originstall2)
    newupdate3 = filecmp.cmp(dpath3, originstall3)
    newupdate4 = filecmp.cmp(dpath4, originstall4)
    if newupdate == False:
        updcheck = updcheck + 1
    if newupdate2 == False:
        updcheck = updcheck + 1
    if newupdate3 == False:
        updcheck = updcheck + 1
    if newupdate4 == False:
        updcheck = updcheck + 1
    if updcheck != 0:
        raw_input ('Update Avalible. Press Enter to install.')
        os.remove(originstall)
        os.remove(originstall2)
        os.remove(originstall3)
        os.remove(originstall4)
        shutil.copyfile(dpath, originstall)
        shutil.copyfile(dpath2, originstall2)
        shutil.copyfile(dpath3, originstall3)
        shutil.copyfile(dpath4, originstall4)
        tst1 = fcheck(originstall)
        tst2 = fcheck(originstall2)
        tst3 = fcheck(originstall3)
        tst4 = fcheck(originstall4)
        tst5 = 0
        if tst1 == False:
            tst5 = tst5 + 1
        if tst2 == False:
            tst5 = tst5 + 1
        if tst3 == False:
            tst5 = tst5 + 1
        if tst4 == False:
            tst5 = tst5 + 1
        if tst5 != 0:
            if tst1 == True:
                os.remove(originstall)
            if tst2 == True:
                os.remove(originstall2)
            if tst3 == True:
                os.remove(originstall3)
            if tst4 == True:
                os.remove(originstall4)
            raw_input ('Installation Unsuccesful. Press Enter to exit.')
            sys.exit()
        os.remove(dpath)
        os.remove(dpath2)
        os.remove(dpath3)
        os.remove(dpath4)
        raw_input ('Installation Succesful. Press Enter to exit.')
        sys.exit()
    else:
        os.remove(dpath)
        os.remove(dpath2)
        os.remove(dpath3)
        os.remove(dpath4)
        raw_input ('No Update Avalible. Press Enter to exit.')
        sys.exit()
else:
    originstall = homedir + r'\Fonts\OpenDyslexic-Regular.otf'
    originstall2 = homedir + r'\Fonts\OpenDyslexic-Bold.otf'
    originstall3 = homedir + r'\Fonts\OpenDyslexic-Italic.otf'
    originstall4 = homedir + r'\Fonts\OpenDyslexic-BoldItalic.otf'
    newupdate = filecmp.cmp(dpath, originstall)
    newupdate2 = filecmp.cmp(dpath2, originstall2)
    newupdate3 = filecmp.cmp(dpath3, originstall3)
    newupdate4 = filecmp.cmp(dpath4, originstall4)
    shutil.copyfile(dpath, originstall)
    shutil.copyfile(dpath2, originstall2)
    shutil.copyfile(dpath3, originstall3)
    shutil.copyfile(dpath4, originstall4)
    tst1 = fcheck(originstall)
    tst2 = fcheck(originstall2)
    tst3 = fcheck(originstall3)
    tst4 = fcheck(originstall4)
    tst5 = 0
    if tst1 == False:
        tst5 = tst5 + 1
    if tst2 == False:
        tst5 = tst5 + 1
    if tst3 == False:
        tst5 = tst5 + 1
    if tst4 == False:
        tst5 = tst5 + 1
    if tst5 != 0:
        if tst1 == True:
            os.remove(originstall)
        if tst2 == True:
            os.remove(originstall2)
        if tst3 == True:
            os.remove(originstall3)
        if tst4 == True:
            os.remove(originstall4)
        raw_input ('Installation Unsuccesful. Press Enter to exit.')
        sys.exit()
    os.remove(dpath)
    os.remove(dpath2)
    os.remove(dpath3)
    os.remove(dpath4)
    raw_input ('Installation Succesful. Press Enter to exit.')
    sys.exit() 
```

错误：

```
Traceback (most recent call last):
  File "C:\Users\Ryan\Documents\opendyslexic-installer\opendyslexic_installer.py", line 109, in <module>
    newupdate = filecmp.cmp(dpath, originstall)
  File "C:\Python27\lib\filecmp.py", line 43, in cmp
    s2 = _sig(os.stat(f2))
WindowsError: [Error 2] The system cannot find the file specified: 'C:\\Windows\\Fonts\\OpenDyslexic-Regular.otf' 
```

# java - 比较时如何接受近似正确的字符串？

> ID：15822937
> 
> 赞同：3
> 
> 时间：2013-04-04T22:37:38.433
> 
> 标签：java, android, sqlite

我有一个预填充的 sqlite 数据库导入到 assets 文件夹中，我用它来为我的按钮设置一些文本，并将用户的输入与我在该数据库中的正确答案进行比较。但是我有两个问题我不知道如何解决。

1.  例如，我有一个答案是“迈克尔乔丹”或其他两个词。我有一个用户输入迈克尔乔丹，我很高兴，但如果他输入乔丹迈克尔，我就有麻烦了。它会弹出一个错误的答案警报。有没有办法接受这些词洗牌？

2.  另外，如果我有一个答案“Balls”并且用户输入“ball”，这将是错误的回答。如何确保所有单数和复数都被接受？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T00:05:15.520

## 模糊字符串比较算法

下面的自定义蛮力方法提供了单词交换，让您完全控制元音/辅音分数阈值，但增加了比较的总数。

您还需要检查此线程中描述的*Apache Lucene等方法：* [Java 中的模糊字符串搜索库](https://stackoverflow.com/questions/327513/fuzzy-string-search-in-java)

**自定义模糊比较配方**：

1.  **小写**：所有比较都将使用小写文本。要么确保参考数据库中的所有单词都是小写，要么`String.toLower()`在比较之前对数据库中的每个项目使用 a。显然，预处理数据库中的列表将显着提高性能。
2.  **删除空格和标点符号**：您必须创建一个函数，从任何短语中删除所有空格和其他标点符号。您的参考资料中应该有一个单独的列，其中包含预先计算的此信息以提高性能。
3.  **自定义比较功能**：您的`String`比较功能将比较每个字符并根据字母的接近程度分配自定义分数，其中最低分数表示最佳匹配。例如，相同的字符将添加零分。每个不匹配的辅音对将在分数上加 2。每个不匹配的元音将加 1。混合的不匹配将加 3。按字符数归一化分数。应用一个简单的阈值来确定可接受的匹配。在上面的例子中，`threshold=0.2`每 5 个字符大约允许出现一个小错误（这可以解决简单的拼写错误，但不会丢失字符。请参见下面的步骤 4）。
4.  **额外或缺失字符**：在每个比较中循环每个字符位置的额外时间。一次在那个位置没有角色，一次在那个位置有一个额外的角色。报告所有循环的最小*分数*。将该分数与阈值进行比较。如果分数低于阈值，则跳出循环并停止比较，从而表示*匹配*。这将捕获拼写错误，例如“collage”的“colage”。
5.  **Swap Words**：在步骤#4的循环之后，如果分数仍然高于阈值，则循环输入短语的每个单词并与其最近邻的相邻单词交换。并重新运行比较套件。显然，您将不得不查看原始原始用户短语来查找单词边界，而不是第 2 步中没有空格和标点符号的已处理短语。这将满足您允许“Jordan Michael”替换“Michael Jordan”的要求。

对于超过 2 个单词的长条目，此方法将导致每个数据库条目进行 10 次或更多的比较，因此肯定会影响性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:50:38.310

这是一个很好的问题。我认为，实际上你需要一本“有效”单词的字典。然而，字典本身并不能解决你的问题。您还需要一组基于您的字典的启发式方法来确定有效条目的构成。

我很想在这里尝试“尝试”，因为您可以比替代方法更好地封装富文本库。尝试，在这种情况下，将提供与说字典等类似的性能。使用尝试的额外好处是向您的应用程序添加新单词/短语是相当简单的。不利的一面是，尝试使用大量内存。也就是说，有一些技术可以用来压缩数据。

# javascript - Twitter Bootstrap - 如何在标签激活时调用函数？

> ID：15822942
> 
> 赞同：3
> 
> 时间：2013-04-04T22:38:06.653
> 
> 标签：javascript, twitter-bootstrap, tabs

我正在尝试在选项卡激活时显示警报对话框，但它不起作用：

```
$('#myTab').on('shown', function (e) {
alert('test')
}) 
```

我不知道我做错了什么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-28T17:20:34.120

在 Twitter Bootstrap 中，有一个在选项卡显示 ( `show.bs.tab`) 上触发的事件。给定以下选项卡：

```
<ul class="nav nav-tabs" id="myTab">
  <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
  <li><a href="#profile" data-toggle="tab">Profile</a></li>
  <li><a href="#messages" data-toggle="tab">Messages</a></li>
  <li><a href="#settings" data-toggle="tab">Settings</a></li>
</ul> 
```

...这是您可以使用的 Javascript：

```
$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
  alert(e.target); // activated tab
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T23:01:43.063

在引导程序中有`active`激活元素的类。您可以检查此类而不是`shown`. 这样的事情可能对你有用：

```
($('#myTab').hasClass('active')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T14:58:42.567

@alix 是正确的，您需要*在选项卡变为 active 时*调用初始化。我曾多次遇到此问题，并且在标签页上实现此功能时一直忘记这个事实。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-07T05:27:47.657

嘿，首先我在您的代码中没有看到任何错误。因此，导入库可能应该存在一些问题。无论如何，我想向您推荐另一种我在构建 html/javascript 应用程序时广泛使用的方法。

我使用[KnockoutJS](http://knockoutjs.com/)来处理动态内容、事件和数据。这是一个非常棒的框架，让很多事情变得更容易。最近我正在使用这个 twitter 引导程序，它使引导程序更强大。

因为你要做检查这个例子。可能您只需点击几下即可了解这一点。 [淘汰赛点击绑定](http://knockoutjs.com/documentation/click-binding.html)

# python - 是否可以使用单个记录器编写许多不同的日志文件？

> ID：15822943
> 
> 赞同：4
> 
> 时间：2013-04-04T22:38:10.650
> 
> 标签：python, logging

我的应用程序在相当长的一段时间内管理多个对象（称为请求）的状态。每个请求都有一个唯一标识符，并经历不同的生命周期。随着时间的推移，系统中会出现新的请求。

我想为每个请求编写一个单独的日志文件。日志将跟踪该请求状态的每一个有趣的变化。因此，如果我想了解有关 Request X 历史的所有信息，只需查看 X.log 即可。

显然，我可以使用纯文件手动推出解决方案。但我想用 Python 的日志框架来做到这一点。一种方法是为每个唯一请求创建一个新的记录器实例，将其配置为指向正确的文件，然后注销。但这感觉像是错误的解决方案。它创建了许多记录器，这些记录器不是垃圾收集的，而且也是无限的，因为新的请求将继续进入系统。

我希望有某种方法来配置单个记录器，可能使用自定义处理程序，以便我可以根据传入请求的 ID 将输出重定向到不同的文件。我查看了文档，但我看到的所有内容似乎都在传入记录的级别上工作，而不是操纵传出端点。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T06:29:26.493

查看[logging.handlers中](http://docs.python.org/2/library/logging.handlers.html#module-logging.handlers)[RotatingFileHandler](http://docs.python.org/2/library/logging.handlers.html#rotatingfilehandler)的代码最终给了我足够的线索来解决这个问题。关键实现是，当记录一条消息时，可以传递一个可选关键字，这是一个要存储在. 这可以从. 在 中，我们可以根据用户提供的值触发输出流的变化。`extra``Record``Handler``Handler`

```
import logging

class MultiFileHandler(logging.FileHandler):

    def __init__(self, filename, mode, encoding=None, delay=0):
        logging.FileHandler.__init__(self, filename, mode, encoding, delay)

    def emit(self, record):
        if self.should_change_file(record):
            self.change_file(record.file_id)
        logging.FileHandler.emit(self, record)

    def should_change_file(self, record):
        if not hasattr(record, 'file_id') or record.file_id == self.baseFilename:
             return False
        return True

    def change_file(self, file_id):
        self.stream.close()

        self.baseFilename = file_id
        self.stream = self._open()

if __name__ == '__main__':

    logger = logging.getLogger('request_logger')
    logger.setLevel(logging.DEBUG)    
    handler = MultiFileHandler(filename='out.log', mode='a')
    handler.setLevel(logging.DEBUG)    
    logger.addHandler(handler)

    # Log some messages to the original file
    logger.debug('debug message')
    logger.info('info message')

    # Log some messages to a different file
    logger.debug('debug message',       extra={'file_id':'changed.log'})
    logger.info('info message',         extra={'file_id':'changed.log'})
    logger.warn('warn message',         extra={'file_id':'changed.log'})
    logger.error('error message',       extra={'file_id':'changed.log'})
    logger.critical('critical message', extra={'file_id':'changed.log'}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T01:29:02.307

听起来您正在寻找一个完全不同的日志系统——一个不维护任何全局状态的系统。你看过[日志](http://pythonhosted.org/Logbook/)吗？

或者，如果您*必须*避免第三方依赖项，您可以使用[`logging.addLevelName`](http://docs.python.org/2/library/logging.html#logging.addLevelName)为每个请求添加一个级别，并添加一个带有[过滤器](http://docs.python.org/2/library/logging.html#filter-objects)的处理程序，该过滤器将每个不匹配的日志条目丢弃到每个请求的记录器中。一旦请求超出范围，您可以调用处理程序的[`close`](http://docs.python.org/2/library/logging.html#logging.Handler.close)方法将其从树中删除。

然而，这*很*可能不会很好地扩展，因为每个处理程序的过滤器都会为每条日志消息调用。

# .net - 声纳从不同的解决方案 (.NET) 运行测试

> ID：15822945
> 
> 赞同：0
> 
> 时间：2013-04-04T22:38:12.707
> 
> 标签：.net, testing, selenium, sonarqube, gallio

所以这是我的场景，我有 .NET 项目，我们称之为 FooBar，它是一个 Web 应用程序，在一个完全独立的解决方案中，我有一个 .NET 项目，我们称之为 FooBarSeleniumUITests 来使用 Selenium Webdriver 测试 Web 应用程序，它是旨在成为一个黑盒集成测试套件。现在，将这个测试套件作为 FooBar 报告的一部分报告到声纳中的最佳方法是什么，并且如果可能的话，在构建时启动测试套件中的测试列表并且需要通过才能使构建成功. 我已经将测试套件加载到gallio icarus中，但是声纳gallio插件页面指出集成测试必须在分析的解决方案中，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:02:30.327

在启动声纳分析之前运行您的 IT 并使用“sonar.gallio.it.mode=reuseReport”（以及“sonar.gallio.it.reports.path”和“sonar.gallio.it.coverage.reports.path”找到 XML 报告）应该成功。

请参阅[http://docs.codehaus.org/display/SONAR/sonar-dotnet-gallio-plugin](http://docs.codehaus.org/display/SONAR/sonar-dotnet-gallio-plugin)

但是，您必须确保不要将源移动到另一个文件夹，否则测试/覆盖报告将包含错误的路径，Sonar 将无法将这些测试/覆盖结果附加到您的项目资源中。

# android - Timer App 类似 4.2 时钟闹钟

> ID：15822946
> 
> 赞同：0
> 
> 时间：2013-04-04T22:38:15.853
> 
> 标签：android, timer, alarm, timepicker

我想做一些类似 4.2 时钟中的警报。

但是我想将它用于不同的计时器，而不是警报。

输入名称和分钟：秒，单击 +（例如），它会创建一个类似卡片的元素（甚至不是下拉或其他东西），我可以单击它来启动计时器或长按删除。

有没有一种简单的方法可以添加它，还是我必须从头开始创建它？

新的时间选择器对话框也不错，但它不是 Android 的一部分（只能找到滚轮选择器）？所以必须自己创造类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:20:43.653

如果您想模仿股票应用程序的功能，您应该查看代码本身。

[https://android.googlesource.com/platform/packages/apps/DeskClock/](https://android.googlesource.com/platform/packages/apps/DeskClock/)

# c++ - C++（函数，余弦）没有给出正确答案

> ID：15822947
> 
> 赞同：1
> 
> 时间：2013-04-04T22:38:33.640
> 
> 标签：c++, function, geometry, trigonometry

我一个月前才开始学习这门 C++ 课程。现在我被分配编写一个程序来计算这个。我不知道我做错了什么。

```
#include <stdio.h>
#include <math.h>

float gatherl1();
float gatherl2();
float gatheran();
void values(float,float,float);
float findlength(float,float,float);
float findan2(float,float,float);
float findan3(float,float,float);
void name(float,float,float);

int main(void)
{ 
    float length1,length2;

    float length3;

    float angle1,angle2,angle3;

    length1 = gatherl1();
    length2 = gatherl2();
    angle1 = gatheran();

    values(length1,length2,angle1);

    length3 = findlength(length1,length2,angle1);

    angle2 = findan2(length1,length2,length3);
    angle3 = findan3(length1,length2,length3);

    name(angle1,angle2,angle3);
}

float gatherl1()
{
        float l1;

        printf("Enter the length of one of the sides of any triangle\n");

        scanf("%f",&l1);

        return l1;
}

float gatherl2()
{
        float l2;

        printf("Enter the length of the other side\n");

        scanf("%f",&l2);

        return l2;
}

float gatheran()
{
        float angle;

        printf("Enter the angle between them.\n");

        scanf("%f",&angle);

        return angle;
}

void values(float l1, float l2, float angle)
{
    printf("\n The two sides are %f and %f. The angle between them is %f \n",l1,l2,angle);
}
float findlength(float l1, float l2, float angle)
{
    float l3,pyt,boy;

    if (angle==90)
    {
        pyt = pow(l1,2) + pow(l2,2);
        l3 = sqrt(pyt);

    }
    else 
    {
        boy = pow(l1,2) + pow(l2,2) - 2*l1*l2*cos(angle);
        l3 = sqrt(boy);
    }

    printf("\nthe third side is = %f",l3);
    return l3;
}

float findan2(float l1, float l2, float l3)
{
    float cosangle2,angle2;

    cosangle2 = (pow(l2,2) + pow(l3,2) - pow(l1,2)) / (2*l2*l3);
    angle2 = acos(cosangle2);
    return angle2;

}
float findan3(float l1, float l2, float l3)
{
    float cosangle3,angle3;

    cosangle3 = (pow(l1,2) + pow(l3,2) - pow(l2,2)) / (2*l1*l3);
    angle3 = acos(cosangle3);
    return angle3;

}

void name(angle,angle2,angle3)
{
    printf("\n\n\n the other two angles are %f and %f",angle2,angle3);

    printf("\n\n\n The angle you put is %f",angle);

    if(angle == 90)
    {
        printf("\n The triangle is a right triangle\n");
    }
    else if(angle < 90)
    {
        printf("\n The triangle is a acute triangle\n");
    }
    else
    { 
        printf("\n The triangle is a obtuse triangle\n");
    }

} 
```

我以前从未使用过 cos 和 arccos 函数，所以我不确定这是否是原因。或功能，因为我也是新手。请帮我！！谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T22:41:15.457

您传递给函数的值是否以弧度表示？因为 cos 和 arccos 假设弧度作为输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T22:42:23.497

C 三角函数以弧度而不是度数运行。您必须乘以`pi/180`将度数转换为弧度。

# java - isMaxSizeExceeded 时访问请求正文

> ID：15822948
> 
> 赞同：2
> 
> 时间：2013-04-04T22:38:42.727
> 
> 标签：java, playframework, multipartform-data, playframework-2.1

我正在使用play 2.1.0 并且想用几个参数实现文件上传，即`multipart/form-data`表单有一些小字段和文件本身。

如果我不使用注释上传文件

`@BodyParser.Of(value = BodyParser.MultipartFormData.class, maxLength = MAX_FILE_SIZE_B)`

并检查文件大小，就像`uploadedFile.length > MAX_SIZE`我可以访问请求正文一样，它不是一直为空。

如果我使用注释，当 maxSizeExceeded`ctx.request().body().asMultipartFormData()`为 null 时，即使我的小参数也会在浏览器发送的请求中排在第一位。这是正确的行为吗，即使文件太大，有什么方法可以获取小参数吗？

是不是第一种方式不好，因为大文件实际上会上传到服务器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T09:20:09.560

这种行为是预期的，因为标头将包含文件大小，如果有效负载/文件大小超过 max_size 限制，服务器将不会接收文件并且连接将被关闭。因此，您无法访问任何表单字段。如果有帮助，请尝试将这些字段添加为请求标头的一部分。

没有文档可以解释这一点，但这就是它在 http 层中的处理方式。下面的[代码](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/core/j/JavaParsers.scala)可能会解释一下，当有效负载超过限制时，它会用 body = null 包装对象。

要回答您的问题，是的，第二种方法很好，可以帮助您的服务器不必要地接受大文件。

# javascript - window.location.href 在 Windows Phone 7.1/7.5 上不起作用

> ID：15822950
> 
> 赞同：0
> 
> 时间：2013-04-04T22:38:49.227
> 
> 标签：javascript, windows-phone-7, windows-mobile, windows-phone-7.1, window.location

基本上，当触发事件时，我正在执行简单的 JS 重定向，此代码适用于所有其他移动/桌面浏览器（包括 IE 的桌面版本），但不适用于 WP7.1 和 WP7.5（我没有没有要测试的任何其他 WP 设备）。

```
window.location.href = "/item_details/" + item_id; 
```

我看到的行为是手机导航栏中的 URL 被替换，它就像在加载页面一样；当它无限期挂起时，进度条会慢慢增加直到 ~90%。查看我服务器上的日志，我看到没有来自设备的传入连接。如果我单击地址栏并手动提交，则预期的页面会立即加载。

我也看到以下每一行的相同行为：

```
window.location.href = "http://www.google.com"
window.location.replace = "http://www.google.com"
window.location = "http://www.google.com" 
```

在每种情况下，加载栏都会进展到 ~90% 并停止，不进行任何传出连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:38:35.953

事实证明，`href="javascript:void(0)"`锚标签中的问题导致了移动 IE 的问题。删除导致重定向完美无缺的工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:48:18.270

尝试不同的方法，看看问题是否与`window.location`.

```
var anchor = document.createElement('a');
anchor.href = "http://www.google.com";
document.body.appendChild(anchor);
anchor.click(); 
```

# css - 在保留样式的同时居中引导导航栏

> ID：15822953
> 
> 赞同：0
> 
> 时间：2013-04-04T22:38:55.743
> 
> 标签：css, twitter-bootstrap, navbar

如何在[此页面](http://qualitypainting.ca/)上居中导航栏，同时仍保持背景渐变？[我已经看到了一些](https://stackoverflow.com/questions/10128812/center-navbar-in-twitter-bootstrap-2-0)将`li`设置为 display `inline`、`a`to display`inline-block`和`ul`将文本居中对齐的技巧，但这些都需要我添加`float:none`到代码中，这会破坏我的背景渐变。有人可以阐明一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:54:05.520

在标记中添加两个类（使用可选名称，只是为了覆盖 CSS）。让我们称之为`.nav-container`和`.menu-nav`。

```
 <div class="navbar-inner">
        <div class="container nav-container">
          <ul class="nav menu-nav">
            <li><a href="#services">Services</a></li>
            <li><a href="#portfolio">Portfolio</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="#about">About</a></li>
          </ul>
        </div>
      </div> 
```

然后添加CSS

```
.nav-container {
    text-align: center;
}

.menu-nav {
    float: none;
} 
```

我在我的 Chrome 检查器中更改了它，背景渐变看起来和以前一样。

# java - 进度条会自行重置？

> ID：15822954
> 
> 赞同：1
> 
> 时间：2013-04-04T22:39:09.033
> 
> 标签：java, android, progress-bar

当我上传超过 5MB 的文件时，进度条会在达到 4% 时自行重置，并且每 10 秒从 0 开始。但是，对于 5MB 以下的文件，进度条可以正常工作并达到 100%

这是因为`maxBufferSize`? 服务器最大帖子大小为 512MB，其他一切都是无限的，所以问题一定出在我的代码上，但我不确定在哪里。

这是我的代码

```
@Override
protected void onProgressUpdate(Integer... progress) {
         super.onProgressUpdate(progress);

     //update Dialog box progress   
     mProgressDialog.setProgress(progress[0]); 
        if ( nofti_appended )
        {       
         //update Notification progress
          mBuilder.setProgress(100, progress[0], false);
        }
}

protected String doInBackground(String... urls) {    
            String upLoadServerUri = upApi.uploadUrl;
            String fileName = this.file_path;
            HttpURLConnection connection = null;
            DataOutputStream outputStream = null;
            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary = "*****";
            int bytesRead, bytesAvailable, bufferSize;
            byte[] buffer;
            int maxBufferSize =  1*1024*1024;
            File sourceFile = new File(fileName);
            int sentBytes = 0;
            long fileSize = sourceFile.length();

             try
                {
                    FileInputStream fileInputStream = new FileInputStream(new File(fileName));

                    URL url = new URL(upLoadServerUri);
                    connection = (HttpURLConnection) url.openConnection();

                    // Allow Inputs & Outputs
                    connection.setDoInput(true);
                    connection.setDoOutput(true);
                    connection.setUseCaches(false);
                    connection.setChunkedStreamingMode(1024);
                    // Enable POST method
                    connection.setRequestMethod("POST");

                    connection.setRequestProperty("Connection", "Keep-Alive");
                    connection.setRequestProperty("Content-Type",     "multipart/form-data;boundary="+boundary);

                    outputStream = new DataOutputStream(     connection.getOutputStream() );
                    outputStream.writeBytes(twoHyphens + boundary + lineEnd);
                    outputStream.writeBytes("Content-Disposition: form-data; name=\"file[]\";filename=\""+ fileName + "\"" + lineEnd);
                    outputStream.writeBytes(lineEnd);

                    bytesAvailable = fileInputStream.available();
                    Log.v("Size",bytesAvailable+"");

                    bufferSize = Math.min(bytesAvailable, maxBufferSize);
                    buffer = new byte[bufferSize];

                    // Read file
                    bytesRead = fileInputStream.read(buffer, 0, bufferSize);

                    while (bytesRead > 0)
                    {

                        if(isCancelled()){

                            break;
                        }

                        sentBytes += bytesRead;
                        publishProgress((int)(sentBytes * 100 / fileSize));

                        outputStream.write(buffer, 0, bufferSize);

                        bytesAvailable = fileInputStream.available();

                        bufferSize = Math.min(bytesAvailable,     maxBufferSize);
                        bytesRead = fileInputStream.read(buffer, 0,      bufferSize);
                    }

                   if(isCancelled()){

                        return "faild";
                    }

                    outputStream.writeBytes(lineEnd);
                    outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

                     Scanner s;
                     s = new Scanner(connection.getInputStream());
                     s.useDelimiter("\\Z");
                     final String response = s.next();

                    // Responses from the server (code and message)
                    int serverResponseCode       = connection.getResponseCode();

                    fileInputStream.close();
                    outputStream.flush();
                    outputStream.close();

                    if(serverResponseCode == 200)
                     {
                        return response;
                     }

                } catch (MalformedURLException ex) {

                } catch (final Exception e) {

                }

            return "faild";
        } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:17:43.887

我认为您的进度计算实际上有两个问题：

首先，你的逻辑不太对。应该是（原因见下一段）：

```
(sentBytes / fileSize) * 100 
```

但是，第二个问题是您正在使用`int`值，但尝试进行浮点计算。（百分比是`0.01`- `1.00`，然后乘以`100`将其变为`1%`- `100%`。）您需要将计算作为浮点数，然后将最终值转换为整数。

尝试类似的东西

```
publishProgress((int)(((sentBytes * 1.0) / fileSize) * 100))); 
```

不过，这将是很多`()`对。最好声明一个单独的`float`或`double`变量，并使用它来代替：

```
percentDone = (sentBytes * 1.0) / fileSize * 100;
publishProgress((int)percentDone); 
```

# java - 有趣的布尔语法

> ID：15822958
> 
> 赞同：0
> 
> 时间：2013-04-04T22:39:57.733
> 
> 标签：java, boolean

我最近遇到了一些奇怪的事情。考虑以下方法：

```
public boolean addAll(Collection<T> col) {
    boolean added = false;

    for(T t : col)
        added |= add(t);

    return added;
} 
```

虽然我知道这是要做什么，但如果它至少超过一次（如果后面的元素失败），那就不要将其更改为 false。但这实际上意味着什么。怎么读的。有没有类似的小工具`boolean`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:42:23.663

`|=`运算符等价于：

```
added = ( added | add(t) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T22:43:12.230

它是按位或与等号组合。

因此，如果它之前已设置为 true (ie `1`)，如果您按位或 true 或 false ( `1`or `0`) 使用它，您将始终返回 true ( `1`) as `0 OR 1 = 1`and `1 OR 1 = 1`。

它实际上与以下内容相同：

```
added = (added | add(t)); 
```

# c# - 我可以使用 Visual Studio Express 开发将在 MS Windows Server 2003 和 MS Access 2003 中运行的代码吗？

> ID：15822961
> 
> 赞同：-1
> 
> 时间：2013-04-04T22:40:13.907
> 
> 标签：c#

我在 MS Access 2003 中有一个数据库，它驻留在运行 MS Windows Server 2003 的服务器中。我想开发 C# 代码来操作数据库中的数据。我可以使用免费的 Visual Studio Express 开发代码以在前面提到的环境中运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:46:25.540

当您下载*Visual Studio 2012 Express*时，它将包含非常有限的功能。但是，它将适应所有*标准*和*基本*的开发人员目标。您没有的任何功能都可以通过下载其他组件来添加。另一种选择是购买更高级的版本。

默认情况下是的，它将适用于您询问的环境。

所有的变化都可以在[这里找到：](http://www.microsoft.com/visualstudio/eng/products/compare)

希望这会有所帮助。

# asp.net-mvc - 未从局部视图 MVC4 发布的值

> ID：15822962
> 
> 赞同：1
> 
> 时间：2013-04-04T22:40:14.950
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, controller

出于某种原因，我的部分视图总是将空值返回给控制器。我已经尝试以几种不同的方式（包括编辑器模板）来实现它，但这是我最新的。

基本上我正在使用 jquery ui datepicker 渲染视图。当用户选择一个日期时，我会渲染我的部分视图。部分视图正在正确呈现，但是当我提交部分视图时，它向控制器返回了一个空对象

**查看型号：**

```
public class Attendance
{
    public int RecordId { get; set; }
    public int GroupId { get; set; }
    public int MemberId { get; set; }
    public string MemberName { get; set; }
    public System.DateTime Date { get; set; }
    public bool Present { get; set; }

} 
```

**父视图：**

```
@{
    ViewBag.Title = "Take Attendance";
}

<h2>Take Attendance</h2>

@Html.Hidden("GroupId", (int)ViewBag.GroupId)

<div>
@Html.Label("Select A Date")
@Html.JQueryUI().Datepicker("attendanceDate",ViewBag.AttendanceDate)
                .OnSelect("attendanceDate.onSelect")
</div>

<div id="attendanceRecords">
</div>

@section scripts
{
    <script src="@Url.Content("../../Scripts/Views/TakeAttendance.js")" type="text/javascript"></script>
} 
```

**局部视图：**

```
@model IEnumerable<AT.Manager.Models.Attendance>

@using (Html.BeginForm("TakeAttendance", "Groups")) {
    @Html.ValidationSummary(true)

    <table>
        <tr>
            <th>Name</th>
            <th>Present?</th>
        </tr>
        @for (int i = 0; i < Model.Count(); i++ )
        {
            <tr>
                <td>@Html.DisplayFor(model => Model.ElementAt(i).MemberName)</td>
                <td>@Html.EditorFor(model => Model.ElementAt(i).Present)</td>
                <td>@Html.HiddenFor(model => Model.ElementAt(i).GroupId)</td>
                <td>@Html.HiddenFor(model => Model.ElementAt(i).MemberId)</td>
                <td>@Html.HiddenFor(model => Model.ElementAt(i).RecordId)</td>
            </tr>                      
        }
    </table>
    <p>
        <input type="submit" value="Create" />
    </p>
} 
```

**控制器动作：**

```
public ActionResult TakeAttendance(IEnumerable<Attendance> records)
{
    if (ModelState.IsValid)
    {
        var newRecords = records.Select(x => new da.Attendance() { Id = x.RecordId, GroupId = x.GroupId, MemberId = x.MemberId, Date = x.Date });
        AttendanceRepository attendanceRepo = new AttendanceRepository();
        newRecords.Each(x => attendanceRepo.InsertOrUpdate(x));
        return RedirectToAction("Index");
    }
    else
    {
        return View();
    }

} 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:23:09.640

您可以尝试传递`IList<Attendance> records`给视图，然后像这样操作它：

```
for (int i = 0; i < Model.Count(); i++ )
{
    <tr>
        <td>@Html.DisplayFor(model => Model[i].MemberName)</td>
        <td>@Html.CheckBoxFor(model => Model[i].Present)</td>
        // ...
    </tr>                      
} 
```

请务必更改`@model IEnumerable<AT.Manager.Models.Attendance>`以反映集合更改为`IList`.

# java - Spring数据 - 并发创建如果不存在导致重复的整体

> ID：15822965
> 
> 赞同：1
> 
> 时间：2013-04-04T22:40:49.807
> 
> 标签：java, jpa, concurrency, spring-data

我有以下代码，它在多个线程中运行：

```
@Component
public class CreateInstrumentTask {

   @Autowired
   InstrumentRepository repository; // Spring-data JPA repo interface

   @Transactional
   public void createInstrument(String instrumentId) {
      synchronized(instrumentId.intern()) {
         QInstrument $instrument = QInstrument.instrument;
         Instrument instrument = repository.findOne($instrument.instrumentId.eq(instrumentId));

         if (instrument == null) {
            log.info("Thread {} creating instrument {}", Thread.currentThread().getName(), message.getInstrumentId());

            instrument = createInstrument(instrumentId); // impl. ommitted
            repository.saveAndFlush(instrument);
         }
      }
   } 
```

这会注销：

```
INFO [] Thread taskExecutor-1 creating instrument ABC
INFO [] Thread taskExecutor-17 creating instrument ABC
org.springframework.integration.MessageHandlingException:       
org.springframework.dao.DataIntegrityViolationException: Duplicate entry 'ABC' for key 'instrumentId'; 
```

我预计，鉴于代码是`synchronized`针对 的`instrumentId`，应该防止重复。

但是，我猜是因为代码是事务性的，并且事务的边界在方法上（不是同步块），所以锁在事务持续之前被释放，允许重复。

这必须是一个相当普遍的模式（“如果不存在则创建”）。以并发方式执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:51:05.387

我最终重构了转移事务边界的方法：

```
public void createInstrument(String instrumentId) {
   synchronized(instrumentId.intern()) {
        persistInstrument(instrumentId);
   }
}

@Transactional
protected void persistInstrument(String instrumentId) {
    QInstrument $instrument = QInstrument.instrument;
   Instrument instrument = repository.findOne($instrument.instrumentId.eq(instrumentId));

   if (instrument == null) {
      log.info("Thread {} creating instrument {}", Thread.currentThread().getName(), message.getInstrumentId());

      instrument = createInstrument(instrumentId); // impl. ommitted
      repository.saveAndFlush(instrument);
   }   
} 
```

# python - 是否有 Python API 可以返回有关 TLS 连接的精确密码信息？

> ID：15822967
> 
> 赞同：2
> 
> 时间：2013-04-04T22:40:54.090
> 
> 标签：python, ssl, https, encryption

我正在尝试编写一个 python（或 Java）程序，该程序与网站建立 https 连接，然后返回 https 连接的属性。我一直在使用 python 的 ssl ( [http://docs.python.org/2/library/ssl.html](http://docs.python.org/2/library/ssl.html) )，特别是 .cipher() 方法。我对输出的主要问题是它不是很具体：

('RC4-SHA', 'TLSv1/SSLv3', 128)

这是 www.amazon.com 的输出。但是当我进入浏览器并手动检查连接时，我真的可以看到它是：RC4 与 SHA1 消息身份验证、RSA 密钥交换和 TLS v1.0。事实上，.cipher() 方法为 TLS 版本 1.0、1.1 和 1.2 输出 TLSv1/SSLv3，并为 SHA1 和 SHA256 输出 SHA。

是否有任何 Python（或 Java）API 可以为我提供有关 https 连接的更多信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T23:59:18.367

Python`ssl`模块只是 OpenSSL 的一个包装器，它不能提供比库提供的更多信息。但实际上，我认为您没有遗漏任何信息。它*是*具体的。你总是得到 TLSv1.0 和 SHA1。

首先，`TLSv1/SSLv3`在 OpenSSL 0.9 中意味着 TLSv1.0。它不能表示 1.1 或 1.2，因为 OpenSSL 0.9 不支持这些协议。（您可能使用的是 OpenSSL 0.9。例如，我刚从 Python.org 下载的 3.3.0 64 位 Mac 二进制安装程序使用 0.9.8r。）您可以使用`ssl.OPENSSL_VERSION`.

其次，`RC4-SHA`表示 SHA1，而不是 SHA256。`RC4-SHA`只是 TLSv1.0 密码套件的 OpenSSL 名称`TLS_RSA_WITH_RC4_128_SHA`。这是密码的完整规范；他们的名字末尾有不同的密码`SHA256`。您可以查看[RFC 2246](https://www.rfc-editor.org/rfc/rfc2246#appendix-C)中指定的密码套件列表及其 TLS 1.0 的附录（1.1的[RFC4346和 1.2 的](https://www.rfc-editor.org/rfc/rfc4346#appendix-D.3)[RFC 5246](https://www.rfc-editor.org/rfc/rfc5246#appendix-A.5)）。我不认为从 OpenSSL 名称到 RFC 名称的映射是在代码内部以外的任何地方指定的，但是如果您有命令行 OpenSSL 工具，您可以键入`openssl ciphers`以转储所有建议的密码套件的 OpenSSL 名称列表，它将发送，然后您可以将它们与握手中发送的值匹配。（要查看握手`openssl s_client -connect www.amazon.com:443 -msg`，或尝试`-debug`或其他标志而不是/除了`-msg`。）

那么，为什么您的浏览器会为其中一些相同的站点显示 TLSv1.2 或 SHA256？因为您的浏览器具有完全不同的 SSL 库（或更新的 OpenSSL），因此与服务器进行完全不同的握手，最终同意不同的密码套件，因此它报告不同的信息。

所以，并不是 Python 正在协商 TLSv1.2 或 SHA256 并且只是对你隐藏它；它正在与同一台服务器协商 TLSv1.0 和 SHA1，并告诉你它做了什么。

如果你想使用一个不同的库来处理 OpenSSL 0.9 不能处理的事情，有很多选择。如果您安装[OpenSSL](https://www.openssl.org) 1.0.1 或更高版本并针对它构建[PyOpenSSL](https://pypi.python.org/pypi/pyOpenSSL)，我相信（我尚未测试）您应该能够协商更新的协议和密码，并发现您已经这样做了。如果您[`ssl`](https://pypi.python.org/pypi/ssl)针对它重建 Python 或独立模块，它甚至可能会返工。（如果这些都不起作用，那么 PyPI 上还有无数的[OpenSSL 包装器和其他 SSL](https://pypi.python.org/pypi?:action=search&term=ssl&submit=search)或[TLS](https://pypi.python.org/pypi?:action=search&term=tls&submit=search)模块，或者你可以`ctypes`自己喜欢。）

# django - 如何使管理员中的用户只能查看相同创建的内容？django

> ID：15822971
> 
> 赞同：0
> 
> 时间：2013-04-04T22:41:20.283
> 
> 标签：django, django-models, django-admin

我正在实现用户可以管理，并且可以实现只创建没有员工，超级管理员，组，权限的新用户，但我不能让用户只看到make，看不到我或其他用户创建的用户。

我离开这里，这样做是为了让用户可以在不更改权限的情况下创建用户：

```
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth.models import User

class MyUserAdmin(UserAdmin):
    def queryset(self,request):
        qs = admin.ModelAdmin.queryset(self,request)
        if request.user.is_superuser:
            return qs
        # Sólo permitir la visualización/edición de usuarios que no son superusuarios
        return qs.filter(is_superuser=False)
    def get_readonly_fields(self, request, obj=None):
        # Denegar edicion de: staf, super usuario, grupos, permisos
        return () if request.user.is_superuser else ('is_staff','is_superuser', 'groups', 'user_permissions')

admin.site.register(User, MyUserAdmin) 
```

# php - 为 Laravel 4 队列监听器启用详细模式

> ID：15822974
> 
> 赞同：6
> 
> 时间：2013-04-04T22:41:30.380
> 
> 标签：php, queue, laravel, laravel-4

通过 运行侦听器时`php artisan queue:listen`，即使 Worker 可能正在回显某些内容，它也非常安静。

**问题：**您如何使这些回声显示在屏幕上，类似于`php artisan queue:work`它是如何做到的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T14:56:00.850

我不相信 listen 意味着有任何输出，而且我在[ListenCommand 中看](https://github.com/laravel/framework/blob/master/src/Illuminate/Queue/Console/ListenCommand.php)不到任何暗示有更多输出要给出的东西。但是，当您向工匠寻求帮助时，它会建议`--verbose (-v)`您可以试一试？

```
php artisan queue:listen -v 
```

我对listen的理解是它被设计为作为后台服务运行，本质上是`queue:work`重复调用。如果你想测试一个工人是否在工作，你只需给`queue:work`自己打电话。您可能想查看在代码中添加一些[日志记录](http://four.laravel.com/docs/errors#logging)，然后您将能够查看日志文件。

* * *

> ```
> $ php artisan help queue:listen
> 
> Usage:
>  queue:listen [--queue[="..."]] [--delay[="..."]] [--memory[="..."]] [--timeout[="..."]] [connection]
> 
> Arguments:
>  connection            The name of connection
> 
> Options:
>  --queue               The queue to listen on
>  --delay               Amount of time to delay failed jobs (default: 0)
>  --memory              The memory limit in megabytes (default: 128)
>  --timeout             Seconds a job may run before timing out (default: 60)
>  --help (-h)           Display this help message.
>  --quiet (-q)          Do not output any message.
>  --verbose (-v)        Increase verbosity of messages.
>  --version (-V)        Display this application version.
>  --ansi                Force ANSI output.
>  --no-ansi             Disable ANSI output.
>  --no-interaction (-n) Do not ask any interactive question.
>  --env                 The environment the command should run under.> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-04T16:23:44.853

`php artisan queue:listen`现在确实在运行时将工作器输出呈现到控制台。不需要详细模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T18:09:28.937

听得很安静。就个人而言，我使用 OS X / Linux 并在另一个终端窗口中运行以下命令来监视输出。

```
tail -f storage/logs/* 
```

# javascript - 隐藏弹出扩展页面

> ID：15822975
> 
> 赞同：0
> 
> 时间：2013-04-04T22:41:33.770
> 
> 标签：javascript, css, popup

我正在使用 Jquery 灯箱弹出类型在点击页面上显示数据。非常基本：当不使用弹出窗口时，它是隐藏的，然后在单击链接时可见。

问题是当数据弹出很长时，即使隐藏它也会拉伸页面，在我的页面底部留下一堆空白。

如何让隐藏的弹出窗口不伸展我的页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:47:11.770

你可以用css解决它：设置高度和宽度，然后设置`overflow:hidden`或滚动或自动或设置`display:none`

并且使用 jquery 你可以隐藏你的元素：`$(element).hide()`

# python - Fortran 的未格式化输入/输出

> ID：15822976
> 
> 赞同：1
> 
> 时间：2013-04-04T22:41:39.067
> 
> 标签：python, fortran

我正在尝试使用 FortranFile 来获取可以在用 F95 编写的模拟代码中使用的输出。我无法让 fortranfile 正常工作。也许是因为我不明白它是如何工作的。这是我的问题：

如果我想使用 FortranFile 编写一维数组，它可以正常工作：

```
nx = 128
bxo = np.zeros(nx, dtype=float)
bxo = something
import fortranfile as fofi
bxf=fofi.FortranFile('Fbx.dat',mode='w')
bxf.writeReals(bxo,prec='d')
bxf.close() 
```

上面的 1D 版本就像一个魅力。一旦我尝试为二维数组做这件事，我就会遇到问题

```
nx = 128; ny = 128
bxo = np.zeros((nx,ny), dtype=float)
bxo = something
import fortranfile as fofi
bxf=fofi.FortranFile('Fbx.dat',mode='w')
bxf.writeReals(bxo,prec='d')
bxf.close() 
```

当我尝试这样做时，我收到以下错误：

```
---------------------------------------------------------------------------
error                                     Traceback (most recent call last)
/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/IPython/utils/py3compat.py in execfile(fname, *where)
    173             else:
    174                 filename = fname
--> 175             __builtin__.execfile(filename, *where)

/Users/parashar/Dropbox/sandbox/test2d.py in <module>()
    130 vyf=fofi.FortranFile('Fvy.dat',mode='w')
    131 vzf=fofi.FortranFile('Fvz.dat',mode='w')
--> 132 bxf.writeReals(bxo,prec='d')
    133 byf.writeReals(byo,prec='d')
    134 bzf.writeReals(bzo,prec='d')

/Users/parashar/Dropbox/sandbox/fortranfile.py in writeReals(self, reals, prec)
    215         _fmt = self.ENDIAN + prec
    216         for r in reals:
--> 217             self.write(struct.pack(_fmt,r))
    218         self._write_check(length_bytes)
    219

error: required argument is not a float 
```

任何想法可能会发生什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:46:03.867

我喜欢 Emmet 的建议，但考虑到我对 python 的了解非常基础，对于一个短期目标来说，这将是一个很大的努力。我刚刚意识到我可以用稍微不同的方式来处理这种情况。

Fortran 中的直接访问文件没有通常未格式化的 fortran 文件所具有的不必要的前导/尾随信息。因此，处理 Fortran 和 Python 之间交换的未格式化数据的最简单方法是将文件视为 Fortran 中的直接访问。这是一个示例，说明我们如何使用来自/来自 python/fortran 的数据。

Python代码：

```
import numpy as np
nx=128; ny=128;
bxo=np.zeros((nx,ny),dtype=float)
bxo=something
bxf=open('Fbx.dat',mode='wb')
np.transpose(bxo).tofile(bxf) # We transpose the array to map indices 
                              # from python to fortran properly
bxo.close() 
```

Fortran 代码：

```
 program test
  implicit none
  double precision, dimension(128,128) :: bx
  integer :: NNN, i, j
  inquire(iolength=NNN) bx
  open(unit=23,file='Fbx.dat',form='unformatted',status='old',&
        access='direct',recl=NNN)
  read(23,rec=1) bx
  close(23)
  ! Write it out to a text file to test it
  ! by plotting in gnuplot
  do i=1,128; do j=1,128
     write(23,*) i,j,bx(i,j)
  enddo; enddo
  end 
```

因为我们使用标准二进制格式来读取/写入数据，所以与 FortranFile 方法不同，此方法适用于任何大小的数组。

我已经意识到，通过坚持在 Fortran 中直接访问文件，我们可以与其他语言（例如 Python、IDL 等）具有更广泛的兼容性。这样我们就不必担心奇怪的前导尾随标记、字节序等。

我希望这也能帮助我遇到这种情况的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:53:21.997

我从来不需要同时使用 Fortran 和 Python 做任何事情，并且对 fortranfile.py 一无所知，但我最好的猜测是 fortranfile 不支持 numpy。

当您使用 1D numpy 数组或 Python 数组、列表等时，堆栈跟踪的最后一部分中的迭代表明它需要一个可迭代的数字（“for r in reals”），而当您尝试序列化 2D numpy 数组，我不确定它会得到什么（即“r”最终是什么），可能是迭代器的可迭代，或者一维数组的可迭代。简而言之，'r' 不仅仅是预期的数字（“必需的参数不是浮点数”），而是其他的东西（如一维数组、列表等）。

我会尝试看一下，看看 fortranfile 中是否有 writeReals() 的替代方法，如果没有，可以使用一些 copypasta 来破解一个可以处理 2D 数组的方法。

我将首先在“self.write()”行 (217) 之前放置一个诊断打印，该行告诉您“r”实际上是什么，因为它不是预期的浮点数。

# android - Gridview v7 对旧 api android.support.v7.widget.Gridlayout 的支持未能实例化

> ID：15822977
> 
> 赞同：2
> 
> 时间：2013-04-04T22:41:42.313
> 
> 标签：android, android-support-library

我一直在尝试使用 v7 支持库在我的 android 项目中使用网格布局。我已经看到很多人遇到了与我相同的问题，但他们的所有修复都对我不起作用。我已经更新了java。我已经更新了最新的支持库。我已将支持包添加到构建路径。我尝试将 gridview 拖到视图上并允许 eclipse 导入包。这些工作都不是。我继续`android.support.v7.widget.GridLayout`无法实例化。我什至创建了一个测试项目并从支持网格布局和相同的错误开始。有人有其他想法吗？这些是我寻求帮助的一些地方：

[Eclipse 给出 android.support.v7.widget.GridLayout 的错误无法实例化](https://stackoverflow.com/questions/10773981/eclipse-giving-an-error-of-android-support-v7-widget-gridlayout-failed-to-instan)

[IntelliJ 和 android.support.v7.widget.GridLayout](https://stackoverflow.com/questions/12468606/intellij-and-android-support-v7-widget-gridlayout)

[Eclipse 和 Android SL GridLayout 不能一起工作 - “android.support.v7.widget.GridLayout 无法实例化”](https://stackoverflow.com/questions/15816283/eclipse-and-android-sl-gridlayout-not-working-together-android-support-v7-wid)

在许多其他....

这是我的activity_main.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<android.support.v7.widget.GridLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    app:alignmentMode="alignBounds"
    app:columnCount="6"
    app:columnOrderPreserved="false"
    app:useDefaultMargins="true" >

    <EditText
        android:id="@+id/total"
        app:layout_column="0"
        app:layout_columnSpan="6"
        app:layout_gravity="left"
        app:layout_row="0"
        android:clickable="false"
        android:ems="10"
        android:inputType="none|number"
        android:textAlignment="textEnd"
        android:width="500dp" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/Button8"
        app:layout_column="1"
        app:layout_row="1"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="8" />

    <Button
        android:id="@+id/Button9"
        app:layout_column="2"
        app:layout_row="1"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="9" />

    <Button
        android:id="@+id/Button4"
        app:layout_column="0"
        app:layout_row="2"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="4" />

    <Button
        android:id="@+id/Button5"
        app:layout_column="1"
        app:layout_row="2"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="5" />

    <Button
        android:id="@+id/Button6"
        app:layout_column="2"
        app:layout_row="2"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="6" />

    <Button
        android:id="@+id/ButtonMultiply"
        app:layout_column="3"
        app:layout_row="2"
        android:background="@drawable/custom_button"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="Multiply"
        android:text="*"
        android:textColor="@color/light_grey" />

    <Button
        android:id="@+id/Button1"
        app:layout_column="0"
        app:layout_row="3"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="1" />

    <Button
        android:id="@+id/Button2"
        app:layout_column="1"
        app:layout_row="3"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="2" />

    <Button
        android:id="@+id/Button3"
        app:layout_column="2"
        app:layout_row="3"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="3" />

    <Button
        android:id="@+id/ButtonMinus"
        app:layout_column="3"
        app:layout_row="3"

        android:background="@drawable/custom_button"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="Subtract"
        android:text="-"
        android:textColor="@color/light_grey" />

    <Button
        android:id="@+id/ButtonDivide"
        app:layout_column="3"
        app:layout_gravity="right"
        app:layout_row="1"
        app:layout_rowSpan="2"
        android:background="@drawable/custom_button"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="Divide"
        android:text="/"
        android:textColor="@color/light_grey" />

    <Button
        android:id="@+id/button0"
        app:layout_column="0"
        app:layout_columnSpan="2"
        app:layout_row="4"
        android:background="@drawable/button_light_grey"
        android:minHeight="20dp"
        android:minWidth="82dp"
        android:onClick="numberButtonEventHandler"
        android:text="0" />

    <Button
        android:id="@+id/buttonPoint"
        app:layout_column="2"
        app:layout_row="4"
        android:background="@drawable/button_light_grey"
        android:minHeight="20dip"
        android:minWidth="40dp"
        android:onClick="numberButtonEventHandler"
        android:text="."
        android:width="20dip" />

    <Button
        android:id="@+id/ButtonPlus"
        app:layout_column="3"
        app:layout_row="4"
        android:background="@drawable/custom_button"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="Add"
        android:text="+"
        android:textColor="@color/light_grey" />

    <Button
        android:id="@+id/ButtonEqueals"
        app:layout_column="4"
        app:layout_row="3"
        app:layout_rowSpan="2"
        android:background="@drawable/custom_button"
        android:height="40dp"
        android:minHeight="82dp"
        android:minWidth="20dp"
        android:onClick="Equeals"
        android:text="="
        android:textColor="@color/light_grey"
        android:width="40dp" />

    <Button
        android:id="@+id/Button7"
        app:layout_column="0"
        app:layout_row="1"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="7" />

</android.support.v7.widget.GridLayout> 
```

这是项目树的一个片段，显示了所有指向 v7 gridlayout 的引用库、依赖项和库：新编辑，要求删除一个引用。

![在此处输入图像描述](https://i.stack.imgur.com/taDjK.png)

这是我得到的确切例外：

```
java.lang.ClassNotFoundException: android.support.v7.gridlayout.R$dimen
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at android.support.v7.widget.GridLayout.<init>(GridLayout.java:255)
    at android.support.v7.widget.GridLayout.<init>(GridLayout.java:274)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:422)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:179)
    at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207)
    at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:372)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:385)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:332)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:440)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1545)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1302)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1059)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:686)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
    at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:292)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3028)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1749)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:278)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1053)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:942)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-18T03:49:11.160

我遇到了同样的问题，我通过将“.../android-sdks/extras/android/support/v7/gridlayout”作为“Existing Android Code Into WorkSpace”导入来修复它。

它的项目名称是“android.support.v7.widget.GridLayout”，它是一个库。然后你应该在 Project/Properties/Android/Library 面板中“添加...”它作为一个库。然后它应该工作。希望这对您有所帮助。

下面是我的xml：

```
<ScrollView
    xmlns:grid="http://schemas.android.com/apk/res-auto"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="10dp" >

    <android.support.v7.widget.GridLayout
        android:id="@+id/gridlayout_home"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:paddingBottom="5dp"
        grid:columnCount="4"
        grid:rowCount="4" >
    </android.support.v7.widget.GridLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:17:13.593

M also using this , i am using this as like this ![enter image description here](https://i.stack.imgur.com/Y51T1.jpg)

see this , i have added a gridlayout and that is added in my generated files, but in your case don't add gridview in generated files thats why you are faceing that problem, make build path or if you say i will send you my gridview layout , but it is auto generated when i add a gridview in design file then it download automatically and add refrence automatically, so you agin add gridview from design file and that gridlayout also in your generated files, that link your project with gridviewlayout V7...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:52:19.857

好的，我以一种奇怪的方式解决了这个问题。另外，如果有人能给我一个解释，我会给他们赏金！我开始玩 Virtual Box，非常喜欢新的 Fedora 18。决定双启动创建一个 android 开发环境。下载了结合了 Eclipse 包的 adt。我在 Windows 中创建了一个 50GB 的分区来在操作系统之间共享文件并将我的项目复制到那里。引导到 Fedora 并开始一个新的 android 项目。将我的 windows 项目中的所有文件复制并粘贴到这个新项目中，然后.... Presto！开箱即用。无需修改构建路径或其他任何内容。我收到一个警告：`[2013-04-10 07:27:45 - gridlayout_v7] WARNING: unable to write jarlist cache file /home/craig/workspace/gridlayout_v7/bin/jarlist.cache`但该项目在我的 avd 中运行没有问题。那怎么办？为什么它不能在 Windows 中工作，但在 Linux 中工作？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-10T17:41:04.963

我通过将 android-support-v7-gridlayout.jar 库设置为在 gridlayout_V7 项目上导出来解决了这个问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T11:12:20.317

尝试删除**app:useDefaultMargins="true"**或将其设为 false。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-15T08:01:45.230

我也遇到了同样的问题，通过在项目库文件夹中添加“android-support-v7-gridlayout.jar”引用来解决。

从路径：（Android 安装）\sdk\extras\android\support\v7\gridlayout\libs

到路径：（工作区路径）（应用程序名称）\libs

# php - 如何上传到目录？Ajax 发布请求 PHP 上传

> ID：15822981
> 
> 赞同：0
> 
> 时间：2013-04-04T22:41:58.180
> 
> 标签：php, ajax, upload, directory

这是 php/ajax 上传脚本的一部分。有人知道如何上传到目录吗？

```
<?php

if(isset($_FILES["imageNameHere"]) && !empty($_FILES["imageNameHere"])) {
// Random name
$name= rand(10, 20).'.png';
// Move the file
//move_uploaded_file($_FILES["imageNameHere"]['tmp_name'], $name);//orginal

move_uploaded_file( $_FILES["imageNameHere"]["tmp_name"],$name, "uploads/" .  
$_FILES['imageNameHere']['tmp_name'][$name]); // My Try

// Return name
echo $name;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:48:30.033

这应该有效，更改：

```
move_uploaded_file( $_FILES["imageNameHere"]["tmp_name"],$name, "uploads/" . $_FILES['imageNameHere']['tmp_name'][$name]); // My Try 
```

至：

```
move_uploaded_file( $_FILES["imageNameHere"]["tmp_name"], "uploads/" . $name); 
```

`rand()`但是，当两次生成相同的数字时，您会遇到问题。

# excel - VB - 拆分串行数据字符串并分别记录到 Excel

> ID：15822982
> 
> 赞同：1
> 
> 时间：2013-04-04T22:42:12.803
> 
> 标签：excel, vb6, split, uart

我有一个格式为“X0507Y0512Z0413”的数据字符串。我正在使用 VB 从 pic 微控制器读取数据，并使用网络上的 VB 脚本将数据加载到 excel 中。我可以以上述形式将第一行数据放入电子表格的第一个单元格中。但是，我希望将此字符串分成三列 X、Y 和 Z，并从每个变量的开头删除字母。它还必须一次读取最多 20 秒的数据，因此每个值都需要附加到前一个值。到目前为止，这是我的 VB 脚本，我尝试了 Split() 命令并收到错误 13 类型不匹配。

```
Private Sub CommandButton3_Click()

   Dim intPortID As Integer ' Ex. 1, 2, 3, 4 for COM1 - COM4
   Dim lngStatus As Long
   Dim strData   As String
   Dim xyzData As String

   intPortID = 4
   lngStatus = CommRead(intPortID, strData, 1)
   xyzData = Split(strData, "X""Y""Z")
   Range("A2,B2,C2").Value = xyzData

End Sub 
```

我是一个新手，所以这可能是一个非常简单的修复，如果它看起来微不足道，请道歉。任何建议都会很棒。

SJ

附言

如果每个变量用逗号分隔会更简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:48:26.380

第一个问题是`xyzData`设置为字符串。当您从 a 填充它时，`Split`您需要一个数组：

```
Dim xyzData() as String 
```

我想不出一种简单的方法来在 VBA 中进行拆分，因为您每次都由不同的字符进行拆分 - 它需要一个定制的函数来处理它。以下作品 - 我的 VBA 有点生锈，所以它可能会变得更整洁，但我认为它有效：

```
Private Function SplitXYZ(strData As String) As String()

    Dim pos1 As Integer
    Dim pos2 As Integer
    Dim char As String
    Dim i As Integer

    Dim ret() As String
    Dim retCount As Integer
    ReDim ret(0)

    For i = 1 To Len(strData)

        'Get and check the character from the string
        char = Mid(strData, i, 1)
        If char = "X" Or char = "Y" Or char = "Z" Then

            'Set the positions for the new range
            pos1 = pos2
            pos2 = i

            'If the range is valid then add to the results
            If pos1 > 0 Then
                ReDim Preserve ret(retCount)
                ret(retCount) = Mid(strData, pos1 + 1, pos2 - pos1 - 1)
                retCount = retCount + 1
            End If

        End If
    Next i

    'Add any final string
    ReDim Preserve ret(retCount)
    ret(retCount) = Mid(strData, pos2 + 1, Len(strData) - pos2)

    SplitXYZ = ret

End Function 
```

使用它很简单：

```
Private Sub Test()

   Dim strData   As String
   Dim xyzData() As String

   strData = "X0507Y0512Z0413"
   xyzData = SplitXYZ(strData)

End Sub 
```

然后如何使用拆分数组取决于您。

另一件事：如果您可以假设字符串中的每条数据长度相同（即前面有字母的 4 位数字），那么按长度分解字符串可能更简单，但您没有指定这是的情况，所以我没有假设它。

# c# - 枚举类型的别名 C#

> ID：15822984
> 
> 赞同：0
> 
> 时间：2013-04-04T22:42:23.117
> 
> 标签：c#, .net

```
public enum eEstado
{
    Active = 3,
    Inactive = 4
} 
```

我需要为枚举属性设置不同的名称（如别名）。例如，对于“Activo”，类似于“Activo”等。我还需要从值（3 或 4）中获取该字符串。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:47:38.073

要将别名转换为枚举值：

```
public static eEstado AliasToEstado(string alias)
{
    switch(alias)
    {
        case "Activo": return eEstado.Active;
        case "Inactivo": return eEstado.Inactive;
        default: throw new ArgumentException(alias);
    }
} 
```

从枚举值转换为别名：

```
 public static string EstadoToAlias(eEstado value)
 {
    switch(value)
    {
        case eEstado.Active: return "Activo";
        case eEstado.Inactive: return "Inactivo";
        default: throw new ArgumentException(value);
    }
 } 
```

从 int 值转换为别名：

```
int value = 3;
string alias = EstadoToAlias((eEstado)value); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T23:23:52.727

很难理解你到底在问什么，但我认为这会有所帮助：

您可以有多个名称具有相同的值`enum`：

```
public enum Status
{
  Undefined = 0,
  Active = 1,
  Inactive = 2,
  Default = Active
} 
```

你可以从一个字符串中解析

```
static void Main(string[] args)
{
    Status status = Status.Default;

    string new_status = "Inactive";

    status = (Status)Enum.Parse(typeof(Status), new_status);

    Console.WriteLine(status.ToString());
    // prints "Inactive"

    status = (Status)1;
    Console.WriteLine(status.ToString());
    // prints "Active"

} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-04T22:48:08.233

您可以在枚举中使用任何名称，但不能将枚举用于字符串

像

```
public enum eEstado
{
// its an valid enum
    Activo = 3,  
    Inactivo = 4
} 
```

并使用像字符串这样的枚举

您可以将其转换为字符串

出口。

```
strinf s=eEstado.Activo.ToString(); 
```

然后

```
if(s==eEstado.Activo.ToString())
{
  // do sumthing
} 
```

在此 's' 的值不会 3 。它会“Activo”，我认为它会对你有所帮助

欢迎您的感谢

祝你好运

# ruby-on-rails - 在公共 github 存储库中保持 http 身份验证私有？

> ID：15822988
> 
> 赞同：1
> 
> 时间：2013-04-04T22:42:31.253
> 
> 标签：ruby-on-rails, heroku, github, basic-authentication

我有一个公共 Github 存储库，用于我想添加身份验证的应用程序。我计划使用基本的 http 身份验证，但这需要我将用户名和密码存储在公开的配置文件（或类似文件）中。

这意味着任何人都可以在公共配置文件中找到用户名和密码。

有没有办法在不创建完全私有的仓库的情况下保持身份验证安全（即私有）？

或者也许是一种在 Heroku 推送期间绕过 Github 的方法，以便实时（Heroku）环境接收身份验证凭据，而无需从公共 Github 存储库中检索它们？

编辑：感谢您的回复。他们可能很好地解决了我的问题，但不幸的是，他们有点超出我的技能水平。我认为我最好的选择是在处理身份验证和环境变量之前进行更多研究。再次感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T23:17:01.423

Heroku 实际上有这样的解决方案，你可以使用 config vars。在终端或 CMD 中，您可以通过运行添加配置变量：

```
heroku config:add USERNAME=johndoe
heroku config:add PASSWORD=password 
```

依此类推，然后您可以使用以下命令访问应用程序中的变量：

```
ENV['USERNAME']
ENV['PASSWORD'] 
```

[Heroku 配置变量](https://devcenter.heroku.com/articles/config-vars)

这是迄今为止实现您想要的最安全的方式，并且可以安全地供公众使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T23:23:16.143

执行此类操作的规范方法是将凭据放入环境变量或外部文件中。我发现环境变量最简单，尤其是 Heroku。

这是控制器中使用来自环境变量的凭据的基本身份验证示例（改编自[Railscast #82](http://railscasts.com/episodes/82-http-basic-authentication)：

```
class SomeController < ApplicationController

  before_filter :authenticate

protected

  def authenticate
    authenticate_or_request_with_http_basic do |username, password|
      username == ENV['MYAPP_USERNAME'] && password == ENV['MYAPP_PASSWORD']
    end
  end

end 
```

然后，您可以在您的开发环境中设置环境变量，如果您愿意，可以在 shell 启动文件中。这是一个 bash/zsh 样式的示例：

```
export MYAPP_USERNAME=admin
export MYAPP_PASSWORD=foobar 
```

配置 Heroku：

```
heroku config:set MYAPP_USERNAME=admin MYAPP_PASSWORD=foobar 
```

# android - SIP 如何在蜂窝网络上工作？

> ID：15822989
> 
> 赞同：4
> 
> 时间：2013-04-04T22:42:40.400
> 
> 标签：android, sip, voip

我只是对 SIP 的工作原理感到困惑，但我的却没有。我制作了一个简单的 android 服务器，它打开一个服务器套接字并监听 3G/4G 网络上的传入连接。然后我创建了一个连接到服务器的客户端，连接被我运营商的防火墙（AT&T）阻止了。

在此之后，我下载了一个基于 SIP 的开源 VOIP 应用程序，并将这 2 部电话注册到 SIP 代理上，让它们互相呼叫，这样就完美了。

我对 SIP 如何在蜂窝网络上工作感到非常困惑，SIP 是一种 p2p 协议，SIP 代理仅用于重定向。这 2 部电话如何在 VOIP 会话中相互连接？为什么此连接没有被运营商阻止？有人可以向我解释吗？先感谢您！

# 更新：我刚刚尝试在 AT&T 和 SPRINT 网络之间发送一个 UDP 数据包，它不起作用；（

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-01T23:01:53.253

在基本的 SIP 中，端点媒体流量通常以您所说的 P2P 方式在彼此之间直接通信。他们这样做是在 SIP [SDP](http://www.ietf.org/rfc/rfc2327.txt)协商中相互提供地址/端口。

在“完美”的网络世界中，这可以正常工作，因为所有端点都可以在彼此之间直接对话。

正如我们所知，情况并非如此。

在大多数情况下，IPv4 世界的主要障碍是 NAT。

人们提出的第一个解决方案是[STUN](http://en.wikipedia.org/wiki/STUN)。STUN 将为您提供您在 NAT 后面使用的“公共”IP 地址，SIP 堆栈将在 SIP/SDP 数据包中使用该 IP 地址。只要[打孔](http://en.wikipedia.org/wiki/Hole_punching)有效，此方法就有效。

人们提出的下一个解决方案是[TURN](http://en.wikipedia.org/wiki/Traversal_Using_Relays_around_NAT)。TURN 是一个 UDP 代理，允许客户端（例如 SIP 客户端）从公共网络（即互联网）分配和使用专用网络上的 IP 地址/端口。它应该适用于所有情况，但会在 TURN 服务器上增加大量网络开销。它不会像 P2P 连接那样有效。使用 TURN 的好处是不需要双方都支持它才能工作。因此，当您在 Internet 上的软电话与内部网络上的硬件 SIP 设备之间进行通话时，这很好。

人们提出的下一个解决方案是[ICE](http://en.wikipedia.org/wiki/Interactive_Connectivity_Establishment)。两个 SIP 端点都需要支持 ICE。它通过扩展 SDP 协议来工作，以允许它在 SDP 协商中添加所有可能的连接（所有本地网络适配器、STUN 提供的公共地址和 TURN 按优先级顺序分配的地址）。然后一侧通过列出​​的连接并尝试建立连接。这允许两个连接都“尝试”连接 P2P 并在没有其他方法的情况下回退到 TURN 连接。它还应该在任何网络环境中工作到任何网络环境，并在 SIP 端点之间找到最有效的网络路径。ICE 的缺点是两个 SIP 端点都需要支持 ICE 才能工作。（顺便说一句，ICE/TURN/STUN 现在是[WEBRTC的一项要求](http://www.webrtc.org/)出于同样的原因，Web 浏览器之间相互通信的协议）

其他可能的解决方案是让您在中间有某种“智能” sip 代理，如果另一侧不支持它，它可能会在一侧伪造 ICE。另一个是如果需要转码，则拥有某种媒体网关或 B2BUA，这将与 TURN 存在相同的问题。

如果可能，我建议您使用 STUN、TURN 和 ICE 设置您的 SIP 客户端，这将增加 SIP 呼叫实际工作的可能性。

至于为什么您的案例现在不起作用，它需要网络和/或 SIP 日志来了解确切的障碍是什么。

# php - 如果使用 PHP 登录，则更改整个站点

> ID：15822990
> 
> 赞同：3
> 
> 时间：2013-04-04T22:42:48.577
> 
> 标签：php, coding-style

我正在创建一个仅用于学习目的的网站。我已经做到了，所以在 index.php 中是一个基本的登录表单。它是用 MySQL 设置的。我想这样做，当您*未登录*时，您会在 index.php 中看到表单网站，而当您登录时，您*也会*在 index.php中看到完全不同的网站。我知道如何检查我是否登录，所以基本问题是：我可以做类似这种风格的事情：

```
 if(loggedIn){
    include 'loggedInSite.php';
  }else{
    include 'notLoggedInSite.php';
  } 
```

还是必须完全不同？或者我应该按照以下方式做一些事情：

```
 if(loggedIn){
    echo "<html>Whole site</html>";
  } 
```

在一个简单的回声功能中回显整个网站？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:45:14.113

您的第一个示例只需稍作改动即可正常工作：

```
if($loggedIn){
  include 'loggedInSite.php';
}else{
  include 'notLoggedInSite.php';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T23:19:14.773

如果他们没有登录，为什么不直接将他们重定向到不同的页面呢？

或者

你写的应该有效

```
if($loggedIn){
  include 'loggedInSite.php';
}else{
  include 'notLoggedInSite.php';
} 
```

# javascript - html5 可拖动 - 任意放置位置？

> ID：15822994
> 
> 赞同：1
> 
> 时间：2013-04-04T22:42:52.783
> 
> 标签：javascript, jquery, html, jquery-mobile

我见过的所有可拖动元素的示例都有一个特定的目的地，可拖动元素可以在其中放置。是否可以在不指定目的地的情况下将元素放在屏幕上的任何位置？

我有一张地图（ThinkGeo），其中包含来自数据库的一些特定区域。当用户单击/触摸这些区域时，我将显示带有这些区域描述的弹出窗口。弹出窗口只不过是我相应地显示和隐藏的 div。

用户希望能够在地图上的弹出 div 周围移动。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:45:39.027

使用 jQuery UI 当然可能而且非常简单：

```
$("#elementId").draggable(); 
```

还有一个用于触摸事件的垫片：

[http://touchpunch.furf.com/](http://touchpunch.furf.com/) 584 字节，非常轻量级。

# html - 用于重复元素的 HTML 模板

> ID：15822996
> 
> 赞同：3
> 
> 时间：2013-04-04T22:43:08.217
> 
> 标签：html, css

我有以下代码：

```
 <div class="spinner">
        <div style="-webkit-animation-delay:0.24s; border-color: #777;"></div>
        <div style="-webkit-animation-delay:0.20s; border-color: #888;"></div>
        <div style="-webkit-animation-delay:0.16s; border-color: #999;"></div>
        <div style="-webkit-animation-delay:0.12s; border-color: #AAA;"></div>
        <div style="-webkit-animation-delay:0.08s; border-color: #BBB;"></div>
        <div style="-webkit-animation-delay:0.04s; border-color: #CCC;"></div>
        <div style="-webkit-animation-delay:0.00s; border-color: #DDD;"></div>
    </div> 
```

这与一些 CSS 一起构成了一个动画微调器。

但是它很混乱，特别是如果我想多次使用它。我可以使用 Javascript 来创建它，但这也有点乱，我的意思是结构不应该保留为 HTML 吗？有没有办法做类似的事情：

```
<template name="spinner">
    <div class="spinner">
        <div style="-webkit-animation-delay:0.24s; border-color: #777;"></div>
        <div style="-webkit-animation-delay:0.20s; border-color: #888;"></div>
        <div style="-webkit-animation-delay:0.16s; border-color: #999;"></div>
        <div style="-webkit-animation-delay:0.12s; border-color: #AAA;"></div>
        <div style="-webkit-animation-delay:0.08s; border-color: #BBB;"></div>
        <div style="-webkit-animation-delay:0.04s; border-color: #CCC;"></div>
        <div style="-webkit-animation-delay:0.00s; border-color: #DDD;"></div>
    </div>
</template>
<body>
    <template target="spinner" />
    <!-- Some other stuff -->
    <template target="spinner" />
</body> 
```

（不使用javascript）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:49:52.960

你只能整理你的 CSS；

**CSS**

```
.spinner div {
    /* markup for all divs in here, like width, height etc. */
}

.spinner div:nth-child(1) { -webkit-animation-delay:0.24s; border-color: #777; }
.spinner div:nth-child(2) { -webkit-animation-delay:0.20s; border-color: #888; }
.spinner div:nth-child(3) { -webkit-animation-delay:0.16s; border-color: #999; }
.spinner div:nth-child(4) { -webkit-animation-delay:0.12s; border-color: #AAA; }
.spinner div:nth-child(5) { -webkit-animation-delay:0.08s; border-color: #BBB; }
.spinner div:nth-child(6) { -webkit-animation-delay:0.04s; border-color: #CCC; }
.spinner div:nth-child(7) { -webkit-animation-delay:0.00s; border-color: #DDD; } 
```

**HTML**

```
<div class="spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div> 
```

HTML 可以在任何地方重复。您不能通过 CSS 重复内部 div-tags。你必须做一个小的 JavaScript innerHTML 循环来实现它。但是由于您想避免这种情况，我将把它作为唯一（我知道的）示例来展示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T22:51:57.060

不，没有 JavaScript 就无法做到这一点。HTML5 有一个闪亮的新[`<template>`](http://www.html5rocks.com/en/tutorials/webcomponents/template/)标签，但它需要使用 JavaScript。

HTML 代表页面的逻辑结构。它不支持这种事情。

您不必使用 JavaScript，您可以使用 SSI（服务器端包含）、服务器端语言等。

一种选择是使用某种形式的 JavaScript 模板构建您的 HTML，然后将此 HTML 提供给用户。这样，客户端就不会运行任何 JavaScript 代码（它将生成 HTML），您将能够`<template>`按照您建议的方式使用标签。

这会将您的构建过程从某些模板引擎/编程语言完成转换的位置`html`更改。`html+template => html`你最终还是服务`html`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T22:48:33.360

除非您使用服务器端脚本生成 HTML，否则 HTML 是`static`单独的。如果要更改 DOM，则需要使用 Javascript。

您可以做的是将您的模板保留在具有特定 id 的隐藏 div 中，并使用 Javascript 获取它，`getElementById`然后克隆该 div 并将其放置在您想要的任何位置。

如果您为此在 Javascript 上编写函数，则可以在 HTML 之间放置简单的标签：

```
<script type="text/javascript">place_div()</script> 
```

高温高压

弗朗西斯科