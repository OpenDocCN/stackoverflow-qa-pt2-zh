# StackOverflow 问答 13048000-13048999

# cakephp - CakePHP：使用多个自动完成字段保存 HABTM 关系

> ID：13048000
> 
> 赞同：0
> 
> 时间：2012-10-24T11:07:32.093
> 
> 标签：cakephp, autocomplete, cakephp-2.1, has-and-belongs-to-many

我正在使用 CakePHP 2，我有两个模型：通过 HABTM 关系连接的问题和主题。在我的“添加”问题表单中，我有可变数量的自动完成字段，这些字段应该用于将（现有）主题耦合到用户正在添加的问题。

我想要的是：当我保存我的问题时，与所选主题的关系也会自动保存。有人可以告诉我如何实现这一目标吗？最好我想通过正确命名我的表单助手字段来自动处理其中的大部分内容，而无需我在控制器中执行手动更新。这可能吗？

它看起来像这样吗：

```
<?php echo $this->Form->input('RelatedTopic.0.topic_id'); ?>
<?php echo $this->Form->input('RelatedTopic.1.topic_id'); ?>
.. 
```

这是我在问题模型中的关系：

```
$hasAndBelongsToMany= array(
  'RelatedTopic' => array(
    'className' => 'Topic',
    'joinTable' => 'questions_topic',
    'foreignKey' => 'question_id',
    'associationForeignKey' => 'topic_id',
  )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:13:46.743

您是否添加了与问题相关的新主题，或者您是否有预先确定的问题主题列表？

# transparency - MapServer 6中的整个地图图层透明

> ID：13048003
> 
> 赞同：2
> 
> 时间：2012-10-24T11:07:44.753
> 
> 标签：transparency, mapserver

我有一个包含多个图层的地图文件，其中一个图层的 OFFSITE 设置为 255 255 255。不幸的是，当地图文件被称为 wms 图层时，这似乎会导致所有图层的透明度 - 背景地图（独立的 wms 调用）是显示通过，虽然奇怪的是没有通过白色部分，但似乎与抗锯齿更相关（当我将 IMAGEMODE 切换为 RGB 而不是 RGBA 时，问题消失了，但图像质量很糟糕）。

当我注释掉 OFFSITE 时，所有图层的透明度都会被删除。如果我使用 Mapserver 5.x 而不是 6，也不会出现问题。

但这些解决方案都不是我的选择。

奇怪的是，ArcGIS 10 中没有出现该问题，但在 QGIS 和 OpenLayers 以及 MapModeller (CadCorp) 中出现了问题，但我看不出来自这些不同客户端的 wms 调用有明显差异。

我对 Mapserver 中可用的所有其他透明度设置有点不清楚，但我已经更改了其中的一些（元数据中的 wms_bgcolor 和 wms_transparent；OUTPUTFORMAT 中的 TRANSPARENT ON/OFF）并且没有任何改变。

我希望有人可以帮助阐明一些...

提前致谢， 菲奥娜

# c# - 将控件添加到另一个控件时触发的事件

> ID：13048004
> 
> 赞同：0
> 
> 时间：2012-10-24T11:07:51.813
> 
> 标签：c#, winforms, user-controls, size, parent

将用户控件添加到 时是否会触发事件`Form`？我需要这个来获取`Parent`用户控件的控件大小。

但是当用户控件被初始化等时，`Parent = null`. 因为尚未将用户控件添加到窗体中。所以我现在无法获得父控件（即表单）。

所以我必须在之后重新调整用户控件的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:18:05.770

您可以尝试使用[Control.ParentChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.parentchanged.aspx)事件。这将在控件的父级更改时触发，因此您可以检查父级是否是表单，然后继续您想要的反应方式。

或者，您可以使用[Control.ControlAdded](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controladded.aspx)事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:18:06.817

有一个所有控件都继承的[ParentChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.parentchanged.aspx)事件。在事件处理程序方法中，您可以检查 Parent 属性，该属性将在此时设置为新的父级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T11:24:32.203

您在表单上有 ControlAdded 事件，该事件在您的 InitializeComponent() 中初始化。大多数情况下，此事件应在添加组件之后放置。如果您在将 UserControls 添加到表单之前放置​​它，您将在每次添加组件时触发事件。

我建议在代码隐藏中添加您需要此类特定控制的用户控件，而不是移动事件处理程序。

如果您这样做，您可以将父级添加到您的用户控件，这可能会为您提供所需的信息。

```
var textBox = new TextBox {Parent = this}; 
```

# facebook - Facebook api：通过工作获取用户

> ID：13048006
> 
> 赞同：0
> 
> 时间：2012-10-24T11:07:56.803
> 
> 标签：facebook, facebook-graph-api

是否可以通过工作 ID 获取所有 Facebook 用户？我试图通过谷歌找到它，但我得到了我需要的结果。

我有“工作 ID”（实际上是一个页面，对吗？），但现在我需要所有在那里工作的用户..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:52:32.430

不，没有办法让所有用户直接从 FB 工作。您可以查询用户表以获取特定用户的工作历史，但反过来是不可能的。也许LinkedIn提供了那种数据？但 Facebook 并没有 AFAIK。

# php - Cakephp中父类别的合并数组

> ID：13048013
> 
> 赞同：0
> 
> 时间：2012-10-24T11:08:13.483
> 
> 标签：php, mysql, cakephp

我希望能够将 SpecificationCategory.name 分组为父类别，并将 Specifications 分组为子类别​​，以便 SpecificationCategory.name 不会在数组中重复。

有没有办法在蛋糕中做到这一点？

```
Array
(
    [0] => Array
        (
            [Specification] => Array
                (
                    [id] => 15
                    [name] => AMD Phenom
                    [specification_category_id] => 1
                    [subsubcategory_id] => 1
                    [created] => 2012-10-16 08:18:27
                    [modified] => 2012-10-16 08:18:27
                )

            [SpecificationCategory] => Array
                (
                    [id] => 1
                    [name] => Processor Type
                    [created] => 2012-10-15 13:50:03
                    [modified] => 2012-10-15 13:50:03
                )

            [Subsubcategory] => Array
                (
                    [id] => 1
                    [name] => Laptops
                    [subcategory_id] => 1
                    [created] => 2012-06-24 02:23:40
                    [modified] => 2012-06-24 02:23:40
                )

        )

    [1] => Array
        (
            [Specification] => Array
                (
                    [id] => 12
                    [name] => AMD E350
                    [specification_category_id] => 1
                    [subsubcategory_id] => 1
                    [created] => 2012-10-16 08:18:02
                    [modified] => 2012-10-16 08:18:02
                )

            [SpecificationCategory] => Array
                (
                    [id] => 1
                    [name] => Processor Type
                    [created] => 2012-10-15 13:50:03
                    [modified] => 2012-10-15 13:50:03
                )

            [Subsubcategory] => Array
                (
                    [id] => 1
                    [name] => Laptops
                    [subcategory_id] => 1
                    [created] => 2012-06-24 02:23:40
                    [modified] => 2012-06-24 02:23:40
                )

        )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:08:52.207

如果您只是想通过 SpecificationCategory 获得列表，我只会从该模型中进行查找，并且该数组将列出每个类别下的所有规范。这假定规范有许多规范类别。

# javascript - jQuery检查空字符串

> ID：13048022
> 
> 赞同：0
> 
> 时间：2012-10-24T11:08:57.787
> 
> 标签：javascript, jquery

```
var id = "<?php echo $val->id; ?>";

var myRadio = $('input[name=<?php echo "mala".$val->id; ?>]').val();

if (myRadio.val.length > 0){
   $("#anketa").load('http://www.svastara.rs/anketa/anketa_m1_data', 
       { answer: myRadio, id: id });
   }
}); 
```

`if (myRadio.val.length > 0)` 当我确定字符串中有某些内容时，为什么 返回它看起来像假。如果它不是一个好方法，如何检查字符串是否为空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:09:59.210

不需要 in `val`，因为您应该已经使用`val()`上一行中的方法获得了值：

```
if (myRadio.length > 0) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:11:56.467

```
if(myRadio)
return true;
else
return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:13:39.967

您不需要使用 myRadio.val.length，因为 myRadio 已经是该输入的值。所以你只需要检查这个变量的长度。

```
var id = "<?php echo $val->id; ?>";
var myRadio = $('input[name=<?php echo "mala".$val->id; ?>]').val();
if (myRadio.length > 0){
     $("#anketa").load('http://www.svastara.rs/anketa/anketa_m1_data', { answer: myRadio, id: id });
} 
```

[您可以在http://www.w3schools.com/jsref/jsref_length_string.asp](http://www.w3schools.com/jsref/jsref_length_string.asp)有更好的解释

祝你好运！

# php - 如何在基于 Code Igniter 的网站中传递直接链接以从浏览器下载某些文件？像这样：www.example.com/examplemovie.mov

> ID：13048026
> 
> 赞同：-2
> 
> 时间：2012-10-24T11:09:18.877
> 
> 标签：php, codeigniter, codeigniter-url, codeigniter-routing

我需要允许`www.example.com/example.mov`在代码点火器应用程序中通过浏览器访问或下载这样的链接。现在我收到了“找不到页面”的消息。该文件位于根目录中，但我认为 Code Igniter 中有一些配置不允许这种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:15:20.760

如果您正在寻找创建某种形式的下载管理系统，并且不想直接链接到野外文件，您可以使用下载帮助程序：

```
$this->load->helper('download');

$data = file_get_contents("/path/to/example.mov"); // Read the file's contents
$name = 'example.mov';

force_download($name, $data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:12:29.290

如果它是一个完整的 url，请确保你输入它作为一个完整的 url，即[http://www.example.com/example.mov](http://www.example.com/example.mov)，如果它是你服务器上的一个相对 url，并且它在根目录中，请使用：

```
<?php echo base_url().'example.mov'; ?> 
```

更新，基于从另一个位置工作的文件，您可以将此行添加到根目录中的 .htaccess 文件中（在应用程序文件夹所在的同一文件夹中，而不是在应用程序文件夹中）

```
Redirect http://www.example.com/example.mov http://example.com/uploads/example.mov 
```

# c# - FilePathResult 下载进度 MVC

> ID：13048042
> 
> 赞同：1
> 
> 时间：2012-10-24T11:10:18.160
> 
> 标签：c#, javascript, asp.net-mvc

我使用这种方法下载文件

```
public FilePathResult downloadFile(string fileName)
{
    //Download the spreadsheet
    string path = "C:\\Users\\Johandk\\Documents\\Visual Studio 2010\\Projects\\FormValue\\" + fileName + ".xlsx";
    return File(path, "application/vnd.ms-excel", fileName + ".xlsx");
} 
```

有什么方法可以检查下载进度，甚至在下载完成时收到通知？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:14:40.667

[在浏览器中检测文件下载对话框](http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx)

取自这个[答案](https://stackoverflow.com/q/1106377/395890)

# iphone - CLLocationManager 的按钮操作（当前位置弹出窗口）

> ID：13048049
> 
> 赞同：0
> 
> 时间：2012-10-24T11:10:42.067
> 
> 标签：iphone, objective-c, ios, xcode, cllocationmanager

我在查找当前位置时遇到了一些困难，在使用 CLLocationManager 时，它会要求一个通知，例如“您想使用您当前的位置”吗？对。其中有两个选项名为：1.OK 2.Dont Allow。是否可以为这两个按钮编写自定义操作...如果有人有任何想法可以做到这一点并与此相关，那么对我来说将非常有用..

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:14:10.440

制作这样的方法并将其附加到您的按钮或从 viewDidLoad 调用它

```
-(void) showLocation
{
  // put an alerview to ask user for allow/disallow
} 
```

// 在alerView 委托方法中，再次是按钮启用用户当前位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:07:13.473

我认为您不能覆盖此警报的操作。但是，您可以实现 CLLocationManager 的委托方法

```
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error; 
```

在那里，您可以了解用户是否为您的应用启用了定位服务。

这是上述方法的实现示例

```
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {

    [self.locationManager stopUpdatingLocation];
    switch([error code]) {
        case kCLErrorDenied:
            //User has not enabled location services for this app.
            break;
        case kCLErrorLocationUnknown:
            //location could not be found
            break;
        default:
            //some other issue
            break;
    }

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"An error title"
                                                    message:@"An error message"
                                                    delegate:nil
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:nil];
    [alert show];

} 
```

# java - HBase - 查询两个时间戳之间的差异

> ID：13048052
> 
> 赞同：0
> 
> 时间：2012-10-24T11:10:53.533
> 
> 标签：java, hbase, trading

我正在考虑将 HBase 作为交易系统数据库，部分原因在于其一流的基于时间戳的行版本控制。交易一直在被修改，在使用 SQL 数据库时，我们通常必须在数据模型中明确处理。在 HBase 中，我将交易（而不是单个交易版本）建模为行，并让 HBase 努力让我访问之前时间点上的交易版本。

系统查询端需要通过3种主要方式访问交易数据：

1.  所有交易的当前版本。HBase 明确支持这一点。
2.  在特定时间戳活跃的所有交易的版本。同样，来自 HBase 的明确支持。此查询的目的通常是希望报告一天中特定时间的交易人数的日终流程。
3.  2 个时间戳之间的活动。这对于在一天结束时向已经与交易系统同步并想知道发生了什么变化的系统提供信息很有用。它还构成了每日损益 (P&L) 计算的基础，该计算表明 P&L 与昨天的每日价值相比有何*变化*。

所以，我的问题是：HBase 是否有任何内置支持在两个时间戳之间执行“差异”？或者，是否有任何最佳实践方法可以在数据库级别满足此要求？如果没有，我需要考虑构建一个进程，从数据库中提取两个基于时间戳的查询并执行差异操作。

我希望该过程的输出是：

*   自旧时间戳以来已更改的新时间戳的交易列表。
*   一个单独的交易列表，从旧的时间戳开始，在新的时间戳上已经过时。

这些信息让我可以应用积极的变化并“退出”消极的变化。例如，如果一笔交易从名义上的 100 万美元变为 200 万美元，我希望能够应用 +200 万美元的变化，然后撤回 -100 万美元的变化，从而导致当天净变化 +100 万美元。

# c# - 如何在 Ultragrid 的同一行中设置摘要页脚标题行和摘要值

> ID：13048055
> 
> 赞同：1
> 
> 时间：2012-10-24T11:11:09.600
> 
> 标签：c#, infragistics, ultrawingrid

我正在为我的 Windows 窗体应用程序评估 UltraGrid 控件。我观察到汇总行是单独显示的，从公式获得的值显示在单独的行上。

有谁知道如何合并这两行。
例如 SubTotal value1 value2 value3

谢谢，
维杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:41:39.407

我不认为这是可能的。一个问题可能是选择将标题文本放在哪一列下，如果用户移动该列怎么办？如果标题跨越多于一列怎么办？

一种可能的解决方法是定义自定义摘要并将空字符串设置为计算的返回值，然后使用 DisplayFormat 属性设置要用作标题的文本。

```
SummarySettings ss = grid.DisplayLayout.Bands[0].Summaries.Add("SummaryKeyName", 
                     SummaryType.Custom, new FakeCaptionSummary(), 
                     grid.DisplayLayout.Bands[0].Columns["ColumnUsedForCaption"],  
                     SummaryPosition.UseSummaryPositionColumn, 
                     grid.DisplayLayout.Bands[0].Columns["ColumnUsedForCaption"]);
ss.DisplayFormat = "Subtotals"; 
```

然后构建一个实现`ICustomSummaryCalculator`接口的类

```
internal class FakeCaptionSummary : ICustomSummaryCalculator
{
    public FakeCaptionSummary()
    {
         // Empty constructor
    }
    // Called at the start of the custom summary calculation
    public void BeginCustomSummary(SummarySettings summarySettings, RowsCollection rows)
    {}
    // Called for each row in band of this summary
    public void AggregateCustomSummary(SummarySettings summarySettings, UltraGridRow row)
    {}
    // Called to get the return value to put in the SummaryRpw at the specified column
    public object EndCustomSummary(SummarySettings summarySettings, RowsCollection rows)
    {
        return "";
    }
} 
```

但是请记住，此解决方案具有我在此答案开头概述的所有缺点。

# sql-server - SSIS将日期时间变量更改为其他格式

> ID：13048056
> 
> 赞同：4
> 
> 时间：2012-10-24T11:11:10.910
> 
> 标签：sql-server, ssis

我的 SSIS 包中有一个 ADO.NET 源，我尝试进行以下查询：

“SELECT * FROM Table WHERE DateAdded > '@[User::InputDateV]'”

另一方面，我有一个名为 InputDateV 的 DateTime 变量。

我的问题是在变量值中我可以使用以下日期：24/10/2012 但我的 Sql 服务器这个日期无效，应该是 2012 年 10 月 24 日。

我如何将变量的日期时间格式更改为 (mm/dd/yyyy)？

谢谢。

问候。

何塞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:09:56.647

最安全的选择是将 DateTime 变量转换为 ISO 日期格式：

```
"'" + (DT_WSTR,4)YEAR(@[User::InputDateV]) 
    + RIGHT("0" + (DT_WSTR,2)MONTH(@[User::InputDateV]),2)
    + RIGHT("0" + (DT_WSTR,2)DAY(@[User::InputDateV]),2) 
    + "'" 
```

这将计算为“20121024”，因此是 SQL Server 的完美、明确的日期字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T23:57:17.063

日期时间数据类型没有格式。当您将其转换为字符串类型时，是的，您可以应用区域设置感知格式，但在内部，日期时间与区域设置无关。

我将以 ADO.NET 源代码作为我的回应的序言，它比 OLE 源代码要痛苦得多。

在我的复制中，我有一个执行 SQL 任务，它创建一个表并在其中粘贴一些数据。然后它路由到数据流任务。

![在此处输入图像描述](../Images/aea36fb613f1414f5b47f5d46e5e16a5.png)

在我的数据流中，我从查询`SELECT T.* FROM dbo.[Table] AS T`. 目前没有 WHERE 子句。这是为了允许数据流组件注册源查询的元数据。

![在此处输入图像描述](../Images/dce2cf6754510eb8f5923ca1afe093ca.png)

要对其进行参数化，您需要返回到控制流级别。选择数据流任务并在属性下，您需要为 ADO NET 源的 SqlCommand 属性添加一个表达式。

根据我的经验，最好在变量上构建表达式并将变量分配到任务的属性中，而不是在任务本身中创建它。如果没有其他原因，这种方法允许您设置断点并查看本地变量并直观地检查值。这不能在对象的表达式上完成 - 特别是如果所述表达式导致包失败。

为此，您将看到我在我的 SSIS 包中定义了两个变量。

*   InputDateV - 数据类型是 DateTime，它的值是`10/24/2012 12:01 AM`我添加了一个时间组件只是为了显示它，但您可以根据需要将其删除。
*   查询 - 数据类型是字符串。这个变量的属性是 EvaluateAsExpression = True 并且表达式在`"SELECT T.* FROM dbo.[Table] T WHERE T.DateAdded > '" + (DT_WSTR, 24)@[User::InputDateV] + "'"` 这里 我将与语言环境无关的日期时间值强制为一种语言环境感知类型，但因为它是通过 .NET 代码的魔力，所以它会起作用。

然后我使用@[User::Query] 配置[ADO NET Source].[SqlCommand]，神奇的是，一切正常。

万一我误解了你上面关于变量名的定义。如果@[User::InputDateV] 实际上是一种字符串，那么上面的方法对你不起作用。我创建了一个数据类型为字符串的变量@[User::InputDateS]，并为其分配了一个值`24/10/2012`。如果我修改 @[User::Query] 表达式以使用它，SQL Server 将拒绝它，因为它无法将该值转换为日期时间数据类型。所以让 SSIS 表达式执行翻译。将 @[User::Query] 上的表达式修改为 `"SELECT T.* FROM dbo.[Table] T WHERE T.DateAdded > '" + (DT_WSTR, 24)((DT_DATE) @[User::InputDateS]) + "'"`Bob 是你的叔叔，包中的绿色框。

## 参考

*   [如何在 SSIS ADO NET 源中使用参数？](http://blogs.msdn.com/b/sqlforum/archive/2011/04/11/forum-faq-how-do-i-use-parameters-in-an-ssis-ado-net-source.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:32:00.783

您可以使用 SSIS 字符串变量并将值保存为“mm/dd/yyyy”格式。传递给准备查询的值有单引号（'），这样就可以了。如果要保持 SSIS 日期时间，请使用 System.DateTime 使用脚本组件准备查询，如下所示。那么您的查询将被准备好。希望这可以帮助。

```
public void Main()
{
  // Map your variable using Dts.Variables["NameOfDateTimeVariable"].Value
  DateTime dt= DateTime.Now;

  var dateTime = string.Format("{0:mm/dd/yyyy}",dt);

  var query = string.Format("SELECT * FROM Table WHERE DateAdded > '{0}'",dateTime);

  //Map the query to your variable if you want

 Dts.TaskResult = (int)ScriptResults.Success;
} 
```

谢谢， 戈达曼

# class - 如何划分一对 Num 值？

> ID：13048057
> 
> 赞同：1
> 
> 时间：2012-10-24T11:11:16.543
> 
> 标签：class, function, haskell, subclass, division

这是一个接受一对 Integral 值并将它们相除的函数：

```
divide_v1 :: Integral a => (a, a) -> a
divide_v1 (m, n) = (m + n) `div` 2 
```

我使用一对 Integral 值调用该函数，它按预期工作：

```
divide_v1 (1, 3) 
```

伟大的。如果我的数字总是积分，那就完美了。

这是一个函数，它采用一对分数值并将它们相除：

```
divide_v2 :: Fractional a => (a, a) -> a
divide_v2 (m, n) = (m + n) / 2 
```

我用一对分数值调用该函数，它按预期工作：

```
divide_v2 (1.0, 3.0) 
```

伟大的。如果我的数字总是小数，那就完美了。

我想要一个无论数字是整数还是分数都可以工作的函数：

```
divide_v3 :: Num a => (a, a) -> a
divide_v3 (m, n) = (m + n) ___ 2 
```

我为*_*使用什么运算符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:11:31.337

为了扩展 AndrewC 所说的内容， div 与 / 没有相同的属性。例如，在数学中，如果 a 除以 b = c，则 c 乘以 b == a。当使用 Double 和 Float 等类型时，操作 / 和 * 满足此属性（在类型的准确性允许的范围内）。但是当将 div 与 Ints 一起使用时，该属性不成立。5 `div`3 = 1，但 1*3 /= 5！因此，如果您想对多种数字类型使用相同的“除法运算”，您需要考虑您希望它如何表现。此外，您几乎肯定不想使用相同的运算符 /，因为这会产生误导。

如果您希望您的“除法操作”返回与其操作数相同的类型，这是实现此目的的一种方法：

```
class Divideable a where
  mydiv :: a -> a -> a

instance Divideable Int where
  mydiv = div

instance Divideable Double where
  mydiv = (/) 
```

在 GHCi 中，它看起来像这样：

```
λ> 5 `mydiv` 3 :: Int
1
λ> 5 `mydiv` 3 :: Double
1.6666666666666667
λ> 5.0 `mydiv` 3.0 :: Double
1.6666666666666667 
```

另一方面，如果你想做“真正的”除法，你需要像这样转换整数类型：

```
class Divideable2 a where
  mydiv2 :: a -> a -> Double

instance Divideable2 Int where
  mydiv2 a b = fromIntegral a / fromIntegral b

instance Divideable2 Double where
  mydiv2 = (/) 
```

在 GHCi 中，这给出：

```
λ> 5 `mydiv2` 3
1.6666666666666667
λ> 5.0 `mydiv2` 3.0
1.6666666666666667 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:24:32.527

[我认为您正在寻找允许隐式类型强制的关联类型，并且在这里](http://research.microsoft.com/en-us/um/people/simonpj/papers/assoc-types/fun-with-type-funs/typefun.pdf)得到了很好的解释。下面是双精度数和整数相加的示例。

```
class Add a b where
    type SumTy a b
    add :: a -> b -> SumTy a b

instance Add Integer Double where
    type SumTy Integer Double = Double
    add x y = fromIntegral x + y

instance Add Double Integer where
     type SumTy Double Integer = Double
     add x y = x + fromIntegral y

instance (Num a) => Add a a where
     type SumTy a a = a
     add x y = x + y 
```

# c# - 如何在WPF中基于索引动态生成Togglebutton并对其执行操作

> ID：13048058
> 
> 赞同：1
> 
> 时间：2012-10-24T11:11:19.243
> 
> 标签：c#, .net, wpf, mvvm, checkbox

我正在开发一个 WPF，我需要在其中动态生成 16 次 Togglebutton。如果我写下这个切换按钮 16 次并为它们设置单独的按钮单击命令，那将是低效的。

**XAML：**

```
<Togglebutton Height="14" Command="{Binding TogglebuttonGen}" Margin="0" Name="checkBox1" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Center" /> 
```

理想情况下，我希望生成它们 16 次，并在我的 viewmodel 类中使用一种通用方法，如下所示：

```
private ICommand mTogglebuttonGen;
    public ICommand TogglebuttonGen
    {
        get
        {
            if (mTogglebuttonGen == null)
                mTogglebuttonGen = new DelegateCommand(new Action(mTogglebuttonGenExecuted), new Func<bool>(mTogglebuttonGenCanExecute));

            return mTogglebuttonGen;
        }
        set
        {
            mTogglebuttonGen = value;
        }
    }

    public bool mTogglebuttonGenCanExecute()
    {
        return true;
    }

    public void mTogglebuttonGenExecuted(some INDEX parameter which gives me selected Togglebutton)
    {
        // Have a common method here which performs operation on each Togglebutton click based on INDEX which determines which Togglebutton I have selected
    } 
```

我在我的 C++ 应用程序中完成了如下操作：

```
for(int j = 0; j < 16; j ++)
    {
        m_buttonActiveChannels[j] = new ToggleButton();
        addAndMakeVisible(m_buttonActiveChannels[j]);
        m_buttonActiveChannels[j]->addButtonListener(this);
    }

//Checking which Togglebutton is clicked
unsigned bit = 0x8000;
for(int i = 15; i >= 0; i--)
{
    if(0 != (value & bit)) //Value has some hardcoded data
    {
        m_buttonActiveChannels[i]->setToggleState(true);
    } 
    else
    {
        m_buttonActiveChannels[i]->setToggleState(false);
    }

    bit >>= 1;
} 
```

因此，这会生成 16 次，并且有一种基于`index i`.

如何在我的 wpf 应用程序中实现它？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:28:51.373

在您的视图模型中，创建一个包含 16 个 ToggleAction 类实例的集合。

```
public ObservableCollection<MyToggleActionClass> MyItems {get;set;}

public class MyToggleActionClass
{
   public string DisplayName {get;set;}
   public int Index {get;set;}
} 
```

将此集合绑定到 ItemsControl 的 ItemsSource，就是这样。

```
<ItemsControl ItemsSource="{Binding MyItems}">
 <ItemsControl.ItemTemplate>
  <DataTemplate>
    <ToggleButton Content="{Binding Displayname}"
                  Command="{Binding DataContext.TogglebuttonGen, RelativSource={RelativSource AncestorType=ItemsControl}}"
                  CommandParameter="{Binding Index}"/>
  </DataTemplate>
 </ItemsControl.ItemTemplate>
</ItemsControl> 
```

这都是手写的，所以请检查是否有错误。最重要的是命令绑定。如果你想从你的 ViewModel 调用命令，你必须使用 RelativeSource 走到 ViewModel DataContext。

我还将在 MyToggleActionClass 中处理/绑定切换状态。

# php - 打破 wordpress 循环，然后在插入 div 后重新进入

> ID：13048062
> 
> 赞同：1
> 
> 时间：2012-10-24T11:11:53.450
> 
> 标签：php, wordpress, loops, twitter-bootstrap

我正在构建一个基于 Twitter Bootstrap 的 Wordpress 主题。Bootstrap 的响应式布局`.row-fluid`跨越了 100% 的页面，并且可以在一行中有 12 个“跨度”。

```
<div class="row-fluid">
    <?php query_posts('category_name=feature-articles&showposts=6'); ?> 
    <?php while (have_posts()) : the_post(); ?>

        <div class="span4">
        <div class="main-thumb"><?php echo get_the_post_thumbnail(($page->ID) , 'main-thumb'); ?></div>
        <a href="<?php the_permalink(); ?>"><h3 class="title"><?php the_title(); ?></h3></a>
        <p class="excerpt"><?php
            $my_excerpt = get_the_excerpt();
            if ( $my_excerpt != '' ) {
                // Some string manipulation performed
            }
            echo $my_excerpt; // Outputs the processed value to the page
            ?></p>

    <?php endwhile; ?></div> 
```

这将创建 6 个“span4”，我想跨越 2 个不同的行 - 但由于循环，`.row-fluid`在创建 3 个帖子后无法关闭原始 div 并打开另一个。

为简单起见，我想获取帖子 1、2 和 3，然后关闭`.row-fluid`div 并创建另一个，然后获取帖子 4、5 和 6。这可以通过一些循环操作来实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:25:37.350

您必须在循环中放置一个计数器，当它达到 3 时，添加一个关闭/打开标签。我还添加`if(have_posts())`到循环的开头，以避免错误（如果没有帖子，也允许您输出消息）。

```
<div class="row-fluid">

    <?php $i = 0 ?>
    <?php query_posts('category_name=feature-articles&showposts=6'); ?>
    <?php if(have_posts()) : while (have_posts()) : the_post(); ?>

        <?php if( $i == 3 ) : ?>
            </div>
            <div class="row-fluid">
        <?php endif; ?>

        <div class="span4">

        <div class="main-thumb">
            <?php echo get_the_post_thumbnail(($page->ID) , 'main-thumb'); ?>
        </div>
        <a href="<?php the_permalink(); ?>">
            <h3 class="title"><?php the_title(); ?></h3>
        </a>
        <p class="excerpt">
<?php
            $my_excerpt = get_the_excerpt();
            if ( $my_excerpt != '' ) {
                // Some string manipulation performed
            }
            echo $my_excerpt; // Outputs the processed value to the page
?>
        </p>

        <?php $i++ ?>

        <?php endwhile; ?>
    <?php endif; ?>

</div> 
```

# lua - 在 lua 中使用 snmp

> ID：13048064
> 
> 赞同：0
> 
> 时间：2012-10-24T11:12:01.810
> 
> 标签：lua, snmp, net-snmp

有问题。我需要在lua中使用snmpset，所以我使用了luasnmp模块。

当我尝试时，我收到一条错误消息，上面写着：“snmp: bad type (2) prim=0 in index 1”

但是通过 bash 使用 net-snmp snmpset 就可以了。

有没有人对此有任何经验（或建议/我们应该在哪里看）？谢谢

这是脚本：

```
local snmp = require "snmp"

hub1, err = snmp.open{
  peer = "1.1.1.1", 
  community = "private", 
}
assert(hub1, err)

vbIn = {
  {oid = ".1.3.6.1.4.1.9.9.16.1.1.1.16.333", type = NUMBER, value = 6 },
}
vbOut, err = assert(hub1:set(vbIn)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:00:05.040

```
 type = NUMBER 
```

似乎很奇怪。你的意思是

```
 type = 'NUMBER' 
```

或者

```
 type = snmp.NUMBER 
```

? 我猜 print(NUMBER) 会说 'nil'

# mysql - Mysql 字符串 - 整数比较

> ID：13048067
> 
> 赞同：0
> 
> 时间：2012-10-24T11:12:11.740
> 
> 标签：mysql

我处于需要将两个表与 Projectnumber 进行比较的情况。两个表都有 ProjectNumber 字段，但一个具有数据类型 INT，另一个具有 VARCHAR(45)。因此，当我尝试运行以下查询时，它也会导致一些不匹配的记录

```
 Select prj.Projectnumber,ps.ProjectNumber as 'ProjectNumber2'
 from projectlistsearch ps 
 inner join project prj on ps.ProjectNumber= prj.ProjectNumber 
```

这会导致一些正确的记录，但也会导致这样的错误

```
ProjectNumber     ProjectNumber2
8                 08-809076
11                11-437881
11                11-505934
2007              2007-45750
2011              2011-0A76 
```

我也尝试过类型转换，但没有奏效。

我怎样才能克服这种情况才能获得完全匹配的记录？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:15:07.647

检查转换函数：[http ://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)

例如：

```
... WHERE CAST(prnumVarchar AS UNSIGNED INTEGER) = prnumInt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:28:24.367

我建议将 to 转换`INT`为`VARCHAR`并比较这两者，因为例如将 a 转换`VARCHAR`为`INT`当文本以十进制数字开头时，只有可解析的前缀部分将转换为 int：

输入：

```
'08-809076' 
```

可解析前缀：

```
08 
```

转换成`INT`

```
8 
```

反之，则将值与不匹配的`VARCHAR`值`'8'`进行比较。`'08-809076'`

# hibernate - Hibernate OnDemand 急切获取

> ID：13048068
> 
> 赞同：2
> 
> 时间：2012-10-24T11:12:14.467
> 
> 标签：hibernate, lazy-loading

我了解如何配置我的模型以获取渴望或懒惰。但是我应该如何告诉我的应用程序这次急切地获取一个集合呢？

换句话说。我有一个带有 get 方法的 DAO。`EntityDao.getEntity(entityId)` 该实体有一个`Children`默认延迟加载的集合。

可以说 dao 方法是事务性的。

大多数时候我只需要没有孩子的实体，但每隔一段时间我就需要急切地去取孩子。现在我该怎么办？

如果我理解这一切都是正确的，那么会话只存在于事务中。所以在事务结束后（在这种情况下是在 dao 方法之后），就不能再进行延迟获取了。那么我可以将我的交易放在我的代码中，还是急切地在交易中获取我的对象？

那么我将如何在我的交易中进行这种急切的获取呢？

我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:19:12.017

您应该使用休眠参考[文档](http://docs.jboss.org/hibernate/orm/3.5/reference/en/html/performance.html#performance-fetching-profiles)的获取配置文件功能以获取更多详细信息和[示例](http://blog.frankel.ch/hibernate-hard-facts-part-6)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T11:33:48.287

您不应该在 dao 中进行交易。交易应该跨越整个业务运作，这就是有交易的意义。

您还破坏了延迟加载。它对调用者应该是透明的，当会话仍然可用并且子级在访问它们时被加载时就是这种情况。关闭会话后，不再可能进行延迟加载，并且应该访问实体。

# android - 在 Listview 中显示 ResultSet（不是光标）

> ID：13048075
> 
> 赞同：3
> 
> 时间：2012-10-24T11:12:55.700
> 
> 标签：android, android-listview, resultset, simplecursoradapter

我从远程数据库得到一个结果集，如下所示：

```
String queryString = "select n as name, a as address from sometable";
ResultSet rs = st.executeQuery(queryString); 
```

我想在 ListView 中显示一些数据：名称、此结果中的地址以及供用户检查某些行的​​复选框。检查的行将保存在本地数据库（SQLite）中以供进一步使用。

请帮助我找到这些问题的答案：

我应该如何使用 ResultSet 在 ListView 中显示，我读到使用 SimpleCursorAdapter 我应该有一个 Cusor，而不是一个 ResultSet。如何将 ResultSet 转换为 Cursor？

还有一个问题。我是否需要为复选框提供 1 个额外字段（例如“ch_”）？如果用户按下列表中的某个项目，它会更改“ch_”中的值吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:56:27.050

您可以将您的自定义对象`ResultSet`转换`ArrayList`为您的自定义对象，然后`SimpleCursorAdapter`您可以扩展 from`BaseAdapter`以使用列表数据，而不是使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:24:39.487

如果`rs`是光标，那么查看您的查询会得到 name`rs.getString(0)`和 address `rs.getString(1)`。

关于第二个问题，你需要这个复选框做什么？

# php - Cakephp：从模型中获取数据到另一个模型的视图中

> ID：13048084
> 
> 赞同：0
> 
> 时间：2012-10-24T11:13:25.820
> 
> 标签：php, cakephp, cakephp-2.0

在 Cakephp v2.3 App 中，有两个模型：

**采购模式**：它包含以下主要字段：id、invoice_date 和 Gross_amount（根据 Supplier.tax_rate 计算）。

```
class Purchase extends AppModel {

    public $displayField = 'id';
    public $belongsTo = 'Supplier';
} 
```

**供应商模式**：它包含 id、name 和 tax_rate

```
class Supplier extends AppModel {
    public $displayField = 'name';
    public $hasMany = 'Purchase';
} 
```

这是我的 PurchasesController 添加视图的外观： ![在此处输入图像描述](../Images/5c972bedc1af7fc217d48e46aef97f64.png)

现在，我想得到`Supplier.tax_rate`当前选定的供应商显示`app/View/Purchase/add.ctp`为标签或文本输入。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:02:07.963

使用 Jquery 查找选择框更改时的税率。查找 JsHelper，[http:](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html) //book.cakephp.org/2.0/en/core-libraries/helpers/js.html了解更多详情

这是来自我的 1.3 应用程序之一的一些示例视图代码，可能会对您有所帮助。当然，你必须有 helper、jquery、控制器代码和其他视图才能加载。

```
//helper in view
//observe selectbox for selection, if change, update question.
$js->get('#EntitiesUserPrimarycontactId')->event('change', $js->request(array('controller'=>'users','action'=>'update_previewcontact'),array('update'=>'#step4_results','dataExpression'=>true,
'before' => "$('#step4_results').fadeOut('fast');",
'complete' => "$('#step4_results').fadeIn('slow');,
'data'=>$js->serializeForm(array('isForm' => true, 'inline' => true)) ))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:11:48.037

我想到了。我最终做的是将所有供应商税率数据作为`JSON`，将其输出到视图中，然后使用客户端 javascript 选择相关代码。

PurchasesController 调用自定义模型方法，该方法启动 SQL 查询以获取所有供应商税率数据。

```
$supplier_tax_rate = $this->Purchase->Supplier->getTaxRate();
$this->set('supplier_tax_rate', json_encode($supplier_tax_rate)); 
```

的，在客户端。我使用 Javascript 来做我想做的事，这里`supplier_tax_rates`是存储 JSON 税率数据的变量，`getTaxRate`是一个变量函数，它根据供应商的倒闭从 JSON 返回税率`id`。

```
$(function() {
    var taxRates = $.parseJSON(supplier_tax_rates);

    var getTaxRate = function(id) {
        for (var i in taxRates) {
            if (taxRates[i].id == id) {
                return taxRates[i].tax_percentage_charged;
            }
        }
    };
}); 
```

这对我来说效果很好，希望它可以帮助其他想要从蛋糕中的数据库中获取一些数据的人，基于下拉列表的值。

# django - 多个项目的django模板行

> ID：13048086
> 
> 赞同：17
> 
> 时间：2012-10-24T11:13:28.410
> 
> 标签：django, django-templates

我正在创建一个目录，其中有一个未定义长度的项目列表。我想把它吐出来，每行有三列。所以我有以下html：

```
<div class="row">
    <div class="three columns">item 1
    </div>
    <div class="three columns">item 2
    </div>
    <div class="three columns">item 3
    </div>
</div>
<div class="row">
    <div class="three columns">item 4
    </div>
    <div class="three columns">item 5
    </div>
    <div class="three columns">item 6
    </div>
</div> 
```

我对如何将其实现为 django 模板感到困惑？如何拆分它以便在三个项目之后开始新行？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-24T11:19:46.067

尝试这样的事情：

```
<div class="row">
{% for item in items %}
    <div class="three columns">{{ item }}
    </div>
    {% if forloop.counter|divisibleby:3 %}
</div>
<div class="row">
    {% endif %}
{% endfor %}
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T11:21:29.963

您可以尝试创建一个自定义模板过滤器，该过滤器将返回**3-items 列表**。

快速尝试：

```
@register.filter
def splitByThree(data):
    return [l[i:i+3] for i in range(0, len(l), 3)] 
```

然后在您的模板中：

```
{% load splitByThree %}

{% for list in data|splitByThree %}
<div class="row">
{% for item in list %}
<div class="three columns">{{ item }}</div>
{% endfor %}
</div>
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T11:23:40.673

您可以使用`forloop.counter`变量和`divisibleby`过滤器。代码将接近此：

```
{% for item in items %}
    {% if forloop.first %}
        <div class="row">
    {% endif %}
    <div class="three columns">{{ item }}</div>
    {% if forloop.counter|divisibleby:"3" %}
        </div>
        {% if not forloop.last %}
            <div class="row">
        {% endif %}
    {% endif %}
    {% if forloop.last %}
         </div>
    {% endif %}
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-17T06:05:25.810

抱歉，没有足够的声誉来评论**jpic**的答案（已接受的答案），对于**Jinja2**，请使用：

```
<div class="row">
{% for item in items %}
    <div class="three columns">{{ item }}
    </div>
    {% if loop.index is divisibleby(3) %}
</div>
<div class="row">
    {% endif %}
{% endfor %}
</div> 
```

细节在[这里](http://jinja.pocoo.org/docs/2.9/templates/#tests)。

# json - RFC 4627（JSON mime 类型）中的 n/a 是什么意思？

> ID：13048087
> 
> 赞同：-1
> 
> 时间：2012-10-24T11:13:32.500
> 
> 标签：json, rest

在[RFC 4627](https://www.ietf.org/rfc/rfc4627.txt)中有一段关于 JSON 编码数据的 MIME 类型。

```
6\. IANA Considerations

   The MIME media type for JSON text is application/json.

   Type name: application

   Subtype name: json

   Required parameters: n/a

   Optional parameters: n/a 
```

由于必需和可选参数被标记为 n/a，是否可以将自己的参数附加到该内容类型，例如`Content-Type: application/json; version=1.0`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:19:33.890

与大多数 RFC 标识符一样，建议为您的自定义标识符添加前缀`x-`，以避免与相关规范的任何未来版本发生冲突。`application/json`此时可能没有`version`参数，但未来的 RFC 可能会定义它，您会发现您的应用程序和生成的所有数据与新 RFC 冲突，因此`x-version`参数将是更好的方法。我找不到任何要求自定义内容类型*参数*应以`x-`. 只需将您的参数名称保持为有效的语法`token`，并将您的值保持为有效的语法`value`[（在RFC 2045](https://www.rfc-editor.org/rfc/rfc2045#page-31)中定义的两个规则）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:17:36.993

As [http://en.wikipedia.org/wiki/N/a](http://en.wikipedia.org/wiki/N/a) states:

> n/a or N/A is a common abbreviation in tables and lists for not applicable, not available or no answer

# php - FB.login(null, {scope: 'publish_actions'}); 碰撞

> ID：13048091
> 
> 赞同：3
> 
> 时间：2012-10-24T11:13:43.353
> 
> 标签：php, javascript, facebook

今天我遇到了一个非常烦人的问题。我的 JavaScript 在夜间停止工作。当用户尝试在我的页面上创建 FB 操作时，会出现一个时髦的 JS 错误：

```
Uncaught TypeError: Cannot read property '__wrapped' of null 
```

中发生错误`connect.facebook.net/en_GB/all.js:82`并且没有意义。在错误链中，从我的脚本调用的最后一行是`FB.login(null, {scope: 'publish_actions'});`. Facebook 没有调用 AJAX。JS SDK 在到达任何地方之前就崩溃了。更烦人的是我的脚本在不同环境中的旧版本可以正常工作，所以我不能责怪 Facebook。你知道我应该去哪里寻找问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T11:18:11.137

The right syntax of FB.login is

```
FB.login(function(response) {
   // handle the response
 }, {scope: 'publish_actions'}); 
```

**Why are you passing null as the parameter**? That should contain the function which will process the response received.

At the very least, pass it an empty function, with no body.

(**[Reference](http://developers.facebook.com/docs/reference/javascript/FB.login/)**)

# android - 比较 DropBox API 中的文件修订

> ID：13048092
> 
> 赞同：0
> 
> 时间：2012-10-24T11:13:43.297
> 
> 标签：android, dropbox-api

Dropbox 中是否有任何 API 可用于获取客户端文件的元数据。我只想从修订 id 已更改的服务器下载那些文件。所以，我需要将现有文件与 server.xml 文件进行比较。如果它们相同，则不要下载，如果它们不同，则更新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:47:51.013

@Ben：- 感谢您的回复。我会试试的。但是我通过将文件修订保存在数据库中并在下次检查文件信息时检索它来实现该功能。如果它们相同，那么我放弃下载或下载文件并更新其修订版

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:02:38.763

这个问题是相关的：

[本地计算文件的保管箱哈希](https://stackoverflow.com/questions/13008040/localy-calculate-dropbox-hash-of-files)

基本上似乎没有办法自己在本地计算哈希，而且 AFAIK 没有适用于 Dropbox 本地客户端的 API。

相反，您可能想查看 Dropbox API 中的增量功能。它将为您提供一个光标，您可以使用该光标让 Dropbox 为您提供自上次更新以来已更改的文件的列表：

[https://www.dropbox.com/developers/reference/api#delta](https://www.dropbox.com/developers/reference/api#delta)

# ios - 如何在ios中同时保留蓝牙键盘和虚拟键盘

> ID：13048093
> 
> 赞同：1
> 
> 时间：2012-10-24T11:13:43.833
> 
> 标签：ios, keyboard, bluetooth

我编写了一个使用蓝牙条形码扫描仪的应用程序，但是当它连接时，它会阻止虚拟键盘弹出，我无法输入任何文本。
我想到了 2 个解决方案：
1\. 即使连接了蓝牙键盘，也强制显示虚拟键盘。
2.控制系统不将扫描仪视为输入设备，但仍接受它的输入。
但是我两个都做不到，请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T19:03:25.503

我在此处添加了有关如何同时显示蓝牙键盘（使用 HID 配置文件）和设备虚拟键盘的详细信息[我想通过蓝牙设备强制键盘打开](https://stackoverflow.com/questions/19418790/i-want-to-force-keyboard-on-with-bluetooth-device)请检查它是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T16:40:17.340

我遇到了同样的问题。在 iPad 上，我可以双击条码枪扳机并提示虚拟键盘。但是，这在 Android 上不起作用。

我正在使用这个条形码扫描仪：[http ://www.cilico.us/product/1d-laser-barcode-scanner.html](http://www.cilico.us/product/1d-laser-barcode-scanner.html)

=]

# c#-4.0 - 使用 c# ado.net 非连接架构保存按钮代码

> ID：13048094
> 
> 赞同：1
> 
> 时间：2012-10-24T11:14:04.467
> 
> 标签：c#-4.0

错误：当前上下文中不存在名称“dealerdetailTableAdapter”

```
 private void btnSave_Click(object sender, EventArgs e)
    {
        t = kalliskaBillingDataSet.Tables["DealerDetail"];
        r = t.NewRow();
        r[0] = txtdealerID.Text;
        r[1] = txtname.Text;
        r[2] = txtaddress.Text;
        r[3] = txtphoneno.Text;
        t.Rows.Add(r);
        //'dealerdetailTableAdapter' does not exist in the current context.
        dealerdetailTableAdapter.Update(kalliskaBillingDataSet);
        txtdealerID.Text = System.Convert.ToString(r[0]);
        MessageBox.Show("Data Saved", "DealerDetail", MessageBoxButtons.OK, MessageBoxIcon.Information);

    } 
```

# actionscript-3 - flex mobile：textInput没有清除焦点提示

> ID：13048099
> 
> 赞同：1
> 
> 时间：2012-10-24T11:14:18.753
> 
> 标签：actionscript-3, apache-flex, flex4.6, flex-mobile

一个简单的

```
<s:TextInput x="163" y="117"  prompt="hello"/> 
```

不清除焦点提示，但在用户第一次输入字母时清除提示。

**这是 flex mobile 上的行为**（行为在 swf 上是可以的）

这是一个错误以及如何纠正它？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:43:02.533

可能有另一种方法可以摆脱这种情况，但我的方法是您可以添加一个 focusIn 事件并执行以下操作：

```
<s:TextInput id="textInput" x="10" y="24" prompt="Enter SomeThing" focusIn="textinput1_focusInHandler(event)"/>
<fx:Script>
    <![CDATA[
        protected function textinput1_focusInHandler(event:FocusEvent):void
        {
            // TODO Auto-generated method stub
            textInput.prompt = "";
        }
    ]]>
</fx:Script> 
```

可能这对你有用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T20:16:53.910

实际上隐藏焦点提示的解决方案非常简单，只需添加这样的样式声明

```
s|TextInput{
    showPromptWhenFocused: false;
} 
```

或在课堂上

```
.noPromptOnFocus{
    showPromptWhenFocused: false;
} 
```

如果您使用第二种方法，您的 TextInput 应该类似于

```
<s:TextInput id="myTextInput" prompt="Write something here.." styleName="noPromptWhenFocused" /> 
```

无论您使用的是 StageText 还是 TextInputSkin，这都能正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T16:08:40.850

www.Flextras.com 走在正确的道路上。我在 iPad 上使用 TextInput 时遇到了同样的问题，当我需要它时，该字段不会显示为密码。

您需要做的就是手动应用移动 TextInput 皮肤。

```
<s:TextInput x="163" y="117" skinClass="spark.skins.mobile.TextInputSkin" prompt="hello"/> 
```

[您可以在此处](https://stackoverflow.com/questions/11419068/ios-textinput-displayaspassword-doesnt-displayaspassword)的单独问题中查看提供给我的答案。

# java - jsoup getElementsByAttribute 问题

> ID：13048102
> 
> 赞同：2
> 
> 时间：2012-10-24T11:14:37.320
> 
> 标签：java, html-parsing, jsoup

这里输入代码

```
<table style=”padding: 0px; margin: 0px;” cellpadding="0" cellspacing="0" width="626" align="center" bgcolor="White" border="0">
<tr>
<td style=”vertical-align: top;” height="61" valign="top" bgcolor="#0492CB"><a href="http://www.aoec.com"> <img alt="AoEC" src="http://www.aoec.com/email/mute/images/header.gif" style="width: 626px; height: 61px;" border="0" /></a></td>
</tr>
</table> 
```

java编码是

```
Document doc = Jsoup.parse(code);
Elements elements = doc.getElementsByAttribute("style");
for(int se=0;se<elements.size();se++)
{
 System.out.println(elements.get(se).attr("style"));
} 
```

输出是

```
padding:;
vertical-align:; 
```

在上面的代码中 getElementsByAttribute("style") 不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:17:27.697

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:23:50.677

我认为这已经被弃用了。你应该使用`.select();`方法。此外，在循环中使用 foreach 或迭代器是个好主意，因为简单的 for 可能会抛出一些 NullPointerExceptions

[你可以在这里](http://jsoup.org/cookbook/extracting-data/selector-syntax)找到它的文档

但截至目前，我会使用它：

```
//That should get you all tags that have the style attribute
Elements elements = doc.select("[style]");

//That foreach should avoid exceptions, and loop through the collection 
for(Element element : elements) {
    //The print gets a little cleaner too!
    System.out.println(element.attr("style"));
} 
```

# file - 使 completionFromBatchConsumer() 和 readlock=changed 在骆驼文件/ftp 中一起工作

> ID：13048107
> 
> 赞同：0
> 
> 时间：2012-10-24T11:15:01.550
> 
> 标签：file, ftp, apache-camel, aggregation

我有一个文件：路由骆驼组件，它使用一个以completionFromBatchConsumer 作为停止条件的aggregationStrategy。

我的聚合器实现了 CompletionAwareAggregationStrategy

路线本身运行良好。

我目前正在尝试定义一个 readLock=changed 策略来跳过另一个进程正在写入的文件，这也很好。

问题是，当一个文件由于 readLock 被跳过时，似乎批处理大小没有更新，因此聚合器的 onCompletion 方法永远不会被调用，从而导致死路。

骆驼不应该在计算批次大小之前检查 readLock 吗？有没有办法实现这个或任何等效的解决方案？

TKS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:35:05.587

啊，你有一个警告。读锁是即时应用的，而不是急切地应用。所以批量消费者可能会看到有10个文件，但目前只能对9个文件申请读锁。如果您有读锁定超时，则该文件将被跳过。如果您没有超时，那么最终将授予读锁并且可以处理所有 10 个文件。

我不确定是否可以做一些简单的事情，因为完成细节可以相应地更新，但最后一个文件可能是读锁问题。然后你就没有触发器了。

我们可以添加一个功能，在未授予读锁时发出空交换。然后你需要意识到这一点，并在你的自定义聚合策略中处理这个问题。

# java - 在 servlet 中检索 jsonData

> ID：13048113
> 
> 赞同：1
> 
> 时间：2012-10-24T11:15:26.913
> 
> 标签：java, json, servlets, extjs, extjs4

我在我的应用程序中使用 Extjs 4 和 Java Servlet。我想以 json 格式将一些数据发布到服务器。

JSON的格式应该是这样的：

```
{
    "credentials":[
    {
       "username":"george",
       "password":"xyz"
    }
    ]
} 
```

我在 extjs 代码中做到了这一点：

```
buttons: [{
        text: 'Submit',
        handler: function() {               
            Ext.Ajax.request({
                url: '/Model/FormServlet',
                method: 'POST',
                jsonData : {
                    //Hardcoded values
                    username: "george", 
                    password: "xyz"
                },
                callback: function (options, success, response) {                       
                    alert(response.responseText);
                }
            });
        }           
    }] 
```

1）我相信我不会得到上面发布的 JSON 格式。请让我知道如何使用`jsonData`.

2) 如何在 servlet doPost 方法中检索这个？由于我没有使用`params`并已将其替换为`jsonData`因此`request.getParameter`不会在 servlet`doPost`方法中工作。

请让我知道如何使这项工作。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:33:14.657

1）你没事

2）这是一个POST请求；数据不会出现在参数中（例如，不是 multipart/form-data），而是 HTTP 请求的内容。在`doPost`中，只需读取所有内容`request.getInputStream()`并使用正确的编码将其转换为字符串，或者`request.getContent()`如果您已正确`ContentHandler`注册，则直接调用。

类似的东西

```
byte[] ba = IOUtils.toByteArray( req.getInputStream(  ) );
String charset = TypedContentUtils.extractCharset( req.getContentType(  ) );
String json = new String( ba, charset ); 
```

`IOUtils`是 Apache Commons IO（编写自己的 10 行并进行适当的异常处理）；`TypedContentUtils.extractCharset`是一种简单的本地方法，从 Content-Type 中提取字符集或默认为 utf-8。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T13:13:46.393

我在 doPost 方法中尝试了这段代码，它起作用了：

```
StringBuffer jb = new StringBuffer();
      String line = null;
      try {
        BufferedReader reader = req.getReader();
        while ((line = reader.readLine()) != null)
          jb.append(line);
        System.out.println(jb.toString());
      } catch (Exception e) { 
          e.printStackTrace();        
      } 
```

参考文章：

[HttpServletRequest 获取 JSON POST 数据](https://stackoverflow.com/questions/3831680/httpservletrequest-get-post-data)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T12:27:34.790

1）它将按原样发布数据。内容将是：{用户名：“george”，密码：“xyz”}，如果你想要上面的格式并且它是硬编码的，那么你可以直接替换它。

2) 您可以使用 genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)轻松地将您的 json 反序列化为 java 对象。

```
UserCredentials userCredentials = new Genson().deserialize(request.getReader(), UserCredentials.class); 
```

# jquery - 抑制谷歌浏览器下的视频控件效果不佳

> ID：13048118
> 
> 赞同：0
> 
> 时间：2012-10-24T11:15:45.277
> 
> 标签：jquery, google-chrome, html5-video

在 chrome 浏览器下以编程方式启动 mp4/ogv 视频并不完美。在视频的启动时间，控件将始终显示大约。在他们消失前 1 秒。

有谁知道这个问题。我怎样才能抑制这种行为？

这里是代码片段。

```
function setupMediaContainer(mediaUrl) {
mediaobj = document.createElement('video');
    mediaobj.src = mediaUrl;
mediaobj.setAttribute('autoplay',false);
mediaobj.setAttribute('controls',false);
mediaobj.addEventListener("ended", function() { getNextAdvertisingMedia()}); 
mediaobj.width=$(media_container).width();
mediaobj.height=$(media_container).height();    
$(media_container).append(mediaobj); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:34:49.247

我有同样的问题。控件似乎在视频本身的后面，因为我只能看到视频两侧的控件的几个像素。不知道如何解决这个问题。

编辑：我还应该补充一点，我根本没有使用 jquery，但我遇到了同样的问题。我正在使用一些 DOM 向我的视频添加控件，因为我无法控制其他标记。

```
<script>
document.getElementsByTagName('video')[0].setAttribute("controls", "controls");
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:27:09.253

您的问题在这里：

```
mediaobj.setAttribute('controls',false); 
```

这使您的视频元素看起来像这样：

```
<video src="whatever.webm" width="320" height="240" autoplay controls="false"></video> 
```

浏览器不关心`controls`属性的值，只关心它是否存在。所以只要去掉那条线，控件就会消失。

# google-apps-script - 从 Chrome 网上应用店安装应用程序时的自定义图标

> ID：13048120
> 
> 赞同：0
> 
> 时间：2012-10-24T11:15:55.070
> 
> 标签：google-apps-script

我刚刚在 Chrome Webstore 上发布了我的第一个脚本。安装工作正常，但安装的应用程序显示默认（旧）脚本图标 - 即使我提供了自定义图标。有没有办法为已安装的应用程序使用自定义图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:03:47.570

这是一个已知问题，我们正在努力解决这个问题。请继续关注[Google Developers Live](https://developers.google.com/live/) for Apps 脚本时间或[发行说明](https://developers.google.com/apps-script/release_notes)。

# javascript - 加载页面时如何在隐藏字段中获取 JavaScript 函数的返回值

> ID：13048123
> 
> 赞同：0
> 
> 时间：2012-10-24T11:16:09.433
> 
> 标签：javascript, html

我在javascript中有一个函数。在加载 HTML 页面时，我想将 JavaScript 函数的值存储在隐藏字段中。

假设我有：

```
function add()
{
  return 10;
} 
```

然后这 10 应该在加载页面时存储在文本字段中：

```
<input type='hidden' name='anything'/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:30:46.997

您可以像这样为您的输入设置一个 id：

```
<input id="hidden_input" type='hidden' name='anything' value=""/> 
```

他们你可以这样做：

```
<script type='text/javascript'>

document.getElementById("hidden_input").value=add();

function add(){
    return 10;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:28:20.373

```
document.getElement('[name=anything]').value = add();

function add(){
    return 10;
}
​ 
```

`onload`您可以在函数中添加第一行并在body 标记上调用该函数。

示例：http: [//jsfiddle.net/jss3Y/](http://jsfiddle.net/jss3Y/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:29:31.853

你可以用这种方式编写你的函数

```
function add(){
   var answer = 10; //or any calculation you want to do.
   var hiddenField =  "<input type='hidden' name='anything' value='"+ answer +"'/>"
   var myForm = document.getElementById('myFormID');
   // var myForm = document.getElementsByTagName('form')[0]; alternate for selecting form
   myForm.appendChild(hiddenField)
} 
```

# c - 数组和指针在代码生成方面的区别

> ID：13048124
> 
> 赞同：0
> 
> 时间：2012-10-24T11:16:13.417
> 
> 标签：c, string, pointers

> **可能重复：**
> [char a[] = “string”; 之间有什么区别？和 char *p = “字符串”；](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string)

我在某处读过这个问题。

```
char buf[]="hello";
char *buf="hello";
In terms of code generation, how do the two definitions of buf, differ? 
```

有四个选项，我标记了

`The first definition certainly allows the contents to buf to be safely modified at runtie; the second definition does not.`

但事实证明，测验大师必须将以下内容标记为正确。

`They do no differ-- they are functionally equivalent`

为什么我的选择是错误的，因为我不能`buf[3]='t'`为第二种情况做，但我可以为第一种情况做？

谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-24T11:18:36.600

我不知道[C 中字符串文字的“生命周期”，](https://stackoverflow.com/questions/9970295/life-time-of-string-literal-in-c)因此我的回答无效。

## 我的答案：

**只要处理了内存管理，**指针类型和向量/矩阵类型就可以互换。在幕后，编译器将向量/矩阵索引操作切换为指针算术。

```
buf[3] == *(buf+3) 
```

在这种特定情况下，编译器计算字符串的长度并为向量/矩阵和指针分配（堆栈）内存。

在其他情况下，您必须手动为指针分配内存，以便像使用向量/矩阵一样安全地使用它。但语法上同样适用于向量/矩阵，因为您必须指定它的长度`char buf[5]`- 它不像手动内存分配那样冗长，但您必须指定它。

## 编辑：

上面的答案解释了这样一个事实，即在大多数情况下，指针和向量/矩阵在**功能**上是可互换的，但它们确实具有不同的底层结构（指针需要额外的内存位置来将*地址存储到*）。

在字符串文字的情况下，它们在程序的整个生命周期内被分配并保持不变，这使得指向它们的指针在不使用内存分配的情况下保持有效。

# android - ORMLite 查询外键

> ID：13048127
> 
> 赞同：1
> 
> 时间：2012-10-24T11:16:29.493
> 
> 标签：android, database, foreign-keys, ormlite

我有 2 节课

列表

```
@DatabaseTable(tableName = "loginsList")
public class LoginsList {

    @DatabaseField(columnName = "loginListID", generatedId = true)
    private int loginListID;
    @DatabaseField(columnName = "listName")
    private String listName;
    @DatabaseField(columnName = "listDescription")
    private String listDescription;
    @DatabaseField(columnName = "current")
    private boolean current;
    @DatabaseField(columnName = "sent")
    private boolean sent; 
```

登录

```
@DatabaseTable(tableName = "login")
public class Login {
    @DatabaseField(columnName = "loginID", generatedId = true)
    private int loginID;
    @DatabaseField(columnName = "user", foreign=true)
    private User user;
    @DatabaseField(columnName = "loggedIn")
    private boolean loggedIn;
    @DatabaseField(columnName = "loginTime")
    private long loginTime;
    @DatabaseField(columnName = "logoutTime")
    private long logoutTime;
    @DatabaseField(columnName = "loginsList", foreign = true)
    private LoginsList loginsList; 
```

我使用 ORMLite 作为数据库。我想知道如何获取列表的所有登录信息？我试过这样

```
tempLoginList = loginDao.queryForEq("loginsList", list); 
```

其中 list 是 LoginsList 类型，它是我想要获取所有登录名的列表，但它不起作用。如何使用查询生成器来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:54:52.440

```
tempLoginList = loginDao.queryForEq("loginsList", list); 
```

那应该可以正常工作。这里有几件事要检查，可能会妨碍您。

*   ORMLite 存储一个`int`其中`Login`是`loginListID`来自`LoginsList`. 当您将列表与 a 关联时`Login`，它必须*已经*在数据库中创建，因此它的 id 已经生成。

*   如果您查看查询日志（使用以下 log4j 属性打开[日志记录](http://ormlite.com/docs/logging)，您应该会看到关联的查询。您应该能够看到`login`正在查询的 id 字段。您需要确保它是正确的。

    ```
    log4j.logger.com.j256.ormlite=DEBUG
    # to enable logging of arguments to all of the SQL calls
    # uncomment the following lines
    log4j.logger.com.j256.ormlite.stmt.mapped.BaseMappedStatement=TRACE
    #log4j.logger.com.j256.ormlite.stmt.mapped.MappedCreate=TRACE
    #log4j.logger.com.j256.ormlite.stmt.StatementExecutor=TRACE 
    ```

我有很多单元测试，但不是专门围绕`dao.queryForEq(...)`和外国领域。我刚刚将它们添加到代码库中，它们工作正常。这是我的日志输出，可能会有所帮助：

```
[DEBUG] BaseMappedStatement insert data with statement 'INSERT INTO `foo` (`val` ,`equal` ,`null` ) VALUES (?,?,?)' and 3 args, changed 1 rows
[TRACE] BaseMappedStatement insert arguments: [1231231, 0, null]
[DEBUG] BaseMappedStatement assigned id '1' from keyholder to 'id' in Foo object
[DEBUG] BaseMappedStatement insert data with statement 'INSERT INTO `foreign` (`foo_id` ) VALUES (?)' and 1 args, changed 1 rows
[TRACE] BaseMappedStatement insert arguments: [1]
[DEBUG] BaseMappedStatement assigned id '1' from keyholder to 'id' in Foreign object
[DEBUG] StatementBuilder built statement SELECT * FROM `foreign` WHERE `foo_id` = 1 
[DEBUG] BaseMappedStatement prepared statement 'SELECT * FROM `foreign` WHERE `foo_id` = 1 ' with 0 args
[DEBUG] SelectIterator starting iterator @1781793025 for 'SELECT * FROM `foreign` WHERE `foo_id` = 1 '
[DEBUG] SelectIterator closed iterator @1781793025 after 1 rows
[DEBUG] StatementExecutor query of 'SELECT * FROM `foreign` WHERE `foo_id` = 1 ' returned 1 results 
```

# jquery - 从编辑器所见即所得中删除按钮

> ID：13048128
> 
> 赞同：5
> 
> 时间：2012-10-24T11:16:41.687
> 
> 标签：jquery, wysiwyg, redactor

这是我的代码：

[http://jsfiddle.net/KfVJK/](http://jsfiddle.net/KfVJK/)

这是添加编辑器的代码：

```
$(document).ready(
            function()
            {
                $('#redactor_content').redactor();
            }
        );​ 
```

我想限制工具栏上的按钮数量。例如，只有基本格式，如粗体、斜体等。

如何从工具栏中删除按钮？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T11:20:52.120

使用`buttons`设置：

```
var buttons = ['formatting', '|', 'bold', 'italic'];

$('#redactor').redactor({buttons: buttons}); 
```

这是从[文档](http://imperavi.com/redactor/docs/settings/)中提取的：

> 默认情况下，此设置包含以下工具栏按钮数组：
> 
> ```
> ['html', '|', 'formatting', '|', 'bold', 'italic', 'deleted', '|', 
> 'unorderedlist', 'orderedlist', 'outdent', 'indent', '|',
> 'image', 'video', 'file', 'table', 'link', '|',
> 'fontcolor', 'backcolor', '|', 'alignment', '|', 'horizontalrule']
> 
> // additional buttons
> // 'underline', 'alignleft', 'aligncenter', 'alignright', 'justify'
> // If you wish to set your own array, set it in this option:
> 
> $('#redactor').redactor({
>     buttons: ['html', '|', 'formatting', '|', 'bold', 'italic'] 
> }); 
> ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T11:23:17.810

浏览他们的[文档](http://imperavi.com/redactor/docs/toolbar/)后，我建议您将按钮设置如下：

```
$('#redactor').redactor({
    buttons: ['formatting', '|', 'bold', 'italic'] 
}); 
```

**演示：http:** [//jsfiddle.net/KfVJK/3/](http://jsfiddle.net/KfVJK/3/)

# iphone - Web 服务和 JSON 解析

> ID：13048129
> 
> 赞同：1
> 
> 时间：2012-10-24T11:16:53.177
> 
> 标签：iphone, jsonp

在我的应用程序中，Web 服务是在 dot net 中创建的，我正在使用这些服务，我得到了响应。在所有领域，如公司、类型、位置，一切都是字符串，这没有问题。还有一个字段称为展览编号实际上它是一个整数，但它们仅作为字符串创建。当我显示这个时，它显示的是 null 而不是那个数字。

# class - Create a template with ref class that inherits from the same ref class

> ID：13048137
> 
> 赞同：0
> 
> 时间：2012-10-24T11:17:35.313
> 
> 标签：class, templates, c++-cli

I want to do something like this:

```
template <class SoType> 
public ref class SoTile : SoType 
```

As my class is ref and I inherit from SoType, it may be ref

```
template <ref class SoType> 
public ref class SoTile : SoType 
```

But when I try to compile it gives me this error:

```
Error   1   error C3816: 'class SoType' was previously declared or defined with a different managed modifier    d:\oceanprojects\lidarinfo\oivlodenode\SoTile.h 7   1   OivLodeNode 
```

Some help? Maybe I'm not understanding something...

# sql-server-2008 - Using WildCard for dateTime column in SQL query

> ID：13048141
> 
> 赞同：2
> 
> 时间：2012-10-24T11:17:41.623
> 
> 标签：sql-server-2008

I want to look for all records within a table that has date column for a specific date, at the moment I am trying this query,

```
SELECT     *
FROM      Table_ABC
WHERE     DateCreated CONTAINS 24/10/2012 
```

But its not working

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T11:20:32.777

If the DateCreated column is a DATETIME type, you should try:

```
SELECT     *
FROM      Table_ABC
WHERE     YEAR(DateCreated) = 2012
AND       MONTH(DateCreated) = 10
AND       DAY(DateCreated) = 24 
```

or simply

```
SELECT     *
FROM      Table_ABC
WHERE     DATE(DateCreated) = "2012-10-24" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:22:11.267

Try:

```
Select * from Table_ABC where DateCreated between '24/10/2012 HH:MM:SS' and '24/10/2012 HH:MM:SS' 
```

Changes hours minutes and seconds to be what you want it to be and it's usually in 24 hour time.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-24T12:06:30.193

I would recommend the following statement:

```
SELECT    *
FROM      Table_ABC
WHERE     CONVERT(DATE, DateCreated) = '2012-10-24' 
```

Reference for CONVERT: [https://docs.microsoft.com/sql/t-sql/functions/cast-and-convert-transact-sql](https://docs.microsoft.com/sql/t-sql/functions/cast-and-convert-transact-sql)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-20T15:50:28.237

In case it's helpful, this adds a wildcard:

```
SELECT    *
FROM      Table_ABC
WHERE     CONVERT(DATE, DateCreated) LIKE '%2012-10-24%' 
```

# asp.net - 枢轴网格错误？

> ID：13048150
> 
> 赞同：0
> 
> 时间：2012-10-24T11:18:12.233
> 
> 标签：asp.net

我刚开始使用 ASPxPivotGrid，我发现使用设计视图设置多维数据集的所有字段会导致控件显示上面的错误（但奇怪的是，如果我使用 SQL 源设置它，它工作正常） . 然后我使用有效的源视图设置控件。我也在源视图中设置了 OLAPConnectionString 属性。

然后，让它表现出我需要它带来的真正问题：我在 UpdatePanel 中有控件，并且不希望它在页面加载时可见。单击按钮后添加控件的最佳方法是什么？
我最初在源视图中设置了 Visible="false" 但这导致 javascript 没有被加载（所以试用版水印甚至不在页面上）。

我发现不设置 OLAPConnectionString 属性允许呈现控件，但不允许数据绑定；所以响应按钮单击，我设置了 OLAPConnectionString 并调用数据绑定，并再次得到上面的错误。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:22:57.800

确认您使用的是正确版本的 OLEDB dataprovider............

# c# - 使用数据库中的数据在控制台中创建格式良好的表格

> ID：13048151
> 
> 赞同：0
> 
> 时间：2012-10-24T11:18:13.003
> 
> 标签：c#, sqldatareader

我想向我的控制台输出一个格式良好的表格，其中包含来自 SqlDataReader 的数据。

我在 SO 上找到[了这个](https://stackoverflow.com/questions/856845/how-to-best-way-to-draw-table-in-console-app-c)答案，它有一个很好的类来完成所有工作，但是，我需要一些帮助来实现 SqlDataReader 部分。

我打印表格的代码如下所示：

```
 SqlDataReader data = getCommentsFromDB();
        int value = 997;
        string[,] arrValues = new string[5, 5];
        for (int i = 0; i < arrValues.GetLength(0); i++)
        {
            for (int j = 0; j < arrValues.GetLength(1); j++)
            {
                value++;
                arrValues[i, j] = value.ToString();
            }
        }
        ArrayPrinter.PrintToConsole(arrValues);
        Console.ReadLine(); 
```

**getCommentsFromDB**看起来像这样：

```
 SqlConnection conn = dal.connectDatabase();
        conn.Open();
        cmd = new SqlCommand(@"SELECT * FROM GuestBook", conn);
        rdr = cmd.ExecuteReader();
        return rdr; 
```

如果您还需要什么，请告诉。

**更新**

我更进一步。但是，现在我收到了这个令人讨厌的错误：

```
Error: {0}System.NullReferenceException: Object reference not set to an instance of an object.
   at GuestBook.ArrayPrinter.GetMaxCellWidth(String[,] arrValues) in \GuestBook\GuestBook\ArrayPrinter.cs:line 39
   at GuestBook.ArrayPrinter.GetDataInTableFormat(String[,] arrValues) in \GuestBook\GuestBook\ArrayPrinter.cs:line 60
   at GuestBook.ArrayPrinter.PrintToConsole(String[,] arrValues) in \GuestBook\GuestBook\ArrayPrinter.cs:line 117
   at GuestBook.StudentManager.showAllComments() in \GuestBook\GuestBook\StudentManager.cs:line 49
   at GuestBook.ConsoleGUI.start(String[] args) in \GuestBook\GuestBook\ConsoleGUI.cs:line 28
   at GuestBook.Program.Main(String[] args) in \GuestBook\GuestBook\Program.cs:line 20 
```

以我的经验，我会说我正在使用的课程有问题。也许它需要更新？

我在 VS2012 和 C#.NET 4.0 中运行

**更新 2**

我的数据打印出来是这样的：

```
-------------------------------------------------------------------------
|    Column 1     |    Column 2     |    Column 3     |    Column 4     |
-------------------------------------------------------------------------
|       X         |                 |                 |                 |
|                 |        X        |                 |                 |
|                 |                 |       X         |                 |
|                 |                 |                 |        X        |
------------------------------------------------------------------------- 
```

而不是在一行中。

到目前为止我的代码：

```
 public void showAllComments()
    {
        SqlDataReader reader = getCommentsFromDB();

        string[,] arrValues = new string[5, 3];

        for (int i = 0; i < 5; i++)
        {
            for (int j = 0; j < 3; j++)
            {
                if (!reader.Read()) break; //no more rows
                {
                    arrValues[i, j] = reader[j].ToString();
                }
            }
        }
        ArrayPrinter.PrintToConsole(arrValues);
    } 
```

另外，我希望它垂直扩展以包含数据库中的所有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:02:40.967

要让数组打印机类与您一起使用*SqlDataReader*，您必须将[DataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)中包含的数据移动到字符串数组中。

您可以使用 while 循环访问*SqlDataReader ，使用**Read()*函数作为条件，该函数将 Reader 移动到下一行；可以使用**[]**运算符以列位置或字段名称作为索引来访问值。

```
while (reader.Read())
{
    string myVal = reader["COLUMN_NAME"].ToString();
} 
```

假设您想阅读阅读器前五行中的前 5 列，您可以使用 for 循环执行类似的操作（显然您可能需要使代码更灵活）

**编辑：修改代码**

```
SqlDataReader reader = command.ExecuteReader();

string[,] arrValues = new string[5, 5];

for (int i = 0; i < 5; i++)
{
    if (!reader.Read()) break; //no more rows 
    for (int j = 0; j < 5; j++)
    {
        arrValues[i,j] = reader[j].ToString();
    }
} 
```

**编辑2：**

这应该解决行问题的随机数。不是最佳解决方案，但应该可以。 *警告*我只是在文本编辑器中编写的，无法使用编译器对其进行测试

```
public void showAllComments()
    {
        SqlDataReader reader = getCommentsFromDB();
        List<List<string>> myData; //create list of list
        int fieldN = reader.FieladCount; //i assume every row in the reader has the same number of field of the first row
        //Cannot get number of rows in a DataReader so i fill a list
        while (reader.Read())
        {
            //create list for the row
            List<string> myRow = new List<string>();
            myData.Add(myRow);//add the row to the list of rows
            for (int i =0; i < fieldN; i++)
            {
                myRow.Add(reader[i].ToString();//fill the row with field data
            }
        }

        string[,] arrValues = new string[myData.Count, fieldN]; //create the array for the print class

        //go through the list and convert to an array
        //this could probably be improved 
        for (int i = 0; i < myData.Count; i++)
        {
            List<string> myRow = myData[i];//get the list for the row
            for (int j = 0; j < nField; j++)
            {
                arrValues[i, j] = myRow[j]; //read the field
            }
        }
        ArrayPrinter.PrintToConsole(arrValues);
    } 
```

# ios - 为什么我的应用程序界面在带有 XCode 4.5 的 iOS5.1 中不可见，除非多任务处理>

> ID：13048155
> 
> 赞同：1
> 
> 时间：2012-10-24T11:18:32.807
> 
> 标签：ios, ios5

我有一个应用程序，我正在升级以在 iOS6 中更好地工作。以前它在 iOS5 中运行良好，但由于某种原因，使用新的 XCode 和 iOS5.1 模拟器，在设备上我看到的只是白屏。我可以点击屏幕并获取显示界面在某处的调试信息，我只是看不到它。

有关信息，我有一个带有 rootViewController 的自定义 UINavigationController。该 UINavigationController 设置为窗口 rootviewcontroller，它在 iOS6 中都能完美运行。

最奇怪的是，只要我打开多任务托盘或用五指滑动切换应用程序，界面就会出现。我的应用程序委托中的所有 applicationWillResignActive 等方法都是空的，所以 wtf 正在发生吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:19:34.410

最后破解它感谢： http: [//www.cocos2d-iphone.org/forum/topic/1719](http://www.cocos2d-iphone.org/forum/topic/1719)

问题来自自 iOS3 以来一直存在的 MainWindow.xib 文件中的窗口对象！刚刚删除它，该应用程序就很好用了。我猜想界面可以得到手势等但什么都看不到的原因是它前面的附加 UIWindow 对象。

我猜你生活和学习！

马丁

# javascript - 如何在 iframe 内悬停时勾勒元素而不影响布局？

> ID：13048158
> 
> 赞同：2
> 
> 时间：2012-10-24T11:18:44.810
> 
> 标签：javascript, css

我希望在悬停时突出显示页面的元素。该页面位于 iframe 内。

我正在使用一个 css 类来给出蓝色轮廓：

```
.highlight {
   outline: 2px solid #08C !important;
} 
```

**尝试#1：向悬停的元素添加类**

首先，我尝试将 css 类添加到悬停的元素中。为了确保轮廓完全可见，我不得不将周围元素的 css 位置更改为“相对”并使用 z-index 值。但这在某些情况下破坏了布局（例如图像转到下一行）。

***问题：要么轮廓不完全可见，要么我破坏了布局***

**尝试#2：在悬停元素之上添加新的 DOM 元素**

为了避免影响页面的设计，我认为创建一个带有蓝色边框的新 div 并将其放置在现有元素的顶部会更好。

这在这个小提琴中可以正常工作：http: [//jsfiddle.net/aDGbX/1/](http://jsfiddle.net/aDGbX/1/)

但到目前为止还没有在 iframe 中。（我在任何地方都看不到大纲）。

```
$(document).ready(function() {

 $('body').find(".hoverClass").bind("hover", function() {   
     thisId = $(this).attr('id');
    var pos = $('#'+thisId).offset();
     var w = $(this).width();
    var h = $(this).height();

    jQuery('<div/>', {
        id: 'highlighterDiv',
    }).appendTo('body');

    $("#highlighterDiv").css( {position: 'absolute', top: pos.top, left: pos.left, 'z-index': '99' } );
    $("#highlighterDiv").css( {width: w, height: h} );
    $("#highlighterDiv").addClass('highlight');
    $("#highlighterDiv").show();

 });

});
​ 
```

***问题：目前无法在 iframe 中工作***

**问题：**

第二次尝试是更好的方法吗？或者你会推荐什么？

# scala - Lift (Scala) 带有代码段的自定义表单

> ID：13048159
> 
> 赞同：1
> 
> 时间：2012-10-24T11:18:50.310
> 
> 标签：scala, authentication, lift

各位程序员，您好，您可能从我之前的问题中知道，我是 Scala/Lift 领域的绝对新手，因此我可能会问一些琐碎的问题，对此感到抱歉:)

我很想制作一个自定义登录表单来验证用户身份（用户没有通过数据库进行身份验证，而是通过谷歌协议缓冲区的 API 调用），所以我需要做的就是获取输入并将它们发送到API。

到目前为止，我想出了我的`login.html`页面：

```
<div id="loginContainer" class="loginMainContainer centerContainer">
      <div class="loginInputWrapper">
        <input type="text" name="loginName" id="loginName" class="txtLogin" />
      </div>
      <div class="loginInputWrapper">
        <input type="password" name="loginPassword" id="loginPassword" class="pwLogin" />
      </div>
      <div class="buttonWrapper loginButtonWrapper">
        <button type="submit" class="hiddenButton qsbfont">Login</button>
      </div>
    </div> 
```

我想掌握`loginName`和`loginPassword`字段值。实现这一目标的（最佳）方法是什么？

我试图用这个类来获取它并将它添加到`snippet`包中，但我不知道如何将这两者连接在一起。这是我的片段：

```
object MyAuthentication {
  def authentication(name: String, password: String) = {

    def validate(user: String, password: String): Boolean = {
      if(user == "tac" && password == "tac") true else false
    }

    def createUser(loggedIn: Boolean): Boolean = {
      if (loggedIn) {
        val user = new MyUser
        user.setName(name)
        user.setUID(1111)
        user.setLoginState(loggedIn)
        user.setLanguage("en_EN")
      }
      loggedIn
    }

    if (createUser(validate(name, password)))
      <span>loggedIn</span>
    else
      <span>failure!</span>

  }

  def render = SHtml.onSubmitList(credentials => {
    authentication(credentials(0), credentials(1))
  })

} 
```

那么，这样可能吗？我怎样才能将这两个东西连接在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:42:07.100

不是一个完整的答案，但希望是从哪里开始的指针：

查看[此 Ajax 表单演示](http://demo.liftweb.net/ajax-form)。相关的 scala 源代码在[这里](https://github.com/lift/examples/blob/master/combo/example/src/main/scala/net/liftweb/example/snippet/AjaxForm.scala)，模板源代码在[这里](https://github.com/lift/examples/blob/master/combo/example/src/main/webapp/ajax-form.html)。

这似乎与您尝试做的类似。他们捆绑一切的方式是将what-would-be-the-form 的字段包装在一个`<lift:snippet type="AjaxForm:show" form="post">`. 然后在服务器端，该`show`方法采用模板 xml（它们`Group`用作参数类型，但我很确定您可以将其交换为 for `NodeSeq`）并将字段绑定到启用 Ajax 的字段。

请注意`import SHtml._`演示源中的...坦率地说，我不喜欢演示这样做，因为对于 Lift 的新手来说，很难理解方法的来源。`untrustedSelect`, `select`,`submit`和等方法`ajaxCall`来自该导入。

最后一点，对于 Lift 相关的问题，我发现[Lift 的 Google Groups 页面](https://groups.google.com/forum/?fromgroups#!forum/liftweb)比 SO 更有帮助。我不是电梯大师，但那里的人。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:24:32.380

这是一个关于如何制作表格的页面的链接[http://simply.liftweb.net/index-4.1.html#toc-Section-4.1](http://simply.liftweb.net/index-4.1.html#toc-Section-4.1)

需要注意的是，虽然 a 内不应该有 div 标签，但`<div class="lift:LoginForm">code goes here</div>`我更喜欢这个，因为它允许更多控制。

# android-emulator - 如何从默认路径更改 AVD 路径

> ID：13048161
> 
> 赞同：1
> 
> 时间：2012-10-24T11:18:51.907
> 
> 标签：android-emulator

当我尝试运行我的 AVD 时出现以下错误

**NAND：无法写入文件 C:\DOCUME~1....\LOCALS~1\Temp\2\AndroidEmulator\TMP7.tmp，设备上没有剩余空间。**

我的 SDK 不在 C: 中。有什么方法可以更改 AVD 生成的临时文件的路径。

在互联网上搜索后，我尝试了以下，但没有奏效。

1.  创建了指向不在 C: 中的路径的用户变量 ANDROID_SDK_HOME。
2.  删除并重新创建了 AVD 。

*PS：在我工作的服务器上，我无法增加 C: 上的配额，这就是为什么需要移出它的原因。*

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:46:11.543

那是自动生成的文件。你必须从此路径中删除

*   开始 > 运行 > %temp% > cltra+a > 全部删除。

希望这能解决您的问题并正确打开您的模拟器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-05T17:06:17.777

正如 Manik 所说，一个解决方案可能是建立一个到另一个位置的符号链接：

```
mklink /J "C:\Users\{you}\AppData\Local\Temp\AndroidEmulator" "{new-location}" 
```

# c# - WPF MVVM 初学者指南

> ID：13048167
> 
> 赞同：0
> 
> 时间：2012-10-24T11:19:23.743
> 
> 标签：c#, wpf, silverlight, mvvm

尝试制作一个文档查看器，比如 Acrobat，它由页面组成，每个页面都由缩略图组成（大小由用户自行决定）。我不确定如何设计 MVVM。目前我有：

**文档**视图模型、**页面视图模型**、**缩略图视图模型**

> DocumentViewModel 有 ObservableCollection() // 跟踪 Pages
> 
> PageViewModel 有 ObservableCollection() // 跟踪要按文档显示的缩略图。

然而，这种设计会引起问题。例如，如果有 3 页缩略图。并且一半的缩略图从第 2 页中删除，然后第 3 页的缩略图应自动重新定位到第 2 页上的新可用空间。每个 PageViewModel 都必须了解彼此，这将违反 MVVM 策略，不是吗？在 DocumentViewModel 中声明 2 个 ObservableCollections 会更好吗？

欢迎任何帮助、指点、建议、指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:40:12.510

ViewModel 不需要相互了解。

我建议使用您选择的任何 MVVM 框架，例如[Caliburn Micro](http://caliburnmicro.codeplex.com/)。CM 允许您在对象之间发送**消息**，而它们彼此不知道，并使它们完全**解耦**。

简而言之，Caliburn Micro 框架提供了一个`EventAgregator`发送消息的方法。需要发送消息的对象在 中注册消息类型`EventAggregator`，需要接收的对象也在 中订阅它们`EventAggregator`。

请参阅此处的示例：[使用 Caliburn.Micro 的 EventAggregator 进行消息传递简介](http://joshearl.wordpress.com/2011/03/31/introduction-to-messaging-with-caliburn-micros-eventaggregator/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:00:16.443

PageViewModels 不应该知道彼此。

DocumentViewModel 将知道您拥有的 PageViewModels，它可以处理 ThumbnailViewModels 的重新分发。让 DocumentViewModel 处理每个 PageViewModel 的页数和 ThumbNailViewModel。

如果将缩略图的 ObservableCollection 移到 DocumentViewModel 中，则可以根据需要动态创建 PageViewModel。每当 ThumbnailViewModel 集合更改时，您都会收到通知，然后您可以根据该通知更改 PageViewModels。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T14:58:22.490

解决了！我使用了 helgeheldre 的使用 DocumentViewModel 作为控制器的建议和 Jen H 的使用 Caliburn.Micro 的框架进行消息传递的建议。

所有消息都被路由到 DocumentViewModel（通过 EventAgregator），然后由后者将任务委托给各个 PageViewModel。

# c# - C#.NET - Type.GetType("System.Windows.Forms.Form") 返回 null

> ID：13048171
> 
> 赞同：0
> 
> 时间：2012-10-24T11:19:42.200
> 
> 标签：c#, .net, reflection, types

我的应用程序中有一段代码（*它引用 System.Windows.Forms*），它试图解析类的类型信息，`Form`如下所示：

```
Type tForm = Type.GetType("System.Windows.Forms.Form");
dynamic instance = Activator.CreateInstance(tForm); 
```

但因为为空而`Activator.CreateInstance`失败。`tForm`

我该如何解决这个问题？

**编辑：类型必须在运行时可解析！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T11:26:36.947

您需要使用类型的程序集限定名称

```
Type tForm = Type.GetType("System.Windows.Forms.Form, System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T11:27:22.470

`Type.GetType(string)`检查一些不同的事情：如果传递的字符串*包含程序集信息*，那么它将在那里查找。否则，将检查调用程序集和一些其他系统程序集（可能是 System 和 mscorlib）。它**不会**检查每个组件。

所以，你有几个选择：

*   在字符串中包含汇编信息，即`"Namespace.TypeName, AssemblyName"`
*   使用`assembly.GetType(string)`，`assembly`正确的程序集在哪里
*   手动循环当前加载的所有程序集`AppDomain`，依次检查每个程序集

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T11:26:44.067

检查这个 Jon Skeet 的答案：[https ://stackoverflow.com/a/3758295/314488](https://stackoverflow.com/a/3758295/314488)

```
using System;
using System.Windows.Forms;

class Test
{
    static void Main()
    {
        string name = typeof(Form).AssemblyQualifiedName;
        Console.WriteLine(name);

        Type type = Type.GetType(name);
        Console.WriteLine(type);
    }
}
Output:

System.Windows.Forms.Form, System.Windows.Forms, Version=4.0.0.0, Culture=neutral,
PublicKeyToken=b77a5c561934e089
System.Windows.Forms.Form 
```

**请注意，如果您使用的是强命名程序集（如本例中的 Form），则必须包含所有程序集信息 - 版本控制、公钥令牌等。**

# download - cygwin安装

> ID：13048173
> 
> 赞同：5
> 
> 时间：2012-10-24T11:19:53.593
> 
> 标签：download, cygwin, installation

我正在尝试在运行 Windows 7 64 位的笔记本电脑上安装 cygwin。根据官方网站，建议下载和安装单个软件包，因为这需要很多时间。所以我一个一个安装，但问题是在每次安装结束时，都会出现错误。“下载不完整。再试一次？” 这是因为我没有安装所有软件包还是因为我选择的软件包的下载不完整/不成功？如果是后者，我该如何解决这个问题？

我正在从镜像站点下载。[http://mirrors.xmission.com](http://mirrors.xmission.com)和[http://mirrors.kernel.org](http://mirrors.kernel.org)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-18T12:10:35.510

尝试以管理员身份运行 setup.exe。它对我有用。右键单击 exe -> 以管理员身份运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T07:24:36.003

Cygwin 设置终于为我工作了，-“make: *** No targets specified and no makefile found”

Cygwin 32bit for windows 8 64bit系统崩溃了很多时间，最后我删除了之前下载的文件，然后我再次选择mirrors.kernal.org（其他可能也可以），这次99%崩溃了，但我选择了“TRY再次 - 不”它跳过了一些库并完成了它的过程。但它对我有用，当我在 shell 中尝试 make 命令时，我得到““make: *** No targets specified and no makefile found”。这意味着成功。

参考 - www.ee.ryerson.ca/~courses/ee8218/cygwin.doc‎</p>

谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:29:04.633

[在我的 Windows 7 机器上，使用此处](http://cygwin.com/install.html)找到的标准 setup.exe 可以正常工作。可以随时通过运行 setup.exe 安装和删除单个软件包

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-14T22:00:55.237

现在终于有了我的 cygwin 安装程序，它是 setup-x86_64.exe 在我的机器上工作：

所以在安装或 Cygwin 设置期间，

到达**选择您的 Internet 连接的位置**

选择使用 Internet Explorer 代理设置的单选按钮

现在下一个窗口将是**选择包**

并选择所需的包：

示例：python ssh vim emacs

安装并享受..

# ajax - asp mvc - 发送 ajax NTLM 请求时，Opera 返回 401 响应

> ID：13048175
> 
> 赞同：1
> 
> 时间：2012-10-24T11:20:11.827
> 
> 标签：ajax, asp.net-mvc, opera, ntlm, http-status-code-401

我有 web 应用程序（asp.net mvc mvc 4），当我在 Visual Studio 中启用 ntlm 身份验证并尝试发送 ajax 请求时，例如`$.ajax({url : 'http://localhost:4135/'});`返回的服务器响应为 401 - 它只发生在 opera、chrome 工作正常和 firefox 上。谁能帮助解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:02:42.823

他们似乎修复了 Opera 12.10 中的错误。

# jquery - 在 jquery 中处理 symfony2 表单验证结果

> ID：13048182
> 
> 赞同：0
> 
> 时间：2012-10-24T11:20:31.983
> 
> 标签：jquery, symfony

我想要做的是通过 jquery ajax 将表单发送到我的 symfony2-webapp。服务器上发生的情况是服务器以验证错误或成功消息响应表单。

如何在 jquery 中处理这两个不同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:12:18.050

> 我现在的问题是 isValid 为 false，因为字符串字段不够长但 hasError 返回 false 而 getErrors 返回 array()。可能是什么原因？

在每个表单字段中添加 error_bubbling，下面是一个示例：

```
...

$builder->add('name', 'type', array(
    ...
    'error_bubbling' => true
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:10:13.940

您应该让您的控制器返回一个 JSON 数组（使用空模板仅打印 JSON 并`json_encode`生成正确的 JSON）。Jquery 加载函数将回调函数作为处理 AJAX 响应的第三个参数（当然，一旦完成）。使用从服务器返回的 JSON，您可以轻松地做任何您需要的事情 - 显示 ok 消息或任何验证错误。

# jquery - 使用 jquery draggable 将图像拖到另一个图像下方

> ID：13048186
> 
> 赞同：5
> 
> 时间：2012-10-24T11:20:55.367
> 
> 标签：jquery, jquery-ui-draggable

我有一个背景图像，其中有一个洞，以便我们能够看到它下面的内容。我在背景图像下方放置了另一个图像，以便通过孔可以看到它。现在我需要从透明孔中拖动下面的图像。

背景图片： ![在此处输入图像描述](../Images/e330362f131aca92584cb2a6a7ea0eeb.png)

我正在使用 z-index 将另一个图像放在它后面并将其关联可拖动。如果我在圆形孔上拖动，我希望下面的图像可以拖动。目前它不会发生，因为我已经将 draggable 与后面的另一个 div 相关联，并且我正在拖动它上面的 div。如何使上方 div 上的拖动事件传播到下方 div 并被拖动？

我希望我在这里很清楚。

我的div：

```
<div class="container">
 <div id="screen">
    <img src="kailash.jpg" class="drag-image" id="draggable"/>
 </div>
 <div id="bg">
    <img src="final.png"/>
 </div>
</div> 
```

编辑：也可以接受任何其他实现这一目标的方法。添加了[JsFiddle](http://jsfiddle.net/kailash19/DZK4w/1/)示例

编辑：Asad 在下面给出了很好的解决方案，但它在 IE 和 Opera 中不起作用。虽然这可以通过使用触发器来实现。只需在 Asad 的解决方案中添加此代码：

```
 $("#bg").mousedown(function(event){
     $("#draggable").trigger(event);
 }); 
```

并删除：

```
pointer-events: none 
```

来自 CSS。你可以在这里找到工作示例（跨浏览器）：[JsFiddle](http://jsfiddle.net/kailash19/3CYd4/1/)。

希望这对其他人也有帮助:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T11:41:28.130

这是一个工作[示例](http://jsfiddle.net/DZK4w/5/)。我只是`pointer-events:none;`在 bg div 上设置并包含图像。

编辑：正如 kailash 在下面指出的那样，我最初的建议是更兼容浏览器，所以我在这里重新发布它以供后代使用：

```
$('#bg').mousedown(function(ev) {
    $('#screen').trigger(ev);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:37:55.267

移动上面的 div 时会触发一个[拖动事件。](http://docs.jquery.com/UI/API/1.8/Draggable#event-drag)使用它，只需根据 div 的位置更改下图的位置

# javascript - 无法使用 Jquery 删除表的 tbody

> ID：13048192
> 
> 赞同：1
> 
> 时间：2012-10-24T11:21:32.233
> 
> 标签：javascript, jquery, asp.net-mvc, razor

我的标记中有下表：-

```
<table id="tablelist" border="1">

       <thead>
        <tr>
    </tr>
    </thead>
       <tbody></tbody>
       </table> 
```

我正在使用以下 Java 脚本构建上表，当用户单击链接时将触发该脚本：-

```
function getprocesslist(result) {
        $('#tablelist tbody').remove();

    var str = 'Total Number Of Processes:- ' + result.total.toString();
        $('#total').text(str.toString());

        var str1 = '<tr><th>' + 'Process Name' + '</th><th>' + 'Process Requestor ID' + '</th><th>' + 'Process State' + ' </th><th>' + 'Process Start Date' + ' </th><th>' + 'Process Due Date' + ' </th></tr>';
        $('#tablelist tr:last').after(str1);
    $.each(result.data, function (key, val) {
        var str2 = '<tr><td>' + val.name + '</td><td>' + val.requesterId + '</td><td>' + val.state + '</td><td>' + val.startedTime + '</td><td>' + val.due + '</td></tr>';

        $('#tablelist tr:last').after(str2);

    });
   } 
```

但问题是，当用户多次点击链接时，新数据将显示在旧表下，而不是删除旧数据。我认为我的代码的问题是，在第一次叮当声时，我`<tbody></tbody>`无法使用 Jquery 再次引用它？关于如何解决这个问题的任何想法？

BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:17:38.337

您正在移除 tbody，然后将所有内容添加到表头。相反，清空头部和主体并将内容附加到正确的位置：

```
function getprocesslist(result) {
    $('#tablelist tbody, #tablelist thead').empty();

    var str = 'Total Number Of Processes:- ' + result.total.toString();
    $('#total').text(str.toString());

    var str1 = '<tr><th>' + 'Process Name' + '</th><th>' + 'Process Requestor ID' + '</th><th>' + 'Process State' + ' </th><th>' + 'Process Start Date' + ' </th><th>' + 'Process Due Date' + ' </th></tr>';
    $('#tablelist thead').append(str1);

    $.each(result.data, function (key, val) {
        var str2 = '<tr><td>' + val.name + '</td><td>' + val.requesterId + '</td><td>' + val.state + '</td><td>' + val.startedTime + '</td><td>' + val.due + '</td></tr>';
        $('#tablelist tbody').append(str2);
    });
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:25:44.403

再次添加 tbody。

```
$('#tablelist').append('<tbody></tbody>'); 
```

# python - 如何为多处理池的每个成员初始化数据库连接？

> ID：13048193
> 
> 赞同：0
> 
> 时间：2012-10-24T11:21:33.623
> 
> 标签：python, multiprocessing

我使用`multiporcessing.Pool`类向工作人员提交任务，我希望每个工作人员在启动（或由于`maxtasksperchild`参数而被替换）时打开自己的数据库连接。

现在代码看起来类似于：

```
conn = None
def init(dsn):
    global conn
    conn = connect(dsn)

def f(x):
    global conn
    <do the work with conn>

p = multiprocessing.Pool(initializer=init, initargs=('dsn',), maxtasksperchild=100)
p.map(f, ....) 
```

这行得通，但是那个`global`关键字看起来非常难看，可以更温和地完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T15:51:13.847

过了一段时间这个问题......简单的答案是，你不能用当前的实现来做这种事情`Pool`

# objective-c - 如何将现有的 XCode (4.5) 项目添加到 BitBucket

> ID：13048197
> 
> 赞同：4
> 
> 时间：2012-10-24T11:21:45.057
> 
> 标签：objective-c, ios, git, svn, bitbucket

我在 XCode 4.5 中有一个现有项目，它不受任何形式的源代码控制。我要做的就是将它添加到 BitBucket 存储库中，以便我可以与其他开发人员一起工作。

我已经尝试并尝试将此代码置于源代码控制之下并放到 BitBucket 存储库中，但我似乎无法确定它。

有人可以一步一步地告诉我。

*   我在 BitBucket 中创建了一个存储库，它正在等待我的代码。

*   为了在本地创建存储库，我在相关目录上运行`git init`,`git add .`和。`git commit -m 'Initial version'`

*   BitBucket 建议我运行`hg push`以导入现有存储库，但出现以下错误：

    *   中止：在“/Users/xxx/Documents/Dev/projectname”中找不到存储库（未找到.hg）！

如果我进入 XCode，我会在 Organizer 中显示一个存储库。但它根本与 BitBucket 无关。

非常感谢所有帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:45:14.770

您需要将您的 bitbucket 存储库作为远程存储库添加到本地存储库。你可以通过运行来做到这一点

> git 远程添加来源 git@bitbucket.org: *userName/repositoryName.git*。

然后，您需要通过运行将本地文件推送到远程仓库

> git push 起源大师

请注意，这会将它们推送到 bitbucket 存储库上的主分支。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:14:52.980

虽然并不完美，但我发现[SourceTree](http://blog.bitbucket.org/2011/10/06/sourcetree-mac-client-acquired-by-atlassian/)对 BitBucket 非常有帮助。

# swing - 如何从 JTabbedPane 获取选项卡组件

> ID：13048200
> 
> 赞同：1
> 
> 时间：2012-10-24T11:21:57.257
> 
> 标签：swing

我想知道是否可以从 JTabbedPane 中检索包含选项卡的组件，以便我可以将它放在 BorderLayout 北位置，并且选项卡窗格将位于 BorderLayout 中心位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:35:36.120

我认为这样做没有任何意义 - 默认情况下，选项卡位于北方位置。

而且 - 不，无论如何你都不能这样做 - 你不能将选项卡与选项卡内容区域分开，因为它是由 TabbedPaneUI 组合的单个组件。您可以通过使用方法指定选项卡相对于内容的位置`setTabPlacement`。例如，您可以将其更改为 EAST 展示位置：

```
JTabbedPane tabbedPane = new JTabbedPane ();
tabbedPane.setTabPlacement ( JTabbedPane.EAST ); 
```

# r - 面板数据错误 (plm) crossprod 中的错误 (t(X), beta)

> ID：13048202
> 
> 赞同：9
> 
> 时间：2012-10-24T11:22:04.670
> 
> 标签：r, plm

我有一个 df （一个`pdata.frame`对象）：

```
head(df) :
        Company Year Kapitalinkomster Bank.o.kassa Obligationer      Lån       Aktier Placeringar.andra.ftg   Fodringar Reala.tillgångar
5-1948        5 1948         4.009780    0.8677505     40.12268 54.80897 1.4630271422           0.049855191 0.633959879     1.581139e+00
6-1948        6 1948         3.221688    0.9311173     71.16401 26.39038 0.4678139417           0.000000000 0.437931676     4.931845e-01
12-1948      12 1948         3.136025    0.7628832     46.10452 44.85120 4.1966304368           0.003740003 1.020092197     2.683785e+00
19-1948      19 1948         1.862666    0.1865510     16.82441 31.67412 0.7308074302          46.245334945 3.459693951     6.213455e-01
20-1948      20 1948         3.724516    1.7719721     70.98456 27.18631 0.0004305687           0.056565968 0.000165769     4.305687e-07
21-1948      21 1948        11.288744    1.1572048     64.21109 33.42962 0.2890377378           0.000000000 0.912175552     1.150518e-06
        Övriga.tillgångar
5-1948       0.4726258998
6-1948       0.1155685107
12-1948      0.3771504323
19-1948      0.2577362013
20-1948      0.0000000000
21-1948      0.0008697916 
```

然后我尝试`random`用包做一个模型`plm`（Kapitalinkomster 变量在剩余的变量上回归）：

```
library(plm)
random <- plm(formula=Kapitalinkomster~ Bank.o.kassa+Obligationer+Lån+
  Aktier+Placeringar.andra.ftg+Fodringar+Reala.tillgångar+Övriga.tillgångar,data=df,index=c("Company","Year"), model="random") 
```

我可以得到输出：

```
random

Model Formula: Kapitalinkomster ~ Bank.o.kassa + Obligationer + Obligationer + 
    Lån + Aktier + Placeringar.andra.ftg + Fodringar + Reala.tillgångar + 
    Övriga.tillgångar

Coefficients:
          (Intercept)          Bank.o.kassa          Obligationer                   Lån                Aktier Placeringar.andra.ftg 
            0.7204962             0.0441635             0.0297014             0.0618975             0.0023219             0.0142085 
            Fodringar      Reala.tillgångar 
            0.0341745            -0.0104192 
```

在上面我可以看到 `Övriga.tillgångar`变量 in`Model Formula`但不是`Coefficients`..

问题还在于我无法获取包含`summary`when`Övriga.tillgångar`变量：

```
summary(random) :
Error in crossprod(t(X), beta) : non-conformable arguments 
```

如果我排除它，`summary(random)`作品。

有什么建议么？

# android - 尝试添加地图时出错：android.view.InflateException: Binary XML file line #9: Error inflating class com.google.android.maps.MapView

> ID：13048207
> 
> 赞同：0
> 
> 时间：2012-10-24T11:22:16.900
> 
> 标签：android, google-maps, android-inflate

我创建了以下扩展 MapActivity 的类。错误在这个类中

查看视图 = infalInflater.inflate(R.layout.car_map_view, null);

```
public class ShowCarMapChild extends MapActivity {
private MapView mapView;
private Car car;
private String tag;

@Override
protected void onCreate(Bundle icicle) {
    // TODO Auto-generated method stub
    super.onCreate(icicle);
    setContentView(R.layout.car_map_view);
}

public void setCar(Car car){
    this.car = car;
}

public void setTag (String tag){
    this.tag = tag;
}

public String getTag (){
    return tag;
}

public View getMapView(Context context){
    LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
    View view = infalInflater.inflate(R.layout.car_map_view, null);
    setMap(view,context);
    return view;
}

public void setMap(View view, Context context){
    mapView = (MapView) view.findViewById(R.id.mapShowCarLocation);
    MapController mc = mapView.getController();
    mc.animateTo(car.getLocation());
    mc.setZoom(15);
    PinpointItem point = new PinpointItem(car.getLocation(), car, context);
    Drawable d = getResources().getDrawable(R.drawable.pinpoint);
    CustomPinpointOverlay overlay = new CustomPinpointOverlay(d);
    overlay.insertPinpoint(point);
    mapView.getOverlays().add(overlay);
}
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

这是xml文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="150dip"
android:orientation="vertical" >

    <com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapShowCarLocation"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:apiKey="0UFOPeLgKxoW8VGjdzV5QN6N53N7733i1kTFI3g"
        android:enabled="true" />
</LinearLayout> 
```

这是适配器

公共类 ShowCarExpandListAdapter 扩展 BaseExpandableListAdapter {

```
private Context context;
private ArrayList<ShowCarExpandGroup> groups;
private Car car;

public ShowCarExpandListAdapter (Context context, ArrayList<ShowCarExpandGroup> groups, Car car){
    this.context = context;
    this.groups = groups;
    this.car = car;
}

public void addItem(ShowCarExpandChild item, ShowCarExpandGroup group){
    if (!groups.contains(group)){
        groups.add(group);
    }
    int index = groups.indexOf(group);
    ArrayList<ShowCarExpandChild> ch = groups.get(index).getItems();
    ch.add(item);
    groups.get(index).setItems(ch);
}

public void addItem(ShowCarMapChild item, ShowCarExpandGroup group){
    if (!groups.contains(group)){
        groups.add(group);
    }
    int index = groups.indexOf(group);
    ArrayList<ShowCarMapChild> ch = groups.get(index).getMapItems();
    ch.add(item);
    groups.get(index).setMapItems(ch);
}

public Object getChild(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    if (groupPosition == 0){
        ArrayList<ShowCarMapChild> chList = groups.get(groupPosition).getMapItems();
        return chList.get(childPosition);
    }else{
        ArrayList<ShowCarExpandChild> chList = groups.get(groupPosition).getItems();
        return chList.get(childPosition);
    }
}

public long getChildId(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return childPosition;
}

public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View view,
        ViewGroup parent) {
    // TODO Auto-generated method stub

    if (view == null){
        if (groupPosition == 0){
            ShowCarMapChild mapChild = (ShowCarMapChild) getChild(groupPosition, childPosition);
            view = mapChild.getMapView(context);
            //LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
            //ShowCarMapChild mapChild = (ShowCarMapChild) getChild(groupPosition, childPosition);
            //view = infalInflater.inflate(R.layout.car_map_view, null);
            //MapView mv = mapChild.getMap(view, context);
            //mv.setTag(mapChild.getTag());

        }else{
            LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
            ShowCarExpandChild child = (ShowCarExpandChild) getChild(groupPosition, childPosition);
            view = infalInflater.inflate(R.layout.car_child, null);
            TextView tv = (TextView) view.findViewById(R.id.tvChild);
            tv.setText(child.getName());
            tv.setTag(child.getTag());
        }           
    }
    return view;
}

public int getChildrenCount(int groupPosition) {
    // TODO Auto-generated method stub
    if (groupPosition == 0){
        ArrayList<ShowCarMapChild> chList = groups.get(groupPosition).getMapItems();
        return chList.size();
    }else{
        ArrayList<ShowCarExpandChild> chList = groups.get(groupPosition).getItems();
        return chList.size();
    }
}

public Object getGroup(int groupPosition) {
    // TODO Auto-generated method stub
    return groups.get(groupPosition);
}

public int getGroupCount() {
    // TODO Auto-generated method stub
    return groups.size();
}

public long getGroupId(int groupPosition) {
    // TODO Auto-generated method stub
    return groupPosition;
}

public View getGroupView(int groupPosition, boolean isLastChild, View view, ViewGroup parent) {
    // TODO Auto-generated method stub
    ShowCarExpandGroup group = (ShowCarExpandGroup) getGroup(groupPosition);
    if(view == null){
        LayoutInflater inf = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
        view = inf.inflate(R.layout.car_group, null);
    }
    TextView tv = (TextView) view.findViewById(R.id.tvGroup);
    tv.setText(group.getName());
    return view;
}

public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return true;
}

public boolean isChildSelectable(int arg0, int arg1) {
    // TODO Auto-generated method stub
    return true;
} 
```

}

下面是主要活动：

```
 public class ShowCarExpList extends Activity {
private static final int CODE_CHANGE_DETAILS = 1;
private ShowCarExpandListAdapter expAdapter;
private ArrayList<ShowCarExpandGroup> expListItems;
private ExpandableListView expandList;
private Button back;
private Button edit;
private Button book;
private TextView brand;
private ImageView image; 
private Car car;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d("hemendik pasetan da", "egixe da?");
    setContentView(R.layout.car);
    setUpViews();
    expandList = (ExpandableListView) findViewById (R.id.expCarList);
    expListItems = setStandardGroups();
    expAdapter = new ShowCarExpandListAdapter (ShowCarExpList.this, expListItems, car);
    expandList.setAdapter(expAdapter);
    // Set up our adapter

}

private void setUpViews() {
    // TODO Auto-generated method stub
    back = (Button)findViewById (R.id.btnBackCarView);
    edit = (Button)findViewById (R.id.btnEditCarView);
    book = (Button)findViewById (R.id.btnBookCarCarView);
    Intent i = getIntent();
    car = (Car) i.getParcelableExtra("car");
    brand = (TextView)findViewById (R.id.txtCarViewBrand);
    image = (ImageView)findViewById (R.id.ivCarMainPhoto);
    String urlString = "http://tapazz.com/autopia/upload/cars/"+car.getPhotoUrl();
    DrawableManager.fetchDrawableOnThread(urlString, image, null);
    brand.setText(car.getBrand()+" "+car.getModel());
    back.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent in = new Intent(ShowCarExpList.this, MyCarsFragment.class);
            ShowCarExpList.this.startActivity(in);
        }
    });
    edit.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(ShowCarExpList.this, AddCarActivity.class);
            intent.putExtra("car", car);
            startActivityForResult(intent, CODE_CHANGE_DETAILS); 
        } 
    });
}

public ArrayList<ShowCarExpandGroup> setStandardGroups(){
    ArrayList<ShowCarExpandGroup> list = new ArrayList<ShowCarExpandGroup>();
    ArrayList<ShowCarExpandChild> list2;
    ArrayList<ShowCarMapChild> listMap = new ArrayList<ShowCarMapChild>();
    ShowCarExpandGroup gru1 = new ShowCarExpandGroup();
    gru1.setName("        Location");
    ShowCarMapChild ch1_1 = new ShowCarMapChild();
    ch1_1.setCar(car);
    ch1_1.setTag(null);
    listMap.add(ch1_1);
    gru1.setMapItems(listMap);
    list2 = new ArrayList<ShowCarExpandChild>();

    ShowCarExpandGroup gru2 = new ShowCarExpandGroup();
    gru2.setName("        License Plate");
    ShowCarExpandChild ch2_1 = new ShowCarExpandChild();
    ch2_1.setName(car.getLicensePlate());
    ch2_1.setTag(null);
    list2.add(ch2_1);
    gru2.setItems(list2);
    list2 = new ArrayList<ShowCarExpandChild>();

    ShowCarExpandGroup gru3 = new ShowCarExpandGroup();
    gru3.setName("        Description");
    ShowCarExpandChild ch3_1 = new ShowCarExpandChild();
    if (car.getDescription()==null){
        ch3_1.setName("Sorry no description available");
    }else{
        ch3_1.setName(car.getDescription());
    }
    ch3_1.setTag(null);
    list2.add(ch3_1);
    gru3.setItems(list2);
    list2 = new ArrayList<ShowCarExpandChild>();

    ShowCarExpandGroup gru4 = new ShowCarExpandGroup();
    gru4.setName("        Pricing");
    ShowCarExpandChild ch4_1 = new ShowCarExpandChild();
    ch4_1.setName("Price per hour: "+((Double)car.getPricePerHour()).toString());
    ch4_1.setTag(null);
    list2.add(ch4_1);
    ShowCarExpandChild ch4_2 = new ShowCarExpandChild();
    ch4_2.setName("Price per km: "+((Double)car.getPricePerKm()).toString());
    ch4_2.setTag(null);
    list2.add(ch4_2);
    gru4.setItems(list2);
    list2 = new ArrayList<ShowCarExpandChild>();

    ShowCarExpandGroup gru5 = new ShowCarExpandGroup();
    gru5.setName("        Host/Owner");
    ShowCarExpandChild ch5_1 = new ShowCarExpandChild();
    ch5_1.setName("Maarten");
    ch5_1.setTag(null);
    list2.add(ch5_1);
    gru5.setItems(list2);
    list2 = new ArrayList<ShowCarExpandChild>();

    ShowCarExpandGroup gru6 = new ShowCarExpandGroup();
    gru6.setName("        Reviews");
    setReviews();
    ShowCarExpandChild ch6_1 = new ShowCarExpandChild();
    ch6_1.setName("no reviews");
    ch6_1.setTag(null);
    list2.add(ch6_1);
    gru6.setItems(list2);
    list2 = new ArrayList<ShowCarExpandChild>();

    ShowCarExpandGroup gru7 = new ShowCarExpandGroup();
    gru7.setName("        Insurance");
    ShowCarExpandChild ch7_1 = new ShowCarExpandChild();
    ch7_1.setName(car.getInsuranceCompany());
    ch7_1.setTag(null);
    list2.add(ch7_1);
    gru7.setItems(list2);
    list2 = new ArrayList<ShowCarExpandChild>();

    ShowCarExpandGroup gru8 = new ShowCarExpandGroup();
    gru8.setName("        More Pictures");
    ShowCarExpandChild ch8_1 = new ShowCarExpandChild();
    ch8_1.setName("no pictures");
    ch8_1.setTag(null);
    list2.add(ch8_1);
    gru8.setItems(list2);
    list2 = new ArrayList<ShowCarExpandChild>();

    ShowCarExpandGroup gru9 = new ShowCarExpandGroup();
    gru9.setName("        Availability");
    ShowCarExpandChild ch9_1 = new ShowCarExpandChild();
    ch9_1.setName("now available");
    ch9_1.setTag(null);
    list2.add(ch9_1);
    gru9.setItems(list2);
    list2 = new ArrayList<ShowCarExpandChild>();

    ShowCarExpandGroup gru10 = new ShowCarExpandGroup();
    gru10.setName("        Sharing settings");
    ShowCarExpandChild ch10_1 = new ShowCarExpandChild();
    ch10_1.setName("private");
    ch10_1.setTag(null);
    list2.add(ch10_1);
    gru10.setItems(list2);
    list2 = new ArrayList<ShowCarExpandChild>();

    ShowCarExpandGroup gru11 = new ShowCarExpandGroup();
    gru11.setName("        Keyless lock");
    ShowCarExpandChild ch11_1 = new ShowCarExpandChild();
    ch11_1.setName("Keylock installed! :)");
    ch11_1.setTag(null);
    list2.add(ch11_1);
    gru11.setItems(list2);

    list.add(gru1);
    list.add(gru2);
    list.add(gru3);
    list.add(gru4);
    list.add(gru5);
    list.add(gru6);
    list.add(gru7);
    list.add(gru8);
    list.add(gru9);
    list.add(gru10);
    list.add(gru11);
    return list;
}

private void setReviews() {
    // TODO Auto-generated method stub

} 
```

}

以及它给出的错误：

```
 10-24 16:09:48.218: E/AndroidRuntime(353): FATAL EXCEPTION: main
    10-24 16:09:48.218: E/AndroidRuntime(353): android.view.InflateException: Binary XML file line #7: Error inflating class com.google.android.maps.MapView
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at com.tapazz.car.ShowCarMapChild.getMapView(ShowCarMapChild.java:44)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at com.tapazz.car.ShowCarExpandListAdapter.getChildView(ShowCarExpandListAdapter.java:80)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.ExpandableListConnector.getView(ExpandableListConnector.java:450)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.AbsListView.obtainView(AbsListView.java:1315)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.ListView.makeAndAddView(ListView.java:1727)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.ListView.fillDown(ListView.java:652)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.ListView.fillSpecific(ListView.java:1284)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.ListView.layoutChildren(ListView.java:1558)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.AbsListView.onLayout(AbsListView.java:1147)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.View.layout(View.java:7035)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.View.layout(View.java:7035)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:909)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.View.layout(View.java:7035)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.ScrollView.onLayout(ScrollView.java:1205)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.View.layout(View.java:7035)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.View.layout(View.java:7035)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.View.layout(View.java:7035)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.os.Handler.dispatchMessage(Handler.java:99)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.os.Looper.loop(Looper.java:123)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at java.lang.reflect.Method.invokeNative(Native Method)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at java.lang.reflect.Method.invoke(Method.java:521)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at dalvik.system.NativeStart.main(Native Method)
    10-24 16:09:48.218: E/AndroidRuntime(353): Caused by: java.lang.reflect.InvocationTargetException
    10-24 16:09:48.218: E/AndroidRuntime(353):  at com.google.android.maps.MapView.<init>(MapView.java:238)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at java.lang.reflect.Constructor.constructNative(Native Method)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
    10-24 16:09:48.218: E/AndroidRuntime(353):  ... 38 more
    10-24 16:09:48.218: E/AndroidRuntime(353): Caused by: java.lang.IllegalArgumentException: MapViews can only be created inside instances of MapActivity.
    10-24 16:09:48.218: E/AndroidRuntime(353):  at com.google.android.maps.MapView.<init>(MapView.java:282)
    10-24 16:09:48.218: E/AndroidRuntime(353):  at com.google.android.maps.MapView.<init>(MapView.java:255)
    10-24 16:09:48.218: E/AndroidRuntime(353):  ... 42 more 
```

希望它会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:51:29.420

根据官方 java 文档，每个地图 MapActivity 只能使用一个地图视图。以下链接也讨论了相同的问题：

[如何在一个 Activity 上制作 2 个 MapView？](https://stackoverflow.com/questions/2018929/how-to-to-make-2-mapview-on-one-activity)

因此，要解决您的问题，一种可能的解决方案是使用谷歌静态地图 API 并在用户单击静态地图视图时打开完整的 mapView。在以下问题中查看@Siddharth Lele 的答案，以获取有关如何添加静态地图的帮助...

[Android - Listview 中包含的 MapView](https://stackoverflow.com/questions/2961275/android-mapview-contained-within-a-listview)

您可以使用[智能图像视图](http://loopj.com/android-smart-image-view/)之类的东西，它允许将 http URI 设置为图像 URI。您可以将静态地图 URI 设置为图像 URI，以在 ImageVIew 中显示地图。智能图像视图的源代码也可以在以下位置获得：

[https://github.com/loopj/android-smart-image-view](https://github.com/loopj/android-smart-image-view)

或者您可以重新设计您的应用程序并创建一个单独的地图视图并创建多个叠加层来显示您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:54:13.833

您根本不能将地图视图放在适配器中（至少不能放在单独的类中）。Mapview 不是视图，mapview 是一种组合在一起且不能拆分的活动/视图。我不确定您要达到的目标，但如果您能解释一下，我可能会提出另一种方法。

# c# - 如何使用 C# 和 WebKit.NET 捕获完整的网站截图？

> ID：13048213
> 
> 赞同：11
> 
> 时间：2012-10-24T11:22:44.013
> 
> 标签：c#, .net, webkit, screenshot

我正在使用[WebKit.NET](http://webkitdotnet.sourceforge.net/)在我的 C# 应用程序中集成一个浏览器组件。问题是我只能通过屏幕截图捕获浏览器窗口中的可见部分。有没有办法截取整个页面的截图？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T11:27:38.653

似乎通过使用 NativeMethods.SendMessage 是可能的，虽然这会搞砸消息队列，你可以使用[http://cutycapt.sourceforge.net/](http://cutycapt.sourceforge.net/)或者[http://iecapt.sourceforge.net/](http://iecapt.sourceforge.net/)或[http： //labs.awesomium.com/capturing-web-pages-with-c-net/](http://labs.awesomium.com/capturing-web-pages-with-c-net/) ?

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T11:42:34.370

我改用 WebBrowser；`ScrollBarsEnabled = false`让我捕获整个页面。

这是一些代码：

```
protected override void Render(HtmlTextWriter writer)
 {

        StringBuilder builder = new StringBuilder();
        HtmlTextWriter htw = new HtmlTextWriter(new StringWriter(builder));
        base.Render(htw);
        string html = builder.ToString();

        _Generate(html);
 } 

private void _Generate(string html)
{
    var browser = new WebBrowser { ScrollBarsEnabled = false };
    DisplayHtml(html, browser);
    browser.DocumentCompleted += WebBrowser_DocumentCompleted;
    while (browser.ReadyState != WebBrowserReadyState.Complete)
       Application.DoEvents();  
    browser.Dispose();
}

private void DisplayHtml(string html, WebBrowser browser)
{
    browser.Navigate("about:blank");
    if (browser.Document != null)
    {
        browser.Document.Write(string.Empty);
    }
    browser.DocumentText = html;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-18T15:45:58.273

试试这个：

```
using System.IO;
using System.Drawing;
using System.Drawing.Imaging;
using System.Threading;
using System.Windows.Forms;

    public byte[] picbytes;

    private void capture_Click(object sender, EventArgs e)
    {

        makepicture(txtURL.Text.Trim());
        pictureBox1.Visible = true;
        pictureBox1.Image = ByteToImage(picbytes);
    }

    private void makepicture(string url)
    {
        Thread thread = new Thread(delegate()
        {
            using (WebBrowser browser = new WebBrowser())
            {
                browser.ScrollBarsEnabled = false;
                browser.AllowNavigation = true;
                browser.Navigate(url);
                browser.Width = 1024;
                browser.Height = 1575;
                browser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(DocumentCompleted);
                while (browser.ReadyState != WebBrowserReadyState.Complete)
                {
                    System.Windows.Forms.Application.DoEvents();
                }

            }
        });
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();
        thread.Join();
    }

    private void DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        WebBrowser browser = sender as WebBrowser;
        using (Bitmap bitmap = new Bitmap(browser.Width, browser.Height))
        {
            browser.DrawToBitmap(bitmap, new System.Drawing.Rectangle(0, 0, browser.Width, browser.Height));
            using (MemoryStream stream = new MemoryStream())
            {
                bitmap.Save(stream, System.Drawing.Imaging.ImageFormat.Png);
                byte[] bytes = stream.ToArray();
                picbytes = bytes;

            }
        }
    }

    public static Bitmap ByteToImage(byte[] blob)
    {
        MemoryStream mStream = new MemoryStream();
        byte[] pData = blob;
        mStream.Write(pData, 0, Convert.ToInt32(pData.Length));
        Bitmap bm = new Bitmap(mStream, false);
        mStream.Dispose();
        return bm;

    } 
```

# c# - Outlook 2010 加载项首次

> ID：13048214
> 
> 赞同：0
> 
> 时间：2012-10-24T11:22:45.430
> 
> 标签：c#, .net, outlook-addin, outlook-2010

我需要为我的 Outlook 2010 创建一个加载项。我已经使用 Office Outlook 2010 模板开始了一个新项目，并且没有添加任何代码。

当我单击 F5（运行）时，Outlook 2010 应用程序开始加载，但卡在“进行中”。

我在 Outlook 2010 中使用 VS 2010 C#。

由于我没有向加载项添加任何代码（我只是运行了默认模板代码），为什么会卡住？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:44:21.197

我可以建议的第一件事是在`ThisAddIn_Startup()`方法中添加一些代码，例如：

```
private void ThisAddIn_Startup()
{
  MessageBox.Show("It did something!");
} 
```

看看你是否在屏幕上看到一条消息。如果没有，请在该行（甚至是加载项入口点）上放置一个断点，看看它是否命中它。

我可以建议的下一件事是阅读 SO，即在`outlook-addin`标签下，并可能在一些起点上搜索网络：

继承人让你去：

[教程](https://stackoverflow.com/questions/1755001/outlook-add-in-tutorial)

# java - 在 Android 应用中从 ImageButton 打开图库

> ID：13048215
> 
> 赞同：0
> 
> 时间：2012-10-24T11:22:51.600
> 
> 标签：java, android, gallery, imagebutton

我正在尝试制作一个打开带有图像的画廊的 ImageButton。我现在试图让它变得简单——就在我点击图片打开带有几张图片的画廊时。但我不知道该怎么做。我在 Internet 上进行了搜索，发现其他人正在使用 XML 代码来调用一种 Java 方法 - OnClick。我在这里有 XML：

```
<ImageButton
   android:id="@+id/imageView5"
   android:layout_width="@dimen/overview_schedule_image_width"
   android:layout_height="match_parent"
   android:layout_marginTop="10dp"
   android:src="@drawable/red"
   android:onClick="buttonClick" /> 
```

XML 中有更多代码，但我认为这是必要的。到目前为止，它运作良好。但现在我不确定该“buttonClick”方法应该放在哪里以及它应该包含什么。我做了这门课：

```
package org.imageGallery;

import org.imageGallery.actionbarcompat.ActionBarActivity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Gallery;

public class ButtonClickActivity extends ActionBarActivity implements OnItemSelectedListener, OnClickListener{

@Override
public void onClick(View v) {

}

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {

}
} 
```

我想“buttonClick”方法应该放在这里，它应该拍摄图像。但是如何将它们返回到 XML 以及如何在图库中显示它们？我对 Android 还是很陌生，但希望我能做到。

编辑：

[这是一个很棒的教程，对我帮助很大。](http://mobile.tutsplus.com/tutorials/android/android-sdk-displaying-images-with-an-enhanced-gallery/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:27:08.783

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("content://media/external/images/media/16"))); /** you can use your uri */ 
```

编辑：对于图像/*

```
public class sdActivity extends Activity implements MediaScannerConnectionClient{
    public String[] allFiles;
private String SCAN_PATH ;
private static final String FILE_TYPE = "*/*";

private MediaScannerConnection conn;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    File folder = new File("/sdcard/youfoldername/");
    allFiles = folder.list();
 //   uriAllFiles= new Uri[allFiles.length];
    for(int i=0;i<allFiles.length;i++)
    {
        Log.d("all file path"+i, allFiles[i]+allFiles.length);
    }
  //  Uri uri= Uri.fromFile(new File(Environment.getExternalStorageDirectory().toString()+"/yourfoldername/"+allFiles[0]));
    SCAN_PATH=Environment.getExternalStorageDirectory().toString()+"/yourfoldername/"+allFiles[0];
    Log.d("SCAN PATH", "Scan Path " + SCAN_PATH);
    Button scanBtn = (Button)findViewById(R.id.scanBtn);
    scanBtn.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v) {
        startScan();
    }});
    }
    private void startScan()
    {
    Log.d("Connected","success"+conn);
    if(conn!=null)
    {
    conn.disconnect();
    }
    conn = new MediaScannerConnection(this,this);
    conn.connect();
    }
@Override
public void onMediaScannerConnected() {
    Log.d("onMediaScannerConnected","success"+conn);
    conn.scanFile(SCAN_PATH, FILE_TYPE);    
}
@Override
public void onScanCompleted(String path, Uri uri) {
    try {
        Log.d("onScanCompleted",uri + "success"+conn);
        if (uri != null) 
        {
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(uri);
        startActivity(intent);
        }
        } finally 
        {
        conn.disconnect();
        conn = null;
        }
       }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:53:51.573

首先，您必须创建一个扩展活动的类，如下所示：

```
 public class Main extends Activity{} 
```

1\. 然后覆盖一个`OnCreate()`在活动启动时启动的方法。

1.  在调用的 onCreate 块方法中覆盖，`setContentView(R.layout.yourLayout)`以便活动显示 xml 文件。

2.  然后获取对按钮的引用，以便您可以这样收听：`Button myButton = (Button) findViewById(R.id.button1);`

如果你在你的类中实现了 OnClickListener ，那么在实现的方法中：

```
@Override
public void onClick(View v) {
if(v.getItemId() == R.id.button1){
//do what you want here:
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("content://media/external/images/media/16"))) //As deeper answered to open the gallery
} 
```

# asp.net - Sql Server 2012 自签名证书

> ID：13048218
> 
> 赞同：1
> 
> 时间：2012-10-24T11:23:08.397
> 
> 标签：asp.net, certificate, connection-string, sql-server-2012, self-signed

我已经创建了一个自签名证书，我正在尝试使用该证书启动 SQL Server 2012，但它失败并出现错误对象未找到属性。服务根本没有启动。

但我删除了证书，我能够启动 SQL Server。

但是，我尝试使用 Encrypt = true 和 Trust Certificate = true 连接到 SQL Server，SQL Server 客户端能够连接到 SQL Server。从 2012 年起，SQL Server 会自动使用自签名证书吗？

如果我设置 Encrypt = true 和 Trust Certificate = false，它也会给我信任错误。我安装证书时尚未在 SQL Server 2012 上安装证书。

1.  它是 SQL Server 客户端库中的错误吗？它使用参数 Encrypt = true 和 Trust = true 进行连接，即使没有证书并且连接实际上并不安全。
2.  如果未配置，SQL Server 2012 是否会自动使用自签名证书？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T08:59:35.037

我只能重复我在评论中对您的问题所写的内容：如果不发布更多详细信息，可能没有人可以直接帮助您。

您可以阅读[此](http://support.microsoft.com/kb/316898)和[此](http://thesqldude.com/2012/04/21/setting-up-ssl-encryption-for-sql-server-using-certificates-issues-tips-tricks/)或[此](http://blogs.msdn.com/b/sqlserverfaq/archive/2012/04/04/can-tls-certificate-be-used-for-sql-server-encryption-on-the-wire.aspx)以了解 SQL Server 可以使用哪些证书的其他信息。

[在这里](http://msdn.microsoft.com/en-us/library/ms189067%28v=sql.105%29.aspx)，您可以找到有关证书属性和将要创建的私钥的信息。对于密钥，拥有`AT_KEYEXCHANGE`KeySpec 选项非常重要。以后很难更改选项（可以通过使用`certutil.exe`-importPFX 和`AT_KEYEXCHANGE`，但这真的很棘手）。例如，需要用于核心签名的自签名证书应具有`AT_SIGNATURE`相反的 KeySpec 选项。所以你不能只是得到一些未知的自签名证书，然后寄希望于它可以用于 SSL 加密。*我建议您使用[MakeCert.exe](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386968%28v=vs.85%29.aspx)实用程序来创建新证书，安装它并使用 SQL Server 配置管理器对其进行配置以供 SQL Server 使用*。

在[本文](http://thesqldude.com/tag/makecert/)或[另](http://kushagrarakesh.blogspot.de/2011/10/ssl-with-microsoft-sql-server-2008.html)一篇文章中，您将找到有关如何使用 MakeCert.exe 创建可供 SQL Server 使用的自签名证书的更多信息。

# c#-4.0 - 将配对列表转换为一对多查找

> ID：13048220
> 
> 赞同：2
> 
> 时间：2012-10-24T11:23:19.650
> 
> 标签：c#-4.0, linq-to-objects, lookup-tables

我有成对字符串的列表（长度相等），称它们为“源”和“目标”。一个源可以映射到多个目标。我可以使用 LINQ 将其转换为查找表（将源映射到目标列表）吗？一种（冗长的）方法是：

```
// There may be multiple targets corresponding to each source
// as in the following example lists.
// NB. Lists are guaranteed same length
List<string> sourceNames = new List<string>() { "A", "B", "C", "A", "B", "C" };
List<string> targetNames = new List<string>() { "Z", "Y", "X", "W", "V", "U" };

// Use extension methods to make list of unique source names
List<string> uniqueSourceNames = sourceNames.Distinct().ToList<string>();

// For each unique source, make a list of the corresponding targets
Dictionary<string, List<string>> nameLookup = new Dictionary<string, List<string>>();
foreach (string sourceName in uniqueSourceNames)
{
    List<string> targetsForSource = new List<string>();

    for (int index = 0; index < sourceNames.Count; index++)
    {
        if (sourceNames[index] == sourceName)
            targetsForSource.Add(targetNames[index]);
    }
    nameLookup.Add(sourceName, targetsForSource);
}

// Can now use the nameLookup dictionary to map a source name to a list of target names
// e.g. this returns "Z", "W"
List<string> targets = nameLookup["A"]; 
```

有没有办法使用 LINQ 更有效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:29:03.780

您可以使用[`GroupBy`](http://msdn.microsoft.com/en-us/library/bb534501.aspx)和[`ToDictionary`](http://msdn.microsoft.com/en-us/library/bb548657.aspx)：

```
var lookup = sourceNames
   .Select((Source, i) => new { Target = targetNames.ElementAt(i), Source})
   .GroupBy(x => x.Source)
   .ToDictionary(g => g.Key, g => g.Select(x => x.Target)); 
```

现在每个不同的源字符串都映射到一个`IEnumerable<string>`目标。

```
foreach (var kv in lookup)
    Console.WriteLine("{0} has destinations {1}"
        , kv.Key
        , string.Join(",", lookup[kv.Key])); 
```

**编辑**：这是演示：http: [//ideone.com/b18H7X](http://ideone.com/b18H7X)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:33:56.610

您可以使用 Zip 和 ToLookup：

```
var nameLookup = sourceNames
  .Zip(targetNames, (x, y) => new { Source = x, Target = y })
  .ToLookup(x => x.Source, x => x.Target); 
```

# java - 测试随机生成的案例

> ID：13048222
> 
> 赞同：0
> 
> 时间：2012-10-24T11:23:21.997
> 
> 标签：java, testing, random, methodology

我用物品创建了一个棋盘，这些物品是为某种三消游戏随机创建的。我想测试一些案例。你能建议任何方法来测试随机产生的案例吗？

最好的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:47:59.753

使用 TestNG，您可以使用“参数化”测试，并通过任何数据提供者为它们播种： [http](http://www.mkyong.com/unittest/testng-tutorial-6-parameterized-test/) ://www.mkyong.com/unittest/testng-tutorial-6-parameterized-test/ ，例如一个简单的 csv 文件。

您可能希望从一个广泛的可能输入列表开始，然后找到一组输入，这些输入可以为您的测试类提供最高的覆盖率。

测试覆盖率工具可以检查在给定输入的测试期间是否到达了代码的每个可能的执行路径。

也许这还不够，但是对提供特定输出的可能输入进行逆向工程更多的是人工智能引擎的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:28:21.323

对于包含随机数（例如数字）的测试场景，您需要一个 RandomGenerator，您可以在其中设置`Seed`. 如果种子相同，则生成的数字将始终相同，顺序相同。对于测试，您将 Seed 设置为固定值，对于实际应用程序，您将使用变量值，例如`System.getMilliSeconds()`. 因此，您可以检查一个 Seed 的测试结果的正确性，之后您可以根据需要重复测试，如果结果发生变化，但您的 Seed 不是您发现错误案例。

# image - 如何更改归档类别 woocommerce 中的图像大小

> ID：13048225
> 
> 赞同：2
> 
> 时间：2012-10-24T11:23:31.970
> 
> 标签：image, categories, woocommerce

我正在使用插件 WooCommerce 测试商店。我想问如何更改存档类别中的缩略图大小。例如：[http](http://shop.bits77.com/?product_cat=giay-dep) ://shop.bits77.com/?product_cat=giay- dep 我可以在 index.php 中更改大小例如：[http](http://shop.bits77.com) ://shop.bits77.com 但我不知道如何更改存档类别。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:27:05.790

默认情况下，Woocommerce 具有以下缩略图大小：

*   300x300（单一产品）/* 300px 是我的尺寸，我不记得确切的默认尺寸是多少，但类似 ​​/
*   120x120（图库 - 类别 - 存档页面 - 搜索产品）
*   90x90（单品缩略图）

现在，您可以在 Woocommerce 管理面板中更改它（配置 -> 目录 -> 滚动到底部页面 -> 图像）。

原谅我的英语，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T05:14:40.313

我必须得到一个名为 ["Regenerate Thumbnails"](http://wordpress.org/plugins/regenerate-thumbnails/)的插件。运行该插件，它将为您重新调整缩略图的大小。

# mysql - mysql：在表之间计算

> ID：13048226
> 
> 赞同：0
> 
> 时间：2012-10-24T11:23:37.210
> 
> 标签：mysql, relational-database, calculated-field

这是我的问题：

我有两个表，我们将其命名为“main”和“Ex”

表主看起来像：（伪代码）

```
nr | points|
A1 | 5     |
A2 | 3     |
A3 | 4     |
B1 | 2 |
B2 | 4 | 
```

表前看起来像：

```
Pnr | Ex1 | Ex2 | Pmax |
P1  | A1  | B1  |  7 [calculated from table main]
P2  | A2  | B1  |  5 [calculated from table main] 
```

如何获得这两个表之间的关系，以计算 Pmax？

多谢。

C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:33:57.750

看起来这就是你想要的：

```
select e.pnr,
  e.ex1,
  e.ex2,
  sum(points) Pmax
from main m
inner join ex e
  on m.nr = e.ex1
  or m.nr = e.ex2
group by e.pnr, e.ex1, e.ex2 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/448be/5)

# django - Django - {% csrf_token %} 在模板中使用，但上下文没有提供值

> ID：13048228
> 
> 赞同：20
> 
> 时间：2012-10-24T11:23:42.157
> 
> 标签：django, csrf, django-csrf

我是 Django 新手，我仍在努力掌握它的功能。我用**Django 1.4.2**创建了一个非常简单的项目，该项目具有简单形式的索引页面，您可以在其中输入内容，并在提交后显示您的输入的结果页面（代码如下）。

提交后，我收到错误 403 和以下消息：

> 模板中使用了 {% csrf_token %}，但上下文未提供该值。这通常是由于没有使用 RequestContext 造成的。warnings.warn("模板中使用了 {% csrf_token %}，但上下文没有提供值。这通常是由于未使用 RequestContext 造成的。")

**索引.html**

```
<!DOCTYPE html>
<head>
    <title>Index page</title>
</head>
<body>
    <div id="header">Welcome to index page</div>
    <div id="content">
        <p>Enter your name</p>
        <form action="/result/" method="post" accept-charset="utf-8">{% csrf_token %}
            <input type="text" name="answer">
            <input type="submit" value="Send!">
        </form>
    </div>
</body> 
```

**结果.html**

```
<!DOCTYPE html>
<head>
    <title>Result page</title>
</head>
<body>
    <div id="header">Here is the result</div>
    <div id="content">
        <p>Your name is: {{ answer }}</p>
    </div>
</body> 
```

**视图.py**

```
from django.http import HttpResponse
from django.shortcuts import render_to_response
from django.template import RequestContext

def index(request):
    return render_to_response('index.html')

def result(request):
    p = request.POST['answer']
    return render_to_response('result.html', {'answer': p}, context_instance=RequestContext(request)) 
```

我查看了 Internet 上的文档和各种示例，但我不明白我做错了什么。如果我在**settings.py**中禁用**django.middleware.csrf.CsrfViewMiddleware**，我会得到我想要的，但这不是我正在寻找的答案。

 **我感谢更有经验的 Django 忍者的帮助:-)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-24T11:28:20.483

您`index.html`的渲染没有`RequestContext`. 试试这个：

```
def index(request):
    return render_to_response('index.html', context_instance=RequestContext(request)) 
```

我还建议您使用更方便的快捷方式[`render`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)：

```
from django.shortcuts import render

def index(request):
    return render('index.html') 
```

来自文档：

> render() 与使用强制使用 RequestContext 的 context_instance 参数调用 render_to_response() 相同。

**编辑**：

感谢[@nerdwaller](https://stackoverflow.com/u/1584762/)提及，现在需要更新的版本：

```
render(request, 'index.html', {params}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-20T02:52:07.467

我在使用 Django 2.1 时遇到了这个错误，原来它是由在另一个 ajax 请求调用的模板中发出一个 ajax 请求引起的。因此，解决方案是将“request=request”添加到我的渲染函数中：

```
args = {'someargs': somevalues}
html = render_to_string(
        'my_template.html', context=args, request=request)
return HttpResponse(html) 
```**

# mysql - 使用同一变量查询sql查询中的多个字段

> ID：13048230
> 
> 赞同：1
> 
> 时间：2012-10-24T11:23:44.367
> 
> 标签：mysql

我有下面的查询，效果很好。

```
 SELECT  `Despatch`.`DespatchNumber` , `Despatch`.`Product` ,
           `Stock`.`ProductNumber` ,  `Stock`.`Description` ,      
     `Stock`.`ProductGroup` ,  `Stock`.`Size` ,  `Stock`.`IPICODE`  , `Stock`.`Fit` ,  
     `Stock`.`62` 
            FROM Stock , Despatch 
            WHERE  `Despatch`.`DespatchNumber` = '" . $Despatch . "'   
            AND   `Despatch`.`Product`  =    `Stock`.`ProductCode` 
```

我的问题是我想扩展它，即我使用 $Despatch 的值使用 OR 函数搜索同一个表中的另一列。因此，查询将查看发货编号，如果找不到匹配项，则查看订单编号，如下所示。它不起作用，我的 mysql 服务器只是挂起试图运行这个查询。

```
 SELECT  `Despatch`.`DespatchNumber` , `Despatch`.`Product` ,
           `Stock`.`ProductNumber` ,  `Stock`.`Description` ,  `Stock`.`ProductGroup` ,  `Stock`.`Size` ,  `Stock`.`IPICODE`  , `Stock`.`Fit` , `Stock`.`62` 
            FROM Stock , Despatch 
            WHERE  `Despatch`.`DespatchNumber` = '" . $Despatch . "'   
            OR  `Despatch`.`OrderNumber` = '" . $Despatch . "' 
            AND   `Despatch`.`Product`  =    `Stock`.`ProductCode` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:26:07.423

您需要在`OR`子句周围加上括号：

```
WHERE (`Despatch`.`DespatchNumber` = '" . $Despatch . "'   
OR     `Despatch`.`OrderNumber` = '" . $Despatch . "') 
AND   `Despatch`.`Product`  =    `Stock`.`ProductCode` 
```

我还强烈建议您`JOIN`在执行联接时明确使用关键字。这不仅是最佳实践，而且还可以防止在这种情况下发生错误。

```
SELECT -- ...columns...
FROM Stock AS S
JOIN Despatch AS D
ON D.Product = S.ProductCode
WHERE D.DespatchNumber = 'DN001234'
OR D.OrderNumber = 'DN001234' 
```

# c# - 在回调请求上保持 ViewState

> ID：13048238
> 
> 赞同：2
> 
> 时间：2012-10-24T11:24:15.913
> 
> 标签：c#, asp.net, session, callback, viewstate

问题是，我需要在请求`ViewState`期间坚持。`CallBack`

我知道当请求是`CallBack`. 所以，我需要一个替代方案来使它工作。

ASP.NET 应用程序有一个自定义`PageStatePersister`，它将所有 Page State( `ViewState`) 存储到`Session`. 这种方式`ViewState`不会在任何时候发送/检索到客户端（尽管隐藏字段仍然存在于页面上，但没有价值）。`ViewState`不必在响应中返回，`CallBack`我只需要以某种方式调用`ViewState`在正常`PostBack`请求中保存的机制。

它会是这样的：

```
protected void Page_LoadComplete(object sender, EventArgs e)
{
    //Set anything to the viewstate for accessing on a later postback
    ViewState["Anything"] = 1;

    if (Page.IsCallback)
    {
        //Persist the page state manualy (not needed on normal postback)
        InvokeAspNetStateSaver();
    }
    ...
} 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:10:19.150

终于明白了。

事情就是这样。

在对`Page`类（`System.Web.UI`以下代码是 ASP.NET 对方法所做的`ProcessRequestMain`：

```
this.Trace.Write("aspx.page", "Begin PreInit");
this.PerformPreInit();
this.Trace.Write("aspx.page", "End PreInit");
this.Trace.Write("aspx.page", "Begin Init");
this.InitRecursive((Control) null);
this.Trace.Write("aspx.page", "End Init");
this.Trace.Write("aspx.page", "Begin InitComplete");
this.OnInitComplete(EventArgs.Empty);
this.Trace.Write("aspx.page", "End InitComplete");

if (this.IsPostBack)
{
    this.Trace.Write("aspx.page", "Begin LoadState");
    this.LoadAllState();
    this.Trace.Write("aspx.page", "End LoadState");
    this.Trace.Write("aspx.page", "Begin ProcessPostData");
    this.ProcessPostData(this._requestValueCollection, true);
    this.Trace.Write("aspx.page", "End ProcessPostData");  
}

this.Trace.Write("aspx.page", "Begin PreLoad");
this.OnPreLoad(EventArgs.Empty);
this.Trace.Write("aspx.page", "End PreLoad");
this.Trace.Write("aspx.page", "Begin Load");
this.LoadRecursive();
this.Trace.Write("aspx.page", "End Load");

if (this.IsPostBack)
{
    this.Trace.Write("aspx.page", "Begin ProcessPostData Second Try");
    this.ProcessPostData(this._leftoverPostData, false);
    this.Trace.Write("aspx.page", "End ProcessPostData Second Try");
    this.Trace.Write("aspx.page", "Begin Raise ChangedEvents");
    this.RaiseChangedEvents();
    this.Trace.Write("aspx.page", "End Raise ChangedEvents");
    this.Trace.Write("aspx.page", "Begin Raise PostBackEvent");
    this.RaisePostBackEvent(this._requestValueCollection);
    this.Trace.Write("aspx.page", "End Raise PostBackEvent");
}

this.Trace.Write("aspx.page", "Begin LoadComplete");
this.OnLoadComplete(EventArgs.Empty);
this.Trace.Write("aspx.page", "End LoadComplete");

if (this.IsPostBack && this.IsCallback)
    this.PrepareCallback(callbackControlID);
else if (!this.IsCrossPagePostBack)
{
    this.Trace.Write("aspx.page", "Begin PreRender");
    this.PreRenderRecursiveInternal();
    this.Trace.Write("aspx.page", "End PreRender");
}

...

if (this.IsCallback)
{
    this.RenderCallback();
}
else
{
    if (this.IsCrossPagePostBack)
        return;

    this.Trace.Write("aspx.page", "Begin PreRenderComplete");
    this.PerformPreRenderComplete();
    this.Trace.Write("aspx.page", "End PreRenderComplete");
    this.BuildPageProfileTree(this.EnableViewState);
    this.Trace.Write("aspx.page", "Begin SaveState");
    this.SaveAllState();
    this.Trace.Write("aspx.page", "End SaveState");
    this.Trace.Write("aspx.page", "Begin SaveStateComplete");
    this.OnSaveStateComplete(EventArgs.Empty);
    this.Trace.Write("aspx.page", "End SaveStateComplete");
    this.Trace.Write("aspx.page", "Begin Render");

    if (exportedWebPartID != null)
        this.ExportWebPart(exportedWebPartID);
    else
        this.RenderControl(this.CreateHtmlTextWriter(this.Response.Output));

    this.Trace.Write("aspx.page", "End Render");
    this.CheckRemainingAsyncTasks(false);
} 
```

Method`LoadAllState()`负责加载页面状态，它执行每个 PostBack 请求。

Method`SaveAllState()`负责保存页面状态。ASP.NET 像下面的代码一样执行它：

```
if (this.IsCallback)
{
    this.RenderCallback();
}
else
{
    ...
    this.SaveAllState();
    ...
} 
```

这就是我`ViewState`没有在`CallBack`请求中保存的原因！

所以，最后，解决方案！`SaveAllState()`使用反射手动调用方法！

```
if (Page.IsCallback)
{
    System.Reflection.MethodInfo saveAllStateMethod = typeof(System.Web.UI.Page).GetMethod("SaveAllState", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic);
    saveAllStateMethod.Invoke(Page, null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:37:37.283

可以在页面上的 SaveState 和 LoadState 事件中保存和加载视图状态。由于您有页面的通用基类，您想要在其中保存状态，您可以执行以下操作：

```
 protected override object SaveViewState()
    {
        object state = base.SaveViewState();

        // your custom save logic
    }

    protected override void LoadViewState(object savedState)
    {
        object state = // load your view state here
        base.LoadViewState(savedState);
    } 
```

不同的问题是，将状态存储在某处是否是好的设计。

# css - CSS过渡期间闪烁的错误

> ID：13048239
> 
> 赞同：0
> 
> 时间：2012-10-24T11:24:18.120
> 
> 标签：css, css-transitions

我目前正在为我的博客制作一个新主题，但标题有问题。看，标题在顶部有一个固定的位置，就像一个导航栏，当用户向下滚动时它会缩小。然而，在某些浏览器（主要是 Chrome，尤其是 Windows）上，标题上的 Twitter 图标有一种奇怪的闪烁行为，下降到下一行大约 1/10 秒。

我在使用过渡时看到了很多关于 Chrome 中闪烁错误的事情，但没有看起来像这样（此外，修复不适用于我的情况）。这是图标边缘和标题高度的简单过渡。

有没有人见过类似的东西？

非常感谢！

编辑：在小提琴中重新创建它。问题仍然存在：http: [//jsfiddle.net/PVmgz/](http://jsfiddle.net/PVmgz/)

HTML `

```
 <header>
        <div class="container header">
            <a href="#" title="MangeMonBeat"><div id="logo">Logo</div></a>
            <div class="social">
                <div class="search icon">

                </div>
                <div class="facebook icon">
                </div>
                   <div class="twitter icon">
                   </div>
            </div>
        </div>
    </header>

        <div id="button">Scroll</div> 
```

​`

CSS

```
header {
    width: 100%;
    height: 98px;
    background: #EEE;
    position: fixed;
    top: 0;
    z-index: 9999;
    -webkit-transition: height, ease-in, 0.4s;
       -moz-transition: height, ease-in, 0.4s;
        -ms-transition: height, ease-in, 0.4s;
         -o-transition: height, ease-in, 0.4s;
            transition: height, ease-in, 0.4s;
}

header.scroll {
    height: 60px;
}
header.scroll .header #logo {
    width: 350px;
    height:50px;
}
header.scroll .header .social {
    margin-top: -2px;
}
header.scroll .header .social .icon {
    margin-left: 2px;
}

.header {
    padding: 5px 10px 0;
}

.header #logo {
    width: 400px;
    height:82px;
    background: #696;
    color:white;
    float: left;
    -webkit-transition: width, ease-in, 0.4s;
       -moz-transition: width, ease-in, 0.4s;
        -ms-transition: width, ease-in, 0.4s;
         -o-transition: width, ease-in, 0.4s;
            transition: width, ease-in, 0.4s;
}

.header #logo img {
    max-width: 100%;
    height: auto;
}

.header .social {
    float: right;
    margin-top: 19px;
    -webkit-transition: margin-top, ease-in, 0.4s;
       -moz-transition: margin-top, ease-in, 0.4s;
        -ms-transition: margin-top, ease-in, 0.4s;
         -o-transition: margin-top, ease-in, 0.4s;
            transition: margin-top, ease-in, 0.4s;
}

.header .social .icon {
    display: inline-block;
    margin-left: 20px;
    width: 51px;
    height: 51px;
    border-radius:999px;
    -webkit-transition: margin-left, ease-in, 0.4s;
       -moz-transition: margin-left, ease-in, 0.4s;
        -ms-transition: margin-left, ease-in, 0.4s;
         -o-transition: margin-left, ease-in, 0.4s;
            transition: margin-left, ease-in, 0.4s;
}

.header .social .icon.facebook {
    position: relative;
    background:#336699;
}

.header .social .icon.twitter {
    position: relative;
    background:#66cccc;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:40:47.003

所以我对这个问题有一个可能的解释，以及一些可以解决它的代码。

可能的解释是，缩小的社交媒体图标的大小有时会被四舍五入。当它们缩小时，它可能会计算出 26.6 像素的宽度，当然它必须始终显示为整数个像素。当它四舍五入到 27 像素时，这会将最后一个社交媒体图标提升到一个新的水平。如果这是正确的，它会闪烁，因为它会继续缩小，计算 26 像素，这是一个 OK 值，它不会下降。但随后它立即变为 25.9 像素，再次下降。如果这确实是正确的，它实际上会比我给出的这个简单解释要复杂一些（父元素的宽度起作用），但这足以让这个想法得到理解。

无论如何，一个有效的解决方法是给`div`图标一个宽度，这样如果你愿意的话，就有“喘息的空间”来扩展图标。

这是一些为其提供空间的代码，但您需要对其进行优化以使其按您希望的方式显示。

```
.header .social {
    ...
    width: 500px;
} 
```

我对解决方案的最初想法是设置`width`this `div`，然后将图标浮动到其中的右侧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T15:20:13.503

答案有点晚了，但我只是在转换左边距值时遇到了这个问题。
解决方案是将“ **border-spacing** ”值设置为**0**

# permissions - AD 组文件夹访问

> ID：13048247
> 
> 赞同：1
> 
> 时间：2012-10-24T11:24:36.757
> 
> 标签：permissions, active-directory, directory, subdirectory

我有两个 AD 组，分别是 Group1 和 Group2。我通过 Windows 应用程序将相同的用户添加到这些组中。我有文件夹说 abc 我附加了 AD Group1。在 abc 中，我创建了一个子文件夹 abcd 并通过禁用继承属性来附加 AD Group2。当尝试使用用户凭据访问该文件夹时，我可以访问 abc 但是当尝试访问 abcd 文件夹时出现异常，因为访问被拒绝。此异常的原因是什么，解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:35:19.070

您总是可以测试以查看用户是否是组 1 和组 2 的成员....

像这样的东西：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

if(user != null)
{
GroupPrincipal group1 = GroupPrincipal.FindByIdentity(ctx, "group1");

if(group1 != null)
{
   bool userIsMemberOfGroup1 = user.IsMemberOf(group1);
}

GroupPrincipal group2 = GroupPrincipal.FindByIdentity(ctx, "group2");

if(group2 != null)
{
   bool userIsMemberOfGroup2 = user.IsMemberOf(group2);
}
} 
```

这样，您永远不需要枚举用户所属的**所有**组 - 只需检查您感兴趣的那些组，

您应该检查`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# mysql - 选择mysql数据库中最流行的关键字

> ID：13048250
> 
> 赞同：0
> 
> 时间：2012-10-24T11:24:42.263
> 
> 标签：mysql, keyword, explode

我有一个名为关键字的列，用户最多可以输入 4 个用逗号分隔的关键字，即：

```
----------------------------------
userId |    kewords              |
----------------------------------
01     | php,css,html,mysql      |
02     | wordpress,css,drupal,xx |
03     | mysql,html,wordpress,css|
---------------------------------- 
```

我试图找出一个查询来选择每个人的所有关键字，用昏迷将它们分解，然后计算每个关键字的数量。

我知道我可以用 PHP 很容易地做到这一点，但我虽然 mysql 可能有办法做到这一点......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:30:17.237

尝试规范化数据，即为每个用户存储 4 行而不是 1 行。

也可以将字符串拆分为临时表，但我不确定这会对您有多大帮助。最初我在 mysql forge 上找到了这个源，但它已被关闭，所以这里有一个类似的代码

[http://www.pnplogic.com/blog/articles/MySQL_Convert_Delimited_String_To_Temp_Table_Result_Set.php](http://www.pnplogic.com/blog/articles/MySQL_Convert_Delimited_String_To_Temp_Table_Result_Set.php)

# extjs - 在 ExtJs 中更改存储

> ID：13048251
> 
> 赞同：0
> 
> 时间：2012-10-24T11:24:50.767
> 
> 标签：extjs, store

如何更改“gridpanel”商店中的数据？

我尝试这样做：

```
cellclick: function (th, td, cellIndex, record, tr, rowIndex, e, eOpts) {
                    record.set('hasPast', '-');
                    th.getStore().insert(rowIndex + 1, record.data.pastRecal);
    } 
```

但它给出了错误！'cellclick' - 我的网格上的单元格单击事件的侦听器。

**来自 ext-all-debug.js 的错误（在此代码段中）：**

```
urlAppend : function(url, string) {
            if (!Ext.isEmpty(string)) {
                return url + (url.indexOf('?') === -1 ? '?' : '&') + string;
            }

            return url;
        }, 
```

**网址未定义**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:12:22.680

它尝试对某个远程源进行查询，但您的商店代理配置不正确。通常，当您从内存切换到某种远程存储（AJAX 或其他）时，您会收到此类错误。只需仔细检查您的商店和代理配置，您就会发现那里有错误。

尝试将该属性设置为您的商店并查看差异：

```
autoSync: false 
```

如果您需要更多详细信息，您应该发布您的商店和代理配置。

祝你好运！

# php - 多个函数是 PHP 中的一大函数？

> ID：13048252
> 
> 赞同：1
> 
> 时间：2012-10-24T11:24:53.670
> 
> 标签：php, mysql, oop, crud

所以我正在编写`DataBase`类，它将成为 和 之间的封装`PHP Controller`层`MySQL View`。

```
interface iDataBase {
    public function drug($action, $drug);
    public function company($action, $company);
    public function activeIngredient($action, $activeIngredient);
} 
```

一开始我想把所有的setter和getter分开，比如getAllDrugs()、updateDrug()、removeDrug()、getForUpdate()、getDrug()等等，但后来我意识到我用太多的函数污染了数据库接口，加上这是一个非常小规模的版本，我正在考虑添加更多的类和更多的功能。所以，我没有使用很多功能，而是选择了 3.`$action`来确定用户想要对某个类做什么样的事情。所以，目前，可能的行动是：`"add", "getAll", "getForUpdate", "update", "remove"`

但是这些被屏蔽的函数`$action`有不同的事情要做，所以它们的返回结果不同，第二个参数也可以不同。

我的解决方案是一个好习惯吗？相信很多人都遇到过同样的问题，请问你们是怎么解决的呢？有没有可能的问题？

PS`Drug, Company, ActiveIngredient`都是类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:33:33.077

一个函数应该有明确定义的、狭窄的职责和明确定义的、极简的返回类型。如果你开始创建“上帝函数”，它会根据你传递的参数来做所有事情和厨房水槽，那么你将严重进入难以维护的意大利面条代码领域。您不想要一个执行 A 并在传递 X 时返回 B 的函数，但执行 C 并在传递 Y 时返回 D 等...

当你看到类似的模式出现时，随着时间的推移开始*具体和概括是个好主意。*因此，创建您实际需要的方法：

```
public function findUserById($id)
public function findUserByEmail($email)
public function updateCompanyName($id, $newName) 
```

如果您发现在这些函数之间共享代码，请统一后台代码以使其保持 DRY：

```
public function findUserById($id) {
    return $this->find('SELECT * FROM user WHERE id = ?', $id);
}

public function findUserByEmail($email) {
    return $this->find('SELECT * FROM user WHERE email = ?', $email);
}

protected function find($query, $arg) {
    ...
} 
```

不要以相反的方式开始，认为你“只需要 X、Y 和 Z”，它们看起来足够相似，可以统一到一个方法中，然后发现 X、Y 和 Z 之间存在细微差异，并在你的代码中乱扔垃圾每个的特殊情况。这只会导致函数要么巨大要么太笼统，它们基本上自己什么都不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:10:34.467

您可能正在寻找的东西称为[TableDataGateway](http://martinfowler.com/eaaCatalog/tableDataGateway.html)（重点是我的）：

> 表数据网关包含*用于访问* ***单个*** *表*或视图的所有 SQL：选择、插入、更新和删除。其他代码调用其方法进行与数据库的所有交互。

这意味着您将拥有一个通用数据库适配器，例如一个 PDO 对象。您将其注入到您的各种 TDG 中。然后，TDG 使用该适配器从数据库中 CRUD 数据。

### 例子

```
class CompanyTableGateway
{
    private $dbAdapter;

    public function __construct(DBAdapter $dbAdapter)
    {
        $this->dbAdapter = $dbAdapter;
    }

    public function create($name, $street, $whatever)
    {
        $this->dbAdapter->exec( 'INSERT INTO companies …' );
    }

    public function findById($id) 
    {
        return $this->dbAdapter->exec(
            sprintf('SELECT * from companies where id = %d', $id)
        );
    }

    // more methods …
} 
```

如果您有多个此类网关，则可以将通用 CRUD 逻辑抽象为一个抽象类，然后从中扩展具体的网关。

然后，您将使用[TableModule](http://martinfowler.com/eaaCatalog/tableModule.html)或类似的其他对象来调用各个网关上的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T11:32:20.050

关于关注点分离与单一职责原则的永无止境的讨论。

*   关注点分离 (SoC) – 是将计算机程序分解为功能上尽可能少重叠的不同功能的过程。关注点是程序中的任何兴趣或关注点。通常，关注点与特征或行为同义。 [http://en.wikipedia.org/wiki/Separation_of_concerns](http://en.wikipedia.org/wiki/Separation_of_concerns)

*   单一职责原则 (SRP) – 每个对象都应该有单一职责，并且它的所有服务都应该与该职责紧密结合。在某种程度上，凝聚力被认为是 SRP 的同义词。[http://en.wikipedia.org/wiki/Single_responsibility_principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)

尝试充分利用两者，并相应地为您的课程建模。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T11:40:17.420

我建议你做一个全局数据库类，它控制数据库的基本输入/输出，然后将其扩展到每个表。

这方面的一个示例可能是用户表。你可以对这张桌子做的是

1.  创造
2.  更新
3.  删除

然后，您将使用用户类扩展超级数据库类，该类将为您想要的每个函数提供 getter 和 setter，即：

```
class Users extends DatabaseClass {
    public function update ( $params )
    {
        // Make the code for an update, and let the SuperClass execute the code.
        ...
    }

    public function add ( $params )
    {
        ...
    }

    public function delete ( $params )
    {
        ...
    }
} 
```

这将允许您稍后轻松地向用户表添加更多功能，并专门针对您正在使用的表/数据优化查询。

# java - 扩展一个类（实现接口）并实现相同的接口不需要在类中定义方法吗？

> ID：13048255
> 
> 赞同：1
> 
> 时间：2012-10-24T11:25:04.390
> 
> 标签：java, class, interface

/ *C 类实现了接口 A 但没有定义 go() 方法对吗？*/

```
interface A { void go();}
Class B implements A { void go(){#Some code here}}
Class C extends B implements C {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:27:26.317

它是正确的。`public abstract`但是，即使您没有像那样定义它，接口中的方法也是如此。

实现类方法也必须是公共的，因为您不能降低方法的可见性。所以，类中的方法`B`应该是`public`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:26:55.880

请记住，C 是 B，因此具有来自 B 的方法定义。如果您真的希望这样做，您必须为 B 和 C 创建一个抽象基类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:27:06.223

是的，C 扩展了已经实现的 B `go`，因此 C 继承了这个实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T11:27:22.060

它是正确的。由于它已经*从*`B`. 事实上，`implements A`for 类`C`是多余的！

# objective-c - 从应用程序到邮件的图像

> ID：13048258
> 
> 赞同：1
> 
> 时间：2012-10-24T11:25:12.797
> 
> 标签：objective-c, macos, email

如何执行“共享到邮件”之类的操作？就像在`NSSharingServices`选择邮件时一样。例如，我有`NSImage`并且我想达到***image2***中的结果。我该怎么做？任何指针？

***图片1：***
![在此处输入图像描述](../Images/95e74050097aad6e419e8b662f5725d8.png)

***图片2：***
![在此处输入图像描述](../Images/31fec1a47ba044a82858520348d64296.png)

要仅从文本创建消息，我可以这样做：

```
NSURL *     url;
url = [NSURL URLWithString:@"mailto:"
       "?subject="
       "&body=text"
       ];
(void) [[NSWorkspace sharedWorkspace] openURL:url]; 
```

但我不知道如何使用图像创建消息。

* * *

我找到了一种在使用 ScriptingBridge 框架时添加附件的方法。代码：

```
MailApplication *mail = [SBApplication
                         applicationWithBundleIdentifier:@"com.apple.Mail"];

MailOutgoingMessage *emailMessage =
[[[mail classForScriptingClass:@"outgoing message"] alloc]
 initWithProperties:
 [NSDictionary dictionaryWithObjectsAndKeys:
  @"this is my subject", @"subject",
  @"this is my content", @"content",
  nil]];

[[mail outgoingMessages] addObject: emailMessage];

emailMessage.visible = YES;

NSString *attachmentFilePath = [NSString stringWithUTF8String:"<my provided file path>"];
if ( [attachmentFilePath length] > 0 ) {

    MailAttachment *theAttachment = [[[mail
                                       classForScriptingClass:@"attachment"] alloc]
                                     initWithProperties:
                                     [NSDictionary dictionaryWithObjectsAndKeys:
                                      attachmentFilePath, @"fileName",
                                      nil]];

    [[emailMessage.content attachments] addObject: theAttachment];
}
[emailMessage visible]; 
```

有用。但是如何将 NSImage 添加到附件中？也许我必须将 NSImage 写入临时文件，然后添加为附件并删除临时文件？或者是什么？或者我应该以某种方式将 NSImage 添加到正文中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:21:57.977

像这样：

```
NSString *text = @"sometext";
NSImage *image = [[NSImage alloc] initWithContentsOfURL:[NSURL URLWithString:@"/logo57.png"]];
NSArray * shareItems = [NSArray arrayWithObjects:text, image, nil];

NSSharingService *service = [NSSharingService sharingServiceNamed:NSSharingServiceNameComposeEmail];
service.delegate = self;
[service performWithItems:shareItems]; 
```

还要确保将 NSSharingServiceDelegate 放在委托的头文件中。

# c# - 从页面上的链接中检索 HTML

> ID：13048265
> 
> 赞同：0
> 
> 时间：2012-10-24T11:25:22.027
> 
> 标签：c#, html, streamwriter

我正在使用以下方法从我的网站检索源代码-

```
class WorkerClass1
{
    public static string getSourceCode(string url)
    {
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        StreamReader sr = new StreamReader(resp.GetResponseStream());
        string sourceCode = sr.ReadToEnd();
        sr.Close();
        return sourceCode;
    }
} 
```

然后`WorkerClass1`像这样实现-

```
private void button1_Click(object sender, EventArgs e)
    {
        string url = textBox1.Text;
        string sourceCode = WorkerClass1.getSourceCode(url);
        StreamWriter sw = new StreamWriter(@"path");
        sw.Write(sourceCode);
        sw.Close();

    } 
```

这很好用，可以从我的主页检索 HTML，但是一旦检索到第一页，我想在页面底部找到链接。

有没有办法可以修改我当前的代码来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:37:20.070

是的当然。

我要做的是使用正则表达式读取 HTML 以查找链接。对于每场比赛，我会将这些链接放入队列或类似的数据结构中，然后使用相同的方法查看该来源。

考虑查看 HTMLAgilityPack 进行解析，它可能更容易，即使使用 Google 查找链接应该非常简单。

# javascript - Javascript 计算无法正常工作

> ID：13048271
> 
> 赞同：0
> 
> 时间：2012-10-24T11:25:45.583
> 
> 标签：javascript

您好，我正在尝试对三个值进行简单计算： `a + b * c`但总数错误。如果`a`是 10 并且`b`是 10，它将是 20 乘以`c`2.4。我总共应该得到 48 个。目前获得2424。

```
function compute() {
  var a = $('#a').val();
  var b = $('#b').val();
  var c = $('#c').val();
  var total = (a + b) * c;
  $('#total').val(total);
}

$('#a, #b, #c').change(compute); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:27:51.127

**基础数学：乘法优先于加法。**

因此，在您的代码中，将 a 添加到 b*c 的结果中。

采用 ：

```
var total = (a + b) * c; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:28:11.853

`a + b * c` 被评估为`a + (b * c)`

你需要的是`(a + b) * c`

**优先顺序**：括号>除法>乘法>加法>减法

* * *

在你的问题中，你说你得到 1024。得到 1024 是**不可能**的。你应该得到 34。（在别处检查你的计算）

```
a + (b * c) = 10 + (10 * 2.4) = 34 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T11:29:05.383

如果要在乘法之前将 a 添加到 b，则需要使用括号。

这是因为乘法运算符的优先级高于加法。

(a + b) * c

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T11:30:13.820

```
$(document).ready(function() {
   function compute() { 
          var a = $('#a').val();
          var b = $('#b').val();
          var c = $('#c').val();
          var total = (parseInt(a,10) + parseInt(b,10)) * parseFloat(c); alert(total);
          $('#total').val(total);
        }

  $('#a, #b, #c').change(compute);

 }); 
```

## [检查演示](http://jsbin.com/otuzur/1/edit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T11:31:05.600

在解析以下值后尝试： var total = (parseFloat(a) + parseFloat(b)) * parseFloat(c);

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-24T11:29:12.980

你的变量是字符串。使用 parseFloat 函数。

```
"10" + "10"*"2.4" = "10"+ 24 = "1024" 
```

# c# - 在 Windows 中的 Windows 移动应用程序中发送邮件

> ID：13048272
> 
> 赞同：3
> 
> 时间：2012-10-24T11:25:45.837
> 
> 标签：c#, windows-mobile

我是 Windows Mobile 应用程序的新手。在我的项目中，我想使用`microsoft.windowsmobile.pocketoutlook`. 到目前为止，我有以下代码：

```
private void btnsubmit_Click(object sender, EventArgs e)
{
    try
    { 
        totleave();
        OutlookSession ol = new OutlookSession();
        EmailMessage em = new EmailMessage();
        //Recipient  s1 = em.From;
        //Console.WriteLine(s1);
        Recipient r = new Recipient("iyalarasi.r", "iyalarasi.r@winxsolutions.com");
        em.To.Add(r);
        em.Subject = "Request For Leave";
        em.BodyText =txtename.Text +"(Emp id:"+txteno.Text+ ")" + " request "+ cb1.SelectedItem.ToString()+" leave from "+dtpfrom .Value
            .ToShortDateString ()+" to "+dtpto .Value.ToShortDateString ()  + "\n The reason is " + txtreason.Text;
        EmailAccount ea = ol.EmailAccounts[0];
        ea.Send(em);
        // em.Send("iyalarasi.r");//Account name in outlook
        //MessagingApplication.Synchronize("iyalarasi.r");
        MessageBox.Show("mail sent");
        f2.Show();
        f2.lblmsg.Text = "You have Applied Leave";
    }
    catch (PocketOutlookException ex)
    {
        lblmsg1.Text = ex.ToString();
    }
    catch (Exception e1)
    {
        lblmsg1.Text = e1.ToString();
    }
} 
```

使用此代码，电子邮件会出现在发件箱中，但永远不会出现在收件箱中。使用 Gmail，它显示以下消息：

> 无法发送消息。检查您是否有网络覆盖，并且您的帐户信息是否正确，然后重试。

我的帐户信息是正确的。到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:24:23.443

我已经使用 POOM 从 Windows Mobile 设备发送电子邮件：

我使用代码遍历可用的 Outlook 电子邮件帐户。字符串 sMailAccount 具有在 pocketOuttlook 中显示的帐户名称，例如“Google Mail”：

sendMail 类的类代码...

```
 public sendMail(string sMailAccount)
    {
        session = new OutlookSession();
        //eMail = new EmailMessage();
        bool bFound = false;
        foreach (Account acc in session.EmailAccounts)
        {
            System.Diagnostics.Debug.WriteLine(acc.Name);
            if (acc.Name == sMailAccount)
                bFound = true;
        }
        if (bFound)
            account = session.EmailAccounts[sMailAccount];
        if (account != null)
            _bIsValidAccount = true;
    }
    ... 
```

我的代码用于将图像发送给收件人：

```
 public bool send(string sImagePath)
    {
        if (account == null)
            return false;
        try
        {
            eMail = new EmailMessage();
            rcp = new Recipient(_to);
            eMail.To.Add(rcp);
            eMail.Subject = "Visitenkarten";
            eMail.BodyText = "VCard " + DateTime.Now.ToShortDateString() + " " + DateTime.Now.ToShortTimeString() + "\r\nsent from eMDI2Mail";

            attachement = new Attachment(sImagePath);
            eMail.Attachments.Add(attachement);                
            eMail.Send(account);                
            //account.Send(eMail);
            if (this._syncImmediately)
            {
                if (this.account != null)
                    Microsoft.WindowsMobile.PocketOutlook.MessagingApplication.Synchronize(this.account);
            }
            return true;
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine("Exception in send(): " + ex.Message);
        }
        return false;
    } 
```

另一个需要了解的问题是 POutlook 不会立即发送消息。因此，我引入了一个名为 _syncImmediately 的 var。如果这是真的，Outlook 将立即发送邮件。如果没有，我提供另一个名为 syncNow() 的函数：

```
 /// <summary>
    /// sync eMail in outlook
    /// </summary>
    /// <param name="pHandle">handle to forground window</param>
    public void syncNow(IntPtr pHandle)
    {
        if (this.account != null)
        {
            Microsoft.WindowsMobile.PocketOutlook.MessagingApplication.Synchronize(this.account);
            SetForegroundWindow(pHandle);
        }
    } 
```

SetForeGroundWindow() 用于将我们带回应用程序。

这是整个班级：

```
 using System;
using System.Linq;
using System.Collections.Generic;
using System.Text;

using System.Runtime.InteropServices;

using Microsoft.WindowsMobile.PocketOutlook;

namespace eMdiMail
{
    class sendMail:IDisposable
    {
        [DllImport("coredll", EntryPoint = "SetForegroundWindow")]
        private static extern bool SetForegroundWindow(IntPtr hWnd);

        OutlookSession session;
        public EmailAccount account;
        EmailMessage eMail;
        public String _to = "TheRecipient@intermec.com";
        Attachment attachement;
        Recipient rcp;

        bool _syncImmediately = false;
        public bool syncImmediately
        {
            get { return _syncImmediately; }
            set { _syncImmediately = value; }
        }
        bool _bIsValidAccount = false;
        public bool bIsValidAccount
        {
            get
            {
                return _bIsValidAccount;
            }
        }
        public bool setAccount(string sMailAccount)
        {
            session.Dispose();
            session = new OutlookSession();
            //eMail = new EmailMessage();
            bool bFound = false;
            foreach (Account acc in session.EmailAccounts)
            {
                if (acc.Name == sMailAccount)
                {
                    account = session.EmailAccounts[sMailAccount];
                    bFound = true;
                }
            }
            return bFound;
        }
        public sendMail(string sMailAccount)
        {
            session = new OutlookSession();
            //eMail = new EmailMessage();
            bool bFound = false;
            foreach (Account acc in session.EmailAccounts)
            {
                System.Diagnostics.Debug.WriteLine(acc.Name);
                if (acc.Name == sMailAccount)
                    bFound = true;
            }
            if (bFound)
                account = session.EmailAccounts[sMailAccount];
            else
            {
                if(this.createAccountGoogle())
                    account = session.EmailAccounts[sMailAccount];
            }
            if (account != null)
                _bIsValidAccount = true;
        }
        public sendMail()
        {
            session = new OutlookSession();
            //eMail = new EmailMessage();
            bool bFound = false;
            foreach (Account acc in session.EmailAccounts)
            {
                System.Diagnostics.Debug.WriteLine(acc.Name);
                if (acc.Name == "Google Mail")
                    bFound = true;
            }
            if (bFound)
                account = session.EmailAccounts["Google Mail"];
            else
            {
                if(this.createAccountGoogle())
                    account = session.EmailAccounts["Google Mail"];
            }
            if (account != null)
                _bIsValidAccount = true;
        }
        /// <summary>
        /// sync eMail using send and recv in foreground
        /// </summary>
        public void syncNow()
        {
            if (this.account != null)
                Microsoft.WindowsMobile.PocketOutlook.MessagingApplication.Synchronize(this.account);
        }
        /// <summary>
        /// sync eMail in outlook
        /// </summary>
        /// <param name="pHandle">handle to forground window</param>
        public void syncNow(IntPtr pHandle)
        {
            if (this.account != null)
            {
                Microsoft.WindowsMobile.PocketOutlook.MessagingApplication.Synchronize(this.account);
                SetForegroundWindow(pHandle);
            }
        }
        public bool send(string sImagePath)
        {
            if (account == null)
                return false;
            try
            {
                eMail = new EmailMessage();
                rcp = new Recipient(_to);
                eMail.To.Add(rcp);
                eMail.Subject = "Visitenkarten LogiMAT";
                eMail.BodyText = "LogiMat " + DateTime.Now.ToShortDateString() + " " + DateTime.Now.ToShortTimeString() + "\r\nsent from eMDI2Mail";

                attachement = new Attachment(sImagePath);
                eMail.Attachments.Add(attachement);                
                eMail.Send(account);                
                //account.Send(eMail);
                if (this._syncImmediately)
                {
                    if (this.account != null)
                        Microsoft.WindowsMobile.PocketOutlook.MessagingApplication.Synchronize(this.account);
                }
                return true;
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine("Exception in send(): " + ex.Message);
            }
            return false;
        }

        public void Dispose()
        {
            if (account != null)
                account.Dispose();
            if (session != null)
                session.Dispose();
        }

        public bool createAccountHotmail()
        {
            XMLConfig.Settings sett = new XMLConfig.Settings();

            return XMLConfig.DMProcessConfig.ProcessXML(sett.appPath + "hotmail.xml");
        }
        public bool createAccountGoogle(){
            XMLConfig.Settings sett= new XMLConfig.Settings();

            return XMLConfig.DMProcessConfig.ProcessXML(sett.appPath + "gmail.xml");
/*
            bool bRet = false;
            string strTemp = "";
            strTemp += "<wap-provisioningdoc>\r\n";
            strTemp += "  <characteristic type=\"EMAIL2\" recursive=\"true\">\r\n";
            strTemp += "    <characteristic type=\"{D45D5BE0-B96C-87A5-60B8-A59B69C733E4}\">\r\n";
            strTemp += "      <parm name=\"SERVICENAME\" value=\"Google Mail\" />\r\n";
            strTemp += "      <parm name=\"SERVICETYPE\" value=\"IMAP4\" />\r\n";
            strTemp += "      <parm name=\"INSERVER\" value=\"imap.googlemail.com\" />\r\n";
            strTemp += "      <parm name=\"AUTHNAME\" value=\"YourName@googlemail.com\" />\r\n";
            strTemp += "      <parm name=\"DOMAIN\" value=\"\" />\r\n";
            strTemp += "      <parm name=\"OUTSERVER\" value=\"smtp.googlemail.com\" />\r\n";
            strTemp += "      <parm name=\"REPLYADDR\" value=\"YourName@googlemail.com\" />\r\n";
            strTemp += "      <parm name=\"SMTPALTAUTHNAME\" value=\"YourName@googlemail.com\" />\r\n";
            strTemp += "      <parm name=\"SMTPALTDOMAIN\" value=\"\" />\r\n";
            strTemp += "      <parm name=\"NAME\" value=\"YourName 2011\" />\r\n";
            strTemp += "      <parm name=\"LINGER\" value=\"120\" />\r\n";
            strTemp += "      <parm name=\"RETRIEVE\" value=\"2048\" />\r\n";
            strTemp += "      <parm name=\"KEEPMAX\" value=\"0\" />\r\n";
            strTemp += "      <parm name=\"DWNDAY\" value=\"3\" />\r\n";
            strTemp += "      <parm name=\"FORMAT\" value=\"2\" />\r\n";
            strTemp += "      <parm name=\"AUTHREQUIRED\" value=\"1\" />\r\n";
            strTemp += "      <parm name=\"AUTHSECRET\" value=\"YourPassword\"/>\r\n";
            strTemp += "    </characteristic>\r\n";
            strTemp += "  </characteristic>\r\n";
            strTemp += "</wap-provisioningdoc>";

            return bRet;
*/
        }
    }
} 
```

如您所见，该类还能够通过给定的 XML WAP 配置文件创建电子邮件帐户。

问候

约瑟夫

顺便说一句：该应用程序旨在使用 Intermec eMDI 技术在展会上制作一张特别的名片照片。然后应将这些直接发送给秘书以创建这些线索。

好的，为了更简单明了： 1\. 为了能够使用 POutlook，您需要对 poutlook 会话的引用。2\. 为了能够通过代码发送电子邮件，您需要指定 poutlook 必须使用的邮件帐户。3\. 然后创建一个 eMail 对象并填写字段 4\. 最后将 email 对象的 send 方法与现有的 account 对象一起使用

**更详细**

创建会话对象

```
 OutlookSession session = new OutlookSession(); 
```

指定用于发送电子邮件的帐户。该字符串必须与您定义的 PocketOutlook 电子邮件帐户名称完全匹配。如果您使用数字作为参考，您无法确定选择了哪个帐户。

```
 EmailAccount account = session.EmailAccounts[sMailAccount]; 
```

检查退回的帐户。它是空的吗？现在创建一个新的 EMailMessage（与 TextMessage(SMS) 相比）

```
 EmailMessage eMail = new EmailMessage(); 
```

然后填写 EmailMessage 对象的字段

```
 Recipient rcp = new Recipient(_to);
        eMail.To.Add(rcp);
        eMail.Subject = "Visitenkarten";
        eMail.BodyText = "Enter some eMail text to send"; 
```

最后发送电子邮件：

```
 eMail.Send(account); 
```

由于 poutlook 通常会定期在后台发送电子邮件，因此您可能希望让 poutlook 立即发送邮件。如果是这样，您可以使用该代码：

```
 Microsoft.WindowsMobile.PocketOutlook.MessagingApplication.Synchronize(account); 
```

这将使 poulook 立即同步指定帐户的电子邮件，但也将 Outlook 窗口带到前台。

这清楚和简单吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:17:31.287

您的代码没有任何问题。

您需要研究如何通过 GMail 服务器从 Pocket Outlook 中获取要发送的消息。一旦设置好，您的代码应该可以正常工作。

# python - 使用 tkinter 将项目从一个列表框添加到另一个列表框

> ID：13048280
> 
> 赞同：0
> 
> 时间：2012-10-24T11:26:13.087
> 
> 标签：python, user-interface, listbox, tkinter

正如标题所暗示的，我正在尝试从一个列表框中选择项目，按下一个按钮，然后将其添加到第二个列表框中。

当我单击按钮移动时，该值会在命令提示符下打印，但列表框本身并没有更新。

我复制并粘贴了，所以我意识到所有内容都应该在一个位置上标记。

```
class Actions: 

def openfile(self): #select a directory to view files
    directory = tkFileDialog.askdirectory(initialdir='.')
    self.directoryContents(directory)

def filename(self):
    Label (text='Please select a directory').pack(side=TOP,padx=10,pady=10)

files = []
fileListSorted = []

#display the contents of the directory
def directoryContents(self, directory): #displays two listBoxes containing items
    scrollbar = Scrollbar() #left scrollbar - display contents in directory
    scrollbar.pack(side = LEFT, fill = Y) 

    scrollbarSorted = Scrollbar() #right scrollbar - display sorted files 
    scrollbarSorted.pack(side = RIGHT, fill = Y, padx = 2, pady=100)

    fileList = Listbox(yscrollcommand = scrollbar.set) #files displayed in the left listBox
    for filename in os.listdir(directory):
        fileList.insert(END, filename)
        global files 
        self.files.append(filename) #insert the values into the files array so we know which element we want to enter in moveFile
    fileList.pack(side =LEFT, fill = BOTH)
    scrollbar.config(command = fileList.yview)

    global fileListSorted #this is for the filelist in the right window. contains the values the user has selected
    fileListSorted = Listbox(yscrollcommand = scrollbarSorted.set) #second listbox (button will send selected files to this window)
    fileListSorted.pack(side=RIGHT, fill = BOTH)
    scrollbarSorted.config(command = fileListSorted.yview)

    selection = fileList.curselection() #select the file
    b = Button(text="->", command=lambda:self.moveFile(fileList.curselection()))#send the file to moveFile to be added to fileListSorted
    b.pack(pady=5, padx =20)

##moveFile addes files to the array fileLIst2, which is the fileList on the right
def moveFile(self,File):
    insertValue = int(File[0]) #convert the item to integer
    global files
    insertName = self.files[insertValue] #get the name of the file to be inserted

    global fileListSorted
    self.fileListSorted.append(str(insertName)) #append the value to the fileList array
    print self.fileListSorted #second listbox list 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:46:02.057

遵循该代码非常困难——例如，在哪里`self.fileListSorted`定义？-- 你有一个全局变量和`fileListSorted`一个实例变量`self.fileListSorted`，它们是不同的东西。但是，您似乎让他们感到困惑（例如，为什么会有一行

```
global fileListSorted 
```

in `moveFile` when you never use `fileListSorted` in there?) Also note that to add items into a `ListBox`, you typically use the `insert` method, which you haven't used in `moveFiles` as far as you've shown anyway...

# java - 1º 夏令时 Java 和 JS 表现出不同的行为

> ID：13048281
> 
> 赞同：2
> 
> 时间：2012-10-24T11:26:18.910
> 
> 标签：java, javascript, dst

假设巴西利亚 GMT -0300：DST 于 2012 年 10 月 21 日 00:00:00，此时时钟应提前一小时

爪哇

```
new Date(2012 - 1900, 9, 21, 0, 0, 0)
Sun Oct 21 01:00:00 BRST 2012 
```

Chrome/FireFox（控制台）

```
new Date(2012, 9, 21, 0, 0 ,0)
Sat Oct 20 2012 23:00:00 GMT-0300 (Hora oficial do Brasil) 
```

Java 中的结果是我所期望的，但 JS 中的结果我无法理解。我在 bjornd 说的地方找到了这篇[文章](https://stackoverflow.com/questions/12705485/is-there-a-way-to-represent-the-21-october-2012-in-a-javascript-date-object?answertab=votes#tab-top)

> 这是一个绝对正确的行为

但没有解释为什么这种行为是可以的。

我的问题是：

**为什么 JS 会返回一小时前的日期？**

PS 我知道日期标记为“弃用”，但我使用的是 GWT；日期是我唯一的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:37:51.247

基本上，据我所知，这个答案是不正确的。我什至对 Java 版本并不完全满意。

从根本上说，您正在尝试构建一个从未发生过的本地日期/时间。从本地时间转换为 UTC 总是很棘手，因为存在三种可能性：

*   明确的映射，在大多数时区，每年只有两个小时以外的所有时间都是如此
*   模糊映射，在*向后*转换期间，相同的本地时间段出现两次（例如，本地时间变为 12:59am、1am、... 1:59am、1am、1:59am、2am）
*   “间隙”映射，本地时间段根本不存在（例如，本地时间为上午 12:59、凌晨 2 点、凌晨 2:01）

巴西在午夜将时钟向前移动，因此当地时间实际上是：

```
October 20th 11:58pm
October 20th 11:59pm
October 21st 01:00am
October 21st 01:01am 
```

您要求的当地时间根本没有发生。看起来 Java 只是假设您想将其向前滚动...而 JavaScript 变得混乱:( 如果您在 2013 年 2 月 16 日开始时要求午夜，JavaScript 结果会更容易理解（但仍然不正确），因为例如 - 时钟会回到 15 日晚上 11 点。16 日上午 12 点是明确的，因为它只能在 15 日晚上 11 点至晚上 11:59 的“第二个”之后发生。

一个好的日期/时间 API（在我非常偏颇的观点中）会迫使您说出您希望在进行转换时如何发生歧义和差距。

# git - 仅当每个子组件构建成功时，Jenkins 才会合并到 git master

> ID：13048283
> 
> 赞同：2
> 
> 时间：2012-10-24T11:26:30.703
> 
> 标签：git, jenkins

我正在尝试使用 Jenkins 来保持我的主分支稳定，如此[处](http://blog.cloudbees.com/2012/03/dont-phunk-with-my-stable-branch.html)所述。基本上，开发人员检查 push 到集成分支，只有 Jenkins 实例从集成合并到 master。我的项目由多个 RTL（verilog、vhdl 等）子组件组成，每个子组件都有自己的测试平台，可以单独构建。git-plugin 支持在运行测试之前根据更改的文件进行过滤，但我想要求所有更改的子组件在合并之前成功构建。即如果我的目录结构看起来像：

```
src/
    A/
    B/
    C/
    share/
test/
    A/
    B/
    C/ 
```

如果只是 src/A/ 中的某些内容发生了变化，那么在将集成合并到 master 之前，只有测试 A 需要成功。如果 src/share/ 发生变化，则需要在将集成合并到分支之前运行测试 A、B 和 C。所有测试都可以并行运行。

我已经研究过使用 fork-plugin 和 parameterized-trigger-plugin，但看起来它们需要静态配置。有没有办法处理这种类型的动态依赖菱形，并且只有在一切都成功的情况下才让 Jenkins 将集成合并到 master 中？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:05:18.377

我认为您应该考虑使用[gerrit](http://code.google.com/p/gerrit/)来管理更改。Jenkins 有一个 Gerrit 插件，可以自动构建和测试开发人员提交的更改。一旦更改由 Jenkins 验证，它们就可以被审查、批准并随后合并。

# android - 如何在 Android 中获取 ViewGroup 的子视图？

> ID：13048287
> 
> 赞同：2
> 
> 时间：2012-10-24T11:26:50.000
> 
> 标签：android, view, android-webview, viewgroup

我必须获得 WebView 的子视图。对于一些文本操作，我想知道是否有办法设置子视图的属性，例如：

```
View[] childs = webView.getChilds;
View ch = childs[0];
ch.setText("manipulated text"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:35:38.390

WebView 有方法`getChildCount()`和`getChildAt(int index)`. 您可以尝试使用这些方法，但更好的解决方案是 Bixi 的一种。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:34:18.677

为什么不使用 findViewById ？

```
TextView subElement = (TextView) webview.findViewById(R.id.subelement);
subElement.setText("Oh Hi"); 
```

如果你真的想遍历孩子，你也可以使用[ViewGroup::getChildAt()](http://developer.android.com/reference/android/view/ViewGroup.html#getChildAt%28int%29)和[ViewGroup::getChildCount()](http://developer.android.com/reference/android/view/ViewGroup.html#getChildCount%28%29)

# javascript - 网页动画背后的技术是什么？

> ID：13048289
> 
> 赞同：0
> 
> 时间：2012-10-24T11:26:56.817
> 
> 标签：javascript, jquery, html, css, web-applications

虽然我们可以通过 jQuery 等各种 Javascript 库来实现出色的动画效果。我想知道动画背后的技术是什么？

我可以考虑使用 CSS 来格式化页面元素。

但是我们怎样才能在页面的任意位置放置一个元素呢？我的意思是，不是按线。我们真的可以将浏览器窗口中的客户区视为画布吗？

我对前端 Web 开发完全陌生，我希望我说清楚了。感谢您回答这个初级问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:33:02.480

jQuery 方式 - 也是唯一的跨浏览器方式 - 动画是设置一些 CSS 属性，稍等，更新这些属性，稍等，更新这些属性......

```
e.style.position = "absolute";
time_start = Date.now();
time_end = time_start + 10000;

(function tick(){
  now = Date.now() - time_start;
  if(now > time_end) now = time_end;
  e.style.top = now * speed + top_start;
  if(now < time_end) setTimeout(tick, 13);
}(); 
```

您感兴趣的 CSS 属性是：

*   `position: absolute`允许您将元素定位到任意位置。
*   `display: block`or`display: inline-block`让一个元素有一个`width`和`height`
*   `top`, `left`, `bottom`,`right`定义元素位置，如果它`position`是`absolute`或`relative`。`left`优先于`right`和`top`优先于`bottom`。
*   `width`并`height`定义元素的大小。
*   `opacity`可以动画淡入或淡出元素。

*   `padding`, `border-width`,`margin`和它们各自的组件都可以动画。

您还可以为颜色设置动画：`border-color`、`color`、`background`。

# c++ - 指向基类数组的指针，用派生类填充

> ID：13048301
> 
> 赞同：12
> 
> 时间：2012-10-24T11:27:28.240
> 
> 标签：c++, arrays, inheritance, pointers, derived-class

如果我有一个基类，只有虚拟方法和基类的 2 个派生类，并且实现了这些虚拟方法。

我如何：

```
 // causes C2259
 BaseClass* base = new BaseClass[2];

 BaseClass[0] = new FirstDerivedClass;
 BaseClass[1] = new SecondDerivedClass; 
```

或者：

```
// causes "base is being used without being initialized"
BaseClass* base;
// causes CC59 again
BaseClass* base = new BaseClass;

base[0] = FirstDerivedClass();
base[1] = SecondDerivedClass(); 
```

（或类似的东西）

...这样我就可以通过 s 访问`BaseClass`s 方法`DerivedClass`，但是通过指针和指针是`DerivedClass`s 的数组？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T11:33:59.577

您的数组类型错误：它存储`BaseClass`对象*实例*而不是*指向*它们的指针。由于`BaseClass`似乎是抽象的，编译器抱怨它不能默认构造实例来填充你的数组。

即使`BaseClass`不是抽象的，在 C++ 中多态地使用数组也是一个[很大的](https://www.securecoding.cert.org/confluence/display/cplusplus/CTR56-CPP.+Do+not+use+pointer+arithmetic+on+polymorphic+objects)禁忌，所以在任何情况下你都应该做不同的事情。

通过将代码更改为：

```
BaseClass** base = new BaseClass*[2];

base[0] = new FirstDerivedClass;
base[1] = new SecondDerivedClass; 
```

也就是说，在大多数情况下，最好使用`std::vector`普通数组和智能指针（例如`std::shared_ptr`）而不是哑指针。使用这些工具而不是手动编写代码将以极低的运行时成本透明地处理许多问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T11:31:31.017

它是 C++ 使用`std::vector`而不是简单的数组：

```
std::vector<BaseClass*> base;
base.push_back(new FirstDerivedClass());
base.push_back(new SecondDerivedClass()); 
```

注意到`Kerrek SB`最安全的方法是使用`std::unique_ptr`：

```
std::vector<std::unique_ptr<BaseClass> > base;
base.push_back( std_unique_ptr<BaseClass>(new FirstDerivedClass()) );
base.push_back( std_unique_ptr<BaseClass>(new SecondDerivedClass()) ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T11:36:58.297

如果您的 BaseClass 包含纯虚拟方法，则将无法编译：

```
BaseClass* base = new BaseClass[2]; 
```

如果没有，您将获得内存泄漏。

在 c++ 中，这是通过使用带有某种智能指针的 std::vector 或 std::array 来完成的。例如 ：

```
std::vector< std::shared_ptr< BaseClass > > arr( 2 );
arr[0].reset( new FirstDerivedClass() );
arr[1].reset( new SecondDerivedClass() ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T11:43:24.133

这就是答案（来自鲁比）

```
BaseClass* Base[2];

Base[0] = new FirstDerivedClass;
Base[1] = new SecondDerivedClass; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T11:45:49.207

定义一个指针数组，指针类型为BaseClass。并将派生类的指针分配给数组的元素。就像：

```
BaseClass* base [2];
base[0] = new FirstDerivedClass;
base[1] = new SecondDerivedClass; 
```

# visual-studio-2010 - TFS 2010 - 合并到父分支并重命名文件时如何解决冲突？

> ID：13048306
> 
> 赞同：1
> 
> 时间：2012-10-24T11:27:58.830
> 
> 标签：visual-studio-2010, tfs, merge, branch

我一直在调查在 TFS 2010 中合并分支时遇到的任何潜在问题。

我尝试过的所有组合都运行良好，除了一个，我希望有人能帮助我理解为什么它不起作用和/或我做错了什么。

它是完全可重现的，我在下面描述了如何。

**问题场景**

环境：

*   两个分支中都有一个 C# 库项目，称为 MyProject。
*   每个项目中有两个类，分别称为 MyClass 和 MyOtherClass。
*   分支 A 是父分支，分支 B 是从它创建的。

场景：

*   MyClass.cs 在分支 A 中被编辑并重命名为 MyClassRenamed.cs。
*   MyClass.cs 在分支 B 中使用冲突更改进行编辑，但保留其名称。

结果：

*   合并更改会产生一个冲突。
*   冲突不能自动合并，它仅表明文件内容存在问题，而不是名称更改。
*   修复冲突会在两种环境中为您留下不同名称的文件，尽管解决冲突时文件具有什么名称。

**正确的场景**

有趣的是，如果场景相反，行为会有所不同，见下文。

*   MyClass.cs 在分支 A 中使用冲突更改进行编辑，但保留其名称。
*   MyClass.cs 在分支 B 中被编辑并重命名为 MyClassRenamed.cs。

结果：

*   合并会产生两个冲突。
*   一个冲突是项目文件，另一个是重命名的文件。
*   重命名文件的冲突不能自动合并，但它会通知名称已更改并要求合并文件的新名称。
*   然后，您可以合并该文件的更改。
*   然后，您可以合并项目文件的更改。
*   修复冲突会在两种环境中为您留下不同名称的文件，尽管解决冲突时文件具有什么名称。
*   一切都按预期工作，文件在两个环境中都被重命名，并且更改保持同步。

**结论**

据我所知，唯一的解决方案是避免重命名文件并在合并后手动修复问题，如果有自动化的方法可以做到这一点，我会犹豫不决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:07:35.067

让我稍微扩展一下你的场景。

*   MyClass.cs 在分支 A 中被编辑并重命名为 MyClassRenamed.cs。

*   MyClass.cs 在分支 B 中使用冲突更改进行编辑，但保留其名称。

*   这些分支之一必须合并到集成分支（假设是分支 A）

*   此时，B 分支上的团队决定将更改合并到集成分支中。**作为一个好的实践，在合并到集成之前，他们应该从集成中拉下更改并合并到分支 B。只有在他们这样做并修复冲突之后，他们才会将分支 B 合并到集成中。**

*   下次合并分支 A 时，他们也应该遵循良好的做法。

上述做法应该可以解决不同分支中文件名不同的问题。

# regex - 菜鸟正则表达式装腔作势（匹配可能包含并且必须具有）

> ID：13048307
> 
> 赞同：3
> 
> 时间：2012-10-24T11:28:06.613
> 
> 标签：regex

对正则表达式大师来说可能真的很简单:) 我是正则表达式的菜鸟，刚学了一些 PHP，但想学习（一旦这个项目完成，我会认真学习并破解正则表达式）。我想了解如何编写一个可能包含一些数据但必须包含其他数据的正则表达式。

我的例子是，比赛可以以数字开头，但不是必须的，但如果是这样，我需要数字和以下 2 个单词。如果它不以数字开头，则只需前 2 个单词。数据将位于字符串的开头。

以下将匹配：

*   123 Fore Street, Fiveways（123 Fore Street 返回（无逗号））
*   我们的房子村（我们的房子回来了）
*   7八九（7八九回归）

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T11:32:26.493

像这样的东西应该工作：

`^((?:\d+\s)?\w+(?:\s\w+)?)`

您可以在编码之前在[http://rubular.com/之类的地方对其进行测试，这通常更容易。](http://rubular.com/)

这是什么意思：

^ -> 行首

`(?:\d+\s)?`-> 一个非捕获组，（用 ?: 标记），由几个数字和一个空格组成，因为我们跟在它后面`?`，所以它是可选的。

`\w+(?:\s\w+)?`-> 几个字母数字字符（查找 \w 的含义），后跟可选的空格和另一个“单词”，同样位于非捕获组中。

整个事情都封装在一个捕获组中，因此第 1 组将包含您的匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:31:46.067

将此正则表达式与多行选项一起使用

```
^(\d+(\s*\b[a-zA-Z]+\b){1,2}|(\s*\b[a-zA-Z]+\b){1,2}) 
```

`Group1`包含您所需的数据

`\d+`表示匹配数字，即`\d`1 到多次`+`

`\s*`表示匹配空间，即`\s`0 到多次`*`

`(\s*\b[a-zA-Z]+\b){1,2}`匹配 1 到 2 个单词..

# php - Codeigniter - 如何动态更新我的数据库配置设置？

> ID：13048315
> 
> 赞同：1
> 
> 时间：2012-10-24T11:28:31.373
> 
> 标签：php, codeigniter, config

我想为我的程序的一部分更改一些数据库设置。

在我的设置中，数据库类自动加载了一个看起来像这样的配置

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = '****';
$db['default']['database'] = 'database';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

在脚本的一部分，我想更改 的值`$db['default']['keyname']`，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:30:33.493

有如何类>检查它[http://codeigniter.com/user_guide/libraries/config.html](http://codeigniter.com/user_guide/libraries/config.html)

您如何无法更改数据库连接设置..它们在您的配置之前很久就加载了..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:09:13.047

您应该添加另一组凭据，而不是动态更改现有凭据：

```
$db['another_db']['hostname'] = 'localhost';
$db['another_db']['username'] = 'root';
$db['another_db']['password'] = '****';
$db['another_db']['database'] = 'database';
$db['another_db']['dbdriver'] = 'mysql';
$db['another_db']['dbprefix'] = '';
$db['another_db']['pconnect'] = TRUE;
$db['another_db']['db_debug'] = TRUE;
$db['another_db']['cache_on'] = FALSE;
$db['another_db']['cachedir'] = '';
$db['another_db']['char_set'] = 'utf8';
$db['another_db']['dbcollat'] = 'utf8_general_ci';
$db['another_db']['swap_pre'] = '';
$db['another_db']['autoinit'] = TRUE;
$db['another_db']['stricton'] = FALSE; 
```

您可以通过执行以下操作加载此其他数据库：

```
$another_db = $this->load->database('another_db', TRUE); 
```

然后像普通的数据库驱动程序一样使用它：

```
$another_db->select();
...etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:56:05.723

有点 hacky，但你可以在 system/database/DB_driver.php 中添加这样的东西（我以 db 密码更改为例）：-

```
public function update_pw($value) {
  $this->password = $value;
} 
```

然后在你的项目中，做

```
$this->db->update_pw('example');
$this->db->reconnect(); 
```

具体取决于您要在配置中更改的内容 - 更重要的是，为什么要更改它 - 这可能是也可能不是最佳选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T14:31:38.217

您也可以随时使用全局变量。通常我总是有 2 个数据库。一种用于生产，一种用于开发。您只需检查该 var 以加载一个或另一个。

该概念可用于在应用程序的一个部分加载一个数据库，而在另一部分加载另一个数据库。但是，我会使用 Brendan 指出的内置解决方案。

# ffmpeg - ffmpeg 对 mp4 文件的帧抓取速度很慢

> ID：13048316
> 
> 赞同：1
> 
> 时间：2012-10-24T11:28:36.120
> 
> 标签：ffmpeg

以下 ffmpeg 帧抓取命令需要很长时间才能从 mp4 文件中抓取图像。

```
ffmpeg.exe -itsoffset -200 -i C:\93844428.mp4 -vcodec mjpeg -vframes 1 -y -an -f rawvideo -s 640x360 C:\test\out1.jpg 
```

对于 20MB 的文件（大约 2 分钟的视频），根据您要求抓取的偏移量（以秒为单位），最多需要大约 6 秒才能找到图像。

对于 100MB，如果您请求大偏移量，它可以在几分钟内完成。

这似乎只是 mp4 文件的问题。

有什么可以做的来改善这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:45:09.863

这种逻辑在进行帧抓取时效率低下。不要使用它的偏移量。如果您希望帧位于特定位置，请使用 -ss 开关设置您希望该帧的时间偏移量。

# java - 如何在 Java EE 环境中拦截和验证 HTTP 请求

> ID：13048319
> 
> 赞同：0
> 
> 时间：2012-10-24T11:28:42.170
> 
> 标签：java, jakarta-ee, servlet-filters

我正在做一个项目，主要概念是为 Java EE 开发一个引擎，用于验证来自客户端的 HTTP 请求。

我看过一个与此相关的引擎，它是 OWASP PROJECT STINGER。我自己对这个引擎的理解是，使用 STINGER 引擎的开发人员会设置所有规则或配置所有内容，例如通过填写 XML 文件（他们称为 SVDL 文件）来设置允许的正则表达式和 cookie 规则集。

现在我的主要问题是如何为 Java EE 开发引擎？我将从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:15:43.270

好吧，它不再被称为 J2EE。改成 Java EE 已经有好几年了。现在，Java EE 是一个[技术纲要（即 JAXB、RPC、EJBs、JSP、JTA 等等等等）](http://www.oracle.com/technetwork/java/javaee/tech/index.html)。实现一个完整的容器是一项主要任务，我怀疑这是你想要的。您似乎在谈论实现 HTTP 服务器，这可能只是 Java EE 所做工作的一小部分。

现在，如果您坚持实现它们，那么起点始终是阅读您打算实现的特定技术的 Java 规范。从[Java Community Process](http://jcp.org/en/home/index)下载 JSR，并根据其要求设计您的实现。

例如，这是[Servlet 的规范](http://jcp.org/en/jsr/detail?id=315)

# objective-c - xcode 在等待应用程序启动时超时

> ID：13048321
> 
> 赞同：21
> 
> 时间：2012-10-24T11:28:50.797
> 
> 标签：objective-c, ipod-touch, xcode4.5

应用程序无法在 xcode 4.5 的 iOS 6.0 设备中启动。Xcode 说应用程序无法启动超时等待应用程序启动。我重置了所有设备设置。交叉检查我是否选择了正确的配置。是的，它是正确的。在这里我附上控制台的图像。请帮帮我。 ![在此处输入图像描述](../Images/6360113bc2ba19a92d6c35a138877b9a.png)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-30T16:25:03.390

以上提示都没有帮助我。原来我在调试模式下使用我的分发配置文件而不是开发人员配置文件。您可以通过转到构建设置->代码签名实体来检查您正在使用的配置文件。

确保您在 Beta 和 Debug 模式下使用您的开发者资料。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T11:24:41.267

我在尝试使用 Ad-Hoc 配置调试应用程序时遇到了类似的问题...检查您正在使用的配置，似乎 ad-hoc 配置不能用于调试。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-21T22:21:30.623

每当这种情况发生在我身上时，我都会执行以下操作来解决问题：

1.  停止应用程序在 Xcode 中运行。
2.  从设备（或模拟器）中删除应用程序。
3.  从 Xcode 菜单中选择产品 > 清洁。
4.  关闭 Xcode。
5.  关闭模拟器（或重启设备）。
6.  重新启动您的计算机（是的，我知道这就像 Windows 解决方案，但很认真）。
7.  再试一次。

# iphone - Admob - 添加新的 ViewController

> ID：13048323
> 
> 赞同：-1
> 
> 时间：2012-10-24T11:29:00.783
> 
> 标签：iphone, ios, xcode, admob

我对 xcode 还很陌生，但是在将 admob 添加到我的应用程序时遇到了一些麻烦。

我按照 Admob 的说明进行操作，但没有显示广告。

我想我需要将我创建的 AdViewController 的新视图添加到 appsdel​​egate。我应该为此添加代码吗？

顺便说一句：我使用 tabbar 控制器作为 rootviewcontroller

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:57:20.220

您将需要创建类似于 singleton 的东西`GADBannerView`。我的建议是创建一个`GADBannerView`对象，您可以通过不同的视图控制器传递该对象，但始终`UITabBarController`将`rootViewController`.

[在http://code.google.com/p/google-mobile-dev/source/browse/AdCatalog/Classes/AdvancedLayoutUseCases/TabbedViewExample/?repo=adcatalog-ios](http://code.google.com/p/google-mobile-dev/source/browse/AdCatalog/Classes/AdvancedLayoutUseCases/TabbedViewExample/?repo=adcatalog-ios)有一个使用 UITabBar 解决方案的示例。

# jquery - 为什么鼠标悬停或鼠标悬停事件不会从测试中触发？

> ID：13048334
> 
> 赞同：1
> 
> 时间：2012-10-24T11:29:32.603
> 
> 标签：jquery, coffeescript, qunit

我有以下 QUnit 测试：

```
test 'can view saved status and undo if needed', ->
    save_link = $('.save-link')
    my_profile_div = $('.searchbar .span5')
    undo_save = $('#undo-save')

    my_profile_div.mouseover()
    equal(undo_save.css('visibility'), 'hidden')
    my_profile_div.mouseout()

    save_link.click()

    my_profile_div.mouseover()
    equal(undo_save.css('visibility'), 'visible')   
    my_profile_div.mouseout()
    equal(undo_save.css('visibility'), 'hidden') 
```

它点击一个链接，然后期望元素出现一些悬停行为`my_profile_div`。不幸的是，mouseover 和 mouseout 事件不会从测试中触发。使用此实现时，我没有收到任何警报：

```
$('.searchbar .span5').mouseover -> 
    alert('mouseover')

$('.searchbar .span5').mouseout -> 
    alert('mouseout') 
```

在浏览器中，我确实收到了警报，但在我运行上面的测试时却没有，这让我觉得我没有正确触发事件。我也试`trigger('mouseover')`了也没用。

感谢您花时间阅读本文，伙计们。我非常感谢您的帮助。

*注意：*测试是针对所需的行为。实现只是为了确保测试正在做它应该做的事情。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T14:30:14.557

我宁愿使用触发器来触发事件。

```
$('targetElement').trigger('eventName'); 
```

# javascript - 用于设计蛇和梯子游戏的 div 控件或画布控件？

> ID：13048335
> 
> 赞同：0
> 
> 时间：2012-10-24T11:29:35.697
> 
> 标签：javascript, html, windows-runtime

我想在 Windows 8 HTML5 和 javascript 中设计一个蛇和梯子游戏。我想知道最好的方法是什么？

仅使用 DIV 或仅使用 CANVAS 控件？或任何其他类型的控制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:32:04.910

跟着`<canvas>`元素走。这是一个非常好的 HTML5 游戏开发资源：[http ://www.html5rocks.com/en/gaming](http://www.html5rocks.com/en/gaming)

# gwt - DateCell(DateTimeFormat) 构造函数未定义

> ID：13048336
> 
> 赞同：0
> 
> 时间：2012-10-24T11:29:37.290
> 
> 标签：gwt

我正在尝试使用 DateCell(format) 将日期列添加到单元格表报告中。

```
 DateTimeFormat format = DateTimeFormat
        .getFormat(PredefinedFormat.DATE_MEDIUM);

DateCell classDateCell = new DateCell(format); 
```

我收到错误消息：“构造函数 DateCell(DateTimeFormat) 未定义”，但 javadoc， http: [//google-web-toolkit.googlecode.com/svn/javadoc/latest/index.html ?overview-summary .html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/index.html?overview-summary.html)，表示这是一个有效的构造函数。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:18:22.940

如果你使用这个：

```
com.google.gwt.cell.client.DateCell

com.google.gwt.i18n.client.DateTimeFormat 
```

那你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:24:39.240

您是否有机会使用[com.google.gwt.i18n。*共享*.DateTimeFormat](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/shared/DateTimeFormat.html)，[com.google.gwt.i18n 的超类。*客户端*.DateTimeFormat](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/DateTimeFormat.html)？后者是您感兴趣的构造函数正在寻找的构造函数。

# python - 在同一行上格式化字符串

> ID：13048337
> 
> 赞同：2
> 
> 时间：2012-10-24T11:29:42.170
> 
> 标签：python, string, formatting

如果我有一个程序，例如：

```
 def P(x):
      # x is an integer
      print str(x) 
```

我想要一个输出，例如：

```
 >>> You chose the number: X 
```

其中 X 是在过程 P 中打印的结果。如何在不更改过程的情况下做到这一点？

如果我这样做：

```
 print 'You chose the number: '
  P(x) 
```

我去拿

```
 You chose the number: 
 X 
```

我怎样才能让它们在同一行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:30:50.683

在第一条打印语句后添加`trailing`逗号，以在同一行打印下一条语句：-

```
print 'You chose the number: ',
P(x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:34:36.330

尝试字符串格式：

```
 print 'You chose the number: {0}'.format(P(x)) 
```

而不是从函数使用打印`return`：

```
 def P(x):
      return str(x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T11:44:29.857

任何一个呢

```
P('You chose the number: ' + str(x))
P('You chose the number: {0}'.format(x))
P('You chose the number: %s' % x) 
```

? 您不必`P()`像其他答案所建议的那样进行更改。

# oracle - 多线程中的准备好的语句

> ID：13048338
> 
> 赞同：0
> 
> 时间：2012-10-24T11:29:58.300
> 
> 标签：oracle, merge

我`MERGE`在准备好的语句中使用了命令，当我在单线程环境中执行它时，它工作正常，但在多线程环境中，它会导致一些问题。即数据重复，即如果我有 5 个线程，每条记录将重复 5 次。我认为 db 中没有锁定来帮助线程。我的代码：

```
//db:oracle
sb.append("MERGE INTO EMP_BONUS EB USING (SELECT 1 FROM DUAL) on (EB.EMP_id = ?) WHEN MATCHED  THEN  UPDATE SET TA =?,DA=?,TOTAL=?,MOTH=?  WHEN NOT MATCHED THEN "+ "INSERT (EMP_ID, TA, DA, TOTAL, MOTH, NAME)VALUES(?,?,?,?,?,?) ");

//sql operation,calling from run() method
public void executeMerge(String threadName) throws Exception {              
        ConnectionPro cPro = new ConnectionPro();
        Connection connE = cPro.getConection();
        connE.setAutoCommit(false);
        System.out.println(sb.toString());
        System.out.println("Threadname="+threadName);
        PreparedStatement   pStmt= connE.prepareStatement(sb.toString());
        try {
            count = count + 1;

            for (Employee employeeObj : employee) {//datalist of employee

                pStmt.setInt(1, employeeObj.getEmp_id());
                pStmt.setDouble(2, employeeObj.getSalary() * .10);
                pStmt.setDouble(3, employeeObj.getSalary() * .05);
                pStmt.setDouble(4, employeeObj.getSalary()
                        + (employeeObj.getSalary() * .05)
                        + (employeeObj.getSalary() * .10));
                pStmt.setInt(5, count);
                pStmt.setDouble(6, employeeObj.getEmp_id());
                pStmt.setDouble(7, employeeObj.getSalary() * .10);
                pStmt.setDouble(8, employeeObj.getSalary() * .05);
                pStmt.setDouble(9, employeeObj.getSalary()
                        + (employeeObj.getSalary() * .05)
                        + (employeeObj.getSalary() * .10));
                pStmt.setInt(10, count);
                pStmt.setString(11, threadName);
                // pStmt.executeUpdate();

                pStmt.addBatch();
            }

            pStmt.executeBatch();
            connE.commit();
        } catch (Exception e) {
            connE.rollback();
            throw e;

        } finally {

            pStmt.close();
            connE.close();

        }
    } 
```

如果employee.size=5，线程数=5，执行后我会得到25条记录而不是5条

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:02:22.023

如果没有约束（即 中`emp_id`列的主键或唯一键约束`emp_bonus`），则没有什么可以阻止数据库允许每个线程插入 5 行。`emp_bonus`由于每个数据库会话都看不到其他会话所做的未提交更改，因此每个线程都会看到线程正在查找的行中没有行`emp_id`（我假设`employeeObj.getEmp_id()`返回相同的 5`emp_id`每个线程中的值），因此每个线程将插入所有 5 行，如果有 5 个线程，则总共有 25 行。如果您有一个唯一约束来防止插入重复的行，Oracle 将允许其他 4 个线程阻塞，直到第一个线程提交允许后续线程执行更新而不是插入。当然，这将导致线程被序列化，从而破坏了从运行多个线程中获得的任何性能提升。

# haskell - Data.Text.Lazy.Internal.Text 到 Data.Text.Text

> ID：13048349
> 
> 赞同：2
> 
> 时间：2012-10-24T11:30:24.087
> 
> 标签：haskell

如何将内部值转换为 a `Data.Text.Text`？

```
import qualified Data.Text as T
import qualified Data.Text.Lazy.IO as X

main = do
    name <- X.readFile "someFile" 
```

如何将值转换`name`为`T.Text`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:32:44.957

有一个明确的功能，[`Data.Text.Lazy.toStrict`](http://hackage.haskell.org/packages/archive/text/0.11.2.3/doc/html/Data-Text-Lazy.html#v%3atoStrict).

我想你实际上在做其他事情，需要阅读作为一个 lazy `Text`，否则，你当然应该直接[阅读为一个 strict`Text`](http://hackage.haskell.org/packages/archive/text/0.11.2.3/doc/html/Data-Text-IO.html#v%3areadFile)。

# tsql - T-SQL - 如果列存在，则执行涉及列的查询，否则执行另一个不存在列的查询

> ID：13048356
> 
> 赞同：0
> 
> 时间：2012-10-24T11:30:54.540
> 
> 标签：tsql

> **可能重复：**
> [列创建后 sql server 更新上的列名无效](https://stackoverflow.com/questions/12535405/invalid-column-name-on-sql-server-update-after-column-create)

我正在编写查询以从数千台机器上存在的数据库中的表中提取数据。创建这些数据库的软件经历了很多变化，因此较新的数据库可能有较新的表和/或较新的列，所以我希望编写一个 SQL 查询来检查表中是否存在列，如果存在，执行涉及该列的查询。如果不存在，则执行忽略该列的查询。

不幸的是，到目前为止，我遇到的所有与缺少列有关的帖子都希望添加该列（如果它不存在）。我不想那样做。我对数据库具有只读访问权限，并且不可能更改旧数据库。

这是我尝试过的一篇文章： [如何检查 SQL Server 表中是否存在列](https://stackoverflow.com/questions/133031/how-to-check-if-column-exists-in-sql-server-table)

考虑这个简单的查询（这不完全是我想要做的，但它应该让事情变得清晰）：

```
 IF COL_LENGTH('E_BU','SCID') IS NOT NULL
      BEGIN
        SELECT BUID, SCID
        FROM E_BU
      END
    ELSE
      BEGIN
        SELECT BUID
        FROM E_BU
      END 
```

如果针对具有 SCID 列的较新数据库/表执行上述操作，则效果很好，但是当针对没有该列的数据库/表执行时，会出现以下错误：

> 消息 207，级别 16，状态 1，第 5 行无效的列名称“SCID”。

在查询中是否可以做任何事情来解决这种情况，或者我需要在前端本身执行检查（可能向数据库发送一个额外的查询以确定该列是否存在或不存在，并且基于执行适当的查询）？与此类似的问题也会出现在整个表的情况下。如果表不存在，则根本不应该执行查询。

# c# - 无法在 C# 中解析日期时间

> ID：13048358
> 
> 赞同：1
> 
> 时间：2012-10-24T11:31:23.423
> 
> 标签：c#, asp.net, visual-studio-2010, datetime

我知道这样的问题在这里很多。请通过一次

我有一个`string`来自当前日期的文本框，例如 2012 年 10 月 9 日，我的类属性是`DateTime?`类型。我正在使用`Convert.ToDateTime(datetime_string_from_textbox)`，但它给了我一个`FormatException`. `DateTime.ParseExact(string, format, CultureInfo, DateTimeStyle)`然后我按照 Jon Skeet 的建议尝试了[这里](https://stackoverflow.com/questions/7580809/parse-c-sharp-string-to-datetime)，但它仍然给了我同样的例外。

还有一件事——我的本地机器日期时间格式是`dd-mm-yyyy`. 当我将其切换为`mm/dd/yyyy`格式时，代码工作正常。所以基本上，我想知道如何将有效的日期时间字符串解析为`DateTime`对象，而不考虑区域设置、任何设置或对本地机器的任何依赖。

这可能吗？

更新：正在使用的代码

```
employee.JoiningDate = DateTime.ParseExact(string.Format("{0} 00:00:00", JoiningDate.Text.Trim()), "MM/dd/yyyy hh:mm:ss", CultureInfo.InvariantCulture, DateTimeStyles.AdjustToUniversal | DateTimeStyles.AssumeUniversal); 
```

**现有问题和所需解决方案**

我的系统日期时间显示 24-10-2012（即 10 月 24 日），我的文本框中有 10/17/2012（即 10 月 17 日），因为文本框日期也是有效的，并且在再次部署后客户端日期时间格式将变得未知，因此，我想要一种通用的方法来解析任何有效的日期时间字符串，而不管区域设置如何。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T11:33:59.437

这应该有效：

```
var date = DateTime.ParseExact(str, "M/d/yyyy", CultureInfo.InvariantCulture); 
```

如下测试： 

![在此处输入图像描述](../Images/c1dde57ec8acca1362966634d4073ee7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:36:32.420

这完全取决于机器设置。`DateTime.ParseExact(str, "dd/MM/yyyy", CultureInfo.InvariantCulture);`将适用于英国格式，但它会在美国格式上给出格式例外。因此，请根据您的机器设置使用格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:36:21.667

尝试使用以下方法将您的日期格式化为国际日期格式：

[您将如何以国际格式格式化 DateTime？](https://stackoverflow.com/questions/3142126/how-would-you-format-datetime-in-international-format)

您还可以检查您当前的文化：

[设置默认日期时间格式 c#](https://stackoverflow.com/questions/1389187/set-default-datetime-format-c-sharp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T11:39:58.367

如果可行，请尝试以下操作

```
var formatInfo = new DateTimeFormatInfo();
formatInfo.ShortDatePattern = "MM/dd/yyyy";
DateTime.Parse(date, formatInfo); 
```

# oracle - 在触发操作期间读取当前表 id

> ID：13048360
> 
> 赞同：1
> 
> 时间：2012-10-24T11:31:29.903
> 
> 标签：oracle, triggers, oracle11g

我有三个表： A 和 B 关系是 A 可以有很多 B 所以 B 引用 A.id 作为其列之一

```
Table A
|id|date|...

Table B
|id|A_id|... 
```

我在表 A 上创建了一个 Oracle 触发器，以便在更新它时更新一个 A_Mod 表。

这个触发器是

```
CREATE OR REPLACE TRIGGER TR_A_INSERT_UPDATE
AFTER  INSERT OR UPDATE ON A
FOR EACH ROW
BEGIN
    INSERT INTO A_Mod values(..., :new.date, ...)
END; 
```

这很好用:)

我的问题是为表 B 创建触发器。

触发器是：

```
CREATE OR REPLACE TRIGGER TR_B_INSERT_UPDATE
     AFTER  INSERT OR UPDATE ON B
     FOR EACH ROW
     DECLARE
       ts TIMESTAMP;

     BEGIN
   SELECT aa.date INTO ts FROM B bb 
       INNER JOIN A aa ON a.id = bb.A_id
       WHERE bb.id = :new.id;

       INSERT INTO A_Mod values(..., :new.date, ...)
    END; 
```

此触发器正在读取表 B 中更新行的 ID，然后从表 A 中的相应行获取日期。然后尝试将其插入 A_Mod

问题是我得到一个变异错误

```
Error report:
SQL Error: ORA-04091: table B is mutating, trigger/function may not see it
ORA-06512: at "TR_B_INSERT_UPDATE", line 5
ORA-04088: error during execution of trigger 'TR_B_INSERT_UPDATE'
04091\. 00000 -  "table %s.%s is mutating, trigger/function may not see it"
*Cause:    A trigger (or a user defined plsql function that is referenced in
           this statement) attempted to look at (or modify) a table that was
           in the middle of being modified by the statement which fired it.
*Action:   Rewrite the trigger (or function) so it does not read that table. 
```

查看[文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm)，我可以通过删除该`FOR EACH ROW`行并让触发器在每个语句而不是每行触发一次来消除此错误。不幸的是，我使用的是 ORM 映射器，所以不要控制更新是如何发生的。我认为有时更新可能会覆盖多行。

文档说了一些关于创建临时表的内容，但我不确定这会有什么帮助。我是否必须在触发器内创建一个临时表，在这个临时表上创建一个触发器，然后更新 A_Mod，在触发触发器时更新这个临时表，然后删除之后的所有内容？

非常感谢任何提示。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:50:24.660

您的触发器中似乎没有任何理由`B`查询该`B`表。您应该能够`A`使用`:new.a_id`

```
CREATE OR REPLACE TRIGGER TR_B_INSERT_UPDATE
  AFTER  INSERT OR UPDATE ON B
  FOR EACH ROW
DECLARE
   ts TIMESTAMP;
BEGIN
  SELECT a.date 
    INTO ts 
    FROM A a
   WHERE a.id = :new.a_id;

  INSERT INTO A_Mod values(..., :new.date, ...)
END; 
```

但是，从数据建模的角度来看，如果子表上的触发器需要从父表中查询任何信息或将数据插入到父表写入的同一个历史表中，我会非常担心。这似乎表明存在正常化问题。

# spring-mvc - Spring MVC 视图不接收模型属性

> ID：13048362
> 
> 赞同：0
> 
> 时间：2012-10-24T11:31:40.823
> 
> 标签：spring-mvc

我对学习 Spring MVC 很感兴趣，并且我有一个非常简单的 Spring MVC 应用程序和一个简单的登录表单。登录表单向控制器发送 POST 请求，控制器目前只是一个传递，它只是获取 post 参数并在模型中设置一些属性并传递到另一个视图，第二个视图显示这些属性。控制器后显示的视图没有可用的模型参数，我不知道为什么。

LoginController 具有参数密码和用户名的正确值。

谢谢，

以下是相关的片段：

在 mvc-dispatcher-servlet.xml 中查看解析器

```
<context:component-scan base-package="mypackage" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:55:55.867

我发现了这个问题，它与 Spring MVC 无关。

在我的 errorpage.jsp 顶部我放了

```
<%@ taglib prefix="core" uri="http://java.sun.com/jsp/jstl/core" %> 
```

但后来我使用了命令

```
<c:out value="${username}"/> 
```

我将我的 taglib 包含修改为

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

并且修复了它......不知道为什么Netbeans 7.2至少没有给我一个警告......

# java - 使用 Spring JDBC API 批量执行存储过程

> ID：13048365
> 
> 赞同：2
> 
> 时间：2012-10-24T11:31:51.310
> 
> 标签：java, oracle, spring, stored-procedures, jdbc

是否可以在批处理模式下使用 Spring JDBC API 执行存储过程？

我尝试使用 Spring JdbcTemplate 的方法 batchUpdate，但它不起作用。我使用 Spring 3.0 和 Oracle JDBC 驱动程序版本 11.2.0.3

```
 JdbcTemplate template = new JdbcTemplate(dataSource);

    template.batchUpdate("BEGIN SCHEMA.PERSON_UPDATE(I_N_PERSON_ID=> ?  ,I_S_NAME=> ?  ,J_N_TID=> ?);END;", 
                new BatchPreparedStatementSetter() {
                    public void setValues(PreparedStatement ps, int i) throws SQLException {
                        OracleCallableStatement cs = (OracleCallableStatement) ps;
                        cs.setString(1, persons.get(i).getName());
                        cs.setLong(2, persons.get(i).getPersonId());
                        cs.registerOutParameter(3, OracleTypes.NUMBER);
                    }

                    public int getBatchSize() {
                        return persons.size();
                    }} 
                ); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-03T07:43:09.670

方法执行有误`setValues`。您创建实例，`OracleCallableStatement`但您必须注册`PreparedStatement`在方法参数中给出的参数，例如`ps`

```
JdbcTemplate template = new JdbcTemplate(dataSource);

    template.batchUpdate("{call SCHEMA.PERSON_UPDATE(?, ?)}",
            new BatchPreparedStatementSetter() {
                public void setValues(PreparedStatement ps, int i) throws SQLException {
                    ps.setString(1, persons.get(i).getName());
                    ps.setLong(2, persons.get(i).getPersonId());
                }

                public int getBatchSize() {
                    return persons.size();
                }
          }
    ); 
```

但有一个问题。`PreparedStatement`不适用于 out 参数。

# java - 如何在java中拆分字符串中的目录路径组件

> ID：13048366
> 
> 赞同：3
> 
> 时间：2012-10-24T11:31:50.683
> 
> 标签：java, string, file, directory, split

> **可能重复：**
> [如何在java中拆分字符串](https://stackoverflow.com/questions/6174182/how-to-split-the-string-in-java)

```
FileSystemView fsv = FileSystemView.getFileSystemView();
File[] roots = fsv.getRoots();
for (int i = 0; i < roots.length; i++)
{
  System.out.println("Root: " + roots[i]);
}
System.out.println("Home directory: " + fsv.getHomeDirectory()); 
```

根目录：C:\Users\RS\Desktop 主目录：C:\Users\RS\Desktop

我想剪切根目录或主目录组件，如字符串 C、用户、RS、桌面

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T12:03:34.060

我宁愿不要屈服于使用拆分文件名的诱惑，因为 java 有自己的更简洁的跨平台函数来进行路径操作。

我认为这种基本模式适用于 java 1.4 及更高版本：

```
 File f = new File("c:\\Some\\Folder with spaces\\Or\\Other");
    do {
        System.out.println("Parent=" + f.getName());
        f = f.getParentFile();
    } while (f.getParentFile() != null);
    System.out.println("Root=" + f.getPath()); 
```

将输出：

```
 Path=Other
    Path=Or
    Path=Folder with spaces
    Path=Some
    Root=c:\ 
```

您可能想先使用 f.getCanonicalPath 或 f.getAbsolutePath，因此它也适用于相对路径。

不幸的是，这需要 f.getPath 用于根，f.getName 用于其他部分，并且我以倒序创建这些部分。

更新：您可以在向上扫描时将 f 与 fsv.getHomeDirectory() 进行比较，并在发现您位于主文件夹的子目录中时中断。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T12:39:37.730

根据 user844382 的回答，这是用于分割路径的平台安全方式：

```
 String homePath = FileSystemView.getFileSystemView().getHomeDirectory().getAbsolutePath();
 System.out.println(homePath);
 System.out.println(Arrays.deepToString(homePath.split(Matcher.quoteReplacement(System.getProperty("file.separator")))));        
} 
```

在linux上它输出：

```
/home/isipka
[, home, isipka] 
```

在 Windows 上它输出：

```
C:\Documents and Settings\linski\Desktop
[C:, Documents and Settings, linski, Desktop] 
```

如果省略[Matcher.quoteReplacement()](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#quoteReplacement%28java.lang.String%29)方法调用，代码将在 Windows 上失败。此方法处理特殊字符的转义，例如“\”（ Windows 上的[文件分隔符](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)）和“$”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T11:47:56.500

您可以为此使用 java.nio.file.Path：

```
FileSystemView fsv = FileSystemView.getFileSystemView();
File[] roots = fsv.getRoots();
for (int i = 0; i < roots.length; i++)
{
  System.out.println("Root: " + roots[i]);
  Path p = roots[i].toPath();
  for (int j=0; j < p.getNameCount(); j++)
     System.out.println(p.getName(j));
}
System.out.println("Home directory: " + fsv.getHomeDirectory()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T11:34:35.583

```
FileSystemView fsv = FileSystemView.getFileSystemView();
File[] roots = fsv.getRoots();
for (int i = 0; i < roots.length; i++) {
    System.out.println("Root: " + roots[i]);
    for (String s : roots[i].toString().split(":?\\\\")) {
        System.out.println(s);
    }
}
System.out.println("Home directory: " + fsv.getHomeDirectory()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T11:37:02.807

尝试使用正则表达式拆分`root.split(":?\\\\")`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T11:39:25.267

与其他解决方案不同的解决方案是从 File API 获取名称：

```
File file = roots[i];
while (file != null) {
  if (file.getName().length() > 0) {
    System.out.println(file.getName());
  } else {
    System.out.println(file.getPath().substring(0, 1));
  }
  file = file.getParentFile();
} 
```

此解决方案以相反的顺序返回路径，因此您必须进行一些小的更改。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T11:35:55.393

试试 String.split() 方法。[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String) )

拆分时需要正则表达式，因此可以做一些非常高级的事情。对你来说，`\\`可能会做到这一点。

由于`\`向正则表达式添加了功能，我们需要将其标记为字符而不是“正则表达式运算符”。这就解释了 double 。

# android - HoloEverywhere 方法不会覆盖或实现超类型中的方法

> ID：13048367
> 
> 赞同：1
> 
> 时间：2012-10-24T11:31:52.937
> 
> 标签：android, maven, actionbarsherlock, android-holo-everywhere

我正在尝试在 IntelliJ[中将 HoloEverywhere 1.3.2](https://github.com/ChristopheVersieux/HoloEverywhere)与 Maven 构建系统一起使用。下面是我的 AndroidManifest.xml 中的代码

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.xyz.holocheck"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8"
              android:targetSdkVersion="16"/>
    <application android:label="@string/app_name"
                 android:icon="@drawable/ic_launcher"
                 android:theme="@style/Holo.Theme.Sherlock">
        <activity android:name="HoloActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

HoloActivity 的代码如下

```
public class HoloActivity extends SActivity {
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

当我编译代码时，出现以下错误

```
C:\Users\abc\IdeaProjects\HoloCheck\target\unpack\apklibs\com.github.christopheversieux_holoeverywhere-library_apklib_1.3.1-SNAPSHOT\src\com\WazaBe\HoloEverywhere\sherlock\SActivity.java:[322,1] method does not override or implement a method from a supertype
[ERROR] C:\Users\abc\IdeaProjects\HoloCheck\target\unpack\apklibs\com.github.christopheversieux_holoeverywhere-library_apklib_1.3.1-SNAPSHOT\src\com\WazaBe\HoloEverywhere\sherlock\SExpandableListActivity.java:[323,1] method does not override or implement a method from a supertype
[ERROR] C:\Users\abc\IdeaProjects\HoloCheck\target\unpack\apklibs\com.github.christopheversieux_holoeverywhere-library_apklib_1.3.1-SNAPSHOT\src\com\WazaBe\HoloEverywhere\sherlock\SListActivity.java:[322,1] method does not override or implement a method from a supertype
[ERROR] C:\Users\abc\IdeaProjects\HoloCheck\target\unpack\apklibs\com.github.christopheversieux_holoeverywhere-library_apklib_1.3.1-SNAPSHOT\src\com\WazaBe\HoloEverywhere\sherlock\SPreferenceActivity.java:[323,1] method does not override or implement a method from a supertype 
```

我也在使用 ActionbarSherlock 并将其添加为 pom.xml 中的依赖项。

**我的问题**

为什么我在编译代码时会出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:59:36.693

这意味着 SActivity 类中没有 onCreate() 方法。请检查一下。

# spring - Spring MVC 格式化程序和转换器之间的区别

> ID：13048368
> 
> 赞同：12
> 
> 时间：2012-10-24T11:31:53.787
> 
> 标签：spring, spring-mvc, converter, formatter

我需要澄清一下Spring MVC**格式化程序**和**转换器之间的****区别**。

 ****我对它们之间主要区别的理解是，**格式化程序处理将显示给最终用户**的数据，例如日期、SSN 或信用卡号**，而转换器处理隐藏在表单控件后面的数据，**例如值属性一个选择的选项。

我是对还是错？有人可以提供建议和/或样本，以便更好地解释两者之间的区别。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-29T00:18:45.107

*转换器*用于将一种 Java 类型转换为另一种 Java 类型。例如， from `Long`to`java.util.Date`或 from `Integer`to`Color`或 from `String`to `Date`。它可以用于 Web 层或任何其他需要转换服务的层。

*格式化*程序用于转换`String`为另一种 Java 类型并返回。因此，一种类型必须是`String`. 例如，您**不能**编写将 a 转换为 a 的格式化`Long`程序`Date`。格式化程序的示例是，用于`DateFormatter`解析和格式化. 此外，格式化程序的消息可以本地化。`String``java.util.Date``Date`

**结论**：格式化程序适用于 Web 环境，例如 Spring MVC 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:29:48.573

转换器组件用于将一种类型转换为另一种类型，并通过强制将所有此类转换相关代码放在一个位置来提供更清晰的分离。

Spring 已经支持常用类型的内置转换器，并且该框架具有足够的可扩展性，可以编写自定义转换器。

Spring Formatters 会根据数据呈现的显示来格式化数据。示例可能包括根据区域设置格式化日期/时间戳值等。****

# actionscript-3 - Flex/AS3 ADG：编辑单元行为问题

> ID：13048369
> 
> 赞同：0
> 
> 时间：2012-10-24T11:31:56.567
> 
> 标签：actionscript-3, apache-flex

我正在使用 ActionScript3 和 Adob​​e Flex3.6 框架开发不同的应用程序。在大多数项目中，我都使用了 AdvancedDataGrid 组件，当只为特定列启用单元格编辑时，这给了我一个反复出现的问题。这是通过捕获 itemEditBegin 事件并检查事件从哪个位置（行、列）触发来实现的。如果不应编辑当前单元格，则调用 event.preventDefault()。

但是在某些情况下，单元格 (0,0) 可以被编辑，即使由于事件处理程序方法用于捕获 itemEditBegin 事件的限制，这是不可能的。

我可以观察到的是，当这个问题发生时 itemEditBegin 事件不会被触发。那么这可能是 Flex3 框架中的问题或错误吗？

我没有检查使用 Flex4 时是否也会出现此问题。！

请检查随附的屏幕截图以更好地了解问题。

![](../Images/5d5418e3cc8c0f0d5c268f3313979021.png)

# pyqt4 - PyQt4：多次初始化和删除QApplication实例

> ID：13048371
> 
> 赞同：2
> 
> 时间：2012-10-24T11:32:01.470
> 
> 标签：pyqt4

`QApplication`是否可以多次初始化和删除实例？

以下是示例代码：

```
while some_condition:
    app = QApplication(sys.argv)

    some_actions

    del app 
```

我试过了，但似乎不可能。

如果我想`QApplication`在一个文件中多次初始化和删除实例，我该怎么做？

**更新**

这里我想用它`QtWebKit`来抓取一些网页，它可以自动解析 AJAX。但是我`QApplication(sys.argv).exec_()`以前启动事件循环的时候，因为进入了循环，所以无法在代码中添加新的url。所以我认为，如果我可以多次初始化和删除该类，那么我可以添加新的 url 来抓取。但它失败了。我不明白为什么即使在我删除实例后事件循环似乎仍然存在。

当我使用 时`QApplication(sys).processEvents()`，我发现这些问题都可以很好地解决。

对不起我的糟糕表达。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:22:22.420

使用`QApplication(sys.argv).processEvents()`代替`QApplication(sys.argv).exec_()`

# qooxdoo - 配置 qooxdoo Inspector 组件的问题

> ID：13048377
> 
> 赞同：0
> 
> 时间：2012-10-24T11:32:43.213
> 
> 标签：qooxdoo

我正在尝试按照此处的说明配置 Inspector 组件：http: [//manual.qooxdoo.org/current/pages/application/inspector_selenium.html#pages-application-inspector-selenium-using-the-qooxdoo-inspector-to -写硒测试](http://manual.qooxdoo.org/current/pages/application/inspector_selenium.html#pages-application-inspector-selenium-using-the-qooxdoo-inspector-to-write-selenium-tests)

我在按照配置说明操作时遇到问题，其中说要使用 selenium-core zip 文件配置 Selenium 窗口。我在提供的地址找不到这个文件：http: [//seleniumhq.org/download/](http://seleniumhq.org/download/)

关于我应该使用什么而不是那个 zip 文件的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:16:53.477

您只需在 Inspector 的 Selenium 选项窗口中按“使用默认 URI”按钮，它就会从 Google Code 上的 Selenium SVN 存储库加载脚本。如果这对您不起作用，它会变得有点复杂，因为 Inspector 需要一个已弃用的 Selenium 版本：

从这里下载 Selenium RC 并解压： [https ://code.google.com/p/selenium/downloads/detail?name=selenium-remote-control-1.0.2.zip](https://code.google.com/p/selenium/downloads/detail?name=selenium-remote-control-1.0.2.zip)

然后将 selenium-remote-control-1.0.2/selenium-server-1.0.2/selenium-server-standalone-1.0.2.jar 解压到名为“selenium-server”的目录中，并在Inspector 的 Selenium 选项窗口。

# c# - 动态变化的背景网格

> ID：13048379
> 
> 赞同：-1
> 
> 时间：2012-10-24T11:32:50.263
> 
> 标签：c#, windows-phone-7, xaml

我想动态更改包含图像和文本块的网格的背景，具有特定的持续时间和漂亮的动画（例如瓷砖），假设每 30 秒从通量 XML。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:34:00.240

使用来自[coding4fun](http://coding4fun.codeplex.com/)的平铺控制。看[这里](http://www.windowsphonegeek.com/articles/Getting-Started-with-the-Coding4Fun-toolkit-Tile-Control)

对于动态更新： 1\. 创建调度程序计时器并在回调（或）中更新 tile 属性 2\. 将 tile 背景依赖属性绑定到 viewmodel 中的 Image 源属性。只要你想办法更新视图模型，用户界面就会刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:29:31.463

你试过一种方法吗？你在网上搜索过吗？

对于瓷砖效果（以及更多效果......），您想使用[Telerik Rad 控件](http://www.telerik.com/products/windows-phone.aspx)（名为[HubTile](http://www.telerik.com/products/windows-phone/overview/all-controls.aspx#hubtile)的动画）但不是免费的......您想尝试试用版 :)

# ant - JaCoCo Selenium 测试代码覆盖率并使用 Ant 导入 Sonar

> ID：13048380
> 
> 赞同：3
> 
> 时间：2012-10-24T11:32:49.927
> 
> 标签：ant, selenium, jenkins, sonarqube, jacoco

我正在通过 Ant 运行声纳任务，由 Jenkins 在 RHEL 环境中触发。我成功地使用 Cobertura 进行 Junit 代码覆盖和 Surefire 进行报告。声纳可以很好地导入 Surefire 报告。

但是，现在我在 Jenkins 中使用 Ant 运行 Selenium 测试。我想向 Sonar 报告代码覆盖率和测试结果。显然我需要分析代码覆盖率和报告测试的 JaCoCo 插件。我认为对于单元测试，Jenkins 完成了这项工作，Sonar 只将报告导入到它自己的存储库中。

我对如何实际做到这一点感到困惑。网页[http://www.sonarsource.org/measure-coverage-by-integration-tests-with-sonar-updated/](http://www.sonarsource.org/measure-coverage-by-integration-tests-with-sonar-updated/)引用 JaCoCo 页面[http://www.eclemma.org/jacoco/trunk/doc/蚂蚁.html](http://www.eclemma.org/jacoco/trunk/doc/ant.html)。我不确定要执行哪些步骤。我需要覆盖目标吗？我应该只启动代理吗？我在 Ant 的哪个位置启动代理？我需要倾倒东西吗？

我真的很感谢我能得到的所有帮助，谢谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:33:56.873

Sonar 3.3 有一个新功能，可以结合单元测试和集成测试生成的代码覆盖率指标。这是通过使用两个属性来详细说明[jacoco](http://www.eclemma.org/jacoco/)生成的两个不同的报告文件来完成的：

```
#Tells Sonar where the unit tests code coverage report is
sonar.jacoco.reportPath=reports/jacoco/jacoco-ut.exec

#Tells Sonar where the integration tests code coverage report is
sonar.jacoco.itReportPath=reports/jacoco/jacoco-it.exec 
```

Sonar 示例项目有一个针对 ANT 的集成测试示例：

*   [https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/it/ant/it-jacoco-ant](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/it/ant/it-jacoco-ant)

不幸的是，它没有给出运行实际测试的示例，而只是展示了如何配置 ANT 构建以加载数据。

最后，[Sonar 文档](http://docs.codehaus.org/display/SONAR/Code+Coverage+by+Integration+Tests)提供了更多详细信息以及示例项目的链接。

# c++ - 具有三个参数的 C++ 递归二进制搜索

> ID：13048381
> 
> 赞同：3
> 
> 时间：2012-10-24T11:32:55.567
> 
> 标签：c++, parameters, binary-search

我 99% 确定我的问题是每次开始时我都将其设置为零。但我不确定如何保持低指数始终代表低指数，而不管我的递归深度如何。如果它准确地告诉我低指数的指数，我认为我不会有问题。

到目前为止，这是我的代码：

```
int recBSearch(vector<int> v, int size, int item)
{
    int index = size / 2;
    int curr = v[index];
    int low = 0;
    int high = size -1;
    if (v[index] == item)
        return index;
    else if (v[index] > item)
    {
        high = index;
        index = (high+low)/2;
        size = high - low;
        return recBSearch(v, size, item);
    }
    else if (v[index] < item)
    {
        low = index;
        index = (high+low)/2;
        size = high - low;
        return recBSearch(v, size, item);
    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:42:38.813

当您尝试在向量的上半部分进行搜索时，这将不起作用，因为您真正需要创建的是向量的切片。

已经有二分搜索，但如果您决定自己编写，请在参数中使用迭代器范围。（您可以传入两个普通迭代器或一个提升范围）。

如果找不到其他迭代器位置，则需要 -1，因此在切片（迭代器范围）中，您需要指定起始索引号以防找到它。

作为替代，您还可以传递向量（通过 const 引用）和您希望搜索的范围。

您的最后一行无法访问。相反，它应该是您进行任何评估之前递归的终止条件。（如果您的范围为空）

通过引用传递和使用索引号（最简单）进行迭代的版本如下所示：

```
int recBSearch( std::vector<int> const& vec, int start, int end, int value )
{
    if( start == end )
    {
       return -1;
    }
    int index = (start + end) / 2;
    // continue from here
} 
```

`end`将指示“过去最后一个元素”，因此如果向量的大小为 5，则第一次迭代将传递 0 和 5。如果向量为空，则传递 0 和 0。

作为练习，“可以用 3 个参数完成”吗？

是的...

```
 typedef std::vector<int>::const_iterator citer;
 int recBSearch( citer start, citer end, int value )
 {
    if( start == end )
    {
       return -1;
    }
    citer middle = start + (end-start)/2;
    if( *value == *middle )
    {
       return middle - start;
    }
    else if ( *value < *middle )
    {
       return recBSearch( start, middle, value );
    }
    else // note the change here
    {
        int res = recBSearch( middle+1, end, value );
        if( res == -1 )
           return -1;
        else
           return res + 1 + (middle-start);
    }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:41:20.467

如果你想递归，你的方法需要将搜索范围作为参数。否则，假设您始终将完整向量提供给函数，您将无法跟踪在粗略调用中搜索的位置。

所以你的方法签名应该是这样的：

```
int recBSearch(vector<int> v, int first, int last, int item) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:41:11.480

二进制搜索基本上通过将您的范围分成两半并在每一半中搜索来工作。您的代码显示您在两个分支的下半部分进行操作。您需要在第二个中将向量的上半部分传递给递归调用，`v`而不是.`else if``size/2``size`

# javascript - 反转 jquery 淡入淡出滑动面板

> ID：13048386
> 
> 赞同：2
> 
> 时间：2012-10-24T11:33:14.107
> 
> 标签：javascript, jquery, panel, slide, visible

关于关于 jquery 淡入淡出滑动面板的帖子（http://stackoverflow.com/q/10061847/1688202）。

我想知道该方法是否可以保留？这样内容面板将是标准可见的，并且在单击时消失。

它试图更改 JQuery 代码中的一些变量，但我没有成功地做到这一点。

下面的代码由**Shef** (http://stackoverflow.com/users/645186/shef)编写

**由蝙蝠侠解决**

```
.panel.default {
    display:block;
}
.panel.default .content{
    display:block;
} 
```

到 CSS，并将类默认值添加到加载页面时要显示的面板，例如

```
<div class="panel home default"> 
```

[http://jsfiddle.net/nhEn6/](http://jsfiddle.net/nhEn6/)

### 1.CSS

```
div.panel {
    display:none;
    position: absolute;
    top: 0;
    width:70%;
    right:0%;
    height: 100%;
    z-index: 3;
    margin: 0;
    overflow:hidden;
    background-color:black;
}
.panel div.content {
    display:none;
    font-family:arial;
    color:white;
    padding:50px;
    overflow:hidden;
}
span.close {
    position:absolute;
    right:10px;
    top:15px;
    cursor:pointer;
}​ 
```

### 2\. 标记

```
<ul id="menu">
    <li><a id="home" href="#">Home</a></li>
    <li><a id="about-me" href="#">About Me</a></li>
</ul>

<div class="panels">
    <div class="panel home">
        <div class="content">
            <span class="close">X</span>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis id ligula elit, vitae tincidunt massa. Vestibulum quis tempus lectus. Vestibulum diam dolor, tristique eget tincidunt eu, posuere nec nulla. Nulla a sollicitudin diam. Nunc venenatis dui in turpis ultricies semper. Nulla justo nibh, volutpat nec rutrum id, viverra ac nulla. Maecenas elit felis, rhoncus sit amet imperdiet eget, ultricies ut lorem. Praesent sed felis diam</p>
        </div>
    </div>
    <div class="panel about-me">
        <div class="content">
            <span class="close">X</span>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis id ligula elit, vitae tincidunt massa. Vestibulum quis tempus lectus. Vestibulum diam dolor, tristique eget tincidunt eu, posuere nec nulla. Nulla a sollicitudin diam. Nunc venenatis dui in turpis ultricies semper. Nulla justo nibh, volutpat nec rutrum id, viverra ac nulla. Maecenas elit felis, rhoncus sit amet imperdiet eget, ultricies ut lorem. Praesent sed felis diam</p>
        </div>
    </div>
</div> 
```

### 3\. jQuery

```
$(document).ready(function() {
    var $panels = $('.panels > .panel');
    $('#menu > li').on('click', 'a', function() {
        $panels.filter('.'+this.id).trigger('togglePanel');
    });
    $panels
        .on('togglePanel', function(){
            var $this           =   $(this)
              , $activePanels   =   $panels.filter(':visible').not($this);
            if ($activePanels.length) {
                $activePanels
                    .one('panelHidden', function(){
                        $this.is(':visible')
                        ? $this.trigger('hidePanel')
                        : $this.trigger('showPanel');
                    })
                    .trigger('hidePanel');
            } else {
                $this.is(':visible')
                ? $this.trigger('hidePanel')
                : $this.trigger('showPanel');
            }
        })
        .on('hidePanel', function(){
            var $this = $(this);
            $this.find('.content').fadeOut(500, function() {
                $this.animate({
                    'width': 'hide'
                }, 1000, function(){
                    $this.trigger('panelHidden');
                });
            });
        })
        .on('showPanel', function(){
            var $this = $(this);
            $this.animate({
                'width': 'show'
            }, 1000, function() {
                $this.find('.content').fadeIn(500, function(){
                    $this.trigger('panelShown');
                });
            });
        });
    $panels.find('.content .close').on('click', function() {
        $(this).closest('.panel').trigger('togglePanel');
    });
});​ 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:46:26.340

只需添加：

```
.panel.default {
    display:block;
}
.panel.default .content{
    display:block;
} 
```

到 CSS，并将类添加`default`到加载页面时要显示的面板，例如`<div class="panel home default">`

[http://jsfiddle.net/nhEn6/](http://jsfiddle.net/nhEn6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:50:47.600

你可以加

```
style="display:block;" 
```

内联到您要默认显示的 html 元素。

您需要将其添加到`panel`和`content`类中。

# javascript - 根据谷歌地图上的路线制作折线

> ID：13048387
> 
> 赞同：0
> 
> 时间：2012-10-24T11:33:17.097
> 
> 标签：javascript, google-maps

我需要在涉及多个航点的谷歌地图中创建一条路线，但谷歌的 API 不允许超过 23 个航点进入一条路线。作为一种编码解决方案，以便使用折线添加标记并在标记之间绘制路线。该代码运行良好，但在某一点停止生成一半的路线，有人知道这是否更多的是谷歌地图的限制？源代码：

```
<html><head><meta name="viewport" content="initial-scale=1.0, user-scalable=yes" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="PolylineEncoder.js"></script>
<script type="text/javascript">

var geocoder;
var directionsService = new google.maps.DirectionsService();
var map;
var trafficLayer;
var bikeLayer;
var poly;
var LocationsMarkers = []; 
var Employees =[];
var latlngCenter;

function GetMarkers(){
  for (var i = 0; i < Employees.length; i++) {
    var Employee = Employees[i];
    var myLatLng = new google.maps.LatLng(Employee[1], Employee[2]);

    // Add the location to vector for routing
    LocationsMarkers.push(new google.maps.LatLng(Employee[1], Employee[2]));

    // Add a marker
    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        title: Employee[0],
        zIndex: Employee[3]
    });
  }

  // If the length of LocationMarkers > 1, i'm get the routes and i create the polyline.
  if (LocationsMarkers.length > 1){

      var polyOptions = {
        strokeColor: '#000000',
        strokeOpacity: 1.0,
        strokeWeight: 3
      }
      poly = new google.maps.Polyline(polyOptions);
      poly.setMap(map);

      for (var a = 0; a < LocationsMarkers.length; a++) {
          calcRoute(LocationsMarkers[a], LocationsMarkers[a+1]);
      }
  }
}

// calculate the route on the markers.
function calcRoute(start, end) {

    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.WALKING
    };
    var path = poly.getPath();        
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
            for (var i = 0; i < response.routes.length; i++) {
               for (var i2 = 0; i2 < response.routes[i].legs.length; i2++) { 
                 for (var i3 = 0; i3 < response.routes[i].legs[i2].steps.length; i3++) {              
                   // add the start and end location by the legs of routes on the path to the polyline
                   path.push(response.routes[i].legs[i2].steps[i3].start_location);
                   path.push(response.routes[i].legs[i2].steps[i3].end_location);
                 }
               }
            }
    }
    });
}

function TrafficOn()     { trafficLayer.setMap(map); }
function TrafficOff()    { trafficLayer.setMap(null); }
function BicyclingOn()   { bikeLayer.setMap(map); }
function BicyclingOff()  { bikeLayer.setMap(null);}
function StreetViewOn()  { map.set("streetViewControl", true); }
function StreetViewOff() { map.set("streetViewControl", false); }

function initialize() {
    geocoder = new google.maps.Geocoder();

    CollectData();

    var myOptions = {
       zoom: 18,
       center: latlngCenter,
       mapTypeId: google.maps.MapTypeId.ROADMAP
    }; 

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    trafficLayer = new google.maps.TrafficLayer();
    bikeLayer = new google.maps.BicyclingLayer();
    GetMarkers();
}

function CollectData(){
 // In this example I used only 20 markers, but there will be situations where I have  to show more than 50\.          
 Employees = [["1",-20.14669,-44.888862 , 1],
            ["2",-20.1454,-44.892467 , 2],
            ["3",-20.14403,-44.890579 , 3],
            ["4",-20.142741,-44.886716 , 4],
            ["5",-20.143668,-44.885922 ,5],
            ["6",-20.14256,-44.885579  ,6],
            ["7",-20.141512,-44.885879 ,7],
            ["8",-20.140465,-44.885997 ,8],
            ["9",-20.138722,-44.88545  ,9],
            ["10",-20.137886,-44.887071,10],
            ["11",-20.137201,-44.891106,11],
            ["12",-20.137483,-44.892157,12],
            ["13",-20.138047,-44.893251,13],
            ["14",-20.138631,-44.894303,14],
            ["15",-20.139296,-44.895311,15],
            ["16",-20.138208,-44.895204,16],
            ["17",-20.136476,-44.895569,17],
            ["18",-20.137765,-44.897049,18],
            ["19",-20.138067,-44.899238,19],
            ["20",-20.138994,-44.900461,20] ];

  latlngCenter = new google.maps.LatLng(Employees[0][1],Employees[0][2]);
}
</script></head>
   <body onload="initialize()">
        <div id="map_canvas" style="width:100%; height:100%">
        </div>
   </body>
</html> 
```

![地图图片](../Images/b602f96968bf1b7e51a060cae905e8d2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:11:43.280

您应该检查 DirectionsService 的返回状态。它正在返回 OVER_QUERY_LIMIT。

请注意，[Google Maps API v3 中的最大航点数](https://developers.google.com/maps/documentation/javascript/directions#Waypoints)为 8（加上起点和终点），除非您付费（Maps API for Business）。

如果您检查状态并在错误为 OVER_QUERY_LIMIT 的情况下延迟重试，它将最终完成：

[http://www.geocodezip.com/geoxml3_test/v3_directions_multipleWayPts.html](http://www.geocodezip.com/geoxml3_test/v3_directions_multipleWayPts.html)

# javascript - 寻找背景全景插件

> ID：13048389
> 
> 赞同：3
> 
> 时间：2012-10-24T11:33:26.703
> 
> 标签：javascript, jquery, css

我正在尝试找到一个插件或一行代码来帮助我实现对背景图像的效果（鼠标跟随的滚动）：

[http://teddavis.org/](http://teddavis.org/)

有没有人认为在 jQuery 中有类似的方法可以做到这一点，所以我可以**添加一些缓动**并使其更平滑。

甚至，如果您知道如何对那个代码进行缓和，我也将不胜感激！

提前致谢！

泰国

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:39:45.720

如果您检查页面的来源，您会注意到：

```
<script type="text/javascript" charset="utf-8"> 

    // Simple follow the mouse script
    var divName = 'pano'; // div that is to follow the mouse
                           // (must be position:absolute)
    var offX = -5500;          // X offset from mouse position
    var offY = -000;          // Y offset from mouse position

    function mouseX(evt) {
        if (!evt) evt = window.event;
        if (evt.pageX) return evt.pageX;
        else if (evt.clientX) return evt.clientX + (document.documentElement.scrollLeft ?  document.documentElement.scrollLeft : document.body.scrollLeft);
        else return 0;
    }
    function mouseY(evt) {
        if (!evt) evt = window.event;
        if (evt.pageY) return evt.pageY;
        else if (evt.clientY) return evt.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop); 
        else return 0;
    }
    function follow(evt) {
        if (document.getElementById) {
            var obj = document.getElementById(divName).style;
            obj.visibility = 'visible';
            obj.left = (parseInt(mouseX(evt)*-4)+offX) + 'px';
        }
    }
    document.onmousemove = follow;      
    function stopscroll(){
        document.onmousemove = stop;
    }

</script> 
```

似乎很容易实现。只需确保变量 divName 引用您的图像或 DIV

# objective-c - 使用自动引用计数或不使用

> ID：13048398
> 
> 赞同：2
> 
> 时间：2012-10-24T11:33:48.130
> 
> 标签：objective-c, automatic-ref-counting

我目前正在学习 Objective C，到目前为止，我一直在我的所有项目中使用自动引用计数。然而，在与一些同事交谈后，在查看了一些在线论坛后，我注意到关闭自动引用计数并手动管理内存的趋势。

我一直想知道 ARC 是否做得足够好，或者它是否偶尔会掉球。手动分配/释放内存更有效吗？有些人会因为习惯而关闭 ARC 吗？

我应该继续使用 ARC 吗？如果没有，是否有人知道未来 ARC 会足够好使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T11:35:56.987

简单的答案：使用 ARC。

长答案：说真的，只需使用 ARC。

我知道没有令人信服的理由不使用 ARC。有用。它比手动内存管理要好。用它。也就是说，您仍然应该知道什么是内存管理以及引用计数是如何工作的。ARC 根本没有改变这种行为，它只是添加了 required `retain`, `release`&`autorelease`调用以遵守使用 Objective-C 时已成为标准的约定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T11:39:24.087

ARC 在内存处理方面做得比大多数人要好得多。仅在某些情况下最好关闭 ARC，但我怀疑我们中的许多开发人员是否也需要。

另请参阅： [To ARC or not to ARC？优缺点都有什么？](https://stackoverflow.com/questions/8760431/to-arc-or-not-to-arc-what-are-the-pros-and-cons)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T11:46:43.383

当宣布 ARC 时，我很想避免它。原因是，我花了很多时间使用 Java，并且已经看到自动内存管理能够让程序员忘记对象关系的逻辑结构，并诱导他们创建与“意大利面条代码”等效的 OOP。

到目前为止，我所看到的 ARC 并不支持这种恐惧。由于`weak`和`strong`指定，人们仍然需要考虑对象生命周期，但需要更少的输入。当我在这里回答那些在 ARC 环境中存在内存管理问题的人的问题时，这是因为非 ARC 也存在问题的代码。

我现在看不出有什么坏处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T11:42:48.067

在大多数情况下，使用 ARC 应该比手动处理内存管理更有效。如果您不需要旧 iOS 版本的兼容性，请使用 ARC，它会比您做得更好。即使有一些不支持 ARC 的旧框架，您也可以仅针对这些文件停用它。

这个博客大约有一年的历史，但解释得很好： http: [//longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/](http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T11:54:25.320

你的同事错了，或者更有可能他们不想转换为 ARC，因为担心他们的专业知识可能会在下一次洗牌到来时失去管理。

使用 ARC 和 64 位运行时将*认真*清理您的代码。我在 ARC 项目中使用的行数减少了约 30%。从长远来看，您的项目可以节省几天甚至几周的时间。就我个人而言，我不需要在我的任何 ARC 项目中追踪自动发布的 CALayer。

此外，因为编译器使用生命周期限定符来注释对象的生命周期，它通常比你做得更好。在高度嵌套的代码中，您最不想考虑的是发布优化。

ARC 将引导你成为一名更好的程序员，但如果没有，你将走在比以前更好的道路上。例如，release/retain 代码已经让人们多年来摆脱了对合成 setter 的滥用（即：仅仅因为`self.property = property`比 更好而创建一个属性`[_property release], _property = [newProperty retain]`）。我受够了通过 self.property 看到对 setter 的显式调用。因为 ARC 将保留和释放从您手中拿走，所以没有令人信服的理由滥用属性设置器，您的代码开始变得更加明显并且气味更少。

希望这可以帮助！

# perl - 在perl中将元素插入哈希值

> ID：13048399
> 
> 赞同：1
> 
> 时间：2012-10-24T11:33:54.997
> 
> 标签：perl, perl-data-structures

我有一个数组。数组中的元素在它们之间包含分号。

数组看起来像这样：

```
@Array = { "AUT;E;1",
           "AUT;E;2",
           "CHE;A;1",
           "CHE;C;4"
         }; 
```

我想使用';'分割数组元素 （分号）作为分隔符。

通过使用哈希值，我想将“AUT”存储为键，并在其下存储 E => 1 和 E => 2。

即我需要哈希作为

```
%HashOfElem = (
         'AUT' => {
                     'E' => 1,
                     'E' => 2
                  },

         'CHE' => {
                     'A' => 1,
                     'C' => 4
                  }
              ) 
```

为此，我编写了以下代码，但其行为与预期不符:(

```
foreach(@Array)
{
    my @TmpArray = split(/;/,$_);

    %HashOfElem = (
              $TmpArray[0] => {
                                  $TmpArray[1] => $TmpArray[2]
                              }
                  ); 
```

}

如果我的方法是错误的，那么 perl 中的哪种数据结构可以用来实现上述目的？

请帮忙..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T11:40:28.207

请注意，您对@Array 的分配错误，它应该是（括号而不是大括号）：

**根据评论更新：**

```
my @array = (
    "AUT;E;1",
    "AUT;E;2",
    "CHE;A;1",
    "CHE;C;4"
); 
```

所以你的脚本变成：

```
my @array = (
    "AUT;E;1",
    "AUT;E;2",
    "AUT;E;2",
    "CHE;A;1",
    "CHE;C;4"
);
my %hash;
my %dups;
foreach (@array) {
    next if exists $dups{$_};  # skip this line if already stored
    $dups{$_} = 1;
    my @tmp = split/;/;
    push @{$hash{$tmp[0]}{$tmp[1]}}, $tmp[2];
}
say Dumper\%hash; 
```

**输出：**

```
$VAR1 = {
          'CHE' => {
                     'A' => [
                              '1'
                            ],
                     'C' => [
                              '4'
                            ]
                   },
          'AUT' => {
                     'E' => [
                              '1',
                              '2'
                            ]
                   }
        }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:44:54.443

如前所述，哈希键必须是唯一的。解决此问题的一种方法是使每个内部哈希键指向该键的值数组：

```
use strict;
use warnings;

my @Array = ( 
    "AUT;E;1",
    "AUT;E;2",
    "CHE;A;1",
    "CHE;C;4"
);
my %HashOfElem;

foreach(@Array)
{
    my @TmpArray = split(';',$_);
    print "@TmpArray\n";

    push @{$HashOfElem{$TmpArray[0]}{$TmpArray[1]}}, $TmpArray[2];
}

#show variable.
use Data::Dumper;
print Dumper %HashOfElem; 
```

# .net - 使用 mono 来提高 .Net XML 序列化器的性能

> ID：13048404
> 
> 赞同：2
> 
> 时间：2012-10-24T11:34:04.573
> 
> 标签：.net, xml, mono, porting

我尝试了 Mono - 它在 1 毫秒内创建序列化程序，而 .NET 4.0 则为 60。可能有人将 Mono 序列化程序生成器移植为可重用的库？或者如果我尝试移植，可以给我要使用的 Mono 程序集的确切列表吗？

```
 using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.Serialization;

namespace serialization
{
    [Serializable]
    public sealed class UserCredentials1
    {
        public string Username { get; set; }
        public string Password { get; set; }

        public override string ToString()
        {
            return string.Format("Username: {0}, Password: {1}", Username, Password);
        }
    }

    [Serializable]
    public sealed class UserCredentials2
    {
        public string Username { get; set; }
        public string Password { get; set; }

        public override string ToString()
        {
            return string.Format("Username: {0}, Password: {1}", Username, Password);
        }
    }

    //.NET 4.0
    //native=60.757
    //compiled=2.2602
    //Username: CTTTOM, Password: WoEIPX6Qqf11j9vKn01bAA==

    //MONO:
    //mono serialization.exe
    //native=0.1589
    //compiled=0.1337
    //Username: CTTTOM, Password: WoEIPX6Qqf11j9vKn01bAA==

    class Program
    {
        static void Main(string[] args)
        {
            string xml1 = @"      " +
             @" CTTTOM" +
        @" WoEIPX6Qqf11j9vKn01bAA==" +
                 @"";

            string xml2 = @"" +
@" CTTTOM" +
@" WoEIPX6Qqf11j9vKn01bAA==" +
     @"";

            //warm up
            Type targetType1 = typeof(UserCredentials1);
            XmlSerializer nativeSerializer1 = new XmlSerializer(targetType1);
            Type targetType2 = typeof(UserCredentials2);
            nativeSerializer1.Deserialize(new XmlTextReader(new StringReader(xml1)));

            var native = new Stopwatch();
            native.Start();
            XmlSerializer nativeSerializer2 = new XmlSerializer(targetType2);
            native.Stop();
            Console.WriteLine("native=" + native.Elapsed.TotalMilliseconds);

            var compiled = new Stopwatch();
            compiled.Start();
            var de = nativeSerializer2.Deserialize(new XmlTextReader(new StringReader(xml2)));
            compiled.Stop();
            Console.WriteLine("compiled=" + compiled.Elapsed.TotalMilliseconds);
            Console.Write(de.ToString());
            Console.ReadKey();
        }
    }
} 
```

**编辑**

我迈出了迁移的第一步，请参阅[https://github.com/asd-and-Rizzo/mono](https://github.com/asd-and-Rizzo/mono)。使用“mono serialization.exe”对通用对象列表进行测试，单击鼠标运行 .NET 序列化和移植的 Mono 序列化。移植版本的默认序列化程序生成速度比 .NET 快约 10 倍。

**编辑**

在 MSDN 中找到关于 XML 序列化配置 .NET 4.5 (http://msdn.microsoft.com/en-us/library/ms229754.aspx)：

useLegacySerializationGeneration 指定 XmlSerializer 是否使用遗留序列化生成，通过将 C# 代码写入文件然后将其编译为程序集来生成程序集。默认值为假。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:49:31.200

制作了可以针对 .NET 3.5 构建和使用的端口。

```
 extern alias mono;
using XmlSerializer = mono::System.Xml.Serialization.XmlSerializer; 

```

[https://github.com/asd-and-Rizzo/mono/blob/master/mcs/class/System.XML/Mono.Xml.Serialization.sln](https://github.com/asd-and-Rizzo/mono/blob/master/mcs/class/System.XML/Mono.Xml.Serialization.sln)

Mono 不编译序列化程序。

尝试托管 Mono.CSharp.dll 来编译序列化程序可能会很有趣。

**编辑**

我添加了几个测试可以转到 Mono 主干。我所有与端口相关的更改都在 EXTEND_EMBRACE_XMLSER 编译符号下。

我们的产品测试指出 Mono 序列化和反序列化 .NET 不序列化和反序列化。对于我们的情况来说甚至更好，如果预期错误，蝙蝠可能会成为其他人的问题。所有测试都提交给 System.Xml 测试。

```
public class HardlySerializableObject
{
    private HardlySerializableObject() { }

    public HardlySerializableObject(object value) { }

    public string Property1 { get { return "^_^"; } }

    public int Property2 { get; private set; }

    public static HardlySerializableObject Create()
    {
        return new HardlySerializableObject("any");
    }

    protected bool Equals(HardlySerializableObject other)
    {
        return Property2 == other.Property2 && Property1 == other.Property1;
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != this.GetType()) return false;
        return Equals((HardlySerializableObject)obj);
    }

    public override int GetHashCode()
    {
        return Property2;
    }
} 
```

**编辑2**

何时序列化 A 类型的一个对象并尝试从该字符串反序列化 B 类型的其他对象然后：

*   .NET 引发 InvalidOperationException。
*   Mono 抛出 XmlException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:09:58.773

单声道并不是真的更快。那不一样。

似乎 Mono 首先通过反射进行 xml 序列化/反序列化（因此实例化序列化程序很快，但实际上用它进行序列化很慢），然后它生成临时程序集以在后台快速序列化。

从我的使用来看，单声道通常也无法创建临时程序集。这意味着您的序列化/反序列化将始终比标准的 .NET 慢得多。

# javascript - 有没有办法让这些“画布”线在一个循环中绘制？

> ID：13048408
> 
> 赞同：0
> 
> 时间：2012-10-24T11:34:16.007
> 
> 标签：javascript, canvas

我在 html5 画布中模拟翻页效果。

在每一页上，我都在画线来模拟横格纸。

这些线是在翻页时绘制的，为了提供自然的视角，我使用基于几个因素（翻页进度、靠近页面中心等...）的二次曲线来绘制它们

效果非常自然，看起来很棒，但我正在寻找优化它的方法。

目前，我每条线绘制两次，一次用于实际线，一次用于该线下方 1px 的微小突出显示。我这样做是这样的：

```
// render lines (shadows)

          self.context.lineWidth = 0.35;

          var midpage = (self.PAGE_HEIGHT)/2;

          self.context.strokeStyle = 'rgba(0,0,0,1)';
          self.context.beginPath();

          for(i=3; i < 21; i++){
             var lineX = (self.PAGE_HEIGHT/22)*i;
             var curveX = (midpage - lineX) / (self.PAGE_HEIGHT);
             self.context.moveTo(foldX, lineX);                                       
             self.context.quadraticCurveTo(foldX, lineX + ((-verticalOutdent*4) * curveX), foldX - foldWidth - Math.abs(offset.x), lineX + ((-verticalOutdent*2) * curveX));

          }
          self.context.stroke();

 // render lines (highlights)
         self.context.strokeStyle = 'rgba(255,255,255,0.5)';
         self.context.beginPath();

         for(i=3; i < 21; i++){
              var lineX = (self.PAGE_HEIGHT/22)*i;
              var curveX = (midpage - lineX) / (self.PAGE_HEIGHT);
              self.context.moveTo(foldX, lineX+2);                                       
              self.context.quadraticCurveTo(foldX, lineX + ((-verticalOutdent*4) * curveX) + 1, foldX - foldWidth - Math.abs(offset.x), lineX + ((-verticalOutdent*2) * curveX) + 1);                                          
         }
         self.context.stroke(); 
```

如您所见，我正在打开一条路径，遍历每一行，然后绘制路径。然后我对“突出显示”行重复整个过程。

有没有办法将这两个操作组合成一个循环**，而无需**在循环中单独绘制每一行，这实际上会贵得多？

这是一个微优化，我很清楚这一点。然而，这个项目对我来说是一个个人练习，目的是学习 html5 画布性能最佳实践/优化。

提前感谢您的任何建议/意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:13:18.950

路径可以按你喜欢的次数被抚摸，当你调用它们时它们不会被清除`.stroke()`，所以：

1.  创建你的路径（如上）
2.  `.stroke()`它
3.  翻译上下文
4.  改变颜色
5.  `.stroke()`又来了

**编辑**自己试过这个 - 它没有工作 - 路径的第二个副本没有注意到坐标空间的翻译:(

如果使用（草案）规范中记录的路径而不是“当前默认路径”创建路径，它显然*会*`new Path()`起作用，但 Chrome 似乎还不支持。

# android - Android中布局的前景图像

> ID：13048413
> 
> 赞同：1
> 
> 时间：2012-10-24T11:34:27.040
> 
> 标签：android, layout, android-edittext

嗨，我正在处理需要用户详细信息（如名字、姓氏、电话、电子邮件等）的项目。我使用线性布局，在线性布局中我设置了背景，每个用户详细信息都有 textview 和 edittext。在输入应该是这样的用户详细信息时。

![在此处输入图像描述](../Images/96f0beea0108def09b39c3c0d6298881.png)

当我点击查看应该是这样的用户详细信息时。

![在此处输入图像描述](../Images/6d213a8e71a2092f1fd2fb2a30d628e1.png)

请告诉如何实现这一目标。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:37:28.730

您是否将 EditText 的背景设置为 null ？同样对于 EditText 中的“名字”文本，使用以下属性：

```
android:hint="First Name" 
```

这当然应该从您的 strings.xml 文件中获取字符串以便于翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:37:27.580

那么你有不同的方法来实现这一点。但一种非常简单的方法是：您可以放置​​一个 textview 和一个 edittext。当您希望 editText 出现时，您将其可见性设置为可见，并将 textview 的可见性设置为消失，反之亦然。

简单有效。

# java - ORACLE 获取 3 个字母的日期

> ID：13048417
> 
> 赞同：1
> 
> 时间：2012-10-24T11:34:34.837
> 
> 标签：java, database, oracle

我有一个将一些数据插入到表中的程序。

在我的表格中，我显示了如下输出的日期和星期数（丹麦语）

*至乌格 42*

TO 是当天的名称

Uge 是星期

42 是周数。

我想做的是让 TO 成为 TOR（Torsdag 的缩写，这是星期四的丹麦语）

我的代码目前看起来像这样：

```
"DY' || ' ' || '\"Uge\" '|| 'IW"; 
```

Orcle 中是否有任何 whay 可以将日期作为 3 个字母的字符串获取，还是我必须制作字符串的子字符串并更改它？

**更新我的程序中添加的 SQL 代码**

```
String sql =
            "SELECT                                                                     " +
            "   TO_CHAR(MIN(TIDSPUNKT),'"+getDateDescriptionFormat(when)+"') AS PERIOD, " +
            "   NVL(QUEUE,' ') AS QUEUE,                                                " +
            "   NVL(SUM(ANTAL_KALD),0) AS CALLS,                                        " +
            "   NVL(SUM(ANTAL_BESVARET),0) AS ANSWERED_CALLS,                           " +
            "   NVL(SUM(BESVARET_25_SEK),0) AS ANSWERED_CALLS_25_SEC,                   " +
            "   NVL(SUM(INTERN_KALD),0) AS INTERNAL_CALLS                               " +
            "FROM                                                                       " +
            "   KS_DRIFT.PERO_NKM_KØ_OVERSIGT                                           " +
            "WHERE                                                                      " +
            "   TIDSPUNKT >= '"+getStartDate(start,when)+"' AND                         " +
            "   TIDSPUNKT <= '"+ slut+"' AND                                            " +
            "   TO_CHAR(TIDSPUNKT,'DY') NOT IN ('AB')                                   " +
            "GROUP BY                                                                   " +
            "   TRUNC(TIDSPUNKT,'"+getDateFormatString(when)+"'),                       " +
            "   QUEUE                                                                   " +
            "ORDER BY                                                                   " +
            "   PERIOD 
```

**获取日期描述格式：**

```
private String getDateDescriptionFormat(char when){
        if (when == 'D')return "DY' || ' ' || '\"Uge\" '|| 'IW";
        if (when == 'W')return "\"Uge\" '||'IW";
        if (when == 'M')return "Mon.' || ' ' || 'YYYY";
        if (when == 'Y')return "YYYY";
        return null;
    } 
```

请注意，我没有让我的前同事做这个代码，它很乱！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:37:43.413

我认为您应该将 a 保存`Date`在一`DATE`列中，并将所有其他内容留给渲染。这些是显示问题。

查询 a`java.sql.Date`并使用`java.text.DateFormat`将其转换为您想要的任何字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:52:56.153

看起来没有其他格式模型可以满足您的需求。'DY' 给出了“一天的缩写名称”——在我的英语系统中，这意味着一个三个字母的缩写，但我猜在你们的语言中标准缩写是两个字母。

我建议不要使用子字符串，而是转换为一周中的数字日期，然后简单地进行映射，例如（使用英文缩写）：

```
CASE TO_CHAR(sysdate,'D')
  WHEN 1 THEN 'SUN'
  WHEN 2 THEN 'MON'
  WHEN 3 THEN 'TUE'
  <et cetera>
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:38:22.493

例子：

```
select to_char(sysdate,'YYYY-MON-DD') from dual; 
```

# jquery - jquery.validate 似乎不适用于名称值包含点的某些输入，即 RegisterModel.Pssword

> ID：13048424
> 
> 赞同：0
> 
> 时间：2012-10-24T11:34:53.087
> 
> 标签：jquery, asp.net, asp.net-mvc, jquery-validate, unobtrusive-validation

在我看来，如果我使用一个只有标量的模型，基本属性即 [RegisterModel] 一切正常。但是，如果我使用其中一个或多个属性设置为另一种 .net 复杂类型的视图模型类型，例如 [RegisterModelAndLogOnModel]，则生成的 HTML 无法与 jQuery 验证插件一起正常工作。使用 jQuery 1.7.2 它总是告诉我确认密码与密码不匹配，在 jQuery 1.8.2 中它只是简单地拒绝工作和错误。我现在已经将问题指向 RegisterModel.ConfirmPassword 输入。

```
 <input name="RegisterModel.Password" id="RegisterModel_Password" type="password" data-val="true" data-val-required="The Password field is required." data-val-length-min="6" data-val-length-max="100" data-val-length="The Password must be at least 6 characters long.">

<input name="RegisterModel.ConfirmPassword" id="RegisterModel_ConfirmPassword" type="password" data-val="true" data-val-equalto-other="*.Password" data-val-equalto="The password and confirmation password do not match."/> 
```

作品：

```
<div class="editor-label">
                @Html.LabelFor(m => m.Password)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.ConfirmPassword)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.ConfirmPassword)
                @Html.ValidationMessageFor(m => m.ConfirmPassword)
            </div> 
```

不工作：

```
<div class="editor-label">
                @Html.LabelFor(m => m.RegisterModel.Password)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.RegisterModel.Password)
                @Html.ValidationMessageFor(m => m.RegisterModel.Password)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.RegisterModel.ConfirmPassword)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.RegisterModel.ConfirmPassword)
                @Html.ValidationMessageFor(m => m.RegisterModel.ConfirmPassword)
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:11:46.157

生成的 HTML 属性之一，即`data-val-equalto-other="*.Password"`与 jQuery validate 插件一起使用`@Html.PasswordFor(m => m.RegisterModel.ConfirmPassword)`是不好的。我使用辅助方法生成 HTML 一次，复制整个内容并将辅助方法代码替换为静态 html，更改`data-val-equalto-other="*.Password"`为`data-val-equalto-other="RegisterModel\.ConfirmPassword"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:59:35.250

正如@Ryan Amies 指出的那样，jQuery 找不到这样的属性

```
$(form).find(":input[name='RegisterModel.Password']") 
```

它需要转义点（和一堆其他字符），即

```
$(form).find(":input[name='RegisterModel\.Password']") 
```

作为 MVC3 模板项目的一部分的 jquery.validate.unobtrusive.js 版本存在一个错误，即由于未转义嵌套属性而找不到嵌套属性。此错误已在使用 NuGet 的最新版本的 Microsoft.jQuery.Unobtrusive.Validation 包中得到修复。

此功能已添加到 jquery.validate.unobtrusive.js

```
function escapeAttributeValue(value) {
 // As mentioned on http://api.jquery.com/category/selectors/
 return value.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g, "\\$1");
} 
```

这导致

```
escapeAttributeValue('this!thing') // this\!thing 
```

这意味着不显眼的插件现在可以正确处理具有嵌套属性的表单

# html - 更改输入密码 onblur

> ID：13048427
> 
> 赞同：0
> 
> 时间：2012-10-24T11:35:09.327
> 
> 标签：html, forms

我尝试使用相同输入中的信息制作表单。它在所有输入中都可以正常工作，但是在密码中，如果它可以在用户输入密码时更改为点会更好。我希望它仅在用户输入密码时输入文本并更改为输入密码。问题出在最后一行代码中：

我在这里生活：http: [//jsfiddle.net/Nt9gx/](http://jsfiddle.net/Nt9gx/)

```
<form> 

<input type="text" name="name" value="name" 
    onfocus="if (this.value=='name') this.value = '';" 
    onblur="if (this.value=='') this.value = 'name';"  
/>

<input type="text" name="password" value="password"   
    onfocus="if (this.value=='password') this.value = '' type = password;" 
    onblur="if (this.value=='') this.value = 'password';"
           "if (this.value!=''|| 'password') type = password ;" 
/>

</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:39:30.390

**使用 HTML5 占位符**

要完成这项工作，您应该简单地使用 HTML5`placeholder`属性，如下所示：

```
<input type="password" name="password" placeholder="Password"> 
```

因为这将：

*   显示占位符，而没有插入文本或再次删除所有文本
*   它甚至在密码字段上也显示文本
*   无需使用 JavaScript

**顺便一提：**

*   您在最后一个输入中使用了两次`onblur`，这应该只发生一次
*   ~~最后一行在语法上是错误的，因为您需要在（单引号）而不是（双引号）中转义单词**密码**`'``"`~~（问题已更新）
*   最后一行使用了一个未定义的`password`变量`|| password)`
*   用于`type="password"`处理密码的输入字段，因为输入将是“不可见的”

**笔记：**

如果您仍想使用 JavaScript，则必须通过简单地更新 - 属性将输入从焦点和模糊事件更改`type="text"`为内部。`type="password"``type`

您可以这样做：

```
<input type="text" name="password" value="password"   
    onfocus="if (this.value == 'password') { this.value = '', this.setAttribute('type','password'); }" 
    onblur="if (this.value == '') { this.value = 'password', this.setAttribute('type','text'); }"
> 
```

演示： http: [//jsfiddle.net/2Ps8N/](http://jsfiddle.net/2Ps8N/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:38:20.903

```
<input type="text" name="name" value="name" 
    onfocus="if (this.value=='name') this.value = '';" 
    onblur="if (this.value=='') this.value = 'name';"  
/>

<input type="password" name="password" value="password"   
    onfocus="if (this.value=='password') this.value = '';" 
    onblur="if (this.value=='') this.value = 'password';"
    onblur="if (this.value!=''|| password) value = 'password';" 
/> 
```

你输入了一个双引号！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:43:40.320

您可以像这样更改密码输入：

```
<input type="text" name="password" value="password" type="password" 
    onfocus="if (this.value=='password') this.value = '';" 
    onblur="if (this.value=='') this.value = 'password';"
/> 
```

Yoc 可以在其中添加更多条件，`if (this.value=='')`但仅在其中执行此`onblur`操作，不要编写另一个`onblur`

你`this.value = "password"`在最后一行是错误的，你必须使用`'password'`而不是`"password"`

在最后一个 if 条件中，您有`password`在使用它之前未定义的参数。您应该`var password`在此之前定义 if 或者您应该更改此条件

# android - Android：水平视图滑动和切换活动

> ID：13048431
> 
> 赞同：0
> 
> 时间：2012-10-24T11:35:44.090
> 
> 标签：android

我是 Android 开发的新手。并要创建一个新的应用程序。在其中我需要在 Android 2.2 及更高版本中进行以下类型的导航。

[http://i.stack.imgur.com/wwG1Z.png](http://i.stack.imgur.com/wwG1Z.png)

[我在http://android-developers.blogspot.com/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)看到了一个教程

但他只是刷页面。没有像上图那样的标签。而且他正在更新一些文本视图，但我想在活动或布局之间切换。

我已经尝试了很多东西。ActionBarSherlock 它创造了许多错误。

我需要的是

developer.android.com/training/implementing-navigation/index.html

developer.android.com/shareables/training/EffectiveNavigation.zip

在上面的文件中 CollectionDemoActivity 是我真正在寻找 Android 2.2 及更高版本的东西。

如果有人有这样的项目，请分享代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:04:52.837

您可能想查看 Jake Wharton 的另一个项目[Viewpagerindicator](http://viewpagerindicator.com)。它提供了您所追求的功能。这是一起使用它们的教程[。](http://droidista.blogspot.se/2012/08/making-actionbarsherlock-and.html)[Styling Android](http://stylingandroid.com/)也有一些优秀的指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:50:07.317

[这](https://bitbucket.org/owentech/abstabsviewpager)是一个示例项目，用于将 ActionBarSherlock 与 ViewPager 一起使用以使选项卡和滑动在一起。有效，我用过。

# batch-file - 我如何在批处理脚本中运行它？（为了）

> ID：13048435
> 
> 赞同：1
> 
> 时间：2012-10-24T11:35:59.067
> 
> 标签：batch-file

如何在批处理脚本中执行以下命令？

```
for /L %i in (1,0,2) do (for /f "delims=^" %j in (commands.txt) do cmd.exe /c %j >> output.txt & del commands.txt) & ping -n 2 127.0.0.1 
```

它返回： j 不是预期的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:37:02.900

在批处理文件中，您必须将变量的`%`符号加倍：`for`

```
for /l %%i ... 
```

也同样`%j`如此。

这在文档中也有详细说明`help for`：

> 要`FOR`在批处理程序中使用该命令，请指定`%%variable`而不是`%variable`.

一开始几乎是正确的。

# java - @ManyToOne 和 @BatchSize

> ID：13048436
> 
> 赞同：9
> 
> 时间：2012-10-24T11:36:03.557
> 
> 标签：java, hibernate, hibernate-mapping, hibernate-annotations

我在一些旧代码中发现了奇怪的东西（至少对我来说）。

被注释的字段也被`@ManyToOne`注释了`@BatchSize`。

我一直认为`@BatchSize`注解只影响在类级别或集合（）上注解，并在迭代时`@OneToMany`影响**预取。**

但也许我错了，注释`@ManyToOne`会`@BatchSize`影响某些东西。我在文档中找不到答案。

`@ManyToOne`用注释`@BatchSize`有意义吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-20T12:09:52.853

我认为这个问题是指在同一领域结合`@ManyToOne`和，例如：`@BatchSize`

```
@ManyToOne
@BatchSize(size = 5)
private User owner; 
```

Hibernate 不支持这个用例，至少在使用注解时是这样。[文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-fetching-batch)中提到的批量获取的唯一用途是：

*   在集合字段上，即`@OneToMany`或`@ManyToMany`（但*不是* `@ManyToOne`）
*   在要获取的实体类上

例如：

```
@Entity
@BatchSize(size = 5)
public class User {
  ...
} 
```

后一种情况支持对所有用户类型的关系进行批处理，包括多对一关系。但是，使用实体类上的注释，不可能逐个字段地控制行为。

在 Hibernate 源代码中搜索所有用途，`@BatchSize`确认您的使用缺乏支持。从我在[AnnotationBinder.java](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/cfg/AnnotationBinder.java)中看到的，`@BatchSize`仅在实体类和具有某种注释的字段上检查`@XxxToMany`注释。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T12:01:54.563

`@ManyToOne``@BatchSize`仅当相应字段标记为`lazy`( `lazy=true`)时，关联才有意义。

实际上，如果该字段不是`lazy`，则根据定义，自从加载了封闭实体以来，它就已经加载了，因此数据库调用的问题不适用。

想象一个`Person`有一个`ShoesPair`元素集合（`ShoesPair`.class）的类，并且在这个集合中存在一个`owner`标记为惰性的字段（因为是可选的，并且在检索特定的一双鞋时并没有真正带来重要信息）。

一个人想要遍历**25**双鞋（25 个`ShoesPair`对象）以检索它们的所有者。

如果`owner`字段（对应一个人）仅用 注释`@ManyToOne`，则将有**25 个**选择到数据库。

但是，如果使用 注释，则只`@BatchSize(size=5)`会有**5**次调用，从而提高性能。

从[Hibernate 文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-fetching-batch)中，确切地说批量大小不仅适用于集合：

> 您**还可以**启用集合的批量获取。

Hibenate 尤其提到`@OneToMany`了案例，因为这些案例应用于 90% 的案例中标记为 的字段`lazy`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-25T12:46:18.250

用 Hibernate 解决 N+1 查询问题

1 使用带有 fetchMode 的条件查询

条件标准 = session.createCriteria(Customer.class); criteria.setFetchMode("联系人", FetchMode.EAGER);

2 HOL 获取连接

3 @BatchSize

@BatchSize 注释可用于定义在单个数据库查询中填充多少相同的关联。如果会话附加了 100 个客户，并且“联系人”集合的映射使用大小为 n 的 @BatchSize 进行注释。这意味着每当 Hibernate 需要填充惰性联系人集合时，它会检查会话，如果它有更多客户需要填充他们的联系人集合，它会获取最多 n 个集合。

```
@OneToMany(mappedBy="customer",cascade=CascadeType.ALL, fetch=FetchType.LAZY)
    @BatchSize(size=25)
    private Set<Contact> contacts = new HashSet<Contact>(); 
```

# javascript - Nodejs + expressjs在服务器超时后重播请求

> ID：13048437
> 
> 赞同：5
> 
> 时间：2012-10-24T11:36:06.100
> 
> 标签：javascript, node.js, express

我正在尝试通过在 node + express 应用程序中导入大量数据`app.get("/importdata" , callback)`。在超时并且如果请求未完成，它会再次重播请求并且我的服务器再次开始导入相同的数据。

我无法找到连接超时后重播请求的确切原因？

如果我将我的超时时间设置为一个巨大的数字，部分问题得到解决，但我不明白为什么再次播放请求？

提前非常感谢。

来自我的 server.js

```
app.get('/impdata', function(req, res){
req.connection.setTimeout(600000);
console.log("impstore--------------->");
Q.when( getData(req.data), function(resp){
    res.json(resp);
}); }); 
```

我的控制台上的片段

```
impstore--------------->
userid 
time stamp Wed Oct 24 2012 16:35:28 GMT+0530 (IST)
Listings got 100
userid 
ims 1
time stamp recursive
Listings got 200
userid 
ims 1
time stamp recursive
Listings got 300
userid 
ims 1
time stamp recursive
Listings got 400
userid 
ims 1
time stamp recursive
Listings got 500
userid 
ims 1
time stamp recursive
Listings got 600
userid 
ims 1
time stamp recursive
Listings got 700
userid 
ims 1
time stamp recursive
Listings got 800
userid 
ims 1
time stamp recursive
Listings got 900
userid 
ims 1
time stamp recursive
impstore--------------->
userid 
time stamp Wed Oct 24 2012 16:37:28 GMT+0530 (IST)
Listings got 1000
userid 
ims 1
time stamp recursive
Listings got 100
userid 
ims 1 
```

有关信息：我正在以 100 个块的形式获取数据我收到 900 个数据列表，然后服务器超时，但正如我们在控制台上看到的，再次发出请求检查最后 2 组，第一个显示接下来的 100 个 ie 列表现在增加到 1000，第二个说列表是 100，当整个过程完成时，U 有 2 个相似的对象。

希望我解释得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-03T05:36:52.890

我有同样的问题。我在堆栈溢出中看到了另一个答案，它解释了根据 HTTP 协议规范，http 客户端可以在超时后重新发送请求。对于 express，默认服务器超时为 2 分钟 ( [https://nodejs.org/api/all.html#http_server_settimeout_msecs_callback](https://nodejs.org/api/all.html#http_server_settimeout_msecs_callback) )。

如果您从浏览器访问该端点，那可能就是您的情况。

而且我理解这很奇怪，看起来一个幽灵正在向你重新发送相同的请求。其他人一遍又一遍地要求您仔细检查是否不是客户端重新发送请求。

如果我找到另一个答案，可以更好地解释这种幽灵行为，我会更新这个答案。

# perl - Redis Perl 库：如何使用排序集？

> ID：13048438
> 
> 赞同：1
> 
> 时间：2012-10-24T11:36:14.687
> 
> 标签：perl, redis, cpan, sortedset

我有一个数据结构，`redis`它使用排序集作为我计划在我的网页上使用的“顶级项目”系统。我基本上是在使用`redis-cli`命令，比如[`ZRANGE`](http://redis.io/commands/zrange)从 redis 中取出我的顶级项目。

现在我想在 Perl 中以编程方式访问这些数据。我看过[Redis.pm 库](http://search.cpan.org/dist/Redis/lib/Redis.pm)，但在那里我找不到这些`Z*`方法的任何迹象。

我可以使用 Redis.pm 库来处理 redis 中的排序集还是必须使用另一个库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:56:42.613

是的，您可以在 Redis.pm 中使用 Z* 命令

实际上，所有 Redis 命令都映射在 Perl API 中，即使其中一些没有记录在案。这是通过Perl的[AUTOLOAD 特性完成的。](http://perl.active-venture.com/pod/perltoot-autoload.html)

命令参数的定义遵循 Redis 文档，除非 Redis.pm 文档另有说明。

请参阅非回归测试脚本中的此示例：

[https://github.com/melo/perl-redis/blob/master/t/01-basic.t#L195](https://github.com/melo/perl-redis/blob/master/t/01-basic.t#L195)

# ios - 尝试临时分发 ios 应用程序时出现 OSStatus 错误 100021

> ID：13048452
> 
> 赞同：2
> 
> 时间：2012-10-24T11:37:23.807
> 
> 标签：ios, xcode, distribution, adhoc

![操作系统状态错误 100021](../Images/c035a927231bf489995fb80f0c64279e.png)

在为 Ad Hoc 部分分发的 Xcode 中选择了一个临时分发证书时，我遇到了这个可怕而奇怪的错误。有谁知道如何解决这个错误？:-)

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T05:27:19.220

我刚刚在我的项目中修复了同样的错误。我会解释修复，我很想知道它是否有帮助。

我刚刚将[YAJL 库](https://github.com/gabriel/yajl-objc#readme)添加到我的 iOS 项目中。问题是我遵循的是 Mac OS X 的说明，而不是 iOS。Mac OS X 指令包括创建复制文件构建阶段，将 YAJL.framework/ 文件夹复制到 .app 包。

> 这是一个巨大的错误。 ![在此处输入图像描述](../Images/dc0323611cffffc959c475ddcd5acd9e.png)

现在，框架文件夹在里面是什么样子的？它看起来像这样：

![在此处输入图像描述](../Images/aa1c355c72e445d5702cb8df332f8110.png)

看到那些符号链接了吗？（带有弯曲箭头的文件）他们是罪魁祸首。从 .app 文件夹中删除所有这些，我就可以毫无问题地保存 .ipa 文件。实际上，您根本不需要应用程序包中的 .framework/ 文件夹。那应该编译成二进制文件。

因此，请检查您的 .app 文件。有没有不需要的奇怪文件夹？是否有任何符号链接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:24:10.357

我有同样的问题，但在 Mac 世界。事实证明，删除符号链接只会欺骗存档工具，并不会真正产生有效的结果。如果您的嵌入式框架之一具有错误的 Info.plist 文件，通常会发生此错误。

但是，是的，在 iOS 应用程序中，您不能拥有嵌入式框架，因此您应该链接到静态库。

# javascript - 只有一个我的 jQuery 对话框正在显示。我如何让它们全部显示？

> ID：13048457
> 
> 赞同：2
> 
> 时间：2012-10-24T11:37:38.427
> 
> 标签：javascript, jquery, jquery-ui, web, dialog

我创建了 4 个 jQuery 对话框，如下所示：

```
 <div id="addCustomer" title="Add Customer">
    <h2>Add Customer</h2>
    <label>Customer Name: </label><input type="text" name ="customerName" id="addCustomerName"/><br/>
    <input type="button" value="Submit" id="addCustomerBtn" /><br/>
    <a href="#" id="close">Close</a>
</div>
<div id="editCustomer" title="Edit Customer">
    <h2>Edit Customer</h2>
    <label>Customer Name: </label><input type="text" name="editCustomerName" id="editCustomerName"/>
    <input type="button" value="Submit" id="editCustomerbtn"/> <br/>
    <a href="#" id="editClose">Close</a>
</div>
<div id="deleteCustomer" title="Delete Customer">
    <h2>Delete Customer</h2>
    <label>Are you sure you want to delete this customer?</label><br/><br/>
    <input type="button" value="Yes" id="confirmDeleteCustomer"/> <input type="button" value="No" id="cancelDeleteCustomer"/>
</div>
<div id="addDevice" title="Add Device">
    <h2>Add Device</h2>
    <label>Device Id:   </label><input type="text" name="addDeviceId" id="addDeviceId"/><br/><br/>
    <label>Version:     </label><input type="text" name ="addDeviceVersion" id="addDeviceVersion"/><br/>
    <input type="button" value="Submit" id="addDeviceBtn"/> <br/> 
    <a href="#" id="addDeviceClose">Close</a>
</div> 
```

我已将它们设置为在页面开始时隐藏，如下所示：

```
$("#addCustomer").dialog({
        autoOpen: false,
        draggable: true
    });
    $("#deleteCustomer").dialog({
        autoOpen: false,
        draggable: true
    });
    $("#addDevice").dialog({
        autoOpen: false,
        draggable: true
    });
    $("#editCustomer").dialog({
        autoOpen: false,
        draggable: true
    }); 
```

现在我正在尝试从上下文菜单上的一个选项中调用每个选项，如下所示，但是当我尝试时，我选择打开的第一个对话框可以正常打开，但是一旦关闭，就不会再打开对话框了页。

```
if (e.item.name == "itmAddCustomer") {
        $(function() {
            $("#addCustomer").dialog("open");            
        });            
    } 
```

我在这里只展示了一个菜单按钮的例子，但你明白了要点。

有人可以告诉我如何解决这个问题吗？

干杯

**更新：**这是与以下答案相关的上下文菜单的代码：

```
<div id="popupMenu" style="z-index:19998;display:none;">
        <div class="dxm-popupMain dxm-shadow dxm-popup">
            <ul class="dx dxm-noImages dxm-gutter">
                <li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Expand
                </div><b class="dx-clear"></b></li><li class="dxm-spacing"></li><li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Enable
                </div><b class="dx-clear"></b></li><li class="dxm-spacing"></li><li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Add Customer
                </div><b class="dx-clear"></b></li><li class="dxm-spacing"></li><li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Edit Customer
                </div><b class="dx-clear"></b></li><li class="dxm-spacing"></li><li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Delete Customer
                </div><b class="dx-clear"></b></li><li class="dxm-spacing"></li><li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Add Device
                </div><b class="dx-clear"></b></li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:58:25.520

这是可以满足您需求的东西。[SqlFiddle](http://jsfiddle.net/eawtD/2/)

它们是一些约定（可能会被删除，它只会使代码更短）：

每个对话框 div 都有一个类（因此当值更改`.dialog`时所有对话框都关闭）`select`

select 的每个选项值 = `item`+ 对应的对话框 div 的 id。

我用了一个`select`，不知道你的是什么

> 上下文菜单上的选项

HTML部分：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<select id ="actionChooser">
    <option value ="">-choisir-</option>
    <option value="itemaddCustomer">Add</option>
    <option value="itemeditCustomer">Edit</option>
    <option value="itemdeleteCustomer">Delete</option>
    <option value="itemaddDevice">Add device</option>
</select>

<div id="addCustomer" class="dialog" title="Add Customer">
    <h2>Add Customer</h2>
    <label>Customer Name: </label><input type="text" name ="customerName" id="addCustomerName"/><br/>
    <input type="button" value="Submit" id="addCustomerBtn" /><br/>
</div>

<div id="editCustomer"  class="dialog" title="Edit Customer">
    <h2>Edit Customer</h2>
    <label>Customer Name: </label><input type="text" name="editCustomerName" id="editCustomerName"/>
    <input type="button" value="Submit" id="editCustomerbtn"/> <br/>
</div>
<div id="deleteCustomer"  class="dialog" title="Delete Customer">
    <h2>Delete Customer</h2>
    <label>Are you sure you want to delete this customer?</label><br/><br/>
    <input type="button" value="Yes" id="confirmDeleteCustomer"/> <input type="button" value="No" id="cancelDeleteCustomer"/>
</div>
<div id="addDevice"  class="dialog" title="Add Device">
    <h2>Add Device</h2>
    <label>Device Id:   </label><input type="text" name="addDeviceId" id="addDeviceId"/><br/><br/>
    <label>Version:     </label><input type="text" name ="addDeviceVersion" id="addDeviceVersion"/><br/>
    <input type="button" value="Submit" id="addDeviceBtn"/> <br/> 
</div> ​​​​​​​ 
```

jQuery部分

```
$("#actionChooser").change(function(e) {
    $('.dialog').dialog('close');
    var val = '#'+$(this).val().replace('item', '');

    $(val).dialog('open'); 
});

   $("#addCustomer, #deleteCustomer, #addDevice, #editCustomer").dialog({// or just $('.dialog').dialog({
    autoOpen: false,
    draggable: true
}); 
```

**编辑**

使用您给定的 html（我修改了“对话框”部分）：[jsFiddle](http://jsfiddle.net/eawtD/3/)

```
 <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<div id="popupMenu" style="z-index:19998;">
        <div class="dxm-popupMain dxm-shadow dxm-popup">
            <ul class="dx dxm-noImages dxm-gutter">
                <li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Expand
                </div><b class="dx-clear"></b></li><li class="dxm-spacing"></li><li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Enable
                </div><b class="dx-clear"></b></li><li class="dxm-spacing"></li><li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Add Customer
                </div><b class="dx-clear"></b></li><li class="dxm-spacing"></li><li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Edit Customer
                </div><b class="dx-clear"></b></li><li class="dxm-spacing"></li><li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Delete Customer
                </div><b class="dx-clear"></b></li><li class="dxm-spacing"></li><li class="dxm-item"><div class="dxm-content dxm-hasText">
                    Add Device
                </div><b class="dx-clear"></b></li>
            </ul>
        </div>
    </div>

<hr/>
<div id="addCustomer" class="dialog" title="Add Customer">
    <h2>Add Customer</h2>
    <label>Customer Name: </label><input type="text" name ="customerName" id="addCustomerName"/><br/>
    <input type="button" value="Submit" id="addCustomerBtn" /><br/>

</div>
<div id="editCustomer" class="dialog" title="Edit Customer">
    <h2>Edit Customer</h2>
    <label>Customer Name: </label><input type="text" name="editCustomerName" id="editCustomerName"/>
    <input type="button" value="Submit" id="editCustomerbtn"/> <br/>

</div>
<div id="deleteCustomer" class="dialog" title="Delete Customer">
    <h2>Delete Customer</h2>
    <label>Are you sure you want to delete this customer?</label><br/><br/>
    <input type="button" value="Yes" id="confirmDeleteCustomer"/> <input type="button" value="No" id="cancelDeleteCustomer"/>
</div>
<div id="addDevice" class="dialog" title="Add Device">
    <h2>Add Device</h2>
    <label>Device Id:   </label><input type="text" name="addDeviceId" id="addDeviceId"/><br/><br/>
    <label>Version:     </label><input type="text" name ="addDeviceVersion" id="addDeviceVersion"/><br/>
    <input type="button" value="Submit" id="addDeviceBtn"/> <br/> 

</div> 
```

jQuery 部分

```
$('div .dxm-content').click(function() {
    $('.dialog').dialog('close');
    var popupText = $.trim($(this).html());
    var dialogId;
    if (popupText.length > 0) {
        switch(popupText) {
            case 'Edit Customer' : dialogId = 'editCustomer';
            break;
            case 'Delete Customer' : dialogId= 'deleteCustomer'; 
            break;
            case 'Add Device' : dialogId = 'addDevice';
            break;
            case 'Add Customer': dialogId = 'addCustomer';
            break;
            default : dialogId='';
            break;
        }
        if (dialogId != '') {
            $('#'+ dialogId).dialog('open');
        }
    }
});

$('.dialog').dialog({
        autoOpen: false,
        draggable: true
    }); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T14:13:55.947

事实证明，要解决这个问题，我需要做的就是从 jQuery-Ui 1.8.11 更新到 jQuery-ui 1.9.0，所有问题都消失了。

谢谢你的帮助。

# jquery - jquery在一个div中选择三个段落的html

> ID：13048461
> 
> 赞同：1
> 
> 时间：2012-10-24T11:37:53.813
> 
> 标签：jquery, jquery-selectors

如何选择一个（甚至四个）中前三个`<p>`标签的 html。`<div>`我想要一个函数，我可以发送段落数并将它们的 html 选择到变量中？请提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:42:38.730

您可以使用[`lt()`选择器](http://api.jquery.com/lt-selector/)：

```
var t = $('p:lt('+n+')').text(); 
```

演示：http: [//jsfiddle.net/Guffa/gzuvf/](http://jsfiddle.net/Guffa/gzuvf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:41:06.740

尝试使用[.lt()](http://api.jquery.com/lt-selector/)

```
var firstThree = $('div p:lt(3)').html(); 
```

[**工作演示**](http://jsfiddle.net/ftpqH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:41:02.077

使用 .slice()

见[这里](https://stackoverflow.com/questions/1865552/selecting-the-first-n-items-with-jquery)。

例如 ：

```
var = $('p').slice(0,3).text() 
```

或者 ：

```
var = $('p:lt(3)').text() 
```

**但是， .slice() 函数在现代浏览器中被称为更快**

# c++ - wxWebView中的ObjectForScripting？

> ID：13048464
> 
> 赞同：1
> 
> 时间：2012-10-24T11:37:56.047
> 
> 标签：c++, user-interface, wxwidgets, web-control

在 .NET WebBrowser 控件中，有一个名为“ObjectForScripting”的属性。当您在 Javascripts 中调用 window.external 时，它会调用 .Net 代码中的函数。

我想知道这是否也存在于 C++ wxWebView 中？或者也许在另一个 C++ GUI 库 WebControl..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:51:41.130

目前 wxWebView 中没有这样的东西，只有简单的[RunScript](http://docs.wxwidgets.org/trunk/classwx_web_view.html#afdfb3b58de7556da67a9dfd29b6b1395)方法。然而，使用基于 Webkit 的 wxWebView 后端进行了一些工作，更多信息可[在此处](http://trac.wxwidgets.org/ticket/14255)获得。

# ruby-on-rails - 使用 find 和 last 函数的困难

> ID：13048470
> 
> 赞同：0
> 
> 时间：2012-10-24T11:39:21.087
> 
> 标签：ruby-on-rails, ruby, find

我有表字段：

```
t.string   "name"
t.integer  "id_survey"
t.integer  "id_participant" 
```

我在数据库中有以下实例：

```
Field1= ["id_participant" => 1, "id_survey" => 1, "name" => "p1_c1_exams1"]
Field2= ["id_participant" => 1, "id_survey" => 1, "name" => "p1_c1_exams2"]
Field3= ["id_participant" => 1, "id_survey" => 1, "name" => "p1_c1_examination1"]
Field4= ["id_participant" => 1, "id_survey" => 1, "name" => "p1_c1_examination2"] 
```

我有一个变量：

```
nameStep = "p1_c1_exams" 
```

我想找到名称为“....exams”和更大数字的实例。

我试过了

```
lastField = Field.find{|f| f['id_participant']==1 and f['id_survey']==1 and f['name'].include? nameStep}['name'] 
```

但它在数据库“p1_c1_exams1”而不是“p1_c1_exams2”中找到第一个实例

然后我尝试了：

```
lastField = Field.last{|f| f['id_participant']==1 and f['id_survey']==1 and f['name'].include? nameStep}['name'] 
```

但它在数据库“p1_c1_examination2”而不是“p1_c1_exams2”中找到最后一个实例

我该如何编写查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:49:06.210

你在那里做什么？为什么不使用 Rails ActiveRecord？

```
Field.order(:id_participant, :id_survey, :name).where("name LIKE 'p1_c1_exams%'").last 
```

这个或类似的东西（我必须承认不是 100% 理解你想做什么）应该可以解决问题。

如果您不能这样做，也许您应该考虑更改您的数据库并使用仅包含名称的名称字段并将这些数字和 p1_c1_ 内容移动到不同的字段中。

# javascript - 按引用传递或按值传递

> ID：13048476
> 
> 赞同：0
> 
> 时间：2012-10-24T11:39:29.927
> 
> 标签：javascript, object

javascript中的对象是否通过引用传递？如果是，为什么此代码不起作用。

```
function change(myObj)
{
 myObj={};
 myObj.a=2;
}
 o={a:1};
change(o);
alert(o.a); //alert 1 
```

但是当我这样做时

```
function change(myObj)
{

 myObj.a=2;
}
 o={a:1};
change(o);
alert(o.a); //alert 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:42:38.457

对对象的引用被传递给方法。在您的第一个示例中，您正在修改引用以指向不同的对象，而不是尝试更改引用指向的对象，因此，更改在该方法之外不可见。

在您的第二个示例中，您正在更改引用指向的对象的状态，`myobj`因此在方法之外是可见的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:26:42.623

我将

`o={a:1};`
首先彻底解释这一点，您将全局变量 o 设置为具有属性变量 a 且值 = 1 的新匿名对象的引用，将此对象 {a:1} 命名为“1A”，

`change(o);`
现在您调用函数更改和 javascript 检查typeof 变量 o 并且它是“对象”，
实际上它应该是“指向对象的引用”，因此对象 {a:1} 的引用被传递到函数更改中，如果变量是原始的，它只会按值传递

`function change(myObj){`
现在函数更改默认情况下使用 typeof 'undefined' 创建变量 myObj 然后更改为 'object' 因为它有引用参数，现在变量 myObj 是指向对象 '1A' => {a:1} 和 myObj 的引用变量仅在函数更改和全局变量中

`myObj={};`
可见引用变量 myObj 指向新的匿名空对象 {} 将此对象命名为“2B”

`myObj.a=2; }`
现在您使用引用 myObj 设置对象 '2B' => {} 以具有值 = 2 的新属性 a 并结束意味着全局无法看到对象 '2B' => {a:2}

`alert(o.a); //alert 1`
变量的函数范围指向或可能指向对象 {a:1} ，引用 o 不能丢失它，
因为对象 '2B' => {a:2} 在函数更改之外看不到
，将被垃圾回收销毁因为它丢失了引用
和对象 '1A' => {a:1} 不能被垃圾收集销毁，
因为变量 o 仍然指向它，你为什么调用 o 你会收到对象 '1A' => {a:1}

抱歉我的语法不好，但我尽我所能使它易于阅读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T11:42:27.107

在这种情况下，您将覆盖对实际对象的引用。

```
function change(myObj)
{
 myObj={}; //overwriting the reference in myObj here.
 myObj.a=2;
}
 o={a:1};
change(o);
alert(o.a); //alert 1 
```

这样想：

```
function change(myObj = referenceToObjectPassedIn)
 myObj = new Object() ; 
  // referenceToObjectPassedIn lost in limbo
 myObject.a = 2;   //modifying newly created object. 
```

要解决您的问题，您必须返回新对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T11:58:14.667

在示例 1 中，您更改了 myObj 引用的内容，因此您最终更改了与您想要的对象不同的对象。什么时候

```
alert(o.a); 
```

执行时，自对象声明后 oa 未更改，因此返回 1。我希望这会有所帮助。还阅读了这篇文章，它应该清楚一些事情，在我第一次学习 JavaScript 时帮助了我：[http](http://www.snook.ca/archives/javascript/javascript_pass/) ://www.snook.ca/archives/javascript/javascript_pass/ 。

# c++ - Doxygen `@code` 块中的链接有时会丢失

> ID：13048483
> 
> 赞同：4
> 
> 时间：2012-10-24T11:39:51.527
> 
> 标签：c++, doxygen

我注意到，当默认构造函数没有参数时，Doxygen 可以链接来自实例的成员函数调用，但当构造函数接受参数时无法链接它们。

*   这是为什么？
*   是否有在`@code`/`@endcode`块中手动添加链接的解决方法？

在下面的示例中：

*   `t.foo()`-`foo()`已链接
*   `u.foo()`-`foo()`未链接

.

```
/** @file doxy.cpp */

/** struct T */
struct T {
  /** foo */
  void foo() { }
};

/** struct U */
struct U {
  int a; /**< int a */

  /** U */
  U(int a_) : a(a_) { }

  /** foo */
  void foo() { }
};

/**
 * main
 *
 * @code
 * T t;
 * t.foo();  // foo is linked
 *
 * U u(42);
 * u.foo();  // foo is not linked
 * @endcode
 */
int main()
{
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T04:59:14.697

我认为这是 Doxygen 中一个已知问题的症状。来自[http://www.doxygen.nl/manual/trouble.html](http://www.doxygen.nl/manual/trouble.html)

> 在某些情况下，多余的牙套会混淆 doxygen。例如：
> 
> ```
> void f (int); 
> ```
> 
> 被正确解析为函数声明，但是
> 
> ```
> const int (a); 
> ```
> 
> 也被视为一个名为 int 的函数声明，因为只分析语法，而不分析语义。如果可以检测到多余的大括号，如
> 
> ```
> int *(a[20]); 
> ```
> 
> 然后 doxygen 将删除大括号并正确解析结果。

所以在这种情况下，我相信：

```
U u(42); 
```

被解释为函数而不是变量声明。

不幸的是，我不知道在代码块中显式添加链接的任何选项。我发现的唯一解决方法是重组代码，使声明看起来不像 Doxygen 的函数。例如，将变量初始化更改为：

```
U u = U(42); 
```

允许 Doxygen 将其识别`u`为变量而不是函数。

# linux - 如何跟踪应用程序以确定在 Linux 上执行应用程序期间修改/创建/删除了哪些文件？

> ID：13048489
> 
> 赞同：0
> 
> 时间：2012-10-24T11:40:03.393
> 
> 标签：linux

我在网上搜索，他们的很多建议都是使用“watch”，例如：

```
watch -n 10 -d *command* 
```

或者

```
find directory -type f -mmin time -name filename 
```

但它们适用于由程序更改的文件，而不是由特定程序更改的文件。你能给我什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:54:19.337

怎么样*strace*：

`strace -e trace=file <command>`

从手册页：

> 跟踪所有以文件名作为参数的系统调用。

您也可以对已经运行的进程执行此操作：

`strace -e trace=file -p <pid>`

# android - 按下按钮后播放声音的延迟太长

> ID：13048490
> 
> 赞同：1
> 
> 时间：2012-10-24T11:40:08.577
> 
> 标签：android, audio

我正在为学校创建一个采样器应用程序。我编写了代码，当我按住一个按钮时播放一个样本，当我释放它时停止。我的问题是它有太多的延迟。按下按钮后播放声音需要很长时间。

我的音频文件是 mp3。

这是我的代码：

```
smpl1.setOnTouchListener(new View.OnTouchListener() 
{   
  public boolean onTouch(View arg0, MotionEvent theMotion)
  {
    switch (theMotion.getAction())
    {
      case MotionEvent.ACTION_DOWN: 
        sample = MediaPlayer.create(MainActivity.this, R.raw.bassdrum);
        smpl1.setText("ON");
        smpl1.setTextColor(Color.GREEN);
        sample.start();
        break;
      case MotionEvent.ACTION_UP:
        smpl1.setText("OFF");
        smpl1.setTextColor(Color.RED);
        sample.stop();
        break;
    }
    return true;        
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:43:56.160

`sample`在按下按钮之前创建对象，然后只需在处理程序代码中使用启动/停止功能。

# c++ - 在eclipse中为c ++编译错误

> ID：13048491
> 
> 赞同：2
> 
> 时间：2012-10-24T11:40:08.683
> 
> 标签：c++, eclipse

首先，我是 Linux 操作系统的新手。

我安装了和`ubuntu`包。`eclipse``c/c++`

我开始了一个新项目，即默认项目“Hello World c++ 项目”，当我运行它时，它给了我错误：

```
Description     Resource    Path    Location    Type
Program "g++" not found in PATH         Preferences, C++/Build/Settings/Discovery, [CDT GCC Builtin Compiler Settings] options  C/C++ Scanner Discovery Problem 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T11:43:50.257

尝试安装在控制台中键入的所有开发人员工具：`sudo aptitude install build-essential`。它将安装 g++、gcc 和所有库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-12T07:01:46.603

我有同样的问题。这是我修复它的方法：

1.  运行 sudo`sudo apt-get install build-essential`来安装 gcc、g++ 和库。
2.  更新文件中的PATH环境变量`/etc/environment`添加`/usr/bin/g++`
3.  重新启动您的 VM 或 PC 以使此更改生效。

# debugging - 打包后退出小程序

> ID：13048493
> 
> 赞同：0
> 
> 时间：2012-10-24T11:40:10.217
> 
> 标签：debugging, jar, applet, code-signing, pack

这是场景：我们创建了一个 JAVA 小程序，除了我们自己的代码之外，它还包括来自几个未打包的 3rd 方 JAR:s 的类。我们签署了小程序，它在客户端上运行良好。我们现在正试图使小程序更小，因为我们的许多客户都在带宽很差的网络上。所以[pack200](http://docs.oracle.com/javase/1.5.0/docs/guide/deployment/deployment-guide/pack200.html)包装就是我在看的东西。

问题：

我们用 pack200 打包的步骤基本上是

1.  重新打包（使用 pack200 util）我们的小程序 JAR 以规范化
2.  使用我们的证书退出我们的 applet JAR
3.  使用 pack200 util 打包小程序 JAR

很简单，在此过程中没有收到任何错误。但是，在客户端上，当他们收到这个新打包的小程序时，他们会在第 3 方 JAR 中包含的类上收到 SHA1 摘要错误。

第 3 方 JAR 没有与我们自己的 JAR 捆绑在一起，它被解包并且类被复制到 applet 中，即单个 JAR。

这个过程适用于另一个小程序，其中包括来自外部 JAR:s 的类，所以我认为我的过程是正确的。我怀疑这与已经签署的第 3 方 JAR 有关，但由于我们可以签署我们的小程序并首先运行它，所以我并不真正理解它。

有什么我错过的吗？我承认我到目前为止还不是签名方面的专家，所以可能有一些明显的事情会阻止事情按我的意愿工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T18:00:23.200

> 找到了解决方案。上面指向 pack200 的链接包含一个错误报告，我认为它已过时，因为它已被标记为已修复。然而，使用建议的第二种解决方法似乎可以解决问题。

# html - 将 HTML 输入按钮的文本值包装在多行上

> ID：13048499
> 
> 赞同：13
> 
> 时间：2012-10-24T11:40:20.293
> 
> 标签：html, button, input, word-wrap

如何将文本移动到具有该`type="button"`属性的 HTML 输入元素中的新行？

我有以下代码：

```
<input type="button" id="btnTexWrapped" value="I see this is a long sentence here." style="width: 200px;" /> 
```

我希望将按钮的文本值包裹在两行中。我尝试将它输入到 HTML 的下一行。它没有像我预期的那样工作：

```
<input type="button" id="btnTexWrapped" value="I see this is a long 
sentence here." style="width: 200px;" /> 
```

我也尝试使用所有选项`white-space`with fixed `width: 200px;`，但仍然没有任何效果。

我可以静态地固定长度、宽度或其他值：因为控件不会改变。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-24T11:45:33.440

```
white-space: normal; 
```

应该管用

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-24T11:44:00.117

试试这个，你可以立即看到它是如何工作的：

```
<input type="button" value="Carriage&#13;&#10;return&#13;&#10;separators" style="text-align:center;"> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-06-18T12:34:01.203

您可以使用按钮标签

> <button> 我看到这<br/>这里是一个很长的<br/>句子。</button>

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-19T00:46:11.427

对于 4 年后阅读此问题的任何人，我想添加一些澄清细节。Lokesh 的答案是正确的（*不是*公认的答案），但最初的问题是基于对 HTML 工作原理的误解，没有人解决这个问题。

HTML 不是一种重要的空白语言。也就是说，浏览器会完全忽略任何新行。虽然您可以（并且应该！）在 HTML 代码中添加新行以编写可读、可维护的 HTML，但它（几乎）不会影响最终结果（我不会在这里讨论异常）。

正如 Lokesh 所指出的，您可以使用`<br />`标签强制换行。另一种常见的方法是使用块级元素，例如`div`or `section`。

> 浏览器 UA 样式表将许多元素设置为阻止。它们通常是容器元素，例如`<div>`、`<section>`和`<ul>`。还有文字“块”，如`<p>`和`<h1>`。块级元素不是内联的，而是突破它们。默认情况下（不设置宽度），它们尽可能多地占用水平空间。

这是来自[https://css-tricks.com/almanac/properties/d/display/](https://css-tricks.com/almanac/properties/d/display/)的引用，它是关于属性的不同属性的非常好的参考`display`。

此外，我不建议尝试使用任何其他需要将编码换行符放入`value`属性中的建议解决方案。这将`input`标签推到了设计的范围之外。如果您需要更复杂的按钮内容，则`button`标记更合适。事实上，我通常认为没有充分的理由使用`<input type="button">`标签`button`。它更加语义化，更易于阅读，并且无限灵活 - 例如，允许在其中包含中断和其他元素（例如图像！）。

只需一点知识和来自专业网络开发人员的一些建议...... :)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-04T09:13:50.147

我在我的一个项目中遇到了交叉类型的需求，我解决了如下问题。

使用 html 编码字符串

`<input button type="submit" value="This is button &#x00A; two line text" />`

`&#x00A;`

用于拆分按钮标签的 value 属性中的文本

希望对你有帮助..

* * *

## 回答 #6

> 赞同：-12
> 
> 时间：2012-10-26T01:36:57.513

只需在值的中间按回车键，如下所示：

```
<input type="button" id="btnTexWrapped" value="I see this is a long 
sentence here." style="width:200px;"/> 
```

一世

# nsstring - iOS 6 和 iOS 5 中的 TextAlignment

> ID：13048500
> 
> 赞同：2
> 
> 时间：2012-10-24T11:40:24.523
> 
> 标签：nsstring, uilabel

如您所知，iOS 6`UITextAlignment`已被弃用，但如果您支持早期的 iO​​S 版本，它仍然可以使用。但我有一个问题，如何使其文本对齐 iOS 5 as`UITextAlignmentLeft`和 iOS 6 as `NSTextAlignmentJustified`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:16:59.563

在您的公用文件或 .pch 文件中写下以下语句

```
#define SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v) ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedAscending) 
```

然后检查 ios 6 或 ios 5 的 textalignment 写入

```
if(SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0"))
{
  your code for ios 6.0 and above
}
else
{
   your code for earlier versions
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T05:07:55.330

```
if(SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0"))
{
  your code for ios 6.0 and above
}
else
{
   your code for earlier versions
} 
```

# magento - 联邦快递集成 Magento

> ID：13048501
> 
> 赞同：1
> 
> 时间：2012-10-24T11:40:26.560
> 
> 标签：magento, integration, fedex

我已将 FedEx 配置为使用 magento 1.7.0.2，输入了所有必需的参数并打开了日志记录。一切似乎工作正常，任何地方都没有错误，即使在 shipping_fedex.log 文件中，结果也是成功的，这意味着报价是从 FedEx 返回的。但是在“选择运输方式”页面的前端，它没有显示出来。当我在配置中选择指定的国家/地区并输入无效地址时，它会显示在那里并显示在这种情况下不适用的消息。

请向我提供有关如何解决此问题的建议。联邦快递代码存储在magento中的哪里，以便我可以调试它们以查看问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:49:08.013

我遇到了同样的情况，发现我的产品设置了以公斤为单位的重量，所以有些是无效的，有些会返回天文的运费（比如 3000 美元或更多），当我将重量转换为磅或磅的分数时，它一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T20:30:15.550

您需要确保您的购物车配置正确。您是否使用内置的一页结帐模块？

有关如何设置 Magento 以使用 FedEx 网络服务的一般详细信息，请参阅以下 URL： http: [//www.cobbconsulting.net/magento-fedex-setup.html](http://www.cobbconsulting.net/magento-fedex-setup.html)

# imagemagick - Imagemagick 色彩空间黑白到 CMYK

> ID：13048503
> 
> 赞同：2
> 
> 时间：2012-10-24T11:40:28.863
> 
> 标签：imagemagick, cmyk, imagemagick-convert, mogrify

我必须将整个目录从颜色空间 Black/White（显示在 XNView 中）批量转换为 CMYK 以进行打印..

我试过这样（适用于“正常”图形..）

```
mogrify.exe  -path [...]\Logos -profile [...]\RGB\AdobeRGB1998.icc  [...]\Logos\*

mogrify.exe -path [...]\Logos  -profile [...]\CMYK\CoatedFOGRA39.icc [...]\Logos\* 
```

[...] 通常包含一个特定的路径..

这里有什么问题？完成该过程后，文件比 400kb 大得多 20kb。但它们仍然是彩色空间黑色/白色...

任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:23:34.563

如果文件确实在灰度色彩空间中，则不需要将它们转换为 CMYK。CMYK 文件比 RGB 文件大，因为 CMYK 中有四个通道，而 RGB 中只有三个。您可能还会发现，如果将 RGB 黑色转换为 CMYK 黑色，那么您将不再拥有 BLACK。你会得到奇怪的值，例如 C 78 M 84 Y 97 K 89。

# linux - 确定在 GNU/Linux 中启动程序所需的时间？

> ID：13048506
> 
> 赞同：3
> 
> 时间：2012-10-24T11:40:43.243
> 
> 标签：linux, x86-64, timing, elf

在 GNU/Linux 中，是否可以确定启动程序所需的时间？其中“开始”被定义为已执行 load_elf_binary() （或其他一些适用的函数）。特别是我想编写一个可以做到这一点的程序。即一个程序，给定另一个程序作为输入，然后以尽可能高的精度确定那个时间。

编辑：忘记指定硬件是 x86-64。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:03:12.920

NASA 使用 386 和较旧的硬件，因为它们是确定性的，缓存和超标量技术使 486 和更新的处理器具有不确定性。因此，确定启动时间并非易事。

感兴趣的文章：

*   [http://science.slashdot.org/story/10/09/27/1333204/the-ancient-computers-powering-the-space-race](http://science.slashdot.org/story/10/09/27/1333204/the-ancient-computers-powering-the-space-race)
*   [http://drum.lib.umd.edu/bitstream/1903/891/2/CS-TR-3768.pdf](http://drum.lib.umd.edu/bitstream/1903/891/2/CS-TR-3768.pdf)
*   [http://pages.cs.wisc.edu/~markhill/racey.html](http://pages.cs.wisc.edu/~markhill/racey.html)
*   [http://en.wikipedia.org/wiki/Nondeterministic_algorithm](http://en.wikipedia.org/wiki/Nondeterministic_algorithm)
*   [http://homes.cs.washington.edu/~tbergan/papers/wodet11-hammer.pdf](http://homes.cs.washington.edu/~tbergan/papers/wodet11-hammer.pdf)

# java - 如何在 Java 中检测图像中的四边形？

> ID：13048508
> 
> 赞同：4
> 
> 时间：2012-10-24T11:40:46.907
> 
> 标签：java, opencv, hough-transform, homography

我想在 Java 中检测图像中的四边形。我可以使用 OpenCV 中的 HoughLinesP 方法（使用 javaCV 进行 opencv java 绑定）来检测线段。但我不知道如何检测四边形 - 是否有另一种方法或某种使用霍夫线的方法？此外，一旦检测到四边形的角，我希望它像此类一样返回一个矩形 - [http://www.aforgenet.com/framework/docs/html/7039a71d-a87d-47ef-7907-ad873118e374.htm](http://www.aforgenet.com/framework/docs/html/7039a71d-a87d-47ef-7907-ad873118e374.htm) - openCV中是否有等效的库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T11:46:59.937

您的输入图像如何？如果您使用 Hough 变换检测到大量线段，您可以尝试使用[RANSAC](http://en.wikipedia.org/wiki/RANSAC)生成许多四边形形状假设，找到一种方法来评估它们的适应度并返回最佳假设。

可以这样产生一个假设：

*   从检测到的线段集中选择四个随机线段
*   通过查找所选线段所在的线的交点来找到四个角
*   评价由这四个点定义的四边形的适应度

适合度可能是假设四边形的面积（请参阅用于计算凸四边形面积的[Bretschneider 公式](http://en.wikipedia.org/wiki/Bretschneider%27s_formula)）、四边形边缘与检测集中的其他线段的距离，或者更适合您的应用的东西。

这只是一个想法，我还没有尝试过使用这种方法（但我正计划实现类似的东西）。让我知道您是否认为这可行，或者为什么不可行！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:48:03.153

你的算法可能是这样的

1.  处理图像以找到边缘（Canny 过滤器）
2.  应用霍夫变换来查找线
3.  检测以 90 度角（近似）相交的线对

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T11:46:00.517

如果您使用 OpenCV 库，那么您绝对应该尝试使用[`FindChessboardCorners`](http://opencv.willowgarage.com/documentation/python/calib3d_camera_calibration_and_3d_reconstruction.html#findchessboardcorners)功能。还有[一个很好的教程](http://dasl.mem.drexel.edu/~noahKuntz/openCVTut10.html)。

# jquery - 最初隐藏的弹出窗口上的 jQuery 事件

> ID：13048509
> 
> 赞同：0
> 
> 时间：2012-10-24T11:40:51.913
> 
> 标签：jquery, events

我有这个代码：

```
jQuery(document).on('click', '.close_popup', function() {
  alert('clicked');
}); 
```

在这里，`.close_popup`它`div`在页面加载时隐藏，并在单击按钮时在弹出窗口（一种模式对话框）上可见。

出于某种原因，我没有触发警报。这里有什么提示吗？

谢谢你的时间。最好的。

**编辑**

`.close_popup`加载弹出窗口后，将使用关闭按钮动态创建该类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:44:57.940

脚本是否在 document.ready 标签内？

尝试这样的事情：

```
$(document).ready(function() {
   $(document).click(function() {
      alert("clicked");
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:40:41.437

在这个例子中没有具体的原因为什么你需要做 jQuery(document).on('click', '.close_popup', function(){}); 你应该能够摆脱 jQuery('.close_popup').on('click', function(){}); 这是假设 .close_popup 是您的按钮元素，这也应该解决您链接到这个问题的其他问题。

# wcf - 在 silverlight 中显示从表中选择的结果

> ID：13048510
> 
> 赞同：1
> 
> 时间：2012-10-24T11:40:55.267
> 
> 标签：wcf, silverlight

我是 Silverlight 的新手。我的代码在窗口窗体中工作：

```
 static void Main()
    {
        DBConnect dbconnect = new DBConnect();

        using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\Temp\WriteLines4.txt", true))
        {
            file.WriteLine(dbconnect.CountPublic());
        }

        dbconnect.CloseConnectionPublic();
    } 
```

它连接到数据库，计算表中的行数，将结果写入 txt 文件并关闭连接。

现在我需要在silverlight（网页）中显示结果，而不是写入txt文件。我该如何开始？

更新： Silverlight 不能直接与数据库一起使用。我需要为使用数据库创建 WCF 服务并使用 Silverlight 使用服务。找到 SL 和 WCF 的简单示例：http: [//sonyarouje.com/2010/10/16/image-uploading-retrieving-silverlight-and-wcf/](http://sonyarouje.com/2010/10/16/image-uploading-retrieving-silverlight-and-wcf/)

# javascript - 当 javascript 从 azure blob 读取 css 文件时，cssRules 为空

> ID：13048514
> 
> 赞同：0
> 
> 时间：2012-10-24T11:41:07.627
> 
> 标签：javascript, jquery, css, cross-domain

我将我的 css 和 javascript 文件存储在 azure 中的 blob 上。我需要使用 javascript 读取 cssRules，但 cssRules 字段为空。

但是，当css文件是项目的一部分时，它成功读取了css，并且cssRules字段不为空。

我该如何解决这个问题？我想将文件存储在 blob 中。

# ios - iOS 清除 HTML5 离线缓存数据

> ID：13048520
> 
> 赞同：4
> 
> 时间：2012-10-24T11:41:30.163
> 
> 标签：ios, html, offline-caching

我们使用 .manifest 缓存机制开发了一个离线 HTML5 网络应用程序。一切都按预期工作。

现在我们的一些客户抱怨在长时间离线使用后，缓存的数据突然消失了。事实证明——这是我的猜测——iOS 将缓存文件存储在其 /CACHES/ 目录中，从 iOS 5.0 开始，如果设备空间不足，该目录可能会被清除。这可能随时发生，甚至不会向用户发出警告。因此，离线 web 应用程序不再正常运行。用户必须将设备重新连接到互联网并更新应用程序。

对于本机应用程序，此问题通过将文件存储在 /DOCUMENTS/ 目录中解决，使用标志“不备份”防止文件被清除（因为它们不位于 /CACHES/ 目录中，并且不是备份到 iCloud 或 iTunes。

有关详细信息，请参阅此链接：http: [//www.marco.org/2011/10/13/ios5-caches-cleaning](http://www.marco.org/2011/10/13/ios5-caches-cleaning)，但这并没有说明 HTML5 缓存...

这再次解释了它，但没有解决方案：[http ://www.moneytoolkit.com/2012/04/apple-ios-html5-localstorage-is-broken/](http://www.moneytoolkit.com/2012/04/apple-ios-html5-localstorage-is-broken/)

有没有人有同样的经历？有针对这个的解决方法吗？目标是安装一次网络应用程序，然后在没有连接的情况下“永远”运行它......

干杯，帕维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:23:00.453

在 Safari 中没有办法解决这个问题。缓存永远不会被认为是永久的。

如果您在本机应用程序中有 UIWebView，则可以在用户默认值中设置`WebKitStoreWebDataForBackup`为。`YES`（仅限 iOS 6+）

# c# - 如何断言代码正在主线程中运行？

> ID：13048522
> 
> 赞同：3
> 
> 时间：2012-10-24T11:41:39.503
> 
> 标签：c#

这不起作用：

```
Debug.Assert(Thread.CurrentThread.Name == "Main Thread"); //doesn't work
                     //name is null despite name
                     //in debugger being "Main Thread" 
```

这确实有效：

```
Debug.Assert(Thread.CurrentThread.ManagedThreadId == 1); 
```

但我只是想知道：

*   a)`ManagedThreadId`保证是`1`用于主线程的吗？
*   b) 有更好的方法吗？通过属性将是我提供的最整洁的。

我正在做一个 Silverlight 项目，我没有标记，因为我不知道它是否相关，但是如果您相信 Silverlight 和其他 .net 运行时之间存在差异，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:45:54.037

Thread.CurrentThread.Name 仅在设置名称时才有效。我的猜测是调试器提供了一个默认名称。您可以设置线程的名称（在创建时，或者在您点击 main 时）？这样您就可以检查断言。

就像是：

```
static void Main()
{
    // Check whether the thread has previously been named 
    // to avoid a possible InvalidOperationException. 
    if(Thread.CurrentThread.Name == null)
    {
        Thread.CurrentThread.Name = "MainThread";
    }
} 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/system.threading.thread.name.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.name.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:05:18.267

将此代码放入您`entry`的应用程序方法中 -

```
static int mainThreadId;

// In Main method:
mainThreadId = System.Threading.Thread.CurrentThread.ManagedThreadId;

// If called in the non main thread, will return false;
public static bool IsMainThread
{
    get
    {
       return System.Threading.Thread.CurrentThread.ManagedThreadId
                                                == mainThreadId;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:44:46.807

检查[`IsBackground`](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground%28v=vs.95%29.aspx)物业。

这可能不是一个完美的解决方案，因为其他线程可以作为前台线程运行，但它可能就足够了。

# java - 无法摆脱画线

> ID：13048524
> 
> 赞同：3
> 
> 时间：2012-10-24T11:41:53.340
> 
> 标签：java, swing, awt, jpanel, paint

我在互联网上发现了类似的问题，但提供的解决方案不起作用。

我想清除JPanel。为此，我调用`repaint()`（从`clear()`方法）并将标志设置为 false 以避免调用我的绘图方法（`drawLines()`）。画线仍在面板上。

我尝试用背景颜色重新绘制相同的线条。这也没有奏效。

```
 public class WektPanel extends JPanel{    

    boolean check = false;
    Color c = Color.BLUE;
    boolean oval = false;

    public WektPanel() {
        setBackground(c);
        setVisible(true);

    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        if(check)
            drawLines(3, g);

    }

    void clear(){
        check=false;
        repaint();
    }
    void draw(){
        check=true;
        repaint();
    }

    void drawLines(int stroke, Graphics g){

        g.drawLine(0,0,getWidth(),getHeight());
        g.drawLine(0,getHeight(),getWidth(),0);
        for(int i=1; i<stroke;i++){
                g.drawLine(0+i,0,getWidth(),getHeight()-i);
                g.drawLine(0,0+i,getWidth()-i,getHeight());
                g.drawLine(0,getHeight()-i,getWidth()-i,0);
                g.drawLine(0+i,getHeight(),getWidth(),0+i);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:45:43.783

你压倒一切`paint()`，但打电话`super.paintComponent(g)`。你应该覆盖`paintComponent(g)`.

编辑：我无法遵循你的`check`逻辑。这对我有用。

```
public class Test {

    private class WektPanel extends JPanel {

        boolean clear;

        public WektPanel() {
            setBackground(Color.BLUE);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(300, 200);
        }

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            drawLines(3, g);
        }

        public void clear() {
            clear = true;
            repaint();
        }

        public void draw() {
            clear = false;
            repaint();
        }

        private void drawLines(int stroke, Graphics g) {
            if (!clear) {
                g.drawLine(0, 0, getWidth(), getHeight());
                g.drawLine(0, getHeight(), getWidth(), 0);
                for (int i = 1; i < stroke; i++) {
                    g.drawLine(0 + i, 0, getWidth(), getHeight() - i);
                    g.drawLine(0, 0 + i, getWidth() - i, getHeight());
                    g.drawLine(0, getHeight() - i, getWidth() - i, 0);
                    g.drawLine(0 + i, getHeight(), getWidth(), 0 + i);
                }
            }
        }
    }

    private void showGUI() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final WektPanel wektPanel = new WektPanel();
        f.add(wektPanel, BorderLayout.CENTER);
        JPanel buttonPanel = new JPanel();
        buttonPanel.add(new JButton(new AbstractAction("Clear") {

            @Override
            public void actionPerformed(ActionEvent e) {
                wektPanel.clear();
            }
        }));
        buttonPanel.add(new JButton(new AbstractAction("Draw") {

            @Override
            public void actionPerformed(ActionEvent e) {
                wektPanel.draw();
            }
        }));
        f.add(buttonPanel, BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().showGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T11:47:22.907

方法中的第一行`paint`应该是这样的：

```
g.clearRect(0, 0, getWidth(), getHeight()); 
```

这样，当您再次开始绘画时，您可以确保以前的绘画不会在那里。

# .net - 异常延续不适用于完成延续

> ID：13048525
> 
> 赞同：0
> 
> 时间：2012-10-24T11:41:56.077
> 
> 标签：.net, exception-handling, task-parallel-library, continuations

我有这个简单的 TPL 代码：

```
var t = Task.Factory.StartNew(() => { throw null; })
    .ContinueWith((ant) => { Console.WriteLine("Success"); }, 
        TaskContinuationOptions.OnlyOnRanToCompletion)
    .ContinueWith((ant) => { Console.WriteLine("Error"); }, 
        TaskContinuationOptions.OnlyOnFaulted);
t.Wait(); 
```

我得到一个未处理的异常：

```
Unhandled Exception: System.AggregateException: One or more errors occurred.
... 
```

如果我`t.Wait()`输入 a `try-catch`，异常就会被捕获，我知道它违背了使用异常延续的全部意义。现在，如果我删除完成延续，任务引发的异常将在异常延续中处理，我没有得到上述异常。有人可以对正在发生的事情有所了解吗？我正在使用 .NET 4.0 的 VS2010 SP1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:48:21.897

`ContinueWith()`不返回原来的`Task`，它返回一个`Task`代表延续。在您的情况下，继续被取消，因为原始`Task`文件没有完成。而且因为第二个`Task`没有出错，你的第三个`Task`也被取消了，这就是你被`TaskCanceledException`包裹在里面的原因`AggregateException`。

相反，您可以做的是有一个延续，它同时执行这两项操作。就像是：

```
var t = Task.Factory.StartNew(() => { throw null; })
    .ContinueWith(
        ant =>
        {
            if (ant.IsFaulted)
                Console.WriteLine("Error");
            else
                Console.WriteLine("Success");
        }); 
```

如果你经常做这样的事情，你可以为此创建一个扩展方法（加上可能是`Task<T>`with `Action<T>`as的通用版本`onSuccess`）：

```
public static Task ContinueWith(
    this Task task, Action onSuccess, Action<AggregateException> onError)
{
    return task.ContinueWith(
        ant =>
        {
            if (ant.IsFaulted)
                onError(task.Exception);
            else
                onSuccess();
        });
} 
```

用法：

```
var t = Task.Factory.StartNew(() => { throw null; })
    .ContinueWith(
        () => { Console.WriteLine("Success"); },
        ex => { Console.WriteLine("Error"); });
t.Wait(); 
```

此外，这假设您知道您的原件`Task`不会被取消。如果不是这种情况，那就是您需要处理的另一种情况。

# android - 使用折叠键后未收到推送消息

> ID：13048526
> 
> 赞同：1
> 
> 时间：2012-10-24T11:41:57.113
> 
> 标签：android

我正在尝试运行 android 开发者网站上提供的 GCM 演示项目。

我正在使用 servlet 将消息推送到我的 android 设备。

我在服务器端（servlet）使用 TimerTask 每 10 秒推送一次消息。

当我使用下面的代码时，它工作正常。不管我注册/注销多少次。我每 10 秒收到一次推送的消息。

```
 Message message = new Message.Builder()
            .addData("data", "My custom message...")
            .build(); 
```

但是当我使用折叠键时，如下代码所示，服务器发送消息成功但设备无法接收。

```
 Message message = new Message.Builder()
            .addData("data", threadCounter + ". S: " + new java.util.Date())
            .collapseKey("xyz")
            .build(); 
```

在上面提到的代码中，设备接收到消息 10-20 次，然后在更长的时间内无法接收到消息。

任何帮助

# sql - DB2 sql group by/count distinct column values

> ID：13048527
> 
> 赞同：2
> 
> 时间：2012-10-24T11:41:59.580
> 
> 标签：sql, db2

如果我有一个具有如下值的表：

```
ID  SUBID    FLAG
-----------------
 1      1       1
 1      2  (null)
 2      3       1
 2      3  (null)
 3      4       1
 4      5       1
 4      6  (null)
 5      7       0
 6      8  (null)
 7      9       1 
```

并且我想获取所有 'FLAG' 仅设置为 1 的 ID，因此在这种情况下，查询将返回

```
ID  SUBID    FLAG
-----------------
 3      4       1
 7      9       1 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:00:18.297

试试这个：

```
SELECT * FROM flags where flag=1
and ID NOT in( SELECT ID FROM flags where flag !=1 OR flag IS NULL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:54:52.513

我没有要测试的 db2 实例，但这可能有效：

```
select t1.id, t1.subid, t1.flag
from yourtable t1
inner join
(
  select id 
  from yourtable 
  group by id
  having count(id) = 1
) t2
  on t1.id = t2.id
where t1.flag = 1; 
```

# cocoa - 基于文档的应用程序中的不同菜单栏

> ID：13048528
> 
> 赞同：2
> 
> 时间：2012-10-24T11:42:01.833
> 
> 标签：cocoa, menubar, nsdocument

我有一个基于 NSDocument 的可可应用程序，我有两种类型的文档。每种文档类型都有自己的菜单项，所有项都在 mainmenu.xib 中定义。根据 Apple UI 指南中的定义，与文档类型无关的菜单项显示为灰色。

我有太多的菜单项，所以我只想显示每个文档类型的相关项目，另一个问题是由键绑定创建的，对于文档类型 A，特定的键绑定与菜单项相关联，但对于文档类型 B，相同的键绑定与另一个菜单项相关联，但这是不可能的，因为 XCode 检测到已使用相同的键并且它（正确地）从先前的项目定义中删除。

我想创建一个类似于 XCode 的“编辑器”菜单的菜单，当焦点位于文本窗口时它会显示一些项目，而当焦点位于 IB 文件上时会显示完全不同的项目集。

有最佳实践吗？例如拆分菜单。如何轻松创建类似于 XCode 的“编辑器”菜单的菜单？哪个 API 可可让我们去做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:56:39.887

您可以在 MainMenu.xib 中创建单独的菜单，并从 App Controller 为它们创建出口。然后，当您的文档获得焦点时（参见`windowDidBecomeMain`([参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSWindowDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSWindowDelegate/windowDidBecomeKey%3a))），您告诉 App 控制器切换主菜单的相关部分。

切换主菜单的部分是通过拖网主菜单层次结构并在正确的位置分配单独的菜单（即`[NSMenuItem setSubmenu:]`（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMenuItem_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMenuItem/setSubmenu%3a)））来完成的。您可以通过在这些菜单项中设置标签、使用 Interface Builder，然后使用`[NSMenu itemWithTag:]`( [reference](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMenu_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMenu/itemWithTag%3a) ) 以编程方式找到它们，从而使自己更容易做到这一点。

# android - Android FB API 3.0 - 只设置一次权限

> ID：13048533
> 
> 赞同：14
> 
> 时间：2012-10-24T11:42:18.563
> 
> 标签：android, facebook, facebook-android-sdk

我试图弄清楚新 API 是如何工作的，所以我设法理解了这个概念，并设法做我自己的“hello world”，登录到 facebook，注销并尝试上传图像。

现在在 HelloFacebookSample 和 SessionLoginSimple 中，都有一个简单的 facebook 登录，在 HelloFacebookSample 中，当您单击“发布照片”时，会出现一个新的登录对话框，因为没有设置权限。

这是来自 HelloFacebookSample 的代码：

```
 private void performPublish(PendingAction action) {
    Session session = Session.getActiveSession();
    if (session != null) {
        pendingAction = action;
        if (session.getPermissions().contains("publish_actions")) {
            // We can do the action right away.
            handlePendingAction();
        } else {
            // We need to reauthorize, then complete the action when we get called back.
            Session.ReauthorizeRequest reauthRequest = new Session.ReauthorizeRequest(this, PERMISSIONS).
                    setRequestCode(REAUTHORIZE_ACTIVITY).
                    setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
            session.reauthorizeForPublish(reauthRequest);
        }
    }
} 
```

因此，由于我们没有“publish_actions”，我们需要重新授权。

在 SimpleSessionLogin 中，登录看起来像这样：

```
private void onClickLogin() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
    } else {
        Session.openActiveSession(this, true, statusCallback);
    }
} 
```

所以，我不知道如何在登录期间请求权限。在几秒钟内使用完全相同的对话框登录服务两次，这有点奇怪，或者说是多余的。

对用户来说，这听起来有些不对劲或很奇怪。

我想用想要的权限登录 facebook 一次，但使用 API 3.0 会话调用，而不是已弃用的调用。

谁能解释一下如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T17:00:32.873

[Session.OpenRequest](https://developers.facebook.com/docs/reference/android/3.0/Session.OpenRequest)有一个可以设置权限的方法。但是，对于 3.0 SDK，Facebook 现在要求开发人员分别请求“读取”和“发布”权限。因此，如果您的应用需要读取用户信息并代表他们发布，那么您需要调用 reauthorize。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T05:48:32.237

好的，这是我使用 Facebook 的 3.0 SDK for Android 制作的对话框片段。它是封装的，这意味着所有 Facebook 功能都包含在片段中。这是一个对话框片段，因此它会在您正在运行的活动中弹出。此片段允许您登录，然后在您使用 Facebook 中包含的 UiHelper 类登录后启用某些视图。

```
public class FFragment extends DialogFragment {

private static final String TAG = "FacebookFragment";
private UiLifecycleHelper uiHelper;
private String mFilePath;
private Button shareButton, cancelButton;
private EditText mMessageText;
private TextView mMessageTitle;
private ProgressBar pBar;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.facebook_login, container, false);
    LoginButton authButton = (LoginButton) view
            .findViewById(R.id.authButton);
    authButton.setFragment(this);
    authButton.setPublishPermissions(Arrays.asList("publish_stream"));

    shareButton = (Button) view.findViewById(R.id.shareButton);
    mMessageText = (EditText) view.findViewById(R.id.facebook_post_text);
    mMessageTitle = (TextView) view.findViewById(R.id.facebook_post_title);
    cancelButton = (Button) view.findViewById(R.id.cancelButton);
    pBar = (ProgressBar) view.findViewById(R.id.facebook_pbar);
    cancelButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            FFragment.this.dismiss();

        }

    });
    shareButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            publishPhoto();

        }

    });
    return view;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mFilePath = getArguments().getString("file_path");

    uiHelper = new UiLifecycleHelper(getActivity(), callback);
    uiHelper.onCreate(savedInstanceState);

}

/**
 * After user selects to upload photo
 */
private void publishPhoto() {
    pBar.setVisibility(View.VISIBLE);
    GraphObject graphObject;
    Bitmap bmap = BitmapFactory.decodeFile(mFilePath);

    ByteArrayOutputStream stream = new ByteArrayOutputStream();

    bmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);

    byte[] byteArray = stream.toByteArray();

    Bundle params = new Bundle();

    params.putByteArray("picture", byteArray);
    params.putString("message", mMessageText.getText() + " " + 
            getActivity().getResources().getString("String goes here"));

    Request request = new Request(Session.getActiveSession(), "me/photos",params, 
             HttpMethod.POST);

    request.setCallback(new Request.Callback() {

        @Override
        public void onCompleted(Response response) {
            if (response.getError()==null) {
                Toast.makeText(getActivity(), "Successfully posted photo", Toast.LENGTH_SHORT).show();
                FlurryAgent.logEvent(Globals.EVENT_FACEBOOK);
            } else {
                Toast.makeText(getActivity(), response.getError().getErrorMessage(), Toast.LENGTH_SHORT).show();
            }
            pBar.setVisibility(View.GONE);
            FFragment.this.dismiss();

        }
    });
    request.executeAsync();

}
private void onSessionStateChange(Session session, SessionState state,
        Exception exception) {
    if (state.isOpened()) {
        Log.i(TAG, "Logged in...");
        // Check for reading user_photos permission  
        shareButton.setVisibility(View.VISIBLE);
        mMessageText.setVisibility(View.VISIBLE);
        mMessageTitle.setVisibility(View.VISIBLE);

    } else if (state.isClosed()) {
        Log.i(TAG, "Logged out...");
        shareButton.setVisibility(View.GONE);
        mMessageText.setVisibility(View.GONE);
        mMessageTitle.setVisibility(View.GONE);
    }

}

private Session.StatusCallback callback = new Session.StatusCallback() {
    @Override
    public void call(Session session, SessionState state,
            Exception exception) {
        onSessionStateChange(session, state, exception);

    }
};

@Override
public void onResume() {
    super.onResume();
    uiHelper.onResume();
    // For scenarios where the main activity is launched and user
    // session is not null, the session state change notification
    // may not be triggered. Trigger it if it's open/closed.
    Session session = Session.getActiveSession();
    if (session != null && (session.isOpened() || session.isClosed())) {
        onSessionStateChange(session, session.getState(), null);
    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    uiHelper.onActivityResult(requestCode, resultCode, data);
}

@Override
public void onPause() {
    super.onPause();
    uiHelper.onPause();
}

@Override
public void onDestroy() {
    super.onDestroy();
    uiHelper.onDestroy();
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    uiHelper.onSaveInstanceState(outState);
} 
```

}

以下代码行是您将在活动中用于显示对话框的代码。

```
FFragment mFacebookFragment = new FFragment();
        Bundle args = new Bundle();
        args.putString("file_path", mFilePath);
        mFacebookFragment.setArguments(args);
        mFacebookFragment.show(getSupportFragmentManager(), "tag"); 
```

无论如何，如果您查看 onCreate 我们正在设置发布权限。默认情况下，片段启动时已经设置了读取权限。

也让你在清单中有这个。

```
<meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/app_id"/> 
```

其中@string/app_id 是您在开发者网站上创建 facbeook 应用程序时创建的应用程序 ID。还要确保下载新的 sdk facebook 项目并将其作为库项目引用。用于对话框布局的 XML 文件。

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="vertical" >

    <com.facebook.widget.LoginButton
        android:id="@+id/authButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_gravity="center_horizontal|top" />

    <TextView
        android:id="@+id/facebook_post_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:text="Message to post with photo"
        android:textColor="@android:color/white"
        android:textSize="18dp"
        android:textStyle="bold"
        android:visibility="gone" />

    <EditText
        android:id="@+id/facebook_post_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:minLines="3"
        android:visibility="gone" />

    <Button
        android:id="@+id/shareButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="30dp"
        android:gravity="center"
        android:text="Post"
        android:textStyle="bold"
        android:visibility="gone" />

    <Button
        android:id="@+id/cancelButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Cancel"
        android:textStyle="bold" />
</LinearLayout>

<ProgressBar 
    android:id="@+id/facebook_pbar"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_gravity="center"
    android:visibility="gone"
    /> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T22:52:26.333

首次授权/登录应用程序时，您只能请求读取权限。我之前也尝试过这个新的 SDK，也有点困惑。

Facebook 希望用户对您的应用程序的发布能力更有信心，因此您必须在首次发布 OG 操作时重新授权发布权限。如果您查看 Foursquare 或 Instagram 发布 OG 的方式，他们有一个 Facebook 复选框或按钮，表示您想在 FB 上分享操作。您可以实现与此类似或我最终做的事情，即在用户授权应用程序后显示一个按钮，要求他们单击以启用向 Facebook 发布操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T03:43:05.167

@Ming Li，当我使用创建会话时

```
public static final List<String> ALL_PERMISSIONS = Arrays.asList(       
            "read_friendlists",
            "publish_stream",
            "offline_access",
            "email",
            "read_stream",
            "user_location" ); 

session.openForPublish(new Session.OpenRequest(this).setPermissions(ALL_PERMISSIONS).setCallback(statusCallback).setRequestCode(100)); 
```

获得的会话具有（读取和发布）权限。所以我觉得想要同时获得读取和发布会话的用户可以使用 openForPublish() api。有用...！！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T00:30:07.717

Facebook 3.0 api 确实存在限制，不能同时请求读取和发布。我确实找到了解决方法，但是您必须修改库。

只需将其添加到 Session.java：

```
public final void openForReadAndPublish(OpenRequest openRequest) {
        open(openRequest, null);
    } 
```

这将导致它跳过引发异常的验证检查。当然，您现在可能需要做更多手动操作。您也可以在 Session 中注释掉 validatePermissions(openRequest, authType) 调用，这样您就可以传递您想要的任何权限。

# asp.net-mvc-3 - 验证和修改 MetaData 类中的变量

> ID：13048536
> 
> 赞同：0
> 
> 时间：2012-10-24T11:42:32.107
> 
> 标签：asp.net-mvc-3

我正在为我的项目使用**ASP.NET MVC 3**。

问题是我想将一个值保存到数据库中，在保存到数据库之前应该“清理”（比如删除尾随和结束空格，并验证）。

在使用数据注释将模型保存到数据库之前，我使用**MetaData 类来验证模型，使用以下代码进行验证：**

```
if (ModelState.IsValid) { 
```

我的元数据类如下所示：

```
public class OrganizationMD {
    [Required(ErrorMessage = "*This field is required.")]
    [CustomValidationRule(ErrorMessage = "*Another error message")]
    public string OrganizationNumber;
} 
```

我的第一个想法是给 OrganizationNumber 字符串一个 getter 和 setter，然后让值变得“固定”。

例如，如果有人尝试将“19860415-4785”的公司保存为组织编号，它应该在验证新值并将其保存到数据库之前自动删除字符串中尾随的“19”和破折号。

我不能给模型一个 getter 和 setter，因为我们正在使用 Model-First 进行开发，**否则我认为应该可以。**

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:04:08.940

您可以创建一个视图模型来向/从视图和控制器传递数据，而不是直接使用您的域（实体框架）模型。

将数据注释放在视图模型的属性上。

```
public class OrganizationMDViewModel
{
    [Required(ErrorMessage = "*This field is required.")]
    [CustomValidationRule(ErrorMessage = "*Another error message")]
    public string OrganizationNumber {get; set;}
} 
```

然后你可以做任何你认为在 getter 和 setter 中起作用的事情，然后再映射回域模型以进行持久化。

为了可读性和更容易调试，您可以在控制器中而不是在 getter 和 setter 中进行“清理”，但这取决于您。

```
[HttpPost]
public ActionResult SaveData (OrganizationMDViewModel viewModel)
{
  if (ModelState.IsValid) {
    viewModel.OrganizationNumber...//clean up the value here
    OrganizationMD = new OrganizationMD{OrganizationNumber = viewModel.OrganizationNumber}
    //...and save
  }
} 
```

# r - 无法在 R (windows) 中安装和运行包

> ID：13048543
> 
> 赞同：0
> 
> 时间：2012-10-24T11:42:39.543
> 
> 标签：r, packages

我正在使用 64 位 Windows 系统。我安装了 64 位 2.15.1 版本的 R。我正在尝试从包菜单中安装一个名为“MethLAB”的包，方法是从“包”菜单中选择其本地 zip 文件。但是我遇到了下面的错误显示。

```
> utils: : :menuInstallLocal ()
package 'MethLAB' successfully unpacked and MDS sums checked

> library(MethLAB)
> MethLAB()
Warning message:
In file (filename, "r", encoding =encoding) :
  unable to resolve 'bioconductor.org' 
```

所以上面是我尝试运行它时得到的。谁能帮我正确安装和运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:27:02.387

我怀疑这是因为你没有连接到互联网。是这样吗？如果是，那么您应该联系编写包裹的人；似乎该软件出于某种原因试图联系 BioConductor，可能是为了下载其他软件包/功能等。为此，请确保您已安装运行 ` **MethLAB**所需的所有必备软件包。

请注意，这只是一个警告，而不是错误。这是否会阻止程序包工作是另一回事。如果您已遵循有关如何安装和使用该软件包的所有说明，那么您应该再次与开发人员讨论这个问题。

# android - ListView上的onTouch，更改项目的颜色

> ID：13048547
> 
> 赞同：-1
> 
> 时间：2012-10-24T11:42:45.853
> 
> 标签：android

`listview`我的android 应用程序中有一个自定义项。当用户按下列表中的项目时，我想更改按下项目的背景颜色。这是该行为的代码：

```
tempView.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View arg0, MotionEvent event) {

                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    isDown = false;
                    tempView.setBackgroundColor(Color.parseColor("#f47920"));

                }

                if (event.getAction() == MotionEvent.ACTION_UP) {
                    tempView.setBackgroundResource(R.drawable.list_selector_focused);
                }

                if(event.getAction() == MotionEvent.ACTION_MOVE) {
                    tempView.setBackgroundResource(R.drawable.list_selector_focused);
                }

                return false;
            }
        }); 
```

但是当我在屏幕上“滑动”手指以滚动时`listview`，也会标记一个项目，并且“按下”的颜色将是静态的。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:45:32.377

`MotionEvent.ACTION_UP`除非您返回通知 Android 系统您处理了整个触摸事件，`true`否则不会被捕获。`onTouch()`

# actionscript-3 - AS3：匹配 hittest xy 坐标与孩子的孩子影片剪辑

> ID：13048549
> 
> 赞同：0
> 
> 时间：2012-10-24T11:42:48.000
> 
> 标签：actionscript-3, flash, coordinates, movieclip, hittest

在根上：

我有树夹 我有切割夹

而树剪辑有分支网格（点）作为它的孩子

当我单击一次时，我在切割器和每个点（树子）之间得到了 hitTest，但是 x，y 坐标非常不同，例如

如果切割器打开：275、267，那么它会受到点的命中测试：命中：-306.8、-118.35

我应该如何使它类似于匹配它击中唯一的网格。 *注意：当 hitTest 发生时，它会击中大部分网格，我正在尝试获取位于刀具边缘下方的点。*

我试图减去 x,y 值以使它们紧密匹配，但是单击不同的点在 y 坐标上总是有 3-5 像素或 10-15 像素的差异

谢谢，纳吉姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:46:58.440

由于点是另一个影片剪辑的一部分，而切割器不是，因此您需要转换点的坐标。最简单的方法是使用 localToGlobal() 或 globalToLocal() 来转换刀具的坐标。尝试 Adob​​e 文档以获取有关如何使用这些功能的更多信息...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:13:30.007

谢谢@Rizzla，

```
import flash.display.Sprite;
import flash.events.MouseEvent;
import flash.geom.Point;

var square:Sprite = new Sprite();
square.graphics.beginFill(0xFFCC00);
square.graphics.drawRect(0, 0, 100, 100);
square.x = 100;
square.y = 200;

addChild(square);

square.addEventListener(MouseEvent.CLICK, traceCoordinates)

function traceCoordinates(event:MouseEvent):void {
    var clickPoint:Point = new Point(square.mouseX, square.mouseY);
    trace("display object coordinates:", clickPoint);
    trace("stage coordinates:", square.localToGlobal(clickPoint));
} 
```

# javascript - 阅读规范

> ID：13048556
> 
> 赞同：1
> 
> 时间：2012-10-24T11:43:27.460
> 
> 标签：javascript, google-maps

希望这将是一个容易回答的问题。

在 LatLngBounds ( [https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds) ) 下，extend() 函数接受一个参数，point:LatLng。现在，在 Map ( [https://developers.google.com/maps/documentation/javascript/reference#Map](https://developers.google.com/maps/documentation/javascript/reference#Map) ) 下，panTo() 函数接受一个参数 latlng:LatLng。两者有什么区别？冒号之前的部分是什么意思？我也见过其他人，例如 other:LatLng。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:47:56.830

在这种情况下，“latlng”、“point”或“other”只是参数的简要说明。重要的是冒号后面的标记：它标识参数的类型，在这种情况下，参数必须是 LatLng 类的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:48:26.600

至少回答一个问题：冒号之前的部分只是一个变量描述，因此您知道要传递给函数的内容，并且（您可能已经知道）冒号之后的部分是对象类型。

此外，以防万一，LatLng 和 LatLngBounds 之间的区别：LatLngBounds 包含 2 个 LatLng，一个用于西南，一个用于东北。

# sass - SASS 可以合并属性吗？

> ID：13048568
> 
> 赞同：2
> 
> 时间：2012-10-24T11:44:08.663
> 
> 标签：sass

也许一个更好的问题是，有没有更有效的方法来覆盖混合的一部分？

这段 SCSS：

```
@mixin button {
  .button {
    background-color: red;
    color: white;
  }
}

.container {
  @include button;
  .button {
    background-color: green;
  }
} 
```

编译为：

```
.container .button {
  background-color: red;
  color: white;
}
.container .button {
  background-color: green;
} 
```

我希望它可以编译为：

```
.container .button {
  background-color: green;
  color: white;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:55:22.390

而是将参数传递给 mixin：

```
@mixin button($color: red) {
    background-color: $color;
    color: white;
}

.container {
  .button {
    @include button(green);
  }
} 
```

# android - 动态壁纸在 htc X 上看起来更大，但在 s3 和 nexus 7 上看起来不错，尽管分辨率相同

> ID：13048578
> 
> 赞同：0
> 
> 时间：2012-10-24T11:44:49.663
> 
> 标签：android, opengl-es-2.0, live-wallpaper, htc-android

我有一个可在高分辨率设备上使用的动态壁纸，特别是在 Galaxy s3 和 nexus 7 上。我已经在也是 720p 设备的 htc one x 上对其进行了测试，但壁纸似乎被放大了。我没有 htc x，所以我无法检查墙纸的屏幕尺寸。墙纸适用于 openGL 2.0，因此它可能是相机 z 值，但为什么它看起来与 nexus 7 或 s3 不同? 有谁知道问题可能是什么？

谢谢！

编辑：这是视图初始化代码：

```
 // Adjust the viewport based on geometry changes,
    // such as screen rotation
    GLES20.glViewport(0, 0, width, height);

    // Create the projection matrix so that it converts the 3000px grid to actual screen dimensions, centered (letterboxed)
    Matrix.frustumM(mProjMatrix, 0, -(width / 3000.0f) / 2.0f, (width / 3000.0f) / 2.0f, -(height / 3000.0f) / 2.0f, (height / 3000.0f) / 2.0f, 3, 7);

    // Set the camera position (View matrix)
    Matrix.setLookAtM(mVMatrix, 0, 0.0f, 0, 3.0f, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

    // Calculate the projection and view transformation
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0); 
```

`

我使用 3000x3000 像素的“虚拟”网格来放置元素，然后使用投影矩阵将其信箱。它在 N7 或 S3 上运行良好，但 Z 值在 One X 上看起来不太好。

所有顶点都设置为 Z 为 0。

# iphone - 处理界面方向更改发生在我的视图控制器之外

> ID：13048584
> 
> 赞同：0
> 
> 时间：2012-10-24T11:45:18.937
> 
> 标签：iphone, ios, ipad, uikit, orientation

我有`UIViewController`它就像其他几个视图控制器的容器。每个子视图控制器都作为子视图添加，目前只有一个可见。问题是：当我旋转设备时，容器 viewController 正确处理旋转，以及当前显示的子视图控制器。屏幕外视图控制器也已正确调整大小，但没有收到任何消息，我不知道何时应该更新它的内容。有什么方法可以解决这个问题，或者我应该手动执行所有这些操作，例如存储每个视图控制器的最后一个方向，检查`viewWillAppear:`方向是否已更改并在必要时手动更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:16:37.843

您必须检查并适当`[UIApplication sharedApplication].statusBarOrientation`地`viewWillAppear:`调整您的视图。

您还可以将方向更改消息发送到子视图控制器，如此[处](https://stackoverflow.com/a/3338530/187663)所述。

# php - Jquery 多 DIV 隐藏/显示

> ID：13048594
> 
> 赞同：0
> 
> 时间：2012-10-24T11:45:47.320
> 
> 标签：php, javascript, jquery

我想用 jquery 或 javascript 显示隐藏多个 div。我在网上搜索，但我发现必须具有唯一 div 的代码，例如：

```
<div id="div1">text</div>
<div id="div2">text</div> 
```

等等，但我想在 foreache php 函数中添加 div，所以我不能有多个 ID，foreache 是一个 div 包装器。所以，我的问题是我该怎么做？

编辑因为我在 JQuery 完全是菜鸟，所以我不知道如何实现任何东西，所以我有这个

```
 <div id="wrapper">
  <div class="title">
     <div class="hide"> Hidden Text</div>
  </div>
    </div> 
```

当我单击标题 div 时，我希望显示 class="hide"。

解决方案：

```
 .box
{ margin:10px;
  height:auto;
}
.panel,.flip
{
padding:5px;
text-align:center;
background-color:#e5eecc;
border:solid 1px #c3c3c3;
}
.panel
{
padding:50px;
display:none;
}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $(".flip").click(function(){
    $(this).next().slideToggle(500);
  });
});
</script>

<div class="box">
     <h1>This is the div</h1>
  <div class="flip">If u click </div>
<div class="panel"> This will show</div> 
```

问题是正如我所说的 div 是由 foreach 函数生成的，这解决了它，谢谢大家！我有很多东西要学。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T11:48:37.090

你可以试试

```
<div id="div1" class="toggle">text</div>
<div id="div2" class="toggle">text</div> 
```

然后

```
$('.toggle').toggle();  //Automatic Display or hide the matched elements. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T11:46:59.747

您可以分配公共类，然后使用该类选择器显示具有公共类的隐藏 div。

**[现场演示](http://jsfiddle.net/wsZC5/1/)**

```
<div id="div1" class="someclass">text</div>
<div id="div2" class="someclass">text</div>

 $('.someclass').show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T12:10:11.620

有两种方法：

*   按类选择 div
*   选择包装器的子 div

第一种方法与其他人描述的一样，添加类属性以选择 div：

```
<div class="hide">content</div> 
```

和

```
$(".hide").hide(); 
```

第二种方法是给父 div 一个唯一的 id：

```
<div id="wrapper">
    <div>content</div>
    <div>content</div>
</div> 
```

然后按标签名称选择所有它的孩子：

```
$("#wrapper div").hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T11:48:19.233

添加一些类以选择所有要隐藏的潜水，

```
<div class="toHide" id="div1">text</div>
<div class="toHide" id="div2">text</div> 
```

然后把它们都藏起来，

```
$('div .toHide').hide(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T11:48:49.673

解决方案 1

```
<div id="div1">text</div>
<div id="div2">text</div>

jQuery('#div1, #div2').hide();
jQuery('#div1, #div2').show();
jQuery('#div1, #div2').toggle(); 
```

解决方案 2

```
<div id="div1" class="some-div">text</div>
<div id="div2" class="some-div">text</div>

jQuery('.some-div').hide();
jQuery('.some-div').show();
jQuery('.some-div').toggle(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T12:14:20.560

另一个答案：

使用父元素：

```
<div id="yourId">
   <div id="div1">text</div>
   <div id="div2">text</div>
</div>

$("#yourId div").hide(); 
```

# python - Django 错误：在渲染时捕获 UnicodeEncodeError

> ID：13048596
> 
> 赞同：0
> 
> 时间：2012-10-24T11:45:52.820
> 
> 标签：python, django, osqa

我正在尝试设置一个 Django 站点 (OSQA)，但无法正常工作。

网站主页加载正常，但是当我尝试提交表单时出现以下错误。我有一点 Python 经验，但我对 Django 框架还是很陌生。有人可以对此有所了解吗？

有问题的 base.py 文件：

```
import django.dispatch
from django.utils.encoding import force_unicode, smart_unicode
from datetime import datetime, timedelta
import logging

TMP_MINICACHE_SECONDS = 5

class SettingSet(list):
    def __init__(self, name, title, description, weight=1000, markdown=False, can_preview=False):
        self.name = name
        self.title = title
        self.description = description
        self.weight = weight
        self.markdown = markdown
        self.can_preview = can_preview

class BaseSetting(object):
    @classmethod
    def add_to_class(cls, name):
        def wrapper(self, *args, **kwargs):
            return self.value.__getattribute__(name)(*args, **kwargs)

        setattr(cls, name, wrapper)

    def __init__(self, name, default, set=None, field_context=None):
        self.name = name
        self.default = default
        self.field_context = field_context or {}

        self._temp = None

        if set is not None:
            self.set = set

            if not set.name in Setting.sets:
                Setting.sets[set.name] = set

            Setting.sets[set.name].append(self)

    def __str__(self):
        return str(self.value)

    def __unicode__(self):
        return smart_unicode(self.value)

    @property
    def value(self):
        if self._temp:
            v, exp = self._temp
            if exp + timedelta(seconds=TMP_MINICACHE_SECONDS) > datetime.now():
                return v

        from forum.models import KeyValue

        try:
            kv = KeyValue.objects.get(key=self.name)
            v = kv.value
            self._temp = (v, datetime.now() + timedelta(seconds=TMP_MINICACHE_SECONDS))
            return v
        except KeyValue.DoesNotExist:
            self._temp = (self.default, datetime.now() + timedelta(seconds=TMP_MINICACHE_SECONDS))
            self.save(self.default)
        except Exception, e:
            logging.error("Error retrieving setting from database (%s): %s" % (self.name, str(e)))

        return self.default

    def set_value(self, new_value):
        new_value = self._parse(new_value)
        self._temp = None
        self.save(new_value)

    def save(self, value):
        from forum.models import KeyValue

        try:
            kv = KeyValue.objects.get(key=self.name)
        except KeyValue.DoesNotExist:
            kv = KeyValue(key=self.name)
        except Exception, e:
            logging.error("Error saving setting to database (%s): %s" % (self.name, str(e)))
            return

        kv.value = value
        kv.save()

    def to_default(self):
       self.set_value(self.default)

    def _parse(self, value):
        if not isinstance(value, self.base_type):
            try:
                return self.base_type(value)
            except:
                pass
        return value

class AnyTypeSetting(BaseSetting):
     def _parse(self, value):
       return value

class Setting(object):
    emulators = {}
    sets = {}

    def __new__(cls, name, default, set=None, field_context=None):
        if default is None:
            return AnyTypeSetting(name, default, set, field_context)

        deftype = type(default)

        if deftype in Setting.emulators:
            emul = Setting.emulators[deftype]
        else:
            emul = type(deftype.__name__ + cls.__name__, (BaseSetting,), {'base_type': deftype})

           fns = [n for n, f in [(p, getattr(deftype, p)) for p in dir(deftype) if not p in dir(cls)] if callable(f)]

            for n in fns:
               emul.add_to_class(n)

            Setting.emulators[deftype] = emul

        return emul(name, default, set, field_context) 
```

堆栈跟踪：

```
TemplateSyntaxError at /questions/ask/
Caught UnicodeEncodeError while rendering: 'ascii' codec can't encode characters in position 0-3: ordinal not in range(128)
Request Method: POST
Request URL:    http://123.243.100.125/questions/ask/
Django Version: 1.3.4
Exception Type: TemplateSyntaxError
Exception Value:    
Caught UnicodeEncodeError while rendering: 'ascii' codec can't encode characters in position 0-3: ordinal not in range(128)
Exception Location: /usr/local/src/osqa/forum/settings/base.py in __str__, line 42
Python Executable:  /usr/bin/python
Python Version: 2.6.6
Python Path:    
['/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg',
 '/usr/lib/python2.6/site-packages/elementtree-1.2.7_20070827_preview-py2.6.egg',
 '/usr/lib/python2.6/site-packages/Markdown-2.2.0-py2.6.egg',
 '/usr/lib/python2.6/site-packages/html5lib-0.95-py2.6.egg',
 '/usr/lib/python2.6/site-packages/django_rosetta-0.6.8-py2.6.egg',
 '/usr/lib64/python26.zip',
 '/usr/lib64/python2.6',
 '/usr/lib64/python2.6/plat-linux2',
 '/usr/lib64/python2.6/lib-tk',
 '/usr/lib64/python2.6/lib-old',
 '/usr/lib64/python2.6/lib-dynload',
 '/usr/lib64/python2.6/site-packages',
 '/usr/lib64/python2.6/site-packages/PIL',
 '/usr/lib64/python2.6/site-packages/gst-0.10',
 '/usr/lib64/python2.6/site-packages/gtk-2.0',
 '/usr/lib64/python2.6/site-packages/webkit-1.0',
 '/usr/lib/python2.6/site-packages',
 '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info',
 '/usr/local/src',
 '/usr/local/src/osqa',
 '/usr/local/src/osqa/forum/markdownext']
Server time:    ???, 24 ?? 2012 22:36:54 +1100
Template error

In template /usr/local/src/osqa/forum/skins/default/templates/notifications/newquestion.html, error at line 3
Caught UnicodeEncodeError while rendering: 'ascii' codec can't encode characters in position 0-3: ordinal not in range(128)
1   {% load i18n extra_tags email_tags %}
2   
3   {% declare %}
4       prefix = html.mark_safe(settings.EMAIL_SUBJECT_PREFIX)
5       app_name = settings.APP_SHORT_NAME
6       safe_app_name = html.mark_safe(settings.APP_SHORT_NAME)
7       question_author = html.mark_safe(question.author.username)
8       question_url = settings.APP_URL + question.get_absolute_url()
9       question_title = html.mark_safe(question.title)
10      question_tags = html.mark_safe(question.tagnames)
11      safe_body = html.html2text(question.html)
12      author_link = html.objlink(question.author, style=settings.EMAIL_ANCHOR_STYLE)
13      question_link = html.objlink(question, style=settings.EMAIL_ANCHOR_STYLE)
Traceback Switch to copy-and-paste view

/usr/lib/python2.6/site-packages/django/core/handlers/base.py in get_response
            response = callback(request, *callback_args, **callback_kwargs) ...
? Local vars
/usr/local/src/osqa/forum/modules/decorators.py in decorated
        return decoratable(*args, **kwargs) ...
? Local vars
/usr/local/src/osqa/forum/modules/decorators.py in __call__
    res = self._callable(*args, **kwargs) ...
? Local vars
/usr/local/src/osqa/forum/modules/decorators.py in <lambda>
        self._callable = lambda *args, **kwargs: fn(origin, *args, **kwargs) ...
? Local vars
/usr/local/src/osqa/forum_modules/akismet/startup.py in wrapper
    return origin(request, *args, **kwargs) ...
? Local vars
/usr/local/src/osqa/forum/views/writers.py in ask
            send_template_email([u], "notifications/newquestion.html", {'question': question, "exclude_finetune": True}) ...
? Local vars
/usr/local/src/osqa/forum/utils/mail.py in send_template_email
    t.render(Context(context)) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in render
        return self._render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in _render
    return self.nodelist.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in render
        bits.append(self.render_node(node, context)) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/debug.py in render_node
        result = node.render(context) ...
? Local vars
/usr/local/src/osqa/forum/templatetags/extra_tags.py in render
            context[m.group(1).strip()] = eval(m.group(3).strip(), d) ...
? Local vars
/usr/lib/python2.6/site-packages/django/utils/safestring.py in mark_safe
    return SafeString(str(s)) ...
? Local vars
/usr/local/src/osqa/forum/settings/base.py in __str__
    return str(self.value) ...
? Local vars
Request information

GET
No GET data
POST
Variable    Value
text    
u'The e-mail settings of this community are not configured yet. '
tags    
u'test'
expert_email    
u''
title   
u'The e-mail settings of this community are not configured yet. '
FILES
No FILES data
COOKIES
Variable    Value
sessionid   
'1e7a11ca5a8631425ad03fd4973e57dc'
META
Variable    Value
mod_wsgi.listener_port  
'80'
HTTP_REFERER    
'http://123.243.100.125/questions/ask/'
mod_wsgi.listener_host  
''
SERVER_SOFTWARE 
'Apache/2.2.15 (CentOS)'
SCRIPT_NAME 
u''
mod_wsgi.handler_script 
''
SERVER_SIGNATURE    
'<address>Apache/2.2.15 (CentOS) Server at 123.243.100.125 Port 80</address>\n'
REQUEST_METHOD  
'POST'
PATH_INFO   
u'/questions/ask/'
HTTP_ORIGIN 
'http://123.243.100.125'
SERVER_PROTOCOL 
'HTTP/1.1'
QUERY_STRING    
''
CONTENT_LENGTH  
'160'
HTTP_ACCEPT_CHARSET 
'ISO-8859-1,utf-8;q=0.7,*;q=0.3'
HTTP_USER_AGENT 
'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4'
HTTP_CONNECTION 
'keep-alive'
HTTP_COOKIE 
'sessionid=1e7a11ca5a8631425ad03fd4973e57dc'
SERVER_NAME 
'123.243.100.125'
REMOTE_ADDR 
'123.243.100.125'
mod_wsgi.request_handler    
'wsgi-script'
wsgi.url_scheme 
'http'
PATH_TRANSLATED 
'/usr/local/src/osqa/osqa.wsgi/questions/ask/'
SERVER_PORT 
'80'
wsgi.multiprocess   
False
mod_wsgi.input_chunked  
'0'
SERVER_ADDR 
'192.168.0.10'
DOCUMENT_ROOT   
'/usr/local/src/osqa/forum'
mod_wsgi.process_group  
'osqa'
SCRIPT_FILENAME 
'/usr/local/src/osqa/osqa.wsgi'
SERVER_ADMIN    
'admin@your.server.com'
wsgi.input  
<mod_wsgi.Input object at 0x7f1da157ea30>
HTTP_HOST   
'123.243.100.125'
wsgi.multithread    
True
mod_wsgi.callable_object    
'application'
HTTP_CACHE_CONTROL  
'max-age=0'
REQUEST_URI 
'/questions/ask/'
HTTP_ACCEPT 
'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
wsgi.version    
(1, 1)
GATEWAY_INTERFACE   
'CGI/1.1'
wsgi.run_once   
False
wsgi.errors 
<mod_wsgi.Log object at 0x7f1da164a0f0>
REMOTE_PORT 
'11430'
HTTP_ACCEPT_LANGUAGE    
'en-GB,en-US;q=0.8,en;q=0.6'
mod_wsgi.version    
(3, 2)
CONTENT_TYPE    
'application/x-www-form-urlencoded'
mod_wsgi.application_group  
'localhost.localdomain|'
mod_wsgi.script_reloading   
'1'
wsgi.file_wrapper   
''
HTTP_ACCEPT_ENCODING    
'gzip,deflate,sdch'
Settings
Using settings module osqa.settings
Setting Value
USE_L10N    
False
USE_THOUSAND_SEPARATOR  
False
APP_PROTOCOL    
'http'
LANGUAGE_CODE   
'zh_CN'
ROOT_URLCONF    
'urls'
MANAGERS    
()
APP_URL 
'http://127.0.0.1'
DEFAULT_CHARSET 
'utf-8'
APP_DOMAIN  
'127.0.0.1'
STATIC_ROOT 
''
TEST_DATABASE_CHARSET   
None
LOG_FILENAME    
'django.osqa.log'
MESSAGE_STORAGE 
'django.contrib.messages.storage.user_messages.LegacyFallbackStorage'
DATABASE_HOST   
'127.0.0.1'
IGNORABLE_404_STARTS    
('/cgi-bin/', '/_vti_bin', '/_vti_inf')
SEND_BROKEN_LINK_EMAILS 
False
URL_VALIDATOR_USER_AGENT    
'Django/1.3.4 (http://www.djangoproject.com)'
STATICFILES_FINDERS 
('django.contrib.staticfiles.finders.FileSystemFinder',
 'django.contrib.staticfiles.finders.AppDirectoriesFinder')
SESSION_COOKIE_DOMAIN   
None
SESSION_COOKIE_NAME 
'sessionid'
ADMIN_FOR   
()
TIME_INPUT_FORMATS  
('%H:%M:%S', '%H:%M')
DATABASES   
{'default': {'ENGINE': 'django.db.backends.postgresql_psycopg2',
         'HOST': '127.0.0.1',
         'NAME': 'osqa',
         'OPTIONS': {},
         'PASSWORD': '********************',
         'PORT': '',
         'TEST_CHARSET': None,
         'TEST_COLLATION': None,
         'TEST_MIRROR': None,
         'TEST_NAME': None,
         'TIME_ZONE': 'Australia/Melbourne',
         'USER': 'uosqa'}}
TEST_DATABASE_NAME  
None
FILE_UPLOAD_PERMISSIONS 
None
FILE_UPLOAD_HANDLERS    
('django.core.files.uploadhandler.MemoryFileUploadHandler',
 'django.core.files.uploadhandler.TemporaryFileUploadHandler')
DEFAULT_CONTENT_TYPE    
'text/html'
OSQA_DEFAULT_SKIN   
'default'
APPEND_SLASH    
True
FIRST_DAY_OF_WEEK   
0
DATABASE_ROUTERS    
[]
YEAR_MONTH_FORMAT   
'F Y'
STATICFILES_STORAGE 
'django.contrib.staticfiles.storage.StaticFilesStorage'
CACHES  
{'default': {'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',
         'LOCATION': '/usr/local/src/osqa/cache'}}
MODULES_FOLDER  
'/usr/local/src/osqa/forum_modules'
SERVER_EMAIL    
'root@localhost'
ALLOW_FILE_TYPES    
('.jpg', '.jpeg', '.gif', '.bmp', '.png', '.tiff')
USE_X_FORWARDED_HOST    
False
ALLOW_MAX_FILE_SIZE 
1048576
IGNORABLE_404_ENDS  
('mail.pl', 'mailform.pl', 'mail.cgi', 'mailform.cgi', 'favicon.ico', '.php')
MIDDLEWARE_CLASSES  
['django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'forum.middleware.extended_user.ExtendedUser',
 'forum.middleware.anon_user.ConnectToSessionMessagesMiddleware',
 'forum.middleware.request_utils.RequestUtils',
 'forum.middleware.cancel.CancelActionMiddleware',
 'forum.middleware.admin_messages.AdminMessagesMiddleware',
 'django.middleware.transaction.TransactionMiddleware']
USE_I18N    
True
THOUSAND_SEPARATOR  
','
SECRET_KEY  
'********************'
LANGUAGE_COOKIE_NAME    
'django_language'
FILE_UPLOAD_TEMP_DIR    
'/usr/local/src/osqa/tmp'
TRANSACTIONS_MANAGED    
False
LOGGING_CONFIG  
'django.utils.log.dictConfig'
TEMPLATE_LOADERS    
['django.template.loaders.filesystem.load_template_source',
 'django.template.loaders.app_directories.load_template_source',
 'forum.modules.template_loader.module_templates_loader',
 'forum.skins.load_template_source']
TEMPLATE_DEBUG  
True
CSRF_COOKIE_NAME    
'csrftoken'
TEST_DATABASE_COLLATION 
None
EMAIL_HOST_PASSWORD 
'********************'
CACHE_BACKEND   
'file:///usr/local/src/osqa/cache'
SESSION_COOKIE_SECURE   
False
CSRF_COOKIE_DOMAIN  
None
FILE_CHARSET    
'utf-8'
DEBUG   
True
MODULES_PACKAGE 
'forum_modules'
SESSION_FILE_PATH   
None
DEFAULT_FILE_STORAGE    
'django.core.files.storage.FileSystemStorage'
INSTALLED_APPS  
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.admin',
 'django.contrib.humanize',
 'django.contrib.sitemaps',
 'django.contrib.markup',
 'forum']
LANGUAGES   
(('ar', 'Arabic'),
 ('az', 'Azerbaijani'),
 ('bg', 'Bulgarian'),
 ('bn', 'Bengali'),
 ('bs', 'Bosnian'),
 ('ca', 'Catalan'),
 ('cs', 'Czech'),
 ('cy', 'Welsh'),
 ('da', 'Danish'),
 ('de', 'German'),
 ('el', 'Greek'),
 ('en', 'English'),
 ('en-gb', 'British English'),
 ('es', 'Spanish'),
 ('es-ar', 'Argentinian Spanish'),
 ('es-mx', 'Mexican Spanish'),
 ('es-ni', 'Nicaraguan Spanish'),
 ('et', 'Estonian'),
 ('eu', 'Basque'),
 ('fa', 'Persian'),
 ('fi', 'Finnish'),
 ('fr', 'French'),
 ('fy-nl', 'Frisian'),
 ('ga', 'Irish'),
 ('gl', 'Galician'),
 ('he', 'Hebrew'),
 ('hi', 'Hindi'),
 ('hr', 'Croatian'),
 ('hu', 'Hungarian'),
 ('id', 'Indonesian'),
 ('is', 'Icelandic'),
 ('it', 'Italian'),
 ('ja', 'Japanese'),
 ('ka', 'Georgian'),
 ('km', 'Khmer'),
 ('kn', 'Kannada'),
 ('ko', 'Korean'),
 ('lt', 'Lithuanian'),
 ('lv', 'Latvian'),
 ('mk', 'Macedonian'),
 ('ml', 'Malayalam'),
 ('mn', 'Mongolian'),
 ('nl', 'Dutch'),
 ('no', 'Norwegian'),
 ('nb', 'Norwegian Bokmal'),
 ('nn', 'Norwegian Nynorsk'),
 ('pa', 'Punjabi'),
 ('pl', 'Polish'),
 ('pt', 'Portuguese'),
 ('pt-br', 'Brazilian Portuguese'),
 ('ro', 'Romanian'),
 ('ru', 'Russian'),
 ('sk', 'Slovak'),
 ('sl', 'Slovenian'),
 ('sq', 'Albanian'),
 ('sr', 'Serbian'),
 ('sr-latn', 'Serbian Latin'),
 ('sv', 'Swedish'),
 ('ta', 'Tamil'),
 ('te', 'Telugu'),
 ('th', 'Thai'),
 ('tr', 'Turkish'),
 ('uk', 'Ukrainian'),
 ('ur', 'Urdu'),
 ('vi', 'Vietnamese'),
 ('zh-cn', 'Simplified Chinese'),
 ('zh-tw', 'Traditional Chinese'))
DATABASE_ENGINE 
'postgresql_psycopg2'
DATABASE_NAME   
'osqa'
COMMENTS_FIRST_FEW  
0
PREPEND_WWW 
False
SESSION_COOKIE_HTTPONLY 
False
DATABASE_PORT   
''
DEBUG_PROPAGATE_EXCEPTIONS  
False
MONTH_DAY_FORMAT    
'F j'
LOGIN_URL   
'/accounts/login/'
SESSION_EXPIRE_AT_BROWSER_CLOSE 
False
TIME_FORMAT 
'P'
DATE_INPUT_FORMATS  
('%Y-%m-%d',
 '%m/%d/%Y',
 '%m/%d/%y',
 '%b %d %Y',
 '%b %d, %Y',
 '%d %b %Y',
 '%d %b, %Y',
 '%B %d %Y',
 '%B %d, %Y',
 '%d %B %Y',
 '%d %B, %Y')
AUTHENTICATION_BACKENDS 
['django.contrib.auth.backends.ModelBackend']
FORCE_SCRIPT_NAME   
''
PASSWORD_RESET_TIMEOUT_DAYS 
'********************'
CACHE_MIDDLEWARE_ALIAS  
'default'
SESSION_SAVE_EVERY_REQUEST  
False
ADMIN_MEDIA_PREFIX  
'/admin_media/'
NUMBER_GROUPING 
0
SESSION_ENGINE  
'django.contrib.sessions.backends.db'
CSRF_FAILURE_VIEW   
'django.views.csrf.csrf_failure'
COMMENTS_SKETCHY_USERS_GROUP    
None
LOGIN_REDIRECT_URL  
'/accounts/profile/'
SESSION_COOKIE_PATH 
'/'
LOGGING 
{'disable_existing_loggers': False,
 'handlers': {'mail_admins': {'class': 'django.utils.log.AdminEmailHandler',
                  'level': 'ERROR'}},
 'loggers': {'django.request': {'handlers': ['mail_admins'],
                'level': 'ERROR',
                'propagate': True}},
 'version': 1}
CACHE_MIDDLEWARE_KEY_PREFIX 
''
LOCALE_PATHS    
()
TEMPLATE_STRING_IF_INVALID  
''
COMMENTS_ALLOW_PROFANITIES  
False
LOGOUT_URL  
'/accounts/logout/'
EMAIL_USE_TLS   
False
TEMPLATE_DIRS   
('/usr/local/src/osqa/forum/skins',)
FIXTURE_DIRS    
()
EMAIL_HOST  
'localhost'
DATE_FORMAT 
'N j, Y'
MEDIA_ROOT  
''
ADMINS  
()
FORMAT_MODULE_PATH  
None
DEFAULT_FROM_EMAIL  
'webmaster@localhost'
STATICFILES_DIRS    
()
MEDIA_URL   
''
DATETIME_FORMAT 
'N j, Y, P'
EMAIL_SUBJECT_PREFIX    
'[Django] '
DJANGO_VERSION  
1.3
SITE_ID 
1
DISALLOWED_USER_AGENTS  
()
ALLOWED_INCLUDE_ROOTS   
()
DECIMAL_SEPARATOR   
'.'
SHORT_DATE_FORMAT   
'm/d/Y'
DATABASE_USER   
'uosqa'
MODULE_LIST 
[<module 'osqa.forum_modules.sximporter' from '/usr/local/src/osqa/forum_modules/sximporter/__init__.pyc'>,
 <module 'osqa.forum_modules.pgfulltext' from '/usr/local/src/osqa/forum_modules/pgfulltext/__init__.pyc'>,
 <module 'osqa.forum_modules.default_badges' from '/usr/local/src/osqa/forum_modules/default_badges/__init__.pyc'>,
 <module 'osqa.forum_modules.akismet' from '/usr/local/src/osqa/forum_modules/akismet/__init__.pyc'>,
 <module 'osqa.forum_modules.exporter' from '/usr/local/src/osqa/forum_modules/exporter/__init__.pyc'>,
 <module 'osqa.forum_modules.localauth' from '/usr/local/src/osqa/forum_modules/localauth/__init__.pyc'>,
 <module 'osqa.forum_modules.robotstxt' from '/usr/local/src/osqa/forum_modules/robotstxt/__init__.pyc'>,
 <module 'osqa.forum_modules.facebookauth' from '/usr/local/src/osqa/forum_modules/facebookauth/__init__.pyc'>,
 <module 'osqa.forum_modules.oauthauth' from '/usr/local/src/osqa/forum_modules/oauthauth/__init__.pyc'>]
TEST_RUNNER 
'django.test.simple.DjangoTestSuiteRunner'
SITE_SRC_ROOT   
'/usr/local/src/osqa'
TIME_ZONE   
'Australia/Melbourne'
FILE_UPLOAD_MAX_MEMORY_SIZE 
2621440
APP_BASE_URL    
'http://127.0.0.1'
EMAIL_BACKEND   
'django.core.mail.backends.smtp.EmailBackend'
DEFAULT_TABLESPACE  
''
TEMPLATE_CONTEXT_PROCESSORS 
['django.core.context_processors.request',
 'forum.context.application_settings',
 'forum.user_messages.context_processors.user_messages',
 'django.core.context_processors.auth']
SESSION_COOKIE_AGE  
1209600
ONLINE_USERS    
{}
SETTINGS_MODULE 
'osqa.settings'
USE_ETAGS   
False
DISABLED_MODULES    
['books', 'recaptcha', 'project_badges']
LANGUAGES_BIDI  
('he', 'ar', 'fa')
DEFAULT_INDEX_TABLESPACE    
''
INTERNAL_IPS    
('127.0.0.1',)
STATIC_URL  
None
EMAIL_PORT  
25
SHORT_DATETIME_FORMAT   
'm/d/Y P'
ABSOLUTE_URL_OVERRIDES  
{}
DATABASE_OPTIONS    
{}
CACHE_MIDDLEWARE_SECONDS    
600
BANNED_IPS  
()
DEBUG_TOOLBAR_CONFIG    
{'INTERCEPT_REDIRECTS': True}
DATETIME_INPUT_FORMATS  
('%Y-%m-%d %H:%M:%S',
 '%Y-%m-%d %H:%M',
 '%Y-%m-%d',
 '%m/%d/%Y %H:%M:%S',
 '%m/%d/%Y %H:%M',
 '%m/%d/%Y',
 '%m/%d/%y %H:%M:%S',
 '%m/%d/%y %H:%M',
 '%m/%d/%y')
DATABASE_PASSWORD   
'********************'
COMMENTS_MODERATORS_GROUP   
None
PROFANITIES_LIST    
'********************'
EMAIL_HOST_USER 
''
COMMENTS_BANNED_USERS_GROUP 
None 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T23:46:20.627

我已经下载了 OSQA 的最新开发代码并重新安装了它。此新版本不再出现此问题。

感谢@Daniel 和@Ngure 的帮助。

# mobile - Opera Mobile 中的 SVG 宽度不大于 800 像素

> ID：13048598
> 
> 赞同：1
> 
> 时间：2012-10-24T11:45:57.443
> 
> 标签：mobile, xhtml, svg, opera-mobile

我有宽度设置为 2048px 的 SVG，我希望它显示在 Opera Mobile 中（如果它大于屏幕，则可以水平滚动），但由于某种原因，Opera 总是显示宽度 = 800px 的 SVG 并缩小 SVG。这只发生在真实设备上（三星 Galaxy Tab 8.9 - 分辨率 1280x800）。这也发生在水平模式下——屏幕宽度等于 1280 像素，因此 SVG 甚至比屏幕还小。另一方面，在 Opera Mobile 模拟器上，它的宽度设置为 1280 像素（仍然没有滚动，但更好）。

我还尝试将 SVG 放置在具有一些固定大小的 div 中，但没有成功 - div 的大小是正确的，但 SVG 被缩小了......

有没有办法用水平滚动条渲染页面？或者解决导致水平模式下的SVG设置为较短尺寸宽度的错误？

您可以在此处查看示例：http: [//www.pax.ndl.pl/test/svg_temp.xhtml](http://www.pax.ndl.pl/test/svg_temp.xhtml)

# mysql - 重新启动服务器后保留内存数据库的自动增量值

> ID：13048600
> 
> 赞同：0
> 
> 时间：2012-10-24T11:46:00.517
> 
> 标签：mysql, auto-increment, in-memory-database

我们[在 MySQL](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)中使用具有自动递增主键的内存表。

重新启动 MySQL 后，内存表按预期清空。

但是，我们希望保留自动增量值，以便下一个插入的行的 ID 位于上次会话中使用的 ID 之后。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:58:20.627

重新启动后，您可以使用此语句更改用于`AUTO_INCREMENT`列的下一个值。

```
ALTER TABLE mytable AUTO_INCREMENT = new_value; 
```

语法类似，但由于`CREATE TABLE`内存表是在重新启动后重新创建的，所以它对你没有多大用处。

如果此调用的时间很重要，我建议将其添加到[启动脚本](http://dev.mysql.com/doc/refman/5.1/en/server-options.html#option_mysqld_init-file)中；我不会知道任何其他方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:00:44.613

我们不能使用该`ALTER TABLE`语句，因为需要一个函数来计算初始自动增量。

解决方案是：

1.  `my.cnf`文件已更改，在`[mysqld]`我们添加的标头之后`init-file = [file_path]`

2.  该文件将使用虚拟值在表上执行插入操作（例如`INSERT INTO mytable(id) VALUES (UNIX_TIMESTAMP())`。在此之后，如果需要，可以删除该行。

# php - 将活动/当前类添加到子菜单自定义帖子标题

> ID：13048603
> 
> 赞同：0
> 
> 时间：2012-10-24T11:46:06.237
> 
> 标签：php, javascript, jquery, ajax, wordpress

这是我用来创建子菜单的代码，其中列出了我在 wordpress 中创建的所有自定义帖子：

```
 <ul class="submenu">
        <img src="<?php bloginfo('template_directory'); ?>/images/submenu.png" alt="submenu" width="62" height="1" />
        <!-- List post types -->
        <?php
            $the_query = new WP_Query( 'post_type=artworks_post' );
            // The Loop
            while ( $the_query->have_posts() ) : $the_query->the_post();
            echo '<li id="submenu_link" class="submenu_item_link">';
            echo '<a  href="' .get_permalink(). '" > ';
            the_title();
            echo '</a>';
            echo '</li>';
            endwhile;
            // Reset Post Data
            wp_reset_postdata();
        ?> 
        <img src="<?php bloginfo('template_directory'); ?>/images/submenu.png" alt="submenu" width="62" height="1" />
    </ul> 
```

例如，我当前的帖子是artworks_post/project-coke，但它没有在子菜单（项目可乐标题）中将当前/活动类添加到它的标题。

**如何在子菜单中将活动/当前类添加到当前帖子的标题？**

*子菜单以这种方式构建以获取自定义帖子...*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:08:57.593

试试我的代码？：

将此代码放在您的**functions.php中**

```
function if_current($s) {
    global $wp_query,$post;
    $current    = $wp_query->get_queried_object_id();
    $post_id    = $post->ID;
    if($current==$post_id){echo $s;}
} 
```

所以编辑你的代码：

```
<ul class="submenu">
    <img src="<?php bloginfo('template_directory'); ?>/images/submenu.png" alt="submenu" width="62" height="1" />
    <!-- List post types -->
    <?php
        $the_query = new WP_Query( 'post_type=artworks_post' );
        // The Loop
        while ( $the_query->have_posts() ) : $the_query->the_post();
        echo '<li id="submenu_link" class="submenu_item_link ';
        if_current('current');
        echo '">';
        echo '<a  href="' .get_permalink(). '" > ';
        the_title();
        echo '</a>';
        echo '</li>';
        endwhile;
        // Reset Post Data
        wp_reset_postdata();
    ?> 
    <img src="<?php bloginfo('template_directory'); ?>/images/submenu.png" alt="submenu" width="62" height="1" />
</ul> 
```

结果 ：

```
<li id="submenu_link" class="submenu_item_link current">
<a href="http://webkunst.comeze.com/test/artworks_post/project-coke/"> Project Coke</a>
</li> 
```

PS：您可以在主题`if_current('text')`中**循环**添加任何内容，这将显示何时`$post->ID == $wp_query->get_queried_object_id()`（如果当前）

所以你可以在你的 CSS中使用**当前类**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:01:18.517

您需要检查您当前所在的页面（或类别），并将其他类添加到活动的子菜单项。您可以使用`get_the_ID()`在 WP 循环中检索当前元素的 ID。

所以在这一行之前：

```
echo '<li id="submenu_link" class="submenu_item_link">'; 
```

您需要检查当前帖子 ID 是否与帖子 ID 匹配，并向`li`将显示该内容的元素添加一个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:04:27.513

我建议您使用 WordPress 菜单实现。（[这里](http://codex.wordpress.org/Appearance_Menus_SubPanel)和[这里的信息](http://codex.wordpress.org/Function_Reference/wp_nav_menu)）

这是在 WordPress 中创建菜单的一种很好且简单的“应该如何”的方法，例如，一旦您使用了 wp_nav_menu 功能，它就会自动标记活动项目。

如果你觉得被迫坚持你的方法，你必须检查当前显示的帖子是否等于你在循环中显示的帖子之一，并回显类，如当前或活动。

# jquery - Jquery：特定浏览器的 UI 效果

> ID：13048604
> 
> 赞同：0
> 
> 时间：2012-10-24T11:46:19.477
> 
> 标签：jquery

我有一个 Jquery 对话框，代码如下，

```
$(document).ready(function()
            {
            $("#dialogForm").dialog({
         autoOpen:true,
     position:'center',
        height:187,
        width: 472,
        modal: true,
show: {effect: 'explode', duration: 350}

            });
$('#body').show();
            }); 
```

这里我使用`effect`which is`explode`和 duration 是 350。这在 Chrome 和 FF 浏览器中完美运行。但在 IE 中，虽然它有效，但并没有得到`explode`Chrome/FF 中的效果。出现对话框，但似乎没有任何效果。由于此处的持续时间为 350，并且由于效果在 IE 中不可见，因此对话框似乎需要一些时间才能呈现。

因此，我不关心 IE 用户的这种效果，而是希望为 Chrome/FF 用户保留。有什么办法可以说对于 IE - 无效果，对于 Chrome/FF 应用此效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:48:22.750

你可以使用类似的东西：

```
if ( !($.browser.msie && $.browser.version == 7.0) ){ 
```

... }

更多信息：[http ://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

# c# - 使用 linq 表达式的 params 数组

> ID：13048608
> 
> 赞同：2
> 
> 时间：2012-10-24T11:46:42.070
> 
> 标签：c#, linq, entity-framework, linq-expressions

在 EF 中，当您想要在查询结果中包含导航属性时，您可以使用`Include()`. 由于某些查询需要多次调用它，我尝试围绕这个概念创建一个通用包装器：

```
public IQueryable<T> FindAll<P>(params Expression<Func<T, P>>[] predicates) where P : class {
  var entities = AllEntities();
  foreach (var p in predicates) entities = entities.Include(p);
  return entities;
} 
```

并这样称呼它：

```
var customers = FindAll(q => q.Orders, q => q.Invoices, q => q.Contacts); 
```

问题：

1.  该函数可以编译，但是当我调用它时：“无法从用法中推断出方法的类型参数。尝试明确指定类型参数。” 我究竟做错了什么？
2.  如果我让它工作，我可以`Include()`第一次调用：`var customers = FindAll(q => q.Orders, q => q.Invoices);`然后在一个单独的步骤中再次调用：`customers = customers.Include(p => p.Invoices);`还是会导致性能不佳，以至于我应该一次性完成包含？

**编辑：**
当然，JonSkeet 的回答是正确的，但是[有这个解决方案](https://stackoverflow.com/a/5376637/1711500)似乎可以满足我的要求。不知道为什么它会起作用。是因为`Aggregate()`功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:49:57.703

从根本上说，我认为你有一个问题 - 假设`q.Orders`,`q.Invoices`并`q.Contacts`返回不同的类型，你无法表达你*想要*发生的事情。你可能*想要*这样的东西：

```
entities.Include<Parent, Order>(p => p.Order);
entities.Include<Parent, Invoice>(p => p.Invoices);
entities.Include<Parent, Contact>(p => p.Contacts); 
```

...因此您希望每个谓词具有不同的值`P`。但是您正在调用一个方法，为`P`.

目前尚不清楚这是否真的给你带来了很多好处......你不能写：

```
var customers = AllEntities().Include(q => q.Orders)
                             .Include(q => q.Invoices)
                             .Include(q => q.Contacts); 
```

我想说这更清楚*，*它解决了“多类型参数”问题。

# actionscript-3 - 一段时间后直播延迟？

> ID：13048615
> 
> 赞同：1
> 
> 时间：2012-10-24T11:47:03.043
> 
> 标签：actionscript-3, apache-flex, live, netstream

我正在将 flash builder 用于实时流应用程序。当我尝试使用 netstream 播放时
：

```
 ns=new Netstream(nc);
  ns.bufferTime=0;
  ns.play(streamname,-1); 
```

我的流播放良好，延迟 1 或 2 秒...当时间流逝时，我的流播放延迟超过 8 或 9 秒...我希望我的流始终以 1 或 2 秒延迟播放...我是什么失踪？即使在很长一段时间后，如何始终以 1 或 2 秒的延迟播放流来实现？请任何人帮助我....

谢谢。

# python - （2002，“无法通过套接字'/var/lib/mysql/mysql.sock'（2）连接到本地MySQL服务器”）

> ID：13048617
> 
> 赞同：0
> 
> 时间：2012-10-24T11:47:06.787
> 
> 标签：python, mysql, django, apache

我正在使用 apache 运行基于 django 的 Web 应用程序。我可以从 python 和 linux shell 连接到 mysql，但是，当我运行服务器时，我收到以下错误。我在哪里做错了？

```
OperationalError at /

(2002, "Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)")

Request Method:     GET
Request URL:    http://dev.ls.co.uk/
Django Version:     1.3
Exception Type:     OperationalError
Exception Value:    

(2002, "Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock'   (2)")

Exception Location:     build/bdist.linux-x86_64/egg/MySQLdb/connections.py in __init__, line 187
Python Executable:  /usr/bin/python
Python Version:     2.4.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:13:16.280

根据[mysql.com](http://forums.mysql.com/read.php?11,27769,59865)上的这个线程：

> 这里有两件事可能出错：
> 
> 1.  您无权访问目录 /var/lib/mysql/whatever.sock 因为 mysql 是该文件夹的所有者或
> 2.  /path/whatever.sock 不存在。

首先，你应该知道 apache 运行的用户是什么：try`top`命令找出用户。然后，使用`id thatusername`命令来确定它在哪个组中。

然后，您可以阅读[有关调试此类问题的文章](http://blog.yourlabs.org/post/19240900759/survive-linux-nix-permissions)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T19:00:21.217

套接字文件不存在。您需要重新启动 mysqld.service 试试这个：

> 苏
> 
> systemctl 重启 mysqld.service

你有没有以不同的模式启动mysql？如果是这样，你需要杀死mysql的进程并使用上面的命令。grep for mysql进程在进程列表中查看进程id并杀死进程

> 杀死 process_id

并发出先前的命令以重新启动服务

# haskell - 生成一个由右移元素 n 次组成的列表

> ID：13048618
> 
> 赞同：5
> 
> 时间：2012-10-24T11:47:15.673
> 
> 标签：haskell

我最近正在尝试一个问题。在这种情况下，我几乎没有问题。

```
Input: generatingListforRightShifting 2 [1,2,3,4,5,6,7,8]
Output: [[1,2,3,4,5,6,7,8],[8,1,2,3,4,5,6,7],[7,8,1,2,3,4,5,6]] 
```

正如您所了解的，该程序会将元素朝正确的方向移动。第一个参数表示它将执行多少次移位。作为一个新手，我正在尝试解决一些众所周知的列表函数。并使用递归。但对我来说，递归的想法并不清楚。我的代码是：

```
generatingListforRightShifting' _ []=[]
generatingListforRightShifting' 0 x=x
generatingListforRightShifting' n xs=   newList where
                        newList=takeWhile(\i->[1..n] 
                                            <=n)(reverse(take 
                                           i(reverse xs))++reverse(drop i(reverse xs))) 
```

我知道我正在做的主要错误是在 takeWhile 部分。但是我怎样才能迭代n次。我已经制作了一个程序，可以直接显示移位结果，例如 Input:generatingListforRightShifting 2 [1,2,3,4,5,6,7,8] Output: [7,8,1,2,3,4, 5,6] 但是当我尝试进行所有先前的转换时，我做不到。

有谁可以帮我离开这里吗。如果你给我解决的想法，我也欢迎你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:57:19.767

这通常称为旋转而不是移位。将列表向右旋转一次很简单，因为有一些方法可以获取[最后一个元素](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3alast)和除最后一个[之外的所有元素](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3ainit)的子列表。

```
rotateOnce lst = (last lst):(init lst) 
```

另请注意，旋转两次相当于调用 rotateOnce 两次。因此，该方法可以简单地实现为先前结果的递归：

```
rotateN 0 lst = [lst]
rotateN n lst = lst : rotateN (n-1) ((last lst):(init lst)) 
```

（注意：这可能不是最佳解决方案。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:44:08.927

您似乎更喜欢我们修复您的代码而不是重新开始，所以让我们看看您的代码。首先，主列表砍：

```
reverse (take i (reverse xs)) ++ reverse (drop i (reverse xs)) 
```

现在从列表末尾`reverse (take i (reverse xs))`获取`i`元素，但是您将列表反转两次以实现此目的，这样做会更好 `drop (length xs - i) xs`。同样，您可以实现`reverse (drop i (reverse xs)))` 为`take (length xs - i) xs`. 这给了我们

```
drop (length xs - i) xs ++ take (length xs - i) xs 
```

现在您的代码`\i->[1..n]<=n`没有意义，因为它将列表`[1..n]` 与进行比较`n`，这是行不通的。我认为您正在尝试创建一个`i`从 `1`to运行的循环`n`，这是一个不错的计划。让我们使用列表推导来获得我们想要的：

```
[drop (length xs - i) xs ++ take (length xs - i) xs | i <- [1 .. length xs], i <= n] 
```

但是现在我们从 1 运行到列表的长度，但丢弃了上面的数字`n`，这样写会更好

```
[drop (length xs - i) xs ++ take (length xs - i) xs | i <- [1..n]] 
```

这确实允许`n`超过`length xs`，但我看不出有什么大问题，我们可以先检查一下。

现在请注意，我们只`i`在 form`(length xs - i)`中使用，实际上我们重新计算 `length xs`的次数比我们应该的要多得多，所以不要让run `i`from `1`to`n`和 using `length xs - i`，我们为什么不直接运行 from to ：`j=length xs -i``j``length xs``length xs - n`

```
[drop j xs ++ take j xs | j <- [length xs,length xs - 1 .. length xs - n]] 
```

这有效，因为例如`[6,5..1] == [6,5,4,3,2,1]`

这样做会更整洁

```
let l = length xs in
  [drop j xs ++ take j xs | j <- [l,l - 1 .. l - n]] 
```

或者你可能`take`比你更喜欢做算术，所以我们可以使用：

```
let l = length xs in
  take n [drop j xs ++ take j xs | j <- [l,l - 1 .. 0]] 
```

这还有一个额外的好处，就是阻止你做太多事情，当你回到起点时阻止你。

我会将您的功能从`generatingListforRightShifting`to重命名`rotationsR`为

```
rotationsR n xs = let l = length xs in
  take n [drop j xs ++ take j xs | j <- [l,l - 1 ..]] 
```

这给了`rotationsR 6 [1..4] == [[1,2,3,4],[4,1,2,3],[3,4,1,2],[2,3,4,1],[1,2,3,4]]`.

左旋转看起来更简单：

```
rotationsL n xs = take n [drop j xs ++ take j xs | j <- [0..length xs]] 
```

* * *

题外话：我忍不住，对不起，我又开始了。

我仍然不喜欢每次都丢掉和拿走所有的东西，我宁愿弹出无限多的副本`xs`（第一个：`cycle xs``tails`

rotationsL' n xs = let l = length xs in take n 。地图（取 l）。尾巴。周期 $xs

由于惰性评估，只有有限的`cycle xs`ever 被计算，但是这个可以运行和运行：`rotationsL' 10 [1..4]`给你：

```
 [[1,2,3,4],[2,3,4,1],[3,4,1,2],[4,1,2,3],[1,2,3,4],[2,3,4,1],[3,4,1,2],[4,1,2,3],[1,2,3,4],[2,3,4,1]] 
```

以这种方式进行正确的循环也很好，但它不起作用，因为我需要从无限列表的末尾开始并返回。让我们重用你的反向，采取你需要的，再次反向技巧，虽然：

```
rotationsR' n xs = let l = length xs in
  take n . map (reverse.take l) . tails . cycle . reverse $ xs 
```

* * *

题外话：如果您宁愿更贴近原始代码，您可以这样做

```
generatingListforRightShifting n xs = 
    [reverse (take i (reverse xs)) ++ reverse (drop i (reverse xs)) | i <- [1..n]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T11:53:45.260

您可以递归地定义“移位”：`shift 0`是无操作，`shift 1+n (x:xs)`是`shift n xs`。

就像是：

```
shift 0 = \x -> x
shift n = \lst@(x:xs) -> (shift (n-1) xs)

-- example:
sh3 = shift 3 
```

然后“旋转”问题变得更容易：

```
rotate n = \lst -> (shift lst) ++ (take n lst) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T12:29:20.560

我会放弃目前非常复杂的方法。相反，专注于抽象操作的不同组件。如果将操作分成几部分，您会注意到有两个对称组件：向左旋转列表，向右旋转列表。您希望定义的操作在某个列表上以指定的次数迭代右旋转。这表明可以通过对*左*或*右旋转**进行*指定次数的*迭代*来定义所需的操作。例如，

 **```
left :: [a] -> [a]
left [] = []
left xs = tail xs ++ [head xs]

right :: [a] -> [a]
right [] = []
right xs = last xs : init xs

shiftL :: Int -> [a] -> [[a]]
shiftL n = take n . iterate left

shiftR :: Int -> [a] -> [[a]]
shiftR n = take n . iterate right 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T13:15:12.110

在这里使用`cycle`看起来不错：

```
shifts n xs = take (n+1) $ shifts' (cycle xs)
  where
    len = length xs
    shifts' ys = take len ys:shifts' (drop (len-1) ys) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T18:05:10.303

我发现左旋转非常简单，使用`splitAt`：

```
import Data.Tuple (swap)
rotateLeft n = uncurry (++) . swap . splitAt n

> rotateLeft 2 "Hello World!"
>>> "llo World!He" 
```**

# wordpress - wordpress：hide_empty 不工作

> ID：13048620
> 
> 赞同：0
> 
> 时间：2012-10-24T11:47:35.833
> 
> 标签：wordpress

我目前正在运行查询以提取分类的所有术语并列出每个术语下的帖子。

我所做的工作正常。我尝试添加“hide_empty”参数并将其设置为 false，以便我可以显示空术语。出于某种原因，它只是不工作。

这是我的查询：

```
 <?php

// List posts by the terms for a custom taxonomy of any post type

$post_type = 'streams';
$tax = 'programmes';

$tax_terms = get_terms('programmes', array(
    'hide_empty' => 0,
    'hierarchical' => 0

 ) );
if ($tax_terms) {
    foreach ($tax_terms  as $tax_term) {
    $args = array(
        'post_type' => $post_type,
        "$tax" => $tax_term->slug,
        'post_status' => 'publish',
        'posts_per_page' => -1,
        'caller_get_posts'=> 1
    );

        $my_query = null;
        $my_query = new WP_Query($args);

        if( $my_query->have_posts() ) : ?>

            <p class="breadcrumb"><?php echo $tax_term->name; ?></p>
            <ul class="taxlist">
            <?php while ( $my_query->have_posts() ) : $my_query->the_post(); ?>

                <li id="post-<?php the_ID(); ?>">
                    <a href="<?php the_permalink(); ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a>
                </li>

            <?php endwhile; // end of loop ?>

            </ul>

        <?php else : ?>
        <?php endif; // if have_posts()
        wp_reset_query();

    } // end foreach #tax_terms
}
?> 
```

任何帮助将不胜感激。

干杯，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:03:41.280

您正在循环浏览分类术语，但如果没有与当前正在循环的术语相关联的帖子，则您不会输出任何内容。如果您希望输出`$term->name`不管，您应该将该部分代码更改为 -

```
$my_query = null;
$my_query = new WP_Query($args);

<p class="breadcrumb"><?php echo $tax_term->name; ?></p>

if( $my_query->have_posts() ) : ?>

    <ul class="taxlist"> 
```

# python - 为条目提供编号

> ID：13048621
> 
> 赞同：0
> 
> 时间：2012-10-24T11:47:36.833
> 
> 标签：python, text-processing

csv 文件具有以下内容：

```
Cautus Drogisterijen B.V.
Cautus Drogisterijen B.V.
Clever Franke
De Inrichting
Teva Pharmaceuticals Europe B.V. 
```

名称从 csv 导入，然后转换等。

我有以下脚本：

```
#Gegevens
l = (gegevens)
#script
#Welke sleutels moet hij pakken
sortkey = operator.itemgetter(1,5)
#De identieke sleutel selecteren
l_clean = sorted(l,key=sortkey)
#delijst maken
l_final = [(k, list(v)) for k,v in groupby(l_clean, key = operator.itemgetter(1))]
#importeer csv optie
import csv
#bestand kiezen
with open('export.csv', 'wb') as f:
    #Write 
    writer = csv.writer(f)
    #loop over de lijst
    for k,v in l_final:
    #welke gegevens hij moet tonen
       info_rest = v[0][:5]+v[0][5:]
       #combineerd de verzekeringen
       info_combine = map(operator.itemgetter(5),v)
       uniekid = k
       verzl = info_combine
       name = info_rest[0]
       risicoadr = info_rest[2]
       polisnummer = info_rest[3]
       relatienummer = info_rest[4]
       aanhef = info_rest[6]
       contactpersoon = info_rest[7]
       emailadr = info_rest[8]
       klantgegevens = []      
       #lijst met alle gegevens
       klantgegevens1 = [uniekid,naam,verz,risicoadr,polisnummer,relatienummer,aanhef,contactpersoon,emailadr]       
       klantgegevens.append (klantgegevens1)     
       for i, w in enumerate(name):
           print (i,w)

       #welke gegevens hij erin moet schrijven
       writer.writerow(klantgegevens) 
```

这产生了这个输出：

```
(0, 'C')
(1, 'a')
(2, 'u')
(3, 't')
(4, 'u')
(5, 's')
(6, ' ')
(7, 'D')
(8, 'r')
(9, 'o')
(10, 'g')
(11, 'i')
(12, 's')
(13, 't')
(14, 'e')
(15, 'r')
(16, 'i')
(17, 'j')
(18, 'e')
(19, 'n')
(20, ' ')
(21, 'B')
(22, '.')
(23, 'V')
(24, '.')
(0, 'C')
(1, 'a')
(2, 'u')
(3, 't')
(4, 'u')
(5, 's')
(6, ' ')
(7, 'D')
(8, 'r')
(9, 'o')
(10, 'g')
... 
```

如您所见，他在名称中的每个字母上循环并给该字母一个数字，但我想要的是我的输出如下所示：

```
(0, 'cautus drogisterij B.V.')
(1, 'cautus drogisterij B.V.') 
```

每个名字都有一个数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:50:30.550

如果您`name`是 a `list of names`，那么您的代码应该可以正常工作，前提是您没有另一个包含该循环的循环：-

**这有效**： -

```
>>> name = ['rohit', 'jain']
>>> for i,x in enumerate(name):
    print (i, x)

(0, 'rohit')
(1, 'jain') 
```

**然而，这就是你得到**的，你可能有一个外循环，迭代列表： -

```
>>> name = ['rohit', 'jain']
>>> for name in name:
        for i, x in enumerate(name):
            print (i, x)

(0, 'r')
(1, 'o')
(2, 'h')
(3, 'i')
(4, 't')
(0, 'j')
(1, 'a')
(2, 'i')
(3, 'n') 
```

* * *

**更新**： -

你`info_rest`实际上是一个一维列表： -

```
for k,v in l_final:
    info_rest = v[0][:5]+v[0][5:] 
```

上面的代码为您提供了二维列表中的一维列表`v`：-

```
>>> v = [['rohit', 'jain'], ['a', 'ab']]
>>> info_rest = v[0][:5]+v[0][5:]
>>> info_rest
['rohit', 'jain'] 
```

所以，当你说： -

```
name = info_rest[0];  # name contains 'rohit; 
```

你的名字将包含一个字符串而不是一个列表。-`'rohit'`在这种情况下

所以，与其迭代你的名字： -

```
for i, w in enumerate(name):
           print (i,w) 
```

只需打印它：-

```
print (k, name)  # k is the index from outer loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:02:08.790

您有一个遍历名称列表的外部循环。因此，此当前循环遍历 string `name`。不幸的是，提供的代码太短，无法看到更多内容。

**编辑**：来吧，您的评论显然是在说“loop over de lijst”。只需删除整个`for`循环，然后`print(k, name)`

# android - java堆空间错误使eclipse挂起

> ID：13048623
> 
> 赞同：3
> 
> 时间：2012-10-24T11:47:46.037
> 
> 标签：android

我的错误日志中出现了这个错误，我的 Eclipse 完全挂起，说我的 xml 布局文件有 80 多个视图，现在为了携带一些页眉页脚和一些边框布局，我需要有这么多视图，

这个问题有什么解决办法？？？？？？

```
eclipse.buildId=I20100608-0911
java.version=1.6.0_35
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.jee.product

Error
Wed Oct 24 17:15:01 IST 2012
activity_change_alert_settings.xml: Java heap space

java.lang.OutOfMemoryError: Java heap space
at org.eclipse.jdt.internal.compiler.util.Util.getInputStreamAsByteArray(Util.java:317)
at org.eclipse.jdt.internal.core.util.Util.getResourceContentsAsByteArray(Util.java:1136)
at org.eclipse.jdt.internal.core.JavaProject.readFileEntriesWithException(JavaProject.java:2420)
at org.eclipse.jdt.internal.core.JavaProject.readFileEntries(JavaProject.java:2461)
at org.eclipse.jdt.internal.core.JavaProject.readRawClasspath(JavaProject.java:2499)
at com.android.ide.eclipse.adt.internal.resources.manager.ProjectClassLoader.getExternalJars(ProjectClassLoader.java:260)
at com.android.ide.eclipse.adt.internal.resources.manager.ProjectClassLoader.loadClassFromJar(ProjectClassLoader.java:232)
at com.android.ide.eclipse.adt.internal.resources.manager.ProjectClassLoader.findClass(ProjectClassLoader.java:76)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:153)
at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207)
at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135)
at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
at com.android.layoutlib.bridge.android.BridgeContext.inflateView(BridgeContext.java:364)
at com.android.layoutlib.bridge.impl.binding.BaseAdapter.getView(BaseAdapter.java:148)
at com.android.layoutlib.bridge.impl.binding.FakeAdapter.getView(FakeAdapter.java:106)
at android.widget.Spinner.measureContentWidth(Spinner.java:669)
at android.widget.Spinner.onMeasure(Spinner.java:432)
at android.view.View.measure(View.java:15172)
at android.widget.TableRow.getColumnsWidths(TableRow.java:312)
at android.widget.TableLayout.findLargestCells(TableLayout.java:504)
at android.widget.TableLayout.measureVertical(TableLayout.java:469)
at android.widget.TableLayout.onMeasure(TableLayout.java:435)
at android.view.View.measure(View.java:15172)
at android.widget.RelativeLayout.measureChild(RelativeLayout.java:602)
at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:415)
at android.view.View.measure(View.java:15172)
at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617)
at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:399)
at android.view.View.measure(View.java:15172)
at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T11:52:44.783

尝试增加 eclipse.ini 文件中的 java 堆空间设置，看看是否有帮助

```
--launcher.XXMaxPermSize
512M
-Xms512m
-Xmx1024m 
```

这三个设置是您需要修改的设置。如果 Eclipse 继续挂起，您可以选择更高的值。

# php - 压缩文件在 php

> ID：13048626
> 
> 赞同：0
> 
> 时间：2012-10-24T11:47:52.040
> 
> 标签：php, mysql

我正在使用此代码来备份我的 mysql 数据库，它适用于我的目的。此脚本将我的备份保存为 .sql 文件如何压缩该 sql 文件。这是代码

```
$username = "***";
$password = "***";
$hostname = "***";
$database = "***";
$username =escapeshellcmd($username);
$password =escapeshellcmd($password);
$hostname =escapeshellcmd($hostname);
$database =escapeshellcmd($database);
$backupFile=''.date("Y-m-d-H-i-s").$database.'.sql';
$command = "mysqldump -u$username -p$password -h$hostname $database > $backupFile";
system($command, $result);
echo $result; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:52:31.453

只需将输出通过管道传输到 gzip 或类似的

```
mysqldump -uroot | gzip > backupfile.zip 
```

[http://mediakey.dk/~cc/compressing-mysqldump-output-mysql-gzip-bzip2-and-lzma-7z/](http://mediakey.dk/~cc/compressing-mysqldump-output-mysql-gzip-bzip2-and-lzma-7z/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T11:54:19.643

对于纯 PHP 解决方案，我相信应该这样做：（来自[http://www.php.net/manual/en/ziparchive.addfile.php](http://www.php.net/manual/en/ziparchive.addfile.php)

```
$z = new ZipArchive();
$z->open("sqldump.zip", ZIPARCHIVE::CREATE);
$z->addFile($backupFile);
$z->close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:51:15.770

你可以使用`tar`：`tar -cf archive.tar yourfile.sql`使用`exec()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-09T00:11:43.930

只是改变

```
`$backupFile=''.date("Y-m-d-H-i-s").$database.'.sql';` 
```

到

```
`$backupFile=''.date("Y-m-d-H-i-s").$database.'.zip';` 
```

或任何其他 zip 文件类型。它是一个 shell 命令，可以保存为许多不同的压缩格式。

# ruby - 从 gem 中的子目录加载图像

> ID：13048635
> 
> 赞同：0
> 
> 时间：2012-10-24T11:48:13.300
> 
> 标签：ruby, gem, rubygame

我用 bundler 创建了一个新的 gem，我正在玩 ruby​​game。到目前为止，一切正常，除了我无法在 Surface 上获取图像，因为我无法弄清楚我的图像目录的路径是什么。我知道这很可悲，但我有点习惯 Rails 为我加载图像。

图像的完整路径是：`/usr/local/src/jewel_thief/lib/jewel_thief/images/player.png`.

我正在尝试将其用于：

`/usr/local/src/jewel_thief/lib/jewel_thief/player.rb`（[查看源代码](https://gist.github.com/3945589#file_player.rb)）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:50:58.117

改变

```
@image = Surface.load 'jewel_thief/images/player.png' 
```

至

```
@image = Surface.load '/jewel_thief/images/player.png' 
```

我认为以下也有效

```
@image = Surface.load '/jewel_thief/lib/jewel_thief/images/player.png' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:12:09.137

路径最终是这样的：

```
@image = Surface.load 'lib/jewel_thief/images/player.png' 
```

最后，在被难住了几个小时之后。不过感谢您的帮助！真的。

# jsf-2 - Primefaces 灯箱在点击 commandLink 时关闭

> ID：13048637
> 
> 赞同：0
> 
> 时间：2012-10-24T11:48:20.200
> 
> 标签：jsf-2, primefaces

它只是一个简单的 Primefaces 灯箱，我想在其中使用 commandLinks。不幸的是，当我单击 commandLink 时它会关闭。有没有办法让灯箱保持打开状态？

这是我的代码的示例：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui" template="template.xhtml">

<ui:define name="content">
    <p:lightBox>
        <h:outputLink value="#">
            <h:outputText value="open lightbox" />
        </h:outputLink>

        <f:facet name="inline">
            <h:form>
                <h:commandLink>
                        commandLink
                </h:commandLink>
            </h:form>
        </f:facet>
    </p:lightBox>

</ui:define>

</ui:composition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:08:27.200

使用 ajax（异步）请求而不是同步请求：

```
<h:commandLink ...>
    <f:ajax ... />
</h:commandLink> 
```

或者您已经在使用 PrimeFaces，只需使用`<p:commandLink>`（默认情况下它已经使用 ajax）：

```
<p:commandLink ... /> 
```

使用 ajax，默认情况下不会执行响应的新页面替换（这基本上将任何内容“重置”为默认值）。您可以`<f:ajax>`通过`render`属性判断组件树的哪些部分应该在客户端和属性`<p:commandLink>`中更新`update`。例如，如果您只想渲染/更新父表单，请使用`@form`. 例如

```
<p:commandLink ... update="@form" /> 
```

# sql-server - 带有“IN”运算符的 sql 查询的动态参数

> ID：13048641
> 
> 赞同：0
> 
> 时间：2012-10-24T11:48:33.950
> 
> 标签：sql-server, tsql, stored-procedures, sqlparameter

我有一个 ASP.NET 网站 (c#)，在代码隐藏中我想使用`IN`SQL [http://www.w3schools.com/sql/sql_in.asp](http://www.w3schools.com/sql/sql_in.asp)中的运算符从我的数据库中获取数据。

语法是：

```
SELECT column_name(s)
FROM table_name
WHERE column_name IN (value1,value2,...) 
```

我使用存储过程来获取数据，在这个过程中我运行，最后，选择。

我的问题是如何动态构建`value1, value2, ...`查询的 ( ) 部分？如何将`SqlParameter`出现在`IN`运算符中的值作为（s）发送？

存储过程定义如下：

```
CREATE PROCEDURE [dbo].[GetAllUsers]
    @ORGANIZATION_ID int = null
AS
BEGIN
    SET NOCOUNT ON;

    begin
       SELECT * 
       from USERS
       where ORGANIZATION_ID = @ORGANIZATION_ID
    end
END 
```

我想用以下内容替换该`WHERE`子句：

```
WHERE ORGANIZATION in (xxxxxxxxxxxxx) 
```

这该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:58:17.820

您可以使用动态 sql：

```
CREATE PROCEDURE [dbo].[GetAllUsers]
    @ORGANIZATION_ID varchar(max) = null
AS
BEGIN
    declare @sql varchar(max)
    @sql = 'SELECT * 
            from USERS
            where ORGANIZATION_ID in ('+@ORGANIZATION_ID+')' 
    SET NOCOUNT ON;
        begin
          exec(@sql)  
        end
END 
```

您必须将类型更改`@ORGANIZATION_ID`为 varchar 并使用

一个身份证：

```
exec '1' 
```

或 ID 列表：

```
exec '1,2,3,4' 
```

# javascript - 保存和嵌入用户自己的 JavaScript 代码

> ID：13048647
> 
> 赞同：0
> 
> 时间：2012-10-24T11:48:58.997
> 
> 标签：javascript, xss

我正在托管一项小型服务，人们可以在其中创建在线日历。我正在考虑允许用户将自己的 javascript/html/css 保存并嵌入到他们的日历中。

我有点担心安全隐患——有没有办法使用 XSS 等，以便用户的 javascript 代码可以影响除了嵌入代码的日历之外的其他一些日历？

从客户的角度来看，应该允许页面上的 JS 更改页面的所有方面。

我想最安全的方法是只允许自定义 HTML/CSS，但是使用 JS 修改日历的布局和功能将是一个不错的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:51:38.393

这可能非常危险，原因与

> 评估是**邪恶的**

您基本上是在为用户提供运行恶意脚本的机会。

示例：您正在使用 AJAX 更新服务器上的某些内容。我来了，打开我信任的 Firebug，查看 AJAX 请求，并决定破坏一点，因为这就是我所做的。我只是重写了 AJAX 调用，将我的日历的 id 更改为某个随机的，然后 bam，这就是我今天的肮脏行为。

# zend-framework2 - Zend框架2、分页路由问题

> ID：13048650
> 
> 赞同：2
> 
> 时间：2012-10-24T11:49:15.443
> 
> 标签：zend-framework2, zend-framework-routing

我在 zf2 中遇到 zend 分页和路由问题。我想在同一页面上显示反馈项目的详细信息及其子项目（操作）的列表。我的路线代码如下

```
$routes['dashboard_inbox_actions'] =  array(
    'type'      => 'segment',
    'options'   => array(
        'route' => '/dashboard/inbox/detail[/:feedback[/actions/page/:page]]',
        'constraints' => array(  
            'feedback'     => '[0-9]+',
            'page'         => '[0-9]+',
        ),
        'defaults' => array(      
             '__NAMESPACE__' => 'Dashboard\Controller',
            'controller'    => 'inbox' ,
            'action'        => 'detail',                
            'feedback'      => 0 ,
            'page'          => 1
        ),
    ),
); 
```

我通过网址喜欢

```
/dashboard/inbox/detail/4 
```

在列表页面中，用于渲染提供的子项页面。

```
<?php echo $this->paginationControl($this->paginator, 'Sliding' ); ?> 
```

它创建分页网址，反馈 id 为 0（这是我的问题）

```
/dashboard/inbox/detail/0/actions/page/2
/dashboard/inbox/detail/0/actions/page/3 
```

我手动粘贴网址

```
 /dashboard/inbox/detail/4/actions/page/2 
```

它显示第 2 页为活动项目。我的控制器代码工作正常并给了我结果，但 paginationControl 仍然创建反馈 id 为 0 的 url。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T13:11:29.597

您需要使用 paginationControl 视图助手的第四个参数：

```
<?php 
    echo $this->paginationControl($this->paginator, 'Sliding',
          'my_pagination_control', array('route' => 'paginator_route')); 
?> 
```

您可以将参数传递给视图部分，例如传递您的路线名称，以便您可以使用正确的路线生成 yoru 链接。

然后在您的视图部分中，您可以在 url 帮助程序中使用它：

```
<?php echo $this->url($this->route, array('page' => $this->first), FALSE, TRUE) ?> 
```

请参阅： http: [//framework.zend.com/manual/2.0/en/modules/zend.view.helpers.html#url-helper](http://framework.zend.com/manual/2.0/en/modules/zend.view.helpers.html#url-helper) 在这里您可以看到 url 助手可以使用当前匹配的参数：

```
url($name, $urlParams, $routeOptions, $reuseMatchedParams) 
```

将 $reuseMatchedParams 设置为 true 将允许使用当前匹配的参数作为默认值。

# windows - 如何禁用安全警告

> ID：13048651
> 
> 赞同：1
> 
> 时间：2012-10-24T11:49:17.650
> 
> 标签：windows, powershell, executionpolicy

如何禁用安全警告：

```
Run only scripts that you trust
While scripts from the Internet can be useful, this script can potentially harm your computer
Do you want to run in POWERSHELL 
```

我尝试将策略设置为不受限制。

操作系统是windows server 2003。

我试图执行的脚本在网络驱动器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:51:25.770

网络位置通常与 Internet 的其余部分位于同一不受信任的区域中。您可以将该位置添加到您的受信任站点，也可以`Set-ExecutionPolicy`使用提升的 PowerShell 更改执行策略。

# java - Jersey 将字符值序列化为 ASCII 等效数字字符串

> ID：13048658
> 
> 赞同：1
> 
> 时间：2012-10-24T11:50:13.233
> 
> 标签：java, json, rest, jersey, jackson

我正在使用 Jersey API 实现简单的 RESTful 网络服务。我的服务器项目托管在 Apache Tomcat 6.0 版上，它包含**asm-3.0.jar**、**jersey-bundle-1.9.1.jar**和**jsr311-api-1.1.1.jar**。

我有两个资源类。一个是`UserItemsResource`旨在表示`UserItem`对象的集合。另一个是`UserItemResource`代表单一`UserItem`资源。

下面是`UserItemsResource`类的代码：

```
@Path("/useritems")
public class UserItemsResource {

    @Context
    UriInfo uriInfo;

    @Context
    Request request;

    @Path("{userId}")
    public UserItemResource getUserItemResource(@PathParam("userId") long userId) {
        return new UserItemResource(uriInfo, request, userId);
    }
} 
```

`UserItemResource`班级：

```
public class UserItemResource {
    @Context
    UriInfo uriInfo;

    @Context
    Request request;

    private long userId;

    public UserItemResource(UriInfo uriInfo, Request request, long userId) {
        this.uriInfo = uriInfo;
        this.request = request;
        this.userId = userId;
    }

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public UserItem getUserItem() {
        return new UserItem(userId, 'M', "Pawan");
    }
} 
```

和`UserItem`班级：

```
@XmlRootElement
public class UserItem {
    private long userId;
    private char sex;
    private String displayName;

    public UserItem() {

    }

    public UserItem(long userId, char sex, String displayName) {
        this.userId = userId;
        this.sex = sex;
        this.displayName = displayName;
    }

    public long getUserId() {
        return userId;
    }

    public char getSex() {
        return sex;
    }

    public String getDisplayName() {
        return displayName;
    }

    public void setUserId(long userId) {
        this.userId = userId;
    }

    public void setSex(char sex) {
        this.sex = sex;
    }

    public void setDisplayName(String displayName) {
        this.displayName = displayName;
    }
} 
```

当我调用资源（如`/useritems/101`）时，我收到来自服务器的以下响应。

```
HTTP/1.1 200 OK
Date: Wed, 24 Oct 2012 11:30:35 GMT
Transfer-Encoding: chunked
Content-Type: application/json
Server: Apache-Coyote/1.1

{
  "displayName": "Pawan",
  "sex": "77",
  "userId": "101"
} 
```

您可以看到**"sex"**属性的值生成为**"77"**，它是字符 'M' 的 ASCII 等价物。我相信这应该只作为“M”出现，以便我的客户端代码可以成功地将其解析回“M”。我正在使用**Jackson** API（2.0.2 版）将服务器响应中的 json 实体解析回 UserItem 类的对象。

我错过了什么吗？或者这是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:05:13.727

Jersey 支持很少的 JSON 表示法，并且每种表示法对生成的 JSON 的外观都有略微不同的约定。[您可以在此JavaDoc](http://jersey.java.net/nonav/apidocs/1.9.1/jersey/com/sun/jersey/api/json/JSONConfiguration.Notation.html)中看到符号之间的区别。`MAPPED`正如您已经发现的那样，默认设置是在 JSON 输出中的数字周围加上引号。

你可以做两件事：

*   打开使用 Jackson 库创建 JSON 输出的[Jackson POJO 支持](http://jersey.java.net/nonav/documentation/latest/json.html#json.pojo.approach.section)（如果您也在客户端使用 Jackson，这可能是一个更好的选择）。还有一个如何使用它的示例 - [JacksonJsonProvider](https://github.com/jersey/jersey-1.x/tree/master/jersey/samples/jacksonjsonprovider)。
*   使用`NATURAL`JSON 表示法来处理您所期望的数字。为此，您需要提供一个自定义[ContextResolver](http://jsr311.java.net/nonav/javadoc/javax/ws/rs/ext/ContextResolver.html)并将其注册到您的应用程序中。可以在[Jersey 用户指南](http://jersey.java.net/nonav/documentation/latest/)（[JSON 支持 - 配置选项](http://jersey.java.net/nonav/documentation/latest/json.html#d4e928)）或[json-from-jaxb 示例之一](https://github.com/jersey/jersey-1.x/tree/master/jersey/samples/json-from-jaxb)（请参阅[JAXBContextResolver](https://github.com/jersey/jersey-1.x/blob/master/jersey/samples/json-from-jaxb/src/main/java/com/sun/jersey/samples/jsonfromjaxb/config/JAXBContextResolver.java)）中找到如何实现此目的的示例。

# json - 道场 1.8。由 FileItemReadStore 提供的 DataGrid 中的 FilteringSelect 不起作用

> ID：13048659
> 
> 赞同：0
> 
> 时间：2012-10-24T11:50:16.660
> 
> 标签：json, datagrid, store, dojo

我在 DOJO 1.8 和 Datagrid 上苦苦挣扎。我想将 filterSelect 放入 Datagrid 单元格中。小部件应由商店提供。商店由 AJAX 请求提供并找到工作。选择小部件也会显示，但它是空的。在浏览器中既看不到值也看不到选项：

商店代码：

```
 // AJAX REQUEST TO GET PROJECTS AND SAVE AS STORE
 require(['dojo/request', 'dojo/data/ItemFileReadStore'], function(request, ItemFileReadStore){
    request('project/json/getprojects', {
        handleAs: 'json'
    }).then(function(json){
       var projectStore = new ItemFileReadStore({data: {'identifier':'id', 'label':'label', 'items': json}});   
    }); 
```

我检索的 JSON 如下所示：

```
[{"id":2,"name":"Bilder-App","customer":"Company A","label":"Company A >> Bilder-App"},{"id":8,"name":"Zeiterfassung","customer":"Company B","label":"Company B >> Zeiterfassung"}] 
```

目标是选择框直观地显示“标签”字段并将“id”保存到商店/网格。

这是单元格的 grid_layout 代码：

```
{field: "project_id", name: "Kunde/Projekt", type: dojox.grid.cells._Widget, widgetClass: dijit.form.Select, widgetProps: {store: projectStore,  searchAttr: "label"} }, 
```

有人能帮我吗？

非常感谢！

AFX

* * *

这是工作格式化程序：

```
 // PROJECT-ID FORMATTER
     function formatProjectId(value, index){ 
            var item =  projectStore.get(value);
            var label = item['label'];  
             return label; 
      } 
```

但是，有一个小问题：当我在选择框中选择项目时，它会在字段中显示 id。当我离开该字段时，它会正确格式化。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:18:26.290

好的！

我能够找到解决方案。

首先，我更改为 Memory-Store，因为我发现 ItemFileReadStore 无法正常工作。

我在某处读到，您需要专门要求“dijit/form/FilteringSelect”。所以我就这么做了。

所以我在布局变量中的字段如下所示：

```
 {field: "project_id", name: "Kunde/Projekt", type: dojox.grid.cells._Widget, widgetClass: dijit.form.FilteringSelect, widgetProps: {searchAttr: "id", labelAttr: "label", store: projectStore}}, 
```

我的商店有一个由字段“id”和“标签”组成的数据数组......所以它给了字段这些属性！和 BOOOOM ......它的工作原理！

现在我必须添加一个格式化函数来格式化显示的 ID，一旦它们被编辑。

很快就发布这个！

祝你好运，AFX

# c - 实际的 write() 何时发生在 C 中？

> ID：13048672
> 
> 赞同：2
> 
> 时间：2012-10-24T11:51:20.813
> 
> 标签：c, unix

`write()`执行系统调用时到底发生了什么？

假设我有一个程序，它使用`write()`函数调用将某些数据写入文件。现在 C 库有自己的内部缓冲区，操作系统也有自己的缓冲区。

这些缓冲区之间发生了什么交互？

就像当 C 库缓冲区被完全填满时，它会写入操作系统缓冲区，当操作系统缓冲区被完全填满时，实际的写入是在文件上完成的？

我正在寻找一些详细的答案，有用的链接也会有所帮助。考虑 UNIX 系统的这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:32:06.780

write() 系统调用（实际上是所有系统调用）只不过是应用程序和操作系统之间的契约。

*   对于“普通”文件，write() 仅将数据放在缓冲区上，并将该缓冲区标记为“脏”
*   在未来的某个时间，这些脏缓冲区将被收集并实际写入磁盘。这可以通过 fsync() 强制执行
*   这是由挂载文件系统表中的 .write() “方法”完成的
*   这将调用硬件的 .write() 方法。（这可能涉及另一层缓冲，例如 DMA）
*   现代硬盘有自己的缓冲区，即使 OS-> 控制器告诉它们，这些缓冲区*可能实际上已写入物理磁盘，也可能未写入物理磁盘。*

现在，一些（*异常**）*文件没有write() 方法来支持它们。想象一下 open()ing "/dev/null"，然后 write()ing 一个缓冲区给它。系统*可以*选择不缓冲它，因为它永远不会被写入。

 **另请注意， write() 的行为确实取决于文件的性质；对于网络套接字， write(fd,buff,size) 可以在发送 size 个字节之前返回（write 将返回*发送*的字符数）。但是一旦他们被*发送*，就不可能知道他们在哪里。它们可能仍然在网络缓冲区中（例如等待 Nagle ...），或网络接口内的缓冲区，或路由器中的缓冲区或线路上某处的交换机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T12:07:54.837

我所知道的...

该`write()`函数是一个较低级别的东西，其中库不缓冲数据（与`fwrite()`库做/可能缓冲数据的地方不同）。

尽管如此，唯一的保证是操作系统在下一次`fsync()`完成之前将数据传输到磁盘驱动器。但是，硬盘驱动器通常有自己的内部缓冲区，这些缓冲区（有时）超出了操作系统的控制范围，因此即使后续操作`fsync()`已经完成，也可能在数据从磁盘驱动器的内部缓冲区实际写入之前发生电源故障或其他事情到磁盘的物理介质。

本质上，如果您真的必须确保您的数据实际写入磁盘的物理介质；那么您需要重新设计您的代码以避免此要求，或接受（小）故障风险，或确保硬件能够胜任（例如，获得 UPS）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T12:03:25.487

[`write()`](http://linux.die.net/man/2/write)将数据写入操作系统，使其对所有进程可见（如果它可以被其他进程读取）。操作系统如何缓冲它，或者它何时被永久写入磁盘，这取决于库、操作系统、系统配置和文件系统。但是，[`sync()`](http://linux.die.net/man/2/sync)可用于强制刷新缓冲区。

可以保证的是，POSIX 要求，在符合 POSIX 的文件系统上，`read()`可以证明在 a 返回后发生的 a`write()`必须返回写入的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T12:01:51.623

由于您要求使用 UNIX，因此您必须记住，文件实际上可能位于您已挂载的 FTP 服务器上，例如。例如文件`/dev`，`/proc`也不是 HDD 上的文件。

此外，在 Linux 上，数据不会直接写入硬盘驱动器，而是有一个轮询过程，它会每隔一段时间刷新所有挂起的写入。

但同样，这些是实现细节，从您的程序的角度来看，它们真的不会影响任何事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T12:03:52.260

取决于操作系统，请参阅`man 2 sync`和（在 Linux 上）`man 8 sync`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T12:06:07.983

几年前，操作系统应该实现一种“电梯算法”来安排写入磁盘的时间。这个想法是最小化磁盘写入头的移动，这将为同时访问磁盘的多个进程提供良好的吞吐量。**

# .net - PLINQ 是否尊重 SynchronizationContext？

> ID：13048673
> 
> 赞同：2
> 
> 时间：2012-10-24T11:51:21.577
> 
> 标签：.net, multithreading, synchronization, plinq

说，我有以下代码：

```
IPrincipal capturedPrincipal = Thread.CurrentPrincipal;
myseq.AsParallel().Select(x =>
{
    Thread.CurrenctPrincipal = capturedPrincipal;
    /*call code protected with CAS*/
}); 
```

确保[`Thread.CurrenctPrincipal`](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentprincipal.aspx)将传播到`Select`将执行委托的每个线程。我已经意识到，如果我进行了适当的[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)设置，这将自动发生。那么 PLINQ 是否`SynchronizationContext`在对工作项进行排队时使用`ThreadPool`？如果没有，为什么？

ps

我认为需要注意的是，上面的代码是在 IIS/WAS 下托管的 WCF 环境中执行的（不兼容 ASP.NET）。

**编辑：** 发现[了一个类似的问题](https://stackoverflow.com/questions/8319439/does-the-thread-identity-get-transferred-when-using-plinq-extensions)，证实了我目睹的相同行为。

**Edit2：** 修改了 casperOne 的测试，但它说 threadid*是一样的*：

```
 [Test]
    public void Test1()
    {
        var principal = new GenericPrincipal(new GenericIdentity("test"), new string[0]);
        Thread.CurrentPrincipal = principal;
        int threadID = Thread.CurrentThread.ManagedThreadId;

        Enumerable.Range(0, 4000).AsParallel()
            .WithExecutionMode(ParallelExecutionMode.ForceParallelism)
            .Select(x =>
                {
                    Assert.AreSame(Thread.CurrentPrincipal, principal);
                    Assert.AreNotEqual(Thread.CurrentThread.ManagedThreadId, threadID);
                    return x;
                })
            .ToArray();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:32:26.800

这里有两个问题。第一个是是否[`Thread.CurrentPrincipal`](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentprincipal.aspx)传播到[PLINQ](http://msdn.microsoft.com/en-us/library/dd460688.aspx)中的线程。

答案是肯定的，因为这是 ExecutionContext 的一部分，它[`ExecutionContext`](http://msdn.microsoft.com/en-us/library/system.threading.executioncontext.aspx)是[从调用线程中捕获的，并在启动新线程/任务/线程池线程时复制到新的/回收的线程](http://blogs.msdn.com/b/pfxteam/archive/2012/06/15/executioncontext-vs-synchronizationcontext.aspx)。

以下测试用例（在 .NET 4.0 中运行）显示了这一点：

```
[TestMethod]
public void TestMethod1()
{
    // Capture the current logged in account.
    // Could be a GenericPrincipal as well with some random value
    // set on the identity name.
    IPrincipal p = new WindowsPrincipal(WindowsIdentity.GetCurrent());

    // Set the current principal.
    Thread.CurrentPrincipal = p;

    // Set the synchronization context.
    SynchronizationContext.SetSynchronizationContext(
        new SynchronizationContext());

    // Context is not null.
    Assert.IsNotNull(SynchronizationContext.Current);

    // PLINQ.
    var plinqThreadDetails = 
        // Go parallel.  This number needs to be reasonably
        // high to force parallelization as PLINQ might
        // use this thread if the size is small.
        from i in Enumerable.Range(0, 4000).AsParallel().
            // Force parallelization.  At best, this is
            // a suggestion.
            WithExecutionMode(ParallelExecutionMode.ForceParallelism)
        select new {
            // These values are retreived on another thread.
            IdentityName = Thread.CurrentPrincipal.Identity.Name,
            Thread.CurrentThread.ManagedThreadId,
        };

    // Was there any parallelization?
    bool anyParallel = false;

    // Make assertions.
    // The managed thread id is different than the current one.
    foreach (var plinqThreadDetail in plinqThreadDetails)
    { 
        // But the principal still flowed, even though on a different
        // thread.
        Assert.AreEqual(Thread.CurrentPrincipal.Identity.Name,
            plinqThreadDetail.IdentityName);

        // Update any parallel.
        anyParallel |= (plinqThreadDetail.ManagedThreadId !=
            Thread.CurrentThread.ManagedThreadId);
    }

    // There was *some* parallelization.
    Assert.IsTrue(anyParallel);
} 
```

关于PLINQ中是否[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)使用，不是，也没有意义。

考虑到使用 a`SynchronizationContext`通常意味着序列化对特定上下文的调用（通常是线程，想想 UI 应用程序，但并非总是如此，考虑到[ASP.NET 同步上下文](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)），您会扼杀 PLINQ 从并行化中获得的任何收益，因为每个调用都必须通过`SynchronizationContext`.

PLINQ 的好处在于能够同时执行这些操作，而不是一次一个。

以下测试用例（与前一个非常相似）证明`SynchronizationContext`没有为 PLINQ 线程捕获 ：

```
[TestMethod]
public void TestMethod2()
{
    // Set the synchronization context.
    SynchronizationContext.SetSynchronizationContext(
        new SynchronizationContext());

    // Context is not null.
    Assert.IsNotNull(SynchronizationContext.Current);

    // PLINQ.
    var plinqThreadDetails = 
        // Go parallel.  This number needs to be reasonably
        // high to force parallelization as PLINQ might
        // use this thread if the size is small.
        from i in Enumerable.Range(0, 4000).AsParallel().
            // Force parallelization.
            WithExecutionMode(ParallelExecutionMode.ForceParallelism)
        select new {
            // These values are retreived on another thread.
            SynchronizationContextIsNull =
                SynchronizationContext.Current == null,
            Thread.CurrentThread.ManagedThreadId,
        };

    // Make assertions.
    // Was there any parallelization?
    bool anyParallel = false;

    // Make assertions.
    // The synchronization context on the PLINQ thread was
    // not set, only if on a different thread.
    foreach (var plinqThreadDetail in plinqThreadDetails)
    {
        // If the thread id is different.
        if (plinqThreadDetail.ManagedThreadId !=
            Thread.CurrentThread.ManagedThreadId)
        {
            // The synchronization context was null.
            Assert.IsTrue(plinqThreadDetail.SynchronizationContextIsNull);

            // There was something on another thread.
            anyParallel = true;
        }
        else
        {
            // The synchronization context is not null.
            Assert.IsFalse(plinqThreadDetail.SynchronizationContextIsNull);
        }
    }

    // There was *some* parallelization.
    Assert.IsTrue(anyParallel);
} 
```

# mysql - 讨论板数据库的存储引擎

> ID：13048678
> 
> 赞同：0
> 
> 时间：2012-10-24T11:51:35.870
> 
> 标签：mysql, innodb, myisam

如果我想继续使用 MySQL，我应该将哪个存储引擎用于讨论板（Web 应用程序）？InnoDB 还是 MyISAM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:54:23.413

现在我总是选择 InnoDB，因为它有外键、事务、聚集索引等。

您可能还想查看此（类似）问题中更详细的答案：[myisam-versus-innodb](https://stackoverflow.com/questions/20148/myisam-versus-innodb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:54:31.883

讨论板是：

*   精读 - MyISAM 得 1 分。
*   由大文本字段（varchars/texts）构成——MyISAM 得 2 分。
*   不更新密集 - MyISAM 3 分。
*   插入俯卧 - MyISAM 4 分。
*   需要一些外键支持 - InnoDB 1 分（但这可以在应用程序级别处理）。
*   容易进行全文搜索 - 1 指向 MyISAM，如果您的 MySQL 超过 5.6，则 0 指向 MyISAM，因为 InnoDB 从 MySQL 5.6 开始支持全文搜索。

我喜欢有外键支持。正因为如此，我才在 InnoDB 上构建它。但在性能方面，您可能会测试这两种情况并注意到 MyISAM 在上述所有方面都运行得更快。

# javascript - 画布显示文本模糊

> ID：13048681
> 
> 赞同：0
> 
> 时间：2012-10-24T11:52:02.793
> 
> 标签：javascript, html, microsoft-metro, windows-runtime

我正在尝试使用画布控件绘制一个清晰的薄矩形。我希望画布背景加载图像并在前景中加载一些文本。

虽然我能够设置颜色和文字，但它们以某种方式显得模糊。有没有办法解决这个问题？

我想为我将绘制的每个画布矩形应用一个图像作为背景图像。这些矩形将出现在一个 div 控件中。所以无论哪里有画布矩形，我都希望它的背景图像填充我选择的图像。整个div 不会被画布矩形填充，但只有一半。有没有办法我们是否可以为我将绘制的所有画布矩形绘制一个图像，或者是否需要为每个矩形绘制它？

html:

```
<div id="divBoard" >            
        <canvas id="canvasBoard" />           
</div> 
```

javascript:

```
canvas = document.getElementById("canvasBoard");
if (canvas.getContext) {
    var context = canvas.getContext("2d");
}
context.fillStyle = "green";   
context.fillRect(x, y, width,height);
context.font = "5px tahoma";
context.fillStyle = "black";
context.fillText("cell"+i, x, y + width); 
```

这是执行我的代码后显示的图像 ![这是执行我的代码后显示的图像](../Images/6a9c64cbf6543016ce9ea253683525c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:57:27.580

我遇到了同样的问题，字体在画布上渲染不那么清晰。在我的项目中，我通过将字体放在单独的 DIV 中并使用适当的 z-index 将其覆盖在画布上来解决问题。这种方法对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:59:07.327

您是否尝试过`0.5`添加`x`和`y`？html5 画布使用抗锯齿功能，因此如果您想要“清晰”的线条，则需要在像素“中间”绘制。

[您将在Mozilla 开发人员参考页面的 lineWidth](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Applying_styles_and_colors#A_lineWidth_example)中找到有关其工作原理的很好的解释

PS。也看到[这个问题](https://stackoverflow.com/questions/3657671/in-html5-draw-from-0-5-0-to-0-5-600-to-get-a-1-pixel-thick-line-on-canvas)

# objective-c - UITableViewCell 选择更改内部图像时的奇怪行为

> ID：13048682
> 
> 赞同：0
> 
> 时间：2012-10-24T11:52:07.977
> 
> 标签：objective-c, ipad, ios5, uitableview

在我的 iPad 应用程序中为 UITableView 使用带有 nib 文件的自定义扩展 UITableViewCell 时遇到问题。此单元格在选择它以将复选标记图像从选中更改为未选中时有一个行为，这取决于它是否被选中，我为此使用自定义图像，而不是 Apple 拥有的默认复选单元格。所以我的功能中的一切似乎都是正确的。我发布了一些代码。我使用 registerNib 方法来加载 nib 单元格。

```
[tableView registerNib: [UINib nibWithNibName: @"ANibTableViewCell" bundle: nil] forCellReuseIdentifier: Identifier]; 
```

笔尖单元使用类文件进行扩展并通过它进行管理，连接插座附加模型值等。

在 cellForRowAtIndexPath 中：

```
- (UITableViewCell*) tableView: (UITableView*) tableView cellForRowAtIndexpath: (NSIndexPath*) indexPath
{
ExtendedtableViewCell* cell;
AModel* model;

cell = [tableView dequeueReusableCellWithIdentifier: Identifier];
model = [modelForDisplay objectAtIndex: indexPath.row];
cell.model = model;
// Some operations setting the check mark if it needed etc.
// Checkmark is a UIImageView in the nib cell that just changes image on selection
// Some other operations happening notified by the model if selected or unselected
return(cell);
} 
```

我的问题现在很奇怪，假设您在视觉上有 6 个单元格并且您选择了前 3 个单元格，一切都很好，但是如果您向下滚动以查看下一个单元格，假设您向下滚动 6 行，您会注意到总是每 6 个单元格3 首先看起来被选中，但是如果它被选中，我保留的扩展单元类实例未处于选中状态。这是什么视觉效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:19:27.813

尝试这个，

```
- (UITableViewCell *)tableView:(UITableView *)tableView1 cellForRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *Identifier = [NSString stringWithFormat:@"cell%d.%d",indexPath.section,indexPath.row];

ExtendedtableViewCell* cell;
AModel* model;

cell = [tableView dequeueReusableCellWithIdentifier: Identifier];
model = [modelForDisplay objectAtIndex: indexPath.row];
cell.model = model;
// Some operations setting the check mark if it needed etc.
// Checkmark is a UIImageView in the nib cell that just changes image on selection
// Some other operations happening notified by the model if selected or unselected
return(cell);
} 
```

希望它会帮助你......

# jquery - jquery - 隐藏导航菜单上的动画高度

> ID：13048689
> 
> 赞同：0
> 
> 时间：2012-10-24T11:52:45.007
> 
> 标签：jquery, jquery-animate, responsive-design

所以我正在构建一个“固定”到顶部的响应式导航菜单，它是“引导”样式，带有一个东西栏和一个按钮，当你点击它时会显示导航。

## HTML

```
<nav class="hiddennav displaynone">
    <ul>
        <?php wp_nav_menu(array('menu' => 'Main Nav menu')); ?>
   </ul>
</nav> <!-- end div hiddennav -->   
<div class="fixednav fixed">
    <div class="smalllogo">
        <h1 class="smaller"><a class="whitelink" href="<?php echo get_option('home'); ?>/"><?php bloginfo('name'); ?></a></h1>
    </div> <!-- end div smalllogo -->
    <div class="shownav">
        <a href="#" class="shownavbutton"></a>
    </div> <!-- end div shownav --> 
</div> <!-- end div fixednav --> 
```

## Javascript：

```
$(document).ready(function(){ 
    $(".shownavbutton").click(function() { 
        $(".hiddennav").toggleClass("displaynone").toggleClass("displayblock");
    });
});

 $(document).ready(function(){ 
    $(".shownavbutton").click(function() { 
        $(".fixednav").toggleClass("fixed").toggleClass("relative");
    });
}); 
```

它所做的是将“隐藏导航”下方的栏的位置更改为相对，这样如果用户在单击它后滚动然后“显示”其上方的隐藏导航，它就不会在页面周围浮动。

但问题是，它并没有想象中的那么流畅，第一，它将它们跳到页面顶部，第二，它没有动画，太突然了。

有点难以理解如何为函数设置动画。

有人帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:06:25.103

“跳转到顶部”行为是因为您将点击事件绑定到带有空标记“#”的“a”锚标记。这没有错，但是您必须告诉浏览器在单击链接后不要滚动到顶部。您可以在单击事件中返回 false 或调用 e.preventDefault() （不要忘记将“e”参数添加到回调函数）。

对于动画，您可以使用 slideDown 或淡入淡出 jquery 动画方法。

此外，您不必使用相同的事件对同一个元素进行 2 个绑定，您可以只拥有一个绑定（它是相同的，但更清晰）。

例子：

```
$(document).ready(function(){ 
    $(".shownavbutton").click(function(e) {
        e.preventDefault(); 
        $(".hiddennav").toggleClass("displaynone").toggleClass("displayblock");
        $(".fixednav").toggleClass("fixed").toggleClass("relative");
        $(".hiddennav").hide().slideDown("normal", "linear");
    });
}); 
```

# php - PHP：curl登录不重定向到主域

> ID：13048697
> 
> 赞同：1
> 
> 时间：2012-10-24T11:53:45.167
> 
> 标签：php, curl

我正在尝试使用 Curl 登录 Tumblr，以下 curl 帖子登录成功，但它重定向到 mydomain.com/dashboard 而不是 tumblr.com/dashboard，我如何重定向到 tumblr.com/dashboard？或者我应该使用 GET curl 到 tumblr.com/dashboard 使用 cookie 吗？

```
$url = 'https://www.tumblr.com/login';
$fields = array(
            'user[email]'=> $email,
            'user[password]'=>$pass,
            'tumblelog[name]'=> '',
            'user[age]'=> '',
            'recaptcha_public_key'=> urlencode($key),
            'recaptcha_response_field'=> '',
            'hk'=> urlencode($hk[1]), 
           'http_referer' => 'https%3A%2F%2Fwww.tumblr.com%2Flogin'
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');
//open connection
$ch = curl_init();
//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
 curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch,CURLOPT_COOKIEJAR, "cookie.txt");
curl_setopt($ch,CURLOPT_COOKIEFILE, "cookie.txt");
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);
$result = curl_exec($ch);
var_dump($result); 
```

Ps : 我在 cookie.txt 中成功存储了 cookie，我可以使用该 cookie 来获取 tumblr.com/dashboard 的内容吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:04:39.647

1.  **供`$fields`使用[http_build_query](http://php.net/manual/en/function.http-build-query.php) FFS。**为什么要手动编码 URL？快到 2013 年了。
2.  **您需要访问主页一次。**所以你可以得到cookie。使用相同的 cookie jar 和文件加载*tumblr.com/login*一次以获取您的 cookie，然后尝试登录并创建博客。
3.  **您不需要从 jar 中读取 cookie。**如果您使用相同的 cookie jar 和文件，cURL 将跟踪它们。因此，一旦您登录，只要您使用相同的 cookie 文件，就可以了。
4.  **将** **cURL 选项设置为**`CURLOPT_SSL_VERIFYPEER`false 。当你做这些事情时，你不需要验证他们的 SSL 证书。`CURLOPT_SSL_VERIFYHOST`
***   如果操作需要一段时间，还将**您的** `CURLOPT_CONNECTTIMEOUT`超时`CURLOPT_TIMEOUT` **时间**增加到 30/60 秒甚至更多。**

 ****现在再试一次。**记住，保持不变`CURLOPT_COOKIEFILE`，`CURLOPT_COOKIEJAR`如果你做对了，你会没事的。**

# javascript - JavaScript setInterval 和 setTimeout

> ID：13048699
> 
> 赞同：0
> 
> 时间：2012-10-24T11:53:57.477
> 
> 标签：javascript, settimeout, setinterval

下一个代码每 1 秒显示一次日期，然后停止。

```
(function() {
    var i = setInterval(function() {
        console.log(new Date());
    }, 1000);
    console.log("Hi");

    setTimeout(function() {
        clearInterval(i);
    }, 3000);
    console.log("Hola");
})(); 
```

输出：

```
Hi
Hola
Wed Oct 24 2012 13:35:27 GMT+0200 (CEST)
Wed Oct 24 2012 13:35:28 GMT+0200 (CEST)
Wed Oct 24 2012 13:35:29 GMT+0200 (CEST) 
```

但我不知道为什么`Hi`并且`Hola`首先显示。还有，为什么`setTimeout`要执行？不应该`setInterval`是每 1 秒执行一次，没有别的可以执行？（上面的代码是否按照编写的顺序运行？）谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T12:04:56.097

评论显示执行顺序

```
(function() {                           // 0 anonymous function is called inline

    var i = setInterval(function() {    // 1 setInterval **schedules** the function 
                                        //     parameter to be executed every second
        console.log(new Date()); 
    }, 1000);
    console.log("Hi");                  // 2 Display 'Hi' on console

    setTimeout(function() {             // 3 **Schedule** the function parameter to 
                                        //     execute after three seconds
        clearInterval(i);     
    }, 3000);
    console.log("Hola");                // 4 Display 'Hola' on console
})();

                                        // 5 Display date from setInterval function

                                        // 6 Display date from setInterval function

                                        // 7 Display date from setInterval function

                                        // 8 Cancel setInterval executed from 
                                        //     setTimeout function 
```

希望这能消除你的困惑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T11:57:41.547

`setTimeout`以及`setInterval`仅注册函数（回调），然后直接进入下一个命令。

因此`Hi`，`Hola`在调用第一个回调之前打印 和。

第一次回调将`setInterval`在 1 秒后，然后在 2 秒后再次回调。3 秒后`setTimeout`开始并清除`setInterval`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T11:55:56.170

一切都出来了`setTimeout()`，`setInterval()`无论如何都要执行。这不是`sleep()`PHP 的方法……可悲的是！

但是，此链接可能有用：[http ://www.phpied.com/sleep-in-javascript/](http://www.phpied.com/sleep-in-javascript/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T11:58:04.183

[http://ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)

这两个事件是异步的。它们在下一个可用时刻排队/执行，而不是在调用“setTimeout”或“setInterval”的确切时间。

# java - 如何在我的摇摆应用程序中旋转正方形

> ID：13048701
> 
> 赞同：1
> 
> 时间：2012-10-24T11:53:59.970
> 
> 标签：java, swing, concurrency, graphics2d, event-dispatching

我开发了一个小摇摆应用程序，在其中我绘制了一个正方形。现在我想使用 Thread 在其中心旋转这个正方形。我遇到的问题是如何在我的 rotateSquare() 方法中获取对该正方形的引用。（实际上，如果可能的话，我需要一种方法来旋转同一个正方形，而不是擦除整个内容窗格并在其位置绘制另一个旋转的正方形）。

这是我的代码：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Rotation extends JFrame implements Runnable{
Thread t;
Rotation()
{
    super("Animation of rotation about center");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(400,400);

    setContentPane(new Container(){
        public void paint(Graphics g)
        {
            Graphics2D g2=(Graphics2D)g.create();
            g2.setBackground(Color.WHITE);
            g2.clearRect(0, 0, getWidth(), getHeight());

            g2.setColor(Color.GRAY);
            g2.fillRect(100, 100, 100, 100);
        }
    });

    t=new Thread(this,"pr");
    t.start();

    setVisible(true);
    //setOpacity(0.8f);
}
public void run()
{
    try{
        for(;;)
        {
            Thread.sleep(100);
            SwingUtilities.invokeLater(new Runnable(){public void run(){
                rotateSquare();
            }});
        }
    }catch(InterruptedException e){System.out.println("Thread interrupted");}
}
public void rotateSquare();
{

}
public static void main(String args[])
{
    //setDefaultLookAndFeelDecorated(true);
    SwingUtilities.invokeLater(new Runnable(){public void run(){new Rotation();}});
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:03:49.110

*   见[仿射变换](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/AffineTransform.html)

*   添加参数[AffineTransform.rotate(intDegrees);](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/AffineTransform.html#rotate%28double%29)

*   使旋转对象适合父边界[myAffineTransform.translate(getWidth(), getHeight())](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/AffineTransform.html#translate%28double,%20double%29)

*   然后返回[Graphics2D#transform(myAffineTransform);](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html)

*   使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)而不是`Runnable#Thread`with `Thread.sleep(int)`，这会导致 Graphics2D 冻结或闪烁并锁定[EventDispatchThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)直到无限`Thread`结束（在你的情况下永远不会结束）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:58:39.877

您应该定义一个`Square`包含定义方形对象的代码的类。这将有一个`draw(Graphics g)`知道如何绘制`Square`.

在您的其他类中，您将引用一个`Square`对象。在`paint`您将调用的方法下`square.draw(g)`。

这样，您可以在`Square` `draw()`方法下应用旋转。

# iphone - 为什么 UIImagePickerControllerSourceTypePhotoLibrary 不让用户选择相册？

> ID：13048702
> 
> 赞同：4
> 
> 时间：2012-10-24T11:54:06.163
> 
> 标签：iphone, objective-c, uiimagepickercontroller

我目前正在为 iPad 开发一个 iPad 应用程序，我将 UIPopOverController 与 UIImagePickerController 结合使用，让用户从他们的 iPad 中选择图像（使用 sourceType UIImagePickerControllerSourceTypeSavedPhotosAlbum）。这工作得很好，正如预期的那样，但它只允许客户端显然浏览 SavedPhotos 相册。如果我将选择器更改为使用 UIImagePickerControllerSourceTypePhotoLibrary，窗口仍将显示其相册，但它将是静态的（意味着我可以滚动，但我无法选择相册，并且当我向下或向上滚动时，视图只会弹出如果我再次点击屏幕返回）。

PhotoLibrary 是否需要额外的设置才能正常工作？我尝试了很多方法，但我在这里都不走运。

设置是一个 OpenGL 视图，我在其上使用 UIImagePicker 生成 UIPopOverController。为了清楚起见，这里是代码：

```
-(void)showPicker
{
    if(![pController isPopoverVisible])
    {
        [pController presentPopoverFromRect:CGRectMake(50,100,200,300) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES];
    }
    else
    { 
        pController dismissPopoverAnimated:YES];
    }
}
-(void)awakeFromNib
{
    picker = [[UIImagePickerController alloc] init];

    pController = [[UIPopoverController alloc] initWithContentViewController:picker];

    // Code works properly if I only set it to UIImagePickerControllerSourceTypeSavedPhotosAlbum
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    else if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum]) picker.sourceType =UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    else { NSLog(@"Error: Could not pick appropriate sourceType"); }

    picker.mediaTypes = [NSArray arrayWithObjects:(NSString*)kUTTypeImage, nil];
    picker.delegate = self;
    pController.delegate = self;
    picker.allowsEditing=NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:14:16.303

你在使用*iOS6*吗？我知道在*Settings/Privacy*您必须允许您的应用在*相册*中看到。

# django - 自定义 django 对象参数值输出

> ID：13048715
> 
> 赞同：0
> 
> 时间：2012-10-24T11:54:45.613
> 
> 标签：django, django-models, django-templates

当我在模板中做类似的事情时，django 做了什么

```
{{ object.parameter }} 
```

我问这个是因为在数组字段（postgresql 数组字段）的情况下，它会打印出来

```
{'value', 'value', 'value'} 
```

（因为这就是 postgresql 在 arrayfields 中存储数组的方式）

或者

```
['value','value','value'] 
```

如果我使用字段 post_init 方法将 postgresql 数组转换为 python 列表。

期望的输出当然是价值、价值、价值。我宁愿不为此使用某种过滤器，因为那样我将不得不在模板中使用 IF 或对我打印出的每个值使用某种模板标签过滤器，这感觉不是一件聪明的事情。

顺便说一句，我知道我可以在模板中做类似的事情：

```
{% for choice in field.choices %}
    {{ choice }}
    {% if forloop.last %}
    {% else %}, 
    {% endif%}
{% endfor %} 
```

这正是我想要的，但我认为还有其他方法可以做到这一点 - 使用一些 modelfield 方法或其他东西。

艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:02:12.487

> 当我在模板中做类似的事情时，django 做了什么
> 
> {{对象.参数}}

查看[变量和查找](https://docs.djangoproject.com/en/dev/ref/templates/api/#variables-and-lookups)。

> 期望的输出当然是价值、价值、价值。我宁愿不为此使用某种过滤器，因为那样我将不得不在模板中使用 IF 或对我打印出的每个值使用某种模板标签过滤器，这感觉不是一件聪明的事情。

您可以制作一个非常简单的过滤器：

```
@register.filter
def comma_join(values):
    return u', '.join(values) 
```

很简单：

```
{{ object.parameter|comma_join }} 
```

你为什么要避免这样一个简单的解决方案？

> 这正是我想要的，但我认为还有其他方法可以做到这一点 - 使用一些 modelfield 方法或其他东西。

当然你也可以添加这样的方法：

```
class YourModel(models.Model):
    # ....
    def comma_join_parameter(self):
        return u', '.join(self.parameter) 
```

并在您的模板中使用它：

```
{{ object.comma_join_parameter }} 
```

# php - 我怎样才能只运行一次 php 脚本 - 没有会话

> ID：13048718
> 
> 赞同：1
> 
> 时间：2012-10-24T11:55:07.750
> 
> 标签：php, request, execute

我有以下问题：如何只运行一次 php 脚本？在人们开始回复这确实是一个相似或重复的问题之前，请继续阅读......

情况如下，我目前正在编写自己的 MVC 框架，并且我提出了一个基于模块的系统，因此我可以轻松地向我的框架添加新功能。为此，我创建了一个`/ROOT/modules`目录，可以在其中添加新模块。

所以你可以想象，脚本需要读取目录，读取所有 php 文件，解析它们，然后才能执行新功能，但是它必须为所有 webbrowsers 请求执行此操作。这将使这个任务大约为 O(nAmountOfRequests * nAmountOfModules)，这在每秒有大量用户请求的网站上相当大。

然后我想，如果我引入一个像这样的会话变量会怎样：`$_SESSION['modulesLoaded']`然后简单地检查它是否设置。这会将负载减少到 O(nUniqueAmountOfRequests * nAmountOfModules) 但如果我唯一想做的就是读取目录一次，这仍然是一个很大的大 O。

我现在拥有的是以下内容：

```
/** Load the modules */
require_once(ROOT . DIRECTORY_SEPARATOR . 'modules' . DIRECTORY_SEPARATOR . 'module_bootloader.php'); 
```

存在以下代码：

```
<?php
//TODO: Make sure that the foreach only executes once for all the requests instead of every request.
if (!array_key_exists('modulesLoaded', $_SESSION)) {
    foreach (glob('*.php') as $module) {
        require_once($module);
    }
    $_SESSION['modulesLoaded'] = '1';
} 
```

所以现在的问题是，是否有一个解决方案，比如一个超全局变量，我可以访问并存在于所有请求中，所以我可以制作一个只存在于 nAmountOfModules 的 Big O，而不是之前的 Big O？还是有另一种方法可以轻松读取模块文件一次？

就像是：

```
if(isFirstRequest){
    foreach (glob('*.php') as $module) {
        require_once($module);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:57:53.163

在最基本的形式下，如果你想运行一次，并且只运行一次（每次安装，而不是每个用户），让你的密集脚本更改服务器状态的某些内容（添加文件，更改文件，更改记录数据库），然后在每次发出运行它的请求时对其进行检查。

如果您找到匹配项，则意味着脚本已经运行，您可以继续该过程而无需再次运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:56:49.683

调用时，锁定文件，在脚本结束时，删除文件。只调用一次。也因此不再需要，消失于涅槃。

这自然也可以反过来：

```
<?php

$checkfile = __DIR__ . '/.checkfile';

clearstatcache(false, $checkfile);

if (is_file($checkfile)) {
    return; // script did run already
}
touch($checkfile);

// run the rest of your script. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:55:25.643

**只需将array()**缓存到文件中，当您上传新模块时，只需删除该文件。它必须重新创建自己，然后你又重新设置好了。

```
// If $cache file does not exist or unserialize fails, rebuild it and save it
if(!is_file($cache) or (($cached = unserialize(file_get_contents($cache))) === false)){
    // rebuild your array here into $cached
    $cached = call_user_func(function(){
        // rebuild your array here and return it
    });
    // store the $cached data into the $cache file
    file_put_contents($cache, $cached, LOCK_EX);
}
// Now you have $cached file that holds your $cached data
// Keep using the $cached variable now as it should hold your data 
```

*这应该这样做。*

**PS**：我目前正在重写我自己的框架并做同样的事情来存储这些数据。您还可以使用**SQLite DB**来存储框架所需的所有此类数据，但请确保测试性能并查看它是否符合您的需求。*使用适当的索引，SQLite 很快。*

# c - 没有附加参数的 printf("%d") 的输出

> ID：13048719
> 
> 赞同：1
> 
> 时间：2012-10-24T11:55:09.627
> 
> 标签：c, linux

`printf("%d");`or`printf("%p");`语句的输出是什么？

当然我知道我应该传递参数，因为 printf 期待一个，但假设我将把这个留空会发生什么？

我知道这将打印从堆栈中读取的一些值（从应该放置函数参数的位置）。假设我正在运行 Linux 机器，我可以期望这将是一些有效值（例如函数返回地址）吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:58:04.317

这只是未定义的行为。什么事情都可能发生。不可能给出更准确的答案。

细节取决于`printf`库是如何实现的，以及变量参数是如何被编译器实现的。查看库的源代码和/或生成的程序集，以了解*您的*平台上发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:57:54.927

这会调用未定义的行为。就其本质而言，这意味着您无法假设会发生什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T11:55:42.210

这会引发不确定的行为。您可能会打印出随机整数或崩溃或...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T12:20:03.910

未定义的行为。这意味着您的程序可能会崩溃。

> （C99，7.19.6.1p2）“如果格式的参数不足，则行为未定义。”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T11:59:47.333

*我可以期望这将是一些有效的价值*吗？： 不。

# javascript - jquery 查找所有 div 子项的总高度

> ID：13048722
> 
> 赞同：5
> 
> 时间：2012-10-24T11:55:21.277
> 
> 标签：javascript, jquery, jquery-selectors

嘿，我有一个包含 5 个 div 的 div，我想将它们的所有高度加在一起，

这是我根据 Jeff 的回答最终使用的解决方案。谢谢你的协助。

```
var ev_totalHeight = 0;
$("#events > div").each(function(){
    ev_totalHeight += $(this).innerHeight();
});

function events_open() {
 $("#events").animate({
"height": ev_totalHeight
  }, 450 );
}

$("#events").click(function() {
events_open();
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T12:00:48.767

这是一个小提琴：http: [//jsfiddle.net/yj8sL/2/](http://jsfiddle.net/yj8sL/2/)

```
$(function(){
    var totalHeight = 0;
    $("#parent > div").each(function(){
        totalHeight += $(this).height();
    });
    alert("Total height of all divs: "+totalHeight);
}); 
```

如您所见，有 5 个 div，每个高度为 100px，因此总高度为 500px。

编辑：你的下一个问题（动画）是你没有告诉它你使用的是什么单位（在你的情况下，像素）：

```
 $("#events").animate({
    "height": ev_totalHeight+"px"
 }, 450 ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T11:57:23.513

沿着这些思路：

```
var height = 0;

$('#events > div').each(function(){
    height += $(this).height();
});

// apply calculated height to another element
$('#myotherdiv').height(height + 'px'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T11:58:15.137

遍历它们并添加高度，例如

```
var height;
$("#events").each(function() {
    height += $(this).height();
}); 
```

# css - Firefox 语法问题的 CSS SVG 掩码

> ID：13048723
> 
> 赞同：0
> 
> 时间：2012-10-24T11:55:24.067
> 
> 标签：css, html, svg, masking

从 Mozilla 开发人员页面，我正在尝试使用该`mask`属性为 CSS 重新创建他们的 SVG 掩码。

CSS：

```
#canvasPreview {
    mask: url(images/masks/circle2.svg#circleMask);
} 
```

HTML：

```
<img id="canvasPreview" src="placehold.it/100x100"></img> 
```

SVG：

```
<svg>
    <mask id="circleMask" maskContentUnits="objectBoundingBox">
        <circle cx="50" cy="50" r="50" fill="white" />
    </mask>
</svg> 
```

SVG 是外部引用的，而不是像 MDN 示例那样嵌入。我没有尝试嵌入它，但我不明白为什么会有帮助。有几件事我不清楚。

1.  在 CSS 中，为什么我将 #circleMask 标识符放在 URL 之后？删除它不会使我的代码工作，并且它包含在 MDN 站点规范中，所以我把它放在那里。

2.  我的 SVG 是否正确？我必须使用`<mask>`标签`id`和`objectBoundingBox`属性吗？它们是用来做什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:13:14.270

URL中#后面的部分必须与掩码的id相同。所以你的那部分是对的。

如果需要，您可以使用 objectBoundingBox 但您的内容似乎错误。您的遮罩半径是它所遮罩的对象大小的 50 倍。也许你的意思是 50%。与 cx 和 cy 相同。

# scala - Scala 中的 this 类型

> ID：13048725
> 
> 赞同：7
> 
> 时间：2012-10-24T11:55:39.103
> 
> 标签：scala, inheritance, types

有没有办法让一个方法总是返回调用它的同一个类的类型？

让我解释：

```
class Shape {
  var mName: String = null
  def named(name: String): Shape = {
    mName = name
    this
  }
}

class Rectangle extends Shape {
  override def named(name: String): Rectangle = {
    super.named(name)
    this
  }
} 
```

这可行，但是有没有办法做到这一点而不必覆盖`named`我所有子类中的函数？我正在寻找这样的东西（不起作用）：

```
class Shape {
  var mName: String = null
  def named(name: String): classOf[this] = { // Does not work but would be great
    mName = name
    this
  }
}

class Rectangle extends Shape {
} 
```

任何的想法 ？还是不可能？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T12:08:09.657

您需要使用`this.type`而不是`classOf[this]`.

```
class Shape {
  var mName: String = null
  def named(name: String): this.type = {
    mName = name
    this
  }
}

class Rectangle extends Shape {
} 
```

现在证明它有效（在 Scala 2.8 中）

```
scala> new Rectangle().named("foo")
res0: Rectangle = Rectangle@33f979cb

scala> res0.mName
res1: String = foo 
```

* * *

`this.type`是编译类型名称，而`classOf`是在运行时调用以获取`java.lang.Class`对象的运算符。您永远不能使用`classOf[this]`，因为参数必须是类型名称。尝试获取`java.lang.Class`对象时的两个选择是调用`classOf[TypeName]`或`this.getClass()`。

# tsql - t-sql 顺序持续时间

> ID：13048728
> 
> 赞同：3
> 
> 时间：2012-10-24T11:55:51.583
> 
> 标签：tsql, duration, sequential

我有一个表格，可以跟踪用户与客户记录的交互。我想跟踪用户每次“触摸”的持续时间，即每次我们需要访问客户记录时每个用户花费的时间。通过使用 ROW_NUMBER() OVER (PARTITION BY | ORDER BY)，我已经掌握了基础知识。我无法理解我的豌豆大脑的问题是，当这些触摸是连续的但相隔很长一段时间时，如何分离两个不同的用户触摸。我不知道我已经解释清楚了，但下面的例子应该澄清：

这是我可以成功查询的数据示例：

```
DATE        TIME        USER
11/17/2011  1:30:47     ZDBatch
11/17/2011  1:32:40     ZDBatch
12/13/2011  10:39:46    EMSZC27
12/13/2011  10:45:48    EMSZC27 
```

期望的结果集是

```
DURATION (MIN)  USER
1.883   ZDBatch
6.033   EMSZC27 
```

并通过以下查询实现（请注意，我在上面的示例中留下了一些列）：

```
; WITH CTE1 AS
    (
    SELECT  ROW_NUMBER() OVER (PARTITION BY thr.[tdate], thr.[job], thr.[who], thr.[moddate]  ORDER BY thr.[moddate]) AS RowNo,
    thr.[tdate], thr.[job], thr.[moddate], thr.[modtime], thr.[seq], thr.[who], 
         thr.[description], thr.[histtype], thr.[attachment], thr.[data1], thr.[data2]
    FROM    Trip_History_Reporting thr
    WHERE   thr.[tdate] = '2011-10-24' --AND thr.[job] IN ('0653-A', '0128-A')
        AND LEFT(thr.[description], 8) <> 'Recalled'
        AND (LEFT(thr.[who],5) = 'EMSZC' OR thr.[who] = 'ZDBatch')
        --ORDER BY thr.[moddate], thr.[modtime]
    )

SELECT  tdate, job, MIN(RowNo), MAX(RowNo), MIN(modtime) AS [Start], MAX(modtime) AS [End], 
    CAST(CAST(DATEDIFF(SECOND, MIN(modtime), MAX(modtime)) AS DECIMAL(6,0))/60 AS DECIMAL(8,2)) AS [Duration (Min)], 
    who, moddate
FROM    CTE1
GROUP BY    tdate, job, who, moddate 
```

这是我无法成功查询的数据示例（同一用户的连续不同触摸）：

```
DATE           TIME     USER
11/1/2011       6:34:48 EMSZC34
11/1/2011       6:35:08 EMSZC34
11/1/2011       6:35:08 EMSZC34
11/1/2011       6:35:08 EMSZC34
11/1/2011       6:35:08 EMSZC34
11/1/2011       6:35:08 EMSZC34
11/15/2011      11:08:32    EMSZC34
11/15/2011      11:09:14    EMSZC34
11/15/2011      11:09:14    EMSZC34
11/15/2011      11:09:14    EMSZC34
11/15/2011      11:09:14    EMSZC34
11/15/2011      11:09:14    EMSZC34 
```

当第一次触摸结束和第二次触摸开始之间经过“大量”时间时就会​​出现问题（为了争论，如果两次触摸之间经过一个小时，那是不同的触摸）。

上述数据所需的结果集是

```
DURATION (MIN)      USER
     0.333          EMSZC34
     0.7             EMSZC34 
```

这似乎很简单，但我无法弄清楚。提前感谢您的任何想法，建议，对我的愚蠢的直接嘲讽。

对于延迟回复，我深表歉意。我知道这个小组正在提供免费帮助，我不打算通过不快速回复来利用这一点。我会尽我所能，不要让这种事情再次发生。

根据 EricZ 的要求，以下是具有所需输出的示例：

```
DATE           TIME     USER
11/1/2011     6:34:48   EMSZC34
11/1/2011     6:35:08   EMSZC34
11/1/2011     6:35:08   EMSZC34
11/1/2011   6:35:08 EMSZC34
11/1/2011   6:35:08 EMSZC34
11/1/2011   6:35:08 EMSZC34
11/15/2011    11:08:32  EMSZC34
11/15/2011    11:09:14  EMSZC34
11/15/2011    11:09:14  EMSZC34
11/15/2011    11:15:24  EMSZC34
11/15/2011    11:26:38  EMSZC34
11/15/2011    11:34:55  EMSZC34
11/15/2011    11:36:22  EMSZC34 
```

期望的输出：

```
DURATION (MIN)  USER
0.333   EMSZC34
27.833  EMSZC34 
```

提前感谢您提供的任何帮助。我一直在研究岛屿和差距，试图解决这个困境，但我仍然无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:03:59.417

请试试这个。[SQL小提琴](http://sqlfiddle.com/#!3/3d382/1)

```
;WITH c1 AS (
SELECT  DISTINCT CAST(LEFT(CONVERT( VARCHAR(20),moddate,112),10)+ ' ' + modtime AS DATETIME)as moddate ,moduser
FROM    Trip_History_Reporting
)
, c2 AS (
SELECT moddate,moduser,ROW_NUMBER() OVER (PARTITION BY moduser ORDER BY moddate) as row_no
FROM c1
)
, c3 AS (
SELECT c.moddate as startdate, cc.moddate as enddate, DATEDIFF(SECOND,c.moddate,cc.moddate) as diff,c.moduser
FROM c2 c 
INNER JOIN c2   cc 
    ON c.moduser= cc.moduser
    AND c.row_no = cc.row_no -1 
)
SELECT  *,diff/60.00 as diff_in_min
FROM    c3
WHERE diff <= 60*60 -- an hour in second 
```

**更新：** 根据您更新的问题，请使用以下查询

```
WITH c1 AS (
SELECT  DISTINCT CAST(LEFT(CONVERT( VARCHAR(20),moddate,112),10)+ ' ' + modtime AS DATETIME)as moddate ,moduser
FROM    Trip_History_Reporting
)
, c2 AS (
SELECT moddate,moduser,(SELECT MAX(cc.moddate) FROM c1 cc WHERE cc.moddate <= DATEADD(hour,1,c.moddate) AND cc.moddate > c.moddate AND c.moduser = cc.moduser) AS endtime
FROM c1 c
)
, c3 AS (
SELECT  moduser, MIN(moddate) as [start],endtime AS [end]
FROM    c2
WHERE endtime IS NOT NULL
GROUP BY moduser,endtime
)
SELECT  *,DATEDIFF(SECOND,[start],[end])/60.0  as diff_in_min 
FROM  c3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:03:17.597

您可以在报表中添加和填充“sessionID”字段吗？那么它可以很简单：

```
select     sessionId, datediff(second, min(time),max(time)) 
from       Trip_History_reporting 
group by   sessionId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:31:53.203

是伪TSQL。
语法不正确。
订购所有行。
加入 RowNumber + 1。
仅使用偶数。

```
WITH Ordered AS
(
    SELECT DATE, TIME, USER
    ROW_NUMBER() AS RowNumber
    FROM Trip_History_Reporting 
) 
select O1.USER, (O2.TIME - O1.TIME) 
from order O1 
join order O2 
on O2.RowNumber = O1.RowNumber + 1 
where O1%2 = 0 
```

# c - 将文本文件的输入读入c中的结构数组

> ID：13048731
> 
> 赞同：4
> 
> 时间：2012-10-24T11:56:03.983
> 
> 标签：c, arrays, structure, file-processing

我的结构定义是，

```
typedef struct {
    int taxid;
    int geneid;
    char goid[20];
    char evidence[4];
    char qualifier[20];
    char goterm[50];
    char pubmed;
    char category[20];    
} gene2go; 
```

我有一个名为“gene2go.txt”的制表符分隔的文本文件。

此文件的每一行都包含`taxID`、`geneID`、`goID`、`evidence`、`qualifier`、`goterm`和信息。`pubmed``category`

文件的每一行都将保存在一个结构中。

当程序运行时，它会首先将输入文件的内容读入一个gene2go类型的数组中，我使用了一个名为`readInfo`.

该程序还将从命令行获取以下输入参数，

输入类型（1代表`taxid`，2代表`geneid`，3代表`goid`）和搜索词

调用`listData`了一个函数，将文件“gene2go.txt”中与输入类型和搜索词匹配的行列表写入文件“output.txt”。

这是我的文本文件的一部分`"gene2go.txt"`，

```
3702    814629  GO:0003676  IEA -   nucleic acid binding    -   Function
3702    814629  GO:0005575  ND  -   cellular_component  -   Component
3702    814629  GO:0005634  ISM -   nucleus -   Component
3702    814629  GO:0008150  ND  -   biological_process  -   Process
3702    814629  GO:0008270  IEA -   zinc ion binding    -   Function
3702    814630  GO:0005634  ISM -   nucleus -   Component
3702    814636  GO:0008150  ND  -   biological_process  -   Process
3702    814637  GO:0003674  ND  -   molecular_function  -   Function
6239    177883  GO:0008150  ND  -   biological_process  -   Process
6239    177884  GO:0005575  ND  -   cellular_component  -   Component
6239    177884  GO:0008150  ND  -   biological_process  -   Process
6239    177886  GO:0004364  IDA -   glutathione transferase activity    12757851    Function
6239    177886  GO:0005575  ND  -   cellular_component  -   Component
7955    555450  GO:0005634  IEA -   nucleus -   Component
7955    555450  GO:0006355  IEA -   regulation of transcription, DNA-dependent  -   Process 
```

我已经编写了下面名为 ceng301.c 的代码并使用命令行编译它

`gcc ceng301.c -o ceng301`

，但是当我写

`ceng301 1 3702`

在命令行中，我什么也没得到，只有一个闪烁的下划线 :( 而不是

```
3702    814629  GO:0003676  IEA -   nucleic acid binding    -   Function
3702    814629  GO:0005575  ND  -   cellular_component  -   Component
3702    814629  GO:0005634  ISM -   nucleus -   Component
3702    814629  GO:0008150  ND  -   biological_process  -   Process
3702    814629  GO:0008270  IEA -   zinc ion binding    -   Function
3702    814630  GO:0005634  ISM -   nucleus -   Component
3702    814636  GO:0008150  ND  -   biological_process  -   Process
3702    814637  GO:0003674  ND  -   molecular_function  -   Function 
```

保存在`output.txt`

这是代码，

```
#include <stdio.h>
#include <stdlib.h>

/* structure definition */
typedef struct {
    int taxid;
    int geneid;
    char goid[20];
    char evidence[4];
    char qualifier[20];
    char goterm[50];
    char *pubmed;
    char category[20];
} gene2go;

/* function prototypes */
int readInfo( gene2go input[] );
void listData( char *inType, char *searchItem, gene2go input[], int i );

int main( int argc, char *argv[] )
{
   gene2go input[200];
   int i;

   i = readInfo( input );
   listData( argv[1], argv[2], input, i );

   return 0;
}

/* read the input file*/
int readInfo( gene2go input[] ) {
   FILE *fin;
   char *inputName = "gene2go.txt";
   int i = 0;

   fin = fopen( inputName, "r" );

   if( fin == NULL ) {
      printf( "File cannot be opened\n" );
   } /* end if */
   else {
      while( !feof( fin ) ) {
        fscanf( fin, "%[^\t]", &input[i].taxid,
                               &input[i].geneid,
                               &input[i].goid,
                               &input[i].evidence,
                               &input[i].qualifier,
                               &input[i].goterm,
                               &input[i].pubmed,
                               &input[i].category );
        i++;
     } /* end while */

     fclose( fin );
  } /* end else */

  return i;
} /* end function readInfo */

void listData( char *inType, char* searchItem, gene2go input[], int i ) {
   FILE *fout;
   char *outputName = "output.txt";
   int j;
   int inputType = atoi( inType );

   fout = fopen( outputName, "w" );

   switch( inputType ) {
      case 1:
          for( j = 0; j < i; j++ ) {
               if( input[j].taxid == atoi( searchItem ) ) {
                   fprintf( fout, "%d\t%d\t%s\t%s\t%s\t%s\t%s\t%s\n", input[i].taxid,
                                                                      input[i].geneid,
                                                                      input[i].goid,
                                                                      input[i].evidence,
                                                                      input[i].qualifier,
                                                                      input[i].goterm,
                                                                      input[i].pubmed,
                                                                      input[i].category );
               } /* end if */
          } /* end for */
          break;
     case 2:
          for( j = 0; j < i; j++ ) {
              if( input[j].geneid == atoi( searchItem ) ) {
                  fprintf( fout, "%d\t%d\t%s\t%s\t%s\t%s\t%s\t%s\n", input[i].taxid,
                                                                     input[i].geneid,
                                                                     input[i].goid,
                                                                     input[i].evidence,
                                                                     input[i].qualifier,
                                                                     input[i].goterm,
                                                                     input[i].pubmed,
                                                                     input[i].category );
              } /* end if */
          } /* end for */
          break;
     case 3:
          for( j = 0; j < i; j++ ) {
              if( input[j].goid == searchItem ) {
                  fprintf( fout, "%d\t%d\t%s\t%s\t%s\t%s\t%s\t%s\n", input[i].taxid,
                                                                     input[i].geneid,
                                                                     input[i].goid,
                                                                     input[i].evidence,
                                                                     input[i].qualifier,
                                                                     input[i].goterm,
                                                                     input[i].pubmed,
                                                                     input[i].category );
              } /* end if */
          } /* end for */
          break;
 } /* end switch */

 fclose( fout );
} /* end function listData */ 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:07:40.510

```
char mystring[100];
FILE *p = fopen ("gene2go.txt" , "r");
if (p == NULL) perror ("Error opening file");
   else {
     if ( fgets (mystring , 100 , pFile) != NULL )
       puts (mystring);
      pch = strtok (mystring, "\t");
      while (pch != NULL)
      {
          //handle each token here and insert into struct
          pch = strtok (NULL, "\t");
      }
     fclose (pFile);
   }
   return 0; 
```

参考**[strtok](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)** , **[fgets](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)**

# java - 根据孩子id查询

> ID：13048733
> 
> 赞同：0
> 
> 时间：2012-10-24T11:56:11.343
> 
> 标签：java, hibernate, jpa

> **可能重复：**
> [如何在参数为集合的情况下编写 JPA 查询？](https://stackoverflow.com/questions/3492018/how-to-write-jpa-query-where-parameter-is-a-set)

我有 2 个实体

```
@Entity
public class Container {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    Long id;

    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    Set<Child> data = newHashSet();
}
@Entity
public class Child {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    Long id;
} 
```

现在我想选择所有包含指定子容器的容器。`select c from Container c where :child in c.data`我编写了产生 sql 的jpa 查询

```
select 
    container0_.id as id4_ 
from 
    Container container0_ 
    cross join Container_Child data1_, Child child2_ 
where 
    container0_.id=data1_.Container_id 
and data1_.data_id=child2_.id 
and (? in (.)) 
limit ? [42001-168] 
```

并失败`JdbcSQLException`。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:41:49.167

尝试：`SELECT con FROM Container con JOIN con.data ch WHERE ch = :child`

# javascript - JavaScript 函数调用在 iOS 上的 Safari 中不起作用

> ID：13048736
> 
> 赞同：0
> 
> 时间：2012-10-24T11:56:36.240
> 
> 标签：javascript, ios, function, safari

我使用这个 JavaScript 代码...

```
function data_addproduct(id){
var hr   = new XMLHttpRequest();
var url  = "scripts/data_processing.php";
var data = "addproduct";
var vars = "data="+data+"&id="+id;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("ui_checkout").innerHTML = return_data;
        document.getElementById("ui_checkout_mobile").innerHTML = return_data;
        data_refreshtotal();
        data_refreshproducts();
    }
}
hr.send(vars);
document.getElementById("ui_checkout").innerHTML = "<br>Updating...";
document.getElementById("ui_checkout_mobile").innerHTML = "<br>Updating...";

} 
```

但是在 iOS 上的 Safari 中，它没有调用其他两个函数......

```
data_refreshtotal();
data_refreshproducts(); 
```

这很奇怪，因为它在 Chrome for iOS 中运行良好，有人知道如何在 Safari 中修复它吗？

它调用的函数：

```
function data_refreshtotal(){   
var hr   = new XMLHttpRequest();
var url  = "scripts/data_processing.php";
var data = "refreshtotal";
var vars = "data="+data;
hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("ui_total").innerHTML = return_data;
        document.getElementById("ui_total_mobile").innerHTML = return_data;
        document.getElementById("ui_checkout_notify").innerHTML = "Online EPOS";
    }
}
hr.send(vars);
document.getElementById("ui_total").innerHTML = "Updating...";
document.getElementById("ui_total_mobile").innerHTML = "Updating...";
document.getElementById("ui_checkout_notify").innerHTML = "Updating...";
}
function data_refreshproducts(){    
var hr   = new XMLHttpRequest();
var url  = "scripts/data_processing.php";
var data = "refreshproducts";
var vars = "data="+data;

hr.open("POST", url, true);
hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("ui_checkout").innerHTML = return_data;
        document.getElementById("ui_checkout_mobile").innerHTML = return_data;
        document.getElementById("ui_checkout_notify").innerHTML = "Online EPOS";
    }
}
hr.send(vars);
document.getElementById("ui_checkout").innerHTML = "<br>Updating...";
document.getElementById("ui_checkout_mobile").innerHTML = "<br>Updating...";
document.getElementById("ui_checkout_notify").innerHTML = "Updating...";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T00:29:28.490

从您发布的内容来看，唯一有意义的是（以某种方式）`data_refreshtotal`并且`data_refreshproducts`在它们被调用时已经超出范围。这是您的相同代码，经过重构和命名空间，以确保每个函数在您调用它时仍在范围内：

```
var Cart;
if (!Cart) {
    Cart = {};
}
(function () {
    'use strict';
    Cart.stringificate = function stringificate(data) {
        var key = '',
            postData = '';
        for (key in data) {
            if (data.hasOwnProperty(key)) {
                postData += '&' + key + '=' + data[key];
            }
        }
        return postData.substring(1);
    };
    Cart.ajax = function ajax(options) {
        var hr = new XMLHttpRequest(),
            method = options.method ? options.method.toUpperCase() : "POST",
            url = options.url || "scripts/data_processing.php",
            i = 0;
        hr.open(method, url, true);
        hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        hr.onreadystatechange = function () {
            if (hr.readyState === 4 && hr.status === 200) {
                options.callback(hr.responseText);
            }
        };
        hr.send(Cart.stringificate(options.data));
        for (i = 0; i < options.notices.length; i += 1) {
            document.getElementById(options.notices[i]).innerHTML = "<br />Updating&hellip;";
        }
    };
    Cart.data_refreshtotal = function data_refreshtotal() {
        Cart.ajax({
            "data": {
                "data": "refreshtotal"
            },
            "callback": function (return_data) {
                document.getElementById("ui_total").innerHTML = return_data;
                document.getElementById("ui_total_mobile").innerHTML = return_data;
                document.getElementById("ui_checkout_notify").innerHTML = "Online EPOS";
            },
            "notices": [
                "ui_total",
                "ui_total_mobile",
                "ui_checkout_notify"
            ]
        });
    };
    Cart.data_refreshproducts = function data_refreshproducts() {
        Cart.ajax({
            "data": {
                "data": "refreshproducts"
            },
            "callback": function (return_data) {
                document.getElementById("ui_checkout").innerHTML = return_data;
                document.getElementById("ui_checkout_mobile").innerHTML = return_data;
                document.getElementById("ui_checkout_notify").innerHTML = "Online EPOS";
            },
            "notices": [
                "ui_checkout",
                "ui_checkout_mobile",
                "ui_checkout_notify"
            ]
        });
    };
    Cart.data_addproduct = function data_addproduct(id) {
        Cart.ajax({
            "data": {
                "data": "addproduct",
                "id": id
            },
            "callback": function (return_data) {
                document.getElementById("ui_checkout").innerHTML = return_data;
                document.getElementById("ui_checkout_mobile").innerHTML = return_data;
                Cart.data_refreshtotal();
                Cart.data_refreshproducts();
            },
            "notices": [
                "ui_checkout",
                "ui_checkout_mobile"
            ]
        });
    };
}()); 
```

我使用`Cart`命名空间只是因为它看起来好像你正在制作一个购物车（而且它可以快速输入:)）。尝试运行它并查看函数是否被调用。

# asp.net-mvc - EF Code First 不创建数据库

> ID：13048742
> 
> 赞同：0
> 
> 时间：2012-10-24T11:57:12.850
> 
> 标签：asp.net-mvc, entity-framework

我已将我的代码复制到一个新项目中，但我没有看到运行后生成的任何 .mdf 或 .log 文件。在数据连接下，我可以看到数据库中的表并与之交互，但在 App_Data 文件夹中没有创建任何文件。

这是我的数据库上下文类：

```
public class BareCupboardDB : DbContext
{
    public DbSet<Recipe> Recipes { get; set; }
    public DbSet<NutritionalValue> NutritionalValues { get; set; }
    public DbSet<RecipeStep> RecipeSteps { get; set; }
    public DbSet<Ingredient> Ingredients { get; set; }
    public DbSet<RecipeIngredient> RecipeIngredients { get; set; }
} 
```

我的 Application_Start() 代码：

```
protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();

        //System.Data.Entity.Database.SetInitializer(new BareCupboard.Models.RecipeContextInitializer());
        Database.SetInitializer(new CreateDatabaseIfNotExists<BareCupboardDB>());

        var context = new BareCupboardDB();
        context.Database.Initialize(true);
    } 
```

还有我的连接字符串：

```
<add name ="testConnection"
     connectionString="data source= .\SQLExpress;Integrated Security=SSPI;Initial Catalog=BareCupboardDB"
     providerName="System.Data.SqlClient"/> 
```

据我所知，这绝对应该生成我的数据库文件。

我很感激任何帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:59:05.737

您的连接字符串指向 SQL Server 实例，因此您应该可以在其中找到表。你可以使用 SQL Management Studio 来看看

# jpa - 带有@MappedSuperclass 的JPA 静态元模型（带有一点代沟模式）

> ID：13048743
> 
> 赞同：5
> 
> 时间：2012-10-24T11:57:16.890
> 
> 标签：jpa, code-generation, criteria-api, metamodel

我试图用 JPA 实体实现代沟模式。这是我们选择的解决方案（ <-- 是继承）

```
BaseEntity <-- EntityGenerated <-- Entity 
```

EntityGenerated 类型是抽象的，并使用@MappedSuperclass 进行映射，所有字段均使用正确的映射注释生成，关系指向具体的子类，而不是 Generated 的。

Entity 是一个具体类型，仅在类不存在时生成，最初只有使用@Entity 注释的类声明。@Table 等其他映射属性在生成的 orm.xml 中。

现在，当我们生成 jpa 静态元模型（使用 hibernate 或 openjpa 元模型生成器）时，生成的类如下所示：

```
public class BaseEntity_ {
    public static volatile SingularAttribute<PersistentDomainObject,Long> id;
    public static volatile SingularAttribute<PersistentDomainObject,Long> timeStamp;
}

public class UserGenerated_ extends BaseEntity_ {
    public static volatile SetAttribute<UserGenerated,Group> groups;
}

public class User_ extends UserGenerated_  {
} 
```

如果我想在 jpa 条件查询中使用 User_，我将执行以下操作：

```
CriteriaQuery<User> query = criteriaBuilder.createQuery(User.class);
Root<User> root = query.from(User.class);
query.where(root.get(User_.groups).in(paramGroups)); 
```

但它不会编译.... User_.groups 是 SetAttribute 类型，get 方法的 jpa 路径 api 是：

```
<E, C extends java.util.Collection<E>> Expression<C> get(PluralAttribute<X, C, E> collection); 
```

（相比之下，奇异属性的get方法是

```
<Y> Path<Y> get(SingularAttribute<? super X, Y> attribute) 
```

女巫工作更好）

所以，现在，问题是：

*   为什么元模型生成器生成 MappedSuperclass 的类，因为没有办法直接查询它？，应该在每个子类中定义超类的属性和关系（其中 X 是子类类型）

*   为什么 jpa 标准 Path api 没有将复数属性的 get 方法定义为

    ```
    get(PluralAttribute<? super X, C, E> collection) 
    ```

    ?

*   如何在不放弃条件查询的情况下在 JPA 实体上实现代沟模式？

谢谢

# sharepoint - 使用 SessionSecurityToken 在 Sharepoint 2010 中持续登录？

> ID：13048747
> 
> 赞同：2
> 
> 时间：2012-10-24T11:57:33.680
> 
> 标签：sharepoint, sharepoint-2010, identity, claims-based-identity

我有一个在 Sharepoint 上运行的公共网站。现在，当用户登录时，我们希望他们能够选择“记住登录”，这样他们就有了持久登录。

据我了解，Sharepoint 支持这一点。您唯一需要做的就是运行：

`spFederationAuthenticationModule.SetPrincipalAndWriteSessionToken(someSessionSecurityToken, true);`

现在，我不知道如何获得重载所需的 SessionSecurityToken。目前我们使用的是没有 true 的。

我们的代码：

```
MembershipProvider membershipProvider = Membership.Providers["CustomProvider"];

            VerifyCredentialsResult verifyCredentialsDto = null;

            using (WindowsIdentity.Impersonate(IntPtr.Zero))
            {
                var customerService = Kernel.Resolve<ICustomerServiceAgent>();
                verifyCredentialsDto = customerService.VerifyCredentials(userName, passwordOrSsoToken);
                Kernel.ReleaseComponent(customerService);
            }

            if (!verifyCredentialsDto.Succes)
                return false;

            SecurityToken securityToken =
                SPSecurityContext.SecurityTokenForFormsAuthentication(new Uri(SPContext.Current.Web.Url),
                                                                      "CustomProvider",
                                                                      "CustomRoleProvider",
                                                                      verifyCredentialsDto.CustomerId,
                                                                      passwordOrSsoToken);
            if (securityToken != null)
            {
                SPFederationAuthenticationModule spFederationAuthenticationModule =
                    SPFederationAuthenticationModule.Current;

                spFederationAuthenticationModule.SetPrincipalAndWriteSessionToken(securityToken);
                return true;
            }
            return false; 
```

实现持久性真/假参数很容易，但是我们如何更改代码以在登录时支持持久性cookie？

# iphone - libRestKitThree20 库出现错误

> ID：13048756
> 
> 赞同：1
> 
> 时间：2012-10-24T11:58:09.717
> 
> 标签：iphone, ios, three20, restkit

我在项目中包含了restkit，当我构建restkit时，它构建成功。但是当我构建项目时，它给出了 6 个错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_TTModel", referenced from:
      _OBJC_CLASS_$_RKObjectLoaderTTModel in libRestKitThree20.a(RKObjectLoaderTTModel.o)
  "_OBJC_CLASS_$_TTTableLinkedItem", referenced from:
      _OBJC_CLASS_$_RKMappableObjectTableItem in libRestKitThree20.a(RKMappableObjectTableItem.o)
  "_OBJC_CLASS_$_TTTableViewDataSource", referenced from:
      _OBJC_CLASS_$_RKObjectTTTableViewDataSource in libRestKitThree20.a(RKObjectTTTableViewDataSource.o)
  "_OBJC_METACLASS_$_TTModel", referenced from:
      _OBJC_METACLASS_$_RKObjectLoaderTTModel in libRestKitThree20.a(RKObjectLoaderTTModel.o)
  "_OBJC_METACLASS_$_TTTableLinkedItem", referenced from:
      _OBJC_METACLASS_$_RKMappableObjectTableItem in libRestKitThree20.a(RKMappableObjectTableItem.o)
  "_OBJC_METACLASS_$_TTTableViewDataSource", referenced from:
      _OBJC_METACLASS_$_RKObjectTTTableViewDataSource in libRestKitThree20.a(RKObjectTTTableViewDataSource.o)
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status 
```

请帮助如何摆脱它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:15:16.320

确保您的项目正在使用 Three20 库。还要确保你的构建顺序是有意义的——你可能需要在编译 RestKit 之前在你的工作区/项目中引用three20，或者如果你有一个，则在 RestKit 项目中引用。

# php - 选择出现相同值的次数总和小于 X 的行

> ID：13048757
> 
> 赞同：1
> 
> 时间：2012-10-24T11:58:09.953
> 
> 标签：php, mysql

这让我困惑了几个小时。

所以我有一个活动表和一个供应商表。供应商可能有多个活动。如果供应商有足够的积分，我想选择所有广告系列。

问题是我不知道将从同一个供应商那里选择多少个广告系列，这意味着该供应商可能仍有两个广告系列的积分，但其余的则没有。

例子

```
tblvendors

+---------+------------+---------------+
|vendorId | vendorName | vendorCredits |
+---------+------------+---------------+
|    1    |      a     |      5        |
|    2    |      b     |      100      |
+---------+------------+---------------+

tblproducts

+-----------+---------------+------------+
| productId |  productName  |  vendorId  |
+-----------+---------------+------------+
|     1     |       c       |      1     |
|     2     |       e       |      2     |
|     3     |       f       |      1     |
|     4     |       g       |      1     |
|     5     |       h       |      1     |
+-----------+---------------+------------+

tblcampaigns

+------------+---------------+------------+
| campaignId |   productId   |  vendorId  |
+------------+---------------+------------+
|      1     |       1       |      1     |
|      2     |       2       |      2     |
|      3     |       3       |      1     |
|      4     |       4       |      1     |
|      5     |       5       |      1     |
+------------+---------------+------------+ 
```

现在考虑到每次选择一行时，供应商都会失去 2 个积分，因为供应商“a”只剩下 5 个积分，只有活动 1 2 和 3 应该返回。

我目前的查询是这样的：

```
SET @maxCampaignId = (SELECT MAX(campaignId) FROM tblCampaigns);
SELECT
    @maxCampaignId,
    t0.campaignId,
    t0.productId,
    productName,
    productDescription,
    productImage,
    (CASE WHEN campaignId > (SELECT configValue FROM tblconfiguration WHERE configKey = 'lastHomeCampaignId')
        THEN campaignId ELSE campaignId + @maxCampaignId END) AS orderField
FROM tblcampaigns AS t0
    INNER JOIN tblproducts AS t1 ON t0.productId = t1.productId
        INNER JOIN tblvendors AS t2 ON t1.vendorId = t2.vendorId
WHERE
    campaignType = 'homeFeature' AND
    t0.isActive = 1 AND
    t2.vendorCredits > (SELECT configValue FROM tblconfiguration WHERE configKey = 'campaignHomeFeatureCost' LIMIT 1)
ORDER BY orderField ASC
LIMIT 4 
```

如您所见，问题在于比较 vendorCredits 的行。显然，查询选择的广告系列超出了供应商的承受能力。

我想避免在 PHP 中执行此操作，因为我认为应该可以直接从数据库中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:15:51.587

检查这篇文章，它可能会有所帮助 -`group by`和`having`条款。我稍后会尝试做一些测试

[在 WHERE 子句中使用 COUNT(*)](https://stackoverflow.com/questions/301793/mysql-using-count-in-the-where-clause)

更新：

`select t2.vendorId, vendorCredits from tblcampaigns AS t0 JOIN tblproducts AS t1 ON t0.productId = t1.productId JOIN tblvendors AS t2 ON t1.vendorId = t2.vendorId group by t2.vendorId having t2.vendorCredits = count(t2.vendorId)`

如果我正确理解了这个问题：此查询将选择所有活动多于信用的供应商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:59:40.173

好的，找到了。

感谢这篇文章：[如何限制 SQL 中每个字段值的行数？](https://stackoverflow.com/questions/10421807/how-do-i-limit-the-number-of-rows-per-field-value-in-sql)

我所做的是按照我想要的顺序选择我想要的行作为子查询及其各自的行号，以便我可以在最后重新排序它。

然后我创建了由 vendorId 排序的第二个子查询，以便我可以计算它出现的次数并将 row_count 返回到主查询。

最后，在主查询中，我将其重新排序为最深子查询中的行号，但现在我有了想要比较的值，即每行的信用值 * 特定供应商的当前行号。

无论如何，也许代码被清除了，这里是：

```
SET @creditsCost = (SELECT configValue FROM tblconfiguration WHERE configKey = 'campaignHomeFeatureCost' LIMIT 1);
SET @maxCampaignId = (SELECT MAX(campaignId) FROM tblCampaigns);
SET @curRow = 0;
SELECT * FROM
(
    SELECT *,
        @num := if(@first_column = vendorId, @num:= @num + 1, 1) as row_num,
        @first_column:=vendorId as c
    FROM
        (SELECT
            @curRow := @curRow + 1 AS row_number,
            @maxCampaignId,
            t0.campaignId,
            t0.productId,
            t2.vendorId,
            t2.vendorCredits,
            productName,
            productDescription,
            productImage,
            (CASE WHEN campaignId > (SELECT configValue FROM tblconfiguration WHERE configKey = 'lastHomeCampaignId')
                THEN campaignId ELSE campaignId + @maxCampaignId END) AS orderField
        FROM tblcampaigns AS t0
            INNER JOIN tblproducts AS t1 ON t0.productId = t1.productId
                INNER JOIN tblvendors AS t2 ON t1.vendorId = t2.vendorId
        WHERE
            campaignType = 'homeFeature' AND
            t0.isActive = 1
        ORDER BY orderField ASC) AS filteredCampaigns
    ORDER BY vendorId
) AS creditAllowedCampaigns
WHERE
    row_num * @creditsCost <= vendorCredits
ORDER BY row_number 
```

无论如何，我仍然感谢谁花时间回答并尝试提供帮助，并将听取未来的评论，因为我认为这不是最好的表现方式。

# java - 结果集到多哈希映射

> ID：13048762
> 
> 赞同：1
> 
> 时间：2012-10-24T11:58:16.303
> 
> 标签：java, database, performance

我这里有个情况。我有一个包含 >10 列和数百万行的庞大数据库。我正在使用一种匹配算法，它将每个输入记录与数据库中的值进行匹配。

当有数百万条记录要匹配时，数据库操作会花费大量时间。我正在考虑使用多哈希映射或任何结果集替代方案，以便我可以将整个表保存在内存中并防止再次访问数据库......

谁能告诉我该怎么办？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:19:57.297

我认为这不是正确的方法。您正在尝试用 Java 手动完成数据库的工作。我并不是说你没有能力做到这一点，但大多数数据库已经开发了很多年，并且非常擅长做你想要的事情。

但是，需要**正确配置**数据库才能快速执行给定类型的查询。所以我的建议是你首先检查你是否可以调整数据库配置来提高查询的性能。最常见的事情是将正确的索引添加到您的表中。阅读[MySQL 如何使用索引](http://dev.mysql.com/doc/refman/5.1/en/mysql-indexes.html)或特定数据库手册的相应部分以获取更多信息。

另一件事是，如果您有这么多数据，将所有内容存储在主内存中可能不会更快，甚至可能不可行。并不是说您必须先传输整个数据。

无论如何，首先尝试使用分析器来识别程序的瓶颈。也许问题甚至不在数据库方面。

# jsp - jsp中的注释语法

> ID：13048765
> 
> 赞同：0
> 
> 时间：2012-10-24T11:58:21.090
> 
> 标签：jsp, tomcat, jsp-tags

一开始我得到了一些（很多）带有注释代码的jsp文件。

它看起来

```
<%-------------------------------------------%>
<%-- All the comment text about the author --%>
<%-- And of course the company --------------%>
<%-------------------------------------------%> 
```

我在 Tomcat 7.0.30 上安装了应用程序并收到以下错误：

```
org.apache.jasper.JasperException: /path/to/jsp/file.jsp 
(line: 13, column: 4) Unterminated &lt;%-- tag 
```

**最后**的注释行是第 13 行！
当我将第 13 行的注释代码更改为

```
<%-- ----------- --%> 
```

一切正常！

问题1：
为什么1号线没有问题？**编辑：**因为它在第 2 行终止！

问题2：
<%--------%> 作为评论“不允许”是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:02:44.680

`<%-------%>`允许作为评论，因为我自己尝试过。

# android - 相对布局：Api < 11 上的不同行为

> ID：13048766
> 
> 赞同：5
> 
> 时间：2012-10-24T11:58:21.450
> 
> 标签：android, api, android-layout, position, android-relativelayout

我不知道为什么，但布局在带有 Api 11+ 的设备上显示得很好，不适合较旧的设备。

这是xml：

```
 <LinearLayout
        android:id="@+id/workers_linearlayout"
        android:layout_width="50dp"
        android:layout_height="70dp"
        android:layout_weight="1" >

        <RelativeLayout
            android:id="@+id/workers_relative_layout"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="center" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:src="@drawable/workers_small" />

            <ImageView
                android:id="@+id/imageView3"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_centerInParent="true"
                android:scaleX="0.5"
                android:scaleY="0.5"
                android:src="@drawable/ic_cerchio_rosso"
                android:translationX="25dp"
                android:translationY="-20dp" />

            <TextView
                android:id="@+id/workers_number"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:text="9"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:translationX="25dp"
                android:translationY="-20dp" />
        </RelativeLayout>
    </LinearLayout> 
```

这是 API 11+ 上的结果：

![API11+](../Images/ca56a2df180a0307d7ee7394cb6f33d2.png)

这在 API 10-上：

![API 10-](../Images/a48d82a89d558ec82f155aa44d933f98.png)

我试着用布局来修复它，我可以获得一个很好的结果，但从来没有像第一个那样。

有人能帮我吗？

**编辑：**

设备上的照片：

![在此处输入图像描述](../Images/48b35f4808e848d3c8e0adddc883c567.png)

**编辑2**

三角警告是：

*   字符串“9”应该使用字符串资源
*   ImageView1 和 3：缺少内容描述属性
*   RelativeLayout 或者它的父级可能没用
*   嵌套权重不利于性能

顺便说一句，我认为这些都不能解决我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:48:16.307

行。我修好了它。使用布局并遵循 NikkyD 关于“父母中心”功能的建议，我遵循了以下政策：

无法使用比例和平移属性，因为较旧的 API（可能）无法识别它们。所以，我删除了平移和缩放选项，并通过为 IV3 (30dpx30dp) 设置固定的高度和宽度来缩放图像。现在尺寸是正确的，但是如果我为 IV3 和 TextView 调用“对齐父顶部”和“对齐父右”，它们的位置很好，但 TextView 没有定位在 IV3 的中心。就像这样：

![号码位置错误](../Images/1a6cf5dc9f55ea3148975a89059925b3.png)

为了修复它，我在“workersRelativeLayout”中添加了一个新的相对布局，并将 IV3 和 TextView 放入其中，并为每个布局设置“父级中心”为 TRUE。然后，我设置了一个新的相对布局“对齐父顶部”和“对齐父右”。这是最终结果：

![右号码位置](../Images/ce5a1db75755c934ac0be85ab5af4340.png)

这是新的 xml 布局：

```
 <LinearLayout
                android:id="@+id/workers_linearlayout"
                android:layout_width="50dp"
                android:layout_height="70dp"
                android:layout_weight="1" >

                <RelativeLayout
                    android:id="@+id/workers_relative_layout"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:gravity="center" >

                    <ImageView
                        android:id="@+id/imageView1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerInParent="true"
                        android:src="@drawable/workers_small" />

                    <RelativeLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentRight="true"
                        android:layout_alignParentTop="true" >

                        <ImageView
                            android:id="@+id/imageView3"
                            android:layout_width="30dp"
                            android:layout_height="30dp"
                            android:layout_centerInParent="true"
                            android:src="@drawable/ic_cerchio_rosso" />

                        <TextView
                            android:id="@+id/workers_number"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_centerInParent="true"
                            android:text="9"
                            android:textAppearance="?android:attr/textAppearanceMedium" />

                    </RelativeLayout>
                </RelativeLayout>
            </LinearLayout> 
```

希望这可以帮助某人:)

**编辑**

注意父宽度大小。如果您将权重的父级设置为 1，则大小自然会根据显示大小而动态变化。图像始终位于中心父级，IV3 和 TextView 的相对布局将始终位于顶部|右侧。因此，如果父宽度大小增加，图像居中和新的相对布局之间的距离也会增加，并且可能会发生如下情况：

![在此处输入图像描述](../Images/84be7c0add9da8697efb3ba4e3b1e662.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T11:11:28.743

第一个 LinearLayout 有一个权重。如果它有一个权重，那么它需要将一个维度设置为 0dp，这将是它按其权重缩放的维度。

相对布局的所有 3 个元素都具有“centeredinparent”为真。父级是 RelLayout。

IV3 有一个 match_parent 的高度，所以它会被拉伸到 rel-layout 的高度。我很确定这会覆盖您的比例 0.5 选项。

我不太确定，但我猜想 rel-layout centeredinparent 也会覆盖翻译。

带有选项的布局非常难看。有些被认为优于其他人，它们不会生效。我玩了相当多的时间与相对布局并发现，在我的情况下，我只能用“下面”而不是“上面”来排列它们，因为由于某种原因，上面的定位不起作用（即使在 eclipse 预览中也不行） !!）但是xml绝对没有问题。

所以我猜你的一些选项会否决其他选项，这会影响到更现代的 API，因为它们可能更具限制性（或者更破碎，它仍然是 android ;)）

# php - 无法在同一目录中加载带有 MY_Assetes 的 Assetes 类

> ID：13048772
> 
> 赞同：0
> 
> 时间：2012-10-24T11:58:48.280
> 
> 标签：php, codeigniter

我的应用程序文件夹中有一个第三方资产库，我正在使用 MY_Assets 库扩展该库，它们都在同一个应用程序/库目录中，但是在加载它时给出错误无法加载请求的类：资产，我想添加一些额外的通过扩展库中的功能，因此如果主库的开发人员进行任何更新对我的扩展没有影响

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:40:28.437

将文件放在应用程序文件夹中，需要手动包含代码，然后从它扩展。

请参阅我用于扩展 Codeigniter 的 Facebook 连接的以下代码。

```
include(APPPATH.'libraries/facebook/facebook.php');

class Fb_connect extends Facebook{
   //my coding here
} 
```

在这里，我在库文件夹中有一个名为 facebook 的文件夹，用于 facebook 相关的下载文件，FB_connect.php 是我的库文件，它位于 application /libraries 文件夹和从 Facebook 类继承的 fb_connect 类中。

# c# - 如何使用循环和 if 语句在 C# 中创建 4 个正方形（如 Windows 徽标）？

> ID：13048778
> 
> 赞同：1
> 
> 时间：2012-10-24T11:59:13.787
> 
> 标签：c#, visual-studio-2010, if-statement, for-loop, console-application

我想创建一个程序，输出 4 个看起来像 Windows 徽标的正方形。到目前为止，我已经设法创建了 2 个如下所示的正方形：

```
[ ]

[ ] 
```

我先做了2个垂直方块。那么如何添加另外 2 个垂直方块来完成 Windows 徽标呢？

```
[ ] [ ]

[ ] [ ] 
```

这是我的代码：

```
 Console.BackgroundColor = ConsoleColor.DarkCyan;
        Console.Clear();
        int size = 10;
        Console.WriteLine();
        for (int row = 3; row <= size; row++)
        {
            for (int col = 0; col <= size + 1; col++)
            {
                if (col == 0)
                {
                    Console.BackgroundColor = ConsoleColor.DarkCyan;
                    Console.Write(" ");
                    Console.ResetColor();
                }
                else
                {
                    Console.BackgroundColor = ConsoleColor.White;
                    Console.Write(" ");
                    Console.ResetColor();
                }
            }
            Console.WriteLine();
        }
        Console.WriteLine();
        for (int row = 3; row <= size; row++)
        {
            for (int col = 0; col <= size + 1; col++)
            {
                if (col == 0)
                {
                    Console.BackgroundColor = ConsoleColor.DarkCyan;
                    Console.Write(" ");
                    Console.ResetColor();
                }
                else
                {
                    Console.BackgroundColor = ConsoleColor.White;
                    Console.Write(" ");
                    Console.ResetColor();
                }
            }
            Console.WriteLine();
        }
        Console.ReadKey(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:29:08.170

在第一步中编写一个辅助方法来绘制一些东西：

```
public static class Draw
{
    public static void Rectangle(int top, int left, int width, int height, ConsoleColor color)
    {
        if (width < 0)
            throw new ArgumentException("width must be greater or equal zero.", "width");

        if (height < 0)
            throw new ArgumentException("height must be greater or equal zero.", "height");

        var oldPositionLeft = Console.CursorLeft;
        var oldPositionTop = Console.CursorTop;
        var oldColor = Console.BackgroundColor;

        Console.BackgroundColor = color;

        for (int i = 0; i < height; i++)
        {
            Console.SetCursorPosition(left, top + i);
            Console.Write(new String(' ', width));
        }

        Console.SetCursorPosition(oldPositionLeft, oldPositionTop);
        Console.BackgroundColor = oldColor;
    } 
```

然后定义您要绘制的项目：

```
var items = new[] 
{ 
    new 
    { 
        Color = ConsoleColor.DarkCyan,
        Top = 1,
        Left = 1,
        Size = 5
    },
    new 
    { 
        Color = ConsoleColor.DarkGreen,
        Top = 1,
        Left = 7,
        Size = 5
    },
    new 
    { 
        Color = ConsoleColor.DarkRed,
        Top = 7,
        Left = 1,
        Size = 5
    },
    new 
    { 
        Color = ConsoleColor.DarkYellow,
        Top = 7,
        Left = 7,
        Size = 5
    },
}; 
```

然后简单地遍历元素并绘制它们：

```
foreach (var item in items)
{
    Draw.Rectangle(item.Top, item.Left, item.Size, item.Size, item.Color);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:10:00.307

这是您的代码（您应该在其上进行大量工作）已更改，因此它应该绘制您想要的内容。我建议稍微重构一下。请注意，在绘制第一个矩形（在大小的中间）之后，您应该将大小至少增加一倍并写入一次 DarkCyan。检查代码：

```
 Console.BackgroundColor = ConsoleColor.DarkCyan;
            Console.Clear();
            int size = 20;
            Console.WriteLine();
            for (int row = 3; row <= size/2; row++)
            {
                for (int col = 0; col <= size + 1; col++)
                {
                    if (col == 0 || col == size/2 +1)
                    {
                        Console.BackgroundColor = ConsoleColor.DarkCyan;
                        Console.Write(" ");
                        Console.ResetColor();
                    }
                    else
                    {
                        Console.BackgroundColor = ConsoleColor.White;
                        Console.Write(" ");
                        Console.ResetColor();
                    }
                }
                Console.WriteLine();
            }
            Console.WriteLine();
            for (int row = 3; row <= size/2; row++)
            {
                for (int col = 0; col <= size + 1; col++)
                {
                    if (col == 0 || col == size / 2 + 1)
                    {
                        Console.BackgroundColor = ConsoleColor.DarkCyan;
                        Console.Write(" ");
                        Console.ResetColor();
                    }
                    else
                    {
                        Console.BackgroundColor = ConsoleColor.White;
                        Console.Write(" ");
                        Console.ResetColor();
                    }
                }
                Console.WriteLine();
            }
            Console.ReadKey(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:10:46.670

尝试这个

> Console.BackgroundColor = ConsoleColor.DarkCyan;
> 
> ```
>  Console.Clear();
>         int size = 10;
>         Console.WriteLine();
>         for (int row = 3; row <= size; row++)
>         {
>             for (int col = 0; col <= size + 1; col++)
>             {
>                 if (col == 0)
>                 {
>                     Console.BackgroundColor = ConsoleColor.DarkCyan;
>                     Console.Write(" ");
>                     Console.ResetColor();
>                 }
>                 else
>                 {
>                     Console.BackgroundColor = ConsoleColor.White;
>                     Console.Write(" ");
>                     Console.ResetColor();
>                 }
> 
>             }
>             for (int col = 0; col <= size + 1; col++)
>             {
>                 if (col == 0)
>                 {
>                     Console.BackgroundColor = ConsoleColor.DarkCyan;
>                     Console.Write(" ");
>                     Console.ResetColor();
>                 }
>                 else
>                 {
>                     Console.BackgroundColor = ConsoleColor.White;
>                     Console.Write(" ");
>                     Console.ResetColor();
>                 }
>             }
>             Console.WriteLine();
>         }
>         Console.WriteLine();
>         for (int row = 3; row <= size; row++)
>         {
>             for (int col = 0; col <= size + 1; col++)
>             {
>                 if (col == 0)
>                 {
>                     Console.BackgroundColor = ConsoleColor.DarkCyan;
>                     Console.Write(" ");
>                     Console.ResetColor();
>                 }
>                 else
>                 {
>                     Console.BackgroundColor = ConsoleColor.White;
>                     Console.Write(" ");
>                     Console.ResetColor();
>                 }
>             }
>             for (int col = 0; col <= size + 1; col++)
>             {
>                 if (col == 0)
>                 {
>                     Console.BackgroundColor = ConsoleColor.DarkCyan;
>                     Console.Write(" ");
>                     Console.ResetColor();
>                 }
>                 else
>                 {
>                     Console.BackgroundColor = ConsoleColor.White;
>                     Console.Write(" ");
>                     Console.ResetColor();
>                 }
>             }
>             Console.WriteLine();
>         }
>        
> 
>         Console.ReadKey(); 
> ```

# azure - 禁用 azurewebsites.net 子域

> ID：13048779
> 
> 赞同：6
> 
> 时间：2012-10-24T11:59:16.220
> 
> 标签：azure, web

我们的公司网站托管在 Windows Azure 网站上，并为我们的域设置了 A 记录。

[问题是人们也可以使用http://azurewebsites.net](http://azurewebsites.net)的 mangomint 子域访问我们的站点（我不想在这里发布完整的 url，因为 Google 不应该看到这个）。这在 SEO 和重复内容方面很糟糕。

如何禁用子域以支持我们的主域？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T12:03:57.540

好吧，我认为您无法更改官方 azurewebsites.net DNS 记录，因此您只有两个解决方案：

*   在 Azure 网站配置中找到一种禁用此子域的方法**编辑：不可能，从 asaykov 在评论中所说的。感谢他。**
*   使您的网站在用户登陆子域时自动重定向（HTTP 301，永久重定向）。

# wordpress - Ajax 事件日历 php 短代码

> ID：13048793
> 
> 赞同：0
> 
> 时间：2012-10-24T12:00:36.740
> 
> 标签：wordpress, shortcode

用于在 php 页面中添加 Ajax 事件日历的 Shorcode。我们有一个 [日历] 简码。但它不能添加任何 php 页面。希望你能帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T16:01:17.967

该插件的常见问题解答回答了这个问题。

[https://code.google.com/p/wp-aec/wiki/FrequentlyAskedQuestions#How_can_I_include_the_calendar_directly_in_my_theme_without_usin](https://code.google.com/p/wp-aec/wiki/FrequentlyAskedQuestions#How_can_I_include_the_calendar_directly_in_my_theme_without_usin)

# login - 使用实时窗口应用程序注销后重新登录不成功

> ID：13048794
> 
> 赞同：2
> 
> 时间：2012-10-24T12:00:40.790
> 
> 标签：login, logout

我有一个 Windows Live 应用程序，它使用 login.live.com 登录或注销我的应用程序。当我使用 login.live.com url 登录时，我会注销，但注销后无法重新登录。

如果我关闭浏览器然后再次启动它或登录一段时间，我可以成功重新登录。我知道 live cookie 有问题，但我找不到这个问题的解决方案。

# macos - 在 emacs 24.2 中获取 emacs 23 缓冲区列表行为

> ID：13048795
> 
> 赞同：1
> 
> 时间：2012-10-24T12:00:42.933
> 
> 标签：macos, emacs

我刚刚将 emacs 从 23.4 升级到 24.2（在 OS X 上）。我使用[emacs-starter-kit](https://github.com/technomancy/emacs-starter-kit)，但它似乎不会影响 24.2 中的这种行为（我目前已禁用它），而且我很确定在开始使用它之前我在 23 中得到了预期的行为。

在 23.4 中，如果我打开缓冲区“x”并打开文件“y”，则缓冲区列表在“x”之前显示“y”，这意味着

*   在缓冲区“x” `C-x <left>`（`previous-buffer`）中切换到缓冲区“y”
*   在缓冲区 "y" `C-x <right>`( `next-buffer`) 中切换到缓冲区 "x"

当我使用 时，这个顺序会改变`C-x b`，但我可以接受。

在 24.2 打开文件似乎有时会重新排序缓冲区列表，有时会在缓冲区列表中的当前缓冲区之后添加文件（取决于打开的文件数和我跑`C-x C-f`打开另一个文件时当前缓冲区的位置）。这两种行为都不是我所期望的。如何恢复 23.4（及更早版本）的行为？

我找到了以下命令，但它们似乎不起作用。

```
(setq Buffer-menu-sort-column nil)
(setq Buffer-menu-user-frame-buffer-list nil) 
```

我知道这似乎微不足道，但在过去的几年里，我已经训练自己期待一个特定的行为，`C-x <left>`而`C-x <right>`新的行为让我失望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:47:43.610

你拼错了第二个变量名——命令应该是：

```
(setq Buffer-menu-use-frame-buffer-list nil) 
```

（那`-use-`不是`-user-`.）我不知道它是否会做你想要的，但它至少应该有效果。您还可以自定义值，而不是使用`setq`.

# r - 在 RAM 交换到磁盘之前停止

> ID：13048797
> 
> 赞同：2
> 
> 时间：2012-10-24T12:00:47.527
> 
> 标签：r

我正在排除我的 R 脚本使用过多 RAM 的原因，并且需要找到它发生的位置，以便我可以开始寻找解决方案。问题是，每当超过 RAM 时，计算机就会开始交换到磁盘，然后是 20 分钟令人沮丧的计算机冻结、R 重新启动，并且需要重新加载所有内容。

我可以在 RAM 满之前让脚本停止吗？我想这样的代码是我需要的。但我无法弄清楚获得实际情况所需的“不确定1”和“不确定2”功能。

```
installed.RAM <- notsure1()
used.RAM <- notsure2()
stopifnot(used.RAM < 0.9*installed.RAM) 
```

notsure1() 和 notsure2() 可能是什么？

我在 Ubuntu 上使用 R（带有 RStudio Server）。16GB 内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:34:01.230

在 Linux / MAC OSX 上：

```
installed.RAM <- as.numeric(system("awk '/MemTotal/ {print $2}' /proc/meminfo",intern=TRUE));
used.RAM <- installed.RAM - as.numeric(system("awk '/MemFree/ {print $2}' /proc/meminfo", intern=TRUE)); 
```

# php - PHP ldap 绑定问题

> ID：13048800
> 
> 赞同：0
> 
> 时间：2012-10-24T12:00:51.140
> 
> 标签：php, ldap, ldapconnection

我一直在查看一些指南（和 PHP 手册），试图在我即将制作的 Intranet 站点上验证 AD 用户。这是我第一次使用 ldap_connect，但运气不佳。

任何人都可以看看我的代码，看看我错过了什么？

谢谢。

```
<?php
    $user = "08jf1";
    $password = "pass";

    // Active Directory server
    $ldap_host = "10.43.48.5"; 

    // Active Directory DN
    $ldap_dn = "OU=CSE-W7,OU=Students-W7,DC=server,DC=local";

    // Domain, for purposes of constructing $user
    $ldap_usr_domain = "@server.local";

    // Connect to AD host
    $ldapconn = ldap_connect("10.43.48.5");

    if ($ldapconn) { 
            $bind = ldap_bind($ldap_host, $ldap_dn, $user . $ldap_usr_domain, $password);

            if ($bind) {
                echo "Verified user";

                //$_SESSION['username'] = $session_username;
                //$_SESSION['password'] = $session_password;

                } else {
                    echo "User does not exist";
                }
        }
?> 
```

**编辑：**我可以通过 phpinfo 确认 ldap 已启用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:03:39.580

那语法`ldap_bind`正确吗？不是`ldap_bind($ldapconn,$rdn,$password)`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:49:40.520

绑定可能需要提升的权限或 authbind 包装器。有关 ldap，请参阅 authbind。[LDAP 身份验证绑定](http://wiki.dovecot.org/AuthDatabase/LDAP/AuthBinds)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T12:54:33.003

看看这个非常简单的例子：[How to use LDAP Active Directory Authentication with PHP](http://www.exchangecore.com/blog/how-use-ldap-active-directory-authentication-php/)

# html - ie7中表格单元格内Div内的Rad菜单

> ID：13048801
> 
> 赞同：0
> 
> 时间：2012-10-24T12:01:00.657
> 
> 标签：html, css, radmenu

我使用表格为我的网站创建了布局，并且我有一个包含 Rad 菜单的单元格。当将 ie9 中的文档模式更改为 IE7 标准时，我的问题是鼠标悬停时 rad 菜单将超出屏幕（当将表格的浮动从左侧更改为是对的）![在此处输入图像描述](../Images/b433fc14c9953d65a8a001f6af7fba66.png)。表格单元格的内容是：

```
<tr>
   <td colspan="4">
      <div>
          <radM:RadMenu ID="RadMenu2" runat="server" Width="100%">
          </radM:RadMenu>
      </div>
   </td>
 </tr> 
```

![在此处输入图像描述](../Images/a37b1f25816a6976a818cfc6f47816cb.png)

# security - Jetty 中的 Https 响应慢

> ID：13048802
> 
> 赞同：0
> 
> 时间：2012-10-24T12:01:08.527
> 
> 标签：security, https, jetty

我在亚马逊 ec2 机器（m1-small）上使用 servlet 3 和 jetty 8.1.1 和 SslContextFactory。

*   来自本地主机（亚马逊机器）的第一个 HTTPS 请求大约为 150 毫秒，进一步的请求似乎变得更快（低至约 40 毫秒），但不像 HTTP 响应时间只有 20 毫秒那样接近 - 为什么？加密真的那么慢吗？

*   此外，当从亚马逊云外部比较 HTTPS 和 HTTP 时，差异会变得更糟：HTTPS 请求至少慢 400 毫秒！？这个怎么可能？加密的内容是否也更大？我怎样才能调试它或让它更快？

更多信息：所有“测量”都是通过不科学地完成的，`time curl http://mydomain.com/ping`但可以重现。中间还有一个 ec2 负载均衡器。我确定我的配置有问题，或者我有很大的误解。让我知道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:30:32.873

*   更新到 8.1.7
*   在 aws 机器上检查来自 localhost 的时间以供参考
*   检查使用 IP 与 DNS，通常这些长暂停涉及 dns 问题
*   设置您的 /etc/hosts 以绕过 DNS 查找主机作为测试
*   -Dorg.eclipse.jetty.LEVEL=DEBUG 在服务器端启用调试，应该有助于您关联码头内部的往返行程并与实际网络结果进行比较
*   ssl 解密确实会导致一些性能损失，但很难说这就是你的所有差异
*   很可能这不是码头特有的，而是环境中的某些东西，希望上面的一些子弹能帮助你朝着正确的方向前进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:32:22.233

我需要了解如何启用 SSL 会话。为此，我创建[了一个新问题](https://stackoverflow.com/q/15946228/194609)，因为不清楚如何在码头打开以及如何在客户端处理

# php - PHP Excel Reader 2 read 如果未填写则无法读取列

> ID：13048803
> 
> 赞同：0
> 
> 时间：2012-10-24T12:01:10.267
> 
> 标签：php, excel

我有一个这样的 excel 文件：[Excel 示例](http://imageshack.us/a/img16/7893/excelsample.png)

当我这样做时，我想阅读 F、G、H、J 列：

> ```
>  for ($i = 3; $i <= $data->sheets[0]['numRows']; $i++) {
>                 error_log(
>                     FW_Class_Voucher_Code::cleanCode($data->sheets[0]['cells'][$i][6]).' - '.
>                     FW_Class_Voucher_Code::cleanCode($data->sheets[0]['cells'][$i][7]).' - '.
>                     FW_Class_Voucher_Code::cleanCode($data->sheets[0]['cells'][$i][8]).' - '.
>                     FW_Class_Voucher_Code::cleanCode($data->sheets[0]['cells'][$i][9]));
>                 $count++;
>                 } 
> ```

我遇到错误的问题：

> PHP 通知：未定义的偏移量：7 PHP 通知：未定义的偏移量：8 PHP 通知：未定义的偏移量：9

F 列总是满的，但正如你所见，我遇到了其他问题。我怎样才能避免这个错误，所以只有在字段中填充了数据时才会检查该字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:34:53.840

```
 for ($i = 3; $i <= $data->sheets[0]['numRows']; $i++) {
    $err=array;
    for($j=6; $j<=9; $j++){
      if(isset(FW_Class_Voucher_Code::cleanCode($data->sheets[0]['cells'][$i][$j])))
         $err[]=FW_Class_Voucher_Code::cleanCode($data->sheets[0]['cells'][$i][$j]) ;
    }
    if(!empty($err){
      $msg=implode('-',$err);
      error_log($msg);
    } 
    $count++; //I don't know what you're using $count for
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:23:55.677

```
 if (isset($data->sheets[0]['cells'][$i][7])) {
                        $col7 = $data->sheets[0]['cells'][$i][7];
                    } else {
                        $col7 = '';
                    }
                    if (isset($data->sheets[0]['cells'][$i][8])) {
                        $col8 = $data->sheets[0]['cells'][$i][8];
                    } else {
                        $col8 = '';
                    }
                    if (isset($data->sheets[0]['cells'][$i][9])) {
                        $col9 = $data->sheets[0]['cells'][$i][9];
                    } else {
                        $col9 = '';
                    } 
```

看起来真的很难看，但它的工作原理。

# c# - 在按钮中添加动画

> ID：13048805
> 
> 赞同：0
> 
> 时间：2012-10-24T12:01:12.570
> 
> 标签：c#, animation, mono, xamarin.android, mvvmcross

我想在按钮上创建动画。按钮有它的形象。当点击按钮应该工作动画图像。动画完成后 - 显示上一张图像。

类似于以下算法：

> **关闭快门 > 单击 > 播放动画快门 > 显示图像**

我已经准备好了动画“Animation.gif”。单击按钮时需要运行它。

如何组织？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:36:24.483

您需要将这样的东西移植到 Mono for Android -[如何使 Android Buttons 在单击时自行显示动画](https://stackoverflow.com/questions/8921745/how-to-make-android-buttons-show-animation-on-itself-when-clicked)

我可能会首先通过让动画工作来解决这个问题，然后通过构建一个将动画和按钮包装在一起的自定义视图来解决这个问题 - 并公开一个可以由 MvvmCross 用于绑定的 Click 事件。

还值得四处寻找有关“Android 中的动画按钮”的博客文章和其他问题 - 例如，对我来说最热门的作品之一是[http://android-er.blogspot.co.uk/2012/02/apply-animation- on-button.html](http://android-er.blogspot.co.uk/2012/02/apply-animation-on-button.html) - 其中大部分将是 Xml 和 Java，并且应该非常快速地移植到 Mono for Android

# shell - 移动具有相似名称的文件/directpries，匹配规则

> ID：13048809
> 
> 赞同：0
> 
> 时间：2012-10-24T12:01:35.317
> 
> 标签：shell, merge, filenames

我们将大约 4TB 的文件从 Mac Sever 移动到 Windows Server08R2。由于不兼容的字符，许多文件名不会消失。我们运行了一个重命名工具来解决问题并再次复制。我的问题是现在我有很多名称非常相似的文件夹，例如“O'Neil”和“O_Neil”。事实上，据我所知，它们都符合这条规则。有太多的手工要做，我正在考虑写一个脚本，但我对脚本的经验有限。我想比较修改日期或文件大小并将文件夹合并或移动到存档并保留一组。我不确定在这种情况下的最佳做法。

1）理论上最佳实践是什么，按日期合并，存档较小的版本？2）在实践中，我该如何解决这个问题？有工具吗？剧本创意？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:51:30.647

```
find /path -type f -print0 | xargs -0 md5sum |
awk '
{
  if ($1 in seen)
    printf "duplicate: %s and %s\n", $2, seen[$1]
  else
    seen[$1] = $2
}
' 
```

[从单个目录中删除具有重复内容的文件 [Perl 或算法]](https://stackoverflow.com/q/1747074/#1747287)

# sql - CTE 亲子显示兄弟姐妹

> ID：13048811
> 
> 赞同：5
> 
> 时间：2012-10-24T12:01:38.510
> 
> 标签：sql, sql-server, sql-server-2008

我有一个 CTE 查询，它使用递归显示一棵树。这在显示整棵树时效果很好。但我想将 ID 作为变量传递，并包含每个当前节点的兄弟姐妹。

测试代码：

```
DECLARE @TT TABLE 
(
ID int,
Name varchar(25),
ParentID int,
SortIndex int
)

INSERT @TT 
SELECT 1, 'A', NULL, 1 UNION ALL
SELECT 2, 'B_1', 3, 1 UNION ALL
SELECT 3, 'B', 1, 2 UNION ALL
SELECT 4, 'B_2', 3, 2 UNION ALL
SELECT 5, 'C', 1, 3 UNION ALL
SELECT 6, 'C_2', 5, 2  UNION ALL
SELECT 7, 'A_1', 1, 1 UNION ALL
SELECT 8, 'A_2', 1, 2 UNION ALL
SELECT 9, 'C_1', 5, 1 

;WITH CTETree
AS
(
    SELECT *, CAST(NULL AS VARCHAR(25)) AS ParentName, 1 AS Lev,
    CAST(ROW_NUMBER() OVER(ORDER BY SortIndex) AS VARBINARY(MAX)) AS SortPath
    FROM @TT
    WHERE ParentID IS NULL

    UNION ALL

    SELECT F.*, CTETree.Name AS ParentName, Lev + 1,
    SortPath + CAST(ROW_NUMBER() OVER(ORDER BY F.SortIndex) AS BINARY(32))
    FROM @TT AS F
    INNER JOIN CTETree
    ON F.ParentID = CTETree.ID 
)

SELECT * FROM CTETree
    ORDER BY SortPath

/*
DESIRED RESULT:

WHEN ID = 3 PASSED IN:

1   A   NULL    1   NULL    1
3   B   1   2   A   2
2   B_1 3   1   B   3
4   B_2 3   2   B   3
5   C   1   3   A   2

WHEN ID = 1 PASSED IN:

1   A   NULL    1   NULL    1
3   B   1   2   A   2
5   C   1   3   A   2

WHEN ID = 9 PASSED IN:

1   A   NULL    1   NULL    1
3   B   1   2   A   2
5   C   1   3   A   2
9   C_1 5   1   C   3
6   C_2 5   2   C   3

*/ 
```

SQL小提琴：[http ://sqlfiddle.com/#!3/d41d8/5526](http://sqlfiddle.com/#!3/d41d8/5526)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:33:00.610

只有一次我遇到了 A_1 和 A_2 消失的问题。因此添加异常（在 case 子句中）。如果您需要此记录，请删除此表达式 AND f.ID != 7 AND f.ID != 8。

```
DECLARE @ID int = 3 -- variable wich you want pass
DECLARE @Matched int = (SELECT CASE WHEN ParentID = 1 THEN ID ELSE ParentID END FROM @TT WHERE ID = @ID)
;WITH CTETree
AS
(
 SELECT *, CAST(NULL AS VARCHAR(25)) AS ParentName, 1 AS Lev,
        CAST(ROW_NUMBER() OVER(ORDER BY SortIndex) AS VARBINARY(MAX)) AS SortPath,
        0 AS Matched
 FROM @TT
 WHERE ParentID IS NULL
 UNION ALL
 SELECT F.*, cte.Name AS ParentName, cte.Lev + 1,
        SortPath + CAST(ROW_NUMBER() OVER(ORDER BY F.SortIndex) AS BINARY(32)),
        CASE WHEN (cte.ID = 1 AND f.ID != 7 AND f.ID != 8)
        OR (cte.ID = @Matched AND cte.Lev + 1 > 2)
        THEN 1 END AS Matched
 FROM @TT AS F INNER JOIN CTETree cte
 ON F.ParentID = cte.ID
)
SELECT ID, Name, ParentID, SortIndex, ParentName, Lev FROM CTETree
WHERE Matched IS NOT NULL
ORDER BY SortPath 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d41d8/6287/0)上的演示[](http://sqlfiddle.com/#!3/d41d8/6287/0)

# c++ - 计算字符串数组c ++中的字符串？

> ID：13048821
> 
> 赞同：8
> 
> 时间：2012-10-24T12:02:20.803
> 
> 标签：c++, string, count

如何对未明确定义的字符串数组中的字符串数求和？

```
string str[] = { "astring", "bstring", "cstring", "dstring", "zstring" }; 
```

需要找出数组有多少元素？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T12:04:45.800

```
template< typename T, size_t N >
/*constexpr*/ size_t size( T(&arr)[N]) )
{
   return N;
} 
```

`constexpr`如果可用（C++11）将允许您将静态（编译时）使用的返回值用作另一个数组的大小。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T12:03:47.047

如果`str[]`是静态定义的（如图所示），那么这将起作用：

```
const size_t numElements = sizeof(str) / sizeof(str[0]); 
```

如果它是动态创建的，那么您将需要一个*标记*来指示最后一个元素（`0`如果它是一个指针数组，则通常使用它）。那个或调用者告诉你有多少元素（也很常见）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T12:11:30.837

除了其他答案中已经列出的方法之外，另一种方法可能是在数组的末尾添加一个保护值，例如一个空字符串。然后，您可以遍历数组，直到达到保护值。

就个人而言，我可能会使用 C++11 和

```
std::vector<std::string> la = { "foo", "bar", "baz" }; 
```

所以你可以查询`la.size()`得到你想要的东西......无论如何，在运行时。不幸的是，我没有看到使用这个技巧的方法`std::array`，所以它不是一个完美的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-26T03:53:09.707

使用指针计算数组元素的一种方法：

```
#include <iostream>
using namespace std;

int main() {
    string str[] = { "astring", "bstring", "cstring", "dstring", "zstring" };
    cout << ((&str)[1] - str);  // 5
    cout << endl;
    return 0;
} 
```

输出：
5

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-26T03:13:19.700

我通常使用单独的变量来跟踪数组大小。

```
String str[] = { "astring", "bstring", "cstring", "dstring", "zstring" };
int strNum = 5; 
```

然后，如果我需要引用任何字符串，我可以这样称呼它：

```
String foo = str[strNum-1]; 
```

每当我在循环中更新数组时，我只需使用 strNum 作为开始写入新字符串的索引，然后在每个新字符串之后立即在循环中放置一个 strNum++。

# mailchimp - 使用 MailChimp 配置 DKIM

> ID：13048823
> 
> 赞同：5
> 
> 时间：2012-10-24T12:02:23.133
> 
> 标签：mailchimp, dkim

我正在为我的 MailChimp 活动配置 DKIM。

除了选中“验证此活动”复选框之外，我还需要做什么才能让我的域识别 MailChimp？我需要为此在我的机器上安装 openDKIM 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T05:29:45.393

如果您选择“验证此活动”，则无需安装，因为[MailChimp 将为](http://kb.mailchimp.com/article/authentication-for-mailchimp/)您传递其自己的 DKIM/Domain Keys/SenderID/SPF 记录。挺棒的！

如果您打算使用自己的 DKIM，您肯定需要在您的服务器上安装 openDKIM 或其他解决方案。

# bash - For循环使用变量作为条件，Bash

> ID：13048824
> 
> 赞同：0
> 
> 时间：2012-10-24T12:02:24.287
> 
> 标签：bash, for-loop

我正在运行以下 bash 代码：

```
num=$(ls -1 $ini/*.ini | wc -l)
echo "Running $num simulations..."
for i in {1..$num};
do
    echo "a"
done 
```

我得到以下输出：

```
Running 24 simulations...
a 
```

它应该打印 24 行 'a'，但事实并非如此。我应该改变什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:06:00.807

大括号不扩展变量。你可以使用

```
for i in $(seq $num); do
    echo "a"
done 
```

参见例如`man bash`：

> [...]
> 
> 序列表达式采用 形式`{x..y[..incr]}`，其中`x`和 `y` 是整数或单个字符，而 incr 是一个可选的增量，是一个整数。当提供整数时，表达式会扩展到 和 之间的每个数字`x` ， `y`包括 和 。
> 
> [...]
> 
> 大括号扩展在任何其他扩展之前执行，并且任何其他扩展的特殊字符都保留在结果中。它是严格的文本。Bash 不对扩展的上下文或大括号之间的文本应用任何句法解释。
> 
> [...]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:06:39.150

尝试：

```
for (( i=0; i < $num; i++ ))
do
    echo "a"
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:55:25.517

读：

*   [http://mywiki.wooledge.org/BashPitfalls#for_i_in_.24.28ls_.2A.mp3.29](http://mywiki.wooledge.org/BashPitfalls#for_i_in_.24.28ls_.2A.mp3.29)
*   [http://mywiki.wooledge.org/BashPitfalls#for_i_in_.7B1...24n.7D](http://mywiki.wooledge.org/BashPitfalls#for_i_in_.7B1...24n.7D)

忽略涉及的答案`seq(1)`。[cdarke 的回答](https://stackoverflow.com/a/13048894/495451)展示了正确的迭代。

另请注意，这是特定于 bash 的问题。其他带有大括号扩展的 shell 将首先评估参数扩展，但需要权衡取舍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T12:04:50.143

大括号扩展仅适用于文字，它不扩展变量。

可能的解决方法：

```
for i in $(seq 1 $num) ; do 
```

# javascript - 检查对象数组是否具有具有特定值的键的对象

> ID：13048825
> 
> 赞同：0
> 
> 时间：2012-10-24T12:02:28.383
> 
> 标签：javascript, jquery, underscore.js

通过使用`underscore`或者`jQuery`是否有更好的方法来检查对象数组是否`[{id: 1, name: 'some name'}, {id: 2, name: 'other name'}]`包含特定的属性值？

这是我的方式：

```
_.filter([{id: 1}, {id: 2}], 
      function(obj){ return obj.id === 3 }).length === 1; // false

_.filter([{id: 1}, {id: 2}], 
      function(obj){ return obj.id === 2 }).length === 1; // true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:08:14.207

如果您不需要对象本身，而只是检查它是否在您的列表中：

```
_.contains(_.pluck([{id: 1}, {id: 2}], 'id'), 1) // => true 
```

文档：[_.pluck()](http://documentcloud.github.com/underscore/#pluck)， [_.contains()](http://documentcloud.github.com/underscore/#contains)

# qooxdoo - 运行 qooxdoo 模拟运行作业的问题

> ID：13048829
> 
> 赞同：2
> 
> 时间：2012-10-24T12:02:59.217
> 
> 标签：qooxdoo

我正在尝试将 qooxdoo 模拟运行作业用于这个简单的测试（当然，更改了类命名空间）：

```
qx.Class.define("twitter.simulation.Settings", {

   extend : simulator.unit.TestCase,

   members :
   {
       testChangeLanguage : function()
           {
                this.fail("Test not implemented!");
           }
   }
}); 
```

但是，每次我尝试运行它时，都会收到这个非常神秘的错误：

js: 未捕获的 JavaScript 运行时异常：TypeError: org.mozilla.javascript.Undefined@275b35 不是函数，它是 org.mozilla.javascript.Undefined。

我将 Rhino 1.7R4 用于 Javascript 引擎。Selenium 版本是 2.25，qooxdoo 是 2.0.2。这是模拟运行作业配置：

```
"simulation-run" :
{
  "let" :
  {
    "SIMULATOR_CLASSPATH" : 
    [
      "../selenium/selenium-java-2.25.0.jar",
      "../selenium/libs/*",
      "../rhino/js.jar"
    ]
  },

  "environment" :
  {
    "simulator.selServer"   : "localhost",
    "simulator.selPort"     : 4444,
    "simulator.testBrowser" : "*firefox",
    "simulator.autHost"     : "http://localhost:8080",
    "simulator.autPath"     : "/application/index.html"
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:40:07.017

您需要使用 1.x Selenium 客户端驱动程序。

# spring - jpa规范查询方法

> ID：13048830
> 
> 赞同：1
> 
> 时间：2012-10-24T12:03:04.337
> 
> 标签：spring, spring-data, spring-data-jpa, specifications

我们使用 Spring Data JPA 进行数据库访问。我们的存储库包含基本的查询方法。我们现在要做的是将规范接口（标准 API）与复杂的查询方法（如）*结合*`findByName(Specification spec)`使用。问题是这两种方式相互阻止（因为现在有两个`where`查询）。有什么办法可以做到这一点，比如告诉 JPA 将这两个`where`部分与`AND`? 我们之所以要这样做是因为查询的某些部分`where`对于每个查询都是必不可少的。它们应该在查询方法的名称中定义。规范只应包含个别用例的个别标准。或者有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:35:20.393

目前不支持此功能。如果您认为这是值得改进的，请随时提出 JIRA 问题。

# iphone - 如何初始化 Admob 并设置子视图

> ID：13048835
> 
> 赞同：0
> 
> 时间：2012-10-24T12:03:31.917
> 
> 标签：iphone, ios, xcode, admob

我对 xcode 还很陌生，但是在将 admob 添加到我的应用程序时遇到了一些麻烦。

我按照 Admob 的说明进行操作，但没有显示广告。

我想我需要将我创建的 AdViewController 的新视图添加到 appsdel​​egate。我应该为此添加代码吗？

顺便说一句：我使用标签栏控制器作为 rootviewcontroller

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:55:32.763

您需要将 设置为`rootViewController`，`UITabBarController`但您需要将`GADBannerView`对象添加到当前显示的视图控制器的视图中。

[这里](http://code.google.com/p/google-mobile-dev/source/browse/AdCatalog/Classes/AdvancedLayoutUseCases/TabbedViewExample/?repo=adcatalog-ios)有一个使用自定义 UITabBar 解决方案的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:58:23.770

在要显示添加的视图控制器中，执行以下操作：

。H

```
@interface MyViewController: UIViewController
{
  GADBannerView *adBanner;
}

@end 
```

.m

```
@implementation MyViewController

// In the viewDidLoad method of the controller create a adbanner
-(void) viewDidLoad
{
  [super viewDidLoad];

  adBanner_ = [[GADBannerView alloc] initWithFrame:CGRectMake(0, 0, GAD_SIZE_320x50.width, GAD_SIZE_320x50.height)];
  adBanner_.delegate = self;
  adBanner_.rootViewController = self;
  adBanner_.adUnitID = the_ad_ID_given_by_Google;
  GADRequest *request = [GADRequest request];
  [adBanner loadRequest:request];

  [self.view addSubview:adBanner];
}

@end 
```

# ios - 以编程方式查看控制器？

> ID：13048844
> 
> 赞同：1
> 
> 时间：2012-10-24T12:04:04.143
> 
> 标签：ios, xcode, uiview, uiviewcontroller

我想知道在 xcode 中创建一个新的“单一视图”项目后需要哪些步骤，以实现： 1\. 一个在没有 NIB 的情况下初始化的 viewController，而是以编程方式在其视图中加载它自己的控件。
2.如何获取视图控制器的视图`load`并调用`viewDidLoad`？
3\. 使用所有控件使该控制器的视图在屏幕上可见。

我如何从这个函数中解决这个问题：

```
-(BOOL)application:(UIApplication*)application didFinishLoadingWithOptions:(NSDictionary *)launchOptions 
```

我正在尝试修改一个新的 xcode 项目，但我得到的只是一个黑屏，viewDidLoad 没有被调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:08:02.710

```
UIViewController *myViewController = [[UIViewController alloc] init];
[myViewController.view setFrame:self.view.bounds];
[self.view addSubview:myViewController.view]; // if you want to add it in another viewcontroller

// For testing, set the background color to something other than white (default)

[myViewController.view setBackgroundColor:[UIColor greenColor]]; 
```

你走吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:07:20.613

那是您的应用程序委托的应用程序加载方法。

在那里，您可能想要创建一个自定义视图控制器的实例，并将其作为 rootViewController 分配给您的应用程序委托 didFinishLoading。应该有这样一行：

```
// app delegate .h file

#import "CustomViewController.h"

@interface
{
    ...
    CustomViewController *myCustomVC;
    ...
}

@property (nonatomic, retain) CustomViewController *myCustomVC;

// app delegate .m file
@implementation AppDelegate

@synthesize myCustomVC;

-(BOOL)application:(UIApplication*)application didFinishLoadingWithOptions:(NSDictionary *)launchOptions 
{
    ...
    myCustomerVC = [[CustomViewController alloc] init];

    [self.window setRootViewController:myCustomVC]; 
    ...
} 
```

然后在自定义视图控制器的 viewDidLoad 方法中，您可以将其作为测试：

```
// custom view controller .m file
-(void)viewDidLoad
{
    self.view.backgroundColor = [UIColor redColor];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T15:24:48.073

您需要创建 的子类，并在或`UIViewController`中设置视图层次结构（取决于定制级别）`loadView``viewDidLoad`

通过子类`UIViewController`化加载方法调用将为您进行，因此您不必担心获取`viewDidLoad`等。

要使其在屏幕上可见，最简单的方法是将其设置为`rootViewController`应用程序窗口的

`didFinishLaunchingWithOptions:`在你的应用委托里面

```
self.window.rootViewController = [[MyViewControllerSubclass alloc] init]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-15T04:31:59.660

试试这个 ：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    HomeViewController *homeVC = [[HomeViewController alloc]init];
    [self.window setRootViewController:homeVC];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

从通用设置的主界面中删除 Main(storyboard reference)： [![enter image description here](../Images/276a13a442ea68e535e1888263efd1a4.png)](https://i.stack.imgur.com/zvEY0.png)

Add Launch Image : And select iOS-7 and later in your left corner setting [![enter image description here](../Images/d14fd26fd5a7189303f20a4cf4a03846.png)](https://i.stack.imgur.com/WUiMr.png)

# runtime - 在 Eclipse 运行时将共享库项目的 dll 文件添加到可执行项目路径中

> ID：13048845
> 
> 赞同：4
> 
> 时间：2012-10-24T12:04:04.630
> 
> 标签：runtime, shared-libraries, eclipse-cdt

我在 Windows 7 下使用 Eclipse Juno for c/c++。我创建了一个共享库项目和一个可执行项目。我通过以下方式在可执行项目中添加了共享库项目作为参考：

可执行项目的属性 -> C/C++ 常规 -> 路径和符号 -> 参考 -> 检查共享库项目

所有这些在编译时都很好用，我可以在可执行项目中包含我的共享库项目的类，并使用它等等。

但是，当我尝试在 Eclipse 中运行可执行项目时，我什么也得不到。没有错误，没有控制台输出。经过一番谷歌搜索后，我在这里发现了一个类似的问题：

[http://www.eclipse.org/forums/index.php/m/650331/](http://www.eclipse.org/forums/index.php/m/650331/)

显然，如上所述，将共享库项目添加到 Eclipse 中的可执行项目中，并不会在运行时在 Eclipse 中将 dll 文件添加到可执行 (.exe) 文件的 PATH 中。类比 Eclipse for Java：如果你有一个 Java JAR 项目 A 和另一个 Java JAR 项目 B，通过在 Eclipse 中从 B 到 A 的引用，当在 Eclipse 中运行项目 A 时，B 的编译后的 jar 文件将添加到 A 的类路径中. 我认为它与 Eclipse for C/C++ 类似，但显然不是。

果然，如果我手动把.exe文件和.dll文件放在同一个文件夹下，运行.exe，一切正常。此外，如果我将 .dll 文件复制到 Eclipse 的可执行项目的编译目录中，我可以从 Eclipse 运行可执行项目并且没问题。

我的问题是，当我告诉它运行可执行项目时，有没有办法让 Eclipse 将该共享库项目的 dll 文件添加到运行时？我在上面链接的帖子中讨论的解决方案是将分片库项目的编译目录手动添加到可执行项目的 Eclipse 运行配置中，即将其添加到那里的 PATH 变量中。但我发现这很麻烦而且不便携，如果 Eclipse 管理这两个项目，它应该能够将所有必要的东西传递给运行时。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T13:28:09.553

好吧，我已经在运行时手动将库项目的 dll 添加到可执行项目的路径中。我确实找到了一种使它更便携和项目位置中立的方法（即，如果您将两个项目的源文件夹移动到另一台机器，并在那里在 Eclipse 中重新打开它们，它应该仍然可以工作）：

1.  右键单击可执行项目 -> 运行方式... -> 运行配置

2.  在环境选项卡中单击“新建...”以添加新的环境变量

3.  将你的变量命名为“PATH”并给它一个类似于下面的值：

    ${env_var:PATH};${workspace_loc:/cppAStar/Debug}

在哪里：

*   ${env_var:PATH} 是 Eclipse 的说法“获取在 Eclipse 中声明的 PATH 环境变量的现有值”

*   这 ”;” 是将现有的 PATH 条目与我们将要添加的新条目分开

*   ${workspace_loc:/cppAStar/Debug} 这告诉 Eclipse 获取名为 cppAStar 的工作区项目的位置（这里 cppAStar 是我的共享库项目），然后“/Debug”指的是这个特定项目在何时创建 .dll 文件的位置它建成了。

我无法弄清楚的问题：

*   “运行配置”中的“环境”选项卡有一个名为“将环境附加到本机环境”的选项。我认为通过检查这一点，我只需要在我在这里声明的 PATH 变量中添加 .dll 目录的位置，它将被附加到现有的 PATH 中。但是我没有设法完成这项工作，因此在附加新值之前手动重新添加所有现有 PATH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T09:53:08.493

不幸的是，该解决方案不适用于调试配置。请参阅[错误 338420 - 启动配置的环境选项卡变量未传递给 gdb 进程本身](https://bugs.eclipse.org/bugs/show_bug.cgi?id=338420)。

有没有办法解决这个问题进行调试？我的意思是除了执行构建后步骤，例如：

**cmd /c 复制 "${BuildArtifactFilePrefix}${BuildArtifactFileName}" "${WorkspaceDirPath}\bin\"**

# java - 如何使用java代码获取任何计算机的“我的音乐”文件夹路径

> ID：13048848
> 
> 赞同：0
> 
> 时间：2012-10-24T12:04:21.017
> 
> 标签：java, path, directory

在我的计算机路径是 C:\Users\RS\Music 如何获取 C:\Users\RS 作为初始路径可能因同一台计算机上的每个不同用户而异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:06:58.870

System.property 有一整套[有趣的键](http://www.mindspring.com/~mgrand/java-system-properties.htm)来提取信息。其中之一是“user.home”，它应该包含您需要的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:29:15.173

如果您想要音乐文件夹的位置，那么您必须阅读 Windows 注册表才能执行此操作。[这里](https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java)提到了一些读取windows注册表的方法

至于您需要的特定注册表项，对于 Windows XP，它就是`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\My Music`关键。对于 Windows 7，当我有权访问已安装它的 PC 时，我将更新我的答案。

# dll - 使用 Lua 调用 User32.dll 函数

> ID：13048849
> 
> 赞同：1
> 
> 时间：2012-10-24T12:04:23.587
> 
> 标签：dll, lua

如何使用 Lua DLL 调用函数将消息发送`EM_REDO`到 User32 动态链接库，使用该`SendMessageA`函数？我实际上已经检查了 Microsoft 网站并研究了我已经应用的参数和所需的任何进一步信息，但我仍然不知道如何在 Lua 中实现它。我实际上认为问题在于如何`EM_REDO`用常量值定义消息。我相信让这个工作的尝试将有助于大多数程序员在 Lua 中编码，因为`user32.dll`在 Windows 中具有许多功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:26:44.930

您可能想要检查[Lua 的 winapi 模块](https://github.com/stevedonovan/winapi)，因为它可能已经处理了您需要的内容，并且因为您可以看到这一切是如何在幕后完成的。据我记得，它同时支持`SendMessage`和`PostMessage`调用。

# delphi - Delphi 4 Pro 能否在 Windows XP（或更高版本）上可靠地安装和使用？

> ID：13048854
> 
> 赞同：2
> 
> 时间：2012-10-24T12:04:38.640
> 
> 标签：delphi, windows-xp, compatibility, backwards-compatibility, windows-98

几年前，我在 Windows '98 SE 机器上使用 Delphi 4 Pro 来创建 Delphi 项目。

在 Windows XP 机器（或更高版本的操作系统，如 Windows 7）上安装相同的 Delphi 4 Pro 来查看和更新​​旧的 Delphi 项目是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:12:10.707

我已经在各种 32 位操作系统上运行过 Delphi 4，没有任何问题，包括 32 位 XP 和 Win7。

但是，在 64 位 Windows 7 和其他 64 位版本的 Windows 上，包括 Windows Server 2008 R2，我发现安装起来很困难，而且运行起来也不是很好。

不过，将现有的 Delphi 4 代码迁移到 Delphi 2007 可能并不难。您可能也应该考虑该选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:08:13.723

[如何在 Windows 7（32 位）中安装 Delphi 4](https://stackoverflow.com/questions/10990746/how-to-install-delphi-4-in-windows-732-bit)

完全相同的问题，检查那里的答案，最坏的情况下你将不得不运行 VM。

# restlet - RESTlet 2.1 无法获取客户端证书

> ID：13048855
> 
> 赞同：2
> 
> 时间：2012-10-24T12:04:40.247
> 
> 标签：restlet, restlet-2.0

我最近将 restlet 更新到 2.1 版，但我不再能够获得客户端证书。我正在使用新的方式来获取客户端证书

```
List<Certificate> r =  getRequest().getClientInfo().getCertificates(); 
```

我正在使用 CURL 发送我的身份验证信息

```
curl -k -E admin.pem https://localhost:8111/profile -v 
```

知道为什么这在 restlet 2.1 中不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T23:25:41.800

您应该升级到更改了内部 HTTP 连接器的 2.2 版，并且应该恢复此属性。

# sql - 将 DD-Mon-YYYY 转换为 DD/MM/YYYY

> ID：13048856
> 
> 赞同：6
> 
> 时间：2012-10-24T12:04:43.887
> 
> 标签：sql, sql-server, tsql

我需要将`[varchar] (15)`格式的dt_of_birth 转换`DD-Mon-YYYY`为`DD/MM/YYYY`.

`dt_of _birth`在不同的表中指定，并且必须完成转换并将其存储在另一个具有相同列名的表中`dt_of_birth`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:07:21.853

[这里](http://www.sqlusa.com/bestpractices/datetimeconversion/)

```
SELECT convert(datetime, '23/10/2016', 103) -- dd/mm/yyyy 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:09:05.810

尝试这个：-

```
 SELECT CONVERT(CHAR(11), CONVERT(SMALLDATETIME, '23-Oct-2016', 13), 103); 
```

`103`用于`dd/mm/yyyy`格式

看看这个[链接](http://www.w3schools.com/sql/func_convert.asp?output=print)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T12:10:59.980

这将起作用

```
SELECT CONVERT(CHAR(11), CONVERT(SMALLDATETIME, '27-Jan-2011', 13), 103); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T05:03:32.453

尝试这个：-

插入第二个表（列 1）

SELECT CONVERT(VARCHAR(10),CAST(dt_of_birth AS DATETIME),103) 从 FirstTable

# c# - 如何在 Windows 窗体应用程序中跟踪 C# 中两次按钮单击之间的时间？

> ID：13048857
> 
> 赞同：0
> 
> 时间：2012-10-24T12:04:43.523
> 
> 标签：c#, windows, winforms

我在 C# 中创建了一个 Windows 窗体应用程序，其中接受了用户的输入。我想计算用户在两次提交之间花费的时间。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T12:05:55.657

使用[秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)。在类级别创建秒表对象并使用它来计算时间。

就像是：

```
 public partial class Form1 : Form
    {
        Stopwatch stopwatch = new Stopwatch();

        public Form1()
        {
            InitializeComponent();
        }
        private void button1_Click(object sender, EventArgs e)
        {
            stopwatch.Start();

        }
        private void button2_Click(object sender, EventArgs e)
        {

            stopwatch.Stop();
            var milliSeocnds = stopwatch.ElapsedMilliseconds;
            var timeSpan = stopwatch.Elapsed;
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T12:07:46.537

您可以使用两个全局 DateTime 变量并单击两次按钮 diff 到变量；

```
 private DateTime btn1Click ;
   private DateTime btn2click;

        private void btn1_Click(object sender, EventArgs e)
        {
            btn1Click = DateTime.Now;
        }

        private void btn2_Click(object sender, EventArgs e)
        {
            btn2click = DateTime.Now;
        } 
```

并将此代码用于差异时间：

```
 TimeSpan timespan = btn2click - btn1Click; 
```

* * *

在同一个按钮中：

```
 private DateTime btnClick1 ;
        private DateTime btnClick2;

  private void btn_Click(object sender, EventArgs e)
        {
            if (btnClick1==null)
            {
                btnClick1 = DateTime.Now;
            }
            else
            {
                btnClick2 = DateTime.Now;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:11:15.830

使用 System.Threading 您可以使用秒表功能。只需在第一次单击时启动该功能并在第二次单击时停止它。

```
Using System.Threading

//main etc ignored

//declare

Stopwatch s = new Stopwatch();

//start
s.start();
//stop
s.stop()
//get the time
s.Elapsed; 
```

# linux - 设置在 Linux 中持续存在的环境变量

> ID：13048865
> 
> 赞同：0
> 
> 时间：2012-10-24T12:05:00.043
> 
> 标签：linux, centos, environment-variables

我添加了以下内容：

> 导出 SQOOP_HOME=/usr/bin/

到我的`/etc/profile`档案。但是，当我运行 install.sh 脚本时，它一直说未设置环境变量。我还在 bash_profile 中添加了类似的行。

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:15:35.287

您需要先登录才能看到`/etc/profile`. 尝试：

```
bash -l 
```

例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:19:09.387

运行 shell 脚本时，它（默认情况下）运行非登录和非交互式——请参阅[我对 Unix.SE 上另一个问题的回答，了解](https://unix.stackexchange.com/a/29811/11750)bash 查找配置文件的时间和地点。您可能希望将`-l`选项添加到 shebang 行以使其成为登录 shell。

# javascript - 商店定位器 - 从邮政编码到所选商店的路线

> ID：13048867
> 
> 赞同：0
> 
> 时间：2012-10-24T12:05:11.040
> 
> 标签：javascript, google-maps, google-maps-api-3, geolocation

我有一个 JavaScript 邮政编码搜索，根据输入的内容搜索英国的 3 家壁橱商店。目前它发现 3 家商店都很好。

首先，我想在输入的邮政编码处放置一个标记。

其次，当三个结果出现时，它们会被标记在地图上。我想要一个名为*方向*的链接，一旦单击，它将显示从起点到所选商店的方向。

我尝试了以下代码，但它不起作用......但是它确实从输入和方向链接中获取邮政编码数据并在控制台中显示它们。我需要将它们转换为 long 和 lat 才能正常工作吗？

```
function calcRoute() {
    var start = document.getElementById('address').value;
    var end = document.getElementById('get-directions').name;
    //console.log(start, end)
    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  } 
```

我的开始标记有这段代码，但这似乎也不起作用

```
function initialize() {
    var start_marker = new google.maps.LatLng(document.getElementById('address').value);
    directionsDisplay = new google.maps.DirectionsRenderer();
    var mapOptions = {
      zoom:7,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: start_marker
    }
    marker = new google.maps.Marker({
          map:map,
          draggable:false,
          animation: google.maps.Animation.DROP,
          position: start_marker,
        });
    map = new google.maps.Map(document.getElementById('map'), mapOptions);
    directionsDisplay.setMap(map);
  } 
```

这部分从邮政编码中获取长/纬度数据，

```
this.geocode = function(address, callbackFunction) {
  geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      var result = {};
      result.latitude = results[0].geometry.location.lat();
      result.longitude = results[0].geometry.location.lng();
      callbackFunction(result);
      //console.log(result);
        //console.log("Geocoding " + geometry.location + " OK");
        addMarker(map, results[0].geometry.location);
    } else {
      alert("Geocode was not successful for the following reason: " + status);
      callbackFunction(null);
    }
  }); 
```

addMarker 的功能在这里：

```
function addMarker(map, location) {

console.log("Setting marker for (location: " + location + ")");
marker = new google.maps.Marker({
map : map,
animation: google.maps.Animation.DROP,
position : location
}); 
```

}

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:15:31.667

google.maps.LatLng的构造函数[需要两个浮点数作为参数](https://developers.google.com/maps/documentation/javascript/reference#LatLng)，而不是字符串：

```
var start_marker = new google.maps.LatLng(document.getElementById('address').value); 
```

如果您只有一个地址，如果您想在地图上显示一个标记，则需要使用[地理编码服务来检索该地址的坐标。](https://developers.google.com/maps/documentation/javascript/geocoding)

# ruby-on-rails - 使用 Carrierwave 和 MiniMagick 上传图像时出现 Errno::ENOENT

> ID：13048871
> 
> 赞同：4
> 
> 时间：2012-10-24T12:05:24.693
> 
> 标签：ruby-on-rails, carrierwave, minimagick

我的 rails 应用程序有一个使用最新版本的 Carrierwave 和 MiniMagick 的图像上传。它在服务器上运行良好，但在我的本地主机 WEBrick 和 Windows 7 中，当我尝试上传图像时出现此错误：

```
Errno::ENOENT in PostsController#create

No such file or directory - identify -ping C:/Users/Ryan/AppData/Local/Temp/mini_magick20121024-6068-g2bed8.jpg 
```

我去了路径，图像确实存在，我不确定是什么阻止了 Carrierwave 或 MiniMagick 读取它。

有人有想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T14:04:55.210

你有安装 ImageMagick 吗？您可以在控制台上手动运行识别命令吗？

我问的原因是您的错误消息似乎是当它找不到识别推荐时发生的，这是 ImageMagick 的一部分。

# java - 带有滚动视图的列表

> ID：13048873
> 
> 赞同：0
> 
> 时间：2012-10-24T12:05:30.860
> 
> 标签：java, android

添加滚动后，我有列表，`scrollview`我尝试更改滚动视图的高度，因此列表位于布局的中心并且高度更高，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:06:35.253

`ListView`是可滚动的。你不能放在`ListView`里面`ScrollView`。

试试这个代码示例

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/bg_all_1" >

<LinearLayout
    android:id="@+id/bottom_menu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:orientation="vertical" >
</LinearLayout>

<include
    android:id="@+id/top_header"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="40dp"
    android:layout_marginTop="91dp"
    layout="@layout/layout_header" />

<include
    android:id="@+id/footer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/bottom_menu"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="40dp"
    layout="@layout/layout_footer" />

<ListView
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_above="@+id/footer"
    android:layout_below="@+id/top_header"
    android:layout_centerHorizontal="true" >
</ListView>

</RelativeLayout> 
```

# android - 倒数计时器在android中

> ID：13048874
> 
> 赞同：2
> 
> 时间：2012-10-24T12:05:32.823
> 
> 标签：android, android-notifications

我是 android 新手。我有一个可用于考试管理的应用程序。用户可以插入每个科目的日期，该应用程序将为每个科目提供时间（以小时为单位）。倒计时计时器将从分配给每个主题的时间（例如 48 小时）并且应该归零。当它达到零时，应该播放警报，显示分配给该主题的时间已经结束。这是我的代码。

```
public class Alarmpage extends Activity{

    TextView hourshow,minshow,secshow;
    SQLiteDatabase database_read;
    sampleDatabase samp;
    Cursor cur;
    Handler handler;
    int initStart;
    Runnable updater;
    int  t;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.alarm);
        hourshow=(TextView)findViewById(R.id.hr);
        samp=new sampleDatabase(getApplicationContext());
        database_read=samp.getReadableDatabase();
        minshow=(TextView)findViewById(R.id.min);
        secshow=(TextView)findViewById(R.id.sec);
        cur=database_read.query(sampleDatabase.TABLE_SEC, null, null, null, null, null, null);
    }

    public void onResume() {

        super.onResume();
        if(cur.moveToFirst())
            {
                 t=cur.getInt(3);
                 Log.e("time", String.valueOf(t));
            }
        handler=new Handler();
        initStart = (int) SystemClock.elapsedRealtime();
        Log.e("init", String.valueOf(initStart));
        updater = new Runnable() {

            @Override
            public void run() {

                // TODO Auto-generated method stub
                 int sec,minute,hour;
                  int diff = t*60*60;
                Log.e("time in sec", String.valueOf(diff));
                System.out.println(diff);

                /*if(diff>=1)
                {
                     hour= diff/3600;
                }
                else {hour = 00; }
                hourshow.setText(String.valueOf(hour));
                Log.e("diff after hour", String.valueOf(diff));
                Log.e("hour", String.valueOf(hour));
                minute = (diff % 3600) / 60;

                minshow.setText(":"+String.valueOf(minute));
                    sec= (diff % 60);

                secshow.setText(":"+String.valueOf(sec));*/
                if (diff >= 1) {
                    sec =  (int) (diff%60);
                } else {
                    sec=00;
                }
                secshow.setText(":"+String.valueOf(sec));
                diff = diff/60;
                if (diff >= 1) {
                    minute =  (int) (diff%60);
                } else {
                    minute=00;
                }
                minshow.setText(":"+String.valueOf(minute));
                diff = diff/60;
                if (diff >= 1) {
                    hour =  (int) (diff%24);
                } else {hour = 00; }
                hourshow.setText(String.valueOf(hour));
                t=(t*60*60)-1;
                handler.postDelayed(this, 1000);
            }
        };
        handler.post(updater);
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        handler.removeCallbacks(updater);
    }
} 
```

但它显示了一些值。但它们不正确。请帮助我。我不理解此代码中的错误。提前致谢

# unit-testing - VS2012 & TFS2012 单元测试主要问题

> ID：13048879
> 
> 赞同：12
> 
> 时间：2012-10-24T12:05:47.407
> 
> 标签：unit-testing, visual-studio-2012

我们正在使用 VS2012 和 TFS2012 并为我们的代码编写单元测试。我们想要报告代码覆盖率，并在我们的单元测试中使用 .config 文件来测试 appsettings，还有一些其他的日志设置、MS Enterprise 库设置等。

* * *

**App.config 在新的测试框架中不起作用**

MS的新测试框架应该很棒，但对我来说根本没有那么好。当新框架不再使用配置文件时，我应该如何在配置文件中设置一些基本配置？

我们遇到了混合模式 dll 的问题，并找到了解决方法：添加

```
<startup useLegacyV2RuntimeActivationPolicy="true"> 
```

到 app.config。但这对我们的单元测试项目不起作用。因为配置文件不再存在。上网搜了一下，找到了解决办法

' [Visual Studio .Net 4.5 测试项目中 .Net 2.0 混合模式程序集的问题](http://www.diaryofaninja.com/blog/2012/09/13/net-20-mixed-mode-assemblies-in-visual-studio-net-45-test-projects#.UFFl43wdOYw.dotnetkicks)'

这意味着在程序文件目录中编辑 Visual Studio 11 本身的文件，我认为这不是一个很好的解决方案......

一些基本的应用设置怎么样？我该怎么设置这个？

* * *

**不要使用 .testSettings 文件**

MS也不推荐使用旧的 .testsettings 文件，因为使用的是旧的测试框架。如果我使用 .testsettings 文件，我无法在我的 tfs2012 构建服务上设置代码覆盖率。

另一个问题是我们的代码需要一个 dll (system.data.sqlite.dll)，但只有在运行时单元测试代码才需要这个 dll。所以不需要参考。我们通过使用 testsettings 文件上的部署选项卡解决了这个问题。但在新框架中，您不应该使用 testsettings 文件。如果需要文件，则具有 [deploymentitem] 属性。但是 deploymentitem 属性只能用于 [testmethod] 而不能用于 [testinitialize] 或 [assemblyinitialize] 方法。但是我们的代码需要[testinitialize]方法中的dll。所以没有办法让dll就位。

只需在 [assemblyinitialize]（或 testinitialize）方法中使用 File.Copy 复制它是行不通的。

将 dll 作为文件添加到项目中，并将“复制到输出目录”设置为“始终复制”，如“[使用 .runsettings 文件配置单元测试](http://msdn.microsoft.com/en-us/library/ee256991.aspx)”中所述，也根本不起作用。

（真的不是很好）解决方案是添加 dll 作为参考，然后实例化一个类，然后什么都不做。这种方式需要 dll 否则它不会构建，因此 dll 将自己部署到正确的目录。

* * *

**如何解决我的问题？？？** - 我想在我的单元测试中使用配置文件。- 我想在“assemblyinitialise”和/或“classinitialize”方法中部署一些需要的文件。- 我希望启用 TFS2012 每晚构建的代码覆盖率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:36:37.517

a) App.config 在新的测试框架中不起作用

这应该仍然有效。我认为在这种情况下缺少的是这个 .config 文件没有与您的测试 dll 一起复制。您能否将其设置为部署项目并重试？

b) 不要使用 .testSettings 文件

*   .testsettings 和代码覆盖率。VS 2012 版本仍然支持使用 .testsettings 文件设置代码覆盖率。您只需选择 mstest 2010 测试运行程序并在构建定义中指定您的 .testsettings 文件

如果您在 .testsettings 文件中除了代码覆盖设置之外没有任何内容，那么您可以轻松迁移到 2012 测试运行器并在下拉项目中选择“启用代码覆盖”

*   复制测试初始化​​所需的文件您可以通过 .testsettings 文件执行此操作，也可以执行构建后文件复制任务。这样做非常简单，对其他任何事情都没有影响。使用“复制到输出目录 = 始终复制”确实有效。请使用示例解决方案进行尝试，看看您是否可以缩小范围，了解为什么这不适用于您的设置。

# ruby - 评估 Ruby 正则表达式和变量

> ID：13048881
> 
> 赞同：0
> 
> 时间：2012-10-24T12:06:00.200
> 
> 标签：ruby, regex, variables

这似乎是一个奇怪的问题。我有这段 Ruby 代码，它接受一个输入字符串，使用`scan`并`flatten`提取一个特定的值，然后希望在语句中对该值进行操作`if...then`，但我遇到了问题。

我的输入字符串描述了该地区“危险生物”的数量。当描述没有危险生物或两个或更多生物时，字符串总是标准的，例如：

“该地区没有危险生物”或“一个危险生物......”等等。

我正在使用它来获取表示生物数量的单词：“no”、“one”、“two”等，希望稍后将它们转换为数值 - “no” = 0、“one " = 1 等。

为此，我使用：

```
crittercount = strcheck.scan(/a*(no|one|two|three|four|five|six|seven|eight|nine|ten)a*/) 
```

然后我去`if then`对变量做一个`crittercount`说：

```
if crittercount == "no"
  critters = 0
  ... exit and go do something with the var...
end 
```

我为每个人都这样做。（当我发现这个问题时，我会使用`if..elsif..end`）

```
if crittercount == "one"
  critters = 1
  ... exit and go do something with the var...
end
... 
```

`crittercount == "ten"`我刚使用后

```
if crittercount == "ten"
  critters = 10
else
  critters = 99
end 
```

这是问题所在：我有一个名为`maxcreatures`equal to的变量`10`。我以`strcheck`“该地区没有危险生物”的值为例，我打印出它返回的确切字符串的值。然后我打印出 crittercount 变量，在这个例子中，我得到“否”。

不过，当我完成我的`if..then..`陈述时，我会评估如何使用：

```
if critters > maxcreatures
  print "Maximum Creatures " + critters.to_s + " and maximum is #{maxcreatures}.  Lets Bail"
else
  print "Critter count " + critters.to_s  + " is less than #{maxcritters} Keep going."
end 
```

在我遇到的每一种情况下`99`，我发誓我已经尝试了一切。我尝试`.flatten`在正则表达式的末尾使用，我尝试`.strip`在`crittercount`var 上使用。我希望有人看到这个并说“呃，试试这个。”

根据要求，这里是所有代码，这里有对其他可能没有意义的函数的调用......

```
maxcritters = 2

critters = 0

put "count critter"
strcheck = matchfind "You notice ?"

crittercount = strcheck.scan(/a*(no|one|two|three|four|five|six|seven|eight|nine|ten)a*/)
echo strcheck
echo crittercount
crittercount = crittercount.strip
if crittercount == "no"
    critters = 0
    goto "roundup"
end
if crittercount  == "one"
    critters = 1
    goto "roundup"
end
if crittercount == "two"
    critters = 2
    goto "roundup"
end
if crittercount == "three"
    critters = 3
    goto "roundup"
end
if crittercount == "four"
    critters = 4
    goto "roundup"
end
if crittercount == "five"
    critters = 5
    goto "roundup"
end
if crittercount == "six"
    critters = 6
    goto "roundup"
end
if crittercount == "seven"
    critters = 7
else
critters = 99
end

roundup:
if critters > maxcritters
echo "Maximum Creatures " + critters.to_s + " and maximum is #{maxcritters}.  Lets Bail"
critters == nil
fput "retreat"

else
    echo "Critter count " + critters.to_s  + " is below maximum of #{maxcritters} - We're cool.  Keep going."
    critters == nil
    goto "combatcheck"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:33:09.523

`scan`当您可能期望多个匹配时很有用。由于您只希望每个字符串有一个匹配项，因此您不应该使用它。

下面就直接给你`critters`。你不需要所有这些条件。

```
regex = /(\bno\b)|(\bone\b)|(\btwo\b)|(\bthree\b)|(\bfour\b)|(\bfive\b)
            |(\bsix\b)|(\bseven\b)|(\beight\b)|(\bnine\b)|(\bten\b)/x

critters = strcheck.match(regex).to_a.drop(1).index{|x| x} || 99 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:19:34.213

问题是这`crittercount`是一个数组，而不是一个字符串。因此`if crittercount == "no"`etc. 将永远不会`true`，您将永远以最后一个结尾`else`。

解决方案是将您的代码更改为：

```
crittercount = strcheck.scan(/no|one|two|three|four|five|six|seven|eight|nine|ten/).first 
```

这`crittercount`将是一个字符串，或者`nil`您的其余代码将按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:22:40.363

看起来你正在做 if...end if...end if...end 而不是 if...elsif..elsif...end

因此，对于 10 以外的任何值，您将最终进入这个 else 块

```
if crittercount == "ten"
  critters = 10
else
  critters = 99
end 
```

案例陈述在这里会更好......

```
case (crittercount)
    when "no" then critters = 0
    when "one" then critters = 1
    when "two" then critters = 2
    when "three" then critters = 3
    when "four" then critters = 4
    when "five" then critters = 5
    when "six" then critters = 6
    when "seven" then critters = 7
    when "eight" then critters = 8
    when "nine" then critters = 9
    when "ten" then critters = 10
    else critters = 99
end 
```

或者更好的是，如果查找失败，则对所有默认为 99 的数字进行哈希查找。

```
numberHash = { "no" => 0, "one" => 1, "two" => 2, "three" => 3, "four" => 4, "five" => 5, "six" => 6, "seven" => 7, "eight" => 8, "nine" => 9, "ten" => 10 }
numberHash.default = 99
critters = numberHash[critterCount] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T12:36:57.853

scan 返回一个数组，其中包含匹配数据的数组，因此在您的代码中，如果您调用 .first.first ，您将获得第一个匹配项。你也可以做这样的事情

```
strcheck = "two dangerous creatures in the area" # or "one dangerous creature...'
strcheck =~ (/(.*) dangerous.*/)
critters = case $1 
  when 'no' then 0
  when 'one' then 1
  when 'two' then 2
  when 'three' then 3
  when 'four' then 4
  when 'five' then 5
  when 'six' then 6
  when 'seven' then 7
  else 99 
end
puts "number of critters #{critters}" 
```

使用案例清理逻辑，只需使用正则表达式匹配并提取第一个匹配项

# asp.net-mvc-3 - ASP MVC 3 使用参数创建部分视图或自定义助手

> ID：13048883
> 
> 赞同：0
> 
> 时间：2012-10-24T12:06:06.350
> 
> 标签：asp.net-mvc-3

我对 asp.mvc 3 很陌生。我正在使用 kendoui 和敲除进行绑定。我的应用程序看起来像这个示例：

视图模型

```
public class MyViewModel
    {
        public MyViewModel()
        {
            Initialize();
        }

        public IEnumerable<string> MyOptions1 { get; set; }
        public string MyChoice1 { get; set; }

        public IEnumerable<string> MyOptions2 { get; set; }
        public string MyChoice2 { get; set; }

        private void Initialize()
        {
            MyOptions1 = new List<string>()
                             {
                                 "OptionA",
                                 "OptionB"
                             };

            MyOptions2 = new List<string>()
                             {
                                 "OptionC",
                                 "OptionD"
                             };
        }
    } 
```

Home控制器的索引方法

```
public ActionResult Index()
        {
            return View();
        } 
```

索引视图：

```
<div id="optionsArea">
    <table>
        <tr>
            <td><label>Option1:</label></td>
            <td><input id="options1" data-bind="kendoDropDownList: { data: MyOptions1, value: MyChoice1 }" /></td>
        </tr>
        <tr>
            <td><label>Option2:</label></td>
            <td><input id="options2" data-bind="kendoDropDownList: { data: MyOptions2, value: MyChoice2 }" /></td>
        </tr>
    </table>
</div> 
```

加载索引视图时，我正在调用`OptionsData`控制器的方法，该方法返回填充`MyViewModel`为 Json。

```
public ActionResult OptionsData()
        {
            var myModel = new MyViewModel();
            var jsonNetResult = new JsonNetResult
            {
                Formatting = Formatting.Indented,
                Data = myModel
            };

            return jsonNetResult;
        } 
```

在 javascript中`MyViewModel`，我创建了具有可淘汰可观察属性的填充 javascript 视图模型`viewModel`，并将其绑定到索引视图中的 div。

```
$(function () {

    my = {

    }

    $.getJSON("/Home/OptionsData", function (data) {

        // create observable properties from MyViewModel
        my.viewModel = ko.mapping.fromJS(data);

        ko.applyBindings(my.viewModel, document.getElementById("optionsArea"));
    });
}); 
```

在我的应用程序中，我有许多包含标签和下拉列表的元素，因此我想将该部分提取到一个组件中，并重用它并使用一些参数调用它来替换绑定。我阅读了一些文章，也许解决方案是使用部分视图或自定义 HTML 助手，这样我就可以执行以下操作：

_OptionPartialView

```
<tr>
    <td><label>Option2:</label></td>
    <td><input data-bind="kendoDropDownList: { data: (parameter1), value: (parameter2) }" /></td>
</tr> 
```

当我在索引视图中调用部分时，我想以某种方式替换参数 1 和参数 2：

```
@Html.Partial("_OptionPartialView.cshtml", parameter1, parameter2); 
```

或使用辅助方法：

```
@Html.MyCustomHelper(..., parameter1, parameter2); 
```

然后我将我的 Index 方法强绑定到 Index 视图：

```
public ActionResult Index()
        {
            var myModel = new MyViewModel();
            return View(myModel);
        } 
```

我的观点看起来像这样：

```
 @model MVC3Question.Models.MyViewModel

<div id="optionsArea">
    <table>
        @Html.Partial("_OptionPartialView.cshtml", Model.MyOptions1, Model.MyChoice1);
        @Html.Partial("_OptionPartialView.cshtml", Model.MyOptions2, Model.MyChoice2);
    </table>
</div> 
```

我的问题是，在这种情况下，Partial View 或 Custom Helper 方法哪个更好，更重要的是如何使用参数实现它们，同时牢记发布的示例代码。欢迎任何其他方法或想法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:42:35.373

在我看来，这两种方法都很好。您可以创建一个自定义助手，它采用两个参数，如下所示：

```
public static MvcHtmlString MyHtmlHelper(this HtmlHelper htmlHelper, string label, IEnumerable<string> option, string choise)
    {
        var html = new MvcHtmlString(String.Empty);

            html = MvcHtmlString.Create("<tr><td><label>" + label + ":</label></td><td><input data-bind=\"kendoDropDownList: { data: (" + option + "), value: (" + choise + ") }\" /></td></tr>");

        return html;
    } 
```

我更喜欢这种方法，因为它无需更改当前代码即可工作。

如果要使用局部视图，则需要更改当前模型。

```
public class MyViewModel
{
    public MyViewModel()
    {
        MyOptions = new List<string();
    }

    public IEnumerable<string> MyOptions { get; set; }
    public string MyChoice { get; set; }
} 
```

然后你可以像这样在你的控制器中填充模型：

```
public ActionResult Index()
    {
        var viewModels = new List<MyViewModel>();
        var myOptions1 = new List<string>()
                         {
                             "OptionA",
                             "OptionB"
                         };

        var myOptions2 = new List<string>()
                         {
                             "OptionC",
                             "OptionD"
                         };
        viewModels.Add(new MyViewModel{MyOptions = myOptions1});
        viewModels.Add(new MyViewModel{MyOptions = myOptions2});
        return View(viewModels);
    } 
```

之后，您需要像这样更改视图：

```
 @model IList<MVC3Question.Models.MyViewModel>
<div id="optionsArea">
    <table>
        @foreach(var viewModel in Model)
        {
            @Html.Partial("_OptionPartialView.cshtml", viewModel);
        }
    </table>
</div> 
```

最后创建一个局部视图：

```
 @model Mvc3Question.Models.MyViewModel
<tr>
    <td><label>Option2:</label></td>
    <td><input data-bind="kendoDropDownList: { data: (@Model.MyOptions), value: (@Model.MyChoice) }" /></td>
</tr> 
```

我希望这有帮助。

# sql-server - 用户 'my-PC\my' 登录失败

> ID：13048885
> 
> 赞同：0
> 
> 时间：2012-10-24T12:06:14.833
> 
> 标签：sql-server, security

为什么我有这个错误：

**无法打开登录请求的数据库“源”。登录失败。**

**用户 'my-PC\my' 登录失败**？

我使用“Windows”模式。从视觉上我可以访问数据，但是当我运行它（asp项目）时出现错误。当用Management Studio的修改版本替换项目中的数据库时出现此错误（我只修改了未在项目中调用的存储过程）。我阅读了一些文章并在安全选项中允许“my-PC\my”所有操作。没有效果。

**编辑：**

这是我的连接字符串：

```
 "Server=(local);Database=source;Integrated Security=SSPI;" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:21:30.850

使用连接字符串：

```
"Server=.\SqlExpress;Database=<fill in your database name>;Integrated Security=SSPI" 
```

如果不起作用，请创建一个 SQL 服务器帐户并使用此连接字符串：

```
"Server=.\SqlExpress;Database=<fill in your database name>;User ID=<fill in your username>;Password=<fill in your password>;" 
```

# python - Django 错误：渲染时捕获 NoReverseMatch

> ID：13048887
> 
> 赞同：1
> 
> 时间：2012-10-24T12:06:16.163
> 
> 标签：python, django, osqa

我正在尝试设置一个 Django 站点 (OSQA)，但无法正常工作。

有一些问题，其中之一是当我尝试查看用户的个人资料时，出现以下异常：

有人可以指出问题可能出在哪里吗？

```
TemplateSyntaxError at /users/2/allenq/
Caught NoReverseMatch while rendering: Reverse for 'ask_to_me' with arguments '(2, u'allenq')' and keyword arguments '{}' not found.
Request Method: GET
Request URL:    http://123.243.100.125/users/2/allenq/
Django Version: 1.3.4
Exception Type: TemplateSyntaxError
Exception Value:    
Caught NoReverseMatch while rendering: Reverse for 'ask_to_me' with arguments '(2, u'allenq')' and keyword arguments '{}' not found.
Exception Location: /usr/lib/python2.6/site-packages/django/template/defaulttags.py in render, line 450
Python Executable:  /usr/bin/python
Python Version: 2.6.6
Python Path:    
['/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg',
 '/usr/lib/python2.6/site-packages/elementtree-1.2.7_20070827_preview-py2.6.egg',
 '/usr/lib/python2.6/site-packages/Markdown-2.2.0-py2.6.egg',
 '/usr/lib/python2.6/site-packages/html5lib-0.95-py2.6.egg',
 '/usr/lib/python2.6/site-packages/django_rosetta-0.6.8-py2.6.egg',
 '/usr/lib64/python26.zip',
 '/usr/lib64/python2.6',
 '/usr/lib64/python2.6/plat-linux2',
 '/usr/lib64/python2.6/lib-tk',
 '/usr/lib64/python2.6/lib-old',
 '/usr/lib64/python2.6/lib-dynload',
 '/usr/lib64/python2.6/site-packages',
 '/usr/lib64/python2.6/site-packages/PIL',
 '/usr/lib64/python2.6/site-packages/gst-0.10',
 '/usr/lib64/python2.6/site-packages/gtk-2.0',
 '/usr/lib64/python2.6/site-packages/webkit-1.0',
 '/usr/lib/python2.6/site-packages',
 '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info',
 '/usr/local/src',
 '/usr/local/src/osqa',
 '/usr/local/src/osqa/forum/markdownext']
Server time:    ???, 24 ?? 2012 22:58:23 +1100
Template error

In template /usr/local/src/osqa/forum/skins/default/templates/users/info.html, error at line 31
Caught NoReverseMatch while rendering: Reverse for 'ask_to_me' with arguments '(2, u'allenq')' and keyword arguments '{}' not found.
21                  </tr>
22                  <tr>
23                      <td align="center">
24                          {% if not view_user.is_suspended %}
25                              <div class="scoreNumber" id="user-reputation">{{view_user.reputation|intcomma}}</div>
26                              <p><b style="color:#777;">{% trans "reputation" %}</b></p>
27                          {% else %}
28                              <div class="scoreNumber">{% trans "Suspended" %}</div>
29                              <p>{{ view_user.suspension.extra.publicmsg }}</p>
30                          {% endif %}
31                              <div class="scoreNumber" id="user-reputation"><a href="{% url ask_to_me view_user.id view_user.username%}">{% trans "Ask to me" %}</a></div>
32                      </td>
33                  </tr>
34              </table>
35          </td>
36          <td width="360" style="vertical-align: top;">
37          {% if can_view_private %}{% user_menu request.user view_user %}{% endif %}
38              <table class="user-details">
39                  <tr>
40                      <th colspan="2" align="left"><h3>{% trans "Registered user" %}</h3></th>
41                  </tr>
Traceback Switch to copy-and-paste view

/usr/lib/python2.6/site-packages/django/core/handlers/base.py in get_response
            response = callback(request, *callback_args, **callback_kwargs) ...
? Local vars
/usr/local/src/osqa/forum/modules/decorators.py in decorated
        return decoratable(*args, **kwargs) ...
? Local vars
/usr/local/src/osqa/forum/modules/decorators.py in __call__
            res = dec(res, *args, **kwargs) ...
? Local vars
/usr/local/src/osqa/forum/views/users.py in result
        return render_to_response(template, context, context_instance=RequestContext(request)) ...
? Local vars
/usr/lib/python2.6/site-packages/django/shortcuts/__init__.py in render_to_response
    return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/loader.py in render_to_string
    return t.render(context_instance) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in render
        return self._render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in _render
    return self.nodelist.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in render
        bits.append(self.render_node(node, context)) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/debug.py in render_node
        result = node.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render
    return compiled_parent._render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in _render
    return self.nodelist.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in render
        bits.append(self.render_node(node, context)) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/debug.py in render_node
        result = node.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render
    return compiled_parent._render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in _render
    return self.nodelist.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in render
        bits.append(self.render_node(node, context)) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/debug.py in render_node
        result = node.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render
        result = block.nodelist.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in render
        bits.append(self.render_node(node, context)) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/debug.py in render_node
        result = node.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render
        result = block.nodelist.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in render
        bits.append(self.render_node(node, context)) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/debug.py in render_node
        result = node.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render
    return self.render_template(self.template, context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render_template
    output = template.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in render
        return self._render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in _render
    return self.nodelist.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/base.py in render
        bits.append(self.render_node(node, context)) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/debug.py in render_node
        result = node.render(context) ...
? Local vars
/usr/lib/python2.6/site-packages/django/template/defaulttags.py in render
            raise e ...
? Local vars
Request information

GET
No GET data
POST
No POST data
FILES
No FILES data
COOKIES
Variable    Value
sessionid   
'1e7a11ca5a8631425ad03fd4973e57dc'
META
Variable    Value
mod_wsgi.listener_port  
'80'
HTTP_COOKIE 
'sessionid=1e7a11ca5a8631425ad03fd4973e57dc'
mod_wsgi.listener_host  
''
SERVER_SOFTWARE 
'Apache/2.2.15 (CentOS)'
SCRIPT_NAME 
u''
mod_wsgi.handler_script 
''
SERVER_SIGNATURE    
'<address>Apache/2.2.15 (CentOS) Server at 123.243.100.125 Port 80</address>\n'
REQUEST_METHOD  
'GET'
PATH_INFO   
u'/users/2/allenq/'
SERVER_PROTOCOL 
'HTTP/1.1'
QUERY_STRING    
''
HTTP_ACCEPT_CHARSET 
'ISO-8859-1,utf-8;q=0.7,*;q=0.3'
HTTP_USER_AGENT 
'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4'
HTTP_CONNECTION 
'keep-alive'
HTTP_REFERER    
'http://123.243.100.125/questions/unanswered/'
SERVER_NAME 
'123.243.100.125'
REMOTE_ADDR 
'123.243.100.125'
mod_wsgi.request_handler    
'wsgi-script'
wsgi.url_scheme 
'http'
PATH_TRANSLATED 
'/usr/local/src/osqa/osqa.wsgi/users/2/allenq/'
SERVER_PORT 
'80'
wsgi.multiprocess   
False
mod_wsgi.input_chunked  
'0'
SERVER_ADDR 
'192.168.0.10'
DOCUMENT_ROOT   
'/usr/local/src/osqa/forum'
mod_wsgi.process_group  
'osqa'
SCRIPT_FILENAME 
'/usr/local/src/osqa/osqa.wsgi'
SERVER_ADMIN    
'admin@your.server.com'
wsgi.input  
<mod_wsgi.Input object at 0x7f1d982f5670>
HTTP_HOST   
'123.243.100.125'
wsgi.multithread    
True
mod_wsgi.callable_object    
'application'
REQUEST_URI 
'/users/2/allenq/'
HTTP_ACCEPT 
'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
wsgi.version    
(1, 1)
GATEWAY_INTERFACE   
'CGI/1.1'
wsgi.run_once   
False
wsgi.errors 
<mod_wsgi.Log object at 0x7f1d982f5af0>
REMOTE_PORT 
'11611'
HTTP_ACCEPT_LANGUAGE    
'en-GB,en-US;q=0.8,en;q=0.6'
mod_wsgi.version    
(3, 2)
mod_wsgi.application_group  
'localhost.localdomain|'
mod_wsgi.script_reloading   
'1'
wsgi.file_wrapper   
''
HTTP_ACCEPT_ENCODING    
'gzip,deflate,sdch'
Settings
Using settings module osqa.settings
Setting Value
USE_L10N    
False
USE_THOUSAND_SEPARATOR  
False
APP_PROTOCOL    
'http'
LANGUAGE_CODE   
'zh_CN'
ROOT_URLCONF    
'urls'
MANAGERS    
()
APP_URL 
'http://127.0.0.1'
DEFAULT_CHARSET 
'utf-8'
APP_DOMAIN  
'127.0.0.1'
STATIC_ROOT 
''
TEST_DATABASE_CHARSET   
None
LOG_FILENAME    
'django.osqa.log'
MESSAGE_STORAGE 
'django.contrib.messages.storage.user_messages.LegacyFallbackStorage'
DATABASE_HOST   
'127.0.0.1'
IGNORABLE_404_STARTS    
('/cgi-bin/', '/_vti_bin', '/_vti_inf')
SEND_BROKEN_LINK_EMAILS 
False
URL_VALIDATOR_USER_AGENT    
'Django/1.3.4 (http://www.djangoproject.com)'
STATICFILES_FINDERS 
('django.contrib.staticfiles.finders.FileSystemFinder',
 'django.contrib.staticfiles.finders.AppDirectoriesFinder')
SESSION_COOKIE_DOMAIN   
None
SESSION_COOKIE_NAME 
'sessionid'
ADMIN_FOR   
()
TIME_INPUT_FORMATS  
('%H:%M:%S', '%H:%M')
DATABASES   
{'default': {'ENGINE': 'django.db.backends.postgresql_psycopg2',
         'HOST': '127.0.0.1',
         'NAME': 'osqa',
         'OPTIONS': {},
         'PASSWORD': '********************',
         'PORT': '',
         'TEST_CHARSET': None,
         'TEST_COLLATION': None,
         'TEST_MIRROR': None,
         'TEST_NAME': None,
         'TIME_ZONE': 'Australia/Melbourne',
         'USER': 'uosqa'}}
TEST_DATABASE_NAME  
None
FILE_UPLOAD_PERMISSIONS 
None
FILE_UPLOAD_HANDLERS    
('django.core.files.uploadhandler.MemoryFileUploadHandler',
 'django.core.files.uploadhandler.TemporaryFileUploadHandler')
DEFAULT_CONTENT_TYPE    
'text/html'
OSQA_DEFAULT_SKIN   
'default'
APPEND_SLASH    
True
FIRST_DAY_OF_WEEK   
0
DATABASE_ROUTERS    
[]
YEAR_MONTH_FORMAT   
'F Y'
STATICFILES_STORAGE 
'django.contrib.staticfiles.storage.StaticFilesStorage'
CACHES  
{'default': {'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',
         'LOCATION': '/usr/local/src/osqa/cache'}}
MODULES_FOLDER  
'/usr/local/src/osqa/forum_modules'
SERVER_EMAIL    
USE_I18N    
True
THOUSAND_SEPARATOR  
','
SECRET_KEY  
'********************'
LANGUAGE_COOKIE_NAME    
'django_language'
FILE_UPLOAD_TEMP_DIR    
'/usr/local/src/osqa/tmp'
TRANSACTIONS_MANAGED    
False
LOGGING_CONFIG  
'django.utils.log.dictConfig'
TEMPLATE_LOADERS    
['django.template.loaders.filesystem.load_template_source',
 'django.template.loaders.app_directories.load_template_source',
 'forum.modules.template_loader.module_templates_loader',
 'forum.skins.load_template_source']
TEMPLATE_DEBUG  
True
CSRF_COOKIE_NAME    
'csrftoken'
TEST_DATABASE_COLLATION 
None
EMAIL_HOST_PASSWORD 
'********************'
CACHE_BACKEND   
'file:///usr/local/src/osqa/cache'
SESSION_COOKIE_SECURE   
False
CSRF_COOKIE_DOMAIN  
None
FILE_CHARSET    
'utf-8'
DEBUG   
True
MODULES_PACKAGE 
'forum_modules'
SESSION_FILE_PATH   
None
DEFAULT_FILE_STORAGE    
'django.core.files.storage.FileSystemStorage'
INSTALLED_APPS  
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.admin',
 'django.contrib.humanize',
 'django.contrib.sitemaps',
 'django.contrib.markup',
 'forum']
LANGUAGES   
(('ar', 'Arabic'),
 ('az', 'Azerbaijani'),
 ('zh-cn', 'Simplified Chinese'),
 ('zh-tw', 'Traditional Chinese'))
DATABASE_ENGINE 
'postgresql_psycopg2'
DATABASE_NAME   
'osqa'
COMMENTS_FIRST_FEW  
0
PREPEND_WWW 
False
SESSION_COOKIE_HTTPONLY 
False
DATABASE_PORT   
''
DEBUG_PROPAGATE_EXCEPTIONS  
False
MONTH_DAY_FORMAT    
'F j'
LOGIN_URL   
'/accounts/login/'
SESSION_EXPIRE_AT_BROWSER_CLOSE 
False
TIME_FORMAT 
'P'
DATE_INPUT_FORMATS  
('%Y-%m-%d',
 '%d %B, %Y')
AUTHENTICATION_BACKENDS 
['django.contrib.auth.backends.ModelBackend']
FORCE_SCRIPT_NAME   
''
PASSWORD_RESET_TIMEOUT_DAYS 
'********************'
CACHE_MIDDLEWARE_ALIAS  
'default'
SESSION_SAVE_EVERY_REQUEST  
False
ADMIN_MEDIA_PREFIX  
'/admin_media/'
NUMBER_GROUPING 
0
SESSION_ENGINE  
'django.contrib.sessions.backends.db'
CSRF_FAILURE_VIEW   
'django.views.csrf.csrf_failure'
COMMENTS_SKETCHY_USERS_GROUP    
None
LOGIN_REDIRECT_URL  
'/accounts/profile/'
SESSION_COOKIE_PATH 
'/'
LOGGING 
{'disable_existing_loggers': False,
 'handlers': {'mail_admins': {'class': 'django.utils.log.AdminEmailHandler',
                  'level': 'ERROR'}},
 'loggers': {'django.request': {'handlers': ['mail_admins'],
                'level': 'ERROR',
                'propagate': True}},
 'version': 1}
CACHE_MIDDLEWARE_KEY_PREFIX 
''
LOCALE_PATHS    
()
TEMPLATE_STRING_IF_INVALID  
''
COMMENTS_ALLOW_PROFANITIES  
False
LOGOUT_URL  
'/accounts/logout/'
EMAIL_USE_TLS   
False
TEMPLATE_DIRS   
('/usr/local/src/osqa/forum/skins',)
FIXTURE_DIRS    
()
EMAIL_HOST  
'localhost'
DATE_FORMAT 
'N j, Y'
MEDIA_ROOT  
''
ADMINS  
()
FORMAT_MODULE_PATH  
None
DEFAULT_FROM_EMAIL  
'webmaster@localhost'
STATICFILES_DIRS    
()
MEDIA_URL   
''
DATETIME_FORMAT 
'N j, Y, P'
EMAIL_SUBJECT_PREFIX    
'[Django] '
DJANGO_VERSION  
1.3
SITE_ID 
1
DISALLOWED_USER_AGENTS  
()
ALLOWED_INCLUDE_ROOTS   
()
DECIMAL_SEPARATOR   
'.'
SHORT_DATE_FORMAT   
'm/d/Y'
DATABASE_USER   
'uosqa'
MODULE_LIST 
[<module 'osqa.forum_modules.sximporter' from '/usr/local/src/osqa/forum_modules/sximporter/__init__.pyc'>,
 <module 'osqa.forum_modules.pgfulltext' from '/usr/local/src/osqa/forum_modules/pgfulltext/__init__.pyc'>,
 <module 'osqa.forum_modules.default_badges' from '/usr/local/src/osqa/forum_modules/default_badges/__init__.pyc'>,
 <module 'osqa.forum_modules.akismet' from '/usr/local/src/osqa/forum_modules/akismet/__init__.pyc'>,
 <module 'osqa.forum_modules.exporter' from '/usr/local/src/osqa/forum_modules/exporter/__init__.pyc'>,
 <module 'osqa.forum_modules.localauth' from '/usr/local/src/osqa/forum_modules/localauth/__init__.pyc'>,
 <module 'osqa.forum_modules.robotstxt' from '/usr/local/src/osqa/forum_modules/robotstxt/__init__.pyc'>,
 <module 'osqa.forum_modules.facebookauth' from '/usr/local/src/osqa/forum_modules/facebookauth/__init__.pyc'>,
 <module 'osqa.forum_modules.oauthauth' from '/usr/local/src/osqa/forum_modules/oauthauth/__init__.pyc'>]
TEST_RUNNER 
'django.test.simple.DjangoTestSuiteRunner'
SITE_SRC_ROOT   
'/usr/local/src/osqa'
TIME_ZONE   
'Australia/Melbourne'
FILE_UPLOAD_MAX_MEMORY_SIZE 
2621440
APP_BASE_URL    
'http://127.0.0.1'
EMAIL_BACKEND   
'django.core.mail.backends.smtp.EmailBackend'
DEFAULT_TABLESPACE  
''
TEMPLATE_CONTEXT_PROCESSORS 
['django.core.context_processors.request',
 'forum.context.application_settings',
 'forum.user_messages.context_processors.user_messages',
 'django.core.context_processors.auth']
SESSION_COOKIE_AGE  
1209600
ONLINE_USERS    
{}
SETTINGS_MODULE 
'osqa.settings'
USE_ETAGS   
False
DISABLED_MODULES    
['books', 'recaptcha', 'project_badges']
LANGUAGES_BIDI  
('he', 'ar', 'fa')
DEFAULT_INDEX_TABLESPACE    
''
INTERNAL_IPS    
('127.0.0.1',)
STATIC_URL  
None
EMAIL_PORT  
25
SHORT_DATETIME_FORMAT   
'm/d/Y P'
ABSOLUTE_URL_OVERRIDES  
{}
DATABASE_OPTIONS    
{}
CACHE_MIDDLEWARE_SECONDS    
600
BANNED_IPS  
()
DEBUG_TOOLBAR_CONFIG    
{'INTERCEPT_REDIRECTS': True}
DATETIME_INPUT_FORMATS  
('%Y-%m-%d %H:%M:%S',
 '%Y-%m-%d %H:%M',
 '%Y-%m-%d',
 '%m/%d/%Y %H:%M:%S',
 '%m/%d/%Y %H:%M',
 '%m/%d/%Y',
 '%m/%d/%y %H:%M:%S',
 '%m/%d/%y %H:%M',
 '%m/%d/%y')
DATABASE_PASSWORD   
'********************'
COMMENTS_MODERATORS_GROUP   
None
PROFANITIES_LIST    
'********************'
EMAIL_HOST_USER 
''
COMMENTS_BANNED_USERS_GROUP 
None
You're seeing this error because you have DEBUG = True in your Django settings file. Change that to False, and Django will display a standard 500 page. 
```

**编辑： urls.py 文件：**

```
import startup
import os.path
from forum import settings
from django.conf.urls.defaults import *
from django.conf import settings as djsettings
from django.contrib import admin
from forum import views as app
from forum.sitemap import OsqaSitemap
from django.utils.translation import ugettext as _
import logging

admin.autodiscover()

sitemaps = {
    'questions': OsqaSitemap
}

APP_PATH = os.path.dirname(__file__)

core_urls = (
    url(r'^$', app.readers.index, name='index'),
    url(r'^%s(.*)' % _('nimda/'), include(admin.site.urls)),                        url(r'^sitemap.xml$', 'forum.sitemap.index', {'sitemaps': sitemaps}),
    url(r'^sitemap-(?P<section>.+)\.xml$', 'forum.sitemap.sitemap', {'sitemaps': sitemaps}),

    url(r'^favicon\.ico$', app.meta.favicon),
    url(r'^cstyle\.css$', app.meta.custom_css, name='custom_css'),

    url(r'^m/(?P<skin>\w+)/media/(?P<path>.*)$', app.meta.media , name='osqa_media'),
    url(r'^%s(?P<path>.*)$' % _('upfiles/'), 'django.views.static.serve', {'document_root': os.path.join(APP_PATH, 'upfiles').replace('\\', '/')}, name='uploaded_file',),

    url(r'^%s$' % _('faq/'), app.meta.static, {'content': settings.FAQ_PAGE_TEXT, 'title': _('FAQ')}, name='faq'),
    url(r'^%s$' % _('about/'), app.meta.static, {'content': settings.ABOUT_PAGE_TEXT, 'title': _('About')}, name='about'),
    url(r'^%s$' % _('markdown_help/'), app.meta.markdown_help, name='markdown_help'), url(r'^opensearch\.xml$', app.meta.opensearch, name='opensearch'),
    url(r'^opensearch\.xml$', app.meta.opensearch, name='opensearch'),
    url(r'^%s$' % _('privacy/'), app.meta.privacy, name='privacy'),
    url(r'^%s$' % _('logout/'), app.meta.logout, name='logout'),
    url(r'^%s(?P<id>\d+)/%s$' % (_('answers/'), _('edit/')), app.writers.edit_answer, name='edit_answer'),
    url(r'^%s(?P<id>\d+)/$' % _('revisions/'), app.readers.revisions, name='revisions'),
    url(r'^%s$' % _('questions/'), app.readers.questions, name='questions'),
    url(r'^%s%s$' % (_('questions/'), _('ask/')), app.writers.ask, name='ask'),
    url(r'^%s%s$' % (_('questions/'), _('related_questions/')), app.commands.related_questions, name='related_questions'),

    url(r'^%s%s$' % (_('questions/'), _('unanswered/')), app.readers.unanswered, name='unanswered'),
    url(r'^%s(?P<mode>[\w\-]+)/(?P<user>\d+)/(?P<slug>.*)/$' % _('questions/'), app.readers.user_questions, name='user_questions'),

    url(r'^%s(?P<id>\d+)/%s$' % (_('questions/'), _('edit/')), app.writers.edit_question, name='edit_question'),
    url(r'^%s(?P<id>\d+)/%s$' % (_('questions/'), _('close/')), app.commands.close, kwargs=dict(close=True), name='close'),
    url(r'^%s(?P<id>\d+)/%s$' % (_('questions/'), _('reopen/')), app.commands.close, kwargs=dict(close=False), name='reopen'),
    url(r'^%s(?P<id>\d+)/%s$' % (_('questions/'), _('answer/')), app.writers.answer, name='answer'),
    url(r'^%s(?P<action>\w+)/$' % _('pending-data/'), app.writers.manage_pending_data, name='manage_pending_data'),

    url(r'^%s(?P<id>\d+)/(?P<vote_type>[a-z]+)/' % _('vote/'), app.commands.vote_post, name='vote_post'),
    url(r'^%s(?P<id>\d+)/$' % _('like_comment/'), app.commands.like_comment, name='like_comment'),
    url(r'^%s(?P<id>\d+)/' % _('comment/'), app.commands.comment, name='comment'),
    url(r'^%s(?P<id>\d+)/$' % _('delete_comment/'), app.commands.delete_comment, name='delete_comment'),
    url(r'^%s(?P<id>\d+)/$' % _('convert_comment/'), app.commands.convert_comment_to_answer, name='convert_comment'),
    url(r'^%s(?P<id>\d+)/$' % _('accept_answer/'), app.commands.accept_answer, name='accept_answer'),
    url(r'^%s(?P<id>\d+)/$' % _('answer_link/'), app.commands.answer_permanent_link, name='answer_permanent_link'),
    url(r'^%s(?P<id>\d+)/$' % _('mark_favorite/'), app.commands.mark_favorite, name='mark_favorite'),
    url(r'^%s%s(?P<user_id>\d+)/%s(?P<answer_id>\d+)/$' % (_('award_points/'), _('user/'), _('answer/')), app.commands.award_points, name='award_points'),

    url(r'^%s(?P<id>\d+)/' % _('flag/'), app.commands.flag_post, name='flag_post'),
    url(r'^%s(?P<id>\d+)/' % _('delete/'), app.commands.delete_post, name='delete_post'),
    url(r'^%s(?P<id>\d+)/(?P<user>\d+)?$' % _('subscribe/'), app.commands.subscribe, name='subscribe'),
    url(r'^%s(?P<id>\d+)/$' % _('subscribe/'), app.commands.subscribe, name='subscribe_simple'),
    url(r'^%s' % _('matching_tags/'), app.commands.matching_tags, name='matching_tags'),
    url(r'^%s' % _('matching_users/'), app.commands.matching_users, name='matching_users'),
    url(r'^%s(?P<id>\d+)/' % _('node_markdown/'), app.commands.node_markdown, name='node_markdown'),
    url(r'^%s(?P<id>\d+)/' % _('convert/'), app.commands.convert_to_comment, name='convert_to_comment'),
    url(r'^%s(?P<id>\d+)/' % _('convert_to_question/'), app.writers.convert_to_question,name='convert_to_question'),
    url(r'^%s(?P<id>\d+)/' % _('wikify/'), app.commands.wikify, name='wikify'),

    url(r'^%s(?P<id>\d+)/(?P<slug>[\w-]*)$' % _('question/'), 'django.views.generic.simple.redirect_to', {'url': '/questions/%(id)s/%(slug)s'}),
    url(r'^%s(?P<id>\d+)/?$' % _('questions/'), app.readers.question, name='question'),
    url(r'^%s(?P<id>\d+)/(?P<slug>.*)/(?P<answer>\d+)$' % _('questions/'), app.readers.question),
    url(r'^%s(?P<id>\d+)/(?P<slug>.*)$' % _('questions/'), app.readers.question, name='question'),

    url(r'^%s$' % _('tags/'), app.readers.tags, name='tags'),
    url(r'^%s(?P<tag>.*)/$' % _('tags/'), app.readers.tag, name='tag_questions'),     
    url(r'^%s%s(?P<tag>[^/]+)/$' % (_('mark-tag/'),_('interesting/')), app.commands.mark_tag, kwargs={'reason':'good','action':'add'}, name='mark_interesting_tag'),     
    url(r'^%s%s(?P<tag>[^/]+)/$' % (_('mark-tag/'),_('ignored/')), app.commands.mark_tag, kwargs={'reason':'bad','action':'add'}, name='mark_ignored_tag'),     
    url(r'^%s(?P<tag>[^/]+)/$' % _('unmark-tag/'), app.commands.mark_tag, kwargs={'action':'remove'}, name='mark_ignored_tag'),     

    url(r'^%s$' % _('users/'), app.users.users, name='users'),
    # url(r'^%s$' % _('online_users/'), app.users.online_users, name='online_users'),    

    url(r'^%s(?P<id>\d+)/%s$' % (_('users/'), _('edit/')), app.users.edit_user, name='edit_user'),
    url(r'^%s(?P<id>\d+)/%s$' % (_('users/'), _('award/')), app.users.award_points, name='user_award_points'),
    url(r'^%s(?P<id>\d+)/%s$' % (_('users/'), _('suspend/')), app.users.suspend, name='user_suspend'),
    url(r'^%s(?P<id>\d+)/%s(?P<action>[a-z]+)/(?P<status>[a-z]+)/$' % (_('users/'), _('powers/')), app.users.user_powers, name='user_powers'),
    url(r'^%s(?P<id>\d+)/(?P<slug>.*)/%s$' % (_('users/'), _('subscriptions/')), app.users.user_subscriptions, name='user_subscriptions'),
    url(r'^%s(?P<id>\d+)/(?P<slug>.*)/%s$' % (_('users/'), _('preferences/')), app.users.user_preferences, name='user_preferences'),
    url(r'^%s(?P<id>\d+)/(?P<slug>.*)/%s$' % (_('users/'), _('favorites/')), app.users.user_favorites, name='user_favorites'),
    url(r'^%s(?P<id>\d+)/(?P<slug>.*)/%s$' % (_('users/'), _('reputation/')), app.users.user_reputation, name='user_reputation'),
    url(r'^%s(?P<id>\d+)/(?P<slug>.*)/%s$' % (_('users/'), _('votes/')), app.users.user_votes, name='user_votes'),
    url(r'^%s(?P<id>\d+)/(?P<slug>.*)/%s$' % (_('users/'), _('recent/')), app.users.user_recent, name='user_recent'),
    url(r'^%s(?P<id>\d+)/(?P<slug>.*)/$' % _('users/'), app.users.user_profile, name='user_profile'),
    url(r'^%s$' % _('badges/'), app.meta.badges, name='badges'),
    url(r'^%s(?P<id>\d+)/(?P<slug>[\w-]+)/?$' % _('badges/'), app.meta.badge, name='badge'),
    # (r'^admin/doc/' % _('admin/doc'), include('django.contrib.admindocs.urls')),

    url(r'^%s$' % _('upload/'), app.writers.upload, name='upload'),
    url(r'^%s$' % _('search/'), app.readers.search, name='search'),
    url(r'^%s$' % _('contact/'), app.meta.feedback, name='feedback'),

    (r'^i18n/', include('django.conf.urls.i18n')),

    url(r'^%s%s$' % (_('account/'), _('signin/')), app.auth.signin_page, name='auth_signin'),
    url(r'^%s%s$' % (_('account/'), _('signout/')), app.auth.signout, name='user_signout'),
    url(r'^%s(?P<provider>\w+)/%s$' % (_('account/'), _('signin/')), app.auth.prepare_provider_signin, name='auth_provider_signin'),
    url(r'^%s(?P<provider>\w+)/%s$' % (_('account/'), _('done/')), app.auth.process_provider_signin, name='auth_provider_done'),
    url(r'^%s%s$' % (_('account/'), _('register/')), app.auth.external_register, name='auth_external_register'),
    url(r'^%s%s(?P<user>\d+)/(?P<code>.+)/$' % (_('account/'), _('validate/')), app.auth.validate_email, name='auth_validate_email'),
    url(r'^%s%s$' % (_('account/'), _('tempsignin/')), app.auth.request_temp_login, name='auth_request_tempsignin'),
    url(r'^%s%s(?P<user>\d+)/(?P<code>.+)/$' % (_('account/'), _('tempsignin/')), app.auth.temp_signin, name='auth_tempsignin'),
    url(r'^%s(?P<id>\d+)/%s$' % (_('account/'), _('authsettings/')), app.auth.auth_settings, name='user_authsettings'),
    url(r'^%s%s(?P<id>\d+)/%s$' % (_('account/'), _('providers/'), _('remove/')), app.auth.remove_external_provider, name='user_remove_external_provider'),
    url(r'^%s%s%s$' % (_('account/'), _('providers/'), _('add/')), app.auth.signin_page, name='user_add_external_provider'),
    url(r'^%s%s$' %(_('account/'), _('send-validation/')), app.auth.send_validation_email, name='send_validation_email'),

    url(r'^%s$' % _('admin/'), app.admin.dashboard, name='admin_index'),
    url(r'^%s%s$' % (_('admin/'), _('switch_interface/')), app.admin.interface_switch, name='admin_switch_interface'),
    url(r'^%s%s$' % (_('admin/'), _('statistics/')), app.admin.statistics, name='admin_statistics'),
    url(r'^%s%s$' % (_('admin/'), _('denormalize/')), app.admin.recalculate_denormalized, name='admin_denormalize'),
    url(r'^%s%s$' % (_('admin/'), _('go_bootstrap/')), app.admin.go_bootstrap, name='admin_go_bootstrap'),
    url(r'^%s%s$' % (_('admin/'), _('go_defaults/')), app.admin.go_defaults, name='admin_go_defaults'),
    url(r'^%s%s(?P<set_name>\w+)/(?P<var_name>\w+)/$' % (_('admin/'), _('settings/')), app.admin.get_default, name='admin_default'),
    url(r'^%s%s$' % (_('admin/'), _('maintenance/')), app.admin.maintenance, name='admin_maintenance'),
    url(r'^%s%s$' % (_('admin/'), _('flagged_posts/')), app.admin.flagged_posts, name='admin_flagged_posts'),
    url(r'^%s%s$' % (_('admin/'), _('static_pages/')), app.admin.static_pages, name='admin_static_pages'),

    url(r'^%s%s%s$' % (_('admin/'), _('static_pages/'), _('new/')), app.admin.edit_page, name='admin_new_page'),
    url(r'^%s%s%s(?P<id>\d+)/$' % (_('admin/'), _('static_pages/'), _('edit/')), app.admin.edit_page, name='admin_edit_page'),

    url(r'^%s%s(?P<name>\w+)/$' % (_('admin/'), _('tools/')), app.admin.tools_page, name='admin_tools'),

    url(r'^%s%s(?P<set_name>\w+)/$' % (_('admin/'), _('settings/')), app.admin.settings_set, name='admin_set'),

    url(r'%s%s' % (_('admin/'), _('test_email_settings/')), app.admin.test_email_settings, name='test_email_settings'),

    url(r'^feeds/rss[/]?$', app.readers.feed, name='latest_questions_feed'),

)

from forum.modules import get_modules_script

module_patterns = get_modules_script('urls')

urlpatterns = patterns('')

for pattern_file in module_patterns:
    pattern = getattr(pattern_file, 'urlpatterns', None)
    if pattern:
    urlpatterns += pattern

module_defined = {}

for t in urlpatterns:
    if hasattr(t, 'name') and t.name:
    module_defined[t.name] = True

core_defined = []

for u in core_urls:
    if not(hasattr(u, 'name') and u.name and (u.name in module_defined)):
    core_defined.append(u)

def urlname(name):
    if name in module_defined:
    return None
    return name

urlpatterns += patterns('', *core_defined) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:12:15.080

```
Reverse for 'ask_to_me' with arguments '(2, u'allenq')' and keyword arguments '{}' not found. 
```

**Django 模板渲染器无法找到反向 URL。**

这意味着您在某处使用了 {% url ... %} 标记，其参数与 urls.py 中的 URL 不匹配。

确保`ask_to_me`URL 模式存在于 urls.py 中。您可以尝试在 Django 命令行中使用 reverse() 。

然后，确保它接受两个**未命名**的参数，一个整数（此处为 2）和一个字符串（此处为 'allenq'）。

我无法为您提供开箱即用的解决方案，因为您没有向我们提供足够的信息。我们需要 urls.py 和模板的代码，至少是你使用 {% url ... %} 标签的部分。此外，您只询问“指出问题所在”的信息，所以......你去吧。

## 更多信息后编辑：

所以有错误的模板标签是：

```
{% url ask_to_me view_user.id view_user.username%} 
```

此错误是由于**没有**名称为“ask_to_me”的模式引起的。只有这个包含“询问”一词：

```
url(r'^%s%s$' % (_('questions/'), _('ask/')), app.writers.ask, name='ask'), 
```

但是，它不需要参数。您需要找到该视图消失在哪里。尝试查看 urls.py 的下部，其中 URL 模式是从“模块”动态添加的。

# sql - 如何通过实体框架启用 SQL 应用程序角色

> ID：13048888
> 
> 赞同：3
> 
> 时间：2012-10-24T12:06:23.677
> 
> 标签：sql, entity-framework, application-role

我现在正在使用实体框架开发大型政府应用程序。起初我有一个关于启用 SQL 应用程序角色的问题。使用 ado.net 我正在使用以下代码：

```
SqlCommand cmd = new SqlCommand("sys.sp_setapprole");
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Connection = _sqlConn;
            SqlParameter paramAppRoleName = new SqlParameter();
            paramAppRoleName.Direction = ParameterDirection.Input;
            paramAppRoleName.ParameterName = "@rolename";
            paramAppRoleName.Value = "AppRole";
            cmd.Parameters.Add(paramAppRoleName);

            SqlParameter paramAppRolePwd = new SqlParameter();
            paramAppRolePwd.Direction = ParameterDirection.Input;
            paramAppRolePwd.ParameterName = "@password";
            paramAppRolePwd.Value = "123456";
            cmd.Parameters.Add(paramAppRolePwd);

            SqlParameter paramCreateCookie = new SqlParameter();
            paramCreateCookie.Direction = ParameterDirection.Input;
            paramCreateCookie.ParameterName = "@fCreateCookie";
            paramCreateCookie.DbType = DbType.Boolean;
            paramCreateCookie.Value = 1;
            cmd.Parameters.Add(paramCreateCookie);

            SqlParameter paramEncrypt = new SqlParameter();
            paramEncrypt.Direction = ParameterDirection.Input;
            paramEncrypt.ParameterName = "@encrypt";
            paramEncrypt.Value = "none";
            cmd.Parameters.Add(paramEncrypt);

            SqlParameter paramEnableCookie = new SqlParameter();
            paramEnableCookie.ParameterName = "@cookie";
            paramEnableCookie.DbType = DbType.Binary;
            paramEnableCookie.Direction = ParameterDirection.Output;
            paramEnableCookie.Size = 1000;
            cmd.Parameters.Add(paramEnableCookie);

            try
            {
                cmd.ExecuteNonQuery();
                SqlParameter outVal = cmd.Parameters["@cookie"];
                // Store the enabled cookie so that approle  can be disabled with the cookie.
                _appRoleEnableCookie = (byte[]) outVal.Value;

            }
            catch (Exception ex)
            {
                result = false;
                msg = "Could not execute enable approle proc." + Environment.NewLine + ex.Message;
            } 
```

但是无论我搜索多少，我都找不到在 EF 上实现的方法。

另一个问题是：如何将应用程序角色添加到实体数据模型设计器？

* * *

我正在使用下面的代码执行 EF 参数：

```
AEntities ar = new AEntities();

            DbConnection con = ar.Connection;
            con.Open();
            msg = "";
            bool result = true;
            DbCommand cmd = con.CreateCommand();

            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Connection = con;
            var d = new DbParameter[]{
            new SqlParameter{ ParameterName="@r", Value ="AppRole",Direction =  ParameterDirection.Input}
          , new SqlParameter{ ParameterName="@p", Value ="123456",Direction =  ParameterDirection.Input}
           };
            string sql = "EXEC " + procName + " @rolename=@r,@password=@p";
            var s = ar.ExecuteStoreCommand(sql, d); 
```

当运行 ExecuteStoreCommand 这一行返回错误：

> 应用程序角色只能在 ad hoc 级别激活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-16T15:18:02.390

我按照以下方式进行（假设数据库优先）：

1.  我从数据库创建 DbContext 并将其命名为 MyEntitiesBase
2.  我从 MyEntitiesBase 继承以使用以下代码创建 MyEntities：

    ```
    public partial class MyEntities : MyEntitiesBase
    {

    private byte[] appRoleCookie;

    private void SetAppRole()
    {
        try
        {
            appRoleCookie = Database.SqlQuery<byte[]>(
                @"
                DECLARE @cookie VARBINARY(8000)
                DECLARE @r INT
                EXEC sp_setapprole 'user', 'pass', @fCreateCookie = true, @cookie = @cookie OUTPUT
                SELECT @cookie").First();
        }
        catch
        {
            throw new AuthenticationException();
        }
    }

    private void UnSetAppRole()
    {
        bool failed = Database.SqlQuery<bool>("DECLARE @result BIT; EXEC @result = sp_unsetapprole @cookie = " + appRoleCookie.ToHexadecimalString() + "; SELECT @result").First();
        if (failed)
            throw new SecurityException();
    }

    public MyEntities() : base()
    {
        Database.Connection.Open();
        SetAppRole();
    }

    private bool disposed = false;

    protected override void Dispose(bool disposing)
    {
        if (disposed)
            return;
        UnSetAppRole();
        Database.Connection.Close();
        disposed = true;
        base.Dispose(disposing);
    }
    } 
    ```

`ToHexadecimalString`的扩展方法在哪里`IEnumerable<byte>`，如下：

```
public static class BytesExtensions
{
    public static string ToHexadecimalString(this IEnumerable<byte> bytes)
    {
        return "0x" + string.Concat(bytes.Select(b => b.ToString("X2")));
    }
} 
```

就是这样。适用于连接池和一切。您只需使用此继承版本而不是 EF 生成的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:45:43.863

基本上你正在做的是调用一个存储过程。

实体框架具有执行存储过程的功能。这是一个视频解释：http: [//msdn.microsoft.com/en-us/data/gg699321.aspx](http://msdn.microsoft.com/en-us/data/gg699321.aspx)

如果您向下滚动到“使用导入函数映射存储过程”部分，您将找到与您相关的部分。

# uiviewcontroller - 如何在 iOS6 中为 Game Center View Controller 应用横向模式

> ID：13048890
> 
> 赞同：1
> 
> 时间：2012-10-24T12:06:25.843
> 
> 标签：uiviewcontroller, cocos2d-iphone, ios6, uiapplication

我正在使用 COCOS2D 游戏。现在我已经将我的游戏更新到了 iOS6。我已经看到 Apple 更改了 Game Center 登录（身份验证）过程。因此，为此我使用了处理程序 authenticateWithCompletionHandler 并且我的游戏正在崩溃。

我也通过添加方法解决了这个问题。

`- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window { return UIInterfaceOrientationMaskAllButUpsideDown; }`

这解决了我的崩溃问题。但现在的问题是 Game-Center 身份验证视图仅在纵向模式下提供。因为我的整个游戏都处于横向模式。我想要横向的身份验证视图。

有没有人为我提供这个问题的任何解决方案。

提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:21:27.820

目前 iOS6 的 Game Center 认证界面没有横向视图。

我们不知道这是苹果公司的疏忽还是故意的。许多人期待下一个版本会提供修复，但目前这只是传闻。

你所能做的就是你已经做过的。作为一种解决方法，可以只允许 iOS6 小屏幕设备的纵向。任何运行 iOS5 和 iPad 的设备都不必是纵向的，并且应该可以正常工作。

# asp.net-mvc - Entity Framework 5 - Code First 生产准备

> ID：13048898
> 
> 赞同：2
> 
> 时间：2012-10-24T12:07:13.677
> 
> 标签：asp.net-mvc, entity-framework, production-environment

作为我们打算从 Linq2Sql 迁移到实体框架的一部分，我们创建了一个由十个实体组成的小型 EF 模型。因为我们使用的是遗留应用程序，所以我们使用“代码优先”选项并将我们的 POCO 对象手动映射到数据库中的表。 **我们不希望实体框架代码更新数据库。** 我相信以下是实现这一目标所需要做的全部 - 我希望得到确认，因为我不确定 SetInitializer 代码是否应该放在此处或是否应该放在 Global.asax 代码中。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    Database.SetInitializer<InboxDataContext>(null);

    modelBuilder.Configurations.Add(new Subscribers.Mapping.DataSourceMap());
    modelBuilder.Configurations.Add(new Subscribers.Mapping.SubscriberMap());
    ...
} 
```

作为此次更新的一部分，我们创建了一个小型测试页面（MVC 控制器和视图）并将其添加到我们的主应用程序项目中。在开发和测试期间，这运行良好。我们唯一注意到的是，如果我们更新了底层 EF 模型，初始页面加载似乎需要几分钟才能呈现。我认为这是因为 EF 必须重建其视图和映射以反映更改 - 让我感到耻辱的是，我并没有太担心这一点，因为 a）我不完全了解它的工作原理和 b）它似乎只发生在模型更改上。

今天早上，我们将此更新加载到生产服务器进行初始测试，这一次初始加载问题变得更糟 - 事实上测试页面从未加载过。

所以，要回答我的问题：

1.  还有什么我应该/不应该做的事情来准备我的生产申请吗？
2.  如何提高初始加载性能？
3.  如何找出为什么生产服务器上的初始加载永远不会完成 - 我没有看到任何错误消息？

我确实尝试下载 Entity Framework Power Tools 并在派生的 DbContext 类上运行“生成视图”选项，但由于我只能在开发环境中运行它，所以我不确定它在复制到生产服务器时是否有效 - 它似乎没有。

我应该提到，开发环境在主表中仅包含一百条记录，而生产环境包含近一百万条记录（相同的模式），我再次不确定这是否会有所不同。

任何帮助建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:24:05.070

首先，如果您使用的是现有数据库，那么更好的方法是 Model First。您可以将您的 Edmx 连接到您当前的数据库，它会收集所有需要的映射，就像它们当前一样。然后它还会生成 POCO 类和 DbContext（使用 EF5，您必须在 <5 中手动完成）。使用这种方法可以减少初始化时间，因为您的代码不必在运行时创建模型。

试试看，它可能会解决你所有的问题（我相信它们都是相关的）。

# jquery - jquery json解析两个代码一个工作另一个不

> ID：13048905
> 
> 赞同：0
> 
> 时间：2012-10-24T12:07:43.163
> 
> 标签：jquery, ajax, json, rest, jsonp

我有以下代码用于解析来自服务器的 jason 响应。我还包括各自的回应。第一个代码有效，但第二个代码无效。能给个提示吗？谢谢。第一个代码：

```
<html>
<head>
<script type="text/javascript" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:20:39.037

您不想迭代内容，`bibliographic-data`而只想从中获取一个属性

替换这个

```
$.each(oData['ops:world-patent-data']['exchange-documents']['bibliographic-data'],
    function(iIndex, mValue) {
         console.log(mValue['publication-reference'])
    }
); 
```

接着就，随即：

```
console.log(oData['ops:world-patent-data']['exchange-documents']['bibliographic-data']['publication-reference']); 
```

获取文档编号：

```
console.log(oData['ops:world-patent-data']['exchange-documents']['bibliographic-data']['publication-reference']['document-id'][0]['doc-number']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:44:06.220

如果我正确阅读，您会在结构中丢失一个元素：

```
ops:world-patent-data.exchange-documents.exchange-document.bibliographic-data.publication-reference 
```

所以插入`['exchange-document']`

把它放在一个小提琴文件中，看看这是否对你有帮助：http: [//jsfiddle.net/pfJjG/1/](http://jsfiddle.net/pfJjG/1/)

```
var iam = {
    "ops:world-patent-data": {
        "@xmlns": {
            "ops": "http://ops.epo.org",
            "$": "http://www.epo.org/exchange",
            "ccd": "http://www.epo.org/ccd",
            "xlink": "http://www.w3.org/1999/xlink"
        },
        "ops:meta": {
            "@name": "elapsed-time",
            "@value": "31"
        },
        "exchange-documents": {
            "exchange-document": {
                "@system": "ops.epo.org",
                "@family-id": "35636806",
                "@country": "EP",
                "@doc-number": "1814517",
                "@kind": "A1",
                "bibliographic-data": {
                    "publication-reference": {
                        "document-id": [
                            {
                            "@document-id-type": "docdb",
                            "country": {
                                "$": "EP"
                            },
                            "doc-number": {
                                "$": "1814517"
                            },
                            "kind": {
                                "$": "A1"
                            },
                            "date": {
                                "$": "20070808"
                            }},
                        {
                            "@document-id-type": "epodoc",
                            "doc-number": {
                                "$": "EP1814517"
                            },
                            "date": {
                                "$": "20070808"
                            }}
                        ]
                    },
                    "classifications-ipcr": {
                        "classification-ipcr": [
                            {
                            "@sequence": "1",
                            "text": {
                                "$": "A61K   9/    08            A I"
                            }},
                        {
                            "@sequence": "2",
                            "text": {
                                "$": "A61K  31/    19            A I"
                            }},
                        {
                            "@sequence": "3",
                            "text": {
                                "$": "A61K  31/   216            A I"
                            }},
                        {
                            "@sequence": "4",
                            "text": {
                                "$": "A61K  47/    00            A I"
                            }}]
                    }
                }
            }
        }
    }
};
$('#me').text(iam["ops:world-patent-data"]["exchange-documents"]["exchange-document"]["bibliographic-data"]["publication-reference"]["document-id"][0]["doc-number"].$); 
```

# performance - Sql Server 大量查询表 - 我应该将辅助信息（html 文本）存储在另一个表中吗

> ID：13048907
> 
> 赞同：0
> 
> 时间：2012-10-24T12:07:47.333
> 
> 标签：performance, sql-server-2008, c#-4.0, entity-framework-4

概述：

我有一个表“类别”，大部分用于对产品进行分类，目前看起来像这样：

```
CREATE TABLE [dbo].[Category]
( 
CategoryId int IDENTITY(1,1) NOT NULL, 
CategoryNode hierarchyid NOT NULL UNIQUE,
CategoryString AS CategoryNode.ToString() PERSISTED,
CategoryLevel AS CategoryNode.GetLevel() PERSISTED,
CategoryTitle varchar(50) NOT NULL,
IsActive bit NOT NULL DEFAULT 1
) 
```

该表被大量查询以显示购物网站上的类别层次结构（通常是每个页面视图），并且可以包含大量项目。

我在我的数据层中使用实体框架。

问题：

我需要添加可能是相当大的“描述”，它可能以网页的全部内容的形式出现，我想知道是否应该将其存储在相关表中而不是将其添加到鉴于实体框架将 100% 的时间将“描述”列拖出数据库，而现有的类别表在 99.5% 的时间里我只需要 CategoryTitle 和 CategoryId。

通常我不会担心实体框架的开销，但在这种情况下，我认为考虑它可能很重要。我可以使用存储过程中的视图或复杂类型来解决此问题，但这意味着我希望避免进行大量重构。

我只是想知道是否有人对这种情况有任何想法、建议或想要拍我的手腕......

编辑：

我应该补充一点，我犹豫设置辅助表的原因是因为我不喜欢添加一个与 Category 表具有 1 对 1 关系的附加表的想法 - 这似乎有点毫无意义。但我也不是 DBA，所以我不确定这是否是可接受的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:48:38.493

您可以将列放在表中，然后创建一个涵盖所有其他列的索引。这样，当您使用当前模式进行所有查找时，将使用索引。

这个结构的关键词是覆盖索引：[http ://en.m.wikipedia.org/wiki/Database_index#Covering_index](http://en.m.wikipedia.org/wiki/Database_index#Covering_index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:14:33.190

出于不增加类别表中记录大小的简单原因，我将存储在不同的表中。由于这种 VARCHAR 列而增加的记录大小将减少可以容纳给定磁盘页面（通常大小为 4KB）的记录数量，从而增加要获取到主内存进行搜索的页面数量，从而增加磁盘数量访问，影响查询执行时间。

我会将其存储在不同的表中（即将类别表垂直划分为最常访问的列和不常用的列），并`OneToOne`在应用程序层与包含不常用的实体定义关系列，作为主类别实体中的成员，将获取类型设置为 LAZY。

# android - 使用 AccountManager 时是否可以让用户在应用程序中授权权限

> ID：13048916
> 
> 赞同：2
> 
> 时间：2012-10-24T12:08:26.640
> 
> 标签：android, accountmanager, google-play-services

我使用 AccountManager 获取访问令牌以授权对 Google Drive 的调用。运行这行代码时：

```
mgr.blockingGetAuthToken(account, ApiConst.DRIVE_AUTH_SCOPE, true); 
```

用户会收到有关权限请求的通知。是否可以从应用程序显示此内容并让用户接受权限？我知道如果使用 Google Play 服务，我可以捕获异常并提取使用意图：

```
 try {
    return GoogleAuthUtil.getToken(mActivity, mEmail, mScope);
  } catch (UserRecoverableAuthException userRecoverableException) {
    mActivity.startActivityForResult(userRecoverableException.getIntent(), mRequestCode);
  } 
```

使用 AccountManager 时是否有类似的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:46:41.077

解决了。如果我使用这种方法，用户将被要求接受权限而不是收到通知：

```
 am.getAuthToken (
            account.account,
            ApiConst.DRIVE_AUTH_SCOPE,
            options,
            this,
            new OnTokenAcquired(),
            null); 
```

OnTokenAcquired 是一个实现 AccountManagerCallback 的类。在其运行方法中，您将获得令牌。

# c - 将字符串拆分为一定大小的 char 数组

> ID：13048917
> 
> 赞同：0
> 
> 时间：2012-10-24T12:08:33.400
> 
> 标签：c, string

我是 c 编程的新手，所以我不理解为这个过程工作。

我有一个定义如下方式的结构。

```
struct codons
{
    char amino_acid[20], slc[20], dna_codon[40];
};

struct codons c1 = {"Isoleucine", "I", "ATT, ATC, ATA"};
struct codons c2 = {"Leucine", "L", "CTT, CTC, CTA, CTG, TTA, TTG"}; 
```

用户必须输入字符串序列。例如 ：

```
printf("Enter the sentence: ");
gets(str); 
```

如果用户输入如下字符串：

```
ATTCTGCTTTTA 
```

然后我必须将此字符串转换为 3char 长度的字符串，例如

```
ATT, CTG, CTT, etc. 
```

然后，我必须检查这个由 3 个字符组成的短字符串是否存在于 not 的结构中。

我不知道如何将字符串转换为 3char 字符串长度并进行检查。
谁能给我一些建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:18:08.137

要获取字符串的前 3 个字符，只需分配一个该大小的缓冲区并将这些字符放在那里：

```
char substring[4];
strncpy(substring, input, 3);
char substring[3] = '\0'; 
```

然后使用 strstr 检查字符串 "possibilities" 是否包含子字符串：

```
if (strstr(possibilities, substring) != NULL)
    // ... 
```

（您没有像评论所说的那样发布结构定义，所以我不能更准确地了解“可能性”的真实名称）

如果你想继续，只需做一些指针运算并重复所有过程：

```
strncpy(substring, input + 3, 3)
// and so on... 
```

（哈哈，我读过“避孕套”）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:31:41.200

您可以执行以下操作：

```
char* input_string = ...;

//check if user entered string that could be divided into 3 letters substrings
if (strlen(input_string) % 3 != 0)
  return;

while (*input_string != '\0')
{
   char string_3l[4] = {'\0'};
   strncpy(string_3l, input_string, 3);

   //check if string_3l is part of structure 
   if ((strstr(string_3l, c1.dna_codon) != NULL) || 
               (strstr(string_3l, c2.dna_codon) != NULL))
   {
        //YOU HAVE MATCH!
   }

   input_string += 3;
} 
```

当然，您应该同时检查 c1 和 c2 结构。

# jquery - 如何通过 jQuery 获取标签最多的 div

> ID：13048919
> 
> 赞同：3
> 
> 时间：2012-10-24T12:08:54.880
> 
> 标签：jquery, html

我想通过 jQuery 搜索我的 HTML 代码以获取具有最多 HTML 标签的 div。在下面的示例中，jQuery 应该返回 #div2，因为它在其中包含 4 个 div。

```
<div id="div1">
    <div>content</div>
    <div>content</div>
    <div>content</div>
</div>
<div id="div2">
    <div>content</div>
    <div>content</div>
    <div>content</div>
    <div>content</div>
</div>
<div id="div3">
    <div>content</div>
    <div>content</div>
</div> 
```

对不起，如果这个例子有点模棱两可——我认为不需要一个非常具体的代码块。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T12:12:36.860

你可以通过`iterating through each div`and来做到这一点`keeping the div with maximum childs`，

**[现场演示](http://jsfiddle.net/WhXK8/)**

```
maxChild = 0;
maxChildDiv = null;

$('div').each(function(){
    currentChildCount = $(this).children().length 
    if(currentChildCount > maxChild ) 
    {
        maxChild = currentChildCount ;
        maxChildDiv = $(this);
    } 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:35:39.567

```
var maxDiv = $('div').get().reduce(function(child1, child2) {
  return $(child1).children().length > $(child2).children().length ? child1 : child2;
});
alert(maxDiv.id); 
```

该`reduce`方法是[ECMAScript 5 的一部分，](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)因此受到现代浏览器的支持（更有效）。如果原型不存在，您可以添加`reduce`到原型中，如该链接中所述。`Array`

演示[在这里](http://jsfiddle.net/sje397/KbsYe/16/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T12:23:40.527

这对我有用：-

```
<html>
    <head>
        <title>test</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>

$(document).ready(function() {
    max = 0;
    divid = null;

    $('div').each(function() {
        if($(this).children().length > max) {
            max = $(this).children().length;
            divid = $(this).attr('id');
        } 
    });

    alert (divid);
});

        </script>
    </head>
    <body>
        <div id="div1">
            <div>content</div>
            <div>content</div>
            <div>content</div>
        </div>
        <div id="div2">
            <div>content</div>
            <div>content</div>
            <div>content</div>
            <div>content</div>
        </div>
        <div id="div3">
            <div>content</div>
            <div>content</div>
        </div>
    </body>
</html> 
```

# c# - 在线程之间的 Invoke() 上检测到 CallbackOnCollectedDelegate

> ID：13048926
> 
> 赞同：1
> 
> 时间：2012-10-24T12:09:14.193
> 
> 标签：c#, multithreading, delegates, invoke

我已经阅读了类似问题的解决方案，但我无法让它们在我的情况下工作。在 Visual Studio 2010 中运行的 C# .NET 4.0 项目中出现以下错误：

> 检测到 CallbackOnCollectedDelegate 消息：对类型为“VLCMTest!VLCMTest.Data+VCECLB_GrabFrame_CallbackEx::Invoke”的垃圾收集委托进行了回调。这可能会导致应用程序崩溃、损坏和数据丢失。将委托传递给非托管代码时，托管应用程序必须使它们保持活动状态，直到保证它们永远不会被调用。

这是我的情况：我有一个后台线程，当收集到一帧数据时会收到通知。

```
protected AutoResetEvent frameGrabbed;
public event EventHandler<DataFrameInfo> FrameGrabbedEvent;

    private void DataCollectionThread()
    {
        while (true)
        {
            frameGrabbed.WaitOne();

            lock (locker)
            {
                FrameGrabbedEvent(this, new DataFrameInfo(lastFrame.BufferIndex, lastFrame.FrameNumber, lastFrame.FrameTimestamp));
            }
        }
    } 
```

DataFrameInfo 类存储有关帧的一些信息（帧缓冲区的索引、帧号和时间戳）。我创建了这个类的一个实例并将其传递给主线程，以便显示数据。主线程中的代码如下所示：

```
 // Delegate for the Invoke call, 
    // make it static to prevent a problem with garbage collection
    delegate void GetFrameDelegate(DataFrameInfo frameInfo);
    private static GetFrameDelegate d;

    /// <summary>
    /// Did we just receive a frame?
    /// </summary>
    /// <param name="source"></param>
    /// <param name="args"></param>
    void frameGrabbed(object source, DataFrameInfo args)
    {
        if (this.InvokeRequired)
        {
            // It's on a different thread, so use Invoke.
            d = new GetFrameDelegate(GetFrame);
            this.Invoke(d, new object[] { args });
            return;
        }

        // Get the Frame
        GetFrame(args);
    }

    private void GetFrame(DataFrameInfo frameInfo)
    {
        // Call Display Frame
        Debug.WriteLine("Frame: The bufferIndex is " + frameInfo.BufferIndex);
        Debug.WriteLine("Frame: The number is " + frameInfo.FrameNumber);
        Debug.WriteLine("Frame: The timestamp is " + frameInfo.FrameTimestamp / 1000);
    } 
```

FrameGrabbedEvent 连接到 frameGrabbed() 函数。由于 frameGrabbed() 是从另一个线程调用的，因此应该需要 Invoke。那么现在，我只是想在显示数据之前转储框架细节。

有趣的是，该程序将运行一段时间。一旦我在桌面上移动程序的主窗口，错误几乎立即出现。我必须更改足够的时间，以使对象在使用之前得到垃圾收集。似乎大多数建议的解决方案是使委托静态，但这对我不起作用。

**更新**

听起来我错过了一些相关的代码。下面是导致 frameGrabbed 事件的代码。本质上，它是一个由我正在使用的 DLL 调用的中断处理程序。

我声明如下：

```
// Function pointer used by StartGrabEx
public delegate void GrabFrame_CallbackEx(IntPtr userData, ref FrameInfoEx frameInfo); 
```

然后我开始数据收集：

```
 public void Start()
    {

        // Start grabbing frames
        isGrabRunning = true;
        GrabFrame_CallbackEx callback = new GrabFrame_CallbackEx(GrabCallback);
        StartGrabEx(callback);
    } 
```

GrabCallback 函数如下所示：

```
 FrameInfo lastFrame;

    private void GrabCallback(IntPtr userData, ref FrameInfoEx frameInfo)
    {
        // Are we grabbing frames?
        if (!isGrabRunning)
        {
            return;
        }

        lock (locker)
        {
            lastFrame = new DataFrameInfo(bufferIndex, frameInfo.number, frameInfo.timestamp);
        }

        // We've captured a frame, notify the DataCollectionThread
        frameGrabbed.Set();
    } 
```

查看此更新，问题可能出在 lastFrame 上，尽管我认为我更改了代码以更新 GrabCallback 中的 lastFrame（而不是使用 new），但仍然失败。

**更新#2**

也许我还应该提到 DataCollectionThread 是这样声明的：

```
DataCollectionThread = new Thread(DataCollectionThread );
DataCollectionThread .Name = "DataCollectionThread ";
DataCollectionThread .IsBackground = true;
DataCollectionThread .Start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:44:46.103

正如 Hans Passant 所说，问题出在 Start() 方法中的回调变量上。我将其更改为以下内容：

```
private GrabFrame_CallbackEx callback;

public void Start()
{

    // Start grabbing frames
    isGrabRunning = true;
    callback = new GrabFrame_CallbackEx(GrabCallback);
    StartGrabEx(callback);
} 
```

现在一切正常！

# java - JTable 未在 ActionEvent 中显示

> ID：13048928
> 
> 赞同：2
> 
> 时间：2012-10-24T12:09:17.513
> 
> 标签：java, swing, oracle11g, jtable, defaulttablemodel

我打算在我在本课程中创建的 JTable 中显示学生成绩。我的意图是在表单加载时有一个空表，在输入一些参数时有一个空表，查询数据库并将结果显示在 JTable 中。Empty 表正在显示，但在 Button Click 处没有发生任何事情。也不例外。它只是保持为空。这是我的代码...（部分）

```
public class ClassExamResults extends JInternalFrame implements ActionListener {

private JPanel jpCer = new JPanel();
private DefaultTableModel dtmCustomer;
private JTable tbCustomer;
private JScrollPane jspTable;
static Vector<Vector<String>> data = new Vector<Vector<String>>();

ClassExamResults() {
    super("Class Exam Results", false, true, false, true);
    setSize(1350, 620);
    jpCer.setBounds(10, 0, 500, 150);
    jpCer.setLayout(null);
    jpCer.setBackground(Color.LIGHT_GRAY);

    //Define table
    tbCustomer = makeTable();
    jspTable = new JScrollPane(tbCustomer);
    jspTable.setBounds(170, 20, 1150, 550);

    jpCer.add(jspTable);

    getContentPane().add(jpCer);
    setVisible(true);

}

private JTable makeTable() {
    //String Type Array use to Give Table Column Names.
    Vector<String> headers = new Vector<String>();

    headers.add("ADMIS. NO.");
    headers.add("NAME");
    headers.add("EXAM");
    headers.add("MATHS");
    headers.add("ENG.");
    headers.add("KISWA.");
    headers.add("PHYC.");
    headers.add("CHEM");
    headers.add("BIO");
    headers.add("HISTO.");
    headers.add("GEOG.");
    headers.add("CRE");
    headers.add("COMP.");
    headers.add("HOME SC.");
    headers.add("BUSIN");
    headers.add("AGRIC.");
    headers.add("TOTAL");
    headers.add("AVERAGE");
    headers.add("POS.");

    dtmCustomer = new DefaultTableModel(data, headers);
    tbCustomer = new JTable(dtmCustomer) {
        public boolean isCellEditable(int iRow, int iCol) {
            return false;   //Disable All Columns of Table.
        }
    };
    tbCustomer.setRowHeight(25);
    tbCustomer.setBackground(new java.awt.Color(89, 151, 207));
    tbCustomer.setForeground(Color.BLACK);
    tbCustomer.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

    return tbCustomer;
}

public void actionPerformed(ActionEvent ae) {
    Object obj = ae.getSource();
    if (obj == btnFind) {
        if (level.equalsIgnoreCase("SELECT")) {
            JOptionPane.showMessageDialog(this, "Please Select Exam Level",
                    "Error", JOptionPane.ERROR_MESSAGE);
            cboLevel.requestFocus();
        } else if (year.equalsIgnoreCase("SELECT")) {
            JOptionPane.showMessageDialog(this, "Please Select Exam Academic year",
                    "Error", JOptionPane.ERROR_MESSAGE);
            cboYear.requestFocus();
        } else {
            Connection conn = null;
            Vector<String> headers = new Vector<String>();
            try {
                Class.forName("oracle.jdbc.driver.OracleDriver");
                conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "USERNAME", "PASSWORD");
                Statement st = conn.createStatement();
                String results = "select stu_number as ADMISSION_NUMBER, "
                        + " max(stu_name) STUDENT_NAME, "
                        + "ex_name as EXAM_NAME, "
                        + "max(case when ex_subject = 'MATHEMATICS' then stu_score else 0 end) as MATHEMATICS, "
                        + " max(case when ex_subject = 'ENGLISH' then stu_score else 0 end) as ENGLISH, "
                        + " max(case when ex_subject = 'KISWAHILI' then stu_score else 0 end) as KISWAHILI, "
                        + " max(case when ex_subject = 'PHYSICS' then stu_score else 0 end) as PHYSICS, "
                        + "  max(case when ex_subject = 'CHEMISTRY' then stu_score else 0 end) as CHEMISTRY, "
                        + " max(case when ex_subject = 'BIOLOGY' then stu_score else 0 end) as BIOLOGY, "
                        + "max(case when ex_subject = 'HISTORY' then stu_score else 0 end) as HISTORY, "
                        + " max(case when ex_subject = 'GEOGRAPHY' then stu_score else 0 end) as GEOGRAPHY, "
                        + " max(case when ex_subject = 'CRE' then stu_score else 0 end) as CRE, "
                        + " max(case when ex_subject = 'COMPUTER' then stu_score else 0 end) as COMPUTER, "
                        + " max(case when ex_subject = 'HOME SCIENCE' then stu_score else 0 end) as HOME_SCIENCE, "
                        + "  max(case when ex_subject = 'BUSINESS' then stu_score else 0 end) as BUSINESS, "
                        + "  max(case when ex_subject = 'AGRICULTURE' then stu_score else 0 end) as AGRICULTURE, "
                        + " sum(stu_score) as TOTAL_MARKS, "
                        + "  sum(stu_score)/count(stu_score) as AVERAGE, "
                        + " rank () over (order by sum(stu_score)desc)  as POSITION  "
                        + "from EXAMS_MASTER_REGISTER "
                        + "where stu_level = '" + level + "' and "
                        + " stu_stream = '" + stream + "' and "
                        + " ex_semester = '" + semester + "' and "
                        + " ex_name = '" + exam + "' and "
                        + "  academic_year = '" + year + "' "
                        + "group by stu_number, ex_name "
                        + "order by sum(stu_score) desc";
                ResultSet rs = st.executeQuery(results);
                while (rs.next()) {
                    Vector<String> d = new Vector<String>();

                    d.add(rs.getString("ADMISSION_NUMBER"));
                    d.add(rs.getString("STUDENT_NAME"));
                    d.add(rs.getString("EXAM_NAME"));
                    d.add(rs.getString("MATHEMATICS"));
                    d.add(rs.getString("ENGLISH"));
                    d.add(rs.getString("KISWAHILI"));
                    d.add(rs.getString("PHYSICS"));
                    d.add(rs.getString("CHEMISTRY"));
                    d.add(rs.getString("BIOLOGY"));
                    d.add(rs.getString("HISTORY"));
                    d.add(rs.getString("GEOGRAPHY"));
                    d.add(rs.getString("CRE"));
                    d.add(rs.getString("COMPUTER"));
                    d.add(rs.getString("HOME_SCIENCE"));
                    d.add(rs.getString("BUSINESS"));
                    d.add(rs.getString("AGRICULTURE"));
                    System.out.println(rs.getString("STUDENT_NAME"));

                    data.add(d);

                }

            } catch (Exception db) {
                JOptionPane.showMessageDialog(this, db,
                        "Error", JOptionPane.ERROR_MESSAGE);
            }

        }
    }
}
} 
```

我知道查询执行是因为；System.out.println(rs.getString("STUDENT_NAME")); 返回正确的值。我还尝试从 toad 运行查询，它显示了正确的结果。我的错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T12:16:08.853

1.  直接放一个新的记录`DefaultTableModel dtmCustomer;`，`DefaultTableModel`不知道你将数据填充到底层`Vector of Vector`，或者你必须调用[DefaultTableModel#setDataVector](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#setDataVector%28java.util.Vector,%20java.util.Vector%29)

2.  您忘记在任何进一步步骤之前重置[TableModel#setDataVector(null)](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html)，在这种情况下，您将在末尾添加一个新行`JTable`

3.  JDBC 被调用`Event Dispatch Thread`，然后 Swing GUI 将被冻结直到结束，使用`Resultset`一些`Workers Thread`，`Runnable#Thread`或`SwingWorker``JDBC`

编辑

*   [反对通过@camickr 重新发明轮子](http://tips4java.wordpress.com/2009/03/12/table-from-database/)

# jsf - 如何与 h:commandButton 一起传递参数

> ID：13048930
> 
> 赞同：15
> 
> 时间：2012-10-24T12:09:22.747
> 
> 标签：jsf, jsf-2, seam, parameter-passing

在 JSF+Seam 中更改语言环境的最常见方法之一 - 使用`<h:selectOneMenu>`：

```
<h:form  action="#{localeSelector.select}" rendered="false">
    <h:selectOneMenu value="#{localeSelector.language}" onchange="submit()">
        <f:selectItem itemLabel="English" itemValue="en" />
        <f:selectItem itemLabel="Francais" itemValue="fr" />
    </h:selectOneMenu>
</h:form> 
```

我想用按钮实现语言环境更改。所以，问题是 - 如何传递参数（en、fr 等）来更新 bean `<h:commandButton>`？也许`<h:inputHidden>`会有帮助？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-24T12:31:07.253

要么作为方法参数传递（仅当您的环境支持 EL 2.2 时），

```
<h:commandButton value="English" action="#{localeSelector.change('en')}" />
<h:commandButton value="Deutsch" action="#{localeSelector.change('de')}" />
<h:commandButton value="Français" action="#{localeSelector.change('fr')}" /> 
```

和

```
public void change(String language) {
    locale = new Locale(language);
    // ...
} 
```

* * *

或使用`<f:setPropertyActionListener>`

```
<h:commandButton value="English" action="#{localeSelector.change}">
    <f:setPropertyActionListener target="#{localeSelector.language}" value="en" />
</h:commandButton>
<h:commandButton value="Deutsch" action="#{localeSelector.change}">
    <f:setPropertyActionListener target="#{localeSelector.language}" value="de" />
</h:commandButton>
<h:commandButton value="Français" action="#{localeSelector.change}">
    <f:setPropertyActionListener target="#{localeSelector.language}" value="fr" />
</h:commandButton> 
```

和

```
private String language;

public void change() {
    locale = new Locale(language);
    // ...
} 
```

* * *

或使用`<f:param>`

```
<h:commandButton value="English" action="#{localeSelector.change}">
    <f:param name="language" value="en" />
</h:commandButton>
<h:commandButton value="Deutsch" action="#{localeSelector.change}">
    <f:param name="language" value="de" />
</h:commandButton>
<h:commandButton value="Français" action="#{localeSelector.change}">
    <f:param name="language" value="fr" />
</h:commandButton> 
```

和

```
public void change() {
    locale = new Locale(FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("language"));
    // ...
} 
```

*（您也可以让 JSF 通过 a 自动设置它`@ManagedProperty("#{param.language}")`，但这需要 bean 是请求范围的，或者 a `<f:viewParam>`，另请参见[ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id/4889226#4889226)）*

* * *

将参数从视图传递到控制器的足够方法。任你选。在`<h:inputHidden>`JSF 上下文中，它的用途有些不同，它只能由 JavaScript 操作，`onclick`这很丑陋。

# c# - 如何仅在客户端应用程序中使用 SynchronizationContext

> ID：13048931
> 
> 赞同：0
> 
> 时间：2012-10-24T12:09:26.657
> 
> 标签：c#, asp.net, synchronizationcontext

在我的库中，我使用[SynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)使我能够轻松地在 GUI 线程上引发事件，无论该库是在 Windows 窗体还是 WPF 应用程序中使用。如果我的类是在后台线程上创建的，则 SynchronizationContext 为空，因此我直接引发事件。

例如：

```
 private void RaisePlaybackStoppedEvent()
    {
        EventHandler handler = PlaybackStopped;
        if (handler != null)
        {
            if (this.syncContext == null)
            {
                handler(this, EventArgs.Empty);
            }
            else
            {
                this.syncContext.Post(state => handler(this, EventArgs.Empty), null);
            }
        }
    } 
```

这工作正常，除了我有用户报告它在 ASP.NET 应用程序中出错：

```
System.NullReferenceException was unhandled
  Message=Object reference not set to an instance of an object.
  Source=System.Web
  StackTrace:
       at System.Web.HttpApplication.ThreadContext.Enter(Boolean setImpersonationContext)
       at System.Web.HttpApplication.OnThreadEnterPrivate(Boolean setImpersonationContext)
       at System.Web.AspNetSynchronizationContext.CallCallbackPossiblyUnderLock(SendOrPostCallback callback, Object state)
       at System.Web.AspNetSynchronizationContext.CallCallback(SendOrPostCallback callback, Object state)
       at System.Web.AspNetSynchronizationContext.Post(SendOrPostCallback callback, Object state) 
```

我曾假设这`SynchronizationContext`在 ASP.NET 网站中为空。如果 SynchronizationContext 是 AspNetSynchronizationContext 的一个实例，我需要一种不使用它的方法，尽管这样做会很麻烦，因为我没有引用 System.Web，而且它也不是公开可见的类型。

我的问题是，确定我是否在具有 GUI（例如 WinForms、WPF、WinRT）的应用程序中并且仅在该设置中使用 SynchronizationContext 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:17:55.080

这看起来像 ASP.NET 中的一个错误：如果在`AspNetSynchronizationContext`相应请求完成后使用 ，`HttpApplication`则清除其`_context`字段。然后它将这个 null 引用传递给`ThreadContext`构造函数，并且`ThreadContext`类上的方法尝试访问该字段的成员，从而导致`NullReferenceException`.

我知道他们在 4.5 中对该区域进行了一些更改，因此它可能已经修复。如果没有，可能值得[在 Connect 上报告](https://connect.microsoft.com/VisualStudio/feedback/)。

作为一种解决方法，您可以尝试检查 current 的类型名称`SynchronizationContext`：

```
var context = SynchronizationContext.Current;
if (null != context && "AspNetSynchronizationContext" == context.GetType().Name)
{
   context = null;
}

this.syncContext = context; 
```

# ios - 如何防止 UITextView 在键盘显示上向上移动

> ID：13048933
> 
> 赞同：0
> 
> 时间：2012-10-24T12:09:31.323
> 
> 标签：ios

我有一个`UITableViewController`和`UITextView`在其中一个单元格中。当用户点击`UITextView`所有表格时，表格向上移动`tableView.frame.origin.y = -88`。据我所知，`UITableViewController`迫使桌子向上移动。有没有办法防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:41:09.460

您不能在 UITableViewController 上禁用自动滚动。最好的办法可能是使用 UIViewController 作为表视图的委托和数据源。检查这个答案。

[iOS：当键盘出现时禁用 UITableView 动画](https://stackoverflow.com/questions/10040508/ios-disable-uitableview-animation-when-keyboard-shows-up)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:41:50.747

只需使用 a`UIViewController`而不是`UITableViewController`- 并确保它符合`UITableViewDelegate`和`UITableViewDatasource`协议。

# datagrid - Dojo Datagrid“发生抱歉错误”问题

> ID：13048938
> 
> 赞同：1
> 
> 时间：2012-10-24T12:09:44.660
> 
> 标签：datagrid, dojo

我的 WCF 服务返回

```
{"Success":true,"Errors":null,"ActivityTypes":[{"id":1,"label":"Input"},{"id":2,"label":"Processing"},{"id":3,"label":"Exception Handling"},{"id":4,"label":"Quality Control"},{"id":5,"label":"Output"}]} 
```

下面是我用来将其放入 Datagrid 的代码

```
dojo.require("dojox.grid.DataGrid");
dojo.require("dojo.data.ItemFileReadStore");
var xhrArgs = {
    url: xhreturn,
    handleAs: "json",
    preventCache: true
}
var deferred = dojo.xhrGet(xhrArgs);
deferred.then(
          function (data) {
              if (data.Success) {
                  rawdata = [data.GetActivityTypeList];
                  var store = new dojo.data.ItemFileReadStore({
                      data: { identifier: 'id', items: rawdata }
                  });
                  var layout = [[                      
                    { 'name': 'Activity Type', 'field': 'label', 'width': '20%' }
                ]];

                  var grid = new dojox.grid.DataGrid({
                      id: 'grid',
                      store: store,
                      structure: layout,
                      rowSelector: '5px'
                  },document.createElement('div'));

                  dojo.byId("gridDiv").appendChild(grid.domNode);
                  grid.startup();
                  standby.hide();
              } 
```

我试图让 ActivityTypes 返回的值显示在数据网格中。我不断收到“抱歉发生错误！” 而不是数据网格渲染。我换了

```
rawdata = [data.GetActivityTypeList]; 
```

有了这个

```
rawdata = [{ "id": 1, "label": "Input" }, { "id": 2, "label": "Processing" }, { "id": 3, "label": "Exception Handling" }, { "id": 4, "label": "Quality Control" }, { "id": 5, "label": "Output"}]; 
```

并且数据网格可以正常工作！任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:08:26.620

## Issue Resolved. Revised Code

`enter code here`if (data.Success) {
var store = new dojo.data.ItemFileReadStore({ data: { items: data.ActivityTypes} }); var layout = [[ { 'name': 'ID', 'field': 'id', 'width': '20%' }, { 'name': 'Activity Type', 'field': 'label', 'width': '80%' }

## ]];

Key was to pass data in ActivityTypes directly to the store.

# jsp - 使用 ServletFileUpload 的 parseRequest 上传文件？

> ID：13048939
> 
> 赞同：8
> 
> 时间：2012-10-24T12:09:45.643
> 
> 标签：jsp, servlets, file-upload, apache-commons-fileupload

我上传了我`input type="file"`在我的网络应用程序中浏览的文件。问题是我得到的`FileItem`列表大小为 0 虽然我可以在下面看到所有上传的文件信息

`request`-> `JakartaMutltiPartRequest`-> 文件属性

这是读取文件的java代码

```
public InputStream parseRequestStreamWithApache(HttpServletRequest request)
  throws FileUploadException, IOException {
  InputStream is = null;
  FileItemFactory factory = new DiskFileItemFactory();
  ServletFileUpload upload = new ServletFileUpload(factory);
  List items = upload.parseRequest(request);
  // here the item size is 0 ,i am not sure why i am not getting my file upload in browser with type="file"
  // but If inspect request in debugger i can see my file realted info in request--->JakartaMutltiPartRequest----->files attribute
  Iterator iter = items.iterator();
  while (iter.hasNext()) {
    FileItem item = (FileItem) iter.next();

    if (!item.isFormField()) {
      is = item.getInputStream();
    }
  }

  return is;
} 
```

**编辑：**

**这是JSP部分：**

```
<form NAME="form1" action="customer/customerManager!parseRequestStreamWithApache.action" ENCTYPE="multipart/form-data"   method="post" >
     <TABLE >
         <tr>
              <th>Upload File</th>
                  <td>
                   <input name="fileUploadAttr" id="filePath"  type="file" value="">
                 </td>
                  <td > 
                 <Input type="submit" value ="uploadFile"/>
                  </td>
          </tr>
    </TABLE>
</form> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T12:16:08.330

正如我在对同一个问题的评论中所说，您之前发布过，这很可能是因为您之前已经解析过请求。这些文件是请求正文的一部分，您只能解析一次。

**更新：**

我通常会以这种方式使用 commons-upload：

```
if (ServletFileUpload.isMultipartContent(request)) {
    ServletFileUpload fileUpload = new ServletFileUpload();
    FileItemIterator items = fileUpload.getItemIterator(request);
    // iterate items
    while (items.hasNext()) {
        FileItemStream item = items.next();
        if (!item.isFormField()) {
            is = item.openStream();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T12:23:15.060

您应该检查多部分内容

```
boolean isMultipart = ServletFileUpload.isMultipartContent(request);

if (isMultipart) {
    FileItemFactory factory = new DiskFileItemFactory();
    ServletFileUpload upload = new ServletFileUpload(factory);

    try {
        List items = upload.parseRequest(request);
        Iterator iterator = items.iterator();
        while (iterator.hasNext()) {
            FileItem item = (FileItem) iterator.next();
            if (!item.isFormField()) {
                String fileName = item.getName();

                String root = getServletContext().getRealPath("/");
                File path = new File(root + "/fileuploads");
                if (!path.exists()) {
                    boolean status = path.mkdirs();
                }

                File uploadedFile = new File(path + "/" + fileName);
                item.write(uploadedFile);
            }
        }
    } catch (Exception e) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:18:51.997

你上传的文件有多大？您可能超过了默认阈值。我认为默认是10K

```
factory.setSizeThreshold(maxSizeYouWantToHandle); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-14T18:13:16.810

如果您使用的是 weblogic 12，请检查 patch_wls1211 是否已安装。我遇到了同样的问题，并在应用 patch_wls1211 后解决了。

# iis - 在默认网站上添加应用程序错误（IIS 7.5，Windows server 2008R2）

> ID：13048940
> 
> 赞同：3
> 
> 时间：2012-10-24T12:09:47.087
> 
> 标签：iis

我正在尝试在 IIS 7.5 Windows Server 2008 R2 上将 .net 应用程序添加到我的默认网站。默认网站当前提供 ASP 经典页面（不确定是否相关），我正在尝试设置一些 aspx 页面。但我什至无法添加新应用程序，我不断收到错误消息

`"value does not fall within range"`

我不懂这啥意思？

请查看我的截图了解更多信息：http: [//i.imgur.com/nsUs5.png](http://i.imgur.com/nsUs5.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:02:27.563

好吧，除了将应用程序创建为 ASP 经典（这将允许我也这样做）然后将 AppPool 切换到 DefaultAppPool 之外，我从来没有找到解决方案，这反过来又让我可以服务器 ASPX 页面。

所以，暂时解决了...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:48:29.133

虽然很繁琐，但您可以尝试检查 apphost 配置文件中的设置。您可以在 C:\Windows\System32\inetsrv\config 中找到它 查找名称中的错误，有时空格可以由 Visual Studio 替换为 %20% 应该被删除，如果您在文件系统中手动删除了某些内容，这不会在 applicationhost 配置文件中更新，因此也需要手动删除任何引用。

问候，祝你好运

# javascript - CSS画布宽度和高度设置

> ID：13048948
> 
> 赞同：-2
> 
> 时间：2012-10-24T12:10:44.567
> 
> 标签：javascript, css

我正在使用 javascript 创建画布元素，例如

```
Can=document.createElement("canvas"); 
```

然后我想以厘米为单位设置这个元素的宽度。我在做

```
Can.style.width="8cm";
Can.style.height="5cm"; 
```

我正在设置其他 css 属性，例如，

```
Can.style.cssText = 'position:relative; top:24px; left:28px; border-radius:30px; float:left; cursor:pointer; box-shadow: 0px 0px 2px 2px black; background-color:#cdcdcd'; 
```

但它没有被设置。有什么问题？这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:02:35.530

您需要以像素为单位指定画布大小。然后，您可以使用`cm`单位来缩放画布。

```
canvas.width = 500; // px
canvas.height = 300; // px

canvas.style.width = '5cm';
canvas.style.height = '3cm'; 
```

画布中的像素数必须明确/绝对定义。厘米是一个相对值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T12:15:17.870

采用：

```
Can.width = "5px";
Can.height = "5px"; 
```

厘米不推荐

# python - 使用 Python 的 NetDisturb

> ID：13048950
> 
> 赞同：0
> 
> 时间：2012-10-24T12:10:46.620
> 
> 标签：python, sockets, networking

我正在尝试用 Python 开发一个脚本，它的功能类似于 NetDisturb 实用程序。你们中的一些人可能会问，如果有现成的实用程序，我为什么要这样做，但问题是我想将它集成到网页中。使用这个网页，我可以访问一组我已经知道或存在于后端脚本中的特定接口，并最终降低性能或简单地阻止数据包。

我已经成功了一点，但现在我想在要连接的两个接口之间实现一个套接字连接。我无法使用套接字连接进行全双工通信。我无法决定哪个接口应该作为主接口，哪个接口应该作为从接口。因为当我将其中一个接口设置为 master 时，`listen`and`accept`语句会阻止代码的进一步执行。

使用`SOCK_DGRAM`套接字而不是`SOCK_STREAM`帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:25:36.763

您必须使用非阻塞套接字。[这](http://docs.python.org/2/howto/sockets.html#non-blocking-sockets) 是一个解释如何使用`select`处理非阻塞套接字（对于初学者我真的可以推荐完整的文章，这是一个好的开始）。替代方案将是多线程架构或[`asynchore`](http://docs.python.org/2/library/asyncore.html). 如果您还想要一个 GUI，我可以推荐`pygtk`界面和`glib.io_add_watch`处理套接字。

但总的来说，我会推荐一些高级框架，如[zeromq](http://www.zeromq.org/)。第二个高级替代方案是 Twisted，但它有一个非 Python 式的 Java 类 API，并且（IMO）文档记录很差。

# mysql - 我需要加快大表上的特定 mysql 查询

> ID：13048951
> 
> 赞同：3
> 
> 时间：2012-10-24T12:10:51.103
> 
> 标签：mysql, performance, select-query

嗨，我知道有很多主题专门用于查询优化策略，但是这个主题太具体了，我无法在 Internet 上的任何地方找到答案。

我在 eshop 中有很大的产品表（大约 180k 行），该表有 65 列。是的，是的，我知道很多，但我在那里存储有关书籍、dvd、蓝光和游戏的信息。

我仍然没有考虑在查询中使用很多列，但是选择仍然很棘手。有很多条件需要考虑和比较。下方查询

```
SELECT *
FROM products
WHERE production = 1 
AND publish_on < '2012-10-23 11:10:06' 
AND publish_off > '2012-10-23 11:10:06' 
AND price_vat > '0.5' 
AND ean <> ''
AND publisher LIKE '%Johnny Cash%'
ORDER BY bought DESC, datec DESC, quantity_storage1 DESC, quantity_storege2 DESC, quantity_storage3 DESC
LIMIT 0, 20 
```

我已经尝试在 where 子句中的 cols 甚至按子句的 order by 子句中一一放置索引，然后我尝试在 (production, publish_on, publish_off, price_vat, ean) 上创建复合索引。

查询仍然很慢（几秒钟），它需要很快，因为它的 eshop 解决方案和人们因为没有快速得到结果而离开。而且我仍然没有计算需要执行搜索所有找到的行以便进行分页的时间。

我的意思是，让它快速的最好方法是简化查询，但在这种情况下，所有的条件和排序都是必须的。

任何人都可以帮助解决此类问题吗？是否有可能加快这种查询速度，或者有没有其他方法可以简化查询并将其余部分留在 php 引擎上对结果进行排序。

哦，我真的对此一无所知..请分享您的智慧...

提前谢谢了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T12:23:32.070

首先确定你要选择什么并删除'*'

```
Select * from 
```

有更具体的东西

```
Select id, name, .... 
```

您的表中没有加入或其他任何内容，因此我认为加速选项非常小。

1.  检查您的 mysql 服务器是否可以使用足够的内存。在你的 my.cnf 中查看这个 confis

    *   key_buffer_size = 384M;
    *   myisam_sort_buffer_size = 64M;
    *   thread_cache_size = 8;
    *   query_cache_size = 64M
2.  看看最大允许并发。mysql推荐CPU的*2

    线程并发 = 4

3.  您应该真正考虑根据您使用的信息和标准规范化来拆分表格。如果可能的话。

4.  如果它是一个无法拆分表的高效系统，那么请考虑使用缓存服务器。但这只有在您有很多相同的重复查询时才会有所帮助。

这就是我对底层实现或系统一无所知时会做的事情。

编辑：使尽可能多的列可索引不一定会加快您的系统。索引越多≠速度越快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:53:25.417

谢谢大家的好评。。

我发现解决方案可能是因为我能够将查询时间从 2.8 秒减少到 0.3 秒。

解决方案：`SELECT *`在大表（65cols）上使用真的很天真，所以我意识到我只需要在页面上使用其中的 25 个 - 其他可以在产品页面本身上轻松使用。

我还稍微重新索引了我的表。我创建了复合索引

> 生产，publish_on，publish_off，price_vat，ean

然后我创建了另一个专门用于搜索，包括 cols

> 标题，出版商，作者

我做的最后一件事是使用查询

```
SELECT SQL_CALC_FOUND_ROWS ID, title, alias, url, type, preorder, subdescription,.... 
```

这使我可以使用更快地计算受影响的行

```
mysql_result(mysql_query("SELECT FOUND_ROWS()"), 0) 
```

在 mysql_query() 之后...但是我无法理解它如何更快，因为 EXPLAIN EXTENDED 表示查询没有使用任何索引，它仍然比计算单个查询中的行数快 0​​.5 秒。

它似乎工作得很好。如果没有 order by 子句，那将很快变得邪恶，但那是我没有影响的事情。

仍然需要检查我的服务器设置...

谢谢大家的帮助。。

# android - 位图可绘制（地图叠加项）在android中旋转后像素化

> ID：13048953
> 
> 赞同：1
> 
> 时间：2012-10-24T12:11:08.013
> 
> 标签：android, bitmap, drawable, itemizedoverlay

我正在尝试旋转覆盖可绘制对象以表示 Android 中的覆盖项。

我用这个：

```
Bitmap bmpOriginal = BitmapFactory.decodeResource(this.getResources(), R.drawable.map_pin);
        Bitmap targetBitmap = Bitmap.createBitmap((bmpOriginal.getWidth()),
                (bmpOriginal.getHeight()), 
                Bitmap.Config.ARGB_8888);

        Matrix matrix = new Matrix();       
        matrix.setRotate((float) lock.getDirection(),(float) (bmpOriginal.getWidth()/2),
                (float)(bmpOriginal.getHeight()/2));

        Canvas tempCanvas = new Canvas(targetBitmap); 
            tempCanvas.drawBitmap(bmpOriginal, matrix, null);
Drawable d = new BitmapDrawable(getResources(),targetBitmap);

            //overlayitem.setMarker(drawable);

    mapItemizedOverlay =
                    new MyItemizedOverlay<MyItemizedOverlayItem>(d, mapView); 
```

问题是图像质量变差。像素化发生。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:09:54.660

这段代码非常适合我

```
Bitmap bmpOriginal = BitmapFactory.decodeResource(this.getResources(), R.drawable.map_pin);
        Bitmap targetBitmap = Bitmap.createBitmap((bmpOriginal.getWidth()),
                (bmpOriginal.getHeight()), 
                Bitmap.Config.ARGB_8888);
        Paint p = new Paint();
        p.setAntiAlias(true);
        p.setDither(true);
        p.setFilterBitmap(true);

        Matrix matrix = new Matrix();       
        matrix.setRotate((float) lock.getDirection(),(float) (bmpOriginal.getWidth()/2),
                (float)(bmpOriginal.getHeight()/2));

        RectF rectF = new RectF(0, 0, bmpOriginal.getWidth(), bmpOriginal.getHeight());
        matrix.mapRect(rectF);

        targetBitmap = Bitmap.createBitmap((int)rectF.width(), (int)rectF.height(), Bitmap.Config.ARGB_8888);

        Canvas tempCanvas = new Canvas(targetBitmap); 
        tempCanvas.drawBitmap(bmpOriginal, matrix, p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:40:27.157

您可以尝试应用具有抗锯齿功能的绘画，但如果它与位图中的像素有关，则唯一的机会是过滤并且 android 有其限制。根据位图，您可能永远无法使其真正平滑，我确实尝试了很多，但从未找到任何可以让它真正完成的东西

```
public static Bitmap createScaledBitmap (Bitmap src, int dstWidth, int dstHeight, boolean filter) 
```

过滤器布尔值应该为真，这就是过滤afaik所能做的一切

```
void android.graphics.Canvas.drawBitmap(Bitmap bitmap, Rect src, RectF dst, Paint paint) 
```

在这里您可以应用绘画，您可以尝试在此绘画上进行设置，但抗锯齿将在位图的边缘起作用。着色器设置也可能适用于位图，但没有可以修复旋转不准确性的着色器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T17:54:10.187

添加以下内容： `Paint p = new Paint(); p.setAntiAlias(true); p.setDither(true); p.setFilterBitmap(true);`

将以下内容更改 `tempCanvas.drawBitmap(bmpOriginal, matrix, null);` 为： `tempCanvas.drawBitmap(bmpOriginal, matrix, p);`

# java - 如何使用 cURL 登录到 Spring Security 登录表单？

> ID：13048954
> 
> 赞同：23
> 
> 时间：2012-10-24T12:11:10.640
> 
> 标签：java, curl, spring-security

我正在开发一个 springMVC 项目，其中用户身份验证基于 spring 安全性。

这个想法是有一个移动（android）应用程序能够向后端发送某种数据。

因此，在着手进行 android 开发之前，我决定使用 cURL 模拟登录表单的情况。

我们网站的登录表格如下：

```
http://localhost:8080/app/user/login 
```

我使用以下命令：

```
curl -F 'username=admin&password=admin' http://localhost:8080/app/user/login 
```

但是我将获得登录页面，换句话说，我无法根据模拟情况通过用户身份验证。

只是要注意：对于每个请求，spring secure 将创建一个类似于以下内容的随机化令牌：

> 8863F732ADDE24CD167F4EF502A4333D

`cURL`我应该如何使用模拟情况（或`HTTPClient`）基于spring security传递登录表单

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-24T13:31:31.520

像这样使用`cURL`：

```
 curl -d j_username=admin -d j_password=admin -L http://localhost:8080/app/j_spring_security_check 
```

### CSRF

如果你得到类似的东西`Expected CSRF token not found. Has your session expired?`意味着 CSRF 令牌保护已启用。要使用 cURL 对其进行测试，您需要一个 cookie 和一个 CSRF 令牌本身。

以下命令会将所有 cookie 写入一个名为`cookie`并打印出 CSRF 令牌的文件。Spring Security 默认令牌参数名称是`_csrf`，如果您更改了它，那么您也需要更改`grep csrf`。

```
curl --cookie-jar cookie -L http://localhost:8080/app/j_spring_security_check  | grep csrf 
```

然后您可以执行下一个命令，该命令将传递文件中的所有 cookie。不要忘记替换`|your_token_value|`为上一个命令打印出的实际值（以及`_csrf`参数名称，如果您已更改它）。

```
curl --cookie cookie -d "j_username=admin&j_password=admin&_csrf=|your_token_value|" -L http://localhost:8080/app/j_spring_security_check 
```

### 从 Spring Security 3.x 到 4.x

请注意，在 Spring Security 4.x 中，`login-processing-url`从更改`/j_spring_security_check`为 POST`/login`的默认值、`username-parameter`从更改`j_username`为的默认值以及从更改为的`username`默认值。如果应用程序明确提供这些属性，则迁移不需要任何操作。`password-parameter``j_password``password`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T12:17:42.190

您应该配置 spring 以支持基本身份验证。然后将以下标头添加到您的请求中：

*   姓名：`Authorization`
*   价值：`base64(username:password)`

这意味着用户名和密码应该以`:`分隔符连接成一个字符串，然后使用转换进行`BASE64`转换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-20T19:03:16.853

根据投票最多的答案，我编写了以下脚本：

```
#!/usr/bin/env bash

curl --cookie-jar cookie -L http://localhost:PORT/secureDomain/secureURL

TOKEN=$( cat cookie | grep 'XSRF' | cut -f7 )

curl --cookie cookie -u admin:admin -d "_csrf=$TOKEN" -L http://localhost:PORT/secureDomain/secureURL 
```

适用于 Spring Security 4。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-25T03:44:40.750

该脚本适用于 Spring Boot 2.1.6 和 Spring Security 5.1.5：

```
# Obtain the CSRF token _plus_ the JSESSIONID cookie to go along with it.
export CSRF_TOKEN=$(curl -s -c cookies.txt -L http://localhost:8080/login | \
  grep -Eo "name=\"_csrf\" value=\"[0-9a-z-]+\"" | cut -d= -f3 | tr -d '"')

echo "Found csrf token: $CSRF_TOKEN"

# Login with the username and password, reading from (-b) and updating (-c) the cookie jar file.
curl -s -c cookies.txt -b cookies.txt -X POST \
     -F "username=admin" -F "password=password" -F "_csrf=$CSRF_TOKEN" http://localhost:8080/login

SESSION_ID=$(grep "JSESSIONID" cookies.txt | cut -f 7)
echo "Got session token: $SESSION_ID"

# Finally, execute authorized API action
curl -sL -b cookies.txt "http://localhost:8080/authorized/url" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-27T20:47:55.753

如果启用了 CSRF，您需要从每个请求的输出中捕获令牌值，以便在下一个请求中使用它。

```
BASEURL="http://localhost:8080/hac"
csrf=$(curl --silent --cookie-jar cookies.txt -L "$BASEURL/login.jsp" | egrep -o -m1 "[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}")
csrf=$(curl --silent --cookie cookies.txt --cookie-jar cookies.txt -L "$BASEURL/j_spring_security_check" --data "j_username=$USERNAME&j_password=$PASSWORD&_csrf=$csrf" | egrep -o -m1 "[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}" ) 
```

`$csrf`您可以以这种方式链接更多命令，每次更新值。

这适用于 Spring security 3。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-06T09:06:34.223

仅使用 -d 选项对我来说是不够的。我们的 Web 应用程序由 Tomcat 托管，位于 webapps/ROOT 文件夹中，并具有以下配置：

```
<form-login login-page="/login.jsp"
    authentication-success-handler-ref="appAuthenticationSuccessHandler"
    authentication-failure-handler-ref="appAuthenticationFailureHandler"
    username-parameter="j_username" 
    password-parameter="j_password" 
    login-processing-url="/j_spring_security_check"/>

<csrf disabled="true"/>

<headers>
    <frame-options policy="SAMEORIGIN"/>
</headers> 
```

下面的工作将 POST 请求发送到我们的 Web 应用程序（假设 Tomcat 正在侦听端口 8080）：

```
curl -i -H "Content-Type: application/x-www-form-urlencoded" -c cookies.txt -H "Origin: http://localhost:8080/" -d "j_username=USERNAME&j_password=PASSWORD" -X POST http://localhost:8080/j_spring_security_check
curl -i -d @JSON_FILE -H "Content-Type: application/json" -H "Origin: http://localhost:8080/" -b cookies.txt -X POST http://localhost:8080/URL 
```

将 USERNAME、PASSWORD、JSON_FILE 和 URL 替换为您自己的。

# google-app-engine - Vaadin 可以为我的 GWT Appengine 应用程序提供哪些好处？

> ID：13048957
> 
> 赞同：8
> 
> 时间：2012-10-24T12:11:26.443
> 
> 标签：google-app-engine, gwt, vaadin

Vaadin 网站上的 GWT 页面有点稀疏：[https ://vaadin.com/gwt](https://vaadin.com/gwt)

“只有好处，没有陷阱您将享受 GWT 中您喜欢的一切，并获得新颖的服务器端编程模型、组件、工具、主题和其他附加功能的额外好处。如果您不喜欢您所看到的，这很容易只要你坚持使用 com.google.* 包，就会返回。你可能最终会想开始使用 com.vaadin.* 包中的功能。但不用担心——Vaadin 框架也在同一自由 Apache 2.0 许可证”

我喜欢 Vaadin 网站上的一些外观和感觉，但我对“服务器端模型”感到紧张......如果可能的话，我宁愿让大部分代码在客户端运行，我正在检查 GWT为安全起见，再次调用 RPC（通常使用相同的 java 代码）。我不喜欢很多来回的想法。

考虑到我的担忧，是否值得深入研究 Vaadin？还是我停在这里？我可以在不忍受所有东西的情况下利用各种外观和感觉吗？任何其他关于杠杆作用的非直观答案将不胜感激。

更新：请不要回答比较 Vaadin 与 GWT 的问题，提供替代 UI 框架。

我还使用过 SmartGWT、GXT 和捆绑的 GWT 小部件等。还熟悉一些非常完整的小部件集，例如 DevExpress for .NET。我问这个问题的原因是因为 Vaadin 看起来真的很酷......我正在寻找这样的答案：不，不可能在不损害客户端的情况下从 Vaadin 提取 L&F，或者除了 L&F 的东西之外，还有很酷的验证东西等等等，你可以使用，然后也许有一些有用的证据来支持那个位置（尝试过并且失败了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T06:59:25.147

我只回答有关 L&F 的部分问题，即 GUI 和安全性。

1) `L&F` Vaadin 6.x 版本不支持独立使用小部件。您需要进入整个服务器端模型。

但是，从版本 7 开始，Vaadin 倾向于旋转 Widget 端以允许使用小部件，而不会像服务器端状态维护那样被迫使用前后 jsf。参考 - [https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/3U1h0W_iHcM](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/3U1h0W_iHcM)

2) `Security` GWT 端对 RPC 的 XSRF 特性提供了很好的支持，这将允许每个 RPC 调用或根据您选择的粒度选择性地生成 rpctoken。这可能是每个服务器端状态调用的 Vaadin 往返的性能开销。

3)`GAE`是影响`depending`您的 Vaadin 往返行程真正重量的一个因素。

4)`Future`

Vaadin 是 Jboss 的成员，`GWT steering committee`并且与 Jboss 一起`Errai`（`asynchronous bean management`在 Errai 路线图中）严重依赖服务器端模型。

# jquery - 在确认返回时启用输入字段

> ID：13048959
> 
> 赞同：0
> 
> 时间：2012-10-24T12:11:30.773
> 
> 标签：jquery, html

我想启用一个输入字段，仅在选中付款复选框时才用于选择付款日期！点击复选框触发付款确认问题，如果确认复选框被选中，输入框将是可编辑的！这是不起作用的代码：

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#talk").click(function(){
       return confirm("Did you pay the tax?");
      var isChecked = $('#talk').is(':checked');
      if(isChecked==true)
      {

        $("#paydate").html('<input type="text" id="name" placeholder="Enter the Date!" />');
      }
    });
  });
</script>

<div id="paydate">
<input type="checkbox" id="talk" />
<input type="text" id="name" readonly />
</div> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:21:21.823

无需重新创建您的元素。
只需删除`readonly`属性：

```
$("#talk").click(function() {
    var isChecked = $('#talk').is(':checked');
    if (isChecked == true) {
        if (confirm("Did you pay the tax?")) {
            $('#name').removeAttr('readonly')
        }
    }
}); 
```

锁定复选框，正如您评论的那样，添加`$(this).prop('disabled',true)`之后`$('#name').removeAttr('readonly')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:14:43.207

尝试这个：

```
if(isChecked==true)
      {
        var a = confirm("Did you pay the tax?");
        if(a == true){
          $("#paydate").html('<input type="text" id="name" placeholder="Enter the Date!" />');
        }
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:14:57.683

将您的代码更改为以下内容

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#talk").click(function(){
      var isChecked = $('#talk').is(':checked');
      if(isChecked==true)
      {
       if(confirm("Did you pay the tax?"))
        $("#paydate").html('<input type="text" id="name" placeholder="Enter the Date!" 

/>');
      }
    });
  });
</script>

<div id="paydate">
<input type="checkbox" id="talk" />
<input type="text" id="name" readonly />
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T12:15:41.120

```
 $(document).ready(function(){
    $("#talk").click(function(){
      var isChecked = $('#talk').is(':checked');

      if(isChecked==true)
      {
        if(confirm("Did you pay the tax?"))
        $("#paydate").html('<input type="text" id="name" placeholder="Enter the Date!" />');
      }
    });
  }); 
```

示例：http: [//jsfiddle.net/EH6CG/](http://jsfiddle.net/EH6CG/)

# c++ - C++：在尝试迭代 boost::unordered_map 时与 operator< 不匹配

> ID：13048960
> 
> 赞同：2
> 
> 时间：2012-10-24T12:11:31.517
> 
> 标签：c++, boost, unordered-map, boost-iterators, boost-unordered

我有以下代码：

```
boost::unordered_map<std::string, int> map;
map["hello"]++;
map["world"]++;

for(boost::unordered_map<std::string, int>::iterator it = map.begin(); it < map.end(); it++){
    cout << map[it->first];
} 
```

当我尝试编译时出现以下错误但不知道为什么？

```
error: no match for ‘operator<’ in ‘it < map.boost::unordered::unordered_map<K, T, H, P, A>::end [with K = std::basic_string<char>, T = int, H = boost::hash<std::basic_string<char> >, P = std::equal_to<std::basic_string<char> >, A = std::allocator<std::pair<const std::basic_string<char>, int> >, boost::unordered::unordered_map<K, T, H, P, A>::iterator = boost::unordered::iterator_detail::iterator<boost::unordered::detail::ptr_node<std::pair<const std::basic_string<char>, int> >*, std::pair<const std::basic_string<char>, int> >]() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:12:52.960

尝试：

```
it != map.end() 
```

作为`for`循环终止条件（而不是`it < map.end()`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T12:13:13.963

如果是迭代器，您必须使用`!=`运算符：

```
boost::unordered_map<std::string, int>::iterator it = map.begin();
for(; it != map.end(); ++it){
    cout << map[it->first];
} 
```

你不能使用`<`，因为迭代器指向内存，你不能保证内存是连续的。这就是为什么你必须使用`!=`比较。

# objective-c - 创建硬自定义按钮

> ID：13048965
> 
> 赞同：2
> 
> 时间：2012-10-24T12:11:57.927
> 
> 标签：objective-c, ios, uibutton

我不知道如何构建这个按钮。我需要帮助来创建它，请注意，当按钮处于活动状态时，条带不会被绘制。我应该使用哪些元素？

在链接上，您可以查看此按钮

[http://i.stack.imgur.com/0mmJ0.png](http://i.stack.imgur.com/0mmJ0.png)

```
 UIButton *clone = [[UIButton alloc] initWithFrame:frame];
    [clone setTitle:strDate forState:UIControlStateNormal];
    [clone setTitleColor:[UIColor blackColor] forState:UIControlStateHighlighted];
    clone.frame = CGRectMake(19, post_offer_top*(i-1)+22, 281, 75);
    clone.tag = my_id;
   // [clone setTitle:[[buttons objectAtIndex:i-1] objectForKey:@"title"] forState:UIControlStateNormal];
    clone.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
    clone.contentEdgeInsets = UIEdgeInsetsMake(44, 31, 0, 0);
    [clone setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [clone setTitleShadowColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [clone.titleLabel setFont:[UIFont fontWithName:@"PF DinDisplay Pro" size:10]];
    [clone.titleLabel setShadowOffset:CGSizeMake(0.0f, 1.0f)]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:15:01.043

您应该像这样初始化按钮 [UIButton buttonWithType:UIButtonTypeCustom]

# java - jsf-api 和 jsf-impl 有什么关系？

> ID：13048970
> 
> 赞同：3
> 
> 时间：2012-10-24T12:12:29.293
> 
> 标签：java, jsf, jakarta-ee, jsf-2, jboss-arquillian

一段时间以来，我一直[在努力运行 arquillian 测试用例](https://stackoverflow.com/questions/11841921/how-to-write-arquillian-tests-for-jsf-classes)。该测试涉及植根于 JSF 类的类，它遇到了一个无法找到`ClassFormatError: Absent Code`的实现。`javax.faces.model.DataModel`

我的假设是我需要为我的测试提供一个 JSF 实现，但我发现的实现（例如与 JBoss 捆绑的那个）没有`javax.faces`包，只有`com.sun`，我找不到`DataModel`类的踪迹。

我在哪里误解了它在这里的工作方式？为什么不`impl`实际实施`api`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:34:02.860

API：

*   消费者可以编写代码的公共类型

实施：

*   消费者不应依赖的私有类型
*   实现细节，包括标记（例如 HTML）和容器（例如 servlet）

这种分离并不像应有的那样干净，但这主要是意图。分离到这两个 jar 中是开发人员选择组织代码的方式，但在大多数情况下您都需要使用这两个库。

# php - 在现有查询中计算模式以计算 PHP 和 MySQL 中的行数

> ID：13048972
> 
> 赞同：0
> 
> 时间：2012-10-24T12:12:42.553
> 
> 标签：php, mysql, sql, mode

我有一个`rel`包含字段`id` `refid` `cellid` `cat`和一些工作 PHP 代码的表来计算每个字段的行数，`cellid`并将其作为数组返回以供以后使用。

```
<?php
// connect to database
require($DOCUMENT_ROOT . "connect.php");
// count the number of relationships for each cell id
  $cell_array = array();
  if ($result = mysqli_query($link, "SELECT cellid, COUNT(*) totalcount, cat FROM rel GROUP BY cellid")) {
    if (mysqli_num_rows($result)) {
      while ($row = mysqli_fetch_assoc($result)) {
        $cell_array[$row["cellid"]] = $row['totalcount'];
      }
    }
  }
?> 
```

我现在想添加一个附加函数，计算每个函数的模式（最常见的值）`cat`并将`cellid`该值包含在数组中。如果有多个模式或没有模式，则返回 9（`cat`只能有 1 到 8 的值）。

我一直在阅读如何找到模式，常见的解决方案如下所示：

```
SELECT COUNT(*) frequency, cat, cellid
FROM rel
GROUP BY cat
ORDER BY COUNT(*) DESC
LIMIT 1 
```

但这并没有返回`cat`每个最常见的，`cellid`只是最常见`cat`的。

我一直在使用子查询

```
SELECT cellid, cat, COUNT( * ) 
FROM  `rel` 
GROUP BY cellid, cat 
```

它为每个组合生成一行`cellid` `cat`，但我不确定如何使用它来查找每个组合的条目总数以及每个组合`cellid`最常见的条目数`cat``cellid`

**编辑**

我已经取得了一些进一步的进展，我现在有一个工作查询来查找`cat`每个模式的模式`cellid`

```
SELECT cellid, cat
FROM rel t
GROUP BY cellid, cat
HAVING cat = ( 
SELECT cat
FROM rel
WHERE cellid = t.cellid
GROUP BY cat
ORDER BY COUNT( * ) DESC , cat
LIMIT 1 ) 
```

但是我仍然不确定如何组合这两个查询，因为一个查询的输出不能用于另一个查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:33:23.027

您可以通过将它们连接在一起来组合它们：

```
select cell.*, mode.cat as modecat
from (SELECT cellid, COUNT(*) totalcount
      FROM rel
      GROUP BY cellid
     ) cell join
     (SELECT cellid, cat
      FROM rel t
      GROUP BY cellid, cat
      HAVING cat = (SELECT cat
                    FROM rel
                    WHERE cellid = t.cellid
                    GROUP BY cat
                    ORDER BY COUNT( * ) DESC , cat
                    LIMIT 1
                  )
     ) mode
     on cell.cellid = mode.cnt 
```

这不处理多个值的情况。如果您只想要一个任意值，我会选择：

```
select cell.*,
       (select cat
        from rel
        where cell.cellid = rel.cellid
        group by cellid, cat
        order by COUNT(*) desc
        limit 1
       ) as mode
from (SELECT cellid, COUNT(*) totalcount
      FROM rel
      GROUP BY cellid
     ) cell 
```

识别 muliples 有点棘手。它需要在子查询中进行额外的聚合：

```
select cell.*,
       (select (case when min(cat) = max(cat) then min(cat) else 'MULTIPLE' end) as mode
        from (select cat, COUNT(*) as cnt
              from rel
              where cell.cellid = rel.cellid
              group by cellid, cat
             ) t
        group by cnt
        order by cnt desc
        limit 1
       ) mode
from (SELECT cellid, COUNT(*) totalcount
      FROM rel
      GROUP BY cellid
     ) cell 
```

# arduino - if 中的三个语句

> ID：13048973
> 
> 赞同：0
> 
> 时间：2012-10-24T12:12:43.940
> 
> 标签：arduino

我目前正在做一个小型的 Arduino 项目，但我有点卡住了。到目前为止，这是我的代码：

```
#include "_init.h"

void setup() {
  ds_init();
  Serial.begin(9600);
  randomSeed(analogRead(LIGHT_SENSOR_PIN));

  int rol1[] = {1, 2, 3, 4, 5};
  int rol2[] = {3, 5, 1, 2, 4};
  int rol3[] = {5, 1, 4, 3, 2};

  int rol1Mid = random(0, 5);
  int rol1Bov = rol1Mid + 1;
  int rol1Ond = rol1Mid - 1;

  if (rol1Bov == 5){
    rol1Bov = 0;
  }

  if (rol1Ond == -1){
    rol1Ond = 4;
  }

  int rol2Mid = random(0, 5);
  int rol2Bov = rol2Mid + 1;
  int rol2Ond = rol2Mid - 1;

  if (rol2Bov == 5){
    rol2Bov = 0;
  }

  if (rol2Ond == -1){
    rol2Ond = 4;
  }

  int rol3Mid = random(0, 5);
  int rol3Bov = rol3Mid + 1;
  int rol3Ond = rol3Mid - 1;

  if (rol3Bov == 5){
    rol3Bov = 0;
  }

  if (rol3Ond == -1){
    rol3Ond = 4;
  }  

  Serial.println(rol1[rol1Bov]);
  Serial.println(rol1[rol1Mid]);
  Serial.println(rol1[rol1Ond]);

  Serial.println("----");

  Serial.println(rol2[rol2Bov]);
  Serial.println(rol2[rol2Mid]);
  Serial.println(rol2[rol2Ond]);

  Serial.println("----");

  Serial.println(rol3[rol3Bov]);
  Serial.println(rol3[rol3Mid]);
  Serial.println(rol3[rol3Ond]);

  if(rol1[rol1Mid] && rol2[rol2Mid] == rol3[rol3Mid]){
    Serial.println("Yaay!");
  } else {
    Serial.println("Jammer, probeer het nogmaals.");
  }
  /*
  if(rol1[positieBov] && rol2[positieBov] == rol3[positieBov]){
    Serial.println("Yaay!");
  } else {
    Serial.println("Jammer, probeer het nogmaals.");
  }

  if(rol1[positieOnd] && rol2[positieOnd] == rol3[positieOnd]){
    Serial.println("Yaay!");
  } else {
    Serial.println("Jammer, probeer het nogmaals.");
  }
  */
}

void loop() {
  // put your main code here, to run repeatedly: 

} 
```

基本上，我正在尝试创建一台老虎机。我的代码可能有很多问题，但目前，我停留在检查用户是否获胜的 if 语句上。

我知道我不应该在 Arduino 的 setup() 部分进行编码，但是一旦一切正常，我将把它放在 loop() 中的一个函数中，在那里我将使用危险盾牌的按钮来操作这三个分别卷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:28:01.873

好的，设法修复它......我现在觉得很傻

```
if(rol1[rol1Mid] == rol2[rol2Mid] && rol2[rol2Mid] == rol3[rol3Mid]) 
```

# ios - 为什么 Storyboard 与 <= iOS4 不兼容？

> ID：13048975
> 
> 赞同：-4
> 
> 时间：2012-10-24T12:13:01.257
> 
> 标签：ios, ios5, ios-simulator

我想知道为什么我在storybord 中的app devlop 与<=iOS4 不兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:13:50.140

因为 iOS 4 或以前的版本中不存在使用 StoryBoard 框架所需的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:14:47.077

Storyboard 是在 iOs 5 中引入的

# c# - 向对象类型的对象添加属性

> ID：13048976
> 
> 赞同：1
> 
> 时间：2012-10-24T12:13:09.330
> 
> 标签：c#, asp.net

```
object o = new { foo = 1 }; 
```

有没有其他方法可以向对象添加属性？

两者似乎都不起作用`o["foo"] = 1`。`o.foo = 1`

如果我输入

```
var o = new { foo = 1 }; 
```

为什么是`var`“AnonomuysType”的类型而不是`object`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:16:07.103

您不能只将属性添加到已编译类型。唯一可以*用作属性*（嗯，有点）的情况是，如果您使用的是`dynamic`API，并且对象是*支持*动态属性的东西，例如：

```
dynamic obj = new ExpandoObject();
obj.Foo = 123;
obj.Bar = "abc"; 
```

但是，这些值不能通过反射获得。一种更简单的方法可能是像字典一样的东西：

```
var obj = new Dictionary<string,object>();
obj["Foo"] = 123;
obj["Bar"] = "abc"; 
```

通过字典 API 可以发现更多内容。关于你的最后一个问题：当你这样做时：

```
var o = new { foo = 1 }; 
```

这`new { foo = 1 }`会导致编译器生成一个*匿名类型*，它是一个具有只读属性和不可发音名称的常规 C# 类。这可以称为（毕竟`object`它是常规的），但是当您使用编译器时，会使用已知类型（具有可怕的名称），这使您可以访问属性（在这种情况下）。`class``var``.foo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:16:41.030

所有*对象*甚至都继承自`Object`匿名类型（请参阅[此问题](https://stackoverflow.com/questions/436211/is-everything-in-net-an-object)）。你可以在这里看到：

```
object o = new { foo = 1 };
if (o is object)
    Console.Write("Yes, i'm an object!");
else 
    Console.Write("no, no, i'm not an object!"); 
```

您不能将属性添加到匿名类型，只有在您创建它时。

您可以使用 a`Dictionary<string, object>`代替：

```
var o = new Dictionary<string, object>();
o.Add("Foo", 123);
o.Add("Bar", "abc"); 
```

现在您可以通过以下方式访问它们：

```
object bar = o["Bar"]; // "abc" 
```

# android - 如何在Android中旋转画布上绘制的矩形？

> ID：13048979
> 
> 赞同：4
> 
> 时间：2012-10-24T12:13:13.417
> 
> 标签：android, rotation, android-canvas, draw, rect

我正在使用以下代码在 android 画布上绘制文本

```
 Rect rect = new Rect();
        paint.getTextBounds(text, 0, text.length(), rect);
        canvas.translate(xPosition + position.getX(), yPosition + position.getY());
        paint.setColor(Color.BLUE);
        paint.setStyle(Style.STROKE);
        canvas.drawRect(rect, paint);
        paint.setStyle(Style.FILL);
        paint.setColor(text_color);
        canvas.translate(-(xPosition + position.getX()), -(yPosition + position.getY()));
        canvas.rotate(getDegreesFromRadians(angle), xPosition + position.getX() + rect.exactCenterX(), yPosition + position.getY() + rect.exactCenterY());
        canvas.drawText(text, xPosition + position.getX(), yPosition + position.getY(), paint); 
```

此代码负责文本的旋转，并且工作正常。我正在使用上面的代码在文本周围绘制一个蓝色矩形。现在我的问题是矩形没有与文本一起旋转。它仍然保持不变。有什么方法可以旋转在 android canvas 中绘制的矩形？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T12:37:58.983

请用

```
canvas.save();
canvas.rotate();
//stuff to draw that should be rotated
canvas.restore(); 
```

否则你必须在之后补偿每次旋转

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:36:33.680

我找到了自己的答案。我使用了以下代码

```
Rect rect = new Rect();
        paint.setColor(text_color);
        paint.setStyle(Style.FILL);
        paint.getTextBounds(text, 0, text.length(), rect);
        canvas.translate(xPosition + position.getX(), yPosition + position.getY());
        canvas.translate(-(xPosition + position.getX()), -(yPosition + position.getY()));
        canvas.rotate(getDegreesFromRadians(angle), xPosition + position.getX() + rect.exactCenterX(), yPosition + position.getY() + rect.exactCenterY());
        canvas.drawText(text, xPosition + position.getX(), yPosition + position.getY(), paint);
        paint.getTextBounds(text, 0, text.length(), rect);
        canvas.translate(xPosition + position.getX(), yPosition + position.getY());
        paint.setColor(Color.BLUE);
        paint.setStyle(Style.STROKE);
        paint.setStrokeWidth(4);
        rect = new Rect(rect.left - 10, rect.top - 10, rect.right + 10, rect.bottom + 10);
        canvas.drawRect(rect, paint); 
```

问题是整个画布正在旋转以旋转文本。所以我只需要在画布旋转后绘制矩形。

# java - 读取excel文件2010 apache poi忽略空单元格

> ID：13048981
> 
> 赞同：2
> 
> 时间：2012-10-24T12:13:16.750
> 
> 标签：java, jakarta-ee, excel-2007, apache-poi, excel-2010

我有一个问题，当 java 应用程序读取 Excel 文件 .xlsx 扩展名时，应用程序工作正常，但在工作簿中有很多工作表，1、2 工作表正确读取，但是当读取 3 工作表时，没有读取所有单元格当我从 Excel 文件打开并检查时，单元格存在空值，但是当 apache poi 读取它时，单元格只是忽略了空单元格。什么是原因？ **更新**

```
 FileInputStream file = new FileInputStream(file_location);
  //this.workbook = new HSSFWorkbook(file);
  this.workbook = new XSSFWorkbook(file);
XSSFSheet mySheet = workbook.getSheetAt(index);
       Iterator rowIter = mySheet.rowIterator();
        while(rowIter.hasNext()){
          XSSFRow myRow = (XSSFRow) rowIter.next();
          Iterator cellIter = myRow.cellIterator();
          ArrayList colStoreArray=new ArrayList();

          while(cellIter.hasNext()){
              XSSFCell myCell = (XSSFCell) cellIter.next();
              colStoreArray.add(myCell);
                                   }
          rowArrayHolder.add(colStoreArray);

        } } 
```

在读取 excel 文件的上方，虽然我在一行中检查了 Excel 文件 20 个单元格，但在某些行中读取的只有 14 行。我正在使用 ArrayList，似乎这里应该是并发访问 ArrayList 的问题。可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T14:21:02.273

迭代器仅对文件中定义的单元进行迭代。如果该单元格从未在 Excel 中使用过，它可能不会出现在文件中（Excel 并不总是一致的......），所以 POI 不会看到它

如果要确保点击每个单元格，则应改为按索引查找，并检查空单元格（表明该单元格从未在文件中存在），或设置 a`MissingCellPolicy`以控制您希望空单元格和空白单元格的方式处理过的

# c# - 我们如何使用 Crystal Reports 将公式中的数字转换为单词？

> ID：13048984
> 
> 赞同：3
> 
> 时间：2012-10-24T12:13:25.437
> 
> 标签：c#, crystal-reports-2010

例如，10000.36 转换为一万三十六。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:30:05.307

```
namespace NumToText
{
    static class NumberToText
    {
        private static string[] _ones =
        {
            "zero",
            "one",
            "two",
            "three",
            "four",
            "five",
            "six",
            "seven",
            "eight",
            "nine"
        };

        private static string[] _teens =
        {
            "ten",
            "eleven",
            "twelve",
            "thirteen",
            "fourteen",
            "fifteen",
            "sixteen",
            "seventeen",
            "eighteen",
            "nineteen"
        };

        private static string[] _tens =
        {
            "",
            "ten",
            "twenty",
            "thirty",
            "forty",
            "fifty",
            "sixty",
            "seventy",
            "eighty",
            "ninety"
        };

        // US Nnumbering:
        private static string[] _thousands =
        {
            "",
            "thousand",
            "million",
            "billion",
            "trillion",
            "quadrillion"
        };

        /// <summary>
        /// Converts a numeric value to words suitable for the portion of
        /// a check that writes out the amount.
        /// </summary>
        /// <param name="value">Value to be converted</param>
        /// <returns></returns>
        public static string Convert(decimal value)
        {
            string digits, temp;
            bool showThousands = false;
            bool allZeros = true;

            // Use StringBuilder to build result
            StringBuilder builder = new StringBuilder();
            // Convert integer portion of value to string
            digits = ((long)value).ToString();
            // Traverse characters in reverse order
            for (int i = digits.Length - 1; i >= 0; i--)
            {
                int ndigit = (int)(digits[i] - '0');
                int column = (digits.Length - (i + 1));

                // Determine if ones, tens, or hundreds column
                switch (column % 3)
                {
                    case 0:        // Ones position
                        showThousands = true;
                        if (i == 0)
                        {
                            // First digit in number (last in loop)
                            temp = String.Format("{0} ", _ones[ndigit]);
                        }
                        else if (digits[i - 1] == '1')
                        {
                            // This digit is part of "teen" value
                            temp = String.Format("{0} ", _teens[ndigit]);
                            // Skip tens position
                            i--;
                        }
                        else if (ndigit != 0)
                        {
                            // Any non-zero digit
                            temp = String.Format("{0} ", _ones[ndigit]);
                        }
                        else
                        {
                            // This digit is zero. If digit in tens and hundreds
                            // column are also zero, don't show "thousands"
                            temp = String.Empty;
                            // Test for non-zero digit in this grouping
                            if (digits[i - 1] != '0' || (i > 1 && digits[i - 2] != '0'))
                                showThousands = true;
                            else
                                showThousands = false;
                        }

                        // Show "thousands" if non-zero in grouping
                        if (showThousands)
                        {
                            if (column > 0)
                            {
                                temp = String.Format("{0}{1}{2}",
                                    temp,
                                    _thousands[column / 3],
                                    allZeros ? " " : ", ");
                            }
                            // Indicate non-zero digit encountered
                            allZeros = false;
                        }
                        builder.Insert(0, temp);
                        break;

                    case 1:        // Tens column
                        if (ndigit > 0)
                        {
                            temp = String.Format("{0}{1}",
                                _tens[ndigit],
                                (digits[i + 1] != '0') ? "-" : " ");
                            builder.Insert(0, temp);
                        }
                        break;

                    case 2:        // Hundreds column
                        if (ndigit > 0)
                        {
                            temp = String.Format("{0} hundred ", _ones[ndigit]);
                            builder.Insert(0, temp);
                        }
                        break;
                }
            }

            // Append fractional portion/cents
            builder.AppendFormat("and {0:00}/100", (value - (long)value) * 100);

            // Capitalize first letter
            return String.Format("{0}{1}",
                Char.ToUpper(builder[0]),
                builder.ToString(1, builder.Length - 1));
        }
    }
} 
```

你可以使用这个类：

```
string result = NumberToText.Convert(10000.36); 
```

并将`result`参数发送到水晶。

# android - 使用 Mockito 1.9.5 和 DexMaker-Mockito-1.0 的验证错误

> ID：13048985
> 
> 赞同：19
> 
> 时间：2012-10-24T12:13:30.890
> 
> 标签：android, junit, mockito, cglib, dexmaker

像许多其他人一样，我很高兴听到[Mockito 现在可以与 Android 配合使用](http://corner.squareup.com/2012/10/mockito-android.html)，并按照[本教程](http://www.paulbutcher.com/2012/05/mockito-on-android-step-by-step)亲眼看到它。一切似乎都令人振奋，我开始将模拟解决方案整合到我的 Android 测试项目中......

### 错误

但是，在设置我的应用程序的测试项目以利用`mockito-all-1.9.5`,`dexmaker-1.0`和`dexmaker-mockito-1.0`jar 时，我在第一个测试用例中遇到了问题。其实也正是[这个问题。](http://code.google.com/p/dexmaker/issues/detail?id=16)我需要帮助的部分是；

```
Caused by: java.lang.VerifyError: org/mockito/cglib/core/ReflectUtils
at org.mockito.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:167)
at org.mockito.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)
at org.mockito.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:217)
at org.mockito.cglib.core.KeyFactory$Generator.create(KeyFactory.java:145)
at org.mockito.cglib.core.KeyFactory.create(KeyFactory.java:117)
at org.mockito.cglib.core.KeyFactory.create(KeyFactory.java:109)
at org.mockito.cglib.core.KeyFactory.create(KeyFactory.java:105)
at org.mockito.cglib.proxy.Enhancer.<clinit>(Enhancer.java:70) 
```

我被告知这“还不能完全起作用”，因为堆栈跟踪暗示没有使用 DexMaker jar - 参考[这个响应](http://code.google.com/p/dexmaker/issues/detail?id=16#c3)。但是，我怀疑我在项目设置方面做错了什么，所以我希望从这里的集体知识库中吸取教训，看看这确实是用户错误还是 beta 错误。

### 我的 Android 测试项目设置

请在下面找到我的测试项目配置的屏幕截图。该项目是通过 Android 向导创建的，除了在目录下包含 Mockito 和 DexMaker jar（如上所述）之外，没有其他特殊功能`libs`。

![测试项目配置](../Images/e6a339bf08a76b497d9fb7664a650376.png)

### 考试

不用管测试的内容（在执行单元测试之前测试失败）设置如下所述；

```
public class TestSpotRatingCalculator extends InstrumentationTestCase {
  @Mock
  private AService aService; // Changed the service names being used here - not important.
  @Mock
  private BService bService;
  @Mock
  private CService cService;
  @Mock
  private DService dService;

  /**
   * @see android.test.AndroidTestCase#setUp()
   */
  @Override
  protected void setUp() throws Exception {
    super.setUp();
    MockitoAnnotations.initMocks(this);  // Failure here with aforementioned stacktrace...
  } 
```

如果有人知道出了什么问题，那么请在这里发出声音。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-15T15:54:19.817

嗨我有同样的问题，我发现这篇文章真的很有用！

[http://corner.squareup.com/2012/10/mockito-android.html](http://corner.squareup.com/2012/10/mockito-android.html)

关键信息是：

> 要在设备或模拟器上使用 Mockito，您需要将三个 .jar 文件添加到测试项目的 libs 目录：[mockito-all-1.9.5.jar](https://mockito.googlecode.com/files/mockito-all-1.9.5.jar)、 [dexmaker-1.0.jar](http://dexmaker.googlecode.com/files/dexmaker-1.0.jar)和[dexmaker-mockito-1.0.jar](http://dexmaker.googlecode.com/files/dexmaker-mockito-1.0.jar) .

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-02T10:00:44.873

只需将其添加到您的 gradle 中：

```
androidTestCompile 'org.mockito:mockito-core:1.10.8'
androidTestCompile 'com.google.dexmaker:dexmaker-mockito:1.1' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-09T07:07:33.573

我们刚刚在一个项目中遇到了同样的问题，但我们的测试在真实设备上也失败了。

原因被追踪到 Mockito 如何使用类加载器，导致 LogCat 出现以下错误：

```
W/ActivityThread(5777): ClassLoader.getResources: The class loader returned by Thread.getContextClassLoader() may fail for processes that host multiple applications. You should explicitly specify a context class loader. For example: Thread.setContextClassLoader(getClass().getClassLoader()); 
```

修复是在调用 mock() 测试之前显式设置类加载器，例如。

```
@Override
protected void setUp() throws Exception {
    super.setUp();
    Thread.currentThread().setContextClassLoader(getClass().getClassLoader());
    fooImpl = mock(Foo.class)
} 
```

Mockito 中有问题的文件是这个：org.mockito.internal.configuration.ClassPathLoader（1.9.5 中的第 121 行）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T10:14:38.773

[正如这里](http://code.google.com/p/dexmaker/issues/detail?id=8)所暗示的， *dexmaker-android 组合仅在针对***真实**设备运行检测测试时才能 100% 工作。

针对真实设备运行测试不会出现此故障。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-17T15:16:34.313

对于仍然有此错误的每个人，请检查您是否没有在依赖项中排除一个类。我们偶然排除了 MockMaker.class 所以这就是异常的原因。

# c# - 在单独的进程中运行代码

> ID：13048987
> 
> 赞同：4
> 
> 时间：2012-10-24T12:13:38.767
> 
> 标签：c#, process, .net-4.5

我想知道如何设置操作（方法、代码块等）以在主进程崩溃时其他进程仍将运行的方式在不同的进程（而不是线程）上运行。不可监控，但正在运行。

我在想我可以在不同的应用程序中“编译”代码块，然后执行结果，但这不会太优雅。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:39:09.063

另一种选择是使用相同的 app/exe 并传递命令行参数来表示在第二个实例中运行什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:17:32.850

除非您按照 ms 的意图运行单独的 exe，否则创建一个新的 appdomain 并在其中运行其他代码。 [http://msdn.microsoft.com/en-us/library/system.appdomain.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)

# database - MS Access：单个查询中的平均和总计算

> ID：13048988
> 
> 赞同：4
> 
> 时间：2012-10-24T12:13:39.283
> 
> 标签：database, ms-access

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:20:02.720

您有单独的查询来计算`10DayTotalVolume`和`10DayAvgVolume`。我怀疑您可以在一个查询*qry10DayVolumes*中计算两者。

```
SELECT
    b.SYMBOL,
    Sum(b.VOLUME) AS 10DayTotalVolume,
    Avg(b.VOLUME) AS 10DayAvgVolume
FROM
    [tbl-B] AS b INNER JOIN
    qryLast10DaysStored AS q
    ON b.TIMESTAMP = q.TIMESTAMP
GROUP BY b.SYMBOL; 
```

然而，这让我想知道`10DayAvgVolume`除了`10DayTotalVolume / 10`

类似的考虑适用于 15 天和 30 天的值。

最终，我认为你想要一些基于这样的起点的东西：

```
SELECT
    q10.SYMBOL,
    q10.[10DayTotalVolume],
    q10.[10DayAvgVolume],
    q15.[15DayTotalVolume],
    q15.[15DayAvgVolume],
    q30.[30DayTotalVolume],
    q30.[30DayAvgVolume]
FROM
    (qry10DayVolumes AS q10
    INNER JOIN qry15DayVolumes AS q15
    ON q10.SYMBOL = q15.SYMBOL)
    INNER JOIN qry30DayVolumes AS q30
    ON q10.SYMBOL = q30.SYMBOL; 
```

这假设您已经创建`qry15DayVolumes`并`qry30DayVolumes`遵循我建议的方法`qry10DayVolumes`。

如果您想减少查询的数量，您可以为每个已`qry??DayVolumes`保存的查询使用子查询，但首先尝试这种方式以确保逻辑正确。

在上面的第二个查询中，由于字段名称以数字开头，可能会出现问题。将这些名称括在方括号中或将它们重新命名为`qry10DayVolumes`, `qry15DayVolumes`, 并`qry30DayVolumes`使用以字母而不是数字开头的别名。

*我使用您上传的“ 2nd Upload.mdb* ”测试了上面编写的查询，它从 Access 2007 运行时没有出现错误。这是该查询结果集的第一行：

```
SYMBOL 10DayTotalVolume 10DayAvgVolume 15DayTotalVolume 15DayAvgVolume   30DayTotalVolume 30DayAvgVolume
ACC-1             42909         4290.9            54892 3659.46666666667            89669 2988.96666666667 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:20:22.043

Access 不支持最高级的 SQL 语法和子句，所以这有点小技巧，但它可以工作，并且在您的小样本上速度很快。您基本上正在运行 3 个查询，但 Union 子句允许您合并为一个：

```
select
   Symbol,
   sum([10DayTotalVol]) as 10DayTotalV,
   sum([10DayAvgVol]) as 10DayAvgV,
   sum([15DayTotalVol]) as 15DayTotalV,
   sum([15DayAvgVol]) as 15DayAvgV,
   sum([30DayTotalVol]) as 30DayTotalV,
   sum([30DayAvgVol]) as 30DayAvgV

from (

      select
        Symbol, 
        sum(volume) as 10DayTotalVol, avg(volume) as 10DayAvgVol,
        0 as 15DayTotalVol, 0 as 15DayAvgVol,
        0 as 30DayTotalVol, 0 as 30DayAvgVol
      from
         [tbl-b]
      where
         timestamp >= (select min(ts) from (select distinct top 10 timestamp as ts from [tbl-b] order by timestamp desc ))
      group by
         Symbol   

      UNION

      select
        Symbol, 
        0, 0,
        sum(volume), avg(volume),
        0, 0
      from
         [tbl-b]
      where
         timestamp >= (select min(ts) from (select distinct top 15 timestamp as ts from [tbl-b] order by timestamp desc ))
      group by
         Symbol    

      UNION

      select
        Symbol, 
        0, 0,
        0, 0,
        sum(volume), avg(volume)
      from
         [tbl-b]
      where
         timestamp >= (select min(ts) from (select distinct top 30 timestamp as ts from [tbl-b] order by timestamp desc ))
      group by
         Symbol 
      ) s

group by 
   Symbol 
```

# java - 测量列表视图项的高度

> ID：13048989
> 
> 赞同：0
> 
> 时间：2012-10-24T12:13:41.057
> 
> 标签：java, android, listview

我想`ListView`在渲染之前测量 a 中每个项目的高度。

我将此方法添加到我的自定义`ListView`

```
public void measureItemsHeight() {
    mItemCount = getAdapter().getCount();

    if(mItemOffsetY == null){
        mItemOffsetY = new int[mItemCount];
    }

    for(int i = 0; i < mItemCount; ++i){
        View view  = getAdapter().getView(i, null, this);  
        view.measure(0, 0);  
        mItemHeight[i] = view.getMeasuredHeight();
    }
} 
```

然后，在我的活动中`onCreate()`：

```
mListView.getViewTreeObserver().addOnGlobalLayoutListener(
    new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            mListView.measureItemsHeight();
        }
    }
); 
```

我得到的值与 报告的值不同`getHeight()`，例如`getMeasuredHeight()`返回 48，`getHeight()`返回 72。

我用于项目的布局是`simple_list_item`

在我看来，这就像 hdpi 和 xhdpi 问题，有没有办法解决这个问题？我用来调试的设备是三星SGS2，也许这就是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:42:37.610

我建议您使用自定义列表，为列表行制作单独的布局。
将以下属性分配给该视图布局：`android:layout_height=wrap_content`。
而已。
祝你好运！

# wordpress - 在 url 中包含分类学 slug？

> ID：13048990
> 
> 赞同：1
> 
> 时间：2012-10-24T12:13:44.723
> 
> 标签：wordpress, permalinks, custom-taxonomy

我有以下自定义帖子类型和自定义分类设置：

```
add_action( 'init', 'create_post_type' );
function create_post_type() {
    register_post_type( 'system',
        array(
            'labels' => array(
                'name' => __( 'Systems' ),
                'singular_name' => __( 'System' )
            ),
        'capability_type' => 'post',
        'supports' => array('title','editor','comments'),   
        'public' => true,
        'has_archive' => true,
        'rewrite' => array( 'slug' => 'system' ),
        )
    );
}

function news_init() {
    register_taxonomy(
        'system',
        'system',
        array(
            'label' => __( 'Product Category' ),
            'sort' => true,
            'hierarchical' => true,
            'args' => array( 'orderby' => 'term_order' ),
            'rewrite' => array( 'slug' => 'products' )
        )
    );  
}
add_action( 'init', 'news_init' ); 
```

是否可以在 URL 中包含自定义分类名称？

目前，当我转到自定义帖子时，URL 如下所示：

> [http://www.domain.com/products/(post-name)/](http://www.domain.com/products/(post-name)/)

我怎样才能使它看起来像下面这样？

> [http://www.domain.com/(category-slug)/(post-name)/](http://www.domain.com/(category-slug)/(post-name)/)

我试过去那个 URL，但它只给出 404。我只有标准的存档模板设置。

**（请不要将我的问题迁移到 Wordpress 堆栈，因为那里没有太多操作！）**

* * *

更新：

我把下面的代码放在一个页面上只是为了确保它进入正确的页面并且它会这样：

> [http://www.domain.com/products/(custom-taxonomy-slug)/](http://www.domain.com/products/(custom-taxonomy-slug)/)

这给出了 404。它似乎没有选择模板（标准模板），我也尝试添加 archive-products.php。

```
<?php $args = array( 'taxonomy' => 'my_term' );

$terms = get_terms('system', $args);

$count = count($terms); $i=0;
if ($count > 0) {
    $term_list = '<p class="my_term-archive">';
    foreach ($terms as $term) {
        $i++;
        $term_list .= '<a href="' . get_term_link( $term->slug, $term->taxonomy ) . '" title="' . sprintf(__('View all post filed under %s', 'my_localization_domain'), $term->name) . '">' . $term->name . '</a>';
        if ($count != $i) $term_list .= ' &middot; '; else $term_list .= '</p>';
    }
    echo $term_list;
} ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:52:47.013

我以前使用[这篇文章](http://shibashake.com/wordpress-theme/add-custom-taxonomy-tags-to-your-wordpress-permalinks)来实现这一点。通过`category-slug`，我假设您的意思是您拥有的自定义帖子类型的分类法？

# java - javax.validation 失败条目的顺序作为验证方法的结果

> ID：13048993
> 
> 赞同：2
> 
> 时间：2012-10-24T12:13:56.030
> 
> 标签：java, hibernate, validation, bean-validation

我正在使用`javax.validation`bean`JSR-303`验证。

调用 validate 方法后，我检查结果并在我的 GUI 中执行某些操作（例如突出显示我的表单中的失败字段）。

我的问题在这里：

**MyBean.java**

```
public class MyBean {

    @Size(min = 1, message = "Please insert title")
    private String title;

    @Size(min = 1, message = "Please insert author")
    private String author;

    @Size(min = 1, message = "Please insert publisher")
    private String publisher;

    // ... something
} 
```

**我的验证方法：**

```
Set<ConstraintViolation<MyBean>> failures = this.validator.validate(bean); 
```

之后，我遍历了我的失败对象：

```
for (ConstraintViolation<MyBean> constraintViolation : failures) {
        propertyPath = constraintViolation.getPropertyPath().toString();
        if (propertyPath.equals("title")) {
            Color bg = new Color(242, 242, 251);
            this.txtTitle.setBackground(bg);

        }
        // some else if for other attributes (for example: author)
        // add error to all error messages
        errorMessage += constraintViolation.getMessage();
} 
```

现在我的问题是：这些对象在故障集中的**顺序。**这是不正确的。有没有获得正确顺序的解决方案？

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:17:33.587

不保证 Set 保持其元素有序（HashSet 不会）。因此，您不应依赖此顺序，并且您可能必须测试每个 ConstraintViolation 以便对其应用正确的过程，例如使用 constraintViolation.getPropertyPath()。

但理想情况下，您不必知道您正在处理哪个故障，您通常只需要知道它是一个 ConstraintViolation 并对其应用一般方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:47:29.323

实际上允许 Bean Validation 实现以任何顺序评估约束，除非由于组序列而需要顺序。这就是您首先获得一组 _ConstraintViolation_s 的原因。

# bash - 大小写或如果字符串包含 word1 和 word2

> ID：13048994
> 
> 赞同：1
> 
> 时间：2012-10-24T12:13:58.153
> 
> 标签：bash, if-statement, case

在此示例中，我希望它知道 $@ 是否包含两个单词/符号“load”和“/”

对于一个单词/符号，这是可行的

```
 case "$@" in */*)
    ;;
    echo "going to do stuff"
*)
    echo "will do something else"
    ;;
esac 
```

或者

```
string='My string';

if [[ "$string" == *My* ]]
then
  echo "It's there!";
fi 
```

但是如果两个单词/符号出现在随机的地方，我不知道该怎么做。

更新：

输入将是模块命令。在这种情况下，我想知道是否是带有或不带有 / 指示版本的模块加载。该命令将如下所示

1) 模块加载应用程序名/1.1.1 或
2) 模块加载应用程序名
3) 模块（不加载）（列表、可用性等）

这是我现在感兴趣的第一名。
3 在某些情况下是 1 的变体。
2 将按原样运行，但会包含给用户的消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:21:23.650

缓慢的方法是遍历数组两次，然后检查“load”和“/”是否都存在，如下所示：

```
for element in $@; do [[ "$element" == "load" ]] && loadPresent=1; done
for element in $@; do [[ "$element" =~ ".*/.*" ]] && slashPresent=1; done
if [[ $loadPresent == 1 ]] && [[ $slashPresent == 1 ]]; then
   echo "Contains load and /"
fi 
```

（当我解释您的问题时，您希望一个参数完全是“加载”，而另一个参数包含一个斜杠。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:47:17.327

这样的事情是可能的：

```
如果 [[ ${@} =~ .*/.* && ${@} =~ ((^)|([ ]))load(($)|([ ])) ]]
然后
  回声
菲

```

-或者-

```
如果加载=0 && 斜线=0 && \
   ${@} 中的 ARG；
   做
     如果 [ "${ARG#*/}" != "${ARG}" ]; 然后斜线=1；菲
     如果 [ "${ARG}" = "加载" ]; 然后负载=1；菲
   完成 && [ "${LOAD}${SLASH}" = "11" ];
然后
  回声
菲

```

-或者-

```
函数加载斜杠（）
{
  加载=0 && 斜线=0
  ${@} 中的 ARG；
  做
    如果 [ "${ARG#*/}" != "${ARG}" ]; 然后斜线=1；菲
    如果 [ "${ARG}" = "加载" ]; 然后负载=1；菲
  完毕
  测试“${LOAD}${SLASH}”=“11”
}

如果加载斜线 ${@}
然后
  回声
菲

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:53:10.960

这将满足您的要求

```
if [[ $1 == "load" ]]; then
    if [[ $2 == */* ]]; then
        do first case
    else
        do second case
    fi
else
    do third case
fi 
```

# zend-framework - Zend 视图，未找到插件

> ID：13048997
> 
> 赞同：0
> 
> 时间：2012-10-24T12:14:27.637
> 
> 标签：zend-framework, zend-view

我正在使用 zend 视图类创建电子邮件模板，并分配变量.. 我也在使用视图脚本文件的帮助程序，但它在呈现时出现错误：

```
Message: Plugin by name 'EmTpl' was not found in the registry; used paths: Zend_View_Helper_: Zend/View/Helper/:/application/modules/customers/views/helpers/ 
```

但是，当我使用 on dispatch 时，这个插件就存在了，就像在加载一个带有视图脚本的控制器时一样，该脚本加载这个名为“EmTpl”的帮助程序。

这是我的电子邮件脚本：

```
 $html = new \Zend_View();
    $html->setScriptPath(APPLICATION_PATH . '/modules/admin/views/scripts/emails/');
    //$html->addHelperPath('Zend/View/Helper/','Zend_View_Helper_');
    $html->addHelperPath(
            APPLICATION_PATH . '/modules/customers/views/helpers/','Zend_View_Helper_'
    );

    $html->render("customer-new.phtml"); 
```

在我的 customer-new.phtml 中，

有：

```
<body>
hello, <?=$this->name?>
<?=$this->emTpl?>
</body> 
```

这个插件在控制器视图脚本中调用时工作正常......但我希望它与我的电子邮件模板脚本一起工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:25:39.870

在设置脚本路径之前，您必须添加辅助路径...