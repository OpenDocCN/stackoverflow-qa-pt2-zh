# StackOverflow 问答 15469000-15469999

# xml - XSLT、xsltproc 参数

> ID：15469002
> 
> 赞同：3
> 
> 时间：2013-03-18T02:45:05.557
> 
> 标签：xml, xslt

因此，我想要做的是使用 xsltproc 查询 XML 文件，并传入服务器名称的参数。此名称包含在 XML 文档中。我想从这个文件中提取用户名和密码。

因此，Name 是 User 和 Pass 的兄弟。我不经常使用 XSLT 或 XPath 或 XQuery（这是 19 年来的第二次）。我只是迷失了如何从样式表中的 XML 文件中提取数据。

这是我从 CLI 传递的内容（我认为这是正确的）：
`xsltproc --stringparam site_name "'site2'" style.xsl source.xml`

这是 XML

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<Container>
    <Servers>
        <Folder expanded="1">
            <Server>
                <User>username1</User>
                <Pass>password1</Pass>
                <Name>Site1</Name>
            </Server>
            <Server>
                <User>username2</User>
                <Pass>password2</Pass>
                <Name>Site2</Name>
            </Server>
        </Folder>
        <Server>
            <User>username3</User>
            <Pass>password3</Pass>
            <Name>Site3</Name>
        </Server>
        <Server>
            <User>username4</User>
            <Pass>password4</Pass>
            <Name>Site4</Name>
        </Server>
    </Servers>
</Container> 
```

这是我当前的 XSLT 样式表

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:param name="site_name">Site1</xsl:param>
  <xsl:output method="text"/>
  <xsl:template match="//Servers">
    <xsl:value-of select="//Server/Name"/>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:44:51.130

嗯，我想通了。这是我所做的，可能不是最有效的，但它似乎有效。

CLI 用法几乎相同，我去掉了单引号。
`xsltproc --stringparam site_name "site2" style.xsl source.xml`

**样式表**

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:param name="site_name">Site1</xsl:param>
  <xsl:output method="text"/>
  <xsl:template match="Servers">
    <xsl:for-each select="//Server">
      <xsl:if test="Name=$site_name">
        <xsl:value-of select="User"/>
        <xsl:value-of select="Pass"/>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:49:00.630

中的`select`属性应该使用相对于匹配的节点的路径。`xsl:value-of``xsl:template``xsl:template`

但你真正想要的是更改`xsl:value-of`为`xsl:apply-templates select="Server[Name=$site_name]"`. 然后创建`xsl:template match="Server"`报告您想了解的有关服务器的内容：它的`User`和`Pass`.

除了这个例子之外，如果您希望拥有数千台服务器，那么您会考虑使用`xsl:key`.

# android - 使 chartengine 不可点击

> ID：15469003
> 
> 赞同：0
> 
> 时间：2013-03-18T02:45:11.363
> 
> 标签：android, achartengine

我希望我的 ChartView 的父视图是可点击的。但是，我不能这样做，因为 ChartView 对象会吃掉点击。我已经尝试了几件事来使单击“通过”ChartView 并在包含它的视图上注册。

```
 chartdata.mChartView = ChartFactory.getLineChartView(this, chartdata.mDataset, chartdata.mRenderer);
                chartdata.mChartView.setClickable(false);
                chartdata.mChartView.setTouchDelegate(null);
                chartdata.mChartView.setOnClickListener(null);
                chartdata.mChartView.setOnTouchListener(null); 
```

到目前为止，我一直没有成功。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:14:10.337

尝试 ：

```
chartdata.mRenderer.setPanEnabled(false, false);
chartdata.mRenderer.setZoomEnabled(false, false); 
```

# c - 在 C 中请求名称并返回名称的长度

> ID：15469004
> 
> 赞同：0
> 
> 时间：2013-03-18T02:45:19.003
> 
> 标签：c, counting

我已经为这段代码苦苦挣扎了很长一段时间了。这是我第一次在这里发帖。我是 C 的新手，我觉得我几乎明白了。

我必须要你的名字、中间名首字母和姓氏。然后我问候你并告诉你你的名字的长度。听起来很简单。我有以下代码，我必须使用这里的头文件，这让事情变得更糟。任何帮助将不胜感激，我觉得我已经应用了我所有的知识，但仍然无法让它发挥作用。

这是我的头文件：

```
#ifndef NAME_H_
#define NAME_H_

struct name{
   char first[20];
   char middle;
   char last[20];
};

#endif 
```

这是我的 .c 文件：

```
#include "name.h"
#include <stdio.h>
#define nl printf("\n");

int strlen(char*s);

char first;
char middle;
char last;

main()
{
    printf("enter your first name : ");
    scanf("%c", &first);
    printf("\n enter your middle initial name : ");
    scanf("%c", &middle);
    printf("\n enter your last name: ");
    scanf("%c", &last);

    printf("\n\n Hello %c",first, " %c" ,middle, " %c", last);
    printf("\n The String returned the following length: ",strlen);
} 
```

我没有使用`printf`and `scanf`，然后将名称组件存储为从 name.h 导入的名称“结构”，最后用于`int strlen(char *s);`计算它。

我得到这个输出带有奇怪的缩进和一切：

> 输入您的名字：乔
> 
> 输入您的中间名首字母：输入您的姓氏：
> 
> Hello J 字符串返回以下长度：[-my user id]$

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:02:11.710

关于这件事的几件事并不完全正确。

首先，你不应该声明`strlen`自己。这是一个标准的 C 库函数，这意味着您应该包含适当的头文件。在这种情况下，

```
#include <string.h> 
```

其次，您将输入存储在 type 的变量中`char`。这些就是他们所说的：它们存储一个字符。因此，除非您只允许人们使用单字符名称，否则您需要的还不止这些。这种字符串输入问题实际上在 C 中相当棘手，因为您必须进行显式内存管理并且不知道用户将提前向您发送多少数据。更简单的事情之一是只使用大缓冲区并截断，但对于更复杂的程序，您需要进行错误处理并可能动态调整缓冲区大小。但对于初学者：

```
char first[1024];
char middle[1024];
char last[1024]; 
```

至少会让你开始。你`struct name`有一些，但你目前没有使用它（而且尺寸很小）。

接下来，`scanf`是一种获取输入字符串的棘手方法。 `scanf`一个`%s`模式将愉快地读取超过 1024 个字符并写入缓冲区的末尾并破坏您的程序。这就是为什么 C 程序员通常使用读取输入数据的原因`fgets`，从那时起您可以更轻松地说出您愿意读取多大的缓冲区：

```
fgets(first, sizeof(first), stdin); 
```

请注意，如果用户输入的字符超过 1023 个，它将读取前 1023 个字符，然后将其余字符留在那里，您最终会将其作为中间名的一部分读取。C 中的字符串处理很复杂！C不擅长这种事情；这就是为什么人们倾向于使用 Perl 或类似语言来进行这种您事先不知道大小的交互式字符串处理。在 C 语言中，您必须采用一种策略，例如重复调用`fgets`直到在结果末尾获得换行符，然后决定是动态调整数据结构的大小还是抛出错误。或者，您可以使用`scanf`with`%1023s`但您需要限定格式以指定最大长度。语法有点奇怪和棘手。`fgets`读取字符串时更简单。

正如另一个答案中提到的，`strlen`是一个函数，您需要调用一个`char *`变量（或`char`数组）来获取它所包含的字符串的长度。您可能想在 、 和 上调用它，`first`并将它们加在一起。`middle``last`

最后，在您的 last`printf`中，您必须传递一种格式，然后传递该格式的所有参数。你想要更多类似的东西：

```
printf("\n\n Hello %s %s %s", first, middle, last); 
```

（一旦你修复了这些变量的类型）。

这是很多随机的细节。我希望它可以帮助一些人。重要的简短要点是，C 中的字符串是以 a`char`结尾`char`且值为 0 的序列，并且所有 C 数据结构都必须预先调整大小（静态或动态`malloc`）。此外，C 没有边界检查，因此完全由您来确保您只读取与创建空间一样多的数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T02:47:57.497

利用

```
strlen(first) 
```

首先获得变量的长度..对于其他变量类似...获得累积长度使用

```
printf("\n Length: ",strlen(first)+strlen(middle)+strlen(last)); 
```

# c - C fwrite() 写入的字符量加倍

> ID：15469006
> 
> 赞同：0
> 
> 时间：2013-03-18T02:45:28.893
> 
> 标签：c, char, fwrite

当我使用此代码时

```
FILE *f = fopen(file, "wb");
fflush(f);
if (f==NULL) {
    //perror(f);
    return 0;
}
else{
    fwrite(text, sizeof(char), strlen(text), f);
    int i = fprintf(f, "%s", text);
    if (i>0) {
        fclose(f);

        return  1;
    } 
```

（`text`是`const char text[1024000]`，它被设置为函数中的参数之一）如果我写

```
This is a test
This is a test 
```

测试它是否可以写多行，它写这个

```
This is a test
This is a testThis is a test
This is a test 
```

为什么我会出现这种奇怪的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T02:49:30.307

你写了两次：

```
fwrite(text, sizeof(char), strlen(text), f);
int i = fprintf(f, "%s", text); 
```

选一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:49:42.627

这两行写了两次“文本”。他们做同样的事情。

```
fwrite(text, sizeof(char), strlen(text), f);
int i = fprintf(f, "%s", text); 
```

唯一的区别是 fprintf 比 fwrite 多写一个字节 '\0'。

# ruby-on-rails - 用户中的 ArgumentError::RegistrationsController#new

> ID：15469009
> 
> 赞同：1
> 
> 时间：2013-03-18T02:45:39.920
> 
> 标签：ruby-on-rails, devise, cancan

我试图让 Cancan 在我的 Rails 应用程序上与 Devise 一起工作。我尝试按照此处的说明进行设置：

[http://www.tonyamoyal.com/2010/07/28/rails-authentication-with-devise-and-cancan-customizing-devise-controllers/](http://www.tonyamoyal.com/2010/07/28/rails-authentication-with-devise-and-cancan-customizing-devise-controllers/)

当我收到以下错误时，我被卡住了：

用户中的 ArgumentError::RegistrationsController#new 错误的参数数量（2 比 1）

app/models/ability.rb:7:in `initialize' app/controllers/users/registrations_controller.rb:6:in`check_permissions'

我的ability.rb 内容如下：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user

    if user.role? :super_admin
      can :manage, :all
    elsif user.role? :admin
      can :manage, :all
    elsif user.role? :user
      can :read, :all
      # manage products, assets he owns
      can :manage, Product do |product|
        product.try(:owner) == user
      end
      can :manage, Asset do |asset|
        asset.assetable.try(:owner) == user
      end
    end
  end
end 
```

我的注册控制器显示：

```
class Users::RegistrationsController < Devise::RegistrationsController
  before_filter :check_permissions, :only => [:new, :create, :cancel]
  skip_before_filter :require_no_authentication

  def check_permissions
    authorize! :create, resource
  end
end 
```

这只发生在注册页面上。应用程序中的所有其他页面都运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:58:49.267

使用 cancan 时，您必须在控制器中使用以下行。

load_and_authorize_resource

# hex - 在 Go 中将 strconv 用于负十六进制值

> ID：15469015
> 
> 赞同：1
> 
> 时间：2013-03-18T02:46:51.593
> 
> 标签：hex, go

过去一天左右，我一直在无缘无故地使用 Go 构建一个汇编程序，以便熟悉该语言。这是我第一个使用 Go 的真正程序，所以我预料到会出现问题，但是我一次又一次地遇到一个一致的错误。我只是想出了在其他情况下修复它的其他 hacky 方法，但这次我想我需要一个答案，所以我觉得我实际上做对了。

基本上，我必须解析大量的字节值。其中一些是有符号字节，所以 -1 = 0xFF 等等。在计算标签的地址时，我需要找到它与当前地址的偏移量。以下代码是我用来获取偏移量的精简版基本版本：

```
//  lbladdr holds the target label address
//  address holds current address in memory
//  label[x] holds the offset
if address > lbladdr {
    lbladdr -= address
}
label[x] = strconv.FormatInt(int64(lbladdr), 16) 
```

这适用于正值，但是当我得到一个负地址（地址 > lbladdr）时，我得到的不是像 FE 这样的值，而是 -2。我不明白为什么标准库会在十六进制数字上附加一个负号，而且我无法在文档中找到任何关于它的内容。我看了很多其他地方，但我似乎也找不到有同样问题的人。

我希望这对我来说只是一个简单的修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:03:16.470

在十六进制数上使用负号是完全合理的。我知道在使用汇编时，通常使用实际的位模式来表示您以十六进制表示的寄存器来表示符号。然而 Go 并不知道你正在这样做。go 的格式化函数也没有像在 CPU 寄存器中那样支持十六进制值。此外，位模式将根据寄存器大小（16 对 32 对 64 和大端对小端）而有所不同。您会将它们存储在其中。因此，基础不足以按照您想要的方式打印它们。您将需要编写自己的格式化库，以支持要表示的寄存器类型的格式化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T04:52:01.860

这是设计使然：[http ://golang.org/src/pkg/strconv/itoa.go?s=628:668#L8](http://golang.org/src/pkg/strconv/itoa.go?s=628:668#L8)

您可能想要的是转换为 uint64：

```
package main

import (
    "fmt"
    "strconv"
)

func main() {
    i := -1
    fmt.Printf("%x\n", uint64(i))
    fmt.Println(strconv.FormatUint(uint64(i), 16))
} 
```

# android - 将数据库加载到文本视图中？

> ID：15469025
> 
> 赞同：0
> 
> 时间：2013-03-18T02:48:02.710
> 
> 标签：android, sql, sqlite

所以我知道的文本视图是从数据库加载的，但不完全是我想要的......

我会尽力解释这一点：

数据库：

```
public class DBAdapter_Name {
public static final String KEY_ROWID = "_id";
public static final String KEY_ITEM = "name";

private static final String TAG = "DBAdapter";

private static final String DATABASE_NAME = "NameDB";
private static final String DATABASE_TABLE = "charactername";
private static final int DATABASE_VERSION = 5;

private static final String DATABASE_CREATE = "create table if not exists charactername (_id integer primary key autoincrement, "
        + "name VARCHAR not null);";

private final Context context;

private DatabaseHelper DBHelper_name;
private static SQLiteDatabase dbname;

public DBAdapter_Name(Context ctx) {
    this.context = ctx;
    DBHelper_name = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase dbname) {
        try {
            dbname.execSQL(DATABASE_CREATE);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase dbname, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        dbname.execSQL("DROP TABLE IF EXISTS charactername");
        onCreate(dbname);
    }
}

// ---opens the database---
public DBAdapter_Name open() throws SQLException { 
    dbname = DBHelper_name.getWritableDatabase();
    return this;
}

// ---closes the database---
public void close() {
    DBHelper_name.close();
}

// ---insert a record into the database---
public long insertRecord(String name) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_ITEM, name);
    return dbname.insert(DATABASE_TABLE, null, initialValues);
}

// ---deletes a particular record---
public boolean deleteContact(long rowId) {
    return dbname.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
}

// ---retrieves all the records---
public static Cursor getAllRecords() {
    return dbname.query(DATABASE_TABLE, new String[] { KEY_ROWID, KEY_ITEM},
            null, null, null, null, null, null);
}

// ---retrieves a particular record---
public Cursor getRecord(long rowId) throws SQLException {
    Cursor mCursor = dbname.query(true, DATABASE_TABLE, new String[] {
            KEY_ROWID, KEY_ITEM }, KEY_ROWID + "=" + rowId, null, null,
            null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}

public int deleteAll(){
    return 0;

     }

// ---updates a record---
public boolean updateRecord(long rowId, String name) {
    ContentValues args = new ContentValues();
    args.put(KEY_ITEM, name);

    return dbname.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
} 
```

我如何插入记录：

```
public class CreateNew extends Activity {

DBAdapter_Name dbname = new DBAdapter_Name(this);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.create_new)
                Button btnCreate = (Button) findViewById(R.id.btnCreate);
    btnCreate.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            EditText editText1 = (EditText) findViewById(R.id.editText1);
            String nameTxt = editText1.getText().toString();
Intent PlayScreen = new Intent(getApplicationContext(),
                        PlayScreen.class);
                // ------------------------------------------------------------------------------------------------------------------------------------
                Spinner spinner1 = (Spinner) findViewById(R.id.spinner1);
                Spinner spinner2 = (Spinner) findViewById(R.id.spinner2);
                Spinner spinner3 = (Spinner) findViewById(R.id.spinner3);
                // ------------------------------------------------------------------------------------------------------------------------------------
                dbname.open();
                long insertedRowId = dbname.insertRecord(editText1.getText().toString()); //Get the rowId which was inserted.
                dbname.close();
                PlayScreen.putExtra("strAlliance", spinner1
                        .getSelectedItem().toString());
                PlayScreen.putExtra("strRace", spinner2.getSelectedItem()
                        .toString());
                PlayScreen.putExtra("strClass", spinner3.getSelectedItem()
                        .toString());
                // ------------------------------------------------------------------------------------------------------------------------------------
                startActivityForResult(PlayScreen, 0);
            }
        }
    });

    Button btnMoreInfo = (Button) findViewById(R.id.btnMoreInfo);
    btnMoreInfo.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent MoreInfo = new Intent(v.getContext(), MoreInfo.class);
            startActivity(MoreInfo);

        }
    });
}

@Override
public void onBackPressed() {
    super.onBackPressed();
    Intent BeforeYouBegin = new Intent(getApplicationContext(),
            BeforeYouBegin.class);
    startActivity(BeforeYouBegin);
    finish();
} 
```

editText 显然是你输入你想要的名字的地方

以及我如何显示记录：

```
public void DisplayRecord(Cursor c) {
    TextView textViewStrName = (TextView) findViewById(R.id.textViewStrName);
    Cursor result = dbname.getRecord(insertedRowId);
    int columnIndex = result.getColumnIndex(DBAdapter_Name.KEY_ITEM);
    String insertedName = result.getString(columnIndex);
    textViewStrName.setText(insertedName);
} 
```

现在，无论您在查看输入的内容时在 editText 框中输入了什么内容，您所看到的只是这个词：名称。

所以它正在读取数据库，但不是我想要的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:17:14.830

试试这个代码

```
 String name="";
dbname.open();
long rowId = dbname.insertRecord(editText1.getText().toString());
Cursor c = dbname.getRecord(rowId);
    startManagingCursor(c);
    if(c.moveToFirst()){
        do{
             name = c.getString(1);
        }while (c.moveToNext());
    }
    dbname.close();
    c.close();

    textViewStrName.setText(name); 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:47:30.460

要显示您刚刚在数据库中输入的内容，您需要执行此操作。

```
//Inserting the value into DB.
dbname.open();
long insertedRowId = dbname.insertRecord(editText1.getText().toString()); //Get the rowId which was inserted.
dbname.close();

//Retrieving that value from DB & displaying it.
Cursor result = dbname.getRecord(insertedRowId);;
int columnIndex = result.getColumnIndex(DBAdapter_Name.KEY_ITEM);
String insertedName = result.getString(columnIndex);
textViewStrName.setText(insertedName); 
```

# bash - 如何让 grep 先输出文件名，然后再输出多行上下文

> ID：15469029
> 
> 赞同：2
> 
> 时间：2013-03-18T02:48:14.773
> 
> 标签：bash, grep

我希望 grep 的输出类似于：

```
path/filename1-
line1
match
line3
--
path/filename2-
line1
match
line3 
```

如果我这样做，`grep -h -C 3 match file`我会接近，但没有文件名。从手册页我看不到任何其他选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:22:19.427

ack 正是这样做的。

```
$ ack get -C3
unuse
7-
8-my $url = shift || die 'specify a URL';
9-
10:$mech->get( $url );
11-
12-my $text = $mech->content;
13-

whack
47-    Note that this script uses PPI and works only on perl
48-    scripts, modules, tests, etc. PPI takes a bit of time
49-    too, so if running this on an entire large repo, you
50:    may want to multitask or get some coffee.
51-
52-    By default, searches recursively for perl files in . and
53-    identifies the subroutine most likely to invoke confusion 
```

另外，请注意，虽然这里没有显示，但输出是彩色编码的。文件名（本例中的“unuse”和“whack”）为绿色，行号为黄色，匹配的字符串为反黄色。

ack 是一个类似于 grep 的搜索工具，专门针对程序员。它可以在[http://betterthangrep.com](http://betterthangrep.com)获得，许多 *nix 发行版都将它作为一个包提供。Debian 派生的软件包将 ack 打包为“ack-grep”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:12:44.680

我不认为你可以直接用 grep 做到这一点。您也许可以编写一个包装器，也许可以使用 sed 来做到这一点。如果您使用该`-Z`标志，则 grep 会将文件名与匹配的部分分开（因此也用于`-H`获取文件名）。然后也许跟踪当前文件名，当它改变时打印出来，然后换行，否则只是从匹配行的前面删除它。想想看，perl 也可以

# c++ - 我可以在本机 C++ 服务中使用 ATL 吗？

> ID：15469030
> 
> 赞同：0
> 
> 时间：2013-03-18T02:48:22.923
> 
> 标签：c++, c, windows, winapi, atl

如果我使用本机 Windows API 调用（如 StartServiceCtrlDispatcher() 等）而不是 ATL 服务（[http://msdn.microsoft.com/en-us/library/74y2334x%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/74y2334x%28v=vs.80%29.aspx)）安装、卸载或控制我的服务并仍然使用某些 ATL 功能，这会搞砸一切吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T05:28:03.660

在服务中使用 ATL 是安全的。需要注意的一个警告是，如果该服务托管一个由其他进程使用的 COM 服务器，请确保在调用 Win2003+`StartServiceCtrlDispatcher()`之前调用`CoRegisterClassObject()`，否则`CoRegisterClassObject()`将失败。在早期的操作系统版本中，调用顺序无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T03:26:19.127

（我假设您使用的是本机代码，而不是 dotnet。是这样吗？）

ATL、MFC 之类的东西是原生 Win32 调用的包装器。在同一个应用程序中使用本机和包装器应该没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T03:07:58.050

不，通过本机 WinAPI 调用控制您的服务应该没问题，并且仍然使用 ATL 处理其他内容。我以前在生产代码中看到过这种情况。例如，WinAPI 调用控制了服务，但`<atlenc.h>`使用了一些加密函数。

也就是说，我不能保证混合*所有*ATL 函数是安全的。最好的办法是在承诺使用 ATL 函数之前阅读它的完整文档。

# php - 如何将 PHP 表中的两个值相乘以获得总数？

> ID：15469032
> 
> 赞同：0
> 
> 时间：2013-03-18T02:48:28.893
> 
> 标签：php, html, mysql

所以我有一个表格，显示来自我的数据库的数据，我想添加一个总计字段，无论如何我将如何获得金额和价格相乘然后显示到新的总计字段中？

到目前为止，这是我的代码

```
<?php
// Connection data (server_address, database, name, poassword)
$hostdb = 'localhost';
$namedb = 'xxxx';
$userdb = 'xxxx';
$passdb = '';

try {
// Connect and create the PDO object
$conn = new PDO("mysql:host=$hostdb; dbname=$namedb", $userdb, $passdb);
$conn->exec("SET CHARACTER SET utf8");      // Sets encoding UTF-8

// Define and perform the SQL query
$sql = "SELECT `id`, `wine`, `amount`, `price`, `upc` FROM `wine`";
$result = $conn->query($sql);

// If the SQL query is succesfully performed ($result not false)
if($result !== false) {
// Create the beginning of HTML table, and the first row with colums title
$html_table = '<table border="1" cellspacing="0" cellpadding="2"><tr><th>ID</th>      <th>Wine</th><th>Amount</th><th>Price</th><th>upc</th></tr>';

// Parse the result set, and adds each row and colums in HTML table
foreach($result as $row) {
  $html_table .= '<tr><td align="center">' .$row['id']. '</td><td align="center">' .$row['wine']. '</td><td align="center">' .$row['amount']. '</td><td align="center">' .$row['price']. '</td><td align="center">' .$row['upc']. '</td></tr>';
 }
}

 $conn = null;        // Disconnect

 $html_table .= '</table>';           // ends the HTML table

 echo $html_table;        // display the HTML table
}
catch(PDOException $e) {
echo $e->getMessage();
}
?>
<a href="/admin/">Admin</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T18:06:47.073

```
 You could easily retrieve the total by calculating it in the query itself.

    change your sql to:
    SELECT id, wine, amount, price, upc, (amount*price) as total FROM wine;

    display it like this:

    $html_table .= '<tr><td align="center">' .$row['id']. '</td><td align="center">' .$row['wine']. '</td><td align="center">' .$row['amount']. '</td><td align="center">' .$row['price']. '</td><td align="center">' .$row['upc']. '</td>
<td align="center">' .$row['total']. '</td></tr>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:24:52.840

有时显示只会显示 XX * xx，在这种情况下，我将包装如下值：

```
$total = ($row['amount']) * ($row['price']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T02:52:20.393

像这样？

```
'<td>' . $row['amount'] * $row['price'] . '</td>' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T02:52:34.577

```
$total_price = $row['amount'] * $row['price']; 
```

您还需要这些调整：

```
 $html_table = '<table border="1" cellspacing="0" cellpadding="2"><tr><th>ID</th>      <th>Wine</th><th>Amount</th><th>Price</th><th>Total</th><th>upc</th></tr>'; 
```

在循环内：

```
 $html_table .= '<tr><td align="center">' .$row['id']. '</td><td align="center">' .$row['wine']. '</td><td align="center">' .$row['amount']. '</td><td align="center">' .$row['price']. '</td><td align="center">' .$row['upc']. '</td><td align="center">' . $total_price . '</td></tr>'; } 
```

# css - 试图让 div 块从左到右，但它们卡在左边

> ID：15469033
> 
> 赞同：0
> 
> 时间：2013-03-18T02:48:29.230
> 
> 标签：css, html

我试图让这个学生工作人员的博客文章从左到右并自动换行到下一行。问题是这些`div`块只会留在左侧。CSS中是否缺少我的东西？

```
.page_container {
  float: left;
  font-family: Arial,Helvetica,sans-serif;
  font-size: 16px;
  font-weight: normal;
  line-height: 20px;
  margin-top: 30px;
  min-height: 250px;
  padding: 0 15px;
  position: relative;
  width: 700px;
}

.staff_container {
  float: left;
  font-family: Arial,Helvetica,sans-serif;
  font-size: 16px;
  font-weight: normal;
  line-height: 20px;
  margin-top: 30px;
  padding: 0;
  position: relative;
  width: 300px;
} 
```

[韦伯州立 PRSSA 员工页面在这里](http://www.weberstateprssa.com/staff-members/ "www.weberstateprssa.com")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:52:51.550

你的意思是这样吗？

![在此处输入图像描述](../Images/59b3d12d38c955bd2fda3c21e13fdbef.png)

我添加了这些样式：

```
.post {
    float: left;
    width: 300px;
}

.staff_container {
    width: 100%;
} 
```

# c# - ExecuteAsyncPost 与 ExecutePost 上的 RESTSharp 空正文

> ID：15469034
> 
> 赞同：0
> 
> 时间：2013-03-18T02:48:31.667
> 
> 标签：c#, rest, restsharp

我正在使用 RestSharp 构建对我的 MVC 入口点的 Rest 访问（实际上，我可以从 monotouch 中使用它们，但现在我正在 Windows 7、vs2010、.net 4、RestSharp 104.1 上进行测试）

如果我创建一个请求并调用

```
client.ExecuteAsPost<Model.Client>( request ); 
```

它有效，我可以在提琴手中看到原始数据包

```
POST http://localhost.:49165/Services/Client/ClientAdminService/FindClient HTTP/1.1 
Timestamp: Monday, March 18, 2013 1:56:02 AM 
X-PS-Authentication: YADAYADA:<deleted for brevity>== 
Accept: application/xml 
User-Agent: RestSharp 104.1.0.0 
Content-Type: application/xml; charset=utf-8 
Host: localhost.:49165 
Content-Length: 256 
Accept-Encoding: gzip, deflate 
Connection: Keep-Alive

<Client xmlns="http://schemas.datacontract.org/2004/07/PSRMWebService.Model.Version1" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><ID>0</ID><MailingAddress i:nil="true"/><Mask>Name</Mask><Name>Rykercom</Name><PhysicalAddress i:nil="true"/></Client> 
```

正如你在最后看到的那样，我需要发送到服务器的序列化数据块（Model.Client 类型），这是使用添加到请求中的

```
Request.AddParameter("application/xml; charset=utf-8", DataPacket, RestSharp.ParameterType.RequestBody); 
```

其中 DataPacket 是使用 DataContractSerializer 创建的序列化 blob

现在，如果我将代码更改为调用

```
Client.ExecuteAsyncPost<Model.Client>(Request, (response, handle) => { OnFindClientAsyncComplete(response, handle, Callback ); }, "POST"); 
```

使用 Fiddler，我得到一个完全不同的数据包，没有正文，没有内容类型，因此服务器响应失败。

```
POST http://localhost.:49165/Services/Client/ClientAdminService/FindClient HTTP/1.1
Timestamp: Monday, March 18, 2013 2:35:08 AM
X-PS-Authentication: YADAYADA:<deleted for bevity>==
Accept: application/xml
User-Agent: RestSharp 104.1.0.0
Host: localhost.:49165
Content-Length: 0
Accept-Encoding: gzip, deflate
Connection: Keep-Alive 
```

X-PS-Authentication 只是一个自定义身份验证字符串。有人知道为什么异步调用给我留下了一个空的消息正文吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:17:17.717

简单的答案是克隆当前的 github 存储库以供休息，并自己构建它。看来 executeasync 的修复程序已经在树中。

拥有 Nuget 包的任何机会都可以将其更新到最新的来源？

谢谢

# css - css3 动画硬闪烁（帧之间没有淡入淡出）

> ID：15469036
> 
> 赞同：9
> 
> 时间：2013-03-18T02:49:16.460
> 
> 标签：css, animation, opacity, blink

尝试使用 css3 动画连续闪烁三个元素。我已经让它运行了，但是每一帧都有一个淡入淡出，我想删除它。理想情况下，每个元素保持可见 1 秒，然后立即隐藏。

我已经尝试设置动画与帧在`0%`和`99%`for`opacity:1`和`100%`for`opacity: 0`但仍然没有运气。

我希望有办法消除褪色！

[webkit js小提琴](http://jsfiddle.net/rfGDD/)

CSS：

```
.motion.play .frame {
    -webkit-animation-name: flash;
    -webkit-animation-duration: 3s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-direction: linear;
}
    .frame:nth-of-type(2) {
        -webkit-animation-delay: 1s;
    }
    .frame:nth-of-type(3) {
        -webkit-animation-delay: 2s;
    }

    @-webkit-keyframes flash {
        0% {
            opacity: 1;
        }
        100% {
            opacity: 0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-01-27T13:18:20.257

只需定义您的动画，使其尽可能长时间地保持一种状态，然后尽快切换到另一种状态。像这样：

```
@-webkit-keyframes flash {
      0% { opacity: 1; }
     49% { opacity: 1; }
     50% { opacity: 0; }
    100% { opacity: 0; }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T03:40:01.790

正确使用`animation-timing-function`：

[http://jsfiddle.net/rfGDD/1/](http://jsfiddle.net/rfGDD/1/)（仅限 WebKit）

```
.motion.play .frame {
    -webkit-animation-name: flash;
    -webkit-animation-duration: 3s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-direction: normal; /* not "linear" */
    -webkit-animation-fill-mode:forwards;
    -webkit-animation-timing-function:steps(3, end);
} 
```

[MDN 文档`fill-mode`](https://developer.mozilla.org/en-US/docs/CSS/animation-fill-mode)

[MDN 文档`direction`](https://developer.mozilla.org/en-US/docs/CSS/animation-direction)

[`steps()`关于计时功能的 MDN 文档](https://developer.mozilla.org/en-US/docs/CSS/timing-function#The_steps%28%29_class_of_timing-functions)

**编辑**：

糟糕，刚刚意识到逻辑缺陷。

修订： http: [//jsfiddle.net/rfGDD/3/](http://jsfiddle.net/rfGDD/3/)（仅限 WebKit）

除了上述更改，将`flash`动画更改为以下内容：

```
@-webkit-keyframes flash {
    0% {
        opacity: 1;
    }
    33% {
        opacity: 0;
    }
    100% {
        opacity: 0;
    }
} 
```

问题是，动画播放了 3 秒，但是每个元素都需要保持在`opacity:0`第 1 秒之后的状态，所以我需要将动画分成 2 个阶段（时间长度比为 1:2），所以元素看起来像他们在最后阶段停留 2 秒。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-18T04:05:09.217

您可以将不透明度保持最长时间并快速更改它。

尝试这个：

```
.blinkMe {
  animation: blink 1s linear infinite;
}

@keyframes blink {
  0%,50% {
    opacity: 0;
  }
  51%,100% {
    opacity: 1;
  }
} 
```

# ruby-on-rails - 一个子域的 Facebook 服务器端登录错误

> ID：15469042
> 
> 赞同：0
> 
> 时间：2013-03-18T02:50:20.000
> 
> 标签：ruby-on-rails, facebook

我已经成功实现了使用 Facebook 登录的登录路由。

*   [http://[sub.]example.com/fb/login](http://[sub.]example.com/fb/login)
*   [http://[sub.]example.com/fb/login_callback](http://[sub.]example.com/fb/login_callback)

这适用于任何子域。但是最近我发现这不适用于我的`m.buy`子域。调用登录时，我的浏览器将显示以下消息：

> 安全警告：与任何人共享上述 URL 与与他们共享您的 Facebook 密码相同 - 这将使他们能够访问您的 Facebook 帐户。尽管您可能得到了承诺，但您不会收到现金、礼品卡或免费机票来换取此 URL。

这是登录错误的网络跟踪： ![错误登录](../Images/64760cf9f054364cee351e93dcc75123.png)

这是使用另一个子域成功登录的网络跟踪： ![登录成功](../Images/203ad9d0db091718f604873649e8a019.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T06:06:10.453

看起来特定的子域被 Facebook 视为垃圾邮件。估计有人举报了。我目前正在根据这个答案[给 Facebook 写一封实体信。](https://webmasters.stackexchange.com/questions/24997/website-falsely-blocked-because-of-spam-does-anyone-know-how-we-should-proceed)如果有效会更新。

# java - 如何编写一个递归方法，将整数的 ArrayList 作为输入并返回最小整数？

> ID：15469045
> 
> 赞同：0
> 
> 时间：2013-03-18T02:50:25.297
> 
> 标签：java, recursion, arraylist

这通常是如何完成的，但它必须是递归的，没有 for、do-while 和 while 循环。仅 if 语句。

```
import java.util.ArrayList;
import java.util.Scanner;

public class arrayex1 {

    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);
        ArrayList<Integer> numbers = new ArrayList<Integer>();

        System.out.println("Enter numbers: ");

        for (int i = 0; i < 10; i++) {
            int num = input.nextInt();
            numbers.add(num);
        }

        for (int i = 0; i < numbers.size(); i++) {
            if (numbers.get(findMin(numbers)) == i) { // If the 'smallest' index value is equal to i.
                System.out.println(numbers.get(i) + " <== Smallest number");
            } else {
                System.out.println(numbers.get(i));
            }
        }
    }

    public static int findMin(ArrayList<Integer> n) {

        int min = 0; // Get value at index position 0 as the current smallest.

        for (int i = 0; i < n.size(); i++) {
            if (n.get(i) < min) {
                min = i;
            }
        } 

        return min;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:53:26.050

您可以对其进行编码的一种方法：

findMin 应该返回 int，取`ArrayList<Integer>`整数，int min，int index 并用 (integers, Integer.MAX_VALUE, 0) 调用。

findMin 应该检查 integers[index] 的值是否小于 min - 如果是，它会更新 min。

然后，如果它不在整数的最后一个索引处，它将返回调用自身的值（整数，min，++index）。

如果是，它将返回 min。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:00:55.963

干得好 ...

```
public static void main(String[] args) throws Exception {

    final List<Integer> numbers = new ArrayList<Integer>() {
        {
            add(3);
            add(4);
            add(6);
            add(1);
            add(9);
        }

    };

    final int min = findSmallest(numbers.iterator(), Integer.MAX_VALUE);
    System.out.println("Smallest: " + min);
}

private static int findSmallest(Iterator<Integer> iterator, Integer max) {

    int min = Math.min(iterator.next(), max);
    if (iterator.hasNext()) {
        min = findSmallest(iterator, min);
    }

    return min;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T03:04:21.683

你可以做这样的事情。

```
int min = 2876529394; // Holds the smallest element. Put a number that you know won't 
                      // be in the ArrayList just to make the code simpler. If you don't
                      // have such a number, just implement a counter variable.

findMin( numbers, 0 );
public void findMin( ArrayList<Integer> a, int index ) {

    if( index < a.size() ) {

        if( a.get( index ) < min )
             min = a.get( index );

       findMin( a, ++index );

   }
} 
```

在这里，您基本上在做与 for 循环原则上完全相同的事情，但您使用的是递归。

# installation - NSIS 错误：无效脚本：从未有过 OutFile 命令

> ID：15469047
> 
> 赞同：1
> 
> 时间：2013-03-18T02:50:38.823
> 
> 标签：installation, nsis, uninstallation

我正在尝试学习 NSIS 来为项目创建安装程序和卸载程序，并且我正在尝试按照教程部分中的示例进行操作。我尝试了以下脚本：-

```
# define the name of the installer
outfile "installer.exe"

# define the directory to install to, the desktop in this case as specified  
# by the predefined $DESKTOP variable
installDir $DESKTOP\Harshit\NSIS\Scripts

# default section
section

# define the output path for this file
setOutPath $DESKTOP\Harshit\NSIS\Files

# define what to install and place it in the output path
File test1.txt

# define uninstaller name
writeUninstaller $DESKTOP\Harshit\NSIS\Scripts\uninstaller.exe

sectionEnd

# create a section to define what the uninstaller does.
# the section will always be named "Uninstall"
section "Uninstall"

# Always delete uninstaller first
delete $DESKTOP\Harshit\NSIS\Scripts\uninstaller.exe

# now delete installed file
delete $DESKTOP\Harshit\NSIS\Scripts\Files\test1.txt

sectionEnd 
```

但是，我收到一条错误消息：

> 无效的脚本：从来没有 OutFile 命令。

我可以在顶部看到 outfile 命令，但我不知道为什么它不起作用。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T05:20:51.443

是否可以像处理一个 .nsi 文件并实际将不同的 .nsi 文件传递​​给编译器一样简单？

您可以在脚本顶部添加`!error "Hello World"`或类似的简单内容以找出...

*编辑：*

如果它无法打开输出文件以写入错误消息应该是“无法打开输出文件”并且与 OutFile 无关。

除非您使用 stdin 传递脚本，否则即使您根本不使用 OutFile，它也应该选择 .nsi 文件名作为基本名称。

您能否展示使用您传递给 makesis.exe 的确切参数和您的真实脚本的副本？

# jquery - 使用 Rails、jquery 和 best_in_place gem 就地编辑

> ID：15469050
> 
> 赞同：3
> 
> 时间：2013-03-18T02:51:16.367
> 
> 标签：jquery, ruby-on-rails, ajax, best-in-place

我有一个任务列表应用程序，其中任务按类别显示。

我在两个地方列出了类别。我允许使用 best_in_place gem 就地编辑类别名称。我的工作正常。我的问题是，由于我在两个地方都有类别名称，并且我只是在原地编辑它的一个出现，所以我需要在表单提交后用新名称更新未编辑的名称的另一个外观. 刷新/重新加载受影响类别名称的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:07:06.873

您需要使用回调。

使用 gem 的描述（[https://github.com/bernat/best_in_place](https://github.com/bernat/best_in_place)）我得到了这个：

```
<%= best_in_place @user, :name, :data => {:user_name => @user.name}, :classes => 'custom_class'  %>

$('.custom_class').bind("ajax:success", function(){ alert('Name updated for '+$(this).data('userName')); }); 
```

因此，在您的情况下，您需要执行以下操作：

```
$("#other_ocurrence_id").html($(this).data('userName')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T22:03:49.603

如果你有这个代码（haml）

```
= best_in_place @user, :name, :classes => 'name-edit' 
```

你确实需要一个回调。但是，在回调处理程序的上下文中，“this”表示调用的元素，所以你可以这样做

```
$('.name-edit').on 'ajax:success', (event, data, status, xhr) ->
  $('.some-other-widget').html this.innerHTML 
```

并以这种方式将新值传递给另一个小部件。回调处理程序中的事件还具有 currentTarget 作为属性，它是启动 ajax 请求的小部件。但是，我认为没有必要。

# php - 使用 RecursiveIteratorIterator 列出文件夹中的文件非常棒。我也可以获得父路径和完整路径吗？

> ID：15469053
> 
> 赞同：7
> 
> 时间：2013-03-18T02:51:36.573
> 
> 标签：php, file, spl

我需要列出文件夹及其子文件夹中的所有文件（具有某些扩展名）。我使用了 RecursiveIteratorIterator，如@Matthew's great answer in [PHP list all files in PHP list all files in directory 中](https://stackoverflow.com/questions/3826963/php-list-all-files-in-directory)所述。

*   我将搜索的根设置为“..”，所有文件名都有一个前缀“../”。如何仅获取文件名？
*   除了文件名之外，我如何获得其父文件夹名称？
*   ...以及如何获取文件名的完整路径？

最后一件事：显示文件树，或者可能所有没有子目录的目录，都是处理文件时可能想要做的事情的例子。您建议如何将此数据传递到客户端以及数据结构的外观如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T03:00:01.837

`$filename`在那个答案中实际上不是一个字符串。它是一个类型的对象，[`SplFileInfo`](http://php.net/manual/en/class.splfileinfo.php)可以像字符串一样使用，但它也提供了更详细的信息：

*   [`SplFileInfo::getFilename()`](http://php.net/SplFileInfo.getFilename)- 文件名。
*   [`SplFileInfo::getPathname()`](http://php.net/SplFileInfo.getPathname)-- 文件路径
*   [`SplFileInfo::getPathInfo()`](http://php.net/SplFileInfo.getPathInfo)-- 路径的 SplFileInfo 对象
*   [`SplFileInfo::getRealPath()`](http://php.net/SplFileInfo.getRealPath)-- 规范化的绝对​​路径名；[`realpath()`](http://php.net/realpath)有关更多信息以及与*Pathname*的区别，请参阅

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T02:59:54.397

以此为基础：

```
$iter = new RecursiveDirectoryIterator('../');

foreach (new RecursiveIteratorIterator($iter) as $fileName => $fileInfo) {
   $fullPath = (string) $fileInfo;
} 
```

每个都`$fileInfo`将返回一个[`SplFileInfo`](http://php.net/manual/en/class.splfileinfo.php)对象。除了许多其他方法之外，还可以轻松访问路径和文件名。

```
phpSplFileInfo Object
(
  [pathName:SplFileInfo:private] => ./t.php
  [fileName:SplFileInfo:private] => t.php
) 
```

我可能弄错了，但是要访问父文件夹名称，除非您通过树记录它，否则最简单的方法是使用`dirname`并附`../`加到路径中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T09:13:29.977

```
<?php
    $iterator = new FilesystemIterator(dirname(__FILE__), FilesystemIterator::CURRENT_AS_PATHNAME);
    foreach ($iterator as $fileinfo) {
        echo $iterator->current()->getPathname() . "\n";
    }
 ?> 
```

# c# - 超时已过。在操作完成之前超时时间已过或服务器没有响应。该语句已终止

> ID：15469057
> 
> 赞同：0
> 
> 时间：2013-03-18T02:51:51.037
> 
> 标签：c#, winforms

```
using (SqlConnection connection1 = new SqlConnection(StringCon))
{
    string sSQL = string.Format("UPDATE Guest SET FirstName=@Content WHERE GuestID=@GuestID");
    SqlCommand MyCmd = new SqlCommand(sSQL, connection1);
    SqlParameter param = MyCmd.Parameters.Add("@Content", SqlDbType.NVarChar);
    param.Value = "Tony";
    SqlParameter param1 = MyCmd.Parameters.Add("@GuestID", SqlDbType.NVarChar);
    param1.Value = GuestID;
    connection1.Open();
    iResult = MyCmd.ExecuteNonQuery();
    connection1.Close();
} 
```

但是此代码无法执行，因为此错误

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。该语句已终止。

为什么会出现错误以及如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:59:50.807

好吧，看来此命令花费的时间比您预期的要长，您可以尝试为您的 SqlCommand 指定超时（将其扩展到您认为适合该情况的任何内容）：

```
SqlCommand MyCmd = new SqlCommand(sSQL, connection1);
MyCmd.CommandTimeout = 1000; // in seconds 
```

# java - 移除一个对象和所有依赖对象

> ID：15469061
> 
> 赞同：1
> 
> 时间：2013-03-18T02:52:18.760
> 
> 标签：java, object, garbage-collection

我有一些自定义对象，例如：

```
public class House
{
    private Roof r;
    private Wall w;
    private Floor f;

    public House()
    {
        this.r = new Roof();
        this.w = new Wall();
        this.f = new Floor();
    }
} 
```

然后我创建一个新的`House`对象实例：

```
public static void main()
{
    House h = new House();
} 
```

所以，现在我有四个对象：

*   房子 h
*   屋顶
*   墙
*   楼层 f

屋顶`r`、墙壁`w`和地板`f`完全取决于房子。

因此，如果我要删除 House `h`，我希望它们也被删除。

正确的方法是什么？

* * *

如果我将此方法添加到`House`类怎么办：

```
public void remove()
{
    this.r = null;
    this.w = null;
    this.f = null;
} 
```

当我需要移除`h`所有组件的房子时，请写：

```
public static void main()
{
    h.remove();
    h = null;
} 
```

我认为这应该有效，但不确定。

另外，也许有更好的方法？

*是的，没有关于公共房屋，旅馆等的东西。:)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:03:10.987

你永远不能依赖垃圾收集的发生。即使你打电话`System.gc()`，你也不能保证它会做任何事情。当系统决定运行垃圾收集时，可能会收集无法访问的引用，但如果您运行一个小型应用程序，收集器可能永远不会运行。

如果需要在处理对象时收到通知，则应使用 a`java.lang.ref.PhantomReference`和 a `java.lang.ref.ReferenceQueue`。不要依赖`Object.finalize()`。但这似乎不是您的问题；你只是想自己清理一下。只有当您的应用程序的性能需要它时，您才应该关心它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:28:57.263

您不需要清空所有实例变量，`House`因为当没有对`House`.

> 如果从其他地方引用**它们怎么办？**但我希望通过删除“父”对象来删除它们。

为此，每次从类外的某个地方引用对象时，都应该使用[弱引用](http://en.wikipedia.org/wiki/Weak_reference)`House`。这样，当不再有对 的引用时，对象将被垃圾收集`House`，因为指向它们的唯一强引用在`House`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T02:59:48.297

您给出的解决方案几乎是正确的。将对象引用标记为 null 后，只要该垃圾收集器开始运行，该对象就会被 JVM 垃圾收集器销毁并从内存中删除。

您也可以在将引用变量设置为 NULL 后手动指示垃圾收集器收集垃圾。

# ruby-on-rails - 在 create_staging 期间将 Rails 应用程序部署到 EC2 时的 Mongo::ConnectionFailure

> ID：15469063
> 
> 赞同：1
> 
> 时间：2013-03-18T02:52:28.217
> 
> 标签：ruby-on-rails, mongodb, amazon-ec2, rubber

我正在尝试使用 Rubber 将我的第一个应用程序部署到亚马逊 ec2。我已经尝试了好几次，每次都会出现 Mongo::Connection Failure 的过程错误。我已经尝试了来自多个层的几种不同的实例类型，但仍然遇到相同的错误。只是不知道如何进行。

这是错误日志：

```
 ** [out :: production.foo.com] /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongo-1.3.1/lib/mongo/connection.rb:518:in `connect'
 ** [out :: production.foo.com] :
 ** [out :: production.foo.com] Failed to connect to a master node at production.foo.com:27017
 ** [out :: production.foo.com] (
 ** [out :: production.foo.com] Mongo::ConnectionFailure
 ** [out :: production.foo.com] )
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongo-1.3.1/lib/mongo/connection.rb:656:in `setup'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongo-1.3.1/lib/mongo/connection.rb:101:in `initialize'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongo-1.3.1/lib/mongo/connection.rb:152:in `new'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongo-1.3.1/lib/mongo/connection.rb:152:in `from_uri'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongoid-2.4.5/lib/mongoid/config/database.rb:89:in `master'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongoid-2.4.5/lib/mongoid/config/database.rb:22:in `configure'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongoid-2.4.5/lib/mongoid/config.rb:273:in `configure_databases'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongoid-2.4.5/lib/mongoid/config.rb:94:in `from_hash'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongoid-2.4.5/lib/mongoid/config.rb:109:in `block in load!'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongoid-2.4.5/lib/mongoid/config.rb:108:in `tap'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongoid-2.4.5/lib/mongoid/config.rb:108:in `load!'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongoid-2.4.5/lib/mongoid.rb:147:in `load!'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/mongoid-2.4.5/lib/mongoid/railtie.rb:84:in `block in <class:Railtie>'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/initializable.rb:30:in `instance_exec'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/initializable.rb:30:in `run'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/initializable.rb:55:in `block in run_initializers'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/initializable.rb:54:in `each'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/initializable.rb:54:in `run_initializers'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/application.rb:96:in `initialize!'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
 ** [out :: production.foo.com] from /usr/local/graylog2-web-interface-0.9.6p1/config/environment.rb:6:in `<top (required)>'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `block in require'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `block in load_dependency'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:640:in `new_constants_in'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `load_dependency'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/application.rb:83:in `require_environment!'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/commands/runner.rb:40:in `<top (required)>'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/commands.rb:63:in `require'
 ** [out :: production.foo.com] from /usr/local/rubies/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/commands.rb:63:in `<top (required)>'
 ** [out :: production.foo.com] from ./script/rails:6:in `require'
 ** [out :: production.foo.com] from ./script/rails:6:in `<main>'
    command finished in 66584ms
failed: "/bin/bash -l -c 'sudo -p '\\''sudo password: '\\''  bash -l /tmp/bootstrap_graylog_web'" on production.foo.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:13:36.753

我遇到了完全相同的问题，老实说，我只是再次运行'cap Rubber：bootstrap'，出于某种原因，解决了它......

# c - 带有 switch 语句的交互式菜单

> ID：15469064
> 
> 赞同：0
> 
> 时间：2013-03-18T02:52:31.173
> 
> 标签：c, eclipse

嗨，我正在尝试用 C 中的 switch 语句制作一个交互式菜单。虽然我不确定如何触发具有某些参数的函数。我是一个完全的初学者，我很难做到这一点。switch 语句中的函数需要参数，尽管我希望函数询问数字。我将其作为一项作业进行，无法提供实际代码，因此我制作了这个模型。感谢您的帮助。

这是我可能使用的代码示例。

```
#include <stdio.h>

void printMenu()
{
    int choice;

    do
    {
        printf("Main Menu:\n");
        printf("1) do this\n");
        scanf("%d", &choice);

        switch (choice)
        {
            case 1:
                function(); /* though this needs the arguments */
                break;
        }
    } while (choice != 7);

    int main(void)
    {
        printMenu();
        return 0;
    }

    void function(int number1, float number2)
    {
        /*calculation*/
        printf("enter your numbers");
        /* Not sure how to read the numbers in here */
        printf("%d + %d = %d", number1, number2, number1 + number2);
        return;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:58:28.003

如果您希望`switch`尽可能小，那么只需调用另一个接收输入的函数，然后调用该函数...

```
case 1:
   read_input_and_function()
   break;

...

void read_input_and_function(void)
{
   printf("Enter your numbers: ");
   /* scanf number1, number2 */
   function(number1, number2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:59:10.517

> switch 语句中的函数需要参数，尽管我希望函数询问数字。

如何先询问参数，然后调用函数。这样，两个参数可以声明一次，并在同一个 switch 的其他函数中使用，但根据选择的情况进行定义。

```
void function1(int, float);

   void printMenu()
   {

     int choice = 0 , num1 = 0;
     float num2 = 0;

     do
      {
          printf("Main Menu:\n");
          printf("1) do this\n");
          scanf("%d", &choice);

          switch (choice)
          {
              case 1:
                  printf("\nEnter number 1\n");
                  scanf("%d",&num1);
                  printf("\nEnter number 2\n");
                  scanf("%f",&num2);
                  function1(num1,num2);
                  break;
          }
      } while (choice != 7);
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-04T06:27:01.320

```
#include <stdio.h>
#include <stdlib.h>

#define Pi 3.14159216

/*  
*small program of how to create a menu
*/

main ()
{
float degree,radians;
int input;
/*degrees to radians */
float degreesToRadians (float deg)
{
return ((Pi * deg) / 180.0);
}

/*radians to degrees*/
float radiansToDegrees (float rad)
{
 return rad * (180 / Pi);
}
void menu ()
{
 printf ("\n");
 printf ("1\. degrees\n");
 printf ("2\. radians\n");
 printf ("3\. quit\n");
do
switch (input) {
case 1:
          printf ("\n");
          printf ("\n");

          printf (" Enter value of degrees: ");
          scanf ("%f", &degree);
          printf ("RADIANS = %f \n\n", degreesToRadians (degree));
          menu (); 
          break;

case 2:
          printf ("\n");
          printf ("\n");

          printf (" Enter value of radians: ");
          scanf ("%f", &radians);
          printf ("DEGREES = %f \n\n", radiansToDegrees (radians));
          menu (); 
          break;
case 3:
          printf (" quiting app \n");
          exit (0);
          break;
default:
      printf ("wrong option\n");
      break;
  }
while (input != 3);
    getchar ();   
   }
 }
menu ();
} 
```

# mysql - 将 MySQL 结果限制在许多组中的第一个

> ID：15469074
> 
> 赞同：0
> 
> 时间：2013-03-18T02:54:26.600
> 
> 标签：mysql, sql

我正在运行一个查询

```
("SELECT size FROM block WHERE block_model = '".$_SESSION['block']."'") 
```

这给了我一系列的结果，比如

> 大 大 大 中 中 中 小 小 小

有什么方法可以将每个“集合”限制为仅其第一个结果，这样除了编辑我的数据库结构之外，我最终只会得到 1 个大、1 个中、1 个小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:55:58.750

看一下[`DISTINCT`](http://dev.mysql.com/doc/refman/5.0/en/select.html)MySQL 中的关键字。

```
"SELECT DISTINCT size
 FROM block
 WHERE block_model = '" . $_SESSION['block'] . "'" 
```

根据您的 MySQL 版本和表的设置方式，您还可以使用[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/select.html)子句来获得更好的性能。

```
 "SELECT size
  FROM block
  WHERE block_model = '" . $_SESSION['block'] . "'
  GROUP BY size" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:55:54.257

尝试添加`DISTINCT`仅获取唯一记录的

```
$sessionVal = $_SESSION['block'];
$query = "SELECT DISTINCT size FROM block WHERE block_model = '$sessionVal'"; 
```

# ruby-on-rails - Rails 3 和 Thin。有没有办法在瘦启动后执行文件？

> ID：15469075
> 
> 赞同：1
> 
> 时间：2013-03-18T02:54:26.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3, thin

我目前有一个 Rails 3.2 应用程序，我将使用 Thin 作为 Web 服务器。我还没有找到方法，也不知道我什至尝试的方法是否可行，这就是我来这里询问的原因。我想要做的是在我使用通常的 bundle exec thin start 启动我的 rails 应用程序之后执行一个 ruby​​ 文件/脚本以加载另一个将使用相同的基于 web 事件的迷你应用程序（纯 ruby​​ 非 web 框架）服务器/数据存储作为主要的 Rails 应用程序。是否有这样的钩子，无论是瘦配置还是 rails 启动配置来完成这样的事情？

-编辑-

澄清一下，迷你应用程序位于自己目录中的 rails 应用程序中，它不是外部应用程序，这就是它共享资源的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:32:01.397

你试过[工头](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)吗？它是一个工具，用于描述和启动您的应用程序所需的所有单个进程（可能涵盖您的主 Web 服务器、瘦服务器和您提到的辅助 Ruby 进程）。您只需安装 Foreman，然后编写[`Procfile`](http://ddollar.github.com/foreman/)描述两个进程以在启动时运行。

# mysql - 为什么 MySQL 不使用索引？

> ID：15469076
> 
> 赞同：2
> 
> 时间：2013-03-18T02:54:35.553
> 
> 标签：mysql, sql, database

我们的 MySQL(Percona Server) 数据库有一个包含 1000 万行的大表，有很多超过 40 秒的慢查询，如下所示：

```
 SELECT col1, Seller, col3, col4, Id, col5  
    FROM table1 
   WHERE Seller = 346761 
     AND col1 IN (2, 3, 4) 
     AND col3 = 1  
     AND col4 NOT IN (5,6,7)  
ORDER BY Id DESC 
   LIMIT 0, 20; 
```

我在`Seller`, 和`col1`, `col3`,上创建了索引`col4`。这些索引是单独的，而不是多列索引（AKA 覆盖索引）。并且`Id`是主键。

EXPLAIN 显示 MySQL 使用主键作为索引查询此 sql，而不是关于卖方的索引。

```
+----+-------------+------------------+-------+--------------------+---------+---------+------+------+-------------+
| id | select_type | table            | type  | possible_keys      | key     | key_len | ref  | rows | Extra       |
+----+-------------+------------------+-------+--------------------+---------+---------+------+------+-------------+
|  1 | SIMPLE      | trans_audit_list | index | Seller,AuditStatus | PRIMARY | 8       | NULL | 1483 | Using where | 
+----+-------------+------------------+-------+--------------------+---------+---------+------+------+-------------+ 
```

当 I 时`force index (Seller)`，它非常快，0.7 秒。

而且我发现如果不使用limit语句，这个查询会使用`Seller`索引，会非常快。为什么 MySQL 不使用 index on `Seller`with limit 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:01:22.007

正如您所遇到的，拥有索引并不意味着它会被使用。这适用于每个数据库——索引选择取决于查询优化器。正如您所尝试的，强制索引并不意味着您将获得最快的结果。

之后，查询缓存可能对您没有帮助——查询计划可以被缓存，因此甚至不考虑索引。

MySQL 每个语句只使用一个索引，因此覆盖索引（多列）是一个好主意，但您必须对其进行测试才能确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:28:29.713

添加到`ORDER BY DESC`+`LIMIT`子句的多个可能的索引情况[对于 mysql](http://www.mysqlperformanceblog.com/2006/09/01/order-by-limit-performance-optimization/)的优化器来说是一个常见的问题情况，并且强制索引实际上可能是合法的极少数情况之一。

另请注意，您的子句`IN (...)`对优化器来说是一个额外的麻烦。

如果你真的不需要它，我建议按 id 排序，`ASC`而不是`DESC`这样引擎可以使用主键排序的好处，`ASC`直到进一步实施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T04:14:51.897

您在 [Seller] 上的非集群索引可能有太多碎片，并且您的统计信息可能已经过时，那么查询优化器可能不会选择最佳查询计划。检查碎片，更新统计信息，或者在卖家上重新构建你的非集群索引，当然如果你也可以为这个查询创建覆盖索引，如果这个查询被用户频繁使用，并且值得付出代价。创建覆盖索引时，请确保最终用户最常使用的顺序。就像在您的查询中一样，覆盖索引应该在 [seller->col1->col3->col4]

# client-server - 使用 Java 7 的富客户端的 Jaas/Krb5LoginModule 是否可以实现 Windows SSO

> ID：15469077
> 
> 赞同：1
> 
> 时间：2013-03-18T02:54:46.397
> 
> 标签：client-server, single-sign-on, jaas

看来，使用 Java 6，我能够让登录的用户 TGT 生成服务票证；但是，当我切换到 Java 7 时，我无法再获得 TGT。调试显示“在 LSA 中找不到 TGT”。我在同一台 Windows 7 机器上，只需在 Eclipse 中进行切换。

我找到了其他人尝试过的解决方案，例如添加 AllowTgtSessionKey 注册表、不以本地管理员身份登录以及禁用 UAC。我已经尝试了所有这些，但似乎没有一个有效，我不希望客户需要做任何这些。

那么，有没有人成功地实现了这一点，用户只需使用他已经登录的 Windows 凭据就可以访问富客户端？我正在为我们的富客户端和 Web 客户端寻找纯 Java 解决方案。有没有更好的纯 Java 解决方案？

# android - 无法在 md2 模型上加载纹理

> ID：15469086
> 
> 赞同：2
> 
> 时间：2013-03-18T02:56:18.137
> 
> 标签：android, opengl-es, textures, rajawali

我正在尝试使用 Rajawali 框架在 md2 模型上加载纹理。但我就是做不到。它没有显示任何错误，但只有一些警告。我不确定是我的代码问题还是纹理问题。我设法加载了模型。

```
 MD2Parser parser = new MD2Parser(mContext.getResources(), mTextureManager, R.raw.fighter);
    parser.parse();

    mOgre = (VertexAnimationObject3D) parser.getParsedAnimationObject();
    mOgre.addLight(mLight);
    DiffuseMaterial material = new DiffuseMaterial(true);
    Bitmap texture = BitmapFactory.decodeResource(mContext.getResources(), R.drawable.fighter);
    TextureManager tTextureManager = new TextureManager();
    TextureInfo tInfo = tTextureManager.addTexture(texture);
    mOgre.setMaterial(material);
    mOgre.setPosition(0, 0, 20);
    mOgre.setY(-1);

    addChild(mOgre);

    mOgre.addTexture(tInfo);
    mOgre.play(); 
```

任何评论和答案将不胜感激！

# actionscript-3 - Flash Builder 无法识别某些关键字

> ID：15469087
> 
> 赞同：0
> 
> 时间：2013-03-18T02:56:26.960
> 
> 标签：actionscript-3, apache-flex, flash-builder, undefined, starling-framework

我正在尝试遵循本教程

[http://tv.adobe.com/watch/starting-with-starling/starting-with-starling-welcome-screen/](http://tv.adobe.com/watch/starting-with-starling/starting-with-starling-welcome-screen/)

当我尝试创建 Assets.as 类（大约 7 分钟开始）时，FB 无法识别某些关键字。特别是字典、纹理和位图。听到密码...

```
 private static var gameTextures:Dictionary = new Dictionary();   
   public static function getTexture(name:String):Texture
   {
   if (gameTextures[name] == undefined)
   {
   var bitmap:Bitmap = new Assets[name]();
   gameTextures[name] = Texture.fromBitmap(bitmap);
   }
   return gameTextures[name]; 
```

到目前为止，我一直密切关注本教程系列，但我仍然遇到这些错误。

未找到对字典类型的可能未定义方法的调用或不是编译时常量：纹理、字典和位图访问可能未定义的属性：纹理

我将不胜感激任何可以解决此问题的帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:12:10.760

我想你忘了导入命名类。在您可以使用框架中的类之前，您必须将其导入到您的类中：

```
package 
{
    import flash.display.Bitmap;
    import flash.display3D.textures.Texture;
    import flash.utils.Dictionary;

    public class Assets
    {
        private static var gameTextures:Dictionary = new Dictionary();   

        public static function getTexture(name:String):Texture
        {
            if (gameTextures[name] == undefined)
            {
                var bitmap:Bitmap = new Assets[name]();
                gameTextures[name] = Texture.fromBitMap(bitmap);
            }
            return gameTextures[name];
        }
    }
} 
```

此外，在 Flash Builder 中，您可以键入`CTRL + SHIFT + O`(`CMD + SHIFT + O`在 Mac OS 上) 以清除导入。这将添加任何必需的导入语句，并在发生冲突时询问您（例如与纹理）。它还将删除任何不必要的导入。

在代码中键入类的名称时，您可以按`CTRL + SPACE`自动完成。所选类的导入也会自动进行。

# asp.net-mvc - 分页-asp.net mvc 4

> ID：15469090
> 
> 赞同：0
> 
> 时间：2013-03-18T02:57:17.990
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我在显示有关如何包含上一个和下一个链接的页面时遇到问题...我正在使用 ASP.Net MVC 4 使用这些代码：

**看法：**

```
<div class="pagination">
    <ul>
        @for (int i = 1; i <= ViewBag.PagesCount; i++)
        {
            <text>
                <li>@Html.ActionLink(i.ToString(), "Index", new { pagee = i })</li>
            </text>
        }
    </ul>
</div> 
```

**控制器：**

```
int offset = 15;

int pagecount = ((pagee - 1) * offset);

int totalPages = 0;
int totalItems = 0;

try
{       
    totalItems = requestform.Count();
    while (totalItems > 0)
    {
        totalItems -= 15;
        totalPages++;
    }
    ViewBag.PagesCount = totalPages;
    return View(requestform.Skip(pagecount).Take(offset).ToList());
}
catch
{
    while (totalItems > 0)
    {
        totalItems -= 15;
        totalPages++;
    }
    ViewBag.PagesCount = totalPages;
    return View(requestform.Skip(pagecount).Take(offset).ToList());
} 
```

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:08:56.780

你对这个小扩展[PagedList](https://github.com/TroyGoode/PagedList)有什么看法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T14:47:48.163

我还建议 PagedList 只需通过 NuGet 包管理器添加它，然后，

修改你的控制器看起来像这样：

```
public ActionResult Index(int? page)
        {
            var dbtable = db.DbTable.Include(s => s.ID).OrderBy(s => s.StyleName); //ensure records are sorted.
            if (Request.HttpMethod != "GET")
            {
                page = 1;
            }
            int pageSize = 2;
            int pageNumber = (page ?? 1);
            return View(dbtable.ToPagedList(pageNumber, pageSize));
        } 
```

鉴于更换：

```
@model IEnumerable<MyMvcApplication.Models.dbtable> 
```

和

```
@model PagedList.IPagedList<MyMvcApplication.Models.dbtable> 
```

替换看起来像的代码

```
 <th>
            @Html.DisplayNameFor(model => model.ID)
        </th> 
```

和

```
<th>
            @Html.DisplayNameFor(model => model.First().ID)
        </th> 
```

`</table>`在标签后的页面末尾添加以下内容：

```
<div>
    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
    @if (Model.HasPreviousPage)
    {
        @Html.ActionLink("<<", "Index", new { page = 1})
        @Html.Raw(" ");
        @Html.ActionLink("< Prev", "Index", new {page = Model.PageNumber - 1})
    }
    else{
     @:<<
     @Html.Raw(" ");
        @:< Prev   
    }

    @if (Model.HasNextPage)
    {
        @Html.ActionLink("Next >", "Index", new {page = Model.PageNumber + 1})
        @Html.Raw(" "); 
        @Html.ActionLink(">>", "Index", new {page = Model.PageCount})
    }
    else{
     @:Next >
     @Html.Raw(" ")
@:>>   
    }
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:04:09.183

To add paging to page, you'll start by installing the PagedList NuGet package. Then you'll make additional changes in the Index method and add paging links to the Index view

Please check this link [http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-17T11:38:00.120

最近我发现了**很酷的控件**，工具提示，第一个，下一个，最后一个，上一个检查这个[mvc 4 分页 nuget 包](http://nuget.org/packages/MVC4.Paging/)，演示[网页](http://mvcpaging.apphb.com/)

# javascript - 将多个变量传递给javascript函数？

> ID：15469091
> 
> 赞同：2
> 
> 时间：2013-03-18T02:57:19.290
> 
> 标签：javascript, function, datatables

我有一个很大的信息表，可能会让人有点不知所措。我目前有按钮可以隐藏或显示某些列，以便更轻松地找到您需要的内容。我使用此代码显示/隐藏。

```
<script type="text/javascript" charset="utf-8">    
function fnShowHide( iCol )
    {
        var oTable = $('#tablename').dataTable();
        var bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
        oTable.fnSetColumnVis( iCol, bVis ? false : true );
    }
</script> 
```

稍后，我使用以下代码隐藏或显示表格中的某个列。

```
<button id="button">
    <a href="javascript:void(0);" onclick="fnShowHide(0);">Column1</a>
</button>
<button id="button">
    <a href="javascript:void(0);" onclick="fnShowHide(1);">Column2</a>
</button>
<button id="button">
    <a href="javascript:void(0);" onclick="fnShowHide(2);">Column3</a>
</button> 
```

我将如何制作一个隐藏或显示多行而不是单行的按钮？

我正在使用[DataTables](http://www.datatables.net)来显示我的数据，并将[此](http://www.datatables.net/release-datatables/examples/api/show_hide.html)示例用于上面的按钮（如果这有所不同）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T03:00:03.683

为什么不接受要隐藏的行数组，而不是接受单个整数作为输入？

```
function fnShowHide( iCols )
{
    var i, iCol;
    var oTable = $('#tablename').dataTable();

    for (i = 0; i < iCols.length; i += 1) {
        iCol = iCols[i];
        var bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
        oTable.fnSetColumnVis( iCol, bVis ? false : true );
    }
} 
```

要为一行调用它，您只需使用`fnShowHide([2])`，对于多行，您将传入多个值，例如`fnShowHide([2,3,4])`

# excel - 从第二个工作表中找到的列表中突出显示一个工作表中的关键字

> ID：15469094
> 
> 赞同：0
> 
> 时间：2013-03-18T02:57:55.627
> 
> 标签：excel, highlight

我已经尝试了一段时间。我快到了，但我的 vba 技能还没有完成。我在工作表中有一些文本，我需要搜索并找到一些关键字的所有实例。

理想情况下，我会将关键字放在第二个工作表的范围内。我想不通。我已经能够使用以下内容来搜索固定数组，但无法弄清楚如何将其带到从工作表中获取单词的下一步。

```
Sub X()

Dim vntWords As Variant
Dim lngIndex As Long
Dim rngFind As Range
Dim strFirstAddress As String
Dim lngPos As Long

vntWords = Array("sales", "job")

With ActiveSheet.UsedRange
    For lngIndex = LBound(vntWords) To UBound(vntWords)
        Set rngFind = .Find(vntWords(lngIndex), LookIn:=xlValues, lookat:=xlPart)
        If Not rngFind Is Nothing Then
            strFirstAddress = rngFind.Address
            Do
                lngPos = 0
                Do
                    lngPos = InStr(lngPos + 1, rngFind.Value, vntWords(lngIndex), vbTextCompare)
                    If lngPos > 0 Then
                        With rngFind.Characters(lngPos, Len(vntWords(lngIndex)))
                            .Font.Bold = True
                            .Font.Size = .Font.Size
                            .Font.ColorIndex = 3
                        End With
                    End If
                Loop While lngPos > 0
                Set rngFind = .FindNext(rngFind)
            Loop While rngFind.Address <> strFirstAddress
        End If
    Next
End With 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:22:59.373

可能对你有帮助

```
ThisWorkbook.Sheets("name of sheet with search terms").Range("A1:A") 
```

这将为您提供列中的所有值`A`作为数组。您可以在代码中使用。

# ruby - 为什么没有块参数的方法定义可以接受块？

> ID：15469096
> 
> 赞同：2
> 
> 时间：2013-03-18T02:58:24.150
> 
> 标签：ruby

为什么没有块参数的方法定义可以接受块？这是演示代码：

```
def fun
 yield
end
fun {puts 'hello ruby'} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T03:01:03.143

因为这就是红宝石的工作原理。任何方法都可以传递一个块。如果需要，该方法有责任检查是否[`block_given?`](http://apidock.com/ruby/Kernel/block_given%3F)并检查`yield`它。

这是隐式块传递。当你声明一个块参数时，会发生一些不同的事情：块被转换为一个 Proc 对象，因此它可以像函数一样被调用并作为参数传递。你不能用隐式块（AFAIK）做到这一点。

```
def foo &block
  block.call 3
  bar block
end

# this method expects proc as a regular parameter (not a block), so you can pass  
#   a block in addition to it (if you so desire)
def bar block
  block.call 4
end

foo do |x|
  puts "this is #{x}"
end
# >> this is 3
# >> this is 4 
```

# unix - vim netrw 退出后更新当前工作目录

> ID：15469098
> 
> 赞同：4
> 
> 时间：2013-03-18T02:58:38.853
> 
> 标签：unix, vim

这是场景。
我在 unix 命令行上（在主目录中）。我想通过浏览目录

```
$ vim . 
```

从而打开vim netrw。
现在我正在使用 netrw 浏览目录。
我想要的是，当我退出 vim netwr 时，我希望我以前的当前工作目录（在这个例子中是主目录）现在成为我以前在 vim netrw 中的目录。
示例：
步骤 1\. 现在在主目录中
步骤 2\. vim 。（因此打开 vim netrw）
第 3 步。转到任何目录（~/my/other/folders）
第 4 步。：q（退出 vim）
第 5 步。（在这里，我希望我以前的目录现在变成 ~/my/其他/文件夹

关于如何做的任何想法？我想在 .vimrc 中做点什么，但我不知道怎么做。进入谷歌搜索，但没有发现任何有价值的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-04-29T18:40:43.463

一个可能的解决方案是在 netrw 中通过按 更改当前工作目录`c`，并通过发出从您所在的文件夹生成一个新 shell`:shell`

所以它看起来像：

```
vim .
Navigate to the desired folder...
c
:shell 
```

你在netrw中的当前文件夹中的shell中。

当你退出那个 shell 时，你会回到你在 netrw 中的位置，并且可以继续使用资源管理器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T06:08:54.633

我认为这根本不可能。`system('command')`通过或通过子 shell 执行的每个命令`:!command`，而不是通过启动 Vim 的 shell，所以我看不出如何以任何方式更改主机 shell。

但我在这里闻到了一个 XY 问题。你的目标是什么？

您是否希望能够对刚刚编辑的文件执行某些命令并且希望位于它们的目录中？如果是这样，你知道`:sh`吗？`:!command`?

你想要你的 shell 的“图形”文件浏览器吗？如果是这样，你知道[vifm](http://vifm.sourceforge.net/)吗？[游侠](http://ranger.nongnu.org/)？[午夜指挥官](http://www.midnight-commander.org/)？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-08T22:35:56.270

要添加到 Wadih 的答案，您可以将其放入`.vimrc`文件中：

```
let g:netrw_keepdir=0 
```

这意味着工作目录将自动更新，您无需`c`每次都按。
因此，在导航到 netrw 中的文件夹后，您需要做的就是执行以下操作：

```
:sh 
```

这将在当前文件夹中打开终端。

从 netrw 帮助文件：

> 默认情况下，g:netrw_keepdir 为 1。这个设置意味着当前目录不会跟踪浏览目录。（这样做是为了向后兼容 v6 的文件资源管理器）。
> 
> 设置 g:netrw_keepdir 为 0 告诉 netrw 让 vim 的当前目录跟踪 netrw 的浏览目录。

# java - 如何使表格（Jtable）不可编辑

> ID：15469100
> 
> 赞同：2
> 
> 时间：2013-03-18T02:59:15.177
> 
> 标签：java, swing, unicode, jtable

我一直在使用一些日文字符，我使用过 unicode，但我一直在阅读和阅读如何使 JTable 不可编辑，但仍然无法弄清楚如何将它放入我的代码中......也许我厌倦了 5 天的研究……这就是我来找你的原因。

这是我一直在使用的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;

public class hiragana extends JFrame {
    hiragana() {

        String header [] = {" ","A","I","U","E","O"};
        String data [][]= {
            {" ", "\u3042", "\u3044", "\u3046", "\u3048", "\u304A"},
            {"K", "\u304b", "\u304d", "\u304f", "\u3051", "\u3053"},
            {"S", "\u3055", "\u3057", "\u3059", "\u305b", "\u305d"},
            {"T", "\u305f", "\u3061", "\u3064", "\u3066", "\u3068"},
            {"N", "\u306a", "\u306b", "\u306c", "\u306d", "\u306e"},
            {"H", "\u306f", "\u3072", "\u3075", "\u3078", "\u307b"},
            {"M", "\u307e", "\u307f", "\u3080", "\u3081", "\u3082"},
            {"Y", "\u3084", " ","\u3086", " ", "\u3088"},
            {"R", "\u3089", "\u308a", "\u308b", "\u308c", "\u308d"},
            {"W", "\u308f", " ", " ", " ", "\u3092"},
            {"N \'", " ", " ", "\u3093", " ", " "}
        };

        JTable table = new JTable(data, header);
        table.setFont(new Font("Adobe Fangsong Std R",Font.BOLD,20));
        table.setRowHeight(table.getRowHeight()+30);
        JScrollPane scrollPane = new JScrollPane(table);
        JPanel panel = new JPanel();
        panel.add(scrollPane);

        JFrame frame = new JFrame();
        frame.getContentPane().add(scrollPane, BorderLayout.CENTER);
        frame.setSize(250,700);
        frame.setVisible(true);
        frame.setLocationRelativeTo(null);
    }
} 
```

这是输出，

![](../Images/f39315e9192108e97fad86c7eea9ba53.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:01:42.667

您需要提供一个合适的表模型，该模型可以在调用`false`时返回。`TableModel#isCellEditable(int row, int column)`

默认情况下，`DefaultTableModel`将返回 true。

看看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:05:49.267

通过 控制单元格是否可编辑[`TableModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableModel.html#isCellEditable%28int,%20int%29)。`TableModel`通过扩展定义你自己的类[`DefaultTableModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html)。

# java - 检索 YouTube 视频的 unreadCount 标签

> ID：15469101
> 
> 赞同：0
> 
> 时间：2013-03-18T02:59:30.750
> 
> 标签：java, youtube, youtube-api, google-data-api

如何`unreadCount`使用 YouTube 客户端库获得价值？

我认为这是 YouTube Data API 中的一个新标签，但我找不到获取它的 API 方法。我只能通过 SubscriptionEntry 获取一些值：

```
SubscriptionFeed feed = service.getFeed(new URL(feedUrl), SubscriptionFeed.class);

for(SubscriptionEntry entry : feed.getEntries()) {
    System.out.println("Title: " + entry.getTitle().getPlainText());
    System.out.println("Feed Url: " + entry.getFeedUrl());
    System.out.println("CountHint: " + entry.getCountHint());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:46:26.300

您正在寻找的是[“contentDetails.newItemCount”](https://developers.google.com/youtube/v3/docs/subscriptions#contentDetails.newItemCount)

你可以通过[getContentDetails().getNewItemCount()](https://developers.google.com/resources/api-libraries/documentation/youtube/v3/java/latest/com/google/api/services/youtube/model/SubscriptionContentDetails.html#getNewItemCount%28%29)

# arrays - 在 EASy68K 汇编中对二维数组求和

> ID：15469109
> 
> 赞同：0
> 
> 时间：2013-03-18T03:00:17.770
> 
> 标签：arrays, assembly, 68000

100x100`A`整数数组，每个一个字节，位于`A`. 编写一个程序段来计算次对角线的和，即

SUM = ΣA[i,99-i]，其中 i=0...99

这是我到目前为止所拥有的：

```
LEA A, A0
CLR.B D0
CLR.B D1
ADDA.L #99, D0
ADD.B (A0), D1
ADD.B #1, D0
BEQ Done
ADDA.L #99,A0
BRA loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T11:23:28.223

这段代码有很多问题，包括（但不限于）：

*   您使用“循环”和“完成”，但代码中未显示标签
*   您在 D1 中添加 100 个字节，也是一个字节，因此您肯定会在结果上溢出（总和的目标应至少为 16 位，因此 .w 或 .l 寻址）
*   我可能错了，但我认为“小对角线”从左下角到右上角，而您的代码从数组的左上角到右下角

在性能方面：

*   您应该使用 68000 指令集的“快速”变体
*   JasonD 提到的递减和分支比 add/beq 更有效

考虑到代码与解决方案足够接近，这里有一个变体（我没有测试，希望它有效）

```
 lea A+99*100,a0     ; Points to the first column of the last row
    moveq #0,d0         ; Start with Sum=0
    moveq #100-1,d1     ; 100 iterations
Loop    
    moveq #0,d2         ; Clear register long
    move.b (a0),d2      ; Read the byte
    add.l d2,d0         ; Long add
    lea -99(a0),a0      ; Move one row up and one column right
    dbra d1,Loop        ; Decrement d1 and branch to Loop until d1 gets negative
Done
    ; d0 now contains the sum 
```

# java - 这段代码有问题

> ID：15469111
> 
> 赞同：-3
> 
> 时间：2013-03-18T03:00:22.090
> 
> 标签：java

**我的家庭作业说“编写一个程序来读取一个文件并将文件的副本写入另一个插入了行号的文件”我有这个代码但是出了点问题，有人可以帮忙吗？先感谢您**

显示文件：

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

class ShowFile {

public static void main(final String args[])

throws IOException

{
    int i;

    FileInputStream fin;

    try {

        fin = new FileInputStream(args[0]);

    } catch (final FileNotFoundException e) {

        System.out.println("File Not Found");

        return;

    } catch (final ArrayIndexOutOfBoundsException e) {

        System.out.println("Usage: ShowFile File");

        return;
    }

    do {

        i = fin.read();

        if (i != -1)
            System.out.print((char) i);

    } while (i != -1);

    fin.close();

}
} 
```

拷贝文件：

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

class CopyFile {

public static void main(final String args[])

throws IOException

{
    int i;

    FileInputStream fin;

    FileOutputStream fout;

    try {

        // open input file

        try {

            fin = new FileInputStream(args[0]);

        } catch (final FileNotFoundException e) {

            System.out.println("Input File Not Found");

            return;

        }

        // open output file

        try {

            fout = new FileOutputStream(args[1]);

        } catch (final FileNotFoundException e) {

            System.out.println("Error Opening Output File");

            return;

        }
    } catch (final ArrayIndexOutOfBoundsException e) {

        System.out.println("Usage: CopyFile From To");

        return;

    }

    // Copy File

    try {

        do {

            i = fin.read();

            if (i != -1)
                fout.write(i);

        } while (i != -1);

    } catch (final IOException e) {

        System.out.println("File Error");

    }

    fin.close();

    fout.close();

}
} 
```

这是错误消息-

```
 Exception in thread "main" java.lang.NoClassDefFoundError: C 
   Caused by: java.lang.ClassNotFoundException: C 
   at java.net.URLClassLoader$1.run(URLClassLoader.java:202) 
   at java.security.AccessController.doPrivileged(Native Method) 
   at java.net.URLClassLoader.findClass(URLClassLoader.java:190) 
   at java.lang.ClassLoader.loadClass(ClassLoader.java:306) 
   at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) 
   at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:04:15.490

这个怎么样 ...

```
BufferedReader reader = new BufferedReader(new FileReader("infile"));
BufferedWriter writer = new BufferedWriter(new FileWriter("outfile"));
String line;
int lineNumber = 0;
while((line = reader.readLine()) != null) {
    writer.write(++lineNumber + " " + line);
    writer.newLine();
}
writer.close();
reader.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:22:14.073

我认为问题一定出在您运行程序的方式上。异常似乎是说它找不到名为“C”的类。

我的猜测是您提供了要作为路径名而不是类名执行的类的名称。请仔细阅读该`java`命令的手册页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:01:59.093

你的代码没有问题。我认为你只是传递了错误的论点。

假设您的驱动器中有这个 readme.txt，您必须运行它，如下所示：

```
java ShowFile "C:\readme.txt" 
```

# ruby-on-rails - 如何将工作轨道联系形式转换为引导模式？

> ID：15469112
> 
> 赞同：4
> 
> 时间：2013-03-18T03:00:23.227
> 
> 标签：ruby-on-rails, twitter-bootstrap, controller, modal-dialog, contact-form

我目前有一个工作轨道联系表（取自另一个 SO 答案），可在 /contact 上找到，它使用控制器、模型和邮件程序（Mandrill）。它在控制器中响应 new 和 create 路由，并且仍然使用 activemodel 功能。该表单不使用ajax。

我现在需要尝试让我的联系表单在主页上工作，而不是通过模式弹出窗口的 /contact 页面。

我已经阅读了许多关于模态的 SO 查询，但似乎都与让模态做特定的事情有关 - 而不是创建模态形式来模仿正常形式。

首先，我在主页上添加了一个工作模式。

当我尝试将表单添加到主页模型中时，我遇到了方法错误，因为表单是 home_controller 的一部分。在将我的新控制器操作和创建控制器操作复制到我的主控制器后，我意识到表单只是隐藏了，并且在页面加载时仍在运行（通过索引操作）。添加`@message = Message.new`到索引操作似乎没有帮助 - 我不想在模态负载上这样做吗？

以下是联系页面中我的工作表单的主要移动部分，以及主页中的工作模式框 - 我如何合并两者并保留我拥有的功能？

这是联系人控制器：

```
#/app/controllers/contact_controller.rb
class ContactController < ApplicationController

 def new
  @message = Message.new
 end

 def create
  @message = Message.new(params[:message])

  if @message.valid?
     NotificationsMailer.new_message(@message).deliver
     redirect_to(root_path, :notice => "Message was successfully sent.")
  else
   flash.now.alert = "Please fill all fields."
   render :new
  end

 end
end 
```

消息模型

```
#app/models/message.rb
class Message

  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming

  attr_accessor :name, :email, :subject, :body

  validates :name, :email, :subject, :body, :presence => true
  validates :email, :format => { :with => %r{.+@.+\..+} }, :allow_blank => true

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  def persisted?
    false
  end

end 
```

和观点：

```
 <%= form_for @message, :url => contact_path do |form| %>
  <fieldset class="fields">
    <div class="field">
      <%= form.label :name %>
      <%= form.text_field :name %>
    </div>

    <div class="field">
      <%= form.label :email %>
      <%= form.text_field :email %>
    </div>
    <div class="field">
      <%= form.label :subject %>
      <%= form.text_field :subject %>
    </div>

    <div class="field">
      <%= form.label :body %>
      <%= form.text_area :body %>
    </div>
  </fieldset>

  <fieldset class="actions">
   <%= form.submit "Send" %>
  </fieldset>
<% end %> 
```

最后在我的主页中，我将这个用于模态（不包含表单）

```
<div class="modal fade" id="modal_contact_form">

  <div class="modal-header">
    <a class="close" data-dismiss="modal">&times;</a>
      <h3>Contact Form</h3>
  </div>
  <div class="modal-body">
    <p>Test Content for Modal</p>
  </div>
  <div class="modal-footer">
 </div>
</div> 
```

这被称为`<li><a href="#modal_contact_form" data-toggle="modal">contact</a></li>`

直到这一点，我的尝试已经很多并且不同了 - 我需要解决的主要问题（我认为）是表单是由 home_controller 上的索引操作加载的 - 理想情况下，我想我仍然想要使用我的contact_controller 中的逻辑？

任何建议和建议表示赞赏 - 在这一点上，我想知道是否有一种简单的方法可以将表单移动到模态中！

干杯，

米斯巴

注意：在回答我对 ajax 的疑问时，我只是避免使用 ajax，因为在 rails 3.2 上尝试它时感觉困难和缺乏进展 - 如果将它变成一个 ajaxified 实际上更容易的话，我会很高兴使用它形式 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:51:25.757

看来我毕竟离得不远了！

在来自#rubyonrails 频道的指针之后，答案是：

1）将表单原样复制到模态中。（请注意，可能需要不同的样式 - 但这个答案提供了所需的功能）。

2）添加`@message = Message.new`到我的 home_controller.rb 上的索引操作

我曾尝试过与此非常相似的方法，但必须引入另一个错误，因此绕过了正确的解决方案。

# javascript - ASCII 动画

> ID：15469114
> 
> 赞同：1
> 
> 时间：2013-03-18T03:00:27.207
> 
> 标签：javascript, html

我不确定我的代码中缺少什么。我无法让我的 clearTimeout 工作...我不断收到错误消息，说 myStopFunction() 未定义。有任何想法吗？我已经尝试重命名它并检查以确保一切都匹配，我只是不确定为什么我不断收到这个该死的错误！

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>ASCII Animations</title>
<h1> ASCII Animation Editor/Viewer </h1>
<br><h3> Jordan Keith: Linn-Benton Community College</h3>
<body>
<p> Enter the frams below, separated by "=====" 
<input onclick = "playAnimation();" type="button" id= "Play" value = "PLAY" />
<input onclick = "myStopFunction();" type="button" id= "Stop" value = "STOP" /></p>
<textarea id = "frameArea" cols="50" rows="30"></textarea>

<textarea id = "displayArea" cols="50" rows="30"></textarea>

<script src="ASCII.js"></script><br>

</form>
</div> 
</body>
</html> 
```

JavaScript

```
function playAnimation()
{
frameStr = document.getElementById("frameArea").value;

if(frameStr.indexOf("\r\n") !=-1)
{
    frameSeq = frameStr.split("=====\r\n");
}
else
{
    frameSeq = frameStr.split("=====\n");
}

currentFrame = 0;
showNextFrame();
}
var t;
function showNextFrame() 
{
document.getElementById("displayArea").value = frameSeq[currentFrame]

currentFrame = (currentFrame+1)% frameSeq.length;

t = setTimeout("showNextFrame();" , 250);
}

function myStopFuntion() 
{
clearTimeout(t);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:27:14.647

您对 myStopFunction 的调用缺少 C 函数。

```
clearInterval(t); 
```

用于清除 Javascript 的计时器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:59:26.273

`myStopFunction` 由于函数名称中的拼写错误而没有被调用。

替换`function myStopFuntion()` 为`function myStopFunction()`。

这是运行代码：

```
<head>
<script>
function playAnimation() 
{
    frameStr = document.getElementById("frameArea").value;

    if (frameStr.indexOf("\r\n") != -1) {
        frameSeq = frameStr.split("=====\r\n");
    } else {
        frameSeq = frameStr.split("=====\n");
    }

    currentFrame = 0;
    showNextFrame();
}
var t;

function showNextFrame() 
{
    document.getElementById("displayArea").value = frameSeq[currentFrame];

    currentFrame = (currentFrame + 1) % frameSeq.length;

    t = setTimeout(showNextFrame, 250);

}

function myStopFunction() 
{
    alert("Stopping Now");
    clearTimeout(t);
}
</script>
</head>
<body>
<form>
    <input onclick="playAnimation();" type="button" id="Play" value="PLAY" />
    <input onclick="myStopFunction();" type="button" id="Stop" value="STOP" />
    <textarea id="frameArea" cols="50" rows="30"></textarea>
    <textarea id="displayArea" cols="50" rows="30"></textarea>
</form>
</body> 
```

`JSFIDDLE LINK`：http: [//jsfiddle.net/52Nvj/4/](http://jsfiddle.net/52Nvj/4/)

# c++ - FindFirstFile、FindNextFile API 不可靠吗？

> ID：15469115
> 
> 赞同：0
> 
> 时间：2013-03-18T03:00:34.677
> 
> 标签：c++, file, winapi, directory, ntfs

出于我的目的，我希望优化从 Windows 上的 NTFS 文件系统上的给定文件夹递归枚举子文件夹的方法，我在 Microsoft 的[FindFirstFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx) API页面上发现了这个小“*宝石”：*

> **注意** 在极少数情况下或在负载较重的系统上，NTFS 文件系统上的文件属性信息在调用此函数时可能不是最新的。要确保获得当前的 NTFS 文件系统文件属性，请调用[GetFileInformationByHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364952%28v=vs.85%29.aspx)函数。

所以，让我试着理解它。

我确实依靠结构中`dwFileAttributes`返回的参数`WIN32_FIND_DATA`来告诉文件夹中的文件。所以这个注释表明在某些情况下我可能会得到一些虚假的结果，对吧？如果是这样，为什么不在他们的更新中修复它而不是在这里发布呢？

还有他们建议的使用 GetFileInformationByHandle API 的解决方法。我到底应该怎么称呼它？它需要一个文件句柄。那么他们真的希望我们打开`FindNextFile`返回的每个文件并调用`GetFileInformationByHandle`它吗？你能想象用这种方法我的优化会“走多远”？

无论如何，如果有人能对此有所了解，那就太好了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T03:13:59.220

从文件夹中区分文件是可以的，因为该信息可能是不变的。文件没有变成文件夹或文件夹变成文件。

文档说“可能不是最新的”，因为其他进程可能正在更改属性，并且没有锁定机制来同步属性正在懒惰地编写。如果您的应用程序需要绝对最新的信息，您可以检索它...ByHandle 以确保信息是最新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T03:24:42.683

这是每个状态报告功能的工作方式。充其量，它会在您调用函数和函数返回之间的某个未定义点报告状态。但它并没有“冻结世界”以确保数据在以后仍然有效。

文档通常不会在每个单独的功能上都注明这一点，而是在没有考虑到这一点的情况下，通常只在可能导致严重问题，特别是安全问题的功能上注明。

如果您打开一个文件并获得它的句柄，则可以确保使用该句柄的所有操作都将针对同一个底层文件。但是当您按名称执行操作时，就没有这样的保证了。可以创建、删除和重命名文件。所以同名以后可能不会引用同一个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T03:11:58.043

`dwFileAttributes`在分辨文件和文件夹之间的区别时，这并不是不可靠的东西。我认为该注释是指可能缓存以供文件系统更新的信息（修改/访问的时间戳等），但项目是文件还是文件夹不会改变。

# ios - 自定义 UIAlertView 和操作表

> ID：15469116
> 
> 赞同：1
> 
> 时间：2013-03-18T03:00:35.327
> 
> 标签：ios, objective-c

我找到了这个很棒的免费项目（来自[github](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)），可用于自定义 UIAlertView 和操作表。我想知道如果我最终同时使用这两个选项，苹果是否会拒绝我的申请？我听说你不能使用私人图书馆。这也归类吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:01:51.143

只要该库具有与 App Store 兼容的许可证并且该库不使用 Apple 的任何私有 API，您就可以使用任何您想要的库。

你问的图书馆应该没问题。

# ruby-on-rails - 在 Heroku 上的 Rails 应用程序中记录变量

> ID：15469118
> 
> 赞同：0
> 
> 时间：2013-03-18T03:00:50.460
> 
> 标签：ruby-on-rails, heroku

我想在我的 Heroku 日志中记录一个会话变量（以便我可以`heroku log`在控制台中使用它来读取它）。

我需要配置什么吗？我应该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:59:58.247

我相信这行得通。设置变量后，这将在您的控制器中。

```
logger.info "#{session_variable}" 
```

如果它是 ActiveRecord，您可以使用 to_yaml 或检查。甚至把我认为输出的东西放到heroku日志上。

根据您的需要进行调整。

[http://guides.rubyonrails.org/debugging_rails_applications.html](http://guides.rubyonrails.org/debugging_rails_applications.html)

# c++ - C++ 中的 OpenCV 图像数据类型转换

> ID：15469120
> 
> 赞同：0
> 
> 时间：2013-03-18T03:00:51.270
> 
> 标签：c++, opencv

例如，我正在尝试在 C++ 中将图像数据从 char 转换为 double

```
Mat img = imread(image_file);
Mat img_double;
img.convertTo(img_double, CV64FC3); 
```

然后我认为img_double应该将图像数据存储在DOUBLE中，我尝试了img_double.depth()它显示为6，这是正确的。但是，我如何访问该 DOUBLE 数据？img_double.data 仍然是 uchar* 类型。有谁能够帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:08:26.637

C/C++`unsigned char`用作一堆字节的通用数据类型。因此，具有 uchar 数据指针`cv::Mat`可避免更改每种图像类型的 thsi 指针的声明，从而避免子类化`cv::Mat`并允许通过`memcpy`或指针影响直接传输数据。

然后使用转换来返回库用户所需的数据类型。

请注意，OpenCV 2.x 为您提供了模板函数`cv::Mat::ptr<type>(ìnt rowIndex)`来获取指向给定行开头的指针。例如，指向双精度数据类型灰度图像第​​ 6 行开头的指针是通过以下方式完成的：

```
double *rowPtr = my_mat.ptr<double>(6) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:22:53.943

您可以通过`img_double`以下方式访问数据。

```
img_double.at<Vec3d>(i, j)[0] -> B
img_double.at<Vec3d>(i, j)[1] -> G
img_double.at<Vec3d>(i, j)[2] -> R 
```

`img`所以要访问and的像素值`double_img`，你可以做这样的事情

```
printf("%d %d %d\n", img.at<Vec3b>(0, 0)[0], img.at<Vec3b>(0, 0)[1], img.at<Vec3b>(0, 0)[2]);
printf("%f %f %f\n", double_img.at<Vec3d>(0, 0)[0], double_img.at<Vec3d>(0, 0)[1], double_img.at<Vec3d>(0, 0)[2]); 
```

[这](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=vec3b#vec)可能更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T03:46:52.350

img_data 始终是 uchar （它是字节 - 这就是所有内存）图像类型只是跟踪您想要将其视为什么类型和范围。

Opencv CV 本质上是/曾经是一个 C 库，因此无法将数据实际自动转换为其他类型，但您始终可以直接转换它。

# c++ - 未知数的动态投射

> ID：15469123
> 
> 赞同：0
> 
> 时间：2013-03-18T03:00:57.263
> 
> 标签：c++, casting

刚接触 C++，但仍能掌握它。使用模板我有这个：

```
template<typename TransportType>
Automobile<TransportType>::Automobile(std::string make)
    : Transport(make) 
```

所以我有一些都继承自“传输”。例如另一个是：

```
template<typename TransportType>
Aircraft<TransportType>::Aircraft(std::string make)
    : Transport(make)

Automobile<Coach> * coach = new Automobile<Coach>("Volvo");
Aircraft<JumboJet> * jumbojet = new Aircraft<Jumbojet>("Boeing");` 
```

我的问题是，如果我有一种传输类型，我如何才能将其“转换”为另一种**而不**将传输类型放入运行时。例如：

```
*coach = dynamic_cast<*jumbojet typeid<transporttype>>(jumbojet);` 
```

（我不确定是 *jumbojet typeid 的那一点）

我看了一下 memcpy 但似乎无法使其工作。（我知道如果实际对象中包含指针，则可能会出现问题，而它们没有。）

`memcpy(*jumbojet, *coach, sizeof(coach))`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:07:54.423

停止尝试这样做。您不需要在运行时强制转换。相反，考虑使用虚函数（即运行时多态性）来消除在运行时将基类转换为任意派生类的需要。

# java - 分叉的 Java VM 异常退出。JUnit 测试？

> ID：15469125
> 
> 赞同：1
> 
> 时间：2013-03-18T03:01:18.680
> 
> 标签：java, junit

我有一个简单的 Java 程序，它似乎运行良好，直到上传到我学校的评分系统“WebCat”，我假设它只是运行 JUnit。它反弹的错误是：

> 分叉的 Java VM 异常退出。请注意，报告中的时间不反映虚拟机退出前的时间。

我已经研究过这个问题，主要的第一个故障排除步骤似乎是查看转储日志。不幸的是，在这种情况下我不能这样做。考虑到评分系统缺乏反馈以及编译或运行时错误，我真的不知道如何开始解决这个问题。

如果有人熟悉此错误，或者至少可以给我一些从哪里开始故障排除的方向，这里是代码。非常感激！

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.Scanner;
import java.io.IOException;

class PlayerApp {
    public static void showMenu()
    {
        System.out.println("Player App Menu");
        System.out.println("P - Print Report");
        System.out.println("A - Add Score");
        System.out.println("D - Delete Score");
        System.out.println("L - Find Lowest Score");
        System.out.println("H - Find Highest Score");
        System.out.println("Q - Quit");
    }
    public static void main(String[] args) throws IOException 
    {   
        if (args.length == 0)
        {
            System.out.println("File name was expected as a run argument.");
            System.out.println("Program ending.");
            System.exit(0);
        }
        String fileName = args[0];
        Scanner sc = new Scanner(System.in);
        String stnew = "";
        boolean exit = false;
        Player p = null;
        double[] scoreList;

        File dbFile = new File(fileName);
        FileInputStream fis = new FileInputStream(fileName); 
        InputStreamReader inStream = new InputStreamReader(fis); 
        BufferedReader stdin = new BufferedReader(inStream);
       String name = stdin.readLine();
       stnew = stdin.readLine();
       int numScore = Integer.parseInt(stnew);
       scoreList = new double[numScore];
       for (int i = 0; i < numScore; i++)
       {
          stnew = stdin.readLine();
          scoreList[i] = Double.parseDouble(stnew);
       }

       p = new Player(name, numScore, scoreList);

       stdin.close();

        System.out.println("File read in and Player object created.");
       showMenu();
       while (exit == false)
       {

        System.out.print("\nEnter Code [P, A, D, L, H, or Q]:");
        String choice = sc.nextLine().toLowerCase();
        if (choice.equals("p"))
        {
            System.out.println(p.toString());
        }
        else if (choice.equals("a"))
        {
            System.out.print("   Score to add: ");
            stnew = sc.nextLine();
            double scoreIn = Double.parseDouble(stnew);
            p.addScore(scoreIn);
        }
        else if (choice.equals("d"))
        {
            System.out.print("   Score to delete: ");
            stnew = sc.nextLine();
            double scoreIn = Double.parseDouble(stnew);
            p.deleteScore(scoreIn);
            System.out.println("   Score removed.");
        }
        else if (choice.equals("l"))
        {
            System.out.println("   Lowest score: " + p.findLowestScore());
        }
        else if (choice.equals("h"))
        {
            System.out.println("   Highest score: " + p.findHighestScore());
        }
        else if (choice.equals("q"))
        {
            exit = true;
        }
        }

   }
} 
```

休息

```
import java.text.DecimalFormat;

public class Player {

    //Variables
    private String name;
    private int numOfScores;
    private double[] scores = new double[numOfScores];

    //Constructor
    public Player(String nameIn, int numOfScoresIn, double[] scoresIn) {
       name = nameIn;
       numOfScores = numOfScoresIn;
       scores = scoresIn;
   }

    //Methods
    public String getName() {
       return name;
    }
    public double[] getScores() {
       return scores;
    }
    public int getNumScores() {
       return numOfScores;
    }
    public String toString() {

        String res = "";
        DecimalFormat twoDForm = new DecimalFormat("#,###.0#");
      DecimalFormat twoEForm = new DecimalFormat("0.0");
        res += "   Player Name: " + name + "\n   Scores: ";
        for (int i = 0; i < numOfScores; i++)
        {
            res += twoDForm.format(scores[i]) + " ";
        }
        res += "\n   Average Score: ";
        res += twoEForm.format(this.computeAvgScore());
        return res;
    }
    public void addScore(double scoreIn) {
       double newScores[] = new double[numOfScores +1 ];
       for (int i = 0; i < numOfScores; i++)
       {
           newScores[i] = scores[i];
       }
       scores = new double[numOfScores + 1];
       for(int i = 0; i < numOfScores; i++)
       {
           scores[i] = newScores[i];
       }
       scores[numOfScores] = scoreIn;
       numOfScores++;
    }
    public boolean deleteScore(double scoreIn) {
        boolean found = false; 
        int index = 0;
        for (int i = 0; i < numOfScores; i++)
        {
           if (scores[i] == scoreIn)
            {
                found = true;
                index = i;
            }
        }
        if (found == true)
        {
            double newScores[] = new double[numOfScores -1 ];
            for (int i = 0; i < index; i++)
            {
               newScores[i] = scores[i];
            }
            for (int i = index + 1; i < numOfScores; i++)
            {
                newScores[i - 1] = scores[i];
            }
            scores = new double[numOfScores - 1];
            numOfScores--;
            for (int i = 0; i < numOfScores; i++)
            {
                scores[i] = newScores[i];
            }
            return true;
        }
        else
        {
            return false;
        }

    }
    public void increaseScoresCapacity() 
    {
        scores = new double[numOfScores + 1];
        numOfScores++;
    }
    public double findLowestScore() {
        double res = 100.0;
        for (int i = 0; i < numOfScores; i++)
        {
            if (scores[i] < res)
            {
                res = scores[i];
            }
        }
        return res;
    }
    public double findHighestScore() {
        double res = 0.0;
        for (int i = 0; i < numOfScores; i++)
        {
            if (scores[i] > res)
            {
                res = scores[i];
            }
        }
        return res;
    }
    public double computeAvgScore() {
        double res = 0.0;
      if (numOfScores > 0) {
           for (int i = 0; i < numOfScores; i++)
        {
               res += scores[i];
           }
           return res / (double)(numOfScores);
      }
      else {
         //res = 0.0;
         return res;
      }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T03:07:45.547

您的程序正在调用`System.exit(0)`某些输入。不要那样做！这正是消息告诉您的内容：在评分代码完成之前，JVM 在文本中间退出。而不是调用`exit()`，只需使用`return`从`main()`早期返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:01:58.380

库[系统规则](http://stefanbirkner.github.com/system-rules/)有一个名为[ExpectedSystemExit](http://stefanbirkner.github.com/system-rules/#ExpectedSystemExit)的 JUnit 规则。使用此规则，您可以测试调用 System.exit(...) 的代码。

# vb.net - 将目录列表存储为数组 vb2008

> ID：15469129
> 
> 赞同：1
> 
> 时间：2013-03-18T03:02:08.470
> 
> 标签：vb.net

如何将目录列表存储到数组中？我已经尝试过这种方法，但这不起作用。

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim parentinfo As New DirectoryInfo("C:\myfiles")

    counter1 = My.Computer.FileSystem.GetFiles("C:\myfiles")
    dirsize = counter1.Count

    ReDim directory(dirsize)

    For Each dir As FileSystemInfo In parentinfo.GetFileSystemInfos()
        Dim i As Integer = 0
        directory(i) = dir.Name
        ComboBox1.Items.Add(directory(i))
        i += 1
    Next dir

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:07:15.773

尝试做这样的事情：

```
Public Sub New()

    Dim directories As New List(Of DirectoryInfo)

    Call Me.InitializeComponent()

    Call Me.ComboBox1.Items.Clear()
    For Each directory As DirectoryInfo In (New DirectoryInfo("C:\")).GetDirectories()
        Call directories.Add(directory)
        Me.ComboBox1.Items.Add(directory.Name)
    Next

End Sub 
```

这将为在指定路径中找到的所有目录生成对象列表`directories`。`DirectoryInfo`它还将所有目录名称添加到组合框（在本例中为`Combobox1`.

更新

刚刚意识到您专门要求了一个数组。您可以使用`ToArray()`扩展方法将列表转换为数组。所以在这种情况下，在 sub 的末尾你可以调用`directories.ToArray()`来获取你的数组。或者，您可以将我编写的代码与数组一起使用，但坦率地说，如果可以使用列表，为什么还要使用数组呢？

如果你想用数组来做，这里是代码：

```
Public Sub New()

    Dim i as integer

    Call Me.InitializeComponent()

    ReDim directory(i)
    For Each dir As DirectoryInfo In (New DirectoryInfo("C:\")).GetDirectories()
        directory(i) = dir
        Me.ComboBox1.Items.Add(directory.Name)
        i += 1
        ReDim Preserve directory(i)
    Next

End Sub 
```

但我认为这样做很痛苦......

# javascript - 滚动后固定导航栏

> ID：15469130
> 
> 赞同：3
> 
> 时间：2013-03-18T03:02:10.550
> 
> 标签：javascript, jquery, html, css

我试图让导航栏粘在顶部，当用户向下滚动到导航栏时，然后当用户向上滚动到导航栏时松开。JSFIDDLE[在这里](http://jsfiddle.net/jpXjH/)。任何帮助将不胜感激。

更新：我知道这不能通过 CSS 和 HTML 来实现。实现这一点的最佳方法是什么？

```
 <section class="main">
     <div id="wrap">

            <div id="featured">
         <div class="wrap">      
      <div class="textwidget">
        <div class="cup"><img src="#""></div>
    <div id="header"></div></div></div></div></div></div></div>
    <div class="whiteboard">
             <h1><a href="#">HELLO GUYS</a></h1>

        </div>
    </div>
 <div class="bg1"> <h2> WE ARE AN EVENTS MANAGEMENT COMPANY BASED IN LONDON. </h2></div> 
```

＆CSS

```
 .main{text-align:center;}

          h1{
              -webkit-font-smoothing: antialiased;
                  display:inline-block;
                font: 800 1.313em "proxima-nova",sans-serif; 
                padding: 10px 10px;
                margin: 20px 20px;
                letter-spacing: 8px;
                text-transform: uppercase;
                  font-size:3.125em;
                  text-align: center; 
                  max-width: 606px;
          line-height: 1.45em;
          position: scroll;
              background-color:#e94f78;
              text-decoration: none;
              color:yellow;
              background-image:url;
          }

          h1 a{
            text-decoration: none;
            color:yellow;
                    padding-left: 0.15em;
          }

          h2{
              -webkit-font-smoothing: antialiased;
                  display:inline-block;
                font: 800 1.313em "proxima-nova",sans-serif; 
                letter-spacing: 8px;
                margin-top: 100px;
                text-transform: uppercase;
                  font-size:3.125em;
                  text-align: center; 
          line-height: 1.45em;
          position: scroll;
              text-decoration: none;
              color:white;
              z-index: -9999;
          }

          h2 a{
            text-decoration: none;
            color:white;
                    padding-left: 0.15em;
          }

          h5{

          position: absolute;
                  font-family:sans-serif; 
                  font-weight:bold; 
                  font-size:40px; 
                  text-align: center; 
                  float: right;
                  background-color:#fff;
                  margin-top: -80px;
                  margin-left: 280px;
          }

          h5 a{

            text-decoration: none;
            color:red;
          }

          h5 a:hover{

            color:yellow;
          }

          #text1{
              -webkit-font-smoothing: antialiased;
                  display:inline-block;
                font: 800 1.313em "proxima-nova",sans-serif; 
                margin: 20px 20px;
                letter-spacing: 8px;
                text-transform: uppercase;
                  font-size:3.125em;
                  text-align: center; 
                  max-width: 606px;
          line-height: 1.45em;
          position: scroll;
              background-color:#E94F78;

          }

          #text1 a{
              color:yellow;
              text-decoration: none;
                  padding-left: 0.15em;

          }

          #text1 a:hover{

              text-decoration: none;
              cursor:pointer;
          }

          .whiteboard{
              background-image:url(http://krystalrae.com/img/krystalrae-2012-fall-print-leopard-sketch.jpg);
              background-position: center;
              padding: ;
              background-color: #fff;
              z-index: 1000;
          }

          .bg{
            height:2000px;
            background-color:#ff0;
            background-image:url(http://alwayscreative.net/images/stars-last.jpg);
            position:relative;
            z-index: -9999;

          }
          .bg1{
            background-image:url(http://alwayscreative.net/images/stars-last.jpg);
            z-index: -9999;
            height:1000px;
          }
          /* Header */
          #wrap {
            margin: 0 auto;
            padding: 0;
            width: 100%;
          }

          #featured {
            background: #E94F78 url(http://www.creativityfluid.com/wp-content/themes/creativityfluid/images/img-bubbles-red.png) no-repeat top;
            background-size: 385px 465px;
            color: #fff;
            height: 535px;
            overflow: hidden;
            position: relative;
            z-index: -2;
          }

          #featured .wrap {
            overflow: hidden;
            clear: both;
            padding: 70px 0 30px;
            position: fixed;
            z-index: -1;
            width: 100%;
          }

          #featured .wrap .widget {
            width: 80%;
            max-width: 1040px;
            margin: 0 auto;
          }

          #featured h1,
          #featured h3,
          #featured p {
            color: yellow;
            text-shadow: none;
          }

          #featured h4{
            color:white;
            text-shadow:none;
          }

          #featured h4 {
            margin: 0 0 30px;
          }

          #featured h3 {
            font-family: 'proxima-nova-sc-osf', arial, serif;
            font-weight: 600;
            letter-spacing: 3px;
          }

          #featured h1 {
            margin: 0;
          }

          .textwidget{
            padding: 0;
          }

          .cup{
            margin-top:210px;
            z-index: 999999;
          }

          .container{font-size:14px; margin:0 auto; width:960px}
          .test_content{margin:10px 0;}
          .scroller_anchor{height:0px; margin:0; padding:0;background-image:url()}
          .scroller{background:#FFF;
            background-image:url(http://krystalrae.com/img/krystalrae-2012-fall-print-leopard-sketch.jpg);
           margin:0 0 10px; z-index:100; height:50px; font-size:18px; font-weight:bold; text-align:center; width:960px;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-24T08:04:00.927

你可以这样做：

[http://jsfiddle.net/ux41b606](http://jsfiddle.net/ux41b606)

HTML：

```
<div id="image">Some image</div>
<div id="scroller">Some controls</div> 
```

CSS：

```
body {
    height: 3000px;
    top: 0;
}
#image {
    width: 100%;
    background: #444;
    height: 50px;
}
#scroller{
    height:100px;
    background:#ccc;
}
.stuck{
    position:fixed;
    z-index:100;
    width:100%;
    top:0;
} 
```

JavaScript：

```
$(window).scroll(function() {
    if ($(window).scrollTop() > 50) {
        $('#scroller').addClass('stuck');
    } else {
        $('#scroller').removeClass('stuck');
    }
}); 
```

滚动 50 px 后，它将更改滚动条的 css。

这可能是一个好的开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:20:57.910

您所指的这种“粘性”行为已经在网络上变得足够流行，以至于一些人建议它应该作为 CSS 属性来实现，例如“位置：粘性”，但是现在和可预见的未来不可能做出“粘性”元素”，无需使用 Javascript。

```
var element = document.getElementById('navBar')
window.addEventListener('scroll', function() {
     element.getBoundingClientRect().top < 0 ? 
     element.classList.add('stuck') : 
     element.classList.remove('stuck');
}); 
```

在 CSS 中的什么位置`.stuck {position: fixed;}`

...类似的东西

# php - Apache 无法重定向到远程服务器中的根文件夹

> ID：15469132
> 
> 赞同：-1
> 
> 时间：2013-03-18T03:02:23.263
> 
> 标签：php, apache, apache2

我在远程服务器上配置了 apache 和 php 并且 apache 工作。当我将我的 php 文件放在 /var/www 中时，URL 没有重定向。

当我输入网址[http://xxx.xx.xx.x 时](http://xxx.xx.xx.x) ，我得到以下输出：

```
It works!
This is the default web page for this server.

The web server software is running but no content has been added, yet. 
```

在 /etc/apache2/apache.conf 我没有找到下面的块我添加下面的块并重新启动 apache 仍然没有重定向到 /var/www

```
<VirtualHost *:80>
ServerName xxx.xx.xx.x
DocumentRoot /var/www/
</VirtualHost> 
```

请务必让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:56:35.417

看起来您没有使用与 ServerName 字段中*完全相同*的服务器名称来访问服务器。因此，请求由默认虚拟主机提供服务 - Apache 文档指出这是在配置文件中找到的第一个 VirtualHost 指令。

删除第一个 VirtualHost 指令，apache 将默认使用您的虚拟主机设置。

# android - onReceive中的Android小部件远程视图空值

> ID：15469133
> 
> 赞同：0
> 
> 时间：2013-03-18T03:02:37.190
> 
> 标签：android, android-widget

我是 android 编程的新手，我试图解决这个问题几个小时，但仍然无法让它工作。我正在创建一个有 2 个按钮的小部件。一个按钮可以正常工作（调用活动的按钮），但另一个应该更改图片的按钮（如切换键）不起作用。我得到一个`NullPointerException`. 我已经跟踪了这个问题，当它传递给 onReceive 时，似乎 remoteViews 为空

```
public class Widget extends AppWidgetProvider {
boolean status = false;
private RemoteViews remoteViews;
Button bMain;

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    final int n = appWidgetIds.length;
    for(int i = 0; i < n; i++){
        final int appWidgetId = appWidgetIds[i];

        remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget);

        Intent configIntent = new Intent(context, Main.class);
        configIntent.setAction("callingActivity");
        PendingIntent configPendingIntent = PendingIntent.getActivity(context,
                0, configIntent, 0);
        remoteViews.setOnClickPendingIntent(R.id.bWidgetMain,
                configPendingIntent);

        configIntent = new Intent(context, Widget.class);
        configIntent.setAction("callingibFlash");
        configPendingIntent = PendingIntent.getBroadcast(context, 0,
                configIntent, 0);
        remoteViews.setOnClickPendingIntent(R.id.ibFlash, configPendingIntent);

        appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);
    }

}

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals("callingActivity")) {
        Toast.makeText(context, "Main", Toast.LENGTH_SHORT).show();
    } else if (intent.getAction().equals("callingibFlash")) {
        remoteViews.setImageViewResource(R.id.ibFlash,
                R.drawable.flashlight_on);
    } else {
        super.onReceive(context, intent);
    }
}

@Override
public void onDeleted(Context context, int[] appWidgetIds) {
    super.onDeleted(context, appWidgetIds);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:15:14.700

我建议将其`remoteViews`作为局部变量，而不是将引用作为实例变量。`onReceive()`您可以通过在您的实现中获得新的参考，`Context`并使用`AppWidgetManager`更新您的小部件，就像您在`onUpdate()`.

```
@Override
public void onReceive(Context context, Intent intent){
    if (intent.getAction().equals("callingActivity")) {
        Toast.makeText(context, "Main", Toast.LENGTH_SHORT).show();
    } else if (intent.getAction().equals("callingibFlash")) {
        ComponentName thisWidget = new ComponentName(context, Widget.class);
        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
        int[] appWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
        myRefactoredUpdate(context, appWidgetManager, appWidgetIds);
        // use for loop as in onUpdate to get to your remoteViews
        final int n = appWidgetIds.length;
        for (int i = 0; i < n; i++) {
            final int appWidgetId = appWidgetIds[i];
            remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget);
            remoteViews.setImageViewResource(R.id.ibFlash, R.drawable.flashlight_on);
        }
    } else {
        super.onReceive(context, intent);
    }
} 
```

一旦你有了新的 RemoteViews 就可以调用 setImageViewResource() 和任何你想要的。为每种情况调用 super.onReceive 也可能更好。

# ruby-on-rails - 将 Rails 应用程序部署到 heroku 时如何修复错误？

> ID：15469137
> 
> 赞同：0
> 
> 时间：2013-03-18T03:02:55.960
> 
> 标签：ruby-on-rails, deployment, heroku

我正在尝试将我的 Rails 应用程序部署到 heroku，但出现错误，如下所示。我也包括我的gemfile。

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'dynamic_form', '1.1.4'
gem 'json','1.7.7'
gem 'httparty', '0.10.2'

group :development do
    gem 'sqlite3'
end

gem 'bootstrap-sass', '2.1'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'client_side_validations'

group :test, :development do
  gem 'rspec-rails', '~> 2.11'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl', '2.6.4'
end
gem 'devise', '2.1.0rc'

group :production do
  gem 'pg', '0.12.2'
end 
```

# 错误

Gem 文件将继续安装在 /tmp/build_232b9vaemz20q/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.7 以供检查。结果记录到 /tmp/build_232b9vaemz20q/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.7/ext/sqlite3/gem_make.out 安装 sqlite3 (1.3.7) 时出错，Bundler 无法继续。`gem install sqlite3 -v '1.3.7'`在捆绑之前确保成功。！！无法通过 Bundler 安装 gem。！！Heroku 推送被拒绝，无法编译 Ruby/rails 应用程序

到 git@heroku.com:warm-chamber-7399.git ！[remote denied] master -> master (pre-receive hook denied)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:38:58.657

Heroku 不支持 SQLite 数据库。您需要`PostgreSQL`在生产中使用。

```
group :production, :staging do
  gem "pg"
end

group :development, :test do
  gem "sqlite3-ruby", "~> 1.3.0", :require => "sqlite3"
end 
```

通过这个链接：[Sqlite3 不支持 Heroku](https://getsatisfaction.com/railstutorial/topics/sqlite3_not_supported_with_heroku)

# php - 用 HTML 替换字符串

> ID：15469139
> 
> 赞同：0
> 
> 时间：2013-03-18T03:03:07.723
> 
> 标签：php, str-replace, dompdf

我使用`str_replace`如下：

```
<html>
    <head>
    </head>

    <body>
    <script type="text/php">
        $new_str = str_replace( '[[str_to_replace]]' , $GLOBALS['html'] , $original_str );
    </script>

    <div class="wrapper">[[str_to_replace]]</div>

    <?php 

    // multiple includes

    // lots and lots of code

    //PHP code to calculate HTML code
    //value of $html depends on data calculated after div.wrapper is drawn
    $GLOBALS['html'] = '<input type="text" />';
    ?>    

    </body>
</html> 
```

我被迫将 PHP 代码包装在`script`标签中，因为该文档作为 HTML 文档传递给库。该库能够在脚本标签内执行 PHP 代码，但在这种情况下工作异常。

我所期待的：

`[[str_to_replace]]`应该成为一个 HTML 输入字段。

我得到了什么：

`[[str_to_replace]]`成为文字字符串`<input type="text" />`。

如何获得第二个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:08:24.287

听起来您想要做的是用解码的 HTML 实体替换字符串。您可能想要这样做：

```
$htmlEntityString = '&amp;'; // String containing HTML entities that you want to decode.
$new_str = str_replace( '[[str_to_replace]]' , html_entity_decode($htmlEntityString) , $original_str ); 
```

在这种情况下，任何带有 HTML 实体形式的 HTML 都将被解码并替换子字符串。

阅读更多关于它的所有选项：

[http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:16:05.677

您可能误解了您可以使用内联脚本做什么。在 dompdf 中，HTML 与内联脚本分开解析。您使用内联脚本插入到文档中的任何 HTML 都将被视为纯文本。您应该做的是首先解析您的文档，然后将结果传递给 dompdf。

仅供参考，很难从您的示例中确切地看到您在代码中所做的事情。另外，我们看不到 dompdf 发生了什么。我很难看出一切是如何联系在一起的。

# android - 如何更改我的代码以使用 APK 扩展文件？

> ID：15469141
> 
> 赞同：2
> 
> 时间：2013-03-18T03:03:13.720
> 
> 标签：android, apk

我的应用程序超过 50MB，因为我使用了很多 MP3 文件。我通常这样做...

```
uri = Uri.parse("android.resource://red.cricket.RecordAlbum/" + R.raw.track_001_64kb ); 
```

...但是如果我必须使用 APK 扩展文件，我假设上面的代码行必须更改。但是改成什么？任何帮助是极大的赞赏！

编辑 1）感谢您的回答泰德。我确实像这样创建了扩展文件：

```
red@ubuntu:~/android/workspace/Album/res/raw$ zip -n .mp3 main.1.com.redcricket.Album.obb *mp3 
```

那我现在该怎么办？`rm -f *mp3; cd ../..; ant clean ; ant debug` 不知何故，我认为这行不通。我应该把`main.1.com.redcricket.Album.obb`文件放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:56:02.050

[这些步骤在文档](http://developer.android.com/google/play/expansion-files.html)中非常清楚地列出。概括地说，步骤是：

1.  从 .apk 中删除 .mp3 文件并将它们放入扩展文件中。根据说明命名扩展文件。文件的格式可以是您想要的任何格式，但文档建议您使用未压缩的 ZIP 格式的音频文件。Android 包含[APK 扩展 ZIP 库](http://developer.android.com/google/play/expansion-files.html#ZipLib)，可用于直接从 ZIP 文件加载 .mp3 文件，而无需解压缩。
2.  重写应用程序以在该位置查找扩展文件

    ```
    Context ctx = getContext();  
    String loc = ctx.getExternalStorageDirectory()
             + "/Android/obb/" + ctx.getPackageName(); 
    ```

3.  编写代码，以便如果文件不存在，您的应用程序将从 Google Play 下载它，使用文档中描述的[应用程序许可服务。](http://developer.android.com/google/play/licensing/index.html)此步骤涉及相当多的编码和配置。

4.  使用 APK 扩展 ZIP 库访问所需的 .mp3 文件。[文档有通过调用MediaPlayer.setDataSource()](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28java.io.FileDescriptor,%20long,%20long%29)从扩展文件加载 MP3 的示例，其中包含文件描述符、ZIP 文件的偏移量和文件长度。

另请参阅[此线程](https://stackoverflow.com/questions/11715855/steps-to-create-apk-expansion-file/11717019#11717019)以获取有关如何执行所有这些操作的更多详细信息。

# java - camera.setPreviewDisplay(SurfaceHolder) 上的异常

> ID：15469150
> 
> 赞同：0
> 
> 时间：2013-03-18T03:05:31.153
> 
> 标签：java, android, android-camera, surfaceview

Android 编程新手在这里。

我环顾四周，发现这是一个常见问题，但我真的没有看到一个简单的解决方法......我正在尝试在 Nexus 7 上运行以下代码（尝试过 AVD 和物理设备）没有任何运气。它似乎是：

```
camera.setPreviewDisplay(SurfaceHolder); 
```

但我可能是错的。这是当前代码：

```
public class MainActivity extends Activity implements SurfaceHolder.Callback{

 Camera camera;
 SurfaceView surfaceView;
 SurfaceHolder surfaceHolder;
 boolean previewing = false;;

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.cameralayout);

       getWindow().setFormat(PixelFormat.UNKNOWN);
       surfaceView = (SurfaceView)findViewById(R.id.surfaceview);
       surfaceHolder = surfaceView.getHolder();
       surfaceHolder.addCallback(this);

   }

   public void onClick() {
    // TODO Auto-generated method stub
    if(!previewing){
     camera = Camera.open();
     if (camera != null){
      try {
       camera.setPreviewDisplay(surfaceHolder);
       camera.startPreview();
       previewing = true;
      } catch (IOException e) {
       e.printStackTrace();
      }

    }
    }
   } 
```

有什么想法吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:36:55.883

从[android 文档](http://developer.android.com/reference/android/hardware/Camera.html#open%28%29)中关于`Camera.open()`

> 创建一个新的 Camera 对象以访问设备上的第一个后置摄像头。如果设备没有后置摄像头，则返回 null。

它使您只能访问后置摄像头。

> 我正在尝试在 Nexus 7 上运行以下代码

`Camera.open()`返回`null`是因为 Nexus 7 没有后置摄像头，只有前置摄像头。

你可以试试这个方法

```
public Camera getCamera()
{

    for(int i = 0; i < Camera.getNumberOfCameras(); i++)
        return Camera.open(i);

    return null;
} 
```

申请，

```
camera = getCamera(); 
```

# php - PHP 相当于 python 'site-packages'

> ID：15469151
> 
> 赞同：0
> 
> 时间：2013-03-18T03:05:31.317
> 
> 标签：php

我应该在哪里放置一个 php 库（在我目前的情况下[为https://github.com/fzaninotto/Faker](https://github.com/fzaninotto/Faker)）以便在系统范围内访问它？

PHP 是否要求我只在执行 php 的 $(pwd) 的目录和子目录中转储文件，并使用路径告诉 php 一切在哪里？或者是否有一个相当于 Python 站点包的 php，其中所有路径和加载样板都被取消了，我可以在每次执行 PHP 时知道它加载了它？

# magento - Magento - Navigation.phtml 覆盖不起作用

> ID：15469155
> 
> 赞同：0
> 
> 时间：2013-03-18T03:05:46.600
> 
> 标签：magento, twitter-bootstrap

我正在开发一个**引导主题**，我正在尝试修改分配给下拉菜单/父母的类，但我运气不佳。

我所做的任何更改都不会显示在前端 - 我已刷新缓存、登录/注销，我什至尝试编辑实际的核心文件，但没有任何效果。

`navigation.phtml`我已经制作了to的副本，`local/Mage/Catalog/Block/Navigation.phtml`但仍然无法正常工作。

有什么我错过的吗？我不太确定该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:30:43.587

首先，据我所知，没有`Navigation.phtml`in `code/core/Mage/Catalog/Block/`。而是`Navigation.php`（Magento 1.7.x）。

其次，如果您需要覆盖核心模块中的任何内容，最好创建一个单独的模块。因为如果您在 中创建精确副本`local`，更新后可能无法正常工作。

如果您尝试创建下拉菜单，则需要编辑文件以在文件夹`app/design/frontend/base/default/`中创建副本。`app/design/frontend/yourtheme/default/`

顶部菜单位于`app/design/frontend/base/default/catalog/navigation/top.phtml`. 如需详细查看，请在`System>Configuration>Developer>Debug`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T09:52:23.660

如果您想将 Magento 1.7.x 转换为 Bootstrap 导航，请将 topmenu.phtml 转换为您的主题：

*magento/app/design/frontend/your_package/your_theme/template/page/html/topmenu.phtml*

添加jQuery代码：

```
<script type="text/javascript">
    /*<![CDATA[*/
    jQuery(document).ready(function ($) {
        $("#nav").magentoBootstrapNavigation();
    });
    /*]]>*/
</script> 
```

你会得到这样的东西：

```
<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/**
 * Top menu for store
 *
 * @see Mage_Page_Block_Html_Topmenu
 */
?>
<?php $_menu = $this->getHtml('level-top') ?>
<?php if($_menu): ?>
    <ul id="nav" class="nav navbar-nav">
        <?php echo $_menu ?>
    </ul>

    <script type="text/javascript">
        /*<![CDATA[*/
        jQuery(document).ready(function ($) {
            $("#nav").magentoBootstrapNavigation();
        });
        /*]]>*/
    </script>
<?php endif ?> 
```

然后通过local.xml添加js文件

```
<!-- jQuery scripts -->
<action method="addItem"><type>skin_js</type><script>js/jquery-scripts/magento-to-bootstrap-navigation.js</script></action> 
```

创建.js文件：

*magento/skin/frontend/your_package/your_theme/js/jquery-scripts/magento-to-bootstrap-navigation.js*

打开 magento-to-bootstrap-navigation.js 结束粘贴：

```
/*
* Convert default Magento navigation to Bootstrap navigation
 */
(function ( $ ) {

    $.fn.magentoBootstrapNavigation = function() {

        var menu = function(){
            var nav = $(this);

            nav.find(".parent")
                .addClass("dropdown")
                .children("a").addClass("dropdown-toggle").attr("data-toggle", "dropdown").append( ' <b class="caret"></b>')
                .next().addClass("dropdown-menu");
        };

        return this.each(menu);

    };

}( jQuery )); 
```

就这样。

PS：您可能会遇到 .btn-group 的自我隐藏问题。我通过编辑核心 Bootstrap dropdown.js 文件来解决这个问题：

*path_to_your_bootstrap/bootstrap/js/dropdown.js*

打开并找到行：

```
$parent.removeClass('open').trigger('hidden.bs.dropdown') 
```

并替换为：

```
//$parent.removeClass('open').trigger('hidden.bs.dropdown')
$parent.removeClass('open').trigger('hidden.bs.dropdown').show() 
```

祝你今天过得愉快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:43:13.013

而不是编辑核心文件，我决定通过 jQuery 来代替......

```
<script type="text/javascript">
jQuery('.parent').addClass('dropdown');
jQuery('a.level-top').addClass('dropdown-toggle');
jQuery('li.parent ul').addClass('dropdown-menu');
jQuery('li.level1 ul').wrap('<li class="dropdown-submenu" />');

jQuery('ul.nav li.dropdown').hover(function() {
  jQuery(this).find('.dropdown-menu').stop(true, true).delay(200).fadeIn();
}, function() {
  jQuery(this).find('.dropdown-menu').stop(true, true).delay(200).fadeOut();
});
</script> 
```

我通过 jQuery 添加了所需的类，并使用 .wrap 来包装下拉子菜单

第二部分是从单击时打开子菜单更改为悬停时打开子菜单。

现在一切正常，并且具有在 magento 中构建引导多级下拉菜单所需的类。

# php - 如何使用 PHP 从数据库中获取单词？

> ID：15469169
> 
> 赞同：0
> 
> 时间：2013-03-18T03:07:55.260
> 
> 标签：php, mysql, sql

这是用于获取用户输入的单词的 PHP 代码。请问如果用户在我的网站上输入关键字“john”为“jhon”而没有姓氏，如何显示“jhon dewey”的结果？

我的数据库字段是：

`first_name`（包含名字记录）

`last_name`（包含姓氏记录）

这是我的代码。请帮我找出错误。我可以将 %john% 更改为变量，以便用户输入的任何单词都可以搜索到我的数据库吗？

```
<?php

// Database connection

$sql = new mysqli("localhost", "root", "MYPassword", "test");
if (mysqli_connect_errno ()) {
    die(mysqli_connect_error());
    exit;
}

$query = "SELECT * FROM `usage` WHERE 'first_name' LIKE %john%";
$result = $sql->query($query);
if (!$result)
    die($mysqli->error);

while ($row = $result->fetch_assoc()) {
    $rows[] = $row;
}
$result->close();
$sql->close();

print("<pre>");
print_r($rows);
print("</pre>");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:09:44.937

*   模式是字符串文字，因此它们必须用单引号括起来。
*   其次，列名是标识符，因此不应将它们用单引号括起来，因为单引号用于字符串文字。

片段：

```
$query = "SELECT * FROM `usage` WHERE `first_name` LIKE '%john%'" 
```

由于您的列名不是保留关键字，因此在这种情况下，反引号是可选的

```
$query = "SELECT * FROM `usage` WHERE first_name LIKE '%john%'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:48:47.923

检查这个

```
<?php

// Database connection

$sql = new mysqli("localhost", "root", "MYPassword", "test");
if (mysqli_connect_errno ()) {
    die(mysqli_connect_error());
    exit;
}

$query = "SELECT * FROM `usage` WHERE `first_name` LIKE '%john%'";
$result = $sql->query($query);
if (!$result)
    die($mysqli->error);
$rows = array();
while ($row = $result->fetch_assoc()) {
    $rows[] = $row;
}
$result->close();
$sql->close();

print("<pre>");
print_r($rows);
print("</pre>");
?> 
```

# css - 单行（一个或两个单词）在 div 外溢出

> ID：15469170
> 
> 赞同：0
> 
> 时间：2013-03-18T03:07:55.430
> 
> 标签：css, html, xhtml, overflow

我是 CSS 的新手，所以如果这是一个愚蠢的问题，请原谅我。

我创建了一个页脚，其中包含 3 个嵌入的 div，其宽度为 33.33%。出于某种原因，我放入每个 div 的文本一半在 div 底部，一半在 div 底部。这让我发疯。有人可以解释为什么会这样吗？

这是我的 XHTML：

```
<! DOCTYPE html PUBLIC "-//w3c//DTD XHTML 1.0 strict//EN" "http://www.3org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="EN" dir="ltr" xmlns="http://www.w3org/1999/xhtml">

<head>

 <meta http-equiv="content-type"
 content="text/xml; charset=utf-8" />

<title>www.BLeeOBS.com</title>

<link rel = "stylesheet"
 type = "text/css"
 href = "twoCol.css" />

</head>

<body background="images/brick.jpg">

<div id="body">

<div id="head">
 <h1>B. Lee Oil Burner Service</h1>
</div>

<div id="head_right">
 <h1></h1>
</div>

<div id="left">
 <h2></h2>
</div>

<div id="right">
 <h2></h2>
</div>

<div id="footer">

  <div id="footer1">
  <h3>Fully Insured</h3>
  </div>

  <div id="footer2">
  <h3>HIC# PA088378</h3>
  </div>

  <div id="footer3">
  <h3>©2013</h3>
  </div>

</div>

</div>

</body>

</html> 
```

这是我的CSS：

```
#body {
 margin-left: auto;
 margin-right: auto;
 background-image: url("images/bggradient.jpg");
 text-align: center;
 background-repeat: repeat-x;
 width: 768px;
 height: 1024px;
}
#head {
 background-image: url("images/horizontalpipe.png");
 background-repeat: repeat-x;
 float: left;
 height: 90px;
 width: 678px;
}
 #head_right {
 background-image: url("images/elbow.png");
 float: left;
 width: 90px;
 height:90px;
}
#left {
 float: left;
 height: 904px;
 width: 678px;
}
#right {
 background-image: url("images/verticalpipe.png");
 background-repeat: repeat-y;
 float: left;
 width: 90px;
 height: 904px;
}
#footer {
 background-color: gray;
 color: white;
 height: 30px;
 width: 768px;
 clear: both;
}
#footer1 {
 height: 30px;
 float: left;
 width: 33.33%;
}
#footer2 {
 height: 20px;
 float: left;
 width: 33.33%;
}
#footer3 {
height: 20px;
width: 33.33%;
float: left;
} 
```

我的页面可以在这里查看，看看发生了什么：http: [//www.bleeobs.com/bricksswf.html](http://www.bleeobs.com/bricksswf.html)

白色文本应完全位于灰色框（我的 div）中，但如您所见，它位于中间。

另外，我想在标题中将“B. Lee Oil Burner Service”文本稍微高一点。设置填充似乎根本没有帮助。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:20:44.060

我不确定为什么，但我在这里看到的“用户代理样式表”正在设置边距：

![检查员](../Images/e49312fe00c28505897b335615e2c4a6.png)

立即修复正在设置

```
h3 { margin: 0 } 
```

或者你想要的。根据这个[覆盖我的网站样式的 Chrome 用户代理样式表](https://stackoverflow.com/questions/7466404/chrome-user-agent-stylesheet-overwriting-my-site-style)，您可能想要查看正确的修复程序。它可能在您的文档顶部有所需的内容（可能是 html 5），或者它可能在某处损坏了 css。

编辑：看起来 Adrift 关于需要重置的默认浏览器样式可能是正确的。您可以像他建议的那样使用 reset.css。

# ruby-on-rails - 为什么 ActiveRecord objects.size 返回错误的数字？

> ID：15469173
> 
> 赞同：2
> 
> 时间：2013-03-18T03:08:26.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, rails-activerecord

`has_many :through, :uniq => true`我在 School 对象和通过关系连接的 User 对象之间有一个 ActiveRecord 。

在学校课上，我有一个特定的方法来查询学生：

```
def students
  self.users.where(educations: {end_date: nil})
end 
```

这似乎正确地只给了我唯一的用户（无重复），但奇怪的是`school.students.size`给了我一个包含重复记录的计数！但是，如果我查看 school.students 返回的可枚举，它只显示唯一记录。

我尝试在 where 查询的末尾添加 #uniq。这似乎不能解决问题。到目前为止，我唯一的解决方案是使用`school.students.compact.size`，但这不可能。

顺便说一下，`school.users.size`给我一个准确的计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:40:51.297

您应该`count`在 ActiveRecord::Relation 对象上使用，因为它可以对数据库进行计数查询。调用`size`导致从数据库中获取所有对象，创建一个数组，然后调用`size`它。不过，这可能无法解决您的问题。

创建另一个协会会产生影响吗？

```
has_many :students, class_name: User, through: SchoolUsers(?), conditions: {educations: {end_date: nil}} 
```

# vb.net - vb.net 清除组合框项目

> ID：15469176
> 
> 赞同：-1
> 
> 时间：2013-03-18T03:09:03.123
> 
> 标签：vb.net, combobox

我有两个相关的组合框。我的问题是当我从组合框 1 中选择项目时，我的组合框 2 项目不会重置/清除。相反，它会不断在组合框2 的底部添加/附加新项目。我在添加新项目之前尝试过 `ComboBox2.DataSource = Nothing`， `ComboBox2.Items.Clear()`但仍然不清楚。

```
Private Sub ComboBox1_Validated(ByVal sender As Object, ByVal e As System.EventArgs) Handles ComboBox1.Validated
    ComboBox2.DataSource = Nothing
    ComboBox2.Items.Clear()
    ComboBox2.Items.Remove(ComboBox2.DisplayMember)
    sql = "select brgyname,idbrgy from barangay where idmun=" & ComboBox1.SelectedValue.ToString
    da = New Odbc.OdbcDataAdapter(sql, con)
    da.Fill(ds, "cbBrgy")
    ComboBox2.DataSource = ds.Tables("cbBrgy")
    ComboBox2.DisplayMember = "brgyname"
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T04:36:09.693

不要做

```
ComboBox2.DataSource = Nothing 
```

只需清除项目

```
ComboBox2.Items.Clear() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:34:59.383

试试这个...将您的方法更改为...

```
 Private Sub ComboBox1_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
     ComboBox2.Items.Clear()
     sql = "select brgyname,idbrgy from barangay where idmun=" & ComboBox1.SelectedValue
     da = New Odbc.OdbcDataAdapter(sql, con)
     da.Fill(ds, "cbBrgy")
     ComboBox2.DataSource = ds.Tables("cbBrgy")
     ComboBox2.DisplayMember = "brgyname"
 End Sub 
```

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T08:38:29.583

```
combobox1.SelectedIndex = -1 
```

这是最好的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-15T02:18:26.853

```
If Not IsNothing(ds.Tables("cbBrgy")) Then
    ds.Tables("cbBrgy").clear
End If

sql = "select brgyname,idbrgy from barangay where idmun=" & ComboBox1.SelectedValue
da = New Odbc.OdbcDataAdapter(sql, con)
da.Fill(ds, "cbBrgy")
ComboBox2.DataSource = ds.Tables("cbBrgy")
ComboBox2.DisplayMember = "brgyname" 
```

在再次填充表之前先处理表，然后再次将其设置为 DataSource。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-24T09:00:38.960

利用

```
ds.Tables("cbBrgy").Rows.Clear() 
```

代替

```
ComboBox2.DataSource = Nothing
ComboBox2.Items.Clear() 
```

但请确保`ds.Table("cbBrgy")`不在`Null`使用该行之前

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T09:17:47.357

而不是使用

`ComboBox2.DataSource = Nothing`和`ComboBox2.Items.Clear()`

利用，`ds.Tables("cbBrgy").Rows.Clear()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-14T00:11:59.960

首先检查数据源是否有值。例如：

```
if isnothing(combobox1.Datasource) then
*write your code to populate here
end if. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-23T05:42:50.490

`combo2_selectedIndedChange`请在活动下方写下以下代码

```
If Not IsNothing(ds.Tables("cbBrgy")) Then
                ds.Tables("cbBrgy").clear()
            End If
            ComboBox2.DataSource = Nothing
            ComboBox2.Items.Clear()

            Sql = "select brgyname,idbrgy from barangay where idmun=" & ComboBox1.SelectedValue
            da = New Odbc.OdbcDataAdapter(Sql, Con)
            da.Fill(ds, "cbBrgy")
            ComboBox2.DataSource = ds.Tables("cbBrgy")
            ComboBox2.DisplayMember = "brgyname" 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-02-24T10:48:32.393

按照这个，

> ComboBox.Text = 无

这足以清除组合框中的值。

# java - 在 Java 中更改数组的特定值，当它是 HashMap 的值时

> ID：15469179
> 
> 赞同：2
> 
> 时间：2013-03-18T03:09:19.527
> 
> 标签：java, arrays, indexing, hashmap

我有一个 HashMap ，其中键是整数，值是双精度数组，即

`HashMap<Integer, double[]> map = new HashMap<>();`

如何更改双精度数组中特定索引的值？

一种方法是获取所需键的双精度数组，将其复制到临时数组，修改临时数组中所需的索引，然后将数组放入映射中，对于相同的键，即

双温度[] = map.get(i);

温度[10] = 3.142;

map.put(i,temp);

但是，必须有更好的实现，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:37:27.983

这里有一个误解。您的答案已经接近正确，但比您想象的要好。 `double[] temp = map.get(i)`不复制：它返回*对*同一数组的*引用。*所以

```
double[] temp = map.get(i);
temp[j] = 42.0; 
```

做你想让它做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:13:10.993

这应该可以解决问题......除非我误解了您的问题描述：

```
HashMap map = new HashMap<Integer, double[]>();
...
doubles = map.get(i);
doubles[j] = 42.0; 
```

# php - 会员可以更改密码

> ID：15469181
> 
> 赞同：0
> 
> 时间：2013-03-18T03:09:30.033
> 
> 标签：php

我制作了一个脚本，它应该使用户能够更改他们的密码。但我得到错误确认密码和新密码不匹配..这是代码

```
<?
session_start();   
include 'db.php';

 if($_POST['username']!="") {
  $username = $_POST['username'];  
}
else die("No Username was passed");
if($_POST['password']!="") {
  $password = $_POST['password'];
}
else die("No Password was passed");
if($_POST['newpassword']!="") {
  $newpassword = $_POST['newpassword'];
}
else die("No NewPassword was passed");
if($_POST['confirmnewpassword']!="") {
  $newpassword = $_POST['confirmnewpassword'];
}
else die("No Confirm Password was passed");

$username = $_POST['username'];  
$password = $_POST['password'];
$newpassword = $_POST['newpassword'];
$confirmnewpassword = $_POST['confirmnewpassword'];

$result = mysql_query("SELECT password FROM users WHERE username='$username'");

    if(!$result){
        echo "The username entered does not exist!";
    }
    else
        if($password != mysql_result($result, 0)){
            echo "Entered an incorrect password";
            }

    if($newpassword == $confirmnewpassword){
        $sql = mysql_query("UPDATE users SET password = '$newpassword' WHERE username = '$username'");      
    }

    if(!$sql){
        echo "Congratulations, password successfully changed!";
    }
    else{
        echo "New password and confirm password must be the same!";
    }

  ?> 
```

这是表格代码

```
<form action="lostpw.php" method="post" name="" id="">
                                            <table width="50%" border="0" align="center" cellpadding="4" cellspacing="0">
                                                <tr> 
                                                  <td width="22%">Username</td>
                                                  <td width="78%"><input name="username" type="text" id="username" value="<? echo "". $_SESSION['username'] ."" ?>"></td>
                                                </tr>
                                                <tr> 
                                                  <td width="22%">Old password</td>
                                                  <td width="78%"><input name="password" type="text" id="password"></td>
                                                </tr>
                                                  <td>New Password</td>
                                                  <td><input name="newpassword" type="newpassword" value=""></td>
                                                </tr>
                                                <tr> 
                                                </tr>
                                                  <td>Confirm </td>
                                                  <td><input name="confirmnewpassword" type="confirmnewpassword" value=""></td>
                                                </tr>
                                                <tr> 
                                                  <td>&nbsp;</td>
                                                  <td><input type="submit" name="Submit" value="update"></td>
                                                </tr>
                                                <tr> 
                                                  <td><a href="home.php">Back</a></td>
                                                </tr>
                                            </table>
</form> 
```

我在哪里做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:15:42.487

在任何不良行为的情况下，您都不会停止。您不会在以下情况下停止脚本的执行：

```
if(!$result){
        echo "The username entered does not exist!";
    } else if($password != mysql_result($result, 0)){
        echo "Entered an incorrect password";
} 
```

所以：

```
if($newpassword == $confirmnewpassword){
    $sql = mysql_query("UPDATE users SET password = '$newpassword' WHERE username = '$username'");      
} 
```

将始终被评估。

还

```
if(!$sql){
    echo "Congratulations, password successfully changed!";
} else {
    echo "New password and confirm password must be the same!";
} 
```

表示：当查询失败时（`$sql = false`, `!$sql = true`）打印成功消息，否则打印失败消息。我不认为那是你想要的。您可能想要反转这两个块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:16:29.430

你不应该有那个感叹号，它是一个逆变器。这就是说'如果查询 DIDN'T WORK，说祝贺，否则如果它 DID 工作，给出错误消息。以下：

```
if(!$sql){
    echo "Congratulations, password successfully changed!";
}
else{
    echo "New password and confirm password must be the same!";
} 
```

应该：

```
if($sql){
    echo "Congratulations, password successfully changed!";
}
else{
    echo "New password and confirm password must be the same!";
} 
```

# powershell - 使用powershell获取当月的天数

> ID：15469185
> 
> 赞同：2
> 
> 时间：2013-03-18T03:10:20.420
> 
> 标签：powershell, powershell-2.0

我需要检索当月的天数，尽管我进行了研究，但我还没有在 powershell 中找到任何可以做到这一点的东西。以下是我目前为获得我想要的结果而构建的。有更好的方法吗？

请注意，我仅限于 Powershell

```
 #check to see if this is a leap year
    function LYC
    {
        if ([System.DateTime]::isleapyear((Get-Date).Year))
        {
            $Global:LY = True
        }
    }
    #Get the number of days in current month
    function fNOD
    {
        $MNum = (Get-Date).Month
        switch ($MNum)
        {
            1   {$Global:DaysInMonth=31}
            2   {
                    LYC
                    if (LY)
                    {
                        $Global:DaysInMonth=29
                    } else {
                        $Global:DaysInMonth=28
                    }
                }
            3   {$Global:DaysInMonth=31}
            4   {$Global:DaysInMonth=30}
            5   {$Global:DaysInMonth=31}
            6   {$Global:DaysInMonth=30}
            7   {$Global:DaysInMonth=31}
            8   {$Global:DaysInMonth=31}
            9   {$Global:DaysInMonth=30}
            10  {$Global:DaysInMonth=31}
            11  {$Global:DaysInMonth=30}
            12  {$Global:DaysInMonth=31}
        }
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T03:37:04.763

[http://msdn.microsoft.com/en-us/library/system.datetime.daysinmonth.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.daysinmonth.aspx)

```
# static int DaysInMonth(int year, int month)
[DateTime]::DaysInMonth(2013, 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T06:57:57.807

假设您想要它存储在任何日期`$date`：

```
((get-date $date -Day 1 -hour 0 -Minute 0 -Second 0).AddMonths(1).AddSeconds(-1)).Day 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T03:39:31.710

在我看来，这似乎很容易：

```
$numDays = ((Get-Date -Month 3) - (Get-Date -Month 2)) 
```

2 月 28 天，7 月减去 6 月给了我 30 天。

如下所述，这显然有时会进行一些奇怪的整数舍入，导致 29d、23h、59m 或其他不正确的值。

这似乎是一致的：

```
$monthLess = Get-Date -Month 4
$NumDays = (Get-Date -Month 5).Subtract($monthLess) 
```

# python - 如何从 Python 中的二维列表中检索值

> ID：15469188
> 
> 赞同：1
> 
> 时间：2013-03-18T03:11:05.787
> 
> 标签：python, list

如果我有这样的二维列表：

```
TopRow = [1, 3, 5]
MiddleRow = [7, 9, 11]
BottomRow = [13, 15, 17]
matrix = [TopRow, MiddleRow, BottomRow] 
```

我需要创建一个函数，将二维列表和两个值 row 和 col 作为输入，然后在二维列表的指定行和列中打印出指定的数字。假设 row 和 col 定义如下：

```
row = 2
col = 3 
```

为什么这段代码不检索值（在本例中为 11）并将其打印出来？

```
def get_value(matrix, row, col):
    print(matrix[row][col]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T03:12:07.220

Python 索引从 0 开始，而不是 1。11 位于第 1 行第 2 列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:13:27.520

索引从 0 开始，因此对于您的矩阵，您有 [0][0]...[2][2]

```
>>> TopRow = [1, 3, 5]
>>> MiddleRow = [7, 9, 11]
>>> BottomRow = [13, 15, 17]
>>> matrix = [TopRow, MiddleRow, BottomRow]
>>> 
>>> def get_value(matrix, row, col):
...     print(matrix[row][col])
... 
>>> get_value(matrix, 1, 2)
11
>>> get_value(matrix, 2, 1)
15 
```

# sql - 标准化，我需要尽可能减少我的工作

> ID：15469192
> 
> 赞同：-4
> 
> 时间：2013-03-18T03:11:52.553
> 
> 标签：sql

请帮我解决这个小问题，这是我的代码。我的问题是我有成千上万的数据，我不想输入所有数据。什么是最好但最简单的程序？我使用 SQL，所有数据的编码格式相同

```
create table Subjects
(Subject_code nvarchar(10) primary key
,Subject_name nvarchar(20)
,Description nvarchar(MAX)
,Units int)

create table Schedules
(Schedule_ID int primary key identity(650500,1)
,Section nvarchar(10) 
,Subject_code nvarchar(10) foreign key references Subjects(Subject_code)
as 
select subject_code from subject 
where  subject_code = subject_code
,Days nvarchar(10)
,Time time
,Room nvarchar(10)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:18:04.547

几乎所有数据库都有一个导入实用程序 - 使用它。

通常，您会创建数据的[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)文件，然后让数据库将其导入您的表中。

你还没有指定你正在使用*哪个*数据库，所以我不能比这更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:18:57.587

如果您的意思是将表中的数据插入另一个表中（不输入） - 我理解您可以这样做，我希望这就是您的意思：

```
 insert into Schedules ( col1, col2, col3 )
 select otherCol1, otherCol2, otherCol3
 from SomeSourceTable 
```

# gcc - 当“大小”给出错误答案时，如何确定 Linux 上的目标代码大小？

> ID：15469199
> 
> 赞同：8
> 
> 时间：2013-03-18T03:12:19.120
> 
> 标签：gcc, binutils

我想确切地知道 GCC 为每个编译单元集合生成了多少目标代码，但是我遇到了一个奇怪的问题，即 binutils 的“size”命令没有给出正确的结果。

让我们看一个只包含这个函数的 C 文件：

```
int foo (int a, int b)
{
  return a+b;
} 
```

我们可以编译它并使用“size”和“objdump”检查目标代码大小：

```
$ gcc -O foo.c -c
$ size foo.o
   text    data     bss     dec     hex filename
     52       0       0      52      34 foo.o
$ objdump -d foo.o

foo.o:     file format elf64-x86-64

Disassembly of section .text:

0000000000000000 <foo>:
   0:   8d 04 37                lea    (%rdi,%rsi,1),%eax
   3:   c3                      retq 
```

从 objdump 输出中可以清楚地看出，目标代码大小为 4 个字节。但是，size 报告 52 字节，这是不正确的。

从使用“-D”选项到 objdump，它看起来像是异常处理代码，也许其他一些东西正在通过“大小”来衡量，并添加到我真正关心的代码的大小中。有谁知道一种相对简单的方法来获得尺寸以忽略这些额外内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-27T16:40:48.947

你必须坚持`size`吗？它有许多与您遇到的问题相似的问题，因此我通常使用以下`readelf`代码段：

```
OBJ=foo.o
SEC=.text

readelf -SW "$OBJ" \
  | sed 's/^ *\[[0-9 ]*\] *//' \
  | awk '
    /NOBITS/ { next; }
    /^'$SEC'\>/ { sz = strtonum("0x" $5); s += sz; }
    END { print s }' 
```

# ruby - Mongoid：我可以嵌入很多并引用其中的一个吗？

> ID：15469206
> 
> 赞同：0
> 
> 时间：2013-03-18T03:12:47.443
> 
> 标签：ruby, mongodb, ruby-on-rails-3.1, mongoid, mongoid3

我有一个游戏列表。每个都有一个嵌入的分数列表。我想在分数列表之外保留对最佳分数的引用。

```
class Game
  include Mongoid::Document
  field :best_score_id, type: Moped::BSON::ObjectId
  ... 
  embeds_many :scores

class Score 
  include Mongoid::Document
  field :user, type: String
  field :score, type: Int 
```

我尝试执行 an `belongs_to`and a`has_one`但收到错误消息：“由于嵌入了价格历史记录，因此不允许通过关系关联从 Game 文档中引用 Score 文档。” 我想我可以将分数的相关位存储在一个名为“best_score”的哈希中，但嵌入许多分数然后将其中一个称为“最佳”对我来说更有意义。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:16:51.697

你可以做这样的事情 -

写一个方法来挑选游戏模型类中最好的分数——

```
def best_score
  score = scores.order_by(:score, :desc).limit(1)
  if score.nil?
    nil
  else
    score.first
  end
end 
```

而且由于游戏中嵌入了分数，因此也不会对数据库进行任何 +1 查询。

# jquery - 基于单击的 div 在 JQuery 数组中添加和删除值时遇到问题

> ID：15469209
> 
> 赞同：1
> 
> 时间：2013-03-18T03:13:13.210
> 
> 标签：jquery, html, forms

这是我的jQuery：

```
var skinCare=[];

$('.skinCare').click(function(){
    if($.inArray(event.target.id, skinCare) == -1){
        var value = event.target.id;
        skinCare.push(value);
    }
    var index = skinCare.indexOf(value);
    if($(this).css('background-color') == 'rgb(255, 255, 255)'){
        skinCare.splice(skinCare.indexOf(index), 1);
    }
});
$('html').click(function(){
    alert(skinCare);
}); 
```

这是我显示供用户点击的 HTML：

```
<a href="#item4" class="panel"><div class="nextButton"></div></a>
                <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="acne" style="top:10px;left:265px"><div class="inner_circle" id="acne">ACNE/</br>BLEMISHES</div></div></a>
                <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="dry_skin" style="top:255px;left:10px"><div class="inner_circle" id="dry_skin">DRY SKIN</div></div></a>
                <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="oily_skin" style="top:90px;left:100px"><div class="inner_circle" id="oily_skin">OILY SKIN/LARGE PORES</div></div></a>
                <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="aging" style="top:90px;left:430px"><div class="inner_circle" id="aging">WRINKLES/</br>AGING</div></div></a>
                <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="irritation" style="top:255px;left:510px"><div class="inner_circle" id="irritation">SENSATIVE SKIN/IRRITATION</div></div></a>
                <a href="#item3" class="panel multi"><div class="circle skinCare multi" id="dark_spots" style="top:430px;left:100px"><div class="inner_circle" id="dark_spots">DARK SPOTS</div></div></a> 
```

现在我已经设置了 JQuery，因此如果单击的 div 的背景颜色是某种颜色（单击时由 css 类设置），它会在数组 skinCare 中添加或删除一个值。但是，我对任何可行的选项完全开放，并且不需要按颜色进行操作。如果单击 div，我只想将一个值添加到 JQuery 数组中，然后如果再次单击它，则将其从数组中删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:19:00.933

`id`对多个 HTML 元素使用相同是不正确的。这很可能是您的问题的原因。

另外，~~请查看~~ *我感谢您查看*了@roXon 的评论。

# meteor - 允许更新特定的集合属性

> ID：15469216
> 
> 赞同：4
> 
> 时间：2013-03-18T03:14:19.763
> 
> 标签：meteor

我正在尝试将“评级”属性添加到集合中，并希望使任何用户（不仅仅是所有者）能够向集合中的评级集添加评级。我的问题是我设置了允许/拒绝规则，以便只有所有者才能对他们拥有的集合执行更新。有没有办法允许任何用户仅在更新特定属性（“评级”集）时才更新集合，如果他们试图更新任何其他属性，则拒绝他们更新访问。

我在服务器上的允许/拒绝规则如下...

```
Playlists.allow({
  insert: function(userId, doc) {
    return (userId && doc.owner === userId);
  },
  update: function (userId, docs, fields, modifier) {
    return _.all(docs, function(doc) {
      return doc.owner === userId;
    });
  },
  remove: function (userId, docs) {
    return _.all(docs, function(doc) {
      return doc.owner === userId;
    });
  }
});

Playlists.deny({
  update: function (userId, docs, fields, modifier) {
    return _.contains(fields, 'owner');
  },
  remove: function (userId, docs) {
    return _.any(docs, function (doc) {
      return doc.locked;
    });
  },
  fetch: ['locked']
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:00:09.997

在`Playlists.deny.update`中，您可以更改逻辑，使其首先检查是否有人试图修改评级属性（例如，使用`$addToSet`），`return false`如果是的话。所以你最终会得到这样的代码：

```
 Playlists.deny({
    update: function(userId, docs, fields, modifier) {
      if (fields.ratings && modifier["$addToSet"] && modifier["$addToSet"].ratings) {
        return false; // don't deny this
      }
      else {
        return _.contains(fields, 'owner');
      }
    }
  }); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-18T10:02:57.503

创建一个 Meteor.methods({updateRatePlaylist:myUpdateRatePlaylistFunction})

# ruby-on-rails - 检测模块 ruby 中的控制器类型

> ID：15469219
> 
> 赞同：0
> 
> 时间：2013-03-18T03:14:37.667
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我创建了一个模块，基本上我想做的是，

在这个模块中，有一个函数可以像 before_filter 一样工作。该函数将执行逻辑并确定它应该执行什么。例子

```
class JobsController < ApplicationController
  include Mymodule
  authorize_resources

  def create
  end

  def update
  end

end

module Mymodule
  def authorize_resources
     current_controller = params[:controller]
     if current_controller == 'jobs'
      //some logic
     end
  end
end 
```

所以我实际上是如何根据我的功能所在的位置（例如工作、用户等）自动检测控制器名称的。这类似于 CanCan，但我想自己制作。

此外，如果失败，我如何引发异常或重定向到路径，是否需要扩展一些 Rails 类？

```
def authorize_resources
  if current_controller.class == 'jobs'
    //logic
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:18:39.740

将您更改`if`为：

```
if(current_controller == JobsController) 
```

If`params[:controller]`是类本身，并且

```
if(current_controller.class == JobsController) 
```

如果变量是`JobsController`.

# c# - 与 RichTextBox 交互时出现 AccessViolationException

> ID：15469223
> 
> 赞同：1
> 
> 时间：2013-03-18T03:14:57.393
> 
> 标签：c#, winforms, .net-4.0, access-violation

我知道带有 LCG 的 .Net 2.0 存在一个错误，该错误会在使用`AccessViolationException`某些`IEnumerable<>`和类似的对象时生成；并且有一个修补程序。

我在 .Net 4.0 中有一个项目，使用在 Windows 7 x64 上运行的 WinForms。我有一个非常简单的表格 - 只有一个表格和一个`RichTextBox`停靠来占据整个客户端大小。

从后台线程中，我定期在表单上调用更新方法，该方法执行*类似于*以下操作：

```
public static void Log(string text)
{
  Invoke((MethodInvoker)(() => {
    lock(richTextBox) {
      richTextBox.Text += text;
    }   
  }));
} 
```

实际上，我在 try/catch 中确实有内部`invoke`和外部（是的，我知道这很可怕！）而且我正在做一些额外的事情，比如将插入符号放在末尾并滚动到它。我也在使用`StringBuilder`，但这完全不是重点：

很少但不可避免地，在调试时，我的 IDE 会检测到`AccessViolationException`代码中某个地方正在更新文本框。有时在更新文本的位，有时在进行选择的位，有时在滚动到插入符号的位。如果我按 F5 继续，我通常会在一段时间内看不到问题，并且应用程序会像以前一样继续。

这个文本框没有什么特别的事情发生。没有竞争条件（首先是因为我有一个锁），而且还因为我的代码中根本没有任何东西会尝试在其他东西尝试写入文本框的同时尝试写入文本框。

知道为什么会发生这种情况吗？对不起，我不知道我可以在这里放什么其他信息，因为我什至不确定为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:08:55.660

不确定您的其余代码在做什么，但我认为问题出在 lock(richTextBox) 上。如果 GUI 线程正在对 RichTextBox 执行某些操作，则锁定将不起作用，或者如果您正在其他线程中访问此 RichTextBox。

# c# - 数组初始值设定项只能用于变量或字段初始值设定项吗？

> ID：15469226
> 
> 赞同：3
> 
> 时间：2013-03-18T03:15:08.297
> 
> 标签：c#

我收到以下错误：

> 数组初始值设定项只能用于变量或字段初始值设定项。尝试改用新的表达式。

这是我的代码：

```
// Declare listbox information array
string [] tablet = new string[]{{"Microsoft Surface  Price: $1,162.99  Screen Size: 10.6 Inches  Storage Capacity: 128 GB"},

                                {"iPad 2 Price: $399.99, Screen Size: 9.7 Inches, Storage Capacity 16 GB"},
                                {"Samsung Galaxy Tab 2 Price: $329.99, Screen Size: 10.1 Inches, Storage Capacity 16 GB"},
                                {"NOOK HD Price: $199.99, Screen Size: 7 Inches, Storage Capacity 8 GB"},
                                {"IdeaTab Price: $149.99, Screen Size: 7 Inches, Storage Capacity: 8 GB"}};

//Array of product prices
int [] tabletPricesArray = new int[]{{"$1,162.99"},
                                       {"$399.99"},
                                       {"$329.99"},
                                       {"$199.99"},
                                       {"$149.99"}}; 
```

我不太确定出了什么问题。我对 C# 比较陌生。让我知道是否需要任何其他信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T03:20:57.927

几个问题：

**问题1：**

`int`在这里，您在提供字符串的同时创建一个类型数组。

```
 int [] tabletPricesArray = new int[]{"$1,162.99",
                                         "$399.99",
                                         "$329.99",
                                         "$199.99",
                                         "$149.99"}; 
```

**问题2：**

类型数组`int`不会保存浮点值，例如价格。而是使用`float`,`double`或`decimal`(for $)。

```
 decimal[] tabletPricesArray = new decimal[]{1162.99M,
                                                 399.99M,
                                                 329.99M,
                                                 199.99M,
                                                 149.99M}; 
```

如果您只想`tabletPricesArray`用于将项目显示为字符串（无计算），那么您也可以在此处使用字符串数组。

**问题3：**

您不需要`{ }`在每个数组元素中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T04:46:20.177

我希望以下是您所期望的。我为你修改了代码。

```
 // Declare listbox information array
       string[] tablet = new string[]{"Microsoft Surface  Price: $1,162.99  Screen Size: 10.6 Inches  Storage Capacity: 128 GB",
                                      "iPad 2 Price: $399.99, Screen Size: 9.7 Inches, Storage Capacity 16 GB",
                                      "Samsung Galaxy Tab 2 Price: $329.99, Screen Size: 10.1 Inches, Storage Capacity 16 GB",
                                      "NOOK HD Price: $199.99, Screen Size: 7 Inches, Storage Capacity 8 GB",
                                      "IdeaTab Price: $149.99, Screen Size: 7 Inches, Storage Capacity: 8 GB"};

       // Array of product prices
       string[] tabletPricesArray = new string[]{"$1,162.99",
                                                   "$399.99",
                                                   "$329.99",
                                                   "$199.99",
                                                   "$149.99"}; 
```

# android - Android httpclient 中的会话到 Google App Engine 中的 Webview

> ID：15469230
> 
> 赞同：2
> 
> 时间：2013-03-18T03:15:55.993
> 
> 标签：android, google-app-engine, session, cookies, webview

我按照[Nick](http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app)在从 Android 应用程序对 App Engine 进行身份验证的教程进行操作。

我已经有了令牌。如何使用此令牌在 android webview 中打开 appengine 站点？我的意思是我有 webapp，例如 example.appspot.com，我想在本地 android 部分进行身份验证后在 android webview 中打开它。

这是尼克教程的一部分：

```
private class GetCookieTask extends AsyncTask<String, Void, Boolean> {
    protected Boolean doInBackground(String... tokens) {
        try {
            // Don't follow redirects
            http_client.getParams().setBooleanParameter(ClientPNames.HANDLE_REDIRECTS, false);
            HttpGet http_get = new HttpGet("https://example.appspot.com/_ah/login?continue=http://localhost/&auth=" + tokens[0]);
            HttpResponse response;
            response = http_client.execute(http_get);
            if(response.getStatusLine().getStatusCode() != 302)
                // Response should be a redirect
                return false;

            for(Cookie cookie : http_client.getCookieStore().getCookies()) {
                if(cookie.getName().equals("ACSID"))
                    return true;
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            http_client.getParams().setBooleanParameter(ClientPNames.HANDLE_REDIRECTS, true);
        }
        return false;
    }

    protected void onPostExecute(Boolean result) {
        new AuthenticatedRequestTask().execute("http://example.appspot.com/home");
    }
} 
```

# c# - 将excel转换为xml

> ID：15469231
> 
> 赞同：1
> 
> 时间：2013-03-18T03:16:05.247
> 
> 标签：c#, javascript, jquery, .net

我有一个网站（将 excel 转换为 xml）。当我在我的机器上运行时，一切正常。但是当我通过 IIS 运行我的网站时。它有问题：对象引用未设置为对象的实例。

下面是我的代码：

```
string filename = Server.MapPath("~/Uploads/" + Request.QueryString["Name"]);
    string[] sheet = _ReadExcel.getSheetNames(filename);
for (int i = 0; i < sheet.Length; i++)
        {

        } 
```

异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

请向我建议一些解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:53:38.563

```
 // Connect to Excel files
 System.Data.OleDb.OleDbConnection MyConnection ;
 System.Data.DataSet ds ;
 System.Data.OleDb.OleDbDataAdapter MyCommand ;
 MyConnection = new System.Data.OleDb.OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0;Data Source='D:\\18.xls';Extended Properties=Excel 8.0;");
 MyCommand = new System.Data.OleDb.OleDbDataAdapter("select * from [Sheet1$]", MyConnection);
 MyCommand.TableMappings.Add("Table", "Product");
 ds = new System.Data.DataSet();
 MyCommand.Fill(ds);
 MyConnection.Close();
 // Write to xml
 ds.WriteXml("Product.xml"); 
```

参考[从 XML 生成 Excel 和从 Excel 生成 XML](http://www.codeproject.com/Tips/371595/Generate-Excel-from-XML-and-Generate-XML-from-Exce#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:59:51.937

您需要检查`filename`您的 excel 文件的路径是否正确。

如果该路径是正确的。您需要将 NETWORK SERVICE 帐户的权限授予您尝试读取或写入的文件夹。

不确定内部`_ReadExcel.getSheetNames`方法是什么，但它会将“null”值返回到您的“文件名”输入。您需要通过在 Visual Studio 中附加 IIS 进程来调试应用程序。然后你可以在 IIS 上运行时发现问题。

在 IIS 上调试的步骤：

*   调试->附加到进程...
*   从列表中选择 aspnet_wp.exe 进程。
*   如果您正在运行的 IIS > 版本 5，则该进程将是 w3wp.exe，并且每个应用程序池都会有一个（因此，如果您不知道要访问哪个应用程序池，则需要附加到所有应用程序池）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T03:17:35.813

在调用 sheet.length 之前，您需要将 sheet 设置为对象。

# delphi - 使用 WM_SETFOCUS 和 WM_KILLFOCUS

> ID：15469234
> 
> 赞同：3
> 
> 时间：2013-03-18T03:16:35.943
> 
> 标签：delphi, winapi

在 Delphi 中，我有两个编辑框和一个按钮。

默认选择 Edit1。我想使用消息来改变焦点。但是，如果我按照以下方式进行操作，那么两次编辑中的选择范围、插入符号在错误的框中等都会变得混乱。

我使用消息的原因是我可以控制外部应用程序中的焦点。这似乎可行，但很明显，Windows 内部状态有点混乱。我没有外部程序的来源。

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  PostMessage(edit1.handle,WM_KILLFOCUS,0,0);
  PostMessage(edit2.handle,WM_SETFOCUS,0,0);
end; 
```

……那能做到吗？我错过了一条消息吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T05:10:51.463

WM_SETFOCUS 和 WM_KILLFOCUS 都是 Windows 在接收和失去输入焦点时分别发送到窗口句柄的通知消息，您不应该自己发布这些消息。相反，只需调用`SetFocus(edit2.handle)`或`edit2.SetFocus()`设置焦点。

如果由于某种原因您无法从按钮单击处理程序同步执行此操作，您可以以自己的形式将自定义消息发布到本地消息处理程序，并从该消息处理程序进行 SetFocus 调用。

# php - 删除具有相同前缀的文件

> ID：15469236
> 
> 赞同：30
> 
> 时间：2013-03-18T03:16:46.777
> 
> 标签：php, file, unlink

```
$prefix = 'something_prefix';
unlink($prefix.'.*'); 
```

上面的代码不起作用，但我看到下面这样的一些代码工作得很好

```
unlink('*.jpg'); 
```

为什么？我想知道这会起作用吗？

```
unlink('*.*'); 
```

如何删除以相同字符串开头的文件？像这样

```
same123.jpg
sametoo.png
samexxx.gif 
```

它们都以字符串“same”开头，但以不同的扩展名结尾，如何做到这一点？

我已经有一种便宜的方法来做到这一点，但我想知道是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-18T03:18:12.563

试试这个代码：

```
$mask = 'your_prefix_*.*';
array_map('unlink', glob($mask)); 
```

ps`glob()`需要 PHP 4.3.0+

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-18T03:22:17.363

您可以为此使用[glob 。](http://www.php.net/manual/en/function.glob.php)像这样的东西（没有测试过）：

```
foreach (glob("something_prefix*.*") as $filename) {
    unlink($filename);
} 
```

# java - 用Java模拟医院（优先队列）

> ID：15469237
> 
> 赞同：3
> 
> 时间：2013-03-18T03:17:04.613
> 
> 标签：java, oop, queue, priority-queue

我目前在学校学习 ADT，为了完成一项任务，我必须在医院模拟急诊室。我目前的患者课程如下：

```
public class Patient implements Comparable<Patient>{

    private String name;
    private int condition;

    public Patient( String n, int c ){
        this.name = name;
        this.condition = condition;
    }

    public String toString(){
        return name;
    }

    public int boundary(int condition) {
        if (condition > 17){
            return 17;
        }
        else if (condition < 1) {
            return 1;
        }
        return condition;
    }

    public int compareTo( Patient other ) {
        if( this.condition < that.condition ) {
            return -1;
        }
        else if( this.condition > that.condition ) {
            return +1;
        }
        else {
            return this.name.compareTo(that.name);
        }    
    }
} 
```

我现在需要创建一个名为 ER() 的类...我必须实现的许多方法之一具有以下条件：

```
public void addPatient(String name, int severity, Date time)
// Purpose: adds a person to the waiting list in the emergency 
//          room.  
// Preconditions: name is not null
//                severity is an integer in the range [1,17]
//                time is the current time
// Postconditions: the person is added to the emergency room
//                 waiting list.  The "priority" in the list is 
//                 based on severity (1 being least important and
//                 17 being most important) first and for patients
//                 with equal severity, based on time (FIFO). 
```

我的问题是，我将在哪里创建每个患者（指定姓名和病情严重程度）并且有人可以帮助我（请解释因为我想学习，我不要求直接代码或答案）优先方面以及如何优先考虑患者到达时间的严重程度相同？

提前感谢大家的帮助或输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:44:08.927

从创建特定的控制器开始，例如`FrontDeskController`，在这个类中创建方法，例如`register`/ `checkIn`，`checkOut`。您将在此处插入/删除所有患者数据，并收集`Collection`您认为适合您的案例的所有数据。

要对队列进行优先排序，如果可以将要处理的队列分开，则`Collection`必须使用简单的排序算法进行排序，例如快速排序并将排序数据传递给另一个集合 eq `Queue`，`Stack`。我认为这种方法很适合`ER`上课。

# llvm - 获取代码的第一个和最后一个图像（地址）

> ID：15469244
> 
> 赞同：0
> 
> 时间：2013-03-18T03:17:39.137
> 
> 标签：llvm, memory-address

我正在尝试获取与源代码​​开头和结尾相关的地址。我尝试使用 LLVM、Clang 来做到这一点，但我做不到。有没有办法获取与源代码​​中每一行相关的内存地址？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:56:00.553

有几种可能性：

*   您可以为此使用调试信息。但是请注意，此信息对于优化的代码可能并不准确
*   或者，您可以使用特殊的链接器脚本，它将在代码部分的所有代码之前和之后插入两个符号。

# c++ - 我生成子集的方法有什么问题？

> ID：15469253
> 
> 赞同：0
> 
> 时间：2013-03-18T03:18:33.893
> 
> 标签：c++, algorithm, stack, subset

给定一个整数 n ≥ 0，计算并生成集合 {1,2,3,...,n} 的所有子集。

我使用堆栈来记录选择的元素。但是我怎样才能使用递归函数来获得这个呢？：

```
Enter an integer ≥ 0: 3 //After this part
{}
{1}
{2}
{1,2}
{3}
{1,3}
{2,3}
{1,2,3}
Number of subsets = 8 //Till before this part 
```

感谢您的时间。

***编辑***

```
int subset(int n){
 stack s(n);
 int n = subset(n,s);
 cout << "Number of subsets = " ;
 return n;
}

int subset(int n,stack& s){
 if(n>0)
 {
  s.push(n-1);
  int g = subset(n-1,s);
  s.pop();
  int u = subset(n-1,s);
  return g+u;
 }
} 
```

但仍然不完全在那里。关于什么是错的任何提示？

4 的输出将是：

```
{}
{1}
{2}
{1,2}
{3}
{1,2}
{2,3}
{1,2,3}
{4}
{1,2}
{2,3}
{1,2,3}
{3,4}
{1,2,3}
{2,3,4}
{1,2,3,4} 
```

# c# - 将项目插入数据库

> ID：15469255
> 
> 赞同：0
> 
> 时间：2013-03-18T03:18:45.927
> 
> 标签：c#, .net, winforms, combobox

我在插入语句时遇到问题..

```
cmd = new OleDbCommand("insert into FWINFOS (ID,Name,Gender,DateOfBirth,Race,WorkingPlace,PassportNO,DateOfExpire,Position,Photo) " +
                       "values('" + textBox5.Text + "','" + textBox1.Text + "','" + textBox2.Text + 
                       "','" + dateTimePicker1.Value + "','" + textBox3.Text + "','" + textBox4.Text + 
                       "','" + textBox6.Text + "','" + dateTimePicker2.Value + "',@Position,@Photo)", con);

conv_photo();
cmd.Parameters.AddWithValue("@Position", comboBox1.SelectedValue);
con.Open();
int n = cmd.ExecuteNonQuery();
//cmd.ExecuteNonQuery();
con.Close();
if (n > 0)
{
    MessageBox.Show("Inserted");
    loaddata();
    rno++;
}
else
    MessageBox.Show("No Insert"); 
```

> 错误：语法错误插入

谁能给我建议？拜托，对不起我的英语语法不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:25:04.350

好像您在查询中遗漏了一个参数，请尝试使用这个

```
cmd.CommandText = "insert into Table1 (id,Position) values (@id,@Position)";

cmd.parameters.addwithvalue("@id", textBox1.Text);
cmd.parameters.addwithvalue("@Position", combobox1.selectedvalue); 
```

**新更新** - 位置是 oleh db 保留字，尝试更改此查询，将封面放在位置，如下所示

```
cmd = new OleDbCommand("insert into FWINFOS (ID,Name,Gender,DateOfBirth,Race,WorkingPlace,PassportNO,DateOfExpire,[Position],Photo) " +
                   "values('" + textBox5.Text + "','" + textBox1.Text + "','" + textBox2.Text + 
                   "','" + dateTimePicker1.Value + "','" + textBox3.Text + "','" + textBox4.Text + 
                   "','" + textBox6.Text + "','" + dateTimePicker2.Value + "',@Position,@Photo)", con); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:03:54.733

您错过了在代码中添加 @Photo 参数。

这对于测试目的是可以的，但你不应该以这种方式插入数据库。这会将您的系统暴露给[SQL 注入](http://msdn.microsoft.com/en-us/library/ff648339.aspx)。您应该尽可能使用参数化查询。就像是

```
int result=0;
using (OleDbConnection myConnection = new OleDbConnection ("YourConnectionString"))
{
    cmd = new OleDbCommand("insert into FWINFOS (ID,Name,Gender,DateOfBirth,Race,WorkingPlace,PassportNO,DateOfExpire,Position,Photo) values (@ID, @Gender, @DateOfBirth, @Race, @WorkingPlace, @PassportNO, @DateOfExpire, @Position, @Photo)", con);

        conv_photo();
        cmd.Parameters.AddWithValue("@ID", textBox5.Text);
        // Specify all parameters like this
        try
        {   
          con.Open();
          result = Convert.ToInt32(cmd.ExecuteNonQuery()); 
        }

        catch( OledbException ex)
        {
             // Log error
        }
        finally
        {
           if (con!=null) con.Close();
            }
        }

if(result > 0)
     // Show success message 
```

> 另请注意，OleDb 参数是位置参数，这意味着您必须按照查询中的确切顺序指定它们。[OleDbParameter 类 (MSDN)](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:13:14.737

```
There is no value for parameter @Photo, and if your photo field is not nullable or empty
in database structure then how you can add null value in that.So make your data field 
nullable or pass value to parameter @Photo.I think it will solve your problem.

cmd = new OleDbCommand("insert into FWINFOS (ID,Name,Gender,DateOfBirth,Race,WorkingPlace,PassportNO,DateOfExpire,Position,Photo) " +
                       "values('" + textBox5.Text + "','" + textBox1.Text + "','" + textBox2.Text + 
                       "','" + dateTimePicker1.Value + "','" + textBox3.Text + "','" + textBox4.Text + 
                       "','" + textBox6.Text + "','" + dateTimePicker2.Value + "',@Position,@Photo)", con);

conv_photo();
cmd.Parameters.AddWithValue("@Position", comboBox1.SelectedValue);
cmd.Parameters.AddWithValue("@Photo", assignvalue);
con.Open();
int n = cmd.ExecuteNonQuery();
//cmd.ExecuteNonQuery();
con.Close();
if (n > 0)
{
    MessageBox.Show("Inserted");
    loaddata();
    rno++;
}
else
    MessageBox.Show("No Insert"); 
```

# html - 继承 CSS 宽度

> ID：15469261
> 
> 赞同：1
> 
> 时间：2013-03-18T03:19:10.367
> 
> 标签：html, css, inheritance

你好。我的问题是我想`.mylargeframe`在浏览器的整个宽度上进行拉伸。

CSS

```
.mylargeframe {
  background: linear-gradient(top, #fff, #f8f8f8);
  border: 1px solid #d0d2d5;
  border-bottom: 1px solid #bebfc2;
  border-radius: 4px;
  margin: 0 0 20px 0;
  padding: 20px;
  width: 80%;
  overflow: auto;
}

fieldset {
  background:#ebeced;
  border: none;
  border-top: 1px solid #d0d2d5;
  border-radius: 0 0 4px 4px;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.75);
  margin: 5px 0 -20px -20px;  padding: 18px 20px;
  width: auto;
}

fieldset input {
  margin: 0;
  width: auto;
} 
```

HTML

```
<html>
  <div class="mylargeframe">
   <fieldset>
     test
   </fieldset>
  </div>
</html> 
```

问题是它没有完全填满，但几乎就在那里。我正在使用 Firefox 和 Chrome

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T03:22:47.580

将`width: auto;`in`fieldset`替换为`100%`。

```
fieldset
{
    background:#ebeced;
    border: none;
    border-top: 1px solid #d0d2d5;
    border-radius: 0 0 4px 4px;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.75);
    margin: 5px 0 -20px -20px;  padding: 18px 20px;
    width: 100%;
} 
```

现在，`fieldset`将接管`width`其父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:24:13.667

这样，字段集将填充您的 div ;)

```
fieldset
{ 
    width:100%;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

您需要调整框大小，否则宽度将为 100% + 边距

# iphone - UIView Bounds 属性为空

> ID：15469264
> 
> 赞同：0
> 
> 时间：2013-03-18T03:19:43.507
> 
> 标签：iphone, ios, xcode, ipad, uiview

我不知道为什么，但我的视图的边界是 0。我创建了一个 IBOutlet 并且当我访问边界时： self.openGLView.bounds 高度和宽度为 0，即使在 Interface Builder 中大小不是 0（我的意思是，视图似乎大于 0）。为什么会这样？

# ios - 用于压缩的 iOS Phonegap 插件

> ID：15469265
> 
> 赞同：0
> 
> 时间：2013-03-18T03:20:21.597
> 
> 标签：ios, cordova, plugins, zip, archive

我有一个*iOS Phonegap 项目*。其中我有一些大文件。我想将这些文件压缩到**www**文件夹中，并希望在用户单击应用程序中的按钮时将其解压缩。

这有助于应用程序在用户第一次下载时非常简洁！

我真的很想对此用法有一些建议或一些插件指导。如果你能具体给出一个方向，那真的很有帮助！我尝试使用 ZipUtil 插件，Phonegap 插件中的 ExtractPlugin，但徒劳无功！我知道应该有一个示例代码可以正确指导我们并从中学习！有人请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:24:58.890

如果我没记错的话，你需要这个解压缩和压缩

[提取压缩文件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ExtractZipFile)

# cassandra - 是否有类似于 QTADO 或 navicat 的 Cassandra（或其他 noSQL DB）查询工具？

> ID：15469273
> 
> 赞同：2
> 
> 时间：2013-03-18T03:22:01.390
> 
> 标签：cassandra

SQL 数据库的查询工具有很多，例如 QTADO、navicat 等。Cassandra 和其他 noSQL 数据库有没有类似的工具？我主要需要它来测试 Cassandra 应用程序的开发过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:11:52.600

Playorm 支持 Cassandra 的 S-SQL，您可以使用它的命令行工具来执行 SQL 语句。有关更多详细信息，请访问[http://buffalosw.com/wiki/Command-Line-Tool/](http://buffalosw.com/wiki/Command-Line-Tool/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T19:15:41.420

Aqua Data Studio 有一个原生界面，不确定它支持多少功能，链接如下。我对 ADS 没有任何股份或兴趣，我也只是在寻找一些工具。

[http://www.aquafold.com/dbspecific/apache_cassandra_client.html](http://www.aquafold.com/dbspecific/apache_cassandra_client.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-04T07:08:32.590

Aqua Data Studio 非常适合 Cassandra、MongoDb 和许多其他 NoSQL 和 SQL DB。不幸的是，对于普通的乔来说，它的价格昂贵（499），而且他们没有社区许可证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T20:07:24.917

Datastax OpsCenter 可能是最接近这些工具的工具，但如果您只是想要在开发过程中进行测试，您可能会发现 cqlsh 可以很好地满足您的需求。它与 Cassandra 捆绑在一起。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T07:29:14.813

不幸的是，没有，我认为 cassandra 没有这样的工具。虽然可以使用查看器工具，但 Datastax Opscenter 说，这是由 cassandra 背后的公司开发的工具。也可以使用 TOAD for NOSQL。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-28T19:10:03.610

我最终使用了 Cassandra 的 OLEDB 提供程序和 QTADO 工具（使用 CQL3 命令）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-26T09:04:31.693

RazorSQL 支持 Cassandra。

[http://www.razorsql.com/articles/razorsql_apache_cassandra.html](http://www.razorsql.com/articles/razorsql_apache_cassandra.html)

它是商业的，但有 30 天的试用期。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-02T08:00:48.630

我使用 Visual Studio Code 和[https://marketplace.visualstudio.com/items?itemName=mtxr.sqltools](https://marketplace.visualstudio.com/items?itemName=mtxr.sqltools)扩展。它支持各种 db-s，包括 cassandra。

# php - PHP DomDocument 编辑所有链接

> ID：15469274
> 
> 赞同：7
> 
> 时间：2013-03-18T03:22:14.090
> 
> 标签：php, domdocument

我正在使用以下代码从另一个页面获取 html 并将其放入我的 php 页面中：

```
$doc = new DomDocument;

// We need to validate our document before refering to the id
$doc->validateOnParse = true;
$doc->loadHtml(file_get_contents('{URL IS HERE}'));
$content = $doc->getElementById('form2');

echo $doc->SaveHTML($content); 
```

我想更改所有实例，`<a href="/somepath/file.htm">`以便可以在其前面添加实际域。我怎样才能做到这一点？

因此，它需要将它们改为： `<a href="http://mydomain.com/somepath/file.htm">`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T03:32:36.260

尝试类似：

```
$xml = new DOMDocument(); 
$xml->loadHTMLFile($url); 
foreach($xml->getElementsByTagName('a') as $link) { 
   $oldLink = $link->getAttribute("href");
   $link->setAttribute('href', "http://mydomain.com/" . $oldLink);
}
echo $xml->saveHtml(); 
```

# java - 设置者没有做他们应该在 java 中做的事情

> ID：15469278
> 
> 赞同：-2
> 
> 时间：2013-03-18T03:22:25.147
> 
> 标签：java, setter

我有一个只有 99 个频道和 20 个作为最高音量的电视课程，但是当我将音量和频道设置器添加到音量而不是添加 1 到 10（这是我的默认音量）时，我的音量和频道设置器也无法正常工作，它只添加一个到给定的音量数字我的电视课

```
public class TV
{
    private String flag;
    private int ch;
    private int vol = 10;

    public TV(String onOffSwitch, int channel, int volume)
    {
        flag = onOffSwitch;
        ch = channel;
        vol = volume;
    }

    public void setFlag(String onOffSwitch)
    {
        onOffSwitch = "Off";
    }// End of setFlag

    public String getFlag()
    {
        return flag;
    }// End of getFlag

    public void setCh (int newChannel)
    {
        if (newChannel >= 99)
        {
            ch = 99;
        }else
        {
            ch = newChannel;
        }

        if(newChannel < 0)
        {
            ch = 0;
        }
    }//end of setCh

    public int getCh ()
    {
        return ch;
    }// End of getCh

    public void setVol(int newVolume)
    {
        if(newVolume >= 20)
        {
            vol = 20;
        }

        if(newVolume < 0)
        {
            vol=0;
        }
    }// End of SetVolume

    public void incrementVolume()
    {
        vol++;
    }

    public int getVol()
    {
        return vol;
    }// ENd of getVolume

    public String toString()
    {
        return String.format("%s :%s\n%s:%d\n%s :%d","TV is switched", flag,"TV channel",ch,"TV volume",vol);
    }

}// End of TV class 
```

我的试驾课

```
import java.util.Scanner;

public class TvTest
{
    public static void main (String[] args)
    {
        String tvStatus;
        int chan;
        int volu;

        Scanner input = new Scanner(System.in);
        TV tv2 = new TV("off",105,10);

        System.out.print(tv2);
        System.out.println();

        System.out.print("Turn TV On or Off ?");
        tvStatus = input.nextLine();

        System.out.print("Channel : ");
        chan = input.nextInt();

        System.out.print("Volume : ");
        volu = input.nextInt();

        TV tv1 = new TV(tvStatus,chan,volu);
        tv1.incrementVolume();

        System.out.println(tv1);
    }
} 
```

和测试输出

```
TV is switched :off
TV channel:105
TV volume :10
Turn TV On or Off ?on
Channel : 105
Volume : 1
TV is switched :on
TV channel:105
TV volume :2 
```

为什么我的二传手不工作？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:29:35.223

您的构造函数应该使用您的设置器：

```
public TV(String onOffSwitch, int channel, int volume)
{
    this.setFlag(onOffSwitch);
    this.setCh(channel);
    this.setVol(volume);
} 
```

setFlag 应该设置`flag`为传入的值。

```
public void setFlag(String onOffSwitch)
{
    this.flag = onOffSwitch;
}// End of setFlag 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:24:13.717

```
public void setFlag(String onOffSwitch)
{
    onOffSwitch = "Off";
}// End of setFlag 
```

`onOffSwitch`变量不是字段。那是参数列表中的名称，应该是`flag`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T03:36:51.867

```
 public void setVol(int newVolume)
    {
        if(newVolume >= 20)
        {
            vol = 20;
        }

        if(newVolume < 0)
        {
            vol=0;
        }
    }// End of SetVolume 
```

除非新值超出范围，否则该 setter 不会执行任何操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T03:30:14.290

问题不在于您的 setter/getter（尽管它们读起来有点奇怪），问题是您在构造函数中忽略了它们...

```
public TV(String onOffSwitch, int channel, int volume)
{
    flag = onOffSwitch;
    ch = channel;
    vol = volume;
} 
```

尝试使用类似的东西

```
public TV(String onOffSwitch, int channel, int volume)
{
    setFlag(flag);
    setCh(channel);
    setVol(volume);
} 
```

反而...

该变量`onOffSwitch`也未定义，因此您的示例将无法编译；）。它应该读到类似...

```
public void setFlag(String onOffSwitch)
{
    flag = onOffSwitch;
}// End of setFlag 
```

请注意，我可能会使用`boolean`值、拥有`turnOn`和`turnOff`方法，但这只是我......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T05:32:36.010

我一整天都在喝酒，所以请记住这一点，但我猜你也是，因为你无法完成这项基本任务。**：** p

首先，永远，永远，我的意思是永远使用字符串来表示两个状态值。布尔值很好，所以使用它们。

```
class Televsion {
    power = false; # off
    power = true;  # on
} 
```

其次，你的变量名很烂。并不是说，它们之间存在相当多的匹配错误，这不必要地使程序复杂化。也不要使用缩写或简写变量名。如果这可能是 20 年或 10 年前，我可以理解，但现代编辑器往往具有自动完成功能，可以帮助一两次击键填写代码。

您似乎还没有了解关键字“this”。当您在类中使用“this”时，它会特异性地从类中调用特定的变量或方法。主要的收获是它可以让你避免任何来自参数和局部变量的名称冲突。

```
class Televsion {
    private boolean power;
    private int channel;
    private int volume;

    public Televsion(  boolean power, int channel, int volume ) {
        this.power = power;
        this.channel= channel;
        this.volume = volume;
    }
} 
```

这样对读者来说更理智一点;P

在 main 方法中测试代码适用于新手和失败者。JUnit 现在几乎已经内置在 Java 中了，为什么不使用它，或者你可以使用 TestNG ^.^

构建测试套件可以更轻松地设计和返工代码。

您可能还想看看 Hamcrest。

```
public TelevsionTest {
    private Televsion televsion;

    @Before
    public void boilerplateSetUpCode() {
        // The before annonation has it's roots in apsectJ, I beleve.
        // In this context it makes this method run before every test.

        televsion = new Televsion();
    }

    @Test
    public void testSwitchOn() {
        televsion.switchOn();
        assertTrue( televsion.getPowerState() == true ); 
        # JUnits assertions are weak, that's why I like hamcrest.
    }
} 
```

尝试编写可重用性和可维护性的代码。从长远来看，这可以让生活更轻松，但在短期内却是一个挑战。如果你得到有线电视或卫星电视，这会影响频道号码吗？

这是关于我如何重新解决问题的五分钟技巧。

公共类 Televsion { 私有 Logger4j 记录器；

```
private ChannelSource channelSource; // Naming is a little weak
private int volume;
private boolean power;

public Tv() {
    channelSource= channelSource.LOCAL;
    volume = 0;
    power = false;
}

public turnOn(){ power = true; }
public void turnOff() { power = false; }
public void muteVolume() { volume = 0; }
public void setVolume( volume ) {
    if ( volume > -1 && volume < 100 ) {
        this.volume = volume;
    } else {
        logger.dubug( String.format("Arg: %d", volume) );
        // This is anti-pattern of how not to word a debugging statement.
        // Plus, I'm lazy...
    }
}
public void changeChannelSource( ChannelSource channelSource ) {
    this.channelSource = channelSource;
}
public void changeChannelNumber( int channelNumber ) {
    channelSource.changeChannelNumber( channelNumber );
}

// I like singletons 
public enum ChannelSource {
    LOCAL(0), ALT(0), CABLE(0);

    private int channelNumber;

    private ChannelSource( int channelNumber ) {
        this.channelNumber = channelNumber ;
    }        

    public int getChannelNumber() { return channelNumber; }
    public void setChannelNumber( channelNumber ) {
        // Lazy hack
        if ( this.getName() == "LOCAL" ) {
            if ( channelNumber > -1 && channelNumber < 100 ) {
                this.channelNumber = channelNumber;
            } else {
                logger.debug( 
                    String.format("Unable to change %s, channel to %d", this.getName(), channelNumber) 
                );
            }
        }
    }
} 
```

}

希望，如果您开始提高您的编码标准并开始学习良好的编程技术，那么您可能会喜欢足够的编码来创建一个实际的 Stack Exchange 帐户:)

这是一个简单的列表，你应该学习让你的 Java 老师开心的事情。

```
- Unit Testing
   + Might as well let a computer grade the code then a human, free A's

- Data Structures
   + Just using collections good enough.  
   + Side rant, If use this style of matrices, Object[][] I will haunt you down.
      - It's inefficient, plus hard for people maintaining this shitty code
      - Jagged arrays can work just as well List< List<Object> > or you can even just use a single array, [] and sprinkle in some magic.

- Annotations
   + Helps takes the Java out of Java

- Read Effective Java
   + It's not a difficult book, will make life easier.

- Know a little about concurrency
   + If you use the synchronized keyword, then you know something is wrong.
   + Take a look into concurrent utils API
   + Read Java Concurrency in Practice

- Spring
   + If you want to get paid for knowing Java 
```

我确信还有很多其他的东西我会遗漏，但这对于任何开始学习 Java 的人来说已经足够了。

# php - Virtuemart 1.1 产品详情页面

> ID：15469282
> 
> 赞同：0
> 
> 时间：2013-03-18T03:23:07.863
> 
> 标签：php, joomla, virtuemart

我需要更改产品详细信息页面（从购物车中的产品标题超链接链接到的页面）。麻烦的是，我只是找不到正确的文件。Virtuemart 1.1 中的产品详细信息页面在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:14:51.147

万一其他人遇到这个问题，原来是管理员/组件/com_virtuemart/html/basket.php 生成了链接。

# c# - 如何在 C# 中为画布上的线条制作动画？

> ID：15469283
> 
> 赞同：6
> 
> 时间：2013-03-18T03:23:10.017
> 
> 标签：c#, wpf, animation, canvas

你如何在屏幕上画一条线？

我正在尝试为 C#/WPF 项目中画布上的线条制作动画。

我想使用 C# 代码而不是 XAML。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T03:52:13.650

我有一个正在运行的示例，它使用 MVVM 模式并在 a`ListBox`中创建具有 a`Canvas`作为其`ItemsPanel`.

我实际上是为[这个问题](https://stackoverflow.com/questions/15278625/rendering-lines-as-selectable-controls-with-properties)做的，但是 OP 有点消失了，从来没有联系过我。

这是它在我的电脑中的样子：

![在此处输入图像描述](../Images/4c909ac108cbe5899797a0157a04ce53.png)

它的主要部分是这样的：

```
<ListBox ItemsSource="{Binding}" x:Name="lst" Height="500" Width="500">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas IsItemsHost="True"/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="FocusVisualStyle">
                <Setter.Value>
                    <Style TargetType="Control">
                        <Setter Property="Opacity" Value="0"/>
                    </Style>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Line X1="{Binding X1}" Y1="{Binding Y1}"
                              X2="{Binding X2}" Y2="{Binding Y2}" 
                              StrokeThickness="{Binding Thickness}"
                              Opacity="{Binding Opacity}"
                              x:Name="Line">
                            <Line.Stroke>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="{Binding Color1}" Offset="0"/>
                                    <GradientStop Color="{Binding Color2}" Offset="1"/>
                                </LinearGradientBrush>
                            </Line.Stroke>
                        </Line>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="true">
                                <Setter Property="Effect" TargetName="Line">
                                    <Setter.Value>
                                        <DropShadowEffect Color="CornflowerBlue" ShadowDepth="3" BlurRadius="10"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

视图模型：

```
public class LineViewModel : INotifyPropertyChanged
{
    #region Timer-based Animation

    private System.Threading.Timer Timer;
    private static Random Rnd = new Random();

    private bool _animate;
    public bool Animate
    {
        get { return _animate; }
        set
        {
            _animate = value;
            NotifyPropertyChanged("Animate");
            if (value)
                StartTimer();
            else
                StopTimer();
        }
    }

    private int _animationSpeed = 1;
    public int AnimationSpeed
    {
        get { return _animationSpeed; }
        set
        {
            _animationSpeed = value;
            NotifyPropertyChanged("AnimationSpeed");
            if (Timer != null)
                Timer.Change(0, 100/value);
        }
    }

    private static readonly List<int> _animationSpeeds = new List<int>{1,2,3,4,5};
    public List<int> AnimationSpeeds
    {
        get { return _animationSpeeds; }
    }

    public void StartTimer()
    {
        StopTimer();
        Timer = new Timer(x => Timer_Tick(), null, 0, 100/AnimationSpeed);
    }

    public void StopTimer()
    {
        if (Timer != null)
        {
            Timer.Dispose();
            Timer = null;
        }
    }

    private void Timer_Tick()
    {
        X1 = X1 + Rnd.Next(-2, 3);
        Y1 = Y1 + Rnd.Next(-2, 3);
        X2 = X2 + Rnd.Next(-2, 3);
        Y2 = Y2 + Rnd.Next(-2, 3);
    }

    #endregion

    #region Coordinates

    private double _x1;
    public double X1
    {
        get { return _x1; }
        set
        {
            _x1 = value;
            NotifyPropertyChanged("X1");
        }
    }

    private double _y1;
    public double Y1
    {
        get { return _y1; }
        set
        {
            _y1 = value;
            NotifyPropertyChanged("Y1");
        }
    }

    private double _x2;
    public double X2
    {
        get { return _x2; }
        set
        {
            _x2 = value;
            NotifyPropertyChanged("X2");
        }
    }

    private double _y2;
    public double Y2
    {
        get { return _y2; }
        set
        {
            _y2 = value;
            NotifyPropertyChanged("Y2");
        }
    }

    #endregion

    #region Other Properties

    private string _name;
    public string Name
    {
        get { return _name; }
        set
        {
            _name = value;
            NotifyPropertyChanged("Name");
        }
    }

    private double _thickness;
    public double Thickness
    {
        get { return _thickness; }
        set
        {
            _thickness = value;
            NotifyPropertyChanged("Thickness");
        }
    }

    public Color Color1 { get; set; }
    public Color Color2 { get; set; }

    private double _opacity = 1;
    public double Opacity
    {
        get { return _opacity; }
        set
        {
            _opacity = value;
            NotifyPropertyChanged("Opacity");
        }
    }

    #endregion

    #region INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string propertyName)
    {
        Application.Current.Dispatcher.BeginInvoke((Action)(() =>
            {
                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }));
    }

    #endregion
} 
```

**编辑：**源代码现在在[GitHub 上](https://github.com/High-Core/WPFSamples/tree/master/LineEditor)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T03:56:40.247

您将需要使用 a并为和属性`Storyboard`设置动画。看看这是否适合你。`Line.X2``Line.Y2`

**主窗口.xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Canvas Name="myCanvas">
        <Button Canvas.Left="248" Canvas.Top="222" Content="Button" Height="23" Name="button1" Width="75" Click="button1_Click" />
    </Canvas>
</Window> 
```

**按钮点击事件**

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    Line line = new Line();
    myCanvas.Children.Add(line);
    line.Stroke = Brushes.Red;
    line.StrokeThickness = 2;
    line.X1 = 0;
    line.Y1 = 0;

    Storyboard sb = new Storyboard();
    DoubleAnimation da = new DoubleAnimation(line.Y2 , 100, new Duration(new TimeSpan(0, 0, 1)));
    DoubleAnimation da1 = new DoubleAnimation(line.X2, 100, new Duration(new TimeSpan(0, 0, 1)));
    Storyboard.SetTargetProperty(da, new PropertyPath("(Line.Y2)"));
    Storyboard.SetTargetProperty(da1, new PropertyPath("(Line.X2)"));
    sb.Children.Add(da);
    sb.Children.Add(da1);

    line.BeginStoryboard(sb);
} 
```

# java - JPA、自定义查询和日期

> ID：15469284
> 
> 赞同：3
> 
> 时间：2013-03-18T03:23:14.697
> 
> 标签：java, datetime, jpa

我面临一个奇怪的问题。我已经在堆栈溢出中进行了搜索，对于 JPA 和自定义查询，我应该指定参数。所以我有一个查询字符串，因为我有超过 14 个字段，但我遇到了日期问题。我总是收到 IllegalStateException

```
INFO: query STRING = SELECT t FROM Tickets t  WHERE t.startdate > :startDate AND t.enddate < :endDate ORDER BY t.status DESC
WARNING: #{ticketController.search}: java.lang.IllegalStateException: Query argument startDate not found in the list of parameters provided during query execution. 
```

至于我的查询：

```
Query q = em.createQuery(query).setParameter("startDate", startDate, TemporalType.TIMESTAMP).setParameter("endDate", endDate, TemporalType.DATE); 
```

虽然我得到该参数未找到，但我在 setParameter 中有它，并且还在查询中设置了它，如 INFO 行中所示。

有任何想法吗？

提前致谢

编辑：

```
INFO: query STRING = SELECT t FROM Tickets t  WHERE t.startdate > ?1 AND t.enddate < ?2 ORDER BY t.status DESC
WARNING: #{ticketController.search}: java.lang.IllegalStateException: Query argument 1 not found in the list of parameters provided during query execution.

q = em.createQuery(query).setParameter(1, startDate, TemporalType.TIMESTAMP).setParameter(2, endDate, TemporalType.TIMESTAMP); 
```

另外，按照建议，我检查了我使用的日期是 java.util.Date。在实体类中我有时间戳。但我仍然不能让这个工作，也不确定我在哪里失败。

只是为了确保所有的事情都是他们应该做的，我强制查询是字符串，我得到了正确的异常：

```
INFO: query STRING = SELECT t FROM Tickets t  WHERE t.startdate > :startDate AND t.enddate < :endDate ORDER BY t.status DESC
WARNING: #{ticketController.search}: java.lang.IllegalArgumentException: You have attempted to set a value of type class java.lang.String for parameter startDate with expected type of class java.util.Date 
```

但是话又说回来，我更改为日期但它失败了：S 我已经检查了这个 IllegalStateException 的原因：

从调试和[javadoc](http://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#getResultList%28%29)我得到以下信息： getResultList

**IllegalStateException - 如果调用 Java Persistence 查询语言 UPDATE 或 DELETE 语句。**

我不做更新也不删除：/

编辑2：添加实体相关部分：

```
@Basic(optional = false)
@NotNull
@Column(name = "startdate")
@Temporal(TemporalType.TIMESTAMP)
private Date startdate;
@Column(name = "enddate")
@Temporal(TemporalType.TIMESTAMP)
private Date enddate; 
```

对于数据库创建脚本，列的创建方式如下：

```
 startdate timestamp with time zone NOT NULL,
  endate timestamp with time zone, 
```

如果我执行普通 SQL 查询，例如：“select * from tbl_tickets where startdate > '2012-02-01 00:00:00' and enddate < '2013-03-18 23:59:50'”

我得到了想要的结果。我想我可以使用本机查询，但这会解决问题而不是解决这个问题，对吧？

**编辑 3：**虽然我已经正确设置了所有内容，但 bean 的 init 再次调用了没有 args 的查询（对不起，谢谢大家的帮助。它帮助我检查出了什么问题）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T04:06:07.097

两者的 javadoc

```
setParameter(String name, java.util.Date value, TemporalType temporalType)`
setParameter(String name, java.util.Calendar value, TemporalType temporalType)` 
```

状态：

> 抛出：`IllegalArgumentException`- 如果参数名称与查询的参数不对应，或者 value 参数的类型不正确

由于您没有提供完整的代码，请验证：

*   Java 值`startDate`的类型为`java.util.Date`or `java.util.Calendar`。

*   SQL 列`startDate`具有有效的 SQL 日期类型`TIMESTAMP`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:33:55.473

我认为**:**（冒号）和 startDate 之间应该有一个空格。可能是考虑将**:startDate**作为一个单词。试试这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T03:37:15.320

尝试

```
String query = "SELECT t FROM Tickets t  WHERE t.startdate > ?1 AND t.enddate < ?2 ORDER BY t.status DESC"; 
```

`Query q = em.createQuery(query).setParameter(1, startDate, TemporalType.TIMESTAMP).setParameter(2, endDate, TemporalType.DATE);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T03:36:16.227

```
Query q = em.createQuery(query).setParameter("startDate", startDate, TemporalType.TIMESTAMP).setParameter("endDate", endDate, TemporalType.DATE); 
```

如果您仔细查看[`setParameter`](http://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#setParameter%28int,%20java.util.Date,%20javax.persistence.TemporalType%29)您正在使用的 ，它会说这`setParameter`需要 a `Positional Parameter`，而查看您的查询，您似乎已经使用过`Named Parameter`.

因此，`IllegalStateException`. 将您的查询更改为提供`Positional Parameters`，或`setParameter`提供`Named Parameters`作为输入。

这就是您`Positional Parameter`在查询中提供的方式。

```
String query = "SELECT t FROM Tickets t  WHERE t.startdate > ?1 AND t.enddate < ?2 ORDER BY t.status DESC";
....
Query q = em.createQuery(query).setParameter(1, startDate, TemporalType.TIMESTAMP).setParameter(2, endDate, TemporalType.DATE); 
```

# android - 应用关闭时自动关闭蓝牙

> ID：15469285
> 
> 赞同：-1
> 
> 时间：2013-03-18T03:23:35.537
> 
> 标签：android

我想在应用程序关闭时编写一个函数，蓝牙可以自动关闭。有没有什么程序代码可以使用？我应该将代码放在我的程序中的哪个位置？在创建？在开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:46:53.037

如果您准备好关闭蓝牙的代码。将该代码放入您的 onPause() 方法中。每当您的活动关闭时，它也会停止蓝牙适配器。

```
 public void onPause()
    {
       super.onPause();
       finish(); //this will close your app :)
       //Your code to turn of bluetooth
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:44:52.913

我认为您还需要考虑使用这些应用程序的人是否会使用它的静音模式。或者我们只是说我们将在我们关闭设备/应用程序之前分配一个时间:) 这只是一个简单的建议，然后我们再继续那个:)

# python - 将行号与表中的字符串匹配。

> ID：15469290
> 
> 赞同：0
> 
> 时间：2013-03-18T03:24:17.600
> 
> 标签：python

我有一个文件，其中包含描述特定参数的列列表：

大小 大小 光度

我只需要这个文件中的特定数据（特别是行和列）。到目前为止，我在 python 中有一个代码，我在其中附加了必要的行号。我只需要知道如何匹配它以在文本文件中获取正确的字符串以及列（幅度）和（亮度）中的变量。关于如何解决这个问题的任何建议？

这是我的代码示例（#comments 描述了我做了什么以及我想做什么）：

```
temp_ListMatch = (point[5]).strip() 
if temp_ListMatch:
    ListMatchaddress = (point[5]).strip()
    ListMatchaddress = re.sub(r'\s', '_', ListMatchaddress) 
    ListMatch_dirname = '/projects/XRB_Web/apmanuel/499/Lists/' + ListMatchaddress
    #print ListMatch_dirname+"\n" 

    try:
        file5 = open(ListMatch_dirname, 'r')
    except IOError:
        print 'Cannot open: '+ListMatch_dirname

    Optparline = []
    for line in file5:
        point5 = line.split()
        j = int(point5[1])
        Optparline.append(j)
        #Basically file5 contains the line numbers I need, 
        #and I have appended these numbers to the variable j. 
        temp_others = (point[4]).strip()
        if temp_others: 
            othersaddress = (point[4]).strip()
            othersaddress =re.sub(r'\s', '_', othersaddress) 
            othersbase_dirname = '/projects/XRB_Web/apmanuel/499/Lists/' + othersaddress
            try:
                file6 = open(othersbase_dirname, 'r')
            except IOError:
                print 'Cannot open: '+othersbase_dirname

            gmag = []
            z = []
            rh = []
            gz = []

            for line in file6:
                point6 = line.split()
                f = float(point6[2])
                g = float(point6[4])
                h = float(point6[6])
                i = float(point6[9])
         # So now I have opened file 6 where this list of data is, and have
        # identified the columns of elements that I need. 
        # I only need the particular rows (provided by line number) 
        # with these elements chosen. That is where I'm stuck! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:40:32.363

将整个数据文件加载到 pandas DataFrame 中（假设数据文件有一个标题，我们可以从中获取列名）

```
import pandas as pd
df = pd.read_csv('/path/to/file') 
```

将行号文件加载到熊猫系列中（假设每行一个）：

```
#  squeeze = True makes the function return a series
row_numbers = pd.read_csv('/path/to/rows_file', squeeze = True) 
```

仅返回行号文件中的那些行，以及列的大小和亮度（假设第一行编号为 0）：

```
relevant_rows = df.ix[row_numbers][['magnitude', 'luminosity'] 
```

# google-maps - 使用 kml 文件和谷歌地图缓存过期

> ID：15469292
> 
> 赞同：4
> 
> 时间：2013-03-18T03:24:37.740
> 
> 标签：google-maps, kml

我有一些动态生成的 KML 文件，我想在 Google 地图上显示这些文件。这很容易，我以前做过几次，没问题。

我想要的是 KML 文件仅由 Google 缓存以获取请求。也就是说，如果有人访问嵌入了 Google 地图的页面，该页面已加载并显示了我的 KML，我希望该 KML 文件用于该页面加载。但是，如果用户要刷新页面（具有相同的 Google 地图 URL），我希望重新获取 KML 文件。

简单的“仅添加时间戳参数”不起作用，因为我不会控制页面上传递给 Google 地图的 url（只是大部分 url）。

查看`<Link>`and`<networkLink>`标签，它们似乎可以让您控制外部资源的过期、缓存、刷新等。阅读文档，*似乎*使用`<refreshMode>onChange<refreshMode>`两层方法可以得到我想要的。

对此进行测试后，Google 实际上并没有刷新链接的 KML 文件的内容，即使在 10-20 分钟和多个地图重新加载后（当我向地图搜索框提供相同的 url 时）。

这些是我正在使用的 KML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
  <NetworkLink>
    <Link>
      <href>URL</href>
      <refreshMode>onChange</refreshMode>
    </Link>
  </NetworkLink>
</Document>
</kml> 
```

...

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
    <Placemark>
        <name>NAME</name>
        <visibility>1</visibility>
        <Style>
            STYLE
        </Style>
        GEOMETRY
    </Placemark>
</Document>
</kml> 
```

... 用正确的内容替换 URL、NAME、STYLE 和 GEOMETRY。有谁知道我可能做错了什么？或者如果我想要的是可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:10:06.230

对于过期，Google 遵循标头中的过期时间，但强制至少 5 分钟过期，以防止第 3 方服务器受到有效的拒绝服务攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:47:55.583

这是我所知道的：

*   `onChange`将完全缓存响应，除非您通过 启用 KML 加载的视口直通，`<viewFormat>`几个小时后我没有看到任何刷新。
*   `onExpire`在链接的 KML 文件上使用`'max-age'`标头在 Google 地图中不起作用（根据文档），尽管我看到了 [1] 中描述的行为，这可能与默认的内部 Google 地图过期时间有关。
*   `onExpire`使用`<NetworkLinkControl>`和`<expires>`排序的作品，因为数据似乎在提供的过期时间之后过期，尽管行为看起来更接近 [1]
*   `onInterval`将刷新数据，假设您的数据`<viewRefreshTime>`足够大，并且会按照自己的时间表进行（时间一点也不可靠），但地图视图开始完全缩小（似乎没有办法修复这个）。

[1] 如果您指定`'max-age'`X 秒并保持页面打开，则当页面具有焦点时，KML 将永远不会刷新。如果您将焦点移到不同的网页或应用程序，然后等到页面应该刷新后的一段时间（有时等待 2 分钟就足够了，有时则不是），然后您回到页面，它可能会弥补如果您不返回内容，则快速连续 30 个请求尝试刷新数据，或者如果您确实返回内容，则只尝试一次。

长话短说：在 Google 地图中对 KML 文件的缓存控制`onExpire`完全`onInterval`不可靠。在您的数据加载后的某个时间点，它会被刷新，因为 Google 的缓存已经删除了它。但是那个缓存什么时候过期呢？一些随机时间，至少 5 分钟。

# mysql - 如何使用 Pentaho Kettle 正确连接到 Google Cloud SQL

> ID：15469293
> 
> 赞同：0
> 
> 时间：2013-03-18T03:24:38.423
> 
> 标签：mysql, cloud, database-connection, kettle

再会，

我刚刚开始使用 Pentaho 的 Kettle 来尝试连接到 Google Cloud SQL 实例。我注意到在建立连接后，Spoon 上的测试说它正在工作，但是，尽管连接“连接”，但它无法提取有关内部表或模式的元数据。

是的，我确实事先启用了 google sql 工具，据文档所述，该工具允许 3rd 方程序访问 Google App 云。但是，正如我所说，尽管能够“连接”，但它似乎找不到任何表。

有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:34:29.360

我在工作人员的帮助下发现了问题。他在这里发布了我们的发现。:) 我希望它有所帮助。它实际上涉及将 JAR 添加到您的勺子中

[http://lorenzo-dee.blogspot.com/2013/04/kettle-pentaho-data-integration.html](http://lorenzo-dee.blogspot.com/2013/04/kettle-pentaho-data-integration.html)

# python - 使用 python 脚本从网络投影仪获取信息

> ID：15469296
> 
> 赞同：0
> 
> 时间：2013-03-18T03:24:51.173
> 
> 标签：python, networking, tkinter, projector

我有一个包含多台 PC 和投影仪的小型网络。通常，当我输入特定投影仪的 IP 地址时，我可以通过浏览器查看投影仪状态（运行时间、灯泡寿命等）。我想知道是否可以使用 python 脚本获取网络上投影仪的信息。我的想法是创建一个小型 tkinter 应用程序，它会在用户请求时显示这些投影仪状态。我必须承认我过于雄心勃勃，因为我没有足够的网络编程知识。但如果你们中的任何人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:28:10.417

您可以通过多种方式进行操作，但是由于您没有提供太多信息，我建议您使用[mechanize](http://wwwsearch.sourceforge.net/mechanize/documentation.html)或[splinter](http://splinter.cobrateam.info/)，它们都可以作为浏览器使用，因此您可以阅读 HTML 上的内容，甚至可以填写/提交表单等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:29:29.683

这有点取决于页面的复杂程度。如果它是纯文本，那么这样的东西应该可以工作

```
import urllib
stats_text = urllib.urlopen('http://ip.of.projector').read() 
```

如果您需要解析返回的页面以提取值，您可能需要查看[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)

# javascript - 使用 js 回调事件查找 swf 视频播放器

> ID：15469298
> 
> 赞同：1
> 
> 时间：2013-03-18T03:24:56.770
> 
> 标签：javascript, callback, flash

我正在对一个支持 js 回调的 swf 视频播放器进行罚款，例如 start_play_callback、finish_video_callback 等……有人知道有这样的 swf 视频播放器吗？

# python - 基于 2d 掩码数组的 numpy 3d 到 2d 转换

> ID：15469302
> 
> 赞同：4
> 
> 时间：2013-03-18T03:25:25.393
> 
> 标签：python, numpy

如果我有这样的 ndarray：

```
>>> a = np.arange(27).reshape(3,3,3)
>>> a
array([[[ 0,  1,  2],
        [ 3,  4,  5],
        [ 6,  7,  8]],

       [[ 9, 10, 11],
        [12, 13, 14],
        [15, 16, 17]],

       [[18, 19, 20],
        [21, 22, 23],
        [24, 25, 26]]]) 
```

我知道我可以使用以下方法获得沿某个轴的最大值`np.max(axis=...)`：

```
>>> a.max(axis=2)
array([[ 2,  5,  8],
       [11, 14, 17],
       [20, 23, 26]]) 
```

或者，我可以沿该轴获取对应于最大值的**索引：**

```
>>> indices = a.argmax(axis=2)
>>> indices
array([[2, 2, 2],
       [2, 2, 2],
       [2, 2, 2]]) 
```

我的问题 - 给定数组`indices`和数组`a`，是否有一种优雅的方式来重现数组返回的数组`a.max(axis=2)`？

这可能会起作用：

```
import itertools as it
import numpy as np
def apply_mask(field,indices):
    data = np.empty(indices.shape)

    #It seems highly likely that there is a more numpy-approved way to do this.
    idx = [range(i) for i in indices.shape]
    for idx_tup,zidx in zip(it.product(*idx),indices.flat):
        data[idx_tup] = field[idx_tup+(zidx,)]
    return data 
```

但是，这似乎很老套/效率低下。它也不允许我将它与“最后一个”轴以外的任何轴一起使用。是否有一个 numpy 函数（或使用一些神奇的 numpy 索引）来完成这项工作？天真`a[:,:,a.argmax(axis=2)]`是行不通的。

**更新**：

似乎以下内容也有效（并且更好一点）：

```
import numpy as np
def apply_mask(field,indices):
    data = np.empty(indices.shape)

    for idx_tup,zidx in np.ndenumerate(indices):
        data[idx_tup] = field[idx_tup+(zidx,)]

    return data 
```

* * *

我想这样做是因为我想根据 1 个数组中的数据（通常使用`argmax(axis=...)`）提取索引，并使用这些索引从一堆其他（等效形状）数组中提取数据。我对实现此目的的替代方法持开放态度（例如，使用布尔掩码数组）。但是，我喜欢使用这些“索引”数组获得的“安全性”。有了这个，我保证有正确数量的元素来创建一个新数组，它看起来像一个通过 3d 字段的 2d“切片”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T04:33:10.613

这是一些神奇的 numpy 索引，可以满足您的要求，但不幸的是它非常难以阅读。

```
def apply_mask(a, indices, axis):
    magic_index = [np.arange(i) for i in indices.shape]
    magic_index = np.ix_(*magic_index)
    magic_index = magic_index[:axis] + (indices,) + magic_index[axis:]
    return a[magic_index] 
```

或同样不可读：

```
def apply_mask(a, indices, axis):
    magic_index = np.ogrid[tuple(slice(i) for i in indices.shape)]
    magic_index.insert(axis, indices)
    return a[magic_index] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T06:01:10.253

我`index_at()`用来创建完整的索引：

```
import numpy as np

def index_at(idx, shape, axis=-1):
    if axis<0:
        axis += len(shape)
    shape = shape[:axis] + shape[axis+1:]
    index = list(np.ix_(*[np.arange(n) for n in shape]))
    index.insert(axis, idx)
    return tuple(index)

a = np.random.randint(0, 10, (3, 4, 5))

axis = 1
idx = np.argmax(a, axis=axis)
print a[index_at(idx, a.shape, axis=axis)]
print np.max(a, axis=axis) 
```

# scala - 如何在不使用可变 ArrayBuffer 的情况下累积结果？

> ID：15469303
> 
> 赞同：0
> 
> 时间：2013-03-18T03:25:31.327
> 
> 标签：scala, immutability, mutable

本题末尾的代码将零替换为可能的数字，范围从 1 到 9 一次且不重复。对于给定的数字序列 List(0, 0, 1, 5, 0, 0, 8, 0, 0)，它将返回以下结果。总共有 720 个排列。

```
List(2, 3, 1, 5, 4, 6, 8, 7, 9)
List(2, 3, 1, 5, 4, 6, 8, 9, 7)
List(2, 3, 1, 5, 4, 7, 8, 6, 9)
List(2, 3, 1, 5, 4, 7, 8, 9, 6)
List(2, 3, 1, 5, 4, 9, 8, 6, 7)
List(2, 3, 1, 5, 4, 9, 8, 7, 6)
List(2, 3, 1, 5, 6, 4, 8, 7, 9)
... 
```

我的问题是如何将我的代码转换为不使用 ArrayBuffer( `coll`) 作为我的临时存储，并从 function( `search0`) 返回最终结果？

谢谢

/lim/

```
import collection.mutable.ArrayBuffer

object ScratchPad extends App {
  def search(l : List[Int]) : ArrayBuffer[List[Int]] = {
    def search0(la : List[Int], pos : Int, occur : List[Int], coll : ArrayBuffer[List[Int]]) : Unit = {
    if (pos == l.length) {println(la); coll += la }
    val bal = (1 to 9) diff occur
    if (!bal.isEmpty) {
        la(pos) match {
        case 0 => bal map { x => search0(la.updated(pos, x), pos + 1, x :: occur, coll)}
        case n => if  (occur contains n) Nil else search0(la, pos + 1, n :: occur, coll)
        }
    }
    }

    val coll = ArrayBuffer[List[Int]]()

    search0(l, 0, Nil, coll)
    coll
  }

  println(search(List(0, 0, 1, 5, 0, 0, 8, 0, 0)).size)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T05:42:54.570

这是使用不可变集合的较短解决方案：

```
scala> def search(xs: Seq[Int])(implicit ys: Seq[Int] = (1 to 9).diff(xs)): Seq[Seq[Int]] = ys match {
     |   case Seq() => Seq(xs)
     |   case _ => ys.flatten(y => search(xs.updated(xs.indexOf(0), y))(ys.diff(Seq(y))))
     | }
search: (xs: Seq[Int])(implicit ys: Seq[Int])Seq[Seq[Int]]

scala> search(List(0, 0, 1, 5, 0, 0, 8, 0, 0)).size
res0: Int = 720

scala> search(List(0, 0, 1, 5, 0, 0, 8, 0, 0)) take 10 foreach println
List(2, 3, 1, 5, 4, 6, 8, 7, 9)
List(2, 3, 1, 5, 4, 6, 8, 9, 7)
List(2, 3, 1, 5, 4, 7, 8, 6, 9)
List(2, 3, 1, 5, 4, 7, 8, 9, 6)
List(2, 3, 1, 5, 4, 9, 8, 6, 7)
List(2, 3, 1, 5, 4, 9, 8, 7, 6)
List(2, 3, 1, 5, 6, 4, 8, 7, 9)
List(2, 3, 1, 5, 6, 4, 8, 9, 7)
List(2, 3, 1, 5, 6, 7, 8, 4, 9)
List(2, 3, 1, 5, 6, 7, 8, 9, 4) 
```

一个更短的解决方案：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

def search(xs: Seq[Int], ys: Seq[Int] = 1 to 9): Seq[Seq[Int]] = ys.diff(xs) match {
  case Seq() => Seq(xs)
  case zs => zs.flatten(z => search(xs.updated(xs.indexOf(0),z),zs))
}

// Exiting paste mode, now interpreting.

search: (xs: Seq[Int], ys: Seq[Int])Seq[Seq[Int]]

scala> search(List(0, 0, 1, 5, 0, 0, 8, 0, 0)).size
res1: Int = 720

scala> search(List(0, 0, 1, 5, 0, 0, 8, 0, 0)) take 10 foreach println
List(2, 3, 1, 5, 4, 6, 8, 7, 9)
List(2, 3, 1, 5, 4, 6, 8, 9, 7)
List(2, 3, 1, 5, 4, 7, 8, 6, 9)
List(2, 3, 1, 5, 4, 7, 8, 9, 6)
List(2, 3, 1, 5, 4, 9, 8, 6, 7)
List(2, 3, 1, 5, 4, 9, 8, 7, 6)
List(2, 3, 1, 5, 6, 4, 8, 7, 9)
List(2, 3, 1, 5, 6, 4, 8, 9, 7)
List(2, 3, 1, 5, 6, 7, 8, 4, 9)
List(2, 3, 1, 5, 6, 7, 8, 9, 4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:59:00.130

仅使用不可变数据结构对代码进行天真的重构：

```
object ScratchPad extends App {
    def search(l: List[Int]): List[List[Int]] = {
        def search0(la: List[Int], pos: Int, occur: List[Int]): List[List[Int]] =
            if (pos == l.length)
                List(la)
            else {
                val bal = (1 to 9) diff occur
                if (pos < l.length && !bal.isEmpty)
                    la(pos) match {
                        case 0 => bal.toList flatMap {x => search0(la.updated(pos, x), pos + 1, x :: occur)}
                        case n => if (occur contains n) List.empty[List[Int]] else search0(la, pos + 1, n :: occur)
                    }
                else
                    List.empty[List[Int]]
            }

        search0(l, 0, Nil)
    }

    val result = search(List(0, 0, 1, 5, 0, 0, 8, 0, 0))
    result foreach println
    println(result.size)
} 
```

# sql - 使用 Where 过滤器创建更新触发器

> ID：15469305
> 
> 赞同：0
> 
> 时间：2013-03-18T03:25:39.470
> 
> 标签：sql, triggers

我是创建触发器的新手。我正在尝试创建一个触发器，该触发器使用 tblAccounts.HotNote 更新 tblServiceOrders.GeneralSymptoms，其中 tblAccounts.Number = tblServiceOrders.AccountNumber 并且每当将新行添加到 tblServiceOrders 时。这是我到目前为止所得到的。

```
ALTER TRIGGER [dbo].[HOTNOTE_update] ON [dbo].[tblServiceOrders]
AFTER INSERT
AS
BEGIN
UPDATE tblServiceOrders tblAccounts.AccountNumber = tblServiceOrders.AccountNumber

SET GeneralSymptoms =
    (
SELECT HotNote FROM tblAccounts, tblServiceOrders
WHERE tblAccounts.AccountNumber = tblServiceOrders.AccountNumber
    )
FROM tblServiceOrders
WHERE tblServiceOrders.SOType = 'BE Maintenance' OR tblServiceOrders.SOType = 'DD Maintenance'
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:04:56.140

读你的代码，每插入一条记录，你就会更新整个表，成本真的很高。我猜你并不想这样做。如果您只想更新刚刚插入的记录，那么为什么不在插入之前准备好数据并直接插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:33:33.373

假设您使用的是 SQL Server，看起来您的`UPDATE`语句正在尝试执行以下操作：

```
UPDATE so 
SET so.GeneralSymptoms = a.hotnote
FROM tblServiceOrders so 
    JOIN tblAccounts a ON so.AccountNumber = a.AccountNumber
WHERE so.SOType = 'BE Maintenance' 
    OR so.SOType = 'DD Maintenance' 
```

这将使用这些匹配条件更新表中的所有记录。您可能需要考虑仅使用插入的记录——取决于您的数据库结构。

# reporting-services - 需要帮助才能在 Visual Studio 中获取更新的报表已设置为链接报表以直接更新到链接报表

> ID：15469306
> 
> 赞同：0
> 
> 时间：2013-03-18T03:25:57.843
> 
> 标签：reporting-services

我刚搬到一家新公司，设置报告的人在项目下设置它们，然后创建报告。然后他们使用 Visual Studio 更新到服务器，通过 Internet Explorer 界面创建了到子文件夹的链接报告。

我现在发现要更新这些报告中的任何一个，我必须将它们更新到项目位置，然后删除旧报告并创建一个新的链接报告。

我希望我的知识存在差距，并且有另一种方法可以做到这一点。或者有一种方法可以将报告移动到它们各自的文件夹中。我无权访问报表服务器来创建文件夹，但可以申请 IT 来完成这些工作。

希望得到一些帮助，这样我就不用花几天时间来更新这些报告中的大部分了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:39:24.990

如果我理解正确，他们正在 Visual Studio 中开发报告并使用部署功能将它们上传到报告服务器。然后，他们使用基于 Web 的报告管理器界面创建链接报告，以便可以从其他位置访问该报告。

我还没有使用 Visual Studio 的自动部署功能对其进行测试，但至少如果您更新主报告，那么所有链接的报告现在也将是新版本。因此，您应该能够从 Visual Studio 进行部署，并且所有旧的链接报表也可以正常工作。只有当自动部署过程涉及在上传之前删除原始报告时，链接的报告才会被破坏。只要它是一个简单的更新/替换操作就可以了。

如果它实际上是在部署期间删除报告并且链接的报告停止运行（给出类似“报告链接不再有效”的错误），那么您实际上不必完全删除并重新创建链接的报告。您可以转到链接报告的属性并更新链接位置，使其不再指向正确的报告（在 2008 R2 上测试）。这将使您不必重做链接报告可能具有的所有安全性和订阅。

# batch-file - 如何使用bat在文件名中打印月份名称

> ID：15469307
> 
> 赞同：4
> 
> 时间：2013-03-18T03:26:02.570
> 
> 标签：batch-file

我想在文件名中使用月份名称。我正在从 sql server 导出数据文件的名称应该使用系统日期，如果月份是 3，那么它应该将文件名打印为 febact，如果月份是 4，那么它应该打印 Marchact。

谢谢，拉维。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T17:26:45.877

您没有提供文件名的格式。下面的批处理文件只是转换当前日期的月份：

```
@echo off
setlocal EnableDelayedExpansion
set m=100
for %%m in (January February March April May June July August September October November  December) do (
   set /A m+=1
   set month[!m:~-2!]=%%m
)
rem Change tokens=2 for DD/MM/YYYY date format
for /F "tokens=1 delims=/"  %%m in ("%date%") do (
   set monthName=!month[%%m]!
)
echo %monthName% 
```

如果您希望月份名称具有恒定长度（即：3 个字母）：

```
@echo off
setlocal EnableDelayedExpansion
for /F "tokens=1 delims=/" %%m in ("%date%") do (
   set /A "m=(1%%m%%100-1)*3"
)
set month=JanFebMarAprMayJunJulAugSepOctNovDec
set monthName=!month:~%m%,3!
echo %monthName% 
```

安东尼奥

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T10:15:23.250

WMIC 似乎不适用于我的 Win XP - 它不包含在 XP Home 版中。

这不是最优雅的解决方案，但应该可以。

```
@echo off
  rem 0,2 for mm/dd/yyyy  or 3,2 for dd/mm/yyyy
set month-num=%date:~3,2%
if %month-num%==01 set mo-name=jan
if %month-num%==02 set mo-name=feb
if %month-num%==03 set mo-name=mar
if %month-num%==04 set mo-name=apr
if %month-num%==05 set mo-name=may
if %month-num%==06 set mo-name=jun
if %month-num%==07 set mo-name=jul
if %month-num%==08 set mo-name=aug
if %month-num%==09 set mo-name=sep
if %month-num%==10 set mo-name=oct
if %month-num%==11 set mo-name=nov
if %month-num%==12 set mo-name=dec
echo build filename using %mo-name% 
```

好一点 ：

```
@echo off
  rem 0,2 for mm/dd/yyyy  or 3,2 for dd/mm/yyyy
set month-num=%date:~3,2%
  rem remove any leading zero :
IF "%month-num:~0,1%"=="0" SET month-num=%month-num:~1%
FOR /f "tokens=%month-num%" %%a in ("jan feb mar apr may jun jul aug sep oct nov dec") do set mo-name=%%a
echo build filename using %mo-name% 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-17T11:38:29.570

我知道，这个问题已经很老了。但是，我不喜欢不必要的循环或多个 case if 语句，因为无论如何只有一个可以符合条件。你可能想试试这个：

```
setlocal ENABLEDELAYEDEXPANSION

set "mo=%date:~3,2%"
if "%mo:~0,1%"=="0" set "mo=%mo:~1%"
set names=JanFebMarAprMayJunJulAugSepOctNovDec
set /a "pos = 3 * %mo%" - 3
set "ti=!names:~%pos%,3!"

echo %ti%
pause 
```

对于*mo*，您将获得 1...12，对于*pos*，字符串“JanFeb...Dec”中的索引为 0,3...33，并且假设它是 May（*mo* =5），然后*ti*将输出：

```
May 
```

希望它仍然有帮助，如果不是 OP，那么其他人。

**注意：**不是独立于语言环境的，您必须知道从哪里选择您的月份数字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-06T11:20:13.247

```
cls
@ECHO OFF
TITLE PRINT_MONTH NAME

rem To get valuse from local machine

for /f "delims=" %%a in ('wmic OS Get localdatetime ^| find "."') do set dt=%%a
set year=%dt:~0,4%
set month=%dt:~4,2%
set day=%dt:~6,2%

rem set month name for the corresponding numbers

if %month%==01 set monthname=JANUARY
if %month%==02 set monthname=FEBRUARY
if %month%==03 set monthname=MARCH
if %month%==04 set monthname=APRIL
if %month%==05 set monthname=MAY
if %month%==06 set monthname=JUNE
if %month%==07 set monthname=JULY
if %month%==08 set monthname=AUGUST
if %month%==09 set monthname=SEPTEMBER
if %month%==10 set monthname=OCTOBER
if %month%==11 set monthname=NOVEMBER
if %month%==12 set monthname=DECEMBER

rem print month name

echo %monthname% 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-18T22:37:18.473

我根据@aacini 和他们的答案工作。我只是绕过了第二个 FOR 循环，直接进入月份代码。

```
@echo off
setlocal EnableDelayedExpansion 

set m=100
for %%m in (January 
    February 
    March 
    April 
    May 
    June 
    July 
    August 
    September 
    October 
    November 
    December
) do (
  set /a m+=1
  set month[!m:~-2!]=%%m
)

set monthNow=%date:~3,3%
set monthNow=%monthNow: =%
set monthName=!month[%monthNow%]!

echo %monthName%

pause 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T21:13:33.653

试试这个（希望独立于本地设置）：

```
@echo off &setlocal
for /f "tokens=2*" %%a in ('reg query "HKCU\Control Panel\International" /v sShortDate^|find "REG_SZ"') do set "ssShortDate=%%b"
reg add "HKCU\Control Panel\International" /f /v sShortDate /d "ddd MMM" >nul
set "dowlm=%date%"
reg add "HKCU\Control Panel\International" /f /v sShortDate /d "dd MM yyyy" >nul
set "cdate=%date%"
reg add "HKCU\Control Panel\International" /f /v sShortDate /d "%ssShortDate%" >nul
for /f "tokens=1-2" %%i in ("%dowlm%") do set "dow=%%i"&set "lmonth=%%j"
for /f "tokens=1-3" %%i in ("%cdate%") do set "day=0%%i"&set "month=0%%j"&set "year=%%k"
set "day=%day:~-2%"
set "month=%month:~-2%"
echo.%dow%, %day%.%lmonth%.%year%
endlocal
Pause 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-01T15:30:31.270

捎带 AjV Jsy 的帖子，这是我用来为上个月的名称设置变量的方法。我在批处理文件中使用此代码创建一个具有上个月名称的新文件夹 - 我将其用于备份和自动月末报告。

```
@echo off
set Year=%date:~10,4%
set Month=%date:~4,2%
:: This script sets the variable "PrvMonth" to display the name of the previous month.
if %Month%==01 set PrvMonth=December

if %Month%==02 set PrvMonth=January

if %Month%==03 set PrvMonth=February

if %Month%==04 set PrvMonth=March

if %Month%==05 set PrvMonth=April

if %Month%==06 set PrvMonth=May

if %Month%==07 set PrvMonth=June

if %Month%==08 set PrvMonth=July

if %Month%==09 set PrvMonth=August

if %Month%==10 set PrvMonth=September

if %Month%==11 set PrvMonth=October

if %Month%==12 set PrvMonth=November 
```

# ios - ios 的 boost 和 quantlib 中的链接器警告 - 似乎无法摆脱可见性警告

> ID：15469308
> 
> 赞同：4
> 
> 时间：2013-03-18T03:26:11.527
> 
> 标签：ios, xcode, boost, linker, quantlib

我已经能够在 XCode 4.6 和 iOS 6.1（以及 armv7s！）上编译和构建 boost 和 quantlib 框架：

*   boost - 使用 boostoniphone-galbraithjosephs 脚本修改为 ios 6.1 和 boost 1_53_0（谢谢约瑟夫！）
*   quantlib - 使用 Philip Barnes 脚本和我对 ios 6.1 和 quantlib 1.2.1 的修改（谢谢 Philip！）

当我在 Xcode（同时使用 boost.framework 和 ql.framework）中运行 FXVanillaSwapExample 时，我收到 56 个警告和 2 个错误，主要与以下内容有关：ld：警告：在 xyz 中直接访问 xyz 的全局弱符号 vtable 意味着弱符号在运行时不能被覆盖。这可能是由使用不同可见性设置编译的不同翻译单元引起的。和 ld：警告：在 QuantLib::RecoveryRateQuote::value() const 中直接访问全局弱符号 QuantLib

我收到了 Quantlib 和 boost 的这些警告。然后我阅读了关于可见性设置的帖子。

boost 是由脚本编译的 -fvisibility=hidden -fvisibility-inlines-hidden quantlib 是编译的 -fvisibility=hidden 但不是 -fvisibility-inlines-hidden

我修改了 quantlib 脚本以添加 -fvisibility-inlines-hidden 然后全部重建但无济于事。相同的链接器错误。

我还尝试在 XCode 构建设置中使用“隐藏的内联方法”和“默认隐藏的符号”（这些必须在幕后设置相同的 -f 标志）

因此，我尝试使用 -fvisibility=default 重建 boost 和 quantlib 并删除了 -fvisibility-inlines-hidden 标志。这也没有奏效。构建 FXVanillaSwapExample 时再次出现相同的链接器错误。

所以我猜我没有正确设置构建并且在构建内部的某个地方 -f 标志被弄乱了。我只是不知道如何诊断这是如何发生的。想法赞赏。

# android - android ndk 不能带来更好的性能

> ID：15469309
> 
> 赞同：0
> 
> 时间：2013-03-18T03:26:13.793
> 
> 标签：android, android-ndk

在某些计算机逻辑中，我认为本机 c 代码（从 java 本机方法调用）将比 java 运行得快。那么在这种情况下，我似乎必须使用ndk。

然而谷歌表示：

> 值得注意的是，在 Android 上使用原生代码通常不会带来显着的性能提升，但它总是会增加应用程序的复杂性

所以我很困惑。ndk 有必要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:37:42.453

NDK 是必需的。这是否与您的案件有关很难说，因为您没有提供具体细节。

与服务器端 Java 不同，C 代码实际上比其 DVM 代码要快得多。另一方面，正如文档指出的那样，通常不是。跨越原生边界需要大量时间。调用 NDK 方法的循环很可能不会发生重大变化。完全在 NDK 的 C 端实现的循环很可能会发生重大变化。

另请注意，如果您选择使用 NDK，则会大大限制您支持的设备。您可以生成具有多个版本的库的胖二进制文件，每个支持的设备一个版本。当然，这会影响您的应用程序的大小，并且不能保证它会在某些新手机上运行。

# python - pygame移动用户控制的对象直到释放键？

> ID：15469314
> 
> 赞同：1
> 
> 时间：2013-03-18T03:26:51.090
> 
> 标签：python, python-2.7, pygame

我玩 pygame 已经有一段时间了，stackoverflow 的老手给了我一些帮助，以更好地改进我的代码以在屏幕上移动角色。每次按键的瞬间角色都会移动，减速然后停止，只有再次按键才能继续移动。任何人都可以帮助角色在释放钥匙时减速并停止吗？

谢谢你

```
import sys
import pygame
import os
from pygame.locals import *

character = "toon.png"
bg = "bg.jpg"

delta = {
    pygame.K_LEFT: (-10, 0),
    pygame.K_RIGHT: (+10, 0),
    pygame.K_UP: (0, -10),
    pygame.K_DOWN: (0, +10),
    }

class Toon(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        self.image = pygame.image.load(character)
        self.bg = pygame.image.load(bg)
        self.rect = self.image.get_rect()
        self.speed = [2, 2]
        self.area = pygame.display.get_surface().get_rect()
    def update(self):
        self.rect = self.rect.move(self.speed)
        if self.rect.left < 0 or self.rect.right > self.area.width:
            self.speed[0] = -self.speed[0]
        if self.rect.top < 0 or self.rect.bottom > self.area.height:
            self.speed[1] = -self.speed[1]

class Main(object):
    def __init__(self):
        self.setup()
    def setup(self):
        pygame.init()
        size = (self.width, self.height) = (640,360)
        self.black = (0, 0, 0)
        self.bg = pygame.image.load(bg)
        self.screen = pygame.display.set_mode(size, 0, 32)
        self.toon = Toon()
        self.setup_background()
    def setup_background(self):
        self.background = pygame.Surface(self.screen.get_size())
        self.background = self.background.convert()
        self.screen.blit(self.bg, (0, 0))
        pygame.display.flip()
    def draw(self):
        self.screen.blit(self.bg, (0, 0))
        self.screen.blit(self.toon.image, self.toon.rect)
        pygame.display.flip()
    def event_loop(self):
        toon = self.toon
        while True:
            for event in pygame.event.get():
                if event.type == QUIT:
                    pygame.quit()
                    sys.exit()
                elif event.type == pygame.KEYDOWN:
                    deltax, deltay = delta.get(event.key, (0, 0))
                    toon.speed[0] += deltax
                    toon.speed[1] += deltay
            toon.speed[0] *= 0.95
            toon.speed[1] *= 0.95
            toon.update()
            self.draw()
            pygame.time.delay(10)

if __name__ == '__main__':
    app = Main()
    app.event_loop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T04:04:15.440

我只想更改您的`Main.event_loop()`并将其他功能添加到您的主类中，该类使用`pygame.key.get_pressed`：

```
def event_loop(self):
    toon = self.toon
    while True:
        self.event_handle()
        toon.speed[0] *= 0.95
        toon.speed[1] *= 0.95
        toon.update()
        self.draw()
        pygame.time.delay(10)

def event_handle(self):
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
    # This will allow diagonal movements.. 
    key = pygame.key.get_pressed()
    if key[pygame.K_LEFT]:
        self.toon.speed[0] = -10
    if key[pygame.K_RIGHT]:
        self.toon.speed[0] = +10
    if key[pygame.K_UP]:
        self.toon.speed[1] = -10
    if key[pygame.K_DOWN]:
        self.toon.speed[1] = +10 
```

变化：

1.  我添加了一个新功能，即`event_handle`处理事件和键。
2.  您会注意到 for 事件循环不做任何键处理。那是因为我们使用`pygame.key.get_pressed`的是更适合当前工作的。

    *   它返回当前按下的键的布尔列表。我们通过索引`key`来检查我们想要的键（这里的箭头）。

效果：
你的问题解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:11:36.857

制作`friction = 1`while`KEYDOWN`和`friction < 1`when `KEYUP`：

```
 elif event.type == pygame.KEYDOWN:
                deltax, deltay = delta.get(event.key, (0, 0))
                toon.speed[0] += deltax
                toon.speed[1] += deltay
                friction = 1
            elif event.type == pygame.KEYUP:
                friction = 0.95
        toon.speed = [x*friction for x in toon.speed] 
```

* * *

```
import sys
import pygame
import os
from pygame.locals import *

character = "toon.png"
bg = "bg.jpg"

delta = {
    pygame.K_LEFT: (-10, 0),
    pygame.K_RIGHT: (+10, 0),
    pygame.K_UP: (0, -10),
    pygame.K_DOWN: (0, +10),
    }

class Toon(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        self.image = pygame.image.load(character)
        self.bg = pygame.image.load(bg)
        self.rect = self.image.get_rect()
        self.speed = [0, 0]
        self.area = pygame.display.get_surface().get_rect()
    def update(self):
        self.rect = self.rect.move(self.speed)
        if self.rect.left < 0 or self.rect.right > self.area.width:
            self.speed[0] = -self.speed[0]
        if self.rect.top < 0 or self.rect.bottom > self.area.height:
            self.speed[1] = -self.speed[1]

class Main(object):
    def __init__(self):
        self.setup()
    def setup(self):
        pygame.init()
        size = (self.width, self.height) = (640,360)
        self.black = (0, 0, 0)
        self.bg = pygame.image.load(bg)
        self.screen = pygame.display.set_mode(size, 0, 32)
        self.toon = Toon()
        self.setup_background()
    def setup_background(self):
        self.background = pygame.Surface(self.screen.get_size())
        self.background = self.background.convert()
        self.screen.blit(self.bg, (0, 0))
        pygame.display.flip()
    def draw(self):
        self.screen.blit(self.bg, (0, 0))
        self.screen.blit(self.toon.image, self.toon.rect)
        pygame.display.flip()
    def event_loop(self):
        toon = self.toon
        friction = 1        
        while True:
            for event in pygame.event.get():
                if event.type == QUIT:
                    pygame.quit()
                    sys.exit()
                elif event.type == pygame.KEYDOWN:
                    deltax, deltay = delta.get(event.key, (0, 0))
                    toon.speed[0] += deltax
                    toon.speed[1] += deltay
                    friction = 1
                elif event.type == pygame.KEYUP:
                    friction = 0.95
            toon.speed = [x*friction for x in toon.speed]
            toon.update()
            self.draw()
            pygame.time.delay(10)

if __name__ == '__main__':
    app = Main()
    app.event_loop() 
```

# c++ - 如何从 Qt 导出 XML？

> ID：15469315
> 
> 赞同：-1
> 
> 时间：2013-03-18T03:26:58.840
> 
> 标签：c++, xml, qt

如何从 Qt 导出 XML？

我正在开发一个问题生成器程序，我需要从 Qt 导出一个 XML 文件。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T03:37:03.910

QXmlStreamWriter 会有所帮助。文档[在这里](http://www.developer.nokia.com/Community/Wiki/Generate_XML_programatically_in_Qt)。

# html - 使用按钮的背景图像。如何根据文本的长度调整按钮的大小？

> ID：15469317
> 
> 赞同：2
> 
> 时间：2013-03-18T03:27:48.700
> 
> 标签：html, css

我刚开始学习html和css。我正在为我的按钮使用背景图像。如何调整按钮的大小以使所有文本都适合它。

这是我的CSS代码

```
#header a{
display: compact;
background: url("images/tab.gif") no-repeat scroll left top transparent;
color: #FFFFCC;
text-decoration: none;
padding: 0.75em 1em .025em;
background-size: contain;
} 
```

继承人的html：

```
<ul>
<li> <a href="">Overview</a> </li>
<li> <a href="">This text is too long</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:01:53.000

试试这个 - 它比使用更向后兼容`background-size:cover`。

的HTML：

```
<ul>
<li> <a href="">Short Menu Item</a> </li>
<li> <a href="">Much Longer Menu Item</a></li>
</ul> 
```

和CSS：

```
ul {
    margin-left:0 ;
    padding-left:0 ;
    list-style-type:none ;
}

li {
    margin:12px 0 !important ;
}

a {
    color: #FFFFCC;
    text-decoration: none;
    text-align:left ;
    padding:4px ;
    background: url("http://d-grafix.com/textures/2006-07-31/2006-07-31-seamless-grass-9613645-thumb.jpg") ;
} 
```

演示在这里：http: [//jsfiddle.net/Kg5D6/1/](http://jsfiddle.net/Kg5D6/1/)

# php - 避免 PHP 中的 SQL 注入

> ID：15469318
> 
> 赞同：-2
> 
> 时间：2013-03-18T03:27:52.210
> 
> 标签：php, sql-injection

我已经阅读了关于 db 注入的信息，直到我眼睛红了，论坛搜索，未命名的搜索搜索......所以一个彻头彻尾的问题。我正在使用 jquery/ajax。

```
var characterReg = /^([0-9a-zA-NP-Z]{27,34})$/; 
```

仅用于基本格式验证。传递给php。在数据库查询中使用结果是否安全？我不是在寻找实际的比特币地址验证，只是基本格式。

```
<?php
include('myConnect.php');
$expire = time() + 60 * 60 * 24 * 30;
$path   = '/';
if (isset($address)) {
    // Query db if address exsists.
    $data = mysql_query("SELECT * FROM viewers WHERE address = '$address'");
    $info = mysql_fetch_array($data);
    if ($info) {
        // Build cookie data from db row array.
        $bitAdrr = $info['address'];
        $id    = $info['id'];
        $earn  = $info['earnings'];
        $track = $info['tracking'];
        setcookie('user', $bitAdrr . ',' . $id . ',' . $earn . ',' . $track, $expire);
    } else {
        echo 'empty';
    }
}
?> 
```

我的连接.php

```
<?php
$addr = $_GET['address'];
// Verify address is correct format.
if (strlen($addr) > 26 && strlen($addr) < 35 && !preg_match('/[^A-NP-Za-z0-9]/', $addr)) {
    $server = 'mysql.myHost.com';
    $user   = 'myUserName';
    $pass   = 'myPassWord';
    $db     = 'myDataBase';
    // Connect to Database
    $connection = mysql_connect($server, $user, $pass) or die("Could not connect to server. \n" . mysql_error());
    mysql_select_db($db) or die("Could not connect to database. \n" . mysql_error());
    $address = $addr;
} else {
    exit;
}
?> 
```

可能的注射？mysql_real_escape_string(htmlspecialchars 似乎真的很慢。我宁愿不要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:32:32.377

最好的答案是使用[prepared statements](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)，它允许数据库引擎担心正确的转义。

完整的详细信息在 PHP 手册中，但总结是您首先通过提供带有问号占位符的语句*模板来准备变量：*

```
$stmt = $mysqli->prepare("SELECT * FROM viewers WHERE address = ?") 
```

然后，您可以提供要替换的参数：

```
$stmt->bind_param("s", $address) 
```

然后最后执行它：

```
$stmt->execute(); 
```

另一个需要注意的方面是，您似乎正在尝试在客户端（在 JavaScript 中）而不是在服务器端（在 PHP 中）进行验证。这是不安全的，因为您无法验证所有请求都来自您页面上运行的代码；由于代码在我的浏览器中运行，我可以简单地选择不运行它并使用我喜欢的任何地址值直接向您的服务器发送请求。始终在服务器端实现数据验证。

# ios - 在没有页面的情况下访问标签栏项目

> ID：15469324
> 
> 赞同：0
> 
> 时间：2013-03-18T03:28:38.300
> 
> 标签：ios, objective-c, share

我的标签栏控制器中有 4 个标签项。当我点击“分享”项目时，

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item 
```

委托被调用。然后出现一个弹出窗口。*此弹出窗口与“共享”页面*本身是分开的。我希望显示弹出窗口，而不是页面。

感谢所有帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:32:15.143

控制将您的标签栏拖到 IB 中的“文件所有者”并将其设置为委托。

您不能为标签栏项目设置目标操作。他们应该总是有新的看法。唯一的方法是 - 您应该使用确定您的标签栏项目被触摸的委托，然后处理在该委托中按下了哪个标签。

接下来将此代码放入您的 viewcontroller.m 文件中。

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item

{

      if(item.tag == 1)
      {
      }

} 
```

您应该从 xcode 的属性中为您的标签栏项目设置标签值。

# macos - 如何在 Mac 上安装 mimms

> ID：15469327
> 
> 赞同：0
> 
> 时间：2013-03-18T03:29:09.980
> 
> 标签：macos, installation

（我为我的天真道歉……我是整个脚本行业的新手）

我正在尝试从 Github 分叉一个 python 脚本。该脚本将 Mimms 作为依赖项。我正在运行 OSX 10.8.2。

我尝试使用“apt-get install mimms”，但当然这不起作用，因为 OSX 没有附带 apt-get。

我也试过“sudo port install mimms”，但我显然也没有端口。

所以我直接从[这里](http://www.filetransit.com/download.php?id=100663)下载了mimms 并 sudo mv'd 到 /usr/bin/. 这显然不是正确的方法，因为当我尝试运行依赖于 mimms 的脚本时，它会显示“sh: /usr/bin/mimms: Permission denied”。

同样的问题使我无法安装 apt-get。（macporter 找不到 gcc，我应该用 XCode 安装它，但这是一个单独的问题。）

我觉得我在如何安装没有自动引导安装的软件方面缺少一些明显的步骤。

我知道这是一个可笑的基本问题，但有人能指出我的错误吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:26:46.213

您可以安装[MacPorts](http://www.macports.org)来获取`port`命令和所有相关的优点。`apt-get`适用于 Linux，而不是 Mac。要获得`gcc`，请安装[XCode 命令行工具](https://developer.apple.com/xcode/)，无论如何 MacPorts 都需要它。

拜托，为了所有美好的事物，除非您确切地知道自己在做什么，否则永远**不要做任何事情。** 如果您想在自己的目录中存放此类内容，请运行`mv``/usr/bin``$PATH`

`mkdir -p ~/bin; echo 'export PATH=$PATH:~/bin' >> ~/.profile; export PATH=$PATH:~/bin`

**就像**我输入的一样（都在一行上），你应该很好。

# iphone - 使用单行/单元格进入编辑模式

> ID：15469329
> 
> 赞同：0
> 
> 时间：2013-03-18T03:29:22.033
> 
> 标签：iphone, objective-c, editmode

我有一个来自此示例的自定义滑动识别类： [如何在自定义 UITableviewCell 中检测滑动删除手势？](https://stackoverflow.com/questions/6167756/how-to-detect-a-swipe-to-delete-gesture-in-a-customized-uitableviewcell)

```
 - (void)cellSwiped:(UIGestureRecognizer *)gestureRecognizer {
    if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
        UITableViewCell *cell = (UITableViewCell *)gestureRecognizer.view;
        NSIndexPath* indexPath = [self.tableView indexPathForCell:cell];
    }
} 
```

现在我想在 indexPath 中选择那一行并为其启用编辑模式，有人可以告诉我如何完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:42:01.597

在某处缓存您想要的行，并且在您的实现中`- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath`只返回`YES`您想要可编辑的行。然后通过发送进入编辑模式`[tableView setEditing:YES animated:YES];`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:40:44.023

你可以在你的类中有一个变量`NSIndexPath *index`then have

```
-(BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    return indexPath == self.index;
} 
```

并将索引设置为您希望能够编辑的任何单元格，然后`tableView setEditing:YES animated:YES/NO`在您想要编辑该单元格时调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:50:13.823

像这样试试

在您的 tableView`didSelectRowAtIndex`委托方法中调用该`editingStyleForRowAtIndexPath`方法，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
 [yourTableView.delegate tableView:tableView editingStyleForRowAtIndexPath:indexPath];
} 
```

在`editingStyleForRowAtIndexPath`方法上，

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {

  return UITableViewCellEditingStyleDelete;

  }

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

} 
```

# ios - 如何在通行证背面添加一个链接，该链接调用 iPhone 或 iPod 中的另一个应用程序

> ID：15469332
> 
> 赞同：1
> 
> 时间：2013-03-18T03:29:44.483
> 
> 标签：ios, web-services, passbook

我已经为存折创建了通行证。我可以在哪个字段中放置链接，并且该链接调用另一个应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T03:48:24.297

您需要获取应用程序的 Adam ID，然后将`associatedStoreIdentifiers`密钥添加到您的 pass.json。

例如，要包含 Google Maps App，请将以下内容添加到 pass.json 的根目录中：

```
"associatedStoreIdentifiers":[585027354] 
```

您可以从 iTunes 商店中的应用程序链接获取 Adam ID。

`https://itunes.apple.com/app/id585027354`

# multithreading - Delphi中使用DLL对事件进行编程

> ID：15469341
> 
> 赞同：0
> 
> 时间：2013-03-18T03:30:48.247
> 
> 标签：multithreading, delphi, dllimport, delphi-6

我想知道程序执行过程中用户（初学者）可以在事件通知下实现的情况，例如：

```
TNotifySomething : procedure (const param: TObject) of object; 
```

1 - 此事件可能由 Dll 实现？我必须以某种方式发布？
2 - 我可以通过引用将程序执行期间实例化的对象传递给 dll 方法吗？
3 - 在多线程环境中，如果我通过 2 个或更多线程调用事件（在 dll 中定义），它会给我带来任何麻烦，比如访问冲突？
4 - 有人知道我可以读到的好书或论文吗？

PS：这可以在Delphi 6中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:55:24.890

1) 没有。[Google for DLL vs BPL](https://www.google.ru/search?client=opera&q=DLL%20vs%20BPL&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest)。这个话题从 1997 年开始反复出现。BPL 是针对 Pascal 的。DLL 适用于 Windows。Windows 中没有对象。但是有 COM 接口（IUnknown 与 COM 定义的类型，支持您的 Pascal 类型，不存在事件回调）

您还可以尝试“JCL except_stack_list 可以为 dll 工作吗？”线程在[http://newsportal.delphi-jedi.org/thread_frameset.php?group=jedi.jcl](http://newsportal.delphi-jedi.org/thread_frameset.php?group=jedi.jcl)

2）通过`IUnkown`和COM标准化的数据类型。除此之外，您覆盖编译器的类型安全，这意味着您应该实现并提供自己的 pascal-to-binary 安全层。

3）取决于您的代码，包括被调用者和调用者。如果两者都是可重入的，那么它们是。如果有人不是 - 它会触发错误。

4）取决于你想要达到什么。

如果您想体验 DLL：任何汇编程序书籍，然后 Delphi 手册关于在 asm 而不是 Pascal 中实现过程，特别是关于所有这些数据类型在不同 Delphi 版本中的二进制表示。如果你否认 Delphi 标准的类型安全，那么你需要提供你自己的。

如果你想体验 COM，那么任何关于 COM 的书和关于实现和使用 COM 对象的 Delphi 手册。

如果您想体验 BPL，请阅读有关运行时包的 Delphi 手册。他们是德尔福的一等公民，额外的书籍是可选的。

# php - 如何使用php将文本文件保存到sql server数据库

> ID：15469342
> 
> 赞同：0
> 
> 时间：2013-03-18T03:30:51.697
> 
> 标签：php, sql-server-2008

我正在我的 PHP 网站中创建文本文件。

我想将文本文件保存到 sql server 2008 数据库中。

数据库类型为 IMAGE 类型。

如何将我的文本文件保存到 sql server 数据库的 IMAGE 数据类型字段中？

谁能帮帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:34:55.037

以下 php 函数可以帮助您开始寻找所需的内容：

*   [`imagecreatefrompng`](http://www.php.net/manual/en/function.imagecreatefrompng.php)
*   [`imagepng`](http://www.php.net/manual/en/function.imagepng.php)

这里是所有的 php [Image 函数](http://www.php.net/manual/en/ref.image.php)。

# linux - 使用 apt-get 安装 mailutils，无需用户干预

> ID：15469343
> 
> 赞同：9
> 
> 时间：2013-03-18T03:31:09.890
> 
> 标签：linux, email, apt-get

在使用 apt-get 在 ubuntu 12.04 上安装 mailutils 时，有 2 个实例需要手动干预，第一个是选择站点配置，第二个是输入框的主机名。有没有办法自动安装？我需要在许多服务器上安装软件包并且作为 n00b 系统管理员，我还没有找到解决方案。我可以从源代码制作和安装，但是它还有其他问题。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-01-21T17:09:39.653

您可以使用`debconf-set-selections`预选答案：

```
$ debconf-set-selections <<< "postfix postfix/mailname string your.hostname.com"
$ debconf-set-selections <<< "postfix postfix/main_mailer_type string 'Internet Site'"
$ apt-get install -y mailutils 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:13:01.370

您可能需要查看**debconf**配置细节。这是一个[应该有帮助的链接](http://itechnology.wordpress.com/2007/04/21/how-to-disable-debconf-for-automated-installs/)。

# entity-framework - 实体框架 ProxyCreation 已禁用，但仍需要访问一些相关的记录数据

> ID：15469344
> 
> 赞同：0
> 
> 时间：2013-03-18T03:31:14.163
> 
> 标签：entity-framework

根据 StackOverflow 的一些建议，我使用下面的代码在我的 dbContext 中关闭了 ProxyCreation 以解决循环引用问题

```
_dbcontext.Configuration.ProxyCreationEnabled = false; 
```

将其关闭后，Json 序列化返回我的相关类型的 null，这有望解决循环引用，但如果我仍然需要某种类型怎么办。例如，我可以从我的 EntityChild 访问 EntityParentType

EntityChild.EntityParentType（它们在数据库中关联为外键关系，EntityParenetTypeId）。

我试过 .Include("EntityParentType") 但我又回到了循环引用问题。完成这项工作的正确方法是什么？

```
 var result = from entry in EntityChild.Include("EntityParentType")
                 where entry.EntityParentTypeId == 1 
                 select entry; 
```

编辑：使用 ViewModel 是解决此循环引用问题的最佳选择吗？[http://garfbradazweb.wordpress.com/2011/09/22/mvc-3-entity-framework-and-serializing-jsoncircular-references/](http://garfbradazweb.wordpress.com/2011/09/22/mvc-3-entity-framework-and-serializing-jsoncircular-references/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:46:29.007

您可以使用[ScriptIgnore](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.scriptignoreattribute.aspx)属性忽略序列化中的父级或子级，

```
public class Entity
{
    [ScriptIgnore]
    public Item ChildEntity { get; set; }
} 
```

# php - 我在 php 邮件脚本中的密件抄送不起作用，请协助

> ID：15469346
> 
> 赞同：0
> 
> 时间：2013-03-18T03:31:37.730
> 
> 标签：php, mailer

请帮忙，我的密件抄送不起作用。我在这里做错了什么？谢谢！

```
$to = "recepient@email.com";
        $subject = "A message came in from the Website:";

        $message ='{$message}';

        $headers = "MIME-Version: 1.0\r \n";
        $headers .= "Content-type: text/plain; charset=iso-8859-1\r \n";
        $headers .= "From: $name <$email>\r\n";
        $headers .= 'Bcc: myemail@email.com' . " \r\n"; //<- this part is not working :(

        mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:18:35.217

你面前的空间`" \r\n"`似乎有问题。

# sql-server - 在 where 中找不到记录时选择默认值

> ID：15469347
> 
> 赞同：1
> 
> 时间：2013-03-18T03:31:38.447
> 
> 标签：sql-server, sql-server-2008

给定以下查询：

```
SELECT COALESCE(A, 0), COALESCE(B, 0)
FROM TABLE
WHERE Id IN (0, 2, 0); 
```

当基于 where 子句找不到记录时，如何返回默认值？以下是预期的结果：

```
0, 0
1, 1
0, 0 
```

请注意，当 Id 为零时，仍必须选择一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:38:49.553

从[VALUES 派生表中](http://technet.microsoft.com/en-us/library/dd776382.aspx)选择并加入您的表：

```
SELECT COALESCE(A, 0), COALESCE(B, 0)
FROM (VALUES (0),(2),(0)) x(Id)
LEFT OUTER JOIN [TABLE] ON [TABLE].Id = x.Id 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/179ee/1)

* * *

如果必须维护返回的订单，您可以显式指定它：

```
SELECT COALESCE(A, 0), COALESCE(B, 0)
FROM (VALUES (0,0),(1,2),(2,0)) x(SeqNo, Id)
LEFT OUTER JOIN [TABLE] ON [TABLE].Id = x.Id
ORDER BY SeqNo 
```

[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/179ee/2)（没有真正可见的更改，但现在可以保证排序）

# java - 在 Java 中将对象字段值写入 System.out 的最简洁方法

> ID：15469354
> 
> 赞同：0
> 
> 时间：2013-03-18T03:32:36.683
> 
> 标签：java, debugging

记录大量字段值的最简洁方法是什么？例如，假设您有 6 个字段要输出给定行的所有 int 类型的值。

最明显的解决方案是执行以下操作：

```
System.out.println("renderMap() xTile: " + xTile + "  yTile: " + yTile + 
    "  maxXTile: " + maxXTile + "  maxYTile: " + maxYTile + "  xPixelOffset: " + 
    xPixelOffset + "  yPixelOffset: " + yPixelOffset); 
```

如果您要进行大量更改而始终需要编写上述调试行，那么在 Java 中是否有更简洁*且不那么痛苦的方法？*

我接受我在上面所做的可能只是最简洁的语法，但对此进行确认（或反驳）会很好。

**我最终将此作为解决方案（比我上面的要求少一点，但我会接受它）：**

```
System.out.println(String.format("%d %d  %d %d  %d %d", xTile, yTile, 
    maxXTile, maxYTile, xPixelOffset, yPixelOffset)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:35:59.383

制作一个格式字符串并使用 String.format(formatstring, object.value1, object.value2, ...) 。这并没有那么简洁，但它看起来更整洁，因为不是变量和字符串的结构混合在一起，而是完全描述了你想要的格式，然后完全描述了你将放置在其中的值。如果您曾经在 C 语言中使用过 printf，那么它非常相似。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format(java.util.Locale](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format(java.util.Locale) , java.lang.String, java.lang.Object... )

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)

这不适用于 Java（除非你可以用反射做一个技巧？）但是在像 Python 这样的语言中，所有对象都秘密地拥有变量名到值的哈希映射，你可以遍历这个哈希映射并自动构造一个调试字符串它的变量名和值。

# php - 多个 mysql_connect 语句相互抵消

> ID：15469355
> 
> 赞同：3
> 
> 时间：2013-03-18T03:32:39.567
> 
> 标签：php, mysql, ajax, database-connection, chat

我正在尝试使用 php 和我的 sql 编写一个 ajax 聊天应用程序。我有一个名为 connect.php 的文件，如下所示：

```
mysql_connect("host", "username", "password");
mysql_select_db("database name"); 
```

我有另一个名为 Core.php 的文件，它需要与数据库的相同连接才能从我的数据库中获取聊天消息。Core.php 看起来像这样：

```
class Core {
protected $db, $result;
private $rows;

public function __construct() {
    $this->db = new mysqli('host', 'username', 'password','database name') or die('Connection Failure');
}
} 
```

如何将 $this->db 设置为我已经打开的同一连接？

就像现在一样，connect.php 在我的 init.php 文件中在 Core.php 之前被调用，导致聊天消息没有显示在框中。如果我注释掉对 connect.php 的调用，则会显示聊天消息，但无法访问所有用户登录数据并且用户将被注销。谁能帮我这个？这让我疯狂

编辑：这是我的 init.php 文件，其中 core.php 和 connect.php 被调用

```
ob_start();
session_start();
error_reporting(0);

$current_file = explode('/',$_SERVER['SCRIPT_NAME']);
$current_file = end($current_file);

require 'core/database/connect.php';
require 'functions/general.php';
require 'functions/users.php';
require 'classes/Core.php'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:37:06.883

我不是 100% 确定你在做什么，所以这是最好的猜测答案......首先，你如何分配已经打开的连接？

```
//connect.php
<?php
    $conn = mysql_connect("$host", "$u", "$p");
    mysql_select_db("$db");
?>

<?php
include 'connect.php';

class Core
{
    private $conn;

    function __construct()
    {
        global $conn;
        $this->conn =& $conn;
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:31:36.917

```
public function __construct() {
      $this->db = new mysqli('$host', '$u', '$p','$db') or die('Connection Failure');
 } 
```

此代码不会运行，请确保您使用了 "$host"/"$u"..etc 而不是 '$host' 或 '$u'

php 解析器会将其解析为字符串而不是引号内的变量。

# ios - iPhone/iPod Touch：Info.plist：无法验证图标尺寸，未找到图标

> ID：15469356
> 
> 赞同：1
> 
> 时间：2013-03-18T03:32:48.217
> 
> 标签：ios, icons, archive, dimensions, app-launcher

我发布这个的原因是我已经尝试了所有在线编写的解决方案，但没有一个对我有用。我错过了什么？任何人都可以帮忙吗？通过 xcode 4.6 中的存档工具验证我的应用程序时，这是我收到的错误消息：

**iPhone/iPod Touch：Info.plist：无法验证图标尺寸，未找到图标。您必须定义 CFBundleIcons、CFBundleIconFiles、CFBundleIconFile，或提供默认的 Icon.png，即 57x57。**

它也给了我同样的 iPad 错误，虽然我的应用程序不是为 iPad 设计的，并且在 iOS 应用程序目标中，设备设置为 iPhone。我不知道为什么 iPad 被列为错误。我什至尝试上传 iPad Icon-72.png，但错误仍然存​​在。

我怎样才能摆脱这个错误？我有 Icon.png、Icon@2x.png 和 Icon-72.png 并且这些图标在模拟器和设备上都可以正常工作。

**我的尝试：**

1.  在 Build Settings 中，我将 Compress PNG Files 设置为 NO。没有解决！
2.  我删除了图像，再次推送它们，清理、构建和验证。没有解决！
3.  我尝试[了其他解决方案](https://stackoverflow.com/questions/3658929/itunesconnect-iphone-app-status-invalid-binary)。没有解决！
4.  我尝试将“图标已经包含光泽”设置为否。没有解决。

**这是我的窃听错误的图像：** ![在此处输入图像描述](../Images/c5b58ddb2cf731c7c0a4a15eb32ebb6c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:01:53.707

完全相同的问题发生在我身上。最后通过更改目标中的有效架构来解决。

如果存在，则从有效架构中删除 i386、armv6。无法支持 armv6 和 armv7s。

看到这张图片： http: [//postimage.org/image/pxz2fyij5/](http://postimage.org/image/pxz2fyij5/)

还要从 xcode 中清除派生数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:58:26.500

查看您的 info.plist 并添加所有必要的图标名称。还要检查是否找到任何未使用的图标名称。

这是图标文件大小：

```
Icon.png          : 57x57
Icon@2x.png       : 114x114
Icon-72.png       : 72x72
Icon-ipad@2x.png  : 144x144
Icon-Small-50.png : 50x50
Icon-Small.png    : 29x29
iTunesArtwork     : 1024x1024 
```

查看 info.plist 的此屏幕截图以获取更多详细信息。

![在此处输入图像描述](../Images/31ebd0d8cdfc35ef4e40c88a05ace731.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T19:33:34.053

现在这是我最终解决的方法：

*   我没有在 .app 包中找到图标，我在那里手动添加了图标。要查看 .app 包的内容，从管理器中，按住 Control 键单击存档，选择“在 Finder 中显示”。然后，按住 Control 键单击 .archive 文件（包）并选择“显示包内容”。在 Products/Applications 目录下，您应该找到您的应用程序。按住 Control 并单击您的应用并选择“显示包内容”。您的图标文件应该存在。
*   我创建了一个新档案。Product->Archive 创建一个新的存档，然后在尝试验证之前在 Organizer 中选择新的存档

这两个解决方案一起工作，在 .app 包中添加图标并创建一个新的存档一起验证了应用程序，我现在可以看到图标很好。终于成功了！

# jquery - 如何以跨度为标准选择div内的表单？

> ID：15469363
> 
> 赞同：0
> 
> 时间：2013-03-18T03:34:09.420
> 
> 标签：jquery, jquery-selectors

我想从 div 区域内的表单元素中获取价值。当 div 的 span 元素具有类名“自定义单选检查”时选择该表单

```
<div class="row pascabayar-regis-number">
       <div class="columns twelve mobile-four">
               <input type="radio" name="pick_number" value="62817306603">
    <span class="custom radio checked"></span>
       </div>
</div> 
```

我怎么能用jquery做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:37:12.227

如果我没记错的话，你希望`radio`按钮`span`内部有相同的`div`。

采用`.has().`

```
$('.columns:has("span.checked")').find('input:radio'); 
```

# java - 以编程方式增加 UDP 缓冲区 - 这有意义吗？

> ID：15469365
> 
> 赞同：1
> 
> 时间：2013-03-18T03:34:26.013
> 
> 标签：java, networking, udp

大家好！
我正在开发java UDP服务器。我将大量数据发送到我的服务器，并且由于接收缓冲区大小较小而丢失了部分传入数据包。现在我正在以这种方式设置接收缓冲区 -

`DatagramChannel serverChannel;
serverChannel.setOption(StandardSocketOptions.SO_RCVBUF, 1024*1024*10); // 10 MB`

是否有意义？此代码没有解决丢包问题。我的操作系统 - 64 位 Windows 7。

还有一个问题——我的网络控制器的接收缓冲区属性默认为 512——是字节还是兆字节？如果它是 512**字节**，是否需要手动增加此属性？我认为以编程方式增加缓冲区实际上会增加操作系统缓冲区，但这没有意义，因为最初 udp 数据包“来到”我的网卡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:48:12.623

> 我将大量数据发送到我的服务器，并且由于接收缓冲区大小较小而丢失了部分传入数据包。

你不知道。有很多可能的原因。

> 现在我正在以这种方式设置接收缓冲区 -

```
DatagramChannel serverChannel;
serverChannel.setOption(StandardSocketOptions.SO_RCVBUF, 1024*1024*10); // 10 MB 
```

> 是否有意义？

并非如此，这是一个巨大的缓冲区，操作系统可能会将其截断为更合理的大小。设置后尝试获取该选项并查看实际大小。

> 此代码没有解决丢包问题。

没有人说会。你只是假设它。

> 还有一个问题——我的网络控制器的接收缓冲区属性默认为 512——是字节还是兆字节？

在您告诉我们您使用的是什么 NIC 之前，没有人可以回答这个问题，但是您应该能够从制造商的数据中自己发现这一点。

> 如果它是 512 字节，是否需要手动增加此属性？

不仅没有必要，而且不可能。

> 我认为以编程方式增加缓冲区实际上会增加操作系统缓冲区

如果您`SO_RCVBUF`的意思是控制套接字接收缓冲区的大小，那是正确的。

> 但这没有意义

是的，它确实。

> 因为最初 udp 数据包“来”到我的网卡。

然后从那里进入操作系统，从那里进入 IP 堆栈，从那里进入 UDP 堆栈，再从那里进入套接字接收缓冲区。当大多数路径 MTU 高达 1500 字节时，NIC 似乎不太可能有 512 字节的缓冲区，但例如 512k 确实有意义。你可以假设它已经足够了，毕竟它确实有效。

你的基本假设是有缺陷的。UDP 数据包可能因多种原因而丢失：它们从未被发送，它们被中间路由器丢弃，它们被分段并且并非所有分段都到达接收器，或者接收器的套接字接收缓冲区已满，这反过来可能是因为它太小，也可能是因为接收者跟不上发送者。仅仅使用一个巨大的套接字接收缓冲区只能解决这些问题之一。如果您需要可靠性，请使用 TCP，或者通过重试实现 ACK 或 NACK 机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:42:20.100

> 是否有意义？

有点儿。但是，您无法保证 UDP 数据包不会丢失。UDP本质上是一种不可靠的协议。如果您的应用程序无法以足够快的速度从套接字中拉出数据包以跟上速度，或者如果出现网络错误，数据包将会丢失。

*如果您需要将数据可靠地*发送到您的服务器，您可能应该使用 TCP ...

> 我的网络控制器的接收缓冲区属性默认为 512 - 它是字节还是兆字节？

我不知道，但我也不怀疑。它更有可能是千字节。

* * *

> 我试图增加控制器的缓冲区大小 - 操作系统说 512 是最大可能的）

那么，您将无法将其增加到 10Mb。

> 因此，如果没有 newtwork 错误，我的数据包只会在我处理它们太慢的情况下丢失。

不完全是。由于各种原因，数据包可能会在许多地方丢失/丢弃。其中一些是“正常行为”而不是“网络错误”；例如，当路由器/网桥/网关拥塞时丢包。

> 增加缓冲区大小看起来足以解决问题，但令人惊讶的是它失败了。

事实上，这并不奇怪。丢包可能是正常行为；往上看。

> 可能我应该在一个线程中接收数据包并在另一个线程中处理它们，即使我使用专门用于开发“单线程”服务器的 java NIO。

它可能有助于减少操作系统和网络接口中的数据包丢失。但是，您最终会在应用程序内存中缓冲数据，这可能会导致*更严重*的问题……如果应用程序无法长期跟上。

此外，它不处理因其他原因丢失/丢弃的数据包。

* * *

底线是您将无法使用 UDP 实现可靠的无损传输。丢包是不可避免的，您正在浪费时间试图避免它。

您要么必须设计应用程序来处理丢失的数据报，要么改用 TCP 或其他提供可靠数据传输的协议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T03:48:31.683

UDP 发送/接收离散数据包；最大大小约为 65K。如果您要发送的数据比这更多，则需要将其分成多个数据包。正如其他人所指出的，UDP 是一种不可靠的协议。数据包可能会消失、重复或乱序接收。

# javascript - 如何将新创建的 html 元素绑定到其 css

> ID：15469366
> 
> 赞同：0
> 
> 时间：2013-03-18T03:34:49.153
> 
> 标签：javascript, jquery, html, css

我正在通过 javascript 动态添加新的 html 元素，而那些新创建的 html 元素有一个 css 类，它已经存在于链接的 style.css 文件中。我如何让这个新创建的元素知道他的 css 类，以便这个类的样式可以影响新创建的 html 元素。

我的js：

```
for(k=1;k<=5;k++){
  if(k==data[i]['price']){
html = html + '<input class=\"star\" type=\"radio\" name=\"test-5\" disabled=\"disabled\" value=\"'+k+'\" checked=\"checked\" />';
  }else{
html = html + '<input class=\"star\" type=\"radio\" name=\"test-6\" disabled=\"disabled\" value=\"'+k+'\"/>';
  }
 } 
```

该类`star`在创建后应该立即在 css 文件中流行。jquery有什么`make-popular`功能吗？

希望我能很好地解释我的问题..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:39:52.680

只要页面已经引用了 CSS 文件，那么您所要做的就是创建具有 class="star" 属性的元素。我看不到你最终对`html`变量做了什么，但假设你的元素出现在带有`class="star"`属性的页面上，并且你有一个正确声明的星形 css 类，那么这就是所需要的。使用 F12 开发人员工具检查浏览器中的元素以验证正在应用的类。

**例子：**

[http://jsfiddle.net/mQKdc/](http://jsfiddle.net/mQKdc/)

```
$(function(){
     $('#addToMe').html('<div class="star">test</div>');
}); 
```

**编辑：**但是请注意，输入元素很难设置样式，因为每个操作系统（Win/Linux）和/或浏览器（IE、Firefox、Chrome）都可以提供自己的输入元素样式。您可能会发现某些东西很难在它们上设计样式。在这种情况下，它并不是真正的 javesceiprt 问题，而是 CSS 问题。您需要问一个与 CSS 相关的问题，具体说明 1）您的 CSS 是什么，2）您的目标是什么，3）您所看到的表明您当前的 CSS 不符合目标（即您的问题）。

**编辑 2：** 在排序之前，元素的 HTML：

```
<div role="text" aria-label="" class="star-rating rater-0 star star-rating-applied star-rating-readonly star-rating-on">
   <a title="2">2</a>
</div> 
```

输入也在那里，但样式正在应用于这个元素。星形样式应用于`<a>`元素：

```
div.star-rating a {
background: url(../images/star.gif) no-repeat 0 0px;
} 
```

排序后，div+a 不存在，只有输入。 **所以样式适用的元素（`div.star-rating a`不存在**：

```
<input class="star" type="radio" name="test-1-rating-5" disabled="disabled" value="4"> 
```

因此，根据我在排序前看到的 HTML，排序后生成的 HTML 是不正确的。您是否使用某种插件/库来生成星星？如果是这样，我猜你会调用一些函数来生成正确的 HTML。

**解决方案：** 看起来你应该做这样的事情来运行 .rating() 函数在你想要激活 Star Rating Plugin 的每个元素上：

```
$('.star').rating(); 
```

您只需要在生成新元素后运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:42:18.707

如果您要添加使用现有 Css 的新 html 元素，那么默认情况下应该能够使用它们。你有什么问题吗？

# php - Google Drive API 错误 PHP

> ID：15469368
> 
> 赞同：1
> 
> 时间：2013-03-18T03:35:01.197
> 
> 标签：php, google-drive-realtime-api

我正在尝试按照本教程[https://developers.google.com/drive/quickstart-php#step_1_enable_the_drive_api](https://developers.google.com/drive/quickstart-php#step_1_enable_the_drive_api)为 PHP 安装 google api 我从该网站下载了源文件：[http ://code.google.com /p/google-api-php-client/](http://code.google.com/p/google-api-php-client/)但是当他们说运行命令时，我不知道该怎么做，因为我正在托管 lunarpages 并且我的网站的源文件没有下载到我的计算机上，所以我在那部分是菜鸟，但是看起来我从以前的网站下载的文件应该可以工作。所以我将它们上传到我的源目录（当然是在创建 O.Auth 2.0 客户端 ID 之后）并使用与教程网站中相同的代码创建了 document.txt 测试文件和 quickstart.php，但使用的是我的客户端 ID + 密码. 现在，当我在线浏览页面时，出现以下错误：

```
请访问：https://accounts.google.com/o/oauth2/auth?response_type=code&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob&client_id=136782384170-5sr0a78ffs2kicvpubursmj1k29obgcg.apps.googleusercontent.com&scope=https%3A %2F%2Fwww.googleapis.com%2Fauth%2Fdrive&access_type=offline&approval_prompt=force 请输入授权码：
警告：fgets() 期望参数 1 是资源，字符串在第 19 行的 /home/dpnews0/public_html/dpreads0/quickstart.php 中给出

警告：无法修改标头信息 - 标头已由 /home/dpnews0/public_html/dpreads0/google-api-php-client/src/ 中的（输出开始于 /home/dpnews0/public_html/dpreads0/quickstart.php:17）发送第 118 行的 auth/Google_OAuth2.php

致命错误：在 /home/dpnews0/public_html/dpreads0/google-api-php-client/src/auth/Google_OAuth2.php:153 中包含消息“无法 json 解码令牌”的未捕获异常“Google_AuthException” 堆栈跟踪：#0 /home/dpnews0/public_html/dpreads0/google-api-php-client/src/Google_Client.php(174): Google_OAuth2->setAccessToken(NULL) #1 /home/dpnews0/public_html/dpreads0/quickstart.php(23) : Google_Client->setAccessToken(true) #2 {main} 在第 153 行的 /home/dpnews0/public_html/dpreads0/google-api-php-client/src/auth/Google_OAuth2.php 中抛出

```

任何人对此有任何想法/过去的经验，你认为你可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T16:12:39.137

一个解决方案：把 ob_start(); 和 ob_end_clean(); 在您的代码上：

ob_start();

> > > 在这里，您的 Google API 代码

ob_end_clean();

// 之后，重定向标头('location:page.php'); 出口;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:52:30.650

尝试清除 cookie 或使用不同的浏览器。api 将您的令牌存储在会话中

# php - 将 & 作为字符串一部分的 PHP 获取方法

> ID：15469369
> 
> 赞同：0
> 
> 时间：2013-03-18T03:35:05.760
> 
> 标签：php, mysql, get, mysqli, special-characters

我有一个典型的 php get 方法，它从这样的 url 中获取学校的名称。

```
 $sname_original = $_GET['school']; 
```

然后我像这样显示学校的名称。

```
echo $sname_original; 
```

除非学校的名称中包含“&”符号，否则此方法非常有效。如果有一个 & 符号，例如“Texas a&m”，则回波显示为“Texas a”，其他所有内容都被切断。有没有我应该做的逃跑或什么？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:36:40.143

是的，您必须应用[`urlencode()`](http://php.net/urlencode)到每个 url 参数值，之后`&`将被编码为`%26`和空格作为`+`：

```
Texas+a%26m 
```

**重要提示**：生成url时只需要编码，php解析url时会自动解码

# ruby-on-rails - 捕获 http_referer 无论哪个登陆页面

> ID：15469370
> 
> 赞同：0
> 
> 时间：2013-03-18T03:35:20.767
> 
> 标签：ruby-on-rails, http-referer

现在，我在每个控制器操作中捕获 http_referrer，例如：

```
class PostsController < ApplicationController
  def new
    referer = request.referer
  end 
```

但是，无论使用哪个页面，我都想捕获引用者。我该怎么做？我的一个想法是重写 ApplicationController 以捕获并将其保存到会话中。但我不确定这是否是一个好方法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:49:21.873

添加`before_filter`一个`ApplicationController`

# android - OnPageChangeListener 中的滚动方向

> ID：15469371
> 
> 赞同：9
> 
> 时间：2013-03-18T03:35:24.587
> 
> 标签：android

是否可以在应用于 a的方法`onPageScrolled`中知道滚动的方向？`OnPageChangeListener``ViewPager`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-18T03:46:48.393

我用过这样的东西：

```
mPager.setOnPageChangeListener(new OnPageChangeListener() {

    int oldPos = mPager.getCurrentItem();

    @Override
    public void onPageScrolled(int position, float arg1, int arg2) {

            if(position > oldPos) {
                 //Moving to the right

            } else if(position < oldPos) {
                 //Moving to the Left
            }

        .
        .
        . 
```

- 编辑 -

抱歉，改为onPageScrolled，而不是onPageSelected..

# java - 工具提示在 struts 2 中的 jfree 图表中不起作用

> ID：15469373
> 
> 赞同：0
> 
> 时间：2013-03-18T03:36:13.443
> 
> 标签：java, struts2, jfreechart

我正在使用 struts 2 应用程序生成条形图`JFreeChart`；但即使我启用了工具提示，它们在生成的条形图中也不起作用。我无法弄清楚如何使工具提示起作用？这是我的代码：

```
public class ChartAction extends ActionSupport {

private static final long serialVersionUID = 1L;
private JFreeChart chart;

    public JFreeChart getChart() {
    return chart;
}

public String createRBar() throws Exception {
    // chart creation logic..
    System.out.println("IN CHART ACTION");
    try
    {
        BarChart barChart=new BarChart();
        {
            chart=barChart.generateRegionBar();

            return SUCCESS;
        }

    }catch(Exception e)
    {
        e.printStackTrace();
    }
    return "error";

}
} 
```

```
public class BarChart {

    public JFreeChart generateRegionBar(){
        try{
        DefaultCategoryDataset dataset =new DefaultCategoryDataset();
            dataset.setValue(80, "marks1", "student1");
            dataset.setValue(20, "marks2", "student2");
            dataset.setValue(50, "marks3", "student3");
            dataset.setValue(70, "marks4", "student4");
            JFreeChart chart=ChartFactory.createBarChart("student graph","student name", "student marks",dataset,  PlotOrientation.VERTICAL, true, true, true);
            return chart;
        }catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }
    } 
```

这是我的 struts.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd ">
<struts>        
    <package name="jfree" extends="jfreechart-default">
            <action name="generateRPGraph" class="gr3.jfree.controller.ChartAction"
            method="createRBar">
            <result name="success" type="chart">
                <param name="width">550</param>
                <param name="height">300</param>
            </result>
        </action>
    </package>

</struts> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:57:14.683

工具提示是 Swing 的一个特性`JComponent`；支持可用于显示在 a 中的图表`ChartPanel`，a 的子类`JPanel`。在客户端-服务器环境中，请考虑以下替代方案：

*   `CategoryItemLabelGenerator`，在[这里](https://stackoverflow.com/q/7155294/230513)看到。

*   [Java Web Start](https://stackoverflow.com/tags/java-web-start/info)，建议[在这里](https://stackoverflow.com/a/15358452/230513)。

*   `ImageMapUtilities`用于创建 HTML 图像映射。

# python - 如何分析正在运行的 Django 应用程序？

> ID：15469377
> 
> 赞同：4
> 
> 时间：2013-03-18T03:36:47.717
> 
> 标签：python, django, profiling

我的大型 Django 应用程序在运行时占用 30-60 MB 的 RAM，以及高达 40% 的 CPU。如何动态监控和分析我的应用程序以确定我的潜在内存和 CPU 泄漏在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:03:05.643

看看这个：[profiling Django](https://code.djangoproject.com/wiki/ProfilingDjango)，可能会派上用场。还有一个[hotshot](http://docs.python.org/2/library/hotshot.html)的链接，我过去使用过。我可以用hotshot改进一些东西。newrelic也[很有](http://newrelic.com/)用。

一些类似的问题：

[问题 1](https://stackoverflow.com/questions/8213007/profiling-on-live-django-server) , [问题 2](https://stackoverflow.com/questions/2361985/profiling-django)

# ruby-on-rails - roo 库是否适用于 Ruby 2.0？

> ID：15469398
> 
> 赞同：1
> 
> 时间：2013-03-18T03:39:48.030
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 ruby​​ 2.0 来解析 xlsx。我的程序上有这样的指令`co = Excelx.new("Teste.xlsx")`。我在这一行没有收到此错误：`uninitialized constant Excelx (NameError)`。这似乎是对的，因为我遵循了 roo 文档。ruby 2.0 支持 roo 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T03:54:01.083

是的，它确实适用于 ruby​​ 2.0，尝试附加`Roo`模块。例如：

```
require 'roo'

co = Roo::Excelx.new("Teste.xlsx") 
```

我用`ruby-2.0.0-p0`

# jsf-2 - 如何定义行ID

> ID：15469403
> 
> 赞同：0
> 
> 时间：2013-03-18T03:40:23.350
> 
> 标签：jsf-2

有没有办法为 h:panelGrid 定义行 ID？如果我们为 h:panelGrid 定义一个 ID，那么它将成为输出 html 中的表 ID。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:54:06.817

[`<h:panelGrid>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.0/docs/pdldocs/facelets/h/panelGrid.html)没有提供设置单个行的 id 的方法。相反，它的属性`rowClasses`旨在控制 CSS 类对行的设置。通常，此属性用于设置行的交替格式。

文档告诉它`rowClasses`接受“将应用于此表的行的 CSS 样式类的逗号分隔列表”，并且“也可以为任何单独的行指定一个空格分隔的类列表”。然后将属性中指定的样式应用于表中的每一行。

设置替代行的示例`<h:panelGrid>`：

```
<h:panelGrid columns="3" rowClasses="oddRow, evenRow"> ... </h:panelGrid> 
```

但是，如果将 id 设置为单个行的要求很严格，您可以考虑使用 Primefaces' [`<p:panelGrid>`](http://www.primefaces.org/showcase/ui/panelGrid.jsf)，您可以在其中嵌套[`<p:row>`](http://www.primefaces.org/docs/vdl/3.5/primefaces-p/row.html)具有`id`属性的标签。

# java - 如何指定 Java 使用哪种方法？

> ID：15469404
> 
> 赞同：3
> 
> 时间：2013-03-18T03:40:25.263
> 
> 标签：java, list, integer

现在我有一个`ArrayList<Integer>`.
正如[上面](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#get%28int%29)所说，ArrayList 有两种删除方法。
假设我有一个整数 2，我想删除该列表中的 ELEMENT 2 而不是 POSITION 2（第三个元素）上的元素，我应该如何告诉 Java 这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T03:43:11.707

这是一个与[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)有关的问题。实际上， when `T == Integer`，您有两种删除方法：

*   `void remove(int index)`
*   `void remove(Integer object)`

只需强制编译器通过将其强制转换为 an`Integer`或直接使用 an来选择适当的、基于对象的版本`Integer`：

```
list.remove((Integer)2);
list.remove(Integer.valueOf(2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:49:48.920

您应该使用`public boolean remove(Object o)`方法从列表中删除对象。在您的情况下，您应该将声明写为`this.remove(new Integer(2));`

# sql - SQLite 3中空表的奇怪外键行为

> ID：15469405
> 
> 赞同：1
> 
> 时间：2013-03-18T03:40:29.040
> 
> 标签：sql, sqlite, foreign-keys

我的 SQLite 3 具有以下设置（简化）：

```
create table Location(LocationId integer not null,
                      LocationCode text not null, 
                      primary key(LocationId),
                      unique(LocationCode)); 
```

上表由部门参考：

```
create table Department(DepartmentId integer not null,
                        LocationId integer not null,
                        DepartmentCode text not null,
                        primary key(LocationId, DepartmentCode),
                        foreign key(LocationId) references Location(LocationId)); 
```

上表被 Child 引用：

```
create table Event(EventId integer not null,
                   LocationId integer not null,
                   unique(LocationId, EventDate),
                   primary key(eventId),
                   foreign key(LocationId) references Location(LocationId)); 
```

上表参考表位置：

```
create table Parent(ParentId integer not null,
                    EmailAddress text not null,
                    primary key(ParentId),
                    unique(EmailAddress)); 
```

上表被表 Child 引用：

```
create table Child(ChildId integer not null,
                   ParentId integer not null,
                   ChildCode text not null,
                   DepartmentId integer not null,
                   primary key(ChildId, ParentId),
                   foreign key(ParentId) references Parent(ParentId),
                   foreign key(DepartmentId) references Department(DepartmentId)); 
```

表子是我要从中删除的那个。

此时，整个数据库是空的，并且有“pragma foreign_keys=ON”。

`Child`在测试脚本以清除数据库时，我在从具有外键的空表中删除（也是空的）表时遇到错误`Parent`。

当我发出命令`delete from child`时（虽然已经为空），SQLite3 会返回错误消息“外键不匹配”。

这是删除脚本的重要部分：

```
delete from Child;
delete from Parent;
delete from Event;
delete from Department;
delete from Location; 
```

我在这里看到了一些关于暂时禁用外键支持的帖子，但这对我来说没有意义。这使得实现外键关系的整个过程变得不必要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:16:54.993

文档（隐藏在源代码中）说：

> 外键约束要求父表中的键列共同受 UNIQUE 或 PRIMARY KEY 约束。[...] 如果找不到所需的索引，可能是因为：
> 
> 1.  命名的父键列不存在，或者
> 2.  命名的父键列确实存在，但不受 UNIQUE 或 PRIMARY KEY 约束，或
> 3.  没有明确提供作为外键定义的一部分的父键列，并且父表没有 PRIMARY KEY，或者
> 4.  没有明确提供作为外键定义的一部分的父键列，并且父表的 PRIMARY KEY 由与子表中的子键不同数量的列组成。
> 
> 然后......“外键不匹配”错误[引发]。

```
> DELETE FROM Child;
Error: foreign key mismatch
> CREATE UNIQUE INDEX di ON Department(DepartmentId);
> DELETE FROM Child;
> 
```

# c# - 当我动态添加行时，RDLC 报告不显示图像

> ID：15469409
> 
> 赞同：0
> 
> 时间：2013-03-18T03:41:25.253
> 
> 标签：c#, asp.net, rdlc, datarow

我用数据行类初始化数据表。有一个图像字段。在我初始化图像后，RDLC 报告不显示图像，但显示其他列。我的 RDLC 报告包含一个图片框控件。我设置-

```
Image Source=Database
MIMM Type=Image/Bitmap
Value==Fields!Images.Value 
```

这是我的代码片段..

```
DataTable dt = new DataTable();

dt.Columns.Add("ImageId");
dt.Columns.Add("ImageName");
dt.Columns.Add("Images");
dt.Columns.Add("Barcode");

        DataTable mydata = GetDataSet();
        DataRow drow = dt.NewRow();

        drow["ImageId"] = mydata.Rows[0][0];
        drow["ImageName"] = mydata.Rows[0][1];
        drow["Images"] = mydata.Rows[0][2]; //This is image row
        drow["Barcode"] = mydata.Rows[0][3];
        dt.Rows.Add(drow);

        ReportDataSource rds = new ReportDataSource("DataSet1", dt);
        ReportViewer1.LocalReport.DataSources.Clear();
        ReportViewer1.LocalReport.DataSources.Add(rds);
        ReportViewer1.LocalReport.Refresh(); 
```

这里是报告查看器代码：

```
<rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana" 
    Font-Size="8pt" InteractiveDeviceInfos="(Collection)" 
    WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt">
 <LocalReport ReportPath="Reports\Report1.rdlc">
    </LocalReport>
</rsweb:ReportViewer> 
```

我已经更改了我的数据集图像数据类型 String.Byte[]。但没有运气。如果我在没有任何数据行的情况下设置我的数据表，那么图像会清楚地显示。我不知道为什么？我用谷歌搜索了它，但找不到任何完美的解决方案。请帮助我。（对不起我的英语不好。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T06:13:08.567

您需要使用指定列“图像”的类型

```
DataColumn column = new DataColumn("Images");
column.DataType = System.Type.GetType("System.Byte[]"); //OR the type you want 
```

之后将此列添加到您的表中

# c - 将数字输出写入数组

> ID：15469410
> 
> 赞同：-2
> 
> 时间：2013-03-18T03:41:32.087
> 
> 标签：c, arrays, output

我将如何将已计算的数字放入数组中？例如，如果我有以下功能：

```
int sum_even ( int p1, int p3, int p5, int p7, int p9, int p11){
even_total = array_1[1] + array_1[3] + array_1[5] + array_1[7] + array_1[9] + array_1[11];
printf("The sum of the even numbers: %d\n", even_total);
return;
}

int sum_odd (int p2, int p4, int p6, int p8, int p10, int p12){
odd_total = array_1[0] + array_1[2] + array_1[4] + array_1[6] + array_1[8] + array_1[10] + array_1[12];
printf( "The sum of the odd numbers: %d\n", odd_total);
return;
}

int total (int p1, int p2, int p3, int p4, int p5, int p6, int p7, int p8, int p9, int p10, p11, p12){
total_all = odd_total + even_total;
printf( "The total of the numbers is: %d\n", total_all);
return;
} 
```

现在说偶数和奇数的总和 (total_all) 是 18。我将如何拆分它们以便 array_2[1] 为 1 而 array_2[2] 为 8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:46:52.947

假设您想将整数值拆分为其数字作为字符，请尝试在整数上使用 itoa。

[http://www.cplusplus.com/reference/cstdlib/itoa/](http://www.cplusplus.com/reference/cstdlib/itoa/)

"char * itoa ( int value, char * str, int base ); 使用指定的基数将整数值转换为以空字符结尾的字符串，并将结果存储在 str 参数给定的数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:04:25.447

> 现在说偶数和奇数的总和 (total_all) 是 18。我将如何拆分它们以便 array_2[1] 为 1 而 array_2[2] 为 8？

```
array_2[1] = total_all / 10;
array_2[2] = total_all % 10; 
```

但要注意 C 数组是 0 索引的，所以你可能想要

```
array_2[0] = total_all / 10;
array_2[1] = total_all % 10; 
```

你为什么要这样做呢？

请注意，您的代码还有许多其他问题，例如您将奇数求和并将其称为偶数和，将偶数值求和并将其称为奇数和，提供您从未使用过的参数，声明要返回的函数`int`但不返回值...

编辑：

如果你想要 的三个低位数字`total_all`，你可以这样做（颠倒数组的顺序）：

```
array_2[0] = total_all % 10; // 1's place
array_2[1] = (total_all / 10) % 10; // 10's place
array_2[2] = (total_all / 100) % 10; // 100's place 
```

如果你想要`n`数字，你可以这样做：

```
int temp_tot = total_all;
for (int i = 0; i < n; i++)
{
    array_2[i] = temp_tot % 10;
    temp_tot /= 10;
} 
```

尝试理解代码，而不仅仅是复制它，否则你以后会卡住。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:49:15.813

```
#include <stdio.h>
#include <math.h>

int nSplit(int a[], int n){
    int p, d, i;
    p = (int)log10((double)n);//  n > 0

    d = n;
    for(i=p;i>=0;--i){
        a[i] = d % 10;
        d /=  10;
    }
    return p+1;
}

int main(void){
    int array[16] ={0};
    int len;
    len=nSplit(array, 18);
    {   //test print
        int i;
        for(i=0;i<len;++i)
            printf("%d\n", array[i]);
    }

    return 0;
} 
```

# mediawiki - MediaWiki Infobox_person 模板

> ID：15469411
> 
> 赞同：1
> 
> 时间：2013-03-18T03:41:52.810
> 
> 标签：mediawiki

我已经在我们的 Intranet 上安装了 Mediawiki，我们想使用[Template:Infobox_person](http://en.wikipedia.org/wiki/Template%3aInfobox_person)。很简单，我想。

我去了[Special:Export](http://en.wikipedia.org/wiki/Special%3aExport)并导出了模板。我还复制了 Common.css 文件并启用了 ParserFunctions。当我现在在我们的一个页面上包含信息框时，我在顶部看到了这个：

> {{#invoke:InfoboxImage|InfoboxImage|image=|size=|sizedefault=frameless|alt=|suppressplaceholder=yes}}

我觉得只是从模板中编辑它是错误的做法，但我不确定如何修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:01:42.267

Wikipedia 现在使用[Scribunto 扩展将](http://www.mediawiki.org/wiki/Extension%3aScribunto)[Lua](http://www.lua.org/)逻辑嵌入到模板中；您复制的代码从[Module:InfoboxImage](http://en.wikipedia.org/wiki/Module%3aInfoboxImage)调用一些代码。

# php - 使用网站上的自定义图像创建/使用自定义映射 API

> ID：15469413
> 
> 赞同：0
> 
> 时间：2013-03-18T03:42:15.727
> 
> 标签：php, javascript, html

所以我正在为我的大学建立一个网站，人们可以上网查看校园里所有免费食物的位置。我希望有免费食物的人能够注册他们的活动，将此活动存储在数据库中，并让学生能够在校园地图上查看所有已注册的活动。

这种体验类似于某人在 Google 地图上搜索 10 英里半径范围内的沃尔玛，然后看到所有有效位置上的图钉都掉了下来。

我真的不知道如何解决让人们在校园的特定位置注册他们的活动，然后在校园地图图像上的相应 XY 位置上放置相应的针脚的问题。另外，我想将此工具用于其他校园，因此我尝试以一种基本上可以将其应用于任何自定义图像的方式对逻辑进行编码。

是否有现有的 API 可以做到这一点，还是我必须自己编写代码？我查找了几个地图 API，但并没有真正找到我想要的任何东西。

PS如果有帮助，我是CS专业的，所以随意扔掉技术术语而不用担心我能够弄清楚，我真的不知道如何解决这个问题：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:58:52.663

实际上很基本的东西，只是一个大问题。对于地图，我可能会使用[html5 画布](http://www.w3schools.com/html/html5_canvas.asp)。使用 javascript 来识别他们在画布元素上单击位置的坐标，并将它们存储在数据库中的 2 个整数列中。

你有更具体的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:28:45.300

Google Maps API v3 实际上让您在提供自定义地图的同时仍能利用其所有出色的 API。我在这里找到了一个很好的教程：[https ://facepunch.com/showthread.php?t=1184658](https://facepunch.com/showthread.php?t=1184658)

# php - 检索变量中的文件名

> ID：15469418
> 
> 赞同：-2
> 
> 时间：2013-03-18T03:42:41.880
> 
> 标签：php

要将文件从文件夹移动到另一个文件夹，我使用以下代码：

```
$new_file = new File($file['destination']->getPath() . File::SEPARATOR . $file['file']->getName()); 
```

现在，我需要添加一个唯一 ID 并将文件名存储在数据库中。uniqid() 可以：

```
$new_file = new File($file['destination']->getPath() . File::SEPARATOR . uniqid() . '---' . $file['file']->getName()); 
```

结果是这样的文件名：514685b08e6db---SL004321_7_03-2013.pdf

现在，如何在变量中检索文件名以将其存储在 MySQL 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:46:52.630

您可以将其存储在变量中并使用，例如

```
$filename = uniqid() . '---' . $file['file']->getName(); //your filename
$new_file = new File($file['destination']->getPath() . File::SEPARATOR . $filename); 
```

# android - Where do I put my APK expansion file?

> ID：15469421
> 
> 赞同：0
> 
> 时间：2013-03-18T03:43:19.117
> 
> 标签：android, apk

I have 90MB of mp3 files that my media player app uses. I want to upload my `.apk` to google play but since my app is over 50MB I have to put my mp3 files into a expansion file. I have read the documentation here : [http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html) and I have created the expansion file like so ...

```
red@ubuntu:~/android/workspace/Album/res/raw$ zip -n .mp3 main.1.com.redcricket.Album.obb *mp3 
```

... but the documentation does not say where this file belongs in the android project directory hierarchy. Am I suppose to move the file `main.1.com.redcricket.Album.obb` to the `asset` directory?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:30:57.620

Expansion files are stored and managed separately from your APK and therefore don't go into the assets folder at all. When you upload the application to Google Play (whether as a draft or publish it), it gives you the option of uploading the expansion files as well.

# html - 单词间距在 Safari 中不起作用

> ID：15469422
> 
> 赞同：3
> 
> 时间：2013-03-18T03:43:22.543
> 
> 标签：html, css, browser, xhtml, safari

嗨，我希望有人可以帮助我解决我在 Safari 中遇到的问题。基本上我已经创建了一个[网站](http://www.islandtoislandshipping.com)

如果您查看导航栏的顶部菜单，Google Chrome、IE、Firefox 和 Opera 中存在单词和字母间距。但是，在 Safari 中打开此网站时，没有字间距。

这是代码复制并粘贴在底部：

```
 <nav id="top_menu">
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="destination.html">Destinations</a></li>
            <li><a href="products.html">Products</a></li>
            <li><a href="contact.html">Contact</a></li>
       </ul>
    </nav> 
```

这是这段代码的 CSS：

```
#top_menu {
        margin-left:170px;
        letter-spacing:1px;
        word-spacing:50px;
}

#top_menu li {
    display:inline-block;
    list-style:none;
    padding:5px;
    font:bold 14px Tahoma, Geneva, sans-serif;
    position:relative;
    bottom:40px;
}

#top_menu li a { 
    border-bottom: none; 
}

#top_menu a {
    color:#FFF;
    text-decoration: none; 
    border-bottom: 1px solid #7ac000; 
    padding-bottom: 2px; 
}

#top_menu a:hover { 
    color: #ff5400; 
    text-decoration: none; 
    border-bottom: 1px solid #ff5400; 
    padding-bottom: 2px; 
}

#top_menu a:active { 
    color: #ff5400; 
    text-decoration: none; 
    border-bottom: 1px solid #ff5400; 
    padding-bottom: 2px; 
    position: relative; top: 1px; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:31:24.957

嗨，如果您不介意使用的目的是什么，`word-spacing:50px;`如果该想法是在两次`<a>`使用`padding`之间留出空间`li`并消除`word-spacing``#top_menu`

```
#top_menu {
        margin-left:170px;
        letter-spacing:1px;
}

#top_menu li {
    display:inline-block;
    list-style:none;
    padding:5px 15px 5px 0;
    font:bold 14px Tahoma, Geneva, sans-serif;
    position:relative;
    bottom:40px;
} 
```

我知道这不是完美的答案，但希望这可以帮助你......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-21T09:04:23.363

只需像这样添加：

```
#top_menu {
     margin-left:170px;
     letter-spacing:1px;
     word-spacing:50px;
    -webkit-word-spacing:50px;
    -moz-letter-spacing:1
    -moz-word-spacing:50px;
    -webkit-letter-spacing:1
#top_menu li {
     display:inline-block;
     list-style:none;
     padding:5px;
     font:bold 14px Tahoma, Geneva, sans-serif;
     position:relative;
     bottom:40px;
 }

  #top_menu li a { 
     border-bottom: none; 
  }

  #top_menu a {
      color:#FFF;
      text-decoration: none; 
      border-bottom: 1px solid #7ac000; 
      padding-bottom: 2px; 
  }

  #top_menu a:hover { 
      color: #ff5400; 
      text-decoration: none; 
      border-bottom: 1px solid #ff5400; 
      padding-bottom: 2px; 
  }

  #top_menu a:active { 
      color: #ff5400; 
      text-decoration: none; 
      border-bottom: 1px solid #ff5400; 
      padding-bottom: 2px; 
      position: relative; top: 1px; 
  }
```

```
 <nav id="top_menu">
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="destination.html">Destinations</a></li>
            <li><a href="products.html">Products</a></li>
            <li><a href="contact.html">Contact</a></li>
       </ul>
    </nav>
```

# jquery - 带有 jquery 加载和发送数据的 Ruby on Rails

> ID：15469424
> 
> 赞同：3
> 
> 时间：2013-03-18T03:43:45.763
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, load

我想知道如何发送数据。我有以下代码

```
$( "#dialog" ).load('/events/relates ' + '#eventconfirm', { data: 'Hello World' }).dialog('open'); 
```

但它不起作用。我想要的是加载`event/relates`并只获取 selection `#eventconfirm`，这可行，但我想添加数据，以便控制器可以读取`params[:data]`并对其采取行动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:55:35.577

无需附加 url 并尝试在`.load`回调中调用插件，如

```
$("#dialog").dialog();//first initailize the plugin
//then load the content 
$( "#dialog" ).load('/events/relates#eventconfirm', { data: 'Hello World' },function(data){
 $(this).dialog('open');
}); 
```

[演示](http://jsfiddle.net/JwpzT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T09:19:31.887

**请试试这个：**

```
$('.div').load("/test/okay?test=1");

where test=1 is params 
```

# javascript - 切换 HTML 元素

> ID：15469426
> 
> 赞同：0
> 
> 时间：2013-03-18T03:44:44.263
> 
> 标签：javascript, html

我错过了什么让它切换？打开第二个帐户似乎是合乎逻辑的，但它只切换一次。

```
function ShowHide()
        {
           var right_e = document.getElementById('id1'); 
           var left_e = document.getElementById('id2'); 
           if (top.visible_id == 'right') {
               right_e.style.display = 'none'; 
               left_e.style.display = 'block'; 
               top.visible_id = 'left';
           } else {
               right_e.style.display = 'block'; 
               left_e.style.display = 'none'; 
               top.visible_id = 'right';
           }    
        }

<a onclick ="javascript:ShowHide()" href="javascript:;" >click here</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:48:55.893

我不知道是什么`top`，但你不需要在你的例子中使用它。只需检查哪个 div 可见：

```
function ShowHide()
    {
       var right_e = document.getElementById('id1'); 
       var left_e = document.getElementById('id2'); 
       if (right_e.style.display === 'block') {
           right_e.style.display = 'none'; 
           left_e.style.display = 'block'; 
       } else {
           right_e.style.display = 'block'; 
           left_e.style.display = 'none'; 
       }    
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T03:49:18.340

我认为您为 if 和 else 创建了相同的条件：

```
top.visible_id = 'right'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T03:53:58.280

```
function ShowHide()
{

   if (document.getElementById('id1').style.display == 'block') {
       document.getElementById('id1').style.display = 'none'; 
       document.getElementById('id2').style.display = 'block'; 
   } else {
       document.getElementById('id1').style.display = 'block'; 
       document.getElementById('id2').style.display = 'none'; 
   }       
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-18T03:59:54.073

如果您只想关闭每个元素的可见性，并且其中一个最初隐藏而另一个最初显示，请尝试使用 jQuery 的[`.toggle()`](http://api.jquery.com/toggle/).

```
function ShowHide() {
  $('#id1,#id2').toggle();
} 
```

# objective-c - 签到计数与地点计数不匹配

> ID：15469432
> 
> 赞同：1
> 
> 时间：2013-03-18T03:45:23.920
> 
> 标签：objective-c, facebook-graph-api, nsmutablearray, checkin

我正在寻找我最近的签到，以及找到地名。我目前要求 user_status 权限。我首先请求这样的数据：

```
-(void) makeCheckinRequest{
NSString *query =
@"{"
@"'checkins':'SELECT coords, page_id, timestamp FROM checkin WHERE author_uid= me()',"
@"'places':'SELECT name FROM place WHERE page_id IN (SELECT page_id FROM #checkins)',"
@"}";

NSDictionary *queryParam =
[NSDictionary dictionaryWithObjectsAndKeys:query, @"q", nil];
// Make the API request that uses FQL
[FBRequestConnection startWithGraphPath:@"/fql"
                             parameters:queryParam
                             HTTPMethod:@"GET"
                      completionHandler:^(FBRequestConnection *connection,
                                          id result,
                                          NSError *error) {
                          if (error) {
                              NSLog(@"Error: %@", [error localizedDescription]);
                          } else {
                              [self extractRelevantRecentCheckinsFor:result];
                              NSLog(@"Result: %@", result);
                          }
                      }]; 
```

}

...然后我截取此方法返回的数据：

```
-(void) extractRelevantRecentCheckinsFor:(id) graphObject{

NSDictionary *resultDict = (NSDictionary *)graphObject;
NSArray *data = [resultDict objectForKey:@"data"];
for (FBGraphObject *friendObj in data) {
    NSDate *date = [NSDate dateWithTimeIntervalSince1970:
                    [[friendObj objectForKey:@"timestamp"] intValue]];
    DLog(@"checkin date is %@", [[theStoryline.common dayAndTime] stringFromDate:date]);
} 
```

}

问题是`data`包含两个`FBGraphObjects`包含不匹配的项目计数。`FBGraphObject`带有键名的：有`checkins`15 个对象，所有对象都具有有效坐标。

`FBGraphObject`带有键名：有`places`14 个对象。

你怎么可能得到不同的数组大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:45:23.870

找到了答案：事实证明，每次您签到时，Facebook 都会向您返回一个“签到”列表，但是（至少是我编写多查询的方式）它会返回一个唯一的列表'地方'。这意味着我在一个地方登记了两次。

# c++ - C++ 最简单的键盘输入

> ID：15469434
> 
> 赞同：0
> 
> 时间：2013-03-18T03:45:28.670
> 
> 标签：c++, windows, mingw

从用户那里获取键盘输入的最简单方法是什么？不是您必须在控制台中输入数据的地方。我没有找到这方面的教程，我需要帮助。我现在只知道如何创建控制台应用程序。我使用 minGW 编译器和我使用 windows 7。所以，基本上，是否已经有一个用于键盘输入的库以及如何使用它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:53:42.677

在 Windows 中，您可以使用`_kbhit()`函数 from`conio.h`来确定按键是否可用。如果您不想`getch()`在没有用户输入时阻止调用，这很有用。

Using`_kbhit()`允许您在等待键盘输入时进行其他处理。但你可能只想等待。

```
int GetKeypress()
{
    while( !_kbhit() ) Sleep(25);
    return getch();
} 
```

对于更通用的解决方案，您可以查看该`ncurses`库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:47:32.020

这是一个简短的演示，可能是最简单的方法：

```
#include <conio.h>

int main(){ 
    int ch = getch();
    return 0;
} 
```

# javascript - 拆分方法：返回不同的部分

> ID：15469435
> 
> 赞同：0
> 
> 时间：2013-03-18T03:45:34.213
> 
> 标签：javascript, methods, split

我想要做的是让我的闰年函数只返回当用户以 MM/DD/YYYY 形式输入日期时的年份值。现在，我只使用一年，但我希望该功能要求用户以该表格输入日期并计算它是否是闰年。如何修改我当前的代码来做到这一点。我已经用 split 方法声明了一个新变量。谢谢！

```
function isLeaper() {
            var year = document.getElementById("isLeaper").value;
            var splitYear = year.split ('/');
            // 1\. If the year is divisible by 4, but not 100.
            if ((parseInt(splitYear) % 4) == 0) {
                if (parseInt(splitYear) % 100 == 0) {
                    if (parseInt(splitYear) % 400 != 0) {
                        alert(year + 'is not a leap year. Sorry!');
                        return "false";
                    }
                    if (parseInt(splitYear) % 400 == 0) {
                        alert(year + 'is a leap year. Hooray!');
                        return "true";
                    }
                }
                if (parseInt(splitYear) % 100 != 0) {
                    alert(year + 'is a leap year. Hooray!');
                        return "true";
                }
            }
            if ((parseInt(splitYear) % 4) != 0) {
                alert(year + 'is not a leap year. Sorry!');
                        return "false";
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:53:26.450

改变

```
var year = document.getElementById("isLeaper").value;
var splitYear = year.split ('/'); 
```

至

```
var year = document.getElementById("isLeaper").value;
var arr = year.split('/');
var splitYear = arr[arr.length - 1]; 
```

`year`如果变量的格式为 MM/DD/YYYY 和 YYYY，这将获得年份。

你可以试试这个：

```
$('#yourContainerID').html(year + 'is not a leap year. Sorry!').fadeIn('normal',function(){
    $(this).fadeOut();
}); 
```

有关详细信息，请参阅[`.fadeIn()`](http://api.jquery.com/fadeIn/) 和[`.fadeOut()`](http://api.jquery.com/fadeOut/)。

# html - 响应式 HTML 滚动框

> ID：15469437
> 
> 赞同：2
> 
> 时间：2013-03-18T03:46:13.910
> 
> 标签：html, css, responsive-design

我目前正在使用这个 HTML 滚动框：

```
<div style="height:107px;width:445px;border:1px 
solid #ccc;font:18px Arial; overflow:auto;"> 
This is an HTML Scrolling Box. </div> 
```

我网站上的所有文本和图像都是响应式的，事实上它们可以缩小到手机和平板电脑的大小。是否有任何可能的方法可以在上面的代码中添加某种类型的规则或一些简单的东西，使其也像我网站的其他部分一样响应？

我已经尝试过使用这段代码（没有运气）：

```
style='max-width:100%;' style='max-height:100%' border="0" 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T03:55:35.127

这就是你要找的东西[http://jsfiddle.net/ZXVA5/](http://jsfiddle.net/ZXVA5/)

你想给`height`和`width`一些百分比。

这里有一些内容和`overflow:auto`

[http://jsfiddle.net/ZXVA5/1/](http://jsfiddle.net/ZXVA5/1/)

# c - 我无法在 Eclipse 中运行 C 程序

> ID：15469438
> 
> 赞同：6
> 
> 时间：2013-03-18T03:46:22.580
> 
> 标签：c, eclipse

我已经在谷歌上搜索了大约 2 天。阅读并遵循了很多说明，但对我没有任何帮助（包括本网站中的一些说明；我知道人们已经在这里问过这个问题）。我已经下载了 Eclipse，安装了 C/C++ 插件（window 7、64 位），但是当我运行`HelloWorld.c`程序时，我收到一条弹出消息：

> 启动失败。未找到二进制文件。

这是我在 Eclipse 中所做的：

1.  Window-->Preference-->New CDT Project Wizard-->Makefile Project-->Binary Parswer，确保“PE Window Parser”前面有一个复选标记。
2.  Project-->Properties-->C/C++ Build-->Settings-->Binary Parsers，确保“PE Window Parser”的字体中有一个复选标记。
3.  Project-->Properties-->C/C++ Build-->Tool Chain Editor：在Current toolchain中，在Currect builder中选择：Cross GCC，选择：Gnu Make Builder。
4.  设置 Eclipse CDT 自动构建

以下是我用来创建项目的步骤：

1.  文件--> 新建--> C 项目。在“项目名称：”字段中输入“您好”。单击 Next 按钮，确保选中 Debug 和 Release，再次单击 Next 按钮，单击 Finish 按钮。
2.  右键Hello-->new-->Source File，输入HelloWorld.c，然后点击Finish按钮。输入以下代码：

    ```
    #include <stdio.h>
    int main()
    {
    printf("Hello, world!\n");
    return 0;
    } 
    ```

3.  保存并单击“锤子”图标以构建项目。然后我收到了这条消息：

> 做所有
> 
> 无法运行程序“make”：启动失败
> 
> 错误：在 PATH=[C:\eclipse_Juno;C:/Program Files (x86)/Java/jre7/bin/client;C:/Program Files (x86)/Java/jre7/bin 中找不到程序“make”； C:/Program Files (x86)/Java/jre7/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0 \;
> 
> 21:35:25 构建完成（耗时 280 毫秒）

1.  右键单击文本编辑器区域，运行方式-->本地 C/C++ 应用程序弹出一条消息说：“启动失败。找不到二进制文件”

我不确定我做错了什么。请指出为什么我无法在 Eclipse 中运行我的程序。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:07:13.660

问题是没有安装编译器，并且 eclipse 是一个集成开发环境，它本身没有集成编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-27T05:53:06.733

几分钟前我遇到了同样的问题。做这个：

编写您的程序，例如：

```
#include <stdio.h>

int main(){
    printf("Hello There\n");
    printf("salam");
} 
```

然后按`Ctrl`+ `B`。`Build All`您可以从`Project -> Build All`.

然后，转到`Run -> Run Configuration`左侧菜单，双击`C/C++ Application`（1），然后单击新打开的选项：“Sth Debug”（2）。现在，在主窗口`C/C++ Application:`的编辑文本下，单击`browse`选项（3）。打开您的工作区，打开您的项目，打开`Debug`文件夹（在每次构建后创建），然后选择一个与 同名的文件`ProjectFolderName`，然后单击`Run`(8)。

**重要提示：** 只要选择同名的文件，`ProjectFolderName`不带任何后缀即可。不要选择以:`sth.d`或. 结尾的文件`sth.o`。只需选择没有后缀的文件。

**重要说明2：** 您也可以`${workspace_loc}/${project_name}/Debug/${project_name}`输入edittext，但如果您使用的是Windows，请使用反斜杠（）而不是斜杠（/）。

[![看图片](../Images/1201b82c54119b4db0d8bd3e2c52c77a.png)](https://i.stack.imgur.com/iXKnB.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T12:05:16.450

让我逐步为您简单介绍一下。

1.  在 windows 中为 eclipse 下载 MinGw 或 Cygwin。
2.  安装其中任何一个。
3.  转到项目的构建属性并使您当前的编译器指向此安装目录。
4.  重新启动 Eclipse 并尝试构建程序。现在，它应该适合您的跑步。

**问题说明：**

*   找不到二进制文件：表示您的项目没有 .o 文件可供执行。只有在成功构建项目后才会创建此文件。
*   构建失败：是由于 Eclipse 无法使用“make”程序。这意味着，您的 Eclipse 没有编译器来构建项目。

# python - 此代码未显示正确答案

> ID：15469445
> 
> 赞同：0
> 
> 时间：2013-03-18T03:47:14.547
> 
> 标签：python, file-io, python-3.x

```
dictionary = open('dictionary.txt','r')
def main():
    print("part 4")
    part4()
def part4():
    naclcount = 0
    for words in dictionary:
        if 'nacl' in words:
            naclcount = naclcount + 1
    return naclcount
main() 
```

基本上它带有正确的答案 25，除非我在第 4 部分之前放入另一个函数，它将打印为 0。

```
def part1():
    vowels = 'aeiouy'
    vowelcount = 0
    for words in dictionary:
        words = words.lower()
        vowelcount = 0
        if len(words) == 8:
            if 's' not in words:
                for letters in words:
                    if letters in vowels:
                        vowelcount += 1
                if vowelcount == 1:
                    print(words)
    return words 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:54:44.737

您可能应该将文件名作为参数传递给 part4 函数，然后创建一个新的文件对象，因为当您遍历它一次时，它将停止返回新行。

```
def main():
    dict_filename = 'dictionary.txt'
    print("part 4")
    part4(dict_filename)

def part1(dict_filename):
    vowels = 'aeiouy'
    vowelcount = 0
    dictionary = open(dict_filename,'r')
    for words in dictionary:
        words = words.lower()
        vowelcount = 0
        if len(words) == 8:
            if 's' not in words:
                for letters in words:
                    if letters in vowels:
                        vowelcount += 1
                if vowelcount == 1:
                    print(words)
    return words

def part4(dict_filename):
    dictionary = open(dict_filename,'r')
    naclcount = 0
    for words in dictionary:
        if 'nacl' in words:
            naclcount = naclcount + 1
    return naclcount

main() 
```

此外，如果您希望能够将脚本用作导入模块或独立模块，您应该使用

```
if __name__ == '__main__':
    dict_filename = 'dictionary.txt'
    print("part 4")
    part4(dict_filename) 
```

代替`main`功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:02:14.990

能否请您粘贴您的另一个功能。除非您显示另一个功能，否则问题尚不清楚。

从我从你的问题和代码中推断出来的。我已修改（清理）您的代码。看看有没有帮助。

```
def part4(dictionary):
    words = dictionary.readlines()[0].split(' ')
    nacl_count = 0
    for word in words:
        if word == 'the':
            nacl_count += 1
        #print nacl_count
    return nacl_count

def part1(dictionary):
    words = dictionary.readlines()[0].split(' ')
    words = [word.lower() for word in words]
    vowels = list('aeiou')
    vowel_count = 0
    for word in words:
        if len(word) == 8 and 's' not in word:
            for letter in words:
                if letter in vowels:
                    vowel_count += 1
        if vowel_count == 1:
            #print(word)
            return word

def main():
    dictionary = open('./dictionary.txt', 'r')
    print("part 1")
    #part1(dictionary)
    print("part 4")
    part4(dictionary)

main() 
```

# jquery - 使用 jQuery 切换样式，但不要全部更改

> ID：15469446
> 
> 赞同：0
> 
> 时间：2013-03-18T03:47:18.633
> 
> 标签：jquery, css, styles, switch-statement

情况：我有两张样式表，一张有颜色信息（根据子文件夹切换），另一张有其他的。

我需要交换主 css 以调整按钮大小。

JS：

```
<script type="text/javascript" language="javascript" src="cookie.js"></script>
<script>
  if($.cookie("css")) {
     $("link").attr("href",$.cookie("css"));
  }
  $(document).ready(function() { 
  $("#nav li a").click(function() { 
     $("link").attr("href",$(this).attr('rel'));
     $.cookie("css",$(this).attr('rel'), {expires: 365, path: '/'});
     return false;
  });
}); 
```

HTML：

```
 <ul id="nav" style="float:right">
            <li><a href="#" rel="style1024.css">one</a></li>
            <li><a href="#" rel="style.css">two</a></li>
            </ul> 
```

效果很好，唯一的问题是切换器似乎也将颜色样式切换为单击的样式。可以用 id 标签解决吗？

我有这个：

```
<link rel='stylesheet' id='main-css'  href='style.css' type='text/css' media='all' />
<link rel='stylesheet' id='color-css'  href='teal.css' type='text/css' media='all' /> 
```

但是如何让 JS 只更改“main-css rel”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:54:51.770

您可以在 ID 上进行选择，就像在 CSS 中一样：

```
$("#main-css").attr("href",$.cookie("css")); 
```

# ruby-on-rails - Omniauth 和 Twitter 回调给出 TypeError

> ID：15469449
> 
> 赞同：0
> 
> 时间：2013-03-18T03:47:33.873
> 
> 标签：ruby-on-rails, ruby, twitter, omniauth

我正在关注本教程：[http](http://railscasts.com/episodes/235-omniauth-part-1?view=asciicast) : //railscasts.com/episodes/235-omniauth-part-1?view=asciicast 以使用 Omniauth 和 Devise 获得多个帐户以使用 Rails 3.2.12。在我使用 Twitter 进行身份验证后，它会重定向回`../auth/twitter/callback`oauth 令牌作为参数，并在我的`Authentication#create action`说明中说，

```
render :text => request.env["omniauth.auth"].to_yaml 
```

但是当页面呈现时，它会说：

```
TypeError

can't convert nil into String 
```

堆栈跟踪是：

```
omniauth-twitter (0.0.14) lib/omniauth/strategies/twitter.rb:23:in `+'
omniauth-twitter (0.0.14) lib/omniauth/strategies/twitter.rb:23:in `block in <class:Twitter>'
omniauth (1.1.3) lib/omniauth/strategy.rb:102:in `instance_eval'
omniauth (1.1.3) lib/omniauth/strategy.rb:102:in `block in compile_stack'
omniauth (1.1.3) lib/omniauth/strategy.rb:101:in `each'
omniauth (1.1.3) lib/omniauth/strategy.rb:101:in `inject'
omniauth (1.1.3) lib/omniauth/strategy.rb:101:in `compile_stack'
(eval):7:in `info_stack'
omniauth (1.1.3) lib/omniauth/strategy.rb:315:in `info'
omniauth (1.1.3) lib/omniauth/strategy.rb:328:in `auth_hash'
omniauth (1.1.3) lib/omniauth/strategy.rb:355:in `callback_phase'
omniauth-oauth (1.0.1) lib/omniauth/strategies/oauth.rb:58:in `callback_phase'
omniauth (1.1.3) lib/omniauth/strategy.rb:219:in `callback_call'
omniauth (1.1.3) lib/omniauth/strategy.rb:175:in `call!'
omniauth (1.1.3) lib/omniauth/strategy.rb:157:in `call'
omniauth (1.1.3) lib/omniauth/builder.rb:48:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.12) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `_run__3143814823160835356__call__2946912839493394460__callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.12) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.12) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.12) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.12) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.12) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.12) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.12) lib/rails/engine.rb:479:in `call'
railties (3.2.12) lib/rails/application.rb:223:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.12) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
/Users/ashley/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/ashley/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/ashley/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

我能做些什么来解决这个问题？我不知道从哪里开始或出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:26:51.747

Rails 告诉您它没有对 ["omniauth.auth"] 的引用，因此您在 nil 对象上调用 to_yaml。这通常表明设置变量的过程由于某种原因失败。

处理这些问题的一个非常棒的方法是使用 better_errors，当 rails 遇到错误时，它会打开一个非常酷的网页和交互式控制台（不过只能在开发环境中使用！

[http://railscasts.com/episodes/402-better-errors-railspanel](http://railscasts.com/episodes/402-better-errors-railspanel)有一个很棒的指南来做这件事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T15:45:02.147

我有同样的问题。通过更新omniauth-twitter gem 修复它

```
bundle update --source omniauth-twitter 
```

我在这里找到了这个提示： [https ://github.com/arunagw/omniauth-twitter/issues/30#issuecomment-19757839](https://github.com/arunagw/omniauth-twitter/issues/30#issuecomment-19757839)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:47:23.360

通过写来试试这个，渲染：text => env["omniauth.auth"]

这将在 omniauth.auth 中返回 hashie mash 对象

# extjs - ext js的缺点

> ID：15469451
> 
> 赞同：3
> 
> 时间：2013-03-18T03:48:12.737
> 
> 标签：extjs

我想在我的客户端的新应用程序中使用 ext js，Ext js 有很多我可以利用的小部件和 MVC 框架。任何人都可以对 ext js 的缺点有所了解吗？使用 ext js 时我需要牢记什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T04:26:24.267

我在一个复杂的大型应用程序中使用 ext js 已经一年多了。这些是我在使用 Ext JS 时遇到的一些缺点：

1.  我观察到我们的应用程序加载速度相对较慢。图书馆很大。在应用程序的预初始化期间必须加载大量 JS 代码。（需要使用 sb3 ext js SDK 工具来整合你所有的 ext js 源文件以提高性能）

2.  查找 CSS 选择器很乏味，并且无法扩展到其他非 ext js UI。我花了很多时间找出 CSS 选择器的正确定义。我认为它也没有在任何地方记录。所以我不能认真地快速定制。即使我们最终为 Ext 编写自定义 CSS，我们也无法将这个 CSS 重用于其他 UI 技术，例如 HTML，

3.  Ext 开发人员（资源）的可用性很少。然而，有大量的 jQuery 人才

Ext 的数据可视化/3D 图形可视化没有达到可以满足所有需求的标准（股票图表、蜡烛图等）。高图表/d3 在这里是可行的选择。

Ext js是单页应用，多页交互（浏览器前后按钮交互）需要实现url hash

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:34:33.530

1.  每位开发人员 400 美元，虽然比我会说的构建/集成 jQuery 小部件便宜。

2.  谷歌无法抓取，但如果您登录后，没关系。

3.  这是一个婊子的主题。Sencha 像 2 年前一样介绍了他们的 Neptune 主题，但它仍然勉强能用，这是他们自己的工程师在研究它的原因。

4.  有一些恼人的错误，让模型关联工作很糟糕。

不过还是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T07:21:44.020

首先，Ext js 对 SPA（单页应用程序）有好处。

ext js 的主要缺点： 1）在 IE 9 中运行缓慢，并且崩溃 2）内存泄漏 3）大量 DOM 对象 4）皮肤定制很困难。应该知道 CSS 或 SCSS 5) 总是要清理变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-07T17:31:06.833

我使用 extjs 和 sencha touch 超过 4 年。我能说的是（几乎）以上都不是真的。可能的缺点：

1.  如果没有 oop 经验，学习曲线可能会稍大一些。

2.  模型之间的复杂关系有点棘手。

3.  不是免费的，但是...

    如果您计划构建一个在浏览器中运行的企业应用程序，我不知道还有其他选择。

# java - 密码锁 (Java)

> ID：15469454
> 
> 赞同：0
> 
> 时间：2013-03-18T03:48:25.460
> 
> 标签：java, swing

我有一个需要创建的学校作业。下面是信息： 创建一个带有十个按钮的框架，标记为 0 到 9。要退出程序，用户必须依次单击正确的三个按钮，例如 7-3-5。如果使用了错误的组合，框架会变成红色。

我已经完成了框架和在线研究帮助的按钮，但我无法使功能正常工作。请看一下我的代码，并在此先感谢。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class ComboNumber extends JFrame implements ActionListener{

//variable declaration
int ans1 = 3;
int ans2 = 7;
int ans3 = 1;
int one, two, three;
String inData1, inData2, inData3;
JButton[] button;

//constructs the combolock object
public ComboNumber()
{
    //sets flowlayout
    getContentPane().setLayout(new FlowLayout());
    Container c = getContentPane();
    //creates buttons
    button = new JButton[10];
    for(int i = 0; i < button.length; ++i) {
        button[i] = new JButton("" + i);
        //adds buttons to the frame
        c.add(button[i]);
        //registers listeners with buttons
        button[i].addActionListener(this);
    }

    //sets commands for the buttons (useless)

    //sets title for frame
    setTitle("ComboLock");
}
//end combolock object

//listener object
public void actionPerformed(ActionEvent evt)
{
   Object o = evt.getSource();
   for(int i = 0; i < button.length; ++i) {
       if(button[i] == o) {
           // it is button[i] that was cliked
           // act accordingly
           return;
       }
   }
}
//end listener object

//main method
public static void main (String[] args)
{
    //calls object to format window
ComboNumber frm = new ComboNumber();

    //WindowQuitter class to listen for window closing
    WindowQuitter wQuit = new WindowQuitter();
    frm.addWindowListener(wQuit);

    //sets window size and visibility
    frm.setSize(500, 500);
    frm.setVisible(true);
}
//end main method
}
//end main class

//window quitter class
class WindowQuitter extends WindowAdapter
{
//method to close the window
public void windowClosing(WindowEvent e)
{
    //exits the program when the window is closed
    System.exit(0);
}
//end method
}
//end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:01:33.077

基本思想很简单。

你需要两件事。

1.  组合实际上是什么
2.  用户猜到了什么

所以。您需要添加两个变量。一个包含组合/秘密，另一个包含猜测。

```
private String secret = "123";
private String guess = ""; 
```

这使您可以根据需要进行组合；）

然后在您的`actionPerformed`方法中，您需要将最近的按钮点击添加到猜测中，将其与秘密进行检查，看看他们是否做出了正确的猜测。如果猜测的长度超过秘密中的字符数，则需要重置猜测。

```
public void actionPerformed(ActionEvent evt) {
    Object o = evt.getSource();
    if (o instanceof JButton) {
        JButton btn = (JButton) o;
        guess += btn.getText();
        if (guess.equals(secret)) {
            JOptionPane.showMessageDialog(this, "Welcome Overloard Master");
            dispose();
        } else if (guess.length() >= 3) {
            JOptionPane.showMessageDialog(this, "WRONG", "Wrong", JOptionPane.ERROR_MESSAGE);
            guess = "";
        }
    }
} 
```

# javascript - 检查对象是否是对象文字

> ID：15469456
> 
> 赞同：1
> 
> 时间：2013-03-18T03:48:47.463
> 
> 标签：javascript

从这里开始这个问题：[检查未定义](https://stackoverflow.com/questions/15423765/checking-for-undefined)

我想知道一个对象是否是 an `Array`，现在我需要测试一个 Object 是否专门是 an`Object`而不仅仅是 an 的子类`Object`

因为此时`Array`如果检查它是否是 an 的实例，则会返回 true `Object`。还有其他类型可以评估为真吗？

![在此处输入图像描述](../Images/5580053f759602c94632528af01aa8ad.png)

**额外信息**

我发现，如果您调用`toString`具有`Array`一个字符串元素的函数，它会解析为该字符串元素，而不是`"[object Array]"`因此您需要注意这一点。例如：

```
["str1", "str2"].toString() === "[object Array]" 
```

但

```
["str1"].toString() === "str1" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:50:02.803

像这样测试：

```
if ({}.toString.call(obj) == '[object Object]') {
  // is object
}

if ({}.toString.call(obj) == '[object Array]') {
  // is array
} 
```

`obj`是任何对象。与 , 等对象相同`RegExp`...`Date`在旧 IE 中，您可能需要这样做`({})`才能使其正常工作。

**演示：http:** [//jsbin.com/exofup/2/edit](http://jsbin.com/exofup/2/edit)

# python - NLTK 仅搜索名词同义词

> ID：15469461
> 
> 赞同：1
> 
> 时间：2013-03-18T03:49:21.390
> 
> 标签：python, nltk, wordnet

这是我正在编写的一个函数，用于检查名词列表中是否存在超义词和下义词。

```
def check_hyper_hypo(wordlist):
    returnlist=[]
    for word in wordlist: #by definition a base word has a word above and below heirachy
        x = wn.synsets(word)
        for syn in x:    
            if not(((len(syn.hypernyms()))==0)or((len(syn.hyponyms()))==0)):
                returnlist.append(word)
                break
    return returnlist 
```

我如何仅检查作为名词的同义词集的超/下义词的长度？例如

```
for syn in x:
    if ".n." in syn:
        #rest of code 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-18T23:18:54.547

你也可以试试

```
wordnet.synsets(word, pos='n') 
```

它只会返回名词，如果你想要动词，你应该使用`pos='v'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T03:57:53.687

简单地，

```
for syn in x:
    if syn.pos == 'n':
        #rest of code 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-09T20:04:19.397

另一种使用 wordnet 和列表理解的方法

```
print ([len(wn.morphy(tag,wn.NOUN)) for tag in tags]) 
```

# iphone - 为什么 [UIApplication sharedApplication].statusBarOrientation 返回错误值

> ID：15469462
> 
> 赞同：4
> 
> 时间：2013-03-18T03:49:44.127
> 
> 标签：iphone, uiinterfaceorientation

嗨，在我的应用程序中，我想知道`statusbarorientation`值。为此，我正在使用 `[UIApplication sharedApplication].statusBarOrientation`方法。实际上这个方法必须返回 4 用于横向和 2 用于肖像模式。但是这个方法以相反的方式返回值。用于风景 2 和肖像 4 的方法。请让我知道如何解决此问题。`supportedInterfaceOrientations`在我使用的方法中返回`UIInterfaceOrientationMaskAll;`

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-28T11:55:13.650

这可能是因为 UIDeviceOrientationLandscapeRight 被分配给 UIInterfaceOrientationLandscapeLeft 而 UIDeviceOrientationLandscapeLeft 被分配给 UIInterfaceOrientationLandscapeRight。

**这样做的原因是旋转设备需要沿相反方向旋转内容。**

从 iOS 8 开始，您应该使用 UITraitCollection 和 UITraitEnvironment API，以及这些 API 中使用的大小类属性，而不是使用 UIInterfaceOrientation 常量或以其他方式根据界面方向编写应用程序。

无论如何，以这种方式进行定向对我有用。

```
var orientation = UIApplication.SharedApplication.StatusBarOrientation;
switch (orientation)
{
case UIInterfaceOrientation.PortraitUpsideDown:
// The device is in portrait mode but upside down, with the device held upright and the home button at the top.
case UIInterfaceOrientation.Portrait:
// The device is in portrait mode, with the device held upright and the home button on the bottom.
case UIInterfaceOrientation.LandscapeLeft:
// The device is in landscape mode, with the device held upright and the home button on the left side.
case UIInterfaceOrientation.LandscapeRight:
// The device is in landscape mode, with the device held upright and the home button on the right side.
case UIInterfaceOrientation.Unknown
// The orientation of the device cannot be determined.
} 
```

还要考虑

> 但是，如果您的应用程序具有可旋转的窗口内容，则不应使用此方法任意设置状态栏方向。如果设备改变方向，此方法设置的状态栏方向不会改变。

# c# - 从 XML 文件中获取元素 ID

> ID：15469465
> 
> 赞同：0
> 
> 时间：2013-03-18T03:50:01.017
> 
> 标签：c#, xml, xsd

我对[Get Element Filtering by Attribute](https://stackoverflow.com/questions/15434107/get-element-filtering-by-attribute)的最后一个问题有未解决的问题，这是以下 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<assertions>
    <assertion id="SLM_CekNonNegative">
        <satisfied count="36"/>
        <unsatisfied count="4">
            <message xml:lang="id">(Record ID = ID_2) SLM: Jumlah bulan lalu, jumlah bulan laporan, jumlah hari tunggakan, dan jumlah tunggakan pokok tidak boleh kosong dan harus diisi >= 0</message>
            <message xml:lang="id">(Record ID = ID_2) SLM: Jumlah bulan lalu, jumlah bulan laporan, jumlah hari tunggakan, dan jumlah tunggakan pokok tidak boleh kosong dan harus diisi >= 0</message>
            <message xml:lang="id">(Record ID = ID_2) SLM: Jumlah bulan lalu, jumlah bulan laporan, jumlah hari tunggakan, dan jumlah tunggakan pokok tidak boleh kosong dan harus diisi >= 0</message>
            <message xml:lang="id">(Record ID = ID_2) SLM: Jumlah bulan lalu, jumlah bulan laporan, jumlah hari tunggakan, dan jumlah tunggakan pokok tidak boleh kosong dan harus diisi >= 0</message>
        </unsatisfied>
    </assertion>
    <assertion id="Base_CekJangkaWaktuMulaiLebihMudaJatuhTempo">
        <satisfied count="10"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="SLM_CekJumlahBulanKrgDrNilaiKontrak">
        <satisfied count="10"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekTanggalLebihMudaTanggalPelaporan">
        <satisfied count="10"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="SLM_CekNilaiKontrak">
        <satisfied count="2"/>
        <unsatisfied count="8">
            <message xml:lang="id">(Record ID = ID_10) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_9) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_8) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_7) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_6) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_5) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_2) Nilai kontrak harus > 0</message>
            <message xml:lang="id">(Record ID = ID_1) Nilai kontrak harus > 0</message>
        </unsatisfied>
    </assertion>
    <assertion id="SLM_CekGolNasabah">
        <satisfied count="9"/>
        <unsatisfied count="1">
            <message xml:lang="id">(Record ID = ID_2) Golongan nasabah tidak boleh diisi sandi bank pelapor sendiri</message>
        </unsatisfied>
    </assertion>
    <assertion id="BS-IF_CekSLMVls">
        <satisfied count="1"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="BS-IF_CekSLMIDR">
        <satisfied count="1"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekHubunganTidakTerkaitStatusLainnya">
        <satisfied count="8"/>
        <unsatisfied count="2">
            <message xml:lang="id">(Record ID = ID_3) Base: "Status hubungan dengan Bank" harus terisi sandi 9 jika Kolom "Klasifikasi Nasabah - Hubungan dengan bank" terisi sandi 2</message>
            <message xml:lang="id">(Record ID = ID_2) Base: "Status hubungan dengan Bank" harus terisi sandi 9 jika Kolom "Klasifikasi Nasabah - Hubungan dengan bank" terisi sandi 2</message>
        </unsatisfied>
    </assertion>
    <assertion id="Base_CekLembagaNilaiPemeringkat">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekNeracaMinNol">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekNilaiAgunanMinNol">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekPersentaseMaksimal100">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekLembaga-Tanggal-NilaiPeringkat">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekIdentifier">
        <satisfied count="1"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekNomor-JumlahAgunan">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekEligibilityJenisAgunan">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_CekSifat-GolonganPenerbitAgunan">
        <satisfied count="0"/>
        <unsatisfied count="0"/>
    </assertion>
    <assertion id="Base_cekPeriod">
        <satisfied count="1"/>
        <unsatisfied count="0"/>
    </assertion>
</assertions> 
```

我怎样才能得到`<assertion id="SLM_CekNonNegative">`which is的值`SLM_CekNonNegative`？

以下是我到目前为止的代码：

```
string pathasr = @"D:\HARPITNAS\dari mbak julia\logs\123456789-2012-09-30-BSMS10.xml-assertions2.xml";
List<string> msg = new List<string>();
XmlDocument doc = new XmlDocument();
doc.Load(pathasr);

foreach (XmlNode node in doc.DocumentElement)
{
     string thevaluethatiwantvariable = string.Empty;  
     thevaluethatiwantvariable  = ? ;

     if (node.LastChild.HasChildNodes == true)
     {
          string count = node.LastChild.ChildNodes.Count.ToString();
          foreach (XmlNode y in node.LastChild.ChildNodes)
          {
               string masg = y.InnerXml;
               msg.Add(masg);
          }
     }
} 
```

这段代码没有得到我想要的值。当我调试它时，我可以看到它没有得到正确的值。是否有可能获得我想要的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:13:17.813

好的，我有问题，

我得到了它`node.Attributes["id"].Value;`，`thevaluethatiwantvariable`谢谢

# mysql - 返回通过 DATA LOAD INFILE 生成的 id

> ID：15469468
> 
> 赞同：2
> 
> 时间：2013-03-18T03:51:02.737
> 
> 标签：mysql, performance, thread-safety, load-data-infile

当我使用 LOAD DATA INFILE 以快速、线程安全的方式批量插入一组记录时，是否可以获得 MySQL 创建的所有 auto_increment ID？

在 MSSQL 中，我可以使用 OUTPUT 子句将 ID 输出到临时表：

[http://msdn.microsoft.com/en-nz/library/ms177564.aspx](http://msdn.microsoft.com/en-nz/library/ms177564.aspx)

在 PostgreSQL 中，我可以保留一组序列号，如下所述：

[http://www.depesz.com/2008/03/20/getting-multiple-values-from-sequences/](http://www.depesz.com/2008/03/20/getting-multiple-values-from-sequences/)

在 MySQL 中，我可以使用触发器将 ID 发送到临时表，但我不能保证它不会包含在此期间完成的任何其他插入的 ID（即使使用事务）。

有没有其他方法可以返回通过批量进程插入的所有 ID，或者在使用它们之前有效地从 auto_increment 字段中保留一组 ID？

# c# - 为什么 Visual Studio 要求强命名程序集？

> ID：15469470
> 
> 赞同：2
> 
> 时间：2013-03-18T03:51:12.367
> 
> 标签：c#, .net, vb.net, visual-studio, assembly-signing

因为我使用的是未签名的第三方 DLL，所以我想让我的`VS2010`解决方案中的所有项目都未签名，所以我在所有项目中都未选中“签署程序集”。

当我现在尝试编译解决方案时，出现此错误：

> 无法发出程序集：引用的程序集“MyAssembly3”没有强名称

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:23:04.747

如果您不希望对程序集进行签名，但无论如何它们都已签名，也许您遇到了与我 [做] 相同的问题吗？

事实证明，它引用了一个“commonproperties.targets”文件，无论我做什么，都会导致签名选项被打开。

[从程序集中删除签名](https://stackoverflow.com/questions/15469534/remove-signing-from-assembly)

# ruby - 如何遍历 Ruby/Rails 关系

> ID：15469471
> 
> 赞同：0
> 
> 时间：2013-03-18T03:51:16.683
> 
> 标签：ruby, arrays, ruby-on-rails-3, object, iteration

我有一个模型，FacebookProfile，它有三列，a、b 和 c。

我通过执行以下操作调用此对象：

```
@facebook_profile = FacebookProfile.find_by_facebook_id(1) 
```

然后我可以访问列 a、b 和 c 的每个值

```
@facebook_profile.a # result: 1
@facebook_profile.b # result: 2
@facebook_profile.c # result: 3 
```

如果我有一组项目 a、b 和 c，我如何通过在 @facebook_profile 上调用这些来迭代？

我最好的猜测：

```
my_array = ["a", "b", "c"]
for i in my_array
  puts @facebook_profile.i
end 
```

预期输出：1、2、3

我已经看到了一种遍历所有列的方法，但是除了 a、b 和 c 之外，我还有其他列，所以我认为这行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:59:25.917

我认为您可以使用`send`运算符来执行以下操作

```
my_array = ["a","b","c"]

for i in my_array
  puts @facebook_profile.send(i.to_sym)
end 
```

# java - 解析并重新格式化电话号码

> ID：15469473
> 
> 赞同：0
> 
> 时间：2013-03-18T03:51:28.853
> 
> 标签：java, phone-number

我需要编写一段代码来计算用户输入的数字。如果用户输入的号码比典型的电话号码多（例如，通过输入`9589889898989`），程序必须显示错误并要求用户重新输入号码。如果用户输入了正确的数字（例如，。`5083588745`），程序应该以正确的格式打印数字。我怎样才能做到这一点？

**注意：**除了可以读取单个数字的代码之外，一切都是完整的。

```
public static void main(String[] args) {

    java.util.Scanner input = new java.util.Scanner(System.in);
    System.out.println("Please enter your 10 digit #.");
    long nrmNum = 1111111111;
    long phoneFmt = 0l;
    phoneFmt = (long) input.nextDouble();
    //get a 12 digits String, filling with left '0′ (on the prefix)

    java.text.DecimalFormat phoneDecimalFmt =
      new java.text.DecimalFormat("0000000000");

    String phoneRawString = phoneDecimalFmt.format(phoneFmt);

    java.text.MessageFormat phoneMsgFmt =
      new java.text.MessageFormat("({0}) - {1} - {2}");
    //suposing a grouping of 3-3-4
    String[] phoneNumArr = {
      phoneRawString.substring(0, 3),
      phoneRawString.substring(3, 6),
      phoneRawString.substring(6)
    };
    nrmNum /= 1;
    if (phoneFmt == nrmNum) {
        System.out.println("Your Phone number is:");
        System.out.println(phoneMsgFmt.format(phoneNumArr));
    } else {
        System.out.print("Please input 10 numbers for the phone#");
        System.out.println(phoneMsgFmt.format(phoneNumArr));
    }
} 
```

# jquery - jquery在元素列表中移动，按顺序添加和删除类

> ID：15469474
> 
> 赞同：2
> 
> 时间：2013-03-18T03:51:38.200
> 
> 标签：jquery, class, timeout, sequence

无法完全确定我对此的逻辑：漫长的一天。本质上，我有一个图像列表，我需要在重复为每个图像添加一个类并持续一段时间并每次清除该类时运行。

所以那是：

添加类，超时，删除类，重复下一个，如果最后转到第一个

这就是我所拥有的，它根本不起作用：

```
ul.find('.frame').each(function(){

    var thiis = $(this);

    thiis.addClass('showing');

    setTimeout(function(){
        thiis.removeClass('showing');
    }, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:12:01.093

```
var $f = $('ul').find('.frame');

function recursive(i) {
    $f.removeClass('showing').eq(i).addClass('showing');
    setTimeout(function () {
        recursive(++i % $f.length)
    }, 1000);
}
recursive(0); 
```

[http://jsfiddle.net/Wja4r/](http://jsfiddle.net/Wja4r/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:06:18.377

我想你想要`setInterval`- 重复直到你清除它。

```
var $items = $('.frame'),
    delay = 1000;
    $items.first().addClass('showing');

setInterval(function(){
  var $current = $items.filter('.showing'),
      $next = $current.next().length ? $current.next() : $items.first();

  $current.removeClass('showing');
  $next.addClass('showing');
}, delay); 
```

**演示：http:** [//jsfiddle.net/PELjq/2/](http://jsfiddle.net/PELjq/2/)

# android - 从 Android ActionBar 中隐藏选项卡

> ID：15469478
> 
> 赞同：1
> 
> 时间：2013-03-18T03:52:17.617
> 
> 标签：android, android-tabs

我使用应用程序设置来制作选项卡布局。它在布局中使用操作栏和 ViewPager 来显示许多选项卡。我目前有两个标签。

但是我想添加第三个选项卡，除非按下其中一个选项卡片段中的特殊按钮，否则它将被隐藏。在按钮按下时，我认为应用程序可以滑到隐藏选项卡并使其可见。向后滑动会使它再次隐藏。

1.  这在Android中甚至可能吗？:)
2.  我将如何使用我当前的选项卡管理形式来实现这一点？我发现了一些关于人们在布局中使用 TabActivity 或 TabHosts 的问题。使用这两种实现之一会更容易吗？

如果您需要任何源代码，请询问。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:51:48.187

是的，你问的都可以。

**简而言之**：

在您`onClickListener`指定`Button`使隐藏选项卡可见的情况下，您应该调用`ActionBar.addTab`.

**添加新的`Fragment`**

根据包含您的布局`Fragments`，您可以调用`FragmentTransaction.hide`and `FragmentTransaction.show`，否则我会假设您正在`Fragment`动态添加，因此使用 a `FragmentPagerAdapter`，在这种情况下将您的新添加`Fragment`到您的`List`.

**链接**

[操作栏](https://developer.android.com/reference/android/app/ActionBar.html#addTab%28android.app.ActionBar.Tab%29)- [addTab](https://developer.android.com/reference/android/app/ActionBar.html)

[FragmentTransaction](https://developer.android.com/reference/android/app/FragmentTransaction.html) -[隐藏](https://developer.android.com/reference/android/app/FragmentTransaction.html#hide%28android.app.Fragment%29)，[显示](https://developer.android.com/reference/android/app/FragmentTransaction.html#show%28android.app.Fragment%29)

您还应该阅读[添加片段文档](http://developer.android.com/guide/components/fragments.html#Adding)。

**这是一个非常基本的示例：**

**ViewPager 的适配器**

```
public class PagerAdapter extends FragmentPagerAdapter {

/**
 * The list of {@link Fragment}s used in the adapter
 */
private final List<Fragment> mFragments = new ArrayList<Fragment>();

/**
 * Constructor for <code>PagerAdapter</code>
 * 
 * @param fm The {@link FragmentManager} to use.
 */
public PagerAdapter(FragmentManager fm) {
    super(fm);
}

/**
 * Adds a new {@link Fragment} to the adapter
 * 
 * @param fragment The new {@link Fragment} to add to the list
 */
public void addFragment(Fragment fragment) {
    mFragments.add(fragment);
    notifyDataSetChanged();
}

/**
 * {@inheritDoc}
 */
@Override
public Fragment getItem(int position) {
    return mFragments.get(position);
}

/**
 * {@inheritDoc}
 */
@Override
public int getCount() {
    return mFragments.size();
    }
} 
```

**虚拟碎片**

```
public static final class DummyFragment extends Fragment implements View.OnClickListener {

    /**
     * Empty constructor as per the {@link Fragment} docs
     */
    public DummyFragment() {
    }

    /**
     * @param color The color to make the root view
     * @return A new instance of {@link DummyFragment}
     */
    public static DummyFragment getInstance(int color) {
        final Bundle bundle = new Bundle();
        bundle.putInt("color", color);
        final DummyFragment fragment = new DummyFragment();
        fragment.setArguments(bundle);
        return fragment;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final View rootView = inflater.inflate(R.layout.fragment_main_dummy, container, false);
        rootView.setBackgroundColor(getArguments().getInt("color"));
        return rootView;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        // This should be your Button
        view.setOnClickListener(this);
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public void onClick(View v) {
        // This adds the new tab
        ((MainActivity) getActivity()).addTab(2, Color.BLUE);
        }
   } 
```

**调用添加每个 Fragment**

```
 /**
 * Used to add a new {@link Fragment} to {@link ViewPager}'s adapter and
 * adds a new {@link Tab} to the {@link ActionBar}.
 * 
 * @param pageTitle The title of the tab
 * @param color The background color of the {@link Fragment}
 */
public void addTab(int pageTitle, int color) {
    mPagerAdapter.addFragment(DummyFragment.getInstance(color));
    mActionBar.addTab(mActionBar.newTab()
            .setText("" + pageTitle)
            .setTabListener(this));
} 
```

# apache - .htaccess - 如何为每个域动态设置标题？

> ID：15469482
> 
> 赞同：1
> 
> 时间：2013-03-18T03:52:42.457
> 
> 标签：apache, .htaccess, cors

我正在尝试让 CORS 在多个域中运行。

```
 Header add Access-Control-Allow-Origin "http://localhost, http://multiplay.io" 
```

但是，似乎大多数浏览器只支持一个域。有人告诉我，解决方案是为每个传入域设置标头。

您如何使用 .htaccess 文件执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T05:01:18.197

如果您只希望在两个值之间交替，您可以使用它`SetEnvIf`来区分两者。

```
SetEnvIf Referer "^http://localhost/" is_localhost
Header add Access-Control-Allow-Origin http://localhost env=is_localhost
Header add Access-Control-Allow-Origin http://multiplay.io env!=is_localhost 
```

可能有一个更优雅的解决方案，但类似上述（未经测试的）指令应该可以工作。

（请注意，伪造Referer 标头是微不足道的，因此在将Referer 标头用于几乎任何事情时，请注意伪造的Referer 标头的安全隐患。）

此外，如果您只想允许所有主机，您可以指定`*`而不是列出多个主机名：

```
Header add Access-Control-Allow-Origin * 
```

但我假设您已经知道这一点并且不想那么宽容。

# mysql - Mysql服务器上的分片

> ID：15469484
> 
> 赞同：0
> 
> 时间：2013-03-18T03:52:51.770
> 
> 标签：mysql, nosql

我刚刚在 Mongodb 上创建了一个集群（我使用了分片技术），我的问题是如何在 MYsql 上执行这种技术（分片）。它在 mysql.tks 中叫什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T03:58:23.657

在你之前问过这个问题的其他一些人，这里是他们得到的答案：

[MySQL分片方法？](https://stackoverflow.com/questions/5541421/mysql-sharding-approaches)
[MySQL（复制、集群）的扩展解决方案](https://stackoverflow.com/questions/189903/scaling-solutions-for-mysql-replication-clustering/195131)
[MySQL 分区/分片/拆分 - 走哪条路？](https://stackoverflow.com/questions/45879/mysql-partitioning-sharding-splitting-which-way-to-go)

# java - Android 如何在不调用 System.loadLibrary 的情况下找出原生实现？

> ID：15469487
> 
> 赞同：1
> 
> 时间：2013-03-18T03:53:21.677
> 
> 标签：java, android, native-methods

我正在深入研究 Android 的内核，以了解 Binder 在内核级别完成的方式以及它如何用于实现 Java 的 API。

目前我正在查看[android/os/Parcel.java](https://android.googlesource.com/platform/frameworks/base/+/742a67127366c376fdf188ff99ba30b27d3bf90c/core/java/android/os/Parcel.java)，有很多原生函数声明为原型，如下所示：

```
public final native int dataSize();
public final native int dataAvail();
... 
```

但是没有`System.loadLibrary`，所以我不知道这些原型的实现写在哪里。

我的问题与这些不同：

*   [Android NDK：未找到本机 xxxxxx 的实现](https://stackoverflow.com/questions/14978197/android-ndk-no-implementation-found-for-native-xxxxxx)
*   [Android NDK C++ JNI（没有找到原生的实现......）](https://stackoverflow.com/questions/2197889/android-ndk-c-jni-no-implementation-found-for-native)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:02:25.040

该库不必由使用本机库的类加载。在某个地方，在某个库中，需要有一个 C 函数`Java_android_os_Parcel_dataSize()`。它在哪里并不重要，它只需要在某个地方。你应该可以用`grep`它来找到它。

# php - 返回 php 中的列，其中列与请求的列不同

> ID：15469491
> 
> 赞同：0
> 
> 时间：2013-03-18T03:53:30.030
> 
> 标签：php, mysql

我有这个查询：

```
function find_Friends($UserID){
    $mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
    if (!$mysqli) {
        die('There was a problem connecting to the database.');
    }
    $query="SELECT * FROM Friends WHERE UserID = '$UserID' OR FriendID = '$UserID'";
    $result = $mysqli->query($query);
    //List all relevant
    while($row = $result->fetch_row()) {
       //Do logic   
    }
    $mysqli->close();
} 
```

所以假设查询是这样的：

```
SELECT * FROM Friends WHERE UserID = '123' OR FriendID = '123' 
```

我的查询返回以下内容：

```
UserID | FriendID
123    |  456 
```

我的问题是，如何在 php 中返回 FriendID 456？我基本上只想返回*不是*查询数字的列，在本例中为 123。

因此，如果我正在寻找 8434 并且我得到了以下回报：

```
UserID | FriendID
2356   | 8434 
```

我想返回 UserID，而不是 FriendID，但在原始查询中我想返回 FriendID。

我将如何在 php/mysql 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:59:06.183

如果您只关心数字而不关心它是哪一列，您可以将查询更改为：

```
SELECT IF(UserID='123',FriendID,UserID) AS Number FROM Friends WHERE UserID = '123' OR FriendID = '123' 
```

或者，如果您确实关心它是哪一个，则保持查询字符串原样并应用此 PHP：

```
while ($row = $result->fetch_row()) {
    if ($row['UserID'] == $UserID) {
        echo "Friend ID: " . $row['FriendID'];
    } else {
        echo "User ID: " . $row['UserID'];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:57:28.067

使用这个逻辑

```
while($row = $result->fetch_row()) {
   if($row['UserID'] == $UserID)
   {
        echo $row['FriendID'];
   } else {
        echo $row['UserID'];
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T03:57:31.207

只是`UNION`双方，提出您的查询：

```
SELECT FriendId
FROM Friends
WHERE UserId = @UserId
UNION ALL
SELECT UserId AS FriendId
FROM Friends
WHERE FriendId = @UserId 
```

这将返回一个简单列表中的所有朋友`@UserId`和所有用户。`@UserId`

# objective-c - 在Objective C中使用init作为复制转换器？

> ID：15469498
> 
> 赞同：1
> 
> 时间：2013-03-18T03:54:14.517
> 
> 标签：objective-c

我正在编写一些使用温度的代码。所以我想要一个可以容纳正在使用的比例（C/F）和值的类。我使类不可变（通过在实现类中使用类别）。我想要一个转换器。在 Java 中，我们通常会做一个静态方法并让它返回一个新实例，但在 OC 中你不能这样做，因为 + 方法是类方法并且无权访问实例属性。

所以我做了一个 init 方法，它采用当前的温度实例和我们希望它转换成的比例。做C++很久了，这就像是一个拷贝构造函数。

这里的问题是是否有更好的方法或被认为是标准做法的东西。因此，要获得转换，您将执行以下操作：

```
Temperature *freezingF = [[Temperature alloc]initWithScale:Fahrenheit andValue:@32.0];
Temperature *freezingC = [[Temperature alloc]initWith:freezingF andScale:Celsius];

assertThat(freezingC.value, is(@0)); 
```

（缩短变量名称以限制滚动...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:59:09.833

我会将支持值存储在 Kelvin 或 C 中，然后使用`setters`and `getters`, `setKValue:` `setFValue:`and `kValue`, `fValue`。因为它们在不同的单位中基本上是相同的值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T04:06:54.863

为什么不在`convertTo:`新单元中添加一个返回新的不可变温度实例的实例方法？

```
- (Temperature *)convertTo:(TemperatureScale)scale {
    float newValue = ... // calculate new value
    return [[Temperature alloc] initWithScale:scale andValue:newValue];
} 
```

然后你的代码变成：

```
Temperature *freezingF = [[Temperature alloc]initWithScale:Fahrenheit andValue:@32.0];
Temperature *freezingC = [freezingF convertTo:Celsius]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:49:35.137

根据此处的讨论，另一种选择是：

```
+(Temperature *)convert:(Temperature *)from toScale:(TemperatureScale)newScale; 
```

这将被称为：

```
Temperature *freezingF = [[Temperature alloc]initWithScale:Fahrenheit andValue:@32];
Temperature *freezingC = [Temperature convert:freezingF toScale:Celsius]; 
```

这是基于 NSNumber 类方法示例：numberWithFloat、Int 等。

# css - 在 CSS TRANSFORM 之后消除元素底部的空白空间

> ID：15469499
> 
> 赞同：2
> 
> 时间：2013-03-18T03:54:16.157
> 
> 标签：css, transform

我的`iframe`网页上显示了一个内容。我希望`iframe`在所有设备上都能响应，所以我使用 CSS 转换来适应大多数屏幕宽度。唯一的问题是当屏幕重新调整大小并且执行 CSS 转换时，它会在`iframe`. 有没有办法摆脱空白。可以用jquery解决吗？

访问[http://vintagebase.com](http://vintagebase.com)

下面是示例响应式 CSS

```
---#Tablet (Portrait)---

@media only screen and (min-width: 768px) and (max-width: 959px) {
  body:after {
    content: "768 to 959px";
    background-color: hsla(270,60%,40%,0.7);
  }

  #iframe1{
    width: 125%; 
    -moz-transform:           scale (.8);
    -moz-transform-origin:    0 0;
    -o-transform:             scale(.8);
    -o-transform-origin:      0 0;
    -webkit-transform:        scale(.8);
    -webkit-transform-origin: 0 0;
    -ms-transform:            scale(.8);
    -ms-transform-origin:     0 0;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:08:51.117

您正在将 iframe 高度设置为巨大的。不要那样做。而是让它100％。

# vba - 像 goto 函数一样运行的 VBA 代码：“Ctrl-[”和“F5”

> ID：15469500
> 
> 赞同：3
> 
> 时间：2013-03-18T03:54:43.170
> 
> 标签：vba, excel

是否有任何模拟普通`goto`Excel 函数`Ctrl`+`[` 和的 VBA 代码`F5`？

**进一步举例说明：**

在这个[Problem.xlsx](https://docs.google.com/file/d/0B4cYOk7H1SuXbzVqX3dWdWtmOVU/edit)中有两个工作表`Alpha`- 和`Beta`.

我想要一个代码

1.  在工作表的单元格上加一个`Ctrl`+ （即`[`在单元格`A2`中`Alpha`获取 Beta!B5 引用）
2.  以便跳转到工作表的单元格`B5`（`Beta`使用 Beta!B5 参考，进行跳转）
3.  向右移动一个单元格，即工作表`C5`的一个单元格`Beta`并将该单元格着色为黄色
4.  最后做一个`F5`回到工作表`A2`的单元格`Alpha`

我在各种关键字上搜索了 2 个小时，`goto`但无济于事。`ctrl-[``F5``previous selection`

附加说明：

我正在尝试模拟 goto 函数 Ctrl-[ 和 F5 以便我所在的任何活动单元格（带有指向另一个工作表中另一个单元格的链接），VBA 代码可以执行跳转，进行颜色着色并跳转回原单。*即以下代码过于严格*

```
Sub JumpColourJump()
    Worksheets("Beta").Range("B5").Offset(, 1).Interior.Color = vbYellow
    Worksheets("Alpha").Range("A2").Select
End Sub 
```

代码应该**灵活**地跳转到同一文件或活动单元格所引用的另一个文件中的任何工作表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:04:35.620

为了在页面之间来回走动，这样的事情会起作用。

```
'follow local hyperlink
Application.Goto Reference:=Worksheets("Alpha").Cells(1, 1).FormulaR1C1
'color the cell to the right
ActiveCell.Offset(0, 1).Interior.Color = vbYellow
'return using the same method 
```

然后，您可以使用`ActiveCell.Offset(row, col)`获取正确的单元格并执行操作，并使用相同的方法返回。

* * *

为了返回之前的位置，你可以将它保存在一个变量中，

```
Dim returnSheet As String, returnCell As String
returnSheet = ActiveSheet.Name
returnCell = CStr(ActiveCell.Address(False, False))
'Jump to cell, do your magic
Application.Goto Reference:=Worksheets(returnSheet).Range(returnCell) 
```

**或者**对于从一个单元到另一个单元的多次跳转，一个类模块**就像一个实现推送和弹出功能的堆栈**将是理想的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:53:40.303

您的大部分代码都可以通过录制宏来生成，但更复杂的部分似乎是：

*   导航到引用所选单元格的第一个单元格 -[这篇关于超级用户的帖子](https://superuser.com/a/219185/138849)看起来包含一些很好的建议
*   返回上一张表 - 您可以在函数开始时引用活动表，然后在之后恢复它，即：

```
Dim initalSheet As Worksheet
' Take a reference to the current sheet
Set initialSheet = ActiveSheet

' *** Perform changes here ***

' Return to the initially selected sheet
initialSheet.Select 
```

# perl - Net::SSH2 模块如何知道连接的另一端已完成发送数据？

> ID：15469503
> 
> 赞同：1
> 
> 时间：2013-03-18T03:54:45.847
> 
> 标签：perl, libssh2

我使用 SSH2 模块已经有一段时间了，发现它工作得很好。我总是觉得困难的部分是告诉返回的数据何时完成。例如，我在互联网上找到的这段代码

```
my $ssh2 = new Net::SSH2();
$ssh2->connect('127.0.0.1') or die $!;
$ssh2->auth_password('bob', 'smith');
if(!$ssh2->auth_ok()) { die $!; }
my $channel = $ssh2->channel();
$channel->shell();
print $channel "ls -l\n";
while(<$channel>)
{
  print $_;
} 
```

这似乎“知道”何时到达流的末尾，因为一旦返回最后一行，它就会立即返回。我想知道的是它是如何知道数据已经完成的？提示没有返回，所以我猜它会寻找提示。如果其他东西返回一个看起来像提示的字符串会发生什么？它会停止吗？

# java - 如果存在命令行值，则覆盖属性文件

> ID：15469504
> 
> 赞同：5
> 
> 时间：2013-03-18T03:54:46.703
> 
> 标签：java, properties, command-line-arguments

`config.properties`如果命令行不包含除 config.properties 文件位置之外的任何参数，我有一个程序将从文件中读取所有内容。下面是我的 config.properties 文件-

```
NUMBER_OF_THREADS: 100
NUMBER_OF_TASKS: 10000
ID_START_RANGE: 1
TABLES: TABLE1,TABLE2 
```

如果我像这样从命令提示符运行我的程序-

`java -jar Test.jar "C:\\test\\config.properties"`

`config.properties`它应该从文件中读取所有四个属性。但是假设如果我像这样运行我的程序-

`java -jar Test.jar "C:\\test\\config.properties" 10 100 2 TABLE1 TABLE2 TABLE3`

然后它应该从参数中读取所有属性并覆盖 config.properties 文件中的属性。

下面是我的代码，在这种情况下工作正常 -

```
public static void main(String[] args) {

        try {

            readPropertyFiles(args);

        } catch (Exception e) {
            LOG.error("Threw a Exception in" + CNAME + e);
        }
    }

    private static void readPropertyFiles(String[] args) throws FileNotFoundException, IOException {

        location = args[0];

        prop.load(new FileInputStream(location));

        if(args.length >= 1) {
            noOfThreads = Integer.parseInt(args[1]);
            noOfTasks = Integer.parseInt(args[2]);
            startRange = Integer.parseInt(args[3]);

            tableName = new String[args.length - 4];
            for (int i = 0; i < tableName.length; i++) {
                tableName[i] = args[i + 4];
                tableNames.add(tableName[i]);
            }
        } else {
            noOfThreads = Integer.parseInt(prop.getProperty("NUMBER_OF_THREADS").trim());
            noOfTasks = Integer.parseInt(prop.getProperty("NUMBER_OF_TASKS").trim());
            startRange = Integer.parseInt(prop.getProperty("ID_START_RANGE").trim());
            tableNames = Arrays.asList(prop.getProperty("TABLES").trim().split(","));
        }

        for (String arg : tableNames) {

            //Some Other Code

        }
    } 
```

**问题陈述：-**

现在我要做的是-假设是否有人正在运行这样的程序

`java -jar Test.jar "C:\\test\\config.properties" 10`

然后在我的程序中，它应该只覆盖`noOfThreads`-

```
noOfThreads should be 10 instead of 100 
```

假设那个人正在运行这样的程序——

`java -jar Test.jar "C:\\test\\config.properties" 10 100`

然后在我的程序中，它应该覆盖`noOfThreads`并且`noOfTasks`只-

```
noOfThreads should be 10 instead of 100
noOfTasks should be 100 instead of 10000 
```

以及可能的其他用例。

谁能建议我如何实现这种情况？谢谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T04:11:08.463

定义命令行输入时如下

`java -jar Test.jar "C:\\test\\config.properties" 10 100`

这意味着必须始终提供`noOfThreads`覆盖`noOfTasks`。

为了解决这个问题，您可以在命令行上将它们指定为系统属性以及文件位置，否则文件位置也有默认位置。例如： -

`java -jar -Dconfig.file.location="C:\\test\\config.properties" -DNUMBER_OF_THREADS=10 Test.jar`

然后。

1.  将文件属性读入`Properties`.
2.  遍历属性中的键并找到对应的`System.getProperty()`.
3.  如果找到值，则覆盖属性中的相应条目。

这样，无论您引入多少新属性，您的代码都将始终保持不变。

您可以更进一步，将所有这些封装在一个`PropertyUtil`还提供实用方法（如`getIntProperty()`等）的方法中`getStringProperty()`。

```
import java.io.FileInputStream;
import java.io.IOException;
import java.util.Properties;

public class PropertyUtil {

  private static final String DEFAULT_CONFIG_FILE_LOCATION = "config.properties";

  private String configFileLocation;

  private Properties properties;

  public PropertyUtil() throws IOException {

    this(DEFAULT_CONFIG_FILE_LOCATION);
  }

  public PropertyUtil(String configFileLocation) throws IOException {

    this.configFileLocation = configFileLocation;
    this.properties = new Properties();
    init();
  }

  private void init() throws IOException {

    properties.load(new FileInputStream(this.configFileLocation));

    for (Object key : this.properties.keySet()) {

      String override = System.getProperty((String) key);

      if (override != null) {

        properties.put(key, override);
      }
    }
  }

  public int getIntProperty(String key) {

    return this.properties.contains(key) ? Integer.parseInt(properties.get(key)) : null;
  }

  public String getStringProperty(String key) {

    return (String) this.properties.get(key);
  }
} 
```

例子。

配置属性

```
NUMBER_OF_THREADS=100
NUMBER_OF_TASKS=10000
ID_START_RANGE=1
TABLES=TABLE1,TABLE2 
```

覆盖`NUMBER_OF_THREADS`.

`java -jar -Dconfig.file.location="C:\\test\\config.properties" -DNUMBER_OF_THREADS=10 Test.jar`

将“NUMBER_OF_THREADS”读为 int 的简写示例。

```
new PropertyUtil(System.getProperty("config.file.location")).getIntProperty("NUMBER_OF_THREADS"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T04:07:47.853

而是创建一个循环。

```
List<String> paramNames = new ArrayList<String>{"NUMBER_OF_THREADS", "NUMBER_OF_TASKS", 
            "ID_START_RANGE", "TABLES"}; // Try to reuse the names from the property file
Map<String, String> paramMap = new HashMap<String, String>();
...
// Validate the length of args here
...
// As you table names can be passed separately. You need to handle that somehow. 
// This implementation would work when number of args will be equal to number of param names
for(int i = 0; i< args.length; i++) {
   paramMap.put(paramNames[i], args[i]); 
}

props.putAll(paramMap);
... // Here props should have it's values overridden with the ones provided 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:06:27.887

```
Properties properties = new Properties();
properties.load(new FileInputStream("C:\\test\\config.properties")); 
```

然后根据您的命令行参数将各个属性设置为：

```
setProperty("NUMBER_OF_THREADS", args[1]);
setProperty("NUMBER_OF_TASKS", args[2]); 
```

这不会覆盖现有的 config.properties 文件。

# c# - 滚动条到达底部时Gridview自动加载数据

> ID：15469507
> 
> 赞同：1
> 
> 时间：2013-03-18T03:54:58.617
> 
> 标签：c#, c#-4.0, gridview, devexpress, scrollbar

大家好，我有一个示例 gridview![在此处输入图像描述](../Images/8814bf19f43f0675349a5c604b7b64ed.png)

这就是我想要发生的事情。

当我打开表单时，我将前 100 个数据从服务器加载到 gridview 中。当我向下滚动并到达滚动条的末尾时，我想从 101 加载另一个数据 - 200。所以 gridview 中的数据是 1 到 200。如何确定滚动条是否到达末尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T07:00:29.283

根据您使用的 XtraGrid 版本 - 也许您应该查看[InstantFeedback](http://www.devexpress.com/Products/NET/Controls/WinForms/Grid/instant-feedback.xml)

它是一个数据源，当它们进入视图时动态获取它们。

这样做的好处是——它是一个标准的 DevExpress 组件——所以你不必自己发明任何东西。

或者：

您可以通过以下方式强制执行该行为：

```
 private bool _working = false;
    private void view_RowStyle(object sender, RowStyleEventArgs e)
    {
      if(_working) return;

      var view = sender as GridView;
      if (view != null)
      {
        int lastRowIndex = (view.GridControl.DataSource as BindingSource).Count;
        if (view.IsRowVisible(lastRowIndex) == RowVisibleState.Visible)
        {
          _working = true;
          //go get more rows.
          _working = false;
        }
      }
    } 
```

这假设您正在使用 a `BindingSource`（如果没有，您必须更改强制转换类型）。

我处理该`RowStyle`事件是因为该事件中的代码“一直”执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T08:22:36.450

`Scroll`您可以通过处理GridControl 的嵌入式滚动条的事件来处理滚动到结束（以及任何其他条件） 。
以下是方法细节：

```
var sb = GetScrollBar(gridControl1, ScrollBarType.Vertical);
sb.Scroll += new ScrollEventHandler(sb_Scroll);
//...
void sb_Scroll(object sender, ScrollEventArgs e) {
    var scrollBar = sender as DevExpress.XtraEditors.ScrollBarBase;
    if(e.NewValue == (scrollBar.Maximum - scrollBar.LargeChange)) {
        MessageBox.Show("Last row is reached!");
    }
}
ScrollBarBase GetScrollBar(GridControl gridControl, ScrollBarType type) {
    foreach(Control c in gridControl.Controls) {
        var scrollBar = c as ScrollBarBase;
        if(scrollBar != null && scrollBar.ScrollBarType == type)
            return scrollBar;
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T07:15:34.507

您可以获取显示的行数并根据加载的总行数进行计算，并检查 TopRowChanged 事件并查看是否需要加载更多行。对于这种情况，这是一种更手动的方法。

您也可以在服务器模式下使用网格来为您执行此操作。

问候，米舒

# linux - 嗅探IOCTL和串口通信

> ID：15469511
> 
> 赞同：0
> 
> 时间：2013-03-18T03:55:49.587
> 
> 标签：linux, serial-port, ioctl, sniffer

我正在尝试反转 90 年代早期逻辑分析仪及其 PC 软件使用的协议。该设备通过 RS-232（专有接线）连接并与 DOS 程序通信，在 DOSBOX 上成功运行。

我可以使用原始软件控制设备，但使用自定义程序从分析仪下载数据会很有用，但这样做我需要知道串行端口上发生了什么。

需要知道串行端口设置的模式是什么，而我确定数据速率是 1200 或 9600 bps（可在设备上配置）我不知道流量控制（我猜它是 RTS/CTS）。
我还需要在不干扰他们通信的情况下利用程序和设备之间的对话。
用另一个程序（cutecom/minicom）读取串行端口会阻止仿真器从硬件接收数据。

所以，总结一下，我需要知道的是：

*   /dev/ttyS0 上设置了什么配置（我认为是通过 IOCTL 调用）
*   程序和设备之间发生了什么。

我正在考虑编写一个充当标准 c 库代理的库（通过 LD_PRELOAD），但必须有一种更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:50:48.877

我使用[ttyrpld](http://ttyrpld.sourceforge.net/)进行 tty 嗅探。我将它移植到 PPC 并在 2.6.32 上运行。它将板上的所有 tty 流量记录到文件中，每个 tty 一个。效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:39:38.460

您可以使用`slsnif`(Serial Line SNIFfer)。

[http://linux.die.net/man/1/slsnif](http://linux.die.net/man/1/slsnif)

这是 sourceforge 项目的链接，您可以下载它。我不相信它带有任何现代发行版，但我可能是错的，所以首先检查你的发行版的软件存储库。

[http://sourceforge.net/projects/slsnif/](http://sourceforge.net/projects/slsnif/)

# css - 来自单个 UL 的具有相反对齐方式的两列列表？

> ID：15469514
> 
> 赞同：4
> 
> 时间：2013-03-18T03:56:05.637
> 
> 标签：css, layout, alignment

如何制作一个两列堆叠列表，一个左对齐，一个右对齐的`<UL>`元素？到目前为止，当我需要像块级元素一样堆叠元素时，我只能让元素彼此相邻浮动。

**所需布局（来自 PSD）：**

![所需布局](../Images/2d3c4129d2b62013e3ff93d4f00799fe.png)

**到目前为止我所拥有的：** ![当前布局](../Images/62a6acc187ae6e623cc7a7762fe2b51f.png) **HTML：**

```
<nav>
    <ul class="top_nav">
        <li class="group_a"><a href="#">Hitched</a></li>
        <li class="group_a"><a href="#">Hatched</a></li>
        <li class="group_a"><a href="#">Hello</a></li>
        <li class="group_b"><a href="#">Our Story</a></li>
        <li class="group_b"><a href="#">Details</a></li>
        <li class="group_b"><a href="#">Readymade</a></li>
    </ul>
</nav> 
```

**CSS（SCSS）：**

```
header {
    padding-top: $row / 4;
    padding-left: $cols*2 - $gut;
    padding-right: $cols*2 - $gut;
    padding-bottom: $row / 3;
    .top_nav {
        .group_a {
            display: inline-block;
            float: left;
        }
        .group_b {
            display: inline-block;
            float: right;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:04:42.677

如果您可以重新排列 html 元素`group_a`并`group_b`交替排列，那么您可以使用`clear`来实现此目的：

**HTML**

```
<nav>
    <ul class="top_nav">
        <li class="group_a"><a href="#">Hitched</a></li>
        <li class="group_b"><a href="#">Our Story</a></li>
        <li class="group_a"><a href="#">Hatched</a></li>
        <li class="group_b"><a href="#">Details</a></li>
        <li class="group_a"><a href="#">Hello</a></li>
        <li class="group_b"><a href="#">Readymade</a></li>
    </ul>
</nav> 
```

**SCSS**

```
nav {
    padding-top: $row / 4;
    padding-left: $cols*2 - $gut;
    padding-right: $cols*2 - $gut;
    padding-bottom: $row / 3;
    .top_nav {
        .group_a {
            display: inline-block;
            float: left;
            clear: both;
        }
        .group_b {
            display: inline-block;
            float: right;
        }
    }
} 
```

**[演示](http://jsfiddle.net/e9jjR/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T08:19:49.537

或者您可以`float: left;`只设置 for`.group_a`和`text-align: right;`for `.group_b`：

**CSS**

```
.group_a {
  clear: both;
  float: left;
}
.group_b {
  text-align: right;
} 
```

[工作示例](http://codepen.io/anon/pen/bfFjp)

这样您就不必更改`li`订单。请记住，您可能会在 lte IE7 中遇到一些问题。

# ios - 使用陀螺仪检测物体是否是直的

> ID：15469518
> 
> 赞同：0
> 
> 时间：2013-03-18T03:56:47.263
> 
> 标签：ios, objective-c, xcode

我想知道是否可以使用 iOS 陀螺仪来检测相机正在拍摄的物体（某人的物理照片）是否是直的。这意味着也许通过使用 iOS 相机，我可以知道物理照片是否是直的。有谁知道这是否可以做到？如果是这样，有人可以提供一个例子吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:28:03.607

使用 的[`gravity`](https://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMDeviceMotion_Class/Reference/Reference.html#//apple_ref/occ/cl/CMDeviceMotion)属性`CMDeviceMotion`，它包含加速度计和陀螺仪数据。

另一种方法是检测图像中的直线，并查看这些直线是水平的还是垂直的。在大多数场景中，当最突出的直线是水平或垂直时，相机的方向是正确的。您可以在边缘过滤的图像上使用[霍夫变换来做到这一点。](http://en.wikipedia.org/wiki/Hough_transform)

# javascript - 骨干路由，#标签是什么？

> ID：15469519
> 
> 赞同：0
> 
> 时间：2013-03-18T03:57:17.210
> 
> 标签：javascript, backbone.js

我刚刚开始一个已经在使用 Backbone 的网络项目，直到现在我还没有做过任何网络。我一直在阅读文档并阅读路由器（[http://thomasdavis.github.com/2011/02/07/making-a-restful-ajax-app.html](http://thomasdavis.github.com/2011/02/07/making-a-restful-ajax-app.html)和[http://backbonetutorials.com/what- is-a-router/#/route/action](http://backbonetutorials.com/what-is-a-router/#/route/action)），但我不确定我是否理解其中的基本内容。

# 用于骨干路由器的标签是什么？我用谷歌搜索并看到 # 用于指向页面中的特定点，但除此之外，我不确定骨干如何使用它。就像在这个页面上： http: [//backbonetutorials.com/what-is-a-router/#/route/action](http://backbonetutorials.com/what-is-a-router/#/route/action)他们这样说：

```
Also note that routes interpret anything after "#" tag in the URL. All links in your application should target "#/action" or "#action". (Appending a forward slash after the hashtag looks a bit nicer e.g. http://example.com/#/user/help) 
```

但这实际上意味着什么？我不太明白。很抱歉这个菜鸟问题，但我真的想不通。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:21:44.983

散列之后的 URL 部分是“[片段标识符](http://en.wikipedia.org/wiki/Fragment_identifier)”，它最初是用来引用页内锚点，例如[http://example.com/my_long_article#Section-14](http://example.com/my_long_article#Section-14)，其中它是一个 HTML 文档，`<a name="Section-14"></a>`上面有一个第 14 节材料。浏览器实际上并没有在请求中将这部分 URL 发送到服务器（这可能令人沮丧），它只是用于将长文档自动滚动到该位置。

对于现代单页应用程序，该技术已被重新用于获取 URL 以表示应用程序中的特定屏幕或视图，但不会导致浏览器实际请求不同的文档。因此，如果您从`/my-app#cars`to导航`/my-app#trucks`，浏览器不会加载新页面，这意味着您的 javascript 会保持加载状态，并且可以以“单页”样式响应。

现代浏览器可以通过[HTML5 pushState API](http://diveintohtml5.info/history.html)实现这一点，但对于较旧的浏览器，哈希方法仍然很常见。

# javascript - javascript - 在循环中测试自定义属性

> ID：15469524
> 
> 赞同：0
> 
> 时间：2013-03-18T03:57:39.123
> 
> 标签：javascript, html, custom-attributes

我有一个表格，我设置为测验。最终，我将更改它以计算完成后的测验的最终分数。但我被困在这一部分上。如果选中了正确的框，我想加一个点，如果选中了一个错误的框，我想减去一个点。

正确答案的代码：

```
<input type="checkbox" name="q3" id="q1javascript" answer="true"> 
```

错误答案的代码：

```
<input type="checkbox" name="q3" id="q3xhtml" answer="false"> 
```

Javascript对其进行检查：

```
function test() {
    var boxes = document.getElementsbyName('q3');
    var score = 0;
    var i = 0;
    while (i < 4) {
        var answer = boxes[i].getAttribute('answer');
        if (answer === 'true') {
            score++;
        }
        else {
            score--;
        }
        i++;
    }
    alert(score);
} 
```

[JSFiddle](http://jsfiddle.net/xjsc16x/LMabz/ "JSFiddle")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:22:54.753

试试这个 JSFiddle：http: [//jsfiddle.net/vCz2T/1/](http://jsfiddle.net/vCz2T/1/)

复选框现在使用`data-answer="true"`或`data-answer="false"`。任何像你的`answer`属性这样的自定义数据都应该以`data-`：

```
<input type="checkbox" name="q3" id="q3css" data-answer="true"> 
```

该`test()`功能已更改为：

```
function test() {
    var boxes = document.getElementsByName('q3');
    var score = 0;
    var i, box, answer;
    for (i = 0; i < boxes.length; i++) {
        box = boxes[i];
        if (box.checked) {
            answer = box.getAttribute('data-answer');
            if (answer === 'true') {
                score++;
            } else {
                score--;
            }
        }
    }
    alert(score);
} 
```

你现在要做的`getAttribute('data-answer')`。此外，您应该检查`box.checked`以便只计算选中的复选框。

# mysql - MySQL 表未正确对齐

> ID：15469531
> 
> 赞同：1
> 
> 时间：2013-03-18T03:58:28.177
> 
> 标签：mysql

我有一个与 MySQL 有关的问题。从这两张图片中可以看出问题：

[http://imgur.com/NrOwSxS,yPo9Cra](http://imgur.com/NrOwSxS,yPo9Cra) [http://imgur.com/NrOwSxS,yPo9Cra#1](http://imgur.com/NrOwSxS,yPo9Cra#1)

有谁知道 MySQL 为什么要这样做？它应该显示为一张漂亮整洁的桌子，而不是一堆乱七八糟的东西。提前致谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:58:42.030

首先，为了证明没有什么问题，试试这个查询：

```
SELECT firstname FROM contact_info 
```

那应该看起来不错。现在试试这个：

```
SELECT firstname, lastname FROM contact_info 
```

这就是您选择单个列的方式。

如果您真的想将输出捕获到文件中，此页面将向您展示如何：[MySQL 命令行工具](http://dev.mysql.com/doc/refman/5.5/en/mysql.html)

然后你可以学习使用其他程序很好地格式化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T11:51:03.710

我假设您创建的表格有点像这样：

```
create table automobile (make char(10),model char(10),year int, color char(10), style char(50), MSRP int);
insert into automobile values ('Ford','Mustang',2006,'Blue','Convertible',27000);
insert into automobile values ('Toyota','Prius',2005,'Silver','Hybrid',22000);
insert into automobile values ('Toyota','Camry',2006,'Blue','Sedan',26000);
insert into automobile values ('Dodge','1500',2005,'Green','Pickup',26000); 
```

所以一个

```
 describe automobile 
```

将向您显示您的列：

```
+-------+----------+------+-----+---------+-------+
| Field | Type     | Null | Key | Default | Extra |
+-------+----------+------+-----+---------+-------+
| make  | char(10) | YES  |     | NULL    |       |
| model | char(10) | YES  |     | NULL    |       |
| year  | int(11)  | YES  |     | NULL    |       |
| color | char(10) | YES  |     | NULL    |       |
| style | char(50) | YES  |     | NULL    |       |
| MSRP  | int(11)  | YES  |     | NULL    |       |
+-------+----------+------+-----+---------+-------+ 
```

只要您的列总数小于终端的宽度，您应该会看到预期的结果：

```
mysql> select * from automobile;
+--------+---------+------+--------+-------------+-------+
| make   | model   | year | color  | style       | MSRP  |
+--------+---------+------+--------+-------------+-------+
| Ford   | Mustang | 2006 | Blue   | Convertible | 27000 |
| Toyota | Prius   | 2005 | Silver | Hybrid      | 22000 |
| Toyota | Camry   | 2006 | Blue   | Sedan       | 26000 |
| Dodge  | 1500    | 2005 | Green  | Pickup      | 28000 |
+--------+---------+------+--------+-------------+-------+ 
```

如果您希望结果更小，请选择您想查看的列，例如

```
 select make,model from automobile

mysql> select make,model from automobile;
+--------+---------+
| make   | model   |
+--------+---------+
| Ford   | Mustang |
| Toyota | Prius   |
| Toyota | Camry   |
| Dodge  | 1500    |
+--------+---------+ 
```

要使列的内容更小，您可以使用左字符串函数

```
select left(make,4) as make, left(model,5) as model,left(style,5) as style from automobile;
+------+-------+-------+
| make | model | style |
+------+-------+-------+
| Ford | Musta | Conve |
| Toyo | Prius | Hybri |
| Toyo | Camry | Sedan |
| Dodg | 1500  | Picku |
+------+-------+-------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-25T08:16:29.673

您可以尝试在最后提供行分隔符。

```
mysql> LOAD DATA LOCAL INFILE *file_path* INTO *table_name* LINES TERMINATED BY '\r\n'; 
```

分隔符可能因编辑而异。在 Windows 中，大多数编辑器使用`'\r\n'`.

# browser - 有放大尺来测量像素吗？

> ID：15469532
> 
> 赞同：2
> 
> 时间：2013-03-18T03:58:28.540
> 
> 标签：browser, google-chrome-extension, firefox-addon, safari-extension, ieaddon

我一直在寻找这个：

所有常见的浏览器都有大量的标尺扩展，但我找不到**一个有放大镜的**。谁能帮帮我？

我说的是像 Chrome 中的[Awesome Color Picker](https://chrome.google.com/webstore/detail/awesome-color-picker/flkdgmgdgnpdecpaaoggnbjcdmbnagbj)扩展这样的放大镜： ![真棒颜色选择器截图](../Images/cb5003fc534362f396dd99c91e4c67a5.png)

在尝试以像素精度测量任何东西时，我使用的标尺扩展确实伤害了我的眼睛。

任何浏览器都适合我。

注意＃1：这不是通过“检查元素”查看元素的宽度。我需要找到网页上任意两点之间的精确像素数。

注意＃2：在浏览器中缩放也不会这样做，因为当我缩放时某些像素会发生变化。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T04:17:34.883

我不确定这是否是您正在寻找的，但它可能值得一试。它可以放大像素，最高可达 3200%。

[http://matthiasschuetz.com/pixelzoomer/](http://matthiasschuetz.com/pixelzoomer/)

这是一个 FireFox 插件。我根本不隶属于附加组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T00:34:25.947

从 IconFactory 查看 xScope。[http://xscopeapp.com](http://xscopeapp.com)我一直将它用于开发布局。它有多种工具，包括标尺、参考线、用于动态测量元素的工具以及用于查看布局放大部分的放大镜。它不是浏览器插件，但我发现这使它实际上更有用。

# web-services - 如何设置webServiceURL并注册成功

> ID：15469533
> 
> 赞同：0
> 
> 时间：2013-03-18T03:58:30.567
> 
> 标签：web-services, ios6, passbook

我填充了 的某些部分`webserviceURL`，但是对于`deviceID`，我要为它添加什么？这是我用来注册设备和传递 web 服务的代码。添加 pass 后我需要更改什么才能注册？

```
<?php 

    echo "<a href= 'genericPass.php'> Click here to add Generic Pass</a><br/>";
    echo "<a href= 'couponPass.php'> Click here to add Coupon Pass</a>";

    $url = 'https://192.168.1.105:8888/passesWebserver/v1/devices/{deviceID}/registrations/‌​pass.cam-mob.passbookpasstest/E5982H-I2';

    $ch = curl_init( $url );
    curl_setopt( $ch, CURLOPT_POST, 1);
    //curl_setopt( $ch, CURLOPT_POSTFIELDS, $myvars);
    curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt( $ch, CURLOPT_HEADER, 0);
    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1);

    $response = curl_exec( $ch );
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:00:59.187

将通行证添加到 Passbook 时 - iPhone 或 iPod 将调用 webServiceURL 告诉您它的设备 ID 和推送令牌。您无法知道这些是什么，因此您需要设置您的 Web 服务器，以便它可以捕获设备 ID 和推送令牌。

设备 ID 作为 URL 的一部分发送，令牌作为 JSON 对象发布。

在您的网络服务器上，您需要设置一个重写规则以将所有流量写入`https://192.168.1.105:8888/passesWebserver/....`到`https://192.168.1.105:8888/passesWebserver/index.php`（搜索 Google 或 SO 以了解如何执行此操作）

然后设置一个 index.php 是这样的：

```
// Transfer Request URL into array
$request = explode("/", substr(@$_SERVER['REQUEST_URI'], 1));

/**
* Register Device
*
*   POST request to version/devices/<deviceLibraryIdentifier>/registrations/<passTypeIdentifier>/<serialNumber>
*   Request will contain an Authorisation header with the value <ApplePass authenticationToken>, where
*   authenticationToken equals the authenticationToken in the original voucher payload.
*/

if (strtoupper($_SERVER['REQUEST_METHOD']) === "POST"
    && isset($_SERVER['HTTP_AUTHORIZATION'])
    && strpos($_SERVER['HTTP_AUTHORIZATION'], 'ApplePass') === 0
    && $request[2] === "devices"
    && $request[4] === "registrations") {

    $auth_key = str_replace('ApplePass ', '', $_SERVER['HTTP_AUTHORIZATION']);

    $device_id = $request[3];
    $pass_id = $request[5];
    $serial = $request[6];

    // Catch the JSON post and decode it
    $dt = @file_get_contents('php://input');
    $device_token = json_decode($dt);
    $device_token = $device_token->pushToken;
    if (!$device_token) die('No Token Found'); // Token wasn't found

    // Add code to check the Auth Token against the serial number and add the
    // device details to your database so you can use them later to push updates
    // to the pass. This code should return a 200, 201 or other response depending
    // on whether the auth is valid and the device is registered already or not

    exit;
}

//  Add other conditions to check for unregister, get serials, refresh and log. 
```

# c# - 从程序集中删除签名

> ID：15469534
> 
> 赞同：8
> 
> 时间：2013-03-18T03:58:46.977
> 
> 标签：c#, visual-studio-2012, clr, delay-sign, enyim.caching

我在 Visual Studio 中打开了一个项目（它恰好是 Enyim.Caching）。这个程序集想要延迟签名。事实上，它非常渴望被延迟签名，以至于我无法强制 Visual Studio 编译它*而不*延迟签名。

1.  我在 Visual Studio 项目属性框中取消选中“仅延迟签名”和“签署程序集”，然后重新构建。组件仍标记为延迟标志（如 所示`sn.exe -v`）。

2.  我已卸载项目并验证签名设置为 false。重新加载项目时，选中“Sign”和“Delay Sign”复选框。

3.  我已验证 AssemblyInfo（或其他地方）中不存在会导致此问题的属性。

4.  我在互联网上搜索了解决方案，但没有找到。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T04:19:41.867

**在这种情况下，问题是项目“公共属性”引用。**

在项目的 .csproj 文件中是这个无害的小行：

> <Import Project="..\build\CommonProperties.targets" />

不幸的是，文件`CommonProperties.targets`（

解决方案是进入`CommonProperties.targets`文件并删除以下行：

```
<!-- delay sign the assembly if the PrivateKeyPath property is not specified -->
<PropertyGroup Condition=" '$(PrivateKeyPath)' == '' And '$(PrivateKeyName)' == ''">
    <AssemblyOriginatorKeyFile>..\public_key.snk</AssemblyOriginatorKeyFile>
    <DelaySign>true</DelaySign>
</PropertyGroup>

<!-- sign the assembly using the specified key file containing both the private and public keys -->
<PropertyGroup Condition=" '$(PrivateKeyPath)' != '' ">
    <AssemblyOriginatorKeyFile>$(PrivateKeyPath)</AssemblyOriginatorKeyFile>
    <DelaySign>false</DelaySign>
</PropertyGroup>

<!-- sign the assembly using the specified key container containing both the private and public keys -->
<PropertyGroup Condition=" '$(PrivateKeyName)' != '' ">
    <AssemblyOriginatorKeyFile></AssemblyOriginatorKeyFile>
    <DelaySign>false</DelaySign>
</PropertyGroup> 
```

将这些行替换为以下内容：

```
 <PropertyGroup>
    <DelaySign>false</DelaySign>
    <SignAssembly>false</SignAssembly>
  </PropertyGroup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T08:24:34.950

遇到了同样的问题。即使我禁用了“仅延迟签名”和“签署程序集”，我仍然收到错误

```
error MSB3325: Cannot import the following key file: . The key file may be password protected". 
```

.csproj 是正确的：

```
<PropertyGroup>
    <SignAssembly>false</SignAssembly>
    <DelaySign>false</DelaySign>
</PropertyGroup> 
```

但是，下面还有一个更棘手的行：

```
<SignAssembly Condition="Exists('..\xxx.pfx')">true</SignAssembly> 
```

只有在我**删除了.csproj中的行，或者删除了磁盘上的文件**之后，VS才能运行。

似乎是VS的一个错误。我正在使用的版本：

```
Microsoft Visual Studio 2010
Version 10.0.40219.1 SP1Rel
Microsoft .NET Framework
Version 4.5.50709 SP1Rel 
```

# c# - 杀死异步线程

> ID：15469541
> 
> 赞同：1
> 
> 时间：2013-03-18T03:59:14.697
> 
> 标签：c#, multithreading, asynchronous, threadpool

我正在尝试异步读取 HttpResponse.GetResponseStream()

```
 Stream source=myHttpResponse.GetResponseStream();
 IAsyncResult asyncResult = source.BeginRead(buffer, 0, new[] { maxDownloadSize, buffer.Length }.Min(), null, null); 
```

但由于某种原因，我的应用程序挂在 source.Endread()

```
int bytesRead = source.EndRead(innerAsyncResult); 
```

我知道所有的异步调用都依赖于线程池，但是有什么办法可以杀死线程，

我确实放置了一些控件来终止异步操作

1.  我已经放置了一个外部计时器，在触发时我正在关闭流

    ```
    System.Threading.Timer timer = new System.Threading.Timer(OnTimerCallback, source, Convert.ToInt32(new TimeSpan(0, 10, 0).TotalMilliseconds), 1); 

    private static void OnTimerCallback(Object state)
    {
        Stream stream = state as Stream;

        if (stream == null)
            return;

        try
        {
            stream.Close();
            stream.Dispose();

        }
        catch (Exception ex)
        {
            //Log Error
        }

        throw new Exception("Successfully closed the Stream and killing the Thread");
    } 
    ```

    它正在关闭流，但由于某种原因，应用程序仍然挂起。

2.  我放置了一个外部计时器，并关闭 asyncResult.AsyncWaitHandle.Close()

这两种机制似乎都是徒劳的，有什么办法可以杀死线程。

基本上我想要实现的是从 NetworkStream 读取并将其保存在 FileStream 中，它可以正常工作一段时间，后来它挂在 source.EndRead(innerAsyncResult); 从 Networkstream 读取是异步的，而将数据保存到文件流是同步的。

实际代码：

```
public static void CopyToStreamAsync(this Stream source, Stream destination,
    Action<Stream, Stream, Exception> completed, Action<uint> progress,
    uint bufferSize)
{
    byte[] buffer = new byte[bufferSize];

    Action<Exception> done = exception =>
        { //Completed event handler
         };

    int maxDownloadSize = maximumDownloadSize.HasValue
        ? (int)maximumDownloadSize.Value
        : int.MaxValue;

    int bytesDownloaded = 0;
    IAsyncResult asyncResult = source.BeginRead(buffer, 0, new[] { maxDownloadSize, buffer.Length }.Min(), null, null);

    Action<IAsyncResult, bool> endRead = null;
    endRead = (innerAsyncResult, innerIsTimedOut) =>
        {
            try
            {
                int bytesRead = source.EndRead(innerAsyncResult);

                int bytesToWrite = new[] { maxDownloadSize - bytesDownloaded, buffer.Length, bytesRead }.Min();

                destination.Write(buffer, 0, bytesToWrite);
                bytesDownloaded += bytesToWrite;

                if (!progress.IsNull() && bytesToWrite > 0)
                {
                   //Progress Handlers 
                }

                if (bytesToWrite == bytesRead && bytesToWrite > 0)
                {
                    asyncResult = source.BeginRead(buffer, 0, new[] { maxDownloadSize, buffer.Length }.Min(), null, null);                       
                    asyncResult.FromAsync((ia, isTimeout) => endRead(ia, isTimeout), timeout);
                }
                else
                {
                    done(null);
                }
            }
            catch (Exception exc)
            {
                done(exc);
            }
        };

    asyncResult.FromAsync((ia, isTimeout) => endRead(ia, isTimeout), timeout);
} 
```

# javascript - 图像完整属性返回未定义

> ID：15469542
> 
> 赞同：1
> 
> 时间：2013-03-18T03:59:15.323
> 
> 标签：javascript, html, image, dom

考虑到图像可能被缓存，我正在尝试在加载图像后调整 div 的高度以适合图像。

我正在尝试使用图像完成属性来确定图像是否已经加载，以便我可以调用处理函数或将处理函数添加到将在图像完全加载后运行的加载函数。

当我调用 image.complete 时，我变得不确定。

什么可能导致这种行为？

当我使用 console.log 检查图像时，完整的属性显然在那里并且具有真实值。

```
//functions
var setHeight = function(imageObj){
    var imageHeight = imageObj.height();
    console.log(imageObj);
    console.log(imageHeight);
    displayElement.css("height", imageHeight);
}

var setImageHeight = function(imageObj){
    displayElement.html(imageObj);
    if (imageObj.complete){
        setHeight(imageObj);
    } else {
        imageObj.load(setHeight(imageObj));
    }
}

// define and image, send it to the function to add to html and adjust height.
var imageObj = jQuery('<img class="current-image"/>').attr('src', ...);             
setImageHeight(imageObj); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:11:29.997

`complete`是底层 DOM 元素的属性，因此要访问它，您需要使用以下内容：

```
if (imageObj[0].complete){
    ...
} 
```

这很可能是它出现为 undefined: `imageObj`（这是一个 jQuery 对象）本身没有这个属性的原因。

# php - 如何通过 IdItem 更新

> ID：15469543
> 
> 赞同：2
> 
> 时间：2013-03-18T03:59:23.317
> 
> 标签：php, mysql

在 php、mysql 中要 master2。我是 php 新手大约 2 个月

我需要帮助。关于更新表。

我有显示当前表格的页面。当我单击更新按钮更新时，我想要第 1 行，当前表中的数量将减少结果表中的 IdItem。因此，当前表中的等式将像这样数量=数量-数量通行证。所以只有字段项目更改数量结果。现在，当我单击更新时，它会影响表中的所有当前结果。任何解决方案？

“结果”表

```
+--------+-------------+--------------+-----------+--------+--------------+
| IdItem |  username   |   rentItem   | quantity  | result | quantityPass |
+--------+-------------+--------------+-----------+--------+--------------+
| 84     | FahmiNazirul|   Speaker    |     1     | PASS   |      1       |
+--------+-------------+--------------+-----------+--------+--------------+
| 86     |     Andy    |   Keyboard   |     3     | PASS   |      2       |
+--------+-------------+--------------+-----------+--------+--------------+
| 89     | FahmiNazirul|   Speaker    |     5     | PASS   |      3       |
+--------+-------------+--------------+-----------+--------+--------------+ 
```

当前数量“更新”表

```
+--------+-------------+--------------+ 
|  Id    |    Item     |    quantity  |
+--------+-------------+--------------+ 
|   1    |   Speaker   |     10       |
+--------+-------------+--------------+ 
|   2    |  Keyboard   |     10       | 
+--------+-------------+--------------+ 
```

表更新.php

```
$result = mysql_query("SELECT * FROM update where Item = Item");

                echo "<table border='1'>
                <tr>
                <th>Item</th>
                <th>Quantiti</th>
                <th></th>       
                </tr>";

                while($row = mysql_fetch_array($result))
                  {
                  $item= $row['Item'];

                  echo " <tr> ";
                  echo " <td> " . $row['Item'] . " </td> ";
                  echo " <td> " . $row['quantity'] . " </td> ";

                  echo " </tr> ";
                  }
                echo "</table>";

echo " <a href ='quantityupdate.php?Item=$item'  onclick='return Confirm_Box()' >Update</a>"; 
```

数量更新.php

```
$item =$_REQUEST['Item'];

// sending query

mysql_query("UPDATE update ,result SET update.quantity=update.quantity-result.quantityPass where update.Item = result.rentItem")
or die(mysql_error());      

header("Location: update.php"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:24:43.383

```
mysql_query("UPDATE update ,result SET update.quantity=update.quantity-result.quantityPass where  result.rentItem='$item' AND update.Item='$item'") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:14:01.087

`UPDATE`像这样使用`JOIN`：

```
UPDATE kemaskini AS u
INNER JOIN result AS r ON u.Item = r.rentItem
SET u.quantity = u.quantity - r.quantityPass; 
```

* * *

对于`Item`第一个表中的重复条目，`result`您可以这样做：

```
UPDATE kemaskini AS u
INNER JOIN
(
   SELECT rentItem, SUM(quantityPass) AS TotalquantityPass
   FROM result
   GROUP BY rentItem
)  AS r ON u.Item = r.rentItem
SET u.quantity = u.quantity - r.TotalquantityPass; 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/b0897/2)

# javascript - 你如何在 javascript 中编写游戏状态？

> ID：15469545
> 
> 赞同：0
> 
> 时间：2013-03-18T03:59:34.450
> 
> 标签：javascript, html

您可以在 Flash ActionScript 中使用帧来保存欢迎屏幕、游戏内容和游戏结束屏幕；您可以在 Microsoft XNA 中创建游戏状态的枚举，并在 Draw 方法中调用该状态时绘制所有图形和文本。你会如何在 HTML5 和 JavaScript 中做到这一点？我有一种感觉，这可以通过显示和隐藏 div 来完成，但我不完全确定该怎么做。

```
<asp:DropDownList ID="DDL_SelectGame" runat="server" CssClass="BigText">
    <asp:ListItem>MatchMe (Memory)</asp:ListItem>
    <asp:ListItem>Royal Jewels (Bejeweled)</asp:ListItem>
    <asp:ListItem>Tetris</asp:ListItem>
</asp:DropDownList>
<div id="Welcome" class="Welcome">
    <asp:Button ID="BTN_StartGame" runat="server" CssClass="Button" />
</div>
<div id="Game" class="Game">
</div>
<div id="GameOver" class="GameOver">
    <asp:Button ID="BTN-Replay" CssClass="Button" runat="server" />
</div> 
```

上面的代码是我如何在我的网站 ( [http://www.graphics-geek.com](http://www.graphics-geek.com) ) 上设置游戏页面的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T20:17:53.937

这是我计划用于未来游戏开发的状态机。

有了这样的东西，你应该能够实现不同状态的绘制，以及回调中的状态变化。通过显示/隐藏 div，或在画布上绘制不同的缓冲区/图形。

创建状态：

```
// initially hide the divs using css or js

state.add("welcome",
    function () {
        document.getElementById("Welcome").style.display = "block";
    },
    function () {
        document.getElementById("Welcome").style.display = "none";
    }
);

state.add("level01",
    function () {
        document.getElementById("Game").style.display = "block";
    },
    function () {
        document.getElementById("Game").style.display = "none";
    }
);

state.add("end",
    function () {
        document.getElementById("GameOver").style.display = "block";
    }
); 
```

第二个功能是可选的（实际上两者都是，但这样的状态不会做任何事情）。

切换状态（假设我们添加了 3 个状态：“welcome”、“level01”和“end”）：

```
state.enter("welcome");

//... at some point welcome changes state using following:
state.enter("level01");

//... at the end of level1:
state.enter("end"); 
```

代码：

```
var state = (function () {
    "use strict";
    var currentState = -1,
        stateNames = [],
        stateCallbacks = [];

    return {
        current: function () {
            if (currentState >= 0) {
                return stateNames[currentState];
            }
        },
        add: function (name, onEnter, onExit) {
            var index = stateNames.indexOf(name);
            if (index !== -1) {
                throw "State " + name + " already exist!";
            }
            stateCallbacks.push({
                enterState: onEnter || false,
                exitState: onExit || false
            });
            stateNames.push(name);
        },
        remove: function (name) {
            var index = stateNames.indexOf(name);
            if (index === -1) {
                throw "State " + name + " not found!";
            }
            stateNames.splice(index, 1);
            stateCallbacks.splice(index, 1);
        },
        enter: function (name) {
            var index = stateNames.indexOf(name);
            if (index === -1) {
                throw "State " + name + " not found!";
            }
            if (stateCallbacks[currentState].exitState) {
                stateCallbacks[currentState].exitState();
            }
            currentState = index;
            if (stateCallbacks[index].enterState) {
                stateCallbacks[index].enterState();
            }
        },
        exit: function () {
            if (currentState === -1) {
                throw "Not currently in any state";
            }
            if (stateCallbacks[currentState].exitState) {
                stateCallbacks[currentState].exitState();
            }
            currentState = -1;
        }
    };
}()); 
```

附加评论：

包装代码的匿名函数的结构是来自[http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html)的 javascript 模块模式。这类似于其他语言中的命名空间。

为了可能获得更好的查找性能（在此处实现为 Array.indexOf(name)），您可能希望添加一个带有与索引值关联的字符串键的对象，尤其是对于大量状态（即具有 100 多个级别的游戏，或一个不同的用例，其中状态切换得更频繁）。不过，我没有对此进行基准测试，因此这是高度投机的。理论上，数组搜索比哈希表查找慢 n - 1 倍（对象可能被实现为）。

编辑：

1.  修复了代码中的错误。state.add 现在检查现有名称。
2.  添加了免责声明。
3.  添加了如何在回调中显示/隐藏 div 的示例。
4.  删除免责声明，用改进版本替换代码。

# asp.net - 在asp.net应用程序中获取在线用户数

> ID：15469549
> 
> 赞同：0
> 
> 时间：2013-03-18T03:59:55.637
> 
> 标签：asp.net

我正在 asp.net 中开发一个婚姻网络应用程序。在那我想显示在线（登录）的用户数。

我计划维护一个以 dB 为单位的“登录状态表”。并且每次用户登录和退出时都会维护该表。但是如果用户没有注销就直接关闭了浏览器，就会出现问题。

有没有其他简单的方法来实现这一点。请提供示例代码。

而且我想知道如果用户单击浏览器的关闭按钮，我该如何更新表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:26:50.680

我最近实现了类似的东西。我面临的挑战是定义“在线”。如果用户离开电脑，关闭浏览器，网络断开怎么办？

最后我用在线方式**访问了最后 15 分钟内的页面**。它避免了试图检测他们何时离开浏览器或关闭它的问题。

我确实考虑绑定到浏览器`onclose`事件并点击 /user/closed/browser url。我以前在呼叫中心网站上使用过它来解锁通话。但实际上 15 分钟规则“足够好”。

我通过保存一个内存字典来编码它，我每 5 分钟保存一次到 db。抱歉，我没有可提供的代码。

# .htaccess - 重写规则以从 URI 中删除所有非字母数字符号

> ID：15469550
> 
> 赞同：3
> 
> 时间：2013-03-18T03:59:56.400
> 
> 标签：.htaccess, mod-rewrite

我在 SO 上找不到完全相同的问题。我希望有人可以帮助我解决这个问题。

比如说，用户输入`http://www.example.com/abc#!def`了 ，我想要做的是删除该`${REQUEST_URI}`部分中的所有符号，然后重定向到`http://www.example.com/abcdef`. 问题是这些符号可以出现在字符串中的任何位置，例如`#ab!cdeg`并且`abcdef#!`都应该重定向到`abcdef`.

如果我是正确的，mod_rewrite 没有字符串替换功能，所以这似乎是不可能的，但我正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:11:37.133

您可以使用 or中的[正则表达式](http://httpd.apache.org/docs/current/rewrite/intro.html#regex)捕获 URL 的特定部分，但不能删除任意字符。[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

此外，您永远不会在 URL 中看到[井号字符“#”](http://en.wikipedia.org/wiki/Fragment_identifier)及其后面的所有内容，因为客户端使用它来导航到文档的特定部分。

**使用[下一个](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_n)标志**更新：****

 **```
RewriteRule (.*)[^a-zA-Z](.*) $1$2 [N] 
```

此规则删除所有非`^`字母字符。**

# python - 在初始 html get() 调用之后重新访问 python 变量

> ID：15469551
> 
> 赞同：0
> 
> 时间：2013-03-18T03:59:59.393
> 
> 标签：python, html, google-app-engine, gdata, gdata-api

我正在使用 google app engine 和 google docs/gdata 制作数据绘图工具，但遇到了 python/js/html 通信问题。

我想要一个非常简单的网页布局——只有一系列下拉菜单部分，然后是最终图表。我目前的困境涉及下拉菜单。

共有 4 个下拉菜单，每个的字段取决于之前的选择。我发现 JS/HTML 代码具有所有需要的逻辑，但它假定您已经预加载了所有选择字段。由于项目的规模，无法在启动时加载所有内容，并且数据是动态/变化的，所以我不能只声明包含菜单选择数据的静态文件。

目前，我有方法从谷歌文档（使用 gdata）获取我需要的所有菜单选择/数据。理想情况下，我想只调用每个系列（html selection1 -> python method1 来获取下一个选择集 -> html selection2 -> python method2 来获取下一个选择集 -> 等）但是从我可以收集的信息来看，这似乎是是不可能的（返回python，即'post'，无需重新加载整个页面）。

那么，有没有办法在初始模板渲染后或不“发布”的情况下访问 google-app-engine JS 代码中的 python 变量/方法？或者，更开放地说，如果有人有见解/建议/想法，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:12:14.007

两步流程：

1.  创建一些服务器端代码以将您的数据以 JSON 格式返回——这是在网络上传输数据的实际方法。

2.  在您的 javascript 代码中，调用您的服务器（从第 1 步开始），然后解析结果。使用结果填充您的下拉列表。

好消息是 Google 已经提供了 json 作为其 gdata API 的替代格式。有关如何使用 gdata 和返回 JSON 的入门知识，请参阅[此链接。](https://developers.google.com/gdata/docs/json)

对于第二部分，几乎所有的 javascript 客户端库（你真的应该使用一个）都提供了一种使用 ajax 请求数据的简单方法。由于这是一项常见任务，因此 StackOverflow 上有很多关于此的问题 -特别是[这个](https://stackoverflow.com/questions/2637694/how-to-populate-a-dropdownlist-with-json-data-in-jquery)有一个示例，向您展示如何使用 jquery 和 ajax 填充下拉列表。

假设您可以使用 javascript 并复制您的 Python 代码提供的任何功能，那么上述内容将适用于您。如果您有一些不想传输到客户端的特定逻辑，那么您的 Python 代码将不得不返回 json（实际上，您的行为就像您的 javascript 代码的 gdata api）。

由于您没有突出显示您正在使用哪个 Python 框架 - 这是一个使用[flask](http://flask.pocoo.org)的示例，一个用于 Python Web 开发的简单框架：

```
from flask import Flask, jsonify

app = Flask(__name__)

@app.route('/the-question')
def the_answer():
    return jsonify(answer=42) 
```

[AJAX with jQuery](http://flask.pocoo.org/docs/patterns/jquery/#ajax-with-jquery)下的文档中提供了更全面的示例。

如果您使用的是 webapp2，Google 提供了[出色的文档](https://developers.google.com/appengine/articles/rpc)来做同样的事情。

# jquery - 从 jQuery datepicker inline 中选择日期后打开 jQuery 对话框

> ID：15469553
> 
> 赞同：1
> 
> 时间：2013-03-18T04:01:36.253
> 
> 标签：jquery, dialog, datepicker

目前我的项目页面有一个 jQuery datepicker inline 放置在页面的一个部分。下面的代码用于实现相同的目的。

```
<link rel="stylesheet" href="~/Scripts/Calendar/jquery-ui-1.10.1.custom.css">
<script src="~/Scripts/Calendar/jquery-1.9.1.js"></script>
<script src="~/Scripts/Calendar/jquery-ui-1.10.1.custom.js"></script>
<script>
$(document).on("change", "#datepicker", function () {
    var date = $(this).val();
    $( "#dialog" ).dialog();
});
</script>

// The below section is in one of the sections
<div id="datepicker" style="font: 80% 'Trebuchet MS', sans-serif;"></div>
<script>
    $("#datepicker").datepicker();
</script>
.
.
.
<div id="dialog-modal" title="Basic modal dialog">
   <p>Adding the modal overlay screen.</p>
 </div> 
```

现在，当用户单击特定日期时，我必须显示一个带有信息的 jQuery 对话框。

好吧，我试图调用对话框

```
$(document).on("change", "#datepicker", function () {
    var date = $(this).val();
    $( "#dialog" ).dialog();
}); 
```

但它显示错误，因为 Object 不支持属性或方法对话框。

任何人都可以让我朝着正确的方向前进。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:15:12.930

看看这个小提琴，看看这是否有帮助。

[http://jsfiddle.net/qqabC/](http://jsfiddle.net/qqabC/)

```
 $("#datepicker").datepicker();

$("#datepicker").change(function(){
     var date = $(this).val();
    $('<div>' + date + '</div>').dialog();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:11:23.627

我想你包括`jquery`两次。你有一个`jquery-1.9.1.js`和其他一些`jquery-1.x.x.js`脚本文件，或者`jquery-1.9.1.js`第二次一样，一切似乎都插入第一个实例，然后最后一个包含覆盖`$`。这就是您看到此错误消息的原因。

**请再看一遍。。**

还包括 `$j = jQuery.noConflict();`在您的脚本标签中以避免冲突！

# knockout.js - 淘汰订阅问题

> ID：15469557
> 
> 赞同：2
> 
> 时间：2013-03-18T04:02:12.090
> 
> 标签：knockout.js, viewmodel, subscribe

地狱所有，

我有一个带有子模型的复杂淘汰视图模型。以下是视图模型定义：

```
var DailyItems = function (data) {
var p = this;
this.Date = ko.observable(data.Date);
this.Required = ko.observable(data.Required);
this.SetupTime = ko.observable(data.SetupTime);
this.CloseTime = ko.observable(data.CloseTime);
this.MinHrsPerDay = ko.observable(data.MinHrsPerDay);
this.MaxHrsPerDay = ko.observable(data.MaxHrsPerDay);
this.WorkSegments = ko.observableArray([]);
var records = $.map(data.WorkSegments, function (x) { return new WorkShift(p, x) });
this.WorkSegments(records);

this.EnableAdd =  ko.computed(function () {
    return this.WorkSegments().length < 8;
}, this);

this.Add = function () {
    var data = {
        Parent: p,
        ID: "",
        Date: this.Date,
        Location: UNIT_ID,
        Role: "",
        EmployeeRoles: this.WorkSegments()[0].EmployeeRoles(),//add the roles of the first work segment
        ShiftStart: "",
        ShiftEnd: ""
    };
    var child = new WorkShift(p, data);
    this.WorkSegments.push(child);      
}

this.Delete = function (item) {
    this.WorkSegments.remove(item);
}
};

var WorkShift = function (parent, data) {
var self = this;
this.Parent = ko.observable(parent);
this.ID = ko.observable(data.ID);
this.Day = ko.observable(data.Day);
this.Location = ko.observable(data.Location);
this.ShiftStart = ko.observable(data.ShiftStart);
this.ShiftEnd = ko.observable(data.ShiftEnd);
this.EmployeeRoles = ko.observableArray(data.EmployeeRoles);

this.Location.subscribe(function (branchId) {
    $.ajax({
        type: "POST",
        url: SERVER_PATH + '/WebServices/AttributeService.asmx/GetDataOnLocationChange',
        data: "{" + "clientId: '" + CLIENT_ID
                    + "', unitId: '" + branchId
                    + "', effectiveDate:'" + EFFECTIVE_DATE
                    + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (res) {
            var d = JSON.parse(res.d);
            self.EmployeeRoles(d.Roles);

            var tasks = self.Parent().WorkSegments();
            //Requirement: for any day of the week, if there is more than one work segment
            //at different branches the required type should be set to 'On' and made disable
            if (tasks.length > 1) {
                for (var i = 0; i < tasks.length; i++) {
                    if ((d.IsSection == false && tasks[i].Location() != self.Location()) || (d.IsSection == true && self.ParentBranch() != tasks[i].ParentBranch())) {
                        self.Parent().Required('O');
                    }
                    else {
                        self.Parent().Required('E');
                    }
                }
            }
        },
        error: HandleLocationChangeError
    });
}.bind(this));

this.Role = ko.observable(data.Role);
} 
```

这里发生的是，在 DailyItems() 中可观察到的 Location() 是下拉列表中的一个值，该下拉列表通过主视图模型填充。当位置改变时，它应该根据选择的位置改变 EmployeeRoles() 可观察数组，因此 Location.Subscribe 方法。

我的问题是即使在初始数据加载期间也会调用此订阅方法。所以一开始就对服务器进行了不必要的调用。我只希望在用户实际更改下拉选择时调用它。

我有什么选择来实现这一目标？

问候， 查图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:04:20.193

将数据传递到 WorkShift 构造函数中会触发可观察位置上的更改事件。一种方法是在构造子对象并且可观察对象具有其初始值**之后**将 .subscribe 调用移动到父对象。

然后，您的 Add 函数将如下所示：

```
this.Add = function () {
    var data = {
        // SNIP
    };
    var child = new WorkShift(p, data);

    child.subscribe(function (branchId) {
        $.ajax({ 
            // SNIP       
            });
    }.bind(child)); // <--- important to use child and not 'this'!!!

    this.WorkSegments.push(child);
}; 
```

然后，您还必须在 ajax 调用中使用“this”而不是“self”，因为您已将 this 上下文绑定到子级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:58:42.727

以下是我的 UI 绑定：

```
<tbody data-bind="foreach: WorkSegments">
                                            <tr>
                                                <td class="formFields">

                                                   ct class="combobox" data-bind="options:$root.WorkLocations, value:Location, optionsText: 'Name', optionsValue: 'ID', enable: LocationActive"

                                                        style="font-size: x-small; font-style: normal; font-family: Tahoma; width: 80px">
                                                    </select>
                                                </td>
                                            </tr>
                                        </tbody> 
```

这里的下拉选项是从主视图模型中设置的。之后，选定的元素被绑定。之后，当我在初始加载时调试代码时，会调用 Location subscribe 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-15T03:46:02.670

如果是第一次更改，它会不会像不运行 AJAX 调用一样简单？它不漂亮，但很简单：

```
var locationInitialized = false;
this.Location.subscribe(function (branchId) {
    if (!locationInitialized) {
         locationInitialized = true;
         return;
    }
    $.ajax({
    ... 
```

当然，您可以改为在初始填充成功函数中设置 locationInitialized。

或者，设置函数，但在初始填充完成之前不要订阅它。@explunit 展示了一种方法来做到这一点。

# ios - UIButton 设置图片和标题

> ID：15469560
> 
> 赞同：3
> 
> 时间：2013-03-18T04:02:32.963
> 
> 标签：ios, uibutton

我用下面的代码加载的图片是在上半部分，下半部分是按钮的标题，但是只有图片，这是为什么呢？有什么好的建议请告诉我们，谢谢

```
UIButton *myButton = [[UIButton alloc]initWithFrame:CGRectMake(160, 400, 73, 44)];

    [myButton setImage:[UIImage imageNamed:@"icon.png"] forState:UIControlStateNormal];
    [myButton setImageEdgeInsets: UIEdgeInsetsMake(0,0,22,0)];

    [myButton setTitle:@"test" forState:UIControlStateNormal];
    [myButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [myButton setTitleEdgeInsets: UIEdgeInsetsMake(22,10,0,10)];

    [self.view addSubview:myButton]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T06:33:51.003

你也可以通过这种方式达到这个效果..试试这个::

```
UIButton *myButton = [[UIButton alloc]initWithFrame:CGRectMake(160, 400, 73, 55)];
UIImage *img = [UIImage imageNamed:@"icon.png"];
UIImageView *imgVw = [[UIImageView alloc ] init];
imgVw.image  = img;
imgVw.frame = CGRectMake(myButton.frame.origin.x, myButton.frame.origin.y, myButton.frame.size.width, (myButton.frame.size.height-18));
[myButton setTitle:@"test" forState:UIControlStateNormal];
[myButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[myButton setTitleEdgeInsets: UIEdgeInsetsMake(34,10,0,10)];
[myButton addTarget:self action:@selector(btnClick:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:imgVw];    
[self.view addSubview:myButton]; 
```

你的按钮方法

```
-(void) btnClick:(id)sender
{
    NSLog(@"working");
} 
```

你也可以从你的逻辑中实现::在这里我在你的逻辑中编辑了一些代码

```
UIButton *myButton = [[UIButton alloc]initWithFrame:CGRectMake(160, 400, 40, 35)];
[myButton setImage:[UIImage imageNamed:@"icon.png"] forState:UIControlStateNormal];
[myButton setImageEdgeInsets:UIEdgeInsetsMake(0,(myButton.frame.size.width-52),17,0)];
[myButton setTitle:@"test" forState:UIControlStateNormal];
[myButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[myButton setTitleEdgeInsets: UIEdgeInsetsMake(22,(myButton.frame.size.width-78),0,22)];
[self.view addSubview:myButton]; 
```

但是，在这个逻辑中，您必须将图像大小调整为 23*23 像素。根据您的图像大小**UIEdgeInsetsMake**的参数将被更改。

希望这可以帮助。快乐编码。

# java - 如何绘制从当前位置到目的地的路线方向

> ID：15469563
> 
> 赞同：1
> 
> 时间：2013-03-18T04:02:56.800
> 
> 标签：java, android, google-maps

如何使用 Google Maps API v2 绘制从当前位置到目的地的路线方向？

```
public class Trazo_Rutas extends FragmentActivity implements 
    OnMapReadyCallback,
    GoogleApiClient.ConnectionCallbacks,
    GoogleApiClient.OnConnectionFailedListener,
    LocationListener {

private GoogleMap mMap;
GoogleApiClient googleApiClient;
LocationRequest locationRequest;
Location lastLocation;
Marker userLocation;
private static final int Request_User_Location_Code = 99;
PlaceAutocompleteFragment placeAutoComplete;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_trazo__rutas);

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
        checkUserLocationPermission();
    }

    //Check if Google Play Services Available or not
    if (!CheckGooglePlayServices()) {
        Log.d("onCreate", "Finishing test case since Google Play Services are not available");
        finish();
    }
    else {
        Log.d("onCreate","Google Play Services available.");
    }

    //AutoComplete search bar
    placeAutoComplete = (PlaceAutocompleteFragment) getFragmentManager().findFragmentById(R.id.place_autocomplete);
    placeAutoComplete.setOnPlaceSelectedListener(new PlaceSelectionListener() {
        @Override
        public void onPlaceSelected(Place place) {

            Log.d("Maps", "Place selected: " + place.getName());
        }

        @Override
        public void onError(Status status) {
            Log.d("Maps", "An error occurred: " + status);
        }
    });

    // Obtain the SupportMapFragment and get notified when the map is ready to be used.
    SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map);
    mapFragment.getMapAsync(this);
}

private boolean CheckGooglePlayServices() {
    GoogleApiAvailability googleAPI = GoogleApiAvailability.getInstance();
    int result = googleAPI.isGooglePlayServicesAvailable(this);
    if(result != ConnectionResult.SUCCESS) {
        if(googleAPI.isUserResolvableError(result)) {
            googleAPI.getErrorDialog(this, result,
                    0).show();
        }
        return false;
    }
    return true;
}

@Override
public void onMapReady(GoogleMap googleMap) {
    mMap = googleMap;
    mMap.getUiSettings().setZoomControlsEnabled(true);

    //get latlong for corners for specified place
    LatLng corner1 = new LatLng(25.64379, -103.60966);
    LatLng corner2 = new LatLng(25.64317, -103.20935);
    LatLng corner3 = new LatLng(25.43872, -103.61104);
    LatLng corner4 = new LatLng(25.43748, -103.20866);

    LatLngBounds.Builder builder = new LatLngBounds.Builder();

    builder.include(corner1);
    builder.include(corner2);
    builder.include(corner3);
    builder.include(corner4);

    LatLngBounds bounds = builder.build();

    //add them to builder
    int width = getResources().getDisplayMetrics().widthPixels;
    int height = getResources().getDisplayMetrics().heightPixels;

    // 20% padding
    int padding = (int) (width * 0.20);

    //set latlng bounds
    mMap.setLatLngBoundsForCameraTarget(bounds);

    //move camera to fill the bound to screen
    mMap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, width, height, padding));

    //set zoom to level to current so that you won't be able to zoom out viz. move outside bounds
    mMap.setMinZoomPreference(mMap.getCameraPosition().zoom);

    if (android.os.Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
        if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {
            buildGoogleApiClient();
            mMap.setMyLocationEnabled(true);
        }
    } else {
        buildGoogleApiClient();
        mMap.setMyLocationEnabled(true);
    }

}

public boolean checkUserLocationPermission() {
    if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.ACCESS_FINE_LOCATION)){
            ActivityCompat.requestPermissions(this, new String[] {
                    Manifest.permission.ACCESS_FINE_LOCATION
            }, Request_User_Location_Code);
        } else {
            ActivityCompat.requestPermissions(this, new String[] {
                    Manifest.permission.ACCESS_FINE_LOCATION
            }, Request_User_Location_Code);
        }

        return false;
    } else {
        return true;
    }
}

@Override
public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
    switch (requestCode) {
        case Request_User_Location_Code:

            if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {
                    if (googleApiClient == null) {
                        buildGoogleApiClient();
                    }

                    mMap.setMyLocationEnabled(true);
                }
            } else {
                Toast.makeText(this, "Se requieren Permisos de Google", Toast.LENGTH_SHORT).show();
                finish();
            }

            return;
    }
}

protected synchronized void buildGoogleApiClient() {
    googleApiClient = new GoogleApiClient.Builder(this)
            .addConnectionCallbacks(this)
            .addOnConnectionFailedListener(this)
            .addApi(LocationServices.API)
            .build();

    googleApiClient.connect();
}

@Override
public void onLocationChanged(Location location) {
    lastLocation = location;

    if (userLocation != null) {
        userLocation.remove();
    }

    LatLng latLng = new LatLng(location.getLatitude(), location.getLongitude());

    MarkerOptions markerOptions = new MarkerOptions();
    markerOptions.position(latLng);
    markerOptions.draggable(true);
    markerOptions.title("Tu ubicación");
    markerOptions.icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN));

    userLocation = mMap.addMarker(markerOptions);

    mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(latLng, 16));

    if (googleApiClient != null) {
        LocationServices.FusedLocationApi.removeLocationUpdates(googleApiClient, this);
    }
}

@Override
public void onConnected(@Nullable Bundle bundle) {
    locationRequest = new LocationRequest();
    locationRequest.setInterval(1100);
    locationRequest.setFastestInterval(1100);
    locationRequest.setPriority(LocationRequest.PRIORITY_BALANCED_POWER_ACCURACY);

    if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {
        LocationServices.FusedLocationApi.requestLocationUpdates(googleApiClient, locationRequest, this);
    }

} 
```

此代码仅用于添加标记。如何绘制从当前位置到目的地的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:32:36.293

有多种方法可以做到这一点..

*   使用浏览器，传递源和目标

    ```
    public void showDirections(View view) {
      final Intent intent = new  Intent(Intent.ACTION_VIEW,Uri.parse("http://maps.google.com/maps?" + "saddr="+ latitude + "," + longitude + "&daddr=" + latitude + "," + longitude));
    intent.setClassName("com.google.android.apps.maps","com.google.android.maps.MapsActivity");
    startActivity(intent);
    } 
    ```

*   在地图内使用投影请参阅[如何在两点之间绘制直线路径](http://androidtrainningcenter.blogspot.in/2013/01/how-to-draw-path-between-two-geo-points.html)。它不是您问题的完美解决方案，但您会明白的。

# c# - 如何为所有语言创建 DLL

> ID：15469566
> 
> 赞同：1
> 
> 时间：2013-03-18T04:03:13.253
> 
> 标签：c#, java, c++

如何创建文件 DLL，所以我认为所有语言开发人员都可以使用它，如果使用 C++ 创建，那么语言 .Net 可以使用它。但是，JAVA怎么样？？？和其他一些语言

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T04:07:54.207

使其他平台和语言可以使用的 DLL 的唯一保证方法是将其编写为导出静态 C 函数的语言/平台；最简单的方法是直接用 C 和 C++ 编写，尽管其他语言也可以。这样您就可以从 C、C++、.NET/C#/VB（使用`DllImport`P/Invoke）和 Java（使用 JNI）调用它。其他语言也支持导入 C 函数。

（通常）您不能导出类​​或其他类型。如果您的 C 函数使用结构，那么您必须将它们记录在头文件或其他定义中，以供 DLL 的使用者使用。

还有其他方法，包括 COM（支持导出接口和其他类型）和新的 WinRT 元数据格式，但这是新的，尚未广泛部署。COM是一种痛苦的练习。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-18T04:07:33.660

Java 和除 C#、C 和 C++ 之外的其他语言不能使用作为 C 代码制作的 dll。它们是完全不同的语言，Java 使用 Java 虚拟机运行即时字节码，而 Ruby/Python/其他脚本语言使用解释器。事实上，dll 本身只是 C/C++/C# 的一部分。仅 C# 能够使用 C/C++ dll，因为 Microsoft 有意兼容。

另一方面，您可以尝试创建包装器，以便其他语言可以使用您创建的代码。

# symfony - 依赖注入 Symfony 2 简单代码返回错误

> ID：15469567
> 
> 赞同：0
> 
> 时间：2013-03-18T04:03:15.860
> 
> 标签：symfony

我的印象是我可以像下面的代码一样获得请求对象。与依赖注入有关。

下面是作为服务激活的，除了第一个参数给出这个错误之外，一切似乎都设置正确：

ErrorException：可捕获的致命错误：参数 1 传递给....

```
namespace Acme\Bundle\BundleName\EventListener;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;

class RequestListener
{

    public function onKernelRequest(GetResponseEvent $event)
    {

        $request = $event->getRequest();

        // etc.... 
```

我猜上面是不是你是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:38:52.677

如果你想在内核请求上声明一个事件监听器，你应该这样声明（注意标签参数）：

```
services:
    acme.demobundle.listener.request:
        class: Acme\Bundle\BundleName\EventListener\RequestListener
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

否则，如果你只想创建一个服务，你应该这样声明它

```
services:
    acme.demobundle.demo.service:
        class: Acme\Bundle\BundleName\Service\DemoService
        arguments: [@service_container] 
```

对于服务或侦听器，我建议只注入所需的服务。

很高兴知道服务将在第一次调用时被初始化。

可以通过容器访问服务、侦听器和 twig 扩展。

```
$this->container->get('your.listener.name')
$this->container->get('your.service.name')
$this->container->get('your.extension.name') 
```

# javascript - javascript表单验证电话号码

> ID：15469569
> 
> 赞同：0
> 
> 时间：2013-03-18T04:03:42.257
> 
> 标签：javascript, validation, phone-number

我认为尝试进行自己的表单验证会很好。我对测试电话号码的代码没问题。我使用 javascript 只允许数字，并检测位数。如果数字是 3 或 7，我想添加一个破折号。它设置为 7，因为在我输入第一个破折号后，破折号包含在字符串中，第二个破折号位于字符串中的位置 8。现在效果很好，但是如果用户输入了错误的数字并且出现了破折号，当用户尝试退格时，它会看到字符串长度回到 3 或 7 并自动将破折号放回那里，而不是允许用户一次返回一个空格来纠正错误。如果他们按住退格键，它将被删除。我尝试过使用 split 和 substring 并且无法弄清楚如何使用它以使其正常工作。

HTML

```
<form>
  <input type = 'text' name = 'txtPhone' id = 'txtPhone' onkeypress = 'return numbersOnly(event)' onkeyup = 'validateForm(this.id)'/>
</form> 
```

JavaScript

```
function numbersOnly(e){
  var unicode = (e.charCode) ? e.charCode : e.keyCode;
  if (unicode == 8
   || unicode == 9
   || (unicode >= 48 && unicode <= 57)
  )}
    return true;
  }else{
    return false;
  }
}

function validateForm(id){
  var id = document.getElementById(id);
  var unicode = (event.charCode) ? event.charCode : event.keyCode;
  // first add slashes after third and sixth digit
  if (id.value.length == 3
   || id.value.length == 7
  ){
    var newValue = id.value += "-";
    id.value = newValue;
  }
  // if backspace is pressed, remove the dash
  if (unicode == 8){
    var value = document.getElementById(id).value;
    value = value.substring(0, value.length - 1);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:43:49.713

在您的函数中，*首先*`onchange`检查尾随破折号。如果该字段刚刚更改并且有一个尾随破折号，则用户只是删除了以下字符，您应该为它们删除破折号。删除破折号后，无需执行任何其他操作即可返回。由于在用户再次更改字段之前不会再次触发事件，因此您的代码不会插入另一个破折号，因为在字段中有 6 个或 8 个字符之前不会再次调用它。*`onchange`*

 *当然，这是过于简单化了。在某些情况下，用户可以编辑字符串的中间并将事情搞砸。我建议a）使用库或b）使用一些正则表达式，而不仅仅是检查字段长度。*

# c# - 创建扩展配置文件时在 UserProfile 中插入重复数据

> ID：15469570
> 
> 赞同：1
> 
> 时间：2013-03-18T04:04:06.800
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012, ef-code-first, simplemembership

我已经成功地创建了一个`ExtendedProfile`，`UserProfile`在`UserProfile`创建并登录之后。但是每次我创建一个`ExtendedProfile`时，用户的数据`UserProfile`都会被重复，`UserId`而我创建的数据`ExtendedProfile`是重复的`UserId`。[类似的帖子在这里](https://stackoverflow.com/questions/14165581/using-userprofile-foreign-key-in-class-creates-new-profiles-in-mvc-4)

我的实体设计：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }

    public string UserName { get; set; }

    public string Email { get; set; }
} 
```

**扩展型材**

```
public class ExtendedProfile
{        
    [Required]
    [Key]
    [ForeignKey("UserProfile"), DatabaseGenerated(DatabaseGeneratedOption.None)]
    [HiddenInput(DisplayValue = false)]
    public int UserId { get; set; }

    [Display(Name = "First name")]
    public string FirstName { get; set; }

    [Display(Name = "Last name")]
    public string LastName { get; set; }        

    public virtual UserContact UserContact { get; set; }

    public virtual UserProfile UserProfile { get; set; }
} 
```

**用户联系**

```
public class UserContact
{
    [Key]
    [Required]
    [ForeignKey("ExtendedProfile")]
    [HiddenInput(DisplayValue = false)]
    public int UserId { get; set; }

    [DataType(DataType.PhoneNumber)]
    [Display(Name = "Phone:")]
    public string Phone { get; set; }

    public virtual ExtendedProfile ExtendedProfile { get; set; }
} 
```

**创建动作**

```
[HttpGet]
    public ActionResult Create()
    {            
        return View();
    }

    [HttpPost]
    public ActionResult Create(CreateExtendedUserViewModel model)
    {
        if (ModelState.IsValid)
        {
            try
            {
                var userId = WebSecurity.GetUserId(System.Web.HttpContext.Current.User.Identity.Name);
                var userProfile = _dataSource.UserProfiles.FirstOrDefault(u => u.UserId == userId);

                if (userProfile != null)
                {
                    var extendedProfile= new ExtendedProfile
                                        {
                                            UserProfile = userProfile,
                                            FirstName = model.FirstName,
                                            LastName = model.LastName,
                                            UserContact = new UserContact
                                                                {
                                                                   Phone = mode.Phone
                                                                }
                                        };
                    _dataSource.SaveUser(extendedProfile);
                    return RedirectToAction("About", "Home");
                }
            }
            catch (Exception)
            {
                ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists, see your system administrator.");
                throw;
            }
        }
        return View(model);
    } 
```

**编辑**

**保存用户（）**

```
public void SaveUser(ExtendedUser user)
    {
        using (var context = new EFContextDb())
        {
            if (user.UserId== 0)
            {
                context.ExtendedUsers.Add(user);
            }
            else if (user.UserId> 0)
            {
                 var currentUser = context.ExtendedUsers
                    .Include(c => c.UserContact)
                    .Single(t => t.UserId== player.UserId);

                context.Entry(currentUser).CurrentValues.SetValues(user);
                currentUser.UserContact = user.UserContact;
            }
            context.SaveChanges();
        }
    } 
```

我只是不明白为什么它会返回并将数据插入成员表中。除非，也许我需要为成员表和其他添加的表使用不同的上下文。

无论如何，即使我在我的控制器中使用开箱即用，也会发生同样的`context.ExtendedUsers.Add(user);`情况。`context.SaveChanges();`我开始认为这与 IoC（Ninject）有关，因为我制作了一个没有 IoC 的演示应用程序，并且一切正常。

# jquery - $(window).height() 似乎不准确

> ID：15469572
> 
> 赞同：0
> 
> 时间：2013-03-18T04:04:10.320
> 
> 标签：jquery, css, height

[http://jsfiddle.net/WL5nr/1/](http://jsfiddle.net/WL5nr/1/)

我有一个高度大于屏幕的 div，我试图消除滚动条并让它仍然填满页面（无论页面大小）。我设置`overflow: hidden`然后设置`$(window).height()`但我仍然看到一个滚动条。

这样做`$(window).height() - 20`可以消除它，但似乎我不应该这样做。所以也许`- 20`可以在 jsfiddle.net 窗口中工作......如果窗口更大怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T04:12:05.027

窗口高度不考虑默认应用于正文的边距。如果你消除这个边距，你应该得到你想要的效果：

```
html, body {
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T04:11:59.780

你没有考虑到身体的边缘。见[http://jsfiddle.net/zerkms/Hmw7M/](http://jsfiddle.net/zerkms/Hmw7M/)

```
body {
    padding: 0;
    margin: 0;
} 
```

# javascript - Underscore.js - 没有和差异方法的麻烦

> ID：15469577
> 
> 赞同：1
> 
> 时间：2013-03-18T04:04:32.760
> 
> 标签：javascript, node.js, underscore.js

我正在尝试使用 underscore.js 库中的 _.without 和 _.difference 方法，但没有成功。

这是一些代码。

```
var someIds = _.pluck(parsedID1, 'id');
var otherIds = _.pluck(parsedID2, 'id); 
```

这是麻烦开始的地方，我想从 someId 的列表中删除所有 otherIds。所以根据网站我有两个选择，要么我可以使用_.difference || _。没有。我像这样使用它们...

```
var newArray = _.without(_.toArray(someIds), _.toArray(otherIds)); 
```

我也尝试使用 _.difference 来做到这一点，但除了将第一个参数的副本返回到函数中之外，我似乎无法让这些方法做任何事情。我也尝试在不使用 _.toArray() 的情况下将参数传递给函数，但同样的事情发生了。以前有没有人遇到过这个错误？

编辑：

我已经尝试了下面建议的方式。我将提供更多代码以希望解决此问题。

我作为参数传入的数组采用以下格式。

```
var array = ['100004191488120', '100004191488321']; 
```

当我进入 _.difference 时，我执行以下操作：

```
var newArray = _.difference(someIds, otherIds); 
```

如果 someIds 长度是 657 而 otherIds 是 57 我应该得到 600 Id 的结果。相反，无论第一个参数的长度是多少，我都会得到一个结果，即 657。

编辑2：解决

我弄清楚了问题所在，毕竟问题出在我传递的差异的第二个论点上。

我正在执行数据库查询并返回一个如下所示的列表。

```
[{ _id: 514721152222111116666777, facebook: { id: '123456789' } },
 { _id: 514721152222111116666778, facebook: { id: '12345678' } },] 
```

收到这些结果后，我想获得 facebook id，所以我做了以下操作，

```
var array = _.pluck(users, 'facebook.id'); 
```

这就是问题所在，那个 pluck 给我发回了一个未定义的列表。相反，我必须先进行 2 次弹拨，而不是 1 次，如下所示。

```
var temp = _.pluck(users, 'facebook'); 
var arrayId = _.pluck(temp, 'id'); 
```

感谢@ZenMaster 放弃了关于 _.without && _.difference 之间差异的知识。你的答案是正确的，在一个活页夹后相当脑死，没有看到明显的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T04:20:05.687

1.  您不需要函数`_.toArray`的第一个参数`without`
2.  的第二个（以及更多）参数`without`不是一个数组——它是一个值的“列表”。

正确的调用是：

`var newArray = _.without(['1', '2', '3'], '1', '3');`

这将导致：

`['2']`

在您的情况下，您必须使用此处的[JSFiddle](http://jsfiddle.net/GdKvv/1/)`_.difference`中所见。

这是代码：

```
var parsedID1 = [{id: '1', name: 'name1'}, {id: '2', name: 'name2'}];
var parsedID2 = [{id: '1', name: 'name1'}, {id: '3', name: 'name3'}];

var someIds = _.pluck(parsedID1, 'id');
var otherIds = _.pluck(parsedID2, 'id');

console.log(someIds, otherIds);

var newArray = _.difference(someIds, otherIds);

console.log(newArray); 
```

# python - 当我实例化一个 python 子类时，它会覆盖基类的属性

> ID：15469579
> 
> 赞同：3
> 
> 时间：2013-03-18T04:04:46.457
> 
> 标签：python, class

代码如下所示：

```
class A(object):
    x = 0
    y = 0
    z = []
    def __init__(self):
        super(A, self).__init__()
        if not self.y:
            self.y = self.x
        if not self.z:
            self.z.append(self.x)

class B(A):
    x = 1

class C(A):
    x = 2

print C().y, C().z
print B().y, B().z 
```

输出是

```
2 [2]
1 [2] 
```

为什么被`z`覆盖而不被覆盖`y`？是不是因为它不是不可变类型？我查看了python的文档并没有找到解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T04:18:31.177

是的，这是因为一个是不可变的，一个不是。或者更确切地说，是你在变异一个，而不是另一个。（重要的不是对象是否“可变”，重要的是你是否真的改变了它。）这也是因为你使用的是类变量而不是实例变量（参见[这个问题](https://stackoverflow.com/questions/11040438/class-variables-is-shared-across-all-instances-in-python)）。

在您的类定义中，您创建三个类变量，在类的所有实例之间共享。创建类的实例后，如果您`self.x`在该实例上执行此操作，它将不会`x`作为实例上的属性找到，但会在类上查找它。同样`self.z`会在班级上查找并找到班级上的那个。请注意，因为您创建了`z`一个类变量，所以只有*一个*列表在类的所有实例之间共享（包括所有子类的所有实例，除非它们覆盖`z`）。

当你这样做时`self.y = self.x`，你只在实例上创建一个*新*属性，一个*实例*属性。

但是，当您这样做时`self.z.append(...)`，您不会创建新的实例变量。相反，`self.z`查找存储在类中的列表，然后`append`改变该列表。没有“覆盖”。只有一个列表，当您执行追加时，您正在更改其内容。（只附加了一项，因为你有`if not self.z`，所以在你附加一项之后，这是错误的，随后的调用不会再附加任何东西。）

结果是读取属性的值与分配给它不同。当您读取 的值时`self.x`，您可能正在检索存储在类中并在所有实例之间共享的值。然而，如果你给 赋值`self.x`，你总是在赋值给一个实例属性；如果已经有同名的类属性，您的实例属性将隐藏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:18:35.593

问题是`x`and`y`是不可变的，while`z`是可变的，你改变它。

`self.z.append()`不替换`z`，它只是添加一个项目到`z`.

运行`C()`后`print C().y, C().z`（创建两个不同的`C`对象），`self.z`不再计算为，`False`因为它不再为空。

如果你颠倒你的两条`print`线，你会发现输出是

```
1 [1]
2 [1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:20:57.387

当 Python 评估它的主体时，`class A`它会实例化一个`list`对象并将其分配给`z`. 由于子类不会覆盖它，并且由于`list`对象在 Python 中通过引用存储，因此所有三个类共享相同的`z`列表，因此您实例化的第一个类将被填充`z`，然后其余的只是获取放在那里的任何内容。尽管您更改了列表的*内容*，但并未更改`z`指向哪个列表。

这不会影响`y`，因为您将整数直接分配到对象的内部字典中，替换之前的值。

要解决此问题，请在构造函数中创建数组，从而分配：

```
class A(object):
    x = 0
    y = 0
    z = None
    def __init__(self):
        super(A, self).__init__()
        if not self.y:
            self.y = self.x
        if not self.z:
            # create a new list
            z = [self.x]

class B(A):
    x = 1

class C(A):
    x = 2

print C().y, C().z
print B().y, B().z 
```

# javascript - 如何避免条件表达式中咖啡脚本中的隐式“返回”？

> ID：15469580
> 
> 赞同：12
> 
> 时间：2013-03-18T04:04:47.923
> 
> 标签：javascript, node.js, coffeescript, deferred, promise

我正在实现一个具有延迟返回值的函数，并且在函数内我有许多嵌套的条件表达式：

例如：

```
deferred = Q.defer()
FS.readFile("foo.txt", "utf-8", (error, text) ->
    if error
      deferred.reject(new Error(error))
    else
      deferred.resolve(text)
)
return deferred.promise 
```

这将被编译成：

```
var deferred;

deferred = Q.defer();

FS.readFile("foo.txt", "utf-8", function(error, text) {
  if (error) {
    --> return <-- deferred.reject(new Error(error));
  } else {
    --> return <-- deferred.resolve(text);
  }
});

return deferred.promise; 
```

我只需要最后一次返回，而不需要 if/else 返回（即**--> return <--**在编译代码中）

如何避免咖啡脚本编译器的这种行为（在不需要的地方隐式返回）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T04:07:54.540

Coffeescript 会自动返回最后一个表达式的结果，因此如果您不希望它返回最后一个表达式的结果，`if`那么您需要添加另一个表达式。在这种情况下，只需添加`return`.

```
FS.readFile "foo.txt", "utf-8", (error, text) ->
  if error
    deferred.reject new Error(error)
  else
    deferred.resolve text
  return 
```

另外，`error`已经是一个`Error`对象，所以你可以直接拒绝它。

```
deferred.reject(error) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T04:12:21.147

你不能，确切地说。您可以在不需要时忽略它们（这是最常见的做法），也可以通过在函数末尾添加附加语句来提供明确的替代方案。我认为在你的代码库中一直尝试这样做是在与你无法获胜的语言进行一场战争，所以我个人的建议是接受 Ashkenas 先生的隐含回报，然后继续你的快乐之路。

```
fs.readFile "foo.txt", "utf-8", (error, text) ->

  # postfix style if statement here avoids the else
  # of course, the value returned you may not like, so 
  # you probably won't use this style, but my boilerplate for
  # error handling is
  # return callback(error) if error

  return deferred.reject(new Error(error)) if error
  deferred.resolve(text)

  # Here you can add an explicit return like
  return

  # or some other expression
  null

  # or 'this' in cases where chainability might be nice
  this

  # or so you don't accidentally delete this statement later thinking it is
  # useless
  return null 
```

这些形式中的任何一种都可以，但实际上我不经常看到这些

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T10:27:03.923

我总是这样做：

```
f = ->
  deferred = Q.defer()
  FS.readFile ..., ( error, text ) ->
    return deferred.reject error if error?
    deferred.resolve text
  return deferred.promise 
```

第一个`return`是停止执行，而不是返回值。

`return`您仍然可以从回调的最后一行在您的 JS 中获得额外的（且毫无意义的） ；为了避免那个，插入一个额外的`return null`（或者`return`如果你愿意的话）。

我不确定我是否喜欢 CoffeeScript 的隐式`return`插入；可能会声称“显式优于隐式”。此外，可以说第一个`return`不应该是一个`return`关键字，而是另一个关键字，比如，说，`stop`或`finish`类似的。

作为一个不相关的旁注，我在使用 Promise 时没有观察到任何明显的优势。相反，我发现它们在我的代码中非常具有侵入性，与那些`deferred`放在异步编程之上的 s 和其他概念有关。

# iphone - 使用 Cocos2d 碰撞检测时如何引用 sprite？

> ID：15469582
> 
> 赞同：0
> 
> 时间：2013-03-18T04:04:53.163
> 
> 标签：iphone, cocos2d-iphone

使用下面的方法，当检查它们是否相交时，如何参考特定的精灵？

```
- (void)update:(ccTime)dt {
    for (CCSprite *sprite in movableSprites) {
        if (CGRectIntersectsRect(sprite.boundingBox, sprite.boundingBox)) {
            break;
        }
    }
} 
```

似乎所有精灵都可以在 moveableSprites 对象中使用，但我不知道如何检查特定精灵是否正在碰撞......我不知道如何引用它们。如果有更简单的方法来执行碰撞检测，我很感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T05:56:00.843

看来您上面的代码将始终返回 TRUE，因为您正在检查 sprite 的边界框是否与**sprite****碰撞**，并且由于它们是相同的，所以它总是会。

 **```
if (CGRectIntersectsRect(sprite.boundingBox, sprite.boundingBox)) {//
        break;
    } 
```

应该与不同的精灵而不是相同的精灵进行比较。

```
if (CGRectIntersectsRect(sprite.boundingBox, otherSprite.boundingBox)) {//
        break;
    } 
```

如果这不能回答您的问题，也许您希望避免通过数组进行枚举？如果是这种情况，请尝试使用**tags**。有点像下面。

```
 CCSprite *aSprite = [CCSprite spriteWithFile:@"hurdle1.png"];

    [self addChild:aSprite tag:2]; 
```

现在 [self getChildByTag:2] 可以代替 sprite，您只需添加 boundingBox 来检查碰撞，如下所示。

```
 if (CGRectIntersectsRect([self getChildByTag:2].boundingBox, checkSprite.boundingBox)) {//
        break;
    } 
```**

# python - 烧瓶函数在同一个应用程序中调用其他烧瓶函数？

> ID：15469586
> 
> 赞同：2
> 
> 时间：2013-03-18T04:05:48.513
> 
> 标签：python, flask

我有几个烧瓶函数连接起来，以便我可以在以下位置调用它们：

```
localhost:5000/FunctionA/inputs
localhost:5000/FunctionB/inputs
localhost:5000/FunctionC/inputs 
```

我希望 functionC 能够调用 FunctionA 和 FunctionB。我该怎么做呢？当我尝试在 FunctionC 中编写调用以调用另一个调用（例如 FunctionA）时，调用会无限期挂起（可以理解 - FunctionC 正在等待自身结束，以便端点可以自由处理 functionA 请求）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-29T14:37:14.253

这已在此处得到解答：[在 Flask 中处理多个请求](https://stackoverflow.com/questions/14672753/handling-multiple-requests-in-flask)

但是 TLDR；你只需要像这样设置你的运行功能：

```
app.run(threaded=True) 
```

我假设您正在使用 Flask 服务器，并且需要在开发时运行它。对于生产检查上面链接中的选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T21:44:28.610

我不确定您到底在问什么，但是当用户访问函数 C 时，您可以轻松地为函数 A 和函数B 发起 GET 请求*客户端。*AJAX 允许您在后台执行此操作而无需重新加载页面。jQuery 使 AJAX 变得简单。在您的 Jinja 模板中，只需像这样加载 jQuery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" ></script> 
```

然后当文档已经加载（即用户访问functionC并且页面已经渲染）时，只需执行以下操作：

```
<script>
$(document).ready(function(){

    $.get("localhost:5000/FunctionA/inputs");
    $.get("localhost:5000/FunctionA/inputs");
});
</script> 
```

上面的代码只会向指定的 URL 发送一个 GET 请求并忽略它们的任何响应，但是 jQuery[文档](http://api.jquery.com/jquery.get/)显示了如何处理 Flask 应用程序返回的数据（例如，获取响应并将其发送到 functionC 作为URL 变量）。

如果你真的想将用户重定向到服务器端的每个视图函数，你所要做的就是使用 Flask 的`redirect`函数。这是[文档](http://flask.pocoo.org/docs/api/#flask.redirect)。

希望这可以帮助。

# c# - 带有字符串成员的结构？可以接受无效的默认实例？

> ID：15469587
> 
> 赞同：0
> 
> 时间：2013-03-18T04:05:56.747
> 
> 标签：c#, struct

这是结构的良好候选者吗？

考虑这个不可变结构示例，其中构造函数验证输入并将验证数据存储为单个“路由代码”：

```
struct RoutingCode
{
  private readonly string routingCode;

  RoutingCode(string prefix, string service, string sender)
  {
    // Validate prefix, service, sender strings
    // ...

    if (isInvalid) throw ArgumentException();

    // 
    this.routingCode = prefix + service + sender;
  }

  // Gets the validated routing code.
  public string Routing
  {
    return this.routingCode;
  }

  public int RoutingLength
  {
    return this.routingCode.Length;
  }
} 
```

在我看来，这个简化的示例是使用 a`struct`而不是a 的好选择`class`：

*   它是不可变的。
*   它代表一个奇异值。
*   实例大小很小。

**问题**是所有结构都有一个隐式的默认构造函数。在这个例子中，默认构造函数`RoutingCode()`将实例化一个`Routing`属性返回的对象`null`——这是一个无效的路由代码。`Point`这与其他结构不同，例如`BigInteger`支持字段包含默认实例的非常合乎逻辑且有效的“零”。

除了不确保有效的路由代码之外，该`RoutingLength`属性还会在默认实例上引发`NullReferenceException`if 调用。

保持 this a`struct`与使其成为 a的论据是`class`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:23:26.607

您可以轻松解决默认值问题：

```
struct RoutingCode
{
  private readonly string routingCode;    
  RoutingCode(string prefix, string service, string sender)
  {
    // Validate prefix, service, sender strings
    // ...
    if (isInvalid) throw ArgumentException();
    this.routingCode = prefix + service + sender;
  }

  public string IsValid 
  {
    get { return this.routingCode != null; }
  }

  // Gets the validated routing code.
  public string Routing
  {
    get { return this.routingCode; }
  }

  public int RoutingLength
  {
    get { return this.routingCode == null ? 0 : this.routingCode.Length; }
  }
} 
```

好的，现在所有属性都不会引发异常，并且您可以判断该值是否无效。手头的问题是这是否是结构的良好候选者。你是对的，它（1）不可变，（2）小，（3）逻辑上是一个值。如果您愿意接受可以表示无效值的事实，那么这可能是结构的良好候选者。

不过，一个更好的问题是：这是否有充分的理由不成为一堂课？与其寻找反对使其成为结构的反对意见，不如寻找反对使其成为类的反对意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T23:01:01.217

隐藏字段结构可能具有未初始化实例的行为，就好像它们拥有任何特定的所需值[对于给定类型的所有未初始化实例，默认值必须相同]。只需让每个属性访问器或方法检查该类型是否包含系统默认值，如果是，则替换所需的默认值。

如果希望允许代码创建一个实例，`Routing`而`null`没有这样的实例假设这`Routing`是默认值，则可以让该类型声明一个等于新 GUID 的静态字符串（或其他不会出现的东西其他地方），然后修改构造函数和`get`方法：

```
static string stringRepresentingNull = Guid.NewGuid().ToString();

RoutingCode(string wholeString)
{
  if (wholeString == null) 
    wholeString = stringRepresentingNull;
  this.routingCode = wholeString;
}

public string Routing
{
  get { 
    if (this.routingCode == null) 
      return "12-3456-789"; // Default routing string
    else if (Object.ReferenceEquals(routingCode,stringRepresentingNull)
      return null;
    else
      return routingCode;
} 
```

请注意，即使外部代码以某种方式设法猜测与类型关联的 GUID，外部代码也无法生成字符串 where `ReferenceEquals`will match `stringRepresentingNull`。

同样，如果想要拥有`int`一个默认值为 123 的属性，则可以存储`backingField=(desiredValue ^ 123)`并拥有属性 getter yield `backingField ^ 123`。

类型应该是结构还是类的问题很大程度上归结为一个人是否希望类型的默认值表现为 a`null`或作为有效值。如果想要一个空默认值，请使用一个类。如果想要一个有效的默认值，请使用结构。

# php - DOMXPATH-> 没有得到 div 的第一个元素

> ID：15469589
> 
> 赞同：0
> 
> 时间：2013-03-18T04:06:06.250
> 
> 标签：php, xpath, microdata, schema.org, domxpath

我正在使用 DOMXPath 来获取特定节点的内容。对于我的问题，我想获取除嵌套 div 之外的匹配 div 的所有文本。

```
$html = 
'<div itemscope="itemscope" itemtype="http://schema.org/Event">
  <span itemprop="name"> Miami Heat at Philadelphia 76ers - Game 3 (Home Game 1)</span>
  <meta itemprop="startDate" content="2016-04-21">
    Thu, 04/21/16
    8:00 p.m    
  <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/AggregateOffer">
    Priced from: <span itemprop="lowPrice">$35</span>
    <span itemprop="offerCount">1938</span> tickets left
  </div>
  <meta itemprop="endDate" content="2020-3-2"> end date of year    
  <div itemprop="attendee" itemscope="itemscope" itemtype="http://schema.org/Person">
     <span itemprop="name">Jane Doe</span>
     <meta itemprop="birthDate" content="1975-05-06"> 
    <div itemprop="sibling" itemscope="itemscope" itemtype="http://schema.org/Person">
        <span itemprop="name">Fatima Zohra</span>
        <meta itemprop="birthDate" content="1991-6-5">Jan 6
     </div>      
  </div>
</div>'; 
```

我首先尝试了以下方法，但这并没有返回嵌套的 div：

```
$tags = $xpath->query("//div[@itemscope='itemscope'][not(self::div)]/text()"); 
```

我目前的尝试如下，但不起作用：

```
$dom = new DOMDocument;
$dom->loadHTML($html);
$xpath = new DOMXPath($dom);
$tags = $xpath->query('//div[not(ancestor::div)]');

foreach ($tags as $node) {
    echo $node->nodeValue; // body

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:37:54.410

这个问题最好分成两部分：

1.  返回匹配的 div 列表
2.  打印每个 div 的所有内容，除了包含 div 的内容

下面演示了这种方法：

```
$dom = new DOMDocument;
$dom->loadHTML($html);
$xpath = new DOMXPath($dom);
$divs = $xpath->query("//div[@itemscope='itemscope']");

foreach ($divs as $div) {
        $nodelist = $xpath->query('child::node()[not(self::div)][normalize-space()]',$div);

        foreach ($nodelist as $node) {
                echo $node->nodeValue . "\n";
        }
        echo "\n---------------------\n";
} 
```

请注意以下事项：

*   'child::node()' 而不是 '*' 包括文本节点
*   '[normalize-space()] 删除多余的空格，包括换行符

顺便说一句，'not(ancestor::div)' 明确表示不要返回嵌套在其他 div 中的 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:50:42.107

您要查找的[*微数据*](http://schema.org/docs/gs.html)`itemprop`带有、`itemscope`和属性`itemtype`。`content`

所以您的问题实际上是关于如何从该 HMTL 文档中获取微数据。这基本上是 XML 解析的问题。由于 schema.org 微数据是（或多或少直截了当），我强烈建议使用 DOMDocument 加载 HMTL 文档，但使用 SimpleXML 来解析数据。

基于 libxml 的 PHP XML 扩展中的解析不能单独使用 xpath，因为该库仅支持 xpath 1.0，您无法使用该 xpath 版本完成所有操作。尤其是在这种情况下，仅选择具有特定属性的后代或自身，该特定属性相对于不包含具有该特定属性的子节点的上下文节点*。*所以这总是需要一些包装代码。如果您有兴趣了解更多相关信息，我发现以下问题与您的类似 xpath 问题有关：

*   [XPath/XSLT 嵌套谓词：如何获取外部谓词的上下文？](https://stackoverflow.com/q/6595034/367456)

因此，将 xpath 代码包装在某个类中并立即访问感兴趣的数据：

```
$dom = new DOMDocument;
$dom->loadHTML($html);

$micro = new Micro($dom);
$event = $micro->Event;

foreach($event as $name => $value) {
    if ($value->isEmbed()) continue;
    printf("%s => %s\n", $name, $value);
} 
```

给出以下输出：

```
name =>  Miami Heat at Philadelphia 76ers - Game 3 (Home Game 1)
startDate => 2016-04-21
endDate => 2020-3-2 
```

或者您只需访问：

```
$micro->Event->name; # Miami Heat at Philadelphia 76ers - Game 3 (Home Game 1) 
```

微[`Micro`数据类作为 gist](https://gist.github.com/hakre/5201711)。

# python - 在 iPython 中使用 HDF5 文件时出现异常“HDFStore 需要 PyTables”

> ID：15469594
> 
> 赞同：3
> 
> 时间：2013-03-18T04:06:42.633
> 
> 标签：python, pandas, hdf5

我对 Python 很陌生，正在尝试使用 HDFStore 在 pandas 中创建一个表，如下所示

```
store = HDFStore('store.h5') 
```

我得到了例外：

```
Exception                                 Traceback (most recent call last)
C:\Python27\<ipython-input-11-de3060b689e6> in <module>()
----> 1 store = HDFStore('store.h5')

C:\Python27\lib\site-packages\pandas-0.10.1-py2.7-win32.egg\pandas\io\pytables.pyc in __init__(self, path, mode, complevel, complib, fletcher32)
    196             import tables as _
    197         except ImportError:  # pragma: no cover
--> 198             raise Exception('HDFStore requires PyTables')
    199 
    200         self.path = path

Exception: HDFStore requires PyTables 
```

我已经安装了 Pytables，它存在于站点包中。pandas(0.l0.1) 和 pytables(2.4.0) 都是 32 位 Windows 版本。32 位 Windows 的 Python 版本为 2.7.3

我正在使用 ipython notebook 运行它。

我忘了补充说我有 Windows 7 - 64 位操作系统，但 Python 及其所有相关的附加组件都是 32 位的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-12T12:39:48.923

**使用HDFStore**时我也遇到了同样的错误。我尝试了上面指定的所有步骤并花了很多时间寻找解决方案，但没有一个成功。

然后我下载并安装了[MiniConda](http://conda.pydata.org/miniconda.html)。然后我使用以下命令安装 pytables。

```
conda install -c conda-forge pytables 
```

请参考下面的截图。

[![在此处输入图像描述](../Images/7c7cdbe9a9c490ac0e058704ee81cb0f.png)](https://i.stack.imgur.com/Y1z77.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T17:55:32.070

我怀疑您的问题是您没有将 Python 脚本添加到系统中`PATH`。假设查看[本教程](http://www.voidspace.org.uk/python/articles/command_line.shtml#environment-variables)以了解如何操作。

您正在寻找添加`C:\Python27, C:\Python27\Lib. and C:\Python27\Scripts`. 确保用 . 分隔每一个`;`。还要确保将其添加到系统`PATH`变量中，而不仅仅是用户`PATH`变量。

经过所有的检查`import pytables`。它不应再抛出错误，因为 python 将“知道” pytables 已安装并能够找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-29T03:23:43.780

我有同样的问题。我正在使用 win7 + anaconda python2.7 + IPython。

但我通过以下步骤修复了它：

从 [http://www.lfd.uci.edu/~gohlke/pythonlibs/#pytables](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pytables)
下载文件表‑3.2.1‑cp27‑none‑win_amd64.whl

并用 cmd 安装

```
pip install tables‑3.2.1‑cp27‑none‑win_amd64.whl 
```

安装后问题解决。

参考： http: [//www.pytables.org/usersguide/installation.html#binary-installation-windows](http://www.pytables.org/usersguide/installation.html#binary-installation-windows)

# java - 简单易懂的spring登录应用

> ID：15469597
> 
> 赞同：9
> 
> 时间：2013-03-18T04:07:12.563
> 
> 标签：java, spring, spring-mvc, spring-security

我对spring很陌生，今天才开始学习，我正在寻找一个简单的登录应用程序，它也将解释应用程序的流程。

当我用谷歌搜索时，我真的找不到一个：

1.  [http://viralpatel.net/blogs/tutorial-spring-3-mvc-introduction-spring-mvc-framework/](http://viralpatel.net/blogs/tutorial-spring-3-mvc-introduction-spring-mvc-framework/)
2.  [http://www.tutorialspoint.com/spring/spring_mvc_hello_world_example.htm](http://www.tutorialspoint.com/spring/spring_mvc_hello_world_example.htm)

ETC..

请不要投票或关闭这个问题，因为这不仅对我有帮助，而且对很多人都有帮助。

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T05:52:36.697

对于**简单的登录应用程序**：

[Spring-security-form-login-example:mkyong](http://www.mkyong.com/spring-security/spring-security-form-login-example/)

[spring-mvc-登录示例：roseindia](http://www.roseindia.net/spring/spring-mvc-login-example.shtml)

**入门教程**+**演示示例**+**推荐书籍**：[Spring MVC Framework with Example](http://www.javabeat.net/2007/06/introduction-to-spring-mvc-web-framework-web-tier/) javabeat.net

可能这个问题和建议的答案也很有用：
[step-by-step-login-example-using-spring-security-3-0-with-hdbc:stackoverflow](https://stackoverflow.com/questions/7977575/step-by-step-login-example-using-spring-security-3-0-with-hdbc)

对于初学者来说，他们不太容易上手。你可以很容易地谷歌这些教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:44:43.800

尽管您的问题很容易被谷歌搜索到答案。

我认为您应该尝试一下，它将教您如何进行特定于需求的搜索。

您可能会在以下位置找到一系列弹簧教程

[Mkyong网站](http://www.mkyong.com/spring-mvc/)

[登录示例](http://www.mkyong.com/spring-mvc/spring-mvc-password-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:20:58.030

我也可以推荐 mkyongs 教程。那对我有帮助： [http ://www.mkyong.com/spring-security/spring-security-form-login-example/](http://www.mkyong.com/spring-security/spring-security-form-login-example/)

此外，您可以使用 Spring Roo 自动生成登录表单并使用它

```
roo> security setup 
```

[但是，如果您想获得更详细的介绍，可以通过 Mike Wiesner http://www.infoq.com/presentations/Spring-Security-3](http://www.infoq.com/presentations/Spring-Security-3)在线观看有关 Spring Security 的网络研讨会

# ruby-on-rails - 为什么要瘦在 nginx 后面？

> ID：15469598
> 
> 赞同：5
> 
> 时间：2013-03-18T04:07:12.673
> 
> 标签：ruby-on-rails, ruby, nginx, thin

部署我的第一个 Web 应用程序。我一直在使用thin，它简单易用。我只需要一个配置文件。

但是很多人使用 nginx 并在其后面放置了几个瘦实例。为什么？为什么不单独使用薄？为什么要使用 nginx 而不是在单个瘦实例后面放置 3 个瘦实例？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T13:41:10.653

可扩展性是主要原因。虽然 Thin 可以执行 SSL、提供静态文件并处理对慢速客户端的大量响应，但对于任何给定的 CPU 和内存占用，Nginx 在所有这些方面都做得更好。更好的是，Nginx 可以透明地完成所有这些操作，这样应用程序就不会实现任何受益。它也是一个不错的负载均衡器。

一旦您的应用程序扩展到一台机器之外，无论如何您都将需要 Nginx 之类的东西，并且从一开始就实施它并没有什么坏处。即使您的应用程序不需要扩展，使用 Nginx 也有其他原因——尤其是如果您在同一台机器上运行多个 Web 应用程序，或者该应用程序是模块化的。

# php - PHP & MYSQL 返回空白页

> ID：15469603
> 
> 赞同：0
> 
> 时间：2013-03-18T04:08:00.153
> 
> 标签：php, mysql

我正在为一个项目开发 PHP 和 MYSQL，我在这里遇到了一个奇怪的问题，我点击表单上的提交按钮，它将运行这些代码。然而奇怪的问题是页面返回空白而不是返回到带有表单的页面。我已经搜索了几个小时的错误，但找不到它。

请指出我的错误。感谢您的帮助。

```
<?php
include '../database.php';

if(isset($_POST['submit'])) { 

    if (isset($_POST['stuid_0'])){

        $student = $_POST['stuid_0'];

        //query moderator details
        $query = mysql_query(" SELECT ModeratorID FROM Student WHERE StuID ='$student' ") or die(mysql_error());
        $info = mysql_fetch_assoc ($query);
        $dbmoderator = $info['ModeratorID'];

            //check for changes of status in supervisor
            $query2 = mysql_query(" SELECT SupervisorID FROM Student WHERE StuID ='$student' ") or die(mysql_error());
            $value = mysql_fetch_assoc ($query2);
            $dbsupervisor = $value['SupervisorID'];
            $query3 = mysql_query(" SELECT LectStatus FROM Lecturer WHERE LectID ='$dbsupervisor' ") or die(mysql_error());
            $value2 = mysql_fetch_assoc ($query3);
            $dbsupervisorstatus = $value2['LectStatus'];

            //if no changes in supervisor
            if ($dbsupervisorstatus=='2'){ 
                echo ("<SCRIPT LANGUAGE='JavaScript'>
                window.alert('Moderator can't be promoted')
                window.location.href='../committee/committee_supervisor2.php'
                </SCRIPT>"); 

            }
            else{
             //newly assigned a supervisor if previous supervisor status is not active
            $query4 = "UPDATE Student SET SupervisorID='$dbmoderator', SupervisorStatus='1', ModeratorID=NULL WHERE StuID='$student'";
            mysql_query($query4);

            echo ("<SCRIPT LANGUAGE='JavaScript'>
                window.alert('Successfully updated')
                window.location.href='../committee/committee_supervisor2.php'
                </SCRIPT>"); 
            }
    }
    else
        echo ("<SCRIPT LANGUAGE='JavaScript'>
        window.alert('You must choose a moderator to be promoted')
        window.location.href='../committee/committee_supervisor2.php'
        </SCRIPT>");
}
?> 
```

更新：我认为此时系统运行时会出现问题

```
if ($dbsupervisorstatus=='2'){ 
```

当我回声“测试”时；在这条线之前，它仍然有效。

更新 2：

发现放的时候代码可以运行

```
if ($dbsupervisorstatus=='2'){ 
                echo "Moderator can't be promoted"; 

            } 
```

也

```
 if($dbsupervisorstatus == 2){
  header("location:commitee_supervisor2.php");
   } 
```

但是我看不到我的原始代码的原因

```
if ($dbsupervisorstatus=='2'){ 
                echo ("<SCRIPT LANGUAGE='JavaScript'>
                window.alert('Moderator can't be promoted')
                window.location.href='../committee/committee_supervisor2.php'
                </SCRIPT>"); 

            } 
```

不工作..有点帮助请.. :)

**最后更新**

伙计们，我知道为什么。

这是因为

```
window.alert('Moderator can't be promoted') 
```

里面有 3 个撇号。

我只是删除了“不能”这个词，它已经开始工作了。

谢谢你们的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:19:46.273

使用 JavaScript 代码代码仍然有效，但调试的起点是在所有您回显 JavaScript 的地方回显普通文本。这将帮助您了解您的代码在什么时候开始失败。例子

```
//if no changes in supervisor
            if ($dbsupervisorstatus=='2'){ 
                echo ("<SCRIPT LANGUAGE='JavaScript'>
                window.alert('Moderator can't be promoted')
                window.location.href='../committee/committee_supervisor2.php'
                </SCRIPT>"); 

            } 
```

用。。。来代替

```
//if no changes in supervisor
            if ($dbsupervisorstatus=='2'){ 
                echo "Moderator can't be promoted"; 

            } 
```

在所有回显点执行此操作，然后再次开始用您的 JavaScript 代码一个接一个地替换，然后您会发现代码失败的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:17:36.717

不要通过 javascript 来做，而是尝试在纯 PHP 中使用更好的方法。就像是：

```
 if($dbsupervisorstatus == 2){
  header("location:commitee_supervisor2.php");
   } 
```

如果你必须使用 JS，然后发出 AJAX 请求，那么你可以通过任何你喜欢的方式通过 JS 来操纵行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:32:04.617

您将 HTML 表单放在哪里？是在同一个页面还是在不同的页面？从您的代码来看，似乎什么都没有做，所以我建议您检查您的提交按钮名称是否正确（提交）。HTML 应该是这样的：

```
<form name="your_form">
    <!-- Your form here -->

    <input type="submit" name="submit" value="Submit"/>
</form> 
```

# java - 比较 Visual Basic sql 和 Java sql

> ID：15469605
> 
> 赞同：1
> 
> 时间：2013-03-18T04:08:32.133
> 
> 标签：java, sql, winforms, sql-server-2005, sqlclient

这是我在 Visual Basic（winform 应用程序）上连接我的项目并触发`SELECT STATEMENT`SQLSERVER 的方式，我现在的问题是我不知道这是否与在 JAVA 应用程序上连接我的项目的方式相同。（当然我知道它应该`Imports java.sql.*`代替 Imports `System.Data.SqlClient`）

```
Imports System.Data.SqlClient

Try
            Dim querystring As String = "SELECT MAX(pIDNo) FROM dbo.Patients"
   Using connection As New SqlConnection("Data Source=****;Initial Catalog=****;Persist Security Info=True;User ID=****;Password=****")
                Dim command As New SqlCommand(querystring, connection)
                connection.Open()
                Dim reader As SqlDataReader = command.ExecuteReader
                Dim value = String.Empty
                While reader.Read
                    value = reader.GetString(0)
                End While
                txtPNumber.Text = Today.Year.ToString().Substring(2, 2) & Today.Month.ToString().PadLeft(2, "0") & (Integer.Parse(value.Substring(4, value.Length - 4)) + 1).ToString("D4")
            End Using
        Catch ex As Exception
            txtPNumber.Text = Today.Year.ToString().Substring(2, 2) & Today.Month.ToString().PadLeft(2, "0") & num.ToString("D4")
        End Try 
```

很难理解如何将我的 java 应用程序连接到 SQLSERVER，因为我缺乏关于此类事情的信息。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-28T00:42:40.873

您可以使用 Microsoft JDBC Driver for Java 从 Java 连接到 SQL Server：[https ://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx](https://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx)

您可以在此处查看一些使用 Microsoft JDBC Driver for Java 的示例应用程序：[https ://msdn.microsoft.com/en-us/library/aa342346%28v=sql.110%29.aspx](https://msdn.microsoft.com/en-us/library/aa342346%28v=sql.110%29.aspx)

# android - 如何优化帧动画？

> ID：15469607
> 
> 赞同：0
> 
> 时间：2013-03-18T04:08:32.697
> 
> 标签：android, android-animation, android-image, animationdrawable

我想做 30 帧的帧动画。我的代码是：

```
animation = new AnimationDrawable();
    for (int i= 1; i<= 30 ; i++){
        frame=  "xyz"+ i;
        resource    =   this.getResources().getIdentifier(frame, "drawable", "com.example.frameanimation");
        Log.e("123", "resource value======"+resource+"============"+frame);

        animation.addFrame(getResources().getDrawable(resource), 50);

            System.gc();

    }

    animation.setOneShot(false); 
```

在这段代码中，我包含了`System.gc();`. 这会帮助我优化内存相关问题吗？或者它仍然可以给出与内存相关的问题。这是否意味着帧动画时内存中存在的 30 张图像将被销毁。

有没有其他方法可以优化这个？请提出建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:01:52.657

System.gc() 是垃圾收集器的提示。这意味着垃圾收集器在执行这行代码后可能不会收集垃圾。

优化这个的好方法是优化你正在加载的drawable。您可以根据屏幕 DPI 加载。在小屏幕内加载大图像是没有用的。阅读这篇关于图像加载[链接](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)的帖子。

您也可以尝试使用主图像作为背景，并且仅在动画中使用动画部分。

或者，您可以尝试使用 SoftReference。如果遇到堆内存问题，这至少可以解决这个问题。

# parallel-processing - 聚合并行数据处理的结果

> ID：15469614
> 
> 赞同：0
> 
> 时间：2013-03-18T04:10:31.203
> 
> 标签：parallel-processing, apache-camel, jms, activemq, apache-servicemix

我想使用 ServiceMix / ActiveMQ / Camel 集群并行处理数据。看来我可以通过首先拆分数据，然后通过多个 JMS 消息和代理的 ActiveMQ 网络分发它来实现这一点。

困难的部分是我最终需要汇总所有节点的所有结果。我目前不确定如何做到这一点。所有结果最终都必须在一个节点上结束。

所以整体流程如下所示： (1) 检索数据。(2) 将其拆分为可管理的块。(3) 通过 ActiveMQ 集群将数据块发布到分布式 JMS 队列中。(4) 在所有节点上处理数据。

现在我不知道如何处理的部分：

(5) 聚合来自*所有*节点的处理数据 (6) 最后处理步骤与聚合结果。

```
 > [Process data (node 1)] >
[Retrieve DATA] >>>[vm://]>>> [SPLIT] >>>[activemq://]>>> [Process data (node 2)] >>>[activemq://]>>> [AGGREGATE] >>>[vm://]>>> [FINALIZE DATA]
                                                        > [Process data (node 3)] > 
```

鉴于 ActiveMQ 代理网络可以愉快地分发所有内容，我该如何实现呢？仅在一个节点上部署最终聚合路由？不喜欢它，因为那会产生 SPOF……</p>

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:52:21.267

好吧，听起来您可以在聚合阶段使用[独占消费者](http://activemq.apache.org/exclusive-consumer.html)。您应该能够在所有节点上运行该聚合路由。

免责声明：我不确定经纪人网络上的这个解决方案。但是您可能可以试一试，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:47:50.550

这个用例听起来像组合消息处理器 eip [http://camel.apache.org/composed-message-processor.html](http://camel.apache.org/composed-message-processor.html)

Camel 仅支持使用拆分器进行聚合，这使其更加容易。请参阅上面的链接，仅关于拆分器。

与竞争消费者一起，您可以让多个节点并行处理数据： http: [//camel.apache.org/competing-consumers.html](http://camel.apache.org/competing-consumers.html)

然后您应该通过 JMS 进行请求/回复，以便将回复消息发送回消息将被聚合的队列： http: [//camel.apache.org/request-reply.html](http://camel.apache.org/request-reply.html)

并确保通过 JMS 研究有关请求/回复的信息，因为有几个选项可以使这更快：[http ://camel.apache.org/jms](http://camel.apache.org/jms)

对于要分发的 ActiveMQ 代理，您可以在代理网络 (NOB) 中设置代理：http: [//activemq.apache.org/networks-of-brokers.html](http://activemq.apache.org/networks-of-brokers.html)

# javascript - 跨浏览器 webfonts 加载事件

> ID：15469615
> 
> 赞同：0
> 
> 时间：2013-03-18T04:10:42.857
> 
> 标签：javascript, dom, webfonts, google-webfonts

我正在尝试从 webfont 测量特定字符的宽度。Google 的[Webfont Loader](https://developers.google.com/webfonts/docs/webfont_loader?hl=fr#Events)提供的活动事件触发有点过早，并且它对默认字体进行了测量。

我正在使用的脚本的精简版本：

```
window.WebFontConfig = {
    google: {
        families: ['Anonymous Pro:400,400italic,700,700italic']
    },

    active: function () {
        $.fn.ready(MeasureM);
    }
};

function MeasureM() {
    var e = document.getElementById('div');
    e.style.font = "15px/15px 'Anonymous Pro'";
    e.appendChild(document.createTextNode('M'));
    console.log(e.offsetWidth, e.offsetHeight);
}

(function () {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
        '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
})(); 
```

HTML 元素：

```
<div id="div" style="display: table;"></div> 
```

为方便起见，一个[jsFiddle](http://jsfiddle.net/s3nC6/)。

我遇到的问题似乎只发生在 Firefox 中，有解决方案吗？或者，我有什么误解吗？

# ios - 如何在参数化函数中实现 NSTimer？

> ID：15469616
> 
> 赞同：1
> 
> 时间：2013-03-18T04:10:44.917
> 
> 标签：ios, objective-c

我正在编写一个用于 XML 解析的程序。解析过程运行良好，但我需要每 25 秒后重复一次该功能。我试过`NSTimer`了，但它不适合我。当它被调用时，它会显示一个 SIGABRT 错误。我需要在每 25 秒后调用的函数如下所示：

```
-(id)loadXMLByURL:(NSString *)filePath :(NSTimer *) timer
{
    categories =[[NSMutableArray alloc]init];
    NSData *myData = [NSData dataWithContentsOfFile:filePath]; 
    parser =[[NSXMLParser alloc]initWithData:myData];
    parser.delegate = self;
    [parser parse];
    return  self;
} 
```

我用来设置定时器的方法如下

```
- (void)viewDidLoad
{
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"cd_catalog" ofType:@"xml"];

    NSTimer* myTimer = [NSTimer scheduledTimerWithTimeInterval: 25.0 target: self
                                                      selector: @selector(loadXMLByURL:filePath:) userInfo: nil repeats: YES];

    xmlParser=[[XMLParser alloc] loadXMLByURL:filePath:myTimer];
    [super viewDidLoad];
} 
```

请告诉我我的代码有什么问题，并通过示例告诉我是否有任何其他方法可用于该过程。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:17:22.700

您用于计时器的选择器只能采用一个参数，那就是计时器。您不能将 filePath 传递给计时器的选择器。

删除 filePath 参数并使路径成为实例变量。

```
-(id)loadXML {
    categories =[[NSMutableArray alloc]init];
    NSData *myData = [NSData dataWithContentsOfFile:filePath]; // filePath is an ivar
    parser =[[NSXMLParser alloc]initWithData:myData];
    parser.delegate = self;
    [parser parse];
    return  self;
}

- (void)viewDidLoad {
    // filePath is now an ivar
    filePath = [[NSBundle mainBundle] pathForResource:@"cd_catalog" ofType:@"xml"];

    // The timer isn't needed by the selector so don't pass it
    NSTimer* myTimer = [NSTimer scheduledTimerWithTimeInterval:25.0 target:self
                                selector:@selector(loadXML) userInfo:nil repeats:YES];

    xmlParser=[[XMLParser alloc] loadXML];
    [super viewDidLoad];
} 
```

注意：您应该命名每个参数。您的原始方法名为`loadXMLByURL::`. 注意中间没有任何内容的两个冒号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:18:36.407

我相信您的问题是您传递给它的选择器 @selector(loadXMLByURL:filePath:) 有两个参数，但 NSTimer 的选择器必须只有一个参数，即计时器本身。

从 NSTimer 上的文档：

`aSelector The message to send to target when the timer fires. The selector must correspond to a method that returns void and takes a single argument. The timer passes itself as the argument to this method.`

您需要创建一个只有 NSTimer*（或 id）作为参数的方法，并从其他地方获取您的文件名。

[编辑：这是NSTimer](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/clm/NSTimer/scheduledTimerWithTimeInterval%3atarget%3aselector%3auserInfo%3arepeats%3a)类参考的链接。

# java - 有什么办法可以避免这段代码？

> ID：15469617
> 
> 赞同：5
> 
> 时间：2013-03-18T04:11:08.183
> 
> 标签：java

我正在重新制作扫雷以进行练习，并编写了这段代码以避免出现 IndexOutOfBounds 错误。有没有办法避免这种情况，所以我不必在每个可能的错误中明确写出 if 语句？我想使每个数组 2 个索引更大，而忽略第一个和最后一个索引。我错过了一些明显的东西吗？

```
 if (row > 0 && col > 0)
            ray[row - 1][col - 1] += 1;
        if (row > 0)
            ray[row - 1][col] += 1;
        if (row > 0 && col < height - 1)
            ray[row - 1][col + 1] += 1;
        if (col > 0)
            ray[row][col - 1] += 1;
        if (col < height - 1)
            ray[row][col + 1] += 1;
        if (row < width - 1 && col > 0)
            ray[row + 1][col - 1] += 1;
        if (row < width - 1)
            ray[row + 1][col] += 1;
        if (row < width - 1 && col < height - 1)
            ray[row + 1][col + 1] += 1; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T04:21:47.003

您可以改用循环并定义一次边界。就像是：

```
int startRow = max(row - 1, 0);
int endRow = min(row + 1, width - 1);

int startCol = max(col - 1, 0);
int endCol = min(col + 1, height - 1);

for (int r = startRow; r <= endRow; r++)
   for (int c = startCol; c <= endCol; c++)
       if (r != row || c != col) //it looks like you want to skip this cell
           ray[r][c] += 1; 
```

* * *

或者，如果操作是可逆的（如在此代码中，您正在添加 1），您可以简单地在循环后反转中间单元格的操作。如果操作本身很简单，这将更有效，因为它（最多）消除了 12 次比较：

```
int startRow = max(row - 1, 0);
int endRow = min(row + 1, width - 1);

int startCol = max(col - 1, 0);
int endCol = min(col + 1, height - 1);

for (int r = startRow; r <= endRow; r++)
   for (int c = startCol; c <= endCol; c++)
       ray[r][c] += 1;

//reverse the operation for the middle cell
ray[row][col] -= 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T04:18:09.213

`if`您可以使用嵌套语句稍微简化代码。（例如，您不需要`row > 0`多次检查。）

但是，我会让数组 2 在每个维度上都变大，让`row`从`1`through变化`height`和`col`从`1`through变化`width`，并忽略边缘发生的事情。

在您的代码中，您似乎`row`与`width`和`col`配对`height`，这对我来说似乎倒退了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:33:33.577

是的，它可以用 for 循环来完成

```
for(int r=row-1; r<=row+1; r++)
 for(int c=col-1; c<=col+1; c++)
   if( r>=0 && r<ROWS && c>=0 && c<COLS && !(r==row && c==col) )
      ray[r][c]++; 
```

# python-3.x - 如何使用 Python 3 和仅 Python 3 库填写和提交表单

> ID：15469622
> 
> 赞同：2
> 
> 时间：2013-03-18T04:11:47.773
> 
> 标签：python-3.x, urllib

我正在将此作为一个空闲时间项目。

我想使用 Python 3 登录到一个站点（填写表单并提交），然后我计划从页面中抓取一些数据。我在 Python 3 中严格寻找解决方案的原因是因为我正在尝试更多地了解 Python，并认为我会直接使用 Python 3。我已经看到了几个很棒的工具，例如 mechanize，但它们似乎只支持 Python 2 .

计划将其用于金融投资网站，但我们仅以星巴克为例。

```
def loginToStockSite(username, pwd):
    url = "https://www.starbucks.com/account/signin"
    values = {"Account.UserName" : username, 
              "Account.PassWord" : pwd}
    data = urllib.parse.urlencode(values)
    data = data.encode('utf-8')
    req = urllib.request.Request(url, data)
    sock = urllib.request.urlopen(req)
    htmlSource = sock.read().decode('utf-8')
    return htmlSource 
```

我对各种编码、解码、url 打开器等示例感到非常困惑。我还没有找到适合我的解决方案。

提前感谢您对我的“有趣”项目的任何帮助。

* * *

更新

这是我返回的 html（剪掉了一堆以适应问题的字符限制）

```
<!DOCTYPE html>
    <head>
        <meta charset="utf-8" />

        <title>Account Sign In | Starbucks Coffee Company</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <div class="fields">
        <div class="region size1of1">
            <div class="validation_summary warning validation_medium"><h2>Please Enable Cookies to Continue</h2><p>To sign in to the Starbucks web site, please enable cookies in your web browser.</p></div>

        <div class="fields">
            <form action="/account/signin" class="siren region size1of2" id="accountForm" method="post">

                <fieldset class="login_position">
                    <legend class="hidden_visually">I have a Starbucks account.</legend>

                    <h2 class="existing_acc_h3">I have a Starbucks account.</h2>

                                        <div id="user_info" class="region size1of2 reset">
                                            Hi,
                                            <span id="info_user"></span>
                                        </div>

                                        <div class="size1of2">
                                            <a id="not_me" href="#notme">Not You?</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="connect_cont" >
                                <div id="text_cont" class="hidden">
                                    <h3>Have a Starbucks account?</h3>
                                    <p>Connect your Facebook account to your Starbucks account by logging in here.</p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <label for="Account_UserName">Username <span class="required">*</span></label>
                            <label for="Account_UserName" class="hidden">Starbucks Username <span class="required">*</span></label>
                            <input class="field_xlarge" id="Account_UserName" maxlength="200" name="Account.UserName" type="text" value="MY_USERNAME_WAS_HERE" />
                        </li>
                        <li>
                            <label for="Account_PassWord">Password <span class="required">*</span></label>
                            <label for="Account_PassWord" class="hidden">Starbucks Password <span class="required">*</span></label>
                            <input class="field_xlarge password" id="Account_PassWord" maxlength="200" name="Account.PassWord" type="password" value="MY_PASSWORD_WAS_HERE" />
                        </li>
                        <li>
                            Forgot your <a href="/account/forgot-username?AllowGuest=False">username</a> or <a href="/account/forgot-password?AllowGuest=False">password</a>?
                            <p class="privacy_policy hidden">
                                <a href="/about-us/company-information/online-policies/privacy-policy">Concerned about privacy?</a>
                            </p>
                        </li>
                        <li class="inline push">
                            <input type="checkbox" id="Account.IsRememberMe" name="Account.IsRememberMe" value="True" class="checkbox" />
                            <label for="Account.IsRememberMe">Keep me signed in.</label>
                        </li>
                    </ol>
                </fieldset>

                <fieldset>
                    <input id="ReturnUrl" name="ReturnUrl" type="hidden" value="" />
                    <input id="AllowGuest" name="AllowGuest" type="hidden" value="False" />
                    <input id="isJavaScriptDisabled" name="isJavaScriptDisabled" type="hidden" value="True" />
                    <span class="button"><button type="submit">Sign In</button></span>
                </fieldset>

                <fieldset class="submit">
                    <div id="fb_container">
                        <div id="fb_btn_cont">
                            Or log in using Facebook.
                            <p><a class="fb_button fb_button_medium" id="connect" href="#connect"><span class="fb_button_text">Login with Facebook</span></a></p>
                        </div>
                    </div>
                </fieldset>
            </form>

            <div class="region size1of2 block_login">

                    <h2>I need a Starbucks account.</h2>

                        <p><span class="button"><a href="/account/create">Create An Account</a></span></p>

                    <p>With a Starbucks account you can register and manage your Starbucks Cards and participate in <a href="/card/rewards">My Starbucks Rewards</a>.</p>

                    <ul class ="basic">
                        <li>Enjoy a free drink on your birthday</li>
                        <li>Protect your balance if your Starbucks Card is missing or stolen.</li>
                        <li>Transfer money between cards.</li>
                        <li>Track your earnings in My Starbucks Rewards</li>
                        <li>Reload your Card balance automatically</li>
                    </ul>

            </div>

        </div>

                <div class="fields">
    <div class="region size1of1">
        <ul id="breadcrumb">
            <li><a href="/card">Card</a> .<ul>
                <li><a href="/card/rewards">My Starbucks Rewards</a> .<ul>
                    <li>View Your Stars</li>
                </ul></li>
            </ul></li>
        </ul>
    </div>
</div>
        </div>

    <div id="footer">
        <div class="container">

    <form id="search" method="get" action="/search">
        <fieldset>
            <input id="searchbox" name="keywords" title="Search Keyword" maxlength="100" class="search_input" />
            <span class="button button_search"><button id="submit_search_util" type="submit">Search</button></span>
        </fieldset>
    </form>

            <div class="fields">
                <div class="region size5of6 suffix1of6">
                    <div class="footer_categorical"><ol class="blocks blocks-five-up">
<li><h4>
    <a href="/shop/card">Buy a Card</a>
</h4>
</li>
<li><h4>
    <a href="/card">Manage Your Card</a>
</h4>
<ol>

    <li><a href="/Card#cardBalanceWrapper">Check Balance</a></li>
    <li><a href="/card/reload/one-time">Reload Your Card</a></li>
    <li><a href="/card/manage/transfer">Transfer Funds</a></li>
    <li><a href="/card/manage/history">View Transactions</a></li>

</ol>
</li>
<li><h4>
    <a href="/card/rewards">My Starbucks Rewards</a>
</h4>
<ol>

    <li><a href="/account/create/register">Register Your Card</a></li>
    <li><a href="/account">View Your Stars</a></li>
    <li><a href="/card/rewards/gold">Keep Your Gold Benefits</a></li>
    <li><a href="/card/rewards/rewards-program-ts-and-cs">Rewards Program Terms and Conditions</a></li>

</ol>
</li>
<li><h4>
    Learn More
</h4>
<ol>

    <li><a href="/card/card-terms-and-conditions">Card Terms and Conditions</a></li>
    <li><a href="/card/egift">What is a Starbucks Card eGift?</a></li>
    <li><a href="/customer-service/faqs/card">Card FAQs</a></li>
    <li><a href="/account">Manage Your Account</a></li>
    <li><a href="http://mystarbucksidea.force.com/ideaList?ext=0&amp;lsi=0&amp;category=Starbucks+Card">My Starbucks Idea</a></li>

</ol>
</li> 
```

我希望能找回一个页面，就像我使用浏览器登录时得到的一样，并在注册的默认礼品卡上拥有一个包含当前余额的 div。

```
 <div class="balance-amount numbers"> 
```

那是可见的div。我也在页面源的另一个地方找到了余额，但我没有在页面上看到它。

```
<p class="card_balance numbers">

                                <span>$27.68</span> <span class="datestamp">3/10/2013 2:12 PM</span>

                        </p> 
```

无论如何，我想输入登录信息并使用 Python 3 提交表单或以某种方式发布数据以登录，然后（作为一个用例，但在回答问题所需之外）我会从 html 中提取帐户余额.

我确实发现我的用户名和密码显然在其相应的字段中，并且在它说的验证摘要中

```
<div class="validation_summary warning validation_medium"><h2>Please Enable Cookies to Continue</h2><p>To sign in to the Starbucks web site, please enable cookies in your web browser.</p></div> 
```

我确实看到了一些处理 cookie 的例子。那是问题吗？我将研究可能的解决方案。同时，希望这对您有所帮助。谢谢。

# asp.net-mvc - 如何使根区域中的一组视图和控制器可用于另一个区域

> ID：15469623
> 
> 赞同：0
> 
> 时间：2013-03-18T04:11:50.090
> 
> 标签：asp.net-mvc, asp.net-mvc-areas

我在 .NET MVC 网站的根区域中有一个名为 Email 的部分，所以我们有：

```
/Views/Email/<all the views>

/Controllers/EmailController 
```

我现在想在另一个名为“管理”的区域中提供此部分。这将包括在根区域中使用 EmailController，而不是在管理区域中创建一个新的。

最干净/最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:26:03.807

从您的管理区域，您可以随时调用 EmailController。

```
Return RedirectToAction("ViewName","Email"); 
```

在这种情况下，电子邮件控制器返回与电子邮件操作相关的视图。

没关系还是你想要更多？

# excel - Excel、VBA 编辑器 - 工作表对象属性的自动完成功能不起作用

> ID：15469630
> 
> 赞同：2
> 
> 时间：2013-03-18T04:12:30.980
> 
> 标签：excel, autocomplete, excel-2007, vba

我希望 VBA 编辑器使用自动完成功能来显示工作表对象的属性。

![在此处输入图像描述](../Images/d823f69ca6d24f9d483c1376a4db9003.png)

* * *

在 SuperUser 上的[这个](https://superuser.com/questions/567461/in-excel-2007-in-vba-editor-why-when-i-type-worksheets1-excel-does-not-li)问题中，我了解到`Worksheets`object`Item()`属性返回 Variant 类型。该类型不是`Worksheet`对象的强类型。

但是，即使我使用`ActiveSheet`对象或以下代码，IDE 仍然不显示`Worksheet`对象的属性。

![在此处输入图像描述](../Images/6396b17389bdc168b23910d9c78d1195.png)

我的问题是，如何让 Excel 中的 VBA 编辑器通过自动完成功能显示 Worksheet 对象的属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T04:53:32.903

请将 mySheet 变量声明为工作表以获取自动完成功能。请参考下图。

![在此处输入图像描述](../Images/feedfb7c2f6e5b67ce0f06b3254f096b.png)

# oracle - 我可以使用 Roundhouse 创建一个全新的 Oracle 数据库/模式吗？

> ID：15469634
> 
> 赞同：2
> 
> 时间：2013-03-18T04:13:24.810
> 
> 标签：oracle, database-versioning, roundhouse

我对 Oracle 有点陌生，主要使用 SQL，所以我对 Oracle 如何工作以及使用哪些用户/连接字符串的一些理解可能是错误的或不存在的。

我正在尝试使用 Roundhouse 来创建/管理 Oracle 数据库。现在我正在尝试在运行 Windows 7 和 VS 2010 的开发机器上工作。我有一个简单的沙盒项目，我正在尝试创建一个测试数据库。我已经在我的机器上安装了 Oracle 11g 标准版。

第一个问题是，我什至可以使用 Roundhouse 创建一个全新的数据库（Oracle 数据库告诉我它们在 Oracle 中被称为“模式”）吗？据我了解，与 SQL Server 不同，没有可以创建任何数据库`Master`的用户的数据库。`sa`

我在 Roundhouse 网站上找到了 Oracle 的 wiki 页面，但它只讨论了修改现有的 Oracle 数据库，而不是创建新数据库。在创建所需的表、存储过程等之前，我无法找到在 Oracle 中使用 Roundhouse 创建全新数据库的示例。

如果可能，我需要做什么/设置？我应该如何设置我的配置文件？给定的是我当前的配置文件。

```
<?xml version="1.0" encoding="utf-8" ?>
<Project DefaultTargets="DBDeploy" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- Visit http://roundhouse.googlecode.com/ for details -->

  <UsingTask AssemblyFile="roundhouse.tasks.dll" TaskName="roundhouse.tasks.Roundhouse" />

  <PropertyGroup>
    <DBServer>dev-mac-303.qtest.local</DBServer>
    <DBName>RoundhouseSandbox.OracleRoundhouse</DBName>
    <Environment>DEV</Environment>
    <DBConnectionString>Data Source=(DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = dev-mac-303.qtest.local)(PORT = 1521)))(CONNECT_DATA = (SID = DEVEL)));User Id=mytest;Password=mytestdevel;Persist Security Info=false;</DBConnectionString>
  </PropertyGroup>

  <Target Name="ApplyDatabaseChanges">
    <Roundhouse
        ServerName="$(DBServer)"
        DatabaseName="$(DBName)"
        ConnectionString="$(DBConnectionString)"
        ConnectionStringAdmin="$(DBConnectionString)"
        CommandTimeout="60"
        CommandTimeoutAdmin="300"
        VersionFile="OracleRoundhouse.dll"
        AlterDatabaseFolderName="alterDatabase"
        UpFolderName="mytest\updates"
        RunFirstAfterUpFolderName="mytest\runFirstAfterUp"
        FunctionsFolderName="mytest\functions"
        ViewsFolderName="mytest\views"
        SprocsFolderName="mytest\storedprocedures"
        IndexesFolderName="mytest\indexes"
        PermissionsFolderName="mytest\permissions"
        SchemaName="Change"
        VersionTableName="Version"
        ScriptsRunTableName="ScriptsRun"
        ScriptsRunErrorsTableName="ScriptsRunErrors"
        EnvironmentName="$(Environment)"
        DoNotCreateDatabase="false"
        OutputPath="C:\temp\test.mytest.Database\ChangeTracking\"
        WarnOnOneTimeScriptChanges="false"
        Silent="true"
        DatabaseType="roundhouse.databases.oracle.OracleDatabase, roundhouse.databases.oracle"
        WithTransaction="false"
        RunAllAnyTimeScripts="false"
        DisableTokenReplacement="false"
        Debug="true"
        />
  </Target>

  <Target Name = "DBDeploy"
          DependsOnTargets="
        ApplyDatabaseChanges;
      "
     >
  </Target>

</Project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-01T22:26:46.383

我已经在一个正在生产中的应用程序上使用 RoundhouseE 完成了 Oracle。

RoundhouseE 不适合从无到有地创建 Oracle 数据库。我见过的 Oracle 数据库使用模式作为主要的逻辑划分；换句话说，在 Oracle 中，您使用模式的方式与在 SQL Server 中使用数据库的方式非常相似。此外，数据库本身通常已经设置好，您无需创建新数据库。这更像是一个安装步骤。在建立数据库之前，您甚至无法形成网络连接。粗略地讲：

```
SQL Server      |  Oracle                             
----------------+------------------------------------
Server install  |  Server install & database set up
Database        |  Schema 
```

所以不要让 RoundhouseE 设置 Oracle 数据库。假设已经完成；将其视为安装步骤。您不会期望 RoundhouseE 安装或配置 SQL Server。

也就是说，RoundhouseE 具有指定创建脚本的功能。您也许可以利用它来创建您的模式，但 RoundhouseE 还没有指定*放置*脚本的能力（据我所知）。为此，您*将*需要一个单独的工具。

我最终使用 SQL*Plus Instant Client 在我的构建脚本中管理模式的创建和删除：[http](http://www.oracle.com/technetwork/topics/winsoft-085727.html) ://www.oracle.com/technetwork/topics/winsoft-085727.html 。您将需要**instantclient-sqlplus-nt-11.2.0.3.0.zip**和**instantclient-basiclite-nt-11.2.0.3.0.zip**或**instantclient-basic-nt-11.2.0.3.0.zip**之一。（较新的版本很好；只要确保您获得匹配的版本。）将它们解压缩到同一目录。（附带说明，您可以使用 basic-nt 或 basiclite-nt 而不是安装 Oracle 客户端；您只需要确保您的应用程序可以找到 DLL。）您需要进行命令行调用才能使其工作. 当 RoundhouseE 获得 drop 脚本时，如果可以的话，我打算转储它。

一旦你有了一个模式，RoundhouseE 就可以很好地工作。不过，请检查 Github 和 Google Code 上的错误列表。有几个奇怪的问题。但是，一旦你克服了它们，你付出的所有努力都是值得的。大约 2 年前，我编写了大部分数据库部署构建脚本，它们是项目中经受住了时间考验的东西之一。不过，它们是用 PowerShell 编写的，所以我不知道这在 MSBuild 中会怎样。

### 更新：

自从我写这篇文章以来的这些年里，Flyway 变得流行起来。考虑使用它或其他工具，因为它们可能对 Oracle 有更好的支持。RoundhouseE 并没有解决很多几年前发现的问题。它似乎主要专注于支持 SQL Server。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T02:14:41.830

看看你来自哪里，可能是时候升级了。

根据我对 Oracle 和 RH 支持的记忆，这可能是可能的。有一个用于管理连接字符串的开关 - CSA（连接字符串管理员）将为您处理模式创建。是的，Oracle 有不同的术语（数据库与 sql server 的服务器相同，schema 是 sql server 的数据库）。

自从我检查对 Oracle 的支持以来已经有一段时间了，但是如果您看一下，您可能会发现更多信息。

# xml - 在 AS3 中使用 MouseEvent.CLICK 事件监听器卸载一个 xml 文件并加载一个新的 xml 文件

> ID：15469636
> 
> 赞同：1
> 
> 时间：2013-03-18T04:13:27.240
> 
> 标签：xml, actionscript-3

我正在开发一个使用 XML 创建按钮列表的项目。当您按下其中一个按钮时，会加载一个新的 xml，它可以创建“子按钮”。

使用我编写的代码，一切正常，除了当我按下顶级按钮（一级按钮）时，它会加载创建子按钮并加载一些文本数据的 xml，但是当我按下另一个顶级按钮时，它加载新的 xml，创建子按钮，加载不同的文本数据，........但是，旧的子按钮也在那里....

我希望能够删除旧的子按钮。我已经用谷歌搜索了，但我无法获得任何帮助：/ 任何帮助将不胜感激。

代码从创建顶级按钮并为这些按钮分配 CLICK MouseEvent 开始。

```
function onButtonClick(me:MouseEvent):void {
    xmlLoader.load(new URLRequest(bookElement.xmllink.toString()));
    xmlLoader.addEventListener(Event.COMPLETE, onSubXmlLoad);
}

function onSubXmlLoad(e:Event):void {
    trace("xml loaded");
    new_sub_xml = new XML(sub_xmlLoader.data);
    var Books:XMLList = new_sub_xml.name.books;
    var len:int = Books.length();
    trace(len + " Books");

    for (var i:int = 0; i < len; i++) {
            sub_btn = new SubFeatureButton();
            sub_btn.x = 10 + i * 50;
            sub_btn.y = 90;
            addChild(sub_btn);
            sub_btn.name = "sub_btn" + i;
            sub_btn.buttonMode = true;
            trace(sub_btn + i);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:59:10.707

您可能应该为您的子导航按钮创建一个容器，同时将这些按钮的引用保存在某种数组中会使事情变得更容易。

下面的代码应该可以工作

```
var subNav:Sprite = new Sprite();
subNav.x = 0;
subNav.y = 0;//put the right values here
addChild(subNav);

function onButtonClick(me:MouseEvent):void {
    xmlLoader.load(new URLRequest(bookElement.xmllink.toString()));
    xmlLoader.addEventListener(Event.COMPLETE, onSubXmlLoad);
}

function onSubXmlLoad(e:Event):void {
    trace("xml loaded");
    new_sub_xml = new XML(sub_xmlLoader.data);
    var Books:XMLList = new_sub_xml.name.books;
    var len:int = Books.length();
    trace(len + " Books");

    while(subNav.numChildren >0)
    {
        subNav.removeChildAt(0);
    }

    for (var i:int = 0; i < len; i++) {
            sub_btn = new SubFeatureButton();
            sub_btn.x = 10 + i * 50;
            sub_btn.y = 90;
            subNav.addChild(sub_btn);
            sub_btn.name = "sub_btn" + i;
            sub_btn.buttonMode = true;
            trace(sub_btn + i);

    }
} 
```

# algorithm - 使用线程池进行截锥剔除？

> ID：15469639
> 
> 赞同：0
> 
> 时间：2013-03-18T04:13:50.607
> 
> 标签：algorithm, optimization, culling

我正在开发一款类似我的世界的游戏，我想知道一种在玩家行走时生成块的有效方法。特别是，我想画出玩家在他身后看到的块。

我目前正计划创建一个线程池，其中每个区域由不同的线程异步生成。有没有办法使用截锥体剔除等算法有效地对任务进行排序？

# android - 三星 S3：股票视频播放器上的“无法播放视频”

> ID：15469640
> 
> 赞同：3
> 
> 时间：2013-03-18T04:13:57.917
> 
> 标签：android, video, ffmpeg, samsung-mobile, android-video-player

我无法在三星 S3、Android 版本：4.1.1、股票视频播放器上播放 mp4 视频（H.264 Baseline、AAC），但在 VLC 上播放。相同的视频在 Galaxy Beam 上播放，Android 版本：2.3.6，股票视频播放器。我想弄清楚为什么它不能在 S3 上播放。我在 fie 上运行了 ffprobe 和 mediainfo：

ffprobe结果：

```
ffprobe version 0.11.1 Copyright (c) 2007-2012 the FFmpeg developers
  built on Jan 25 2013 15:16:27 with llvm_gcc 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)
  configuration: --prefix=/usr/local/Cellar/ffmpeg/0.11.1 --enable-shared --enable-gpl --enable-version3 --enable-nonfree --enable-hardcoded-tables --cc=/usr/bin/llvm-gcc --host-cflags='-Os -w -pipe -march=core2 -msse4 -mmacosx-version-min=10.7' --host-ldflags=-L/usr/local/lib --enable-libx264 --enable-libfaac --enable-libmp3lame --enable-libxvid
  libavutil      51\. 54.100 / 51\. 54.100
  libavcodec     54\. 23.100 / 54\. 23.100
  libavformat    54\.  6.100 / 54\.  6.100
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 77.100 /  2\. 77.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '86535_360p_1301310230.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 1
    compatible_brands: isomavc1
    creation_time   : 2013-01-31 02:36:22
  Duration: 00:03:49.53, start: 0.000000, bitrate: 799 kb/s
    Stream #0:0(und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 640x360 [SAR 1:1 DAR 16:9], 699 kb/s, 23.98 fps, 23.98 tbr, 24k tbn, 47.95 tbc
    Metadata:
      creation_time   : 2013-01-31 02:34:00
      handler_name    : GPAC ISO Video Handler
    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 96000 Hz, stereo, s16, 95 kb/s
    Metadata:
      creation_time   : 2013-01-31 02:36:22
      handler_name    : GPAC ISO Audio Handler 
```

媒体信息结果：

```
General
Complete name                            : a.mp4
Format                                   : MPEG-4
Format profile                           : Base Media
Codec ID                                 : isom
File size                                : 21.9 MiB
Duration                                 : 3mn 49s
Overall bit rate mode                    : Variable
Overall bit rate                         : 799 Kbps
Encoded date                             : UTC 2013-01-31 02:36:22
Tagged date                              : UTC 2013-01-31 02:36:22

Video
ID                                       : 1
Format                                   : AVC
Format/Info                              : Advanced Video Codec
Format profile                           : Baseline@L3.0
Format settings, CABAC                   : No
Format settings, ReFrames                : 3 frames
Format settings, GOP                     : M=1, N=30
Codec ID                                 : avc1
Codec ID/Info                            : Advanced Video Coding
Duration                                 : 3mn 49s
Bit rate                                 : 700 Kbps
Maximum bit rate                         : 2 721 Kbps
Width                                    : 640 pixels
Height                                   : 360 pixels
Display aspect ratio                     : 16:9
Frame rate mode                          : Constant
Frame rate                               : 23.976 fps
Color space                              : YUV
Chroma subsampling                       : 4:2:0
Bit depth                                : 8 bits
Scan type                                : Progressive
Bits/(Pixel*Frame)                       : 0.127
Stream size                              : 19.1 MiB (88%)
Writing library                          : Zencoder Video Encoding System
Encoded date                             : UTC 2013-01-31 02:34:00
Tagged date                              : UTC 2013-01-31 02:36:22

Audio
ID                                       : 2
Format                                   : AAC
Format/Info                              : Advanced Audio Codec
Format profile                           : LC
Codec ID                                 : 40
Duration                                 : 3mn 49s
Bit rate mode                            : Variable
Bit rate                                 : 96.0 Kbps
Maximum bit rate                         : 121 Kbps
Channel(s)                               : 2 channels
Channel positions                        : Front: L R
Sampling rate                            : 96.0 KHz
Compression mode                         : Lossy
Stream size                              : 2.62 MiB (12%)
Encoded date                             : UTC 2013-01-31 02:36:22
Tagged date                              : UTC 2013-01-31 02:36:22 
```

我怀疑视频播放器对某些编解码器标头值更严格。级别设置为 3.0，这应该是正确的。任何帮助解决这个问题都非常感谢！

# tcl - 如何使用计数器在for循环中将列表元素放入数组tcl中

> ID：15469649
> 
> 赞同：0
> 
> 时间：2013-03-18T04:15:24.057
> 
> 标签：tcl, wireless, ns2

我有一个用于无线节点的 tcl 脚本，我想将邻居分配给特定节点的列表数组。对于一个节点，其传输范围内的邻居将在列表中，对于下一个节点，同样会发生。我需要在 for 循环中执行此操作，以便将邻居分配给列表。

# java - 如何在 JAXB 中添加多个值？

> ID：15469651
> 
> 赞同：0
> 
> 时间：2013-03-18T04:15:27.410
> 
> 标签：java, jaxb

```
 import javax.xml.bind.annotation.XmlElement;

        public class Test1 {
            private String Type;
            private String value;
            @XmlElement(name="type")
            public final String getType(){
                return Type;
            }
            public final void setType(final String type){
                this.Type=type;
            }
            @XmlElement(name="value")
            public final String getValue(){
                return value;
            }
            public final void setValue(final String value) {
                this.value = value;
            }
        }
    import java.util.ArrayList;

    import javax.xml.bind.annotation.XmlElement;
    import javax.xml.bind.annotation.XmlElementWrapper;
    import javax.xml.bind.annotation.XmlRootElement;

    @XmlRootElement(name="test") 
    public class Test2 {
        ArrayList<Test1> test1;
        @XmlElementWrapper(name="users") 
        @XmlElement(name="user")
        public final ArrayList<Test1> getUser(){

            return test1;
        }
        public final void setUser(final ArrayList<Test1> mm){
            this.test1=mm;
        }
    }
import java.util.ArrayList;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;

import com.covidien.laptopagent.xml.XMLUserLogin;

public class TEST {

    public static void main(String agrs[]){
        Test1 test1=new Test1();
        test1.setType("100");
        test1.setValue("none");
        test1.setType("101");
        test1.setValue("ok");
        ArrayList<Test1> permfile=new ArrayList<Test1>();
        permfile.add(test1);

        ArrayList<Test2>test2 =new ArrayList<Test2>();
        Test2 test2obj=new Test2();
        test2obj.setuser(permfile);

        JAXBContext context;
        try {
            context = JAXBContext.newInstance(XMLUserLogin.class);
            Marshaller m = context.createMarshaller();
            m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
            m.marshal(test2, System.out);
            System.out.println();
        } catch (JAXBException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

异常输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<test>
   ......
  <users>
         <user>
               <type>100</type>
               <value>none</value>
         </user>
         <user>
                 <type>101</type>
                 <value>ok</value>
          </user>
</users>
...............
...............
</test> 
```

但它只返回一个用户值：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<test>
   ......
  <users>
         <user>
               <type>100</type>
               <value>none</value>
         </user>
</users>
...............
...............
</test> 
```

如何解决这个问题？有人可以帮助我我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:33:28.397

修复这样的代码

```
 Test1 user1=new Test1();
    user1.setType("100");
    user1.setValue("none");

    Test1 user2=new Test1();
    user2.setType("101");
    user2.setValue("ok");

    ArrayList<Test1> permfile=new ArrayList<Test1>();
    permfile.add(user1);
    permfile.add(user2); 
```

# javascript - 嵌套 HTML 时如何控制 jQuery 事件？

> ID：15469652
> 
> 赞同：1
> 
> 时间：2013-03-18T04:16:04.673
> 
> 标签：javascript, jquery, html, events, event-handling

例如：

```
<ul>
<li>
   first element
   <ul>
    <li> second element
       <ul>
          <li> third element </li>
       </ul>
      </li>
   </ul>
</li>
</ul>

<script>
$('li').click( function() {
   alert('hello world!!!');
});
</script> 
```

**输出是：**

单击第三个元素时的三个警报

单击第二个元素时的两个警报

当我单击第一个元素时发出警报

如何用 jQuery 防止这个？

我需要的是：**每次点击任何“LI”元素都会发出一个警报。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T04:18:36.823

使用`e.stopPropagation();`.

> **描述：**防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

```
$('li').on('click',function(e)
{
   e.stopPropagation();
   alert('hello world!!!');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:19:26.633

因为你有嵌套`li`元素。点击处理程序适用于所有`li`元素，包括 parent`li`的。

您需要停止传播事件泡沫。这样一旦它执行了事件处理程序，它就不会爬上 DOM 树来触发相同的事件。

```
$('li').click( function(e) {
   alert('hello world!!!');
   e.stopPropagation();
}); 
```

# python - Python 在 html 中显示服务器端图像

> ID：15469653
> 
> 赞同：0
> 
> 时间：2013-03-18T04:16:07.180
> 
> 标签：python, html, directory, image

我在服务器文件夹中有一张图片。在处理 Get 请求的 do_GET() 函数中，我想发回图像。我选择使用 self.wfile.write('')。谁能告诉我如何将图像的来源包含在 img 标签中？还是有更好的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:32:54.417

您可以使用如下数据 URI 在 img 标记中包含图像的“来源”：

```
<img alt="Embedded Image" src="data:image/png;base64,<your base64 encoding here>" /> 
```

使用 base64 python 标准库生成 base64 字符串：

```
import base64

with open("image.png", "rb") as image:
    encoded_string = base64.b64encode(image.read()) 
```

# java - 如何不忽略 java arraylist 中的空格？

> ID：15469654
> 
> 赞同：0
> 
> 时间：2013-03-18T04:16:10.137
> 
> 标签：java, swing

我有一个 java 包，在该包中我有一个名为 Items 的 java 类，它存储项目的一些详细信息并保存一些方法。这就是我的数组列表的样子：

```
 ArrayList<Items> itemList = new ArrayList<Items>(); 
```

在我的主程序中，我为看起来像这样的项目添加了详细信息

```
itemList.add(new Items("A1","Samsung Galaxy S3", " Super AMOLED plus display is 4.8-inches making web browsing, watching videos or viewing photos a real joy");

itemList.add(new Items("A2","Apple mac pro", "2.2Ghz Core i7 Processor "); 
```

我已经尝试将它发送到我的 GUI java 客户端到一个看起来像的 Textarea

```
output.println(item.getName()); 
```

但它似乎没有作为一个字符串出现，并且名称字符串的一部分出现在另一个 Jlist 而不是 JTeaxtArea 中。我试过这样做：

```
 itemList.toString.add(new Items("A1","Samsung Galaxy S3", " Super AMOLED plus display is 4.8-inches making web browsing, watching videos or viewing photos a real joy"); 
```

但似乎无法将其识别为字符串？

我的项目类如下所示：

```
public class items
{
    private String itemName;

    public Items(String itemName)
    {
        this.itemName = itemName;
    }
     public String getName()
    {
        return itemName;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:45:51.673

我认为您发布的代码不会编译。您需要的`Item`课程可能是这样的：

```
public class Items {
    private String itemCode;
    private String itemName;
    private String itemDescription;

    public Items(String itemCode, String itemName, String itemDescription) {
      this.itemCode = itemCode;
      this.itemName = itemName;
      this.itemDescription = itemDescription;
    }

    public String getName() {
        return itemName;
    }

    public String getFullName() {
        return itemCode + " " + itemName + " " + itemDescription;
    }
} 
```

一旦您将构造函数更改为采用三个`String`参数，以下应该开始工作：

```
itemList.add(new Items("A1","Samsung Galaxy S3", " Super AMOLED plus display is 4.8-inches making web browsing, watching videos or viewing photos a real joy");

itemList.add(new Items("A2","Apple mac pro", "2.2Ghz Core i7 Processor "); 
```

试试这个。

# r - 情节（预测（d.ts））省略线

> ID：15469655
> 
> 赞同：0
> 
> 时间：2013-03-18T04:16:11.823
> 
> 标签：r, plot, forecasting

我正在使用该`forecast`软件包。

假设`d.ts`是一个时间序列。当我使用时，`plot(forecast(d.ts))`我得到了我的时间序列的（非常好的）图加上一条预测线和一个表示预测不确定性的阴影区域。我想省略这条线（中央估计）。显然，我可以手动`Forecast`从`forecast(d.ts)`对象中删除列并手动绘制剩余的列，但我想知道是否有更快的方法。我可以写`plot(forecast(d.ts,fan=TRUE))`，但这并没有省略这一行（情节的其余部分也不是我想要的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:57:43.200

我很确定你不能以不计算预测值的方式破解预测函数，因为它们是建立置信区间所必需的（沿着平均值 +- sd 的东西）。但是，如果您只是想要一种没有预测值的简单绘图方法，您可以将预测值线的颜色设置为 NA：

```
library(forecast)
fit <- StructTS(WWWusage,"level")
plot(forecast(fit),fcol=NA) 
```

# delphi - 为什么 FindWindow() 不是 100% 可靠的？

> ID：15469657
> 
> 赞同：11
> 
> 时间：2013-03-18T04:16:23.290
> 
> 标签：delphi, winapi, delphi-7

我正在使用这个 Delphi 7 代码来检测 Internet Explorer 是否正在运行：

```
function IERunning: Boolean;
begin
  Result := FindWindow('IEFrame', NIL) > 0;
end; 
```

这适用于 99% 的 IE 8,9 和 10 系统。

但是有一些系统（不幸的是我没有，但我有两个拥有此类系统的 beta 测试人员，都是 Win7 x64 SP1），其中 FindWindow() 为 IEFrame 返回 0，即使 IE 在内存中也是如此。

所以我编写了另一种方法来查找窗口：

```
function IERunningEx: Boolean;
var WinHandle : HWND;
    Name: array[0..255] of Char;
begin
  Result := False; // assume no IE window is present

  WinHandle := GetTopWindow(GetDesktopWindow);

  while WinHandle <> 0 do // go thru the window list
  begin
      GetClassName(WinHandle, @Name[0], 255);
      if (CompareText(string(Name), 'IEFrame') = 0) then
      begin // IEFrame found
          Result := True;
          Exit;             
      end;
      WinHandle := GetNextWindow(WinHandle, GW_HWNDNEXT);
  end;      
end; 
```

替代方法适用于 100% 的所有系统。

我的问题 - 为什么 FindWindow() 在某些系统上不可靠？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T00:21:48.757

我猜它`FindWindow`被声明为返回一个 WinHandle，它是一个 THandle，它是一个 Integer，它是有符号的。（至少，我认为很多年前我在 Delphi 中编程时就是这种情况。）

如果 IE 有一个设置了最高位的窗口句柄，那么它将为负，因此您的测试将返回 False：

```
Result := FindWindow('IEFrame', NIL) > 0; 
```

窗口句柄通常不会设置最高位，但我不知道这是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-22T14:06:32.370

根据 Delphi Help，FindWindow(ClassName,WindowName) 不搜索子窗口。这可能是 1% 失败的原因。也许在这两个 beta 测试系统中，IEFrame 窗口设置了 WS_CHILD 样式。

这可以解释为什么 GetTopWindow/GetNextWindow 循环有效。GetTopWindow(hWndParent) 检索 Z 顺序顶部的子窗口，GetNextWindow(hWnd,Direction) 检索 Z 顺序中的下一个子窗口。

这可以通过调用 FindWindowEx(hWndParent,hWndChild,ClassName,WindowName) 来测试，看看它在 FindWindow() 失败的地方是否有效。

# php - 使用 websockets 的私人消息

> ID：15469659
> 
> 赞同：4
> 
> 时间：2013-03-18T04:16:52.537
> 
> 标签：php, websocket

我们如何使用 Websockets（和 PHP）实现私人消息系统（客户端到客户端）？

据我了解，服务器广播消息，所有客户端都可以通过 connection.onmessage 事件处理程序接收消息。我想知道是否有办法将消息仅发送给 websockets 中的目标用户？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T10:34:14.397

当客户端发送消息 ( `ws.send( message );`) 时，您的 WebSocket 服务器将收到该消息。然后您将其发送到的套接字完全由您的服务器代码 - 您的实现决定。

要创建一对一聊天，您需要一种仅在聊天中涉及的两个客户端之间路由数据的方法。您还需要一种验证方式，即只有这两个客户端才能接收该信息。

WebSocket 框架倾向于提供一个额外的[PubSub](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)层，例如 Pusher（我以前为之工作过的）使用[channels](http://pusher.com/docs/channels)来实现这一点。您会发现类似的术语以及“主题”和“主题”。

一旦你有办法在两个客户端之间路由数据（聊天消息），你就需要考虑对订阅进行身份验证。可以通过这个问题找到更多信息，该问题询问[如何在两个用户之间创建私人频道](https://stackoverflow.com/a/15406580/39904)。问题是关于 Ruby，但适用于任何技术。

# ruby-on-rails - Rails：GPLv3 应用程序的版权标头

> ID：15469662
> 
> 赞同：1
> 
> 时间：2013-03-18T04:17:20.800
> 
> 标签：ruby-on-rails, open-source, copyright-display

我们正在开发一个项目`Rails`并计划在`GPLv3`.

我对此有以下疑问：

1.  我们应该在哪些文件中添加版权标头？只有, , ,等`.rb`中的文件？、和文件怎么样？`lib``controller``model``helpers``config``.erb``.js``.css`
2.  我们是否应该将详细的 GPLv3 标头添加到源文件中？或者一些带有指向项目中某些外部文件的指针或 GPL 站点的 URL 的衬里就足够了？

我研究了几个在`Rails`. 他们中的一些人在`.rb`文件中添加了版权标题。也很少有人添加其他文件类型。

这可能是一个偏好问题，但我正在寻找这方面的最佳实践。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:31:30.113

典型的做法是在应用程序的顶层目录中简单地包含一个`LICENSE`文件，其中包含完整的许可证文本和任何附录。在项目的主页上包含许可证文本或指向它的链接也很常见（有关示例，请参见许多 GitHub 开源项目）。我不是律师，所以我不能说如果你只在每个文件中包含一个顶级许可证与版权声明，保护会有什么不同，但实际上你很少会到处看到它。

# yii - Yii Grid，多个管理行

> ID：15469664
> 
> 赞同：1
> 
> 时间：2013-03-18T04:17:24.110
> 
> 标签：yii, rows

我对网格中的管理行有疑问。例如，我们有食物/成本表，例如：

```
Fruit | cost
------------
Apple | 10$
Bannan| 5$ 
```

我们可以创建如下形式：

```
<form>
<input type='text' name='Fruits[0][fruit] value='Apple' /> <input type='text' name='Fruits[0][cost]  value='10$' /> <br>
<input type='text' name='Fruits[1][fruit] value='Bannan' /> <input type='text' name='Fruits[1][cost]  value='5$' />
</form> 
```

并将其保存为：

```
 if ($is_new)
    if(isset($_POST['Fruits'])) {
      foreach ($_POST['Fruits'] as $fruit) {
        $model = new Fruit();
        $model->attributes = $fruit;
        $model->save();
      }
    }
} else { //here code for update, $model->load()... } 
```

很好，我们可以更新两行...但是如果我想添加新的？上面所有的好方法都很好，但是如果我删除 1 行呢？在我的基地中，我将有 2 行，但我只需要 1 行。

这里我看到了 2 种方法： 1\. 每次更新时从数据库中删除所有水果 POST 计数！= 数据库计数 2\. 我们可以加载数据库行，编写循环，检查每一行......但它太难了，这么多代码.. .

您如何管理新的和删除的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:27:18.727

使用 Yii 数据处理程序打印结果，例如“CGridView”： [http ://www.yiiframework.com/doc/api/1.1/CGridView/](http://www.yiiframework.com/doc/api/1.1/CGridView/)

# python - 用单个空格替换字符串中的多间距 - Python

> ID：15469665
> 
> 赞同：3
> 
> 时间：2013-03-18T04:17:24.470
> 
> 标签：python, string, whitespace, replace, removing-whitespace

遍历字符串并用单个空格替换双空格的开销花费了太多时间。尝试用单个空格替换字符串中的多个间距的更快方法是什么？

我一直在这样做，但这太长而且太浪费了：

```
str1 = "This is    a  foo bar   sentence with  crazy spaces that  irritates   my program "

def despace(sentence):
  while "  " in sentence:
    sentence = sentence.replace("  "," ")
  return sentence

print despace(str1) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T04:18:37.350

看这个

```
In [1]: str1 = "This is    a  foo bar   sentence with  crazy spaces that  irritates   my program "

In [2]: ' '.join(str1.split())
Out[2]: 'This is a foo bar sentence with crazy spaces that irritates my program' 
```

该方法`split()`返回字符串中所有单词的列表，使用 str 作为分隔符（如果未指定，则在所有空格上拆分）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T04:20:44.940

使用[正则表达式](http://docs.python.org/2/library/re.html)：

```
import re
str1 = re.sub(' +', ' ', str1) 
```

`' +'`匹配一个或多个空格字符。

您还可以将所有空格替换为

```
str1 = re.sub('\s+', ' ', str1) 
```

# winapi - 使用 CreateProcess 调用 nvcc.exe

> ID：15469666
> 
> 赞同：0
> 
> 时间：2013-03-18T04:17:29.367
> 
> 标签：winapi, cuda, createprocess, nvcc

我们目前为 CUDA 使用模拟 JIT 编译器，其中在某些文件上调用 nvcc.exe 并生成生成的 .ptx 文件。

```
bool executeWindowsProcess(ofstream &logFF) {

    STARTUPINFO si;
    PROCESS_INFORMATION pi;
    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );

    char cmd[] = "\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v5.0\\bin\\nvcc.exe\"";
    char args[] = "\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v5.0\\bin\\nvcc.exe\" --ptx --machine 32 -arch=sm_30 -o C:\\Users\\Yutong\\GOODKERNELCOMPILED.ptx --use_fast_math C:\\Users\\Yutong\\tempkernel.cu";

    logFF << cmd << endl;
    logFF << args << endl;

    CreateProcess(cmd, args, NULL, NULL, false, CREATE_DEFAULT_ERROR_MODE, NULL, NULL, &si, &pi); 

    logFF << GetLastError() << endl;

    WaitForSingleObject(pi.hProcess, INFINITE);

    logFF << GetLastError() << endl;

    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );

    return true;
} 
```

第一个 GetLastError() 返回 123，这似乎表明 nvcc.exe 根本没有被调用。将 cmd[] 设置为诸如 notepad.exe（位于 C:/Windows/System32/notepad.exe 中）之类的东西可以正常工作。我问过一些人，似乎是：

1.  我的应用程序是为 32 位 Windows 部署的
2.  nvcc.exe 位于 C:/Program Files/..../ 这是一个 64 位目录，并且 CreateProcess 似乎无法调用它没有权限的目录中的可执行文件。

PS，我们曾经使用 system() 来调用 JIT 编译器，但是 system() 会启动一个外部终端窗口（我们正在编写一个 GUI），通常不推荐使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:29:09.090

`GetLastError()`仅在发生实际错误时才有意义。您没有检查 的返回值`CreateProcess()`以确保在调用`GetLastError()`检索它之前确实发生了错误。您需要这样做，例如：

```
bool executeWindowsProcess(ofstream &logFF)
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;
    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );

    char cmd[] = "\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v5.0\\bin\\nvcc.exe\"";
    char args[] = "\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v5.0\\bin\\nvcc.exe\" --ptx --machine 32 -arch=sm_30 -o C:\\Users\\Yutong\\GOODKERNELCOMPILED.ptx --use_fast_math C:\\Users\\Yutong\\tempkernel.cu";

    logFF << cmd << endl;
    logFF << args << endl;

    if (!CreateProcess(cmd, args, NULL, NULL, FALSE, CREATE_DEFAULT_ERROR_MODE, NULL, NULL, &si, &pi))
    {
        logFF << GetLastError() << endl;
        return false;
    }

    logFF << "Running" << endl;

    WaitForSingleObject(pi.hProcess, INFINITE);

    logFF << "Terminated" << endl;

    CloseHandle( pi.hThread );
    CloseHandle( pi.hProcess );

    return true;
} 
```

话虽如此，错误 123 是`ERROR_INVALID_NAME`（“文件名、目录名或卷标语法不正确。”）。由于您正在尝试调用命令行，因此我建议您将`lpApplicationName`参数设置`CreateProcess()`为 NULL 并单独使用该`lpCommandLine`参数，例如：

```
bool executeWindowsProcess(ofstream &logFF)
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;
    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );

    char args[] = "\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v5.0\\bin\\nvcc.exe\" --ptx --machine 32 -arch=sm_30 -o C:\\Users\\Yutong\\GOODKERNELCOMPILED.ptx --use_fast_math C:\\Users\\Yutong\\tempkernel.cu";

    logFF << args << endl;

    if (!CreateProcessA(NULL, args, NULL, NULL, FALSE, CREATE_DEFAULT_ERROR_MODE, NULL, NULL, &si, &pi))
    {
        logFF << GetLastError() << endl;
        return false;
    }

    logFF << "Running" << endl;

    WaitForSingleObject(pi.hProcess, INFINITE);

    logFF << "Terminated" << endl;

    CloseHandle( pi.hThread );
    CloseHandle( pi.hProcess );

    return true;
} 
```

# ios - iOS 和 Objective-C：大部分 CPU 时间花在 [NSObject release] 和 [NSObject retain] 但类方法没有做任何内存操作

> ID：15469670
> 
> 赞同：8
> 
> 时间：2013-03-18T04:17:41.717
> 
> 标签：ios, objective-c, memory-management, profiling, instruments

图像处理应用程序在模拟器上运行速度很快，但在真实设备（iPhone 4GS）上运行速度**非常慢。**

在“仪器”下运行应用程序时，我看到以下调用树：

![在此处输入图像描述](../Images/ed3ce5518c8c6b89a24949d0fcdfe97e.png)

请注意，据报告，红圈内的调用几乎占用了该方法的所有 CPU 时间。

有问题的方法是类方法（不是实例方法），代码如下：

```
@implementation Line2F

+ (CGFloat)signTested:(Point2F *)tested p1:(Point2F *)p1 p2:(Point2F *)p2
{
    return [Line2F signTestedX:tested.x testedY:tested.y
                           p1x:p1.x p1y:p1.y
                           p2x:p2.x p2y:p2.y];
}

+ (CGFloat)signTestedX:(CGFloat)testedX testedY:(CGFloat)testedY
                   p1x:(CGFloat)p1x p1y:(CGFloat)p1y
                   p2x:(CGFloat)p2x p2y:(CGFloat)p2y
{
  return (testedX - p2x) * (p1y - p2y) - (p1x - p2x) * (testedY - p2y);  
}

@end 
```

谁能解释为什么大部分 CPU 时间都花在`[NSObject release]`和上`[NSObject retain]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T05:19:55.597

如果它不知道任何更好的 ARC 将保留方法的所有参数并在方法退出时释放它们（请参阅[此 objc 语言邮件列表电子邮件](http://lists.apple.com/archives/objc-language/2011/Nov/msg00005.html)）。

您应该能够根据您的需要`+signTested:p1:p2:`使用`__weak`or注释参数来避免这种情况。`__unsafe_unretained`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:42:42.350

那么可能是很多东西。正如 FrozenDevil 所说，如果您使用它，它可能与 ARC 有关。我想很可能该方法在一个巨大的循环中被调用不同的时间。尝试传递弱引用，但当然你必须确保它们在整个过程中都存在。我还会尝试优化将每个循环嵌入自动释放池中的循环。

# jira - 将 JIRA 项目从一个实例迁移到另一个实例

> ID：15469671
> 
> 赞同：0
> 
> 时间：2013-03-18T04:17:54.650
> 
> 标签：jira

我们在我们这边安装了一个 JIRA 实例，我们的客户正在使用它。现在客户已经购买了 JIRA on Demand 的许可证，并希望我们将他们的项目从我们的 JIRA 迁移到他们的。

有没有办法做到这一点？

在此先感谢考希克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T15:38:41.927

你会在这里找到一个很好的教程：http: [//www.jusuchyne.com/codingforme/2012/12/jira-migrating-certain-projects-from-instance/](http://www.jusuchyne.com/codingforme/2012/12/jira-migrating-certain-projects-from-instance/)

[如此处](https://answers.atlassian.com/questions/24187/is-there-a-tool-or-method-to-export-a-project-from-one-instance-of-jira-test-and-import-the-project-into-another-jira-instance-production "这里")所述，Atlassian Marketplace 中有一个插件，可让您复制配置：[https ://marketplace.atlassian.com/plugins/com.awnaba.projectconfigurator.projectconfigurator](https://marketplace.atlassian.com/plugins/com.awnaba.projectconfigurator.projectconfigurator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:37:07.193

查看 Altasian [Splitting+一个 JIRA 实例](https://confluence.atlassian.com/display/JIRA/Splitting+a+JIRA+instance)页面：

> 有时，组织可能需要将其现有的 JIRA 实例拆分为两个单独的实例。例如，可能需要在一个 JIRA 实例中包含一些特定项目，而在第二个实例中包含其他项目。

基本上，它是通过[备份项目](https://confluence.atlassian.com/display/JIRA/Backing+Up+Data)并在新服务器上[恢复它来完成的。](https://confluence.atlassian.com/display/JIRA/Restoring+Data)

# r - 没有 for 循环的多元 XTS 列表上的除法

> ID：15469672
> 
> 赞同：0
> 
> 时间：2013-03-18T04:18:09.197
> 
> 标签：r, xts

我有一个 2 列 XTS 的列表，我想将每个 XTS 的第二列除以第三个 XTS，并将结果存储回第二列。我目前正在使用 for 循环来执行此操作：

```
for(i in 1:length(data)){
  data[[i]][,2] <- data[[i]][,2] / temp
} 
```

`temp`是单列 XTS，有时数据中的 XTS 更长，有时不是，但它们确实重叠。

如果没有 for 循环，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:55:41.597

在没有适当样本数据的情况下拍摄。如果您提供示例数据，我会相应地更新答案。

对于时间序列，IMO，进行除法的正确方法将是对应于相同时间戳的值。为此，您应该首先使用列表对象的每个元素`merge`的`temp`xts 时间序列，`data`然后进行除法。为此，您可以使用下面定义的`lapply`自定义函数`div`。

```
div <- function(x) {
    x <- merge(x,temp)
    x[,2] <- x[,2] / x[,3]
}

lapply(X = data, FUN = div) 
```

# wordpress - SMTP 服务器错误：550 验证失败-此处没有此类用户 550 发件人验证失败

> ID：15469675
> 
> 赞同：1
> 
> 时间：2013-03-18T04:18:23.847
> 
> 标签：wordpress, smtp, hosting

我正在为 wordpress 使用 [配置 SMTP](http://coffee2code.com/wp-plugins/configure-smtp/)插件，当我在本地服务器（localhost）中使用它时，它可以正常工作并向我发送确认它正在工作的测试电子邮件。但是当我在托管站点中使用它时（我使用了 Hostgator），它给了我一个 STMP 错误。![在此处输入图像描述](../Images/16c2bb791c00e858f8c7c41eb27a19c2.png)

此错误的可能原因是什么？什么是可能的解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:19:27.723

基于第二个错误，以及“验证失败”和“发件人验证”失败，我猜你没有正确设置 SMTP 身份验证。您正在通过 Hostgator 转发您的邮件，因此它们可能具有您需要正确验证的特定主机名/端口，以使您的邮件能够流动。我建议在这方面与 Hostgator 同步。

# windows-phone-7 - 当键盘已经可见时，以编程方式将焦点设置到文本框

> ID：15469676
> 
> 赞同：0
> 
> 时间：2013-03-18T04:18:24.750
> 
> 标签：windows-phone-7

我有一个页面，底部有两个文本框、一个复选框和另外两个文本框。

当我单击复选框时，我想将焦点设置到它下面的文本框。这很好用，软键盘出现，屏幕向上滚动以显示键盘上方的文本框。

但是，如果 TextBox1 或 TextBox2 当前处于焦点状态并且键盘已经显示，则从 CheckBox_Click 事件设置焦点将重置屏幕并向下滚动。

我猜这些事件相互冲突 - TextBox 失去焦点并隐藏键盘 + 向下滚动屏幕 - TextBox 从外部获得焦点并显示键盘（但不会向上滚动屏幕）

可以以某种方式防止这种情况吗？

这是xaml和代码的简化版本

xml:

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <StackPanel Margin="0,100,0,0">
        <TextBox x:Name="TextBox1" />
        <TextBox x:Name="TextBox2" />
        <CheckBox Content="Click Me" Click="CheckBox_Click" />
        <TextBox x:Name="TextBox3" />
        <TextBox x:Name="TextBox4" />
    </StackPanel>
</Grid> 
```

背后的代码：

```
private void CheckBox_Click(object sender, RoutedEventArgs e)
{
    TextBox3.Focus();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:15:48.710

您遇到的问题是，当焦点位于不在可滚动容器中且被 SIP 遮挡的控件上时，操作系统将尝试移动页面。

我通过将所有内容放入 a`ScrollViewer`并`VerticalScrollOffset`根据所选控件以及是否显示 SIP 来解决此问题。这是很多非常混乱、繁琐的代码。在开始之前问问自己移动焦点的价值是否值得付出努力，因为没有简单的解决方案。

# c# - 在客户端 PC 上打开 fileZilla

> ID：15469679
> 
> 赞同：0
> 
> 时间：2013-03-18T04:18:33.533
> 
> 标签：c#, asp.net

请任何人告诉我如何在 ASP.net 网站上打开客户端 PC 的 fileZilla。我们正在提供允许管理员单击 FTP 链接并下载文件 (HTML) 并修改和上传到服务器的功能。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:23:50.397

您可以为用户提供有关将 filezilla 应用程序与 ftp: 链接相关联的说明。[在 SuperUser 上](https://superuser.com/questions/186563/associate-ftp-hyperlink-to-filezilla)查看这个问题

# c# - 在 LINQ to Entities 中删除记录的正确方法

> ID：15469684
> 
> 赞同：19
> 
> 时间：2013-03-18T04:18:52.597
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我只是有一个非常简单的情况，我只需要使用 Linq2Entities 删除记录。我试图做一些研究，但仍然无法找到正确的方法。

这是我的简单代码：

```
[DataObjectMethod(DataObjectMethodType.Delete)]
public void DeleteEmployee(Employee z)
{
    using (var ctx = new MyEntity())
    {
        var x = (from y in ctx.Employees
                 where  y.EmployeeId == z.EmployeeId
                 select y).FirstOrDefault();
         ctx.DeleteObject(x);
         ctx.SaveChanges();
    }
 }

[DataObjectMethod(DataObjectMethodType.Select)]
public List<Employee> GetAllEmployee()
{
    using (var ctx = new MyEntity())
    {
        var x = from y in ctx.Employees
                select y;
        return x.ToList();
    }
} 
```

**例如，如果我将y.EmployeeName == "Harold Javier"**分配给上面的 Delete 方法，我可以删除特定记录，但是当我将**y.EmployeeId == z.EmployeeId**分配给上面的代码时，删除不起作用。（注：EmployeeId是Employee表的主键）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-12-17T04:18:56.400

我认为这是删除的更好选择

```
using (var ctx = new MyEntity())
    {
        var x = (from y in ctx.Employees
             orderby  y.EmployeeId descending
             select y).FirstOrDefault();
        ctx.Employees.Remove(x);
        ctx.SaveChanges();
    } 
```

在我身边`DeleteObject`不工作，所以我使用`Remove`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-18T04:32:42.360

您首先需要在实际删除之前验证记录是否存在；

```
[DataObjectMethod(DataObjectMethodType.Delete)]

    public void DeleteEmployee(Employee z)
    {
        using (var ctx = new MyEntity())
        {
            var x = (from y in ctx.Employees
                     where  y.EmployeeId == z.EmployeeId
                     select y).FirstOrDefault();
             if(x!=null)
             {
             ctx.Employees.DeleteObject(x);
             ctx.SaveChanges();
             }
        }
     } 
```

在删除某些内容之前，请始终检查空值。因为用户可能会更改 Id（在查询字符串中）并尝试不同的组合。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-04-13T15:11:47.980

@Harold，我知道这篇文章已经很老了，但我觉得解决您最初的问题和答案很重要。您的解决方案可能适用于您的情况，但存在一些问题。

首先，您的原始代码是根据传入的参数选择要删除的记录。您的解决方案是删除 EmployeeId 最大的记录。这可能是你想要的，但不太可能。第二个问题是完成删除需要两次数据库访问。第一个是让实体删除，第二个是实际执行删除。

以下代码片段将消除读取的需要并将删除员工“z”。这应该会产生预期的结果并表现得更好。

```
public void DeleteEmployeeId(Employee z)
{
    using (var ctx = new MyEntityContext())  
    {  
        var x = new Employee{ EmployeeId = z.EmployeeId };
        ctx.Entry(x).State = EntityState.Deleted;  
        ctx.SaveChanges();  
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-10-26T14:45:37.893

上面的答案可能已经过时了... DeleteObject 方法在当前版本的实体框架中似乎不存在。我不得不使用 Remove 方法。

```
var delobj = db.mytable.Where(p => p.ServiceLocation == serviceLocationID).SingleOrDefault();
db.myTable.Remove(delobj); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-19T02:50:58.727

我决定回答我自己的问题。

当我执行以下操作时，我的删除功能起作用：

```
using (var ctx = new MyEntity())
    {
        var x = (from y in ctx.Employees
             orderby  y.EmployeeId descending
             select y).FirstOrDefault();
        ctx.Employees.DeleteObject(x);
        ctx.SaveChanges();
    } 
```

我知道可能有比这更好的方法，但它同时对我有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-07T02:57:29.417

以下对我有用：

```
MyList.RemoveAll(x => x.MyField == 0); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-30T12:19:11.290

这可能是因为每个请求的上下文不同（var ctx = new MyEntity()）。尝试使用这个

```
public static class ObjectContextPerHttpRequest
{
    public static TestCasesModelContainer Context
    {
        get
        {
            string objectContextKey = HttpContext.Current.GetHashCode().ToString("ObjectContextPerHttpRequest");

            if (!HttpContext.Current.Items.Contains(objectContextKey))
            {
                HttpContext.Current.Items.Add(objectContextKey, new TestCasesModelContainer());
            }

            return HttpContext.Current.Items[objectContextKey] as TestCasesModelContainer;
        }
    }
} 
```

删除就像

```
public static void Delete(Testcase tc)
{
    var db = ObjectContextPerHttpRequest.Context;

    db.DeleteObject((from p in db.TestcaseSet
                     where p.Id == tc.Id
                     select p).Single());
    db.SaveChanges();
} 
```

# javascript - 动画结束时导航到 href

> ID：15469687
> 
> 赞同：1
> 
> 时间：2013-03-18T04:19:33.417
> 
> 标签：javascript, jquery

所以我试图让一个部分在点击这样的链接之前淡出

```
<a class="fadelink" href="path/to/file">Hello</a>

<script type="text/javascript">
        $("a.fadelink").click(function(e){
            e.preventDefault();         
            $("#content").fadeTo(400,0,function(){
                window.location.href = $(this).attr("href");

            });
        });
    </script> 
```

问题是，jQuery 一直以“未定义”和 404 的重定向返回给我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T04:21:04.453

您`$(this)`的 in`$(this).attr("href")`指向`$("#content")`哪个是**错误**的。将其移动到正确的范围内：

```
$("a.fadelink").on("click", function( evt ) {

   evt.preventDefault();   

   var goTo = $(this).attr("href");           // get href value of `this` anchor

   $("#content").fadeTo(400, 0, function() {
       window.location = goTo;                // Now you can use it
   });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T04:21:20.827

你指的是错误的`this`。该`href`属性存在于锚点上，而不是`#content`元素上。

```
$("a.fadelink").click(function(e){
    e.preventDefault();
    var that = this;
    $("#content").fadeTo(400,0,function(){
        window.location.href = $(that).attr("href");

    });
}); 
```

# codeigniter - nginx codeigniter 子域给出错误 500

> ID：15469688
> 
> 赞同：1
> 
> 时间：2013-03-18T04:19:37.700
> 
> 标签：codeigniter, nginx, subdomain

好吧，

所以我的主站点 yorkdigitalsolutions.com 在 nginx 上使用 codeigniter，一切正常，我得到了重定向，一切正常。

所以我对我正在处理的一个 codeigniter 项目做同样的事情，我把它放到我的测试子域 etienne.yorkdigitalsolutions.com 中，并像我应该在 Linode 的 dns 管理器中一样创建 A 区域，当我只有一个平面 html 文件时，一切都解决了，运行良好，否则使用 codeigniter 项目，我会收到错误 500。

我应该从哪里开始寻找问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:52:02.610

好吧，

所以事实证明，如果你需要一些东西（比如数据库）并且 codeigniter 无法访问它，它会抛出错误 500。

希望这对将来的某人有所帮助

# file - 我想列出目录中的所有文件

> ID：15469696
> 
> 赞同：0
> 
> 时间：2013-03-18T04:20:43.497
> 
> 标签：file, shell

我的代码不起作用。在`if`-statement 中，它说“参数太多”。我知道有其他方法可以做到这一点，但我想找出我的代码有什么问题。

```
for fname in "*"
do
  h=$fname
  if [ -f $h ]
  then
    echo $fname
  fi
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T04:27:09.370

删除周围的双引号，`*`请参阅：

```
for fname in *
do
  h=$fname
  if [ -f $h ]
  then
    echo $fname
  fi
done 
```

希望这会奏效。

> 双引号：用双引号括起来的变量被扩展。

这就是您的代码抛出错误的原因：“参数太多”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:30:53.747

```
read LOCATION
for filename in $LOCATION
do
    if [[ -d $filename ]]; then
        echo "$filename /"
    elif [[ -f $PASSED ]]; then
        echo "$filename *"
    else
        echo "$filename is not valid"
    exit 1
    fi
done 
```

# jquery - 创建页面滚动横幅效果

> ID：15469706
> 
> 赞同：0
> 
> 时间：2013-03-18T04:21:33.993
> 
> 标签：jquery, html, css

我在内容滑过横幅图像但导航保持不变的网站上遇到了这种令人敬畏的效果？我想知道我将如何实现这一目标？

[http://www.paulbird.co](http://www.paulbird.co)

谢谢乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:55:50.490

正如我在评论中所说，您需要`z-index`正确设置。一正一负一零应该有效。这是小提琴。 [http://jsfiddle.net/btevfik/KVVfj/](http://jsfiddle.net/btevfik/KVVfj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:54:29.630

您可以使用位置：固定

您还可以通过指定应该大于其他元素的 z-Index 来保持一个元素高于其他元素。

```
z-Index:1000 
```

# javascript - 使用 javascript 和 css 下拉

> ID：15469712
> 
> 赞同：0
> 
> 时间：2013-03-18T04:21:59.173
> 
> 标签：javascript, css

```
<html>
<head>
<script type="text/javascript" src="js/mootools.js"></script>
<script> 
var username = document.getElementById('username');
var menu = document.getElementById('menu');

function show_or_hide()
{
   if(menu.style.display!='block') menu.style.display='block';
   else menu.style.display='none';

}

username.addEventListener('click', show_or_hide);
</script>
<style type='text/css'>
#dropdown
{
    background: #eee;
    color: steelblue;
    display: inline-block;
}

#username
{
    padding: .5em 1em;
}

#username:hover
{
    background: #eef;
    cursor: pointer;
}
#menu
{
    display: none;
    padding: .5em 1em;
}
</style>
</head>
<body>
<div id='dropdown'>
   <div id='username'>dropdown@fiddle.net</div>
   <div id='menu'>
      <div>menu item a</div>
      <div>menu item b</div>
      <div>menu item c</div>
      <div>menu item d</div>
   </div>
</div>

</body>
</html> 
```

我尝试了上面的 jsfiddle 示例......它在 jsfiddle 站点上运行良好，但是当我尝试在我的站点上实现确切的代码时，我没有运气。我需要包含一个库吗？如果有，是哪一个？谢谢！我的目标是为 Gmail、联系人和任务制作一个下拉菜单，就像 Gmail 上的一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:34:05.823

Firebug 说用户名是空的...

将 javascript 代码放在 html 代码下方。它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:47:15.983

如果你加载jquery库，你还不如更简单..

```
$(document).ready(function () {
    $("#username").click(function () {
        $("#menu").toggle();
    })
}); 
```

[http://jsfiddle.net/djwave28/DVttJ/11/](http://jsfiddle.net/djwave28/DVttJ/11/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T04:55:04.373

```
try this. I have changed your code. Please check it. it is working fine in both.

http://jsfiddle.net/DVttJ/3/

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
#dropdown
{
    background: #eee;
    color: steelblue;
    display: inline-block;
}

#username
{
    padding: .5em 1em;
}

#username:hover
{
    background: #eef;
    cursor: pointer;
}
#menu
{
    display: none;
    padding: .5em 1em;
}
</style>
<script type="text/javascript">
var username = '';
var menu = '';
window.onload=function(){
    username = document.getElementById("username");
    menu = document.getElementById("menu");
    username.addEventListener("click", show_or_hide);
}

function show_or_hide()
{
   if(menu.style.display!="block") menu.style.display="block";
   else menu.style.display="none";

}
</script>
</head>

<body>
<div id="dropdown">
   <div id="username">dropdown@fiddle.net</div>
   <div id="menu">
      <div>menu item a</div>
      <div>menu item b</div>
      <div>menu item c</div>
      <div>menu item d</div>
   </div>
</div>
</body>
</html> 
```

# html - PHP Mail() 函数问题 - 未发送消息字段 (WordPress)

> ID：15469714
> 
> 赞同：0
> 
> 时间：2013-03-18T04:22:17.730
> 
> 标签：html, function, email, php

我知道有成千上万种使用 PHP mail() 函数的方法，但我对 PHP 还很陌生，可以使用一些指针来让我朝着正确的方向前进。我在我的 WordPress 驱动网站中写入了一个 PHP 邮件功能，它通过电子邮件发送除消息字段之外的所有信息（姓名、电子邮件和电话）。我已经对这里以及每个 PHP 相关站点进行了研究，但我更愿意了解我的具体问题，以便更好地理解我在写什么。所以说......这是代码：

```
<?php

function spamcheck($field)
  {
  $field=filter_var($field, FILTER_SANITIZE_EMAIL);

  if(filter_var($field, FILTER_VALIDATE_EMAIL))
    {
        return TRUE;
    }
  else
    {
        return FALSE;
    }
  }

if (isset($_POST['email']))
  {

  $mailcheck = spamcheck($_POST['email']);
  if ($mailcheck==FALSE)
    {
        $submit_message = "Please input your information again.";
    }
  else
    {
        $name = $_POST['name'];
        $email = $_POST['email'];
        $phone = $_POST['phone'];
        $message = $_POST['message'];

    mail("emailaddress@gmail.com", "From: $name", "Email: $email", "Phone Number: $phone", "Message: $message");

    $submit_message = "Thank you for your message";
    }
  }
?> 
```

和HTML...

```
<form name="message-me" id="contact-form" action="<?php echo $_SERVER['REQUEST_URI']; ?>" method="POST" enctype="multipart/form-data">
                <div class="field-group">
                    <label>Name:</label><input type="text" name="name" id="form_name" />
                </div>
                <div class="field-group">
                    <label>Email:</label><input type="text" name="email" id="form_email" />
                </div>
                <div class="field-group">
                    <label>Phone:</label><input type="text" name="phone" id="form_phone" />
                </div>
                <div class="field-group">
                    <label>Message:</label><textarea rows="4" cols="31" name="message" id="form_message"></textarea>
                </div>
                <div class="field-group">
                    <input type="image" src="<?php bloginfo('template_directory'); ?>/images/Send-Message-Arrow.png" width="90" height="72" class="form-button" />
                </div>
            </form> 
```

任何信息将不胜感激。正如我所提到的，我仍在学习 PHP，我真的很想了解我在写什么——而不仅仅是一直盲目地复制和粘贴代码。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:29:00.950

要配置您的 SMTP，首先检查一下，然后

```
//Header Information for mail
$headers = "YOUR HEADERS INFORMATION HERE";
$msg="Email: $email<br/>Phone Number: $phone<br/>Message: $message";
mail("emailaddress@example.com", $subject, $msg, $headers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:29:52.373

请阅读本手册及其上的指令和示例，您将很好地理解您在做什么。只需花点时间阅读和理解好，然后从那时开始问你的问题。现在，您似乎甚至不了解 PHP mail() 的工作原理。阅读然后再回来，这样您就会了解向您指出的任何解决方案，并且您不会只是复制和粘贴解决方案而明天无法解决。

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:37:37.893

请查看[文档](http://php.net/manual/en/function.mail.php)。

您需要提供参数为

```
mail($to, $subject, $message, $headers); 
```

在这里，您提供了正确的“收件人”电子邮件地址。

所以这可能会帮助你：

```
$message = $_POST['message'];

//Give mail a subject
$subject = "YOUR SUBJECT HERE";

//Header Information for mail
$headers = "YOUR HEADERS INFORMATION HERE";

mail("emailaddress@gmail.com", $subject, $message, $headers);

$submit_message = "Thank you for your message"; 
```

享受！

# c# - 访问已登录的 Windows 8 应用程序的用户配置文件

> ID：15469718
> 
> 赞同：0
> 
> 时间：2013-03-18T04:22:53.747
> 
> 标签：c#, xaml, windows-8

我是 Windows 开发的新手，在没有运气的情况下搜索了可用的主题后，我想我会问我的问题......

我正在开发一个应用程序，我需要在其中访问已登录的用户配置文件以提取名称和图片，如果我可以访问它，可能还有其他信息，例如电子邮件等。

是否有 API 可以访问登录的用户个人资料信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:31:34.330

鉴于您最近关于它是 Windows 应用商店应用程序的评论，我假设您的意思是访问已登录的 Microsoft 帐户（又名 Windows Live ID）。

以下是一些应该有所帮助的资源：

1.  构建演示文稿[使用 Microsoft 帐户为您的应用程序提供动力](http://channel9.msdn.com/Events/Build/2012/3-138)
2.  Windows 8 应用开发者[博客](http://blogs.msdn.com/b/windowsappdev/archive/2012/03/14/bring-single-sign-on-and-skydrive-to-your-windows-8-apps-with-the-live-sdk.aspx)
3.  [dev.windows.com](http://dev.windows.com)网站上的[实时服务](http://msdn.microsoft.com/en-us/library/windows/apps/hh770846.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:40:48.583

`UserPrincipal Class`如果您在 .NET 4.5 或更高版本下编程，您可以使用！！这门课在

[System.DirectoryServices 命名空间](http://msdn.microsoft.com/en-us/library/gg145037.aspx)

[System.DirectoryServices.AccountManagement 命名空间](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

[UserPrincipal.Current 属性](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.userprincipal.current.aspx)

只需检查上述类和命名空间的文档

# php - onclick 确认功能与数组中的不同文本

> ID：15469720
> 
> 赞同：0
> 
> 时间：2013-03-18T04:23:00.793
> 
> 标签：php, javascript

我在使用超链接时尝试从数组中显示不同的确认文本时遇到问题。文本始终来自数组中的最后一个确认文本。我在这个论坛上看到了 2 个在函数中使用 function() 的示例，但我无法通过查看示例来使其正常工作。

这是我的代码：

```
echo '
<script type="text/javascript">         
        function getDetails(message)
        {           
            if (confirm(message))
                return true;
            else
            {                   
                var links = document.getElementsByTagName("a");

                for(i=0;i<links.length;i++) 
                    links[i].href = item_NoLink;
            }           
        }
    </script>';

foreach ($items as $item)
{
    $link = 'http://test_url/mytest.php;report='. $item['id'];

            echo '
            <script type="text/javascript">                 
                var item_detail = ', json_encode($item['reported_spam']['detail']),'
                var item_NoLink = ', json_encode('http://test_url/mytest.php;'),'                   
            </script>
                <a id="mylink[]" onclick="getDetails(item_detail);" href="'.$link.'" style="text-decoration:none;">
                    <img id="myImage" alt="" src="http://test_url/images/reported.gif" title="'.$item['reported_spam']['title'].'" style="position:relative;border=0px;vertical-align:middle;right:5px;" />
                </a>';

} 
```

谢谢。

* * *

编辑：我想通了。

@Grant Zhu：数组不是像 php 那样写的，只需使用空方括号就可以进入下一个键。你是对的，因为我确实为图像 id 数组和 js 变量犯了错误。同样对于 php，当在带有单引号的 echo 中使用单引号时，必须使用反斜杠（除非再次使用 php）。

我让它这样工作：

```
echo '
<script type="text/javascript">   
    var item_NoLink = ', json_encode('http://test_url/mytest.php;'),'         
    function getDetails(message)
    {           
        if (confirm(message))
            return true;
        else
        {                   
            var links = document.getElementsByTagName("a");

            for(i=0;i<links.length;i++) 
                links[i].href = item_NoLink;
        }           
    }
</script>';

foreach ($items as $item)
{
    $link = 'http://test_url/mytest.php?report='. $item['id'];

        echo '            
            <a id="mylink[]" onclick="getDetails(\'',$item['reported_spam']['detail'],'\');" href="'.$link.'" style="text-decoration:none;">
                <img id="myImage[]" alt="" src="http://test_url/images/reported.gif" title="'.$item['reported_spam']['title'].'" style="position:relative;border=0px;vertical-align:middle;right:5px;" />
            </a>';

} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:04:15.743

您应该检查生成的 javascript，您会发现 item_detail 和 item_NoLink 有多个声明。这意味着您一次又一次地将值分配给相同的变量。当然，最后的赋值最后才会生效。

您可以将详细文本直接放在 getDetails 函数中。确保文本由'引用。你最好让 id`<a>`和`<img>`unique 因为这就是 id 的意思。我对PHP不熟悉，请检查下面的语法是否正确。

```
foreach ($items as $item)
{
    $link = 'http://test_url/mytest.php;report='. $item['id'];

            echo '
                <a id="mylink$item['id']" onclick="getDetails(', json_encode($item['reported_spam']['detail']),');" href="'.$link.'" style="text-decoration:none;">
                    <img id="myImage$item['id']" alt="" src="http://test_url/images/reported.gif" title="'.$item['reported_spam']['title'].'" style="position:relative;border=0px;vertical-align:middle;right:5px;" />
                </a>';

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:44:23.180

```
$link = 'http://test_url/mytest.php;report='. $item['id']; 
```

这段代码很奇怪，我想你的代码可能是

```
$link = 'http://test_url/mytest.php?report='. $item['id']; 
```

# ruby-on-rails - 为什么 Rails 应用程序在底部显示数据库信息？

> ID：15469722
> 
> 赞同：3
> 
> 时间：2013-03-18T04:23:12.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我创建了一个博客。每当我添加一个帖子时，在帖子索引页面 ( ) 的底部总是会显示来自数据库的记录列表`home.html.erb`，如下所示：

```
[#<Post id: 1, title: "hahaha", content: "Because the gravatar_for method is undefined, the u...", public: true, created_at: "2013-03-18 04:00:17", updated_at: "2013-03-18 04:01:09">] 
```

我试图删除`<%= will_paginate @posts %>`，但它不起作用。

这是我的`home.html.erb`：

```
<%= @posts.each do |post| %>
<article class="posts">
    <h2><%= link_to post.title, post_path(post) %></h1>
    <h3><%= post.public %></h3>
    <p><%= truncate markdown(post.content), length: 400, omission: " ......" %></p>
    <span class="continue"><%= link_to "... Continue Reading ...", post_path(post) %></span>
</article>
<% end %>
<%= will_paginate @posts %> 
```

这是我的 Gemfile，以备不时之需：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'pg'
gem 'redcarpet'
gem 'will_paginate'
gem 'redcarpet'
gem 'coderay'

group :development, :test do
  gem 'rspec'
  gem 'rspec-rails'
  gem 'faker' 
end

group :test do
  gem 'capybara'
  gem 'factory_girl_rails'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

gem 'bcrypt-ruby', '~> 3.0.0' 
```

这是一个奇怪的情况。所以我想知道发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T04:27:38.903

你需要改变这个：

```
<%= @posts.each do |post| %> 
```

对此：

```
<% @posts.each do |post| %> 
```

告诉它将输出附加到 HTML，这`<%=`就是您看到数组的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T04:29:46.247

将您的模板文件从 -

```
<%= @posts.each do |post| %>
<article class="posts">
  <h2><%= link_to post.title, post_path(post) %></h1>
  <h3><%= post.public %></h3>
  <p><%= truncate markdown(post.content), length: 400, omission: " ......" %></p>
  <span class="continue"><%= link_to "... Continue Reading ...", post_path(post) %></span>  
  </article>
  <% end %>
<%= will_paginate @posts %> 
```

到 -

```
<% @posts.each do |post| %>
  <article class="posts">
  <h2><%= link_to post.title, post_path(post) %></h1>
  <h3><%= post.public %></h3>
  <p><%= truncate markdown(post.content), length: 400, omission: " ......" %></p>
  <span class="continue"><%= link_to "... Continue Reading ...", post_path(post) %>  </span>
 </article>
<% end %> 
```

它出现是因为您正在使用 <%= @posts.each do |post| %> 而不是 <% @posts.each 做 |post| %>。<%= %> 将输出返回值，但 <% %> 不会

# jquery - 通过窗口高度减去所有其他 div 高度来制作 div 高度

> ID：15469725
> 
> 赞同：-2
> 
> 时间：2013-03-18T04:23:33.317
> 
> 标签：jquery, css, height

这个问题是对[$(window).height() 的跟进，似乎并不准确](https://stackoverflow.com/questions/15469572/window-height-doesnt-seem-exact)

首先，我的 js 小提琴：

[http://jsfiddle.net/WL5nr/3/](http://jsfiddle.net/WL5nr/3/)

所以我有一个 4800 像素高的 div，然后是另一个 20 像素高的 div。我希望 4800px 高的 div 在所有其他 div 出现后填充窗口。

我想我可以做一个 for 循环来查找所有 div 或 p 或任何需要查找的东西，获取它们的所有高度并从中减去它们`$(window).height()`，但我不知道如何做到这一点，更不用说这是最好的方法了。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:29:28.863

这应该可以解决问题，这是不言自明的：

[http://jsfiddle.net/3Qrry/](http://jsfiddle.net/3Qrry/)

```
var demoheight = $(window).height() - $('div#extradiv').height();
$("#demo").css("height", demoheight); 
```

对于所有额外`div`的 s，将 a 添加`- $(element).height()`到`demoheight`变量中。

# awk - 计算 PDB 文件中的原子数

> ID：15469726
> 
> 赞同：0
> 
> 时间：2013-03-18T04:23:37.623
> 
> 标签：awk, gawk

我想计算 pdb 文件中每个残基的原子数。PDB 文件如下所示。第三列表示原子，第四列表示残基。

```
ATOM      1  N   ASN A 380      -0.011  22.902 -13.714  1.00 65.81           N
ATOM      2  CA  ASN A 380       0.401  23.938 -12.714  1.00 65.53           C 
ATOM      3  C   ASN A 380       1.926  24.019 -12.595  1.00 64.48           C
ATOM      9  N   THR A 381       2.553  24.693 -13.562  1.00 61.65           N
ATOM     10  CA  THR A 381       4.006  24.848 -13.609  1.00 58.60           C 
ATOM     16  N   ILE A 382       5.156  22.716 -13.481  1.00 53.48           N  
ATOM     17  CA  ILE A 382       5.808  21.571 -12.830  1.00 49.47           C
ATOM     18  C   ILE A 382       6.645  21.933 -11.584  1.00 45.24           C
ATOM     28  CB  GLN A 383       8.735  24.763 -10.759  1.00 30.19           C 
ATOM     29  CG  GLN A 383      10.140  24.257 -11.037  1.00 29.17           C
ATOM     30  CD  ASN A 384      10.397  23.975 -12.514  1.00 29.51           C
ATOM     31  OE1 ASN A 384      10.892  24.838 -13.237  1.00 30.67           O 
```

我想得到如下输出

```
Total no:of ASN atoms - 5
Total no:of THR atoms - 2
Total no:of ILE atoms - 3
Total no:of GLN atoms - 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:32:15.663

这应该做的工作：

```
awk '{print $4}' <file> | sort | uniq -c | \
    awk '{print "Total no:of", $2, "atoms -", $1}' 
```

或纯`awk`：

```
awk '{atom[$4]++;}
    END{for (i in atom) {print "Total no:of", i, "atoms -", atom[i]} }' <file> 
```

两种方法的输出：

```
Total no:of GLN atoms - 2
Total no:of THR atoms - 2
Total no:of ASN atoms - 5
Total no:of ILE atoms - 3 
```

# visual-studio-2008 - Cplex Visual Studio 2008 错误示例

> ID：15469727
> 
> 赞同：0
> 
> 时间：2013-03-18T04:23:39.867
> 
> 标签：visual-studio-2008, cplex

我是在 Visual Studio 中使用 Cplex 的初学者。

我安装了它们并按照手册的步骤进行操作。

当我尝试从这里获取的示例时：[示例](http://pic.dhe.ibm.com/infocenter/cosinfoc/v12r2/index.jsp?topic=/ilog.odms.cplex.help/Content/Optimization/Documentation/CPLEX/_pubskel/CPLEX86.html)

我有这些错误：

> 致命错误 C1083：无法打开包含文件：'ilcplex/ilocplex.h'：没有这样的文件或目录

我试图找到解决方案，但我找不到任何解决方案。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T07:45:26.027

你添加了dll库吗？如果您使用的是 Visual Studio，则在您的 C++ 解决方案中，项目：

配置属性 -> c/c++ -> 常规，在 Additional include 目录中，添加：C:\ILOG\CPLEX_Studio_AcademicResearch122\concert\include C:\ILOG\CPLEX_Studio_AcademicResearch122\CPLEX\include

配置属性 -> C/C++ -> 预处理器，预处理器定义应该是：WIN32；调试；控制台；IL STD

配置属性->链接器->输入，添加到附加依赖项：C:\ILOG\CPLEX_Studio_AcademicResearch122\CPLEX\lib\x86_windows_vs2008\stat_mda\cplex122.lib C:\ILOG\CPLEX_Studio_AcademicResearch122\CPLEX\lib\x86_windows_vs2008\stat_mda\ilocplex.lib C:\ILOG\CPLEX_Studio_AcademicResearch122\concert\lib\x86_windows_vs2008\stat_mda\concert.lib

手动注意，主目录取决于安装 CPLEX 的位置。

现在你可以：

#include "\ilcplex\ilocplex.h"

以及您可能想玩的 cplex 中的其他一些 .h ！

快乐的线性优化！如果不是那么线性，那就更享受吧！;-)

# android - 问题：在不同的活动中更改屏幕方向

> ID：15469728
> 
> 赞同：2
> 
> 时间：2013-03-18T04:23:47.453
> 
> 标签：android, android-layout, android-activity, android-screen-support, android-screen

我的主要活动在画布上有 4 个图像，屏幕方向为“纵向”。当我遍历屏幕方向为“横向”的子活动时。

问题：当我从子 Activity 回到主 Activity 时，4 个图像被重新定位到不同的位置。我需要解决这个问题，以便即使屏幕方向发生变化，活动也可以正常工作。

提前致谢。

布局

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Black">
   <activity
        android:name=".DragDrop"
        android:label="@string/title_activity_main" 
        android:screenOrientation="landscape"  
        android:configChanges="orientation|screenSize|keyboardHidden"   >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 

    <activity
        android:name=".QuizHard"
        android:label="@string/title_activity_main"
        android:screenOrientation="landscape"
        android:configChanges="orientation|screenSize|keyboardHidden"   >

        <intent-filter>
            <action android:name="android.intent.action.QUIZHARD" /> 
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:18:18.303

您可以在 android manifest 文件中将方向设置为主要活动的纵向和子活动的横向。

```
 <activity android:name="Main"
      android:screenOrientation="portrait"/> 
```

同样将方向设置为儿童活动的横向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:18:29.540

您可以像这样在清单中为活动添加方向

```
<activity android:name="Main" android:screenOrientation="portrait"/> 
```

或者你可以像这样在java文件中设置布局方向

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:20:21.600

您可以在`AndroidManifest.xml`文件中添加语句，告诉它处理某些屏幕更改，例如方向更改。通常，当方向改变时，会加载新的布局并重新创建屏幕，通过将此语句添加到清单文件中，它不会重新创建视图。更改您的活动的活动声明并添加此声明。

```
 <activity
        android:name=".MainActivity"
        android:configChanges="orientation"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

这`android:configChanges="orientation"`将阻止 Android 重新创建活动，从而阻止它重新加载视图和更改图像位置。`android:screenOrientation="portrait"`如果您希望 Android 将方向锁定为纵向或横向，您也可以在 configChanges 语句之后添加。

希望这可以帮助！很想听到你的结果。

# java - SOAP 1.2 消息在发送到仅限 SOAP 1.1 的端点时无效

> ID：15469733
> 
> 赞同：11
> 
> 时间：2013-03-18T04:24:07.947
> 
> 标签：java, spring, spring-batch

从spring批处理应用程序调用spring-cxf-webservice时出现错误。此错误仅在从批处理调用时发生。从普通soap UI调用时，它工作正常。一旦从批处理调用一些正在处理的记录。一些记录发生错误。检查了批处理和 Web 服务的 SOAP 版本及其相同。

```
org.apache.cxf.binding.soap.SoapFault: A SOAP 1.2 message is not valid when sent to a SOAP 1.1 only endpoint.
                at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:144)
                at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:60)
                at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
                at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:799)
                at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1627)
                at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1494)
                at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1402)
                at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)
                at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:649)
                at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
                at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
                at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:533)
                at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:463)
                at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:366)
                at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:319)
                at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:88)
                at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134) 
```

批量配置

```
<jaxws:client id="mainClient"
              serviceClass="com.batch.service.MainSoap"
              address="${url}" /> 
```

任何帮助或确定根本原因的方法将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T12:01:21.630

只需添加肥皂绑定。

```
<jaxws:endpoint id="mainClient" serviceClass="com.batch.service.MainSoap"
  address="${url}">

  <jaxws:binding>
    <soap:soapBinding version="1.2" mtomEnabled="true" />
  </jaxws:binding>
</jaxws:endpoint> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T09:10:04.960

在您的服务接口上添加此注释，我尝试了它为我工作

```
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE) 
```

生成类 DeliveryService：

```
 @WebService(targetNamespace = "http://...", name = "ServiceInterface")
 @SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)

 public interface ServiceInterface {
 @WebResult(name = "response", targetNamespace = "http:///", partName = "response") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-20T23:15:08.133

我只是在使用 CXF 框架时遇到了同样的问题。这是由于端点的错误配置：wsdlLocation 没有指向 wsdl 文件...有多种方法可以定义 wsdl 位置：它可以在端点初始化期间提供（端点构造函数采用可选的wsdlLocation 作为参数）或通过给 wsdl2java 任务一个“wsdlLocation”参数（如果您从 wsdls 生成类）。

指向错误的 wsdlLocation 可能是导致此异常的原因...

# backbone.js - 模块方法没有被 () 调用

> ID：15469736
> 
> 赞同：1
> 
> 时间：2013-03-18T04:24:24.953
> 
> 标签：backbone.js

由于某种原因，我无法在此视图中触发 addOne 方法。渲染方法触发得很好。集合是从另一个实例化它的模块传入的。当我将括号添加到方法调用时，它会触发，但下划线会引发错误。

```
define(['backbone',
'jquery',
'underscore',
'views/user',
'models/user',
],
function(Backbone,$,_,UserView,UserModel){

var  Users= Backbone.View.extend({
    tagName:'ul',
    className:'well',

    initialize:function() {
        _.bindAll(this);
    },

    render:function() {
        this.collection.each( this.addOne, this );
        return this;
    },

    addOne:function() {
        console.log('inside of addOne');
        var userView = new UserView({model:UserModel});
        this.$el.append(userView.render().el);
    }
});
return Users; 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:02:34.923

您的 UserView 是模型视图。这意味着您需要将模型的实例而不是模型模块的定义传递给它，这就是“UserModel”在您的情况下所持有的。

例子：

```
var um = new UserModel({name: 'foo', id: 1});
var uv = new UserView({model: um}); //um is an instance of the model 'UserModel' 
```

在您的情况下，由于模型对象来自对 this.collection 的迭代，它将是（如上面正确指出的那样`mu is too short`）：

```
addOne: function(m) {
    console.log('inside of addOne');
    var userView = new UserView({model: m});
    this.$el.append(userView.render().el);
} 
```

还要小心，`this.collection`当你调用 render() 时不要为空。

# asp.net - ASP.NET MVC - 编译器不更新 global.asax

> ID：15469742
> 
> 赞同：1
> 
> 时间：2013-03-18T04:25:58.620
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我试图对我的 global.asax.cs 文件进行一些更改，当我发现在发布我的 mvc 应用程序后，Visual Studio 甚至没有触及该文件。最后修改日期是从上周开始的，而今天我对其进行了很多更改。我如何强制视觉工作室实际做一些有用的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:43:40.510

确保 Global.asax 的“构建操作”设置为“内容”。打开 Visual Studio -> 右键单击​​ Global.asax -> 构建操作

# android - android 没有名为 pthread_condattr_setclock 的方法

> ID：15469743
> 
> 赞同：2
> 
> 时间：2013-03-18T04:26:07.047
> 
> 标签：android, android-ndk

```
Condition::Condition()
{
    #ifdef WIN32
    pthread_cond_init(&_condition, NULL);
    #else
    pthread_condattr_t attr;
    pthread_condattr_init(&attr);
    int r;
    if ((r = pthread_condattr_setclock(&attr, CLOCK_MONOTONIC))) {
        THROW("set clock failed %d", r);
    }
    pthread_cond_init(&_condition, &attr);
    pthread_condattr_destroy(&attr);
    #endif
} 
```

在ndkr8d中，没有pthread_condattr_setclock这个方法。</p>

默认情况下，此时钟 ID 为 CLOCK_REALTIME，但可以通过使用已调用 pthread_condattr_setclock() 的 pthread_condattr_t 初始化条件变量来更改（例如更改为 CLOCK_MONOTONIC）。从[什么时间函数我需要与 pthread_cond_timedwait 一起使用？](https://stackoverflow.com/questions/3006259/what-time-function-do-i-need-to-use-with-pthread-cond-timedwait/4238857#4238857)

我的问题：我不知道条件变量的默认值是 CLOCK_MONOTONIC 还是 Android 中的 CLOCK_REALTIME。如果 CLOCK_MONOTONIC，我不需要解决问题。

非常感谢。

# html - 在整个 html 文档的正文中获得一致的完整背景

> ID：15469746
> 
> 赞同：0
> 
> 时间：2013-03-18T04:26:39.173
> 
> 标签：html, css, background-image

我正在尝试在其正文中为我的页面提供完整的背景，但没有任何效果，而且我得到的输出是垃圾。

我已经尝试了我能想到的一切，但没有什么是正确的。你能告诉我我的错误在哪里吗？（.jpg 在正确的位置）

```
<html>
    <head>
        <style type="text/css">
            body {
                height: 100px;
                width: 100px;
                background-image:url(background.jpg) repeat fixed 100% 100%;
            }

            #container {
                width: 979px;
                height: 100%;
                margin: 0 auto;
                background-color: blue;
            }

        </style>
        <title> Baisbook </title>
    </head>

    <body>
        <div id="container">
            <p> Just saying Hi! </p>
        </div>
        <p>This is a Test</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:34:31.470

您的图像是否能够显示但无法填充所有想要的区域？如果是，请在您的身体区域尝试此示例代码，看看它是否有效。

```
body { 
  background: url(background.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:36:42.833

在背景图像中删除仅放置背景的图像，背景位置为中心顶部....

```
 body {
       height: 100px;
       width: 100px;
       background:url(background.jpg) no-repeat fixed center top;
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:46:03.993

使用下面的代码

```
 body {
background:url(your image path) repeat fixed 100% 100%;
background-attachment:fixed;
background-size:100%;
background:url(your image path) repeat fixed center center  \9;
/*IE 9*/
background:url(your image path) repeat fixed top 100% /IE9;
background-attachment:fixed /IE9;
background-size:100% /IE9; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T04:28:28.340

我认为您的图像不存在或图像路径不正确。

或试试这个

```
 background-image:url('background.jpg'); 
```

这个说法就够了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T06:04:14.397

如果您同意，您可以使用基本`css code`申请`background-image`

而不是这些

```
body {
       height: 100px;
       width: 100px;
       background-image:url(background.jpg) no-repeat fixed 100% 100%;
    } 
```

尝试这个

```
body {
           height: 100px;
           width: 100px;
           background-image:url(background.jpg);
           background-repeat:no-repeat;
           background-position:fixed;
           background-size:100%;

        } 
```

工作[演示](http://jsfiddle.net/jhunlio/QsDwS/)

# asp.net-mvc - 文件未保存

> ID：15469747
> 
> 赞同：0
> 
> 时间：2013-03-18T04:26:39.863
> 
> 标签：asp.net-mvc

在我的 MVC 应用程序中，我允许用户上传 PDF 文件，上传的文件保存在文件夹中。该文件已正确上传，但未保存在文件夹中...查看代码为：

```
<a class="upload" onclick="upload(this);">

function upload(box) {
       var box = dhtmlx.modalbox({
           title: "Upload File",
           text: "<div id='form_in_box'><div>Choose a PDF file to upload <hr/><label>Enter the URL <input type='file' name='file' id='file' style='width: 400px; height: 27px;'></label><br></div><div><span class='dhtmlx_button'><input type='submit' value='Upload File' style='width: 86px' onclick='save_file(this)'></span><span class='dhtmlx_button'><input type='button' value='Cancel' onclick='close_file(this)' style='width:80px;'></span></label></div></div>",
           width: "300px"
       });
   }

function save_file(box) {
       var filename = $("#filename").val();
       if (filename == "") {
           alert("Enter the URL");
           return false;
       }
       dhtmlx.modalbox.hide(box);
       dhtmlx.message("Uploading the file");
       $.post("/FileUpload/UploadURL",
       { filename: '' + filename + '' });
   } 
```

控制器代码为：

```
public ActionResult UploadURL(FormCollection data)
    {
        var filename=data["filename"];
      SaveNewFile(filename);
        return View();
    }
 public ActionResult SaveNewFile(string file)
    {

        var supportedType = new[] { "pdf" };
        var fileExt = System.IO.Path.GetExtension(file).Substring(1);
        var filename = Path.GetFileNameWithoutExtension(file) ?? "";

        if (file.Length > 0 && supportedType.Contains(fileExt))
        {

            string filePath = Path.Combine(HttpContext.Server.MapPath(_fileUploadPath),
                                           Path.GetFileName(file));
            if (!System.IO.File.Exists(filePath))
            {   

                filePath = Server.MapPath(_fileUploadPath + file);
                TempData["UploadValidationMessage_Success"] = "File upload Succeeded.";
                return View();
            }

            else
            {
                TempData["UploadValidationMessage_Failure"] = "File already exist.";
                return View();
            }
        }
        else
        {

            TempData["UploadValidationMessage_Failure"] = "Only PDF files are supported. Try again...";
            return View();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:31:15.400

你没有保存它。只需查看以下帖子了解如何保存文件：

[MVC 中的文件上传](https://stackoverflow.com/questions/1605766/file-upload-in-mvc)

完整教程：[http ://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:36:42.923

使用`HttpPostedFileBase uploadFile`参数接受上传文件并`SaveAs(filePath);`保存！

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult FileUpload(HttpPostedFileBase uploadFile)
{
    if (uploadFile.ContentLength > 0)
    {
        string filePath = Path.Combine(HttpContext.Server.MapPath("../Uploads"), 
                                       Path.GetFileName(uploadFile.FileName));
        uploadFile.SaveAs(filePath);
    }
    return View();
} 
```

还将您的 JQuery Post 更改为 Jquery Ajax 帖子

```
$('form').submit(function(event) {
                    event.preventDefault();
                    var file = $("#filename").val();
                    file = file.serialize();
                    $.ajax({  
                        type: "POST",
                        contentType:attr( "enctype", "multipart/form-data" ),
                        url: "/FileUpload/UploadURL",  
                        data: file,  
                        success: function( data )  
                        {  
                            alert( data );  
                        }  
                    });  

                    return false;  
                }  
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:06:15.107

首先，您需要告诉表单的 EncType。没有 encType 文件将不会发布到服务器

```
<form action="" method="post" enctype="multipart/form-data">
</form> 
```

用于剃须刀

```
@using (Html.BeginForm("Index", "yourCOntroller", FormMethod.POST, new { enctype = "multipart/form-data" }))
{
  // some stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T04:41:48.607

您**实际上在代码中的哪个位置保存文件**？？？尝试利用

> “HttpPostedFileBase”类。

[这是示例代码](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0)

# video - 上传的视频应该使用 FFMpeg 转换成什么格式？

> ID：15469752
> 
> 赞同：0
> 
> 时间：2013-03-18T04:26:57.237
> 
> 标签：video, ffmpeg, h.264, mp4, wmv

我想使用 FFMpeg 处理上传的短视频以存储在 linux 服务器上。

这些视频将使用 html5 版本的 Flowplayer 播放。我不在乎支持 FLV。

我也不关心转换是否会在视频中引入伪像，只要它们是可以理解的。我确实关心将文件大小保持在（合理的）最小值。

我应该使用 FFMpeg 将视频转换为什么格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:16:16.660

根据[http://flowplayer.org/docs/#video-formats](http://flowplayer.org/docs/#video-formats)：

> 获得可靠 HTML5 视频的最佳选择是为每个视频提供 MP4 和 WEBM 变体。

简而言之：如果您只需要选择一种格式，则支持更多浏览器的 mp4

# api - 用于获取评论回复的 Youtube API

> ID：15469761
> 
> 赞同：1
> 
> 时间：2013-03-18T04:27:32.357
> 
> 标签：api, youtube

有什么方法可以让我使用 api 回复对 youtube 视频的特定评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:04:45.063

当然。YouTube v2.0 API 官方文档概述了如何执行此操作。

在 XML 响应中，为响应另一个评论而发布的评论将包含一个回复链接，如以下标记所示：

`<link rel="http://gdata.youtube.com/schemas/2007#in-reply-to"type="application/atom+xml" href="https://gdata.youtube.com/feeds/api/videos/2cd.../comments/978..."/>`

完整的细节在这里：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_comments#Retrieve_comments](https://developers.google.com/youtube/2.0/developers_guide_protocol_comments#Retrieve_comments)

# css - 如何在 acefaces 数据表上应用 css 并最小化其宽度

> ID：15469764
> 
> 赞同：0
> 
> 时间：2013-03-18T04:27:55.900
> 
> 标签：css, jsf-2, icefaces-3

这是我的`acefaces datatable`

```
<ace:dataTable id="tbl" value="#{mainSearch.searchResult}" var="srvc" 
            paginator="true" paginatorPosition="bottom" rows="10" 
            emptyMessage="No Record Present Yet" rowsPerPageTemplate="10,25,50,100" 
            rowIndexVar="row" rowStyleClass="#{row mod 2 eq 0?'none':'skyBlue'}">

    <ace:column headerText="Category" sortBy="#{srvc.groupName}" 
            filterBy="#{srvc.groupName}" filterMatchMode="contains">
        <h:outputText value="#{srvc.groupName}"/>
    </ace:column>

    <ace:column  headerText="Service Number" sortBy="#{srvc.serviceNumber}" 
            filterBy="#{srvc.serviceNumber}"filterMatchMode="contains">                            
        <h:outputText value="#{srvc.serviceNumber}"/>                       
    </ace:column>

    <ace:column headerText="Shift" sortBy="#{srvc.shift}" 
            filterBy="#{srvc.shift}" filterMatchMode="contains">
        <h:outputText value="#{srvc.shift}"/>
    </ace:column>
</ace:dataTable> 
```

现在这个数据表显示在我的整个页面上。我可以修复它的高度，`<ace:datatable height=..`但我没有找到任何宽度属性。我还尝试**使用 CSS 设置它的宽度（在标题、数据表上使用样式属性）但它没有工作。**现在我被困在这里，无法找到如何最小化它的宽度。

**注意：**对我有用的唯一方法是缩小标题文本。例如，因为我的第一行标题是*Category*。现在如果我只用*CAT*替换它，那么整行就会缩小。这意味着首先我需要挤压文本（因为这是我的猜测）。无论如何，没有戳这个文本？如果没有，那么如何调整此文本的大小并缩短此数据表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:24:11.307

我尝试在[ICEfaces 展示](http://icefaces-showcase.icesoft.org/showcase.jsf?grp=aceMenu&exp=dataTableBean)`width`的 Firefox 中更改 CSS 属性，达到您想要的结果。请注意，当您将表格设置得太小并且数据不再适合表格时，可能会出现一些潜在问题，因此我的建议是在浏览器中检查生成的表格以获得正确的 CSS 固定装置。

关于 的文档[`<ace:dataTable>`](http://res.icesoft.org/docs/v3_latest/ace/tld/ace/dataTable.html)，分别有用于设置 CSS 样式类和内联样式的典型`styleClass`和`style`属性，因此以下将完成工作：

```
<ace:dataTable style="width:80%"> ... </ace:dataTable> 
```

或者

```
<ace:dataTable styleClass="my-width"> ... </ace:dataTable> 
```

使用 CSS 类：

```
.my-width {
    width:80%
} 
```

附带说明一下，当您准备好试用最新的 Primefaces[`<p:dataTable>`](http://www.primefaces.org/showcase/ui/datatableHome.jsf)时，您会发现[许多](http://www.primefaces.org/docs/vdl/3.5/primefaces-p/dataTable.html)用于设置正确 CSS 样式的属性。

# android - android得到错误的背景颜色

> ID：15469766
> 
> 赞同：1
> 
> 时间：2013-03-18T04:28:25.997
> 
> 标签：android, listview, background, actionbarsherlock

这是我的布局......在我的项目中，我使用带有 Theme.Sherlock.Light.DarkActionBar 的 abs（ActionBar Sherlock）。

在某些设备中，例如带有 4.0.4 的 Galaxy S3 (GT-I9300)，当我设置白色时，他正在返回另一种颜色。返回深灰色。(#797979) 我尝试设置@android:color/white、#ffffff、#ffffffff、创建属性颜色#ffffff，但什么也没有。

我在 ListView 适配器中使用此布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/lnlItem"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_toLeftOf="@+id/chatUserImage"
        android:background="#ffffff"
        android:minHeight="70dp"
        android:padding="5dp" >

        <TextView
            android:id="@+id/chatMessage"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:textColor="@android:color/black" />

        <TextView
            android:id="@+id/chatMessageDate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:textColor="@android:color/darker_gray"
            android:textSize="12sp" />
    </RelativeLayout>

    <ImageView
        android:id="@+id/chatUserImage"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentRight="true"
        android:background="#00000000"
        android:src="@android:drawable/ic_menu_gallery"
        tools:ignore="ContentDescription" />

</RelativeLayout> 
```

这是我的活动布局：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/chatFrame"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TextView
            android:id="@+id/chatHeader"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@android:color/black"
            android:gravity="center"
            android:padding="5dp"
            android:textColor="@android:color/white" >
        </TextView>

        <ListView
            android:id="@+id/chatListMessages"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/chatSendMessage"
            android:layout_below="@+id/chatHeader"
            android:layout_marginBottom="5dp"
            android:layout_marginTop="5dp"
            android:cacheColorHint="@android:color/transparent" >
        </ListView>

        <LinearLayout
            android:id="@+id/chatSendMessage"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:background="@drawable/chat_send_message"
            android:gravity="center_vertical"
            android:orientation="horizontal"
            android:padding="5dp" >

            <EditText
                android:id="@+id/chatEditSendMessage"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="top|left"
                android:inputType="textMultiLine"
                android:maxLines="3"
                android:minLines="1"
                android:scrollHorizontally="false" />

            <ImageButton
                android:id="@+id/btnSendMessage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@android:color/transparent"
                android:src="@android:drawable/btn_dialog"
                tools:ignore="ContentDescription" />
        </LinearLayout>

    </RelativeLayout> 
```

# android - 画布绘制图像和触摸事件？

> ID：15469767
> 
> 赞同：1
> 
> 时间：2013-03-18T04:28:28.323
> 
> 标签：android, cordova, jquery-mobile, canvas, touch

我正在尝试使用 phonegap 和 jquerymobile 编写一个应用程序。我的应用程序从图像数组中绘制 4 个图像，当我触摸 1 个图像时，调用 1 个页面以全屏显示图像，但它不像我想要的那样绘制，只有 2 个图像显示在另一个页面中，其他图像仍然不显示。请检查我的代码并告诉我我出了什么问题。感谢阅读。这是我的代码：

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>ListApp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="js/jquery-1.7.1.min.js"></script>
    <script src="js/jquery.mobile-1.1.1.min.js"></script>
    <script src="ui/jquery-ui.js"></script>
    <script src="cordova-2.5.0.js"></script>
    <style>
        img.fullscreen {
            max-height: 100%;
            max-width: 100%;
        }       
    </style>
</head>
<body>
<script type="text/javascript">

$(document).ready(function() {

    var drawCanvasImage = function (ctx,grid,row,x,y,w,h) {
        return function() {
//          window.alert('row:' + row);
            ctx.drawImage(grid[row], x, y,w,h);
        }
    }
    var sizedWindowWidth = ($(window).width() - 34);
    var sizedWindowHeight = ($(window).height() - 34);
    var r1=0;
    var r2=0;
    var mag = ["img/a1.png","img/a2.png","img/a3.png","img/a4.png","img/a5.png"];
    var grid = new Array();
    var sImg = new Array();

    $("#canvas1").width(sizedWindowWidth);
    $("#canvas1").height(sizedWindowWidth*3/10);
    $("#canvas2").width(sizedWindowWidth);
    $("#canvas2").height(sizedWindowWidth*1/10);
    $("#canvas3").width(sizedWindowWidth);
    $("#canvas3").height(sizedWindowWidth*3/10);
    $("#canvas4").width(sizedWindowWidth);
    $("#canvas4").height(sizedWindowWidth*1/10);
    $("#canvas5").width(sizedWindowWidth/2 - 10);
    $("#canvas5").height(sizedWindowWidth*1/10);
    $("#canvas6").width(sizedWindowWidth/2 - 10);
    $("#canvas6").height(sizedWindowWidth*1/10);
    $("#canvas7").width(sizedWindowWidth/2 - 10);
    $("#canvas7").height(sizedWindowWidth*1/10);
    $("#canvas8").width(sizedWindowWidth/2 - 10);
    $("#canvas8").height(sizedWindowWidth*1/10);

    var canvas1 = $("#canvas1").get(0);
    var canvas2 = $("#canvas2").get(0);
    var canvas3 = $("#canvas3").get(0);
    var canvas4 = $("#canvas4").get(0);

    if(canvas1 && canvas2 && canvas3 && canvas4)
    {
        var ctx1 = canvas1.getContext('2d');
        var ctx2 = canvas2.getContext('2d');
        var ctx3 = canvas3.getContext('2d');
        var ctx4 = canvas4.getContext('2d');

        if(ctx1 && ctx2 && ctx3 && ctx4)
        {
            ctx1.canvas.width  = sizedWindowWidth;
            ctx1.canvas.height = sizedWindowWidth*3/10;
            ctx2.canvas.width  = sizedWindowWidth;
            ctx2.canvas.height = sizedWindowWidth*1/10;
            ctx3.canvas.width  = sizedWindowWidth;
            ctx3.canvas.height = sizedWindowWidth*3/10;
            ctx4.canvas.width  = sizedWindowWidth;
            ctx4.canvas.height = sizedWindowWidth*1/10;

            $("#canvasDraw").click(function(){

                for(var r=0;r<2;r++) {

                        var x = 0;
                        var y = r*sizedWindowWidth/2;
                        var w = sizedWindowWidth/2 - 5;
                        var h = sizedWindowWidth*3/10;
                        sImg[r] = Math.floor((Math.random()*4)+0);;
                        grid[r] = new Image();
                        grid[r].onload = drawCanvasImage(ctx1,grid,r,y,x,w,h);
                        ctx2.fillStyle = "#00ff00";
                        ctx2.fillRect(y, x, w, h/3);
                        ctx4.fillStyle = "#00ff00";
                        ctx4.fillRect(y, x, w, h/3);
                        grid[r].src = mag[sImg[r]];

                }
                for(var d=0;d<2;d++) {

                    var x = 0;
                    var y = d*sizedWindowWidth/2;
                    var w = sizedWindowWidth/2 - 5;
                    var h = sizedWindowWidth*3/10;
                    sImg[d+2] = Math.floor((Math.random()*4)+0);;

                    grid[d] = new Image();
                    grid[d].onload = drawCanvasImage(ctx3,grid,d,y,x,w,h);
                    grid[d].src = mag[sImg[d+2]];
                }

                for (var j=0;j<mag.length;j++) {
                    if(sImg[0] == j){
                        $('#img1').attr("src",mag[j]);
                    }

                    if(sImg[1] == j){
                        $('#img2').attr("src",mag[j]);
                    }

                    if(sImg[2] == j){
                        $('#img3').attr("src",mag[j]);
                    }

                    if(sImg[3] == j){
                        $('#img4').attr("src",mag[j]);
                    }
                }

            });
            document.getElementById("mycanvas").addEventListener("touchstart", touchHandler, false);
            document.getElementById("mycanvas").addEventListener("touchmove", touchHandler, false);
            document.getElementById("mycanvas").addEventListener("touchend", touchHandler, false);
            var x;
            var y;

            function touchHandler(e) {
              if (e.type == "touchstart") {
                  console.log("touch start! x: " + x + "y: " + y);
                  e.preventDefault();
                  x = event.touches[0].pageX;
                  y = event.touches[0].pageY;
                  if (x>10 && x<150 && y>10 && y<140) {
                      $('#anh1').show();
                  }
                  if (x>166 && x<298 && y>10 && y<140) {
                      $('#anh2').show();
                  }
                  if (x>16 && x<150 && y<190 && y>265) {
                      $('#anh3').show();
                  }
                  if (x>166 && x<298 && y<190 && y>265) {
                      $('#anh4').show();
                  }

              } else if (e.type == "touchmove") {
                  console.log("touch move!");
                  e.preventDefault();
              } else if (e.type == "touchend" || e.type == "touchcancel") {
                  console.log("touch end!");
                  e.preventDefault();
              }
            }
        }
    }

    $('#showimg1').click(function(){
        $('#anh1').hide();
        $('#mainpage').show();
    });
    $('#showimg2').click(function(){
        $('#anh2').hide();
        $('#mainpage').show();
    });
    $('#showimg3').click(function(){
        $('#anh3').hide();
        $('#mainpage').show();
    });
    $('#showimg4').click(function(){
        $('#anh4').hide();
        $('#mainpage').show();
    });
});
</script>

<div data-role="page" id="mainpage">
<div data-role="header">
    <h1>Ghep Tranh Tu</h1>
</div>
<div data-role="content" id="mycanvas" style="border:1px solid #d3d3d3;">
    <canvas id="canvas1" style="border:1px solid #d3d3d3;margin:0;"></canvas>
    <canvas id="canvas2" style="border:1px solid #d3d3d3;margin:0;"></canvas>
    <canvas id="canvas3" style="border:1px solid #d3d3d3;margin:0;"></canvas>
    <canvas id="canvas4" style="border:1px solid #d3d3d3;margin:0;"></canvas>
</div>    
    <ul id="wordstore" style="text-align:center;border:1px solid #d3d3d3;">
        <ul style="text-align:center;border:1px solid #d3d3d3;">
            <li style="display:inline;border:1px solid #d3d3d3;"><canvas id="canvas5"></canvas></li>
            <li style="display:inline;border:1px solid #d3d3d3;"><canvas id="canvas6"></canvas></li>
            <li style="display:inline;border:1px solid #d3d3d3;"><canvas id="canvas7"></canvas></li>
            <li style="display:inline;border:1px solid #d3d3d3;"><canvas id="canvas8"></canvas></li>
        </ul>   
        <ul style="text-align:right;border:1px solid #d3d3d3;">
            <li style="display:inline;border:1px solid #d3d3d3;"><input id="canvasDraw" type="button" value="New Game"/></li>
        </ul>
    </ul>
</div>

<div data-role="page" id="anh1">
<header data-role="header">
    <a id="showimg1" href="#" data-icon="grid" data-iconpos="notext">Photos</a>
</header>
<img id="img1" src="img/a14.jpg" style="width:100%;height:100%;"/>
</div><!-- Page Dog -->

<div data-role="page" id="anh2">
<header data-role="header">
    <a id="showimg2" href="#" data-icon="grid" data-iconpos="notext">Photos</a>
</header>
<img id="img2" src="img/a14.jpg" style="width:100%;height:100%;"/>
</div><!-- Page Gummy Bears --> 

<div data-role="page" id="anh3">
<header data-role="header">
<a id="showimg3" href="#" data-icon="grid" data-iconpos="notext">Photos</a>
</header>
<img id="img3" src="img/a14.jpg" style="width:100%;height:100%;"/>
</div><!-- Page Gummy Bears --> 

<div data-role="page" id="anh4">
<header data-role="header">
<a id="showimg4" href="#" data-icon="grid" data-iconpos="notext">Photos</a>
</header>
<img id="img4" src="img/a14.jpg" style="width:100%;height:100%;"/>
</div><!-- Page Gummy Bears --> 

</body>
</html> 
```

我修好了它！:D 我在“y<190 && y>265”处失败 感谢您的阅读。

# android - Phonegap 加载缓存的外部站点

> ID：15469770
> 
> 赞同：2
> 
> 时间：2013-03-18T04:29:06.183
> 
> 标签：android, cordova, webview

我创建了一个加载外部 URL 的示例 phonegap 应用程序。html 页面使用缓存清单，我也在其中缓存主页。

我第一次可以在 android 浏览器和 phonegap 应用程序中成功打开页面。此时所有文件都应该被缓存。它正在被缓存。

所以，现在我关闭服务器并再次加载页面。在 android 浏览器中，我可以看到页面及其资源。但是在 webview 的情况下不会发生同样的情况。我收到一个错误，无法打开网址。

我正在使用以下代码片段。我在三星 Galaxy 选项卡、Android OS 3.0 中对其进行了测试。我究竟做错了什么？

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.loadUrl("http://(192.168.14.46):8080/CacheTest/index.html");

    this.appView.getSettings().setDomStorageEnabled(true);
    this.appView.getSettings().setAppCacheMaxSize(1024 * 1024 * 15);  

 this.appView.getSettings().setAppCacheEnabled(true); 

    String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();
    this.appView.getSettings().setAppCachePath(appCachePath);
    this.appView.getSettings().setAllowFileAccess(true);
    //this.appView.getSettings().setAppCacheEnabled(true);      

} 
```

# java - 安卓数据库的安全密钥

> ID：15469771
> 
> 赞同：3
> 
> 时间：2013-03-18T04:29:07.543
> 
> 标签：java, android, encryption, cryptography

是否有任何算法可以在 android 中生成加密密钥来保护数据库？

我试过这个 PBE 算法：

```
PBEKeySpec pbeKeySpec = new PBEKeySpec(password.toCharArray(), salt, 
    NUM_OF_ITERATIONS, KEY_SIZE);
SecretKeyFactory factoryKey = SecretKeyFactory.getInstance(PBE_ALGORITHM);
SecretKey tempKey = factoryKey.generateSecret(pbeKeySpec);
SecretKey secretKey = new SecretKeySpec(tempKey.getEncoded(), "AES"); 
```

但它每次都会生成相同的密钥。还有其他用于生成安全密钥的好算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:34:17.867

要生成随机密钥，请使用[KeyGenerator](http://developer.android.com/reference/javax/crypto/KeyGenerator.html)类，代码如下：

```
KeyGenerator kgen = KeyGenerator.getInstance("AES");
kgen.init(KEY_SIZE);
SecretKey skey = kgen.generateKey(); 
```

请注意，如果您希望稍后解密数据库，显然必须将此密钥安全地存储在某处，因此可能值得追求您的问题中提出的基于 PBE 的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:18:31.433

通常为了实现您想要的，您使用 PBE 密钥来加密/解密随机密钥（您必须存储，尽可能将其与您的数据分开），您可以使用它来加密/解密您的数据。那么，如果没有加密密钥，您的数据密文本身就与您的密码没有直接关系。

# php - 将多维 PHP 数组中父节点的值串在一起

> ID：15469776
> 
> 赞同：3
> 
> 时间：2013-03-18T04:29:29.503
> 
> 标签：php, arrays, multidimensional-array

我有一张工作场所及其父 ID 的表格。每个父级可以有任意数量的级别。

```
id    workplace              parent
1     WCHN                   0
2     Acute Services         1
3     Paediatric Medicine    2
4     Surgical Services      2
5     Nursing and Midwifery  1
6     Casual Pool            5
7     Clinical Practice      5 
```

我需要创建一个单独的选择输入，列出工作场所及其所有父工作场所，有点像这样：

```
<select>
    <option>WCHN > Acute Services > Paediatric Medicine</option>
    <option>WCHN > Acute Services > Surgical Services</option>
    <option>WCHN > Nursing and Midwifery > Casual Pool</option>
    <option>WCHN > Nursing and Midwifery > Clinical Practice</option>
</select> 
```

通过修改[这个解决方案](https://stackoverflow.com/a/7874978/144194)，我已经能够将我的平面列表变成一个多维数组并输出成对的值，但没有完整的路径。

```
<?php
public function list_all_workplaces()
{
    $temp = $result = array();
    $list = array();

    // Get the data from the DB
    $table = mysql_query("SELECT * FROM workplaces");

    // Put it into one dimensional array with the row id as the index
    while ($row = mysql_fetch_assoc($table)) {
      $temp[$row['workplace_id']] = $row;
    }

    // Loop the 1D array and create the multi-dimensional array
    for ($i = 1; isset($temp[$i]); $i++)
    {
        if ($temp[$i]['parent'] > 0)
        {
            $tmpstring = ($temp[$i]['workplace']); // workplace title

            // This row has a parent
            if (isset($temp[$temp[$i]['parent']])) {

                $list[$i] = $temp[$temp[$i]['parent']]['workplace']." > ".$tmpstring; 
                //example output: Acute Services > Paediatric Medicine

                // The parent row exists, add this row to the 'children' key of the parent
                $temp[$temp[$i]['parent']]['children'][] =& $temp[$i];

            } else {
                // The parent row doesn't exist - handle that case here
                // For the purposes of this example, we'll treat it as a root node
                $result[] =& $temp[$i];
            }
        } else {
            // This row is a root node
            $result[] =& $temp[$i];
        }

    }
    // unset the 1D array
    unset($temp);

    //Here is the result
    print_r($result);
} 
```

示例 print_r() 输出：

```
[1] => WCHN > Acute Services
[2] => Acute Services > Paediatric Medicine 
```

我从这里到哪里去让所有父工作场所进入选择选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:49:58.567

如果没有返回值，我什至不明白你如何使用你的函数。

如果您的数组构建正确，并且按照您想要的方式构建，并且您询问将结果放入 html 选择字段，那么这就是简单的部分。

让我们快速回到您的功能。您的函数中没有列出 return $result ，因此在调用时它不会返回任何内容。

您需要将其添加到函数的末尾以开始。

然后，您将遍历数组以开始您的 html 处理。

```
$data = list_all_workplaces()
foreach( $data as $key => $value )
{
    $options = "<option value='{$key}'>{$value}</option>";
}
echo "<select>{$options}</select>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:52:28.677

我看不到您的代码将如何产生`print_r`您所说的输出，因为您从未使用过您创建的字符串。但是这些方面的东西应该会让你上路——它会生成你需要的字符串。

用以下内容替换`for`循环：

```
foreach ($temp as $i => $details)
{
    $parentID = $details['parent'];
    $tmpstring = ($details['workplace']);
    if ($parentID > 0 && isset($temp[$parentID]))
    {
        $temp[$parentID]['children'][] =& $temp[$i];
        while ($parentID > 0 && isset($temp[$parentID]))
        {
            $tmpstring = $temp[$parentID]['workplace']." > ".$tmpstring;
            $parentID = $temp[$parentID]['parent'];
        }
    }
    $result[] = $tmpstring;
} 
```

正如@Syx 所说，您可能也需要从您的函数中返回一些东西`$result`，然后使用它来生成您的`<select>`.

# scala - 读取相同的文件但得到不同的字节

> ID：15469782
> 
> 赞同：0
> 
> 时间：2013-03-18T04:29:53.003
> 
> 标签：scala, hash

在 foldleft 中，我试图消化不同的图像。我很沮丧，决定读取同一个文件，但我收到了不同的字节数组来读取同一个文件！有谁知道为什么会这样？这是发生的代码，“swap.png”在运行期间永远不会改变

```
 val capturedImage = outputScreen.capture
  val swap = new File("swap1.png")
  ImageIO.write(capturedImage, "png", swap)
  val bis = new BufferedInputStream(new FileInputStream("swap.png"))
  val byte = Stream.continually(bis.read).takeWhile(-1 !=).map(_.toByte).toArray
  println(byte.toString) 
```

这是一些输出

```
[B@31302ed5
[B@3a56d071
[B@6039d718
[B@3490e5eb
[B@2f29608e
[B@4c09c5c3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T04:35:10.320

你得到的是字节数组的 toString 表示（因为`[B`），它默认为[Object.toString()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)。Object.toString 有什么作用？通常，它只打印有关对象在内存中位置的内部信息（所谓的[身份哈希](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29)）*。因此，在不同的运行中在不同的 RAM 内存位置有不同的对象，从而产生不同的输出是完全可以的。`.mkString(",")`尝试而不是在最后一行执行此问题：

```
println(byte.mkString(",")) 
```

* 但可能有不同的实现

# javascript - Javascript JQuery 渐变显示图像

> ID：15469785
> 
> 赞同：0
> 
> 时间：2013-03-18T04:30:29.650
> 
> 标签：javascript, jquery

我有一个闰年功能，我希望它慢慢地揭示一个答案，然后在一段时间后慢慢消失。这是我的代码。

```
function isLeaper() {
            var image1 = '../images/yes.png';
            var image2 = '../images/no.png';
            var year = document.getElementById("isLeaper").value;
            var arr = year.split('/');
            var splitYear = arr[arr.length - 1];
            // 1\. If the year is divisible by 4, but not 100.
            if ((parseInt(splitYear) % 4) == 0) {
                if (parseInt(splitYear) % 100 == 0) {
                    if (parseInt(splitYear) % 400 != 0) {
                        $('#myDiv').html(year + 'is not a leap year. Sorry!').fadeIn('normal', function() {
                            $(this).fadeOut();
                        });
                        // alert(year + 'is not a leap year. Sorry!');
                        return "false";
                    }
                    if (parseInt(splitYear) % 400 == 0) {
                        $('#myDiv').html(year + 'is a leap year. Hooray!').fadeIn('normal', function() {
                            $(this).fadeOut();
                        });

                        //alert(splitYear + ' is a leap year. Hooray! ');
                        return "true";
                    }
                }
                if (parseInt(splitYear) % 100 != 0) {
                    $('#myDiv').html(year + 'is a leap year. Hooray!').fadeIn('normal', function() {
                        $(this).fadeOut();
                    });

                    //alert(splitYear + ' is a leap year. Hooray! ');
                    return "true";
                }
            }
            if ((parseInt(splitYear) % 4) != 0) {
                $('#myDiv').html(year + 'is not a leap year. Sorry!').fadeIn('normal', function() {
                            $(this).fadeOut();
                        });

                //alert(splitYear + ' is not a leap year. Sorry! ');
                return "false";
            }
        }

        if ((parseInt(year) % 4) != 0) {
            alert(year + ' is not a leap year. Sorry!');
            return "false";
        } 
```

我已经在 html 部分声明了一个 div，但什么也没发生。它设置为显示答案，我还想修改 yes 答案以显示图像 yes.png 和 no 答案以显示 no.png 图像。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:35:34.030

因为`fadeIn`你`div`必须`hidden`

添加**CSS**

```
#myDiv
{
    display:none;
} 
```

然后尝试。

另请阅读`fadeIn` [http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:25:27.150

我做类似的事情：

```
$('#myDiv').html(year + 'is a leap year. Hooray!').fadeIn(500).delay(1000).fadeOut(500); 
```

@Rohan 也提到了一个好点。应该看到 div 以显示：隐藏在 css 中。

# asp.net - 组合框中的多个数据源？

> ID：15469787
> 
> 赞同：0
> 
> 时间：2013-03-18T04:30:45.950
> 
> 标签：asp.net, sql, database, linq, ado.net

我现在正在使用 DevExpress。现在我想添加组合框，每个项目都是一个数据源。示例：我在组合框中有 2 个项目。

如果我选择带有查询字符串的项目 1 是“从我的 table1 中选择 *”并在 Gridview 中绑定

如果我选择带有查询字符串的第 2 项是“从我的 table2 中选择 *”并在 Gridview 中绑定

任何人都可以帮助我，我真的需要在我的项目中。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:01:17.823

首先想到的是创建一个列表，将它们添加到列表中，然后将该列表绑定到组合框。

```
List<string> Mylist = new List<string>();
string item1 = //returned value from query
 Mylist.add(item1);

string item2 = //returned value from query
 Mylist.add(item2);

 MycomboBox.DataSource = MyList;
 MyComboBox.DataBind(); 
```

根据我阅读的内容，我假设您的意思是这样的。如果不是，请澄清问题。

# data-structures - 为什么 hashmap 查找是 O(1) 即常数时间？

> ID：15469795
> 
> 赞同：50
> 
> 时间：2013-03-18T04:31:29.193
> 
> 标签：data-structures, hash, hashmap, hashtable, big-o

如果我们从 Java 的角度来看，那么我们可以说 hashmap 查找需要恒定的时间。但是内部实现呢？它仍然必须通过特定的桶（匹配哪个键的哈希码）来搜索不同的匹配键。那为什么我们说哈希图查找需要恒定的时间呢？请解释。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-18T04:37:03.087

在对所使用的散列函数的适当假设下，我们可以说散列表查找花费*预期*的 O(1) 时间（假设您使用的是标准散列方案，如线性探测或链式散列）。这意味着*平均而言*，哈希表执行查找的工作量最多是某个常数。

直观地说，如果你有一个“好的”散列函数，你会期望元素在整个散列表中或多或少均匀分布，这意味着每个桶中的元素数量将接近于元素数量除以数量桶。如果哈希表实现将这个数字保持在较低水平（例如，每次元素与存储桶的比率超过某个常数时添加更多存储桶），那么预期完成的工作量最终会成为选择哪个存储桶的一些基线工作量应该被扫描，然后做“不要太多”的工作来查看那里的元素，因为预期该桶中只会有恒定数量的元素。

这并不意味着哈希表*保证*了O(1) 的行为。事实上，在最坏的情况下，散列方案会退化，所有元素最终都会放在一个桶中，在最坏的情况下，查找需要花费时间 Θ(n)。这就是为什么设计好的散列函数很重要。

有关更多信息，您可能需要阅读算法教科书以了解哈希表为何如此有效地支持查找的正式推导。这通常包含在典型的大学算法和数据结构课程中，并且在线上有很多很好的资源。

有趣的事实：在某些类型的哈希表（cuckoo 哈希表、动态完美哈希表）中，元素的*最坏情况*查找时间是 O(1)。这些哈希表通过保证每个元素只能位于几个固定位置之一来工作，插入有时会在元素周围争先恐后地试图使一切都合适。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-18T04:37:14.497

关键在于文档中的此语句：

> 如果要在一个 HashMap 实例中存储许多映射，则创建具有足够大容量的映射将比让它根据需要执行自动重新散列以增加表来更有效地存储映射。

和

> 负载因子是哈希表在其容量自动增加之前允许达到的程度的度量。当哈希表中的条目数超过负载因子和当前容量的乘积时，对哈希表进行重新哈希（即重建内部数据结构），使哈希表的桶数大约增加一倍。

[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

如果超过*负载因子*，内部存储桶结构实际上将被重建，从而允许*get*和*put的**摊销成本*为O(1)。

 ***请注意，如果重建内部结构，则会引入可能为 O(N) 的性能损失，因此在摊销成本*再次接近 O(1)之前可能需要进行相当多的*get*和*put 。*出于这个原因，适当地规划初始容量和负载系数，这样您既不会浪费空间，也不会触发可避免的内部结构重建。

 ** * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-07-14T19:39:30.843

哈希表不是 O(1)。

通过鸽巢原理，您无法比 O(log(n)) 更好地进行查找，因为您需要每个项目的 log(n) 位来唯一标识 n 个项目。

哈希表*似乎*是 O(1)，因为它们有一个小的常数因子，加上它们在 O(log(n)) 中的“n”被增加到这样的程度，对于许多实际应用，它与实际的数量无关您正在使用的物品。然而，大 O 表示法并不关心这个事实，而且它是（公认的，荒谬的普遍）滥用该表示法来调用哈希表 O(1)。

因为虽然您可以在哈希表中存储一百万或十亿个项目，并且仍然获得与单个项目哈希表相同的查找时间......如果您正在获取大约非十亿或 googleplex 项目，您将失去该能力。您永远不会真正使用 nonillion 或 googleplex 项目的事实对于大 O 表示法并不重要。

实际上，哈希表性能可能是比数组查找性能更差的常数因素。是的，这也是 O(log(n))，因为你不能做得更好。

基本上，现实世界的计算机使每个数组查找大小小于其芯片位大小的数组与其最大的理论上可用的数组一样糟糕，并且由于 hastables 是在数组上执行的巧妙技巧，这就是为什么你*似乎*得到 O(1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-16T20:54:19.030

还要跟进 templatetypedef 的评论：

哈希表的恒定时间实现可以是哈希图，您可以使用它实现一个布尔数组列表，该列表指示特定元素是否存在于存储桶中。然而，如果你正在为你的 hashmap 实现一个链表，最坏的情况是需要你遍历每个存储桶并且必须遍历列表的末端。***

# ruby-on-rails - 无法通过 Paperclip 将存储在 S3 上的文件添加为 ActionMailer 中的附件

> ID：15469796
> 
> 赞同：9
> 
> 时间：2013-03-18T04:31:29.000
> 
> 标签：ruby-on-rails, paperclip, actionmailer

我在 Rails 3 应用程序中使用 Paperclip 和 S3 进行文件上传和存储。文件的上传运行良好，但是在尝试使用 actionmailer 将上传的文件附加到电子邮件时，我遇到了问题。经过大量故障排除后，希望有人可以提供提示。

从高层次来看，似乎我可能需要先下载文件，在附加之前使用某种下载方法，这里建议但我不太了解如何实现 -[回形针 + ActionMailer - 添加附件？](https://stackoverflow.com/questions/4356936/paperclip-actionmailer-adding-an-attachment)

在应用程序中，用户上传文件（在本例中为测验）后，应通过电子邮件通知管理员用户上传的文件。我一直遇到“没有这样的文件或目录”。下面是我现在正在使用的代码。任何想法或建议将不胜感激！

```
Quiz.rb model - what users are uploading:

class Quiz < ActiveRecord::Base
attr_accessible :quiz_path, :user_id, :tutorial_id

validates_presence_of :quiz_path
validates_attachment_size :quiz_path, :less_than => 50.kilobytes    
validates_attachment_presence :quiz_path 
validates_attachment_content_type :quiz_path, 
  :content_type => ["application/pdf","application/vnd.ms-excel",     
  "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],
  :message => 'We only accept Microsoft Excel files ending in .xlsx or .xls'

belongs_to :user
belongs_to :tutorial
has_attached_file :quiz_path,
:storage => :s3,
:s3_permissions => :private,
:path => "quizzes/:attachment/:style/:id.:extension",
:storage => :s3,
:s3_credentials => {
  :access_key_id => ENV["AWS_ACCESS_KEY_ID"],
  :bucket => ENV["S3_BUCKET_NAME"],
  :secret_access_key => ENV["AWS_SECRET_ACCESS_KEY"]
}

end 
```

AdminMailer 类：

```
 class AdminMailer < ActionMailer::Base

  default from: "info@mydomain.com"

  def admin_upload_notification_email(quiz, current_user)
  @url  = "http://mydomain.com"
  @quiz = quiz
  @user = current_user
  mail(to: "me@mydomain.com", :subject => "New Upload From #{@user.email}")
  attachments["#{quiz.quiz_path_file_name}"] = File.read("{quiz.quiz_path.expiring_url(60)}")
  end
 end 
```

还添加了 QuizzesController：

```
def create
 @user = current_user
 @quiz = @user.quizzes.create(params[:quiz])

 respond_to do |format|
  if @quiz.save
    UserMailer.upload_notification_email(@user).deliver
    AdminMailer.admin_upload_notification_email(@quiz, @user).deliver

    format.html { redirect_to @user, notice: 'Your skill assessment answer file was successfully uploaded.  We will review your responses and email you a link to your results as soon as possible.' }
    format.json { render json: @user, status: :created, location: @quiz }
  elsif @quiz.errors.any?
    flash[:error] = 'Please make sure you selected your answer file and it ended in ".xlsx".'
    return(redirect_to :back)
  else  
    format.html { redirect_to @user, notice: 'No file was selected.  Please back and choose "Select Your Answer File" before submitting.' }
    format.json { render json: @quiz.errors, status: :unprocessable_entity }
  end
 end
end 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T05:24:36.073

在搞砸了一些之后，能够让它工作。以下是对我有用的方法-希望对某人有所帮助。关键是使用 open uri，因为测验文件位于 S3 上。

```
class AdminMailer < ActionMailer::Base

require 'open-uri'

default from: "sales@mydomain.com"

def admin_upload_notification_email(quiz, current_user)
  @url  = "http://mydomain.com"
  @quiz = quiz
  @user = current_user
  attachments["#{quiz.quiz_path_file_name}"] = open("#{quiz.quiz_path.expiring_url(60)}").read

  mail(to: "admin@mydomain.com", :subject => "New Upload From #{@user.email}")
end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T23:44:44.713

就我而言，问题`content_type: "text/html"`出在`mail()`调用中。删除它为我解决了 Rails 4 上的问题。

```
require 'open-uri' # Allows us to read the S3 content into the mail attachment.

class InvoiceMailer < ActionMailer::Base
  def send_invoice(user, invoice)
    @user = user
    @invoice = invoice
    attachments["invoice.pdf"] = open(@invoice.s3_url).read
    mail(to: @user.email, subject: "This Month's Invoice")
  end
end 
```

* * *

这会在 Outlook 和 Gmail 上正确呈现 PDF 文档附件，但应该可以在任何地方使用。

# python - 是否可以在 Xcode 或等效程序中创建基于 Python 的应用程序？

> ID：15469799
> 
> 赞同：3
> 
> 时间：2013-03-18T04:31:42.940
> 
> 标签：python, xcode, interface

所以我有很多我为我的工作编写的 Python 脚本，但我的实验室里没有人知道如何使用 Python，所以我希望能够生成一个简单的 Mac 应用程序，您可以在其中“浏览”计算机上的文件并输入您要保存的文件的名称。. . 其他一切都将由我生成的 python 脚本的应用程序处理。

有谁知道这是否可能？我观看了一些关于人们在 Xcode 中使用 Objective C 生成应用程序的教程，但我不想学习一门新语言来重构我的 Python 脚本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:37:17.967

如果你只希望它在 OS X 上运行，你可以使用[pyobjc](http://pythonhosted.org/pyobjc/)（参见[https://stackoverflow.com/a/2393530](https://stackoverflow.com/a/2393530)）来开发一个 Cocoa 应用程序，但也有不少Python 的[跨平台 GUI 框架](http://wiki.python.org/moin/GuiProgramming)，这将适用于 OS X 以及其他操作系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:56:01.503

对我来说，最简单的方法是使用 OSX 附带的 Automator 程序。创建一个新应用程序，然后从 Utilities 子类别中选择 Run Shell Script。结果窗口顶部的弹出窗口有一个 /usr/bin/python 选项。把你的蟒蛇放在那里。您可以使用 Ask for Text 项等将输入和输出连接到该脚本...

**如果从运行 Shell 脚本**模块右侧的 Pass 输入：弹出窗口中选择“**作为参数”，则最容易获得来自 Ask for Text 的输入。**它们以字符串列表的形式出现，但不会像在正常行中那样以空格分隔。

 **试试这段代码，我想它会变得清晰（对于这个测试，将几个用空格分隔的字符串作为你传递的文本值）：

```
import sys

print sys.argv
items = sys.argv[1:][0].split()

for f in items:
    print f 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:52:42.973

打开自动机

选择“应用”

将“运行 Shell 脚本”拖到工作流面板上

选择“/usr/bin/python”作为外壳。粘贴到您的脚本中，然后选择 Pass Input: "to stdin"

或者，选择 bash 作为 shell，然后简单地让自动机脚本运行您的 Python 脚本，并在右上角选择“作为参数”传递输入。然后，您将使用 $@ 的内容作为参数。

保存应用程序。

完毕。您有一个可以将文件拖到其上的 .app。**

# c++ - C++：newton raphson 和重载函数

> ID：15469800
> 
> 赞同：2
> 
> 时间：2013-03-18T04:31:43.967
> 
> 标签：c++, function, iteration, newtons-method

我写了一个牛顿拉夫森求根算法的简单实现，它以初始猜测`init`、一元函数`f`和容差`tol`作为参数，如下所示：

```
bool newton_raphson(double& init,
                    double(*f)(double),
                    double tol){
    const int max_iter = 10000;
    double next_x, soln = init;
    int i = 0;

    while(++i < max_iter){
        next_x = soln - f(soln)/fp_x(f, soln);
        if(fabs(next_x - soln) < tol){
            init = next_x;
            return true;
        }
        soln = next_x;
    }
    return false;
}

double fp_x(double(*f)(double),
            double x){
    const double h = 0.000001;
    return (f(x + h) - f(x - h))/2.0/h;
} 
```

我的问题是：虽然这对于一元函数非常有效，但我想更改实现，使其适用于`f`具有多个参数的函数，但除一个参数之外的所有函数都具有常量值。澄清一下：如果我有一个函数 f(x) = 3x + 2 如下所示

```
double f(double x){
    return (3*x + 2);
} 
```

然后我的实现工作。但是，我也希望它适用于具有任何给定数量参数的任何函数，但只有第一个参数是可变的。所以，如果我有一个函数 f(x,y) = 3x + 2y

```
double f(double x, double y){
    return (3*x + 2*y);
} 
```

我想使用相同的函数找到 f(x,2) 或 f(x,3) 的根，等等 n 个参数，而不仅仅是一个或两个（请忽略我在该示例是简单的线性函数，这只是一个示例）。有什么方法可以为不同数量的参数实现函数，还是我必须为每种情况编写一个实现？

谢谢，

纳克斯

**笔记**

正如您现在所知道的那样，这个问题实际上并不是关于 newton-raphson，但是如果我将它用作实际问题的示例，它会变得更容易，这是针对不同数量参数的函数的单一实现。

**更新**

下面的一些答案使用`std::bind`和`std::function`解决问题，实际上比选择的答案更好地解决了我的问题；但是，它们是 c++11 库类/函数（请不要误会，这是我强烈敦促每个 c++ 程序员继续学习的东西），在撰写本文时，我正面临一些问题使用它们; 使用 g++ 4.7（符合 c++11）的 Eclipse Juno 仍然无法识别`std::function`，因此我决定继续使用下面的检查答案，这也很好用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:49:11.123

我认为您要的是可变参数函数：

> 可变参数函数 - 使用以省略号 (...) 结尾的参数列表声明的函数 - 可以接受不同数量的不同类型的参数。可变参数函数很灵活，但它们也很危险。编译器无法验证对可变参数函数的给定调用是否传递了适当数量的参数，或者这些参数是否具有适当的类型。因此，对传递不适当参数的可变参数函数的运行时调用会产生未定义的行为。这种未定义的行为可以被利用来运行任意代码。从这里：

[https://www.securecoding.cert.org/confluence/display/cplusplus/DCL31-CPP.+Do+not+define+variadic+functions](https://www.securecoding.cert.org/confluence/display/cplusplus/DCL31-CPP.+Do+not+define+variadic+functions)

但是，如上所述，它们存在许多问题。

最值得注意的是，它仅适用于**编译时！**

但是，如果您有兴趣实现一个，这里有一篇带有很好示例的文章：

[http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=138](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=138)

更新：

IMO，我认为您最好定义采用结构或对象参数的函数（即通用函数对象），并编写显式处理这些参数的*函数*。

另一种选择是做一些编译时[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)——这会很有用，但在这样的例子中做起来太麻烦了。另外，C++ 中的“反射”不是“真正的”反射，而是一种糟糕且不**完整**的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T04:50:03.400

对于您在这里尝试做的事情，您正在寻找的是`std::bind`（或者，如果您正在处理 C++03 编译器，`std::bind1st`并且`std::bnd2nd`）。

这些将让您将值“绑定”到其他参数，从而为您留下一个只需要一个参数的函数（技术上，一个函数对象）。

理想情况下，您希望是这样的：

```
double f(double x, double y) { 
     return 3*x + 2*y;
}

double init = 1.0;

newton_raphson(init, std::bind2nd(f, 3), 1e-4); 
```

不幸的是，在实际使用中，它并不是那么简单——使用`std::bind2nd`，你不能使用实际的函数；您需要改用函数对象，并且它必须从`std::binary_function`.

`std::bind`更加灵活，因此您几乎可以肯定要使用它（如果可能的话）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:02:15.143

您可以使用`std::bind`和`std::function`。该类型`std::function<double(double)>`表示一个接受双精度并返回双精度的函数。类似地`std::function<double(int,int)>`，对于采用 2 个整数并返回双精度的函数。

```
#include <functional>

bool newton_raphson(double& init,
                    std::function<double(double)>& f,
                    double tol){
    const int max_iter = 10000;
    double next_x, soln = init;
    int i = 0;

    while(++i < max_iter){
        next_x = soln - f(soln)/fp_x(f, soln);
        if(fabs(next_x - soln) < tol){
            init = next_x;
            return true;
        }
        soln = next_x;
    }
    return false;
}

double myfunction(double x, double y){
    return (3*x + 2*y);
}
double fp_x(std::function<double(double)> f, double x) {
    ...
}
...
double d = 1.0;
// Here we set y=2.5 and we tell bind that 1st parameter is unbounded
// If we wanted to switch and set x=2.5 and let y be unbounded, then
// we would use  (&myfunction, 2.5, std::placeholders::_1)
newton_raphson(d, std::bind(&myfunction, std::placeholders::_1, 2.5) , 1e-6);
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T07:42:11.763

我用你的问题来强迫自己学习 C++11 可变参数模板，这是一个工作示例。

```
template< typename... Ts >
double f( Ts... Vs ) {
    double array[] = { Vs... };
    int numArg = sizeof...( Vs );
    switch (numArg) {
    case 1:
        return 3 * array[0] + 2;
    case 2:
        return 3 * array[0] + 2 * array[1];
    case 3:
        return 3 * array[0] + 2 * array[1] + 1 * array[3];
    ....
    default:
        return 0.0;
    }
}

template< typename... Ts >
double newton_raphson( double &init, double tol,
                       double (*func) ( Ts... Vs ), Ts... Vs ) {
    return func( Vs... );
} 
```

你可以这样称呼它

```
newton_raphson( &init, 1.0, f, 1.0, 2.0, 3.0, 4.0, 5.0 ); 
```

# sql - 在 PostgreSQL 数据库中定期同步数据的最有效方法是什么？

> ID：15469801
> 
> 赞同：4
> 
> 时间：2013-03-18T04:32:03.587
> 
> 标签：sql, ruby-on-rails, ruby, postgresql, sync

我的 PostgreSQL 9.0.x 数据库中有一个表，`cached_projects`我主要通过 Rails 应用程序访问它，其架构如下所示：

```
create_table "cached_projects", :force => true do |t|
  t.string   "name",                               :null => false
  t.datetime "created_at",                         :null => false
  t.datetime "updated_at",                         :null => false
  t.boolean  "localization",    :default => false, :null => false
  t.integer  "base_project_id"
end 
```

该表由 Rake 任务填充，该任务每*N*分钟运行一次，并执行以下操作：

*   从 SOAP Web 服务查询所有项目记录（此上下文中的“项目”仅由名称（字符串）和一对布尔值和整数字段组成）。
*   将数据库中的项目列表与 SOAP 结果同步，丢弃 SOAP 结果中不再存在的任何记录，并添加找到的任何新记录。

**进行这种定期同步的最有效方法是什么？**重要的是，数据库中的行与 SOAP 结果中给出的记录完全匹配，没有额外内容。

我可以想到两种解决方案，但不确定哪个是最快的（并且性能是一个问题，因为有数万条记录，我想尽可能频繁地同步）：

1.  在每次同步期间，删除所有行`cached_projects`并为通过 SOAP 服务找到的每个项目插入一个新行。

    这将实现拥有完全相同的数据集的目标，但是假设其中绝大多数将保持不变，每次在数据库中删除约 50,000 行的成本会有多高？在数据库中有这么多“流失”是否有不利之处？

2.  在每次同步期间，SELECT 中的所有行`cached_projects`，将它们存储在临时 Hash 变量中。循环遍历 SOAP 记录并检查每一个记录是否已经在数据库中（使用临时哈希），保留我们找到的数据库记录的 ID 列表，以便它们可以保留在数据库中。比较所有内容后，插入任何新记录的行，删除不应该在表中的记录的行。

    这是我目前的解决方案，虽然它也准确地反映了数据，但比较 Rake 任务中的所有记录是相当计算密集型的，每次同步大约需要 3-5 分钟。（实际上，第一次同步，当数据库表为空时，它更快，但在随后的同步中，它必须与所有行进行比较，这更慢。）

我愿意接受其他建议，或者对这些想法中的任何一个进行改进。到目前为止，我一直在我的应用程序代码中寻找解决方案（基于 Ruby 的 rake 任务），但我也对将更多逻辑推入数据库本身的想法感兴趣，因为我对那方面不太熟悉东西的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:32:56.663

如果您的第一次同步比后续同步快，这意味着将所有数据插入数据库比比较每个数据并修改现有表要快。

我建议您使用`TRUNCATE`删除表中的所有记录而不是删除，然后将所有记录插入表中。

[http://en.wikipedia.org/wiki/Truncate_(SQL)](http://en.wikipedia.org/wiki/Truncate_(SQL))

# javascript - 简单的onload事件没有触发？

> ID：15469804
> 
> 赞同：1
> 
> 时间：2013-03-18T04:32:23.773
> 
> 标签：javascript, html

刚刚制作了一个基本程序来解决我的问题的根源，我似乎无法找到为什么这根本不起作用。

**HTML**

```
<html lang="en">
    <head>
        <script type="text/javascript" src="carjava.js"></script>
    </head>
<body onload="hi()">
    hi
</body>

</html> 
```

**JS**

```
function hi() {
alert("hi");
} 
```

我希望在页面加载时弹出警报但没有任何反应，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:35:52.247

我不能告诉你为什么它没有触发，但这应该可以：

**HTML**

```
<html lang="en">
    <head>
        <script type="text/javascript" src="carjava.js"></script>
    </head>
    <body>
        hi
    </body>
</html> 
```

**JS**

```
function hi() {
    alert("hi");
}

window.onload = hi; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T04:45:01.273

以下代码对我来说工作正常：

```
<html lang="en">
    <head>
        <script type="text/javascript" src="carjava.js"></script>
        <script type="text/javascript">
          function hi()
          {
             alert('hi');
          }
        </script>
    </head>
<body onload="hi()">
    hi
</body>

</html> 
```

它在 Firefox 和 Chrome 中运行良好。必须是带有 js 文件的东西。

# javascript - 从瓶子中返回 window.close()？

> ID：15469806
> 
> 赞同：0
> 
> 时间：2013-03-18T04:32:30.107
> 
> 标签：javascript, python, bottle

我试图通过从瓶子中返回以下内容来关闭当前的选项卡/窗口：

```
@route('/configure', method='POST')
def configure():

    #do other things here...

    return '''<script>window.close();</script>
      <p>You can close this window if it does not automatically close.</p>''' 
```

但它不起作用。如何让它自动关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:39:23.573

您应该将用户重定向到以该模板为模板的页面。这是 POST 处理程序的最佳实践。有关详细信息，请参阅[PRG](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

# jquery - 绑定函数中的文本替换

> ID：15469807
> 
> 赞同：1
> 
> 时间：2013-03-18T04:32:30.803
> 
> 标签：jquery

我正在尝试`.replace()`在绑定函数中使用。

```
var input = $('textarea#input');
var output = $('textarea#output');

input.bind('keyup', function() {
    output.val(input.val().replace('.', ':'));
    output.val(input.val().replace(/(\n|\r|\r\n)/gm, ''));
}); 
```

为什么这部分代码不起作用？`output.val(input.val().replace('.', ':'));`

[http://jsfiddle.net/R6H6q/4/](http://jsfiddle.net/R6H6q/4/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T04:33:53.830

您必须`output`在第二个语句中使用才能使`first`. 由于第一次替换将结果存储在*输出（而不是输入）*中，因此下一次替换应在输出中执行。

**[现场演示](http://jsfiddle.net/R6H6q/5/)**

```
 output.val(output.val().replace(/(\n|\r|\r\n)/gm, '')); 
```

# validation - 用户密码验证与他最近在 Drupal6 中的密码历史记录

> ID：15469810
> 
> 赞同：0
> 
> 时间：2013-03-18T04:32:49.860
> 
> 标签：validation, drupal, drupal-6, passwords, change-password

当用户更改他的密码或管理员更改任何用户密码时，它不应与他的最后 3 个密码相同。如何进行此验证？我已经安装了`password_policy`模块。但它没有正确验证这个约束。谁能告诉我如何实现这一目标？我也安装了`phpass`模块，对这个模块有影响吗？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:38:57.770

根据[密码策略](http://drupal.org/project/password_policy)模块页面，它说它支持：

> 历史约束（检查散列密码与用户先前散列密码的集合，以查找最近的重复项）

所以我的第一个倾向是这`phpass`可能会影响这一点。是否可以**禁用**`phpass`模块来测试并确认？

事实上，根据[Secure Password Hashes](http://drupal.org/project/phpass)模块页面，它使用不同的算法来存储用户的密码。由于`Password policy`将密码历史存储为`md5`哈希（在 Drupal 6 中），如果`phpass`不考虑这一点，可能会导致问题。

看看这个相关的[`phpass`模块问题](http://drupal.org/node/598424)。您还可以检查该`password_policy_history`表，看看给定用户的密码哈希历史是否与由`phpass`.

# javascript - 使用javascript在表格模式下验证表单

> ID：15469817
> 
> 赞同：5
> 
> 时间：2013-03-18T04:33:49.713
> 
> 标签：javascript, forms, input, validation

我在表格模式下制作了这样的表格：

```
<form name="register" method="post" action="#" onSubmit="return validasi()">         
    <table width="507" border="0">
      <h1 class="title"><a href="#">Form Perubahan Password</a></h1>
        <tr>
          <td width="190" ><span id="usernameerror" class="style20">Masukkan Username </span></td>
          <td width="319"><input name="username" type="text"></td>
        </tr>
        <tr>
          <td><span id="passworderror" class="style20">Masukkan Password Lama</span></td>
          <td><input name="pass" type="password"></td>
        </tr>
        <tr>
          <td><span id="password1error" class="style20">Masukkan Password Baru</span></td>
          <td><input name="pass1" type="password"></td>
        </tr>
        <tr>
          <td><span id="password2error" class="style20">Ulangi Masukkan Password Baru</span></td>
          <td><input name="pass2" type="password"></td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><input type="submit" name="Submit" value="Submit">
          <input type="reset" name="reset" value="Reset"></td>
        </tr>
      </table>
    </form> 
```

这是我的 javascript 验证代码。一探究竟..

```
<script language="javascript">
 function checkName(register)

    {
        var eobj = document.getElementById('usernameerror');        
        var susername = register.username.value;        
        var oRE = /^[a-z0-9]+[_.-]?[a-z0-9]+$/i;        
        var error = false;        
        eobj.innerHTML = '';        
        if (susername == '') {

            error = 'Error: Username tidak boleh kosong';        
            register.username.focus();
        }
         else if (!oRE.test(susername))  

    {  
      error="Salah format";  
    }  
        if (error)        
        {
            register.username.focus();        
            eobj.innerHTML = error;        
            return false;
        }        
        return true;
    }
    function validatePwd(register) /* old password verification */
    {
        var eobj = document.getElementById('passworderror');
        var invalid = ' ';
        var pw = register.pass.value;
        var error = false;
        eobj.innerHTML = '';
        if (pw.length < 1)

        {
            error = 'Masukkan password anda';
        } 
        else if (pw.indexOf(invalid) > -1)
        {
            error = 'Anda harus mengisi password';
        }
        if (error)
        {
            register.pass.focus();
            eobj.innerHTML = error;
            return false
        }
           return true;
    }
    function validatePwd1(register) /* password & retype-password verification */

    {

        var eobj1 = document.getElementById('password1error');        
        var eobj2 = document.getElementById('password2error');        
        var invalid = ' ';        
        var pw1 = register.pass1.value;        
        var pw2 = register.pass2.value;        
        var error = false;        
        eobj1.innerHTML = '';        
        eobj2.innerHTML = '';        
        if (pw1.length < 1)

        {
              error = 'Masukkan password anda';

        } 
        else if (pw1.indexOf(invalid) > -1)

        {
              error = 'Anda harus mengisi password';

        }        
        if (error)

        {

            register.pass1.focus();        
            eobj1.innerHTML = error;        
            return false

        }

        if (pw1 != pw2)

        {
                    eobj2.innerHTML = ' password tidak sama, coba masukkan kembali password anda';        
            return false;

        }
                return true;

    }

    function validasi()

    {

        var form = document.forms['register'];        
        var ary = [checkName, validatePwd, validatePwd1];        
        var rtn = true;        
        var z0 = 0;        
        for (var z0 = 0; z0 < ary.length; z0++)

        {        
            if (!ary[z0](form))

            {        
                rtn = false;        
            }        
        }
        return rtn;
         }
</script> 
```

当我使用此验证通常形成其工作但在表格模式下，验证代码不起作用..帮我解决这个问题...tq

查看演示 [http://jsfiddle.net/andricoga/u9eZz/](http://jsfiddle.net/andricoga/u9eZz/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:02:56.413

在您的 validatePwd() 函数中替换

```
eobj1.innerHTML = error; 
```

和

```
eobj.innerHTML = error; 
```

您尚未定义此 eobj1 对象，因此它会导致运行时 javascript 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:45:36.713

我更改了代码以在字段旁边显示错误，试试这个

Javascript

```
<script language="javascript">

function checkName()

    {
        var obj = document.getElementById('usernameerror');        
        var susername = document.getElementById('username').value;        
        var oRE = /^[a-z0-9]+[_.-]?[a-z0-9]+$/i;        
        var error = false;        
        obj.innerHTML = ''; 

        if (susername == '') {

            error = 'Username can not be empty';        

        }
         else if (!oRE.test(susername))  

    {  
      error = 'One format';  
    }  
        if (error)        
        {
            document.getElementById('username').focus();        
            obj.innerHTML = error;        
            return false;
        }        
        return true;
    }

function validatePwd() /* password & retype-password verification */
    {
        var obj = document.getElementById('pwderror');
        var invalid = ' ';
        var pw = document.getElementById('pass').value;
        var error = false;
        obj.innerHTML = '';

        if (pw.length < 1)

        {
            error = 'Enter your old password';
        } 
        else if (pw.indexOf(invalid) > -1)
        {
            error = 'You need a password';
        }
        if (error)
        {
            document.getElementById('pass').focus();
            obj.innerHTML = error;
            return false
        }
           return true;
    }

function validatePwd1() /* password & retype-password verification */

    {

        var obj = document.getElementById('pwd1error');                
        var invalid = ' ';        
        var pw1 = document.getElementById('pass1').value;        
        var pw2 = document.getElementById('pass2').value;      
        var error = false;        
        obj.innerHTML = '';        

        if (pw1.length < 1)

        {
              error = 'Enter your new password';

        } 
        else if (pw1.indexOf(invalid) > -1)

        {
              error = 'You need a password';

        }        
        if (error)

        {

            document.getElementById('pass1').focus();        
            obj.innerHTML = error;        
            return false

        }

        if (pw1 != pw2)

        {
                    obj.innerHTML = 'passwords are not the same, try to re-enter your password';        
            return false;

        }
                return true;

    }

function validate()

    {

        var form = document.forms['register'];        
        var ary = [checkName, validatePwd, validatePwd1];        
        var rtn = true;        
        var z0 = 0;        
        for (var z0 = 0; z0 < ary.length; z0++)

        {        
            if (!ary[z0](form))

            {        
                rtn = false;        
            }        
        }
        return rtn;
         }

</script> 
```

形式

```
<form name="register" method="post" action="#" onSubmit="return validate()">         
    <table border="0">
    <tr>
    <td colspan="2">
      <h1 class="title"><a href="#">Password Change Form</a></h1>
    </td>
    </tr>
        <tr>
          <td><span class="style20">Username </span></td>
          <td><input name="username" id="username" type="text"></td>
      <td><span id="usernameerror" class="style20">&nbsp;</span></td>
        </tr>
        <tr>
          <td><span class="style20">Old Password</span></td>
          <td><input name="pass" id="pass" type="password"></td>
      <td><span id="pwderror" class="style20">&nbsp;</span></td>
        </tr>
        <tr>
          <td><span class="style20">New Password</span></td>
          <td><input name="pass1" id="pass1" type="password"></td>
      <td><span id="pwd1error" class="style20">&nbsp;</span></td>
        </tr>
        <tr>
          <td><span class="style20">Repeat New Password</span></td>
          <td><input name="pass2" id="pass2" type="password"></td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><input type="submit" name="Submit" value="Submit">
          <input type="reset" name="reset" value="Reset"></td>
        </tr>
      </table>
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T04:42:29.823

您已`onSubmit="return validasi()"`在 form 中声明，但您在其中定义了函数。对于验证工作，您需要为此定义函数。

```
function validasi(){
   // validation code goes here
} 
```

# javascript - 对角手风琴分隔线和倾斜的文本流

> ID：15469824
> 
> 赞同：10
> 
> 时间：2013-03-18T04:34:51.330
> 
> 标签：javascript, jquery, html, css

小提琴（您可能需要调整结果窗格的大小）：http: [//jsfiddle.net/BxVrf/1/](http://jsfiddle.net/BxVrf/1/)

客观的：![客观的](../Images/6b6340fe7093d64d019bae4dc0293eba.png)

问题：

0) 如您所见，我在图形设计方面比在代码方面要好得多。

1）我试图让手风琴标签对角线（目前我可以让它与垂直div一起干净地工作），但是没有创建一个巨大的图像，我找不到一种独立于分辨率的方法来做到这一点。使用渐变将不起作用，因为我使用的是 box-shadow，并且会显示透明边框。无论有没有 zAccordion（我在 Fiddle 中对它们进行了注释），CSS 转换的结果也不尽如人意。

2) 我希望 CSS 文本流如底部图像所示。我发现 CSS Text Wrapper 不太理想，并且 Fiddle 在其他地方发布如下，再次返回不太理想的结果，目前不在 Fiddle 待解决的第一个问题：

```
var element, width, height, fontSize, numberOfParagraphs, lineHeight, numberOfLines, offsetIncrement, highestValue;
element = jQuery('p.all');
width = element.width();
height = element.height();
fontSize = element.css('font-size');
numberOfParagraphs = element.length;
lineHeight = Math.floor(parseInt(fontSize.replace('px','')) * 1.5);
numberOfLines = height/lineHeight*numberOfParagraphs;
offsetIncrement = 8.5;
highestValue = Math.floor(numberOfLines*offsetIncrement);

for(var index = 0; index <= numberOfLines; index++) {
    element.eq(0).before('<span class="text-offset" style="width: '+highestValue+'px; float: left; height: '+lineHeight+'px; clear: both;"/>');
    highestValue = highestValue-offsetIncrement;
} 
```

如果有人能指出我正确的方向，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T05:40:01.117

您正在寻找倾斜不旋转，

```
transform: skewX(20deg) skewY(0deg); /* W3C */
-webkit-transform: skewX(350deg) skewY(0deg); /* Safari & Chrome */
-moz-transform: skewX(350deg) skewY(0deg); /* Firefox */
-ms-transform: skewX(350deg) skewY(0deg); /* Internet Explorer */
-o-transform: skewX(350deg) skewY(0deg); /* Opera */ 
```

这是您更新的 Fiddle 解决方案

[http://jsfiddle.net/BxVrf/9/](http://jsfiddle.net/BxVrf/9/)

# java - Android 接近警报不起作用

> ID：15469826
> 
> 赞同：2
> 
> 时间：2013-03-18T04:35:03.983
> 
> 标签：java, android, google-maps, proximity

我正在尝试创建一个应用程序，当您单击它的信息窗口时，它允许您为标记设置接近警报。

```
 googleMap.setOnInfoWindowClickListener(
            new OnInfoWindowClickListener(){
     public void onInfoWindowClick(Marker marker) {

         LatLng clickedMarkerLatLng = marker.getPosition();
                double lat =  clickedMarkerLatLng.latitude;
                double long1 =  clickedMarkerLatLng.longitude;

            Log.e("hello", "Output=" + lat + long1);

               LocationManager lm;
         //   double lat=123,long1=34;    //Defining Latitude & Longitude
              float radius=30;                         //Defining Radius

            lm=(LocationManager) getSystemService(Context.LOCATION_SERVICE);
            Intent i= new Intent("com.example.sleepertrain5.ProximityReceiver");           //Custom Action
            PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 1, i, PendingIntent.FLAG_CANCEL_CURRENT);
            lm.addProximityAlert(lat, long1, radius, -1, pendingIntent);

     } 
```

这是调用广播接收器的代码

```
public class ProximityReceiver extends BroadcastReceiver {

 @Override
 public void onReceive(Context arg0, Intent arg1) {
 // TODO Auto-generated method stub
 // The reciever gets the Context & the Intent that fired the broadcast as arg0 & agr1 

 String k=LocationManager.KEY_PROXIMITY_ENTERING;
// Key for determining whether user is leaving or entering 

 boolean state=arg1.getBooleanExtra(k, false);
 //Gives whether the user is entering or leaving in boolean form

 if(state){
 // Call the Notification Service or anything else that you would like to do here
 Toast.makeText(arg0, "Welcome to my Area", 600).show();
 }else{
 //Other custom Notification 
Toast.makeText(arg0, "Thank you for visiting my Area,come back again !!", 600).show();

 }

} 
```

上面是广播接收器。这些都不起作用，我不知道为什么。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:27:37.590

将以下代码用于待定意图：

```
PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(),
                nId, intent,
                PendingIntent.FLAG_UPDATE_CURRENT); 
```

其中 nId 将是代表特定待处理意图的任何 uniq 数字。

# matlab - FastICA 使用 pca 降维

> ID：15469828
> 
> 赞同：0
> 
> 时间：2013-03-18T04:35:19.083
> 
> 标签：matlab, image-processing, pca

我正在尝试开发一个图像分类系统。我正在使用以下文章：

*Dia Abu Al Nadi 博士和 Ayman M. Mansour 进行*纹理分类的独立成分分析 (ICA)**

 *在一段中它说：

> 给定上述纹理图像，通过上述方法学习独立分量。上述纹理的 (8 x 8) ICA 基函数分别如图 2 所示。通过 PCA 降低维度，总共有 40 个函数。请注意，来自不同窗口大小的独立组件是不同的。

“上面概述的方法”是 FastICA，纹理取自[Brodatz 相册](http://www.ux.uis.no/~tranden/brodatz.html)，每个纹理图像都有`640x640`像素。我的问题是：

作者的意思是“PCA 减少了维度，总共有 40 个函数。”，我怎样才能使用 matlab 获得这些函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:47:59.567

[PCA（主成分分析）](http://en.wikipedia.org/wiki/Principal_component_analysis)是一种为高维（数据）空间寻找正交基（想想坐标系）的方法。PCA 基础的“轴”按方差排序，即沿着第一个 PCA“轴”，您的数据具有最大的方差，沿着第二个“轴”具有第二大的方差，依此类推。

这被用于降维：假设您有 1000 维数据。然后你做一个 PCA，将你的数据转换为 PCA 基础，并丢弃除前 20 个维度之外的所有维度（只是一个示例）。如果您的数据遵循某种统计分布，那么 20 个 PCA 维度描述您的数据的可能性几乎与 64 个原始维度一样。有一些方法可以找到要使用的维数，但这超出了这里的范围。

在计算上，PCA 相当于在 Matlab 中找到数据协方差矩阵的特征分解：`[V,D] = eig(cov(MyData))`.

请注意，如果您想使用这些概念，您应该认真阅读。[Turk 和 Pentland 的 Eigenfaces](http://www.face-rec.org/algorithms/PCA/jcn.pdf)是一篇关于您可以在图像数据上使用 PCA 做什么的经典文章。它还以易于理解的方式提供了一些背景知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-19T01:25:59.727

PCA降低数据维度，ICA提取数据的维度必须<=数据维度的组件*

# breeze - 是否可以扩展从服务器接收到的 Breeze 元数据？

> ID：15469838
> 
> 赞同：2
> 
> 时间：2013-03-18T04:36:38.797
> 
> 标签：breeze

想知道是否有人知道扩展或配置 Breeze 以便服务器在实体元数据中返回附加信息的任何方法？我想使用这些附加数据来协助验证。

假设我有一个像这样应用了一些数据注释的实体模型：

```
public class Person {    
    [RegularExpression(@"^$|^http\://[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(/\S*)?", 
      ErrorMessage="The Website address does not appear to be valid.")]
    public string Website { get; set; }

    [Required(ErrorMessage="The Name field is required."), 
      MaxLength(150, ErrorMessage = "The Name field cannot exceed 150 characters."), 
      MinLength(5, ErrorMessage = "The Name field must be at least 5 characters.")]
    public string Name { get; set; }
    //...
} 
```

目前，Breeze 仅根据它收到的元数据连接 MaxLength 和 Required Validator，因为这是它开箱即用的全部支持。如果 Breeze 可以在元数据中包含服务器实体上的 Data Annotation Attributes 中描述的信息，我认为 Breeze 可以自动向客户端 EntityType 添加额外的库存验证器（例如，RegEx、Range、MinLength、 ETC... ）。这将涵盖大多数基本验证用例。或者，它还可以允许开发人员检查元数据并提取有用的信息，例如我们可以用来连接我们自己的自定义 RegEx 验证器的 regEx 字符串。

此外，有没有办法让 Breeze 在元数据中包含 ErrorMessage 验证属性属性的值，然后让微风客户端使用它而不是默认的 required 和 maxLength messageTemplates？这意味着您只需在服务器上的一个位置定义错误消息，而不必为每个实体自定义它。

我试图避免必须在客户端上创建和注册一堆自定义验证器，这些验证器看起来像是可以由 Breeze 自动处理的基本验证。

谢谢，理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:15:25.560

这是一个很好的问题。

我们还没有很好地记录服务器如何序列化元数据，但这应该“很快就会实现”。但是，如果您查看通过网络传输的 json，您会注意到验证器仅按名称进行序列化。然后在客户端上注册的验证器（或验证器工厂）中查找此名称，然后将其添加到客户端元数据中。因此，想法是在客户端上使用唯一名称注册您的验证器“实现”，然后让服务器在从服务器发送元数据时引用此名称。

一旦我们记录了如何创建自己的服务器端元数据以发送到客户端，希望这会在一周左右的时间内变得更加清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T09:38:54.423

嗯，一年过去了。有关于这个话题的消息吗？我完全同意 RWHepburn 的观点，即在服务器端定义所有验证规则并在客户端轻而易举地使用它是一件完美的事情。这就是 EF 中的数据注释的用途 - 使它更容易！

# javascript - 错误：未找到第三方操作方法

> ID：15469839
> 
> 赞同：0
> 
> 时间：2013-03-18T04:36:41.783
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

我正在使用一种第三方工具。我用 MVC 控制器继承了它的控制器 {

```
public class ReportController : ReportServiceBaseController
{

}

public abstract class ReportServiceBaseController : Controller
{

    [HttpPost]
    public JsonResult LoadDocumentInfo(LoadDocumentInfoRequest request);
    [HttpPost]
    public JsonResult LoadDocumentMapInfo(LoadDocumentMapInfoRequest request);
} 
```

}

当我调用“LoadDocumentInfo”方法时，它会给出未找到的错误。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:36:05.947

您使用 ReportController 调用 LoadDocumentInfo 方法，但您尚未在 Controller 中实现此方法，所以我认为首先您必须在控制器中实现它，然后尝试调用该方法。

# perl - 如何避免存储过多的会话？

> ID：15469841
> 
> 赞同：1
> 
> 时间：2013-03-18T04:36:52.113
> 
> 标签：perl, session, redis, session-timeout, catalyst

我将 Perl Catalyst 与`Catalyst::Plugin::Session::State::Cookie`and一起使用`Catalyst::Plugin::Session::Store::Redis`。我最多有 2,000 个用户登录，但我的 Redis 存储中有超过 200 万个密钥。

大多数身份验证都是通过 API 密钥完成的。我想知道是否每个 API 调用都创建并存储了一个新会话（API 调用中可能没有 cookie），或者网站的所有新访问者是否都会自动创建一个会话。

看起来一个解决方案是默认设置一个非常短的到期时间（几分钟），并在用户通过 Web 界面登录时用更长的到期时间覆盖它。

我想知道这是将存储的会话数限制在最低限度的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T05:46:03.457

Redis Time out 就是为此目的，除非您有任何特定的紧迫用例来防止所有会话过期（我看不到任何会话），否则您应该将其设置为实际时间限制（默认值：300）。

但是，这在旧版本的 redis 中存在问题，因此在测试此功能之前，您需要安装最新的 redis 以修复它。

# vba - Excel/VBA - 检查分层 ID

> ID：15469843
> 
> 赞同：1
> 
> 时间：2013-03-18T04:37:02.403
> 
> 标签：vba, excel, excel-2010

我在 Excel 2010 中有一个单元格。我想检查在那里输入的值是否是分层 ID。我该怎么做？

单元格的格式应该是什么？应该是`general`，`number`还是别的什么？

假设我的分层 ID 如下所示：

```
1.0  
1.0.3  
1.1.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:11:01.880

为了`With ws`使用，您需要使用句号。

例如 `For i = 1 To .Range("A" & .Rows.Count).End(xlUp).Row`

但我也会改变这`.Rows.Count`部分。您只需要使用范围内的行。

# ios - 什么是自动引用计数？

> ID：15469846
> 
> 赞同：-4
> 
> 时间：2013-03-18T04:37:17.603
> 
> 标签：ios, automatic-ref-counting

什么是自动引用计数？
我是新的 iPhone 开发人员。
提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:42:21.400

ARC 是自动引用计数。在 ARC 之前，我们使用手动释放/保留/自动释放调用来进行内存管理，但 Apple 已经引入 ARC 来删除这种手动内存管理。

这是**[Ray Wenderlich的一个很好的教程](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)**

[**要了解 ARC，您应该对内存管理**](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011i)有所了解[](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011i)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:43:05.937

iOS 5 sdk 中引入了自动引用计数 (ARC)，通过让内存管理成为编译器的工作，使 Objective-C 程序员不必处理内存管理。

如果您在 iOS 5 SDK 之前使用 Objective-C 进行开发或与 Obj-C 程序员交谈，那么您可能知道任务内存管理可能变得多么乏味。使用 ARC 时，不需要保留和释放调用，不仅如此，在许多情况下，ARC 还可以显着提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:56:34.477

如果您向[WIKI](http://www.wikipedia.org)提出同样的问题，您会看到的第一行是

**在 Objective-C 编程中，自动引用计数 (ARC) 是一种内存管理增强功能，其中跟踪对象引用计数的负担从程序员转移到编译器。**

这包括您作为初学者需要了解的所有内容。[你可以在这里](http://en.wikipedia.org/wiki/Automatic_Reference_Counting)看到完整的描述

接下来，如果您想知道**ARC 是如何工作的？**，我认为您在这里没有[比布拉德的回答](https://stackoverflow.com/a/6418410/1756131)更好的了。**

# typescript - 使模块可调用

> ID：15469849
> 
> 赞同：6
> 
> 时间：2013-03-18T04:37:26.847
> 
> 标签：typescript

typescript 中的模块与接口兼容。例如以下是有效的：

```
module M{
    var s = "test"
    export function f(){
        return s;
    }   
}

interface ITest{
    f():string;
}

var x:ITest = M; 
```

但是，模块中是否可以有可调用的签名？具体如何编写与以下接口兼容的模块：

```
interface ITest{
    ():string;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:15:53.987

不，这是不可能的。唯一可以匹配调用签名的实体是函数

```
interface ITest{
    ():string;
}

var x:ITest = function() {return "";}
var y:ITest = () => ""; 
```

# vb.net - 从 xls 文件读取数据，然后使用 vb.net 更新到 dbf 文件

> ID：15469851
> 
> 赞同：0
> 
> 时间：2013-03-18T04:37:58.043
> 
> 标签：vb.net, xls, dbf

我想问一下是否可以读取 *xls 文件中的数据，然后使用 vb.net 脚本根据员工 ID 获取数据并更新到 *.dbf 文件？如果是，我是否需要先将 xls 转换为 dbf，然后进行更新，还是可以只读取 xls 并更新为 dbf 文件而不进行转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:59:14.700

您可以使用 COM 读取 xls 文件，然后使用从 Excel 读取的数据更新数据库，无需转换任何内容。

说将excel数据转换为access数据库并使用查询从那里更新数据可能更简单。这取决于您的数据有多复杂以及您必须多久执行一次此任务。

顺便说一句，VB.NET 不是一种脚本语言，它是一种预编译语言。我假设通过说“脚本”您正在考虑 vba？不过，您尝试做的事情也可以在 vba 中完成...

更新：

这里有一些关于我认为你应该如何进行的细节。您可以搜索每个步骤所需的所有内容。

从 Excel 中读取数据：

如果可以的话，您应该真正避免自己的大量工作，并将数据导出为 csv 格式文件，并使用`StreamReader`. 如果你真的需要直接从 Excel 中读取它，你需要走 COM 自动化路线，你应该看看使用`Microsoft.Office.Interop.Excel`命名空间。它与通过 vba 自动化 Excel 非常相似，因此如果您熟悉它应该相对容易。

将数据写入数据库：

这部分非常简单。使用`System.Data.OleDB`命名空间创建与数据库的连接，然后`OleDBCommand`使用正确的查询生成一个插入数据的连接，然后就完成了。如果您有一个复杂的数据库并且想要操作大量数据，您真的应该考虑调整`LinqToSQL`框架以使用访问或如何使用`IQToolkit`.

我希望这有帮助。

更新 2：

只记得我在几周前编写了一个将数据写入 Excel 的方法。和读入数据不一样，但应该很相似……其实读入数据应该更简单。看看这是否有助于您入门：

您需要导入`Microsoft.Office.Interop.Excel`才能使其正常工作

```
Private Function ExportToExcelFile(ByVal FileName As String) As Boolean

    With New Excel.Application
        With .Workbooks.Add()
            For Each sheet As Worksheet In .Worksheets
                If sheet.Index > 1 Then
                    Call sheet.Delete()
                End If
            Next
            With CType(.Worksheets(1), Worksheet).Range("A1")
                ' Do stuff with the cells in you spreadsheet here
            End With
            Call .SaveAs(FileName)
        End With
        Call .Quit()
    End With

End Function 
```

为了将内容写入您的数据库，这是我最近提供给其他人[的一个示例。](https://stackoverflow.com/questions/15425851/how-to-save-in-arraylist-string-separated-by-comma/15426338#15426338)

# wcf - autofac wcf 集成在soap地址的末尾有/basic

> ID：15469853
> 
> 赞同：0
> 
> 时间：2013-03-18T04:38:31.313
> 
> 标签：wcf, autofac

我们有一个不使用 Autofac 的旧 wcf 服务。从它生成的 wsdl 看起来像这样

```
<wsdl:service name="WebSite.Service.WebSiteService">
    <wsdl:port name="BasicHttpBinding_IWebSiteService" binding="tns:BasicHttpBinding_IWebSiteService">
    <soap:address location="http://localhost/WebSiteService.svc/basic"/>
</wsdl:port>
</wsdl:service> 
```

但是，我使用 autofac wcf 集成创建的新 Web 服务（是否按照 autofac wcf 网页中的示例进行操作）在肥皂地址 url 的末尾没有 basic 一词（如 ...localhost/WebSiteService.svc/ **basic**） . 它导致一些旧的移动应用程序和网站出现故障......我只是想知道是否有人知道我如何让基本这个词出现在肥皂地址部分？

谢谢

# c++ - C++ 构造函数初始化引用赋值

> ID：15469856
> 
> 赞同：1
> 
> 时间：2013-03-18T04:38:43.613
> 
> 标签：c++, reference, constructor, initialization

我确信这个问题以前被问过。但我似乎无法找到我正在寻找的确切答案。基本上我试图创建一个类的对象作为另一个类的成员，并通过构造函数引用拥有的对象来传递其中一个成员。有时这似乎有效，有时我得到一个随机值。

我认为我不了解初始化顺序的一些基本规则

这是代码示例：

```
class Foo
{
public:
    Foo();
private:
    int b;
    Bar c;
};

class Bar
{
public:
    Bar(int& parm);
private:
    int& b_ref;
};

Foo::Foo(): b(0), c(b)
{}

Bar::Bar(int& parm): b_ref(parm)
{} 
```

我想要的是 c 拥有对 b 的引用，并且能够在值发生变化时看到它。

在这种情况下我不应该使用初始化列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T04:43:05.407

规则是对象按照它们在`class`. 在这种情况下，这意味着`b`在 之前已初始化`c`，因此此代码应始终正常工作。

如果你交换了`b`and`c`成员的顺序，那么`int`引用的 by`param`将不会在 的构造函数中初始化`Bar`。

# php - 是否有一个 PhP 功能来检查服务器中所有可用的 IP？

> ID：15469864
> 
> 赞同：0
> 
> 时间：2013-03-18T04:40:00.887
> 
> 标签：php, ip

是否有一个 PhP 命令可以用来了解服务器可用的所有 IP。

基本上，当我使用 curl 时，我想从可用的 IP 中选择随机 IP，然后改用该 IP。

# php - 怀疑 PEAR 邮件错误

> ID：15469871
> 
> 赞同：-1
> 
> 时间：2013-03-18T04:40:45.123
> 
> 标签：php, email, pear

我正在使用 PEAR Mail.php 库将表单处理脚本从一个站点迁移到 PHP5 中的另一个站点。该脚本粘贴在此消息的底部。一切似乎都运行良好。即使在脚本中使用这个，我也没有收到任何 PHP 错误：

```
error_reporting(E_ERROR | E_WARNING | E_PARSE); 
```

但浏览器结果指向 PEAR 返回的 PEAR 错误状态：

```
"An email error has occurred..." 
```

这是脚本中的结果：

```
if (PEAR::isError($mail2)) { 
```

这就是说，我不知道如何找到有关此 PEAR 错误的更多详细信息。有没有办法通过 PEAR 打开某种明确的错误消息？

关于下面的代码有什么建议吗？

```
error_reporting(E_ERROR | E_WARNING | E_PARSE);

// Relies on PEAR Mail module!
require_once "Mail.php";

if (isset($_REQUEST['pdfName']) && isset($_REQUEST['pdfEmail'])) {
    $name    = $_REQUEST['pdfName'];
    $email   = $_REQUEST['pdfEmail'];
    $file    = $_REQUEST['pdfFile'];

    $host = 'smtpout.secureserver.net'; 
    $user = 'ot@domain.com';
    $pass = 'password';

    $smtp = Mail::factory('smtp',
                         array ('host' => $host,
                                          'auth' => true,
                                          'username' => $user,
                                          'password' => $pass));

    $to = "info@domain.com";
    $Bcc = "dan@domain.com";
    $recipients = $to.", ".$Bcc;
    $from = "info@domain.com";
    $subject = "Document request on company.com";
    $body = "Hello Sales Team,

Name: $name
Email: $email

Requested the file: http://en.domain.com/docs/$file";

    $headers = array ('From' => $from,
                            'To' => $to,
                            'Bcc' => $Bcc,
                            'Subject' => $subject);

    $mail = $smtp->send($recipients, $headers, $body);

    $to = $email;
    $from = "info@domain.com";
    $subject = "company Your document is here";
    $body = "Hello $name,

The document you requested one http://www.domain.com can be found here: 
http://en.domain.com/docs/$file

Enjoy the information.

If you have questions, do not hesitate to contact us.
E-Mail: info@domain.com
Tel: +1 (000) 606 4000 (US office)

Kind regards
The company Team
www.domain.com

The information contained in this email is intended only for the use of the person or entity to whom it is addressed and may contain information that is confidential and maybe legally privileged and exempt from disclosure under applicable laws. If you read this message and are not the addressee, you are notified that use, dissemination, distribution or reproduction of this message is legally prohibited. If you have received this message in error, please notify us immediately and return the original message to us.";

    $headers = array ('From' => $from,
                            'To' => $to,
                            'Subject' => $subject);
    $mail2 = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail2)) {
        //echo("<p>" . $mail2->getMessage() . "</p>");
        echo("<tr>
<td colspan='2' style='margin:10px 0 20px 10px;'>
<div style='margin:10px 0 2px 5px;color:#01578C;'>An email error has occurred.</div>
<div style='margin:0 0 20px 5px;'>Please provide a valid email address so we can send you a link to the requested document.</div></td>
</tr>

<tr>
<td align='left' valign='top' style='width: 350px;'><span style='padding-left:5px' >Please submit a new request.</span></td>
<td style='padding:2px 5px;'><div style='height:109px;'>&nbsp;</div></td>
</tr>");
    } else {
        echo("<tr>
<td colspan='2' style='margin:10px 0 20px 10px;'>
<div style='margin:10px 0 2px 5px;color:#01578C;'>Your data were sent successfully.</div>
<div style='margin:0 0 20px 5px;'>A link to the requested document was sent to the email address you provided.</div></td>
</tr>

<tr>
<td align='left' valign='top' style='width: 350px;'><span style='padding-left:5px' >Enjoy the information.</span>
<P>
<br>
&nbsp;<A HREF=\"javascript:history.go(-2)\">Click here to go back to browsing company.com.
</td>
<td style='padding:2px 5px;'><img align='left' alt='' src='/docdown/index-files/whitepaper.jpg'/></td>
</tr>
");
    }

} else {
        echo("<tr>    
<td colspan='2' style='margin:10px 0 20px 10px;'>
<div style='margin:10px 0 2px 5px;color:#01578C;'>
An error has occurred.</div>
<div style='margin:0 0 20px 5px;'>Please provide a valid email address so we can send you a link to the requested document.</div></td>
</tr>
<tr>        
<td align='left' valign='top' style='width: 350px;'><span style='padding-left:5px' >Please submit a <A HREF=\"javascript:history.go(-1)\"> new request on the previous page.</a></span></td>    
<td style='padding:2px 5px;'><div style='height:109px;'>&nbsp;</div></td>    
</tr>");    
}    
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:54:55.407

你已经得到了它，注释掉了。

```
echo("<p>" . $mail2->getMessage() . "</p>"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T20:09:00.697

好的 - 找到了 - 这段代码很好地解决了这个问题：

```
 // Pear Mail error messaging
 if ($emailerror = PEAR::isError($mail)) {
 echo("<p><br><p><br>" . $mail->getMessage() . "</p>"); exit;
 } 
```

# linux - 编译内核模块的问题

> ID：15469872
> 
> 赞同：1
> 
> 时间：2013-03-18T04:40:54.617
> 
> 标签：linux, linux-kernel, linux-device-driver, ubuntu-12.10

我买了一台新的 Toshiba Satellite C855 并在其上安装了 Ubuntu 12.10 却发现预装的 wifi 和以太网驱动程序不起作用。结果，这台新计算机完全无法访问互联网。我下载了正确驱动程序的源代码，目前正在安装它们。当我构建模块时，出现以下错误

```
make -C /lib/modules/3.5.0-17-generic/build M=/home/<user>/Desktop/rtl_92ce_92se_8723ae_88ee_linux_mac80211_0012.0207.2013 modules
make[1]: Entering directory `/lib/modules/3.5.0-17-generic/build`
make[1]: *** No rule to make target `modules'. Stop.
make[1]: Leaving directory `/lib/modules/3.5.0-17-generic/build`
make: *** [all] Error 2 
```

我必须制作`/lib/modules/3.5.0-17-generic/build`目录。我确实安装了标题（在`/usr/src/linux-headers-3.5.0-17/`）。在发布这个问题之前，我也在这个主题上做了很多谷歌搜索，但我发现的一切要么死了，要么没有答案。

注意：我宁愿避免显示输出。由于我发帖的这台计算机不是东芝机器，而且新机器没有互联网接入，我必须手动输入输出或使用闪存驱动器进行麻烦。此外，如果我需要安装任何软件包，我还需要指向 .deb 软件包的链接，而不是 apt-get install 命令。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:59:07.900

我设法自己修复它，并想我会发布我的解决方案：

在我最初的问题中，我说我必须 mkdir 构建目录。我没有意识到这应该是内核源目录的符号链接。一旦我这样做了，一切（包括我的以太网，wifi 仍然有点不确定）突然工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:57:14.660

我建议您停止在目标 PC 上进行编译。您缺少编译内核的所有基本工具，并且在没有 Internet 连接的情况下获取它们是一项乏味的工作，处理所有依赖项，这是一场噩梦。

你有两个选择：

1.  搜索为您的目标 PC 预编译的二进制模块。
2.  自己编译，在另一台机器上，我建议在 virtualbox / vmware 下进行，这样你就可以安装你正在尝试编译的确切版本的 Ubuntu。然后只需将 复制`.ko`到您的目标，`insmod`就可以开始了。

# c# - 更改标题文本后如何在gridview中启用排序

> ID：15469877
> 
> 赞同：1
> 
> 时间：2013-03-18T04:42:04.553
> 
> 标签：c#, asp.net, sorting, gridview

我的网页中有一个 gridview 来显示我的查询结果

我编写了通过单击列标题进行排序的必要功能

但是当我在后面的代码中更改标题时，我无法通过单击进行排序

绑定数据后如何将列格式从文本更改为超链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-23T21:45:24.600

我也已经面临这个“错误”。技巧是避免在更改 Header 的 Text 值时将其转换为字符串（您可能在后面的代码中使用 e.Row.Cells[0].Text = "This is changed header 1" ）。在此之后，所有更改的列都将禁用排序。因此，您需要将标题不视为文本，而是将其视为 LinkBut​​ton，一切都会完美。

这是我的解决方案：

我在我的网格定义中使用 OnRowDataBound="Exmplgrid_RowDataBound" 。如果您将使用它，排序将在前 3 列保持启用并在第 4 列禁用（用于演示目的）：

```
protected void Exmplgrid_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.Header)
        {
            LinkButton btnSort = (LinkButton)e.Row.Cells[0].Controls[0];
            btnSort.Text = "This is changed header 1";
            btnSort = (LinkButton)e.Row.Cells[1].Controls[0];
            btnSort.Text = "This is changed header 2";
            btnSort = (LinkButton)e.Row.Cells[2].Controls[0];
            btnSort.Text = "This is changed header 2";
            e.Row.Cells[3].Text = "This is changed header 2\. SORTING DISABLED"
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:04:06.457

`In order to provide a better answer please release some codes for fix!`

在网页中使用网格视图有点困难，但一些专家发布了可用于开发网站或 Web 应用程序的控件，您可以查看以下链接，甚至评估其他控件，如 WYSIWYG 编辑器、调度程序、树视图, Telerik Asp.net 控件上的菜单和更多内容。

[网格 - 程序化排序](http://demos.telerik.com/aspnet-ajax/grid/examples/programming/sort/defaultcs.aspx)

[用于 ASP.NET AJAX 的 RadControls](http://www.telerik.com/products/aspnet-ajax/controls.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:36:21.780

使用此代码进行排序............

```
 protected void RadgvData_SortCommand(object sender, GridSortCommandEventArgs e)
        {
            GridTableView tableView = e.Item.OwnerTableView;
            e.Canceled = true;
            GridSortExpression expression = new GridSortExpression();
            expression.FieldName = e.SortExpression;
            if (tableView.SortExpressions.Count == 0 || tableView.SortExpressions[0].FieldName != e.SortExpression)
            {
                expression.SortOrder = GridSortOrder.Descending;
            }
            else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Descending)
            {
                expression.SortOrder = GridSortOrder.Ascending;
            }
            else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Ascending)
            {
                expression.SortOrder = GridSortOrder.Descending;
            }

            tableView.SortExpressions.AddSortExpression(expression);
            RadgvData.Rebind();

        } 
```

# jquery - 在从数组中选择之前，如何确保每个值的 ajax 都已完成？

> ID：15469878
> 
> 赞同：1
> 
> 时间：2013-03-18T04:42:08.420
> 
> 标签：jquery, ajax, api, loops, for-loop

所以我有一个函数，当用户提交表单时调用它，然后执行 jquery 加载以根据他们的输入找到相应的歌曲并显示它。所有这一切都很好，但我想将这些值存储在一个数组中并用它们做一些事情（现在警报只是为了调试）。我的猜测是代码正在发送“未定义”，因为它没有等待 ajax 在检查数组之前完成。那么，我该如何解决这个问题？下面的代码：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script type="text/javascript">
        //final step is to initialize an array outside the function, fill it in, 
        //then window.out on each part of the array
            function callMe() {
                var hold = new Array();

                for (var i = 0; i < 5; i++) {
                    var b = $('#song'+i).val();
                    var c = $('#artist'+i).val();
                    var d = b + " " + c;
                    $('#'+i).html("Loading...");
                    $('#'+i).load('getInfo.php', {term: d}, function(data){
                        //I have no clue why 5 keeps popping up
                        hold[i] = data;
                        // alert("The number"+i+":"+hold[i]);
                    });       
                }
                for (var i = 0; i<5; i++) {
                    alert(hold[i]);
                }
            }
            $(function() {
                $('form').submit(function() {
                    callMe();
                    return false;
                });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T04:47:40.680

利用`.done()`

```
$('#'+i).load('getInfo.php', {term: d}, function(data){
     hold[i] = data;
     // alert("The number"+i+":"+hold[i]);
}).done(function(){ /* code goes here */ }); 
```

### **[看这里](http://api.jquery.com/deferred.done/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:47:33.037

您可以执行 ajax 请求并处理成功事件：

```
$.ajax({
            //post URL
            url: 'getInfo.php', 
            type: "GET",

            //assumes only one form on page
            data: {term: d},

            //success
            success: function (response) {              
             //do something
            }       
        }); 
```

# typescript - 无参数函数重载

> ID：15469882
> 
> 赞同：2
> 
> 时间：2013-03-18T04:42:37.517
> 
> 标签：typescript

如何在打字稿中指定无参数函数重载。我收到以下错误：

```
function f():number; // Error 
function f(string):number; // Okay
function f(x:any):any{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T04:47:27.450

如果重载的参数数量不同，则必须将附加参数标记为可选。以下将起作用：

```
function f():number; // Okay now 
function f(string):number; // Okay
function f(x?:any):any{

} 
```

# ios - 通过委托关闭其呈现的模式视图控制器后刷新 UIViewController 中的数据

> ID：15469884
> 
> 赞同：11
> 
> 时间：2013-03-18T04:42:45.903
> 
> 标签：ios, objective-c, delegates, protocols, presentmodalviewcontroller

我让委托工作，因为数据正在从模式传递到呈现视图控制器。但是呈现视图控制器没有显示它从模式中接收到的数据。我查看了其他帖子，他们说要使用委托/协议方法，但没有解释呈现的 VC 如何/为什么刷新。我假设我的代表设置不正确。否则，刷新数据的方法是什么？我已经检查过了，viewWillAppear 和 viewDidAppear 没有被调用。

SCCustomerDetailVC.h（展示 VC）

```
#import "SCCustomersVC.h"

@interface SCCustomerDetailVC : UIViewController <SCCustomersVCDelegate>

@property (atomic, strong) SCCustomer *customer;
@property (strong, nonatomic) IBOutlet UIButton *changeCustomerButton;

- (IBAction)changeCustomerButtonPress:(UIButton *)sender;

@end 
```

SCCustomerDetailVC.m（展示 VC）

```
- (IBAction)changeCustomerButtonPress:(UIButton *)sender 
{    
    UINavigationController *customersNC = [self.storyboard instantiateViewControllerWithIdentifier:@"customersNC"];
    SCCustomersVC *customersVC = (SCCustomersVC *)customersNC.topViewController;
    customersVC.delegate = self;
    [self presentViewController:customersNC animated:YES completion:nil];
}

//Protocol methods
- (void)passCustomer:(SCCustomer *)customer
{
    self.customer = customer;

    //At this point, self.customer has the correct reference

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

SCCustomersVC.h（模态 VC）

```
#import "SCCustomersVCDelegate.h"

@class SCCustomerDetailVC;

@interface SCCustomersVC : UIViewController <UITableViewDelegate, UITableViewDataSource, UISearchBarDelegate>

@property (weak, nonatomic) id <SCCustomersVCDelegate> delegate;

@end 
```

SCCustomersVC.m（模态VC）

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    SCCustomer *customer = [self customerAtIndexPath:indexPath];
    [self.delegate passCustomer:customer];
} 
```

SCCustomersVCDelegate.h

```
@class SCCustomer;

@protocol SCCustomersVCDelegate <NSObject>
@optional

- (void)passCustomer:(SCCustomer *)customer;

@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T05:23:55.060

我想你快到了。编辑 - 刚刚在[这里](https://stackoverflow.com/questions/7802673/ios-5-viewwillappear-is-not-called-after-dismissing-the-modal-in-ipad)了解到 viewWillAppear 行为在 iOS>5 中是不同的。您仍然希望视图会显示为使用您的模型状态更新您的视图，因为它需要在初始演示时执行此操作。

可以从模态 vc 或委托方法中调用它。因此，将代码添加到 viewWillAppear 以使用视图控制器的模型状态更新视图...

```
// SCCustomerDetailVC.m
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    // making up an IBOutlet called someLabel
    // making up a model method (description) that returns a string representing your model
    self.someLabel.text = [self.customer description];
} 
```

然后从提供的 vc 或委托中调用 viewViewWillAppear：

```
- (void)passCustomer:(SCCustomer *)customer
{
    self.customer = customer;
    [self viewWillAppear:YES];
    [self dismissViewControllerAnimated:YES completion:^{}];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T05:23:24.100

您应该在设置“客户”后重新加载您的 UI

```
- (void)passCustomer:(SCCustomer *)customer
{
    self.customer = customer;

    //At this point, self.customer has the correct reference

    [self dismissViewControllerAnimated:YES completion:^{
            // reload your UI here or call a method which will reload your ui
            // e.g. for tableView it will be [tableView reload];
        }];
} 
```

# php - Javascript textarea字数不启用提交按钮

> ID：15469892
> 
> 赞同：0
> 
> 时间：2013-03-18T04:43:29.443
> 
> 标签：php, javascript, html, forms

我正在尝试这样做，以便当用户在 textarea 中键入超过 10 个单词时，启用提交按钮。下面是我的代码摘录。即使那里有 10 多个单词，它也不让我提交。任何帮助，将不胜感激。

```
 <?php
                    if($auth = 1)
                    {
                        echo "<center><h1>Write Article</h1><br /></center>";
                        echo "<form method=\"post\" action=\"processarticle.php\" id=\"myform\" >";
                        echo "<b>Keywords:</b> " . $array['keywords'];
                        echo "<br />";
                        echo "<b>Purpose:</b> " . $array['purpose'];
                        echo "<br />";
                        echo "<b>Style:</b> " . $array['style'];
                        echo "<br />";
                        echo "<b>Instructions:</b> " . $array['instructions'];
                        echo "<br />";
                        echo "<b>Length:</b> " . $array['length'];
                        echo "<br />";
                        echo "<hr>";
                        echo "<textarea rows=35 cols=85 name=\"content\">";
                        echo "</textarea>";
                        echo "<br />";
                        echo "<input type=\"hidden\" name=\"refferer\" value=\"1\" />";
                        echo "<input type=\"hidden\" name=\"articleid\" value=\"" . $arid . "\" />";
                        echo "<input type=\"hidden\" name=\"articletitle\" value=\"" . $articletitle . "\" />";
                        echo "<input type=\"submit\" value=\"Submit Article\" id=\"submit\" name=\"submit\" />";
                        echo "</form>";
                    }

                ?>
                <br /><br /><br />
                <!-- /main -->
                </div>

            <!-- content -->
            </div>

        <!-- /content-out -->
        </div>

        <!-- footer -->
        <?php include($_SERVER['DOCUMENT_ROOT'] . '/includes/footer.php'); ?>
        </body>
            <script type="text/javascript">
                $('#myform').submit(function(event) {
                    var text = $("#content").val();
                    text = text.split(" ");
                    // check for at least 10 words
                    if(text.length < 10){
                        // prevent submit
                        event.preventDefault();
                        return false;
                    }
                });
            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:45:59.087

您已经使用过`#content`，但没有`id`为您的文本区域定义任何内容。定义一个 ID 并访问它。添加这样的`id`属性，

```
echo "<textarea rows=35 cols=85 name=\"content\" id=\"content\">"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:47:54.063

您尚未将内容定义为 Id .. 声明`#content`为文本区域的 id..

```
"<textarea rows=35 cols=85 name=\"content\" id=\"content\">"; 
```

//查找单词计数..

```
String input = $('content').val();
String[] elements = input.split(" ");

if(elements.length>10){
//your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:54:40.007

由于这是表单上的一个侦听器，并且 textarea 有一个名称，因此您可以将 textarea 的值读取为：

```
 var text = this.content.value; 
```

.

```
 text = text.split(" ");

    // check for at least 10 words
    if(text.length < 10){ 
```

这实际上只会检查是否有 10 个空格，如果你想检查看起来更像一个单词的东西，那么寻找单词字符串：

```
 var words = text.match(/\b\w+\b/g); 
```

然后将拆分为单词字符串；

```
 if (words && words.length < 10) { 
        ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T05:07:50.970

```
var text = encodeURIComponent($("#content").val()); 
```

# java - PreparedStatementCallback; JDBC Spring 中的错误 SQL 语法

> ID：15469899
> 
> 赞同：1
> 
> 时间：2013-03-18T04:44:38.043
> 
> 标签：java, spring, jdbc, prepared-statement

我有一个更新方法可以根据特定字段更新表的内容，但我遇到了以下异常。

代码是：

```
public void updateTaxoActive(String oldDesc, String description) {
    Logger.getLogger(TypeCategoryJDBCTemplate.class.getName()).log(Level.INFO, "old taxonomy code is {0} new description is {1}", new Object[]{oldDesc, description});
    String sql = "update product.typecategory set taxonomydescription = ? where taxonomydescription = ?";
    jdbcTemplateObject.update(sql, new Object[]{description,oldDesc},new TypeCategoryMapper());
} 
```

例外是：

```
Exception in thread "AWT-EventQueue-0" org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [update product.typecategory set taxonomydescription = ? where taxonomydescription = ?]; nested exception is com.ibm.db2.jcc.am.SqlSyntaxErrorException: [jcc][1091][10824][4.13.127] Invalid data conversion: Parameter instance [Ljava.lang.Object;@1dc421 is invalid for the requested conversion. ERRORCODE=-4461, SQLSTATE=42815
    at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:95)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:605)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:818)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:874)
    at org.springframework.jdbc.core.JdbcTemplate.update(JdbcTemplate.java:882)
    at com.ibm.quest.model.typecategory.TypeCategoryJDBCTemplate.updateTaxoActive(TypeCategoryJDBCTemplate.java:59)
    at com.ibm.quest.taxonomyupdate.ui.ApplicationWindow.updateButtonActionPerformed(ApplicationWindow.java:255)
    at com.ibm.quest.taxonomyupdate.ui.ApplicationWindow.access$800(ApplicationWindow.java:16)
    at com.ibm.quest.taxonomyupdate.ui.ApplicationWindow$10.actionPerformed(ApplicationWindow.java:218)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:702)
    at java.awt.EventQueue$4.run(EventQueue.java:700)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)
Caused by: com.ibm.db2.jcc.am.SqlSyntaxErrorException: [jcc][1091][10824][4.13.127] Invalid data conversion: Parameter instance [Ljava.lang.Object;@1dc421 is invalid for the requested conversion. ERRORCODE=-4461, SQLSTATE=42815
    at com.ibm.db2.jcc.am.id.a(id.java:677)
    at com.ibm.db2.jcc.am.id.a(id.java:60)
    at com.ibm.db2.jcc.am.id.a(id.java:103)
    at com.ibm.db2.jcc.am.oo.c(oo.java:2584)
    at com.ibm.db2.jcc.am.oo.setObject(oo.java:2363)
    at org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:365)
    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:217)
    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:145)
    at org.springframework.jdbc.core.ArgPreparedStatementSetter.doSetValue(ArgPreparedStatementSetter.java:65)
    at org.springframework.jdbc.core.ArgPreparedStatementSetter.setValues(ArgPreparedStatementSetter.java:46)
    at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:822)
    at org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement(JdbcTemplate.java:818)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:589)
    ... 43 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:35:45.033

你在做什么 TypeCategoryMapper ？

消除`,new TypeCategoryMapper()`

# android - Android 使用 AsyncTask 更新 UI

> ID：15469902
> 
> 赞同：0
> 
> 时间：2013-03-18T04:44:50.197
> 
> 标签：android, android-asynctask, android-ui

我想知道异步任务何时完成，以便我可以更新 UI。

有人可以帮忙吗？？？谢谢！！！

```
public String[] getinfo(int id) {

    String[] QueueNo = null;

    try {           
        new DLfromServer().execute("url link"); // this is the asynctask

        // want to do stuff here after the asynctask is completed
                    // actually I want to return a string result after the task is finished....

        }

    } catch (JSONException e) {
        Log.e("GetJSON", "Err:", e);
    }

    return QueueNo;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:48:37.020

> 想知道异步任务何时完成，以便我可以更新 UI。

是的，您可以使用在执行完成`onPostExecute`后调用 UI 线程的方法。`doInBackground`

如果您想在主 UI 线程上取回数据，请使用[AsyncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)方法执行 AsyncTask，因为此方法会在 UI 线程上等待直到`doInBackground`执行完成。

```
 String str_result= new DLfromServer().execute("url link").get();
    // now use str_result for Updating result 
```

**注意：-**您需要`AsyncTask.get()`在线程内部调用而不是主 UI 线程，否则调用 get() 方法将冻结主线程，直到`doInBackground`执行完成

# java - 打开窗口时运行的 Java 方法

> ID：15469904
> 
> 赞同：0
> 
> 时间：2013-03-18T04:45:26.247
> 
> 标签：java, swing, user-interface, jframe, show

我需要设置一个监听器，它可以在每次`show()`调用方法来显示窗口时调用一个方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T04:48:56.667

你可能会对`WindowListener`.

从[教程“如何编写窗口侦听器”中](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)：

> 以下窗口活动或状态可以在窗口事件之前：
> 
> *   打开一个窗口——第一次显示一个窗口。
> *   关闭窗口 — 从屏幕上移除窗口。
> *   图标化窗口 — 将窗口缩小为桌面上的图标。
> *   取消图标化窗口 — 将窗口恢复到其原始大小。
> *   焦点窗口 — 包含“焦点所有者”的窗口。
> *   激活的窗口（框架或对话框）——这个窗口要么是焦点窗口，要么拥有焦点窗口。
> *   已停用的窗口 - 此窗口已失去焦点。有关焦点的更多信息，请参阅 AWT 焦点子系统规范。

如果您不想实现所有这些，可以使用 a [`WindowAdapter`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowAdapter.html)，如下所示：

```
myFrame.addWindowListener(new WindowAdapter() {
    @Override
    public void windowOpened(WindowEvent we) {
        System.out.println("this window was opened for the first time");
    }

    @Override
    public void windowActivated(WindowEvent we) {
        System.out.println("this window or a subframe was focused");
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T05:43:17.383

添加`ComponentListener`并检查`componentShown`事件。请注意， a`WindowListener`只会在**第一次**打开窗口时触发，而***每次***`ComponentListener`都会触发。

 *有关详细信息，请参阅[如何编写组件侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/componentlistener.html)。

此源演示了两个侦听器。

```
import java.awt.*;
import java.awt.event.*;
import java.util.logging.*;
import javax.swing.*;
import javax.swing.event.*;

class DetectVisibility {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new BorderLayout());
                final Logger log = Logger.getAnonymousLogger();

                ComponentListener cl = new ComponentListener() {

                    @Override
                    public void componentResized(ComponentEvent e) {
                        log.log(Level.INFO, e.toString());
                    }

                    @Override
                    public void componentMoved(ComponentEvent e) {
                        log.log(Level.INFO, e.toString());
                    }

                    @Override
                    public void componentShown(ComponentEvent e) {
                        log.log(Level.INFO, e.toString());
                    }

                    @Override
                    public void componentHidden(ComponentEvent e) {
                        log.log(Level.INFO, e.toString());
                    }
                };

                WindowListener we = new WindowListener() {

                    @Override
                    public void windowOpened(WindowEvent e) {
                        log.log(Level.INFO, e.toString());
                    }

                    @Override
                    public void windowClosing(WindowEvent e) {
                        log.log(Level.INFO, e.toString());
                    }

                    @Override
                    public void windowClosed(WindowEvent e) {
                        log.log(Level.INFO, e.toString());
                    }

                    @Override
                    public void windowIconified(WindowEvent e) {
                        log.log(Level.INFO, e.toString());
                    }

                    @Override
                    public void windowDeiconified(WindowEvent e) {
                        log.log(Level.INFO, e.toString());
                    }

                    @Override
                    public void windowActivated(WindowEvent e) {
                        log.log(Level.INFO, e.toString());
                    }

                    @Override
                    public void windowDeactivated(WindowEvent e) {
                        log.log(Level.INFO, e.toString());
                    }
                };

                final JWindow w = new JWindow();
                w.setSize(100,100);
                w.setLocation(10,10);
                w.addComponentListener(cl);
                w.addWindowListener(we);

                final JCheckBox show = new JCheckBox("Show Window");
                ChangeListener chl = new ChangeListener() {

                    @Override
                    public void stateChanged(ChangeEvent e) {
                        w.setVisible(show.isSelected());
                    }
                };
                show.addChangeListener(chl);
                gui.add(show);

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T04:48:59.767

有一个名为[WindowListener的接口，这是一个在](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html)[打开](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html#windowOpened%28java.awt.event.WindowEvent%29)窗口时触发的事件。您可以在第一个链接中找到所有事件。

**编辑 ：**

WindowListener 只工作一次。根据@Andrew Thompson 的帖子，我们应该使用 ComponentListener。当然**是最好的答案**。*

# c++ - VS2012 中不能包含 ppltasks.h C++11 头文件

> ID：15469909
> 
> 赞同：0
> 
> 时间：2013-03-18T04:46:14.187
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, ctp

在使用 Visual Studio 2012 的 C++11 功能时，我在包含“ppltasks.h”头文件时遇到了奇怪的错误（通过“未来”头文件包含：

```
 Main.cpp
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\ppltasks.h(3306): error C2512: 'Concurrency::details::_PPLTaskHandle<Concurrency::details::_NormalizeVoidToUnitType<void>::_Type,Concurrency::task<std::pair<Concurrency::details::_Unit_type,Concurrency::details::_CancellationTokenState *>>::_ContinuationTaskHandle<_InternalReturnType,_TaskType,_Function,Concurrency::details::_FunctionTypeTraits<_Function,_ReturnType>::_Takes_task,Concurrency::details::_TaskTypeTraits<void,false>::_AsyncKind>,Concurrency::details::_ContinuationTaskHandleBase>' : no appropriate default constructor available
1>          with
1>          [
1>              _InternalReturnType=std::pair<Concurrency::details::_Unit_type,Concurrency::details::_CancellationTokenState *>
1>  ,            _Function=Concurrency::||::<lambda_06496b162c644bf2f90c850c3dfa7d5c>
1>  ,            _ReturnType=std::pair<Concurrency::details::_Unit_type,Concurrency::details::_CancellationTokenState *>
1>          ] 
```

错误更长，但你明白了它的要点。有没有其他人因为简单地包含“未来”标头而遇到过这样的错误消息，是否有已知的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:23:14.310

事实证明，项目设置必须启用语言扩展才能正确编译标头（截至目前）。

# objective-c - UIToolbar 在横向上不会变小

> ID：15469910
> 
> 赞同：0
> 
> 时间：2013-03-18T04:46:16.090
> 
> 标签：objective-c, uiviewcontroller, rotation, uitoolbar, autorotate

在我的主视图中，我在框架的底部添加了一个普通的 UIToolbar，在横向它不会变小吗？这是因为我不提供风景图片还是我错过了其他东西？UINavigationController 中的所有其他工具栏都在横向更改大小。

下面是我如何将这个添加到屏幕上。

```
toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, SCREEN_HEIGHT-64, SCREEN_WIDTH, 44)];
toolbar.translatesAutoresizingMaskIntoConstraints = YES;
[self.view addSubview:toolbar];
[self setupToolbarItems]; 
```

setupToolbarItems 只是为栏按钮创建一些图像并设置它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T04:49:47.887

您自己添加的 UIToolbar 不会神奇地改变高度。如果您希望它这样做，您必须自己更改高度以响应应用程序方向的变化。

您观察到的行为，即条形改变高度，是 UINavigationController 的一个特性；它会根据方向变化改变其导航栏和工具栏的高度（如我的书中所述：[http](http://www.apeth.com/iOSBook/ch25.html#SBbarMetrics) ://www.aeth.com/iOSBook/ch25.html#SBbarMetrics ）。但是这个 UIToolbar 不属于 UINavigationController 所以它的高度不会自动发生。由你决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T04:51:03.173

这是因为您正在创建工具栏的框架，但在旋转视图时没有再次设置它。您需要检查屏幕何时旋转使用`[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(resize) name:UIDeviceOrientationDidChangeNotification object:nil];`

然后在您的`-(void)resize;`方法中，您需要将工具栏的大小调整为新窗口的大小。

# ruby-on-rails - 是否可以在 rails 中仅显示图像 URL 的一部分？

> ID：15469912
> 
> 赞同：0
> 
> 时间：2013-03-18T04:46:22.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, carrierwave

我正在使用 Carrierwave 和 S3 来允许人们上传图像，并且图像 URL 显示为“ [https://myapp.s3.amazonaws.com/image/53/98ccfeca46.jpg](https://myapp.s3.amazonaws.com/image/53/98ccfeca46.jpg) ”。

我想做两件事之一。

1.  我只想显示“/image/53/98ccfeca46.jpg”

或 2\. 使用 CName 将 URL 重命名为不显示“s3.amazonaws.com”，以便图像 URL 为 [https://myapp.com/image/53/98ccfeca46.jpg](https://myapp.com/image/53/98ccfeca46.jpg)

我怎样才能实现这些？是否可以在 .com 之后立即剪切图像 URL？我正在使用 <%= link_to xyz.image % > 来显示 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:56:00.210

您可以创建一个帮助方法来显示 url，并使用 string sub 来切断 url 的第一部分。

因此，在您的助手文件夹中，在相应模型的助手中，您可能具有类似的功能

```
def show_url(url)
  return url.sub("https://myapp.s3.amazonaws.com", "")
end 
```

然后在您的助手中，您将拥有`<%= link_to show_url(xyz.image) %>`

或者确实是类似的东西，但使用正则表达式

```
def show_url(url)
  return url.match(/.com(.+)/)[1]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:56:52.963

如果您使用的是carrierwave，则可以调用`.path`以检索图像的路径。我在本地尝试过，效果很好，但我不确定它是否可以在生产中使用。尝试这个：

```
<%= link_to xyz.image.path %> 
```

或者，您可以使用 CloudFront 为您的 S3 文件提供服务，这允许您将一堆自定义 CNAME 添加到您的分配中，这样您就可以拥有`assets.myapp.com/xyz.jpg`

# ms-access-2007 - 是否可以通过Rapid SQL连接ms访问

> ID：15469913
> 
> 赞同：0
> 
> 时间：2013-03-18T04:46:32.770
> 
> 标签：ms-access-2007

尝试通过 Rapid SQL 连接 ms access 数据库时出现登录失败错误。我使用用户 ID 和密码创建了 ODBC 连接，然后尝试了。

我想知道 Rapid SQL 是否支持 ms Access

感谢您的评论

干杯

沙巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:38:59.327

可以通过以下方式连接到 MS Access`ODBC connection (MS Access Driver(*.mdb, *.accdb))`

# java - Web服务中的实例变量

> ID：15469918
> 
> 赞同：0
> 
> 时间：2013-03-18T04:47:14.160
> 
> 标签：java, web-services

我对网络服务中的一个问题感到震惊。我有一个计数变量声明为 bean 中的成员变量。每次调用 web 服务时，我都会增加 count 的值。新会话的 count 变量未设置为零。它继续为新会话增加。你能告诉我如何将计数的值设置为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:57:49.113

你可以使用这个：

```
HttpSession session = request.getSession();
if (session.isNew()) {
    count = 0;
} 
```

# c# - 我应该使用 Try Catch Block 来实现我的业务逻辑吗？

> ID：15469919
> 
> 赞同：1
> 
> 时间：2013-03-18T04:47:22.360
> 
> 标签：c#, java, c++

假设我需要这样的东西。（这个代码是错误的，但只是一个例子）。这段代码不是我的问题！它只是一个例子。我知道如何使用 if else 语句来编写它。我正在考虑一个更复杂的上下文！

```
int[] arraynums = new int[3] {1,2,3};
int Sample = 0;
try
{
Sample = arraynums[3];
}
catch
{
Sample=4;
} 
```

在这里，我可以使用不会出错的替代逻辑。但是如果我使用 try catch 块，我仍然可以减少代码。是否建议使用 try catch 块来解决逻辑？如果不是，那为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T05:06:08.660

由于以下原因，您不应使用异常来实现业务逻辑（或流控制）：

*   这不是一个好习惯。这会让其他开发人员感到困惑，即使你在 6 个月后也会感到困惑。（这违反了[PrincipleOfLeastAstonishment](http://c2.com/cgi/wiki?PrincipleOfLeastAstonishment)。这使得程序员更难阅读。）
*   例外是昂贵的。
*   糟糕的设计。

其他帖子中有相当数量的材料：

*   [使用异常进行流量控制](https://stackoverflow.com/questions/9306913/using-exceptions-for-flow-control)
*   [为什么不使用异常作为常规控制流？](https://stackoverflow.com/questions/729379/why-not-use-exceptions-as-regular-flow-of-control)

有关于它的整个维基：[http ://c2.com/cgi/wiki?DontUseExceptionsForFlowControl](http://c2.com/cgi/wiki?DontUseExceptionsForFlowControl)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T04:49:40.387

为什么不使用 if 语句？

```
if(arraynums.length > 3)
{
    Sample = arraynums[3];
}
else
{
    Sample = 4;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T04:50:46.743

我假设您的代码相当做作，因为它很容易毫无例外地重写它。异常对于运行时来说是相对昂贵的。如果被滥用，它们可能会不必要地减慢您的代码。通常，您应该在允许抛出异常情况之前检查它们。

推荐阅读：

*   [使用异常（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173161.aspx)
*   [处理异常的最佳实践](http://msdn.microsoft.com/en-us/library/seyhszts%28v=vs.110%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T04:50:00.473

就我个人而言，我只会在错误或不确定对象在运行时是否可用的情况下使用 try catch。

在您的代码中，您最好将 Sample = 4 设置为默认值并在将其设置为 arraynums[3] 之前进行检查。

# c# - MemoryCache - 如何更改其物理内存限制？

> ID：15469928
> 
> 赞同：0
> 
> 时间：2013-03-18T04:48:09.317
> 
> 标签：c#, caching

我有这个：

```
var crumbsCache = new MemoryCache("breadCrumbsNames", new NameValueCollection { { "PhysicalMemoryLimit", "200" } }); 
```

当我在运行时检查这个对象时，它的 memorylimit 设置为 98。总是。我怎样才能提高这个限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T18:19:25.970

您的 NameValueCollection 项错误，请将**PhysicalMemoryLimit**更改为**physicalMemoryLimitPercentage**并且*physicalMemoryLimitPercentage*值**不能大于**“ **100”。**

# c# - WPF 文本框验证客户端

> ID：15469934
> 
> 赞同：4
> 
> 时间：2013-03-18T04:48:36.093
> 
> 标签：c#, wpf, textbox, wpf-controls

我做了文本框验证。

但我想在各个阶段的文本框上制作一些样式。

当我的页面第一次加载时，文本框看起来像以下样式。 ![在此处输入图像描述](../Images/bd3f0366e84cbf729bcf2fdfa9f2d29d.png)

当用户开始输入值并且如果值错误，整个文本框背景将是红色的。 ![在此处输入图像描述](../Images/27599477221356da62a6acb7d20cf164.png)

当用户输入正确的值时，文本框有 2PX 的绿色边框。
![在此处输入图像描述](../Images/76bba21259a7d0252afebd72640e82af.png)

我正在使用以下样式：

```
 <Style x:Key="TxtEmailStyle" TargetType="{x:Type TextBox}">
        <Setter Property="Background" Value="#2d2f34"></Setter>
        <Setter Property="Foreground" Value="White"></Setter>
        <Setter Property="TextBlock.FontSize" Value="14" />
        <Setter Property="Padding" Value="5" />
        <Setter Property="BorderBrush" Value="Green"></Setter>
        <Setter Property="BorderThickness" Value="2"></Setter>
        <Setter Property="Validation.ErrorTemplate">
            <Setter.Value>
                <ControlTemplate>
                    <DockPanel LastChildFill="True">
                        <TextBlock DockPanel.Dock="Right" 
                        Foreground="Orange"
                        FontSize="12pt">
                        !!!!
                        </TextBlock>
                        <Border BorderBrush="Green" BorderThickness="1">
                            <AdornedElementPlaceholder />
                        </Border>
                    </DockPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsFocused" Value="true">
                <Setter Property="Background" Value="#56585e" />
            </Trigger>
            <Trigger Property="IsMouseOver" Value="true">
                <Setter Property="Background" Value="#07839a" />
            </Trigger>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip"
        Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                        Path=(Validation.Errors)[0].ErrorContent}"/>
                <Setter Property="Background" Value="#cb0b38"></Setter>
            </Trigger>
            <!--<Trigger Property="Validation.HasError" Value="false">
                <Setter Property="BorderBrush" Value="Green"></Setter>
                <Setter Property="BorderThickness" Value="2"></Setter>
                <Setter Property="Background" Value="#2d2f34"></Setter>
            </Trigger>-->

        </Style.Triggers>
    </Style> 
```

以下是我的文本框

```
 <TextBox x:Name="txtPlayerID"  HorizontalAlignment="Left" Height="30" TextWrapping="Wrap" 
                                     VerticalContentAlignment="Center"
                    Style="{StaticResource TxtEmailStyle}" VerticalAlignment="Top" Width="228" FontFamily="Arial Regular"
                    RenderTransformOrigin="0.408,-2.455" FontSize="14"
                                     Margin="27,0,0,0">

                                <TextBox.Text>

                                    <Binding Path="playerID" Source="{StaticResource Register}"
                          ValidatesOnDataErrors="True"     NotifyOnValidationError="True"
                         UpdateSourceTrigger="PropertyChanged">
                                        <Binding.ValidationRules>

                                            <ExceptionValidationRule/>
                                        </Binding.ValidationRules>
                                    </Binding>
                                </TextBox.Text>
                            </TextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:01:51.400

一个棘手/丑陋的方法是使用故事板（可能很棘手，因为您不想要动画，但您可以将动画时间更改为无限）下面是代码片段：

```
<Storyboard x:Key="ChangeBkColor" Storyboard.TargetProperty="(TextBox.Background)">
    <ColorAnimation Storyboard.TargetProperty="Background.Color" 
             From="Red" To="Red" Duration="0:0:10"/> <!--Change 10 secs to yours-->
</Storyboard> 
```

在某处，例如在文本更改事件处理程序中

```
Storyboard sb = this.FindResource("ChangeBkColor") as Storyboard;
if (sb != null && SomeCondition1)  <!--SomeCondition1: for red background-->
{
     Storyboard.SetTarget(sb, this.txtPlayerID);
     sb.Begin();  // Here comes the effect!
} 
```

您应该为您的案例创建两个故事板，并在文本更改处理程序中，说明什么条件，并有选择地播放故事板。

# php - 如何创建在 Windows 中运行 PHP 代码的快捷方式？

> ID：15469936
> 
> 赞同：3
> 
> 时间：2013-03-18T04:48:45.000
> 
> 标签：php, windows

我编写了一些 PHP 来根据来自逗号分隔值 (.csv) 文件的输入生成具有多个页面的单个 PDF 文件。

不熟悉编程的人会经常运行 PHP 来生成 PDF 文件。该人将负责在生成 CSV 文件之前对其进行更改。

我需要知道如何在 Windows 中为他/她提供快捷方式，以便当他/她单击它时，PHP 应该执行并以硬编码路径生成 PDF 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:51:24.827

只需创建页面的快捷方式，例如

```
http://www.example.com/mypdf.php 
```

您甚至可以通过键入以下之一作为快捷方式位置来使用特定浏览器打开链接：

```
chrome http://www.example.com/mypdf.php 
```

```
firefox http://www.example.com/mypdf.php 
```

```
iexplore http://www.example.com/mypdf.php 
```

![一个](../Images/fe07b5a17ea73a4f07b8809e9b71334f.png)

或者，如果您确实仅将 PHP 作为 CLI 运行，请参阅 @sectus 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:51:38.813

您可以在文件本身或执行 php bin 上创建快捷方式。检查[Microsoft Windows 上的命令行 PHP](http://php.net/manual/en/install.windows.commandline.php)。

只需使用 创建快捷方式`C:\PHP5\php.exe -f "C:\PHP Scripts\script.php" -- -arg1 -arg2 -arg3`，但这将取决于位置。因此，您可以创建与 php 文件的关联，并为您的脚本创建快捷方式。

或者您可以启动网络服务器（[php web-server](http://php.net/manual/en/features.commandline.webserver.php)）并将脚本链接放入浏览器中的收藏夹。

# aem - 如何从自定义 jsp Java 类访问 XSSAPI？

> ID：15469941
> 
> 赞同：0
> 
> 时间：2013-03-18T04:49:12.393
> 
> 标签：aem

我正在使用[http://www.cqblueprints.com/xwiki/bin/view/Blue+Prints/Writing+A+JSP+Custom+Tag+Library](http://www.cqblueprints.com/xwiki/bin/view/Blue+Prints/Writing+A+JSP+Custom+Tag+Library)创建一个自定义标签库，以从我的自定义组件中生成防 XSS 链接。我已经把它放到了一个标签上，因为我需要做一些其他的工作并避免在 JSP 文件上编写脚本（我在最后发布了代码）。

我想使用我的 Java 类中的 XSSAPI，但是查看[XSSAPI 的 javadoc](http://dev.day.com/docs/en/cq/current/javadoc/com/adobe/granite/xss/XSSAPI.html)我发现它是一个接口；在 JSP 文件中使用它时，它是一个初始化调用的对象`<cq:defineObjects/>`。

有人对如何做到这一点有任何想法吗？XSSAPI 类中有一个方法被调用`getRequestSpecificAPI(slingRequest)`，但它不是静态的，我现在已经没有想法了。

```
@JspTag
public class FixInternalLinkTag extends CqSimpleTagSupport {

    private String pathToPage;

    @Override
    public void doTag() throws JspException, IOException {    

        XSSAPI xssAPI; // ToDo how to get a reference to this?
        urlPointingToPage = xssAPI.getValidHref(urlPointingToPage);

        getJspWriter().write(urlPointingToPage);
    }

    public String getPathToPage() {
        return pathToPage;
    }

    @JspTagAttribute(required = true, rtexprvalue = true)
    public void setPathToPage(String pathToPage) {
        this.pathToPage = pathToPage;
    } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:40:54.887

如果您将标记类设为 osgi 服务

```
@Component(immediate = true, metatype = true, description = "User Group Finder")
@Service
public class MyClass { ... 
```

然后你可以使用

```
@Reference
XSSAPI xssapi; 
```

拉入 XSSAPI 的实现。然后你就可以使用它了

```
xssapi.getRequestSpecificAPI(slingRequest); 
```

# android - 使用 3 个点（源点、目的地点和途经点）的 Android 谷歌路线

> ID：15469942
> 
> 赞同：1
> 
> 时间：2013-03-18T04:49:31.693
> 
> 标签：android, google-maps, routes

我正在使用谷歌地图来显示两点之间的路线。现在在我的应用程序中，我想使用源点、目标点和通过点在地图中绘制路线。请帮助我。任何帮助，将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:01:43.153

检查这个：

[答案：使用 Google Maps Android API v2 在两点之间绘制路径](https://stackoverflow.com/questions/14702621/answer-draw-path-between-two-points-using-google-maps-android-api-v2#answer-14702636)

但是修改 makeURL 方法以使用

[https://developers.google.com/maps/documentation/directions/#Waypoints](https://developers.google.com/maps/documentation/directions/#Waypoints)

```
makeURL(double sourceLat, double sourceLng, double viaLat, double viaLng, double DestLat, double DestLng);
drawPath(result); 
```

# java - 如何读取包含转义字符和坐标值的复杂 JSON 字符串

> ID：15469952
> 
> 赞同：1
> 
> 时间：2013-03-18T04:50:06.990
> 
> 标签：java, json

如何在 JAVA 中读取这个复杂的 JSON 字符串？

```
 "graphSpace": "[[{\"rectangle\":\"{\\n  \\\"minX\\\": 0.0,\\n  \\\"minY\\\": 0.0,\\n  \\\"maxX\\\": 0.0,\\n  \\\"maxY\\\": 0.0\\n}\",\"contents\":\"\",\"rights\":\"[]\",\"lefts\":\"[]\",\"tops\":\"[]\",\"downs\":\"[]\",\"annotation\":\"{\\n  \\\"id\\\": 504,\\n  \\\"type\\\": \\\"line\\\"\\n}\"},{\"rectangle\":\"{\\n  \\\"minX\\\": 0.0,\\n  \\\"minY\\\": 0.0,\\n  \\\"maxX\\\": 0.0,\\n  \\\"maxY\\\": 0.0\\n}\",\"contents\":\"\",\"rights\":\"[]\",\"lefts\":\"[{\\\"id\\\":504}]\",\"tops\":\"[{\\\"id\\\":504}]\",\"downs\":\"[]\",\"annotation\":\"{\\n  \\\"id\\\": 242,\\n  \\\"type\\\": \\\"line\\\"\\n}\"}],[{\"rectangle\":\"{\\n  \\\"minX\\\": 430.0,\\n  \\\"minY\\\": 146.0,\\n  \\\"maxX\\\": 940.0,\\n  \\\"maxY\\\": 197.0\\n}\",\"contents\":\"Center Hoist Co.\",\"rights\":\"[{\\\"id\\\":36},{\\\"id\\\":38},{\\\"id\\\":52},{\\\"id\\\":57}]\",\"lefts\":\"[]\",\"tops\":\"[{\\\"id\\\":504}]\",\"downs\":\"[{\\\"id\\\":13},{\\\"id\\\":16},{\\\"id\\\":19},{\\\"id\\\":22},{\\\"id\\\":25},{\\\"id\\\":27},{\\\"id\\\":29},{\\\"id\\\":96},{\\\"id\\\":99},{\\\"id\\\":101},{\\\"id\\\":110},{\\\"id\\\":115},{\\\"id\\\":141},{\\\"id\\\":136},{\\\"id\\\":167},{\\\"id\\\":188},{\\\"id\\\":204},{\\\"id\\\":235},{\\\"id\\\":237},{\\\"id\\\":291},{\\\"id\\\":293},{\\\"id\\\":344},{\\\"id\\\":346},{\\\"id\\\":397},{\\\"id\\\":399},{\\\"id\\\":558},{\\\"id\\\":626}]\",\"annotation\":\"{\\n  \\\"id\\\": 10,\\n  \\\"type\\\": \\\"line\\\"\\n}\"},{\"rectangle\":\"{\\n  \\\"minX\\\": 1285.0,\\n  \\\"minY\\\": 143.0,\\n  \\\"maxX\\\": 1532.0,\\n  \\\"maxY\\\": 195.0\\n}\",\"contents\":\"4sO^ Employee\",\"rights\":\"[{\\\"id\\\":52},{\\\"id\\\":57}]\",\"lefts\":\"[{\\\"id\\\":10}]\",\"tops\":\"[{\\\"id\\\":504}]\",\"downs\":\"[{\\\"id\\\":38},{\\\"id\\\":41},{\\\"id\\\":43},{\\\"id\\\":93},{\\\"id\\\":96},{\\\"id\\\":99},{\\\"id\\\":101},{\\\"id\\\":120},{\\\"id\\\":146},{\\\"id\\\":172},{\\\"id\\\":193},{\\\"id\\\":209},{\\\"id\\\":214},{\\\"id\\\":254},{\\\"id\\\":310},{\\\"id\\\":363},{\\\"id\\\":416},{\\\"id\\\":572},{\\\"id\\\":604},{\\\"id\\\":626}]\",\"annotation\":\"{\\n  \\\"id\\\": 36,\\n  \\\"type\\\": \\\"line\\\"\\n}\"},{\"rectangle\":\"{\\n  \\\"minX\\\": 1394.0,\\n  \\\"minY\\\": 194.0,\\n  \\\"maxX\\\": 1487.0,\\n  \\\"maxY\\\": 221.0\\n}\",\"contents\":\"Owned\",\"rights\":\"[{\\\"id\\\":36}]\",\"lefts\":\"[{\\\"id\\\":36},{\\\"id\\\":13},{\\\"id\\\":10}]\",\"tops\":\"[{\\\"id\\\":10},{\\\"id\\\":36},{\\\"id\\\":504}]\",\"downs\":\"[{\\\"id\\\":41},{\\\"id\\\":43},{\\\"id\\\":93},{\\\"id\\\":96},{\\\"id\\\":99},{\\\"id\\\":101},{\\\"id\\\":120},{\\\"id\\\":146},{\\\"id\\\":172},{\\\"id\\\":193},{\\\"id\\\":214},{\\\"id\\\":626}]\",\"annotation\":\"{\\n  \\\"id\\\": 38,\\n  \\\"type\\\": \\\"line\\\"\\n}\"},{\"rectangle\":\"{\\n  \\\"minX\\\": 1833.0,\\n  \\\"minY\\\": 163.0,\\n  \\\"maxX\\\": 1990.0,\\n  \\\"maxY\\\": 193.0\\n}\",\"contents\":\"Invoice #\",\"rights\":\"[{\\\"id\\\":57}]\",\"lefts\":\"[{\\\"id\\\":36},{\\\"id\\\":10}]\",\"tops\":\"[{\\\"id\\\":10},{\\\"id\\\":36},{\\\"id\\\":504}]\",\"downs\":\"[{\\\"id\\\":63},{\\\"id\\\":74},{\\\"id\\\":86},{\\\"id\\\":93},{\\\"id\\\":96},{\\\"id\\\":99},{\\\"id\\\":125},{\\\"id\\\":151},{\\\"id\\\":198},{\\\"id\\\":224},{\\\"id\\\":548},{\\\"id\\\":577},{\\\"id\\\":614},{\\\"id\\\":626}]\",\"annotation\":\"{\\n  \\\"id\\\": 52,\\n  \\\"type\\\": \\\"line\\\"\\n}\"},{\"rectangle\":\"{\\n  \\\"minX\\\": 2226.0,\\n  \\\"minY\\\": 159.0,\\n  \\\"maxX\\\": 2411.0,\\n  \\\"maxY\\\": 192.0\\n}\",\"contents\":\"00760287\",\"rights\":\"[]\",\"lefts\":\"[{\\\"id\\\":52},{\\\"id\\\":36},{\\\"id\\\":10}]\",\"tops\":\"[{\\\"id\\\":10},{\\\"id\\\":36},{\\\"id\\\":504}]\",\"downs\":\"[{\\\"id\\\":68},{\\\"id\\\":79},{\\\"id\\\":86},{\\\"id\\\":130},{\\\"id\\\":156},{\\\"id\\\":198},{\\\"id\\\":229},{\\\"id\\\":282},{\\\"id\\\":338},{\\\"id\\\":391},{\\\"id\\\":444},{\\\"id\\\":582},{\\\"id\\\":619},{\\\"id\\\":626}]\",\"annotation\":\"{\\n  \\\"id\\\": 57,\\n  \\\"type\\\": \\\"line\\\"\\n}\"}],[{\"rectangle\":\"{\\n  \\\"minX\\\": 438.0,\\n  \\\"minY\\\": 209.0,\\n  \\\"maxX\\\": 837.0,\\n  \\\"maxY\\\": 245.0\\n}\",\"contents\":\"Hydraulic Equipment\",\"rights\":\"[{\\\"id\\\":38}]\",\"lefts\":\"[]\",\"tops\":\"[{\\\"id\\\":10},{\\\"id\\\":504}]\",\"downs\":\"[{\\\"id\\\":16},{\\\"id\\\":19},{\\\"id\\\":22},{\\\"id\\\":25},{\\\"id\\\":27},{\\\"id\\\":29},{\\\"id\\\":96},{\\\"id\\\":99},{\\\"id\\\":101},{\\\"id\\\":110},{\\\"id\\\":115},{\\\"id\\\":141},{\\\"id\\\":136},{\\\"id\\\":167},{\\\"id\\\":188},{\\\"id\\\":204},{\\\"id\\\":235},{\\\"id\\\":237},{\\\"id\\\":291},{\\\"id\\\":293},{\\\"id\\\":344},{\\\"id\\\":346},{\\\"id\\\":397},{\\\"id\\\":399},{\\\"id\\\":558},{\\\"id\\\":626}]\",\"annotation\":\"{\\n  \\\"id\\\": 13,\\n  \\\"type\\\": \\\"line\\\"\\n}\"}],[{\"rectangle\":\"{\\n  \\\"minX\\\": 441.0,\\n  \\\"minY\\\": 261.0,\\n  \\\"maxX\\\": 724.0,\\n  \\\"maxY\\\": 289.0\\n}\",\"contents\":\"4782 Bourne Dr.\",\"rights\":\"[{\\\"id\\\":43},{\\\"id\\\":41},{\\\"id\\\":63},{\\\"id\\\":68}]\",\"lefts\":\"[]\",\"tops\":\"[{\\\"id\\\":13},{\\\"id\\\":10},{\\\"id\\\":504}]\",\"downs\":\"[{\\\"id\\\":19},{\\\"id\\\":22},{\\\"id\\\":25},{\\\"id\\\":27},{\\\"id\\\":29},{\\\"id\\\":96},{\\\"id\\\":99},{\\\"id\\\":101},{\\\"id\\\":110},{\\\"id\\\":115},{\\\"id\\\":141},{\\\"id\\\":136},{\\\"id\\\":167},{\\\"id\\\":188},{\\\"id\\\":204},{\\\"id\\\":235},{\\\"id\\\":237},{\\\"id\\\":291},{\\\"id\\\":293},{\\\"id\\\":344},{\\\"id\\\":346},{\\\"id\\\":397},{\\\"id\\\":399},{\\\"id\\\":558},{\\\"id\\\":626}]\",\"annotation\":\"{\\n  \\\"id\\\": 16,\\n  \\\"type\\\": \\\"line\\\"\\n}\"},{\"rectangle\":\"{\\n  \\\"minX\\\": 1296.0,\\n  \\\"minY\\\": 284.0,\\n  \\\"maxX\\\": 1539.0,\\n  \\\"maxY\\\": 313.0\\n}\",\"contents\":\"Registered\",\"rights\":\"[{\\\"id\\\":63} 
```

这甚至不完整。但我只想根据这个矩形和坐标值阅读需要的东西，比如***中心提升。***知道如何解析这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:58:02.010

可以使用以下示例：

```
 JsonObject obj= gson.fromJson(DATA,JsonObject.class); 
```

在这个 DATA 中是复杂的 Json 字符串，而 JsonObject 是包含与 jspn 字符串匹配的变量的类。

变量名区分大小写意味着它应该与 json 元素匹配。

在您的情况下， Jsonobject.java 将包含以下变量：

```
Array of graphSpace

rectangle
contents etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:52:06.653

您可能应该查看 stackexchange 论坛：

[将 JSON 转换为 Java](https://stackoverflow.com/questions/1688099/converting-json-to-java/1688182#1688182)

[在java中读取一个JSON对象](https://stackoverflow.com/questions/1798038/read-a-json-object-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T04:53:19.787

使用[JSON 解析器](https://github.com/douglascrockford/JSON-java)。JSON 过于复杂，无法以特别的方式轻松正确解析。

# python - 无法在 OpenERP 中继承 HR.Employee

> ID：15469954
> 
> 赞同：1
> 
> 时间：2013-03-18T04:50:43.740
> 
> 标签：python, xml, openerp

请告诉我我的错误在哪里。我需要添加一个名为`kanganyname`（经理姓名）的新字段。但这给了我一个错误。我按照开发者指南进行了修改：

这是我的 view.xml

```
<record model="ir.ui.view" id="namelist_dailyupdate">
    <field name="name">checkroll.daily.update.form</field>
    <field name="model">checkroll.daily.update</field>
    <field name="inherit_id" ref="hr.view_employee_form" />
    <field name="type">form</field>
    <field name="arch" type="xml">
        <form string="daily_update">
            <field name="kanganyname" />
        </form>
    </field>
</record>

<record model="ir.actions.act_window" id="action_inherit_ex">
    <field name="name">checkroll.daily.update.form</field>
    <field name="model">checkroll.daily.update</field>
    <field name="view_type">form</field>
    <field name="view_mode">form</field>
</record> 
```

这是我的模型课。

```
class dailyupdate(osv.osv):
    _name = "checkroll.daily.update"
    _inherit = "hr.employee"
    _description = "This table is for daily update"
    _columns = {
        'kanganyname': fields.char('Kangany Name', size=256, required=True)
    }

dailyupdate() 
```

这是我的错误：

> 回溯（最后一次调用）：
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/sql_db.py”，第 226 行，在执行
> res = self._obj.execute(query, params)
> IntegrityError ：“res_model”列中的空值违反非空约束
> 
> 2013-03-18 04:10:16,830 4709 错误 OpenERP_DB openerp.tools.convert：/home/priyan/Software/openerp-7.0-20130309-002120/ 中的解析错误openerp/addons/checkroll/checkroll_view.xml:179：
> 
> checkroll.daily.update.form
> checkroll.daily.update
> 表单
> 表单
> 
> Traceback（最近一次通话最后一次）：
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/tools/convert.py”，第 847 行，解析
> self._tags[rec.tag](self.cr, rec, n)
> 文件“ /home/priyan/Software/openerp-7.0-20130309-002120/openerp/tools/convert.py”，第 814 行，在 _tag_record
> id = self.pool.get('ir.model.data')._update(cr, self.uid, rec_model, self.module, res, rec_id or False, not self.isnoupdate(data_node), noupdate=self.isnoupdate(data_node), mode=self.mode, context=rec_context )
> File "/home/priyan/软件/openerp-7.0-20130309-002120/openerp/addons/base/ir/ir_model.py"，第 964 行，在 _update
> res_id = model_obj.create(cr, uid, values, context=context)
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/orm.py”，第 4434 行，在 create
> cr.execute('insert into "'+self._table+'" (id'+ upd0+") 值 ("+str(id_new)+upd1+')', tuple(upd2))
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/sql_db.py”，第 161 行，在包装器
> 返回 f(self, *args, **kwargs)
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/sql_db.py”，第 226 行，在执行
> res = self._obj.execute(查询，参数）
> IntegrityError：“res_model”列中的空值违反非空约束
> 
> 2013-03-18 04:10:16,835 4709 错误 OpenERP_DB openerp.netsvc：“列中的空值”res_model" 违反非空约束
> 回溯（最近一次通话最后）：
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/netsvc.py”，第 293 行，在 dispatch_rpc
> 结果 = ExportService.getService(service_name).dispatch(method, params)
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/service/web_services.py”，第 425 行，在调度
> 返回 fn(*params)
> 文件“/home/priyan/Software/openerp- 7.0-20130309-002120/openerp/service/web_services.py”，第 436 行，在 exp_authenticate
> res_users = pooler.get_pool(db).get('res.users')
> 文件“/home/priyan/Software/openerp-7.0- 20130309-002120/openerp/pooler.py”，第 49 行，在 get_pool
> 返回 get_db_and_pool(db_name, force_demo, status, update_module)[1]
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/pooler.py”，第 33 行，在 get_db_and_pool
> registry = RegistryManager.get(db_name , force_demo, status, update_module)
> 文件 "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/modules/registry.py", 第 192 行, 在获取
> update_module)
> 文件 "/home/priyan/Software/openerp -7.0-20130309-002120/openerp/modules/registry.py”，第 218 行，在新的
> openerp.modules.load_modules(registry.db, force_demo, status, update_module)
> 文件“/home/priyan/Software/openerp-7.0- 20130309-002120/openerp/modules/loading.py”，第 344 行，在 load_modules
> 已处理 = load_marked_modules(cr, graph, states_to_load, force, status, report, loaded_modules, update_module)
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/modules/loading.py”，第 259 行，在load_marked_modules
> 已加载，已处理 = load_module_graph（cr，graph，progressdict，report=report，skip_modules=loaded_modules，perform_checks=perform_checks）
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/modules/loading.py” ，第 190 行，在 load_module_graph
> load_update_xml(module_name, idref, mode)
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/modules/loading.py”，第 74 行，在
> load_update_xml = lambda *args 中： _load_data(cr, *args, kind='更新_xml'）
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/modules/loading.py”，第 127 行，在 _load_data
> tools.convert_xml_import(cr, module_name, fp, idref, mode, noupdate, report)
> 文件中“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/tools/convert.py”，第 954 行，在 convert_xml_import
> obj.parse(doc.getroot())
> 文件中“/home/priyan/Software/openerp -7.0-20130309-002120/openerp/tools/convert.py”，第 847 行，解析
> self._tags[rec.tag](self.cr, rec, n)
> 文件“/home/priyan/Software/openerp-7.0 -20130309-002120/openerp/tools/convert.py”，第 814 行，在 _tag_record 中
> id = self.pool.get('ir.model.data')._update(cr, self.uid, rec_model, self.module, res, rec_id or False, not self.isnoupdate(data_node), noupdate=self.isnoupdate (data_node), mode=self.mode, context=rec_context)
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/base/ir/ir_model.py”，第 964 行，在 _update
> res_id = model_obj.create(cr, uid, values, context=context)
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/orm.py”，第 4434 行，在创建
> cr.execute( '插入"'+self._table+'" (id'+upd0+") 值("+str(id_new)+upd1+')', tuple(upd2))
> 文件"/home/priyan/Software/openerp-7.0- 20130309-002120/openerp/sql_db.py",第 161 行，在包装器中
> 返回 f(self, *args, **kwargs)
> 文件“/home/priyan/Software/openerp-7.0-20130309-002120/openerp/sql_db.py”，第 226 行，在执行
> res = self._obj.execute(query, params)
> IntegrityError：“res_model”列中的空值违反非空约束
> 
> 2013-03-18 04:10:16,847 4709 INFO OpenERP_DB werkzeug: 127.0.0.1 - - [18/Mar/2013 04:10:16]“POST /web/session/authenticate HTTP/1.1”200 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:15:37.523

您的 xml 代码继承是完全错误的。

```
<record model="ir.ui.view" id="namelist_dailyupdate">
    <field name="name">checkroll.daily.update.form</field>
    <field name="model">checkroll.daily.update</field>
    <field name="inherit_id" ref="hr.view_employee_form" />
    <field name="type">form</field>
    <field name="arch" type="xml">
        <form string="daily_update">
            <field name="kanganyname" />
        </form>
    </field>
</record> 
```

在此您的代码中，您没有指定要添加新字段的位置，您可以像这样定义您的代码

```
<record model="ir.ui.view" id="namelist_dailyupdate">
    <field name="name">checkroll.daily.update.form</field>
    <field name="model">checkroll.daily.update</field>
    <field name="inherit_id" ref="hr.view_employee_form" />
    <field name="type">form</field>
    <field name="arch" type="xml">
        <form string="daily_update">
            <xpath expr="//field[@name='name']" position="after">
                <field name="kanganyname" />
           </xpath>
        </form>
   </field>
</record> 
```

或者

checkroll.daily.update.form checkroll.daily.update 表格

需要使用 xpath 或字段标签定义您想要添加此字段的位置

希望这有帮助

# c++ - 如何在网格周围创建边界

> ID：15469957
> 
> 赞同：0
> 
> 时间：2013-03-18T04:50:56.453
> 
> 标签：c++

该程序应该输出一个 12x24 的网格，所有外部线输出 0，内部线输出 1

这是我为了让第一列和第一行输出0而尝试的：

```
#include <iostream>

using namespace std;
#define N 24
// print:
//
// Prints the simulation matrix M as spaces, *'s, and T's.
//
void print(int M[][N], int ROWS, int COLS)
{
// YOU MUST IMPLEMENT THIS:
}
//
// fill:
//
// Fills the simulation matrix such that the boundary rows
// and columns are empty, the internal area is all trees,
// and one tree is burning at index position (row, col).
//
void fill(int M[][N], int ROWS, int COLS, int row, int col)
{
// YOU MUST IMPLEMENT THIS:

//
// main:
}//
int main()
{
int M[N/2][N];
int ROWS, COLS;
int r, c;
ROWS = sizeof(M) / sizeof(M[0]);
COLS = sizeof(M[0]) / sizeof(M[0][0]);
fill(M, ROWS, COLS, 1, 1);
for(r=0; r< ROWS; r++)
{
for(c=0; c< COLS; c++)
{
    if(ROWS>1)
    {
    M[ROWS][COLS]=1;
    cout<< M[ROWS][COLS];
    }
    else
    {

    M[ROWS][COLS]=0;
    cout<< M[ROWS][COLS];
}
}
cout<< endl;
}

print(M, ROWS, COLS);
return 0; 
} 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:09:15.397

首先，问问自己：**“我将如何创建一个盒子？”** 要创建一个盒子，您需要**4 个边**。*但是*，**可以制作的最简单的盒子包含两条线**，因为我们可以**将盒子的高度设为零或*无穷小***。在代码中，您至少需要 2 行来制作一个盒子。

像这样：

```
000000000000000
000000000000000 
```

然而，它**没有高度。**换句话说，**这是一个零高度边框框。**

因此要创建一个这样的盒子：

```
000000000000000
011111111111110
000000000000000 
```

你注意到了什么？**第一行和最后一行全为零。*并且*，中间行的第一个和最后一个元素是零，该行上的所有其他元素都是 1。**

进一步扩展：

```
000000000000000
011111111111110
011111111111110
000000000000000 
```

**我们看到了相同的模式——所以这可以扩展到第 n 行的情况。**因此，算法是：

1.  第一行和最后一行都是零。
2.  对于所有其他行，这些行的第一列和最后一列都为 0。
3.  其他一切都设置为 1。

因此，在您的情况下：

```
for(r=0; r< ROWS; r++)
{
    for(c=0; c < COLS; c++)
    {
        if (r == 0 || r == ROWS - 1) {
            M[r][c]=0;
        }
        else if(c == 0 || c == COLS -1) {
            M[r][c]=0;
        }
        else {
            M[r][c]=1;  
        }
        cout<< M[r][c];
    }
    cout << endl;
} 
```

# iphone - 从导航控制器转到 ModalViewController 无法正常工作并崩溃

> ID：15469959
> 
> 赞同：0
> 
> 时间：2013-03-18T04:50:59.423
> 
> 标签：iphone, ios, uinavigationcontroller

在我的项目中，我使用导航控制器移动到另一个，但我有一些视图，其中有我的自定义导航控制器。

请建议我该怎么做？

我试过这样做，但我正在发生崩溃。

```
[self.navigationController presentModalViewController:myVechileView animated:YES];

[self presentModalViewController:myVechileView animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:55:22.167

```
[self.navigationController presentViewController:myVechileView animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:58:16.640

presentModalViewController:animated: 采用[UIViewController](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)而不是[UIView](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T05:14:08.513

如果您使用的是 iOS 6，请使用此..

```
[self.navigationController presentViewController:myVechileView animated:YES completion:nil];' 
```

如果你正在使用 iOS 5，那么

```
[self.navigationController presentModalViewController:myVechileView animated:YES]; 
```

希望这对你有帮助

# database - SQLite 查询时间 AM v PM

> ID：15469960
> 
> 赞同：1
> 
> 时间：2013-03-18T04:51:02.000
> 
> 标签：database, sqlite, time, datetime-format

我有一个 SQLite 表，其中有 2 列时间保存为 HH:MM:SS 格式（24 小时制）...例如，第一个条目是 00:00:00 Col1 和 00:00:59 Col2 ....这将持续 +1 分钟，直到 23:59:00 Col1 和 23:59:59 Col2 的最后一个条目......

我目前使用查询来查看当前时间（查询时间）之间的间隔，然后它返回 Col3 中的相应值（我创建的分配变量）......代码如下

```
"SELECT column3 FROM time WHERE column1 <= time('now', 'localtime') and column2 >= time('now', 'localtime') " 
```

此代码有效地返回 Col3 中的适当值，但**仅当当前时间为 PM**（12:00:00 和 23:59:59 之间）时...我不明白为什么它适用于 PM 值而不是 AM当表是 24 小时格式 HH:MM:SS 时的值。我在类似的查询中遇到了困难，但日期和解决方案在导入 SQLite 之前结果是 CVS 文件中的格式问题......所以这是查询或格式问题？...或两者兼而有之？...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:58:45.587

我认为你的阵型有问题.. TRY hh:mm:ss

# c# - 如何在 .NET 4.0 中重试任务？

> ID：15469967
> 
> 赞同：-4
> 
> 时间：2013-03-18T04:51:40.320
> 
> 标签：c#, .net, c#-4.0, concurrency, task-parallel-library

先前问题“在任务中出现异常时根据用户输入多次重试任务” 的[公认答案提供了 C# 5.0 中的代码](https://stackoverflow.com/a/10494424/200449)

我不熟悉 .NET 异步，使用 .NET 4.0 的 await 构造很难将 C# 4.0 中的代码放在一起。其他答案也包含谜题

您能否提供一个完整的 C# 4.0 源代码，即示例，如何在 C# 中重试任务，包括处理异常并允许取消而不重试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:10:13.700

如果我正确理解了您的问题，则您要求的解决方案类似于[此问题](https://stackoverflow.com/questions/6090026/how-to-implement-retry-logic-with-task-parallel-librarytpl)中建议的解决方案。在这里，Jon Skeet 给出了用于一般操作的 Retry 方法的实现。此外，您要求包含 execption 处理可以取消操作而不重试的可能性。在这种情况下，Jon 还提到了合并一个 ShouldRetry(Exception) 方法的可能性，您可以使用该方法来确定重试是否合理。因此，我在 Jon 的原始代码中加入了一些示例代码：

```
public static Func<T> Retry(Func<T> original, int retryCount)
{
    return () =>
    {
        while (true)
        {
            try
            {
                return original();
            }
            catch (Exception e)
            {
                if (retryCount == 0 || !ShouldRetry(e))
                {
                    throw;
                }

                // TODO: Logging
                retryCount--;
            }
        }
   };
}

public static bool ShouldRetry(Exception e) {
    return (e is MySpecialExceptionThatAllowsForARetry)
} 
```

这是否澄清了另一个问题的答案？

编辑：其他人已经正确地指出我的代码可以在考虑的情况下被简化/专门化。上面的代码将 a 包装`Func`成一个*retriable*（或者更确切地说是*retrying*）`Func`。适合问题的更简单的形式是

```
public static T Retry(Task<T> original, int retryCount)
{
    while (true)
    {
        try
        {
            return original();
        }
        catch (Exception e)
        {
            if (retryCount == 0 || !ShouldRetry(e))
            {
                throw;
            }

            // TODO: Logging
            retryCount--;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-03-18T08:36:37.307

好吧，如果将[Jon Skeet 的答案](https://stackoverflow.com/a/6090049/2031316)与[原始答案](https://stackoverflow.com/questions/6090026/how-to-implement-retry-logic-with-task-parallel-librarytpl)一起引用，那么它应该指定：

```
private static Task<T> CreateTaskWithRetry<T>(Func<T> action, int retryCount) 
```

代替：

```
public static Func<T> Retry(Func<T> original, int retryCount) 
```

# c# - 将 Dijkstra 算法打印为树

> ID：15469968
> 
> 赞同：0
> 
> 时间：2013-03-18T04:52:00.350
> 
> 标签：c#, dijkstra

我有算法记录每个节点的最短路径，需要将其打印为树结构......例如：

温哥华-奥林匹亚-莱西-塔科马-西雅图

等等...这是我的节点结构：

```
class DA
{
    public Node Name { get; set; }
    public Node Parent { get; set; }
    public decimal Cost { get; set; }
    public bool Complete { get; set; }

    public DA(Node n)
    {
        Name = n;
        Cost = 100000000;
    }

    public DA() { }
} 
```

这是我目前在控制台上打印的内容（父格式-> 子体重 ![在此处输入图像描述](../Images/a3d9bde815622b4031a72cc7fb75a31f.png)

任何有关打印此内容的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:58:37.940

伪代码：

```
print start.name;
var next = start.next;

while (next) {
  print next.name;
  next = next.next;
} 
```

基本上，一般的想法是打印出起始位置，然后继续打印出所有目标位置，直到你到达终点。

# google-app-engine - 如何在自定义域上提供 appspot.com 应用程序？

> ID：15469971
> 
> 赞同：1
> 
> 时间：2013-03-18T04:52:04.760
> 
> 标签：google-app-engine

我有一个应用程序[http://faqs4j.appspot.com](http://faqs4j.appspot.com)。我购买了一个名为**jobs4j**的域。**我在应用引擎控制台中使用应用程序设置**添加了域，并在 Godaddy DNS 管理控制台中进行了必要的 CNAME 更改。

现在，当我在浏览器中**输入 in.jobs4j.com**时，它只是重定向到**[http://faqs4j.appspot.com](http://faqs4j.appspot.com)**。但我希望我的应用程序在子域 in.jobs4j.com 下提供服务，而不仅仅是重定向到 apppot 域。我缺少什么配置？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:28:10.087

在应用程序仪表板的**管理**/**应用程序设置**下，您有一个标题为“**域设置**”的部分。您可以在其中配置要用于此应用程序的域。

该过程将要求您设置一个“google apps”帐户（不用担心，单用户域是免费的），然后通过设置 CNAME 条目来转移您希望由 Google Apps 管理的域在您的域区域文件中。说明向您展示了如何操作。当然，在说明建议您将 CNAME 子域定义为“www”的情况下，您会希望将您的子域称为“in”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T01:21:50.297

不幸的是，Google 已经结束了拥有免费 Google Apps 帐户的选项，唉！

但是，我们仍然可以从自定义域（非 Google 应用程序拥有）中指向 GAE 应用程序。

> 第 1 步：转到GAE 仪表板中的**应用程序设置并添加自定义域。**您将被要求验证 Google 基本上会在您的 DNS 区域文件中创建 TXT 记录的域。
> 
> 第 2 步：验证第 3 方域后，为应用添加自定义域 (my-gae-app.mydomain.app)。它显示了有关如何为域添加 CNAME 条目的说明。

希望这可以帮助！

# loops - 使用 sass 在颜色列表中循环

> ID：15469974
> 
> 赞同：24
> 
> 时间：2013-03-18T04:52:12.500
> 
> 标签：loops, sass, each

可以列出三种颜色：

$颜色列表：xyz；

然后通过循环使用这三种颜色并将它们添加到无序列表项中。

我想：

```
<li>row 1</li> (gets color x)
<li>row 2</li> (gets color y)
<li>row 3</li> (gets color z)
<li>row 4</li> (gets color x) 
```

等等等等。

我曾尝试使用 @each ( [http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#each-directive](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#each-directive) ) 函数，但它只是在第一次通过列表后停止应用颜色。我希望颜色保持循环，直到用完列表项来应用它们。

这可能与 sass 吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-18T11:40:21.907

如果纯 CSS 可以，那么 Sass 也可以。这将适用于任意数量的颜色：

[http://codepen.io/cimmanon/pen/yoCDG](http://codepen.io/cimmanon/pen/yoCDG)

```
$colors: red, orange, yellow, green, blue, purple;

@for $i from 1 through length($colors) {
    li:nth-child(#{length($colors)}n+#{$i}) {
        background: nth($colors, $i)
    }
} 
```

输出：

```
li:nth-child(6n+1) {
  background: red;
}

li:nth-child(6n+2) {
  background: orange;
}

li:nth-child(6n+3) {
  background: yellow;
}

li:nth-child(6n+4) {
  background: green;
}

li:nth-child(6n+5) {
  background: blue;
}

li:nth-child(6n+6) {
  background: purple;
} 
```

# ios - NSXMLParser，解析 xml 问题

> ID：15469977
> 
> 赞同：0
> 
> 时间：2013-03-18T04:52:18.460
> 
> 标签：ios, xml, parsing, nsxmlparser

我想解析包含在 [description] [p] blah blah [/description] [/p] 中的描述

```
 <item>
 <title>
 Jon Greene named associate director for strategic planning and development at institute
 </title>
 <link>
 http://www.vtnews.vt.edu/articles/2013/03/031513-ictas-greenepromotion.html
 </link>

 <description>
 <p>In this new position, Jon Greene will be responsible for strategic research development of multimillion-dollar, interdisciplinary proposals at the Institute for Critical Technology and Applied Science,</p>
 </description>

 <pubDate>Fri, 15 Mar 2013 00:00:00 -0400</pubDate>
 <guid isPermaLink="true">
 http://www.vtnews.vt.edu/articles/2013/03/031513-ictas-greenepromotion.html
 </guid>
 <enclosure url="http://www.vtnews.vt.edu/articles/2009/10/images/M_09783greene-jpg.jpg" length="27715" type="image/jpeg"/>
 <category>
 Institute for Critical Technology and Applied Science
 </category>
 <category>College of Engineering</category>
 <category>Research</category>
 <category>National Capital Region</category>
 </item> 
```

我正在使用委托方法`NSXMLParser`：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict {

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
```

要获得标题，我可以在`didEndElement`方法中执行此操作：

```
if ([elementName isEqualToString:@"title"]){
        self.aArticle.title = self.currentElementValue;
    } 
```

但是，当我尝试时这不起作用`@"p"` 只是想知道如何`< p >`使用整个描述访问节点。

有没有更好的方法/解决方案？

当我`NSLog`在 foundCharacters 中打印字符串时，我得到了其中的一部分：

```
<
2013-03-18 00:42:31.978 newsFeed[67052:c09] string is p
2013-03-18 00:42:31.978 newsFeed[67052:c09] string is >
2013-03-18 00:42:31.979 newsFeed[67052:c09] string is Tysor will work closely with national security thrust leader Jon Greene and with cognition and communication thrust leader Jeff Reed, a professor of electrical and computer engineering in the College of Engineering and director of Wireless@VT.
2013-03-18 00:42:31.979 newsFeed[67052:c09] string is  
2013-03-18 00:42:31.979 newsFeed[67052:c09] string is <
2013-03-18 00:42:31.979 newsFeed[67052:c09] string is /p
2013-03-18 00:42:31.979 newsFeed[67052:c09] string is > 
```

我现在能想到的唯一方法是如何跟踪`< p >`在方法 foundCharacters 中找到的位置，并有一个计数变量来检查我们是否达到封闭`< p >`标签中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:03:06.200

试试这个方法

**VC.m**

```
NSMutableString *xmlString;

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)nameSpaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if (!xmlString)
        xmlString = [[NSMutableString alloc] init];
    else
        [xmlString setString:@""];
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [xmlString appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{    
    if ([elementName isEqualToString:@"p"])
    {
        if (![xmlString isEqual:@""])
        {
            NSLog(@"%@",xmlString)'
            [SomeArray addObject:xmlString];
        }
    }

    //Release string
    [xmlString release];
    xmlString = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:01:54.123

请尝试使用这个..

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
     // ----------- Current Element Name means it is equal to <p> tag -----------
     if([self.currentElementName isEqualToString:@"p"])
     {
         NSLog(@"Value %@",string);
     }
} 
```

# javascript - 茉莉花节点中未显示失败的测试

> ID：15469980
> 
> 赞同：2
> 
> 时间：2013-03-18T04:52:34.093
> 
> 标签：javascript, node.js, tdd, jasmine, jasmine-node

我对 Web 服务进行了以下基本测试：

```
var request = require('http'),
    url     = 'http://localhost:1337/';

describe('webservice', function() {

  it('should respond to /ping', function(done) {
    request.get(url + 'ping', function(res) {
      expect(res.statusCode).toBe(200);
      res.on('data', function(body) {
        var json = JSON.parse(body);
        expect(json.message).toBe("Hi, I'm alive");
        expect(json.date).toBeDefined();
        done();
      });
    });

  });

}); 
```

这似乎工作正常：

```
$ jasmine-node --verbose tests/ping/

webservice
    should respond to /ping

Finished in 0.032 seconds
1 test, 3 assertions, 0 failures 
```

但是，如果我使一项测试失败（例如，更改预期的 json 消息），我会收到以下错误：

```
$ jasmine-node --verbose --coffee tests/ping/
StreamWrap: Aborting due to unwrap failure at ../src/stream_wrap.cc:125
Aborted (core dumped) 
```

知道我做错了什么吗？

（更重要的是，我的 js 中出现的任何错误，测试只是默默地失败，不知道发生了什么，js 错误就消失了）

更新：仅当失败的测试在 request.get 回调中时才会出现错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:07:15.647

Herman 是对的，我在 github 的 repo ( [https://github.com/mhevery/jasmine-node](https://github.com/mhevery/jasmine-node) ) 提出了一个问题，并与@tebriel 一起发现这是 v0.10.0 的问题

这是票：[https ://github.com/mhevery/jasmine-node/issues/211](https://github.com/mhevery/jasmine-node/issues/211)

直到 0.9.9 版本都可以正常工作，唯一失败的版本似乎是 v0.10.0

还有一个提交修复它，所以我们希望它会在下一个版本中修复

--

编辑：我可以确认这个问题已经通过节点 v0.10.1 解决了

# sorting - sortMode="multiple" 和lazy="true" 在 在分页期间清除多排序元

> ID：15469986
> 
> 赞同：8
> 
> 时间：2013-03-18T04:53:15.467
> 
> 标签：sorting, jsf-2, primefaces, datatable, lazy-loading

[我刚刚在“ DataTable - Lazy Loading](http://www.primefaces.org/showcase/ui/datatableLazy.jsf) ”的展示代码中启用了多重排序

`datatableLazy.xhtml`

```
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
<title>CarDataTable</title>
</h:head>
<h:body>
<h:form id="form">
    <p:dataTable var="car" value="#{tableBean.lazyModel}" paginator="true"
        rows="10"
        paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
        rowsPerPageTemplate="5,10,15" id="carTable" lazy="true"
        sortMode="multiple">

        <p:ajax event="rowSelect" listener="#{tableBean.onRowSelect}"
            update=":form:display" oncomplete="carDialog.show()" />

        <p:column headerText="Model" sortBy="#{car.model}"
            filterBy="#{car.model}">
            <h:outputText value="#{car.model}" />
        </p:column>

        <p:column headerText="Year" sortBy="#{car.year}"
            filterBy="#{car.year}">
            <h:outputText value="#{car.year}" />
        </p:column>

        <p:column headerText="Manufacturer" sortBy="#{car.manufacturer}"
            filterBy="#{car.manufacturer}">
            <h:outputText value="#{car.manufacturer}" />
        </p:column>

        <p:column headerText="Color" sortBy="#{car.color}"
            filterBy="#{car.color}">
            <h:outputText value="#{car.color}" />
        </p:column>
    </p:dataTable>
</h:form>
</h:body>
</html> 
```

`TableBean.java`

```
package com.solartis.primefaces.sample;

import java.util.ArrayList;
import java.util.List;
import java.util.UUID;

import javax.faces.bean.ManagedBean;

import org.primefaces.model.LazyDataModel;

@ManagedBean
public class TableBean {

private LazyDataModel<Car> lazyModel;

private Car selectedCar;

private List<Car> cars = new ArrayList<Car>();

private final static String[] colors;

private final static String[] manufacturers;

static {
    colors = new String[10];
    colors[0] = "Black";
    colors[1] = "White";
    colors[2] = "Green";
    colors[3] = "Red";
    colors[4] = "Blue";
    colors[5] = "Orange";
    colors[6] = "Silver";
    colors[7] = "Yellow";
    colors[8] = "Brown";
    colors[9] = "Maroon";

    manufacturers = new String[10];
    manufacturers[0] = "Mercedes";
    manufacturers[1] = "BMW";
    manufacturers[2] = "Volvo";
    manufacturers[3] = "Audi";
    manufacturers[4] = "Renault";
    manufacturers[5] = "Opel";
    manufacturers[6] = "Volkswagen";
    manufacturers[7] = "Chrysler";
    manufacturers[8] = "Ferrari";
    manufacturers[9] = "Ford";
}

public TableBean() {
    populateRandomCars(cars, 50);
    lazyModel = new LazyCarDataModel(cars);
}

public Car getSelectedCar() {
    return selectedCar;
}

public void setSelectedCar(Car selectedCar) {
    this.selectedCar = selectedCar;
}

public LazyDataModel<Car> getLazyModel() {
    return lazyModel;
}

private void populateRandomCars(List<Car> list, int size) {
    for (int i = 0; i < size; i++) {
        list.add(new Car(getRandomModel(), getRandomYear(),
                getRandomManufacturer(), getRandomColor()));
    }
}

private String getRandomColor() {
    return colors[(int) (Math.random() * 10)];
}

private String getRandomManufacturer() {
    return manufacturers[(int) (Math.random() * 10)];
}

private int getRandomYear() {
    return (int) (Math.random() * 50 + 1960);
}

private String getRandomModel() {
    return UUID.randomUUID().toString().substring(0, 8);
}
} 
```

`LazyCarDataModel.java`

```
package com.solartis.primefaces.sample;

import java.util.ArrayList;

/**
 * Dummy implementation of LazyDataModel that uses a list to mimic a real 
   datasource like a database.
 */
public class LazyCarDataModel extends LazyDataModel<Car> {

private List<Car> datasource;

public LazyCarDataModel(List<Car> datasource) {
    this.datasource = datasource;
}

@Override
public Car getRowData(String rowKey) {
    for(Car car : datasource) {
        if(car.getModel().equals(rowKey))
            return car;
    }

    return null;
}

@Override
public void setRowIndex(int rowIndex) {

    if (rowIndex == -1 || getPageSize() == 0) {
        super.setRowIndex(-1);
    } else
        super.setRowIndex(rowIndex % getPageSize());
}

@Override
public Object getRowKey(Car car) {
    return car.getModel();
}

@Override
public List<Car> load(int first, int pageSize, 
                      List<SortMeta> multiSortMeta,Map<String, String> filters) {

    System.out.println("\nTHE INPUT PARAMETER VALUE OF LOAD METHOD :   
    \t"+"first=" + first + ", pagesize=" + pageSize + ", multiSortMeta=" + 
    multiSortMeta + " filter:" + filters);

    System.out.println("\nTHE MULTISORTMETA CONTENT  : \t");

    if (multiSortMeta != null) {
        for (SortMeta sortMeta : multiSortMeta) {
            System.out.println("SORTFIELD:" +sortMeta.getSortField());
            System.out.println("SORTORDER:" +sortMeta.getSortOrder());
                    System.out.println("SORTFUNCTION:"
                                                         +sortMeta.getSortFunction());
            System.out.println("COLUMN:" +sortMeta.getColumn());
            System.out.println("CLASS:" +sortMeta.getClass());
        }
    }

    List<Car> data = new ArrayList<Car>();

    //filter
    for(Car car : datasource) {
        boolean match = true;

        for(Iterator<String> it = filters.keySet().iterator(); it.hasNext();) {
            try {
                String filterProperty = it.next();
                String filterValue = filters.get(filterProperty);
                String fieldValue =  String.valueOf(car.getClass().
                                getField(filterProperty).get(car));

                if(filterValue == null || fieldValue.startsWith(filterValue)) {
                    match = true;
                }
                else {
                    match = false;
                    break;
                }
            } catch(Exception e) {
                match = false;
            } 
        }

        if(match) {
            data.add(car);
        }
    }

    //rowCount
    int dataSize = data.size();
    this.setRowCount(dataSize);

    //paginate
    if(dataSize > pageSize) {
        try {
            return data.subList(first, first + pageSize);
        }
        catch(IndexOutOfBoundsException e) {
            return data.subList(first, first + (dataSize % pageSize));
        }
    }
    else {
        return data;
    }
}
} 
```

它工作得很好，除了当我对多列排序进行分页时，该`load()`方法`List<SortMeta>`不会给我当前排序的列详细信息以转移到其他页面，这与提供这些排序详细信息的`load()`方法不同。`String sortField, SortOrder sortOrder`

例如：

1.  单击“制造商”中的排序箭头，然后Ctrl+单击“年份”的排序箭头

    *   您将获得该`load()`方法的排序列详细信息（我已经在加载方法中打印了输入参数值）。
2.  现在，做分页。这里的`load()`方法未能给出排序列的详细信息

    *   不仅是分页，如果在点击排序列后输入列过滤值，同样的问题存在

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T05:27:15.103

我以临时方式解决了这个问题......有一个用于存储排序列详细信息的会话范围托管 bean，以便在分页期间进入 load()，例如：-

```
@ManagedBean
@SessionScoped

public class StoreSortColumnDetail implements Serializable{

    /** holds multisort values**/
private List<SortMeta> mMultiSortMeta;

public List<SortMeta> getMultiSortMeta() {
    return mMultiSortMeta;
}

public void setMultiSortMeta(List<SortMeta> multiSortMeta) {
    mMultiSortMeta = multiSortMeta;
}

public void clearMultiSortMeta() {
    if(this.mMultiSortMeta != null)
        this.mMultiSortMeta.clear();

}
} 
```

并像这样在 load() 中使用它：

```
@Override
public List<Car> load(int first, int pageSize, 
                  List<SortMeta> multiSortMeta,Map<String, String> filters) {

/** Instance to the SessionScoped scoped StoreSortColumnDetail managed bean*/
@ManagedProperty(value="#{StoreSortColumnDetail }")
private StoreSortColumnDetail storeSortColumnDetail ;

public void setStoreSortColumnDetail (StoreSortColumnDetail sortColumnDetail ) {
    this.storeSortColumnDetail = sortColumnDetail ;
}

/** to hold the handled sort column detail**/
List<SortMeta> handledMultiSortMeta = new ArrayList<SortMeta>();

/*Here starts the multisortmeta handling process*/
   /** check for List<SortMeta> for null**/
if(multiSortMeta != null ) {

    /** updates StoreSortColumnDetail's List<SortMeta> with Load()'s List<SortMeta>**/
    storeSortColumnDetail.setMultiSortMeta(multiSortMeta);
    handledMultiSortMeta  = multiSortMeta;
} 
/** check for List<SortMeta> for notnull **/
else if (multiSortMeta == null) {

    /**assigns Load()'s List<SortMeta> with StoreSortColumnDetail's List<SortMeta>**/
    handledMultiSortMeta  = storeSortColumnDetail.getMultiSortMeta();
} 

   /*Now u have handled multisortmeta from load()...
     and u can process now from handledMultiSortMeta*/
} 
```

我希望你知道我是如何处理的，如果不是亲密我...但这是一种临时方式，需要通过 primefaces 方式处理它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T12:17:52.387

虽然这种方法可能会奏效，但您可以轻松地将实际操作委托给您的lazyDataModel 中的 Primefaces。通过这样做，您可以使您的代码库更清晰，因为您不会有任何其他类可以操作，并且您将重用已经开发的组件（无论如何您都应该这样做）。

如果您检查了 PrimeFaces 源代码，您会发现 DataTable 对其每个功能都使用具体的类，例如过滤、排序、扩展等...对于排序 Primefaces 使用一个称为`BeanPropertyComparator`此类的类，它的构造函数需要某些属性，但其中大多数属性可以从`sortMeta`发送到`load`lazyDataModel方法的属性中获取。但是，如果您想获得所需的所有属性，则需要拥有 DataTable 对象，`FacesContext`如果您知道相关 DataTable 的客户端 ID，则可以从中获取。

假设您在一个名为的变量中有数据表实例，`activeTable`您所要做的就是：

```
UIColumn sortColumn = sortMeta.getSortColumn()
if(sortColumn.isDynamic())
  ((DynamicColumn)sortColumn).applyStatelessModel();
//for single mode sorting
ValueExpression sortByVal = activeTable.getValueExpression("sortBy");
//multiColumn sorting 
ValueExpression sortByVal = sortColumn.getValueExpression("sortBy");
int caseSensitive = activeTable.isCaseSensitiveSort();
SortOrder order = sortMeta.getSortOrder();
MethodExpression exp = sortColumn.getSortFunction();
//pass required properties to constructor
//single mode sort
Collections.sort(filteredItems, new BeanPropertyComparator(......))
//for multi column sort use ChainedBeanPropertyComparator and add every new comparator to it than
Collections.sort(filteredItems, chainedComparator); 
```

这样，默认情况下，您的排序将支持 primefaces 默认机制支持的任何功能，而不会牺牲安全性。

# mysql - 使用 MySQL 查询填充 Outlook 正文

> ID：15469991
> 
> 赞同：1
> 
> 时间：2013-03-18T04:54:05.873
> 
> 标签：mysql, outlook

我正在尝试从 MySQL 数据库中读取一些记录并通过 Outlook 将它们发送给我的老板。

我搜索了互联网并找到了从 Excel 或 Access 等导入数据的主题，但没有关于 PHP 项目中的 MySQL 查询。

你能告诉我一个方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:15:33.507

据说，[Genius Connect](http://www.geniusconnect.com/geniusconnect.asp)可以将数据从 MySQL 泵送到 Outlook，尽管我没有亲自尝试过。

它是一个 Outlook 加载项工具栏，并且有一个免费版本，限制为 49 条记录。

# android - TextView 中的文本溢出

> ID：15469996
> 
> 赞同：2
> 
> 时间：2013-03-18T04:55:02.503
> 
> 标签：android, textview

我有一个文本视图“Value4”。有时价值超过它可以容纳的价值。我需要知道是否有如果我可以将值从文本视图“Value4”移动到文本视图“Box 5”。

![在此处输入图像描述](../Images/4dbccac03ad42bfd5555a4f2b13d092b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:12:02.740

**这可能会有所帮助：**

[如何判断我的 textview 是否已被椭圆化？](https://stackoverflow.com/questions/4005933/how-do-i-tell-if-my-textview-has-been-ellipsized)

检查**value4**是否为`ellipsized`. 如果是，则从**value4**中删除 Text并将其放入**Box5**