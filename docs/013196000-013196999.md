# StackOverflow 问答 13196000-13196999

# sql - SQL Case Order 按特定顺序

> ID：13196010
> 
> 赞同：3
> 
> 时间：2012-11-02T13:17:46.437
> 
> 标签：sql, sql-order-by, case

好的，我之前问过类似的东西，但我已经研究过了，并没有专门找到这个。我有一张表，我需要按字段 OptionName(NVarChar) 和 IsActive(BIT) 进行排序。

对于 DDL，我需要按以下顺序排列结果：

```
Option A
Option B
Option C
Options that are Active, by OptionName ASC 
Option D
Options that are Inactive, by OptionName ASC 
```

到目前为止我有

```
ORDER BY CASE WHEN PortalName = 'Company, Inc' THEN 0 ELSE 1 END,
         CASE WHEN PortalName = 'Setup' THEN 1 ELSE 2 END,
         CASE WHEN PortalName = 'Daily Routine' THEN 2 ELSE 3 END,
         CASE WHEN IsActive = 1 THEN 3 ELSE 4 END, 
         CASE WHEN PortalName = 'Master Option' THEN 4 ELSE 5 END,
         PortalName ASC 
```

但这会将结果返回为：

```
Option A
Option B
Option C
Option D
Options that are Active, by OptionName ASC 
Options that are Inactive, by OptionName ASC 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:19:50.130

尝试，

```
ORDER BY CASE WHEN PortalName = 'Company, Inc' THEN 0 
              WHEN PortalName = 'Setup' THEN 1 
              WHEN PortalName = 'Daily Routine' THEN 2 
              WHEN IsActive = 1 THEN 3 
              WHEN PortalName = 'Master Option' THEN 4 
         ELSE 5 END,
         PortalName ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:45:22.410

将 order by 的每个部分视为不同的列...将案例应用于每个组件。首先获取第一部分......然后是第二部分。如果它不适用于第二部分，只需让它始终具有相同的值......就像......

```
ORDER BY 
  CASE WHEN PortalName = 'Company, Inc' THEN 1
       WHEN PortalName = 'Setup' THEN 2
       WHEN PortalName = 'Daily Routine' THEN 3
       WHEN PortalName = 'Master Option' THEN 4 ELSE 5 END,
  CASE WHEN IsActive = 1 THEN 1 ELSE 2 END,
  PortalName ASC 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T20:42:15.903

得到答案：CASE WHEN PortalName = 'Master Option' THEN 9999 ELSE 5 END

# android - 为什么应用程序随机死亡？

> ID：13196013
> 
> 赞同：27
> 
> 时间：2012-11-02T13:17:50.870
> 
> 标签：android, heap-memory

我正在开发一个音乐播放器应用程序。一切正常，除了应用程序突然死机。有时会在应用程序启动时发生这种情况，有时会在运行很长时间后发生。有时一切顺利，应用程序不会死机。我观察了日志以了解导致应用程序死机的原因并发现了这一点：

```
11-02 16:39:39.293: A/libc(3556): @@@ ABORTING: INVALID HEAP ADDRESS IN dlfree
11-02 16:39:39.293: A/libc(3556): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1) 
```

下面给出了完整的日志，当应用程序死亡时我在 logcat 中找到的内容：

```
11-02 16:39:39.293: A/libc(3556): @@@ ABORTING: INVALID HEAP ADDRESS IN dlfree
11-02 16:39:39.293: A/libc(3556): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)
11-02 16:39:39.793: I/DEBUG(3257): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
11-02 16:39:39.793: I/DEBUG(3257): Build fingerprint: 'Polaroid/nuclear_md7008/nuclear-md7008:4.0.4/IMM76D/20120929:eng/test-keys'
11-02 16:39:39.793: I/DEBUG(3257): pid: 3556, tid: 3556  >>> com.polaroid.kidsmusic <<<
11-02 16:39:39.793: I/DEBUG(3257): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
11-02 16:39:39.793: I/DEBUG(3257):  r0 deadbaad  r1 00000001  r2 40000000  r3 00000000
11-02 16:39:39.793: I/DEBUG(3257):  r4 00000000  r5 00000027  r6 400f4db0  r7 40103474
11-02 16:39:39.793: I/DEBUG(3257):  r8 021821c0  r9 40061840  10 00000008  fp beb666e4
11-02 16:39:39.793: I/DEBUG(3257):  ip ffffffff  sp beb66538  lr 400d5f71  pc 400d26d0  cpsr 60000030
11-02 16:39:39.793: I/DEBUG(3257):  d0  000001e000000000  d1  43f00000000001e0
11-02 16:39:39.793: I/DEBUG(3257):  d2  443f000000000000  d3  4a8688c00000004a
11-02 16:39:39.793: I/DEBUG(3257):  d4  3f800000020922a8  d5  0000000000000000
11-02 16:39:39.793: I/DEBUG(3257):  d6  0000000000000000  d7  0000000000000000
11-02 16:39:39.793: I/DEBUG(3257):  d8  0000000000000000  d9  43f0000000000000
11-02 16:39:39.793: I/DEBUG(3257):  d10 3fec2014384e6205  d11 0000000000000000
11-02 16:39:39.793: I/DEBUG(3257):  d12 0000000000000000  d13 0000000000000000
11-02 16:39:39.793: I/DEBUG(3257):  d14 0000000000000000  d15 0000000000000000
11-02 16:39:39.793: I/DEBUG(3257):  d16 0000000000000001  d17 3ff0000000000000
11-02 16:39:39.793: I/DEBUG(3257):  d18 3e56d3ae604f8858  d19 bfb0b3f66e58abf6
11-02 16:39:39.793: I/DEBUG(3257):  d20 4000000000000000  d21 3f1149926a1476f9
11-02 16:39:39.793: I/DEBUG(3257):  d22 bebba89f4215f5e0  d23 3fd5ce9e44d86000
11-02 16:39:39.793: I/DEBUG(3257):  d24 3e66376972bea4d0  d25 c014000000000000
11-02 16:39:39.793: I/DEBUG(3257):  d26 3ff5bf0a00000000  d27 bfb0b3f66e58abf8
11-02 16:39:39.793: I/DEBUG(3257):  d28 bffadb73617eb466  d29 3fd5ce9e5bac0e60
11-02 16:39:39.793: I/DEBUG(3257):  d30 3c7aa87621713b5a  d31 3e56d3ae60000000
11-02 16:39:39.793: I/DEBUG(3257):  scr 80000013
11-02 16:39:39.883: I/DEBUG(3257):          #00  pc 000176d0  /system/lib/libc.so
11-02 16:39:39.883: I/DEBUG(3257):          #01  pc 0001355a  /system/lib/libc.so
11-02 16:39:39.883: I/DEBUG(3257):          #02  pc 00015898  /system/lib/libc.so (dlfree)
11-02 16:39:39.883: I/DEBUG(3257):          #03  pc 00015f10  /system/lib/libc.so (free)
11-02 16:39:39.893: I/DEBUG(3257):          #04  pc 000009ac  /system/lib/libstdc++.so (_ZdlPvRKSt9nothrow_t)
11-02 16:39:39.893: I/DEBUG(3257):          #05  pc 0000bf94  /system/lib/libhwui.so
11-02 16:39:39.893: I/DEBUG(3257):          #06  pc 000104c0  /system/lib/libhwui.so (_ZN7android10uirenderer14OpenGLRenderer7prepareEb)
11-02 16:39:39.893: I/DEBUG(3257):          #07  pc 00055ec0  /system/lib/libandroid_runtime.so
11-02 16:39:39.893: I/DEBUG(3257):          #08  pc 0001ec30  /system/lib/libdvm.so (dvmPlatformInvoke)
11-02 16:39:39.893: I/DEBUG(3257):          #09  pc 00058c70  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread)
11-02 16:39:39.893: I/DEBUG(3257): code around pc:
11-02 16:39:39.893: I/DEBUG(3257): 400d26b0 4623b15c 2c006824 e026d1fb b12368db  \.#F$h.,..&..h#.
11-02 16:39:39.893: I/DEBUG(3257): 400d26c0 21014a17 6011447a 48124798 24002527  .J.!zD.`.G.H'%.$
11-02 16:39:39.893: I/DEBUG(3257): 400d26d0 f7f47005 2106ef48 efe4f7f5 460aa901  .p..H..!.......F
11-02 16:39:39.893: I/DEBUG(3257): 400d26e0 f04f2006 94015380 94029303 eba0f7f5  . O..S..........
11-02 16:39:39.893: I/DEBUG(3257): 400d26f0 4622a905 f7f52002 f7f4ebaa 2106ef34  .."F. ......4..!
11-02 16:39:39.893: I/DEBUG(3257): code around lr:
11-02 16:39:39.893: I/DEBUG(3257): 400d5f50 41f0e92d 46804c0c 447c2600 68a56824  -..A.L.F.&|D$h.h
11-02 16:39:39.893: I/DEBUG(3257): 400d5f60 e0076867 300cf9b5 dd022b00 47c04628  gh.....0.+..(F.G
11-02 16:39:39.893: I/DEBUG(3257): 400d5f70 35544306 37fff117 6824d5f4 d1ee2c00  .CT5...7..$h.,..
11-02 16:39:39.893: I/DEBUG(3257): 400d5f80 e8bd4630 bf0081f0 0002858a 41f0e92d  0F..........-..A
11-02 16:39:39.893: I/DEBUG(3257): 400d5f90 fb01b086 9004f602 461f4815 4615460c  .........H.F.F.F
11-02 16:39:39.893: I/DEBUG(3257): memory map around addr deadbaad:
11-02 16:39:39.893: I/DEBUG(3257): beb46000-beb67000 [stack]
11-02 16:39:39.893: I/DEBUG(3257): (no map for address)
11-02 16:39:39.893: I/DEBUG(3257): ffff0000-ffff1000 [vectors]
11-02 16:39:39.893: I/DEBUG(3257): stack:
11-02 16:39:39.893: I/DEBUG(3257):     beb664f8  00000001  
11-02 16:39:39.893: I/DEBUG(3257):     beb664fc  beb66538  [stack]
11-02 16:39:39.903: I/DEBUG(3257):     beb66500  400fe778  /system/lib/libc.so
11-02 16:39:39.903: I/DEBUG(3257):     beb66504  0000000c  
11-02 16:39:39.903: I/DEBUG(3257):     beb66508  400fe70c  /system/lib/libc.so
11-02 16:39:39.903: I/DEBUG(3257):     beb6650c  40103808  
11-02 16:39:39.903: I/DEBUG(3257):     beb66510  00000000  
11-02 16:39:39.903: I/DEBUG(3257):     beb66514  400d5f71  /system/lib/libc.so
11-02 16:39:39.903: I/DEBUG(3257):     beb66518  00000000  
11-02 16:39:39.903: I/DEBUG(3257):     beb6651c  beb6654c  [stack]
11-02 16:39:39.903: I/DEBUG(3257):     beb66520  400f4db0  /system/lib/libc.so
11-02 16:39:39.903: I/DEBUG(3257):     beb66524  40103474  
11-02 16:39:39.903: I/DEBUG(3257):     beb66528  021821c0  [heap]
11-02 16:39:39.903: I/DEBUG(3257):     beb6652c  400d50dd  /system/lib/libc.so
11-02 16:39:39.903: I/DEBUG(3257):     beb66530  df0027ad  
11-02 16:39:39.903: I/DEBUG(3257):     beb66534  00000000  
11-02 16:39:39.903: I/DEBUG(3257): #00 beb66538  beb66534  [stack]
11-02 16:39:39.903: I/DEBUG(3257):     beb6653c  00000001  
11-02 16:39:39.903: I/DEBUG(3257):     beb66540  400f4d94  /system/lib/libc.so
11-02 16:39:39.903: I/DEBUG(3257):     beb66544  00000005  
11-02 16:39:39.903: I/DEBUG(3257):     beb66548  beb66564  [stack]
11-02 16:39:39.903: I/DEBUG(3257):     beb6654c  fffffbdf  
11-02 16:39:39.903: I/DEBUG(3257):     beb66550  beb66564  [stack]
11-02 16:39:39.903: I/DEBUG(3257):     beb66554  beb66564  [stack]
11-02 16:39:39.903: I/DEBUG(3257):     beb66558  400f82ec  /system/lib/libc.so
11-02 16:39:39.903: I/DEBUG(3257):     beb6655c  400ce55f  /system/lib/libc.so
11-02 16:39:39.903: I/DEBUG(3257): #01 beb66560  00000000  
11-02 16:39:39.903: I/DEBUG(3257):     beb66564  20404040  
11-02 16:39:39.903: I/DEBUG(3257):     beb66568  524f4241  
11-02 16:39:39.903: I/DEBUG(3257):     beb6656c  474e4954  /data/dalvik-cache/system@framework@framework.jar@classes.dex
11-02 16:39:39.903: I/DEBUG(3257):     beb66570  4e49203a  
11-02 16:39:39.903: I/DEBUG(3257):     beb66574  494c4156  /system/lib/libbcc.so
11-02 16:39:39.903: I/DEBUG(3257):     beb66578  45482044  /dev/ashmem/dalvik-mark-stack (deleted)
11-02 16:39:39.903: I/DEBUG(3257):     beb6657c  41205041  /dev/ashmem/dalvik-heap (deleted)
11-02 16:39:39.903: I/DEBUG(3257):     beb66580  45524444  /dev/ashmem/dalvik-mark-stack (deleted)
11-02 16:39:39.903: I/DEBUG(3257):     beb66584  49205353  /system/lib/libbcc.so
11-02 16:39:39.903: I/DEBUG(3257):     beb66588  6c64204e  
11-02 16:39:39.903: I/DEBUG(3257):     beb6658c  65657266  
11-02 16:39:39.903: I/DEBUG(3257):     beb66590  02079100  [heap]
11-02 16:39:39.903: I/DEBUG(3257):     beb66594  40103498  
11-02 16:39:39.903: I/DEBUG(3257):     beb66598  00000000  
11-02 16:39:39.903: I/DEBUG(3257):     beb6659c  400cfa4d  /system/lib/libc.so
11-02 16:39:39.903: I/DEBUG(3257):     beb665a0  021800a8  [heap]
11-02 16:39:39.903: I/DEBUG(3257):     beb665a4  401034e0  
11-02 16:39:39.903: I/DEBUG(3257):     beb665a8  0202ed20  [heap]
11-02 16:39:39.903: I/DEBUG(3257):     beb665ac  0202ed60  [heap]
11-02 16:39:39.903: I/DEBUG(3257):     beb665b0  beb666d0  [stack]
11-02 16:39:39.903: I/DEBUG(3257):     beb665b4  40103498  
11-02 16:39:39.903: I/DEBUG(3257):     beb665b8  47821416  /data/dalvik-cache/system@framework@framework.jar@classes.dex
11-02 16:39:39.903: I/DEBUG(3257):     beb665bc  400cfa4d  /system/lib/libc.so
11-02 16:39:39.903: I/DEBUG(3257):     beb665c0  02079f98  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb665c4  40135525  /system/lib/libutils.so
11-02 16:39:39.913: I/DEBUG(3257):     beb665c8  02079f98  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb665cc  00000000  
11-02 16:39:39.913: I/DEBUG(3257):     beb665d0  02079f84  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb665d4  40135525  /system/lib/libutils.so
11-02 16:39:39.913: I/DEBUG(3257):     beb665d8  02079f84  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb665dc  00000000  
11-02 16:39:39.913: I/DEBUG(3257):     beb665e0  beb66624  [stack]
11-02 16:39:39.913: I/DEBUG(3257):     beb665e4  02079f98  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb665e8  00000001  
11-02 16:39:39.913: I/DEBUG(3257):     beb665ec  401355ff  /system/lib/libutils.so
11-02 16:39:39.913: I/DEBUG(3257):     beb665f0  02079da8  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb665f4  0208ecb8  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb665f8  0202ed20  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb665fc  02079da8  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb66600  0202ed20  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb66604  0202ed20  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb66608  02079f98  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb6660c  409c17e5  /system/lib/libhwui.so
11-02 16:39:39.913: I/DEBUG(3257):     beb66610  beb666d0  [stack]
11-02 16:39:39.913: I/DEBUG(3257):     beb66614  0208ecb8  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb66618  0202ed20  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb6661c  0208ecb8  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb66620  43f00000  /dev/ashmem/dalvik-heap (deleted)
11-02 16:39:39.913: I/DEBUG(3257):     beb66624  0202ed20  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb66628  020e1f58  [heap]
11-02 16:39:39.913: I/DEBUG(3257):     beb6662c  40103588  
11-02 16:39:39.923: I/DEBUG(3257):     beb66630  0218eff0  [heap]
11-02 16:39:39.923: I/DEBUG(3257):     beb66634  0218f0d8  [heap]
11-02 16:39:39.923: I/DEBUG(3257):     beb66638  40103588  
11-02 16:39:39.923: I/DEBUG(3257):     beb6663c  40103588  
11-02 16:39:39.923: I/DEBUG(3257):     beb66640  020e1f60  [heap]
11-02 16:39:39.923: I/DEBUG(3257):     beb66644  020e2048  [heap]
11-02 16:39:39.923: I/DEBUG(3257):     beb66648  beb666d0  [stack]
11-02 16:39:39.923: I/DEBUG(3257):     beb6664c  40103498  
11-02 16:39:39.923: I/DEBUG(3257):     beb66650  00000008  
11-02 16:39:39.923: I/DEBUG(3257):     beb66654  400cfa4d  /system/lib/libc.so
11-02 16:39:39.923: I/DEBUG(3257):     beb66658  020e1f60  [heap]
11-02 16:39:39.923: I/DEBUG(3257):     beb6665c  020b9348  [heap]
11-02 16:39:39.923: I/DEBUG(3257):     beb66660  021821c0  [heap]
11-02 16:39:39.923: I/DEBUG(3257):     beb66664  16335a17  
11-02 16:39:39.923: I/DEBUG(3257):     beb66668  021821b8  [heap]
11-02 16:39:39.923: I/DEBUG(3257):     beb6666c  021822a0  [heap]
11-02 16:39:39.923: I/DEBUG(3257):     beb66670  000000e8  
11-02 16:39:39.923: I/DEBUG(3257):     beb66674  400d089d  /system/lib/libc.so
11-02 16:39:42.593: I/DEBUG(3257): debuggerd committing suicide to free the zombie!
11-02 16:39:42.603: I/ActivityManager(149): Process com.polaroid.kidsmusic (pid 3556) has died.
11-02 16:39:42.603: W/ActivityManager(149): Force removing ActivityRecord{40f93768 com.polaroid.kidsmusic/.MainActivity}: app died, no saved state
11-02 16:39:42.613: W/AudioFlinger(86): session id 829 not found for pid 86
11-02 16:39:42.613: I/DEBUG(3882): debuggerd: Sep 29 2012 11:09:03
11-02 16:39:42.623: I/WindowManager(149): WIN DEATH: Window{4118d898 com.polaroid.kidsmusic/com.polaroid.kidsmusic.MainActivity paused=false}
11-02 16:39:42.623: W/WindowManager(149): Force-removing child win Window{41574080 SurfaceView paused=false} from container Window{4118d898 com.polaroid.kidsmusic/com.polaroid.kidsmusic.MainActivity paused=false}
11-02 16:39:42.643: W/WindowManager(149): Failed looking up window
11-02 16:39:42.643: W/WindowManager(149): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@41159418 does not exist
11-02 16:39:42.643: W/WindowManager(149):   at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7168)
11-02 16:39:42.643: W/WindowManager(149):   at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7159)
11-02 16:39:42.643: W/WindowManager(149):   at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1545)
11-02 16:39:42.643: W/WindowManager(149):   at android.os.BinderProxy.sendDeathNotice(Binder.java:417)
11-02 16:39:42.643: W/WindowManager(149):   at dalvik.system.NativeStart.run(Native Method)
11-02 16:39:42.643: I/WindowManager(149): MediaPlayer.is not PlayingVideo
11-02 16:39:42.643: I/WindowManager(149): WIN DEATH: null
11-02 16:39:42.713: V/TabletStatusBar(209): setLightsOn(true)
11-02 16:39:42.723: W/InputManagerService(149): Got RemoteException sending setActive(false) notification to pid 3556 uid 10032 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-02T13:39:46.913

看起来有一些可能性（去图），这里有很多。

## 可能内存不足

当然是本地化的风险之一！

*   [致命信号 11](https://stackoverflow.com/questions/12575357/fatal-signal-11)

*   [Android NDK 分割错误](https://stackoverflow.com/questions/11244120/android-ndk-segmentation-error)

*   [SIGNAL 11 SIGSEGV 崩溃 Android](https://stackoverflow.com/questions/4973310/signal-11-sigsegv-crash-android)

## 同时从两个不同的线程进行函数调用

*   [无效的堆地址和致命信号 11](https://stackoverflow.com/questions/10662446/invalid-heap-address-and-fatal-signal-11)

## 内存损坏

*   [使用 glShaderBinary 时出现致命信号 11 和 INVALID HEAP ADDRESS IN dlfree 错误](https://stackoverflow.com/questions/12246312/fatal-signal-11-and-invalid-heap-address-in-dlfree-error-when-using-glshaderbina)

* * *

所以......祝你好运！：/

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-08T11:00:46.043

我发现了问题。

我一直在初始化一个 Visualizer 类，它`onPrepareListener()`是媒体播放器内部的对象。

因此，每当媒体播放器调用`prepare()`函数时，Visualizer 对象就会一次又一次地创建，从而影响内存并导致应用程序死机。

从 onPrepareListener() 中删除 Visualizer 初始化代码并仅在解决问题后初始化对象。现在应用程序不再崩溃。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-13T17:44:40.953

该错误很可能来自尝试删除或使用未初始化的指针。

由于您不是直接弄乱指针，而是使用其他库，因此您可能没有按照他们希望的方式初始化库。或者库实现者有可能忽略了初始化他们的指针并且根本没有意识到它，因为错误可能会或可能不会总是暴露出来 - 正如您所发现的那样。

因为指针指向内存中的一个地址，如果一个指针没有被初始化，它很可能包含一个垃圾值（不是一个有效的内存地址）。

该错误来自尝试访问/删除不存在或您无权访问的内存地址。使它看起来随机的事情通常是内存已经预初始化为 0，这也是大多数系统上 NULL 的值。运行你的系统/应用程序足够长的内存变得更脏。

此外，我发现在声明未初始化变量时遇到 0 的机会因系统而异，因此某些系统可能比其他系统更容易崩溃。

**个人例子：**

当我实例化一个将指针作为私有成员的类时遇到了这个错误，但是我忘记在类初始化期间初始化指针。

后来当那个类被破坏时，它试图删除指针，但是由于指针没有初始化为NULL，它可能有也可能没有一些垃圾值，所以有时它会导致崩溃，有时它不会。

这是我最近遇到的问题的精简示例：

```
class BadFoo
{
public:
    BadFoo() {} // BAD! We didn't initialize the pointer
    ~BadFoo() {
        if (myPtr) {
            delete myPtr; // CRASH HERE IF INVALID ADDRESS
        }
    }
    // OTHER MEMBER FUNCTIONS HERE

private:
    int* myPtr;
}

class GoodFoo
{
public:
    GoodFoo() : myPtr(NULL) {} // GOOD! Can't be garbage value now
    ~GoodFoo() {
        if (myPtr) {
            delete myPtr;
        }
    }
    // OTHER MEMBER FUNCTIONS HERE

private:
    int* myPtr;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-06T05:45:40.637

就我而言，问题是`Typeface`在`TextView`. 在进程死亡时，一个好的字体变成了坏的。而且，当用户回到我的应用程序时，我没有再次初始化这个字体，我使用的是同样糟糕的字体。因此，这引发了致命错误。

```
2020-03-06 10:35:58.122 com.xxxxxx.xxxxxx A/libc: Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x2000 in tid 24474 (com.xxxxxx.xxxxxx), pid 24474 (com.xxxxxx.xxxxxx)
2020-03-06 10:35:58.141 ? E/DEBUG: failed to readlink /proc/24474/fd/47: No such file or directory
2020-03-06 10:35:58.141 ? E/DEBUG: failed to readlink /proc/24474/fd/48: No such file or directory
2020-03-06 10:35:58.176 ? A/DEBUG: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
2020-03-06 10:35:58.176 ? A/DEBUG: Build fingerprint: 'google/sdk_gphone_x86/generic_x86:10/QSR1.190920.001/5891938:user/release-keys'
2020-03-06 10:35:58.176 ? A/DEBUG: Revision: '0'
2020-03-06 10:35:58.176 ? A/DEBUG: ABI: 'x86'
2020-03-06 10:35:58.176 ? A/DEBUG: Timestamp: 2020-03-06 10:35:58+0530
2020-03-06 10:35:58.176 ? A/DEBUG: pid: 24474, tid: 24474, name: com.xxxxxx.xxxxxx  >>> com.xxxxxx.xxxxxx <<<
2020-03-06 10:35:58.176 ? A/DEBUG: uid: 10140
2020-03-06 10:35:58.176 ? A/DEBUG: signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x2000 
```

[完整的 stach 跟踪](https://pastebin.com/raw/6DykadwU)

# javascript - Bootstrap carousal with the last version of jQuery

> ID：13196015
> 
> 赞同：2
> 
> 时间：2012-11-02T13:17:57.297
> 
> 标签：javascript, jquery, jquery-plugins, twitter-bootstrap

This demo using carousel works fine.. I mean clicking on next/previous button the images change.

Here is the code:

```
$('[id^="myCarousel"]').carousel(); 
```

Here is the demo using jquery 1.7.1: [http://jsfiddle.net/S2rnm/300/](http://jsfiddle.net/S2rnm/300/)
Here is the demo using jquery 1.8.2: [http://jsfiddle.net/S2rnm/303/](http://jsfiddle.net/S2rnm/303/)

If I try to upload the version of jQuery to 1.8.2, when I click on next/previous button the images do not change.
Any hints?

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:33:29.663

您的选择器是错误的：`$('.carousel.slide').carousel();`但您的轮播只是`<div id="myCarousel">`.

此外，您需要类才能正常工作，例如 : `<div id="myCarousel" class="carousel slide">`。只有 ID 是可选的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:28:32.603

**编辑：**

[在小提琴 303 http://jsfiddle.net/c5GB3/](http://jsfiddle.net/c5GB3/)中更改示例时，将容器 div 更改为此`<div id="myCarousel" class="carousel slide">`并将 jquery 选择器更改为此似乎对我有用 1.8.2`$('.carousel').carousel();`

# c# - Compare XML file with Text File

> ID：13196017
> 
> 赞同：0
> 
> 时间：2012-11-02T13:18:02.910
> 
> 标签：c#, xml, components, compare, text-comparison

I have two files to compare with each other... 1) An xml file 2) A text file made from same XML but have some changes done afterwards.

I need to compare these two files and highlight the changed/inserted/deleted words (xml tags should not be highlighted). Can anyone suggest me a third party component that can help me out make such an application? I want to develop this application in C#.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:34:14.430

也许这可能有用：

C# 中的通用、可重用差异算法 - II [http://www.codeproject.com/Articles/6943/A-Generic-Reusable-Diff-Algorithm-in-C-II](http://www.codeproject.com/Articles/6943/A-Generic-Reusable-Diff-Algorithm-in-C-II)

# c# - send mail on button click

> ID：13196027
> 
> 赞同：0
> 
> 时间：2012-11-02T13:18:40.277
> 
> 标签：c#, asp.net

i am trying to send mail on button click. on local pc the code is working but on server the code is not working. it gives error "Unable to connect to the remote serverSource:-SystemData :- System.Collections.ListDictionaryInternal " please help

home.aspx

```
public partial class About : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        SendContactUsEmail();
        SendAutoResponseEmail();

    }
    private bool SendContactUsEmail()
    {
        MailMessage MailObject = new MailMessage();

        MailObject.From = new MailAddress(ConfigurationSettings.AppSettings["EmailFrom"].ToString());
        MailObject.To.Add(new MailAddress("test@technosys.com"));
        MailObject.Subject = " technosys Contact Alert Subject : ";
        string ErrorHandling_Message = "Dear Manager," + " " + "<br/>" + "A customer want to contact you with following details:";
        ErrorHandling_Message += "<br><br>Name: vesh";
        ErrorHandling_Message += "<br><br>Email: test@technosys";
        ErrorHandling_Message += "<br><br>Company: technosys";
        ErrorHandling_Message += "<br><br>Phone: 123456789";
        ErrorHandling_Message += "<br><br>Message: Test mail on live server";
        ErrorHandling_Message += "<br><br>Sincerely" + "<br>" + "Web Controller" + "<br>" + "<b>Technosys</b>";
        try
        {
            MailObject.Body = ErrorHandling_Message;
            MailObject.IsBodyHtml = true;
            MailObject.Priority = MailPriority.High;
            SmtpClient smtp = new SmtpClient();
            smtp.Host = "smtp.gmail.com";
            smtp.Port = 587;
            smtp.Credentials = new NetworkCredential(ConfigurationSettings.AppSettings["EmailFrom"].ToString(), ConfigurationSettings.AppSettings["Password"].ToString());
            smtp.EnableSsl = true;
            smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
            smtp.Send(MailObject);
            Label1.Text = "Done";
            return true;
        }
        catch (Exception ex)
        {
            Label1.Text = ex.Message;
            return false;
        }
    }
    private bool SendAutoResponseEmail()
    {
        MailMessage MailObject = new MailMessage();

        MailObject.From = new MailAddress(ConfigurationSettings.AppSettings["EmailFrom"].ToString());
        MailObject.To.Add(new MailAddress("test@technosys.com"));
        MailObject.Subject = "Thanks for your request at technosys";
        string ErrorHandling_Message = "Dear, " + "<br/></br>" + "Thanks for your email. You can expect to hear back from us with an answer to your inquiry within : 24 hours.";
        ErrorHandling_Message += "<br><br>We look forward to helping you.";
        ErrorHandling_Message += "<br><br>Sincerely" + "<br>" + "<br>" + "<b>Technosys</b>" + "<br><img alt=\"\"  src=\"http:/images/logomain.jpg\" >";
        try
        {
            MailObject.Body = ErrorHandling_Message;
            MailObject.IsBodyHtml = true;
            MailObject.Priority = MailPriority.High;
            SmtpClient smtp = new SmtpClient();
            smtp.Host = "smtp.gmail.com";
            smtp.Port = 587;
            smtp.Credentials = new NetworkCredential(ConfigurationSettings.AppSettings["EmailFrom"].ToString(), ConfigurationSettings.AppSettings["Password"].ToString());
            smtp.EnableSsl = true;
            smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
            smtp.Send(MailObject);
            Label1.Text = "Done";
            return true;
        }
        catch (Exception ex)
        {
            Label1.Text = ex.Message;
            return false;
        }
    }
} 
```

web.config

```
<?xml version="1.0"?>
<!-- 
    Note: As an alternative to hand editing this file you can use the 
    web admin tool to configure settings for your application. Use
    the Website->Asp.Net Configuration option in Visual Studio.
    A full list of settings and comments can be found in 
    machine.config.comments usually located in 
    \Windows\Microsoft.Net\Framework\v2.x\Config 
-->
<configuration>
    <appSettings>
        <add key="EmailFrom" value="test@technosys.com"/>
      <add key="Password" value="best"/>
    </appSettings>
    <connectionStrings/>
    <system.web>
    <customErrors  mode="Off">

    </customErrors>
 <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
        <compilation debug="true" targetFramework="4.0">
        </compilation>
        <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
        <authentication mode="Windows"/>
        <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->
        <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/></system.web>
    <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:28:46.483

你为什么不直接使用这个：

```
SmtpClient smtpClient = new SmtpClient("smtp.gmail.com",587);
smtpClient.EnableSsl = true;
System.Net.NetworkCredential credentials = new 
                   System.Net.NetworkCredential(
                       ConfigurationSettings.AppSettings["EmailFrom"].ToString(),
                       ConfigurationSettings.AppSettings["Password"].ToString()
                   );
smtpClient.Credentials = credentials;

string[] tos;
this.to=this.to.Replace(',',' ');
//this.Bcc = this.bcc;
tos=this.to.Split();
for (int i = 0; i < tos.Length; i++)
{
    MailMessage ml = new MailMessage(this.from, tos[i].ToString(), this.sub, 
                                     this.msg);
    ml.IsBodyHtml = true;
    smtpClient.Send(ml);
} 
```

# iphone - Is it against the convention to use a number at the start of a boolean variable?

> ID：13196035
> 
> 赞同：-3
> 
> 时间：2012-11-02T13:19:15.737
> 
> 标签：iphone, objective-c, ios, xcode, boolean

Is it against the convention of Objective C 2.0 to declare a boolean value starting with a number ex. 123bool?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:27:25.910

你为什么不使用数组？`BOOL foos[400];`我认为声明这么多BOOL变量并且名称几乎相同是非常糟糕的。顺便说一句，不要将变量的第一个字母大写，这是一种糟糕的编码风格。

# git - git diff 不创建临时文件

> ID：13196045
> 
> 赞同：4
> 
> 时间：2012-11-02T13:19:46.267
> 
> 标签：git, diff, gitk

我在使用 git 时遇到了一些奇怪的事情。我在我的 Windows 7 机器上使用 git。

我想查看一些代码更改，所以我启动了 gitk 来检查我想要查看的提交中的内容。在我的已更改文件列表中，我突出显示了第一个文件，并且可以看到其左侧的差异。但是我已经安装了 Beyond Compare，然后右键单击第一个文件并选择“外部差异”。这很好用，我可以在 Beyond Compare 中区分文件。

但是当我尝试对第二个文件做同样的事情时，它失败了。Beyond Compare 打开，我可以看到路径中显示了两个文件，但它们不存在。

当我查看我的文件系统时，我可以看到“git.gitk-tmp.7992”存在（引用的文件夹）但它是空的，因此当然 Beyond Compare 和 git difftool 无法获取它们。

当我尝试在两个分支之间执行“git difftool”时，也会发生类似的事情。

我不知道为什么它不会创建那些临时文件？！？

我希望有人可以对此有所了解。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:22:44.367

我不太了解Beyond Compare，但我会尝试一下：

当您第一次运行外部差异时，它会启动 BC。第二次，它启动一个新的 BC 进程，找到前一个，因此它向第一个实例发送消息，然后退出。

当您在 gitk 中单击外部差异时，它会创建临时文件，运行给定的命令，等待程序退出，然后删除临时文件。当您已经拥有一个 BC 实例时，第二个实例几乎会立即退出，因此您找不到它们。

这是我能做的最好的 - 尝试挖掘 BC 的手册和论坛。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-17T07:39:12.013

gracchus 的回答很到位，帮助我解决了我的问题。

在 Beyond Compare 的情况下，用户应该使用`BComp.exe`gitk 而不是`BCompare.exe`（我正在使用的）。

BComp.exe：

> 这是一个 Win32 GUI 程序。如果从版本控制系统启动，它应该可以正常工作。如果从控制台窗口启动，控制台（或批处理文件）将不会等待它。

B比较.exe：

> 这是主要的应用程序。无论您打开了多少个窗口，一次只会运行一个副本。如果您启动第二个副本，它将告诉现有副本开始比较并立即退出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-13T14:47:12.607

我使用 gitk + WinMerge 并遇到了同样的问题。`External diff`我通过在调用命令或更改 WinMerge 设置之前关闭 WinMerge 的所有实例来避免此错误：

```
Options > General > Uncheck the "Allow only one instance to run" checkbox. 
```

# jquery - jquery html() 替换整个字段集

> ID：13196053
> 
> 赞同：1
> 
> 时间：2012-11-02T13:20:14.953
> 
> 标签：jquery, html

我正在尝试使用 jquery 更新选择框，而不是仅仅替换`<div>`包含选择框。`html()`正在更换整个`<fieldset>`. 我已经尝试了所有方法，但看不到我在哪里出错了。

我的jQuery是：

```
$('div.companyselect', $(parent.document)).html(data.success); 
```

我的 HTML 是：

```
<fieldset>
    <legend>Company Information</legend>
    <div class="column-left">
      <label>Manufacturer Name:</label>
      <div class="companyselect"><?php echo $select ?><div>&nbsp;

      <a href="../forms/modal_company.php" class="various fancybox.ajax" style="font-size:12px;">Add a Company</a>

    </div>
    <div class="clear"></div>  
 </fieldset>
 <fieldset>
    <legend>Vendor Information</legend>
    <div class="column-left">
      <label>First Name</label>
      <input name="name" class="text-input medium4-input required" type="text" id="name" value="">
    </div>
    <div class="column-right medium_margin">
      <label>Last Name:</label>
      <input name="last" class="text-input medium4-input required" type="text" id="last" value="">
    </div>
    <div class="clear"></div>
    <div>    
      <label>Address:</label>
      <input name="address" class="text-input medium2-input required" type="text" id="address" value=""> 
    </div>  
    <div class="clear"></div> 
    <div class="column-left" style="width:52%">
      <label>City:</label>
      <input name="city" class="text-input medium3-input required" type="text" id="city" value="" >
    </div>
    <div class="column-left" style="width:15%">
      <label>State:</label>
      <input name="state" class="text-input small-input required" type="text" id="state" value="">
    </div>
    <div class="column-left" style="width:30%">
      <label>Zipcode:</label>
      <input name="zipcode" class="text-input medium5-input required" type="text" id="zipcode" value="" >
    </div>
    <div class="clear"></div>
    <div class="column-left medium_margin">
      <label>Phone:</label>
      <input name="tel" class="text-input medium-input required" type="text" id="tel" value="">
    </div>
    <div class="column-right medium_margin">
      <label>(optional) Fax:</label>
      <input name="fax" class="text-input medium-input" type="text" id="fax" value="">
    </div>
    <div class="clear"></div> 
  </fieldset> 
```

有人可以帮我理解为什么要替换整个 first 而不仅仅是 with class="companyselect" 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:21:45.500

很可能是由于 HTML 损坏：

```
<div class="companyselect"><?php echo $select ?><div>&nbsp; 
```

应该：

```
<div class="companyselect"><?php echo $select ?></div>&nbsp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:23:42.397

好像你错过了结尾的 div。

```
 <div class="companyselect"><?php echo $select ?><div> 
```

在这里，您打开两个 div 标签，而不是关闭第一个标签。

# tomcat - 无法使用 IP 地址连接到远程计算机

> ID：13196062
> 
> 赞同：0
> 
> 时间：2012-11-02T13:20:58.230
> 
> 标签：tomcat, networking, service, tcp, ports

我想运行不同机器的网址，例如

```
http://192.168.7.1:8080 
```

但它会超时。

在这台机器上（具有 ipaddress - 192.168.7.1），如果我运行相同的 url，它可以工作。

有人知道机器 192.168.7.1 上的任何设置是否允许远程连接吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:23:32.580

很可能与防火墙有关。您应该添加一条规则，允许 TCP 连接到您的机器上具有 ip 192.168.7.1 的端口 8080。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:31:07.257

[http://windows.microsoft.com/is-IS/windows7/Open-a-port-in-Windows-Firewall](http://windows.microsoft.com/is-IS/windows7/Open-a-port-in-Windows-Firewall)

正如我之前的某个人所说，它很可能与防火墙有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:32:10.927

这可能与 192.168.7.1 地址是私有地址这一事实有关。如果您的第二台机器位于不同的子网中，您将无法使用私有地址（而是网关的公共地址）访问它。

如果机器在同一个网络中（都具有相同的网络地址 - 192.168.7.X；假设网络掩码是 24 位），请检查您是否可以从其他主机 ping 一个主机。

简而言之：如果您的第二台主机的地址是 192.168.7.X，这很可能是网络问题（FW，路由，...）如果不是，您将无法使用其本地地址访问第二台机器（当然一些高级网络可以使用一些高级路由，但让我们专注于一般的东西......）

# facebook - Facebook 图书图对象

> ID：13196064
> 
> 赞同：0
> 
> 时间：2012-11-02T13:20:59.693
> 
> 标签：facebook

任何人都知道如何获取“Book”facebook 图形对象的 isbn 属性？

从图形资源管理器中，id 为 107965322564266 的图形对象的节点（它是书页）返回除作者和 ISBN 之外的可能信息

```
{
   "name": "Good to Great", 
   "is_published": true, 
   "is_community_page": true, 
   "description": "Good to Great: Why Some Companies Make the Leap... and Others Don't is:", 
   "release_date": "October 16, 2001", 
   "talking_about_count": 201, 
   "category": "Book", 
   "id": "107965322564266", 
   "link": "https://www.facebook.com/pages/Good-to-Great/107965322564266", 
   "likes": 71468
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:41:59.200

那不是 book 对象，而是 FB Page id（`"is_community_page": true`和`"link"`contains `facebook.com/pages/`）。

这是书籍对象的示例，它是由 Goodreads 创建的自定义 Open Graph 对象：

[http://www.goodreads.com/book/show/905.The_Inner_Game_of_Tennis](http://www.goodreads.com/book/show/905.The_Inner_Game_of_Tennis)

看一下页面源/`og:`标签：

```
<meta property="og:title" content="The Inner Game of Tennis"/>
<meta property="og:image" content="http://photo.goodreads.com/books/1320565180msq/905.jpg"/>
<meta property="good_reads:isbn" content="0679778314">
<meta property="good_reads:page_num" content="134"> 
```

所以接下来要做的是找到一个特定的 og 书籍对象（你没有说你在哪里/如何采购所有书籍）并检查 og 标签。

# tcp - 找一个像 fiddler 这样的 TCP 网络调试器，但是除了 80 之外还有其他端口

> ID：13196067
> 
> 赞同：6
> 
> 时间：2012-11-02T13:21:06.170
> 
> 标签：tcp, network-protocols

我使用[fiddler](http://fiddler2.com/fiddler2/)通过 http 80 端口捕获流量。

但我正在寻找一些可以捕获任何其他端口上的 TCP 流量的免费工具。

例如，我的机器上运行着 abc.exe。我打开工具，瞄准 abc.exe 进程，我可以看到 abc.exe 正在发送什么包到什么地址。

有什么好的工具吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T13:24:05.153

您可以使用[Wireshark](http://www.wireshark.org/)，我认为它是最好的。

# javascript - 申请表验证

> ID：13196068
> 
> 赞同：-2
> 
> 时间：2012-11-02T13:21:08.437
> 
> 标签：javascript, html, css

大家好，我正在尝试在申请表中进行一些验证。

我有 3 个用于不同手机号码的文本框，例如家庭、工作、手机等。我需要 1 个必填字段 3。用户必须输入至少 1 个 3。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:38:38.007

不要将输入值与 "" 或 '' 进行比较。用户可以简单地键入空格。而是检查或修剪空格并检查它是否是有效数字。

```
<script type="text/javascript">

//Check for all whitespace.
function hasWhiteSpace(s){
    return /^\s+$/g.test(s);
}

//Check for valid number
function isNumber(n) {
      return !isNaN(parseFloat(n)) && isFinite(n);
}

function validation(){
    var mobile = document.getElementById('mobile').value;
    var home = document.getElementById('home').value;
    var work = document.getElementById('work').value;

    var error = 0;

    if(!(!hasWhiteSpace(mobile) && isNumber(mobile))){
        error += 1;   
    } 
    if(!(!hasWhiteSpace(home) && isNumber(home))){
        error += 1;      
    } 
    if(!(!hasWhiteSpace(work) && isNumber(work))){
        error += 1;   
    } 

    if(error == 3){
        alert("You must enter at least one contact number.");
        return false;
    }else{
        return true; 
    }
}
</script> 
```

在提交时从您的表单调用验证（）。

```
<form onsubmit="return validation();"> 
```

[JavaScript 号码验证](http://www.philipstarritt.com/jsnumbervalidator.php)

[JavaScript 检查空白](http://www.philipstarritt.com/jswhitespacevalidator.php)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:27:23.363

您可以尝试下面给出的代码

```
 <script type="text/javascript">
       function checkValidation(){
            var mobile = document.getElementById('mobile').value;
            var gome = document.getElementById('home').value;
            var work = document.getElementById('work').value;
            var error_count = 0;

            if(mobile == ''){
                error_count = error_count + 1;   
            } 
            if(home == ''){
                error_count = error_count + 1;   
            } 
            if(work == ''){
                error_count = error_count + 1;   
            } 

            if(error_count == 3){
                 alert("Please add at least one from mobile ,work,home contact no.! ");
                 return false;
             }else{
                   return true; 
             }
       }
 </script> 
```

你可以尝试这样的事情。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:33:33.127

我希望这对您正在寻找的内容有所帮助。如果您在提交调用validation() 函数时使用html 表单：

```
<script type="text/javascript">
function validation() {
  var a = document.form.phone.value;
  var b = document.form.mobile.value;
  var c = document.form.home.value;
  if(a=="" && b =="" && c =="") {
    alert("Please Enter at least one Number");
    //add other validation if you need here
    document.form.phone.focus(); // focus the first field for example
    return false;
  }
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:42:42.833

jQuery 以防万一

[演示](http://jsfiddle.net/mplungjan/cm9Vj/)

HTML：

```
<form id="form1">
  Home <input type="phone" class="phones"><br/>
  Work <input type="phone" class="phones"><br/>
  Mobile <input type="phone" class="phones"><br/>
  <input type="submit">
</form>
​ 
```

JS：

```
$(function(){
    $("#form1").on("submit",function() {
        var notempty = $(".phones[value!='']"); // you can extend this test
        if (notempty.length<1) {
            alert('Please fill at least one number');
            $(".phones:first").focus();
            return false;
        }
        return true;
    });
}); ​ 
```

# popup - Extjs 4弹出窗口垂直滚动条不在Google chrome中移动

> ID：13196071
> 
> 赞同：0
> 
> 时间：2012-11-02T13:21:19.810
> 
> 标签：popup, scroll, extjs4, tabpanel

我在 Extjs 视口布局中有一个弹出窗口，在这个弹出窗口中我有一个选项卡面板。当标签面板内容太大时弹出窗口显示垂直滚动条但滚动条在谷歌浏览器中没有移动。它在 Firefox 中运行良好。

![在此处输入图像描述](../Images/e9face92bb6d1c041c5a0b4b7c356d66.png)

示例代码

```
var first_tab_form = Ext.create('Ext.form.Panel', {
    autoHeight: true,
    frame: false,
    fileUpload: true,
    fieldDefaults: {
        labelWidth: 130,
        labelSeparator: ' ',
        labelAlign: 'right',
        cls: 'textlineht ff_styles'
    },
    items: [{
        fieldLabel: 'Field1',
        xtype: 'textfield',
        allowBlank: false,
        anchor: '60%'
    }, {
        fieldLabel: 'Field2 ',
        xtype: 'htmleditor',
         anchor: '90%'
    }, {
        fieldLabel: 'Field3',
        xtype: 'htmleditor',
        anchor: '90%'
        }] 
});

var MyTabs = Ext.createWidget('tabpanel', {
    activeTab: 0,
    width: 780,
    height: 520,
    //autoHeight: true,
    //minHeight: 600,
    plain: true,
    defaults: {
        autoScroll: true,
        width: 780,
        height: 520,
    },
    items: [{
        title: 'My First Tab',
        //layout: 'fit',
        bodyPadding: 5,
        items: first_tab_form
    }, {
        title: 'My second tab',
        //layout: 'fit',
        bodyPadding: 5,
        items: second_tab_form
    }]
});

var MyWindow = Ext.create('Ext.window.Window', {           
        height: 560,           
        y: 10,
        width: 800,
        //autoScroll: true,
        //closeAction: 'hide',
        frame: false,
        border: false,
        modal: true,
        bodyPadding: 10,
        plain: true,
        //layout: 'fit',
        maximizable: true,
        items: MyTabs
    }).show(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:37:51.833

您需要升级到 4.1x - 由于虚拟滚动而导致的这些问题已得到修复。

# common-lisp - 如何将列表传递给普通 lisp 中的宏？

> ID：13196080
> 
> 赞同：3
> 
> 时间：2012-11-02T13:21:35.483
> 
> 标签：common-lisp

我正在尝试将列表传递给宏，例如：

```
(defmacro print-lst (lst)
  `(progn
     ,@(mapcar #'(lambda (x) `(print ,x)) lst)))
(let ((lst '(1 2 3)))
      (print-lst lst)) 
```

它捕获错误：“值 LST 不是 LST 类型”。

所以，我的问题是，这段代码有什么问题以及如何将列表传递给宏？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T14:08:53.060

我不确定为什么要将其定义为宏而不是常规函数，但问题是宏不评估它们的参数。如果你给它一个词法变量的名字，它看到的只是名字（`'LST`），而不是绑定的值。它（正确地）抱怨该符号`'LST`不是一个列表，因此不是`MAPCAR`.

您可以将其称为`(print-lst (1 2 3))`，但是您可以不使用宏而只做`(mapc #'print lst)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T22:57:21.953

你试图用你的宏做的是扩展一个文字列表。

不评估宏参数。所以，`print-lst`实际上是接收符号`lst`，而不是绑定到变量的列表。

您要么知道这一点并给出`print-lst`一个文字列表，要么您可以生成评估宏参数的代码：

```
(defmacro print-lst (lst)
  (let ((item (gensym)))
    ;; Macros usually make sure that expanded arguments are
    ;; evaluated only once and in left-to-right order.
    ;; 
    ;; In this case, we only have one argument and we only evaluate it once.
    `(dolist (,item ,lst)
       (print ,item)))) 
```

虽然，这显然不是一个很好的宏示例，但它最好是一个函数：

```
(defun print-lst (lst)
  (dolist (item lst)
    (print item))) 
```

如果您希望内联调用`print-lst`，您可以查阅您的实现文档以查看它是否关注`(declaim (inline print-lst))`.

另一种选择是使用编译器宏来补充函数，以内联调用，其中参数的评估是编译时的已知值，但再次查看您的实现是否关注编译器宏：

```
(define-compiler-macro print-lst (&whole form lst &environment env)
  (declare (ignorable env))
  ;; Some implementations have an eval function that takes an environment.
  ;; Since that's not standard Common Lisp, we don't use it in constantp.
  (if (constantp lst)
      `(progn
         ,@(mapcar #'(lambda (item)
                       `(print ,item))
                   (eval lst)))
      ;; Return the original form to state you didn't transform code.
      form)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-22T12:12:09.917

您的代码不必要地使用了宏。实际上，您可以像上面提到的那样 eval (mapcar #'print '(1 2 3)) 。您也可以使用不带列表引号的 (print-lst (1 2 3))，但不建议这样做，因为这不符合使用参数调用函数的一般做法。

总而言之，在调用宏时，如果您希望对其进行评估，则不应引用没有 eval 逗号 ',' 的符号，因为它将**逐字替换**到宏模板中。

例如

```
(setq a 1)

;;A won't be evaluated without the comma
(defmacro foo (x) `(progn ,(print x))
(foo 'a) ;;=> 'A (A is returned since (print 'a) is evaluated)
(foo a) ;;=> A (1 is returned since (print a) is evaluated)

;;A is evaluated
(defmacro bar (x) `(print ,x))
(bar 'a) ;;=> A
(bar a) ;;=> 1 
```

你的代码：

```
(defmacro print-lst (lst)                                                                                    
  `(progn                                                                                                    
     ,@(mapcar #'(lambda (x) `(print ,x)) lst))) 
```

'mapcar' 表单将作为一个整体进行评估，但 'lst' 只会替换您传入的内容。

我可以定义一个函数而不是宏来解决问题：

```
(defun print-lst (lst)
  (mapcar #'eval
    (mapcar #'(lambda (x) `(print ,x)) lst))) 
```

然后：

```
(let ((lst '(1 2 3)))
  (print-lst lst))

;;=>
1
2
3
(1 2 3) 
```

如果您对标题中的问题感兴趣，可以查看我对此的另一个答案：

[如何将“或”应用于 elisp 中的列表](https://stackoverflow.com/questions/5902847/how-do-i-apply-or-to-a-list-in-elisp/34946813#34946813)

# jasper-reports - 使用 JRBeanCollectionDataSource

> ID：13196084
> 
> 赞同：1
> 
> 时间：2012-11-02T13:21:46.217
> 
> 标签：jasper-reports, jpa-2.0

我正在使用 ireport-4.5.0 生成报告。我正在使用`JRBeanCollectionDatasource`. 我正在向这个数据源发送对象列表。我正在使用 JPA 查询来获取结果列表。

在此查询中，如果我给`SELECT m from mobile m`它工作正常并生成报告，但如果我给`SELECT m.title,m.gender from mobile m`它则给出异常。它无法找到该属性。

怎么做才能解决这个问题？谁能告诉我如何解决这个问题？这么多天来，我在这里被打动了。对不起我的英语不好。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:38:42.950

您的第二个查询**不**返回 bean 的集合，而是返回数组 (Object[]) 的集合，它们都有两个元素：标题和性别。该数组没有属性（你不能调用它） `getGender`，`getTitle`因此是例外。

您有大量的解决方案：

*   编写一个只有两个属性的简单 bean（例如 TitleGener）：gender 和 title。它还应该有一个初始化它们的构造函数。然后将您的 JPA 查询更改为：`SELECT new my.utils.TitleGender(m.title,m.gender) from mobile m`。这样，您将获得一组实际上确实具有所需属性的 bean。这是最快的解决方法。

*   根本不用`JRBeanCollectionDataSource`，只使用标准的 JDBC 数据源。无论如何，您似乎都不了解 JPA 的工作原理，因此您是否需要它是值得怀疑的。这是 - 在我看来 - 最好的选择。

*   编写一个简单的、专门`JRDataSource`化的包装 Object[]。该接口只有两种方法并且易于实现 - 重点是将属性名称转换为其索引 int Object[]，在您的情况下，转换将是硬编码的。这就是我会做的。

# c# - 如何进行单选 linq-to-sql MAX 查询？

> ID：13196085
> 
> 赞同：0
> 
> 时间：2012-11-02T13:21:48.060
> 
> 标签：c#, sql, sql-server, linq-to-sql, max

这段代码

```
int maxTrackId = dataContext.TicketTracks.Max(T => T.TrackId); 
```

生成以下`SQL`代码：

```
SELECT MAX([t0].[TrackId]) AS [value]
FROM [dbo].[TicketTracks] AS [t0] 
```

但是如果表是空的，我会得到一个异常，即不能将可空值分配给不可为空的变量。

然后我编写这段代码，明确告诉 SQL 提供程序我需要最大值或空值：

```
int? maxTrackId = dataContext.TicketTracks.Max(T => (int?)T.TrackId); 
```

它在那个不可为空的 SQL 列上工作正常，给我一个`null`或一个数字。但是`SQL`生成的代码有点奇怪：

```
SELECT MAX([t1].[value]) AS [value]
FROM (
    SELECT [t0].[TrackId] AS [value]
    FROM [dbo].[TicketTracks] AS [t0]
    ) AS [t1] 
```

所以这看起来很奇怪，尤其是有两个`SELECT`s。有什么办法可以规避这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:26:43.050

SQL 可能很复杂，但没有性能差异。SQL Server 查询优化器可靠地将两个语句优化到同一个计划。

确实，删除多余的嵌套选择是一件小事。我从未见过这会导致计划差异。

所以这是一个美学问题，而不是一个实际问题。ORM 生成复杂的代码，我学会了接受它。

# json - 如何在 Flex / Actionscript 中美化 JSON 字符串？

> ID：13196092
> 
> 赞同：1
> 
> 时间：2012-11-02T13:22:15.170
> 
> 标签：json, actionscript-3, apache-flex

作为 HTTP 请求的结果，我在 URLLoader 对象中获得了 JSON 数据。我需要将 JSON 以格式化的方式放入 TextField 中。

我怎样才能做到这一点：

```
[{"id":"barrrrrr","client":"foo"}] 
```

看起来像这样：

```
[
   {
      "id":"barrrrrr",
      "client":"foo"
   }
] 
```

在文本字段内？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:42:48.070

在 flash player 11+ 中使用本机 JSON 对象

```
var stringJSON:String = loader.data as String;
var jsonData:Object = JSON.parse(stringJSON);
textField.text = JSON.stringify(jsonData,null,4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:36:43.267

这与您所要求的不完全相同，但我们使用此方法记录 as3 对象（也是 json），它可能对您也有用：

```
package
{
import flash.display.Sprite;
import flash.utils.getQualifiedClassName;

public class astest extends Sprite
{
    public function astest()
    {
        var jsonStr:String = '[{"id":"barrrrrr","client":{"id":"barrrrrr","client":"foo"}},{"id":"barrrrrr","client":"foo"}]';
        var jsonObj:Object = JSON.parse(jsonStr);

        trace(parse(jsonObj));
    }

    private static const simpleTypes:Array = ["int", "uint", "String", "Number", "Boolean", "null", "XML", "void"];
    private static function parse(o:Object, tabs:String = ""):String
    {
        var out:String = "";
        var tabStr:String = "    ";
        var cnt:int = 40;           //number of properties on the same object to log out 
        var type:String;

        for(var prop:* in o)
        {
            type = "null";
            try{
                type = getQualifiedClassName(o[prop]);
            }catch(error:Error){};

            out+= tabs + String(prop) + ":" + type + " = ";

            if(simpleTypes.indexOf(type) >=0)
                out+=o[prop]+"\r";
            else
                out+=type+"\r"+parse(o[prop], tabs+tabStr);

            if(--cnt<=0)
            {
                out+=tabs+"...\r";
                break;
            }
        }

        return out;
    }
}
} 
```

此示例的输出将是：

```
0:Object = Object
    client:Object = Object
        client:String = foo
        id:String = barrrrrr
    id:String = barrrrrr
1:Object = Object
    client:String = foo
    id:String = barrrrrr 
```

您可以修改*parse*方法（这很简单）以使输出与您的更相似。

# facebook - 在没有 App ID 的情况下使用 FB.ui 功能？

> ID：13196100
> 
> 赞同：2
> 
> 时间：2012-11-02T13:22:45.050
> 
> 标签：facebook, app-id, fb.ui

背景：我们有一个市政网页，我们可以在其中发布公告。我还希望能够将这些公告发布到 FB，而无需登录 FB 并重新发布所有内容 - 我想要一站式购物。

据我了解，您需要一个 App ID 才能使用 FB.ui 功能。这通常不是问题，但我们有一个粉丝页面而不是用户页面，我似乎无法访问开发人员部分来生成应用 ID。

我可以到达[https://developers.facebook.com/](https://developers.facebook.com/)。当我注册我的手机时，FB 发送给我的确认 ID 太长了两位数。作为替代方案，我转到他们发送的链接，但只是被重定向到我组织的仪表板，并且永远无法进入开发部分。

有什么方法可以“伪造” App ID 或采取某种变通方法来进入 Dev 部分，这样我就可以获得 App ID，还是我不走运？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:29:04.117

您还应该能够使用信用卡而不是电话号码：

> [https://secure.facebook.com/settings?tab=payments](https://secure.facebook.com/settings?tab=payments)

没有办法“伪造” App ID，这会立即为垃圾邮件发送者开辟道路。

如果没有 App/ID，则无法使用 FB.ui，但可以使用 sharer.php：

> http://www.facebook.com/sharer.php?u=[网址]

这只是一个简单的链接，您要分享的页面必须使用 Open Graph 标签填充：

> [http://ogp.me/](http://ogp.me/)

# regex - 网址重写正则表达式

> ID：13196101
> 
> 赞同：0
> 
> 时间：2012-11-02T13:22:45.880
> 
> 标签：regex, url-rewriting, friendly-url

我在进行讨厌的 URL 重写时遇到了麻烦，该 URL`~/global/products/en/page?sdfsdf=sgdfg`可以在没有查询字符串的情况下完美运行，但无法使用它。有人可以帮忙吗？移动网站`~/global/products/en/m/page`使用相同的规则，这就是为什么`[a-zA-Z0-9/_-]*?`中间有。规则 6 是我尝试修复它，但我在一般的正则表达式方面很糟糕，所以任何帮助都将不胜感激。

```
<add name="rule1" 
     virtualUrl="^~/[a-z-]*/([a-zA-Z0-9/_-]*?[^\.])$" 
     rewriteUrlParameter="ExcludeFromClientQueryString"   
     destinationUrl="~/country/$1.aspx" 
     ignoreCase="true" />
<add name="rule2" 
     virtualUrl="^~/[a-z-]*/([a-zA-Z0-9/_-]*?)(.+)\?(.*)$" 
     rewriteUrlParameter="ExcludeFromClientQueryString"    
     destinationUrl="~/country/$1.aspx?$2" 
     ignoreCase="true"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:27:44.613

更改`ExcludeFromClientQueryString`为`IncludeQueryStringForRewrite`

像这样：-

```
<add name="rule1" 
     virtualUrl="^~/[a-z-]*/([a-zA-Z0-9/_-]*?[^\.])$"           
     rewriteUrlParameter="IncludeQueryStringForRewrite" 
     destinationUrl="~/country/$1.aspx"  
     ignoreCase="true" />
<add name="rule2" 
     virtualUrl="^~/[a-z-]*/([a-zA-Z0-9/_-]*?)(.+)\?(.*)$" 
     rewriteUrlParameter="IncludeQueryStringForRewrite" 
     destinationUrl="~/country/$1.aspx?$2" 
     ignoreCase="true"/> 
```

# javascript - javascript中关联键和数字的数组组合

> ID：13196106
> 
> 赞同：0
> 
> 时间：2012-11-02T13:23:08.950
> 
> 标签：javascript, jquery, arrays, json, multidimensional-array

简而言之，我开始了我的问题，

我只是读取json文件，

```
 [{"FirstCategory":"Bath","SecondCategory":"Bath Accessories","ThirdCategory":""}, {"FirstCategory":"Bath","SecondCategory":"Faucets","ThirdCategory":""},{"FirstCategory":"Bath","SecondCategory":"Fixtures","ThirdCategory":""},{"FirstCategory":"Bath","SecondCategory":"Vanities","ThirdCategory":""},{"FirstCategory":"Building Materials","SecondCategory":"Concrete","ThirdCategory":""},{"FirstCategory":"Building Materials","SecondCategory":"Fencing","ThirdCategory":""},{"FirstCategory":"Building Materials","SecondCategory":"Gypsum","ThirdCategory":""},{"FirstCategory":"Building Materials","SecondCategory":"Insulation","ThirdCategory":""},{"FirstCategory":"Building Materials","SecondCategory":"Insulssdation","ThirdCategory":""}] 
```

并尝试转换为数组

```
Array
(
  [Bath] => Array
    (
        [Bath Accessories] => Array
            (
                [0] => test
            )

        [Faucets] => Array
            (
                [0] => test1
                [1] => test2
            )

    )

)//sorry i have used PHP for simple formatting the array. 
```

我花了很多时间在这个东西上，但我无法成功，请帮助我。

```
 My javascript code : (not working.)

 var FirstCategory = [];
 var SecondCategory = [];
 var ThirdCategory = [];

 $.getJSON('tree.json', function(data) {

var dataObj = new Array();
$.each(data,function(i){
    dataObj[data[i].FirstCategory] = new Array();

    if([data[i].SecondCategory] in dataObj[data[i].FirstCategory])
        dataObj[data[i].FirstCategory][data[i].SecondCategory] = data[i].SecondCategory;
    else
        dataObj[data[i].FirstCategory][data[i].SecondCategory] = new Array();

    dataObj[data[i].FirstCategory][data[i].SecondCategory][data[i].ThirdCategory] = new Array();

});

 console.log(dataObj);

/*
$.each(data,function(i){

    if (FirstCategory == '') {
        FirstCategory.push(data[i].FirstCategory);
    }
    else
    {
        if(!FirstCategory.contains(data[i].FirstCategory))
        {
            //root
            FirstCategory.push(data[i].FirstCategory);
        }
        else
        {
            //------- second level category -------//
            if (SecondCategory == '') {
                SecondCategory.push(data[i].SecondCategory);
            }
            else
            {
                if(!SecondCategory.contains(data[i].SecondCategory))
                {
                    SecondCategory.push(data[i].SecondCategory);
                }
                else
                {
                    ThirdCategory.push(data[i].ThirdCategory);
                }
            }

        }
    }   

});
*/

});

Array.prototype.contains = function(obj) {
  var i = this.length;
  while (i--) {
        if (this[i] == obj) {
         return true;
      }
  }
   return false;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:38:59.363

请注意[Javascript 没有“关联数组”](http://andrewdupont.net/2006/05/18/javascript-associative-arrays-considered-harmful/)。

更以编程方式：

```
var levels = ["FirstCategory", "SecondCategory", "ThirdCategory"]; // possibly more
var dataObj = {}; // an empty object
for (var i=0; i<data.length; i++) {
    var cur = dataObj;
    for (var j=0; j<levels.length; j++) {
        var key = data[i][levels[j]];
        if (!key) // empty
            break;
        if (key in cur)
            cur = cur[key];
        else
            cur = cur[key] = {};
    }
} 
```

示例输入的结果 ( `dataObj`)，格式为 JSON：

```
{
    "Bath": {
        "Bath Accessories": {},
        "Faucets": {},
        "Fixtures": {},
        "Vanities": {}
    },
    "Building Materials": {
        "Concrete": {},
        "Fencing": {},
        "Gypsum": {},
        "Insulation": {},
        "Insulssdation": {}
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:55:00.963

这可能会奏效：

```
input = [{"FirstCategory":"Bath","SecondCategory":"Bath     Accessories","ThirdCategory":""}, {"FirstCategory":"Bath","SecondCategory":"Faucets","ThirdCategory":""},{"FirstCategory":"Bath","SecondCategory":"Fixtures","ThirdCategory":""},{"FirstCategory":"Bath","SecondCategory":"Vanities","ThirdCategory":""},{"FirstCategory":"Building Materials","SecondCategory":"Concrete","ThirdCategory":""},{"FirstCategory":"Building Materials","SecondCategory":"Fencing","ThirdCategory":""},{"FirstCategory":"Building Materials","SecondCategory":"Gypsum","ThirdCategory":""},{"FirstCategory":"Building Materials","SecondCategory":"Insulation","ThirdCategory":""},{"FirstCategory":"Building Materials","SecondCategory":"Insulssdation","ThirdCategory":""}];

function reducer (prev, val) {
    v1 = val["FirstCategory"]
    v2 = val["SecondCategory"]
    if (!(v1 in prev)) { prev[v1] = {}; }
    if (!(v2 in prev[v1])) { prev[v1][v2] = [];}
    prev[v1][v2].push(val["ThirdCategory"]);
    return prev;
}

output = input.reduce(reducer, {});

console.log(input);
console.log(output); 
```

输出：

```
{ Bath: 
   { 'Bath Accessories': [ '' ],
     Faucets: [ '' ],
     Fixtures: [ '' ],
     Vanities: [ '' ] },
  'Building Materials': 
   { Concrete: [ '' ],
     Fencing: [ '' ],
     Gypsum: [ '' ],
     Insulation: [ '' ],
     Insulssdation: [ '' ] } } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T14:34:52.613

试试这个 ：

```
var formattedData = {};
$.each(data, function(i, item) {
    if(!formattedData[item.FirstCategory]) {
        formattedData[item.FirstCategory] = {};
    }
    if(!formattedData[item.FirstCategory][item.SecondCategory]) {
        formattedData[item.FirstCategory][item.SecondCategory] = [];
    }
    formattedData[item.FirstCategory][item.SecondCategory].push(item.ThirdCategory);
}); 
```

生成的对象将具有以下结构：

```
var formattedData = {
    'Bath': {
        'Bath Accessories': [
            'Non-slip Bath Mat'
        ],
        'Faucets': [
            'Brass Fawcet (Pair)',
            'Chrome Fawcet (Pair)',
            'Gold Fawcet (Monoblock)'
        ],
        'Fixtures': [
            'xxx',
            'yyy',
            'zzz'
        ],
        //etc.
        //etc.
    }
}; 
```

**[演示](http://jsfiddle.net/ZRbX7/1/)**

# java - System.out of nanoTime 不正确？

> ID：13196114
> 
> 赞同：4
> 
> 时间：2012-11-02T13:23:35.377
> 
> 标签：java, time

`private Timestamp timestamp = new Timestamp(System.nanoTime());`创建对象时，我正在我的一个实体中进行操作。

如果我 system.out 时间戳，我会得到类似的值；

```
2282-08-24 11:25:00.506
2286-04-16 01:47:35.882 
```

这里有什么问题？

`System.currentTimeMillis()`给出正确的日期，但我需要更准确。这里有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T13:24:58.427

`System.nanoTime()`是一种完全抽象的测量时间的方法，它与计算机启动后的 CPU 周期数有关。`java.util.Date`它与使用纪元时间（自 1970 年以来的毫秒数）完全无关。

您可以自由比较两个不同的值`System.nanoTime()`以获得非常准确的时间测量值（理论上最多 1 纳秒），但单独采用绝对值是没有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:25:33.707

> 此方法只能用于测量经过的时间，与系统或挂钟时间的任何其他概念无关。返回的值表示自某个固定但任意的原始时间以来的纳秒（可能在将来，因此值可能为负数）。在 Java 虚拟机实例中，此方法的所有调用都使用相同的来源；其他虚拟机实例可能使用不同的来源。

[文件](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:27:16.547

时间戳需要新的时间戳（毫秒）。如果你给它纳秒（new Timestamp(nanoseconds) ---> 1000 倍大），你将在未来获得 1000 次时间戳，无论这意味着什么。这是因为获得的日期是 2282 年

# xslt - 使用来自一个节点的属性值转换 XML 文件并与另一个节点合并

> ID：13196115
> 
> 赞同：0
> 
> 时间：2012-11-02T13:23:34.613
> 
> 标签：xslt, report, crosstab

我在 XSLT 下编写以实现我的报告要求所需的翻译。

虽然，输入和输出 XML 是不言自明的，但简而言之，要求是通过合并由公共属性相关的不同节点对，从现有 XML 构建新的 XML。

**输入文件**

```
<?xml version="1.0" encoding="utf-8"?>
<dataset  xmlns="http://developer.cognos.com/schemas/xmldata/1/"  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
<crosstab>
<values>
  <value row="R1" col="C1">111</value>
  <value row="R1" col="C2">222</value>
  <value row="R1" col="C3">333</value>
  <value row="R1" col="C4">444</value>
  <value row="R1" col="C5">555</value>
  <value row="R1" col="C6">666</value>
  <value row="R1" col="C7">777</value>
</values>
<corner>
  <caption>Number of Employees</caption>
</corner>
<columns>
  <colEdge>
    <caption>2010</caption>
    <colEdge id="C1">
      <caption>October</caption>
    </colEdge>
    <colEdge id="C2">
      <caption>November</caption>
    </colEdge>
    <colEdge id="C3">
      <caption>December</caption>
    </colEdge>
  </colEdge>
  <colEdge>
    <caption>2011</caption>
    <colEdge id="C4">
      <caption>January</caption>
    </colEdge>
    <colEdge id="C5">
      <caption>February</caption>
    </colEdge>
    <colEdge id="C6">
      <caption>March</caption>
    </colEdge>
    <colEdge id="C7">
      <caption>April</caption>
    </colEdge>
  </colEdge>
</columns>
<rows>
</rows> 
```

**输出文件**

```
<?xml version="1.0" encoding="utf-8"?>
<dataset xmlns:c="http://developer.cognos.com/schemas/xmldata/1/" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
<crosstab>
<values>
  <value col="October 2010">111</value>
  <value col="November 2010">222</value>
  <value col="December 2010">333</value>
  <value col="January 2011">444</value>
  <value col="February 2011">555</value>
  <value col="March 2011">666</value>
  <value col="April 2011">777</value>
</values>
<corner>
  <caption>Number of Employees</caption>
</corner>
</crosstab>
</dataset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:24:36.470

下面是我用来实现所需翻译的 XSLT。

**XSLT 文件**

```
<?xml version="1.0"?>
<xsl:stylesheet version="2.0" xmlns:c="http://developer.cognos.com/schemas/xmldata/1/"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>
<!-- Navigating crosstab node -->
<xsl:template match="c:crosstab">
<dataset>
  <crosstab>
    <xsl:apply-templates select="c:values" />
    <xsl:apply-templates select="c:corner" />
  </crosstab>
</dataset>
</xsl:template>
<!-- Navigating values node -->
<xsl:template match="c:values">
<values>
  <xsl:apply-templates select="c:value" />
</values>
</xsl:template>
<!-- Reading attributes of the value nodes -->
<xsl:template match="c:value">
<value>
  <xsl:apply-templates select="@col"/>
  <xsl:apply-templates/>
</value>
</xsl:template>
<!-- Reading Month and Year nodes for the selected attribute -->
<xsl:template match="@col">
 <xsl:attribute name="{name()}">
  <xsl:variable name="colAttribute" select="."/>
  <xsl:variable name="year" select="//c:colEdge[@id=$colAttribute[1]]/../*[1]/child::node()[1]"/>
  <xsl:variable name="month" select="//c:colEdge[@id=$colAttribute[1]]/child::node()[1]/child::node()[1]"/>
  <xsl:value-of select="concat($month,' ',$year)" />
</xsl:attribute>
</xsl:template>
<!-- Reading attributes of the corner node -->
<xsl:template match="c:corner">
<corner>
  <caption>
    <xsl:value-of select="." />
  </caption>
</corner>
</xsl:template>
</xsl:stylesheet> 
```

# variables - PowerShell、Robocopy 和 SchTasks --> 为命令发送变量和文本

> ID：13196117
> 
> 赞同：1
> 
> 时间：2012-11-02T13:23:41.763
> 
> 标签：variables, powershell, scheduled-tasks, robocopy, windows-task-scheduler

我的 Powershell 备份脚本有点问题。我使用带有 Robocopy 的任务计划程序来部署我的备份。

这是一个命令示例：

```
schtasks /Create /SC ONCE /TN $TaskName /TR "robocopy.exe $Source $Target /E /COPY:DAT /V /R:0 /W:0 /LOG+:$LogPfad" /ST $StartTime /SD $StartDate /F 
```

问题是，当我运行我的脚本时，任务会出现，但它使用相同的文本和相同的变量

例如，此脚本将使用以下命令运行任务：

```
robocopy.exe $Source $Target /E /COPY:DAT /V /R:0 /W:0 /LOG+:$LogPfad 
```

使备份无法正常运行。

它应该像这样保存在任务中：

```
robocopy.exe C:\test\source D:\test\target /E /COPY:DAT /V /R:0 /W:0 /LOG+:$LogPfad 
```

有一个选项，我可以将命令保存在 .bat 文件中并执行它，但这不应该是解决方案。

如果有人可以帮助我，那就太棒了！:D

最好的祝福

卢巴斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:15:16.297

查看您的代码，您可能想尝试这样的事情：

```
schtasks /Create /SC ONCE /TN $TaskName /TR `"robocopy.exe $QuellPfadRAW $ZielPfad /M /E /COPY:DAT /V /R:0 /W:0 /LOG:$LogPfad`" /ST $StartTime /SD $StartDate /F 
```

当您将 "s 放在 Powershell 行中时，它会将其中的所有内容都视为文字，这意味着变量不会被替换。

如果你在你的每个 "s 前面放一个 `，它应该否定它。

对不起，我花了这么长时间才回复你顺便说一句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:57:42.877

怎么样

```
$taskrun = "`"robocopy.exe $Source $Target /E /COPY:DAT /V /R:0 /W:0 /LOG+:$LogPfad" /ST $StartTime /SD $StartDate`""
schtasks /Create /SC ONCE /TN $taskrun 
```

# java - 使用 HTTP GET 和正则表达式从网站读取数据

> ID：13196126
> 
> 赞同：-1
> 
> 时间：2012-11-02T13:24:20.137
> 
> 标签：java, httpwebrequest

我有一个 PHP 脚本，它打印类似“在线”“离线”的内容和一个在特定时间发生变化的特定数字。我找到了一个 http get 请求的例子，现在我需要像 Regex 这样的东西，对吧？:o 有没有人有教程或者可以给我一个简单的例子？

请求代码：

```
String urlString;
urlString = "hear is my url^^";
URL url = new URL(urlString);
URLConnection conn = url.openConnection();
InputStream IS = conn.getInputStream(); 
```

Inputstream IS 是网站的“源代码”，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:26:15.767

你是对的。IS 包含 HTML 源代码。您应该考虑使用 HTML 解析库来提取数据。正则表达式将变得脆弱。那里有很多 html 解析器。看看下面的SO帖子

[用于 Java 的 HTML/XML 解析器](https://stackoverflow.com/questions/2129375/html-xml-parser-for-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:45:33.687

实际上，您不需要使用`URLConnection`从 PHP 脚本中获取数据。您可以使用`Jsoup`库从 PHP 脚本中获取数据，并使用此库可以根据需要解析数据。你会从这里得到它

[Jsoup API](http://jsoup.org/download)

这里是如何使用它。

[Jsoup 食谱](http://jsoup.org/cookbook/)

# javascript - Phonegap 设备无法在 iOS 中使用 Cordova 2.2.0 触发

> ID：13196130
> 
> 赞同：10
> 
> 时间：2012-11-02T13:24:48.463
> 
> 标签：javascript, jquery, ios, cordova

我正在构建一个 PhoneGap 应用程序。不幸的是，当部署到 iOS 设备和模拟器时，该`deviceready`事件永远不会触发。我正在使用 Phonegap 2.2.0。

当我将相同的代码部署到 Android（`cordova.js`当然使用 Android 特定文件）时，应用程序将完美运行。

当我将 jQuery 替换`deviceready`为 jQuery 时`ready()`，该应用程序也将在 iOS 上加载，但它将无法访问特定于设备的 API。

已`cordova.js`加载，因为我将看到一条简单的警报消息，我将其放入其中，但`deviceready`从未触发且 API 从未公开。

我的 HTML `head`：

```
<script type="text/javascript" charset="utf-8" src="js/cordova.js"></script> <!-- yes it is the iOS version -->
<script src="js/jquery-1.8.2.min.js"></script>
<script src="js/app.js"></script> 
```

我的 JS：

```
function doStuff(){
//app functionality
}
document.addEventListener('deviceready', doStuff, false); 
```

但不知何故，事情只会在Android上完成......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T02:31:14.850

在我的 html 中，我有一个 onload 触发将事件侦听器添加到 deviceready

```
 function onDeviceReady() {
        console.log("we are an app");
        MyApp.initialize_phonegap();
      }

      function onBodyLoad() {   
        document.addEventListener("deviceready", onDeviceReady, false);
      }

    </script>

  </head>

  <body onload="onBodyLoad()"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T11:22:27.850

为了增加 olore 的答案，我最终使用了默认项目中的代码（从脚本构建）使用的方法（这与**[Event docs](http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#Events)**`./create`中的代码不同）。

主要区别是（我真的不知道实际上要考虑其中哪一个）：

*   `cordova-2.2.0.js`位于根文件夹中
*   `<script>`s 包含在结束`</body>`标记之前，而不是文档的`head`
*   `deviceready`-处理工作如下：

    ```
    var app = {
    // Application Constructor
    initialize: function() {
        this.bindEvents();
    },
    // Bind Event Listeners
    //
    // Bind any events that are required on startup. Common events are:
    // 'load', 'deviceready', 'offline', and 'online'.
    bindEvents: function() {
        document.addEventListener('deviceready', this.onDeviceReady, false);
    },
    // deviceready Event Handler
    //
    // The scope of 'this' is the event. In order to call the 'receivedEvent'
    // function, we must explicity call 'app.receivedEvent(...);'
    onDeviceReady: function() {
        app.receivedEvent('deviceready');
        myApp.start(); //this is where I put the call to my App's functionality relying on device APIs
    },
    // Update DOM on a Received Event
    receivedEvent: function(id) { // I didn't really use this, yet I left it in here as it's in the demo
        var parentElement = document.getElementById(id);
        var listeningElement = parentElement.querySelector('.listening');
        var receivedElement = parentElement.querySelector('.received');

        listeningElement.setAttribute('style', 'display:none;');
        receivedElement.setAttribute('style', 'display:block;');

        console.log('Received Event: ' + id);
    }
    }; 
    ```

*   最后一个`<script>`标签只是调用`app.initialize()`

这似乎在 iOS 和 Android 上工作得很好，并且比文档中嵌套的双处理程序更容易理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-07T16:39:35.440

如果您在**cordova.js****之前**或**之后添加****deviceready**侦听器，这似乎会有所不同：

 ******我找不到任何关于此的文档，但 cordova.js 拦截了对 addEventListener + removeEventListener 的调用，并且只调用了在 cordova.js**之前**添加的 deviceready 回调。

我的解决方案只是重新排列脚本顺序：

```
<script>
document.addEventListener('deviceready', ...)
</script>
<script src="cordova.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-19T12:24:19.343

我发现如果你不小心包含了两次 cordova.js 脚本，那么 deviceready 事件就不会触发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-21T18:50:28.703

我遇到了同样的问题。我通过添加设备插件让它工作。

```
$ cordova plugin add org.apache.cordova.device 
```

核实：

```
$ cordova plugin ls 
```******

# c++ - 类的 C++ 向量，不能在所述类的构造函数中 push_back

> ID：13196141
> 
> 赞同：2
> 
> 时间：2012-11-02T13:25:10.570
> 
> 标签：c++, vector, push-back

所以这是我的问题，我想要一个特定类的对象向量，然后我可以将其传递给其他类以供使用。

我希望 Vector 在该类的构造函数中添加该类的实例。因此，我在类成员和构造函数中设置了一个静态向量，如果有任何意义，我想尝试 push_back(this)。

目前有 2 个类在工作，一个是事件处理程序类，它在每次左键单击时创建一个“障碍”类（我想要一个向量的类）的实例。

（我省略了不相关的代码）

```
class MyEventReceiver: public IEventReceiver
{
private:
    blah blah

public:
    blah blah

virtual bool OnEvent (const SEvent& event){
    if(left click)
       Obstacle obs(scn,randX,randY,randR);
}

} 
```

障碍.h：

```
class Obstacle
{
private:

    static std::vector<Obstacle> *obs;

public:

    Obstacle(scene::ISceneManager*, float, float, float);
    ~Obstacle();
}; 
```

障碍cpp：

```
std::vector<Obstacle> *Obstacle::obs;

Obstacle::Obstacle(scene::ISceneManager* scn, float x, float y, float radius)
{
    //get and set the passed in params blah blah

    obs->push_back(this);

} 
```

这不起作用，但希望你能看到我想要实现的目标。稍后我想要一个函数，它将返回对 obs 的引用，以便其他类可以调用此函数并访问向量以操作和读取它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:39:51.500

你真的想改变你的向量，这样你就可以通过指针而不是值来存储它们，因为你不希望在那里有单独的副本：

```
static std::vector<Obstacle*> *obs; 
```

请记住从析构函数中的此向量中删除您的实例：

```
Obstacle::~Obstacle()
{
    auto iter = std::find(obj->begin(), obj->end(), this);
    if (iter != obj->end())
    {
        obj->erase(iter);
    }
} 
```

您还需要编写一个复制构造函数来添加它。如果您不这样做，那么您将无法跟踪副本（假设您允许这样做）：

```
Obstacle::Obstacle(const Obstacle& rhs)
    // ... initialise from rhs
{
    obs->push_back(this);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:27:50.657

1.  没有`obs`作为指针，没有必要。
2.  `obs`被声明为**objects**的向量。`this`是一个指向对象的指针，所以你必须调用`push_back`as`obs->push_back(*this);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:31:37.870

您的向量被宣布错误。它应该是

```
static std::vector<Obstacle*> obs; 
```

即指针向量。你所拥有的是一个指向向量的指针。

假设您的目标是维护指向所有构造的 Obstacle 对象的指针向量，那么您还必须声明复制构造函数（复制的 Obstacle 对象也需要添加到向量中）和析构函数（应该从向量）。这不会是有效的，但它可能适合您的需求。

# jquery - Jquery数组appendTo通过函数

> ID：13196143
> 
> 赞同：2
> 
> 时间：2012-11-02T13:25:14.240
> 
> 标签：jquery, arrays, appendto

尝试将数组值附加到 div，这部分有效，这里没有错，但是我需要格式化数组值，并且在 appendTo() jquery 函数之前通过函数传递值会简单而整洁，不要知道这是否可能...

有一个很长的清单：`$(c[3]).appendTo('#output_div_id1');`

我想要实现的是`$( number_format(c[3])).appendTo('#div');`

这似乎不起作用。想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:44:06.607

您可以在附加条目之前格式化条目

或者

您可以尝试修改 jQuery 原型：

```
$.fn.numberFormat = function () {
    var htmlStr = $(this).html();

    //do stuff to the html (or whatever you're changing)

    return $(this).html(htmlStr);
}; 
```

然后像这样使用它：

```
$(c[3]).numberFormat().appendTo('#div"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:47:07.093

或者只使用 append()。 [http://api.jquery.com/append/](http://api.jquery.com/append/)

例子：

```
<div id="element">Hello</div>
$('#element').append(function(index, html) {
    return ' world!';
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T14:00:35.030

给定一个数组`a`和一个嬗变函数`f`，下面的代码会将数组的每个元素附加到给定的选择器，并通过该函数传递它：

```
$.fn.append.apply($('#div'), $.map(a, f)); 
```

所以，在你的情况下：

```
function number_format(n) {
    return n.toFixed(2);  // modify to suit
} 
```

你会使用：

```
$.fn.append.apply($('#div'), $.map(c, number_format)); 
```

结果将是每个元素都*将*`c`被传递给`number_format`然后附加到 div，而原始数组保持不变。

# jquery - 在jquery的click函数中声明一个var

> ID：13196145
> 
> 赞同：3
> 
> 时间：2012-11-02T13:25:17.247
> 
> 标签：jquery, variables

我有以下代码：

```
$("#ca li").click(function(){
    $("#ca li").css('text-decoration','none');
    $(this).css('text-decoration','underline');
    var sec = $(this).html();    
});

if (sec == 'Africa') {
    var ar = 'this is';
} else {
    var ar = 'is that';
}
$('#co').html(ar); 
```

的HTML：

```
<ul id='ca'>
    <li>Africa</li>
    <li>Americas</li>
    <li>Asia</li>
    <li>Europe</li>
    <li>Oceania<li>
</ul> 
```

点击后var`sec`不会改变。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:32:24.807

您需要阅读有关 javascript[变量范围的更多信息](http://www.mredkj.com/tutorials/reference_js_intro_ex.html)

```
var sec; 
var ar;

$("#ca li").click(function(){
    $("#ca li").css('text-decoration','none');
    $(this).css('text-decoration','underline');
    sec = $(this).html(); 
});

ar = (sec == 'Africa') ? 'this is' : 'is that'; //ternary operator
$('#co').html(ar); 
```

只需将 sec 变量移到函数外部，它就会起作用，否则它将存在/存在于函数内部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:31:15.497

## *[jsBin 演示](http://jsbin.com/ecihay/7/edit)*

```
function changeText(sec){
  var ar = sec=='Africa' ? 'this is' : 'is that';
  $('#co').text(ar);  
}

$("#ca li").click(function(){
    $("#ca li").css('text-decoration','none');
    $(this).css('text-decoration','underline');
    var sec = $(this).text(); 
    changeText(sec);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:31:01.283

```
$("#ca li").click(function(){
    $("#ca li").css('text-decoration','none');
    $(this).css('text-decoration','underline');
    var sec = $(this).html();  
    if (sec == 'Africa') {
      var ar = 'this is';
     } else {
       var ar = 'is that';
     }
     $('#co').html(ar);  
}); 
```

我假设您希望该值随单击事件而改变.. 否？...所以将其放在回调函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:31:18.140

试试这个：

```
var sec;

$("#ca li").click(function(){
    $("#ca li").css('text-decoration','none');
    $(this).css('text-decoration','underline');
    sec = $(this).html();    
});

if (sec == 'Africa') {
    var ar = 'this is';
} else {
    var ar = 'is that';
}
$('#co').html(ar); 
```

（这将使用全局变量，它可以工作，但它不被认为是好的编码。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T06:18:12.400

正如其他人所强调的那样，问题是您在 click 闭包中声明了您的变量。这意味着每次点击处理程序触发时都会重新定义它，并且不能从闭包外部引用它。我们通过在闭包之外声明变量来解决这个问题。我还将 ar 声明放在首位，因为这是最佳实践，并且您在 if(){}else() 中也有类似的范围滥用。这将解决您的问题并使您符合 linter 标准。

```
var sec, ar;

$("#ca li").click(function(){
    $("#ca li").css('text-decoration','none');
    $(this).css('text-decoration','underline');
    sec = $(this).html();    
});

if (sec == 'Africa') {
    ar = 'this is';
} else {
    ar = 'is that';
}
$('#co').html(ar); 
```

# javascript - 我无法上班的菜单

> ID：13196146
> 
> 赞同：1
> 
> 时间：2012-11-02T13:25:20.163
> 
> 标签：javascript, html, css

我无法让这段代码工作 - 我想要的是，当我将鼠标悬停在圆圈上时，菜单会出现，然后如果我将鼠标从圆圈或菜单上移开，它就会消失。我尝试做的任何事情都是非常错误的，例如 onmouseover on circle 然后 onmouseout on menu 离开圈子后菜单似乎消失了，我尝试使用除 Divs 以外的其他构造但仍然没有运气，不知所措我决定发布在这里看看是否有人可以提供帮助。请在下面找到代码：

JS：

```
<script>

function circleAnimOn() {
    //show menu
    document.getElementById("cssmenuDiv").style.display="block";
    document.getElementById("cssmenuDiv").style.visibility="visible";
}

function circleAnimOff() {
    //hide menu
    document.getElementById("cssmenuDiv").style.display="none";
    document.getElementById("cssmenuDiv").style.visibility="hidden";
}
</script> 
```

HTML：

```
<body>

<div class="divCircle" id="divCircle" onMouseOver="circleAnimOn();">
</div>

<div class="cssmenuDiv" id="cssmenuDiv"><!-- cssmenuDiv -->

<div id='cssmenu'>
<ul>
   <li class='active '><a href='index.html'><span>Home</span></a></li>
   <li class='has-sub '><a href='#'><span>Products</span></a>
      <ul>
         <li class='has-sub '><a href='#'><span>Product 1</span></a>
            <ul>
               <li><a href='#'><span>Sub Item</span></a></li>
               <li><a href='#'><span>Sub Item</span></a></li>
            </ul>
         </li>
         <li class='has-sub '><a href='#'><span>Product 2</span></a>
            <ul>
               <li><a href='#'><span>Sub Item</span></a></li>
               <li><a href='#'><span>Sub Item</span></a></li>
               <li><a href='#'><span>Sub Item</span></a></li>
            </ul>
         </li>
      </ul>
   </li>
   <li><a href='#'><span>About</span></a></li>
   <li><a href='#'><span>Contact</span></a></li>
</ul>
</div>

</div><!-- cssmenuDiv --> 
```

CSS：

```
body {

  text-align:center;
}

#divCircle
{
    width:30px;
    height:30px;
    background-color:#CCC;
    margin-left:auto;
    margin-right:auto;
border:2px solid;
border-radius:25px;
-moz-border-radius:25px; /* Firefox 3.6 and earlier */
} 

#divCircle:hover {
    background-color:#093;  
}

#circle { width: 50px; height: 50px; background: red; -moz-border-radius: 50px; -webkit-border-radius: 50px; border-radius: 50px;}

.cssmenuDiv {
    display:none;
    visibility:hidden;
    margin-left:750px;

}

/* Some stylesheet reset */
#cssmenu > ul{
    list-style: none;
    margin: 0;
    padding: 0;
    vertical-align: baseline;
    line-height: 1;
}

/* The container */
#cssmenu > ul {
    display: block;
    position: relative;
    width: 150px;
}

    /* The list elements which contain the links */
    #cssmenu > ul li {
        display: block;
        position: relative;
        margin: 0;
        padding: 0;
        width: 150px;   
    }

        /* General link styling */
        #cssmenu > ul li a {
            /* Layout */
            display: block;
            position: relative;
            margin: 0;
            border-top: 1px dotted #fff;
            border-bottom: 1px dotted #d9d9d9;
            padding: 11px 20px;
            width: 110px;

            /* Typography */
            font-family:  Helvetica, Arial, sans-serif;
            color: #3dafea;
            text-decoration: none;
            text-transform: uppercase;
            text-shadow: 0 1px 0 #fff;
            font-size: 13px;
            font-weight: 300;

            /* Background & effects */
            background: #eaeaea;
        }

        /* Rounded corners for the first link of the menu/submenus */
        #cssmenu > ul li:first-child>a {
            border-top-left-radius: 4px;
            border-top-right-radius: 4px;
            border-top: 0;
        }

        /* Rounded corners for the last link of the menu/submenus */
        #cssmenu > ul li:last-child>a {
            border-bottom-left-radius: 4px;
            border-bottom-right-radius: 4px;
            border-bottom: 0;
        }

        /* The hover state of the menu/submenu links */
        #cssmenu > ul li>a:hover, #cssmenu > ul li:hover>a {
            color: #fff;
            text-shadow: 0 1px 0 rgba(0, 0, 0, .3);
            background: #54cdf1;
            background: -webkit-linear-gradient(bottom, #54cdf1, #74d7f3);
            background: -ms-linear-gradient(bottom, #54cdf1, #74d7f3); 
            background: -moz-linear-gradient(bottom, #54cdf1, #74d7f3);
            background: -o-linear-gradient(bottom, #54cdf1, #74d7f3);
            border-color: transparent;
        }

        /* The arrow indicating a submenu */
        #cssmenu > ul .has-sub>a::after {
            content: '';
            position: absolute;
            top: 16px;
            right: 10px;
            width: 0px;
            height: 0px;

            /* Creating the arrow using borders */
            border: 4px solid transparent;
            border-left: 4px solid #3dafea; 
        }

        /* The same arrow, but with a darker color, to create the shadow effect */
        #cssmenu > ul .has-sub>a::before {
            content: '';
            position: absolute;
            top: 17px;
            right: 10px;
            width: 0px;
            height: 0px;

            /* Creating the arrow using borders */
            border: 4px solid transparent;
            border-left: 4px solid #fff;
        }

        /* Changing the color of the arrow on hover */
        #cssmenu > ul li>a:hover::after, #cssmenu > ul li:hover>a::after {
            border-left: 4px solid #fff;
        }

        #cssmenu > ul li>a:hover::before, #cssmenu > ul li:hover>a::before {
            border-left: 4px solid rgba(0, 0, 0, .25);
        }

        /* THE SUBMENUS */
        #cssmenu > ul ul {
            position: absolute;
            left: 150px;
            top: -9999px;
            padding-left: 5px;
            opacity: 0;
            /* The fade effect, created using an opacity transition */
            -webkit-transition: opacity .3s ease-in;
            -moz-transition: opacity .3s ease-in;
            -o-transition: opacity .3s ease-in;
            -ms-transition: opacity .3s ease-in;
        }

        /* Showing the submenu when the user is hovering the parent link */
        #cssmenu > ul li:hover>ul {
            top: 0px;
            opacity: 1;
        } 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:39:58.443

这是一个例子...

[http://jsfiddle.net/5hnDn/5/](http://jsfiddle.net/5hnDn/5/)

忘记js，不需要...

```
<div class="divCircle" id="divCircle">
<div id='cssmenu'>    
<ul>
   <li class='active '><a href='index.html'><span>Home</span></a></li>
   <li class='has-sub '><a href='#'><span>Products</span></a>
      <ul>
         <li class='has-sub '><a href='#'><span>Product 1</span></a>
            <ul>
               <li><a href='#'><span>Sub Item</span></a></li>
               <li><a href='#'><span>Sub Item</span></a></li>
            </ul>
         </li>
         <li class='has-sub '><a href='#'><span>Product 2</span></a>
            <ul>
               <li><a href='#'><span>Sub Item</span></a></li>
               <li><a href='#'><span>Sub Item</span></a></li>
               <li><a href='#'><span>Sub Item</span></a></li>
            </ul>
         </li>
      </ul>
   </li>
   <li><a href='#'><span>About</span></a></li>
   <li><a href='#'><span>Contact</span></a></li>
</ul>
</div>
</div> 
```

...

只有下面显示的规则更改...

```
#divCircle {
    position: relative;
} 

#divCircle:hover #cssmenu {
    display: block;
}
#cssmenu {
    position: absolute;
    top: 30px;
    left: -60px;
}

#cssmenu > ul{
    padding: 10px 0 0 0;
} 
```

# extjs - 如何增加折线图的粗细？

> ID：13196147
> 
> 赞同：2
> 
> 时间：2012-11-02T13:25:20.900
> 
> 标签：extjs, extjs4

我从演示中看到了简单的例子：

[http://dev.sencha.com/deploy/ext-4.0.0/examples/charts/Line.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/charts/Line.html)

如何增加折线图的粗细（不是标记）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:31:56.657

在系列配置中定义样式如下

```
 style : { 
            'stroke-width': 2, // set desired value here
        } 
```

# javascript - javascript中的onbeforeunload

> ID：13196154
> 
> 赞同：1
> 
> 时间：2012-11-02T13:25:36.267
> 
> 标签：javascript, internet-explorer, javascript-events, event-handling

在我的应用程序中，我需要在 onbeforeunload() 中调用注销函数，所以我执行了如下代码。

```
window.onbeforunload = function(){
bodyWidth = window.document.body.offsetWidth;
bodyHeight = window.document.body.offsetHeight
mouseX = window.event.clientX;
mouseY = window.event.clientY;
    if((mouseX<0) || (mouseY<0) || (mouseX > bodyWidth)  || (mouseY > bodyHeight)){
        logout();
    }
} 
```

`(X)`当我按下IE 中的按钮关闭窗口时，它工作正常。

但是，如果我按`ATL`+关闭 IE 窗口，`F4`这不起作用。在执行该`logout()`功能之前，浏览器会关闭。

任何人都可以帮助我正确使用`window.onbeforunload`.

我什至尝试了以下功能，但它不起作用

```
logout=true;
window.onbeforeunload = bfunload;
window.onunload = unloadPage;
function bfunload(){
bodyWidth = window.document.body.offsetWidth;
bodyHeight = window.document.body.offsetHeight
mouseX = window.event.clientX;
mouseY = window.event.clientY;
    if((mouseX<0) || (mouseY<0) || (mouseX > bodyWidth)  || (mouseY > bodyHeight)){
        logout=false;
        logout();
    }
}
function bfunload(){
if(logout){
    logout();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:28:26.553

不可能知道关闭窗口的所有操作。如果用户在他们的桌面上踢线，代码将永远不会运行。飓风来袭，切断了电源。如果他们失去了互联网连接。如果他们通过地址栏/书签离开。

处理结束会话的唯一方法是服务器上的会话超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:49:35.293

JavaScript`window.onbeforeunload()`事件在网页卸载之前触发。这使我们能够确保用户确定要离开他们正在查看的页面。

通过按`Alt+F4`操作系统直接关闭浏览器应用程序。如果没有打开任何窗口，它将弹出关闭对话框。

首选的执行方式`Logout Functionality`是`Sessions`在您的应用程序中使用。

# java - 当 ViewPager 从右向左滚动时，LinearInterpolator 无法正常工作

> ID：13196158
> 
> 赞同：3
> 
> 时间：2012-11-02T13:26:07.497
> 
> 标签：java, android, scroll, android-viewpager, linear-interpolation

我正在使用 v4 ViewPager 并按照下面的链接可以使用插值器设置滚动速度和滚动动画。

[android中Viewpager控制器的速度减慢](https://stackoverflow.com/questions/8155257/slowing-speed-of-viewpager-controller-in-android/9731345#9731345)

当像这样在构造函数中被问到时，我使用了线性插值器

```
 private void setScroller() {
     try {
        Field mScroller;
        mScroller = ViewPager.class.getDeclaredField("mScroller");
        mScroller.setAccessible(true); 
        FixedSpeedScroller scroller = 
           new FixedSpeedScroller(this.getContext(), new LinearInterpolator());
        mScroller.set(this, scroller);
     } catch (NoSuchFieldException e) {
     } catch (IllegalArgumentException e) {
     } catch (IllegalAccessException e) {
     }
  } 
```

现在，因为我的 viewpages 中有许多视图页面。在它下面我添加了由点组成的寻呼机。

```
 O O O O O O O 
```

按下一个点用smoothScrolling 设置当前页面。使用触摸事件，我可以获得需要显示的正确页码。在知道这一点后，我调用这个方法来平滑滚动。

```
 public void snapToPage(int whichPage) {
     int numperOfSwapsRequired = whichPage - getCurrentPageIndex();
     mScrollingDuration *= numperOfSwapsRequired; 

     if(numperOfSwapsRequired == 0) return;
     if(numperOfSwapsRequired > 0) {
        for(int i = 0; i<numperOfSwapsRequired; i++){
           setCurrentItem(getCurrentItem()+1, true);
        }
     } else {
        for(int i = 0; i>numperOfSwapsRequired; i--){
           setCurrentItem(getCurrentItem()-1, true);  
        }
     }
     mScrollingDuration = 300;
  } 
```

现在一切正常。但只有当我选择一个与所选页面点正确的点时。它使用线性动画正确滚动。

但是当我选择留给所选页面点的点时。它不滚动。它只是直接跳转到没有滚动动画的页面。

所以我很困惑如何解决这个问题。这与插值器或滚动器有关吗？

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:17:52.190

啊啊啊……到头来总是会犯一个愚蠢但很小的错误。但完全感谢我抓住了它。我什至已经开始阅读 Scroller Google 代码文件 :)

```
mScrollingDuration *= numperOfSwapsRequired; 
```

当我们从右向左滚动导致动画时间为零时，这个数字是负数。

这解决了它

```
mScrollingDuration *= Math.abs(numperOfSwapsRequired); 
```

# .net - 带有 RX 扩展的 LINQ

> ID：13196159
> 
> 赞同：4
> 
> 时间：2012-11-02T13:26:09.117
> 
> 标签：.net, vb.net, linq, system.reactive

我的印象是 LINQ 查询语言适用于 IObservable，就像它适用于带有 ReactiveExtensions 的 IEnumerable 一样。我有以下代码

```
Public Sub Foo(source As IObservable(Of Tuple(Of Integer, Integer)))
  Dim filtered = source.Where(Function(x) x.Item1 > 10).Select(Function(x) x.Item1 + x.Item2)
  Dim filtered2 = From x In source Where x.Item1 > 10 Select x.Item1 + x.Item2
End Sub

Public Sub Bar(source As IEnumerable(Of Tuple(Of Integer, Integer)))
  Dim filtered = source.Where(Function(x) x.Item1 > 10).Select(Function(x) x.Item1 + x.Item2)
  Dim filtered2 = From x In source Where x.Item1 > 10 Select x.Item1 + x.Item2
End Sub 
```

IEnumerable 版本的代码是可以的。但是对于 Foo 的 LINQ 版本（第二行），我得到一个后期绑定不允许错误

```
x.Item1 
```

当我将鼠标悬停在**x**上时，Intellisense 说它是对象类型而不是元组类型。但是，相同操作的对象查询版本（第一行）编译正常。我已经进口了

```
Imports system.reactive.linq 
```

我错过了另一个参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:05:25.143

问题中的所有代码对我来说都很好。我不明白你的错误。

也许也尝试导入`System.Reactive`，但除此之外它看起来还不错。

# visual-studio-2010 - 代码运行成功时自动提交 SVN

> ID：13196162
> 
> 赞同：1
> 
> 时间：2012-11-02T13:26:20.697
> 
> 标签：visual-studio-2010, visual-studio-2012, ankhsvn

我正在开展一个团队项目，并且在项目构建并成功运行时不断遇到人们不致力于 SVN 的问题。有没有什么方法可以在安全退出时（应用程序以所需的方式关闭）运行脚本，然后为项目的当前状态调用对 SVN 的提交？

我们使用带有 AnkhSVN 插件的 Visual Studio 2010/2012，代码是用 C# 和 XNA 编写的。

# c# - 加载程序集时如何解析嵌入式引用？

> ID：13196163
> 
> 赞同：1
> 
> 时间：2012-11-02T13:26:26.033
> 
> 标签：c#, .net, user-controls

在 C# 用户控件库项目中，我引用了一个 DLL，而不是在本地复制，我将其作为嵌入式资源包含在程序集中。我通过附加到库中公共控件的构造函数中的 AppDomain.CurrentDomain.AssemblyResolve 事件来解析此引用，然后直接从资源中加载引用。

在运行时这工作正常，但如果我尝试将我的控件库添加到 Visual Studio (2010) 工具箱，我会收到关于未解析引用的错误。大概是因为我的构造函数都没有被调用。

加载程序集时如何解析嵌入的引用？

# ios - UILabel 字体裁剪 iOS

> ID：13196165
> 
> 赞同：4
> 
> 时间：2012-11-02T13:26:39.490
> 
> 标签：ios, fonts, uilabel

我正在加载字体并将其设置在这样的标签上

```
UIFont *font = [UIFont fontWithName:@"MyMonoFont" size:150.0];
label.font = font;
label.text = "TOBY" 
```

但是，它似乎剪切或隐藏了文本的底部（如下所示）。它适用于我尝试过的另一种字体。两种字体都是 TTF 并且根据 Mac 的 Font Book 应用程序中的“验证”操作是“有效的”。

![在此处输入图像描述](../Images/ea8ec38d8963121f1f08427f16fc5b34.png)

有一些限制（它是自动布局），但正如我所说，花药字体似乎可以应付。

感谢您的任何提示。

**编辑**：有点更新；更新标签框架大小没有区别（如果我启用了自动布局）。我想保持自动布局，但怀疑它与框架发生冲突/调整大小。我想知道是否有办法让他们玩得很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:30:10.290

根据标签的字体大小增加标签框的高度。

```
label.frame = your frame. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T13:32:42.393

使用`sizeToFit`UILabel 的方法来实现这一点。

```
[label sizeToFit]; 
```

或者手动计算标签的大小并设置标签的框架[动态改变UILabel的字体大小](https://stackoverflow.com/questions/4865458/dynamically-changing-font-size-uilabel)

# html - Facebook Like 按钮不适用于 tumblr 文本输入

> ID：13196168
> 
> 赞同：1
> 
> 时间：2012-11-02T13:26:42.520
> 
> 标签：html, facebook, facebook-like, tumblr

所以我的问题有点奇怪。我正在使用这个博客上的按钮：http: [//gentlemen-bronco.tumblr.com/](http://gentlemen-bronco.tumblr.com/) 它工作得很好，无处不在，页面的一个工作和每个条目的工作，如图像或链接或引用，但是当点击在常规文本条目（紫色）中的“赞”按钮上，“赞”不会出现在 Facebook 上。

该代码类似于所有其他条目：

**文字帖子**

```
 <div class="post text" id="p_{PostID}">
            <div class="icon">
                <a class="permalink" href="{Permalink}"></a>
                {block:IndexPage}
                {block:NoteCount}<a href="{Permalink}" class="notes">*{NoteCount}<br></a>{/block:NoteCount}
                {/block:IndexPage}
            </div><!-- /.icon -->
            <div class="content">
                <div class="caption">
                    <h3><a href="{Permalink}">{Title}</a></h3>
                    <p>{Body}</p>
                    {block:Date}
                    <div style="float:left; margin-right:50px;">                         {block:ifFacebookCommentsOn}<span class="button commentage"><em><a class="dsq-comment-count" href="{Permalink}#facebook_thread"><fb:comments-count href="{Permalink}"></fb:comments-count> Comments</a></em></span>{/block:ifFacebookCommentsOn}
                    {block:IfDisqusShortname}<p><a href="{Permalink}#disqus_thread"></a></p>{block:IfDisqusShortname}{/block:Date}
                    </div>
                    <div style="float:right; width:100px; margin-right:-35px; z-index:999; position:relative;">
                        <div class="g-plusone" data-size="medium" data-href="{ShortURL}"></div>
                    </div>
                    <div style="float:right; width:100px; margin-top:1px; margin-right:-20px; z-index:0;">

                        <iframe src="//www.facebook.com/plugins/like.php?href={ShortURL}&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=lucida+grande&amp;height=21&amp;appId=471203469570174" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe>                            
                    </div>

                    <div style="clear:both;"></div>
                </div><!-- /.caption -->
            </div><!-- /.content -->
            </div> 
```

**示例链接帖子**

```
 <div class="post link" id="p_{PostID}">
            <div class="icon">
                <a class="permalink" href="{Permalink}"></a>
                {block:IndexPage}
                {block:NoteCount}<a href="{Permalink}" class="notes">*{NoteCount}<br></a>{/block:NoteCount}
                {/block:IndexPage}
            </div><!-- /.icon -->
            <div class="content">
                <div class="caption">
                    <h3><a href="{URL}" {Target}>{Name}</a></h3>
                    <p><span class="description">{Description}</span></p>
                    {block:Date}
                    <div style="float:left; margin-right:50px;">                        {block:ifFacebookCommentsOn}<span class="button commentage"><em><a class="dsq-comment-count" href="{Permalink}#facebook_thread"><fb:comments-count href="{Permalink}"></fb:comments-count> Comments</a></em></span>{/block:ifFacebookCommentsOn}
                    {block:IfDisqusShortname}<p><a href="{Permalink}#disqus_thread"></a></p>{block:IfDisqusShortname}{/block:Date}
                    </div>
                    <div style="float:right; width:100px; margin-right:-35px; z-index:999; position:relative;">
                        <div class="g-plusone" data-size="medium" data-href="{ShortURL}"></div>                        
                    </div>
                    <div style="float:right; width:100px; margin-top:1px; margin-right:-20px;">
                        <iframe src="//www.facebook.com/plugins/like.php?href={URLEncodedPermalink}&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=lucida+grande&amp;height=21&amp;appId=471203469570174" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe>                            
                    </div>

                    <div style="clear:both;"></div>
                </div><!-- /.caption -->
            </div><!-- /.content -->
        </div> 
```

当我用帖子不会显示的“链接”代码替换“文本”代码时，我还没有弄清楚为什么，模板有些奇怪。

Google + 按钮和 twitter 按钮工作正常，正如所说，like 按钮适用于每个条目，但“文本”条目除外。：/

有人可以帮我吗？

# asp.net-mvc - ApiController 实例何时创建？

> ID：13196170
> 
> 赞同：12
> 
> 时间：2012-11-02T13:26:44.567
> 
> 标签：asp.net-mvc, asp.net-web-api

是否创建了一个新的 ApiController 实例来为每个请求提供服务，或者它是否以某种方式“汇集”以服务后续请求？

我问的原因是我想知道成员变量的生命周期，例如脚手架放入的 DbContext 成员（还有我自己的成员）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-02T13:36:19.927

ApiController 的实例在每个 HttpRequest 上创建一个新的。

# regex - 在 struts2 struts.xml 中混合正则表达式和通配符

> ID：13196173
> 
> 赞同：2
> 
> 时间：2012-11-02T13:26:59.597
> 
> 标签：regex, struts2, action-mapping

按照[http://struts.apache.org/2.2.3/docs/wildcard-mappings.html](http://struts.apache.org/2.2.3/docs/wildcard-mappings.html)，下面的配置工作

通配符作品

```
<action name="/drill/*" class="example.DrillAction" method="{1}">
    <result name="success" type="freemarker">/drill-{1}.ftl</result>
</action> 
```

正则表达式也可以

```
<action name="/{group}/drill/index" class="example.DrillAction" method="index">
    <result name="success" type="freemarker">/drill-index.ftl</result>
</action> 
```

但我未能在操作配置中混合通配符和正则表达式，如下所示：

```
<action name="/{group}/drill/*" class="example.DrillAction" method="{1}">
    <result name="success" type="freemarker">/drill-{1}.ftl</result>
</action> 
```

当我访问 http-path-to-host/ **rs6k/drill/index**时，会发生**404**错误：`There is no Action mapped for namespace [/] and action name [rs6k/drill/index] associated with context path [].`

我可以在 struts.xml 配置中混合正则表达式和通配符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:45:34.000

您确定您已阅读有关通配符映射的所有内容吗？

```
<action name="/{group}/drill/{some}" class="example.DrillAction" method="{2}">
  <result name="success" type="freemarker">/drill-{2}.ftl</result>
</action> 
```

# actionscript - flash If 语句仅在第二次起作用

> ID：13196174
> 
> 赞同：1
> 
> 时间：2012-11-02T13:27:03.067
> 
> 标签：actionscript, flash-cs5

我正在做一个检查输入答案的页面，并根据响应说“正确”或“错误”。问题是它只在第二次起作用。

我问了一个关于第二次世界大战的问题，答案是“hiroshima”，没有大写字母，但是当我第一次输入它时，如果我再次输入它，我会得到“错误”，它说它是正确的。

关于我做错了什么的任何想法？

这是我的代码，由按钮上的偶数侦听器触发。

```
function examineTest(event:Event) : void{

    if (testPage.answerText.text=='hiroshima')
    {
        testPage.checkText.text="Correct!"
    }

    else

    {
        testPage.checkText.text="Sorry you enter the wrong answer"
        testPage.answerText.text=""
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:14:52.317

尝试

```
testPage.answerText.text.toLowerCase().lastIndexOf('hiroshima') == 0 
```

以获得更好的字符串比较。

但是，这并不能保证字符串完全匹配。因为最后可能会有额外的字符。因为您知道`hiroshima`长度为 9 个字符。然后，您还可以检查`length`

```
testPage.answerText.text.length == 9 
```

[http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001559.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001559.html)这整个网站是您最好的资源

# android - 任意应用程序之间的 SharedPreferences

> ID：13196182
> 
> 赞同：1
> 
> 时间：2012-11-02T13:27:24.437
> 
> 标签：android, sharedpreferences, android-contentprovider

想象一下，如果你愿意的话：应用程序 A、B、C 和 D。它们都需要在它们之间共享一些少量数据，但不能保证它们中的任何一个都会被安装。也就是说，您可能只有 B 和 D。或仅 A 和 C 等。

在这种情况下可以使用 SharedPreferences 吗？

我知道我可以使用 createPackageContext 让 AD 全部使用 A 的包空间，如果 A 就像一个始终安装的主应用程序，但如果我不知道将安装其中的哪一个怎么办？如果在不存在的包空间上使用 createPackageContext，则返回 NameNotFoundException。

在这种情况下，除了 SD 卡上的文件之外，我还有其他内容提供商选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:41:57.350

如果它只是一个小数据，您可以在所有四个上创建共享首选项，并在阅读其共享首选项之前检查是否安装了应用程序。[如何检查应用程序是否安装？](https://stackoverflow.com/questions/11392183/how-to-check-if-the-application-is-installed-or-not-in-android-programmatically) 并[在应用程序之间共享首选项](http://thedevelopersinfo.com/2009/11/25/getting-sharedpreferences-from-other-application-in-android/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:06:29.613

> 在这种情况下可以使用 SharedPreferences 吗？

不。

您不能将 SharedPreferences 写入任意位置。您能做的最好的事情就是拥有一个始终安装的中央应用程序（如“加载程序”或“主菜单”）。然后所有其他应用程序可以使用中央应用程序的首选项空间来存储和共享设置（通过 createPackageContext）。但是 createPackageContext 不适用于实际未安装的包（例如，“com.mystuff.centralstorage”必须是实际安装的包，而不是任意名称）

在这种情况下，最好的解决方案可能是 SD 卡上的 Java 风格的共享文件。请参阅：FileInputStream、FileOutputStream、DataInputStream 和 DataOutputStream，用于处理小型、简单的文本文件，可能存储首选项。此外，用于 SD 卡根路径的 Environment.getExternalStorageDirectory.getAbsolutePath（事实上，这是处理文件所需的唯一 Android 代码——其余的可以是 Java）。

Android ContentProviders 似乎更适合单个应用程序。允许进行一些共享（如上所述，使用 SharedPerferences），但它们似乎接受了 Android“沙盒”概念，每个应用程序都生活在自己的私人世界中，并在它们之间共享，这不是这里想要的。此解决方案需要任何数量的应用程序都可以全局访问，SD 卡上的常规旧文件将是。

（多进程友好的文件保护方案是另一件需要考虑的事情。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:30:44.090

要在应用程序之间共享信息，您可以实现一个 ContentProvider（或多个）。或者您使用 SDCard 上的通用文件。编辑：似乎 SharedPreferences 可以在应用程序之间共享。见上面的答案。

# grails - 依赖 grails 插件时是否可以排除 CSS 文件？

> ID：13196187
> 
> 赞同：0
> 
> 时间：2012-11-02T13:27:44.503
> 
> 标签：grails, resources, spring-security

Grails spring security UI 插件有一个名为reset.css 的样式表。这会覆盖通过另一个插件包含的我自己的 reset.css。有没有办法在导入 spring 安全核心时明确排除 CSS 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:30:42.710

> 该插件在 web-app/css/spring-security-ui.css 中定义了其 CSS 样式，并且大多数 jQuery 插件都有相应的 CSS 文件。这些可以通过覆盖 springSecurityUI.gsp 模板并包含您的 CSS 文件来覆盖。

根据[文档](http://grails-plugins.github.com/grails-spring-security-ui/docs/manual/guide/10%20Customization.html)。

# mysql - MySQL - 从前一行中减去值，分组

> ID：13196190
> 
> 赞同：35
> 
> 时间：2012-11-02T13:27:51.147
> 
> 标签：mysql, sql

我需要根据 SN 号获得基于前一个的消耗值。这是我的数据：

表能量日志

```
SN     Date                 Value
2380   2012-10-30 00:15:51  21.01
2380   2012-10-31 00:31:03  22.04
2380   2012-11-01 00:16:02  22.65
2380   2012-11-02 00:15:32  23.11
20100  2012-10-30 00:15:38  35.21
20100  2012-10-31 00:15:48  37.07
20100  2012-11-01 00:15:49  38.17
20100  2012-11-02 00:15:19  38.97
20103  2012-10-30 10:27:34  57.98
20103  2012-10-31 12:24:42  60.83 
```

这是我需要的结果：

```
SN      Date                 Value  consumption
2380    2012-10-30 00:15:51  21.01  0
2380    2012-10-31 00:31:03  22.04  1.03
2380    2012-11-01 00:16:02  22.65  0.61
2380    2012-11-02 00:15:32  23.11  0.46
20100   2012-10-30 00:15:38  35.21  0
20100   2012-10-31 00:15:48  37.07  1.86
20100   2012-11-01 00:15:49  38.17  1.1
20100   2012-11-02 00:15:19  38.97  0.8
20103   2012-10-30 10:27:34  57.98  0
20103   2012-10-31 12:24:42  60.83  2.85 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-11-02T13:39:45.740

使用 MySQL 变量很棒，就像内联程序变量赋值一样。首先，FROM 子句为您“声明”@ 变量，默认为空白。然后以您想要的预期顺序查询记录。它对数据进行单次传递，而不是通过可能很耗时的重复子查询。

对于读取的每一行，将@lastSN 与当前记录的SN 进行比较。如果不同，则始终返回 0。如果相同，则计算简单差。仅在完成比较之后，将@lastSN 和@lastValue 设置为等于当前记录的值，以进行下一个记录比较。

```
select
      EL.SN,
      EL.Date,
      EL.Value, --remove duplicate alias
      if( @lastSN = EL.SN, EL.Value - @lastValue, 0000.00 ) as Consumption,
      @lastSN := EL.SN,
      @lastValue := EL.Value
   from
      EnergyLog EL,
      ( select @lastSN := 0,
               @lastValue := 0 ) SQLVars
   order by
      EL.SN,
      EL.Date 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-02T13:37:36.287

这应该可以解决问题：

```
SELECT l.sn,
       l.date, 
       l.value,
       l.value - (SELECT value 
                  FROM energylog x
                  WHERE x.date < l.date
                  AND x.sn = l.sn
                  ORDER BY date DESC
                  LIMIT 1) consumption
FROM energylog l; 
```

请参阅 SQLFiddle：[http ://sqlfiddle.com/#!2/b9eb1/8](http://sqlfiddle.com/#!2/b9eb1/8)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-02T13:39:50.577

一个近乎通用的解决方案是将数据连接到自身，通过在连接条件中包含相关子查询来查找先前的记录......

```
SELECT
  ThisLog.*,
  COALESCE(ThisLog.Value - PrevLog.Value, 0) AS consumption
FROM
  EnergyLog    AS ThisLog
LEFT JOIN
  EnergyLog    AS PrevLog
    ON  PrevLog.SN   = ThisLog.SN
    AND PrevLog.Date = (SELECT MAX(Date)
                          FROM EnergyLog
                         WHERE SN   = ThisLog.SN
                           AND Date < ThisLog.Date) 
```

这在一个索引同时覆盖两者的情况下表现最好`(SN, Date)`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-20T13:49:43.227

您可以像这样连接同一个表的两行：

```
 SELECT this.*, prev.*
      FROM tbl this
INNER JOIN tbl prev ON prev.id =
           ( 
               SELECT max(t.id) 
               FROM tbl t  
               WHERE t.id < this.id
           )     
     WHERE ... 
```

所以你的情况看起来像：

```
 SELECT this.SN, this.Date, this.Value, (this.Value - prev.Value) AS consumption
      FROM EnergyLog this
INNER JOIN EnergyLog prev ON prev.Date =
           ( 
               SELECT max(t.Date) 
               FROM EnergyLog t  
               WHERE t.Date < this.Date
           ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T14:08:02.673

请您尝试以下查询一次。

```
SELECT e1.*,
   (SELECT Value
    FROM EnergyLog e2
    WHERE e2.sn = e1.sn AND e2.date < e1.date
    ORDER BY date DESC
    LIMIT 1)-l.Value consumption
FROM EnergyLog e1; 
```

# iphone - 在 Safari 中使用 sharedApplication openURL 方法打开使用 POST 方法托管的 URL

> ID：13196192
> 
> 赞同：9
> 
> 时间：2012-11-02T13:27:51.680
> 
> 标签：iphone, objective-c, ios, xcode, uiapplication

我有一种情况，我使用 POST 方法在模拟器的 safari 浏览器中托管 URL。在模拟器中启动我的 iOS 应用程序后，该网页在 safari 中打开。为了启动 safari，我使用了 [[UIApplication sharedApplication] openURL: ...

post方法如下：

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://***some client url***.jsp"]];

NSString *post = [NSString stringWithFormat:@"username=%@&password=%@", userName, password];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"%d", [postData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData];`

NSURLConnection* _urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[_urlConnection start]; 
```

这段代码在使用 UIWebView 时可以正常工作。但我想使用这个“请求”启动 Safari，该“请求”从 POST 方法中附加了用户名和密码数据。

要启动 Safari，我必须调用此代码：

```
[[UIApplication sharedApplication] openURL:request]; 
```

但这显然会引发警告，因为“请求”是 NSMutableURLRequest 类型。“语义问题：不兼容的指针类型将“NSMutableURLRequest *”发送到“NSURL *”类型的参数...

我什至不能使用`[[UIApplication sharedApplication] openURL:request.URL];`，因为这会给我一个没有附加用户名和密码的 URL（没有 POST 方法）。

我想知道如何对这个请求进行类型转换/转换（NSMutableURLRequest），以便我可以在 [[UIApplication sharedApplication] openURL ...

希望我对我的问题很清楚。任何帮助将不胜感激。提前致谢 ！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T10:36:50.687

推荐的方法是在您的应用程序中使用并使用和`UIWebView`创建发布请求。创建发布请求并触发请求非常容易。由于您已经弄清楚了这一点并且您不想使用这种方法，因此唯一的替代方法是**创建一个临时 html 文件，如此****[处所述](http://lists.apple.com/archives/macnetworkprog/2008/Jul/msg00048.html)**。您可以尝试他们遵循的方法，并检查它是否适用于您的情况。`NSURLRequest``NSURLConnection`

根据该链接，您必须编写一个临时 html 文件。这个 html 文件将有一个`onLoad()`javascript 立即发送 POST，以及一个用于未启用 javascript 的用户的按钮。您可以从此文件创建`NSURL`对象。`[NSURL fileURLWithPath:path];`

另一种解决方案是从网络服务器创建[一次性密钥](https://en.wikipedia.org/wiki/One-time_pad)，并通过 HTTPS 请求将其传递给 safari，[如此处所述](https://stackoverflow.com/a/9881108/1730272)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T22:11:45.973

通过 openURL 方法启动 safari 时不能传递 POST 数据，但是如果您在应用程序中使用自己的 UIWebView，则可以传递 POST 数据，如下所示：

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://***some client url***.jsp"]];

NSString *post = [NSString stringWithFormat:@"username=%@&password=%@", userName, password];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"%d", [postData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData];`

[myUIWebView loadRequest:request]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T13:40:29.560

在将数据添加到正文中时，您无法从浏览器发出 POST 请求。如果是 URL 请求，您可以在请求的标头中添加身份验证作为参数，您可以在 safari 中打开该 URL。

希望我很清楚。

# vb.net - X秒后触发事件

> ID：13196196
> 
> 赞同：1
> 
> 时间：2012-11-02T13:28:15.530
> 
> 标签：vb.net, windows-phone-7, timer, visual-studio-2012, dispatchertimer

我正在为 Windows Phone 开发一个应用程序。我的问题是如何在 2 秒后触发事件？

```
 Private Sub btn1_Click(sender As Object, e As RoutedEventArgs) Handles btn1.Click
    Dim input As String = txtinput.Text
    Dim last As Char = input(input.Length - 1)
    If last = "A" Then
        Dim final As String = input.Substring(0, input.Length - 1) & "B"c
        txtinput.Text = final.

      'start timer here
      'trigger an event after 2 seconds

    ElseIf last = "B" Then
        Dim final As String = input.Substring(0, input.Length - 1) & "C"c
        Dim tmr As TimeSpan = TimeSpan.FromSeconds(2)
        txtinput.Text = final

      'start timer here
      'trigger an event after 2 seconds

    Else
        txtinput.Text = input + "A"
    End If

 End Sub 
```

我使用 Visual Basic 作为我的语言来开发它。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:20:49.250

在类中声明 dispatcherTimer

```
Dim WithEvents dt As System.Windows.Threading.DispatcherTimer 
```

然后根据需要创建 dispatcherTimer 的实例，设置时间跨度

```
dt = New System.Windows.Threading.DispatcherTimer()
dt.Interval = New TimeSpan(0, 0, 0, 0, 500) '' 500 Milliseconds
dt.Start() 
```

这是你的处理程序

```
Private Sub dt_Tick(ByVal sender As Object, ByVal e As EventArgs) Handles dt.Tick
    ' Do Stuff here.
End Sub 
```

[*从这里](https://stackoverflow.com/questions/3265715/is-there-a-timer-control-for-windows-phone-7)将代码转换为 VB ，虽然我没有测试过它..它可能对你有用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:53:41.883

也许我只是不了解环境，因为我从未在 .Net 中为手机编程过，但是呢：

```
System.Threading.Thread.Sleep(2000) 
```

希望这可以帮助

# html - 将 reCaptcha 集成到coldfusion .cfm 的表单中

> ID：13196197
> 
> 赞同：3
> 
> 时间：2012-11-02T13:28:16.277
> 
> 标签：html, forms, coldfusion, recaptcha

我正在尝试帮助一位朋友修改一些旧的 html 代码，以消除垃圾邮件从 Web 表单传递到 Coldfusion 功能。基本上，Web 表单调用 action=add_to_data.cfm。这位朋友想要整合 recaptcha 以减少通过表单的垃圾邮件。我已经让这部分工作并完成了 reCaptcha 验证。问题是我不知道如何调用coldfusion“add_to_data.cfm”动作并传递表单的数据。有很多recaptcha示例显示了一个使用action = mailer.php的例子，但我需要发送表格的数据到coldfusion——“add_to_data.cfm。

原始形式：

```
<form method="post" action="add_to_data.CFm">
 ....blah, blah, blah ... form contents ...

<input type="submit" value="Please add to my Data />
<form> 
```

现在，在谷歌开发人员 reCaptcha 教程的指导下，我不是直接进入“add_to_data.CFm”，而是弄清楚如何验证 reCaptcha 的唯一方法是将表单操作从“add_to_data.CFm”更改为“ action' 到新创建的“verify_recaptcha.php”，以便可以验证 recaptcha。

```
<form method="post" action="verify_recaptcha.php">
 ...original form contents ...
        <?php
          require_once('recaptchalib.php');
          $publickey = "your_public_key_goes_here";
          echo recaptcha_get_html($publickey);
        ?>
        <input type="submit" />
<form> 
```

此示例直接来自 Google 开发人员网页，用于使用 verify_recaptcha.php 进行 recpatcha 验证

```
<?php
  require_once('recaptchalib.php');
  $privatekey = "your_private_key_goes_here";
  $resp = recaptcha_check_answer ($privatekey,
                                $_SERVER["REMOTE_ADDR"],
                                $_POST["recaptcha_challenge_field"],
                                $_POST["recaptcha_response_field"]);

    if (!$resp->is_valid) {
    // What happens when the CAPTCHA was entered incorrectly
       die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
       "(reCAPTCHA said: " . $resp->error . ")");

     } else {
     // Your code here to handle a successful verification  

     *** this is where I need gather he form outputs and call add_to_data.CFM
     ***  but HOW??

     }
     ?> 
```

所以我的问题是如何将“数据”发送到 add_to_data.CFm？

我知道在上面的“其他”部分中，我可以得到这样的表单变量：

```
$name = $_POST['yourname'];
$email = $_POST['email'];
$data = $_POST['data'];
$comments = $_POST['comments'];
$formsub = $_POST['Submit']; 
```

所以问题是：如何完成向“add_to_data.CFM”提交表单的操作？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:44:45.570

解决问题的最简单方法是让 CF 验证 reCaptcha。你可以在 google 上找到很多教程，我过去使用的一个是下面的链接。

[http://recaptcha.riaforge.org/](http://recaptcha.riaforge.org/)

这是一个基于标签的实现，我基于我的最后一个实现，所以这确实有效。

否则，如果您真的想让 php 将数据发送到 CF，我想到的最简单的方法是让 php 自动提交表单以将数据传回 CF。您需要一些额外的安全措施来确保没有人劫持表单或试图绕过重新验证码。我强烈建议在所有 CF 中进行验证。

# object - Fortran 派生类型：

> ID：13196201
> 
> 赞同：2
> 
> 时间：2012-11-02T13:28:24.650
> 
> 标签：object, fortran90, derived-types

我对以下示例感到困惑：

```
TYPE :: car 
    real :: x,  u ! position, velocity
    real :: y,  v ! 
    real :: z,  w !  
    real,dimension(3) :: uvw_0    ! initial uvw
END TYPE

TYPE (car), pointer:: mercedes
TYPE (car), DIMENSION(m,n,q,r), TARGET :: mercedes_ay 
```

它看起来像一个对象的实现，但是什么

```
TYPE (car), DIMENSION(m,n,q,r), TARGET :: mercedes_ay 
```

关于 TYPE(car) - DIMENSION(m,n,q,r) 引用了哪些变量？mercedes_ay(1,1,1,1) 是什么意思？梅赛德斯（1,1,1,1）是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:34:06.663

`car`它所做的只是声明一个维度为 (m,n,q,r)的数组。但是，您的示例代码并未定义这些尺寸。

`mercedes_ay(1,1,1,1)`是阵列中的第一辆车。第一辆车`mercedes_ay(1,1,1,1)%x`的位置也是如此。是第一辆车的首字母。ETC..`x``mercedes_ay(1,1,1,1)%uvw_0(1)``u`

`mercedes(1,1,1,1)`是不可能的，因为它没有维度，它是一个标量。所以它只能指向一个标量。相反，它可能会像这样使用：

```
mercedes => mercedes_ay(1,1,1,1) 
```

这意味着您指向`mercedes`阵列中的第一辆车。它基本上充当别名。

# asp.net - 列表视图分页无法正常工作

> ID：13196205
> 
> 赞同：1
> 
> 时间：2012-11-02T13:28:43.383
> 
> 标签：asp.net, listview, updatepanel, datapager

我做了一个`ListView`来展示产品及其正常工作，但是当我使用 DataPager 来限制该页面中的产品数量时，这里出现了一些问题

1.  一次点击分页不起作用。我必须点击它们 2 次才能导航到第二页等等。
2.  当页面大小为 5 并且我单击第二页时，它可以正常工作并显示其余 5 个产品，但是当我通过单击寻呼机导航链接 1 返回第一页时，前 5 个产品无法正确显示。

代码是：

**。CS**

```
 public void BindListView_Products()
        {            
            int cate_id = int.Parse(Request.QueryString["cate_id"].ToString());
            DataTable dt = new BALCate().GetProductsAllSubCate(cate_id);
            ListView_Products.DataSource = dt;
            ListView_Products.DataBind();
        }

    public void ddlNumber_SelectedIndexChanged(object sender, EventArgs e)
        {          
            listview_pager.PageSize = Convert.ToInt32(ddlNumber.SelectedValue);
            BindListView_Products();      
        } 
```

**.aspx**

```
<asp:UpdatePanel ID="up1" runat="server"><ContentTemplate>
   //////some code
   <div class="limit">
                    <b>Show:</b>
                    <asp:DropDownList ID="ddlNumber" runat="server" AutoPostBack="true" OnSelectedIndexChanged="ddlNumber_SelectedIndexChanged">
                        <asp:ListItem Selected="True" value="5">5</asp:ListItem>
                        <asp:ListItem value="10">10</asp:ListItem>
                        <asp:ListItem value="15">15</asp:ListItem>
                        <asp:ListItem value="20">20</asp:ListItem>
                        <asp:ListItem value="25">25</asp:ListItem>
                    </asp:DropDownList>
                </div>
    <asp:ListView ID="ListView_Products" ItemPlaceholderID="itemplaceholder1" runat="server">
        <LayoutTemplate>
        <asp:PlaceHolder ID="itemplaceholder1" runat="server">
        </asp:PlaceHolder>            
        </LayoutTemplate>              
        <ItemTemplate>        
                    <div>
                        <div class="left">
                            <div class="image">
                                <a href='ProductDetails.aspx?pid=<%#Eval("pid")%>'>
                                    <img alt="Apple Cinema 30&quot;" title="Apple Cinema 30&quot;"
                                    src="<%#"Images/" + Eval("pimg_mid1") %>"></a></div>
                            <div class="name">
                                <a href="javascript:;"><%#Eval("pname")%></a>
                                <p><%#Eval("pdesc")%></p>
                            </div>
                        </div>
                        <div class="right">
                            <div class="price">$<%#Eval("pcost")%></div>
                            <div class="cart">
                                <a class="button" onclick="addToCart();">
                                <span>Add to Cart</span></a></div>
                            <div class="wish-list">
                                <a onclick="addToWishList();">Add to Wish List</a><br>
                                <a onclick="addToCompare();">Add to Compare</a></div>
                        </div>
                        <p class="clear">
                        </p>
                    </div>        
            </ItemTemplate>                        
        </asp:ListView>        
        <div class="pagination">
                    <div class="results" style="float: right;">
                        <asp:DataPager PageSize="5" ID="listview_pager" PagedControlID="ListView_Products" runat="server">
                            <Fields><asp:NumericPagerField /></Fields>
                        </asp:DataPager>                        
                    </div>
         </div>    
     </ContentTemplate>
 </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:15:43.490

[http://www.codeproject.com/Articles/28419/A-Basic-ASP-NET-Pager-Control](http://www.codeproject.com/Articles/28419/A-Basic-ASP-NET-Pager-Control) 一个没有太多编码的好数据分页器..我有同样的问题，但使用的是gridview。它也可以与listview一起使用.. :)

# c# - 阅读西里尔字符

> ID：13196208
> 
> 赞同：1
> 
> 时间：2012-11-02T13:29:08.640
> 
> 标签：c#, xml

我有一个 xml 文件。

该文件具有属性，值以西里尔文表示。

我如何阅读这个 xml 文件？

前 Xml：

```
<Ships>
    <Ship X="3" Y="Г" Length="3" Orientation="vertical" />
    <Ship X="7" Y="А" Length="2" Orientation="horizontal" />
    <Ship X="10" Y="Ж" Length="1" />
</Ships> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:43:01.940

如何使用 Linq To Xml

```
var xDoc = XDocument.Parse(xmlstring);//or XDocument.Load(filename);
var ships = xDoc.Descendants("Ship")
                .Select(s => new
                {
                    X = (string)s.Attribute("X"),
                    Y = (string)s.Attribute("Y"),
                    Orientation = (string)s.Attribute("Orientation"),
                    Length = (string)s.Attribute("Length"),
                })
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:35:00.787

使用[这里](https://stackoverflow.com/questions/4203540/generate-c-sharp-class-from-xml)已经描述的**xsd.exe**

你可以在下面找到它

> C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\xsd.exe

或者

> C:\Program Files\Microsoft Visual Studio 8\SDK\v2.0\Bin\xsd.exe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:59:21.460

这对我有用：

```
 var doc = new XmlDocument();
        XmlReader reader = XmlReader.Create(new StreamReader(@"..\..\filename.xml", Encoding.UTF8));
        doc.Load(reader);

        var ships = doc.SelectNodes(@"//Ship"); 
```

# php - 如果已经在数据库中，不希望生成字符串

> ID：13196209
> 
> 赞同：-2
> 
> 时间：2012-11-02T13:29:12.863
> 
> 标签：php, mysql

我这里有点情况。如果在我的“会话”表中的数据库中，如果我有以下数据：

```
SessionId

C 
```

然后我的代码发生的情况是，当用户生成一个新字符串时它不会显示上面的字符串，因为它已经在数据库中。例如上面的这个工作正常。

我遇到的问题是，如果我有多个会话（考试），那么在下面的数据库中，它将在数据库中显示如下字符串：

```
SessionId

C1
C2
C3 
```

以上是3次考试。但问题是字符串“C”仍然可以在下面的代码中生成。我的问题是，如果字符串末尾有一个数字，如上表，那么我怎么能不生成仍在数据库中的字符串？字符串总是 1 个字符长：

```
 function id_generator(){ 

              $id = ""; 
              $a = array( "A" , "B" , "C" , "D" , "E" , "F" , "G" , "H" , "I" , "J" , "K" , "L" , "M" , "N" , "O" , "P" , "Q" , "R" , "S" , "T" , "U" , "V" , "W" , "X" , "Y" , "Z" ); 

          for( $i = 0 ; $i < 1 ; $i++ ){ $r = rand( 0 , 25 );
           $id .= $a[ $r ]; 

       }

       return $id;

       };

       $is_there = true;

          while( $is_there ){
        $id = id_generator(); // your function to generate id;
        $result = "SELECT SessionId FROM Session WHERE SessionId LIKE ?";
        $stmt=$mysqli->prepare($result);
        $id = $id . '%';
        $stmt->bind_param("s",$id);
        $stmt->execute(); 
        // get result and assign variables (prefix with db)
        $stmt->bind_result($dbSessionId);

        $stmt->store_result();

        $stmtnum = $stmt->num_rows();

        if($stmtnum == 0) {
        $is_there = false;
    }
    }

....

</body>
<form>

 <p><strong>1: Your Assessment ID: </strong><span id="idFont"><?php echo $id; ?></span></p>

.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:39:06.693

为什么不使用`like`？

```
$result = "SELECT SessionId FROM Session WHERE SessionId LIKE ?";
$stmt=$mysqli->prepare($result);
$id = $id . '%';
$stmt->bind_param("s",$id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:37:51.250

不知道我明白你，但也许像

```
if not Exists(Select * From Session Where SessionID Like 'C[0123456789]')
begin
  insert Session(SessionID) Values(?)
end 
```

'C[0123456789] isa straing 以 C 开头，后跟 '0' 到 '9' 中的任何一个，仅此而已

# standards - 事件绑定 AngularJS 方式？

> ID：13196210
> 
> 赞同：1
> 
> 时间：2012-11-02T13:29:15.397
> 
> 标签：standards, angularjs

好的，所以我知道在使用 AngularJS 时在控制器中进行任何 DOM 操作被认为是不好的做法，您应该使用指令和 $scope 来处理这些东西，但是事件绑定呢？从它的外观来看，考虑到所有内置事件指令，如 ngClick、ngMousedown、ngMouseenter 等，这也是不受欢迎的......但如果是这样的话，那么我有一段代码我不知道如何做AngularJS的方式。

我正在构建的应用程序具有无限滚动，它是用这段代码实现的（当前位于控制器中）：

```
$(document).bind('scroll', function(){
    if(!$scope.loadingIssues && $(window).scrollTop() + $(window).height() >= $('.user-feedback-list').offset().top + $('.user-feedback-list').height()) {
        $scope.loadIssues();
    }
}); 
```

这允许用户滚动页面，当页面到达存储无限滚动数据的元素的底部时，它会触发函数以加载更多数据。现在我没有进行任何 DOM 操作，所有函数都只是更新附加到 $scope 的数据，我让 AngularJS 进行 DOM 更新，但是这个事件是否与 AngularJS 的最佳实践绑定？如果是这样，我将如何以 AngularJS 的方式执行此操作（我认为指令在这种情况下不起作用，因为我认为不可能将指令附加到文档对象）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:10:50.203

我认为目前没有一种 AngularJS 方法可以进行这种事件绑定。据我所知，为所有丢失的事件添加本地支持正在进行中，但尚未在任何稳定版本中发布。

所以现在我们必须像你在你的问题中所说的那样做。

不过，我认为您需要这样做才能使其正常工作：

```
$scope.$apply(
    function() {
        $scope.loadIssues();
    }
); 
```

这是因为您正在处理来自 AngularJS 之外的事件。$apply 确保 AngluarJS 被通知任何模型更改以及可能由于您的 loadIssues() 调用而发生的事情。

# reporting-services - 在 Report Builder 中寻找 BIDS 功能

> ID：13196211
> 
> 赞同：3
> 
> 时间：2012-11-02T13:29:17.170
> 
> 标签：reporting-services, reportingservices-2005

我正在使用 SSRS 2005 并在 BIDS 中创建了一份报告。该报告在详细信息区域中包含一个图像，其中包含位于图像顶部的数据集的多个字段。显然，当报告运行时，图像会重复，每一行的数据都放在该图像的顶部。

我想知道是否有任何方法可以在报表生成器中获得这种类型的功能，以便最终用户可以即时创建这些类型的报表。从我所见，这似乎是不可能的。我当然可以在报告中插入图像，但似乎没有一种方法可以像我在 BIDS 中所做的那样为每一行数据重复它。此功能在任何版本的 SSRS 中都可用吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:07:36.057

您无需在图像顶部放置字段以使其重复。

如果报表上有表格，则必须将其链接到数据集。在详细信息部分，将图像插入其中一个字段将导致其重复数据集中的行数。如果您在组级别将图像插入到表中，那么它将为每个组重复。

我刚刚在 BIDS (2008 R2) 和 Report Builder 3.0 上都试过了

（我的数据集有 5 行，我在详细信息行的第二列中输入了“详细信息行”）

![在此处输入图像描述](../Images/c1e0a88dd150de1bb479c5c8d0bd6af5.png)

# android - Android 无需等待事件即可获取 BT 设备 ID（或名称）

> ID：13196213
> 
> 赞同：2
> 
> 时间：2012-11-02T13:29:27.593
> 
> 标签：android, bluetooth

我知道如何获取 BT 连接事件，但是当我的应用程序/服务启动时，我如何知道我拥有的 BT 连接设备？活动已经发送，所以错过了，

示例代码会很棒，因为我刚刚开始学习为 Android 开发。

谢谢

# conditional - 如何使用条件来检查频道中是否有任何条目？

> ID：13196216
> 
> 赞同：4
> 
> 时间：2012-11-02T13:29:45.080
> 
> 标签：conditional, expressionengine

我有一个 Channel 条目标记之外的条件标记，它应该确定 Channel 是否有 1\. 条目，2\. 过期条目，3\. 已关闭条目：我试过`{if channel_short_name == "news"}` 但不知何故，无论条目是关闭还是过期，它都会返回包装的内容。我有条件的原因是在频道标签之外是我不想重复 h2 标签。

```
{if there are a displayable entries in the "news" channel, display this whole package.}
   <h2>News</h2>
   <hr />
   {exp:channel:entries channel="news" limit="2"}
      <div class="entry panel">
         <h3>{title}</h3>
         {news_text}
         {if news_full OR news_bild}
            <div id="{entry_id}" class="toggleDiv">
               {news_full}
               {exp:ce_img:single src="{news_bild}" max_width="346" smart_scale="yes" alt="{name_orig}"}
            </div>
            <p><a class="show_hide" rel="#{entry_id}" href="#">Mehr…&lt;/a></p>
        {/if}
      </div>
   {/exp:channel:entries}
{/if} 
```

这让我想到另一个问题：

是否可以将过期条目设置为“关闭”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T13:46:08.660

最简单的选择是将标题标记移动到仅与第一个条目一起显示的条件中。如果没有结果，则`{exp:channel:entries}`标签将不生成任何输出。

```
{exp:channel:entries channel="news" limit="2"}
    {if count == '1'}
        <h2>News</h2>
        <hr />
    {/if}
    <div class="entry panel">
        <h3>{title}</h3>
        {news_text}
        {if news_full OR news_bild}
            <div id="{entry_id}" class="toggleDiv">
                {news_full}
                {exp:ce_img:single src="{news_bild}" max_width="346" smart_scale="yes" alt="{name_orig}"}
            </div>
            <p><a class="show_hide" rel="#{entry_id}" href="#">Mehr…&lt;/a></p>
      {/if}
    </div>
{/exp:channel:entries} 
```

您是否有任何特殊原因要关闭过期条目？除非您使用`show_expired = 'yes'`所有过期的条目，否则它们的行为就像它们已经关闭一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:07:22.887

如果您在循环结束时也需要条件标记，您可以执行`{if count == total_results}`.

# php - 我什么时候应该在 Joomla 中使用 setUserState？

> ID：13196219
> 
> 赞同：9
> 
> 时间：2012-11-02T13:29:55.283
> 
> 标签：php, joomla, session-variables, session-state, joomla2.5

**细节**

我可以使用用户状态变量在 Joomla 会话中存储和检索数据。

**示例设置变量**

```
$app =& JFactory::getApplication();
$app->setUserState( 'myvar', $myvarvalue ); 
```

但我也可以使用 JFactory/getSession 在会话中存储和检索变量。

**示例设置变量**

```
$session =& JFactory::getSession();
$session->set('myvar', $myvarvalue); 
```

**问题**

这两种方法有什么区别？我什么时候应该使用其中一种？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T14:31:26.607

**简而言之：**这没什么大不了的，您可以在上下文中使用任何感觉合适的东西。我会坚持下去， `JApplication/setUserState`因为我认为代码更好地自我解释。

**实际区别：**

这两种方法都将在会话中存储指定的状态。`JApplication/setUserState`实际上将在内部用于`JSession/set`存储状态。

`JApplication/setUserState`不同之处在于它将每个键值对存储在JRegistry[中](http://api.joomla.org/Joomla-Platform/Registry/JRegistry.html)。所以它等于：

```
$session = JFactory::getSession();
$registry = $session->get('registry');
$registry->set('myvar', $myvarvalue); 
```

那么使用 a 有什么意义`JRegistry`呢？这几乎是提供的功能`JRegistryFormat`。您可以使用它来解析和格式化状态：

```
$session = JFactory::getSession();
$registry = $session->get('registry');
$json = $registry->toString('JSON');
$xml = $registry->toString('XML'); 
```

还值得指出的是，使用`JApplication/setUserState`你的状态最终会在“默认”命名空间中：

```
$app = JFactory::getApplication();
$app->setUserState( 'myvar', $myvarvalue );
// $_SESSION['default']['registry']->set('myvar', $myvarvalue) 
```

# php - 强制下载 MOV 而不是在浏览器中查看

> ID：13196220
> 
> 赞同：-1
> 
> 时间：2012-11-02T13:29:57.227
> 
> 标签：php, browser, download

> **可能重复：**
> [如何强制下载文件？](https://stackoverflow.com/questions/531292/how-to-force-download-of-a-file)
> [用php强制下载大文件](https://stackoverflow.com/questions/4425227/forced-downloading-large-file-with-php)

我有一个网站，其中列出了整个下载负载，链接是从数据库动态生成的，但我在尝试发布 .mov 文件时遇到了问题。

我基本上需要强制下载而不是在浏览器中查看。

我发现了几个线程建议 Content-Disposition 但它看起来不适用于动态创建的链接。

有什么简单的方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:33:29.580

它必须工作，除非你做错了什么。

查看此链接：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html)

PS 很高兴看到一些关于您尝试过的代码。

# javascript - 在 HTML5 Canvas 上旋转图像

> ID：13196223
> 
> 赞同：2
> 
> 时间：2012-11-02T13:30:03.013
> 
> 标签：javascript, image, css, rotation

我有一张需要旋转到某个角度的图像，然后在某个点将其绘制到画布上。我目前有这个：

```
var image = roach.image;
image.style.msTransform = 'rotate(' + roach.heading + 'deg)';
this.gameContext.drawImage(image, roach.position.x, roach.position.y); 
```

我如何编辑它以使其工作，其中 roach.heading 是我想将其旋转到度数的角度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:35:04.003

尝试这个：

```
var image = roach.image,
    ctx = this.gameContext,
    widthHalf = Math.floor( image.width / 2 ),
    heightHalf = Math.floor( image.height / 2 );

ctx.save();

ctx.translate( roach.position.x, roach.position.y );
ctx.translate( widthHalf, heightHalf );
ctx.rotate( ( Math.PI / 180 ) * roach.heading );
ctx.drawImage( image, -widthHalf, -heightHalf );
ctx.restore(); 
```

jsfiddle：http: [//jsfiddle.net/PwzEc/](http://jsfiddle.net/PwzEc/)

# image - 使所有图像具有相同的格式

> ID：13196227
> 
> 赞同：0
> 
> 时间：2012-11-02T13:30:21.253
> 
> 标签：image

**我想要什么：**我想为网上商店创建一个目录，以展示产品。
**问题：**我应该使用一种格式还是只允许典型格式`.jpg` `.png` `.gif`？
**理论：**我的想法是下一步：创建一个文件上传，在检查[getimagesize()](http://php.net/manual/en/function.getimagesize.php "getimagesize()")返回**true**`.jpg`后，所有图像都将被转换为*（并强制所有**扩展名的行为与**我的 .htaccess 文件中的行为一样）*。**问题**：这是一种可靠的方法，还是有人知道更好的选择？ ***`.jpg``ForceType image/jpeg`*** 

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:37:42.467

从浏览器的角度来看，这并不重要...... .jpg、.png 和 .gif 都只是在其内存空间中处理的对象。

但是，如果我提出建议，我可能会使用 JPG 作为默认设置，因为您可能会获得更好的压缩和更小的照片图像文件大小（我认为这是您产品的主题），这将有助于加快浏览体验。

根据您可用的服务器技术，我知道在基于 Unix 的服务器中，您可以安装一个名为 ImageMagick (sp?) 的模块，它允许您将图像从一种格式转换为另一种格式，我知道 Ruby、Perl 和 PHP 都具有允许您与公共域中可用的库集成的扩展。（我确信节点、Python 等也有各自使用的模块......）

只是我的 0.02 美元，祝你好运！****

# jquery - jQuery Cycle - 如何将“scrollHorz”过渡（包括后退/下一个导航）与自定义不透明度效果一起使用？

> ID：13196231
> 
> 赞同：2
> 
> 时间：2012-11-02T13:30:39.113
> 
> 标签：jquery, navigation, slideshow

希望你能帮忙。我正在使用循环插件进行幻灯片放映，并希望使用类似 fx: 'scrollHorz' 的东西来使幻灯片在分别按下下一个/后退按钮时向左/向右移动。

这里的基本演示：http: [//jquery.malsup.com/cycle/scrollhv.html](http://jquery.malsup.com/cycle/scrollhv.html)

然而，我不得不使用 fx: 'custom' 因为我已经介绍了我自己的不透明效果。所以现在，我失去了左/右滑动运动！

有人可以帮我启用幻灯片向左滚动（即从右侧进入）以获取下一个按钮并向右滚动（即从左侧进入）以获取后退按钮，同时保持我的不透明度效果？我设法让幻灯片在单击“#nextArrow”时从右向左移动，但我希望在按下“#prevArrow”时方向反转。

Cycle插件的当前代码：

```
$(document).ready(function() {
    $('#slideshowframe').cycle({
        fx: 'custom',
        timeout:0,      // setting for manual slideshow 
        speed:750,      // number of milliseconds between each transition
        next:   '#nextArrow', 
        prev:   '#prevArrow',
        cssBefore: {  
                top:  0, 
                    left: 1051,
                opacity: 0,
                display: 'block' 
        },

        animIn:  {  left: 0,
                opacity: 1
        },

        animOut: {  
                left: -1051,
                opacity: 0
        },
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:40:52.687

替换`fx:'custom'`为`fx:'scrollHorz'`

[http://jquery.malsup.com/cycle/scrollhv.html](http://jquery.malsup.com/cycle/scrollhv.html)

并且您必须添加该属性`rev: 0,`。

这是一个例子：[jsfiddle.net/7SQsX/21](http://jsfiddle.net/7SQsX/21)

# android - 从 Android 上的 URL 简单解析 JSON 并显示在列表视图中

> ID：13196234
> 
> 赞同：49
> 
> 时间：2012-11-02T13:30:45.743
> 
> 标签：android, json

我正在尝试解析从我的 Android 应用程序中的 URL 获取的 JSON 结果...

我在 Internet 上尝试了一些示例，但无法使其正常工作。JSON 数据如下所示：

```
[
    {
        "city_id": "1",
        "city_name": "Noida"
    },
    {
        "city_id": "2",
        "city_name": "Delhi"
    },
    {
        "city_id": "3",
        "city_name": "Gaziyabad"
    },
    {
        "city_id": "4",
        "city_name": "Gurgaon"
    },
    {
        "city_id": "5",
        "city_name": "Gr. Noida"
    }
] 
```

获取 URL 并解析 JSON 数据的最简单方法是什么在列表视图中显示

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-11-02T13:43:52.113

您可以使用`AsyncTask`，您必须进行自定义以满足您的需求，但类似于以下内容

* * *

异步任务具有三种主要方法：

1.  `onPreExecute()`- 最常用于设置和启动进度对话框

2.  `doInBackground()`- 建立连接并从服务器接收响应（不要尝试将响应值分配给 GUI 元素，这是一个常见错误，无法在后台线程中完成）。

3.  `onPostExecute()`- 这里我们脱离了后台线程，所以我们可以对响应数据进行用户界面操作，或者简单地将响应分配给特定的变量类型。

* * *

首先，我们将启动类，初始化 a`String`以将结果保存在方法之外但在类内部，然后运行该`onPreExecute()`方法，设置一个简单的进度对话框。

```
class MyAsyncTask extends AsyncTask<String, String, Void> {

    private ProgressDialog progressDialog = new ProgressDialog(MainActivity.this);
    InputStream inputStream = null;
    String result = ""; 

    protected void onPreExecute() {
        progressDialog.setMessage("Downloading your data...");
        progressDialog.show();
        progressDialog.setOnCancelListener(new OnCancelListener() {
            public void onCancel(DialogInterface arg0) {
                MyAsyncTask.this.cancel(true);
            }
        });
    } 
```

然后我们需要设置连接以及我们希望如何处理响应：

```
 @Override
    protected Void doInBackground(String... params) {

        String url_select = "http://yoururlhere.com";

        ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();

        try {
            // Set up HTTP post

            // HttpClient is more then less deprecated. Need to change to URLConnection
            HttpClient httpClient = new DefaultHttpClient();

            HttpPost httpPost = new HttpPost(url_select);
            httpPost.setEntity(new UrlEncodedFormEntity(param));
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            // Read content & Log
            inputStream = httpEntity.getContent();
        } catch (UnsupportedEncodingException e1) {
            Log.e("UnsupportedEncodingException", e1.toString());
            e1.printStackTrace();
        } catch (ClientProtocolException e2) {
            Log.e("ClientProtocolException", e2.toString());
            e2.printStackTrace();
        } catch (IllegalStateException e3) {
            Log.e("IllegalStateException", e3.toString());
            e3.printStackTrace();
        } catch (IOException e4) {
            Log.e("IOException", e4.toString());
            e4.printStackTrace();
        }
        // Convert response to string using String Builder
        try {
            BufferedReader bReader = new BufferedReader(new InputStreamReader(inputStream, "utf-8"), 8);
            StringBuilder sBuilder = new StringBuilder();

            String line = null;
            while ((line = bReader.readLine()) != null) {
                sBuilder.append(line + "\n");
            }

            inputStream.close();
            result = sBuilder.toString();

        } catch (Exception e) {
            Log.e("StringBuilding & BufferedReader", "Error converting result " + e.toString());
        }
    } // protected Void doInBackground(String... params) 
```

最后，在这里我们将解析返回，在这个例子中它是一个 JSON 数组，然后关闭对话框：

```
 protected void onPostExecute(Void v) {
        //parse JSON data
        try {
            JSONArray jArray = new JSONArray(result);    
            for(i=0; i < jArray.length(); i++) {

                JSONObject jObject = jArray.getJSONObject(i);

                String name = jObject.getString("name");
                String tab1_text = jObject.getString("tab1_text");
                int active = jObject.getInt("active");

            } // End Loop
            this.progressDialog.dismiss();
        } catch (JSONException e) {
            Log.e("JSONException", "Error: " + e.toString());
        } // catch (JSONException e)
    } // protected void onPostExecute(Void v)
} //class MyAsyncTask extends AsyncTask<String, String, Void> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T13:43:36.057

我建议使用该`JSONParser`课程。它非常易于使用。

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) throws IOException {

    // Making HTTP request
    try {

        // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);

            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (Exception ex) {
        Log.d("Networking", ex.getLocalizedMessage());
        throw new IOException("Error connecting");
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

然后在您的应用程序中，创建此类的一个实例。如果需要，您可能需要传递构造函数“GET”或“POST”。

```
public JSONParser jsonParser = new JSONParser();

try {

    // Building Parameters ( you can pass as many parameters as you want)
    List<NameValuePair> params = new ArrayList<NameValuePair>();

    params.add(new BasicNameValuePair("name", name));
    params.add(new BasicNameValuePair("age", 25));

    // Getting JSON Object
    JSONObject json = jsonParser.makeHttpRequest(YOUR_URL, "POST", params);
} catch (JSONException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-02T13:34:26.713

```
JSONObject(html).getString("name"); 
```

如何获取`html`字符串： [使用 android 发出 HTTP 请求](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-25T05:41:04.337

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.HashMap;

public class GetJsonFromUrl {
    String url = null;

    public GetJsonFromUrl(String url) {
        this.url = url;
    }

    public String GetJsonData() {
        try {
            URL Url = new URL(url);
            HttpURLConnection connection = (HttpURLConnection) Url.openConnection();
            InputStream is = connection.getInputStream();
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();
            String line;
            while ((line = br.readLine()) != null) {
                sb.append(line);
            }
            line = sb.toString();
            connection.disconnect();
            is.close();
            sb.delete(0, sb.length());
            return line;
        } catch (Exception e) {
            return null;
        }
    }
} 
```

这个类用于发布数据

```
import android.util.Log;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.DataOutputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.UnsupportedEncodingException;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.util.HashMap;
import java.util.Map;

import javax.net.ssl.HttpsURLConnection;

/**
 * Created by user on 11/2/16.
 */
public class sendDataToServer {
   public String postdata(String requestURL,HashMap<String,String> postDataParams){
        try {
            String response = "";
            URL url = new URL(requestURL);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setReadTimeout(15000);
            conn.setConnectTimeout(15000);
            conn.setRequestMethod("POST");
            conn.setDoInput(true);
            conn.setDoOutput(true);
            OutputStream os = conn.getOutputStream();
            BufferedWriter writer = new BufferedWriter(
                    new OutputStreamWriter(os, "UTF-8"));
            writer.write(getPostDataString(postDataParams));

            writer.flush();
            writer.close();
            os.close();
            String line;
            BufferedReader br=new BufferedReader(new InputStreamReader(conn.getInputStream()));
            while ((line=br.readLine()) != null) {
                response+=line;
            }
            Log.d("test", response);
            return response;
        }catch (Exception e){
            return e.toString();
        }
    }

    public String postjson(String url,String json){
        try {

            URL obj = new URL(url);
            HttpURLConnection con= (HttpURLConnection) obj.openConnection();

            //add reuqest header
            con.setRequestMethod("POST");
            con.setRequestProperty("Accept", "application/json");
            String urlParameters = ""+json;

            // Send post request
            con.setDoOutput(true);
            con.setDoInput(true);
            con.setRequestProperty("Content-Type", "application/json");
            OutputStreamWriter wr = new OutputStreamWriter(con.getOutputStream());
            wr.write(urlParameters);
            wr.flush();
            wr.close();

            int responseCode = con.getResponseCode();
            System.out.println("\nSending 'POST' request to URL : " + url);
            System.out.println("Post parameters : " + urlParameters);
            System.out.println("Response Code : " + responseCode);

            BufferedReader in = new BufferedReader(
                    new InputStreamReader(con.getInputStream()));
            String inputLine;
            StringBuffer response = new StringBuffer();

            while ((inputLine = in.readLine()) != null) {
                response.append(inputLine);
            }
            in.close();

            //print result
            System.out.println(response.toString());
            return response.toString();
        }catch(Exception e){

            return e.toString();
        }
    }

    private String getPostDataString(HashMap<String, String> params) throws UnsupportedEncodingException {
        StringBuilder result = new StringBuilder();
        boolean first = true;
        for(Map.Entry<String, String> entry : params.entrySet()){
            if (first)
                first = false;
            else
                result.append("&");

            result.append(URLEncoder.encode(entry.getKey(), "UTF-8"));
            result.append("=");
            result.append(URLEncoder.encode(entry.getValue(), "UTF-8"));
        }
        return result.toString();
    }

   /* public String postdata(String url) {
    }*/
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-02T13:38:22.360

尝试：

```
 // your get json request to server.. 
 HttpResponse response = httpClient.execute(httpPost);
 HttpEntity entity = response.getEntity();

 if(entity != null){
    JSONObject respObject = new JSONObject(EntityUtils.toString(entity));
    String active = respObject.getString("active");   
    String name = respObject.getString("name");  
    String tab1_text = respObject.getString("tab1_text");  
    //.... 
  }
else{
       //Do something here...
    } 
```

请参阅此示例以获取和解析来自服务器的 json 响应：

[http://adblogcat.com/parse-json-data-from-a-web-server-and-display-on-listview/](http://adblogcat.com/parse-json-data-from-a-web-server-and-display-on-listview/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-02T13:41:54.183

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet();
request.setURI(new URI(url));
HttpResponse response = client.execute(request);
BufferedReader in = new BufferedReader(new InputStreamReader(response
        .getEntity().getContent()));
String line = "";

while ((line = in.readLine()) != null) {

    JSONObject jObject = new JSONObject(line);

    if (jObject.has("name")) {

        String temp = jObject.getString("name");
        Log.e("name",temp);

    }

} 
```

# jquery - 更改 iPad 键盘上的“go”键

> ID：13196242
> 
> 赞同：2
> 
> 时间：2012-11-02T13:31:16.043
> 
> 标签：jquery, html, cordova

我正在 phonegap 中开发，并且我有一个带有输入字段的聊天窗口，如下所示：

```
<div class="chatWindow"></div>
<form>
   <input type="text">
   <input type="submit" onclick="sendChatMsg();return false;">
</form> 
```

我发现将属性添加`title="Search"`到文本输入字段会在 iPad 键盘上生成一个“搜索”按钮，而不是标准的“开始”按钮。但是我希望这个按钮被命名为“发送”或“返回”。

如果该字段不在`<form>`标签内，则自动选择返回按钮，但文本输入未链接到提交按钮。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:55:07.113

我最终想出了如何在文本输入中添加“return”键，方法是使用`<textarea>`输入（默认使用“return”）并触发输入，如下所示：

```
 $(".chatMsgArea").keydown(function(){
                if(event.keyCode == 13) {
                    sendChatMsg();
                    return false;
                }
            }); 
```

这允许存在返回键而不是“go”或“search”，并且这似乎是 pintrest 和 facebook 正在这样做的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:16:04.000

最好的方法可能是编写一个 phonegap 插件。

您需要编写一些可调用代码来执行以下操作

对于 a`UITextField`或可编辑的`UITextView`：

```
[myTextField setReturnKeyType:UIReturnKeyGo]; 
```

他们相应地编辑“开始”按钮的功能

# c# - 为什么 PdfSharp 在 Web 链接周围创建边框？

> ID：13196244
> 
> 赞同：4
> 
> 时间：2012-11-02T13:31:19.297
> 
> 标签：c#, pdfsharp

我有以下功能来使用 PdfSharp 创建一个网络链接：

```
 public static void AddWebLink(XGraphics gfx, PdfPage page, XFont font, string url, string text, int startX, int startY)
    {
        if (gfx == null)
            throw new ArgumentNullException("gfx");

        if (page == null)
            throw new ArgumentNullException("page");

        if (font == null)
            throw new ArgumentNullException("font");

        // Write out the text
        gfx.DrawString(text, font, XBrushes.Blue, new PointF(startX, startY));
        var stringSize = gfx.MeasureString(text, font);

        // Create the linked area
        // For some reason the Y of the rectangle needs to be startY minus the height
        startY -= (int)stringSize.Height;

        var rect = gfx.Transformer.WorldToDefaultPage(new XRect(startX, startY, stringSize.Width, stringSize.Height));
        var pdfRect = new PdfRectangle(rect);
        var annotation = page.AddWebLink(pdfRect, url);
        annotation.Opacity = 0; // Try and prevent it from rendering a box around the link in some viewers
    } 
```

生成 PDF 后，在 Foxit Reader 中查看时一切正常：

![福昕影像](../Images/7f04c31f825f2d1c64afd2d8f0acda52.png)

但是，Adobe Acrobat Reader 10 和 11 在链接区域周围显示黑色细边框：

[Acrobat http://dl.dropbox.com/u/6753359/acrobat-bad.PNG](http://dl.dropbox.com/u/6753359/acrobat-bad.PNG)

不幸的是，由于 Acrobat Reader 更加标准，因此要求它必须看起来正确。

有人能告诉我为什么我的所有链接区域在 acrobat reader 中都有边框吗？

* * *

**编辑：**我试图使注释被`annotation.Opacity = 0`和不可见`annotation.Color = XColor.FromArgb(255, 255, 255, 255);`。前者不起作用（边框仍然出现），后者使边框变为白色，这不是 100% 起作用，因为它会在某些文本行中产生奇怪的情况（例如切断 y、p 等底部的白线。 .)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T23:31:05.140

这是一个已知问题。

可以在这里找到解决方案：http: [//forum.pdfsharp.net/viewtopic.php?p=6161#p6161](http://forum.pdfsharp.net/viewtopic.php?p=6161#p6161)

该框架是 PDFsharp 中的一个错误。Adobe Reader 10.0.3 之前的一个错误是不显示框架。

**更新：**该错误已在很久以前修复，使用最新版本创建的链接周围不会有框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-15T01:48:08.850

我通过以下方式解决了这个问题：

[1.) 从CodePlex](http://pdfsharp.codeplex.com/releases)下载最新版本的 PDFSharp

2.) 将 PdfLinkAnnotations.cs 第 120 行从 修改`new PdfLiteral("<</Type/Border>>");`为`new PdfLiteral("<</Type/Border/W 0>>");`。

3.) 编译 PDFSharp 项目

4.) 将使用 PDFSharp 的项目更改为使用新编译的 .dll。

希望这个简单的包罗万象的解释对其他人有所帮助。

# java - 弹出窗口禁用 Mac 上 Java 应用程序中的菜单

> ID：13196248
> 
> 赞同：1
> 
> 时间：2012-11-02T13:31:31.790
> 
> 标签：java, macos, swing, popup, jmenuitem

我有一个 Java 程序，可以在其中启用和禁用菜单。它在 Windows 下运行良好，但在 Mac 上运行时我遇到了一些问题。

这是一段演示该问题的代码：

```
import javax.swing.*;
import java.awt.event.*;

public class PopTest extends JFrame {
    JMenu menu1;
    JMenu menu2;

    public PopTest() {
        menu1 = new JMenu("Menu 1");
        menu2 = new JMenu("Menu 2");
        menu2.setEnabled(false);

        menu1.add(new JMenuItem(new AbstractAction("With popup") {
                public void actionPerformed(ActionEvent event) {
                    JOptionPane.showMessageDialog(PopTest.this,"Popup","Popup",JOptionPane.ERROR_MESSAGE);
                    menu2.setEnabled(true);
                    menu2.add(new JMenuItem("New item"));
                }
            }));

        menu1.add(new JMenuItem(new AbstractAction("Without popup") {
                public void actionPerformed(ActionEvent event) {
                    menu2.setEnabled(true);
                    menu2.add(new JMenuItem("New item"));
                }
            }));

        JMenuBar menuBar = new JMenuBar();
        menuBar.add(menu1);
        menuBar.add(menu2);
        setJMenuBar(menuBar);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(200, 200);
        setVisible(true);
    }

    public static void main(String[] args) {
        try {
            System.setProperty("apple.laf.useScreenMenuBar", "true");
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        }
        catch(Exception e) {
            System.out.println("Exception: " + e.getMessage());
        }

        SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    new PopTest();
                }
            });

    }
} 
```

这就是程序的作用：

该程序有两个菜单，“菜单 1”和“菜单 2”。从一开始，菜单 1 被启用，而菜单 2 被禁用。

菜单 1 有两个项目几乎做同样的事情：它们启用菜单 2 并向其中添加一个菜单项。不同之处在于其中一项在启用菜单 2 之前显示消息对话框，而另一项则不显示。

现在，编译程序并试试这个：

实验 1：选择*Menu 1 > without popup*。现在单击菜单 2，您将看到菜单有一个*启用*的菜单项，称为“新项目”。

实验 2：关闭程序！再次启动程序。选择*菜单 1 > 弹出菜单*。在消息对话框中单击确定。现在单击菜单 2，您将看到该菜单有一个*禁用*的菜单项，称为“新项目”。单击桌面上的其他位置，使应用程序失去焦点。在应用程序中单击。单击菜单 2，您将看到该菜单项现已启用。

在实验 2 中，在您被指示单击桌面上的其他位置之前，应用程序不会失去焦点，这一点非常重要。否则你将看不到问题。

为什么在第二个实验中菜单 2 中的菜单项被禁用？这是一个错误吗？我正在使用 OS X 10.8.2 (Mountain Lion) 和 Java 1.7.0_09。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:06:15.013

我可以在 Java 7 中复制该问题，但不能在 Java 6 中复制该问题。我不明白为什么要这样做，但为我解决的一件事是将 setEnabled() 移到 JOptionPane.showMessageDialog() 之上：

```
 menu1.add(new JMenuItem(new AbstractAction("With popup")
    {
        public void actionPerformed(ActionEvent event)
        {
            menu2.setEnabled(true);
            JOptionPane.showMessageDialog(Test.this, "Popup", "Popup", JOptionPane.ERROR_MESSAGE);
            menu2.add(new JMenuItem("New item"));
        }
    })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:41:29.430

在我的早期版本中，两个菜单始终启用，但您可以通过将第二个发布`Runnable`到`EventQueue`.

```
EventQueue.invokeLater(new Runnable() {

    @Override
    public void run() {
        menu2.add(new JMenuItem("New item"));
    }
}); 
```

经测试；注意默认的 L&F、`@Override`注释和使用`pack()`：

```
import java.awt.EventQueue;
import java.awt.event.*;
import javax.swing.*;

public class PopTest extends JFrame {

    JMenu menu1;
    JMenu menu2;

    public PopTest() {
        menu1 = new JMenu("Menu 1");
        menu2 = new JMenu("Menu 2");
        menu2.setEnabled(false);

        menu1.add(new JMenuItem(new AbstractAction("With popup") {

            @Override
            public void actionPerformed(ActionEvent event) {
                JOptionPane.showMessageDialog(PopTest.this,
                    "Popup", "Popup", JOptionPane.ERROR_MESSAGE);
                menu2.setEnabled(true);
                menu2.add(new JMenuItem("New item"));
            }
        }));

        menu1.add(new JMenuItem(new AbstractAction("Without popup") {

            @Override
            public void actionPerformed(ActionEvent event) {
                menu2.setEnabled(true);
                EventQueue.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        menu2.add(new JMenuItem("New item"));
                    }
                });
            }
        }));

        JMenuBar menuBar = new JMenuBar();
        menuBar.add(menu1);
        menuBar.add(menu2);
        setJMenuBar(menuBar);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setSize(200, 200);
        setVisible(true);
    }

    public static void main(String[] args) {
        System.setProperty("apple.laf.useScreenMenuBar", "true");

        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new PopTest();
            }
        });

    }
} 
```

# c# - PropertyGrid 处理未知类型/自定义属性

> ID：13196253
> 
> 赞同：3
> 
> 时间：2012-11-02T13:31:47.280
> 
> 标签：c#, properties, xna, propertygrid

我刚刚尝试将 PropertyGrid 用于我的“游戏编辑器”，以便更轻松地编辑对象等，但是您如何处理未知类型？

例如，我使用 XNA，Texture2D 是 XNA 框架的一种类型（其他工作很好，例如 Point/Vector），但 Texture2D 只是其核心的位图，所以有没有办法“处理”未知类型并自定义如何PropertyGrid 可以显示它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T16:08:04.030

您可以使用[TypeConverters](http://msdn.microsoft.com/en-us/library/ayybcxe5%28v=vs.71%29.aspx)

有从 TypeConverter 继承并提供基本行为的泛型类型转换器，其中最有用的是[ExpandableObjectConverter](http://msdn.microsoft.com/en-us/library/system.componentmodel.expandableobjectconverter.aspx)，您可以使用它来扩展类实例。

```
 [TypeConverter( typeof( ExpandableObjectConverter ) )]
    public PhysicsObject Physics { get; private set; } 
```

这是我的 Point3 结构及其自定义类型转换器的示例：

```
namespace Microsoft.Xna.Framework
{
#if WINDOWS
    public class Point3Converter: System.ComponentModel.ExpandableObjectConverter
    {
        public override bool CanConvertFrom( System.ComponentModel.ITypeDescriptorContext context, Type sourceType )
        {
            return sourceType == typeof( string );
        }

        public override object ConvertFrom( System.ComponentModel.ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value )
        {
            try
            {
                string[] tokens = (( string ) value).Split( ';' );
                return new Point3( int.Parse( tokens[0] ), int.Parse( tokens[1] ), int.Parse( tokens[2] ) );
            }
            catch
            {
                return context.PropertyDescriptor.GetValue( context.Instance );
            }
        }

        public override object ConvertTo( System.ComponentModel.ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType )
        {
            Point3 p = ( Point3 ) value;
            return p.X +";"+ p.Y+";" + p.Z;
        }
    }

    [System.ComponentModel.TypeConverter( typeof( Point3Converter ) )]
#endif
    public struct Point3
    {
        public int X,Y,Z;

        public static readonly Point3 UnitX = new Point3( 1, 0, 0 );
        public static readonly Point3 UnitY = new Point3( 0, 1, 0 );
        public static readonly Point3 UnitZ = new Point3( 0, 0, 1 );

        public Point3( int X, int Y, int Z )
        {
            this.X = X;
            this.Y = Y;
            this.Z = Z;
        }

        public static Vector3 operator +( Point3 A, Vector3 B )
        {
            return new Vector3( A.X + B.X, A.Y + B.Y, A.Z + B.Z );
        }

        public static Point3 operator +( Point3 A, Point3 B )
        {
            return new Point3( A.X + B.X, A.Y + B.Y, A.Z + B.Z );
        }

        public static Point3 operator -( Point3 A, Point3 B )
        {
            return new Point3( A.X - B.X, A.Y - B.Y, A.Z - B.Z );
        }

        public static Point3 operator -( Point3 A )
        {
            return new Point3( -A.X, -A.Y, -A.Z );
        }

        public override string ToString( )
        {
            return X+";"+Y+";"+Z;
        }
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T14:08:11.390

您不清楚“自定义”和“默认”类型之间的区别，Texure2D 在 xna 框架中定义为 Vector3 或 Point 。但是这些有一个 DataType 转换器。如果您创建一个我认为是“自定义”类型的类型，您应该使用 TypeConverter，但是如果您想自定义以一般方式显示的属性，您可以使用自定义 PropertyTab 和自定义 PropertyDescriptors，这里是一个示例ozcandegirmenci.com/post/2008/08/...，您会意识到这是一个更核心的解决方案... – Blau

[http://www.ozcandegirmenci.com/post/2008/08/Extending-PropertyGrid-Adding-custom-PropertyTab-and-PropertyDescritors.aspx](http://www.ozcandegirmenci.com/extending-propertygrid-adding-custom-propertytab-and-propertydescritors/)链接已更改。你可以到达这里。

新链接：[http ://www.ozcandegirmenci.com/extending-propertygrid-adding-custom-propertytab-and-propertydescritors/](http://www.ozcandegirmenci.com/extending-propertygrid-adding-custom-propertytab-and-propertydescritors/)

# deadlock - 我可以看到 odbc dll 正在等待使用 windbg 的关键部分吗？

> ID：13196256
> 
> 赞同：2
> 
> 时间：2012-11-02T13:31:52.893
> 
> 标签：deadlock, windbg

我转储了一个挂起的进程，我有三个线程在等待这个：

```
ntdll.dll ZwWaitForKeyedEvent
ntdll.dll RtlSleepConditionVariableCS
kernel32.dll SleepConditionVariableCS
odbc32.dll EnterCancelCSAndDbcCS
odbc32.dll FreeStmt
odbc32.dll SQLFreeStmt
oqpers.dll ZED_SQLFreeStmt 
```

有什么办法可以看到关键部分`odbc32.dll`？我想知道它在等待什么线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T15:28:07.770

从`kv`输出中，您应该能够看到传递给[SleepConditionVariableCS](http://msdn.microsoft.com/en-us/library/windows/apps/ms686301%28v=vs.85%29.aspx)的临界区地址。然后使用该`!critsec [address]`命令查看当前是否有人拥有它。

但是根据上面的堆栈跟踪，线程仍然在等待条件，并且还没有尝试重新获取锁。试图找出为什么有人没有发出条件事件的信号并不是一件容易的事。

我会探索 odbc32!EnterCancelCSAndDbcCS 的参数和堆栈。从名称上看，它可能使用了两个关键部分，其中一个可能被锁定，以防止其他线程发出条件信号。

# pointers - 我如何知道动态分配数组的特定位置是否为 NULL？

> ID：13196259
> 
> 赞同：1
> 
> 时间：2012-11-02T13:32:12.207
> 
> 标签：pointers

如果我声明一个数组，如：

```
int *array; 
array=(int *)malloc(10*sizeof(int)); 
```

而且...我想知道数组[5] 是否为空，我该怎么办？

```
if(*array[5]==NULL){
    printf("is it correct? ");
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:34:31.817

如果在对数组进行任何操作之前用 NULL 填充数组，然后在“清空”它之后将 NULL 放入数组槽中，那么是的，那么你需要这样的代码：

```
if (array[5] == NULL) {
    printf("Cell 5 is empty");
} 
```

你不需要`*`.

此外， malloc 不会用 NULL 预填充它，所以不要依赖它。

但是请注意，在这种情况下，将 NULL 放入数组中没有多大意义。NULL 是空*指针*的特殊值，其单个元素`array`不是。在这种情况下，您只需要根据您的情况需要存储一些其他“空”值，例如 0 或 -1。

如果您*确实*想`array`存储指针，则需要将其声明更改为如下所示：

`int **array`

这使它成为双指针或指针数组，具体取决于您如何使用它。分配它可以像这样工作：

```
int **array;
array = malloc(sizeof(int*) * 10); 
```

此时， 的每个元素`array`都是一个指针，然后您可以使用`*`运算符取消引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:34:15.770

不使用 * 或 [] 使用

```
*(array+5) == NULL 
```

或者

```
array[5] == NULL 
```

但不是两者都因为 array 是指向 int 或 int 数组的指针（它是同一件事，这取决于您希望如何查看它）。 `*array[5]`将是槽 5 处的 int 指针指向的整数，相当于`**(array+5)`. 请注意，如果要测试 NULL，则必须在 malloc 之后将内存设置为 0。使用 memset(array, 0, 10*sizeof(int))。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:34:25.367

`array[5]`是一个未初始化的`int`. `array[5]`已经`int`在那个位置返回了，因为`array`是一个`int*`，所以取消引用它没有意义。

它不是空的，从中读取也是非法的。

# c# - 无论如何要在 Razor Generator 模板中创建递归助手

> ID：13196261
> 
> 赞同：4
> 
> 时间：2012-11-02T13:32:25.197
> 
> 标签：c#, razor, html-helper, razorgenerator

我使用[Razor Generator](http://razorgenerator.codeplex.com/)创建了一个模板。现在我需要在一个递归函数中创建一个嵌套的项目列表。我尝试[了这个解决方案](https://stackoverflow.com/questions/6422895/mvc3-razor-recursive-function)，但后来我的所有代码都被标记为错误。

```
@* Generator: Template *@

@functions
{
    public IList<Models.Category> Topics
    {
        get;
        set;
    }

}

@helper ShowTree(IList<Models.Category> topics)
{
    <ul>
        @foreach (var topic in topics)
        {
            <li>
                @topic.Title
                @if (topic.Childs.Count > 0)
                {
                    @{
                         ShowTree(topic.Childs);
                     }
                }
            </li>
        }
    </ul>
} 
```

添加助手后我得到的一些不相关的错误：

```
-Error  3 Invalid expression term ';'
Error   4 Feature 'lambda expression' cannot be used because it is not part of the ISO-2 C# language specification
Error   13 Feature 'implicitly typed local variable' cannot be used because it is not part of the System C# language specification
Error   6 The name 'WriteLiteralTo' does not exist in the current context 
```

但是当我删除辅助方法时，所有这些都消失了！

我做错了什么还是不可能在 Razor 模板中创建助手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:47:39.917

对于它的价值，由于没有人提供更好的答案，因此我们放弃了使用 RazorGenerator 模板正是出于这个原因。

我的问题[到此结束](https://stackoverflow.com/q/13035427/298754)，我们的答案是在内部服务器上建立一个本地 MVC 网站，并使用它来呈现我们的模板。这是我见过的唯一一个按照我想要的方式工作的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:23:42.567

下面的代码将起作用。

```
@helper ShowTree(IList<Models.Category> topics)
{
    if (topics != null && topics.Any()) {
    <ul>
        @foreach (var topic in topics)
        {
            <li>
                @topic.Title
                @ShowTree(topic.Childs)
            </li>
        }
    </ul>
    }
} 
```

# objective-c - 自定义 UISlider - 增加“热点”大小

> ID：13196263
> 
> 赞同：18
> 
> 时间：2012-11-02T13:32:48.973
> 
> 标签：objective-c, ios, uislider

我有一个自定义的 UISlider，由于“拇指图像”的大小，大手指的人很难抓住和滑动。有没有办法在不改变图像大小的情况下增加可点击/可拖动区域的大小？

如果有帮助，这是我用于创建自定义滑块的代码：

```
[slider setMaximumTrackImage:[[UIImage imageNamed:@"max.png"]
                                             resizableImageWithCapInsets:UIEdgeInsetsMake(0, 20, 0, 20)]
                                   forState:UIControlStateNormal];
[slider setMinimumTrackImage:[[UIImage imageNamed:@"min.png"]
                                             resizableImageWithCapInsets:UIEdgeInsetsMake(0, 20, 0, 20)]
                                   forState:UIControlStateNormal];
[slider setThumbImage:[UIImage imageNamed:@"thumb.png"]
                            forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-15T20:10:36.743

我最终继承了 UISlider 并覆盖了这个方法：

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent*)event {
    CGRect bounds = self.bounds;
    bounds = CGRectInset(bounds, -10, -15);
    return CGRectContainsPoint(bounds, point);
} 
```

这将可触摸区域的左侧和右侧扩展了 10 个像素，顶部和底部扩展了 15 个像素。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-11T15:44:37.277

此解决方案适用于 iOS 8：

```
class ExtUISlider: UISlider {

    var thumbTouchSize : CGSize = CGSizeMake(50, 50)

    override func pointInside(point: CGPoint, withEvent event: UIEvent?) -> Bool {
        let bounds = CGRectInset(self.bounds, -thumbTouchSize.width, -thumbTouchSize.height);
        return CGRectContainsPoint(bounds, point);
    }

    override func beginTrackingWithTouch(touch: UITouch, withEvent event: UIEvent) -> Bool {
        let thumbPercent = (value - minimumValue) / (maximumValue - minimumValue)
        let thumbSize = thumbImageForState(UIControlState.Normal)!.size.height
        let thumbPos = CGFloat(thumbSize) + (CGFloat(thumbPercent) * (CGFloat(bounds.size.width) - (2 * CGFloat(thumbSize))))
        let touchPoint = touch.locationInView(self)

        return (touchPoint.x >= (thumbPos - thumbTouchSize.width) &&
            touchPoint.x <= (thumbPos + thumbTouchSize.width))
    }
} 
```

学分转到这篇文章：[http ://www.mpatric.com/2009-04-15-more-responsive-sliders-on-the-iphone](http://www.mpatric.com/2009-04-15-more-responsive-sliders-on-the-iphone)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-01-20T20:16:23.090

**斯威夫特 3**

`UISlider`触摸面积增加的子类

```
class CustomSlider: UISlider {

    private var thumbTouchSize = CGSize(width: 40, height: 40)

    override func point(inside point: CGPoint, with event: UIEvent?) -> Bool {
        let increasedBounds = bounds.insetBy(dx: -thumbTouchSize.width, dy: -thumbTouchSize.height)
        let containsPoint = increasedBounds.contains(point)
        return containsPoint
    }

    override func beginTracking(_ touch: UITouch, with event: UIEvent?) -> Bool {
        let percentage = CGFloat((value - minimumValue) / (maximumValue - minimumValue))
        let thumbSizeHeight = thumbRect(forBounds: bounds, trackRect:trackRect(forBounds: bounds), value:0).size.height
        let thumbPosition = thumbSizeHeight + (percentage * (bounds.size.width - (2 * thumbSizeHeight)))
        let touchLocation = touch.location(in: self)
        return touchLocation.x <= (thumbPosition + thumbTouchSize.width) && touchLocation.x >= (thumbPosition - thumbTouchSize.width)
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-09T12:45:32.897

我最终使用了它，它对我来说效果很好。

发布此答案，以便对某人有所帮助。

```
import UIKit

class CustomSlider: UISlider {

/*
// Only override draw() if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
override func draw(_ rect: CGRect) {
    // Drawing code
}
*/
// Increase slider height
   override func trackRect(forBounds bounds: CGRect) -> CGRect {
    let customBounds: CGRect = CGRect(origin: bounds.origin, size: CGSize(width: bounds.size.width, height: 5.0))
    return customBounds
}

override func thumbRect(forBounds bounds: CGRect, trackRect rect: CGRect, value: Float) -> CGRect {
    return super.thumbRect(
        forBounds: bounds, trackRect: rect, value: value)

}

// Increase Thumb hot spot clickable area
override func point(inside point: CGPoint, with event: UIEvent?) -> Bool {
    var bounds: CGRect = self.bounds
    bounds = bounds.insetBy(dx: -10, dy: -10);
    return bounds.contains(point);

}

override func awakeFromNib() {
    // Configure Volume slider
    let thumbImageNormal = UIImage.init(named:"thumb")
    self.setThumbImage(thumbImageNormal, for: .normal)

    super.awakeFromNib()
}

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-22T08:23:46.800

您也可以只增加图像大小，这将导致滑块拇指大小的增加。

1.  如果您需要保持图像尺寸不太大但调整滑块大小，只需在图像内容周围添加透明空间。 [![在此处输入图像描述](../Images/bcce72512053256fe23bdfb25aadb57a.png)](https://i.stack.imgur.com/f4IMl.png)

2.  如果您在 UITableViewCell 中使用滑块，问题也在于滑块**之前**的表格视图处理手势。要更改这一点，请使用以下解决方案： [https](https://stackoverflow.com/a/37751635/2150954) ://stackoverflow.com/a/37751635/2150954 我认为将他的代码翻译成 Objective C 并不太难。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-07T13:38:54.990

调整框架大小并将图像对齐更改为所需的。您可以使其对齐居中、左、右、上或下。这样做：

```
CGRect newFrame = sliderHandle.frame;
CGRectSetWidth(newFrame, 80);
CGRectSetHeight(newFrame, 80);
[sliderHandle setFrame:newFrame];
[sliderHandle setContentMode:UIViewContentModeCenter]; 
```

所以你的触摸框会更大，图像比例将保持不变。

# jquery - Rails、pjax 和数据表

> ID：13196264
> 
> 赞同：1
> 
> 时间：2012-11-02T13:32:49.880
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, datatables, pjax

我有一个使用 pjax (pjax.heroku.com/) 的 Rails 应用程序，因此我的标题和导航栏永远不会重新加载。这一切都很好，花花公子和工作，但在我的一个观点中，我正在使用数据表（datatables.net）。当您第一次加载页面时，数据表运行良好，但如果您导航到另一个页面然后返回，该表不会“重新启动”，因此它不起作用，一切看起来都像废话。显然这是因为数据表js文件由于pjax而没有再次加载。

这是我所拥有的：

`application.js`：

```
//= require jquery
//= require jquery_ujs
//= require pjax
//= require_tree . 
```

在`application.html.erb`我的头上：

```
<%= javascript_include_tag "application" %> 
```

`<%=`然后将产量包装`%>`在一个 div 中`data-pjax-container`。

我在表格`index.html.erb`下方（硬编码）中调用 data-tables js 文件：

```
<script type="text/javascript" src="/data-table.js"></script> 
```

然后在一个单独的`custom.js`文件中，这是启动表的内容：

```
$(document).pjax('a[data-pjax]');
$('.openinside').pjax('.sidebarInner'); 
```

知道这里发生了什么吗？我认为该表没有被重新启动，但是当由于 Pjax 每次都没有加载标头时，如何让它重新启动？我什至尝试将 JS 链接放在桌子下方，但没有成功！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:17:45.717

不确定这是否有帮助（因为这个问题是从一个月前开始的），但我在一条类似的船上。我有一个 pjax 数据表，它在我的页面咖啡脚本文件中加载。

所以我在**pjax:end**上调用负载，它确实有效，但我现在正在寻找一种加载方法，如果它被正常调用（所以要么文档完整，要么在 pjax:end 上）。

```
$(document).on "pjax:end", ->
  $("#leads_table").dataTable({bJQueryUI: true, sPaginationType: "full_numbers", bRetrieve: true}) 
```

也许这有帮助（或帮助其他人）。

# magento - 在观察者中获取可配置产品的最终价格

> ID：13196267
> 
> 赞同：0
> 
> 时间：2012-11-02T13:32:56.897
> 
> 标签：magento, magento-1.7, cart, observers, configurable-product

我有两个价格（每月价格和价格）的可配置产品。由于产品的价格是固定的，只有每月的价格可以随选项变化，我添加了一个存储价格的属性（device_price），价格属性将具有每月的价格。

当然，当我将产品添加到购物车时，我需要收取价格，而不是每月的价格。所以我使用了一个带有以下代码的 checkout_cart_product_add_after 观察者：

```
public function updatePrice(Varien_Event_Observer $observer){

    $item = $observer->getQuoteItem();
    if ($item->getParentItem()) {$item = $item->getParentItem();}

    if ($item->getProduct()->isConfigurable()){
        $device_price = Mage::getModel('catalog/product')->load($item->getProduct()->getId())->getPrice_device();
        //set information
        $item->setCustomPrice($device_price);
        $item->setOriginalCustomPrice($device_price);
        $item->getProduct()->setIsSuperMode(true);
    }
 } 
```

但是现在我想在购物车上显示两个价格，当我在观察者上更新它时，最终价格会自动出现，但是我如何获得每个月的价格？（产品价格加上所选联营公司的价格）。

我想在我覆盖它之前，每月价格在报价项目的某个地方（我实际上是覆盖它还是只是说 magento 来查看自定义而不是原始价格？）。

我的想法是获取每月价格并将其存储在 quoteItem 的某个位置，以便我可以轻松地在购物车上访问它。

如何在观察者上获得可配置产品的最终价格？

如果考虑到有更好的方法来解决它，我愿意接受其他建议。

**编辑解决方案**

最后我找到了它在哪里。我现在感觉很糟糕，因为实际上很容易得到它:(我一直试图从项目中获取价值，但它实际上是在项目内部的产品上

```
$_item->getProduct()->getFinalPrice(); 
```

这将为您提供所选选项的可配置产品的最终价格。

也许这可以帮助其他人不浪费我所做的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:48:02.777

您将从请求中获得的选项价格。

```
Mage::app()->getFrontController()->getRequest() 
```

# c++ - 一个类使用另一个类的方法 c++

> ID：13196269
> 
> 赞同：0
> 
> 时间：2012-11-02T13:32:58.067
> 
> 标签：c++, class, try-catch

我有两个班级`A`， 和`B`。它们是这样声明的：

```
class A
{
    public: void function() throw (exception);
};

class B
{
    public: void function();
}; 
```

`B::function`来电`A::function`。在里面`B::function`，我想抑制`A::function`有时抛出的异常，然后继续执行。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:35:45.217

您可以使用以下方法删除所有异常`try { .. } catch ( ... ) { }`：

```
void ClassB::doSomething()
{
    try {
        classAObject.doSomethingWhichMayThrow();
    } catch ( ... ) {
    }
} 
```

请注意，这可能具有道德含义。您应该准备好解释（至少在代码的注释中）为什么此时吞下异常是可以接受的。

# jwplayer - 在 JW 播放器中添加字幕

> ID：13196276
> 
> 赞同：2
> 
> 时间：2012-11-02T13:33:17.137
> 
> 标签：jwplayer

我正在在线播放电影，我想知道是否可以在 JW 播放器中添加字幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T13:08:05.887

对于 JW Player 6.x，您已经内置了字幕功能： [http ://www.longtailvideo.com/support/jw-player/28845/adding-video-captions/](http://www.longtailvideo.com/support/jw-player/28845/adding-video-captions/)

对于 JW Player 5.x，您有字幕插件 [http://www.longtailvideo.com/support/jw5/31151/captions-plugin](http://www.longtailvideo.com/support/jw5/31151/captions-plugin)

# padrino - 我可以在 Padrino 中获得自动 HTML 转义吗？

> ID：13196277
> 
> 赞同：0
> 
> 时间：2012-11-02T13:33:20.473
> 
> 标签：padrino

Rails 3+ 具有自动 XSS 预防功能。我可以在帕德里诺得到同样的东西吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:39:33.440

当然，如果您使用 Slim，例如默认情况下是打开的

```
== 'this is not escaped'
= 'this is escaped' 
```

# android - Wikitude：如何在 HTMLDrawables 中加载 JQuery

> ID：13196278
> 
> 赞同：0
> 
> 时间：2012-11-02T13:33:19.567
> 
> 标签：android, augmented-reality, wikitude

我们在这个安卓增强现实应用中使用了 ARchitect 和 Wikitude。基本上我们想为 html 添加额外的功能。所以我们想在上面添加 jquery 风格。

我们正在尝试在 HTML drawable 中加载 JQuery，但它不起作用。

当我们将 html 文件加载到普通浏览器时，它运行良好。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="jquery-1.8.2.min.js"></script> 
```

我们尝试使用这两个代码，但没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:16:38.817

在正确获取 JQuery 库调用路径后为我工作。
在这种情况下，将下载的 JQuery 库文件 (jquery-1.9.1.js) 移动到 Eclipse 项目中与使用 JQuery 的 HTML 文件所在的文件夹相同的文件夹中，此时脚本调用行如下所示：
`<script src="jquery-1.9.1.js"></script>`

# javascript - 具有相同选项的多个下拉列表：如何从其他下拉列表中删除一个下拉列表中当前选定的项目？

> ID：13196283
> 
> 赞同：1
> 
> 时间：2012-11-02T13:33:42.140
> 
> 标签：javascript

我的应用程序有多个`<select>`下拉菜单，显示完全相同的选项列表。一旦我从其中一个下拉列表中选择了一个项目，它应该从其他下拉列表中删除所选项目。如何使用 JavaScript 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:44:52.960

您将识别元素的 value 属性，然后遍历所有 select 元素，遍历其所有内容以找到具有相同 value 属性值的内容，最后使用以下方法删除该选项：

```
option.parentElement.removeChild(option); 
```

或者，您可以使用 jQuery：

```
$(document).on('change','select',function(){
    $(this).addClass('exception');
    $('option[value="' + this.value + '"]:not(.exception *)').remove();
    $(this).removeClass('exception');
}); 
```

[http://jsfiddle.net/PCvT4/](http://jsfiddle.net/PCvT4/)

它完成了同样的事情。我在这里可以预见的问题是，经过几次选择后，您将用尽选项。您可以尝试禁用这些选项，如下所示：

```
$(document).on('change','select',function(){
    $('option[value="disabled"]').prop('disabled',false);
    $(this).addClass('exception');
    $('option[value="' + this.value + '"]:not(.exception *)').prop('disabled',true);
    $(this).removeClass('exception');
}); 
```

[http://jsfiddle.net/ZrsC6/](http://jsfiddle.net/ZrsC6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:47:18.960

尝试这个：

```
$(document).ready(function() {
    $("select").change(function() {
        var self=this;

        $("select").each(function() {
            if (this===self) {
                return;
            }

            $(this).prop('selectedIndex',0);
        });
    });
});​ 
```

[工作小提琴](http://jsfiddle.net/ctQ5F/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-17T10:21:53.293

```
<!DOCTYPE html>
<html>
<body>

<form>
<select id="mySelect1" onclick="check(this.value)">
  <option value="2" selected disabled>select option</option>
  <option id="m1" value="0">Cats</option>
  <option id="m2" value="1">Dogs</option>
</select>
</form>

<form>
<select id="mySelect2">
    <option value="2" selected disabled>select option</option>
  <option id="m3">Cats</option>
  <option id="m4">Dogs</option>
</select>
</form>

<form>
<select id="mySelect3">
   <option value="2" selected disabled>select option</option>

  <option id="m5">Cats</option>
  <option id="m6">Dogs</option>
</select>
</form>

<form>
<select id="mySelect4">
   <option value="2" selected disabled>select option</option>

  <option id="m7">Cats</option>
  <option id="m8">Dogs</option>
</select>
</form>

<form>
<select id="mySelect5">
   <option value="2" selected disabled>select option</option>

  <option id="m9">Cats</option>
  <option id="m10">Dogs</option>
</select>
</form>

<p id="demo">hello</p>
<p id="demo2">hello2</p>

<script>
    function check(val){
//        var val=document.getElementById("mySelect1").value;
        console.log(val);
        if(val==0){
            disablecats();
        }
        else if(val==1){
            disabledogs();
        }
    }
function disablecats() {

    document.getElementById("m3").disabled = true;
    document.getElementById("m5").disabled = true;
    document.getElementById("m7").disabled = true;
    document.getElementById("m9").disabled = true;
    document.getElementById("m4").disabled = false;
    document.getElementById("m6").disabled = false;
    document.getElementById("m8").disabled = false;
    document.getElementById("m10").disabled = false;
}

function disabledogs(){

    document.getElementById("m4").disabled = true;
    document.getElementById("m6").disabled = true;
    document.getElementById("m8").disabled = true;
    document.getElementById("m10").disabled = true;
     document.getElementById("m3").disabled = false;
    document.getElementById("m5").disabled = false;
    document.getElementById("m7").disabled = false;
    document.getElementById("m9").disabled = false;
}
</script>

</body>
</html> 
```

# jquery - 如何在jquery中获取属性值作为文本

> ID：13196286
> 
> 赞同：0
> 
> 时间：2012-11-02T13:33:49.127
> 
> 标签：jquery

当您单击菜单中的菜单项时，我正在尝试制作 jquery slideUp/slideDown。我认为我可以通过根据 display 属性的值做一个条件来做到这一点，但由于某种原因它不起作用。我一定没有正确获取属性值，我做错了什么？

```
$(document).ready(function() {
$("#left-help-menu li").click(function() {
    if($(this).children().attr('display') == 'none')
    {   
        $(this).children().css('display', 'block');
    }
    else if($(this).children().attr('display') == 'block')
    {
        $(this).children().css('display', 'none');
    }
});
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T13:36:25.823

`display`不是 html 对象的属性。您需要在下一行检查您使用 css 设置的值：

```
if($(this).children().css('display') == 'none') {   
    $(this).children().css('display', 'block');
} 
```

更好的是：

```
$(document).ready(function() {
    $("#left-help-menu li").click(function() {
        $(this).children().toggle();
    });
}) 
```

编辑：为清楚起见，带有注释和变量的相同代码

```
$(document).ready(function() {

    // When all the html has been loaded we locate all the <li> tags
    var $lis = $("#left-help-menu li");

    // After that we bind the click event on them to an anonymous function
    $lis.click(function() {

        // Whenever a <li> is clicked this code will run.

        // First, lets get a hold of the clicked element
        var $li = $(this);

        // Now, find all the elements in that <li>
        $children = $li.children();

        // Lastly, lets hide or show them
        $children.toggle();
    });
}) 
```

注意：这实际上不会使`<li>`“幻灯片”的内容向上/向下。如果您愿意，可以使用该[`$.slideToggle()`](http://api.jquery.com/slideToggle/)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:36:45.607

`display`是样式而不是属性。更改`.attr()`为`.css()`

试试这个，

```
$(document).ready(function() {
  $("#left-help-menu li").click(function() {
    if($(this).children().css('display') == 'none')
    {   
        $(this).children().css('display', 'block');
    }
    else if($(this).children().css('display') == 'block')
    {
        $(this).children().css('display', 'none');
    }
  });
}) 
```

# c# - WCF InstanceContext Single 或 InstanceContext PerSession 与静态成员

> ID：13196288
> 
> 赞同：1
> 
> 时间：2012-11-02T13:33:53.440
> 
> 标签：c#, .net, wcf, nettcpbinding

我正在使用 netTcpBinding 和双工通信设计带有 WCF（用于学习目的）的 PubSub 系统。在我的发布者 ServiceContract 中，我有一本需要在所有会话之间共享的字典，并列出了我需要特定于会话的内容。

这种情况下的最佳选择是什么？

1.  **InstanceContext.PerSession** - 字典作为静态成员，列表作为私有成员
2.  **InstanceContextMode.Single** - 字典作为私有，列表将转移到字典（键 - 用户，值 - 用户列表）

我的另一个问题是，我来自 NodeJS/EventMachine 背景，我不希望这种服务在性能方面更明智 - ConcurrenyMode。***多重***或并发模式。***可重入***？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:46:16.247

首先 - ConcurrencyMode.Reentrant 是单线程的，所以会以锁结束，你最好使用 ConcurrencyMode.Multiple （前提是你已经在你的代码中采取了必要的步骤来防止常见的线程问题）

关于您的 instancecontextmode - 在您描述的场景中，我相信 PerSession 比 Single 更好。

这里也有点帮助 - [http://msdn.microsoft.com/en-us/library/system.servicemodel.concurrencymode.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.concurrencymode.aspx)

# php - PHP API 创建软件，数据库模式

> ID：13196289
> 
> 赞同：1
> 
> 时间：2012-11-02T13:33:53.527
> 
> 标签：php, mysql, database, api, schema

我正在创建一个软件，让您可以在线创建任何您想要的 REST API。

例如，您想要创建共享 20 世纪汽车型号/制造商列表的 API，因此您需要以下字段：颜色、型号、制造商和“无限”数量的其他字段。

任何注册用户都可以创建“无限”数量的 API，这些 API 公开“无限”数量的数据（具体而言：行 od 数据格式：id|color|model|manufacturer|等等）。

问题是**如何存储这种数据**。

我创建了一个使用 4 个表的工作模型：**提要、行、列和值**

但这会导致：

*   复杂连接
*   由于某些处理，功能有限，必须在 PHP 站点上完成
*   需要额外的抽象层

所以**我的下一个想法是创建一个单独的数据库**（如果需要，可以水平分区），比如**myproject_data**。

创建 API 时，将在 myproject_data 中创建具有适当名称的表。

该解决方案将消除将数据（列、行、值、提要）处理为可用数据（填充了数据的正确格式行）所需的抽象层。

就我担心使用数百个表可能会出现的性能问题而言，我相信性能损失不会像使用复杂连接并仅使用具有数十万条记录的 4 个表时那么大。另外，这将消除额外的抽象层。

**你怎么看 ？**

# mysql - mysql全文搜索未返回预期结果

> ID：13196290
> 
> 赞同：4
> 
> 时间：2012-11-02T13:33:55.187
> 
> 标签：mysql, full-text-search

所以我想使用全文搜索来实现更好的搜索功能，但是它的行为并不像预期的那样。它不会返回任何结果，或者我认为不相关的结果。

首先，我检查了：

> 显示变量，如 'ft_min%'

...返回为 4

所以我有一个充满游戏名称的数据库。搜索的一个很好的例子是“刺客信条”。在数据库中，它们实际上存储为“刺客信条”（注意撇号）。因此，如果我执行以下查询：

> SELECT g_name, MATCH(g_name) AGAINST ('assassins creed') AS score FROM tgmp_games WHERE MATCH(g_name) AGAINST ('assassins creed') LIMIT 15

返回结果很好（下面的一些）

...但是使用搜索脚本，它使用 JqueryUI 自动完成下拉菜单，并且当提交查询字符​​数少于整个单词的任何内容时，它返回为空

> SELECT g_name, MATCH(g_name) AGAINST ('assass') AS score FROM tgmp_games WHERE MATCH(g_name) AGAINST ('assass') LIMIT 15

我还读到数据库中的行数如果太低会产生影响，但是那里有 25k 行，所以应该没问题。我究竟做错了什么？

我可以得到的结果的输出，但更感兴趣的是如何让零件搜索词返回一些结果。

```
Array
(
    [g_name] => Assassins Creed III
    [score] => 15.406005859375
)

Array
(
    [g_name] => The Witcher 2: Assassins of Kings
    [score] => 8.46316719055176
)

Array
(
    [g_name] => Tenchu: Shadow Assassins
    [score] => 8.46316719055176
)

Array
(
    [g_name] => The Witcher 2: Assassins of Kings - Enhanced Edition
    [score] => 8.27909851074219
)

Array
(
    [g_name] => Assassin\'s Creed
    [score] => 6.84770059585571
)

Array
(
    [g_name] => Assassin\'s Creed III
    [score] => 6.84770059585571
)

Array
(
    [g_name] => Assassin's Creed II
    [score] => 6.84770059585571
)

Array
(
    [g_name] => Assassin's Creed: Revelations ...
    [score] => 6.77157783508301
)

Array
(
    [g_name] => Assassin\'s Creed: Revelations
    [score] => 6.77157783508301
)

Array
(
    [g_name] => Assassin's Creed: Brotherhood
    [score] => 6.77157783508301
)

Array
(
    [g_name] => Assassin's Creed: Bloodlines
    [score] => 6.77157783508301
)

Array
(
    [g_name] => Assassin's Creed II: Discovery
    [score] => 6.77157783508301
)

Array
(
    [g_name] => Assassin\'s Creed III: Liberation
    [score] => 6.77157783508301
)

Array
(
    [g_name] => Assassin's Creed: Altair's Chronicles
    [score] => 6.69712924957275
)

Array
(
    [g_name] => Assassin's Creed II:  Bonfire of the Vanities
    [score] => 6.69712924957275
) 
```

此外，这个顺序也很奇怪，因为“巫师 2”超越了其他“刺客信条”游戏。不确定是否可以使用某种模式以避免卡在标点符号上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T16:01:50.657

查看用于布尔搜索的 MySQL 文档。 [http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)。您可能想要使用的是 * 运算符（类似于 % 通配符）。

MATCH（g_name）反对（布尔模式下的'assass *'）

由于 MySQL 应用于全文索引的 50% 规则，表中的行数会受到影响。如果一个词出现在表中超过 50% 的行中，那么 MySQL 认为它太常见而无法在缩小结果范围内提供任何值，并且它被忽略。这通常用于消除诸如“the”之类的词。

# xcode - “Mac 开发者”和“第 3 方 Mac 开发者应用程序”之间的区别

> ID：13196291
> 
> 赞同：35
> 
> 时间：2012-11-02T13:33:55.833
> 
> 标签：xcode, macos, mac-app-store

`Mac Developer`和`3rd Party Mac Developer Application`profile和有什么不一样`Code Signing Identity`？哪一个适用于 Mac App Store 分发？

![在此处输入图像描述](../Images/2b3642d122287749926edcfa6b0eb000.png)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-28T10:35:31.570

我也为此挠头了一段时间。

这在*“Mac 的工具工作流程指南”*中进行了解释，可在此处找到：

[https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011201-CH1-SW1](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011201-CH1-SW1)

（与 Apple 一样，这些主题非常神秘，并不总是能很好地解释）。

以下是一些相关段落：

> 证书的名称以文本“Mac Developer”开头（Mac 开发证书）、“3rd Party Mac Developer Application”（Mac 提交证书）和“3rd Party Mac Developer Installer”（Mac 安装程序证书）

和

> 开发证书应出现在 Keychain Access 的 My Certificates 类别中。证书名称以文本“Mac Developer:”开头，后跟您的开发证书名称，如图 3-2 所示

和

> 如果您是团队代理或管理员并且您申请了分发证书，那么您的分发证书和开发人员证书都会出现在 Keychain Access 的 My Certificates 类别中，如图 3-3 所示。分发证书以文本“3rd Party Mac Developer”开头，后跟证书类型和您的团队名称。

最后，

> **使用 Mac 提交证书签名**
> 
> 在创建存档之前，请使用 Mac 提交证书签署您的项目。
> 
> ...
> 
> 为此，只有团队代理或管理员可以获取和使用分发证书。如果您还没有这样做，请立即按照“创建签名证书”中的说明创建您的分发证书。稍后当您提交到 Mac App Store 时，系统会要求您选择 Mac 安装程序证书以对安装程序包进行签名。
> 
> 接下来，将 Code Signing Identity 构建设置设置为以文本“3rd Party Mac Developer Application”开头的 Mac 提交证书，如“签署应用程序”中所述。运行您的应用程序以验证这是您要发布的版本。

所以基本上，*“Mac Developer：”*证书是用于签署代码的个人开发者证书。*“第 3 方 Mac 开发者”*证书，如果您想提交到 App Store 并具有执行此操作所需的角色。

不要混淆，注意还有*“Developer ID Application”*和*“Developer ID Installer”*证书。这些用于签署应用程序以在 App Store 之外分发。*在“在 Mac App Store 之外分发”*下的同一文档中进行了描述

 ***更新：**最初提到的苹果文档的链接现在已经过时了。现在在此处更新的“应用程序分发指南”中对此进行了更好的解释 - [https://developer.apple.com/library/mac/documentation/IDEs/Conceptual/AppDistributionGuide/MaintainingCertificates/MaintainingCertificates.html#//apple_ref/doc/uid /TP40012582-CH31-SW41](https://developer.apple.com/library/mac/documentation/IDEs/Conceptual/AppDistributionGuide/MaintainingCertificates/MaintainingCertificates.html#//apple_ref/doc/uid/TP40012582-CH31-SW41)*

# ios - 将标签栏和导航栏添加到应用程序

> ID：13196295
> 
> 赞同：0
> 
> 时间：2012-11-02T13:34:07.240
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, uinavigationbar, uitabbar

我是 iOS 开发的新手。我附上了我的项目的链接，希望有人可以帮助我。我需要添加一个包含四个项目的标签栏（主页、关于我们、联系我们，以及指向将在 safari 中打开的网站的链接）。除了几个例外，每个视图上都会出现相同的三个项目。“主页”屏幕不需要主页项目，关于我们页面不需要那个项目，联系我们也不需要那个项目。

我还想要一个导航栏，在每个视图上都有一个后退按钮并显示该页面的标题。

这是我的项目的链接： [https ://www.dropbox.com/s/sv0y3oh1aftxl95/KFBNewsroom%204.zip](https://www.dropbox.com/s/sv0y3oh1aftxl95/KFBNewsroom%204.zip)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:43:29.377

下面的代码将帮助您解决问题

```
// set up a local nav controller which we will reuse for each view controller
UINavigationController *localNavigationController;

// create tab bar controller and array to hold the view controllers
UITabBarController *tabBarController = [[UITabBarController alloc] init];

NSMutableArray *localControllersArray = [[NSMutableArray alloc] initWithCapacity:1];

// setup the first view controller (Root view controller)
RootViewController *myViewController;
myViewController = [[RootViewController alloc] initWithTabBar];

// create the nav controller and add the root view controller as its first view
localNavigationController = [[UINavigationController alloc] initWithRootViewController:myViewController];
localNavigationController.navigationBar.barStyle = UIBarStyleBlack;
localNavigationController.delegate = self;

[localControllersArray addObject:localNavigationController];

// release since we are done with this for now
[localNavigationController release];
[myViewController release];

tabBarController.viewControllers = localControllersArray;
tabBarController.moreNavigationController.navigationBar.barStyle = UIBarStyleBlack;  

tabBarController.delegate = self;
tabBarController.moreNavigationController.delegate = self;

// release the array because the tab bar controller now has it
[localControllersArray release];

self.tabBarController.selectedIndex = 0;

// add the tabBarController as a subview in the window
self.window.rootiviewcontroller = self.tabbarcontroller; 
```

// 需要最后一行来显示窗口（和标签栏控制器） [window makeKeyAndVisible];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:51:48.920

与其将视图控制器直接推送到标签栏上，不如先创建一个导航控制器并使用其特定控制器的 rootviewcontroller 对其进行初始化

```
Settings *settingsVC = [[Settings alloc] init];
UINavigationController *settingsNavigationController = [[UINavigationController alloc] initWithRootViewController:settingsVC];
Report *reportVC = [[Report alloc] init];
UINavigationController *reportNavigationController = [[UINavigationController alloc] initWithRootViewController:reportVC];
Episodes *episodesVC = [[Episodes alloc] init ];
UINavigationController *episodesNavigationController = [[UINavigationController alloc] initWithRootViewController:episodesVC];
UINavigationController *homeNavigationController = [[UINavigationController alloc] initWithRootViewController:homeVC];

NSArray* controllers = [[NSArray alloc] initWithObjects:settingsNavigationController,
                               reportNavigationController,
                               episodesNavigationController,
                               homeNavigationController, nil]; 
```

# r - 如何在 data.table 分组中获取当前组的长度？

> ID：13196296
> 
> 赞同：10
> 
> 时间：2012-11-02T13:34:10.660
> 
> 标签：r, data.table, grouping

我知道这可以通过其他软件包来实现，但我正在尝试这样做`data.table`（因为它似乎是最快的分组）。

```
library(data.table)
dt = data.table(a=c(1,2,2,3))
dt[,length(a),by=a] 
```

结果是

```
 a V1
1: 1  1
2: 2  1
3: 3  1 
```

然而

```
df = data.frame(a=c(1,2,2,3))
ddply(df,.(a),summarise,V1=length(a)) 
```

生产

```
 a V1
1 1  1
2 2  2
3 3  1 
```

这是一个更明智的结果。只是想知道为什么`data.table`没有给出相同的结果，以及如何实现。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-02T13:48:03.280

执行此操作的 data.table 方法是使用特殊变量 ，`.N`它跟踪当前组中的行数。（其他特殊变量包括`.SD`, `.BY`（在 1.8.2 版中）和`.I`and `.GRP`（在 1.8.3 版中可用）。所有变量都记录在 中`?data.table`）：

```
library(data.table)
dt = data.table(a=c(1,2,2,3))

dt[, .N, by = a]
#    a N
# 1: 1 1
# 2: 2 2
# 3: 3 1 
```

要查看为什么您尝试的方法不起作用，请运行以下命令，在每个浏览器提示符处检查`a`和的值：`length(a)`

```
dt[, browser(), by = a] 
```

# backbone.js - 使用 r.js -o 时 Backbone.history.start() 会抛出 TypeError

> ID：13196299
> 
> 赞同：2
> 
> 时间：2012-11-02T13:34:19.390
> 
> 标签：backbone.js, requirejs, r.js

当我在我的 Backbone.js 应用程序上运行 r.js 优化器时，我收到此错误：

```
Uncaught TypeError: undefined is not a function 
```

它出现在输出的 Backbone.js 部分的中间。

我删除了一些代码，直到我发现导致它的原因，并且似乎是当我调用`Backbone.history.start();`.

我创建了一个简单的应用程序来复制我在下面发布的错误。基本上，它创建了一个路由和“console.log”的“家”。未优化时它工作正常。

为了优化应用程序，我使用：

```
node r.js -o app.build.js 
```

从 /js 文件夹。

我有 Backbone.js 0.9.2、RequireJS 2.1.1、r.js 2.1.1

有没有人遇到过这个？我对 Backbone.js/RequireJS 还是很陌生，所以希望这只是我做错了一些愚蠢的事情。

## 文件夹结构

```
/js
  /libs
    - backbone.js
    - require.js
    - underscore.js
  - app.build.js
  - r.js
  - site.js
index.html 
```

## 代码

### 索引.html

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

    <script data-main="/js/site.js" src="/js/libs/require.js"></script>

</body>
</html> 
```

### 网站.js

```
requirejs.config({
    baseUrl     : 'js/',
    paths       : {
        jquery          : '//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min',
        backbone        : 'libs/backbone',
        underscore      : 'libs/underscore'
    },
    shim        : {
        backbone        : {
            deps            : ['underscore', 'jquery'],
            exports         : 'Backbone'
        },
        underscore      : {
            exports         : '_'
        }
    }
});

require(['jquery', 'backbone'], function($, Backbone) {

    var Router = Backbone.Router.extend({
            routes      : {
                ''          : 'home'
            },
            home        : function(){
                console.log('home');
            }
        }),
        appRouter;

    $(function() {

        appRouter = new Router();
        Backbone.history.start();

    });

}); 
```

### app.build.js

```
({
    baseUrl: ".",
    name: 'site',
    paths: {
        jquery: 'empty:',
        underscore: 'libs/underscore',
        backbone: 'libs/backbone'
    },
    out: 'site-built.js',
    shim        : {
        backbone        : {
            deps            : ['underscore', 'jquery'],
            exports         : 'Backbone'
        },
        underscore      : {
            exports         : '_'
        }
    }
}) 
```

谢谢！

## 更新

这是 site-built.js 的输出。任何人都可以看出它有什么明显的问题吗？

[http://pastebin.com/Rbm7J83X](http://pastebin.com/Rbm7J83X)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:04:39.573

我内联了 jQuery，它现在似乎可以正常工作了。[（它在 requirejs.org 上](http://requirejs.org/docs/api.html#config-shim)的 API shim 文档底部提到，但在 Optimize 部分的任何地方都没有提到。）

不确定这是否是正确的修复，但希望它会帮助其他人。

# casperjs - Casperjs 相当于 var dump

> ID：13196305
> 
> 赞同：2
> 
> 时间：2012-11-02T13:34:35.037
> 
> 标签：casperjs

我想知道`var_dump`casper js 中的等价物是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:46:02.607

要将任何 var 内容[序列化为](http://casperjs.org/api.html#utils.serialize)JSON：

```
var serialized = require('utils').serialize(yourVar); 
```

直接将 JSON 序列化[转储](http://casperjs.org/api.html#utils.dump)到控制台：

```
require('utils').dump(yourVar); 
```

# objective-c - 在uithread忙时打开附件文件时IOS App崩溃

> ID：13196314
> 
> 赞同：0
> 
> 时间：2012-11-02T13:35:12.340
> 
> 标签：objective-c, ios, email-attachments

我有一个应用程序，我必须在其中进行大量活动`UIThread`。何时`UIThread`被阻止并且如果我尝试在我的应用程序中打开电子邮件附件，它会崩溃。我无法获得任何崩溃日志。应用程序退出。如果我尝试在应用程序不忙时打开，则没有问题。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:44:08.463

系统正在杀死您的应用程序，它必须是响应式的，将您的任务移动到后台线程并且永远不会阻塞`UIThread`。

使用以下方法之一：

1.  `dispatch_async(...`

2.  `[self performSelectorInBackgroundThread...`

3.  `NSOperation/NSOperationQueue`

# javascript - 哪个更适合做数据过滤：前端还是后端

> ID：13196315
> 
> 赞同：3
> 
> 时间：2012-11-02T13:35:15.387
> 
> 标签：javascript, server-side

对于初学者——我是编程的“菜鸟”，所以只要了解事物的工作原理并向社区寻求帮助。

但是......我想知道的是：

我有一个想要构建的 Web 应用程序，两个主要用户界面之一实际上是日历产品。每个日历项目都有 8 个与之关联的类别项目，每个类别有大约 5 个选项。我希望我的日历有一个强大的事件过滤系统，最好是用户与过滤器的交互不需要重新加载页面。

鉴于此信息，Javascript 可以在前端进行过滤吗？与基于选择/取消选择的过滤器让服务器端交付/重新交付事件相比，这是最合适的过滤方式吗？例如，如果总共有 50 个事件（假设没有应用过滤器），我会让服务器端语言查询/加载所有 50 个，然后交给 JS，它会运行过滤逻辑和显示/不显示作为适当的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-28T13:48:14.453

你可以试试 cross-filter ，这是前端数据过滤的最佳工具。

您可以从以下链接阅读详细信息：

[github中的交叉过滤器](http://square.github.io/crossfilter/)

# css - 将html转换为pdf时应用css

> ID：13196316
> 
> 赞同：-2
> 
> 时间：2012-11-02T13:35:20.097
> 
> 标签：css, vb.net, itextsharp

将 html 转换为 pdf 时，我的代码出现问题。即使我正在使用css也不会应用

```
StyleSheet.LoadStyle("class_name", "font-size", "24px") 
```

然后传递给这个

```
Dim parsedHtmlElements = HTMLWorker.ParseToList(New StringReader(content), obj) 
```

现在，当创建 pdf 文件时，不应用 css。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:04:04.700

这就是我在转换时动态插入 CSS 文件的方式。

```
Protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
    If Not Page.IsPostBack Then
        ' If we are in print mode, it's time to format the page for PDF generation
        If Not String.IsNullOrEmpty(Request.QueryString("print")) Then
            ' Dynamically add a LINK element to the page that points to the 
            ' print-ready CSS styles
            Dim printCSS As New HtmlLink
            printCSS.Href = "~/Framework/Styles/pdf.css"
            printCSS.Attributes.Add("rel", "stylesheet")
            printCSS.Attributes.Add("type", "text/css")
            Page.Header.Controls.Add(printCSS)
        End If
    End If
End Sub 
```

# visual-studio-2010 - 部署应用程序，设备被开发人员锁定

> ID：13196317
> 
> 赞同：1
> 
> 时间：2012-11-02T13:35:22.457
> 
> 标签：visual-studio-2010, windows-phone-7, deployment, zune

我之前已经将应用程序部署到我的窗口手机，但是今天当我尝试部署我的新应用程序时出现问题

![在此处输入图像描述](../Images/da4a0fc1da097b72b31c7b6956a0ac33.png)

zune 正在运行 我的手机已解锁，我的 windows live 帐户是正确的，当我进入开发者注册时，这种情况正在发生

![在此处输入图像描述](../Images/d71bb23771c4671bbd23aa8bbe6f7349.png)

所以我花了很长时间寻找解决方案，但我没有找到。有人有同样的问题吗？什么会导致这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:49:01.253

手机的注册在1年后自动过期，这可能是您面临的问题。虽然我不确定为什么你不能直接使用注册工具重新注册它。

要解决此问题：

1.  访问[Windows Phone 开发中心网站](https://dev.windowsphone.com/)并登录
2.  进入[设备管理页面](https://dev.windowsphone.com/en-us/Account/Devices)（点击右上角的live id，然后点击“Phones”）
3.  在列表中搜索您的手机，然后单击“删除”
4.  启动开发者手机注册工具以重新注册您的手机

# php - 为什么我们应该将 xxxx@developer.gserviceaccount.com 添加到用户帐户，以便我们可以检索我们的谷歌分析数据？

> ID：13196318
> 
> 赞同：5
> 
> 时间：2012-11-02T13:35:26.653
> 
> 标签：php, google-analytics-api

按照本教程一步一步[https://developers.google.com/analytics/resources/tutorials/hello-analytics-api](https://developers.google.com/analytics/resources/tutorials/hello-analytics-api)我收到此消息错误“用户没有任何 Google Analytics 帐户”。更多信息在[stackoverflow](http://goo.gl/Fdu59)上，社区中的一个人建议按照[此处](http://goo.gl/sl5x3)
描述的步骤将我用来与 google Analytics API 建立连接的电子邮件地址添加到个人资料帐户中，该电子邮件地址类似于 xxxxxxxxxx@developer.gserviceaccount.com， 并且效果很好！

情况是我的帐户可以访问多个网站分析数据，所以我必须转到每个客户资料，如果我有管理员访问权限，则添加电子邮件地址，否则我必须从他身边联系客户这样做，这似乎需要手动完成很多工作。

**是否有一种官方方法可以访问这些配置文件，而无需将 xxxxxxxxxx@developer.gserviceaccount.com 添加到用户帐户？**

# php - 替换字符串中的不同子字符串

> ID：13196319
> 
> 赞同：0
> 
> 时间：2012-11-02T13:35:27.667
> 
> 标签：php

我想用字符串中的多个不同字符串替换不同的子字符串，有没有更好的方法来做而不是我做劳动和使用

`str_replace ( mixed $search , mixed $replace , mixed $subject [, int &$count ] )`

与要替换的字符串数量一样多？

例如：在任何示例字符串中分别`a, b and c`替换为。`d, e and f`当然我有大量的词要改变，我需要它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:37:16.370

[str_replace()](http://php.net/manual/en/function.str-replace.php)接受一个数组作为搜索和替换参数，因此您可以将数组中的多个字符串传递给搜索，并将被替换参数中传递的数组中的相应字符串替换，如下所示：

```
$search = array('a','b','c');
$replace = array('d','e','f');

$res = str_replace($search, $replace, 'a b cool');
echo $res; //echoes 'd e fool' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:51:12.743

这样做的通常方法是提供一系列翻译

```
$xlat = array(
    'a' => 'd',
    'b' => 'e',
    'c' => 'f',
); 
```

然后将其传递给`str_replace`：

```
$result = str_replace(array_keys($xlat), array_values($xlat), $source); 
```

您可以从 SQL 查询或其他来源构建数组。

如果源字符串集和替换字符串集之间存在交集，或者源字符串之间存在内部匹配，则必须小心，例如

```
 'Alpha'  => 'Beta',
  'Beta'   => 'Gamma', 
```

甚至更狡猾，

```
 'Alpha'    => 'Beta',
  'Alphabet' => 'ABCDEFGHIJ', 
```

因为内部`str_replace`使用了一个循环，因此“Base Alpha”将作为“Base Gamma”出现，“Alphabet”作为“Betabet”而不是“ABCDEFGHIJ”出现。解决这个问题的一种可能方法是`$xlat`增量构建。如果您发现在新的 'a' => 'b' 中，'a' 已经在 的值中`$xlat`，则可以将其*推*送到`$xlat`而不是*附加*。当然，更复杂的关键字集（甚至两个或多个术语的*交换*）可能无法解决。

另一种方法是分两次运行：您首先生成一个`$xlat1`表单数组

```
 'a' => '###<UNIQUEID1>###',
 'b' => '###<UNIQUEID2>###', 
```

和表单的第二个数组

```
 '###<UNIQUEID1>###' => 'c',
 '###<UNIQUEID2>###' => 'd', 
```

您可以使用循环将第一个数组形式“升级”到第二个：

```
 // First step, we sort $xlat in order of decreasing key size.
 // This ensures that *Alphabet* will be replaced before *Alpha* is ever checked.

 // Then we build
 foreach($xlat as $from => $to)
 {
     $id = uniqid();
     $xlat1[$from] = $id;
     $xlat2[$id]   = $to;
 }
 $temp = str_replace(array_keys($xlat1), array_values($xlat1), $source);
 $result = str_replace(array_keys($xlat2), array_values($xlat2), $temp); 
```

# java - 带有 EclipseLink 和 Java SE 的 JPA

> ID：13196324
> 
> 赞同：2
> 
> 时间：2012-11-02T13:35:46.717
> 
> 标签：java, jpa, eclipselink

将项目 jar 文件导出到文件服务器后，jpa 的实体管理器的创建不再起作用。

有以下细节：

1.  我使用 Glassfishv3 项目中的 EclipseLink
2.  我从网站下载了 EclipseLink 2.4...。
3.  org.eclipse.persistence.core.jar、org.eclipse.persistence.jpa.jar、javax.persistence.jar 和 eclipselink.jar 在 lib 文件夹中。
4.  persistence.xml 位于 src 内的 META-INF 文件夹中。（我使用日食 helios）
5.  这是 persistence.xml 的内容

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <persistence 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" 
        version="2.0" 
        xmlns="http://java.sun.com/xml/ns/persistence">
        <persistence-unit name="QIS" transaction-type="RESOURCE_LOCAL" >
            <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
            <class>com.quoka.qis.lib.persistence.Type</class>
        </persistence-unit>
    </persistence> 
    ```

整个事情在 eclipse 中工作，但不是来自文件服务器。:-)

错误信息是：

```
org.eclipse.persistence.internal.jpa.deployment.xml.parser.XMLException
    URI was not reported to parser for entity [document])
Caused By:
Log Exception of type org.eclipse.persistence.internal.jpa.deployment.xml.parser.XMLException : 
(1\. URI was not reported to parser for entity [document])
(0) org.eclipse.persistence.internal.jpa.deployment.xml.parser.XMLExceptionHandler.error(XMLExceptionHandler.java:28)
(1) org.eclipse.persistence.internal.jpa.deployment.xml.parser.XMLExceptionHandler.warning(XMLExceptionHandler.java:23)
(2) gnu.xml.aelfred2.SAXDriver.warn(SAXDriver.java:935)
(3) gnu.xml.aelfred2.SAXDriver.startExternalEntity(SAXDriver.java:631)
(4) gnu.xml.aelfred2.XmlParser.pushURL(XmlParser.java:3358)
(5) gnu.xml.aelfred2.XmlParser.doParse(XmlParser.java:159)
(6) gnu.xml.aelfred2.SAXDriver.parse(SAXDriver.java:320)
(7) gnu.xml.aelfred2.XmlReader.parse(XmlReader.java:294)
(8) org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processPersistenceXML(PersistenceUnitProcessor.java:442)
(9) org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processPersistenceArchive(PersistenceUnitProcessor.java:401)
(10) org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.getPersistenceUnits(PersistenceUnitProcessor.java:310)
(11) org.eclipse.persistence.internal.jpa.deployment.JPAInitializer.findPersistenceUnitInfoInArchive(JPAInitializer.java:149)
(12) org.eclipse.persistence.internal.jpa.deployment.JPAInitializer.findPersistenceUnitInfoInArchives(JPAInitializer.java:136)
(13) org.eclipse.persistence.internal.jpa.deployment.JPAInitializer.findPersistenceUnitInfo(JPAInitializer.java:125)
(14) org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:98)
(15) org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:65)
(16) javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:78)
(17) com.quoka.qis.admin.QisAdminEntityManager.getInstance(QisAdminEntityManager.java:33)
(18) com.quoka.qis.admin.QisAdminFrame.login(QisAdminFrame.java:574)
(19) com.quoka.qis.admin.QisAdminFrame.testLogin(QisAdminFrame.java:513)
(20) com.quoka.qis.admin.QisAdminFrame.showFrame(QisAdminFrame.java:441)
(21) com.quoka.qis.admin.QisAdminFrame.showFrame(QisAdminFrame.java:417)
(22) com.quoka.qis.admin.QisAdminFrame.access$3(QisAdminFrame.java:416)
(23) com.quoka.qis.admin.QisAdminFrame$DebugPanel.run(QisAdminFrame.java:777)
(24) java.lang.Thread.run(Thread.java:662) 
```

DBConnection 是：

```
Map<String, String> properties = new HashMap<String, String>();
properties.put("javax.persistence.jdbc.driver", "com.sybase.jdbc3.jdbc.SybDriver");
properties.put("eclipselink.target-database", "Sybase");
properties.put("javax.persistence.jdbc.url", "jdbc:sybase:Tds:"+meta.getServerName()+":"+meta.getPort());
properties.put("javax.persistence.jdbc.user", meta.getUserName());
properties.put("javax.persistence.jdbc.password", meta.getPassword());
properties.put("eclipselink.logging.level", "INFO"); 

EntityManagerFactory emf = Persistence.createEntityManagerFactory("QIS", properties);
em = emf.createEntityManager(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:32:31.537

persistence.xml 文件格式正确，因此该错误可能与由于类路径混乱而调用了错误的 SAX 解析器有关。我的建议是仔细检查您的应用程序类路径，特别是检查包含的 jar 是否包含重复和不兼容的 SAX 解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:27:23.180

假设你这句话“将项目jar文件导出到文件服务器后”表示你将项目部署到Glassfish中，那么你的问题的答案如下：

您的问题是您正在为部署到 glassfish 中的应用程序创建一个事务类型为“资源本地”的 EntityManager。您的应用程序 - 一旦部署在 GlassFish 等任何应用程序服务器中 - 实际上由容器管理，它不再是一个 EE 应用程序，而不是 SE。由容器管理的 EntityManager 必须具有 JTA 事务类型。

按照这些步骤或参考[此链接](https://blogs.oracle.com/dana/entry/jdbc_connection_pools_in_glassfish)或参考[此链接](http://gardiary.wordpress.com/2009/07/30/create-jdbc-connection-pool-and-resource-in-glassfish/)来设置您的 JTA 交易类型：

1.  将 Sybase 驱动程序 jar 复制到文件夹中：..\glassfish\domains\domain1\lib
2.  打开 glassfish 管理控制台
3.  资源 -> JDBC -> JDBC 连接池
4.  按下新按钮
5.  池名称*：SybasePoolOfHasan
6.  暂时跳过资源类型
7.  数据库驱动程序供应商：Sybase
8.  按下一步按钮
9.  数据源类名：com.sybase.jdbc3.jdbc.SybDriver
10.  添加以下属性：

    URL= jdbc:sybase:Tds:"输入你的服务器名":"输入你的端口"

    用户 = 输入

    密码 = 输入

11.  推完
12.  推送 Ping -> Ping 成功
13.  打开资源 -> JDBC -> JDBC 资源
14.  JNDI 名称*：HasanSybaseJNDI
15.  池名称：SybasePoolOfHasan
16.  按确定

    回到你的persistence.xml，修改如下：

    持久性单元名称="QIS" 事务类型="JTA"

    jta-数据源>HasanSybaseJNDI

    重新部署，你就设置好了。

    尽管您必须修改代码以丢失任何事务处理。这意味着您的代码中不再需要以下两行：

    em.getTransaction().begin(); em.getTransaction().commit();

    Glassfish 应用服务器为您处理事务！

# haskell - 评估任何 ( ... -> IO () ) 函数的函数

> ID：13196326
> 
> 赞同：1
> 
> 时间：2012-11-02T13:35:50.360
> 
> 标签：haskell, lambda

**我**主要有几个输出信息的功能。

**我需要**测量他们的执行时间。

目前它是这样完成的：

```
 start <- getCurrentTime
  putStrLn $ show $ findNthMinLinear (getTestArrayOfLength (read arrlength :: Int)) 4
  stop <- getCurrentTime
  print $ diffUTCTime stop start 
```

我想将每个函数包装在一个函数中 1\. 记住时间 2\. 评估函数 3\. 记住时间 4\. 打印两个记住时间之间的差异

**问题**是我不知道如何在不先评估它的情况下传递一个函数。

**我的猜测**是，例如，如果我写 (<5)，即我创建一个返回函数的函数，那么在我传递最终参数之前不会做任何实际工作我猜？然后我可以写

```
printAndMeasure :: (a -> IO()) -> IO ()
...
printAndMeasure \x -> (getTestArrayOfLength (read arrlength :: Int)) 4 
```

但这是一个草率的解决方案，因为我真的不需要这个 x 除了阻止函数被执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:42:26.697

传递函数不会评估它。因此，您可以拥有类似的功能`IO () -> IO ()`并将`IO`操作传递给它们。当程序运行时，只`main`执行函数，并且直到需要时才评估函数的参数（惰性）。如果您尝试对代码进行基准测试，那么最好使用基准测试库，例如`Criterion`.

# objective-c - ios中的GalleryView，如ANDROID

> ID：13196328
> 
> 赞同：2
> 
> 时间：2012-11-02T13:35:54.610
> 
> 标签：objective-c, ios

我需要允许用户在 android 中拖动图像，如galleryview。我必须处理什么方法？我已经通过 AQGridView，还有其他方法可以在 iOS 中实现吗？

# c++ - 在 C++ 中设置/获取大量变量的好习惯

> ID：13196330
> 
> 赞同：2
> 
> 时间：2012-11-02T13:36:09.367
> 
> 标签：c++

我是 C++ 新手，正在制作一款游戏来自学更多。

我想听听您关于存储/访问大量变量的一些想法。

到目前为止，我所做的是尝试将我的“关键”变量粘贴到单独的命名空间中，以便我可以在整个程序中访问它们。

这是一个好主意吗？我有一种强烈的感觉，它可能会回来咬我。

提前感谢=]

编辑：我是第一年的计算机专业学生，但我有几年的 Java 经验。C++ 是如此不同 =/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:52:45.037

将变量分组到结构或类中。如果您需要在类之外公开大量变量，那么您必须重新考虑您的设计

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:27:30.563

组织数据的主要武器是类：类是代表程序元素的对象。你命名它，给它变量和函数，然后在你的程序中创建它的实例。该类负责其所有数据，并可以防止其他类访问它。

```
class foo
{
    public:
    int iAmAPublicVariable; // <---This variable can be accessed by anyone who has access to an instance of the class

    private:
    int iAmAPrivateVariable; // <---- This variable can be accessed only from within the class itself.
}; 
```

控制对类数据的访问的一种好方法是使用 Getter 和 Setter。所以...

```
class foo
{
    public:
    int getImportantData();
    void setImportantData(int );

    private:
    int importantData;
};

int foo::getImportantData()
{
    //here I could put some validation to make sure that it's ok to give out importantData;
    return importantData; //this will return a copy of importantData, so the original is still safe within the class
}

void foo::setImportantData(int newData)
{
    //here I could put some validation to make sure that it's ok to overwrite importantData;
    importantData = newData;
} 
```

使用这种设置，访问重要数据的唯一方法是通过 get 和 set 方法，因此该类可以最终控制发生在它身上的事情。

类应该是你程序的基础；如果您有大量变量，请查看它们的用途以及使用它们的函数，并尝试将过程分解为离散的功能区域。然后创建代表这些区域的类，并为它们提供所需的变量和方法。你的代码最终应该更小、更容易理解、更稳定、更容易调试、更可重用，并且更好地表示你试图建模的任何东西。

# wpf - 使用 PRISM 的 WPF DataTrigger 和按钮

> ID：13196331
> 
> 赞同：1
> 
> 时间：2012-11-02T13:36:10.910
> 
> 标签：wpf, prism

我有一个关于澄清 WPF 中的数据上下文的问题。我有一个基于棱镜的应用程序。我正在尝试将 DataTrigger 放在 Button 控件上。此 Button 控件配置为使用 PRISM 命令解释器。

```
<Button 
   Grid.Column="0"                             
   Content="{Resx AdvancedTroubleShootingButtonLabel}" 
   prism:Click.Command="{Binding AdvancedTroubleShootingCommand}"
 >
   <Button.Resources>
     <Style 
       TargetType="{x:Type Button}"  BasedOn="{StaticResource CDMWrappedButtonStyle}">

       <Style.Triggers>

         <DataTrigger Binding="{Binding Path=SizerVisible, ElementName=SecuritySizer}" Value="False" >
            <Setter Property="Button.IsEnabled" Value="True" />
         </DataTrigger>

         <DataTrigger Binding="{Binding Path=SizerVisible, ElementName=SecuritySizer}" Value="True" >
           <Setter Property="Button.IsEnabled" Value="False" />
         </DataTrigger>
       </Style.Triggers>

     </Style>
   </Button.Resources>
</Button> 
```

我的假设是 DataTriggers 将使用指定的 elementName 作为触发器的 Datacontext。当我测试这个 XAML 时，触发器不会运行。如果我删除 PRISM 命令语法（并挂钩到标准按钮单击事件）并进行测试，那么触发器就会触发。

我想知道的是为什么 PRISM 命令处理程序 [syntax] 会导致触发器不使用触发器脚本中标识的 DataContext？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T14:43:09.570

在命令定义中，您是否设置 CanExecute ？

我可能错了，但是因为 IsEnabled 绑定到其命令的 CanExecute，它可能会阻止触发器工作。

# ios - Xcode with VFR Reader 加载 PDF 错误

> ID：13196337
> 
> 赞同：1
> 
> 时间：2012-11-02T13:36:30.037
> 
> 标签：ios, vfr-reader

我使用[vfr/reader](https://github.com/vfr/Reader)打开 PDF 文件。当我打开第一个 PDF 文件时，我的应用程序会正确打开它，但是当我打开另一个文件时，我的应用程序会再次打开第一个文件。

这是我阅读 PDF 文件的功能

```
-(void)readIssue:(IssueMath *)issue {

    NSString *filePath = [[issue.contentURL path] stringByAppendingPathComponent:@"Mathematics.pdf"];

    NSLog(@"Read Path 1: %@ ",filePath);

    ReaderDocument *document = [ReaderDocument withDocumentFilePath:filePath password:nil];
    NSLog(@"Read Path 2: %@ ",document.fileURL);

    ReaderViewController *readerViewController = [[ReaderViewController alloc] initWithReaderDocument:document];
    readerViewController.delegate = self; // Set the ReaderViewController delegate to self

    readerViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    readerViewController.modalPresentationStyle = UIModalPresentationFullScreen;

    [self presentModalViewController:readerViewController animated:YES];
} 
```

这是`NSLog`输出：

```
2012-11-02 20:09:31.081 MAGAZINE[314:15203] Read Path 1: /Users/eakmotion/Library/Application Support/iPhone Simulator/5.0/Applications/EC25BC08-E1E7-44B6-9AD8-0A321EEAC8B6/Library/Caches/ISSUE3_2011/Mathematics.pdf 

2012-11-02 20:09:31.109 MAGAZINE[314:15203] Read Path 2: file://localhost/Users/eakmotion/Library/Application%20Support/iPhone%20Simulator/5.0/Applications/EC25BC08-E1E7-44B6-9AD8-0A321EEAC8B6/Library/Caches/ISSUE2_2011/Mathematics.pdf 
```

我想阅读“ISSUE3_2011/Mathematics.pdf”，但应用程序仍会读取第一个路径“ISSUE2_2011/Mathematics.pdf”

为什么`filePath`还是一样？

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:15:26.323

是的，您的解决方案有效，但如果您想跟踪所有 pdf 文档（例如当前页面编号）

您必须为本地 pdf 文件提供唯一名称。因为它会在本地设备文件夹中搜索 Mathematics.plist 文件以读取当前页码。

/Users/eakmotion/Library/Application Support/iPhone Simulator/5.0/Applications/EC25BC08-E1E7-44B6-9AD8-0A321EEAC8B6/Library/Caches/ISSUE3_2011/Mathematics.pdf

文件：//localhost/Users/eakmotion/Library/Application%20Support/iPhone%20Simulator/5.0/Applications/EC25BC08-E1E7-44B6-9AD8-0A321EEAC8B6/Library/Caches/ISSUE2_2011/Mathematics.pdf

这些文件正在类 ReaderDocument "unarchiveFromFileName" 方法中寻找相同的 Mathematics.plist 文件

```
NSString *archivePath = [ReaderDocument applicationSupportPath]; // Application's "~/Library/Application Support" path

NSString *archiveName = [[filename stringByDeletingPathExtension] stringByAppendingPathExtension:@"plist"]; 
```

尝试修改此代码部分或为您的文件指定唯一名称，例如数学问题_ISSUE3_2011.pdf 和数学问题_ISSUE2_2011.pdf

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T00:51:37.603

我知道这个问题已经有几个月的历史了，但是以防万一有人遇到同样的问题（就像我自己一样），我已经找到了解决方案。

在 vfr/Reader 的源中，找到该`Sources/ReaderDocument.m`文件，然后查找名为`+ (ReaderDocument *)withDocumentFilePath:`.

在那里，注释掉阻止文档重新加载的条件，如下所示。

```
+ (ReaderDocument *)withDocumentFilePath:(NSString *)filePath password:(NSString *)phrase
{
    ReaderDocument *document = nil; // ReaderDocument object

    document = [ReaderDocument unarchiveFromFileName:filePath password:phrase];

    //if (document == nil) // Unarchive failed so we create a new ReaderDocument object
    //{
    document = [[ReaderDocument alloc] initWithFilePath:filePath password:phrase];
    //}

    return document;
} 
```

这是我重新加载文档的快速而肮脏的方法。此解决方案的警告是，pdf 阅读器不会跟踪您在 pdf 页面中离开的位置，这在我的应用程序中并不重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-28T08:56:56.540

我遇到了同样的问题，并找到了以下解决方案：

```
// Path to first PDF file
NSString *filePath = 
    [[NSBundle mainBundle] pathForResource:@"someBookeName" ofType:@"pdf"]; 
```

只需更改文件路径，如上所示。如您所见，现在您不需要`NSArray * PDF`.

# forms-authentication - 混合模式联合身份验证和表单身份验证

> ID：13196339
> 
> 赞同：7
> 
> 时间：2012-11-02T13:36:33.780
> 
> 标签：forms-authentication, wif, single-sign-on, ws-federation, passive-sts

我正在尝试进行混合模式身份验证，以便能够将一些用户放在联合身份验证上，而将其他用户放在表单身份验证上。

我正在使用 WIF，我设置了我的 STS，一切都很开心，当我处于联合模式时，通过以下方式关闭所有身份验证：

```
<authorization>
    <deny users="?" />
</authorization>
<authentication mode="None" /> 
```

我登录到我的主应用程序，然后当我登录到我的侧应用程序时，它会让我静默登录，因为会话 cookie 已经生成并且用户已经过身份验证。

但是当我使用表单身份验证时，当我登录到我的侧面应用程序时，它会将我带到我理解的登录页面，因为用户未经过身份验证，但似乎即使拥有会话 cookie，它也不会静默重定向它。

我知道我需要将 onEndRequest 重定向到 STS 以对用户进行身份验证，如果用户已经通过身份验证，那么它将生成 FedAuth cookie，并且它将让我静默登录，

有人知道如何实现这一点，我研究时没有找到有关它的资源。

阿拉

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-08-17T21:00:05.647

对于所有需要在 asp.net 应用程序中设置联合用户身份验证的人，以下链接可能非常有用：
[http ://blog.elis-co.com/wif-sso-and-forms-authentication-in-asp-net/](http://blog.elis-co.com/wif-sso-and-forms-authentication-in-asp-net/)

上面链接中包含在配置中的 http 模块也已过时。因此，请使用以下文章中的内容进行更正：
[https ://docs.microsoft.com/en-us/dotnet/framework/security/how-to-build-claims-aware-aspnet-web-forms-app-using-老婆](https://docs.microsoft.com/en-us/dotnet/framework/security/how-to-build-claims-aware-aspnet-web-forms-app-using-wif)

# c++ - 全球键盘挂钩间谍？

> ID：13196340
> 
> 赞同：0
> 
> 时间：2012-11-02T13:36:37.543
> 
> 标签：c++, keyboard

我正在用 C# 编写一个快速工具，这有点像是一个虚拟键盘。目前我正在使用[SendKeys](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)。我想知道键盘记录​​器是否会捕获键，所以我找到[了这段代码](http://bobmoore.mvps.org/Win32/w32tip69.htm)，但我没有安装 mfc，所以我无法编译或运行它

如果键盘记录器正在记录 SendKeys，我如何键入，或者如何让代码（下面的代码片段）在单个 exe 中运行以测试我的代码？

```
#include <Windows.h>

static UINT uMsg = 0;
static HWND hWndMain = 0; 
static HHOOK hKeyHook = NULL ; 
#pragma data_seg()

HINSTANCE hInstance = 0; 
HOOKPROC lpfnHookProc = 0; 

LRESULT __stdcall KeyboardFunc (int nCode, WPARAM wParam, LPARAM lParam)
{
   BOOL bPassToChain;
   char szDebug [100];

   // Check for exception cases...
   if (nCode < 0)
      return (CallNextHookEx (hKeyHook, nCode, wParam, lParam));
   if (nCode == HC_NOREMOVE)
      return (CallNextHookEx (hKeyHook, nCode, wParam, lParam));

   switch (wParam)
   {
      case VK_F2:
           wsprintf (szDebug, "F2 key message, lparam = 0x%X\n", lParam);
           OutputDebugString (szDebug);

           // only send on keydown, not keyup (autorepeat)
           if (HIWORD (lParam) & 0xC000)
           {
              OutputDebugString ("F2 Keyup\n");
           }
           else
           {
              wsprintf (szDebug, "Sending F2 keydown message %d to hwnd 0x%X\n",
                        uMsg, hWndMain);
              OutputDebugString (szDebug);
              PostMessage (hWndMain, uMsg, 0, 0);
           }
           bPassToChain = FALSE;
           break;

      default :
           bPassToChain = TRUE ;
           break ;
   }

   if (bPassToChain)
      return (CallNextHookEx (hKeyHook, nCode, wParam, lParam));
   else
      return TRUE ; // We have processed this key
} 

BOOL __stdcall InstallExampleKeyboardHook (HWND hWnd, UINT uMyMsg) 
{
   hWndMain = hWnd ; 
   uMsg     = uMyMsg;
   lpfnHookProc = (HOOKPROC) KeyboardFunc ; 
   hKeyHook = SetWindowsHookEx (WH_KEYBOARD, lpfnHookProc, hInstance, NULL);

   if (hKeyHook) 
      return TRUE ; 
   else 
      return FALSE ; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:41:16.947

这与 MFC 无关。直接的本机 C++ 代码。如果你有 Visual Studio，你应该能够制作一个快速的控制台 c++ 应用程序，复制并粘贴该代码，然后编译和测试。如果没有，请去获取免费但大的 Windows SDK。不如 VS 友好，但有一个编译器，所以应该让你朝着正确的方向前进。

低级挂钩对调试器不太友好，因此您可能需要跟踪或注销一些有用的语句。

编辑：要获得模块句柄，你需要这样的东西：

```
HookModule = LoadLibrary(ModulePath);

HookProc HookFunction = GetProcAddress(HookModule, "GetMessageCallBack");

GetMessageHookHandle = SetWindowsHookEx(HookType.WH_GETMESSAGE, HookFunction, HookModule, 0); 
```

# java - 使用 JTextPane 中的链接从文件重新加载日志

> ID：13196342
> 
> 赞同：-1
> 
> 时间：2012-11-02T13:36:42.860
> 
> 标签：java, swing

我有一个包含日志的 TextPane。基本上是文本和链接的集合。使用 Jlabel 提供链接。现在用户也可以存储日志。到目前为止，它工作正常。稍后用户可以重新加载文件，但现在我如何使这些链接可用。之前，我插入了 JLabel 并工作。但是现在我如何检测链接（它可以与文本匹配）？

eclipse 和 netbeans 如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:01:07.950

不要使用 JLabels。设置适当的内容类型（文本/html）并使用链接。

例如，请参阅此[http://java-sl.com/tip_autocreate_links.html](http://java-sl.com/tip_autocreate_links.html)以了解如何自动创建链接。

# mysql - MYSQL：我应该为 2 种具有共同和不同字段的用户使用 2 张表吗？

> ID：13196345
> 
> 赞同：1
> 
> 时间：2012-11-02T13:36:47.400
> 
> 标签：mysql, database-design

我有 2 类用户 1\. 员工。2.员工朋友。

两个用户都有共同的领域。
1.名字2.中间名
3.姓氏
4.
手机号码
5.电话号码
6.城市地址
7.电子邮件（作为登录名）
8.密码 9.
注册日期
10.更新帐户日期

并且员工朋友用户没有此字段
1.employee id 2.company
name。
3.公司分公司
4.职位

他们将使用相同的登录表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:41:41.720

编辑版本（感谢 nawfal 和 Patrick James McDougle）

第一个表（用户）应包含字段 1-10（第一个列表）和一个新字段 fk_employees（我们的第二个表的外键，如果是employees_friend ，则为*null ）*

第二个表（员工）应包含字段 1-4（第二个列表）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:44:23.737

我对这一点的看法与我对面向对象编程的看法相同。如果员工 EXTENDS 用户，那么员工应该是具有额外信息的用户。我会有两张桌子。

`Users`（可能包含添加一个 id 字段的公共字段）& `Employees`（有 4 个额外的员工字段和一个引用用户表中唯一标识符的字段。）

更多关于我提议的信息可以在这里找到：[http ://www.agiledata.org/essays/mappingObjects.html#MappingInheritance](http://www.agiledata.org/essays/mappingObjects.html#MappingInheritance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:47:07.113

我建议使用上述字段创建 2 个单独的表作为用户和用户朋友。

现在使用以下查询创建一个视图：

```
select employeeID,email,password from users
union
select friendID,email,password from user_friends 
```

查询此视图以获取应用程序中的登录信息。

# facebook - 短信确认码太长

> ID：13196347
> 
> 赞同：4
> 
> 时间：2012-11-02T13:36:47.910
> 
> 标签：facebook, facebook-javascript-sdk, registration

我正在尝试注册为开发人员，并被要求提供我的手机号码。

我得到了 SMS 代码，但它有 8 个字符长，并且文本框只允许 6 个字符的代码。

我怎样才能输入我得到的代码？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:52:04.973

[虽然我能够重现您的问题，但我在尝试在电话确认页面](https://www.facebook.com/confirmphone.php)上验证我的身份时收到的短信也收到了一个链接，该链接作为验证它的次要手段，而不是手动插入代码和工作。

# perl - 一旦一行代码与 Perl 调试器中的正则表达式匹配，我如何才能中断？

> ID：13196351
> 
> 赞同：2
> 
> 时间：2012-11-02T13:37:11.083
> 
> 标签：perl, debugging, watch

我知道我可以使用命令添加变量和表达式的`w`监视，是否可以告诉它简单地解析每个命令并在该命令中包含特定文本时停止？

类似于`w m/bad command/`where`$_`的字符串包含正在执行的下一个命令。

我现在正在 Windows 上使用 Komodo 进行远程 CGI 调试，但我也可以`perl -d`在 linux shell 上使用。

* * *

**更新**：

我会尽力使这一点更清楚。有一个文件，其中包含磁盘上的数据被删除，我不知道在哪里。我正在调试的程序由许多相互需要的 .pl 文件组成，完整的代码库甚至更大。我当然可以通过 grep 来获取数据文件名称的一部分（我知道扩展名），或者`unlink`. 但是由于我不知道我的程序正在使用哪些代码文件，所以这并没有让我走得太远。

让我们考虑这段代码，它将被调试：

```
if ($foo == 1) {
  unlink 'filename.example';
} 
```

现在，当我调试它时，**如果将要执行的下一个 perl 命令（来自脚本）包含`/example/`**. 我想要一种在执行下一个命令之前运行的钩子。

这样，我不需要知道我想中断的东西在*哪里（比如在哪一行或文件中），也不需要变量名（因为没有变量名）。*

我知道这很难解释，但我认为这可能是一个常见问题。也许还有另一种方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T14:29:12.867

观察点使用 'w' 命令设置：

```
 BD<1>  w  $cannonballs 
```

每次 $cannonballs 更改时都会中断程序。

```
 BD<1> w $i == 19 
```

当 $i 的值设置为 19 时将中断。例如

```
 $ cat  foo.pl 

 foreach $i ( 0..100 ) {
    print "$i\n";
 }

 $ perl -d foo.pl

 Loading DB routines from perl5db.pl version 1.28 Editor support available.

 Enter h or `h h' for help, or `man perldebug' for more help.

 main::(foo.pl:2):       foreach $i ( 0..100 ) {   
   DB<1> w $i == 3   
   DB<2> c 
 0 
 1 
 2 
 Watchpoint 0:   $i == 3 changed:
     old value:  ''
     new value:  '1' 
 main::(foo.pl:3):          print "$i\n";   
   DB<2> p $i 
 3   
   DB<3> q 
 Watchpoint 0:   $i == 3 changed:
     old value:  '1'
     new value:  '' 
   DB<3> q
 $ 
```

您可能希望使用变量的完整命名空间，否则任何同名的变量进入或超出范围时都会中断。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T21:19:17.287

我不知道有一个模块可以完全满足您的要求，但[Devel::Trace](https://metacpan.org/module/Devel%3a%3aTrace)是一个非常小的模块（20 行代码），它会在执行之前打印每一行。

您可以创建它的子类，并修改 DB::DB 子例程以设置 $DB::single = 1 如果代码匹配您想要的字符串。

请参阅[brian d foy](http://www.effectiveperlprogramming.com/2011/11/trace-your-perl-programs/)关于 Devel::Trace 的帖子以获取更全面的描述，并附有示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:47:46.443

调试器已经可以做到这一点（嗯，几乎）。它不称为*监视表达式*，但称为*断点*。

您可以为行和条件设置断点：

```
b 33 /pattern/i 
```

但是，您必须指定行号。请参阅[Perl 调试](http://p3rl.org/perldebug)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T15:41:39.550

您可以使用在代码中设置断点

```
$DB::single = 1; 
```

要在监视配置中使用断点，请将断点括在与您要监视的内容相匹配的条件中。

在你的情况下：

```
if ( $command =~ /example/ ) {
    $DB::single = 1;
} 
```

应该服务。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-02T14:17:32.183

查看[`Tie::Trace`](http://search.cpan.org/perldoc?Tie%3a%3aTrace)，它可以提醒您变量值已更改的位置。我想您甚至可以使用`$DB::single=1`表达式破解它，以便在每次变量值更改时在调试器中中断。

# objective-c - 将日期转换为正确的格式

> ID：13196353
> 
> 赞同：1
> 
> 时间：2012-11-02T13:37:24.933
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我有一个网络服务，它通过以下方式返回我的日期。

```
Wed Oct 31 11:59:44 +0000 2012 
```

但我希望它以这种方式还给它

```
31-10-2012 11:59 
```

我知道应该使用 NSDateFormatter 来完成。但我现在不知道如何以正确的方式实现它。

我有这样的东西。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"dd/MM/yyyy"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT+0:00"]];
    NSDate *date = [dateFormatter dateFromString:[genkInfo objectForKey:DATE]]; 
```

有谁能够帮助我？

亲切的问候。

**此刻的代码**

```
 NSDateFormatter *f = [[NSDateFormatter alloc] init];
    [f setDateFormat:@"E MMM d hh:mm:ss Z y"];
    NSDate *date = [f dateFromString:@"Wed Oct 31 11:59:44 +0000 2012"];
    NSDateFormatter *f2 = [[NSDateFormatter alloc] init];
    [f2 setDateFormat:@"dd-MM-y hh:mm"];
    [f2 setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    NSString *date2 = [f2 stringFromDate:date]; 
```

**网络服务布局**

```
"text": "KRC Genk | Zaterdag is er opnieuw een open stadiontour http://t.co/tSbZ2fYG",
"created_at": "Fri Nov 02 12:49:34 +0000 2012" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:46:07.547

第 1 步：创建一个 NSDateFormatter，通过将格式设置为“服务器字符串”的格式，将您的字符串从服务器转换为 NSDate 对象

```
NSDateFormatter *f = [[NSDateFormatter alloc] init];
[f setDateFormat:@"E MMM d hh:mm:ss Z y"];
NSDate *date = [f dateFromString:@"Wed Oct 31 11:59:44 +0000 2012"]; 
```

第 2 步：使用所需的输出字符串创建另一个 NSDateFormatter，并使用新的 NSDateFormatter 将新的 NSDate 对象转换为字符串对象

```
NSDateFormatter *f2 = [[NSDateFormatter alloc] init];
[f2 setDateFormat:@"dd-MM-y hh:mm"];
[f2 setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
NSString *s = [f2 stringFromDate:date];

desiredformat = s; 
```

PS我不确定f格式，请查看此链接 [http://www.developers-life.com/nsdateformatter-and-uifont.html](http://www.developers-life.com/nsdateformatter-and-uifont.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:13:50.937

用于解析原始日期的格式字符串存在一些问题。而且语言环境设置不正确。无需设置时区。这将从提供​​的日期/时间字符串进行处理。

```
NSDateFormatter *f = [[NSDateFormatter alloc] init];
NSLocale *posix = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[f setLocale:posix];
[f setDateFormat:@"EEE MMM dd hh:mm:ss Z yyyy"];
NSDate *date = [f dateFromString:@"Wed Oct 31 11:59:44 +0000 2012"]; 
```

每当您解析（或格式化）不是来自用户或为用户提供的固定格式日期时，您都希望使用 en_US_POSIX 语言环境。不要使用 en_US_POSIX 语言环境向用户显示日期或时间。

# javascript - 基于鼠标位置的jQuery滚动条

> ID：13196360
> 
> 赞同：0
> 
> 时间：2012-11-02T13:38:10.393
> 
> 标签：javascript, jquery, html

所以我看过[jquery hover](https://stackoverflow.com/questions/6136847/smooth-scroller-based-on-mouse-position-jquery/6137535#comment17947604_6137535)，这一切都很好，但是我怎样才能使用一个列表呢？上一个用户使用的示例是所有图像背景。

我不确定它是否在正确的位置。

```
<div class="backdrop">
 <ul id="year"></ul>
<div class="direction left"></div>
<div class="direction right"></div> 
```

[jsfiddle](http://jsfiddle.net/72yhW/627/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:42:14.450

由于我无法更改背景位置，因此`<ul><li>`我决定在我的[解决方案](http://jsfiddle.net/pcproff/NCrkE/)中使用边距。

# arrays - 收缩选项不适用于 numpy 掩码数组

> ID：13196369
> 
> 赞同：1
> 
> 时间：2012-11-02T13:38:49.627
> 
> 标签：arrays, numpy, shrink, maskedinput

我创建了一个 numpy 掩码数组，其收缩选项设置为`False`（应该产生一个全尺寸掩码），然后我检查掩码的大小：

```
import numpy as np
import numpy.ma as ma
x = ma.array(range(10),shrink=False)
print 'mask size = ', np.array(x.mask).size 
```

这产生：`mask size = 1`，即掩码仍然是默认（收缩）标量掩码。

这是一个已知的错误？

*更新：* 似乎该选项`shrink=True`也无法正常工作：

```
x = ma.array(range(3), mask=True, shrink=True)
x.__setmask__(ma.nomask)                    # remove the mask (should shrink now)
x.mask.size                                 # returns 3, so mask has not shrunk!
_ = x.shrink_mask()                         # enforce shrinking
x.mask.size                                 # returns 1, so only now it's OK 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T16:55:33.367

这里有一个误解：`shrink`选项标志防止在操作中压缩掩码，而不是在创建时。要获得显式掩码（作为充满 的布尔数组`False`），请在创建时使用`mask=False`标志。尽管如此，我同意它应该被视为一个错误。不错的收获。

* * *

当没有给出显式掩码时，默认值为`nomask`，一个对应于 的特殊值`np.bool_(0)`：它是一个值为 的 numpy 布尔标量`False`，与任何 numpy 标量一样，a `shape`of`()`和大小为 1。

`mask=False`注意和`mask=nomask`:之间的区别`mask=False`将创建一个掩码作为 ndarray 具有与数据相同的形状但充满`False`（这是一个快捷方式），而`mask=nomask`只是告诉`np.ma`掩码没有设置（这加快了计算）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T15:07:42.983

只需尝试设置您的掩码（设置为 False 或 True）：

```
>>> np.ma.array(range(10), mask=False, shrink=False)
masked_array(data = [0 1 2 3 4 5 6 7 8 9],
             mask = [False False False False False False False False False False],
       fill_value = 999999)

>>> np.ma.array(range(10), mask=True, shrink=False)
masked_array(data = [-- -- -- -- -- -- -- -- -- --],
             mask = [ True  True  True  True  True  True  True  True  True  True],
       fill_value = 999999) 
```

该`mask`参数的默认值为`nomask`，但显然不会生成*任何*掩码（因此没有任何内容可以“取消缩小”）。请注意为什么它仍然显示大小为 1。

# ruby - 数组中每隔 2 项

> ID：13196372
> 
> 赞同：0
> 
> 时间：2012-11-02T13:39:00.470
> 
> 标签：ruby

我需要一个红宝石公式来创建一个整数数组。该数组必须是每隔 2 个数字，如下所示。

```
[2, 3, 6, 7, 10, 11, 14, 15, 18, 19...] 
```

我已经阅读了很多关于如何做其他数字或倍数的文章，但我不确定实现我需要的最佳方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:48:30.910

这是一种适用于任何阵列的方法。

```
def every_other_two arr
  arr.select.with_index do |_, idx|
    idx % 4 > 1
  end
end

every_other_two((0...20).to_a) # => [2, 3, 6, 7, 10, 11, 14, 15, 18, 19]

# it works on any array
every_other_two %w{one two three four five six} # => ["three", "four"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T13:50:27.233

```
array = []
#Change 100000 to whatever is your upper limit
100000.times do |i|
  array << i if i%4 > 1
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:46:26.340

此代码适用于任何开始编号到任何结束限制

```
i = 3
j = 19
x =[]
(i...j).each do |y|
  x << y if (y-i)%4<2
end
puts x 
```

这应该工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T14:12:25.153

为了好玩，使用惰性枚举（需要 Ruby 2.0 或 gem enumerable-lazy）：

```
(2..Float::INFINITY).step(4).lazy.map(&:to_i).flat_map { |x| [x, x+1] }.first(8)
#=> => [2, 3, 6, 7, 10, 11, 14, 15] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T14:10:29.463

这是一个适用于无限流的解决方案：

```
enum = Enumerator.new do |y| 
  (2...1/0.0).each_slice(4) do |slice| 
    slice[0 .. 1].each { |n| y.yield(n) }
  end
end

enum.first(10) #=> [2, 3, 6, 7, 10, 11, 14, 15, 18, 19]

enum.each do |n|
  puts n
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T14:19:01.263

单班轮：

```
(0..20).to_a.reduce([0,[]]){|(count,arr),ele| arr << ele if count%4 > 1;
                                                           [count+1,arr] }.last 
```

解释：

从 count,arr vars 中的 0,[] 开始减少外观

如果条件满足，则将当前元素添加到数组中。块为下一次迭代返回增量和 arr。

我同意虽然它不是一个单一的班轮，而且看起来有点复杂。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T20:28:32.030

这是塞尔吉奥的好答案的稍微更一般的版本

```
module Enumerable
  def every_other(slice=1)
    mod = slice*2
    res = select.with_index { |_, i| i % mod >= slice }
    block_given? ? res.map{|x| yield(x)} : res
  end
end

irb> (0...20).every_other
=> [1, 3, 5, 7, 9, 11, 13, 15, 17, 19]
irb> (0...20).every_other(2)
=> [2, 3, 6, 7, 10, 11, 14, 15, 18, 19]
irb> (0...20).every_other(3)
=> [3, 4, 5, 9, 10, 11, 15, 16, 17]
irb> (0...20).every_other(5) {|v| v*10 }
=> [50, 60, 70, 80, 90, 150, 160, 170, 180, 190] 
```

# list - 在递归中使用 Prolog 列表

> ID：13196375
> 
> 赞同：2
> 
> 时间：2012-11-02T13:39:24.180
> 
> 标签：list, recursion, path, prolog

所以我试图使用递归方法来找到两个人之间的路径。这是快速背景：我定义了一些事实`in(X,Y)`。那个节目谁是相关的，即。`in(person1,project1)`, , `in(person2,project1)`, 等等。现在任何两个人如果他们在同一个项目中，或者他们之间有一个人的链接路径，他们就是相关的。例如 p1 在 A 上工作 p2 在 A 和 B 上工作，p3 在 B 上工作，因此有一条从 p1 到 p3 通过 p2 的路径。这些路径可以是任意长度。

我正在尝试以递归方式解决这个问题（看不到任何其他方式），但是有一个烦人的问题：

```
related(A,B) :-
        in(A,X),
        in(B,X),
        not(A=B).

chain(A,B) :-
        related(A,B).
chain(A,B) :-
        related(A,Y),       
        chain(Y,B). 
```

问题是路径可以重演。它可以从 p1 到 p2 无限次返回 p1。一个人在路径上的次数不应超过 1 次。

我试图用我添加的列表来解决这个问题。如果某人已在列表中，则无法再次添加：

```
related(A,B,L) :-
        in(A,X),
        in(B,X),not(A=B).

chain(A,B,L) :-
        related(A,B,L).
chain(A,B,L) :-
        related(A,Y,L),
        not(member(Y,L)),
        append(L,[Y],Q),
        chain(Y,B,Q). 
```

它有点工作，但导致了大量随机错误，重复一些人多次，有些人只重复一次，然后失败。这种方法看起来对吗？我完全使用列表错误吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:40:06.023

第一次改进。您是在寻找所有关系链还是要检查是否存在一个关系链？在第一种情况下，添加一个切口。

```
chain(A,B) :-
        related(A,B), !.
chain(A,B) :-
        related(A,Y),       
        chain(Y,B). 
```

在第二种情况下，Prolog 完全按照它的要求去做，那就是找到所有可能的链。

请发布导致问题的查询，以便我们可以共同推理并改进解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:38:07.470

这是基于固定点计算的另一种方法，可能效率较低但相当通用。

```
connected(Found, Connected) :-
    collect(Found, [], Ext),
    (   Ext == Found
    ->  Connected = Found
    ;   connected(Ext, Connected)
    ).

collect([], Set, Set).
collect([E|Es], Set, Fix) :-
    extend(E, Set, Ext),
    collect(Es, Ext, Fix).

extend(E, Set, Ext) :-
    directly(E, DirectConn),
    ord_union(DirectConn, Set, Ext).

directly(A, DirectConn) :-
    setof(B, P^(in(A, P), in(B, P)), DirectConn). 
```

我们必须用一个排序列表调用 connected(Found, Connected) ，它会循环直到集合不能被扩展。例如，有了这个测试数据

```
in(anna,  project1).
in(bob,   project1).
in(bob,   project2).
in(chris, project2).
in(dan,   project3).

?- connected([bob],L).
L = [anna, bob, chris].

?- connected([dan],L).
L = [dan]. 
```

我故意允许直接/2 获得身份，即

```
?- directly(X,Y).
X = anna,
Y = [anna, bob] ;
...
X = dan,
Y = [dan]. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:39:03.973

我想我从来都不够清楚，但我最终自己解决了这个问题。我把代码放在下面。

真正重要的是一个有效的 notchain 谓词，然后确保我正确地执行了附加。我还创建了一个 notsame 谓词来替换 not(A=B)。代码如下。大多数答案是确保在列表中附加的内容周围有 []。在附加的内容周围没有正确的 [] 会导致错误。

> 非链（X，L）：-
> 
> 成员（X，L），！，失败。
> 
> 非链（X，L）。

进而：

> 链（A，B，L）：-
> 
> 相关（A，B），追加（L，[A]，Q），追加（Q，[B]，Z），写入（最终），writeln（Z）。
> 
> 链（A，B，L）：- notchain（A，L），附加（L，[A]，Q），相关（A，Y），链（Y，B，Q）。

这用于相关：

> 不一样（A，B）：-（
> A = B），！，失败。
> 
> 不相同（A，B）。

# .net - 为什么我的 Write-Verbose 消息没有出现？

> ID：13196376
> 
> 赞同：11
> 
> 时间：2012-11-02T13:39:28.643
> 
> 标签：.net, powershell, powershell-ise, verbose

我已将一些评论替换为：

```
Write-Verbose "Doing somthing..." 
```

我通过 PS ISE 运行我的脚本，例如：

```
.\FooScript.ps1 -verbose 
```

但是在输出窗口中，我看不到任何这些消息。

如何显示 write-Verbose 消息？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-02T13:42:52.543

您需要添加

```
[CmdletBinding()] 
```

在脚本的开头并使用

```
-verbose 
```

参数以查看详细消息。

阅读更多打字：

```
help about_functions_advanced 
```

# python - NameError：未定义全局名称“PIN”

> ID：13196379
> 
> 赞同：0
> 
> 时间：2012-11-02T13:39:41.357
> 
> 标签：python, global, nameerror

我收到以下错误消息：

```
Traceback (most recent call last):
 File "/Volumes/KINGSTON/Programming/Assignment.py", line 17, in <module>
    Assignment()
 File "/Volumes/KINGSTON/Programming/Assignment.py", line 3, in Assignment 
```

我的代码是：

```
def Assignment():
    prompt = 'What is your PIN?'
    result = PIN
    error = 'Incorrect, please try again'
    retries = 2
    while result == PIN:
        ok = raw_input(Prompt)
        if ok == 1234:
            result = menu
        else:
            print error
            retries = retries - 1

        if retries < 0:
            print 'You have used your maximum number of attempts. Goodbye.'

Assignment(): 
```

如果有人知道我哪里出错并且可以解释，我将非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:08:47.007

引发该特定错误是因为当您说`result = PIN`,`PIN`实际上并不存在。由于它不在引号中，Python 假定它是一个变量名，但是当它检查该变量等于什么时，它什么也没找到并引发`NameError`. 当您修复它时，它也会发生，`prompt`因为您稍后将其称为`Prompt`.

我不确定这是否是您的完整代码，所以我不确定其他问题可能是什么，但看起来您正在使用`result`并`PIN`控制您的`while`循环。请记住，`while`循环会一直运行，直到它检查的条件是`False`（或者如果您手动退出它），因此您可以从以下内容开始，而不是声明额外的变量：

```
def Assignment():
    # No need to declare the other variables as they are only used once
    tries = 2

    # Go until tries == 0
    while tries > 0:
        ok = raw_input('What is your PIN?')
        # Remember that the output of `raw_input` is a string, so either make your
        # comparison value a string or your raw_input an int (here, 1234 is a string)
        if ok == '1234':
            # Here is another spot where you may hit an error if menu doesn't exist
            result = menu
            # Assuming that you can exit now, you use break
            break
        else:
            print 'Incorrect, please try again'
            # Little shortcut - you can rewrite tries = tries - 1 like this
            tries -= 1

        # I'll leave this for you to sort out, but do you want to show them both
        # the 'Please try again' and the 'Maximum attempts' messages?
        if tries == 0:
            print 'You have used your maximum number of attempts. Goodbye.' 
```

# c - 如何在不更改其他位的情况下更改 32 位寄存器的特定位？

> ID：13196387
> 
> 赞同：6
> 
> 时间：2012-11-02T13:40:00.957
> 
> 标签：c, bit-manipulation

我想直接使用它的物理地址来操作寄存器的一些位。但是我找不到办法做到这一点。我看到了一些关于设置位掩码的帖子，但我觉得它们太混乱了。

我的寄存器物理地址是：`0x4A10005C`

我想操纵它在 1​​8-16 位之间的位。我想`0x3`在这些位中设置。

如果你们能提供答案或方法，我将非常高兴。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T13:42:09.090

您可以只定义一个指向寄存器的指针，然后使用正常的 C 位操作来操作各个位：

```
volatile uint32_t * const my_register = (uint32_t *) 0x4A10005C;
                              // set up a pointer to the register

uint32_t val = *my_register;  // read register

val &= ~(0x7 << 16);          // clear bits 16..18

val |= (0x3 << 16);           // set bits 16..18 to 0x03 (i.e. set bits 16 and 17)

*my_register = val;           // write register 
```

（以上假设您正在讨论寄存器中的三位，即第 16、17 和 18 位，并且您希望将第 18 位设置为零，将第 16 位和第 17 位设置为 1。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T14:04:39.227

位掩码很容易理解，所以让我们先来看看：

假设您的 32 位寄存器现在包含一些值，我将任意选择 0xF48C6219 [16]

我假设您知道如何将十六进制转换为二进制，如果不知道的话......让我们说使用计算器或谷歌（而不是深入了解其中的细节）。所以我们的十六进制值可以用二进制表示为：

```
+-- bit 31                            +-- bit 0
|                                     |
v                                     v 
1111 0100 1000 1100 0110 0010 0001 1001
                ^ ^                       
                | |
                +-+-- bits you want to set, 16-18 
```

布尔逻辑告诉我们：
1) 任何 OR'd ( `|`)`1`都会给你一个值`1`。或“设置”位。
2) 任何 AND'd ( `&`)`0`都会给你一个值`0`。或“清除”该位。

因此，如果我们想清除第 16-18 位，您可以使用如下掩码进行 AND 操作：

基数：1111 0100 1000 1100 0110 0010 0001 1001 [2] == 0xF48C6219 [16]
掩码数：1111 1111 1111 1000 1111 1111 1111 1111 [2] == 0xFFF8FFF [16]

```
 1111 0100 1000 1100 0110 0010 0001 1001
&  1111 1111 1111 1000 1111 1111 1111 1111
------------------------------------------
   1111 0100 1000 1000 0110 0010 0001 1001 
```

现在你可以用你想在那里设置的任何东西来或它：

新掩码号：0000 0000 0000 0011 0000 0000 0000 0000 [2] == 0x00030000 [16]

```
 1111 0100 1000 1000 0110 0010 0001 1001
| 0000 0000 0000 0011 0000 0000 0000 0000
-----------------------------------------
  1111 0100 1000 1011 0110 0010 0001 1001 
```

所以在代码中：

```
#define CLEAR_MASK 0x70000 //70000 is shorter to write, so just do this and flip it
#define SET_3_MASK 0x30000

volatile uint32_t * const reg = (uint32_t *) 0x4A10005C;//set a pointer to the register
*reg &= ~CLEAR_MASK; //~ filps the bits
*reg |= SET_3_MASK; 
```

您可以使用移位等技巧来做一些技巧，但这是位掩码的基础知识以及它们的工作原理。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:51:42.493

```
structure r32 {
unsigned int bit0  :1;
unsigned int bit1  :1;
unsigned int bit2  :1;
unsigned int bit3  :1;
unsigned int bit4  :1;
unsigned int bit5  :1;
.
.
.
unsigned int bit31 :1;
} 
```

在你的主要

```
structure r32 *p;
volatile uint32_t * const my_register = (uint32_t *) 0x4A10005C;

p = (structure r32 *) my_register; 
```

然后例如访问第 5 位

```
p->bit4 = 0; 
```

# facebook - Spotify 如何连接到 Facebook？

> ID：13196390
> 
> 赞同：1
> 
> 时间：2012-11-02T13:40:06.440
> 
> 标签：facebook, air

我有一个内置于 Adob​​e Air 的 iPad 应用程序，该应用程序目前需要用户注册和登录。

我希望用户使用他们的 Facebook 帐户登录，但这需要 Facebook 对话框出现在我的应用程序中，无论是在浏览器窗口中`StageWebView`还是在浏览器窗口中。

Windows PC 上的 Spotify 客户端不显示此对话框，您可以在普通文本框中输入您的 FB 凭据：

![在此处输入图像描述](../Images/ed8cc101e21416f9c6e0ef777cf9ccd0.png)

这就是我希望 iPad 应用程序的行为方式，因此我可以保留当前的登录表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:42:58.627

我很确定这是 Facebook 和 Spotify 之间特殊合作的结果。通常，作为安全预防措施，Facebook 不希望您在表单上收集用户密码。

# grails - 使用带有 Spring Security Core 插件的自定义单点登录身份验证服务

> ID：13196391
> 
> 赞同：5
> 
> 时间：2012-11-02T13:40:07.050
> 
> 标签：grails, spring-security

我正在开发 Grails 应用程序，并希望与自定义单点登录服务（不是 CAS，但类似）集成。我正在努力寻找我需要定制的所有部分来实现这一点。有人可以向我解释一下我需要使用什么来完成此任务吗？我已经阅读了有关插件的文档，但它假定我知道要覆盖哪些 bean 以及将所有需要的文件放在哪里。

我已经根据我在每一点下面的研究，引用了我认为需要做的事情。

**操作顺序**

**1-**用户请求安全内容（现在应用程序中的一切都是安全的）

> 我相信这个设置在 Config.groovy 文件中：

```
 grails.plugins.springsecurity.rejectIfNoRule = true
 grails.plugins.springsecurity.securityConfigType = "InterceptUrlMap"
 grails.plugins.springsecurity.interceptUrlMap = [
     '/**':['ROLE_ADMIN']
 ] 
```

**2-** Spring Security 检查用户是否在身份验证服务提供的 cookie 中设置了特定值

> 我猜我需要创建一个身份验证过滤器，但我不知道把它放在哪里或它应该是什么样子。

*   如果他们不这样做，用户将被重定向到此自定义 SSO 服务，他们登录，一旦通过身份验证，用户将被重定向回我的应用程序（使用新的 cookie 集）

**3-** Spring 安全检查 cookie 值并根据自定义服务验证它（通过 HTTP POST）

> 根据一些研究，我认为我需要使用 PreAuthenticatedProcessingFilter，但我还没有找到任何关于如何执行此操作的示例。

**4-**自定义服务返回一系列名称/值对，然后需要在本地应用程序数据库中创建一个用户（或者如果他们的用户数据已经在数据库中，则更新“lastLoggedIn”的时间戳）

> 我相信这是在与 3 号相同的 PreAuthenticatedProcessingFilter 或 GrailsUserDetailsS​​ervice 中完成的

**5-**用户的身份验证会在会话中缓存一段时间（6-8 小时），因此每次用户请求新资源时都不需要针对 SSO 服务进行重新验证。

> 我不确定这是否是固有的，或者我是否需要添加代码来执行此操作（并且还设置会话超时）

# iphone - 从底部加载 UITableView

> ID：13196393
> 
> 赞同：9
> 
> 时间：2012-11-02T13:40:17.333
> 
> 标签：iphone, ios, uitableview, ios5

我正在尝试使用`UITableView`. 为了始终滚动到底部，我使用了`scrollToRowAtIndexPath`when`viewDidLoad`和`viewDidAppear`. 这是因为在`viewDidLoad`调用该方法时，表格还没有完全加载，所以我需要在`viewDidAppear`. 这段代码成功了。但是，我想要的不是动画滚动（设置`animated`为`NO`不能解决此问题），我希望表格始终从底部显示，而不是加载表格然后转到最后一行。

这可能吗？我找不到任何完全符合所需行为的解决方案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-04-21T07:09:32.270

这是最好的解决方案！

只是扭转一切！

```
tableView.transform = CGAffineTransformMakeRotation(-M_PI);
cell.transform = CGAffineTransformMakeRotation(M_PI); 
```

斯威夫特 4.0：

```
tableView.transform = CGAffineTransform(rotationAngle: -CGFloat.pi)
cell.transform = CGAffineTransform(rotationAngle: CGFloat.pi) 
```

不过要小心，因为现在 headerView 和 footerView 的位置也颠倒了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-11T13:48:28.980

您可以避免来自 viewDidLoad 的调用，因为从 viewDidAppear 中滚动会使第一次调用变得多余。每次导航回视图时都会调用 viewDidAppear，但视图初始化时只会调用一次 viewDidLoad。

我同意先前的建议，即向用户隐藏滚动而不是更改 UITableView 加载数据的方式。我的建议是在 viewWillAppear 方法中使用 scrollToRowAtIndexPath 方法，并将动画设置为 NO。之后，如果您必须在表格对用户可见时添加新行，请使用 insertRowsAtIndexPaths:withRowAnimation: 在表格视图底部添加一行。请务必注意在数据模型的末尾添加数据，以便当用户离开并返回时，他/她会回到相同的布局。

希望这可以帮助。

编辑：刚刚看到您不接受先前答案的原因，并认为我会再详细说明一下。我提出的解决方案需要最少的努力，避免一次又一次地调用 reloadData ，从而避免一次又一次地调用 scrollToRowAtIndexPath 方法。您只需要在 viewWillAppear 中调用一次 scrollToRowAtIndexPath 即可滚动到表格视图的底部（这样做时向用户隐藏转换），您无需再次这样做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T13:54:03.190

我在自己构建的 RPN 计算器中做了类似的事情。我有一个包含所有数字的表格视图，当一个数字添加到堆栈中时，所有内容都会弹出一个单元格。当我加载视图时，我调用：

```
[self.myTableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:NumOfStackItems - 1 inSection:0]
                        atScrollPosition:UITableViewScrollPositionTop animated:NO]; 
```

在我看来会出现。这样，我的表格视图开始显示在堆栈的底部，并且看不到任何动画。通过将它放在 viewWillAppear 中，每次我导航到视图时，它都会显示在表格的底部。

当我将数字添加到堆栈中时，我只是将它添加到一个包含所有数字的数组中，然后将文本放在正确的行中，如下所示：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Cell initialization here...
    NSUInteger row_num = [indexPath row];
    cell.rowNumber.text = [NSString stringWithFormat:@"%g", [DataArray objectAtIndex:NumberOfStackItems-row_num-1];// subtract the row number off to get the correct array index
    return cell
} 
```

我还确保每当我用新值更新 tableview 时，我首先调用 reloadData 函数，然后调用上面引用的 scrollToRowAtIndexPath 函数，这样我就留在了表的底部。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T14:04:18.790

您可以将您的`UITableView`隐藏打开`viewDidLoad`，然后在`viewDidAppear`将表格滚动到底部后立即将其更改为可见。这样用户就不会看到滚动动画。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-13T10:28:45.177

解决方案是覆盖`viewWillAppear`并让它滚动（非动画）到底部：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self goToBottom];
}

-(void)goToBottom
{
    NSIndexPath *lastIndexPath = [self lastIndexPath];
    [self.tableView scrollToRowAtIndexPath:lastIndexPath atScrollPosition:UITableViewScrollPositionBottom animated:NO];
}

-(NSIndexPath *)lastIndexPath
{
    NSInteger lastSectionIndex = MAX(0, [self.tableView numberOfSections] - 1);
    NSInteger lastRowIndex = MAX(0, [self.tableView numberOfRowsInSection:lastSectionIndex] - 1);
    return [NSIndexPath indexPathForRow:lastRowIndex inSection:lastSectionIndex];
} 
```

通过执行此操作，`viewWillAppear`它将在用户看到表格之前完成。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-11T12:22:28.310

您可以通过制作一个不可见的页脚并在那里进行计算来修复它。加载页脚时， contentSize 会更新。为了让它滚动，我检查设置 tableview 的 contentOffset。

我已经注释掉了动画部分，因为你想要它没有，但它也有效。

```
-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
    return 1;
}

-(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    if( tableView.contentOffset.y != tableView.contentSize.height - tableView.frame.size.height && automaticScroll ){

        //[UIView animateWithDuration:0.0 animations:^{

            self.contentTableView.contentOffset = CGPointMake(0, tableView.contentSize.height - self.contentTableView.frame.size.height);

        //} completion:^(BOOL finished) {

            [tableView reloadData];

        //}];

        automaticScroll = NO;
    }

    UIView *emptyFooter = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 1)];
    emptyFooter.backgroundColor = [UIColor clearColor];
    return emptyFooter;
} 
```

我创建了一个 BOOL automaticScroll 来触发滚动到底部。这应该在 viewWillAppear 方法中设置，或者在您加载数据并重新加载 tableView 时设置。

如果要添加行，还需要设置 BOOL，如：

```
-(void)addItemButtonClicked:(id)sender
{
    automaticScroll = YES;
    //Add object to data
    [self.contentTableView reloadData];
} 
```

如果您需要更多帮助，请告诉我。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T14:24:11.153

```
scrollToRowAtIndexPath 
```

用于将 tableview 中的行滚动到特定位置

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-12T12:23:28.833

如果高度小于父视图，只需在加载数据后更改内容插入以移动表格视图的内容视图。

```
[self.tableView reloadData];         
[self.tableView setContentInset:UIEdgeInsetsMake(self.view.frame.size.height - self.tableView.contentSize.height < 0 ? 0 : self.view.frame.size.height - self.tableView.contentSize.height, 0, 0, 0)]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-18T14:50:39.877

**斯威夫特 3.1**

```
tableView.transform = CGAffineTransform(rotationAngle: CGFloat.pi)
cell.transform = CGAffineTransform(rotationAngle: CGFloat.pi) 
```

致谢：@Christos Hadjikyriacou

# regex - 具有特定开头和结尾的 url 的 GREP REGEX，其间有随机值

> ID：13196396
> 
> 赞同：2
> 
> 时间：2012-11-02T13:40:25.557
> 
> 标签：regex, grep, regex-negation

我在为我的`grep`命令编写正则表达式时遇到问题。我有一堆需要搜索以找到所有`youtube.com`链接的 html 页面。更重要的是，我只需要那些不以`rel=0`.

例如：

```
http://www.youtube.com/(something)_rel=0    [i have a regex for this]

http://www.youtube.com/(something)          [i need this one] 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:45:55.507

使用这个 grep：

```
grep -i "youtube\." infile | grep -iv "rel=0$" 
```

# apache - 如何将 %3f 重新写入？在阿帕奇

> ID：13196398
> 
> 赞同：1
> 
> 时间：2012-11-02T13:40:32.093
> 
> 标签：apache, mod-rewrite

我们的大部分页面都是通过查询字符串访问的，所以我们的 URL 如下所示：

[http://www.example.com/?var=val&var2=val2](http://www.example.com/?var=val&var2=val2)

我发现在网络上的某个地方，有人通过以下链接链接回我们：

[http://www.example.com/%3Fvar%3Dval%26var2%3Dval2](http://www.example.com/%3Fvar%3Dval%26var2%3Dval2)

我发现一大块[代码](http://www.webmasterworld.com/apache/4138119.htm)要添加到我的 .htaccess 文件中，但它确实减慢了我的页面请求。我想要的是在文件名的开头捕获那个“％”并将其重定向到一个 php 文件，我可以将它解析为查询字符串并 301 重定向它。

我有一种感觉，如果我知道我在做什么，这实际上将是一件非常容易的事情。假设我的 php 文件将被称为 percent_fix.php

（我确信我可以编写 php，我只需要 .htaccess 重写条件和规则方面的帮助。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-15T15:46:27.897

尝试为您的链接提供默认页面。例如 index.php

然后添加到您的 .htaccess

```
# for %3f ...
RewriteRule ^/index.php\?(.*)$ /index.php?$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T13:57:27.850

您几乎肯定会收到 403 错误。错误是因为 ? 是 Windows 和 Linux 上禁止的文件/目录名称字符。这意味着当 Apache 尝试查找名为“/document/root/index.php?blah”的文件或目录时（解码后）并导致 403 错误。这是在读取 .htaccess 文件之前，因此您不能在 .htaccess 文件中使用 mod_rewrite 来覆盖此 403 错误或在 .htaccess 文件中定义的 ErrorDocument 来捕获此错误。

**捕获 %3f 的唯一方法是在“VirtualHost”中使用 mod_rewrite 或 ErrorDocument，**例如在 httpd-vhosts.conf 中（或者如果在 httpd.conf 中没有任何“Virtualhost”，则使用主服务器配置）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T13:54:50.730

在您的 .htaccess 文件中尝试以下操作：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php$1 [L,NC] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T17:01:34.530

我回到问题中包含的链接，并意识到该线程顶部附近的简单案例实际上可以满足我的需要。以下是对我真正有用的：

```
#in .htaccess
RewriteEngine on

# If an encoded "?" is present in the requested URI, and no unencoded "?" is
# present, then externally redirect to replace the encoded "?" character.
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^?\ ]+)\ HTTP/
RewriteCond %1 ^(([^%]*(\%(25)*([^3].|.[^F]))*)*)\%(25)*3F(.*)$ [NC]
RewriteRule ^. http://www.example.com/percent_fix.php?%7 [NE,R=301,L] 
```

然后在 percent_fix.php

```
<?php
if($_SERVER['QUERY_STRING'])
  {
    $new_query=urldecode($_SERVER['QUERY_STRING']);
    header('HTTP/1.1 301 Moved Permanently');
    header('Location: http://www.example.com/?'.$new_query);
    die();
  }
else
  {
    header('HTTP/1.x 404 Not Found');
    //readfile("http://www.example.com/?page=404_error");
    die();
  }
?> 
```

# xcode - xcode iOS6 方向横向

> ID：13196402
> 
> 赞同：1
> 
> 时间：2012-11-02T13:40:48.287
> 
> 标签：xcode, cordova, ios6, orientation

我看到很多关于这个主题的问题，但我无法找到解决我遇到的问题的方法。我创建了一个 iPad 应用程序，它应该是横向的——它在 iOS6 之前的任何操作系统上运行时都能正常工作，但在 iOS6 上，应用程序以纵向视图打开。此屏幕截图显示了我的意思（对不起，不是一个很好的解释）[http://s1342.beta.photobucket.com/user/designbyria/media/ScreenShot2012-11-02at122113.png.html](http://s1342.beta.photobucket.com/user/designedbyria/media/ScreenShot2012-11-02at122113.png.html)

我猜问题出在下面的代码中，但我不能确定。我已将支持的界面方向设置为仅横向左和横向右 - 但这不起作用。我也看了一下这里的问题，但没有运气..

我正在使用 xcode 和 cordova/phonegap

[iOS 6.0 中的界面方向](https://stackoverflow.com/questions/12404556/interface-orientation-in-ios-6-0)

[在 xcode 4.5 GM IOS 6 中将方向设置为横向模式](https://stackoverflow.com/questions/12600082/set-orientation-to-landscape-mode-in-xcode-4-5-gm-ios-6)

[iOS 6 应用程序 - 如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/ios-6-apps-how-to-deal-with-iphone-5-screen-size/12397738#12397738)

提前致谢！

> > /** * 这是应用程序启动后的主要启动，此处设置视图和设置。（首选 - iOS4 及更高版本） */ - (BOOL) application:(UIApplication* )application didFinishLaunchingWithOptions: (NSDictionary*)launchOptions {
> > NSURL* url = [launchOptions objectForKey:UIApplicationLaunchOptionsURLKey]; NSString* 调用字符串 = nil;
> 
> ```
> if (url && [url isKindOfClass:[NSURL class]]) {
>     invokeString = [url absoluteString];      NSLog(@"iwill launchOptions = %@", url);
> }    
> 
> CGRect screenBounds = [[UIScreen mainScreen] bounds];
> self.window = [[[UIWindow alloc] initWithFrame:screenBounds] autorelease];
> self.window.autoresizesSubviews = YES;
> 
> CGRect viewBounds = [[UIScreen mainScreen] applicationFrame];
> 
> self.viewController = [[[MainViewController alloc] init] autorelease];
> self.viewController.useSplashScreen = YES;
> self.viewController.wwwFolderName = @"www";
> self.viewController.startPage = @"index.html";
> self.viewController.invokeString = invokeString;
> self.viewController.view.frame = viewBounds;
> 
> // check whether the current orientation is supported: if it is, keep it, rather than forcing a rotation
> BOOL forceStartupRotation = YES;
> UIDeviceOrientation curDevOrientation = [[UIDevice currentDevice] orientation];
> 
> if (UIDeviceOrientationUnknown == UIInterfaceOrientationLandscapeLeft) {
>     // UIDevice isn't firing orientation notifications yet… go look at the status bar
>     curDevOrientation = (UIDeviceOrientation)[[UIApplication sharedApplication] statusBarOrientation];
> }
> 
> if (UIDeviceOrientationIsValidInterfaceOrientation(curDevOrientation)) {
>     for (NSNumber *orient in self.viewController.supportedOrientations) {
>         if ([orient intValue] == curDevOrientation) {
>             forceStartupRotation = YES;
>             break;
>         }
>     }
> } 
> 
> if (forceStartupRotation) {
>     NSLog(@"supportedOrientations: %@", self.viewController.supportedOrientations);
>     // The first item in the supportedOrientations array is the start orientation (guaranteed to be at least Portrait)
>     UIInterfaceOrientation newOrient = [[self.viewController.supportedOrientations objectAtIndex:0] 
> ```
> 
> 整数值]；NSLog(@"AppDelegate 强制状态栏到: %d from: %d", newOrient, curDevOrientation); [[UIApplication sharedApplication] setStatusBarOrientation:newOrient];
> 
> ```
> }
> 
> [self.window addSubview:self.viewController.view];
> [self.window makeKeyAndVisible];
> 
> return YES; } 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T09:17:37.130

我有同样的问题（但没有使用cordova/phonegap）。

您必须在 appDelegate 中将视图控制器设置为 RootViewController，而不仅仅是添加为子视图。

在你的 appdelegate 中替换：

```
[self.window addSubview:self.viewController.view];
[self.window makeKeyAndVisible]; 
```

经过

```
[self.window setRootViewController:self.viewController];
[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T05:56:20.060

您可以使用委托

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation

{
  return UIInterfaceOrientationLandscapeLeft;

} 
```

使用此委托，应用程序将以横向模式或任何所需的方向模式呈现。

试试看。

# java - JPA 条件 API：如何使用 IN 关键字并查询另一个谓词的结果？

> ID：13196403
> 
> 赞同：0
> 
> 时间：2012-11-02T13:40:49.437
> 
> 标签：java, jpa-2.0, criteria-api

抱歉标题不好，我真的不知道如何更好地表达它：

我有以下表结构：

```
Table A --> Table B  <-- Table C (proceeds) --> Table D(prcoeeding_status)
--------    --------     -------                -------
 aID         bID           cID                   dID
 ...         ....          created             textValue
 f_bID       ....          f_bID       
                           f_dID 
```

意思是A和C有一个外键指向B，C也有一个外键指向D

我有一个这样的谓词（根是表 A）：

```
constraintCondition = (TableA.join("Table B key")
                        .joinList("Table C Key")
                        .join("Table D Key").get("value from table D"))
                        .in(someValues); 
```

这工作正常，并给了我预期的结果。现在我需要添加另一个约束，只选择表 C 中日期条目（即“创建”）位于 Startdate 和 Enddate 之间的条目。我如何将另一个谓词链接到这个谓词，或者我需要如何修改这个谓词，以便获得预期的效果？

编辑：

我在这里得到了这个问题的答案：[JPA 2 标准 API：如何在不使用元模型的情况下从各种连接表中选择值？](https://stackoverflow.com/questions/13270857/jpa-2-criteria-api-how-to-select-values-from-various-joined-tables-without-usin)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:27:20.110

请看这里，这是同样的问题，更好地描述和回答：

[JPA 2 标准 API：如何在不使用元模型的情况下从各种连接表中选择值？](https://stackoverflow.com/questions/13270857/jpa-2-criteria-api-how-to-select-values-from-various-joined-tables-without-usin)

# junit - 在所有@Before 发生之后如何运行某些东西？

> ID：13196405
> 
> 赞同：2
> 
> 时间：2012-11-02T13:41:02.367
> 
> 标签：junit

我们在整个层次结构中使用@Before 来在测试执行之前将一些测试数据插入到数据库中。我想在 @Test 开始运行之前将所有数据提交到数据库。

一种方法是将数据作为此测试类的@Before 方法的最后一步提交。但是我们有数百个这样的类，并且不想进入并修改所有这些。

我玩过 ExternalResource @Rule 和 TestWatcher @Rule ......但在所有 @Before 发生后，他们没有办法参与进来。

我想我需要考虑构建一个自定义的 TestRunner 来做到这一点。

那是正确的轨道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:41:43.193

你在找什么，对我来说似乎不一致。设置一些数据并提交它们是非常接近的操作，不应该属于不同的地方。相反，我宁愿将它们放入一个函数中，并在实际参数设置为您要插入的值的情况下调用它。或者使用 SQL 字符串作为实际参数。并从@Before 调用这个函数

如果你坚持，那么做是没有问题的。为您的 Junit 类创建后代类：

```
package ...;
import org.junit.Before;
public class NewAndBetterYourTest1 extends YourTest1 {
    @Override
    @Before
    public void setUp() {
        super.setUp(); // this is where you are setting everything.
        makeCommits();
    }
} 
```

只是不要忘记启动这些新测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:37:37.403

虽然如果没有自定义 Runner，您无法完全满足您的要求，但您可以确保在`@Before`方法中创建的所有数据都使用规则提交：

```
public class LocalDatabase extends ExternalResource {
  private DataSource dataSource;

  @Override
  protected void before() {
    dataSource = createLocalDatabase();
  }

  @Override
  protected void after() {
    try {
      destoyLocalDatabase(dataSource);
    } finally {
      dataSource = null;
    }
  }

  public void run(Callback callback) {
    if (dataSource == null) {
      throw new IllegalStateException("No DataSource");
    }
    Collection con = null;
    try {
      con = ds.getConnection(DB_USERNAME, PASSWORD);
      callback.execute(con);
      con.commit();
    } finally {
      if (con != null) con.close();
    }
  } 
```

您可以将其作为基类中的规则：

```
public DatabaseTest {
  @Rule
  public LocalDatabase final localDatabase = new LocalDatabase();
} 
```

并且可以`@Before`在任何子类的方法中使用它

```
public UserDaoTest extends DatabaseTest {

  @Before
  public void populateInitialData() {
    localDatabase.run(new Callback() {
      @Override
      public void execute(Connection con) {
        ...
      }
    });
  }
  ...
} 
```

# c# - asp.net 中的 Web HttpRequest 方法

> ID：13196406
> 
> 赞同：0
> 
> 时间：2012-11-02T13:41:12.337
> 
> 标签：c#, json, web-services, json.net

**我的 C# 类**

```
public class City
{
    public int City_id { get; set; }  
    public string City_name { get; set; }
}

public class Model
{
    public City[] lstCitiesResult { get; set; }
} 
```

**网络请求**

```
string url = "my url";          
WebRequest request = WebRequest.Create(url);

// provide your ID And Password for proxy
request.Proxy.Credentials = new NetworkCredential(XXXX);

WebResponse ws = request.GetResponse();

DataContractJsonSerializer jsonSerializer =
               new DataContractJsonSerializer(typeof(List<Model>));

List<Model> dataList =
 (List<Model>)jsonSerializer.ReadObject(ws.GetResponseStream());

string result = "";

foreach (var data1 in dataList)
{
    result = result + data1.lstCitiesResult.ToString();
}

TextBox1.Text = result.ToString(); 
```

我的错误：我在 datalist 中得到了 null ......我该怎么办？

# html - 为什么我必须使用相同 css 的前缀来处理不同的浏览器？

> ID：13196411
> 
> 赞同：6
> 
> 时间：2012-11-02T13:41:31.073
> 
> 标签：html, css

我很好奇，为什么有些浏览器需要特殊的邀请才能使用相同的 css 布局命令。任何人都可以启发我吗？

示例：CSS-formatting: box-sizing:border-box; （请考虑我盒子的边框尺寸！）

现在来了 Firefox 和 safari，他们需要一个特别的邀请：

```
-moz-box-sizing: border-box;
-webkit-box-sizing: border-box; 
```

对于像我这样简单的猫来说，这似乎是在说：

1.  浏览器：我给你的尺寸是我盒子的边框！
2.  firefox：这对你也很重要。
3.  Safari：它也适合你。

我的意思是……为什么？这是完全相同的语法！为什么我必须将相同的内容告诉特定的浏览器？我会理解他们是否需要不同的语法..但完全相同？！他们喜欢听到别人叫他们的名字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:45:16.647

这是不同浏览器引擎支持不同事物的结果。这些指令只是旨在告诉浏览器的渲染引擎您正在寻找使用仍在开发/测试中或在 CSS 规范中不标准的功能。请注意，并非所有浏览器都使用不同的渲染引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:44:35.397

因为这些属性没有被 W3C 标准化，它们仍处于草案阶段，因此供应商实现了自己的版本 - 使用前缀以避免与其他浏览器实现或规范最终确定后的最终实现发生冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:57:14.507

对上述答案的补充。列出所有属性时，最后列出标准属性，如下所示：

```
-moz-border-radius: 10px 5px;
-webkit-boder-radius: 10px 5px;
border-radius: 10px 5px; 
```

如果你这样做，旧的 Firefox 将使用第一条规则而忽略其他规则，因为它不理解它们，旧的 Safari 也是如此。

当您首先列出标准属性时，最新版本的浏览器会出现问题，这些版本支持`border-radius`不带前缀：

```
border-radius: 10px 5px; 
-moz-border-radius: 10px 5px;
-webkit-boder-radius: 10px 5px; 
```

当您在 Safari 中浏览此站点时，它将首先使用标准属性，然后用该`-webkit-`属性覆盖它。问题在于两种实现的规范不同。*标准属性*使左上角和右下角圆角为 30 像素，右上角和左下角圆角为10像素。

另一方面，*-webkit-* prefixed 属性使所有角都相同：大小为 30x10px 的省略号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:45:26.653

我相信，起初每个浏览器制造商都认为 css 样式是个好主意，但没有标准。每个浏览器制造商都以自己的方式添加了带有前缀的 css 样式。最终，这些样式中的大多数都成为了 CSS3 标准（通常基于浏览器制造商已经在做的事情），但由于旧版浏览器不支持 CSS3 标准（仅支持带有前缀的标准），我们仍然可以放置每个浏览器的语法/字首。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T13:46:07.053

这意味着此功能仍在开发中，可能不支持标准规定的所有功能

# cocoa - Cocoa 中的可拖动 NSTextField

> ID：13196416
> 
> 赞同：0
> 
> 时间：2012-11-02T13:41:52.070
> 
> 标签：cocoa, nstextfield

我正在开发一个打印发票的应用程序。我编写以下代码使 NSTextFields 可拖动并与发票字段匹配。它可以工作，但是当调整窗口大小时，NSTextField 返回到初始位置。我能做些什么？

```
@interface DragTextField : NSTextField <NSWindowDelegate>
@property (readwrite) NSPoint location;
@end

@implementation DragTextField
@synthesize location;

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
    }

    return self;
}

- (void)drawRect:(NSRect)dirtyRect
{
    [super drawRect:dirtyRect];

}

- (BOOL) acceptsFirstMouse:(NSEvent *)theEvent
{
    return YES;
}

- (void)mouseDown:(NSEvent *)theEvent
{
    location = [theEvent locationInWindow];
    self.location = [[self superview] convertPoint:[theEvent locationInWindow] fromView:nil];
}

- (void)mouseDragged:(NSEvent *)theEvent
{

    NSPoint newDragLocation = [[self superview] convertPoint:[theEvent locationInWindow] fromView:nil];
    NSPoint thisOrigin = [self frame].origin;
    thisOrigin.x += (-self.location.x + newDragLocation.x);
    thisOrigin.y += (-self.location.y + newDragLocation.y);
    [self setFrameOrigin:thisOrigin];
    self.location = newDragLocation;
}

- (void)mouseUp:(NSEvent *)theEvent {

    [self setNeedsDisplay:YES];
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-02T13:53:00.703

每当使用委托函数调整窗口大小时，您都必须重新定位文本字段。

```
- (void)windowDidResize:(NSNotification *)notification{ 
//Change the position of your textfield depending on the window size
} 
```

# python - wxPython FileDialog 通配符包含目录？

> ID：13196423
> 
> 赞同：1
> 
> 时间：2012-11-02T13:42:07.397
> 
> 标签：python, wxpython, wildcard, filedialog

我有一个`wx.FileDialog()`当前接受 .zip、.litemod 和 .jar ( `*.zip;*.litemod;*.jar`) 的文件。我怎样才能将其更改为也接受目录？我通常会认为`*.zip;*.litemod;*.jar;*`，但这只会允许所有文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:49:58.733

您的意思是您希望能够从中选择文件*或*目录*？*`FileDialog`我怀疑这是可能的（至少在文档中找不到关于这种可能性的任何信息）。如果可能的话，对话框应该如何确定双击目录时是要选择还是只进入目录？

有允许选择目录的特殊对话框类型：[DirDialog](http://docs.wxwidgets.org/2.8.4/wx_wxdirdialog.html#wxdirdialog)。但是，它不允许选择文件。

更新：

请看[这个线程](http://wxpython-users.1045709.n5.nabble.com/wx-FileDialog-to-open-folder-or-wx-DirDialog-to-open-file-td2365839.html)。正如其中一位用户所写：

> 如果你想要一个文件然后使用 wx.FileDialog。如果你想要一个文件夹然后使用 wx.DirDialog。这就是为什么有两个不同的类。如果您必须能够从同一个对话框中进行选择，那么您需要创建自己的对话框。

但最后一个答案显示了自定义对话框的简单实现。也许它会对你有所帮助。

# php - 未从linkedin api返回主地址

> ID：13196426
> 
> 赞同：0
> 
> 时间：2012-11-02T13:42:09.510
> 
> 标签：php, javascript, linkedin

我正在使用 javascript api 从linkedin 获取配置文件信息。为此，传递的网址是 -

```
https://api.linkedin.com/v1/people::(~):(id,first-name,last-name,picture-url,main-address,headline,industry,summary,location,positions) 
```

我从这个 api 获取所有字段，除了主地址。当我在控制台中看到响应时，它没有显示 mainAddress 字段。该linkedin个人资料有一个地址。

除了主地址，还需要其他字段吗？

任何帮助表示赞赏！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:06:56.757

如果您需要经过身份验证的 LinkedIn 用户的主要地址，请查看“r_emailaddress”范围权限。

# asp.net - 在asp.net的下拉列表中选择一个值，vb.net是代码隐藏

> ID：13196431
> 
> 赞同：1
> 
> 时间：2012-11-02T13:42:33.807
> 
> 标签：asp.net

我在 page_load 中有一个下拉列表填充其中的值列表。

我想选择一个特定的值

```
Me.DropDownList_LocalOfficeAssignment.SelectedValue = ct.LocalOfficeName
Me.DropDownList_LocalOfficeAssignment has list of values. 
```

问题是：它总是指向第一项。

我试过这个

```
For Each item As ListItem In Me.DropDownList_LocalOfficeAssignment.Items
    If item.Equals(ct.LocalOfficeName) Then
        item.Selected = True
        Exit For
    End If
Next
DV.Dispose() 
```

仍然指向第一项。我调试过，它应该指向最后一项。ct.localoffice 包含列表中的最后一项。这就是我填充下拉列表的方式：

```
Dim DV As DataView = New DataView(CacheVariable.States.Tables(0))
Dim DRV As DataRowView
Me.DropDownList_LocalOfficeAssignment.Items.Clear()
DV = New DataView(CacheVariable.LocalOffice.Tables(0))
If DV.Count > 0 Then
    For Each DRV In DV
        Me.DropDownList_LocalOfficeAssignment.Items.Add(New ListItem(DRV("Name"), DRV("LocalOfficeID").ToString))
    Next
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:09:33.473

这通常是因为`DropDownList`在`DataBind()`您设置`SelectedValue`. 你有`DropDownList.DataSourceID`属性设置吗？您是`DataBind()`在页面生命周期的后期调用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:33:09.813

基于对该问题的冗长评论......

当您尝试设置`SelectedValue`. 看看你是如何创建你`ListItem`的 s 的：

```
Me.DropDownList_LocalOfficeAssignment.Items.Add(New ListItem(DRV("Name"), DRV("LocalOfficeID").ToString)) 
```

创建 时[，`ListItem`](http://msdn.microsoft.com/en-us/library/7f7h2h8h.aspx)您将其*显示文本*和*基础值*都传递给它。在这种情况下，您将它们设置为：

*   显示文本 =`DRV("Name")`
*   基础价值 =`DRV("LocalOfficeID")`

根据您的评论，示例数据如下所示：

```
LocalOfficeID | Name
--------------------
1             | abc
2             | def
3             | xyz 
```

然后，当您尝试手动设置 时`SelectedValue`，您传递的值是错误的。您实际上是在尝试这样做：

```
DropDownList_LocalOfficeAssignment.SelectedValue = "xyz" 
```

s`Value`上的所有属性都不是。它们是、和。为了设置，你需要这个：`ListItem``"xyz"``"1"``"2"``"3"``SelectedValue`

```
DropDownList_LocalOfficeAssignment.SelectedValue = "3" 
```

所以这条线需要改变：

```
Me.DropDownList_LocalOfficeAssignment.SelectedValue = ct.LocalOfficeName 
```

在您的`ct`对象上，您需要获取对象的*标识符*，而不是它的*显示名称*。可能是这样的（虽然不知道是什么`ct`我不能确定）：

```
DropDownList_LocalOfficeAssignment.SelectedValue = ct.ID 
```

如果您没有标识符，则可以`DropDownList`通过搜索显示名称在 上找到它。这样的事情应该可以工作，尽管可能有一种更优雅的方式来做到这一点：

```
DropDownList_LocalOfficeAssignment.SelectedIndex = DropDownList_LocalOfficeAssignment.Items.IndexOf(DropDownList_LocalOfficeAssignment.Items.FindByText(ct.LocalOfficeName)) 
```

不过，使用标识符会*更*干净。

# asp.net - 如何按键对查询字符串进行排序？

> ID：13196432
> 
> 赞同：1
> 
> 时间：2012-11-02T13:42:42.967
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing, query-string

我正在使用 ASP.NET MVC4。如何对浏览器中显示的查询字符串进行排序？

而不是：`...?c=1&b=1&a=1`
我想要：       `...?a=1&b=1&c=1`

如果查询字符串基于我创建的链接，那么我可以通过对`RouteValueDictionary`. 但是如果查询字符串来自提交的表单，那么我注意到它的排序是基于表单`<input>`和`<select>`字段的顺序。由于标记经常更改，因此我不想以这种方式手动对其进行排序。

所以我希望我能对`RouteValueDictionary`这些路线的来源进行排序。但我不知道怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:58:36.017

如果查询字符串是根据输入/元素在表单中出现的顺序生成的，而不是捏造表单以使事物按照您想要的顺序“出现”，同时在标记中保持它们的字母顺序，您可以在客户端自己捕获提交，剥离表单并重定向到自己设置查询字符串的 url。但这对我来说似乎完全疯狂，最好找到其他方法来检查错误而不是拖网 qs，也许只是在调试时在页面顶部添加按字母顺序排列的 qs 转储

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:48:15.613

似乎这在 MVC4 中是不可能的。

# javascript - 出现错误：jshint 中未转义的“-”

> ID：13196436
> 
> 赞同：-4
> 
> 时间：2012-11-02T13:42:55.397
> 
> 标签：javascript

`var string = (/[^\u0041-\u005A\u0061-\u007A\u00C0-\u00F6\u00F8-\u00FF-\s]/gi);`

未转义的“-”。

请尝试解决此错误。

问候，

TEjas Savaliya

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:44:50.110

```
var string = (/[^\u0041-\u005A\u0061-\u007A\u00C0-\u00F6\u00F8-\u00FF\-\s]/gi); 
```

`\s`是一组字符，所以你不能对它做一个范围，这意味着`-\s`没有意义，因此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:45:49.420

这只是一个提示。可能你想要那个连字符。然而最后一个，在“范围”`-\s`中，它似乎是无效的。你确定你不想省略它，而只是匹配`\s`？如果没有，最好用反斜杠转义它，因为它位于字符类的中间。

# powershell - 使用 powershell 搜索和替换注册表项值

> ID：13196440
> 
> 赞同：3
> 
> 时间：2012-11-02T13:43:01.780
> 
> 标签：powershell, registry, replace

我正在尝试更新一组注册表项，一组属性需要使用基于旧值的新值进行更新。

我尝试使用以下内容：

```
 Get-ItemProperty -Path HKCU:\Software\xxxxx\*.mydomain.com Uri 
      | set-itemproperty -Path { $_.PSPath } Uri -Value { $_.Value -Replace ".mydomain.com/", ".mynewdomain.com/" } 
```

但这会将 uri 属性的值设置为：`{ $_.Value -Replace ".mydomain.com/", ".mynewdomain.com/" }`

我试过：

```
 Get-ItemProperty -Path HKCU:\Software\xxxxx\*.mydomain.com Uri 
      | set-itemproperty -Path { $_.PSPath } Uri -Value ${ $_.Value -Replace ".mydomain.com/", ".mynewdomain.com/" } 
```

和

```
 Get-ItemProperty -Path HKCU:\Software\xxxxx\*.mydomain.com Uri 
      | set-itemproperty -Path { $_.PSPath } Uri -Value ( $_.Value -Replace ".mydomain.com/", ".mynewdomain.com/" ) 
```

但这清除了价值。

我想用尽可能少的行更新多个键中的多个注册表值。我已经通过导出注册表，使用记事本搜索和替换，然后重新导入注册表项来让它工作，但这感觉像是作弊。我真的很想知道如何使用 Powershell 来实现这一点。

我尝试过的其他事情：`$(...)`，，`(...)`省略了`-Value`您命名的选项：S。

我尝试用 and 替换`$_.Value`，`$_.Uri`也`$_`没有用。

该问题现已解决，该答案用于指导[如何为新的 Team Foundation Services 更新 TFS 项目集合设置](http://blog.jessehouwing.nl/2012/11/updating-your-team-foundation-service.html)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:31:10.507

```
Get-ItemProperty -Path HKCU:\Software\xxxxx\*.mydomain.com Uri | %{set-itemproperty -Path $_.PSPath Uri -Value ( $_.Uri -Replace ".mydomain.com/", ".mynewdomain.com/" )} 
```

# java - 自学专业java技能

> ID：13196441
> 
> 赞同：0
> 
> 时间：2012-11-02T13:43:10.710
> 
> 标签：java, database, spring, hibernate, gwt

我已经用 java 编程有一段时间了，我真的很喜欢这种语言，我大部分时间都只是做游戏编程，但我想了解一些更常用的 api 和框架，并且通常会更好- 全面掌握当前就业市场中的语言和常用库。

从我发现像 spring、hibernate 和 GWT 这样的东西现在很受欢迎。我在网上查看了一些教程，它们并不难理解，但我真的觉得我对所学的内容没有背景——我不知道如何在真实的工作环境中使用它。我知道没有什么能与我从实际工作经验中获得的好处相提并论，但这对我来说现在不是一个选择，我需要另一种方式来学习这些技术，至少让我感到与他们一起工作很舒服并知道什么我所做的不仅仅是理解什么代码做什么。我检查了几本书，但它们都很旧（比如 2006 年之前，我可以假设这些书今天已经过时了吗？）或者需要我没有也不能拥有的图书馆经验得到。

我真正想要的是有人向我指出一个针对已经有经验的 Java 开发人员的资源（网站或电子书），并且不仅会教我一些有趣有用的 Java 技术（任何有用的东西，我对图形库之外的了解不多和游戏相关的东西，所以我在考虑一些数据库或网络编程 api），但也给了我一个很好的视角，让我有信心，我可以在实际应用程序中实际使用我学到的东西。

如果我的帖子让您认为我还没有经验学习这些东西，我今天早些时候对此表示怀疑，但现在开始质疑，那么您认为我的下一步是什么？我只是想在java方面做得更好。

感谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:48:49.270

最好的学习方式是边做边学。所以我建议你要么开始一个使用你想学习的技术的私人项目，要么找到一个使用它们并为此做出贡献的开源项目。后一种选择的优点是您可以从其他程序员那里获得反馈，但缺点是它留下的实验空间较小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:47:18.643

在 www.javapassion.com 注册在线课程。他们提供的内容和质量很便宜。

# events - 事件 api 是否公开了用户邀请参加该事件的 fbid？

> ID：13196442
> 
> 赞同：1
> 
> 时间：2012-11-02T13:43:10.597
> 
> 标签：events, facebook-graph-api

我有兴趣衡量一个 facebook 用户邀请了多少其他 fb 朋友参加给定的活动。理想情况下，用户邀请了哪些特定用户参加活动以及用户数量。

相关，我也有兴趣测量用户邀请到 Facebook 粉丝页面的 Facebook 用户数量/哪些用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:46:46.007

[Graph API Event 对象](https://developers.facebook.com/docs/reference/api/event/)包含一个字段，该`owner`字段标识创建每个事件的配置文件的用户 ID。

该[事件对象上的 /invited 端点](https://developers.facebook.com/docs/reference/api/event/#invited)包含受邀参加该特定事件的用户列表。

[Graph API User 对象](https://developers.facebook.com/docs/reference/api/user/#events)有一个 /events 端点，可让您查看用户正在参加的事件列表。用户总是参加他们创建的活动。

如果你把这三件事放在一起，你就可以做你想做的:)

# mysql - MySQL：使用解释时扫描的总行数

> ID：13196443
> 
> 赞同：0
> 
> 时间：2012-11-02T13:43:10.980
> 
> 标签：mysql

我想知道如何计算在 MySQL 中使用 Explain 时扫描的总行数。我找不到任何官方提到的地方。我发现了一个示例，但我不明白为什么它对 UNION 查询使用乘法。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-02T13:47:18.733

您可以只执行查询，然后使用类似函数`mysql_num_rows($queryResource)`或来自 DB 类（如 PDO 或 mysqli）的任何等效函数来确定`EXPLAIN`查询返回的行数。

例如（使用原生的、旧的 PHP 函数，但你会明白的）：

```
$rQuery = mysql_query('EXPLAIN SELECT table1.*, table2.some_field FROM table1 LEFT JOIN table2 ON table1.id = table2.fk_table1id');
$iNumRows = mysql_num_rows($rQuery);
echo $iNumRows; # will output 2 
```

# vba - 用于粘贴行的列属性

> ID：13196446
> 
> 赞同：0
> 
> 时间：2012-11-02T13:43:23.047
> 
> 标签：vba, excel

您好，我有用于复制特定行并将其粘贴到代码所在的特定列的代码

```
 Range(rng, rng.End(xlToRight)).copy
 Columns(c).Offset(, 6).PasteSpecial Transpose:=True 
```

它工作正常但是当我想从特定列的 2 个单元格开始粘贴它时，即

```
 Range(rng, rng.End(xlToRight)).copy
 Columns(c).Offset(2, 6).PasteSpecial Transpose:=True 
```

它给出“对象定义错误”

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:47:23.630

这应该有效：

```
Cells(2, Cells(1,Columns(c).Column).offset(,6).Column).PasteSpecial Transpose:=True 
```

在上面的 ling 中，您选择第 2 行`Cells(2,`和第 6 列到 c 的右侧`Columns(c).Column).Offset(,6).Column)`

`Columns(c).Offset(2,6)`不起作用的原因是因为您告诉 excel 偏移`Entire Column`2 行，但您不能这样做，因为它会有效地将数据从工作表中推出。

您可以偏移`EntireColumns`给定数量的列和`EntireRows`给定的行数，但不能`EntireColumns`按行和`EntireRows`按列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:49:40.613

您不能逐行偏移一列，列始终是完整的。您应该偏移一个单元格。

```
Columns(c).cells(1).Offset(1, 6).PasteSpecial Transpose:=True 
```

或者

```
Columns(c).cells(2).Offset(, 6).PasteSpecial Transpose:=True 
```

或者

```
Columns(c).cells(2, 7).PasteSpecial Transpose:=True 
```

或者

```
cells(2, c+6).PasteSpecial Transpose:=True 
```

# excel - 在 Excel 中加载 XLL：Tools->AddIn 和 File->Open 之间有什么区别？

> ID：13196450
> 
> 赞同：2
> 
> 时间：2012-11-02T13:43:32.537
> 
> 标签：excel, load, add-in, xll

我有一个 XLL，想在 Excel 中加载它。

使用 Tools->AddIn 或 File->Open 加载之间有什么区别吗？

*   如果我使用 File->Open 则无法卸载它；
*   如果我重新启动 Excel，它将不会自动加载。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T09:36:43.153

假设您正在编写 xll 而不是 VBA 插件，请参阅[http://xllblog.wordpress.com/2013/07/10/add-in-manager/](http://xllblog.wordpress.com/2013/07/10/add-in-manager/)上的完整故事。

长话短说，`File>Open...`只有调用`xlAutoOpen`。加载项管理器会在您添加文件时调用，`xlAutoAdd`然后在您删除文件时调用。`xlAutoOpen``xlAutoRemove``xlAutoClose`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T13:56:41.103

Tools->Addin 在首次安装插件时会触发一个附加事件 AddinInstall。我个人从不使用这个事件。
如果要使用 VBA 加载 XLL，则必须使用 RegisterXLL

# wordpress - 用于自定义帖子的 Wordpress 模板页面

> ID：13196452
> 
> 赞同：0
> 
> 时间：2012-11-02T13:43:41.797
> 
> 标签：wordpress, templates, custom-post-type

我有一个自定义帖子类型（我在模板页面上使用），自定义帖子类型称为“Headerhome”。当我在那里发布一个画廊时，我试图让它重定向到'single-Headerhome.php'，但它总是只是去'single.php'。

自定义帖子类型本身的名称是任意的，它所在的模板页面的名称是'home'。

我真的很困惑，我在 WP 方面还不是最好的，所以当像这样简单的东西不起作用时，我不知道如何解决它，即使在将抄本倒了一个小时之后也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:00:40.073

> 自定义帖子类型本身的名称是任意的，它所在的模板页面的名称是'home'。

阅读这意味着您的主题中有一个 home.php 文件，该文件将自动显示为您网站的首页。这可能不是你想要的？更多信息在这里：[http ://codex.wordpress.org/Creating_a_Static_Front_Page](http://codex.wordpress.org/Creating_a_Static_Front_Page)

自定义帖子类型的一个示例可能是事件。事件可能具有与之关联的自定义字段，例如位置、日期、时间、描述。我们可能希望新的事件显示在我们的首页，但也希望创建一个自定义主题文件，以便当用户从主页单击事件以查看事件时，事件页面会显示我们的日期、时间、位置、描述等。然后，我们将创建一个 single-event.php 来执行此操作并放入任何自定义代码。

因此（另一个示例），自定义的 Fruit 帖子类型将具有关联的主题文件 single-fruit.php。如果它们没有 single-fruit.php，那么 Wordpress 将使用 single.php 作为默认主题文件来显示。更多信息在这里：[http ://codex.wordpress.org/Post_Types#Template_Files](http://codex.wordpress.org/Post_Types#Template_Files)

希望这有助于您朝着正确的方向前进。

# .net - WindowsFormsHost 控件中的 Telerik RadPanorama 控件

> ID：13196454
> 
> 赞同：2
> 
> 时间：2012-11-02T13:43:59.017
> 
> 标签：.net, wpf, winforms, telerik, windowsformshost

我正在构建我工作的 WPF 应用程序，并且我想将 RadPanorama 用于开始屏幕或将“启动板”用于应用程序。我了解并看到了许多线程，WPF 没有 RadPanorama。

但是，有什么原因我不能在 WindowsFormsHost 中嵌入一个？

经过非常快速的小测试后似乎可以工作，但我想知道是否有人对这样做有任何反馈？如果没有设计时支持，有些事情会变得非常“混乱”。有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:06:08.870

此控件的工作方式与通过主机在 WPF 应用程序中使用的任何其他窗口窗体控件一样。您可以使用可以容纳项目的组，或者只是将所需的项目添加到没有组的控件中。

# proxy - Doctrine Mongodb ODM 持久化并刷新代理文档

> ID：13196459
> 
> 赞同：0
> 
> 时间：2012-11-02T13:44:12.737
> 
> 标签：proxy, flush, persist, doctrine-odm, proxies

我想知道是否可以持久化和刷新代理文档。

如果我们克隆一个代理文档（不要忘记实现一个 __clone 方法来重置 id 参数）并持久化并刷新它是否会被插入？

如果我们想要文件的副本，可能会发生这种情况。

示例文档：

```
// User.php
class User
{
 // @ReferenceOne(targetDocument="Group")
 private $group;
}

// Group.php
class Group
{
  public function __clone()
  {
     if ($this->id) {
       $this->id = null;
     }
  }
  //....
} 
```

用法：

```
$user = $dm->createQueryBuilder('User')->getQuery()->getSingleResult();
$group = $user->getGroup(); // $group is a proxy document
$newGroup = clone $group;
$dm->persist($newGroup);
$dm->flush(); 
```

这可能是一个不好的例子，但这只是为了知道这是否可能。

**编辑**：对于那些想要做类似事情的人，它不能直接工作，但你可以通过使用“onFlush”事件来强制它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T16:45:11.183

我最近遇到了同样的问题（错误），显然，您目前**无法**保留代理文档（根据版本 1.0.0-beta9）。我提出了一个问题并编写了一个简单的测试用例来确认这种行为：[https](https://github.com/doctrine/mongodb-odm/issues/619) ://github.com/doctrine/mongodb-odm/issues/619 。

# jsf - Primefaces TreeNode 在第二次操作中被删除

> ID：13196461
> 
> 赞同：0
> 
> 时间：2012-11-02T13:44:31.140
> 
> 标签：jsf, primefaces, treenode

在我的 jsf 页面中，我有一个`<p:treeTable>`结构。单击放置在其中一列上的小图标时，我试图删除一个节点：

```
<p:column rendered="#{node.isLeaf}"  style="width:70px">  
     <p:commandLink  styleClass="entity-icon"  update=":clipboard-tree" ajax="true"
                          action="#{clipboardManager.removeClipboard(node)}" >
       <p:graphicImage value="/resources/images/delete.png" styleClass="entity-icon-tree"/>
    </p:commandLink>
 </p:column> 
```

我的 removeClipboard 函数看起来像这样：

```
public void removeClipboard(FindResult result){
  TreeNode node = result.getNode(); 

  node.getChildren().clear();  
  node.getParent().getChildren().remove(node);  

  node.setParent(null);  
  node = null;  

} 
```

这类似于 primefaces 提供的展示。然而，树只在第二次点击时更新，我得到以下异常：

```
[Index: 0, Size: 0] with root cause java.lang.IndexOutOfBoundsException: Index: 0, Size: 0 
```

仅当我尝试删除节点的最后一个子节点时才会发生这种情况。有人知道为什么会这样吗？或者我该如何解决？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:49:54.110

我正在遭受同样的问题。在进行 ajax 调用后重新验证组件模型时，Primefaces 似乎存在问题。我注意到的奇怪的事情是，这只发生在删除元素的过程中。

我发现的解决方法是为删除操作禁用 ajax。在上面给出的示例中，如下所示：

```
<p:column rendered="#{node.isLeaf}"  style="width:70px">  
  <p:commandLink
    styleClass="entity-icon"
    update=":clipboard-tree" 
    ajax="false" <!-- this one to 'false' -->
    action="#{clipboardManager.removeClipboard(node)}">
    <p:graphicImage value="/resources/images/delete.png" styleClass="entity-icon-tree"/>
  </p:commandLink>
</p:column> 
```

不幸的是，以下完整的页面重新加载对于可用性来说并不是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:05:33.753

万一其他人有这个问题，我找到了解决方法。这并不理想，但没有其他更好的主意。

鉴于错误消息仅针对节点的最后一个子节点显示，我更改了树的生成方式，使添加的最后一个元素始终为空节点。

这样我的父节点之间就有了一个很好的间距，我可以删除最后一个节点而不会出错。希望这可以帮助。

# highcharts - HighCharts 刷新大小？

> ID：13196462
> 
> 赞同：1
> 
> 时间：2012-11-02T13:44:32.433
> 
> 标签：highcharts

当我扩展浏览器图表大小时，会根据页面大小进行扩展。但是当我缩小浏览器时，图表大小不起作用。

我不初始化高度和宽度。他们已经默认了。（我认为，100%）

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:49:04.193

在浏览器调整大小时添加事件。然后您可以在图表实例上调用 setSize。请记住，当浏览器调整大小时，此事件会反复触发，因此我通常使用 setTimeout 和 clearTimeout 仅在浏览器调整大小后调用它。

```
var timer;
function onBrowserResize(){
    if (timer){
          clearTimeou(timer);
    }
    timer = setTimeout(function(){
          // your resize code

          timer = null;
    }, 300);
} 
```

上面的代码将等待 300 毫秒，直到它执行 setTimeout 中的函数。

# cassandra - Cassandra 1.1 - 24GB RAM 和行缓存的设置

> ID：13196465
> 
> 赞同：3
> 
> 时间：2012-11-02T13:44:35.950
> 
> 标签：cassandra

我想调整 Cassandra 以适应细行（5-50 列）的重读场景。这个想法是使用行缓存，并启用键缓存以防万一 - 当数据对于行缓存来说太大时。

我有双 Intel Xeon 服务器和 24GB RAM（3 个环，两个数据中心 - 总共提供 6 台机器）

这些是我对默认配置所做的更改：

*cassandra-env.sh*

```
#JVM_OPTS="$JVM_OPTS -ea"
MAX_HEAP_SIZE="6G"
HEAP_NEWSIZE="500M" 
```

*cassandra.yaml*

```
# do not persist caches to disk
key_cache_save_period: 0
row_cache_save_period: 0

key_cache_size_in_mb: 512
row_cache_size_in_mb: 14336 
row_cache_provider: SerializingCacheProvider 
```

它将 6GB 专用于 Cassandra JVM，0.5GB 用于键缓存（在 6GB 堆中），14GB 用于作为堆外的行缓存。操作系统仍然有 4GB 应该足够了，因为只运行一个 JVM 进程并且它应该有最大 2GB 的开销。

这个设置是最优的吗？有什么提示吗？

谢谢， Maciej

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T06:39:03.477

我使用的是 1.1.6 版本。
SerializingCacheProvider 会将缓存数据保存在 Native Heap 区域。
该区域不适用于 GC 检查。所以不会发生GC。
您的 row_cache_size_in_mb 设置用于 SerializingCache 的参考对象。
该引用是使用 FreeableMemory 保存的（它在 1.1.x 中。但在 1.2 之后，它发生了变化）。
也就是说，计算row_cache_size_in_mb时，不会计算你的真实缓存值。

结果如果要计算row_cache_size_in_mb，请尝试从最小大小开始设置。
就我而言，当我设置 500mb 时，每个节点都使用 2G 老一代。（根据交易哪个数据集）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:39:08.293

运行[heapspace_calculator](https://github.com/joaquincasares/heap-calculator)并使用建议的值作为初始堆配置。使用“nodetool info”监控您的堆使用情况。

尽可能使用短列名并合并列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T20:08:50.293

这个设置工作得很好——我已经测试过了。

# facebook - Facebook。分享到墙上

> ID：13196471
> 
> 赞同：-1
> 
> 时间：2012-11-02T13:44:56.623
> 
> 标签：facebook, facebook-graph-api

我认为将是基本的东西......

我想在我的网站上有一个小部件，它允许人们共享一个 URL 和一行文本（我刚从 www.website.com 购买！）

我想要这个在订单完成页面上，并将发布到用户墙上。

我实际上正在努力寻找一个很好的教程。

任何人都可以解释一下吗？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:04:43.703

Feed 对话框可以轻松完成您要查找的内容： [https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

只需创建您自己的自定义分享按钮图像，并将其包装在锚标记中，如下所示：

```
<a href="https://www.facebook.com/dialog/feed?app_id=363642247015422&link=http://www.example.com/&picture=http://fbrell.com/f8.jpg&name=Facebook%20Dialogs&caption=Reference%20Documentation&%20description=Using%20Dialogs%20to%20interact%20with%20users&redirect_uri=http://matthew.fbdublin.com/response">Share This</a> 
```

这会给你这样的东西：
[分享这个](https://www.facebook.com/dialog/feed?app_id=363642247015422&link=http://www.example.com/&picture=http://fbrell.com/f8.jpg&name=Facebook%20Dialogs&caption=Reference%20Documentation&%20description=Using%20Dialogs%20to%20interact%20with%20users&redirect_uri=http://matthew.fbdublin.com/response "分享这个")

您显然应该更改所有 URL 参数，如, , ,`picture`和`link`以`app_id`匹配您自己的设置。您可以通过访问[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)并创建一个新应用程序或为您的网站使用现有应用程序来获得。是用户在分享帖子后应该被定向到的地方 - 这必须是您指定的应用程序拥有的 URL。`name``caption``redirect_uri``app_id``redirect_uri`

这将是一个完整的页面重定向到 Feed 对话框。如果您想对其进行更多自定义并使用 iFrame 或 Popup 对话框，那么您应该阅读我链接到的文档并实现对话框的 Javascript SDK 版本。

# php - 找不到codeigniter site_url 404页面

> ID：13196474
> 
> 赞同：0
> 
> 时间：2012-11-02T13:45:09.893
> 
> 标签：php, codeigniter, url, views

我在 localhost (MAMP) 中使用 CodeIgniter，从 CodeIgniter 本身给出的项目示例开始。我想从welcome_message.php 加载一个视图，所以首先在我写的欢迎控制器中

```
public function index()
{
    $this->load->helper('url');

    $this->load->view('welcome_message');
} 
```

然后我用一个简单的文本创建了新视图。在welcome_message.php 我放

```
<a href="<?php echo site_url('test');?>">Test</a> 
```

（两个视图都在视图文件夹中）

当我在浏览器中打开 welcome_message.php 时，我看到了链接，但是当我点击它时，没有加载 Test.php。我只读

**404 Page Not Found 找不到您请求的页面。**

在我在网上看到的其他项目中，这没有问题，我不知道如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:50:42.480

我建议检查您的 .htaccess 文件。使用以下代码在 Code Igniter 的根目录中创建一个新的 .htaccess 文件：

```
RewriteEngine on
RewriteCond $1 !^(index\.php)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

除此之外，您的路由必须在

```
application/config/routes.php 
```

# django - 带有 url 问题的基于 Django 类的视图

> ID：13196476
> 
> 赞同：2
> 
> 时间：2012-11-02T13:45:18.830
> 
> 标签：django, django-class-based-views

我正在尝试掌握基于类的视图。

我有 urls.py 如下：

```
urlpatterns = patterns('homework.views',

(r'^index/$', 'index'),
url(r'^(?P<sub_slug>\w+)/$', NavListView.as_view(), name='nav'),
url(r'^(?P<sub_slug>\w+)/(?P<class_grp_slug>\w+)/$', SubNavListView.as_view(), name='subnav'),

url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
url(r'^admin/', include(admin.site.urls)),) 
```

我有我的意见.py：

```
# Subject navigation
class NavListView(ListView):
    template_name = 'templates/home.html'

    def get_queryset(self):
        self.subject = Subject.objects.all()
        return self.subject

    def get_context_data(self, **kwargs):
        context = super(NavListView, self).get_context_data(**kwargs)
        context['subjects'] = self.subject
        return context

# Class group navigation
class SubNavListView(NavListView):

    def get_queryset(self):
        self.group = Group.objects.filter(subject__name__iexact=self.kwargs['sub_slug'])
        return self.group

    def get_context_data(self, **kwargs):
        context = super(NavListView, self).get_context_data(**kwargs)
        context['groups'] = self.group
        return context 
```

在我的“模板/home.html”中，我有：

```
{% extends 'templates/base.html' %}
{% load url from future %}

{% block nav-menu-items %}
<ul class="nav">
    {% for sub in subjects %}
    <li class=""><a href="{% url 'nav' sub_slug %}">{{ sub }}</a></li>
    {% endfor %}
    <li class="active"><a href="#">Add Subject</a></li>
</ul>
{% endblock nav-menu-items %}

{% block class_groups_nav %}
<div class="tabbable">
  <ul class="nav nav-tabs">
    {% for group in groups %}
    <li>
      <a data-toggle="tab" href="{% url 'subnav' sub_slug class_grp_slug %}">{{ group }}</a>
    </li>
    {% endfor %}
    <li><a href="#">Add</a></li>
  </ul>
{% endblock class_groups_nav %} 
```

我正在尝试实现主题的“导航”，然后下方的“子导航”显示在上面导航中选择的主题的每个班级组的选项卡。

我尝试了不同的方法来做到这一点，例如将 Subject.objects.all() 用作上下文处理器。我还尝试对 NavListView 进行子类化，以便可以继承以前的上下文，使它们在 SubNavListView 中可用。

目前，我收到一个 NoReverseMatch 错误，其中名为“nav”的 url 没有传递 sub_slug，因此我无法在模板的 url 中使用它。

有什么想法让这个工作吗？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:40:00.333

假设您的`Subject`模型中已命名字段`slug`，您需要将代码更新为

```
<li class=""><a href="{% url 'nav' sub.slug %}">{{ sub }}</a></li> 
```

IE。将适当的参数传递给`{%url ... %}`. 更改`sub.slug`为您要引用的任何字段名称。

如果你愿意，你也可以这样做`{% url 'nav' sub_slug=sub.slug %}`。

您正在尝试传递`sub_slug`，但未在模板上下文中定义，并导致空字符串。所以`nav`url 不会得到任何参数。

`{%url ...%}`我在模板中的其他标签中看到了类似的问题。

# winapi - 如何将 DDB 保存到文件中？

> ID：13196480
> 
> 赞同：0
> 
> 时间：2012-11-02T13:45:31.863
> 
> 标签：winapi, gdi+

我想问是否可以将 DDB 保存到文件中？我知道你可以保存DIB，所以这意味着我需要在保存之前将DDB转换为DIB。还有其他方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:07:17.263

“设备相关”DDB 位图依赖于显示设备来解释其像素数据。文件不依赖于显示设备。所以答案是否定的，您不能将 DDB 保存到文件中并使其成为有意义的 .BMP 文件。它必须保存为“设备独立”DIB 位图。此外，这也是官方 .BMP 文件规范所要求的。

# jquery - servlet doPut request.getParameter

> ID：13196485
> 
> 赞同：2
> 
> 时间：2012-11-02T13:45:42.073
> 
> 标签：jquery, servlets

我有一个 jquery ajax 请求

```
$('#updateUser').live( 'click', function() {
    var euserId = editeduserId; 
    var pname = $('#euname').val();
    var psurname = $('#eusurname').val();
    var plogin = $('#eulogin').val();
    var ppassword = $('#eupassword').val();
    var pemail = $('#euemail').val();
    var user = {name: pname, 
                surname: psurname, 
                login: plogin,
                password: ppassword,
                email: pemail};

    $.ajax({
        url: '/SimpleAjaxShit/UserController/' + euserId,
        type: 'PUT',
        data: user,
        success: function(data) {               
            console.log(data);
        },
        error: function(data, response) {
            console.log(data);
            console.log(response);
        } 
    });
    $( "#dialog-modal" ).dialog( "close" );
}); 
```

和 servlet 中的 doPut 方法，它服务于 ajax 请求

```
protected void doPut(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {       
    String name = request.getParameter("name"); //Null
    String surname = request.getParameter("surname"); //Null
    String login = request.getParameter("login"); //Null
    String password = request.getParameter("password"); //Null
    String email = request.getParameter("email"); //Null        
} 
```

我可以在标题中看到我的参数，但 request.getParameter("name") 和其他人返回 Null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:17:19.517

> 我可以在标题中看到我的参数

如果您在 HTTP 请求的标头中看到您的参数，那么您应该使用`request.getHeader()`方法从标头中获取值。

`request.getParameter()`通常用于从查询字符串中的参数中获取值。

# xslt - 由于性能问题而限制每个标准

> ID：13196489
> 
> 赞同：0
> 
> 时间：2012-11-02T13:45:52.527
> 
> 标签：xslt

我有一些看起来像这样的代码：

```
<xsl:for-each select="($home/item[@key='issues']/item[@key='cwa']/item[@key='archives']/item[@key='2012']/*/*)">
    <xsl:if test="(position() &lt; 15) and (position() &gt; 1)">
    ... 
```

它工作正常，除了结果集中有数百个项目，我只想显示 20 个。2012 下面的结构看起来像这样

```
2012
  01
  02
  03 
```

所以理论上我只需要当前月份和上个月。有没有办法在 for-each 语句本身中限制它？

这是在 Sitecore CMS 中，所以很遗憾我无法轻松访问原始 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:16:59.493

我的经验是“模板 - 应用模板”构造在性能方面更好。我还有一个包含数百个项目的 XML。在特定情况下，我不得不重命名元素，性能增益几乎是 30 秒。

另外出于其他原因，我建议使用“模板 - 应用模板”构造： [For loops vs. apply-templates](https://stackoverflow.com/questions/6342902/for-loops-vs-apply-templates)

我相信您也可以调整示例中的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:58:09.957

您还可以创建一个 XSL 扩展来填充 foreach。在 XSL 扩展中，您可以使用 Linq 仅选择您真正需要的项目。

将数百个项目作为子项目的另一个缺点是，当您尝试打开父项目时，内容编辑器可能会变得非常慢。例如，每月自动将子项目划分到文件夹中，可以解决此问题（或尝试使用 Tim Ward 的 ItemBuckets 包，以使用 Lucene Search 索引的另一种方法）

编辑：只是想到在执行实际循环之前在 for 循环中定义选择也可以获得一些性能改进，就像这样。（顺便说一句，不完全确定这是否属实；））

```
<xsl:variable name="list" select="($home/item[]..... etc.)" />
<xsl:for-each select="$list>
 .... 
```

# c++ - 错误 PRJ0002：从“C:\Program Files\Microsoft Visual Studio 9.0\VC\bin\cl.exe”返回错误结果 -1073741515

> ID：13196491
> 
> 赞同：1
> 
> 时间：2012-11-02T13:45:53.290
> 
> 标签：c++, visual-studio-2008, visual-c++, compiler-construction, linker

我正在使用VS2008。（C++ 代码）。编译时出现错误：

> 错误 PRJ0002：从“C:\Program Files\Microsoft Visual Studio 9.0\VC\bin\cl.exe”返回错误结果 -1073741515

我尝试了网络中可用的所有选项，包括stackoverflow链接之一 [Visual Studio错误混淆+请帮助](https://stackoverflow.com/questions/6145469/visual-studio-error-confusion-help-please)

1.  尝试通过直接放置在 C 驱动器中来缩短我的源解决方​​案的路径。
2.  尝试删除任何 VS 插件。工具 -> 插件管理器。

我的代码库很好，因为相同的解决方案在其他机器上编译得很好。当我将解决方案复制到特定的 m/c 时，我收到了这个错误。

它具有自定义构建步骤，后期构建步骤。但它们都是正确的，因为它可以在其他计算机上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:53:03.570

0xC0000135（十六进制 -1073741515）可以在 NtStatus.h 中找到

它的含义是 STATUS_DLL_NOT_FOUND。尝试使用[Depends查看您的 cl.exe](http://www.dependencywalker.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:54:53.767

您是否尝试过重置 Visual Studio 的设置？它在工具->导入和导出设置中可用。将其设置为 Visual C++ Development Settings 可能会奏效。我知道它帮助其他人解决了同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-09T11:28:17.677

我通过将此路径添加到环境 PATH 变量来修复它：C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE

cl.exe 的一些依赖项位于此目录中，未解决。

# ruby-on-rails - 我应该如何重构 Rails 3 中的 create_unique 方法？

> ID：13196493
> 
> 赞同：1
> 
> 时间：2012-11-02T13:45:59.280
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我在几个模型中遵循丑陋的 create_unique 方法，例如：

```
 def self.create_unique(p)
    s = Subscription.find :first, :conditions => ['user_id = ? AND app_id = ?', p[:user_id], p[:app_id]]
    Subscription.create(p) if !s
  end 
```

然后在控制器中#create 动作我有

```
s = Subscription.create_unique({:user_id => current_user.id, :app_id => app.id})
if s
  raise Exceptions::NotAuthorized unless current_user == s.user
  @app = s.app
  s.destroy
  flash[:notice] = 'You have been unsubscribed from '+@app.name+'.'
  redirect_to '/'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:05:15.123

你试过动态查找器吗？

```
find_or_initialize_by_user_id_and_app_id
find_or_create_by_user_id_and_app_id
first_or_initialize...
first_or_create.... 
```

检查手册[http://guides.rubyonrails.org/active_record_querying.html#dynamic-finders](http://guides.rubyonrails.org/active_record_querying.html#dynamic-finders)

还可以选择为检查唯一值创建验证规则

```
class Subscription < ActiveRecord::Base
   validates_uniqueness_of :user_id, :scope => :app_id
end 
```

然后

```
sub = Subscription.new({:user_id => current_user.id, :app_id => app.id})
sub.valid? #false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:07:20.573

您可以使用`validates_uniquness_of :app_id,:scope=>:user_id`所以应用 id 是受尊重的 user_id 的唯一

# c# - 代码未正确执行时回滚更改

> ID：13196496
> 
> 赞同：0
> 
> 时间：2012-11-02T13:46:04.510
> 
> 标签：c#, sql

我是 SQL 新手，在我的项目中，我试图从 DataBase 表中填充 DataSet，然后在 DataSet 中插入新行。完成此操作后，我再次使用 DataSet 数据填充数据库表。在填充之前，我正在清除或删除数据库表数据。好吧，我通过使用以下代码实现了这一点：

```
Database Table --> myTable
DataSet --> ds 
```

* * *

**按钮点击**

```
 string strQuery = "delete from [dbo].[myTable]"
   SqlConnection conn = new SqlConnection(strConn);
   SqlCommand cmd = new SqlCommand(strQuery, conn);
   SqlCommand command;
   SqlDataAdapter da = new SqlDataAdapter(cmd);
   using (cmd)
   {
      using (conn)
      {
         conn.Open();
         cmd.ExecuteNonQuery();                    //deleting database table data
         foreach (DataRow dr in ds.Tables[0].Rows) //Inserting new data into the Database table
         {
             command = new SqlCommand(InsertQuery, conn);
             command.ExecuteNonQuery();
         }
         conn.Close();
      }
   } 
```

上面的代码工作正常，但是当`command`sqlCommand 中有任何异常时，它会完全删除数据库表而不填充 DataSet。有什么建议可以修改此代码吗？请帮忙。

更新：

```
 string strQuery = "delete from [dbo].[myTable]";
            using (SqlCommand cmd = new SqlCommand(strQuery, conn))
            {
                using (SqlCommand cmdReset = new SqlCommand("DBCC CHECKIDENT('myTable', RESEED, 0)", conn))
                {
                    SqlDataAdapter da = new SqlDataAdapter(cmd);
                    conn.Open();
                    SqlTransaction sqlTransaction = conn.BeginTransaction();
                    cmd.Transaction = sqlTransaction;
                    try
                    {
                        cmd.ExecuteNonQuery();                   //deleting database table data
                        cmdReset.ExecuteNonQuery();               //Resetting Identity of first column
                        foreach (DataRow dr in ds.Tables[0].Rows) //Inserting new data into the Database table
                        {
                            command = new SqlCommand(query.createDoctorRow(InsertQuery, conn);
                            command.ExecuteNonQuery();
                        }
                        sqlTransaction.Commit();
                        conn.Close();
                    }
                    catch (Exception e)
                    {
                        sqlTransaction.Rollback();
         /*ERROR*/      throw;  
                    }
                }
            } 
```

* * *

> 错误 --> “当分配给命令的连接处于挂起的本地事务中时，ExecuteNonQuery 要求命令具有事务。命令的事务属性尚未初始化。”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:49:37.703

使用事务运行sql

```
string strQuery = "delete from [dbo].[myTable]";

using (SqlConnection conn = new SqlConnection(strConn))
{
  using (cmd = new SqlCommand(strQuery, conn))
  {
     SqlDataAdapter da = new SqlDataAdapter(cmd);
     conn.Open();
     SqlTransaction sqlTransaction = conn.BeginTransaction();
     cmd.Transaction = sqlTransaction;
     try
     {
         cmd.ExecuteNonQuery();                    //deleting database table data
         foreach (DataRow dr in ds.Tables[0].Rows) //Inserting new data into the Database table
         {
             command = new SqlCommand(InsertQuery, conn);
             command.ExecuteNonQuery();
         }
         sqlTransaction.Commit();
         conn.Close();
     }
     catch(Exception e)
     {
         sqlTransaction.Rollback();
         throw;
     }
  } 
```

}

事务形成一个全有或全无的场景。事务中的所有内容都可以正常工作并提交到数据库，或者整个事务都被取消，就好像什么都没发生一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T13:50:53.810

这个[例子](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)有一个很好的在事务范围内包装 sql 命令的方法。基本上，如果在任何行插入期间引发任何异常，则删除查询也将失败。

简而言之，您将所有东西都包裹在一个

```
 using (TransactionScope scope = new TransactionScope())
        {
            using (SqlConnection connection1 = new SqlConnection(connectString1))
            {
                 //enter your code here
            }
      } 
```

此外，您不必逐行进行插入，您可以使用[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)更有效地执行此操作。

```
 using (SqlConnection connection =new SqlConnection(connectionString))
 {
        connection.Open();
        using (SqlBulkCopy bulkCopy = new SqlBulkCopy(connection))
         {                               
                  bulkCopy.DestinationTableName = table.TableName;
                  bulkCopy.WriteToServer(table);
         }
  } 
```

# boost - 如何将 OGRLineString 注册为提升线串？

> ID：13196503
> 
> 赞同：3
> 
> 时间：2012-11-02T13:46:16.913
> 
> 标签：boost, ogr, boost-geometry

我想用s的`boost::geometry::simplify`方法。`OGRLineString`虽然我可以`OGRPoint`通过宏注册：

```
BOOST_GEOMETRY_REGISTER_POINT_2D_GET_SET(OGRPoint, double, cs::cartesian, OGRPoint::getX, OGRPoint::getY, OGRPoint::setX, OGRPoint::setY) 
```

我目前无法使用以下代码：

```
#include <boost/geometry/geometry.hpp>
#include <boost/geometry/geometries/register/point.hpp>
#include <boost/geometry/geometries/register/linestring.hpp>
#include <boost/geometry/geometries/linestring.hpp>
#include <boost/geometry/geometries/point_xy.hpp>

BOOST_GEOMETRY_REGISTER_POINT_2D_GET_SET(OGRPoint, double, cs::cartesian, OGRPoint::getX, OGRPoint::getY, OGRPoint::setX, OGRPoint::setY)
BOOST_GEOMETRY_REGISTER_LINESTRING(OGRLineString)

void example()
{
  OGRLineString test;
  OGRLineString simplified;
  boost::geometry::simplify(test, simplified, 0.5);
} 
```

Simplyfy 方法无法编译，并且我收到一些关于 boost:mpl::eval_if_c 的错误，这对我没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:59:39.960

Boost.Geometry[线串](http://www.boost.org/doc/libs/1_51_0/libs/geometry/doc/html/geometry/reference/concepts/concept_linestring.html "Boost.Geometry 文档")必须满足 Boost.Range 概念。例如，一个 std::vector 会这样做。但是一个 OGRLineString，开箱即用。

首先，应该定义一个迭代器，遍历 OGRLineString 包含的点。使用 OGRLineString::getPoint(...) 这基本上应该是可能的。

其次，如果实现了迭代器，这可能是最困难的部分，那么 OGRLineString 应该适应 Boost.Range，例如[这里](http://www.boost.org/doc/libs/1_51_0/libs/range/doc/html/range/reference/extending/method_2.html "Boost.Range 文档")描述的。

如果这样做了，Boost.Geometry 应该将 OGRLineString 识别为线串并且可以读取它。

但是，要写入 OGRLineString，还需要执行一个附加步骤。它应该是一个“可变范围”。因为（还）没有在 Boost.Range 中定义，所以到目前为止它只是一个几何图形，可以通过在 boost::geometry::traits 命名空间中专门化三个类来实现（clear、push_back 和 resize）。

# vb.net - 位图数组在函数后重置为 Nothing (VB 2012)

> ID：13196506
> 
> 赞同：1
> 
> 时间：2012-11-02T13:46:42.283
> 
> 标签：vb.net, methods, multidimensional-array

好的，基本上，我在类的函数中分配了一个数组值。但是在类执行之后，数组重置为空。这是我的代码：

```
Public Class MoisacDialog
Public imgArray(,) As Bitmap

Private Sub cmdCancel_Click(sender As Object, e As EventArgs) Handles cmdCancel.Click
    DialogResult = DialogResult.Cancel
End Sub

Private Sub cmdOK_Click(sender As Object, e As EventArgs) Handles cmdOK.Click
    Try
        Dim rows As Integer = Convert.ToInt32(txtRows.Text)
        Dim cols As Integer = Convert.ToInt32(txtCols.Text)
        If rows > 0 And cols > 0 Then
            ReDim imgArray(rows - 1, cols - 1)
            For i As Integer = 0 To cols - 1
                For j As Integer = 0 To rows - 1
                    Using fileImage As New OpenFileDialog
                        If fileImage.ShowDialog() = DialogResult.OK Then
                            imgArray(i, j) = CType(Bitmap.FromFile(fileImage.FileName), Bitmap)
                        End If
                    End Using
                Next
            Next
            DialogResult = DialogResult.OK
        Else
            MessageBox.Show("Rows/columns entered are out of range.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Exclamation)
        End If
    Catch ex As FormatException
        MessageBox.Show("Invalid rows/columns entered.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try
End Sub
End Class 
```

执行后`cmdOK_Click`，整个数组`imgArray`重置为空。如果我在调用表单中这样使用它：

```
Using sizeDialog As New MoisacDialog
    If MoisacDialog.ShowDialog() = DialogResult.OK Then
        Dim ImageArray(,) As Bitmap = sizeDialog.imgArray
        _img = ImProc.PixelEffects.Moisac(ImageArray)
        picImage.Image = CType(_img, Image)
    End If
End Using 
```

并使用调试视图，`ImageArray`设置`Nothing`在第三行之后，而在`cmdOK_Click`.

更新：我将第二个片段的第 4 行更改为`_img = ImageArray(0,0)`. 问题仍然存在，a`NullReferenceException`在包含我的第二个代码段的代码中被抛出和处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:01:25.343

它没有被重置，它从来没有被设置在首位。

```
Using sizeDialog As New MoisacDialog
    If MoisacDialog.ShowDialog() = DialogResult.OK Then
        Dim ImageArray(,) As Bitmap = sizeDialog.imgArray 
```

请注意，您正在不`sizeDialog`加选择地使用`MoisacDialog`。`MoisacDialog`，当用作对象时，是同名类的默认实例。不幸的是，VB 允许这样做，而不是在编译时捕捉到明显的错误。

要更正错误，只需使用`sizeDialog.ShowDialog()`.

# matlab - Matlab在查找日志时出错

> ID：13196507
> 
> 赞同：1
> 
> 时间：2012-11-02T13:46:43.233
> 
> 标签：matlab, logarithm

我正在尝试使用以下代码在 matlab 中查找图像`log`的`base 10`每个像素

```
m1 = imread('owl','pgm');
for x = 1:size(m1,1)
    for y = 1:size(m1,2)
        m1(x,y) = log10(m1(x,y));  
    end
end 
```

这里 m1 是一个 221 X 201 阶的二维数组。但我遇到了这个错误

```
??? Undefined function or method 'log2' for input arguments of type 'uint8'.

Error in ==> log10 at 20
y = log2(x);

Error in ==> q2 at 38
        m1(x,y) = log10(m1(x,y)); 
```

但是当我使用以下代码调试日志功能时

```
fprintf('log of 190 is %d', log10(190)); 
```

它给了我正确的输出我不知道当我在循环中使用相同的代码时发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:56:50.057

错误消息告诉您问题出在哪里，您已尝试将`log10`函数应用于类型值，`uint8`但未为该类型的数字定义函数。您没有意识到的是`imread`，当图像文件满足某些标准（阅读文档以了解这些标准是什么）时，会将像素数据捕获到 s 数组中`uint8`，而不是实数。

如果你想取 a 的对数，`uint8`你要么必须定义一个你自己的对数函数来接受这样的输入，或者更简单地说，将a 转换为一个满意`uint8`的类型。`log10`例如，您可以编写：

```
log10(double(m1(x,y))) 
```

到现在为止，您已经意识到为什么您的诊断测试没有告诉您任何有用的信息，当您执行命令时，`log10(190)`Matlab 默认情况下会确定它`190`的类型`double`并计算对数而没有抱怨。 `log10(uint8(190))`讲述了一个不同的故事。

# asp.net - 从 WCF 获取状态更新到 asp.net 页面

> ID：13196508
> 
> 赞同：1
> 
> 时间：2012-11-02T13:46:52.387
> 
> 标签：asp.net, wcf, long-polling, long-running-processes

我想知道我是否可以访问 WCF 服务中的静态变量以进行状态更新，如果可以的话如何做到这一点？

我有一个更新 1000 种产品的漫长过程。这个过程是从一个asp.net页面触发的，并且用户希望在过程运行时从服务中更新状态，即“处理产品123”。我有服务，并且我在更新面板中有一个计时器控件，我想用它来轮询服务以获取状态更新。我在想当计时器控件回发时，我会使用 GetStatus 方法查询服务以获取当前状态，但我认为状态消息将始终相同，因为将在 Page_Load 上创建服务的新实例。那么，如何从 WCF 服务获取运行状态变量到 asp.net 页面？

```
protected void Timer1_Tick(object sender, EventArgs e)
{
    if (statusMessage == null)
    {
        // feed operation finished or timer is running invalid
        Timer1.Enabled = false;
    }

    try
    {
        UpdateStatusDisplay();
    }
    catch (Exception exp)
    {
        ....
    }
} 
```

在我的 WCF 服务中

```
public string Status = "";

    public void BeginImport(ImportOptions options)
    {
        _options = options;

        string conString = ConfigurationManager.ConnectionStrings["String1"].ConnectionString;
        using (var con = new SqlConnection(conString))
        {
            con.Open();

            var products = con.Query("SELECT * FROM PRODUCTS");

            foreach (var product in products)
            {
                Status = "Processing product " + product.ProductName);
            }

        }
    }

    public string GetStatus()
    {
        return Status;
    } 
```

编辑：我刚读到 [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]，这就是我需要做的吗？

# ajax - 处理json对象，ajax响应

> ID：13196523
> 
> 赞同：0
> 
> 时间：2012-11-02T13:47:55.580
> 
> 标签：ajax, json, object

我有这个 json 对象：

```
[
    {
        "company_name": "Spix Clothing Co."
    },
    {
        "company_name": "spixel"
    },
    {
        "company_name": "WebNiJose Co."
    }
] 
```

如您所见，它是一个没有名称的对象，其中包含 3 个对象。

我想知道我应该如何处理这个问题。我希望每个都附加在`<ul></ul>`.

顺便说一句，这是来自 ajax 调用的响应，如下所示：

```
success : function(output) {
     console.log(output);
} 
```

并且**php**文件会像这样触发：

```
echo json_encode($result); 
```

你认为最好的处理方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:40:05.357

您收到的响应实际上是一个数组，因此您可以按如下方式处理这种情况：

*   将字符串解析为可以在 javascript 中使用的对象：

    `var companyObject = JSON.parse(output);`

*   遍历数组并提取对象属性并创建一个新`<li>`元素以包含例如公司名称。如果您愿意，JQuery 提供了一个自动索引供我们使用。（假设您的标记已经有`<ul>`一个 id 为“容器”的元素。）

    ```
    var $container = $('#container');            // where to append the <li>
    $.each(companyObject,function(i,company){
        var $newElement = $('<li/>');            // create a new <li> element
        $newElement.html(company.company_name);
        $container.append($newElement);          // attach the new <li> element
    });​​ 
    ```

这是一个完整的例子：http: [//jsfiddle.net/mNzm9/2/](http://jsfiddle.net/mNzm9/2/)

# c++ - Where is prefix-dependent integer parsing defined?

> ID：13196528
> 
> 赞同：10
> 
> 时间：2012-11-02T13:48:29.610
> 
> 标签：c++, language-lawyer

I have a simple test program (error checks removed):

```
#include <iostream>
#include <iomanip>
#include <sstream>
#include <string>

int main() {
    std::string line;
    while(std::cin >> line) {
        int value;
        std::stringstream stream(line);

        stream >> std::setbase(0) >> value;

        std::cout << "You typed: " << value << std::endl;
    }

} 
```

Which works great for prefix-dependent integer parsing. It'll parse strings starting with `"0x"` or `"0X"` as hexadecimal and strings starting with `'0'` as octal. This is explained in several [resources](http://en.cppreference.com/w/cpp/io/manip/setbase) that I use and have seen. What I haven't been able to find though, is an indication in the C++ standard that this is guaranteed to work.

Section 7.20.1.4.3 on `strtol` in the [C standard](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf) says (6.4.4.1 is the syntax for integer constants) I imagine the extraction operators use this under the hood:

> If the value of base is zero, the expected form of the subject sequence is that of an integer constant as described in 6.4.4.1, optionally preceded by a plus or minus sign, but not including an integer sufﬁx.

This works on the couple of versions of GCC that I've tried, but is it safe to use generally?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T14:27:26.453

`setbase` is defined in C++98 [lib.std.manip]/5, paraphrasing slightly

```
smanip setbase(int base); 
```

**Returns:** An object *`s`* of unspecified type such that [inserting or extracting `s` from a stream behaves as if the following function were called on that stream:]

```
ios_base& f(ios_base& str, int base)
{
    str.setf(n == 8 ? ios_base::oct :
             n == 10 ? ios_base::dec :
             n == 16 ? ios_base::hex :
             ios_base::fmtflags(0), ios_base::basefield);
    return str;
} 
```

Okay, so, if `base` is not 8, 10, or 16, then the `basefield` flags are cleared. The *effect* of a cleared `basefield` for input is defined in [lib.facet.num.get.virtuals], table 55 ("Integer conversions") as equivalent to `sscanf("%i")` on the sequence of characters next available.

C++98 refers to C89 for the definition of `*scanf`, naturally enough. I don't have a PDF copy of C89, but I do have C99, in which section 7.19.6.2 paragraph 12 [the C standard does not have the nice symbolic section names that the C++ standard has] defines `"%i"` to behave the same as `strtol` with base argument 0.

So the good news is, prefix-dependent integer scanning is guaranteed by the standard after `setbase(0)`. The *bad* news is, iostream formatted input is defined in terms of `*scanf`, which means the dreadful sentence at the end of C99 7.19.6.2p10 applies:

> If [the object that receives the result of scanning] does not have an appropriate type, or if *the result of the conversion cannot be represented in the object*, the ***behavior is undefined***.

(Emphasis mine.) Clearer version of that sentence: *input overflow triggers undefined behavior*. The C(++) runtime is allowed to *crash the program* if input to `*scanf` has too many digits! This is (one of several reasons) why I and others keep saying `*scanf` should never be used, and now I have to start saying it about `istream >> int` as well. :-(

The advice that holds for C is even easier to apply in C++: Read entire lines with `std::getline` and parse them by hand. Use the `strtol` family of functions to convert numeric input to machine numbers. (Those functions have predictable behavior on overflow.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T14:24:47.467

§22.4.2.1.2/3, Table 85:

> For conversion to an integral type, the function determines the integral conversion specifier as indicated in Table 85\. The table is ordered. That is, the first line whose condition is true applies.

```
Table 85 — Integer conversions
State                    stdio equivalent
basefield == oct         %o
basefield == hex         %X
basefield == 0           %i
signed integral type     %d
unsigned integral type   %u 
```

The `%i` conversion format for `scanf` and company does prefix-dependent conversion.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T14:30:01.900

Let's start with §27.6.3, "Standard manipulators", ¶5, "`smanip setbase(int base)`":

> > Returns: An object `s` of unspecified type such that if `in` is an (instance of) `basic_istream` then the expression `in>>s` behaves as if `f(s)` were called. Where `f` can be defined as:
> > 
> > ```
> > ios_base& f(ios_base& str, int base)
> > {
> >   // set basefield
> >   str.setf(base == 8 ? ios_base::oct :
> >     base == 10 ? ios_base::dec :
> >     base == 16 ? ios_base::hex :
> >     ios_base::fmtflags(0), ios_base::basefield);
> >   return str;
> > } 
> > ```

We continue our quest with §27.4.2.2 `ios_base fmtflags` state functions, ¶6 `fmtflags setf(fmtflags fmtfl, fmtflags mask);`

> Effects: Clears `mask` in `flags()`, sets `fmtfl & mask` in `flags()`.

So, what is the effect of setting `0&basefield` in `flags()`?

Consider §27.6.1.2.2 Arithmetic Extractors, which describes, among others, `operator>>(int& val);`:

> these extractors depend on the locale’s num_get<> (22.2.2.1) object to perform parsing the input stream data.

§22.2.2.1, ¶4, Table 55 describes the conversion specifier selected in this case:

```
basefield == 0, `%i` 
```

Finally, ¶11 says:

> A sequence of chars ... is converted (according to the rules of `scanf`) to a value of the type of val.

* * *

So, the C++ Standard, 2003, says that `std::cin >> setbase(0) >> i` is equivalent to `scanf(..., "%i", &i)`.

For what **that** means, you need to consult the C Standard.

# maven - 将属性文件值读入 pom.xml

> ID：13196532
> 
> 赞同：1
> 
> 时间：2012-11-02T13:48:37.857
> 
> 标签：maven, maven-2, dependency-properties, maven-plugin, pom.xml

我已经尝试并遵循这个解决方案 [如何在 Maven 中读取外部属性文件](https://stackoverflow.com/questions/849389/how-to-read-an-external-properties-file-in-maven) 但没有运气。

我想从属性文件（与 pom.xml 位于同一位置）中读取绝对路径（/home/tomcat/lib）并在 pom.xml 中设置值

project.properties 文件包含：

myTomCat.lib.location=/home/tomcat/lib

pom.xml 配置包含：

```
<properties>
    <envTomcatLib>${myTomCat.lib.location}</envTomcatLib>
</properties>

<dependencies>
<dependency>
           <artifactId>MyJar</artifactId>
       <groupId>MyJar</groupId>
       <scope>system</scope>
       <version>1.0</version>
       <systemPath>/${envTomcatLib}/MyJar.jar</systemPath>
 </dependency>
</dependencies>

  <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>properties-maven-plugin</artifactId>
    <version>1.0-alpha-1</version>
    <executions>
      <execution>
        <phase>initialize</phase>
        <goals>
          <goal>read-project-properties</goal>
        </goals>
        <configuration>
          <files>
            <file>${basedir}/project.properties</file>
          </files>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

问题是在 Eclipse 编译时或运行“mvn install”时占位符 ${envTomcatLib}/MyJar.jar 无法解析为 /home/tomcat/lib/MyJar.jar 并且仍然是 ${envTomcatLib}/MyJar 。罐。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:20:20.000

该部分中的值是在`<properties>`最初加载 POM 时分配的。`properties-maven-plugin`唯一影响加载属性点之后的插件执行。我提供的[类似答案](https://stackoverflow.com/a/10686445/944849)中有更多详细信息。

顺便说一句，[Maven 参考书](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-dependencies.html)对系统范围有这样的说法：“请注意，不建议使用此范围（您应该始终尝试在公共或自定义 Maven 存储库中引用依赖项）。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:01:02.277

您可能需要删除`"/"`before`/${envTomcatLib}/MyJar.jar` 或赋予属性值 as`home/tomcat/lib`而不是`/home/tomcat/lib`. 这可能是无法解析您的位置的原因。

# html - 为什么内联元素的边距顶部会向下推它之后的所有内容

> ID：13196536
> 
> 赞同：1
> 
> 时间：2012-11-02T13:48:49.023
> 
> 标签：html, css

我有以下标记

```
<a class="block"><span class="inline">hello</span>world</a> 
```

有`<a>`一个`display:block`......如果我给 span.inline a`margin-top:3px`它也会下推它后面的文本。这是一个 jsfiddle 来查看这种行为

[http://jsfiddle.net/YLMeh/](http://jsfiddle.net/YLMeh/)

谁能给我一个提示，为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:53:38.333

一行中的所有`inline`元素共享相同的行高。如果你仔细想想，这是有道理的。当你有多行文本时会发生什么？这将是完全不可读的。

在这些情况下，`vertical-align`属性是您必须使用的。仔细阅读，你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:53:16.500

`margin-top: 3px;`应用于您`<span class="inline">`将整个文本的基线向下推。

了解`vertical-align`css 属性可能会有所帮助：[https ://developer.mozilla.org/en-US/docs/CSS/vertical-align](https://developer.mozilla.org/en-US/docs/CSS/vertical-align)

# node.js - 使用 Node.js + Express 2 “代理”大量 HTTP 请求

> ID：13196540
> 
> 赞同：5
> 
> 时间：2012-11-02T13:49:20.223
> 
> 标签：node.js, http, proxy, express

我正在用 Node.js + Express 2 编写代理。代理应该：

1.  解密 POST 有效载荷并根据结果向服务器发出 HTTP 请求；
2.  加密来自服务器的回复并将其发送回客户端。

与加密相关的部分工作正常。我面临的问题是超时。代理应在 15 秒内处理请求。实际上，它们中的大多数都在 500 毫秒以下。

当我增加并行请求的数量时出现问题。大多数请求都可以正常完成，但有些请求在 15 秒 + 几毫秒后失败。`ab -n5000 -c300`工作正常，但在 500 并发时，某些超时请求会失败。

我只能推测，但似乎问题是回调执行的顺序。是否有可能首先出现的请求会一直挂起，直到`ETIMEDOUT`因为节点关注最新的请求，这些请求仍在 500 毫秒内及时处理。

PS：远程服务器没有问题。我正在使用[请求](https://github.com/mikeal/request)与它进行交互。

**更新**

一些代码的工作方式：

```
function queryRemote(req, res) {
  var options = {};  // built based on req object (URI, body, authorization, etc.)
  request(options, function(err, httpResponse, body) {
    return err ? send500(req, res)
               : res.end(encrypt(body));
  });
}

app.use(myBodyParser);  // reads hex string in payload
                        // and calls next() on 'end' event

app.post('/', [checkHeaders,   // check Content-Type and Authorization headers
               authUser,       // query DB and call next()
               parseRequest],  // decrypt payload, parse JSON, call next()
         function(req, res) {
  req.socket.setTimeout(TIMEOUT);
  queryRemote(req, res);
}); 
```

我的问题如下：当`ab`发布 20 个 POST 到 时`/`，快速路由处理程序会被调用数千次。这并不总是发生，有时会及时处理 20 个请求，只有 20 个请求。

当然，`ab`不是问题。我 100% 确定只有 20 个请求由`ab`. 但是路由处理程序被多次调用。

我找不到这种行为的原因，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:15:44.707

超时是由于使用[`http.globalAgent`](http://nodejs.org/api/http.html#http_http_globalagent)默认情况下最多可以处理[5 个](http://nodejs.org/api/http.html#http_agent_maxsockets)并发请求而导致的`host:port`（在我的情况下这还不够）。

成千上万的请求（而不是几十个）是由`ab`（Wireshark 在 OS X 下批准的事实；我无法在 Parallels 内的 Ubuntu 下重现这一点）发送的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T03:18:37.730

您可以查看[node-http-proxy](https://github.com/nodejitsu/node-http-proxy)模块以及它如何处理连接。确保您不缓冲任何数据，并且一切都通过[流式](https://github.com/substack/stream-handbook)处理。您应该尝试查看这些长请求花费的时间在哪里。[`conosle.time`](http://nodejs.org/docs/latest/api/all.html#all_console_time_label)尝试使用and检测部分代码，[`console.timeEnd`](http://nodejs.org/docs/latest/api/all.html#all_console_timeend_label)看看哪里花费的时间最多。如果时间主要花在 javascript 上，您应该尝试对其进行分析。基本上，您可以通过在节点命令中添加 --prof 选项来使用 v8 分析器。这会生成一个[v8.log](http://code.google.com/p/v8/wiki/V8Profiler#Process_the_Generated_Output)，并且可以通过[node-source-dir/deps/v8/tools](http://code.google.com/p/v8/wiki/V8Profiler#Process_the_Generated_Output)中的 v8 工具进行处理。仅当您通过[scons](http://www.scons.org/) (scons d8) 安装了 d8 shell 时它才有效。你可以看看[这篇文章](http://blog.arc90.com/2012/03/05/profiling-node-programs-on-mac-os-x/)帮助您进一步完成这项工作。

您还可以使用[node-webkit-agent](https://github.com/c4milo/node-webkit-agent)，它使用 webkit 开发人员工具来显示分析器结果。你也可以看看[我的叉子](https://github.com/alfred-nsh/node-webkit-agent)加点糖。

如果这不起作用，您可以尝试[使用 dtrace 进行分析](http://blog.nodejs.org/2012/04/25/profiling-node-js/)（仅适用于 SmartOS 等基于 illumos 的系统）。

# javascript - 是否可以像在 Highcharts 中一样在 NVD3 图表中设置缩放选项？

> ID：13196545
> 
> 赞同：8
> 
> 时间：2012-11-02T13:49:36.177
> 
> 标签：javascript, d3.js, nvd3.js

我最近开始使用 NVD3 图表并且喜欢像 Highcharts 这样的缩放选项。可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-09T22:50:03.913

有一个“带取景器的折线图”示例使用`nv.models.lineWithFocusChart()`. 此图表类型在主图表下方显示一个额外的“迷你地图”，您可以使用它来缩放和平移图表：

请参阅：[带取景器的折线图](http://nvd3.org/examples/lineWithFocus.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-09T11:14:56.523

您可以将此功能应用于您的 nvd3 图表。它不会像在 Highcharts 中那样产生一个可拖动的框来帮助缩放，但它允许通过鼠标滚动进行缩放，如下所示：[pan+zoom example](http://bl.ocks.org/mbostock/3892919)。您必须从 nvd3 中删除过渡/延迟以实现平滑缩放。现在，您可能必须通过更改 nvd3 源文件手动执行此操作。[这里](https://stackoverflow.com/questions/21067632/how-to-remove-nvd3-chart-resize-update-delay)有一个讨论。

这是一个[jsfiddle](http://jsfiddle.net/cqNkB/)。

```
function addZoom(options) {
// scaleExtent
var scaleExtent = 10;

// parameters
var yAxis       = options.yAxis;
var xAxis       = options.xAxis;
var xDomain     = options.xDomain || xAxis.scale().domain;
var yDomain     = options.yDomain || yAxis.scale().domain;
var redraw      = options.redraw;
var svg         = options.svg;
var discrete    = options.discrete;

// scales
var xScale = xAxis.scale();
var yScale = yAxis.scale();

// min/max boundaries
var x_boundary = xScale.domain().slice();
var y_boundary = yScale.domain().slice();

// create d3 zoom handler
var d3zoom = d3.behavior.zoom();

// fix domain
function fixDomain(domain, boundary) {
    if (discrete) {
        domain[0] = parseInt(domain[0]);
        domain[1] = parseInt(domain[1]);
    }
    domain[0] = Math.min(Math.max(domain[0], boundary[0]), boundary[1] - boundary[1]/scaleExtent);
    domain[1] = Math.max(boundary[0] + boundary[1]/scaleExtent, Math.min(domain[1], boundary[1]));
    return domain;
};

// zoom event handler
function zoomed() {
    yDomain(fixDomain(yScale.domain(), y_boundary));
    xDomain(fixDomain(xScale.domain(), x_boundary));
    redraw();
};

// zoom event handler
function unzoomed() {
    xDomain(x_boundary);
    yDomain(y_boundary);
    redraw();
    d3zoom.scale(1);
    d3zoom.translate([0,0]);
};

// initialize wrapper
d3zoom.x(xScale)
      .y(yScale)
      .scaleExtent([1, scaleExtent])
      .on('zoom', zoomed);

// add handler
svg.call(d3zoom).on('dblclick.zoom', unzoomed);
};

// here chart is your nvd3 model
addZoom({
   xAxis  : chart.xAxis,
   yAxis  : chart.yAxis,
   yDomain: chart.yDomain,
   xDomain: chart.xDomain,
   redraw : function() { chart.update() },
   svg    : svg
}); 
```

# php - 使用 PHP 缩小 CSS 和 JavaScript 文件

> ID：13196548
> 
> 赞同：0
> 
> 时间：2012-11-02T13:49:47.103
> 
> 标签：php, javascript, html, css, minify

> **可能重复：**
> [PHP 自动缩小。有没有？](https://stackoverflow.com/questions/6767223/php-auto-minify-is-there-any)

我正在使用 PHP 缩小（[http://code.google.com/p/minify/](http://code.google.com/p/minify/)）

我必须去我的网页，创建网址，点击上传，将新压缩文件的链接复制到我的 PHP 文件中，如下所述：[http ://www.mrclay.org/2008/09/19/minify- 21-on-mrclayorg/](http://www.mrclay.org/2008/09/19/minify-21-on-mrclayorg/)

这很好用，但是如何实现自动化呢？是否有一个 PHP 类或者我可以使用 minify 中已经包含的 PHP 类之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:15:32.000

我认为你真的有两个主要选择。

1.  使用 cURL 调用 google 代码压缩器。[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)
2.  使用可以在本地运行的其他压缩程序。尝试： http: [//developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/)（需要 Java 运行时） [http://www.crockford.com/javascript/jsmin.html](http://www.crockford.com/javascript/jsmin.html)（仅限 Windows）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:16:39.753

您可以使用 CURL 编写一个包装器，将您的文件发送到服务器，获取返回的文本并将其输出到客户端。

但是请注意，它会大大降低您的服务器速度（每次有人要求它时它都会缩小代码）。所以你需要一个缓存机制来做一次。

# clearcase - 如何重命名成员基线？这是可接受的做法吗？

> ID：13196549
> 
> 赞同：3
> 
> 时间：2012-11-02T13:49:46.457
> 
> 标签：clearcase, clearcase-ucm, cleartool

我已经通过 cleartool 为组件应用了基线。（我们使用clearcase UCM）。

我错误地输入了错误的基线名称，我无法应用另一个基线名称，因为它说没有进行任何更改。

如何在 UCM 中重命名基线名称？（我通过 GUI 尝试但没有找到方法）。

如果可以使用 cleartool rmname，有人可以举个例子吗？我没找到

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T14:19:51.727

如“[重命名基线不会更改标签类型名称](http://www-01.ibm.com/support/docview.wss?uid=swg21251401)”中所述，您可以通过 CLI 重命名基线）但您也需要重命名关联的 lbtype，对于 ClearCase 7.0 及之前的版本（7.1 和 8，您可以只重命名基线，它应该照顾 lbtype。如果没有，请参见下文）。

```
cleartool rename baseline:<old baseline name>@\<component vob tag> baseline:<new baseline name>@\<component vob tag> 
```

通过执行以下操作检查 lbtype 是否已重命名：
`cleartool descr -l baseline:<new baseline name>@\<component vob tag>`。

> `lbtype`当基线被重命名时，ClearCase 不会自动重命名 ，因为在`lbtype`使用该基线附加到流的每个视图中都将 用作版本选择器（如 中所示`[IBM technote swg1IC41518][2]`）。
> 如果 UCM 基线 lbtype 也被重命名，则必须为`cleartool chstream -gen stream:<stream@pvob>`使用此基线的每个流运行“ ”。
> 然后有必要`cleartool setcs -stream`在与流关联的每个视图中运行“”。
> 由于无法保证重命名 UCM lbtype 的系统可以使用每个视图，因此无法自动执行此操作。

```
 cleartool rename lbtype:<old baseline name>@\<component vob tag> lbtype:<new baseline name>@\<component vob tag> 
```

* * *

简而言之，重命名 CC7.0 及之前的基线是可能的，但并非易事：它是一个 UCM 对象，它关联（通过超链接）到用于在所有已更改的元素上创建标签的 lbtype（增量基线），或组件的所有元素（甚至那些自上一个基线以来没有改变的元素：完整基线，请参阅“ [Clearcase UCM 中完整基线和增量基线有什么区别？](https://stackoverflow.com/questions/9696598/what-is-the-difference-between-full-baseline-and-incremental-baseline-in-clearca/9696988#9696988) ”）

您需要同时重命名（基线和`lbtype`）。

* * *

这是一种可接受的做法，因为它的*内容*不会改变。
但是，您需要在发布管理过程中传播和传达新的基线名称。

# android - 如何为新片段重用片段的视图

> ID：13196550
> 
> 赞同：1
> 
> 时间：2012-11-02T13:49:48.483
> 
> 标签：android, view, fragment, reusability

我需要用不同的视图更新片段。我发现，要强制 Fragment::onCreateView() 方法调用（向用户显示我的更新），我只能使用 FragmentTransaction 的方法 replace(, )。如果我每次调用 FragmentTransaction::replace() 时创建一个新的 Fragment 和一个用于从 onCreateView() 方法返回它的新视图，效果会很好。但我希望将一些观点留在记忆中。如何重用我的视图？

问题是，如果我在一个新片段上使用我的视图（附加到已经替换的片段），我会得到一个异常：“java.lang.IllegalStateException：指定的孩子已经有一个父母。你必须调用 removeView()首先是孩子的父母。”

因此，我尝试通过调用 FragmentTransaction.detach() 或 FragmentTransaction.remove() 将视图与片段分离，以导致从活动中删除片段并从已替换的片段中删除我的视图，但这无济于事。

有谁知道如何强制片段删除其子视图（在 onCreateView() 中返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:15:59.197

您最好将视图包含在 Fragment 中，以便 Fragment 本身适当地处理它。要么让无视图片段向该片段发送数据以更新视图，要么使用参数构建视图。它更清洁，从长远来看，更易于维护。

查看[添加没有 UI 的片段](http://developer.android.com/guide/components/fragments.html)部分。

# macos - 如何使用 applescript 最小化 MOG

> ID：13196553
> 
> 赞同：-1
> 
> 时间：2012-11-02T13:49:56.977
> 
> 标签：macos, applescript, mog

我正在研究 AppleScript 以在特定窗口的最小化和最大化之间切换。我让它工作得很好。但是我遇到了一个应用程序的特定问题，适用于 Mac 的 MOG 应用程序似乎没有用于`miniaturize`、`collapse`或的变量`minimize`。

我知道我可以使用单击来切换窗口，但我更喜欢使用 API 的解决方案。

这是仅适用于 MOG 的 applescript：

```
tell application "MOG"
    set (miniaturized of windows whose miniaturizable is true) to true
end tell 
```

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:33:12.337

并非每个应用程序都允许通过 AppleScript 使窗口小型化，即使应用程序是可编写脚本的。找出应用程序窗口属性的一种方法：

```
tell application "MOG"
    get properties of window 1
end tell 
```

您还可以打开 MOG 字典并找出您可以编写的脚本。按 cmd-shift-o 将打开一个窗口，列出所有应用程序的脚本字典。

# php - 如何只允许执行指定的功能并禁用所有其他功能？

> ID：13196559
> 
> 赞同：1
> 
> 时间：2012-11-02T13:50:20.483
> 
> 标签：php

我计划允许某些（注册和审查的）用户发布 php 代码和/或上传我将在沙盒环境中执行的 php 文件。

我知道这听起来多么糟糕，以及我可能打开的安全漏洞。

我还将做一些事情，比如设置严格的、短的执行时间、每天最多运行一个脚本、以非特权用户身份运行网络服务器用户等等。

我知道我可以禁止使用 php.ini 中的某些功能，但我想知道是否可以禁用所有功能（不将每个功能都放在 php.ini 中）但允许使用我拥有的某些功能审查并认为是安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:56:03.617

你最好的选择是使用[Suhosin](http://www.hardened-php.net/suhosin/index.html)扩展，它允许你将你想要允许的功能**列入白名单。**

请参阅 Suhosin 的 suhosin.executor.func.whitelist[配置](http://www.hardened-php.net/suhosin/configuration.html#suhosin.executor.func.whitelist)选项。

> **suhosin.executor.func.whitelist**
> 
> 允许调用的函数的逗号分隔白名单。如果白名单为空，则评估黑名单，否则调用不在白名单中的函数将终止脚本并被记录。

# java - 从对象中删除 hashmap 键

> ID：13196565
> 
> 赞同：1
> 
> 时间：2012-11-02T13:50:32.433
> 
> 标签：java

```
HashMap<String, String> user= new HashMap<String, String>();
user.put("userID","1");
user.put("useValue", "false"); 
```

我有一个带有这些的 hashMap`keys`和`values`.

```
Patient filterList = new Patient();
filterList.setUser(user); 
```

现在我创建另一个患者类实例。

```
Patient addRequest = new Patient();
user.remove("useValue");
addRequest.setUser(user); 
```

为什么它会从两个对象中删除？尽管我仅在 filterList 对象完全形成后才删除密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:51:27.693

两个对象都`(filterList.setUser(user);)`指向 `addRequest.setUser(user);` 同一个对象，因此更改对同一个对象有效。

`setUser(...)`并没有真正创建副本。它只是设置对用户对象的引用。

如果您仔细观察，在这两种情况下，引用都是用户并指向在`HashMap<String, String> user= new HashMap<String, String>();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:19:05.543

您的示例中只有一个 hashmap 对象。

```
HashMap<String, String> user= new HashMap<String, String>(); 
```

对象 filterList 和 addRequest 都依赖于单个用户对象。因此，如果您对用户对象进行任何更改，它将同时影响 filterList 和 addRequest。

如果您不希望更改同时反映在 filterList 和 addRequest 中，请创建两个 hashmap 对象

```
 HashMap<String, String> user1= new HashMap<String, String>();
    HashMap<String, String> user2 = new HashMap<String, String>();
    user1.put("userID","1");
    user1.put("useValue", "a");
    user2 =  (HashMap<String, String>)user1.clone();
    user1.remove("userID");
    System.out.println(user2.get("userID"));
    System.out.println(user1.get("userID")); 
```

希望这可以帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:52:54.923

当你`map`在课堂上设置时，你就是`not creating a new copy`你的地图。而是`copy of reference`在该类`pointing to the same` `HashMap`对象中创建 a。因此，您对`Map`using any reference 所做的任何更改都将反映在`all the references`.

所以，所有的引用 - `user`，`filterList.setUser`和中的一个`addRequest.setUser`都指向同一个`HashMap`对象。

# google-bigquery - BigQuery 中记录类型与展平表的查询性能

> ID：13196568
> 
> 赞同：3
> 
> 时间：2012-11-02T13:50:44.040
> 
> 标签：google-bigquery

我有一个带有 JSON 格式的“订单”和“订单行”的表，将它作为 JSON 存储在[BigQuery](https://en.wikipedia.org/wiki/BigQuery)中很简单。我可以运行一个进程将文件展平为行，但这是一种负担，并且会使 BigQUery 表更大。

BigQuery 的最佳性能结构是什么？假设我对总和或产品以及订单行中的销售有疑问。

记录列中“记录”（或“订单行”）数量的最佳实践是什么？它可以包含数千个还是针对少数几个？假设我会像在基于[MongoDB](http://en.wikipedia.org/wiki/MongoDB)文档的数据库中一样查询它。

这将帮助我规划正确的架构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:55:38.583

BigQuery 的列式架构旨在以高性能方式处理嵌套和重复的字段，并且通常可以像展平这些记录一样快地返回查询结果。事实上，在某些情况下，（取决于您的数据和您正在运行的查询类型）使用已经嵌套的记录实际上可以让您避免附加额外步骤的子查询。

简短的回答：不要担心扁平化，将数据保持在嵌套结构中，查询性能通常是相同的。

但是，关于您的第二个问题：您的记录限制将取决于您可以在单个记录中存储多少数据。目前 BigQuery 的[每行最大值为 100MB](https://cloud.google.com/bigquery/quotas#load_jobs)。一条记录中可以有很多很多重复的字段，但它们需要符合这个限制。

# php - 调用 result_array() 会破坏表格..？

> ID：13196569
> 
> 赞同：1
> 
> 时间：2012-11-02T13:50:49.140
> 
> 标签：php, codeigniter

我希望访问数据库一次，然后返回一个 MySQL 资源和一个数组。我的控制器中有以下代码来执行此操作：

```
$result = $this->data->my_method();

$data['result_resource'] = $result;
$data['result_array']    = $result->result_array(); 
```

在我看来，我正在调用以下内容：

```
$this->table->generate($result_resource); 
```

当该`$data['result_array']`行被注释掉时，表格按预期工作（即显示列标题），但是当该`$data['result_array']`行*未被*注释掉时，两者都将`result_resource`AND`result_array`转向数组。这里发生了什么，我该如何避免它？

$data 数组以典型的 CI 方式传递给视图：

`$this->load->view('view.php', $data);`

运行该方法两次确实可以解决问题，但我不想这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:43:58.833

关于 result_array() 被“消耗”的这些东西是无稽之谈 - 它只是一个根本没有运行的对象。你可以一遍又一遍地使用它

我将您的代码放入控制器中 - 包括 table->generate() - 一切对我来说都很好。

$result 是包含连接资源等的基础对象，实际上不是您想要使用的。它之所以有效，是因为表库已设置好，因此如果您通过它，它会为您查找 result_array()，但这并不是真正的标准方式。

我认为您的代码中还有其他一些您已经看过的东西导致了麻烦。尝试摆脱 $result 代码，然后运行：

```
$result = $this->data->my_method();
$data['result_array']    = $result->result_array();
var_dump($data['result_array']);
echo $this->table->generate($data['result_array']); 
```

并检查一切看起来正常。我怀疑你会在某个时候做面部护理:-)

# java - 需要帮助理解 swing 代码中的意外输出

> ID：13196570
> 
> 赞同：4
> 
> 时间：2012-11-02T13:50:50.280
> 
> 标签：java, swing, timer, layout-manager, graphics2d

我开发了一个应用程序来产生以下输出：- ![在此处输入图像描述](../Images/cb1be6e4aea84bb7dd05fc7413dfdc81.png)

我覆盖了 JPanel 的 getPrefferredSize，但为什么我在更改大小时没有观察到输出的任何变化。即使我将大小设置为 0,0，图表也根本没有翻译，我得到的输出与上图相同。

这是我的完整代码：-

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.geom.AffineTransform;
import java.awt.geom.Ellipse2D;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Skeleton extends JFrame{
Skeleton()
{
super("Donut");
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setSize(400,400);

add(new Board());
setVisible(true);
}
public static void main(String args[])
{
SwingUtilities.invokeLater(new Runnable(){public void run(){new Skeleton();}});
}
}

class Board extends JPanel
{
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    Graphics2D g2=(Graphics2D)g;
    RenderingHints rh=new RenderingHints(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    //the following statement has no noticeable effect.
    rh.put(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    g2.setRenderingHints(rh);
    Ellipse2D e=new Ellipse2D.Double(0, 0, 80, 130);
    g2.setStroke(new BasicStroke(1));
    g2.setColor(Color.RED);
    for(int deg=0;deg<360;deg+=5)
    {
        AffineTransform at=AffineTransform.getTranslateInstance(getWidth()/2,getHeight()/2);
        at.rotate(Math.toRadians(deg));
        //returns a new Shape object after it has been undergone the 'at' transformation.
        g2.draw(at.createTransformedShape(e));
    }
}
public Dimension getPreferredSize()
{
    return new Dimension(100,100);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T14:03:21.240

因为你的布局管理器。默认情况下`BorderLayout`会忽略首选大小，但会填充所有可用空间。使用 eg`FlowLayout`和 yu 会看到区别。

# sql - 列“玛丽”不存在

> ID：13196572
> 
> 赞同：10
> 
> 时间：2012-11-02T13:51:03.240
> 
> 标签：sql, postgresql, string-constant

我在这里做一个简单的查询，它返回“玛丽”列不存在：

```
SELECT  telephone.telephonenumber as tel
FROM    person, telephone
WHERE   person.idperson = telephone.idperson
AND person.personname = ‘Mary’; 
```

有人可以解释会发生什么吗？我不希望 Mary 作为一列，而是作为一个值。

在此先感谢，加布里埃尔

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-02T13:52:25.707

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:53:17.860

Make sure that you are quoting your string correctly.

From your snippet, I'd say that's the problem here since you're using something else than simple single quotes.

# javascript - 隐藏没有闪光的元素

> ID：13196573
> 
> 赞同：0
> 
> 时间：2012-11-02T13:51:06.910
> 
> 标签：javascript, jquery, css

我必须隐藏一些`<table>`包含特定单词的行。我正在使用`:contains`jQuery 中的选择器并使用 `.hide()`.

问题是它会导致令人不快的闪光在它们隐藏之前暂时显示这些行。

是否有可能减少闪烁，或将某些事件绑定到文档，该文档将在创建时分析每个 DOM 元素，如果满足某些要求则不渲染它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:56:24.410

大多数模板引擎会做你想做的事，允许你添加一些逻辑来决定是否首先创建一个元素。

另一种选择是从一开始就隐藏表格（在 CSS 中`display:none`），运行 jQuery 以查找要隐藏（甚至删除）的行，然后才使用 jQuery 使表格可见（使用`.show()`）。这种方法的缺点是，如果您的访问者没有启用 JavaScript，它不会优雅地降级。他们永远看不到桌子！

当然，如果您没有启用 JavaScript，您也无法在客户端隐藏行。您必须在服务器端处理它。

# java - 无法从 webdriver 中的特定行获取列数据

> ID：13196576
> 
> 赞同：1
> 
> 时间：2012-11-02T13:51:18.767
> 
> 标签：java, selenium, selenium-webdriver, html-table

仅当第 1 列和第 7 列的值在表的特定行中匹配时，我才需要选择列值。行数是动态的，有 8 列。

这是我的代码：

```
 WebElement session_table = driver.findElement(By.id("sessions_table"));
    List<WebElement> session_row = driver.findElements(By.tagName("tr"));
    System.out.println(session_row.get(2).findElement(By.xpath("//td[2]")).getText());
    Iterator<WebElement> i= session_row.iterator();
    while(i.hasNext())
    {
        WebElement srow= i.next();
        List<WebElement> session_data = srow.findElements(By.xpath("//td"));
        stime = session_data.get(0).getText();
    coach_name =  session_data.get(6).getText();
        System.out.println( stime + "    " + coach_name);
       if((stime == "11/02/12 07:30 AM") && (coach_name == "Test Coach1")  )
        {
            driver.findElement(By.xpath("(//a[contains(text(),'0/4')])")).click();

        }

    } 
```

但是变量 stime 和 coach_name 被分配了第一行的值。它不会随着迭代而改变。例如，如果第一行的值为“07:00 AM”且教练名称为 Test，并且有 80 行，则它会打印“07:00 AM Test”80 次。但我需要读取每一行的值。注意：我在 java 中使用 selenium webdriver

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:54:41.067

为了比较`String`对象，您需要使用`equals`or`compareTo`方法，而不是`==`. 与`==`您比较对象引用。

# php - 需要稍微改变表格的布局

> ID：13196583
> 
> 赞同：1
> 
> 时间：2012-11-02T13:51:36.813
> 
> 标签：php, html, mysql, css

我对如何在我的 php 代码中显示正确的布局有疑问：

好的，我想在表格中显示单个评估中的所有问题。现在它显示如下：

```
Question No.  Question                        Answer        Marks Per Answer      Total Marks
1             What is 5+5?                    B             (text input)          3
2             Name three maneuvers you will   ECB           (text input)          7
              undergo in a driving test 
```

我想更改表格的显示，使其如下所示：

```
Question No.  Question                        Answer        Marks Per Answer      Total Marks
1             What is 5+5?                    B             (text input)          3
2             Name three maneuvers you will   E             (text input)                   
              undergo in a driving test       C             (text input)          7
                                              B             (text input) 
```

1.  正如您从新显示器中看到的那样。我希望属于一个问题的每个答案都显示在他们自己的行中，而不是所有答案都显示在一行中，这就是它目前正在做的事情。
2.  我遇到的另一个问题是它只为每个问题显示一个文本输入。相反，它应该为问题中的每个答案显示一个文本输入。

我的问题是，如何实现第 1 点和第 2 点才能匹配新布局？

以下是当前显示的代码：

```
$query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, GROUP_CONCAT(DISTINCT Answer SEPARATOR '') AS Answer, q.QuestionMarks 
FROM Session s 
INNER JOIN Question q ON s.SessionId = q.SessionId
JOIN Answer an ON q.QuestionId = an.QuestionId AND an.SessionId = q.SessionId
WHERE s.SessionName = ?
GROUP BY an.SessionId, an.QuestionId
";

// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s", $assessment);
// execute query
$stmt->execute(); 

// This will hold the search results
$searchQuestionId = array();
$searchQuestionContent = array();
$searchAnswer = array();
$searchMarks = array();

// Fetch the results into an array

// get result and assign variables (prefix with db)
$stmt->bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionContent, $dbAnswer, $dbQuestionMarks);
while ($stmt->fetch()) {
$searchQuestionId[] = $dbQuestionId;
$searchQuestionContent[] = $dbQuestionContent;
$searchAnswer[] = $dbAnswer;
$searchMarks[] = $dbQuestionMarks;
}   

?>      

</head>

<body>

<form id="QandA" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">

<?php 

echo "<table border='1' id='markstbl'>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
<th class='answerth'>Answer</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='noofmarksth'>Total Marks</th>
</tr>\n";
foreach ($searchQuestionContent as $key=>$question) {
echo '<tr class="questiontd">'.PHP_EOL;
echo '<td class="optiontypetd">'.htmlspecialchars($searchQuestionId[$key]).'</td>' . PHP_EOL;
echo '<td>'.htmlspecialchars($question).'</td>' . PHP_EOL;
echo '<td class="answertd">'.htmlspecialchars($searchAnswer[$key]).'</td>' . PHP_EOL; 
echo '<td class="answermarkstd"><input class="individualMarks" name="answerMarks[]" id="individualtext" type="text" "/></td>' . PHP_EOL;
echo '<td class="noofmarkstd">'.htmlspecialchars($searchMarks[$key]).'</td>' . PHP_EOL;
}
echo "</table>" . PHP_EOL;

?>

</form>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:03:24.437

什么是E、C和B？它们是问题 2 的答案吗？如果是这样，我假设 $searchAnswer 包含它们（E，C，B）。所以我认为你应该使用 foreach 循环。

```
foreach($searchAnswer as $key){
echo "$key<br />";
} 
```

或者

```
for($i=0;$i<count($searchAnswer);$i++){
echo "$searchAnswer[$i]<br />";
} 
```

祝你好运。

# perl - CVS 相当于 Accurev 中的 $id:$

> ID：13196584
> 
> 赞同：1
> 
> 时间：2012-11-02T13:51:40.527
> 
> 标签：perl, version-control, accurev

我正在 Accurev 中寻找与 $id:$ 等效的 CVS。

在你开始谈论编译时脚本之前——我的主要警告是我的很多东西都在 Perl 中——所以我不能做任何正常的“编译时技巧”——因为真的没有太多“编译时”的东西。

我真的不想要求外部文件来定义这些东西，就好像（上帝保佑）外部定义文件与实际脚本不同步，等等......

我知道我总是可以对脚本文件进行某种编译时预处理器（以重写它们） - 但如果有*更清洁*或更好集成的方式（如“$id:$”我会很感激任何人想法）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:15:53.060

在我们了解更多细节之前，您是否看过 AccuRev 提供的预保持触发器示例 addheader.pl？

您可以在 /AccuRev/examples/addheader.pl 位置找到该示例。

干杯，
〜詹姆斯

# css - 如何在固定菜单上创建透明的当前状态缺口？

> ID：13196588
> 
> 赞同：4
> 
> 时间：2012-11-02T13:51:48.000
> 
> 标签：css, menu, z-index, css-position

我知道我们可以使用与背景颜色相同颜色的三角形，以便在导航的当前状态下放置一个缺口。但是，我在一个固定位置的 div 中创建了一个导航菜单，该菜单具有高 z-index 和背景颜色设置为 0.7 的不透明度，因此整个导航位于页面内容的顶部，但您可以向下滚动页面时看穿它。向下滚动页面时，是否可以创建一个“切开”不透明 div 以显示其下方内容的当前状态缺口？

作为参考，我正在尝试复制您在 iOS 应用商店中获得的体验。不幸的是，该图像已被删除，跟随该图像的链接给出了一个 404 页面。您可以检查修订历史以查看图像的原始 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:06:40.823

有很多方法可以做到这一点，这是我的看法：

这是我将使用的布局。`<nav>`固定在顶部，下方有一个凹`<div>`口。内容位于这两个内容的下方，其顶部填充等于导航和缺口的高度。

```
+--------------------------------+--+
|                                |  |
|               nav (fixed)      |  |   <-- the content is below these fixeds,
|                                |  |       which have a higher z-index
+--------------------------------+  |
|              notch (fixed)     |  |
+--------------------------------+  |
|                                   |
|                                   |
|                                   |
|              content              |
|              section              |
| (padding-top = nav+notch heights) |
|                                   |
|                                   |
+-----------------------------------+ 
```

我将假设您想要一个流畅的布局，所以我选择使用 FlexBox (http://www.w3.org/TR/css3-flexbox/) 来保持缺口在浏览器调整大小时应位于的位置。如果你有一个固定的布局，还有一些更直接的解决方案，它们不需要 FlexBox 或计算应该在灵活容器中放置凹口的位置。

由于其他部分应该相当简单，这里是缺口的细分`<div>`

```
+---------------------------------------------------+
|                 |       |       |                 |
|     spacing     | notch | notch |     spacing     |
|   (flexible)    | left  | right |    (flexible)   |
|                 |       |       |                 |
+---------------------------------------------------+ 
```

两个外部`<div>`s 是弯曲的，并且与`background-color`相同`<nav>`。然后，两个内部凹口使用渐变来创建三角形。

```
background: -webkit-linear-gradient(
    top left,
    rgba(145, 145, 145, 1) 0%,
    rgba(145, 145, 145, 1) 50%,
    transparent 50%,
    transparent 100%
); 
```

通过从左上角和右上角开始渐变，`<div>`s 在对角线上填充到一半。

剩下的只是确定当您单击导航链接时应该放置凹口的位置。`<div>`在确定用户点击的位置之后，我通过在灵活的 s 中添加和删除宽度来做到这一点。需要一些时间来了解 FlexBox 在从正在弯曲的元素中添加和减去宽度时的工作原理，但您可以检查代码以查看这一点。

我在 Chrome 中使用 -webkit- 前缀完成了所有这些操作，因此请在 Chrome 或 Safari 中运行此 JSFiddle：http: [//jsfiddle.net/dwJbq/](http://jsfiddle.net/dwJbq/)

As I stated previously, there are several other ways this could be done and it would also be much easier if not using a fluid layout. Another idea you could try is to have a notch for every nav link, and then showing/hiding the notch underneath the link that was clicked. This doesn't require you to calculate anything, rather just change the backgrounds of the notches.

Here is an example of how that could be done: [http://jsfiddle.net/V4K6K/1/](http://jsfiddle.net/V4K6K/1/)

# c++ - 通过 Cin 获取十六进制

> ID：13196589
> 
> 赞同：18
> 
> 时间：2012-11-02T13:51:49.873
> 
> 标签：c++, hex

为什么这段代码不起作用？

```
int x;
cin >> x; 
```

通过输入`0x1a`I get that`x == 0`而不是`26`。

为什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-02T13:54:47.880

我相信为了使用十六进制，您需要执行以下操作：

```
cin >> hex >> x;
cout << hex << x; 
```

您还可以用 dec 和 oct 等替换 hex。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-12-11T16:51:16.497

实际上，您可以强制**`>>`**操作员获取并正确解释前缀`0`和`0x`. 您所要做的就是删除以下的默认设置`std::cin`：

```
std::cin.unsetf(std::ios::dec);
std::cin.unsetf(std::ios::hex);
std::cin.unsetf(std::ios::oct); 
```

现在，当您输入 0x1a 时，您将收到 26。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T13:55:56.357

考虑`<<`和`>>`使用时`std::cout/std::cin`这样：

`std::cout << x`*表示从中*获取值 *`x`*

 *`std::cin >> x`意味着将值*放入* `x`

注意操作员指向的方向。这应该给您一个提示，了解他们在使用这些功能时会做什么。

结果是 0 而不是 26 的原因是因为`std::cin`将解析输入中的所有非数字字符。毕竟，`x`是一个int，它不会识别`0x`为十六进制数的一部分。如果输入是`9x2`（结果只是`9`），它将具有相同的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T13:55:35.540

您的代码应为：

```
int x;
cin >> hex >> x; 
```

默认情况下`cin`，任何读入的数字都是十进制的。显然，`0x1a`不是有效的小数，因此无法进行转换。为了让它工作，我们必须使用*流修饰符* `hex`，它提示`cin`期望从十六进制而不是十进制转换数字。

在这种`0x`情况下，前缀是可选的，因此输入`10`将被读取并存储为十进制 16。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-19T19:00:12.823

```
#include<iostream>
using namespace std;

int main()
{
    int data[16];
    cout << "enter the 16 hexadecimal numbers\n";
    for(int i = 0;i < 16;i++)
    {
        if(cin >> hex >> data[i])
            cout << "input worked\n";
        else{
            cin.clear();
            cout << "invalid input\n";
        }
    }
} 
```*

# gnuplot - 如何将 gnuplot 中的数据添加到现有文件而不覆盖所述文件的内容

> ID：13196592
> 
> 赞同：11
> 
> 时间：2012-11-02T13:52:04.817
> 
> 标签：gnuplot

我有一些 gnuplot 代码如下：

```
gnuplot> h=1
gnuplot> a=2
gnuplot> set print "additional numbers.txt"
gnuplot> print h,a
gnuplot> set print 
```

现在我想在不覆盖之前的条目的情况下向这个文件添加更多数据。我可以在 C 中完成，但我想将所有内容保存在 1 个可以通过 gnuplot 运行的脚本中

我希望你能帮忙。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T13:57:52.927

使用`append`标志：

```
set print "additional_numbers.txt" append 
```

# javascript - 如何将 onDomReady 添加到我的文档中？

> ID：13196596
> 
> 赞同：3
> 
> 时间：2012-11-02T13:52:15.483
> 
> 标签：javascript, jquery, slider

我的项目在这里：http: [//jsfiddle.net/2SYvR/2/](http://jsfiddle.net/2SYvR/2/) 问题是：如果我尝试在我的浏览器中使用常规文件运行它，则不会出现任何单词。但是，如果我将所有文件都放在 jsfiddle 中并将其设置为 onDomReady，它会突然起作用。那么如何将 onDomReady 添加到文档中呢？

编辑：

在 JSFiddle 中，您可以将框架设置为“onDomReady”，然后我的代码就可以工作了。但是当我将框架设置为 OnLoad 时，我的代码不再工作了......

编辑2：

我解决了我的问题。我用 jsfiddle.me/2SYvR/3/show 来检查它。事实证明，我的 javascripts 的顺序不正确。首先是 jQuery 库，然后是我的 js。不过感谢您的快速反应。

```
(function(){
    /// Hiermee kun je de lengte van je oefening bepalen.
    //var aantal = prompt("Tot hoever wil je oefenen? Geef een nummer op.");

    var aantal = $("#slider1").val();

    /// might as well store an array with each answer, could be improved
    /// by storing the question as well - so in the end you could give
    /// the user a summary.
    var antwoordenAnswers = [];
    var antwoordenPartituur = 0;  /// store the score count
    var antwoordVerwacht = null; /// keep a reference to the expected answer
    /// reformatted your arrays to better fit with SO layout ;)

    // all special characters: http://kompoos.nl/manuals/ascii/javascript-special-characters.html
    // \337 = ß
    // \374 = ü
        var vierdeNaamval = [
            "bis", "durch", "f\374r", "gegen",
            "ohne", "um", "entlang"
        ],
        derdeNaamval = [
            "aus", "bei", "mit", "nach", "seit",
            "von", "zu", "entgegen", "au\337er",
            "gegen\374ber", "an...vorbei"
        ],
        keuzevoorzetsel = [
            "an", "auf", "hinter", "neben", "in",
            "\374ber", "unter", "vor", "zwischen"
        ];

    /// added some translation vars for English people 
    /// out there (and to help me)
    var accusative = vierdeNaamval,
        dative = derdeNaamval,
        choicePreposition = keuzevoorzetsel;

    /// to aid with a random choice it's nice to work with arrays
    var opties = [vierdeNaamval, derdeNaamval, keuzevoorzetsel];
    var options = opties;

    /// ... then we can use a function like this to grab a random item
    var getRandomItem = function( a ){
        return a[Math.floor((a.length)*Math.random())];
    };

    /// handle writing the question, as stated 
    /// by @AvlinWong - don't use document.write()
    var vraagQuestion = function(){
        /// use our simple get random item from array function
        var a = getRandomItem( opties );
        /// set the expected answer
        if ( a === derdeNaamval ) {
            antwoordVerwacht = '3';
        }
        else if ( a === vierdeNaamval ) {
            antwoordVerwacht = '4';
        }
        else if ( a === keuzevoorzetsel ) {
            antwoordVerwacht = 'k';
        }
        /// choose a random question item from the list
        var b = getRandomItem( a );
        /// target the output element and change it's HTML
        document.getElementById('antwoord').innerHTML = b;
    };

    /// a simple function to better explain the act of updating the score
    /// in the GUI/HTML.
    var zettenPartituur = function( a ){
       document.getElementById('partituur').innerHTML = a;
    };

    /// clickOnTheButton --- hope the translation is right :)
    var klikOpDeKnop = function(e){
        /// because we are relying on pure javascript, different browsers
        /// have different event objects - srcElement for old IE, target
        /// for everything else...
        var a = e.target ? e.target : e.srcElement;
        var corrigeren = null;
        /// because each button has a unique id, we can do this
        switch ( a.id ) {
            case 'derde':
                corrigeren = ( antwoordVerwacht == '3' );
            break;
            case 'vierde':
                corrigeren = ( antwoordVerwacht == '4' );
            break;
            case 'keuze':
                corrigeren = ( antwoordVerwacht == 'k' );
            break;
        }
        /// if they were correct, tell them so and update score
        if ( corrigeren ) {
            //alert('good!');
            antwoordenPartituur++;  
            document.getElementById('goed').style.visibility="visible";
            document.getElementById('fout').style.visibility="hidden";
        }
        /// otherwise tell them not and downgrade score :(
        else {
           // alert('wrong!');
            antwoordenPartituur--;
            document.getElementById('goed').style.visibility="hidden";
            document.getElementById('fout').style.visibility="visible";

        }

        /// collect the answer
        antwoordenAnswers.push( corrigeren );
        /// output the score to the user
        zettenPartituur( antwoordenPartituur );
        /// because we are storing an array of answers it's easy
        /// to tell how many there have been by .length of the array
        //if ( antwoordenAnswers.length > 10 ) {
          if ( antwoordenPartituur >= aantal ) {    
            /// all done!
            alert("Hoera! Je bent klaar!! / You're done!!");
        } else {
            /// generate a new question
            vraagQuestion();
        }
    }
    /// using a simple window.onload will mean we know that we can
    /// start messing around with the HTML on the page. This could
    /// be improved using addEventListener/attachEvent but as this
    /// is your own app with bespoke code you don't need to worry.
    /// Unless you start using any plugins or third-party libraries.
    window.onload = function(){

        /// target the button wrapper in the HTML
        var wikkelWrapper = document.getElementById('buttons'),
            /// find all buttons within wrapper
            knoppenButtons = wikkelWrapper.getElementsByTagName('button'),
            i, l = knoppenButtons.length, a;

        /// step each button found and apply an event listener using the
        /// more accepted and improved addEventListener/attachEvent methods
        /// there are many reasons as to why these are better to use
        /// just search StackOverflow for reasons as to why :)
        for(i=0; i<l; i++){
            a = knoppenButtons[i];
            /// for all good browsers
            if ( a.addEventListener ) {
                a.addEventListener('click', klikOpDeKnop);
            }
            /// for good ol' Internet Explorer
            else if ( a.attachEvent ) {
                a.attachEvent('onclick', klikOpDeKnop);
            }
        };

        /// set the ball rolling / stelt u de bal aan het rollen
        /// first set the output of the score
        zettenPartituur(antwoordenPartituur);
        /// then set the first question
        vraagQuestion();

    }

})(); /// this construction can be confusing, it basically just creates
/// a new anonymous function and then executes it straight away. we are
/// using the anon function for it's scope so that we keep our variables
/// and methods separated from other code. 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-02T13:58:57.937

只需将您的代码放入：

```
window.onload = function() {
//code here
} 
```

# ruby-on-rails - 当用户访问特定控制器上的 show 操作时，使用 params 条件显示 link_to

> ID：13196599
> 
> 赞同：0
> 
> 时间：2012-11-02T13:52:24.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

如果查看“post_controller/show”，如何设置条件。

如果用户正在查看帖子，我希望在标题导航上显示一个“编辑”按钮，而无需设置不同的布局并让它仅依赖于现有`_header.html.erb`的导航。

```
# Header navigation partial _header.html.erb
<%= link_to 'Edit post', edit_post_path(@post) %> 
```

我知道我可以采用类似的参数和设置子句：

```
<% if params[:id] %>
  <%= link_to 'Edit post', edit_post_path(@post) %>
<% end %> 
```

`undefined method 'edit_post'`上面的问题是，如果您访问与 Post 模型无关的不同路由，它将导致异常。

如果我可以摆脱许多布局和局部，那会很棒，但如果建议我应该在这种情况下使用布局和局部，那么我会的。

非常感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:56:46.917

```
# Header navigation partial _header.html.erb
<%= yield(:edit_link) %>

#In your post_controller/show view :
<% content_for :edit_link, link_to('Edit post', edit_post_path(@post)) %> 
```

就是这样。您可以更改`:edit_link`任何地方的内容，适用于不同的模型等......

# ios - GPUImageMovieWriter 在assetWriterPixelBufferInput 上崩溃

> ID：13196600
> 
> 赞同：1
> 
> 时间：2012-11-02T13:52:28.703
> 
> 标签：ios, crash, gpuimage

更新：我现在知道我正在向已释放的实例发送消息，我想我已经正确设置了我的项目，但开始怀疑这一点......

我已经阅读了布拉德的文档并将我的项目设置为无弧，这可能与这种情况有关。我已将链接器标志 -fobjc-arc 并将 GPUImage 和我的目标添加到 ios 4.3。

任何有同样问题的人发现他/她做错了什么？？？？

几天来我一直在寻找答案，但我无法修复它并且已经没有想法了。

每当我尝试在`GPUImageMovieWriter`我的应用程序崩溃 (EXC_BADACCESS) 上录制电影时：

```
CVPixelBufferPoolCreatePixelBuffer (NULL, [assetWriterPixelBufferInput pixelBufferPool], &renderTarget); 
```

完整代码：

```
 NSString *pathToMovie = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/file.mov"];
    unlink([pathToMovie UTF8String]); // If a file already exists, AVAssetWriter won't let you record new frames, so delete the old movie
    NSURL *movieURL = [NSURL fileURLWithPath:pathToMovie];

    GPUImageSepiaFilter *sepiaFilter = [[GPUImageSepiaFilter alloc] init];
    [videoCamera addTarget:sepiaFilter];

    movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(640.0, 480.0)];
    movieWriter.encodingLiveVideo = YES;

    [sepiaFilter addTarget:movieWriter];

    movieWriter.shouldPassthroughAudio = YES;
    videoCamera.audioEncodingTarget = movieWriter;

    [movieWriter startRecording]; 
```

欢迎蚂蚁帮忙或指点！

# objective-c - 在目标 c 中是否可以定义多个值？

> ID：13196602
> 
> 赞同：-3
> 
> 时间：2012-11-02T13:52:33.447
> 
> 标签：objective-c

要定义多个值，例如在目标 c 中定义数字 3,4？它是随机选择的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:55:52.980

尝试这个：

```
int r = 3 + arc4random() % 2; 
```

`arc4random() % 2`随机返回 0 或 1。添加 3 将使其在 3 和 4 之间随机选择。

# oracle - 如何在 Oracle SE1 11.2 rds 实例中创建多个数据库？

> ID：13196604
> 
> 赞同：0
> 
> 时间：2012-11-02T13:52:40.170
> 
> 标签：oracle, amazon-rds

我有一个 Oracle SE1 11.2 实例正在运行。它有一个数据库。如何创建另一个数据库。到目前为止，我一直在使用 Mysql，并且可以使用它创建尽可能多的数据库，但是在尝试使用 Oracle 时会出现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T15:09:56.900

Oracle 在术语数据库、实例和模式方面与 MySQL 不同。

对于 Oracle，每个实例只有一个数据库，但每个数据库可以有多个模式。

RDS 仅提供 1 个实例（数据库），如果您想要多个实例，您可以通过启动一个新实例为每个实例付费。但是，每个实例都可以支持多个模式。在 RDS 上，您最多可以为 Oracle 创建 30 个模式。（请参阅[RDS 常见问题解答](http://aws.amazon.com/rds/faqs/#2)）。

因为每个用户 = 一个模式，并且每个模式都有自己的表，独立于其他模式，您可以通过利用模式模型拥有多达 30 个“数据库”。

# iphone - iPhone 中的 Google TTS 出现问题？

> ID：13196607
> 
> 赞同：0
> 
> 时间：2012-11-02T13:52:47.107
> 
> 标签：iphone, ios, avaudioplayer, text-to-speech

使用 Google TTS 在 iPhone 应用程序中开发，我已经发送了一些请求，然后我使用 AVAudioPlayer 获取要播放的音频数据。

我已发送更多单词的请求，然后数据为空。谷歌 TTS 只支持小词转换音频数据或更多，我想知道，请帮助我。

提前致谢

我试过这个：

```
NSString *linkTTS = [NSString stringWithFormat:@"http://translate.google.com/translate_tts?tl=en&q=I+am+new+to+IPhone+development+I+am+working+on+Audio+player+i+have+to+show+the+current+time+and+estimated+time"];
    NSData *dataTTS = [NSData dataWithContentsOfURL:[NSURL URLWithString:linkTTS]];
    NSLog(@"dataTTS:%@",dataTTS);
    _googlePlayer = [[AVAudioPlayer alloc] initWithData:dataTTS error:nil]; 
    [_googlePlayer play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:46:27.123

我也遇到了这个问题我从这个[链接](https://bitbucket.org/sfoster/iphone-tts/)得到了帮助（链接页面的右侧包含 24.0 MB（下载）文件）可能对你有帮助

[fliteEngine stopTalking];// 如果您想播放文本，请在您的代码中注释此行。

```
 [fliteEngine speakText:@"What ever you want to speech"];    // Make it talk
    [fliteEngine setPitch:100.0 variance:50.0 speed:1.0];   // Change the voice properties
    [fliteEngine setVoice:@"cmu_us_awb"];   // Switch to a different voice
    [fliteEngine stopTalking];// ignore the last line 
```

快乐编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:43:27.613

Google TTS 仅适用于短文本（少于 100 个字符）。

因此，您必须手动拆分与您的文本长度相关的文本并将子文本提供给 Google TTS。

# ruby-on-rails - Rails POST 由控制器#home 处理

> ID：13196608
> 
> 赞同：0
> 
> 时间：2012-11-02T13:52:50.433
> 
> 标签：ruby-on-rails, routes

我不确定我做错了什么。我有一个项目资源：

```
resources :projects 
```

在 ProjectsController#new 中，我正在创建一个项目并将其呈现在 new.html.erb 中：

```
<%= form_for @project do |f| %>
  <%= f.label :name %>
  <%= f.text_field :name%><br/>
  <%= f.submit  %>
<% end %> 
```

这会被 POST，但不是由 Projects#create 处理，而是由 home 操作处理：

```
Started POST "/projects" for 127.0.0.1 at 2012-11-02 08:47:36 -0500
Processing by ProjectsController#home as HTML 
```

这是我的路线：

```
 /                            projects#home
    projects        /projects(.:format)          projects#home
             GET    /projects(.:format)          projects#index
             POST   /projects(.:format)          projects#create
 new_project GET    /projects/new(.:format)      projects#new
edit_project GET    /projects/:id/edit(.:format) projects#edit
     project GET    /projects/:id(.:format)      projects#show
             PUT    /projects/:id(.:format)      projects#update
             DELETE /projects/:id(.:format)      projects#destroy 
```

编辑：我发现了问题。

这是旧的路线文件：

```
SolarMesh::Application.routes.draw do
  match '/' => 'projects#home'
  match '/projects' => 'projects#home'
  resources :projects

end 
```

“匹配'/项目'”这行是它总是由家庭处理的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:30:23.387

你的路由文件应该是这个

```
SolarMesh::Application.routes.draw do
   resources :projects
   match '/projects' => 'projects#home'
   match '/' => 'projects#home'

end 
```

这将解决你的问题

因为当您在资源声明之前指定这些 url 时，它们会限制索引页面现在运行它应该运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:00:22.353

给我看看你的路由文件.........问题出在你的路由文件的第二行和第三行，你没有在第二行指定 http 动词，因此它会转到 home 操作创建操作的...所以请在您的路由文件中指定动词，以防止将来出现此错误...

# url - Yii中如何自定义URL？

> ID：13196612
> 
> 赞同：0
> 
> 时间：2012-11-02T13:53:04.610
> 
> 标签：url, controller, yii

现在我正在使用 Yii 开发一个简单的应用程序。现在我对在我的应用程序中自定义 URL 有一个疑问。我的网址类似于[www.mywebapp.com/site/index/id/2/uid/3/text/some_text/#2](http://www.mywebapp.com/site/index/id/2/uid/3/text/some_text/#2)。我想要这个网址，例如 www.mywebapp.com/site.index。但我也想要 $_REQUEST['id'], $_REQUEST['uid'], $_REQUEST['text'] 用于条件目的。

我还参考了 Yii url manager 网站。但我不知道。我参考了来自这个站点[Yii Url Management](http://www.yiiframework.com/doc/guide/1.1/en/topics.url) www.yiiframework.com/doc/guide/1.1/en/topics.url 的数据。

我将此网址 www.mywebapp.com/site/index/id/2/uid/3/text/some_text/#2 从控制器重定向到索引，所以我想要像 www.mywebapp.com/site.index 这样的索引网址。

如果你知道的话。帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:27:45.317

你可以像这样改变分隔符

```
'urlManager'=>array(
            'urlFormat'=>'path',
            'showScriptName' => false,
            'rules' => array(
                '<controller:\w+>.<action:\w+>' => '<controller>/<action>',
),
), 
```

# libxml2 - xmlstarlet 在 mac 中无法正常工作

> ID：13196613
> 
> 赞同：0
> 
> 时间：2012-11-02T13:53:06.700
> 
> 标签：libxml2, libxslt, xmlstarlet

我为执行一些 xmlstarlet 命令的 Windows 创建了一个批处理文件。我想把它写成 .sh 文件，这样我就可以在 mac 上运行它。问题是..一些命令在windows中运行良好，但在mac中却不行。它也没有显示任何错误。例如。

```
**xml ed -L -d //intent-filter//category[@android:name='android.intent.category.LAUNCHER'] my_folder\AndroidManifest.xml** 
```

在 Windows 中，上面的命令会删除提到的 xml 标签。但是它在mac中什么都不做。但是命令

```
**xml sel -t -m //manifest -v //manifest/@package mim_apk_proj\AndroidManifest.xml** 
```

在 mac 和 windows 上都可以正常工作。我已经安装了 xml 工具。检查/usr/local/bin。它有 libxslt.dylib 和 libxml2.dylib。不知道问题出在哪里？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:51:55.360

bash 的引用规则（那是你 mac 上的 shell，对吗？）与 cmd.exe（Windows shell）不同，特别是 cmd.exe 被视为`'`普通字符，而 bash 它是一个引用字符，所以它不是'没有传递给程序。因此，在 bash 中，您还需要引用`'`s ：

```
xml ed -L -d //intent-filter//category[@android:name='android.intent.category.LAUNCHER'] my_folder\AndroidManifest.xml
# becomes
xml ed -L -d "//intent-filter//category[@android:name='android.intent.category.LAUNCHER'] my_folder\AndroidManifest.xml"
# or, since XPath treats both kinds of quotes identically you can also use
xml ed -L -d '//intent-filter//category[@android:name="android.intent.category.LAUNCHER"] my_folder\AndroidManifest.xml' 
```

第二个修复更安全，因为它还可以防止 bash 在使用 时进行任何变量扩展`$`，但第一个修复也具有在 Windows 中工作的优势。

# objective-c - 即使使用默认 568h@2x 图像，iOS 应用程序也不会使用 4 英寸大小

> ID：13196617
> 
> 赞同：1
> 
> 时间：2012-11-02T13:53:15.453
> 
> 标签：objective-c, ios, xcode

我读到的所有内容（包括在 Stack 上）一直在说，为了让应用程序使用整个 4 英寸 iPhone 屏幕，您只需添加分辨率为 1136 x 640 的 default-568h@2x.png 图像。

我已经添加了这张图片，当我在 4 英寸 iPhone 模拟器上运行时，所有内容（包括启动图片）都会在顶部和底部呈现带有黑条的窗口。我尝试删除并重新添加图片，确保它在目标摘要选项卡中显示为 4" 启动图像，并将我的故事板中的所有模拟指标大小调整为 Retina 4 全屏。即使有这一切，我仍然得到旧的 3.5 英寸窗口。

我有什么遗漏或做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T19:44:34.953

你拼写`Default-568h@2x.png`错误。请记住，iOS 是一个*区分大小写*的文件系统，因此大写的“D”很重要。（我有一个非常相似的问题——这就是导致我这个问题的原因——因为我错过了“h”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:57:36.413

我不确定问题是什么，但您可以做的更多检查是确保您在模拟之前构建了最新版本的项目。模拟器可能正在启动没有 4@ 图像的先前版本

也许尝试暂时删除较小分辨率的图像，看看是否会有所不同。

还要确保当模拟器打开时，您在硬件选项卡中具有正确的硬件配置

# module - DNN 模块包不安装控件

> ID：13196622
> 
> 赞同：3
> 
> 时间：2012-11-02T13:53:38.027
> 
> 标签：module, package, dotnetnuke

我正在创建一个 DNN 模块，并有一个基于此的工作模块：http: [//www.subodh.com/Projects/DNN-Module](http://www.subodh.com/Projects/DNN-Module)。

当我在 DNN 5.6.2 安装上安装它时，一切正常，除了 .ascx 文件没有复制过来。如果我手动复制 .ascx 文件，则该模块可以正常工作。

我的 .dnn 文件如下所示：

```
...
<moduleDefinitions>
    <moduleDefinition>
        <friendlyName>SignUp.Control1</friendlyName>
        <defaultCacheTime>0</defaultCacheTime>
        <moduleControls>
            <moduleControl>
                <controlKey />
                <controlSrc>Control1.ascx/Control1.ascx</controlSrc>
                <supportsPartialRendering>True</supportsPartialRendering>
                <controlTitle>Control1</controlTitle>
                <controlType>View</controlType>
                <iconFile />
                <helpUrl />
                <viewOrder>0</viewOrder>
            </moduleControl>
...
        </moduleControls>
    </moduleDefinition>
</moduleDefinitions>
... 
```

具体来说，Control1.ascx 不会被复制到 DesktopModules/SignUp 目录。

我没有收到错误。这是 DNN 在安装模块时所说的相关部分。我安装时没有错误。

```
...
Info    Component installed successfully - Script
Info    Starting Installation - Module
Info    Module registered successfully - SignUp
Info    Component installed successfully - Module
Info    Starting Installation - Assembly
... 
```

谁能告诉我为什么控件没有复制到适当的目录？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:45:35.510

看来您的`<controlSrc>`标签有误，也许您的意思是：`<controlSrc>DesktopModules/SignUp.Control1/Control1.ascx</controlSrc>`

您还需要在以下文件中提及此文件`<component type="File">`：

```
<component type="File">
  <files>
    <file>
      <path>Your Desire Path</path>
      <name>Control1.ascx</name>
    </file>
  </files>
</component> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T05:21:38.000

除了 Ehsan 的回答之外，您还可以使用 MSBuild 和 Chris Hammonds 模板 (http://christoctemplate.codeplex.com)，这将创建一个资源 zip，并且您有一个资源节点，而不是每个文件的单个节点

# java - SOAP 负载中的特殊字符未正确传输

> ID：13196627
> 
> 赞同：0
> 
> 时间：2012-11-02T13:53:55.377
> 
> 标签：java, soap, utf-8, cxf, sap-pi

我使用 CXF 编写了一个 SOAP Web 服务，该服务由 SAP 系统调用，在有效负载中有一个带有特殊字符的单词，该单词多次出现。但是，在某些随机情况下，我对这个词的读法有所不同，即在一个有效负载中，我看到这个词 as`Kliëntbestuurder`而在另一个有效载荷中，我看到这个词`Kli��ntbestuurder`。

SAP 系统通过 SAP PI 调用我的服务只有一个字。

更新：所以似乎不是网络服务通信变得混乱，而是我编写的拦截器转储肥皂信封让我能够仔细检查。拦截器如下：

```
public class WebServiceMessageInterceptor extends AbstractPhaseInterceptor<Message> {

public WebServiceMessageInterceptor() {
    super(Phase.RECEIVE);
}

@Override
public void handleMessage(Message message) throws Fault {
    final LoggingMessage buffer = new LoggingMessage("", "");

    String encoding = (String) message.get(Message.ENCODING);

    if (encoding != null) {
        buffer.getEncoding().append(encoding);
    }
    Object headers = message.get(Message.PROTOCOL_HEADERS);

    if (headers != null) {
        buffer.getHeader().append(headers);
    }

    InputStream is = message.getContent(InputStream.class);
    if (is != null) {
        CachedOutputStream outputStream = new CachedOutputStream();
        try {
            IOUtils.copy(is, outputStream);
            outputStream.flush();
            is.close();

            message.setContent(InputStream.class, outputStream.getInputStream());
            outputStream.writeCacheTo(buffer.getPayload(), "UTF-8", -1);
            outputStream.close();

            FileUtils.writeStringToFile(new File("/tmp/soap" + System.currentTimeMillis() + ".log"), buffer.toString(), "UTF-8");
        } catch (IOException e) {
            e.printStackTrace();
            throw new Fault(e);
        }
    }
} 
```

任何进一步的想法为什么我的拦截器不使用 UTF-8？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:01:36.530

这可能与在服务之间和服务内部没有一致地使用编码有关。我建议你通过阅读这个优秀的[教程来帮助自己 - Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)端到端。然后在缩小错误范围后提出后续问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:39:34.893

检查您从 Web 服务发回的响应中的 http 标头。您可以使用[soapUI](http://www.soapui.org)中的 Raw 选项卡来查看标题。如果你没有看到类似的东西

```
Content-Type: text/xml;charset=UTF-8 
```

然后您可以通过在您的 WebMethods 中执行以下操作来强制 CXF 将其添加到响应中：

```
MessageContext ctx = context.getMessageContext();
ctx.put(Message.CONTENT_TYPE, "text/xml;charset=UTF-8"); 
```

其中 context 是注入到您的类中的 javax.xml.ws.WebServiceContext。

您还应该验证 Web 服务的客户端是否也在使用正确的编码。您可能正在向他发送有效的回复。

# objective-c - 从 NSDictionary 获取包含值为 @YES 的 NSNumber 布尔值的键列表

> ID：13196628
> 
> 赞同：1
> 
> 时间：2012-11-02T13:54:01.010
> 
> 标签：objective-c, ios6, nsarray, nsdictionary, nspredicate

我正在尝试获取一个键数组，其中 an 中相应键的`NSDictionary`值为 @ `YES`。

对于 EG，： 起始字典：

```
NSDictionary* dict = @{@"key1" : @YES, @"key2": @YES, @"key3": @NO, @"key4": @NO}; 
```

期望的结果：

```
NSArray* array = @[@"key1", @"key2"]; 
```

我尝试使用 NSPredicates 和 subpredicates 执行此操作，但找不到可以满足我要求的。我的“工作”但丑陋的解决方案是：

```
NSMutableArray* array = [[NSMutableArray alloc] initWithCapacity:0];
NSDictionary* dict = @{@"key1" : @YES, @"key2": @YES, @"key3": @NO, @"key4": @NO};
for (NSString* key in [dict allKeys]) {
    if ([[dict objectForKey:key] isEqualToNumber:@YES])
        [array addObject:key];
} 
```

有什么更好的方法可以做到这一点，可能是`NSPredicates`？。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T14:58:32.240

这种抽象了很多混乱

```
NSArray *results = [dict keysOfEntriesPassingTest:^(id key, id obj, BOOL *stop) {
  return [obj isEqualToNumber:@YES];
}].allObjects;

NSLog(@"%@", results); 
```

# javascript - 加载后绑定拖动事件时图像未定义

> ID：13196629
> 
> 赞同：0
> 
> 时间：2012-11-02T13:54:03.553
> 
> 标签：javascript, jquery, events, coffeescript, hammer.js

在咖啡脚本中，我尝试在 onload 触发器中将 dragstart 事件绑定到图像上，但出现以下错误：

```
Uncaught TypeError: Cannot set property 'ondragstart' of undefined 
```

这是我的代码：

```
image_url = "some.url"

@image = $ new Image()
@image[0].onload = () =>
    @image.on( 'dragstart', () -> false )

@image.attr 'src', image_url 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:11:56.743

用这个修复它：

```
@image[0].onload = () =>
  @image.on 'mousedown', (e) -> e.preventDefault(); 
```

鼠标向下，结合防止默认..

在这个例子中，他们确实像我在问题中那样绑定它：http: [//eightmedia.github.com/hammer.js/slideshow/](http://eightmedia.github.com/hammer.js/slideshow/)

仍然想知道我在这里缺少什么..

# javascript - 用于从 UIWebView 复制文本的 Javascript 函数

> ID：13196630
> 
> 赞同：0
> 
> 时间：2012-11-02T13:54:11.043
> 
> 标签：javascript, iphone, ios, ios5

我正在尝试从 UIWebView (iPhone) 中获取一些选定的文本，然后将其显示在文本视图上。

我使用的方法是：

```
function getHighlightedString() {
    var text        = window.getSelection();
    selectedText    = text.anchorNode.textContent.substr(text.anchorOffset, text.focusOffset - text.anchorOffset);

} 
```

然后将文本输入到 a 中`NSString`，然后由 iPhone 程序使用。

现在的问题是，如果文本只是一行中的几个单词，我可以获得选定的文本，**但**只要我选择了一个以上的段落（包括“< p >”标签），数据就会显示为空白在`NSString`.

如何使用段落中选择的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:11:37.970

这相当容易。我使用了这行代码：

```
 self.selectedString = [self.bookTextWebView stringByEvaluatingJavaScriptFromString:@"window.getSelection().toString()"]; 
```

# android - Youtube 视频播放错误

> ID：13196632
> 
> 赞同：1
> 
> 时间：2012-11-02T13:54:12.893
> 
> 标签：android, video, youtube

以下是我的源代码。当我尝试在我的 android 模拟器 3.0 上播放这些视频时，我有一些 youtube 视频 ID，一些视频在正确加载后运行良好。但有些视频需要更多时间，最后应用程序被强制关闭。我在这里给了两个 youtube id

1.  Ju2Krqv9aDU（运行良好）
2.  IqZf2pj4oj8（进度对话框需要更多时间，最后强制关闭）

我在这里发布了源代码和错误日志。

主布局.java

```
package com.redorange.motutv;

import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;
import com.redorange.blanklayout_for_initialview.InitialTempFragmentPage;
import com.redorange.dramas.ListOfCategoriesDrama;
import com.redorange.livetv.ListOfCountry;
import com.redorange.motutvstaticdata.MotuTVFunctions;
import com.redorange.motutvstaticdata.MotuTVStaticData;
import com.redorange.movies.ListOfCategoriesMovie;

public class MainLayout extends Activity {

    TextView tvSelectedOptionName;
    TextView tvDate;
    TextView tvUserName;
    Fragment leftLayout;
    Fragment rightLayout;
    ProgressDialog progressDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tvDate = (TextView) findViewById(R.id.tvDate);
        tvDate.setText(MotuTVFunctions.getCurrentDate());

        tvUserName = (TextView) findViewById(R.id.tvUserName);
        tvUserName.setText("Hi " + MotuTVStaticData.save_username);

        if (MotuTVStaticData.save_selectedOptionName.equals("Live TV")) {
            leftLayout = new ListOfCountry();
            // rightLayout = new GridViewWeb1();
            rightLayout = new InitialTempFragmentPage();
        } else if (MotuTVStaticData.save_selectedOptionName.equals("Movie")) {
            leftLayout = new ListOfCategoriesMovie();
            // rightLayout = new GridViewWebMovie();
            rightLayout = new InitialTempFragmentPage();
        } else if (MotuTVStaticData.save_selectedOptionName.equals("Drama")) {
            leftLayout = new ListOfCategoriesDrama();
            // rightLayout = new GridViewWebDrama();
            rightLayout = new InitialTempFragmentPage();
        }
        new BackgrndProcessForInitialSettings().execute();
    }

    public void setLeftRightLayout() {
        FragmentTransaction newtransaction = getFragmentManager()
                .beginTransaction();

        newtransaction.replace(R.id.myfragmentleft, leftLayout);
        newtransaction.replace(R.id.myfragmentright, rightLayout);
        newtransaction.addToBackStack(null);
        newtransaction.commit();

    }

    @Override
    public void onBackPressed() {
        finish();
    }

    public class BackgrndProcessForInitialSettings extends
            AsyncTask<Void, Void, Integer> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            progressDialog = ProgressDialog.show(MainLayout.this, "",
                    "please wait...");

        }

        @Override
        protected Integer doInBackground(Void... params) {

            setLeftRightLayout();
            return 1;
        }

        @Override
        protected void onPostExecute(Integer result) {

            progressDialog.dismiss();
            super.onPostExecute(result);
        }
    }

} 
```

错误日志：1 ![在此处输入图像描述](../Images/9152a9bbdcbd9ed95e34b30d369a8e40.png)

错误日志：2 ![在此处输入图像描述](../Images/92a38677a95b574759459e86c5a97792.png)

错误日志：3

![在此处输入图像描述](../Images/b930324ca70a55b67df2915c09837224.png)

# ruby - mongodb多字段排序

> ID：13196636
> 
> 赞同：0
> 
> 时间：2012-11-02T13:54:18.177
> 
> 标签：ruby, mongodb, sorting

我想知道如何在 ruby​​ 的 mongodb 驱动程序中进行多字段排序

[从官方网站排序的示例](http://api.mongodb.org/ruby/current/file.TUTORIAL.html#Sorting_Documents_in_a_Collection)，我们可以在其中找到以下示例：

```
# Sort in ascending order by :i
coll.find.sort(:i)

# Sort in descending order by :i
coll.find.sort(:i => :desc) 
```

根据这些例子，我厌倦了做这样的事情

```
coll.find.sort(:i,:j) 
```

这没有用

你知道在 ruby​​ 驱动程序中进行多字段排序的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:36:16.530

排序方法可以采用键进行单字段排序，也可以采用**[key, direction] 对**数组进行多字段排序。这是你的样子：

```
coll.find.sort(["score", 1], ["created_at", 1]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:57:44.720

经过简短的调查，找到了答案

我们可以使用

```
hash_as_sort_parameters({:field1 => :asc, "field2" => :desc}) 
```

或者

```
array_as_sort_parameters([["field1", :asc], ["field2", :desc]]) 
```

由于某种原因，第一种方法对我不起作用，但第二种方法完全可以

# javascript - .match() 不返回一个数组而是一个字符串

> ID：13196637
> 
> 赞同：-4
> 
> 时间：2012-11-02T13:54:24.453
> 
> 标签：javascript

`.match()`不会用其中的元素返回一个数组吗？相反，它只是一个字符串？

```
 var descr = jobs[i].description;
  console.log(typeof descr);
  descr.match(/\b(java|python|javascript|ruby|rails)\b/i); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:17:25.770

好的，我开始工作了

```
 var descr = jobs[i].description;

  var arr = descr.match(/\b(java|python|javascript|ruby|rails)\b/gi);

  if(arr !== null){
    console.log("arr is? " + typeof arr); //<--- will print "object" i dont know why?
    console.log("arr     " + arr);
    console.log("arr [0] " + arr[0]);
    console.log("arr  ..." + arr.length);
  } 
```

# android - 如何将联系人卡片写入 NFC 标签

> ID：13196638
> 
> 赞同：0
> 
> 时间：2012-11-02T13:54:25.160
> 
> 标签：android, nfc, contact

我正在尝试编写一个应用程序来编写带有联系方式的 NFC 标签。你能告诉我联系卡的 NdefRecord 的“类型”应该是什么。

```
NdefRecord record = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, "RTD_URI".getBytes(),
            new byte[] {}, messagebytes); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:01:35.967

当您使用 vCard 格式的联系方式时，您可以使用

```
NdefRecord record = new NdefRecord(NdefRecord.TNF_MIME_MEDIA, 
  "text/vcard".getBytes(), new byte[] {}, messagebytes); 
```

`messagebytes`实际的 vCard 数据在哪里。

# asp.net-mvc - 通过 MVC4 中的表单发布 JSON 数据

> ID：13196645
> 
> 赞同：10
> 
> 时间：2012-11-02T13:54:52.687
> 
> 标签：asp.net-mvc, json, knockout.js, asp.net-mvc-4

我正在尝试将一个 JSON 对象（一个 JSON 化的淘汰模型，如果有任何相关性）发布到我的 MVC 控制器，并让控制器返回一个新视图。为此，我使用表单发送数据。问题是我希望在控制器收到 JSON 时自动将其转换为模型。

如果我为此使用 AJAX 调用，

```
var actionModel = new Object();
actionModel.Controls = ko.toJS(self.controls());
var json = JSON.stringify(actionModel);
$.ajax({
    url: "MyController/Preview",
    type: "POST",
    contentType: 'application/json; charset=utf-8',
    cache: false,
    data: json,
    success: function (data) {
    }
}); 
```

... JSON 对象已成功反序列化并转换为我的模型类的实例。

```
public ActionResult Preview(ActionModel actionModel) { ... }
public class ActionModel
{
    public List<ControlModel> Controls { get; set; }
} 
```

如果我想使用表单执行此操作，我知道我需要将 JSON 插入隐藏的输入字段，但这样做时我能做到的最好的方法是将数据作为序列化字符串接收：

```
@using (Html.BeginForm("Preview", "MyController", FormMethod.Post, new { id = "previewForm" }))
{
    <input type="hidden" id="hiddenFieldName" />
}

public ActionResult Preview(string hiddenFieldName) { ... } 
```

之后我可以反序列化它，但如果 MVC 可以为我转换它，我真的更喜欢它，就像使用 AJAX 调用一样。这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:24:49.163

假设您想使用表单而不是 XHR 发布编码为 json 的数据，我认为它不可能开箱即用。

表单不允许许多内容类型。 [http://www.w3.org/TR/html401/interact/forms.html#form-content-type](http://www.w3.org/TR/html401/interact/forms.html#form-content-type)

如果您将 json 作为字符串发布，则可能创建一个模型绑定器来查找看起来是 json 的字符串并在那里处理反序列化。不是最漂亮的东西，特别是如果这只是为了一些奇怪的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:57:40.153

除了手动反序列化，您可以捕获表单发布事件并重建您自己的帖子，添加额外的 JSON 对象。这是一个使用[这篇文章](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)`serializeObject`中的方法的示例）：

```
$(document).ready(function () {
    $('form').live('submit', function (e) {
        e.preventDefault();

        var dataToPost = $(this).serializeObject();
        dataToPost.hiddenFieldName = actionModel; //additional object here
        $.ajax({
            type: $(this).attr('method'),
            url: $(this).attr('action'),
            data: JSON.stringify(dataToPost),
            contentType: 'application/json; charset=utf-8',
            success: function (res) {
                //do something...
            }
        });
    });
}); 
```

# jquery - jQuery第二次调用后PHP无法正常工作

> ID：13196648
> 
> 赞同：1
> 
> 时间：2012-11-02T13:54:58.047
> 
> 标签：jquery

这是我调用 twitter.php 的 jQuery 代码

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#play").click(function(){
            $.ajax({
                url: 'twitter.php',
                type: 'GET',
                data: "user=<?php echo $user; ?>",
                success: function(data) {
                    $('#first').hide();
                    $("#wait").show().delay(2000).fadeOut();
                    $('#result').html(data).delay(2500).fadeIn();
                    $("#again").hide().delay(2500).fadeIn();
                }
            });
        });
        $("#playagain").click(function(){
            $('#result').show().delay(300).fadeOut();
            $("#again").show().delay(300).fadeOut();
            $("#first").hide().delay(700).fadeIn();
        });
   });
</script> 
```

这是 PHP 到随机数的图像

```
 $randnum = rand(0,99);
        $photoz = "pic/bg".rand(1,7).".png";
        //$phoneim = $pic;  

        $file[0] = "im_{$user}.jpg";

        if (file_exists($file[0])) { 
    unlink("$file[0]");
    }           

        //GD ใส่ข้อความลงในภาพ
        $font_size = 100;
        $im = imagecreatefrompng($photoz);
        $destWidth = imagesx($im); 
        $font = realpath('font.ttf');
        $imessage = $horonum[$randnum];
        $color = ImageColorAllocate($im, 113, 193, 26);
        $text_y = 333;
    $text_bbox = ImageTTFBBox($font_size, 0, $font, $imessage);
    $image_centerx = ($destWidth / 2)-7;
    $text_x = $image_centerx - round(($text_bbox[4]/2));

        ImageftText($im, $font_size, 0, $text_x, $text_y, $color, $font, $imessage);
        imagejpeg($im,"im_{$user}.jpg");
        imagedestroy($im);
        //************* 
```

第一次 jQuery 调用 PHP 一切正常，但重复点击播放按钮后随机数仍然与第一次相同如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:04:28.247

应该是缓存问题。尝试将`cache: false`, 添加到您的 ajax 选项中。

[http://api.jquery.com/jQuery.ajax](http://api.jquery.com/jQuery.ajax)

cache Boolean 默认值：true，对于 dataType 'script' 和 'jsonp' 为 false 如果设置为 false，它将强制浏览器不缓存请求的页面。将缓存设置为 false 还会将查询字符串参数“_=[TIMESTAMP]”附加到 URL。

# c# - c# MemoryStream 编码与。编码.GetChars()

> ID：13196649
> 
> 赞同：8
> 
> 时间：2012-11-02T13:54:59.493
> 
> 标签：c#, character-encoding, streamreader

我正在尝试从数据库中复制字节流，对其进行编码并最终将其显示在网页上。但是，我注意到以不同方式对内容进行编码的不同行为（注意：我使用的是具有拉丁字符集且不支持中文字符的“西欧”编码）：

```
var encoding = Encoding.GetEncoding(1252 /*Western European*/);
using (var fileStream = new StreamReader(new MemoryStream(content), encoding))
{
    var str = fileStream.ReadToEnd();
} 
```

比。

```
var encoding = Encoding.GetEncoding(1252 /*Western European*/);
var str = new string(encoding.GetChars(content)); 
```

如果内容中包含汉字，那么第一段代码会产生类似“D$教学而设计的”这样的字符串，这是不正确的，因为编码不应该支持这些字符，而第二段代码会产生“D$æ•” ™å¦è€Œè®¾è®¡çš„”这是正确的，因为它们都在西欧字符集中。

这种行为差异的解释是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T13:59:55.360

构造`StreamReader`函数将在流中查找 BOM 并从中设置编码，即使您传递了不同的编码。

它会在您的数据中看到 UTF8 BOM 并正确使用 UTF8。

为了防止这种行为，`false`作为第三个参数传递：

```
var fileStream = new StreamReader(new MemoryStream(content), encoding, false) 
```

# qt - Qt：如何在 mouseMoveEvent 中选择窗口框架？

> ID：13196651
> 
> 赞同：0
> 
> 时间：2012-11-02T13:54:59.057
> 
> 标签：qt

我知道这可以用 QSizeGrip 完成，但它看起来很笨重，所以我更喜欢使用通常的窗口边缘。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:22:32.750

窗口装饰（“边框”）由窗口管理器（它是操作系统桌面的一部分）处理，而不是由应用程序本身处理。您无法接收它们的鼠标事件。一种解决方法是完全禁用边界，并实现自己的。这是一项相当多的工作，并且可能会根据您的应用程序的性质而惹恼用户（例如 WinAmp 之类的东西可以摆脱它；另一方面，Google Chrome 也在这样做，但许多用户不喜欢它.)

# python - 在python中回显windows路径

> ID：13196657
> 
> 赞同：0
> 
> 时间：2012-11-02T13:55:37.693
> 
> 标签：python, windows

基本上我想做的是

```
from subprocess import call
print call(['echo', '%path%']) 
```

但是“回声”不被识别为可执行文件是否有某种解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:56:09.097

我没有 Windows 计算机，但您可以使用`os.environ`它而不依赖外部实用程序来获取它——在 *NIX 上，它看起来像：

```
import os
print (os.environ['PATH']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T14:00:28.750

mgilson 有更好的建议，但无论如何，仅供参考，`echo`是一个内置命令`cmd.exe`：

```
subprocess.call("CMD /C ECHO %PATH%") 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T14:07:55.417

`echo`不是可执行文件，它是一个 shell 命令。

要执行 shell 命令，请使用：

```
subprocess.call("echo %PATH%", shell=True) 
```

# xaml - 视图模型中的 RadioButton IsChecked 绑定

> ID：13196659
> 
> 赞同：0
> 
> 时间：2012-11-02T13:55:52.097
> 
> 标签：xaml, binding, radio-button, viewmodel, ischecked

我知道这个话题已经讨论过很多次了，但我仍然无法让它发挥作用。我有 3 个 RadioButtons 放在 StackPanel 中；我正在尝试将他们的 IsChecked 绑定到视图模型中的某个变量。这是我所做的：

在视图中的 XAML 文件中：

```
 <RadioButton Name="rbExpReview"
                             IsChecked="{Binding Path=rbExpReviewIsChecked, Mode=TwoWay}"
                             Foreground="White">
                    <RadioButton.Content>
                        <Label Content="Experiment Review"
                               HorizontalContentAlignment="Center"
                               VerticalContentAlignment="Center" />
                    </RadioButton.Content>
  </RadioButton> 
```

在 View Model 中，我声明了一个变量：

```
_rbExpReviewIsChecked = true; 
```

以及响应 RadioButton 的 IsChecked 的属性：

```
public bool rbExpReviewIsChecked
        {
            get
            {
                return _rbExpReviewIsChecked;
            }
            set
            {

                _rbExpReviewIsChecked = value;
                OnPropertyChanged("rbExpReviewIsChecked");
            }
        } 
```

但是，当我选中和取消选中按钮时，视图模型代码中没有响应（没有命中断点。）所以我想知道我的绑定有什么问题？还是别的什么？我是 XAML 的新手，所以任何指针都值得赞赏。缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:02:01.013

你的绑定视图->视图模型在哪里？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:22:31.307

您的绑定语法是正确的。您的属性显示正确。那只剩下一种可能性：DataContext。

Visual Studio 中的“输出”窗口会发生什么？如果您的 DataContext 设置不正确，它应该会给您一个绑定错误。

DataContext 可以从 Parent 继承，也可以设置。你的数据上下文是什么？

# c# - MVC 可为空 + 本地化失败

> ID：13196665
> 
> 赞同：1
> 
> 时间：2012-11-02T13:56:24.593
> 
> 标签：c#, .net, asp.net-mvc-4

在我的国家（克罗地亚），货币值的格式如下：

> 123.456.789,00 千牛

我有 MVC 应用程序，它要求用户输入某物的价格。`decimal?`我的模型用变量表示该字段。当用户输入此号码时：

> 5.678,22

MVC 返回此错误消息：

> 值 xxx 对该字段无效。

尽管该数字的格式正确。在我将变量数据类型从更改`decimal?`为 just`decimal`后，一切正常（用户可以输入数字 5.678,22 并且 MVC 不会返回错误）。

所以我的问题是：发生了什么事？这可能是 .NET 框架中的某种错误吗？我正在使用 .NET 框架 4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:44:46.057

[This Stack Overflow post](https://stackoverflow.com/questions/9082119/mvc-3-json-model-binding-not-creating-object) may be able to assist you, or you can just more directly check this [Blog by Phil Haack](http://haacked.com/archive/2011/03/19/fixing-binding-to-decimals.aspx), he uses a customized model binder that detects your Culture Info when binding decimals.

# svn - IntelliJ - 将更改集成到 svn 分支

> ID：13196675
> 
> 赞同：1
> 
> 时间：2012-11-02T13:56:52.630
> 
> 标签：svn, merge, intellij-idea

我正在尝试使用 IntelliJ 中可用的选项将更改从主干推送到此处描述的分支之一：http: [//www.jetbrains.com/idea/webhelp/integrating-changes-to-branch.html](http://www.jetbrains.com/idea/webhelp/integrating-changes-to-branch.html)

但它似乎不起作用。它会导致以下错误，尽管我需要指向所需目标的 To & From 位置：

“无法开始集成：目标目录不受 Subversion 控制或不属于所选分支。”

-- 在这里，我认为本地/工作副本不应该考虑合并，因为这个选项是从主干合并到某个分支。

还注意到，根据 jetbrains 中记录的票证，此选项似乎无法正常工作：

[http://youtrack.jetbrains.com/issue/IDEA-45525#comment=27-393692](http://youtrack.jetbrains.com/issue/IDEA-45525#comment=27-393692)

让我知道我是否在这里遗漏了什么/是否存在一些简单的替代方法来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:29:15.370

1）请确保您在配置分支中正确匹配远程文件夹到本地。此外，url 应该是一致的，即如果您已将 /trunk/parent 复制到 /branches/branch/parent 中，则应指定 /trunk/parent 和 /branches/branch/parent 或 /trunk/parent/child 和 /branches/branch/parent /child 但不是 /trunk/parent 和 /branches/branch/parent/child

2）此外，Subversion 中的合并总是通过本地工作副本完成（据我所知，在其他 vcs 中）合并是 1）Subversion 为您传递的 2 个 url + 参数（或 url 及其修订版）创建补丁 2）它将补丁应用于本地工作副本，可能还将合并信息记录到特殊属性中 3）您将其提交到目标分支

# android - 如何在相对布局中以编程方式添加片段

> ID：13196682
> 
> 赞同：8
> 
> 时间：2012-11-02T13:57:20.510
> 
> 标签：android, android-layout, android-fragments, android-relativelayout

我设计了一个RelativeLayout。我正在尝试向其中添加片段。它重叠。我需要做什么才能使其低于其他。

```
 FragmentTransaction t = getSupportFragmentManager().beginTransaction();

    FragmentTest myFragment = new FragmentTest();
    t.add(layout.getId(), myFragment, "myFirstFragment");

    FragmentTest myFragment2 = new FragmentTest();
    t.add(layout.getId(), myFragment2, "mySecondFragment");

    t.commit(); 
```

//即使我将方向设置为垂直，myFragment 和 myFragment2 的视图也会重叠。

```
<RelativeLayout
    android:id="@+id/idll1"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_marginLeft="10sp"
    android:layout_marginRight="0sp"
    android:layout_marginTop="10sp"
    android:layout_weight="1"
    android:paddingBottom="5dp"
    android:paddingLeft="10dp"
    android:paddingRight="5dp"
    android:paddingTop="5dp" 
    android:orientation="vertical"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:09:17.010

我们可以这样做：

***存在相对布局的活动类。让该相对布局（mParentLayout）成为活动视图层次结构的根元素。并且要添加到相对布局的片段将是 mGridFragment，位于 Button (mGridBtn) 下方的位置。***

```
public class DroidOpsActivity extends FragmentActivity implements
    OnClickListener {

    private RelativeLayout mParentLayout = null;
    private Button mGridBtn = null;
    private FragmentManager mFragmentMgr = null;
    private FragmentTransaction mFragmentTransc = null;
    private Fragment mGridFragment = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        initialize();
    }

    private void initialize() {
        setContentView(R.layout.activity_droid_ops);
        mParentLayout = (RelativeLayout) findViewById(R.id.parent_layout);
        mGridBtn = (Button) findViewById(R.id.grid_button);
        mFragmentMgr = getSupportFragmentManager();
        registerListener();
    }

    private void registerListener() {
        mGridBtn.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.grid_button:
                    loadFragment();
                    mGridBtn.setEnabled(false);
        break;
        }
    }

    private void loadFragment() {
        mGridFragment = new DroidOpsFragments();
        mFragmentTransc = mFragmentMgr.beginTransaction();
        mFragmentTransc.add(mParentLayout.getId(), mGridFragment);
        mFragmentTransc.addToBackStack(null);
        mFragmentTransc.commit();
    }

    public RelativeLayout.LayoutParams fetchLayoutParams() {
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);

        // We can add any rule available for RelativeLayout and hence can position accordingly
        params.addRule(RelativeLayout.BELOW, mGridBtn.getId());
        return params;
    }
} 
```

***相应的 Fragment 类，将在 Activity 的布局中定位。***

```
public class DroidOpsFragments extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                    Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.view_word_grid, null);

        // Here we are fetching the layoutParams from parent activity and setting it to the fragment's view.

        view.setLayoutParams(((DroidOpsActivity) activity).fetchLayoutParams());
        return view;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:03:34.283

您必须在 Fragment 的视图中设置布局 prarams。

它们是 XML 还是硬编码？

如果它们是硬编码的，您将必须使用向后兼容的支持库获取 Google 放置在所有片段视图上的 FrameLayout Wrapper，并在视图的 onlayout 或 onMeasure 中设置其相对布局参数。

否则，如果它们是 XML，则只需设置相关规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T14:09:32.663

我认为应该是`LinearLayout`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-06T15:55:33.587

Quick and Dirty 似乎要好一些。如果你已经知道你的布局，你可以节省一些步骤，而且我知道一个巨大的 if (X instanceof Class) 块集是不受欢迎的，它非常通用。

```
 @Override
    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        ViewGroup.LayoutParams p = view.getLayoutParams();
        if (p instanceof CoordinatorLayout.LayoutParams) {
            CoordinatorLayout.LayoutParams params = ((CoordinatorLayout.LayoutParams)p);
            params.gravity = Gravity.END | Gravity.BOTTOM;
            view.setLayoutParams(params);
        }
        else if (p instanceof RelativeLayout.LayoutParams) {
            RelativeLayout.LayoutParams params = ((RelativeLayout.LayoutParams)p);
            params.addRule(RelativeLayout.ALIGN_BOTTOM);
            view.setLayoutParams(params);
        }
} 
```

# asp.net - 嵌套中继器 - 分组数据

> ID：13196686
> 
> 赞同：2
> 
> 时间：2012-11-02T13:57:41.040
> 
> 标签：asp.net, .net, repeater, grouping

我从 ASP.NET 开始，我想知道，是否有任何“智能”方式可以分组显示 DataTable 中的数据？
想象一下下面的例子：我从 SQL 获取数据到数据表分组和排序：

```
protected void Page_Load(object sender, EventArgs e)
{
    DataTable dt = new DataTable();
    dt.Columns.Add("parent", typeof(string));
    dt.Columns.Add("child", typeof(string));
    dt.Rows.Add("AAA", "111");
    dt.Rows.Add("AAA", "222");
    dt.Rows.Add("AAA", "333");
    dt.Rows.Add("BBB", "444");
    dt.Rows.Add("BBB", "555");
    dt.Rows.Add("CCC", "666");
    dt.Rows.Add("CCC", "777");
    dt.Rows.Add("CCC", "888");

    repeaterParent.DataSource = dt;
    repeaterParent.DataBind();
} 
```

我想在下面的页面上显示它们：
![在此处输入图像描述](../Images/959d724156f82a705f6da34574f38769.png)

我尝试为此使用嵌套中继器：

```
<asp:Repeater ID="repeaterParent" runat="server">
    <ItemTemplate>
        <b><%# DataBinder.Eval(Container.DataItem, "parent") %></b>
        <br /> 
        <asp:repeater id="repeaterChild" runat="server">
            <itemtemplate>
                    - <%# DataBinder.Eval(Container.DataItem, "child") %> <br />
            </itemtemplate>
        </asp:repeater>
    </ItemTemplate>
</asp:Repeater> 
```

当然它不起作用 - 结果如下 - 它既没有分组也没有显示孩子：
![在此处输入图像描述](../Images/e8557e710d1829fb6cacfdcf304284d7.png)

怎么做 - 控件不必是中继器 - 它可以是列表视图、项目符号列表或类似的东西。

最好，如果有一些“智能”方式 - 所以我只需将数据表绑定到数据源，然后控件为我完成其余的（分组）。我宁愿避免将数据源表拆分为两个不同的源或对每个父项进行 SQL 查询并使用 ItemDataBound 事件——只要有可能。如果没有 - 你能告诉我这样做的**任何**方法吗？.NET 版本：4.0

最好的问候，
马辛

**--编辑：**
我找到了以下解决方案，但是，我不太喜欢它，因为每个项目的过滤源表成本很高，我不确定它在大型源数据表中的表现如何。如果有更好的解决方案，我会很高兴地听到：

```
protected void repeaterParent_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    DataRowView drv = (DataRowView)e.Item.DataItem;
    string parent = drv["parent"].ToString();

    dt.DefaultView.RowFilter = string.Format("[parent]='{0}'", parent);
    DataTable dtChild =  dt.DefaultView.ToTable(true, "child");

    Repeater repeaterChild = (Repeater)e.Item.FindControl("repeaterChild");
    repeaterChild.DataSource = dtChild;
    repeaterChild.DataBind();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:05:32.500

您在正确的轨道上，但您只有一个数据源，这是第一个转发器的输入。

您需要将第二个数据源添加到第二个（嵌套）中继器。例如，返回第一个数据源中实际父级的子级的函数。

[ASP.NET 中的嵌套中继器](https://stackoverflow.com/q/3571363/532498)

# symfony - 如何获取输入表单类型

> ID：13196689
> 
> 赞同：18
> 
> 时间：2012-11-02T13:57:55.143
> 
> 标签：symfony, twig

我想获取表单字段类型并设置类字段类型

我尝试：

```
{# Form field row #}
{% block form_row %}
{% spaceless %}
  <div class="field-group{% if errors|length > 0%} error{%endif%}" id="fc-{{ id }}">
    {{ form_label(form, label|default(null)) }}
    <div class="field-item {{ type }}">
      {{ form_widget(form) }}
      {% if errors|length > 0 %}
        <div class="errors">{{ form_errors(form) }}</div>
      {% endif %}
    </div>
  </div>
{% endspaceless %}
{% endblock %} 
```

但是 {{ type }} 不起作用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-09-13T12:41:25.383

MatsRietdijk 的答案是正确的，但是从 Symfony 2.3 开始，类型的索引似乎已经从 2 变为 1。因此，`{{ form.vars.block_prefixes.1 }}`将返回`checkbox`, `date`,`choice`等。

[在进行应用程序范围的自定义](http://symfony.com/doc/current/cookbook/form/form_customization.html#making-application-wide-customizations)时，您可以使用它向[表单行添加一个类](http://symfony.com/doc/current/cookbook/form/form_customization.html#customizing-the-form-row)：

```
{% block form_row %}
    <div class="form_row {{ form.vars.block_prefixes.1 }}">
        {{ form_label(form) }}
        {{ form_widget(form) }}
        {{ form_errors(form) }}
    </div>
{% endblock form_row %} 
```

然后你可以应用 CSS 规则：

```
div.form_row.text {color:Red;} 
```

# 推特引导

如果您使用 Twitter 引导程序，您可能会遇到问题，因为`.checkbox`该类[存在于 bootstrap 中](https://github.com/twbs/bootstrap/blob/64e81324261548a8de8cda5fde4b87d0f7a8f8fb/dist/css/bootstrap.css#L1740)。我建议为 Symfony 表单行使用前缀：

```
{% block form_row %}
    <div class="form_row symfony_{{ form.vars.block_prefixes.1 }}">
        {{ form_label(form) }}
        {{ form_widget(form) }}
        {{ form_errors(form) }}
    </div>
{% endblock form_row %} 
```

CSS 文件中的规则会有所不同：

```
div.form_row.symfony_text {color:Red;} 
```

## 更新

[Twitter 引导表单主题现在包含在 Symfony 2.6](http://symfony.com/blog/new-in-symfony-2-6-bootstrap-form-theme)中。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-03T12:50:30.750

您可以使用以下方法获取字段类型：

```
{{ form.FIELD_NAME.vars.block_prefixes.2 }} 
```

因此，如果您的表单中有一个名为 message 的字段，请使用：

```
{{ form.message.vars.block_prefixes.2 }} 
```

对于嵌套表单字段类型，请使用：

```
{{ form.NESTED_FORM_NAME.FIELD_NAME.vars.block_prefixes.2 }} 
```

**编辑 ：**

要覆盖基本表单块，请在模板文件中执行以下操作：

```
....
{% form_theme form _self %}
{% block widget_attributes %}
{% spaceless %}
    id="{{ id }}" name="{{ full_name }}"{% if read_only %} readonly="readonly"{% endif %}{% if disabled %} disabled="disabled"{% endif %}{% if required %} required="required"{% endif %}{% if max_length %} maxlength="{{ max_length }}"{% endif %}{% if pattern %} pattern="{{ pattern }}"{% endif %}
    {% if not attr.class is defined %}
        class="{{ type|default('text') }}"
    {% endif %}
    {% for attrname, attrvalue in attr %}{% if attrname in ['placeholder', 'title'] %}{{ attrname }}="{{ attrvalue|trans({}, translation_domain) }}" {% elseif attrname == 'class' %}{{ attrname }}="{{ type|default('text') }} {{ attrvalue }}"{% else %}{{ attrname }}="{{ attrvalue }}" {% endif %}{% endfor %}
{% endspaceless %}
{% endblock widget_attributes %}
{% block content %}
    ....
{% endblock %} 
```

或获得更好的类型：

```
....
{% form_theme form _self %}
{% block widget_attributes %}
{% spaceless %}
    id="{{ id }}" name="{{ full_name }}"{% if read_only %} readonly="readonly"{% endif %}{% if disabled %} disabled="disabled"{% endif %}{% if required %} required="required"{% endif %}{% if max_length %} maxlength="{{ max_length }}"{% endif %}{% if pattern %} pattern="{{ pattern }}"{% endif %}
    {% if not attr.class is defined %}
        class="{{ form.vars.block_prefixes.2 }}"
    {% endif %}
    {% for attrname, attrvalue in attr %}{% if attrname in ['placeholder', 'title'] %}{{ attrname }}="{{ attrvalue|trans({}, translation_domain) }}" {% elseif attrname == 'class' %}{{ attrname }}="{{ form.vars.block_prefixes.2 }} {{ attrvalue }}"{% else %}{{ attrname }}="{{ attrvalue }}" {% endif %}{% endfor %}
{% endspaceless %}
{% endblock widget_attributes %}
{% block content %}
    ....
{% endblock %} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-05T13:44:39.077

`block_prefixes`用于生成块名称以显示字段（cf`FormRenderer::searchAndRenderBlock`方法）。将显示模板中最具体的现有块（通常是`form_div_layout.html.twig`文件）。

因此，最后一项`block_prefixes`是您输入的 id，以允许您覆盖特定字段的块。

上一个项目将是您需要的项目。

你可以使用这个 :`$form->vars.block_prefixes[$form->vars.block_prefixes|count -2]`在 smarty 语法中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-24T11:29:59.387

为了避免硬编码数组索引（1 或 2 取决于 Symfony 版本），我使用了以下内容：

```
{{ form.vars.block_prefixes | slice(-2,1) | first }} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-06T02:51:13.413

采用

```
{{ form.name.vars.original_type }} 
```

例如，来自我的一个模板

```
{% if myform.fieldname.vars.original_type == 'choice' %}
    <hr>
    {{ form_label(myform.fieldname) }}
    <p>Select a ...</p>
    {{ form_widget(myform.fieldname) }}
{% elseif myform.fieldname.vars.original_type == 'hidden' %}
    {{ form_row(myform.fieldname) }}
{% endif %} 
```

# git - 禁止从特定分支分支和合并

> ID：13196693
> 
> 赞同：8
> 
> 时间：2012-11-02T13:58:05.907
> 
> 标签：git, git-workflow

是否有 git hook 或其他方式来禁止从特定分支分支和合并。我们要确保不会将“脏”集成分支合并到干净的部署分支中。

主要目标是人们不能执行这样的事情：

```
git checkout integration
git checkout -b major_problem_branch 
```

或者

```
git checkout deployment_or_hotfix_or_feature_branch
git merge integration 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T02:45:52.780

您可以通过将其添加到裸存储库中的配置文件来使用服务器上的分支权限：

```
[hooks]
        allowedtomerge = user1,user2,user3
        protectedbranches = master 
```

这将允许 user1、user2 和 user3 合并到 master 分支，但不能合并到其他分支。

或者您可以创建一个预提交挂钩：

```
#!/bin/bash

if [[ `git symbolic-ref HEAD` == "refs/heads/master" ] -a ["$USER" != "user1"]] then
    echo "You cannot commit in master!"
    exit 1
fi 
```

然后你会有人评估并允许改变向前发展。

理想情况下，我会使用您喜欢的系统，例如 gerrit 或 assembla 或 github。他们有通过合并请求控制主分支的好方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T20:56:08.680

通常，您无法可靠地阻止任何人对其本地存储库进行更改。除非您相信您的开发人员永远不会犯任何错误（在这种情况下您不需要这样做），否则您必须在服务器上的挂钩中运行检查。

这意味着你不能指望阻止人们分支，我不确定你为什么真的想要这样做。您可以做的是阻止人们将尚未以某种方式“批准”的工作推送到服务器的部署分支（我将称之为`deploy`）。

* * *

现在第一个问题是如何表达这种认可。

如果您想要一个授权人员必须在部署之前审查工作的工作流程，那么如果工作当前位于名为的分支上，我会让审查人员执行这些步骤`review`：

1.  确保`deploy`完全合并到`review`中，以便以后`deploy`可以快进到`review`.
2.  对 进行任何适当的验证`review`。
3.  使用授权密钥`git tag -s`为`review`.
4.  快进`deploy`到`review`( `git checkout deploy`, `git merge --ff-only review`) 并推动它。

相反，如果您希望任何人都能够部署，但您希望他们必须首先考虑它，您可以做同样的事情，但放宽签名要求。或者你可以祝福一个特定的分支（`tested`比如说），并要求所有工作在被推送到`tested`之前被合并并推送到`deploy`.

* * *

`deploy`服务器如何验证受保护分支是否已获得此批准？基本计划是根据您决定的接受标准使用`update`钩子接受或拒绝参考更新。`refs/heads/deploy`

如果您想要一个满足特定标准的标签，例如由批准的密钥签名，那么您可以找到所有指向建议部署的新对象的标签，使用`git for-each-ref refs/tags`. *如果任何*标签符合标准，请记住接受更新，否则迟早有人会推送一个阻止部署的坏标签。验证是否使用了正确的键作为练习留给读者，但`gpg --no-default-keyring --keyring=approved.gpg`可能会有所帮助。

如果只要有人标记，您就会接受任何提交，您可以使用`git describe --exact-match <object>`. 如果要限制为具有特定名称模式的标签，请添加`--match <pattern>`. 如果您接受未注释的标签，请添加`--tags`.

如果您希望在合并到部署之前将工作合并到祝福分支，您可以检查的输出是否`git rev-parse tested`等于建议的新对象。

在所有情况下，您可能都需要仔细检查推送是否为快进推送。您可以检查`git merge-base <old> <new>`equals `<old>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T14:07:08.903

我认为 Git 不支持分支粒度权限，您应该考虑使用[gitolite](http://sitaramc.github.com/gitolite/why.html)来满足此类要求。

你甚至有一个非常酷的 gitolite Web 界面，称为[GitLab](http://gitlabhq.com/)，外观类似于 github。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T16:13:40.877

如果您从不想从脏集成分支合并到干净部署分支，您可以克隆部署存储库，然后仅在克隆（非部署存储库）上执行脏集成工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T23:07:37.873

我可以建议使用nvie 的[git](https://github.com/nvie) [flow](https://github.com/nvie/gitflow)吗？它通过使用非常简单的命令将所有分支保持在应有的位置。[这是一个备忘单](http://danielkummer.github.com/git-flow-cheatsheet/)![模型](../Images/63a7ab7454ac56cc566166aa86b41779.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-21T11:50:39.520

请注意，如果您愿意在中央仓库级别控制访问权限，[Assembla](https://www.assembla.com/home)是一种 git 托管服务，现在（2013 年 3 月）允许受保护的分支：

请参阅“[放下你的叉子 - 引入受保护的分支](http://blog.assembla.com/assemblablog/tabid/12618/bid/96330/Put-Down-Your-Forks-Introducing-Protected-Branches.aspx)”：

> 受**保护分支**是具有有限写访问权限的分支。
> 指定能够向分支提交代码的团队成员（或组）：

![团体](../Images/c2bdac665a96203ded8083c844421b1a.png)

> 现在，只有这些人才能推送到`Master`分支。
> 其他所有人都必须通过合并请求贡献代码。他们将能够推送到 repo 中的任何其他分支，但不能`Master`。

![受保护的主分支](../Images/649ec5c7da0b53c502b35c5c03b0e2ad.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T05:48:57.503

使用每个功能的分支（如我的文章中所述：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)），您就有了发布候选的想法。您可以在服务器上添加一个更新挂钩，以确保发布候选者的合并基础和开发（也称为集成分支）具有一个共同的基础，即迭代开始标记。这可确保您拥有的只是完整的功能本身。

如果您想更加确定，您可以查看某个功能是否已完成。您必须将钩子脚本与您的问题跟踪系统集成。如果正在集成的功能没有“完成”状态，那么您也可能会失败。例如，Jira 提供了一种通过命令行与之交互的方法。

# oracle - 接受逗号分隔值并按行返回的 oracle 函数

> ID：13196695
> 
> 赞同：0
> 
> 时间：2012-11-02T13:58:21.507
> 
> 标签：oracle, tokenize

我正在寻找一个接受逗号分隔值的 oracle 函数，例如 [abc,cde] 并返回我的行，以便我可以直接插入到表中。

例如-：

```
insert into mytable(col)
select mycustomfunction (abc,cde) 
```

# database - 将工作组用户添加到另一台工作组计算机上的 SQL Server

> ID：13196697
> 
> 赞同：1
> 
> 时间：2012-11-02T13:58:33.240
> 
> 标签：database, sql-server-2008-r2, workgroup

我们有 2 台工作组机器（比如 WG1 和 WG2）

WG1 已安装 SQL Server 2008。WG2 是网络服务器。

我需要在 WG2 服务器上安装应用程序，使用 Windows 身份验证连接到 WG1 数据库服务器。

为此，我需要在 WG1 服务器上的 SQL Server 上添加 WG2 服务器的用户。但是由于服务器在工作组中，因此我无法从 WG1 服务器添加 WG2 服务器的用户。

这可能吗？有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:18:56.950

经过谷歌搜索和研发，最终得出结论，这是不可能的。主要原因是在 Windows 身份验证中，我们将用户名作为“域名\用户名 id”。因此，如果我们在两台机器上添加相同的用户（比如 user1），比如 WK1 和 WK2，则 SQL 中 user1 的 id 在 WK1 和 WK2 上将不同。

# javascript - 为 node/npm 模块生成构建元数据

> ID：13196701
> 
> 赞同：0
> 
> 时间：2012-11-02T13:58:37.763
> 
> 标签：javascript, node.js, npm, gruntjs

我们的团队正在使用 grunt 和 requirejs 来构建/优化我们的应用程序。如果我可以输出一些带有构建日期和更新的次要版本号的 json，那就太好了。似乎这将是一件相当普遍的事情。有什么已经这样做了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:42:24.520

您可以使用 [npm](https://npmjs.org/)。创建 package.json 的最简单方法是使用[npm init](https://npmjs.org/doc/init.html)

# python - import db 和 import datastore 有什么区别

> ID：13196702
> 
> 赞同：0
> 
> 时间：2012-11-02T13:58:44.067
> 
> 标签：python, google-app-engine

import db 和 import datastore 有什么区别

```
from google.appengine.ext import db
# ore
from google.appengine.api import datastore 
```

我试图了解如何从 cccwiki 中的页面获取名称：

```
class WikiPage(BaseRequestHandler):

    def index(name):
        # Loads the pages as index links with the given name.

        query = datastore.Query('Page')
        query['name ='] = name
        entities_list = query.Get(100) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:27:19.607

他们是完全不同的野兽。

*   `google.appengine.api.datastore`是数据存储访问 API。它类似于 SQL 数据库的数据库驱动程序。它允许您连接到数据存储并运行查询。

*   `google.appengine.ext.db`是一个数据建模 API。它让您对要存储在数据存储中的数据进行建模。它类似于 SQLAlchemy 和 Django 的数据建模层。它让您可以轻松地将操作转换为对数据存储的查询，从而在应用程序中表达您需要的数据。

换句话说，`google.appengine.ext.db`您创建一个模型并操作该模型（添加和删除实体，更改这些实体的属性）会导致对底层数据存储的查询，使用`google.appengine.api.datastore`.

您的`WikiPage`代码不使用模型；它直接查询数据存储。我相信`cccwiki`确实有它自己的`Page`类，您可以使用`name`参数和查询返回的数据来创建它们：

```
page = Page(name, entities_list[0]) 
```

结果集中的每个条目在`entities_list`任何情况下都是一个字典，并且内容首先取决于将内容*存储*在记录中的代码。在代码的情况下，我`cccwiki`希望看到`content`、`user`和键。`created``modified`

如果您*确实*使用 API 定义了一个`Page`类`google.appengine.ext.db`，则使用它来查询您的页面：

```
q = Page.all()
q.filter('name = ', name)
page = q.get() 
```

然后您可以访问结果的属性。

# javascript - 浮点数问题。JavaScript

> ID：13196704
> 
> 赞同：0
> 
> 时间：2012-11-02T13:58:53.210
> 
> 标签：javascript, floating-point

基本上我的问题是：为什么我得到的价值是 130.00000000000003 而不是 130.0 ？

我只是输出了引擎盖下的所有内容，并希望它足够清楚。我知道很可能是字符串/浮点数导致了这种情况，但我不知道如何解决它。

我已经尝试过 parseFloat() 、 parseFloat().toFixed(1) 、 parseFloat().round(1) 但我仍然不断得到 .00000000000003。不总是，但有时。

**代码 ：**

```
// ... 'cost' will be passed as a parameter to the function 

 totalBudget = parseFloat(document.getElementById('currentBudget').value);// e.g value ='4' 

 ni = parseFloat(totalBudget);
 cost = (cost).toFixed(1);
 alert("totalBudget " + totalBudget + "\nni " + ni + "\ncost " + cost);
 ni += parseFloat(cost);
 alert("ni " + ni);

 alert('\nni= ' + ni + '\ntotalBudget= ' + totalBudget + '\ncost=' + cost);

 var playerCost = parseFloat(document.getElementById('playerCost' + vTemp).value);
 playerCost = (playerCost).toFixed(1);
 alert('playerCost= ' + playerCost);
 alert('\nNow will subtract ');
 ni -= playerCost;
 alert('\nAfter Subtraction');
 alert('\nni= ' + ni + '\nplayerCost= ' + playerCost);

alert('-------'+
'\ncurrBudget= '+totalBudget+
'\nnew budget ni= '+ni+
'\nPlayer#:vTemp= '+vTemp+
'\nCurr player cost= '+playerCost+
'\nNew players cost= '+cost +
"\nParseFloat(playerCost)for curr player= "+parseFloat(playerCost)); 
```

**输出：**

```
 // If cost = 7.2 and playerCost= 7.1\. Notice all floating values are super fine. 
    totalBudget 129.8
    ni 129.8
    cost 7.2

    totalBudget 129.8
    ni 129.8
    cost 7.2

    ni= 137
    totalBudget= 129.8
    cost=7.2

    plaerCost= 7.1

    Now will subtract 
    After Subtraction

    ni= 129.9
    playerCost= 7.1

    -------
    currBudget= 129.8
    new budget ni= 129.9
    Player#:vTemp= 8
    Curr player cost= 7.1
    New players cost= 7.2
    ParseFloat(playerCost)for curr player= 7.1 
```

在不刷新页面的情况下，我在网站上做一些其他的操作

**输出：**

```
// If cost = 7.3 and playerCost= 7.2\. Notice floating points are totally not fine. 
totalBudget 129.9
ni 129.9
cost 7.3

ni 137.20000000000002

ni= 137.20000000000002
totalBudget= 129.9
cost=7.3

plaerCost= 7.2

Now will subtract 

After Subtraction

ni= 130.00000000000003
playerCost= 7.2

-------
currBudget= 129.9
new budget ni= 130.00000000000003
Player#:vTemp= 8
Curr player cost= 7.2
New players cost= 7.3
ParseFloat(playerCost)for curr player= 7.2 
```

然后我会得到“超出预算。请更换你的球员！” 错误原因 130.00000000000003 > 130.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:03:32.920

**在任何**编程语言中使用（二进制）浮点进行“金钱数学”的尝试都注定要遭受这样的命运。浮点数涉及二进制分数，而不是十进制分数，因此不可避免地会引入这种异常。

请注意，`toFixed()`将浮点数转换为字符串。它并没有太大帮助。

*编辑*——一条评论正确地指出浮点格式不一定是*二进制*浮点格式。我认为旧的 IBM 大型机（据我所知可能是当前的 z 系列机器）使用 base-16 指数和（可能）base-16 尾数。然而，如今，IEEE-754 格式（无论好坏）非常普遍，它是 x86 机器使用的格式。GPU 不是（必须的；我认为 32 位 NVidia 浮点非常接近）所有 IEEE-754，但我所知道的都是二进制浮点系统。（具体来说，根据语言的定义，JavaScript 是二进制浮点数。）

*再次编辑*- Eric Postpischil 在下面的评论中教我:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T14:12:47.770

这可能有点矫枉过正，但试试[BigDecimal](https://github.com/dtrebbien/BigDecimal.js)。浮点数不适合精确数学，并且 javascript 没有内置的“十进制”类型来处理它。

此外，如果精度不是什么大问题，请尝试[toPrecision()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toPrecision)方法。它只会切断你不需要的部分。

```
var a = 1.000000000000005;
var b = a.toPrecision(6); //returns a string
var c = parseFloat(b); //returns a number
alert(b); // shows 1.000000;
alert(c); // shows 1; 
```

编辑：其实你应该没问题

```
function roundFloat(input, prec) {
    return parseFloat(input.toFixed(prec));
} 
```

并将其用于需要四舍五入的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T14:22:53.557

如果你有一个有效的小数位，乘以 10，截断为整数并比较：

```
var budget = 130.00000000000003;
var c1 = Math.round(budget * 10);
var c2 = Math.round(130 * 10);

if (c1 > c2)
    do_something; 
```

# asp.net - aspx 页面布局在 IE9 中失败

> ID：13196711
> 
> 赞同：0
> 
> 时间：2012-11-02T13:59:10.990
> 
> 标签：asp.net, css, internet-explorer-9

我正在尝试解决一个我不确定应该如何解决的问题。（我已经查看了一些东西并尝试了它们，但没有成功）。我有一个用作栏的 aspx 页面。假设看起来像这样（在 chrome 中）： ![在此处输入图像描述](../Images/59347830a9f3f125f570e9b9c70ab0dd.png)

但是当我在 IE9 中运行它时，我得到了这个： ![在此处输入图像描述](../Images/268d8cde052c9ffe449f7f6fd837177e.png)

在 IE9 中，该栏被分成两部分，“描述”标签和文本框/按钮都被推到一侧。

这是我的 css（我验证了它并且没有错误）：

```
<style type="text/css">
    .mainContentHolder
    {
        margin: 0;
        background-color: #f3f3f3;
        border: solid 1px #a1a1a1; 
        min-width:890px;
        width:920px;
        height:50px;
    }
    .mainContentHolder h3
    {
        font-size:13px;
        font-style: normal;
        font-variant: normal;
        font-weight: normal;
        line-height: 20px;
        margin-right: 1%;
    }
    .mainContentHolder label
    {
        font-size: 11px;
        font-style: normal;
        font-variant: normal;
        font-weight: normal;
        line-height: 20px;
        margin-bottom: 10px;
        margin-right: 1%;
    }
    .mainContentHolder input
    {
        width:70px;
    }
    .ui-dialog
    {
        font-size:12px;
    }
    .ui-widget-header
    {
        background: #8D122B;
    }
    .ui-datepicker
    {
        font-size:12px;
    }
    #quickNoteHeader
    {
       color: Green; 
    }
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:14:57.973

Internet Explorer 10 修复了这个问题

# visual-studio-2012 - 将 NUnitTesting GUI 集成到 Visual Studio 2012 并调试测试用例

> ID：13196712
> 
> 赞同：1
> 
> 时间：2012-11-02T13:59:15.033
> 
> 标签：visual-studio-2012, nunit-2.5

我使用 NUnit 2.5 作为 Visual Studio 2012 Professional 的单元测试框架。我将 NUnit.exe 配置为打开 NUnit GUI 以测试我的 dll。

我正在测试一个名为“BookStore.dll”的dll，它是通过编译我当前的类库项目“BookStore”生成的

要将 nunit 配置为我的测试框架，我在 BookStore 库项目属性窗口中设置了以下值：

> 启动外部程序：C:\Nunit\Nunit.exe
> 
> 命令行参数：BookStore.dll
> 
> 工作目录为：C:\Projects\BookStore\Bin\Debug\

我在 nunit.exe.config 中设置了以下配置值

在配置标签下：

```
 <startup>
    <supportedRuntime version="v4.0" />
  </startup> 
```

在运行时标签下：

```
 <loadFromRemoteSources enabled="true" /> 
```

现在我将启动项目设置为此库项目并按 F5。NUnit 打开，我可以选择项目和测试方法，我可以点击运行并查看所有测试结果。

到现在为止还挺好：

**但问题是当我在 BookStore 项目中的任何测试方法中设置断点时，该断点没有命中。**

**谁能帮我我在这里想念什么。？**

注意：我使用这个博客配置了这个单元测试：http: [//blog.toddbauer.me/2011/02/17/debugging-net-nunit-tests-in-visual-studio/](http://blog.toddbauer.me/2011/02/17/debugging-net-nunit-tests-in-visual-studio/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T06:46:57.527

我没有直接按 F5 并运行测试项目，而是尝试按以下方式运行项目：

1.  在需要的地方放置一个断点。
2.  右键单击测试项目 -> 调试 -> 启动新实例。

然后当我选择合适的测试方法并点击运行时，这使我能够点击断点。

现在可以了。

# windows-phone-7.1 - 从主页设置嵌套控件按钮的背景在 windows phone 中不起作用

> ID：13196716
> 
> 赞同：1
> 
> 时间：2012-11-02T13:59:29.070
> 
> 标签：windows-phone-7.1

我正在开发一个 Windows Phone 7.5 应用程序。我有一个在我的几个应用程序页面中使用的自定义标签栏。我为此标签栏创建了一个带有 3 个按钮的自定义控件。

1.  我已经定义了 3 个 ImageSource 类型的 DependencyProperties 来从我实际使用 Tabbar 控件的主页设置按钮的背景。

2.  这 3 个 DependencyProperties 绑定到我的自定义控件 xaml 中 3 个按钮的 ImageSource 属性

3.  然后我从我完全使用底部标签栏控件的主页设置这些属性。

问题是图像可以在视觉工作室设计器上看到，但不能在模拟器上看到。模拟器显示黑色按钮。

下面是我的标签栏控件的 BottomTabBar.xaml：

```
<UserControl x:Class="SafeCell.Views.BottomTabBar"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"             
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"    
    d:DesignHeight="100" d:DesignWidth="480">

    <Grid x:Name="BottomTabBarGrid" Width="{Binding DesignWidth}" Height="{Binding DesignHeight}" Background="Black">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="417*" />
            <ColumnDefinition Width="63*" />
        </Grid.ColumnDefinitions>
        <TextBlock Width="Auto" Text="{Binding Text}"></TextBlock>
        <Button Command="{Binding HomeButtoncommand}"   x:Name="home"  Height="125" Width="194"  HorizontalAlignment="Left" Margin="-11,-12,0,0" VerticalAlignment="Top">
            <Button.Background >
                <ImageBrush ImageSource="{Binding HomeButtonImage}" Stretch="Fill" />
            </Button.Background>
        </Button>
        <Button Command="{Binding TripButtoncommand}"  x:Name="trips" Width="172"  HorizontalAlignment="Right" Margin="0,-12,85,-13" >
            <Button.Background>
                <ImageBrush ImageSource="{Binding TripButtonImage}"  AlignmentX="Center" Stretch="Fill"/>
            </Button.Background>
        </Button>
        <Button Command="{Binding RulesButtoncommand}"   x:Name="rules" Width="183" HorizontalAlignment="Right" Grid.ColumnSpan="2" Margin="0,-12,-12,-13">
            <Button.Background>
                <ImageBrush ImageSource="{Binding RulesButtonImage}"  />
            </Button.Background>
        </Button>
    </Grid>
</UserControl> 
```

下面是我的标签栏控件的 BottomTabBar.xaml.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.ComponentModel;
using System.Windows.Data;
using System.Windows.Media.Imaging;

namespace SafeCell.Views
{
    public partial class BottomTabBar : UserControl,INotifyPropertyChanged
    {

        /// <summary>
        /// Command Dependency Property
        /// </summary>
        private static  DependencyProperty  mTripButtonImage=  DependencyProperty.Register("TripButtonImage", typeof(ImageSource), typeof(BottomTabBar),new PropertyMetadata(null));
        public  ImageSource TripButtonImage
        {
             get
            {

                return (ImageSource)GetValue(mTripButtonImage);
            }
             set
            {
                SetValue(mTripButtonImage, value);                
               NotifyPropertyChanged("TripButtonImage");
            }
        }

        /// <summary>
        /// Command Dependency Property
        /// </summary>
        private static DependencyProperty mHomeButtonImage = DependencyProperty.Register("HomeButtonImage", typeof(ImageSource), typeof(BottomTabBar), new PropertyMetadata(null));
        public ImageSource HomeButtonImage
        {
            get
            {

                return (ImageSource)GetValue(mHomeButtonImage);
            }
            set
            {
                SetValue(mHomeButtonImage, value);
                NotifyPropertyChanged("HomeButtonImage");
            }
        }

        /// <summary>
        /// Command Dependency Property
        /// </summary>
        private static DependencyProperty mRulesButtonImage = DependencyProperty.Register("RulesButtonImage", typeof(ImageSource), typeof(BottomTabBar), new PropertyMetadata(null));
        public ImageSource RulesButtonImage
        {
            get
            {

                return (ImageSource)GetValue(mRulesButtonImage);
            }
            set
            {
                SetValue(mRulesButtonImage, value);
                NotifyPropertyChanged("RulesButtonImage");
            }
        }

        /// <summary>
        /// Command Dependency Property
        /// </summary>
        public static readonly DependencyProperty mTripButtoncommand =
            DependencyProperty.Register("TripButtoncommand", typeof(ICommand), typeof(BottomTabBar),
                new PropertyMetadata(null));
        public ICommand TripButtoncommand
        {
            get
            {
                return (ICommand)GetValue(mTripButtoncommand);
            }
            private set
            {
                SetValue(mTripButtoncommand, value);
              //  NotifyPropertyChanged("TripButtoncommand");
            }
        }

        /// <summary>
        /// Command Dependency Property
        /// </summary>
        public static readonly DependencyProperty mHomeButtoncommand =
            DependencyProperty.Register("HomeButtoncommand", typeof(ICommand), typeof(BottomTabBar),
                new PropertyMetadata(null));

        public ICommand HomeButtoncommand
        {
            get
            {
                return (ICommand)GetValue(mHomeButtoncommand);
            }
            private set
            {
                SetValue(mHomeButtoncommand, value);
               // NotifyPropertyChanged("HomeButtoncommand");
            }
        }

        /// <summary>
        /// Command Dependency Property
        /// </summary>
        public static readonly DependencyProperty mRulesButtoncommand =
            DependencyProperty.Register("RulesButtoncommand", typeof(ICommand), typeof(BottomTabBar),
                new PropertyMetadata(null));
        public ICommand RulesButtoncommand
        {
            get
            {
                return (ICommand)GetValue(mRulesButtoncommand);
            }
            private set
            {
                SetValue(mRulesButtoncommand, value);
               // NotifyPropertyChanged("RulesButtoncommand");
            }
        }

       // ImageBrush mTripActiveImage;
        //ImageBrush mTripInActiveImage;

        //ImageBrush mHomeActiveImage;
        ///ImageBrush mHomeInActiveImage;

        //ImageBrush mRulesActiveImage;
        //ImageBrush mRulesInActiveImage;

        public BottomTabBar()
        {
            try
            {
                InitializeComponent();
                BottomTabBarGrid.DataContext = this;

                //if (mTripActiveImage == null)
                //{
                //    mTripActiveImage = new ImageBrush();
                //    mTripInActiveImage = new ImageBrush();
                 //   mTripActiveImage.ImageSource = new BitmapImage(new Uri("/SafeCell;component/ImgResources/menu-my-trip-active.png", UriKind.RelativeOrAbsolute));
                //    mTripInActiveImage.ImageSource = new BitmapImage(new Uri("/SafeCell;component/ImgResources/menu-my-trip.png", UriKind.RelativeOrAbsolute));
                //}
                //if (mHomeActiveImage == null)
                //{
                //    mHomeActiveImage = new ImageBrush();
                //    mHomeInActiveImage = new ImageBrush();
                //    mHomeActiveImage.ImageSource = new BitmapImage(new Uri("/SafeCell;component/ImgResources/menu-home-active.png", UriKind.RelativeOrAbsolute));
                //    mHomeInActiveImage.ImageSource = new BitmapImage(new Uri("/SafeCell;component/ImgResources/menu-home.png", UriKind.RelativeOrAbsolute));
                //}
                //if (mRulesActiveImage == null)
                //{
                //    mRulesActiveImage = new ImageBrush();
                //    mRulesInActiveImage = new ImageBrush();
                //    mRulesActiveImage.ImageSource = new BitmapImage(new Uri("/SafeCell;component/ImgResources/menu-rules-active.png", UriKind.RelativeOrAbsolute));
                //    mRulesInActiveImage.ImageSource = new BitmapImage(new Uri("/SafeCell;component/ImgResources/menu-rules.png", UriKind.RelativeOrAbsolute));
                //}
                //ImageBrush imageBrush = new ImageBrush();
                //Uri uri = new Uri("/SafeCell;component/ImgResources/menu-my-trip-active.png", UriKind.RelativeOrAbsolute);
                //imageBrush.ImageSource = new BitmapImage(uri);
                //this.myTrip.Background = imageBrush;        

               // trips.Click += new RoutedEventHandler(trips_Click);
            }
            catch (Exception ex)
            {

            }

        }

        void trips_Click(object sender, RoutedEventArgs e)
        {
          //  trips.Background = mTripActiveImage;
           // home.Background = mHomeInActiveImage;
           // rules.Background = mRulesInActiveImage;

        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected void NotifyPropertyChanged(String propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (null != handler)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }

    }
} 
```

...以下是我在页面中使用此控件的方式：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="0,0,0,0" Background="White">
    <TextBlock Name="locationLabel"  Margin="0,0,0,0" FontSize="16" FontWeight="Black"  Text="Gurgaon,Haryana" Foreground="Black"></TextBlock>

    <TabBar:BottomTabBar HomeButtonImage ="/SafeCell;component/ImgResources/menu-home.png"  RulesButtonImage="/SafeCell;component/ImgResources/menu-rules.png"  TripButtonImage="/SafeCell;component/ImgResources/menu-my-trip.png" RulesButtoncommand="{Binding AppRulesTabCmd}"  HomeButtoncommand="{Binding AppHomeTabCmd}"  TripButtoncommand="{Binding AppTripsTabCmd}"  Height="76" VerticalAlignment="Bottom" ></TabBar:BottomTabBar>
</Grid> 
```

# .net - 无法配置应用程序以从另一个文件夹加载外部 dll

> ID：13196723
> 
> 赞同：0
> 
> 时间：2012-11-02T13:59:59.947
> 
> 标签：.net, visual-studio-2010, dll, deployment, installation

我正在尝试将我的外部 .dll（如 DevExpress 和其他）移动到另一个名为“lib”的文件夹。

我在 app.config 文件中添加了以下几行：

```
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <probing privatePath="lib" />
</assemblyBinding> 
```

我将我的 .dll 文件与我的安装项目一起输出到 lib 文件夹。应用程序安装成功，但是当我启动应用程序时，我的启动屏幕（由 VS2010 配置）显示并消失，这就是所发生的一切。目录结构是这样的：

```
// FAILS
..\MyApp\Application.exe
..\MyApp\Application.exe.config // With assemblyBinding added
..\MyApp\lib\*.dll // All dll files are here 
```

如果我将 application.exe.config 文件更改为从基本目录加载并将 .dll 复制回基本目录，它运行正常。

```
// RUNS FINE
..\MyApp\Application.exe
..\MyApp\Application.exe.config // With assemblyBinding removed
..\MyApp\*.dll // All dll files are here 
```

可能是什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-02T15:42:04.860

这是由于配置文件中的错误。修复错误后，它开始工作。

# ios - 如何在 Gamesalad for iOS 中制作通用应用程序？

> ID：13196724
> 
> 赞同：1
> 
> 时间：2012-11-02T14:00:01.897
> 
> 标签：ios, resolution, ios-universal-app, 2d-games

我刚刚开始使用 Gamesalad 制作 iOS 应用程序。我想做一个通用应用程序，但只有 iPhone 或 iPad 选项。那么我该怎么做呢？* 我希望分辨率独立于 *

谢谢，卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T18:04:16.773

没关系，我找到了。只需在 iPad 中以完整的 iPad 分辨率制作，Gamesalad 就会根据正在使用的设备缩小它。

# ios - 将 object_setInstanceVariable() 转换为 ARC？

> ID：13196727
> 
> 赞同：3
> 
> 时间：2012-11-02T14:00:13.353
> 
> 标签：ios, automatic-ref-counting

我想转换一个实例

```
object_setInstanceVariable(self, [key UTF8String], *(id**)addr); 
```

到弧。当我尝试使用 Xcode 内置的 Objective-C ARC 转换器时，我收到以下错误：

> 'object_setInstanceVariable' 不可用：在自动引用计数模式下不可用

我应该如何处理这个问题？我知道我可以将 --fno-objc-arc 作为编译器标志，但如果可能的话，我非常想使用 ARC（我有很多目标，否则我必须手动更改编译器标志） .

（代码最初取自Rackspace Mobile Apps 的 Mike Mayo 的[NSObject+NSCoding 和 Archiver ）](https://github.com/greenisus/NSObject-NSCoding)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T14:58:00.653

来源：[https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)

唯一的其他方法是：

```
void object_setIvar(id object, Ivar ivar, id value); 
```

您`Ivar`事先需要该值，可以通过`class_getInstanceVariable(Class class, char* name)`.

总体而言，这将实现与以前相同的效果，同时与 ARC 兼容。

# batch-file - 使用 taskkill 只杀死一个进程

> ID：13196731
> 
> 赞同：2
> 
> 时间：2012-11-02T14:00:18.340
> 
> 标签：batch-file, taskkill

为了运行游戏，我需要启动它的 exe 两次，然后杀死其中一个 rundll32.exe 进程。我不想每次都手动执行此操作，因此我将其放入批处理文件中，如下所示：

```
start Gothic2.exe
start Gothic2.exe
taskkill /IM rundll32.exe /F 
```

有 2 个 rundll32.exe 实例正在运行并且都被杀死，我只需要终止其中一个。PID 没有帮助，因为 rundll32.exe 每次启动时都会获得一个新的。当有更多同名进程时，如何只杀死一个进程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T17:02:40.850

假设 rundll32.exe 在您启动 Gothic2.exe 时启动，并且您的系统上没有其他进程也在运行，并且可以杀死 rundll32.exe 的第一个实例，您可以使用以下命令：

```
start Gothic2.exe
for /f "tokens=2" %%x in ('tasklist ^| findstr rundll32.exe') do set PIDTOKILL=%%x
start Gothic2.exe
taskkill /F /PID %PIDTOKILL% 
```

我想如果你想杀死 rundll32.exe 的第二个实例，你可以像这样修改它：

```
start Gothic2.exe
for /f "tokens=2" %%x in ('tasklist ^| findstr rundll32.exe') do set PIDTOSAVE=%%x
start Gothic2.exe
for /f "tokens=2" %%x in ('tasklist ^| findstr rundll32.exe ^| findstr /v %PIDTOSAVE%') do taskkill /F /PID %%x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:02:47.940

这假设您不关心您杀死哪个实例：

```
@echo off
for /f "tokens=2 delims=," %%T in ('tasklist /nh /fi "imagename eq rundll32.exe" /fo csv') do (
  echo taskkill /F /pid %%~T 
  goto :eof
) 
```

上面的版本只是回显`taskkill`命令（您可以复制粘贴以执行测试），`echo`当您确定它的行为正常时删除。

# linux - linux scp/sftp 命令

> ID：13196733
> 
> 赞同：0
> 
> 时间：2012-11-02T14:00:22.473
> 
> 标签：linux, sftp, scp

我将使用 Jsch 从 Java 调用这些命令。我一直在寻找以下问题的好答案

1.  远程传输的文件大小是否有限制。
2.  我知道 sftp 命令与 scp 相比可以被中断。但是，如果在这两个命令的文件传输过程中出现网络故障或其他中断，我的选择是什么？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:03:15.763

1.  不。
2.  如果网络出现故障，您将不得不重新开始传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:13:19.297

没有文件大小限制，但如果您希望传输安全，请改用 rsync。

[http://techtavern.wordpress.com/2008/11/19/resume-scprsync-file-transfer/](http://techtavern.wordpress.com/2008/11/19/resume-scprsync-file-transfer/)

# java - 输入流，标记（），重置（）

> ID：13196742
> 
> 赞同：16
> 
> 时间：2012-11-02T14:01:12.403
> 
> 标签：java, java-io

`mark()`和方法如何`reset()`准确地工作（在下面的代码中），一步一步？我尝试编写自己的示例，但开始抛出错误的标记异常或类似的异常，并且我无法理解在此代码中放置标记和重置方法的意义何在，因为我看不出有无区别。

```
import java.io.*;

class BufferedInputStreamDemo {
    public static void main(String args[]) {
        String s = "&copy; is a copyright symbol, "
                + "however &copy isn't.\n";
        byte buf[] = s.getBytes();

        ByteArrayInputStream in = new ByteArrayInputStream(buf);
        int c;
        boolean marked = false;

        //try_with_resources
        try (BufferedInputStream f = new BufferedInputStream(in)) {
            while ((c = f.read()) != -1) {
                switch (c) {
                    case '&':
                        if (!marked) {
                            f.mark(32);
                            marked = true;
                        } else {
                            marked = false;
                        }
                        break;
                    case ';':
                        if (marked) {
                            marked = false;
                            System.out.print("(c)");
                        } else
                            System.out.print((char) c);
                        break;
                    case ' ':
                        if (marked) {
                            marked = false;
                            f.reset();
                            System.out.print("&");
                        } else
                            System.out.print((char) c);
                        break;
                    default:
                        if (!marked)
                            System.out.print((char) c);
                        break;
                }
            }
        } catch (IOException e) {
            System.out.println("I/O Error: " + e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T14:15:50.727

到达时`f.mark(32);`，读取光标已经在 之后`&`，并且设置了一个标记`reset`以知道从哪里跳回来。因此，当您检测到`;`缺少 a 来关闭元素时，您将使用该方法手动打印`&`并向右移动读取光标（在`&`放置标记的位置之后，使用`mark(32)`调用）`reset`。在下一次读取时，因为您的`marked`变量未设置，它将打印字符。

`mark(32)`表示如果您的阅读光标将前进超过 32 个字符，则自动删除标记。这可能是您的其他代码中的问题，即触发错误，因为标记已经失效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T14:07:16.057

请参阅 API 文档：

**[`mark(int)`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedInputStream.html#mark%28int%29)**

> 标记此输入流中的当前位置。对 reset 方法的后续调用将此流重新定位到最后标记的位置，以便后续读取重新读取相同的字节。
> 
> readlimit 参数告诉此输入流允许在标记位置无效之前读取那么多字节。
> 
> 这个方法简单地执行 in.mark(readlimit)。

**[`reset()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedInputStream.html#reset%28%29)**

> 将此流重新定位到最后一次在此输入流上调用标记方法时的位置。
> 
> 这个方法只是简单地执行 in.reset()。
> 
> 流标记旨在用于需要提前阅读以查看流中内容的情况。通常这最容易通过调用一些通用解析器来完成。如果流是由解析处理的类型，它就会愉快地前进。如果流不是那种类型，解析器应该在失败时抛出一个异常。如果这发生在 readlimit 字节内，它允许外部代码重置流并尝试另一个解析器。

# iphone - UITableView 挂起大数据

> ID：13196743
> 
> 赞同：0
> 
> 时间：2012-11-02T14:01:24.497
> 
> 标签：iphone, ios, uitableview

我有一个场景，我正在从数据库中检索 HTML 字符串并使用`UITextView`. 我面临的一个问题是`TableView`挂起一段时间会降低应用程序的性能。并且随着大量数据，这个问题变得可怕，有时应用程序崩溃！我正在寻找一种可以使我的应用程序`Tableview`滚动更流畅和快速的解决方案。

我在这里使用自定义单元格。

我尝试了很多方法，但仍然无法达到我的目标。需要一些专家的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:05:47.733

您是否尝试过使用积木？尝试在下载 HTML 字符串的任何地方使用此调度函数：

```
dispatch_queue_t download = dispatch_queue_create("downloadQueue", nil);
            dispatch_async(download, ^{
                // Write download code that stalls UI here.
            }); 
```

请注意，不要在块内放置任何 UIKit 代码，因为它只允许在主线程上运行，这将导致您的应用程序崩溃。要解决此问题，您需要添加：

```
dispatch_queue_t download = dispatch_queue_create("downloadQueue", nil);
            dispatch_async(download, ^{
                // Write download code that stalls UI here.

                dispatch_async(dispatch_get_main_queue(), ^{
                    //Write UIKit code here, example:
                    [tableView reloadData];
                });
            }); 
```

# javascript - JavaScript 中的过程方法

> ID：13196744
> 
> 赞同：4
> 
> 时间：2012-11-02T14:01:28.823
> 
> 标签：javascript, procedural-programming

我最近观看了一个 JavaScript 视频教程，其中包含与此类似的代码：

```
(function (){
    var b = 10,
        c = 20, 
        d = 50;

    var e = function(){
        return b + c + d;
    };
    return e();
}()); 
```

这是一种常见的 JS 编码模式。作者说这是Javascript代码中程序化方法的一个例子。没看懂，能不能解释一下

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T14:04:01.800

让我们首先说上面是一个自调用匿名函数：

> 自调用匿名函数在您创建时自动/立即运行并且没有名称，因此称为匿名函数。

在我看来，上面是一个相当糟糕的例子，但请考虑以下更改：

```
var f = (function (){
    var b = 10,
        c = 20, 
        d = 50;

    var e = function(){
        return b + c + d;
    };
    return e();
}());

​console.log(f);​ 
```

我们采用了上面的代码并`var f =`在函数前面添加了一个。这将返回`e()`内部函数`f`的值 to ，现在您有了一个`f`要在其他地方使用的值。由于变量`b`, `c`, `d`,是在匿名函数**的函数范围内**`e`声明的，我们可以确保它们不会被篡改。这是一种在 JavaScript 中处理**私有变量的方法。**现在说你的代码中有可能的地方。您可以在开始时运行此匿名函数并将这些事件替换为. 这种将代码抽象为各种过程的想法就是为什么它被称为**过程编程**。****`10 + 20 + 50``f`****

 ******> 过程式编程使用结构化的方法对程序进行编码，其中程序**的功能被分解为多个函数**或子例程，以使其更易于遵循并减少重复代码的需要。

这主要用于使代码更易于阅读、更易于遵循/调试，并使您可以将常用的代码块抽象为编写良好的代码片段。 

* * *

## 阅读更多

* * *

**[自调用函数](http://sarfraznawaz.wordpress.com/2012/01/26/javascript-self-invoking-functions/)**

**[自调用函数的目的](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript?lq=1)**

**[程序化编程](http://en.wikipedia.org/wiki/Procedural_programming)**

**[更多程序化编程](http://www.framingham.edu/~dkeil/iit-javascript.pdf)**

这会让你进入**[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)********

# jquery-mobile - 收音机选择中的jQuery手机号码输入

> ID：13196746
> 
> 赞同：1
> 
> 时间：2012-11-02T14:01:30.400
> 
> 标签：jquery-mobile, radio-button

我正在做一个计算器。我想在收音机选择中输入 5 个数字并根据收音机选择求解一个数字。但是，我很难让数字输入在收音机选择中正确显示。我尝试过使用`<span>`标签，最近使用了 ui-grid（见下面的代码）。我就是得不到好结果。

```
<input type="radio" name="solveforthis" id="radio-choice-1" value="choice-1" checked="checked" />
  <label for="radio-choice-1" class="ui-li-desc">  
    <div class="ui-grid-a">
      <div class="ui-block-a">Field 1</div>
      <div class="ui-block-b"><input type="number" id="val1" value="0.013" style="width:40px"   maxlength="6" /></div>
    </div>
  </label>
<input type="radio" name="solveforthis" id="radio-choice-2" value="choice-2" />
  <label for="radio-choice-2" class="ui-li-desc" value>  
    <div class="ui-grid-a">
      <div class="ui-block-a">Field 2</div>
      <div class="ui-block-b"><input type="number" id="val1" value="0.013" style="width:40px"   maxlength="6" /></div>
    </div>
  </label> 
```

关于如何让它在广播选择中工作的任何想法？我应该考虑更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:28:28.100

你在寻找这样的东西吗？

![在此处输入图像描述](../Images/3e16502dd185043c19836c66d96798d9.png)

源代码：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Radio Buttons</title>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body>
  <div data-role="page" id="myPage">
    <div data-role="content"
      <fieldset data-role="controlgroup">
        <legend><b>Choose a number:</b></legend>
             <input type="radio" name="radio-choice" id="radio-choice-1" value="choice-1" checked="checked" />
             <label for="radio-choice-1">1</label>

             <input type="radio" name="radio-choice" id="radio-choice-2" value="choice-2"  />
             <label for="radio-choice-2">2</label>

             <input type="radio" name="radio-choice" id="radio-choice-3" value="choice-3"  />
             <label for="radio-choice-3">3</label>

             <input type="radio" name="radio-choice" id="radio-choice-4" value="choice-4"  />
             <label for="radio-choice-4">4</label>
       </fieldset>
    </div>
  </div><!-- /page -->

</body>
</html> 
```

另见[文档](http://jquerymobile.com/demos/1.2.0/docs/forms/radiobuttons/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-23T11:40:19.950

我正在寻找同样的问题...

解决方案：http: [//jsfiddle.net/55jZM/](http://jsfiddle.net/55jZM/)

使用：`input type="number"`代替输入`type="password"`

# c# - 为什么我的附件大小为 -1？

> ID：13196752
> 
> 赞同：0
> 
> 时间：2012-11-02T14:01:41.413
> 
> 标签：c#, asp.net, email-attachments

当我尝试调试代码时，在进入“添加附件”部分时，Watch 2 屏幕中的 ContentDisposition 为我提供了附件的 -1 大小。

这使我的代码跳闸并给我错误消息：

> 邮件发送失败。

整个代码：

```
private Attachment createCardAttachment()
{
    //  Information string
    string FamilyName = "FamilyName";
    string FirstName = "FirstName";
    string MiddleName = "MiddleName";
    string Title = "Miss,Mr.";
    string Suffix = "suffix(s)";
    //  string Birthday = "YYYY-MM-DD";
    string WorkAddressStreet = "WorkAddressStreet";
    string WorkAddressCity = "WorkAddressCity";
    string WorkAddressStateProvince = "WorkAddressStateProvince";
    string WorkAddressZipPostalCode = "1234 AA";
    string WorkAddressCountry = "WorkAddressCountry";
    string HomeAddressStreet = "HomeAddressStreet";
    string HomeAddressCity = "HomeAddressCity";
    string HomeAddressStateProvince = "HomeAddressStateProvince";
    string HomeAddressZipPostalCode = "1234 AA";
    string HomeAddressCountry = "HomeAddressCountry";
    string EmailPersonal = "Person@personaldomain.com";
    string EmailWork = "Person@workdomain.com";
    string Organization = "Organization";
    string WorkPhone = "123-456-7890 ext 321";
    string WorkFax = "123-456-7890";
    string CellPhone = "123-456-7890";
    string HomePhone = "123-456-7890";
    string JobTitle = "Programmer";
    string WorkURL = "http://www.domain.com";
    string ID = Request.QueryString["ID"]; // Database QueryString

    //  Save vCard Generate Code as .vcf extension
    string path = ("C:\\local\\vCardGenerator.Website\\FirstName_LastName.vcf");

            // Test attachment send
    Attachment attach = null;

    MemoryStream ms = new MemoryStream();

    //  vCard C# Code
    using (StreamWriter sw = new StreamWriter(ms))
    {
        sw.Write("BEGIN:VCARD\r\n");
        sw.Write("VERSION:1.0\r\n");
        sw.Write("N;LANGUAGE=en-us:{0};{1};{2};{3};{4};;\r\n", FamilyName, FirstName, MiddleName, Title, Suffix);
        sw.Write("FN:{0} {1} {2} {3} {4}\r\n", Title, FirstName, MiddleName, Suffix, FamilyName);
        sw.Write("ORG:{0}\r\n", Organization, "\r\n");
        sw.Write("TEL;WORK;VOICE:{0}\r\n", WorkPhone, "\r\n");
        sw.Write("TEL;WORK;FAX:{0}\r\n", WorkFax, "\r\n");
        sw.Write("TEL;CELL;VOICE:{0}\r\n", CellPhone, "\r\n");
        sw.Write("TEL;HOME;VOICE:{0}\r\n", HomePhone, "\r\n");
        sw.Write("TITLE:{0}\r\n", JobTitle, "\r\n");
        sw.Write("ADR;INTL;PARCEL;WORK:;;{0}; {1}; {2}; {3}; {4};\r\n", WorkAddressStreet, WorkAddressCity, WorkAddressStateProvince, WorkAddressZipPostalCode, WorkAddressCountry);
        sw.Write("ADR;INTL;PARCEL;HOME:;;{0}; {1}; {2}; {3}; {4};\r\n", HomeAddressStreet, HomeAddressCity, HomeAddressStateProvince, HomeAddressZipPostalCode, HomeAddressCountry);
        sw.Write("URL;WORK:{0}\r\n", WorkURL);
        sw.Write("EMAIL;PREF;INTERNET:{0}\r\n", EmailPersonal);
        sw.Write("EMAIL;INTERNET:{0}\r\n", EmailWork);
        sw.Write("END:VCARD\r\n");

        ContentType ct = new ContentType(MediaTypeNames.Application.Octet);
        attach = new Attachment(ms, ct);
        // Goes well until here
        // Gives the attachment a size of -1
        attach.ContentDisposition.FileName = "FirstName_LastName.vcf";
        attach.Name = "FirstName_LastName.vcf";
        sw.Flush();
        sw.Close();
        ms.Close();

    }

    return attach;
}
    }
} 
```

具体的：

```
// Goes well until here
// Gives the attachment a size of -1
attach.ContentDisposition.FileName = "FirstName_LastName.vcf"; 
```

任何人都可以向我提供任何信息为什么我的附件大小为-1？

如果需要，愿意提供更多信息/代码。
提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:57:45.393

在使用附件之前，您正在关闭内存流。将其转储到一个字节数组中，然后加载到您的附件中，或者在完成之前不要关闭您的流。

即使您在 MemoryStream 关​​闭之前设置附件的数据，它仍然使用那个内存流，您需要将它复制到某个东西，这样它就不会认为它突然是一个关闭的流。

编辑：老实说，我很惊讶你没有因为尝试访问封闭的流而获得例外。您可以尝试取出 StreamWriter 上的使用并删除 sw.Close() 和 ms.Close()。您可能应该将内存流的位置重置为。

```
ms.Position = 0; 
```

我只是建议您复制到字节数组，以便您可以正确处理流写入器和内存流。

EDIT2：试试这个:::

```
 private Attachment createCardAttachment()
    {
        // new variable for size
        long attSize = 0;

        //  Information string
        string FamilyName = "FamilyName";
        string FirstName = "FirstName";
        string MiddleName = "MiddleName";
        string Title = "Miss,Mr.";
        string Suffix = "suffix(s)";
        //  string Birthday = "YYYY-MM-DD";
        string WorkAddressStreet = "WorkAddressStreet";
        string WorkAddressCity = "WorkAddressCity";
        string WorkAddressStateProvince = "WorkAddressStateProvince";
        string WorkAddressZipPostalCode = "1234 AA";
        string WorkAddressCountry = "WorkAddressCountry";
        string HomeAddressStreet = "HomeAddressStreet";
        string HomeAddressCity = "HomeAddressCity";
        string HomeAddressStateProvince = "HomeAddressStateProvince";
        string HomeAddressZipPostalCode = "1234 AA";
        string HomeAddressCountry = "HomeAddressCountry";
        string EmailPersonal = "Person@personaldomain.com";
        string EmailWork = "Person@workdomain.com";
        string Organization = "Organization";
        string WorkPhone = "123-456-7890 ext 321";
        string WorkFax = "123-456-7890";
        string CellPhone = "123-456-7890";
        string HomePhone = "123-456-7890";
        string JobTitle = "Programmer";
        string WorkURL = "http://www.domain.com";
        string ID = Request.QueryString["ID"]; // Database QueryString

        //  Save vCard Generate Code as .vcf extension
        string path = ("C:\\local\\vCardGenerator.Website\\FirstName_LastName.vcf");

        // Test attachment send
        Attachment attach = null;

        MemoryStream actualAttachment = new MemoryStream();

        //  vCard C# Code
        using (MemoryStream ms = new MemoryStream())
        using (StreamWriter sw = new StreamWriter(ms))
        {
            sw.Write("BEGIN:VCARD\r\n");
            sw.Write("VERSION:1.0\r\n");
            sw.Write("N;LANGUAGE=en-us:{0};{1};{2};{3};{4};;\r\n", FamilyName, FirstName, MiddleName, Title, Suffix);
            sw.Write("FN:{0} {1} {2} {3} {4}\r\n", Title, FirstName, MiddleName, Suffix, FamilyName);
            sw.Write("ORG:{0}\r\n", Organization, "\r\n");
            sw.Write("TEL;WORK;VOICE:{0}\r\n", WorkPhone, "\r\n");
            sw.Write("TEL;WORK;FAX:{0}\r\n", WorkFax, "\r\n");
            sw.Write("TEL;CELL;VOICE:{0}\r\n", CellPhone, "\r\n");
            sw.Write("TEL;HOME;VOICE:{0}\r\n", HomePhone, "\r\n");
            sw.Write("TITLE:{0}\r\n", JobTitle, "\r\n");
            sw.Write("ADR;INTL;PARCEL;WORK:;;{0}; {1}; {2}; {3}; {4};\r\n", WorkAddressStreet, WorkAddressCity, WorkAddressStateProvince, WorkAddressZipPostalCode, WorkAddressCountry);
            sw.Write("ADR;INTL;PARCEL;HOME:;;{0}; {1}; {2}; {3}; {4};\r\n", HomeAddressStreet, HomeAddressCity, HomeAddressStateProvince, HomeAddressZipPostalCode, HomeAddressCountry);
            sw.Write("URL;WORK:{0}\r\n", WorkURL);
            sw.Write("EMAIL;PREF;INTERNET:{0}\r\n", EmailPersonal);
            sw.Write("EMAIL;INTERNET:{0}\r\n", EmailWork);
            sw.Write("END:VCARD\r\n");

            ContentType ct = new ContentType(MediaTypeNames.Application.Octet);
            sw.Flush();

            attSize = ms.Length;

            //Added position set to makesure copy works right...
            ms.Position = 0;

            //Copy to the stream you plan to use
            ms.CopyTo(actualAttachment);
            actualAttachment.Position = 0;
        }

        attach = new Attachment(actualAttachment, ct);

        //Try to set the attachment size now
        attach.ContentDisposition.Size = attSize;

        attach.ContentDisposition.FileName = "FirstName_LastName.vcf";
        attach.Name = "FirstName_LastName.vcf";

        return attach;
    } 
```

EDIT3：我现在看到您解决了自己的问题。我为您未来的编码提供了另外一件事。这是一种扩展方法，您可以将其与任何版本的 .NET 一起使用，并且与框架版本无关

```
public static class StreamExtensions
{
    public static void CopyToEx(this Stream fromStream, Stream toStream)
    {
        int read = 0;
        byte[] buffer = new byte[1024];
        while((read = fromStream.Read(buffer, 0, 1024) != 0)
        {
            toStream.Write(buffer, 0, read);
        }

        toStream.Position = 0;
    }
} 
```

这样，您可以将扩展方法添加到任何程序中，或将其放入“工具包”中以备将来使用。那么“CopyTo”不存在也没关系，你仍然可以用同样的方式在代码中调用“CopyToEx”。

# javascript - 使用浏览器和 javascript 检测 GPU

> ID：13196753
> 
> 赞同：8
> 
> 时间：2012-11-02T14:01:47.193
> 
> 标签：javascript, gpu, webgl, three.js, ati

我需要确定用户是否正在使用 Chrome 浏览带有 webgl 黑名单上的显卡的网站：

[http://support.google.com/chrome/bin/answer.py?hl=zh-CN&answer=1220892](http://support.google.com/chrome/bin/answer.py?hl=en-GB&answer=1220892)

具体来说，我需要知道他们是否使用 ATI 卡。我正在使用 THREE.js 进行的项目在 ATI 卡上的 Chrome 中查看时会产生非常难看的渲染（线条未消除锯齿），我想提供一个替代方案。

我知道有一个模糊线条的后期效果，但艺术指导的结果更糟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:53:16.620

尝试这个：

```
function aa_test() {
renderer.setSize(4, 4);

var ortho_camera =  new THREE.OrthographicCamera(0, 4, 0, 4, 0, 1 );
var output = new Uint8Array( 4 );

    var material = new THREE.LineBasicMaterial({
      color: 0xffffff
    });

var geometry = new THREE.Geometry();
geometry.vertices.push(new THREE.Vector3(0, 0, 0));
geometry.vertices.push(new THREE.Vector3(4, 4, 0));

    var line = new THREE.Line(geometry, material);

    renderer.clearTarget( aa_target.renderTarget, true, true, true );
    renderer.context.lineWidth(4);

aa_target.add(line);
renderer.render( aa_target, ortho_camera, aa_target.renderTarget );

renderer.context.readPixels( 0, 2, 1, 1, renderer.context.RGBA,    renderer.context.UNSIGNED_BYTE, output );

if (output[0] == 0)
    aa_available = false;

} 
```

所以你所拥有的是一个测试AA是否可用。此方法适用于 Three.js。我试过查看 Chrome 及其特殊页面（chrome://gpu 等），但无法将该数据放入任意 js 脚本中。

使用 FXAA 并没有那么糟糕，因为线条粗细在 1.6 左右。否则，你没有足够的线条来混合。FXAA 非常适合有很多事情的场景，但如果场景主要是线条，那么它往往会使线条过度淡入背景。

最好的答案是 FXAA 并使用这里的方法：

[https://github.com/OpenGLInsights/OpenGLInsightsCode/tree/master/Chapter%2011%20Antialiased%20Volumetric%20Lines%20Using%20Shader-Based%20Extrusion](https://github.com/OpenGLInsights/OpenGLInsightsCode/tree/master/Chapter%2011%20Antialiased%20Volumetric%20Lines%20Using%20Shader-Based%20Extrusion)

这使用了几何着色器，是的，但在前面，它提到使用顶点着色器来获得相同的结果。这很可能会给出更好的线条。

希望有帮助！:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:31:07.707

通常可用于查找信息的 OpenGL 调用在 WebGL 中对此无用，因为浏览器会破坏字符串值：http: [//jsbin.com/ovekor/3/](http://jsbin.com/ovekor/3/)但是，有一个扩展名[`WEBGL_debug_renderer_info`](http://www.khronos.org/registry/webgl/extensions/WEBGL_debug_renderer_info/)，可能是已使用，但当前浏览器支持未知，并且由于它已被标记为安全风险，因此使用起来不会很流畅（可能需要某种调试标志或用户提示）。

简单地测试例如“ATI 卡”也有点邪恶，因为驱动程序可能会改进或某些卡上不存在问题。（这类似于臭名昭著的浏览器嗅探与特征检测。）

因此，您最好的选择是按照评论中的建议进行一些测试渲染。

> 我知道有一个模糊线条的后期效果，但艺术指导的结果更糟。

如果您指的是 Horizo​​ntalBlurShader 和 VerticalBlurShader，那么我建议您尝试 FXAAShader，它是一个实际的屏幕空间抗锯齿滤镜，而不是仅仅模糊整个图像。

# c# - Response.Redirect 在 Try/Catch 块内

> ID：13196755
> 
> 赞同：1
> 
> 时间：2012-11-02T14:01:49.930
> 
> 标签：c#, asp.net

在尝试`convert strting into enum`在 Asp.NET webApplication 中。

代码 -

```
enum MyEnum
{
    field1,
    field2,
    field3
}

string strField1 = "field1";
MyEnum parsedEnum = (MyEnum)Enum.Parse(typeof(MyEnum), strField1); 
```

我遇到以下错误 -

> 无法计算表达式，因为代码已优化或本机框架位于调用堆栈顶部。

我错过了什么。

编辑：更新代码：

我一直在使用此枚举通过验证按钮的 CommandArgument 将用户重定向到其他页面。我在调试解决方案时收到此错误，否则代码工作正常。

```
<form id="form1" runat="server">
    <div>
        <asp:Button Text="Redirect" ID="btnRedirect" OnClick="btnRedirect_Click" CommandName="field1" runat="server" />
    </div>
    </form>

    protected void btnRedirect_Click(object sender, EventArgs e)
    {            
        var btn = sender as Button;
        var cmdName = btn.CommandName; //field1
        MyEnum parsedEnum = (MyEnum)Enum.Parse(typeof(MyEnum), cmdName);

        try
        {
            switch (parsedEnum)
            {
                case MyEnum.field1:
                    Response.Redirect("WebForm1.aspx");
                    break;
                case MyEnum.field2:
                    Response.Redirect("WebForm2.aspx");
                    break;
                case MyEnum.field3:
                    Response.Redirect("WebForm3.aspx");
                    break;
                default:
                    break;
            }
        }
        catch (Exception ex)
        {
            var err = ex.Message;                
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:10:13.593

对该错误消息的所有引用都指向将第二个`false`参数添加到`Request.Redirect`. 代码是否`enum`重定向用户？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:35:58.260

问题在于尝试重定向到`try catch`块内的其他页面。

> 无法计算表达式，因为代码已优化或本机框架位于调用堆栈顶部。

上述异常已引起，在 catch 块内，`current page thread was being aborted.`

# python - Python：如何“锚”文本始终可见和 set_text 方法 Matplotlib

> ID：13196757
> 
> 赞同：3
> 
> 时间：2012-11-02T14:01:52.863
> 
> 标签：python, methods, plot, matplotlib, visible

我有这个代码：

```
from pylab import *
from mpl_toolkits.axes_grid.anchored_artists import AnchoredText
import numpy as np
import matplotlib.pylab as plt

fig = plt.figure()
ax = fig.add_subplot(111)

ann = AnchoredText('If you zoom in or out, i stay here\nbut can you update this text?',
                  prop=dict(size=8), frameon=True,
                  loc=2,
                  )
ann.patch.set_boxstyle("round,pad=0.,rounding_size=0.2")
ax.add_artist(ann) 

delta = 0.025
x = np.arange(-3.0, 3.0, delta)
y = np.arange(-2.0, 2.0, delta)
X, Y = np.meshgrid(x, y)
Z1 = bivariate_normal(X, Y, 1.0, 1.0, 0.0, 0.0)
Z2 = bivariate_normal(X, Y, 1.5, 0.5, 1, 1)
Z = (Z1 - Z2) * 10

plt.contourf(X, Y, Z)

plt.show() 
```

有没有办法将文本锚定为始终可见但也能够使用`set_text`文本对象中的方法来更新包含的文本？在这里，我使用了完美锚定的 AnchoredText，但我找不到更改它包含的文本的方法。在[AnchoredText](http://matplotlib.org/users/annotations_guide.html?highlight=anchoredtext#placing-artist-at-the-anchored-location-of-the-axes) Matplotlib 文档中，我找不到这种可用的方法。如果不能用 AnchoredText 完成，可以用简单的文本对象完成吗？

**编辑**

我接受了**David Zwicker**的解决方案，这里有一个适用于任何需要它的人的工作示例：

```
from pylab import *
from mpl_toolkits.axes_grid.anchored_artists import AnchoredText
import numpy as np
import matplotlib.pylab as plt
import random

fig = plt.figure()
ax = fig.add_subplot(111)

ann = AnchoredText('If you zoom in or out, i stay here\nbut can you update this text?$4.1f$ km s$^{-1}$',
                  prop=dict(size=15), frameon=True,
                  loc=2,
                  )
ann.patch.set_boxstyle("round,pad=0.,rounding_size=0.2")
ax.add_artist(ann) 

delta = 0.025
x = np.arange(-3.0, 3.0, delta)
y = np.arange(-2.0, 2.0, delta)
X, Y = np.meshgrid(x, y)
Z1 = bivariate_normal(X, Y, 1.0, 1.0, 0.0, 0.0)
Z2 = bivariate_normal(X, Y, 1.5, 0.5, 1, 1)
Z = (Z1 - Z2) * 10

plt.contourf(X, Y, Z)

a = ["hhhhh", "qqqqq", "aaaaaaa","ttttt","yyyyy","oooooooo"]

def setanntext(self):
         ann.txt.set_text(random.choice(a))
         plt.draw()

buttonax = plt.axes([0.7, 0.05, 0.1, 0.1])
button = Button(buttonax, 'set text',color='0.85', hovercolor='0.95')
button.on_clicked(setanntext)

plt.show() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T14:24:21.620

您可以访问属性`txt`。您可以使用更新锚定文本

```
ann.txt.set_text('new text')
plt.draw() 
```

这`plt.draw()`是更新绘图和显示新文本所必需的。

# c# - 使用 EPPlus 通过表达式进行条件格式化

> ID：13196762
> 
> 赞同：18
> 
> 时间：2012-11-02T14:02:16.310
> 
> 标签：c#, excel, excel-2007, conditional-formatting, epplus

我正在尝试使用 EPPlus 的条件格式化功能来格式化一些范围。我阅读了很多文档，但没有任何地方提到条件格式表达式。

我很困惑。不知道如何使用该功能。以下是我的一些问题：

1.  我们可以使用多个范围来放入参数 ExcelAddress（如“H1:H17,L1:L17”、“AA1:AA17”）
2.  将公式放入公式属性中是否类似于 Interop Excel？（就像我们使用“A1”来表示当前单元格以在互操作 Excel 中进行格式化）
3.  你能给我一个使用条件格式表达式的小演示代码。

谢谢！

（对不起，我写的英语不好）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-05T10:08:56.537

我自己找到了解决方案。请举一个示例代码：

```
ExcelAddress _formatRangeAddress = new ExcelAddress("B3:B10,D3:D10,F3:F10,H3:H10:J3:J10");
// fill WHITE color if previous cell or current cell is BLANK:
// B3 is the current cell because the range _formatRangeAddress starts from B3.
// OFFSET(B3,0,-1) returns the previous cell's value. It's excel function.
string _statement = "IF(OR(ISBLANK(OFFSET(B3,0,-1)),ISBLANK(B3)),1,0)";
var _cond4 = sheet.ConditionalFormatting.AddExpression(_formatRangeAddress);
_cond4.Style.Fill.PatternType = OfficeOpenXml.Style.ExcelFillStyle.Solid;
_cond4.Style.Fill.BackgroundColor.Color = Color.White;
_cond4.Formula = _statement;

// fill GREEN color if value of the current cell is greater than 
//    or equals to value of the previous cell
_statement = "IF(OFFSET(B3,0,-1)-B3<=0,1,0)";
var _cond1 = sheet.ConditionalFormatting.AddExpression(_formatRangeAddress);
_cond1.Style.Fill.PatternType = OfficeOpenXml.Style.ExcelFillStyle.Solid;
_cond1.Style.Fill.BackgroundColor.Color = Color.Green;
_cond1.Formula = _statement;

// fill RED color if value of the current cell is less than 
//    value of the previous cell
_statement = "IF(OFFSET(B3,0,-1)-B3>0,1,0)";
var _cond3 = sheet.ConditionalFormatting.AddExpression(_formatRangeAddress);
_cond3.Style.Fill.PatternType = OfficeOpenXml.Style.ExcelFillStyle.Solid;
_cond3.Style.Fill.BackgroundColor.Color = Color.Red;
_cond3.Formula = _statement; 
```

在上面的例子中，

*   `_formatRangeAddress`是表达式将应用于条件格式的范围。此范围内的第一个单元格将用于条件公式。(B3)。
*   `_statement`是用于计算条件的公式，该字符串**不** 以等号（`=`）开头（与 MS Excel 的区别点），用于制作表达式的单元格是 `_formatRangeAddress`. (B3)。

希望这对其他需要的人有所帮助。-韩-

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:04:58.437

EPPlus 的 3.1 beta 版本支持条件格式。

看看这里的源代码：http: [//epplus.codeplex.com/discussions/348196/](http://epplus.codeplex.com/discussions/348196/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-28T15:34:24.763

经过许多个月后，我找到了使用 LINQ 和 EPPlus 更灵活、更快速的方法。您需要做的就是：在列表中添加额外的属性以保存 Excel 行号，然后使用 LINQ 检索单元格地址。在这种情况下，它看起来像这样：

```
string sRng = string.Join(",", YourModel.Where(f => f.YourField == null)
    .Select(a => "H" + a.iRow + ",L" + a.iRow + ",AA" + a.iRow)); // this address could be many pages and it works

if (sRng.Length > 0) {
    ws.Cells[sRng].Style.Fill.BackgroundColor.SetColor(System.Drawing.Color.Green); 
} 
```

这是完整的文章：

[https://www.codeproject.com/Tips/1231992/Conditional-Formatting-in-Excel-with-LINQ-and-EPPl](https://www.codeproject.com/Tips/1231992/Conditional-Formatting-in-Excel-with-LINQ-and-EPPl)

另请参见此处的另一个示例：[https](https://stackoverflow.com/a/49022692/8216122) ://stackoverflow.com/a/49022692/8216122 希望这对将来的某人有所帮助。

# struts2 - struts 2 外部样式表链接

> ID：13196763
> 
> 赞同：1
> 
> 时间：2012-11-02T14:02:21.193
> 
> 标签：struts2

嗨，我如何在我的 Struts2 jsp 页面中包含外部样式表链接。

这是我的代码。

```
 <link href="css/style_inner.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T15:27:47.510

尝试：

```
<link href="${pageContext.request.contextPath}/css/style_inner.css" rel="stylesheet" type="text/css"/> 
```

`${pageContext.request.contextPath}`指向您的应用程序根目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T18:48:41.077

使用`<s:url>`标签

```
<link rel="stylesheet" type="text/css" href="<s:url value="/css/style.css"/>"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T00:53:08.120

我现在面临同样的问题，现在我得到了修复，请参阅我的代码

```
<link href="../css/style_inner.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T14:21:55.153

就像你做的那样。使用您的代码，您需要在名为“css”的目录下的 webapp 目录下找到 .css 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-03T07:05:16.527

尝试这个

```
<link href="<%=request.getContextPath()%>/css/alert-messages.css" rel="stylesheet" type="text/css">
```

# file - 如何解决Windows文件/文件夹权限错误

> ID：13196765
> 
> 赞同：1
> 
> 时间：2012-11-02T14:02:33.627
> 
> 标签：file, permissions, directory, windows-server-2003

我有一个 Windows 服务器，其中有一个文件夹，其中包含超过 200.000 张图片，总容量约为 120GB。此外，此文件夹的父文件夹与所有其他子文件夹相比，获得了一些不同的安全权限。

我的问题是，当我从我的一个用户那里删除权限时，它开始变得疯狂。我的意思是这真的很疯狂，因为最后我看到我的一些文件根本没有安全权限！

我试图通过他们的文件夹权限设置将相同的权限添加回这些文件，但它一直给出“拒绝访问！” 错误。我还尝试以管理员身份添加权限，但即使管理员也无权对这些文件执行任何操作！我很确定这是某种 Windows 错误。我必须找到一种方法来解决这个问题。我无法复制或更改任何这些文件。

现在我的文件没有安全或权限条目，作为管理员，我没有资格添加或查看任何权限设置..那么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:05:43.287

您是否尝试过获得受影响文件的所有权？

*   在“安全”选项卡上，单击底部的“高级”按钮；
*   选择“所有者”选项卡，然后单击“编辑”；
*   选择您的帐户或管理员组，然后单击“确定”；
*   继续单击“确定”，直到关闭属性对话框；
*   再次打开属性对话框并尝试更改权限；

如果您想从命令行执行此操作：

```
takeown /f "Your File/Folder Name Here" /r /d y
icacls "Your File/Folder Name Here" /grant administrators:F /t 
```

# php - PHP 限制在 Header 位置重定向被拒绝之前允许的输出量

> ID：13196766
> 
> 赞同：0
> 
> 时间：2012-11-02T14:02:34.783
> 
> 标签：php, redirect, browser, header

`header`在拒绝将浏览器重定向到提供的 URL 之前，PHP 函数是否对浏览器的文本或二进制输出量有限制？

我注意到我可以输出到浏览器*然后*使用 进行重定向`header('Location: $url'); exit();`，但似乎在我输出一定数量后它拒绝并输出此消息？

在 Zend 认证研究期间，我从未遇到任何建议这一点，所以我想知道它是否是一个未记录的特性？

> 警告：无法修改标头信息 - 标头已由 /var/www/vhosts/dev/dev_crmpicco/includes/Rangers.inc 中的（输出开始于 /var/www/vhosts/dev/dev_crmpicco/co.php:935）发送。 php上线1701

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:04:09.983

答案可以在[header()](http://php.net/manual/en/function.header.php)手册中找到

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

在设置标题之前，您不能输出任何文本。如果您认为能够在标头失败之前输出一定数量的字节，您可能有某种输出缓冲集允许您回显任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:08:27.393

答案是否定的。您可能会看到一些输出缓冲正在进行。缓冲区在您的标头之前被刷新了几次。您可以在 php.ini 中默认输出缓冲，或者您可以专门与 ob_start() 一起使用。

# vb.net - VB.net 中的拼字游戏板

> ID：13196768
> 
> 赞同：1
> 
> 时间：2012-11-02T14:02:37.017
> 
> 标签：vb.net

我想知道如何在我的拼字游戏中迭代地循环遍历文本框。我有一个 15x15 的文本框网格，每个网格的名称为 Grid(number)，其中 (number) 是 1-225 个文本框的数量。这是一个示例：如何更改此设置，以便我可以遍历板上的每个文本框（Grid1 - Grid225），以便我单击板上的任何文本框都将获得与文本框 CurrentPiece 相同的文本，而无需执行相同的代码每个文本框？

```
Private Sub Grid1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Grid1.Click
    Grid1.Text = CurrentPiece.Text 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:08:41.570

构建一个这样的方法：

```
Private Sub GridSpaceClick(ByVal sender As Object, ByVal e As EventArgs)
     Dim currentPiece As TextBox = DirectCast(sender, TextBox)

     '...
End Sub 
```

然后遍历所有文本框以将其连接到它们的点击事件，如下所示：

```
For Each box As TextBox In Grid1.Controls.OfType(Of TextBox)()
    AddHandler box.Click, AddressOf GridSpaceClick
Next box 
```

# qt - gdcm 库链接顺序

> ID：13196772
> 
> 赞同：4
> 
> 时间：2012-11-02T14:03:09.420
> 
> 标签：qt, qmake, gdcm

我正在尝试将我的 Qt 应用程序链接到 gdcm 库。当我构建它时，我得到了几个这样的错误：未定义的对'gdcm::System::FileExists(char const*)'的引用。我认为问题出在我的 .pro 文件中指定的链接顺序：

```
LIBS += -lgdcmMSFF \
    -lgdcmCommon \
    -lgdcmDICT \
    -lgdcmDSED \
    -lgdcmIOD \
    -lgdcmMEXD \
    -lgdcmcharls \
    -lgdcmexpat \
    -lgdcmjpeg12 \
    -lgdcmjpeg16 \
    -lgdcmjpeg8 \
    -lgdcmopenjpeg \
    -lgdcmzlib \
    -lgdcmgetopt \
    -lsocketxx \ 
```

任何人都可以为我提供 gdcm 库的正确顺序吗？谢谢

# javascript - Javascript - 一项一项检查数据 - Jquery post()

> ID：13196775
> 
> 赞同：0
> 
> 时间：2012-11-02T14:03:19.667
> 
> 标签：javascript, jquery, post

在我的本地服务器上，一切正常，但是当我将脚本上传到我的 Web 服务器并运行脚本时，我收到一条 php - mysql 错误消息：连接太多。

我正在尝试插入延迟`$.post();`功能，但我不知道如何。

```
var videoArrays = new Array();

videoArrays[0] = '34hgfj23rj';
videoArrays[1] = '2kj4mfwjmhkg';
videoArrays[2] = '23kjrmkf4ekjf';
...
videoArrays[152] = '3ok4jtmfj324hfh';

for(var i in videoArrays){
   $.post('get_data.php', { v_data : videoArray[i] },
   function(data){
      if(data == 'exists'){
         alert('Data exists in data base !');
      }
      else alert('Invalid data !');  
   });
} 
```

我收到错误消息，因为我在不到 3 秒的时间内打开/关闭了许多连接（152 个不同的连接）！

我需要添加延迟，但是在哪里或如何...我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:10:00.687

您需要创建某种队列，这样您就可以控制一次有多少请求处于活动状态。在这里可以找到一个队列示例： [如何在 jQuery 中进行批量 ajax 请求？](https://stackoverflow.com/questions/6986458/how-can-i-make-batches-of-ajax-requests-in-jquery)

在这里： [使用 jQuery.queue() 排队 ajax 请求](https://stackoverflow.com/questions/4785724/queue-ajax-requests-using-jquery-queue)

在这里： http: [//gnarf.net/2011/06/21/jquery-ajaxqueue/](http://gnarf.net/2011/06/21/jquery-ajaxqueue/)

# glassfish-3 - Glassfish 3.1 中每个 Web 服务的端口定义

> ID：13196777
> 
> 赞同：0
> 
> 时间：2012-11-02T14:03:22.190
> 
> 标签：glassfish-3

我有一个war 文件，其中包含两个web 服务helloService 和Calculator。是否可以在不同的端口建立这些服务？例如

```
http://localhost:8080/HelloService
http://localhost:8085/CalculatorService 
```

我正在使用 glassfish 3.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:15:40.937

我认为这也不可能，因为一个war文件对应一个组件，所有服务都在该组件上建立了相同的侦听器。

# algorithm - 解决生产者/消费者问题的算法

> ID：13196792
> 
> 赞同：1
> 
> 时间：2012-11-02T14:04:37.180
> 
> 标签：algorithm, concurrency, operating-system

我想知道如何解决生产者/消费者问题，但使用 2 个不同的消费者，我还需要知道如何使用严格交替来解决它。

我为 1 个生产者和 1 个消费者做了以下算法

```
producer()
{
   while(true)
   {
       if i == N //full buffer
          turn = 1
       while turn <> 0
       {
           // nothing
       }
       produceitem(&item)//produce the item
       insertitem(item, buffer)//insert the item in the buffer
       turn = 1
       //process zone
   }
}

consumer()
{
   while(true)
   {
       if i == 0 //empty buffer
          turn = 0
       while turn <> 1
       {
           // nothing
       }
       consumeitem(&item)
       deleteitem(buffer)//erase the item from buffer
       turn = 0
       //process zone
   }
} 
```

我想知道使用那种“伪代码”来解决与 2 个消费者相同的问题（如果最后一个问题还可以的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:09:36.233

在这两种情况下，您都可以小规模使用[*路由器*模式：](https://www.enterpriseintegrationpatterns.com/patterns/messaging/MessageRouter.html)

[![路由器](../Images/9899b0f173f96fefb540d3b9626a5b9a.png)](https://i.stack.imgur.com/QqIOQ.gif)
[（来源：[enterpriseintegrationpatterns.com](http://www.enterpriseintegrationpatterns.com/img/MessageRouter.gif)）]

基本上在队列之后，您放置特殊的人工消费者（路由器，只有一个）。如果您有两个相互竞争的消费者，只需将每个收到的消息随机放入`outQueue1`或中`outQueue2`。

在严格交替的情况下，路由器会记住上次使用哪个队列并发送到第二个队列。

如果您不想引入额外的步骤，则需要某种同步。在第一种情况下，两个消费者都在竞争他们随机获得的同一个锁。后一种情况更复杂，需要更高级的同步，以便交替唤醒两个消费者。

# jquery - 禁用jquery ajax上的多次点击计数

> ID：13196794
> 
> 赞同：1
> 
> 时间：2012-11-02T14:04:40.397
> 
> 标签：jquery, ajax

嗨，我正在尝试为我正在使用的 wordpress 修复这个插件上的错误。函数看起来像这样

```
function alter_ul_post_values(obj, post_id, ul_type) {
    jQuery(obj).find("span").html("..");
    jQuery.ajax({
        type: "POST",
        url: "<?php  echo get_template_directory_uri() ."/includes/ajax_counter.php";?>",
        data: "post_id="+post_id+"&up_type="+ul_type,
        success: function(msg) {
            jQuery(obj).find("span").html(msg);
        }
    });
} 
```

并调用该函数并计算点击次数！

```
<span class='ul_dcont' onclick=\"alter_ul_post_values(this,'$post_id','wpt2_dislikes')\" >".$text."(<span>".  $dislike_nr ."</span>)</span> 
```

现在，如果您在跨度上快速单击（多次单击），它将计算所有单击次数。我想将其限制为单击一次，因为 cookie 是在单击后创建的，并且不允许再计算任何点击！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:14:39.753

好吧，在 ajax_counter.php 中你能返回响应 JSON 对象吗？

```
response.cookieSet = true/false;
response.msg = your stuff; 
```

所以你知道cookie是否设置然后你可以禁用点击span

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:39:32.727

最简单的方法是创建全局变量。这不是很可爱的方式，但简单有效。

```
var isProcessing = false;  // <- 1

function alter_ul_post_values(obj, post_id, ul_type) {
    if (isProcessing)      // <- 2
        return;            // <- 3

    isProcessing = true;   // <- 4
    jQuery(obj).find("span").html("..");
    jQuery.ajax({
        type: "POST",
        url: "<?php  echo get_template_directory_uri() ."/includes/ajax_counter.php";?>",
        data: "post_id="+post_id+"&up_type="+ul_type,
        success: function(msg) {
            jQuery(obj).find("span").html(msg);
            isProcessing = false;  // <- 5
        }
    });
} 
```

另一个选项是更改`span`为，在单击`input type="button"`时设置属性并在回调时将其删除。`disabled`

# java - Java中的十进制到二进制作业

> ID：13196796
> 
> 赞同：0
> 
> 时间：2012-11-02T14:04:53.920
> 
> 标签：java, binary

我有一个作业要做十进制到二进制的对话。这是我的代码：

```
int num = 0;
int temp = 0;

Scanner sc = new Scanner(System.in);
num = sc.nextInt();

//System.out.print(""+ num%2+ (num%2)%2);
while(num != 0) {
  temp = num;
  System.out.print(""+(int) temp % 2);
  num = num / 2;    
} 
```

它工作正常，但它给我的输出是 LSB 而不是 MSB。

例如：

```
35
110001 
```

但我需要它`100011`。

我不能使用任何函数或方法来反转它。我知道我可以把它放在一个数组、字符串或其他任何东西中并做一些魔术。但我只能使用`while`循环、取模和打印。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T14:11:18.747

您可以从顶部开始，而不是从底部开始。

```
int i = 35;

// find where the top bit is.
int shift = 0;
while (i >>> (shift + 1) > 0) shift++;

// print from the top bit down
while (shift >= 0)
    System.out.print((i >>> shift--) & 1); 
```

打印 i = 35

```
100011 
```

打印 i = -35

```
11111111111111111111111111011101 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T14:11:50.143

数字实际上是从右到左的（猜猜他们为什么称它为“阿拉伯数字”？）。一个数字的最低有效位是它的*最后*一位。

您生成从最低有效到最高有效的二进制数字。您必须存储它们，然后以相反的顺序打印，从最重要到最不重要。

尝试为此使用 a`List<Integer>`或 an `int[]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T14:15:29.547

一种解决方法可能如下：

```
 int indx = 0;
  if(num<0){
      indx =31;
      num = Integer.MAX_VALUE+num+2;
  }else{
      while((int)Math.pow(2, indx) <= num){
           indx++; 
      }
       indx--;//get the highest index
  }
   System.out.print(""+1);//print the highest bit
   num = num % (int)Math.pow(2, indx);
   indx--;
   //print the bits right to left
   for(int i = indx; i >=0; i--){
     if(Math.abs(num)<2){
       System.out.print(""+num);
     }else if((int)Math.pow(2, i) >= num){
        System.out.print(""+0);
     }else{
       num = num % (int)Math.pow(2, i); //get the remaining value
       System.out.print(""+1);
     }
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T14:27:59.933

不要在找到它们时输出每个数字。逐步构建您的输出，然后在最后打印它。

```
public static void main(String[] args)
{
    int num = 0;
    int temp = 0;

    Scanner sc = new Scanner(System.in);
            num = sc.nextInt();

    int place = 1;
    int output = 0;

    while(num != 0) {
       temp = num % 2;
       num = num / 2;    

       output += (place*temp);
       place *=10;
    }

    System.out.print(""+output);
} 
```

您可能需要修改它以处理大数或负数。

# sql - SQL - 更新语句的外键约束错误

> ID：13196802
> 
> 赞同：2
> 
> 时间：2012-11-02T14:05:09.557
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试更新我的表（产品）列 - ProductID(FK) 和 ProductType(FK)。这两列与 MProduct 表的列 MProductID(PK) 和 MProductType(PK) 有关系。

我正在尝试更新

```
ProductID       ProductType
9999            11
9999            12 
```

但我收到以下错误

```
The UPDATE statement conflicted with the FOREIGN KEY constraint "FKHCR_MProduct".
The conflict occurred in database "XXXX", table "dbo.MProduct". 
```

我检查了 MProduct 表，它具有所有有效的查找记录。我不能改变我的表结构。

我也试过这个查询

```
Select ProductID,ProductType
from dbo.Product P
Left Join dbo.MProduct M on M.ProductID = P.ProductID
   and M.ProductType = P.ProductType
where M.ProductType is null
   and M.ProductID is null 
```

并且没有输出，意味着查找表中没有空数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:29:49.750

在所有可能的情况下，您要么尝试`NULL`在表中插入一个值，要么尝试在引用表中插入一个不存在的值。

大多数时候，这是因为您试图`NULL`在字段中插入值。

# android - 摩托罗拉蓝牙低功耗 API 支持平板电脑

> ID：13196808
> 
> 赞同：3
> 
> 时间：2012-11-02T14:05:38.313
> 
> 标签：android, motorola, bluetooth-lowenergy, broadcom

我正在寻找支持并具有所有必要的 BTLE 驱动程序的平板电脑（首选）或手机。手机或平板电脑必须运行 Android 操作系统。我知道目前 android 没有任何 BTLE 功能，但博通和摩托罗拉都有 BTLE API。我需要能够使用自定义设备促进 2 路通信路径。

我对摩托罗拉 API 的理解是，它目前仅支持 HRM 配置文件，不支持 BTLE。如果这是真的，这个配置文件能满足我的需要吗？

当前的 Android BTLE 软件包之间有什么明显的优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:02:21.490

摩托罗拉 ICS_R2 有一个如何与 HRM 通信的示例，但 API 中有足够的内容与任何其他配置文件进行通信——只要 GATT 数据库驻留在“其他”设备（例如 HRM）上。我这里有 XT885，可以与自定义 BLE 设备配合使用。API 文档很差且具有误导性，最好的方法是从 ICS_R2 反编译 BluetoothDevice 和 BluetoothGattService 类并将其用于文档。

ICS_R2 的明显优势在于，在击败它几天后，我发现它可以工作:-)

# android - Android中的服务停止

> ID：13196816
> 
> 赞同：0
> 
> 时间：2012-11-02T14:05:54.187
> 
> 标签：android, android-service

我有始终在后台运行的 Android 服务，以及由始终运行的服务触发的另一个服务，即警报管理器服务。

但是，我想用一个按钮停止服务，我的目标是停止一直在运行的服务，这样警报管理器服务就会自动停止。是正确的观点吗？

我的示例代码如下

```
package com.example.deneme;

public class AndroidNotifyService extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button buttonStartService = (Button)findViewById(R.id.startservice);
    Button buttonStopService = (Button)findViewById(R.id.stopservice);

    buttonStartService.setOnClickListener(new Button.OnClickListener(){

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(AndroidNotifyService.this, com.example.deneme.AndroidScheduledService.class);
            AndroidNotifyService.this.startService(intent);
        }});

    buttonStopService.setOnClickListener(new Button.OnClickListener(){

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            Intent intent = new Intent();
            intent.setAction(AndroidScheduledService.ACTION);
            intent.putExtra("RQS", AndroidScheduledService.RQS_STOP_SERVICE);
            sendBroadcast(intent);

        }});

} 
```

}

我一直在运行的服务

```
package com.example.deneme;

public class AndroidScheduledService extends Service {

final static String ACTION = "AndroidScheduledServiceAction";
final static String STOP_SERVICE = "";
final static int RQS_STOP_SERVICE = 1;

public int onStartCommand(Intent intent, int flags, int startId) {
   // TODO Auto-generated method stub
    Intent myIntent = new Intent(getBaseContext(),
      MyScheduledReceiver.class);

    PendingIntent pendingIntent
     = PendingIntent.getBroadcast(getBaseContext(),
       0, myIntent, 0);

    AlarmManager alarmManager
      = (AlarmManager)getSystemService(ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 10);
    long interval = 60 * 1000; //
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
      calendar.getTimeInMillis(), interval, pendingIntent);

    return super.onStartCommand(intent, flags, startId);
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    //this.unregisterReceiver(notifyServiceReceiver);
    Intent intent = new Intent();
    intent.setAction(NotifyService.ACTION);
    intent.putExtra("RQS", NotifyService.RQS_STOP_SERVICE);
    sendBroadcast(intent);
    super.onDestroy();
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

我的报警管理器服务

```
public class NotifyService extends Service {

final static String ACTION = "NotifyServiceAction";
final static String STOP_SERVICE = "";
final static int RQS_STOP_SERVICE = 1;

HttpClient httpclnt;
HttpPost httppst;
String message;
String response;

//NotifyServiceReceiver notifyServiceReceiver;

private static final int MY_NOTIFICATION_ID=1;
private NotificationManager notificationManager;
private Notification myNotification;
private final String myBlog = "http://android-er.blogspot.com/";

/*
@Override
public void onCreate() {
    // TODO Auto-generated method stub
    notifyServiceReceiver = new NotifyServiceReceiver();
    super.onCreate();
}
*/
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    // TODO Auto-generated method stub

    /*
    IntentFilter intentFilter = new IntentFilter();
    intentFilter.addAction(ACTION);
    registerReceiver(notifyServiceReceiver, intentFilter);

*/  

    // Send Notification

    notificationManager = 
        (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
    myNotification = new Notification(R.drawable.ic_launcher, 
            "Notification!", 
            System.currentTimeMillis());
    Context context = getApplicationContext();
    String notificationTitle = "Exercise of Notification!";
    String notificationText = "http://www.google.com/";
    Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(myBlog));
    PendingIntent pendingIntent 
            = PendingIntent.getActivity(getBaseContext(), 
                    0, myIntent, 
                    Intent.FLAG_ACTIVITY_NEW_TASK);
    myNotification.defaults |= Notification.DEFAULT_SOUND;
    myNotification.flags |= Notification.FLAG_AUTO_CANCEL;
    myNotification.setLatestEventInfo(context, 
                notificationTitle, 
                notificationText, 
                pendingIntent);
    notificationManager.notify(MY_NOTIFICATION_ID, myNotification);

    return super.onStartCommand(intent, flags, startId);
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    //this.unregisterReceiver(notifyServiceReceiver);
    super.onDestroy();
}
/*
@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public class NotifyServiceReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub
        int rqs = arg1.getIntExtra("RQS", 0);
        if (rqs == RQS_STOP_SERVICE){
            stopSelf();
        }
    }
}*/

} 
```

我的广播接收器课程

对于 NotifyService 类包 com.example.deneme；

```
public class MyScheduledReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
// TODO Auto-generated method stub

Intent intent2 = new Intent(context, com.example.deneme.NotifyService.class);
context.startService(intent2);

  }

} 
```

对于 AndroidScheduledService 类

```
package com.example.deneme;

public class AutoStartNotifyReceiver extends BroadcastReceiver {

private final String BOOT_COMPLETED_ACTION = "android.intent.action.BOOT_COMPLETED";

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

    if(intent.getAction().equals(BOOT_COMPLETED_ACTION)){
        Intent myIntent = new Intent(context, com.example.deneme.AndroidScheduledService.class);
        context.startService(myIntent);
    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:13:13.547

停止服务不会停止警报管理器服务。您必须手动停止它。

```
Intent intent = new Intent(this, com.example.deneme.AndroidScheduledService.class);
PendingIntent sender = PendingIntent.getBroadcast(this,
           0, intent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

alarmManager.cancel(sender); 
```

停止服务：

```
 Intent stopServiceIntent = new Intent(getBaseContext(), yourServiceToStop.class);
  getBaseContext().stopService(stopServiceIntent ); 
```

# groovy - 如何避免 MissingPropertyException

> ID：13196817
> 
> 赞同：14
> 
> 时间：2012-11-02T14:06:05.250
> 
> 标签：groovy

如果一个对象没有属性并且我正在访问该属性，我们会得到一个`MissingPropertyException`. 我可以做一些类似于安全 null ( `?.`) 的事情来防止丢失属性，因此它不会引发异常吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-02T14:15:10.760

一种选择是：

```
def result = obj.hasProperty( 'b' ) ? obj.b : null 
```

如果对象没有属性，它将返回 null ...

另一个是像这样添加`propertyMissing`到您的课程中：

```
def propertyMissing( name ) {
  null
} 
```

这意味着任何缺少的属性只会导致 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T07:51:41.087

你也可以使用 try/catch

```
try
{   env.GERRIT_TOPIC=GERRIT_TOPIC
}
catch (e_val)
{   echo 'missing GERRIT_TOPIC'
} 
```

# ios - uitableviewcells 重叠 3 个重叠的前 2 个单元格

> ID：13196818
> 
> 赞同：0
> 
> 时间：2012-11-02T14:06:07.040
> 
> 标签：ios, uitableview

我一直试图弄清楚我的细胞是否重叠，但我失败了。我的表包含 3 个条目 - 前 2 个重叠，但第 3 个没有。我在网上搜索，发现变量应该在本地定义。我接受了这个建议，但遗憾的是，它没有帮助。

下面是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIColor *rung;
    if (indexPath.row%2 == 0) {
      //  0.662745 0.662745 0.662745
        rung=[UIColor colorWithRed:0.802745 green:0.802745 blue:0.802745 alpha:1];
        color=NO;
    }
    else {
       // 0.972549 0.972549 1
    //0.411765 0.411765 0.411765
        rung=[UIColor colorWithRed:0.862745 green:0.862745 blue:0.862745 alpha:1];
        color=YES;
    }

    //static NSString *MyIdentifier = @"Identifier";
    NSLog(@"====IndexPath is %d",indexPath.row);

    ChatSlideDC *slide = [[HMMainManager getSharedInstance].currentMeeting.resumedChatMessages objectAtIndex:indexPath.section];

    ChatMessageDC *message;

    message = [[slide ChatMessageArray]objectAtIndex:indexPath.row];
    NSLog(@"%i",indexPath.row);

    NSLog(@"%@",message.senderEmail);
    NSLog(@"====Message Type is %@",message.MessageType);
    //--storing Email-ID for Pics
    UIImage *avatar;
    if(message.AttendeeID)
    {
        avatar= [(AppDelegate *)[[UIApplication sharedApplication]delegate] getAvatar:message.AttendeeID andAttendeEmail:message.senderEmail];
    }

    //
    NSLog(@"%@",message.Message);
    if ([message.MessageType isEqualToString: @"0"] || [message.MessageType isEqualToString:@"1"]) {
        ChatCustomCell * cell = (ChatCustomCell *) [tableView dequeueReusableCellWithIdentifier:@"ChatCustomCell"];

        if (cell == nil) {

            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ChatCustomCell" owner:self options:nil];
            cell = (ChatCustomCell*)[nib objectAtIndex:0];
            }
    //    cell.backgroundImage.backgroundColor=rung;
        UIView *view = [[UIView alloc] initWithFrame:CGRectZero];
        view.backgroundColor = rung;
        view.opaque = YES;
        cell.backgroundView = view;
        [view release];
        //cell.backgroundColor=rung;
        cell.lblSaid.text =@"Said";
        cell.lblName.text =message.SenderName;
        cell.lblText.text =message.Message;

        NSLog(@"manager strID: %@ chat cell attendeeID %@",[HMMainManager getSharedInstance].currentMeeting.strAttendeeID,message.AttendeeID);
        NSLog(@"%@ == %@",message.AttendeeID,[HMMainManager getSharedInstance].currentMeeting.strAttendeeID);

        [cell.imgThumbUserPic setImage:[UIImage imageNamed:@"updateProfileIco.png"]];

//        if ([message.AttendeeID isEqualToString:[HMMainManager getSharedInstance].currentMeeting.strAttendeeID]) {
//            cell.imgThumbUserPic.image = [MainManager getSharedInstance].userManager.userImage;
            cell.imgThumbUserPic.image = avatar;
//        }

        cell.selectionStyle = UITableViewCellEditingStyleNone;
   //     [message release];
        return cell;
    }
    if ([message.MessageType isEqualToString:@"2"] || [message.MessageType isEqualToString:@"3"] ) {
        if ([message.MessageType isEqualToString:@"3"] || (message.question && [message.question length]>0)) {
            //show asnwer cell
//            AnswerCustomCell * cell = (AnswerCustomCell *) [tableView dequeueReusableCellWithIdentifier:@"AnswerCustomCell"];
   NSMutableArray *answerquestArray=   [[[HMMainManager getSharedInstance] currentMeeting]questionAnswerArray];

        //    UITableViewCell *newCell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"abc"];
            int width=300,height=164,totalHeight;;
        //    AnswerMultipleCell * cell;
            int questionIndex;
            QuestionWithAnswers *qwa;
            for (int i=0;i<answerquestArray.count;i++) {

                qwa=[answerquestArray objectAtIndex:i];
                NSLog(@"");
                if ([qwa.questionID isEqualToString:message.QuestionID]) {

                    break;
                }
            }//end for    

         //               newCell.frame=CGRectMake(0, totalHeight, width, height);
            ChatMessageDC *answersInArr;
            int i=0;
            for (i=0;i<[qwa.answersMArray count];i++) {

                answersInArr=[qwa.answersMArray objectAtIndex:i];
                if([answersInArr.MessageId isEqualToString:message.MessageId])
                {
                    break;
                }

            }
      AnswerMultipleCell *     cell = (AnswerMultipleCell *) [tableView dequeueReusableCellWithIdentifier:@"AnswerMultipleCell"];
            if (cell == nil) 
            {              
//                NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"AnswerCustomCell" owner:self options:nil];
//                cell = (AnswerCustomCell*)[nib objectAtIndex:0];
                NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"AnswerMultipleCell" owner:self options:nil];
                cell = (AnswerMultipleCell*)[nib objectAtIndex:0];
            }
            UIView *view = [[UIView alloc] initWithFrame:CGRectZero];
            view.backgroundColor = rung;
            view.opaque = YES;
            cell.backgroundView = view;
            [view release];
            //answer here goes

            cell.answerTxt.text=answersInArr.Message;
            cell.userName.text=answersInArr.SenderName;
            [cell.answerTxt flashScrollIndicators];

            //question

            NSLog(@"%@",message.MessageId);

            NSLog(@"manager strID: %@ ans cell attendeeID %@",[HMMainManager getSharedInstance].currentMeeting.strAttendeeID,message.AttendeeID);

            [cell.userPic setImage:[UIImage imageNamed:@"updateProfileIco.png" ]];
//            [cell.quePic setImage:[UIImage imageNamed:@"updateProfileIco.png" ]];

            //if ([message.AttendeeID isEqualToString:[HMMainManager getSharedInstance].currentMeeting.strAttendeeID]) {
                  avatar= [(AppDelegate *)[[UIApplication sharedApplication]delegate] getAvatar:[qwa.attendeIDMArray objectAtIndex:i] andAttendeEmail:[qwa.attendeEmails objectAtIndex:i]];         
                 NSLog(@"----------:: %@ == %@ and message:%@",message.AttendeeID ,[HMMainManager getSharedInstance].currentMeeting.strAttendeeID,message.Message);
//                cell.ansPic.image = [MainManager getSharedInstance].userManager.userImage;
                cell.userPic.image = avatar;

      //      } 
            NSLog(@"manager strID: %@ ans cell attendeeID %@",[HMMainManager getSharedInstance].currentMeeting.strAttendeeID,message.QuestionID);

  //            {

                NSLog(@"------------:: %@ == %@ and message:%@",message.questionAttendeeID ,[HMMainManager getSharedInstance].currentMeeting.strAttendeeID,message.Message);

//                cell.quePic.image = [MainManager getSharedInstance].userManager.userImage;
//                cell.quePic.image = avatar;
//            }

//}//end answersArray
            return cell;
        }
        else {
            //show question cell

            QuestionCustomCell * cell = (QuestionCustomCell *) [tableView dequeueReusableCellWithIdentifier:@"QuestionCustomCell"];

            if (cell == nil) {
                NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"QuestionCustomCell" owner:self options:nil];
                cell = (QuestionCustomCell*)[nib objectAtIndex:0];
            }
            UIView *view = [[UIView alloc] initWithFrame:CGRectZero];
            view.backgroundColor = rung;
            view.opaque = YES;
            cell.backgroundView = view;
            [view release];
            cell.lblSaid.text =@"Asked";
            cell.lblName.text =message.SenderName;

            NSLog(@"Question is %@", message.question);

            cell.lblText.text =message.Message;
            [cell.lblText flashScrollIndicators];
//            cell.lblAnswerQuestion.hidden = NO;
            if (!message.answered) {
                cell.lblAnswerQuestion.hidden = NO;
                cell.userInteractionEnabled = YES;
            }else {
                cell.lblAnswerQuestion.hidden = YES;
                cell.userInteractionEnabled = NO;
            }

//            cell.userInteractionEnabled = YES;
            [[HMMainManager getSharedInstance].currentMeeting.questionDict setObject:message.AttendeeID forKey:message.MessageId];  

            NSLog(@"manager strID: %@ ques cell attendeeID %@",[HMMainManager getSharedInstance].currentMeeting.strAttendeeID,message.AttendeeID);

            [cell.imgThumbUserPic setImage:[UIImage imageNamed:@"updateProfileIco.png"]];
  //          if ([message.AttendeeID isEqualToString:[HMMainManager getSharedInstance].currentMeeting.strAttendeeID]) {
//                cell.imgThumbUserPic.image = [MainManager getSharedInstance].userManager.userImage;
                cell.imgThumbUserPic.image = avatar;
  //          }

            cell.tvAnswer.delegate = self;

            NSMutableString* finalSec = [NSString stringWithFormat:@"%d",indexPath.section];

            for (NSInteger x=0; x<3; x++) {

                if (finalSec.length <3) {
                    finalSec = [NSString stringWithFormat:@"0%@",finalSec];
                }

            }

            NSLog(@"%@", finalSec);

            NSString* tag = [NSString stringWithFormat:@"%d%@",indexPath.row+1, finalSec];

             NSLog(@"tag value %d",[tag intValue]);

            cell.btnAnswer.tag = [tag intValue];//indexPath.row + 1000 + indexPath.section;
            cell.tvAnswer.tag = [tag intValue];
            cell.selectionStyle = UITableViewCellEditingStyleNone;
            [cell.btnAnswer addTarget:self action:@selector(answerButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

    //        [message release];
            return cell;

        }

    }
 //   [message release];
    return nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:18:18.190

如果您有自定义（非 44 点高度）单元格，那么您需要实现`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

# javascript - jshint 中出现错误的擒纵机构错误

> ID：13196821
> 
> 赞同：-3
> 
> 时间：2012-11-02T14:06:22.170
> 
> 标签：javascript, regex, jshint

> **可能重复：**
> [出现错误：jshint 中未转义的“-”](https://stackoverflow.com/questions/13196436/getting-error-unescaped-in-jshint)

第 3 行：`var iChars = "!@#$%^&*+=[]\\\;{}|\":<>?";` 擒纵机构不良。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:09:23.890

`;`不需要转义，所以`\;`是一个糟糕的转义序列。

```
var iChars = "!@#$%^&*+=[]\\\;{}|\":<>?";
//                          ^--- this backslash is the problem 
```

只需删除之前的反斜杠`;`：

```
var iChars = "!@#$%^&*+=[]\\;{}|\":<>?"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:09:57.503

我想你不需要`\\\`，只是`\\`。

# java - 带有 Netbeans 的 BackgroundPanel.java

> ID：13196822
> 
> 赞同：1
> 
> 时间：2012-11-02T14:06:28.133
> 
> 标签：java, swing, netbeans, background, jpanel

最近我发现了这个[BackgroundPanel.java](http://tips4java.wordpress.com/2008/10/12/background-panel/)，我想知道如何将它与 netbeans 一起使用，我创建了一个名为 clases 的包，在其中我有类。

在其他包（远景）中，我有 jFrame，我尝试不同的方法将此“面板”添加到我的 jFrame，但没有任何效果。我知道我必须将它添加到 initComponents()

```
 private void initComponents() {

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 400, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 300, Short.MAX_VALUE)
    );

    pack();
}// </editor-fold> 
```

并在 setContentPane 中的 jFrame 中添加 BackgroundPanel，但是如何？

有人可以帮助我吗？非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:19:48.657

（注意：你的描述没有任何意义，所以我在这里做了一点读心术，并对你的意图和代码做一些假设）。

1.  如果您的 JFrames 是由 Netbeans 生成的，只需将 BackgroundPanel.java 从源代码拖到设计视图中，就像从调色板中一样（必须编译项目才能使其工作）。这是最简单的方法。

2.  如果您需要将 BackgroundPanel 作为 contentPane，请将其拖到设计视图但在任何可见组件之外。构建面板的代码应该出现在 initComponents() 方法中（在 backgroundPanel1 的名称下），但面板本身不应该变得可见。现在选择JFrame，在它的属性窗口中找到“contentPane”并选择backgroundPanel1。

# android - 通过 Google Tasks API 使用 Google Play 服务

> ID：13196823
> 
> 赞同：3
> 
> 时间：2012-11-02T14:06:28.477
> 
> 标签：android, google-api-java-client, google-play-services

我正在尝试将我的应用与 Google API 集成，例如 Google Tasks，

在使用[Google Play 服务](https://developers.google.com/android/google-play-services/)之前，我会使用[Google APIs Client Library](http://code.google.com/p/google-api-java-client/) for Java 和[AccountManager](http://developer.android.com/reference/android/accounts/AccountManager.html)来检索和访问 API 的 OAUTH 令牌。

这种方法的优点是我可以：

*   流畅地使用 Java 客户端 API 来访问我的应用程序可能需要的所有 API 方法。

缺点是：

*   身份验证对话框看起来很糟糕，并且让用户感到困惑（如 Google IO Play 服务会话中所述）
*   我需要向应用程序添加各种权限。

我猜“谷歌播放服务”改变了这一切：

*   不需要应用程序许可，因为它直接取自播放服务，然后最终取自用户
*   它还提供了新的漂亮的[AccountPicker](https://developers.google.com/android/google-play-services/reference/com/google/android/gms/common/AccountPicker)，使用户的身份验证更加清晰。

但是访问 Java 客户端库 API 方法的便利性丢失了！！！我必须自己创建所有请求。

问题是使用播放服务对 OAUTH 令牌进行身份验证和请求的最佳方法是什么，然后继续使用客户端库 APIS 访问实际的 API 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:26:38.223

您应该能够将`GoogleAuthUtil.getToken`（来自 Google Play 服务）的结果直接传递给`GoogleCredential.setAccessToken`（来自 Google API 客户端库）。

后者的示例可以在[TasksSample.java](http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/src/main/java/com/google/api/services/samples/tasks/android/TasksSample.java?repo=samples)中找到。事实上，由于`AccountManager.getAuthToken`和`GoogleAuthUtil.getToken`API 非常相似，除了异步与同步的区别外，您应该能够修改 Tasks 示例以使用 Google Play 服务，而不会有太大的困难。

一些非常粗略的伪代码是：

```
...
// this should all be in a separate thread (e.g. AsyncTask)
final String token = GoogleAuthUtil.getToken(context, email, scope);
GoogleCredential credential = new GoogleCredential();
credential.setAccessToken(token);

Tasks service = new Tasks.Builder(transport, jsonFactory, credential)
    .setApplicationName("Google-TasksAndroidSample/1.0")
    .setJsonHttpRequestInitializer(new GoogleKeyInitializer(ClientCredentials.KEY))
    .build();

List<String> result = new ArrayList<String>();
Tasks.TasksOperations.List listRequest = service.tasks().list("@default");
listRequest.setFields("items/title");
List<Task> tasks = listRequest.execute().getItems();
... 
```

# objective-c - 添加图像边框

> ID：13196824
> 
> 赞同：1
> 
> 时间：2012-11-02T14:06:30.783
> 
> 标签：objective-c, macos, cocoa, drawing, nsimage

好的，这就是我想要做的：

*   获取`NSImage`包含，假设是一张照片（1000+ x 1000+ 尺寸）。
*   获取另一个`NSImage`仅包含透明背景和简单黑色边框 (500x500) 的内容。
*   “合并”这 2 张图像，这样生成的图像就是带有边框的照片。

这是我到目前为止所取得的成就：

```
NSImage* resultImage = [[[self drop] image] copy];
[resultImage lockFocus];

NSRect newRect = NSMakeRect(0, 0, [[[self drop] image] size].width, [[[self drop] image] size].height);

[[[self drop2] image] drawInRect:newRect  
                        fromRect:NSZeroRect 
                       operation:NSCompositeSourceOver 
                        fraction:1.0];

[resultImage unlockFocus];

[[self drop] setImage:resultImage]; 
```

`[self drop]`包含照片`[self drop2]`的 ImageWell 和包含边框的 ImageWell在哪里。

问题是它正在工作。然而，**生成的图像 - 很明显 - 显示出有点“拉伸”的边界。**

![带边框的图像](../Images/b419d2f58615e0f7f1bc856f815b119a.png)

我该如何解决？鉴于原始照片应该是任何尺寸，我怎样才能使它使用边框（某些固定尺寸）并且仍然避免拉伸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:18:24.010

直接用 做边界怎么样`CALayer`，例如：

```
#import <QuartzCore/QuartzCore.h>

CALayer *layer = imageView.layer;
layer.borderColor = [[NSColor blackColor] CGColor];
layer.borderWidth = 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:18:59.340

我会以不同的方式做到这一点。只需根据需要调整图像大小，然后添加边框。您可以通过具有黑色背景的简单视图或合适的图像（假设您想要具有可自定义的图像边框，如框架）来做到这一点，其大小始终保持结果边框不变。然后，如果需要，您可以从该视图生成新图像。

# entity-framework - 数据库中的实体框架约束命名

> ID：13196826
> 
> 赞同：2
> 
> 时间：2012-11-02T14:06:41.977
> 
> 标签：entity-framework, migration, primary-key, constraints

我对数据库中某些主键的命名有疑问。在我的开发系统上，主键约束被命名为`PK_FullTableName`. 现在在生产系统上，所有约束都被命名`PK_PartofTableName_3214EC27164452B1`（每个表都有不同的十六进制字符）。

我遇到的问题是迁移。我有一个基于代码的迁移，它应该更改表的主键，因此必须删除旧的约束/主键`DropPrimaryKey("FullTableName", new[] { "Field1", "Field2" });`

在我的开发系统上一切正常，在生产系统上我得到一个 SQL 异常，即`PK_FullTableName`找不到约束并且我无法迁移。

我不知道为什么实体框架在这两个系统上命名的约束不同。有谁知道这种行为取决于什么？这是来自 EF 还是来自数据库（MSSQLExpress）的命名？有没有解决方法？

# java - FTPClient 在 2 个成功的文件上传后连接超时

> ID：13196828
> 
> 赞同：2
> 
> 时间：2012-11-02T14:06:51.890
> 
> 标签：java, ftp, ftp-client

我正在使用 FTPClient 并通过 Timer 每 30 秒向 FTP 服务器发送文件，有趣的是，我在 2 次成功上传后出现连接超时错误，第三次不会发生，错误如下，用不同的设置和相同的结果进行了多次测试；

```
java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at org.apache.commons.net.SocketClient.connect(SocketClient.java:171)
at org.apache.commons.net.SocketClient.connect(SocketClient.java:192)
at org.apache.commons.net.SocketClient.connect(SocketClient.java:285)
at com.xxxxx.PDF2VS.send2FTP(PDF2VS.java:87)
at com.xxxxx.PDF2VS$1.run(PDF2VS.java:35)
at java.util.TimerThread.mainLoop(Timer.java:555)
at java.util.TimerThread.run(Timer.java:505) 
```

这是我发现的发送文件的代码；

```
 public static boolean send2FTP ()   
       {
          FTPClient client = new FTPClient();
          FileInputStream fis = null;

    try {
            //read from the 
            Properties prop = new Properties();
            InputStream in = PDF2VS.class.getResourceAsStream("/config.properties");

            prop.load(in);
            client.setControlKeepAliveTimeout(300);
            client.connect(prop.getProperty("FTP_ADDRESS"));
            client.login(prop.getProperty("UNAME"), prop.getProperty("PWD"));
            System.out.print("Message : " + client.getReplyString());

            client.setDefaultPort(Integer.parseInt(prop.getProperty("PORT")));
            int f1 = client.getDefaultPort();
            client.setFileType(FTPClient.BINARY_FILE_TYPE);
            System.out.println("File transfer port no  " + f1);
            System.out.println("FTP server reply ." + client.getReplyString());

            String localfile = prop.getProperty("LOCAL_FILE");
            fis = new FileInputStream(localfile);

            int lastSlash = localfile.lastIndexOf('/');
            String filename = localfile.substring(lastSlash+1);

            System.out.println("Uploading: " + filename);
            System.out.println("file : "+fis);

            client.setFileTransferMode(2);
            System.out.println("Flag reply ." + client.getReplyString());

            boolean flag = client.storeFile(filename,fis);

            System.out.println("Flag reply ." + client.getReplyString());

            if (flag) {
                System.out.println("Successfully uploaded the file");

            } else {
                System.out.println("Not able to upload the file");
            }

            fis.close();
            client.logout();
            System.out.println("Logout ." + client.getReplyString());

            in.close();
    }
    catch (Exception e) 
    {
       e.printStackTrace();
    }
    finally 
    {
        if (client.isConnected()) {
            try {
                client.disconnect();
                System.out.println("Server Disconnected." + client.getReplyString());
            } catch (IOException ioe) {
                 ioe.printStackTrace();
            }
        }
    }

return true; 
} 
```

它确实工作了 2 次并收到错误，我做错了什么？

# android - ListView：长按每一行的imageview后手指上移时，调用onItemClick函数

> ID：13196829
> 
> 赞同：0
> 
> 时间：2012-11-02T14:06:55.067
> 
> 标签：android, listview, imageview

我对 ListView 有疑问。首先，这个问题只出现在我真正的安卓设备上，在模拟器上运行正常。

1 我有一个 ListView：listVew。在它的每一行中，都有一个imageView：picView。我在自定义的适配器中为图像视图设置了一个长按监听器：

```
picView.setOnLongClickListener(new View.OnLongClickListener()
{
   public boolean onLongClick(View v) 
   {
        ...
   }
} 
```

当我长按 imageView 时，它会移动。

2 在我的 Activity 类中，我在 listView 的每个项目上设置了 OnItemClick 侦听器。

```
listView.setOnItemClickListener(new OnItemClickListener()
{
    public void onItemClick(AdapterView<?> parent, View view,int position, long id)
    {
        ...
    }
} 
```

问题是，在真实设备中，当我长按 imageView 并向上移动手指时，OnItemClick 方法被激活。在模拟器中，这从未发生过。

有谁知道为什么会这样？非常感谢！

添加：

我在模拟器中测试了更多次，现在我认为这个问题现在可以很容易地描述如下：

当设备检测到 longclicklistener 时，有没有办法禁用其他 TouchEvent 侦听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:36:10.340

我认为你需要拦截listview的触摸事件。所以尝试在 Adapter.getView() 中设置 OnClickListener

```
View getView(View convertView, int position, ViewGroup parent){
    convertView.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v){
            onItemClick(parent, convertView, position, 0);
        }
    });
    return convertView;
} 
```

# arrays - 从给定数组中查找值

> ID：13196832
> 
> 赞同：0
> 
> 时间：2012-11-02T14:07:15.323
> 
> 标签：arrays, matlab, find

我在整个水柱中记录了一些温度测量值：

```
depth = 0.2211:0.26:26;
temp = 1 + (30-1)*(rand(1,length(depth))); 
```

深度不连续的地方。我想以 0.5 m 的深度增量创建温度曲线。为了实现这一点，我首先创建了一个从最小到最大测量深度的均匀间隔点数组：

```
newD = min(depth):0.5:max(depth); 
```

接下来我想从每个新深度的“温度”中获取温度，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:37:49.803

评估

`newTemp = interp1(depth,temp,newD)`

您可能想尝试使用 4th 输入`interp1`，查看文档。

# node.js - Stylus 仅在加载索引页面时重新编译 .styl 文件

> ID：13196835
> 
> 赞同：0
> 
> 时间：2012-11-02T14:07:22.860
> 
> 标签：node.js, express, stylus

我最初在尝试设置 Stylus 时非常沮丧，因为我会调整我的`src`和`dest`设置，重新启动 Node，刷新，并且 Stylus 没有编译。这是在类似的页面上`http://localhost:3000/tasks`。但是，`src`and`dest`路径是正确的，当我重新启动 Node 并尝试加载索引页面时`http://localhost:3000`，Stylus 将正确编译。

所以现在我发现它可以正确编译，但只能从主页 URL，我想知道我是否设置了错误，因为在我从主页刷新之前，对 .styl 文件的任何更改都不会更新，而不是任何 GET 参数页面。

```
var express = require('express');
var app = express();
var stylus = require('stylus');

app.configure(function () {
    this.set("views", __dirname + "/views/jade");
    this.set("view engine", "jade");
    this.use(express.bodyParser());
    this.use(express.methodOverride());
    this.use(this.router);

    this.use(stylus.middleware({
        src: __dirname + '/views/styl', //styl files to be compiled
        dest: __dirname + '/public/css', //destination for compiled css
        compress: true
    }));

    this.use(express.static(__dirname + '/public'));
}); 
```

我描述的是正常过程吗，或者如果 Stylus 注意到`.styl`文件中的更改，无论您的 URL 是什么，都应该重新编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:09:00.963

我最终使用了默认的 Stylus 路径，这意味着在我的“views”和“public”目录中都使用了一个名为“stylesheets”的目录，以及以下代码：

```
 //Stylus
    this.use(stylus.middleware({
        src: __dirname + '/views', //styl files to be compiled
        dest: __dirname + '/public', //destination for compiled css
        compress: true
    })); 
```

Stylus 然后在 /views/stylesheets 中查找 .styl 文件，并将它们编译到 /public/stylesheets。出于某种原因，试图更改目录的名称并喜欢我的路径给我带来了麻烦。从阅读一些论坛来看，目前这似乎不被认为是一个错误，但确实存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T02:56:41.363

我没有 50 的声誉可发表评论，但您可以根据需要更改路径。首先需要`path`模块：

```
path = require('path') 
```

然后根据您的口味解决：

```
path.resolve('./') //this will be resolved to where your node app resides
path.resolve('../') //this will go one directory up from the path of your node app file
path.resolve('../../')  //this will go two directories up from the path of your node app file 
```

用于`console.log()`查看这些产品产生了什么。然后对于手写笔中的选项，只需将`__dirname`其更改为解析路径，而不是使用作为基础。所以假设你有一个目录结构：

```
$userPath/myApp/frontend/src/app.js
$userPath/myApp/frontend/src/public
$userPath/myApp/frontend/static/public 
```

然后您可以：

```
var staticPath = path.resolve('../') + '/static'; //$userPath/myApp/frontend/static

app.use(
  stylus.middleware({
    src:  __dirname + '/public/',
    dest: staticPath + '/public/',
    debug: true,
    compile : function(str, path) {
      return stylus(str)
        .set('filename', path)
        .set('warn', true)
        .set('compress', true);
    }
  })
); 
```

# jquery-ui - JQuery 移动滑块工具提示（动态）

> ID：13196836
> 
> 赞同：0
> 
> 时间：2012-11-02T14:07:32.640
> 
> 标签：jquery-ui, jquery-mobile, tooltip, jquery-ui-slider

如何将工具提示与 JQM 滑块一起使用？我想将工具提示添加到我的 JQM 范围（例如 1-5）中，说明 ui-slider-handle 的位置（“您的选择：3”）。我试过qTip：

```
 $('#content a[href]').qtip({
      content: 'i am a qtip'
   }); 
```

但它不适用于我的移动设备。我想让用户知道他做了哪个选择（在他用拇指离开屏幕之前）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T15:15:13.093

有一个 jQuery Mobile 扩展提供了这个功能，可以在[这里找到](http://www.uglymongrel.com/jqm/popup-arrow/docs/demos/demos/slider/tooltip.html)

你会做什么：

1.  **将data-popup-enabled="true"**的数据属性添加到您的输入元素以显示工具提示。
2.  复制网站上的 JavaScript 代码并将其添加到您的解决方案中
3.  复制网站上的 CSS 规则集并将其添加到您的解决方案中。

以下是滑块的输入元素应如何显示的示例：

```
<input type="range" name="slider-1" id="slider-1" min="0" max="100" value="50" data-popup-enabled="true"> 
```

# c# - 文件配置文件ASP.NET的条件加密

> ID：13196837
> 
> 赞同：0
> 
> 时间：2012-11-02T14:07:34.260
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, encryption

我有个问题。我有一个 MVC3 项目的解决方案。我需要对我的项目进行一些配置，以对配置文件进行条件加密。条件：如果我构建调试版本 - 文件未加密。如果我构建一个发布版本 - 文件被加密。

我找到了这篇[文章](http://weblogs.asp.net/scottgu/archive/2006/01/09/434893.aspx) ，但我不知道它是如何自动化的。是否需要对 VS2010 中的解决方案属性进行一些调整或其他？

我想要2个相关的配置。如果我在非加密配置中进行了更改，那么在发布构建后，我会收到包含所有应用更改的新加密配置。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:25:47.477

您想按照这些说明加密 web.config 或 app.config 的一部分

[http://wiki.asp.net/page.aspx/1155/encrypt-connectionstrings-section-of-webconfig/](http://wiki.asp.net/page.aspx/1155/encrypt-connectionstrings-section-of-webconfig/)

或者

[http://weblogs.asp.net/scottgu/archive/2006/01/09/434893.aspx](http://weblogs.asp.net/scottgu/archive/2006/01/09/434893.aspx)

# django - 在 Django 中使用模型管理器构建复杂的查询集，返回空查询集

> ID：13196844
> 
> 赞同：0
> 
> 时间：2012-11-02T14:07:54.963
> 
> 标签：django

我正在尝试构建一个复杂的查询集，从而与其他表连接。让我感到兴奋的是，当我打印 queryset.query 时能够看到查询，但是当我从代码中调用它时，它没有返回任何结果。

```
class CarManager(models.Manager):
    def get_query_set(self):
        return super(CarManager, self).get_query_set().filter(version_to__isnull=True)

    def my_cars(self, language, user):

        qs=self.extra(
            select = {
                'make_display' : '`%s`.`%s`' % (ModelLookUpI18n._meta.db_table, ModelLookUpI18n._meta.get_field('make_display').column),
                'model_display' : '`%s`.`%s`' % (ModelLookUpI18n._meta.db_table, ModelLookUpI18n._meta.get_field('model_display').column),
                'trim_display'  : '`%s`.`%s`' % (ModelLookUpI18n._meta.db_table, ModelLookUpI18n._meta.get_field('trim_display').column),
                },
            tables = [
                '`%s`' % ModelLookUpI18n._meta.db_table,
            ],
            where = [
                '`%s`.`%s` = `%s`.`%s`' % (ModelLookUpI18n._meta.db_table, ModelLookUpI18n._meta.get_field('model').column, ModelLookup._meta.db_table, ModelLookup._meta.get_field('id').column),
                "`%s`.`%s`='%s'" % (ModelLookUpI18n._meta.db_table, ModelLookUpI18n._meta.get_field('language').column, language)
            ]
        ).select_related().filter(created_by=user).order_by('-created_at')

        print qs.query # prints the SQL statement
        print qs # always prints []
        return qs 
```

当我复制打印在控制台中的查询并将其粘贴到 mySQL 终端时，我记录了 21 条记录，这对我来说看起来很正常。然而，查询集总是空的，关于如何进一步调试的任何想法？

哦，我什至监视了 MYSQL 执行日志，以确保引擎的内容与 qs.query 打印的内容相匹配，并且相同。

# javascript - jQuery Camera 滑块键盘控件

> ID：13196846
> 
> 赞同：0
> 
> 时间：2012-11-02T14:08:04.403
> 
> 标签：javascript, jquery

我在我的网站上使用[Camera jQuery 幻灯片](http://www.pixedelic.com/plugins/camera/)，但它无法使用我需要的键盘进行控制。在他们的谷歌小组中，有人发布了上一个/下一个有效的命令，但是我仍然需要暂停/恢复键盘按钮才能工作（在我的情况下，我使用的是空格键）。我需要输入什么才能让 .camera_play 也由空格键控制？这甚至可能吗？

这是与问题有关的代码：

```
 $(document.documentElement).keyup(function (event) {
// handle cursor keys
if (event.keyCode == 37) {//go left
    $('.camera_prev').click();
} else if (event.keyCode == 39) { //go right
    $('.camera_next').click();
} else if(event.keyCode == 32) { // spacebar to stop
    $('.camera_stop').click(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:22:47.727

在看到相机插件的工作原理后，您可以使用`:visible`选择器单击当前活动的操作（可能是停止或恢复），如下所示：

```
$(document.documentElement).keyup(function (event) {
   // handle cursor keys
   if (event.keyCode == 37) {//go left
       $('.camera_prev').click();
   } else if (event.keyCode == 39) { //go right
       $('.camera_next').click();
   } else if(event.keyCode == 32) { // spacebar to stop
       $('.camera_stop , .camera_play').filter(':visible').click();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:26:08.450

文档没有显示这一点，但我深入研究了代码，看起来当您单击停止按钮时，它会在主包装器中添加一个名为“paused”的类。以下是如何更新代码以处理暂停和以空格键开始的方法。

```
$(document.documentElement).keyup(function (event) {
    // handle cursor keys
    if (event.keyCode == 37) {//go left
        $('.camera_prev').click();
    } else if (event.keyCode == 39) { //go right
        $('.camera_next').click();
    } else if(event.keyCode == 32) { // spacebar to stop
        if($('.camera_wrap').hasClass('paused')){  
            $('.camera_play').click();
        }
        else{
            $('.camera_stop').click();
        }
    }
} 
```

# android - Eclipse 无法识别我的 Android 手机 (HTC Sensation)

> ID：13196850
> 
> 赞同：2
> 
> 时间：2012-11-02T14:08:09.747
> 
> 标签：android, eclipse, windows-8

我已经安装了**Windows 8**并安装了 Eclipse。我试图在我的手机**HTC Sensation**上运行一个应用程序，但 Eclipse 没有找到它。当我按下运行按钮时，它说：“没有找到兼容的目标。你想添加新的 android 虚拟设备吗？” 但是当我将三星 Galaxy S3 连接到电脑时，它神奇地工作了！但遗憾的是，那不是我的手机。它必须对感觉起作用。哦，在 Windows 7 上，它运行良好。

到目前为止..我尝试了很多东西，但没有任何效果。

*   我尝试安装最新的 HTC Sync，不起作用。
*   我试图重新启动我的手机、ADB 和 Eclipse，但不起作用。
*   我尝试在 Windows 7 的兼容模式下运行 HTC Sync（HTC Sync 也无法识别 Sensation），并尝试以管理员身份运行它，但它不起作用。
*   我搜索了网络，但没有任何帮助...
*   在设备 Maneger 中，在“其他设备”下是“Android 手机”，但是有黄色三角形，我点击的任何东西......没有任何帮助。

此外，我可以浏览文件并将其复制到手机上的 SD 卡。所以 Windows 可以识别我的手机！ *但之前，当我拥有 Windows 7 时，一切正常！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:15:19.893

你可以尝试一些事情：

*   安装[USBDeview](http://www.nirsoft.net/utils/usb_devices_view.html)以取消注册驱动程序并重新安装它们
*   使用另一个 USB 端口/电缆。有些人对 pc 的前端端口或 USB3 端口有问题。此外，低质量的电缆可能会导致您的手机一遍又一遍地连接和断开连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:09:53.140

尝试下载谷歌驱动程序，并在控制面板中更新到它们。

# android - 如何区分 480x800 和 540x960 屏幕分辨率的可绘制文件夹？

> ID：13196852
> 
> 赞同：1
> 
> 时间：2012-11-02T14:08:24.373
> 
> 标签：android, android-layout, drawable

我想在我的应用程序中为 480x800 和 540x960 屏幕分辨率准备单独的可绘制对象。由于两者都被归类为`hdpi`可绘制对象，因此我看不到直接的方法来做到这一点。
我应该在所有布局中以编程方式进行吗（我希望不是）？
我可以创建两个文件夹：
`drawable-hdpi`
`drawable-hdpi-540x960`？

这里最好的解决方案是什么？
我想与 Android >= 2.3.3 兼容，所以我不能使用新的屏幕限定符。

谢谢。

**编辑：**
我想为这些基本分辨率设置不同的图标集：
320x480
480x800
540x960
720x1280

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:00:19.273

在项目结构中生成的普通可绘制文件夹都根据设备密度用于所有类型的设备。如果你想为 540X960 使用大尺寸的图像，那么你可以使用 drawable-large （大说明符），其名称与用于电话的可绘制对象中使用的名称相同。large 说明符将区分大分辨率设备的可绘制对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-22T19:35:09.047

您必须根据像素密度和屏幕尺寸命名可绘制对象。计算在这里...

dpi = sqrt (540^2+960^2) / 4.3"（设备尺寸）= ~256 dp = px / (dpi / 160) = 540 / (dpi / 160) = 330

drawable 将被命名为 drawable-sw330dp。我已经对此进行了测试。这很好用。其他drawables也没有问题。布局将是 layout-sw330dp

或者你可以通过 drawable-sw540p 试试这个。我还没有测试过。但我想它会很好用。布局将是 layout-sw540p

# android - 对话框中的 view.getWidth() 不起作用

> ID：13196856
> 
> 赞同：0
> 
> 时间：2012-11-02T14:08:35.933
> 
> 标签：android, android-view, android-dialog

我想创建方形按钮，但是因为我无法通过 XML 获取宽度以将其分配给按钮的高度，所以我使用 Java 来完成。所以我这样做：

```
View body = inflater.inflate(R.layout.picker_numeric, null);
Button up = (Button) body.findViewById(R.id.picker_numeric_up);
Log.d(TAG, "" + up.getWidth());
int height = up.getWidth();
up.setHeight(height);
........................
AlertDialog.Builder builder = new AlertDialog.Builder(activity)
        .setTitle(title)
        .setView(body)
........................ 
```

我曾经`Log.d`确认`getWidth()`返回 0。有人知道为什么会这样吗？我别无选择。

编辑：在*MKJParekh*和*Simon*说我的代码之后是这样的：

对话框内容.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/picker_numeric_layout"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:gravity="center"
android:baselineAligned="false"
android:padding="@dimen/padding_small"
android:weightSum="3"
tools:ignore="HardcodedText,UselessParent" >

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:orientation="vertical" >

    <Button
        android:id="@+id/picker_numeric_up"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="@dimen/padding_medium"
        android:layout_marginRight="@dimen/padding_medium"
        android:gravity="center"
        android:text="+" />

    <EditText
        android:id="@+id/picker_numeric_value"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="@dimen/padding_medium"
        android:layout_marginRight="@dimen/padding_medium"
        android:gravity="center"
        android:inputType="number" />

    <Button
        android:id="@+id/picker_numeric_down"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="@dimen/padding_medium"
        android:layout_marginRight="@dimen/padding_medium"
        android:gravity="center"
        android:text="-" />
</LinearLayout>
</LinearLayout> 
```

对话框的创建者类中的方法：

```
public void equalDimens() {
    up.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
               MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
    int height = up.getMeasuredWidth();
    android.util.Log.d("dd", ""+height);
    up.setLayoutParams(new LinearLayout.LayoutParams(height, height));
    down.setLayoutParams(new LinearLayout.LayoutParams(height, height));
} 
```

然后在 Activity 的类中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    createMyDialog();
    LinearLayout mainLayout = (LinearLayout ) this.getLayoutInflater().inflate(R.layout.main, null); 
    mainLayout.getViewTreeObserver().addOnGlobalLayoutListener(
    new ViewTreeObserver.OnGlobalLayoutListener() {
         public void onGlobalLayout() {
            myDialogClass.equalDimens();
         }
    });

    setContentView(mainLayout);
} 
```

不打电话`myDialogClass.equalDimens()`我得到这个： ![在此处输入图像描述](../Images/623dcbe38a8067546d09388d761057b9.png)

并调用我得到的方法：

![在此处输入图像描述](../Images/aa163fe1972d869ea9395cebe569fdf4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:25:33.320

您需要先`measure`查看视图，然后才能获得视图的高度和宽度。

你可以这样做，这`ll2`是你的任何视图对象

```
ll2.measure(
        MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
        MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

int height = ll2.getMeasuredHeight();
int width = ll2.getMeasuredWidth(); 
```

在获得高度和宽度后，您需要将它们设置为，

```
ll2.setLayoutParams(new LayoutParams(width, height)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:11:13.407

您的视图已测量并膨胀，但尚未在 onCreate 中绘制。

您可以使用（在其他解决方案中）：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    // get width here
} 
```

如果您不能使用它，例如您的活动产生了对话框，请尝试使用全局布局侦听器。

```
public void onCreate(Bundle savedInstanceState)
 {
     super.onCreate(savedInstanceState);

     // inflate your main layout here (use RelativeLayout or whatever your root ViewGroup type is
     LinearLayout mainLayout = (LinearLayout ) this.getLayoutInflater().inflate(R.layout.main, null); 

     // set a global layout listener which will be called when the layout pass is completed and the view is drawn
     mainLayout.getViewTreeObserver().addOnGlobalLayoutListener(
     new ViewTreeObserver.OnGlobalLayoutListener() {
          public void onGlobalLayout() {
               // measure your views here
          }
     }
 );

 setContentView(mainLayout); 
```

}

# powershell - 外壳 | 无法弄清楚陷阱功能

> ID：13196857
> 
> 赞同：2
> 
> 时间：2012-11-02T14:08:36.983
> 
> 标签：powershell

好吧，我不知所措>。>我已经尝试过尝试/捕获和陷阱功能，但它不会捕获这个错误......

```
# Adjustable Variables
$Computers_Path = ".\Compuers.txt"
$Log_Path = ".\Log.txt"

# Script Specific Variables

# Validate Adjustable Variables
TRAP { Write-Host "Unable to locate list of computer names at $Computers_Path"; Continue; }
$Computers = Get-Content $Computers_Path 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:24:33.383

尝试这个：

```
$Computers = Get-Content $Computers_Path -ea stop 
```

这让`trap`捕获异常。

# jquery - 如何在 MVC3 中使用 javascript 检查多个文件扩展名？

> ID：13196863
> 
> 赞同：0
> 
> 时间：2012-11-02T14:08:46.563
> 
> 标签：jquery, regex, asp.net-mvc-3

大家好，我正在尝试放置一个文件上传按钮，该按钮提供上传扩展名为 mp4、avi、swf 的视频文件，那么如何使用 javascript 检查这些多个扩展名？

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        <br />
        <p><input type="file" id="file" name="file" size="23"/></p><br />
        <p><input type="submit" value="Upload file" /></p>        
    } 
```

Javascript：

```
$(function () {
    $('form').submit(function () {
        var selectedFile = $('#file').val();
        var matches = selectedFile.match(/\.(xlsx?)$/i);
        if (matches == null) {
            alert('please select an Excel file');
            return false;
        }
        return true;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:14:23.570

这里我有一些正则表达式来验证文件上传。

用于验证 .mp3 或 .MP3 或 .mpeg 或 .MPEG 或 m3u 或 M3U 的文件格式的正则表达式

```
Re= /^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))+(.mp3|.MP3|.mpeg|.MPEG|.m3u|.M3U)$/; 
```

用于验证 .doc 或 .docx 文件格式的正则表达式

```
Re= /^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))+(.doc|.docx|.DOC|.DOCX)$/; 
```

用于验证 .txt 或 .TXT 文件格式的正则表达式

```
Re= /^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))+(.txt|.TXT)$/; 
```

用于验证 .jpeg 或 .JPEG 或 .gif 或 .GIF 或 .png 或 .PNG 的文件格式的正则表达式

```
Re= /^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))+(.jpeg|.JPEG|.gif|.GIF| .png|.PNG)$/; 
```

使用它，您可以根据您的要求进行更改...

```
 var myRegExp = /[a-zA-z]$/;
    if(myRegExp.test("testing the string"))
    {
      // Success
    }
    else
    {
      // Fail
    } 
```

希望这会有所帮助：D ....

# c# - 执行过程时刷新页面

> ID：13196866
> 
> 赞同：2
> 
> 时间：2012-11-02T14:08:55.730
> 
> 标签：c#, asp.net

我创建了一个提取数据的界面，有几个简单的步骤。

用户从下拉框中选择所需的数据，然后单击“检查可用”按钮，如果有可用记录，则会显示“发送请求”按钮。

单击发送请求按钮后，SQL 表被发送到一个 excel 文件，该文件用 vba 稍微处理，然后从 C# 向用户发送电子邮件，其中包含指向该 excel 文件的链接。

我面临的问题是用户在一两秒后变得不耐烦，并开始一遍又一遍地捣碎“发送请求”按钮。这种不耐烦会使应用程序崩溃。

我怎样才能使页面行为，以便在单击“发送请求”后刷新页面，但该过程仍然在服务器上执行，并且电子邮件仍然从 C# 发送。

```
public void SendRequest_Click(object sender, EventArgs e)
{    
    //Insert amazing line of code that refreshes the web form but does everything beyond this line

    SendRequest.Visible = false;
    //Creating a new class
    QueryMule mule = new QueryMule();
    Label11.Visible = true;
    string myfilename = Label3.Text;
    string splitusernum = Label4.Text;
    string dtablenum = Label4.Text;
    string exportnum = Label4.Text;
    //Export all export tables to mercuryexport excel file
    mule.SQLExport(18, splitusernum, exportnum);
    //Creating a new excel application to open the mercury template and run its macro
    ExcelApp.Application appExl;
    ExcelApp.Workbook workbook;
    ExcelApp.Worksheet newSheet;
    ExcelApp.Range Range;
    appExl = new ExcelApp.Application();

    RegionName.SelectedItem.Value + timestampeddone + ".xlsm";

    workbook = appExl.Workbooks.Open(@"filepath", Missing.Value,
        Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, 
        Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value,
        Missing.Value, Missing.Value, Missing.Value);

    appExl.Visible = true;
    appExl.DisplayAlerts = true;

    System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
    message.To.Add '''REMOVED EMAIL ADDRESS
    message.Subject = "Delivery System";
    message.From '''REMOVED EMAIL ADDRESS
    message.Body = "filepath" + myfilename;
    System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("mailhost");
    smtp.Send(message);

    Label4.Text = "Email Sent";

    mule.DropTable(dtablenum);
    mule.DropTable1(dtablenum);
    mule.DropTable2(dtablenum);
    mule.DropExportTable(dtablenum);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:11:21.907

您需要剥离一个后台工作线程来创建 excel 文件。然后，该请求将立即回复一条友好的消息，表明他们将在链接准备好后通过电子邮件发送给他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:06:39.820

您的逻辑包括两个重量级操作：生成 excel 文件和发送邮件。您可以按照 Paul 的建议使用后台线程，以使服务器处理更轻松。

否则，在您从服务器获得响应之前阻止页面，以便用户在页面准备好之前无法与页面交互。您可以使用 jQuery 块 UI 插件 ( [http://jquery.malsup.com/block/#) 执行此操作。](http://jquery.malsup.com/block/#)

此插件的示例用法显示在 ASP.NET 论坛帖子中：[http ://forums.asp.net/p/1656559/4317158.aspx/1?Re+show+progress+in+dialog](http://forums.asp.net/p/1656559/4317158.aspx/1?Re%20show%20progress%20in%20dialog)

# servlets - Servlet 规范： 对比 在 web.xml 中？

> ID：13196868
> 
> 赞同：11
> 
> 时间：2012-11-02T14:09:22.850
> 
> 标签：servlets, jndi, context-param

为什么[Servlet 规范](https://jcp.org/en/jsr/detail?id=369)定义了两种不同的方式（上下文参数和环境条目）来为 Web 应用程序提供配置参数？

这些方法各自的优点是什么（什么时候应该首选）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T14:16:46.933

环境条目可通过[JNDI](https://stackoverflow.com/tags/jndi/info)获得，这在您没有[`ServletContext`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html)直接可用的环境时可能很有用，例如在[EJB](https://stackoverflow.com/tags/ejb/info)中。中的那个`web.xml`实际上是优先级链中的最后一个，就覆盖环境整体而言。它们通常在服务器自己的配置中定义。因此，如果打算从 webapp 覆盖服务器指定的环境条目，那么可以通过`web.xml`.

上下文参数确实特定于 webapp 本身。它们仅在您[`ServletContext`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html)直接使用时可用，通常仅在[过滤器](https://stackoverflow.com/tags/servlet-filters/info)、[servlet](https://stackoverflow.com/tags/servlets/info)（以及通过[EL](https://stackoverflow.com/tags/el/info)中的[JSP](https://stackoverflow.com/tags/jsp/info)）和[侦听](http://docs.oracle.com/javaee/7/api/javax/servlet/http/package-summary.html)器内部。它们应该用于为在 web 应用程序中运行的过滤器、servlet 和/或侦听器提供配置参数。通过 JNDI 提供它们没有多大意义，对于简单的目的来说，这是一个过于复杂的过程。`${initParam.someName}`

# excel - Excel 2013：生成满足所有要求的列表

> ID：13196880
> 
> 赞同：1
> 
> 时间：2012-11-02T14:10:15.943
> 
> 标签：excel, dynamically-generated, office-2013, excel-2013, vba

我需要创建一个电子表格，随机抽取正确回答所有问题的获胜者。

* * *

## 验证答案

我添加了一个**“正确”**列来验证答案是否得到正确回答。如果正确则返回*QuestionID* ，如果 FALSE则返回*“不正确” 。*

我有另一个表格，其中包含验证数据库结果的答案。

*   9747 | 错误 | 正确 | 错误的
*   9748 | 正确 | 错误 | 错误的
*   9749 | 错误 | 错误 | 正确的
*   9751 | 正确 | 错误 | 错误的
*   9752 | 错误 | 错误 | 正确的
*   9753 | 错误 | 错误 | 正确的

* * *

## 拉出可能的赢家

我需要获取所有正确回答所有问题的 PersonID。如果他们错误地回答了一个问题，他们将被取消资格。此外，如果他们未能回答问题，他们将被取消资格。

![有数据的表](../Images/2db1abca4ea13040c5b791132a60d9ee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:31:43.873

我尝试按照工作表图像中可见的布局并编译我自己的工作表： [http](http://www.bumpclub.ee/~jyri_r/Excel/Answers_to_quiz_correct_wrong.xls) ://www.bumpclub.ee/~jyri_r/Excel/Answers_to_quiz_correct_wrong.xls 带有添加的块用浅绿色标记，错误情况用黄色标记。

将 C1:C200 定义为 PersonList。

如果没有另外说明，所有公式都在第 2 行。

J 列：由以下人员选择的正确答案

```
=IF(AND(E2="Right",F2="Right",G2="Right"),B2,"") 
```

L 列：按数组公式编制的唯一参与者列表（Shift-Control-Enter，Excel 本身添加的大括号，而不是用户添加的）：

```
 {=INDEX(PersonList,MATCH(0,COUNTIF($L$1:L1,PersonList),0))} 
```

M 列：找到的第一个问题的答案列表（第一个表示表格中的位置）：

```
=MATCH($L2,$C$2:$C$2000,0)+1 
```

N 列：其他问题的答案列表，进一步复制到 O:R 列

```
=MATCH($L2,INDIRECT("$C"&M2+1&":$C$2000"),0)+M2 
```

S列：M列中的行号寻求的正确答案。如果问题w被正确回答，将显示问题代码。公式将复制到 T:X 列。

```
=(INDEX($J$1:$J$200,M2)) 
```

Y 列：获胜者和 DQ。再次数组公式：

```
{=IF(SUM(IF(S2:X2="",1,0))=0,"Winner","DQ")} 
```

现在可以应用自动筛选。

# ruby-on-rails - Capybara::ElementNotFound: 用于 jquery ui 对话框内容

> ID：13196881
> 
> 赞同：4
> 
> 时间：2012-11-02T14:10:21.833
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, rspec-rails

我将登录表单放入 Jquery UI 对话框弹出框。当我开始进行 RSpec 测试时，出现错误

```
Failure/Error: fill_in "Username", with: "user@example.com"
Capybara::ElementNotFound
cannot fill in, no text field, text area or password field with id, name, or label 'Username' found 
```

这是我的规格/请求页面：

```
describe "create user", :js => true do

  before { visit new_enr_rds_dea_path }

  let(:submit) { "Create Dea" }

  describe "with invalid information" do
    it "should not create a user" do
      expect { click_button submit }.not_to change(Enr::Rds::Dea, :count)
    end
  end

  describe "with valid information" do
    before do
      fill_in "Username", with: "user@example.com"
      fill_in "Password", with: "foobar"
      fill_in "Confirm password", with: "foobar"
      fill_in "Organisation", with: "foobar"
    end

    it "should create a user" do
      expect { click_link_or_button submit }.to change(Enr::Rds::Dea, :count).by()
    end
  end 
```

工厂.rb

```
FactoryGirl.define do
  factory :dea_user do |user|
    user.dea_user             "example@in4systems.com"
    user.dea_pwd              "foobar"
    user.dea_pwd_confirmation "foobar"
    user.pro_organisation_id  "NHER"
  end
end 
```

我正在将我的新页面和编辑页面呈现到表单部分。`New`和`edit`按钮都有打开JqueryUI`:remote => true`对话框的方法。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:15:39.017

尝试这个

```
 describe "with valid information" do
    before do
      fill_in "username text-input-field-id", :with => "user@example.com"
      ...
      ...
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T00:53:15.750

正如 Dipak 建议的那样，用字段的 id 替换或使用全部小写。有时`Username`不仅仅是`username`水豚看到了……或者确切地说是 Seleminum。

# r - 平行坐标图 ggplot2 已弃用？

> ID：13196883
> 
> 赞同：8
> 
> 时间：2012-11-02T14:10:43.540
> 
> 标签：r, ggplot2, parallel-coordinates

当我尝试在 ggplot2 中创建平行坐标时，我收到了它已被弃用的消息：

```
require(ggplot2)
ggpcp(mtcars) + geom_line() 
```

警告消息：'ggpcp' 已弃用。查看帮助（“已弃用”）

但是，ggplot 文档没有说明这一点：[http](http://docs.ggplot2.org/current/ggpcp.html) ://docs.ggplot2.org/current/ggpcp.html 。

某处有新的 pcp 功能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T15:12:00.840

迁移到GGally。例如：

```
require(GGally)
ggparcoord(mtcars, columns = c(1, 5:10)) + geom_line() 
```

# java - 字符串文字的自动实习

> ID：13196886
> 
> 赞同：5
> 
> 时间：2012-11-02T14:10:56.013
> 
> 标签：java, string

在 [com.sun.org.apache.xerces.internal.impl.XMLScanner](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/com/sun/org/apache/xerces/internal/impl/XMLScanner.java)的源代码第 183 行和第 186 行

```
183    protected final static String fVersionSymbol = "version".intern();

186    protected final static String fEncodingSymbol = "encoding".intern(); 
```

为什么**“版本”**和**“编码”**是通过使用 intern() 显式实习的，而它们是字符串文字并且会自动实习？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T14:24:15.287

我[在 Apache Xerces SVN 存储库中追踪到修订版 318617](https://svn.apache.org/viewvc?view=revision&revision=318617)的更改（这是最初开发此 XML 解析器的项目，正如包名所暗示的那样）。

提交消息的相关部分是：

> 试图改进符号表的使用。每次重置解析器时，都会将许多预定义的字符串添加到符号表中。对于小型文档，这将是一笔巨大的成本。现在，由于我们为符号表中的字符串调用 String#intern，因此对那些预定义的符号使用 String#intern 就足够了。这只需要执行一次。

正如您所指出的，对于`.intern()`符合要求的 JVM 实现，这应该不是必需的（并且应该没有明显的影响）。

我的猜测是

*   *要么*作者不知道字符串文字将始终被保留的事实
*   *或者*这是一个有意识的决定，以防止行为不端的 JVM 实现

但是，在第二种情况下，我希望在评论或评论消息中对此进行一些说明。

该调用的一个副作用`.intern()`是初始化程序不再是[常量表达式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)，并且字段不会被引用它们的其他类内联。这将确保`XMLScanner`加载类并读取其字段。但是，我认为这与这里无关。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T14:14:45.947

我不认为有任何充分的理由，因为您确定的原因：文字总是自动实习，[由`String`类](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)定义：

> 所有文字字符串和字符串值的常量表达式都是实习的。字符串文字在Java™ 语言规范的第[3.10.5节中定义。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)

# jquery - jQuery Autocomplete 绑定到 WCF 服务 ASP.NET MVC

> ID：13196887
> 
> 赞同：1
> 
> 时间：2012-11-02T14:11:12.300
> 
> 标签：jquery, asp.net-mvc, wcf, entity-framework

ASP.NET MVC 和编程的新手，我已经搜索了有关此主题的材料，但没有找到针对我的特定问题的具体答案。

我正在进行的项目需要使用 WCF 服务。最初，我从一个有效的 jQuery 自动完成功能开始，但是将代码移动到 WCF 服务中断了一些通信。自动完成功能不再起作用

WCF 服务

```
public IList<Location> QuickSearchLocation(string term)
    {
        using (var db = new InspectionEntities())
        {
            //return all locations except the reserved "Other"
            return db.Locations
                .Where(r => r.LocationName.Contains(term) && r.LocationId !=    Constants.OtherId)
                .ToList();
        }
    } 
```

上面的代码旨在根据与子表的关系获取用户输入。如果用户输入与子表中的数据不匹配，则用户条目将保存到主数据库中的“其他”列。

控制器

```
public ActionResult QuickSearchLocation(string term)
    {
        return Json(_service.QuickSearchLocation(term), JsonRequestBehavior.AllowGet);
    } 
```

看法

```
div class="editor-field">
        @Html.TextBoxFor(m=>m.LocationId,new {data_autocomplete =     Url.Action("QuickSearchLocation", "Inspection")}) 
```

脚本

```
$(document).ready(function () {

$(":input[data-autocomplete]").each(function () {

    $(this).autocomplete({ source: $(this).attr("data-autocomplete")});
}); 
```

对我的问题的任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:35:17.277

自动完成只需要标签或带有值的标签。另一方面，您正在为整个`Location`对象提供服务。

因此，您应该创建一个辅助类：

```
public class AutocompleteLocation{
    public AutocompleteLocation(Location location){
        label = location.LocationName;
        value = location.LocationId;
    }
    public string label {get;set;}
    public string value {get;set;}
} 
```

在此之后，您应该像这样更改`QuickSearchLocation`控制器方法：

```
public ActionResult QuickSearchLocation(string term)
{
    return Json(_service.QuickSearchLocation(term).Select(l => new AutocompleteLocation(l)).ToList(), JsonRequestBehavior.AllowGet);
} 
```

您还应该考虑不返回所有结果，而是只返回前几个（例如 10 个）。

# php - XML 搜索和 addChild

> ID：13196888
> 
> 赞同：1
> 
> 时间：2012-11-02T14:11:12.190
> 
> 标签：php, xml

这是我到目前为止所拥有的，我想将日期/时间日志添加到 xml 文件中。

```
 <?php

       // Load the XML file we want to write to
          $visitors  = simplexml_load_file("data.xml");

       // Set e-mail xml search
          $search_id = htmlentities($_POST['email']);
          $visitors = $visitors->xpath("visitor[email='$search_id']");

       // If we have a search result, email already exists in xml file
          if(isset($visitors[0])){
           $visitor = $visitors[0];
           $email = (string) $visitor->email;

           // ********** Need to add date/time for each visit here.
           // So, I guess I need to search for e-mail address, then append to it.
           // Help required here... and again below to confirm formatting for multiple
           // dates. 

          } else {
           $xml = simplexml_load_file("data.xml");
           $sxe = new SimpleXMLElement($xml->asXML());
           $search_id = preg_replace('/[^(\x20-\x7F)]*/','', $search_id);

            $visitor = $sxe->addChild("visitor");
            $visitor->addChild("email", $search_id);

            // ******** Not sure this is the correct xml formatting.  
               $date = $visitor->addChild('date');
               $date->addChild("email", date("Y-m-d H:i:s"));

           $sxe->asXML("data.xml");
          } // if(isset($visitors[0])){

       } // if(isset($data)){ ?> 
```

产生

```
<?xml version="1.0" encoding="utf-8"?>
<visitors>
 <visitor>
  <email>jon.doe@aol.com</email>
  </visitor>
</visitors> 
```

我想要做的是为每次访问添加一个日期日志（增加/附加）。

所以结果是（我不确定我的格式是否正确，这当然无济于事）。不要担心日期/时间的 PHP。

```
<?xml version="1.0" encoding="utf-8"?>
<visitors>
 <visitor>
  <email>jon.doe@aol.com</email>
  <date>2012-11-01 11:00:00</date>
  <date>2012-11-02 14:00:00</date>
  </visitor>
</visitors> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:26:18.643

我认为您在这里走在正确的轨道上，主要是您对 asXML('data.xml') 的调用在您的 ELSE 块中，因此只有从头开始创建文件时才会将文件写入文件（即。未找到 search_id）。

我做了一些更改，主要是为了更容易理解。更多变化即将到来！：

```
<?php

// Load the XML file we want to write to
$xmlFile  = simplexml_load_file("data.xml");

// Set e-mail xml search
$search_id = 'jon.doe@aol.com';
$results = $xmlFile->xpath("visitor[email='$search_id']");

// If we have a search result, email already exists in xml file
if(isset($results[0]))
{
    $visitor = $results[0];
    $email = (string) $visitor->email;

    echo "Found Email: " . $email . "\n";
    echo "Date: " . $visitor->date . "\n";
    // ********** Need to add date/time for each visit here.
    // So, I guess I need to search for e-mail address, then append to it.
    // Help required here... and again below to confirm formatting for multiple
    // dates.
    echo "Adding new date";
    $visitor->addChild('date', date('Y-m-d H:i:s'));

    echo "New XML: " . $xmlFile->asXML();

    $xmlFile->asXML('data.xml');

} else {
    $sxe = new SimpleXMLElement($xmlFile->asXML());
    $search_id = preg_replace('/[^(\x20-\x7F)]*/','', $search_id);

    $visitor = $sxe->addChild("visitor");
    $visitor->addChild("email", $search_id);

    // ******** Not sure this is the correct xml formatting.
    $date = $visitor->addChild('date', date('Y-m-d H:i:s'));

    $sxe->asXML("data.xml");

}
?> 
```

运行此脚本几次后，我得到：

```
<?xml version="1.0"?>
<visitors>
        <visitor>
                <email>jon.doe@aol.com</email>
                <date>2012-11-03 02:13:28</date>
                <date>2012-11-03 02:20:20</date>
                <date>2012-11-03 02:22:07</date>
                <date>2012-11-03 02:22:10</date>
                <date>2012-11-03 02:22:13</date>
        </visitor>
</visitors> 
```

我认为这是你想要的？这有帮助吗？

**编辑：**

关于您提到它是否是正确的 XML 格式。我想没有唯一的正确答案。我会说这种格式很好，只要您记得在自己的**访问者**标签中分隔每个单独的电子邮件地址/日期集。

为此，您可能需要这样的东西（未经测试）：

```
$newVisitor = $xmlFile->addChild('visitor');
$newVisitor->addChild('email', $newEmail);
$newVisotor->addChild('date', $newDate);
$xmlFile->asXML('data.xml'); 
```

**编辑2：**

我过去使用的最后一件事是以下代码。如果您在保存过程中遇到任何问题（或者至少给您一个备份），它将更好地格式化 XML，并且还可以防止原始 XML 文件的任何损坏。就个人而言，我尝试养成在任何时候必须写入文件时使用这样的临时文件的习惯。

当然，只需添加此内容，然后将您的调用替换为：

*   $xmlFile->asXML('data.xml');
*   $sxe->asXML("data.xml");

和：

*   writeXML('data.xml', $xmlFile);
*   writeXML('data.xml', $sxe);

它应该可以正常工作。

```
//Writes final version of the SimpleXML object to file.
//Includes writing to a temp file for safety.
//This way is safer because if the code crashes mid-write it won't garble the original file.
function writeXML($fileName, $xmlObject)
{
        //Sanity check before copy, prevent any visible errors:
        if (file_exists($fileName))
                copy($fileName, $fileName . '.backup');

        //Write to temp file first in-case something kills the write; don't want to corrupt the original.
        $tmpName = $fileName . '~$.' . microtime();
        $handle = fopen($tmpName, 'w');
        fwrite($handle, formatXML($xmlObject));
        fclose($handle);
        copy($tmpName, $fileName);
        unlink($tmpName);
}

//asXML does no indentation formatting, so we'll do it here instead. This is called by WriteXML so that we're writing formatted XML to file.
function formatXML($xmlObject)
{
        $dom = new DOMDocument('1.0');
        $dom->preserveWhiteSpace = false;
        $dom->formatOutput = true;
        $dom->loadXML($xmlObject->asXML());
        return $dom->saveXML();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:53:23.980

> 这是[@Geekmans 答案的补充](https://stackoverflow.com/a/13198267/367456)

你的代码看起来并不太远。但是，您可以大大改进它，这就是为什么在这里添加另一个答案（我通常会编辑@Geekmans 答案，但它已经非常大了）。

改进点在于程序流程。如果没有找到email，不需要新建`SimpleXMLElement`，只需要新建一个`<visitor>`元素即可。然后添加`<date>`元素以及输出文件对于这两种情况实际上是相同的。这允许删除重复的代码：

```
// Specify the XML file we want to write to
$inFile = "data.xml";

// Set e-mail xml search and insert id
$search_id = 'jon.doe@aol.com';
$insert_id = preg_replace('/[^(\x20-\x7F)]*/', '', $search_id);

// Load the XML file we want to write to
$xmlFile = simplexml_load_file($inFile);
$results = $xmlFile->xpath("visitor[email='$search_id']");

// If we have a search result, email already exists in xml file
if ($results) {
    $visitor = $results[0];
    echo "Found Visitor: ", $visitor->email, "\n",
    "First Date: ", $visitor->date, "\n";
} else {
    echo "Adding new Visitor: ", $insert_id, "\n";
    $visitor = $xmlFile->addChild("visitor");
    $visitor->addChild("email", $insert_id);
}

echo "Adding new Date: ", $date = date('Y-m-d H:i:s'), "\n";
$visitor->addChild('date', $date);

echo "Changed XML: \n" . simplexml_pretty_print($xmlFile);
$xmlFile->asXML($inFile);

/**
 * @param SimpleXMLElement $simplexml
 * @link https://stackoverflow.com/a/798986/367456
 */
function simplexml_pretty_print(SimpleXMLElement $simplexml) {
    $dom                     = new DOMDocument();
    $dom->preserveWhiteSpace = false;
    $dom->formatOutput       = true;
    $dom->loadXML($simplexml->asXML());
    return $dom->saveXML();
} 
```

作为奖励，我添加了`simplexml_pretty_print`功能以更好地输出。

的输出`jon.doe@aol.com`：

```
Found Visitor: jon.doe@aol.com
First Date: 2012-11-01 11:00:00
Adding new Date: 2012-11-03 10:48:05
Changed XML: 
<?xml version="1.0" encoding="utf-8"?>
<visitors>
  <visitor>
    <email>jon.doe@aol.com</email>
    <date>2012-11-01 11:00:00</date>
    <date>2012-11-02 14:00:00</date>
    <date>2012-11-03 10:48:05</date>
  </visitor>
</visitors> 
```

的输出`info@example.com`：

```
Adding new Visitor: info@example.com
Adding new Date: 2012-11-03 10:52:09
Changed XML: 
<?xml version="1.0" encoding="utf-8"?>
<visitors>
  <visitor>
    <email>jon.doe@aol.com</email>
    <date>2012-11-01 11:00:00</date>
    <date>2012-11-02 14:00:00</date>
  </visitor>
  <visitor>
    <email>info@example.com</email>
    <date>2012-11-03 10:52:09</date>
  </visitor>
</visitors> 
```

*提示：*每当您发现重复代码时，通常有一种方法可以以更简单的形式编写它。

# c# - 树视图上的递归数据绑定

> ID：13196892
> 
> 赞同：2
> 
> 时间：2012-11-02T14:11:39.693
> 
> 标签：c#, wpf, data-binding, treeview, recursive-databinding

我想使用数据绑定在树视图中查看文件夹结构。文件夹类只有一个子属性列表和一个属性名称。

如果发生变化，它将触发相应的事件。就是这个：

```
 public class Folder : INotifyPropertyChanged, INotifyCollectionChanged
    {    
        public event PropertyChangedEventHandler PropertyChanged;           
        public event NotifyCollectionChangedEventHandler CollectionChanged; 

        public Folder(string name)
        {
            this.Name = name;
            this.ContentFolders = new List<Folder>();
        }

        public List<Folder> ContentFolders { get; set; }

        public void AddFolder(Folder f)
        {
            this.ContentFolders.Add(f);

            if (this.CollectionChanged != null)
            {
                this.NotifyCollectionChanged(
                      new NotifyCollectionChangedEventArgs(
                          NotifyCollectionChangedAction.Add, f));
            }
            this.PropertyChanged(this, new PropertyChangedEventArgs("ContentFolders"));
        }

        private void NotifyCollectionChanged(NotifyCollectionChangedEventArgs e)
        {
            lock (CollectionChanged)
            {
                if (CollectionChanged != null)
                {
                    Dispatcher.CurrentDispatcher.BeginInvoke(new Action(() => CollectionChanged(this, e)));
                }
            }
        }

        private string name;

        public string Name
        {
            get
            {
                return this.name;
            }
            set
            {
                if (this.name != value)
                {
                    this.name = value;
                    if (PropertyChanged != null)
                    {
                        PropertyChanged(
                            this, new PropertyChangedEventArgs("Name"));
                    }
                }
            }
        }

    } 
```

这是我的 GUI，它在树视图中显示根文件夹：

```
 <Window x:Class="WpfApplication2.MyWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication2="clr-namespace:WpfApplication2"
            Title="MyWindow" Height="300" Width="300" xmlns:u="clr-namespace:UpdateControls.XAML;assembly=UpdateControls.XAML">
      <StackPanel>
        <StackPanel.Resources>
          <HierarchicalDataTemplate DataType="{x:Type WpfApplication2:Folder}"
                                    ItemsSource="{Binding Path=ContentFolders}">
            <TextBlock Text="{Binding Path=Name}" />
          </HierarchicalDataTemplate>
        </StackPanel.Resources>
        <TreeView Name="TreeviewScenario">
          <TreeViewItem Header="{Binding Path=RootFolder.Name}"
                        ItemsSource="{Binding Path=RootFolder.ContentFolders}" />
        </TreeView>
        <Button Content="Add Folder" Click="Button_Click" />
      </StackPanel>
    </Window> 
```

相应的 MyWindow.xaml.cs 类有一个属性 Folder 并添加了一些内容。如果按钮被点击，它还有一个方法来添加一个新文件夹。

```
public partial class MyWindow : Window
{
    public Folder RootFolder { get; set; }

    public MyWindow()
    {
        this.RootFolder = new Folder("root");
        this.RootFolder.ContentFolders.Add(new Folder("1"));
        this.RootFolder.ContentFolders.Add(new Folder("12"));
        this.RootFolder.ContentFolders.Add(new Folder("13"));
        this.RootFolder.ContentFolders.Add(new Folder("14"));
        this.RootFolder.ContentFolders.Add(new Folder("15"));

        Folder aFolder = new Folder("aFolder");
        aFolder.ContentFolders.Add(new Folder("2"));
        aFolder.ContentFolders.Add(new Folder("21"));
        aFolder.ContentFolders.Add(new Folder("22"));
        aFolder.ContentFolders.Add(new Folder("23"));
        aFolder.ContentFolders.Add(new Folder("24"));

        this.RootFolder.ContentFolders.Add(aFolder);

        this.DataContext = this;
        InitializeComponent();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        Folder c = new Folder("a new Folder");
        this.RootFolder.AddFolder(c);
    }
} 
```

Gui 将由一个简单的 Main 方法调用：

```
 new MyWindow(); 
```

如果我开始，treeview 看起来不错，它包含所有已添加到 MyWindow.xaml.cs 中的项目。

但是如果我单击按钮，将不会显示新项目。如果我在展开树视图之前单击按钮，新项目将在那里......

所以视图似乎没有更新......

谁能看到，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:39:22.610

将文件夹类中的 ContentFolders 更改为 ObservableCollection<> 而不是 List<>

```
 public ObservableCollection<Folder> ContentFolders { get; set; } 
```

# opengl - 相机校准：与图像纵横比不同的纵横比。如何纠正？

> ID：13196893
> 
> 赞同：1
> 
> 时间：2012-11-02T14:11:39.983
> 
> 标签：opengl, opencv, camera-calibration

我一直在我的 OpenCV 和 OpenGL 组件之间来回切换，我不确定这两者中的哪一个应该更正。

使用 OpenCV 相机校准产生 fx, fy 的纵横比约为 1，这将对应于正方形大小的图像。我的校准输出：

```
...
image_width: 640
image_height: 480
board_width: 6
board_height: 9
square_size: 5.
flags: 0
camera_matrix: !!opencv-matrix
   rows: 3
   cols: 3
   dt: d
   data: [ 6.6244874649105122e+02, 0., 3.4060477796553954e+02, 
        0., 6.4821741696313484e+02, 2.5815418044786418e+02, 
        0., 0., 1\. ]
distortion_coefficients: !!opencv-matrix
   rows: 5
   cols: 1
   dt: d
   data: [ -1.1832005538154940e-01, 1.2254891816651683e+00, 3.8133468645674677e-02, 1.3073747832019200e-02, -3.9497162757084490e+00 ] 
```

但是，我的图像宽度是 640x480，正如您在校准输出中看到的那样。

当我在框架中检测到棋盘并使用 OpenGL 绘制棋盘时，OpenGL 在高度上呈现正常但在宽度方向上拉伸，因此它不适合棋盘的实际位置。肯定能解决它的是将校准的 fx 分量乘以 480/640，但我不知道这是否可行。

我该如何纠正这个问题？用图像大小缩放校准值，或者在 OpenGL 中做些什么来修复它？

**编辑**

捕获和显示是有区别的。我使用经过校准的智能手机*拍摄*图像，智能手机会吐出 640x480 的图像。

为了找到棋盘，我使用了如上所示的内在函数，它们是经过校准的。

那么，不管我给OpenGL哪个纵横比，让它是fx/fy、640/480或者fx/fy * 640/480，都是错误的。在 OpenGL 中投射回来的棋盘，使得 OpenGL 投射回来的东西在宽度方向上被拉伸。

它在 OpenGL 中看起来完全正确的唯一方法是，如果我使用 fx=640, fy=480**来查找 chessboard**。这也是错误的，因为现在我完全忽略了相机的内在特性......![在此处输入图像描述](../Images/3ae18f792dc47fdede2ff33e0526f334.png)

**编辑2**

我的意思是，无论我如何设置传递给 gluPerspective 的纵横比，它都不正确。

```
gluPerspective( /* field of view in degree */ m_fovy,
   /* aspect ratio */ 1.0/m_aspect_ratio,
   /* Z near */ 1.0, /* Z far */ 1000.0); 
```

我为 m_aspect_ratio 的值所做的尝试：

*   OpenCV的calibrationMatrixValues的输出纵横比
*   fx/fy
*   640/480
*   fx/fy * 640/480
*   校准矩阵值的输出 * 640/480

一切似乎都搞砸了宽度。请注意，在我的屏幕截图中，棋盘的原点是图像的最上角：它放置正确，图像中的最底角也是如此。这是一个缩放问题..

**编辑3**

这真的是非常非常愚蠢的事情。我正在为 OpenGL 设置纵横比，如下所示：

```
gluPerspective( /* field of view in degree */ m_fovy,
    /* aspect ratio */ 1.0/m_aspect_ratio,
    /* Z near */ 1.0, /* Z far */ 1000.0); 
```

和设置

```
m_aspect_ratio = viewportpixelheight / viewportpixelwidth; 
```

没有意识到`viewportpixelheight`and`viewportpixelwidth`是整数，所以我正在做整数除法，结果要么为 1，要么（交换它们时）为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:58:47.180

相机校准矩阵将世界坐标映射到图像坐标。OpenGL 将图像坐标映射到屏幕坐标。如果您的问题在于图像的显示方式，您应该在 OpenGL 中处理它。

我很抱歉造成混乱。我试图做的是区分捕获和显示图像。您是正确的，可以从焦距计算物理相机的纵横比。这些焦距和纵横比由相机的硬件固定。一旦您捕获了该图像，尽管您可以自由地以您使用 OpenGL 选择的任何纵横比显示它。您可以随意裁剪和拉伸图像，以更改显示内容的纵横比。相机的纵横比与屏幕的纵横比不匹配。OpenCV 使用来自物理相机的直接原始测量值来计算相机校准矩阵。如果我们假设它们是正确且恒定的（如果没有缩放，这两者似乎都是合理的），那么对纵横比的任何进一步更改都是 OpenGL 的责任。当我说 fx 和 fy 不确定纵横比时，我指的是显示的纵横比，这根本不是很清楚，对不起。

另外，我应该提到，您可以从焦距计算纵横比的原因是焦距以像素为单位表示，并且这些单位在 x 轴和 y 轴上可能不同。可以在[这里找到一个简短的解释](http://en.wikipedia.org/wiki/Camera_resectioning)

我在相机矩阵中找到的焦距的最佳解释是在[计算机视觉算法和应用](http://szeliski.org/Book/)的相机内在函数部分。在 pdf 中，它从本书的第 72 页、第 50 页开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T19:19:38.533

1.0 的纵横比并不表示正方形图像，它表示*正方形像素*（这解释了为什么它几乎总是 1.0；非正方形像素相对罕见，除非在以[变形格式](http://en.wikipedia.org/wiki/Anamorphic_format)拍摄的相机中）。相机矩阵不包含有关绝对图像尺寸*或*物理相机尺寸的信息。

另一方面，gluPerspective 的纵横比*确实*代表图像尺寸。重要的是不要将一个纵横比与另一个混淆。

如果您想使用 gluPerspective，这是可能的，但您应该了解 gluPerspective 不会让您对所有固有的相机参数（即轴偏斜和主点偏移）进行建模。[我将在本文中](http://ksimek.github.io/2013/06/18/calibrated-cameras-and-gluperspective/)描述如何正确设置纵横比和 fovy 。

但是，我强烈建议使用 gluFrustum（允许非零主点偏移）或直接使用 glLoadMatrix（也允许非零轴倾斜）。[本文](http://ksimek.github.io/2013/06/03/calibrated_cameras_in_opengl/)解释了这两种方法。

# android - 为什么每次运行应用程序后都会启动新的 android 模拟器，但它们都没有显示在 DDMS 部分

> ID：13196901
> 
> 赞同：2
> 
> 时间：2012-11-02T14:11:58.217
> 
> 标签：android, android-emulator, ddms

首先，我的模拟器太慢而无法正常工作。我已经为此感到沮丧。所以我关闭了那个模拟器并声明了另一个（通过运行应用程序）。但是现在我的模拟器没有显示在 DDMS 中，每次我运行应用程序时，它都会创建新的模拟器，而不是使用现有的模拟器。所以我无法在模拟器上运行应用程序。如果我连接一个设备，那么该设备会在 DDMS 中显示并正常工作，但不是我的模拟器。并且请不要告诉我重新启动模拟器，eclipse等。因为，我已经尝试过很多次（甚至重新启动PC），但它没用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:19:25.427

尝试通过带有参数的命令行运行模拟器`-verbose`，可能会为您提供有关该问题的一些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T11:45:33.977

我通过去病房 DDMS-> 重置 adb 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T12:01:34.453

`platform-tools`我通过从`bashrc`文件中删除路径解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T14:23:16.737

我知道模拟器速度太慢了。如果你想启动同一个模拟器，你可以明确地选择它。如果您使用的是 eclipse 右键单击​​您的项目 -> 属性 -> 运行调试设置 -> 单击您的项目名称 -> 编辑 -> 并选择 'Always prompt to pick device' 。所以现在每次构建项目时，都可以选择同一个模拟器。希望这可以帮助！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-22T20:27:58.903

在 Mac OSx 中，您需要转到 Run-> Edit Configuration 并且您需要勾选 Use the same devices for future

# expressionengine - 使用 ExpressionEngine 的多语言方法

> ID：13196903
> 
> 赞同：4
> 
> 时间：2012-11-02T14:12:07.430
> 
> 标签：expressionengine

所以自从我上次建立一个多语言网站已经两年了，我正在开始一个新的网站。

我建立的最后一个站点使用的是 biber 多语言模块，从那时起它似乎已经更改了名称，现在称为[Multi Language Support](http://devot-ee.com/add-ons/multi-language-support)。在最后一次构建中，我使用矩阵和一个下拉菜单来设置每一行的语言设置，从而确保每一页都在一个条目中，并且很容易添加其他语言，只需向矩阵添加额外的行场地。

我的问题是双重的。在这一点上是否有其他方法可以考虑，因为我上次建立多语言网站已经两年了。

其次，上一个站点的所有 SEO（元描述、元关键字和标题标签都是英文的）新站点将需要所有这些都用英语和法语。我通常使用[SEO Lite 模块](http://devot-ee.com/add-ons/seolite)来处理 SEO，但我看不出有一种方法可以使用多种语言。有没有一种简单的方法来设置它，还是我需要使用上面提到的矩阵字段？

我对任何可供我评估的方法持开放态度。

** 更新 **

不会使用结构，因此不需要成为一个因素。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T14:21:38.303

我没有冗长的答案，但是Bold mind 的[Publisher](http://boldminded.com/add-ons/publisher)看起来相当不错并且功能齐全。它正在出售。

Brian 是一个伟大的开发者，得到了很大的支持。根据过去的支持经验，我强烈建议您看看。

[http://bold mind.com/add-ons/publisher](http://boldminded.com/add-ons/publisher)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T14:55:51.487

我一直在使用几种不同的方法：

*   Transcribe 最近一直在使用。它适用于模板重写、语言变量。它很容易设置，但有时也有点太强大了。它应该适用于结构，但我还没有真正研究过它。好处之一是您不需要拥有所有语言的所有页面。

*   结构使用结构和低变量，您可以轻松设置树，例如：

    主页 /关于我们 /产品 /nl/home /nl/over ons /nl/producten

您可以重复使用您的字段组，并且并非所有内容都必须以不同的语言存在

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-02T14:31:47.700

我会说这将取决于网站的大小。对于在矩阵中构建两列的小型站点来说，就像您所做的那样是完美的。我已经使用移动设备完成了此操作，该移动设备只有一个用于所有内容元素以及元标记的英语和西班牙语列。然后我只是根据访问者最初选择的语言传递了一个变量。

但我会说多站点管理器可能是你最好的选择。如果您在“默认”站点上使用它们，确实需要购买一些额外的插件，但它很容易管理。另外，您不希望您的 URL 结构有所不同吗？出于 SEO 的目的，您真的希望拥有西班牙语/法语或任何语言来拥有自己的唯一 URL。

我通常会使用 MSM 和 NSM Better Meta 插件。我会说这提供了最大的灵活性，无论网站的大小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T15:15:50.460

我在几个网站上的方法，无论大小，一直是：

1.  模板内语言变量的低变量
2.  模板组和模板名称的战略规划（因为这是用 htaccess 以外的任何东西处理翻译有点困难的一件事）
3.  可扩展性的“语言”渠道
4.  每个通道都有一个语言字段，该字段使用从语言通道中提取的单选按钮，因此将语言分配给条目（然后在条目循环中用作限制器）
5.  Playa 将条目“等价物”相互关联（即允许一对一的语言切换，而所有语言都不在同一个条目中） - 关系字段在技术上是更好的解决方法，但 Playa 在关系字段没有的情况下具有可搜索性
6.  使用渠道中的自定义字段处理 SEO，有条件地回退到低变量中的默认设置

这种方法是我更喜欢的（我使用过 Transcribe，但我确实发现它在查询方面有点资源密集，而这种方法有点轻，尤其是缓存）。例如，它使我能够保持对必填字段的一致执行和验证，并带来各种其他好处 - 特定于语言的条目 url 标题（无需在内容编辑器之前手动创建它们）、异步内容、异步内容翻译（这似乎总是一个问题 - 例如，在法语出现之前，英语可用，等待翻译），潜在的单独工作流程等。

您可以在[www.cps.ca看到这种方法的实际应用](http://www.cps.ca)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-02T15:24:59.113

我已经使用 EE 完成了许多多语言网站，尽管从未使用 Bieber 模块。我的偏好是使用共和国变量为标签创建一个变量矩阵（然后它只是页面上一个简单的灵活标签）。有一些设置需要完成，但是一旦你完成了几次，它只需要 5 分钟的工作：

步骤的基本概述（我已经开始[在我非常旧的 EE 网站上记录它们](http://www.shortcuts.nl/index.php/weblog/comments/ee_multi-language_sites_revisited/)）：

1）使用 .htaccess 方法从 URL 中删除 index.php（使其干净），并在 EE 中设置系统使用标题作为文章链接

2) 为每种语言创建 ANSI 目录，并将 index.php 和 .htaccess 的副本移动到更正系统路径的位置：

```
$system_path = '..system'; 
```

在语言目录中，创建一个 .htaccess 以使用当前语言重新启动查询：

```
RewriteEngine on
RewriteCond $1 !^(index\.php) [NC]
RewriteRule ^(.*)$ /ru/index.php/$1 [L] 
```

（[查看我的网站](http://www.shortcuts.nl/index.php/weblog/comments/ee_multi-language_sites_revisited_-_part_2/)以获取更详细的说明）

3）安装美妙的[共和国变量](http://republiclabs.com/expressionengine/republic-variables)并设置您需要的语言数量。（_en 表示英语，_ru 表示俄语，_es 表示西班牙语等），并将默认语言设置为 index.php 中的默认语言。在配置下，我更喜欢设置语言后缀。添加一个变量“teaser”进行测试，并填写所有语言。

4) 在页面上，放入具有以下格式的标签：{variable_{language}}，例如

```
{teaser_{language} 
```

你应该会看到默认的语言变量。在模板/页面之前的 URL 中插入语言（例如，www.sitename.com/ru/directory/template），语言将即时切换。我将在本周末的后续帖子中记录这一点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-03T09:50:57.273

我认为 MSM 也可以被视为多语言网站的一种选择，原因如下：

*   对于内容丰富的网站，MSM 对于内容贡献者来说确实更容易，他们通常负责一种手语。一种语言 == 一个站点等式很容易理解
*   多语言网站倾向于迎合不同的受众。这些受众的需求通常会在您的网站持续使用的 3 或 4 年内发生变化。MSM 为您提供了为特定语言添加部分或功能的可能性，这对于更复杂的数据结构来说要困难得多
*   作为开发人员，MSM 设置为您提供了很大的灵活性。添加或删除语言就像复制、删除 MSM 网站一样容易，SEO 往往更容易，因为您可以快速翻译您的模板/模板组/url_titles。如果您的模板结构是干净的，并且如果您使用诸如低变量甚至全局变量之类的附加组件来避免模板中包含内容，那么维护各种模板集真的很容易。如果有一天您需要处理从右到左的语言或类似的东西，这也可能是一种奖励。

这是[我维护的网站的示例](http://www.educapoles.org)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-03T22:12:57.520

我还想指出 EE Podcast 上的多语言剧集：

[http://ee-podcast.com/episodes/tag/multi-lingual](http://ee-podcast.com/episodes/tag/multi-lingual)

第 49 集实际上有 Transcribe 的 Tom Jaeger 谈论多语言流程和陷阱。

第 54 集让 Nicolas Bottari 谈论他的流程

# c++ - 模板函数的“typedef”（boost::make_shared）

> ID：13196904
> 
> 赞同：6
> 
> 时间：2012-11-02T14:12:09.480
> 
> 标签：c++, boost, stl, c++11

我正在将我的项目迁移到 C++11，并且我正在尝试尽可能多地使用标准库。

在完成迁移之前，我需要一种快速的方法来在 boost 和 STL 实现之间`shared_ptr`切换（进行基准测试、单元测试等）。

所以我为`shared_ptr`这样定义了一个别名：

```
#ifdef _USE_BOOST_
template <class C>
using shared_ptr = boost::shared_ptr<C>
#else
template <class C>
using shared_ptr = std::shared_ptr<C>
#endif 
```

现在我需要为`make_shared`...做同样的事情但是如何？宏？一个包装？我真的不喜欢他们中的任何一个。有哪些替代方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T14:17:14.513

使用可变参数模板和完美转发：

```
template<typename C, typename...Args>
shared_ptr<C> make_shared(Args &&...args) {
#ifdef _USE_BOOST_
  return boost::make_shared<C>(std::forward<Args>(args)...);
#else
  return std::make_shared<C>(std::forward<Args>(args)...);
#endif
} 
```

# java - 如何同步线程：onTouchEvent 和 run()？

> ID：13196905
> 
> 赞同：0
> 
> 时间：2012-11-02T14:12:17.740
> 
> 标签：java, android, mutex, touch-event, runnable

我有扩展 SurfaceView 的 GraphicView。我需要它来绘制图形。我还需要 onTouchEvent。但问题是......我不知道如何描述它:)这是我的代码：

```
public class GraphicView extends SurfaceView implements Runnable {

    private boolean mutexOpened = true;

    public boolean onTouchEvent( MotionEvent me ) {

        if ( mutexOpened ) {

            mutexOpened = false;

            Log.d( "mutex", "ACTION 1" );

            switch ( action ) {

                case MotionEvent.ACTION_DOWN: {

                    int rnd = new Random().nextInt( 40000 ) + 1000;
                    for ( int i = 0; i < rnd; i++ ) {} // it's some long action :)

                    Log.d( "mutex", "ACTION 2: down" );
                    break;

                }

            }

            Log.d( "mutex", "ACTION 2: end" );
            mutexOpened = true;

        }

    }

    public void run() {

        while ( true ) {

            if ( mutexOpened ) {        
                Log.d( "mutex", "!!! RUN !!!!" );
            }

        }

    }

} 
```

我使用（我想）必须控制我的线程的互斥技术。但在日志中我看到以下内容：

```
!!! RUN !!!!
ACTION 1
!!! RUN !!!!
ACTION 2: down
ACTION 2: end 
```

但为什么？？为什么是第二个“!!! RUN !!!!” 互斥锁关闭时在“ACTION 1”和“ACTION 2”之间运行？不可能！:)))

我试着下一步做：

```
public void run() {
    while ( true ) {
        if ( mutexOpened ) {
            mutexOpened = false; // close mutex
            Log.d( "mutex", "!!! RUN !!!!" );
            mutexOpened = true; // open mutex
        }
    }
} 
```

但是... FAIL :)) onTouchEvent 根本不会运行 :D))) 有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:25:30.637

首先，您没有描述您要做什么*以及**为什么*。

第二。通过尝试实现自己的互斥锁，您做错了。您尝试使用的变量甚至不是线程安全的。您无法知道它在任何时间点的状态，因为可能有多个线程正在访问它。您应该使用 AtomicBoolean。

[http://developer.android.com/reference/java/util/concurrent/atomic/AtomicBoolean.html](http://developer.android.com/reference/java/util/concurrent/atomic/AtomicBoolean.html)

有关多线程的良好介绍，请参阅此幻灯片集。

[多线程简介](http://www.vogella.com/articles/JavaConcurrency/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:25:38.280

您必须同步对 mutexOpened 的访问：run() 可能在您将其设置为 false 之前立即读取 mutexOpened，并且可能正在打印 RUN！！！打印“ACTION 1”后立即。

使用 Java 关键字 synchronized 来同步对 mutexOpened 的访问。在 run() 上，您可以使用 wait()，它在睡眠阶段释放锁。

如果使用 synchronized 关键字，则根本不需要变量 mutexOpened。

```
public class GraphicView extends SurfaceView implements Runnable {

    synchronized public boolean onTouchEvent( MotionEvent me ) {

        Log.d( "mutex", "ACTION 1" );

        switch ( action ) {

            case MotionEvent.ACTION_DOWN: {

                int rnd = new Random().nextInt( 40000 ) + 1000;
                for ( int i = 0; i < rnd; i++ ) {} // it's some long action :)

                Log.d( "mutex", "ACTION 2: down" );
                break;

            }

        }

        Log.d( "mutex", "ACTION 2: end" );

    }

    synchronized public void run() {

        while ( true ) {
            wait(100); // Wait 100ms and release the lock
            Log.d( "mutex", "!!! RUN !!!!" );

        }

    }

} 
```

此外，尽量不要在 GUI 线程中执行长操作（注释“这是一些长操作”）：应该在单独的线程中执行

# php - 使用 AJAX 更改 PHP 变量的值

> ID：13196906
> 
> 赞同：1
> 
> 时间：2012-11-02T14:12:19.567
> 
> 标签：php, jquery

PHP：

```
<?php

$mainView = "views/dashboardView.php";

?> 
```

的HTML：

```
<div class="mainContent">
    <?php include($mainView); ?>
</div> 
```

我想要一个按钮的点击事件来改变 .mainContent 显示的视图，我相信 AJAX 可以实现这一点，但还不能让它工作。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:28:09.860

您必须修改您的 PHP 脚本以允许这样做。

例如：

PHP：

```
if (isset($_POST['change']))
{
    $mainView = $_POST['change'];
    echo $mainView;
} 
```

HTML 和 jQuery：

```
<button id="change">Change the var</button>
<script>
$("#change").click(function() {
    $.post("file.php", {change: $(this).val()},
        function (data)
        {
           $("#mainContent").html(data);
        });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:23:50.000

```
<script type="text/javascript>

    function changePage(pageDest){
    var xmlobject = (window.XMLHttpRequest) ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");

        xmlobject.onreadystatechange = function (){
            if(xmlobject.readyState == 4 && xmlobject.status == 200){
                document.getElementById("mainContent").innerHTML = xmlobject.responseText;
            }
            else{
                document.getElementById("mainContent").innerHTML = 'Loading...';
            }
        }
        xmlobject.open("GET",pageDest,true);
        xmlobject.send();
    }

</script> 

<div class="mainContent" id="mainContent">
    Change this HTML
</div>

<div onmouseup="changePage('views/dashboardView.php')">Get dashboard view</div> 
```

changePage 函数中的参数是您希望放置在 mainContent 中的页面的位置`<div>`

这有帮助吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T14:24:07.610

您无法更改 PHP 变量的值，因为 PHP 是服务器端（首先完成），而 JS 是客户端（在服务器端之后完成）。

通常 AJAX 用于重新填充网页的某个区域，但这将适合您的目的。在下面的示例中，`ajax/test.php`是您要包含的新文件。显然根据需要更改路径/名称，然后创建该文件。

不过，我要补充一点，如果您要重新填充页面的很大一部分，则完全重新加载它可能会一样快。

```
$(function(){

    $('.your-button-class').on('click', function(){

        $.post('ajax/test.php', function(data) {
            $('.mainContent').html(data);
        });

    });

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T14:24:31.353

将视图存储在会话中，将保持站点显示此视图，直到用户关闭浏览器并结束会话、会话到期或他们再次更改视图。

设置 mainView 的包含

```
<?php
    session_start();
    $mainView = "views/dashboardView.php";  // default
    if(isset($_SESSION['mainView']))
    {
        $mainView =$_SESSION['mainView'];
    }
?> 
```

// 设置 mainView 的 ajax 脚本

```
<?php
    session_start();
    $_SESSION['mainView']='views/'.$_GET['mainView'].'.php';
?> 
```

ajax 的 javascript 链接

```
ajaxURL='ajax.php?mainView=otherDasboard'; 
```

您可能还想在设置之前检查空会话变量以及文件是否存在

# excel - VBA 枚举偶尔会出现“需要常量表达式”错误

> ID：13196909
> 
> 赞同：22
> 
> 时间：2012-11-02T14:12:28.973
> 
> 标签：excel, vba

我正在使用 Excel VBA 的类模块中定义的枚举。这一直工作正常，但每次我对枚举变量进行比较时，我都开始收到编译错误：

在 C 类示例中：

```
Enum MyEnum
    Foo
    Bar
End Enum 
```

别处：

```
If someValue = myEnum.Foo Then 
```

文本`.Foo`将突出显示，并弹出“编译错误：需要常量表达式”消息。

在 Google 上的搜索表明这可能会随机发生，并且诸如重新启动 IDE 或在枚举声明后添加空格等修复可以使其重新开始工作。

*   [http://www.tek-tips.com/viewthread.cfm?qid=1355882](http://www.tek-tips.com/viewthread.cfm?qid=1355882)
*   [http://www.vbforums.com/showthread.php?405564-RESOLVED-Constant-Expression-Required-Error-when-checking-Enum](http://www.vbforums.com/showthread.php?405564-RESOLVED-Constant-Expression-Required-Error-when-checking-Enum)

这真的是 VBA 中的一个已知错误吗？我能做些什么来避免它发生，或者如果它突然出现，可以可靠地让 VBA 再次工作吗？

就我而言，关闭和重新打开 Excel 并没有帮助。对不起，我重新启动我的电脑。

**重启后更新：**

重新启动我的机器后问题仍然存在，这令人惊讶。我尝试在枚举定义前面添加（[默认情况下](http://msdn.microsoft.com/en-us/library/office/gg251516.aspx)`Public`它们是公开的，但我想我会试一试），错误消失了。我已经删除了关键字（所以我们回到我的原始代码），它仍然可以编译并运行良好。`Public`

看起来这是 VBA 中的一个随机错误。我很想知道有经验的开发人员是否经常发现这种情况——你会建议不要使用枚举吗？还是它突然出现在一个蓝色的月亮上而我只是不走运？

**经过 6 周的进一步开发后更新：**

在我开发这个项目的剩余时间里，这个问题没有再次出现，所以看起来这是一个罕见的问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-28T12:23:23.700

如问题中所述，我通过编辑和保存枚举定义消除了错误，然后撤消编辑并再次保存。最近在该项目上做了更多工作，我发现了一个不同但类似的问题 - 一行代码会给出“类型不匹配”错误，其中没有类型不匹配，并且相同的功能，未更改，一直在正常工作相同的输入。

我看到的一些间歇性错误可能是由于 Excel 文件中的代码伪影堆积造成的 - 经过阅读后，我发现 VBA 代码被编译并保存到文件中。没有“干净”或“全部重建”选项 - VBA 尝试自行确定需要哪些增量更改。这可能会在您进行大量代码更改的项目中导致各种奇怪的运行时行为。这可能是我在本工作簿的初始开发过程中发现的枚举错误的原因。[本文中的“ VBA 中的反编译和压缩意味着什么](http://orlando.mvps.org/VBADecompilerMore.asp?IdC=OrlMoreWin#WhatItIs "在 VBA 中反编译和压缩意味着什么")”一节给出了很好的概述。

大多数提到这个问题的建议使用 VBA CodeCleaner： http: [//www.appspro.com/Utilities/CodeCleaner.htm](http://www.appspro.com/Utilities/CodeCleaner.htm)。著名且受人尊敬的 VBA 专家 Chip Pearson 说：“我*非常强烈*推荐这个插件”。我很惊讶我以前没有遇到过这个！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T10:47:06.237

**似乎是一个错误。**

将相同模块的代码复制到新的，然后重新编译。这似乎解决了一些问题。

存在一个类似的修复，它涉及在枚举定义的行上进行编辑和撤消。

如果这是一个常见问题，请考虑切换到数字常量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-03T13:11:13.843

一个老问题，但刚刚经历过。删除了枚举上的公共定义器，它编译得很好。没有重启IDE。令人惊讶的是，它还在这里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-24T22:48:02.567

我今天遇到了这个问题，并找到了另一种可能的解决方案。我发布以防万一这可能对其他人有帮助。

以下都不适合我：

1.  重新启动 Excel
2.  重新启动 Windows
3.  从我的枚举中删除“公共”
4.  将“公共”添加回我的枚举

我无法尝试使用 VBA 清洁插件，因为这是一台工作计算机，我没有管理员访问权限。

我没有尝试创建一个新模块，所以我不知道这是否可行。

但是，**关闭 Excel 并启动新的 Excel 实例并使用“打开和修复”**选项对我有用。要做到这一点：

1.  关闭所有 Excel 窗口
2.  从开始菜单打开 Excel
3.  转到左侧的“打开”
4.  在“其他位置”下选择“浏览”
5.  导航到您遇到问题的文件
6.  单击右下角“打开”上的下拉箭头，然后选择“打开并修复...”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-23T12:01:48.540

今天发生在我身上，由于某种原因，原因是模块顶部的带有`Enum`声明的“Option Explicit”语句被意外删除。当我重新添加它时，它立即开始工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-22T15:10:26.447

我的 Enum 遇到了同样的问题，我在声明中添加了 Public Enum 并且问题停止了。无需重新启动。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-25T18:55:53.650

当没有对枚举或其使用或任何相关代码进行任何更改时，此错误会不时出现。对我有用的是将枚举从类移动到我称之为“通用”的模块，并使枚举成为公共而不是私有。

# python - 我认为这应该会引发错误，但不会

> ID：13196913
> 
> 赞同：5
> 
> 时间：2012-11-02T14:12:41.630
> 
> 标签：python, error-handling

下面是一个简单的函数，可以在保留顺序的同时删除列表中的重复项。我已经尝试过了，它确实有效，所以这里的问题是我的理解。在我看来，第二次`uniq.remove(item)`为给定项目运行时，它将返回错误（`KeyError`或者`ValueError`我认为？），因为该项目已从唯一集中删除。不是这样吗？

```
def unique(seq):
    uniq = set(seq)  
    return [item for item in seq if item in uniq and not uniq.remove(item)] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T14:14:33.507

`if item in uniq`在删除项目之前执行检查。操作员很好，因为它“`and`短路”。这意味着如果左边的条件计算为`False`-like，那么右边的条件不会被计算——我们已经知道表达式不能是`True`-like。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T14:29:05.370

`set.remove`是就地操作。这意味着它不返回任何东西（嗯，它返回`None`）；并且`bool(None)`是`False`。

所以你的列表理解实际上是这样的：

```
answer = []
for item in seq:
    if item in uniq and not uniq.remove(item):
        answer.append(item) 
```

并且由于python确实短路了条件（正如其他人指出的那样），这实际上是：

```
answer = []
for item in seq:
    if item in uniq:
        if not uniq.remove(item):
            answer.append(item) 
```

当然，由于`unique.remove(item)`返回`None`（`bool`其中是`False`），要么评估两个条件，要么都不评估。

存在第二个条件的原因是从 中`item`删除`uniq`。这样，如果/当您`item`再次遇到（作为 中的重复项`seq`）时，将不会在其中找到它，因为它已从上次在那里找到时`uniq`被删除。`uniq`

现在，请记住，这是相当危险的，因为修改变量的条件被认为是不好的风格（想象一下当你不完全熟悉它的作用时调试这样的条件）。条件真的不应该修改他们检查的变量。因此，他们应该只读取变量，而不是写入它们。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T14:43:33.090

像往常一样，mgilson 和其他人很好地回答了这个问题。我想我可能会指出在 python 中执行此操作的规范方法可能是什么，即使用文档`unique_everseen`的[配方部分](http://docs.python.org/2/library/itertools.html#recipes)中的配方`itertools`，引用如下：

```
from itertools import ifilterfalse

def unique_everseen(iterable, key=None):
    "List unique elements, preserving order. Remember all elements ever seen."
    # unique_everseen('AAAABBBCCDAABBB') --> A B C D
    # unique_everseen('ABBCcAD', str.lower) --> A B C D
    seen = set()
    seen_add = seen.add
    if key is None:
        for element in ifilterfalse(seen.__contains__, iterable):
            seen_add(element)
            yield element
    else:
        for element in iterable:
            k = key(element)
            if k not in seen:
                seen_add(k)
                yield element 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T14:15:45.913

```
def unique_with_order(seq):
    final = []
    for item in seq:
        if item not in final:
            final.append(item)
    return final

print unique_with_order([1,2,3,3,4,3,6]) 
```

把它分解，让它变得简单:) 这些天，并不是所有的东西都必须是一个列表理解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T14:35:41.090

@mgilson 的答案是正确的，但在这里，供您参考，是同一功能的可能的惰性（[生成器](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)）版本。这意味着它适用于不适合内存的迭代器——包括无限迭代器——只要它的元素集可以。

```
def unique(iterable):
    uniq = set()
    for item in iterable:
        if item not in uniq:
            uniq.add(item)
            yield item 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-02T14:21:18.993

第一次运行这个函数时，你会`[1,2,3,4]`从你的列表理解中得到，并且集合`uniq`会被清空。第二次运行这个函数，你会得到`[]`，因为你的集合`uniq`是空的。您在第二次运行时没有收到任何错误的原因是 Python 的`and`短路 - 它看到第一个子句 ( `item in uniq`) 是错误的，并且不会费心运行第二个子句。

# c++ - Code::blocks，定义默认输入

> ID：13196915
> 
> 赞同：3
> 
> 时间：2012-11-02T14:12:48.323
> 
> 标签：c++, input, codeblocks

我想在提供标准输入的 Code::blocks IDE 程序中执行。

说

```
 #include <iostream>
#include <cmath>

using namespace std;

int main()
{
    double a;
    double b;

    cout << "Side one\n";
    cin >> a;
    cout << "Side two\n";
    cin >> b;

    cout << "Result :" << sqrt(a*a + b*b) << endl;
} 
```

使用文件中提供的参数 "a" 和 "b" ：

说：

```
2 4 
```

我可以在 bash 中做到这一点，编译然后：

```
"./my_compiled_program < ./myinput" 
```

我只是想在 code::blocks 中拥有带有参数（标准输入）的文件。

我怎样才能做到这一点？PS：不幸的是，“设置程序的参数”不起作用![设置程序的参数](../Images/cb20f4391daf1467947bc03adbea309c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T14:47:52.643

感谢@aleguna：

我们应该在我们要编译和执行的文件所在的文件夹中创建文件： ![将输入放在源代码旁边](../Images/34b2a597409208e10b07c664a3a08c5c.png)

然后添加`< ./input`到程序参数，其中`input`是我们放置在源代码旁边的文件名。

![在代码::块中](../Images/930ef5d2b367632017de116f16c276c3.png)

谢谢@aleguna。

# biztalk - 如何将屏蔽密码属性添加到 BizTalk 自定义文件适配器？

> ID：13196916
> 
> 赞同：0
> 
> 时间：2012-11-02T14:12:48.207
> 
> 标签：biztalk, biztalk-2009

我已经使用 BTS 2009 SDK 中的示例构建了一个自定义文件适配器，但是我需要使用除了运行主机实例的凭据之外的凭据通过此适配器接收文件。我想为用户名和密码的适配器的属性窗口添加 2 个属性（我知道该怎么做），但我想隐藏密码属性上的密码文本。有谁知道该怎么做？我可以在属性上的 ReceiveLocation.xsd 中设置一些东西，让它知道它是用于密码的，类似于 TextBox.PasswordChar 属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:15:11.853

我需要在 ReceiveLocation.xsd 中使用 Biztalk 适配器框架 PasswordUITypeEditor 和 PasswordTypeConverter 组件，如下所示：

```
 <xs:element name="Password">
          <xs:simpleType>
            <xs:annotation>
              <xs:appinfo>
                <baf:designer>
                  <baf:displayname _locID="passwordName">Password</baf:displayname>
                  <baf:description _locID="passwordDesc">Enter username for authentication to directory</baf:description>
                  <baf:editor assembly="%BTSROOT%\\Developer Tools\\Microsoft.BizTalk.Adapter.Framework.dll">Microsoft.BizTalk.Adapter.Framework.ComponentModel.PasswordUITypeEditor</baf:editor>
                  <baf:converter assembly="%BTSROOT%\\Developer Tools\\Microsoft.BizTalk.Adapter.Framework.dll">Microsoft.BizTalk.Adapter.Framework.ComponentModel.PasswordTypeConverter</baf:converter>
                  <baf:category _locID="authenticationCategory">Endpoint Directory Authentication</baf:category>
                </baf:designer>
              </xs:appinfo>
            </xs:annotation>
            <xs:restriction base="xs:string">
              <xs:maxLength value="22" />
            </xs:restriction>
          </xs:simpleType>
        </xs:element> 
```

# java - Appengine JPA 更新

> ID：13196919
> 
> 赞同：2
> 
> 时间：2012-11-02T14:13:19.910
> 
> 标签：java, google-app-engine, jpa-2.0, datanucleus

您好，我正在为 Datanucleus 使用 Google App Engine SDK 1.7.3 和 JPA。我无法更新变量中的对象`t`。

[我已经按照这个问题](https://stackoverflow.com/questions/1403515/appengine-datastore-object-with-id-is-managed-by-a-different-object-manage)的接受答案中的说明编写了我的代码。

如果我使用代码：

```
 PersistenceManager persistenceManager=JDOHelper.getPersistenceManager(t);
    persistenceManager.refresh(t);
    return t; 
```

我得到：

```
java.lang.UnsupportedOperationException: Method not supported with JPA
    at org.datanucleus.api.jpa.JPAPersistenceManager.refresh(JPAPersistenceManager.java:693)
    at com.appspot.diasporajava.dao.GenericDaoImpl.update(GenericDaoImpl.java:74) 
```

如果我使用代码：

```
return this.emf.createEntityManager().merge(t); 
```

其中 emf 是一个 EntityManagerFactory。

我得到：

```
javax.persistence.PersistenceException: Object with id "com.appspot.diasporajava.entities.Post@447cc9c9" is managed by a different Object Manager
    at org.datanucleus.api.jpa.NucleusJPAHelper.getJPAExceptionForNucleusException(NucleusJPAHelper.java:302)
    at org.datanucleus.api.jpa.JPAEntityManager.merge(JPAEntityManager.java:576)
    at com.appspot.diasporajava.dao.GenericDaoImpl.update(GenericDaoImpl.java:76) 
```

我必须一直打开我的持久性管理器吗？

[相关票证](http://www.jpox.org/servlet/jira/browse/NUCCORE-284)。

我用来创建对象的 ocde 如下：

```
@Override
@Transactional
public T create(final T t) {    
    EntityManager em = this.emf.createEntityManager();
    em.persist(t);
    em.close();
    return t;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T22:07:14.817

问题是我第一次`EntityManager`拿到对象时没有关闭。`t`

# symfony - Symfony 2.1 自己的供应商库

> ID：13196922
> 
> 赞同：1
> 
> 时间：2012-11-02T14:13:42.150
> 
> 标签：symfony

我想放一些我将在应用程序包之外的不同项目中使用的代码。我把它放在供应商文件夹的一个新文件夹中，但我不能包含在项目中。有哪些步骤？

*   我应该遵循文件夹和命名空间的特殊结构吗
*   我如何包含在我的项目中。

在谷歌上，我发现了很多模棱两可的答案。我也试过[这个](https://stackoverflow.com/questions/11496255/where-to-register-autoload-when-the-vendor-is-not-managed-with-composer-in-symfo)，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:09:06.137

您需要加载您的库。你通过告诉作曲家在哪里可以找到你的库来做到这一点。

最好的办法是为此源代码设置一个 git 存储库，然后使用 composer 加载它，使其保持最新并将其包含到自动加载器中。您可能需要习惯 composer 来执行此操作，但是由于 composer 正在获取 php 的默认依赖项管理工具，因此不会浪费时间。你可以在这里找到文档：http: [//getcomposer.org/doc/](http://getcomposer.org/doc/)

如果不想这样做，可以向 composer 添加一个新的 src 代码文件夹。假设您的文件夹结构是这样的：

symfony2/vendor/yourlibrary/Bla/Blub/MyClass.php

首先，MyClass.php 应该定义命名空间 Bla/Blub。Else 然后你可以像这样将你的库添加到 composer.json 文件中：

```
"autoload": {
    "psr-0": { 
        "": "src/",
        "Bla": "vendor/yourlibrary/"
    }
} 
```

你已经定义了自动加载，所以你需要覆盖它！

如果您的库没有命名空间，您仍然可以定义 composer 来加载它。我没有使用这个，所以我可以链接你可以阅读的文档：http: [//getcomposer.org/doc/04-schema.md#autoload](http://getcomposer.org/doc/04-schema.md#autoload)

# r - R：本地排名列表，按行中的值聚合

> ID：13196923
> 
> 赞同：-2
> 
> 时间：2012-11-02T14:13:42.370
> 
> 标签：r, subset, ranking

我有以下形式的数据：

```
"almond" "blueberry" 3
"almond" "leek" 6
"almond" "citron" 7
"almond" "fish" 2
...
"leek" "swiss_cheese" 3
"leek" "pumpkin" 5
"leek" "onion" 4
"leek" "chocolate" 10
... 
```

对于第一列中的每个值，我想根据第三列找到*k个最佳合作伙伴。*“最佳”是指：第三行中的较低数字。因此，对于*杏仁*来说，它的三个最佳搭档是*鱼、蓝莓、韭菜*。对于*韭菜*来说，它的三个最佳搭档是*`swiss_cheese`洋葱和南瓜*。我最后想将全表减少到第一列中每个因素的三个最佳合作伙伴，即

```
"almond" "blueberry" 3
"almond" "leek" 6
"almond" "fish" 2
...
"leek" "swiss_cheese" 3
"leek" "pumpkin" 5
"leek" "onion" 4
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:12:30.860

所以，我发现这样做的一种方法是

```
require(plyr)
t <- ddply(table, .(V1), transform, rank = rank(V3))
z <- t[rank <= k,] 
```

如果尚未加载，第一行将加载包。第二个将最后一列添加到*表*中，该列称为*排名*，包含根据第三列（“V3”）的每一行的排名，由第一列（“V1”）聚合。即，对于第一列中的每个不同值，包含它的所有行都有一个本地排名。在第二步中，我可以只对那些秩小于给定*k*的行进行子集化。

# php - 如何登录到使用带有 Curl 的 javacookies 的 https？

> ID：13196924
> 
> 赞同：1
> 
> 时间：2012-11-02T14:13:52.883
> 
> 标签：php, javascript, curl, autologin

我尝试使用 curl 登录我的银行。在涉及到 cookie（由 javascript 设置）之前，这一切都很好。这是我要发送的表格（凭据是假的）：

```
<form  method="post" action="https://www.icabanken.se/Secure/Login/LoginVerify.aspx">
    <input type="hidden" name="pnr" value="8502191714" />
    <input type="hidden" name="JSEnabled" value="1" />
    <input type="hidden" name="OBAS" value="" />
    <input type="hidden" name="refurl" value="" />
    <input type="hidden" name="refurlrequiressigning" value="False" />
    <input type="password" class="typetext" name="Password" id="PasswordSimple" maxlength="4" value="1111" />
    <input class="button-image button-small" type="submit" id="LoginSimplifiedButton" value="Logga in" />
</form> 
```

使用以下 PHP / CURL 代码：

```
enter codssde here

$post_data['pnr'] = '8502191714';
$post_data['password'] = '1111';
$post_data['JSEnabled'] = '1';
$post_data['OBAS'] ='';
$post_data['refurlrequiressigning'] = '';
$post_data['refurl'] = '';  

foreach ( $post_data as $key => $value) {
    $post_items[] = $key . '=' . $value;
}

$post_array = implode ('&', $post_items);

$ch = curl_init();
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLINFO_HEADER_OUT, 1);
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_CERTINFO, 1);
curl_setopt($ch, CURLOPT_BUFFERSIZE, 1000000);

//COOKIES
$Cookiefile='C:\wamp\www\Project1\gcookies.txt';          
curl_setopt($ch, CURLOPT_COOKIEFILE, $Cookiefile);
//curl_setopt($ch, CURLOPT_COOKIEJAR, $Cookiefile);

curl_setopt($ch, CURLOPT_HEADER, 1);  
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120);
curl_setopt($ch, CURLOPT_TIMEOUT, 120);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_array);

curl_setopt($ch, CURLOPT_URL,'https://www.icabanken.se/Secure/Login/LoginVerify.aspx');
$data = curl_exec($ch);

echo $data; 
```

我得到的响应是“您的浏览器不支持 cookie”。有什么巧妙的解决方案可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:32:29.870

我的建议是使用 Fiddler2 之类的东西： [http ://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

正常登录您的银行，Fiddler 会记录所有内容（您需要启用 https 解码，否则只能看到 http 流量）

从这些日志中，您可以看到原始标头信息和原始 cookie 内容。然后使用此信息在 cURL 中复制登录。

# perl - 为什么打印命令在 STDIN 之后执行，尽管在它之前调用？

> ID：13196927
> 
> 赞同：2
> 
> 时间：2012-11-02T14:14:06.107
> 
> 标签：perl

我有一个简单的程序

```
use strict;
use warnings;

print "Enter a number:\n";
my $number1 = <STDIN>;
chomp $number1;
print "Enter another number:\n";
my $number2 = <STDIN>;
chomp $number2;
if ( $number2 == 0 ) {
    print "error: cnt divide by zero\n";
}
elsif ( ( $number1 == 0 ) or ( $number2 == 1 )) {
    print "$number1\n";
}
else {
    my $div = $number1 / $number2;
    print "the result is: $div\n";
} 
```

但我不明白为什么打印（输入一个数字并输入另一个数字会显示在 STDIN 之后）。我得到以下输出

```
[612] perl test.pl
2
0
Enter a number:
Enter another number:
error:cnt divide by zero 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:30:12.897

`$| = 1`在程序开始时

# routes - 带有自定义控制器映射的 Ember.js 路由

> ID：13196929
> 
> 赞同：1
> 
> 时间：2012-11-02T14:14:07.533
> 
> 标签：routes, ember.js

我似乎无法在`Route.connectOutlets`方法内指定自定义控制器。这个想法是我不想为每个视图创建空控制器，因为我不相信这首先是正确的实现。简而言之，如果我以[Gordon Hempton 为例](https://github.com/ghempton/ember-router-example)并稍微更新路由器项目/项目路由中的代码

```
item: Ember.Route.extend({
      route: '/:item_id',
      connectOutlets: function(router, context) {
        var item = router.getPath('itemsController.content').objectAt(context.item_id);
        router.get('itemController').set('content', item);
        router.get('applicationController').connectOutlet('item');
      }
    }) 
```

至

```
item: Ember.Route.extend({
route: '/:item_id',
connectOutlets: function (router, context) {
    var item = router.getPath('itemsController.content').objectAt(context.item_id);
    var applicationController = router.get('applicationController');
    applicationController.connectOutlet({ 
        viewClass: router.namespace.ItemView, 
        context: item, 
        controller: applicationController 
    });
  }
}) 
```

项目选择停止工作，没有任何错误。我是不是在代码中出错了，或者不支持控制器的多个视图的场景？

升级版：

ItemView 模板如下：

```
<script type="text/x-handlebars" data-template-name="item">
  <h1>{{title}}</h1>
  {{{description}}}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:30:38.293

您是否尝试过使用相关项目作为您的控制器？这样您就可以避免创建未使用的空控制器并使您的项目内容可用于您的视图。

```
applicationController.connectOutlet({ 
    viewClass: router.namespace.ItemView, 
    controller: item
}); 
```

# objective-c - 什么是正确的应用内购买产品类型？

> ID：13196932
> 
> 赞同：3
> 
> 时间：2012-11-02T14:14:21.060
> 
> 标签：objective-c, ios, in-app-purchase, storekit

我正在决定如何构建我的应用内购买。我的目标是在*没有*我自己的服务器基础架构的情况下做到这一点。

我的应用程序生成 PDF 格式的报告，该报告通过电子邮件导出。我想将报告的数量限制为 3，之后必须再购买 3 个。报告的所有数据以及报告本身都是在设备上本地创建的。

这应该是一种**`Non-Consumable`**类型吗？也许不是，因为它在[文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html)中说这应该是一次性购买。但我希望用户能够再次购买另外 3 份甚至 10 份报告。但是，它还说这种类型应该在安装了我想要的应用程序的所有设备上自动可用。

或者它应该是一种**`Consumable`**类型？同样，这似乎不合适。文档声明它*“必须在用户每次需要该项目时购买”。*. 从概念上讲，这似乎很接近，但是如果在 iPhone 上消耗了 2 个报告，并且每个设备上仍然应该有一个报告，我该如何跟踪？

我想我们可以排除**`Auto-Renewable Subscription`**。

也许它应该是一个**`Non-Renewable Subscription`**. 但是，我不希望我的报告信用有一个到期日期，理想情况下它们应该传播到所有设备，这种类型也不提供。

我愿意在全设备传播上妥协。应准确跟踪积分，并且应该可以无限量购买。

这将如何在应用程序中实现？`NSUserDefaults`在启用导出按钮之前只检查一个数字？每次导出报告时是否可以通过 StoreKit 以某种方式进行检查？（它是通过电子邮件导出的，因此无论如何*在线都是先决条件）。*

是否可以避免我自己的服务器基础架构？如果没有，我需要跟踪什么？

有什么想法、指导和建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:28:01.793

正如 Black Frog 的回答中提到的，仅仅为了避免服务器基础设施，依靠 Apple 的一方可能是一个更难的解决方法。您必须撤销较旧的购买并计算用户花费了什么以及剩下什么。即使这样，我想你也需要一台服务器。

我将尝试将整个消耗品应用内循环分解；

*   实现应用内 (iOS) 的客户端
*   对于服务器端，您将需要；（最小的努力）
    *   两张表，一张保存用户及其剩余使用时间（积分）和一张保存购买报告
    *   两个脚本，（在 php 上简单几行）一个用于减少信用，一个用于保存来自 Apple 的收据信息，以及验证它。

基本上你不需要一个完整的基础设施来实现你应用内的服务器端，所以不要让它吓到你。就我所见，保留你出售给用户的每一个信息比依赖苹果方面更安全。

这里要注意的另一件重要事情是，应用内购买可能是伪造的，防止这种情况发生的唯一方法是验证购买的收据，请在[此处查看](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html)。还要注意，使用 php 脚本要容易得多。如果您尝试发送检索到的收据并将其发送到用户设备进行验证，您将为此实现一个完整的类。

如果您有任何想法，请告诉我，以便我尝试详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:54:30.877

因为您不想创建自己的服务器基础架构，所以用户在使用您的应用时不会获得最佳体验。暂时忘记不同类型的应用内购买。假设您在加密文件中跟踪用户可以在设备上生成的报告数量。假设文件位于`NSApplicationSupportDirectory`.

摘自 Apple Docs on [Determining Where to Store Your App-Specific Files](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/AccessingFilesandDirectories/AccessingFilesandDirectories.html)：

*   您的应用程序为用户创建和管理的资源和数据文件。您可以使用此目录来存储应用程序状态信息、计算或下载的数据，甚至是您代表用户管理的用户创建的数据。
*   自动保存文件。
*   在 iOS 中，此目录的内容由 iTunes 备份。

因此，每次用户进行应用内购买时，您都会按金额增加计数。每当用户生成文档时，我都会减少它。有了 iCloud，这些信息就在用户拥有的所有设备上。

这就是可能发生不良用户体验的地方。假设我有一台设备，我购买了 5 个报告。我只使用了 2 个。假设我的设备存储空间不足，我想暂时删除您的应用程序。当我再次安装它时，我丢失了我拥有的 3 份信用报告。这就是为什么您需要一个服务器来跟踪/跟踪购买历史以及生成报告的时间。

# uiscrollview - 不理解运行时错误

> ID：13196935
> 
> 赞同：1
> 
> 时间：2012-11-02T14:14:34.010
> 
> 标签：uiscrollview, xamarin.ios

有一个难以理解的问题。我在视图控制器中有一个 ShinobiGrid 视图。尝试将网格居中在网格（列）的中间

```
spreadSheet.SetContentOffset(new PointF(200, 0), true); 
```

通过这样做，我得到一个运行时异常并且我不理解它（因为我不是一个 Objective-C 程序员）。这是怎么回事？

```
{MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  
Name:       NSRangeException Reason: *** -[__NSArrayM insertObject:atIndex:]: 
index 1 beyond bounds for empty array   at (wrapper managed-to-native)     
MonoTouch.ObjCRuntime.Messaging:void_objc_msgSendSuper_PointF_bool 
(intptr,intptr,System.Drawing.PointF,bool)   at 
MonoTouch.UIKit.UIScrollView.SetContentOffset   
(PointF contentOffset, Boolean animated) [0x00027] in 
/Developer/MonoTouch/Source/monotouch/src/UIKit/UIScrollView.g.cs:210    at 
Roombler.Gui.IPad.ViewControllers.RoomblerViewController.ViewDidLoad () [0x0011c] in 
/Users/jonas/Documents/Roombler/BitBucket/Roombler.Gui/Roombler.Gui.IPad/ViewControllers/RoomblerViewController.cs:97    
at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging:void_objc_msgSend  
(intptr,intptr)   at MonoTouch.UIKit.UIWindow.MakeKeyAndVisible () [0x00010] in 
/Developer/MonoTouch/Source/monotouch/src/UIKit/UIWindow.g.cs:124    at 
Roombler.Gui.IPad.ViewControllers.AppDelegate.FinishedLaunching 

(MonoTouch.UIKit.UIApplication app, MonoTouch.Foundation.NSDictionary options) 
[0x00031] in
/Users/jonas/Documents/Roombler/BitBucket/Roombler.Gui/Roombler.Gui.IPad/ViewControllers/AppDelegate.cs:29    
at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain 
(int,string[],intptr,intptr)   at MonoTouch.UIKit.UIApplication.Main (System.String[] 
args, System.String principalClassName, System.String delegateClassName) [0x0004c] in 
/Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38    at 
Roombler.Gui.IPad.Application.Main (System.String[] args) [0x00000] in 
/Users/jonas/Documents/Roombler/BitBucket/Roombler.Gui/Roombler.Gui.IPad/Main.cs:17 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:32:09.937

ShinobiControll 的支持团队帮助了我。

“当时网格不知道它有多大。你可以把

spreadSheet.Reload();

在 SetContentOffset 之前"

那成功了！

# c# - 如何在多步骤向导中找到所有控件？

> ID：13196939
> 
> 赞同：0
> 
> 时间：2012-11-02T14:14:42.983
> 
> 标签：c#, asp.net, controls, wizard

我想通过多个步骤在 asp:wizard 中自动收集所有信息（即控制值）。怎么做？我找到了一个有趣的链接，但它似乎无法正常工作：只是关于当前步骤的一些信息：http: [//msdn.microsoft.com/en-us/library/yt340bh4 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/yt340bh4(v=vs.80).aspx)

```
foreach (Control c in Page.Controls)
{
    foreach (Control childc in c.Controls)
    {
        if (childc is Label)
        {
            lblTitre0.Text += ((Label)childc).Text + ",";
        }
    }
} 
```

lblTitre0 (asp:label) 中没有显示数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:31:01.303

试试这个

```
<asp:Wizard runat="server" ID="mainWizard">
 <WizardSteps>
  <asp:WizardStep>
   <asp:Label runat="server" ID="lbl1" Text="Label one" />
  </asp:WizardStep>
  <asp:WizardStep>
   <asp:Label runat="server" ID="lbl2" Text="Label two" />
  </asp:WizardStep>
 </WizardSteps>
</asp:Wizard>
<asp:Button runat="server" ID="btnGetall" Text="Get All controls" 
            OnClick="btn_Click" />
<br />
<asp:Label runat="server" ID="lblResult" /> 
```

* * *

```
protected void btn_Click(object sender, EventArgs e)
{
   foreach (WizardStep step in mainWizard.WizardSteps)
   {
     foreach (Control cntrl in step.Controls)
     {
        if (cntrl is Label)
          lblResult.Text += ((Label)cntrl).Text + ",";
     }
    }
} 
```

# javascript - 自动添加 wmode=“opaque” 以嵌入 jQuery？

> ID：13196941
> 
> 赞同：1
> 
> 时间：2012-11-02T14:14:51.837
> 
> 标签：javascript, jquery, youtube, embed

我正在使用以下脚本将 wmode="opaque" 添加到嵌入元素：

```
jQuery("iframe[src], embed[src]").each(function () {
    jQuery(this).prop("src", jQuery(this).prop("src") + "?wmode=opaque");
}); 
```

它工作正常，但在嵌入 src 的最后添加了 wmode，如下所示：

```
http://www.youtube.com/embed/example?fs=1&feature=oembed?wmode=opaque 
```

这并不能让它发挥作用。我希望它更准确，因此它将 wmode 添加为嵌入链接之后的第一个属性，因此无论我如何通过嵌入 URL，例如：

```
http://www.youtube.com/embed/example?fs=1&feature=oembed 
```

该脚本将使其如下所示：

```
http://www.youtube.com/embed/example?wmode=opaque?fs=1&feature=oembed 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:25:28.973

我认为你应该补偿这两个方面，因为

```
http://www.youtube.com/embed/example?wmode=opaque?fs=1&feature=oembed 
```

也是错误的，只有第一个参数应该有`?`

所以，你可以试试：

```
jQuery("iframe[src], embed[src]").each(function () {
    var url = jQuery(this).prop("src");
    if(url.search(/\?/) === -1) {
            jQuery(this).prop("src", url + "?wmode=opaque");
    } else {
            jQuery(this).prop("src", url + "&wmode=opaque");
    }
}); 
```

如果您希望代码更小，可以将 if 语句替换为：

```
 jQuery(this).prop("src", url + ((url.search(/\?/) === -1) ? url + "?wmode=opaque" : "&wmode=opaque")); 
```

另外我建议您查看[查询字符串参数](http://en.wikipedia.org/wiki/Query_string)（在我留下的链接中，或在谷歌上搜索）

**编辑**

我不明白你为什么需要它在一开始，我很确定你只是不明白查询参数是如何工作的。但是，这里是代码：

```
jQuery("iframe[src], embed[src]").each(function () {
    var url = jQuery(this).prop("src");
        if(url.search(/\?/) === -1) {
            jQuery(this).prop("src", url + "?wmode=opaque");
        } else {
            var splittedUrl = url.split("?");
            jQuery(this).prop("src", splittedUrl[0] + "?wmodeopaque&" + splittedUrl[1]);
        }
}); 
```

# javascript - 亚马逊小部件在 IE8 中输出乱码

> ID：13196943
> 
> 赞同：1
> 
> 时间：2012-11-02T14:14:53.363
> 
> 标签：javascript, internet-explorer-8, widget, internet-explorer-7, amazon

在特定页面上使用亚马逊的“我的收藏夹小部件”适用于大多数浏览器，但 IE8 及以下版本正在将某些文本输出中的空格替换为`&nbsp;`- 字符实体的代码实际上显示在输出中。

在空白页面上，小部件工作正常，问题仅在这个特定页面上，所以我认为它与另一个脚本冲突。不过，我没有看到任何错误或警告。

这是有问题的页面：http: [//makegoodcoffee.com/shopping-guide](http://makegoodcoffee.com/shopping-guide)

任何帮助将不胜感激，这个问题对我来说似乎很奇怪。

# java - 相机预览的视频视图

> ID：13196944
> 
> 赞同：2
> 
> 时间：2012-11-02T14:14:58.350
> 
> 标签：java, android, video, camera

我正在尝试播放视频并希望在相机预览中显示它。视频以透明背景播放，视频控件也显示，但没有视频可见。我确实听到了正在播放的视频的声音。

**这是我的代码：**

```
// CameraSampleActivity.java, OnCreate Method

 View layout_Initialization= (View)findViewById(R.id.layout_Initialization);
 layout_Initialization.setVisibility(View.VISIBLE);

View custom_Video_Dialog=(View)findViewById(R.id.videoLayout);
custom_Video_Dialog.setVisibility(View.GONE);

//Code related to camera and camera preview here in the OnCreate method

// CameraSampleActivity.java This code is executed when video needs to be played

View custom_Video_Dialog=(View)findViewById(R.id.videoLayout);
custom_Video_Dialog.setVisibility(View.VISIBLE);

VideoView mVideoView = (VideoView) findViewById(R.id.myvideoview);
mVideoView.setMediaController(new MediaController(CameraSampleActivity.this));
mVideoView.setVideoURI(Uri.parse(firstVideo.getUrl()));

 mVideoView.setOnPreparedListener(new OnPreparedListener() {

                    public void onPrepared(MediaPlayer arg0) {
                        mVideoView.setFocusable(true);
                        mVideoView.requestFocus();
                        mVideoView.start();
                    }
                }); 
```

**// 这里是 main.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_layout" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="@drawable/transparent"
    android:orientation="vertical" xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads">
    <FrameLayout android:layout_width="fill_parent"
        android:layout_height="0px" android:layout_weight="1">
        <FrameLayout android:id="@+id/cameraPreview"
            android:layout_width="fill_parent" android:layout_height="fill_parent" />

        <RelativeLayout android:id="@+id/layout_Initialization"
            android:layout_width="fill_parent" android:layout_height="fill_parent"
            android:background="@drawable/transparent" android:orientation="horizontal">
.................................
.................................
....................... .........        
        </RelativeLayout>
        <RelativeLayout
                android:id="@+id/videoLayout"
                android:layout_width="fill_parent"
                android:layout_height="280dp" >

            <VideoView android:id="@+id/myvideoview"
                android:layout_width="fill_parent" android:layout_height="180dp"
                android:layout_alignParentTop="true" />
            <Button android:id="@+id/videoListButton" android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentLeft="true" android:text="List" />
        </RelativeLayout>

    </FrameLayout>

</LinearLayout> 
```

我认为传递给 mediaController 的上下文不正确。请注意，如果我将 videoLayout 放在 frameLayout 之外，则视频可见但不透明。将它放在 Framelayout 中可以使我的透明度和视频显示在背面可见的相机预览中，这就是我想要的。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T17:00:42.327

我设法做了一些非常相似的事情，将 TextView 覆盖在相机视频预览上，这可能会对您有所帮助：

与线性布局不同，声明顺序不定义相对布局中的 Z 顺序。通过在 XML 中声明两个视图，并以编程方式将它们覆盖在我的 Activity 的 onCreate 方法上，我能够在相机预览上覆盖一个文本视图。

假设你有一个带有 TextView 的 XML，它有一个漂亮的透明背景，你想覆盖在 Camera Preview 框架布局上，因为为什么不呢？它看起来很酷！：

```
<RelativeLayout>
      <TextView
        android:id="@+id/txtnombotiga"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Ola ke ase"
        android:textColor="#000000"
        android:textSize="16sp"    
        android:background="#55ffffff" 
       />
  <FrameLayout
      android:id="@+id/cameraPreview"
      android:layout_width="match_parent"
      android:layout_height="240dp">     
  </FrameLayout>
</RelativeLayout> 
```

*如果这样，相机将覆盖您的文本，*无论如何先装相机。

这是代码

OnCreate(){ ...blaa blaaa...

```
//Create camera instance and reference to our frame Layout
mPreview = new CameraPreview(this, mCamera, previewCb, autoFocusCB);        
FrameLayout preview = (FrameLayout) findViewById(R.id.cameraPreview);
//Add camera to the Frame Layout
preview.addView(mPreview);
//Get reference to the TextView you want to overlay and type something funny
TextView txt=(TextView)findViewById(R.id.txtnombotiga);     
txt.setText("ola keee aseee!");
//1) Step 1, here comes the magic! dettach the textView from its original Layout
((ViewGroup)txt.getParent()).removeView(txt);
//1) Step 2, voila! attach it to the View, order matters here so it will appear on 
//top of the camera!
preview.addView(txt); 
```

这是执行此操作的一般方法，如果您需要更多详细信息，请告诉我。我需要在工作中按时完成，所以我使用了我想到的第一个解决方案，有时不是最优雅或最有效的解决方案，如果您知道更好的方法，请与我们分享！

# javascript - 数字键盘的keyCode值？

> ID：13196945
> 
> 赞同：85
> 
> 时间：2012-11-02T14:15:00.163
> 
> 标签：javascript, jquery, web-applications, numeric-keypad

数字小键盘上的数字是否与键盘顶部的数字不同？

下面是一些应该在 keyup 事件上运行的 JavaScript，但前提是 keycode 在 48 到 57 之间。代码如下：

```
$('#rollNum').keyup(function(e) {
    if(e.keyCode >= 48 && e.keyCode <= 57) { //0-9 only
        var max = 15;
        var textLen = $(this).val().length;
        var textLeft = max - textLen;
        . . . 
```

我的问题是此代码仅响应在键盘顶部输入的数字运行，而不响应从数字键盘输入的数字运行。

我在想答案一定是数字小键盘有不同的 keyCode 值，但我如何找出那些是什么？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-11-02T14:17:06.400

键码不同。键盘 0-9 是键`96`码`105`

你的`if`陈述应该是：

```
if ((e.keyCode >= 48 && e.keyCode <= 57) || (e.keyCode >= 96 && e.keyCode <= 105)) { 
  // 0-9 only
} 
```

这是密钥代码的[参考指南](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

* * *

**- 更新 -**

这是一个旧答案，`keyCode`已被弃用。现在有替代方法可以实现这一点，例如使用`key`：

```
if ((e.key >= 48 && e.key <= 57) || (e.key >= 96 && e.key <= 105)) { 
  // 0-9 only
} 
```

这是[event.key 的输出测试器](https://keyjs.dev/)，感谢@Danziger 提供链接。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-01-09T15:06:56.147

*********************不要使用 KEYCODE !!!!** ******************

**keyCode**的问题是为了避免与键盘顶部的数字组合键，我们必须在键**“Shift”**和**“Alt”**上添加一个检查以避免特殊字符，例如**e @ & “ { }** ...

最简单的解决方案是将**e.key**转换为数字并检查转换是否给出**NaN**！

```
let key = Number(e.key)
if (isNaN(key) || e.key === null || e.key === ' ') {
  console.log("is not numeric")
}
else {
  console.log("is numeric")
} 
```

**如果 e.key 为**null**或**空格，****请小心**，它给出**0**！**

 **```
Number(5)         // => 5
Number('5')       // => 5
Number(null)      // => 0 
Number(' ')       // => 0
Number('chars')   // => NaN
Number(undefined) // => NaN 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-02T14:23:32.397

你可以简单地运行

```
$(document).keyup(function(e) {
    console.log(e.keyCode);
}); 
```

在浏览器控制台中查看按键的代码。

或者您可以在这里找到关键代码：[https ://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode#Numpad_keys](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode#Numpad_keys)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-10-26T11:20:00.267

*keyCode 对于数字键盘上的数字和键盘顶部的数字是不同的。*

键码：

**键盘顶部的数字**(0 - 9) : 48 - 57
**数字键盘上的数字** (0 - 9) : 96 - 105

JavaScript 条件：

```
if((e.keyCode >= 48 && e.keyCode <=57) || (e.keyCode >= 96 && e.keyCode <=105)) { 
    // entered key is a number
} 
```

所有键码的参考（带演示）： http: [//www.codeforeach.com/javascript/keycode-for-each-key-and-usage-with-demo](http://www.codeforeach.com/javascript/keycode-for-each-key-and-usage-with-demo)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-09T12:49:04.210

对于需要 CTRL+C、CTRL-V 解决方案的人来说，这里是：

```
 /**
     * Retrieves the number that was pressed on the keyboard.
     *
     * @param {Event} event The keypress event containing the keyCode.
     * @returns {number|null} a number between 0-9 that was pressed. Returns null if there was no numeric key pressed.
     */
    function getNumberFromKeyEvent(event) {
        if (event.keyCode >= 96 && event.keyCode <= 105) {
            return event.keyCode - 96;
        } else if (event.keyCode >= 48 && event.keyCode <= 57) {
            return event.keyCode - 48;
        }
        return null;
    } 
```

它使用第一个答案的逻辑。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-19T15:42:31.217

要添加其他一些答案，请注意：

*   `keyup`并且`keydown` [不同于`keypress`](https://stackoverflow.com/a/5630990/4500152)
*   如果你想用来`String.fromCharCode()`从 获取实际数字`keyup`，你需要首先对`keyCode`.

下面是一个自文档示例，它确定键是否为数字，以及它是哪个数字（示例使用[`range`函数 from`lodash`](https://lodash.com/docs/4.17.15#range)）。

```
const isKeypad = range(96, 106).includes(keyCode);
const normalizedKeyCode = isKeypad ? keyCode - 48 : keyCode;
const isDigit = range(48, 58).includes(normalizedKeyCode);
const digit = String.fromCharCode(normalizedKeyCode); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-31T14:11:34.683

是的，它们是不同的，虽然很多人都提出了使用 console.log 亲自查看的好建议。但是，我没有看到有人提到 event.location ，您可以使用它来确定数字是来自小键盘还是来自`event.location === 3`主键盘/通用键的顶部`event.location === 0`。当您通常需要确定击键是否来自键盘区域时，这种方法最适合，`event.key`对于特定键可能更好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-23T19:53:01.217

您可以使用关键代码页来查找：

> 事件代码

区分数字键盘。

[https://keycode.info/](https://keycode.info/)

```
function getNumberFromKeyEvent(event) {
   if (event.code.indexOf('Numpad') === 0) {
      var number = parseInt(event.code.replace('Numpad', ''), 10);
      if (number >= 0 && number <= 9) {
           // numbers from numeric keyboard
      }
   }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-06T11:26:32.417

文档说与 onkeyxxx 事件相关的事件顺序：

1.  onkeydown
2.  按键按下
3.  onkeyup

如果您使用如下代码，它也适合退格并输入用户交互。在你可以在 onKeyPress 或 onKeyUp 事件中做你想做的事之后。代码块触发 event.preventDefault 函数，如果值不是数字，退格或回车。

```
onInputKeyDown = event => {
    const { keyCode } = event;
    if (
      (keyCode >= 48 && keyCode <= 57) ||
      (keyCode >= 96 && keyCode <= 105) ||
      keyCode === 8 || //Backspace key
      keyCode === 13   //Enter key
    ) {
    } else {
      event.preventDefault();
    }
  }; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-01T14:24:12.767

@.A 的回答。我发现Morel 是最易于理解且占用空间小的解决方案。如果您想要更小的代码量，只是想在顶部添加此解决方案，它是对 Morel 的修改，适用于不允许任何类型的字母，包括输入臭名昭著的“e”字符。

```
function InputTypeNumberDissallowAllCharactersExceptNumeric() {
  let key = Number(inputEvent.key);
  return !isNaN(key);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-16T04:40:58.340

一点点清除@A.Morel的答案。您可能要注意键盘语言布局。一些键盘布局将默认数字键更改为符号。

```
let key = parseInt(e.key)
if (isNaN(key)) {
  console.log("is not numeric")
}
else {
  console.log("is numeric")
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2014-09-11T14:51:05.190

您可以使用它来轻松找出 keyCodes：

```
$(document).keyup(function(e) {
    // Displays the keycode of the last pressed key in the body
    $(document.body).html(e.keyCode);
}); 
```

[http://jsfiddle.net/vecvc4fr/](http://jsfiddle.net/vecvc4fr/)**

# asp.net - 在 Asp Web API 中处理复杂对象

> ID：13196946
> 
> 赞同：1
> 
> 时间：2012-11-02T14:15:02.533
> 
> 标签：asp.net, asp.net-mvc, rest

如何在asp web api的发布请求中发布多个复杂对象？我似乎发现的所有内容都表明请求正文中只允许使用一种对象类型。这个对吗？如果是这样，什么是体面的解决方法？样品型号：

```
public class Object1
{
    int numWheels { get; set; }
    string seatheight { get; set; }
    public Object2[] shopLoc { get; set; }
}

public class Object2 
{
    string streetName { get; set; }
    double revenue { get; set; }
}
Sample Products controller:
Post:products/Post/
public Object1 Post(Object1 tricycle, Object2 cyclingShop)
{
return tricycle;
} 
```

我将如何将它与 asp web api 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:15:53.357

你已经有一个类型的属性，`Object2`那么`Object1`为什么要`Object2`作为单独的参数呢？

我不会将它作为数组类型，而是将 Object2 作为类似的`Enumerable`道具`Object1`

```
public class Object1
{
    int numWheels { get; set; }
    string seatheight { get; set; }
    public IEnumerable<Object2> shopLoc { get; set; }
} 
```

在视图中完成此操作（强类型），您可以像这样渲染它

```
<%@ Page Inherits="ViewPage<Object1>" %>

<% for (int i = 0; i < Model.shoploc.Count(); i++) { %>

  <%: Html.TextBoxFor(m => m[i].streetName) %>
  <%: Html.TextBoxFor(m => m[i].revenue ) %>
<% } %> 
```

如果您有多个商店位置，则默认模型绑定器将很好地绑定商店集合

`POST`动作应该看起来像

```
public Object1 Post(Object1 tricycle)
{
return tricycle;
} 
```

# [好读](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

# c# - 在 PowerPoint 中显示 HTML

> ID：13196954
> 
> 赞同：2
> 
> 时间：2012-11-02T14:15:39.960
> 
> 标签：c#, powerpoint, openxml

**我的目标：**想在幻灯片中显示 HTML，我将其动态注入到主演示文稿中。

**到目前为止我所取得的成就：**将 Html 转换为 OpenXML（或者更具体的 WordML），然后将一个单词对象嵌入到 PowerPoint 中，然后通过 OpenXML SDK 生产力工具分析结构，它创建了包含文档的**嵌入**文件夹我'已选择，当我打开演示文稿时看到的视图基本上是 /ppt/media/image.emf 中的图像。

现在我已经动态替换了嵌入式 docx 的内容，但是如何生成它的图像以便我也可以更新视图？

或者有没有无痛的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-17T10:52:41.817

**注意：对于 WINFORMS C#**

好的，我没有仔细阅读您在查询中写的痛苦描述我相信您已经付出了很多汗水才能使它工作，在这里我分享无痛苦的解决方案（至少它对我有用) 我相信它也应该对你有用。

**如下创建一个类：（**我部分地从其他一些 SO 中获取了这个解决方案，抱歉不记得来源了）

```
using System;
using System.Text.RegularExpressions;
using System.Windows.Forms;

    public class HtmlFragment
    {
        #region Read and decode from clipboard

    static public HtmlFragment FromClipboard()

    {

        string rawClipboardText = Clipboard.GetText(TextDataFormat.Html);

        HtmlFragment h = new HtmlFragment(rawClipboardText);

        return h;

    }

    /// <summary>

    /// Create an HTML fragment decoder around raw HTML text from the clipboard.

    /// This text should have the header.

    /// </summary>

    /// <param name="rawClipboardText">raw html text, with header.</param>

    public HtmlFragment(string rawClipboardText)

    {

        // This decodes CF_HTML, which is an entirely text format using UTF-8.

        // Format of this header is described at:

        // http://msdn.microsoft.com/library/default.asp?url=/workshop/networking/clipboard/htmlclipboard.asp

        // Note the counters are byte counts in the original string, which may be Ansi. So byte counts

        // may be the same as character counts (since sizeof(char) == 1).

        // But System.String is unicode, and so byte couns are no longer the same as character counts,

        // (since sizeof(wchar) == 2).

        int startHMTL = 0;

        int endHTML = 0;

        int startFragment = 0;

        int endFragment = 0;

        Regex r;

        Match m;

        r = new Regex("([a-zA-Z]+):(.+?)[\r\n]",

            RegexOptions.IgnoreCase | RegexOptions.Compiled);

        for (m = r.Match(rawClipboardText); m.Success; m = m.NextMatch())

        {

            string key = m.Groups[1].Value.ToLower();

            string val = m.Groups[2].Value;

            switch(key)

            {

                // Version number of the clipboard. Starting version is 0.9.

                case "version":

                    m_version = val;

                    break;

                // Byte count from the beginning of the clipboard to the start of the context, or -1 if no context

                case "starthtml":

                    if (startHMTL != 0) throw new FormatException("StartHtml is already declared");

                    startHMTL = int.Parse(val);

                    break;

                // Byte count from the beginning of the clipboard to the end of the context, or -1 if no context.

                case "endhtml":

                    if (startHMTL == 0) throw new FormatException("StartHTML must be declared before endHTML");

                    endHTML = int.Parse(val);

                    m_fullText = rawClipboardText.Substring(startHMTL, endHTML - startHMTL);

                    break;

                //  Byte count from the beginning of the clipboard to the start of the fragment.

                case "startfragment":

                    if (startFragment != 0) throw new FormatException("StartFragment is already declared");

                    startFragment = int.Parse(val);

                    break;

                // Byte count from the beginning of the clipboard to the end of the fragment.

                case "endfragment":

                    if (startFragment == 0) throw new FormatException("StartFragment must be declared before EndFragment");

                    endFragment = int.Parse(val);

                    m_fragment = rawClipboardText.Substring(startFragment, endFragment - startFragment);

                    break;

                // Optional Source URL, used for resolving relative links.

                case "sourceurl":

                    m_source = new System.Uri(val);

                    break;

            }

        } // end for

        if (m_fullText == null && m_fragment == null)

        {

            throw new FormatException("No data specified");

        }

    }

    // Data. See properties for descriptions.

    string m_version;

    string m_fullText;

    string m_fragment;

    System.Uri m_source;

    /// <summary>

    /// Get the Version of the html. Usually something like "1.0".

    /// </summary>

    public string Version

    {

        get { return m_version; }

    }

    /// <summary>

    /// Get the full text (context) of the HTML fragment. This includes tags that the HTML is enclosed in.

    /// May be null if context is not specified.

    /// </summary>

    public string Context

    {

        get { return m_fullText; }

    }

    /// <summary>

    /// Get just the fragment of HTML text.

    /// </summary>

    public string Fragment

    {

        get {  return m_fragment; }

    }

    /// <summary>

    /// Get the Source URL of the HTML. May be null if no SourceUrl is specified. This is useful for resolving relative urls.

    /// </summary>

    public System.Uri SourceUrl

    {

        get { return m_source; }

    }

    #endregion // Read and decode from clipboard

    #region Write to Clipboard

    // Helper to convert an integer into an 8 digit string.

    // String must be 8 characters, because it will be used to replace an 8 character string within a larger string.

    static string To8DigitString(int x)

    {

        return String.Format("{0,8}", x);

    }

    /// <summary>

    /// Clears clipboard and copy a HTML fragment to the clipboard. This generates the header.

    /// </summary>

    /// <param name="htmlFragment">A html fragment.</param>

    /// <example>

    ///    HtmlFragment.CopyToClipboard("<b>Hello!</b>");

    /// </example>

    public static void CopyToClipboard(string htmlFragment)

    {

        CopyToClipboard(htmlFragment, null, null);

    }

    /// <summary>

    /// Clears clipboard and copy a HTML fragment to the clipboard, providing additional meta-information.

    /// </summary>

    /// <param name="htmlFragment">a html fragment</param>

    /// <param name="title">optional title of the HTML document (can be null)</param>

    /// <param name="sourceUrl">optional Source URL of the HTML document, for resolving relative links (can be null)</param>

    public static void CopyToClipboard(string htmlFragment, string title, Uri sourceUrl)

    {

        if (title == null) title = "From Clipboard"; 

        System.Text.StringBuilder sb = new System.Text.StringBuilder();

        // Builds the CF_HTML header. See format specification here:

        // http://msdn.microsoft.com/library/default.asp?url=/workshop/networking/clipboard/htmlclipboard.asp

        // The string contains index references to other spots in the string, so we need placeholders so we can compute the offsets.

        // The <<<<<<<_ strings are just placeholders. We’ll backpatch them actual values afterwards.

        // The string layout (<<<) also ensures that it can’t appear in the body of the html because the <

        // character must be escaped.

        string header =

@"Format:HTML Format

Version:1.0

StartHTML:<<<<<<<1

EndHTML:<<<<<<<2

StartFragment:<<<<<<<3

EndFragment:<<<<<<<4

StartSelection:<<<<<<<3

EndSelection:<<<<<<<3

";

        string pre =

@"<!DOCTYPE HTML PUBLIC ""-//W3C//DTD HTML 4.0 Transitional//EN"">

<HTML><HEAD><TITLE>" + title + @"</TITLE></HEAD><BODY><!–StartFragment–&gt;";

        string post = @"<!–EndFragment–&gt;</BODY></HTML>";

        sb.Append(header);

        if (sourceUrl != null)

        {

            sb.AppendFormat("SourceURL:{0}", sourceUrl);

        }

        int startHTML = sb.Length;

        sb.Append(pre);

        int fragmentStart = sb.Length;

        sb.Append(htmlFragment);

        int fragmentEnd = sb.Length;

        sb.Append(post);

        int endHTML = sb.Length;

        // Backpatch offsets

        sb.Replace("<<<<<<<1", To8DigitString(startHTML));

        sb.Replace("<<<<<<<2", To8DigitString(endHTML));

        sb.Replace("<<<<<<<3", To8DigitString(fragmentStart));

        sb.Replace("<<<<<<<4", To8DigitString(fragmentEnd));

        // Finally copy to clipboard.

        string data = sb.ToString();

        Clipboard.Clear();

        Clipboard.SetText(data, TextDataFormat.Html);

    }

    #endregion // Write to Clipboard
    } 
```

**用法说明如下：**

使用 PowerPoint = Microsoft.Office.Interop.PowerPoint；

```
var oPowerPoint = new PowerPoint.Application();
oPowerPoint.Visible = Microsoft.Office.Core.MsoTriState.msoTrue; 
```

我需要将内容粘贴到活动幻灯片上，所以我使用了下面的代码，您的逻辑可能会根据您的需要而有所不同，您可以忽略下面的代码行

```
 var activeSlide = (PowerPoint.Slide)oPowerPoint.ActiveWindow.View.Slide; 
```

**将您的 HTML 内容提供给以下方法**

```
HtmlFragment.CopyToClipboard(HTML CONTENT WILL COME HERE); 
```

**下面的代码会将 HTML 粘贴到活动幻灯片中**

```
oPowerPoint.ActiveWindow.View.PasteSpecial(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:22:25.477

我希望您设法找到有关您的问题的一些信息。

有点晚了，但对于未来可能会来这里的人。

这是针对 HTML -> PPT 部分的。

```
PowerPoint.Presentation presentation;
presentation = ppApp.Presentations.Open(configuration.PPTTExportedFile, MsoTriState.msoFalse, MsoTriState.msoTrue, MsoTriState.msoTrue);       
foreach (PowerPoint.Slide slide in presentation.Slides)
{
    foreach (PowerPoint.Shape shape in slide.Shapes)
    {
        File.WriteAllText(temporaryFilePath, html);
        WebsiteToImage websiteToImage = new WebsiteToImage(temporaryFilePath, @"New picture path");
        websiteToImage.Generate();
        slide.Shapes.AddPicture(@"picture path", MsoTriState.msoTrue, MsoTriState.msoTrue, oldshapeleft, oldshapetop, oldshapewidth, oldshapeheight);
        fileToDelete.Add(temporaryFilePath);
        fileToDelete.Add(@""dont forget to remove tmp files");
    }
} 
```

[从 ASP.NET 将网页转换为图像](https://stackoverflow.com/questions/2715385/convert-webpage-to-image-from-asp-net)

如果您想在 Word/Excel/PowerPoint 中进行任何对象操作，我建议使用

```
Console.Write("AlternativeText: ");
Console.WriteLine(shape.AlternativeText); 
```

因为如果您在原始文件中保存对象中的 AlternativeText，您可以快速访问它，甚至可以将 PATH 更改为一个简单的变量。

例如，如果您想导出 HTML 表格，请从中制作一个图像并更改 AlternativeText 以便以后更轻松地访问它，同时给它一个适当的名称，您可以使用第三个软件工具访问它，因为 PowerPoint 没有支持 HTML 标签

接下来要做的：

```
File.Copy(WordTemplateFile, WordExportedFile, true); 
```

为什么要改原版？只需制作一个副本，并将其保留为模板，您可以在从中创建新的更改版本时随时更改它。（适用于报告）

如果您打算使用 AlternativeText，它非常有用。

对于您的替换，您可能希望使用 NetOffice/Microsoft Office 库。

```
foreach (NetOffice.WordApi.InlineShape s in docWord.InlineShapes)
{
    if (s.Type==NetOffice.WordApi.Enums.WdInlineShapeType.wdInlineShapePicture &&  s.AlternativeText.Contains("any pattern you are looking for"))
    {
        <Do your manipulation with image change it>
        s.Range.InsertFile(<insert your new picture for example>);
    }
 } 
```

您遍历所有文件并检查是否符合您的模式。

祝你好运。

# javascript - 使用 Jquery 设置文件输入样式

> ID：13196962
> 
> 赞同：1
> 
> 时间：2012-11-02T14:16:10.430
> 
> 标签：javascript, jquery, css, file-upload, styling

我有一个文件输入，我将其设置为自定义按钮，但是当用户上传文件时，我无法保留上传图像。它被文件名的文本替换，但我也想保留图像。我知道这很简单，但似乎无法弄清楚。这是代码：

HTML：

```
 <div id="file"><img src="~/Images/choosefile.png" /></div>
 <input type="file" name="file"/> 
```

Javascript：

```
var wrapper = $('<div/>').css({ height: 0, width: 0, 'overflow': 'hidden' });
var fileInput = $(':file').wrap(wrapper);

fileInput.change(function () {
    $this = $(this);
    $('#file').text($this.val().substring(12, 75));
})

$('#file').click(function () {
    fileInput.click();
}).show(); 
```

CSS：

```
`#file 
{
    display:none;
    cursor: pointer;
}​` 
```

******更新 - 如果有人想使用它，结果如下* *** *****

 **HTML：

```
 <div id="file" style="margin-right:10px;"><img src="~/Images/choosefile.png" style="margin-bottom:-5px; padding-right:10px;"/><span style="border-left-width:10px;"></span></div>
 <input type="file" name="file"/> 
```

Javascript：

```
var wrapper = $('<div/>').css({ height: 0, width: 0, 'overflow': 'hidden' });
var fileInput = $(':file').wrap(wrapper);

fileInput.change(function () {
    $this = $(this);
    $('#file>span').text($this.val().substring(12, 75));
})

$('#file').click(function () {
    fileInput.click();
}).show(); 
```

CSS：

```
`#file 
{
    display:none;
    cursor: pointer;
}​` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:29:37.920

当您使用 .text() 时，它会将您的图像替换为文件输入的值。我建议在您的 DIV 中添加一个跨度并在其上设置当前输入的值。它会更容易分离和跟踪。

HTML

```
<div id="file"><img src="~/Images/choosefile.png" /><span></span></div>
<input type="file" name="file"/> 
```

jQuery

```
var fileInput = $(':file').wrap(wrapper);
fileInput.change(function () {
    $this = $(this);
    $('#file>span').text($this.val().substring(12, 75));
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:42:21.203

```
fileInput.change(function () {
    $this = $(this);
    $('#file').text($this.val().substring(12, 75));
}) 
```

在此代码中，您必须更改一些代码：

```
fileInput.change(function () {
    $this = $(this);
       $('#file').html('<img src="'+$this.val()+'" />');
}) 
```

注意：确保图像已经在您从中上传的服务器上。**

# php - 请求帮助以了解 Javascript 变量范围

> ID：13196963
> 
> 赞同：0
> 
> 时间：2012-11-02T14:16:16.003
> 
> 标签：php, javascript, html, variables

恐怕很多人会觉得我的问题很琐碎，但我需要问它。

（应很多人的要求，我已经编辑了代码，以便您可以重现它。）

我在脚本标签中定义了一个 JavaScript 全局变量，如下所示：

```
<!DOCTYPE html>
<html lang="en">
<head> 
<!--JQUERY-->
<script type="text/javascript" src="js_test/jquery-1.8.2.min.js" ></script>

<script type="text/javascript">
    var store_categories = []; 
    function init_filtering() {
        store_categories.push('data');
        alert ("alert1: "+ store_categories);
    }
</script>

<script type="text/javascript">$( init_filtering );</script>

</head>  
<body>

<script type="text/javascript">
    alert ("alert2: "+ store_categories);
</script>

</body>
</html> 
```

加载页面时，alert2 首先出现空白值，然后出现 alert1 显示“数据”作为值。

谁能告诉我发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:25:09.390

`alert ("alert2: "+ store_categories);`立即运行。

`$( init_filtering );`是在 DOM 准备好时（即解析后）运行的一种无用的快捷方式（参见[self-documenting code ）。](http://en.wikipedia.org/wiki/Self-documenting)`init_filtering``</html>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:25:30.943

`$(function() {...})`执行等效于`$.ready()` 而您的内联脚本将在文档中解析后立即执行。

这意味着您指定的函数将延迟到页面加载。

空数组 toString 是一个空字符串，这就是为什么您在 first 中什么也看不到的原因`alert`。

# java - 如何在java中实现字符串的近似匹配？

> ID：13196964
> 
> 赞同：6
> 
> 时间：2012-11-02T14:16:15.707
> 
> 标签：java, string, comparison, string-matching, lcs

各位程序员好，

我想就近乎匹配的字符串寻求一些帮助。

目前，我有一个存储描述字符串的程序，用户可以通过完全或部分输入来搜索描述。

我想实现近似匹配搜索。例如，实际描述是“hello world”，但用户错误地输入了搜索“hello eorld”。程序应该能够向用户返回“hello world”。

我尝试查看模式和匹配来实现它，但它需要一个正则表达式来匹配字符串，因此我的描述没有常规模式。我也尝试过 string.contains，但它似乎也不起作用。下面是我尝试实现的部分代码。

```
 ArrayList <String> list = new ArrayList<String>();
    list.add("hello world");
    list.add("go jogging at london");
    list.add("go fly kite");
    Scanner scan = new Scanner(System.in);

    for(int i = 0; i < list.size(); i++){
      if(list.get(i).contains(scan.next())) {
         System.out.println(list.get(i));
      }
    } 
```

其他程序员可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:26:16.830

[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)能够限定两个字符串之间的差异

这是一个实现[形式here](http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Levenshtein_distance#Java)：

```
public class LevenshteinDistance {
   private static int minimum(int a, int b, int c) {
      return Math.min(Math.min(a, b), c);
   }

   public static int computeLevenshteinDistance(
      CharSequence str1,
      CharSequence str2 )
   {
      int[][] distance = new int[str1.length() + 1][str2.length() + 1];

      for (int i = 0; i <= str1.length(); i++)
         distance[i][0] = i;
      for (int j = 1; j <= str2.length(); j++)
         distance[0][j] = j;

      for (int i = 1; i <= str1.length(); i++)
         for (int j = 1; j <= str2.length(); j++)
            distance[i][j] =
               minimum(
                  distance[i - 1][j] + 1,
                  distance[i][j - 1] + 1,
                  distance[i - 1][j - 1] +
                     ((str1.charAt(i - 1) == str2.charAt(j - 1)) ? 0 : 1));

      return distance[str1.length()][str2.length()];
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T14:20:04.197

您可以使用 LCS（最长公共子序列）查看这些： [http ://en.wikipedia.org/wiki/Longest_common_subsequence_problem](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)

```
public class LCS {

    public static void main(String[] args) {
        String x = StdIn.readString();
        String y = StdIn.readString();
        int M = x.length();
        int N = y.length();

        // opt[i][j] = length of LCS of x[i..M] and y[j..N]
        int[][] opt = new int[M+1][N+1];

        // compute length of LCS and all subproblems via dynamic programming
        for (int i = M-1; i >= 0; i--) {
            for (int j = N-1; j >= 0; j--) {
                if (x.charAt(i) == y.charAt(j))
                    opt[i][j] = opt[i+1][j+1] + 1;
                else 
                    opt[i][j] = Math.max(opt[i+1][j], opt[i][j+1]);
            }
        }

        // recover LCS itself and print it to standard output
        int i = 0, j = 0;
        while(i < M && j < N) {
            if (x.charAt(i) == y.charAt(j)) {
                System.out.print(x.charAt(i));
                i++;
                j++;
            }
            else if (opt[i+1][j] >= opt[i][j+1]) i++;
            else                                 j++;
        }
        System.out.println();

    }

} 
```

其他解决方案是[Aho–Corasick 字符串匹配算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)， 请参见： [Fast algorithm for search for substrings in a string](https://stackoverflow.com/questions/1765579/fast-algorithm-for-searching-for-substrings-in-a-string)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T14:25:50.997

列文[斯坦距离](http://en.wikipedia.org/wiki/Levenstein_Distance)可能对这个问题有用。Apache Commons Lang [StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#getLevenshteinDistance%28java.lang.String,%20java.lang.String%29)有一个实现。
此外，`difference`如果您想了解字符串的不同之处，来自 StringUtils 的方法可能会很有趣。

# mysql - 如何使用“where 子句”更新单个 mysql 表中的许多字段？

> ID：13196968
> 
> 赞同：0
> 
> 时间：2012-11-02T14:16:32.713
> 
> 标签：mysql

我有具有相同字段的表，想要使用 where 子句更新该字段，

```
update tmp_aus_inv_data
SET cust_region= "ROTOMOULD"
WHERE division = "ROTOMOULD" ;

update tmp_aus_inv_data
SET cust_region= "Internal"
WHERE division = "EXTRUSION" and ucase(cust_region) like ucase('Internal%') ; 
```

我试过这个，但不工作，

```
update tmp_aus_inv_data
(set cust_region= "ROTOMOULD"),
(SET cust_region= "Internal")
WHERE division = "ROTOMOULD"  and WHERE division = "EXTRUSION" and ucase(cust_region)     like ucase('Internal%') ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:21:42.240

你可以在你的 中使用一个`CASE`语句`UPDATE`，所以我认为你想要这样的东西：

```
update tmp_aus_inv_data
SET cust_region 
    = case 
        when division = "ROTOMOULD" then "ROTOMOULD"
        when division = "EXTRUSION" 
            and ucase(cust_region) like ucase('Internal%')
          then "Internal"
        else cust_region
      end
 where division in ("ROTOMOULD", "EXTRUSION") 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8145c/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:27:38.293

请您尝试以下查询一次。

```
UPDATE tmp_aus_inv_data
   SET `cust_region`= if(`division`= 'ROTOMOULD', 'ROTOMOULD', 'Internal') 
WHERE division in ('ROTOMOULD','EXTRUSION'); 
```

# string - 在whileloop中创建变量并在循环外使用

> ID：13196970
> 
> 赞同：0
> 
> 时间：2012-11-02T14:16:38.820
> 
> 标签：string, variables, while-loop, comma

我想使用在其外部的 while 循环中创建的变量。这是因为我想将不同的变量放在彼此之后（逗号分隔）并放入字符串变量中。之后，我将删除最后一个逗号。

这是我的代码

```
$result = mysql_query("SELECT * FROM ".$_POST['moduleName']);   

        while($row = mysql_fetch_array($result))
          {

          //read fieldnames from database
          $fieldName = $row['modFieldName'];

          //creating a variable with the fieldname    
          $fieldName = 'field'.$fieldName;

          //fill Variable with posted input
          $fieldName = $_POST[$row['modFieldName']];

//Put fieldname in a string (outputs: a,b,c,d,e,)
          $postString = $fieldName.","; 

        }
//Remove last comma      
$postString = substr($postString,0,-1);
         echo $postString; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:22:04.303

所以每次连接结果，而不是覆盖字符串：

```
 $result = mysql_query("SELECT * FROM ".$_POST['moduleName']);

    $postString = ''; 

    while($row = mysql_fetch_array($result))
    {
      //read fieldnames from database
      $fieldName = $row['modFieldName'];

      //creating a variable with the fieldname    
      $fieldName = 'field'.$fieldName;

      //fill Variable with posted input
      $fieldName = $_POST[$row['modFieldName']];

      //Put fieldname in a string (outputs: a,b,c,d,e,)
      $postString = $postString.$fieldName.","; 
    }

    //Remove last comma      
    $postString = substr($postString, 0, -1);
    echo $postString; 
```

或者你可以使用`.=`. 另外，不要使用`mysql_`扩展——它们已经开始了弃用过程，很容易导致 SQL 注入漏洞。PDO 是一个很好的选择，如下所示。最后，**绝对不要将用户提供的数据直接放入查询中**！哎呀！

```
$query = $database->query('SELECT * FROM ' . $moduleName); # Please filter $moduleName against a list of known safe tables!

$postStrings = array_map(function($row) {
    return $_POST['field' . $row->modFieldName];
}, $query->fetchAll());

$postString = implode(',', $postStrings); 
```

# php - MySQL 嵌套语句

> ID：13196974
> 
> 赞同：0
> 
> 时间：2012-11-02T14:16:50.623
> 
> 标签：php, mysql, nested

```
if ($resultdetails == FALSE) {
    $querynewid = "select * from customer_det order by ID desc limit 1";
    $resultnewid = mysql_query($querynewid);
    while ($row=mysql_fetch_row($resultnewid)) {
        $uid = $row['id'];
        echo $uid;
    }
} 
```

这是一个有效的嵌套语句吗？由于某种原因它不会回显 $uid 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:21:18.573

您应该使用`mysql_fetch_assoc`而不是`mysql_fetch_row`. 最后一个返回数字索引数组，因此`id`不是该结果集中的键。`mysql_fetch_assoc`返回一个关联数组，所以字段名也是键名。从你的代码来看，这就是你想要的。

看看[这里](http://nl3.php.net/mysql_fetch_row)和[这里](http://nl3.php.net/manual/en/function.mysql-fetch-assoc.php)的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:27:45.187

我通常如何在 php 中处理这个问题如下：

```
if ($resultdetails == FALSE) {
    $querynewid = mysqli_query($dbc,"select * from customer_det order by ID desc limit 1";) or die (mysql_error());

    while ($row = mysqli_fetch_array($querynewid)) {
        $uid = $row['id'];
        echo $uid;
    }
} 
```

需要知道的几件事是 $dbc 是我的数据库连接，并且 mysql_error 将让您知道它本身的查询是否已损坏

# java - 使用 Spring 进行依赖注入时出现 NullPointerException

> ID：13196976
> 
> 赞同：0
> 
> 时间：2012-11-02T14:16:53.687
> 
> 标签：java, spring, nullpointerexception, autowired

我有3种。

ServiceAffaire.java：

```
package ws.magicnew.sync;

...

@Transactional
@Service("serviceAffaire")
public class ServiceAffaire implements IServiceAffaire {

    private static Log log = LogFactory.getLog(ServiceAffaire.class);

    //private static SimpleDateFormat sdf = new SimpleDateFormat(MagicFacade.WS_DATE_FORMAT);

    @Autowired
    @Qualifier("manifestationService")
    protected IManifestationService manifestationService;

    @Autowired
    @Qualifier("typeDeManifestationService")
    protected ITypeDeManifestationService typeService;

    @Autowired
    @Qualifier("espaceManifestationService")
    protected IEspaceManifestationService espaceManifService;

    @Autowired
    @Qualifier("siteService")
    protected ISiteService siteService;

    @Autowired
    @Qualifier("natureService")
    protected INatureService natureService;

    @Autowired
    @Qualifier("facadeGetAffaire")
    protected MagicFacade facadeGetAffaire;

    @Autowired
    @Qualifier("compteurManifestation")
    private Compteur compteurManifestation;

    @Autowired
    @Qualifier("compteurContenus")
    protected Compteur compteurContenus;

        public synchronized void synchronize(boolean setFlag) throws Exception {
            ...
        }
} 
```

IServiceAffaire.java：

```
package ws.magicnew.sync;

public interface IServiceAffaire {

    public void synchronize(boolean setFlag) throws Exception;

} 
```

和 CacheAction.java：

```
package ws.magicnew.sync;

...

@Configurable
@Transactional
public class CacheAction extends DispatchAction {

    private static Log log = LogFactory.getLog(CacheAction.class);

    @Autowired
    @Qualifier("serviceAffaire")
    private IServiceAffaire serviceAffaire;

    public ActionForward getAffaire(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception {
        boolean setFlag = Boolean.parseBoolean(CmsProperties.SYNCRO_AFFAIRES_FLAG);
        log.info("getAffaire debut " +setFlag);
        serviceAffaire.synchronize(setFlag); // NullPointerException here: serviceAffaire is null
        log.info("getAffaire fin " +setFlag);
        request.setAttribute("message", "Le service get affaire a été lancé.");

        return mapping.findForward("cache");
    }
} 
```

接线是在 applicationContext-scanpackages.xml 文件中进行的：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:ehcache="http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring"
    xmlns:jaxws="http://cxf.apache.org/jaxws" 
    xmlns:cxf="http://cxf.apache.org/core" 
    xsi:schemaLocation="
            http://www.springframework.org/schema/aop 
                http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
            http://www.springframework.org/schema/beans 
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context 
                http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/jee 
                http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
            http://www.springframework.org/schema/tx 
                http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
            http://www.springframework.org/schema/util 
                http://www.springframework.org/schema/util/spring-util-3.0.xsd
            http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring 
                http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring/ehcache-spring-1.1.xsd 
            http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd
            http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd">
    <context:annotation-config />
    <context:component-scan base-package="ws.magicnew.sync" />
    <context:component-scan base-package="ws.magicnew.facade" />
</beans> 
```

这对我来说似乎没问题，但是`NullPointerException`当我调用 CacheAction.getAffaire() 方法时我仍然得到一个。我不知道为什么，这让我发疯。有什么线索吗？

我之前在注入 ServiceAffaire 的属性时遇到了一些问题（我解决了），所以 Spring 实际上是自动装配它们。但是由于某种原因，它无法将 ServiceAffaire 注入到 CacheAction 中。

如代码中的注释所示，调用 ServiceAffaire.synchronize 时 serviceAffaire 属性为空，正如我在调试模式下执行时看到的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:23:46.850

你的问题可能是两件事：

首先，您需要在 applicationContext-scanpackages.xml 中添加“context:spring-configured”以启用 AspectJ。

[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-atconfigurable](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-atconfigurable)

其次，您将 CacheAction 设置为 @Configurable，我想您这样做是因为您或某些框架使用经典的“new CacheAction()”创建了 CacheAction 的实例，而不是让 Spring 创建它。

如果是这种情况，如果您在 Spring 初始化 IServiceAffaire bean 之前通过代码创建 CacheAction 的实例，则可能会发生 NPE。我的意思是，当您使用“new”创建 CacheAction 实例时，您必须确保 Spring 已经完成初始化 CacheAction 所需的所有 bean。否则 Spring 将无法注入依赖项。

如果某些框架创建 CacheAction 的新实例并且您无法控制这些实例的创建时间，这可能会很棘手。是否添加诸如“depends-on”之类的注释并不重要，因为 Spring 将无法保持该实例创建，直到它完成创建需要注入的 bean。

解决这个问题的一种方法是让 Spring 初始化一些 bean，该 bean 将触发任何创建 CacheAction 新实例的初始化，并在那里添加一个“依赖于”IServiceAffaire bean。

无论如何，正确的解决方案取决于您的应用程序是如何初始化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:25:38.840

您可以尝试将 IServiceAffaire 的依赖注入注释更改为 @Resource 并检查是否有效

```
@Autowired
@Qualifier("serviceAffaire")
private IServiceAffaire serviceAffaire; 
```

改成

```
@Resource(name ="serviceAffaire")
private IServiceAffaire serviceAffaire; 
```

# nhibernate - 如何提高 NHibernate 中的选择性能

> ID：13196977
> 
> 赞同：0
> 
> 时间：2012-11-02T14:16:53.360
> 
> 标签：nhibernate, linq-to-nhibernate

我需要从数据库中具体化大约 20000 条记录并将其写为 CSV。不幸的是，这些记录在 NHibernate 中的实现非常缓慢。是否有一个选项可以让 Nhibernate Linq Provider 生成 SQL 或编写自定义实现机制，而不是创建新对象，而是将行写入流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:18:54.657

您可能应该使用 LINQ 的 select 子句将加载的数据直接投影到某个 DTO 类型（或匿名类）。这将绕过 NHibernate 通常为跟踪状态所做的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:20:17.020

如果您真的只是从数据库中读取并写入 CSV 而没有更新任何记录，则可以使用无状态会话来加快速度。

这篇博文

[http://ayende.com/blog/4137/nhibernate-perf-tricks](http://ayende.com/blog/4137/nhibernate-perf-tricks)

有一些关于批量操作性能加速的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:08:53.410

您应该首先考虑使用像 NHProf (http://www.hibernatingrhinos.com/products/NHProf) 这样的工具来检查 NHibernate Linq Provider 生成的 SQL 查询。

使用 NHibernate 不允许完全抽象它所依赖的 SQL DB。如果您的查询涉及多个表或 where 条件，您需要考虑常见的 SQL 性能问题（即索引、要加入的列、子查询）。

20000 条记录对我来说似乎并不多，所以你应该首先朝那个方向看。

# drupal - 以 drush php-script 开头的脚本在 ctrl+c 后不会退出

> ID：13196981
> 
> 赞同：4
> 
> 时间：2012-11-02T14:17:04.483
> 
> 标签：drupal, drush

我正在用 drush 运行一个大的 php 脚本。该脚本需要很长时间才能运行 - 可能需要几个小时，我想随时停止它。这是我正在运行的示例 php 脚本：

```
$iter = 1;
while( $iter <= 50 ){
    echo "iteration no ". $iter ."\n";
    $iter++;
    sleep( 1 );
} 
```

这是我运行它的命令：

```
$ drush php-script userstest.php 
```

当我按 CTRL+C 时，drush 命令停止，但 php 脚本继续运行。这是它的外观：

```
$ drush php-script userstest.php
iteration no 1
iteration no 2
iteration no 3

$ iteration no 4
iteration no 5
iteration no 6
iteration no 7
^C

$ iteration no 8
iteration no 9
iteration no 10
iteration no 11
^C

$ iteration no 12
iteration no 13
iteration no 14
iteration no 15 
```

它一直持续到它实际完成的 php 脚本。我怎样才能停止脚本呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:47:01.220

Drush是否没有功能参数，试试`drush help`？如果不...

验证运行的进程是否是 PHP 进程，然后：

```
killall -u yourusername php 
```

或由 drush 运行的任何进程。

我认为这是在这种情况下您可以实现的唯一方法。

# tomcat - catalina.properties 在 Tomcat 重启时被覆盖

> ID：13196982
> 
> 赞同：5
> 
> 时间：2012-11-02T14:17:05.883
> 
> 标签：tomcat, tomcat7, catalina

我在 Catalina.properties 中的 common.loader 中添加了一个属性（例如，添加了 C:/apps/conf），当我重新启动 Tomcat 7 时它会被重置。尽管每次重新启动时都不是这种情况。

想知道为什么有时当服务器被反弹时它会被覆盖，有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-30T06:06:32.443

如果您使用的是 Eclipse，请确保在重新启动之前更新工作区中“Servers”项目中的 catalina.properties。这是此文件的主版本，它将覆盖您在 tomcat 目录中更改的任何内容。

# haskell - 是否可以在 IO 以外的单子中将 HUnit 与测试框架一起使用？

> ID：13196987
> 
> 赞同：8
> 
> 时间：2012-11-02T14:17:18.677
> 
> 标签：haskell, hunit

我目前有以下测试代码：

```
testUpdate :: Test
testUpdate = testCase "update does change artist" $ do
  (created, Just revised, parents) <- mbTest $ do
    Just editor <- fmap entityRef <$> findEditorByName "acid2"

    created <- create editor startWith
    let artistId = coreMbid created

    newRev <- update editor (coreRevision created) expected

    editId <- openEdit
    includeRevision editId newRev
    apply editId

    found <- findLatest artistId
    parents <- revisionParents newRev

    return (created, found, parents)

  coreData revised @?= expected

  assertBool "The old revision is a direct parent of the new revision" $
    parents == [coreRevision created]

  where
    startWith = ...
    expected = ... 
```

这有点工作，但它很乱。我宁愿能够编写一些东西而不必返回各种被测试的东西，而是在它们有意义的地方拥有断言。

我看到有`Assertable`课程，但似乎我最终可能不得不重新发明一堆东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T08:11:11.767

为什么不让你的 monad 返回一个类型`IO a`为*纯*值的 IO 计算呢？由于在您的评论中，monad 是 MonadIO 实例的情况是微不足道的，假设 monad 允许纯计算：

```
newtype M a = M {runM :: ....}
instance Monad M where
  ...

makeTest :: M Assertion
makeTest = do
    created <- ..
    found   <- ..
    parents <- ..
    let test1 = coreData revised @?= expected
    ...
    let test2 = assertBool "The old revision..." $
                   parents == [coreRevision create]

    return $ test1 >> test2

testUpdate :: Test
testUpdate = testCase "update does change artist" $ runM makeTest 
```

一个好处是您可以通过一个单子计算返回一组测试，就像在列表单子中一样。

# c# - Windows 8 C#/XAML - 在文本块文本周围创建边框

> ID：13196989
> 
> 赞同：10
> 
> 时间：2012-11-02T14:17:18.770
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在为 Windows 8 应用商店创建一个应用，而且我对 XAML UI 的东西还很陌生。我想要做的是在文本块中的实际文本周围创建一个黑色边框。任何帮助将不胜感激。

这是文本块：

```
<TextBlock Grid.Row="0" x:Name="TopLabel" VerticalAlignment="Top" Text="Top Label" HorizontalAlignment="Center" FontFamily="Impact" FontSize="48"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T14:32:18.767

使用边界控制：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.border.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.border.aspx)

像这样的东西：

```
<Border BorderBrush="Gray" BorderThickness="2" Grid.Row="0">
  <TextBlock x:Name="TopLabel" VerticalAlignment="Top" Text="Top Label" HorizontalAlignment="Center" FontFamily="Impact" FontSize="48"/>
</Border> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T16:38:07.293

我相信您正在寻找的术语是“中风”，其他 SO 用户已经注意到这种影响似乎在随附的功能集中不存在。

以下问题/解决方案应该满足您的需求 - 它基于 WPF，但 Windows 8 和 WPF 都使用 XAML：[Apply Stroke to Text](https://stackoverflow.com/q/93650/218159)

或者，有一篇关于它的信息丰富的 MSDN 文章（同样针对 WPF，但原则应该相同）：[如何：创建大纲文本 (MSDN)](http://msdn.microsoft.com/en-us/library/ms745816.aspx)

我希望这有帮助！

# android - Android - 在 Android 中的 URL 上尝试 HttpGet 时出现运行时错误

> ID：13196990
> 
> 赞同：0
> 
> 时间：2012-11-02T14:17:21.177
> 
> 标签：android, httpclient, http-get

我正在尝试收集一些 json 数据，将它们放在一个字符串中，并通过 toast 在我的应用程序中显示它们以进行测试。我很确定服务器允许我并响应我的请求，因为之前在 Fiddler 上使用相同的 URL（URI）测试了 GET 方法。

这是活动/课程代码：

```
BufferedReader in = null;
    try {
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        try {
            request.setURI(new URI("http://scards.cloudapp.net/api/AddressBooks/3"));
        } catch (URISyntaxException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        HttpResponse response = null;
        try {
            response = client.execute(request);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            in = new BufferedReader
            (new InputStreamReader(response.getEntity().getContent()));
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        try {
            while ((line = in.readLine()) != null) {
                sb.append(line + NL);
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            in.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String page = sb.toString();
        Toast.makeText(this, page, Toast.LENGTH_LONG).show();

        } finally {
        if (in != null) {
            try {
                in.close();
                } catch (IOException e) {
                e.printStackTrace();
            }
        }
    } 
```

在 LogCat 中，它显示我有 android.os.NetworkOnMainThreadException。接受建议和更正。

项目属性：SDK：API16 - Android 4.1.2，minBuilSDK：API：7 Android 2.1(Eclair) - Eclipse SDK 4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:45:16.997

下面是一个例子`AsyncTask`。这里还有[一个很棒的教程](http://www.vogella.com/articles/AndroidPerformance/article.html)

```
class MyAsyncTask extends AsyncTask<String, String, Void> {

    private ProgressDialog progressDialog = new ProgressDialog(MainActivity.this);
    InputStream inputStream = null;
    String result = ""; 

    protected void onPreExecute() {
        progressDialog.setMessage("Your progress dialog message...");
        progressDialog.show();
        progressDialog.setOnCancelListener(new OnCancelListener() {
            public void onCancel(DialogInterface arg0) {
                MyAsyncTask.this.cancel(true);
            }
        });
    }

    @Override
    protected Void doInBackground(String... params) {

        String url_select = "http://yoururlhere.com";

                ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();

        try {
            // Set up HTTP post
            // HttpClient is more then less deprecated. Need to change to URLConnection
            HttpClient httpClient = new DefaultHttpClient();

            HttpPost httpPost = new HttpPost(url_select);
            httpPost.setEntity(new UrlEncodedFormEntity(param));
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            // Read content & Log
            inputStream = httpEntity.getContent();
        } catch (UnsupportedEncodingException e1) {
            Log.e("UnsupportedEncodingException", e1.toString());
            e1.printStackTrace();
        } catch (ClientProtocolException e2) {
            Log.e("ClientProtocolException", e2.toString());
            e2.printStackTrace();
        } catch (IllegalStateException e3) {
            Log.e("IllegalStateException", e3.toString());
            e3.printStackTrace();
        } catch (IOException e4) {
            Log.e("IOException", e4.toString());
            e4.printStackTrace();
        }
        // Convert response to string using String Builder
        try {
            BufferedReader bReader = new BufferedReader(new InputStreamReader(inputStream, "iso-8859-1"), 8);
            StringBuilder sBuilder = new StringBuilder();

            String line = null;
            while ((line = bReader.readLine()) != null) {
                sBuilder.append(line + "\n");
            }

            inputStream.close();
            result = sBuilder.toString();

        } catch (Exception e) {
            Log.e("StringBuilding & BufferedReader", "Error converting result " + e.toString());
        }
    } // protected Void doInBackground(String... params)

    protected void onPostExecute(Void v) {

        //parse JSON data
        try{
            JSONArray jArray = new JSONArray(result);

            for(int i=0; i < jArray.length(); i++) {

                JSONObject jObject = jArray.getJSONObject(i);

                String name = jObject.getString("name");
                String tab1_text = jObject.getString("tab1_text");
                int active = jObject.getInt("active");

            } // End for Loop

            this.progressDialog.dismiss();

        } catch (JSONException e) {

            Log.e("JSONException", "Error: " + e.toString());

        } // catch (JSONException e)

    } // protected void onPostExecute(Void v)

} //class MyAsyncTask extends AsyncTask<String, String, Void> 
```

* * *

我`AsyncTask`用这条线打电话给我：

```
new MyAsyncTask().execute(); 
```

* * *

这是一个 Youtube 教程（来自新波士顿）`AsyncTask`，我觉得很有帮助。

[Android 应用开发教程 - 101 - Async Task 类加载东西](http://www.youtube.com/watch?v=JVaGZwuYmck&feature=edu&list=PL2F07DBCDCC01493A)
[Android 应用开发教程 - 102 - 4 AsyncTask 方法](http://www.youtube.com/watch?v=5pr7jwYF0JU&feature=edu&list=PL2F07DBCDCC01493A)
[Android 应用开发教程 - 103 - ProgressDialog 和修正](http://www.youtube.com/watch?v=MNCAmgFHcOI&feature=edu&list=PL2F07DBCDCC01493A)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:25:40.403

你不应该从主线程访问网络。使用 AsyncTask 类的 doInBackground 方法访问网络。

# bash - 将标题添加到多个文本文件中

> ID：13196993
> 
> 赞同：2
> 
> 时间：2012-11-02T14:17:26.317
> 
> 标签：bash, command-line, io

> **可能重复：**
> [Sed/Awk 在文件中搜索和替换/插入文本](https://stackoverflow.com/questions/11563620/sed-awk-to-search-and-replace-insert-text-in-files)

我想知道如何将一个“标题”行添加到一个目录中包含的多个文本文件中。Bash 命令行会很棒！

谢谢。

***编辑***

我在这里找到了我的需求：http: [//perldoc.perl.org/index-faq.html](http://perldoc.perl.org/index-faq.html)享受！这是我的答案：

```
perl -pi -e 'print "**MyHeaderText**\n" if $. == 1' * 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T14:34:36.150

### 选项 1：几乎适用于任何版本的 Unix

```
tmp=$(mktemp)   # Create a temporary file
trap "rm -f $tmp; exit 1" 0 1 2 3 13 15

header="This is the header line to be inserted"

for file in "$@"
do
    {
    echo "$header"
    cat $file
    } > $tmp
    mv $tmp $file
done

rm -f $tmp
trap 0 
```

这会安全地创建一个临时文件，并确保在合理的信号集合（HUP、INT、QUIT、PIPE 和 TERM）下将其删除。然后主循环将标题字符串和文件复制到临时文件，并将临时文件移到原始文件上，删除任何剩余文件（以防出现问题）并取消清理，以便 shell 可以干净地退出。

如果您的原始文件有多个（硬）链接，或者它是一个符号链接，您将失去这些特殊属性。要解决这个问题，您必须使用`cp $tmp $file`，然后您也必须删除该文件`$tmp`。

如果你没有`mktemp`命令，你可以使用：

```
tmp=${TMPDIR:-/tmp}/ins.$$ 
```

生成名称。它比名称 from 更容易预测`mktemp`且安全性较低，尤其是在您以 root 身份运行时。`$TMPDIR`使用当前目录，就好像您有多个文件系统一样，也可能是一种智慧。

### 选项 2：GNU sed

如果您有 GNU`sed`并且没有符号链接或硬链接要处理，那么您可以使用它的`-i`选项来进行就地更改。

```
header="This is the line to be inserted"

for file in "$@"
do
    sed -i -e "1i\
$header" $file
done 
```

`$header`这会在每个文件的第一行之前插入 的值。您可以将编辑脚本写入文件并使用`sed -i -f sed.script $file`以避免循环中尴尬的缩进。

### 选项 3：其他工具

还有许多其他可能的技术。例如，您可以使用`ed`或`ex`来编辑文件。您可以使用 Perl 或 Python 或`awk`进行处理。

# iphone - 图像旋转不流畅

> ID：13196999
> 
> 赞同：0
> 
> 时间：2012-11-02T14:17:36.450
> 
> 标签：iphone, objective-c, ios, cocoa-touch

> **可能重复：**
> [旋转 UIImageView 的任何快速而肮脏的抗锯齿技术？](https://stackoverflow.com/questions/1136110/any-quick-and-dirty-anti-aliasing-techniques-for-a-rotated-uiimageview)

我的应用程序中有一个带有边框的图像视图（myImage）：

```
[myImage.layer setBorderColor: [[UIColor whiteColor] CGColor]];
[myImage.layer setBorderWidth: 1]; 
```

然后我使用以下代码将其旋转，在本例中旋转 20 度。

```
NSInteger r = 20;
CABasicAnimation *imageRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
imageRotation.toValue = [NSNumber numberWithFloat:((r*M_PI)/ -180)];
imageRotation.duration = 0.01;
imageRotation.repeatCount = 1;
imageRotation.removedOnCompletion = NO;
imageRotation.autoreverses=NO;
imageRotation.fillMode = kCAFillModeForwards;
[myImage.layer addAnimation:imageRotation forKey:@"imageRotation"]; 
```

上面的代码旋转了图像，但您看不到它的动画效果（因为 imageRotation.duration 非常低）。旋转完成后，结果是一个图像视图，它**没有**移动或旋转，但已经旋转了 20。

这段代码工作正常，但是边框和包含图像的线条都不平滑，这破坏了我的应用程序的显示。

有谁知道这可能是什么原因造成的，或者如何解决它。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:32:20.833

尝试

```
CGContextSetInterpolationQuality(context, kCGInterpolationHigh); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:33:57.470

您是否尝试过在 imageView 中使用 transform 属性？尝试这个 ：

```
myImage.transform = CGAffineTransformMakeRotation((r*M_PI)/ -180); 
```