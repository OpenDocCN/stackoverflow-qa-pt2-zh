# StackOverflow 问答 12590000-12590999

# javascript - 如何使用入门工具包中的自定义应用程序添加 Rally 卡片渲染器？

> ID：12590000
> 
> 赞同：1
> 
> 时间：2012-09-25T19:45:28.037
> 
> 标签：javascript, extjs, rally

我在 Developer Portal 中看到了使用 JS 在 HTML 文档中创建客户卡片渲染器的示例。（渲染器的定义开始于“var DiscussionTagCardRenderer = function(column, item, options)”）我正在尝试做同样的事情（例如，将排名添加到用户故事的纸板中），只使用一个 js 文件作为自定义应用程序的源代码，然后使用入门工具包构建 HTML，我无法弄清楚如何进行调用和配置设置以及放置它们的位置。

直接 js 文件将 cardboard 配置传递给应用程序的 add 方法以显示 cardboard，而开发门户的 HTML 示例将配置和数据源传递给 cardboard 的构造函数，然后调用 cardboard 自己的显示方法。HTML 示例中的配置看起来与 js 示例中的配置非常相似，所以我认为 js 版本中的卡片渲染器属性可以使用与 HTML 示例相同的排序变量，但我不知道是什么在纯 js 文件中定义变量时传递给渲染器的构造函数（项目、列等）。

我正在构建入门工具包中的基本入门示例，其中定义了用户故事纸板并将其添加到应用程序的启动例程中。我猜想如何调用构造函数有一些 ext 魔法，但我不知道如何将 HTML 示例转换为纯 js。

在将开发门户的自定义卡片渲染器示例复制到入门工具包中的纯 js 时，我将非常乐意提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:41:27.927

这是自定义卡的 2.0p4 预览文档中的示例（在这种情况下，根据缺陷优先级更改标题颜色）：

[http://developer.rallydev.com/appsdk/2.0p4/doc/#!/example/ColorCodedDefectBoard](http://developer.rallydev.com/appsdk/2.0p4/doc/#!/example/ColorCodedDefectBoard)

您还可以通过 CardBoard 的 cardConfig 将大多数字段添加到卡片，而不必扩展 Rally.ui.card.Card：

```
var cardboardConfig = {
    cardConfig: {
        fields: ['Name', 'Rank'] 
    }
} 
```

# php - PHP按字母顺序排列数组然后按数字排列？

> ID：12590002
> 
> 赞同：15
> 
> 时间：2012-09-25T19:45:31.133
> 
> 标签：php, arrays, sorting

我有一个数组..

```
$test = array("def", "yz", "abc", "jkl", "123", "789", "stu"); 
```

如果我运行`sort()`它，我会得到

```
Array
(
    [0] => 123
    [1] => 789
    [2] => abc
    [3] => def
    [4] => jkl
    [5] => stu
    [6] => yz
) 
```

但我想看看

```
Array
(
    [0] => abc
    [1] => def
    [2] => jkl
    [3] => stu
    [4] => yz
    [5] => 123
    [6] => 789
) 
```

我试过`array_reverse`了，但这似乎并没有改变任何东西。所以我现在有点迷失了如何获得最后的数字，但也有秩序

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T19:55:14.040

您需要的是排序，但具有自定义比较功能（usort）。以下代码将完成它：

```
function myComparison($a, $b){
    if(is_numeric($a) && !is_numeric($b))
        return 1;
    else if(!is_numeric($a) && is_numeric($b))
        return -1;
    else
        return ($a < $b) ? -1 : 1;
} 
$test = array("def", "yz", "abc", "jkl", "123", "789", "stu");
usort ( $test , 'myComparison' ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T19:53:05.003

您可以在排序之前将数字转换为整数：

```
$array = array("def", "yz", "abc", "jkl", "123", "789", "stu");

foreach ($array as $key => $value) {
    if (ctype_digit($value)) {
        $array[$key] = intval($value);
    }
}

sort($array);
print_r($array); 
```

输出：

```
Array
(
  [0] => abc
  [1] => def
  [2] => jkl
  [3] => stu
  [4] => yz
  [5] => 123
  [6] => 789
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T19:54:47.847

在下面的代码中，将两个数组中的数据分开：一个是数字的，另一个不是，对它进行排序和合并。

```
$arr1 = $arr2 = array();

$foreach ($arr as $val) {

if (is_numeric($val)) {array_push($arr2, $val); } 
else {array_push($arr1, $val);}

} 
```

所以你必须用数字和非数字分隔数组

```
sort($arr2);
sort($arr1);

$test = array_merge($arr2,$arr1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T19:59:09.453

您可以使用[usort](http://php.net/manual/en/function.usort.php)和自定义比较函数来做到这一点，但这听起来比它的价值更麻烦。我会使用`sort`, 然后相应地处理该输出。目前尚不清楚您想如何使用它，但一种简单的方法可能是：

```
sort($test);
foreach ($test as $index=>$value) {
    if (is_numeric($value)) {
       $test[] = $value;
       unset($test[$index]);
    } else {
        continue;
    }
} 
```

`usort`可能会更快，并且会进行一次比较，而到目前为止提到的其他解决方案可能会慢一些，因为它们需要在排序之前或之后迭代部分或全部数组

# c# - 如何刷新目录作为修复 FileSystemWatcher 的一种方式

> ID：12590004
> 
> 赞同：5
> 
> 时间：2012-09-25T19:45:41.073
> 
> 标签：c#, .net, windows, filesystemwatcher

如本文所示，由于 Windows 磁盘缓存[，**`FileSystemWatcher`**它是不可靠的。](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/4465cafb-f4ed-434f-89d8-c85ced6ffaa8/)[海报显示，无论优化和InternalBufferSize](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.internalbuffersize.aspx)如何，该类都错过了大约 0.15% - 0.35% 的所有事件。即使是驱动程序也会受到这种影响，因此它本质上不是 FileSystemWatcher 的错误。

海报提出了一种解决这个问题的方法——冲洗整个卷。但是我不想这样做 - 缓存是有原因的，它需要管理员权限。是否可以只刷新被监视的目录并达到使 FileSystemWatcher 100% 准确的相同结果？我对[**FlushFileBuffers**](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364439%28v=vs.85%29.aspx)了解不多，但海报的解决方案专门刷新整个卷，即使仅刷新目录显然是更好的解决方案。

是否有任何 .NET 方法来刷新目录或指定文件（未打开）？我的意思是**真正的 flush**，它等待磁盘本身的确认。例如，[FileStream.Flush(void)](http://msdn.microsoft.com/en-us/library/2bw4h516.aspx)仅刷新 .NET 缓冲区，而不是 OS 缓冲区（与.NET 4 和更好的具有*true参数的*[FileStream.Flush(bool)不同）。](http://msdn.microsoft.com/en-us/library/ee474552.aspx)我想刷新其他应用程序打开的文件。

 *如果没有，是否甚至可以使用 FlushFileBuffers 刷新目录（也许它只支持文件和卷，但这会很奇怪）？非管理员解决方案也非常理想，因为在管理员模式下我可以只使用更改日志。*

# java - 冻结安卓应用

> ID：12590014
> 
> 赞同：0
> 
> 时间：2012-09-25T19:46:40.713
> 
> 标签：java, android

我想为要冻结的应用程序中的屏幕创建一个计时器。让我们说两秒钟。我不希望屏幕对屏幕上的任何按钮点击做出反应。这是“皱眉”吗？或者是否有另一种方法来解决这个问题。

我的应用程序：

![在此处输入图像描述](../Images/135375cb6aa0f232686e6dd1ad23a587.png)

用户点击：

![在此处输入图像描述](../Images/c0952a1aa5be3e3aee51954188884e02.png)

然后我想将所有内容暂停两秒钟（这样我的其他按钮监听器不会关闭）然后我希望监听器返回，因为我会将按钮从绿色变为灰色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:03:33.730

在点击处理程序中，您可以更改颜色并删除所有按钮的 onclick 侦听器，并启动一个后台线程来执行您的计时。当后台线程休眠 2 分钟后，您可以为所有按钮添加 onclick 侦听器。这样您就不会创建一个完全没有响应的 UI，而是实现禁用按钮的效果。

```
public class myListener implements OnClickListener() {
  private boolean ignoreClicks = false;

  public void setIgnoreClicks( boolean b ) { 
    this.ignoreClicks = b;
  }

  @Override
  public void onClick( View v ) {
    if ( !ignoreClicks ) {
      // use v to get the button, then change the color
      ignoreClicks = true;
      // start a new AsyncTask and give it the listener and the view
      // in doInBackground sleep for 2 seconds
      // in onPostExecute change the color of the button back to normal
      //     (you have a reference to the button because you gave the view to the AsyncTask)
      //   and set ignoreClicks to false in the listener
    }
  }
} 
```

创建此侦听器的一个实例并将其用于每个按钮。

# php - 从 XMI 生成类图

> ID：12590015
> 
> 赞同：10
> 
> 时间：2012-09-25T19:46:41.083
> 
> 标签：php, uml, class-diagram, enterprise-architect, argouml

## 情况

我有一个 PHP 项目，其中有很多类，并且遵循[Zend 命名约定](http://framework.zend.com/manual/1.12/en/coding-standard.naming-conventions.html)，在很多文件夹中有很多关系。

我使用 NetBeans IDE 7.1。我在 Windows 7 下工作。

## 目标

我需要查看类关系的图形表示，可能具有不同的深度和不同的复杂程度。此外，如果图表中的类是可点击的，那就太好了。我不一定需要生成文档。

## 尝试

### 1\. 在 NetBeans 中

[NetBeans](http://netbeans.org/)是一个很棒的 IDE，有很多特性。事实上，它可以识别类依赖关系，明智的做法是假设它有某种方式以图形方式查看这种关系，本机或通过插件。存在这样的[插件](http://wiki.netbeans.org/NetbeansUML)，但适用于 5.5 版。我有7.1，它不兼容。失败。

### 2.企业架构师

一个简单的谷歌搜索将[Enterprise Architect](http://www.sparxsystems.com/products/index.html)作为解决此类问题的全能、完全全面的工具。所以，我下载并安装。我不打算详细说明我无法理解如何做任何事情，以及教程如何吹嘘软件可以做什么，但很少说**如何**做。

所以，我导入了源。它生成了许多不同的类并解析了所有成员。此外，它还生成了类图。“完美！”，我虽然，但唉。类图仅显示类之间的关系，其文件位于同一源文件夹中，尽管关系已在类的属性中明显注册。搜索有关如何将所有这些图表合并为一个的文档是不成功的。失败。

**注意：我在**[此](https://stackoverflow.com/questions/12584991/enterprise-architect-8-displaying-inheritance-chain-for-a-class/12585731#12585731)之前创建了一个并行线程。

### 3\. PHP_UML

找到[这个 PEAR 工具](http://pear.php.net/package/PHP_UML/)。看起来不错。因此，我阅读了有关如何从各种来源为我的设置安装它的文档，然后运行它。首先，我使用了*html*输出格式。伟大的！大量带有索引的文档，bla bla bla。然而，它可以在我想要的方向上做的最好的事情是： ![类图？](../Images/e8fc2f30a41a0ed7f817549e2f30d878.png) 不用说，我猜，这是我实际需要的一个非常糟糕的超级简化版本。结论：失败。

### 4.企业架构师+PHP_UML

但是，PHP_UML 也可以生成 XMI​​。哇。非常好。我可以存储我的关系并以不同的方式查看它们并与其他人交流。

因此，我将其导入 Enterprise Architect。结果：与之前单独使用 Enterprise Architect 相同，只是没有类图。只是上课。据我了解，我现在可以手动创建关系。史诗般的失败。

### 5.ArgoUML + PHP_UML

在我寻找解决方案的某个地方，我偶然发现有人说他们使用[ArgoUML](http://argouml.tigris.org/)的评论。已下载并安装。XMI 导入有些麻烦（必须明确将版本更改为 1）。失败（参见尝试 3）。

## 结论

如此看似微不足道的任务，却又如此艰巨。我是否必须浏览[整个列表](http://www.xmiforum.org/tools.php)，尝试每个应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T13:57:04.567

其中一种方法是采用我在尝试 2 或 4 中说明的方法，然后按照[此处](https://stackoverflow.com/a/12594305/565229)为 Enterprise Architect 提供的说明进行操作。

使用 PHP_UML生成[XMI​​ 文件：](http://en.wikipedia.org/wiki/XML_Metadata_Interchange)

*   如果您已经单独安装了 PHP，请按照[这些说明安装 PEAR（如果尚未安装）。](http://pear.php.net/manual/en/installation.getting.php)
*   如果您在 Windows（我的情况）下使用 XAMPP，请按照[这些说明](http://davehiren.blogspot.com/2011/04/how-to-install-or-uninstall-pear.html)将 PEAR 添加到[PATH 环境变量](http://en.wikipedia.org/w/index.php?title=Environment_variable)，从而通过[CMD](http://en.wikipedia.org/wiki/Command_Prompt)使 PEAR 可用，并学习如何在 *nix 和 Windows 系统中安装软件包。**提示：** PATH 分隔符是“;” （分号）用于 Windows。
*   在某些设置中，例如使用[XAMPP](http://www.apachefriends.org/en/xampp.html)，您[可能需要激活 XSL 扩展](http://pear.php.net/bugs/bug.php?id=18525)。在这种情况下，打开您的[php.ini](http://php.net/manual/en/ini.php)文件（您可能需要管理员权限才能保存它），然后取消注释或将以下行添加到“动态扩展”部分的底部：`extension=php_xsl.dll`.
*   使用 .安装[PHP_UML](http://pear.php.net/package/PHP_UML/)包`pear install PHP_UML`。
*   执行`phpuml -f xmi -o name_of_output_dir`。如果您打算稍后将生成的 XMI 与一些较旧的程序一起使用，您可能需要通过添加来指定 XMI 版本 1 `-x 1`。
*   对我来说，这并没有立即起作用，说我缺少../../data/xmlschema.rng。不知道为什么会发生这种情况，但是如果您遇到类似的错误，您可以从[这里](http://subversion.assembla.com/svn/pti/plugins/org.phpsrc.eclipse.pti.library.pear/tags/REL-1.2.1/php/library/PEAR/data/xmlschema.rng)下载并将其放入`data`您的 PEAR 目录下的文件夹中。

这个 XMI 以后可以与[Enterprise Architect](https://stackoverflow.com/a/12594305/565229)、[ArgoUML](http://argouml.tigris.org/)和[其他 XMI 工具](http://www.xmiforum.org/tools.php)一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-07T02:31:18.073

（**编辑**：对于想要从 PHP 项目生成 UML 类图的人来说，这个答案是另一种选择，它没有解释如何读取 XMI 文件）

> **目标**
> 
> 我需要查看类关系的图形表示，可能具有不同的深度和不同的复杂程度。此外，如果图表中的类是可点击的，那就太好了。我不一定需要生成文档。

如果您的目标是从 PHP 项目生成类图，我找到了比使用 PHP_UML 更好的解决方案。您可能想要的是**BoUML**，使用此软件，您可以选择一个 PHP 项目文件夹并对其进行逆向工程。然后创建一个类图。当您在其上拖放类时，关系与 AlgoUML 不同（如果我没记错的话）。在这种情况下，XMI 文件不再有用。

# java - 在二维数组中搜索字符

> ID：12590016
> 
> 赞同：0
> 
> 时间：2012-09-25T19:46:44.933
> 
> 标签：java, arrays, search, 2d

我正在编写一个迷宫程序。用户由字符“P”表示，我需要能够找到该字符以便为我的移动命令分配值。我对如何在迷宫中找到“P”感到困惑。

```
public static void main(String[] args) throws Exception{

    //Display the maze
    char treasureMaze[][] = {{'P','.','X','X','.'},{'.','X','.','.','.'},{'.','.','.','X','.'},{'X','X','T','.','.'},{'.','.','X','.','.'}}; 
    display(treasureMaze);

    //Give Move Options
    options();

    //Get Users Decision
    Scanner moveChoice = new Scanner(System.in);
    int choice = moveChoice.nextInt();

    if(choice == 1){
        System.out.println("You chose to Move up");
    }
    else if(choice == 2){
        System.out.println("You chose to Move down");
    }
    else if(choice == 3){
        System.out.println("You chose to Move left");
    }
    else if(choice == 4){
        System.out.println("you chose to Move right");
    }
    else{
        return;
    }

    //Move the Player
    //Move Up
    if(choice == 1){
        if(treasureMaze[0-1][0] == '.'){
            treasureMaze[0-1][0] = 'P';
            treasureMaze[0-1][0] = '.';
        }
        else if(treasureMaze[0-1][0] == 'T'){
            System.out.println("Congratulations you won!");
        }
        else{
            System.out.println("Cannot move there! Try something else");
        }
    }

    //Move Down
    else if(choice == 2){
        if(treasureMaze[0+1][0] == '.'){
            treasureMaze[0+1][0] = 'P';
            treasureMaze[0][0] = '.';
        }               
        else if(treasureMaze[0+1][0] == 'T'){
            System.out.println("Congratulations you won!");
        }
        else{                   
            System.out.println("Cannot move there! Try something else");
            }
            }

    //Move Left
    else if(choice == 3){
        if(treasureMaze[0][0-1] == '.'){
            treasureMaze[0][0-1] = 'P';
            treasureMaze[0][0] = '.';
        }
        else if(treasureMaze[0][0-1] == 'T'){
            System.out.println("Congratulations you won!");
        }
        else{
            System.out.println("Cannot move there! Try something else");
        }
    }

    //Move Right
    else if(choice == 4){
    if(treasureMaze[0][0+1] == '.'){
        treasureMaze[0][0+1] = 'P';
        treasureMaze[0][0] = '.';
    }
    else if(treasureMaze[0][0+1] == 'T'){
        System.out.println("Congratulations you won!");
    }
    else{
        System.out.println("Cannot move there! Try something else");
    }
    }
    else{
        return;
    }
    display(treasureMaze);
    options();
}

//Display Object: prints out the maze for the user
public static void display(char x[][]){
    for(int row = 0; row < x.length; row++){
        for(int column = 0; column < x[row].length; column++){
            System.out.print(x[row][column] + "\t");
        }
        System.out.println();
    }
}

//Options Object: gives the options menu to the user
 static void options(){
     System.out.println("You may:");
        System.out.println("\t1) Move up");
        System.out.println("\t2) Move down");
        System.out.println("\t3) Move left");
        System.out.println("\t4) Move right");
        System.out.println("\t0) Quit");

} 
```

我已将其设置为将“P”从其起始位置移动，但不知道如何定位它以进行下一次运行。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:49:00.847

我建议跟踪当前位置，这样您就不必找到它。为玩家的水平和垂直位置声明两个变量。在设置棋盘时初始化它们（看起来应该是 (0, 0)），并在玩家移动时更新它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:02:42.640

Ted 的回答可能最适合您当前的程序设置方式。

作为替代方案，您可以用树替换 2D 数组。这种方法的一个附带好处是您不必担心数组索引超出范围。每个房间都会引用它所连接的其他房间，可能只是无效的方向`null`，您可以保留对玩家当前房间的引用。

# css - css 属性 !important 是 hack 吗？

> ID：12590018
> 
> 赞同：1
> 
> 时间：2012-09-25T19:47:00.197
> 
> 标签：css

我被迫`!important`在css中使用。可能有另一种方法可以完成这项工作，但我这样做是因为我只希望已经样式化的类的特定子集具有不同的样式。这种情况与 jQuery 的日期选择器有关。在 datepicker 中，我将某些日子设置为具有不同的优先级颜色。这个最终结果是持有日期的`td`元素`<a>`获得类名

```
.date-priority > a
{
 background: url("") red;
 border: 1px solid yellow;
} 
```

但是，此更改会被覆盖，因为该锚标记有更具体的规则，它特别有一个类。我不想更改该类的所有元素，只想覆盖其中的一些。所以，我决定`!important`在之前的定义中使用

```
.date-priority > a
{
 background: url("") red !important;
 border: 1px solid yellow !important;
} 
```

有用。但这似乎不是最佳实践。一般是在使用`!important`hack，在这种情况下更具体吗？

HTML：

```
<td onclick="
 DP_jQuery_1348602012259.datepicker._selectDay('#date',8,2012, this);
 return false;" 
 title="Available" class=" ui-datepicker-week-end date-priority">
  <a href="#" class="ui-state-default">29</a>
</td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:53:45.353

如果是这种情况，只需为这些元素添加单独的规则：

```
.date-priority > a,.date-priority > a.className {
 background: url("") red;
 border: 1px solid yellow;
} 
```

**演示：http: [//jsfiddle.net/Blender/rCyjV/](http://jsfiddle.net/Blender/rCyjV/)**

不赞成的唯一原因`!important`是因为它使将来对 CSS 的添加可能令人沮丧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T19:52:27.083

简短的回答：没有。

长答案：`!important`专门针对您不希望规则被连续声明覆盖的情况。此外，分配给选择器的“权重”（最具体=最重要）并不总是开发人员想要的行为。

来自[W3C 规范](http://www.w3.org/TR/CSS21/cascade.html#important-rules)：

> 作者和用户样式表都可能包含“！important”声明，并且用户“！important”规则覆盖作者“！important”规则。此 CSS 功能通过让具有特殊要求（大字体、颜色组合等）的用户控制演示文稿来提高文档的可访问性。

所以绝对不是黑客:-)

# c# - 通用存储库/工作单元问题

> ID：12590019
> 
> 赞同：5
> 
> 时间：2012-09-25T19:47:02.177
> 
> 标签：c#, generics, asp.net-mvc-4, repository-pattern

我一直在从各种来源学习**存储库**和**工作单元模式，包括这里：**

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net- mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

如果您浏览到上面的**创建工作单元类的**链接，则会出现以下内容：

```
 private GenericRepository<Department> departmentRepository;
    private GenericRepository<Course> courseRepository; 
```

这很好，但我想尝试扩展 Generic 的 Unit of Work 类并设置 GenericRepositories 的集合，以便我可以根据我通过的模型动态更新。

我最终想在我的**Controller**中执行以下操作：

```
public class LedgerUserController : Controller
{
    private GenericUnitOfWork unitOfWork = new GenericUnitOfWork();
    LedgerUser ledgeruser = new LedgerUser();

    public ActionResult Index()
    {
        //var ledgerusers = db.LedgerUsers.Include(l => l.Image).Include(l => l.UserType);
        var view = unitOfWork.Repository(ledgeruser).Get(l => l.LastName == "smith");
        return View(view.ToList());
    }
} 
```

所以到目前为止，这是我的类和接口：

**IRepository.cs**

```
/// <summary>
/// Generic Repository for CRUD Operations and methods
/// to locate entities within your store. This is not specific to which Data Access
/// tools your are using (Direct SQL, EF, NHibernate, etc).
/// </summary>
public interface IRepository<T> where T : class
{
    //--Search Operations
    IQueryable<T> GetAll();
    IEnumerable<T> GetAllList();
    IEnumerable<T> Get(Expression<Func<T,bool>> filter);
    T GetIt(Expression<Func<T, bool>> filter);
    T GetById(object id);

    //--CRUD Operations
    void Create(T entity);
    void Update(T entity);
    void Delete(T entity);

} 
```

**GenericRepository.cs**

/// /// 用于查找实体的存储库类 /// CRUD 操作 /// /// public class GenericRepository : IRepository where TEntity : class {

```
 internal AccountsContext context;
    internal DbSet<TEntity> dbSet;
    internal IQueryable<TEntity> query;

    /// <summary>
    /// Default Constructor.
    /// </summary>
    /// <param name="context"></param>
    public GenericRepository(AccountsContext context)
    {
        this.context = context;
        this.dbSet = context.Set<TEntity>();
    }

    #region Methods
    #region Search Functionality
    /// <summary>
    /// Obtain the whole Entity to query if needed.
    /// </summary>
    /// <returns>IQueryable object.</returns>
    public virtual IQueryable<TEntity> GetAll()
    {
        IQueryable<TEntity> query = dbSet;
        return query;

    }

    /// <summary>
    /// Obtain the whole Entity to Enumerate throught if needed.
    /// </summary>
    /// <returns>IEnumerble object.</returns>
    public virtual IEnumerable<TEntity> GetAllList()
    {
        IQueryable<TEntity> query = dbSet;
        return query.ToList();

    }

    /// <summary>
    /// Locate an Entity by its indexed id.
    /// </summary>
    /// <param name="id"></param>
    /// <returns></returns>
    public virtual TEntity GetById(object id)
    {
        return dbSet.Find(id);
    }

    /// <summary>
    /// Gets a collection based on LINQ lambda expressions
    /// </summary>
    /// <param name="filter">Lambda Expression</param>
    /// <returns>Query</returns>
    public virtual IEnumerable<TEntity> Get(Expression<Func<TEntity, bool>> filter)
    {
        query = dbSet;

        if (filter != null)
        {
            query = query.Where(filter);
        }

        return this.query.ToList();
    }

    /// <summary>
    /// Gets one record based on a one-to-one relationship.
    /// </summary>
    /// <param name="filter">Lambda Expression.</param>
    /// <returns>One record.</returns>
    public virtual TEntity GetIt(Expression<Func<TEntity, bool>> filter)
    {
        IQueryable<TEntity> query = dbSet;
        return query.SingleOrDefault(filter);

    }

    #endregion
    #region CRUD Functionality

    /// <summary>
    /// Used to create a new entity into the database.
    /// </summary>
    /// <param name="entity">Entity to create.</param>
    public virtual void Create(TEntity entity)
    {
        dbSet.Add(entity);
    }

    /// <summary>
    /// Used to update an entity that already exists in the
    /// database.
    /// </summary>
    /// <param name="entity">Entity to update.</param>
    public virtual void Update(TEntity entity)
    {
        dbSet.Attach(entity);
        context.Entry(entity).State = EntityState.Modified;
    }

    /// <summary>
    /// Used to delete an entity from the database.
    /// </summary>
    /// <param name="entity">Entity to delete.</param>
    public virtual void Delete(TEntity entity)
    {
        if (context.Entry(entity).State == EntityState.Detached)
        {
            dbSet.Attach(entity);
        }
        dbSet.Remove(entity);
    }

    #endregion
    #endregion

}
#endregion 
```

**GenericUnitOfWork.cs**：

```
 /// <summary>
/// Unit of work class that handles multiple Repositories
/// and shares the context.
/// </summary>
public class GenericUnitOfWork : IUnitOfWork

{
    private AccountsContext context = new AccountsContext();

    Dictionary<string, GenericRepository<IRepository<IRepositoryEntity>>> repostories = null;

    /// <summary>
    /// Generic Repository method which checks the repository is available if not,
    /// it sets it up.
    /// </summary>
    /// <param name="entity">Entity</param>
    /// <returns>Repository to use.</returns>
    public  GenericRepository<IRepository<IRepositoryEntity>> Repository (IRepositoryEntity entity)
    {

            string index = entity.GetType().ToString();

            if (!repostories.ContainsKey(index))
            {

                //Reflections to create the repoositiory if it is not needed.
                Type type1 = typeof(GenericRepository<>);
                Type[] typeArgs = {typeof(IRepositoryEntity)};

                Type constructed = type1.MakeGenericType(typeArgs);
                object o = Activator.CreateInstance(constructed);

                if(o is  GenericRepository<IRepository<IRepositoryEntity>>)
                {
                    var rep = (GenericRepository<IRepository<IRepositoryEntity>>)o;
                    rep.context = this.context;
                    repostories.Add(index, rep);  
                }

            }

            return this.repostories[index];
    }

    /// <summary>
    /// Save method.
    /// </summary>
    public void Save()
    {
        context.SaveChanges();

    }

    private bool disposed = false;

    /// <summary>
    /// Dispose the conxtext when finished.
    /// </summary>
    /// <param name="disposing"></param>
    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                context.Dispose();
            }
        }
        this.disposed = true;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

} 
```

}

现在我知道存储库字典的实现和存储库方法不正确（通用类型错误），因为在我的 lambda 表达式中它无法解析 ledgeruser LastName。

```
var view = unitOfWork.Repository(ledgeruser).Get(l => l.LastName == "smith"); 
```

我是否过度设计了这个问题，或者是否有一种很好的干净方法来使用我的通用存储库集合创建通用工作单元，这些存储库是基于模型对象给出的（例如上面的 LedgerUser）设置和创建的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:32:57.360

一些想法：

1.  `UnitOfWork`您可以使用 IoC 容器并以这种方式自动创建存储库，而不是在您的实现中使用反射创建所有内容。MVC 框架实际上就是为这种方法构建的。[在http://www.mikesdotnetting.com/Article/117/Dependency-Injection-and-Inversion-of-Control-with-ASP.NET-MVC](http://www.mikesdotnetting.com/Article/117/Dependency-Injection-and-Inversion-of-Control-with-ASP.NET-MVC)中提供了使用 StructureMap 的简单解释和示例。

2.  如果您不想使用成熟的 IoC 容器，您仍然可以针对接口标准化您的工厂逻辑和代码。这起着相同的作用，但如果您想继续使用自定义工作单元实现，可能会更好。在我对 C#/EF 和存储库模式的回答中[：将 ObjectContext 放在具有多个存储库的解决方案中的位置？](https://stackoverflow.com/questions/5032810/c-ef-and-the-repository-pattern-where-to-put-the-objectcontext-in-a-solution-w/5032924#5032924)，我发布了一个`RepositoryProvider`允许创建的类`UnitOfWork`具有可定制工厂的范围存储库。我建议至少查看这段代码，因为它是一种类似但更有效的方式来完成您的代码示例的目标。要理解的一件重要事情是，该答案中的示例使用 ObjectContext 作为 UnitOfWork，因此您的更改需要通过将出现替换`ObjectContext`为`IUnitOfWork`. 如果在查看代码后对该方法有任何不清楚的地方，请告诉我，我将尝试解释如何调整您的特定用例。

3.  似乎您的工厂逻辑有一些循环。如果存储库创建了`LedgerUser`s，那么它不应该需要 a`LedgerUser`来创建工厂。在我看来，你真正想要的是一个`Type`像`unitOfWork.Repository(typeof(LedgerUser))`. `unitOfWork.Repository<LedgerUser`您可以通过在负载上创建泛型类型参数并执行>()`来使其更加流畅。根据您的示例，您似乎根本没有任何理由需要实例。

4.  看起来你更喜欢强类型而不是`Repository`方法中的接口。我想也许你想要的更像是：

```
 public IRepository Repository()
        where T : IRepositoryEntity 
    { 
           //  your factory/cache-retrieval logic here
    } 
```

代替

```
public  GenericRepository<IRepository<IRepositoryEntity>> Repository (IRepositoryEntity entity)
{
      //  your factory/cache-retrieval logic here
} 
```

然后，如果您调用的是`Repository<LedgerUser>`，您的方法将返回 a `GenericRepository<LedgerUser>`，即使签名显示`IRepository<LedgerUser>`。这几乎`RepositoryProvider`就是我建议的实现链接的工作方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:06:05.110

我不明白为什么要将实例传递给对象而不是对象的类型，并按类型保存存储库：

尝试这个

```
ConcurrentDictionary<Type, object> _repositories = ...;

public GenericRepository<IRepository<TEntity>> Repository<TEntity>(IRepositoryEntity entity) where TEntity: IRepositoryEntity
{
    return (GenericRepository<IRepository<TEntity>>)_repositories.GetOrAdd(
        typeof(TEntity), 
        t => new GenericRepository<IRepository<TEntity>>(this.Context)
    );
} 
```

# asp.net-mvc - 基本身份验证，回退到表单身份验证

> ID：12590028
> 
> 赞同：0
> 
> 时间：2012-09-25T19:47:26.227
> 
> 标签：asp.net-mvc, authentication, forms-authentication, basic-authentication

这是一个关于 ASP.net MVC 4 的问题。您可以自始至终假设 SSL。

*   我有一个 Web API，它可以通过 SSL 使用 HTTP Basic Auth 提供给客户端。
*   我在同一个域上也有一个 CMS，它通过 jQuery 使用 Web API。
*   用户通过 Forms auth 登录 CMS。

出于这个原因，我希望可以使用 HTTP Basic Auth 或 Forms auth 登录到 Web *API*。

我计划使用自定义 AuthorizeAttribute 来实现这一点，它将首先根据数据库检查基本身份验证标头（如果存在）。如果基本身份验证标头不存在，则它将授权委托给基础 AuthorizeAttribute 以处理表单身份验证。

首先，这是个好主意吗？任何人都可以看到允许任何一种身份验证的任何问题吗？任何人都可以看到任何实施问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:56:21.450

> 首先，这是个好主意吗？

是的，这似乎是个好主意，我认为实现 2 种身份验证机制没有任何问题：

*   已在同一域上进行身份验证的用户的表单身份验证
*   尚未经过身份验证但拥有用户名和密码并希望直接调用 Web API 的某些方法的用户的基本身份验证

# sass - SASS sprite 不能与 @extend 一起使用

> ID：12590031
> 
> 赞同：0
> 
> 时间：2012-09-25T19:47:29.457
> 
> 标签：sass, sprite

嗨，我在搞乱 SASS 和精灵，它工作正常。它从我的图像文件名中生成了很多类，我可以在我的标记中使用它们。但我想在不更改标记的情况下使用精灵。

这就是我所拥有的

我的图像位于图像/原始图像之一称为`spr-links.png`

在我的CSS中我有

```
@import "raw/*.png"; //Sprite 
```

我应该能够喜欢这个，但没有任何结果。SASS 甚至没有失败

```
.footer{
    @extend .raw-spr-link;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:25:45.500

只需取消注释`"relative_assets = true"`

```
# Require any additional compass plugins here.

    # Set this to the root of your project when deployed:
    http_path = "/"
    css_dir = "css"
    sass_dir = "sass"
    images_dir = "images"
    javascripts_dir = "js"

    relative_assets = true

    output_style = :expanded # by Compass.app 
    sass_options = {:debug_info=>false} # by Compass.app 

    line_comments = true # by Compass.app 
```

# wxpython - 如何重建面板

> ID：12590033
> 
> 赞同：0
> 
> 时间：2012-09-25T19:47:34.797
> 
> 标签：wxpython

在我的**初始化**中，我有这个：

```
def __init__(self,parent,id):
    wx.Frame.__init__(self,parent,id,self.title,size=wx.DisplaySize())
    self.newpanel=wx.Panel(self,size=wx.DisplaySize()) 
```

并且有一个功能可以破坏面板“newpanel”并重建它（并在其中放置一些按钮等）：

```
def newpanelbuild(self,event):
    self.newpanel.Destroy()
    self.newpanel=wx.Panel(self,size=wx.DisplaySize())
    # creating some wx.Buttons, wx.TextCtrl's & wx.Choice 
```

当我运行我的程序时，我没有收到错误，并且当“newpanelbuild”事件被激活时，会显示正确的面板 - 但我无法单击其中的按钮、textctrl 和下拉菜单......看起来像面板在后台/没有焦点。所以我尝试添加“self.newpanel.SetFocus()”，但没有帮助。我该如何解决这个问题？

编辑：我只是将我所有的小问题合并为一个大问题：[https ://stackoverflow.com/questions/12604139/need-tutorial-for-menubar-handling-panel-building](https://stackoverflow.com/questions/12604139/need-tutorial-for-menubar-handling-panel-building)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:26:23.397

你为什么要破坏面板？您可以将小部件添加到原始面板。我要做的是将可以更改的小部件放入sizer，然后销毁sizer或sizer的孩子。您可能还对本关于面板切换的教程感兴趣：

[http://www.blog.pythonlibrary.org/2010/06/16/wxpython-how-to-switch-between-panels/](http://www.blog.pythonlibrary.org/2010/06/16/wxpython-how-to-switch-between-panels/)

# angularjs - Angular-ui jQuery Passthrough 不起作用

> ID：12590037
> 
> 赞同：1
> 
> 时间：2012-09-25T19:47:49.440
> 
> 标签：angularjs

我不确定我做错了什么，但由于某种原因，我无法让 AngularJS UI 的 jquery passthrough 正常工作。

我认为我的模块设置正确（从 angular-ui 站点复制了示例）。

这是一个小提琴

[http://jsfiddle.net/huYQ6/2/](http://jsfiddle.net/huYQ6/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T21:11:15.593

您必须在 angular 之前导入 jQuery 以使其将 jQuery 用于 angular.element（因为 angular-ui 使用 angular.element 来查找 jQuery.fn.yourFunction），这是一个有效的小提琴：

[http://jsfiddle.net/huYQ6/6/](http://jsfiddle.net/huYQ6/6/)

# c# - 模型属性，集合列表在发布到控制器时为空，带有大尺寸字符串列表的 MVC 的潜在问题？

> ID：12590045
> 
> 赞同：0
> 
> 时间：2012-09-25T19:48:43.970
> 
> 标签：c#, asp.net-mvc

我正在尝试将模型中的简单列表发布回控制器。它正确呈现，但在发布时它总是空的。我注意到当我使用 @Html.Hidden 的 id 和 name 是不同的例如 id 变成`TestExceptionDisplay_[0]__Exception`和 name 变成`TestExceptionDisplay[0].Exception`. 所以我使用一种输入类型，并尝试按照它喜欢的方式呈现，但它不起作用。我尝试了部分视图，编辑器模板，似乎没有任何效果。TestException Display 是一个非常简单的对象列表，称为 `public List<RunLogEntryTestExceptionDisplay> TestExceptionDisplay { get; set; }`

```
public class RunLogEntryTestExceptionDisplay
{
    public string Exception { get; set; }
} 
```

视图中的片段使用 for 循环呈现列表，列表呈现正常，但在后 TestExceptionDisplay 始终为 NULL：

```
@if (Model.TestExceptionDisplay != null)
{
    for (var i = 0; i < Model.TestExceptionDisplay.Count; i++)
    {
    <tr>
        <td>
            @Model.TestExceptionDisplay[i].Exception
            @*@Html.HiddenFor(m => m.TestExceptionDisplay[i].Exception)*@
            <input  name="RunLogEntry.TestExceptionDisplay_[@i]__Exception" type="hidden" value="@Model.TestExceptionDisplay[i].Exception" />
        </td>
    </tr>
    }
} 
```

或者这甚至不适用于发布时的编辑器模板

```
 @if (Model.TestExceptionDisplay != null)
                {

                    @Html.EditorFor(x => x.TestExceptionDisplay)

                } 
```

Shared\EditorTemplates 中的编辑器模板，其确切名称为 RunLogEntryTestExceptionDisplay

```
@model RunLog.Domain.Entities.RunLogEntryTestExceptionDisplay
<div>
    @Html.EditorFor(x => x.Exception)
    @Html.HiddenFor(x => x.Exception)
</div> 
```

呈现的 HTML 如下所示，我没有复制整个列表，请不要让 ID 和名称看起来以不同的命名约定呈现。如果我使用编辑器模板或 for 循环，这两种情况都会发生。谢谢

```
 <input id="TestExceptionDisplay_9__Exception" name="TestExceptionDisplay[9].Exception" type="hidden" value="&quot;1404 TestException - Parameters:Unable to calculate result, assay is not calibrated for Assay Number (135), Assay Version (5), Track (1), Lane (2), and Reagent Lot Number (26600LI06)&quot;" /> 
```

![调试视图](../Images/18cee45c9792bba460e7058cd1ddf7f2.png)

完整视图：

```
 @model RunLog.Domain.Entities.RunLogEntry
    @{
        ViewBag.Title = "Create";
        Layout = "~/Views/Shared/_Layout.cshtml";

    }
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/errorCode.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/testexception.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/runLogEntry.js")" type="text/javascript"></script>
    <script type="text/javascript">
        var runlogListErrorsUrl = '@Url.Action("ListErrorCodes", "RunLogEntry")';

    </script>
    <fieldset>
        <legend>Enter a new Run Log Entry</legend>
        @using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.ValidationSummary(true)
            <div class="exception">@(ViewBag.ErrorMessage)</div>
            <div class="bodyContent">
                <span class="leftContent">Load List File (Select): </span><span class="rightContent">
                    <input type="file" name="file" id="file1" style="width: 500px" />
                </span>
            </div>
                               if (Model.LoadListStoredFileName != null)
                               {
            <div class="bodyContent">
                <span class="leftContent">Attached Load List: </span><span class="rightContent">
                    @Html.ActionLink(Model.LoadListFileName, "Download", new { @file = Model.LoadListStoredFileName })
                </span>
            </div>
                               }
            <div class="bodyContent">
                <span class="leftContent">Output File (Select): </span><span class="rightContent">
                    <input type="file" name="file" id="file2" style="width: 500px" />
                </span>
            </div>
                               if (Model.OutputStoredFileName != null)
                               {
            <div class="bodyContent">
                <span class="leftContent">Attached Output: </span><span class="rightContent">
                    @Html.ActionLink(Model.OutputFileName, "Download", new { @file = Model.OutputStoredFileName })
                </span>
            </div>
                               }
            <div class="bodyContent">
                <span class="leftContent">Import Files: </span>
                <button name="submit" class="art-button" type="submit" value="Upload" style="width: 100px">
                    Upload</button>
                <button name="submit" class="art-button" type="submit" value="Remove" style="width: 100px">
                    Remove</button>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Operator")
                </span><span class="rightContent">
                    @Html.DropDownList("OperatorID", String.Empty)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Run ID")
                </span><span class="rightContent">[Generated] </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Run Start Date / Time")
                </span><span class="rightContent">
                    @Html.EditorFor(model => model.RunDate)
                    &nbsp;
                    @Html.DropDownList("Hour", ListHelpers.HourList())
                    :
                    @Html.DropDownList("Minute", ListHelpers.Minute15List())
                    &nbsp;
                    @Html.DropDownList("AMPM", ListHelpers.AMPMList())
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("System")
                </span><span class="rightContent">
                    @Html.DropDownList("SystemID", String.Empty)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Run Type")
                </span><span class="rightContent">
                    @Html.DropDownList("RunTypeID", String.Empty)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Run Description")
                </span><span class="rightContent">
                    @Html.TextAreaFor(model => model.RunDescription, new { style = "width: 600px; height=30px" })
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Assay Performance Issues")
                </span><span class="rightContent">
                    @Html.DropDownList("AssayPerformanceIssues1", ListHelpers.YesNoList())
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Tests/Cycles Requested")
                </span><span class="rightContent">
                    @Html.EditorFor(model => model.SPTestsRequested)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Tests/Cycles Completed")
                </span><span class="rightContent">
                    @Html.EditorFor(model => model.SPTestsCompleted)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Run Status")
                </span><span class="rightContent">
                    @Html.DropDownList("RunStatusID", String.Empty)
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Assay")
                </span><span class="rightContent">
                    @Html.ListBoxFor(model => model.SelectedAssayIDs, new MultiSelectList(RunLog.Domain.Lists.GlobalList.AssayListItems(), "ID", "Name", Model.SelectedAssayIDs))
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Error Code")
                </span><span class="rightContent"><span id="ChildDialogLink" class="treeViewLink">Click
                    here to Select Error Codes</span>
                    <br />
                    <span id="ErrorCodeDisplay" style="cursor: pointer; text-decoration: underline;">@(Model.ErrorDescription)</span>
                    @Html.HiddenFor(model => model.ErrorDescription)
                </span>
            </div>

            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Test Exceptions")
                </span><span class="rightContent"><span id="TestExceptionChildDialogLink" class="treeViewLink">
                    Click here to View Test Exceptions</span>
                    <br />
                    <span id="TestExceptionDisplayy"></span></span>
            </div>
            <div id="testExceptiontreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
                overflow: scroll; width: 800px; height: 450px;">
                <div id="testExceptions">
                </div>
                <div id="inputTestExceptions">
                    <table class="grid" style="width: 450px; margin: 3px 3px 3px 3px;">
                        <thead>
                            <tr>
                                <th>
                                    Exception String
                                </th>
                                <th>
                                    Comment
                                </th>
                            </tr>
                        </thead>
                        @* @{var index = 0;}*@
                        @if (Model.TestExceptionDisplay != null)
                        {
                            for (var i = 0; i < Model.TestExceptionDisplay.Count; i++)
                            {
                            <tr>
                                <td>
                                    @Model.TestExceptionDisplay[i].Exception
                                    @Html.HiddenFor(m => m.TestExceptionDisplay[i].Exception)
                                </td>
                            </tr>

                            }
                        }
                    </table>
                </div>
            </div>

            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Service Entry Request")
                </span><span class="rightContent">
                    @Html.DropDownList("ServiceRequest", ListHelpers.YesNoList())
                </span>
            </div>
            <div class="bodyContent">
                <span class="leftContent">
                    @Html.Label("Problem Description")
                </span><span class="rightContent">
                    @Html.TextArea("ProblemDescription", new { style = "width: 600px; height: 30px" })
                </span>
            </div>
            <p>
                <input id="LogType" type="hidden" value="Run" />
                <input id="ID" type="hidden" value="0" />
                @if (Model.ExitCode == "1")
                {
                    @Html.Hidden("ExitCode", Model.ExitCode)
                }
                else
                {
                    <input id="ExitCode" type="hidden" value='0' />
                }
            </p>

            @Html.HiddenFor(model => model.MaxReplicateId)
            @Html.HiddenFor(model => model.MinReplicateId)
            @Html.HiddenFor(model => model.OutputFileName)
            @Html.HiddenFor(model => model.OutputStoredFileName)
            @Html.HiddenFor(model => model.LoadListFileName)
            @Html.HiddenFor(model => model.LoadListStoredFileName)
            @Html.HiddenFor(model => model.MinTestCompletionDate)
            @Html.HiddenFor(model => model.MaxTestCompletionDate)

            <div class="bodyContent">
                <span class="leftContent"></span><span class="rightContent">
                    <button name="submit" class="art-button" type="submit" value="Create">
                        Create</button></span>
            </div>
        }
    </fieldset>
    <script src="@Url.Content("~/Scripts/exitCode.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/exitCode.js")" type="text/javascript"></script>
    <div id="treeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
        overflow: scroll; width: 800px; height: 450px;">
        <div id="errorCodes">
            @Html.RenderTree(CacheHelper.ErrorCodes(), ec => ec.Name, ec => ec.Children.ToList(), ec => (ec.ID).ToString(), null, "e")
        </div>
        <div id="inputReps" style="display: none;">
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:54:20.870

你应该`list`在你的第一个方法中初始化你，然后传递给`post`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:59:06.890

为什么你期望你收到的模型中的列表被填充？

POST 上的模型仅填充来自表单的数据 - MVC 创建模型类的新实例并填充它可以匹配的字段。

正因为如此，确保您的列表被填充的常用方法是使用一个辅助方法来填充它们。然后，您可以从原始`Get`或`Post`方法调用它来重新填充列表。

您唯一希望在回发时通过 PMV 在模型中填充列表的情况是，当表单元素中提供重建列表的详细信息时。

我可能在你的大量代码中错过了它，但我看不到你在任何地方这样做。

# android - Android单元测试，测试中的活动之间传递上下文

> ID：12590048
> 
> 赞同：0
> 
> 时间：2012-09-25T19:49:02.780
> 
> 标签：android, unit-testing, applicationcontext

我想在我的应用程序的一个干净实例上运行一些单元测试，并认为我可以通过使用 getActivity 创建一个实例并在测试结束时完成它来做到这一点。但是，我注意到上一个测试中的操作对下一个测试有影响。我编写了以下简单的应用程序来重现该问题。

测试设置显示了许多测试，我在这些测试中获取活动并在每个测试中完成它。在创建活动期间，onCreate 中的计数器会增加。我希望它在所有 3 次测试中都是 1，但我看到它在最近一次测试中是 3。不知何故，上下文被重用了。

有人可以解释并展示我如何在每次测试中从头开始测试应用程序吗？

```
import com.example.activitykeepscontext.MainActivity;

public class MainActivityTest  extends ActivityInstrumentationTestCase2<MainActivity> {

   public MainActivityTest() {
        super("com.example.activitykeepscontext", MainActivity.class);
    }

   public void testCount1() {
       MainActivity mainActivity = getActivity();
       mainActivity.finish();
   }

   public void testCount2() {
       MainActivity mainActivity = getActivity();
       mainActivity.finish();
   }

   public void testCount3() {
       MainActivity mainActivity = getActivity();
       mainActivity.finish();
   }

} 
```

这是应用程序：

```
package com.example.activitykeepscontext;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity {

    private static final String TAG = "MainActivity";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        AppData appData = (AppData)getApplicationContext();
        appData.count++;

        Log.i(TAG, "Count: " + appData.count);
    }
} 
```

这是用于通过应用程序上下文传递数据的类。

```
package com.example.activitykeepscontext;

import android.app.Application;

public class AppData  extends Application {
    public int count;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:06:42.060

所以你需要的是一个[ActivityUnitTestCase](http://developer.android.com/reference/android/test/ActivityUnitTestCase.html)，它也让你能够注入一个应用程序。ActivityInstrumentationTestCase2 不提供注入应用程序的方法，因此使用 Activity 的默认值。

# c++ - 为什么文件读取函数中有额外的括号？

> ID：12590050
> 
> 赞同：7
> 
> 时间：2012-09-25T19:49:10.193
> 
> 标签：c++, compiler-errors, ifstream

我了解以下代码（[来自此处](https://stackoverflow.com/questions/2912520/read-file-contents-into-a-string-in-c)）用于将文件的内容读取为字符串：

```
#include <fstream>
#include <string>

  std::ifstream ifs("myfile.txt");
  std::string content( (std::istreambuf_iterator<char>(ifs) ),
                       (std::istreambuf_iterator<char>()    ) ); 
```

但是，我不明白为什么需要这种看似多余的括号。例如，以下代码无法编译：

```
#include <fstream>
#include <string>

  std::ifstream ifs("myfile.txt");
  std::string content(std::istreambuf_iterator<char>(ifs),
                      std::istreambuf_iterator<char>()    ); 
```

为什么编译需要这么多括号？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T19:51:03.517

因为没有括号，编译器将其视为函数声明，声明一个名为`content`返回 a的函数，并将一个命名参数和一个无名参数`std::string`作为参数，该参数是一个不带参数返回 a 的函数。`std::istreambuf_iterator<char>``ifs``std::istreambuf_iterator<char>`

您可以使用括号，或者正如 Alexandre 在评论中指出的那样，您可以使用没有这种歧义的 C++ 的统一初始化功能：

```
std::string content { std::istreambuf_iterator<char>(ifs), std::istreambuf_iterator<char>() }; 
```

或者正如 Loki 所说：

```
std::string content = std::string(std::istreambuf_iterator<char>(ifs), std::istreambuf_iterator<char>()); 
```

# requirejs - RequireJS - 必需的项目总是返回 undefined

> ID：12590051
> 
> 赞同：0
> 
> 时间：2012-09-25T19:49:17.837
> 
> 标签：requirejs

我以前从未使用过 RequireJS，因此将不胜感激。我有以下 HTML：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" 
        data-main="CustomScripts/market-need" 
        src="CustomScripts/require.js"></script>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 1</title>
</head>
<body>
etc...
</body>
</html> 
```

我在`CustomScripts/market-need.js`.

```
(function(){
    requirejs.config({ baseUrl: 'CustomScripts' });

    require(['mndataservice'],
        function (mndataservice) {
            mndataservice.getListData();
        });
})(); 
```

并将以下代码保存在`CustomScripts/mndataservice.js`.

```
define([], function () {
    function getListData() {
            alert("Hit");
        }

    return
    {
        getListData: getListData
    };
}); 
```

每当我运行上述内容时，`mndataservice`当它`mndataservice.getListData();`到达`market-need.js`. 这在某一时刻奏效了，我和我都找不到我为我的一生所犯的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:42:06.047

如果你改变：

```
function (mndataservice) {
    mndataservice.getListData();
}); 
```

至：

```
function (mndataservice) {
    this.mndataservice.getListData();
}); 
```

然后还将 mndataservice.js 的内容替换为：

```
var mndataservice = {
    getListData: function () {
        alert("Hit");
    }
}; 
```

我想它会为你解决它。

更新：

只需将 mndataservice.js 更改为：

```
define([], function () {
    return {
        getListData: function () {
            alert("Hit");
        }
    }
}); 
```

应该修复它。不要加“这个”。在另一个函数中。

**更新**

跟进您的问题，询问为什么您的示例不起作用而我的示例起作用。你的原因不起作用 - 你的代码实际上是这样做的：

```
define([], function () {
    function getListData() {
            alert("Hit");
        }

    return;
    {
        getListData: getListData
    };
}); 
```

`return`注意关键字后面的分号。虽然不在您的代码中，但它会被 Javascript 的[自动分号插入自动插入](http://elegantcode.com/2011/01/12/basic-javascript-part-6-automatic-semicolon-insertion/)，这会导致它返回*未定义*而不是对象。

将打开的花括号移动到`return`修复它的同一行！

# e-commerce - 监控定期付款

> ID：12590052
> 
> 赞同：-1
> 
> 时间：2012-09-25T19:49:22.267
> 
> 标签：e-commerce, payment-gateway, subscription, billing, recurring-billing

一些网站能够监控每月的定期付款，并在付款或付款失败时向我显示，甚至可能在其计费系统中显示付款的 ID。我想做同样的事情。但是，当我在网上搜索时，我发现的大多数在线支付处理服务只会告诉我的网站是否进行了第一笔付款。Google Checkout 说如果付款失败，他们会给我发一封电子邮件，仅此而已。我想自动化这个过程。

是否有任何在线支付处理服务提供一种方式（可能通过 API）从我的网站跟踪经常性支付信息：支付时间、日期、状态等？

或者也许有另一种方式网站可以监控我不知道的经常性付款？（例如他们银行的 API）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:05:45.710

我找到了。Authorize.net 提供“静默发布功能”以及“获取订阅状态”：

[使用 authorize.net 获取已取消/过期信用卡的状态以进行定期计费](https://stackoverflow.com/questions/1997942/getting-status-on-canceled-expired-credit-cards-for-recurring-billing-with-autho)

# c# - DynamicMethod 性能缓慢

> ID：12590054
> 
> 赞同：1
> 
> 时间：2012-09-25T19:49:31.127
> 
> 标签：c#, .net, cil, reflection.emit

我试图通过专门为该任务生成 IL 来提高项目中某些代码的性能。

该任务目前是通过对数组元素执行 for 循环并通过接口运行各种方法来完成的。我想用专门执行此任务的 IL 替换它，而无需任何虚拟/接口调用（通过直接执行所需的操作）。

出于某种原因，此 DynamicMethod的运行时性能比执行每个元素的接口调用的原始代码的运行时性能要慢得多*。*我能看到的唯一原因是我的 DynamicMethod 非常大（数组的每个元素有几条指令）。

我认为这可能是由于 JIT 而导致的第一个缓慢的调用，但事实并非如此。所有的调用都比较慢。有没有人遇到过这样的事情？

**编辑**

这里的人求代码。。原来的代码挺大的，这里是缩小版的（用反向模式AD计算函数梯度的自动微分代码）。我的数组中的所有元素都继承了以下类

```
abstract class Element
{
    public double Value
    public double Adjoint
    public abstract void Accept(IVisitor visitor)
} 
```

我有两个派生自元素的类。为简单起见，我将仅定义以下两个

```
class Sum : Element
{
    public int IndexOfLeft;   // the index in the array of the first operand
    public int IndexOfRight;  // the index in the array of the second operand
    public abstract void Accept(IVisitor visitor) { visitor.Visit(this); }
}

class Product : Element
{
    public int IndexOfLeft;   // the index in the array of the first operand 
    public int IndexOfRight;  // the index in the array of second first operand 
    public abstract void Accept(IVisitor visitor) { visitor.Visit(this); }
} 
```

这是访问者的实现：

```
class Visitor : IVisitor
{
    private Element[] array;

    public Visitor(Element[] array) { this.array = array; }

    public void Visit(Product product)
    {
        var left = array[product.IndexOfLeft].Value;
        var right = array[product.IndexOfRight].Value;

        // here we update product.Value and product.Adjoint according to some mathematical formulas involving left & right
    } 

    public void Visit(Sum sum)
    {
        var left = array[sum.IndexOfLeft].Value;
        var right = array[sum.IndexOfRight].Value;

        // here we update sum.Value and product.Adjoint according to some mathematical formulas involving left & right
    }       
} 
```

我的原始代码如下所示：

```
void Compute(Element[] array)
{
    var visitor = new Visitor(array);
    for(int i = 0; i < array.Length; ++i)
        array[i].Accept(visitor);
} 
```

我的新代码尝试做这样的事情

```
void GenerateIL(Element[] array, ILGenerator ilGenerator)
{
    for(int i = 0; i < array.Length; ++i)
    {
        // for each element we emit calls that push "array[i]" and "array" 
        // to the stack, treating "i" as constant,
        // and emit a call to a method similar to Visit in the above visitor that 
        // performs a computation similar to Visitor.Visit.
    }
} 
```

然后我调用生成的代码..它的执行速度比调用 Compute(array); 时访问者模式的*双重调度慢。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:27:19.923

我很好奇为什么标题是动态方法。当您生成 IL 时。您的意思是动态 IL 生成，然后是静态执行。或者您是否也在生成使用与 c# 动态关键字等效的 IL 的 IL？

动态（运行时）IL

我假设代码只被 jitted 一次。你已经检查过了。

在提供的示例中使用数组而不是泛型增加了神秘感。问题在于生成的 IL 而不是生成 IL 的代码。但是，如果您在生成的 IL 中使用了 ARRAY，您将使用 box unbox。昂贵的堆栈/堆和返回操作。

您是否 IL 生成使用 BOX 和 UNBOX 的代码。IL 操作？我会从那里开始。

集合初始化是下一个要看的地方。

只是其他一些快速的想法：标记 LARGE 代码段以希望节省方法调用开销可能会对 JIT 时间产生负面影响。因为编译器必须处理整个方法/成员。如果你有小方法，它会在需要时编译。但你说这不是 JIT 问题。

这些 LARGE 方法可能有大量的堆栈操作？

经常调用的方法中是否有任何大型 Value 对象？例如大于 64 字节的 STRUCT 对象？每次分配和销毁堆栈。

RedGate 性能分析器告诉您什么？ [http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/?utm_source=google&utm_medium=cpc&utm_content=unmet_need&utm_campaign=antsperformanceprofiler&gclid=CIXamdiA6bICFQYcpQodDA0Akw](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/?utm_source=google&utm_medium=cpc&utm_content=unmet_need&utm_campaign=antsperformanceprofiler&gclid=CIXamdiA6bICFQYcpQodDA0Akw)

顺便说一句，我是 IL 的新手。只是抛出一些想法。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:21:20.030

如果我理解正确，您正试图通过发出代码本身并直接调用该方法来消除调用虚拟方法的开销。比如你想调用一个虚函数而不是调用数千个虚函数。

但是，您希望不同的对象具有相同的界面。您只能通过虚拟调用来实现这一点。要么实现接口，要么使用委托，要么发出代码。是的，即使您发出代码，您也需要某种接口来调用该方法，这可能是调用委托或将其转换为 func/action 预定义委托。

如果你想有一些有效的方法来发出代码，我建议使用“LambdaExpression.CompileToMethod”。该方法正在使用方法构建器，而我假设您已经拥有了一个。你可以在互联网上看到很多例子。但是，这也会导致虚拟呼叫。

因此，如果您想在许多对象中具有相同的接口，则除非您将对象放入与其类型有关的不同容器中，否则您不能进行非虚拟调用。这是反对多态的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T19:44:22.420

如果你真的对超级优化你的代码感兴趣，你需要学习 IL！

查看以下链接中的 IL OP 代码...

[http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes(v=vs.95).aspx)

还可以使用 ILDasm 查看您从方法中生成的代码...

虽然我怀疑你将无法优化 IL 并且会更好地用 C++ 编写它并调用非托管代码......

只是对你的一个想法...

祝你好运马修

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T22:29:41.170

您是否试图通过将循环封闭在 try-catch 块中来欺骗 JIT 使用更快的内存？这还具有删除退出条件的优点，因此可以为您节省一些 IL。

```
try
{
    for (int i= 0; ; i++)
    {
        var visitor = new Visitor(array);
        for(int i = 0;; ++i)
            array[i].Accept(visitor);
    }
}
catch (IndexOutOfRangeException)
{ } 
```

它看起来很糟糕，但它利用了 JIT 内存分配怪癖，这可能有助于解决你的 IL 性能问题。

有关这方面的更多信息，请参阅[for 循环的优化。](https://stackoverflow.com/a/11214190/776476)

# python - 全局变量与局部变量的性能

> ID：12590058
> 
> 赞同：31
> 
> 时间：2012-09-25T19:49:48.400
> 
> 标签：python, performance

我对 Python 还是很陌生，我一直在努力提高我的 Python 脚本的性能，所以我在使用和不使用全局变量的情况下对其进行了测试。我对它进行了计时，令我惊讶的是，它在声明全局变量而不是将局部变量传递给函数时运行得更快。这是怎么回事？我认为局部变量的执行速度更快？（我知道全局变量不安全，我仍然很好奇。）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-25T20:00:51.110

## 当地人应该更快

根据[this page on locals and globals](http://www.diveintopython.net/html_processing/locals_and_globals.html)：

> 当一行代码询问变量 x 的值时，Python 将在所有可用的命名空间中搜索该变量，顺序如下：
> 
> *   **本地命名空间**- 特定于当前函数或类方法。如果函数定义了一个局部变量 x，或者有一个参数 x，Python 将使用它并停止搜索。
> *   **全局命名空间**- 特定于当前模块。如果模块定义了一个名为 x 的变量、函数或类，Python 将使用它并停止搜索。
> *   **内置命名空间**- 对所有模块都是全局的。作为最后的手段，Python 将假定 x 是内置函数或变量的名称。

基于此，我假设局部变量通常更快。我的猜测是您所看到的内容与您的脚本有关。

## 当地人更快

这是一个使用局部变量的简单示例，在我的机器上大约需要 0.5 秒（Python 3 中为 0.3）：

```
def func():
    for i in range(10000000):
        x = 5

func() 
```

以及全球版本，大约需要 0.7（Python 3 中为 0.5）：

```
def func():
    global x
    for i in range(1000000):
        x = 5

func() 
```

## `global`对已经是全局的变量做了一些奇怪的事情

有趣的是，这个版本运行时间为 0.8 秒：

```
global x
x = 5
for i in range(10000000):
    x = 5 
```

虽然这在 0.9 中运行：

```
x = 5
for i in range(10000000):
    x = 5 
```

您会注意到，在这两种情况下，`x`都是一个全局变量（因为没有函数），而且它们都比使用局部变量慢。我不知道为什么`global x`在这种情况下声明有帮助。

Python 3 中不会出现这种奇怪现象（两个版本都需要大约 0.6 秒）。

## 更好的优化方法

如果你想优化你的程序，你能做的最好的事情就是[分析它](http://wiki.python.org/moin/PythonSpeed/Profiling)。这将告诉您什么花费的时间最多，因此您可以专注于此。你的过程应该是这样的：

1.  运行您的程序并进行分析。
2.  查看 KCacheGrind 或类似程序中的配置文件以确定哪些函数花费的时间最多。
3.  在这些功能中：
    *   寻找可以缓存函数结果的地方（这样您就不必做太多工作）。
    *   寻找算法改进，例如用封闭形式的函数替换递归函数，或用字典替换列表搜索。
    *   重新配置文件以确保该功能仍然存在问题。
    *   考虑使用[multiprocessing](http://docs.python.org/library/multiprocessing.html#using-a-pool-of-workers)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-25T19:33:39.887

**简单的答案：**

由于 Python 的动态特性，当解释器遇到像 abc 这样的表达式时，它会查找 a（首先尝试本地名称空间，然后是全局名称空间，最后是内置名称空间），然后查找该对象的名称空间以解析名称 b，最后它在该对象的名称空间中查找以解析名称 c。这些查找相当快；对于局部变量，查找速度非常快，因为解释器知道哪些变量是局部变量，并且可以为它们分配内存中的已知位置。

解释器知道函数中的哪些名称是本地的，并在函数调用的内存中为它们分配特定的（已知的）位置。这使得对局部变量的引用比对全局变量和（尤其是）对内置函数的引用要快得多。

**解释相同的代码示例：**

```
>>> glen = len # provides a global reference to a built-in
>>> 
>>> def flocal():
...     name = len
...     for i in range(25):
...         x = name
... 
>>> def fglobal():
...     for i in range(25):
...         x = glen
... 
>>> def fbuiltin():
...     for i in range(25): 
...         x = len
... 
>>> timeit("flocal()", "from __main__ import flocal")
1.743438959121704
>>> timeit("fglobal()", "from __main__ import fglobal")
2.192162036895752
>>> timeit("fbuiltin()", "from __main__ import fbuiltin")
2.259413003921509
>>> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-10-17T20:41:09.337

当 Python 编译一个函数时，该函数在调用它之前就知道其中的变量是局部变量、闭包还是全局变量。

我们有几种在函数中引用变量的方法：

*   全局变量
*   关闭
*   当地人

因此，让我们在几个不同的函数中创建这些类型的变量，以便我们自己查看：

```
global_foo = 'foo'
def globalfoo():
    return global_foo

def makeclosurefoo():
    boundfoo = 'foo'
    def innerfoo():
        return boundfoo
    return innerfoo

closurefoo = makeclosurefoo()

def defaultfoo(foo='foo'):
    return foo

def localfoo():
    foo = 'foo'
    return foo 
```

## 拆解

我们可以看到每个函数都知道在哪里查找变量——它不需要在运行时这样做：

```
>>> import dis
>>> dis.dis(globalfoo)
  2           0 LOAD_GLOBAL              0 (global_foo)
              2 RETURN_VALUE
>>> dis.dis(closurefoo)
  4           0 LOAD_DEREF               0 (boundfoo)
              2 RETURN_VALUE
>>> dis.dis(defaultfoo)
  2           0 LOAD_FAST                0 (foo)
              2 RETURN_VALUE
>>> dis.dis(localfoo)
  2           0 LOAD_CONST               1 ('foo')
              2 STORE_FAST               0 (foo)

  3           4 LOAD_FAST                0 (foo)
              6 RETURN_VALUE 
```

我们可以看到，当前全局的字节码是`LOAD_GLOBAL`，闭包变量是`LOAD_DEREF`，局部的是`LOAD_FAST`。这些是 CPython 的实现细节，可能会因版本而异 - 但能够看到 Python 以不同方式处理每个变量查找是很有用的。

粘贴到解释器中并亲自查看：

```
import dis
dis.dis(globalfoo)
dis.dis(closurefoo)
dis.dis(defaultfoo)
dis.dis(localfoo) 
```

## 测试代码

测试代码（随意在您的系统上测试）：

```
import sys
sys.version
import timeit
min(timeit.repeat(globalfoo))
min(timeit.repeat(closurefoo))
min(timeit.repeat(defaultfoo))
min(timeit.repeat(localfoo)) 
```

## 输出

在 Windows 上，至少在这个版本中，看起来闭包会受到一点惩罚 - 并且使用默认的本地是最快的，因为您不必每次都分配本地：

```
>>> import sys
>>> sys.version
'3.6.1 |Anaconda 4.4.0 (64-bit)| (default, May 11 2017, 13:25:24) [MSC v.1900 64 bit (AMD64)]'
>>> import timeit
>>> min(timeit.repeat(globalfoo))
0.0728403456180331
>>> min(timeit.repeat(closurefoo))
0.07465484920749077
>>> min(timeit.repeat(defaultfoo))
0.06542038103088998
>>> min(timeit.repeat(localfoo))
0.06801849537714588 
```

在 Linux 上：

```
>>> import sys
>>> sys.version
'3.6.4 |Anaconda custom (64-bit)| (default, Mar 13 2018, 01:15:57) \n[GCC 7.2.0]'
>>> import timeit
>>> min(timeit.repeat(globalfoo))
0.08560040907468647
>>> min(timeit.repeat(closurefoo))
0.08592104795388877
>>> min(timeit.repeat(defaultfoo))
0.06587386003229767
>>> min(timeit.repeat(localfoo))
0.06887826602905989 
```

我将添加其他系统，因为我有机会测试它们。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-25T19:58:00.923

您不包括的时间是程序员花费在跟踪使用全局时创建的错误的时间，这些错误会在您的程序的其他地方产生副作用。那个时间比创建和释放局部变量所花费的时间大很多倍，

# dynamics-crm - 如何在 LINQ 中查询 CRM 2011 EntityCollection

> ID：12590062
> 
> 赞同：0
> 
> 时间：2012-09-25T19:49:58.603
> 
> 标签：dynamics-crm, dynamics-crm-2011

我正在尝试使用 LINQ 查询 EntityCollection / PartyList 并且没有运气弄清楚如何去做。

我的查询是：

```
var linqQuery = (from r in gServiceContext.CreateQuery("campaignresponse")
                 select new

                 {
                     activityid = !r.Contains("activityid") ? string.Empty : r["activityid"],
                     CustomerId = !r.Contains("customer") ? string.Empty : r["customer"]
                 }); 
```

CustomerId 是 PartyList / EntityCollection。如果我运行我得到的代码，`Microsoft.Xrm.Sdk.EntityCollection`而不是我的实际数据。关于如何在 LINQ 中查询 EntityCollection 并返回数据的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:18:14.477

`EntityCollection`具有`Entities`包含检索到的数据的属性。

[EntityCollection.Entity](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.entitycollection.entities.aspx)

* * *

**编辑：**

例如：

```
 var result = service.RetrieveMultiple(query).Entities
            .Select(e => 
                new 
                { 
                    firstname = e.Attributes["firstname"],
                    lastname = e.Attributes["lastname"]
                }); 
```

# shell - 如何从文本文件表 UNIX/Shell 脚本中提取特定信息

> ID：12590070
> 
> 赞同：0
> 
> 时间：2012-09-25T19:50:35.233
> 
> 标签：shell, unix, aix

我对 UNIX/Shell 脚本非常陌生，我正在尝试从众多服务器中提取磁盘使用情况。所以我想做的是制作一个运行 df -g > diskusage.txt 的shell脚本来获取下表并从下面提取**数据

```
 Filesystem        Size      Used    Avail    Use%        Mounted on
  /dev/ibm_lv       84.00     56.81     33%     637452     5% /usr/IBM
  /dev/apps_lv      10.00      9.95    **1%**     5        1% /usr/apps
  /dev/upi_lv      110.00     85.85   **22%**   90654      1% /usr/app/usr
  user08:/backup   2000.00   1611.22    20%    177387      1% /backup 
```

根据服务器的不同，有更多的文件系统，但我只想要 /usr/apps/usr,/usr/apps 磁盘使用率，而不管文件系统的数量。（/usr/apps/usr,/usr/apps 将始终位于最后三行）

我很确定有比阅读最后 3 行更简单的方法 -> 忽略最后一行 -> 在每一行上搜索 % 。

如果有更好的方法来提取这些数据，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:04:07.287

```
df -g | awk '/\/usr\/app/ {print $4}' 
```

这为您提供了可用的百分比，但它并没有告诉您哪个与哪个相配。你总是可以在输出中包含挂载点，但是你仍然需要做一些解析才能得到数字，如下所示：

```
 while read avail mount; do 
       echo "$mount has $avail available"
    done < <(df -g | awk '/\/usr\/app/ {print $4, $NF}') 
```

# mysql - 在数据库中保存付款日期和金额

> ID：12590072
> 
> 赞同：-1
> 
> 时间：2012-09-25T19:50:43.743
> 
> 标签：mysql, database-design

我正在为一家小型融资公司开发一个应用程序，他们可以在其中输入付款金额。日期将自动生成。我的问题是，考虑到一些贷款将短至 6 个月，而其他贷款将长达 84 个月，将这些付款保存在 MySQL 中的最佳方法是什么？

我正在考虑一个有 169 列的表：

REC_ID 作为主键、Date1、Amt1、Date2、Amt2 等...

但是，它的效率如何？在 6 个月的贷款中，在这 169 列中，只有 13 列会被使用。

提前感谢您的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:54:22.120

创建一个付款表，其中包含贷款 ID 的外键。

付款表看起来像这样

```
id|loan_id|payment_date|payment_amount 
```

有一个单独的贷款表，看起来像

```
id|loan_amount|loan_length 
```

当您需要了解已经支付了多少笔款项时，请在支付表上运行查询，并使用 loan_id 作为搜索参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:04:33.653

这将严重违反关系设计范式，每个付款和日期可能应该是表中与帐户表具有多对一关系的自己的元组。

```
Accounts (REC_ID, other_stuff, other_stuff) Primary key(REC_ID);
Payments (REC_ID, timestampe, amt) Primary key (REC_ID, timestampe); 
```

还可以考虑使用外键来强制每次付款都存在有效贷款。而且我猜该政策将是级联的，以便删除负载和重命名贷款将传递到付款表。

# asp.net-mvc-3 - 为什么 MvcContrib.FluentHtml 中没有 ActionLink？

> ID：12590073
> 
> 赞同：1
> 
> 时间：2012-09-25T19:50:52.283
> 
> 标签：asp.net-mvc-3, mvccontrib

在仔细阅读 MvcContrib 的[FluentHtml](http://mvccontrib.codeplex.com/wikipage?title=FluentHtml&referringTitle=Documentation)项目的各种帮助程序（并且喜欢它的可组合性）时，我意识到没有选项可以创建用于操作的锚标记，例如`Html.ActionLink(...)`.

我不明白为什么这样的事情还没有实施。我很想做这样的事情：

```
<div>
    @(this.ActionLink("Go Here!", "AwesomeAction", "Awesome")
    .Class("amazing")
    .Attr("awesome", true))
</div> 
```

我知道这更像是一个讨论，我也知道作为 SE 不赞成。有鉴于此，有人可以帮助我了解如何在 FluentHtml 项目中创建这样的东西吗？如果它确实有效，我很乐意对其进行修饰并将其作为补丁提交。

谢谢！欢迎反馈！

# php - PHP 表单处理

> ID：12590075
> 
> 赞同：0
> 
> 时间：2012-09-25T19:50:55.337
> 
> 标签：php, forms, security

我已经构建了一个注册表单，并且我已经实现了 JÖRN ZAEFFERER 的 jQuery Validation 插件，包括使用 CSS 对错误消息进行样式化，我现在想添加一层 PHP 来进行第二次验证，以防 JS 被关闭之后我将通过安全性运行数据：哈希/盐/加密等，然后将数据插入到 mySql 表中，然后编写一个程序以通过电子邮件验证帐户作为注册过程的一部分。

我是自学成才的，所以任何有更多经验的人都可以解释这个过程的最佳实践。我的问题是：PHP应该去哪里，嵌入到html文件中，在表单action =“”提交的单独的php文件中，或者在包含文件中？如果我使用的是盐或哈希或加密函数，那么关于安全性的最佳做法是什么，应该在包含文件中？最后一个问题是：jQuery 验证是浪费时间吗，最好只用 PHP 来做，如果两者都做，PHP 是把自己嵌入到 HTML 文件中，还是把它放在其他地方更好。

这是我第一次这样做，但它只是简单地将输入安全地放入数据库中，通过电子邮件进行验证，然后登录新用户然后去使用该网站。

我很想知道最佳实践，所以如果网络上有任何好的文章，请给我链接。

谢谢

蚂蚁电源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:09:41.307

所以你在这里问了很多不同的问题。我将一一介绍。

> PHP应该去哪里，嵌入在html文件中，在表单action =“”提交的单独的php文件中，或者在包含文件中？

PHP 永远不会直接嵌入到 HTML 文档中。相反，将 PHP 视为动态 HTML 生成器。它*创建*发送到浏览器的 HTML（或 JSON，或其他），但实际上从未发送到浏览器本身。这就是为什么它被称为*服务器端语言*，而不是 JavaScript（也可以是服务器端，但这不相关）。所以你应该可以把你的验证放在你想要的任何地方。它需要在`action`调用表单时发生，所以它需要在发生的任何地方发生。像下面这样的东西应该可以工作：

```
<?php

function validate($data) {
  // Do your validation here, and return an array of errors.
  return $errors;
}

// Run the validation on the data posted from the form.
$errors = validate($_POST);
if (empty($errors)) {
  // The data was valid, save it to the database
  // (be sure to sanitize the data first).
} else {
  // The data was not valid, redirect the user or whatever.
} 
```

> 如果我使用的是盐、散列或加密函数，那么安全方面的最佳做法是什么？它应该在包含文件中吗？

是的，使用加密功能。它不需要位于单独的文件中以确保安全：加密功能提供了安全性，而不是用户看不到文件的事实（阅读：实际安全性，而不是通过混淆的安全性）。**但是，**无论您使用什么盐来散列该值，都应该位于无法通过 Web 访问的单独文件中。如果用户可以看到您的哈希算法和盐，他们就可以开始暴力破解您的数据。

> jQuery 验证是浪费时间吗，用 PHP 来做会更好吗？

jQuery 验证应该更多地被视为 UI/UX 改进而不是实际验证。由于您已经提到的原因，客户端（阅读：JavaScript）验证永远不应取代服务器端（阅读：PHP）验证。但我确实认为它可以为更好的用户体验做出贡献，所以有时两者都值得。

我会做的一件事是使用相同的方法来验证服务器端和客户端，这样您就不必编写两次验证代码。例如，如果您将验证函数放在另一个文件中，您可以使用 AJAX 将表单数据发送给它，然后接收返回的表单错误。

希望这可以帮助！

**更新**：另外，如果您正在做的是登录用户，请查看[`password_compat`](https://github.com/ircmaxell/password_compat)，它将成为 PHP 5.5 中 PHP 标准库的一部分。该库应该以可升级的方式为您解决许多安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:57:42.223

最佳实践是创建一个验证数据的 php 函数或类方法，然后在定义为表单操作的单独文件中调用所述函数/方法。假设这是一个 POST 请求，您应该有一个单独的文件来处理该请求。验证不应该是这个文件的一部分，因为你应该能够在任何你想要的地方使用它。

TLDR：创建一个验证类，并在单独的处理文件中包含和使用它。

# actionscript-3 - 如何使用添加的数据发送事件 - AS3

> ID：12590082
> 
> 赞同：9
> 
> 时间：2012-09-25T19:51:29.240
> 
> 标签：actionscript-3, flash, apache-flex, events, dispatchevent

任何人都可以给我一个简单的例子，说明如何在 actionscript3 中调度一个事件，并附加一个对象，比如

```
dispatchEvent( new Event(GOT_RESULT,result)); 
```

这`result`是我想与事件一起传递的对象。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-25T20:08:48.977

如果您想通过事件传递对象，您应该创建一个自定义事件。代码应该是这样的。

```
public class MyEvent extends Event
{
    public static const GOT_RESULT:String = "gotResult";

    // this is the object you want to pass through your event.
    public var result:Object;

    public function MyEvent(type:String, result:Object, bubbles:Boolean=false, cancelable:Boolean=false)
    {
        super(type, bubbles, cancelable);
        this.result = result;
    }

    // always create a clone() method for events in case you want to redispatch them.
    public override function clone():Event
    {
        return new MyEvent(type, result, bubbles, cancelable);
    }
} 
```

然后你可以像这样使用上面的代码：

```
dispatchEvent(new MyEvent(MyEvent.GOT_RESULT, result)); 
```

你在必要时收听这个事件。

```
addEventListener(MyEvent.GOT_RESULT, myEventHandler);
// more code to follow here...
protected function myEventHandler(event:MyEvent):void
{
    var myResult:Object = event.result; // this is how you use the event's property.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-04T14:26:24.227

这篇文章有点旧，但如果它可以帮助某人，你可以像这样使用 DataEvent 类：

```
dispatchEvent(new DataEvent(YOUR_EVENT_ID, true, false, data)); 
```

[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/DataEvent.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:38:20.640

如果设计得当，您不必将对象传递给事件。
相反，您应该在调度类上创建一个公共 var。

```
public var myObject:Object;

// before you dispatch the event assign the object to your class var
myObject = ....// whatever it is your want to pass
// When you dispatch an event you can do it with already created events or like Tomislav wrote and create a custom class.

// in the call back just use currentTarget
public function myCallBackFunction(event:Event):void{

  // typecast the event target object
  var myClass:myClassThatDispatchedtheEvent = event.currentTarget as myClassThatDispatchedtheEvent 
  trace( myClass.myObject )// the object or var you want from the dispatching class. 
```

# c++ - 为什么 isalpha() 的返回类型是 int 而不是 bool？

> ID：12590083
> 
> 赞同：-4
> 
> 时间：2012-09-25T19:51:31.267
> 
> 标签：c++, c, function

为什么 C 函数的返回类型不像在 C# 等中使用的那样`isalpha()` `int`？`bool`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T19:54:55.777

在 C 标准库函数中广泛使用零表示*假*，非零表示*真。*其中许多函数起源于任何`bool`（或`BOOL`, `_Bool`）类型通常被使用之前。

具体来说，诸如`isalpha`C89 中指定的函数，但直到 C99 才成为布尔类型。

所以期望在 C 标准库函数中看到这一点。您通常会`bool`在 C++ 代码中看到 used。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-25T19:54:20.333

原始**C**中没有**bool**数据类型。

 **检查这个答案的理论：[布尔是本机C类型吗？](https://stackoverflow.com/questions/1608318/is-bool-a-native-c-type)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-25T20:23:50.040

在 1999 年标准之前，C 没有专用的布尔数据类型；在此之前，该语言只是假设非零积分表达式表示 True，而零值积分表达式表示 False。

许多标准库（包括`isalpha`函数）早于数据类型的引入`bool`，因此这些函数返回`int`布尔值。WG14为什么不改C99的接口？有*很多*遗留代码是在 C89 和更早版本下编写的，这样的接口更改会破坏这些代码，这是可以理解的 WG14（负责维护语言标准的委员会）不愿意这样做。哎呀，他们花了 20 多年的时间才摆脱了`gets`图书馆的电话。

至于第二个问题，`<<`C++ 中的输出运算符`char *`与其他指针类型的处理方式不同，并假定它指向 C 样式字符串的开头。如果要`<<`显示实际的指针值，则需要将其强制转换为`void *`（或做类似愚蠢的事情）：

```
char *str = "This is a test";
...
cout << "str = " << str << "; address = " << (void *) str << endl; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-25T19:52:57.540

因为 C 本来就没有内置的 bool 类型。**

# jquery - div高度扩展时如何扩展表格行高

> ID：12590086
> 
> 赞同：0
> 
> 时间：2012-09-25T19:51:40.607
> 
> 标签：jquery, html, html-table, jquery-animate

我有一个 jQuery 脚本，点击时会在表格中展开 div，但是表格行不会随着 div 展开！

非常感谢任何帮助，

这是我的jQuery：

```
<script type="text/javascript">
 $(document).ready(function(){    
$(".expanderHead").click(function(){
    var $exsign = $("#expanderSign");
    $(this).find("#expanderContent").slideToggle();
    $exsign.html($exsign.text() == '+' ? '-': '+');   
    // simplify your if/else into one line using ternary operator
    // if  $exsign.text() == "+" then use "-" else "+"
    });    
});
</script> 
```

这是我的表格代码：

```
echo "<table width='50%' style='border-bottom:1px solid #000000;'>";
echo "<tr>";
echo "<td>";
echo "<div id='page-wrap'>";
echo "<div class='discounted-item freeshipping'>";

echo "<a href='./img/users/" . $row['category'] . "/" . $row['username'] . "/" . $row['filename'] . "' rel='lightbox'><img src=\"./img/users/" . $row['category'] . "/" . $row['username'] . "/" . $row['filename'] . "\" alt=\"\" width='15%' height='80%' /></a>";

    echo "<div class='expanderHead'>";

echo "<div class='reasonbar'><div class='prod-title'>" .$row['fname'] . "</div><div class='reason' style='width: 29%;'><b>". $row['firstname'] . " " . $row['surname'] ."</b></div></div>";

echo "<div id='expanderContent' style='display:none'><div class='reasonbar'><div class='prod-title1' style='width: 70%;'>" . $row['lname'] . "</div><div class='reason1' style='width: 29%;'>Category:<br /> ". $row['category'] . "</div></div></div>";

echo "<div class='reasonbar'><div class='prod-title2' style='width: 70%;'><a href='#'>Click here For more info</a></div><div class='reason2' style='width: 29%;'>Price: &pound;". $row['price'] . "</div></div>";

echo "</td>";
echo "</tr>";
echo "</td>";
echo "</tr>";
echo "</div>";
echo "</table>"; 
```

这是我的 CSS：

```
.discounted-item            { width: 100%; position: relative; cursor: pointer;
                          height: 90px; }
.discounted-item:hover { background-color:#FC6;}

.discounted-item img        { position: absolute; top: 0; left: 0; }
.freeshipping .reasonbar    { background: url(); }
.freeshipping               { background: ; }
.reasonbar                  { padding: 4px 0 4px 175px; overflow: hidden;
                          width: 515px; color: black; font-size: 10px; }
.reason                     { width: 49%; float: right; text-align: right; text-transform: uppercase; 
                          letter-spacing: 2px; padding: 0 5px 0 0; font-size: 10px; }
.reason1                     { float: right; text-align: right; text-transform: uppercase; 
                          letter-spacing: 2px; }
.reason2                     { float: right; text-align: right; text-transform: uppercase; 
                            letter-spacing: 2px; font-family: Tahoma, Geneva, sans-serif; font-style: italic; font-size: 14px;}
.reason3                     { float: right; text-align: right; text-transform: uppercase; 
                          letter-spacing: 2px; font-family: Tahoma, Geneva, sans-serif; font-style: italic; font-size:12px; }

.prod-title                 { width: 49%;  float: left; font: bold 14px Helvetica, Sans-Serif; }
.prod-title1                 { width: 49%; height: 90px; float: left; font: 12px "Lucida Grande", Arial, Sans-Serif;  }
.prod-title2                 { width: 49%; height: 20px; float: left; font: 18px "Lucida Grande", Arial, Sans-Serif; text-overflow:ellipsis; overflow:hidden; white-space:normal;  }
.prod-title2                 { width: 49%; height: 20px; float: left; font: 18px "Lucida Grande", Arial, Sans-Serif; text-overflow:ellipsis; overflow:hidden; white-space:normal;  }

.discount-bar               { width: 59%; height: 70px; background-color:yellow; padding: 10px 0 10px 150px; font: 18px "Lucida Grande", Arial, Sans-Serif; text-overflow:ellipsis; overflow:hidden; white-space:normal;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:05:24.563

据我所知，代码工作正常——div“expanderContent”扩展并改变了它的尺寸。您正在执行哪个浏览器测试？

# opengl - 为访问体素的多个线程获取唯一的缓冲区索引

> ID：12590087
> 
> 赞同：3
> 
> 时间：2012-09-25T19:51:42.437
> 
> 标签：opengl, glsl, voxel, opengl-4, voxels

我正在尝试实现[“用于实时全局照明的基于八叉树的稀疏体素化”](http://www.seas.upenn.edu/~pcozzi/OpenGLInsights/OpenGLInsights-SparseVoxelization.pdf)的一部分。

基本上只是体素化，我已经完成了。

还有“Voxel-fragment list”构造，它基本上是几个预先分配的体素位置和属性的缓冲区。

使用原子计数器和 atomic-comp-swap 或 atomic-add 创建位置缓冲区非常容易，以确保它仅由一个线程写入

```
layout(r32ui, binding = 0) uniform coherent volatile uimage3D     Voxels;
layout(r32ui, binding = 1) uniform coherent volatile uimageBuffer positionBuffer;

void writeVoxels(ivec3 coord)
{
    uint voxelVal = imageAtomicCompSwap(Voxels, coord, 0, 1);

    if(voxelVal == 0)
    {
        int index = 3*int(atomicCounterIncrement(voxelCounter));
        imageStore(positionBuffer, index+0, uvec4(coord.x));
        imageStore(positionBuffer, index+1, uvec4(coord.y));
        imageStore(positionBuffer, index+2, uvec4(coord.z));
    }
} 
```

但是，在多个线程写入相同体素位置的情况下，如何确保所有线程都获得适当的索引？如上所示，正确的索引仅对 1 个线程有效。

像下面的东西

```
#extension GL_NV_shader_atomic_float : require

layout(r32ui, binding = 0) uniform coherent volatile uimage3D     Voxels;
layout(r32ui, binding = 1) uniform coherent volatile uimageBuffer positionBuffer;
layout(r32f,  binding = 2) uniform coherent volatile  imageBuffer colorBuffer;

void writeVoxels(ivec3 coord, vec3 color)
{
    uint voxelVal = imageAtomicAdd(Voxels, coord, 1);

    int index;
    if(voxelVal == 0)   //This ensure that only 1 thread performs the
    {                   //atomicCounterIncrement
        index = 3*int(atomicCounterIncrement(voxelCounter));
        imageStore(positionBuffer, index+0, uvec4(coord.x));
        imageStore(positionBuffer, index+1, uvec4(coord.y));
        imageStore(positionBuffer, index+2, uvec4(coord.z));
    }

    //Need index to be valid here

    imageAtomicAdd(colorBuffer, index+0, color.x);
    imageAtomicAdd(colorBuffer, index+1, color.y);
    imageAtomicAdd(colorBuffer, index+2, color.z);
} 
```

我已经尝试了很多不同的方法。论文中唯一的提示是

> 为了管理（体素片段）列表，我们将下一个可用条目的索引（也是列表中体素片段数量的计数器）存储为另一个缓冲区对象中的单个 32 位值。

听起来它只是描述原子计数器的缓冲区对象。为了保持简单（目前），我没有计算运行平均值（如论文中所述），只是在渲染时将颜色相加并除以访问计数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:19:29.807

我不确定，但我认为您不必使用 imageAtomicAdd 将具有相同坐标的体素存储到同一个体素片段中。这意味着一些不同的体素片段可能具有相同的 3d 坐标。

这是我的代码。

```
const uint VOXEL_FRAGMENT_SIZE = 3;
layout(r32ui, binding = 0) uniform coherent volatile writeonly uimageBuffer voxelFragmentBuffer;
layout(binding=0, offset=0) uniform atomic_uint voxelIndexCounter;
// ...
int voxelIndex = int(atomicCounterIncrement( voxelIndexCounter ))* VOXEL_FRAGMENT_SIZE;
imageStore( voxelFragmentBuffer, voxelIndex+0, uvec4( convIVec3ToR32UI( voxelPosition ) ) );
imageStore( voxelFragmentBuffer, voxelIndex+1, uvec4( convVec4ToRGBA8( vec4( normal*127, 2.0 ) ) ) );
imageStore( voxelFragmentBuffer, voxelIndex+2, uvec4( convVec4ToRGBA8( color*255 ) ) ); 
```

我还没有完成实现，我可能是错的，但我认为具有相同坐标的体素将在 22.5.4 节点细分中的下一个过程中合并。

我想知道您提交此主题后是否有任何进展。

# javascript - Jquery 观察者模式

> ID：12590091
> 
> 赞同：5
> 
> 时间：2012-09-25T19:52:17.383
> 
> 标签：javascript, jquery, observer-pattern

我一直在互联网上寻找在 jquery 中实现观察者模式的示例。

我想要这样

```
observer1.observe(subject);
observer2.observe(subject); 
```

为观察者定义一些自定义事件回调

```
observer1.bind('customEvent', function(contextData) {
  //Some code
});
observer1.bind('anotherCustomEvent', function(contextData) {
  //Some code  
});
observer2.bind('customEvent', function(contextData) {
  //Some code  
}); 
```

然后，以下行将触发两个观察者的 customEvent 回调

```
subject.trigger('customEvent', contextData); 
```

而以下只会在observer1上触发anotherCustomEvent，因为observer2没有绑定该自定义事件

```
subject.trigger('anotherCustomEvent', contextData); 
```

互联网上的指南更笼统：

```
$( document ).on( "topicName" , function () {
  //..perform some behaviour
});

$( document ).trigger( "topicName" ); 
```

[（来自http://addyosmani.com/resources/essentialjsdesignpatterns/book/#observerpatternjquery](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#observerpatternjquery)的示例）我看不出如何使用上面的代码来完成我正在寻找的东西。

要么我必须这样做（如果我像上面的例子一样保持它）：

```
$(document).on("customEvent", function () {
  observer1.trigger("customEvent");
  observer2.trigger("customEvent");
});

$(subject).click(function() { 
  $(document).trigger("customEvent");
}); 
```

或者更好一点：

```
$(subject).click(function() { 
  observer1.trigger("customEvent");
  observer2.trigger("customEvent");
}); 
```

无论哪种方式，我都不得不编辑主题点击回调或文档自定义事件回调，而不是告诉观察者订阅主题。

我是否误解了观察者模式，或者有没有办法实现我正在寻找的东西？

[http://addyosmani.com/resources/essentialjsdesignpatterns/book/#observerpatternjavascript](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#observerpatternjavascript)在那一章的后面稍微提到了发布/订阅模式。这对我来说可能是一种方式，但我错过了示例背后的代码。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T13:29:14.370

从您的评论中：

> 当您必须告诉主题要由选择器触发哪些元素而不是主题具有观察者可以注册到的列表时，我只是看不到这是如何实现的

如果我错了，请纠正我，但您似乎误解了该模式是如何在 jQuery 中实现的。您不会“告诉主题要触发哪些元素”，主题也没有“观察者可以注册的列表”。它是这样工作的：

*   主题/发布者发出/触发某些事件（在您定义的某些情况下）。
*   观察者/订阅者监听某些事件。它保留了它订阅的事件的列表。
*   这都是基于 DOM 事件的，所以受到 DOM 事件模型的限制。

例如，考虑以下 HTML：

```
<div id="div1">div 1</div>
<div id="div2">div 2</div> 
```

让我们让内部 div 触发一个名为`'custom'`. 您定义什么时候应该发生，在这个例子中，这将在单击它们时发生：

```
$('div').on('click', function(e) {
    $(this).trigger('custom');
}); 
```

现在让我们让`document`元素订阅该自定义事件：

```
$(document).on('custom', function(e) {
    console.log('document is handling custom event triggered by ' + e.target.id);
}); 
```

当自定义事件由其中一个 div 触发时，会通知观察者/订阅者并将一条消息记录到控制台。

该示例`document`用作观察者是有原因的：事件在 DOM 树中冒泡，并且只能被触发它的元素的祖先元素捕获。由于`document`是 DOM 树的根，它可以看到所有事件。如果`#div1`是我们的观察者，它只会看到由`#div1`自己触发的事件，而不会看到由`#div2`.

也许这个限制让你感到困惑？

* * *

有一些方法可以规避这个限制，但通常，如果你想`#div1`根据由 触发的事件来做某事`#div2`，你只需从你在`document`元素上设置的回调（或两个 div 最接近的共同祖先）中进行操作。无论如何，您似乎真的想要一个替代方案，所以这里有一个 jQuery 插件形式的替代方案：

```
$.fn.observe = function(eventName, callback) {
    return this.each(function(){
        var el = this;
        $(document).on(eventName, function(){
            callback.apply(el, arguments);
        })
    });
} 
```

你可以像这样使用它：

```
$('#div1').observe('custom', function(e) {
    // do something
}); 
```

现场示例：http: [//jsfiddle.net/JwJsP/1](http://jsfiddle.net/JwJsP/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:02:12.533

可能不是您想要的，但是观察者可以订阅监听事件：

```
 $(document).on('customEvent', '.iObserver', function() {
            console.log('i am observer');
        });

        // add observer
        $('ul li#Observer').addClass('iObserver');

        //remove observer
        $('ul li#Observer').removeClass('iObserver'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-18T15:09:39.433

如果您仍在寻找使用 jQuery 的事件引擎的一些实现，您可以尝试以下代码：

```
//The implementation   
(function($) {

    var o = $({});

    $.each({
        trigger: 'publish',
        on: 'subscribe',
        off: 'unsubscribe'
    }, function(key, val) {
        jQuery[val] = function() {
            o[key].apply(o, arguments);
        };
    });

})(jQuery);

// The way to use it is this:
var somedata = [1, 2, 3, 5, 4, 7, 8];
$.publish('myEvent', somedata); // with data
$.publish('myEvent'); // without data

$.subscribe('myEvent', function(event, data) {
    // handle the event
}); 
```

# android - 当 onResume 被调用时，背景变为空白

> ID：12590092
> 
> 赞同：1
> 
> 时间：2012-09-25T19:52:19.283
> 
> 标签：android, background, dialog, surfaceview, onresume

我有`Dialog`透明活动，它就像一个暂停菜单，所以当显示对话框并按下`Home`按钮时一切正常，但是当我重新打开它时，它`Dialog`显示，除了背景是空白的。游戏是用做的`canvas`，`SurfaceView`所以我不能 `Dialog`在那个屏幕上显示，或者我可以，因为我在尝试，但每次都会出错

所以当我按下返回键时`Dialog`显示完美：

![在此处输入图像描述](../Images/ded76afd08b95af8fb842d60d9a2dc28.png)

但是当我单击主页按钮并长时间单击主页按钮以重新打开应用程序时，我得到了这个：

![在此处输入图像描述](../Images/274648f74531c7c754e6b454eddb9a06.png)

onResume 代码：

```
@Override
    protected void onResume() {
        super.onResume();
        ourSurfaceView.resume();
    }

public void resume() {
            isRunning = true;
            ourThread = new Thread(this);
            ourThread.start();
        } 
```

活动显示`Dialog`：

```
public class ShowPopUp extends Activity {

    Dialog myDialog;
    GameSurface ourSurfaceView;
    Button toMenu;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.showpopupmain);

        myDialog = new Dialog(ShowPopUp.this);
        myDialog.setContentView(R.layout.showpopup);
        myDialog.setTitle("Paused");
        myDialog.setCancelable(true);
        Button button = (Button) myDialog.findViewById(R.id.Btn1);
        toMenu = (Button)myDialog.findViewById(R.id.Btn2);
        toMenu.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                finish();
                Intent menu = new Intent(
                        "com.example.mygame.Menu");
                startActivityForResult(menu, 5);
            }
        });

        button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                myDialog.dismiss();
                finish();
            }
        });
        myDialog.show();
        myDialog.setOnCancelListener(new DialogInterface.OnCancelListener() {

            @Override
            public void onCancel(DialogInterface dialog) {
                ShowPopUp.this.finish();

            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:01:31.683

扩展凯西的评论：您能否尝试关闭活动的 onPause() 内的对话框并查看您的 SurfaceView 是否恢复？如果是这样，您可以使用 onResume() 再次显示对话框（在恢复表面之后）。

您可能应该在您的表面/游戏循环中有一个额外的标志来跟踪暂停/恢复的游戏状态（不仅仅是绘图状态），因此您可以在不推进实际游戏的情况下运行绘图循环（使其可见）。

# javascript - ajax 和 php 之间的交互问题？

> ID：12590093
> 
> 赞同：0
> 
> 时间：2012-09-25T19:52:25.757
> 
> 标签：javascript, html, ajax, forms, post

我正在开发一个表单，它通过 post 将多个用户输入提交到数据库并由 php 处理。为此，我使用了 ajax（我知道 jquery 有时更容易，但我更愿意先掌握 ajax）。

但是，它不能正常工作——即它根本不能工作。我知道当表单不通过 ajax 传递时，php 文件可以正常工作。

这就是我现在所拥有的 - 表单本身：

```
<table border="0" cellpadding="2" cellspacing="5">
                <th colspan="2" align="center">Check Out</th>
                <form name="checkOut" method="post" onSubmit="return(validate(this))" action=""> 
                    <tr><td>Territory Number</td><td><input type="text" name="numberOut" tabindex="1" maxlength="3" size="3" /></td>
                    </tr><tr><td>First Name of Publisher</td><td><input type="text" onKeyUp="showHint(this.value)" name="fName" tabindex="2" maxlength="15"/></td>
                    </tr><tr><td>Last Name of Publisher</td><td><input type="text" onKeyUp="showHint_l(this.value)" name="lName" tabindex="3" maxlength="15" /></td>
                    </tr><tr><td><input type ="checkbox" name="specialC" tabindex="4" value="Yes"/> Special Campaign</td>
                    </tr><tr><td><input type="button" onClick="clearForm()" value="Reset" /></td><td><input type="submit" value="Check Out" /></td>
                </form>
                <p>Suggestions: <span id="txtHint"></span></p>
            </table> 
```

javascript/ajax 处理函数：

```
<script type="text/javascript">
        function validate(form)
        {
            fail = validateTerrNum(document.checkOut.numberOut.value);
            fail += validateFirstName(document.checkOut.fName.value);
            fail += validateLastName(document.checkOut.lName.value);
            if (fail == "")
            {
                //Begin preparing values for submission to server
                var params = "numberOut="+document.getElementsByName("numberOut")[0].value;
                    params+="?fName="+document.getElementsByName("fName")[0].value;
                    params+="?lName="+document.getElementsByName("lName")[0].value;
                var isSc = document.getelementsByName("specialC")[0].checked;
                if(isSc)
                {
                    params+="?specialC=Yes";
                }

                //Send those values to the server
                checkOut(params);
                return true;            
            }           
            else 
            {
                alert(fail);
                return false;
            }
        }
    </script> 
```

最后是通过 post 的 ajax 函数：

```
function checkOut(params)
{
var urlString = params;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("test").innerHTML=xmlhttp.responseText; 
    }
}
//Setup for post submission 
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", params.length);
xmlhttp.open("POST","checkOut.php",true);
xmlhttp.send(urlString);
} 
```

我怀疑我没有正确提交发布请求。我已经让其他 ajax 函数正确地使用此表单，但它是通过 get - 我确实想使用 post，因为它正在更改数据库中的数据。

如果有人对此有所了解，将不胜感激。

编辑：带有通用按钮的新表单：

```
<table border="0" cellpadding="2" cellspacing="5">
                <th colspan="2" align="center">Check Out</th>
                <form name="checkOut" method="post" action=""> 
                    <tr><td>Territory Number</td><td><input type="text" name="numberOut" tabindex="1" maxlength="3" size="3" /></td>
                    </tr><tr><td>First Name of Publisher</td><td><input type="text" onKeyUp="showHint(this.value)" name="fName" tabindex="2" maxlength="15"/></td>
                    </tr><tr><td>Last Name of Publisher</td><td><input type="text" onKeyUp="showHint_l(this.value)" name="lName" tabindex="3" maxlength="15" /></td>
                    </tr><tr><td><input type ="checkbox" name="specialC" tabindex="4" value="Yes"/> Special Campaign</td>
                    </tr><tr><td><input type="button" onClick="clearForm()" value="Reset" /></td><td><input type="button" onClick="return(validate(this))" value="Check Out"/></td>
                </form>
                <p>Suggestions: <span id="txtHint"></span></p>
            </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:58:38.787

如果您通过 ajax 发布数据，则必须取消表单提交，否则表单将提交，这可能会取消您的 ajax 请求。

你也必须打电话`setRequestHeader`后打电话`open`

# c++ - 如何在 CentOS 6 x64 上构建 gcc 4.7.2

> ID：12590096
> 
> 赞同：4
> 
> 时间：2012-09-25T19:52:29.723
> 
> 标签：c++, linux, gcc, centos, centos6

我正在尝试在 CentOS 上构建最新的（在撰写本文时）GCC 版本。我下载并构建了 GMP、MPFR 和 MPC。这些库位于 /usr/local 下（即 usr/local/lib 用于库，/usr/local/include 用于包含）。现在我正在尝试配置 GCC 以使用以下命令进行构建：

```
./configure --with-gmp=/usr/local --with-mpfr=/usr/local --with-mpc=/usr/local 
```

我收到以下错误消息：

```
checking for the correct version of gmp.h... yes
checking for the correct version of mpfr.h... yes
checking for the correct version of mpc.h... yes
checking for the correct version of the gmp/mpfr/mpc libraries... no
configure: error: Building GCC requires GMP 4.2+, MPFR 2.3.1+ and MPC 0.8.0+.
Try the --with-gmp, --with-mpfr and/or --with-mpc options to specify their locations. 
```

可能是什么原因？库是构建的，位置正确，头文件被识别，但库本身不是。我也试过这个：

```
./configure --with-gmp-lib=/usr/local/lib \
--with-mpfr-lib=/usr/local/lib --with-mpc-lib=/usr/local/lib 
```

但结果是一样的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T04:12:23.703

强烈推荐使用 GCC SRC (http://www.gnu.org/software/gsrc/)

您需要先安装 Python 和 bzr。

然后在配置后（gsrc 网页中的步骤），只需在 gsrc 目录中进行这些操作

制作 -C gnu/gcc
制作 -C gnu/gcc 安装

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:14:34.917

谢谢，我调查了自己；问题是在 CentOS 6 中预装了旧版本的 GMP/MPFR/MPC，它们与我新建的库发生冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T18:54:28.657

有人为此编写了一个脚本。它解决了库对这些库的依赖关系以及它们之间的依赖关系的问题。 [http://joelinoff.com/blog/?p=811](http://joelinoff.com/blog/?p=811)

它对我进行了一些小的修改，但生成的 gcc 有古怪的链接路径（它生成的二进制文件仍然在包含旧库的常规系统路径中查找 libstdc++.so。我对此有一个问题：

[如何使用内置 rpath 构建和安装 gcc？](https://stackoverflow.com/questions/13334300/)

# java - 检查 string.length == 0 是否仍然比检查 string == "" 更快？

> ID：12590097
> 
> 赞同：10
> 
> 时间：2012-09-25T19:52:34.263
> 
> 标签：java, .net, string, performance

大约 7 到 8 年前，我从一本编程书中读到，检查`string.length == 0`是检查空字符串的更快方法。我想知道这句话在今天是否仍然适用（或者它是否曾经是真的），因为我个人认为`string == ""`它更直接、更易读。我主要处理高级语言，例如 .NET 和 java。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T20:02:03.903

在 Java 中进行该测试的最佳方法是

```
"".equals(string) 
```

因为这处理了字符串为空的情况。

至于哪个更快，我想答案是没关系。两者都非常快，哪一个实际上最快取决于内部编译器实现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T22:18:50.223

只需使用`string.isEmpty()`.

（我拒绝`"".equals(string)`，因为如果你有一个空值，那可能表明一个应该使程序崩溃的错误，因为它需要修复。我不能容忍空值。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T17:28:23.000

通常，字符串对象存储它们的长度，因此获取和比较整数非常快，并且比 equals() 具有更少的内存访问，在最坏的情况下，您必须检查长度并循环字符。

无论如何，现在字符串的 equals() 方法也应该首先检查长度，因此它应该 - 几乎 - 与检查长度的速度相同。

等于**Java**中的一部分（http://www.docjar.com/html/api/java/lang/String.java.html）：

```
int n = count;
if (n == anotherString.count) {...} 
```

等于**Objective-C**中的一部分(http://www.opensource.apple.com/source/CF/CF-476.15/CFString.c) - NSString 基于 CFString：

```
if (len1 != __CFStrLength2(str2, contents2)) return false; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T19:58:56.587

您需要小心使用`==`来测试字符串是否相等。如果变量字符串没有被保留，那么测试很有可能会失败。

```
String a = "abc";
String b = a.substring(3);
System.out.println("b == \"\": " + (b == "")); // prints false
System.out.println("b.equals(\"\"): " + b.equals("")); // prints true 
```

我会使用`string.length() == 0`or `string.equals("")`。基准测试看哪个更快。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-25T20:06:10.857

用于`"".isEmpty()`检查空字符串。效果很好，并且还为空对象返回“true”。

[String.isEmpty()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#isEmpty%28%29)

.equals()`NullPointerException`如果它为 null，则抛出 a，这会很烦人。

此外，假设这是在 Java API 中，假设它是最快的方法可能是安全的。

# jquery - Jquery UI 选项卡不出现

> ID：12590103
> 
> 赞同：1
> 
> 时间：2012-09-25T19:52:46.007
> 
> 标签：jquery, asp.net, jquery-ui

所以我在使用来自 Jquery UI 的选项卡 UI 时遇到了问题。我看了很多论坛，但没有找到为什么我的标签没有出现。我的 css 看起来不错，并且指向 jquery ui 脚本的链接正在工作。

这是我的代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Home Page - My ASP.NET MVC Application</title>
        <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <link type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/themes/redmond/jquery-ui.css" rel="stylesheet" />

    </head>
    <body class="body">
<script type="text/javascript">
    $(function () {
        $("#tabs").tabs();
    });
    </script>

<div id="tabs">
    <ul>
            <li><a href="#tabs-1">Ce soir</a></li>
            <li><a href="#tabs-2">France 1</a></li>
            <li><a href="#tabs-3">France 0</a></li>
            <li><a href="#tabs-4">France 4</a></li>
            <li><a href="#tabs-5">France 3</a></li>
            <li><a href="#tabs-6">France 2</a></li>
            <li><a href="#tabs-7">TF1</a></li>
    </ul>
    <div id="tabs-1">page 0</div>
    <div id="tabs-2">page 1</div>
    <div id="tabs-3">page 2</div>
    <div id="tabs-4">page 3</div>
    <div id="tabs-5">page 4</div>
    <div id="tabs-6">page 5</div>
    <div id="tabs-7">page 6</div>
</div>
        <footer>

        </footer>

         <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>

        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>

    </body>
</html> 
```

任何想法是错误的？

非常感谢。

纪尧姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T19:58:52.467

你需要把你的脚本块放在你的包含之后

工作小提琴：http: [//jsfiddle.net/BLSully/4ZJns/](http://jsfiddle.net/BLSully/4ZJns/)

原因：`$`未在脚本块当前所在的页面中定义。另一种选择是将您的包含放在顶部附近或`<head>`...中。但在接近末尾理论上应该可以改善 JS 重页面中的页面加载时间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:01:25.210

加载 .js 文件后，将脚本块移动到底部。

# c# - 当元素/属性已知但并非每次都发生时，如何将 XML 映射到类/数据集？

> ID：12590104
> 
> 赞同：0
> 
> 时间：2012-09-25T19:52:51.207
> 
> 标签：c#, xml, dataset

对于一个 C# 项目，我正在查询一个 API，它返回一个类似于以下内容的 XML：

```
<itemlist>
  <item attrib1="Value1" attrib2="Value2"... attrib15="Value15">
    <sometypeinfo1 attrib1="Value1" attrib2="Value2"... attrib15="Value15">
      <subelement>
        <someproperty attrib1="Value1" attrib2="Value2"/>
        <someproperty attrib1="Value1" attrib2="Value2"/>
        <someproperty attrib1="Value1" attrib2="Value2"/>
      </subelement>
    </sometypeinfo1>
    <sometypeinfo2>
      <subelement attrib1="Value1" attrib2="Value2">
        <someproperty>
          <somedescription attrib1="Value1" attrib2="Value2"/>
          <somedescription attrib1="Value1" attrib2="Value2"/>
        </someproperty>
      </subelement>
    </sometypeinfo2>
    <sometypeinfo3 attrib1="Value1" attrib2="Value2"/>
    <sometypeinfo4>
      <someproperty attrib1="Value1" attrib2="Value2"/>
    </sometypeinfo4>
    <sometypeinfo5>
      <someproperty attrib="somevalue"/>
    </sometypeinfo5>
    <somemodifiers>
      <somemodifier attrib1="Value1" attrib2="Value2"/>
      <somemodifier attrib1="Value1" attrib2="Value2"/>
      <somemodifier attrib1="Value1" attrib2="Value2"/>
    </somemodifiers>
    <someflags>
      <someflag attrib="somevalue"/>
      <someflag attrib="somevalue"/>
      <someflag attrib="somevalue"/>
    </someflags>
  </item>
  <item>
  .
  .
  .
  </item>
</itemlist> 
```

它基本上是一个包含约 100 个项目/文件的列表，每个项目都有很多描述、属性等。现在，这并不罕见。我无法将其映射到类或数据集中。例如这一行

```
<sometypeinfo1 attrib1="Value1" attrib2="Value2"... attrib15="Value15"> 
```

一个项目可能错过 attrib1，另一个 attrib2，第三个可能有全部 15 个等。

与“Someflags”相同，一个项目可以有 5 个“someflag”，下一个只有 2 个。等等。每个元素或属性都可以在那里，但不是必须的。所以它们都共享一个元素/属性池，这就是我陷入序列化等问题的地方。

是的，我是新手。但是从我到目前为止所学到的知识来看，模式必须具有所有元素/属性才能正确映射 XML？

唯一想到的是编写另一个工具来收集所有可能的元素等，然后编写一个包含所有内容的类，首先将所有内容设为 NULL，然后只解析 XML，覆盖在实际项目中找到的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:59:55.287

大多数 XML 解析工具将元素的属性表示为一个集合，您可以迭代该集合。

它们也将子元素表示为一个集合。

下面是一些使用我选择的 XML 解析类的示例语法，但 c# 有多个内置选项，您可以在闲暇时探索。

```
 XmlDocument doc = new XmlDocument();
        doc.Load("myXML.xml");
        XmlNode node = doc.SelectSingleNode("//sometypeinfo1");

        foreach (XmlAttribute a in node.Attributes)
        {
            Console.Write(a.Name);
            Console.Write(a.Value);
        } 
```

[这是我在此处使用的有关 XPATH 的进一步文档。](http://msdn.microsoft.com/en-us/library/ms256086.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T23:09:44.840

我们遇到了类似的问题，并使用 XSLT 样式表将原始 XML 的属性转换为新 XML 文档中的元素（将 XSLT 加载到 XslTransform 对象中以转换原始 XML）。然后将新的 XML 文档读入 DataSet 对象。

请参阅 msdn 文章： [Inferring DataSet Relational Structure from XML](http://msdn.microsoft.com/en-us/library/3b4194wc%28v=vs.110%29.aspx) 和 [Inferring Relationships](http://msdn.microsoft.com/en-us/library/ecb1hddt%28v=vs.110%29.aspx)

将上面的 XML 从属性转换为元素的部分 XSLT 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" omit-xml-declaration="no"/>
    <xsl:template match="/">
        <xsl:apply-templates select="/itemlist"/>
    </xsl:template>
    <xsl:template match="itemlist">
        <xsl:element name="itemlist">
            <xsl:apply-templates select="item"/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="item">
        <xsl:element name="item">
            <xsl:element name="attrib1">
                <xsl:value-of select="@attrib1"/>
            </xsl:element>
            <xsl:element name="attrib2">
                <xsl:value-of select="@attrib2"/>
            </xsl:element>
            <xsl:element name="attrib3">
                <xsl:value-of select="@attrib3"/>
            </xsl:element>
            <!-- continue above pattern for all 15 attributes. -->
            <xsl:apply-templates select="sometypeinfo1"/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="sometypeinfo1">
        <xsl:element name="sometypeinfo1">
            <xsl:element name="attrib1">
                <xsl:value-of select="@attrib1"/>
            </xsl:element>
            <xsl:element name="attrib2">
                <xsl:value-of select="@attrib2"/>
            </xsl:element>
            <xsl:element name="attrib3">
                <xsl:value-of select="@attrib3"/>
            </xsl:element>
                <!-- continue above pattern for all 15 attributes. -->
                <xsl:apply-templates select="subelement"/>
            </xsl:element>
        </xsl:element>
    </xsl:template>
    <xsl:template match="subelement">... 
```

# liferay - 将 liferay 与外部内容源一起使用

> ID：12590106
> 
> 赞同：0
> 
> 时间：2012-09-25T19:53:03.110
> 
> 标签：liferay, liferay-6

我想将liferay用作网站布局管理工具，但不使用其cms功能来存储内容。示例：在 liferay 实例（页面、组等）上配置新闻网站结构，但从第三方应用程序公开的 Web 服务中获取新闻。

Liferay 是否支持这种集成，或者我应该选择另一个更适合的解决方案？

谢谢帮助 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:56:29.690

我没有看到使用它的问题。它满足您的要求并且有更多。你留下你不想使用的东西。

还有其他 CMS 集成已经得到证明，例如 Alfresco。Web 服务调用只是另一个原生支持的 SOAP/Rest API 调用。

# javascript - JQuery、CSS 和对话框。将东西插入按钮窗格 div

> ID：12590111
> 
> 赞同：0
> 
> 时间：2012-09-25T19:53:22.733
> 
> 标签：javascript, jquery, css, dialog

我有一个 JQuery 对话框。在按钮窗格区域，我需要插入可点击的文本、一个按钮和一个复选框。我一直在努力弄清楚如何做。

我一直在尝试的最近的事情是这样的：

```
$(".ui-dialog-buttonpane").html("sample.html",{})
$("clickableTextDiv").click(function(){
    alert('test');
}); 
```

这显示了可点击的文本，但它实际上不可点击。我假设我可以轻松地在 html 文件中添加一个按钮/复选框。我想我的问题是：

这是我应该怎么做，还是有更好的方法然后包含一个单独的 html 文件？如果这是这样做的方法，为什么 .click 不起作用？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T19:54:54.760

缺少正确的选择器

```
$("clickableTextDiv").click(function(){ 
```

//

```
Should be $(".clickableTextDiv")  // If it is a class 
```

//

```
Should be $("#clickableTextDiv")  // If it is a id 
```

# php - 如何将多个 SQL 行添加到 PHP 数组

> ID：12590115
> 
> 赞同：0
> 
> 时间：2012-09-25T19:53:37.337
> 
> 标签：php, arrays

我有`$view_data['auth_info']`一个填充了查询行的，效果很好。但是我需要在这个数组中添加一个额外的行。这怎么可能？所有的变量都是唯一的，所以我不必改变相同的定义。

我试过以下：

```
$view_data['auth_info'] = $myFirstSQLRow
array_push($view_data['auth_info'],$mySecondSQLRow); 
```

但它失败了：

```
Message: array_push() [function.array-push]: First argument should be an array 
```

但不是第一个 var`array`还是我误解了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:02:45.647

您正在寻找[`array_merge`](http://php.net/manual/en/function.array-merge.php). 像这样使用它：

```
$view_data['auth_info'] = $myFirstSQLRow;
$view_data['auth_info'] = array_merge($view_data['auth_info'], $mySecondSQLRow); 
```

正如文档中所说，您可能需要进行类型转换（通过放在`(array)`变量前面。）

# chef-infra - 远程复制目录的厨师食谱

> ID：12590117
> 
> 赞同：1
> 
> 时间：2012-09-25T19:53:41.917
> 
> 标签：chef-infra, chef-recipe

我只想运行这个食谱：

```
remote_file "#{ENV['HOMEDRIVE']}/chef/cookbooks" do
  source "http://161.134.22.123/cookbooks"
end 
```

我一直在尝试让厨师命令 Remote_File 使用目录，它给了我

```
Errno::EACCES: Permission denied - C:/chef/cookbooks 
```

Remote_Directory 命令不允许我指定要访问的服务器的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:22:26.367

这并不能完全回答您的问题，但 remote_directory 资源仅应用存储在 /files/[default,etc] 目录中的目录。为了从 http 资源中提取完整目录，我认为您需要构建一个知道如何遍历远程目录的脚本资源。实际的 remote_directory 资源确实有一个有点令人困惑的名称，我认为它是从 remote_file 既拉取 http 资源又拉取食谱文件的时候的产物

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:07:53.220

可能是您正在使用“用户”模式运行命令。尝试使用“root”模式。

# jquery - 在无法滚动的网站上调整图像大小

> ID：12590121
> 
> 赞同：1
> 
> 时间：2012-09-25T19:54:08.943
> 
> 标签：jquery, html, css

我有一个客户端不想滚动的网站，因此页眉和页脚固定在顶部和底部。

问题是内容中的图像必须调整大小以保持相同的比例。我有和例子here

![在此处输入图像描述](../Images/33967a0ca2d776a3e0a4f5e48aef5697.png)

所以图像 1,2 和 3 应该拉伸保持它的比例，而页眉和页脚固定在它们所在的位置。请注意，内部图像之间有 10px 的边距，但外部没有。

关于如何实现这一目标的任何线索？（CSS 或 jQuery 或两者兼有）；

这是一个我已经快速开始帮助你玩的小提琴：http: [//jsfiddle.net/2HJuC/2/](http://jsfiddle.net/2HJuC/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:48:01.130

也许这样的事情可以解决问题（jquery）：

[http://jsfiddle.net/2HJuC/5/](http://jsfiddle.net/2HJuC/5/)

仅调整正确图像的大小。但是如果用户调整窗口大小会发生什么？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T20:02:46.927

尝试将页眉和页脚保持在固定的高度/宽度和绝对位置，并使用快速的 jQuery 调整大小修复，如下所示：

[http://buildinternet.com/2009/07/quick-tip-resizing-images-based-on-browser-window-size/](http://buildinternet.com/2009/07/quick-tip-resizing-images-based-on-browser-window-size/)

不幸的是，我不相信你只使用 CSS 会很幸运，因为网站不会滚动。

# java - 日期操作问题

> ID：12590128
> 
> 赞同：0
> 
> 时间：2012-09-25T19:54:44.083
> 
> 标签：java, oracle, timestamp

我从 Oracle 数据库的开始和结束日期获得 2 个时间戳。它们以这种格式出现`yyyy-MM-dd HH:mm:ss.SSS`

现在我从文本文件中获得另一个时间戳进行比较。它是字符串格式。下面是我为提取所需信息而编写的代码。

```
 DateFormat f = new SimpleDateFormat("EEE MMM dd HH:mm:ss zz yyyy");
    Date date = f.parse("Tue Aug 23 20:00:03 PDT 2011");
    System.out.println("---date----" + f.format(date));
    String originalDate = f.format(date);
    System.out.println("---originalDate----" + originalDate);

    DateFormat f2 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
    String dateParse = f2.format(date);
    System.out.println("---dateParse----"+dateParse); 
```

我得到的输出有点奇怪，而且非常不一致。以下是示例 ---date----Tue Aug 23 20:00:03 PDT 2011 ---originalDate----Tue Aug 23 20:00:03 PDT 2011 ---dateParse----2011-08 -24 08:30:03.000

在上面的输出中，我对 ----dateparse--- 值感兴趣，因为我需要这个值进行比较。现在，如果您看到理想情况下的值是不同的，两者都应该是相同的值。

这里的问题是，如果输出随时区而变化，那么我应该如何根据从数据库中获取的数据在代码中进行比较？

我只需要查看 --dateparse-- 是否位于我从 db 获得的日期范围之间。此代码是否会独立于时区正常工作，或者这里有一些问题。如果日期不同，那么我的比较可能会出错，或者上面 2 个输出的正确方法。

你能告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:05:56.803

请参考类文档并使用构造函数：

[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

```
SimpleDateFormat(String pattern, Locale locale) 
```

要检查您的语言环境，请使用以下代码：

```
Locale.getDefault() 
```

可能这就是你得到这些结果的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:26:14.887

If you add a time zone to your second date format, you'll notice it outputs it using your default locale, as [barbosa](https://stackoverflow.com/a/12590272/1615086) pointed out. For example, on my PC it displays it in British Summer Time, the current time zone in the UK.

```
DateFormat f2 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS zz");
System.out.println("---dateParse----" + f2.format(date)); 
```

Output:

```
---dateParse----2011-08-24 04:00:03.000 BST 
```

If you want to force the output time zone of the date format, you can do this using the [`setTimeZone`](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#setTimeZone%28java.util.TimeZone%29) method:

```
f2.setTimeZone(TimeZone.getTimeZone("America/Los_Angeles")); 
```

The output then becomes:

```
---dateParse----2011-08-23 20:00:03.000 PDT 
```

Just like `Locale`, [`TimeZone`](http://docs.oracle.com/javase/6/docs/api/java/util/TimeZone.html) has a `getDefault` method, if necessary.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:23:07.160

> 我只需要查看 --dateparse-- 是否位于我从 db 获得的日期范围之间。

认为：

1.  `Date`从数据库中检索对象
2.  时区信息嵌入在被解析的文件格式中

然后所有实例`Date`都具有正确的绝对值（自 1970 年 1 月 1 日以来的毫秒数），因此可以正确比较。

那么你应该注意什么？没有时区或区域信息的日期/时间字符串。如果您要解析其中之一，则将使用您的区域设置和时区，这可能与写入数据的时间/地点不同。在这种情况下，检索到`Date`的可能引用了错误的绝对时间。

# python - 如何在 pandas DataFrames 中对多索引列进行切片？

> ID：12590131
> 
> 赞同：3
> 
> 时间：2012-09-25T19:54:51.873
> 
> 标签：python, pandas

我有一个[`DataFrame`](http://pandas.pydata.org/pandas-docs/dev/dsintro.html#dataframe)16 行和 14671872 列的对象。我一生都无法弄清楚如何在任何合理的时间内在具有 24GB RAM 的四核戴尔 T410 上对该阵列进行切片。

我只会使用数组的转置，因为这样**会快得多**，但是我会[`MultiIndex`](http://pandas.pydata.org/pandas-docs/dev/indexing.html#indexing-hierarchical)在列上有一个，而且我还没有在 Pandas 中找到任何文档来展示如何使用`MultiIndex`s 作为列。

我想在 Github 跟踪器上打开一个问题，但我想在这样做之前在这里发布，以防我错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T01:03:36.820

我认为 .xs 可能会做你想做的事。

获取所有小腿 1（即 MultiIndex 的第一级等于 1）。

```
df.xs(1, axis=1, level=0) 
```

如果您还需要通过不同级别的 MultiIndex 进行横截面，这是非常灵活的。

# php - 从加密数据中删除空格

> ID：12590135
> 
> 赞同：2
> 
> 时间：2012-09-25T19:54:56.540
> 
> 标签：php, whitespace, mcrypt, strlen

我有一个解密早期解密数据的功能：

```
public function Decrypt($encrypedText) {
    $key = "The secret key is";
    $decryptedText = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, base64_decode($encrypedText), MCRYPT_MODE_ECB);

    $trimmedData = rtrim($decryptedText, '\0');

    echo strlen($trimmedData);          // 32

    return $trimmedData;
} 
```

如果我在函数中输入“测试”，结果将是“测试”+ 28 个空格。我从有人告诉我在上面的函数中使用“rtrim”来删除空格的提示，但这似乎不起作用（当我检查结果的长度时，它仍然是 32）。

我该怎么做才能删除这些空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:19:56.117

尝试在没有第二个参数的情况下调用[rtrim() 。](http://php.net/manual/en/function.rtrim.php)这将去除大量空白字符，而不仅仅是您指定的 NUL 字节字符。

```
$trimmedData = rtrim($decryptedText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:00:44.523

奇怪， trim() 应该可以工作。试试正则表达式：

```
$string = preg_replace('~\s+$~', '', $string); 
```

# html - 复选框的垂直对齐

> ID：12590136
> 
> 赞同：0
> 
> 时间：2012-09-25T19:55:02.957
> 
> 标签：html, css, vertical-alignment

我有这个 html 代码，我想在它的 span 中垂直对齐复选框：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<html>
    <head>
        <title>asdad</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link href="inner_css/account.css" rel="stylesheet" type="text/css" />

    </head>
    <body class="xxx">
        <div class="fieldWrapper">
            <span class="fieldHeader">C++</span>
            <span class="checkboxOfField"><input style="text-align:center; vertical-align:middle" type="checkbox"></span>
            <div class="fildtablewrapper">
                <table>
                    <tr>
                        <td>
                            0-2
                        </td>
                        <td>
                            2-5
                        </td>
                        <td>
                    5 ומעלה                            
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="radio" name="xxx" value="1"> 
                        </td>
                        <td>
                            <input type="radio" name="xxx" value="2"> 
                        </td>
                        <td>
                            <input type="radio" name="xxx" value="3"> 
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </body>
</html> 
```

这个CSS代码：

```
.xxx{
    direction: rtl;
    text-align: center;
}

.fieldWrapper{
    display: inline-block;
    width: 140px;
    background-color: yellow;
    text-align: center;
}

.fieldHeader{
    display: inline-block;
    width: 100%;
    direction: ltr;
    text-align: center;
}

.checkboxOfField{
    display: inline-block;
    width: 100%;
    background-color: red;
    height: 40px;
}

.fildtablewrapper{
    display: inline-block;
    width: 100%;
    text-align: center;
}

table{
    width: 100%;
}

td{
    width: 33.33%;
} 
```

而且我仍然无法垂直对齐复选框，我已经搜索了我们并且找不到适合我的东西。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:59:20.953

将此添加到您的`.checkboxOfField`样式中：

`line-height: 40px;`

这将使复选框以跨度的 40px 高度为中心

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:06:23.083

尝试在您的 CSS 文件中添加以下内容

```
.checkboxOfField input {
height: 100%;
} 
```

# ios - iOS 5 - 无法将十六进制转义序列（无高字符）转换为 UTF8 编码字符

> ID：12590137
> 
> 赞同：0
> 
> 时间：2012-09-25T19:55:02.753
> 
> 标签：ios, json, ios5, nsjsonserialization

在互联网上搜索了一段时间后，我向您寻求快速帮助。我正在开发一个使用一些 JSon 数据的 iOS 5 应用程序（针对 iPhone）。一切正常，直到服务器端的人决定在 JSON 消息中实现以 base64String 转换的图像。现在，发生了什么事：我能够下载所有的 JSon 消息（下面有一个示例），如果我保留 JSon 字符串并用 JSONlint 解析它，它说消息是好的，所以我很确定消息不是格式错误，但是当我尝试用`NSJSONSerialization`类在 JSon 中解析它时，它给了我一个我从未遇到过的错误。

这是我收到的 JSON 消息：

> {"AuthenticationId":"6e5d3c5c-ce37-49b9-8331-047565181e91", "PropertyBag":[{"Key":"auth_id","Value":"6e5d3c5c-ce37-49b9-8331-047565181e91"},{" Key":"UserInfo","Value":"{\"FirstName\":\"thisIsTheFirstName\",\"LastName\":\"thisIsTheLastName\",\"E_Mail\":null,\"Region\" :4,\"StoreDescription\":\"thisIsAStore\",\"SerializeImage\":\"傉䝎਍ਚ\ u0000ഀ䡉刭\u0000㈀\u0000㈀㈀؈\ u0000ḁ蠿±\ u0000猁䝒b캮\ \ u0000猁䝒䅧䅍\ u0000辱辱ա\ u0000ऀ䡰獙\ u0000쌎\ u0000쌎윁ꡯd؀桔摆嵙홈ᡗ㫯䔔唠婎馶䆹బ⍳昚ᮙ嶵嶵嶬暔숍荁떢镶ഛ䗚ێۍ䋭䨚㑞甒丷쎇绦쟠繬컫뿾﯃츜\uffff꾞\udf57鍁칱凤鹳楠횄枰麄ဪ纽纽輌岍擹䨹ဠ啔쥙㊲\ud832鲦阜鹋꿗ﵧ﷽쓄쬄佌쿬䟛ꫴ猽罴㦯婽⌾螕넎  udd6fcf㦳cf㦳ノ㑎ґ⍳碎丧侨㑎뇱⍉⍵㎘ꐀࠉỸỸࢤ폸ỡỸɔ┲앒풌ỡɹ┰앐성닰밅ᙲ뎰섐뇱성຾밨럱럱럱럱성성성성성성성성성백蓘庐蓘庐祹㿼逓ჴ␐ჴ␐쀫殗⟕䙏ࠏࠏॽ煱䉡ꚧ粦橼⳰䮨银䮨银҄︾厣㢧단ꋠ䋂䋂맡탤맡탤ᔘᨚᳯᔘᨚᳯါی⌣븣藄藄ꂗꂗ곬곬ꂗꂗꂗꂗ곬ꂗ汤殌浭짠쫉팊? 뵐伅誸䄰귣ꯋ땗萡㭻틪惩翎㲞珡എ懒짉빉顁隩혨帱쌁逪᠕☯坃ሒ댓䂮ꫨ噇댱처噇돠ಘ沉文斱처4趼碕婝᝟⸗⏛뮧祈祷聿↲ꃸ紭兑ꃢ䗝费䥺﯅껪왝샊☆⁢靧焮健\ud943圞乌嚃ꗁc襑핂견ⰼ\udaba９d뗳凲丞\ udffb룞뻁皱ᖍ\ udcef昙﫽ꇰㅎ㶝啂견띜抪\ udf1c䁔黩ꔞⲃ뢾앲谙ဓ䓀悘湓⥈췍췍쾫⵹躵ԇ믂 줁軵䛤鲢餷ﲨǀ넳䡴鲢餷ﲨǀ목考ញ㥮饮鰰뉔ﶨ쌥᪢袮ud抠友ꥆ꺘ᓞ뛖骝斐觉䈈阃ᐨ덨\ude4c췦វꀊꀊc⤑槫⼩c 傁腕腕过Ⱶ䛊鋹쬞䈆铯ﶕ䁯鲐싥凜绫◄假퇘러뒬뒶蔯厉ﾪ췌뒰뒶蔯厉ﾪ췰듓뮲巜뭽ኲ... 덠통歳૗阝辽ᗈ趍㧆ዥ\ude1fᇑ嵝䏀៵頮䐷갯伨⭭떧䅄匜折̋ﲹ秐긬읻㦍閅됵ダ읻㦍閅됵ダ〰萉뛡丛䓕2鹃䞗⃡丛䓕2鹃䞗⃉▅Ί〼*⤅⮱劽⢄风⛤璸ȆӁ舆论슚슚쪡䭊ዹ㷮⺚਑볉匘卛季훿儜鑙狂☇뢨굨씼鷰꽬౔㺜ф鸋峡谷ᵝჷׂ趿૞檇畕啎쁕Ꞌ궭徍׍李痻㉸爒ࣶ蔉璢斖਻㶒쫡̋舌㮠钌آፂ簠❴됥⍜䟰䝇쇹셾Ꞌ寮䝇쇹爛寰θ獐矦뢎ꏫ匐荡䊰芈濷붶ᗉ呙뢀ᙎ빋ÿ䠦죥ᤸ嵚\u0000\u0000䕉䑎䊮艠\"}"}]}`

可可抛出的错误是：

> Error Domain=NSCocoaErrorDomain Code=3840“操作无法完成。（Cocoa 错误 3840。）”（无法将十六进制转义序列（无高位字符）转换为 UTF8 编码字符。） UserInfo=0x688cfd0 {NSDebugDescription=Unable to将十六进制转义序列（无高位字符）转换为 UTF8 编码字符。}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:07:40.660

找到了解决方案:)。问题不在于血腥`NSJSonSerialization`班级，而在于服务器端的家伙推出的编码图像。他们声称是 Base64String，但它是一个普通字符串...... *AAAARGH！*
发现了问题，用正确的转换改变了图像，现在它就像一个魅力！

# c# - WPF 图像未加载

> ID：12590141
> 
> 赞同：1
> 
> 时间：2012-09-25T19:55:24.267
> 
> 标签：c#, wpf, image, caching, imagesource

我有一个 WPF 应用程序，它有一个带有图像列表的列表框，然后是滚动容器内的图像。当用户单击列表框中的项目时，它会切换图像源。我正在处理分辨率高达 10k x 10k 的超大分辨率图像。该应用程序可以毫无问题地加载第一张高分辨率图像，您甚至可以切换到分辨率较小的图像。但是，当您尝试加载新的高分辨率图像时，图像会变为空白。但是，当您单击先前加载的第一张高分辨率图像时，它看起来很好。

我认为这是一个内存/缓存问题，但我不确定在加载新图像之前我需要做什么才能从旧图像中释放内存/缓存。

这是我设置源的方式：

```
String fileLocation = ... ;
ImageSourceConverter sc = new ImageSourceConverter();
img_Map.Source = (ImageSource)sc.ConvertFromString(fileLocation); 
```

有任何想法吗？

# c++ - 如何以正确的方式模拟原始输入/向应用程序发送 WM_INPUT 消息？

> ID：12590145
> 
> 赞同：6
> 
> 时间：2012-09-25T19:55:41.313
> 
> 标签：c++, windows, visual-c++, keyboard-events, raw-input

我正在尝试向应用程序发送 WM_INPUT 消息，但遇到了一些我无法解决的障碍。我创建了如下所示的 RAWINPUT 结构：

```
//try sending 'W'
    RAWINPUT raw = {0};
    char c = 'W';
    //header
    raw.header.dwSize = sizeof(raw);
    raw.header.dwType = RIM_TYPEKEYBOARD;
    raw.header.wParam = 0; //(wParam & 0xff =0 => 0)
    raw.header.hDevice = hDevice;

    //data
    raw.data.keyboard.Reserved = 0;
    raw.data.keyboard.Flags = RI_KEY_MAKE;      //Key down
    raw.data.keyboard.MakeCode = static_cast<WORD>(MapVirtualKeyEx(c, MAPVK_VK_TO_VSC, GetKeyboardLayout(0)));
    raw.data.keyboard.Message = WM_KEYDOWN;
    raw.data.keyboard.VKey = VkKeyScanEx(c, GetKeyboardLayout(0));
    raw.data.keyboard.ExtraInformation = 0;         //???

    //Send the message
    SendMessage(hPSWnd, WM_INPUT, 0, (LPARAM)raw/*Raw input handle*/);      //TODO: Handle to raw input 
```

我被困在的地方至少有两个位置：

1.  是否需要将一些特殊的东西传递给`raw.data.keyboard.ExtraInformation`，或者是`GetMessageExtraInfo()`，还是不需要在这里传递任何东西？

2.  WM_INPUT 消息的 LPARAM 参数包含指向 RAWINPUT 结构的句柄，而不是地址或结构本身……如何创建这样的句柄？

我不想使用 SendInput，因为它要求窗口是活动窗口。我已经这样做了，它运行良好，但是当我激活另一个窗口时 - 当然 - 它停止在前一个窗口上工作。

所以我想要实现的是，将输入发送到不需要成为活动的应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T20:26:26.130

All of the [raw input documentation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645600%28v=vs.85%29.aspx) is geared toward how to handle raw messages sent to your application by the system. There's little indication it will work properly if your application sends such messages to another application. The receiving application must [register to receive `WM_INPUT` messages](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645600%28v=vs.85%29.aspx), and most applications don't.

You probably want to use the [Microsoft UI Automation](http://msdn.microsoft.com/en-us/library/windows/desktop/ff486375%28v=vs.85%29.aspx) instead.

But if you want to experiment with `WM_INPUT`...

> The LPARAM-parameter of the WM_INPUT-message contains a handle to a RAWINPUT-structure not an address or the structure itself... How to create such a handle?

This is a very old API that expects you to use handles from one of the handle-based memory managers.

```
HGLOBAL hRaw = ::GlobalAlloc(GHND, sizeof(RAWINPUT));
RAWINPUT *pRaw = reinterpret_cast<RAWINPUT*>(::GlobalLock(hRaw));
// initialize the structure using pRaw
::GlobalUnlock(hRaw);
// use hRaw as the LPARAM 
```

# c# - 为什么水平滚动条在我的网格控件中不起作用？

> ID：12590148
> 
> 赞同：1
> 
> 时间：2012-09-25T19:55:45.930
> 
> 标签：c#, winforms, gridview, devexpress, scrollbar

您好我有一个包含 3 个网格控件的控件，它们是 gridControl1、gridControl2 和 gridControl3，视图是 gridView1、gridView2 和 gridView3。

我有3个按钮，当单击Button1时，gridControl1和gridView1显示；点击Button2，gridControl2和gridView2显示；点击Button3，gridControl3和gridView3显示。

我希望每个网格控件/网格视图也可以显示水平滚动条。因此，我为每个 gridview 提供了以下代码：

```
gridView1.OptionsView.columnAutoWidth = false;
gridView1.ScrollStyle = ScrollStyleFlags.LiveHorzScroll;
gridView1.HorzScrollVisibility = ScrollVisibility.Always; // or ScrollVisibility.Auto doesn't work neither; or remove this line, doesn't work neither 
```

然后我有：

```
this.Controls.Add(this.gridControl1);
this.Controls.Add(this.gridControl2);
this.Controls.Add(this.gridControl3);
this.AutoScroll = true; 
```

我`gridView1.HorzScrollVisibility = ScrollVisibility.Always`可以看到滚动条，但它没有启用，我的列仍然自动调整宽度，所以总宽度不超过网格宽度。将此`gridView1.HorzScrollVisibility`设置为其他值，水平滚动条根本不可见。

我是否需要设置列最小宽度才能使此滚动条正常工作？或者我可能会错过任何东西，因此它不能正常工作？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:02:17.707

我认为您需要做的是将其设置为 false ：

```
gridView1.OptionsView.ColumnAutoWidth = false;
gridView2.OptionsView.ColumnAutoWidth = false;
gridView3.OptionsView.ColumnAutoWidth = false; 
```

# perl - 前面带有 \ 的数字会打印垃圾值

> ID：12590149
> 
> 赞同：-1
> 
> 时间：2012-09-25T19:55:49.317
> 
> 标签：perl, variables, scalar

在数字前加上转义字符 '\' 会产生垃圾值 Ex：

```
$a = \12;
print $a; 
```

此代码给出以下输出

```
SCALAR(0x2001ea8) 
```

当我再次执行程序时，输出会发生变化。

如果当用户给出以零开头的任何输入时我从用户那里获取一个值（数字），我不希望它被解释为八进制数。因此，如果数字以零开头，我想转义零。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T20:04:04.367

[在评论中，OP 解释说他希望用户输入的数字被视为十进制，即使它们有前导零。]

在数字文字（产生数字的代码）中，前导零告诉 Perl 该数字是八进制的。

```
$ perl -E'say 045'
37 
```

但这不适用于数字化（将字符串转换为数字）。

```
# "045" is the same as reading 045 from handle or @ARGV.
$ perl -E'say 0+"045"'
45 
```

所以你不必做任何特别的事情。如果`045`您将其用作数字，则用户输入意味着四十五（不是三十七）。

如果由于某种原因您确实需要摆脱前导零，您可以使用

```
$var =~ s/^0+(?!\z)//; 
```

`(?!\z)`确保`"0"`不会`""`变成.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T19:58:34.277

这不是垃圾值。当 Perl 打印一个引用时，您将得到它所打印的内容。

```
TYPE(ADDRESS) 
```

这是预期的功能。如果你想要一个 \ 在你的字符串中，你需要转义它。

```
$str = "\\12"; 
```

或者正如[Ted Hopp](https://stackoverflow.com/users/535871/ted-hopp)在评论中用字符串文字指出的那样

```
$str = '\12'; 
```

有关详细信息，请参阅[Perl 文档](http://perldoc.perl.org/perlreftut.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T19:57:14.153

在 Perl 中，`\`是引用运算符。它类似于 C 的`&`(address-of)

# php - 无法在自引用列上保留数据

> ID：12590156
> 
> 赞同：1
> 
> 时间：2012-09-25T19:56:19.060
> 
> 标签：php, zend-framework, doctrine-orm

当我想保留对自身进行引用的实体时，我遇到了一个奇怪的问题。

D B：

表`PROJECT`有 Column`PARENT_ID`包含对自身的引用。

模型：

```
/**
 * @OneToOne(targetEntity="Model_Name")
 * @JoinColumn(name="PARENT_ID", referencedColumnName="ID")
 **/ 
```

`protected $_parentId;`

代码：

`$project->setParentId(int);`

设置后`PARENT_ID`我持久化实体，除此之外的所有数据`PARENT_ID`都存储在数据库中。

**编辑**

ID 字段/列

```
/**
 * @Id
 * @Column(type="integer", name="ID")
 * @GeneratedValue(strategy="IDENTITY")
 */
protected $_id;

/**
 * @return int
 */
public function getParentId()
{
    return $this->_parentId;
}

/**
 * @param  int $parentProjectId
 * @return Application_Model_Data_Project $this
 */
public function setParentId($parentId)
{
    $this->_parentId = $parentId;

    return $this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:43:43.910

您可以发布更多代码吗？那部分看起来还不错。

这是一个工作自引用实体的 SSCCE。也许这会有所帮助。

```
/**
 * @Entity @Table(name="messages")
 **/
class Model_Message
{
    /** 
     * @Id @Column(name="message_id",type="integer") @GeneratedValue 
     **/
    protected $id;

    /**
     *@ManyToOne(targetEntity="Model_Message")
     *@JoinColumn(name="parent_id", referencedColumnName="message_id")
     **/
    protected $parentMessage;

    /**
     * @OneToMany(targetEntity="Model_Message", mappedBy="parentMessage")
     **/
    protected $replies = array();

    [...]
} 
```

**编辑**

如果你想用学说保存与另一个对象的关系，你必须保存对象，而不是 id。这意味着您必须设置 Model_Name 对象，而不是变量中标记为 Model_Name (targetEntity) 的 id（整数）。（Doctrine 将在数据库中自动使用 int）。

请参阅上面的 ManyToOne 示例。

```
/**
 * @OneToOne(targetEntity="Model_Name")
 * @JoinColumn(name="PARENT_ID", referencedColumnName="ID")
 **/
protected $_parent;

[...]

/**
 * @param  Model_Name $parentProject
 * @return Application_Model_Data_Project $this
 */
public function setParent($parent)
{
    $this->_parent = $parent;

    return $this;
} 
```

# android - 列表视图中的许多条目的解决方案是什么？

> ID：12590161
> 
> 赞同：0
> 
> 时间：2012-09-25T19:56:55.813
> 
> 标签：android, android-listview

我是 Android 开发的新手。我的列表视图中有大约 500 个条目，每次单击都会打开本地 html 文件。
我是否必须手动编码所有 switch 语句？
我可以匹配列表中项目的索引以打开相应的html文件吗？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:07:41.977

如果您在名称中使用数字命名 html 文件，则可以将这些数字与列表中的位置相匹配。就像，htmlfile001.html 将位于位置 1。然后 listAdapter 中的 getView 从该位置组装名称，并显示文件名，然后 onclick 将文件名发送给查看器，在意图中。

# javascript - 收集正确的 onScroll 数据以触发 AJAX 功能

> ID：12590162
> 
> 赞同：0
> 
> 时间：2012-09-25T19:56:55.853
> 
> 标签：javascript, jquery, ajax, scroll

我在滚动时调用 AJAX 函数：

```
// Collecting scroll info
$('.overthrow').each(function() {

  var self = this;
  var path2root = ".";
  var subcategoryId = $(this).attr('data-subcategoryId');
  var page = 1;

  $(this).bind('scroll', function() { 

    var scrollAmount = $(self).scrollLeft();
    var documentWidth = $(self).data('currentElementPosition') || $(document).width();
    var scrollPercent = (scrollAmount / documentWidth) * 100;

    if (scrollPercent > 80) { 

      page++;

      console.log("process.php?subcategoryId=" + subcategoryId + "&page=" + page);

      // AJAX function for processing JSON
      $.ajax({
        url: "process.php?subcategoryId=" + subcategoryId + "&page=" + page,
        type: "GET",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
          for(i = 0 ; i < data.length; i++) {
            var articleId = data[i].articleResult.articleId;
            var title = data[i].articleResult.title;
            var subhead = data[i].articleResult.subhead;
            var image = data[i].articleResult.image;
            var response = "<td><div class='articleResult'><a href='" + path2root + "/article/article.php?articleId=" + articleId + "'><img src='" + image + "' width='120'/></a><br><h3><a href='" + path2root + "/article/article.php?articleId=" + articleId + "'>" + title.substring(0,25) + "</a></h3></div></td>";

            var appendedData = $(self).find("table tbody tr td:last-child").after(response).fadeIn('slow');
            $(self).data('currentElementPosition', appendedData.position().left);
          };
        }
      });
    };
  });
}); 
```

我的问题是，一旦将第一个响应附加到内容中，并且我开始滚动超过 80% 到新结果中，我滚动的每个像素都会一次又一次地调用相同的 AJAX 函数，而不是等待用户滚动 80% 宽度的新窗口大小。有效地为滚动超过 80% 的每个像素进行 AJAX 调用。

声明是这样`if`的错误路线吗？我是否应该提供某种类型的回调来动态驱动触发 AJAX 函数的整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:39:29.073

另一种方法是保存对由于 AJAX 调用而附加到 DOM 的任何内容的引用，获取其位置，并将滚动位置与该位置进行比较。换句话说，假设在上面的示例中， $(this) 是插入通过 AJAX 返回的所有数据的父容器，您可以执行以下操作：

```
$(this).scroll(function () {
               var scrollAmount = $(this).scrollLeft();
               var documentWidth = $(this).data('currentElementPosition') || $(document).width()
               var scrollPercent = (scrollAmount / documentWidth ) * 100;
                  if (scrollPercent > 80) { 
                      // AJAX function success
                          var appendedData = $(data_returned_from_ajax_call).appendTo($(this))
                          $(this).data('currentElementPosition', appendedData.position().left)
                     };
                  });
} 
```

仅供参考，需要注意的重要一点是 jQuery 的 .offset() 方法将为您提供元素相对于文档的位置，而 .position() 将为您提供相对于其父容器的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:11:12.113

我会使用 jQuery 的[one()](http://api.jquery.com/one/)绑定一次，然后在成功回调中为您的 ajax 重新绑定它（或之后的任何地方）

# database - 数据库设计 - 用户表

> ID：12590163
> 
> 赞同：2
> 
> 时间：2012-09-25T19:56:59.687
> 
> 标签：database

我正在设计一个包含这些表、user_accounts 和 user_info 的数据库。

这是结构。

*USER_ACCOUNTS*

*   用户身份

*   用户密码

*   用户类型

*用户信息*

*   用户身份

*   用户全名

*   用户地址

*   用户电子邮件

*   user_contact_no

现在，我的问题是，这样的设计好吗？有人告诉我将它们合并到一张表中。但不能很好地解释我应该合并它的原因。

有什么建议么？

顺便说一句，我正在为用户身份验证和用户个人信息设计它。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T19:59:43.957

您可以将其设为平面表，因为关系是 1-1（用户在您的 user_info 表中永远不会有超过 1 条记录）。这种表关系不会有任何收获，事实上大多数查询会花费更多时间，因为您必须查看两张表而不是一张。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:27:41.777

我认为合并是更好的选择。两者的行数将保持不变，因此不存在冗余数据的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:59:21.233

您可以将它们合并为一个；这将使它更容易访问。我真的不明白为什么他们需要分开。他们的帐户将保存他们的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T19:59:24.987

从账户信息中拆分用户信息是很常见的，这主要取决于您的整体应用程序。但是，如果您使用两个表，我建议 USER_INFO 表也具有主 ID，例如：

*   用户信息
    *   user_info_id（主键）
    *   user_id（USER_ACCOUNTS 的外键）
    *   ETC

与此主题相关的问题和答案：

[数据库设计：1 表还是 2？](https://stackoverflow.com/questions/5481155/database-design-1-table-or-2)

[MySQL：多张表还是一张多列的表？](https://stackoverflow.com/questions/9774715/mysql-multiple-tables-or-one-table-with-many-columns)

# django - django 中最初的东西是什么？

> ID：12590164
> 
> 赞同：1
> 
> 时间：2012-09-25T19:57:01.887
> 
> 标签：django

我 django，我可以使用“initial”关键字访问 ModelForm 中字段的值。

我不知道为什么，或者它是什么。当我想初始化它时，它只用于访问值吗？有时我不能使用“初始”关键字吗？

我想我问这个是因为'initial'意味着初始化一个值。

显然，在表单上调用“保存”后，我无法更改任何值 - 但这是否意味着在那之前我可以随意使用“初始”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:01:17.563

这些应该有助于：

[https://docs.djangoproject.com/en/dev/ref/forms/fields/#initial](https://docs.djangoproject.com/en/dev/ref/forms/fields/#initial)

[https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)

这是一个粘贴初始字段值的地方，您希望在页面加载时填充这些字段。您可能希望在获取过程中将内容设置为初始状态，而不是在发布过程中弄乱它。

# date - 数据表：对日期范围列进行排序

> ID：12590167
> 
> 赞同：1
> 
> 时间：2012-09-25T19:57:17.397
> 
> 标签：date, sorting, datatables

我有一个带有 aoColumnDefs 的数据表，其中包含：

`{ "sType": "date-range", "aTargets": [0] }`

此列中的日期是格式为“MM/dd/yyyy - MM/dd/yyyy”的字符串。不幸的是，此列当前排序不正确。不是按年、月、日排序，而是按月、日、年排序。

我假设这是一个日期格式问题（因为它是从左到右对日期部分进行排序，假设我的日期是 yyyy/mm/dd）。

有没有办法设置在数据表上对日期进行排序时使用的日期格式？

注意：我知道我可以对隐藏字段进行排序。这给我带来了其他问题，我想知道我是否可以通过其他方式解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:15:41.880

从这里开始：http: [//datatables.net/development/sorting#type_based](http://datatables.net/development/sorting#type_based)

> 要向 DataTables 添加新的排序函数，您需要将函数附加到对象 $.fn.dataTableExt.oSort。例如，以下添加了“string-case”类型的区分大小写的排序函数：

```
jQuery.fn.dataTableExt.oSort['date-range-asc']  = function(x,y) {
    //x = "MM/dd/yyyy - MM/dd/yyyy";
    var regex = /(\d{2}\/\d{2}\/\d{4})/,
        matchesX = regex.exec(x),
        matchesY = regex.exec(y);        

    //for example, only sort on first date..
    x = Date.parse(matchesX[0]);
    y = Date.parse(matchesY[0]);

    return ((x < y) ? -1 : ((x > y) ?  1 : 0));
}; 
```

上面的代码可能被破坏了......但它应该让你走上正轨

**mtmurdock 的解决方案**

将此代码添加到 site.js（或在数据表之后导入的任何位置）：

```
jQuery.extend(jQuery.fn.dataTableExt.oSort, {
    "my-date-range-pre": function (a) {
        var ukDatea = a.split('/');

        var year = $.trim(ukDatea[2].split('-')[0]);
        var month = $.trim(ukDatea[0]);
        var day = $.trim(ukDatea[1]);

        if (month.length == 1)
            month = "0" + month;
        if (day.length == 1)
            day = "0" + day;

        return (year + month + day) * 1;
    },

    "my-date-range-asc": function (a, b) {
        var result = ((a < b) ? -1 : ((a > b) ? 1 : 0));
        return result;
    },

    "my-date-range-desc": function (a, b) {
        var result = ((a < b) ? 1 : ((a > b) ? -1 : 0));
        return result;
    }
}); 
```

然后在你的表定义上设置 aoColumnDefs 像这样：

```
{ "sType": "my-date-range", "aTargets": [0] } 
```

# android - Android 上的“按住”按钮需要使用 onTouchListener 更改状态（自定义 XML 选择器）

> ID：12590169
> 
> 赞同：21
> 
> 时间：2012-09-25T19:57:30.353
> 
> 标签：android, selector, ontouchlistener, onclicklistener

我有一个按钮图形需要具有“按住”功能，所以我没有使用 onClickListener，而是使用 onTouchListener，以便应用程序可以对

```
 MotionEvent.ACTION_DOWN, 
```

和

```
 MotionEvent.ACTION_UP 
```

根据触发这两个事件的速度，我可以在两者之间运行“pressAndHoldHandler”。

无论如何，长话短说：我在同一个应用程序中有许多不需要按住功能的“基本”按钮，因此它们正在使用 onClickListener。

这些按钮中的每一个都已使用自己的 XML 选择器文件以图形方式自定义：

```
<?xml version="1.0" encoding="UTF-8"?>
<selector
    xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:state_enabled="false"
        android:drawable="@drawable/btn_chicken_off" />

    <item
        android:state_enabled="true"
        android:state_pressed="true"
        android:drawable="@drawable/btn_chicken_s3" />

    <item
        android:state_enabled="true"
        android:state_focused="true"
        android:drawable="@drawable/btn_chicken_s2" />

    <item
        android:state_enabled="true"
        android:drawable="@drawable/btn_chicken_off" />

</selector> 
```

所以，这里的问题是：上面的选择器没有被 onTouchListener 访问。只有 onClickListener 会通过它自己的方法的 onClick() 部分引入状态更改，因此这些“按住”按钮永远不会更改状态。对用户来说非常糟糕的反馈。

我目前正在通过执行以下操作在 ACTION_DOWN 和 ACTION_UP 的开关盒内强制执行上述操作：

```
if (action == MotionEvent.ACTION_DOWN) {
    btn_chicken.setBackgroundResource(R.drawable.btn_chicken_s3);
}
else
    if (action == MotionEvent.ACTION_UP) {
        btn_chicken.setBackgroundResource(R.drawable.btn_chicken_off);
    } 
```

但这似乎是一个 hack，它缺少“专注但不紧迫”的阶段。

以前有人绊倒过吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-09-01T06:38:17.677

使用该`view.setPressed()`功能自行模拟按下行为。

您可能希望在收到事件时启用**Pressed**状态，并在收到`ACTION_DOWN`事件时禁用它`ACTION_UP`。

此外，如果用户滑出按钮，最好禁用它。捕获`ACTION_OUTSIDE`事件，如下例所示：

```
@Override
public boolean onTouch(View v, MotionEvent event) {

    switch (event.getAction() & MotionEvent.ACTION_MASK) {

    case MotionEvent.ACTION_DOWN:
        v.setPressed(true);
        // Start action ...
        break;
    case MotionEvent.ACTION_UP:
    case MotionEvent.ACTION_OUTSIDE:
    case MotionEvent.ACTION_CANCEL:
        v.setPressed(false);
        // Stop action ...
        break;
    case MotionEvent.ACTION_POINTER_DOWN:
        break;
    case MotionEvent.ACTION_POINTER_UP:
        break;
    case MotionEvent.ACTION_MOVE:
        break;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T07:45:27.520

确保`false`在 onTouchListener() 函数结束时返回。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T22:32:12.450

您可以只设置按钮 onClickListener 并将其 onClick 方法留空。您的逻辑在 onTouch 内部实现。这样你就会有新闻效果。

PS您不需要选择器中的所有这些状态，您可以简单地使用：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:state_pressed="true" android:drawable="@drawable/IMAGE_PRESSED" />

    <item android:drawable="@drawable/IMAGE" />

</selector> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-19T18:49:38.503

我想到了！只需`view.setSelected()`按如下方式使用：

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    if(event.getAction() == MotionEvent.ACTION_DOWN){
        yourView.setSelected(true);
        ...
        return true;
    }
    else if(event.getAction() == MotionEvent.ACTION_UP){
        yourView.setSelected(false);
        ...
        return true;
    }
    else 
        return false;
} 
```

即使您的视图具有 onTouch 侦听器，这也会使您的选择器工作:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-18T10:20:17.517

更好的解决方案：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_activated="true">
        <bitmap android:src="@drawable/image_selected"/>
    </item>
    <item>
        <bitmap android:src="@drawable/image_not_selected"/>
    </item>
</selector>

@Override
public void onClick(View v) {
    if (v.isActivated())
       v.setActivated(false);
    else
       v.setActivated(true);
} 
```

# jquery - Jquery 翻转问题没有正确显示图像

> ID：12590171
> 
> 赞同：0
> 
> 时间：2012-09-25T19:57:42.617
> 
> 标签：jquery, mouseover, rollover

**我创建这两个代码第一个代码不起作用，显示翻转错误，例如，当我把第一个图标鼠标放在上面时，显示其他图标没有第一个图标，例如 icon_1 和鼠标放在 icon_1_down 上，例如 icon_5_down **

```
<script> 
$(function() {
    var number_menus = 9;
    for (i = 1; i <= number_menus; i++) {
        var p1 = +i;
        $(".wm_" + i).show().css("background-image", "url(imagenes/footer/m/" + i + ".png)");
        $(".wm_" + i).mouseover(function() {
            $(this).css("background-image", "url(imagenes/footer/m/" + i + "_down.png)");
            alert("this_down.png");
        });
        $(".wm_" + i).mouseout(function() {
            $(this).css("background-image", "url(imagenes/footer/m/" + i + ".png)");
        });
    }
});​
</script> 
```

**HTML**

```
 <div id="web_footer_publi">
 <div id="web_footer_marks" class="wm_1"></div> <div
 id="web_footer_marks" class="wm_2"></div> <div id="web_footer_marks"
 class="wm_3"></div> <div id="web_footer_marks" class="wm_4"></div>
 <div id="web_footer_marks" class="wm_5"></div> <div
 id="web_footer_marks" class="wm_6"></div> <div id="web_footer_marks"
 class="wm_7"></div> <div id="web_footer_marks" class="wm_8"></div>
 <div id="web_footer_marks" class="wm_9"></div>
 </div> 
```

**我的第二个代码有效，但是当我查看图标时 - 当显示这些图标时 - 显示延迟，或多或少一秒显示图标**

```
<script>
$(function() {
    for (i = 1; i <= 9; i++) {
        $(".wm_" + i).show(1000).css("background-image", "url(imagenes/footer/m/" + i + ".png)");
    }
});
function footer(id) {
    $(function() {
        $(".wm_" + id).hover(function() {
            $(this).show().css("background-image", "url(imagenes/footer/m/" + id + "_down.png)");
        });
        $(".wm_" + id).mouseout(function() {
            $(this).css("background-image", "url(imagenes/footer/m/" + id + ".png)");
        });
    });
}​
</script> 
```

**HTML**

```
 <div id="web_footer_publi">
 <div id="web_footer_marks" class="wm_1"
 Onmouseover="javascript:footer('1')"></div> <div id="web_footer_marks"
 class="wm_2" Onmouseover="javascript:footer('2')"></div> <div
 id="web_footer_marks" class="wm_3"
 Onmouseover="javascript:footer('3')"></div> <div id="web_footer_marks"
 class="wm_4" Onmouseover="javascript:footer('4')"></div> <div
 id="web_footer_marks" class="wm_5"
 Onmouseover="javascript:footer('5')"></div> <div id="web_footer_marks"
 class="wm_6" Onmouseover="javascript:footer('6')"></div> <div
 id="web_footer_marks" class="wm_7"
 Onmouseover="javascript:footer('7')"></div> <div id="web_footer_marks"
 class="wm_8" Onmouseover="javascript:footer('8')"></div> <div
 id="web_footer_marks" class="wm_9"
 Onmouseover="javascript:footer('9')"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:47:29.980

这应该适合你。您可以在控制台中看到它试图查找图像的位置。[jsFiddle](http://jsfiddle.net/hcTtv/1/)

```
$('#web_footer_publi div').each(function(){
    var itemNum = $(this).attr('class').replace('wm_','');
    $(this).css({'background-image':'url(imagenes/footer/m/' + itemNum   + '.png)'}) 
    $(this).mouseenter(function(){
        $(this).css({'background-image':'url(imagenes/footer/m/' + itemNum  + '_down.png)'})  
    }).mouseleave(function(){
        $(this).css({'background-image':'url(imagenes/footer/m/' + itemNum   + '.png)'})  
    });
})​ 
```

# php - 如何访问数据库到wordpress？

> ID：12590175
> 
> 赞同：-1
> 
> 时间：2012-09-25T19:57:54.917
> 
> 标签：php, wordpress

所有插件都有效，但在我的自定义插件 $wpdb、wp_create_user、wp_insert_user 中不起作用。例如，不起作用

```
$user_id = 1;
$website = 'http://wordpress.org';
wp_insert_user( array ('ID' => $user_id, 'user_url' => $website) ) ; 

global $wpdb;
if(!isset($wpdb)) {
     require_once('../../../wp-config.php');
     //require_once('../../../wp-load.php');
     require_once('../../../wp-includes/wp-db.php');
}
   $insertUser = "INSERT INTO $wpdb->users (user_login, user_pass, user_email, user_url) VALUES ('123', '123',     'rokk@gmail.com', 'lasad.com')";
    $wpdb->query( $insertUser ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:04:53.493

您对用户表的引用不正确。

在您声明 global $wpdb; 试试这个

```
$wpdb->wp_users = 'wp_users' 
```

然后在你的sql中，

不要在查询中使用参考 $wpdb->users，而是使用：

```
$wpdb->wp_users 
```

您可以将其用于任何 wordpress 表，只需确保正确命名表，仔细检查 phpmyadmin 中的表名

但是对于您的情况，请避免执行此插入并使用 wordpress 功能 [http://codex.wordpress.org/Function_Reference/wp_create_user](http://codex.wordpress.org/Function_Reference/wp_create_user) 尝试那里的示例。它包含您在输入新用户之前需要执行的基本检查，例如他们是否已经存在/重复的用户名。并且会自动设置诸如 User_Id 号码之类的东西，并随机化您的密码，使其不会以纯文本形式显示。

# r - 通胀调整价格套餐？

> ID：12590180
> 
> 赞同：25
> 
> 时间：2012-09-25T19:58:43.777
> 
> 标签：r

假设我有一个 data.frame，其中一列包含价格，另一列包含年份：

```
prices <- rnorm(200, mean=10, sd=3)
years <- round(rnorm(200, mean=2006, sd=5))
df <- data.frame(prices, years) 
```

现在假设我想使用消费者价格指数将所有这些价格标准化为 2008 美元。我可以查看转换值并手动进行计算，但我的直觉告诉我，可能有一个包可以自动执行此操作。搜索 r-seek 和 cran 没有发现任何明显的结果。

有人知道吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-25T21:26:35.807

您可以使用 [quantmod](http://cran.us.r-project.org/package=quantmod)包中的函数 方法从[FRED](http://research.stlouisfed.org/fred2/)获取 CPI 数据`FRED``getSymbols`

```
getSymbols("CPIAUCSL", src='FRED') #Consumer Price Index for All Urban Consumers: All Items
#[1] "CPIAUCSL"
tail(CPIAUCSL)
#           CPIAUCSL
#2012-03-01  229.098
#2012-04-01  229.177
#2012-05-01  228.527
#2012-06-01  228.618
#2012-07-01  228.723
#2012-08-01  230.102

# make an `xts` object of prices
set.seed(1)
p <- xts(rnorm(63, mean=10, sd=3), seq(from=as.Date('1950-12-01'), by='years', length.out=63))
colnames(p) <- "price" 
```

BLS的[CPI 通胀计算器](http://www.bls.gov/data/inflation_calculator.htm)

> ...使用给定日历年的平均消费者价格指数...对于当年，使用最新的月度指数值。

（对于这个答案，我将忽略[上述引用](http://data.bls.gov/cpi/cpicalc.htm)的第二部分......）

所以，计算一个年平均值

```
avg.cpi <- apply.yearly(CPIAUCSL, mean) 
```

然后将所有指数水平除以基价以创建转换因子

```
cf <- avg.cpi/as.numeric(avg.cpi['2008']) #using 2008 as the base year
dat <- merge(p, cf, all=FALSE)
dat$adj <- dat[, 1] * dat[, 2]

tail(dat)
#               price  CPIAUCSL       adj
#2006-12-01  8.898336 0.9363693  8.332128
#2007-12-01  6.867596 0.9632483  6.615200
#2008-12-01 11.709159 1.0000000 11.709159
#2009-12-01  9.594836 0.9967933  9.564069
#2010-12-01 17.204853 1.0131453 17.431015
#2011-12-01  9.882280 1.0449769 10.326754 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-26T20:47:38.737

有一个更简单的解决方案来获取不需要使用`quantmod`包的年度 CPI（例如，CPIAUCSL），至少在我的经验中，由于某种原因，它似乎总是存在兼容性问题。

```
require(lubridate) || install.packages("lubridate")
require(dplyr) || install.packages("dplyr")
monthly_cpi <-
  read.table("http://research.stlouisfed.org/fred2/data/CPIAUCSL.txt",
             skip = 53, header = TRUE)
monthly_cpi$cpi_year <- year(monthly_cpi$DATE)
yearly_cpi <- monthly_cpi %.% group_by(cpi_year) %.% summarize(cpi = mean(VALUE)) 
```

然后，要创建相对于去年价格的调整因子：

```
yearly_cpi$adj_factor <- yearly_cpi$cpi/yearly_cpi$cpi[yearly_cpi$cpi_year == 2013] 
```

您必须找出到 有多少​​行`skip`，但话又说回来，这会导致您通过查看实际数据源来实际查看跳过的行，这些数据源恰好具有有用的前导信息。

**可是等等！还有更多！**

感谢@GSee（谁给出了检查答案）注意到有一个`.csv`版本您不需要跳过任何行！使用这个版本，代码是：

```
require(lubridate) || install.packages("lubridate")
require(dplyr) || install.packages("dplyr")
monthly_cpi <-
  read.csv("http://research.stlouisfed.org/fred2/data/CPIAUCSL.csv", header = TRUE)
monthly_cpi$cpi_year <- year(monthly_cpi$DATE)
yearly_cpi <- monthly_cpi %.% group_by(cpi_year) %.% summarize(cpi = mean(VALUE))
yearly_cpi$adj_factor <- yearly_cpi$cpi/yearly_cpi$cpi[yearly_cpi$cpi_year == 2013] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-26T13:34:58.883

使用`priceR`，像这样：

```
set.seed(123)
prices <- rnorm(200, mean=10, sd=3)
years <- round(rnorm(200, mean=2006, sd=5))
df <- data.frame(prices, years)

library(priceR)
adjust_for_inflation(prices, years, "US", to_date = 2008)
# [1]  6.707112  8.102301 16.228195  9.785813 11.795624 17.197669 13.589684  7.210790  6.744690  9.250294 14.267029 11.561430  9.921566 12.007162 10.244619 
```

**笔记**

*   这种方法自动使用来自世界银行的最新 CPI 数据
*   `adjust_for_inflation()`适用于所有国家 - 您可以查看完整列表`show_countries()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-02T20:27:25.050

我认为应该指出的是，GSee 的解决方案在技术上是正确的，但可能不是大多数人在谈论通货膨胀调整时想要的。

以我的经验，大多数人都想知道过去几年购买的物品以今天的美元计算要花多少钱。

根据 GSee 的代码，这会产生：

```
as.numeric(avg.cpi['2008'])/avg.cpi
dat <- merge(p, cf, all=FALSE)
dat$adj <- dat[, 1] * dat[, 2] 
```

# excel - 挑选具有最大日期的工作表

> ID：12590185
> 
> 赞同：0
> 
> 时间：2012-09-25T19:59:05.743
> 
> 标签：excel, vba

我正在尝试从具有最新日期的工作簿中选择一张工作表。每张纸的日期都在相同的空间中，否则它是空白或文本，因此不应评估为大于我认为的整数或日期格式的值。一旦我找到该表，我想获取特定数据并使用它。我的问题是选择正确的工作表。这是代码：

```
Dim wksht As Worksheet
Dim maxsheet As Worksheet
Dim currentdate as Integer
Dim maxdate as Integer

'go through each worksheet. compare the value of current date extracted from each sheet
'to maxdate. If currentdate > maxdate maxdate = currentdate.
'remember the worksheet for maxdate as maxsheet.

maxdate = 0
For Each wksht In ActiveWorkbook.Worksheets
    With wksht
        currentdate = wksht.Range("B1").Value
        If currentdate > maxdate Then
            maxsheet = wksht
            maxdate = currentdate
        End If
    End With
Next wksht 
```

到底是怎么回事？我得到的错误是“'91'：对象变量或未设置块变量。” 我不太了解帮助部分或如何修复它。

再次查看代码，我预见到另一个问题，一旦我存储了工作表，就可以使用工作表。我可以只使用 maxsheet.select 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:04:57.707

两件事情：

1.  您正在初始化`currentdate`，并且`maxdate`作为`integer`; 使用`date`数据类型。

2.  你有`maxsheet = wksht`，什么时候应该`set maxsheet = wksht`。

至于您的其他问题，是的，您可以使用`maxsheet.select`, 指定一个范围（`maxsheet.range("B4")`例如），具体取决于您需要检索的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:08:27.490

循环逻辑对我来说看起来不错。你是正确的`With wksht`/`End With`没有被使用。要使用，它将是：

```
For Each wksht In ActiveWorkbook.Worksheets
    With wksht
        currentdate = .Range("B1").Value ` <~~~~ This guy right here
        If currentdate > maxdate Then
            maxsheet = wksht
            maxdate = currentdate
        End If
    End With
Next wksht 
```

现在，在不了解您的工作表的情况下，我不确定我能否具体回答您的问题，但是，我会将逻辑重做如下：

## [未经测试]

```
Dim currentdate as Date
Dim maxdate as Date
For Each wksht In ActiveWorkbook.Worksheets
    if IsDate(wksht.Range("B1").Value) then    
        currentdate = CDate(wksht.Range("B1").Value)
        If currentdate > maxdate Then
            set maxsheet = wksht
            maxdate = currentdate
        End If
    end if
Next wksht 
```

[http://p2p.wrox.com/access-vba/11341-convert-text-date-time-access.html](http://p2p.wrox.com/access-vba/11341-convert-text-date-time-access.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:13:16.603

如果您将您的`currentdate`和`maxdate`变量更改为`date`type 并更改`maxsheet`为`string`type，然后将行更改为 read `maxsheet = wksht.name`，您将捕获页面的名称。然后您可以使用 参考该页面`Worksheets(maxsheet)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T22:10:01.737

```
Dim maxdate as Date
Dim wksht as Worksheet
Dim currentdate as Date
dim maxsheet as string

maxdate = 0
For Each wksht In ActiveWorkbook.Worksheets
    If IsDate(wksht.Range("B1").Value) Then
        currentdate = CDate(wksht.Range("B1").Value)
        If currentdate > maxdate Then
            maxsheet = wksht.Name

            maxdate = currentdate
        End If
    End If
Next wksht 
```

感谢您的所有帮助。这是工作代码

# javascript - 我可以在不影响下面所有模块的情况下切换浮动模块吗？

> ID：12590186
> 
> 赞同：1
> 
> 时间：2012-09-25T19:59:06.407
> 
> 标签：javascript, jquery, css, slidetoggle

通过点击功能激活隐藏内容的四个模块。只需单击图像或 lorem 段落，您就会看到隐藏的内容。

[http://codepen.io/anon/pen/Gvcxd](http://codepen.io/anon/pen/Gvcxd)

最终，这是为了响应式设计。因此，列的数量将根据视口大小以及每个模块与媒体查询定义的距离而变化。

我想修改这个脚本，以便另一列上的模块不会移动。换句话说，当您单击“ONE”时，唯一移动的模块是“THREE”，因为它在下方。“二”和“四”应该保持不变。

以下是它的简单外观：

```
1 2         ( <---This is a faux-row, since it's not coded to be a row)
3 4 
```

当我点击 2 的切换按钮时，它看起来像这样（H 表示隐藏内容）：

```
1 2
  H
3 4 
```

3 已被推下，这不应该发生。相反，我希望它是这样的：

```
1 2
3 H
  4 
```

是否可以具有此切换脚本功能，以便单击功能仅影响其下方的人造列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:17:13.370

您可以使用 z-index 执行此操作，因为您基本上只是希望文章在其下方元素的顶部向下滑动。

使用您在上面列出的基本模式，我整理了一个简短的示例。您必须对其进行一些调整以完全适应您正在做的事情，但它展示了这个概念。

**HTML**

```
<div id="wrapper">
    <div id="one" class="main-block">ONE
        <div class="article">blah blah blah</div>
    </div>
    <div id="two" class="main-block">TWO
        <div class="article">blah blah blah</div>
    </div>
    <div id="three" class="main-block">THREE
        <div class="article">blah blah blah</div>
    </div>
    <div id="four" class="main-block">FOUR
        <div class="article">blah blah blah</div>
    </div>
    <div id="five" class="main-block">FIVE
        <div class="article">blah blah blah</div>
    </div>
    <div id="six" class="main-block">SIX
        <div class="article">blah blah blah</div>
    </div>
</div> 
```

**CSS**

```
.main-block {
    position: relative;
    float: left;
    z-index: 1;
    height: 50px;
    width: 75px;
}
.article {
    position: absolute;
    width: 50px;
    z-index: 2;
}
#wrapper {
    position: relative;  
    width: 150px;    
} 
```

**jQuery**

```
$('.article').hide();

$('.main-block').click(function() {
    $(this).children('.article').slideToggle('slow');
}); 
```

[你也可以在这个jsfiddle](http://jsfiddle.net/f42hj/)上玩它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:04:42.507

如果我理解正确，您可以切换`visiblity: hidden`而不是使用`display: none`，因此该元素仍将位于 DOM 等中，但将是完全透明的：

[https://developer.mozilla.org/en-US/docs/CSS/visibility](https://developer.mozilla.org/en-US/docs/CSS/visibility)

# java - 嵌入式码头。未配置 JSP

> ID：12590192
> 
> 赞同：2
> 
> 时间：2012-09-25T19:59:21.290
> 
> 标签：java, eclipse, jsp, jetty, embedded-jetty

我在 Eclipse 中编写了一个连接我的文件 Calculator.war 的应用程序。

```
import java.util.Scanner; 
import org.eclipse.jetty.server.*;
import org.eclipse.jetty.webapp.WebAppContext;

public class HelloWorld{
    public static void main(String[] args) throws Exception {
        Server server = new Server(1490);

        WebAppContext webapp = new WebAppContext();
        webapp.setContextPath("/");
        webapp.setWar("D:/Calculator.war");
        server.setHandler(webapp);
        server.start();

        Scanner console = new Scanner(System.in);
        while(!console.nextLine().equals("stop"));
        console.close();
        server.stop();
    }
} 
```

如果我在浏览器链接 localhost:1490 中打开，我会收到一条错误消息：“JSP 未配置并且关于 /lib/jsp 的消息”如果我写 localhost:1490/ServletCalculator 一切正常。

我将 JAR 连接到项目 jetty-all-8.1.7.v20120910.jar 和 servlet-api-3.0.jar。然后我尝试从 /lib/jsp 连接 jar，但没有成功。我不使用 MAVEN 是否有可能解决这个问题？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-16T12:11:01.050

在 Jetty 中启用 JSP 支持是一项复杂的工作。必须执行多个步骤。最后，我成功了，我在本[教程中的](http://zetcode.com/java/jetty/embedded/)*启用 JavaServer Pages*标题 下记录了整个过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:07:28.083

这是我的 web.xml。但是尽管没有关于 index.jsp 的信息，但它通过地址 localhost:1490/ 加载

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
        <servlet-name>ServletCalculator</servlet-name>
        <servlet-class>main_pack.ServletCalculator</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ServletCalculator</servlet-name>
        <url-pattern>/ServletCalculator</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

# swt - SWT Browser XULRUNNER 10：如何启用 javascript 访问系统剪贴板

> ID：12590201
> 
> 赞同：3
> 
> 时间：2012-09-25T20:00:17.853
> 
> 标签：swt, eclipse-rcp, ckeditor, xulrunner

我在 Eclipse 3.8 中使用基于 XULRUNNER 10.0 的 SWT 浏览器。

我想配置嵌入式浏览器以启用通过 javascript 访问系统剪贴板。

在嵌入式浏览器上运行的 Web 应用程序中，我使用 CKeditor 3，并且我想使用复制/剪切/粘贴功能。

我不能使用 JavaXPCOM 接口，因为不支持 XULRunner 10.0 版。

我怎样才能以编程方式甚至通过配置文件来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T12:39:49.637

您必须为 xulrunner 引擎设置某些首选项。

首先，您必须访问 xulrunner 的 prefs.js 文件。这可以通过以下代码片段完成：

```
Class<?> loadClass = Activator.getDefault().getClass()
        .getClassLoader()
        .loadClass("org.eclipse.swt.browser.MozillaDelegate");
Method declaredMethod = loadClass
        .getDeclaredMethod("getProfilePath");
declaredMethod.setAccessible(true);
String profilePath = (String) declaredMethod.invoke(null);
File userPrefs = new File(profilePath + File.separator + "prefs.js")) 
```

在此文件中，您必须设置以下键值：

```
capability.policy.policynames, allowclipboard
capability.policy.allowclipboard.Clipboard.cutcopy,allAccess
capability.policy.allowclipboard.Clipboard.paste,allAccess
capability.policy.allowclipboard.sites,file:// 
```

另请参阅[http://kb.mozillazine.org/Granting_JavaScript_access_to_the_clipboard](http://kb.mozillazine.org/Granting_JavaScript_access_to_the_clipboard)

注意：这仅在您的网站是本地网站时才有效。否则，您必须将域添加到`capability.policy.allowclipboard.sites`密钥中。

# macos - 在 OSX 上设置套接字选项

> ID：12590202
> 
> 赞同：9
> 
> 时间：2012-09-25T20:00:19.150
> 
> 标签：macos, sockets, haskell

我正在尝试在使用`Network.Socket`模块构造的套接字上设置接收超时。这是一个代码片段：

```
import Network.Socket

host = "127.0.0.1"
port = PortNumber 3000

main = do
  addrinfos <- getAddrInfo Nothing (Just host) (Just port)
  let serveraddr = head addrinfos
  sock <- socket (addrFamily serveraddr) Stream defaultProtocol
  setSocketOption sock RecvTimeOut 120000000
  connect sock (addrAddress serveraddr)
  msg <- recv sock 1024
  putStrLn msg
  sClose sock 
```

该`setSocketOption`行引发异常：

```
*** Exception: setSocketOption: invalid argument (Invalid argument) 
```

`setSocketOption`仅接受`Int`设置参数，但并非所有套接字选项都需要`Int`. 具体来说`RecvTimeOut`，`SendTimeOut`期待一个`struct timeval`. 还有另一种方法可以从haskell设置这些选项吗？

我在 OSX 10.8.1 上运行 GHC 7.4.2

**编辑：**

`Network.Socket.Options`似乎是这里最好的解决方案，并且让它在 OSX 上编译结果只需要一个很小的拉取请求。从 0.2.0.1 版开始，[network-socket-options](http://hackage.haskell.org/package/network-socket-options-0.2.0.1)现在可以在 OSX 上编译。

**编辑2：** 没有运气`Network.Socket.Options`。该`setRecvTimeout`功能似乎对 OSX 没有任何影响。我最终使用`timeout`from the `System.Timeout`package 作为解决方法。

```
msg <- timeout 120000000 $ recv sock 1024 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:26:36.850

我从这里阅读了有关 Haskell 和结构定义的信息：http: [//therning.org/magnus/archives/315](http://therning.org/magnus/archives/315) 。来自 MSDN 的 struct timeval 定义在这里（它在 GNU 和可能在 OSX 上的结构相同）：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms740560(v=vs.85)。 aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740560(v=vs.85).aspx)

时间 C 标头：

```
...
typedef struct timeval {
    long tv_sec;
    long tv_usec;
} timeval;
.... 
```

似乎您需要在 Haskell 中定义某种结构构造函数。或者像这样完全绑定到时间标头（取自[http://hackage.haskell.org/packages/archive/bindings-common/0.1.4/doc/html/src/CTypes.html](http://hackage.haskell.org/packages/archive/bindings-common/0.1.4/doc/html/src/CTypes.html)）：

```
 module CTypes where
import Foreign
import Foreign.C

-- time.h

data Tm = Tm {
    tm'sec,
    tm'min,
    tm'hour,
    tm'mday,
    tm'mon,
    tm'year,
    tm'wday,
    tm'yday,
    tm'isdst :: CInt
   }

instance Storable Tm where
    sizeOf _ = fromIntegral size_of_tm
    alignment = sizeOf
    peek p =
        with 0 $ \p1 -> with 0 $ \p2 -> with 0 $ \p3 ->
        with 0 $ \p4 -> with 0 $ \p5 -> with 0 $ \p6 ->
        with 0 $ \p7 -> with 0 $ \p8 -> with 0 $ \p9 ->
        c2hs_tm p p1 p2 p3 p4 p5 p6 p7 p8 p9 >>
        peek p1 >>= \v1 -> peek p2 >>= \v2 -> peek p3 >>= \v3 ->
        peek p4 >>= \v4 -> peek p5 >>= \v5 -> peek p6 >>= \v6 ->
        peek p7 >>= \v7 -> peek p8 >>= \v8 -> peek p9 >>= \v9 ->
        return $ Tm v1 v2 v3 v4 v5 v6 v7 v8 v9
    poke p (Tm v1 v2 v3 v4 v5 v6 v7 v8 v9) =
        hs2c_tm p v1 v2 v3 v4 v5 v6 v7 v8 v9

foreign import ccall size_of_tm :: CInt

foreign import ccall hs2c_tm
    :: Ptr Tm -> CInt -> CInt -> CInt -> CInt ->
       CInt -> CInt -> CInt -> CInt -> CInt -> IO ()

foreign import ccall c2hs_tm
    :: Ptr Tm -> Ptr CInt -> Ptr CInt -> Ptr CInt -> Ptr CInt ->
       Ptr CInt -> Ptr CInt -> Ptr CInt -> Ptr CInt ->
       Ptr CInt -> IO ()

-- sys/time.h

data Timeval = Timeval {timeval'tv_sec, timeval'tv_usec :: CLong}

instance Storable Timeval where

    sizeOf _ = fromIntegral size_of_timeval

    alignment = sizeOf

    peek p =
        with 0 $ \p1 ->
        with 0 $ \p2 ->

        c2hs_timeval p p1 p2 >>

        peek p1 >>= \v1 ->
        peek p2 >>= \v2 ->

        return $ Timeval {timeval'tv_sec = v1, timeval'tv_usec = v2}

    poke p v = hs2c_timeval p (timeval'tv_sec v) (timeval'tv_usec v)

foreign import ccall "size_of_timeval" size_of_timeval
    :: CInt

foreign import ccall "hs2c_timeval" hs2c_timeval
    :: Ptr Timeval -> CLong -> CLong -> IO ()

foreign import ccall "c2hs_timeval" c2hs_timeval
    :: Ptr Timeval -> Ptr CLong -> Ptr CLong -> IO () 
```

精简为必要的版本将是：

```
module CTypes where
import Foreign
import Foreign.C

-- sys/time.h

data Timeval = Timeval {timeval'tv_sec, timeval'tv_usec :: CLong} 
```

然后，您应该能够通过以下方式初始化 timeval 结构：

```
timeval <- Timeval { tv_sec=120 , tv_usec=0 } 
```

我希望这会有所帮助...

# javascript - 如何检测 JavaScript 整数是否更接近另一个整数？

> ID：12590204
> 
> 赞同：-1
> 
> 时间：2012-09-25T20:00:26.270
> 
> 标签：javascript

在 JavaScript 中，我可能会生成一个随机数，可能是 3,123、3,001 或 2790 等。哪种 JavaScript 方法将帮助我返回一个**目标整数**，因为这些值......

3,123、3,001 或 2790 更接近 3000，而不是 4000、2000 或 1000。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:06:30.330

你可以对它们进行排序：

```
var numbers = [3123, 3001, 2790, 4000, 2000, 1000];
var target = 3000;
var closest = numbers.sort(function(a, b) {
  var a = Math.abs(a - target);
  var b = Math.abs(b - target);

  return a < b ? -1 : (a > b ? 1 : 0);
}); 
```

`closest`包含按与 的距离排序的数字`3000`。

或者你可以使用一个长的单线：

```
var sorted = numbers.map(function(value, index) {
  return [Math.abs(value - 3000), index];
}).sort().map(function(value, index) {
  return numbers[value[1]];
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:01:54.853

尝试：

```
var rand_num = Math.floor(Math.random() * 10000);
Math.round((rand_num) / 1000) * 1000; 
```

如果`rand_num`是 3123、3001 或 2790，它将分别减少到 3.123、3.001 和 2.729，四舍五入到 3.0 并乘以成为 3000。

# jquery - jquery mobile页脚中的图片库

> ID：12590205
> 
> 赞同：0
> 
> 时间：2012-09-25T20:00:26.773
> 
> 标签：jquery, jquery-ui, jquery-mobile

我正在寻找一个像[http://tympanus.net/codrops/2011/09/12/elastislide-responsive-carousel/](http://tympanus.net/codrops/2011/09/12/elastislide-responsive-carousel/)这样的 jquery 插件，它显示图像库中照片总数中的至少 3 张图像，并允许当用户按下按钮时将显示其余内容。这个插件运行良好，但我的要求是仪表板看起来有点像，在它下面会有一个页脚，这个图片库将显示在上面。

有谁知道这样的插件。如果我不使用 jquery mobile，这个插件可以正常工作，但是当我将它放在 jquery mobile 的页脚中时，它会垂直拉伸到底部而不是水平拉伸。

这就是我需要的

[！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！]

标题

[！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！]

带有图标的仪表板

[！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！]

带图像滑块的页脚

[！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:44:25.370

请看看这个插件[http://www.thomaslanciaux.pro/jquery/jquery_carousel.htm](http://www.thomaslanciaux.pro/jquery/jquery_carousel.htm)

试试这个[http://cdn.digicrafts.c​​om.hk/u/163440/components/js/JSMobilePhotoAlbum/index.html](http://cdn.digicrafts.com.hk/u/163440/components/js/JSMobilePhotoAlbum/index.html)

这里三个手机相册插件[5-jquery-mobile-gallery-plugins](http://www.jquery4u.com/mobile/5-jquery-mobile-gallery-plugins/#.UGQc4U0xqrY)

# asp.net-mvc-3 - 部分视图控件的单独操作方法

> ID：12590211
> 
> 赞同：1
> 
> 时间：2012-09-25T20:00:56.117
> 
> 标签：asp.net-mvc-3, partial-views

在我的 asp.net-mvc3 项目中，我在页面上使用了部分视图。该部分视图是可重复使用的，并将显示在多个页面上。部分视图有输入控件，我可以将数据放入其中。页面上还有其他特定于页面的控件。局部视图位于页面表单内部。当在局部视图控件和其他页面特定控件中输入数据时，单个请求将提交给控制器动作方法。

由于部分视图控件是可重复使用的，它将显示在多个页面上。我想为部分视图设置一个操作，与页面控制器操作分开，当整个表单提交时将调用该操作。基本上不处理将出现部分视图的每个页面控制器操作中的数据。

有什么可能的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:48:56.767

我不确定我是否真的理解您的要求，但我认为您正在寻找的概念被称为“儿童行动”。

这实质上让 PartialView 拥有自己的操作方法，这意味着渲染子操作的主视图根本不需要关心部分视图所需的模型 - 其逻辑包含在子操作中。

但是您可能需要使用 Google Child Actions 并阅读它们，看看它们是否真的会做您需要他们做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:17:50.513

感谢@StanK 提供了查看的方向，解决方案似乎一点也不难。Html.Action 或 Html.RenderAction 正是我需要的。

这是示例：

将插入部分视图的页面表单

```
@using (Html.BeginForm("CreateProduct", "Home"))
{
    Product code: <input type="text" name="ProductCode" /><br />
    ....
    .... 
    <!-- partial view control -->
    @Html.Action("Calendar", "Calendar")
    ....
    <input type="submit" value="Create" />
} 
```

PartialView.cshtml（控制html视图）

```
Date: <input type="text" name="CreateDate" /> 
```

域对象

```
 public class MyCalendar
 { 
    public DateTime CreateDate { get; set; }
 } 
```

日历控制器

```
public class CalendarController : Controller
{

    [ChildActionOnly]
    public ActionResult Calendar(MyCalendar cal)
    {
        // Do something with data

        return PartialView();
    }
} 
```

# sql-server-2008 - 如何从报表生成器中具有最大值的行中进行选择？

> ID：12590218
> 
> 赞同：-2
> 
> 时间：2012-09-25T20:01:50.667
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我有一个内置在 SSRS 中的仪表报告，它显示了从 SP 返回的数据集的加权平均值和平均值。另外，我想显示哪一行具有最大/最小值。我可以轻松地提取最大/最小值，但不能将描述与该值一起使用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:36:20.203

问题问得不好，因为它确实与查询没有任何关系。我最终使用了这个博客中的技术， [http://www.bigator.com/2012/04/26/spothighlight-minimum-and-maximum-values-in-each-row-in-matrix-report-in- ssrs/](http://www.bigator.com/2012/04/26/spothighlight-minimum-and-maximum-values-in-each-row-in-matrix-report-in-ssrs/)

# php - php symfony 1.4 自定义验证器错误

> ID：12590220
> 
> 赞同：0
> 
> 时间：2012-09-25T20:01:54.960
> 
> 标签：php, symfony-1.4, custom-validators

这是我的问题：我正在尝试在 symfony 中编写自定义验证器。

用法 ：

```
$this->setValidator('path', new sfValidatorFile(array(

    'required'   => false,
    'path'       => sfConfig::get('sf_upload_dir'),
    'mime_types' => 'web_images',
    'validated_file_class' => 'sfImageTransform')));
} 
```

验证器 ：

```
<?php class sfImageTransform extends sfValidatedFile{

  public function save($file = null, $fileMode = 0666, $create = true, $dirMode = 0777) {

   $saved = parent::save($file, $fileMode, $create, $dirMode);

       $img = new sfImage(sfConfig::get('sf_upload_dir').'/'.$saved, 'image/jpeg');
       $img->resize(500,400);
       $img->save();

       return $saved;
  }
} ?> 
```

我收到此错误：`Fatal error: Class 'sfImageTransform' not found in /http/htdocs/pizza_propel/lib/vendor/symfony/lib/validator/sfValidatorFile.class.php on line 167`

这是让我谋杀我遇到的第一个 Sensio Lab 员工的部分：每当我`<?php ?>`从验证器文件中删除括号时，我会`class sfImageTransform extends sfValidatedFile{ public function save($file = null, $fileMode = 0666, $create = true, $dirMode = 0777) { // let the parent class save the file and do what it normally does $saved = parent::save($file, $fileMode, $create, $dirMode); //echo $saved;die; $img = new sfImage(sfConfig::get('sf_upload_dir').'/'.$saved, 'image/jpeg'); $img->resize(500,400); $img->save(); //$saved->resize(1000,null); // //$saved->resize(1000,null)->overlay(new sfImage('logo.png'), 'bottom-right'); return $saved; } } Fatal error: Class 'sfImageTransform' not found in /http/htdocs/pizza_propel/lib/vendor/symfony/lib/validator/sfValidatorFile.class.php on line 167`在浏览器窗口中看到它（如预期的那样），但在放回它们并刷新之后，它只执行一次，做它应该做的事情，并在下一次尝试时再次做同样的事情。说真的……什么鬼？我为此狂怒了一个多小时，我即将粉碎半径 75 英里范围内所有可粉碎的东西。以前有人处理过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:46:15.330

所以我再一次回答我自己的问题。我真的应该停止麻烦问了。

看来，由于一个泛银河的愚蠢巧合，验证器类文件的名称与其他文件或类似文件发生冲突。重命名验证器类文件解决了这个问题。

# android - Android 警告：检查表面信息创建=假

> ID：12590224
> 
> 赞同：15
> 
> 时间：2012-09-25T20:02:20.047
> 
> 标签：android, surfaceview

当我运行我的 Android 应用程序时，我注意到 LogCat 窗口中出现以下警告：

```
Tag: SurfaceView
Text: CHECK surface infomation creating=false formatChanged=false 
sizeChanged=false visible=false visibleChanged=true surfaceChanged=true 
realSizeChanged=false redrawNeeded=false left=false top=false 
```

这是什么意思？它似乎不会引起任何问题，但是摆脱警告会很好。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T05:00:05.913

这意味着没有问题

一切都好

# c++ - 英特尔 GPU、VBO 和 SFML 问题

> ID：12590225
> 
> 赞同：0
> 
> 时间：2012-09-25T20:02:40.827
> 
> 标签：c++, opengl, cross-platform, intel, sfml

我正在使用[SFML](http://www.sfml-dev.org/)开发游戏，最近了解到英特尔 GPU 不支持 OpenGL VBO。这是一个问题，因为 SFML 使用 VBO 渲染到不是显示窗口的表面。

[https://github.com/LaurentGomila/SFML/issues/101](https://github.com/LaurentGomila/SFML/issues/101)

我从中了解到的信息是几个月前的，SFML 的开发人员表示这个问题今天“可能已解决”，似乎是因为有人说英特尔更新了他们的驱动程序以支持 VBO。（所以它很可能仍然坏掉，但我没有英特尔系统来测试它）

**我的问题是**，英特尔 GPU 和 VBO 仍然存在问题吗？这是一个会限制我的观众（Windows/Mac/Linux）的主要问题吗？如果是这样，SFML 的最佳替代方案是什么？

**编辑**：图书馆作者昨天解决了这个问题。另外，我误解了手头的问题，它与 VBO 无关。我应该仔细检查我的来源，对不起！我认为这只是……一件事的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:49:34.430

> 这是一个问题，因为 SFML 使用**VBO**渲染到**不是显示窗口的表面**。

等等，什么？也许您正在考虑[Framebuffer Objects (FBO)](http://www.opengl.org/wiki/Framebuffer_Object)。

哎呀，您的[链接问题](https://github.com/LaurentGomila/SFML/issues/101)甚至从未提及 VBO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:50:06.943

> 最近了解到英特尔 GPU 不支持 OpenGL VBO

那你就学错了。缓冲区对象在英特尔 GPU 中得到很好的支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:50:34.537

非常旧的英特尔卡已经支持 VBO。它们也是 2003 年 OpenGL 1.5 的一部分。没问题。

# jquery - 绑定到自定义 jquery 事件的所有命名空间

> ID：12590231
> 
> 赞同：7
> 
> 时间：2012-09-25T20:02:56.037
> 
> 标签：jquery

我正在尝试侦听自定义事件，但我想有效地“忽略”它是命名空间的事实，或者以某种方式侦听所有命名空间而不单独定义它们。

```
$('#test').on('custom', ...);

$('#test').trigger('custom.namespace1');
$('#test').trigger('custom.namespace2'); 
```

我希望能够做到这一点的原因是因为我有多个 ui 插件，当它们被隐藏/显示时会触发事件。这些事件主要在内部使用，但具有命名空间，因此它们不会相互冲突。但是，我也想知道何时隐藏特定的 ui 元素，独立于执行其他清理逻辑的源。

在上面的例子中，什么都不会发生，因为触发事件是命名空间的。我可以收听所有具有以下效果的名称空间`custom.*`吗？

[小提琴演示了这个问题](http://jsfiddle.net/jschr/Rqtba/4/)。

谢谢

**编辑**

即使是这样的事情也是可取的，但仍然无法让它发挥作用

```
$('#test').on('custom.global', log);

$('#test').trigger('custom.global.namespace1');
$('#test').trigger('custom.global.namespace2'); 
```

[小提琴](http://jsfiddle.net/jschr/MKEyH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:36:43.643

尝试`triggerAll`代替`trigger`：

```
(function($) {
    $.fn.triggerAll = function(topics, data, delimiter) {
        return this.each(function() {
            var $this = $(this), chain = [], t = '';
            delimiter = (delimiter || '.');
            // rebuild chain
            $.each(topics.split(delimiter), function(i,n) {
                t += (i == 0 ? '' : delimiter) + n;
                chain.push(t);
            });

            // append/prepend original topic?
            data = (data || []);
            data.push(topics);
            $.each(chain, function(i,t) {
                $this.trigger(t, data);
            });
        });
    };
})(jQuery); 
```

当然，由于 jQuery 如何处理触发命名空间，触发“根”事件实际上会触发命名空间版本，因此要获得您期望的内容，您需要使用另一个字符作为分隔符，例如`/`，然后声明您的事件，例如：

```
var $o = $('#whatever');
// this will be triggered for all events starting with 'root'
$o.on('root', function () { console.log(Array.prototype.slice.call(arguments, 0)); });
// some arbitrary way to fire custom events
$o.on('click', function () {
    $o.triggerAll('root/custom1/subA', ['1st', '2nd'], '/');
    $o.triggerAll('root/custom2', [3, 4, 5], '/');
}); 
```

[这个小提琴的](http://jsfiddle.net/drzaus/gGnJT/)例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:17:47.313

我担心唯一的方法是将它们全部列为 on 方法的第一个参数......

```
$('#test').on('custom.ns1 custom.ns2 ...', function(evt){}); 
```

这意味着插件更新时烦人的代码审查......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-26T19:48:30.233

我刚遇到这个，这是我的解决方案。Javascript 是一种有趣的语言，事件只是字符串。为什么不事先定义您的事件，然后将它们动态添加到“全部”事件中？无需担心不同步。

你可以随心所欲地扩展它。注册小部件时，让它注册自己并将其附加到列表中。使用一个数组，然后`myEvents.join(" ")`生成所有这些。在应用程序引导上，执行我在下面执行的操作并将对象中的所有键添加到“全部”事件中。你想做什么都好。

PS。我使用的“Vent”示例来自：[https ://github.com/reedspool/jquery-event-aggregator/blob/master/eventAggregator.jquery.js](https://github.com/reedspool/jquery-event-aggregator/blob/master/eventAggregator.jquery.js)

```
var stand_in = {},
    $stan = $(stand_in),
    // Don't give Stan to anyone else, he's precious
    $empty = $(),
    trigger = function(name, ...args) {
      $stan.trigger.apply($stan, arguments);
      return $empty;
    },
    on = function(name, fn) {
      $stan.on(name, function(evt, obj) {
        // Shed the event object, who needs it?
        fn(obj);
      });

      return $empty;
    };

var Vent = {
  trigger: trigger,
  on: on
};

var events = {
  All: "",
  Custom1: "my1.event",
  Custom2: "my2.event"
}

for (var evt in events) {
	if (events.hasOwnProperty(evt) && evt !== 'All') {
    events.All += events[evt] + " ";
  }
}

Vent.on(events.Custom1, function () { alert(events.Custom1 + " trigger")});
Vent.on(events.All, function () { alert(events.All + " trigger")});

$("#btn").on('click', function () {
	Vent.trigger(events.Custom1);
});
$("#btn2").on('click', function () {
	Vent.trigger(events.Custom2);
})
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<button id="btn">
Press Me
</button>
<button id="btn2">
Press Me 2
</button>
```

# ruby-on-rails-3 - PageDown 输出为 HTML 意外标记；

> ID：12590236
> 
> 赞同：0
> 
> 时间：2012-09-25T20:03:23.277
> 
> 标签：ruby-on-rails-3, pagedown

我正在尝试在 Rails 的显示视图中显示我的 PageDown textarea 的结果。我下面的例子在这里： [http ://code.google.com/p/pagedown/wiki/PageDown](http://code.google.com/p/pagedown/wiki/PageDown)

```
<script type="text/javascript">
var converter = new Markdown.getSanitizingConverter();
document.write(converter.makeHtml("<%= j @joboffer.tasks.to_s %>");
</script> 
```

但是，有一个 javascript 错误，说明 ; 出乎意料。我的输出缩短后如下所示：

```
..(converter.makeHtml("Aufgaben  \n\n - Zusatzleistungen\n          "); 
```

我将什么插入数据库并不重要，代码在编辑过程中被接受，但显示中没有显示任何内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:07:56.037

愚蠢的我。忘记在最后一个括号之前关闭另一个括号；该睡了。

此外，PageDown 文档中有一个错字：

```
document.write(converter.makeHtml("<script>alert(42);</script><b>bold"); 
```

在消毒剂示例的末尾缺少一个）： [http ://code.google.com/p/pagedown/wiki/PageDown](http://code.google.com/p/pagedown/wiki/PageDown)

# .net - AppDomain.MonitoringSurvivedMemorySize 的意外行为

> ID：12590238
> 
> 赞同：1
> 
> 时间：2012-09-25T20:03:29.997
> 
> 标签：.net, monitoring, appdomain

我正在尝试使用 .Net AppDomain 类的[MonitoringSurvivedMemorySize](http://msdn.microsoft.com/en-us/library/system.appdomain.monitoringsurvivedmemorysize%28v=vs.100%29.aspx)属性。

唯一的问题是我看不到我的应用程序从该属性接收的值如何符合 msdn 上给出的属性描述。

我观察到的差异包括属性返回的值我知道太低，因为返回的值与先前调用返回的值不同，并且在这两个调用之间，AppDomain 引用的内存量从未像新的返回值。

我在 SO、google 和 connect.microsoft.com 中搜索了“AppDomain Monitoring”，但找不到任何似乎与上述特定问题相关的内容。

为了确保这与我的应用程序的其他部分没有任何关系，我使用以下代码创建了一个新的 ConsoleApplication：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WindowWidth = 133;

        AppDomain.MonitoringIsEnabled = true;

        var Queue = new Queue<byte[]>();

        var BlockSize = (int)1e+6; 

        var ToggleAllocation = true;

        while (true)
        {
            if (Console.KeyAvailable)
            {
                var Input = Console.ReadKey(true);

                if (Input.Key == ConsoleKey.Escape)
                {
                    break;
                }

                if (Input.Key == ConsoleKey.C)
                {
                    GC.Collect();
                    Console.WriteLine("Collect");
                }

                ToggleAllocation = !ToggleAllocation;
            }

            Thread.Sleep(100);

            if (!ToggleAllocation)
            {
                continue;
            }

            Queue.Enqueue(new byte[BlockSize]);

            while (100 < Queue.Count)
            {
                Queue.Dequeue();
            }

            var ExpectedLowerBound = Queue.Count * BlockSize;

            var MonitoringSurvivedMemorySize = AppDomain.CurrentDomain.MonitoringSurvivedMemorySize;
            var MonitoringTotalAllocatedMemorySize = AppDomain.CurrentDomain.MonitoringTotalAllocatedMemorySize;

            Console.WriteLine(
                "Queue.Count=" + Queue.Count.ToString() +
                ", SurvivedMemorySize=" + MonitoringSurvivedMemorySize.ToString() +
                ", TotalAllocatedMemorySize=" + MonitoringTotalAllocatedMemorySize.ToString() +
                ", ExpectedLowerBound=" + ExpectedLowerBound.ToString());
        }
    }
} 
```

这个函数只是不时地分配一些内存以确保最终会发生 gc 并打印出 MonitoringSurvivedMemorySize 接收到的值。

为了确保问题不是由于某些调试器“功能”引起的，我将项目切换到默认发布配置并从资源管理器运行程序。

当我运行这个程序时，[MonitoringSurvivedMemorySize](http://msdn.microsoft.com/en-us/library/system.appdomain.monitoringsurvivedmemorysize%28v=vs.100%29.aspx)在一些迭代中返回 0，然后在一些迭代之后（我假设在第一次 gc 之后）一个符合我期望的更高值。但经过更多次迭代后，返回值会跳回零。它还返回不同于零但有时远低的值。

我将目标框架设置为“.NET Framework 4 Client Profile”

我究竟做错了什么？

可以复盘吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:35:30.117

根据文档（来自您提供的链接），您应该期望仅在完全阻止收集后更新统计信息。尝试在您的测试台中添加对[GC.Collect的调用。](http://msdn.microsoft.com/en-us/library/xe0c2357%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-05T16:28:43.123

我使用 .NET Framework 4.5 遇到了同样的问题，并将其作为错误提交给微软。现在他们提供了答案并修复了它（对于 .NET Framework 4.5）

链接到微软的票：[http ://connect.microsoft.com/VisualStudio/feedback/details/765296/appdomain-monitoringsurvivedmemorysize-property-returns-wrong-value-after-gen-0-collection](http://connect.microsoft.com/VisualStudio/feedback/details/765296/appdomain-monitoringsurvivedmemorysize-property-returns-wrong-value-after-gen-0-collection)

以下引用来自上面链接的页面：

> 这是一个文档错误，而不是 GC 错误。[http://msdn.microsoft.com/library/system.appdomain.monitoringsurvivedmemorysize(v=vs.110).aspx](http://msdn.microsoft.com/library/system.appdomain.monitoringsurvivedmemorysize(v=vs.110).aspx)上的文档 被修改为：
> 
> “每次垃圾收集都会更新统计信息。但是，只有在完整的阻塞收集之后才能保证它们是准确的；也就是说，包含所有代的收集并在收集发生时停止应用程序。例如，GC。 Collect() 方法重载执行完整的阻塞收集。（并发收集发生在后台，不会阻塞应用程序。）"
> 
> --Ron Petrusha 公共语言运行时用户教育微软公司

由于观察到的响应时间较长，我将避免在微软要求对 .NET 4.0 进行澄清，而是在此强硬地宣布这是对 OP 的有效答案。

# ios - 如何使用 sharedApplication 在 ios 6 苹果地图中显示位置

> ID：12590244
> 
> 赞同：4
> 
> 时间：2012-09-25T20:04:05.663
> 
> 标签：ios, maps, ios6

在我的 ios 5 应用程序中，我在地图中显示了一个按钮名称

例如，在商店详细信息视图中，有一个 showinmap 按钮，此按钮转到 maps.google 以显示用户的当前方向和商店方向，并且它还在这些方向之间绘制一条关于如何去那里的线

这是我的方法：

```
NSString* url = [NSString stringWithFormat: @"http://maps.google.com/maps?saddr=Current+Location&daddr=%@,%@",lonlocation,latlocation];  

[[UIApplication sharedApplication] openURL: [NSURL URLWithString: url]]; 
```

但在 ios 6 中，您知道没有谷歌地图应用程序。取而代之的是苹果的新地图应用程序。

现在我的问题是如何更改我的代码以在 ios6 版本中使用苹果地图应用程序完成相同的工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T20:09:23.663

只需在您的网址中替换`maps.google.com`为`maps.apple.com`，它就像一个魅力:)

```
CGFloat sysVers = [UIDevice currentDevice].systemVersion.floatValue;
NSString* hostName = (sysVers < 6.0) ? @"maps.google.com" : @"maps.apple.com";

NSString* url = [NSString stringWithFormat: @"http://%@/maps?saddr=Current+Location&daddr=%@,%@",hostName,lonlocation,latlocation];  

[[UIApplication sharedApplication] openURL: [NSURL URLWithString: url]]; 
```

* * *

*[编辑] 正如@Vagari 在他的回答中指出的那样，Apple 似乎比我更好地集成了它，`maps.apple.com`即使在 iOS5 中你也可以将所有 URL 指向：如果你发出它们，Apple 会自动将你的 URL 重定向到 maps.google.com从 iOS5 上的设备！*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T17:02:18.453

而 AliSoftware 用他的方法节省了一跳。从技术上讲，您*只需*将 更改`maps.google.com`为`maps.apple.com`。Apple 将重定向推送到不在 iOS 6 上的设备。只是想澄清一下。

# c++ - 使用 EnumPrinters 函数枚举远程机器上的打印机

> ID：12590247
> 
> 赞同：0
> 
> 时间：2012-09-25T20:04:09.533
> 
> 标签：c++, winapi

所以我想要做的是简单地枚举我私人网络中远程机器上的打印机。为此，我以这种方式使用 EnumPrinters：

```
int main()
{
    DWORD const BUFFER_SIZE = 50;
    PRINTER_INFO_2* prninfo = NULL;
    DWORD RequestedBufferSize = 0;
    DWORD InfoLevel = 0;
    bool suc = EnumPrinters(PRINTER_ENUM_LOCAL|PRINTER_ENUM_NAME,"\\10.0.0.3",2,NULL,0,&RequestedBufferSize,&InfoLevel);
    int err = GetLastError();
    return 0;
} 
```

最后 err = 16385 这是一个错误代码，我没有找到任何文档。

我只会提到，当我告诉函数返回有关它工作的本地打印机的信息时。

有人知道这里出了什么问题吗？

# widget - 小部件是 Alloy 中简单控制器的正确位置吗？

> ID：12590248
> 
> 赞同：1
> 
> 时间：2012-09-25T20:04:24.680
> 
> 标签：widget, appcelerator

我只是想知道在将 Appcelerator 与 Alloy 一起使用时，将简单的功能放入小部件形式是否是一种好方法。我有一个 JS 文件，它充当 Ti HTTPClient 的简单包装器，我想将它合并到我的 Alloy 项目中。如果我在 widget.js 文件、一个空白的 widget.tss 文件和一个存根 widget.xml 文件中创建一个带有 HTTP 功能的小部件，我是否会因为小部件中未使用的 UI 功能而产生额外的开销？我是否应该坚持将我的 HTTP.js 文件放在 app/lib 目录中并在我的 Alloy 控制器文件中要求它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:30:13.783

Tony Lukasavage 在 Google Group for Alloy 上为我回答了这个问题：

> > “如果代码没有关联的标记或 tss 样式，那么是的，app/lib 中的 commonjs 模块将是正确的选择”

[https://groups.google.com/forum/?fromgroups=#!topic/appc-ti-alloy/pSlB5elTans](https://groups.google.com/forum/?fromgroups=#!topic/appc-ti-alloy/pSlB5elTans)

# c++ - __STDC_ISO_10646__ 到底是什么意思？

> ID：12590255
> 
> 赞同：4
> 
> 时间：2012-09-25T20:04:53.680
> 
> 标签：c++, unicode

从我的 C++ 标准副本中，我很难理解宏`__STDC_ISO_10646__`：

`__STDC_ISO_10646__`

> yyyymmL 形式的整数常量（例如，199712L）。如果定义了此符号，则 Unicode 所需集中的每个字符在存储在 wchar_t 类型的对象中时，都具有与该字符的短标识符相同的值。Unicode 要求集包含 ISO/IEC 10646 定义的所有字符，以及指定年份和月份的所有修订和技术勘误。

据我了解，这意味着`wchar_t`您的系统上将代表一个 unicode 代码点。它是否正确？如果是这种情况，那么 utf-8 和 utf-16 编码将不符合要求，而 utf-32 将符合要求吗？另外，还有哪些其他字符编码符合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:21:26.583

您引用的标准部分（第 16.8 节预定义宏名称 [cpp.predefined]）为一系列定义添加前缀：

> ¶2以下宏名称由实现有条件地定义：

这意味着如果实现不能满足要求（例如因为`wchar_t`是 16 位类型），那么实现将不会定义`__STDC_ISO_10646__`.

另一方面，如果`wchar_t`是 32 位或更大的类型，那么实现很可能能够定义宏。ISO 10646 只需要 21 位来表示所有字符，但对于（几乎）所有实际用途，这意味着 16 位`wchar_t`太小而 32 位`wchar_t`足够大。这也意味着从头开始的实现很可能会`wchar_t`变成 32 位类型。如果预先存在的实现`wchar_t`在此选项标准化之前选择了 16 位，则可能会因向后兼容性而受阻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:35:38.253

宏与存储在 wchar_t 中的 unicode 字符的值相关。

更具体地说，随着对标准的修改，ISO/IEC 10646 标准支持更多字符。

您可以将年份和月份定义为宏的值意味着当您将 Unicode 字符存储到 wchar_t 变量时，将存储在该变量中的 unicode 字符的值将是在给定的年份和月份。

`[http://www.unicode.org/charts/][1]`有关Unicode 短标识符的参考，请参见此处

希望这可以帮助

左撇子

# python - 如何让 python 子进程 stdout 和 stderr 显示在 Visual Studio 的输出窗口中？

> ID：12590262
> 
> 赞同：1
> 
> 时间：2012-09-25T20:05:24.570
> 
> 标签：python, visual-studio

我切换到 Visual Studio (VS2012) 的 Python 工具，我正在尝试启动并运行我的项目。我在 Visual Studio 输出窗口中未显示子进程的标准输出时遇到问题。我创建了一些示例代码来说明问题。

test_console.py

```
import os
import subprocess
print 'printed from the main process'
command = 'python '  + os.path.join(os.getcwd(),'test_console_sub.py')
subprocess.call(command) 
```

test_console_sub.py

```
print 'printed from a subprocess' 
```

执行 test_console.py 时出现的 python 控制台正确显示了两个文件的输出。

![在此处输入图像描述](../Images/041842a8e6103e93b8fd080ab5e4dd1a.png)

输出窗口缺少子进程打印语句

![在此处输入图像描述](../Images/c528f2d40b457a717c8420a93fff6364.png)

以下是一些相关设置

![在此处输入图像描述](../Images/826dd56694220ded7986c00f16f0dc53.png)

如何让子进程打印语句显示在 Visual Studio 输出窗口中？理想情况下，输出窗口看起来与 python 控制台窗口完全相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:20:08.500

[作为一种解决方法（查看 AnojiRox 的答案），您可以从子进程中捕获 stdout 和 stderr，然后从主进程中打印它，但是由于文档](http://docs.python.org/library/subprocess.html#popen-objects)中所述的死锁问题，您需要使用 Popen 及其[`communicate`方法](http://docs.python.org/library/subprocess.html#subprocess.Popen.communicate)。

```
import os
import subprocess

print 'printed from the main process'
command = ['python', os.path.join(os.getcwd(), 'test_console_sub.py')]
p = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
(stdout, stderr) = p.communicate()
print stdout
print stderr 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T20:08:39.363

你不能。我以前搜索过这个，什么也没找到。如我错了请纠正我。

尝试改用文本编辑器和 python 控制台。

# haskell - 在 readFile 之后使用行

> ID：12590265
> 
> 赞同：3
> 
> 时间：2012-09-25T20:05:40.873
> 
> 标签：haskell, readfile, lines

我正在尝试在 Haskell 中进行一些编程。我正在尝试读取文件，然后使用 line 函数将文件中的每一行放在一个列表中。这是部分代码：

```
file = "muh.rtr"
readTrack :: String -> Track
readTrack file =
    do      let defFile = readFile file
            let fileLines = lines defFile 
```

但是，我不断收到此错误：

```
Parser.hs:22:39:
    Couldn't match expected type `String' with actual type `IO String'
    In the first argument of `lines', namely `defFile'
    In the expression: lines defFile
    In an equation for `fileLines': fileLines = lines defFile 
```

我已经在互联网上搜索了几个小时，希望能在某个地方找到一些答案，但到目前为止我还没有这么幸运。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T20:18:07.833

你可能想要这样的东西：

```
readTrack :: String -> IO Track
readTrack file = do defFile <- readFile file
                    let fileLines =  lines defFile
                    -- etc.... 
```

...或类似的东西：

```
readTrack :: String -> IO Track
readTrack file = do fileLines <- liftM lines (readFile file)
                    -- etc.... 
```

但是你真正*应该*做的是停下来，去找一个语言介绍，比如[Learn You a Haskell](http://learnyouahaskell.com/)，然后花点时间阅读它。

将完全由非常简单的错误组成的代码输入 GHC，然后在 Stack Overflow 上发布错误消息并不是一个好的学习方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T20:17:55.587

的类型`readFile`是

```
readFile :: FilePath -> IO String 
```

所以你需要使用`<-`来绑定结果，并且你的函数必须返回`IO Track`。

```
readTrack :: String -> IO Track
readTrack file =
  do defFile <- readFile file
     let fileLines = lines defFile
     ... 
```

我建议阅读有关 Haskell IO 的优秀教程，例如[Learn You a Haskell for Great Good 的输入和输出章节！](http://learnyouahaskell.com/input-and-output).

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-25T20:18:23.760

readFile 返回一个`IO string`. 也就是说，它是一个返回字符串的 IO 计算。这意味着您需要使用`<-`而不是`let`“获取”它返回的字符串。

```
 readTrack file =
    do
        defFile <- readFile file
        ... 
```

您可以使用`let`绑定不是 IO 计算的东西，例如行的返回值，即常规字符串。

```
readTrack file =
    do
        defFile <- readFile file
        let fileLines = lines defFile
        ... 
```

最后，您需要返回您可能想要尝试的值

```
readTrack file =
    do
        defFile <- readFile file
        let fileLines = lines defFile
        fileLines --Doesn't actually work! 
```

但不幸的是，由于我们在一个“do”块内并试图返回一个单子计算，我们需要将 fileLines 发送回 io monad（请记住，out 函数返回`IO [String]`，而不是`String`！

```
readTrack file =
    do
        defFile <- readFile file
        let fileLines = lines defFile
        return fileLines 
```

请注意，这里的“return”*不是*在大多数语言中通常可以找到的 return 语句，并且不应在纯函数中使用它。

乍一看，这一切似乎很多。我建议您坚持使用纯函数（没有输入和输出/单子），直到您更好地掌握该语言。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-25T20:24:03.823

You can't do it like that -- you've run into the IO monad. What you need to do is something like:

```
readTrack :: String -> IO Track
readTrack file = do
   defFile <- readFile file
   let fileLines = lines deffile
   ...
   return whatever 
```

Think of `IO T` values as statements (as opposed to expressions) with return type `T`. Because statements have side effects, but expressions don't, you can never turn a statement into an expression; the type system enforces this, which is why your type signature won't work.

Note the different assignment-like syntax in the `do` block: in this example, the `foo <- bar` is used for `IO` operations, while the `let baz = quux` syntax is used for purely functional evaluation. This is more fallout from using monadic I/O -- it makes more sense in the full generality of Haskell's polymorphic type system, but it's not necessarily bad to have a syntactic indicator of pure vs. side-effecting operations, either.

In general, it is good practice to try keeping most of your implementation in the purely functional realm: implement your pure computation with regular functional methods, *then* describe your I/O operations in the `IO` monad. It is a common novice mistake to write loops in the IO monad which would be more appropriate as list comprehensions or recursive functions.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-25T21:41:56.790

如果你的函数应该有 type `readTrack :: String -> Track`，你确定 String 是一个文件名吗？也许是数据 - 如果是这样，请不要使用`readFile`. 编写一些示例数据并使用它进行测试，例如

```
sampleData = "2 3\n1 30 234 45\n1 2 32 4\n5 3 4 23" 
```

（关于此作业的 SO 上的另一个问题没有使用文件 IO。我不会链接到它，因为您正处于危机之中并且可能想要复制，并且无论如何如果您拒绝学习 haskell，至少我'会迫使你提高你的 StackOverflow 搜索技能！:) )

无论如何，我认为通过解决字符串问题比解决 IO 问题你会得到更多的分数。

延迟 readFile 问题，直到你得到纯版本工作，否则你可能最终会在 IO monad 中编写大部分代码，这将比必要的复杂得多。

一个你有一个纯函数`readTrack :: String -> Track`，你可以做

```
readTrackFrom :: FilePath -> IO Track
readTrackFrom filename = fmap readTrack (readFile filename) 
```

现在，`fmap :: Functor f => (a -> b) -> f a -> f b`, so 采用纯函数并将它们提升到在不同的计算上下文中工作，例如 IO。

因为`IO`是 a `Functor`（明天查，不是今晚查），所以我们使用它作为 type `(String -> Track) -> IO String -> IO Track`。这很好，因为`readTrack :: String -> Track`和`(readFile filename) :: IO String`。

如果你愿意，你可以然后`>>= print`或者`>>= writeFile newfilename`你认为合适。

`deriving Show`使用后不要忘记添加`data Track =...`，但如果你正在使用则不需要`type Track = ....`。

# projection - 使用gdal将具有已知边界的png从plate carree转换为mercator

> ID：12590266
> 
> 赞同：1
> 
> 时间：2012-09-25T20:05:42.823
> 
> 标签：projection, gdal, mercator

我有一个 png 图像，它显示了 Plate Carree EPSG:4326 中由地理边界 UpperLat、LeftLon、BottomLat、RightLon 定义的区域（对于 West Lon 和 South Lat 以度数和 -ve 为单位）。我想使用 GDAL 将其转换为墨卡托 EPSG:3857。

当我尝试这样做时：

`Step1) gdal_translate -of Gtiff -a_srs EPSG:4326 pc_map_piece.png pc_map_piece.tiff`
`Step2) gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 pc_map_piece.tiff mer_map_piece.tiff`

我收到了这个错误：

错误 1：无法计算 pc_map_piece.tiff 的像素/线和地理参考坐标之间的转换。没有仿射变换，也没有 GCP。

然后我尝试这样做：

`Step1) gdal_translate -of Gtiff -a_ullr UpperLat LeftLon BottomLat RightLon -a_srs EPSG:4326 pc_map_piece.png pc_map_piece.tiff`
`Step2) gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 pc_map_piece.tiff mer_map_piece.tiff`

我没有收到上述错误，但输出图像没有转换为墨卡托投影，我只是将相同的图像倒置作为输出。

有什么想法可以解决这个问题并将图像转换为墨卡托？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:53:40.507

问题解决了。在我的第二种方法中将顺序更改为 LeftLon UpperLat RightLon BottomLat gdal_translate 为我做了！

# node.js - 如何使用 mongoose + nodejs 正确保存对象数组？

> ID：12590267
> 
> 赞同：0
> 
> 时间：2012-09-25T20:05:43.013
> 
> 标签：node.js, mongodb, mongoose

我有一个名字数组：

var 名称 = [“凯利”、“艾米”、“马克”]

假设 Person 只是 nodejs 的 Mongoose 模型...我想将每个名称作为文档保存到 mongodb 中，如下所示：

```
for(var i = 0; i < names.length; i++) {
           name_now = names[i];
        Person.findOne({ name: name_now},
            function(err, doc) {
                if(!err && !doc) {
                    var personDoc = new PersonDoc();
                    personDoc.name = name_now;
                    console.log(personDoc.name);
                    personDoc.save(function(err) {});
                } else if(!err) {
                    console.log("Person is in the system");
                } else {
                    console.log("ERROR: " + err);
                }
            }
        )   
} 
```

我遇到问题，因为我不断收到“创建计划时出错：MongoError：E11000 重复键错误索引：..... dup key：{：“Mark”}”。它似乎试图插入“Mark”（列表中的最后一个元素）3 次，而不是列表中的每个名称。

当我尝试在循环中打印出当前人的姓名时（使用 console.log(personDoc.name);），我得到了 3 次“Mark”......它似乎只保存了“Mark”数据库，没有其他人......处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:31:57.820

在`findOne`回调期间，`name_now`总是会设置为姓氏，`names`因为`for`循环在第一个回调被调用之前就完成了。您需要创建一个立即函数以`name_now`在每次迭代期间捕获当前值并将其保存以供回调使用：

```
for(var i = 0; i < names.length; i++) {
    (function (name_now) {
        Person.findOne({ name: name_now},
            function(err, doc) {
                if(!err && !doc) {
                    var personDoc = new PersonDoc();
                    personDoc.name = name_now;
                    console.log(personDoc.name);
                    personDoc.save(function(err) {});
                } else if(!err) {
                    console.log("Person is in the system");
                } else {
                    console.log("ERROR: " + err);
                }
            }
        );   
    )(names[i]);
} 
```

# java - java 中整个 try/catch 语句需要大括号吗？真的很奇怪的东西

> ID：12590276
> 
> 赞同：0
> 
> 时间：2012-09-25T20:06:20.350
> 
> 标签：java, android, try-catch, curly-braces

我需要从 Android 的清单中解析包版本。我在主要活动中直接做，不知道是不是错了。

我现在无法测试这是否有效，由于各种原因，尽管我正在运行 Eclipse，但我无法在几天内完成，但这真的让我很伤心，因为我是一个相当令人担忧的人：

```
{ try {
    String version = getPackageManager().getPackageInfo(getPackageName(), 0).versionName;
} catch (NameNotFoundException e) {
    Log.e("tag", e.getMessage());
} } 
```

你注意到 WHOLE 语句前后的大括号了吗？如果我删除它们，Eclipse 会说

“令牌“{”上的语法错误，{ 应在此令牌之后”

在前面的活动开始中，以及在它之后的任何方法或语句中的类似内容。

我用谷歌搜索它，因为这是我能做的，但没有发现他们需要它们。Java 教程，示例拼写 try catch 没有这个。我是在做一些非常愚蠢的事情还是这是正常行为，我的代码*应该*在我回来时运行？

再次对这个问题感到抱歉，但我只是需要。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:08:23.420

您可能在任何方法之外都有该代码。使用大括号，Java 将其视为实例初始化程序块。没有牙套是违法的。

该代码的另一个问题是您初始化变量`version`然后立即丢失信息，因为`version`它是块本地的`try`。该变量可能应该在块外声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:08:09.943

我猜这个 try 块就`class {`在你的代码里面。

如果是这样，您需要它们，因为在 java 中它被视为[实例初始化](http://www.javatpoint.com/instance-initializer-block)块。

```
EDIT: 
```

在向问题添加更多信息之后，是的，这不应该是初始化块，它应该被包装在一个方法中。

# uisplitviewcontroller - iPad SplitView 主视图显示但有微小（和不正确）的变化

> ID：12590284
> 
> 赞同：0
> 
> 时间：2012-09-25T20:06:54.090
> 
> 标签：uisplitviewcontroller

我正在练习开发一个简单的 iPad 拆分视图应用程序（斯坦福大学的 Hegarty 在线课程）。大部分情况下一切正常。然而，主侧（'左侧），虽然在横向模式下工作看起来与我期望它作为纵向模式下的'弹出框'略有不同。“弹出框”覆盖了屏幕的左侧，包括触发它的工具栏按钮项，通常它不应覆盖该按钮。

不幸的是，我不能发布图片，所以我会尽力更详细地描述。通常，“正确”弹出框将悬停在触发它的条形项目按钮的正下方，并带有一个粗箭头状的东西（“锚”）指向按钮而不覆盖该按钮。可以通过再次单击该按钮（或屏幕上的其他位置）来关闭弹出框。

然而，发生在我身上的是，当我单击栏项目按钮以显示弹出框时，生成的弹出框“覆盖”按钮并基本上填满了屏幕的左侧部分（详细视图在它下方，其中大部分正在显示）具有指定的宽度（因此，再次，它不会覆盖整个详细视图）。没有指向栏项目按钮的“锚”箭头，因为它显然覆盖了它。一旦我单击屏幕上的其他任何位置，弹出框就会正常关闭。

那么为什么我的弹出框覆盖了按钮，而不是简单地悬停在它下面，并有一个指向它的“锚点”？

我认为此时发布代码没有多大意义，因为我认为这不会有帮助，更重要的是不确定要发布哪个部分，考虑到这可能是我在 Builder 中连接它的方式的问题。任何想法将不胜感激！

谢谢！莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:04:56.997

我相信这是 IOS5.1 带来的变化

如果您想要相同的行为，您可能需要从详细视图中的工具栏按钮或类似按钮将主控设置为弹出框，并将拆分视图委托设置为不纵向显示主控。

我现在正在搬家，但如果您想了解更多信息，请告诉我，我会稍后再回复您。

# jquery-ui - 使用 jQuery UI MultiSelect Widget 过滤 div 类-选中多个框时如何过滤？

> ID：12590286
> 
> 赞同：0
> 
> 时间：2012-09-25T20:07:21.850
> 
> 标签：jquery-ui, widget, filtering, checkbox

这个问题实际上适用于使用任何一组复选框进行过滤。我正在使用 jQuery UI MultiSelect 小部件按类名过滤产品。我的代码在仅选中一个框时效果很好，但在选择多个框时不返回任何结果。我想我需要以某种方式映射一个数组，但我不确定该怎么做。小部件文档说要这样做：

```
var array_of_checked_values = $("select").multiselect("getChecked").map(function(){
   return this.value;   
}).get(); 
```

...但这对我没有帮助。请帮我让这个过滤器工作。谢谢！

```
<div class="main">
    <article class="contemporary"></article>
    <article class="abstract"></article>
    <article class="impressionist"></article>
</div>

<select id="filterGenre" name="filterGenre" multiple="multiple">
    <option value="abstract">Abstract </option>
    <option value="contemporary">Contemporary </option>
    <option value="impressionist">Impressionist </option>
</select>
<button class="submitFilters" type="button">GO</button>

//creates the multiselect widget: 
$("#filterGenre")
   .multiselect({
      noneSelectedText: 'Select Genre',
      selectedText: 'Select Genre',
      minWidth: 120
   });
//a button to submit the form selections: 
$(function() {
        $( "button.submitFilters" ).button({
            icons: {
                primary: "ui-icon-triangle-1-e"
            },
        });
    });

//the filter actions: 
$('button.submitFilters').click(function() {
        var genreVal = $('#filterGenre').val();
    $('.main article').hide();
    $('.main article[class*=' + genreVal + ']').show();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:50:38.057

我用四分之一的单词问了这个问题，并立即得到了答案（有时会有所帮助）。解决这个问题的关键是“.join”......必须加入数组以按类过滤产品。我错误地定义了我的“genreVal”变量......应该这样做：

```
var genreVal = $("#filterGenre").multiselect("getChecked")
                .map(function(){return "." + this.value; })
                .get()
                .join(); //<--the missing link...

//then i used: 

    $('.main article').hide();
    $('.main article[class*=' + genreVal + ']').show(); 
```

# python - boto aws 下拉实例列表

> ID：12590287
> 
> 赞同：3
> 
> 时间：2012-09-25T20:07:24.877
> 
> 标签：python, amazon-web-services, boto

伙计们，我不仅试图检索正在运行的机器的实例 ID，还试图检索我在 aws 控制台中添加到它们的别名。

这是正确的方法吗？我没有得到任何有趣的东西......

```
import boto
botoEC2 = boto.connect_ec2('asdf','asdfasdfasdfasdf')
rsv = botoEC2.get_all_instances()
tags = botoEC2.get_all_tags()
print tags
dir (tags)
print tags
print tags.status
print tags.pop
print tags.count
print tags.tagSet
print tags.requestId
print tags.index
print tags.
print tags.requestId
print tags.index
print tags.key_marker

print tags 
```

输出：[标签：ec2tag，标签：名称，标签：名称，标签：名称，标签：名称，标签：名称，标签：名称，标签：名称，标签：名称，标签：名称，标签：名称，标签：名称，标签：ec2tag，标签：名称，标签：名称，标签：名称，标签：名称，标签：名称]

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T21:43:43.427

您可以获取所有标签

```
import boto
conn = boto.connect_ec2('asdf','asdfasdfasdfasdf')

tags = conn.get_all_tags()
for tag in tags:
    print tag.name, tag.value 
```

或者您可以获取仅与实例关联的标签

```
reservation = conn.get_all_instances()[0]
# Yeah I don't know why they have these stupid reservation objects either...
instance = reservation.instances[0]
print instance.tags
# prints a dictionary of the tags {'Name': 'Given name'} 
```

**2014 年 4 月更新：** [获取所有实例将在不久的将来改变它的行为](http://boto.readthedocs.org/en/latest/ref/ec2.html#boto.ec2.connection.EC2Connection.get_all_instances)。有趣的是，它将开始返回 EC2 实例列表。您应该使用`get_all_reservations`now 以避免在下一次主要版本更新期间出现代码损坏。

# php - PHP 正则表达式的痛点

> ID：12590289
> 
> 赞同：0
> 
> 时间：2012-09-25T20:07:28.957
> 
> 标签：php, html, regex, string, str-replace

因此，我编写了一小段代码来为我们的移动网站将表格转换为 div。

这是代码的摘录：

```
function replaceTables($table, $html) {

            $tempTable = preg_replace('/<table[^>]*>(.*?)<\/table>/is', '<div style="width: 90%; margin: auto;">$1</div><div style="clear: both;"></div>', $table);
            $html = str_replace($table, $tempTable, $html);

            preg_match_all('/(?!<table[^>]*>).*?<tr[^>]*>.*?<\/tr>.*?(?<!<\/table>)/is', $tempTable, $rows, PREG_OFFSET_CAPTURE);

            for ($i = 0; $i < count($rows[0]); $i++) {
                $tempRow = $rows[0][$i][0];

                preg_match_all('/(?!<table[^>]*>).*?<td[^>]*>.*?<\/td>.*?(?<!<\/table>)/is', $tempRow, $cols, PREG_OFFSET_CAPTURE);

                $numCols = count($cols[0]);
                $colWidth = 100/$numCols;

                for ($x = 0; $x < $numCols; $x++) {
                    $tempCol = $cols[0][$x][0];
                    $cols[0][$x][0] = preg_replace('/<td[^>]*>(.*?)<\/td>/is', '<div style="width: ' . $colWidth . '%; float: left;">$1</div>', $cols[0][$x][0]);
                    $tempRow = str_replace($tempCol, $cols[0][$x][0], $tempRow);
                }

                $tempRow = preg_replace('/<tr[^>]*>(.*?)<\/tr>/is', '<div style="clear: both;">$1</div>', $tempRow);
                $tempTable = str_replace($rows[0][$i][0], $tempRow, $tempTable);
            }

            $html = str_replace($table, $tempTable, $html);

            return $html;
        }

        if ($mobile && $page->type_id != 16) {
            // replace tables with divs for better mobile support

            preg_match_all('/<table[^>]*>.*?<\/table>/is', $this->html, $tables, PREG_OFFSET_CAPTURE);

            for ($y = 0; $y < count($tables[0]); $y++) {
                preg_match_all('/<table[^>]*>.*?<\/table>/is', $tables[0][$y][0], $nestedTables, PREG_OFFSET_CAPTURE);

                if (count($nestedTables[0]) > 0) {
                    //echo count($nestedTables[0]) . "<br />";
                    //print_r($nestedTables[0][0][0]);
                    for ($y = 0; $y < count($nestedTables[0]); $y++) {
                        $this->html = replaceTables($nestedTables[0][$y][0], $this->html);
                    }
                }
                $this->html = replaceTables($tables[0][$y][0], $this->html);
            }
            //$this->html = preg_replace('/<table[^>]*>(.*?)<\/table>/is', '<div style="width: 90%; margin: auto;">$1<div style="clear: both;"></div></div>', $this->html);
        }
        return $this->html; 
```

我遇到了嵌套表的问题，正则表达式正在查找第一次出现的结束表标记，而不是我需要它找到的那个。

如果有人可以引导我使用更好的正则表达式或不同的解决方案来用 div 替换表格，那就太好了。解决方案必须是通过操作字符串，这样就不必对我们的模板系统进行大修。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:34:22.870

正如许多人所说，使用正则表达式解析 HTML 不太可能是理想的方法。尽管如此，我还是做了一些研究以试图提供帮助，假设您出于某种原因必须使用这种方法。

听起来您可能会遇到与 PHP 如何解释正则表达式模式的贪婪有关的问题。我看到您使用了很多`?`量词，这可能会使其运行非贪婪搜索（基于我在[http://php.net/manual/en/reference.pcre.pattern.modifiers 上阅读的内容。](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)至少[php ）。](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)`U`您可以通过在部分或全部正则表达式模式上使用修饰符来解决此问题。这将反转贪婪，这可能会使您的`?`量词再次变得贪婪。

也就是说，您在那里有一组复杂的正则表达式检查，因此这肯定有可能导致一些意外行为。我建议你测试看看。

`U`作为参考，您可以通过在正则表达式关闭之后放置修饰符来调用修饰符`/`，就像您在某些地方所做`i`的那样。`s`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:39:47.283

对我来说最有效的是使用以下步骤处理 HTML 内容：

1.  使用 UTF-8 将内容转换为 UTF-8（`utf8_encode($s)`如果尚未使用 UTF-8）。

2.  使用转换为 XHTML`$tidy->repairFile($file, array('output-xhtml'=>true), 'utf8');`

3.  使用构建 DOM`$sx = simplexml_load_file($file, 'SimpleXMLElement', LIBXML_NOENT);`

4.  使用解析 DOM`$sx->xpath($xpath);`

我希望这会有所帮助！

# c# - 是否有充分的理由“向后”写东西，例如：if ("some_text" == var_name)？

> ID：12590291
> 
> 赞同：6
> 
> 时间：2012-09-25T20:07:48.250
> 
> 标签：c#, coding-style

我正在使用 C#.NET 以 4 人为一组做一个项目。虽然我很自然地写下了类似的内容： `if (var_name == "some_text")`，但其中一位小组成员强烈坚持将那行更改为`if ("some_text" == var_name)`并声称“这是一种更好的编程实践”，这是她从一些传感器程序员那里学到的。我们小组中没有人，甚至她自己，都不明白这背后的动机是什么，而且感觉更尴尬。这是更好的做法还是只是另一个城市神话？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T20:24:03.863

There's no good reason for this **in C#**.

In C you can inadvertently forget one of the = signs, and C allows this:

`if (x = 5)`

Which will compile and always return either true or false (true if the variable was set to any non-zero value, false if it was zero). This was a common source of errors, so writing `if (5 == x)` prevents this as the C compiler would complain if you ommitted one of the = signs.

C# however does NOT allow assignment to be treated as a boolean condition, and thus its impossible to make this mistake, so the suggestion is pointless. I'd recommend sticking to the more natural "if x equals 5" style.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T20:10:16.220

是的，我不是它的忠实粉丝.. 但是有.. 如果您错误地使用 operator assign ( `=`) 而不是 compare 它不会编译和/或它会立即崩溃。至少在“通用”编程语言中；-)

该网络对此进行了详细介绍-http: [//united-coders.com/christian-harms/what-are-yoda-conditions/](http://united-coders.com/christian-harms/what-are-yoda-conditions/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T21:07:32.233

我在大学上第一堂 C++ 课时就开始这样做了，以免意外地分配一个我试图检查的值，而且它总是跟着我。但是，当我使用 C# 时，我倾向于这样做：

```
if (var_name.Equals("some_text")) 
```

这不仅可以防止意外分配，而且对我来说，从视觉上看，看到 Equals() 比看到 == 更容易理解。只是我的两分钱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T18:08:23.777

当我在大学学习编程课程时，我被教导要倒着写。我们使用的是 C++，正如其他答案所说，它在 C++ 中有所不同。

# javascript - jQuery Mobile js 仅在我刷新页面时有效

> ID：12590293
> 
> 赞同：1
> 
> 时间：2012-09-25T20:08:00.547
> 
> 标签：javascript, json, jquery-mobile

我是 Jquery Mobile 的新手，我已经尝试了一切来解决这个问题。我有第一页是 index.php，这个页面从一个从 json 获取信息的 js 加载按钮。第二页（FichaTecnica.php）显示了该酒的信息（一切都是西班牙语，抱歉）。问题是我必须刷新浏览器中的页面才能加载信息，如果我回到第一页，我还必须刷新才能加载按钮。

任何帮助，将不胜感激。

谢谢。

**索引.php**

```
<div data-role="page" id="main">      
    <div data-role="header">         
        <h1>
            Page 1
        </h1>     
    </div>     

    <div data-role="content">
        <div>
            <img src="images/Vinos separador [Negro].png" />
        </div>
        <div data-role="controlgroup" data-role="controlgroup" id="buttonGroup">
        </div>

        <div>
            <img src="images/P Venta Separador [Negro].png" />
        </div>
        <div data-role="controlgroup" data-role="controlgroup" id="buttonGrouploc">
        </div>

    </div>     

    <div data-role="footer">              
    </div> 
</div>             

<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
<script src="js/variedadeslist.js"></script> 
```

**在第一页加载按钮的 Js 文件**

```
 var url="http://localhost/CavaOnline/json_variedades.php";      
        var buttonHtmlString = "", pageHtmlString = "";

        var jsonResults;

    $.getJSON(url,function(data){
        jsonResults = data.items;
        displayResults();       
    });

    function displayResults() {

        for (i = 0; i < jsonResults.length; i++) {
            buttonHtmlString += '<a data-transition="slide" href="FichaTecnica.php?id=' + jsonResults[i].id + '" id="'+ jsonResults[i].id +'" data-role="button">' + jsonResults[i].nombre + '</a>';
        }

        $("#buttonGroup").append(buttonHtmlString);
        $("#buttonGroup a").button();   
    } 
```

**第二页“FichaTecnica.php”**

```
 <div data-role="page" id="pagina2">
        <div data-role="header">
            <h1>
                Header
            </h1>
        </div>

        <div data-role="content">

            <div>

                 <div data-role="collapsible" data-collapsed="false">
                <h1>El Vino</h1>
                <div id="descripcion">

                </div>
                </div>

                <div data-role="collapsible" data-collapsed="false">
                <h1>Cata</h1>
                <div id="cata">

                </div>
                </div>

            </div>

            <a data-role="button" id="botonMarcas"></a>

        </div>

        <div data-role="footer">
            <h1>
                footer
            </h1>
        </div>            
    </div>

<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
<script src="js/descripcionlist.js"></script> 
```

**加载第二页信息的js**

```
$('#pagina2').live('pageinit',function(event){

var id =  getUrlVars()["id"];

$.getJSON('http://localhost/CavaOnline/json_variedades.php?id='+id, function(variedades) {

$.each(variedades, function(index, variedad) {

    $('#descripcion').append('<p>'+variedad[id - 1].descripcion+'</p>');
    $('#cata').append('<p>'+variedad[id - 1].cata+'</p>');
    $('#botonMarcas').append().attr("href", 'FichaTecnica.php?id=' + variedad[id - 1].id);

});

});

function getUrlVars() {

var vars = [], hash;

var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');

for(var i = 0; i < hashes.length; i++)

{

    hash = hashes[i].split('=');

    vars.push(hash[0]);

    vars[hash[0]] = hash[1];

}

return vars; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:26:23.150

It would be better to have your pageinit code wired up before you bring in the page. Therefore, make sure you include the JS as part of your first page.

Wire up the paginit, like so:

```
$(document).on('pageinit', '#pagina2', function(e) {
    /* TODO: Page 2 init code */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:01:33.390

您的初始页面未正确加载，因为您构建页面不正确（通过在其他元素加载后将 JS 包含在底部）。因此，JavaScript 仅在页面刷新后才生效，因为此时 JS 已经存在于 DOM 中。

这是基本的页面标记：

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Page Title</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-rc.2/jquery.mobile-1.2.0-rc.2.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0-rc.2/jquery.mobile-1.2.0-rc.2.min.js"></script>
</head> 

<body> 
    ...content goes here...
</body>
</html> 
```

此外，如果您包含任何会改变页面的自定义 JS（如您的 pageint），则它们应该在 jQuery 加载之后加载，但在 jQuery Mobile 加载之前加载（因此在头部两者之间插入该 JS 文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T02:40:53.757

我遇到过类似的问题，只是通过在链接中添加 data-ajax=false 来修复它们。

参考：[http ://api.jquerymobile.com/pagecontainer/](http://api.jquerymobile.com/pagecontainer/)

# playframework - Play Framework：通过标识符从 YAML 文件中获取对象

> ID：12590299
> 
> 赞同：0
> 
> 时间：2012-09-25T20:08:27.630
> 
> 标签：playframework, yaml, playframework-1.x

我将数据存储在 .yml 文件中。例子：

```
User(bob):
  email: bob@gmail.com
  password: secret
  username: Bobby
  country: US
  status: ACTIVE 
```

我想在测试中得到这个对象（通过标识符“bob”）。这有可能吗？在文档中找不到答案。

*播放框架1.2.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:10:12.570

这是不可能的，这个标识符只是用来引用yaml文件中的对象，不匹配对象的任何属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:18:34.550

您可能想查看开源 YamlBeans 库，它擅长这种事情。

# algorithm - 找到两个加权平均相等的子数组

> ID：12590301
> 
> 赞同：3
> 
> 时间：2012-09-25T20:08:38.270
> 
> 标签：algorithm

我们得到一个整数数组 A。我想找到两个具有相同加权平均值的最大长度的连续子数组（两个子数组的长度必须相等）。权重是子数组中的位置。例如

> A=41111921111119 子数组
> :: (11119) 和 (11119)

我试图通过 DP 找到所有子数组的加权平均值，然后按列对它们进行排序以找到具有相同长度的 2。但我无法进一步进行，而且我的方法似乎太模糊/蛮力。我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:01:03.170

第一步应该是对数组进行排序。然后可以识别并分解出任何成对的相等值。其余的数字都会不同，如下所示：

2、3、5、9、14、19 ...等

下一步是将对与它们的中心进行比较：

2 + 5 == 2 * 3 ？
3 + 9 == 2 * 5 ？
5 + 14 == 2 * 9 ？
9 + 19 == 2 * 14 ？

下一步是比较嵌套对，这意味着如果您有 ABCD，则将 A+D 与 B+C 进行比较。因此，对于上面的示例，它将是：

2+9 == 3+5？
3+15 == 5+9 ？
5+19 == 9+14 ？

接下来，您将三元组与两个内部值进行比较：

2 + 3 + 9 == 3 * 5 ？
2 + 5 + 9 == 3 * 3 ？
3 + 5 + 14 == 3 * 9 ？
3 + 9 + 14 == 3 * 5 ？
5 + 9 + 19 == 3 * 14 ？
5 + 14 + 19 == 3 * 9 ？

然后你会比较成对的三元组：

2 + 3 + 19 == 5 + 9 + 14 ？
2 + 5 + 19 == 3 + 9 + 14 ？
2 + 9 + 19 == 3 + 5 + 14 ？

等等。有不同的方式来进行排序。一种方法是创建一个初始括号，例如，给定 ABCDEFGH，初始括号是 ABGH 与 CDEF，即外部与中心相比。然后根据比较切换值。例如，如果 ABGH > CDEF，那么您可以尝试左侧值大于右侧值的所有开关。在这种情况下，G 和 H 大于 E 和 F，因此可能的开关是：

G <-> E
G <-> F
H <-> E
H <-> F
GH <-> EF

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:25:17.703

首先，由于两个子数组的长度必须相等，所以可以逐步考虑从 1 到 n 的长度。

对于长度 i，您可以计算每个子数组的加权和，总复杂度为 O(n)。然后对总和进行排序以确定是否存在相等的对。

因为你排序 n 次，所以时间是 O(n^2 log n)，而空间是 O(n)。

也许我只是重复了问题中提到的解决方案？但我认为它不能再优化了......

# wpf - 每个视图的视图模型

> ID：12590303
> 
> 赞同：0
> 
> 时间：2012-09-25T20:08:45.653
> 
> 标签：wpf, mvvm

每个 WPF 应用程序应该有多少个 ViewModel？View 是代表一个 xaml 文件还是代表“一个显示区域”？假设我在 MainWindow.xaml 中有左面板和文档面板，我应该将其拆分为 LeftPanelViewModel 和 DocumentPanelViewModel 吗？左面板和文档面板是分开的视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:10:36.110

我建议您拥有两个 ViewModel，LeftPanelViewModel 和 DocumentPanelViewModel，以便轻松维护您的代码。因为您的视图可以包含很多代码行（绑定的属性、命令、函数等...）

1 个视图 => 1 个视图模型

# ios - 何时调用 -[UITextInput selectionRectsForRange:]？

> ID：12590305
> 
> 赞同：3
> 
> 时间：2012-09-25T20:09:00.513
> 
> 标签：ios, cocoa-touch, ios6, uitextinput

我有一个带有实现 UITextInput 协议的自定义文本编辑器的应用程序。在 iOS 6 中，Apple 向协议中添加了一种新的必需方法：

```
- (NSArray *)selectionRectsForRange:(UITextRange *)range 
```

我已经实现了这个，但我似乎找不到触发它的方法。至少在我的应用程序的工作方式上，它似乎永远不会被文本系统调用。有谁知道它是干什么用的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T16:47:12.533

此方法仅由 UITextView 的子类使用。这是为您提供系统选择和放大镜的唯一方法。这是我在 WWDC 上被告知的。

我也在开发我自己的 DTRichTextEditor，但我还是实现了它，也许有一天我们也会为我们自己的 UIViews 获得选择/放大镜，这些 UIViews 不是从 UITextView 派生的。

# c++ - 在 C/C++ 中取消引用 char 指针？

> ID：12590309
> 
> 赞同：2
> 
> 时间：2012-09-25T20:09:18.103
> 
> 标签：c++, c, pointers, dereference, variable-address

我正在使用 DWARF 和 ELF 信息的程序工作。我使用名为 Pin 的工具迷上了另一个程序。我有来自“Y”程序中声明的全局变量的地址，并将其连接到我将称为“X”的 Pin 模块中。

我得到了这些全局变量的一堆地址。不幸的是，当我尝试取消引用它们时遇到了麻烦。例如（现在我正在手动做事情，看看它是否在做应该做的事情）：

```
char * limit, * address1;

for(address1 = (char *) 0x804A040, limit = address1 + bytesize; address1 < limit; address1++)
      cout <<  *(address1) << "\n"; 
```

我应该得到存储在那个地址中的变量，它是`char *`一个单词。在这种情况下我是否必须取消引用两个指针？地址，然后`char *`存储在该地址中？

当我想取消引用一个变量时，这工作得很好`int`，但是每当我尝试取消引用一个 char 指针或变量时，我都会得到`non-ASCII`值......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T20:14:24.933

像这样想：如果你想取消引用 an `int`，你使用`int *`：

```
int *addr = (int *)0x12345678;
printf("%d\n", *addr); 
```

但是一个字符串已经是一个指针，所以如果你这样做：

```
char *addr = (char *)0x12345678; 
```

您无需取消引用即可将其打印出来，因此您可以通过以下方式获得它：

```
printf("%s\n", addr); 
```

* * *

另外，假设你有这个内存：

```
00000001:  0x12345678
...
12345678:  'A'
12345679:  'B'
1234567A:  '\0'
... 
```

让我们访问地址`0x00000001`，看看我们能做什么：

```
unsigned int *addr = (unsigned int *)0x00000001; 
```

现在`*addr`保存一个整数，它是我们字符串的第一个字符的地址。接受字符串参数的函数通常要求字符串地址，即指向它的指针，因此`*addr`也是我们应该打印的字符串`cout`或`printf`例如。

```
// This should print "AB"
printf("%s\n", (char *)(*addr)); 
```

现在，如果您取消引用我们的值 ( `0x12345678`)，我们将获得字符串的第一个字符，并且只有它，作为`char`. 因此，如果您滥用它并将其取消引用到 a `char *`，`printf`将尝试搜索内存“A”，即`0x00000041`，并且可能会出现分段错误。

因此，取消引用其值以获取第一个字符的正确方法是：

```
// This should print "A"
printf("%c\n", (char)(**addr)); 
```

所以，作为一个结论，如果你仍然得到非 ASCII 值，那可能是地址之间这种层次结构的问题，我建议你严格调试内存，看看创建指向指针的指针是否正确你的字符串的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:13:36.353

是的，您需要取消引用两个指针。首先获取保存 char* 的变量的地址，然后取消对 char* 的引用。

# javascript - 无法使用dust.js 渲染一个简单的表格

> ID：12590311
> 
> 赞同：2
> 
> 时间：2012-09-25T20:09:31.930
> 
> 标签：javascript, dust.js

我无法使用dust.js 渲染一个简单的表格

这个模板：

```
<table>
    {#hours}
    <tr>
        <td>{dayText}</td>
        <td>{hoursText}</td>
    </tr>
    {/hours}
</table> 
```

输出：

```
<table>
    <tr>
        <td></td>
        <td></td>
    </tr>
</table> 
```

而将模板更改为无序列表可以正常工作：

```
<ul>
    {#hours}
    <li>{dayText}&nbsp;{hoursText}</li>
    {/hours}
</ul> 
```

这是模型：

```
{
hours: [
    {dayText: "Mo-Fri ", hoursText: "11:00-22:00"},
    {dayText:"Sat", hoursText: "12:00-22:00"},
    {dayText:"Sun", hoursText: "12:00-21:00"}
    ]
} 
```

模板是使用dust-full-1.1.0.js 在浏览器中编译的，我使用的是LinkedIn fork。

我是否发现了错误或错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:35:37.497

我找到了我的问题的原因。我的模板源是从页面内加载的：

```
$("#dust-templates").children().each(function() {
        var compiled = dust.compile($(this).html(), $(this).attr('id'));
        console.log(compiled);
        dust.loadSource(compiled);
    }) 
```

问题是浏览器没有逐字传递模板 html：

```
{#hours}

{/hours}
<table>
<tbody><tr>
    <td>{dayText}</td><td>{hoursText}</td>
    </tr></tbody>
</table> 
```

所以这并不像预期的那样工作并不奇怪。如果我将模板存储为 javascript 变量，它就可以工作。

# java - 找不到适合 jdbc:mysql://localhost/ 的驱动程序

> ID：12590314
> 
> 赞同：3
> 
> 时间：2012-09-25T20:09:42.097
> 
> 标签：java, mysql, jdbc, osx-lion

我正在尝试将我的代码从 linux 移植到 mac OSX LION。以下方法适用于 linux 就好了。

```
Connection getConnection() throws SQLException{
    String url = "jdbc:mysql://localhost/";
    return DriverManager.getConnection(url, "root", "mypassword");
} 
```

但它不适用于我的mac。我正在使用 XAMMP，所以我的数据库的路径是`/Applications/XAMPP/xamppfiles/bin/mysql`. 我得到的错误读取

```
Exception in thread "main" java.sql.SQLException: 
    No suitable driver found for jdbc:mysql://localhost/
at java.sql.DriverManager.getConnection(DriverManager.java:602)
at java.sql.DriverManager.getConnection(DriverManager.java:185) 
```

根据以下帖子的反馈进行更新：

我下载了 jar 并将其添加到项目的构建路径中。当我尝试添加时`Class.forName("com.mysql.jdbc.Driver")`，出现编译错误，因此我将其注释掉。然后我运行程序得到以下错误：

```
Exception in thread "main" com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:350)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2408)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2445)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2230)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
at java.sql.DriverManager.getConnection(DriverManager.java:582)
at java.sql.DriverManager.getConnection(DriverManager.java:185)
at learning.database.Classroom.getConnection(Classroom.java:42)
at learning.database.Classroom.main(Classroom.java:239)

Caused by: java.net.ConnectException: Connection refused
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)
at java.net.Socket.connect(Socket.java:529)
at java.net.Socket.connect(Socket.java:478)
at java.net.Socket.<init>(Socket.java:375)
at java.net.Socket.<init>(Socket.java:218)
at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:300)
... 16 more

Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T20:12:30.863

JAVA JDK 不附带特定的 SQL 驱动程序（即 mySQL、postgre、MS SQL 等）。您需要单独下载和安装它们。可以在此处找到 java mysql 连接器的下载链接：

[http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)

它说将驱动程序放在你的类路径中，但你也可以将它放在你的 IDE 的构建路径中，这可能更容易取决于你在做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T20:14:44.450

确保 mysql jdbc 连接器位于 CLASSPATH 中。您可能还需要加载驱动程序，在尝试获取连接之前添加以下行：

```
Class.forName("com.mysql.jdbc.Driver"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:11:44.233

你需要在你的mac的类路径上有你的mysql jdbc连接器jar。

# perl - Perl 对数组的引用数组进行排序

> ID：12590318
> 
> 赞同：2
> 
> 时间：2012-09-25T20:10:04.043
> 
> 标签：perl, sorting, reference

我对 Perl 比较陌生。我有一个名为 $TransRef 的数组的引用，其中包含对数组的引用。我的目标是编写一个将 $TransRef 参数作为其唯一参数的子程序，按第二个元素（字符串）对底层数组的引用进行排序，并将输出设置回 $TransRef 引用。有人可以展示如何在 Perl 中完成此操作吗？

下面是一些生成 $TransRef 的代码。它尚未经过测试，可能存在一些错误：

```
# Parse the data and move it into the Transactions container.
for ($Loop = 0; $Loop < 5; $Loop++)
{
   $Line = $LinesInFile[$Loop];
   # Create an array called Fields to hold each field in $Line.
   @Fields = split /$Delimitor/, $Line;  
   $TransID = $Fields[2];
   # Save a ref to the fields array in the transaction list.
   $FieldsRef = \@Fields;
   ValidateData($FieldsRef);
   $$TransRef[$Loop] = $FieldsRef;
}
SortByCustID($TransRef);

sub SortByCustID()
{
   # This sub sorts the arrays in $TransRef by the 2nd element, which is the cust #.
   # How to do this?
   my $TransRef = @_;
   ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T20:16:04.257

很简单：

```
sub sort_trans_ref {
    my $transRef = shift;
    @$transRef = sort { $a->[1] cmp $b->[1] } @$transRef;
    return $transRef;
} 
```

虽然对我来说不修改原始数组会更自然：

```
sub sort_trans_ref {
    my $transRef = shift;
    my @new_transRef = sort { $a->[1] cmp $b->[1] } @$transRef;
    return \@new_transRef;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:16:45.050

```
sub string_sort_arrayref_by_second_element {

  my $param = shift;
  @$param = sort { $a->[1] cmp $b->[1] } @$param;

} 
```

# c# - 我在 JIT/CLR 中发现了一个错误 - 现在我该如何调试或重现它？

> ID：12590325
> 
> 赞同：25
> 
> 时间：2012-09-25T20:10:32.393
> 
> 标签：c#, .net, debugging, compiler-errors, jit

我有一个计算量很大的多线程 C# 应用程序，它似乎在运行 30-90 分钟后一直崩溃。它给出的错误是

> 运行时遇到致命错误。错误地址位于线程 0xbcc 上的 0xec37ebae。错误代码为 0xc0000005。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

*（0xc0000005 是[Access Violation](http://blogs.msdn.com/b/calvin_hsia/archive/2004/06/30/170344.aspx)的错误代码）*

我的应用程序不调用任何本机代码，也不使用任何不安全的块，甚至不使用任何不符合 CLS 的类型，例如`uint`. 事实上，调试器所说的导致崩溃的代码行是

```
overallLength += distanceTravelled; 
```

两个值都是类型`double`

* * *

鉴于这一切，我认为崩溃一定是由于编译器或 CLR 或 JIT 中的错误。我想弄清楚是什么原因造成的，或者至少写一个较小的复制品发送给微软，但我什至不知道从哪里开始。我从来不需要查看 CIL 二进制文件、编译的 JIT 输出或本机堆栈跟踪*（崩溃时没有托管堆栈跟踪）*，所以我不确定如何。我什至不知道如何在崩溃时查看所有变量的状态*（不幸的是，VS 不会像在托管异常之后那样告诉我，并且将它们输出到控制台/文件会减慢app 1000 倍，这显然不是一个选项）*。

那么，**我该如何调试呢？**

* * *

**[编辑]**在 VS 2010 SP1 下编译，运行最新版本的 .Net 4.0 Client Profile。显然它是*“.Net 4.0C/.Net 4.0E，.Net CLR 1.1.4322”*

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-01T05:58:21.013

> 我想弄清楚是什么原因造成的，或者至少写一个较小的复制品发送给微软，但我什至不知道从哪里开始。

“更小的复制”在这里听起来绝对是个好主意……即使“更小”并不意味着“更快地复制”。

在你开始之前，尝试在另一台机器上重现错误。如果您无法在另一台机器上重现它，则表明需要进行一组完全不同的测试——硬件、安装等。

另外，请检查您是否使用了所有内容的最新版本。花几天时间调试它会很烦人（这很可能，我担心）然后最终得到一个响应“是的，我们知道这一点 - 这是 .NET 4 中的一个错误，已在 .NET 4.5 中修复“ 例如。如果您可以在各种框架版本上重现它，那就更好了:)

接下来，删除程序中的所有内容：

*   它有用户界面吗？如果可能，将其删除。
*   它使用数据库吗？看看您是否可以删除所有数据库访问：绝对是以后不使用的任何输出，理想情况下也是输入。如果您可以在应用程序中对输入进行硬编码，那将是理想的 - 但如果不能，文件复制比数据库访问更简单。
*   它对数据敏感吗？同样，在不了解应用程序的情况下很难知道这是否有用，但假设它正在处理大量数据，您是否可以使用二进制搜索来查找导致问题的相对少量数据？
*   它*必须*是多线程的吗？如果您可以删除所有线程，显然这可能需要更长的时间来重现问题 - 但它仍然会发生吗？
*   尝试删除一些业务逻辑：如果您的应用程序被适当地组件化，您可以通过首先创建一个存根实现，然后简单地删除调用来伪造整个重要组件。

所有这些都将逐渐减小应用程序的大小，直到它更易于管理。在每一步，您都需要再次运行该应用程序，直到它崩溃或您确信它不会崩溃。如果您有很多可用的机器，那应该会有所帮助...

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-22T07:55:45.343

tl;dr**确保您正在编译为 .Net 4.5**

* * *

这听起来很像[这里](https://stackoverflow.com/questions/4367664/application-crashes-with-internal-error-in-the-net-runtime)发现的相同错误。从[MSDN 页面](http://support.microsoft.com/kb/2679415)：

> 当垃圾收集器释放和压缩内存时，可能会遇到此错误。当启用并发垃圾收集并且发生前台垃圾收集和后台垃圾收集的某种组合时，可能会发生错误。当这种情况发生时，您将一遍又一遍地看到相同的调用堆栈。在堆上你会看到一个空闲对象，在它结束之前你会看到另一个空闲对象破坏堆。

修复方法是编译为 .Net 4.5。如果由于某种原因你不能这样做，你也可以通过在文件中禁用来[禁用并发垃圾回收：](http://msdn.microsoft.com/en-us/library/at1stbec.aspx)`gcConcurrent``app.config`

```
<configuration>
   <runtime>
       <gcConcurrent enabled="false"/>
   </runtime>
</configuration> 
```

或者只是编译为`x86`.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-25T20:57:54.037

WinDbg 是你的朋友：

*   [http://blogs.msdn.com/b/tess/archive/2006/02/09/net-crash-managed-heap-corruption-calling-unmanaged-code.aspx](http://blogs.msdn.com/b/tess/archive/2006/02/09/net-crash-managed-heap-corruption-calling-unmanaged-code.aspx)

*   [http://www.codeproject.com/Articles/23589/Get-Started-Debugging-Memory-Related-Issues-in-Net](http://www.codeproject.com/Articles/23589/Get-Started-Debugging-Memory-Related-Issues-in-Net)

*   [http://www.codeproject.com/Articles/22245/Quick-start-to-using-WinDbg](http://www.codeproject.com/Articles/22245/Quick-start-to-using-WinDbg)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-05T13:35:02.050

下载[调试诊断工具 v1.2](http://www.microsoft.com/en-us/download/details.aspx?id=26798)

1.  运行程序
2.  添加规则“崩溃”
3.  选择“具体流程”
4.  如果您知道它在哪个异常上失败，或者只保留此页面原样，请在页面*高级配置上设置您的异常*
5.  设置用户转储位置

现在等待进程崩溃，DebugDiag 创建日志文件。现在激活选项卡*Advanced Analysis*，在顶部列表中选择 Crash/Hang Analyzers 并在下方列表中选择转储文件，然后点击*Start Analysis*。这将为您生成 html 报告。希望您在该报告中找到有用的信息。如果您在分析时遇到问题，请将 html 报告上传到某处并将 url 放在这里，以便我们专注于它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-01T06:21:55.240

> 我的应用程序不调用任何本机代码，也不使用任何不安全的块，甚至不使用任何不符合 CLS 的类型，例如 uint

您可能会这样认为，但是线程、通过信号量进行同步、互斥以及任何句柄都是本机的。.net 是操作系统的一个层，.net 本身不支持多线程应用程序的纯 clr 代码，这是因为操作系统已经做到了。

这很可能是线程同步错误。可能有多个线程正在尝试访问 clr 边界之外的共享资源，例如文件等。

您可能认为您没有访问 com 等，但是当您调用某些 API（如获取桌面文件夹路径等）时，它是通过 shell com API 调用的。

您有以下两种选择，

1.  发布您的代码，以便我们检查瓶颈
2.  使用 .net 并行线程框架重新设计您的应用程序，其中包括需要 CPU 密集型操作的各种算法。

最有可能的程序在一段时间后失败，因为集合长大并且操作在其他线程干扰之前无法执行。例如生产者消费者问题，直到生产者变慢或在消费者启动之前无法完成其操作时，您才会注意到任何问题。

clr 中的错误很少见，因为 clr 非常稳定。但是写得不好的代码可能会导致错误在 clr 中显示为 bug。Clr 不能也永远不会检测到错误是在您的代码中还是在 clr 本身中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-01T06:27:13.903

*   你有没有对你的机器进行内存测试，因为有一次我有类似的症状，我的一个调光器出现了故障（Win7 中包含一个非常好的内存测试器；[http://www.tomstricks.com/how-to-用 Windows 内存诊断工具在 Windows 7/ 中测试你的内存或内存](http://www.tomstricks.com/how-to-test-your-ram-or-memory-with-windows-memory-diagnostic-tool-in-windows-7/)）

*   如果您的 CPU 在这段时间之后变得太热，也可能是加热/节流问题。虽然这会更快发生恕我直言。

*   应该有一个可以分析的转储文件。如果您从未这样做过，请找到这样做的人，或将其发送给微软

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-06T02:31:22.760

我建议您立即通过[http://support.microsoft.com](http://support.microsoft.com)打开支持案例，因为支持人员可以向您展示如何收集必要的信息。

一般来说，就像@paulsm4 和@psulek 所说，您可以利用WinDbg 或Debug Diag 来捕获进程的故障转储，并在其中嵌入所有必要的信息。但是，如果这是您第一次使用这些工具，您可能会感到困惑。Microsoft 支持团队可以为您提供有关它们的分步指导，或者他们甚至可以与您建立 Live Meeting 会话以捕获数据，因为程序经常崩溃。

一旦您熟悉了这些工具，将来您可以更轻松地执行类似的故障排除，

[http://blogs.msdn.com/b/lexli/archive/2009/08/23/when-the-application-program-crashes-on-windows.aspx](http://blogs.msdn.com/b/lexli/archive/2009/08/23/when-the-application-program-crashes-on-windows.aspx)

顺便说一句，现在说“我发现了一个错误”还为时过早。尽管您无法在程序中明显找到对本机代码的依赖，但它可能仍然对本机代码有依赖。在进一步调试问题之前，我们不应该得出结论。

# shell - 查找具有特定权限的文件

> ID：12590327
> 
> 赞同：2
> 
> 时间：2012-09-25T20:10:41.567
> 
> 标签：shell, unix, pipeline

我需要编写一个命令管道，它将显示对所有用户具有读取权限的所有非隐藏文件。我不知道为什么这不起作用：

```
find * -perm a=r -print 
```

我没有得到任何输出，也不确定我哪里出错了。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:50:45.610

你应该这样指定

寻找 。-type f -perm -a+x 或查找 . -type f -perm -a=x

注意 -

或者你也可以使用八进制

寻找 。-type f -perm -655

. 指定当前目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:13:19.863

您需要将其指定为：

```
find * -perm -a+r 
```

注意a前面的破折号。

# ios - AVCaptureOutput captureStillImageAsynchronouslyFromConnection 永远不会在 iPhone5 上完成

> ID：12590330
> 
> 赞同：8
> 
> 时间：2012-09-25T20:10:53.013
> 
> 标签：ios

在我的应用程序中，我正在显示**AVCaptureVideoPreviewLayer**，然后当用户使用**AVCaptureOutput中的****captureStillImageAsynchronouslyFromConnection**函数单击按钮时捕获静止图像。这对我来说一直很好，直到 iPhone 5，它从未完成。

 **我的设置代码是：

```
...
self.imageOutput = [[AVCaptureStillImageOutput alloc] init];
NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
[self.imageOutput setOutputSettings:outputSettings];

self.captureSession = [[[AVCaptureSession alloc] init] autorelease];
[self.captureSession addInput:self.rearFacingDeviceInput];
[self.captureSession addOutput:self.imageOutput];
[self.captureSession setSessionPreset:AVCaptureSessionPresetPhoto];

self.previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.captureSession];
self.previewLayer.frame = CGRectMake(0, 0, 320, 427);
self.previewLayer.videoGravity = AVLayerVideoGravityResizeAspect;

[self.captureSession startRunning];
[outputSettings release]; 
```

我的捕获方法是：

```
AVCaptureConnection *videoConnection = nil;
for (AVCaptureConnection *connection in self.imageOutput.connections){
    for (AVCaptureInputPort *port in [connection inputPorts]){
        if ([[port mediaType] isEqual:AVMediaTypeVideo] ){
            videoConnection = connection;
            break;
        }
    }
    if (videoConnection) { break; }
}

//code to abort if not return 'soon'
...

[self.imageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error){

    //use image here

}]; 
```

captureStillImageAsynchronouslyFromConnection 永远不会为我使用 iPhone5 完成

我已经测试过：

*   它不是 OS 6，因为此代码适用于已更新的 iPhone 4s 和 iPod（iPod touch（第 4 代）

*   captureSession 正在运行

*   videoConnection 不为零

*   imageOutput 不为零

还：

*   我使用这种方法而不是 UIImagePickerController 因为我需要将预览作为子视图。

*   在 iPhone 5 上，在捕获会话上调用**stopRunning 也**需要几秒钟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T08:37:20.080

好吧，这段代码工作正常。针对 iPhone 4 和 5 进行了测试（baseSDK 7.1，在 ARC 下）。

你需要考虑的事情很少。

1）确保正确设置了rearFacingDeviceInput，

```
AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
[self setRearFacingDeviceInput:[AVCaptureDeviceInput deviceInputWithDevice:device error:nil]]; 
```

2）正如[文森特](https://stackoverflow.com/users/1644934/vincent)所说，会有错误，尝试同时记录错误和imageSampleBuffer

3) 会话的 -startRunning 和 -stopRunning 操作需要很长时间才能完成（几秒钟，甚至 5-6 秒），这些方法在完成所有工作之前不会返回，为避免 UI 阻塞，您不应在 main 上调用这些方法线程，一种方法是使用 GCD

```
dispatch_queue_t serialQueue = dispatch_queue_create("queue", NULL);
dispatch_async(serialQueue, ^{
    [self.captureSession startRunning];
}); 
```

如果仍然 captureStillImageAsynchronously 没有完成（为确保这一点，在块中添加断点并记录所有内容），您应该检查设备的摄像头。我相信您的代码适用于所有 iPhone 5 设备。希望这有帮助，祝你好运。**

# haskell - 如果“输出”值与被迭代的值不同，那么前奏迭代的替代方案是什么？

> ID：12590332
> 
> 赞同：5
> 
> 时间：2012-09-25T20:11:00.033
> 
> 标签：haskell

我遇到了一种模式，我从一个种子值开始`x`，在每一步生成一个新的种子值和一个要输出的值。我想要的最终结果是输出值列表。这可以用以下函数表示：

```
my_iter :: (a -> (a, b)) -> a -> [b]
my_iter f x = y : my_iter f x'
   where (x',y) = f x 
```

使用它的一个人为的例子是生成斐波那契数：

```
fibs:: [Integer]
fibs = my_iter (\(a,b) -> let c = a+b in ((b, c), c)) (0,1)
-- [1, 2, 3, 5, 8... 
```

**我的问题是我有一种感觉，很可能有一种更惯用的方式来做这种事情。我的功能有哪些惯用的替代方法？**

我现在唯一能想到的都是`iterate`前奏曲中的，但它们有一些缺点。

一种方法是先迭代，然后再映射

```
my_iter f x = map f2 $ iterate f1 x
    where f1 = fst . f
          f2 = snd . f 
```

但是，如果没有自然的方法将 f 拆分为单独的 f1 和 f2 函数，这可能看起来很难看。（在人为的斐波那契案例中，这很容易做到，但在某些情况下，生成的值不是种子的“独立”函数，因此拆分事物并不那么简单）

另一种方法是将“输出”值与种子一起元组，并使用单独的步骤将它们分开（有点像用于排序的“施瓦茨变换”）：

```
my_iter f x = map snd . tail $ iterate (f.fst) (x, undefined) 
```

但这似乎很奇怪，因为我们必须记住忽略生成的值以获取种子（（f.fst）位）并添加我们需要一个“未定义”值作为第一个虚拟生成值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T20:36:57.763

如前所述，您想要的功能是[`unfoldr`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3aunfoldr). 顾名思义，它与 相反`foldr`，但确切地了解为什么它是正确的可能是有启发性的。这是 的类型`foldr`：

```
(a -> b -> b) -> b -> [a] -> b 
```

前两个参数是获取类型的方法`b`，对应于列表的两个数据构造函数：

```
[]  :: [a]
(:) :: a -> [a] -> [a] 
```

...其中每次出现的`[a]`都被替换为`b`. 请注意，该`[]`案例产生`b`没有输入的 a，我们可以将两者合并为一个以`Maybe (a, b)`作为输入的函数。

```
(Maybe (a, b) -> b) -> ([a] -> b) 
```

额外的括号表明，这本质上是将一种转换转换为另一种转换的函数。

现在，只需反转两个转换的方向：

```
(b -> Maybe (a, b)) -> (b -> [a]) 
```

结果正是 的类型`unfoldr`。

这展示的基本思想也可以类似地应用于其他递归数据类型。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T20:15:36.640

您正在寻找的标准功能称为[展开器](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v:unfoldr)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-25T20:59:20.150

[在这种情况下， Hoogle](http://www.haskell.org/hoogle/)是一个非常有用的工具，因为它不仅支持按名称搜索功能，还支持按类型搜索功能。

在您的情况下，您想出了所需的 type [`(a -> (a, b)) -> a -> [b]`](http://www.haskell.org/hoogle/?hoogle=%28a+-%3E+%28a%2C+b%29%29+-%3E+a+-%3E+[b])。输入它不会产生任何结果 - 嗯。

好吧，也许有一个语法略有不同的标准函数。例如，标准函数的参数可能会翻转；让我们在某处寻找[`(a -> (a, b))`](http://www.haskell.org/hoogle/?hoogle=%28a+-%3E+%28a%2C+b%29%29)其类型签名中的东西。这次我们很幸运，因为有很多结果，但是它们都在异国情调的包装中，而且似乎没有一个很有帮助。

也许你的函数的第二部分是一个更好的匹配，毕竟你想从一些初始元素中生成一个列表 - 所以输入[`a -> [b]`](http://www.haskell.org/hoogle/?hoogle=a+-%3E+[b])并点击搜索。第一个结果：[`unfoldr`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v:unfoldr)- 宾果！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T20:45:07.400

另一种可能性是`iterateM`在`State`monad：

```
iterateM :: Monad m => m a -> m [a]
iterateM = sequence . repeat 
```

它不在标准库中，但很容易构建。

所以你`my_iter`是

```
evalState . sequence . repeat :: State s a -> s -> [a] 
```

# wpf - 如何使用 xaml 将 WPF 应用程序窗口启动位置设置为右上角？

> ID：12590336
> 
> 赞同：13
> 
> 时间：2012-09-25T20:11:07.967
> 
> 标签：wpf

我只想将 windowstartuplocation 设置为桌面的右上角。现在要澄清一些事情，我看到这个线程有同样的问题：

[更改 WPF 窗口的启动位置](https://stackoverflow.com/questions/1545258/changing-the-start-up-location-of-a-wpf-window)

现在我不想对他们所指的右或左感到困惑，我希望我的应用程序从右上角开始，其中右指的是我的右侧（不像我的桌面是一个看着我的人并且它的右侧）。所以，

1.）仅将左侧和顶部设置为 0 不是解决方案（将应用程序带到左侧而不是右侧）

2.)我尝试使用 SystemParameters.PrimaryScreenWidth，但我无法在绑定时执行从该值中减去我的应用程序宽度的操作。

有没有一种方法可以在不涉及太多复杂性的情况下做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-25T20:20:32.200

> 有没有一种方法可以在不涉及太多复杂性的情况下做到这一点？

最简单的方法是手动设置起始位置，然后`Left`在后面的代码中设置属性：

```
<Window x:Class="WpfApplication1.Window1" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    Title="Window1" 
    Height="500" Width="500"
    WindowStartupLocation="Manual" 
    Top="0">
</Window> 
```

在您后面的代码中：

```
public Window1()
{
    InitializeComponent();
    this.Left = SystemParameters.PrimaryScreenWidth - this.Width;
} 
```

这是我觉得在代码中执行它的简单性超过了在后面引入代码的任何缺点的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-08T16:09:12.757

通过使用 WorkArea.Width 确保考虑到任务栏的宽度（当放置在一侧、左侧或右侧时）。通过使用 this.Width 或 this.MaxWidth 确保您的窗口永远不会滑出工作区域，但两者都需要设置它们的值（在 xaml 或后面的代码中）以不为 this.Left 生成值 NaN（不是数字） .

```
public MainWindow()
    {
        InitializeComponent();
        this.Left = SystemParameters.WorkArea.Width - this.MaxWidth;
    }

<Window
    ... more code here ...
    WindowStartupLocation="Manual" Top="0" MaxWidth="500" > 
```

# android - 在 Android 中如何将 ListAdapter 值传递给 onItemClick？

> ID：12590339
> 
> 赞同：2
> 
> 时间：2012-09-25T20:11:28.747
> 
> 标签：android, listview

我的应用程序上有一个功能正常的搜索界面。现在我正在尝试使每个搜索结果列表项都可单击并显示在新活动中。我让它们可以点击，但我不知道如何将`ListAdapter`值（记录）传递到`onItemClick`方法中。

到目前为止，这是我的代码：

```
private void showResults(String query) {
    Cursor cursor = DBHelper.searchDB(query);
    startManagingCursor(cursor);
    String[] searchFrom = new String[] { DBAdapter.KEY_MAKE,
            DBAdapter.KEY_YEAR, DBAdapter.KEY_MAKE,
            DBAdapter.KEY_MODEL };
    int[] displayHere = new int[] { R.id.rDateTV, R.id.rYearTV,
            R.id.rMakeTV, R.id.rModelTV };

    final SimpleCursorAdapter records = new SimpleCursorAdapter(this,
            R.layout.record_2, cursor, searchFrom, displayHere);

    setListAdapter(records);
    DBHelper.close();

    // --- Click on list item ---

    ListView clickList = getListView(); 
    clickList.setOnItemClickListener(new AdapterView.OnItemClickListener() { 
        @Override 
        public void onItemClick(AdapterView<?> parent, View view, int position, long id)        {
            //--- here's the problem: how do I pass the ListAdapter values into onItemClick. the below doesn't like .getText()
            String sYear = (view.findViewById(R.id.rYearTV)).getText().toString();
            String sMake = (view.findViewById(R.id.rMakeTV)).getText().toString();
            String sModel = (view.findViewById(R.id.rModelTV)).getText().toString();

            // -- then pass these strings to an intent to launch a new activity

        } 
    });

    // --- END click on list item ----

} 
```

有任何想法吗？我是这里的菜鸟，所以如果你能给我看代码，那就太棒了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:30:51.690

在`OnItemClickListener.onItemClick`通话`parent.getItemAtPosition(position)`中。该方法返回设置到给定位置的光标。然后从该游标中获取您的数据。不要在`OnItemClickListener.onItemClick`.

例如：

```
ListView clickList = getListView(); 
    clickList.setOnItemClickListener(new AdapterView.OnItemClickListener() { 
        @Override 
        public void onItemClick(AdapterView<?> parent, View view, int position, long id)        {
            Cursor c = (Cursor)parent.getItemAtPosition(position)
            String sMake = c.getString(c.getColumnIndexOrThrow(DBAdapter.KEY_MAKE));//get data from cursor

           ...
        } 
    }); 
```

# android - Android 中 FindViewById 的 Nullpointer 异常

> ID：12590342
> 
> 赞同：2
> 
> 时间：2012-09-25T20:12:05.983
> 
> 标签：android, nullpointerexception, findviewbyid, convertview

# 大家好

今天我开始开发自己的小闹钟应用程序。但是现在我遇到了一个问题，我找了三个小时都没有解决。

当我尝试为每一行实现具有自定义设计的列表视图时，当我尝试从布局中的 textview 设置文本时，我得到一个 NullPointerException。此异常的原因是 findViewById-Call 返回 null 而不是我想要的 TextView。

在我的搜索中，我找到了这两个帖子，但不幸的是它们并没有很好的帮助......

[Post1 - 堆栈溢出](https://stackoverflow.com/questions/9057819/nullpointerexception-custom-listview-adapter)

[Post2 - 堆栈溢出](https://stackoverflow.com/questions/10699422/android-listview-custom-items-nullpointerexception-findviewbyid-returns-null)

我使用的基本结构与上面两篇文章中的相同，但我找不到错误...这是我的应用程序中的一些代码：

listitem_row.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:orientation="vertical"
android:padding="6dip" >

 <TextView
    android:name="@+id/toptext"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:layout_gravity="center_vertical"/>

  <TextView
    android:name="@+id/bottomtext"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:layout_gravity="center_vertical"/>

 </LinearLayout> 
```

我的适配器：

```
public class AlarmClockArrayAdapter extends ArrayAdapter<RowItem> {    
    private class ViewHolder {
    TextView headText;
    TextView subText;
   }

public AlarmClockArrayAdapter(Context context, int layoutId, List<RowItem> objects) {
    super(context, layoutId, objects);
    this.mContext    = context;
    this.layoutResourceId = layoutId;
    this.mListItems  = objects;
}

 /**    getView()
 * 
 *  ListView asks the Adapter for a view for each list item element 
 *  Override the getView()-Method to customize the ListView
 */
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder = null;

    LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
    if(convertView == null) {
        convertView = inflater.inflate(layoutResourceId, parent, false);
        holder = new ViewHolder();
                    // findViewById(...) returns Null 
        holder.headText = (TextView) convertView.findViewById(R.id.toptext);
        holder.subText  = (TextView) convertView.findViewById(R.id.bottomtext);
        convertView.setTag(holder);     
    }
    else {
        holder = (ViewHolder) convertView.getTag();
    }

    RowItem rowItem = (RowItem) getItem(position);

            // HERES THE NULLPOINTEREXCEPTION
    holder.headText.setText(rowItem.getHeadText());
    holder.subText.setText(rowItem.getSubText());

    return convertView;
} 
```

至少是 MainActivity，我从那里实例化适配器

```
public class MainActivity extends Activity {
 public void initList() {

    //Adapter for the listview
    AlarmClockArrayAdapter mAdapter = new AlarmClockArrayAdapter(this, R.layout.listitem_row, this.mListItems);

    final ListView mListView = (ListView) findViewById(R.id.listView1);
    mListView.setAdapter(mAdapter);
} 
```

任何帮助都会很棒...谢谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:22:57.753

**1)**签到

```
holder.headText.setText(rowItem.getHeadText()); 
```

正是 holder.headText 返回 null

**2)**签到

```
if(convertView == null) {}
else {
    holder = (ViewHolder) convertView.getTag();
} 
```

执行第一个分支

**3）**通常我这样做：

```
// in constructor
inflater = LayoutInflater.from(context); // context from Activity

public View getView(int position, @Nullable View convertView, ViewGroup parent) {
  if (convertView == null) {
    convertView = inflater.inflate(R.layout.listitem_row, null);
  }

  headText = (TextView) convertView.findViewById(R.id.toptext);
  subText  = (TextView) convertView.findViewById(R.id.bottomtext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:51:52.037

尝试在没有父级的情况下膨胀布局

用这个：

```
convertView = inflater.inflate(layoutResourceId, null); 
```

取而代之的是：

```
convertView = inflater.inflate(layoutResourceId, parent, false); 
```

*编辑 1*

如果这没有帮助，请尝试在 getView() 中按 id 膨胀布局

```
convertView = inflater.inflate(R.layout.listitem_row, null); 
```

# c# - 随机产品列表被覆盖

> ID：12590344
> 
> 赞同：0
> 
> 时间：2012-09-25T20:12:24.217
> 
> 标签：c#

我正在尝试使用以下方法生成随机产品列表，但我多次获得相同的产品实例。

```
Output for count 5:
Name: Qmlcloboa Price: 3.608848
Name: Qmlcloboa Price: 3.608848
Name: Qmlcloboa Price: 3.608848
Name: Qmlcloboa Price: 3.608848
Name: Qmlcloboa Price: 3.608848 
```

我读到 List 类型是一种引用类型，它会覆盖东西。下面是我的代码。我是否遗漏了一些可以为我提供独特产品实例的东西？谢谢，我会很感激你的帮助。

```
public List<Product> ProductGroupGenerator(int count)
    {
        List<Product> pList = new List<Product>();

        for (int i = 0; i < count; i++)
        {
            Random r = new Random();
            string alphabet = "abcdefghijklmnopqrstuvwyxzeeeiouea";
            Func<char> randomLetter = () => alphabet[r.Next(alphabet.Length)];
            Func<int, string> makeName =
              (length) => new string(Enumerable.Range(0, length)
                 .Select(x => x == 0 ? char.ToUpper(randomLetter()) : randomLetter())
                 .ToArray());

            //string last = makeName(r.Next(7) + 7);
            //string company = makeName(r.Next(7) + 7) + " Inc.";

            string prodName = makeName(r.Next(5) + 5);
            int unitsInStock = r.Next(100);
            float unitPrice = (float)(r.NextDouble() * 10);

            Product p = new Product();
            p.Name = prodName;
            p.UnitsInStock = unitsInStock;
            p.UnitPrice = unitPrice;

            pList.Add(p);

            p = null;
        }

        return pList;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T20:14:12.703

当调用太快时，多个`Random r = new Random()`'s 将产生具有相同种子的随机数。

在 for 循环之外声明一次，你应该有更好的值。

```
 Random r = new Random();
    for (int i = 0; i < count; i++)
    { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T20:15:33.927

将 Random 变量的创建移到顶部两行：

```
Random r = new Random();
for (int i = 0; i < count; i++)
{ 
```

否则，您总是对随机数使用相同的种子，因为 for 循环执行得太快。构造`Random`函数使用当前时间。它相当于 new [`Random(Environment.TickCount)`](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)。

> 默认种子值来自系统时钟并且具有有限的分辨率。因此，通过调用默认构造函数连续创建的不同 Random 对象将具有相同的默认种子值，因此将产生相同的随机数集。这个问题可以通过使用单个 Random 对象来生成所有随机数来避免。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:15:55.957

尝试创建 的单个实例，并在循环`Random`期间使用它。`for`每次创建 的实例时`Random`，它都会重置种子，因此每次调用都会获得相同的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T20:16:11.093

随机播种

```
Random r = new Random(DateTime.Now.Millisecond); 
```

另外，在循环之外声明它。

# python - 将多个列表映射到字典

> ID：12590358
> 
> 赞同：3
> 
> 时间：2012-09-25T20:13:25.327
> 
> 标签：python, list, dictionary, mapping

我有 5 个列表，我想将它们映射到分层字典。

假设我有：

```
temp = [25, 25, 25, 25]
volt = [3.8,3.8,3.8,3.8]
chan = [1,1,6,6]
rate = [12,14,12,14]
power = [13.2,15.3,13.8,15.1] 
```

我想要的字典是这样的：

```
{25:{3.8:{1:{12:13.2,14:15.3},6:{12:13.8,14:15.1}}}} 
```

基本上字典结构是：

```
{temp:{volt:{chan:{rate:power}}}} 
```

我尝试使用 zip 函数，但在这种情况下它没有帮助，因为顶层列表中的重复值

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T20:30:39.910

这只是经过轻微测试，但似乎可以解决问题。基本上，`f`所做的是创建一个`defaultdict`of `defaultdicts`.

```
f = lambda: collections.defaultdict(f)
d = f()
for i in range(len(temp)):
    d[temp[i]][volt[i]][chan[i]][rate[i]] = power[i] 
```

例子：

```
>>> print d[25][3.8][6][14]
15.1 
```

[（这个想法是从这个对相关问题的回答](https://stackoverflow.com/a/12414913/1639625)中借来的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:33:50.497

您可以尝试以下...我相信它可以满足您的需求

```
>>> # Given your sample data.
>>> ans = {}
>>> for (t, v, c, r, p) in zip(temp, volt, chan, rate, power):
...     if not t in ans:
...             ans[t] = {}
...     if not v in ans[t]:
...             ans[t][v] = {}
...     if not c in ans[t][v]:
...             ans[t][v][c] = {}
...     if not r in ans[t][v][c]:
...             ans[t][v][c][r] = p
>>> print ans
{25: {3.8: {1: {12: 13.2, 14: 15.3}, 6: {12: 13.8, 14: 15.1}}}} 
```

# javascript - 在文本区域内显示 MathML 符号

> ID：12590359
> 
> 赞同：2
> 
> 时间：2012-09-25T20:13:31.830
> 
> 标签：javascript, textarea, symbols, mathml

我正在构建一个基本上是 HTML 文件中的数学文本编辑器。我的目标是允许用户在文本区域中显示数字和 MathML 符号，但完全不使用物理键盘。在页面的底部，我有一个由带有数字和算术符号的按钮组成的模拟键盘。当用户单击这些按钮时，相应的数字或符号将出现在文本区域内。到目前为止，我可以让它处理数字，但不能处理 MathML 符号。有没有办法让这些符号显示在文本区域内？

为了使这更容易理解，这里有一个由其中一个按钮调用的函数，用于将数字 1 插入到 textarea 中：

```
function insertOne(mctextarea,oneText='1'){
    document.getElementById('mctextarea').value += oneText;
} 
```

这是我尝试编写的将平方根符号插入文本区域的函数：

```
function insertSqrt(mctextarea,sqrt=<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mrow><msqrt>x</msqrt></mrow></math>){
    document.getElementById('mctextarea').value += sqrt;
} 
```

...这显然不起作用，但我不知道从哪里开始尝试在 textarea 中显示 MathML。

请注意，我现在只使用 Javascript 大约 3 周，所以我仍在学习绳索。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:10:19.840

Ben，我对 stackoverflow.com 很陌生，所以我无法发布这段代码呈现的图片。我正在使用开源 MathJax.js 在 HTML 中呈现数学函数。[您可以在www.MathJax.org](http://www.mathjax.org)找到更好的示例。

PS：我仍在学习如何正确格式化答案；）
代码示例：

```
<!DOCTYPE html>
<html lang="en" >
  <head>
    <title></title>
    <meta charset="UTF-8" />
  </head>
  <body>
    <p>Have you seen MathJax.js at www.mathjax.org</p>
    <p>$$
      \large
      \begin{align&#42;}
      &amp; J(\theta) = \dfrac{1}{m} \sum&#95;{i=1}^m Cost((h&#95;
      \theta(x^{(i)}),y^{(i)}) \newline
      &amp; Cost((h&#95;\theta(x),y) = -log(h&#95;\theta(x)) \; &amp; \text{if y = 1}\newline
      &amp; Cost((h&#95;\theta(x),y) = -log(1-h&#95;\theta(x)) \; &amp; \text{if y = 0}\end{align&#42;}
      $$
    </p>

    <script type='text/javascript' src='http://cdn.mathjax.org/mathjax/late/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:20:37.017

文本区域内的 html/xml 标记是不行的，请参阅[在 textarea 内渲染 HTML](https://stackoverflow.com/questions/4705848/rendering-html-inside-textarea) ——它对您可以使用的其他方法有一些好主意。

此外，javascript 不允许像上面那样的默认参数，请参阅[为 JavaScript 函数设置默认参数值](https://stackoverflow.com/questions/894860/set-a-default-parameter-value-for-a-javascript-function)。您还需要将 xml 字符串放在单引号内。

您可能想要做的是让您的按钮将 MathJax 标记插入文本区域。然后，您将拥有另一个函数来获取此文本，并将其呈现在单独的 div 中。

所以你有可编辑的文本区域，和一个显示结果的预览 div，很像 Stack Overflow 上的文本区域。

# python - 如何修改 ndb.Query 对象？

> ID：12590363
> 
> 赞同：1
> 
> 时间：2012-09-25T20:14:01.737
> 
> 标签：python, google-app-engine, google-cloud-datastore

假设我们采用以下 ndb 模型：

```
class MyModel(ndb.Model):
    x = ndb.StringProperty()
    y = ndb.StringProperty()
    z = ndb.StringProperty(repeated=True) 
```

我们有一个方法可以为上述模型创建一个查询，执行它并获取结果。但是，我们希望此查询能够修改我的其他功能。具体来说，我们有以下几点：

```
def method_a():
    qry = MyModel.query() 
    values = {'query':qry}
    method_b(**values)
    entities = qry.fetch()

def method_b(**kwargs):
    k = ['a', 'b', 'c']
    qry = kwargs['query']
    qry.filter(MyModel.z.IN(k)) 
```

问题是Query对象是不可变的，因此它不能被method_b修改。另外，根据代码的具体架构，我们不能让method_b将新的Query返回给method_a。

关于如何以另一种方式实现上述功能的任何想法？

**更新：**请检查我的代码架构，如下所示：

首先，在配置文件中，我们指定模块列表以及它们是否启用。这些模块会影响我们要执行的查询的过滤器。

```
testparams = {
    'Test1': True,
    'Test2': True,
    'Test3': False,
    'Test4': True
} 
```

然后，我们在代码中的某处有一个方法，该方法在执行适当的模块后进行查询。因此，它看起来像这样：

```
def my_func():
    qry = MyEntity.query()

    # modules
    query_wrapper = [qry]
    values = {'param':'x', 'query_wrapper':query_wrapper} #other values also
    execute_modules(**values)
    # get query and add some more things, like ordering
    entities = query_wrapper[0].fetch() 
```

`execute_modules`功能如下：

```
def execute_modules(**kwargs):
    for k in config.testparams:
        if config.testparams[k]:
            if kwargs['param'] == 'x':
                (globals()[k]).x(**kwargs)
            elif kwargs['param'] == 'y':
                (globals()[k]).y(**kwargs) 
```

最后，指示性模块类似于以下内容：

```
class Test1():
    @classmethod
    def x(cls, *args, **kwargs):
        qry = kwargs['query_wrapper'][0]
        # do some stuff like adding filters
        kwargs['query_wrapper'][0] = qry 
```

有什么建议可以将此架构修改为更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:01:06.703

我不知道没有`method_b`返回或更改引用参数的方法。您应该使用一种技术[通过引用传递变量](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)，例如传递带参数的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:41:20.253

您可以在 refrence 对象（例如 dict/list）中传入 args：

```
def modify_query(kwargs):
  kwargs['qry'] = kwargs['qry'].filter(MyModel.z.IN(k))

qry = MyModel.query()
kwargs = {'qry': qry}
modify_query(kwargs)
result = kwargs['qry'].fetch() 
```

应该注意的是，这是一种非常肮脏的方式来完成你想要完成的事情。类似地，如果你传入一个包含一个对象的列表，那么你可以修改所述列表的内容（通过赋值）来修改对象：

```
def modify_query(list_object):
  list_object[0] = list_object[0].filter(...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T22:43:26.320

您可以做一些技巧来用其他对象替换它。例如：

```
def f(args):
  qry = args[0]
  qry_new = qry.filter(Model.a == 2)
  args[0] = qry_new

qry = Model.query()
args = [qry]
f(args)
qry = args[0] 
```

# ruby-on-rails - 如何比较 Rspec 中的作业？

> ID：12590367
> 
> 赞同：1
> 
> 时间：2012-09-25T20:14:12.283
> 
> 标签：ruby-on-rails, ruby, rspec, ruby-on-rails-3.2

我有以下

```
it 'should assign a new profile to user' do
  get :new
  assigns(:user_profile).should ==(Profile.new)
end 
```

但它不起作用。我试过'eql?' 和“平等？” 分别。我如何比较它才能知道@user_profile 的内容是否是Profile.new？

我曾经做过一个变通方法，对分配的变量进行 .class 处理，检查它是否是 Profile，但我想停止这些不良做法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:20:32.130

这里的问题是，`Object.new`设计调用两次会创建两个*不同*的对象，它们不相等。

```
1.9.2p318 :001 > Object.new == Object.new
 => false 
```

你可以在这里做的一件事是

```
let(:profile){ Profile.new }

it 'should assign a new profile to user' do
  Profile.should_receive(:new).and_return profile
  get :new
  assigns(:user_profile).should eq profile
end 
```

现在，当调用控制器操作时，您实际上并没有创建新的配置文件，但您仍在测试`Profile`正在接收`new`，并且您正在测试该方法的返回值是否由控制器分配给`@user_profile`.

# ruby-on-rails - 使用 ngninx 运行 errbit，使用 ssl 运行乘客

> ID：12590382
> 
> 赞同：2
> 
> 时间：2012-09-25T20:15:28.893
> 
> 标签：ruby-on-rails, ssl, nginx

我已经进行了配置，以便我可以使用 ssl 登录和访问在 nginx 上运行的 errbit

我的问题是我无法弄清楚如何设置我的 rails 应用程序的 errbit.rb 所以我可以运行测试

nginx.conf 看起来有点像：

```
server {
    listen 443;
    ssl on;
    ssl_certificate stuff.crt;
    ssl_certificate_key stuff.key;

    server_name  www.whatever.org;

    location / {
      root /web/stuff;
    }

    location /errbit {
      root /webapps2;
      passenger_enabled on;
      rails_env development;
      passenger_base_uri /errbit;
    }
} 
```

所以 www.whatever.org/errbit 显示 errbit

初始化程序/errbit.rb 看起来像：

```
Airbrake.configure do |config|
  config.api_key            = 'code'
  config.host           = 'www.whatever.org/errbit'
  config.port           = 443
  config.secure         = config.port == 443
end 
```

运行 bundle exec rake airbrake:test 给出：

```
...

Started GET "/verify" for  at 2012-09-25 20:37:22 +0100
Raising 'AirbrakeTestingException' to simulate application failure.
** [Airbrake] Failure: Net::HTTPNotFound
** [Airbrake] Environment Info: [Ruby: 1.9.2] [Rails: 3.1.1] [Env: staging]
** [Airbrake] Response from Airbrake: 
<html>
<head><title>404 Not Found</title></head>
<body bgcolor="white">
<center><h1>404 Not Found</h1></center>
<hr><center>nginx/1.3.5</center>
</body>
</html> 
```

并且没有消息到达errbit

这只是一个非首发，还是 /errbit 问题？SSL？使用错误的端口？

任何建议都感激不尽

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:44:32.147

我有一个类似的问题，原来我有一个代理阻止服务器对 errbit api 的 https 请求。

如果您确实有代理阻止连接，则需要添加到 errbit.rb：

`config.proxy_host="1.2.3.4"`

`config.proxy_port=1111`

本质上，当出现服务器错误时，连接会从服务器推送到大多数标准代理配置将阻止的互联网。添加此代理配置不会影响客户端错误（javascript 错误），因为在airbrake notifier javascript for errbit（位于客户端计算机上）中未使用代理配置（这是正确的）。

另一个可用的选项是，如果您的 errbit 应用程序是内部的（除非您知道自己在做什么，否则应该是内部地址），您可以将 errbit api 的内部地址添加到您的应用程序正在运行的服务器上的 etc/hosts 文件中。这将阻止应用程序尝试绕过代理连接到内部网络。话虽如此，您将无法捕获客户端错误

添加到 etc/hosts 文件添加：

`1.1.1.1 [https://www.whatever.org](https://www.whatever.org)`

希望这可以帮助

# objective-c - Objective-C：分配一个数组值作为 NSDictionary 的键

> ID：12590401
> 
> 赞同：1
> 
> 时间：2012-09-25T20:16:42.760
> 
> 标签：objective-c, ios, arrays, loops, dictionary

我有一个属性列表 = DictionaryofAddresses，里面是一个 NSDictionary StoredAddr；StoredAddr 中的键是 Mac 地址，值是 RSI 读数数组。

我有一个数组 compareAddr（它包含一个 Mac 地址数组）我想使用一个循环，其中 compareaddr[i] 的值将用作键，以匹配我的数组中的地址是否匹配我的任何键字典。

```
NSArray *compareAddr = [DiscoveredAP allKeys];

for (int i = 0; i < [compareAddr count]; i++){

NSArray *RSIatAddr = [[dictionaryOfAddresses     objectForKey:@"StoredAddr"]objectForKey:compareAddr[i]]; 
```

以下代码给了我一个错误：预期标识符

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:18:35.243

使用`[compareAddr objectAtIndex:i]`代替`compareAddr[i]`

# css - CSS背景颜色在chrome中不起作用

> ID：12590404
> 
> 赞同：0
> 
> 时间：2012-09-25T20:17:05.603
> 
> 标签：css, google-chrome, background-color

我在这里得到了这个背景颜色

```
-moz-linear-gradient(center top , #0043A1 0%, #0043A1 100%) repeat scroll 0 0 transparent; 
```

但它在谷歌浏览器中不起作用，关于如何修复它的任何想法？

谢谢，J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:18:02.113

用。。。来代替

```
linear-gradient(center top , #0043A1 0%, #0043A1 100%) repeat scroll 0 0 transparent; 
```

-moz-* css 属性特定于 mozilla。它们在属性未标准化时很有用，但现在（使用 CSS3）您可以使用标准化的`linear-gradient`.

甚至 Mozilla 文档现在也记录了[linear-gradient](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:41:50.603

将此用于 Chrome 和 Safari 浏览器：

```
-webkit-linear-gradient 
```

并将其用于 Mozilla (Firefox)：

```
-moz-linear-gradient 
```

您可能会喜欢网站[CSS3Please](http://css3please.com/)！它可以让你看到如何应用所有这些不同的属性，并为所有浏览器生成代码（甚至是 Opera，大多数人经常忘记但他们真的不应该这样做。一个顽固的 Opera 用户这么说。）还有[ColorZilla 的渐变生成器](http://www.colorzilla.com/gradient-editor/)，我发现它不太直观......但它也确实生成了 CSS styledef。

# ruby - 根据 Nokogiri 中的其他属性获取某些属性？

> ID：12590408
> 
> 赞同：-1
> 
> 时间：2012-09-25T20:17:45.837
> 
> 标签：ruby, xml, nokogiri

这是我正在使用的 XML：

```
<order xmlns="http://example.com/schemas/1.0">
  <link type="application/xml" rel="http://example.com/rel/self" href="https://example.com/orders/1631"/>
  <link type="application/xml" rel="http://example.com/rel/order/history" href="http://example.com/orders/1631/history"/>
  <link type="application/xml" rel="http://example.com/rel/order/transition/release" href="https://example.com/orders/1631/release"/>
  <link type="application/xml" rel="http://example.com/rel/order/transition/cancel" href="https://example.com/orders/1631/cancel"/>
  <state>hold</state>
  <order-number>123-456-789</order-number>
  <survey-title>Testing</survey-title>
  <survey-url>http://example.com/s/123456</survey-url>
  <number-of-questions>6</number-of-questions>
  <number-of-completes>100</number-of-completes>
  <target-group>
    <country>
      <id>US</id>
      <name>United States</name>
    </country>
    <min-age>15</min-age>
  </target-group>
  <quote>319.00</quote>
  <currency>USD</currency>
</order> 
```

我需要做的是从具有的`href`属性中获取`link``rel``http://example.com/rel/order/transition/release`

那么，我怎样才能使用 Nokogiri 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:58:48.510

十分简单：

```
require 'nokogiri'

doc = Nokogiri::XML(<<EOT)
<order xmlns="http://example.com/schemas/1.0">
  <link type="application/xml" rel="http://example.com/rel/self" href="https://example.com/orders/1631"/>
  <link type="application/xml" rel="http://example.com/rel/order/history" href="http://example.com/orders/1631/history"/>
  <link type="application/xml" rel="http://example.com/rel/order/transition/release" href="https://example.com/orders/1631/release"/>
  <link type="application/xml" rel="http://example.com/rel/order/transition/cancel" href="https://example.com/orders/1631/cancel"/>
  <state>hold</state>
  <order-number>123-456-789</order-number>
  <survey-title>Testing</survey-title>
  <survey-url>http://example.com/s/123456</survey-url>
  <number-of-questions>6</number-of-questions>
  <number-of-completes>100</number-of-completes>
  <target-group>
    <country>
      <id>US</id>
      <name>United States</name>
    </country>
    <min-age>15</min-age>
  </target-group>
  <quote>319.00</quote>
  <currency>USD</currency>
</order>
EOT

href = doc.at('link[rel="http://example.com/rel/order/transition/release"]')['href']
=> "https://example.com/orders/1631/release" 
```

这是使用 Nokogiri 使用 CSS 访问器的能力。有时使用 XPath 更容易（或唯一的方法），但我更喜欢 CSS，因为它们往往更具可读性。

[`Nokogiri::Node.at`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at)可以采用 CSS 访问器或 XPath，并将返回与该模式匹配的第一个节点。如果您需要遍历所有匹配项，请[`search`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-search)改用，它返回 a [`NodeSet`](http://nokogiri.org/Nokogiri/XML/NodeSet.html)，您可以将其视为数组。Nokogiri 还支持`at_xpath`和`at_css`伴随`css`、`xpath`为`at`和`search`对称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:04:27.923

这是一个单行：

```
@doc.xpath('//xmlns:link[@rel = "http://example.com/rel/order/transition/release"]').attr('href') 
```

# nginx - 回退到 nginx 中的默认/共享文件

> ID：12590413
> 
> 赞同：3
> 
> 时间：2012-09-25T20:18:00.017
> 
> 标签：nginx, robots.txt

如果没有相对文件，我希望从共享位置（绝对路径）提供默认 robots.txt 文件。

我没有运气就试过了：

```
location = /robots.txt {
    expires 30d;
    add_header Cache-Control public;
    try_files /robots.txt /var/www/shared/robots.txt =404;
} 
```

但它只返回 404。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:21:30.860

我最终得到了这个似乎可行的方法：

```
location = /robots.txt {
    expires 30d;
    add_header Cache-Control public;
    try_files /robots.txt @shared;
}

location @shared {
    root /var/www/shared;
} 
```

我必须承认，我更喜欢“try_files”，但它似乎不适用于绝对路径。

如果有人有更好/其他的解决方案，我很乐意看到！

# python - printf 在 Python 中将时间格式化为字符串

> ID：12590415
> 
> 赞同：2
> 
> 时间：2012-09-25T20:18:02.260
> 
> 标签：python, django

如何将日期时间对象显示为字符串格式以进行打印？

这是我要打印的字符串：

```
'Text %s, on date: %d' % (x.name, x.time) 
```

这是我得到的错误：

```
%d format: a number is required, not datetime.datetime 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T20:22:25.757

## 解决方案

您需要更改类型：在模板或参数中：

```
'Text %s, on date: %s' % (x.name, x.time) 
```

但是`datetime.datetime`instance 只是一个对象（它具有某种对人类友好的字符串表示形式）。您可以通过以下方式将其更改为更友好：

```
'Text %s, on date: %s' % (x.name, x.time.isoformat()) 
```

您甚至可以使用以下格式对其进行格式化[`strftime()`](http://docs.python.org/library/time.html#time.strftime)：

```
'Text %s, on date: %s' % (x.name, x.time.strftime('%A, %B %d, %Y')) 
```

## 测试

让我们测试一下：

```
>>> import datetime
>>> now = datetime.datetime.now()  # our "now" timestamp
>>> '%d' % now

Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    '%d' % datetime.datetime.now()
TypeError: %d format: a number is required, not datetime.datetime
>>> '%s' % now.isoformat()
'2012-09-25T22:24:30.399000'
>>> now.strftime('%A, %B %d, %Y')
'Tuesday, September 25, 2012' 
```

## 选择 -`.format()`

字符串格式化操作 ( `%`) 是格式化字符串的一种方式，但还有另一种 - 首选 - 格式化字符串的方式：`.format()`method.

原因[是不同的主题](https://stackoverflow.com/a/8396057/548696)，但我可以向您展示上述示例如何使用`.format()`方法：

```
'Text {x.name}, on date: {x.time}'.format(x=x)  # accessing properties
'Text {0}, on date: {1}'.format(x.name, x.time)  # accessing by positions
'Text {}, on date: {}'.format(x.name, x.time)  # in Python >2.7 it can be shorter
'Text {0}, on date: {1}'.format(x.name, x.time.isoformat())  # ISO format
'Text {0}, on date: {1}'.format(x.name, x.time.strftime('%A, %B %d, %Y')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:19:35.223

```
"Text {}, on date: {}".format(x.name, x.time) 
```

如果您使用的是 Python 2.6 或更高版本，那么`format()`格式化您的字符串是最好的选择。它可以帮助您避免使用`%`格式说明符，您必须做更多的任务才能以正确的格式格式化您的字符串。否则您可以获得`TypeError`

# java - 使用 commons-email 配置模拟电子邮件

> ID：12590418
> 
> 赞同：1
> 
> 时间：2012-09-25T20:18:14.900
> 
> 标签：java, email, maven, configuration, apache-commons-email

我有一个通过 maven使用 commons-email ( [http://search.maven.org/#artifactdetails|org.apache.commons|commons-email|1.2|jar ) 的项目。](http://search.maven.org/#artifactdetails|org.apache.commons|commons-email|1.2|jar)我想使用电子邮件模拟类（[http://commons.apache.org/email/testapidocs/org/apache/commons/mail/mocks/MockHtmlEmailConcrete.html](http://commons.apache.org/email/testapidocs/org/apache/commons/mail/mocks/MockHtmlEmailConcrete.html)）来编写一些单元测试。但是 org.apache.commons.mail.mocks 包永远不会通过 maven 依赖项包含在内。我在哪里可以找到这个包？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T05:49:00.757

这个类不是官方 Apache Commons Mail API 的一部分，它似乎在内部用于测试 commons-email。这就是为什么它不是生成的 jar 的一部分并且您无法使用它的原因。

您可能需要将该代码复制到您的项目中或找到其他一些电子邮件模拟功能，例如我们在测试中使用了[dumbster](http://quintanasoft.com/dumbster/)。

# heroku - 无法在 Heroku Cedar 堆栈上使用 Sendgrid 发送电子邮件

> ID：12590419
> 
> 赞同：7
> 
> 时间：2012-09-25T20:18:23.020
> 
> 标签：heroku, smtp, sendgrid, cedar

我收到以下错误：451 身份验证失败：超出最大信用。

但是，当我检查 heroku 上的 sendgrid 仪表板时，它说：

![在此处输入图像描述](../Images/37f841e777f0994073e63c160de09fe4.png)

仪表板是否已过时？它说我还有剩余的学分...

# javascript - asp隐藏单选按钮标签

> ID：12590422
> 
> 赞同：0
> 
> 时间：2012-09-25T20:18:29.343
> 
> 标签：javascript, asp.net, css

我无法隐藏单选按钮上的文本。这是收音机的asp...

```
<asp:RadioButton ID="rdViewPrint" Text="View/Print" runat="server" OnClick="javascript:disableFields();" GroupName="viewSend" Checked="True" style="margin-left:10px;" />
<asp:RadioButton ID="rdEmail" Text="Email" runat="server" OnClick="javascript:emailFields();" GroupName="viewSend" style="margin-left:10px;" />
<asp:RadioButton ID="rdFax" Text="Fax" runat="server" OnClick="javascript:faxFields();" GroupName="viewSend" style="margin-left:10px;" /> 
```

在页面加载时，一个 javascript 函数运行下面的函数。单选按钮的圆圈被隐藏，但文本仍然存在。

```
function noVisit() {
     document.getElementById('<%=lblViewSend.ClientID%>').style.display = "none";
     document.getElementById('<%=rdViewPrint.ClientID%>').style.display = "none";
     document.getElementById('<%=rdEmail.ClientID%>').style.display = "none";
     document.getElementById('<%=rdFax.ClientID%>').style.display = "none";
     document.getElementById('<%=btnFull.ClientID%>').style.display = "none";
     document.getElementById('<%=btnSummary.ClientID%>').style.display = "none";
     document.getElementById('<%=btnPrivate.ClientID%>').style.display = "none";
} 
```

为什么文本没有被隐藏，以及如何使其不可见？

谢谢，戴夫K。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:20:39.617

一个简单的解决方法是将整个东西放在一个面板中，然后隐藏它。或者有什么理由你不能这样做？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:20:44.337

在您的页面上查看由 ASP.NET 生成的 HTML。我想你会发现单选按钮的文本会发出 LABEL 标签。您的 Javascript 没有针对 LABEL - 您的目标是 INPUT。

另一个建议 - 切换类以显示/隐藏它们。更容易跟踪并允许您使用 CSS 整合其他样式优点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-20T03:19:27.667

试试这个代码。

```
rdViewPrint.Visible = false;
rdEmail.Visible = false;
rdFax.Visible = false; 
```

# jqplot - jqplot - 未捕获的异常 - 没有数据

> ID：12590424
> 
> 赞同：0
> 
> 时间：2012-09-25T20:18:57.237
> 
> 标签：jqplot

我的 json 文件看起来像

```
{"items":[
{"date":"2012-03-12","scoreMin":"9","scoreMax":"25","scoreAverage":"20.39","scoreSTD":"3.86","scoreCount":"133","count20":"73","count25":"46"},
{"date":"2012-03-13","scoreMin":"9","scoreMax":"25","scoreAverage":"20.9","scoreSTD":"4.25","scoreCount":"99","count20":"56","count25":"46"},
{"date":"2012-03-14","scoreMin":"9","scoreMax":"25","scoreAverage":"20.9","scoreSTD":"4.25","scoreCount":"99","count20":"56","count25":"46"},
{"date":"2012-03-15","scoreMin":"9","scoreMax":"25","scoreAverage":"20.9","scoreSTD":"4.25","scoreCount":"99","count20":"56","count25":"46"},
{"date":"2012-09-15","scoreMin":"5","scoreMax":"24","scoreAverage":"18.55","scoreSTD":"5.65","scoreCount":"100","count20":"45","count25":"0"},
{"date":"2012-09-16","scoreMin":"5","scoreMax":"24","scoreAverage":"18.55","scoreSTD":"5.65","scoreCount":"100","count20":"45","count25":"0"},
{"date":"2012-09-17","scoreMin":"5","scoreMax":"24","scoreAverage":"18.59","scoreSTD":"5.67","scoreCount":"99","count20":"45","count25":"0"},
{"date":"2012-09-18","scoreMin":"5","scoreMax":"24","scoreAverage":"18.64","scoreSTD":"5.67","scoreCount":"100","count20":"46","count25":"0"}
]} 
```

我的脚本是

```
<!DOCTYPE html>
<html>
<head>
    <title>Date Axes</title>
    <script language="javascript" type="text/javascript" src="jqplot/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="jqplot/jquery.jqplot.min.js"></script>
    <script language="javascript" type="text/javascript" src="jqplot/plugins/jqplot.dateAxisRenderer.min.js"></script>
    <link rel="stylesheet" type="text/css" href="jqplot/jquery.jqplot.css" />
</head>
<body>
    <h2>
        Some Statistics</h2>
    <div id="chartCanvas" style="height: 400px; width: 1000px; align">
    </div>
    <br />
    <script type="text/javascript">

    $(function(){
    $(document).ready(function(){
    alert('Document ready');
    var objArrayData=[];
    var objArray = [];    
    $.getJSON("data.json",function(data){

        $.each(data.items, function(i,data){
        objArrayData[i] =("['" + data.date + "'," + data.scoreAverage + "]");
        }); 

        alert( 'Fetched ' + objArrayData.length + ' items!'); 
        console.log('object Data ' + objArrayData); 
        objArray = ("[" + objArrayData + "]");
        console.log('object Array' + objArray);  

        var plot = $.jqplot('chartCanvas', [objArray], {
                    title:'Rubric Average Scores',
                    gridPadding:{right:35},
                    axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,
                    tickOptions:{formatString:'%#m/%y'},
                    //tickOptions:{formatString:'%b-%y'},
                    min:'March 30, 2012',
                    tickInterval:'1 month',
                    angle: -30,
                    }},
                    yaxis:{label:'Average Score',
                    },
                    series:[{lineWidth:3, markerOptions:{style:'square'}}]
                   });

  });      

    }); 
    return false;
    });
    </script>
</body>
</html> 
```

我遇到未捕获的异常 - 没有数据错误 在绘制图表之前，我正在打印数组并且有我需要的所有值。

什么不见​​了？我在哪里做错了？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:34:52.403

我不明白你为什么以你在这里做的方式向 objArrayData 数组提供数据。数据不会仅仅因为它们周围有方括号而变成数组（它只会在 中显得漂亮、令人满意和令人困惑`cosole.log`）。

使用`array.push()`而不是你在这里做的方式。

并且还要确保在将其`data.scoreAverage`解析为数组之前创建一个数字。你可以使用`parseFloat()`函数来做到这一点。

所以最后你可以像这样将数据提供给数组。

```
objArrayData.push([data.date,parseFloat(data.scoreAverage)]); 
```

这是修改后的工作代码。

```
<!DOCTYPE html>
<html>
<head>
    <title>Date Axes</title>
    <script language="javascript" type="text/javascript" src="../jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="../jquery.jqplot.min.js"></script>
    <script language="javascript" type="text/javascript" src="../plugins/jqplot.dateAxisRenderer.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../jquery.jqplot.css" />
</head>
<body>
    <h2>
        Some Statistics</h2>
    <div id="chartCanvas" style="height: 400px; width: 1000px; align">
    </div>
    <br />
    <script type="text/javascript">

        $(function(){
            $(document).ready(function(){
                var objArrayData=[];
                var objArray = [];    
                $.getJSON("data.json",function(data){

                    $.each(data.items, function(i,data){
                        objArrayData.push([data.date,parseFloat(data.scoreAverage)]);
                    }); 

                    console.log('object Data ' + objArrayData); 

                    var plot = $.jqplot('chartCanvas', [objArrayData], {
                                title:'Rubric Average Scores',
                                gridPadding:{right:35},
                                axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer,
                                tickOptions:{formatString:'%Y-%m-%d'},
                                //tickOptions:{formatString:'%b-%y'},
                                min:'March 30, 2012',
                                tickInterval:'1 month',
                                angle: -30,
                                }},
                                yaxis:{label:'Average Score',
                                },
                                series:[{lineWidth:3, markerOptions:{style:'square'}}]
                               });

              });      

            }); 
            return false;
        });
    </script>
</body>
</html> 
```

希望这可以帮助。

PS：确保您了解更多有关数组的知识。

# zend-framework2 - Zend 依赖注入

> ID：12590426
> 
> 赞同：1
> 
> 时间：2012-09-25T20:19:13.837
> 
> 标签：zend-framework2

我一直在学习 ZF2 教程，并且正在尝试重新编写 Controller 中的 indexAction 方法，因此我不需要每次都创建一个新的 ViewModel 对象。

我使用以下代码向模块添加了一个 onBootstrap 方法：

```
 $di = new \Zend\Di\Di;
    $di->instanceManager()->setParameters('Album\ViewModel', array('albums' => $config-     >albums)); 
```

我将 indexAction 方法更改为：

```
 return $di->get('Album\ViewModel'); 
```

谁能告诉我哪里出了问题或者我应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:14:24.760

您可以从控制器中的 Actions 返回一个数组，ZF2 将围绕它自己创建一个 ViewModel。不太确定那是你所追求的，但它可能是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T00:41:06.283

如果您只是想保存代码，Steve Griffiths 的答案应该可以工作。如果您想将此扩展为您的动作控制器的更通用的依赖注入，那么我会将您的控制器实现为工厂而不是可调用对象。但是，如果您只是想用数据填充 ViewModel，那么这种灵活性可能会过大。例如，在您的 module.config.php 文件中，您可以添加如下内容：

```
'controllers' => array(
    'factories' => array(
        'FooModule\Controller\FooController' => 'FooModule\Service\FooControllerFactory',
    ),
), 
```

然后，当您通过 ZF2 的 MVC 路由在应用程序代码中调用控制器时，将使用您放在该工厂类中的任何实例化代码来调用它。其代码可能如下所示，具体取决于您要实例化它的依赖项。

```
<?php

namespace FooModule\Service;

use FooModule\Controller\FooController; // actual controller code
use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\View\Model\ViewModel;

class FooControllerFactory implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $controllers)
    {
        $services    = $controllers->getServiceLocator();
        $fooBar = $services->get('foo_bar_service'); // a service you registered already in the service manager
        $view = new ViewModel();
        $controller  = new FooController();
        $controller->setAuthService($authService);
        return $controller;
    }
} 
```

因此，您可以从控制器中访问 $fooBar 服务，而无需任何额外的 DI，如下所示：

```
<?php

namespace FooModule\Controller;

use Zend\Authentication\FooBarService;
use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class FooController extends AbstractActionController
{   
    protected $fooBar; // already injected by your factory
    protected $view; // ViewModel object also injected by your factory

    public function indexAction()
    {
        $result = $this->fooBar->doSomething();
        $this->view->setVariable('name', $result);
        return $this->view;
    }
} 
```

同样，可能有点矫枉过正，但我​​想推荐它，以防更灵活的依赖注入与您的用例相关。

# java - Java中的特殊字符

> ID：12590428
> 
> 赞同：3
> 
> 时间：2012-09-25T20:19:26.893
> 
> 标签：java, utf-8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:23:24.943

You need to escape HTML properly. Unicode isn't the answer here. [This link](http://www.theukwebdesigncompany.com/articles/entity-escape-characters.php) is your jam.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:22:52.700

I don't know why this doesn't work (inside the above switch) (and would welcome an explanation):

```
case ((int)'\u0080'): sbOriginal.deleteCharAt(isb); break; 
```

but this does:

```
description = description.replaceAll("\u0080", ""); 
```

# node.js - ExpressJS：app.local 和 res.local 有什么区别？

> ID：12590429
> 
> 赞同：10
> 
> 时间：2012-09-25T20:19:30.700
> 
> 标签：node.js, request, express, locals

我正在尝试学习 Express，在我的应用程序中，我有中间件将会话对象从 Request 对象传递到我的 Response 对象，以便我可以在我的视图中访问它：

```
app.use((req, res, next) ->
  res.locals.session = req.session
  next()
) 
```

但是 app.locals 也可用于视图，对吗？那么如果我这样做是一样的`app.locals.session = req.session`吗？`app.locals`事物的类型和用途是否有约定`res.locals`？

`res.render()`我也对和之间有什么区别感到困惑`res.redirect()`？什么时候应该使用每个？

谢谢阅读。感谢您提供与 Express 相关的任何帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-05T03:21:47.690

为了进一步说明这一点，我记得查看了一个流程图，该流程图显示了 express 如何呈现模板中的变量。这是来自“ [Node.js In Action”](https://rads.stackoverflow.com/amzn/click/com/1617290572)。我建议阅读讨论 Express.js 的章节。

![在此处输入图像描述](../Images/6e140279f55d34820d737941fea9e045.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-26T17:09:35.597

app.locals 和 res.locals 可以在不同的上下文中使用。

res.locals 用于当您处理具有 res 对象的路由时，您将不会有 app 对象，反之亦然 app.locals。

res.render 也将渲染页面，以处理请求。res.redirect 会将它们重定向到不同的页面。

例如，如果他们尝试在不登录的情况下访问 /account，您可以闪烁一条消息并使用 res.redirect('/login')

# android - Android：MediaPlayer 未发布就完成了

> ID：12590435
> 
> 赞同：25
> 
> 时间：2012-09-25T20:19:49.883
> 
> 标签：android, android-mediaplayer

我正在我目前正在开发的应用程序中使用 MediaPlayer 类。我想在 Activity 的整个生命周期中保留 MediaPlayer 类的一个实例。我在活动的 onPause() { } 方法中从 MediaPlayer 类释放资源，但是当活动开始时，我看到 LogCat 窗口中弹出以下警告：

```
W/MediaPlayer-JNI(16795): MediaPlayer finalized without being released 
```

知道我在这里做错了什么或如何删除此警告吗？它似乎没有引起任何问题，声音也很好。

我有太多代码要发布，因为我包装了一些对象以允许管理状态（MediaPlayer 类当前不提供状态信息），以及各种其他原因，但代码差不多：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    initialiseSounds(this);
}

@Override
protected void onPause()
{
    soundManager.releaseResources();
}

@Override
protected void onResume()
{
    initialiseSounds(this);
} 
```

在我的 SoundManager 类中使用此方法：

```
public void releaseResources()
{
    player.release();
} 
```

在 initialiseSounds 我正在做：

```
MediaPlayer player = new MediaPlayer();
player.reset();
player.setAudioStreamType(AudioManager.STREAM_MUSIC);
AssetFileDescriptor assetFileDescriptor = context.getResources().openRawResourceFd(resourceId);
setDataSource(player, assetFileDescriptor); 
```

当我想播放曲目时，我会：

```
player.prepare();
player.start(); 
```

感谢任何建议，

谢谢，

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-25T21:01:14.767

I'm not completely sure of the origin of that message, but notice here that you're creating **two** MediaPlayers: one in onCreate and one in onResume.

That message seems to indicate that it doesn't like that a MP is being finalized (GC'd) without being 'released'. It may be referring to that first mediaPlayer you create in onCreate, which is lost after you reassign it in onResume.

Perhaps the error will go away if you only create one MediaPlayer instead of two?

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-10T08:34:26.727

如果您不对媒体播放器对象调用 release 并且您的片段已停止并被销毁，也会出现此消息。

您需要覆盖`onStop()`或其他方法之一并在媒体播放器上调用 release()。

```
@Override
public void onStop() {
    super.onStop();
    mediaPlayer.stop();
    mediaPlayer.release();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-12-08T09:22:43.967

就我而言，我已经在一种方法中创建了本地媒体播放器引用，而我所做的是，当我想播放一些音频时，我一直使用该方法。但后来我发现，突然之间，局部变量将从内存中清除，并且无法再使用该引用访问 MediaPlayer。

然后我创建了一个全局静态 Mediaplayer 引用，当我创建一个媒体播放器对象时，我将它初始化为该静态变量，我的问题似乎得到了解决

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-04T08:54:47.700

我遇到过类似的问题 在 onStart() 或 onResume 中调用方法，不要在 onCreate() 中调用。

# c# - 将标签添加到 WPF ComboBox 控件的简单方法

> ID：12590449
> 
> 赞同：3
> 
> 时间：2012-09-25T20:20:40.407
> 
> 标签：c#, .net, wpf, custom-controls

此代码在我的应用程序中变得越来越常见：

```
<StackPanel Orientation="Vertical">
    <Label Content="_ComboBox Caption" 
           Target="comboBox" 
           Margin="0" 
           Padding="5,5,5,1" />

    <ComboBox  x:Name="comboBox"
                Width="72"
                Margin="5,0,5,5"
                Padding="5,1,5,5"
                SelectedItem="{Binding ComboSelectedItem}"
                ItemsSource="{Binding ComboSourceList}" />
</StackPanel> 
```

它为我呈现了一个带字幕的组合框。

我想让我成为一个自定义控件，它是一个 ComboBox，它公开标签的内容，然后设置其他属性。可以这样使用的东西：

```
<Controls:CaptionedComboBox  x:Name="comboBox"
                             Width="72"
                             LabelContent="_ComboBox Caption"
                             SelectedItem="{Binding ComboSelectedItem}"
                             ItemsSource="{Binding ComboSourceList}" /> 
```

然而，我考虑制作一个自定义控件，并且需要大量的**样式**。

有没有办法接受我上面的内容并最终做这样的事情？

```
<StackPanel Orientation="Vertical">
    <Label Content="{Binding TemplateLabelContent}" 
           Target="{Binding ControlName}" 
           Margin="0" 
           Padding="5,5,5,1" />

    <InheritedComboBoxStuff/>

</StackPanel> 
```

我知道那是行不通的。但我的观点是，我必须重新设置整个 ComboBox 的样式只是为了在它上面添加一个标签，这似乎很愚蠢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T20:38:52.040

你可以为此制作一个模板

```
 <ControlTemplate x:Key="ComboWithHeader" TargetType="ContentControl">
        <StackPanel Orientation="Vertical">
            <Label Margin="0"
                   Content="{Binding ComboBoxHeader}"
                   DataContext="{TemplateBinding DataContext}"
                   Padding="5,5,5,1"
                   Target="comboBox" />

            <ComboBox x:Name="comboBox"
                      Width="72"
                      Margin="5,0,5,5"
                      DataContext="{TemplateBinding DataContext}"
                      ItemsSource="{Binding ComboSourceList}"
                      Padding="5,1,5,5"
                      SelectedItem="{Binding ComboSelectedItem}" />
        </StackPanel>
    </ControlTemplate> 
```

然后每当您想使用带有标题的组合时，只需使用

```
<ContentControl Template="{StaticResource ComboWithHeader}" DataContext="{Binding ComboBoxViewModel}" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T21:07:10.640

非常基本但非常简单，您还可以创建一个用户控件，然后将控件嵌入到您想要的任何位置。例如

![简单图](../Images/bdee85f93d668145fcfeb88c73e3e8bc.png)

```
<UserControl x:Class="xxx.View.TestResultsGraph"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" mc:Ignorable="d" 
         MinHeight="50"
         d:DesignHeight="50" d:DesignWidth="300" >

    <Canvas Name="canvas" >
        <Polygon x:Name="SuccessShape" Fill="#FFF0FFF0" SnapsToDevicePixels="True"   />
        <Polyline x:Name="SuccessLine" Stroke="Green"    StrokeThickness="0.5" SnapsToDevicePixels="True"   />
        <Polygon x:Name="FailShape" Fill="#FFFFF0F0" SnapsToDevicePixels="True"   />
        <Polyline x:Name="FailLine" Stroke="Red"  StrokeThickness="0.5" SnapsToDevicePixels="True"      />
        <Polygon x:Name="PendingShape" Fill="#FFFFF0E0" SnapsToDevicePixels="True"   />
        <Polyline x:Name="PendingLine" Stroke="DarkOrange" StrokeThickness="0.5" SnapsToDevicePixels="True"    />
        <Line x:Name="xAxis" Stroke="Black" StrokeThickness="0.5" SnapsToDevicePixels="True"  />
        <Line x:Name="yAxis" Stroke="Black" StrokeThickness="0.5" SnapsToDevicePixels="True" />
    </Canvas> 
```

# dynamic - 批量动态嵌套环境变量

> ID：12590457
> 
> 赞同：2
> 
> 时间：2012-09-25T20:21:22.190
> 
> 标签：dynamic, batch-file, environment-variables

我想在日志中添加时间和用户名，但我无法动态评估 %TIME% 和 %DATE% 。我已经尝试了许多使用“！”的版本，但我从来没有让它工作。我想要的是拥有

```
Setlocal EnableDelayedExpansion
set nameDateTime=!%USERNAME% %DATE% %TIME%!
echo %nameDateTime%
echo %nameDateTime%
echo %nameDateTime%
EndLocal 
```

产生 3 个不同的时间（假设它们相距足够远）。我尝试了第二个答案：[How to create a user Environment variable that *calls* %date% or %time% 每次调用它？](https://stackoverflow.com/questions/5579213/how-to-create-a-user-environment-variable-that-calls-date-or-time-each-tim)，但是当我调用 echo %date1% 时，它只打印出 date1，而 set date1 打印出整个 !date1..！线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:43:40.300

由于您已经使用了延迟扩展：

```
@echo off
Setlocal DisableDelayedExpansion
set nameDateTime=!USERNAME! !DATE! !TIME!
Setlocal EnableDelayedExpansion
echo %nameDateTime%
echo %nameDateTime%
echo %nameDateTime%
EndLocal 
```

您将需要对这些回声进行时间间隔，以查看它们实际打印不同的值

# java - 显示或隐藏 p 的选项：inputText - JSF2 Primefaces

> ID：12590460
> 
> 赞同：0
> 
> 时间：2012-09-25T20:21:33.840
> 
> 标签：java, jsf, primefaces

我想知道如何通过选择选项 selectOneMenu 来显示和隐藏字段（p：inputText）。例如：我有一个从1到10的selectOneMenu，点击10显示10个inputText。点击 1 只出现 1 个 inputText。

我已经有了 SectOneMenu 和 inputText（如下）：

```
 <p:selectOneMenu value="#{bean.parametro.intervalo}">  
                <f:selectItem itemLabel="Select One" itemValue="" />  
                <f:selectItem itemLabel="1" itemValue="1" />  
                <f:selectItem itemLabel="2" itemValue="2" />  
                <f:selectItem itemLabel="3" itemValue="3" />  
                <f:selectItem itemLabel="4" itemValue="4" />  
                <f:selectItem itemLabel="5" itemValue="5" />  
                <f:selectItem itemLabel="6" itemValue="6" />  
                <f:selectItem itemLabel="7" itemValue="7" />  
                <f:selectItem itemLabel="8" itemValue="8" />  
                <f:selectItem itemLabel="9" itemValue="9" />  
                <f:selectItem itemLabel="10" itemValue="10" />  
            </p:selectOneMenu> 
```

要复制的 inputText：

```
 <h:outputText value="portabilidadeGrupo" />  
                <p:selectBooleanCheckbox value="#{bean.parametro.portabilidadeGrupo}" />  

                <h:output Label for="numInicial" value="Nº Inicial Int:" />  
                <p:inputText id="numInicial" value="#{bean.parametro.numInicial}" />  

                <h:outputLabel for="numFinal" value="Nº Final Int:" />  
                <p:inputText id="numFinal" value="#{bean.parametro.numFinal}" />  

                <h:outputLabel for="idGrupo" value="Id do Grupo:" />  
                <p:inputText id="idGrupo" value="#{bean.parametro.idgrupo}" />  

                <h:outputText value="PTO" />  
                <p:selectBooleanCheckbox value="#{bean.parametro.pto}" /> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:25:01.303

我放弃了使用 selectOneMenu 并使用 Darryl Nortje 的动态字段示例解决了我的问题。

豆

```
package datatable;  

import java.util.ArrayList;  
import java.util.List;  

import javax.faces.component.html.HtmlDataTable;  

public class DatatableBean {  

  //Data table contents  
  private List<Person> people;  
  //Data table binding. TO figure out which row was acted on.  
  private HtmlDataTable table;  

  //vars to add a person.  
  private String firstname;  
  private String surname;  

  public DatatableBean() {  
    people = new ArrayList<Person>();  
  }  

  //ACTION METHODS TO ADD AND REMOVE A PERSON  
  public void removePerson() {  
    //FIRST figure out which row was acted on. Then remove that person from the people list.  
    Person selectedPerson = (Person) table.getRowData();  
    people.remove(selectedPerson);  
    //simple hey. There is another way to do this with binding the datatable to the bean.  
  }  

  public void addPerson() {  
    //here we create a new person object from the entered values, and add to the people list.  
    Person newPerson = new Person();  
    newPerson.setFirstname(getFirstname());  
    newPerson.setSurname(getSurname());  
    people.add(newPerson);  
  }  

  //HELPERS FOR DISPLAYING NICELY  
  public boolean isPersonAdded() {  
    return people.size() > 0;  
  }  

  //ALL GETTERS AND SETTERS HERE....  

} 
```

JSP

```
<%@ page isELIgnored="false" language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>  
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %>  
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>  
<%@ taglib uri="http://myfaces.apache.org/tomahawk" prefix="t" %>  

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">  
<html>  
<f:view>  
<head>  
  <title>Data table stuff</title>  
</head>  
<body>  

<div class="text_style">  

  <h:form id="mainform">  

<h:dataTable value="#{datatableBean.people}" var="tab"  
binding="#{datatableBean.table}" rendered="#{datatableBean.personAdded}">  

<h:column>  
<f:facet name="header">  
          <h:outputText value="Name"/>  
        </f:facet>  
        <h:outputText value="#{tab.firstname}"/>  
</h:column>  

<h:column>  
<f:facet name="header">  
          <h:outputText value="Surname"/>  
        </f:facet>  
        <h:outputText value="#{tab.surname}"/>  
</h:column>  

<h:column>  
<f:facet name="header">  
<h:outputText value="Click to remove"/>  
</f:facet>  

<h:commandLink action="#{datatableBean.removePerson}" value="remove"/>  
</h:column>  

</h:dataTable>  

<p>  
<h:outputText value="To add a new person, fill in these details then click add"/>  

<p>  
<h:outputText value="Firstname"/>  
<h:inputText value="#{datatableBean.firstname}" />  
<br>  
<h:outputText value="Surname"/>  
<h:inputText value="#{datatableBean.surname}"/>  
<br>  
<h:commandButton action="#{datatableBean.addPerson}" value="Add"/>  

</h:form>    
</div>  
</body>  
</f:view>  
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-19T08:57:25.683

尝试对该标签使用“渲染”和“更新”。

# java - 字符串排列 Java

> ID：12590462
> 
> 赞同：0
> 
> 时间：2012-09-25T20:21:41.537
> 
> 标签：java, algorithm, permutation

我需要得到一个字符串的所有排列，但是有一个转折。我需要得到排列，但长度不同。像这样： AB 的排列将是：

一个

乙

AA

BB

AB

文学学士

我可以获得具有固定长度的字符串的排列，但我坚持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:28:31.527

```
public void processPermutations(String s) {
  for (int i=1; i<s.length; i++) {
    String substring = s.substring(0, i);
    // Generate and process the permutations of the substring here...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:31:10.857

你可以这样做：

```
public List<String> getPermutations(String s) {
    List<String> result = new ArrayList<String>();

    if (s.length() > 1) {
        for (int i = 0; i < s.length(); i++) {
            //Create a string that has all the characters of s except the ith one
            String smallerString = s.substring(0,i) + s.substring(i + 1, s.length());
            result.addAll(getPermutations(smallerString));

            //Get permutations involving a single character appearing multiple times,
            //ie. AA, AAA, AAAA, etc.
            String repeatString = new String();
            for (int j = 1; j <= s.length(); j++) {
                repeatString = repeatString + s.charAt(i);
                result.add(repeatString);
            }
        }
    }

    //Add all the permutations using all the string's characters to the list here.
    return result;
} 
```

但是，尽量不要考虑它的复杂性；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T21:05:16.020

您必须首先将字符串的组合放入数量递减的存储桶中，然后在每个组合存储桶上进行置换。例如，如果您的字符串有 3 个字符：

“ABC”的组合选择 3 = 1 “ABC”的组合选择 2 = 3 “ABC”的组合选择 1 = 3

因此，您需要找到这 7 种情况中每一种情况的排列。在伪代码中：

```
int lenString = s.length
int[] all_permutations = new array
for( buckets = 1 to lenString ){
    int[] c = Combinations( s, buckets )
    int[] p = Permutations( c )
    all_permutations += p   
} 
```

# java - JComboBox 是否有容量限制

> ID：12590464
> 
> 赞同：2
> 
> 时间：2012-09-25T20:21:46.113
> 
> 标签：java, swing, jcombobox

JComboBox 有什么限制吗？我正在尝试填充 JComboBox()，但并非所有值都被填充。

```
JComboBox combo = new JComboBox();
String[] lines = edit.getText().split("\n");

for(String line : lines){
   String subLine = line.substring(0, 15);
   combo.addItem(subLine);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:55:45.887

项目数量没有问题，但 start_up 非常懒惰

```
import java.awt.*;
import java.util.Vector;
import javax.swing.*;
import javax.swing.UIManager;
import javax.swing.plaf.ColorUIResource;
import javax.swing.plaf.metal.MetalComboBoxButton;

public class MyComboBox {

    private Vector<String> listSomeString = new Vector<String>();
    private JComboBox someComboBox = new JComboBox(listSomeString);
    private JComboBox editableComboBox = new JComboBox(listSomeString);
    private JComboBox non_EditableComboBox = new JComboBox(listSomeString);
    private JFrame frame;

    public MyComboBox() {
        for (int i = 0; i < 100000; i++) {
            listSomeString.add("-");
            listSomeString.add("Snowboarding");
            listSomeString.add("Rowing");
            listSomeString.add("Knitting");
            listSomeString.add("Speed reading");
        }
//
        someComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        someComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        someComboBox.setEditable(true);
        someComboBox.getEditor().getEditorComponent().setBackground(Color.YELLOW);
        ((JTextField) someComboBox.getEditor().getEditorComponent()).setBackground(Color.YELLOW);
//
        editableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        editableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        editableComboBox.setEditable(true);
        JTextField text = ((JTextField) editableComboBox.getEditor().getEditorComponent());
        text.setBackground(Color.YELLOW);
        JComboBox coloredArrowsCombo = editableComboBox;
        Component[] comp = coloredArrowsCombo.getComponents();
        for (int i = 0; i < comp.length; i++) {// hack valid only for Metal L&F
            if (comp[i] instanceof MetalComboBoxButton) {
                MetalComboBoxButton coloredArrowsButton = (MetalComboBoxButton) comp[i];
                coloredArrowsButton.setBackground(null);
                break;
            }
        }
//
        non_EditableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        non_EditableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
//
        frame = new JFrame();
        frame.setLayout(new GridLayout(0, 1, 10, 10));
        frame.add(someComboBox);
        frame.add(editableComboBox);
        frame.add(non_EditableComboBox);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);

        System.out.println(listSomeString.size());
        System.out.println(someComboBox.getItemCount());
        System.out.println(editableComboBox.getItemCount());
        System.out.println(non_EditableComboBox.getItemCount());
    }

    public static void main(String[] args) {
        UIManager.put("ComboBox.background", new ColorUIResource(Color.yellow));
        UIManager.put("JTextField.background", new ColorUIResource(Color.yellow));
        UIManager.put("ComboBox.selectionBackground", new ColorUIResource(Color.magenta));
        UIManager.put("ComboBox.selectionForeground", new ColorUIResource(Color.blue));
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                MyComboBox aCTF = new MyComboBox();
            }
        });
    }
} 
```

输出可能是

```
run:
500000
500000
500000
500000
BUILD SUCCESSFUL (total time: 4 seconds) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T21:02:27.610

如果问题空间适合，还可以考虑两个（或更多）组合层以最小化滚动，如此[处所示](https://stackoverflow.com/a/3191882/230513)。

# wordpress - WordPress下拉菜单问题

> ID：12590465
> 
> 赞同：0
> 
> 时间：2012-09-25T20:21:55.817
> 
> 标签：wordpress, wordpress-theming

我的 WordPress 菜单具有以下功能，但每次添加子菜单时，它都不会按预期显示。

```
register_nav_menus( array(
    'primary' => __( 'primary-menu', 'Primary Menu' ),
) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:31:27.860

如果不查看更多代码或站点 URL，很难说出了什么问题。但是请检查您在functions.php 和模板文件（例如header.php）中的菜单调用以及样式表中的最小css。

没有理由在 WordPress 中使用 Superfish；WordPress 3+ 菜单是纯 css 并且不依赖于 javascript，并且 Superfish 已经四年没有更新了。

这些是从 211 开始的基本函数和 css；将它们用作您自己的代码的基础。

函数.php：

```
register_nav_menu( 'primary', __( 'Primary Menu', 'twentyeleven' ) ); 
```

header.php：

```
<?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?> 
```

样式.css：

```
#access {
    background: #222; /* Show a solid color for older browsers */
    background: -moz-linear-gradient(#252525, #0a0a0a);
    background: -o-linear-gradient(#252525, #0a0a0a);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#252525), to(#0a0a0a)); /* older webkit syntax */
    background: -webkit-linear-gradient(#252525, #0a0a0a);
    -webkit-box-shadow: rgba(0, 0, 0, 0.4) 0px 1px 2px;
    -moz-box-shadow: rgba(0, 0, 0, 0.4) 0px 1px 2px;
    box-shadow: rgba(0, 0, 0, 0.4) 0px 1px 2px;
    clear: both;
    display: block;
    float: left;
    margin: 0 auto 6px;
    width: 100%;
}
#access ul {
    font-size: 13px;
    list-style: none;
    margin: 0 0 0 -0.8125em;
    padding-left: 0;
}
#access li {
    float: left;
    position: relative;
}
#access a {
    color: #eee;
    display: block;
    line-height: 3.333em;
    padding: 0 1.2125em;
    text-decoration: none;
}
#access ul ul {
    -moz-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    -webkit-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    box-shadow: 0 3px 3px rgba(0,0,0,0.2);
    display: none;
    float: left;
    margin: 0;
    position: absolute;
    top: 3.333em;
    left: 0;
    width: 188px;
    z-index: 99999;
}
#access ul ul ul {
    left: 100%;
    top: 0;
}
#access ul ul a {
    background: #f9f9f9;
    border-bottom: 1px dotted #ddd;
    color: #444;
    font-size: 13px;
    font-weight: normal;
    height: auto;
    line-height: 1.4em;
    padding: 10px 10px;
    width: 168px;
}
#access li:hover > a,
#access ul ul :hover > a,
#access a:focus {
    background: #efefef;
}
#access li:hover > a,
#access a:focus {
    background: #f9f9f9; /* Show a solid color for older browsers */
    background: -moz-linear-gradient(#f9f9f9, #e5e5e5);
    background: -o-linear-gradient(#f9f9f9, #e5e5e5);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#f9f9f9), to(#e5e5e5)); /* Older webkit syntax */
    background: -webkit-linear-gradient(#f9f9f9, #e5e5e5);
    color: #373737;
}
#access ul li:hover > ul {
    display: block;
}
#access .current-menu-item > a,
#access .current-menu-ancestor > a,
#access .current_page_item > a,
#access .current_page_ancestor > a {
    font-weight: bold;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:14:14.563

子菜单将是 CSS/jQuery 问题。

您是否自己编写了主题？很可能是一个

```
parent:hover child.sub-menu { display: block; }
/*Psuedo-code*/ 
```

类型问题

# c# - 禁用 Windows 窗体上的最大化/还原按钮

> ID：12590466
> 
> 赞同：0
> 
> 时间：2012-09-25T20:22:20.827
> 
> 标签：c#, .net-cf-3.5

我正在使用 VC# 在 WIN CE 环境中开发应用程序。

1）我想在我的一些表格上**只有**“X”按钮。2）我希望表格占据**全屏**。3) 表格**不应移动**。我尝试使用设计器，但无法实现。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:31:42.840

根据您的要求

1）我的一些表单上只有“X”按钮设置FormBorderStyle，将您的“X”图像附加到顶部表单的右侧并实现图像单击事件以关闭表单。

2）想让窗体占据全屏 Set WindowState = Maximized

3) 表格不应该移动 不知道为什么要这样做，您可以使用 ShowModal/TopMost 要求用户在输入时提醒用户，但不要在表格上粘上胶水，有点不友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-06T08:41:48.167

您可以简单地利用以下几行

```
this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedToolWindow;
this.WindowState = FormWindowState.Maximized; 
```

# sql - SQL - 动态属性

> ID：12590468
> 
> 赞同：0
> 
> 时间：2012-09-25T20:22:28.970
> 
> 标签：sql, sqlite, database-design

我正在尝试创建一个项目数据库，其中每个项目都可以具有多个属性。我还有一个容器表（容器可以容纳物品）。每个容器都有多个必需的属性。项目属性必须满足容器属性的要求，才能使项目适合容器。

注意：可以随时添加新属性。

```
Example:
Item 1 Attributes
    Color: Red
    Material: Aluminum
    Length: 100
    Width: 200
    Rating: 4

Container 1 Required Attributes:
    Color=Red
    Material=Aluminum
    Length<105
    Width<300
    Rating=4 
```

我想找到适合容器的所有物品。如果容器必需属性表有一个比较器字段，我可以获取容器 1 的所有必需属性，然后根据比较器字段动态生成查询。我不是数据库专家，但这似乎不是一个好的设计。

另一种选择是拥有多个容器必需属性表 - 一个用于最大值，一个用于最小值，一个用于等值数字，一个用于等值字符串等。

```
Example:
Container 1 Maximum Attributes
Length: 105
Width: 300

Container 1 Minimum Attributes
<none>

Container 1 Equal Attributes (Float)
Rating: 4

Container 1 Equal Attributes (String)
Color: Red
Material: Aluminum 
```

在这种情况下，我不必动态生成查询，但这似乎也不是最好的解决方案，因为我最终将需要用于 >= 和 <= 的表。

有人对更好的设计有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:58:57.847

当你这样说时：

> 注意：可以随时添加新属性

这会带来很多后果。最初开发的 SQL 并不是为了支持我称之为“动态数据模型”的东西。在数据模型中发现新的但缺少的属性仅由以下两种事件之一引起：信息需求的变化或在当前实现中发现错误或遗漏。动态数据建模不一定是坏事，但如果你通过抛弃许多经典数据库管理附带的纪律来实现它，你同时也抛弃了相应的保证。

如果您更进一步，说任何用户都可以添加新属性以及添加新数据，那么后果会更加严重。两个用户可能会发现相同的属性，并给它不同的名称。这导致了“同义词问题”。两个用户可能会发现两个不同的属性，但给两者赋予相同的名称。这导致了“同音异义问题”。如果您不解决这些问题，那么从结果数据中获取意义几乎是不可能的。

我将提醒您在将新属性添加到现有数据库时很重要的两个区别。在 SQL 级别，这是 DDL 和 DML 之间的区别。在数据级别，这是元数据和数据之间的区别。您可能知道其中的大部分内容，但根据动态建模，值得重新考虑。

在经典数据库中，您实现现有实体或实体之间关系的新发现属性的方式是通过类似的构造

```
alter table X add column Y .... 
```

这是 DDL。执行 DDL 的权利通常仅限于 DBA，而不授予提供数据或使用应用程序作为接口来提供数据的用户。因此，从这个意义上说，该模型不是动态的。DBA 社区（如果有多个 DBA）在更改模型之前会相互协商。

当您执行向现有表添加列之类的操作时，会发生两件事。首先，实际表的结构被改变以适应新列。其次，更新数据字典以反映表的变化。

数据字典包含元数据，即描述数据库本身模型的数据。用户表包含描述主题的数据。

通常，当您尝试在 SQL 中实现动态建模时，您最终会将元数据的副本（如列名）存储在用户表中。维护此用户数据与实际数据结构之间的相关性或它们在数据字典中的反映成为您的责任。

你可以这样做。但这是一大堆工作。而您正在踏上一段旅程，SQL 可能不是实现目标的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:12:05.960

查询参数只能是表达式，不能是标识符（列）或运算符，因此避免动态生成查询的唯一方法是为所有容器设置一组固定的属性和比较，并仅存储值：

```
Container 1 Required Attributes:
  Color: Red
  Material: Aliminum
  Max_Length: 105
  Max_Width: 300
  Rating: 4 
```

如果不同的容器有不同数量或类型的需求，那么您的查询无论如何都必须是动态的。在这种情况下，拥有多个必需的属性表似乎比单个表没有任何好处。

`WHERE`如果属性存储在列中，您可以通过存储插入到条件中的单个字符串来使设计更加动态，例如`items.color='Red' AND items.Length<105 ...`. 这样做的缺点是，如果您希望以后能够在不解析该字符串的情况下更改某些条件，则必须单独存储条件。

# c# - 如何从代码中选择 ListView 中的多个项目

> ID：12590470
> 
> 赞同：0
> 
> 时间：2012-09-25T20:22:49.980
> 
> 标签：c#, windows, listview, windows-8, selection

我正在使用新的 Windows 8 ListView 控件。我有一个被选中的用户列表，这取决于存储在其他地方的另一个用户列表。

也许我的情况有点具体，但我的问题很简单：如何从代码中选择 ListView 对象中的多个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:52:59.940

您可以使用 .SelectedItems 属性。这是一个简单的示例，它填充一个列表视图，然后标记索引为 4 或更高的项目：

```
for (var i = 0; i <= 10; i++)
        {
            if (mylistview.Items != null) mylistview.Items.Add("Item at index "+i);
        }

        if (mylistview.Items != null)
        {
            for (var i = 0; i <= mylistview.Items.Count - 1; i++)
            {

                if (i > 4)
                {
                    mylistview.SelectedItems.Add(mylistview.Items[i]);
                }
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:44:14.983

Yout 列表视图具有名为 Items 的属性

```
 yourList.Items 
```

这是绑定到列表的项目的集合。如果您知道索引（或其他 uniq 值），您可以找到它们。如果您有索引列表，只需从列表中获取每个索引

```
 yourList.Items.ElementAt(index); 
```

如果您知道您的项目或其他字段的 Id 或名称，您可以创建一个循环，您将在 Items 集合中查找它们

# iphone - UITableView registerNib:forCellReuseIdentifier:

> ID：12590471
> 
> 赞同：42
> 
> 时间：2012-09-25T20:22:51.523
> 
> 标签：iphone, uitableview

我在 WWDC 视频中看到了这一点，但只是非常简短。他们没有讨论如何创建实际的 xib 文件。

我有一个名为 MyCustomCell 的 UITableViewCell 子类。在这我有几个属性 UILabels、UIImageViews 等......都设置为 IBOutlets。

现在，在我的 xib 文件中......

我将什么设置为文件的所有者？我在哪里引用我的 MyCustomCell 类是文件的所有者吗？

一旦我设置了文件的所有者，如何将它与 xib 的根视图链接？

我已经尝试了一些设置，但在使用它时总是出错。

哦，我用来注册它的代码是......

```
self.cellNib = [UINib nibWithNibName:@"MyCustomCell" bundle:nil];
[self.tableView registerNib:self.cellNib forCellReuseIdentifier:@"CustomCell"]; 
```

谢谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-25T20:40:00.513

通常，在这种情况下，您不必担心文件的所有者，因为当`tableView`从提供的/关联的单元格`UINib`与`reuseIdentifier`. 它将加载笔尖的所有顶级对象，并且**仅使用属于类的第一个顶级对象**（`UITableViewCell`或者可能只是第一个顶级对象而不管类？但通常你只有你的`UITableViewCell`in无论如何，您的 XIB - 不计算 the`File's Owner`和 the `First Responder`，它们只是“代理”）。

事实上，它将尝试使一个单元格出列，如果它没有找到一个可重用的单元格，它将使用您提供`tableView`的创建一个新单元格。`UINib`这将*类似于*以下内容：

```
NSArray* topLevelObjects = [self.cellNib instantiateWithOwner:nil options:0];
cell = [topLevelObjects objectAtIndex:0]; 
```

*（这当然是一个简化的版本只是为了展示这个想法，我不知道它是否真的调用了这些确切的行，但它应该很接近）*

因此**，在这种特殊情况下`File's Owner`不使用**，您只需**将一个简单的自定义`UITableViewCell`作为您的 XIB 文件的唯一顶级对象**`File's Owner`放在现有的anf旁边`First Responder`（同样，只是“代理”/“外部对象引用”并且不会被实例化，也不会成为`instantiateWithOwner:options:`) 返回的顶级对象的一部分。

* * *

如果它仍然不起作用：

*   确保**您正确填写了`reuseIdentifier`IB`UITableViewCell`中**的 （在您选择 IB 中的单元格后，在右侧的 Object Inspector 窗格中），并**在 IB 中使用与您在代码中使用的属性****完全相同的值`reuseIdentifier`**。
*   如果还是不行，请提供更多信息，特别是你有什么样的错误、日志消息或异常。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-15T02:50:57.737

我发现问题中给出的代码很好，但是如果您使用情节提要，则无法`self.tableView`在方法中引用。在另一个问题中`init`有一些[讨论。](https://stackoverflow.com/questions/8689235/could-not-load-nib-in-bundle-nsbundle-when-using-storyboarding "使用情节提要时无法在 bundle nsbundle 中加载 nib")

所以第一行进入`init`：

```
self.cellNib = [UINib nibWithNibName:@"MyCustomCell" bundle:nil];
```

但是这条线应该进入`viewDidLoad`或类似：

```
[self.tableView registerNib:self.cellNib forCellReuseIdentifier:@"CustomCell"];
```

这解决了我的神秘错误，例如`"*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle <Foo.app> (loaded)' with name 'Ogf-Sj-1ej-view-bBf-Ti-Dda''"`

而且，是的，我正在做一些非常相似的事情，从 Storyboard 中舀出东西并将它们放在 xib 中以便在视图控制器之间重用！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-17T05:43:56.413

除了来自“AliSoftware”的回答之外，请注意这里最不明显的事情是 UITableViewCell 必须是**Root View** * *ABOVE* * 甚至是 UIView。默认情况下，当我选择一个新的 IB 文件时，它会创建一个 UIView。所以删除 UIView 会有所帮助。谢谢。

PS：我想对该答案发表评论，但由于某种奇怪的原因我无法发表评论，只能回答。我想我需要一个特定的评级。

# iphone - iOS 声音播放音量不考虑音量变化或静音

> ID：12590474
> 
> 赞同：3
> 
> 时间：2012-09-25T20:23:05.517
> 
> 标签：iphone, ios, volume

这是我当前的代码

```
void playSound(NSString* myString) {

    CFBundleRef mainBundle = CFBundleGetMainBundle();
    NSString *string = myString;
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, 
                        (__bridge CFStringRef) string, CFSTR ("wav"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);

} 
```

它可以工作，但它不允许您更改设备上的音量或使用静音开关将其静音。启用这些功能的最简单方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:29:45.680

你为什么不使用[AVFoundation](https://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188)？如果您只想播放简单的音效，那将是一个更好的选择，因为它是更高级别的 API。

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"file" ofType:@"mp3"];
NSURL *url = [NSURL fileURLWithPath:filePath];

// Assuming audioPlayer is an ivar.
NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
audioPlayer.numberOfLoops = -1;

if (audioPlayer == nil)
    NSLog([error description]);             
else 
    [audioPlayer play]; 
```

`AVAudioPlayer`应该尊重用户的音量设置。

# java - 将写成单词的数字转换为整数？

> ID：12590480
> 
> 赞同：7
> 
> 时间：2012-09-25T20:23:46.077
> 
> 标签：java, numbers

是否有用于将字符串数字转换为等效整数的开源 Java 库（例如，将“十”转换为 10）？我知道怎么做，但如果已经有可用的库，我宁愿不要浪费客户的时间从头开始编写一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:29:45.667

我怀疑这样的图书馆是否存在。

如果您只想转换有限数量的数字（例如`zero`through `ten`），那么在这里提出这个问题可能会花费您更多的时间，而不是自己实现它。

如果您正在考虑转换`"one hundred twenty four and fifty-one hundredth's"`比您正在寻找的更复杂的数字，那么自然语言识别器非常复杂，并且不太可能拥有任何语言的良好库。

最后，后端值和用户可消费内容通常最好不要耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:47:06.480

“二十七”还是“二十七”？对于“二十七”还是“分数和七”？贝克的十几个人？一对骰子，还是两个骰子？还差一个六包？数字处理程序的三重奏？21 世纪（20xx 年）？

您的要求比我想象的要广泛一些。我建议您使用一个实际上允许灵活*添加*新表示而不是假设单一表示的框架，[Apache 的开放自然语言处理框架](http://opennlp.apache.org/index.html)可能是一个不错的选择。

经过几次尝试，您可能会构建三位一体的数字处理例程。或者至少有[很多](http://www.imdb.com/title/tt0092086/quotes?qt=qt0400510)想法。

# xml - .NET XML Deserialization ignore namespaces

> ID：12590487
> 
> 赞同：11
> 
> 时间：2012-09-25T20:24:11.263
> 
> 标签：xml, vb.net, xml-serialization, xml-namespaces

I got thousands of XML files following all the same schema/structure. I implemented IXmlSerializable and thus am reading the elements and attributes myself.

My problem is that these files each use a different phony namespace. These files come from an other source so I cannot change that :D Also, there are too many of those namespaces for me to just build an array of the possible namespaces and pass it along to the xmlserializer.

Right now, if I don't specify a namespace, it throws a [xmlns:ns0="http://tempuri.org/abcd.xsd" was not expected] error.

I would like to be able to tell the serializer to simply ignore the namespace when deserializing my object and just fire ReadXML. Or just be able to tell it to accept any "http://tempuri.org/" namespace.

Is that possible?

I would like to avoid modifying the files as much as possible.

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-13T21:09:36.477

对的，这是可能的。当你调用你的`Deserialize`方法时`XmlSerializer`，你可以指定一个`XmlTextReader`实例。

[Cheeso 在相关 C# 问题上的这个答案](https://stackoverflow.com/a/873281/87698)显示了如何创建一个`XmlTextReader`忽略 XML 文件中出现的任何命名空间的方法。我冒昧地将他的想法翻译成 VB，并根据您的要求创建了一个简单的概念验证示例：

```
Imports System.IO
Imports System.Text
Imports System.Xml
Imports System.Xml.Serialization

' Helper class
Class NamespaceIgnorantXmlTextReader
    Inherits XmlTextReader

    Public Sub New(stream As Stream)
        MyBase.New(stream)
    End Sub

    Public Overrides ReadOnly Property NamespaceURI As String
        Get
            Return ""
        End Get
    End Property
End Class

' Serializable class
Public Class ExampleClass
    Public Property MyProperty As String
End Class

' Example
Module Module1
    Sub Main()
        Dim testXmlStream = New MemoryStream(Encoding.UTF8.GetBytes(
            "<ExampleClass xmlns=""http://tempuri.org/SomePhonyNamespace1.xsd"" 
                           xmlns:ph2=""http://tempuri.org/SomePhonyNamespace2.xsd"">
                 <ph2:MyProperty>SomeValue</ph2:MyProperty>
             </ExampleClass>"))

        Dim serializer As New XmlSerializer(GetType(ExampleClass))
        Dim reader As New NamespaceIgnorantXmlTextReader(testXmlStream)
        Dim example = DirectCast(serializer.Deserialize(reader), ExampleClass)

        Console.WriteLine(example.MyProperty)   ' prints SomeValue
    End Sub
End Module 
```

* * *

注意：如果只是*文档的默认命名空间*不同（即各个标签没有不同的命名空间），`TextXmlReader`则使用`Namespaces`属性设置为的标准`False`就足够了。

```
Imports System.IO
Imports System.Text
Imports System.Xml
Imports System.Xml.Serialization

' Serializable Class
Public Class ExampleClass
    Public Property MyProperty As String
End Class

' Example
Module Module1
    Sub Main()
        Dim testXmlStream = New MemoryStream(Encoding.UTF8.GetBytes(
            "<ExampleClass xmlns=""http://tempuri.org/SomePhonyNamespace1.xsd"">
                 <MyProperty>SomeValue</MyProperty>
             </ExampleClass>"))

        Dim serializer As New XmlSerializer(GetType(ExampleClass))
        Dim reader As New XmlTextReader(testXmlStream)
        reader.Namespaces = False
        Dim example = DirectCast(serializer.Deserialize(reader), ExampleClass)

        Console.WriteLine(example.MyProperty)   ' prints SomeValue
    End Sub
End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T16:15:02.867

这不是您关于如何告诉 XmlSerialiser 忽略名称空间的问题的答案，而是一种解决方法。在序列化之前，您可以使用 xslt 转换从 xml 中剥离名称空间。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/|comment()|processing-instruction()">
    <xsl:copy>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*">
    <xsl:element name="{local-name()}">
      <xsl:apply-templates select="@*|node()"/>
    </xsl:element>
  </xsl:template>

  <xsl:template match="@*">
    <xsl:attribute name="{local-name()}">
      <xsl:value-of select="."/>
    </xsl:attribute>
  </xsl:template>

</xsl:stylesheet> 
```

几个扩展方法作为这个的助手，可能会有点棘手，但我会尝试：

```
/// <summary>
/// Transforms the xmldocument to remove all namespaces using xslt
/// http://stackoverflow.com/questions/987135/how-to-remove-all-namespaces-from-xml-with-c
/// http://msdn.microsoft.com/en-us/library/42d26t30.aspx
/// </summary>
/// <param name="xmlDocument"></param>
/// <param name="indent"></param>
public static XmlDocument RemoveXmlNameSpaces(this XmlDocument xmlDocument, bool indent = true)
{
    return xmlDocument.ApplyXsltTransform(Properties.Resources.RemoveNamespaces, indent);
}

public static XmlDocument ApplyXsltTransform(this XmlDocument xmlDocument, string xsltString,bool indent= true)
{
    var xslCompiledTransform = new XslCompiledTransform();
    Encoding encoding;
    if (xmlDocument.GetEncoding() == null)
    {
        encoding = DefaultEncoding;
    }
    else
    {
        encoding = Encoding.GetEncoding(xmlDocument.GetXmlDeclaration().Encoding);
    }
    using (var xmlTextReader = xsltString.GetXmlTextReader())
    {
        xslCompiledTransform.Load(xmlTextReader);
    }
    XPathDocument xPathDocument = null;
    using (XmlTextReader xmlTextReader = xmlDocument.OuterXml.GetXmlTextReader())
    {
        xPathDocument = new XPathDocument(xmlTextReader);
    }
    using (var memoryStream = new MemoryStream())
    {
        using (XmlWriter xmlWriter = XmlWriter.Create(memoryStream, new XmlWriterSettings()
            {
                Encoding = encoding,
                Indent = indent
            }))
        {
            xslCompiledTransform.Transform(xPathDocument, xmlWriter);
        }
        memoryStream.Position = 0;
        using (var streamReader = new StreamReader(memoryStream, encoding))
        {
            string readToEnd = streamReader.ReadToEnd();
            return readToEnd.ToXmlDocument();
        }
    }
}

public static Encoding GetEncoding(this XmlDocument xmlDocument)
{
    XmlDeclaration xmlDeclaration = xmlDocument.GetXmlDeclaration();
    if (xmlDeclaration == null)
        return null;
    return Encoding.GetEncoding(xmlDeclaration.Encoding);
}

public static XmlDeclaration GetXmlDeclaration(this XmlDocument xmlDocument)
{
    XmlDeclaration xmlDeclaration = null;
    if (xmlDocument.HasChildNodes)
        xmlDeclaration = xmlDocument.FirstChild as XmlDeclaration;
    return xmlDeclaration;
}

public static XmlTextReader GetXmlTextReader(this string xml)
{
    return new XmlTextReader(new StringReader(xml));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-12T19:43:16.090

为了解释 Heinzi 的回答，我需要更改默认命名空间（从技术上讲，是根元素的命名空间），这样我就可以使用`XmlAttributeOverrides`应用于我无法控制的类层次结构来反序列化文档。作为其中的一部分，我必须为`XmlRootAttribute`第一类分配一个属性。问题在于，为了反序列化文档，`XmlSerializer`期望 Namespace 值与 的命名空间匹配`XmlRootAttribute`，这是无法保证的。

使用以下派生自 的类，`XmlReader`可以为反序列化程序为根元素的命名空间分配一个已知值。可以强制读取器的命名空间与`XmlRootAttribute`属性的命名空间匹配（即使它是空字符串）。

简化解决方案是使用`XmlWrappingReader`Alterant 在 StackOverflow 上的回答到[How do I create a XmlTextReader that ignore Namespaces and does not check characters](https://stackoverflow.com/a/47043927/1307074)。

```
/// <summary>
/// XML document reader replaces the namespace of the root element.
/// </summary>
public class MyXmlReader : Mvp.Xml.Common.XmlWrappingReader
{
    // Namespace of the document's root element. Read from document.
    private string rootNamespace = "";

    /// <summary>
    /// Get or set the target namespace to use when deserializing.
    /// </summary>
    public string TargetNamespace { get; set; }

    /// <summary>
    /// Initialize a new instance of the MXmlReader class.
    /// </summary>
    /// <param name="reader">XmlReader instance to modify.</param>
    public MyXmlReader(XmlReader reader) : base(reader)
    {
        TargetNamespace = "";
    }

    /// <summary>
    /// Return the namespace of the XML node. Substitute the target namespace if it matches the namespace of the root element.
    /// </summary>
    public override string NamespaceURI
    {
        get
        {
            if (Depth == 0 && NodeType == XmlNodeType.Element)
            {
                // Save the namespace from the document's root element.
                rootNamespace = base.NamespaceURI;
            }

            if (base.NamespaceURI == rootNamespace)
            {
                // Substitute the schema's targetNamespace for the root namespace.
                return TargetNamespace;
            }

            // Use the native namespace of the XML node.
            return base.NamespaceURI;
        }
    }
} 
```

我实例化了 MyXmlReader 并使用它反序列化到标记为的对象`XmlRootAttribute(ElementName = "DocumentRoot", Namespace = "http://my.target.namespace")`：

```
var reader = new MyXmlReader(XmlReader.Create(stream));
reader.TargetNamespace = "http://my.target.namespace";

// Deserialize using the defined XML attribute overrides that can
// supply XML serialization attributes to types at runtime.
Type t = typeof(SomeDeserializedObject);
var xo = SomeDeserializedObject.GetXmlAttributeOverrides();
XmlSerializer serializer = new XmlSerializer(t, xo);
SomeDeserializedObject o = (SomeDeserializedObject)serializer.Deserialize(reader); 
```

如果我导入的 XML 文档有不同的根命名空间，或者根本没有指定一个，现在我仍然可以反序列化它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-04T20:03:58.277

您可以使用此代码从 xml 文件中删除名称空间

```
using (FileStream stream = new FileStream("FilePath",FileMode.Create))
                {
                    XmlSerializer serializer = new XmlSerializer(typeof(YourClass));
                    XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
                    ns.Add("", "");                    
                    serializer.Serialize(stream," Your Object to Serialize",ns);
                } 
```

# php - Phonegap黑莓照片上传服务器php脚本

> ID：12590488
> 
> 赞同：0
> 
> 时间：2012-09-25T20:24:11.920
> 
> 标签：php, html, cordova, blackberry, camera

有很多人提出与此问题相关的问题，但没有一个人足以让我解决我的问题。

我已经创建了一个基于 phonegap 的功能齐全的 HTML5 智能手机应用程序，用于......不寒而栗......黑莓使用服务器端 php 脚本将数据很好地发送到远程 MYSQL 服务器。

但是，我想提供上传照片的选项，因为这是预防伤害，危险需要拍照。这是一个非商业产品，它是现代智能手机技术的一个工作示例，并展示了如何将一个应用程序轻松移植到各种智能手机。黑莓是常见的手机，必须是最好的例子。

我无法为爱或金钱找到任何应​​用程序和 php 服务器端脚本的工作示例。

我从 CORDOVA 示例文件中提取的示例拍摄了一张照片，我可以在我的应用程序中看到生成的缩略图，这一切都很甜蜜（基于您在下面看到的所有代码），但我不知道我需要编程什么让我的upload.php 做点什么。我尝试的一切都失败了，错误代码为 3 和 1..

这是 webapp 的重要代码。

HTML

```
 <h3>navigator.camera</h3>
<input type="button" value="Get Photo (Data)" onclick="capturePhoto();return false;" /> 
<input type="button" value="Get Photo (URI)" onclick="capturePhotoURI();return false;" /> 
<img style="display:none;width:120px;height:120px;" id="cameraImage" src="" />
<p id="uploadProgress"></p>
<input style="display:none;" id="uploadButton" type="button" value="Upload" onclick="uploadImage();return false;" /> 
```

JAVASCRIPT

```
 function capturePhotoURI() {
        navigator.camera.getPicture(onCapturePhotoURISuccess, fail, 
            { destinationType: Camera.DestinationType.FILE_URI, quality: 50 });
    }

        function onCapturePhotoURISuccess(imageURI) {
        if (imageURI != null) {
            var smallImage = document.getElementById('cameraImage');
            var uploadButton = document.getElementById('uploadButton');

            // Unhide image elements
            smallImage.style.display = 'block';
            uploadButton.style.display = 'block';

            // Show the captured photo
            // The inline CSS rules are used to resize the image
            smallImage.src = imageURI;
        }
    }

        function uploadImage() {
        var smallImage = document.getElementById('cameraImage');
        if (smallImage.src && smallImage.src !== "") {
            var f = new FileTransfer();
            f.upload(
                // file path
                smallImage.src,
                // server URL - update to your own, and don't forget to 
                // include your domain in an access element in config.xml      
                "http://192.168.1.91/upload.php",
                // success callback
                function(result) {
                    document.getElementById('uploadProgress').innerHTML =
                        result.bytesSent + ' bytes sent';
                    alert(result.responseCode + ": " + result.response);
                },
                // error callback
                function(error) {
                    alert('error uploading file: ' + error.code);
                },
                // options
                { fileName: 'myImage.jpg', 
                  params: { 'username':'jtyberg' } 
                });
        }
    } 
```

上面的服务器 ID 是正确的（它是我自己的开发服务器的正确翻译，所以我没有使用 localhost，因为我需要它是准确的）。除了服务器 IP 之外，您看到的所有内容都是普通的、开箱即用的、来自 phonegap 的未更改的工作示例。手机是一个相同的 192 网络，并且肯定会尝试运行我尝试的任何 upload.php

基本上我想拿这个文件，并使用upload.php文件将它移到

http : // 192.168.1.91/injury/sample_images/xxxx.jpg （在不知道如何停止链接的情况下分隔 http）

我检查了权限，它们都正常，我的 config.html 允许所有域

任何人都可以让我摆脱痛苦并给我一个示例upload.php，它将使用上面的上传代码并使用相机图像做一些事情。

一旦我能得到一个有效的例子，我就可以准确地分解正在发生的事情并开始学习过程。

或者，如果有人可以提供一个工作应用程序.. 应用程序和服务器端代码用作教程，我很乐意做相关的研究。

非常感谢人们为此付出的任何时间。我束手无策，当我应该能够完成这件事时，让自己陷入了正确的混乱之中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:35:15.253

我决定使用 base64 字符串的发布方法。然而，我确实发现在这种情况下，我的开发服务器上的设置更有可能是可能的原因。

# awk - Splitting Filename delimited by period (.)

> ID：12590490
> 
> 赞同：7
> 
> 时间：2012-09-25T20:24:19.330
> 
> 标签：awk, sh

I'm writting an sh file where I have var as:

```
c=aabbcc.DP.09-25-2012_14_17.dmp 
```

i want to copy only initial part in another var like:

```
d = aabbcc 
```

How should I trim my var?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T20:26:43.170

If by `sh` you mean `bash`, then

```
d="${c%%.*}" 
```

otherwise

```
d="`echo "$d"|cut -d. -f1`" 
```

will do, perhaps.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-26T06:06:44.943

perl:

```
D=`echo $c | perl -lne 's/([^\.]*)\..*/\1/;print'` 
```

赛德：

```
D=`echo $c | sed 's/\([^\.]*\)\..*/\1/'` 
```

awk：

```
D=`echo $c | awk -F. '{print $1}'` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T08:35:54.830

expr 命令兼容任何 sh 实现，不需要管道

```
d=`expr $c : '\([^\.]*\)'` 
```

# python - Is there a curated repository for DJango based website templates?

> ID：12590492
> 
> 赞同：2
> 
> 时间：2012-09-25T20:24:27.950
> 
> 标签：python, django

Where can I find a list of (preferably curated) DJango based, simple-website, templates (or equivalent, prewritten, boilerplate DJango code and layout)?

**Context**

I'm considering a project which requires me to deploy a large number of (fairly simple) personal/vanity websites. They are simple enough that, most likely, I should be able to deploy them as Wordpress based websites, using a few existing templates.

However, I'm not a fan of Wordpress, and I'd like to see if I can get roughly the same result by working with Python/DJango.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:55:28.360

Django 没有与 Wordpress 类似的“主题”。Wordpress 是一个 CMS——一个完整的应用程序——而 Django 是一个*框架*——也就是说，你可以用它来构建一个 Wordpress，但它不是一个 Wordpress。您可以从一个纯 HTML/CSS 模板开始并使用它来构建功能，但您不会找到任何特定于 Django 的内容，因为它本质上取决于您构建的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:26:20.077

[Pinax](http://pinaxproject.com/) has a lot of pre-baked code.

# python - 在 Python 中，如何确定可迭代对象是否具有稳定的迭代顺序？

> ID：12590494
> 
> 赞同：4
> 
> 时间：2012-09-25T20:24:29.617
> 
> 标签：python, collections, iterator, abstract-class

在 Python 中，如何确定可迭代对象是否具有稳定的迭代顺序？

有[`collections.Iterable`](http://docs.python.org/library/collections.html#collections.Iterable)抽象基类，但没有稳定的对应物。

我问的原因是能够阻止用户或警告他们，当他们（错误地）以不稳定的迭代顺序（`dict`，`set`等）迭代到迭代稳定性至关重要的函数时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T20:52:44.837

您可能正在寻找的一件事是`collections.Sequence`. 这比您想要的更具体，因为根据[文档](http://docs.python.org/glossary.html#term-sequence)，序列“支持使用整数索引进行有效的元素访问”；它也不够具体，因为没有明确保证两次获得相同的索引必须两次返回相同的值。但这足以区分列表和元组与字典和集合。

但是，一般来说是没有办法的。一般来说，没有办法，因为你可以编写任何你喜欢的迭代，并且不需要你指定它是否稳定。例如，您可以执行以下操作：

```
>>> def f():
...     if random.random() < 0.5:
...         for a in xrange(10):
...             yield a
...     else:
...         stuff = range(10)
...         random.shuffle(stuff)
...         for a in stuff:
...             yield a
>>> list(f())
0: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> list(f())
1: [7, 0, 2, 8, 5, 1, 4, 3, 6, 9] 
```

无需声明它们是否稳定就可以编写迭代器这一事实，再加上无法通过迭代某事物来判断它以后是否会以相同的方式迭代，这意味着不可能有判断给定迭代器是否稳定的方法。

我建议您简单地记录您的函数需要迭代顺序的稳定性。您还可以显式检查您知道可能不稳定的内置类型，并在这些类型上引发错误。但是一般没有办法检查任意用户定义的迭代器的稳定性。

# python - Function when entered in text box?

> ID：12590495
> 
> 赞同：1
> 
> 时间：2012-09-25T20:24:34.210
> 
> 标签：python, tkinter

I'm using Tkinter for a small Python application. It has a set of ratio buttons, a text box, and a button. Is there a way to make it so the user can simply press Enter/Return on a keyboard and run the same function the button runs? The text box stays selected even when a radio is changed, so that won't cause any problems.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:01:24.060

您应该能够将事件处理程序绑定到文本框小部件或事件发生时将调用的整个应用程序。假设您有一个处理事件的函数，大致如下：

```
widget.bind('<Return>', event_handler) 
```

您还可以通过调用`bind_all()`任何小部件的方法在应用程序级别绑定处理函数，例如：

```
self.bind_all('<Return>', self.event_handler) 
```

注意键名`Return`不是`Enter`. 有关它们的列表，请参见[键名](http://www.tcl.tk/man/tcl8.4/TkCmd/keysyms.htm)。如果需要，您还可以在键名前加上修饰符，例如`Shift-`and `Control-`。

[这里](http://infohost.nmt.edu/tcc/help/pubs/tkinter/)有一个不错的 tkinter 8.4 在线参考。

# android - releasing surfaceview

> ID：12590498
> 
> 赞同：0
> 
> 时间：2012-09-25T20:24:41.477
> 
> 标签：android, surfaceview, viewgroup

I have a custom `ViewGroup` that contains about 10 `SurfaceView`'s. When you push a button a xml file gets parsed and a skin gets generated which contains 10 more surface views. These then get added to the view group, the view group gets invalidated, and the previous 10 surfaceviews get removed by `viewgroup.removeView`. This is to avoid flickering. It all works great but after doing it maybe 8 times I begin to run out of memory and `lockCanvas` returns null on the new surfaceviews. Is `removeView`, and setting all references to the surface view to null all you need to release a surface? Here is what the code looks like that removes the view:

```
if (viewsToRemove.isEmpty() == false) {

    this.post( new Runnable() 
    {  
        public void run() { 
            if (viewsToRemove.isEmpty() == false) {
                for (IView v : viewsToRemove) {
                    SurfaceView sv = (SurfaceView)v;
                    removeView(sv);
                    v.cleanup();
                }
                viewsToRemove.clear();
                System.gc();
                invalidate();
            }
        } 
    }); 
} 
```

This block of code gets run in `onDraw` after the new `SurfaceView`'s get painted (to avoid flickering). I've tried experimenting with garbage collection and also with manually calling the `SurfaceView`'s finalize method which is what the `v.cleanup` call does but still runs out of memory after a while. It seems to work on Android 4.0 but not on <= 2.3.x.

Here are the errors adb shows:

```
09-25 14:51:01.419: E/Surface(4131): Surface (identity=17237) requestBuffer(1, 0, 0, 1, 00000203) returned a buffer with a null handle
09-25 14:51:01.419: E/Surface(4131): getBufferLocked(1, 0, 0, 1, 00000203) failed (Out of memory)
09-25 14:51:01.419: E/Adreno200-EGL(4131): egliSwapWindowSurface: unable to dequeue native buffer
09-25 14:51:01.469: E/Surface(4131): Surface (identity=17237) requestBuffer(1, 0, 0, 1, 00000203) returned a buffer with a null handle
09-25 14:51:01.469: E/Surface(4131): getBufferLocked(1, 0, 0, 1, 00000203) failed (Out of memory)
09-25 14:51:01.469: E/Adreno200-EGL(4131): eglLockWindowSurface: unable to dequeue native buffer

09-25 14:51:01.549: E/AndroidRuntime(4131): FATAL EXCEPTION: GLThread 25
09-25 14:51:01.549: E/AndroidRuntime(4131): java.lang.RuntimeException: eglSwapBuffers failed: EGL_BAD_ALLOC
09-25 14:51:01.549: E/AndroidRuntime(4131):     at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1080)
09-25 14:51:01.549: E/AndroidRuntime(4131):     at android.opengl.GLSurfaceView$EglHelper.swap(GLSurfaceView.java:1038)
09-25 14:51:01.549: E/AndroidRuntime(4131):     at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1364)
09-25 14:51:01.549: E/AndroidRuntime(4131):     at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1118) 
```

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:09:25.267

我相信我解决了这个问题。我认为由于条件逻辑不正确，并非所有视图都被添加到 viewsToRemove ArrayList 中。

# javascript - GWT - ListBox, how to preview changeEvent

> ID：12590500
> 
> 赞同：5
> 
> 时间：2012-09-25T20:24:53.500
> 
> 标签：javascript, events, gwt, listbox, dom-events

I am working on implementing a ListBox that I want to be able to alert the user when they make a selection in the ListBox. Is there a way to respond to the user clicking an item in the listbox, and respond to the selection before a "changeEvent" occurs so I can prevent the changeEvent from getting fired. I have tried using

```
Event.addNativePreviewHandler(new NativePreviewHandler() {
   @Override
   public void onPreviewNativeEvent(NativePreviewEvent event) {
      System.out.println("EVENT: " + event.getTypeInt());
   }
}); 
```

but this never responds to clicking on a specific element in the ListBox, it only responds to clicking on the ListBox initially, when you focus the ListBox. I want to be able to do something like:

```
Event.addNativePreviewHandler(new NativePreviewHandler() {
   @Override
   public void onPreviewNativeEvent(NativePreviewEvent event) {
      if(event is changeEvent && event source is listBox) {
          if(do some check here)
             event.stopPropagation();
      }
   }
}); 
```

Any suggestions would be greatly appreciated, thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:03:10.910

谢谢各位的意见。我最终做的是在列表框获得焦点时保存选择的状态。并保存此索引并在 changeEvent 发生时切换它，仅在允许的情况下将其更改为下一个选择。

```
@UiHandler("listBox")
public void onListBoxFocus(FocusEvent event) {
   this.saveListBoxSelection = listBox.getSelectedIndex();
}

@UiHandler("listBox")
public void onChange(ChangeEvent event) {
   int newSelection = listBoxCompliant.getSelectedIndex();
   listBox.setSelectedIndex(this.saveListBoxSelection);
   if(proceed with change)
      listBox.setSelectedIndex(newSelection);
   else 
      //cancel event 
```

这是使用 uibinder 完成的，但也可以通过简单地将此事件直接添加到 listBox 来完成。再次感谢您的评论！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T21:23:27.467

如果您不想处理它，您可以简单地杀死该事件：

```
@Override
onChange(ChangeEvent event) {
    // ask user if he wants to continue
    // if yes
       doSomething();
    // if no
       event.kill();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T21:20:25.470

允许 ChangeEvent 继续并没有什么坏处。您可以将逻辑添加到 ChangeEvent 处理程序。如果用户决定不继续，您只需将选择设置回前一个或删除选择。

```
@Override
onChange(ChangeEvent event) {
    // ask user if he wants to continue
    // if yes
       doSomething();
    // if no
       myList.setSelectedIndex(-1);
} 
```

# java - Performance hit when persisting hundreds of millions of SQL Timestamp objects

> ID：12590501
> 
> 赞同：2
> 
> 时间：2012-09-25T20:25:06.323
> 
> 标签：java, sql, database, performance

During execution of a program that relies on the `oracle.sql` package there is a large performance hit for persisting > 200 million Timestamps when compared to persisting the same number of longs.

[Basic Schema](http://sqlfiddle.com/#!4/62491)

Java to persist:

```
Collection<ARRAY> longs = new ArrayList<ARRAY>(SIZE);
Collection<ARRAY> timeStamps = new ArrayList<ARRAY>(SIZE);
for(int i = 0; i < SIZE;i++)  
{  
    longs.add(new ARRAY(description, connection, i));  
    timeStamps.add(new ARRAY(description,connection,new Timestamp(new Long(i)));
}  

Statement timeStatement = conn.createStatement();  
statement.setObject(1,timeStamps);  
statement.execute();   //5 minutes

Statement longStatement = conn.createStatement();  
statement.setObject(1,longs);  
statement.execute();  //1 minutes 15 seconds 
```

My question is what does Oracle do to Timestamps that make them so awful to insert in a bulk manner?

Configuration:

```
64 bit RHEL 5  
jre 6u16  
ojdbc14.jar
64 GB dedicated to the JVM 
```

**UPDATE**
`java.sql.Timestamp` is being used

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:59:27.677

添加到 Srini 的帖子中，有关数据类型的内存使用的文档：

**Oracle Doc on Data Types：** [http](http://docs.oracle.com/cd/E11882_01/timesten.112/e21642/types.htm#autoId31) ://docs.oracle.com/cd/E11882_01/timesten.112/e21642/types.htm#autoId31 （包括数字和时间戳的内存大小）

文档指出 Number 占用 5-22 个字节，Timestamp 占用 11 个字节，Integer 占用 4 个字节。

另外-关于查询日期范围的观点-您是否可以将日期插入长值而不是时间戳，然后在查询数据时使用存储过程进行转换？这显然会影响查询的速度，因此它可能会解决问题，但是.... :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:35:44.337

Oracle 时间戳不存储为绝对值，因为像 java.sql.Timestamp 这样的 epoc 在内部保存。它是一个大位掩码，包含各种“人类”字段、世纪、月份等的值。

因此，您的每个纳秒自纪元时间戳都会在存储之前被解析为“人类”日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:33:55.643

Number 占用 4 个字节，Timestamp 占用 11 个字节。此外，Timestamp 具有与之关联的元数据。对于每个时间戳，Oracle 似乎都会计算元数据并与字段一起存储。

# codeigniter - How to retrieve $config['myConfig_array'] in Code Igniter

> ID：12590502
> 
> 赞同：0
> 
> 时间：2012-09-25T20:25:06.067
> 
> 标签：codeigniter

I've followed [Codeigniter language](https://stackoverflow.com/questions/2222558/codeigniter-language#comment7969872_2223001) and all seems to be setup as a hook.

```
function pick_language() {

    require_once(APPPATH.'/config/language.php');

    session_start();

    // Lang set in URL via ?lang=something
    if(!empty($_GET['lang']))
    {
        // Turn en-gb into en
        $lang = substr($_GET['lang'], 0, 2);
        $_SESSION['lang_code'] = $lang;
    }

    // Lang has already been set and is stored in a session
    elseif( !empty($_SESSION['lang_code']) )
    {
        $lang = $_SESSION['lang_code'];
    }

    // Lang has is picked by a user.
    // Set it to a session variable so we are only checking one place most of the time
    elseif( !empty($_COOKIE['lang_code']) )
    {
        $lang = $_SESSION['lang_code'] = $_COOKIE['lang_code'];
    }

    // Still no Lang. Lets try some browser detection then
    else if (!empty( $_SERVER['HTTP_ACCEPT_LANGUAGE'] ))
    {
        // explode languages into array
        $accept_langs = explode(',', $_SERVER['HTTP_ACCEPT_LANGUAGE']);

        log_message('debug', 'Checking browser languages: '.implode(', ', $accept_langs));

        // Check them all, until we find a match
        foreach ($accept_langs as $lang)
        {
            // Turn en-gb into en
            $lang = substr($lang, 0, 2);

            // Check its in the array. If so, break the loop, we have one!
            if(in_array($lang, array_keys($config['supported_languages'])))
            {
                break;
            }
        }
    }

    // If no language has been worked out - or it is not supported - use the default
    if(empty($lang) or !in_array($lang, array_keys($config['supported_languages'])))
    {
        $lang = $config['default_language'];
    }

    // Whatever we decided the lang was, save it for next time to avoid working it out again
    $_SESSION['lang_code'] = $lang;

    // Load CI config class
    $CI_config =& load_class('Config');

    // Set the language config. Selects the folder name from its key of 'en'
    $CI_config->set_item('language', $config['supported_languages'][$lang]['folder']);

    // Sets a constant to use throughout ALL of CI.
    define('CURRENT_LANGUAGE', $lang);
} 
```

Now when I try to access $config['supported_languages'] it returns null or errors. Why?

# c# - 在 C# 中使用 FTP 下载多个文件

> ID：12590504
> 
> 赞同：1
> 
> 时间：2012-09-25T20:25:19.817
> 
> 标签：c#, ftp

我需要编写一个程序来完全下载服务器上的给定目录-其中的所有文件和目录。

现在我有一个列出目录内容的例程

```
public List<string> GetListOfFiles(string serverPath)
        {
            List<string> files = new List<string>();
            try
            {

                FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://" + serverPath);               
                request.Credentials = new NetworkCredential(_domain + "\\" + _username, _password);
                request.Method = WebRequestMethods.Ftp.ListDirectory;               

                FtpWebResponse response = (FtpWebResponse)request.GetResponse();
                StreamReader reader = new StreamReader(response.GetResponseStream());

                string line = reader.ReadLine();
                while (line != null)
                {
                    files.Add(line);                    
                    line = reader.ReadLine();
                }
                response.Close();

            }           
            catch (WebException ex)
            {
                FtpWebResponse response = (FtpWebResponse)ex.Response;
                string exMsg = string.Empty;

                switch (response.StatusCode)
                {
                    case FtpStatusCode.NotLoggedIn:
                        exMsg = "wrong username/password";
                        break;   

                    default:
                        exMsg = "The server is inaccessible or taking too long to respond.";
                        break;
                }   

                throw new Exception(exMsg);
            }
            return files;

        } 
```

问题是我得到了文件和目录的列表......所以像

file1.dll
file2.dll
dir1Name

列出文件名和目录名时，有没有办法区分文件名和目录名？像一面旗帜？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:28:44.693

不幸的是，返回的信息实际上是您的 FTP 服务器的功能，而不是框架。

您可以[`ListDirectoryDetails`](http://msdn.microsoft.com/en-us/library/system.net.webrequestmethods.ftp.listdirectorydetails.aspx)代替`ListDirectory`，它应该为您提供更详细的信息（包括每个文件是目录还是文件），但需要特殊解析，因为它的格式也取决于 FTP 服务器。

# python - dealing with arrays: how to avoid a "for" statement

> ID：12590505
> 
> 赞同：6
> 
> 时间：2012-09-25T20:25:36.047
> 
> 标签：python, arrays, for-loop, numpy

I have a 100000000x2 array named "a", with an index in the first column and a related value in the second column. I need to get the median values of the numbers in the second column for each index. This is how I colud do it with a for statement:

```
import numpy as np
b = np.zeros(1000000)
a = np.array([[1, 2],
              [1, 3],
              [2, 3],
              [2, 4],
              [2, 6],
              [1, 4],
              ...
              ...
              [1000000,6]])
for i in xrange(1000000):
    b[i]=np.median(a[np.where(a[:,0]==i),1]) 
```

Obviously it's too slow with the for iteration: any suggestions? Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T21:06:11.697

This is known as a "group by" operation. Pandas ([http://pandas.pydata.org/](http://pandas.pydata.org/)) is a good tool for this:

```
import numpy as np
import pandas as pd

a = np.array([[1.0, 2.0],
              [1.0, 3.0],
              [2.0, 5.0],
              [2.0, 6.0],
              [2.0, 8.0],
              [1.0, 4.0],
              [1.0, 1.0],
              [1.0, 3.5],
              [5.0, 8.0],
              [2.0, 1.0],
              [5.0, 9.0]])

# Create the pandas DataFrame.
df = pd.DataFrame(a, columns=['index', 'value'])

# Form the groups.
grouped = df.groupby('index')

# `result` is the DataFrame containing the aggregated results.
result = grouped.aggregate(np.median)
print result 
```

Output:

```
 value
index       
1        3.0
2        5.5
5        8.5 
```

There are ways to create the DataFrame containing the original data directly, so you don't necessarily have to create the numpy array `a` first.

More information about the groupby operation in Pandas: [http://pandas.pydata.org/pandas-docs/dev/groupby.html](http://pandas.pydata.org/pandas-docs/dev/groupby.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T20:43:41.893

这有点烦人，但至少您可以`==`使用排序轻松消除这种烦人（这可能是您的速度杀手）。尝试更多可能不是很有用，但如果你自己排序等可能是可能的：

```
# First sor the whole thing (probably other ways):
sorter = np.argsort(a[:,0]) # sort by class.
a = a[sorter] # sorted version of a

# Now we need to find where there are changes in the class:
w = np.where(a[:-1,0] != a[1:,0])[0] + 1 # Where the class changes.
# for simplicity, append [0] and [len(a)] to have full slices...
w = np.concatenate([0], w, [len(a)])
result = np.zeros(len(w)-1, dtype=a.dtype)
for i in xrange(0, len(w)-1):
    result[0] = np.median(a[w[i]:w[i+1]])

# If the classes are not exactly 1, 2, ..., N we could add class information:
classes = a[w[:-1],0] 
```

*如果*你所有的类都是相同的大小，那么 1 和 2 的数量就和 2 一样多。不过还有更好的方法。

**编辑：**检查 Bitwises 版本以获取避免最后一个 for 循环的解决方案（他还隐藏了一些`np.unique`您可能更喜欢的代码，因为无论如何速度都无关紧要）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T21:24:51.420

这是我的版本，没有 for 也没有额外的模块。这个想法是对数组进行一次排序，然后您只需计算 a 第一列中的索引即可轻松获得中位数的索引：

```
# sort by first column and then by second
b=a[np.lexsort((a[:,1],a[:,0]))]

# find central value for each index
c=np.unique(b[:,0],return_index=True)[1]
d=np.r_[c,len(a)]
inds=(d[1:]+d[:-1]-1)/2.0
# final result (as suggested by seberg)
medians=np.mean(np.c_[b[np.floor(inds).astype(int),1],
                      b[np.ceil(inds).astype(int),1]],1)

# inds is the index of the median value for each key 
```

如果您愿意，可以缩短代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T21:07:20.907

如果你发现自己非常想做这件事，我建议你看看[pandas](http://pandas.pydata.org/)库，它让这变得像馅饼一样简单：

```
>>> df = pandas.DataFrame([["A", 1], ["B", 2], ["A", 3], ["A", 4], ["B", 5]], columns=["One", "Two"])
>>> print df
  One  Two
0   A    1
1   B    2
2   A    3
3   A    4
4   B    5
>>> df.groupby('One').median()
      Two
One     
A    3.0
B    3.5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T21:10:39.420

一种快速的单线方法：

```
result = [np.median(a[a[:,0]==ii,1]) for ii in np.unique(a[:,0])] 
```

我不相信在不牺牲准确性的情况下，你可以做很多事情来让它更快。但这是另一种尝试，如果您可以跳过排序步骤，可能会更快：

```
num_in_ind = np.bincount(a[:,0])
results = [np.sort(a[a[:,0]==ii,1])[num_in_ind[ii]/2] for ii in np.unique(a[:,0])] 
```

对于小型阵列，后者稍微快一点。不确定它是否足够快。

# php - undefined method despite method being defined

> ID：12590506
> 
> 赞同：0
> 
> 时间：2012-09-25T20:25:37.820
> 
> 标签：php, class, codeigniter, fatal-error

Having a very strange issue with an error on a codeigniter site.

```
Fatal error: Call to undefined method Document::get_by_module() 
```

The line of code causing this (in a controller) is:

```
$this->document_type->get_by_module('module1'); 
```

The constructor of the controller:

```
function __construct(){
    parent::__construct();
    $this->load->model('document','document_type');
} 
```

The document_type class looks like this

```
class Document_type extends CI_Model {
    function Document_type () {
        parent::__construct();

    }       
    function get_by_module($prefix) {
        // code 
    }
} 
```

The main issue I'm seeing is that it's saying `Document::` is the class, but it should be `Document_type`. I see no reason that it should be looking in the document class for that function.

If I remove loading of the 'document' class from the controller constructor, the error goes away (but other things break).

Not sure how something like that could be happening.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:39:29.680

看起来您正在加载错误的模型文件。线

```
$this->load->model('document','document_type'); 
```

意思是这样的：给我找一个名为“文档”的模型，创建一个实例并放在`$this->document_type`. （[见第四个例子](http://ellislab.com/codeigniter/user-guide/general/models.html#loading)）

看起来您有一个`Document`模型，因此加载成功，但是如果您不想重命名放在`$this`（控制器实例）下的实例，则不应使用该`$this->load->model()`行中的第二个参数。

简单地写`$this->load->model('document_type');`

# php - how to pass a list of values to a method, Codeigniter style

> ID：12590508
> 
> 赞同：1
> 
> 时间：2012-09-25T20:25:49.300
> 
> 标签：php, codeigniter

What's a good way to pass a list of items 2-3 items to a method in my controller? I was thinking of just using the URL.... like so:

```
 http://myserver/myapp/mycontroller/mymethod/parm1/parm2/listitem1/listitem2/listitem3 
```

Is there a better way to do this? This data is not coming from a form, but rather from a database query and I'm building a hyperlink with it.

I guess the only part that bothers me is that I won't know in advance how many items I have when i'm parsing this url.

Its possible that I'll get none, or all 3 or some value in between. So the method that then has to parse this url will just keep looping until uri->segment() returns false, indicating that it's hit the first empty uri segment. Any suggestions would be appreciated.

Thanks

**EDIT 1:**

Just in case it wasn't clear, my model is getting the data from the database and will also build the list. The question is really about parsing an undetermined number of uri segments. Just wondering if there's a better way to do this. Thanks!

**EDIT 2**

Here's some more information to help you understand my MVC app. I don't think my issue is the way I've organized my code as far as who is doing what.. But just in case it helps...

I have methodA in my model that queries database and passes back to my controller listitem1, listitem2 and listitem2. The controller then builds a string that represents a URL like:

```
 http://myserver/myapp/mycontroller/methodB/parm1/parm2/listitem1/listitem2/listitem3 
```

Then the view display a hyperlink using the url above. When the user clicks on this hyperlink, it calls methodB. In methodB, I since I don't know the number of items, I will just loop through all segments until I hit my first false.

As far as why I need to do this / what I'm doing... here's some background info: I'm query a database for a list of ports on a switch that are considered trunks - ones that should not be modified. this is what method A does.

methodB run a command against a switch and it returns a bunch of data back. the view that displays the data from methodB will allow the end user to make further changes to the switch. before I display the data from methodB, i want to filter out the list of ports I got from methodA so they cannot be tampered with.

Hope this helps.

**Edit 3**

I need both methodA and methodB because they serve two different purposes. methodA displays summary data about ports from my database. Think of methodA as a function that shows **documentation** about the switch. The view for methodA in turn, provides "live" links to communicate with the actual switch - this is where methodB comes in. methodB is triggered by one of those live links and it goes and gets a list of ports - similar to methodA - except that it represents what actual, and it doesn't include user defined information about the port. I guess I can have methodB communicate with my database and filter its data before it displays, but if i want to treat these two functions as separate APIs... aka - one set of functions get data out of the database, the other set is a tool to communicate with switches... - then i don't think i want one talking directly to the other. I would like the GUI to tie them together. In fact, i have created two separate models and controllers for what I'll call the database interface, and then the switch interface. So far, i think the forms idea is the most elegant solution. Thanks everyone, for reading.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:34:16.273

将列表项的数量作为参数 3

```
../mymethod/parm1/parm2/numberofitems/listitem1/listitem2/listitem3 
```

并根据需要放置 1、2 或 3。如果 0 什么都不放 - null，但是请确保控制器知道如果 null 发生了该怎么办 - 不要期望项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:34:54.413

如果数据来自查询，如果您希望您的应用程序真正兼容 MVC，那么它应该位于 CodeIgniter 中的模型中。这可能意味着对您的应用程序进行重组，这可能很困难，但将来为您的所有数据库查询创建模型会真正使您受益。

您可以在此处阅读 codeigniter 模型：http: [//codeigniter.com/user_guide/general/models.html](http://codeigniter.com/user_guide/general/models.html)

您可以在此处阅读数据库类：http: [//codeigniter.com/user_guide/database/index.html](http://codeigniter.com/user_guide/database/index.html)

我真的建议你这样做。

如果您的数据已经来自模型，您可以通过包含模型来调用它：

```
$this->load->model('model_name');
$response = $this->model_name->model_function(parameters); 
```

编辑：这也将解决列表项数量未知的问题，因为您可以简单地解析从模型函数返回的响应，而不是试图找出 uri hack。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T21:05:30.183

在阅读完所有其他答案+编辑之后，这绝对*不是*您想要的方式。

除非我误解了您的评论，否则问题出在：端口列表是存储在您服务器上的域数据。那么，为什么要提取数据，将其发送到表示层，然后将其显示给将其*直接发送回应用程序*的用户？跳过中间人并让“MethodB”获取该数据。

您的“MethodB”应该在处理它需要做的事情之前自己获取这些信息 - 域数据保留在域层中，并且视图永远不会直接看到任何这些信息（用户会看到直接到“MethodB”的链接）

或者，如果您的数据库模式有利于这种连接，您可以在一个查询中完成所有操作。

# json - 如何为 JBoss 配置 Gzip？

> ID：12590521
> 
> 赞同：1
> 
> 时间：2012-09-25T20:26:48.050
> 
> 标签：json, http, jboss, gzip, jboss-portal

我想尝试通过减少传输数据的大小来加速我的 Web 应用程序。例如，在 Nginx 中有一个特殊的模块。如何为 JBoss 服务器启用压缩？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T20:36:24.767

## JBoss AS 版本 6 或更低版本

要启用 gzip 压缩，需要将设置添加到现有的 HTTP 连接器。
位于`/server/default/deploy/jbossweb.sar/server.xml`：

```
<!-- A HTTP/1.1 Connector on port 8080 -->
<Connector protocol="HTTP/1.1" port="${jboss.web.http.port}"
        address="${jboss.bind.address}" redirectPort="${jboss.web.https.port}"

compression="force"
compressionMinSize="512"
noCompressionUserAgents=""
compressableMimeType="text/html,text/xml,text/css,text/javascript"
/> 
```

## JBoss AS 7.0.x

**JBoss 7.0.x - 7.1.0 不支持内置的 gzip 压缩**。
另见问题报告：[https ://issues.jboss.org/browse/AS7-2991](https://issues.jboss.org/browse/AS7-2991)

在 JBoss 7.0 中添加 gzip 压缩的一种方法是添加为过滤器。
详情：[https ://code.google.com/p/webutilities/wiki/CompressionFilter](https://code.google.com/p/webutilities/wiki/CompressionFilter)

## JBoss AS 7.1.1

就在最近，JBoss 完成了向 JBoss 添加 gzip 压缩。从 7.1.1Final 版本开始，gzip 压缩再次支持开箱即用。要启用，请添加到服务器启动参数：

```
-Dorg.apache.coyote.http11.Http11Protocol.COMPRESSION=on 
```

# python - 返回分配为列表的类型字典

> ID：12590522
> 
> 赞同：0
> 
> 时间：2012-09-25T20:26:50.990
> 
> 标签：python

我正在使用 Labjack 进行一些带有 python 2.7.3 32bit 的数字 I/O 并遇到以下情况：

这是我正在调用的 labjack u6 函数：

```
 class PortStateRead(FeedbackCommand):
    """
    PortStateRead Feedback command

    Reads the state of all digital I/O.

    >>> d.getFeedback( u6.PortStateRead() )
    [ { 'FIO' : 10, 'EIO' : 0, 'CIO' : 0 } ]
    """
    def __init__(self):
        self.cmdBytes = [ 26 ]

    def __repr__(self):
        return "<u6.PortStateRead()>"

    readLen = 3

    def handle(self, input):
        return {'FIO' : input[0], 'EIO' : input[1], 'CIO' : input[2] } 
```

该函数正在返回（看起来是）一个字典，但是当我将返回分配给一个变量时，它被分配为一个列表。

```
 >>> import u6
    >>> handle = u6.U6()
    >>> x = handle.getFeedback(u6.PortStateRead())
    >>> x
    [{'CIO': 15, 'FIO': 255, 'EIO': 255}]
    >>> x['FIO']
    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
      TypeError: list indices must be integers, not str 
```

将 x[0] 分配给新变量分配为字典

```
 >>> y = x[0]
    >>> y['FIO']
    255 
```

有人可以向我解释这种行为吗？

在文档字符串中的示例调用中，函数返回一个列表，所以我可以假设这种行为是正常的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:28:12.527

> 该函数正在返回（似乎是）字典......

不，它是列表中的字典。方括号是值的一部分。

```
>>> [{'foo':'bar'}][0]
{'foo': 'bar'} 
```

# jquery - 单击弹出框会滚动回页面顶部 [Bootstrap 和 Django]

> ID：12590523
> 
> 赞同：37
> 
> 时间：2012-09-25T20:26:51.887
> 
> 标签：jquery, django, twitter-bootstrap

我正在使用带有 Django 的引导程序，到目前为止一切正常。但是，我正在尝试使用弹出框功能，并且一直遇到问题。每当单击我的弹出框时，页面都会滚动回顶部......但弹出框确实出现了。这是我的代码：

```
//////////<..... a lot more HTML ....>//////////
<div class="bs-docs-example">
<a href="#" class="btn btn-large btn-danger" rel="popover" title="A Title" id="testpop" data-content="And here's some amazing content. It's very engaging. right?">Click to toggle popover</a>
</div>
{% endblock %}

{% block js %}
{{ block.super }}

{% bootstrap_javascript_tag "modal" %}
{% bootstrap_javascript_tag "alert" %}
{% bootstrap_javascript_tag "tooltip" %}
{% bootstrap_javascript_tag "popover" %}

<script type="text/javascript">
$("#testpop").popover();
</script> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-25T20:29:08.877

您可以通过阻止锚元素的默认操作来解决这个问题：

```
$('a#testpop').on('click', function(e) {e.preventDefault(); return true;}); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-08-23T09:37:46.367

您可以将 href="javascript://" 添加到锚标记。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-09-22T00:16:10.590

删除**href="#"**标签，它应该可以工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T17:25:24.970

这也可能是由于`autofocus=on`在弹出框内有一个元素（在 chrome 中测试）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-23T23:25:34.700

您可以替换`href="#..."`为`data-target="#..."`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-23T22:30:00.553

我在 Bootstrap v3.3.2 中遇到了同样的问题，并通过使用按钮而不是锚标签来解决它。

然后我回到[Bootstrap 文档](http://getbootstrap.com/javascript/#popovers) ，发现除了其中一个弹出框示例之外，所有示例都使用按钮 - 令人惊讶的是 - 确实使用锚点的示例忽略了 href 属性！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-26T18:24:58.763

我正在使用 Bootstrap 2.3.2

重点不在于点击。即使我以编程方式调用 show popover ，它也会将我滚动到顶部。

重点在于引导工具提示显示功能。那里有一行：

`$tip.detach().css({ top: 0, left: 0, display: 'block' })`

它在分离提示时应用显示块只是为了获得它的高度和宽度。这是一个形而上学的问题！隐形元素没有高度！！为了解决这个问题，我评论了该行并添加了：

```
$tip.show(); 
```

就在它获得位置的行之后：

```
pos = this.getPosition() 
```

它对我有用。

# macos - Apache 将索引视为 index.php

> ID：12590526
> 
> 赞同：0
> 
> 时间：2012-09-25T20:27:23.883
> 
> 标签：macos, apache, mod-rewrite

我有一个小问题：我的 Mac OS X 10.8.1 上的 Apche 看到`/index`和`/index.php`作为同一个文件。那是指它像一些`/index`负载一样。默认。`index.php``RewriteRule``DirectoryIndex index.html`

附言

也是其他[主题](https://stackoverflow.com/questions/11216563/apache-2-treating-index-and-index-php-as-the-same-file)，但对我来说没有可行的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:32:22.933

这是 的函数[`MultiViews`](http://httpd.apache.org/docs/current/mod/mod_negotiation.html#multiviews)。您可以`.htaccess`像这样禁用它：

```
Options -MultiViews 
```

# java - 将指针映射到 JNA 中的结构数组

> ID：12590527
> 
> 赞同：4
> 
> 时间：2012-09-25T20:27:24.633
> 
> 标签：java, c, jna

我想从这样的指针中获取一个数组：

```
PointerByReference buf=new PointerByReference();
IntByReference len=new IntByReference(); 

myLib.getPoints(buf,len);

Pointer p=buf.getValue();
JNAPoint jnaPoint=new JNAPoint(p);
JNAPoint[] points=(JNAPoint[])jnaPoint.toArray(len.getValue()); 
```

函数原型为：void __declspec (dllexport) getPoints(point** tab,int* len);

结构是： typedef struct _point { double x; 双 y; } 观点;

但是，当我想读取数组“点”时，值是错误的。

有错误吗？

谢谢

# ruby-on-rails - 使用选择的表单编辑页面

> ID：12590528
> 
> 赞同：0
> 
> 时间：2012-09-25T20:27:31.003
> 
> 标签：ruby-on-rails

我有一个类似设置的博客，其中有一些称为事件（本质上是帖子）的东西，但它们有不同的类型（“种类”），这将帮助我对将它们放在我的布局中的位置进行分类。无论如何，当我转到事件/编辑页面时，我收到此错误：

Mysql2::Error：'where 子句'中的未知列'event_kinds.event_id'：SELECT `event_kinds`.* FROM `event_kinds` WHERE `event_kinds`。`event_id`= 1 限制 1

我认为这可能是一个关联问题，所以这是对的吗？

```
EventKind has_many :events
Event has_one :event_kind 
```

?

编辑：我已将 event_kinds 重命名为 kind。现在我没有一个名为 event_kinds 的表将事件和种类模型链接在一起，因为每个事件只能是一种我只是将种类 ID 放在事件表中。有没有办法让我跳过 events_kind ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:39:07.833

您需要将 event_id 列添加到 event_kinds 表。

只需创建迁移

rails g 迁移 add_event_id_to_envent_kind

编辑他的文件并添加以下内容。

```
def change
  add_column :envent_kinds, :event_id, :integer
end 
```

运行迁移

```
rake db:migrate 
```

这应该可以解决错误。

# javascript - 在 ExtJS4 中创建属性的最佳方式？

> ID：12590529
> 
> 赞同：0
> 
> 时间：2012-09-25T20:27:39.583
> 
> 标签：javascript, extjs4, extjs

我想知道如何将更传统的属性类合并到 ExtJS 4 的动态加载中？在 Ext3 中，我将创建一组属性，如下所示：

```
org.config.appName = "appname";
org.config.browser = {};
org.config.browser.Browsers = [
    {
        name: 'Chrome',
        ....
    }
]; 
```

还想象一下，我会在 org 下创建一组扩展对象：

```
org.foo = Ext.extend('Ext.Panel', {
    ...
}); 
```

在 Ext4 中，当我加载属性时，尚未创建 org，因此会引发错误。我相信，这给我留下了两种解决问题的方法：

1.  定义组织： `if(typeof org === 'undefined') { org = {}; }`
2.  将属性作为单例动态加载：

    ```
    Ext.define('org.config',{
        singleton: true,
        appName: "appname",
        browser: {
            Browsers: [
                {
                    name: 'Chrome',
                    ...
                },
                ...
            ]
        }
    }); 
    ```

选项 1 如何影响动态加载的对象？选项 2 是创建一组属性的最佳方式吗？我错过了第三个更好的选择吗？感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:36:59.193

选项 2 应该适合您。

无论 Ext 版本如何，JavaScript 都不会让您在没有首先创建根对象的情况下创建“命名空间”对象等等。Ext 具有命名空间功能，用于为您的整个应用程序创建一个。从 4.0 开始，使用 Ext.application 设置命名空间，使用 Ext.define 创建命名空间类。

我不太清楚动态加载的对象是什么意思...

# ios - 将精灵移动限制为垂直和水平

> ID：12590531
> 
> 赞同：1
> 
> 时间：2012-09-25T20:27:58.877
> 
> 标签：ios, vector, cocos2d-iphone, game-physics

我已经为此奋斗了一段时间，我的菜鸟大脑无法完全解决它。我有一个标准的瓷砖地图，目前使用以下代码在地图上移动我的敌人精灵

```
-(void) movePlayer:(ccTime)deltaTime {

    if (CGPointEqualToPoint(self.position, requestedPosition))
        return;

    float step = kPlayerSpeed * deltaTime;
    float dist = ccpDistance(self.position, requestedPosition);
    CGPoint vectorBetweenAB = ccpSub(self.position, requestedPosition);

    if (dist <= step) {
        self.position = requestedPosition;
        [self popPosition];
    } else {
        CGPoint normVectorBetweenAB = ccpNormalize(vectorBetweenAB);
        CGPoint movementVectorForThisFrame = ccpMult(normVectorBetweenAB, step);

        if (abs(vectorBetweenAB.x) > abs(vectorBetweenAB.y)) {
            if (vectorBetweenAB.x > 0) {
                [self runAnimation:walkLeft];
            } else {
                [self runAnimation:walkRight];
            }
        } else {
            if (vectorBetweenAB.y > 0) {
                [self runAnimation:walkDown];
            } else {
                [self runAnimation:walkUp];
            }
        }

        if (self.position.x > movementVectorForThisFrame.x) {
            movementVectorForThisFrame.x = -movementVectorForThisFrame.x;
        }
        if (self.position.y > movementVectorForThisFrame.y) {
            movementVectorForThisFrame.y = -movementVectorForThisFrame.y;
        }
        self.position = ccpAdd(self.position, movementVectorForThisFrame);
    }

} 
```

movePlayer: 由类 updateWithDeltaTime: 方法调用。ivar requestedPosition 也在 updateWithDeltaTime 方法中设置，它基本上从队列中获取下一个要移动到的点。这些点可以在地图上的任何位置，因此如果它们与敌人成对角线方向，则敌人精灵将直接移动到该点。但是我如何更改上面的代码以将运动限制为仅垂直和水平运动，以便敌人的运动沿着对角线路径“楼梯”，走曼哈顿距离（我认为它被称为）。如下图所示... S 是起点 F 是终点，数字是沿其路径的每个中间点，以创建楼梯式对角线运动。最后，我打算能够打开和关闭此行为，

```
 | | | | | | | | | |
 | | | | | | | | | |
 | |F| | | | | | | |
 | |5|4| | | | | | |
 | | |3|2| | | | | |
 | | | |1|S| | | | |
 | | | | | | | | | |
 | | | | | | | | | |
 | | | | | | | | | |
 | | | | | | | | | | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:54:40.187

所以，我不确定是否有任何非常简单的方法可以做到这一点。我建议您计算距离终点有多远。然后得到y差和x差。然后，如果 y 差异大于 x，则将精灵向上移动设定的量。如果 x 差异更大，则将精灵向左移动设定的量。这样，精灵将继续向上和向左移动，因为它会慢慢减小与终点的差异。这就是我推荐的逻辑。本质上：

```
CGPoint difference = ccpSub(finishPoint, startPoint);
//Be aware that this if statement will not work for negative distances. Only for the example you gave!
if(difference.y>difference.x) {
     sprite.position = ccp(sprite.position.x, sprite.position.y+tileSize);
} else {
     sprite.position = ccp(sprite.position.x+tileSize, sprite.position.y);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:35:00.267

所以我找到的当前解决方案如下......

```
-(void)pathfind {
    //Get a reference to the tile map
    CCTMXTiledMap *tileMap = (CCTMXTiledMap *)[[[[CCDirector sharedDirector] runningScene] getChildByTag:kStartLayer] getChildByTag:kMapNode];
    NSAssert(tileMap != nil, @"No Tile map");

    //Convert self.position to tile coordinates and set to both vars. stepTileCoord so that we can add a tile in direction of travel.
    CGPoint selfTileCoord = [tileMap tileCoordFromLocation:self.position];
    CGPoint stepTileCoord = [tileMap tileCoordFromLocation:self.position];

    //Init this var to keep track of the last tile worked out so the next one can be worked out from it. We start at self.position.
    CGPoint lastTileCoord = selfTileCoord;

    //For loop, iterates over each orginal position in the requestedPositionQueue.
    for (int i=0; i < [requestedPositionQueue count]; i++) {

        //Get the current original path tile coordinate.
        CGPoint requestedTileCoord = [[requestedPositionQueue objectAtIndex:i] CGPointValue];
        NSMutableArray *tempPoints = [NSMutableArray array];

        //While loop interates until it has worked out every intermediate step to the original path tile.
        while (!CGPointEqualToPoint(requestedTileCoord, stepTileCoord)) {

            //FIXME: what happens if path takes us back over the orignal start point?
            if (CGPointEqualToPoint(selfTileCoord, requestedTileCoord)) {
                //Not sure if this will cause an issue.
                break;
            }

            CGPoint vectorToDest = ccpSub(lastTileCoord, requestedTileCoord);

            if (abs(vectorToDest.x) > abs(vectorToDest.y)) {
                if (vectorToDest.x > 0) {
                    stepTileCoord.x -= 1;
                } else {
                    stepTileCoord.x += 1;
                }
            } else {
                if (vectorToDest.y > 0) {
                    stepTileCoord.y -= 1;
                } else {
                    stepTileCoord.y += 1;

                }
            }

            //If the tile worked out is the requestedTileCoord then break, no need to add it to tempPoints as it will already be in the requestedPosition Queue.
            if (CGPointEqualToPoint(requestedTileCoord, stepTileCoord)) {
                break;
//                CCLOG(@"%@", [requestedPositionQueue description]);
            } else {
                //Save this tile to tempPoints arrway. And save it to lastTileCoord.
                [tempPoints addObject:[NSValue valueWithCGPoint:stepTileCoord]];
                lastTileCoord = stepTileCoord;
//                CCLOG(@"\n{%f, %f}", lastTileCoord.x, lastTileCoord.y);
            }
        }
        //As we have now got an array, tempPoints, with all the intermediate step points to current point out of requestedPositionQueue we shall add all objects in tempPoints to requestedPositionQueue. NSIndexSet will ensure its added at the correct location in array.
        NSIndexSet *indexes = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(i, [tempPoints count])];
        [requestedPositionQueue insertObjects:tempPoints atIndexes:indexes];
//        CCLOG(@"%@", [requestedPositionQueue description]);
        //i is updated so the next point pulled out of the array isn't one of the worked out intermediate steps.
        i += [tempPoints count];
    }
} 
```

因此，首先，我将字符的平铺坐标路径保存在 ivar 数组中，例如...

```
requestedPositionQueue = [NSMutableArray arrayWithObjects:
                                      [NSValue valueWithCGPoint:CGPointMake(7, 18)],
                                      [NSValue valueWithCGPoint:CGPointMake(11, 18)],
                                      [NSValue valueWithCGPoint:CGPointMake(7, 22)],
                                      [NSValue valueWithCGPoint:CGPointMake(7, 18)],
                                      [NSValue valueWithCGPoint:CGPointMake(11, 22)],
                                      nil]; 
```

所以你可以看到这有一些点需要这种形式的对角线运动。然后我调用 pathfind 方法，它遍历 requestedPositionQueue 并添加所有中间图块坐标，确保它始终垂直或水平选择一个图块，但在完成整个路径之前从不与当前图块对角地相邻。

然后在 update: 方法中，我遍历 requestedPositionArray，从中获取下一个图块坐标，将其转换为像素位置，然后将其分配给我的 requestedPosition ivar，然后运行 ​​movePlayer: 方法（原始帖子中的代码）。

为了我自己的利益，我在寻路方法中添加了评论，因此可能不是那么全面，但它们可能有助于您理解我的想法。

最后，这是我想出的最好的方法，它允许我确保我可以将我的角色移动到一个像素位置而不受限制，或者如果我想将它们移动到那里但将它们限制为只能通过平铺中心垂直或水平移动。因此，如果您能找到改进和优化此代码的方法，请这样做，否则任何建设性的批评都会受到赞赏。

编辑：FIXME：在那里突出显示了一个我还没有时间查看的潜在错误。如果需要，我会在调查并修复后重新发布。

# jquery - jquery更改表单目标值

> ID：12590536
> 
> 赞同：2
> 
> 时间：2012-09-25T20:28:17.480
> 
> 标签：jquery, forms, attributes, target

我需要使按钮的目标与主要提交值不同。我正在使用带有以下代码的jquery：

HTML：

```
<form action="somepage" id="cartform" target="_parent" method="post"> 
```

（所以默认动作是父）

查询：

```
$("#refresh").click(function(){
    $("#cartform").attr('target', '_self');
}); 
```

（“刷新”是表单的额外按钮，用于将表单保持在弹出框中）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T20:47:41.930

尝试在提交时添加侦听器而不是单击：

```
$('cartform').on('submit',function(){
   $(this).attr('target', '_self');
}); 
```

Obv 仅当您始终希望在提交表单时更改目标时才会出现这种情况。否则，请尝试使用您的代码和`preventDefault`.

```
$("#refresh").click(function(ev){
    ev.preventDefault();
    $("#cartform").attr('target', '_self').submit();
}); 
```

`target`我认为表格是在更改应用之前提交的。

* * *

# 编辑

实际上，OP 正在尝试在 iframe 中提交表单。这应该有效：

```
$("#refresh").click(function(ev){
    ev.preventDefault();
    $("#cartform").attr('target', 'name_of_the_iframe').submit();
}); 
```

将提交给：

```
<iframe name="name_of_the_iframe" ... 
```

# java - 在 JSP 中打印 javabean 的数组/集合

> ID：12590537
> 
> 赞同：0
> 
> 时间：2012-09-25T20:28:21.250
> 
> 标签：java, jsp

是否有在 JSP 中打印 javabeans 的数组/集合元素的标准方法？我所知道的是`<jsp:getProperty>`不能做到这一点的标签。我知道它可以使用自定义标签来完成，但是 JSP 应该提供这样一个基本要求。

另外，我读过使用`setAttribute()`方法`PageContext`等`ServletContext`我们可以在 Servlet 中获取 bean 并对其进行处理，但它给了我`null`价值。

```
pageContext.getAttribute("beanPropertyVariable")  //set in page scope
application.getAttribute("beanPropertyVariable")  //set in application scope 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T20:35:25.727

标准方式是使用[JSTL](https://stackoverflow.com/tags/jstl/info) `<c:forEach>`。

假设它`${beans}`代表 javabean 的集合，这里有一个例子：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
...
<c:forEach items="${beans}" var="bean">
    ${bean.property1}<br/>
    ${bean.property2}<br/>
    ${bean.property3}<br/>
</c:forEach> 
```

这也是你能得到的最简单的方法。

### 也可以看看：

*   [我们的 JSTL 维基页面](https://stackoverflow.com/tags/jstl/info)
*   [我们的 Javabeans wiki 页面](https://stackoverflow.com/tags/javabeans/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:38:26.687

您可以使用 JSTL **c:foreach**标签，如下所示

```
 <c:forEach items="${list}" var="var">
     ${var}<br/>
 </c:forEach> 
```

# android - getChildView（用于 BaseExpandableListAdapter）无法正常工作

> ID：12590543
> 
> 赞同：1
> 
> 时间：2012-09-25T20:28:44.873
> 
> 标签：android, spinner, expandablelistview

我有一个`ExpandableListView`. 子行的 xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_item_child"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/number_input_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:gravity="right"
            android:inputType="numberDecimal" >

            <requestFocus />
        </EditText>

        <Spinner
            android:id="@+id/spinner_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </LinearLayout>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="@string/temp_txt" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/number_input_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:gravity="right"
            android:inputType="numberDecimal" />

        <Spinner
            android:id="@+id/spinner_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </LinearLayout>
</LinearLayout> 
```

基本上，我的`getChildView`样子是这样的：

```
public View getChildView(int i, int i1, boolean b, View view, ViewGroup viewGroup) {

    if (view == null) {
        view = inflater.inflate(R.layout.list_item_child, viewGroup, false);
    }      
    Spinner spinner = (Spinner) view.findViewById(R.id.spinner_1);
    spinner.setAdapter(mUnitsCA);
    spinner.setSelection(14);  // 14 is a test
    spinner.setOnItemSelectedListener(mSpinnerListener);

    return view;
} 
```

这应该确保每次都选择 spinner_1 中的项目编号 14。有时这可行，但通常它会选择微调器中的第一项。我无法弄清楚这是在哪里发生的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:47:01.960

我发现的一项建议是更改`setSelection()`为以下内容：

```
spinner.setSelection(14, true); 
```

* * *

**编辑：（** *基于我对未来求职者的回答）*

[文档](http://developer.android.com/reference/android/widget/AbsSpinner.html#setSelection%28int,%20boolean%29)似乎对此非常模糊，仅说明以下内容：

```
setSelection(int position, boolean animate);
//Jump directly to a specific item in the adapter data. 
```

在我的研究中，似乎很多人都遇到了同样的问题，据我所知`boolean`，无论是真还是假，声明动画似乎是必要的，而不是不必要的。也许只有自定义动画或声明的动画需要一个`boolean`值`true`才能制作动画，但没有动画将接受`true`或`false`...

# git - Git子树导出和重新导入问题

> ID：12590546
> 
> 赞同：4
> 
> 时间：2012-09-25T20:29:10.737
> 
> 标签：git, git-subtree

我有一个更大的 git 存储库 (A)，它与我的另一个项目 (B) 共享一定数量的代码。为了使维护更容易，我决定使用公共代码 (C) 创建第三个存储库，然后通过`git subtree`.

我准备好 A 中的所有内容（将公共代码放在文件夹“sub”中）并使用[Detach (move) subdirectory 中描述的过程到单独的 Git 存储库](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository)中创建 C

现在我只有几个提交的 C，我想把它放回 A，文件夹 sub。我使用了[http://www.kernel.org/pub/software/scm/git/docs/howto/using-merge-subtree.html](http://www.kernel.org/pub/software/scm/git/docs/howto/using-merge-subtree.html)中描述的方法，因为子文件夹的所有提交现在都被复制了。我不太介意这一点，但是现在我不知道如何继续使用这个子目录。

我在要推送到 C 的 A/sub 中进行了其他更改。如[git subtree push changes back to subtree project](https://stackoverflow.com/questions/10081681/git-subtree-push-changes-back-to-subtree-project)中所述，我使用了

```
git subtree split --prefix sub -b split-branch 
```

只用子树创建一个分支。这需要一些时间，但成功完成。正在做

```
git checkout split-branch
git push remote-c master 
```

给我

```
failed to push some refs to "remote-c"
hint: Updates were rejected because a pushed branch tip is behind its remote
hint: counterpart. Check out this branch and merge the remote changes
hint: (e.g. 'git pull') before pushing again. 
```

但是 a`git pull remote-c master`说我已经是最新的了。

我该如何解决这种情况？

*EDIT1*：我试图用一个小测试脚本重现这个问题。执行此脚本：

```
( cd testC; git init --bare )
( cd testA; git init )

cd testA
git remote add C ../testC

mkdir sub
echo subFile1 > sub/subFile1
echo subFile2 > sub/subFile2
git add sub
git commit -m "adding files"

echo FileA > fileA
echo FileB > fileB
git add fileA fileB
git commit -m "add root level files"

# extract subtree and push to C
git subtree split -P sub -b split-branch
git push C split-branch:master

# try to make an update in C
git checkout -b cmaster C/master
echo subFile2new > subFile2
git commit subFile2 -m "updated #2 in C"
git push 
```

这导致

```
To ../testC
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to '../testC'
hint: Updates were rejected because a pushed branch tip is behind its remote
hint: counterpart. If you did not intend to push that branch, you may want to
hint: specify branches to push or set the 'push.default' configuration
hint: variable to 'current' or 'upstream' to push only the current branch. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:34:33.553

我尝试了一个`git push -f`似乎有效的方法。仍然想知道到底发生了什么以及为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:17:57.297

如果您在本地和远程具有相同名称的分支，则默认行为`git push`是尝试将所有分支推送到当前分支远程。从`git push`手册：

> 特殊的 refspec : （或 +: 允许非快进更新）指示 git 推送“匹配”分支：对于本地端存在的每个分支，如果同名分支已经存在，则更新远程端在远端。如果没有找到明确的 refspec（既不在命令行上，也不在相应远程文件的任何 Push 行中——见下文）并且没有设置 push.default 配置变量，这是默认操作模式。

在这种情况下，由于您当前的遥控器是`C`并且您同时拥有本地`master`和远程`C/master`它将被推送，并且由于树根本不匹配，因此推送将失败并显示`master -> master (non-fast-forward)`消息。

当你`git pull`到你的分支时，它说`up-to-date`因为你正在拉你当前的分支，这是最新的。

要修改此行为，`git push`您需要`push.default`在 git 配置中设置该值。[在http://www.kernel.org/pub/software/scm/git/docs/git-config.html](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)中查找“push.default”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:58:11.313

我的解决方案：升级 git。:-)

`testA`假设和`testC`目录已经存在，您的测试脚本对我来说是成功的。我正在使用最新版本的 git (v1.8.2.1)，所以也许他们在你发布后修复了一些问题。

```
$ mkdir testA testC
$ ./test.sh 
Initialized empty Git repository in /tmp/git/testC/
Initialized empty Git repository in /tmp/git/testA/.git/
[master (root-commit) 3d5644d] adding files
 2 files changed, 2 insertions(+)
 create mode 100644 sub/subFile1
 create mode 100644 sub/subFile2
[master 398c203] add root level files
 2 files changed, 2 insertions(+)
 create mode 100644 fileA
 create mode 100644 fileB
Created branch 'split-branch'
57fe3e8fc226d854b623f11444d82dc77fd45682
Counting objects: 4, done.
Delta compression using up to 16 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (4/4), 269 bytes, done.
Total 4 (delta 0), reused 0 (delta 0)
To ../testC
 * [new branch]      split-branch -> master
Branch cmaster set up to track remote branch master from C.
Switched to a new branch 'cmaster'
[cmaster 07c7c89] updated #2 in C
 1 file changed, 1 insertion(+), 1 deletion(-)
Counting objects: 5, done.
Delta compression using up to 16 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 285 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
To ../testC
   57fe3e8..07c7c89  cmaster -> master 
```

# javascript - 在没有 ajax 的情况下将一个表单提交到两个不同的 URL

> ID：12590549
> 
> 赞同：1
> 
> 时间：2012-09-25T20:29:30.987
> 
> 标签：javascript, jquery, html, forms, cross-domain

我如何在没有 ajax 的情况下将一个表单提交到两个不同的位置（跨域问题）

我在想像下面这样的事情。只有我将如何传递 params ？

```
 < form action="urlOne.com/something" method="post" onsubmit="postToUrl("urlTwo.com/something");">
        <input type="text" value="hello" name="hi"/>
        <input type="submit" value="submit">
    </form> 
```

从这里获取的函数 >> [JavaScript 发布请求，如表单提交](https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit)

```
function postToUrl(url, params)

        {
            var form = $('<form>');
            form.attr('action', url);
            form.attr('method', 'POST');

            var addParam = function(paramName, paramValue){
                var input = $('<input type="hidden">');
                input.attr({ 'id':     paramName,
                             'name':   paramName,
                             'value':  paramValue });
                form.append(input);
            };

            // Params is an Array.
            if(params instanceof Array){
                for(var i=0; i<params.length; i++){
                    addParam(i, params[i]);
                }
            }

            // Params is an Associative array or Object.
            if(params instanceof Object){
                for(var key in params){
                    addParam(key, params[key]);
                }
            }

            // Submit the form, then remove it from the page
            form.appendTo(document.body);
            form.submit();
            form.remove();
        } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:38:28.080

您一次只能在一个窗口中发布一个表格。如果您尝试发布两个表格，一个帖子将阻止另一个。

解决方案是将这两个表单发布到不同的窗口。您可以将第一个表单的目标设置为发布到页面中的 iframe 或新窗口：

```
form.attr('target', '_blank'); 
```

这样，这两个帖子将在单独的窗口中加载，并且不会互相阻止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:17:09.740

如果您只想在另一个 URL 上发布“不可见”的帖子……在这种情况下，URL 是锻炼.php

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(function() {
  $('form').submit(function(data) {
    $.post('workout.php', $(this).serialize());
  });
});
</script>

<form action="urlOne.com/something" method="post">
        <input type="text" value="hello" name="hi"/>
        <input type="submit" value="submit">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:38:32.957

如果您使用代理服务器端，则可以将跨域 ajax 与 jQuery 一起使用。

或者：

> 使用 apache 的 mod_rewrite 或 mod_proxy 将请求从您的服务器传递到其他服务器。在您的客户端代码中，您只需像实际在您的服务器上一样发出请求 - 没有浏览器问题。然后 Apache 会发挥它的魔力，并为您向另一台服务器发出请求。

这是在 php 中实现此目的的链接：http: [//developer.yahoo.com/javascript/howto-proxy.html#phpproxy](http://developer.yahoo.com/javascript/howto-proxy.html#phpproxy)

# android - 如何使用 adb shell 手动设置文件或目录时间戳？adb shell 中是否存在类似 unix 的触摸功能？

> ID：12590555
> 
> 赞同：1
> 
> 时间：2012-09-25T20:29:46.323
> 
> 标签：android, shell, adb

aafm 是一个小型 Python GUI 实用程序，它使用 adb 作为底层在计算机和具有 MTP 的 Android 设备之间复制文件。但就像现在一样，文件得到的是它们被复制时的时间戳，而不是它们的原始时间戳。

如果我们可以将设备中的最后修改日期设置为与计算机中的最后修改时间相匹配，那就太好了。

我一直在浏览[http://developer.android.com/tools/help/adb.html](http://developer.android.com/tools/help/adb.html)中的 adb shell 命令列表，但到目前为止，我找不到任何与经典 unix`touch`命令类似的东西。

这个shell中是否存在类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:48:20.337

为此，您可以在 android 上使用[busybox 。](http://www.busybox.net/)这是一个替代小型 Linux 标准程序（例如**touch** ）的二进制文件（主要是有限的选项） 。 [阅读这个](http://androlinux.com/android-ubuntu-development/how-to-install-busybox-on-your-android/)和[这个](http://forum.xda-developers.com/showthread.php?t=1025934)

现在我发现它是 android **toolbox**二进制文件的一部分，但如果你在手机上找不到它，你可以使用自己构建的 touch 二进制文件并使用它，[源文件在这里](http://source-android.frandroid.com/system/core/toolbox/touch.c)。只需要在手机上上传，chmod，使用后删除即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:43:37.833

如果您正在谈论使用 ADB 从主机复制到 Android，则应使用原始修改时间戳。adbd 中的当前代码执行 utime()。在某些设备上 utime() 失败（见下文）。通过 ADB 从 Android 复制到主机甚至不会尝试设置任何时间戳。我不知道这个遗漏的原因。在我的两台设备（2.1 和 4.0）上，修改时间戳是在写入 Android 时设置的，而不是在写入主机时设置的。在 4.2 设备上，FUSE 文件系统存在问题，不允许使用 utime()；

在没有真正 sdcard 的设备上（即使用 FUSE），除非您是 root，否则在文件上执行 utime() 会出现问题。这进入了异常情况，您可以创建文件但不能更改时间戳。唯一真正的解决方案是确保`ro.secure=0`或您正在运行不安全的`adbd`.

# java - 接收通知：点击多个活动的句柄

> ID：12590556
> 
> 赞同：2
> 
> 时间：2012-09-25T20:29:49.327
> 
> 标签：java, android, notifications

在我的应用程序中，我有两个主要活动：

MainActivity 和 MessagesActivity

当单击通知并且应用程序未运行时，我希望它启动 MainActivity。但是，当应用程序正在运行并且 MessagesActivity 处于视图中时，我希望用户单击通知以某种方式接收意图数据。

我创建我的通知是这样的：

```
 NotificationManager notificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
        Intent notificationIntent = new Intent(context, MainActivity.class);
        notificationIntent.putExtra(MESSAGE_KEY, receivedMessage);
        notificationIntent.putExtra(MESSAGE_ID_KEY, receivedMessageId);
        int requestID = (int) System.currentTimeMillis();
        PendingIntent contentIntent = PendingIntent.getActivity(context, requestID, notificationIntent, PendingIntent.FLAG_ONE_SHOT, intent.getExtras());

        Notification notification = new Notification.Builder(context)
                ....build();
        notificationManager.notify(requestID, notification); 
```

我已经尝试过使用其他标志、launchModes 等。如果它只是一个活动，但是当应用程序在 MainActivity 或 MessagesActivity 中运行时永远不会调用 onNewIntent 时，这不会是一个问题

# asp.net-mvc - 映射多条索引路线

> ID：12590559
> 
> 赞同：1
> 
> 时间：2012-09-25T20:29:59.817
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我在应用程序中有许多控制器：

```
ApiV1Controller
ApiV2Controller
ApiV3Controller
... 
```

是否可以使用单个`MapRoute`语句将它们的路由映射到 URL 之类的`/api/v1/{action}`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:42:59.910

您可以编写自定义路线。假设您有以下控制器：

```
public class ApiV1Controller : Controller
{
    public ActionResult Index()
    {
        return Content("v1");
    }
}

public class ApiV2Controller : Controller
{
    public ActionResult Index()
    {
        return Content("v2");
    }
}

public class ApiV3Controller : Controller
{
    public ActionResult Index()
    {
        return Content("v3");
    }
} 
```

现在编写一个自定义路由：

```
public class ApiRoute : Route
{
    public ApiRoute()
        : base("api/{version}/{action}", new RouteValueDictionary(new { action = "index" }), new MvcRouteHandler())
    {
    }

    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        var rd = base.GetRouteData(httpContext);
        if (rd == null)
        {
            return null;
        }

        rd.Values["controller"] = "Api" + rd.GetRequiredString("version");
        return rd;
    }
} 
```

这可以在您的注册`Global.asax`：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.Add("ApiRoute", new ApiRoute());

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );
} 
```

差不多就是这样。现在你可以玩 url：

*   `/api/v1`
*   `/api/v2`
*   `/api/v3`

# iphone - 是否可以在 Cocos2d 精灵中渲染拉伸的 UIImage？

> ID：12590561
> 
> 赞同：0
> 
> 时间：2012-09-25T20:30:12.497
> 
> 标签：iphone, ios, cocos2d-iphone, uiimage

我能够创建图像并将其添加为 UIImageView （下面注释掉的行）。然后图像被拉伸。

当我把它放在一个精灵中时，它只渲染原始的未拉伸图像，可能是因为图像视图没有改变拉伸图像，因为它没有被添加到视图中。

有没有一种方法可以在没有图像视图的情况下将图像渲染为拉伸，然后将 CGImage 导入精灵？

```
UIImage *image = [UIImage imageNamed:@"your_cool_image_here.png"];
image = [image resizableImageWithCapInsets:UIEdgeInsetsMake(25, 25, 25, 25)];
UIImageView *view = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 50)];
view.image = image;

//[[[CCDirector sharedDirector] view] addSubview:view];

CGSize size = [[CCDirector sharedDirector] winSize];

CCSprite *sprite = [CCSprite spriteWithCGImage:view.image.CGImage key:@"image"];
sprite.anchorPoint = ccp(0.5, 0.5);
sprite.position = ccp( size.width /2 , size.height/2 );
[self addChild:sprite]; 
```

我知道有一些 Cocos2d 类，例如 CCSpriteScale9，但我很好奇是否有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:34:40.153

```
[sprite setScaleX: 320/sprite.contentSize.width scaleY: 50/sprite.contentSize.height]; 
```

（据我了解的问题）

# css - 多个 webkit 动画

> ID：12590562
> 
> 赞同：37
> 
> 时间：2012-09-25T20:30:19.003
> 
> 标签：css, animation, webkit

我正在尝试一次运行多个 webkit 动画。演示可以[在这里看到](http://jsfiddle.net/ialphan/fLNyS/)：

HTML：

```
<body>
  <div class="dot"></div>
</body> 
```

JavaScript：

```
$(function(){

    $('body').append('<div class="dot" style="left:100px; top:200px"></div>');

}); 
```

CSS：

```
body{
  background: #333;
}

.dot{
    background: -webkit-radial-gradient(center, ellipse cover, #f00 90%, #fff 10%);
    border-radius: 6px;
    background: red;
    display: block;
    height: 6px;
    position: absolute;
    margin: 40px 0 0 40px;
    width: 6px;
    -webkit-box-shadow: 0 0 2px 2px #222;

    -webkit-animation: shrink 2.s ease-out;

    -webkit-animation: pulsate 4s infinite ease-in-out;
  }

  @-webkit-keyframes shrink{
    0%{
      -webkit-box-shadow: 0 0 2px 2px #222;
      -webkit-transform: scale(2);
    }
    50%{
      -webkit-box-shadow: 0 0 2px 2px #222;
          -webkit-transform: scale(1.5);
      }
    100%{
      -webkit-box-shadow: 0 0 2px 2px #222;
          -webkit-transform: scale(1);
      }
  }

    @-webkit-keyframes pulsate{
      0%{
          -webkit-transform: scale(1);
      -webkit-box-shadow: 0 0 2px 2px #222;
      }
      50%{
          -webkit-transform: scale(1.1);
      -webkit-box-shadow: 0 0 2px 2px #111;
      }
    100%{ 
          -webkit-transform: scale(1);
      -webkit-box-shadow: 0 0 2px 2px #222;
      }
  } 
```

.dot 有两个动画：

1.  收缩
2.  脉动（很难看到，但它就在那里）

也许我需要找到一种同步它们的好方法。收缩动画完成后，跳动。我不能同时运行它们，所以 pulsate 在 .dot 中被注释掉了。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-09-25T20:33:39.997

如果需要，您可以使用 a 分隔多个动画`,`并在第二个动画上设置延迟：

```
-webkit-animation: shrink 2s ease-out, pulsate 4s 2s infinite ease-in-out; 
```

`2s`在第二个动画中是延迟

* * *

从 Chrome 43 和 Safari 9/9.2 开始，`-webkit-`只有 Blackberry 和 UC (Android) 浏览器才需要前缀。所以新的正确语法是

```
animation: shrink 2s ease-out, pulsate 4s 2s infinite ease-in-out; 
```

# makefile - CMake 可以构建子项目（有好处）吗？

> ID：12590563
> 
> 赞同：1
> 
> 时间：2012-09-25T20:30:26.303
> 
> 标签：makefile, cmake, project-structure

我有一些正在 CMake 中编译的大型项目。它已经开发了很长时间，有 8000 多个源/头文件（超过 500Mbytes，超过 500 个 CMakefile.txt 文件）。

他们使用这样的目录结构

```
PROJECT_NAME
  src
    / subdir_name
    / other_dir_name
    / some_different_dir
    / MY_SPECIFIC_DIR             <---
    / yet_another_dir
   build 
```

并在外部构建它，如下所示：

```
name@host:~/PROJECT_NAME/build> cmake ../src
name@host:~/PROJECT_NAME/build> make all 
```

然后将其构建为一个 BIG 二进制文件（细节不重要）。

* * *

我不能触及其他任何东西，只是`MY_SPECIFIC_DIR`它的源代码和 CMake 文件的内容。***因此，我以某种方式***`MY_SPECIFIC_DIR` *在调整 CMakefile.txt 文件* 中有源代码，并希望像这样构建它：

 **```
name@host:~/PROJECT_NAME/build_specific> cmake ../src/MY_SPECIFIC_DIR
name@host:~/PROJECT_NAME/build_specific> make all 
```

这应该将东西构建`MY_SPECIFIC_DIR`到单个二进制文件中**，并带有一些到其他子项目的链接**。但也（显然）不要改变整个项目的编译方式。

## 我的问题是：

*****是否可以使用CMake*** **进行所需的设置****？**
我可以以某种方式测试`CMakeFile.txt`它是根项目并以与整体构建时不同的方式构建它吗？**

 *** * *

除非，我必须诉诸不同的手段并`make`为此使用标准。我不知道 CMake，所以我希望***是/否***anwer，甚至对于如何实现这一点的技术也更可取。然后学习CMake并做到这一点。

另外，我必须使用 CMake 2.6 版。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:45:46.650

基本概念是使用

```
if (CMAKE_SOURCE_DIR STREQUAL CMAKE_CURRENT_SOURCE_DIR)
   ... code for stand-alone app
else()
   ... what was in this file before
endif() 
```****

# java - apache lucene 4 的自定义标记器

> ID：12590566
> 
> 赞同：1
> 
> 时间：2012-09-25T20:30:34.053
> 
> 标签：java, apache, lucene, tokenize

我有一个标记化的文本（拆分的句子和拆分的单词）。并基于此结构创建 Apache Lucene 索引。扩展或替换标准标记器以使用自定义标记的最简单方法是什么。我在看 StandardTokenizerImpl，但看起来很复杂。可能还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:19:40.193

StandardTokenizerImpl 很复杂，因为它是从 JFlex 语法生成的。

如果你想实现自己的分词器，你需要做的就是扩展分词器[类](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/analysis/Tokenizer.html?is-external=true)。

例如，[WhitespaceTokenizer](http://lucene.apache.org/core/4_0_0-BETA/analyzers-common/org/apache/lucene/analysis/core/WhitespaceTokenizer.html)是一个简单的标记器，它在空格处分割标记。

# java - java从文件中读取二维数组

> ID：12590567
> 
> 赞同：1
> 
> 时间：2012-09-25T20:30:35.820
> 
> 标签：java, arrays, file, io, 2d

我正在编写一个看起来像这样的迷宫游戏程序：

```
import java.util.*;
import java.io.*;

public class MazeGame {

    public static void main(String[] args) throws Exception{

        //Display the maze
        char treasureMaze[][] = {{'P','.','X','X','.'},{'.','X','.','.','.'},{'.','.','.','X','.'},{'X','X','T','.','.'},{'.','.','X','.','.'}}; 
        display(treasureMaze);
        int vertical = 0;
        int horizontal = 0;

        //Give Move Options
        options();

        //Setup a while loop that continues until the user has gotten to the treasure, or 'P'
        while(treasureMaze[vertical][horizontal] != 'T'){
        //Get Users Decision
        Scanner moveChoice = new Scanner(System.in);
        int choice = moveChoice.nextInt();

        if(choice == 1){
            System.out.println("You chose to Move up");
        }
        else if(choice == 2){
            System.out.println("You chose to Move down");
        }
        else if(choice == 3){
            System.out.println("You chose to Move left");
        }
        else if(choice == 4){
            System.out.println("you chose to Move right");
        }
        else{
            return;
        }

        //Move the Player: Each choice will move the player according to their choice and then re-display the map and options
        //so that they can move through the maze
        //Move Up
        if(choice == 1){
            if(vertical - 1 < 0){
                System.out.println("\nCannot move there! Try something else\n");
                display(treasureMaze);
                options();
            }
            else if(treasureMaze[vertical - 1][horizontal] == '.'){
                treasureMaze[vertical - 1][horizontal] = 'P';
                treasureMaze[vertical][horizontal] = '.';
                vertical -= 1;
                display(treasureMaze);
                options();
            }
            else if(treasureMaze[vertical - 1][horizontal] == 'T'){
                System.out.println("\nCongratulations you won!");
                treasureMaze[vertical][horizontal] = 'T';
            }
            else{
                System.out.println("\nCannot move there! Try something else\n");
                display(treasureMaze);
                options();
            }
        }

        //Move Down
        else if(choice == 2){
            if(vertical + 1 < 0){
                System.out.println("\nCannot move there! Try something else\n");
                display(treasureMaze);
                options();
            }
            else if(treasureMaze[vertical + 1][horizontal] == '.'){
                treasureMaze[vertical + 1][horizontal] = 'P';
                treasureMaze[vertical][horizontal] = '.';
                vertical += 1;
                display(treasureMaze);
                options();
            }               
            else if(treasureMaze[vertical + 1][horizontal] == 'T'){
                System.out.println("\nCongratulations you won!");
                treasureMaze[vertical][horizontal] = 'T';
            }
            else{                   
                System.out.println("\nCannot move there! Try something else\n");
                display(treasureMaze);
                options();
                }
            }

        //Move Left
        else if(choice == 3){
            if(horizontal - 1 < 0){
                System.out.println("\nCannot move there! Try something else\n");
                display(treasureMaze);
                options();
            }
            else if(treasureMaze[vertical][horizontal - 1] == '.'){
                treasureMaze[vertical][horizontal - 1] = 'P';
                treasureMaze[vertical][horizontal] = '.';
                horizontal -= 1;
                display(treasureMaze);
                options();
            }
            else if(treasureMaze[vertical][horizontal - 1] == 'T'){
                System.out.println("\nCongratulations you won!");
                treasureMaze[vertical][horizontal] = 'T';
            }
            else{
                System.out.println("\nCannot move there! Try something else\n");
                display(treasureMaze);
                options();
            }
        }

        //Move Right
        else if(choice == 4){
            if(horizontal + 1 < 0){
                System.out.println("\nCannot move there! Try something else\n");
                display(treasureMaze);
                options();
            }
            else if(treasureMaze[vertical][horizontal + 1] == '.'){
                treasureMaze[vertical][horizontal + 1] = 'P';
                treasureMaze[vertical][horizontal] = '.';
                horizontal += 1;
                display(treasureMaze);
                options();
            }
            else if(treasureMaze[vertical][horizontal + 1] == 'T'){
                System.out.println("\nCongratulations you won!");
                treasureMaze[vertical][horizontal] = 'T';
            }
            else{
                System.out.println("\nCannot move there! Try something else\n");
                display(treasureMaze);
                options();
            }
        }
        else{
            return;
        }

    }
    }

    //Display Object: prints out the maze for the user
    public static void display(char x[][]){
        for(int row = 0; row < x.length; row++){
            for(int column = 0; column < x[row].length; column++){
                System.out.print(x[row][column] + "\t");
            }
            System.out.println();
        }
    }

    //Options Object: gives the options menu to the user
     static void options(){
         System.out.println("You may:");
            System.out.println("\t1) Move up");
            System.out.println("\t2) Move down");
            System.out.println("\t3) Move left");
            System.out.println("\t4) Move right");
            System.out.println("\t0) Quit");

    }
} 
```

当我给它的藏宝迷宫数组时，这个程序运行良好，但我希望能够从文本文件中读取不同的迷宫，但我不知道如何去做。我是否需要使用扫描仪将数组读取到变量或其他内容？提前感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:36:36.193

这应该只涉及从 a 读取行[`FileReader`](http://docs.oracle.com/javase/7/docs/api/java/io/FileReader.html)并将[它们转换为 a`char[]`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray%28%29)：

```
// Open "filename.txt" for reading
BufferedReader in = new BufferedReader(new FileReader("filename.txt"));

// Get a single line from the file (you can call this repeatedly for multiple lines)
String line = in.readLine();

// Convert that string to a character array
char[] array = line.toCharArray(); 
```

我不推荐使用`Scanner`，因为它很慢而且毫无意义的复杂。我将它包装`FileReader`在 a 中是[`BufferedReader`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)因为它更快一点，并且它提供了有用的`readLine()`方法，但如果你愿意，你可以[直接从 a 中读取`FileReader`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html#read%28%29)。

[`Scanner.nextLine()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)如果您对 感到不舒服，您也可以使用`BufferedReader`，但我建议您熟悉各种`Reader`。

由于 2D 数组只是一个数组数组，因此您应该能够将 2D 数组的每个索引设置为您从文件中读取的数组：

```
char[][] map = new char[][10];
for(i = 0; i < 10; ++i) {
    String line = in.readLine();
    if(line == null) {
        // Realistically, you'd want better error handling than this
        System.out.println("Uh oh, the file doesn't have 10 lines!");
        return;
    }
    map[i] = line.toCharArray();
} 
```

# java - Jaxb：处理 REST Web 服务响应中的可选元素

> ID：12590570
> 
> 赞同：1
> 
> 时间：2012-09-25T20:30:48.610
> 
> 标签：java, xml, web-services, rest, jaxb

我有一个 Object Ticket，它有一个与之关联的元素 totalNoOfTickets。我在我的宁静服务的许多方法中使用这个对象 Ticket。但是，我只需要一种方法的元素“totalNoOfTickets”，而不需要其他方法....

例如，在我的一种方法中，我说...

```
Ticket.setTotalNoOfTickets(7); 
```

我不在其他方法中使用这个 totalNoOfTickets。因此，我没有在其他方法中设置它。

现在在我的 Ticket.java ...我有

```
public class Ticket
    extends ActionType {

    @XmlElementWrapper(name = "Tickets")
    @XmlElement(name = "Ticket")
    protected List<Ticket> tickets;

    @XmlElement(name = "TotalNumOfTickets")
    protected int totalNumofTickets;

    public int getTotalNumofTickets() {
        return totalNumofTickets;
    }

    public void setTotalNumofTickets(int totalNumoftokens) {
        this.totalNumofTickets = totalNumoftickets;
    } 
```

在方法响应中，我设置了 totalNumoftickets，响应包含：

```
<TotalNumOfTickets>7</TotalNumOfTickets> 
```

但是，即使在我不需要totalNumoftickets的回复中，回复也包含

```
<TotalNumOfTickets>0</TotalNumOfTickets> 
```

Jax-B 有什么办法没有

```
<TotalNumOfTickets>0</TotalNumOfTickets> 
```

在方法的响应中，我没有设置 totalNumoftickets？...我可以选择使用该元素吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:39:20.933

默认情况下，[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现不会编组`null`值。当您不想封送它时，您可以将`totalNumofTickets`字段/属性更改为 an并具有 null 值。`Integer`

```
public class Ticket
    extends ActionType {

    @XmlElementWrapper(name = "Tickets")
    @XmlElement(name = "Ticket")
    protected List<Ticket> tickets;

    @XmlElement(name = "TotalNumOfTickets")
    protected Integer totalNumofTickets;

    public Integer getTotalNumofTickets() {
        return totalNumofTickets;
    }

    public void setTotalNumofTickets(Integer totalNumoftokens) {
        this.totalNumofTickets = totalNumoftickets;
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)

# java - Java：18 个字符后的新行和 13 行后的新数组索引

> ID：12590573
> 
> 赞同：0
> 
> 时间：2012-09-25T20:31:04.803
> 
> 标签：java, arrays

我对 Java 很陌生，格式化字符串时遇到了一点问题。我在每 18 个字符后为新行添加“\n”，我必须将这些新行拆分为数组索引，每个索引 13 行。

到目前为止我的代码：

```
String[] strings = str.split("\n");
String result;
for (int i = 1; i < strings.length; i++) {
    i++;
    if ((i % 13) == 0) {
        result += strings[i];
    } else {
        result += strings[i] + "\n";
    }
} 
```

它不能正常工作，我测试了一下我不知道该怎么做，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:45:45.237

您`i`在每个循环中递增两次 - 一次在`for`语句的增量表达式中，一次在循环本身内。这意味着`i`总是偶数，所以`i % 13`当你期望它可能不是 0 时。此外，数组的第一个索引是 0，因此您当前会忽略第一个元素。作为更小的一点，我建议使用 a[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)而不是附加`Strings`：

```
String[] strings = str.split("\n");
StringBuilder resultBuilder = new StringBuilder();
for (int i = 0; i < strings.length; i++) {
    String s = strings[i];
    if ((i % 13) == 0) {
        resultBuilder.append(s);
    } else {
        resultBuilder.append(s).append("\n");
    }
}
String result = resultBuilder.toString(); 
```

# c# - 如何操纵回发优先级？

> ID：12590578
> 
> 赞同：1
> 
> 时间：2012-09-25T20:31:45.070
> 
> 标签：c#, jquery, asp.net

我有很多带有 TextChanged 事件的文本框。顶部还有一个主文本框，如果我更改它并按下“全部更改”按钮，它会更改整个文本框页面。

现在，该按钮几乎完全存在于客户端（仅使用 jquery 更改文本框），但我想知道在我的程序运行 100 多个 TextChanged 事件之前是否已按下它。我尝试为其添加一个服务器函数以将布尔值设置为 true，希望它会首先触发，但是 TextChanged 事件首先触发。

**TL;DR 我需要告诉我的程序在回发后按什么顺序处理这些事件。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:42:40.070

您确实无法更改 ASP.NET 页面生命周期中的事件顺序……但您仍然可以完成您需要的操作。这是一个建议...接受它FWIW...

在客户端，您可以添加一个 Javascript 事件处理程序（或修改一个已经存在的事件处理程序）来填充一个具有魔法值的服务器端表单字段（实际上并不重要）。在回发时，在 Page_Load（和/或 TextChanged 事件处理程序中）内，当 IsPostback = true 时检查值是否存在。您可能必须连接（一堆）不同的处理程序来进行相同的检查，所以这可能太麻烦了，但它至少是一个想法的种子，也许。

不会保证它非常优雅，但它至少应该让你更接近你需要的东西。

# android - stl 字符串赋值 NDK 崩溃

> ID：12590581
> 
> 赞同：3
> 
> 时间：2012-09-25T20:32:20.967
> 
> 标签：android, stl, android-ndk

我的代码在这里崩溃：

```
void setText(const string & s) 
{ 
    needsReload = true; 
    _text = s; //<-- SIGSEGV here
} 
```

`_text`是一个 std::string

这完全没有意义。`this`，`_text`并且`s`在有效内存中。我不能尝试portstl，因为我需要例外。没有什么可以出错的。我目前正在为 armeabi-v7a 编译。有什么建议么？

经过一番摆弄后，我发现每当我将某些东西分配给事先是空字符串的字符串时，它就会崩溃。我认为这与我的 libstdc++ 有关。这是我的编译和链接标志：

```
[ 50%] Building CXX object CMakeFiles/Mathrix.dir/main.cpp.o
/opt/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi-g++   -DMathrix_EXPORTS -DANDROID -D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__ --sysroot=/opt/android-ndk/platforms/android-9/arch-arm -fsigned-char -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -fdata-sections -ffunction-sections -fPIC -Wno-psabi -frtti -fexceptions -marm -Os -finline-limit=64 -fno-strict-aliasing -fno-omit-frame-pointer -DDEBUG -D_DEBUG -DDEBUG -fPIC -isystem /opt/android-ndk/platforms/android-9/arch-arm/usr/include -isystem /opt/android-ndk/sources/cxx-stl/gnu-libstdc++/4.6/include -isystem /opt/android-ndk/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/include -I/home/da_petcu21/src/Porkholt/Examples/Mathrix/../../Engine/include -I/home/da_petcu21/src/Porkholt/Examples/Mathrix/../../Engine/../Externals/lua/src -I/home/da_petcu21/src/Porkholt/Examples/Mathrix/../../Engine/../Externals/libpng -I/home/da_petcu21/src/Porkholt/Examples/Mathrix/../../Engine/../Externals/zlib -I/home/da_petcu21/src/Porkholt/Examples/Mathrix/../../Engine/../Externals/uremote/include -I/home/da_petcu21/src/Porkholt/Examples/Mathrix/../../Engine/../Externals/openal-soft/include    -o CMakeFiles/Mathrix.dir/main.cpp.o -c /home/da_petcu21/src/Porkholt/Examples/Mathrix/main.cpp
Linking CXX shared library ../libs/armeabi-v7a/libMathrix.so
/usr/bin/cmake -E cmake_link_script CMakeFiles/Mathrix.dir/link.txt --verbose=Yes
/opt/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi-g++  -fPIC --sysroot=/opt/android-ndk/platforms/android-9/arch-arm -fsigned-char -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -fdata-sections -ffunction-sections -fPIC -Wno-psabi -frtti -fexceptions -marm -Os -finline-limit=64 -fno-strict-aliasing -fno-omit-frame-pointer -DDEBUG -D_DEBUG -DDEBUG -Wl,--fix-cortex-a8 -Wl,--gc-sections -Wl,--no-undefined   -shared -Wl,-soname,libMathrix.so -o ../libs/armeabi-v7a/libMathrix.so CMakeFiles/Mathrix.dir/main.cpp.o -L/opt/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/user/libs/armeabi-v7a -L/home/da_petcu21/src/Porkholt/Examples/Mathrix/build-android/armeabi-v7a/CMakeFiles/ndklibs/armeabi-v7a -L/home/da_petcu21/src/Porkholt/Examples/Mathrix/build-android/libs/armeabi-v7a -lPorkholt -llua -Wl,-rpath,/opt/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/user/libs/armeabi-v7a:/home/da_petcu21/src/Porkholt/Examples/Mathrix/build-android/armeabi-v7a/CMakeFiles/ndklibs/armeabi-v7a:/home/da_petcu21/src/Porkholt/Examples/Mathrix/build-android/libs/armeabi-v7a 
```

我正在使用的构建脚本复制`libgnustl_static`到`/home/da_petcu21/src/Porkholt/Examples/Mathrix/build-android/armeabi-v7a/CMakeFiles/ndklibs/armeabi-v7a/libstdc++.a`

我怀疑它使用了`/opt/android-ndk/platforms/android-9/arm/lib`那个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:30:06.617

问题是 stl 与我的每个库都静态链接，因此创建了需要共享的某些全局变量的副本。（请参阅[Can't load native shared library with dependencies in a native Activity app](https://stackoverflow.com/questions/12524664/cant-load-native-shared-library-with-dependencies-in-a-native-activity-app/12544815#comment16932671_12544815)以查看我的 apk 的库布局）。

为了将来参考，这里有一个很好的解释为什么会发生这种情况：[http ://www.trilithium.com/johan/2005/06/static-libstdc/](http://www.trilithium.com/johan/2005/06/static-libstdc/)

我设法通过简单地动态链接stl来解决这个问题。

# search - Elasticsearch 映射配置文件 boost 字段

> ID：12590587
> 
> 赞同：3
> 
> 时间：2012-09-25T20:32:41.867
> 
> 标签：search, elasticsearch

我是搜索新手，无法解释有关提升映射中字段的文档。

我想实现一个简单的提升，其中一些文章的标题比与文章关联的标签更重要。

这是我在 config/[index_name]/[some_name].json 中放入的配置的尝试：

```
{
    "[type]": {
        "properties": {
            "_boost": {
                "name": "title",
                "null_value": 2.0
            }
            "title": {
                "type": "string"
            }
        }
    }
} 
```

我可以判断该文件正在被读取，因为之前对该文件的尝试出现了错误消息。我也一直在删除索引并在尝试之间重新创建它，以便它将使用此映射。

这行得通吗？它没有给出任何错误消息，但我无法判断 _search 或 get _mapping API 调用的输出是否有任何提升。

这是 _mapping 调用的结果：

```
{
    "[type]" : {
        "properties" : {
            "title" : {
                "type" : "string"
            }
            "tags": {
                "type" : "string"
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T07:48:31.013

[查看boost field 文档](http://www.elasticsearch.org/guide/reference/mapping/boost-field.html)中的示例。

> 提升字段映射（应用于根对象）允许定义提升字段映射，其内容将控制文档的提升级别

以下映射定义了一个名为 的字段`_boost`。如果`_boost`字段本身存在于索引的 JSON 文档中，则其值将控制索引文档的提升级别。

```
{
    "tweet" : {
        "_boost" : {"name" : "_boost", "null_value" : 1.0}
    }
} 
```

没什么特别的，这个例子只是告诉 elasticsearch 考虑字段，并在不存在时给它`_boost`一个默认值。`1.0`但是您正在为特定文档定义提升：这意味着当文档与查询匹配时，它的分数将根据`_boost`您应用于[根对象](http://www.elasticsearch.org/guide/reference/mapping/root-object-type.html)的字段映射来提升。这与现场级别的提升没有任何关系。

通过您的映射，您说该`title`字段的内容应该用作`_boost`，并且您提供的默认 _boost 值为`2.0`.

```
"_boost": {
    "name": "title",
    "null_value": 2.0
} 
```

这没有意义，因为标题包含文本，而且我猜这也不是您想要的。

有不同的方法可以更加重视`title`场上的比赛。

据我从文档中了解到，您可以在映射中这样做：

```
{
    "[type]" : {
        "properties" : {
            "title" : {
                "type" : "string",
                "boost" : 2.0
            }
            "tags": {
                "type" : "string"
            }
        }
    }
} 
```

老实说，我没有尝试过，也从未使用过它，但是 lucene 确实允许您在索引时指定每个字段的提升。提升成为该领域规范的一部分，并在该特定领域存在匹配时考虑在内。所以，这就是你要找的。

无论如何，我个人会在查询时而不是索引时进行提升，这样您就不需要修改映射，并且可以在不重新索引的情况下更改权重。例如，您可以使用[查询字符串](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)并搜索不同的字段，为它们赋予不同的权重，如下所示：

```
{
    "query_string" : {
        "fields" : ["title^2", "content"],
        "query" : "this AND that OR thus"
    }
} 
```

您需要考虑到查询字符串 query 被解析并允许您使用[lucene 查询语法](http://www.lucenetutorial.com/lucene-query-syntax.html)。

此外，您可以使用[bool query](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)将不同的查询组合在一起。您可以使用包含例如[术语查询](http://www.elasticsearch.org/guide/reference/query-dsl/term-query.html)和特定提升的 should 子句来表达标题匹配的提升，如下所示：

```
"should" : [
    {
        "term" : { "title" : "your query", "boost" : 2.0 }
    }
] 
```

您可以使用任何您想要的查询作为 should 子句。如果您使用术语查询，您需要记住它没有被分析。

# ruby-on-rails - 使用 jquery ui 在 Rails 中输出日期

> ID：12590593
> 
> 赞同：0
> 
> 时间：2012-09-25T20:33:12.403
> 
> 标签：ruby-on-rails, date-format, date-formatting

我有一个表单，您可以在其中单击 start_date，然后会出现一个 jquery 日历来选择日期。我想将日期显示为（例如）2012 年 9 月 25 日，但我还需要 rails 来理解正确的开始日期，而不仅仅是正确输出。

我需要添加什么？

```
<%= feed_item.start_date %> 
```

events.js.coffee

```
jQuery ->
    $('#event_start_date').datepicker
        dateFormat: 'yy-mm-dd'
    $('#event_end_date').datepicker
        dateFormat: 'yy-mm-dd' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:45:44.317

查看日期选择器的[altField](http://jqueryui.com/demos/datepicker/#option-altField)和[altFormat](http://jqueryui.com/demos/datepicker/#option-altFormat)选项。

您可以将 Rails 友好的日期存储在隐藏字段中并将其传递给控制器​​，并将用户友好的字段显示给用户。

**编辑**

查看[这个答案](https://stackoverflow.com/questions/4392097/altformat-not-working-in-jquery-datepicker-input-field)，了解如何使用 altField 和 altFormat 的示例。

# java - 运行小程序时出现魔术值错误

> ID：12590594
> 
> 赞同：0
> 
> 时间：2012-09-25T20:33:14.180
> 
> 标签：java

我创建了一个 Applet，并`jar`使用以下代码生成文件

**罐子文件**

```
"c:\arquivos de programas\java\jdk1.7.0_05\bin\jar" cvf C:\Users\lucas\Desktop\AbrirAplicativo3000.jar C:\Users\lucas\workspace\WebcamApplet\bin\com\colorfulwolf\webcamapplet\WebcamApplet.class C:\Users\lucas\workspace\WebcamApplet\bin\com\colorfulwolf\webcamapplet\QRCodeProcessor.class C:\Users\lucas\workspace\WebcamApplet\bin\com\colorfulwolf\webcamapplet\QRCodeListener.class C:\Users\lucas\workspace\WebcamApplet\bin\com\colorfulwolf\webcamapplet\OpenCVWebCam.class C:\Users\lucas\workspace\WebcamApplet\bin\com\colorfulwolf\webcamapplet\CVImageProcessor.class C:\Users\lucas\workspace\WebcamApplet\bin\com\colorfulwolf\webcamapplet\AbstractProcessor.class C:\Users\lucas\workspace\WebcamApplet\bin\com\colorfulwolf\webcamapplet\gui\ImagePanel.class C:\Users\lucas\workspace\WebcamApplet\bin\com\colorfulwolf\webcamapplet\gui\LabelPanel.class C:\Users\lucas\workspace\WebcamApplet\bin\com\colorfulwolf\webcamapplet\gui\LoadingScreen.class C:\Users\lucas\workspace\WebcamApplet\bin\com\google\zxing\StringsResourceTranslator.class C:\Users\lucas\workspace\WebcamApplet\bin\com\google\zxing\client\j2se\BufferedImageLuminanceSource.class C:\Users\lucas\workspace\WebcamApplet\bin\com\google\zxing\client\j2se\CommandLineRunner.class C:\Users\lucas\workspace\WebcamApplet\bin\com\google\zxing\client\j2se\GUIRunner.class C:\Users\lucas\workspace\WebcamApplet\bin\com\google\zxing\client\j2se\ImageConverter.class C:\Users\lucas\workspace\WebcamApplet\bin\com\google\zxing\client\j2se\MatrixToImageWriter.class 
```

我正常地唱了 JAR 文件。

我将 JAR 文件放在可见的 HTTP ( [http://www.netimoveis.com/AbrirAplicativo3000.jar](http://www.netimoveis.com/AbrirAplicativo3000.jar) )中

在我的`ASPX`页面中，我正在调用`APPLET`以下代码

```
<applet code="com.colorfulwolf.webcamapplet.WebcamApplet" 
    archive="http://www.netimoveis.com/AbrirAplicativo3000.jar, http://www.netimoveis.com/AbrirAplicativoAssinado3000.jar"
    height="550" width="550">
</applet> 
```

但是当我尝试运行时，我得到了错误

```
Incompatible magic value 218774561 error in applet 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:34:32.777

魔术值错误意味着类文件没有按应有的整数 0xCAFEBABE 开头。您可能遇到了传输或压缩问题。

如果您可以在十六进制编辑器中打开文件，您可能会查找这些字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:46:47.847

您`AbrirAplicativo3000.jar`的包装不正确。如果你看里面，它有这样的结构：

```
META-INF/
C:/
  Users/
    lucas/
      workspace/
        WebcamApplet/
           bin/
             com/ --> this is where the jar should start from.
               ... 
```

尝试使用命令`-C`上的选项，`jar`如下所示：

```
"c:\arquivos de programas\java\jdk1.7.0_05\bin\jar" cvf C:\Users\lucas\Desktop\AbrirAplicativo3000.jar -C C:\Users\lucas\workspace\WebcamApplet\bin\ . 
```

这也不是第一次在 SO 上出现[这个神奇的数字](https://stackoverflow.com/a/10327211/1434089)，尽管它似乎与错误的 URL 更相关。但是，我确实`jar`使用您提供的 URL 下载了该文件，因此请尝试重新打包它。

# javascript - 如何处理 TFL 新闻提要？

> ID：12590595
> 
> 赞同：1
> 
> 时间：2012-09-25T20:33:20.953
> 
> 标签：javascript

任何人都可以提出访问 tfl 交通新闻提要的想法吗？以下是获取数据馈送网址的链接。 [http://www.tfl.gov.uk/businessandpartners/syndication/16492.aspx](http://www.tfl.gov.uk/businessandpartners/syndication/16492.aspx)

我试过的代码如下：

代码示例：

```
$jq.ajax({
    type: 'GET',
    url: 'http://www.tfl.gov.uk/tfl/businessandpartners/syndication/feed.aspx?email=***********@****.com&feedId=13',
    dataType: "xml",
    async: "false",
    success: function(xml) {
        $jq(xml).find('rr_event').each(function() {
            //var title=$jq(this).find('title').text();
            alert("success!");
        });
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:41:46.933

看起来该链接要求您拥有有效的凭据才能访问我期望的某种 xml 提要？此外，如果您尝试从 www.tfl.gov.uk 以外的其他域访问此 url，则需要使用 JSONP 来获取数据，否则您将遇到安全异常（跨域错误）。

# mysql - Mysql联合时间VS单独查询一一

> ID：12590596
> 
> 赞同：0
> 
> 时间：2012-09-25T20:33:26.440
> 
> 标签：mysql, sql, union

如果我有 n 个查询 q1, q2, q3 ... qn 并且每个查询都运行 t1, t2, t3 ... tn 作为运行时间。

另外我还有另一个查询 q1 UNION ALL q2 UNION ALL q3 .... UNION ALL qn 并且运行时间是 tu

比较tu和t1+t2+t3+...+tn，理论上哪个会更快？我知道做实验是找出答案的最好方法，但我需要听听专家对理论的看法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:47:36.890

该`UNION`运算符要求在返回任何行之前删除结果集中的重复元组（行）。这实际上是一个 SORT UNIQUE 操作。这对于小型结果集相对便宜，但对于大型结果集，它可能会占用服务器时间（即需要很长时间）。

从理论上讲，将查询与`UNION ALL`运算符而不是`UNION`运算符结合起来最快，因为它将消除 ( *n* -1) 次到数据库的往返，而不是单独运行查询。但是对于较大的*n*值，您将遇到 SQL 文本大小（最大数据包大小）的实际限制。

考虑到`UNION`运算符和单独查询之间的选择，对于大型结果集，单独查询在服务器端的资源密集度将降低。

简而言之，这实际上是每个查询的繁重工作与 SORT UNIQUE 操作的繁重工作之间的权衡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:54:51.827

由于`UNION ALL`n 个子查询可以作为 n 个选择执行，因此智能 DBMS 最多应该能够完成与 n 个单独选择相同的工作。

这留下了往返时间，即用于 n个`n * rtt`查询和`rtt`.`UNION ALL`

`UNION ALL`理论上，一个智能 DBMS 应该总是比 n 个单独的查询更快地回答一个。
在实践中，像往常一样，所有赌注都没有经过测试。

# android - Phonegap 2.0.0-getApplicationContext

> ID：12590597
> 
> 赞同：0
> 
> 时间：2012-09-25T20:33:33.833
> 
> 标签：android, cordova, phonegap-plugins

我正在尝试在我的插件中获取应用程序上下文，但它会引发此错误：

> 无法在未调用 Looper.prepare() 的线程内创建处理程序

这是我的代码：

```
ResourceManager manager = ResourceManager.getInstance(this, this.ctx.getApplicationContext()); 
```

我什至将我的代码更改为：

```
ResourceManager manager = ResourceManager.getInstance(this, this.cordova.getContext()); 
```

和

```
ResourceManager manager = ResourceManager.getInstance(this, this.cordova.getActivity()); 
```

也试过：

```
ResourceManager manager = ResourceManager.getInstance(this, cordova.getActivity().getApplicationContext()); 
```

但它仍然抛出相同的错误信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:21:37.923

已修复：该问题与获取 applicationContext 无关，ResourceManager 中存在问题

# objective-c - 尝试在 iPhone 5 4" 故事板中添加新背景

> ID：12590600
> 
> 赞同：0
> 
> 时间：2012-09-25T20:33:45.710
> 
> 标签：objective-c, screen, ios6, iphone-5

我正在尝试添加正确大小的背景图像以支持 iPhone5 4" 屏幕，但我仍然在底部得到相同的信箱。图像是正确大小的图像。我使用的代码：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == kIphone5) {
        //====THIS IS AN iPhone5 4" screen====//
        UIImage *image = [UIImage imageNamed:@"iphone_frosty-568h@2x.png"];
        [backgroundImage setImage:image];

    } 
```

我确实有兰奇图像..

**更新**

我最终将 iPhone5 背景图像添加到 iPhone5 Storyboard 并将其用于所有 iPhone 模式。不知道这是否是正确的方法，但它似乎有效。

有人可以请教吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:43:00.443

您只是在谈论让您的应用程序在 iPhone 5 上使用全屏运行（摆脱信箱）吗？如果是这样，您不要在代码中的某处使用新的图像大小作为背景图像；您必须将其作为启动图像添加到您的项目文件中。有关更多信息，请参阅 Apple 文档的[启动图像](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)部分。

# servicestack - servicestack AppHostHttpListenerBase handlerpath 参数不起作用？

> ID：12590605
> 
> 赞同：2
> 
> 时间：2012-09-25T20:34:08.363
> 
> 标签：servicestack

不确定我是否在这里遗漏了什么。我在单元测试中使用 AppHostHttpListenerBase 来测试服务，并在其构造函数中为 handlerPath 参数传递“api”。我在 /hello/{Name} 注册了一项服务，并且正在使用 3.9.17 版的 servicestack。

如果我访问，在我的 appHost 类的 Config 方法中

EndpointHostConfig.Instance.ServiceStackHandlerFactoryPath

它返回“api”

一旦我回到单元测试中，相同的调用返回 null

如果我尝试使用 /hello/test 调用该服务，它就可以工作。如果我使用 /api/hello/test 它失败

看来 AppHostHttpListenerBase 正在失去 handlerPath ？

这听起来像一个错误还是我错过了什么？

下面是代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NUnit.Framework;
using ServiceStack.ServiceClient.Web;
using ServiceStack.ServiceInterface;
using ServiceStack.Text;
using ServiceStack.WebHost.Endpoints;

namespace Bm.Tests
{
    /// <summary>
    /// Test self hosting for unit tests
    /// </summary>
    [TestFixture]
    public class TestService
    {
    private TestServiceAppHost _apphost;
    private const string HOST_URL = @"http://localhost:1337/";
    [TestFixtureSetUp]
    public void TestFixtureSetUp()
    {
        _apphost = new TestServiceAppHost();
        _apphost.Init();
        _apphost.Start(HOST_URL);

    }

    [Test]
    public void TestHelloServiceJson()
    {

        var prefix = EndpointHostConfig.Instance.ServiceStackHandlerFactoryPath;
        Assert.AreEqual("api", prefix, "Should be api");

        var client = new JsonServiceClient(HOST_URL);
        var response = client.Send<HelloResponseTest>(new HelloTest() { Name = "Todd" });
        Assert.AreEqual("Hello, Todd", response.Result);
    }

    [TestFixtureTearDown]
    public void TestFixtureTearDown()
    {
        _apphost.Stop();
        _apphost.Dispose();
    }

    }

    public class HelloTest
    {
    public string Name { get; set; }
    }

    public class HelloResponseTest
    {
    public string Result { get; set; }
    }

    public class HelloServiceTest : ServiceBase<HelloTest>
    {
    protected override object Run(HelloTest request)
    {
        return new HelloResponseTest { Result = "Hello, " + request.Name };
    }
    }

    //Define the Web Services AppHost
    public class TestServiceAppHost : AppHostHttpListenerBase
    {
    public TestServiceAppHost() : base("testing HttpListener", "api", typeof(HelloServiceTest).Assembly) { }

    public override void Configure(Funq.Container container)
    {
        // this works and returns api
        var prefix = EndpointHostConfig.Instance.ServiceStackHandlerFactoryPath;
        Routes
                .Add<HelloTest>("/hello")
                .Add<HelloTest>("/hello/{Name}");
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:37:31.357

如果您希望处理程序根路径成为`/api`您需要将其添加到侦听器 url，即：

```
_apphost.Start("http://localhost:1337/api/"); 
```

# python - IPython 笔记本之间的链接

> ID：12590611
> 
> 赞同：61
> 
> 时间：2012-09-25T20:34:32.460
> 
> 标签：python, ipython

是否可以通过 Markdown 单元格中的超链接将一个 IPython 笔记本链接到另一个？如果我尝试

```
Link to [Notebook 2](files/notebook2.ipynb) 
```

或者

```
Link to <a href="files/notebook2.ipynb">Notebook 2</a> 
```

将打开一个新选项卡，其中包含 ipynb 文件的原始未格式化内容。有没有办法让 IPython 通过超链接打开另一个笔记本以在新选项卡中使用？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2014-05-29T13:14:00.353

从 IPython 2 开始，您可以使用您第一次尝试的语法：

```
Link to [Notebook 2](notebook2.ipynb) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-10-18T10:36:46.543

现在至少可以使用 Ipython 1.0+ 来做到这一点。

只需：localhost:8888/My Notebook.ipynb

这是此功能的文档。 [https://github.com/ipython/ipython/pull/3058](https://github.com/ipython/ipython/pull/3058)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T02:04:36.933

从[http://python.6.n6.nabble.com/where-is-the-code-to-generate-IPython-Notebook-URL-for-a-new-ipynb-file-td4996991.html](http://python.6.n6.nabble.com/where-is-the-code-to-generate-IPython-Notebook-URL-for-a-new-ipynb-file-td4996991.html)：

您可以从 url 访问所有笔记本的 json 版本：$host/notebooks

这是一个对我有用的片段：

```
 import urllib2
    import json
    data = urllib2.urlopen("http://127.0.0.1:8888/notebooks")
    json_data=data.read()
    list_o_dicts=json.loads(json_data)
    for d in list_o_dicts:
        if d['name'] == 'test':
            print d['notebook_id'] 
```

根据您的需要进行修改。

** 在进一步阅读时，我刚刚意识到 OP 也在寻求新的笔记本创建，无论如何都要保留我的答案作为链接现有笔记本的方式。

尝试实现 OP 目标的一种方法是运行一个脚本，该脚本将在 ipython 笔记本启动的 ipython 文件夹中创建一个新的 notebook.ipynb 文件。该 .ipynb 文件可以从从仪表板创建的新 ipython 笔记本中进行模板化，并将笔记本的名称和 ID 替换为您尝试从现有笔记本链接的任何内容。我没有尝试过，但应该可以工作，因为将 .ipynb 扩展文件放入 ipython 文件夹确实会在仪表板中显示它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-09T18:57:08.973

除了 akim 的建议 - 您可以使用相对链接链接到任何（py 或 ipynb）文件，以“edit”开头，然后从您启动服务器的目录开始。

例如，在降价单元格中，如果我想引用一个文件，其相对位置（相对于我的 git 存储库，这也是我启动笔记本服务器的位置）是“./path/to/source.py”，我会添加：

`[link to source](/edit/path/to/source.py)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-04T14:17:08.323

请记住，如果您的文件名有空格，则需要将其替换为 %20

例如：

```
[Numpy](Numpy%20For%20Python.ipynb) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T15:10:14.233

不幸的是，这实际上是不可能的。该链接需要指向笔记本 ID（例如*/a1e2a88f-3b91-4a4e-8ca1-d4fd7240f750*用于我现在正在处理的那个）。这是 IPython 服务器在启动时创建的 UUID。因此，您可以从 IPython Dashboard 复制链接，但它仅在您重新启动之前有效。

# c# - C# 对象在删除其引用后仍然存在

> ID：12590616
> 
> 赞同：-3
> 
> 时间：2012-09-25T20:34:49.360
> 
> 标签：c#, reference, null

我只是好奇这是如何工作的：在我的 Form1.cs 类中，我声明了一个静态对象：

```
 public static Class1 class1; 
```

这是 Class1 的构造函数的样子：

```
 public Class1()
{
    Form1.class1 = null;
} 
```

我希望在 MS VS 2010 中得到一个空引用异常

```
 class1 = new Class1();
 class1.showMSG(); 
```

但它只是执行 showMSG() （showMSG 不是静态的），就像我从未将 class1 的引用设置为 null 一样。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:36:48.277

`class1 = new Class1();`好吧，根据提供的代码，您实际上在这里初始化它。

您首先将其设置为`null`

```
Form1.class1 = null; 
```

后

```
 class1 = new Class1(); //INIT THE SAME (ACCORDING TO THE NAME) OBJECT
  class1.showMSG();      //CALL A METHOD ON IT. 
```

**编辑**

根据**编辑**的问题：

```
public Class1()
{
    Form1.class1 = null;
} 
```

不会重置任何内容，因为您仍在a*中*`constructor`，退出时实际对象将被构造并分配给您`null`之前分配的同一对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:40:14.797

Class1 的构造函数集

```
Form1.class1 = null; 
```

但是当你执行

```
class1 = new Class1(); 
```

对`class1`（相同`class1`）的赋值发生*在*构造函数执行之后。所以`Form1.class1`现在有了价值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:57:33.067

如果您将最后两行分解为以下内容，也许最容易解释：

```
var tmp = new Class1();  // makes class1 null
class1.showMSG();        // would raise exception, remove this line to proceed
class1 = tmp;            // class1 is no longer null
class1.showMSG();        // no exception, instance exists to call method on 
```

# javascript - 批量导出 html 页面的特定部分

> ID：12590619
> 
> 赞同：0
> 
> 时间：2012-09-25T20:34:57.827
> 
> 标签：javascript, html, batch-file, automation

首先，作为用户，我是社区的新手，我想说这是一个很棒的社区。

我的问题是，我想从一个`<a href=""`元素中获取一个 URL，使用`<alt="new">`该部分中使用的图像的名称，该图像的名称`<td>`来自一个每天都在变化且不属于我的网页。

到目前为止，我已经编写了一些代码来将页面下载`wget`到文本文件中，然后搜索图像或 alt 变量。即使它给我带来了搜索项目存在的部分，它也不包括`<a href`我需要的位于图像之前的部分。

编辑：我设法得到下面的行，我只需要使用批处理获取 url，或者使用 javascript 重定向到它，但是由于标题和 url 发生了变化，这很有挑战性。有什么帮助吗？

> ```
> <td width="150" align="left" valign="top"><a href="SOMEURL" title="SOMETITLE"><b><u>"SOMETEXT"</u></b></a> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:49:42.243

如果我正确地理解你，你想从包含的 HTML 文件链接中获取`<a href=""`？我想到的第一个解决方案是下载整个 HTML 并使用 python 和 BeautifulSoup 库来解析这个文件并获取所有'hrefs'。你是这个意思吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:11:28.903

使用您提供的代码：

```
set "x=<td width="150" align="left" valign="top"><a href="SOMEURL" title="SOMETITLE"><b><u>"SOMETEXT"</u></b></a>"

set "x=%x:<=%"              & :: Remove Redirection Character
set "x=%x:>=%"              & :: Remove Redirection Character
set x=%x:*href=%            & :: Remove everything up till href=
set x=%x:~2%                & :: Trim ="
set x=%x:"='%               & :: Replace Double Quotes with Single Quotes
set "x=%x:' =" & rem %      & :: Remove everything after URL

echo %x% 
```

注意双引号，它们对于删除 html 标记分隔符`<`和至关重要`>`，因为它们是重定向字符，除非被双引号括起来，否则会导致错误。

您可以将上面的代码直接复制粘贴到命令提示符中进行测试。

# algorithm - 优化合并排序

> ID：12590621
> 
> 赞同：1
> 
> 时间：2012-09-25T20:35:19.830
> 
> 标签：algorithm, sorting, mergesort, divide-and-conquer

合并排序是一种相当常见的排序算法，我已经编写了一个有效的合并排序算法。然后我想优化它。第一步是将它从递归转换为迭代，我这样做了。然后我无法辨别还有什么可以优化的。在浏览了互联网上的大量文章后，我得到了两种机制，使用**多合并**排序和**平铺合并排序**。然而，这些文档都没有提供任何伪代码，甚至都没有解释如何做到这一点，以及它如何提供作者所说的优势，比如缓存友好和改进的局部性命中。

任何人都可以详细说明这个问题，如果可能的话，提供一些伪代码？具体来说，我想知道如何使它对缓存友好。我完全不知道这些东西是什么，否则我会自己尝试的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-26T18:03:20.227

您可以进行的一个常见且相对简单的优化是当子数组大小低于某个阈值时，从合并排序切换到另一种算法，如插入排序。尽管归并排序在 O(n log n) 的时间内运行，但它谈到了它的长期增长率，并没有说明算法在小输入上的表现如何。例如，插入排序在较小的输入大小上运行得非常快，尽管从长远来看它会更糟。因此，请考虑更改合并排序的基本情况，以便如果要排序的数组低于某个大小阈值（例如，50-100），则使用插入排序而不是继续递归。从经验来看，这可以显着提高算法的性能。

# c - 靶心覆盖率，代码覆盖率为 0%

> ID：12590629
> 
> 赞同：1
> 
> 时间：2012-09-25T20:36:05.383
> 
> 标签：c, gcc, code-coverage, bullseye

我对代码覆盖率和我目前使用的工具非常陌生。我正在使用靶心覆盖来评估简单的“hello world”代码的代码覆盖率。编译代码后，我试图打开 .cov 文件，它显示 0% 的代码覆盖率？我使用的命令是 1) set COVFILE=c:.......\test.cov 2) gcc -c main.c 3) covc gcc -c main.c

编写完这些命令后，我可以看到正在生成 test.cov 文件，但覆盖率浏览器显示 0% 的代码覆盖率。我错过了什么吗？我的意思是 main.c 只有 main() 并且没有被调用？怎么来的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T09:20:52.337

看来您还没有运行二进制文件。您已经设置了 COVFILE 环境变量，使用 Bullseye gcc 包装器编译器编译了您的代码。

现在你应该运行你编译的代码，只有*这样*你才会看到覆盖率提高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:28:32.617

确保您使用以下标志编译了您的应用程序：

```
-fprofile-arcs -ftest-coverage 
```

# ruby - 等待打印/放置所有可见链接

> ID：12590633
> 
> 赞同：2
> 
> 时间：2012-09-25T20:36:33.137
> 
> 标签：ruby, watir, watir-webdriver

```
$browser.links.each do |link|
          puts link.attribute_value("class")
end 
```

如何获取 put 语句中的所有可见/现有链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:09:07.537

您也可以使用更短的语法来编写它，如下所示：

```
puts $browser.links.find_all(&:present?).map(&:class_name) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T20:58:32.367

这将输出页面上所有**现有**链接的`class`属性值：

 **```
$browser.links.each {|link| puts link.attribute_value("class")} 
```

这将输出页面上所有**可见**链接的`class`属性值：

 **```
$browser.links.each {|link| puts link.attribute_value("class") if link.visible?} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:32:00.047

如果您需要链接的类名，可以使用

```
$browser.links.each {|link| puts link.class_name if link.visible?} 
```

或者如果您需要链接的任何特定属性，您可以使用

```
$browser.links.each {|link| puts link.attribute_value("attribute_name") if link.visible?} 
```****

# c# - Telerik OpenAccess ORM 与 SQL Server 2005

> ID：12590635
> 
> 赞同：0
> 
> 时间：2012-09-25T20:36:39.133
> 
> 标签：c#, telerik-mvc, telerik-open-access

我正在尝试这个 ORM 和新的。我有以下代码：

```
IObjectScope scope = Database.Get("MyConnection").GetObjectScope();

try
{
   scope.Transaction.Begin();
   Reading r = new Reading();
   r.ReadingURL = reading.ReadingURL;
   r.IsActive = true;
   scope.Add(r);
   scope.Transaction.Commit();
}
finally
{
   scope.Dispose();
} 
```

当我运行它时，我在“添加”上收到以下错误：

> *Telerik.OpenAccess.Exceptions.InvalidOperationException：“WritingChallenge.Reading”类是持久的，但在此上下文中未知。*

似乎由于某种原因数据库连接丢失了？我不确定这里有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:49:08.547

这里的问题是连接到的模型`WritingReplacementConnection`没有关于`WritingChallenge`.Reading 类型的信息。

您是否指定了`mappingConfiguration`包含此类型的 a？

[您也可以在Telerik Forums - .NET ORM](http://www.telerik.com/community/forums/orm.aspx)的论坛中提出此类问题。

# c - 与字符数组联合的 C 结构

> ID：12590636
> 
> 赞同：2
> 
> 时间：2012-09-25T20:36:42.110
> 
> 标签：c, serial-port, pic

我正在尝试从用 C 编程的 PIC 接收二进制记录。

发送的数据结构如下：

```
typedef struct{int32 num1;
              float num2,num3,num4,num5;
              ...
              }RecordStructure;

typedef union{RecordStructure Record; char Array[48];} My_Rec_Structure; 
```

我的问题是这样的：

前 4 个字节/字符是否属于`int32 num1`，接下来的 4个属于`float num2`等等？

如果是这样，我在传输方面遇到了重大问题；如果不是，我如何辨别数据的最终位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:48:12.630

是的，在第一部分，但有一个警告。

C 标准要求将第一个结构成员放在结构的开头。因此 int32 将是传输的前四个字节。但是，PIC 可能具有不同的字节顺序，因此您最终可能会从 PIC 发送 0x12345678，并在接收端读取值 0x78563412。

至于其余结构成员的寻址，您的编译器可以自由地在每个成员之间添加填充。通常这是为了优化内存访问而做的事情。

如果您有可能从 PIC 中获取一些文本输出，则可以使用 stddef.h 中的 offsetof() 宏获取结构成员的偏移量：

```
fprintf(stderr, "num2 offset=%d\n", offsetof(RecordStructure, num2));
fprintf(stderr, "num3 offset=%d\n", offsetof(RecordStructure, num3)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:46:49.133

数据在结构中的对齐方式可能因编译器以及用于强制特定对齐的编译指示而异。

如果此编译器在双字边界上对齐项目，则前 4 个字节 num1 应与 char 数组的前 4 个字节对齐，后 4 个字节 num2 应与 char 数组的后 4 个字节对齐，等等。

如果可能，您可以做的是在收到数据时使用调试器检查数据。在发送的数据中，您放置一个特定的十六进制数字序列，这样您就可以知道事情是否按照您的想法排列。

所以在 PIC 结构中发送的数据可能是：

```
RecordStructure myRecord;
myRecord.num1 = 01F2E3D4C;
myRecord.num5 = myRecord.num4 = myRecord.num3 = myRecord.num2 = 0; 
```

然后把它发过去看看它是什么样子的。以及num1的值是否相同。

如果您随后修改数据，例如如果 myRecord.num3 = 1.0，您将能够看到事情是否对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:51:59.223

是的。前四个字节将属于 num1，然后接下来的四个字节将属于 num2，依此类推。但是，int 和 float 中的字节顺序是特定于平台和实现的。

然而，有两个主要因素会影响这一点。一个是对齐，另一个是填充。确保将填充设置为 1 字节，以确保变量之间没有内存间隙，并尽可能将对齐设置为 1。但是根据您的编译器和硬件，对齐可能必须是 4 或 8 字节的倍数。在这种情况下，您可能需要添加一些填充变量。您可以使用 MSVC 中的 align 关键字和 GCC 中的对齐属性来更改每个结构/变量的默认对齐方式：

```
__declspec(align(1)) //MSVC
__attribute__((aligned(1))) //GCC 
```

例子：

```
#pragma pack(1)
typedef struct{int32 num1;
              float num2,num3,num4,num5;
              ...
              }RecordStructure;

typedef union{RecordStructure Record; char Array[48];} My_Rec_Structure; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T21:03:39.347

这个[例子](https://github.com/mru00/SampleScope/blob/06e12c9c1c836ed2f4e12b0869acd6b6d283a3e0/shared/common.h)展示了~RecordStructure~ 的相同定义如何在PC (Linux/x86/gcc) 和PIC(18F) 两端使用。诀窍是用来`#ifdef / #define`支持两个编译器。

```
#ifdef __cplusplus
# define __PACKED
# define __PACKED2 __attribute__((packed))
#else
# define __PACKED2
#endif

typedef struct __PACKED {
    opcodes_t opcode : 8;
    union {
        osci_config_t set_config_args;
        READ_SINGLE_ARGS read_single_args;
        SAMPLE_SINGLE_ARGS sample_single_args;
        SAMPLE_INTERLEAVED_ARGS sample_interleaved_args;
    } args;
} __PACKED2 opcode_decoder_t; 
```

# github - 我需要备份数据库文件。需要像 github 这样对 100 GB 数据感到满意的东西

> ID：12590638
> 
> 赞同：2
> 
> 时间：2012-09-25T20:36:47.253
> 
> 标签：github, storage

在将其加载到 DBMS 之前，我想要一个用于大量数据库数据的源代码控制环境。我们一直在使用 GITHUB，它很棒。但他们希望存储库小于 1 GB，而我们有数百个。

它可以在 CVS 或 SVN 中，但跟踪版本很重要。数据是非常静态的，只能以低速率访问，例如每周一次访问部分数据，每月一次访问更多。

有什么建议的地方/服务可以做到这一点吗？它不一定是免费的，我们很乐意支付合理的金额。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:50:47.237

我确认这种数据量与版本控制系统不兼容（用于记录历史，即主要是文本文件和小型二进制文件的演变）

它肯定与*分布式*VCS 不兼容，其中任何克隆都会克隆*所有*存储库。

您需要查看此类存储的**[云服务。](http://cloud-services-review.toptenreviews.com/)**

* * *

OP 抗议（downvote），指出：

> 它们将是普通的 ASCII，除了 GitHub 的文件大小限制如此之小，我通过 ZIP 压缩运行它们。
> 它们很少改变，当内容改变时，它只是文件中的一小部分行。
> 它正是版本控制的意义所在。哪 0.005% 的 ASCII 改变了？谁改的？什么时候？

我坚持认为：

*   数百兆字节与大多数源代码控制存储库提供商不兼容（它甚至与大多数内部*企业*存储库不兼容，而且我在一家*大*公司）
*   将它们放在 zip 文件中是不切实际的，因为版本控制工具系统无法记录增量。

你需要**保持分开**：

*   **数据**（将“其他地方”存储为纯文本文件的大量内容，当然不在 GitHub 上）
*   您想要的**元数据**（作者，修改日期），存储在与“shell”数据相关联的常规 git 存储库中（即，您的文件实际上是“引用”，或某种“符号链接”到放置在别处的实际文件)

一个基于 Git 的系统，它提供了[git-annex](http://git-annex.branchable.com/)，使用您自己的云存储和（如果实施）[git-annex 助手](http://www.kickstarter.com/projects/joeyh/git-annex-assistant-like-dropbox-but-with-your-own)：请参阅它的[路线图](http://git-annex.branchable.com/design/assistant/)。

# python - 使用 boto 列出 Auto Scaling 组中的实例

> ID：12590646
> 
> 赞同：7
> 
> 时间：2012-09-25T20:37:30.070
> 
> 标签：python, amazon-web-services, boto, autoscaling

我想列出当前在 Auto Scaling 组中运行的所有实例。可以用boto完成吗？

ASG 和实例之间必须存在某种关系，因为 boto`shutdown_instances`在类中具有方法`boto.ec2.autoscale.group.AutoScalingGroup`。

任何指向正确方向的指针都非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T23:26:59.320

像这样的东西应该工作：

```
>>> import boto
>>> autoscale = boto.connect_autoscale()
>>> ec2 = boto.connect_ec2()
>>> group = autoscale.get_all_groups(['mygroupname'])[0]
>>> instance_ids = [i.instance_id for i in group.instances]
>>> reservations = ec2.get_all_instances(instance_ids)
>>> instances = [i for r in reservations for i in r.instances] 
```

我们必须收集实例 ID 然后调用 EC2 的原因是 AutoScale 仅存储有关实例的一小部分信息。这将导致变量实例指向自动缩放组“mygroupname”中每个实例的实例对象列表。

# jquery - 使用 margin-attribute 在 mouseover/mouseout 上为转换后的 div 设置动画

> ID：12590649
> 
> 赞同：0
> 
> 时间：2012-09-25T20:37:34.057
> 
> 标签：jquery, html, jquery-animate

我想知道是否有人有办法解决我遇到的问题。我对从脚本和测试服务器混合的不同代码进行了很多实验，但它们对我没有帮助，因为我想移动一个转换后的 div，其内部跨度仅在加载时将文本向左对角线一点点移出站点，然后在悬停时移入该站点，但仍然只有一个悬停，所以这个应该移出，同时用鼠标箭头离开热点区域。
我不知道如何将类组合在一个我可能会在加载时调用的函数中。我附上我的 css 和 html，以防有人已经遇到问题。

我想到了一些事情，比如用左边距移动它们到左边，用左边距为右边动画它们！

这是我想出的 jquery，但它并没有做我想要的。它使事物向左/向右直线移动，而不是以我希望它们移动的角度对角线：

```
<script type="text/javascript">
        $(function() {
            $('#bgrclub .advantages').hover(
                function () {
                    var $this = $(this);
                    $this.stop().animate({'margin-left':'400px'},500);
                    $('#bgrclub .advantages',$this).stop(true,true).fadeOut(1500);

                },
                function () {
                    var $this = $(this);
                    $this.stop().animate({'margin-left':'95px'},1000);
                    $('#bgrclub .advantages',$this).stop(true,true).fadeIn();
                }
            );
        });

        </script>

    <div id="bgrclub">
    <div class="advantages"><span>A proper solution</span></div>
    <div class="advantages"><span>would have to work</span></div>
    <div class="advantages"><span>with differently</span></div>
    <div class="advantages"><span>long text spand</spa></div>
    <div class="advantages"><span style="padding-left:250px;">Random Text Span</span></div>
<div class="advantages"><span style="padding-left:435px;">A really, really, really long text span</span></div>
</div> 
```

CSS：

```
#bgrclub {background-image:url(../images/club_bgr.jpg);background-repeat:no-repeat;width:755px;height:544px;}
#bgrclub_bottompics {background-image:url(../images/club_bgr_bottompics.jpg); position:absolute; bottom:0px; left:0px;background-repeat:no-repeat;width:755px; height:95px; z-index:999;}
#bgrclub .advantages {position:relative;width:755px;float:left; padding-top:40px;-moz-transform:rotate(-20deg); /* Firefox 3.6 Firefox 4 */-webkit-transform:rotate(-20deg); /* Safari */-o-transform:rotate(-20deg); /* Opera */-ms-transform:rotate(-20deg); /* IE9 */transform:rotate(-20deg); /* W3C */}
#bgrclub .advantages span {font-family: 'Open Sans Condensed', sans-serif;font-size:175%; font-weight:lighter; color:#373737;padding:10px; padding-left:125px; margin-left:-150px; border-bottom-right-radius:10px; border-top-right-radius:20px; z-index:1000;
background: -moz-linear-gradient(left,  rgba(255,255,255,0) 0%, rgba(255,255,255,0) 23%, rgba(255,255,255,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(255,255,255,0)), color-stop(23%,rgba(255,255,255,0)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,0) 23%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,0) 23%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,0) 23%,rgba(255,255,255,1) 100%); /* IE10+ */
background: linear-gradient(to right,  rgba(255,255,255,0) 0%,rgba(255,255,255,0) 23%,rgba(255,255,255,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=1 ); /* IE6-9 */} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:47:56.760

这是示例，您可以更改速度（500）

```
$("#bgrclub").animate({

    right: '0'
    }, 500, function() {
    // Animation complete.
       $(this).css('margin-left', '300');
      /*
       *and you do many other thing here
      */
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:10:01.133

您可以将其定义为

```
$(document).ready(function () {
/**
* your code
*/
}); 
```

您可以更改悬停事件中的所有 css 属性：

```
$(#your_div).css('float', 'left'); 
```

或者

```
$("#your_div").css('float', 'right');
$("#your_div").css('position', 'relative'); 
```

得到你的结果等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T21:58:30.227

谢谢，伙计们！我让它完全按照我想要的方式工作：

```
<!-- Hovering in the Advantages -->
        <script type="text/javascript">
            $(function() {
                $('#bgrclub .advantages span').hover(
                    function () {
                        var $this = $(this);
                        $this.stop().animate({'margin-left':'-10'},2000);
                        $('#.advantages',$this).stop(true,true).fadeOut(2500);

                    },
                    function () {
                        var $this = $(this);
                        $this.stop().animate({'margin-left':'-150px'},2000);
                        $('#.advantages',$this).stop(true,true).fadeIn();
                    }
                );
            });

        </script> 
```

# python - 在 Windows 中安装 .tar.bz2

> ID：12590650
> 
> 赞同：0
> 
> 时间：2012-09-25T20:37:39.837
> 
> 标签：python

我是安装在 Windows 7 上运行 Python 2.6 的 python 扩展的新手 - 我需要安装 Levenshtein 库

[http://code.google.com/p/pylevenshtein/downloads/detail?name=python-Levenshtein-0.10.1.tar.bz2&can=2&q=](http://code.google.com/p/pylevenshtein/downloads/detail?name=python-Levenshtein-0.10.1.tar.bz2&can=2&q=)

当我解压缩下载的文件时，它给了我以下文件列表：

*   复制
*   gendoc.sh
*   Levenshtein.c
*   Levenshtein.h
*   显现
*   消息
*   PKG-信息
*   自述文件
*   设置.cfg
*   安装程序.py
*   字符串匹配器.py

如何安装 Levenshtein 库，以便可以将其导入并使用到我的 python 代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:45:08.810

这是通过一些**研究**很容易找到的相当大的文档部分。

[http://docs.python.org/install/index.html](http://docs.python.org/install/index.html)

看来您将要运行：

```
python setup.py install --prefix="\Temp\Python" 
```

将模块安装到当前驱动器上的 \Temp\Python 目录。

更多信息：

> 如果您不选择安装目录（即，如果您只运行 setup.py install），那么 install 命令将安装到第三方 Python 模块的标准位置。
> 
> Windows 上的默认安装目录是 Python 1.6a1、1.5.2 及更早版本下的 C:\Program Files\Python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:45:18.057

假设你已经在你的 PATH 上安装了 Python，你可以这样做：

```
python setup.py install 
```

但是，它似乎有一个已编译的扩展，因此您可能还需要一个完整的 Windows 开发环境来安装它（它是一个源代码分发版）。因此，如果您不这样做，它可能无法正常工作。如果可以的话，最好的办法是找到一个 MSI 包。

# java - 同一个文件中有多个 java 类

> ID：12590658
> 
> 赞同：0
> 
> 时间：2012-09-25T20:38:18.627
> 
> 标签：java

我在处理一些 java 代码时遇到了问题：

我创建了一个名为 clsEnum 的类，我希望它不仅包含一个类。

```
enum EnumDocument
{
    DNI(1), RUC(5), Grupo(7),Sucursal(8);

    private int value;

    EnumDocument(int value){
        this.value = value;
    }

    public int getValue(){
        return this.value;
    }
}

enum EnumTypeRoleCredential
{
    Employee(81), Client(82), Supplier(83);
    private int value;

    EnumTypeRoleCredential(int value){
        this.value = value;
    }

    public int getValue(){
        return this.value;
    }
} 
```

是的，我知道，我忘了放主类（clsEnum），但在这种情况下我不想放它。这就是我希望它工作的方式。因此，当我在同一个包中的类中创建 enumDocument 对象或 EnumTypeRoleCredential 对象时，我没有任何问题，但是当我在另一个包中的另一个类中创建对象时，IDE（Eclipse juno ) 建议使用“public”，但是当你使用它时，我收到一个错误，指出该类需要自己的文件。

我曾经在 Visual Studio c#.net 中执行此操作。它可以用Java完成，还是我必须将必要的子类放入主类。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:42:02.513

*   在单个 Java 文件中，您可以有`at most`一个`public class`，如果存在，那么您的 java 文件的名称应该与您的`public class`名称相同。

因此，您只能`enums`公开其中一个，并且您的文件名应该是`public enum`带有`.java`扩展名的名称。

*   你的`public static void main`意志也会涉及到`public class`

*   而且，**这很重要 - 如果在一个文件中你有`enums`，`classes`并且`interfaces`所有这些，那么也只有其中一个是`public`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:42:07.847

在 Java 中，您最多可以拥有一个`public`类（文件名必须与该类名匹配）和任意数量的非公共类。`public`类一旦导入就可以在任何地方使用。非公共类只能在同一个包中使用。

这些都是规则，你无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-04T15:57:35.773

在单个 java 文件中，您可以有多个类，但只能有一个公共类，公共类的名称应与文件名相同。该公共课程可以在任何地方使用

# android - 使用 getApplicationContext 将上下文传递给标准 java 类会导致强制关闭

> ID：12590661
> 
> 赞同：1
> 
> 时间：2012-09-25T20:38:23.883
> 
> 标签：android, applicationcontext, android-context

我正在开发一个 android 应用程序，目前在将上下文从 ListFragment 传递给标准 Java 类时遇到问题。

我有一个名为 Common 的类，在构造函数中我传递了上下文，因此我可以执行各种常见任务，例如显示警报对话框，这样我就可以继续重用代码，而不必每次都为每个警报编写代码我需要的对话框。在我正在使用的标准活动中初始化类。

```
Common common = new Common(this); 
```

如果在扩展 Activity 的类中完成，上面的代码可以正常工作。但是，如果我想在扩展 ListFragment 的类中做同样的事情，这不起作用，所以我使用以下代码来初始化类

```
Common common = new Common(getActivity().getApplicationContext()); 
```

当上面的代码在 ListFragment 中执行时，当一个函数用于显示是/否警报对话框时，我得到一个强制关闭异常

```
FATAL EXCEPTION: main
android.view.WindowManager$BadTokenException: Unable to add window
--token null is not for an application 
```

下面是该类的构造函数的代码

```
public Common(Context context)
{
    this.context = context;
} 
```

重申一下，如果 Common 类是使用传递给构造函数的*this参数从扩展***Activity**的类初始化的，则 Common 类中的所有功能，包括 Yes/No 对话都可以正常工作。只有当我将**getActivity().getApplicationContext()**作为参数传递给构造函数时，才会收到此错误。

 ***作为一项测试，我还更改了一个扩展活动的类并使用 getApplicationContext 而不是使用它，我得到了同样的错误，所以它不一定特定于我使用 ListFragment。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:54:40.733

你不能`ApplicationContext`在你的情况下使用。而是使用`getActivity()`. Activity 是一个`Context`，因此您的`Common`类构造函数将得到满足。

但是你的`Common`类应该真的有`Common(Activity a)`构造函数。***

# android - offsetLeftAndRight() 究竟做了什么？

> ID：12590664
> 
> 赞同：9
> 
> 时间：2012-09-25T20:38:32.283
> 
> 标签：android, offset, android-view

offsetLeftAndRight() 究竟做了什么？文档说：“将此视图的水平位置偏移指定数量的像素”那么，这是否意味着如果视图的左侧位置假设为 50 并且在其上调用了 offsetLeftAndRight(20)，那么视图将移动 20 像素及其左侧位置将是 (50-20) 即 30？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T20:42:26.927

左右位置都将增加偏移量。因此，在您的示例中，左侧位置将更改为 50 + 20 = 70。

# node.js - Azure 未正确发布 Node.js 应用程序

> ID：12590666
> 
> 赞同：1
> 
> 时间：2012-09-25T20:38:37.943
> 
> 标签：node.js, azure, cloud, project, publish

### TL;博士

*   作为云服务托管在 Azure 上的 Node.js 应用。
*   发布失败（应用未上传），但似乎有效。

### 解释：

我在使用网站和云服务的 Windows Azure 上有一个帐户。我将我的网站移至云服务，以便能够使用自定义域。

搬家后，我使用 Azure cmdlet 发布我的 Node.js 网络服务器。在发布之前工作正常，通常需要 5 到 10 分钟才能完成。一旦发布，该网站将包含最新的内容。

我的问题是，现在发布不到 2 分钟，没有报错，也没有更新内容。**为什么我的应用没有发布它的内容？**

以下是我的发布输出：

```
PS C:\Projects\Azure\CloudServices\jwbsite\JWB> ls

    Directory: C:\Projects\Azure\CloudServices\jwbsite\JWB

Mode                LastWriteTime     Length Name
----                -------------     ------ ----
d----          9/8/2012  10:22 AM            bin
d----         9/12/2012   3:30 PM            controllers
d----         9/11/2012   1:16 PM            data
d----         9/12/2012   4:00 PM            extensions
d----         9/10/2012   2:37 PM            models
d----         9/12/2012   2:45 PM            node_modules
d----         9/12/2012   3:23 PM            public
d----          9/8/2012  10:28 AM            views
-a---         9/25/2012   3:44 PM        411 package.json
-a---         9/13/2012  11:14 AM        224 robots.txt
-a---         9/17/2012   2:45 PM        605 routes.js
-a---         9/17/2012  10:59 AM       1902 server.js
-a---         8/25/2012   1:28 PM       3251 Web.cloud.config
-a---         8/25/2012   1:28 PM       3251 Web.config

PS C:\Projects\Azure\CloudServices\jwbsite\JWB> Publish-AzureServiceProject

Publishing  to Windows Azure. This may take several minutes...

4:27:17 PM - Preparing runtime deployment for service 'jwbsite'
4:27:20 PM - Preparing deployment for jwbsite with Subscription ID: ABCDEFGH-IJKL-MNOP-QRST-UVWXYZ012345...
4:27:21 PM - Connecting...
4:27:27 PM - Verifying storage account 'jwbsite'...
4:27:27 PM - Uploading Package...
4:27:39 PM - Upgrading...
4:27:50 PM - Created Deployment ID: ABCDEFGHIJKLMNOPQRSTUVWXYZABCDE.
4:27:50 PM - Starting...
4:27:50 PM - Initializing...
4:27:51 PM - Instance JWB_IN_0 of role JWB is ready.
4:27:51 PM - Instance JWB_IN_1 of role JWB is ready.
4:27:51 PM - Instance JWB_IN_2 of role JWB is ready.
4:27:51 PM - Instance JWB_IN_3 of role JWB is ready.
4:27:52 PM - Created Website URL: http://jwbsite.cloudapp.net.
4:27:52 PM - Complete.

PS C:\Projects\Azure\CloudServices\jwbsite\JWB> 
```

让我知道，我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:06:55.510

如果其他人遇到此问题或 Google 将您发送到此处，我确实找到了错误的原因。

## 检查您的文件名/路径长度！

如果文件名太长，则不会将包上传到 Azure。我通过尝试发布到 Azure 的仿真发现了这一点，这给了我正确的错误。我不确定为什么在推送到真正的 Azure 实例时它不会给出错误。

> **Node.js 注意：**
> 
> 文件名/路径过长的主要来源是模块。通过 NPM 安装模块时，模块将安装当时不存在的依赖项。请务必查看您的模块文件结构并尝试对其进行精简（我正在编写一个脚本来为您平衡它）。

Azure 支持团队在试图解决这个令人困惑的问题方面提供了极大的帮助，他们与我一起工作了将近 2 个月，以使我的网站恢复正常运行。

如果您遇到相同或类似的问题，请尝试部署到 Azure 的本地仿真并查看您得到的错误。

我觉得这个错误很愚蠢，但希望我的愚蠢可以帮助避免别人的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-08T08:57:46.253

我有同样的问题，我使用这个模块来缩短我的路径 [https://www.npmjs.com/package/flatten-packages](https://www.npmjs.com/package/flatten-packages) 它解决了这个问题

# sftp - 在骆驼组件和路由内部保持 Sftp 连接打开

> ID：12590669
> 
> 赞同：0
> 
> 时间：2012-09-25T20:38:57.673
> 
> 标签：sftp, apache-camel, jsch

我编写了一个 Camel (2.10) 组件来执行 Sftp，因为我需要对连接进行更多的控制，而不是开箱即用的组件提供的。

我的路线看起来像这样：

```
from("direct:start")
    .to(startProcessor())       //1\. Start processor sets the connection parameters for myCustomSftpComp producer
    .to("myCustomSftpComp")     //2\. Uses Jsch, connects to server, gets the file, add to exchange, closes connection
    .to(somePostProcessor())    //3\. Does something with the file
    .to("file://....");         //4\. Write the file 
```

这一切都运作良好。

我的问题是在第 2 步，此时我的文件非常小，我将它们缓冲到内存中，将字节数组添加到 Exchange 正文中，并对其进行传递和处理，直到它被文件端点写入。

当然这对于大文件来说是不可持续的，我需要将 InputStream 引用添加到交换中。我的问题是我关闭并清理了与 myCustomSftpComp 内的服务器的连接，因此当交换到达后处理器和文件端点时，将无法再访问它。

所以基本上我需要一些方法来保持连接打开，直到文件被写入并从路由定义中关闭组件内的服务器连接，这听起来很不整洁，所以我愿意接受其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:08:58.723

我不确定您为什么要编写自己的 SFTP 组件，因为常规 FTP 组件可以开箱即用地处理 SFTP。

如果您要在第三步中进行一些处理，仅传递输入流仍然会让您在内存中传递内容。特别是，这将是一个问题，因为 InputStream 只能读取一次（虽然可以启用 StreamCaching，但会消耗内存）。

FTP 组件可以做的是将文件本地下载到磁盘上的临时文件中。然后将文件句柄传递给它。从那个，你可以很容易地让 Streams 用它做一些事情，并在完成后将它写入一个新文件。

看看这个： [http ://camel.apache.org/ftp2.html#FTP2-UsingLocalWorkDirectory](http://camel.apache.org/ftp2.html#FTP2-UsingLocalWorkDirectory)

# ubuntu - Yum 没有可用的套餐

> ID：12590670
> 
> 赞同：0
> 
> 时间：2012-09-25T20:38:58.620
> 
> 标签：ubuntu, memcached, yum

我一直在尝试安装 memcached 服务器，但遇到了很多麻烦。现在我正在关注本教程[点击](http://www.webdeveloperjuice.com/2010/01/25/10-baby-steps-to-install-memcached-server-and-access-it-with-php/)。本教程使用 yum 安装软件包，例如“yum install libevent”。问题是，对于每个包，我都会收到此错误：

```
No package libevent available.
Nothing to do 
```

我需要对 yum 做一些额外的配置吗？到目前为止，我唯一做的就是 sudo apt-get install yum。

我正在使用 ubuntu 10.10。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:44:05.740

Yum 主要是 Red Hat 的软件包配置工具。在 Ubuntu 中安装软件包的正确方法是使用 apt-get，

```
sudo apt-get install libevent-1.4-2 memcached libmemcached-dev 
```

# iphone - 我如何知道滑动手势识别器的力度？

> ID：12590671
> 
> 赞同：4
> 
> 时间：2012-09-25T20:39:02.690
> 
> 标签：iphone, xcode, ipad, cocos2d-iphone

我想使用滑动手势识别器将图像向右或向左移动，我已经在使用 CCMoveTo 函数移动图像，但我不知道如何更快或更慢地移动图像取决于力量刷卡。

如果用户进行强力滑动，则图像应该比用户进行软滑动时移动得更快。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T20:43:43.900

A`UISwipeGestureRecognizer`是一次性的东西。当设备检测到手势并在此之后完成时，它会触发。

如果您想了解有关手指运动的更多信息，您应该检查[UIPanGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T23:47:15.107

这就是该物业`velocity`的`UIPanGestureRecognizer`用途。您可以在 Paul Hegarty 的 cs193p 08 课（我认为）中看到如何使用它的示例。这是从 iTunes U 下载[的链接](http://itunes.apple.com/br/itunes-u/ipad-iphone-application-development/id473757255)

# ios - 初始 FBSession 检查始终失败

> ID：12590675
> 
> 赞同：4
> 
> 时间：2012-09-25T20:39:25.183
> 
> 标签：ios, facebook

我有一个应用程序，用户可以在其中选择登录 FB。我的代码主要基于 FB 的教程，并且在大多数情况下，应用程序和 FB 集成按预期工作。我遇到的问题是该应用程序不记得从启动到启动用户选择将应用程序连接到 FB。我检查了 AppDelegate.m 以检查缓存的 FBSession：

```
 if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded) {
        // Yes, so just open the session (this won't display any UX).
        NSLog(@"The state is IS 'State created token loaded'");
        [self openSessionWithAllowLoginUI:NO];
    } else {
        // No, display the login page.
        NSLog(@"The state is NOT 'State created token loaded'");
        [self openSessionWithAllowLoginUI:YES];
    } 
```

每次我启动应用程序时，控制台中都会显示“状态不是'已加载状态创建的令牌'”行。这让我觉得我没有做正确的事情以使 FB 登录从启动到启动持续存在。

我真的可以在这里使用一些建议。需要做什么来确保“FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded”在应用启动时为真？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:13:58.507

如果您在应用程序启动时拥有此代码，请注意：

FBSession.activeSession

可能还没有设置。您想要检查缓存令牌的操作类似于：

```
if (![self openSessionWithAllowLoginUI:NO]) {
    [self openSessionWithAllowLoginUI:YES];
} 
```

如果存在缓存令牌，则第一次调用“NO”将同步返回 true 值。如果没有缓存的令牌，则返回 no。此时，您可以强制登录 UX 发生。

# c - 如果我知道变量的地址，那么变量类型的字节大小的目的是什么？

> ID：12590679
> 
> 赞同：1
> 
> 时间：2012-09-25T20:39:42.943
> 
> 标签：c, size, byte, dereference, variable-address

通过知道变量的地址，我并没有得到处理变量字节大小的全部目的。例如，假设我知道 int 变量存储在哪里，假设它存储在 address 中`0x8C729A09`，如果我想获取存储在该地址中的 int ，我可以取消引用该地址并获取存储在其上的数字。

那么，知道变量字节大小的目的究竟是什么？为什么变量是否具有`4 bytes`（存在`int`）或者`8 bytes`我是否能够通过取消引用来获取变量的值`address`？我问这个，因为我正在取消引用某个地址，我认为我需要通过一个 for 循环来获取变量（通过知道起始地址，即变量的地址，以及变量的大小以字节为单位），但每当我这样做时，我只会得到其他也被声明的变量。

一点上下文：我正在开发一个名为 Pin 的工具，并获取在另一个程序中声明的全局变量的地址。

for 案例看起来像这样：

```
for(address1 = (char *) 0x804A03C, limit = address1 + bytesize; address1 < limit; address1++)
      cout <<  *(address1) << "\n"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T21:01:52.353

Michael Krelin 给出了一个非常简洁的答案，但我认为我可以进一步扩展它。

在任何语言中，不仅仅是 C 语言，出于各种原因，您都需要知道大小：

*   这决定了可以存储的最大值
*   这些值的数组将占用的内存空间（1000 个字节将为您提供 250 个整数或 125 个长整数）。
*   当您想将一个值数组复制到另一个数组中时，您需要知道使用了多少字节来分配足够的空间。
*   虽然您可以取消引用指针并获取值，但您可以在该值的不同部分取消引用指针，但前提是您知道它由多少字节组成。您可以通过仅获取前两个字节来获取 int 的高值，并通过获取最后两个字节来获取低值。
*   不同的架构可能对不同的变量有不同的大小，这会影响上述所有点。

编辑：

此外，您可能需要知道给定变量的位数肯定是有原因的。如果您想要 32 个布尔值，有什么比使用 32 位的单个 int 更好的变量呢？然后您可以使用一些常量来创建指向每个位的指针，现在您有了一个布尔“数组”。这些通常称为位域（如果我错了，请纠正我）。在编程中，每一个细节都很重要，但并非所有应用程序都如此。只是想这可能是一个有趣的思考练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:45:27.900

答案很简单：大多数类型的内部表示需要不止一个字节。为了取消引用指针，您（您或编译器）需要知道应该读取多少字节。

在使用字符串时也要考虑它，你不能总是在 terminating 上中继`\0`，因此你需要知道你必须读取多少字节。这些示例是类似`memcpy`or的函数`strncmp`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:42:33.397

假设你有一个变量数组。在不知道其大小的情况下，您在哪里找到非零索引处的变量？你为非零长度的变量数组分配了多少字节？

# mysql - MySQL数据库设计：用户和事件表

> ID：12590682
> 
> 赞同：0
> 
> 时间：2012-09-25T20:39:50.347
> 
> 标签：mysql, sql, database, database-design

我有一个关于数据库设计的问题。我正在制作一个网页，用户可以在其中创建活动（即用户“Jane”创建了一个名为“我的生日派对”的活动）。其他用户可以加入此活动，因此用户“John”可以参加 Janes 活动“我的生日派对”。为了让 Jane 看到谁和有多少客人（用户）来参加她的生日聚会，是否有必要在用户和事件之间创建一个关系表？

假设有 100 位客人（用户）参加，这将需要我在将每个用户链接到活动的关系表中创建 100 行。否则可以这样做吗？

提前谢谢，如果有什么不清楚的请告诉我:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:41:44.247

是的，您需要一个表 users、一个表 events 和一个表 users_events（包含 user_id、event_id 列）。这将是正常的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:41:28.417

你是对的 - 最好的方法是拥有一个专用的连接表（例如**event_attendees**）。

这允许多对多关系（一个用户可以加入许多事件，一个事件可以有许多用户）。

您可以在事件表中有一个名为**creator_id**的列，它指的是创建事件的用户，因为这比将其存储在与会者的专用联接表中要好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:44:43.913

是的，您需要`JOIN`为用户和事件创建一个表。与此类似：

```
create table users
(
    id int,
    name varchar(10) -- add other fields as needed
);

create table events
(
    id int,
    name varchar(10),
    e_owner_id int, -- userId of who created the event
    e_date datetime -- add other fields as needed
);

create table users_events  -- when user wants to attend a record will be added to this table
(
    u_id int,
    e_id int
); 
```

然后查询，你会使用这样的东西：

```
select *
from users u
left join users_events ue
    on u.id = ue.u_id
left join events e
    on ue.e_id = e.id; 
```

# razor - IF 条件 { } 中值之间的空白（空白、空白）空间

> ID：12590683
> 
> 赞同：4
> 
> 时间：2012-09-25T20:39:57.507
> 
> 标签：razor, if-statement, whitespace, webmatrix

简单的问题和可能简单的答案，但我已经尝试了很多东西。

`How can I insert a white space between the 2 values ?`

我试过引号、双引号、去掉“;”、 等

```
@if(@providerData.CompanyName != null){

    @providerData.CompanyName;WHITESPACE;@providerData.CompanyType;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T20:42:11.560

您可以使用`Html.Raw`方法在此处放置一个空格

```
@if(@providerData.CompanyName != null)
{
  @providerData.CompanyName@Html.Raw(" ")@providerData.CompanyType    
} 
```

或者，您可以使用`@:`而不是`Html.Raw`

```
@if(@providerData.CompanyName != null)
{
  @providerData.CompanyName@: @providerData.CompanyType    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T13:20:26.240

现在这是一个非常古老的问题，但是对于该问题还有另一种可能的解决方案 -`<text>`为此目的使用标签。此标签本身不会打印到您的输出中，但会保留您在其中的格式。

```
@if(@providerData.CompanyName != null)
{
    <text>@providerData.CompanyName @providerData.CompanyType</text>
} 
```

我认为这种方式为您想要实现的目标提供了最简洁的语法。

# javascript - 使用 WebGL 将两个画布混合到一个上

> ID：12590685
> 
> 赞同：6
> 
> 时间：2012-09-25T20:40:03.467
> 
> 标签：javascript, html5-canvas, glsl, webgl

我想要做的是将两个画布混合到一个画布上，用于我正在创建的绘图应用程序。我非常了解 Javascript，但我真的不知道从哪里开始使用 WebGL，而且由于这不是一项非常艰巨的任务，我假设如果我不使用它会产生更快的处理速度另一个库，如 Three.js 或其他类似的库。

我已经拥有的是用户将在其上绘制的画布（我们称它们为画布 A 和 B），它们都是隐藏的，而画布 C 正在显示。

```
<canvas id='C' width=800 height=600></canvas>

<canvas id='A' width=800 height=600 style='display:none'></canvas>
<canvas id='B' width=800 height=600 style='display:none'></canvas> 
```

我已经为用户完成了主要的绘图应用程序来选择要绘制的图层并在其上绘制，但是我如何能够使用 WebGL 使用某种混合模式（即：乘法）将两个图层混合在一起作为用户继续使用 WebGL 编辑画布？

起初我尝试在这里关注另一篇文章：[https](https://stackoverflow.com/a/11596922/1572938) ://stackoverflow.com/a/11596922/1572938但我很困惑。

如果有人想在我的 jsfiddle 上填补另一篇文章的空白，那将非常有效！[http://jsfiddle.net/W3fVV/1/](http://jsfiddle.net/W3fVV/1/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T02:23:46.767

这里有一个用图像绘图的例子： [https ://webglfundamentals.org/webgl/lessons/webgl-image-processing.html](https://webglfundamentals.org/webgl/lessons/webgl-image-processing.html)

WebGL 不关心源是图像、画布还是视频。所以改变样本

```
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, someImage); 
```

到

```
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, someCanvas); 
```

然后编写一个片段着色器来混合 2 个纹理，如

```
precision mediump float;

// our 2 canvases
uniform sampler2D u_canvas1;
uniform sampler2D u_canvas2;

// the texCoords passed in from the vertex shader.
// note: we're only using 1 set of texCoords which means
//   we're assuming the canvases are the same size.
varying vec2 v_texCoord;

void main() {
     // Look up a pixel from first canvas
     vec4 color1 = texture2D(u_canvas1, v_texCoord);

     // Look up a pixel from second canvas
     vec4 color2 = texture2D(u_canvas2, v_texCoord);

     // return the 2 colors multiplied
     gl_FragColor = color1 * color2;
} 
```

您需要设置 2 个纹理并告诉您的 GLSL 程序您将它们放在哪些纹理单元上。

```
function setupTexture(canvas, textureUnit, program, uniformName) {
   var tex = gl.createTexture();

   updateTextureFromCanvas(tex, canvas, textureUnit);

   // Set the parameters so we can render any size image.
   gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
   gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
   gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
   gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);

   var location = gl.getUniformLocation(program, uniformName);
   gl.uniform1i(location, textureUnit);
}

function updateTextureFromCanvas(tex, canvas, textureUnit) {
  gl.activeTexture(gl.TEXTURE0 + textureUnit);
  gl.bindTexture(gl.TEXTURE_2D, tex);
  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);
}

var tex1 = setupTexture(canvas1, 0, program, "u_canvas1");
var tex2 = setupTexture(canvas2, 1, program, "u_canvas2"); 
```

样品在这里：

```
function main() {
  var canvas1 = document.getElementById("canvas1");
  var canvas2 = document.getElementById("canvas2");
  var ctx1 = canvas1.getContext("2d");
  var ctx2 = canvas2.getContext("2d");    
  ctx1.fillStyle = "purple";
  ctx1.arc(64, 64, 30, 0, Math.PI * 2, false);
  ctx1.fill();
  ctx2.fillStyle = "cyan";
  ctx2.fillRect(50, 10, 28, 108);

  // Get A WebGL context
  var canvas = document.getElementById("webgl");
  var gl = canvas.getContext("webgl");
  if (!gl) {
    return;
  }

  // setup GLSL program
  var program = twgl.createProgramFromScripts(gl, ["2d-vertex-shader", "2d-fragment-shader"]);
  gl.useProgram(program);

  // look up where the vertex data needs to go.
  var positionLocation = gl.getAttribLocation(program, "a_position");
  var texCoordLocation = gl.getAttribLocation(program, "a_texCoord");

  // provide texture coordinates for the rectangle.
  var texCoordBuffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
      0.0,  0.0,
      1.0,  0.0,
      0.0,  1.0,
      0.0,  1.0,
      1.0,  0.0,
      1.0,  1.0]), gl.STATIC_DRAW);
  gl.enableVertexAttribArray(texCoordLocation);
  gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);

  // lookup uniforms
  var resolutionLocation = gl.getUniformLocation(program, "u_resolution");

  // set the resolution
  gl.uniform2f(resolutionLocation, canvas1.width, canvas1.height);

  // Create a buffer for the position of the rectangle corners.
  var buffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
  gl.enableVertexAttribArray(positionLocation);
  gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

  // Set a rectangle the same size as the image.
  setRectangle(gl, 0, 0, canvas.width, canvas.height);

    function setupTexture(canvas, textureUnit, program, uniformName) {
       var tex = gl.createTexture();

       updateTextureFromCanvas(tex, canvas, textureUnit);

       // Set the parameters so we can render any size image.
       gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
       gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
       gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
       gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);

       var location = gl.getUniformLocation(program, uniformName);
       gl.uniform1i(location, textureUnit);
    }

    function updateTextureFromCanvas(tex, canvas, textureUnit) {
      gl.activeTexture(gl.TEXTURE0 + textureUnit);
      gl.bindTexture(gl.TEXTURE_2D, tex);
      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);
    }

    var tex1 = setupTexture(canvas1, 0, program, "u_canvas1");
    var tex2 = setupTexture(canvas2, 1, program, "u_canvas2");

  // Draw the rectangle.
  gl.drawArrays(gl.TRIANGLES, 0, 6);
}

function setRectangle(gl, x, y, width, height) {
  var x1 = x;
  var x2 = x + width;
  var y1 = y;
  var y2 = y + height;
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
     x1, y1,
     x2, y1,
     x1, y2,
     x1, y2,
     x2, y1,
     x2, y2]), gl.STATIC_DRAW);
}

main();
```

```
canvas {
    border: 2px solid black;
    width: 128px;
    height: 128px;
}
```

```
<script src="https://twgljs.org/dist/3.x/twgl.min.js"></script>
<!-- vertex shader -->
<script id="2d-vertex-shader" type="x-shader/x-vertex">
attribute vec2 a_position;
attribute vec2 a_texCoord;

uniform vec2 u_resolution;

varying vec2 v_texCoord;

void main() {
   // convert the rectangle from pixels to 0.0 to 1.0
   vec2 zeroToOne = a_position / u_resolution;

   // convert from 0->1 to 0->2
   vec2 zeroToTwo = zeroToOne * 2.0;

   // convert from 0->2 to -1->+1 (clipspace)
   vec2 clipSpace = zeroToTwo - 1.0;

   gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

   // pass the texCoord to the fragment shader
   // The GPU will interpolate this value between points.
   v_texCoord = a_texCoord;
}
</script>
<!-- fragment shader -->
<script id="2d-fragment-shader" type="x-shader/x-fragment">
    precision mediump float;

    // our 2 canvases
    uniform sampler2D u_canvas1;
    uniform sampler2D u_canvas2;

    // the texCoords passed in from the vertex shader.
    // note: we're only using 1 set of texCoords which means
    //   we're assuming the canvases are the same size.
    varying vec2 v_texCoord;

    void main() {
         // Look up a pixel from first canvas
         vec4 color1 = texture2D(u_canvas1, v_texCoord);

         // Look up a pixel from second canvas
         vec4 color2 = texture2D(u_canvas2, v_texCoord);

         // return the 2 colors multiplied
         gl_FragColor = color1 * color2;
    }
</script>
<!-- fragment shader -->
<script id="aa2d-fragment-shader" type="x-shader/x-fragment">
precision mediump float;

// our texture
uniform sampler2D u_canvas1;
uniform sampler2D u_canvas2;

// the texCoords passed in from the vertex shader.
varying vec2 v_texCoord;

void main() {
   gl_FragColor = texture2D(u_canvas1, v_texCoord);
}
</script>
<canvas id="canvas1" width="128" height="128"></canvas>
<canvas id="canvas2" width="128" height="128"></canvas>
<canvas id="webgl" width="128" height="128"></canvas>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T15:29:39.217

我认为只使用 canvas 2D API 会更简单。

您可以先在画布 C 中绘制画布 A，然后在画布 C 中绘制画布 B 之前更改画布 C 的全局不透明度。

您还可以使用更改画布混合方式[`globalCompositeOperation`](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation)

```
var canvasA = document.getElementById('C');
var canvasB = document.getElementById('C');

// The target canvas
var canvasC = document.getElementById('C');
var ctx = canvasC.getContext('2d');
ctx.drawImage(canvasA, 0,0);
ctx.globalAlpha = 0.5;
ctx.drawImage(canvasB,0, 0); 
```

# c# - 如何使用 linq 轻松删除多个进程

> ID：12590689
> 
> 赞同：0
> 
> 时间：2012-09-25T20:40:32.123
> 
> 标签：c#, linq

我可以说两个进程：记事本和 taskmgr 打开。我想杀死这两个或几个更多的进程我该怎么做？到目前为止，我通过谷歌搜索想出了这个：

```
Process.GetProcesses().Where(p => p.ProcessName == "notepad,taskmgr").ToList().ForEach(y => y.Kill()); 
```

不确定如何区分上述两个进程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T20:45:08.367

该 linq 查询似乎仅在其名称为“记事本，taskmgr”时才查找进程。要同时获取两者，请使用如下查询：

```
Process.GetProcesses().Where(p => p.ProcessName == "notepad" || p.ProcessName == "taskmgr").ToList().ForEach(y => y.Kill()); 
```

如果您要添加更多进程，您可能需要执行以下操作：

```
var processNamesToKill = new List<string> { "notepad", "taskmgr", "someotherprocess" };
Process.GetProcesses().Where(p => processNamesToKill.Contains(p.ProcessName)).ToList().ForEach(y => y.Kill()); 
```

然后，您可以将其他进程添加到该列表中。至于找出你找到了什么，在你的 ForEach 中，你可以在需要的地方访问名称`y.ProcessName`并在有条件的情况下使用它。

编辑：`.exe`如果需要，添加到这些进程名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T20:44:24.110

创建一个包含要杀死的进程的列表或数组，然后检查列表中的进程名称

```
List<string> killme = new List<string> { "notepad", "taskmgr" }

Process.GetProcesses().Where(p => killme.Contains(p.ProcessName)).ToList().ForEach(y => y.Kill()); 
```

一个班轮，在一个被删除的答案中：

```
Process.GetProcesses().Where(p => new[] {"notepad", "taskmgr"}.Contains(p.ProcessName)).ToList().ForEach(y => y.Kill()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T20:44:37.357

你想这样做吗？

```
Process.GetProcesses().Where(p => p.ProcessName == "notepad" || p.ProcessName == "taskmgr")
    .ToList().ForEach(y => y.Kill()); 
```

如果我是你，我会做的就是一次只做一个名字。任何阅读代码的人都更容易理解。

```
class Program
{
    static void Main(string[] args)
    {
        killProcess("notepad.exe");
        killProcess("taskmgr");
    }

    public static void killProcess(string name)
    {
        foreach (Process process in Process.GetProcessesByName(name))
        {
            process.Kill();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T20:45:32.663

如果你的 linq 的其余部分可以工作，那么 where 应该是这样的

```
... Where( p => p.ProcessName == "notepad" || p.ProcessName == "taskmgr" ) ... 
```

否则，您可能需要创建一组要终止的进程名称，例如

```
var set = new HashSet<string>() { "notepad.exe", "taskmgr.txt", "someotherthing.exe" };
... linq .. Where( p=> set.Contains( p.ProcessName ) )... 
```

或集合上的其他各种连接操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T20:45:33.703

```
 var processesToKill = new [] {"notepad", "iexplorer"};
        var processes = Process.GetProcesses().Where(p => processesToKill.Contains(p.ProcessName)).ToList();
        processes.ForEach(p => p.Kill()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T20:45:45.193

如果您有要杀死的进程列表，则可以使用`Contains`，因为这样做`p => p.ProcessName == "notepad,taskmgr"`不起作用（没有进程将具有名称“记事本，taskmgr”，添加逗号没有特殊含义）

所以改为尝试类似的东西

```
var processesToKill = new Collection<string> { "notepad", "taskmgr" };

foreach (var process in Process.GetProcesses().Where(p => processesToKill.Contains(p)))
{
    process.Kill();
} 
```

# java - 更改元素排序索引的有效方法

> ID：12590692
> 
> 赞同：0
> 
> 时间：2012-09-25T20:41:02.670
> 
> 标签：java, algorithm, google-app-engine, data-structures, google-cloud-datastore

我的非 sql 数据库中有一个非常大的元素列表。

每个元素都有一个从 1 到 N 的排序顺序。这种排序顺序指定了结果在表单上的显示方式。

当在 UI 中触发顺序更改时（将元素 i 放在位置 j 中），我需要更新它们之间的所有实体。如果元素 1 成为最新的，我需要进行 N 次更新。

有没有一种有效的方法可以降低此操作的成本？有没有一种聪明的方法来索引排序值？

一些考虑：

*   我正在重新设计我的应用程序，以便能够使用更智能的解决方案重新索引实体。
*   写入（更新）的成本是提取（读取 1 个实体）的 +-4 倍。
*   列表很大，不适合内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:20:11.917

1.  重新索引您的实体。将 order 属性设置为 double。
2.  每次用户将实体移动到新位置时，在其他两个实体之间为其分配一个新的 order 属性：

    entityA.setOrder((entityB.getOrder() + entityC.getOrder())/2);

3.  保存实体 A（属性“订单”应该被索引）。

4.  当用户请求从 10000 到 10200 的实体时，使用排序顺序在您的 order 属性上构建一个查询。从 10000 到 10200 检索结果：

    datastore.prepare(q).asList(FetchOptions.Builder.withOffset(10000).limit(200));

5.  永远不要重新索引您的实体。每次您保存实体时，Datastore 都会为您执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T01:48:23.743

I'm assuming you're storing entities in the GAE datastore and letting the datastore index the entities for you. The datastore uses a linked-list like index, but you don't have access to the linked list.

I don't think there's a perfect mechanism, but instead of sorting your N items from 1..N, I'd use a large sparse set of numbers (for example, use floats), and evenly distribute your entities across that range. Whenever you sort an item, simply generate a new index value that exists between the two new neighbors.

If you hit a worst case scenario, where the neighbors are too close together, generate new indexes for the neighbors, and so forth. A more advanced system might guarantee that there is a minimum amount of space between entities after every re-sort, and reindex a few extra neighbors proactively.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T21:03:17.807

在我看来，您当前的模型没有其他选择。像索引集合一样，您必须在移动元素时“重新索引”元素：减少或增加集合的一部分

更改模型可能是满足您要求的解决方案。您可以尝试将其设计为链表，其中删除/移动/插入操作“更便宜”。每个元素都知道它的下一个（简单）或下一个和上一个元素（双）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-25T21:24:27.067

您可以将排序顺序和 UI 数据与每个实体中的其他大量数据分开。后者可以保持不变。

嗯，如果你有这个：

```
entitles = [bigdata1, bigdata2, bigdata3, ...]
order_numbers = [2, 3, 1, ...] 
```

order_numbers 可以是排序的结果，也可以是任意用户定义的值。

那么你有

```
display_order = [2, 0, 1, ...] 
```

表示首先显示 bigdata3。如果 UI 无论如何都想更改订单，只有 order_numbers 和 display_order 需要更改，而不是 entitles。这是我的理解。

# javascript - IE 在页面加载后添加的内容上报告不正确的 .height()

> ID：12590695
> 
> 赞同：1
> 
> 时间：2012-09-25T20:41:25.353
> 
> 标签：javascript, internet-explorer

我正在实现无限滚动，这意味着我将大块内容附加到 DOM 中（通过 jquery 和 javascript）。

为了让用户感觉流畅，我们需要进行一些手动滚动以保持内容窗口“在同一个位置”，尤其是当我们在用户看到的内容前面添加文本时。为了实现这一点（添加一个块，然后将内容向下滚动到我们添加的确切数量），我们需要能够确定我们刚刚添加的内容的高度。这就是 Firefox 和 IE 不同的地方。Firefox 正确处理了这个问题，并滚动到我的内容中的正确位置，但是当真实值约为 2400 像素时，IE 报告的高度约为 600 像素。

```
var h1 = $(document).height(); //take the height before appending
$('#textChunks').prepend(newContent); // prepend stuff on top
var h2 = $(document).height();//take the height again...
alert(h2-h1); 
```

IE 中的警报值始终是错误的（相差 3 倍），无论我如何进行测量，它都是一致的（我可以改为测量 DOM 中的“newContent”的高度，而 IE 仍然报告它错误，但始终如一）。甚至 .scrollIntoView() 之类的其他“内置”javascript 函数在 IE 中似乎也恰好偏离了这个数量。

作为健全性检查，我可以在我的桌面上创建一个独立的 html 文件，其中包含我的内容示例，并且在这种情况下它可以工作。所以问题似乎只是在页面加载后添加的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:05:59.870

答案是怪癖模式！

一个很好的参考：[http ://webdesign.about.com/cs/doctype/a/aaquirksmode.htm](http://webdesign.about.com/cs/doctype/a/aaquirksmode.htm)

作为快速测试，我更改了本地设置（IE 中的 F12，然后将“文档模式”从 Quirks 更改为 IE9 标准），这解决了我的滚动问题！

如果没有 doctype 声明，IE 会默认为 quirks 模式，这显然会导致页面加载后添加到 DOM 的元素报告不正确的高度，这自然会导致滚动不可靠。另请注意，我在框架内的框架内工作，因此为我的内容指定 DOCTYPE 的最佳位置是在 OUTERMOST FRAME 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:46:24.217

使用 HTMLElement.offsetHeight 获取任何 HTMLElement 的“真实”高度。

# javascript - 在不同的 html 页面中使用 mootools 的 DOMREADY 时出现问题

> ID：12590698
> 
> 赞同：0
> 
> 时间：2012-09-25T20:41:41.697
> 
> 标签：javascript, html, dom, mootools

在使用来自不同页面的不同 ID 时，我遇到了 DOMREADY 的问题。例如

JS

```
var clickFunction = function(){
//put whatever you want to happen in here
alert('this element now recognizes the click event');
}

window.addEvent('domready', function() {
$('id_name').addEvent('click', clickFunction);
});

window.addEvent('domready', function() {
$('id_2').addEvent('click', clickFunction);
}); 
```

HTML案例1

```
<body>    
<div id="id_name"> <a onclick="javascript:void(0);">link1</a></div>
<div id="id_2"> <a onclick="javascript:void(0);">link2</a></div> 
</body> 
```

单击link2时它工作正常

案例2

```
<body>   
<div id="id_name"> <a onclick="javascript:void(0);">link1</a>     </div> 
</body> 
```

当点击link1时它工作正常

案例3

```
<body>   
<div id="id_2"> <a onclick="javascript:void(0);">link2</a>     </div> 
</body> 
```

它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:49:08.137

因为您实际上并没有保护自己免受异常的影响。

```
window.addEvent('domready', function() {
$('id_name').addEvent('click', clickFunction);
});

window.addEvent('domready', function() {
$('id_2').addEvent('click', clickFunction);
}); 
```

首先，你不需要 2 个 domready 函数。它们堆叠起来，但你可以使用一个。

```
window.addEvent('domready', function() {
    $('id_name').addEvent('click', clickFunction);
    $('id_2').addEvent('click', clickFunction);
}); 
```

但是，您所做的仍然是错误的，因为它在没有任何检查的情况下耦合到 DOM。

你假设`$('id_name')`将返回一个对象，然后你立即调用它的 .addEvent 方法。它适用于案例 1，因为这是在运行时评估的第一行。

在您的第二个文件中，如果不会到达 id_2 add 事件，因为 id1 将尝试在非元素上调用 addEvent （它不在 dom 中），所以为空。这会导致异常，并且您的 javascript 永远不会完成。

你有3种保护自己的方法。

## 1\. 使用元素集合。

```
document.getElements('#id_2,#id_name').addEvent('click', clickFunction); 
```

这将尝试同时获得两者，但它会在迭代结果时对其中一个或一个都不满意。如果选择器返回 0 个元素，它根本不会循环

## 2\. 传递对 var 的引用，看看它是真还是空

```
var id_name = document.id('id_name');
if (id_name) {
    id_name.addEvent('click', clickFunction);
}

// or write as
id_name && id_name.addEvent(); 
```

## 3\. 将事件委托给父元素。

好处是，只有 1 个事件绑定可以处理 n 个元素，这些元素稍后可能通过 ajax 或动态元素构造函数出现。

例如。

```
$('menu').addEvent('click:relay(#id_name,#id_2)', function(event, element){
    // do something.
}); 
```

# ant - 如何告诉蚂蚁应用任务的目的地

> ID：12590716
> 
> 赞同：1
> 
> 时间：2012-09-25T20:42:37.923
> 
> 标签：ant

这是我的蚂蚁应用任务：

```
<apply executable="${7z.exec}" failonerror="true">
  <arg value="x"/>
  <fileset dir="${distdir}">
    <include name="**/*.zip"/>
  </fileset>
</apply> 
```

7z.exec 是 7z.exe 可执行文件的绝对路径。我如何告诉 7zip 将解压缩的文件存放到与 .zip 相同的文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:24:05.900

您需要[为 eXtract 命令使用](https://superuser.com/questions/95902/7-zip-and-unzipping-from-command-line)[7z`-o`](https://superuser.com/questions/95902/7-zip-and-unzipping-from-command-line)开关，并使用 Ant[映射器](http://ant.apache.org/manual/Types/mapper.html)来获取 zip 的路径。Ant[`apply`任务](http://ant.apache.org/manual/Tasks/apply.html)有一个 targetfile 元素，它允许您在编写任务的命令行时更加灵活。导致类似：

```
<apply executable="${7z.exec}" failonerror="true">
  <arg value="x"/>
  <srcfile />
  <targetfile prefix="-o" />
  <mapper type="regexp" from="^(.*)/(.*\.zip)" to="\1" />

  <fileset dir="${distdir}">
    <include name="**/*.zip"/>
  </fileset>
</apply> 
```

# javascript - Javascript 部分

> ID：12590722
> 
> 赞同：0
> 
> 时间：2012-09-25T20:43:06.317
> 
> 标签：javascript, html

我有一个我想使用的网站，它始终具有相同的部分和相同的 id 以及我想要显示的所有内容。我对 javascript 不是很了不起，我想知道如何删除除特定部分之外的所有内容。

最好的方法是只做一个遍历 DOM 中所有元素的循环并删除除我想要保留的 id 部分之外的所有内容吗？如果我采用这种方法，如何防止它删除该部分内的所有元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:48:25.603

也许另一种更有效地做到这一点的方法是：

```
document.body.innerHTML = document.getElementById( 'saveContentId' ).innerHTML 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:48:58.073

删除一个节点包括其所有子节点，因此您无需遍历整个文档中的所有元素。我看到两种可能性：

*   获取该部分，删除当前父级中的所有兄弟，然后沿着 DOM 树向上直到`document.body`，同时删除所有兄弟。
*   获取该部分并将其与文档分离。然后清除`document.body`并重新附加该部分

第一个解决方案对我来说似乎更干净，所以这里有一些示例代码：

```
function removeEverythingBut(el) {
    while (el != document.body) {
        var par = el.parentNode;
        for (var i=par.childNodes.length-1; i>=0; i--)
             if (par.childNodes[i] != el)
                  par.removeChild(par.childNodes[i]);
        el = par;
    }
}

// usage:
removeEverythingBut(document.getElementById("my-section")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:47:34.203

您可以只保存您想要的元素并删除所有其他元素。我也推荐使用 Jquery

# ruby-on-rails - 在 Ruby 1.9 中访问类变量的正确方法是什么？

> ID：12590723
> 
> 赞同：22
> 
> 时间：2012-09-25T20:43:15.483
> 
> 标签：ruby-on-rails, ruby

我正在尝试设置一些类变量来存储 Rails 应用程序中的路径（但我认为这更像是一个红宝石问题）

基本上我的课看起来像这样

```
class Image < ActiveRecord::Base

   @@path_to_folder = "app/assets"
   @@images_folder = "upimages"
   @@path_to_images = File.join(@@path_to_folder, @@images_folder)

end 
```

但是当我尝试`@@path_to_images`从我的控制器访问时`Image.path_to_images`，我得到一个 NoMethodError

当我尝试使用时`Image.class_eval( @@path_to_images )`，我得到`uninitialized class variable @@path_to_images in ImagesController`

我四处搜寻，我所看到的都说这些会起作用，所以我对此感到非常困惑

更重要的是，我尝试像这样用 ruby​​ 控制台定义简单的类

```
 class Bidule
     @@foo = "foo"
     Bar = "bar"
 end 
```

因此，我认为，我尝试了所有可能的方式（包括以前的 2 种）来访问它们，但我总是不会遇到异常

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-25T20:52:04.873

Rails 为这个功能提供了类级别的属性访问器

尝试

```
class Image < ActiveRecord::Base
  cattr_accessor :path_to_folder
  @@path_to_folder = "app/assets"
end 
```

然后访问 path_to_folder 类变量只需使用

```
Image.path_to_folder 
```

但是人们总是建议避免类变量，因为它在继承中的行为。所以你可以使用像这样的常量

```
class Image < ActiveRecord::Base
   PATH_TO_FOLDER = "app/assets"
end 
```

然后你可以像访问常量一样

```
Image::PATH_TO_FOLDER 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-31T20:35:44.677

虽然我一般不会推荐它，但您可以通过将字符串传递给`class_eval`如下方式来访问类变量：

```
Image.class_eval('@@path_to_folder') 
```

至少在更高版本的 Ruby 中。

但是请注意，类变量与子类层次结构中的最上层类相关联。对于像这样的 ActiveRecord 子类，这意味着这些类变量确实存在于`ActiveRecord::Base`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-24T14:23:54.110

如果您不能或不想扩展类使用：

```
Image.class_variable_get(:@@path_to_images) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-25T19:11:17.750

最好的方法是使用方法设置和获取值。下面是一个示例代码

```
class Planet
  @@planets_count = 0

  def initialize(name)
    @name = name
    @@planets_count += 1
  end

  def self.planets_count
    @@planets_count
  end  

  def self.add_planet
    @@planets_count += 1
  end

  def add_planet_from_obj
    @@planets_count += 1
  end
end

Planet.new("uranus")
Plant.add_planet
obj = Planet.new("earth")
obj.add_planet_from_obj 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-25T20:52:03.807

类变量在 Ruby 应用程序中很少使用，因为它们有很多限制，而且往往会违背正确的面向对象设计的原则。

几乎在每种情况下，类变量都可以替换为适当的常量、类方法或两者兼而有之。

您的示例可能更好地描述为：

```
class Image < ActiveRecord::Base
  PATH_TO_FOLDER = "app/assets"
  IMAGES_FOLDER = "upimages"
  PATH_TO_IMAGES = File.join(PATH_TO_FOLDER, IMAGES_FOLDER)
end 
```

类变量是相关类的私有变量，不会渗透到子类，并且难以从外部上下文访问。使用常量允许使用以下内容：

```
image_path = Image::PATH_TO_FOLDER 
```

在某些情况下，类变量比替代变量更合理，但这种情况通常很少见。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-11T16:08:27.743

您可以通过将其包装在类方法中来做到这一点，如下所示：

```
def self.path_to_images
  @@path_to_images
end 
```

但我应该提一下，你应该尽量避免在 rails 中使用类变量

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-03T07:20:33.703

我会这样修改它：

```
class Image < ActiveRecord::Base

  @@path_to_folder = "app/assets"
  @@images_folder = "upimages"
  @@path_to_images = File.join(@@path_to_folder, @@images_folder)

  def initialize
  end 
  ...
  def self.path_to_folder
    @@path_to_folder
  end
end 
```

您在这里所做的是将类变量变成一个方法，因此您现在可以使用 .method 名称调用进行访问。由于这是一个类变量，因此您只能在类本身上调用它，而不能在类的实例上调用。您收到“NoMethodError”，因为您使用不存在的方法调用类变量。上面的代码在您所说的行中定义了此方法：

```
def self.path_to_folder
  @@path_to_folder
end 
```

这现在可以工作了：

```
Image.path_to_folder 
```

# sql - 在 SQL 中使用人类可读的主键安全吗？

> ID：12590724
> 
> 赞同：5
> 
> 时间：2012-09-25T20:43:19.633
> 
> 标签：sql, primary-key, human-readable

我想知道我是否可以将人类可读的主键用于相对少量的数据库对象，这些对象将描述大都市地区。

例如，使用“washington_dc”作为华盛顿特区都会区的 pk，或使用“nyc”作为纽约市的 pk。

**大量**对象将外键到这些都市区对象，我希望能够通过查看他们的数据库记录来判断一个人或企业的位置。

我只是担心，因为我的直觉告诉我这可能是对良好做法的严重犯罪。

那么，我“被允许”做这种事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T20:50:48.300

这一切都取决于应用程序 - 自然主键在表面上很有意义，因为它们是人类可读的，并且在向最终用户显示数据时不需要任何连接。

然而，自然主键*往往*大于`INT`（或什至`BIGINT`） suragate 主键，并且很少有域没有自然主键更改的危险。举个例子，一个城市改名并不是一件非常罕见的事情。当一个城市的名称发生变化时，您会留下一个需要`city`作为外键触及每个实例的更新，或者一个不再反映现实的主键（“数据显示列宁格勒，但它确实是圣彼得堡。” )

总而言之，自然主键：

1.  占用更多磁盘空间（*大部分*时间）
2.  更容易改变（在*大多数*情况下）
3.  更具人类可读性（只要它们不改变）

#1 和 #2 是否被 #3 充分抵消取决于您正在构建什么以及它的用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T21:00:01.747

我认为这个问题

[主键的设计标准是什么？](https://stackoverflow.com/questions/3632726/what-are-the-design-criteria-for-primary-keys)

很好地概述了您可能做出的权衡。我认为给出的答案是正确的，但它的简洁掩盖了一些重要的想法，你实际上必须做些什么才能找出适合你的东西。

（从那个答案）考虑主键的标准是：

> *   独特性
> *   不可约性（没有键的子集唯一标识表中的一行）
> *   简单（以便关系表示和操作更简单）
> *   稳定性（不应经常更改）
> *   熟悉度（对用户有意义）

对于它的价值，我通过选择字符串作为主键而遇到缩放问题的次数与我使用自动增量键遇到冗余数据问题的次数大致相同。在我看来，自动增量键出现的问题更糟，因为您通常不会很快看到它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:49:26.417

主键必须是唯一且不可变的，只要满足这两个要求，人类可读的字符串就可以用作 PK。

在您给出的示例中，这听起来不错，因为城市不会更改其名称（并且在极少数情况下它们会更改名称，那么您可以通过足够的努力来更改 PK 值）。

使用数字 PK 而不是字符串的主要原因之一是性能（另一个是利用自动递增的 ID，请参阅 参考资料`IDENTITY`）。如果您预计文本 PK 每秒有超过 100 个查询，那么我会转而使用`int`或`bigint`作为 PK 类型。当您达到该级别的数据库大小和复杂性时，您往往会停止使用 SSMS 直接编辑表数据并使用您自己的工具，这可能会执行 JOIN，因此您会在与城市的数字 PK 相同的结果集中获得城市名称.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T20:54:10.193

你被允许。

这通常不是最佳做法。

数字 - 首选自动递增键。它们易于维护，并允许对输入表单和其他界面进行编码，用户不必将新字符串视为键...

想象一下：应该是华盛顿，还是washington_dc或dc或washingtondc ..等。

# asp.net-mvc-4 - 如何访问当前用户 ASP.net MVC4 的SimpleMemberShipprovider 属性

> ID：12590728
> 
> 赞同：1
> 
> 时间：2012-09-25T20:43:34.420
> 
> 标签：asp.net-mvc-4

我在 MVC4 中有一个 razor .cshtml 视图，我想打印我的 userprofile 类的一个字段。我知道我可以从 User.Identity.Name 获取用户名，但我不知道如何在部分中访问当前登录用户的其他属性。我是否需要在我的控制器中执行此操作并在我的视图中引用它？如果是这样，是否有一个可用于所有视图的控制器，所以我没有在每个控制器中设置这个变量？是否有一种简单的方法可以访问视图中 UserProfile 模型类中定义的当前用户属性？给出一些上下文。我有我的模型...

```
 public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public string UserName { get; set; }

        //Added to round out requirements for site user profile
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Site { get; set; }
    } 
```

我需要访问视图中的名字。如果我在控制器中获取它，那么我将需要在所有控制器中执行它，因为这是所有页面的页面部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:36:59.813

我决定将它放在会话变量中，因为它不是关键、敏感或影响应​​用程序的稳定性。在我的登录或注册控制器中，我将会话变量设置为...

```
var context = new UsersContext();
var curuser = context.UserProfiles.First(p => p.UserName == model.UserName);
Session["FName"] = curuser.FirstName; 
```

我从 Pro ASP.NET MVC 和[这篇](https://stackoverflow.com/questions/12352218/how-do-i-manage-profiles-using-simplemembership)文章中得到了这个。在我的 Razor 视图中，我使用了从[这篇](https://stackoverflow.com/questions/4381189/accessing-a-session-object-from-razor-layout-cshml)文章中得出的这个。

```
@HttpContext.Current.Session["FName"].ToString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:57:29.097

在为部分视图提供服务的控制器操作中，将 FirstName 放在 ViewBag 中。
如果您想要返回更多属性，则为它们创建一个 ViewModel 并使控制器操作返回该属性。

# java - 数组迭代，跳跃

> ID：12590730
> 
> 赞同：0
> 
> 时间：2012-09-25T20:43:37.660
> 
> 标签：java, arrays, hash, if-statement, modulo

以下是插入我自己的哈希表时进行碰撞检测的方法的内部。我正在使用小的测试数字并试图让我的逻辑正确，变量哈希设置为 0，table.length 为 10。

```
 else
    {
                    //problem here   
        int initial=(hash-1)%table.length;

   while (table[hash]!=null)
        {
            hash+=1;
            System.out.println(initial);

            if (hash==table.length)
            {
                hash=0;
            }

            if (hash==initial)
            {
                System.out.println("FULL!");
                break;
            } 
```

变量 initial 必须是我当前的索引（哈希）之前的索引。我的问题是，如果哈希为 0，则初始值需要设置为 9。我认为这会起作用，但例如当哈希设置为 0 时我得到 -1。第一个 IF 语句循环返回到第一个索引，例如，如果您从 5 点或某处开始，第二个是 for 当您检查了所有索引并且它们都已满时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:48:10.177

由于您使用`%`，因此没有溢出的风险，因此您只需将行更改为

```
int initial = (hash - 1 + table.length) % table.length; 
```

解决这个问题。

# php - 在 PHP 中序列化引用

> ID：12590734
> 
> 赞同：3
> 
> 时间：2012-09-25T20:43:47.330
> 
> 标签：php, serialization, reference

我想知道为什么我在 php 中的序列化不能按预期工作：

```
<?
$x = "whatever...";
$y = array(&$x, "test, 1-2, 1-2...", &$x);
$yy = unserialize(serialize(&$y));
$y[0] = "blah";
echo($yy[0]); // prints 'whatever', was expecting 'blah'
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T20:45:06.783

被`&`忽略`serialize`。

似乎您正在尝试从 to 创建符号表别名（引用）`y`，`yy`但您不能在此处执行此操作。当您传递`&y`给 时`serialize`，它不会将传递的值视为引用或在线序列化。此外，它返回一个全新的值，而不是对原始值的引用。您必须单独创建别名：

```
$yy = &$y;
$yy = unserialize(serialize($y)); 
```

我也不确定您要做什么，或者它与序列化有什么关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T19:09:50.017

正如 Explosion Pills 的回答[所说](https://stackoverflow.com/a/12590756/445295)，`unserialize`“返回一个全新的值”。 **但是，序列化将保持“相对”引用。** （从技术上讲，PHP 中没有相对引用这样的东西，但它是一种概念化它的好方法。）

如果你在一个数组中收集你的引用和引用变量，序列化数组将保存引用关系。它不会保留原始引用，但会在`unserialize`.

```
$vars = array();
$vars['x'] = 'initval';
$vars['xref'] =& $vars['x'];
$vars2 = unserialize( serialize( $vars ) );
$vars2['x'] = 'newval';
echo $vars2['xref']; // prints "newval" 
```

对于对象中的内部引用，它的工作方式相同。

# razor - 局部视图设计中的局部视图

> ID：12590736
> 
> 赞同：0
> 
> 时间：2012-09-25T20:44:13.687
> 
> 标签：razor, asp.net-mvc-4, partial-views

我遇到了一个更基本的问题，即如何处理我想要构建的网页；因此标题可能不是很准确。

我的页面布局如下： ![我正在尝试构建的页面布局](../Images/88e0ea8321c3b243d3b6b64abb09ce13.png)

我的计划是有一个包含“第 1 页”和“第 2 页”按钮的主视图。

在“页面 1”中，用户可以选择选项 1（默认选择）或“选项 2”。每个选项选择在网格中显示不同的数据。所以我拥有的网格是局部视图。我在第 1 页这样渲染它：

```
<div id="gridContainer" class="gridContent">
  @Html.Partial("_DynamicGrid", Model)
</div> 
```

我想将第 1 页和第 2 页呈现为主页中的部分页面。我的代码是：

```
<div id="pagesPartial" class="span10">
    @{ Html.RenderPartial("Page1", Model);}
</div> 
```

该页面可在加载时找到。

我不知道下一步该怎么做

a.）如何删除网格并在“Option2”上加载一个新的单击

b.) 如何在“页面 2”按钮单击时加载“页面 2”视图。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:25:03.187

对于它的价值，我会发布我最终做了什么。

我创建了一个局部视图，其中包含屏幕截图左侧的导航按钮。（第 1 页和第 2 页）。然后为每个页面创建视图，分别在这些视图中呈现导航部分视图。

就这么简单，我仍然花了一些时间才弄清楚。

# android - android多点触控不能同时移动2个指针

> ID：12590738
> 
> 赞同：0
> 
> 时间：2012-09-25T20:44:15.827
> 
> 标签：android, multi-touch

我的游戏中有一个奇怪的问题。我正在使用 2 个操纵杆，一个用于射击/瞄准，一个用于移动我的角色。出于某种原因，我的多点触控方法一次只记录一个动作。当我按下时，第二个指针被注册，但我`ACTION_MOVE`只适用于第一个指针。这很奇怪，因为这意味着它确实需要多于一个指针，但它*不能同时移动多于一个指针*。我在 gamedev.stackexchange 上问过这个问题，它已经活跃了大约一周，得到了几个答案，但没有任何东西可以让它 100% 工作。我已经自己尝试了几个小时。

onTouch 方法的代码：

```
 //global variables
    private int movePointerId = -1;
    private int shootingPointerId = -1;

public void update(MotionEvent event) {

    if (event == null && lastEvent == null) {
        return;
    } else if (event == null && lastEvent != null) {
        event = lastEvent;
    } else {
        lastEvent = event;
    }   

    // grab the pointer id 
    int action = event.getAction();
    int actionCode = action & MotionEvent.ACTION_MASK;
    int actionIndex = event.getActionIndex();
    int pid = action >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
    int x = (int) event.getX(pid);
    int y = (int) event.getY(pid); 
    String actionString = null;

    switch (actionCode)
    {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_POINTER_DOWN:

            actionString = "DOWN";
            try{
                if(x > 0 && x < steeringxMesh + (joystick.get_joystickBg().getWidth() * 2)
                   && y > yMesh - (joystick.get_joystickBg().getHeight()) && y < panel.getHeight()){
                        movingPoint.x = x;
                        movingPoint.y = y;
                        movePointerId = pid;
                        dragging = true;
                        //checks if Im pressing the joystick used for moving
                    }
                 else if(x > shootingxMesh - (joystick.get_joystickBg().getWidth()) && x < panel.getWidth()
                         && y > yMesh - (joystick.get_joystickBg().getHeight()) && y < panel.getHeight()){
                        shootingPoint.x = x;
                        shootingPoint.y = y;
                        shootingPointerId = pid;
                        shooting=true;
                        //checks if Im pressing the joystick used for shooting
                    }
                }catch(Exception e){

                }
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
        case MotionEvent.ACTION_CANCEL:
        case MotionEvent.ACTION_OUTSIDE:

           if( pid == movePointerId ){
              movePointerId = -1;
              dragging = false;
              }
           else if( pid == shootingPointerId ){
              shootingPointerId = -1;
              shooting=false;
              }
            actionString = "UP";
            break;  
        case MotionEvent.ACTION_MOVE: // this is where my problem is

          if( pid == movePointerId ) {
                        movingPoint.x = x;
                        movingPoint.y = y;
          } else if( pid == shootingPointerId ) {
                        shootingPoint.x = x;
                        shootingPoint.y = y;
          }
                actionString = "MOVE";
                break;

    } 
```

如果我打印`actionString`并`pid`显示移动时它只检查`pid=0`，但是当我按下 ( `ACTION_POINTER_DOWN`) 时，我可以看到它确实注册了另一个`pid`，这真的让我感到困惑。

为了更清楚起见，当我按下第二个指针时，例如我的射击杆，它会占据我按下的位置，即使我同时移动另一个操纵杆，但它会一直停留在那里直到我放开了另一个操纵杆。进一步证明它确实注册了超过 1 次触摸和超过 1 次`pid`。

如果您需要任何进一步的解释，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:22:39.477

我对您的代码进行了一些更改，我认为应该可以解决问题。至少它对我来说很好......

```
 //global variables 
private int movePointerId = -1; 
private int shootingPointerId = -1; 

public void update(MotionEvent event) { 

if (event == null && lastEvent == null) { 
    return; 
} else if (event == null && lastEvent != null) { 
    event = lastEvent; 
} else { 
    lastEvent = event; 
}    

// grab the pointer id  
int action = event.getAction(); 
int actionCode = action & MotionEvent.ACTION_MASK; 
int pid = (action & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
int fingerid = event.getPointerId(pid);

//int actionIndex = event.getActionIndex(); 
//int pid = action >> MotionEvent.ACTION_POINTER_INDEX_SHIFT; 
int x = (int) event.getX(pid); 
int y = (int) event.getY(pid);  
String actionString = null; 

switch (actionCode) 
{ 
    case MotionEvent.ACTION_DOWN: 
    case MotionEvent.ACTION_POINTER_DOWN: 

        actionString = "DOWN"; 
        try{ 
            if(x > 0 && x < steeringxMesh + (joystick.get_joystickBg().getWidth() * 2) 
               && y > yMesh - (joystick.get_joystickBg().getHeight()) && y < panel.getHeight()){ 
                    movingPoint.x = x; 
                    movingPoint.y = y; 
                    //movePointerId = pid; 
                    movePointerId = fingerid; 
                    dragging = true; 
                    //checks if Im pressing the joystick used for moving 
                } 
             else if(x > shootingxMesh - (joystick.get_joystickBg().getWidth()) && x < panel.getWidth() 
                     && y > yMesh - (joystick.get_joystickBg().getHeight()) && y < panel.getHeight()){ 
                    shootingPoint.x = x; 
                    shootingPoint.y = y; 
                    //shootingPointerId = pid; 
                    shootingPointerId = fingerid; 
                    shooting=true; 
                    //checks if Im pressing the joystick used for shooting 
                } 
            }catch(Exception e){ 

            } 
        break; 
    case MotionEvent.ACTION_UP: 
    case MotionEvent.ACTION_POINTER_UP: 
    case MotionEvent.ACTION_CANCEL: 
    case MotionEvent.ACTION_OUTSIDE: 

       if( fingerid == movePointerId ){  //changed this line
          movePointerId = -1; 
          dragging = false; 
          } 
       else if( fingerid == shootingPointerId ){  //changed this line
          shootingPointerId = -1; 
          shooting=false; 
          } 
        actionString = "UP"; 
        break;   
    case MotionEvent.ACTION_MOVE: // this is where my problem is 

      if( fingerid == movePointerId ) { //changed this line
                    movingPoint.x = x; 
                    movingPoint.y = y; 
      } else if( fingerid == shootingPointerId ) { //changed this line
                    shootingPoint.x = x; 
                    shootingPoint.y = y; 
      } 
            actionString = "MOVE"; 
            break; 

} 
```

这样做的原因是，在某些设备上，当您松开一根手指时，指针 ID 可能会发生变化。例如，第一根手指接收到指针 id 1，然后按下第二根手指，接收到指针 id 2，然后如果松开手指 1，则手指 2 的指针 id 可能会变为 1。这听起来可能有点混乱，但你应该避免上面这个手指ID的问题。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-14T18:00:14.473

**指针**有两个不同的属性可用于识别它们：

*   **index**：它的范围从 0 到比*getPointerCount()*返回的值小一。**它仅在当前事件的处理过程中有效**。

*   **id**：此属性唯一标识指针，**并保证指针在其整个生命周期内保持不变**。

在您的代码中，您没有正确检索**索引**和**ID**信息。基本上，您使用索引来识别多个事件中的指针，这是完全错误的，因为索引可能会有所不同，这就是您在应用程序中遇到的情况。简而言之，**您应该使用 id 来识别指针**。

正如我所提到的，他们检索**索引**和**id**的方式是错误的。检索这些属性的正确方法是：

```
int action = event.getAction();
int actionCode = action & MotionEvent.ACTION_MASK;
int index = (action & MotionEvent.ACTION_POINTER_INDEX_MASK) >>
             MotionEvent.ACTION_POINTER_INDEX_SHIFT;
int pid = event.getPointerId(index); 
```

您可以参考此处了解更多信息：[MotionEvent | 安卓开发者](http://developer.android.com/reference/android/view/MotionEvent.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:52:00.283

`private int movePointerId = -1;`并且`private int shootingPointerId = -1;`，它们不应该具有不同的值吗？我真的不知道，但是一旦我遇到问题，我就更改了值并且它起作用了。

# android - 避免 Android Lint 抱怨未翻译的字符串

> ID：12590739
> 
> 赞同：127
> 
> 时间：2012-09-25T20:44:18.117
> 
> 标签：android, android-resources, android-lint

是否可以指定`value-*` 目录内文件中的字符串故意不翻译成其他语言？我有一堆所有语言都通用的字符串，不需要翻译，所以我`unlocalized-strings.xml`在目录中创建了一个文件`values`。运行 Android Lint 来检查它一直说缺少一些翻译的问题。我不想要要对整个项目禁用此检查，我只想在某些 XML 文件中禁用它。这可能吗？

```
"title_widget_updater_service" is not translated in de, en, en-rUS, it

Issue: Checks for incomplete translations where not all strings are translated
Id: MissingTranslation

If an application has more than one locale, then all the strings declared in one language     
should also be translated in all other languages.

By default this detector allows regions of a language to just provide a subset of the 
strings and fall back to the standard language strings. You can require all regions to 
provide a full translation by setting the environment variable 
ANDROID_LINT_COMPLETE_REGIONS. 
```

如何定义这个*未本地化*的字符串*区域？*

 ** * *

## 回答 #1

> 赞同：237
> 
> 时间：2012-12-10T08:32:57.533

它是您的字符串文件`ignore`中命名空间的属性`tools`，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources
  xmlns:tools="http://schemas.android.com/tools"
  tools:ignore="MissingTranslation" >

  <!-- your strings here; no need now for the translatable attribute -->

</resources> 
```

* * *

## 回答 #2

> 赞同：162
> 
> 时间：2012-09-25T23:54:53.460

我不知道如何忽略所有文件，但您可以使用以下字符串逐个字符串执行此操作：

```
<string name="hello" translatable="false">hello</string> 
```

* * *

## 回答 #3

> 赞同：153
> 
> 时间：2015-10-13T09:09:09.843

添加到`build.gradle`：

```
android {
     lintOptions {
        disable 'MissingTranslation'
    }
} 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-05-05T10:21:30.070

我知道有3种方法：

按值应用修改值：`translatable="false"`在`<string>`定义上设置属性：

```
<string name="account_setup_imap" translatable="false">IMAP</string> 
```

如果你有很多不应该翻译的资源，你可以把它们放在一个名为的文件中`donottranslate.xml`，lint 会认为所有这些资源都是不可翻译的。

[我在浏览Hackers Keyboard 项目源](https://code.google.com/p/hackerskeyboard/source/browse/)时发现的另一种方法：
您可以将前缀添加`donottranslate-`到资源文件中。与前面的示例一样，lint 将考虑所有这些不可翻译的资源。
在您的情况下，您可以替换`unlocalized-strings.xml`为`donottranslate-strings.xml`. 它似乎有效，但我还没有找到任何关于这个技巧的文档。

请参阅：[Android 工具项目网站：不可翻译的字符串](http://tools.android.com/recent/non-translatablestrings)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-09-24T23:57:35.257

这是一个用于禁用这个致命的 Lint 错误的 Android Studio 解决方案：

![在此处输入图像描述](../Images/c6fda3a6ec07e92cf868fe2425be17ce.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-25T21:26:25.067

我认为你需要而不是禁用 lint 是用属性标记它们

```
translatable="false" 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-07-01T14:02:50.623

创建一个文件名以“ *donottranslate* ”开头的资源文件（例如*donottranslate.xml*、*donottranslate_urls.xml*等），lint 在检查丢失的翻译时将完全忽略其字符串。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-29T09:51:10.930

如果你想关闭 lint 检查丢失的翻译，你可以去

“项目属性 -> Android Lint 首选项 -> 选择 MissingTranslation -> 切换到忽略严重性”，

希望这对其他人有帮助，因为我刚遇到这个问题:)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-17T23:31:59.337

`resValue`另一种方法是使用or将字符串添加到 gradle 文件中`buildConfigField`。像这样的东西：

```
buildTypes {
    debug {
        buildConfigField "string", "app_name1", "App Name"
        resValue "string", "app_name2", "App Name"
    }
    release {
        minifyEnabled true
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        buildConfigField "string", "app_name1", "App Name"
        resValue "string", "app_name2", "App Name"
    }
} 
```

用途：

```
// buildConfigField
BuildConfig.APP_NAME1

// resValue
getString(R.string.app_name2) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-10T18:21:23.853

为避免在 Android Studio 中出现警告，请打开 Preferences ==> Inspections，取消选中“Incomplete translations”。但它不会影响 Gradle 构建。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-03-06T08:37:56.507

还有“翻译编辑器”（右击string.xml“打开翻译编辑器”）。

然后选中字符串上的“不可翻译”框。

[https://developer.android.com/studio/write/translations-editor](https://developer.android.com/studio/write/translations-editor)*

# php - 在ubuntu中用php或其他语言编辑文件

> ID：12590750
> 
> 赞同：-1
> 
> 时间：2012-09-25T20:44:49.773
> 
> 标签：php, python, ubuntu

有什么方法可以编辑我的/etc/apache2/sites-available/default，创建一个目录并通过php或ubuntu网络服务器上的任何其他在线脚本在网站上重新加载apache 2？

谢谢克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:15:26.203

您的意思是通过您正在创建的某种网络界面？查看`shell_exec`功能。您可以使用它来创建文件夹，例如`shell_exec('mkdir foldername')`和`shell_exec('/etc/init.d/apache2 restart')`

# audio - 自定义主题中的 Tumblr 新音频播放器

> ID：12590751
> 
> 赞同：0
> 
> 时间：2012-09-25T20:44:51.840
> 
> 标签：audio, tumblr

我正在努力帮助我儿媳的 Tumblr 博客。当她尝试添加音频链接时，她得到以下信息......

> 您正在使用不包含 Tumblr 新音频播放器代码的自定义主题。您可以切换到预设主题或将新的音频代码添加到自定义主题的 HTML（适用于高级用户）。

我创建了一个带有预设主题的博客，并将代码与她的代码进行了比较，发现它非常不同。如此之多，以至于我不确定要更改什么。

我可以通过将 div class="post" div 中的 block:Audio 块替换为以下内容来消除上述消息...

```
{block:Audio}
   <section class="top audio">
   {AudioPlayerBlack}
   </section>
{/block:Audio} 
```

预设主题中还有很多其他音频参考，但我不确定放在哪里或需要什么。

我还需要做些什么。我正在等待她进行测试，但与此同时，有人可以向我指出正确方法的说明，或者以其他方式帮助我吗？

谢谢，

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:14:12.227

我能够对其进行测试并且效果很好。

对于任何有同样问题的人，您可以简单地复制我的问题中的 block:audio 代码并替换您自定义主题博客中的 block:audio 代码。

约翰

# matlab - 只有当你两行的第一个元素相等时，我才想计算 matlab 中两行的平均值

> ID：12590752
> 
> 赞同：-3
> 
> 时间：2012-09-25T20:44:54.397
> 
> 标签：matlab, mean

> **可能重复：**
> [我想在matlab中计算两行的平均值](https://stackoverflow.com/questions/12588152/i-want-to-calculate-the-mean-of-two-rows-in-matlab)

我很抱歉重复自己，但我被困在一个点上。我有一个 1028 x 18 矩阵，其中一些整行具有 NaN 值。所以我需要比较相邻行的前两个元素并仅在前两个元素相等时计算平均值。D 是 1028 x 18 矩阵

```
 [m,n]=size(D);
    for i=1:m-1
    if D(i,1)==D(i+1,1)
    D=reshape(D, 2, m/2*n);
    D=(D(i,:)+D(i+1,:))/2;
    D=reshape(D, m/2, n);
     else
      end 
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:05:47.240

您可以根据您的定义使用有效行的逻辑索引`all(~diff(D(:,1:2)), 2)`，即第一列和第二列的元素，逐行差异为零。

然后，您可以使用此索引返回整数行索引或全局行均值矩阵中的索引。

```
index_row = 1:1:size(D, 1); % linear row index 
index_valid = all(~diff(D(:,1:2)), 2); % valid rows (logical)

mean_matrix = (D(1:end-1,:) + D(2:end,:))/2; % matrix of all means

% matrix of valid mean rows only
mean_matrix_valid = mean_matrix(index_valid,:); % logical index 
% linear index of valid rows, i.e. the pairs indexed (i, i+1)
index_row_valid = index_row(index_valid); % valid rows (int) 
```

例如与

```
D = [1 2 3 4 5; 1 1 1 1 1; 1 2 4 4 4; 1 2 3 3 3; 2 2 2 2 2; 2 2 3 3 3];

>> D = 
     1     2     3     4     5
     1     1     1     1     1
     1     2     4     4     4
     1     2     3     3     3
     2     2     2     2     2
     2     2     3     3     3 
```

你会得到，使用上面

```
>> index_valid =

     0
     0
     1
     0
     1

>> index_row_valid =

 3     5

>> mean_matrix_valid =

    1.0000    2.0000    3.5000    3.5000    3.5000
    2.0000    2.0000    2.5000    2.5000    2.5000 
```

分别是行 (3,4) 和 (5,6) 的均值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:52:14.087

我没有matlab，但逻辑是这样的

```
for row=0,row++

    if ( m[row,1]  == m[row+1,1])
    {
        mean1 = mean(m[row]);
        mean2 = mean(m[row+1]);
        mean = mean(mean1,mean2);
    }

end for 
```

/* 注意这个语法是不正确的，它只是给你一个想法 */

# c# - 4x4矩阵分解算法

> ID：12590760
> 
> 赞同：4
> 
> 时间：2012-09-25T20:45:13.063
> 
> 标签：c#, algorithm, matrix, game-engine

我正在做一个非常大的项目，我正在尝试重新审视和解决我已经有很长一段时间的问题：**4x4 矩阵分解算法**。

我正在编写一个商业游戏和模拟引擎。它是一个完全用 C# 编写的 API 和平台无关引擎。它使用 SlimDX 作为其 DirectX 后端，我可能会坚持使用 OpenTK 作为 OpenGL 后端。由于我不能依赖 DirectX 或 OpenGL 的数学库或数据类型（例如 Vector2、Vector3、Quaternion、Matrix 等），我不得不为引擎编写自己的类型。我已经完成了所有工作并进行了很好的优化；并且该 API 在语义上与 XNA 相似，因为我（和许多其他人）喜欢 XNA 的“感觉”并且觉得它非常优雅和强大。但不要混淆；本项目不使用XNA，也与XNA无关。无论如何，我能够处理除了一件事之外的所有事情...... Matrix.Decompose！

问题是，我根本不知道自己在做什么……我是一名自学成才的程序员，几乎所有其他方面都是自学的（商业金融、日间交易、德语等）。我就是这样学习的。我只有一年零一个学期的大学，所以我没有接受过复杂数学方面的正规教育。所以当我在维基百科上查看矩阵分解的公式时，它对我来说都是希腊语......一堆有趣的符号和图表对我来说毫无意义，哈哈。我一直是一个数学很差的学生，因为如果我不能将它实际应用到某些东西（比如游戏编程）上，我就会逃之夭夭。例如，我可以编写一个复杂的弹道物理模拟，但我什至无法帮助我的女朋友完成基本的物理和微积分作业，哈哈，因为它是一堆“高级” 理论数学，我无法弥合实用性或编程的差距。所以我很迷茫，不知道自己在做什么，非常沮丧......

具体来说，我需要做的是镜像 XNA Framework 和 DirectX 中的 Matrix.Decompose 的功能。我试图在 SlimDX 的源代码和 OpenTK 的源代码中寻找实现，但都没有实现！SlimDX 只是将工作推迟到本地 DirectX 库，而 OpenTK 甚至没有它。由于这个算法是一个巨大的、极其复杂的野兽，我并不感到惊讶，开发团队都不想实现自己的算法。但我不得不。

我已经尝试将 Wikipedia 和其他网站上的那些古怪公式转换为有效的 C# 算法，但我就是无法对它做出正面或反面。我真的需要在 C、C++ 或 C# 中看到它的工作实现，或者有人用伪代码或其他东西帮助我理解这一点。我只是无法掌握这些公式和“高级”数学理论。如果您可以提供任何帮助（链接、工作实现、一些伪代码等），我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:24:06.227

查看[DotNetMatrix](http://www.codeproject.com/Articles/5835/DotNetMatrix-Simple-Matrix-Library-for-NET)，它是一个 C# 库，用于执行所有类型的矩阵转换，包括[Cholesky 分解](http://en.wikipedia.org/wiki/Cholesky_decomposition)，我相信您正在寻找它。此外，还包括它的免费和源代码！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T21:08:05.740

您最好的选择是使用现有的矩阵库。例如，查看 ILNumerics。它支持许多常见的矩阵分解（没有一个'矩阵分解'）：http: [//ilnumerics.net/$FeatureList.html](http://ilnumerics.net/%24FeatureList.html)

那是商业许可证，但是因为您正在销售引擎，所以对您来说可能不会有问题。

免费的是[Math.NET](http://mathnetnumerics.codeplex.com/wikipage?title=Linear%20Algebra&referringTitle=Documentation)，但“分解和最小二乘问题”部分是空的，这让我相信他们还没有实现它。

# web-config - NuGet 包如何包含 app.config 和 web.config 的转换？

> ID：12590771
> 
> 赞同：15
> 
> 时间：2012-09-25T20:45:50.473
> 
> 标签：web-config, app-config, transform, nuget

我正在尝试创建一个 nuget 包，该包将添加一个 DLL 并在正确的配置文件中对其进行配置。该包可用于控制台/表单应用程序或 Web 应用程序，因此我想更新相应的配置文件，app.config 或 web.config。

.nu​​spec 文件中的我的文件部分包含该部分的以下内容。

```
 <file src="config.transform" target="content\app.config.transform"/>
    <file src="config.transform" target="content\web.config.transform"/> 
```

.nu​​pkg 文件确实包含内容文件夹内的两个转换。

当我通过管理 NuGet 包将我的包添加到 VS2010 中的项目时，唯一修改过的文件是 app.config 文件。Web.config 从未被触及。实际上，在具有现有 Web 配置的 Web 应用程序中，NuGet 将创建一个包含修改的 app.config 文件。

有没有办法做我想做的事情（如果有，怎么做）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T09:16:28.080

根据[相关的错误报告](http://nuget.codeplex.com/workitem/2550)，它应该已经按照您的意愿工作了。您正在运行最新版本的 NuGet 吗？

# svn - bitnami svn 设置

> ID：12590773
> 
> 赞同：0
> 
> 时间：2012-09-25T20:46:01.290
> 
> 标签：svn, tortoisesvn, bitnami

我有一个使用 Bitnami SVN 安装的 AWS 实例。我希望这将使设置源代码控制变得容易，但我在基本配置中苦苦挣扎。我尝试遵循这些指示： [http ://wiki.bitnami.org/Components/Subversion#How_to_start_with_Subversion_in_Amazon_EC2.3f](http://wiki.bitnami.org/Components/Subversion#How_to_start_with_Subversion_in_Amazon_EC2.3f)

*   开放3690端口
*   编辑 /opt/bitnami/repository/conf/svnserve.conf 以获得用户权限
*   在 /opt/bitnami/repository/conf/passwd 中添加密码
*   重新启动svn`sudo /opt/bitnami/ctlscript.sh restart subversion`

然而，这是我卡住的地方。现在我想将 repo 下载到我的 PC 上，并让它与 Eclipse（甚至还没有）一起玩得很好，这样我就可以在服务器上存储我在本地拥有的代码。但我不知道如何与我的电脑同步。我安装了 Tortoise SVN，我右键单击一个文件夹并选择 SVN Repo-browser，我尝试连接，`http://ec2-###-##-###-###.compute-1.amazonaws.com/subversion/`但我没有看到任何内容。我试图添加一个测试文件，但我似乎无法提交它。我明白了

提交失败（详情如下）：POST 请求在响应中返回了无效的 XML：第 3 行的 XML 解析错误：格式不正确（无效令牌）（/subversion/!svn/me）

我错过了什么？

另外，作为一个方面，颠覆是默认回购吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:23:55.507

您可以使用 svn 或 http 访问 subversion。如果您想使用 http 连接，则无需打开端口 3690 或修改 svnserve.conf 进行用户身份验证。

对于 http 访问：

*   在 /opt/bitnami/repository/conf/passwd 中添加密码
*   将 apache 配置为使用基本身份验证（编辑 /opt/bitnami/apache2/conf/httpd.conf 文件并在位置部分添加 Authxx 指令）

```
DAV svn    
SVNPath "/path/to/subversion/repository"
AuthType 基本
AuthName "Subversion 存储库"
AuthUserFile /opt/btinami/subversion/users.passwd
需要有效用户             

```

*   重启阿帕奇`sudo /opt/bitnami/ctlscript.sh restart apache`
*   使用连接`http://ec2-###-##-###-###.compute-1.amazonaws.com/subversion`

对于 svn 访问：

*   开放3690端口
*   编辑`/opt/bitnami/repository/conf/svnserve.conf`用户权限
*   重启svn`sudo /opt/bitnami/ctlscript.sh restart subversion`
*   使用字符串 svn://path/to/your/repository 连接

# xcode - iPhone Simulator 3.0 附带的最后一个 Xcode 版本是什么？

> ID：12590777
> 
> 赞同：0
> 
> 时间：2012-09-25T20:46:23.077
> 
> 标签：xcode, ios-simulator, osx-snow-leopard

我使用我在中文网页上找到的神秘软件包 iPhoneSimulatorSDK3_0.pkg 在 Snow Leopard 上的 Xcode 3.2.6 上安装了 iPhone Simulator 3.0，但模拟器一直说“iOS 模拟器找不到 SDK。SDK 可能需要重新安装”

所以，我需要安装提到的 Xcode 的完整版本

感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:30:03.647

[iPhone SDK 3.2 Final with Xcode 3.2.2](http://developer.apple.com/ios/download.action?path=/iphone/iphone_sdk_3.2__final/xcode_3.2.2_and_iphone_sdk_3.2_final.dmg) for Snow Leopard (10.6.0) 内置 iOS Simulator 3.0

# android - 从电脑打开时，Android 访问数据库错误数据库磁盘映像格式错误

> ID：12590780
> 
> 赞同：0
> 
> 时间：2012-09-25T20:46:30.527
> 
> 标签：android

我希望有人能帮助我解决这个问题。我有一个存储在 sdcard 中的 SQLITE 3 数据库文件。从我的 android 应用程序使用数据库时，应用程序运行正常没有问题。问题是我想使用其他程序从我的电脑打开该文件，但显示以下错误“数据库磁盘映像格式错误”

```
public class DBHelper{

private SQLiteDatabase database; 

public static DBHelper getInstance()
{
    if(instancia == null)
        instancia = new DBHelper();
    return instancia;
}

public SQLiteDatabase getWritableDatabase()
{
    database = SQLiteDatabase.openDatabase(nombre_fichero, null, SQLiteDatabase.OPEN_READWRITE);
    return database;
}

private SQLiteDatabase getReadableDatabase()
{
    database = SQLiteDatabase.openDatabase(nombre_fichero, null, SQLiteDatabase.OPEN_READONLY);
    return database;
}

private void close()
{
    database.close();
}

Select and insert parameters... 
```

我没有从 sqlitehelper 扩展，因为我需要来自 sdcard 的文件非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:49:26.653

您如何尝试将数据库放到您的电脑上？你在使用 Eclipse 吗？

如果是这样，请在 Eclipse 中运行您的应用程序，然后单击 Eclipse 屏幕右上角的 DDMS 按钮。导航到 mnt 目录中的 sdcard 并找到您的数据库。单击它，然后单击右上角的“从设备中提取文件”按钮。这会将数据库保存到您的电脑中，您可以在其他程序中打开它。我使用 sqliteman。

如果数据库在您的设备内部存储器中，则无法以这种方式访问​​它。我发现将数据库放到电脑上的唯一方法是创建一个活动来备份数据库，然后通过电子邮件将其发送给我。

# php - PHP. How to find the previous page?

> ID：12590783
> 
> 赞同：-2
> 
> 时间：2012-09-25T20:46:46.153
> 
> 标签：php

I would like to know what page redirected to the current page on my system.

For example. If the system stopped in the page *current.php*. How to know what page called *current.php*?

Is there a function to perform this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T20:49:10.860

`$_SERVER['HTTP_REFERER']` can contain the URL of the page the user agent was previously on, but it can be spoofed or empty.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:48:53.150

You don't have a reliable way of doing that.

If you're expecting the redirecting page to be on your server, you can set a `$_SESSION` variable to the current page on every page you visit, that way, you can check for it on the next page (before resetting it of course).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:58:41.317

Maybe there are better solutions, but you could use a hidden field inside a form to transfer this information between pages inside your system, or use GET vars in your URL. Rhis way you can keep track of certain states during page changes, that u are interested in. But u would also need to update every page to handle the additional variables.

# xdotool - 如何在 xdotool 中转义字符

> ID：12590786
> 
> 赞同：0
> 
> 时间：2012-09-25T20:46:47.987
> 
> 标签：xdotool

我有这个脚本来打开一个新的控制台，ssh 进入服务器，运行部署命令。

我将部署的版本传递给脚本

```
xdotool key ctrl+alt+t
sleep 3
xdotool type "ssh myserver"
xdotool key Return
sleep 10
xdotool type "password"
xdotool key Return
xdotool type "sh path-to-script/deploy.sh $1"
xdotool key Return 
```

我有几个问题，我已经尝试用谷歌搜索没有成功的解决方案。

*   字符`/`转换为`&`. 当我运行脚本时
*   在控制台中复制和粘贴它可以工作，但如果我将它作为 sh 文件运行则不行
*   $1 未评估

你能给我任何关于这项工作的指导吗？xdotool 不是强制性的，我会使用它的任何工作

**注意：由于公司的安全政策，我无法通过命令通过 ssh，并且如果我无法在***myserver*中进行设置，我也不知道该怎么做

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:41:26.153

这里有类似的问题： [http](http://code.google.com/p/semicomplete/issues/detail?id=13#c29)
://code.google.com/p/semicomplete/issues/detail?id=13#c29 试试：

```
xdotool type setxkbmap de
xdotool key Return
xdotool type "sh path-to-script/deploy.sh $1"
xdotool key Return 
```

* * *

如果你写一个脚本可能会更好：

```
#!/bin/bash
xterm -e "ssh myserver \"sh path-to-script/deploy.sh $1\"; sleep 5" 
```

并像这样调用它：

```
./theAboveScript.sh &
sleep 10
xdotool type "password"
xdotool key Return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:48:48.600

“期望”可能是一个很好的解决方案。

您可以使用您的参数作为脚本开始关注。

```
#!/usr/bin/expect -f
spawn ssh myserver;
expect "Password:";
send "password\n";
expect "me@myserver:~$";
send "sh path-to-script/deploy.sh $argv\n";
interact 
```*

# xml - 使用 xsl 将相同的命名空间添加到 xml

> ID：12590787
> 
> 赞同：1
> 
> 时间：2012-09-25T20:46:56.353
> 
> 标签：xml, xslt, soap

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:t1="http://mynamespace/A" xmlns:top="http://mynamespace/B" 
    xmlns:max="http://mynamespace/C"><soapenv:Body>
  <t1:Creditcard>
     <top:AutoPayenroll>
        <top:CustomerId>
           <max:CustName>Taylor</max:CustName>
           <max:CustID>1234</max:CustID>
        </top:CustomerId>
     </top:AutoPayenroll>
  </t1:CreditCard></soapenv:Body></soapenv:Envelope> 
```

需要将 CustID 更改为我所做的加密。但不知道如何插入

使用了这个 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:t1="http://mynamespace/A" xmlns:top="http://mynamespace/B"
  xmlns:max="http://mynamespace/C" version="1.0">
  <xsl:output method="xml"/><xsl:template match="/"> 
<xsl:apply-templates/>   </xsl:template>  <xsl:template match="//*[local-name()='CustID']"> 
<xsl:variable name="cleartxt" select="./text()"/>  
<!--got this encrypted data from my internal code-->  
<xsl:variable name="encdata" select="'jksdguasidgeiruh'"/>  
<xsl:element name="//*[local-name()='Pswd']"> 
  <xsl:value-of select="$encdata"/> 
</xsl:element>   </xsl:template>   <xsl:template match="*"> 
<xsl:copy> <xsl:copy-of select="@*"/>  
  <xsl:apply-templates/> 
</xsl:copy>   </xsl:template> </xsl:stylesheet> 
```

响应应该如下：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:t1="http://mynamespace/A" xmlns:top="http://mynamespace/B" xmlns:max="http://mynamespace/C"><soapenv:Body>
  <t1:Creditcard>
     <top:AutoPayenroll>
        <top:CustomerId>
           <max:CustName>Taylor</max:CustName>
       <max:CustID>jksdguasidgeiruh</max:CustID>
        </top:CustomerId>
     </top:AutoPayenroll>
  </t1:CreditCard></soapenv:Body></soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:53:05.513

您的示例 XSL 和所需的输出有点不一致，但无论如何。

您是否尝试过类似的方法：

```
<max:Pswd><xsl:value-of select="$encdata"/></max:Pswd> 
```

换句话说，`<xsl:element/>`如果只对所需的输出进行编码就足够了，您并不总是需要使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:06:10.480

**由于`max`想要的结果中的命名空间是相同的（不是不同的），您只需要执行这个简短而简单的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:max="http://mynamespace/C">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pEncrypted" select="'jksdguasidgeiruh'"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="max:CustID/text()">
  <xsl:value-of select="$pEncrypted"/>
 </xsl:template>
</xsl:stylesheet> 
```

当对提供的 XML 文档应用此转换时（已更正为格式正确！）：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:t1="http://mynamespace/A"
xmlns:top="http://mynamespace/B"
xmlns:max="http://mynamespace/C">
    <soapenv:Body>
        <t1:Creditcard>
            <top:AutoPayenroll>
                <top:CustomerId>
                    <max:CustName>Taylor</max:CustName>
                    <max:CustID>1234</max:CustID>
                </top:CustomerId>
            </top:AutoPayenroll>
        </t1:Creditcard>
    </soapenv:Body>
</soapenv:Envelope> 
```

**产生了想要的正确结果**：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
 xmlns:t1="http://mynamespace/A"
 xmlns:top="http://mynamespace/B"
 xmlns:max="http://mynamespace/C">
   <soapenv:Body>
      <t1:Creditcard>
         <top:AutoPayenroll>
            <top:CustomerId>
               <max:CustName>Taylor</max:CustName>
               <max:CustID>jksdguasidgeiruh</max:CustID>
            </top:CustomerId>
         </top:AutoPayenroll>
      </t1:Creditcard>
   </soapenv:Body>
</soapenv:Envelope> 
```

**说明**：

正确使用和覆盖**[身份规则/模板](http://dpawson.co.uk/xsl/sect2/identity.html)**。

**更新**：

OP 在评论中指出，每个响应的命名空间可能不同，并且事先不知道。

这是相同的解决方案，稍作修改以适应此规范更改；

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pEncrypted" select="'jksdguasidgeiruh'"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*[local-name()='CustID']/text()">
  <xsl:value-of select="$pEncrypted"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当这个转换应用于同一个 XML 文档（上图）时，会产生同样正确的、想要的结果**：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:t1="http://mynamespace/A" xmlns:top="http://mynamespace/B" xmlns:max="http://mynamespace/C">
   <soapenv:Body>
      <t1:Creditcard>
         <top:AutoPayenroll>
            <top:CustomerId>
               <max:CustName>Taylor</max:CustName>
               <max:CustID>jksdguasidgeiruh</max:CustID>
            </top:CustomerId>
         </top:AutoPayenroll>
      </t1:Creditcard>
   </soapenv:Body>
</soapenv:Envelope> 
```

**或者更安全**，（OP 在另一条评论中指出 namespace-uri 是相同的，只有前缀改变）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pEncrypted" select="'jksdguasidgeiruh'"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "*[local-name()='CustID' and namespace-uri()='http://mynamespace/C']/text()">
  <xsl:value-of select="$pEncrypted"/>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:46:37.873

您不能使用 xpath 来定义这样的元素名称。下面将替换命名空间中的`CustId`with ，使用标识模板复制其他所有内容：`Pswd``max=http://mynamespace/C`

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:msxsl="urn:schemas-microsoft-com:xslt"
                xmlns:max="http://mynamespace/C"
                >
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

    <!--Replace CustID with Pswd-->
    <xsl:template match="*[local-name()='CustID']">
        <xsl:variable name="cleartxt" select="./text()"/>
        <!--got this encrypted data from my internal code-->
        <xsl:variable name="encdata" select="'jksdguasidgeiruh'"/>
        <xsl:element name="max:Pswd">
            <xsl:value-of select="$encdata"/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

# jasper-reports - Jasper 服务器数据源超时设置

> ID：12590788
> 
> 赞同：0
> 
> 时间：2012-09-25T20:47:00.293
> 
> 标签：jasper-reports, postgresql-9.1, jasperserver

我正在使用 JasperReports Server 4.7 和 PostgreSQL 9.1 后端。尝试设置数据源超时设置，但在数据源配置页面中找不到。有人知道我可以在哪里设置吗？我还搜索了所有配置 xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:19:03.947

我认为您不能使用 JDBC 数据源来做到这一点（尽管我不确定）。但是您当然可以在 JNDI 数据源上设置超时或 keepalive 参数。改用它，你应该已经准备好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T14:31:56.060

您确实可以在 jdbc url 中指定连接超时。

例子：`jdbc://server/database?connectTimeout=<TIMEOUT IN MILLISECONDS>`

在此处查看更多属性：http: [//dev.mysql.com/doc/connector-j/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/connector-j/en/connector-j-reference-configuration-properties.html)

# css - CSS 选择器中的运算符是二进制的，还是可以用来连接任意选择器？

> ID：12590795
> 
> 赞同：2
> 
> 时间：2012-09-25T20:47:42.943
> 
> 标签：css, css-selectors

例如，`div > p`可用于选择`<p>`作为元素的直接子元素的所有`<div>`元素。`div > p > span`用于选择具有父母和祖父母的`<span>`元素是否有效？`<p>``<div>`

CSS 选择器中的其他运算符呢？使用'+' in`div + p + span`或',' in是否有效`div, p, span`？

组合不同的选择器怎么样？喜欢`div + p > span`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T20:48:56.827

请注意，选择器不使用术语“运算符”。`>`and`+`符号更准确地称为[组合](http://www.w3.org/TR/css3-selectors/#selector-syntax)符，而逗号只是用于将[选择器分组到列表中](http://www.w3.org/TR/css3-selectors/#grouping)的符号，与`>`and组合符不属于同一类别`+`。

从选择器级别 4 开始，组合器定义了两个元素之间的关系，因此它们确实是二元的。你确实可以连续多次使用`>`or来指代祖父母或其他相邻的兄弟姐妹。`+`例如，`div > p > span`表示以下 HTML 片段：

```
<div>
  <p>
    <span></span>
  </p>
</div> 
```

并`div + p + span`表示以下片段：

```
<div></div>
<p></p>
<span></span> 
```

您还可以混合和匹配组合器以表示更复杂的结构。例如，`div + p > span`表示 a `<span>`，其父级是 a `<p>`，而后者又直接跟在 a`<div>`之后，如以下片段所示：

```
<div></div>
<p>
  <span></span>
</p> 
```

切换组合器，`div > p + span`表示`<span>`直接跟在 a之后的 a `<p>`，而后者又是 a 的子级`<div>`：

```
<div>
  <p></p>
  <span></span>
</div> 
```

请注意，这意味着the和 the*都是*相同的子级。`<span>``<p>``<div>`

请记住，每个复杂的选择器都以最右边的元素（称为选择器的主题）为目标。不幸的是，这加上组合子是二元的，这意味着并非所有结构都可以表示。请参阅我对[这个问题](https://stackoverflow.com/questions/28708741/how-do-i-select-an-element-based-on-the-state-of-another-element-in-the-page-wit)的回答，以非常深入地解释这两个概念以及为什么会出现这种限制。

* * *

您也可以`,`多次使用将任意数量的选择器组合在一起，但这又与组合器的概念分开。不同之处在于，组合符将元素链接在一起形成一个复杂的选择器，表示一个单一的内聚结构，而逗号为了方便将多个复杂的选择器组合成一个 CSS 规则。

# php - 用php生成抗锯齿透明png图像

> ID：12590796
> 
> 赞同：0
> 
> 时间：2012-09-25T20:47:44.720
> 
> 标签：php, tags, transparency, antialiasing

我读过很多关于生成透明图像的文章，但透明度仍然存在问题。首先这里是我的代码：

```
<?php
$text = 'I feel dirty with those borders';
$color = array( 255, 128, 0);
$font = 'arial.ttf';
$size = 44;

// Create the image
$testImg = imagecreatetruecolor(20, 20);
$testCol = imagecolorallocate($testImg, $color[0], $color[1], $color[2]);
$rect = imagettftext($testImg, $size, 0, 0, 0, $testCol, $font, $text);
$width = $rect[4] - $rect[0] + 2;
$height = $rect[1] - $rect[5];
$yOffset = -$rect[5];

imagedestroy($testImg);

$img = imagecreatetruecolor( $width, $height);
imageantialias ( $img, true);
$black = imagecolorallocate($img, 0, 0, 0);
imagecolortransparent($img, $black);
$col = imagecolorallocate($img, $color[0], $color[1], $color[2]);
$rect = imagettftext($img, $size, 0, -1, $yOffset, $col, $font, $text);
imagepng($img, "test.png");
imagedestroy($img);

?>
<html>
<body bgcolor="ffFFa0">
<img src="test.png" />
</body>
</html> 
```

如果我使用此代码生成图像，我会在文本周围出现黑色边框，其中字母的颜色不是完全不透明或完全透明。我认为原因是只有完全 100% 黑色的像素是透明的。但是还有什么其他方法吗？我也尝试使用 alphablending，但没有成功。

任何人都可以给我一个提示或链接到一个很好的例子吗？

提前致谢

副歌

# xml - 从 ASP.NET Web API 中删除 XML 中的命名空间

> ID：12590801
> 
> 赞同：37
> 
> 时间：2012-09-25T20:47:55.700
> 
> 标签：xml, asp.net-web-api

如何使用 Web API 从下面的 xml 响应中删除命名空间？

```
<ApiDivisionsResponse xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/GrassrootsHoops.Models.Api.Response">
<Divisions xmlns:d2p1="http://schemas.datacontract.org/2004/07/GrassrootsHoops.Data.Entities">
<d2p1:Page>1</d2p1:Page>
<d2p1:PageSize>10</d2p1:PageSize>
<d2p1:Results xmlns:d3p1="http://schemas.datacontract.org/2004/07/GrassrootsHoops.Models.Api.Response.Divisions"/>
<d2p1:Total>0</d2p1:Total>
</Divisions>
</ApiDivisionsResponse> 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-25T22:05:29.373

选项 1 是切换到使用`XmlSerializer`in `GlobalConfiguration`：

```
config.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

选项 2 是用

```
[DataContract(Namespace="")] 
```

（如果你这样做，你需要用`[DataMember]`属性装饰成员）。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-05-29T15:48:05.860

如果你愿意用 XmlRoot 来装饰你的模型，这是一个很好的方法。假设你有一辆带门的汽车。默认的 WebApi 配置将返回如下内容：

```
<car 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <doors>
        <door>
            <color>black</color>
        </door>
    </doors>
</car> 
```

这就是你想要的：

```
<car>
    <doors>
        <door>
            <color>black</color>
        </door>
    </doors>
</car> 
```

这是模型：

```
[XmlRoot("car")]
public class Car
{
    [XmlArray("doors"), XmlArrayItem("door")]
    public Door[] Doors { get; set; }
} 
```

您需要做的是创建一个自定义 XmlFormatter，如果 XmlRoot 属性中没有定义命名空间，它将有一个空的命名空间。出于某种原因，默认格式化程序总是添加两个默认命名空间。

```
public class CustomNamespaceXmlFormatter : XmlMediaTypeFormatter
{
    public override Task WriteToStreamAsync(Type type, object value, Stream writeStream, HttpContent content,
                                            TransportContext transportContext)
    {
        try
        {
            var xns = new XmlSerializerNamespaces();
            foreach (var attribute in type.GetCustomAttributes(true))
            {
                var xmlRootAttribute = attribute as XmlRootAttribute;
                if (xmlRootAttribute != null)
                {
                    xns.Add(string.Empty, xmlRootAttribute.Namespace);
                }
            }

            if (xns.Count == 0)
            {
                xns.Add(string.Empty, string.Empty);
            }

            var task = Task.Factory.StartNew(() =>
                {
                    var serializer = new XmlSerializer(type);
                    serializer.Serialize(writeStream, value, xns);
                });

            return task;
        }
        catch (Exception)
        {
            return base.WriteToStreamAsync(type, value, writeStream, content, transportContext);
        }
    }
} 
```

最后要做的是在 WebApiContext 中添加新的格式化程序。请务必删除（或清除）旧的 XmlMediaTypeFormatter

```
public static class WebApiContext
{
    public static void Register(HttpConfiguration config)
    {
        ...
        config.Formatters.Clear();
        config.Formatters.Add(new CustomNamespaceXmlFormatter{UseXmlSerializer=true});
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-10T15:05:19.237

我喜欢 pobed2 的回答。但是我需要`CustomNamespaceXmlFormatter`允许我指定一个默认的根命名空间，以便在`XmlRoot`缺少属性**以及**属性存在并且在`Namespace`属性中没有值时使用（也就是说，该属性仅用于设置根元素名称） . 所以我创建了一个改进的版本，以防它对某人有用：

```
public class CustomNamespaceXmlFormatter : XmlMediaTypeFormatter
{
    private readonly string defaultRootNamespace;

    public CustomNamespaceXmlFormatter() : this(string.Empty)
    {
    }

    public CustomNamespaceXmlFormatter(string defaultRootNamespace)
    {
        this.defaultRootNamespace = defaultRootNamespace;
    }

    public override Task WriteToStreamAsync(
        Type type, 
        object value, 
        Stream writeStream,
        HttpContent content,
        TransportContext transportContext)
    {
        var xmlRootAttribute = type.GetCustomAttribute<XmlRootAttribute>(true);
        if(xmlRootAttribute == null)
            xmlRootAttribute = new XmlRootAttribute(type.Name)
            {
                Namespace = defaultRootNamespace
            };
        else if(xmlRootAttribute.Namespace == null)
            xmlRootAttribute = new XmlRootAttribute(xmlRootAttribute.ElementName)
            {
                Namespace = defaultRootNamespace
            };

        var xns = new XmlSerializerNamespaces();
        xns.Add(string.Empty, xmlRootAttribute.Namespace);

        return Task.Factory.StartNew(() =>
        {
            var serializer = new XmlSerializer(type, xmlRootAttribute);
            serializer.Serialize(writeStream, value, xns);
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-21T18:40:04.267

在保持响应模型的项目中转到`Properties/AssemblyInfo.cs`

添加

`using System.Runtime.Serialization;`

并在底部添加

```
[assembly: ContractNamespace("", ClrNamespace = "Project.YourResponseModels")] 
```

替换`Project.YourResponseModels`为响应模型所在的实际命名空间。您需要为每个命名空间添加一个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-15T16:09:24.850

你可以使用下一个算法

1.  为您的班级放置属性

    ```
    [XmlRoot("xml", Namespace = "")]
    public class MyClass
    {
       [XmlElement(ElementName = "first_node", Namespace = "")]
       public string FirstProperty { get; set; }

       [XmlElement(ElementName = "second_node", Namespace = "")]
       public string SecondProperty { get; set; }
    } 
    ```

2.  将方法写入控制器或实用程序的类

    ```
    private ContentResult SerializeWithoutNamespaces(MyClass instanseMyClass)
    {
        var sw = new StringWriter();
        var xmlWriter = XmlWriter.Create(sw, new XmlWriterSettings() {OmitXmlDeclaration = true});

        var ns = new XmlSerializerNamespaces();
        ns.Add("", "");
        var serializer = new XmlSerializer(instanseMyClass.GetType());
        serializer.Serialize(xmlWriter, instanseMyClass, ns);

        return Content(sw.ToString());
    } 
    ```

3.  使用方法**SerializeWithoutNamespaces**进入 Action

    ```
    [Produces("application/xml")]
    [Route("api/My")]
    public class MyController : Controller
    {
      [HttpPost]
      public ContentResult MyAction(string phrase)
      {                           
        var instanseMyClass = new MyClass{FirstProperty ="123", SecondProperty ="789"};
        return SerializeWithoutNamespaces(instanseMyClass); 
      }
    } 
    ```

4.  不要忘记将一些依赖项放入 StartUp 类

    ```
    public void ConfigureServices(IServiceCollection services)
    {
        services.AddMvc()
            .AddXmlSerializerFormatters()
            .AddXmlDataContractSerializerFormatters();
    } 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-18T19:35:34.887

CustomNamespaceXmlFormatter 类对我有用，只是它导致了内存泄漏（当我的 Web 服务受到重创时，内存不断增加），所以我修改了 XmlSerializer 实例的创建方式：

```
public class CustomNamespaceXmlFormatter : XmlMediaTypeFormatter
{
    private readonly string defaultRootNamespace;

    public CustomNamespaceXmlFormatter() : this(string.Empty)
    {
    }

    public CustomNamespaceXmlFormatter(string defaultRootNamespace)
    {
        this.defaultRootNamespace = defaultRootNamespace;
    }

    public override Task WriteToStreamAsync(Type type, object value, Stream writeStream, HttpContent content, TransportContext transportContext)
    {
        if (type == typeof(String))
        {
            //If all we want to do is return a string, just send to output as <string>value</string>
            return base.WriteToStreamAsync(type, value, writeStream, content, transportContext);
        }
        else
        {
            XmlRootAttribute xmlRootAttribute = (XmlRootAttribute)type.GetCustomAttributes(typeof(XmlRootAttribute), true)[0];
            if (xmlRootAttribute == null)
                xmlRootAttribute = new XmlRootAttribute(type.Name)
                {
                    Namespace = defaultRootNamespace
                };
            else if (xmlRootAttribute.Namespace == null)
                xmlRootAttribute = new XmlRootAttribute(xmlRootAttribute.ElementName)
                {
                    Namespace = defaultRootNamespace
                };

            var xns = new XmlSerializerNamespaces();
            xns.Add(string.Empty, xmlRootAttribute.Namespace);

            return Task.Factory.StartNew(() =>
            {
                //var serializer = new XmlSerializer(type, xmlRootAttribute); **OLD CODE**
                var serializer = XmlSerializerInstance.GetSerializer(type, xmlRootAttribute);
                serializer.Serialize(writeStream, value, xns);                    
            });
        }
    }
}

public static class XmlSerializerInstance
{
    public static object _lock = new object();
    public static Dictionary<string, XmlSerializer> _serializers = new Dictionary<string, XmlSerializer>();
    public static XmlSerializer GetSerializer(Type type, XmlRootAttribute xra)
    {
        lock (_lock)
        {
            var key = $"{type}|{xra}";
            if (!_serializers.TryGetValue(key, out XmlSerializer serializer))
            {
                if (type != null && xra != null)
                {
                    serializer = new XmlSerializer(type, xra);
                }

                _serializers.Add(key, serializer);
            }

            return serializer;
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2017-11-29T16:53:02.743

这完美地工作

```
public ActionResult JsonAction(string xxx)
{ 
    XmlDocument xmlDoc2 = new XmlDocument();
    xmlDoc2.Load(xmlStreamReader);

    XDocument d = XDocument.Parse(optdoc2.InnerXml);
    d.Root.Attributes().Where(x => x.IsNamespaceDeclaration).Remove();

    foreach (var elem in d.Descendants())
    elem.Name = elem.Name.LocalName;

    var xmlDocument = new XmlDocument();
    xmlDocument.Load(d.CreateReader());

    var jsonText = JsonConvert.SerializeXmlNode(xmlDocument);
    return Content(jsonText);
} 
```

# java - “找不到主类错误”在 Windows 上，而不是 linux

> ID：12590809
> 
> 赞同：0
> 
> 时间：2012-09-25T20:48:26.430
> 
> 标签：java, windows, classpath

我收到：

```
Exception in thread "main java.lang.NoClassDefFoundError: PageStore
Caused by: java.lang.ClassNotFoundException: PageStore
   .
   .
   .
Could not find the main class: PageStore. Program will exit. 
```

在 Windows 上运行我的 Java 程序时。
它在 linux 和 osx 上运行良好。

我从 .sh 或 .bat 文件运行它，其中包含：

```
javac -cp sesame.jar SimpleGraph.java PeerHandler.java ClientHandler.java Router.java PageStore.java
java -cp sesame.jar:slf4j-api-1.6.6.jar:slf4j-simple-1.6.6.jar:. PageStore 
```

javac 命令可以正常工作，并且可以在两个系统上编译。我在网上看到的所有其他解决方案都是将当前目录添加到我已经拥有的类路径中，并且没有提及在一个操作系统上工作而不是在另一个操作系统上工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:49:09.753

Windows 上类路径的路径分隔符是分号，`;`.

尝试：

```
java -cp sesame.jar;slf4j-api-1.6.6.jar;slf4j-simple-1.6.6.jar;. PageStore 
```

# ios - 为什么我的 Storyboard 中的静态原型 UITableViewCells 显示为空白？

> ID：12590811
> 
> 赞同：2
> 
> 时间：2012-09-25T20:48:39.447
> 
> 标签：ios, uitableview, storyboard

我在情节提要中定义了静态原型 UITableCells、子类、插座等，但是当我运行应用程序并转到该视图控制器/场景时，单元格在那里，但它们没有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:48:39.447

当您在 Storyboards 中使用静态原型单元格设置表格视图时，您可以通过拖出 UITableViewController 然后对其进行子类化来实现。

问题在于 UITableViewController 非常有用，它提供了数据源方法供您覆盖。

习惯的力量让我进入并为这些数据源方法提供默认实现。

事实证明，您不仅不必提供数据源方法，而且如果您这样做，它们会*干扰*静态原型单元格的正确显示。我刚刚注释掉了视图控制器中的所有数据源方法，一切都开始正常显示。

# php - 使用 Yii 框架从迁移中创建数据库模式

> ID：12590816
> 
> 赞同：2
> 
> 时间：2012-09-25T20:49:07.170
> 
> 标签：php, mysql, database, yii

我有一个使用 Yii 框架构建的应用程序。它有很多迁移，现在我想生成一个数据库模式，因此其他人可以在不应用所有迁移的情况下安装应用程序。在 Ruby on Rails 中，db/schema.rb 包含所有迁移的总和。我想在 Yii 中做同样的事情，但是在应用迁移后 protected/data/schema.mysql.sql 似乎没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:07:38.377

您必须创建自己的 sql 脚本并将其导入。

看看[dlhelperdatabase](http://www.yiiframework.com/extension/dlhelperdatabase/)扩展，它会帮助你做你想做的事！

# java - 无法让二进制打印水平并停止执行

> ID：12590825
> 
> 赞同：1
> 
> 时间：2012-09-25T20:49:38.427
> 
> 标签：java, printing, binary, while-loop

我正在制作一个从十进制转换为二进制、八进制和十六进制的程序。到目前为止，我只关注十进制到二进制部分。我的问题是，当我要求二进制文件将其转换为所述数字时，它们会垂直打印它们而不是像 010 那样水平打印。如果 y 输入大于 1024，我的 while 语句也不会停止执行，这是我想要的最高值能够被接受。

```
import java.util.Scanner;

public class DNS
{
    public static void main(String[] args)
    {
        int y;
        Scanner input = new Scanner( System.in);
    do
    {   
        System.out.println("java DisplayNumberSystems");
        System.out.println("Enter a decimal value to display to: ");
        y = input.nextInt();

        for(int x=0; x <=y; x++)
        {
            convertToBinary(x);
        }
    }
    while(y <=1024);    

    }

    public static void convertToBinary(int x)
    {
        if(x >0)
        {
            convertToBinary(x/2);
            System.out.print(x%2 + " ");

        }
        System.out.println("");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:54:16.757

`System.out.println("");`从 您那里删除 `public static void convertToBinary(int x)` 将能够水平打印

并像这样将您的do-while更改为simple while

```
 int y;
    Scanner input = new Scanner( System.in);
    System.out.println("java DisplayNumberSystems");
    System.out.println("Enter a decimal value to display to: ");
    y = input.nextInt();

    while(y <=1024)
{   

    for(int x=0; x <=y; x++)
    {
        convertToBinary(x);
    }
} 
```

您在调用 convertToBinary() 方法后检查是否 y<=1024。您在调用 convertToBinary() 方法之前检查是否 y<=1024。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:03:46.227

您可能打算在主循环`System.out.println()`中调用 to 之后进行空调用（顺便说一下，您可以不带参数调用它）- 否则在每个被评估数字的每个递归步骤中都会打印空行。`convertToBinary(x)``for`

```
for (int x = 0; x <= y; x++) {
    convertToBinary(x);
    System.out.println();
} 
```

关于如果输入大于 1024 就停止的其他问题 - 这是因为调用`convertToBinary(x)`是在检查`while`语句之前发生的。您将需要明确`break`退出循环以停止此操作。就个人而言，我只会使用`while`带有显式检查的无限循环：

```
while (true) {
    System.out.println("java DisplayNumberSystems");
    System.out.println("Enter a decimal value to display to: ");
    y = input.nextInt();

    if (y < 0) {
        System.out.println("That number is not positive!");
        break;
    }

    if (y > 1024) {
        System.out.println("That number is too big!");
        break;
    }

    for (int x = 0; x <= y; x++) {
        convertToBinary(x);
        System.out.println();
    }
} 
```

# asp.net-mvc - Asp.net MVC3，打开连接

> ID：12590828
> 
> 赞同：0
> 
> 时间：2012-09-25T20:49:43.033
> 
> 标签：asp.net-mvc, advantage-database-server

我在我的控制器中打开数据库连接并将打开的连接传递给我的模型以使用该连接。

但自从第二次调用控制器（Ajax）以来，它返回一条错误消息，上面写着“必须打开连接”。我重新加载了页面，然后再次调用控制器然后它运行良好。但是对于第二次调用，它会一直返回该错误消息。

我的控制器有打开数据库连接的代码，所以我相信，它应该为每个处理（调用）打开数据库。并且（打开的）代码在 using{} 块中，因此在使用它后，它应该自动关闭。

但我认为我做错了:(

这是我的代码，

```
public JsonResult myControllerMethod() // Action Controller
{
    using (AdsConnection conn = new AdsConnection(connString))
    {
    conn.Open();
    AdsTransaction txn = conn.BeginTransaction(); // Begin Transaction
    try
    {
        MyModel mo = new MyModel();
        mo.doProcess(conn); // pass connection to model
        txn.Commit();
        return Json(new { success = true });
    }
    catch (Exception e)
    {
        txn.Rollback();
        return Json(new { success = false, message = e.Message });
    }
    }
} 
```

我的模型

```
public void doProcess(AdsConncection conn){ // Model
    try{
        ..
        //AdsCommand select, update, delete and insert....
        ..
    }catch(Exception e){
        throw e;
    }
} 
```

有谁知道，我做错了什么？请给我建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:52:54.900

您不应该将数据库连接传递给您的视图 - 您的视图应该接受包含“实体”数据的对象（作为模型）。视图不应该有自己的逻辑，模型的逻辑应该只关心修改内部状态，例如执行验证（*而不是验证*）或一些内部数据转换。从数据库填充模型的任务应该由控制器或单独的映射类（或模型的某种“填充”方法，但该方法应该被调用并包含在控制器的操作方法中）完成。

也就是说，您遇到的问题是因为您正在使用`using()`块。`using()`块将始终**调用**其`IDisposable.Dispose()`主题对象的方法，在本例中为数据库连接。`SqlConnection.Dispose`调用它的`.Close`方法，这就是连接对象在方法返回时关闭的原因。

# android - GCM - 安卓手机是否需要连接互联网才能收到此通知？

> ID：12590835
> 
> 赞同：0
> 
> 时间：2012-09-25T20:50:01.517
> 
> 标签：android

我只是想知道 GCM 是如何工作的，

安卓手机是否需要联网才能收到此通知？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:07:17.270

是的。GCM 客户端通过由 Google 服务框架维护的长寿命套接字接收到 Internet 的通知。

# android - ViewGroup 为动态时不会创建片段视图？

> ID：12590838
> 
> 赞同：0
> 
> 时间：2012-09-25T20:50:06.513
> 
> 标签：android, android-layout, android-fragments

尝试将 ViewPager 与 FragmentPagerAdapter 与所有动态 GUI 元素（即无 XML）一起使用。是的，我有充分的理由，而不仅仅是因为我喜欢它:) 在文档中找不到任何表明这不起作用的内容。

工作和不工作之间的唯一区别是在 XML 中定义 ViewGroup (LinearLayout) 和 ViewPager，而不是在 onCreate() 中创建。给出以下错误：

```
java.lang.IllegalArgumentException: No view found for id 0xffffffff for fragment PageFragment{41936480 #0 id=0xffffffff android:switcher:-1:0} 
```

代码：

```
public class DynoPagerActivity extends FragmentActivity {

  private static class MyFragmentPagerAdapter extends FragmentPagerAdapter {

    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int index) {
        return PageFragment.newInstance("My Message " + index);
    }

    @Override
    public int getCount() {
        return 4;
    }
  }

  private ViewPager mViewPager;
  private MyFragmentPagerAdapter mMyFragmentPagerAdapter;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);
    setContentView(ll);

    mViewPager = new ViewPager(this);
    mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
    mViewPager.setAdapter(mMyFragmentPagerAdapter);
    ll.addView(mViewPager);
    //setContentView(ll);  tried here as well...
  }
} 
```

和：

```
public class PageFragment extends Fragment {

public static PageFragment newInstance(String title) {

    PageFragment pageFragment = new PageFragment();
    Bundle bundle = new Bundle();
    bundle.putString("title", title);
    pageFragment.setArguments(bundle);
    return pageFragment;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    // https://android-review.googlesource.com/#/c/31261/  - bug in Support lib
    setUserVisibleHint(true);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    TextView textView = new TextView(container.getContext());
    textView.setText(getArguments().getString("title"));
    return textView;
}
} 
```

似乎是如何/何时创建片段的问题，但未能找到连接......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:25:53.917

ViewPager 会为每个试图获取父级（ViewPager ID）的“页面”调用 findViewById()，对于没有设置 ID 的视图，这总是失败。当您以编程方式创建视图时，它们的 ID 为 -1，在浏览 Android 平台源代码后，findViewByID() 始终返回 null/fail。

添加 ID 可以使其正常工作，但是您需要自己安全地管理 ID 以避免出现问题。将此添加到上面的代码中，使其在 onCreate() 方法中工作：

```
mViewPager.setId(888889); 
```

# git - 使现有文件夹成为 git 子树

> ID：12590839
> 
> 赞同：9
> 
> 时间：2012-09-25T20:50:12.100
> 
> 标签：git, git-subtree

在我的问题[Git subtree export and re-import woes](https://stackoverflow.com/questions/12590546/git-subtree-export-and-re-import-woes)之后，我想问我如何将文件夹转换为子树。

想象一下，我有一个存储库 A，其中我的代码现在应该与另一个项目（可能还有更多）共享，所以我将所有共享代码放在文件夹“sub”中。这个文件夹现在应该被提取（如果可能的话没有历史记录）到裸存储库 C。之后“sub”应该成为 C 的子树，但是不会丢失 A 中的历史记录（非常重要）。我还希望能够在“sub”中进行更改并将它们推回 C。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T08:44:16.690

`git subtree split`正是这样做的。给定一个文件夹，`--prefix`它将在您的存储库中生成一个单独的树，您可以将其推送到另一个存储库，然后根据需要使用它。

当前版本的 git (1.8.1) 不包含子树文档，但你可以在这里找到它：[https ://github.com/apenwarr/git-subtree/blob/master/git-subtree.txt](https://github.com/apenwarr/git-subtree/blob/master/git-subtree.txt)

您可以使用的流程是：

```
# In Repo A create your subtree split and push it
> git subtree split --prefix sub --branch subBranch
> git push C subBranch:master

# After some changes that touched the sub directory
> git subtree push --prefix sub C master 
```

最后一个命令将重新拆分树（使用先前拆分的提交来维护 C 的树完整性）并将其推送到`C/master`.

如果要删除推送到的内容的历史记录，可以在-ing 和-ing 时`C`使用该`--squash`选项。您必须保持一致并继续使用它，因为如果您开始混合压缩和非压缩内容子树将无法正确拆分和重用 previos 拆分，因此您将无法将其推送到.`git split``git push``C`

最后，一旦创建了它的第一个拆分，`sub`并不完全需要删除它并将其重新导入为新的子树。如果你保留它，它`git subtree`只会重新生成/重用以前从其他拆分中创建的提交。如果您确实删除了该文件夹，然后从创建的提交中重新添加`sub`它应该仍然可以工作，并且如果您正在使用`--squash`它，它将匹配您想要的内容，`C`没有历史记录，但保留`A`历史记录）。

# objective-c - 如何用 ASIHttpRequest JSON 数据填充 UITableView？

> ID：12590841
> 
> 赞同：2
> 
> 时间：2012-09-25T20:50:15.397
> 
> 标签：objective-c, ios, json, uitableview, asihttprequest

我正在尝试使用 ASIhttprequest用[这个 JSON 数据填充我的 UITableView，但我得到以下异常：](http://api.glennzo.nl/glow/index.json)`__NSArrayM objectForKey:]: unrecognized selector sent to instance`

我在我的控制器中使用以下代码来实现这一点：

```
#import <UIKit/UIKit.h>

@interface tableListViewController : UITableViewController {
    NSDictionary *data;
}

@end 
```

和主文件：

```
#import "tableListViewController.h"
#import "ASIHTTPRequest.h"
#import "ASIFormDataRequest.h"

@interface tableListViewController ()

@end

@implementation tableListViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSURL *url = [NSURL URLWithString:@"http://api.glennzo.nl/glow/index.json"];
    ASIHTTPRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setTag:100];
    [request setDelegate:self];
    [request startSynchronous];

    //Set the title
    self.navigationItem.title = @"Events";
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (void) requestFinished:(ASIHTTPRequest *) request
{
    if (request.tag == 100) {
        NSData *responseData = [request responseData];
        NSError *error;

        NSDictionary *JSON = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];

        if(!JSON || ![JSON count])
        {
            NSLog(@"%@", @"geen correcte json data van request gekregen");
        }
        else
        {
            data = JSON;
        }
    }
}

- (void) requestFailed:(ASIHTTPRequest *) request
{
    NSError *error = [request error];
    NSLog(@"Error: %@",error.localizedDescription);
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [data count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [UITableViewCell alloc];
    }

    NSArray *namen = [data objectForKey:@"name"];
    cell.textLabel.text = [namen objectAtIndex:indexPath.row];

    return cell;
} 
```

多亏了一些调试，我现在知道 ASIHttpRequest 可以工作，但是我创建的 NSdictionary（并打算在整个应用程序中使用）给我带来了麻烦。有人可以让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:59:57.140

错误似乎在：

```
NSArray *namen = [data objectForKey:@"name"]; 
```

所以我认为`data`类型不正确（NSDictionary），是 nil 或者它填充了另一种类型：

```
[NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error]; 
```

尝试查看通过 JSON 发送给您的内容。例如：

```
NSError *jsonError = nil;
id jsonObject = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&jsonError];

if ([jsonObject isKindOfClass:[NSArray class]]) {
    NSLog(@"its an array!");
    NSArray *jsonArray = (NSArray *)jsonObject;
    NSLog(@"jsonArray - %@",jsonArray);
    } else {
    NSLog(@"its probably a dictionary");
    NSDictionary *jsonDictionary = (NSDictionary *)jsonObject;
    NSLog(@"jsonDictionary - %@",jsonDictionary);
} 
```

# javascript - 在 Javascript 中解析 Google Latitude JSON（无 PHP）

> ID：12590842
> 
> 赞同：3
> 
> 时间：2012-09-25T20:50:17.020
> 
> 标签：javascript, json, google-latitude

我不是开发人员，但很擅长复制/粘贴。

我正在尝试`https://latitude.google.com/latitude/apps/badge/api?user=xxxxxxxxxxxxxxxxx&type=json`在网页 (JavaScript) 中解析 Google Latitude JSON ()。没有PHP这可能吗？如果是这样，你能告诉我一些示例代码吗？

我一直在寻找，但我发现的所有示例都使用 PHP。

我使用了以下代码：

```
<!DOCTYPE html>
<html>
<body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"         type="text/javascript"></script>
<script type="text/javascript">
$(function() {
// script goes here

$.getJSON('https://latitude.google.com/latitude/apps/badge/api?&user=xxxxxxxxxxxxxxxxxxx', function(data) {
alert(data.type);
});
});
</script>
</body>
</html> 
```

我试过的这段代码出错了：

```
 3 requests  ❘  21.38KB transferred  ❘  470ms (onload: 448ms, DOMContentLoaded: 448ms)
104ms157ms209ms261ms313ms366ms418ms470ms
    OPTIONS https://latitude.google.com/latitude/apps/badge/api?&user=xxxxxxxxxxxxxxxx 405         (Method Not Allowed) jquery.min.js:19
    o.extend.ajax jquery.min.js:19
    o.extend.get jquery.min.js:19
    o.extend.getJSON jquery.min.js:19
    (anonymous function) json.html:12
    o.extend.ready.o.readyList jquery.min.js:19
    o.extend.each jquery.min.js:12
    o.extend.ready jquery.min.js:19
    (anonymous function) jquery.min.js:19
    XMLHttpRequest cannot load https://latitude.google.com/latitude/apps/badge/api?&user=xxxxxxxxxxxxxxxxxxxxxx. Origin h ttp://dl.dropbox.com is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:19:06.943

为了发出跨域 AJAX 请求，您需要使用 CORS 或 JSONP。这是服务器必须支持的。谷歌纵横似乎不支持这一点，因此您需要使用服务器端语言（例如 PHP）来获取数据。

**编辑**：如果您不想使用 PHP，而只想使用 JavaScript，则可以使用[Yahoo 的 YQL](http://developer.yahoo.com/yql/)（您可能需要 API 密钥）。

```
var googleURL = 'https://latitude.google.com/latitude/apps/badge/api?user=xxxxxxxxxxxxxxxxx&type=json';
$.getJSON('http://query.yahooapis.com/v1/public/yql?callback=?', {
    q: 'select * from json where url="'+googleURL+'"',
    format: 'json'
}, function(data) {
    if(data.query.count){
        var gData = data.query.results.json;
        alert(gData.type);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:12:21.943

好像您使用了错误的网址。去掉“user”前的“&”，添加“type”参数：[https ://latitude.google.com/latitude/apps/badge/api?user=xxxxxxxxxxxxxxxxxxx&type=json](https://latitude.google.com/latitude/apps/badge/api?user=xxxxxxxxxxxxxxxxxxx&type=json)

请注意，用户 ID 可以以“-”号开头。

此外，似乎您尝试使用 Dropbox 作为托管，这会阻止您发出 ajax 请求。尝试从本地驱动器或常规 Web 服务器加载您的 html 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T21:18:49.623

您有一个跨站点请求。

看到最后一行错误： XMLHttpRequest cannot load [https://latitude.google.com/latitude/apps/badge/api?&user=xxxxxxxxxxxxxxxxxxxxxx](https://latitude.google.com/latitude/apps/badge/api?&user=xxxxxxxxxxxxxxxxxxxxxx)。Access-Control-Allow-Origin 不允许来源 h ttp://dl.dropbox.com？

您的原始脚本托管在一台服务器上，比如说您的服务器。它只能请求来自同一个域的数据。即使您使用不同的端口（http/https），它也不起作用。

你可以让它与[this](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)一起工作。

另一种可能的解决方案是在您的服务器上创建一个 php 脚本或类似的脚本，该脚本将从 YAHOO 获取数据并将输出转储到结果中。然后您的 jQuery ajax 调用将调用您自己的脚本（在您的服务器上，因此不会发生跨站点 HTTP 请求）并且它会以这种方式工作。我想这不是一个好的架构，特别是如果你期望有很多负载，但它会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T21:19:29.823

您不需要解析 JSON，`$.getJSON`它会为您完成，并返回一个 JavaScript 对象。您的错误与 JSON 本身无关 - 您正在尝试执行浏览器安全策略阻止的跨站点请求。我建议继续阅读`JSONP`

[http://json-p.org/](http://json-p.org/)

干杯

# zend-framework - 如何断言完整的响应，而不仅仅是使用 Zend_Test_PHPUnit 的“视图”部分？

> ID：12590847
> 
> 赞同：2
> 
> 时间：2012-09-25T20:50:34.943
> 
> 标签：zend-framework, phpunit, zend-test

我想测试我的`/login`页面是否运行良好并拒绝无效凭据，即不重定向到用户的仪表板并显示此处使用`.alert`HTML 类标识的过敏消息。所以我创建了一个这样的测试：

```
class AuthControllerTest extends Zend_Test_PHPUnit_ControllerTestCase {
    ...
    public function testUserFailingLogin() {

        $this->request->setPost(array(
            'email'  => 'wrong@email.com',
            'password' => 'wrongpassword',
        ));

        $this->request->setMethod('POST');
        $this->dispatch('/login');

        $this->assertQuery('.alert');
    }
} 
```

我的问题是该`assertQuery()`方法是针对`login.phtml`视图文件的渲染运行的，并且不包括我的 Zend_Layout 设置（这`.alert`是显示 's 的位置），因此`assertQuery()`断言总是失败。

有没有办法获得`assert*Query*()`评估完整响应（“布局”+“视图”）的断言，而不仅仅是“视图”部分？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-01T05:10:55.123

你（我）应该使用未记录的`outputBody()`方法。

# inheritance - 咖啡脚本类中“this”的范围是什么

> ID：12590850
> 
> 赞同：1
> 
> 时间：2012-09-25T20:50:49.800
> 
> 标签：inheritance, coffeescript

我仍然对咖啡脚本和javascript继承中“this”的范围和上下文感到困惑。为什么 this(@) 用于创建静态方法以及引用实例方法，例如 @myStaticMethod 和 @move 之间的区别，“this”在这两种情况下代表什么？

例如

```
class Animal

    @myStaticMethod : () ->
            console.log this is a static method
    move:(numberOfLegs) ->
        console.log numberOfLegs + ' legs moving'

    run: (numberOfLegs) ->
        @move(numberOfLegs)

class Dog extends Animal

    sprint: () ->
        return @run(4)

dog = new Dog()
dog.sprint() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:03:11.707

您必须调用`@run()`，因为`run()`是本地函数调用。

```
class Dog extends Animal

sprint: () ->
    run = (x) ->
        alert x

    run(4) 
```

另一方面`@run()`是一个`this.run()`JavaScript 模拟。当您在示例中使用继承时，方法`run`将扩展到`Dog`from`Animal`并因此移动到`Dog`的原型。所以你应该`run`从当前对象调用。

> 为什么 this(@) 用于创建静态方法以及引用实例方法

`@`这两种情况的迹象不同。在你的例子中，如果你想调用静态方法，你应该`Animal.myStaticMethod()`在类内部和外部编写。但是当你需要在类中调用实例方法时，你可以使用JS 中`@`的等价物`this`。

看看[CoffeeScript 控制台](http://coffeescript.org/#try%3aclass%20Animal%0A%20%20%40staticMethod%3A%20%28%29%20-%3E%0A%20%20%0A%20%20instanceMethod%3A%20%28%29%20-%3E%0A%0A%20%20method%3A%20%28%29%20-%3E%0A%20%20%20%20%23%20static%20call%0A%20%20%20%20Animal.staticMethod%28%29%0A%0A%20%20%20%20%23%20instance%20method%20call%0A%20%20%20%20%40nonStaticMethod%28%29%0A%0A%20%20%20%20%23%20local%20function%20call%0A%20%20%20%20local%20%3D%20%28%29%20-%3E%0A%20%20%20%20%20%20alert%201%0A%0A%20%20%20%20local%28%29)中的小例子。正如您在右侧看到的`staticMethod`那样，它没有添加到原型中，因此它不是实例方法，在这种情况下与in`@`没有任何共同之处。`@``@instanceMethod()`

# javascript - 多部分 jQuery 验证

> ID：12590852
> 
> 赞同：7
> 
> 时间：2012-09-25T20:51:10.097
> 
> 标签：javascript, jquery, forms, jquery-validate, validation

我正在尝试分别验证表单的不同部分。不幸的是，表单是由 CMS 生成的，所以我的操作受到限制。

我尝试`validate`使用当前表单部分作为索引创建一个对象数组。IE：

```
 //initialize validation
  validators = [
    $('#donation_amount').validate({ rules:{ amount: { required: true } } }),
    $('#personal_information').validate({ rules:{ Street: { required: true } } })
   ]; 
```

并像这样在各个部分中切换：

```
 $('#btn-next').click(function() {
    //if validation is true, show next page
    if (validators[curOrder].valid()) {
      var old = $('.active');
      var oldOrder = old.attr('data-order');
      var newOrder = parseInt(oldOrder) + 1;
      old.removeClass('active');
      $("[data-order='" + newOrder + "']").addClass('active');
      curOrder = newOrder;
    }else{
      console.log("invalid");
   }
}); 
```

然而，验证总是返回`true`。

这是有问题的页面：[https ://salsa3.salsalabs.com/o/50388/p/salsa/donation/common/public/?donate_page_KEY=8461](https://salsa3.salsalabs.com/o/50388/p/salsa/donation/common/public/?donate_page_KEY=8461)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:19:10.430

当您自己编写一点 JavaScript 时，为什么还要使用 .validate 插件。单击时，只需检查输入的值（如 $('#myInput').val().trim() == ""）并针对每个输入显示/隐藏相应的错误 div。

此外，对于多部分验证，仅验证必填字段并继续应该进行的操作。

```
$('#btn-next').click(function() {
var amountValid = $('#donation_amount').val().trim() == '' ? false : true;
var infoValid = $('#personal_information').val().trim() == '' ? false : true;

if (amountValid && infoValid) {
  var old = $('.active');
  var oldOrder = old.attr('data-order');
  var newOrder = parseInt(oldOrder) + 1;
  old.removeClass('active');
  $("[data-order='" + newOrder + "']").addClass('active');
      curOrder = newOrder;
    }else{
      console.log("invalid");
    }
}); 
```

# crystal-reports - 如何将 Crystal Reports 2011 与 Sql Server Express 2012 一起使用？

> ID：12590856
> 
> 赞同：0
> 
> 时间：2012-09-25T20:51:22.493
> 
> 标签：crystal-reports, sql-server-2012-express

我正在尝试找出如何将水晶报表与 sql server 一起使用。我知道在 .net 中有一个“引擎”可以用来运行水晶报表，但是如果我只想使用 sql server 和 CR 怎么办？有没有办法将 CR .rpt 加载到 Sql Server 并在那里使用 .net 引擎？我需要编写一个 .net 程序来查看 .rpt 文件吗？如果我创建了一个存储过程，那是 sql server 可以提供的吗？

感谢您的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:17:59.317

您可以使用水晶报表查看器（它是免费的）来查看您的 rpt，就 sql server 而言，我不知道在 sql server 中显示 rpt 的方法。

# visual-studio-2010 - 在设计时使用多个视觉工作室面板对象是否有技巧

> ID：12590859
> 
> 赞同：0
> 
> 时间：2012-09-25T20:51:34.687
> 
> 标签：visual-studio-2010

我在这里缺少某种快捷键，用于在 vs2010 的表单编辑器中交换面板吗？

我有许多面板在运行时根据枚举“切换”值交换，我似乎能够来回移动它们的唯一方法是使一个面板小于另一个面板并右键单击它。有一半的时间我最终选择了一些其他对象来尝试纠正我的面板。

我想这里一定有我遗漏的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:42:47.423

此任务的布局工具栏上有图标。我在属性中选择面板并使用它们移动它。比右键单击并希望最好的方式更容易。

编辑：虽然有时按钮在您需要时未启用。仍然右键单击调整大小手柄装饰点将弹出上下文菜单，然后您可以在其中选择后退/前进。

我仍然希望有一些我可以按下的组合键。击中装饰点在我的屏幕上占据的 4px 显示区域是一种灵巧性测试，让我放慢了速度。

# php - 将参数数组与单个参数传递给PHP中的函数？

> ID：12590860
> 
> 赞同：7
> 
> 时间：2012-09-25T20:51:38.620
> 
> 标签：php, function, parameters, coding-style

当有一个函数需要传递多个参数时，比如七个参数，这是比较好的做法：

```
function foo($par1, $par2, $par3, $par4, $par5, $par6, $par7)
{
} 
```

或者

```
function foo(array $args)
{
} 
```

在第二个示例中`$args`，将参数作为元素的数组。

我一直不一致地使用这两种方法。

使用第一种方法的缺点是，如果你弄错了参数的顺序，你就完蛋了（而且它可能真的很难调试，因为它并不总是很明显）。这就是使用数组方法的优点。

使用第一种类型的优点（恕我直言）是一个好的 PHP 编辑器（例如 PhpStorm）会在您键入函数时向您显示参数的名称，这比进入函数查看需要传递的参数更容易在一个数组中。

感谢您的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T20:56:43.870

从理论上讲，每个参数都应该包含一个逻辑整体。集合旨在表示值的集合，而不是方法参数的集合；各个参数应单独传递，以清楚地表明该方法的用途。

实际上，在数组中传递参数时，您必须进行大量手动检查以确保传递了正确的参数。通过为参数提供清晰的逻辑名称（以及可能的类型提示），您几乎可以避免任何歧义。此外，正如评论已经指出的那样，如果一个方法需要 7 个参数，那么进行一些重构可能已经成熟了。

编辑：如果您的方法/函数*确实*接受了一组模糊定义的“选项”，这些“选项”仅以较小的方式影响代码的作用，请考虑使用 Symfony [OptionsResolver](https://github.com/symfony/OptionsResolver)组件，以大大简化选项数组的验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:59:59.900

我认为这个问题可以归结为*“php 的类型有多强？”* 或*“我希望我的东西有多强的类型？”*

显然，数组是最松耦合的。变量的数量及其名称由调用者完成。

您使用单独参数的调用具有更强的耦合性，因此必须至少提供参数数量。

恕我直言，您忘记了一种呼叫，那就是`type hinting`. 这是 php 目前提供的最强大的强类型化方法。

例子：

```
function foo(\MyNamespace\MyObject $par1, \YourNamespace\YourObject $par2)
{
} 
```

我的观点：由于我只有强类型语言的背景，我更喜欢强类型`typed hinting`。有传言说 php 5.5 或 php 6 也将支持标量作为类型提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:56:54.213

如果您有很多基于参数的选项或想要更多的灵活性，请尝试[`func_get_args()`](http://php.net/manual/en/function.func-get-args.php)。

```
function foo()
{
    $arg_list = func_get_args();
    for ($i = 0; $i < $numargs; $i++) {
        echo "Argument $i is: " . $arg_list[$i] . "<br />\n";
    }
} 
```

如果您想缩小可接受的参数范围，那么最好定义变量。

# ruby-on-rails - current_user 在我的自动生成的 Rails 应用程序中在哪里定义和管理？

> ID：12590864
> 
> 赞同：1
> 
> 时间：2012-09-25T20:51:49.113
> 
> 标签：ruby-on-rails, authentication, devise, metaprogramming

我使用[Rails Composer](http://railsapps.github.com/rails-composer/)生成了一个使用 devise、rolify 和 cancan gem 的 Rails 应用程序。

我注意到我可以使用 current_user 方法。

当我在 Textmate 中使用 cmd-shif-F 搜索我的项目时，我找不到 current_user 的定义位置。我已经完成了一些你自己的身份验证逻辑示例，在应用程序控制器中设置 current_user 似乎很常见。我的应用程序中没有这样的代码。

不过，我可以验证 current_user 是否有效。

这个 SO Q/A [here](https://stackoverflow.com/questions/12461347/cancanability-where-is-the-current-user-method-defined)指向一些代码，但我不明白。看起来 current_user 是一个生成的方法，它是一些元编程魔法的结果。不过，如果它没有在应用程序控制器的前置过滤器中被引用，它怎么能工作呢？

相当简单的 application_controller.rb 看起来像这样：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  rescue_from CanCan::AccessDenied do |exception|
    redirect_to root_path, :alert => exception.message
  end

end 
```

# javascript - 从 jQuery.getJSON 返回一个 JSON blob

> ID：12590866
> 
> 赞同：0
> 
> 时间：2012-09-25T20:51:52.417
> 
> 标签：javascript, jquery, asp.net-mvc, json, lexical-scope

我有一个函数，我正在调用一个返回 JSON blob 的 MVC 控制器，其中包含一些后端操作的内容。此 JSON blob 用于填充呈现给最终用户的表。

我的功能目前看起来像这样：

```
function getJsonFromController(path) {
    var blob = null;

    $.getJSON(path, function (data) {
        blob = data;
        console.log('inside getjson : ' + blob);
    });

    console.log('outside getjson : ' + blob);
    return blob;
} 
```

...还有一个如下所示的调用动作：

```
$('#action-button').click(new function () {
    blob = getJsonFromController('A/B?pageId=1');

    console.log('in click event: ' + blob);
    $.tmpl($template, blob).appendTo($('#table-body'));
}); 
```

当我运行调用它的网页/操作时，我会按照给定的顺序得到以下结果：

```
outside getjson: null
in click event: null
inside getjson: [object Object] 
```

我尝试了一些其他配置（.getJSON() 的 .complete，直接从 $.getJSON() 返回一个值）以尝试将回调中的“数据”回显到封闭范围的 blob 变量，但到目前为止，该 blob 似乎仅在 getJSON 回调中具有价值。

话虽如此，我也知道 JavaScript 是一种词法范围的语言，所以它可能是所有匿名函数链正在执行的问题。

问题：我可以看到我的 blob 在 $.getJSON 中正确显示。现在，我该如何取出我的斑点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:54:16.170

AJAX 请求是异步的。您可以同步执行（请注意，它会冻结您的网页，直到请求完成），但假设最好执行以下操作：

```
function getJsonFromController(path) {
    var blob = null;

    $.getJSON(path, function (data) {
        blob = data;
        console.log('inside getjson : ' + blob);
        $.tmpl($template, blob).appendTo($('#table-body'));
    });
} 
```

然后点击：

```
$('#action-button').click(new function () {
    blob = getJsonFromController('A/B?pageId=1');
}); 
```

# mysql - mysql只选择未取消的行

> ID：12590870
> 
> 赞同：0
> 
> 时间：2012-09-25T20:52:03.797
> 
> 标签：mysql, select

我有以下数据：

```
id  vote_id  user_id  status 
1   1        1        1         the vote is active 
2   1        1        2         vote is canceled 
3   1        1        1         vote is active again 
```

status 一开始总是为 1，然后如果 status 为 2，则投票被取消。在第三行，用户再次行动，其状态为活动。仅当之后没有取消行时，我才需要能够选择一行

考虑到我不仅需要为每个用户 1 个 vote_id 执行此操作，我如何才能获取所有仍处于活动状态的用户的所有行！？

完整的数据样本将如下所示：

```
id  vote_id  user_id  status 
1   1        1        1         - vote1 is active 
2   1        1        2         - vote1 is canceled 
3   1        1        1         - vote1 is active again 
4   2        1        1         - vote2 is active 
5   2        1        2         - vote2 is canceled 
```

我只需要第 3 行，因为 (1-2) 和 (4-5) 相互抵消。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:05:42.833

鉴于情况

```
id, vote_id, user_id, status 
1,1,1,1 - the vote is active 
2,1,1,2 - vote is canceled 
3,1,1,1 - vote is active again 
```

我假设系统不允许取消投票，*除非*该投票处于活动状态，也不允许重新激活，除非它处于取消状态。

因此，如果“状态 1”的投票数量等于“状态 2”的数量，则该投票被取消；否则它是活动的。

在这个假设下，

```
SELECT id, vote_id, user_id, active AS status FROM
    ( SELECT MAX(id) AS id,
           SUM(CASE WHEN status = 1 THEN 1 WHEN status = 2 THEN -1 ELSE 0 END)
              AS active,
           user_id,
           vote_id
    FROM votes GROUP BY user_id, vote_id ) AS votes
WHERE votes.status = 1; 
```

或者——我不喜欢这个，因为`status`名字不明确——

```
SELECT MAX(id) AS id,
    SUM(CASE WHEN status = 1 THEN 1 WHEN status = 2 THEN -1 ELSE 0 END) AS status,
    user_id,
    vote_id
FROM votes GROUP BY user_id, vote_id
HAVING status = 1; 
```

如果您确定状态值，并且没有其他值，您也可以尝试

```
SUM((1-status)*2+1) AS status 
```

但我不知道速度增益（如果有的话！）是否可以弥补清晰度的不足。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:10:15.690

我想出了这个

```
select t.*
from @temp t
left join (select max(id) as lastCanceledId, vote_id
            from @temp
            where status = 2
            group by vote_id) cancels on t.vote_id = cancels.vote_id
where COALESCE(cancels.lastCanceledId, 0) < t.id
and t.Status = 1 
```

其中@temp 是您的表的名称。中间的选择找到给定 vote_id 的最后取消的行。外部过滤掉取消行之前的所有行。这假设 id 表示事情发生的顺序。

# c# - C# Comport - 可能丢失数据

> ID：12590877
> 
> 赞同：2
> 
> 时间：2012-09-25T20:52:36.667
> 
> 标签：c#, wpf, serial-port

我一直在尝试解决问题，但我真的没有任何想法要解决以下问题：

我有一个软件应用程序，它能够监听能够将数据上传到计算机的设备。捕获此数据后，会将其写入文本文件并存储以供以后使用。

```
void DataRecieved(object sender, EventArgs e)
{
   while ((bufferedData = comport.ReadLine()) != null)
   {
       uploadedData += bufferedData + Environment.NewLine;
   }

   comport.Close();

   System.IO.StreamWriter writeUploadedPro = new System.IO.StreamWriter(uploadFilePath);
   writeUploadedPro.Write(uploadedData);
   writeUploadedPro.Close();

   isUploadComplete = true;
} 
```

我可以建立、接收和验证连接，我编写的程序确实会生成上传数据的文本文件，但是数据包含不完整。

例子：

```
%
N0?77??.5???3
G0? X3.??? Z4.5??6 
Z5.?? 
?3.5?76 
G01 Z5.?? 
Z4.9471 
X?.?3 Z4.???9 
Z?.???6 
?3.?? Z?.??? 
Z4.???? 
X3.7??4 
G?? X3.???? ?4.5??6 
M30
? 
```

它有许多“？” 这应该是一个字母或数字。我再次确认我对 comport 的设置（波特、数据、停止、奇偶校验、握手和 COM 名称已正确指定）。我还尝试设置 ReadBufferSize、RecievedBytesThreshold、Encoding 和 NewLine 设置。我对这些属性一点也不熟悉，我也没有发现 MSDN 对解释它们有帮助。

如果您对我上传的数据行不完整有任何想法或建议，我们将不胜感激。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:00:03.413

我认为问题在于：

```
while ((bufferedData = comport.ReadLine()) != null) 
```

尝试将语句更改为：

```
 while(comport.BytesToRead>0)
{
uploadedData += comport.ReadExisting() + Environment.NewLine;
} 
```

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:04:36.643

问题出在您的编码中。尝试将[Encoding 属性](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.encoding)更改为 UTF8。默认值为 ASCII。在 ASCII 编码中，任何大于 0x7F 的字符都会`?`默认转换为 a，因为 ASCII 最多只能达到 0x7F（十进制的 127）。

尽管这可能会解决您的问题，但更好的方法是将数据读入字节数组，然后使用[这些编码类](http://msdn.microsoft.com/en-us/library/x76y3wky.aspx)之一将其转换为正确的字符串。之所以可行，是因为您不再将接收到的字节转换为字符串。您正在使用不进行字符串转换的[Read(byte[], int, int)重载。](http://msdn.microsoft.com/en-us/library/ms143549.aspx)它的纯字节。

# linux - 请帮我解决 Linux/openCL 权限混淆

> ID：12590878
> 
> 赞同：1
> 
> 时间：2012-09-25T20:52:41.407
> 
> 标签：linux, permissions, opencl, user-permissions

操作系统：Debian GNU Linux x86_64 3.2.0-3 “Wheezy”（无需 root 登录）
CPU：AMD Phenom(tm) II X6 1100T 处理器 [Family 16 Model 10 Stepping 0]
GPU：AMD ATI Radeon HD 5800 series (Cypress) ( 1024MB) 驱动程序：1.4.1741
BOINC：来自 Wheezy 存储库的 7.0.27 版
AMD/ATI Catalyst：12.8 版 --- 包含 openCL 1.2
AMDAPP SDK：未安装 --- 对 BOINC 项目没有影响。

Linux BOINC 用户都知道，当 boinc 客户端安装为守护进程（默认设置）时，BOINC 项目看不到 ATI GPU。将 boinc 用户从“boinc”更改为“root”将使它们对项目。

我也在尝试没有成功的 Mathematica openCL 示例（安装了 AMDAPP SDK。）

在这两种情况下，以 root 身份执行都是成功的。对于 BOINC，我从根终端运行。我可以为 Mathematica 做同样的事情，但我每次都必须重新验证。

**如何让 BOINC 和 Mathematica 都以默认权限运行？**

在我尝试建立一个每个人都可以成为成员的 openCL 组之前，我会问这个问题，但我不确定是否存在任何安全问题。（我什至不确定这是否是解决方案。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:23:38.430

BOINC 有一个修复程序，直到 AMD 完成对 gpu 驱动程序的修复程序。

我正在回答以删除问题。直到发帖一段时间后，我才意识到这个问题无法被其他人复制，因此很难解决。

# c# - 获取 NVP 的正则表达式

> ID：12590880
> 
> 赞同：0
> 
> 时间：2012-09-25T20:52:50.897
> 
> 标签：c#, regex

是否有一个正则表达式可以从下面的字符串中给我一个名称值对，如下所示：

状态码 = 179640000
new_Approved = 179640002

从：

`&$filter=statuscode/Value eq 179640000 and new_Approved/Value eq 179640000`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:04:13.843

示例程序：

```
 public static void Main()
    {
        string src = "&$filter=statuscode/Value eq 179640000 and new_Approved/Value eq 179640000";
        Regex regex = new Regex(@"(\w*)/Value eq (\w*)");

        foreach (Match m in regex.Matches(src))
        {
            foreach (Group g in m.Groups)
            {
                Console.WriteLine(g.Value);
            }
        }
    } 
```

给出以下输出

```
statuscode/Value eq 179640000
statuscode
179640000
new_Approved/Value eq 179640000
new_Approved
179640000
Press any key to continue . . . 
```

您在比赛中为每个组所拥有的是：

1.  比赛本身
2.  值的名称
3.  价值本身。

它假定所有名称和值都只是字母数字和`'_'`，它还假定您的源字符串没有其他曲线球。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:00:23.300

`^&filter=({[0-9a-zA-Z]+}/Value eq {[0-9a-zA-Z]+})( and )?)$`

我认为这可以作为一个通用模板。您需要稍微修改语法以使用您正在使用的任何正则表达式引擎。

# javascript - 使用javascript定位div的背景图像

> ID：12590882
> 
> 赞同：0
> 
> 时间：2012-09-25T20:53:00.467
> 
> 标签：javascript, image, positioning, crop, clipping

我正在尝试制作一个剪辑窗口，但没有发生，这是代码示例：

```
<html>
<head>
    <style>
        #clippingWindow
        {
            height:178px;
            width:278px;
            overflow: hidden;
        }
        #bgImg
        {
            left:35px;
            border:54px;
        }
    </style>
    <script language="javascript">

        function getImgSize()
        {

            var ds = document.getElementsByName('a');
            var wid = ds[0].width;
            var pos = (wid-278)/2;

            alert(pos);
            alert(ds[0].id);

            if(ds[0].width>278)
            {
                dt.style.left=500; //this is not working
            }
        }
    </script>
</head>
<body><input type="button" onClick="getImgSize();">
    <div id="clippingWindow">
        <img name="a" src="sss.bmp" id="bgImg">
    </div><br><br><br>
    <div id="ad">
        <img name="a" src="484.jpeg">
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:56:09.640

您可能需要将`position`要定位的元素的属性设置为类似`absolute`或`relative`（例如`ds.style.position = "relative";`）。该`left`属性对静态定位的元素没有任何影响。

此外，您可能需要使用`"500px"`而不是 number `500`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:01:31.197

我看到三个问题：

1.  `dt.style.left=500;`应该`ds.style.left=500; (but see point #3)`
2.  你需要定位你的`#bgImg`元素。前任：`position:relative;`
3.  大多数浏览器应该可以使用您的 500 单元，`ds.style.left=500;`但`dts.style.left='500px';`会更好。

**[jsFiddle 示例](http://jsfiddle.net/j08691/vZ6PY/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:55:05.117

您必须使用值和测量值设置 css 属性“left”，例如“500px”（您忘记了 px）

# java - JAVA ClassLoad 相同的类名

> ID：12590884
> 
> 赞同：2
> 
> 时间：2012-09-25T20:53:06.817
> 
> 标签：java, jakarta-ee

昨天我想了一个问题，以下是详细信息：

我有 3 个 JAR 文件，**a.jar**，**b.jar**，**c.jar**。这两个 jars 文件都有一个名为**com.test.Test**的类，并且**sayHello()**是在这个类中定义的。

我创建了一个 Web 应用程序，我引用了 a.jar,b.jar,c.jar 。在主要方法中，我涉及 sayHello(); .此时，将加载哪个com.test.Test？

结果是一个.jar。

有人告诉我原因吗？？提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T20:54:18.613

这就是java[语言规范](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html)所说的。它加载类路径中第一次出现的**类**并忽略其他类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:11:35.363

与其关注将加载哪个，不如意识到 JAR 文件中的内容可能需要*他们的* `com.test.Test`类而不是*其他人的* `com.test.Test`类才能正常工作。这意味着*对于一个功能系统*，您必须`a.jar`找到一种方法，`a.jar's` `com.test.Test`而不是在`b.jar`. 寻找`b.jar`优先*于* `a.jar's`.

做到这一点的唯一方法是使用一个框架，它在 java 包机制*之外**添加*名称间距。这通常使用多个类加载器来完成，通常每个 JAR 文件一个。您可以自己编写这样的东西（[Tomcat 做过](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)），您需要在其中指定跨加载器发现的规则，或者使用类似于[OSGi](http://en.wikipedia.org/wiki/OSGi)框架的东西。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:54:28.597

将使用类路径中首先出现的 Jar 文件。您可以将`CLASSPATH`环境变量修改为 Jar 文件的路径

假设您将其修改如下： -

`set CLASSPATH = %CLASSPATH%;.;a.jar;b.jar`

然后将使用 a.jar..

您还可以通过以下方式对其进行修改：-

`set CLASSPATH = %CLASSPATH%;.;b.jar;a.jar`

在这种情况下，将使用 b.jar。您需要从您的`Command Line`..运行这些命令。

** 注意： - 如果您使用任何 IDE，那么它们不使用系统类路径。您需要为您使用的 IDE 设置不同的类路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T21:18:22.453

如果您使用的是 IDE，例如 eclipse，您可以在项目的属性上修改您的类路径，然后转到 Build Path，然后您有 Order and Export 选项卡，您可以在其中上下移动 jar。顶部的一个将是您的应用程序首先采用的。

您也可以通过编辑项目中名为“classpath”的文件手动执行此操作，然后将您希望应用程序首先使用的 jar 移至顶部。*

# git - 当我想要一个新的拉动时，Git 重新初始化

> ID：12590885
> 
> 赞同：-1
> 
> 时间：2012-09-25T20:53:10.880
> 
> 标签：git, github, initialization, pull, git-pull

如何获得新的拉力？每次我尝试这样做时，它都会拉动我以前拥有的同一个 git，但我正在尝试拉一个新的。我怎么做？

我不想做你通常会做的事情，即更新现有的，如下所述： [运行 git init 两次初始化存储库还是重新初始化现有存储库？](https://stackoverflow.com/questions/5149694/does-running-git-init-twice-initialize-a-repository-or-reinitialize-an-existing)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:11:16.470

很难从这个问题中分辨出来，但我的猜测是你试图从一个不同的存储库中提取，而不是你最初提取的，但是到同一个本地存储库。

为此，请使用`git remote add <name> <url>`将新存储库添加为附加远程，并从新远程拉取`git pull <name>`

查看[git 远程](http://www.kernel.org/pub/software/scm/git/docs/git-remote.html)手册页以获取更多信息。

# php - 检查变量在 URL 中然后定义

> ID：12590887
> 
> 赞同：-1
> 
> 时间：2012-09-25T20:53:36.137
> 
> 标签：php, http

我试图在这里做一个简单的功能，但它不起作用。

我想检查变量是否确实在 URL 中，如果是，我想用它定义一个变量。

```
if(isset($_GET['ref'])){
$ref = $_GET['ref'];
} 
```

有人可以指出错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:59:34.820

可能 isset 只检查变量是否已被声明。该变量仍可能为空。所以这将设置 $ref 即使 $_GET['ref'] = ""; 试试这个：

```
if(isset($_GET['ref'])){
    if(!empty($_GET['ref'])))
    {
        $ref = $_GET['ref'];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:03:46.697

Get 和 Post 变量可以作为数组访问。我会遍历数组并将其视为键/值对。这将使您能够使用密钥和值做任何您想做的事情。

```
foreach($_POST as $key=>$value)
{
  echo "$key=$value";
} 
```

请参阅此先前的 Stack Overflow 线程。 [如何从 $_POST 获取键值？](https://stackoverflow.com/questions/183914/how-do-i-get-the-key-values-from-post)

# eclipse - 如何运行 Spring in Action 第三版源代码

> ID：12590888
> 
> 赞同：6
> 
> 时间：2012-09-25T20:53:41.220
> 
> 标签：eclipse, spring, maven-3

我提取**了 sia3-code** ZIP 文件并将提取的**sia3-code**文件夹导入为我的**Eclipse Helios IDE中的****现有 Maven 项目**。它导入得很好，但我在构建路径中看不到任何**src**文件夹，我无法运行测试类。

 ****这是它的外观： ![在此处输入图像描述](../Images/84f08f895bf8424a9f1748e911f9c728.png)

有人可以帮助我如何获取作为 maven 项目运行的本书附带的源代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-09T10:52:09.113

1] 将源代码下载到一个目录中，我将其称为 code_dir_tree

2]编辑code_dir_tree根中的pom.xml如下：

代替：

```
<modules>
        <module>translators</module>
</modules> 
```

和：

```
<modules>
        <module>knights</module>
    <module>rest-client</module>
    <module>springidol</module>
    <module>springidol-annotation</module>
    <module>springidol-aop</module>
    <module>springidol-aspectj</module>
    <module>springidol-atinject</module>
    <module>springidol-autodiscovery</module>
    <module>springidol-javaconfig</module>
    <module>springidol-qualifiers</module>
</modules> 
```

3] 从 code_dir_tree 根目录中的命令 shell，运行：mvn eclipse:clean

4]在eclipse中，确保你有一个刷新的，最好是空的工作区

5] 将整个 code_dir_tree 手动复制到工作区 - 而不是单个项目，code_dir_tree 本身。

6]在eclipse中，执行导入| 现有的maven项目，选择code_dir_tree根（已经在工作区中），确保包括pom.xml在内的所有项目都被选中，点击完成

7] 运行 maven 更新，全新安装构建 - 除了 rest-client 之外的所有 -maven- 项目，它具有未解决的依赖关系，现在应该准备好了

*剩下的项目 spitter 和 SpringPizza 都是 gradle 项目 - 需要安装 STS，它有 gradle 集成，需要安装才能获得这些导入*

8]在eclipse中，执行导入| gradle 项目，选择 spitter 目录，点击确定，选择“构建模型”，完成后确保全部选中，点击完成

9] 对 SpringPizza 重复与 8] 中相同的过程

***就是这样 - 你应该准备好滚动了！***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:12:24.870

在包资源管理器中，右键单击 java 目录并选择 Build Path->Use as source folder。对两个 java 目录（src/main 中的一个和 src/tst 中的一个）执行此操作。

然后右键单击该项目并选择Configure->Convert to Maven project。

**更新：**

我认为您需要安装 M2Eclipse 插件。这里有[一些方向](http://www.sonatype.com/books/m2eclipse-book/reference/install-sect-marketplace.html)。然后您应该能够右键单击您的项目并选择 Maven->Enable Dependency Management。

由于您使用的是 Spring，我*强烈*建议您查看 SpringSource Tool Suite。它是 Eclipse 捆绑了许多有用的插件（例如 m2eclipse）。这是他们网站上的一个简短片段：

> Spring Tool Suite™ (STS) 为构建 Spring 驱动的企业应用程序提供了最好的 Eclipse 驱动的开发环境。STS 为所有最新的企业 Java 和 Spring 提供工具，并且在最新的 Eclipse 版本之上。

阅读 STS 并在其网站上下载：[http ://www.springsource.org/sts](http://www.springsource.org/sts)

**第二次更新：**

我想我明白你做错了什么。看起来您将项目的根指定为包含文件夹“sia3-code”的目录。这导致所有项目都在一个大项目下崩溃，我很确定，这不是你想要的方式。

从 Eclipse 中删除该项目。然后在 Package Explorer 中，右键单击并选择 Import。选择“现有项目到工作区”。选择根目录为/your/path/to/sia3-code/（不要选择根目录为/your/path/to/）。然后选择完成。您会看到有 10 多个项目导入到您的 IDE 中。

上述步骤已在 STS 中进行了验证，因此如果您使用的是 Eclipse Helios，您可能需要对它们进行一些调整。****

# php - 简单的 jQuery - php 通信

> ID：12590901
> 
> 赞同：2
> 
> 时间：2012-09-25T20:54:20.813
> 
> 标签：php, jquery, ajax, interface

我正在开发一个 php 应用程序，现在我必须构建一个接口来在 jquery 和 php 之间进行通信。我已经有一个工作控制器/动作。如果我需要在请求中将数组发送到 php，那么与 jQuery 进行通信的最佳方式是什么。

示例：完成请求所需的数据：

```
$request_data = array 
(
  'key1' => 'value1',
  'list1' => array
  (
    'listkey1' => 'listvalue1',

  )
) 
```

我应该以不同的方式发送它作为“正常”的后请求，还是更容易发送一个用 json 编码的数组的后变量？($post_json="{key: value....})

重点是在 jquery 中的轻松集成

编辑：这不是将数据传递给客户端，而是将数组从客户端传递给 php-script

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:01:00.700

使用 phps json_encode() 生成响应，并在客户端使用 jquery 读取它？

```
$.getJSON('youpage.php', function(data) {
  $.each(data, function(key, value) {
    alert(key + '=>' + value);
  });
} 
```

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

更新

in regards to communication the other way, from the client to php. It all depends on the task at hand really. If the data in the drop down purely depend on the entries on the form, and they are otherwise stateless. Then,the best route will depends on your backend code, you could do a ajax post, with the individual variables, or concatenate them into one variable before sending, and then splitting them up on the backend. Or, as you say, you could create a json string and then use json_decode on the backend.

Which route is fit for purpose depends on many factors, and I dont think there is a right or wrong error.

Personally, I would generate a AJAX post request (im not a php coder though) to the backend, and then process the request object directly. You still would need to process a data structure, so why add the overhead/extra-step of deserializing json from the request.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:12:22.803

你可以使用jquery post

```
$.post('url', data, function(data) {
  console.log(data);
}); 
```

您可以访问 php 中的数据

```
echo $_POST['key1'];
echo $_POST['key2']; 
```

# r - 多个块命令的矢量化 if-else

> ID：12590903
> 
> 赞同：4
> 
> 时间：2012-09-25T20:54:24.117
> 
> 标签：r, if-statement

我正在寻找一种基于单个条件语句执行多个变量赋值的方法。ifelse 函数一次执行我想要的单个变量，但我希望能够基于单个条件执行一个语句块。

这是一些简化的示例代码：

```
within(mydata, {
  if (gender == "f") {
    test1 <- 1
    test2 <- 2
  } else {
    test1 <- 0
    test2 <- 0
  }
  test3 <- gender
  test4 <- ifelse(gender == "f", 1, 0)
  test5 <- ifelse(gender == "f", 2, 0)  
}) 
```

这给出了以下输出：

```
 workshop gender q1 q2 q3 q4 test5 test4 test3 test2 test1
1        1      f  1  1  5  1     2     1     f     2     1
2        2      f  2  1  4  1     2     1     f     2     1
3        1      f  2  2  4  3     2     1     f     2     1
4        2      f  3  1 NA  3     2     1     f     2     1
5        1      m  4  5  2  4     0     0     m     2     1
6        2      m  5  4  5  5     0     0     m     2     1
7        1      m  5  3  4  4     0     0     m     2     1
8        2      m  4  5  5  5     0     0     m     2     1
Warning message:
In if (gender == "f") { :
  the condition has length > 1 and only the first element will be used 
```

当我运行这段代码时，test4 和 test5 被正确分配，但 test1 和 test2 被错误分配，因为 if 语句只返回第一行的值。有没有办法做我正在尝试对 test1 和 test2 做的事情 - 基于单个条件为数据帧的每一行运行多个语句？

我知道我可以使用 ifelse 完成相同的结果，但我希望能够将这些语句组合在一起，以便在阅读我的代码时更加清晰。

例如，我希望能够按度量对我所做的储蓄计算进行分组，如下所示：

```
a.lighting.all.3 <- within(a.lighting.all.3, {
  if (measure.subcategory %in% c('HID to Linear Fluorescent Retrofit', 
                                 'Hardwired CFL', 'Induction Lighting', 
                                 'Screw-In CFL', 'Specialty Screw-In CFL',
                                'T12 to Premium T8/T5', 'T12 to Standard T8/T5',
                                 'T8 to Premium T8', 'T12/T8 Delamping')) {
    kw.nc.v <- (base.watts - ee.watts) / 1000 * (1 + dif) * df * quantity
    kwh.v <- (base.watts - ee.watts) / 1000 * (1 + eif) * op.hrs * quantity    
  } else if (measure.subcategory == 'Traffic Signals') {
    kw.nc.v <- (base.watts - ee.watts) / 1000 * quantity
    kwh.v <- (base.watts - ee.watts) / 1000 * op.hrs * quantity    
  } else if (measure.subcategory == 'Exit Sign Retrofit') {

  } else if (measure.subcategory %in% c('LED Channel Lights',
                                        'Cold Cathode FL')) {
  } else if (measure.subcategory %in% c('Daylighting Controls', 
                                        'Occupancy Sensors')) {

  } else if (measure.subcategory == 'Lighting Power Density') {

  } else if (measure.subcategory == 'LED Lighting') {

  }
}) 
```

或按度量分配参数集，例如：

```
a.lighting.all.3 <- within(a.lighting.all.3, {
  switch(as.character(measure.subcategory),
     "T8 to Premium T8" = {
       op.hrs <- 4481
       cf <- 0.93
     },
     "Cold Cathode FL" = {
       op.hrs <- 6400
       cf <- 1
     },
     "Exit Sign Retrofit" = {
       op.hrs <- 8760
       cf <- 1
     },
     "LED Channel Lights" = {
       op.hrs <- 5110
       cf <- 0.134
     },
     "Traffic Signals" = {
       op.hrs <- ifelse(grepl("Green", measure), 3679, 4818)
       df <- ifelse(grepl("Green", measure), 0.42, 0.55)
       cf <- 1
     },
     "Daylighting Controls" = {
       dsf <- esf <-  0.54  # daylight savings fraction
     },
     "Occupancy Sensors" = {
       dsf <- 0.16  # demand savings fraction
       esf <- 0.39  # energy savings fraction
     },
     "LED Lighting" = {
       if (measure %in% c("Pedestrian NO countdown", 
                          "Pedestrian W/ countdown")) {
         cf <- 1
         op.hrs <- ifelse(measure == "Pedestrian W/ countdown", 6483, 5432)
         op.hrs.base <- 5432
         df <- ifelse(measure == "Pedestrian W/ countdown", 0.74, 0.62)
         df.base <- 0.62
       } else if (measure %in% c("Refrigerated Case LED Lamps NO motion Sensors",
                                 "Refrigerated Case LED Lamps W/ motion Sensors")) {
         cf <- 1
         dif <- 0.25
         eif <- 0.25
         op.hrs.base <- 8634
         op.hrs <- ifelse(measure == "Refrigerated Case LED Lamps W/ motion Sensors",
                          6043, 8634)
       }
     }
  )
}) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:28:40.270

```
d <- data.frame(workshop=rep(1:2,4),
                gender=rep(c("f","m"),each=4)) 
```

我不知道这个答案是否让你高兴，但是：如果你习惯于对代码*块*`plyr`进行操作，你可以用一个语句 做你想做的事。*`if`*

 *```
library(plyr)
ddply(d,"gender",
      function(x) {
          within(x, {
              test3 <- gender
              ## test FIRST value only, since by construction they
              ## are all the same within a piece
              if (gender[1]=="f") {
                  test1 <- 1
                  test2 <- 2
                  test4 <- 1
                  test5 <- 1
              } else {
                  test1 <- test2 <- test4 <- test5 <- 0
              }})
      }) 
```

请注意，这将按性别将您的数据重新排列成块（在此示例中它不会改变任何内容），这可能是不可取的......

我没有在示例中包含其他变量，但它们会正确进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T23:03:46.347

用于时间和内存效率以及编码优雅的 data.table 解决方案

```
library(data.table)
DT <- as.data.table(d)

DT[,  `:=`(paste0('test',1:5), list((1:0)[gender],  
            (c(2,0))[gender], gender, (1:0)[gender], (1:0)[gender])), with = F] 
```

`:=``LHS`如果参数是名称的字符向量（要创建）并且 RHS 是一个包含要使用的值的列表，则将通过引用分配并且可以用于多个列。

该解决方案还利用了因子变量这一事实，`gender`我们可以使用底层整数值来引用重新编码。

你也可以做类似的事情

```
setkey(|Dt, gender)
DT['f', test1 := 1]
DT['m', test1 := 0]
DT['f', test2 := 2]
DT['m', test2 := 0]
DT[,test3 := gender]
# etc 
```

如果性别不是性格因素，这将发出警告，但仍然有效。*

# scala - Neo4j 中的多线程节点创建

> ID：12590907
> 
> 赞同：4
> 
> 时间：2012-09-25T20:54:36.910
> 
> 标签：scala, transactions, neo4j

我分批创建了 100 万个 Neo4j 节点，每批 10000 个，每批都在自己的事务中。奇怪的是，将这个进程与多线程执行并行化并没有对性能产生任何积极影响。就好像不同线程中的事务相互阻塞一样。

这是一段 Scala 代码，它在并行集合的帮助下对此进行了测试：

```
import org.neo4j.kernel.EmbeddedGraphDatabase

object Main extends App {

    val total = 1000000
    val batchSize = 10000

    val db = new EmbeddedGraphDatabase("neo4yay")

    Runtime.getRuntime().addShutdownHook(
        new Thread(){override def run() = db.shutdown()}
    )

    (1 to total).grouped(batchSize).toSeq.par.foreach(batch => {

        println("thread %s, nodes from %d to %d"
            .format(Thread.currentThread().getId, batch.head, batch.last))

        val transaction = db.beginTx()
        try{
            batch.foreach(db.createNode().setProperty("Number", _))
        }finally{
            transaction.finish()
        }
    })
} 
```

`build.sbt`以下是构建和运行它所需的行：

```
scalaVersion := "2.9.2"

libraryDependencies += "org.neo4j" % "neo4j-kernel" % "1.8.M07"

fork in run := true 
```

`.par`可以通过在 external 之前删除和添加调用来在并行模式和顺序模式之间切换`foreach`。控制台输出清楚地表明，`.par`执行确实是多线程的。

To rule out possible problems with concurrency in this code, I have also tried an actor-based implementation, with about the same result (6 and 7 seconds for sequential and parallel versions, respectively).

So, the question is: did I do something wrong or this is a Neo4j limitation? Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T22:58:36.320

The main issue is that your tx arrive at about the same time. And transaction commits are serialized writes to the transaction log. If the writes would be interleaved time-wise and the actual node-creation a more expensive process you would get a speedup.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:41:39.340

Batch insert does not work with multiple threads. From the neo4j Documentation:

> Always perform batch insertion in a single thread (or use synchronization to make only one thread at a time access the batch inserter) and invoke shutdown when finished.

[Neo4j Batch insert](http://docs.neo4j.org/chunked/stable/batchinsert.html)

# .net - SSRS - 如果数据源中没有数据，则为空页面？

> ID：12590909
> 
> 赞同：0
> 
> 时间：2012-09-25T20:54:50.077
> 
> 标签：.net, visual-studio, reporting-services, mdx, business-intelligence

我有一个报告，如果用户在数据源中没有数据，用户会看到空白页面。有 5 个表。我尝试使用 NoRowsMessage 但它仍然显示空白页面。

如果源中没有特定用户的数据，有没有办法显示一些消息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:24:37.780

```
Tbx1.NoRowsMessage = "No Data returned for this section." 
```

应该管用。

您可以强制使用旧学校方法。在该部分上方添加一个文本框，并在隐藏 tablix 时显示它。

```
TextBox1.Text = "No Data returned for this section."
TextBox1.Hidden = IIf(Sum(Fields!SOME_ID.value, "SOME_DATA_SET")<>0, False, True)

Tbx1.Hidden = IIf(Sum(Fields!SOME_ID.value, "SOME_DATA_SET")<>0, True, False) 
```

假设 SOME_ID 始终为正数。

文本框没有 .NoRowsMessage。

# c++ - 函数的执行时间在运行时减少。(C++) 为什么？

> ID：12590917
> 
> 赞同：1
> 
> 时间：2012-09-25T20:55:25.067
> 
> 标签：c++, qt, posix, qmake, timespec

出于某些测试目的，我编写了一段代码，用于测量我的实时视频处理代码中几个快速操作的执行时间。一切正常。我得到了非常现实的结果，但我注意到了一个有趣的特点。

我正在使用带有属性的**POSIX**函数。所以我得到了纳秒精度（1/1000000000sec）的时间规格，据说以这种方式获得时间规格值只需要几个处理器滴答声。`clock_gettime``CLOCK_MONOTONIC`

这是我用来保存时间规格的两个函数。我还添加了正在使用的数据结构的定义：

```
QVector<long> timeMemory;
QVector<std::string> procMemory;
timespec moment;

void VisionTime::markBegin(const std::string& action) {
    if(measure){
    clock_gettime(CLOCK_MONOTONIC, &moment);
    procMemory.append(action + ";b");
    timeMemory.append(moment.tv_nsec);
    }
}

void VisionTime::markEnd(const std::string& action) {
    if(measure){
    clock_gettime(CLOCK_MONOTONIC, &moment);
    procMemory.append(action + ";e");
    timeMemory.append(moment.tv_nsec);
    }
} 
```

我将结果收集到稍后使用的几个 QVector 中。

我注意到，当这两个函数第一次执行时（紧接着彼此，它们之间没有任何内容），两个保存的时间规格之间的差异约为 34000ns。下一次差异会小 2 倍左右。等等。如果我执行它们数百次，则平均差异约为 2000ns。因此，这些函数的平均循环执行时间比第一个要少 17000 倍。因为我连续进行了数百次测量，所以对我来说，一些第一次处决的时间长一点并不重要。但无论如何它只是让我感兴趣，为什么会这样？

我在 Java 方面有各种经验，但我对 c++ 还是很陌生。我不太了解这里的情况。我正在使用 O3 标志进行优化级别。我的 QMake 配置： `QMAKE_CXXFLAGS += -O3 -march=native`

那么，谁能告诉我，这段小代码的哪一部分在运行时变得更快，如何以及为什么？我怀疑附加到 QVector。优化是否会以某种方式影响这一点？

这是我在 stackoverflow 上的第一个问题，希望不会太长 :) 非常感谢您的所有回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:06:53.037

这可能是由于分支预测。[http://en.wikipedia.org/wiki/Branch_predictor](http://en.wikipedia.org/wiki/Branch_predictor)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T03:30:46.397

您的测量代码中有很多潜在的首次成本，这里有几个以及如何测试它们。

**内存分配**：这些 QVector 在您第一次使用它们之前不会在堆上分配任何内存。

此外，该向量很可能会从分配少量内存开始，然后随着您添加更多数据而以指数方式分配更多内存（此类容器的标准折衷方案）。因此，您将在运行时开始时分配许多内存，然后频率会随着时间的推移而降低。

您可以通过查看 的返回值来验证这是否正在发生`QVector::capacity()`，并通过以下方式调整行为`QVector::reserve(int)`- 例如，如果您这样做`timeMemory.reserve(10000);`，`procMemory.reserve(10000);`您可以在测量开始之前为前一万次测量保留足够的空间。

**惰性符号绑定**：默认情况下，动态链接器不会解析来自 Qt（或其他共享库）的符号，直到需要它们。因此，如果这些测量函数是代码中调用某些`QVector`或`std::string`函数的第一个位置，则动态链接器将需要做一些一次性工作来解析这些函数，这需要时间。

如果确实如此，您可以通过`LD_BIND_NOW=1`在 Linux 或`DYLD_BIND_AT_LAUNCH=1`Mac 上设置环境变量来禁用延迟加载。

# magento - Magento1.7：面临购物车问题

> ID：12590926
> 
> 赞同：-1
> 
> 时间：2012-09-25T20:56:18.750
> 
> 标签：magento, magento-1.7

我在 Magento 中遇到了一些关键问题：
当我登录并在购物车中添加一些产品并注销时，再次登录然后这些产品仍留在购物车中。

----> 这不应该发生，因为我设置了“注销时清除持久性”。

本案例涉及的步骤如下：

1.  我登录了。
2.  在我的购物车中添加了 2 件产品。
3.  现在我退出了。
4.  然后在没有登录的情况下，我浏览了网站并将 4 个产品添加到购物车。
5.  之后，在结帐时，我被要求登录，所以我登录了。
6.  现在，我在购物车中看到 2+4=6 个产品，而不是 4 个产品（这是预期的）。

我配置如下——

*   启用持久性 - 是
*   持久性寿命（秒） -- 60
*   启用“记住我”——是
*   “记住我”默认值 --- 否
*   注销时清除持久性 - 是
*   坚持购物车——是的

但无法弄清楚问题所在，我在配置中设置了 60 秒。我退出，5 分钟后再次登录。我发现产品仍在购物车中。

根据配置，我退出后必须从购物车中删除产品。

我搞砸了这个问题。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:20:15.220

这是 Magento 1.5 中引入的持久购物车功能。您可以在以下位置禁用它：

系统->配置->持久购物车

# php - 从 PHP 中的另一个数组值对数组进行排序

> ID：12590929
> 
> 赞同：1
> 
> 时间：2012-09-25T20:56:23.570
> 
> 标签：php, sorting, multidimensional-array

我有一个 $actions 数组和 $actions_used 数组。

$actions_used 看起来像这样：

```
array(1) {
  [2]=>
  string(1) "18"
  [5]=>
  string(1) "33"
} 
```

$actions 看起来像这样：

```
array(3) {
      [1]=>
      string(9) "Withdraw"
      [2]=>
      string(13) "Deposit"
      [5]=>
      string(10) "Blabla"
    } 
```

我想根据 $actions_used 中的值对 $actions 进行排序。

正确的输出是 $actions：

```
array(3) {
      [5]=>
      string(9) "Blabla"
      [2]=>
      string(13) "Deposit"
      [1]=>
      string(10) "Withdraw"
    } 
```

为什么？因为数组键 5，“Blabla”具有最大值“33”，然后是数组键“2”，其值为 18，最后是数组键 1，“Withdraw”，其值为 0（无值）

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:04:42.633

这应该可以解决问题。

```
$sorted_actions = array();
asort($actions_used);
foreach($actions_used AS $key => $amount) {
  $sorted_actions[] = array('amount' => $amount, 'action' => $actions[$key]);
  unset($actions[$key]);
}
$sorted_actions = $sorted_actions + $actions; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:01:31.353

我认为您可以对第二个数组进行排序，`uksort`并实际比较自定义比较器中第一个数组的值

例如：

```
uksort($arr2, function($i1, $i2) {
    return $arr1[$i1] - $arr1[$i2];
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T21:04:31.807

这样的事情会如何工作？

```
arsort($action_used);
foreach ($action_used as $k => $v) {
    $newArray[$k] = $actions[$k];
    unset($action_used[$k];
}
$newArray = array_merge($newArray, $action_used); 
```

# batch-file - 将 * 与批处理文件一起使用以获取文件名

> ID：12590930
> 
> 赞同：1
> 
> 时间：2012-09-25T20:56:27.543
> 
> 标签：batch-file, window

我使用的是 Windows XP，需要创建一个批处理文件来将 tok.filename 移动到 filename.tok。如果我输入，这适用于一个文件`fix.bat tok.filename`。

```
set filename=%1
set newname=%filename:~4,45%
ren %1 %newname%.tok 
```

我需要输入`fix.bat tok*`，但这会`tok*`输入文件名。

如何让它一次将所有文件读入文件名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:08:57.543

使用`for`声明。

```
setlocal enabledelayedexpansion

for %%i in (tok.*) do (
  set filename=%%i
  set newname=!filename:~4,45!
  ren %%i !newname!.tok
) 
```

启用延迟扩展可以使变量在使用时进行评估。

或者，由于您已经有一个可以工作的批处理文件，您可以编写另一个使用该`for`语句的批处理文件，该语句调用您的工作批处理文件——如下所示：

```
for %%i in (tok.*) do call fix.bat %%i 
```

或者你可以像这样直接从命令行运行它：

```
for %i in (tok.*) do call fix.bat %i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T02:15:02.463

不需要批处理脚本

```
for %F in (tok.*) do for /f "delims=." %X in ("%~xF") do ren "%F" "%X.%~nF" 
```

如果在批处理脚本中使用，则将百分比加倍。

`.`如果文件名中出现多个，则上述内容可能无法提供所需的结果。

例如`tok.part1.part2`会变成`part2.tok.part1`.

如果您愿意`part1.part2.tok`，可以使用以下简单脚本。

```
@echo off
ren tok.* .*?.tok
for %%F in (.*.tok) do for /f "tokens=* delims=." %%A in ("%%F") do ren "%%F" "%%A" 
```

有关第一个 REN 如何在第二个脚本中工作的说明，请参阅[Windows RENAME 命令如何解释通配符？](https://superuser.com/q/475874/109090)

我想可以提出一个深奥的论点，即当它应该`tok..name`成为一个名字时。这可以通过使用来解决：`name.tok``.name.tok`

```
@echo off
setlocal disableDelayedExpansion
ren tok.* .*?.tok
for %%F in (.*.tok) do (
  set "name=%%F"
  setlocal enableDelayedExpansion
  ren "!name!" "!name:~1!"
  endlocal
) 
```

上述解决方案的好处是它们不依赖于“tok”的长度。任何长度的字符串值都可以代替“tok”，并且代码也可以正常工作。

James L 解决方案适用于恒定长度。该解决方案可以改进一点。

*   不需要子字符串操作的第二个参数。无论完整的原始名称有多长，删除它都可以让解决方案工作。
*   如果名称中有一个，代码将失败`!`。通过打开和关闭延迟扩展来修复。
*   文件名应在 REN 语句中引用，以防出现空格或特殊字符

.

```
@echo off
setlocal disableDelayedExpansion
for %%i in (tok.*) do (
  set "filename=%%i"
  setlocal enableDelayedExpansion
  ren "!filename!" "!filename:~4!.tok"
  endlocal
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T11:38:06.097

您也可以在不延迟扩展的情况下执行相同操作（这很慢）。此外，如果只有一个点，则无需明确使用名称部分的长度。%~n 扩展为不带扩展名的文件名， %~x 扩展为带扩展名的点（所以我删除了带扩展名的点`:~1`）。

此外，在 for 中使用 %*，您可以传递任意数量的参数。

甚至更多。如果在 %%I 和 %%I 之间添加 /R （你会得到`for /R %%I`），它也会递归到子目录中。

整个批处理文件：

```
for %%I IN (%*) do call :Rename "%~I"
exit /b

:Rename
    set newname=%~x1
    ren %1 "%~dp1%newname:~1%.%~n1"
exit /b 
```

# powershell - 从PowerShell中的文件名中删除字符

> ID：12590931
> 
> 赞同：4
> 
> 时间：2012-09-25T20:56:38.810
> 
> 标签：powershell

我是 powershell 的新手，想知道是否有办法从文件名中删除字符。我要删除的字符是破折号“-”，有时文件名中有 2 或 3 个破折号。是否可以重命名包含破折号的文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T21:15:01.207

```
Get-Item .\some-file-with-hyphens.txt | ForEach-Object {
  Rename-Item $_ ($_.Name -replace "-", "")
} 
```

这个问题可能更适合超级用户。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-12T10:04:38.370

要删除或替换文件名中的字符，请使用单引号`'`，“特殊”字符使用反斜杠转义它们，`\`以便正则表达式解析器按字面意思理解。

以下`$`从当前目录中的所有文件名中删除（美元符号）：

```
Get-Item * | ForEach-Object { rename-item $_ ($_.Name -replace '\$', '') } 
```

以下与上述相同，为每个命令使用较短的别名：

```
gi * | % { rni $_ ($_.Name -replace '\$', '') } 
```

以下是`Z`从当前目录中的所有文件名中删除标准字符“”：

```
gi * | % { rni $_ ($_.Name -replace 'Z', '') } 
```

# android - 什么是 Android 的最佳分离概念。如何以最佳方式分离包裹

> ID：12590933
> 
> 赞同：0
> 
> 时间：2012-09-25T20:56:44.460
> 
> 标签：android, package

如何为此目标分离 android 应用程序的不同包：

*   我有几个视图，我们将在这些视图上编辑和显示一些数据。
*   我也有`REST service`。

如何以最佳方式分离包裹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:08:04.177

当我拥有一个产品系列时，我喜欢制作一个共享功能的“共同核心”库。有几个如何创建/使用“android 库”的示例 - 请参阅文档“Managing Projects From Eclipse w/ADT”有一节“Setting a Library Project”

此外，还有一个带有 SDK 的示例应用程序，它说明了库的使用。请参阅“井字游戏库”和“井字游戏主程序”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:16:03.510

基于 android 组件、Activity、contentProvider、database、broadcast、ui for customcomponent 的单独包 .... 参见 Google 开源项目[http://code.google.com/p/libs-for-android/](http://code.google.com/p/libs-for-android/)

# iphone - 找不到 当我完成安装和配置时

> ID：12590937
> 
> 赞同：1
> 
> 时间：2012-09-25T20:57:41.743
> 
> 标签：iphone, objective-c, ios, frameworks

我遵循了与下面完全相同的步骤。 [https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)

但是，我在构建项目时遇到了一个错误，它是 clang: error: ***

> 没有这样的文件或目录：'/Users/ ***** **** (My Apple ID)/Library/Developer/Xcode/DerivedData/CoffeeShop-dsxackkfpgdbdphjbiezjinakwam/Build/Products/Debug-iphonesimulator/RestKit/RestKit'

* * *

我想可能是**Header Search Path**有问题。我使用“$(BUILT_PRODUCTS_DIR)/../../Headers”作为输入。但是，我会尝试所有我知道的可能路径。问题依旧。

# ios - 用户如何通过创建新属性向表中添加新字段

> ID：12590938
> 
> 赞同：0
> 
> 时间：2012-09-25T20:57:45.943
> 
> 标签：ios, xcode, core-data, attributes

我是 Core Data 的新手，我被困在我的 xCode 项目的这一部分。

我创建了一个核心数据实体“Person”，该实体具有以下属性：

*   姓名;
*   年龄;
*   生日;
*   地址;

并且此属性将显示在表格视图中。到目前为止，一切都很好。

我的问题是我希望表格有一个**“添加字段”**或**“添加行”**单元格，所以当用户想要添加除了这些已经创建的属性之外的更多信息时，他只需单击单元格并选择字段名称和类型。

例如，如果他想在表格的详细视图中显示该人的“电话号码”，他将新字段命名为“电话号码”并选择其类型“号码”。然后他有一个额外的字段，他可以在其中添加此人的电话号码。

我怎样才能在核心数据中做到这一点？用户是否可以手动向实体添加新属性并选择其格式？最好的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:38:05.907

你不能用 Core Data 做你想做的事。Core Data 不能更改结构，除非您制作新版本的设计，但您在 xcode 中这样做。

但是您可以轻松添加另一个名为 f.ex 的表。信息，它链接到人的单个连接，并且有很多人链接回信息表。

这样，您可以添加任意数量的字段和值，当然您添加的所有额外字段都将跟随同一个人，因此如果您想使用 cellPhone 字段，则必须将其添加到所有人。

我建议您使用直接 SQL，不要使用 Core Data。Core Data 不是数据库，它是一个对象存储，当你在 iOS 开发方面做得更好时，你就会明白其中的区别，它比你最初想象的要大得多。

有一个优秀的 SQLite 高级库，称为 FMDB，你可以在 github 上找到它：[https ://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)

在这里，您可以即时执行“Alter Table”等直接 SQL 查询，尽管您所追求的不是很简单，但这可能是一个真正有趣的项目。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:37:47.543

我不认为这在 Core Data 中是直接可行的，因为它的目的是对象持久性，并且您不能动态地向对象添加新属性。`name`它可以在某种程度上使用与具有, `value`（作为字符串）和`data type`字段的“额外属性”实体的一对多关系来伪造。

我相信您最好的选择是使用 SQLite 来动态修改表结构。(http://www.sqlite.org/lang_altertable.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T21:46:32.743

我的上一家公司做了这样的事情，但它不是微不足道的。我无权访问代码，因此这或多或少将来自内存。

*   你在你的实体中提供可转换的属性（这将是一个字典）

*   模型对象必须为此提供 getter 和 setter，从而驱动原始方法设置/获取属性

*   你提供了一个 getter/setter 沿着 -objectForKey 和 -setObject forKey 的行来读取和写入值

*   当您被告知“错误”时，您会更新实体中的字典

总之，维护一个键值对字典。也许您维护一个影子字典，它会根据需要进行初始化和更新。自从我上次看到这段代码以来已经有大约 4 年了，所以它有点模糊。但你应该明白这一点。这就像魔术一样——你可以任意设置任何键/值对（假设字符串键和 NSCoding 兼容的值），并且总是可以通过向字典询问其当前键集来请求键。

# python - 在 python 中运行程序的程序

> ID：12590940
> 
> 赞同：0
> 
> 时间：2012-09-25T20:57:58.470
> 
> 标签：python, python-2.7

我是 Python 初学者（使用 2.7），想知道是否有办法让我编写的程序运行其他程序。

基本上，我想构建一个评估其他程序的程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T21:00:21.500

查看[子流程](http://docs.python.org/library/subprocess.html)模块。那里给出的例子之一：

```
>>> subprocess.check_output(["echo", "Hello World!"])
'Hello World!\n' 
```

这应该是你所需要的

# c++ - 变量或字段“generateMonster”声明为无效

> ID：12590941
> 
> 赞同：0
> 
> 时间：2012-09-25T20:58:04.210
> 
> 标签：c++

> **可能重复：**
> [声明为无效的变量或字段](https://stackoverflow.com/questions/364209/variable-or-field-declared-void)

我正在做一个项目，遇到一些功能问题。我不断收到一个错误，我知道这意味着我从未声明过类型，但我知道我是。所有文件都包含 .h 和 .cpp，所以我没有任何缺失的包含。

这是我调用它的函数 - 问题是 generateMonster

```
int room1(charType& heroObj) {

    int r;
    roomType RoomObj;
    RoomObj.generateMonster(heroObj);

    cout << "There's a hiss as you open this door, and you smell a sour odor, like something rotten or fermented. Inside you see a small room lined with dusty shelves, crates, and barrels. It looks like someone once used this place as a larder, but it has been a long time since anyone came to retrieve food from it." << endl;
    cout << endl << "Room #1:\n 1\. Door in the East corner of the North wall.\n 2\. Door in the middle of the East wall.\n 3\. Door in the east corner of the south wall.\n 4\. Door in the West corner of the South wall.\n" << endl;
    doIt();
    cin >> r;
    if (!cin.good())
       cout << "That is not a valid option.  Please try again.";
       cin.clear();
       cin.ignore(100, '\n');

    system("cls");

    switch(r) {
              case 1:
                   genDoor();
                   hallway1(heroObj);
                   break;
              case 2:
                   genDoor();
                   hallway4(heroObj);
                   break;
              case 3:
                   genDoor();
                   hallway3(heroObj);
                   break;
              case 4:
                   genDoor();
                   hallway2(heroObj);
                   break;
    }

} 
```

我的原型

```
class roomType
    {
    public:
     roomType();
     void generateMonster(charType& heroObj);
     void generateTreasure();

    private:
     int gold;
     int potion;
     int keys;
    }; 
```

和我的整体职能 - [http://pastie.org/4799752](http://pastie.org/4799752)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:07:48.577

基于[这个问题](https://stackoverflow.com/questions/364209/variable-or-field-declared-void)，问题似乎是编译器不知道`charType`在哪里`generateMonster(charType&)`声明了什么。也许`#include "charType.h"`以前`class roomType`？

# python - 有没有比 PIL.ImageGrab.grab() 更好的截屏方法？

> ID：12590942
> 
> 赞同：5
> 
> 时间：2012-09-25T20:58:08.600
> 
> 标签：python, windows, windows-xp, python-imaging-library, python-2.5

我正在用python制作一个屏幕截图程序。我目前的问题是 PIL.ImageGrab.grab() 给了我与 2 秒后相同的输出。例如，因为我想我不清楚，在下面的程序中，几乎所有的图像都是相同的，具有相同的 Image.tostring() 值，即使我在 PIL.ImageGrab 期间移动了我的屏幕。抓取循环正在执行。

```
>>> from PIL.ImageGrab import grab
>>> l = []
>>> import time
>>> for a in l:
        l.append(grab())
        time.sleep(0.01)

    >>> for a in range(0, 30):
        l.append(grab())
        time.sleep(0.01)

>>> b = []
>>> for a in l:
        b.append(a.tostring())

>>> len(b)
30
>>> del l
>>> last = []
>>> a = 0
>>> a = -1
>>> last = ""
>>> same = -1
>>> for pic in b:
        if b == last:
            same = same + 1
        last = b

>>> same
28
>>> 
```

这是一个问题，因为所有图像都相同，但 1\. 30 中的 1 是不同的。这将制作一个绝对可怕的质量视频。请告诉我是否有比 PIL.ImageGrab.grab() 更好的替代品。我需要捕获整个屏幕。谢谢！

编辑：

到目前为止，看起来最好的选择是使用 pywin32。我现在正在使用它，但它非常慢。我并不真正关心兼容性，因为现在这个项目是个人的。每次算出程序的帧率，pywin32都这么慢，处于负数。请告诉我是否有更快的替代方案。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T21:36:14.210

PIL.ImageGrab 有很多替代品。

如果您想要跨平台，几乎每个主要的窗口库都具有屏幕抓取功能。[这是使用PyQt4](http://www.riverbankcomputing.co.uk/software/pyqt/download)的示例：

```
import sys
from PyQt4.QtGui import QPixmap, QApplication
app = QApplication(sys.argv)
QPixmap.grabWindow(QApplication.desktop().winId()).save('screenshot.jpg', 'jpg') 
```

如果您想要与 Qt 认为的“桌面”的默认设置不同的东西，您需要深入研究 PyQt 或 Qt 文档。

缺点是这些跨平台的窗口库通常在安装、分发，甚至有时你如何构建程序方面都非常繁重。

另一种方法是使用特定于 Windows 的代码。虽然可以通过 ctypes 直接访问 Windows API，但更简单的解决方案是[PyWin32](http://pywin32.sf.net)。

```
import win32gui, win32ui, win32con, win32api
hwin = win32gui.GetDesktopWindow()
width = win32api.GetSystemMetrics(win32con.SM_CXVIRTUALSCREEN)
height = win32api.GetSystemMetrics(win32con.SM_CYVIRTUALSCREEN)
left = win32api.GetSystemMetrics(win32con.SM_XVIRTUALSCREEN)
top = win32api.GetSystemMetrics(win32con.SM_YVIRTUALSCREEN)
hwindc = win32gui.GetWindowDC(hwin)
srcdc = win32ui.CreateDCFromHandle(hwindc)
memdc = srcdc.CreateCompatibleDC()
bmp = win32ui.CreateBitmap()
bmp.CreateCompatibleBitmap(srcdc, width, height)
memdc.SelectObject(bmp)
memdc.BitBlt((0, 0), (width, height), srcdc, (left, top), win32con.SRCCOPY)
bmp.SaveBitmapFile(memdc, 'screenshot.bmp') 
```

与 Win32 一样，您必须准确指定“桌面”的含义；此版本为当前会话指定“虚拟屏幕”，如果您在控制台本地运行，则它是所有监视器的组合，如果您在终端服务上运行，则为远程视图。如果您想要不同的东西，您必须阅读 MSDN 上的相关 Win32 文档。但在大多数情况下，从该文档转换为 PyWin32 是微不足道的。

（顺便说一句，即使我说“Win32”，同样适用于 Win64。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-02T07:04:39.900

现代跨平台解决方案是使用[Python MSS](https://github.com/BoboTiG/python-mss)。

```
from mss import mss
from PIL import Image

def capture_screenshot():
    # Capture entire screen
    with mss() as sct:
        monitor = sct.monitors[1]
        sct_img = sct.grab(monitor)
        # Convert to PIL/Pillow Image
        return Image.frombytes('RGB', sct_img.size, sct_img.bgra, 'raw', 'BGRX')

img = capture_screenshot()
img.show() 
```

在我的慢速笔记本电脑上，此功能可以以高达 27 fps 的速度返回屏幕截图。

# mysql - 适用于 MySQL 和 MS Access 的多对多复选框字段

> ID：12590945
> 
> 赞同：2
> 
> 时间：2012-09-25T20:58:17.613
> 
> 标签：mysql, ms-access, checkbox, many-to-many, normalization

我的任务是创建一个 MySQL 数据库，该数据库将由 MS Access 通过 ODBC 连接。MySQL 数据库将存储将使用大约 10 个复选框字段的值。我无法想象 MS Access 如何让我有效地与这些字段交互。

数据必须能够通过 Access 前端表单以及 Web 界面（不必太担心 Web 界面部分）进行编辑。

以下是一些我遇到问题的字段示例：

```
> bloom_month (Checkboxes to select 1-many months of the year)
> bloom_color (Checkboxes to select 0-many colors from a separate table) 
```

如果我只做网络应用程序，我处理这个问题的方法是使用链接表（又名：关联表）来创建基本的多对多关系。这也是处理静态“bloom_month”字段的最佳方式，因为月份永远不会改变（即我将设置一个只有 id - 月份对的表）？

也就是说，我的想法可能有点偏离，因为似乎 Access 更喜欢一个平面结构，每个可能的复选框都有一个 0/​​-1 tinyint 字段。这种方法对我来说似乎是错误的，并且它也不允许从单独的表中动态添加/删除颜色（即，如果删除/添加了bloom_color，则必须更改表结构）。

此外，任何有关如何使用复选框作为选择器同时将数据存储在 MySQL 中的 MS Access 多对多关系的帮助或指示将不胜感激。尽管我的 google-fu 确实很弱，但我似乎在这个主题上找不到太多东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:50:04.487

在 Access 中建立 ODBC 连接后，您可以像在 Access 中创建的任何表一样使用 MySQL 表。然后，您可以构建一个 Access 查询，它将您的多对多关系解析为 Access 似乎喜欢的平面文件格式。在 Access 中，查询作为持久对象呈现给用户，因此您可以根据这些查询制作表单。

# git - 使用 Git diff 检测代码移动 + 如何使用 diff 选项

> ID：12590947
> 
> 赞同：32
> 
> 时间：2012-09-25T20:58:24.053
> 
> 标签：git, git-diff

考虑一个文件 (1.c) 包含作者 M 和 J 所做的三个函数和更改。如果有人运行`git blame 1.c`，他将得到以下输出：

```
^869c699 (M 2012-09-25 14:05:31 -0600  1) 
de24af82 (J 2012-09-25 14:23:52 -0600  2) 
de24af82 (J 2012-09-25 14:23:52 -0600  3) 
de24af82 (J 2012-09-25 14:23:52 -0600  4) public int add(int x, int y)  {
de24af82 (J 2012-09-25 14:23:52 -0600  5)    int z = x+y;
de24af82 (J 2012-09-25 14:23:52 -0600  6)    return z;
de24af82 (J 2012-09-25 14:23:52 -0600  7) }  
de24af82 (J 2012-09-25 14:23:52 -0600  8) 
^869c699 (M 2012-09-25 14:05:31 -0600  9) public int multiplication(int y, int z){
^869c699 (M 2012-09-25 14:05:31 -0600 10)    int result = y*z;
^869c699 (M 2012-09-25 14:05:31 -0600 11)    return temp;
^869c699 (M 2012-09-25 14:05:31 -0600 12) }
^869c699 (M 2012-09-25 14:05:31 -0600 13) 
^869c699 (M 2012-09-25 14:05:31 -0600 14) public void main(){
de24af82 (J 2012-09-25 14:23:52 -0600 15)    //this is a comment
de24af82 (J 2012-09-25 14:23:52 -0600 16) } 
```

现在，如果作者 A 改变了`multiplication()`and`add()`函数的位置并提交了更改，`git blame`就可以检测到代码的移动。请参阅以下输出：

```
$ git blame  -C -M e4672cf82 1.c
^869c699 (M 2012-09-25 14:05:31 -0600  1) 
de24af82 (J 2012-09-25 14:23:52 -0600  2) 
de24af82 (J 2012-09-25 14:23:52 -0600  3) 
e4672cf8 (M 2012-09-25 14:26:39 -0600  4) 
de24af82 (J 2012-09-25 14:23:52 -0600  5) 
^869c699 (M 2012-09-25 14:05:31 -0600  6) public int multiplication(int y, int z){
^869c699 (M 2012-09-25 14:05:31 -0600  7)    int result = y*z;
^869c699 (M 2012-09-25 14:05:31 -0600  8)    return temp;
^869c699 (M 2012-09-25 14:05:31 -0600  9) }
^869c699 (M 2012-09-25 14:05:31 -0600 10) 
^869c699 (M 2012-09-25 14:05:31 -0600 11) public void main(){
de24af82 (J 2012-09-25 14:23:52 -0600 12)    //this is a comment
e4672cf8 (M 2012-09-25 14:26:39 -0600 13) }
de24af82 (J 2012-09-25 14:23:52 -0600 14) public int add(int x, int y){
de24af82 (J 2012-09-25 14:23:52 -0600 15)    int z = x+y;
de24af82 (J 2012-09-25 14:23:52 -0600 16)    return z;
e4672cf8 (M 2012-09-25 14:26:39 -0600 17) } 
```

但是，如果我尝试`git diff`在这两个版本之间运行，它无法检测到函数更改了它们的位置并给出以下输出：

```
$ git diff -C -M de24af8..e4672cf82 1.c

diff --git a/1.c b/1.c
index 5b1fcba..56b4430 100644
--- a/1.c
+++ b/1.c
@@ -1,10 +1,7 @@

-public int add(int x, int y){
-       int z = x+y;
-       return z;
-}      
+

public int multiplication(int y, int z){
    int result = y*z;
@@ -13,4 +10,8 @@ public int multiplication(int y, int z){

 public void main(){
    //this is a comment
-}
\ No newline at end of file
+}
+public int add(int x, int y){
+       int z = x+y;
+       return z;
+}      
\ No newline at end of file 
```

我的问题是：

1.  如何在获取差异输出时强制检测代码移动？甚至可能吗？

2.  Git diff 可以通过几个选项来应用。例如`--minimal`，`--patience`。我如何在这里应用这些选项？我尝试了一个，但收到以下错误：

    ```
    $ git diff --minimal de24af8..e4672cf82 1.c
    usage: git diff <options> <rev>{0,2} -- <path>* 
    ```

谁能建议/举例说明如何正确添加这些选项？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2017-11-09T02:24:54.207

从[Git 2.15 开始，`git diff`现在支持](https://git-scm.com/docs/diff-options/2.15.0)使用选项检测移动的行`--color-moved`。它甚至可以检测文件之间的移动。

显然，它适用于彩色终端输出。据我所知，没有选择以纯文本补丁格式指示移动，但这是有道理的。

对于默认行为，请尝试

```
git diff --color-moved 
```

该命令还接受选项，当前为`no`、`default`、`plain`和（用于获取最新选项及其描述）`zebra`。例如：`dimmed_zebra``git help diff`

```
git diff --color-moved=zebra 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-09T17:38:02.823

> 这是写它时的最佳答案，但它**不再准确**。2017 年，Git 2.15 对其进行了升级`diff`以进行移动检测。[正如现在投票最多的答案中所解释的那样](https://stackoverflow.com/a/47192896/8910547)，使用`git diff --color-moved`

**原答案：**

你在这里遇到的是 Git 基本上没有像这样的高级差异。Git 允许配置外部差异和合并工具是有原因的：如果没有他们的帮助，你会发疯的。例如，Beyond Compare 和 Araxis Merge 都会捕捉到这种运动。

您要解决的一般问题类别是“结构化合并”：[Structural Diff of two java source files](https://stackoverflow.com/questions/14376370/structural-diff-of-two-java-source-files)

您可能`git-format-patch`比`git-diff`在这种情况下更幸运，因为前者提供了更多的提交信息，包括作者和提交消息，并且还为您指定的范围内的每个提交生成一个补丁文件。资料来源：[“git format-patch”和“git diff”有什么区别？](https://stackoverflow.com/questions/4624127/what-is-the-difference-between-git-format-patch-and-git-diff)

如果您正在寻找一般检测代码移动的技巧，有趣的是要注意检测代码移动显然*不是*全能镐的目标。看到这个有趣的交流： http: [//gitster.livejournal.com/35628.html](http://gitster.livejournal.com/35628.html)

如果您想检测谁交换了订单，您唯一的选择似乎是执行以下操作：

```
 git log -S'public int multiplication(int y, int z){
    int result = y*z;
    return temp;
 }

 public void main(){
    //this is a comment
 }
 public int add(int x, int y)  {
    int z = x+y;
    return z;
 }' 
```

您正在寻找的是`git blame -M<num> -n`，它的功能与您所要求的非常相似：

```
-M|<num>|
       Detect moved or copied lines within a file. When a commit moves or
       copies a block of lines (e.g. the original file has A and then B,
       and the commit changes it to B and then A), the traditional blame
       algorithm notices only half of the movement and typically blames
       the lines that were moved up (i.e. B) to the parent and assigns
       blame to the lines that were moved down (i.e. A) to the child
       commit. With this option, both groups of lines are blamed on the
       parent by running extra passes of inspection.

       <num> is optional but it is the lower bound on the number of
       alphanumeric characters that git must detect as moving/copying
       within a file for it to associate those lines with the parent
       commit. The default value is 20.

-n, --show-number
       Show the line number in the original commit (Default: off). 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T19:01:10.770

在这种特殊情况下，我认为不必`git diff`担心检测代码移动。相反，它只是创建一个可用于将旧文件转换为新文件的补丁，这就是您的`git diff`输出清楚地显示的内容 - 该函数正在从一个位置删除并插入另一个位置。可能有更简洁的方法来输出一系列编辑命令，这些命令将代码从一个位置移动到另一个位置，但我认为`git`这里的可移植性可能会出错 - 不能保证最终用户总是使用`git apply`or `git am`，所以补丁是以一种即使与 plain 也可以使用的格式生成`patch`。

# javascript - 如何在 Backbone fetch 中成功返回模型？

> ID：12590950
> 
> 赞同：0
> 
> 时间：2012-09-25T20:58:28.967
> 
> 标签：javascript, asynchronous, backbone.js

我想为骨干实现 current_user。我通过向 app.com/current_user.json 发送请求来做到这一点

fetch 的异步部分似乎不起作用

```
class App.Models.CurrentUser extends Backbone.Model
  url: '/current'
  defaults: 
    "created_at":"never",
    "email":"new",
    "id": "0",
    "updated_at":"always"

  current_user:() =>
    @fetch(
      succes:(response,status) =>
        console.log(status)
        return status
        ) 
```

控制台日志准确地打印出我想要返回的内容，但是函数本身返回一个带有 responseText 作为 json 的对象，我想从这个函数中获取该对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:08:03.277

它的原因是它只返回模型和服务器响应。这是骨干源中处理响应的部分[`fetch`](http://backbonejs.org/docs/backbone.html#section-98)

```
 var success = options.success;
  options.success = function(resp, status, xhr) {
    if (!model.set(model.parse(resp, xhr), options)) return false;
    if (success) success(model, resp);
  }; 
```

因此，如果您想返回模型，只需使用传递给您的成功方法的第一个参数。

```
current_user:() =>
    @fetch(
      succes:(model,response) =>
        console.log(model)
        return model
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T10:29:02.443

这是您可以执行的操作：

```
current_user:() =>
  @fetch async: false
  @ 
```

请注意，这样做是在告诉 fetch 不是异步的。这意味着只有在提取完成后才会处理提取后的所有其他内容。

# c++ - Boost::bind 与对象占位符

> ID：12590959
> 
> 赞同：0
> 
> 时间：2012-09-25T20:59:01.383
> 
> 标签：c++, boost, boost-bind

我正在尝试使用稍后在项目中为每个观察者添加新功能所需的捕获来实现观察者模式。

```
class Obsevers {
public:
    virtual ~Obsevers() {}
};

class TestObserver : public Obsevers {
public:
    void print1(int i) {
        std::cout << i << std::endl;
    }
};

class TestObserver2 : public Obsevers {
public:
    void print2(int i, char c) {
        std::cout << i << " , " << c << std::endl;
    }
    //possible new functions here later
}; 
```

我的通知方法如下：

```
template<typename Type, typename Notify>
void NotifyObserver(Notify notify) {
    typedef std::list<Obsevers*>::iterator iter;
    iter it = m_observers.begin();
    iter end = m_observers.end();
    for(; it != end; ++it) {
        Type * o = dynamic_cast<Type*>(*it);
        if(o == NULL) continue;
        notify(o);
    }
} 
```

调用通知代码如下。

```
NotifyObserver<TestObserver2>(boost::bind(&TestObserver2::print2, _1, 32, 'b')); 
```

现在给出上述代码块的上下文，我的问题是使用占位符（_1）作为绑定中的对象参数正确还是这种未定义的行为？

关于 bind 的 boost 文档没有指定仅对函数参数使用对象的占位符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:12:21.973

你的代码是正确的。

[Boost.Bind](http://www.boost.org/doc/libs/1_51_0/libs/bind/bind.html#with_member_pointers)文档表明您的代码

`boost::bind(&TestObserver2::print2, _1, 32, 'b')`

是相同的

`boost::bind<void>(boost::mem_fn(&TestObserver2::print2), _1, 32, 'b')`

where`boost::mem_fn`负责调用指向成员函数的指针。只要绑定的对象`boost::mem_fn`使用可以使用的东西（例如指针或引用）进行评估，它就会正确地调用该函数。

# git - 防止 Git 删除 tmp 文件

> ID：12590961
> 
> 赞同：0
> 
> 时间：2012-09-25T20:59:10.230
> 
> 标签：git, cygwin

我想在 Cygwin 中使用 IntelliJ 作为差异工具。但是在 IDEA 显示 diff 屏幕之前，创建的 tmp 文件`/tmp`正在被删除。

我的问题是如何防止删除 tmp 文件？git 上是否有任何配置？

编辑：

```
 [difftool "ideadiff"]
 cmd =  echo  \"$(cygpath -wla $LOCAL)\" \"$(cygpath -wla $REMOTE)\" 
```

当您回显路径时，我可以看到路径，但此路径中没有任何文件。我`cat` 在控制台中也有完美显示内容的文件。但是从 difftool 命令退出后，我在下面看不到任何文件`/tmp`？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:59:56.933

我的猜想是 IDEA “分离”自身（通过分叉和退出）。您可以通过从终端启动它来轻松检查它是否为真——如果在启动后立即显示提示，那么它是真的。

对于 git，看起来您的 diff 工具已经退出，因此它会清理临时文件。

我可以看到两种可能的解决方案：

1.  也许 IDEA 有一个防止分离的标志。例如。gvim 有这样一个标志 - `-f`。
2.  如果没有，那么您可以将 IDEA 包装在一个 shell 脚本中，该脚本将复制文件，然后使用您的副本启动 IDEA 本身（git 对此一无所知）。然后，您必须再次考虑何时删除它们。您可以再次将它们复制到`/tmp`，然后希望您的操作系统将它们清理干净。

# asp.net - Visual Studio 可以在新的调试会话中重新启动 IIS Express 吗？

> ID：12590963
> 
> 赞同：16
> 
> 时间：2012-09-25T20:59:12.493
> 
> 标签：asp.net, visual-studio, debugging, iis-express

我有一个 ASP.Net 应用程序，它在 Global.asax 的 Application_Start 期间执行一些数据库初始化。我正在使用 IIS Express 来调试应用程序。

我发现如果我停止调试，清除数据库，然后重新启动，Application_Start 代码不会被调用并且我的数据库没有正确初始化，所以我的应用程序失败了。这是因为 IIS Express 实例在调试停止后仍在运行。Visual Studio 似乎没有重新启动它，而是附加到现有进程。

有没有办法改变这种行为，以便启动新的调试会话总是重新启动 IIS Express 中的应用程序进程（或重置常规 IIS 中的应用程序池）？

或者，有没有办法在调试会话结束时强制 IIS Express 关闭？

我确实发现，如果我从项目设置中的 Web 对话框中选中“启用编辑并继续”，它会在调试结束时产生停止 IIS Express 的副作用。但我不确定我是否想仅出于停止 IIS Express 的目的而引入 Edit and Continue 的副作用。肯定有更好的方法吗？

不确定是否重要，但这是VS2012。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-26T15:21:57.910

不幸的是，这不能通过配置来实现。我可能会向您提出另一个技巧，但由您决定它是否比您的更好:)

您可以创建一个构建后事件来更改 web.config 文件的时间戳。我使用了来自[http://www.stevemiller.net/apps/](http://www.stevemiller.net/apps/)的 touch.exe 工具。您还需要将“运行构建后事件”设置为始终。因此，您的“构建事件”配置可能如下所示：

![在此处输入图像描述](../Images/2412325e9116dbf1c32fed51f34776a3.png)

在您启动调试器的任何时候设置此选项后，web.config 时间戳会在第一次请求时更新，从而导致应用程序重新启动（应用程序应用程序域重新加载） - 但此时您已经附加到此进程，因此您的`Application_`事件断点应该可以工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-16T19:30:10.967

您可以使用 Powershell one-liner 来避免依赖外部应用程序：

`powershell -NoProfile -Command (Get-Item "<path>\Web.config").lastwritetime=(Get-Date)`

最初的灵感来自[这里](https://superuser.com/questions/292630/how-can-i-change-the-timestamp-on-a-file)...

# asp.net - 如何在linq to sql中存储proc调用后关闭连接

> ID：12590967
> 
> 赞同：0
> 
> 时间：2012-09-25T20:59:37.163
> 
> 标签：asp.net, sql, linq, connection

我的网站面临一个奇怪的问题，它似乎没有使用连接池。我正在使用 linq to sql 调用存储过程并返回项目列表，但不确定它是否关闭连接/处理数据上下文类。

我的代码看起来像这样

```
public list<data.dto.category> getall()
{
var db = new mydatacontext();

return db.getCategories().ToList();
} 
```

我如何确保我正在关闭连接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:22:27.930

尝试使用“使用”语句创建您的上下文。

```
 using (MyDataContext context = new MyDataContext())
    {
         // do stuff
    } 
```

# c# - c#判断字符串是否为文件名

> ID：12590969
> 
> 赞同：-2
> 
> 时间：2012-09-25T20:59:43.453
> 
> 标签：c#, file

在c#中确定给定字符串是否为文件名的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:01:32.837

如果你的意思是给定的字符串作为文件名存在，那么你去：

```
var file = "myfile.txt";
var fileExists = System.IO.File.Exists(file); 
```

如果您的意思是此字符串是否符合 Windows 标准文件名命名约定，则：

```
var file = "mybadfile<\\/.txt";
var invalidFileChars = System.IO.Path.GetInvalidFileNameChars();
var isInvalidFilename = invalidFileChars.Any(s => file.Contains(s)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:02:48.933

也许`System.IO.File.Exists(givenStr)`，取决于你的意思。

如果您想知道是否`givenStr`没有非法字符，可以使用`!System.IO.Path.GetInvalidFileNameChars().Intersect(givenStr).Any()`（只是因为其他人都在他们的答案中包含了这个）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T21:08:07.560

**字符串不能**成为有效文件名的唯一方法是它是否包含`Path.GetInvalidFileNameChars()`. 只要它没有任何非法字符，它就是合法的文件名。

如果您好奇该位置是否有实际文件，那么您可以使用`File.Exists`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T21:06:05.987

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T21:12:13.307

如果你想检查它是否是一个有效的文件名，你可以尝试检查不允许的字符

```
bool IsValidFilename(string testName)
{
 Regex containsABadCharacter = new Regex("[" + Regex.Escape(System.IO.Path.InvalidPathChars) + "]");
 if (containsABadCharacter.IsMatch(testName) { return false; };

 return true;
} 
```

我认为这是合适的，因为文件名可能非常奇特并且仍然是有效的文件名。

# javascript - 使用 JQuery SlideToggle 而不移动下面的内容

> ID：12590976
> 
> 赞同：1
> 
> 时间：2012-09-25T21:00:13.997
> 
> 标签：javascript, jquery, slidetoggle

我有两个 DIV 需要在页面上占据相同的空间。后 DIV 有一些表单元素，我允许用户滑动前 DIV 以访问后 DIV。

问题是，前面 DIV 下方的内容在后面 DIV 之上向上移动。我怎样才能解决这个问题？

这是我现在正在做的一个例子。

[http://jsfiddle.net/7DFfa/3/](http://jsfiddle.net/7DFfa/3/)

谢谢谢里登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:06:28.723

You need to set the height of your wrapper:

```
$("#wrapper").height($("#front").height()); 
```

When you "slideUp" your `#front` div, your `#wrapper` div is losing its height.

See it working here: [http://jsfiddle.net/7DFfa/4/](http://jsfiddle.net/7DFfa/4/)

You'll also need to toggle the `z-index` of your `#back` div so that the form elements can be accessed: [http://jsfiddle.net/7DFfa/5/](http://jsfiddle.net/7DFfa/5/)

```
$("#opener").toggle(function() {
    $("#front").stop().slideToggle(function() {
        $("#back").css("z-index", "1");
    });

    $(this).text("Show Front");
    }, function() {

    $("#back").css("z-index", "-1");
    $("#front").stop().slideToggle();

    $(this).text("Show Back")
});​ 
```

Alternatively, you could toggle both divs: [http://jsfiddle.net/7DFfa/7/](http://jsfiddle.net/7DFfa/7/)

```
$("#back").hide();
$("#wrapper, #back").height($("#front").height());

$("#opener").toggle(function() {
    $("#front").stop().slideToggle();
    $("#back").stop().slideToggle();
    $(this).text("Show Front");
    }, function() {
    $("#front").stop().slideToggle();
    $("#back").stop().slideToggle();
    $(this).text("Show Back")
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:13:37.407

向包装器 div 添加高度是一种选择。另一个是为按钮设置绝对定位并为其添加一个等于包装器高度的顶部。[jsfiddle](http://jsfiddle.net/7DFfa/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T21:04:32.087

尝试将高度添加到包装器 div

```
<div id="wrapper" style="width:400px;height:140px;"> 
```

由于第一个 div 扩展，`</br>`但第二个 div 不包含任何“可扩展”标签，因此它的高度较小。

# localization - SSIS 组件无视 CurrentThread.CurrentUICulture

> ID：12590979
> 
> 赞同：0
> 
> 时间：2012-09-25T21:00:22.773
> 
> 标签：localization, ssis

我正在尝试本地化我编写的 SSIS 转换组件。有几种形式用于与用户交互。我已将表单的 Localizable 属性设置为 true，将语言设置为德语（德国），并将提示设置为德语翻译。

然后我进行测试，但将其放入表单的 c'tor 中：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("de-DE");
Thread.CurrentThread.CurrentUICulture = new CultureInfo("de-DE"); 
```

但我只收到默认（英文）提示。当我使用独立应用程序执行此操作时，它可以完美运行。

接下来，我想我会尝试一个字符串资源，看看我的表现是否更好。我创建了一个 VerifyLoc.resx 和一些字符串，然后创建了一个 VerifyLoc.de-DE.resx 和一些同名的德语字符串。我再次测试：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("de-DE");
Thread.CurrentThread.CurrentUICulture = new CultureInfo("de-DE");
string str1 = VerifyLoc.Str1;
string str2 = VerifyLoc.Str2; 
```

不走运，str1 和 str2 是默认的，不是德语。接下来我尝试用这个来强迫事情：

```
ComponentResourceManager resources = new ComponentResourceManager(typeof(VerifyLoc));
CultureInfo culture = new CultureInfo("de-DE");
string str1 = resources.GetString("Str1", culture);
string str2 = resources.GetString("Str2", culture); 
```

还是不行。我已经根据默认文件检查了 de-DE.resx 文件的属性，两者都使用“内部”访问修饰符。两者都被标记为“嵌入式资源”，都通过 ResXFileCodeGenerator 运行。

不幸的是，我没有德语版本的 Windows，所以我无法将其归结为我试图强制它使用德语的问题或资源本身的生成问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:37:30.567

听起来德国卫星组件没有建造或部署到正确的位置。您是否在 de-DE 文件夹中看到带有程序集名称的 .resources.dll 文件？

# asp.net - 有没有办法真正禁用 ASP.NET 开发服务器？

> ID：12590981
> 
> 赞同：3
> 
> 时间：2012-09-25T21:00:29.957
> 
> 标签：asp.net, visual-studio-2010

这东西是我存在的祸根，我全心讨厌它。我在这里看到的两种方法对我不起作用：

1.  在 Web 应用程序的属性页面中，转到 Web 选项卡并选择“使用本地 IIS 服务器”
2.  在其他属性（项目上的 F4）中，将“调试时始终启动”设置为 false。

不过，当我将 Web 应用程序附加到 IIS 进程时，它会自动启动开发服务器。如果我使用 F5 启动我的项目，它总是使用开发服务器。

这似乎每隔几个月就会发生一次，我根本无法杀死开发服务器以支持 IIS。有什么办法可以摆脱这件事吗？我不明白它为什么存在，根据我的经验，它几乎不可能进行调试。

编辑：我确实有 IIS，我经常使用它。我知道我的 vDirs 都设置正确，等等。似乎有些东西完全覆盖了我的设置以使用 IIS。手动删除与开发服务器有关的所有内容会导致重大问题吗？我宁愿看到神秘的操作系统文件未找到消息，也不愿看到该死的服务器再次弹出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:14:26.907

我只是想通了这一点，希望它可以帮助别人。

我在一个解决方案中有 4 个不同的 Web 应用程序。一个应用程序设置为使用开发服务器，其他应用程序用于 IIS。即使在为 IIS 启动应用程序集时，Dev 服务器显然也会启动，因为其他项目需要它（请注意，在这种情况下，无法使用任一服务器调试所需的应用程序）但情况并非总是如此。我无法确定使用 IIS 进程与使用该设置的开发服务器进行调试所需的确切条件。

我的建议是，在同一解决方案中设置所有 Web 应用程序以使用相同的服务器类型（Dev/IIS），否则您的结果将无法预测，您可能会失去调试能力。

# actionscript-3 - 可以将 MovieClip 添加到列表框吗？闪存 AS3

> ID：12590982
> 
> 赞同：0
> 
> 时间：2012-09-25T21:00:32.343
> 
> 标签：actionscript-3, flash

用于制作在线用户列表（例如[http://www.flashchatdeluxe.com/flash_chat_video_edition.html](http://www.flashchatdeluxe.com/flash_chat_video_edition.html)）。每个用户名实际上是一个包含他们的姓名、照片等的影片剪辑。因此，如果有 3 个用户在线，则列表中将有 3 个这些影片剪辑。

那么可以将 MovieClip 添加到常规 Flash 列表框组件中，或者如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:33:10.257

最简单的选择是使用[TileList](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/TileList.html)，因为默认情况下它使用[ImageCell](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/listClasses/ImageCell.html)作为源渲染器，您可以简单地将 MovieClip 作为传递给列表数据提供者的项目的源属性传递：

```
import fl.controls.TileList;
var tl:TileList = addChild(new TileList()) as TileList;
for(int i = 0; i < 3; i++) tl.addItem({label:"user"+(i+1),source:yourClip}); 
```

否则，请随意实现您的自定义单元格渲染器。

# sql - 相关子查询和连接

> ID：12590987
> 
> 赞同：0
> 
> 时间：2012-09-25T21:00:47.897
> 
> 标签：sql, sql-server, join

请问谁能告诉我在 JOIN 上使用 Correlated 子查询之间的区别？他们不是为了解决同样的问题。是否有性能击中一个。我正在使用 SQL 服务器，我倾向于使用 FOR XML PATH('') 来选择出现在子查询中的多个列。任何解释差异的示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:07:36.333

像往常一样，这是马的课程。

但是，有一个松散的规则，如果您可以使用 JOIN 来执行此操作，那么效果会更好，因为您可以使用 SQL Server 的基于集合的操作将两个数据流匹配在一起。

然而，相关子查询是解决*某些*问题的唯一方法，但它们会导致类似循环的行为，每行一个 - 必然更慢且性能更差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:42:12.257

“请谁能告诉我在 JOIN 上使用 Correlated 子查询之间的区别？他们不是要解决同样的问题吗？”

不，他们不是。

使用相关子查询，您将获得一个调用 SEMIJOIN 或关系代数的 SEMIMINUS 的表达式。（请注意，我在这里谈论的是相关子查询的最典型用法。）

```
SELECT * FROM A1
 WHERE attr in (SELECT attr FROM A2); 
```

只为您提供出现在 A1 中的列。与编写 JOIN 所得到的不同

```
SELECT * FROM A1 NATURAL JOIN A2 
```

这还将为您提供 A2 中未出现在 A1 中的任何其他列。

和

```
SELECT * FROM A1
 WHERE attr NOT IN (...) 
```

还涉及相关子查询，但这次是半减号调用，甚至不能写成 JOIN。

最后，相关子查询也可以出现在 SELECT 列表中。

```
SELECT a,b, ( SELECT MIN(b) FROM T AS sub WHERE sub.a=main.a AND sub.b>main.b )
  FROM T AS main 
```

在这种情况下，许多这种性质的查询也不能写成 JOIN。

# wcf - REST 服务中带有 PUT 请求的 HTTP 404

> ID：12590994
> 
> 赞同：1
> 
> 时间：2012-09-25T21:01:27.077
> 
> 标签：wcf, rest, url-routing, asp.net-4.0, wcf-rest

我正在使用 VS 2010 中的[WCF REST 模板](http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd)为我的应用程序构建 RESTful Web 服务。我已经完成了所有 GET，但现在正在尝试处理更新，即使 PUT 显示在帮助文件中，我也会不断收到 404。

截断`web.config`：

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true">
    <add name="UrlRoutingModule"
         type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </modules>
  <validation validateIntegratedModeConfiguration="true" />
  <handlers>
    <add name="UrlRoutingHandler" preCondition="integratedMode" verb="*" path="UrlRouting.axd" />
  </handlers>
</system.webServer>
<system.serviceModel>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  <standardEndpoints>
    <webHttpEndpoint>
      <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true" />
    </webHttpEndpoint>
  </standardEndpoints>
</system.serviceModel> 
```

如您所见，为 UrlRoutingHandler 启用了所有动词。我错过了什么？

（请注意，我使用的是 IIS 7，但我被迫以经典模式运行应用程序池，以模拟 IIS 6 上的发布服务器的行为。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:12:06.890

经过多次故障排除后，以下两个配置更改的组合似乎已修复它。

1.  删除 WebDAV 处理程序
2.  为 ExtensionlessUrlHandler 添加 PUT 和 DELETE 动词

（这是一个占位符，用于启用下面的降价代码视图）

```
<handlers>
  <remove name="WebDAV" />
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE"
       modules="IsapiModule" scriptProcessor="c:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll"
       resourceType="Unspecified" requireAccess="Script" preCondition="classicMode,runtimeVersionv4.0,bitness32"
       responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE"
       modules="IsapiModule" scriptProcessor="c:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll"
       resourceType="Unspecified" requireAccess="Script" preCondition="classicMode,runtimeVersionv4.0,bitness64"
       responseBufferLimit="0" />
</handlers> 
```