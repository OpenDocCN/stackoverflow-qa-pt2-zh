# StackOverflow 问答 13310000-13310999

# vb.net - 防止两个线程在 vb.net 中同时运行

> ID：13310014
> 
> 赞同：-1
> 
> 时间：2012-11-09T14:35:39.053
> 
> 标签：vb.net, multithreading, synclock

我是 .net 线程的新手，很难找到可以使用的好例子。我在这里读文章。[托管线程最佳实践](http://msdn.microsoft.com/en-us/library/1c9txz50.aspx)但我仍然不清楚。现在我有一个程序，我试图让两个线程同时运行但做不同的事情。我有一个线程在做它应该做的事情，但是当我启动我的第二个线程（我将其命名为 PrintThread）时，我有 PrintThread 和 Main Thread 运行相同的代码行，我是否应该查看 syncLock 语句以避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:03:48.547

> 无法评估表达式，因为我们停在无法进行垃圾收集的地方

这只是一个调试器诊断，告诉你它不能显示监视表达式。当您使用 Debug + Break All 闯入调试器时，您很容易遇到此问题。

一般来说，是的，当两个或多个线程运行相同的代码时，调试代码会*非常困难。*断点不再有效，因为每个线程都会命中它们。除了使用单元测试（推荐！）之外，一种可能的解决方案是使用 Debug + Windows + Threads。您将看到此窗口中列出的活动线程。您可以右键单击它们并选择“冻结”。这会冻结线程，直到您再次“解冻”它。这使您可以只专注于调试一个线程。

# jquery-ui-tabs - 在每个选项卡中滚动的 Jquery 选项卡

> ID：13310022
> 
> 赞同：3
> 
> 时间：2012-11-09T14:36:09.180
> 
> 标签：jquery-ui-tabs, scrollable

我使用 jqueryUI 选项卡，并希望在每个选项卡内实现一个平滑的滚动条。我尝试了几个可滚动的插件，如 jQuery 自定义内容滚动器、TinyScrollbar 和现在的 areaaperta NiceScroll，但每次我都遇到同样的问题 - 滚动条只能在一个选项卡内工作。

```
 <script>
    $(function() {
        $( "#tabs" ).tabs();
    });
    </script>

    <div id="tabs" style="width:900px; font-size:100%;">
    <ul>
        <li><a href="#tabs-1" >FIRST</a></li>
        <li><a href="#tabs-2">SECOND</a></li>
        <li><a href="#tabs-3">THIRD</a></li>
    </ul>
    <div id="tabs-1">
        <div id="thisdiv">
        <p><b>FIRST SCROLLABLE PARAGRAPH</b>...</p></div></div>

    <div id="tabs-2"><div id="thisdiv2">
        <p><b>SECOND SCROLLABLE PARAGRAPH</b>...</p>
    </div></div>
    <div id="tabs-3">
        <p>THIRD TAB </p>
    </div>
</div>

    <script>
    $(document).ready(
  function() {     
    $("#thisdiv").niceScroll({cursorcolor:"#00F"});
    $("#thisdiv2").niceScroll({cursorcolor:"#00F"});  }
);
    </script> 
```

这是 jsfiddle，它表明 UItabs 和 niceScroll 插件的两个滚动条之间没有冲突：http: [//jsfiddle.net/Fluc/EhcqX/4/](http://jsfiddle.net/Fluc/EhcqX/4/)

在这里，我尝试在每个选项卡内使用带有滚动条的相同 div：http: [//jsfiddle.net/Fluc/cJPT3/2/](http://jsfiddle.net/Fluc/cJPT3/2/)

如您所见，可滚动仅在第一个选项卡内有效。与其他可滚动插件相同。

我不是 jquery 程序员，但感觉问题与某处的显示属性有关。

任何帮助将不胜感激！

# titanium - Titanium 中的损坏窗口

> ID：13310026
> 
> 赞同：1
> 
> 时间：2012-11-09T14:36:23.903
> 
> 标签：titanium, titanium-mobile

我打开窗口如下：app.js：

```
 var NavigationController = require('NavigationController').NavigationController, 
TestWindow = require('main_windows/tmain').TestWindow;

//create NavigationController which will drive our simple application
var controller = new NavigationController();

//open initial window
controller.open(new TestWindow(controller));

function openWindow(name, naController, event) {
    var TestWindow2 = require('main_windows/t' + name).TestWindow;

    var win = Titanium.UI.currentWindow;

    var swin = Titanium.UI.createWindow();

    if(event.bid)
        swin.bid    = event.bid;

    if(event.uniq)
        swin.uniq = event.uniq;

    if (event.zipcode)
        swin.zipcode = event.zipcode;

    if (event.user_id)
        swin.user_id = event.user_id;

    if (event.service_id)
        swin.service_id = event.service_id;

    if (event.service_name)
        swin.service_name = event.service_name;

    if (event.user_uniqid)
        swin.user_uniqid = event.user_uniqid;

    if (event.user_name)
        swin.user_name = event.user_name;

    if (event.user_email)
        swin.user_email = event.user_email;

    if (event.provider_id)
        swin.provider_id = event.provider_id;

    if (event.provider_name)
        swin.provider_name = event.provider_name;

    if (event.total)
        swin.total = event.total;

    if(event.response)
        swin.response   = event.response;

    swin.backgroundColor = '#f7f7f7';
    swin.barImage = 'images/example.gif';

    naController.open(new TestWindow2(naController, swin));

} 
```

这是 NavigationController.js

```
 exports.NavigationController = function() {
    this.windowStack = [];
};

exports.NavigationController.prototype.open = function(/*Ti.UI.Window*/windowToOpen) {
    //add the window to the stack of windows managed by the controller
    this.windowStack.push(windowToOpen);

    //alert('open' + this.windowStack.length);

    //grab a copy of the current nav controller for use in the callback
    var that = this;
    windowToOpen.addEventListener('close', function() {

        // alert('open' + that.windowStack.length);

        if(that.windowStack.length > 1)
        {

            //alert('pop' + that.windowStack.length);
            that.windowStack.pop();
        }
    });

    //hack - setting this property ensures the window is "heavyweight" (associated with an Android activity)
    windowToOpen.navBarHidden = windowToOpen.navBarHidden || false;

    //This is the first window
    if(this.windowStack.length === 1) {

        if(Ti.Platform.osname === 'android') {
            windowToOpen.exitOnClose = true;
            windowToOpen.open();
        } else {

            //alert('nav' + this.windowStack.length);

            this.navGroup = Ti.UI.iPhone.createNavigationGroup({
                window : windowToOpen
            });
            var containerWindow = Ti.UI.createWindow();
            containerWindow.add(this.navGroup);
            containerWindow.open();
        }
    }
    //All subsequent windows
    else {

        if(Ti.Platform.osname === 'android') {
            windowToOpen.open();
        } else {

            //alert('nav2' + this.windowStack.length);

            this.navGroup.open(windowToOpen);
        }
    }
};

//go back to the initial window of the NavigationController
exports.NavigationController.prototype.home = function() {
    //store a copy of all the current windows on the stack

    //alert('reset' + this.windowStack.length);

    var windows = this.windowStack.concat([]);
    for(var i = 1, l = windows.length; i < l; i++) {
        (this.navGroup) ? this.navGroup.close(windows[i]) : windows[i].close();
    }
    this.windowStack = [this.windowStack[0]]; //reset stack

    //alert('n' + this.windowStack.length);
}; 
```

这是 tmain.js

```
 exports.TestWindow = function(navController) {

    var win = Ti.UI.createWindow({
        backButtonTitleImage : 'images/backb.gif',
        fullscreen : false,
        navBarHidden : true,
    });

    var t1 = null;

    win.backgroundImage = 'images/back.jpg';

    var view = Titanium.UI.createView({
        width : '100%',
        height : '100%',
        top : 270,
        layout : 'vertical'
    });

    var b3 = Titanium.UI.createImageView({
        url : 'images/login.gif',
        height : 80
    });
    view.add(b3);

    var b4 = Titanium.UI.createImageView({
        url : 'images/signup.gif',
        top : 0,
        height : 80
    });
    view.add(b4);

    win.add(view);

    var list1 = function(e) {
        openWindow('login', navController, e);
    };
    b3.addEventListener('click', list1);

    var list2 = function(e) {
        openWindow('register', navController, e);
    };
    b4.addEventListener('click', list2);

    win.addEventListener('close', function (e) {
        alert(3);
        b3.removeEventListener('click', list1);
        b4.removeEventListener('click', list2);
    });

    return win;
}; 
```

所以我使用 openWindow 函数在应用程序中打开窗口。我有一个注销按钮，当人们单击它时，会调用函数 navController.home() （请参阅导航控制器），但问题是单击注销链接会导致窗口状态损坏 - 这意味着应用程序崩溃并且当您尝试打开它，窗口混合在一起（就像窗口 3 中的按钮显示在窗口 2 中一样）。我究竟做错了什么？

# arrays - 在matlab中对齐两个数组

> ID：13310027
> 
> 赞同：3
> 
> 时间：2012-11-09T14:36:24.123
> 
> 标签：arrays, matlab

我在 matlab 中有两个数组，通过两种不同的方法表示跟踪点。在每个数组中，第一列包含帧号，第二列和第三列是 x、y 坐标。轨道不一定在同一帧开始或结束，但我想比较任何常见帧的轨道之间的距离。

我的输入数据大致如下：

```
d1 =              d2 = 
[ 130 50 20;      [ 128 48 17;
  131 50 21;        129 52 19;
  ...               ...
  195 70 36 ]       180 65 34 ] 
```

我可以使用找到相交的帧号

```
commonFrames = intersect(d1(:,1), d2(:,1)); 
```

但我被困在如何对齐这些数组（最好没有 for 循环）？

我会沿着`[frameNumber x1 y1 x2 y2]`x1, y1 是来自数组 d1 的帧 frameNumber 的值，而 x2,y2 是来自数组 d2 的帧 frameNumber 的值来寻找输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:42:11.700

'intersect' 函数有两个额外的输出值：输入数组中公共值的索引。

您的脚本可以如下：

```
[commonFrames,ia,ib] = intersect(d1(:,1), d2(:,1));
commonData = [commonFrames d1(ia,2:3) d2(ib,2:3)]; 
```

# javascript - 使用 jQuery 检查链接是否仍然有效

> ID：13310029
> 
> 赞同：6
> 
> 时间：2012-11-09T14:36:28.507
> 
> 标签：javascript, jquery, ajax, http-status-code-404

我做了一个快速功能，使用 AJAX 检查页面上的每个链接，看看它们是否仍然有效。这似乎有效，但它为每个人添加了成功和错误类。如果 AJAX 响应为 404，如何让错误回调函数仅抛出？

```
$('li').each(function(){
    $(this).children('a').each(function(){
        $.ajax({
            url:$(this).attr('src'),
            success:$(this).addClass('success'),
            error:$(this).addClass('error')
        })
    })
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T14:39:42.637

和`success`参数`error`期望函数。

您需要将代码包装在匿名函数中：

```
//there's no need to complicate things, use one call to each()
$('li > a').each(function () {
    var $this;
    $this = $(this); //retain a reference to the current link
    $.ajax({
        url:$(this).attr('href'), //be sure to check the right attribute
        success: function () { //pass an anonymous callback function
            $this.addClass('success');
        },
        error: function (jqXHR, status, er) {
            //only set the error on 404
            if (jqXHR.status === 404) { 
                $this.addClass('error');
            }
            //you could perform additional checking with different classes
            //for other 400 and 500 level HTTP status codes.
        }
    });
}); 
```

否则，您只是设置`success`为 的返回值`$(this).addClass('success');`，这只是一个 jQuery 集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:48:23.683

首先，您需要一个成功和失败的处理程序，现在代码只针对每个链接运行。您不需要 src 属性，而是 href 属性。

这应该有效：

```
$('li').each(function(){
   $(this).children('a').each(function(){
    $.ajax({
        url:$(this).prop('href'),
        success:function(){$(this).addClass('success')},
        error:function(){$(this).addClass('error')}
    })
  })
}); 
```

我还发现在每个循环中使用索引和值更优雅，所以：

```
$('li').each(function(){
   $(this).children('a').each(function(index,value){
    $.ajax({
        url:$(value).prop('href'),
        success:function(){$(value).addClass('success')},
        error:function(){$(value).addClass('error')}
    })
  })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:42:09.453

您需要将成功和错误回调包装在`function()`调用中：

```
$('li').each(function(){
    $(this).children('a').each(function(){
        var $this = $(this);
        $.ajax({
            url:$this.attr('href'),
            success: function() {
                $this.addClass('success');
            },
            error: function() {
                $this.addClass('error');
            }
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:58:15.490

其他答案为所有错误添加了类，如果您真的`404`只想要它，那么这应该这样做：

```
$(this).children('a').each(function(){
    var self;
    self = this; //retain a reference to this
    $.ajax({
        url:$(this).attr('src'),
        success: function () { //pass an anonymous callback function
            $(self).addClass('success');
        },
        statusCode: {
           404: function() {
              $this.addClass('error');
           }
        }
    });
}); 
```

# jquery - 在jQuery中为孩子添加悬停类？

> ID：13310030
> 
> 赞同：4
> 
> 时间：2012-11-09T14:36:31.677
> 
> 标签：jquery, css, hover, jquery-hover

我有一个页面，其中包含一系列“平铺”div，每个 div 都有一个或多个子 div。

我想，在滚动父 div 时，将它的类和所有 div 更改为悬停状态。

我可以很容易地让父 div 工作，但不能让孩子：[见 Fiddle](http://jsfiddle.net/smlombardi/xg8jg/1/)

```
$('.tile').hover(
            function () {
                $(this).addClass("hover");
                $(this).find('.inner').addClass("hover");
              },
              function () {
                $(this).removeClass("hover");
                $(this).find('.inner').removeClass("hover");
              }
        ) 
```

我看到的所有使用“查找”的示例都使用命名父级；但我只需要使用悬停在当前父级上的子级（$this）。

编辑/更新：

我的部分问题是在 div 里面有一个图像按钮。该按钮应该有自己的翻转。请参阅下面设计师的图片。我可以得到第一个组合——一切都是青色和白色加号按钮......但是使用 CSS 我不能影响 lus 按钮的 PARENTS，可以吗？

![在此处输入图像描述](../Images/737e229402f915d999dbdc58151ceb7f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T14:42:42.707

不要编写脚本，而是尝试在所有悬停元素上使用 CSS 伪类 :hover，例如：

```
 .tile {
        width: 200px;
        height: 300px;
        background-color: yellow;
        margin: 20px;
    }
    .tile:hover {
        background-color: lightblue;
    }
    .inner {
        width: 200px;
        height: 50px;
        background-color: goldenrod;
    }

    .tile:hover .inner{
        background-color:#369;
    }

    .tile:hover button{
        color:#ff0000;
    }
    .tile:hover button:hover{
        color:#00ff00;
    } 
```

​ 没有脚本，不用担心 :)

小提琴：http: [//jsfiddle.net/67tCr/](http://jsfiddle.net/67tCr/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T14:39:07.940

你的代码很好......你只需要重新排序你的css规则：

```
.tile {
    width: 200px;
    height: 300px;
    background-color: yellow;
    margin: 20px;
}

.inner {
    width: 200px;
    height: 50px;
    background-color: goldenrod;
}

.hover {
    background-color: lightblue;
} 
```

[更新的小提琴](http://jsfiddle.net/xg8jg/2/)

或者你可以更具体

```
.hover, .inner.hover {
  background-color: lightblue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:42:10.367

我会使用“儿童”功能：

```
$(".title").hover(function(){
  $(this).addClass("hover");
  $(this).children(".inner").addClass("hover");
},function(){
  $(this).removeClass("hover");
  $(this).children(".inner").removeClass("hover");
}); 
```

这是小提琴：http: [//jsfiddle.net/ckaufman/qXU7R/1/](http://jsfiddle.net/ckaufman/qXU7R/1/)

# c# - 亲子关系（链表）

> ID：13310033
> 
> 赞同：0
> 
> 时间：2012-11-09T14:36:43.390
> 
> 标签：c#, linked-list

我正在研究亲子关系。可能的关系是，1\. 节点可以有很多孩子 2\. 节点可以有很多父母 3\. 节点可以有很多孩子和很多父母

当节点（假设一个孩子）有很多父母并且用户选择删除其父母之一时，我们不应该删除特定节点。但只需删除该父级。

我在 C# 4.0 中使用字典

我们拥有的任何设计模式或任何要参考的链接。

请分享。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:52:50.473

如果我没有误解你的问题：

*   你想创建一个：m 关系。
*   你不想使用级联删除（如果父节点被删除，它不会影响其他节点）

为此，您可以集成一个类。这是一些代码：

```
public class Node
{
    public List<Node> Children { get; set; }
    public List<Node> Parents { get; set; }
    public string Name { get; set; } 
    // whatever

    public Node()
    {
        Children = new List<Node>();
        Parents = new List<Node>();
    }
} 
```

List parents 并不是真正必要的，但是使用它可以更容易地访问父节点（无需搜索您的节点是子节点的节点）。

# java - 记住我服务不工作

> ID：13310035
> 
> 赞同：1
> 
> 时间：2012-11-09T14:36:43.843
> 
> 标签：java, spring, security, model-view-controller

我在 Spring MVC 中使用 RememberMe 服务。它以前可以工作，但现在不行了。它会创建一个 Cookie，但是当重新启动浏览器时，该 cookie 会自动删除。我用3-4台机器测试过，不是浏览器问题。这可能是一些配置问题。我们在 Spring Security 中使用基于 Token 的 rememberMe 服务和以下配置。

```
<bean id="shoTokenBasedRememberMeServices" class="com.sho.web.security.ShoTokenBasedRememberMeServices">
    <constructor-arg ref="shoUserDetailsService"/>
</bean> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T02:51:50.323

我经历了这个特殊的问题。我通过将 RememberMeAuthenticationProvider 添加到我的身份验证管理器来解决它。

```
<beans:bean id="rememberMeAuthenticationProvider"
        class="org.springframework.security.authentication.RememberMeAuthenticationProvider">
        ...
    </beans:bean>

    <authentication-manager alias="authMgr">
        ...
        <authentication-provider ref="rememberMeAuthenticationProvider">
        </authentication-provider>
    </authentication-manager> 
```

所以我的身份验证管理器最终得到了两个身份验证提供程序：

```
<authentication-manager alias="authMgr">
        <authentication-provider user-service-ref="customUserDetailsService">
            <password-encoder hash="sha">
                <salt-source user-property="username" />
            </password-encoder>
        </authentication-provider>
        <authentication-provider ref="rememberMeAuthenticationProvider">
        </authentication-provider>
    </authentication-manager> 
```

这篇文章说“在你的AuthenticationManager中包含RememberMeAuthenticationProvider”：[http ://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html)

# ruby-on-rails - Carrierwave - 作为独立操作保存到 S3

> ID：13310037
> 
> 赞同：1
> 
> 时间：2012-11-09T14:36:49.163
> 
> 标签：ruby-on-rails, ruby, amazon-s3, carrierwave, fog

我的用户将外部图像 URL (http://their-site.com/photo.jpg) 存储在 - 例如 -`@user.external_image`中。我正在尝试为 User 类编写一个方法，该方法采用该 URL 并使用 Carrierwave 将其保存到 S3。

所以在上面`@user`，我想运行`@user.save_to_s3`并将图像“上传”到 S3。我试图通过将上传器安装`:s3_image`到 User 类并编写以下方法来做到这一点：

```
def save_to_s3
  self.remote_s3_image_url = self.external_image
  save
end 
```

但是当我在`@user`记录上调用该方法时出现以下错误：

“ArgumentError：缺少必需的参数：aws_access_key_id、aws_secret_access_key”

所以它越来越接近，但它没有检索我的 S3 凭据 - 即使它们已设置。我很感激任何想法或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T02:52:45.587

事实证明，该问题与 Carrierwave 或 Fog 无关。这是我的疏忽，我设置的 ENV 变量（在我的应用程序`.env`文件中）没有被加载到引导的 Rails 环境（例如 rails 控制台）中。一旦我将[http://github.com/bkeepers/dotenv](http://github.com/bkeepers/dotenv)（它正好解决了这个问题）添加到我的包中，该`save_to_s3`方法就起作用了。

# ios - 为什么导航控制器上的覆盖：willShowViewController：标签栏需要动画

> ID：13310043
> 
> 赞同：0
> 
> 时间：2012-11-09T14:37:05.420
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我有一个从 AppDelegate 创建 tabbarcontroller 的应用程序。我想在导航栏中添加一个按钮，但无法做到。最终我设法掌握了一些工作代码，但我并不真正理解它。

步骤是：

1.  确认 AppDelegate 到 UINavigationControllerDelegate
2.  设置 rootNavigationController.delegate = self
3.  覆盖 navigationController:willShowViewController:animated 和 tabBarController:didSelectViewController

我想我遵循**tabBarController:didSelectViewController**代码，但对**navigationController:willShowViewController:animated**发生的事情迷失了方向。

```
- (void) tabBarController: (UITabBarController*) tabBarController didSelectViewController: (UIViewController*) viewController
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
     self.tabBarController.navigationItem.title = viewController.navigationItem.title;
     self.tabBarController.navigationItem.rightBarButtonItems = viewController.navigationItem.rightBarButtonItems;
     self.tabBarController.navigationItem.leftBarButtonItems = viewController.navigationItem.leftBarButtonItems;
     }
  }

- (void) navigationController: (UINavigationController*) navigationController
   willShowViewController: (UIViewController*) viewController
                 animated: (BOOL) animated
    {
      if (viewController == tabBarController)
      {
        UIViewController* tabViewController = tabBarController.selectedViewController;
    SEL willShowSel = @selector(navigationController:willShowViewController:animated:);

      if ([tabViewController respondsToSelector: willShowSel])
      {
        UIViewController<UINavigationControllerDelegate>* vc =
            (UIViewController<UINavigationControllerDelegate>*) tabViewController;
        [vc navigationController: navigationController willShowViewController: vc animated: animated];
      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:45:54.397

此代码可能处理`UITabBarController`使用`UINavigationController`. 该`UITabBarController`文档指出它需要是根视图控制器（即不在 a`UINavigationController`中）并且以其他方式使用它可能会导致问题。

代码似乎在做的是捕获通常传递给的事件`viewController`，检查它是否是 a `UITabBarController`，如果是，然后它检查可见视图是否`UITabBarController`响应此方法，如果响应，则传递方法（选择器) 呼吁该观点。

如果可能的话，我建议将其`UITabBarController`从嵌入到`UINavigationController`. 可能需要一些工作，但会使您的代码符合要求。（并消除对`navigationController:willShowViewController:animated:`

# python - 如何将我的 python 脚本限制为只接受一个参数？（参数解析）

> ID：13310047
> 
> 赞同：12
> 
> 时间：2012-11-09T14:37:16.420
> 
> 标签：python, argparse

我想要一个具有（例如）三个参数的脚本：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument("--a",help="Argument a")
parser.add_argument("--b",help="Argument b")
parser.add_argument("--c",help="Argument c")
args= parser.parse_args() 
```

但是让它在任何给定时间只能指定'a'，'b'或'c'，例如你可以指定'a'但不能指定'b'或'c'这是否可能以及如何我会实现它吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-09T14:40:35.207

argpase 允许您使用该[`add_mutually_exclusive_group()`](http://docs.python.org/dev/library/argparse.html#argparse.add_mutually_exclusive_group)方法指定它。

```
import argparse
parser = argparse.ArgumentParser()
g = parser.add_mutually_exclusive_group()
g.add_argument("--a",help="Argument a")
g.add_argument("--b",help="Argument b")
g.add_argument("--c",help="Argument c")
args= parser.parse_args() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:45:03.323

使用`add_mutually_exclusive_group()`上面提到的`argparse`已经在级别上检查了这一点。

如果您希望对错误消息等有更多控制权，您当然可以稍后查看结果：

```
if len([x for x in args.a, args.b, args.c if x is not None]) > 1:
  raise Exception("Not allowed!") 
```

# ruby-on-rails - heroku 迁移失败

> ID：13310055
> 
> 赞同：2
> 
> 时间：2012-11-09T14:37:51.097
> 
> 标签：ruby-on-rails, heroku, rails-migrations

在 heroku 我跑了 rake db:migrate 并得到以下错误

```
==  AlterBodyForDocuments: migrating ==========================================
-- change_column(:documents, :body, :mediumtext)
rake aborted!
An error has occurred, this and all later migrations canceled:

PGError: ERROR:  type "mediumtext" does not exist
: ALTER TABLE "documents" ALTER COLUMN "body" TYPE mediumtext

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

这是我的 AlterBodyForDocuments 迁移：

```
class AlterBodyForDocuments < ActiveRecord::Migration
  def change
    change_column :documents, :body, :mediumtext
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:42:54.680

我认为mediumtext是mysql的东西

heroku 使用 postgresql

`:text`改为使用

# android - 带有客户适配器的自定义窗口标题

> ID：13310057
> 
> 赞同：0
> 
> 时间：2012-11-09T14:37:53.467
> 
> 标签：android, adapter

使用我的客户适配器时无法在 Android 中设置自定义窗口标题。我做了这个网络上所说的一切

[http://www.londatiga.net/it/how-to-create-custom-window-title-in-android/](http://www.londatiga.net/it/how-to-create-custom-window-title-in-android/)

但我不知道把这个放在哪里：

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
setContentView(R.layout.main);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title); 
```

我的主要活动代码如下所示：

```
ListRssAdpter listAdapter;
ListView lv = getListView();
lv.setTextFilterEnabled(true);
listAdapter = new ListRssAdpter(this, android.R.layout.simple_list_item_1, listKeys);
getResources().getString(R.string.emtyRssList),0).show();
lv.setAdapter(listAdapter); // on test 
```

谢谢您的帮助

# email - 如何在码头电子邮件配置中配置 FROM 字段？

> ID：13310063
> 
> 赞同：2
> 
> 时间：2012-11-09T14:38:05.400
> 
> 标签：email, jetty, jakarta-mail, archiva

我正在配置与 Jetty 独立运行的 Archiva 1.4-M3 版本。配置有效（我收到电子邮件）。但是，它们是从“root@localhost”报告的。正如您在下面的配置中看到的那样，我定义了 mail.from，但不知何故它没有被拾取。没有邮件标头包含地址archiva@mymailserver.com。

**什么是正确的配置，所以电子邮件显示为从archiva@mymailserver.com 发送？**

```
 <New id="validation_mail" class="org.eclipse.jetty.plus.jndi.Resource">
<Arg>mail/Session</Arg>
<Arg>
  <New class="org.eclipse.jetty.jndi.factories.MailSessionReference">
    <Set name="user">myuser</Set>
    <Set name="password">OBF:1yxf1vnw1v1p1vu51vv51v2p1vn61ym5</Set>
    <Set name="properties">
      <New class="java.util.Properties">
        <Put name="mail.smtp.host">mail.server</Put>
        <Put name="mail.smtp.auth">true</Put>
        <Put name="mail.port">25</Put>
        <Put name="mail.from">archiva@mymailserver.com</Put>
        <Put name="mail.mime.address.strict">false</Put>
        <Put name="mail.debug">false</Put>
        <Put name="mail.transport.protocol">smtp</Put>
      </New>
    </Set>
  </New>
</Arg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T18:56:39.317

根据 Archiva 的文档，电子邮件地址是使用以下属性配置的：

> *   email.from.address=$user.name@localhost 块引用
>     *   系统发送的所有电子邮件将来自以下地址

从 Archiva 2.1.x 和 2.2.x 开始，我没有在“用户运行时配置”部分的“属性”选项卡中看到该属性。这意味着您需要在archiva.xml 中手动设置此属性。如果您使用的是 servlet 容器，例如 Tomcat，我并不是指位于 conf/Catalina/localhost 中的archiva.xml。我指的是位于 conf 目录中的archiva.xml。

[来源 - Archiva 的电子邮件配置页面](https://archiva.apache.org/redback/configuration.html#Email_Settings)

# ios - 动画旋转视图IOS

> ID：13310067
> 
> 赞同：0
> 
> 时间：2012-11-09T14:38:16.743
> 
> 标签：ios, animation, rotation

有没有办法让我的视图控制器旋转以淡出然后淡入视图旋转而不是旋转运动？

已经尝试过调光，然后在检测到旋转时调光，但是随着它变暗，您可以看到它开始旋转

所以可能需要一种方法来禁用现有的旋转运动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:14:57.227

`UIViewController`尝试在方法`willRotateToInterfaceOrientation`或`willAnimateRotationToInterfaceOrientation`或中设置您的dimmin动画`willAnimateFirstHalfOfRotationToInterfaceOrientation`

# json - Resteasy GET - QueryString 中的 JSON

> ID：13310068
> 
> 赞同：1
> 
> 时间：2012-11-09T14:38:26.757
> 
> 标签：json, get, query-string, resteasy

我想将 JSON 数组和 JSON 对象列表传递给查询字符串中的 Reasteasy GET 方法。如何在服务方法中访问它们？

例如在数组上，如果参数名称是“employeeId”，我想传递 ?employeeId=[1,2,3] 而不是传递 ?employeeId=1&employeeId=2&employeeId=3

对于对象列表，我想传递类似 ?parameter=[{val1, val2},{val1, val2},{val1, val2}]

如何在服务器端方法中正确获取这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:54:37.090

您可以使用 Path 注释和 PathParam 注释来获取输入值

```
@Path(/path/EmployeeIdArray)
public void someMethod(@PathParam("EmployeeIdArray")String[] employeeIdArray){

} 
```

使用它你可以访问它

> 获取 /path/[{val1, val2},{val1, val2},{val1, val2}]

# c# - 使用 this[] 关键字从类中检索值

> ID：13310077
> 
> 赞同：2
> 
> 时间：2012-11-09T14:38:56.477
> 
> 标签：c#, class, this, instant

在以下示例中，this[] 在类中用于从类瞬间的某处获取值。这个值存储在哪里？是否可能是 [] 运算符被重载，或者这只是我不熟悉的 c# 语法？

```
public class MyUserSettings : ApplicationSettingsBase
{
    [UserScopedSetting()]
    [DefaultSettingValue("white")]
    public Color BackgroundColor
    {
        get
        {
            return ((Color)this["BackgroundColor"]);
        }
        set
        {
            this["BackgroundColor"] = (Color)value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:40:27.770

这称为[索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)。它与类的重载运算符非常相似。在该类的其他地方，或在该类的基类之一中，定义了索引器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T14:40:28.023

它是[索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)语法。

> 索引器允许类或结构的实例像数组一样被索引。索引器类似于属性，只是它们的访问器带有参数。

继承自的类之一`MyUserSettings`已实现`string`索引器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T14:41:51.060

是的，它是一个重载的[索引运算符](http://msdn.microsoft.com/en-us/library/a3hd7ste.aspx)。

# iphone - ios：谷歌分析没有结果

> ID：13310085
> 
> 赞同：0
> 
> 时间：2012-11-09T14:39:23.557
> 
> 标签：iphone, ios, google-analytics, analytics

我没有在我的 iOS 应用程序中收到来自 Google Analytics 的结果。

我像这样在我的应用程序委托中启动跟踪器（我用 Xs 掩盖了我的 ID）：

```
[[GANTracker sharedTracker] startTrackerWithAccountID:@"UA-XXXXXXXX-1"
                                       dispatchPeriod:10
                                             delegate:nil]; 
```

我正在尝试在 viewWillAppear 方法中跟踪浏览量：

```
-(void)viewWillAppear:(BOOL)animated{
        [[GANTracker sharedTracker] trackPageview:@"SearchViewController" withError:nil];
} 
```

这些 trackPageview 调用返回 YES，这似乎表明跟踪成功，但统计信息未显示在我的 Analytics 控制台中。我已经等了 48 小时，还是没有。

还有什么我应该做的吗？我的代码有什么问题吗？

我不能使用 Easy Tracker，因为我的项目包含 UITableViewControllers，而且我也在跟踪事件。

**编辑：**现在我也实现了委托方法，它告诉我命中已成功发送。

我已经仔细检查了我的 ID 是否正确。

我正在使用版本 1.5.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:21:42.990

我无法弄清楚上述问题，但事实证明，使用新的 2.0 测试版对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T01:06:21.540

你的代码看起来没问题。除了您的帐户 ID 可能粘贴不正确这一事实外，我想不出其他任何事情。

# android - '无网络' Toast 未显示在 onCreate 中

> ID：13310087
> 
> 赞同：1
> 
> 时间：2012-11-09T14:39:34.507
> 
> 标签：android, android-layout, listview, handler, toast

大家好，希望能帮到你。

我已经构建了一个填充 ListView 的 RSS 阅读器。我想检查用户在应用程序启动时是否有网络访问权限，如果没有网络，那么用户应该看到 setEmptyView 视图和敬酒。

在 onCreate 中，我使用空列表设置了列表适配器，因此我希望看到空视图。然后我查询网络状态，如果没有网络，我创建一个 toast。但是我从来没有在启动时看到空视图，当我没有网络时我从来没有看到吐司。这是怎么回事？

```
public class XMLActivity extends ListActivity {

private List<JSONObject> jobs = new ArrayList<JSONObject>();
private RssListAdapter adapter;
private ListView lv;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

//SET LAYOUT WITH EMPTY LIST VIEW 
    setContentView(R.layout.main);
    View empty = findViewById(R.id.empty);
    lv = getListView();               //get view layout
    lv.setEmptyView(empty);                   //set empty view
    adapter = new RssListAdapter(this,jobs);  //jobs is empty array list
    setListAdapter(adapter);

//CHECK FOR NETWORK AND DISPLAY TOAST
    try{
        boolean network = RssReader.isOnline(this); //check network state
        if (!network){
            Toast toast = Toast.makeText(XMLActivity.this, "No Network Access", Toast.LENGTH_LONG);
            toast.show();
        }
    }catch (Exception e){
            Toast toast = Toast.makeText(XMLActivity.this, "No Network Access", Toast.LENGTH_LONG);
            toast.show();
    }

// START RSS READER HANDLER
    try {
        jobs = RssReader.getLatestRssFeed();

    } catch (Exception e) {

    }
 //REFRESH ADAPTER FOR LISTVIEW
    adapter.clear();
    for(JSONObject job :jobs){
        adapter.add(job);
    }
    adapter.notifyDataSetChanged();
             lv.setClickable(true); 
```

为什么我看不到空视图或 toast，这个问题只发生在 onCreate 例程中。后来的祝酒词和空视图在菜单项选择上显示良好，因此这似乎是特定于 onCreate 序列的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:47:10.010

试试`Toast.makeToast(this, "msg to user", Toast.TOAST_MSG_SHORT).show();`我确定我有一个错字，因为我的开发机器还没有启动和运行（还）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:48:41.670

利用 ：

```
Toast.makeText(XMLActivity.this , "No Network", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:32:39.983

您有一个未涵盖的情况 - 如果`network`==会发生什么`true`？

```
 try{
        boolean network = RssReader.isOnline(this); //check network state
        if (!network){
            Toast toast = Toast.makeText(XMLActivity.this, "No Network Access", Toast.LENGTH_LONG);
            toast.show();
        }
        else {
            Toast toast = Toast.makeText(XMLActivity.this, "Network Access!", Toast.LENGTH_LONG);
            toast.show();
        }
    }catch (Exception e){
            Toast toast = Toast.makeText(XMLActivity.this, "No Network Access", Toast.LENGTH_LONG);
            toast.show();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:25:18.063

```
if (!network){    
  Toast toast = new Toast(getApplicationContext());
  toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
  toast.setDuration(Toast.LENGTH_LONG);
  TextView txt1 =  new TextView(this);
  txt1.setText("No Network");
  toast.setView(txt1);
  toast.show();
}
else ... 
```

尝试这个..，，。

# java - 了解外部 JAR 库中的 JAVA 代码

> ID：13310089
> 
> 赞同：2
> 
> 时间：2012-11-09T14:39:36.630
> 
> 标签：java, jar, external, libraries

我已经为我正在做的一个项目提供了一些外部 JAR 库。我可以访问编译后的代码，但我无法真正理解它，因为它不是我习惯看到的形式。关于如何“解码”和了解发生了什么的任何提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:41:56.757

您可以使用 JAD 之类的反编译器将 .class 文件反编译为 .java 文件，但根据我的经验，它的使用非常有限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:42:22.190

试试 Java Decompiler（又一个 Fast Java decompiler）：http: [//java.decompiler.free.fr/](http://java.decompiler.free.fr/)。

它可以反编译你编译的库。

JAD 仅支持到 1.3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:42:36.167

应该有一个文档和/或源 jar 可以附加到您的 IDE，这将允许您访问文档。

如果没有，你必须反编译它。

请记住，将这个罐子视为黑匣子可能是可以的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:41:21.250

在网上搜索*Java 反编译*器（例如*JAD*）。您在 jar 中看到的是 Java-Classes，即编译 .java 文件的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T14:41:49.453

您可以使用一些反编译器将 .class 反编译为 .java。我们正在使用 JD Java 反编译器。

注意：我认为反编译（或）修改反编译的代码在某些国家是非法的。请注意它。

# c# - 通过选项/选择元素发布复杂类型

> ID：13310090
> 
> 赞同：1
> 
> 时间：2012-11-09T14:39:40.000
> 
> 标签：c#, asp.net-mvc

可以通过类别模型（下面给出示例）

```
public class Category { 
     public Guid Id { get; set; }; 
     public String Title { get; set; }
} 
```

使用选择/选项？

```
<select id="categories" name="Category">
    <option value="Id">Text</option>
</select> 
```

据我了解，这将正常绑定但不包括`Title`属性？

**编辑**

`Viewmodel`

```
public class EditProductModelView { 
    [Required] Category Category { get; set; }
    // other properties
} 
```

`Controller`

```
public ActionResult Edit(EditProductViewModel model) {
    // controller logic
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:42:56.927

为了绑定，我相信你必须命名 select-element `Id`。

```
<select id="categories" name="Id">
    <option value="foo">Text</option>
    <option value="bar">Text</option>
</select> 
```

如果您的操作看起来像这样：

```
public ActionResult YourAction(Category model) {
    var modelId = model.Id; // Will be set to the chosen value
    var title = model.Title; // Will be null
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:58:18.137

您可以为标题值添加一个隐藏的输入，并在选择选项更改时用 data-title 属性值的选项填充它

```
<input id="categoriesTitle" type="hidden" name="Category.Title" />
<select id="categories" name="Category.Id">
    <option value="foo" data-title="this is foo">foo</option>
    <option value="bar" data-title="I am bar">bar</option>
</select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T07:26:57.537

您的模型需要一个地方来获取选定的 Id，这是您放置所需属性的地方

```
public class EditProductModelView { 
      [Required]
     public Guid SelectedCategoryId {get;set;}
} 
```

然后 name 必须与视图模型中的属性名称匹配：

```
<select id="categories" name="SelectedCategoryId">
    <option value="SomeGuidHere">Text</option>
</select> 
```

这只是因为浏览器如何处理帖子。他们不发布文本节点，只发布选定的值，在您的情况下是 Id。

# c++ - 指针块的新位置

> ID：13310091
> 
> 赞同：1
> 
> 时间：2012-11-09T14:39:42.057
> 
> 标签：c++

我正在尝试在内存中一个一个地分配一阶指针。二阶指针必须遍历此队列并处理在该指针上创建的对象。当我分配对象队列（而不是指向它们的指针）时，放置 new 工作正常，但是当我尝试使用指针进行相同操作时，麻烦就会发生。

```
int* p;

p = new int(1);
printf("%p - %d\n", p, *p);    // address of int and its value
delete p; 
```

创建和删除第一个对象以使用某个地址初始化指针，下一个对象将循环创建

```
p = new(p) int(2);    // (p) - memory will be allocated at address
                      // on which p points
printf("%p - %d\n", p, *p);    // address of int and its value
delete p;

p++;

p = new(p) int(3);    // (p) - memory will be allocated at address
                      // on which p points
printf("%p - %d\n", p, *p);    // address of int and its value
delete p; 
```

输出：

01C1FFD0 - 1

01C1FFD0 - 2

01C1FFD4 - 3；

```
int** pp;

pp = new int*;
printf("%p\n", pp);    // address of int*
*pp = new int(1);
printf("%p - %d\n", *pp, **pp);    // address of int and its value
delete *pp;
delete pp;

pp = new(pp) int*;
printf("%p\n", pp);    // address of int*
*pp = new int(2);
printf("%p - %d\n", *pp, **pp);    // address of int and its value
delete *pp;
delete pp;

pp++;

pp = new(pp) int*;
printf("%p\n", pp);    // address of int*
*pp = new int(3);
printf("%p - %d\n", *pp, **pp);    // address of int and its value
delete *pp;
delete pp; 
```

如果 int 不是由 *pp 创建的，那么如果 pp 递增，那么以后删除 pp 是不真实的，如果 int 是由 *pp 创建的，那么地址和第二个值就会有些奇怪。

输出：

01C1FFD0

01C1FFE0 - 1

01C1FFD0

01C1FFD0 - 29491152

01C1FFD4

01C1FFD0 - 3

对于如何正确组织此队列的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:37:53.513

> ```
> p = new(p) int(2);    // (p) - memory will be allocated at address
>                       // on which p points 
> ```

这是你第一次错的地方。`new(p) T`不分配任何内存。而不是这样，它只是创建一个`T`at address `p`，假设它`p`指向一些`T`可以构造 a 的内存。此外，由于没有分配内存，您不能只将此类指针传递给`delete`，因为这将尝试释放未分配的存储空间。而不是这样，您需要手动调用析构函数并根据您获取它的方式处理内存。

放置`new`是一个相当高级的概念，您目前很可能不需要。事实上，即使是“简单”的手动内存/对象生命周期管理也是您在学习时可能不应该为自己烦恼的事情。你是从哪本书上学习 C++ 的？你看过[这个书单](https://stackoverflow.com/q/388242/140719)吗？

仅供参考：我没有在该行下方查看您的代码。

# drupal - Drupal 7 Intranet 门户（Open Atrium 替代方案）

> ID：13310092
> 
> 赞同：1
> 
> 时间：2012-11-09T14:39:41.917
> 
> 标签：drupal, drupal-7, drupal-modules, portal, intranet

我需要在 Drupal 7 中创建一个 Intranet 门户。
完成一个完整的 Intranet 门户需要什么贡献的 Drupal 7 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:19:46.183

这个问题的答案在每个实例中都会有所不同，并且取决于用户的需求。

通过与目标用户交谈来研究需求，但不要问他们想要什么。相反，向他们询问他们遇到的问题。询问他们无法完成哪些任务并找出根本原因。这将使您了解他们需要的应用程序。

从最多六个这样的问题开始，并计划来年的工作时间表，例如每季度发布一次。开发原型并与您的用户一起测试。听取他们的反馈并继续改进。

不要认为这是一种技术实施，而是一个持续的过程。您会发现这对您的利益相关者管理很有帮助：设置六个重点领域设定他们的期望，并听取他们的反馈，包括他们在这个过程中。这对于采用很有价值，因为您将花费更少的精力让人们参与进来，因为您已经在业务中拥有了拥护者。

# java - maven 项目管理

> ID：13310095
> 
> 赞同：0
> 
> 时间：2012-11-09T14:39:55.650
> 
> 标签：java, maven, maven-3

我需要建议，我们有三个独立的项目，但其中一些共享一些依赖项，而另一些则与上下文相关。在maven pom中使用继承还是使用依赖项更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:42:46.897

取决于您所说的“上下文相关”是什么意思。

一般来说，如果项目足够独立，我会建议您使用依赖项。如果他们共享更多的模块，继承将是有意义的。例如，如果所有三个项目都需要使用库 X 的版本 Y，并且您将在所有三个项目中同时更新此库，则使用继承。否则，我不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:42:59.843

我建议使用依赖项。当您拥有同一应用程序的不同子模块时，Pom 继承更有意义，因此您希望所有子模块使用相同版本的依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:14:10.160

您应该对所有模块中不需要的所有依赖项使用依赖项。如果存在一些共享的依赖项，例如许多 spring 依赖项，您可以使用[物料清单](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Importing_Dependencies)。

# solaris-10 - 存在软链接时，Solaris cp -P 不设置目录所有权

> ID：13310096
> 
> 赞同：1
> 
> 时间：2012-11-09T14:39:57.597
> 
> 标签：solaris-10

在 Solaris 10 update 10 (sparc, 147440-25) 中进行复制时，我遇到了一个奇怪的问题。

这是设置（以root身份完成）：

```
# cd /tmp
# mkdir foo
# touch foo/thing1
# ln -s thing1 foo/thing2
# chown -hR joe:user foo 
```

如果您查看目录和链接，一切都归用户“joe”所有。现在是有趣的部分：

```
# cp -rpP foo bar 
```

此处 cp 的选项是递归、保留权限和所有权，以及对链接进行操作而不是跟随它们。但是当我这样做时，虽然使用正确的权限复制了链接，但目录本身 bar 设置为 root:root。这种行为有什么原因吗？

只有在目录中有链接时它才会这样做。如果目录仅包含文件，则保留所有所有权（我假设是因为 -P 永远不会发挥作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T17:49:57.913

这确实是`cp`我在同一个 Solaris 版本上重现的奇怪行为。

不确定是否有适用于 Solaris 10 的补丁，但该问题已在 Solaris 11.1 中修复。

# c# - 控制器功能上方的自定义属性

> ID：13310112
> 
> 赞同：13
> 
> 时间：2012-11-09T14:40:45.710
> 
> 标签：c#, asp.net-mvc-4, custom-attributes

我想将`[FirstTime]`属性放在控制器函数之上，然后创建一个`FirstTimeAttribute`具有一些逻辑的函数来检查用户是否输入了他的姓名，`/Home/FirstTime`如果没有，则将他重定向到。

所以不要这样做：

```
public ActionResult Index()
{
    // Some major logic here
    if (...)
        return RedirectToAction("FirstTime", "Home");

    return View();
} 
```

我会这样做：

```
[FirstTime]
public ActionResult Index()
{
    return View();
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-09T14:45:25.040

当然。做类似的事情

```
public class FirstTimeAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if(filterContext.HttpContext.Session != null)
        {
          var user = filterContext.HttpContext.Session["User"] as User;
          if(user != null && string.IsNullOrEmpty(user.FirstName))
              filterContext.Result = new RedirectResult("/home/firstname");
          else
          {
              //what ever you want, or nothing at all
          }
         }
    }
} 
```

只需在您的操作中使用***[FirstTime]***属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:53:18.003

属性代码：

```
 public class FirstTimeAttribute : ActionFilterAttribute, IActionFilter
        {
            public override void OnActionExecuting(ActionExecutingContext filterContext)
            {
                if (string.IsNullOrEmpty(filterContext.HttpContext.Request[name]))
                {
                    filterContext.Result = new RedirectToRouteResult("Default", new RouteValueDictionary
                                            {
                                                { "controller", "Home" },
                                                { "action", "FirstTime" },
                                                { "area", string.Empty }
                                            });
                }
            }
   } 
```

用法：

```
[FirstTime]
public ActionResult Index(string name)
{
    return View();
} 
```

# java - 在junit 3中模拟一个具体的类

> ID：13310114
> 
> 赞同：0
> 
> 时间：2012-11-09T14:40:48.107
> 
> 标签：java, testing, mocking, junit3

我有一个具有以下构造函数的类：

```
class Foo {
    Foo (Bar bar) {
       ...
    }
} 
```

我正在尝试为此类编写单元测试并模拟对 Bar 的依赖。但是，我必须使用**JUnit 3**而**Bar 是一个具体的类型**。有没有人有任何想法？我不能使用 EasyMock 类扩展（需要 JUnit 4）并且在 Mockito 上没有成功。我正在考虑的一个（特别难看的）解决方案如下：

```
interface IBarWrapper {
    void barMethod();
}

class BarWrapper implements IBarWrapper {
    void barMethod() {
        bar.barMethod();
    }
}

class Foo {
    Foo (IBarWrapper wrapper) {
        ...
    }
} 
```

但我不喜欢改变我的实际代码以适应测试的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:44:38.067

使用[EasyMock](http://www.easymock.org/) (v3.x)，您可以模拟具体类。请参阅[自述文件](http://easymock.org/EasyMock3_0_Documentation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:10:08.063

你可以只继承`Bar`. 没有必要把事情复杂化。

# c# - 为什么 EF 代码优先生成无关的外键列？

> ID：13310121
> 
> 赞同：13
> 
> 时间：2012-11-09T14:41:22.553
> 
> 标签：c#, database, entity-framework, ef-code-first

我使用实体框架代码优先自动创建我的数据库模式，我的一个实体如下所示：

```
public class AssessmentsCaseStudies {
    #region Persisted fields
    [Required]
    [Key, Column(Order=0)]
    [ForeignKey("Assessment")]
    public int AssessmentId { get; set; }

    [Required]
    [Key, Column(Order=1)]
    [ForeignKey("CaseStudy")]
    public int CaseStudyId { get; set; }

    [Required]
    public int Score { get; set; }

    [ForeignKey("Follows")]
    public int? FollowsCaseStudyId { get; set; }
    #endregion

    #region Navigation properties
    public virtual Assessment Assessment { get; set; }
    public virtual CaseStudy CaseStudy { get; set; }
    public virtual CaseStudy Follows { get; set; }
    #endregion
} 
```

当 EF 自动生成我的数据库时，它会生成一个包含以下列的表：

```
AssessmentId (PK, FK, int, not null)
CaseStudyId (PK, FK, int, not null)
Score (int, not null)
FollowsCaseStudyId (FK, int, null)
CaseStudy_CaseStudyId (FK, int, null) 
```

除了`CaseStudy_CaseStudyId`列之外，这一切都很好。为什么会产生它？它是干什么用的？我怎样才能阻止它被生成？我的怀疑是 EF 不能再自动匹配`CaseStudy`'s`ICollection<AssessmentsCaseStudies>`与`CaseStudyId`列，因此它创建自己的列来将两者链接在一起以用于该导航属性。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-10T19:15:53.737

因为您的实体中有两个导航属性类型，而实体 EF 中的**集合**无法`CaseStudy`确定该集合引用的两个导航属性中的哪一个。两者都是可能的，并且这两个选项都会产生有效但不同的实体模型和数据库模式。`AssessmentsCaseStudies``AssessmentsCaseStudies``CaseStudy``CaseStudy`

在这种模棱两可的情况下，EF 约定实际上是创建**三个**关系，即您的集合 in`CaseStudy`不引用两个`CaseStudy`导航属性中的任何一个，而是在`AssessmentsCaseStudies`. 这第三个关系是您在数据库中看到的第三个外键的原因 - 带有下划线的那个。（下划线始终强烈表明映射约定发生了某些事情，而不是您的显式配置或数据注释。）

要解决此问题并覆盖约定，您可以应用该`[InverseProperty]`属性，从而指定集合所属的`CaseStudy`导航属性：`AssessmentsCaseStudies`

```
[InverseProperty("AssessmentsCaseStudies")] // the collection in CaseStudy entity
public virtual CaseStudy CaseStudy { get; set; } 
```

您还可以（或者，您不需要两者）将属性放在集合端：

```
[InverseProperty("CaseStudy")] // the CaseStudy property in AssessmentsCaseStudies entity
public virtual ICollection<AssessmentsCaseStudies> AssessmentsCaseStudies { get; set; } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-11T15:08:56.263

由于某种原因，Slauma 的`InverseProperty`属性建议不起作用。起作用的是我通过数据库上下文方法中的 Fluent API指定了 中的两个`CaseStudy`导航属性`AssessmentsCaseStudies`和实体之间的关系：`CaseStudy``OnModelCreating`

```
modelBuilder.Entity<AssessmentsCaseStudies>()
    .HasRequired(acs => acs.CaseStudy)
    .WithMany(cs => cs.AssessmentsCaseStudies)
    .HasForeignKey(acs => acs.CaseStudyId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<AssessmentsCaseStudies>()
    .HasOptional(acs => acs.Follows)
    .WithMany()  // No reverse navigation property
    .HasForeignKey(acs => acs.FollowsCaseStudy)
    .WillCascadeOnDelete(false); 
```

`Add-Migration`添加后，当我不再尝试添加列时生成的迁移代码，`CaseStudy_CaseStudyId`我只是`FollowsCaseStudyId`添加了具有适当外键关系的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T20:12:06.030

对于其他登陆这里寻找解决方案的人，如果您已经尝试了以前的答案并且仍然获得额外的外键列，请查找您可能在 POCO 类中进一步定义且您不打算映射到 DB 的任何属性字段。即使它们包含代码块，就像复杂的 get 访问器一样，Entity Framework 也会尝试以某种方式将它们映射到数据库。如果您的属性返回实体，这可能会导致额外的外键列。为了安全起见，要么用属性装饰这些属性，要么`[NotMapped]`将它们转换为方法。

# shell - 无法使用 md 为 UNC 路径创建多个文件夹

> ID：13310126
> 
> 赞同：0
> 
> 时间：2012-11-09T14:41:47.350
> 
> 标签：shell, command-line, permissions, windows-server-2008

这是让我感到困惑的事情。

我们有一个远程共享 \SomeMachine\Mirror 和一个子文件夹 \Reports

所以 \\SomeMachine\Mirror\Reports

然后我们有一个批处理命令运行 md "\\SomeMachine\Mirror\Reports\YYYY\YYYY-MM\YYYY-MM-DD"

其中日期部分替换当前日期。

我可以从我的机器上运行这个命令，它会正确地创建路径，但是从服务器（Windows Server 2008 R2）上，它会说“无法创建目录或文件”。更奇怪的是，如果我分阶段进行 md，首先创建 YYYY 路径，然后创建 YYYY-MM 路径，它工作正常。不确定是否有任何权限会阻止一种方法而不是另一种方法？

两个命令 shell 都将它们的版本声明为 6.1.7601，并且 mkdir /? 声明它将创建中间路径。

有人知道可能出了什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:36:27.557

在对不同的服务器进行了一些调查之后，我确认两台其他相同的服务器之间的行为是不同的。重新启动出现问题的服务器解决了这个问题。没有其他（可见）症状，因此将其归结为可能与服务器软件更新有关的“故障”。

# java - 使用来自 jsp 的小程序锁定工作站

> ID：13310131
> 
> 赞同：2
> 
> 时间：2012-11-09T14:42:07.687
> 
> 标签：java, jsp, dll, websocket, applet

我想从 jsp 锁定我的工作站。为此，我编写了一个使用 JNA API 的小程序，它嵌入在 JSP 中。

当我将小程序作为独立小程序调用时，它正在工作并且我的工作站被锁定。但是当我从 JSP 调用它时，它没有按预期工作。我可以看到小程序已加载，它显示为“在“状态栏”中启动，但它没有锁定我的工作站。

**小程序代码片段**

```
 public void init(){

    User32 user32 = (User32) Native.loadLibrary("user32", User32.class);
    user32.LockWorkStation();
}

public void paint(Graphics g){
     } 
```

**jsp代码片段**

```
<jsp:plugin type="applet" 
code="Applet.myApplet.class"   
width="200" height="100" align="top"
codebase="/workspace/applet">   
<jsp:fallback>    
<p>Unable to load applet</p>    
</jsp:fallback>
</jsp:plugin> 
```

请让我知道我哪里出错了……如果还有其他方法可以锁定工作站，请指教……

谢谢， Indranil

**2017 年更新**- Chrome 已弃用 NPAPI，它不再支持 dll，IE 也与 Edge 朝着相同的方向发展。实现此解决方案的唯一可能方法是使用 websockets。如果有人感兴趣，我可以发布完整的解决方案作为答案。

# java - 在休眠方法中捕获异常

> ID：13310135
> 
> 赞同：0
> 
> 时间：2012-11-09T14:42:13.510
> 
> 标签：java, hibernate, exception, spring-mvc

我有一个名为`LoadDaoHbm.java`我的方法的类

```
@Override
@Transactional(propagation = Propagation.MANDATORY)
public int getPackageCount(Load load) {
    Session s = getSessionFactory().getCurrentSession();
    Query q = s.createQuery("select count(distinct p.trackingNumber) from BasePiece p where p.load = :load");
    q.setEntity("load", load);
    Long count = (Long) q.uniqueResult();
    return count.intValue();
} 
```

在我的控制器中，我正在调用此方法来获取计数

```
int pkgCount = loadDao.getPackageCount(load); 
```

当我在控制器中到达这一点时，它会转到方法并获取数据。但是，有时它可能不会得到独特的结果。当有更多结果时，它给了我一个例外。如何捕获此异常并显示为错误？

建议表示赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:44:43.323

一种方法是在您的控制器中执行

```
int pkgCount = -1
try {
    pkgCount = loadDao.getPackageCount(load);
} catch (SpecificUniqueException) {
    // route to your error page for this error
} 
```

小心只捕获因违反唯一约束而引发的异常。否则你可能会吞下其他错误。

如果这不是您的应用程序中的错误条件，您可能需要考虑编写另一个 DAO 方法来确定唯一条件是否有效，并且不使用异常。例外适用于**特殊**情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:47:20.460

```
try {

 int pkgCount = loadDao.getPackageCount(load);
}
catch (Name_of_the_exception ex) {
// put code that handles the exception here
....
} 
```

在错误日志中查找异常的名称并将其放入 catch 块中。

# php - 从 MySQL 链接表 SELECT 查询创建 PHP 多维关联数组

> ID：13310142
> 
> 赞同：5
> 
> 时间：2012-11-09T14:42:24.180
> 
> 标签：php, mysql, performance, multidimensional-array, associative-array

我希望有人可以帮助我解决这个问题。

假设我有 3 个数据库表：

```
Users:
user_id, user_name
100, John
101, Jessica

Cars:
car_id, car_name
30, Corvette
31, BMW

UsersCars:
user_id, car_id, car_colour
100, 30, Red
101, 30, Green
101, 31, Green

(so John got a red corvette and Jessica has a green Corvette and a BMW) 
```

我想要返回一个多维 PHP 数组的代码，例如：

```
Array
(
    [100] => Array
    (
        [user_id] => 100
        [user_name] => John
        [cars] => Array
        (
            [car_id]=>30,
            [car_name]=>'Corvette',
            [car_colour]=>'Red'

        )            
    )
    [101] => Array
    (
        [user_id] => 101
        [user_name] => Jessica
        [cars] => Array
        (
            [0] => Array
            (
                [car_id]=>30,
                [car_name]=>'Corvette',
                [car_colour]=>'Green'
            ),
            [1] => Array
            (
                [car_id]=>31,
                [car_name]=>'BMW',
                [car_colour]=>'Green'
            )
        )            
    )
) 
```

我有以下 SQL

```
SELECT u.*, c.* FROM Users u
LEFT JOIN UsersCars uc ON u.user_id = uc.user_id
LEFT JOIN Cars c ON uc.car_id = c.car_id 
```

和 PHP

```
$result = mysqli_query($db, $q);
while ($row = mysqli_fetch_assoc($result)) {
    $users_with_cars[$row['user_id']] = $row;
} 
```

但这是不正确的。任何人都知道如何解决导致上述数组的问题（考虑到性能）？我不想硬编码“汽车”的例外情况，因为它可能会发生不止一次。我宁愿有一些只查看 $row 和 $users_with_cars 的东西，当看到一些新值时，它会通过将旧值转换为数组来附加它。也许已经有一个原生的 PHP 函数了？或者更好，也许我的 MySQL 或整个方法是错误的？

任何帮助或提示表示赞赏。

问候

* * *

**更新已解决**

这是一个更新，也许我可以帮助其他人我最终如何解决它。

我最终总是为一辆或多辆汽车使用一个数组，并且我调整了表格以始终将“id”作为列名。这样您就可以轻松扩展它。见例子；

```
Users:
id, name
100, John
101, Jessica

Cars:
id, name
30, Corvette
31, BMW

UsersCars:
user_id, car_id, car_colour
100, 30, Red
101, 30, Green
101, 31, Green

$q = 'SELECT u.*, c.id as car_id, c.name as car_name, uc.colour as car_colour FROM Users u
LEFT JOIN UsersCars uc ON u.id = uc.user_id
LEFT JOIN Cars c ON uc.car_id = c.id';

$result = mysqli_query($db, $q);
while ($row = mysqli_fetch_assoc($result)) {
    $users_with_cars[] = $row;
}
$joins = array('cars' => array('car_id'=>'id','car_name'=>'name','car_colour'=>'colour'));
$users_with_cars = create_join_array($users_with_cars, $joins);

print_r($users_with_cars);

function create_join_array($rows, $joins){
    /* build associative multidimensional array with joined tables from query rows */

    foreach((array)$rows as $row){
        if (!isset($out[$row['id']])) {
            $out[$row['id']] = $row;
        }

        foreach($joins as $name => $item){
            unset($newitem);
            foreach($item as $field => $newfield){
                unset($out[$row['id']][$field]);
                if (!empty($row[$field]))
                    $newitem[$newfield] = $row[$field];
            }
            if (!empty($newitem))
                $out[$row['id']][$name][$newitem[key($newitem)]] = $newitem;
        }
    }

    return $out;
} 
```

这一切都产生了美丽的数组：

```
Array
(
    [100] => Array
    (
        [id] => 100
        [name] => John
        [cars] => Array
        (
            [30] => Array
            (
                [id]=>30
                [name]=>'Corvette',
                [colour]=>'Red'
            )
        )            
    )
    [101] => Array
    (
        [id] => 101
        [name] => Jessica
        [cars] => Array
        (
            [30] => Array
            (
                [id]=>30,
                [name]=>'Corvette',
                [colour]=>'Green'
            ),
            [31] => Array
            (
                [id]=>31,
                [name]=>'BMW',
                [colour]=>'Green'
            )
        )            
    )
) 
```

假设用户也可以拥有多辆自行车。然后，您有多个连接数组，您可以轻松地使用左连接绑定并将其添加到连接数组。

```
$q = 'SELECT u.*, c.id as car_id, c.name as car_name, uc.colour as car_colour, b.id as bike_id, b.name as bike_name FROM Users u
LEFT JOIN UsersCars uc ON u.user_id = uc.user_id
LEFT JOIN Cars c ON uc.car_id = c.id
LEFT JOIN UsersBikes ub ON u.user_id = ub.user_id
LEFT JOIN Bikes b ON ub.bike_id = b.id';

$result = mysqli_query($db, $q);
while ($row = mysqli_fetch_assoc($result)) {
    $users_with_cars_bikes[] = $row;
}

$joins = array('cars' => array('car_id'=>'id', 'car_name'=>'name', 'car_colour'=>'colour'), 
               'bikes' => array('bike_id'=>'id', 'bike_name'=>'name'));
$users_with_cars_bikes = create_join_array($users_with_cars_bikes, $joins);

print_r($users_with_cars_bikes); 
```

会导致类似

```
Array(
    [100] => Array
    (
        [id] => 100
        [name] => John
        [cars] => Array
        (
            [30] => Array
            (
                [id]=>30
                [name]=>'Corvette',
                [colour]=>'Red'
            )
        )
        [bikes] => Array
        (
            [41] => Array
            (
                [id]=>41
                [name]=>'BMX'
            )
        )           
    )
) 
```

等等..

谢谢大家帮忙:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:29:01.890

这是我能想到的。它将（可能）创建一个数组，就像您想要的输出一样。不确定它是否会起作用，我在这里写了这个没有测试。让我知道！:)

```
$result = mysqli_query($db, $q);
while ($row = mysqli_fetch_assoc($result)) 
{
    // Add user ID and name to the array
    $users_with_cars[$row['user_id']]['user_id'] = $row['user_id'];
    $users_with_cars[$row['user_id']]['user_name'] = $row['user_name'];
    // Check if this user has cars in the array. If not, this is the first car (see else)
    if(isset($users_with_cars[$row['user_id']]['cars']))
    {
        // Check if there is exactly 1 car in the array
        if(count($users_with_cars[$row['user_id']]['cars']) == 1)
        {
            // If yes, put that car in a 'sub array'
            $users_with_cars[$row['user_id']]['cars'] = array(0 => $users_with_cars[$row['user_id']]['cars']);
            // Then add the new car
            $users_with_cars[$row['user_id']]['cars'][] = array('car_id' => $row['car_id'], 'car_name' => $row['car_name'], 'car_color' => $row['car_color']);
        }
        else
        {
            // It already has more than one car in the array. Just add it
            $users_with_cars[$row['user_id']]['cars'][] = array('car_id' => $row['car_id'], 'car_name' => $row['car_name'], 'car_color' => $row['car_color']);
        }
    }
    else
    {
        // Add a single car without 'sub array'
        $users_with_cars[$row['user_id']]['cars']['car_id'] = $row['car_id'];
        $users_with_cars[$row['user_id']]['cars']['car_name'] = $row['car_name'];
        $users_with_cars[$row['user_id']]['cars']['car_color'] = $row['car_color'];
    }
} 
```

* * *

**编辑：**

这是我在评论中提到的一个例子：

```
$result = mysqli_query($db, $q);
while ($row = mysqli_fetch_assoc($result)) 
{
    $count = count($users_with_cars[$row['user_id']]['cars']);
    foreach($row AS $key => $value)
    {
        if(substr($key, 0, 4) == "car_")
        {
            // Single:
            $users_with_cars[$row['user_id']]['cars'][$key] = $value;
            // Multiple:
            $users_with_cars[$row['user_id']]['cars'][$count][$key] = $value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:56:26.410

```
$result = mysqli_query($db, $q);
$users_with_cars = array();
while ($row = mysqli_fetch_assoc($result)) {
    if (!isset($users_with_cars[$row['user_id']])) {
        $user = array();
        $user['user_id'] = $row['user_id'];
        $user['user_name'] = $row['user_name'];
        $user['cars'] = array();
        $users_with_cars[$row['user_id']] = $user;
    }
    $car = array();
    $car['car_id'] = $row['car_id'];
    $car['car_name'] = $row['car_name'];
    $car['car_colour'] = $row['car_colour'];
    $users_with_cars[$row['user_id']]['cars'] = $car;
} 
```

# java - Scala 类型的注解别名

> ID：13310144
> 
> 赞同：12
> 
> 时间：2012-11-09T14:42:32.943
> 
> 标签：java, scala, annotations

在我的代码的许多地方，三个注释一起出现：

```
@BeanProperty
@(SpaceProperty @beanGetter)(nullValue="0") 
```

其中`nullValue="0"`是注解的参数`SpaceProperty`。

是否可以为 定义单个类型别名`@BeanProperty @(SpaceProperty @beangetter)`？

我能做的最好的事情是：

```
type ScalaSpaceProperty = SpaceProperty @beanGetter

@BeanProperty
@(ScalaSpaceProperty)(nullValue = "0") 
```

是否可以为两个注释定义类型别名，其中参数应用于最后一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:56:20.687

不。我认为，您*可以*在 Scala 2.10 中编写一个宏来执行此操作（但该文档目前不可用，所以我无法检查）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T19:35:28.197

我知道的类型别名注释的唯一示例是在[Scaladoc](http://www.scala-lang.org/api/current/index.html#scala.annotation.target.package)中。以下是相关部分：

```
object ScalaJPA {
  type Id = javax.persistence.Id @beanGetter
}
import ScalaJPA.Id
class A {
  @Id @BeanProperty val x = 0
} 
```

这相当于`@(javax.persistence.Id @beanGetter) @BeanProperty val x = 0`在 A 类写作。

`type`声明只能处理类型。换句话说，您不能在类型别名中提供实例信息。

一种替代方法是尝试扩展注释。`SpaceProperty`下面我为说明目的创建了一个假设：

```
scala> import scala.annotation._; import scala.annotation.target._; import scala.reflect._;
import scala.annotation._
import scala.annotation.target._
import scala.reflect._

scala> class SpaceProperty(nullValue:String="1",otherValue:Int=1) extends Annotation with StaticAnnotation

scala> class SomeClass(@BeanProperty @(SpaceProperty @beanGetter)(nullValue="0") val x:Int)
defined class SomeClass

scala> class NullValueSpaceProperty extends SpaceProperty(nullValue="0")
defined class NullValueSpaceProperty

scala> class SomeClassAgain(@BeanProperty @(NullValueSpaceProperty @beanGetter) val x:Int)
defined class SomeClassAgain 
```

使用类型别名：

```
scala> type NVSP = NullValueSpaceProperty @beanGetter
defined type alias NVSP

scala> class SomeClassAgain2(@BeanProperty @NVSP val x:Int)defined class SomeClassAgain2 
```

这个解决方案有一个小问题。Scala 中定义的注解无法在运行时保留。因此，如果您需要在运行时使用注解，您可能需要在 Java 中进行扩展。我说*可能*是因为我不确定这个限制是否已经被修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:23:15.457

这行得通吗？

```
type MyAnnotation[+X] = @BeanProperty
                        @(SpaceProperty @beanGetter)(nullValue = 0) X

val myValue: MyAnnotation[MyType] 
```

# perl - 从命令行获取 wget

> ID：13310155
> 
> 赞同：1
> 
> 时间：2012-11-09T14:42:58.980
> 
> 标签：perl, wget

我可以在 Linux 命令行上使用 wget 命令从另一台服务器下载文件，例如：

```
wget ftp_site_name/file_name 
```

但是当我在 perl 脚本中运行 wget 时，我无法下载相同的文件

```
system "/usr/bin/wget ftp_site_name/file_name"; 
```

或者

```
system "wget ftp_site_name"; 
```

以下是错误消息的片段：

```
Resolving ftp site  ...xx.xx.x.xx

Connecting to ftp site|xx.xx.x.xx|:xx... connected.

Logging in as anonymous ... Logged in!

==> SYST ... done.    ==> PWD ... done.

==> TYPE I ... done.  ==> CWD (1) /pub/??/??/ ...

No such directory `pub/??/??/'. 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:55:47.203

如果没有实际的错误消息，很难判断出了什么问题，但我有一些猜测：

如果路径包含通配符或空格，请使用撇号或转义。

```
my $ftpname="/pub/some path with spaces/works_with_wildchar?/";
my $out = `wget '$ftpname'`;
print "out:\n$out\n";

or
my $ftpname="/pub/some path with spaces/works_with_wildchar?/";
my $out = qx!wget $ftpname!;
print "out:\n$out\n"; 
```

# javascript - Style.Display = "None" 在 Google Apps 脚本 HTML 服务中不起作用

> ID：13310162
> 
> 赞同：1
> 
> 时间：2012-11-09T14:43:37.143
> 
> 标签：javascript, dom, google-apps-script

我在我的 HTML 服务模板中运行了一个相当简单的 javascript 函数，它应该将 div 的显示设置为“无”。但是，每当我包含以下行时：

```
document.getElementById("timesheet").style.display = "none"; 
```

我的浏览器出现错误：“无法调用未定义的方法‘f___’。” 当我把它拿出来时，没有错误。

如果我遗漏了什么，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-10T18:41:34.040

只需使用 jQuery。

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script>
$(document).ready(function(){
$("#whateverYouAreClickingIDHere").click(function () {
      $("#timesheet").css('display','none');
    });
});
</script> 
```

# c# - 修改 REG_MULTI_SZ 的二进制数据

> ID：13310163
> 
> 赞同：0
> 
> 时间：2012-11-09T14:43:56.923
> 
> 标签：c#, visual-studio-2010, registry

我知道如何使用 C# ( [http://msdn.microsoft.com/en-us/library/8zha3xws.aspx](http://msdn.microsoft.com/en-us/library/8zha3xws.aspx) ) 远程修改注册表，但我无法终生找到如何修改注册表项的二进制文件在Win7上。

我不是说 REG_BINARY，但是当您在 regedit 中时，右键单击 REG_MULTI_SZ 键并单击“修改二进制数据...”试图实现此[http://www.pcreview.co.uk/forums/pendingfilerenameoperations-delete -file-t1715654.html](http://www.pcreview.co.uk/forums/pendingfilerenameoperations-delete-file-t1715654.html)

我想要做的就是在末尾添加四个 0。在此先感谢您的帮助！

# c++ - 使用指针冒泡排序

> ID：13310164
> 
> 赞同：1
> 
> 时间：2012-11-09T14:44:04.257
> 
> 标签：c++, sorting, pointers

不确定我是否做对了，或者即使我被允许使用指针进行排序。我制作了一个指向其他元素的结构。然后制作了这个结构的向量，并尝试对其进行一些交换。

起初我在交换操作中使用了取消引用运算符，但是当我这样做时，我的排序变得很奇怪，我在最终结果中得到了一堆重复的#（它们都应该是唯一的），从而解决了取消引用问题这个，但它没有排序（除非可能通过内存地址）。

所以这是我的代码，关注的领域是 sortSuperStruct 函数

```
#include <algorithm> //used for swap, would like to use for sort, but oh well
#include <cstdlib>
#include <fstream>
#include <iomanip>
#include <iostream>
//#include <math.h>
#include <string>
#include <sstream>
#include <vector>
//------------------------------------------------------------------------------
//namespaces?
//------------------------------------------------------------------------------
using namespace std;
//------------------------------------------------------------------------------
//prototypes
//------------------------------------------------------------------------------

struct superStruct
{
    //probably not needed
    float *percent;

    //copy of Dwarf's role pPercent;
    float *pPercent;
    int *roleName;
    int *name;

};

//parallel array to follow along with Dwarf role
struct roles
{
    int name;
    float priority;
    int numberToAssign;

    void setRolePriorities ()
    {
        priority = (float)rand()/(float)RAND_MAX;
    }

    void setNumberToAssign(int n)
    {
        numberToAssign = rand() % n + 1;

    }
};

//a fit for a role, a Dwarf has this
struct role
{
    float percent;
    //copy of roles name
    int *roleName;
    //copy of roles priority
    float *rolePriority;
    float pPercent;

    void set_pPercent()
    {
        pPercent = percent * (*rolePriority);

    };

};

struct Dwarf
{
    vector <role> roleValues;

    int *maxLabor;

    int name;

    void setRoleValues(int n, vector <roles> *roleS)
    {
        srand ( time(NULL) );
        //rolesValues

        roleValues.resize(n);

        //set role %'s
        for (int x = 0; x < n; x++)
        {
            roleValues[x].percent = (float)rand()/(float)RAND_MAX;
            //cout << roleValues[x].percent << endl;
            //I said I'm pointing to the address value of roleS...
            roleValues[x].roleName = &roleS->at(x).name;
            roleValues[x].rolePriority = &roleS->at(x).priority;
            roleValues[x].set_pPercent();
        }
    };
};

void initializeSuperStruct(vector <superStruct> *s, vector <Dwarf> *d, int n)
{
    //for each Dwarf
    int counter = 0;
    for (int x = 0; x < d->size(); x++)
    {
        //for each role
        for (int y = 0; y < n; y++)
        {
            s->at(counter).pPercent = &d->at(x).roleValues[y].pPercent;
            s->at(counter).name = &d->at(x).name;
            //both are pointers.
            s->at(counter).roleName = d->at(x).roleValues[y].roleName;
            //cout << d->at(x).roleValues[y].percent << endl;
            s->at(counter).percent = &d->at(x).roleValues[y].percent;

            counter++;
        }

    };

};

void printSuperStruct(vector <superStruct> *s)
{
    for (int x = 0; x < s->size(); x++)
    {
        cout << "Count: " << x << endl;
        cout << "Name: " << *s->at(x).name << endl;
        cout << "Percent: " << *s->at(x).percent << endl;
        cout << "pPercent: " << *s->at(x).pPercent << endl;
        cout << "Role Name: " << *s->at(x).roleName << endl;
    }
};

void sortSuperStruct(vector <superStruct> *s)
{
    //runs through list
    for (int i = 0; i < s->size(); i++)
    {
        //checks against lower element
        //cout << *s->at(i).pPercent << endl;
        for (int j = 1; j < (s->size()-i); j++)
        {
            //using pointer dereferences messed this up, but, not using them doesn't sort right
            if (*s->at(j-1).pPercent < *s->at(j).pPercent)
            {
                //cout << *s->at(j-1).pPercent << "vs. " << *s->at(j).pPercent << endl;

                //I don't think swap is working here
                //superStruct temp;
                //temp = s->at(j-1);
                //s->at(j-1) = s->at(j);
                //s->at(j) = temp;
                swap(s->at(j-1), s->at(j));
                //cout << *s->at(j-1).pPercent << "vs. " << *s->at(j).pPercent << endl;
            }
        }
    }

}

int main()
{
    srand (time(NULL));

    int numberOfDwarves;
    int numberOfRoles;
    int maxLabors;

    vector <superStruct> allRoles;
    vector <Dwarf> myDwarves;
    vector <roles> myRoles;

    cout << "number of Dwarf's: " << endl;
    cin >> numberOfDwarves;

    cout << "max labor per dwarf" << endl;
    cin >> maxLabors;

    cout << "number of Roles: " << endl;
    cin >> numberOfRoles;

    //this will probably have to be a vector
    //Dwarf myDwarfs[numberOfDwarves];

    myDwarves.resize(numberOfDwarves);
    allRoles.resize(numberOfDwarves*numberOfRoles);
    myRoles.resize(numberOfRoles);

    //init roles first
    for (int x = 0; x < numberOfRoles; x++)
    {
        myRoles[x].name = x;
        myRoles[x].setRolePriorities();
        myRoles[x].setNumberToAssign(numberOfDwarves);
    }

    for (int x = 0; x < numberOfDwarves; x++)
    {
        myDwarves[x].setRoleValues(numberOfRoles, &myRoles);
        myDwarves[x].name = x;

        //messy having this here.
        myDwarves[x].maxLabor = &maxLabors;

    }

    initializeSuperStruct(&allRoles, &myDwarves, numberOfRoles);
    cout << "Before sort, weighted matrix" << endl;
    system("pause");
    printSuperStruct(&allRoles);
    sortSuperStruct(&allRoles);
    system("pause");
    cout << "After sort, weighted matrix" << endl;
    printSuperStruct(&allRoles);
} 
```

输出：

```
 Role Name: 5
    Count: 96
    Name: 6
    Percent: 0.175787
    pPercent: 0.0178163
    Role Name: 5
    Count: 97
    Name: 7
    Percent: 0.175787
    pPercent: 0.0178163
    Role Name: 5
    Count: 98
    Name: 8
    Percent: 0.175787
    pPercent: 0.0178163
    Role Name: 5
    Count: 99
    Name: 9
    Percent: 0.175787
    pPercent: 0.0178163
    Role Name: 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:29:40.547

```
srand (time(NULL)); 
```

调用**一次**，在开始时`main`。在各种方法中使用它意味着你会得到很多重复的值。

```
if (s->at(j-1).pPercent < s->at(j).pPercent) 
```

这确实比较了指针值，因为指针不一定指向同一个数组，具有未定义的行为（可能会比较虚拟地址）。如果要按值排序，则需要取消引用

```
if (*s->at(j-1).pPercent < *s->at(j).pPercent) 
```

而在

```
 for (int j = 1; j < (s->size()-1); j++)
    {
        //using pointer dereferences messed this up, but, not using them doesn't sort right
        if (s->at(j-1).pPercent < s->at(j).pPercent) 
```

你从不考虑最后一个元素，那应该是

```
for(unsigned int j = 1; j < s->size() - i; ++j) 
```

进行适当的冒泡排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:21:45.607

你的冒泡排序对我来说似乎不正确。

它应该类似于：

```
void sortSuperStruct(vector <superStruct>& s)
  for(int i = 0; i < s.size()-1; i++){
    for(int j = i; j < s.size(); j++){
      if(*(s[i].pPercent) < *(s[j].pPercent)){
        swap(s.at(i),s.at(j));
      }
    }
  }
} 
```

主要区别：

*   i 从 0 到 size-1，而不是从 0 到 size
*   j 从 i 到 size，而不是 1 到 size-1
*   if 语句测试 i 和 j，而不是 j 和 j-1
*   交换也交换 i 和 j，而不是 j 和 j-1

细微差别：

*   向量通过引用而不是指针传递。这可能并不重要，但至少对我来说它看起来更干净。

请注意，这将从最大到最小排序。如果你希望它从最小到最大，你的 if 语句应该有一个 > 符号。

# websphere - jython 将数据正确排列到列中

> ID：13310165
> 
> 赞同：0
> 
> 时间：2012-11-09T14:44:22.690
> 
> 标签：websphere, jython

我有数据，但格式不正确。如何使用 Jython 将其正确排列到适当的列中？

前任：

`活动线程/池大小/最大池 WEB：ORB：Activetran CPU

ABC 1:20:100 0:1:50 0 1

EFG 1:19:100 0:2:50 0 1

味精 0:0:50 0:0:50 0 0

阿巴萨 1:2:50 0:10:50 0 0

BBASADDADADDAB 0:0:50 0:0:50 0 0

BVA 1:20:100 0:1:50 0 1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:23:51.447

```
n1 = 1
n2 = 2
s = 'a'

print '%4d : %4d : %4s' % (n1, n2, s) 
```

有关更多详细信息，请参阅：[http ://docs.python.org/2/library/stdtypes.html#string-formatting](http://docs.python.org/2/library/stdtypes.html#string-formatting)

# java - 如何使用 beans:profile 将 spring xml 从 3.0 转换为 3.1

> ID：13310175
> 
> 赞同：3
> 
> 时间：2012-11-09T14:45:19.083
> 
> 标签：java, spring, spring-mvc, spring-3

我在 3.0 中有一个 xml，如下所示：

```
 <bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
            <property name="driverClassName" value="${jdbc.driverClassName}" />
            <property name="url" value="${jdbc.internal.url}" />
            <property name="username" value="${jdbc.internal.username}" />        
            <property name="password" value="${jdbc.internal.password}"/>
        </bean> 
```

我想在使用的同时将其转换为 3.1`beans:profile`但是，当我尝试将其更改为：

```
 <beans profile="dev">
          <bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
              <property name="driverClassName" value="${jdbc.driverClassName}" />
              <property name="url" value="${jdbc.internal.url}" />
              <property name="username" value="${jdbc.internal.username}" />        
              <property name="password" value="${jdbc.internal.password}"/>
        </bean>
        </beans> 
```

我收到如下错误：

```
Invalid content was found starting with element 'bean'. One of '{"http://www.springframework.org/schema/beans":beans}' 
```

**问题**

我怎样才能利用`beans:profile`这个特定的bean定义只在活动配置文件被调用时被调用`dev`

**更新** 我的 bean 定义是：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
       http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd"> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T15:39:33.750

您必须将所有嵌套`<beans>`声明放在配置文件的最后。这就是 XML 模式的定义方式，您必须遵守这一点。

# 也可以看看

*   [Spring Framework 3.1 M1 发布](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)：

    > `spring-beans-3.1.xsd`已更新为允许这种嵌套，但仅限于允许此类元素仅作为文件中的最后一个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:40:27.497

这是设计使然。

来自[SpringSource 博客](http://blog.springsource.org/2011/02/11/spring-framework-3-1-m1-released/)：

> spring-beans-3.1.xsd 已更新为允许这种嵌套，*但仅限于允许此类元素仅作为文件中的最后一个元素。这应该有助于提供灵活性，而不会在 XML 文件中产生混乱。虽然此增强功能是为 bean 定义配置文件服务而开发的，但嵌套元素通常很有用。*假设您在给定文件中有一个应标记为lazy-init="true" 的bean 子集。您可以声明一个嵌套元素，而不是标记每个 bean，并且其中的所有 bean 都将继承该默认值。文件中其他地方定义的 Bean 将保持正常默认的lazy-init="false"。这适用于元素的所有 default-* 属性，例如 default-lazy-init、default-init-method、default-destroy-method 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:34:36.100

我遇到了同样的问题：即使是正确的，我也从来没有成功嵌套`<beans>`过另一个。`<beans>``spring-beans.xsd`

我的（部分）解决方案是创建另一个`applicationContext.xml`从

```
<beans profile="dev, qualif" 
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

</beans> 
```

# primefaces - primefaces layoutUnit f:facet header

> ID：13310176
> 
> 赞同：1
> 
> 时间：2012-11-09T14:45:21.167
> 
> 标签：primefaces

如何使用 f:facet 设置 layoutUnit 标头。以下代码不起作用！谢谢

```
<p:layoutUnit position="west" resizable="true" closable="true" collapsible="true"> 
            <f:facet name="header">my header</f:facet>

 </p:layoutUnit> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-12T15:16:03.343

利用

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:pe="http://primefaces.org/ui/extensions">
<pe:layout>
   <pe:layoutPane id="navigator-pane" >
    <f:facet name="header">
    </f:facet>
   </pe:layoutPane>
</pe:layout> 
```

来自 primefaces 扩展库

```
<dependency>
    <groupId>org.primefaces.extensions</groupId>
    <artifactId>primefaces-extensions</artifactId>
    <version>1.2.1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:24:38.627

在 primefaces 中，layoutUnit 的标题由属性标题定义，如下所示：

```
<p:layoutUnit position="west" header="HEADER" resizable="true" closable="true" collapsible="true">
</p:layoutUnit> 
```

因此，如果您使用的是 primeface-extensions 那么是可以更改您提交的标题。

# sql-server-2008 - SQL 异步多个查询合并结果——最大结果（顶部 XYZ）

> ID：13310177
> 
> 赞同：0
> 
> 时间：2012-11-09T14:45:23.593
> 
> 标签：sql-server-2008, tsql

我设置了搜索功能，可以同时运行多个查询。每个查询的前 1000 个结果将写入一个表。（这些运行异步——我只是省略了我用来执行此操作的代码）

```
Insert into Results
Select Top 1000 Text from A where Contains(Text,'"searchString"')

Insert into Results
Select Top 1000 Text from B where Contains(Text,'"searchString"')

Insert into Results
Select Top 1000 Text from C where Contains(Text,'"searchString"') 
```

然后，我从该表中选择前 1000 个结果。

```
Select Top 1000 * from Results 
```

是否有一种好方法可以在流程的早期任何时候有效地检查是否已经有 1000 个结果，如果有，则取消其他查询并尽快选择 1000 个结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:51:45.530

以下可能会为您提供一个计划，以实现您在找到第 1,000 行后不处理任何行的预期结果。

```
WITH CTE
     AS (SELECT Text
         FROM   A
         WHERE  CONTAINS(Text, '"searchString"')
         UNION ALL
         SELECT Text
         FROM   B
         WHERE  CONTAINS(Text, '"searchString"')
         UNION ALL
         SELECT Text
         FROM   C
         WHERE  CONTAINS(Text, '"searchString"'))
INSERT INTO Results
SELECT TOP 1000 Text
FROM   CTE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T09:33:00.367

如果您使用标识列设置结果表，则可以使用此查询实现目标（让“计数器”成为该列。不要忘记在其上放置索引）

```
declare @remaining int
select @remaining = 1000 - (max(counter) - min(counter) + 1) from result
if @result>0
  insert into Result (Text) select top (@remaining) Text from MyTable 
```

此外，如果您有一个表名列表，则可以使用 while 循环并在 @result 为 0 时退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:52:11.703

以下 SQL 将任何后续查询的行数限制为 4

设置行数 4

SET @Rows = @@ROWCOUNT

从前面的选择中获取行数

所以像

选择顶部等...

SET @Rows = @@ROWCOUNT

设置 ROWCOUNT 1000 - @Rows

如果@row 低于零，可能会出错

但是你用 IF 和 goto PROC_LABLE 来陷阱

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:56:03.300

```
insert into #tt2 
SELECT TOP 1000 [sID]
FROM [docSVsys]
where (select count(*) from #tt2) < 1000 
```

但我仍然会使用 .NET 和 TPL。

这仍将处理所有表，但一旦达到 1000，它应该处理 0 行

# android - SQLiteDiskIOException：在 Android 中复制数据库时出现磁盘 I/O 错误

> ID：13310181
> 
> 赞同：0
> 
> 时间：2012-11-09T14:45:42.293
> 
> 标签：android, database, sqlite, copy

复制数据库的代码：

```
 public static final String DB_PATH = Environment.getDataDirectory() + "/data/MyPackageName/databases/";
        public static final String DB_NAME = "MyDB.sqlite";
        private void copyDataBase(String dbPath){
            try{

                InputStream inputStream = context.getAssets().open(dbName);

                OutputStream appDB = new FileOutputStream(dbPath,false);

                byte[] buffer = new byte[1024];
                int length;
                while ((length = inputStream.read(buffer)) > 0) {
                    appDB.write(buffer, 0, length);
                }

                appDB.flush();
                appDB.close();
                inputStream.close();
            }catch(IOException e){
                e.printStackTrace();
            }

        } 
```

此代码在每个手机和每个 android 版本中都可以正常工作，但我在上面的代码或此行中的某些手机（例如 Galaxy S Plus）中得到了 SQLiteDiskIOException：

```
 SQLiteDatabase db = super.getWritableDatabase(); 
```

每个人都可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:07:12.820

[谢谢我的朋友，使用https://github.com/jgilfelt/android-sqlite-asset-helper](https://github.com/jgilfelt/android-sqlite-asset-helper)中介绍的 SQLiteAssetHelper 解决了我的问题

# qt - 编辑单元格/项目时如何发出信号？

> ID：13310183
> 
> 赞同：0
> 
> 时间：2012-11-09T14:45:44.903
> 
> 标签：qt, qtableview, qtablewidget

我有一种将表格从数据库导入 QTableWidget 的方法，我想通过 QTableWidget 编辑数据库中的单元格（通过双击编辑单元格时）。我曾尝试使用 QTableWidget::cellChanged() 信号，但问题是从数据库导入时表中的每个单元格都会发出该信号。只有在编辑文本后“手动”更改单元格时，我才能发出信号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T09:09:38.567

就像@Kamil 所说，在加载时断开信号，然后重新连接： 在 Python 中看起来像：

```
self.disconnect(self.tableWidget, QtCore.SIGNAL("cellChanged(int, int)"), self.DoSomething)
....import data....
self.connect(self.tableWidget, QtCore.SIGNAL("cellChanged(int, int)"), self.DoSomething) 
```

不确定，但我想这就是 C++ 的样子：

```
this->disconnect(this->tableWidget,QtCore::SIGNAL(cellChanged(int, int)),this->DoSomething) 
```

我希望这也有帮助[链接](http://www.developer.nokia.com/Community/Wiki/Understanding_Signals_and_Slot_in_Qt "关联")

# c# - For 循环表达式语法错误

> ID：13310185
> 
> 赞同：-1
> 
> 时间：2012-11-09T14:45:54.820
> 
> 标签：c#, syntax, for-loop

以下 for 循环语法有什么问题，`crv`变量是一个数组，我想要增量 2：

```
for(int i<0; i<crv.Count;i+2)
{
  //Code Here
} 
```

我的编译器只说`Semicolon expected`这不是一个非常有用的反馈......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:46:43.287

您需要开始初始化`i`为零，而不是将其与零进行比较。此外，您的最后一条语句实际上并没有改变`i`，它只是返回一个值，`i+2`并且对该值不做任何事情，您需要实际设置`i`为该结果。

```
for(int i = 0; i < crv.Count;i+=2)
{
    //Code Here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:47:10.107

最大的错误是`i+2`没有重新分配给`i`.

```
for(int i = 0; i<crv.Count;i = i+2)
{
  //Code Here
} 
```

您正在丢弃增量并且`i`永远不会更改值。

然后，您不是在初始化`i`，而是在检查它是否小于`0`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T14:47:50.323

请注意：第一**部分是分配**你不能使用比较 as `int i<0;`，而是应该是`int i=0`or`int i = -10`或任何类似的东西。

同样在增量部分，将更新后的值分配回`i`

```
 for(int i =0; i<crv.Count; i+=2)
    {
      //Code Here
    } 
```

或在正文中执行相同的操作（仅提及选项，这在某些特定情况下很有用）

```
 for(int i =0; i<crv.Count;)
    {
      //Code Here
      i+=2;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T15:08:12.313

虽然这些答案中的大多数确实告诉您如何修复您的代码，但它们并没有告诉您为什么它不起作用，我认为这对您理解很重要。

一个`for`循环由三部分组成，用分号分隔。

`for(part1;part2;part3)`

`part1`**仅**执行一次 - 当循环第一次开始执行时。（这通常是您为计数器分配初始值的地方）

`part2`然后接下来执行，检查它的值是真还是假。

如果为真，则执行循环体

然后`part3`被执行，（正如你试图做的那样）这通常是你递增的地方

然后`part2`再次检查，如果为真，则再次执行该过程，如果为假，则存在循环

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T14:48:34.007

for 循环的第一部分决定 i 的初始值。在您的示例中，您有“<”，这不是一个可靠的值。尝试 i=0 代替。此外，最后一部分读取为 i，除了 2，而不是每次迭代添加两个。尝试 i+=2 代替。

# android - SurfaceView 崩溃

> ID：13310188
> 
> 赞同：2
> 
> 时间：2012-11-09T14:46:13.390
> 
> 标签：android, surfaceview

在我的应用程序中，我随机遇到以下崩溃：

```
java.lang.NullPointerException
android.view.SurfaceView.updateWindow(SurfaceView.java:498)
android.view.SurfaceView.updateWindow(SurfaceView.java:412)
android.view.SurfaceView.access$000(SurfaceView.java:89)
android.view.SurfaceView$1.handleMessage(SurfaceView.java:131)
android.os.Handler.dispatchMessage(Handler.java:99)
android.os.Looper.loop(Looper.java:130)
android.app.ActivityThread.main(ActivityThread.java:3691)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:507)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
dalvik.system.NativeStart.main(Native Method) 
```

(安卓 2.3.6)

有没有人知道如何调试它？

请注意，我需要在我的表面上做一些奇怪的事情，以使其在脱离层次结构时保持活力，例如：

```
 private boolean detachFromParent = false;

    @Override
    protected void onDetachedFromWindow() {
        if(detachFromParent) {
            super.onDetachedFromWindow();
        }
    }

    public void destroy() {
        if(getParent() != null) {
            detachFromParent = true;
            ((ViewGroup) getParent()).removeView(this);
            detachFromParent = false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:13:14.610

看一下SurfaceView[的 android 源代码（对于 2.3.6）上的第 498 行](https://android.googlesource.com/platform/frameworks/base/+/android-2.3.6_r0.9/core/java/android/view/SurfaceView.java)产量：

```
visible ? VISIBLE : GONE, false, mWinFrame, mContentInsets, 
```

其中之一是 null，我猜你正在做的那些奇怪的事情是让这段代码在 mWinFrame 值为 null 的情况下运行。

您能否提供更多详细信息，说明为什么您不让视图正常分离？我知道你一定是有原因的。否则，我会盲目地建议将其取出并以其他方式提供您预期的操作（以不同的方式编码）。

如果您有 Nexus S，您可以尝试自己调试问题并找出问题的确切根本原因并修复它（堆栈跟踪是您的朋友）。 [以下是有关将 Nexus S 降级到 2.3.6 的说明的链接](http://kishanrathod.blogspot.com/2011/12/downgrade-nexus-s-from-403-to-236.html)

# php - 如果图像 url 是指特定图像 EXT，PHP 控制

> ID：13310193
> 
> 赞同：1
> 
> 时间：2012-11-09T14:46:25.460
> 
> 标签：php, image, validation, url, mime-types

我写了这个函数：

```
function isImage($url)
  {

     $params = array('http' => array(
                  'method' => 'HEAD'
               ));
     $ctx = stream_context_create($params);
     $fp = @fopen($url, 'rb', false, $ctx);
     if (!$fp) 
        return false;  // Problem with url

    $meta = stream_get_meta_data($fp);
    if ($meta === false)
    {
        fclose($fp);
        return false;  // Problem reading data from url
    }

    $wrapper_data = $meta["wrapper_data"];
    if(is_array($wrapper_data)){
      foreach(array_keys($wrapper_data) as $hh){
          if(substr($wrapper_data[$hh], 0, 19) == "Content-Type: image") // strlen("Content-Type: image") == 19 
          {
            fclose($fp);
            return true;
          }
      }
    }

    fclose($fp);
    return false;
  } 
```

它确实检查 url 是否返回图像类型，现在我想扩展此方法来控制返回的图像的扩展名是否在数组中（'png'、'jpeg'、'jpg'）。

我需要这个控制，因为用户在我的应用程序上提交图像 url。

任何建议都会被采纳！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:55:01.593

检查“Content-Type”标头是否为以下之一：

1.  内容类型：图片/png
2.  内容类型：图像/JPEG
3.  内容类型：图片/jpg

或者

检查`$url`参数是否以“.png”、“.jpg”或“.jpeg”结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:58:49.093

如果我说得对，此代码段可以为您提供帮助：

```
$info  = getimagesize("http://www.gravatar.com/avatar/701467343cbd095506ca24b1ee5406d8?s=128&d=identicon&r=PG");
echo $info['mime']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:32:06.710

此代码段将返回图像类型以及检查它是否是图像：

```
 function get_type ($url) {

    $mimes = array (    'bmp'   =>  array('image/bmp', 'image/x-windows-bmp'),
                    'gif'   =>  'image/gif',
                    'jpeg'  =>  array('image/jpeg', 'image/pjpeg'),
                    'jpg'   =>  array('image/jpeg', 'image/pjpeg'),
                    'jpe'   =>  array('image/jpeg', 'image/pjpeg'),
                    'png'   =>  array('image/png',  'image/x-png')
            ) ;

    $info  = getimagesize($url);

    //$info['mime'] = 'image/gif';

    if ($info['mime']) {
        if ($type = array_search ($info ['mime'],$mimes)) 
            return $type;
        else {
            foreach ($mimes as $key=>$value) {
                if (is_array ($value) ) {
                    if ( !( FALSE === array_search ($info['mime'] , $value ) ))
                        return $key;
                }
            }
        }//end of else
    }
    else return "Not an image";

} 
```

如果你用 this 调用这个函数：

```
echo get_type("http://www.gravatar.com/avatar/701467343cbd095506ca24b1ee5406d8?s=128&d=identicon&r=PG"); 
```

它会返回`png`。

如果你用这个 url 打电话：

```
echo get_type("http://www.google.com"); 
```

它会返回`Not an image`。

希望有帮助。快乐编码:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T15:03:52.957

我个人更`preg_match`喜欢这样的：

```
 $allowed_file_types = "(jpg|jpeg|gif|bmp|png)";
    if(preg_match("/\." . $allowed_file_types . "$/i", 'image.jpg'))
    {
         // The file extention is allowed
    }
    else
    {
        // Not allowed!
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T15:09:29.773

要从某个 url 获取有关文件的信息，您可以使用以下代码：

```
<?php
//the request
$ch = curl_init('http://www.google.com');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_exec($ch);

// get the content type
echo curl_getinfo($ch, CURLINFO_CONTENT_TYPE);
?> 
```

将输出：文本/html；字符集=ISO-8859-1

# random - 随机函数有奇怪的行为，而常量值在 Python 2.7 中工作

> ID：13310198
> 
> 赞同：0
> 
> 时间：2012-11-09T14:46:44.977
> 
> 标签：random, python-2.7, n-queens

我有一个使用这种重要方法的单线程 Python 模块（用于解决 n-Queen 问题）：

```
def step(self):
    r = Random()        
    poz = r.choice(self.available)   #!!!problem here
    #poz = 9 #this will work
    for p in self.available:
        if self.collision(poz, p):   # this method fails with the usage of random
            self.available.remove(p)
    self.state.queens.append(poz)
    self.debug()
    return True 
```

如果我给它一个像 9 或其他任何值的常量值，该方法将正常工作，但如果我想使用随机函数选择从可用（数字列表）中选择一个值，则**碰撞（）**方法无法正常工作通过错过一些。

如果有帮助，这里是碰撞方法：

```
def collision(self, a, b):
    x1, y1 = a / self.n, a % self.n
    x2, y2 = b / self.n, b % self.n  
    return x1 == x2 or y1 == y2 or abs(x1 - x2) == abs(y1 - y2) 
```

基本上，它检查棋子“b”是否可以被皇后“a”攻击

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:56:46.767

在这里找到答案

[迭代时从列表中删除项目](https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python)

将迭代替换为

```
self.available = [x for x in self.available if not self.collision(poz, x)] 
```

# sql - 用于在满足条件的 DateTime 列中查找第一个期间的 sql

> ID：13310199
> 
> 赞同：-1
> 
> 时间：2012-11-09T14:46:47.497
> 
> 标签：sql, linq

我在 DB 中有一个表，其中有两个列 - 'start' 和 'end'，它们是 DateTime 格式。我需要的是一个快速查询，它将首先返回我（从现在开始计算）该行，其中“end”比“start”小至少 1 小时（start[1] - end[0] > 1h）下面的行（因为我按“开始”订购）。我为此苦苦挣扎了很长时间，但我想出的只是空的返回列表，而且速度很慢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:49:44.370

如果您使用的是 MYSQL，请使用**DATEDIFF 。**

```
SELECT * FROM TABLE_NAME WHERE DATEDIFF(START_COL,END_COL)>1; 
```

参考：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# android - 如何避免 ANR 对话框应用程序无响应

> ID：13310201
> 
> 赞同：3
> 
> 时间：2012-11-09T14:46:47.617
> 
> 标签：android, android-asynctask, fragment

我正在开发一个使用在线服务的 Android 应用程序，我需要加载我的片段。基本上，我有一个菜单，每个按钮都替换了下面的 Fragment。当我单击一个按钮时，片段开始被替换，如果同时按下键盘上的另一个按钮，我会看到**应用程序无响应**对话框，然后单击等待，我的片段成功加载。

有没有办法防止这种情况发生？由于网络服务的原因，我的应用程序总是需要几秒钟才能加载。我在谷歌上阅读，我可以使用`AsyncTask`，并完成加载该`doOnBackground`方法..我不知道这是否有效，但我什至不能尝试，因为它不会让我改变那里的视图，它会抛出只有原始线程的错误可以更改视图。而且我需要该服务来完成加载我的视图，所以我什至无法使用 AsyncTask 执行该服务。

我现在没有主意了！必须有办法做到这一点。我很感激建议！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T14:51:31.163

> 有没有办法防止这种情况发生？

是的：不要在主应用程序线程上花这么长时间。用于`StrictMode`识别可能的罪魁祸首（磁盘 I/O、网络 I/O），并使用 Traceview 找出您正在做的其他可能花费太长时间的事情。

> 由于网络服务的原因，我的应用程序总是需要几秒钟才能加载。

这应该在后台线程中完成。

> 我在谷歌上读到，我可以使用 AsyncTask，并在 DoOnBackground 方法上完成加载。我不知道这是否有效，但我什至不能尝试，因为它不会让我改变那里的视图，它抛出一个错误，只有原始线程可以更改视图

这就是您从该方法更新视图的原因[，](http://developer.android.com/reference/android/os/AsyncTask.html)`onPostExecute()`如.[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:52:29.383

您必须在 AsyncTask 的 onPostExecute() 函数中更改 ui。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T17:38:50.757

永远不要在主线程的上下文中执行数据库操作或内容提供程序操作。迟早你会遇到应用程序无响应错误。ANR 不是一个好的做法。

# html - 如何链接到我上传的 WordPress 中的图像？

> ID：13310202
> 
> 赞同：1
> 
> 时间：2012-11-09T14:46:53.207
> 
> 标签：html, wordpress

我已经收集到我将图像上传到`wp-content/uploads`，但是一旦在那里，我如何在我的模板文件中链接到它？

如果我在`dog.jpg`上传目录之后创建了一个新模板，`<img src="dog.jpg" />`则不起作用 - 图像不会显示。

我读过`<?php bloginfo('template_directory'); ?>`应该插入（我猜？），但把它放在前面`dog.jpg`没有`src`帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:53:39.787

尝试给出图像的完整路径（带有“http://”和主机），例如“http://myblog.com/wp-content/uploads/dog.jpg”。或者可以给出一个相对路径：“wp-content/uploads/dog.jpg”。
另外，据我记得，wordpress 的上传功能会根据您上传图像的日期将图像放在 wp-content/uploads 的某些子目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:57:48.217

如果您将图像上传到 wp-content/uploads 目录，您应该在 wordpress 后端使用媒体上传器。然后会自动设置文件 URL，并为每个图像提供给您。如果您不想在 wordpress 中使用媒体上传器，您应该使用主题文件夹中的图像目录，然后将这些图像定位为：

`<img src="<?php echo get_template_directory_uri(); ?>/images/dog.jpg" />`

试试这个，它会工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:03:05.407

如果图像用于主题中的模板，则应将图像与主题文件一起存储。媒体上传器更适合您的内容作者使用。

如果您仍然希望减少重复（也许您也需要在内容中使用图像），那么您可以硬编码一个指向图像的链接，因为它存在于上传文件夹中。但是你真的想冒险让内容作者删除它从而破坏你的主题吗？

# linux - 有没有办法判断启动的 GUI 应用程序何时显示其窗口？

> ID：13310204
> 
> 赞同：2
> 
> 时间：2012-11-09T14:47:03.113
> 
> 标签：linux, bash

我正在寻找一种从脚本启动多个 GUI 应用程序的方法，以便应用程序窗口的显示顺序与启动应用程序的顺序相同。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:15:09.247

这似乎是[wmctrl](http://tomas.styblo.name/wmctrl/)的工作，例如：

```
wait_for_window() {
  "$@" &
  local PID=$!
  while test -z "$(wmctrl -pl | awk "\$3 ~ $PID")"; do 
    sleep 1
  done
}

wait_for_window gnome-calculator
wait_for_window gnome-terminal 
```

这可能需要一些调整，因为 PID 和窗口之间的关系并不总是微不足道的，但你明白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:55:08.753

我唯一能想到的是比启动脚本更复杂的东西。例如应用程序管理器，并使用事件（在您的情况下为“应用程序启动”事件）启动下一个应用程序等

如果您试图从控制台启动应用程序并希望它们按照您启动它们的相同顺序完成初始化/启动，那么它不会起作用，因为您无法控制加载应用程序需要多长时间。

应用程序如何与应用程序管理器通信以告诉它它们已完成加载是使用许多可用[的进程间通信机制](http://en.wikipedia.org/wiki/Inter-process_communication)

另一方面，如果这些应用程序不是您的，并且您无法在其中实施 IPC，那么您必须找到另一种方法来确定它们是否在启动下一个应用程序之前已启动，如果他们提供，则可能 ping 它们，或者搜索他们在重新启动时创建的某些文件，或者您可以检测并根据它决定应用程序是否已启动的任何其他行为

# jquery - Respond.js 和 Modernizr 无法在 IE8 上进行媒体查询

> ID：13310209
> 
> 赞同：3
> 
> 时间：2012-11-09T14:47:13.603
> 
> 标签：jquery, modernizr, polyfills

我有一个博客，我正在尝试使用 bootstrap 作为项目的骨干跨所有浏览器工作。我正在使用 Modernizr 和 Respond 来强制 IE 响应媒体查询，但由于某种原因脚本无法正常工作。我是按错误的顺序放置它们还是另一个 JS 脚本覆盖了它们？任何帮助将不胜感激。

```
 <link rel="stylesheet" href="<?php echo get_template_directory_uri(); ?>/library/css/bootstrap.min.css">
    <link rel="stylesheet" href="<?php echo get_template_directory_uri(); ?>/library/css/bootstrap-responsive.min.css">
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:700' rel='stylesheet' type='text/css'>
<script src="<?php echo get_template_directory_uri(); ?>/library/js/modernizr.full.min.js"></script>
<script src="https://raw.github.com/scottjehl/Respond/master/respond.min.js"></script>          
    <!-- HTML Shim - Enables usage of all HTML5 elements in Internet Explorer -->
    <!--[if lt IE 9]>
        <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write(unescape('%3Cscript src="<?php echo get_template_directory_uri(); ?>/library/js/libs/jquery-1.7.1.min.js"%3E%3C/script%3E'))</script>

    <!-- Selectivizr - Enable CSS3 selectors for IE 6-8 -->
    <!--[if (gte IE 6)&(lte IE 8)]>
        <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/library/js/libs/selectivizr-min.js"></script>
    <![endif]-->
    <script src="<?php echo get_template_directory_uri(); ?>/library/js/bootstrap-tooltip.js"></script>
    <script src="<?php echo get_template_directory_uri(); ?>/library/js/bootstrap-popover.js"></script>
    <script src="<?php echo get_template_directory_uri(); ?>/library/js/bootstrap-typeahead.js"></script>
    <script src="<?php echo get_template_directory_uri(); ?>/library/js/site.js"></script>
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <link rel="pingback" href="<?php bloginfo('pingback_url'); ?>">
    <!-- wordpress head functions -->
    <?php wp_head(); ?>
    <link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>">
</head> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T09:06:25.960

尝试移动

```
<script src="https://raw.github.com/scottjehl/Respond/master/respond.min.js"></script> 
```

追踪您的最后一个样式表链接（您可能错过了它，但底部有一个）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T19:13:33.693

仅仅添加 respond.js 并不能修复媒体查询。我使用了 css3-mediaqueries.js 并像这样编写了我的媒体查询：

```
 @media screen and (min-width: 768px) and (max-width: 979px) {
      // css;
    } 
```

代替：

```
 @media (min-width: 768px) and (max-width: 979px) {
      // css;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-30T04:29:12.787

同样的问题。我发现这是我的加载顺序问题，因为我先内联编写 CSS，所以它看起来像

`<script type="text/javascript" src="js/respond.min.js"></script>`

`<link rel="stylesheet" type="text/css" href="style.css" media="screen" />`

它应该是

`<link rel="stylesheet" type="text/css" href="style.css" media="screen" />`

`<script type="text/javascript" src="js/respond.min.js"></script>`

总是在脚本之前调用样式表！

# c# - 转储 HttpRequest 的属性

> ID：13310212
> 
> 赞同：2
> 
> 时间：2012-11-09T14:47:24.720
> 
> 标签：c#, asp.net, debugging

有没有一种简单的方法来转储完整的 HttpRequest。我需要这个来分析我的 Web 应用程序中的问题。HttpRequest 包含许多属性，我不想自己编写它。

```
 HttpRequest request = HttpContext.Current.Request;
 request.Dump(); 
```

我正在寻找一种类似于 Linqpad 中的方法，它可以打印出所有带有值的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:50:46.557

内置`SaveAs()`方法可能会帮助您。

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.saveas.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.saveas.aspx)

它的描述是：

> 将请求上下文保存到磁盘对调试很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:53:14.547

你可以写一个这样的扩展方法：

```
var dict = someObj.DumpProperties();
var dumpStr = String.Join("\n", 
                dict.Select(kv => kv.Key + "=" + kv.Value ?? kv.Value.ToString())); 
```

.

```
public static class MyExtensions
{
    public static Dictionary<string, object> DumpProperties(this object obj)
    {
        var props = obj.GetType()
            .GetProperties()
            .ToDictionary(p => p.Name, p => p.GetValue(obj, null));

        return props;
    }
} 
```

# tfs - 在 TFS2012 中复制团队项目集合

> ID：13310213
> 
> 赞同：2
> 
> 时间：2012-11-09T14:47:26.450
> 
> 标签：tfs

我有一个包含多个项目的团队项目集合- ![在此处输入图像描述](../Images/cd041312ab56aaebffc9fefeac361edc.png)

我需要使用同一组项目制作另一个团队项目集合。是否可以在 TFS2012 中复制/复制我的原始团队项目集合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:10:43.727

您可以使用[MSDN 文章中的“基于还原的移动”选项：Team Foundation Server 移动类型](http://msdn.microsoft.com/en-us/library/ms404860.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:14:11.277

您可以分离项目集合并使用不同的名称复制它的数据库，并重新附加它们的数据库和项目集合。

您可以查看以下有关如何执行此操作的帖子，但此帖子显示从 TFS 2010 到 TFS 2012，但想法相同。

[将 TFS 集合从 TFS 2010 迁移和升级到 TFS 11 Beta 视频](http://mohamedradwan.wordpress.com/2012/04/01/migrate-and-upgrade-tfs-collection-from-tfs-2010-to-tfs-11-beta-video/)

您还可以在此处查看有关使用 TFS 项目集合管理项目的更多信息：

[Visual Studio TFS 团队项目和收集指南](http://msdn.microsoft.com/en-us/magazine/gg983486.aspx)

# joomla - 我可以在源代码中隐藏 joomla 链接的一部分吗？

> ID：13310215
> 
> 赞同：0
> 
> 时间：2012-11-09T12:59:49.493
> 
> 标签：joomla

是否可以隐藏标签的`href="...."`一部分？`<link>`

```
<link rel="stylesheet" type="text/css" href="/nettt/plugins/system/jch_optimize/cache/jscss.php?f=019a87662ec9a3b8c890c566b8019f23-cache-plg_jch_optimize-652b9fac2d3cde50d0b5ec53b6e540d4&amp;type=css&amp;gz=gz&amp;d=30"/> 
```

我想隐藏

```
/nettt/plugins/system/jch_optimize/cache/jscss.php?f=019a87662ec9a3b8c890c566b8019f23-cache-plg_jch_optimize-652b9fac2d3cde50d0b5ec53b6e540d4&amp 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:00:23.333

这会影响功能吗？如果是这样，那么它需要在那里（或者浏览器不会加载文件并且任何依赖项都会失败）。

如果没有（我不确定您为什么想要一个空链接标签），您可以按照@murali 的建议进行操作并使用 JavaScript 将其删除（或使用 JavaScript 完全擦除标签）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:54:18.307

```
var DOMlinks = document.getElementsByTagName("link");
for(i=0;i<DOMlinks.length;i++){
DOMlinks[i].href = ""
} 
```

# c# - 在面板滚动时在 Winform 面板中绘制一个按钮

> ID：13310219
> 
> 赞同：6
> 
> 时间：2012-11-09T14:48:13.407
> 
> 标签：c#, winforms, scroll, panel

在面板中，我绘制了控件，例如按钮/文本框，位于面板中的 (0,0) 开始。这些控件在开始时是不可见和禁用的。我在面板外有一个按钮，当按下这些按钮/文本框时可以看到它们，并将它们定位到面板中的新位置。

问题是如果用户将面板滚动到某个（x，y）然后按下“使可见”按钮，按钮的新（x，y）位置是根据面板的当前（x，y）位置计算的 -不是从面板的顶部（0,0）。

我想知道这是否是面板的正确行为，要解决此问题，我需要`this.VerticalScroll.Value`在重新定位按钮时将其视为（x，y）偏移。

![在此处输入图像描述](../Images/bd6c851c57dba947e994ab5bc9e82038.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:38:14.047

This is what worked for me. When you get the Y of you button/textbox etc do:

`relativeControlTop = theControl.Top - thePanel.AutoScrollPosition.Y;`

When you set the top do:

`relativeControlTop = theControl.Top + thePanel.AutoScrollPosition.Y;`

Hope this Helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:42:49.883

不确定它是否对您的情况有所帮助，但我认为值得尝试：

> 如果您要使用 Visual Designer 设计面板，我建议 **使用两个面板**：一个包含所有控件的全尺寸面板，其大小便于设计；和具有预期物理尺寸的较小的。然后只需将大的添加为较小的唯一的孩子（如底部面板中的内部面板）。

有关详细信息，请参阅本文[文章：WinForms AutoScroll 实验](http://www.perceler.com/articles1.php?art=autoscroll1)。

# asp.net-mvc - ASP.NET MVC，“流”的解释

> ID：13310220
> 
> 赞同：0
> 
> 时间：2012-11-09T14:48:14.360
> 
> 标签：asp.net-mvc

此站点上的条目引用正在写入“流”的内容。（我正在阅读这篇关于 MVC 的文章[——ASP.NET MVC——为什么 HtmlHelpers 不直接渲染到流中？](https://stackoverflow.com/questions/9949987/asp-net-mvc-why-dont-htmlhelpers-render-directly-to-the-stream)）

它讨论了返回 MvcHtmlString 实例与写入流。我无法理解“流”是什么。什么写它会“看起来像”与返回 MvcHtmlString。

我想“流”不仅仅是一个 ASP.NET MVC 术语？如果有人对此有*视觉*表示，我认为这将最有帮助！（如果不是也可以）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:52:39.440

“The Stream”是“The HTTP Response Stream”的简写，即写入响应字节以将其发送给用户的地方。

为了在任何两个系统之间进行通信，它们之间会发送信息。信息本身只是写入发送方套接字并从接收方相应套接字读取的一系列字节。这是基于 TCP 的所有客户端-服务器通信的基本抽象。

在 HTTP 中，有一个请求流，包含请求的字节，由客户端写入并由服务器读取，还有一个响应流，包含响应的字节，由服务器写入并由客户端读取。

# python - shell脚本检查python版本

> ID：13310221
> 
> 赞同：6
> 
> 时间：2012-11-09T14:48:19.223
> 
> 标签：python, shell, cygwin

我有以下 shell 脚本来查询 python 版本。`"Integer expression expected"`它给了我一个关于 if 语句的错误说明。

```
#!/bin/bash

PYTHON_VERSION=`python -c 'import sys; print("%i" % (sys.hexversion<0x03000000))'`

echo $PYTHON_VERSION

if [ $PYTHON_VERSION -eq 0 ]
then
    echo "fine!"
fi 
```

'echo $PYTHON_VERSION' 打印出 '0'，那么为什么 if 语句不起作用呢？

编辑：我正在使用 Windows 和 Cygwin

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T14:54:14.637

好问题。对我来说它工作正常。你总是应该引用评估变量（`"$X"`而不是`$X`）；也许这可以解决您的错误。

但我建议使用 python 脚本的结果而不是其输出：

```
#!/bin/bash
if python -c 'import sys; sys.exit(1 if sys.hexversion<0x03000000 else 0)'
then
    echo "Fine!"
fi 
```

如果您想完全留在 shell 中，您也可以使用以下`--version`选项：

```
case "$(python --version 2>&1)" in
    *" 3."*)
        echo "Fine!"
        ;;
    *)
        echo "Wrong Python version!"
        ;;
esac 
```

也许这更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:59:16.970

它不起作用的原因是因为存储在 $PYTHON_VERSION 中的结果不是整数，所以你的相等性测试是用两种不同的类型完成的。

您可以将 if 更改为：

```
if [ $PYTHON_VERSION -eq "0" ]; then
     echo "fine!"
fi 
```

或者你可以这样做：

```
if [ $PYTHON_VERSION = 0 ]; then 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:52:33.120

这是一个可能的解决方案

```
if sys.version_info < (3, 0):
    reload(sys)
    sys.setdefaultencoding('utf8')
else:
    raw_input = input 
```

这是我从 slimxmpp 获得的一个例子，但我相信它可以满足您的需求。

# android - 带有选项卡和列表的 Android 操作栏

> ID：13310224
> 
> 赞同：0
> 
> 时间：2012-11-09T14:48:28.173
> 
> 标签：android, android-actionbar, actionbarsherlock, android-theme

我正在尝试使用操作栏选项卡和类似于 tweetlanes 应用程序的列表创建一个活动：

![在此处输入图像描述](../Images/800ea9cf57ddc836e5b996523b3da796.png)

我读过操作栏只支持选项卡或列表导航，而不是同时支持。有没有办法两者兼得？一个可能的替代方法是滚动我自己的标签，但我并不热衷于此，因为我有几个标签，所以还必须实现滚动行为。

谢谢

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:03:47.000

我很确定 tweetlanes 没有使用 ActionBar 选项卡，因为这些选项卡没有分隔符。我想说这些是来自 Jake Wharton的[ViewPageIndicator选项卡。](http://www.viewpagerindicator.com)因此，您可以使用它们并同时使用列表导航。

# jquery - 我可以为 iPad 的纵向和横向指定一个初始视图比例吗？

> ID：13310234
> 
> 赞同：2
> 
> 时间：2012-11-09T14:49:06.443
> 
> 标签：jquery, ipad, screen-orientation

我在我的网站上添加了一个元规则，所以 ipad 会缩小所有内容，我只希望在横向模式下发生这种情况，当用户将方向更改为纵向或用户以纵向模式加载页面时，我希望比例更改为1 和整个页面缩放以适应。

我用过这段代码。

```
if(ipad){
            window.onorientationchange = function() {

                var orientation = window.orientation;
                var location = window.location.href;
                gallery.rescale();
                if (orientation === 0) {
                    $('.galleria-thumbnails .galleria-image:nth-child(5n+5)').removeClass('last-thumb');
                    $('.galleria-thumbnails .galleria-image:nth-child(4n+4)').addClass('last-thumb');
                    $('.galleria-thumbnails .galleria-image:nth-child(4n+1)').addClass('next-thumb');
                    $('.galleria-thumbnails .galleria-image:nth-child(1)').removeClass('next-thumb');

                    $("body").addClass("portrait");

                } else if (orientation === 90) {
                    $('.galleria-thumbnails .galleria-image:nth-child(5n+5)').addClass('last-thumb');
                    $('.galleria-thumbnails .galleria-image:nth-child(4n+4)').removeClass('last-thumb')
                    $('.galleria-thumbnails .galleria-image:nth-child(4n+1)').removeClass('next-thumb');

                    $("body").removeClass("portrait");                      

                } else if (orientation === -90) {
                    $('.galleria-thumbnails .galleria-image:nth-child(5n+5)').addClass('last-thumb');
                    $('.galleria-thumbnails .galleria-image:nth-child(4n+4)').removeClass('last-thumb')
                    $('.galleria-thumbnails .galleria-image:nth-child(4n+1)').removeClass('next-thumb');

                    $("body").removeClass("portrait");

                } else if (orientation === 180) {
                    $('.galleria-thumbnails .galleria-image:nth-child(5n+5)').removeClass('last-thumb');
                    $('.galleria-thumbnails .galleria-image:nth-child(4n+4)').addClass('last-thumb');
                    $('.galleria-thumbnails .galleria-image:nth-child(4n+1)').addClass('next-thumb');
                    $('.galleria-thumbnails .galleria-image:nth-child(1)').removeClass('next-thumb');

                    $("body").addClass("portrait");

                }
            }       
        } 
```

这使每行的缩略图可以在纵向和横向之间切换，并且效果很好。

我尝试添加`<meta name="viewport" content="width=device-width, initial-scale=0.85" />`每个方向更改规则，但它不起作用。

关于为什么的任何想法？我很想解决这个问题或知道是否有一个。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:11:57.520

我已经弄清楚我需要在页面加载时添加/删除纵向，否则无法正确重新调整方向。

***谢谢 teewuane

# python - 启动 GUI 进程而不产生黑色 shell 窗口

> ID：13310235
> 
> 赞同：6
> 
> 时间：2012-11-09T14:49:07.540
> 
> 标签：python, subprocess, explorer

我想打开 Windows 资源管理器并选择一个特定文件。这是 API `explorer /select,"PATH"`：. 因此导致以下代码（使用python 2.7）：

```
import os

PATH = r"G:\testing\189.mp3"
cmd = r'explorer /select,"%s"' % PATH

os.system(cmd) 
```

代码工作正常，但是当我切换到非 shell 模式（使用`pythonw`）时，在启动资源管理器之前会出现一个黑色 shell 窗口。

这是可以预料的`os.system`。我创建了以下函数来启动进程而不产生窗口：

```
import subprocess, _subprocess

def launch_without_console(cmd):
    "Function launches a process without spawning a window. Returns subprocess.Popen object."
    suinfo = subprocess.STARTUPINFO()
    suinfo.dwFlags |= _subprocess.STARTF_USESHOWWINDOW
    p = subprocess.Popen(cmd, -1, stdout=subprocess.PIPE, stderr=subprocess.PIPE, startupinfo=suinfo)
    return p 
```

这适用于没有 GUI 的 shell 可执行文件。但是它不会启动`explorer.exe`。

如何在不产生黑色窗口的情况下启动该过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:42:11.980

这似乎是不可能的。但是可以从`win32api`. 我使用了[这里](http://mail.python.org/pipermail/python-win32/2012-September/012533.html)找到的代码：

```
from win32com.shell import shell

def launch_file_explorer(path, files):
    '''
    Given a absolute base path and names of its children (no path), open
    up one File Explorer window with all the child files selected
    '''
    folder_pidl = shell.SHILCreateFromPath(path,0)[0]
    desktop = shell.SHGetDesktopFolder()
    shell_folder = desktop.BindToObject(folder_pidl, None,shell.IID_IShellFolder)
    name_to_item_mapping = dict([(desktop.GetDisplayNameOf(item, 0), item) for item in shell_folder])
    to_show = []
    for file in files:
        if name_to_item_mapping.has_key(file):
            to_show.append(name_to_item_mapping[file])
        # else:
            # raise Exception('File: "%s" not found in "%s"' % (file, path))

    shell.SHOpenFolderAndSelectItems(folder_pidl, to_show, 0)
launch_file_explorer(r'G:\testing', ['189.mp3']) 
```

# javascript - 如何强制图像在加载时解码？

> ID：13310236
> 
> 赞同：11
> 
> 时间：2012-11-09T14:49:05.940
> 
> 标签：javascript, jquery, css, requestanimationframe

我正在构建一个使用 requestAnimationFrame 进行视差滚动的网站。有多个部分，每个部分都有一个全尺寸的背景图像和一些中间和前景图像。我已经设法通过 requestAnimationFrame 相对顺利地获得了这个动画，但动画中仍然偶尔会出现抖动。

通过在帧模式下查看 Chrome 的时间线，我可以看到导致“卡顿”的进程被标记为“图像解码”。此外，一旦动画完成一次，卡顿就不会再次发生。

似乎大多数浏览器现在都推迟了对尚未显示的图像的解码。有没有一种方法可以在用户不可见的情况下预解码（不仅仅是预加载）图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:47:52.947

该问题可能与滚动出/进入视图的图像有关。

来自[http://creativejs.com/resources/requestanimationframe/](http://creativejs.com/resources/requestanimationframe/)

> 还暗示浏览器可以选择基于负载、元素可见性（被**滚动到视图之外**）和电池状态来优化 requestAnimationFrame 的性能。

同样来自[W3C 草案](http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/RequestAnimationFrame/Overview.html)

> ISSUE-4 我们是否希望允许将元素传递给 requestAnimationFrame，以便在**滚动出视图**时限制或暂停影响给定元素的动画？

确保您没有为每个 onscroll 事件启动 requestAnimationFrame 循环，因为这可能会导致问题。这在这个单独的帖子中有详细描述

[关于请求动画帧的问题](https://stackoverflow.com/questions/10602868/questions-about-request-animation-frame)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:34:04.323

我通过消除检查元素是否在屏幕上的行来解决这个问题，这很可能与浏览器做同样的事情，只是效果很差。

# asp.net-mvc - 从现有项目自动创建 nuget 包

> ID：13310238
> 
> 赞同：1
> 
> 时间：2012-11-09T14:49:17.850
> 
> 标签：asp.net-mvc, nuget

我们正在使用 Visual Studio 2010，我们开发 ASP.NET MVC 应用程序。

我们的部署过程包括在 UI 上手动构建一个 nuget 包并上传它。

我们需要弄清楚如何从代码中创建一个 nuget 包，包括添加文件、添加属性、添加更改日志作为描述。

有没有实现这个目标的解决方案？

谢谢

编辑：

经过大量痛苦的工作，不知道目标是什么以及如何实现目标，我想出了以下代码：

```
NuGet Update -self
nuget spec -f
mkdir bin
mkdir Scripts
mkdir Styles
copy ..\TestProj\TestProj\bin bin
copy ..\TestProj\TestProj\Scripts Scripts
copy ..\TestProj\TestProj\Styles Styles
copy ..\TestProj\TestProj.sln 
```

我不确定 NuGet 操作是否正确，也不确定是否应该以这种方式将所有文件迁移到包中，因为我是 NuGet 新手。如果有人能告诉我正确的方向，我将非常感激：

*   我应该如何添加文件
*   我应该如何添加属性
*   我应该如何添加更改日志作为描述

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:37:16.043

就我而言，解决方案如下：

```
cd C:\myfolder
mkdir content
mkdir Styles
del content /F /S /Q /A
del Styles /F /S /Q /A
copy C:\myotherfolder\Scripts Content
copy C:\myotherfolder\Styles Styles
NuGet Update -self
NuGet pack mypackage.nuspec 
```

请注意 mypackage.nuspec 已经存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:21:27.357

您[看过 Nuget 规范和 Pack 命令](http://docs.nuget.org/docs/reference/command-line-reference)吗？它将帮助您轻松地从 csproj 或遵循[nuget 文件夹约定](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)的任何文件集创建包。如果您对此有任何进一步的问题，请告诉我们。

# c - 如何在 C 中将 32 位整数转换为 64 位值

> ID：13310241
> 
> 赞同：0
> 
> 时间：2012-11-09T14:49:34.187
> 
> 标签：c, bit-manipulation

我在项目代码中遇到编译错误，情况如下：

```
typedef unsigned int U32bit;
typedef unsigned long long U64bit;

U32bit      var;
U64bit      var2;

var = function();  /* Function returns a 32-bit value, which is stored in var */

var2 = 100*var1;   /* 100*var1 is very Big & can be stored only in U64bit variable */

For the Above Line: var2 = 100*var1 
```

我在 Solaris 上收到以下编译错误：

```
"conversion to non-scalar type requested" 
```

我也尝试过类型转换：

```
var2 = (U64bit) 100*var1; 
```

这也给出了同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:52:10.877

是什么`U64bit`？那是一个非标准类型，所以你必须显示它的声明。

听起来好像是一个`struct`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:53:39.470

C 中的标准固定宽度整数类型是`uint32_t`和`uint64_t`，请尝试使用这些类型。然后可以用 定义该类型的常量`UINT64_C(100)`。

要拥有这些类型，您可能必须添加

```
#include <stdint.h> 
```

到你的包括。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:51:50.257

您确定这种类型“U64bit”实际上定义为整数吗？如果不是，那可能是问题所在，它可能`struct`是标量类型。

您也没有指定您正在使用哪个编译器或操作系统。如果它遵循 C 标准，您应该`#include <stdint.h>`使用`uint32_t`and`uint64_t`而不是`U32bit`and `U64bit`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:52:08.693

尝试以下操作：

```
var2 = (U64bit)var1 * 100; 
```

**编辑**

也许

```
var2 = (U64bit)var1 * 100LL; 
```

无论如何，声明 for `U32Bit`，`U64Bi`t 和 for`function`会很有用。

# api - YouTube API 用户/频道人类可读的显示名称消失了

> ID：13310242
> 
> 赞同：1
> 
> 时间：2012-11-09T14:49:35.380
> 
> 标签：api, youtube, youtube-api

以前，我一直使用API 调用`$t`中的`entry`和 `title`字段中的字段来获取 YouTube 用户/频道的人类可读名称，如下所示：

[http://gdata.youtube.com/feeds/api/users/_6w3OSoTacXjd42ELqLbGQ?v=2&alt=json](http://gdata.youtube.com/feeds/api/users/_6w3OSoTacXjd42ELqLbGQ?v=2&alt=json)

该文档解释说，此标题标签应包含：

> 供稿的可读标题或供稿中的条目

[https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_title](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_title)

这曾经是这种情况，但现在标题包含频道/用户的用户名，而不是其人类可读的名称。在上面的 API 调用 eaxmple 中，标题标签包含`DBZ3333`但实际的人类可读名称是`Kanal von DBZ3333`，并且这不会出现在 API 响应中的任何位置。

我找不到提及此更改的任何公告或任何文档，这是 YouTube API 中的错误吗？

现在有什么方法可以使用 YouTube API 获取用户/频道的人类可读名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:51:27.567

**编辑**：好的，不幸的是，这是无法轻易恢复的。有人告诉我，在 Data API v3 中，除了频道标题（在未来几周内）之外，还有一个显示名称字段，但 v2 行为需要保持原样。

*这是一个无意的行为变化，工程团队刚刚为它编写了一个修复程序。它应该在大约一周内部署到生产环境中。*

# tsql - 在 Sybase ASE 中出现以下错误时未设置 @@ERROR

> ID：13310244
> 
> 赞同：0
> 
> 时间：2012-11-09T14:49:44.667
> 
> 标签：tsql, sap-ase

我面临以下错误 -

```
Number (213) Severity (16) State (5) Server (ASED052) Insert error: column name or number of supplied values does not match table definition. 
```

我试图抓住它 -

```
IF @@ERROR != 0
BEGIN
-- Do stuff
END 
```

但是，我发现这个错误没有设置全局`@@ERROR`变量。在这种情况下，有没有人知道另一种方法来捕捉这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:48:36.697

显然没有办法使用全局`@@ERROR`变量来捕获指定的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:54:06.197

试试这个解决方案：

I. 使用产生错误的代码创建一个过程。

```
create procedure Proc1
as
begin
  insert into tab(Fake_Column) 
  values ('aaa')
end 
```

二、运行过程 Proc1 并捕获错误：

```
exec Proc1

IF @@error <> 0
begin
    print 'ERROR!'    
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:53:05.447

您是否尝试过使用以下功能？

```
ERROR_LINE()
ERROR_MESSAGE()
ERROR_NUMBER()
ERROR_PROCEDURE()
ERROR_SEVERITY()
ERROR_STATE() 
```

或者您可以使用 try/catch 块：

```
BEGIN TRY
...
END TRY
BEGIN CATCH
...
END CATCH 
```

# matlab - 如何将文件夹上的 Matlab 脚本分组为从父文件夹的主脚本执行？

> ID：13310246
> 
> 赞同：3
> 
> 时间：2012-11-09T14:50:00.297
> 
> 标签：matlab

我已经有十几个脚本，我想将它们分组到文件夹下以便更轻松地处理它们。我怎么能做到？Matlab 是否包含数据包层次结构？如果是这样，我找不到如何使用:(。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:23:25.413

是的，Matlab 为此使用[包目录](http://www.mathworks.nl/help/matlab/matlab_oop/scoping-classes-with-packages.html)。

将文件分组到以 a 开头的目录中`'+'`：

```
+somePackage/func1.m
+somePackage/func2.m 
```

然后，在您的主脚本中，

```
import someDir.*

A = func1(arg1, arg2, ...);
B = func2(arg1, arg2, ...); 
```

或者

```
A = somePackage.func1(arg1, arg2, ...);
B = somePackage.func2(arg1, arg2, ...); 
```

这基本上是 Matlab 对命名空间概念的实现。

# apache2 - Apache2 关于 NameVirtualHost 指令的警告

> ID：13310249
> 
> 赞同：22
> 
> 时间：2012-11-09T14:50:03.687
> 
> 标签：apache2, ubuntu-10.04

有人可以帮我理解为什么我在重新启动我的 apache2 网络服务器时收到以下错误：

```
[Fri Nov 09 09:46:43 2012] [warn] VirtualHost 172.30.30.12:443 overlaps with VirtualHost 172.30.30.12:443, the first has precedence, perhaps you need a NameVirtualHost directive
[Fri Nov 09 09:46:43 2012] [warn] VirtualHost 172.30.30.12:443 overlaps with VirtualHost 172.30.30.12:443, the first has precedence, perhaps you need a NameVirtualHost directive 
```

错误总是出现两次。什么是 NameVirtualHost 指令？

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-09T15:06:04.073

看看[这个例子](http://httpd.apache.org/docs/2.2/vhosts/name-based.html#using)。

您可能需要将此行添加到您的 Apache HTTP Server 配置中：

```
NameVirtualHost 172.30.30.12:443 
```

# django - Django URL 问题

> ID：13310251
> 
> 赞同：-1
> 
> 时间：2012-11-09T14:50:19.093
> 
> 标签：django, url

我是 django 和编写博客应用程序的新手。我有一个关于 url 的问题。当我单击一个页面时，例如：关于，url 是`http://localhost/about`但是在此页面中，当单击主要内容上的一个对象时，例如：在类别 linux 中，给定的 url 像这样转动：`http://localhost/about/tags/linux` 并且正如猜测的那样，没有显示任何内容。url 必须显示为`http://localhost/tags/`.. 我怎样才能克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:54:25.963

您如何在模板中创建网址？

您应该在 urls.py 中为您的 url 定义名称。

如果你定义了一个名为“about”的 url，你可以使用 {% url about %} 来获取完整的正确路径。

对于像你的标签/linux这样更动态的东西，你可以定义一个url'tags'，它以标签名作为参数，你会在模板中使用{% url tags'linux'%}生成url。

这方面的重要部分在 Django 的规范介绍中进行了介绍：[https ://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

# c# - JavaScriptSerializer 转义字符

> ID：13310256
> 
> 赞同：0
> 
> 时间：2012-11-09T14:50:32.143
> 
> 标签：c#

我正在尝试扩展字符串并创建一个使字符串“JSON 安全”的简单函数。

```
public static string ToJSON(this object obj)
{
    JavaScriptSerializer serializer = new JavaScriptSerializer();

    return serializer.Serialize(obj);
} 
```

但是当我运行测试代码时：

```
string msg= _rep.GetResource("Delete_Confirm").ResourceValue.ToJSON(); 
```

似乎在字符串周围添加了额外的 " ，如下所示：

""您确定要删除“Helo KittY”吗？""

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:55:36.440

输出是正确的：一个 json 字符串用双引号引起来。

您看到的第一个双引号来自您的编程环境，这意味着这是 C# 中的字符串。

第二个双引号是一个真正的双引号字符，它意味着一个 json 字符串的开始。

最后的两个双引号也是如此。

希望这可以帮助

# android - 如何处理 ListView 中的快速连续点击

> ID：13310258
> 
> 赞同：1
> 
> 时间：2012-11-09T14:50:43.900
> 
> 标签：android, android-listview, onclicklistener

我有一个`ListView`可以在点击时导航的项目。

列表项有两个文本视图，它们具有以下单击处理程序：

```
private OnClickListener playClickListener() {
        return new OnClickListener() { 
            @Override
            public void onClick(View v) {
                Intent intent = new Intent(getActivity(), TestActivity.class);
                startActivity(intent);
             } 
        };
    } 
```

不幸的是，这导致 TestActivity 触发的次数与用户在 int 加载之间单击的次数一样多。我尝试将点击处理程序设置为`null`with `setOnClickListener(null)`。但是，当我导航回活动时，列表项将不再可单击。

有一个很好的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:01:37.137

您可以尝试使用`startActivityForResult()`.

```
private static final int REQUEST_CODE_MAKE_CLICKABLE = 1;

private boolean mAlreadyClicked = false;
private OnClickListener playClickListener() {
    return new OnClickListener() { 
        @Override
        public void onClick(View v) {
            if(mAlreadyClicked) return;
            mAlreadyClicked = true;
            Intent intent = new Intent(getActivity(), TestActivity.class);
            startActivityForResult(intent, REQUEST_CODE_MAKE_CLICKABLE );
         } 
    };
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(requestCode == REQUEST_CODE_MAKE_CLICKABLE && resultCode == Activity.RESULT_OK) {
        mAlreadyClicked = false;
    } 
} 
```

在您的 TestActivity 中，您可以覆盖完成以执行以下操作：

```
@Override
public void finish() {  
    setResult(Activity.RESULT_OK, new Intent());
    super.finish();
} 
```

这将导致点击只被触发一次，直到下一个活动返回并“重新启用”点击功能。

**- 或者 -**

您可能会很无聊并保持布尔值并在 onResume() 上简单地“重置”它：

```
private boolean mAlreadyClicked = false;
private OnClickListener playClickListener() {
    return new OnClickListener() { 
        @Override
        public void onClick(View v) {
            if(mAlreadyClicked) return;
            mAlreadyClicked = true;
            Intent intent = new Intent(getActivity(), TestActivity.class);
            startActivity(intent, REQUEST_CODE_MAKE_CLICKABLE );
        } 
    };
}

@Override
public void onResume() {
    super.onResume();
    mAlreadyClicked = false;
} 
```

你*应该*真的很无聊，但使用跨 Activity 回调总是很有趣。:)

# iis - IIS 7 中的 URL 重写

> ID：13310262
> 
> 赞同：2
> 
> 时间：2012-11-09T14:50:57.487
> 
> 标签：iis, url-rewriting, iis-7.5

我将现有规则作为 xml 将任何请求重写或重定向到特定 url 到其域。它不会让任何出站请求离开域。

我只想向一个网址添加一个例外（比如 abc.com）。如何为特定请求添加例外？

（请不要提供 global.asax 之类的东西，因为 IIS 不与 ASP.NET 应用程序一起工作，而是与其他一些应用程序一起工作）。

当前规则：

```
<rewrite>
    <rules>
      <rule name="topcontent">
           <match-url=".*">
                <action type="rewrite" url="mysite.com/{R:0}"/>
           </match-url>
       </rule>
    </rules>
</rewrite> 
```

如果有任何入站请求，它会将 URL 重写为 mysite.com。我需要添加一个例外说abc.com/......怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:45:18.417

在规则之上创建另一个`topcontent`规则：

```
<rule name="special">
    <match-url="abc.com">
        <action type="rewrite" url="mysite.com/specialPage.htm"/>
    </match-url>
</rule> 
```

这是一个类似的问题：[IIS URL 重写异常](https://stackoverflow.com/questions/9507653/iis-url-rewrite-exception)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:00:36.347

您可以使用以下代码：

```
<rule name="special" enabled="true">
  <match url=".*" />
  <conditions logicalGrouping="MatchAll" >
    <add input="{HTTP_HOST}" pattern="^(www\.)?abc\.com$" negate="true" />
  </conditions>
  <action type="Redirect" url="http://mysite.com/{R:0}"/>
</rule> 
```

规则中添加了一个条件，所以如果它不满足，那么动作将被执行（`negate="true"`）

它将检查，如果它与**abc.com**或**www.abc.com**`http://{HTTP_HOST}/url`不匹配，这是例外，那么它将采取行动。

 ****我也认为你可以`Redirect`在这里使用而不是`Rewrite`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:03:09.053

进入 IIS 管理器 > [您的站点] > 网址重写。

在与 abc.com 匹配的规则之前添加一条新规则，然后选中“停止处理后续规则”。****

# cocoa-touch - UITextField 的安全文本输入和自动更正之间的交互是什么？

> ID：13310264
> 
> 赞同：3
> 
> 时间：2012-11-09T14:51:00.923
> 
> 标签：cocoa-touch, uitextfield

`UITextField`在 iOS 应用程序中使用 a时，我可以将安全文本输入设置为`YES`，这将隐藏除最后一个输入该字段的字符之外的所有字符。但是，我也可以同时启用自动更正。

有谁知道在这种情况下会发生什么？如果我的密码是“bananas”并且我开始在该字段中输入它，那么如果它也将被自动更正，那么隐藏文本是没有帮助的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:19:15.580

正如@Michael Kernahan 所说，这是一个有趣的思想实验。我以前从未想过它，但为了确保我认为该字段*不会*自动更正的预感是正确的，我创建了一个小型 Xcode 项目来测试这个概念。

在 IB 中创建（诚然粗略的）界面后，我使用默认的`omw`自动更正来测试该字段作为控件。如果没有专门在现场启用自动更正，则会发生自动更正。

![自动更正有效！](../Images/4cb40180a0b5aa87a8d474900326e7c6.png)

我通过调用将字段设置为安全

```
[secureTextField setSecureTextEntry:YES]; 
```

并再次运行测试。测试失败，字段没有自动更正。

![自动更正不起作用:(](../Images/c0c95c69940705fb960942c9d74beca9.png)

最后，正如您在问题中描述的那样，我将安全文本字段设置`autoCorrectionType`为`UITextAutocorrectionTypeYes`，测试再次失败。

![自动更正不再起作用:(](../Images/b394c5730c71bf072786135aa752f3ac.png)

* * *

为了更简要地回答您的问题，基于这些测试**设置`UITextField`采取安全输入禁用字段的自动更正属性**，无论它们是否显式启用（如预期和应该那样）。

# asp.net-mvc - 将 SharePoint 和 .NET 放入共享声明提供程序

> ID：13310266
> 
> 赞同：0
> 
> 时间：2012-11-09T14:51:01.303
> 
> 标签：asp.net-mvc, sharepoint, sharepoint-2010

我有一个自定义 STS 已启动并正在运行，它适用于我的所有 SharePoint 网站。我在所有 SharePoint 网站上都有单点登录。它也适用于我的 .NET MVC 站点。但是，如果我登录到我的 MVC 站点并导航到 SharePoint，SharePoint 会将我发送到 STS 以再次登录。

如何告诉 SharePoint 信任来自 MVC 站点登录的联合 cookie？

我考虑将 MVC 站点添加到领域列表中，但 MVC 站点中没有 /_trust/ 页面。因此，我假设 SharePoint 中的领域列表仅适用于 SharePoint 网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:56:30.937

[这与此](https://stackoverflow.com/questions/13298404/sharepoint-2010-and-mvc-using-same-sts-fails-when-sharepoint-logged-in-first)具有相同的答案。当您登录到具有较低域级别的站点时，STS 与具有多个域级别的站点存在问题。

```
dev.sites.com log into
tapes.sites.com works fine
books.dev.sites.com FAILS. 
```

更详细的答案在我的另一篇文章中。 [当 SharePoint 首次登录时，使用相同 STS 的 SharePoint 2010 和 MVC 失败](https://stackoverflow.com/questions/13298404/sharepoint-2010-and-mvc-using-same-sts-fails-when-sharepoint-logged-in-first)

# architecture - 有敏捷软件设计方法吗？

> ID：13310268
> 
> 赞同：-1
> 
> 时间：2012-11-09T14:51:10.327
> 
> 标签：architecture, agile, requirements

我一直在阅读有关敏捷的文章，它似乎是为了更轻松地响应不断变化的需求、进化的软件设计、让工作软件超越构建基础、能够随时交付、不断重构等等，但我没有除了遵循 SOLID、使用设计模式和其他指南之外，还没有发现任何关于如何实际接受需求并将其转化为软件设计的方法，这种方式有助于促进上述敏捷开发的“目标”。

是否有任何方法可以帮助我将需求从需求转变为具有敏捷目标的软件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:31:27.173

据我了解，敏捷是关于工作方法，而不是技术解决方案。
重要的是你如何*管理*你的工作，而不是你如何*做*你的工作；
敏捷方法旨在解决管理问题，而不是技术问题。
（理论上，您不仅可以将敏捷方法用于软件开发，还可以用于几乎任何类型的工作。）

也就是说，有几种模式和方法可以很好地与敏捷开发配合使用；其中包括[Test-Driven-Design](http://www.agiledata.org/essays/tdd.html)和[Acceptance-Test-Driven-Design](http://www.methodsandtools.com/archive/archive.php?id=72)，旨在帮助您快速提供工作代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:38:17.967

**我对以架构为中心的设计方法 (ACDM)**有第一手经验。根据您的描述，我认为这与您可能正在寻找的内容很接近。它本身不是一种敏捷方法，但它很好地映射到 Scrum 等敏捷方法，并包含许多敏捷价值观和原则（尽管新手团队可能会觉得有些紧张或令人沮丧）。此外，ACDM 是一种真正的设计方法——它为理解需求和创建满足这些需求的设计提供了具体指导。您将需要使用开发方法来指导编写代码，例如 XP。

ACDM 由 8 个阶段组成。一般而言，该过程的目标是帮助团队快速有效地从作者所说的不确定期进入关于要构建的系统架构设计的确定期。

*   **第 1 阶段：发现架构驱动因素**--> 作者鼓励团队关注 4 个驱动因素——技术约束、业务约束、高级功能需求和质量属性。没有讨论具体的启发技术，并且有各种各样的技术。
*   **第 2 阶段：建立项目范围**--> 基本上，建立一个概念设计并确保它与发现的驱动程序保持一致。
*   **第 3 阶段：创建/优化架构**--> 在这里您将应用您在问题中提到的许多原则、SOLID、模式使用等。
*   **第 4 阶段：架构评审**--> 在正式或半正式的过程中与评审团队一起对设计进行基于场景的评审。基于架构驱动，这可以被认为是用于架构设计的 TDD 的一种变体。
*   **第 5 阶段：生产 Go/No-Go** --> 如果设计是 Go，请跳到第 7 步。go/no-go 不是整个系统的全部或没有，这意味着一部分元素可能在生产中“开始”，而其他元素必须进一步细化
*   **第 6 阶段：实验** --> 这确实是该过程的核心。如果您不了解或不确定，您通常需要亲自动手并编写一些代码来了解设计中需要做什么。重复步骤 3
*   **第 7 阶段：生产计划**
*   **第 8 阶段：生产**--> 代码构建开始，可以部分或全部发生

这本书概述了您需要了解的所有内容。作者还发表了几篇论文和演讲，这些论文和演讲都是在本书中发布的过程之前和之后发表的。

[架构软件密集型系统：](https://rads.stackoverflow.com/amzn/click/com/1420045695) Anthony Lattanze 的从业者指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T12:01:12.357

In order to be Agile, you need to be able to Change, quickly. Thus it is your software that has to be changeable. Achieving this is not easy, its in fact hard. I suggest you to read this book: [http://www.amazon.de/Software-Development-Principles-Patterns-Practices/dp/0135974445](http://www.amazon.de/Software-Development-Principles-Patterns-Practices/dp/0135974445) it is really good.

You can also read my blogpost: [http://babdev.blogspot.co.at/2013/08/are-you-really-agile.html](http://babdev.blogspot.co.at/2013/08/are-you-really-agile.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T01:32:52.450

我知道你的意思。你正在寻找一条可以遵循的道路，没关系。我会向你推荐一本书，它会解决你所有的问题，好吗？它被命名为：敏捷开发的艺术。

这本书是您正在寻找的方法论（接近它）。从那里您将能够继续您的旅程。

除了一本书：eXtreme Programming 比其他敏捷方法更具技术性和针对性。你也应该看看它：[http ://www.extremeprogramming.org](http://www.extremeprogramming.org)

单击那里的链接并阅读所有内容。

祝你好运。

# c# - 将一年和月份添加到下拉列表

> ID：13310269
> 
> 赞同：2
> 
> 时间：2012-11-09T14:51:23.197
> 
> 标签：c#, asp.net

我一直在尝试生成一个下拉列表，其中我同时显示了年份和月份。

下拉列表必须显示如下所示的 1 年。

*   “2012 年 11 月”
*   “2012 年 10 月”
*   “2012 年 9 月”
*   “2012 年 8 月”
*   “2012 年 7 月”
*   “2012 年 6 月”
*   “2012 年 5 月”
*   “2012 年 4 月”
*   “2012 年 3 月”
*   “2012 年 2 月”
*   “2012 年 1 月”
*   《2011 年》

那应该是一年的几个月。

我正在使用这个 javascript 在下拉列表中提交：

```
$('.dropdownMonthYear').change(function ()
        {
            var values = $('.dropdownMonthYear').val().split(",");
            var month = values[0];
            var year = values[1];
            window.location = '/Garage/Top10Cars.aspx?month=' + month + '&year=' + year;
        }); 
```

代码隐藏：

```
month = Convert.ToInt32(Request.QueryString["month"]);
            year = Convert.ToInt32(Request.QueryString["year"]); 
```

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:57:56.873

这是使用的一种方式[`Linq`](http://msdn.microsoft.com/en-us/library/vstudio/bb397933.aspx)：

```
var source = Enumerable.Range(0, 12)
    .Select(i =>  new ListItem(DateTime.Today.AddMonths(-1 * i).ToString("MMM yyyy")));
DdlYearMonth.DataSource = source;
DdlYearMonth.DataBind(); 
```

这`Range`类似于 for 循环。在`Select`我正在创建`ListItems`的`DateTimes`（从今天开始，每个循环回溯一个月）。[`ToString`](http://msdn.microsoft.com/en-us/library/zdtaw1bw%28v=vs.110%29.aspx)采用格式字符串，将日期时间转换为您指定格式的字符串。

[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

如果您还想将 ListItem 的`Value`属性设置为月份编号（一月为 fe 1）：

```
var source = Enumerable.Range(0, 12)
   .Select(i => DateTime.Today.AddMonths(-1 * i))
   .Select(d => new { Text = d.ToString("MMM yyyy"), Value = d.Month.ToString() });
DdlYearMonth.DataTextField = "Text";
DdlYearMonth.DataValueField = "Value";
DdlYearMonth.DataSource = source;
DdlYearMonth.DataBind(); 
```

# java - 如何使用 Servlet 和 JSP 显示 PDF 文档？

> ID：13310271
> 
> 赞同：2
> 
> 时间：2012-11-09T14:51:22.823
> 
> 标签：java, jsp, pdf, servlets, oracle10g

我希望将 PDF 文档从数据库显示到浏览器，我希望浏览器打开它，但如果它提示下载它也可以。我知道这个问题已经在这里和其他论坛被问过，但我仍然没有完成这项任务。

我看过这些： [JSP n Servlets](https://stackoverflow.com/questions/4614935/how-do-i-display-a-pdf-file-using-servlets-and-jsp) [Display PDF via JSP n Servlet tutorial](http://balusc.blogspot.com/2007/07/fileservlet.html)

我当前的代码。

对象/实体：``

```
 public class Attach
   {
    private String filename = null;
    private InputStream attach = null;
    private int ContentLength = 0;

    public String getFilename() {

        return filename;
    }
    public void setFilename(String filename) {

        this.filename = filename;
    }
    public InputStream getAttach() {

        return attach;
    }
    public void setAttach(InputStream attach) {

        this.attach = attach;
    }

    public int getContentLength() {

        return ContentLength;
    }
    public void setContentLength(int contentLength) {

        ContentLength = contentLength;
    }

    public Attach() {

    }

    public Attach(String filename, InputStream attach) {
        this.attach = attach;
        this.filename = filename;
    }

    } 
```

从数据库中检索 PDF 的方法：

```
public Attach getPDFData(String filename) {

    try {
        pstmt = conn.prepareStatement("SELECT * FROM FUNC_AREA WHERE FILE_NME = ?");
        pstmt.setString(1, filename);
        rs = pstmt.executeQuery();
        if (rs.next()) {
            newattach.setFilename(rs.getString(3));
            newattach.setAttach(rs.getBinaryStream(5));
        }

    } catch (SQLException e) {
        e.printStackTrace();
    }
    return newattach;
} 
```

我的小服务程序：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        showAttach(request, response);
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        showAttach(request, response);
    }

    public void showAttach(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
         RepoOperations repops = new RepoOperations();
        Attach newattachobj = repops.getPDFData("bond.pdf");

        try {
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
            int inputStreamLength = 0;
            int length = 0;
            while ((length = newattachobj.getAttach().read(buffer)) > 0) {
                inputStreamLength += length;
                baos.write(buffer, 0, length);
            }

            if (inputStreamLength > newattachobj.getContentLength()) {
                newattachobj.setContentLength(inputStreamLength);
            }

            if (response instanceof HttpServletResponse) {
                HttpServletResponse httpResponse = (HttpServletResponse) response;
                httpResponse.reset();
                httpResponse.setHeader("Content-Type", "application/pdf");
                httpResponse.setHeader("Content-Length", String.valueOf(newattachobj.getContentLength()));
                httpResponse.setHeader("Content-Disposition", "inline; filename=\"" + newattachobj.getFilename() + "\"");
            }

            response.getOutputStream().write(baos.toByteArray(), 0, (int)newattachobj.getContentLength());

            //finally
            response.getOutputStream().flush();

            //clear
            baos = null;

            System.out.println(newattachobj.getFilename());
        } finally {
            // TODO Auto-generated catch block
            close(response.getOutputStream());
            close(newattachobj.getAttach());
        }

    }

    private void close(Closeable resource) throws IOException {
        if (resource != null) {
            resource.close();
        }
    } 
```

JSP：

```
 <form action="ShowAttach">
    <a href="ShowAttach">click here</a>
    <br/>
    <input type="submit" value="submit" id="submit">
    </form> 
```

*我希望在 JSP 页面上有一个超链接来打开 PDF 文档。*谢谢你

**问题是当我单击 JSP 页面上的按钮时，它给了我一个 404 错误。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T08:33:23.727

感谢大家。我设法解决了这个问题。我的锚在目录中没有找到 servlet。这是下面的修复

前：

```
<a href="ShowAttach">Open</a> 
```

后：

```
<a href="../ShowAttach">Open</a> 
```

谢谢。

# prolog - 序言中的列表

> ID：13310272
> 
> 赞同：0
> 
> 时间：2012-11-09T14:51:24.737
> 
> 标签：prolog

我正在编写以下代码并且工作正常。

```
edge(s,a,300,300/500 * 60, 300*1,plane).
edge(s,a,300,300/120 * 60, 300*3/4,train).
edge(s,a,300,300/80 * 60, 300*3/5,bus).
edge(s,a,300,300/100 * 60, 300*2/5,car).
edge(s,a,300,300/5 * 60, 300*0,walk).

edge(s,d,20,20/500 * 60, 20*1,plane).
edge(s,d,20,20/120 * 60, 20*3/4,train).
edge(s,d,20,20/80 * 60, 20*3/5,bus).
edge(s,d,20,20/100 * 60, 20*2/5,car).
edge(s,d,20,20/5 * 60, 20*0,walk).

edge(a,d,400,400/500 * 60, 400*1,plane).
edge(a,d,400,400/120 * 60, 400*3/4,train).
edge(a,d,400,400/80 * 60, 400*3/5,bus).
edge(a,d,400,400/100 * 60, 400*2/5,car).
edge(a,d,400,400/5 * 60, 400*0,walk).

edge(a,b,1500,1500/500 * 60, 1500*1, plane).
edge(a,b,1500,1500/120 * 60, 1500*3/4,train).
edge(a,b,1500,1500/80 * 60, 1500*3/5,bus).
edge(a,b,1500,1500/100 * 60,1500*2/5, car).
edge(a,b,1500,1500/5 * 60, 1500*0,walk).

edge(b,c,9,9/500 * 60, 9*1,plane).
edge(b,c,9,9/120 * 60, 9*3/4,train).
edge(b,c,9,9/80 * 60, 9*3/5,bus).
edge(b,c,9,9/100 * 60,9*2/5, car).
edge(b,c,9,9/5 * 60, 9*0,walk).

edge(b,e,200,200/500 * 60, 200*1, plane).
edge(b,e,200,200/120 * 60, 200*3/4,train).
edge(b,e,200,200/80 * 60, 200*3/5,bus).
edge(b,e,200,200/100 * 60, 200*2/5,car).
edge(b,e,200,200/5 * 60, 200*0,walk).

edge(c,d,2000,2000/500 * 60, 2000 * 1,plane).
edge(c,d,2000,2000/120 * 60, 2000 * 3/4,train).
edge(c,d,2000,2000/80 * 60, 2000 * 3/5,bus).
edge(c,d,2000,2000/100 * 60, 2000 * 2/5,car).
edge(c,d,2000,2000/5 * 60, 2000 * 0,walk). 

edge(c,g,12,12/500 * 60, 12 * 1,plane).
edge(c,g,12,12/120 * 60, 12 * 3/4,train).
edge(c,g,12,12/80 * 60, 12 * 3/5,bus).
edge(c,g,12,12/100 * 60, 12 * 2/5,car).
edge(c,g,12,12/5 * 60, 12 *0 ,walk).

edge(d,e,3,3/500 * 60, 3*  1,plane).
edge(d,e,3,3/120 * 60, 3 * 3/4,train).
edge(d,e,3,3/80 * 60, 3 * 3/5,bus).
edge(d,e,3,3/100 * 60, 3 * 2/5,car).
edge(d,e,3,3/5 * 60, 3 * 0,walk).

edge(e,f,400,400/500 * 60, 400 * 1,plane).
edge(e,f,400,400/120 * 60, 400 * 3/4,train).
edge(e,f,400,400/80 * 60, 400 * 3/5,bus).
edge(e,f,400,400/100 * 60, 400 * 2/5,car).
edge(e,f,400,400/5 * 60, 400 * 0,walk).

edge(f,g,800,800/500 * 60, 800 * 1,plane).
edge(f,g,800,800/120 * 60, 800 * 3/4,train).
edge(f,g,800,800/80 * 60, 800 * 3/5,bus).
edge(f,g,800,800/100 * 60, 800 * 2/5,car).
edge(f,g,800,800/5 * 60, 800 * 0,walk).

connected(X,Y,D,T,C) :- edge(X,Y,D,T,C,M) ; edge(Y,X,D,T,C,M).

path(A,B,D,T,C,Path) :- 
    travel(A,B,D,T,C,[A],Q), 
    reverse(Q,Path).

travel(A,B,D,T,C,P,[B|P]) :-
    connected(A,B,D,T,C).

travel(A,B,D,T,C,Visited,Path) :-
    connected(A,X,D1,T1,C1),
    X \== B,
    \+member(X,Visited),
    travel(X,B,D2,T2,C2,[X|Visited],Path),
    D is D1 + D2,
    T is T1 + T2,
    C is C1 + C2. 
```

我想知道所选路径的运输方式。

我无法将其添加到列表中。

所以，如果我像这样查询

```
| ? - path(s,e,D,T,C,P,M), T<3. 
```

给我一个对应于描述运输方式的每条路径的列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:59:28.970

`s`从图形数据来看，似乎有许多不同的方式可以从`e`.

通常*在*计算路径时使用图形数据，也是为了避免最终无用的解决方案。您的谓词`path`已经有很多参数，然后我展示了一个愚蠢的后搜索映射：假设您有一个类似 [a, b, c] 的路径，那么*所有*可用传输模式的列表都用

```
transport_mode([X,Y|R], [M|Ms]):-
   ( edge(X,Y,_,_,_,M) ; edge(Y,X,_,_,_,M) ),
   transport_mode([Y|R], Ms).
transport_mode([_], []). 
```

**编辑**如果你有库（[聚合](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.1%27,swi%28%27/doc/Manual/aggregate.html%27%29%29)）（在 SWI-Prolog 或 Yap 中可用），最小距离路径可以这样计算：

```
?- aggregate_all(min(D, P), (path(s,e,D,T,C,P), T < 3), Min). 
```

# php - 如何修复“警告：无法修改标头信息”错误？

> ID：13310274
> 
> 赞同：-4
> 
> 时间：2012-11-09T14:51:36.960
> 
> 标签：php, html, header, warnings

> **可能重复：**
> [PHP 修复警告：无法修改标头信息 - 标头已发送](https://stackoverflow.com/questions/4954435/php-fix-warning-cannot-modify-header-information-headers-already-sent)
> [“警告：标头已发送”在 PHP](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

我有一个运行良好的网站。第一页是 header.php，第一行是：

```
<?xml version="1.0" encoding="utf-8"?> 
```

然后有一天它开始说解析错误第1行。所以我在网上做了一些研究并将第一行改为：

```
<?php echo '<?xml version="1.0" encoding="utf-8"?>' ?> 
```

解析错误问题消失了。但随后又出现了一个问题：

```
Warning: Cannot modify header information - headers already sent by (output started at /Volumes/raid/Web/Sites/*******.com/header.php:1) 
```

所以我决定从代码中删除第一行（老实说，我不知道它的目的是什么）。然后出现了一个新错误：

```
Warning: Cannot modify header information - headers already sent by (output started at /Volumes/raid/Web/Sites/*******.com/header.php:25) 
```

这是我找不到任何错误的代码（当然，行尾没有空格）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1  /DTD/xhtml1-transitional.dtd">
<html lang="fr" dir="ltr" xml:lang="fr" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link type="image/x-icon" href="./img/lions_icon" rel="icon">
    <link type="image/x-icon" href="./img/lions_icon" rel="shortcut icon">
    <link href="/css/jquery.ui.all.css" rel="stylesheet">
    <title>Lions</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <script src="/js/jquery.js"></script>
    <script src="/js/jquery-1.8.2.js"></script>
    <script src="/js/jquery.ui.core.js"></script>
    <script src="/js/jquery.ui.widget.js"></script>
    <script src="/js/jquery.ui.datepicker.js"></script>
    <script src="/js/bootstrap.js"></script>
    <script>
     $(function() {
      $( "#date" ).datepicker();
      $( "#date" ).datepicker( "option", "dateFormat", "yy-mm-dd");
      });
   </script>
</head>
<?php
 // beggining of the php code,
 ....
?>
<body>
... 
```

第 25 行是 php 开始的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:55:52.203

完成任何操作后，您无法发送标头。如果您将使用的标题函数放在第 1 行，问题就解决了；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:55:54.123

那么问题是您在执行之前已经将数据发送到浏览器

```
 <?php echo '<?xml version="1.0" encoding="utf-8"?>' ?> 
```

您可能会收到 E_NOTICE 或 E_WARNING。您是否尝试过激活错误报告？

```
 error_reporting(-1); ini_set('display_errors', 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:56:51.400

错误在 php 标签内，可能您使用了 Header Location 之类的东西。在html中没有错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:54:41.937

`header()`如果您在该代码之前输出任何内容，则您正在使用的代码中的某处将返回该错误。`<?php`另外，请确保您在发送之前和之后没有空格，`?>`这将导致页面在发送之前将空间重新设置为 html`header();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T14:58:38.713

（如果您使用 php 框架 == true）
{
这种情况可能存在，当您在控制器中有一些输出（例如示例 echo）时。
}

# css - ASP.NET MVC4 捆绑 CSS 一些在 CDN 上，一些在服务器本地？

> ID：13310278
> 
> 赞同：11
> 
> 时间：2012-11-09T14:51:56.717
> 
> 标签：css, asp.net-mvc-4, cdn, asp.net-optimization, bundling-and-minification

我正在研究**ASP.NET MVC4 System.Web.Optimization 捆绑包**，想知道您将如何从**CDN**和服务器**本地提供一些****CSS 文件**？

 ****那可能吗？

看起来**bundles.UseCdn = true**处于集合级别，而不是单个捆绑包的设置。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-09T14:57:29.467

[ASP.NET 站点有一些](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)关于此的信息：

> 以下代码将本地 jQuery 包替换为 CDN jQuery 包。

```
public static void RegisterBundles(BundleCollection bundles)
{
    //bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
    //            "~/Scripts/jquery-{version}.js"));

    bundles.UseCdn = true;   //enable CDN support

    //add link to jquery on the CDN
    var jqueryCdnPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js";

    bundles.Add(new ScriptBundle("~/bundles/jquery",
                jqueryCdnPath).Include(
                "~/Scripts/jquery-{version}.js"));

    // Code removed for clarity.
} 
```

> 在上面的代码中，在发布模式下会从 CDN 请求 jQuery，并且在调试模式下会在本地获取 jQuery 的调试版本。使用 CDN 时，您应该有一个回退机制，以防 CDN 请求失败。布局文件末尾的以下标记片段显示了在 CDN 失败时添加到请求 jQuery 的脚本。

就个人而言，我发现自己不会从 jQuery、Knockout 或任何其他库中调试代码。我总是在我的布局中直接引用 CDN 资源。我需要自己滚动的任何脚本，然后我使用 MVC 框架捆绑。

我的网站通常看起来像这样：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
@Scripts.Render("~/content/js/siteName") 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T18:49:41.847

正确，目前唯一的 CDN 支持是在每个捆绑包级别上，您不能拥有包含来自 CDN 和一些本地资产的捆绑包。基本上它是或者：你可以让包使用 CDN 并回退到本地服务器的包，或者整个包必须在 CDN 上。

更新：但澄清一下，您可以在 CDN 上拥有一些捆绑包，在本地拥有一些捆绑包。这由捆绑实例上的 CdnPath 控制。基本上，如果单个捆绑包上没有设置 CdnPath，它将始终在本地提供。****

# java - 如何在Java中实际关闭一个窗口？

> ID：13310282
> 
> 赞同：0
> 
> 时间：2012-11-09T14:52:08.200
> 
> 标签：java, swing, awt, frame, dispose

我需要关闭一个`JFrame`窗口，以便下一次访问它的调用被捕获`NullPointerException`。我试过`frame.dispose()`了，但是它没有用，每当我尝试时，我都会返回那个窗口`frame.setVisible(true)`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:54:17.540

我建议您重新评估您的程序逻辑，因为您宁愿看到 a`NullPointerException`而不是仅仅*知道*您的代码不会尝试使应该死的框架可见，这似乎很奇怪。

无论如何，您可以简单地设置您的`JFrame`实例`null`以确保它不会再次可见。这肯定会给你你想要的例外。

*请记住，a`NullPointerException`应该保留用于指示编程错误，通常是违反 API 合同。不要用它们来控制程序流程，也不要设计一个故意触发它们的程序。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:54:41.547

```
 Frame.dispose() or setVisible(false) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T14:54:46.737

当用户按下“X 按钮”时？在这种情况下使用

```
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:55:01.930

```
frame.dispose();
frame = null; 
```

# objective-c - Objective-C 对象可以是它自己的委托吗？这是良好的编程习惯吗？

> ID：13310287
> 
> 赞同：3
> 
> 时间：2012-11-09T14:52:22.723
> 
> 标签：objective-c, ios, cocoa, delegates

我知道这是可能的，但这真的是一种好的编程习惯吗？这个想法是将自己子类化`UIAlertView`并订阅为我自己的委托，以便能够添加按钮和块处理程序。这样，当我得到时，`alertView:clickedButtonAtIndex:`我调用传递的块。

我希望这是可以理解的。这是一个好的编程习惯吗？

**更新：**这是我对[https://github.com/ianmurrays/IMAlertView](https://github.com/ianmurrays/IMAlertView)提出的问题的想法。任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:58:49.307

是的，你是对的，任何类或对象都可以是任何其他的委托，甚至是它自己。但我会说**这不是一个好习惯**。您可以创建其他类并将其委托给其他类。它将工作实现分叉并保持可读性。将来您可以用更少的劳动力更新您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:55:13.700

您可以创建一个类别以将块行为添加到`UIAlertView`. 你可以检查一下[这个](https://github.com/jivadevoe/UIAlertView-Blocks)。

# android - android软键盘可以启动其他输入法吗

> ID：13310293
> 
> 赞同：1
> 
> 时间：2012-11-09T14:52:37.647
> 
> 标签：android

我考虑过为 android 实现一种元软键盘，它首先检查是否连接了物理键盘（在我的情况下，一个扩展坞，但蓝牙 kbds 也应该是可能的），如果没有，则启动一个特定的其他软键盘.

所以：

*   有没有办法使用 android API 获取所有已安装键盘的列表？
    **/edit**：这似乎可以使用[InputMethodManager](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html)
*   然后我可以调用其中一个特定的键盘吗？
*   如果没有 API 解决方案，是否可以在有根手机/平板电脑上完成？
*   或者我是否必须实现我自己的全键盘解决方案（或者可能分叉/改进现有的开源解决方案），当连接物理 kbd 时不会弹出）？

对于那些有类似问题的人：到目前为止，我发现的最佳解决方案是使用[NULL 键盘](https://play.google.com/store/apps/details?id=com.wparam.nullkeyboard)和[Dock 键盘切换器](https://play.google.com/store/apps/details?id=ru.gelin.android.keyboard)应用程序。但是 NULL 键盘目前只支持英文布局，并且不断的键盘切换器弹出窗口有点烦人......（IMO每次出现时隐藏键盘几乎更容易）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:32:29.733

似乎可以通过[`public boolean switchToNextInputMethod (IBinder imeToken, boolean onlyCurrentIme)`](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html#switchToNextInputMethod%28android.os.IBinder,%20boolean%29)，但我不知道它是永久切换还是只切换一次，并且此方法仅在 Jelly Bean 中添加。

# azure - 插入带有尾随空格的字符串时，10 月 Azure SDK 损坏

> ID：13310296
> 
> 赞同：4
> 
> 时间：2012-11-09T14:52:48.590
> 
> 标签：azure, azure-storage, azure-table-storage

有没有人解决这个问题。使用存储模拟器并将行插入表存储时，如果字段末尾有空格，则行插入将失败。

两周前就指出了这一点，但我仍然没有看到微软对此的更新？有谁知道修复？

[微软论坛链接](http://social.msdn.microsoft.com/Forums/nb-NO/windowsazuredevelopment/thread/94ae4da7-8989-46a7-a258-004e6410c6b0)

[堆栈溢出链接](https://stackoverflow.com/questions/13104874/table-storage-emulator-insert-fails-with-one-of-the-request-inputs-is-not-val)

请不要关闭这个问题。在 Stackoverflow 上找到一些东西可能有助于将某人从我花了两天时间试图找出问题所在中解救出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T00:24:01.573

此问题已在更高版本的 Windows Azure SDK 中得到修复。安装最新版本以解决问题。 [http://www.windowsazure.com/en-us/downloads/](http://www.windowsazure.com/en-us/downloads/)

# mongodb - 学说mongo组查询

> ID：13310300
> 
> 赞同：2
> 
> 时间：2012-11-09T14:52:59.813
> 
> 标签：mongodb, doctrine

我在使用学说 mongo db 实现 groupBy 时遇到问题。

我遵循了这两个指南：

[http://cookbook.mongodb.org/patterns/unique_items_map_reduce/](http://cookbook.mongodb.org/patterns/unique_items_map_reduce/)

[http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html)

确切地说，我想让这个 groupBy：“select * from fonts where 1 group by family”

这是我的代码不起作用：

```
$queryBuilder = $this->createQueryBuilder();
$queryBuilder->group(array('family'), array('count' => 0));
$queryBuilder->reduce('function (obj, prev) { prev.count++; }');
$queryBuilder->sort($sort, $order);
return $queryBuilder; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-11T12:53:26.980

聚合框架提供了一种处理记录和返回计算结果的简单方法。

比如我们的文档是这样的。

```
class Example
{
/**
  * @MongoDB\Field(type="int")
  */
 protected $noExample;

 /**
  * @MongoDB\Field(type="string")
  */
 protected $libelle;

 /**
  * @MongoDB\Field(type="string")
  */
 protected $family;

} 
```

在 ExampleRepository 中，我们需要创建这个函数。

```
public function groupByFamily()
{

$qb = $this->createAggregationBuilder('Document\Example');

    $qb->group()
       ->field('id')
       ->expression('$family')
       ->field('noExample')
       ->first('$noExample')
       ->field('libelle')
       ->first('$libelle')
       ->field('family')
       ->first('$family')
       ->field('number_record')
       ->sum(1);

    $results = $qb->execute();
    return $results;
} 
```

你可以[阅读更多](https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/1.2/reference/aggregation-builder.html#creating-an-aggregation-builder)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-21T08:17:25.043

你可以试试：

```
$queryBuilder = $this->createQueryBuilder();
$queryBuilder->group(array('family' => 1), array('count' => 0));
$queryBuilder->reduce('function (obj, prev) { prev.count += 1;}');
$queryBuilder->sort($sort, $order);
return $queryBuilder; 
```

# html - HTML 对象嵌入音量

> ID：13310310
> 
> 赞同：0
> 
> 时间：2012-11-09T14:53:20.993
> 
> 标签：html, object, audio, embed, volume

我不知道为什么，但是 VOLUME attr 不起作用。它可以是 0 或 100 我听不出任何区别。

```
<object>
    <param name="autostart" value="true">
    <param name="src" value="scream14.wav">
    <param name="autoplay" value="true">
    <param name="controller" value="true">
    <embed src="scream14.wav" volume="0" hidden="true" controller="true" autoplay="true" autostart="true" type="audio/wav" loop="false"/>
</object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:47:50.427

我测试了代码，它运行正常

# php - PHP的无限while循环问题

> ID：13310316
> 
> 赞同：1
> 
> 时间：2012-11-09T14:53:33.200
> 
> 标签：php, loops, while-loop, infinite

我在两个页面上使用相同的 while 循环，唯一的区别是每个页面上的 SQL 调用不同。第一个可以正常工作，从查询中获取内容并将其显示在图像滑块中：

```
 <?php

            $qry = mysql_query(sprintf("SELECT * FROM manageme WHERE element IN ('%s')", $element));
            $i = 0;
            while (($t = mysql_fetch_array($qry)) != null && $i < 52) { $i++;?>
                <li>

                    <a href="">                                                           
                        <img src="<?php print $t['fileLocation']; ?>"; 
                        title="<?php print $t['element_name']; ?>"; 
                        name="<?php print $t['clickLocation']; ?>";
                        alt="wat" 
                        class="btnshow" />
                    </a>
                </li>
<?php } ?> 
```

只要返回的条目少于 52 个，它就应该逐步遍历循环并从查询中获取内容，并在每条记录显示一次时结束。

在使用不同的 SQL 调用实现相同的 while 循环时，就会出现问题。

```
 <?php

$qry = mysql_query(sprintf("SELECT u.username, us.user_id, us.service_id,
                                        s.imageID, s.title, s.clickLocation, s.fileLocation, s.element_name
                                        FROM user u, user_service us, manageme s
                                        WHERE us.user_id = %s
                                        AND s.imageID = us.service_id", $_COOKIE['user_id']));
            $i = 0;
            while (($t = mysql_fetch_array($qry)) != null && $i < 52) { $i++;?>
                <li>

                    <a href="">                                                           
                        <img src="<?php print $t['fileLocation']; ?>"; 
                        title="<?php print $t['element_name']; ?>"; 
                        name="<?php print $t['clickLocation']; ?>";
                        alt="wat" 
                        class="btnshow" />
                    </a>
                </li>
<?php } ?> 
```

当内容显示一次时，它不会从数组中抓取并结束 while 循环，而是继续循环图像滑块中的内容，直到显示 52 个条目。因此，例如，如果 SQL 调用仅找到要在图像滑块中显示的 4 条记录，则在结束循环之前，这 4 条记录会显示 13 次 (52/4)。

任何人都可以帮助我弄清楚如何在它显示我的数据库中的每条记录一次且仅一次之后结束这个循环吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:01:19.300

尝试添加`LIMIT 52`到您的查询中，并执行 while 循环，

```
 while ($t = mysql_fetch_array($qry)) {
  //do something
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:58:31.420

主要问题：

1）易受[SQL注入攻击](http://bobby-tables.com)。享受让您的服务器被摧毁。

2）术语：您不是从“数组”中获取。您正在从结果集中获取一行数据，并将该行作为数组返回。

3) 即使您在 while() 条件中使用了一些丑陋的语法，您的循环也应该在 52 条记录或没有更多记录可用后终止。检查您的查询实际上是否按照您期望的顺序/格式获取正确的记录。您的代码中没有任何内容会导致 PHP 输出“重复”行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:58:41.040

用于`mysql_num_rows($qry)`终止循环，除了`< 52`

就像是：

```
 (($t = mysql_fetch_array($qry)) != null && ($i < mysql_num_rows($qry) || $i < 52)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:59:50.847

[从手册](http://php.net/manual/en/function.mysql-fetch-array.php)看来，您的调用似乎`mysql_fetch_array($qry)`永远不会返回 null。在结果集结束时，您将获得`false`回报。如果您更改条件以检查这一点，您应该能够终止循环

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T15:00:05.707

摆脱`$i < 52`支票。而是添加`LIMIT 52`到 SQL 查询的末尾。然后将while循环更改为：

```
while ($t = mysql_fetch_array($qry)) {
....
} 
```

# javascript - 使用来自 ASP.NET 或 Javascript 的 Web API

> ID：13310320
> 
> 赞同：0
> 
> 时间：2012-11-09T14:53:42.770
> 
> 标签：javascript, asp.net, asp.net-web-api

我一直在考虑将 Web API 用于我正在开发的新产品；初始版本将是一个 Web 应用程序，随后是移动/平板电脑应用程序，因此 Web API 路由似乎是一个不错的选择。

我已经阅读了很多关于使用加密和 SSL 保护 Web API 的内容，但是我不太清楚的一件事是从哪里调用 Web API。

如果我使用私有密码术来创建身份验证令牌，使用 ASP.NET 利用 HttpClient 等创建 HTTP 请求似乎是有意义的，因为 Web 服务器将具有私有加密密钥，因此 Web API 将具有相应的私有key 将知道请求来自网站。

这很有意义，因为移动/桌面应用程序将有一个单独的键等。

听起来很傻，但在我看来，浏览器客户端无法进行加密，因为私钥对用户来说相对容易可见，他们可以获取该密钥并在其他地方使用它，（移动/平板电脑客户端将能够做到加密，因为可以嵌入密钥）。

很公平，但是如果我发回我的网络服务器进行加密，我实际上是在将我的请求的详细信息发送到未加密的服务器，所以有人可以将请求发送到网络服务器，更改它服务器将加密并将更改发送到 Web API。

有没有办法在不泄露密钥的情况下从客户端（javascript）发送加密的 Web API 请求？我对服务器请求是否正确？SSL 会解决这个问题吗？

我想我对所有关于保护 Web API 的信息有点困惑，欢迎任何澄清！

# windows-phone-8 - SQL 合并复制

> ID：13310324
> 
> 赞同：1
> 
> 时间：2012-11-09T14:54:03.983
> 
> 标签：windows-phone-8

在 Windows Phone 8 中是否可以进行 SQL 合并复制？

有没有关于这个主题的资源，我的 google-fu 让我失望了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T23:18:17.340

很不幸的是，不行。repl 库在 Windows Phone 7 或 8 上不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:48:25.617

这篇关于 dzone 的文章从 2 月开始表明这是可能的：

> (SQL Server Compact) 版本 3.5 SP2 的最新版本完全支持与 SQL Server 2012 的合并复制...在 Windows Phone 上，版本 3.5 还不错，当然也将包含在即将推出的 Windows 中电话 8 平台。

[http://mobile.dzone.com/articles/sql-server-ce-database](http://mobile.dzone.com/articles/sql-server-ce-database)

在一般资源方面，写上面文章的 SQL Server Compact MVP 有一个博客可能会感兴趣：

*   [一切 SQL Server 紧凑型](http://erikej.blogspot.co.uk/)

# php - yii - post fitler 和重定向不返回正确的控制器/动作对

> ID：13310325
> 
> 赞同：0
> 
> 时间：2012-11-09T14:54:08.740
> 
> 标签：php, yii, url-redirection, yii-filters

我有一个可以在我所有的控制器上运行的过滤器。`preFilter`我有：

```
protected function preFilter($filterChain){
        Yii::app()->params->controller = Yii::app()->controller->id;
        Yii::app()->params->action = Yii::app()->controller->action->id;
        return true;
    } 
```

在`postFilter`我有：

```
protected function postFilter($filterChain){
    $this->controllerName = Yii::app()->params->controller ;
    $this->actionName = Yii::app()->params->action;
    $this->CheckTrigger();
    return true;
} 
```

该函数`CheckTrigger()`指`Yii::app()->params->controller`和`Yii::app()->params->controller`。

所以这就是问题所在。如果我的操作中有重定向，这会刹车。如果我注释掉我的重定向，它会再次开始工作。似乎在调用重定向时，还会调用 Pre 和 Post 过滤器操作，但在启动重定向之前从未调用过 Post 过滤器。有没有办法确保在重定向之前调用 post 过滤器？我在这里错过了什么吗？

非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:21:18.967

在您的控制器操作中尝试此重定向代码：

```
$this->redirect('url here', false); 
```

# arrays - Symfony2 实体到数组

> ID：13310329
> 
> 赞同：0
> 
> 时间：2012-11-09T14:54:24.717
> 
> 标签：arrays, forms, symfony, entity

我正在尝试将我的平面 php 项目迁移到 Symfony2，但它变得非常困难。例如，我有一个 Products 规范表，它有几个规范，并且可以通过 Extraspecs DB 表中的“cat”属性来区分。因此，我为该表创建了一个实体，并希望创建一个仅包含“cat”= 0 的规范的数组......

我想代码是这个..对吗？

```
$typeavailable = $this->getDoctrine()
        ->getRepository('LabsCatalogBundle:ProductExtraspecsSpecs')
        ->findBy(array('cat' => '0')); 
```

现在我怎样才能把它放在一个数组中以使用这样的表单？：

```
form = $this ->createFormBuilder($product)
->add('specs', 'choice', array('choices' => $typeavailableArray), 'multiple' => true) 
```

先感谢您 ：）

#

谢谢你们..

但现在我遇到了另一个问题。事实上，我正在从现有对象构建一个表单：

```
$form = $this ->createFormBuilder($product)
                ->add('name', 'text')
                ->add('genspec', 'choice', array('choices' => array('0' => 'None', '1' => 'General', '2' => 'Specific')))
                ->add('isReg', 'choice', array('choices' => array('0' => 'Material', '1' => 'Reagent', '2' => 'Antibody', '3' => 'Growth Factors', '4' => 'Rodents', '5' => 'Lagomorphs'))) 
```

所以..在那种情况下，我的当前值被命名为“extraspecs”，所以我添加了这样的：

```
->add('extraspecs', 'entity', array(
                        'label'          => 'desc',
                        'empty_value'    => ' --- ',
                        'class'          => 'LabsCatalogBundle:ProductExtraspecsSpecs',
                        'property'       => 'specsid',
                        'query_builder'  => function(EntityRepository $er) {
                            return $er ->createQueryBuilder('e'); 
```

但是“额外规格”来自 oneToMany 的关系，其中每个产品都有几个额外规格......

这是ORM：

```
Labs\CatalogBundle\Entity\Product:
    type: entity
    table: orders__regmat
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:
        name:
            type: string
            length: 100
        catnumber:
            type: string
            scale: 100
        brand:
            type: integer
            scale: 10
        company:
            type: integer
            scale: 10
        size:
            type: decimal
            scale: 10
        units:
            type: integer
            scale: 10
        price:
            type: decimal
            scale: 10
        reqcert:
            type: integer
            scale: 1
        isReg:
            type: integer
            scale: 1
        genspec:
            type: integer
            scale: 1

    oneToMany:
        extraspecs:
            targetEntity: ProductExtraspecs
            mappedBy: product

Labs\CatalogBundle\Entity\ProductExtraspecs:
    type: entity
    table: orders__regmat__extraspecs

    fields:
        extraspecid:
            id: true
            type: integer
            unsigned: false
            nullable: false
            generator:
                strategy: IDENTITY
        regmatid:
            type: integer
            scale: 11
        spec:
            type: integer
            scale: 11
        attrib:
            type: string
            length: 20
        value:
            type: string
            length: 200

    lifecycleCallbacks: {  }

    manyToOne:
      product:
        targetEntity: Product
        inversedBy: extraspecs
        joinColumn:
            name: regmatid
            referencedColumnName: id 
```

我该怎么做？

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:58:28.127

从数据库返回的值已经在一个数组中。

您可以使用[实体字段类型](http://symfony.com/doc/current/reference/forms/types/entity.html)来创建您想要的表单。
这是它的工作原理：

```
$form = $this->createFormBuilder($product)
    ->add('specs', 'entity', array(
        'class' => 'LabsCatalogBundle:ProductExtraspecsSpecs',
        'choices' => $typeavailable,
        'property' => 'specsid',
        'multiple' => true,
    ))->getForm(); 
```

替换`property`要在表单中显示的目标实体 (ProductExtraspecsSpecs) 中字段的属性。

如果您仍有不清楚的地方，请询问，我会尽力提供更多信息。

要选择当前对象，请执行以下操作：
在控制器中：`$selected = $product->getExtraspecs();`

在表单生成器中：

```
$form = $this->createFormBuilder($product)
    ...
    ->add('specs', 'entity', array(
        'data' => $selected,
        ...
    ))->getForm(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:57:59.427

您可以直接在`formBuilder`使用小部件中请求对象`entity`。以下示例显示了一些基本属性，其中：

*   `label`很明显
*   `empty_value`也很明显
*   `class`是您要从中选择的完全合格的实体
*   `property`是列表中显示的类成员（用户看到的）
*   `data`是当前选择的一个，如果你有一个教义关系（比如*OneToMany*）
*   `query_builder`最后让您指定应在列表中显示哪些元素的选择（在您的示例中为“其中 cat 为 0”）

总之，你得到这个：

```
$builder ->add('entity', 'entity', array(
            'label'          => 'Choose from this list',
            'empty_value'    => 'This is a blank value on top of the list',
            'class'          => 'VendorNameBundle:Entity',
            'property'       => 'name',
            'data'           => $currentObject->getEntity(),
            'query_builder'  => function(EntityRepository $er) {
                return $er ->createQueryBuilder('e')
                           ->groupBy('e.id')
                           ->orderBy('e.name', 'ASC');
        }
)); 
```

你可以在这里读更多关于它的内容：

[实体字段类型](http://symfony.com/doc/current/reference/forms/types/entity.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:56:58.380

您可以使用[Serializer 组件](http://symfony.com/doc/master/components/serializer.html)将您的 Doctrine 实体转换为数组。

# php - 开源文档软件

> ID：13310332
> 
> 赞同：0
> 
> 时间：2012-11-09T14:54:33.640
> 
> 标签：php

我正在寻找一些我可以使用的文档软件......嗯，基本上。添加我自己的 PHP 代码片段、教程和东西。

以前看过一个，不过想不起来名字了。所以我确实知道它们存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:14:21.360

[您可以尝试一个 wiki，当他们在大学的某个主题上使用MediaWiki](http://www.mediawiki.org/wiki/MediaWiki)时，我一直是它的用户，并且已经足够好了。如果你不想安装，你可以简单地使用[github](https://github.com/)，它会给你一个软件存储库和你正在寻找的其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:54:25.937

试试[Doxygen](http://www.doxygen.org)，它是开源的，有很好的文档，有几个教程，使用起来非常简单。你用“JavaDoc”风格记录你的代码，通过 Doxygen 运行你的代码，你会得到一个很好的 HTML 或 PDF 手册，包含你所有的类、方法或注释。

# jquery - jQuery“对象函数（e，t）{return new v.fn.init（e，t，n）}没有方法'on'”

> ID：13310341
> 
> 赞同：1
> 
> 时间：2012-11-09T14:54:52.953
> 
> 标签：jquery, coffeescript, ruby-on-rails-3.2

我正在按照[@coreyward](https://stackoverflow.com/users/203130/coreyward)的示例将对象编辑表单放入Rails 的模式对话框窗口中，该示例[在此答案中进行了概述，](https://stackoverflow.com/a/5766232/306084)并[在此要点中针对rails 3.1 进行了更新](https://gist.github.com/1456815)。

我正在使用 Rails 3.2.8 和 jQuery-Rails 2.1.3（jQuery 1.8.2 是应用程序中加载的内容）。然而，这个来自要点的咖啡脚本在第 7 行（就在评论之后）的标题中提出了错误。

```
$ ->
  $modal = $('#modal')
  $modal_close = $modal.find('.close')
  $modal_container = $('#modal-container')

  # Handle modal links with the data-remote attribute
  $.on 'ajax:success', 'a[data-remote]', (xhr, data, status) ->
    $modal
      .html(data)
      .prepend($modal_close)
      .css('top', $(window).scrollTop() + 40)
      .show()
    $modal_container.show();

  $.on 'click', '#modal .close', ->
    $modal_container.hide()
    $modal.hide()
    false 
```

对[这个问题](https://stackoverflow.com/q/12468797/306084)的评论让我觉得这可能是一个 jQuery 版本问题，这就是为什么我检查了我的 jQuery 版本，但显然这个 jQuery 没有解决这个问题的那个旧。我还验证了 jQuery 是在此脚本之前加载的（或者至少，它在加载顺序中位于此脚本之上）。

我将上面的咖啡脚本放入[一个演示问题的小提琴中](http://jsfiddle.net/pjmorse/Mq8me/1/)（有关错误，请参见您的控制台）。（这也让我认为这不是我的设置的问题。）我会尝试不同版本的 jQuery 看看他们是否解决了它，但也许代码只是不稳定？我不太了解咖啡脚本，无法看到对其他人来说可能很明显的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:59:34.640

Replacing `$.on` by `$(document).on` removes the errors ... The `on` method needs to be called on a DOM element from what I can tell, never saw it called on the jQuery root object before...

# python - Numpy ValueError：使用序列设置数组元素。此消息可能会在不存在序列的情况下出现？

> ID：13310347
> 
> 赞同：35
> 
> 时间：2012-11-09T14:55:05.820
> 
> 标签：python, arrays, numpy, element

为什么我会收到此错误消息？ValueError：使用序列设置数组元素。谢谢

```
Z=np.array([1.0,1.0,1.0,1.0])  

def func(TempLake,Z):
    A=TempLake
    B=Z
    return A*B

Nlayers=Z.size
N=3
TempLake=np.zeros((N+1,Nlayers))

kOUT=np.zeros(N+1)
for i in xrange(N):
    kOUT[i]=func(TempLake[i],Z) 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-09T16:26:34.150

您收到错误消息

```
ValueError: setting an array element with a sequence. 
```

因为您正在尝试使用序列设置数组元素。我不是想变得可爱，那里 - 错误消息试图告诉你确切的问题是什么。不要认为它是一个神秘的错误，它只是一个短语。哪条线给出了问题？

```
kOUT[i]=func(TempLake[i],Z) 
```

此行尝试将`ith`元素设置`kOUT`为任何`func(TempLAke[i], Z)`返回值。看`i=0`案例：

```
In [39]: kOUT[0]
Out[39]: 0.0

In [40]: func(TempLake[0], Z)
Out[40]: array([ 0.,  0.,  0.,  0.]) 
```

您正在尝试加载一个`kOUT[0]`只有一个浮点数的 4 元素数组。因此，您尝试`kOUT[i]`使用序列（右侧， ）设置数组元素（左侧，`func(TempLake[i], Z)`）。

可能`func`没有做你想做的事，但我不确定你真正想要它做什么（别忘了你通常可以使用像 A*B 这样的矢量化操作，而不是在 numpy 中循环。）这应该可以解释问题， 反正。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-08-24T04:34:11.457

可惜这两个答案都分析了问题，但没有给出直接的答案。让我们看看代码。

```
Z = np.array([1.0, 1.0, 1.0, 1.0])  

def func(TempLake, Z):
    A = TempLake
    B = Z
    return A * B
Nlayers = Z.size
N = 3
TempLake = np.zeros((N+1, Nlayers))
kOUT = np.zeros(N + 1)

for i in xrange(N):
    # store the i-th result of
    # function "func" in i-th item in kOUT
    kOUT[i] = func(TempLake[i], Z) 
```

该错误表明您将 kOUT(dtype:int) 的第 i 项设置为数组。这里 kOUT 中的每个项目都是一个 int，不能直接分配给另一个数据类型。因此，您应该在创建 kOUT 时声明它的数据类型。例如，像：

更改以下语句：

```
kOUT = np.zeros(N + 1) 
```

进入：

```
kOUT = np.zeros(N + 1, dtype=object) 
```

或者：

```
kOUT = np.zeros((N + 1, N + 1)) 
```

所有代码：

```
import numpy as np
Z = np.array([1.0, 1.0, 1.0, 1.0])

def func(TempLake, Z):
    A = TempLake
    B = Z
    return A * B

Nlayers = Z.size
N = 3
TempLake = np.zeros((N + 1, Nlayers))

kOUT = np.zeros(N + 1, dtype=object)
for i in xrange(N):
    kOUT[i] = func(TempLake[i], Z) 
```

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-26T00:18:59.907

我相信 python 数组只是承认值。所以将其转换为列表：

```
kOUT = np.zeros(N+1)
kOUT = kOUT.tolist() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-09T17:54:45.693

```
Z=np.array([1.0,1.0,1.0,1.0])  

def func(TempLake,Z):
    A=TempLake
    B=Z
    return A*B
Nlayers=Z.size
N=3
TempLake=np.zeros((N+1,Nlayers))
kOUT=np.vectorize(func)(TempLake,Z) 
```

这也有效，而不是循环，只是矢量化但是请阅读 scipy 文档中的以下注释：[https ://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html](https://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html)

提供矢量化功能主要是为了方便，而不是为了性能。该实现本质上是一个 for 循环。

如果未指定 otypes，则使用第一个参数调用函数来确定输出的数量。如果缓存为 True，则此调用的结果将被缓存，以防止调用该函数两次。但是，要实现缓存，必须将原始函数包装起来，这会减慢后续调用的速度，所以只有在你的函数很昂贵时才这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-21T06:33:55.567

要将序列或另一个 numpy 数组放入 numpy 数组中，只需更改此行：

```
kOUT=np.zeros(N+1) 
```

到：

```
kOUT=np.asarray([None]*(N+1)) 
```

或者：

```
kOUT=np.zeros((N+1), object) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-06-16T09:39:58.280

KOUT[i] 是列表的单个元素。但是您正在为该元素分配一个列表。您的 func 正在生成一个列表。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-05-09T07:29:28.570

您可以尝试 中的`expand`选项`Series.str.split('seperator', expand=True)`。
默认情况下`expand`是`False`.

> `expand`: *bool* , default`False`
> 将拆分后的字符串展开成单独的列。
> 
> *   如果`True`，则返回 DataFrame/MultiIndex 扩展维度。
> *   如果`False`，则返回包含字符串列表的系列/索引。

# java - JSF 1.2 - 无法找到组件 (...) 我们将尝试返回一个猜测的客户端 ID

> ID：13310349
> 
> 赞同：0
> 
> 时间：2012-11-09T14:55:08.423
> 
> 标签：java, jsf, richfaces, jsf-1.2, tomahawk

首先，我在 JSF 1.2 / Richfaces 3.3 / Tomahawk 1.1.9 下工作。

我在一个 JSF 页面中有这段代码（简化）：

```
<h:form id="mainForm">
(...)
<h:panelGroup id="grupSelMalaltia">
    <rich:panel header="Panel Name">
        <t:subform id="selMalaltiesForm">

            <rich:dataTable align="center" id="dataSelMalalties" value="#{TaulaMalalties.listMalalties}" var="cMal">

                (some <rich:column>)

                <rich:column>
                    <t:commandLink actionFor="selMalaltiesForm" action="select_malaltia">
                        <f:param name="has_selection" value="true">
                        <h:graphicImage url="/Icons/select.png" />
                    </t:commandLink>
                </rich:column>
            </rich:dataTable>

        </t:subform>
    </rich:panel>
</h:panelGroup>
<h:form> 
```

我收到此错误：

`INFO: Unable to find component 'selMalaltiaForm' (calling findComponent on component 'mainForm:selMalaltiesForm:dataSelMalalties:0:j_id_jsp_2136723630_43'). We'll try to return a guessed client-id anyways - this will be a problem if you put the referenced component onto a different naming-contaier. If this is the case you can always use the full client-id.`

当按下按钮时，我只想提交这个子表单（我有其他 JSF 页面，它们运行类似的代码没有问题）。目前，由于这个问题，我没有得到这个结果。

我该如何解决这个故障？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:02:40.093

最好使用 a`<a4j:commandLink>`并将`process`tag 属性设置为您想要/需要处理的组件的 ID。

根据您提出的 JSF 代码，可以这样完成

```
<rich:panel header="Panel Name">
    <rich:dataTable align="center" id="dataUnselMalalties"
        value="#{TaulaMalalties.listMalalties}" var="cMal">
        <!-- richfaces columns with info -->
        <rich:column>
            <!-- processing the datatable only -->
            <a4j:commandLink action="#{TaulaMalalties.select_malaltia}"
                process="dataUnselMalalties" limitToList="true">
                <f:param name="has_selection" value="true">
                <h:graphicImage url="/Icons/select.png" />
            </a4j:commandLink>
        </rich:column>
    </rich:dataTable>
</rich:panel> 
```

有关此的更多信息：

*   [RichFaces 3.3：5.7.4。决定处理什么](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/ArchitectureOverview.html#process)

# c# - .Net CF 中的 String.Split 换行符

> ID：13310351
> 
> 赞同：1
> 
> 时间：2012-11-09T14:55:21.267
> 
> 标签：c#, string, compact-framework

我一直试图在 .NET CF 中拆分字符串，但没有成功。如果我有一个像这样的字符串：

> 你好
> 
> 那里
> 
> 世界

然后我希望每个单词都存储在一个字符串数组中，这样我就可以将它们单独放在我的数据网格单元格中。

不幸的是，这段代码我似乎没有删除新行：

```
string text = _scanResult; //Scan result contains the Hello There World string
string[] lines = text.Split(new Char[] {'\n','\r');
for (int x = 0; x < lines.Length; x++)
{
    dt.Rows.Add(lines[x]);
}
dataGrid1.DataSource = dt; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:58:49.400

改为使用`Environment.NewLine`，并使用`StringSplitOptions.RemoveEmptyEntries`：

```
string[] lines = text.Split(new string[] {Environment.NewLine}, 
                            StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:14:46.470

好吧，因为在 .NET Compact Framework 中的 String.Split 中只接受字符作为参数。

我所要做的就是将新行替换为“\n”字符。

这是一些将来可能会遇到相同问题的人的代码。

```
string text = stringWithNewLines;
text = text.Replace(Environment.NewLine,"\n");
string[] lines = text.Split(new Char[] { '\n' });
for (int x = 0; x < lines.Length; x++)
{  
    if (!String.IsNullOrEmpty(lines[x]))
    {
    dt.Rows.Add(lines[x]); //Add each string to datatable rows for use in datagrid
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T21:42:51.157

这是一个非常简单的版本：

```
var _scanResult = "foo\r\nbar\r\n";

var lines = System.Text.RegularExpressions.Regex.Split(_scanResult, "\r\n")
            .Where(l => !string.IsNullOrEmpty(l)); 
```

# doxygen - 我可以在 doxygen 中创建一个全局待办事项列表吗？

> ID：13310355
> 
> 赞同：8
> 
> 时间：2012-11-09T14:55:41.167
> 
> 标签：doxygen

我是 Doxygen 的新手，并且能够在模块中创建待办事项。我可以创建一个全局待办事项列表还是有更好的方法将所有待办事项放在一个地方？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T15:36:51.990

所有待办事项（使用 doxygen 命令创建[`\todo`](http://www.doxygen.nl/manual/commands.html#cmdtodo)）一起出现在名为“待办事项列表”的页面上，该页面位于“相关页面”选项卡下（见下图）。此页面是整个项目的“全局”待办事项列表。请注意，还为错误列表（cf [`\bug`](http://www.doxygen.nl/manual/commands.html#cmdbug)）创建了一个页面。

![](../Images/653f7b6d5eda82cc8e4744138af69436.png)

`\todo`您还可以使用和`\bug`命令 的概括，使您自己的自定义页面出现在“相关页面”选项卡下`\xrefitem`。有关添加“提醒”页面的示例，请参阅[`\xrefitem`文档。](http://www.doxygen.nl/manual/commands.html#cmdxrefitem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T19:09:18.877

您可以创建一个标记文件输出并将其用作另一个 Doxygen 配置的输入，但我还没有成功地以这种方式导入 xrefitem 页面。

您可以导出到 xml 并让解析器读取所有 todo.xml 文件并将它们组合起来。

# java - 将 URL 从 InternetExplorer 拖放到 sojamo/Processing 的链接传递

> ID：13310356
> 
> 赞同：4
> 
> 时间：2012-11-09T14:55:49.753
> 
> 标签：java, internet-explorer, drag-and-drop, protected-mode

我无法将 IE 地址栏中的地址放入处理应用程序中，即使是 sDrop 附带的简单 DropBasics.pde 示例[也是如此](http://www.sojamo.de/libraries/drop/)。我认为问题与 Internet Explorer 的保护模式有关。MSDN 上有一篇关于[允许在您的应用程序中进行拖放操作](http://msdn.microsoft.com/en-us/library/bb250462%28v=VS.85%29.aspx#wpm_addya)的信息性文章，但我什至无法为处理应用程序制定简单的设置。例如，该文章中的示例注册表设置是

> AppName="contose.exe"
> 
> AppPath="C:\%USERPROFILE%\ApplicationData\Contoso"
> 
> 策略=(DWORD) 00000003

但是用于处理的正在运行的 exe 是 javaw 并且以下似乎不起作用

> AppName=javaw.exe
> 
> AppPath=C:\Windows\SysWOW64
> 
> 策略=dword:00000003

有没有人成功注册处理应用程序以接受从 IE 地址栏中删除的链接？如果是这样，它是如何完成的？

# php - CodeIgniter / dbForge - 多个键

> ID：13310366
> 
> 赞同：2
> 
> 时间：2012-11-09T14:56:39.593
> 
> 标签：php, codeigniter, dbforge

我使用 CodeIgniters DBforge 来使用我的数据库。

我试图将一个普通的 PHP 脚本转换为 CodeIgniter，并且在将 SQL 更改为 dbforge 时遇到了一些麻烦。

我有以下 SQL 代码

```
CREATE TABLE `message2_recips` (
  `mid` int(10) unsigned NOT NULL,
  `seq` int(10) unsigned NOT NULL,
  `uid` int(10) unsigned NOT NULL,
  `status` char(1) NOT NULL default 'N',
  KEY `m2r1` USING BTREE (`mid`,`status`),
  KEY `m2r2` USING BTREE (`uid`,`status`)
) ENGINE=InnoDB; 
```

一切正常，除非我到达底部的 2 个键值。

我尝试过的一切似乎都不起作用，包括，

```
$this->dbforge->add_key(array('mid', 'status'));
$this->dbforge->add_key(array('uid', 'status')); 
```

任何帮助翻译此内容将不胜感激，我似乎无法找到使用 dbforge 输入此内容的任何方法，这使我的项目完全停止

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:18:27.017

（目前）不可能通过 DB Forge 进行 - 它不支持表键的附加选项。您只能通过之后使用原始 SQL 查询添加它们来实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-14T07:25:17.153

DB_forge.php 中有一个错误

您需要删除 is_array 条件以启用多个键（在 mysql 驱动程序中有将数组键转换为多个键的功能）。

DBForge.php:101

消除：

```
 if (is_array($key))
    {
        foreach ($key as $one)
        {
            $this->add_key($one, $primary);
        }

        return;
    } 
```

# objective-c - 如何在底部获取 Xcode TabView 默认黑条？

> ID：13310370
> 
> 赞同：0
> 
> 时间：2012-11-09T14:56:50.250
> 
> 标签：objective-c, xcode, uitabview

在一个新的选项卡式应用程序中，当添加了两个视图时，默认创建的视图底部有一个黑条，而手动创建的两个视图没有那个黑条？

如何启用那个黑条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:58:50.897

您需要将其他两个场景连接到标签栏控制器。按住 control 键，然后从 Tab Bar View Controller 拖动到另一个 View Controller。当它询问您要创建哪种类型的转场时，请在“关系”转场部分下选择“视图控制器”。

![在此处输入图像描述](../Images/e210ad76e1046116984173a8f1df1f71.png)

如果您使用的是 NIB，请将视图控制器对象从对象库中拖到选项卡栏控制器中。一旦它在那里，在视图控制器资源管理器中选择新的视图控制器并在 Identity Inspector 中配置自定义类。

![在此处输入图像描述](../Images/0ba1be6dbf6f6db91bdfd3a0feb7c5f1.png)

...以及属性检查器中笔尖的名称。

![在此处输入图像描述](../Images/cdccebdb0cbc89c143b5cc36fba26b05.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:30:14.240

在您的应用委托中，您应该看到如下代码：

```
UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = @[viewController1, viewController2]; 
```

修改它以包含您的第三个和第四个视图控制器。否则，您的选项卡控制器如何知道您的新视图控制器存在！

# asp.net-web-api - 在 ASP.NET Web API 中反序列化为派生类

> ID：13310372
> 
> 赞同：2
> 
> 时间：2012-11-09T14:56:54.337
> 
> 标签：asp.net-web-api, json.net

[在我的最后一个 SO 问题](https://stackoverflow.com/questions/13274625/how-to-set-custom-jsonserializersettings-for-json-net-in-mvc-4-web-api/13274791#13274791)中，我询问了如何修改 Json.NET 的序列化程序设置，ASP.NET Web API 本身用于（反）序列化。接受的答案非常有效，例如，我能够将类型信息嵌入到序列化的 JSON 字符串中。

但是，当我尝试将此 JSON 字符串返回到期望模型的父类的 Web API 操作时，Web API 仍会反序列化为父类，删除与子类对应的所有数据，并阻止对子类的转换和检测班级。

```
class Entity { }
class Person : Entity { } 
```

* * *

```
public Person Get() {
    return new Person();
}

public bool Post(Entity entity) {
    return entity is Person;
} 
```

一个简单的用例是在 jQuery 中做这样的事情：

```
// get a serialized JSON Person
$.ajax({
    url : 'api/person'      // PersonController
}).success(function (m) {

    // then throw that Person right back via HTTP POST
    $.ajax({
        url : 'api/person',
        type : 'POST',
        data : m
    }).success(function (m) {
        console.log(m);     // false
    });

}) 
```

我希望通过修改`JsonSerializerSettings`Json.NET 以嵌入它能够读取的类型信息，并且至少尝试强制反序列化为该类型，但显然它没有。

我应该如何处理这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:59:21.050

实际上，第二个 POST 调用正在发送 application/x-www-form-urlencoded 数据，这就是 JsonMediaTypeFormatter 没有获取类型信息的原因。尝试将 contentType 设置为“application/json”。

此外，第二个 POST 请求正文中的数据似乎已编码，需要在发送回服务之前对其进行解码。

我能够让它工作：

```
 // get a serialized JSON Person
    $.ajax({
        url: 'api/person'      // PersonController
    }).success(function (m) {

        // then throw that Person right back via HTTP POST
        $.ajax({
            url: 'api/person',
            type: 'POST',
            contentType: "application/json",
            data: JSON.stringify(m),
        }).success(function (m) {
            alert(m);     // true!
        });

    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:09:07.097

Web API really doesn't do any (de)serialization "natively". It happens to have a few MediaTypeFormatters included in the config.Formatters collection by default. Feel free to remove those and create your own MediaTypeFormatter that handles the serialization the way you want it to be done.

MediaTypeFormatters are really not that hard to create.

# magento - 在 magento admin 中获取前端主题路径

> ID：13310374
> 
> 赞同：3
> 
> 时间：2012-11-09T14:57:08.733
> 
> 标签：magento, path, themes

在我的 Magento 模块中，我在后端上传了一个 CSS 文件以在我的前端使用它

我试过这个：

```
 Mage::getSingleton('core/design_package')->getSkinBaseDir() 
```

但它给出了不同的路径（管理员/前台）

在我的 Block 中，我得到了这个：

> C:\wamp\www\ce_1.6.2.0\skin\frontend\default\default\

在我的 Adminhtml/Controller 中（保存文件）我得到了这个：

> C:\wamp\www\ce_1.6.2.0\skin\adminhtml\default\default

如何在 Block 和 Controller 中获得相同的路径（前面）？
谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T15:28:30.097

只需将其强制到前端：

```
Mage::getSingleton('core/design_package')->getSkinBaseDir(array('_area' => 'frontend')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-23T11:48:05.830

我想提供和替代 Rastaking 的答案，它将返回 URL 路径而不是文件路径：

```
Mage::getModel('core/design_package')->getSkinUrl(); 
```

这将返回如下内容：

> [http://www.yourdomain.com/skin/frontend/your_package/your_skin/](http://www.yourdomain.com/skin/frontend/your_package/your_skin/)

希望这会有所帮助，任何寻找类似解决方案的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-16T09:46:35.237

你可以试试这个：

```
Mage::getSingleton('core/design_package')->getSkinBaseDir(array('_area' => 'frontend','_package'=>'rwd','_theme'=>'default')); 
```

# ios - 拆分视图控制器导航栏的奇怪行为

> ID：13310375
> 
> 赞同：4
> 
> 时间：2012-11-09T14:57:12.290
> 
> 标签：ios, ipad, ios6, uinavigationbar, uisplitviewcontroller

`UINavigationBar`我发现的行为相当奇怪`UISplitViewController`。我`rootViewController`在下面的图片上有一个标准：

![在此处输入图像描述](../Images/cb4b5bb104c9b3388b6d6b8e9f0ddbbd.png)

当按下栏按钮时（它暂时用于调试，样式为“添加按钮”），我添加了一个新的导航栏（注意：我添加，我不替换！）处理屏幕上完成的事件。

**说明**- 按下按钮，用户开始在屏幕上绘制内容，添加新栏以进行交互以使绘制模式停止。

**问题**- 但是，当我添加这个栏时，会出现一个奇怪的图形细节，其中我的栏`rootViewController`被分成两部分。下图（红色标注）：

![在此处输入图像描述](../Images/91384642590c848a290f00577ab1eff9.png)

这是一个已知问题还是出于某种原因？

代码：

```
UINavigationBar *tmpBar = [[UINavigationBar alloc] initWithFrame:CGRectOffset(CGRectMake(0.0, 0.0, 1024.0, 44.0), 0, - 44.0)];
UINavigationItem *it = [[UINavigationItem alloc] initWithTitle:@"Draw, baby, draw!"];
it.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelDrawing)];
it.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(sendMail)];
tmpBar.items = [[NSArray alloc] initWithObjects:it, nil];

self.canvasBar = tmpBar;

[self.splitViewController.view addSubview:self.canvasBar];
[self.splitViewController.view bringSubviewToFront:self.canvasBar];

[UIView beginAnimations:@"animateBarOn" context:NULL];
[UIView setAnimationDuration:1.0];
[self.canvasBar setFrame:CGRectOffset([self.canvasBar frame], 0, 44)];
[UIView commitAnimations]; 
```

**注意：**我不是在寻找*替代*解决方案，而是在寻找**为什么**会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:14:00.647

您的第二个导航栏比第一个略低，因此您在蓝色栏中看到了划分。至于为什么，我不能说没有更多关于你如何添加它的信息。

# javascript - javascript 使用 getElementsById 设置选择元素选项

> ID：13310376
> 
> 赞同：1
> 
> 时间：2012-11-09T14:57:15.313
> 
> 标签：javascript

我有一个表单，我使用 javascript 根据属性类型（房屋、公寓等）设置选择元素选项。当我使用 document.myForm.priceSelect.options 访问列表时，它现在正在工作。

我想通过 id 而不是 name 访问它。因为我还想设置名称以及选项，以便在提交表单时，列表的名称将确定要执行的函数。一些代码来说明：

```
 if(prop_type == 'flat') {
            document.getElementById('priceRange').setAttribute('name', 'flatRange');
            ..... 
```

现在，我在这里更改名为 priceRange 的选择列表的名称。我如何也可以使用 id 而不是名称来更改选项，如下所示：

```
document.searchForm.priceRange.options[1]=new Option("10000 - 20000", "10000 - 20000"); 
```

先感谢您...

更新：

更改后：（不工作）

```
 if(prop_type == 'flat') {
            document.getElementById('priceRange').setAttribute('name', 'flatRange');
            document.getElementById('priceRange').options.length=0;
            document.getElementById('priceRange').options[0]=new Option("", "");
            document.getElementById('priceRange').options[1]=new Option("10000 - 20000", "10000 - 20000"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:58:39.657

只需使用

```
document.getElementById(yourId).options[1]=new Option("10000 - 20000", "10000 - 20000"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:47:50.447

dystroy 的方法应该有效 -[在这里看到这个小提琴](http://jsfiddle.net/yQRPr/)

另一种方法是为选项创建创建包装器方法，例如：

```
function createOption(objSelect, optText, optValue){
  var objOption = document.createElement("option");
  objOption.text = optText;
  objOption.value = optValue;

  if(document.all && !window.opera){
    objSelect.add(objOption);
  }
  else
  {
    objSelect.add(objOption, null);
  };
} 
```

然后您可以向选择添加选项：

```
var priceRange=document.getElementById('priceRange');
createOption(priceRange, "10000 - 20000", "lowball"); 
```

[在这里](http://jsfiddle.net/mG9qv/2/)为包装器方法小提琴

# java - 压缩类错误 - 线程“main”中的异常 java.lang.StringIndexOutOfBoundsException：字符串索引超出范围：-1

> ID：13310379
> 
> 赞同：1
> 
> 时间：2012-11-09T14:57:31.887
> 
> 标签：java, networking, tcp, compression

我已经为客户端服务器 TCP 数据连接创建了这个简单的压缩类，对我来说一切都很好，没有构建错误，但是我遇到了一个无法纠正的运行时错误。我得到的错误是线程“main”java.lang.StringIndexOutOfBoundsException中的异常：字符串索引超出范围：-1。

代码：

```
import java.io.Serializable;
import java.util.ArrayList;

public class CompressedMessage implements Serializable
{   // this instance variable will store the original, compressed and decompressed message
    private String message;

    public CompressedMessage(String message)
    {   
        // begin by coding this method first - initialise instance variable message with the original message
        this.message = message;
    }

    public String getMessage()
    {   
        return this.message;

    }

    private boolean punctuationChar(String str)
    {   
        // Hint: check if the last character in the string is a punctuation
        int length = str.length();
        str = str.substring(length -2,length-1);

        if(str.equals(",") || str.equals("!") || str.equals(".") || str.equals("?"))
        {
            return true;
        }
        else
        {
            return false;
        }

    }

    private String getWord(String str)
    {   // Hint: if last character in string is punctuation then remove 

    if(punctuationChar(str)== true)
    {
        //remove punctuation of last char
        str = str.substring(0,str.length()-1);
    }

        return str;
    }

    public void compress()
    {   /* read through section 3 of the practical 5 document 
           to get you started. This is called by the server, 
           have a look at the server code where it is called */ 
        ArrayList<String> newMessage = new ArrayList<String>();

        String[] words = message.split(" ");  

        for (String word : words)  
        {  
            getWord(word);
            //if word has already appeared replace with position of previous word
            if(newMessage.contains(word))
            {
                String str = Integer.toString(newMessage.indexOf(word));
                str = str + " ";
                newMessage.add(str);
            }
            else
            {
                word = word + "";
                newMessage.add(word);
            }

         //if word had a punctuation at the end add it back in
         //System.out.println(word);  
        }  

            this.message = newMessage.toString();
            System.out.println("****************COMPRESSING*****************");
            System.out.println(newMessage);

    }

    public void decompress()
    {   /* read through section 3 of the practical 5 document 
           to get you started. This is called by the client,
           have a look at the client code where it is called */
           ArrayList<String> decompMessage = new ArrayList<String>();

           String[] words = message.split(" ");

           for (String word : words)  
        {  
            getWord(word);

            if(word.substring(0,1).matches("[0-9]"))
            {
              int num = Integer.parseInt(word);
              decompMessage.add(decompMessage.get(num));

            }
            else
            {
                decompMessage.add(word);
            }
        }

        this.message = decompMessage.toString();
        System.out.println("****************DECOMPRESSING*****************");
            System.out.println(decompMessage);  

    }
} 
```

错误：

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.substring(String.java:1952)
    at CompressedMessage.punctuationChar(CompressedMessage.java:24)
    at CompressedMessage.getWord(CompressedMessage.java:40)
    at CompressedMessage.compress(CompressedMessage.java:61)
    at P5_Server.waitForData(P5_Server.java:72)
    at P5_Server.main(P5_Server.java:159) 
```

我尝试更改基于 length() 计算字符串的方式，但它并没有减少错误。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:04:42.507

如果你`str`是`length 0`（空字符串）或`length 1`？在这种情况下`str = str.substring(length -2,length-1);`将导致异常。

您需要在执行子字符串之前进行长度检查：

```
 if(length > 1){
        str = str.substring(length-2,length-1);
    } 
```

由于您只想获得一个角色，我认为您可以简单地执行以下操作：

```
 if(length > 1){
        str = String.valueOf(str.charAt(length-2))
    } 
```

请确保它`str`不为空，否则也要进行空处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-16T00:11:50.767

发生这种情况是因为您将一个空字符串传递给*punctuationChar*。

哦，由于您只是使用 str 中的最后一个字符，因此将其转换为字符可能更容易。

试试这个：

```
private boolean punctuationChar(String str) {
       if (str.length() > 0) {
           char lastChar = str.charAt(lastChar.length() - 1);

           // Returns true if the character is anything other than a letter, digit or space
           return !(Character.isLetterOrDigit(lastChar)) || Character.isWhitespace(lastChar);
       }
       else {
           return false;
       }
   }
} 
```

我在这里使用 isLetterOrDigit，然后反转结果。因此，对于结尾包含除 AZ、az 或 0-9 以外的任何字符串的任何字符串，此方法都将返回 true。我还将空格算作不是标点符号。

如果 Oracle 考虑放入“isPunctuation”方法，这将更容易！

Java 中的 Character 类非常适合这样的检查，下次你做类似的事情时绝对值得一看。 [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:04:18.730

您可以使标点符号检查更容易：

```
private boolean punctuationChar(String str) {   
    if (str != null && str.length() > 0) {
        char c = str.charAt(str.length()-1);
        return c == '.' || c =='?'||c==',' || c =='!';
    } else {
        return false;
    }
} 
```

一般来说，尽量避免字符串操作，因为它们很慢。如果您需要使用子字符串或字符串索引，请始终确保为空字符串、空字符串或短字符串做好准备

# ruby - 试图弄清楚我应该使用什么样的关系

> ID：13310381
> 
> 赞同：2
> 
> 时间：2012-11-09T14:57:45.303
> 
> 标签：ruby, mongodb, mongoid

辛纳特拉，蒙古人 3

有 4 种型号：`User, Book, FavoriteBooks, ReadBooks, NewBooks`. 每个用户都有自己的最爱、阅读和新书列表。一本书属于一个列表。但也可以请求有关任何书籍的信息，这意味着书籍不应**嵌入**到`FavoriteBooks, ReadBooks, NewBooks`.

方案部分：

```
class Book
 include Mongoid::Document
 belongs_to :favourite_books
 belongs_to :read_books
 belongs_to :new_books 
end

class FavoriteBook
 include Mongoid::Document
 has_many :books
end

#.... the same for ReadBooks and NewBooks

class User
 include Mongoid::Document
 # what else?
end 
```

好像我错过了什么。

我应该怎么做才能让用户“包含” 的列表`FavoriteBooks, ReadBooks, NewBooks`？我应该使用一对一的关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:09:17.957

I think you should rethink your modeling. IMHO it should be book and user as models, and the favorite_books, read_books and new_books should all be relationhips like so:

```
class User
 include Mongoid::Document
 has_many :favorite_books
 has_many :read_books
 has_many :new_books

 has_many :books, :through => :favorite_books
 has_many :books, :through => :read_books
 has_many :books, :through => :new_books
end

class Book
 include Mongoid::Document
 has_many :favorite_books
 has_many :read_books
 has_many :new_books

 has_many :users, :through => :favorite_books
 has_many :users, :through => :read_books
 has_many :users, :through => :new_books 
end

class FavoriteBook
 include Mongoid::Document
 belongs_to :books
 belongs_to :users
end

#.... the same for ReadBooks and NewBooks 
```

I think this should be a better approach. =)

# hibernate - 使用动态插入和动态更新

> ID：13310385
> 
> 赞同：3
> 
> 时间：2012-11-09T14:57:54.727
> 
> 标签：hibernate

你能解释一下类映射中动态插入和动态更新属性的用途吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:58:48.110

它们只是告诉 Hibernate 是否在 SQL INSERT 和 SQL UPDATE 中包含未修改的属性。

# c# - linq 按小时范围分组？

> ID：13310390
> 
> 赞同：2
> 
> 时间：2012-11-09T14:58:05.023
> 
> 标签：c#, linq, group-by

我按小时对数据进行分组，如下所示：

```
group c by new { date = new DateTime(Date.Year, Date.Month, Date.Day, Date.Hour, 5, 0), name = c.Name } into g 
```

我想得到这样的东西：`10.05 - 11.05` 当我调试代码时，日期会像我预期的那样返回。但数据仍分组在`10.00 - 11.00`.

我希望我能解释一下。这样做的逻辑是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:41:46.193

```
let offSetDate = Date.AddMinutes(-5)  //shift back so that Year,Month,Day,Hour are all that matter.
let groupKey = new {
  date = new DateTime(offSetDate.Year, offSetDate.Month, offSetDate.Day, offSetDate.Hour, 5, 0),
  name = c.Name
}
group c by groupKey into g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:05:29.990

```
var groups = dList.GroupBy(d => (d.Ticks - 5*TimeSpan.TicksPerMinute) / TimeSpan.TicksPerHour)
                .Select(g => g.ToList())
                .ToList(); 
```

# android - 适用于各种 Android 设备的应用背景大小

> ID：13310391
> 
> 赞同：2
> 
> 时间：2012-11-09T14:58:10.217
> 
> 标签：android, background, size, screen

我正在为所有 Android 设备的应用程序设计背景。我在想图像的像素大小是多少？

从开发者网站我发现了以下等式

像素 = **dp** * ( **dpi** / 160)

然后， px 取决于两个变量。

首先，dp，我们有

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

二、dpi和我们有

```
 low-density (ldpi) screens (~120dpi).
 medium-density (mdpi) screens (~160dpi).
 high-density (hdpi) screens (~240dpi).
 extra high-density (xhdpi) screens (~320dpi). 
```

那么我应该把我的drawables放在Screen特性的哪里呢？我的意思是我应该使用“尺寸”还是“密度”。如果我使用“大小”“dp”对图像进行分类，这些图像的 dpi 是多少？如果我使用“密度”“dpi”对图像进行分类，这些图像的 dp 是多少？

我对如何最终调整图像大小感到困惑。另外，也许你可以有一个大屏幕尺寸的中密度屏幕，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:25:08.377

那里有**许多**不同的解决方案。例如，可能有 4 种不同的设备，它们是：

640**像素**x 480**像素**

不同之处在于，这些设备中有些是 mdpi，有些是 hdpi、xhdpi 等，这意味着它们可以被描述为“大”、“中”或“超大”屏幕类型。

因此，对于 640x480dp 的 mdpi 设备，背景将是 640x480px，但是，640x480dp 和 hdpi 的设备将需要 960x720px 的背景，您会注意到它们是相同大小的“桶”，但具有不同的密度，因此不同的分辨率。

因此，如果您只想让您的背景符合预期，您将需要：

*   大 xhdpi
*   大tvdpi
*   大hdpi
*   大 mdpi
*   大ldpi

（然后正常情况下相同）

*   普通-xhdpi
*   正常-tvdpi

等等等等等等

但是，最好的办法是使用可以拉伸、形状、平铺或可以转换为 9-patch 的图像，因为让每个背景都可用于每个设备会很麻烦。如果您要这样做，我会查找描述当前市场上每个屏幕尺寸的资源，并通过编程方法进行设置。

# jquery - jquery覆盖但与图像位于同一位置

> ID：13310397
> 
> 赞同：2
> 
> 时间：2012-11-09T14:58:29.017
> 
> 标签：jquery, overlay

我一直在尝试重新创建[http://www.nokia.com/gb-en/products/all-products/上的过度功能](http://www.nokia.com/gb-en/products/all-products/)

通过点击手机，它会生成一个显示额外内容的 div，我试图克隆 div 并定位它，但它似乎从来没有工作过，并且弄乱了网站的其余部分。

任何关于如何创建它的网站都会很棒，

干杯

# c++ - qt exe文件不运行

> ID：13310401
> 
> 赞同：1
> 
> 时间：2012-11-09T14:58:38.480
> 
> 标签：c++, qt, mingw, exe

我正在使用 Qt 4.8.3 mingw 4.7 Windows 7 x64 。exe文件不起作用..

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: hello.exe
  Application Version:  0.0.0.0
  Application Timestamp:    509d1749
  Fault Module Name:    QtCore4.dll
  Fault Module Version: 4.8.3.0
  Fault Module Timestamp:   504ee1c2
  Exception Code:   c0000005
  Exception Offset: 001103e8
  OS Version:   6.1.7601.2.1.0.256.4
  Locale ID:    1067
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

这是非常简单的源代码：

```
#include <QApplication>
#include <QLabel>

int main(int argc, char *argv[])
{
   QApplication app(argc, argv);
   QLabel *label = new QLabel("Hello Qt!");

   label->show();

   return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T03:24:39.430

您可以从 qt-project.org 下载的 Qt 4.8.3 MinGW 库是使用 MinGW 4.4 构建的。如果您使用的是该库，则在尝试使用 MinGW 4.7 时会遇到问题。

[MinGW 4.7.0 将 C++ 类成员的默认调用约定更改为`__thiscall`](http://mingw-users.1079350.n2.nabble.com/MinGW-GCC-4-7-0-released-td7578133.html)，因此使用 MinGW 4.7.0 或更高版本构建的 C++ 程序与使用早期版本的 MinGW 构建的库或目标文件不兼容。有关更多详细信息，请参阅[https://stackoverflow.com/a/13134812/12711](https://stackoverflow.com/a/13134812/12711)。

您需要使用旧版本的 MinGW（最好是 4.4），或者您需要使用您正在使用的 MinGW 版本重建 Qt 库。如果您尝试重建 Qt 并遇到问题，[这个 SO 答案](https://stackoverflow.com/a/12383833/12711)可能有一些有用的指示。

# c# - 更改布尔值的默认值

> ID：13310410
> 
> 赞同：27
> 
> 时间：2012-11-09T14:58:49.883
> 
> 标签：c#, boolean, default

我正在编写一个应用程序，其中定义了很多布尔类型的属性：

```
 private bool kajmak = true;
    public bool Kajmak
    {
        get { return kajmak ; }
        set { kajmak = value; FirePropertyChanged(() => Kajmak); }
    } 
```

如您所见，我一开始就设置`kajmak`了`true`..-原因无关紧要-。（您可能知道 bool 变量的**默认**值为**false**）。

现在，有没有办法将 a 的默认值更改`bool`为`true`？所以我会写：

```
private bool kajmak; //kajmak = true 
```

代替

```
private bool kajmak = true; 
```

我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2016-01-11T10:51:08.897

C Sharp 6.0 引入了一种很好的新方法来做到这一点：

```
 public bool YourBool { get; set; } = true; 
```

这相当于旧的方式：

```
 private bool _yourBool = true;

    public bool YourBool 
    {
        get { return _yourBool; }
        set { _yourBool = value; }
    } 
```

看到这篇文章[http://blogs.msdn.com/b/csharpfaq/archive/2014/11/20/new-features-in-c-6.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2014/11/20/new-features-in-c-6.aspx)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-09T15:01:57.447

因为布尔值默认为假，所以我在我的名字中使用正数形式，如`IsInitialized`等`HasSomething`，我希望默认为假，直到我明确设置它们。

如果你发现你需要一些东西默认为真，也许你需要重命名你的变量，以便在默认为假时更有意义。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-07-10T14:04:50.343

在役：

```
public bool Kajmak { get; set; } = true; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-09T15:01:13.203

不，无法更改 .NET 分配的默认值。您最好的选择是在私有成员中分配适当的默认值：

```
private book kajmak = false; 
```

或者像你应该的那样使用构造函数并在那里分配类默认值：

```
public class SomeClass
{
    public SomeClass()
    {
        Kajmak = false;
    }

    public book Kajmak { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T15:01:11.663

不，不可能更改默认值。如果您可以更改默认值，它将不再是默认值；）。

但是要将默认值设置为 null，您可以使用以下命令：

```
bool? kajmak; 
```

但这不是你想要的...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-29T22:21:48.483

在尝试做类似事情的过程中，一位同事向我启发了布尔？类型。它可以是 true、false 或 null，并且不反对位于此类比较器的左侧。这并不能回答您如何将 bool 默认为 true 的问题，但确实解决了您希望变量在默认情况下可定义为 true 的概念问题。

我之所以发帖，是因为这是我搜索时的最高结果，而且这些信息对我有帮助。希望它会是其他找到此页面的人。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-11-09T15:05:43.550

您可以创建一个默认为 false 的类 myBool 以及从 bool 到您的类的隐式转换。

# google-apps-script - 为行格式、line_spacing、SPACING_AFTER、SPACING_BEFORE 设置 setAttribute()

> ID：13310412
> 
> 赞同：4
> 
> 时间：2012-11-09T14:59:09.747
> 
> 标签：google-apps-script

我正在尝试从模板文件在 Google 文档中生成报告。当它复制文档时，它会将所有格式重置为用户的默认格式，而不是原始文档中的格式。我尝试了以下方法来尝试在文档、tableRow 和 tableCell 级别上设置格式，尽管创建报告时行距为 1.5 并且段落后有空格

```
var style = {};
style[DocumentApp.Attribute.SPACING_AFTER] =0;
style[DocumentApp.Attribute.SPACING_BEFORE] =0;
style[DocumentApp.Attribute.LINE_SPACING]=1;   

var newrow= tables[2].insertTableRow(n).setBold(false).setAttributes(style);
   if(j==0){
     newrow.insertTableCell(0,reportDate).setPaddingBottom(0).setPaddingTop(0).setAttributes(style);
   }
   else{
     newrow.insertTableCell(0,'').setPaddingBottom(0).setPaddingTop(0).setAttributes(style);
   }
   newrow.insertTableCell(0,values1[rowId1][1]+' '+values1[rowId1][2]).setPaddingBottom(0).setPaddingTop(0).setAttributes(style);
   newrow.insertTableCell(0,'').setPaddingBottom(0).setPaddingTop(0).setAttributes(style); 
   doc.editAsText().setAttributes(style); 
```

关于如何让报告遵循这些属性的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T03:22:52.343

我相信 SPACING_AFTER、SPACING_BEFORE 和 LINE_SPACING 不是与 TABLE_CELL 对象关联的属性。您必须引用子 PARAGRAPH 才能设置这些。

```
var style = {};
  style[DocumentApp.Attribute.SPACING_AFTER] =0;
  style[DocumentApp.Attribute.SPACING_BEFORE] =0;
  style[DocumentApp.Attribute.LINE_SPACING]=1;   

  var newrow = tables[2]
    .insertTableRow(n)
    .setBold(false);

  if (j == 0) {
    newrow.insertTableCell(0,reportDate)
      .setPaddingBottom(0)
      .setPaddingTop(0);
  }
  else {
    newrow.insertTableCell(0,'').setPaddingBottom(0).setPaddingTop(0);
  }
  newrow.insertTableCell(0,values1[rowId1][1]+' '+values1[rowId1][2])
    .setPaddingBottom(0)
    .setPaddingTop(0);
  newrow.insertTableCell(0,'')
    .setPaddingBottom(0)
    .setPaddingTop(0); 
  var newrowTableCell = newrow.getChild(0);
  var newrowParagraph = newrowTableCell.getChild(0).setAttributes(style); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:30:25.987

由于设置的属性没有设置属性并且您不能将任何元素转换为段落，我通过获取所有段落并通过在末尾添加手动设置它们来解决这个问题

```
var p=doc.getParagraphs();
  for(i=0;i<p.length; i++){
    p[i].setLineSpacing(1).setSpacingAfter(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:13:45.027

用户是否需要能够编辑报告，或者只是查看它？为什么不生成pdf？每次我完成它，它都会保存格式。

```
var file = DocsList.getFileById('1DIfn_wVpXSI4hU5zG43Fvp2ZdpUP_KqgtgFRT9NWJ7E');
var newFile = DocsList.copy(file, ename+'-'+reportDate+'Monthly Report');
var report=DocsList.createFile(newFile.getAs("application/pdf")).rename(newFile.getName() + ".pdf");
var a = report.getID();
var doc = DocumentApp.openById(a); 
```

# zend-framework - 如何在 Zend Framework 中重命名模块管理员

> ID：13310413
> 
> 赞同：0
> 
> 时间：2012-11-09T14:59:11.277
> 
> 标签：zend-framework, url-rewriting

我在 Zend Framework 中的 URL 重写有问题，我希望有人能帮我解决这个问题。

我需要在 URL 中将模块 admin 重命名为 admindev，以适用于所有控制器和操作。

这里我的代码写在 Bootstrap.php 中：

```
public function _initModuleRoutes()
{
    $this->bootstrap('FrontController');
    $frontController = $this->getResource('FrontController');
    $router = $frontController->getRouter();
    $route = new Zend_Controller_Router_Route(
        'admindev/:action/*',
        array(
            'module'=>'admin',
            'controller'=>':controller',
            'action'=>':action'
        )
    );      
    $router->addRoute('admin',$route);
    return $router;
} 
```

谢谢大家，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:22:47.960

您没有在路由中指定 :controller 参数。

试试这样：

```
public function _initModuleRoutes()
{
    $this->bootstrap('FrontController');
    $frontController = $this->getResource('FrontController');
    $router = $frontController->getRouter();
    $route = new Zend_Controller_Router_Route(
        'admindev/:controller/:action/*',
        array(
            'module'=>'admin',
            'controller'=>':controller',
            'action'=>':action'
        )
    );      
    $router->addRoute('admin',$route);
    return $router;
} 
```

您也可以通过 application.ini 配置实现相同的效果：

```
resources.router.routes.admindev.type = "Zend_Controller_Router_Route"
resources.router.routes.admindev.route = "/admindev/:controller/:action/*"
resources.router.routes.admindev.defaults.module = "admin" 
```

其他 application.ini 提示和技巧[在这里](http://www.iostream.eu/zend-framework-application-ini-cheat-sheet/)

# javascript - 如何在 javascript 侦听器中引用复合组件？

> ID：13310414
> 
> 赞同：0
> 
> 时间：2012-11-09T14:59:13.740
> 
> 标签：javascript, google-maps, jsf-2

我有一个 JSF2 .xhtml 页面，其中包含一个包含 primefaces p:gmap 组件的复合组件。我正在尝试创建一个 javascript 侦听器，它将从谷歌地图控件捕获缩放事件。通过添加以下 javascript 侦听器，当地图不在复合组件中时，我已经能够做到这一点：

```
 function initialize() {
                var mapOptions = {
                    tilt: 0,
                    panControl: false
                };
            google.maps.event.addListener( gmap.getMap(), 'zoom_changed', function() {
                alert('zoom_changed');
                var zoom = gmap.getMap().getZoom();
                var mapZoomUpdate = document.getElementById('mapZoomUpdate');
                mapZoomUpdate.value = ''+zoom;
                changeMapZoomBtn.click();
            });
          }
          google.maps.event.addDomListener(window, 'load', initialize); 
```

在这种情况下，“gmap”是 primefaces gmap 组件 ID。

但是，当 gmap 组件位于复合组件内时，我无法引用它。我知道我需要添加复合组件 ID 作为参考的一部分，但我不知道正确的语法。

组件本身位于名为“formCenter”且 prependId="false" 的表单中。当我查看页面代码时，我看到对 gmap 组件的引用是：id="eventTransactionsMapComp:gmap"

我已经为 addListener 参考尝试了以下方法，但没有成功：

google.maps.event.addListener( **eventTransactionsMapComp.gmap.getMap(),** 'zoom_changed', function() {

google.maps.event.addListener( **formCenter.eventTransactionsMapComp.gmap.getMap(),** 'zoom_changed', function() {

我想也许我需要使用以下类型的引用来获取组件 ID：

google.maps.event.addListener( **document.getElementById('formCenter:eventTransactionsMapComp:gmap').getMap(),** 'zoom_changed', function() {

但这也不起作用。

任何人都可以在添加侦听器时帮助我使用正确的语法来引用 gmap 组件吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T18:59:01.103

函数 findMe() {

```
 navigator.geolocation.getCurrentPosition(
                    function(position) {
                        var map = gmap.getMap(),
                        latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                        map.setCenter(latlng);
                        var marker = new google.maps.Marker({
                            position: latlng
                        });
                        marker.setMap(map);
                    },
                    function(error) {
                        alert(error.message);
                    },
                    {
                       enableHighAccuracy: true
                    });
            } 
```

希望对你有用！！

Lobotex

# angularjs - 如何在 angular.js 中发送更复杂的对象？

> ID：13310419
> 
> 赞同：2
> 
> 时间：2012-11-09T14:59:25.123
> 
> 标签：angularjs

[http://jsfiddle.net/EjyW4/](http://jsfiddle.net/EjyW4/)

本质上，我正在尝试使用带有资源模块的 AngularJS 从客户端发布一组对象，而不是发送 JSON 对象，Angular 正在通过网络发送无用的 toString 表示。

不幸的是，小提琴中的代码本身并没有多大作用——[这里](https://github.com/ebiester/grails-guitr)用更多的上下文概述了意图，尽管它仍然非常原始，并且看起来不像正确的方法）但这似乎是一个角度问题而不是 grails，至少从 Chrome 控制台来看。

```
Query String Parameters:
callback:JSON_CALLBACK
tests:%5Bobject+Object%5D,%5Bobject+Object%5D 
```

似乎有一个 angular.toJson - [http://docs.angularjs.org/api/angular.toJson](http://docs.angularjs.org/api/angular.toJson) - 但在这种情况下它似乎不起作用。我看到的文档似乎只包含发送一个基本的 int。如果必须，我将发送一个逗号分隔的字符串，但这似乎应该是一个常见的用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:06:00.557

该`$resource`函数实际上返回一个新的`$resource`对象构造函数，然后您在其上设置属性，然后调用类似`save`on 的方法。

所以你在小提琴中的问题是你试图保存一个`$resource`没有数据集的！您所拥有的只是一个配置属性 ，`tests`它不知道如何处理。

相反，您想要：

1.  `$resource`使用工厂/方法为新资源设置构造函数。
2.  创建新资源的新实例。
3.  在其上设置一个属性（例如`myNewResource.tests = $scope.tests`）；
4.  保存它 ( `myNewResource.$save()`)

[http://jsfiddle.net/EjyW4/2/](http://jsfiddle.net/EjyW4/2/)

看起来您最初尝试做的事情更适合`$http`（我也在小提琴中放了一个例子）。

# c# - 在设计时获取文件的相对路径

> ID：13310426
> 
> 赞同：6
> 
> 时间：2012-11-09T15:00:02.363
> 
> 标签：c#, wpf, xaml, relative-path

我正在构建一个 Windows phone 8 应用程序。

在设计时，我加载一个示例 XML 文件以获取示例数据。它工作得很好，但我想使用相对于解决方案根目录的文件路径，这样它就可以适用于所有具有相同代码的开发人员。

这是我当前的代码：

```
var path = @"C:\Users\Tom\MyProject\SampleData\stub.xml";
xml = new StreamReader(path).ReadToEnd(); 
```

我尝试了类似@“SampleData\stub.xml”的相对路径。它适用于手机，但在设计时出现此错误：

> DirectoryNotFoundException：找不到路径“C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\SampleData\login.xml”的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T10:58:09.540

这是我所做的：

```
var path = "SampleData/stub.xml";
var res = Application.GetResourceStream(new Uri(path, UriKind.Relative));
xml = new StreamReader(res.Stream).ReadToEnd(); 
```

# php - APC 作为使用 Symfony 组件的会话处理程序

> ID：13310428
> 
> 赞同：1
> 
> 时间：2012-11-09T15:00:06.200
> 
> 标签：php, session, symfony, apc

我在我的 Web 应用程序中使用 Symfony 组件。我需要在 APC 中存储会话，但不幸的是我找不到这样做的方法。

正如我[在这里](http://symfony.com/doc/current/components/http_foundation/session_configuration.html#custom-save-handlers)看到的， Symfony 不支持 APC 作为会话处理程序。真的吗？

我发现了一个在 Symfony 中使用 APC 作为会话处理程序的[旧示例。](http://www.designdisclosure.com/2009/11/symfony-apc-cache-and-memcache-session-storage/)但是所有配置都在`factories.yml`我没有的文件中完成，因为我只使用独立的 Symfony 组件。

谁能给我一个仅使用 Symfony 组件将 APC 用作会话处理程序的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:18:05.093

由于我在这里很长时间没有得到任何答案，我将自己回答这个问题。目前，Symphony 框架中没有内置支持 APC 作为会话处理程序。没有特别的原因，可能 Symphony 开发人员只是没有得到它。解决方法很简单，只需要自己编写 APCSessionHandler.php 文件（我没有这样做，因为我们决定在项目中不使用它），APCSessionHandler 将与[MemcachedSessionHandler.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Storage/Handler/MemcachedSessionHandler.php)文件非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T02:25:14.390

[如何在 APC 缓存中存储 PHP 会话？](https://stackoverflow.com/questions/1724587/how-to-store-php-sessions-in-apc-cache)表明这是可行的，但对于繁忙的站点来说是个坏主意。接受的答案列出了一些有用的想法

# .net - 带有 _blank 目标的服务器代码

> ID：13310430
> 
> 赞同：0
> 
> 时间：2012-11-09T15:00:10.463
> 
> 标签：.net, hyperlink

应用程序是.Net。我想记录对超链接的点击。很容易。我将其更改为链接按钮，现在可以执行所需的服务器端代码来记录点击。问题是：现在我无法启动指向 _blank 目标的链接。我想吃我的蛋糕，也想拥有它。服务器端代码和 _blank 目标。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:53:32.443

您可以使用：[ClientScriptManager.RegisterStartupScript 方法（类型、字符串、字符串）](http://msdn.microsoft.com/en-IN/library/asz8zsxy.aspx)

例如。：

```
// Define the name and type of the client scripts on the page.
String csname1 = "PopupScript";
Type cstype = this.GetType();
// Get a ClientScriptManager reference from the Page class.
ClientScriptManager cs = Page.ClientScript;
StringBuilder cstext1 = new StringBuilder();
cstext1.Append("<script type=text/javascript>window.open(url, '_blank') </");
cstext1.Append("script>");
cs.RegisterStartupScript(cstype, csname1, cstext1.ToString()); 
```

# function - 在 Lua 函数中填充表格不会反映在外部

> ID：13310431
> 
> 赞同：1
> 
> 时间：2012-11-09T15:00:12.510
> 
> 标签：function, reference, lua, lua-table

我试图在一个函数中填充一个表，然后使用它在以后的调用中收到的值，在使用后删除每个值。由于某种原因，这些值不会在函数调用之间保持不变。保存句柄的表应在`subscribeToService()`调用时填充，然后在`unsubscribeToService()`.

```
local subscriptionSignals_AudioMixerManager = {"volumeLevel", "muteStatus", "fadeLevel", "balanceLevel", "bassLevel", "trebleLevel", "midLevel", "AVCLevel", "activeAudioSrc", "interruptSrc"}
local signalHandlers_AudioMixerManager = {["volumeLevel"] = OnSignal, ["muteStatus"] = OnSignal, ["fadeLevel"] = onSignal, ["balanceLevel"] = OnSignal, ["bassLevel"] = OnSignal, ["trebleLevel"] = OnSignal, ["midLevel"] = OnSignal, ["AVCLevel"] = OnSignal, ["activeAudioSrc"] = OnSignal, ["interruptSrc"] = OnSignal}
local subscriptionHandles_AudioMixerManager = {}

local subscriptionSignals_AudioManager = {"targetSource"}
local signalHandlers_AudioManager = {["targetSource"] = onAudioSourceChange}
local subscriptionHandles_AudioManager = {}

local function subscribeToService(objectPath, signalNames, signalHandlers, subscriptionHandles)
    print("Subscribing...")
    for i,v in ipairs(signalNames) do
            subscriptionHandles[v] = service.subscribe(objectPath, v, signalHandlers[v]);
            print(v .. " handle: ")
            print(subscriptionHandles[v])
        end
    print("Done subscribing")
end

local function unsubscribeFromService(subscriptionHandles)
    print("Unsubscribing...")
    for i,v in ipairs(subscriptionHandles) do
            print("Entered for loop")
            service.unsubscribe(v)
            print(v)
            subscriptionHandles[i] = nil
        end
    print("Done unsubscribing")
end

local function subscribe()
    subscribeToService(AudioMixerManager, subscriptionSignals_AudioMixerManager, signalHandlers_AudioMixerManager, subscriptionHandles_AudioMixerManager)
    subscribeToService(AudioManager, subscriptionSignals_AudioManager, signalHandlers_AudioManager, subscriptionHandles_AudioManager)

    local result, error = service.invoke(AudioMixerManager, "registerMuteClient", {serviceName="audioSettings-interrupt"})
    muteClientID = result.id
    result, error = service.invoke(AudioMixerManager, "registerMuteClient", {serviceName="audioSettings-modechange"})
    muteClientID2 = result.id
end

local function unsubscribe()
    unsubscribeFromService(subscriptionHandles_AudioMixerManager);
    unsubscribeFromService(subscriptionHandles_AudioManager);
end 
```

我在被调用时得到以下输出`subscribe()`，然后是`unsubscribe()`

```
Subscribing...
volumeLevel handle:
userdata: 18f418
muteStatus handle:
userdata: 18f490
fadeLevel handle:
userdata: 18f508
balanceLevel handle:
userdata: 18f580
bassLevel handle:
userdata: 18f5f8
trebleLevel handle:
userdata: 18f670
midLevel handle:
userdata: 18f6e8
AVCLevel handle:
userdata: 18f760
activeAudioSrc handle:
userdata: 18f7d8
interruptSrc handle:
userdata: 18f850
Done subscribing
Subscribing...
targetSource handle:
userdata: 18f8c8
Done subscribing

Unsubscribing...
Done unsubscribing
Unsubscribing...
Done unsubscribing 
```

看起来它甚至没有进入 for 循环`unsubscribeFromService()`，我认为这意味着它正在传递的表由于某种原因是空的。是否有过在 Lua 中不会通过引用传递表的情况？它可以解释这种行为，因为我已经分解了较小的组件并单独测试它们并且它们似乎正在工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:29:02.573

这是一个基本错误，只是由于那里的代码量过于复杂。考虑这个简化的例子：

```
local t = {}
t["asdf"] = {}

for i,v in ipairs(t) do
    print(i, v)
end 
```

这不打印任何东西！但是什么给了？t里面肯定有东西！

问题是 ipairs() 仅迭代表中的*数字*索引，但您使用字符串键插入值。要么您需要改用pairs()，要么使用数字索引（可能不是您想要的）将值插入您的subscriptionHandles 表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:24:21.910

在 Lua 中，表总是通过引用传递。这意味着`subscribe()`and`unsubscribe()`调用之间发生的事情是：

*   `subscriptionHandles_AudioMixerManager`并被`subscriptionHandles_AudioManager`分配一个空表。
*   `subscriptionHandles_AudioMixerManager`和的所有元素`subscriptionHandles_AudioManager`都设置为零。

# java - hbase api - 通过行 ID 列表获取数据行信息

> ID：13310434
> 
> 赞同：3
> 
> 时间：2012-11-09T15:00:44.303
> 
> 标签：java, api, hbase

是否可以通过 hbase java API 通过行 ID 列表获取 hbase 数据记录？

例如，我有一个已知的 hbase 行 ID 列表：

mykey1:myhash1, mykey1:myhash2, mykey1:myhash3, mykey2:myhash5, ...

我想通过一次调用来获得所有相关的列单元格信息。我对 hbase 很陌生，我不知道 API 是否支持这一点。

API伪代码：

```
GetById(String tableName, List<byte[]> rowIds); 
```

类似的东西？

我可以使用 检索单行信息`Get(byte[] rowName)`，但是当我有 rowIds 列表时，我需要多次执行 get 操作，这会导致建立连接并在每次完成时关闭它。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-11T20:24:02.817

`Get`将操作列表传递给*批处理*调用：

```
...
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.hbase.HBaseConfiguration;
import org.apache.hadoop.hbase.client.Get;
import org.apache.hadoop.hbase.client.HTable;
import org.apache.hadoop.hbase.client.Result;
import org.apache.hadoop.hbase.util.Bytes;
...
        HTable htable = null;
        try {
            htable = new HTable(conf, "mytable");
            List<Get> queryRowList = new ArrayList<Get>();
            queryRowList.add(new Get(Bytes.toBytes("mykey1:myhash1")));
            queryRowList.add(new Get(Bytes.toBytes("mykey1:myhash2")));
            queryRowList.add(new Get(Bytes.toBytes("mykey1:myhash3")));
            queryRowList.add(new Get(Bytes.toBytes("mykey2:myhash5")));

            Result[] results = htable.get(queryRowList);
            for (Result r : results) {
                //do something
            }
        }
        finally {
            if (htable != null) {
                htable.close();
            }
        }
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:51:23.847

您可以将[MultiAction](https://hbase.apache.org/0.94/apidocs/org/apache/hadoop/hbase/client/class-use/MultiAction.html)用作可以批量执行的多个 get（或 put、delete 和它们的组合）的容器。

也就是说，请注意，您可以执行多个 get 操作，而无需每次都关闭/重新打开连接。

# antlr - ANTLR：属性评估器

> ID：13310435
> 
> 赞同：1
> 
> 时间：2012-11-09T15:00:56.117
> 
> 标签：antlr

我是 ANTLR 世界的新手，所以我希望有人可以进行代码审查，看看我正在尝试做的事情是否以最有效的方式完成。我要做的是解析本质上是一个（多）条件语句，它将被转换为 Lambda 语句：

例子：

```
Student Object
{
   string ID { get; set;}
   string Campus { get; set;}
   string FirstName { get; set;}
}

Evaluation Statements:
StudentID="XXX"
StudentID="XXX" || FirstName=="John"
(StudentID="XXX" || FirstName=="John")
(StudentID="XXX" || FirstName=="John") || (StudentID="YYY" || FirstName=="DOE") 
```

以下是我到目前为止创建的代码。有人可以让我知道我是否朝着正确的方向前进：

```
/*lexer */grammar Test;

options {   
  output=AST;
}

tokens {

}

/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/
  expr  :   multiExpression ((AND^|OR^) multiExpression)* EOF! ;

  multiExpression 
    :   primaryExpression ((AND^|OR^) primaryExpression)* |
            LPAREN! primaryExpression ((AND^|OR^) primaryExpression)* RPAREN!;

  primaryExpression 
    :   ID (EQUALS^ | GTR^ | LTN^ | GTREQ^ | LSTEQ^ | NOT^) value |
        LPAREN! ID (EQUALS^ | GTR^ | LTN^ | GTREQ^ | LSTEQ^ | NOT^) value RPAREN! ;

   value:  STRING
      |ID
      |INT
      |FLOAT
      |CHAR;

 //expr    : term ( ( PLUS | MINUS )  term )* ;

 //term    : factor ( ( MULT | DIV ) factor )* ;

 //factor  : NUMBER ;

 /*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/

EQUALS  : '==';
GTR     : '>';
LTN     : '<';  
GTREQ   : '>=';
LSTEQ   : '<=';
NOT     : '!=';
OR      : '||';
LPAREN  : '(';
RPAREN  : ')';
AND     : '&&';
ID      : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*;
INT     : ('0'..'9')+;
FLOAT
    :   ('0'..'9')+ '.' ('0'..'9')* EXPONENT?
    |   '.' ('0'..'9')+ EXPONENT?
    |   ('0'..'9')+ EXPONENT
    ;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;

CHAR:  '\'' ( ESC_SEQ | ~('\''|'\\') ) '\''
    ;

STRING
    :  '"' ( ESC_SEQ | ~('\\'|'"') )* '"'
    ;

fragment
EXPONENT : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

fragment
HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
ESC_SEQ
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   UNICODE_ESC
    |   OCTAL_ESC
    ;

fragment
OCTAL_ESC
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UNICODE_ESC
    :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
    ; 
```

# javascript - 应用自定义样式时拆分 HTML 标签

> ID：13310440
> 
> 赞同：3
> 
> 时间：2012-11-09T15:01:12.997
> 
> 标签：javascript, html, rangy

当您使用 WYSIWYG 编辑器并选择文本并对其应用例如粗体字时，浏览器将使用`<span style="font-weight:bold">`标签包装所选内容（假设您已调用`document.execCommand("useCSS", false)`和/或`document.execCommand("styleWithCSS", true)`）。现在，如果您选择其中的一个子集并再次应用粗体，它会将原始粗体标签拆分为如下内容

```
<span style="font-weight:bold">Something</span>
Not selected 
<span style="font-weight:bold">Selected</span> 
```

在我正在开发的产品中，我们支持一系列 WYSIWYG 功能，包括一些 execCommand 不直接支持的功能（例如添加文本级别（类）以同时应用字体系列和字体大小），以及我们遇到了嵌套标签的问题。有没有办法告诉浏览器从样式中删除当前范围并基本上关闭以前的标签并在内容之后打开新标签？

我没有立即在[execCommand 参考](http://help.dottoro.com/larpvnhw.php)中看到任何内容。

我们使用[rangy 1.2.3](http://code.google.com/p/rangy/)取得了一些成功，但我不知道我是否缺少某些命令。

当您添加多种样式时，这会变得更加复杂，因为在上面的示例中添加粗体和斜体，然后在中间删除粗体将产生三个跨度，两个带有粗体和斜体文本，中间只有斜体。

目前，我们将编辑器的使用限制在 Chrome 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:12:28.610

如果您关心的是正确呈现的混乱输出，您应该从与编辑器无关的角度来处理它，因为这会影响所有 HTML ，但尤其是范围很广和其他[WYSIWYG](https://code.google.com/p/rangy/)编辑器/用户格式的代码。

减少混乱的最快方法是限制用户可用的标记选项：

*   使用大量代码限制（如果不禁用）字体或其他样式/元素
*   考虑为这种困境设计的解决方案，例如 BBCode 或 Markdown 语法

如果您因为客户端需要 MS Word 中的红/蓝文本而无法更换编辑器，那么[PHP Tidy](http://php.net/manual/en/tidy.examples.basic.php)应该就足够了，因为它甚至可以处理 MS Office 的 HTML 导出！以下`merge-spans`配置的功能应该可以解决问题。

```
function tidyHTML($input){
    $tidy = new tidy();
    $config = array(
        'ascii-chars' => true,
        'bare' => true,
        'clean' => true,
        'drop-empty-paras' => true,
        'drop-proprietary-attributes' => true,
        'hide-endtags' => true,
        'indent' => true,
        'logical-emphasis' => true,
        'merge-spans' => true,
        'show-body-only' => true,
        'word-2000' => true,
        'wrap' => false
    );
    return $tidy->repairString($input, $config);
}
echo tidyHTML($wysiwyg_output); 
```

可以在[此处](http://tidy.sourceforge.net/docs/quickref.html)找到选项的文档。

# .net - 我的 2011 年 6 月 CTP 实体框架 EDMX 正在使设计器崩溃，因为我安装了 Visual Studio 2012

> ID：13310443
> 
> 赞同：0
> 
> 时间：2012-11-09T15:01:18.683
> 
> 标签：.net, entity-framework

我有一个使用 2011 年 6 月 CTP 的 EDMX，它运行良好。现在我已经安装了 VS 2012，它让设计器崩溃了

信息：

> 找不到方法：'System.Collections.ObjectModel.ReadOnlyCollection`1 System.Data.Metadata.Edm.EdmItemCollection。GetPrimitiveTypes（双）'。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:21:58.420

`System.Data.Metadata.Edm.EdmItemCollection.GetPrimitiveTypes(Double)`EF 2011 年 6 月 CTP 中不存在，而 .NET Framework 4.5 中存在。卸载 June CTP，一切正常 - 工件（csdl、ssdl 和 msl）没有太大变化，因此您的 edmx 文件应该可以继续工作。不知道你为什么继续使用 CTP，而从那时起已经有许多版本（Beta、RC），**包括 RTM**。

# ssl - 宁异步http客户端如何接受任何证书

> ID：13310444
> 
> 赞同：4
> 
> 时间：2012-11-09T15:01:22.627
> 
> 标签：ssl, netty, ning, asynchttpclient

我在这个页面上看到如何做 https

[http://sonatype.github.com/async-http-client/ssl.html](http://sonatype.github.com/async-http-client/ssl.html)

但是，如果我只想忽略并接受任何证书，因为在这种环境中，我现在不关心中间人，因为它处于孤立的环境中，我只是在做一些事情来对 QA 数据进行自动化测试。

也许我的问题是如何在 java 的 SSL 堆栈中伪造 SSL，以便它在另一端接受任何证书（这不是双向的，因为它是 https）。

上面链接中客户端的通用代码是

```
 char[] keyStorePassword = "changeit".toCharArray();
    KeyStore ks = KeyStore.getInstance("JKS");
    //ks.load(keyStoreStream, keyStorePassword);

    char[] certificatePassword = "changeit".toCharArray();
    KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
    kmf.init(ks, certificatePassword);

    KeyManager[] keyManagers = kmf.getKeyManagers();
    javax.net.ssl.TrustManager tm = new MyTrustMgr();
    javax.net.ssl.TrustManager[] trustManagers = new javax.net.ssl.TrustManager[]{tm };
    SecureRandom secureRandom = new SecureRandom();

    SSLContext ctx = SSLContext.getInstance("TLS");
    ctx.init(keyManagers, trustManagers, secureRandom);
    return ctx; 
```

好的，解决这个问题，我发现由于某种原因它仍然无法正常工作

```
 X509TrustManager tm = new X509TrustManager() {
        public void checkClientTrusted(X509Certificate[] xcs,
                String string) throws CertificateException {
        }
        public void checkServerTrusted(X509Certificate[] xcs,
                String string) throws CertificateException {
        }
        public X509Certificate[] getAcceptedIssuers() {
            return null;
        }
    };

    SSLContext ctx = SSLContext.getInstance("TLS");
    ctx.init(null, new TrustManager[] { tm }, null);
    return ctx; 
```

谢谢，院长

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-09-22T09:59:07.897

聚会晚了 5 年，但我今天也遇到了同样的问题，你的问题在谷歌搜索中的排名很高。所以也许我的回答会帮助别人。

使用您创建 SSLContext 的代码，此代码将创建一个 AsyncHttpClient ，它将忽略（或盲目接受）所有 SSL 证书：

```
 AsyncHttpClientConfig config = new AsyncHttpClientConfig.Builder()
            .setSSLContext(createSslContext())
            .build();

    httpClient = new AsyncHttpClient(config); 
```

如上所述，createSslContext 方法是您在答案中的代码的精确复制和粘贴：

```
 private SSLContext createSslContext() throws Exception {
        X509TrustManager tm = new X509TrustManager() {

            public void checkClientTrusted(X509Certificate[] xcs,
                                       String string) throws CertificateException {
            }

            public void checkServerTrusted(X509Certificate[] xcs,
                                       String string) throws CertificateException {
            }

            public X509Certificate[] getAcceptedIssuers() {
                return null;
            }
        };

        SSLContext ctx = SSLContext.getInstance("TLS");
        ctx.init(null, new TrustManager[] { tm }, null);
        return ctx;
    } 
```

上述示例适用于 Async HTTP Client 1.9.40 和 Java 1.8

# c# - 复制 DataGridViewColumnHeaderCell obj

> ID：13310445
> 
> 赞同：0
> 
> 时间：2012-11-09T15:01:25.990
> 
> 标签：c#, winforms, ado.net

我不认为 DataGridViewColumnHeaderCell 实现了 IClonable 所以我正在考虑使用 Xml.Serialization 来复制这个对象以避免不必要的引用。你怎么看？矫枉过正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:08:03.633

You haven't to do it, `DataGridViewColumnHeaderCell` implements the [`IClonable.Clone()`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.datagridviewcolumnheadercell.clone.aspx) method.

```
object clonedObject = myDataGridViewColumnHeaderCell.Clone(); 
```

**EDIT:**

> but it doesn't copy the data. And ColumnIndex is a readonly property which is one of 2 properties I'm interested in preserving.

Sincerly I've never used it on `DataGridViewColumnHeaderCell`, but it should work. Howerever If you just need to preserve two properties you can create your *customized Clone method*:

```
public static class Utilities{
    public static object CloneObject(this DataGridViewColumnHeaderCell myObj){
         DataGridViewColumnHeaderCell clonedObject = new DataGridViewColumnHeaderCell();

         //here clone your properties
         clonedObject.ColumnIndex = myObj.ColumnIndex;              

         return clonedObject;
    }
} 
```

Then:

```
object clonedObject = myDataGridViewColumnHeaderCell.CloneObject(); 
```

**PS:** In the case of `ColumnIndex` you just need to assign it to the new object because it's of type int which is a struct and you don't pass a reference.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:03:07.187

我对此进行了测试，克隆从未出于某种未知原因复制该对象。我不得不复制每一行的属性。

# java - 如何使用 ObjectAid 添加方法和属性？

> ID：13310446
> 
> 赞同：1
> 
> 时间：2012-11-09T15:01:25.733
> 
> 标签：java, objectaid

我的目标是向类图中添加方法和属性，使其在类中生成代码存根。

这是一个例子：

如果我只是开始一个项目。我有一个名为的类`tuna`，我想添加方法`swim()`，`eat()`并`poop()`用它生成存根。这样，当我完成所有课程并开始编写代码时，我不会忘记我在想什么。

ObjectAid 会不会是适合这项工作的错误工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:22:21.127

ObjectAid 只能显示源代码，您必须去编辑器进行更改。当您双击一个类、方法或字段时，一个编辑器将在适当的位置打开。

# matlab - 从函数内清除基本工作区变量

> ID：13310449
> 
> 赞同：3
> 
> 时间：2012-11-09T15:01:33.777
> 
> 标签：matlab

使用以下代码，我已将变量添加到基础工作区中：

```
function data_startup()
bdclose all;
data=load(fullfile('B', 'C', 'data.mat')); 
file_variables=fieldnames(data);% get the field names as cell array
for ii=1:length(file_variables)
     assignin('base', file_variables{ii}, data.(file_variables{ii}));
end 
```

现在，我想从基础工作区中清除变量，我试过了：

```
evalin('base','clear file_variables'); 
```

但这不起作用:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:04:15.023

您正在尝试使用`file_variables`可能不存在的 name 清除变量。你想要的是：

```
evalin('base',['clear' sprintf(' %s',file_variables{:})]); 
```

如果您想了解发生了什么：在您的函数中运行并调试此行，然后检查结果

```
['clear' sprintf(' %s',file_variables{:})] 
```

这将是`evalin`.

## 更多信息：

`[a b c]`连接`a`,`b`和`c`中的字符串，因为字符串本身就是`1xN`数组。
`{:}`将元胞数组作为逗号分隔的列表返回，然后将其输入到`sprintf`，更多信息请[点击此处](http://www.mathworks.nl/help/matlab/matlab_prog/comma-separated-lists.html#br2js35-13)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T09:44:01.043

以上不起作用。我不知道为什么。函数没有给出任何提示。

但这是一个有效的解决方案：

```
clear_names = fieldnames(Data.(itv{i}));   %Get fieldnames to be deleted
feval(@clear,clear_names{:}) 
```

变量`clear_names`是一个字符串单元格

格鲁斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T10:13:54.580

要清除所有基本变量，请关闭所有 matlab 窗口并清除命令窗口。

我称之为wipe.m

```
function wipe
clc;
bdclose all;
close all;
imtool close all;
evalin('base','clear all'); 
```

我对 stackoverflow 的第一个贡献

多吉

# node.js - 在 nodejs 中使用 Apache Thrift 进行序列化-反序列化

> ID：13310451
> 
> 赞同：5
> 
> 时间：2012-11-09T15:01:42.393
> 
> 标签：node.js, serialization, deserialization, thrift

我正在开发一个 Node.js 应用程序，我需要序列化和反序列化 .thrift 文件中定义的结构的实例，如下所示：

```
 struct Notification {
   1: string subject,
   2: string message
 } 
```

现在这在 Java 中很容易实现，根据[http://www.gettingcirrius.com/2011/03/rabbitmq-with-thrift-serialization.html](http://www.gettingcirrius.com/2011/03/rabbitmq-with-thrift-serialization.html)上的教程：

```
 Notification notification = new Notification();
    TDeserializer deserializer = new TDeserializer();
    deserializer.deserialize(notification, serializedNotification);
    System.out.println("Received "+ notification.toString()); 
```

但是我找不到使用 Thrift 的 nodejs 库是如何做到这一点的。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T17:57:30.583

好的，在浪费了大量时间进行研究并尝试了不同的解决方案之后，我终于找到了自己问题的答案：

```
//SERIALIZATION:
var buffer = new Buffer(notification);
var transport = new thrift.TFramedTransport(buffer);
var binaryProt = new thrift.TBinaryProtocol(transport);
notification.write(binaryProt); 
```

其中通知是我希望序列化的对象。此时，可以在 transport.outBuffers 字段中找到字节数组： var byteArray = transport.outBuffers;

对于反序列化：

```
var tTransport = new thrift.TFramedTransport(byteArray);
var tProtocol = new thrift.TBinaryProtocol(tTransport);
var receivedNotif = new notification_type.Notification();
receivedNotif.read(tProtocol); 
```

假设以下行已从 nodejs 库中添加到 index.js 文件中以进行节俭：

```
exports.TFramedTransport = require('./transport').TFramedTransport;
exports.TBufferedTransport = require('./transport').TBufferedTransport;
exports.TBinaryProtocol = require('./protocol').TBinaryProtocol; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-14T11:58:32.677

这是我在浏览器中运行的 TypeScript 版本。`npm install buffer`使用前。

如果你删除它应该在节点上工作`import { Buffer }`。

```
/*
 Thrift serializer for browser and node.js

 Author: Hirano Satoshi

 Usage:
    let byteArray = thriftSerialize(thriftObj);
    let thriftObj2 = thriftDeserialize(byteArray, new ThriftClass())
    let mayBeTrue = byteArrayCompare(byteArray, thriftSerialize(thriftObj2))
 */

import { TBufferedTransport, TFramedTransport, TJSONProtocol, TBinaryProtocol } from 'thrift';
import { Buffer } from 'buffer';

export function thriftSerialize(thriftObj: any): Buffer {
    let transport = new TBufferedTransport(null);
    let protocol = new TBinaryProtocol(transport);
    thriftObj.write(protocol);

    // copy array of array into byteArray
    let source = transport.outBuffers;
    var byteArrayLen = 0;
    for (var i = 0, len = source.length; i < len; i++)
        byteArrayLen += source[i].length;
    let byteArray = new Buffer(byteArrayLen);
    for (var i = 0, len = source.length, pos = 0; i < len; i++) {
        let chunk = source[i];
        chunk.copy(byteArray, pos);
        pos += chunk.length;
    }
    return byteArray;
}

export function thriftDeserialize(byteArray: Buffer, thriftObj: any): any {
    let transport = new TBufferedTransport(byteArray);
    let callback = (transport_with_data) => {
        var proto = new TBinaryProtocol(transport_with_data);
        //    var proto = new TJSONProtocol(transport);
        thriftObj.read(proto);
    }
    // var buf = new Buffer(byteArray);

    TBufferedTransport.receiver(callback)(byteArray);
    return thriftObj;
}

export function byteArrayCompare(array1, array2): boolean {
    if (!array1 || !array2)
        return false;
    let val = array1.length === array2.length && array1.every((value, index) => value === array2[index])
    return val;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-24T11:59:13.833

不知何故，我没有在以下位置找到字节数组：

```
transport.outBuffers 
```

我需要做以下事情：

```
 var transport = new Thrift.TFramedTransport(null, function(bytes){
            dataWrapper.out = bytes;
            cb(dataWrapper)
        })

        var binaryProt = new Thrift.TCompactProtocol(transport);
        notification.write(binaryProt) ;
        transport.flush() ; //important without the flush the transport callback will not be invoked 
```

# informatica-powercenter - 动态查找缓存何时更新？

> ID：13310457
> 
> 赞同：1
> 
> 时间：2012-11-09T15:02:06.333
> 
> 标签：informatica-powercenter, informatica

有人可以向我解释动态查找缓存文件何时更新吗？

是在查找转换完成还是行源到目标路径结束时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:00:33.433

每当对其进行查找时，都会更新动态查找缓存。如有必要，集成服务将在处理启用了动态缓存的查找转换时更改缓存。

如果查找失败，即在缓存中未找到传入端口值，则在该点将它们添加到缓存中（取决于转换的配置方式），并且集成服务继续处理下游转换。

这意味着映射中的下游转换以及通过映射处理的任何其他行应该能够在为当前行处理查找时“看到”新的缓存记录。

# angularjs - AngularJS select2 - 如何创建指令？

> ID：13310461
> 
> 赞同：1
> 
> 时间：2012-11-09T15:02:23.947
> 
> 标签：angularjs

（对不起我的英语不好 ：）

我在我的表单中使用[Select2](http://ivaynberg.github.com)和 AngularUI ui-select2 指令，如下所示：

```
<input ng-model="city" type="text" ui-select2="setupCitySelect" /> 
```

其中 setupCitySelect - 带有 select2 选项的对象。我将他设置在适当的范围内

```
$scope.setupCitySelect = {
    allowClear: true,
    minimumInputLength: 2

    ...etc, about 50 SLOC
} 
```

一切正常。但是当我们在页面（或页面的一部分）上有五个 select2 元素时——CitySelect、UserSelect、ConditionSelect 等，我们会得到大量代码，其中大部分是相同的。AngularUI 提供*“全局默认值”*。所以我们可以移动重复代码（在指令中）：

```
var dirs = angular.module('vipc.directives', ['ui']);

// defaults setting for UI
dirs.value('ui.config', {
    select2: {
        allowClear: true,
        minimumInputLength: 2,
        formatInputTooShort: function(term, minLenght) {
            var rest = minLenght - term.length;
            return "minimum: "+rest;
        },
...etc. 
```

但是我们仍然需要在控制器中进行一些工作：设置独特的属性，例如 ajax-url ......而且它出现在几个页面上，几个控制器。啊……是的，我可以把它放到一个文件中，比如说 common.js。但我认为 - 这不是最好的方式。安古拉斯说：“使用指令，卢克！”。但是怎么做？太复杂的文档。我阅读了[文档](http://docs.angularjs.org/guide/directive)。三次。没有成功。我写了一些简单的目录，但是这个......它应该具有“隔离”范围 - 可以是页面上的 2 CitySelect - 在上面的搜索表单和模态表单中。编译功能？链接功能？

我所需要的只是

```
<myapp-city-select id="city"></myapp-city-select>
<myapp-user-select></myapp-city-select>
...later, same html file
<myapp-city-select id="city2"></myapp-city-select> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T05:22:03.517

它应该在控制器中。这是[笨蛋](http://plnkr.co/edit/PQSq18?p=preview)。向您展示所有指令共享相同的数据。

因此，您可以在控制器中有一个带有常用选项的指令，并将特定选项传递给它。

另一种选择是拥有一个定义通用选项的服务，并将服务注入到任何你想要的地方。

# continuous-integration - CruiseControl 是否支持 Maven3？

> ID：13310463
> 
> 赞同：1
> 
> 时间：2012-11-09T15:02:27.667
> 
> 标签：continuous-integration, maven-3, cruisecontrol

我正在做一些研究，以找出最好的持续集成服务器是什么。为此，我想知道（如标题所示）：

CruiseControl 是否支持 Maven3？

在 CruiseControl 的主页上，我刚刚找到了 maven2。

提前致谢

# graphviz - 混合有向/无向图

> ID：13310465
> 
> 赞同：5
> 
> 时间：2012-11-09T15:02:32.973
> 
> 标签：graphviz, dot

> **可能的重复：**
> [Graphviz Dot，混合有向和无向](https://stackoverflow.com/questions/13236975/graphviz-dot-mix-directed-and-undirected)

我需要绘制一个有一些无向边的有向图。这可能使用 GraphViz 吗？只是`--`在 a`digraph` `->`中使用`graph`是一个语法错误。

# python - python-twisted：用户注销时如何停止守护进程？

> ID：13310469
> 
> 赞同：1
> 
> 时间：2012-11-09T15:02:42.387
> 
> 标签：python, linux, signals, twisted, daemon

当用户注销时，由该用户启动的 twistd 守护进程被杀死。但是，它会留下 .pid 文件，因此我希望以更优雅的方式关闭守护程序。理想情况下，我会对一些信号做出反应并使用`reactor.stop()`.

我怎样才能做到这一点？

# sql-server - ReadCommited IL 下的死锁

> ID：13310472
> 
> 赞同：0
> 
> 时间：2012-11-09T15:02:53.097
> 
> 标签：sql-server, profiling, deadlock, isolation-level

如果一个进程已经在另一个表上运行一个 select 语句，为什么在 RC 隔离级别运行事务的进程会持有**IX页锁？**我的意思是，我认为当语句完成时锁会被释放（这就是我们可以进行不可重复读取的原因）。

这是死锁xml：

```
<deadlock-list>
 <deadlock victim="process5cd048">
  <process-list>
   <process id="process5cd048" taskpriority="0" logused="10000" waittime="2220" schedulerid="3" kpid="5764" status="suspended" spid="62" sbid="0" ecid="0" priority="0" trancount="1" lastbatchstarted="2012-11-09T12:16:52.730" lastbatchcompleted="2012-11-09T12:16:52.730" lastattention="2012-11-08T17:33:28.597" clientapp=".Net SqlClient Data Provider" hostname="CWCEINAW" hostpid="4908" loginname="cwcuser" isolationlevel="read committed (2)" xactid="1157173773" currentdb="5" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
    <executionStack>
     <frame procname="adhoc" line="1" sqlhandle="0x020000005b3f1719cc3b4ad87e96487fe7fbf624ab5c2984">
SELECT * FROM WP_CashCenter_StockTransactionLine
                    WHERE [StockTransaction_id] IN (
                        SELECT DISTINCT [ST].[id]
                        FROM WP_CashCenter_StockTransaction AS [ST]
                            LEFT JOIN WP_CashCenter_StockTransactionLine AS [STL] ON ([STL].[StockTransaction_id] = [ST].[id])
                        WHERE [ST].[Type] IN (1, 0, 10, 9)
AND ([STL].[Direction] IN (1, 0) OR [STL].[id] IS NULL) 
AND [ST].[Status] IN (0, 1)
AND ([STL].[StockContainer_id] = 3000080311 OR [ST].[StockContainerID] = 3000080311))     </frame>
    </executionStack>
    <inputbuf>
SELECT * FROM WP_CashCenter_StockTransactionLine
                    WHERE [StockTransaction_id] IN (
                        SELECT DISTINCT [ST].[id]
                        FROM WP_CashCenter_StockTransaction AS [ST]
                            LEFT JOIN WP_CashCenter_StockTransactionLine AS [STL] ON ([STL].[StockTransaction_id] = [ST].[id])
                        WHERE [ST].[Type] IN (1, 0, 10, 9)
AND ([STL].[Direction] IN (1, 0) OR [STL].[id] IS NULL) 
AND [ST].[Status] IN (0, 1)
AND ([STL].[StockContainer_id] = 3000080311 OR [ST].[StockContainerID] = 3000080311))    </inputbuf>
   </process>
   <process id="process33ebc8" taskpriority="0" logused="10676" waitresource="PAGE: 5:1:1144344" waittime="2221" ownerId="1157173773" transactionname="user_transaction" lasttranstarted="2012-11-09T12:16:52.197" XDES="0x41518b140" lockMode="S" schedulerid="5" kpid="5272" status="suspended" spid="62" sbid="0" ecid="9" priority="0" trancount="0" lastbatchstarted="2012-11-09T12:16:52.730" lastbatchcompleted="2012-11-09T12:16:52.730" clientapp=".Net SqlClient Data Provider" hostname="CWCEINAW" hostpid="4908" isolationlevel="read committed (2)" xactid="1157173773" currentdb="5" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
    <executionStack>
     <frame procname="adhoc" line="1" sqlhandle="0x020000005b3f1719cc3b4ad87e96487fe7fbf624ab5c2984">
SELECT * FROM WP_CashCenter_StockTransactionLine
                    WHERE [StockTransaction_id] IN (
                        SELECT DISTINCT [ST].[id]
                        FROM WP_CashCenter_StockTransaction AS [ST]
                            LEFT JOIN WP_CashCenter_StockTransactionLine AS [STL] ON ([STL].[StockTransaction_id] = [ST].[id])
                        WHERE [ST].[Type] IN (1, 0, 10, 9)
AND ([STL].[Direction] IN (1, 0) OR [STL].[id] IS NULL) 
AND [ST].[Status] IN (0, 1)
AND ([STL].[StockContainer_id] = 3000080311 OR [ST].[StockContainerID] = 3000080311))     </frame>
    </executionStack>
    <inputbuf>
    </inputbuf>
   </process>
   <process id="process4e13048" taskpriority="0" logused="11448" waitresource="PAGE: 5:1:1144209" waittime="2172" ownerId="1157175935" transactionname="user_transaction" lasttranstarted="2012-11-09T12:16:52.997" XDES="0x3458e63b0" lockMode="S" schedulerid="7" kpid="3912" status="suspended" spid="58" sbid="0" ecid="0" priority="0" trancount="1" lastbatchstarted="2012-11-09T12:16:53.070" lastbatchcompleted="2012-11-09T12:16:53.067" clientapp=".Net SqlClient Data Provider" hostname="CWCEINAW" hostpid="4908" loginname="cwcuser" isolationlevel="read committed (2)" xactid="1157175935" currentdb="5" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
    <executionStack>
     <frame procname="adhoc" line="1" stmtstart="160" sqlhandle="0x02000000193c8a3bb37a516f7a7155b01a67b7772459f53e">
SELECT [D].*
                        FROM WP_Discrepancy as [D]
                        WHERE [D].[Level] = @Level
                        AND [D].[Status] IN (@StatusInProgress, @StatusConfirmed)
                        AND [D].[StockContainerID] = @StockContainerID     </frame>
     <frame procname="unknown" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000">
unknown     </frame>
    </executionStack>
    <inputbuf>
(@Level int,@StatusInProgress int,@StatusConfirmed int,@StockContainerID bigint)SELECT [D].*
                        FROM WP_Discrepancy as [D]
                        WHERE [D].[Level] = @Level
                        AND [D].[Status] IN (@StatusInProgress, @StatusConfirmed)
                        AND [D].[StockContainerID] = @StockContainerID    </inputbuf>
   </process>
  </process-list>
  <resource-list>
   <exchangeEvent id="Pipe43a6da400" WaitType="e_waitPipeGetRow" nodeId="1">
    <owner-list>
     <owner id="process33ebc8"/>
    </owner-list>
    <waiter-list>
     <waiter id="process5cd048"/>
    </waiter-list>
   </exchangeEvent>
   <pagelock fileid="1" pageid="1144344" dbid="5" objectname="WebPortal.dbo.WP_CashCenter_StockTransactionLine" id="lock326ee4180" mode="IX" associatedObjectId="72057594149601280">
    <owner-list>
     <owner id="process4e13048" mode="IX"/>
    </owner-list>
    <waiter-list>
     <waiter id="process33ebc8" mode="S" requestType="wait"/>
    </waiter-list>
   </pagelock>
   <pagelock fileid="1" pageid="1144209" dbid="5" objectname="WebPortal.dbo.WP_Discrepancy" id="lock339da6b80" mode="SIX" associatedObjectId="72057594163625984">
    <owner-list>
     <owner id="process5cd048" mode="SIX"/>
    </owner-list>
    <waiter-list>
     <waiter id="process4e13048" mode="S" requestType="wait"/>
    </waiter-list>
   </pagelock>
  </resource-list>
 </deadlock>
</deadlock-list> 
```

如您所见，进程**process4e13048**在 table 的某个页面上持有**IX**锁`WP_CashCenter_StockTransactionLine`。当前尝试执行的语句是一个`SELECT`无法完成的语句，因为它想要一个与进程**process5cd048持有的****SIX**`WP_Discrepancy`锁相冲突的页面上的共享锁（这很明显）。

 ****同样，为什么后一个进程会持有那个**六**锁？根据执行堆栈，正在执行的语句是一个`SELECT`表`WP_CashCenter_StockTransactionLine`。

**如果我正在使用Serializable** IL运行事务，我希望在同一进程中由先前语句获取的锁能够保留。但事实并非如此。

谁能解释一下我在 RC 隔离级别上做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:25:48.297

> 我认为当语句完成时锁会被释放

不写锁（X、IX、S-IX 等）。写锁必须服从[两阶段锁定](http://en.wikipedia.org/wiki/Two-phase_locking)，以便在事务结束时释放它们。想想相反的意思是什么：DELETE 在事务结束之前释放行删除的 X 锁，稍后并发事务用相同的键插入一个新行（它可以，因为没有锁），现在第一个事务想要回滚。它可以做什么，它不能插入它删除的行，因为键是同时被第二个事务获取的，所以它不能回滚。

因此，在运行 SELECT 时可能会发生死锁，因为运行这些选择的事务在运行 SELECT*之前*已经获得了写锁。****

# sql-server - 如何理解 SQL Server 中的主体？

> ID：13310473
> 
> 赞同：7
> 
> 时间：2012-11-09T15:02:52.053
> 
> 标签：sql-server, database-permissions, principal

这听起来很愚蠢，但我发现它真的很混乱：在 MSDN 中，定义是可以请求 SQL Server 资源的实体。基本上有三种类型的主体：Windows 级主体、SQL Server 级主体和数据库级主体。到目前为止还好。只是它给我的印象是一个主体的标识符应该与其他主体的标识符不同，无论这个原理是什么类型。（如果这三种类型的所有主体都可以排列在一个表中，它们将具有唯一的标识符）

令人困惑的部分来自以下这三个查询：

1)

```
Select name,principal_id from sys.database_principals 
```

（注意：我在一个数据库上运行它）

2)

```
Select name,principal_id from sys.server_principals 
```

现在我知道第一个返回数据库用户主体，而第二个返回服务器用户主体（如果我错了，请纠正我）。但是为什么第一个查询中的一行可以与第二个查询具有相同的 principal_id 呢？例如，数据库主体中的一行将是：

**名称：INFORMATION_SCHEMA，principal_id：3**

而第二个查询的一行是

**名称：系统管理员，principal_id：3**

这两个 principal_id 是什么？正如我所提到的，我认为两个主体的标识符会不同，即使一个是 DB 用户而另一个是服务器用户（从名称中我假设 principal_id 是标识符）。

好吧，如果 principal_id 对于所有主体来说不是唯一的，而只是在每个查询的范围内是唯一的（第一个查询中的 principal_id 只是数据库用户的标识符，所以它可能与服务器用户的标识符相同），我然后有第三个查询，但不明白这是什么意思：

3)

```
SELECT
  SDP.PRINCIPAL_ID AS [Principal ID], 
  SDP.NAME AS [Database UserName], 
  SDP.TYPE_DESC AS [Datebase UserType],  
  SSP.NAME AS [Server LoginName], 
  SSP.TYPE_DESC AS [Server LoginType]
FROM sys.database_principals SDP 
INNER JOIN sys.server_principals SSP 
ON SDP.PRINCIPAL_ID = SSP.PRINCIPAL_ID 
```

如果两个 principal_id 仅在它们的范围内是唯一的，那么在两个 principal_id 上进行内部连接意味着什么？内连接意味着这个列是共同唯一的，对吧？

一定有一些非常基本的东西我误解了。感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T15:20:53.837

`principal_id`s on[`sys.database_principals`](http://msdn.microsoft.com/en-us/library/ms187328.aspx)和之间没有对应关系[`sys.server_principals`](http://msdn.microsoft.com/en-us/library/ms188786.aspx)。首先，它仅被记录为在数据库中是唯一的。其次，它们在服务器中是独一无二的。并且在同一视图中这些列之间没有记录的关系。

事实上，低编号`principal_id`的 s 很可能在两个视图中都被分配，并且它们所关联的主体是不相关的。

所以显示两个视图之间连接的查询`principal_id`是错误的。

# syntax - 在 ANTLR 中创建 C AST

> ID：13310474
> 
> 赞同：1
> 
> 时间：2012-11-09T15:03:00.297
> 
> 标签：syntax, tree, antlr, abstract, abstract-syntax-tree

我搜索了很多来源，但还没有找到任何东西。我正在尝试为用 C 编写的输入文件创建一个 AST（在 Java 中）。我找到了 ANTLR，它与 ANTLR 示例中的“官方”C-Grammar 一起使用。尽管如此，我还是阅读了有关编辑语法树的语法，例如使用“^”来标记根等。

当我将 Cg 的输出设置为 output=AST 时，会打印一个空图（一些点乱码）。此外，我在语法中找不到任何提到的树符号。

所以我需要假设，该语法不支持 AST 生成。

是否有任何有效的 C 语法，其中包含 AST 的语法？我需要在适当的时间找到解决方案，并且我想在开始编辑给定的语法之前检查所有可用的资源（我想这将是大量的工作）。

谢谢你的时间，

西蒙

# php - MongoDb 插入错误 (php) - BSON 文档为 X 字节，最大值为 0

> ID：13310477
> 
> 赞同：0
> 
> 时间：2012-11-09T15:03:05.693
> 
> 标签：php, mongodb, insert, mongodb-php, database

我刚开始使用 MongoDB。我可以使用 mongo 命令在终端中插入新记录，例如：

```
db.test.insert({var: 'data' }) . 
```

我可以用 php 获取这些记录，例如：

```
Array
(
    [0] => Array
        (
            [_id] => MongoId Object
                (
                    [$id] => 509d0a4ae6c4d3ca0ba30572
                )

            [deneme] => 1
        )

    [1] => Array
        (
            [_id] => MongoId Object
                (
                    [$id] => 509d09e2a3047c588723f9bf
                )

            [deneme] => 
            [name] => aa
        )

) 
```

但我不能用 php 插入记录，例如：

```
$m->insert(array(
'url' => 'http://www.query7.com',
'software' => 'wordpress',
'tutorials' => array('php','javascript','web development'),
)); 
```

我得到这个错误： **致命错误：未捕获的异常“MongoException”，消息“BSON doc 的大小为 145 字节，最大值为 0”**

我已经用不同的 php 类进行了测试，但我总是得到同样的错误。什么是“BSON doc 的大小”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:09:29.673

我认为您不能将所有内容都与 $m 变量一起使用；尝试做类似 php 文档推荐的事情：

```
$m = new Mongo(); 
$db = $m->selectDB('test');
$collection = new MongoCollection($db, 'phpmanual');

$collection->insert(array(
    'url' => 'http://www.query7.com',
    'software' => 'wordpress',
    'tutorials' => array('php','javascript','web development'),
)); 
```

[关于 Mongo 的 PHP 文档](http://php.net/manual/en/mongocollection.insert.php)

确保您使用的是最新的 mongoDB 版本，可在[此处找到](http://www.mongodb.org/downloads)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:50:08.313

这通常可以通过以下任一方式发生：

*   Bad download of your MongoDB, in which case I would download the latest version from the MongoDB site: [http://www.mongodb.org/downloads](http://www.mongodb.org/downloads)
*   Or mixing the very latest PHP driver with such an old version.

There has been a breaking change in the PHP driver since v1.6 of MongoDB but it was only concerned with the way PHP connected to MongoDB and a few other things. It should not have effected whether or not you can query an old version of MongoDB.

So there is a very high chance this is not the problem however, I would not rule it out.

Either way I would:

*   Upgrade from Ubuntu 7.11, it is no longer truely mantained, to 12.04
*   Upgrade to the latest MongoDB
*   Upgrade your PHP version as well

It could just be a bad mixture of all of these.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:55:47.290

I've done some research and it seems that the MongoDB version you are using does not provide the `maxBsonObjectSize` when the `db.isMaster()` function is called (see [here](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/sw7j6MaS-Vw)).

This might be conflicting with the PHP drivers you are using to access the MongoDB database, since they try to get the max size from the connection object (see line 604 [here](https://github.com/mongodb/mongo-php-driver/blob/master/collection.c)):

```
if (FAILURE == php_mongo_write_insert(&buf, Z_STRVAL_P(c->ns), a, connection->max_bson_size TSRMLS_CC)) { 
```

You should update your MongoDB database or try to find a compatible PHP driver with the database version you are using.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:27:26.583

Most probably the problem is with an old version of Mongo. Judging by your answer [MongoDb insert error (php) - BSON doc is X bytes, max is 0](https://stackoverflow.com/questions/13310477/mongodb-insert-error-php#comment18156367_13310477) and the answer of [https://stackoverflow.com/a/12009052/1090562](https://stackoverflow.com/a/12009052/1090562)

Please reply here if the problem will not disappear after a new mongo installation

# php - 点击更改css类？

> ID：13310479
> 
> 赞同：-9
> 
> 时间：2012-11-09T15:03:33.213
> 
> 标签：php, javascript, jquery, html, css

好的，所以我正在从数据库中提取帖子，并且我希望访问者可以通过两种方式查看被提取的数据：图库和列表视图。所以，我最初打算使用标签，但最终效果不佳，因为它在两次拉取相同内容时会导致搜索结果和内容出现问题。所以认为这个想法可能会更好。它与选项卡的概念相同......它的工作方式不同......

基本上我想要两个链接：1.）图库视图 2.）列表视图

当人们登陆页面时，所有被拉取的数据都将位于一个名为“gallery”的 div 中，当人们单击“list view”链接时，我希望“gallery”类更改为“list”而不重新加载页面。然后当他们再次点击“Gallery View”时，它会再次将“list”类更改为“gallery”类......就像标签一样......唯一的区别是我们正在处理一组内容. 而不是切换标签......我们在点击时切换css类。

这样我可以编辑内容通过 css 显示的方式。

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:10:01.507

切换类点击使用[`toggleClass`](http://api.jquery.com/toggleClass/)

```
$('button').click(function(){ 
    $('my-node').toggleClass('gallery list')
}); 
```

如果该类已经存在，则将其删除`gallery`，如果不存在，则将其添加。同样适用`list`

# node.js - Node.js+express 代理 ssl

> ID：13310480
> 
> 赞同：0
> 
> 时间：2012-11-09T15:03:38.687
> 
> 标签：node.js, ssl, proxy, express

我正在尝试使用 express 在 node.js 中编写反向代理，它适用于 http 请求。问题是在请求 https 时它从不响应，并且浏览器声明代理拒绝连接。这是http请求的工作代码：

```
var   app = express(),
      http=require('http');

app.configure(function(){ /* express stuff to log and use routes and the like */ });

http.createServer(app).listen(8000, function(){
  console.log("Express server listening on port " + 8000);
});

app.all('*', proxy);
var request=require('request');

var proxy=function(req,resp){
    var data={
        url:req.url,
        headers: {
            'Connection': 'keep-alive'
        }
    }
    var proxy=request(req.url);
    proxy.pipe(resp);
} 
```

现在，至于 SSL，我目前正在尝试：

```
var https=require('https'),
    fs=require('fs');

https.createServer({
        key: fs.readFileSync(__dirname+'/ssl/server.key', 'utf8'),
        cert: fs.readFileSync(__dirname+'/ssl/server.crt', 'utf8')
      },app).listen(8001, function(){
  console.log("Express server listening on port " + 8001);
}); 
```

代理可以在任何需要`50.56.195.215:8000`HTTP 和`50.56.195.215:8001`SSL 的地方使用。它没有任何安全性，所以不要登录任何重要的东西=D

我正在使用自签名 SSL 证书，我想尝试做这样的事情有点愚蠢，但我没有任何想法：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:32:23.587

我的建议是使用来自 Nodejitsu的现有库[node-http-proxy 。](https://github.com/nodejitsu/node-http-proxy)如果你想自己写，至少在学术上研究他们的源代码。

关于上述方法的一些说明：

*   除了 GET（POST、PUT、DELETE 等）之外，您没有处理 HTTP 方法。这些存在。如果您希望您的代理实际工作，您必须处理它们。每次调用`request(req.url)`时，`request`默认情况下都会发出 GET 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-05T11:50:19.177

对于 HTTPS，您需要能够处理 HTTP 连接并模拟目标服务器。您需要为此持有证书。

你可以试试用这个。 [https://github.com/noeltimothy/noelsproxy](https://github.com/noeltimothy/noelsproxy)

复制包含证书和密钥的目录“magical”，然后使用 noelsproxy。请记住将 ca.pem 添加到系统上受信任的根存储中。

如果您使用的是 Windows，请执行以下操作： certutil -addstore -enterprise -f \"Root\" ./magical/ca.pem

如果您有任何问题，请告诉我。我愿意立即修复它们。

# java - 这是工厂模式的正确用法吗？

> ID：13310484
> 
> 赞同：1
> 
> 时间：2012-11-09T15:03:44.913
> 
> 标签：java, design-patterns, factory-pattern

有设计问题，也许你可以帮助决定。

我的客户对象可以要求一组对象 class `Report`。有一组定义的可用报告，根据客户的权限，不同的报告可以包含在返回的集合中。每个请求都会创建报告（每个客户都会在每个请求上获得全新的报告实例）。

我应该使用一种“工厂”来封装报告创建，如下所示：

```
public class ReportsFactory {

    private UserPermissionsChecker permissionsChecker;

    public Set<Report> createReports() {
        Set<Report> reports = new HashSet<Report>();
        if(permissionsChecker.hasAccessTo('report A')) {
            reports.add(createReportA());
        }
        if(permissionsChecker.hasAccessTo('report B')) {
            reports.add(createReportB());
        }
        if(permissionsChecker.hasAccessTo('report C')) {
            reports.add(createReportC());
        }
        return reports;
    }

    private Report createReportA() {...}
    private Report createReportB() {...}
    private Report createReportC() {...}
} 
```

这是所谓的简单工厂模式的正确用法吗？或者你有其他建议吗？

** 编辑 **

下面的一些评论说这不完全是工厂模式。如果不是，我怎么能这样称呼？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:08:58.567

I think the design is correct, but this is a wrong usage of the "Factory" word. In the Factory pattern, `XxxxFactory` creates instances of `Xxxx`, initializes them if required, but applies no other kind of logic.

This design here seems correct to me, but your class would rather be called `ReportsService`

And maybe `UserPermissionsChecker` would be `AuthorizationService`

**Edit:** To take into account criticism against the word "Service".

There is currently a quite widespread (I did not say universal) convention in the java world, which consists in having:

*   A purely descriptive business-model implemented by classes emptied of all logic called (maybe mistakenly) POJOs
*   All business logic mainly related to an object Xxx implemented in a procedural style in the methods of a class called XxxService.

**I personally don't agree with this coding style** and I prefer ***[object oriented programming](http://searchsoa.techtarget.com/definition/object-oriented-programming)***, but whether we like it or not, this convention exists in the Java EE world and has it's coherence.

Judging bye the coding style of the class submitted by the OP, I inferred that he followed this procedural approach. In that situation, it's better to follow the existing convention and call the class that serves as a container for the procedural code which handles Reports a ReportService.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:18:19.537

对我来说，这看起来有点像[构建器](http://en.wikipedia.org/wiki/Builder_pattern)模式，从某种意义上说，你有一个对象，你可以构建它的数据。
这与工厂相反，工厂通常返回不同的具体类型的创建对象，
并且通常这些对象的数据构造是在具体类的 CTOR 中完成的，它们的对象是从工厂返回的。

# asp.net - 从一个网站保存图像并从另一个网站访问它

> ID：13310485
> 
> 赞同：1
> 
> 时间：2012-11-09T15:03:46.873
> 
> 标签：asp.net, c#-4.0

我创建了一个网站，我们将其命名为 a.com。现在在这个网站 (a.com) 中，用户可以上传保存到远程服务器上的文件夹中的图像，并且路径正在保存到数据库中。

还有第二个网站 (b.com)，它托管在需要检索图像的同一服务器上。

我们可以这样做吗？如果是，请提出一些解决方案

使用的语言 = Asp.net 4.0 C# 后端 = SQL2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:32:34.653

首先，两个站点应该使用相同的数据库来共享有关图像的信息。如果我理解正确 b.com 并且文件位于同一台服务器上。如果是这样，请将文件夹的虚拟路径配置。之后，检查数据库是否有新记录。如果找到，则解析文件名并在服务器上找到它。

例如，您在 a.com 上获取图像并将其插入数据库中

```
name="image.jpg" 
```

b.com 检查数据库中的新记录并找到 image.jpg。b.com 读取配置并找到

```
path="http://c.com/" 
```

结合路径和图像名

```
fulllink="http://c.com/image.jpg" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:06:22.580

由于您使用 SQL 和 .Net 我将假设您也使用 IIS，

创建虚拟目录可能是您最好的选择，易于设置，易于管理并且非常易于理解（如果不是重要的话）

[http://www.iis.net/learn/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis](http://www.iis.net/learn/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis)

这是假设您想在 b.com 中显示图像，如果您只是想检索它，您可以通过检索路径并以任何其他方式使用图像来实现，您可能需要设置图像文件夹的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:08:58.907

It cane be done, if both website can access the remote folder. You need to use something like [System.Net.WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx) to download image from remote server.

# ruby-on-rails - 如何读取 YAML 文件？

> ID：13310488
> 
> 赞同：22
> 
> 时间：2012-11-09T15:03:47.583
> 
> 标签：ruby-on-rails, ruby

我有这样一个 YAML 文件：

```
Company1:
  name: Something1
  established: 2000
#
Company2:
  name: Something2
  established: 1932 
```

读取 YAML 文件：（** 更新 **）

```
 config = YAML.load_file('file.yaml')
    config.each do |key, value|
     if(key == 'name')
      company_name = value
      #year = config['Company1']['established']
      year = config.fetch(key)['established']
     end
   end 
```

** 更新 ** 现在上面的代码可以工作了，但结果显示为：

```
 company1 =>  {"name" => "something1"} => {"established year" => 2000"} 
```

如何删除 {} 和 "" ？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-09T18:31:58.577

好的，这是你的 YAML 文件，对吧？

```
Company1:
  name: Something1
  established: 2000

Company2:
  name: Something2
  established: 1932 
```

好的，现在这个 YAML 文件实际上代表了一个 Hash。has 有两个键，即 Company1、Company2（因为它们是前导条目，而子条目（名称和已建立）在它们下面缩进）。这两个键的值又是一个哈希。这个哈希也有两个键，即名称和建立。它们分别具有Something1和2000等值。

所以当你这样做时，

```
config=YAML.load_file('file.yml') 
```

并使用打印配置（这是一个表示 YAML 文件内容的哈希），

```
puts config 
```

你得到以下输出：

```
{"Company1"=>{"name"=>"Something1", "established"=>2000}, "Company2"=>{"name"=>"Something2", "established"=>1932}} 
```

所以我们有一个 YAML 文件描述的 Hash 对象。

使用这个 Hash 非常简单。

由于每个公司的名称和年份都来自外部散列（company1，company2）持有的单独散列，因此我们可以遍历这些公司。以下代码打印哈希。

```
config.each do |company,details|
  puts company
  puts "-------"
  puts "Name: " + details["name"]
  puts "Established: " + details["established"].to_s
  puts "\n\n"
end 
```

所以在每次迭代中，我们都可以访问哈希的每个（键，值）。在第一次迭代中，我们将`company`(key) as`Company1`和`details`(value) as`{"name"=>"Something1", "established"=>2000}`

希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T15:09:45.943

[YAML 使用缩进来确定作用域](http://yaml.org/spec/current.html#id2519916)，所以试试，例如：

```
Company1:
  name: Something1
  established: 2000

Company2:
  name: Something2
  established: 1932 
```

# java - Apache DefaultHttpClient：如何设置最大值。总连接数和默认最大值 每条路线的连接数

> ID：13310490
> 
> 赞同：3
> 
> 时间：2012-11-09T15:03:56.740
> 
> 标签：java, apache-httpclient-4.x

我正在使用单例`DefaultHttpClient`每秒发出大约十几个或更多并行 HTTP 请求。我想知道如何以智能的方式在下面的代码中为“PoolingClientConnectionManager”设置值**x（最大总连接数）**和**y（每条路由的默认最大连接数） 。**

我希望`PoolingClientConnectionManager`能够帮助我，以便在出现负载峰值或负载比平时低得多时不必更改这些值。我能做些什么？还是我必须将值设置为总是*大于我实际需要*的值？

```
...
PoolingClientConnectionManager poolingClientConnectionManager =
    new PoolingClientConnectionManager(sr, 20, TimeUnit.SECONDS);
poolingClientConnectionManager.setMaxTotal(x);
poolingClientConnectionManager.setDefaultMaxPerRoute(y);
return new DefaultHttpClient(poolingClientConnectionManager, new BasicHttpParams()); 
```

编辑：这样说是个好主意`poolingClientConnectionManager.setMaxTotal(Integer.MAX_VALUE)`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:11:39.347

从 4.2 版开始，可以使用 BackoffManager 来根据使用持久连接的反馈动态调整可用连接池的大小。

[http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/AIMDBackoffManager.html](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/AIMDBackoffManager.html)

# magento - Magento 使用升级脚本向产品添加新的选择值/选项

> ID：13310493
> 
> 赞同：1
> 
> 时间：2012-11-09T15:04:10.847
> 
> 标签：magento, product, entity-attribute-value

我想在所有产品中显示一个新的选择属性选项。

我有每个产品都使用一个名为“bracket_size”的选择框属性。该属性具有三个选项：

![支架尺寸选项](../Images/ac82b5f1f02294f9d20c8b53e8ab316a.png)

(/admin/catalog_product_attribute/edit/)

大多数产品只选择了以下两个选项：

![产品属性配置](../Images/3046a540615e82d60bf1679f4836faea.png)

(/admin/catalog_product/edit/)

如果我在该屏幕中选择“18mm”，那么它会显示在前端。

我想创建一个升级脚本，将所有产品设置为显示“18mm”选项。

我一直在通过选择所有产品、获取它们并更新它们的属性值来做到这一点：

```
$options = Mage::getSingleton('eav/config')->getAttribute('catalog_product', 'bracket_size')->getSource()->getAllOptions(false);
$option18mmId = $options[0]['value'];

foreach (Mage::getModel('catalog/product')->getCollection() as $product) {
    // Get a writable product
    $product = Mage::getModel('catalog/product')->load($product->getId());

    // All products in these attribute sets should have bracket sizes
    $bracketSizeValue = $product->getBracketSize(); // string containing option IDs - something like '645,345'

    if (isset($bracketSizeValue)) {
        // Get options currently selected for this product
        $optionIds = explode(',', $bracketSizeValue);

        // Check if the option is already included in this product
        if (!in_array($option18mmId, $optionIds)) {
            // If not, rebuild the attribute value to add it
            array_unshift($optionIds, $option18mmId);

            // Add it back to the product
            $product->setData('bracket_size', implode(',', $optionIds));
            $product->save();
        }
    }
} 
```

但这不起作用。它抛出一个错误：

```
Warning: Invalid argument supplied for foreach()  in /.../public/app/code/core/Mage/Eav/Model/Entity/Abstract.php on line 1068 
```

`$product->save()`在线。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:19:17.497

如果您尝试在设置/更新脚本中保存产品，则需要先禁用更新模式并设置当前商店 ID：

```
$app = Mage::app();
$app->setUpdateMode(false);
$app->setCurrentStore($app::ADMIN_STORE_ID); 
```

理想情况下，它会在保存之前完成，然后在保存后恢复：

```
$app->setCurrentStore(null);
$app->setUpdateMode(true); 
```

然后，您还可以优化您的代码，删除每个产品的加载和保存，并改为在集合项目上执行此操作。

加载具有所需属性的集合：

```
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->addAttributeToSelect('bracket_code'); 
```

保存对集合项目的更改：

```
$collection->save(); 
```

# c++ - i2c smbus 过滤器函数破坏变量

> ID：13310496
> 
> 赞同：0
> 
> 时间：2012-11-09T15:04:21.250
> 
> 标签：c++, i2c

我有一个简单的功能

```
#define AMB_FILTER 0.7f

int32_t fValue; (this is declared in the class header)

int32_t Ambient::filter(uint32_t raw)
{
    // If we have no preliminary fValue we don't need to calculate a filter
    if(fValue == -1)
    {
        fValue = raw;
        return fValue;
    }

    float y, yy;

    y = (1.0f - AMB_FILTER) * (float) raw;
    yy = AMB_FILTER * (float) fValue;

    fValue =  (int32_t) (y + yy);

    printf("filter raw %d y %f yy %f fValue %d\n",raw, y, yy, fValue);

    return fValue; 
} 
```

它接受一个从[smbus](https://stackoverflow.com/questions/13298793/c-i2c-chip-reading-mcp9800-suddenly-starts-failing)读取的值，并返回一个用它收到的最后一个值过滤的值。这是 printf 语句的输出

```
filter raw 454 y 136.200012 yy 317.799988 fValue 454
filter raw 454 y 136.200012 yy 317.799988 fValue 454
filter raw 454 y 136.200012 yy 317.799988 fValue 454
filter raw 455 y 136.500000 yy 317.799988 fValue 454
filter raw 455 y 136.500000 yy 317.799988 fValue 454
filter raw 455 y 136.500000 yy 317.799988 fValue 454
filter raw 455 y 136.500000 yy 317.799988 fValue 454
filter raw 455 y 136.500000 yy 317.799988 fValue 454
filter raw 454 y 136.200012 yy 317.799988 fValue 454
filter raw 455 y 136.500000 yy -731751040.000000 fValue -731750912
filter raw 455 y 136.500000 yy -512225632.000000 fValue -512225504
filter raw 455 y 136.500000 yy -358557856.000000 fValue -358557728
filter raw 455 y 136.500000 yy -250990400.000000 fValue -250990256
filter raw 454 y 136.200012 yy -175693184.000000 fValue -175693040 
```

那么发生了什么？为什么它仍然收到相同的输入，但突然变得疯狂？除了这个函数，我没有在任何地方设置 fValue。

我使这些变量（y 和 yy）非常内化到函数中，因为我担心它们会以某种方式被修改或与其他东西发生冲突。但现在他们完全是本地的，我不知道发生了什么。我正在使用 C++ 类，所以无论如何这都应该在它自己的空间中。

EDIT: In fact if I let it run a little longer the variables I keep for the different i2c Chip addresses also become corrupted to -1075766188\. What the hell?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:44:05.300

> > ```
> > [t1] filter raw 454 y 136.200012 yy 317.799988 fValue 454
> > [t2] filter raw 455 y 136.500000 yy -731751040.000000 fValue -731750912 
> > ```

Sometime between *t1* and *t2* the value of `fValue` was corrupted. The corruption of `yy` is a consequence of `fValue`'s corruption. Look elsewhere in your program for the culprit.

*   If you can't use `valgrind`, then sprinkle sanity checks on the valueof `fvalue` throughout your program.
*   Print the value of `this` in your routine. See if it becomes unusual.
*   Print the value of other member variables from `Ambient`. See if they become unusual.
*   Try commenting out huge tracts of code. Start with 1/2 of your program. If the bug is still there, comment out 1/2 of the remainder. Continue until you find a single line that controls the corruption.

As to how it was corrupted, there are many possibilities. Perhaps you dereference a wild pointer somewhere. Perhaps you write beyond the end of an array. Perhaps you are operating on a previously destroyed `Ambient`.

# ant - 蚂蚁 带前缀的 zipfileset

> ID：13310500
> 
> 赞同：0
> 
> 时间：2012-11-09T15:04:38.680
> 
> 标签：ant

假设`C:/dir2/`有一个名为的文件`file2.txt` 并且`C:/dir3/`有一个名为的文件`file3.txt`

这个蚂蚁脚本：

```
<copy todir="C:/dir1">
    <zipfileset dir="C:/dir2" prefix="dirprefix2"/>
    <zipfileset dir="C:/dir3" prefix="dirprefix3"/>
</copy> 
```

将文件复制到：

```
C:/dir1/file2.txt
C:/dir1/file3.txt 
```

但我希望它复制到：

```
C:/dir1/dirprefix2/file2.txt
C:/dir1/dirprefix3/file3.txt 
```

任何人都知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:10:53.070

该属性`prefix`仅在*创建*档案时使用。

以下应该可以正常工作：

```
<copy todir="C:/dir1/dirprefix">
    <zipfileset dir="C:/dir2"/>
</copy> 
```

或者，您可以使用宏：

```
<macrodef name="mycp">
  <attribute name="dir"/>
  <attribute name="todir" default="C:/dir1"/>
  <attribute name="prefix"/>
  <sequential>
    <copy todir="@{todir}/@{prefix}">
        <fileset dir="@{dir}/"/>
    </copy>
  </sequential>
</macrodef> 
```

然后每个目录将有一行，如下所示：

```
<mycp dir="C:/dir2" prefix="dirprefix2"/>
<mycp dir="C:/dir3" prefix="dirprefix3"/>
... 
```

# tfs - 获取变更集的回滚信息

> ID：13310501
> 
> 赞同：2
> 
> 时间：2012-11-09T15:04:39.950
> 
> 标签：tfs, tfs-power-tools

[如此处](http://social.msdn.microsoft.com/Forums/en-US/tfspowertools/thread/605d6c6c-2acf-4567-8c50-b4a4d6303d3d)所述；

我安装了 tfs 电动工具 2012。我通过选择变更集来使用回滚功能：因此我希望回滚到该版本并且它工作得很好。当我查看在“更改”列回滚的文件的历史记录时，它写成“编辑，回滚”；这很酷。

但是我看不到“它已回滚到哪个版本”。因此，在回滚之前，我可以选择版本，但稍后当我想查看“它已回滚到哪个版本”时，我不能。有没有办法找到这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:13:36.390

回滚是非破坏性的，因此回滚将撤消签入（更改集），然后将之前的更改集作为正常签入签入。没有真正的理由来区分回滚签入和正常签入。

# objective-c - 是否可以用视图覆盖警报视图

> ID：13310502
> 
> 赞同：2
> 
> 时间：2012-11-09T15:04:41.640
> 
> 标签：objective-c, ios, github, shared-libraries, uialertview

我想知道是否可以使警报视图看起来像这样。 ![截屏](../Images/39ce706887cbb5116855c96c2ebac36b.png)

我在 github 上搜索了一个覆盖警报视图的库。但是什么也没找到。有可能做到这一点还是我应该找到另一种方法？

亲切的问候

**编辑**

这就是我的xib现在的样子 ![在此处输入图像描述](../Images/e5d473dde7754a1435513c2e006aa269.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:13:05.360

最好创建自己的 UIViewController

使视图控制器与页面大小相同以阻止其他触摸并使其透明，因此它看起来像一个警报视图。

使它不是你的函数调用警报，而是加载你的新视图控制器

这是一个很好的 UIViewController 动画示例，可以使它像典型的 IOS AlertView

```
 -(void)initialDelayEnded {
    self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.001, 0.001);
    self.view.alpha = 1.0;
    [UIView animateWithDuration:kTransitionDuration/1.5 animations:^{
        self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.1, 1.1);
    }completion:^(BOOL complete){
        [UIView animateWithDuration:kTransitionDuration/2 animations:^{
            self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.9, 0.9);
        }completion:^(BOOL complete){
            [UIView animateWithDuration:kTransitionDuration/2 animations:^{
                self.view.transform = CGAffineTransformIdentity;
            }];
        }];
    }];
} 
```

# java - 使用 Spring 配置文件 (XML) 为除一个之外的所有配置文件声明 bean

> ID：13310504
> 
> 赞同：2
> 
> 时间：2012-11-09T15:04:43.750
> 
> 标签：java, spring

我想知道，使用 Spring XML 配置文件，是否可以为除 dev 配置文件之外的所有配置文件声明 Spring bean。

我的用例是我想将我的 JDBC 数据源声明为为配置文件“dev”提供的 JNDI，而它是为其他配置文件创建的。

我想要类似的东西：

```
<beans profile="dev" >
    ... DataSource JNDI ...
</beans>
<beans profile="!dev" >
    ... DataSource creation ...
</beans> 
```

有解决办法吗？或者唯一的方法是：

```
<beans profile="dev" >
    ... DataSource JNDI ...
</beans>
<beans profile="integration,valid,preprod,prod" >
    ... DataSource creation ...
</beans> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-26T07:43:30.170

你可以用**！**, 对于高于 Spring 3.2 M1 的 spring 版本。

所以这种方式是可以的：

```
<beans profile="!dev" >
    ... DataSource creation ...
</beans> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:36:11.823

一个更简单的方法是这样的：

任何配置文件的常规数据源创建：

```
<bean name="datasource" ...> 
```

然后特定于开发：

```
<beans profile="dev" >
   <bean name="datasource" ...>
</beans> 
```

# java - 在 Netbeans 中完成的 UI 更改不会反映在 Eclipse 中

> ID：13310506
> 
> 赞同：0
> 
> 时间：2012-11-09T15:04:52.493
> 
> 标签：java, eclipse, swing, netbeans

我主要在我的项目中使用 Eclipse。对于 Swing GUI 部分，我发现使用 Netbeans 更加用户友好。因此，仅为了构建 UI，我将 Netbeans 用于同一个项目。

我使用 Netbeans 开发了一个表单。因此，相应的 .java 文件也在 Eclipse 中生成。在工作了几天之后，我去了 Netbeans 并更改了 JPanel 的名称。但是，Eclipse 中相应的 .java 文件中没有反映相同的更改。

在此之前，我已经在 Netbeans 中进行了此类更改，甚至已经看到这些更改反映在项目的 Eclipse 版本中。但是，我不知道这次出了什么问题。我什至尝试过提神、清洁等。

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:24:16.937

最后，我不得不从工作区中删除所有内容并再次签出所有内容。之后，它工作正常。

# class - COM接口作为WinRT ref类的参数，怎么可能？

> ID：13310510
> 
> 赞同：1
> 
> 时间：2012-11-09T15:05:06.307
> 
> 标签：class, com, interface, windows-runtime, param

我如何正确定义这个类：

```
public ref class WICBMP sealed
{
  void Load(IWICBitmapSource ^wicBitmapSource);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:30:35.957

这是不可能的。声明 Windows 运行时接口的成员时，只能使用 Windows 运行时类型（在这种特定情况下，编译器将需要生成一个接口来声明您的`Load`成员函数）。如果您尝试在 IDL 中定义接口，您甚至无法做到这一点。

但是，运行时类可以*实现*不是 Windows 运行时接口的 COM 接口。例如，请参阅[`IBufferByteAccess`](http://msdn.microsoft.com/en-us/library/hh846267.aspx)（一个 COM 接口），它是所有[`IBuffer`](http://msdn.microsoft.com/en-us/library/hh438362.aspx)（一个 Windows 运行时接口）实现都必须实现的。

# sql - 在 SQL 表的字符串列中显示 DateTime.Now

> ID：13310511
> 
> 赞同：0
> 
> 时间：2012-11-09T15:05:07.203
> 
> 标签：sql, sql-server-2008

我不知道如何在谷歌上搜索这个所以不得不在这里问一个问题。

我有一个电子邮件正文列，它全是文本，但在文本中的某处我想显示 DateTime.Now，但不知道该怎么做。

我想在文本中添加一些内容，例如..

> “您好用户，现在时间是 {DateTime.Now}”

不想选择语句或任何东西，必须是列的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:06:40.627

```
select replace(all_text_column, '{DateTime.Now}', current_timestamp)
from your_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:09:04.520

```
SELECT REPLACE(COL_NAME, 'your_placeholder', now())
FROM TABLE_NAME; 
```

# android - 在 strings.xml 文件中将字符串声明为资源的好处

> ID：13310515
> 
> 赞同：5
> 
> 时间：2012-11-09T15:05:19.177
> 
> 标签：android

我在很多地方读到过你应该在你的资源文件中声明你的 String 对象，但我没有在任何地方读到任何好处。

我已经将布局中的所有字符串声明为资源，但在我的课程中没有这样做。

我的问题是：

**将字符串声明为资源有什么好处？有什么记忆好处吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T15:09:04.047

*   国际化，
*   将所有字符串保存在一个地方（可以全局编辑它们），
*   根据设备（mdpi/large/portrait）更改字符串...我的意思是，最后一个确实很少见，但这是可能的。
*   在许多布局之间共享相同的字符串（这将发生在任何不小的应用程序中）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:08:59.440

我认为最重要的是：翻译！将新的 strings.xml 放在正确的文件夹中，应用程序会为每个设备自行翻译。

但也有组织问题。就像布局一样，您通常不会在代码中构建，因为那不是它的地方。代码是处理东西。字符串只是您的代码用于在屏幕上显示内容的另一种资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:07:00.040

本地化的主要好处之一是：您保持代码独立于语言，只需为要支持的每种语言提供不同的 XML 文件。

# openoffice.org - Odt 文件，显示所有样式

> ID：13310520
> 
> 赞同：2
> 
> 时间：2012-11-09T15:05:43.840
> 
> 标签：openoffice.org, openoffice-writer

我使用 odt 文件作为某种模板，并使用 Libre Office 作为创建此模板的工具。它通常工作正常，除了一件事。

假设我们的 odt 文件有一段文本。

```
There is my text. 
```

XML 文件可能看起来也可能不看起来（似乎是随机的）（杂乱无章，对于解析或作为模板来说不是很好的东西）：

```
<text:p text:style-name="P7">There is</text:p><text:p text:style-name="P7"> my text<text:p text:style-name="P7">.</text:p></text:p> 
```

有时它（再次看起来是随机的）是这样的（预期的结果，毕竟是有道理的）：

```
<text:p text:style-name="P7">There is my text.</text:p> 
```

有没有办法摆脱多余的 xml 标签？或者至少用户可以在 LibreOffice/OpenOffice 中查看原始文档以手动删除冗余？

关键是为用户提供简单的工具，以检测和修复这样的伪像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:47:40.990

你试过Ctrl-M吗？如果在样式中定义了所有格式并且样式格式没有被手动覆盖，则不应干扰格式，但应删除多余的标签。

一个繁琐的用户过程是剪切和粘贴特殊文本并再次应用样式。

最后，一个宏肯定可以解决问题。

# list - 更改列表的值？

> ID：13310527
> 
> 赞同：0
> 
> 时间：2012-11-09T15:06:12.097
> 
> 标签：list, variables, loops, count, indexing

```
liste = [1,2,8,12,19,78,34,197,1,-7,-45,-97,-32,23]

liste2 = []

def repetisjon(liste,liste2):

    for count in liste:
        if count > 0:
            liste2.append(1)
        elif count < 0:
            liste2.append(0)
    return liste2

    return (liste2)

print (repetisjon(liste,liste2)) 
```

关键是要更改列表的所有值。如果大于或等于0，则将其替换为值1。如果小于0，则将其替换为0。但是我无法更改当前列表。我找到的唯一解决方案是创建一个新列表。但是有没有办法在不创建新列表的情况下更改当前列表？我也试过这个，但根本没有用：

```
liste = [4,8,43,4,78,24,8,45,-78,-6,-7,-3,8,-12,4,36]
def repe (liste):
   for count in liste:
       if count > 0:
           count == 1
       else:
           count == 0
   print (liste)

repe(liste) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:00:16.437

在这里，我将 liste 的内容替换为转换后的数据。由于 sameliste 指向同一个列表，因此它的值也会发生变化。

```
>>> sameliste = liste = [1,2,8,12,19,78,34,197,1,-7,-45,-97,-32,23]
>>> sameliste
[1, 2, 8, 12, 19, 78, 34, 197, 1, -7, -45, -97, -32, 23]
>>> liste
[1, 2, 8, 12, 19, 78, 34, 197, 1, -7, -45, -97, -32, 23]
>>> liste[:] = [int(x >= 0) for x in liste]
>>> liste
[1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1]
>>> sameliste
[1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1]
>>> 
```

# ios - 为上标和下标格式化 NSString

> ID：13310529
> 
> 赞同：0
> 
> 时间：2012-11-09T15:06:15.653
> 
> 标签：ios, nsattributedstring, subscript, superscript

我正在为一些同事编写一个实用程序。该应用程序本质上是一个自定义记事本，带有代表他们用来转录任务的速记的按钮。所有按钮都将一个字符串添加到我已设置为保存成绩单的数组中，然后我将字符串添加到这样的行数组中。

```
[currentRow addObject:@"("]; 
```

有些速记需要用下标书写，有些需要用上标书写。我需要的所有字符都没有 Unicode 字符，所以我一直在尝试围绕属性字符串对代码进行排序，但我不太明白。有人对此或一些示例代码有建议吗？

此外，在转录过程中将此转录本打印到屏幕后，我将其发送到电子邮件正文……所以我认为我还需要担心那里的格式。我目前使用纯文本，但电子邮件可能是 HTML。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:37:42.017

如果在 WebView 中显示文本，则可以使用 html 标签设置上标。它还具有在较旧的 iOS 版本上运行的优势，并且您可以重复使用邮件中的文本。

```
NSString *myText=@"This text contains <sub>subscript</sub> and <sup>superscript</sup> text.";
[self.myWebView loadHTMLString:myText baseURL:nil]; 
```

# javascript - 奇怪的行为 Shift-Key Safari - HTML/Javascript

> ID：13310530
> 
> 赞同：1
> 
> 时间：2012-11-09T15:06:17.463
> 
> 标签：javascript, html, forms, safari, dom-events

根据要求，我尽可能简化了问题。

我想要做的是向`onmousemove`HTML 元素添加一个事件，在本例中为框，它将调用一个函数。我遇到的问题是，不仅鼠标移动会触发事件，而且像`SHIFT`, `CTRL`, `ALT`... 这样的键也会触发。

因此，一旦鼠标第一次经过框并关闭警报窗口，我之前提到的任何键也会弹出一个新的警报窗口。

我正在使用 Safari，我也在 Google Chrome 上对此进行了测试，结果也是浏览器的一种奇怪行为。

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"        "http://www.w3c.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<html xmlns="http://www.w3.org/1999/xhtml\" xml:lang="es" lang="es">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script>
        window.onload = function() {
            boxx = document.getElementById("box");
            boxx.onmousemove = showMessage;
        }

        function showMessage() {
            alert("hello");
        }
    </script>
</head>
<body>      
    <div id="box" style="width: 900px; height: 300px; border: 1px solid;"></div>
</body>
</html> 
```

我真的不明白发生了什么，希望有人能帮助我！

# image - 使用 PDF 文件作为图像

> ID：13310534
> 
> 赞同：1
> 
> 时间：2012-11-09T15:06:26.293
> 
> 标签：image, cocoa, pdf

过去我在 NSImage 中使用过矢量文件的 PDF 图像，优点是我可以在不损失质量的情况下缩放它们。我知道人们通常使用jpg和png文件，这是为什么呢？PDF 文件会显着降低性能还是有其他原因？

提前谢谢你，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:40:26.010

这取决于您的 PDF 文件中的内容。如果其中有足够的内容，那么是的，光栅图像可能会更快。当然，权衡是可扩展性——您最终需要为每个目标大小创建 1x 和 2x 变体，或者创建一个图标系列（如果合适），而不是只为所有内容使用一个图像。

但我认为大多数人创建光栅资源是因为这是他们习惯使用的那种工具：Photoshop、Pixelmator 或 Acorn。没有多少人使用矢量编辑器或用 PostScript 编写他们的艺术作品。（Mac 上可用的矢量编辑器领域相当薄弱。）

几年来，我一直推荐一款名为[Opacity](http://likethought.com/opacity/)的应用程序。它以矢量为中心，但可以导出多种尺寸的光栅图像、PDF 甚至源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:10:06.537

我也使用 PDF 文件，原因与它们自动缩放的原因完全相同。Apple 也这样做（查看 Xcode.app 包的内部 - 除了文件之外，您不会找到太多其他`.pdf`内容）。

根本没有理由使用`.jpg`或`.png`文件。

# java - 存储具有多个元素的元素

> ID：13310535
> 
> 赞同：3
> 
> 时间：2012-11-09T15:06:26.817
> 
> 标签：java, sorting, arraylist

存储具有多个元素的元素的最佳方法是什么？就像在 6d 数组中一样。我已经看到了一些类似 ArrayList(ArrayList(ArrayList(ArrayList))) 的内容，但不知道如何或大部分原因将其配置为这样或如何访问元素！

例如，我想创建一个存储以下信息的数组（列表）：

房屋 ID、门牌号、街道名称、居民、业主名字、业主姓氏

我希望能够对主记录元素中的任何子元素进行排序和搜索。

我所做的是创建一个数组列表，其中包含每个数组列表。基本上我有一个名为 HouseArray 的类，它有一个名为 CreateArray 的方法。从我的课堂 GUI 中，我有

```
houses = new HouseArray();
houses.CreateArray(); 
```

在 HouseArray 类中，我的方法 CreateArray 有

```
ArrayList<Integer> entryID;
ArrayList<Integer> houseNum;
ArrayList<String> streetName;
ArrayList<Integer> residents;
ArrayList<String> firstName;
ArrayList<String> lastName; 

entryID = new ArrayList();
houseNum = new ArrayList();
streetName = new ArrayList();
residents = new ArrayList();
firstName = new ArrayList();
lastName = new ArrayList(); 
```

然后我使用 AddEntry 方法将数据放入每个数组列表中。

```
this.entryID.add(12345);
this.houseNum.add(9876);
this.streetName.add("My Street");
this.residents.add(4);
this.firstName.add("John");
this.lastName.add("Jones"); 
```

我不知道如何能够对这些混乱进行排序并保持条目同步，而无需手动编写大量代码来完成这一切。此外，我希望能够汇总居住在特定街道名称上的居民人数，或居住在拥有名字或姓氏的房屋中的居民人数。

我在正确的轨道上还是有更好的方法来做到这一点？自学java，所以不确定这是否算作作业。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:09:27.863

> 例如，我想创建一个存储以下信息的数组（列表）：
> 
> 房屋 ID、门牌号、街道名称、房屋颜色、业主名字、业主姓氏

最好的方法是创建一个`Class`名称 it`House`并将这些属性作为它的`state`.

```
class House {

private long houseId;
private long hNo;
private String streetname;
private String color;
private String owner;
private String firstName;
public House(long houseId, long hNo, String streetName, String color, String owner, String firstName){
  //initialize your instance variables here 
```

}

```
 public void setHouseId(long houseId){
  this.houseId = houseId;
  }
 //do the same thing for reamining attributes
 //getters and setters for all the attributes.
} 
```

现在，创建一个包含 House 对象的 java.util.List。

```
List<house> houseList = new Arraylist<>();
//and populate the list with house objects.
House house1 = new House(123,223,"Bond Street", "Green","James Bond", "James");
list.add(house1); 
```

这种方法是`Object-Oriented`做事的更多方式，因为`House`它代表一个具有`state`和的对象。`behaviour`但是，如果您想对 arrayList 中的 House 元素进行排序，则必须覆盖 equals 和 hashcode 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:08:38.767

我认为另一种方法是创建`House`具有这些属性的类。

实例化 house 对象并添加到 arraylist。您可以覆盖 equals 和 hashcode 方法来执行排序。

例子：

```
class House{
int houseNum;
String street;

...

//get/set for above properties.
} 
```

并将其添加到列表中：

```
House houseObj = new House();
list.add(houseObj); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:09:49.873

你具体在哪里看到的`along the lines of ArrayList(ArrayList(ArrayList(ArrayList)))`？？这看起来很奇怪。从来没有过这样的设计。。

如果要存储多个字段，则使用所有这些字段创建一个自定义类，并拥有该类的 ArrayList。

例如： -

```
class House{
    private int houseId;
    private int houseNumber;
    private String streetName;
    private String owner;
    private String firstName;

    // Constructors

    // Getters and Setters
} 
```

并创建一个`ArrayList`该类：-

```
List<House> myHouses = new ArrayList<House>(); 
```

然后，要将对象添加到您的列表中，只需使用普通`add`方法：-

```
myHouses.add(new House(houseId, houseNumber, ....)); 
```

并访问元素： -

```
for (House myHouse: myHouses) {
    System.out.println(myHouse.getHouseNumber());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T15:23:05.037

我认为您不仅是 Java 新手。一般来说，您是新的面向对象编程。你是学生，这是某种家庭作业吗？如果是，请将其标记为这样。

对于您的特定数据，您的类应该是 House。

```
public class House
{
    int entryId;
    int houseNum;
    String streetName;
    String houseColor;
    String firstName;
    String lastName;
} 
```

请注意，在上面的示例代码中，我假设您对 java 有足够的了解来添加访问修饰符，例如`private`,`public`等，并且对如何添加 getter 和 setter 方法（例如`getEntryId()`,`setEntryId(int entryId)`等）有足够的了解。

如果您的对象实际上更复杂，则最好创建诸如 , 等的`Address`类`Person`。

然后使用这个类，您确实创建了一个列表：

```
 List<House> houses = new ArrayList<House>();
    House myHouse = new House();
    // insert whatever data you want into "myHouse"
    houses.add( myHouse ); 
```

对列表中的对象进行排序，因为它在 a 中`List`，它是 Java 集合框架的一部分。您可以使用该`Collections.sort()`方法对其进行排序。但首先你需要了解它是如何工作的。

我会建议你以下页面：

*   [面向对象的编程概念](http://docs.oracle.com/javase/tutorial/java/concepts/)
*   [Java 教程：集合](http://docs.oracle.com/javase/tutorial/collections/index.html)
*   [对象排序](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T15:27:15.377

> 我不知道如何整理这个烂摊子

首先，其他人已经指出你应该创建一个`House`类来组织“这个烂摊子”。

要对其进行排序，请实现`Comparator`接口，例如（假设您的`House`类有一个`getEntryID`方法）：

```
public class HouseIDComparator implements Comparator<House> {

    @Override
    int compare(House house1, House house2) {
        return house1.getEntryID().compareTo(house2.getEntryID());
    }

} 
```

这个比较器可以传递给`Collections.sort(List<T>, Comparator<? super T>)`排序。（请注意，还有一个带有一个参数的排序方法，用于实现`Comparable`接口的类型列表。但是，您可能不希望您的`House`类实现它，因为在什么基础上比较房屋并不明显，并且您你自己可能想使用几个不同的。）

至于对值求和，最好的方法是遍历列表中的所有元素并手动求和。

# performance - 第二次打开Excel后速度很慢

> ID：13310538
> 
> 赞同：3
> 
> 时间：2012-11-09T15:06:37.940
> 
> 标签：performance, excel, vba

我有一个包含很多宏的 Excel 工作簿。

如果我有 Excel 应用程序。完全关闭，我打开它，它运行良好。

但是，如果我关闭工作簿（不关闭 excel 应用程序），然后再次打开它，打开时会出现巨大的延迟，并且在其中运行所有不同的宏时也会出现巨大延迟。

我没有在开始或后台运行任何东西。事实上，我已经在 thisworkbook Workbook_Open 例程上设置了一个标志……只是为了达到这一点（workbook_open 事件），它需要 20 多秒！而且还没有运行宏！

总而言之，如果从头开始打开（excel 应用程序未运行），工作簿需要 2-3 秒才能打开并准备好。一切都运行得很快（宏等）......

然后我关闭工作簿......如果再次打开（当 Excel 已经运行）需要 15-50 秒。基本上工作时的任何事情（宏运行等）都需要 x 10 更长的时间

如果我关闭 Excel 应用程序。完全并再次打开它，它再次运行良好（第一次）

我在想也许工作簿有一些影响内存的东西，第二次打开它会影响它......但我不知道，这只是一个猜测......

有没有人经历过这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:40:52.247

谢谢乔克……你把我送到正确的轨道上，我解决了这个问题……

正如你提到的，我根据“内存泄漏”进行了谷歌搜索，发现了一些链接，这些链接建议了 `set xxx=nothing`

我认为这不是什么大问题，也从没想过它会导致这样的延迟（事实上我有很多其他的宏/工作簿，从来没有遇到过这个问题）

令人难以置信的是它，一个失踪`set xxxx=nothing`

我浏览了在 workbook_open 事件上运行的所有代码。我确保全部设置了 set xxx=nothing（我发现两个缺失）

虽然它不影响程序正常运行（第一次打开），但当关闭它并再次打开它时，它就会引起问题！诡异的。

但感谢您，它现在已修复！

我希望这篇文章能在将来对其他人有所帮助

# zend-framework2 - Access controller plugins in mapper in zf2

> ID：13310541
> 
> 赞同：0
> 
> 时间：2012-11-09T15:06:58.487
> 
> 标签：zend-framework2

I am creating an application in zf2.

I have a Plugin (MyModule\Controller\Plugin\MyPlugin) that I can call in my controller without any problem.

I would like to be able to call it from a mapper (like it was possible in zf1 doing getStaticHelper(). I found that it is possible to get it in the view by doing Zend_Controller_Front::getInstance() and then call the plugin but this doesn't work in the mapper.

Is that possible? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:30:17.400

我认为您必须在 module.config.php 中添加如下内容：

```
'controller_plugins' => array(
'invokables' => array(
    'userauthentication' => 'User\Controller\Plugin\UserAuthentication',
), 
```

),

然后你应该可以从任何控制器调用它：

```
$this->userAuthentication()->getAuthService()->hasIdentity(); 
```

# xslt - 使用 xslt (SharePoint 2010) 获取内容查询 Web 部件中的最后一项

> ID：13310544
> 
> 赞同：1
> 
> 时间：2012-11-09T15:07:01.087
> 
> 标签：xslt, sharepoint-2010

这是我第一次使用 Content Query Web 部件和 xslt。我必须以`last 5 posts`以下方式显示来自博客的内容（请看下图）：

该表包含两列。在左栏中我想显示最后一篇文章，在右栏中我想显示来自特定博客的其余帖子。

**编辑 1**

来源只是一个 OOTB 博客站点，我在其中添加了一些帖子。我想在包含两列的 html 表中显示这些帖子。在左栏中，我想显示在博客中输入的最后一篇文章，在右栏中，我想循环浏览其他帖子。用户必须指定他/她希望在 CQWP 中看到多少帖子。

**编辑 2**

这是我到目前为止创建的 xslt。唯一的想法是该表被重复多次，我不希望这样。应该只有一张桌子。如果您查看 xslt 代码，我手动输入了一些文本，例如 Test1、test 2... 在它们的位置，我想显示其余的博客文章。

```
<xsl:template name="Post" match="Row[@Style='Post']" mode="itemstyle">
    <xsl:variable name="SafeLinkUrl">
        <xsl:call-template name="OuterTemplate.GetSafeLink">
            <xsl:with-param name="UrlColumnName" select="'LinkUrl'"/>
        </xsl:call-template>
    </xsl:variable>
    <xsl:variable name="DisplayTitle">
        <xsl:call-template name="OuterTemplate.GetTitle">
            <xsl:with-param name="Title" select="@Title"/>
            <xsl:with-param name="UrlColumnName" select="'LinkUrl'"/>
        </xsl:call-template>
    </xsl:variable>
    <div>        
        <table width="100%" cellpadding="2" cellspacing="2" border="1">
            <tr>
                <td colspan="2" valign="top">
                   <xsl:value-of select="@Author"/></td>
                <td rowspan="2" valign="top" width="30%">
                    <div>
                        <b>Previous blog posts:</b>
                    </div>
                    <div>
                        <ul style="margin-left:-2px;">
                        <li>Test 1</li>
                        <li>Test 2</li>
                        <li>Test 3</li>
                        <li>Test 4</li>
                        </ul>
                    </div>
                    </td>
            </tr>
            <tr>
                <td width="15%" valign="top">
                    image</td>
                <td  valign="top">
                     <div>
                        <xsl:value-of select="@Title"/>
                     </div>  
                     <div class="custom_description"> 
                        <xsl:value-of select="@Body" disable-output-escaping="yes" /> 
                    </div>                  
                    <p>
                    <xsl:call-template name="OuterTemplate.CallPresenceStatusIconTemplate"/>
                    <a href="{$SafeLinkUrl}">
                      <xsl:if test="$ItemsHaveStreams = 'True'">
                        <xsl:attribute name="onclick">
                          <xsl:value-of select="@OnClickForWebRendering"/>
                        </xsl:attribute>
                      </xsl:if>
                      <xsl:if test="$ItemsHaveStreams != 'True' and @OpenInNewWindow = 'True'">
                        <xsl:attribute name="onclick">
                          <xsl:value-of disable-output-escaping="yes" select="$OnClickTargetAttribute"/>
                        </xsl:attribute>
                      </xsl:if>
                      <br />
                      <b>Read More &gt;</b>
                    </a>
                    </p>
                </td>
            </tr>
        </table>                   
    </div>
</xsl:template> 
```

**编辑 3**

```
<root>
   <Posts>
        <Post ID="1">
         <Title>this post 1</Title>
         <Body>The comment comes here</Body>
    </Post>
<Post ID="2">
         <Title>this post 2</Title>
         <Body>The comment comes here</Body>
    </Post>
<Post ID="3">
         <Title>this post 3</Title>
         <Body>The comment comes here</Body>
    </Post>
<Post ID="4">
         <Title>this post 4</Title>
         <Body>The comment comes here</Body>
    </Post>
<Post ID="5">
         <Title>this post 5</Title>
         <Body>The comment comes here</Body>
    </Post>

   </Posts>

</root> 
```

谢谢

![在此处输入图像描述](../Images/acdb1f4efdb08adef88ea45d19e3a99d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T07:37:27.947

首先让我告诫自己：我对 SharePoint 一无所知，而且我没有安装 SharePoint。有一个专门研究 SharePoint 问题的 StackExchange 网站，该网站可能比 SO 为您提供更好的服务。请参阅[https://sharepoint.stackexchange.com/questions/22465/recreating-the-blog-template](https://sharepoint.stackexchange.com/questions/22465/recreating-the-blog-template)

您还应该看看[http://www.glynblogs.com/2011/04/overriding-the-presentation-of-an-xslt-list-view-web-part.html](http://www.glynblogs.com/2011/04/overriding-the-presentation-of-an-xslt-list-view-web-part.html)。

* * *

更新

**这个 XSLT 1.0 样式表，用于 MS XSLT 处理器...**

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt"
  exclude-result-prefixes="xsl msxsl">
<xsl:output method="html" doctype-system="" encoding="UTF-8" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:variable name="empty-main">
  <empty-main>No content yet.</empty-main>
</xsl:variable>

<xsl:variable name="empty-sub">
  <empty-main>No older content yet.</empty-main>
</xsl:variable>

<xsl:template match="/*">
  <html>
  <head>
    <title>Blog</title>
    <style type="text/css">
      table {
        width: 100%;
        border: 1px solid #000;
      }
      td.main-col,  td.subsiduary-col {
        vertical-align:text-top;
      }
      td.main-col {
        width: 75%
      }
      td.subsiduary-col {
        width: 25%
      }
    </style>
  </head>

  <body>
    <table border="1">
     <tr>
     <xsl:variable name="count-posts" select="count(msxsl:node-set(Posts/Post))" />
       <td class="main-col">
         <xsl:apply-templates select="
       (Posts/Post[last()] | msxsl:node-set($empty-main))[1]" />
       </td>
       <td class="subsiduary-col">
         <xsl:apply-templates select="
       Posts/Post[position() &gt; last() - 5 and position() &lt; last()] |
       msxsl:node-set($empty-sub)[$count-posts &lt; 2]" />
       </td>
     </tr>
    </table>
  </body>
  </html>
</xsl:template>

<xsl:template match="Post">
  <xsl:apply-templates select="Title" />
  <p><xsl:copy-of select="Body/node()" /></p>
</xsl:template>

<xsl:template match="Post[last()]/Title" priority="2">
  <h1><xsl:value-of select="." /></h1>
</xsl:template>

<xsl:template match="Post/Title">
  <h2><xsl:value-of select="." /></h2>
</xsl:template>

<xsl:template match="empty-main|empty-sub" priority="2">
  <p><xsl:value-of select="." /></p>
</xsl:template>

</xsl:stylesheet> 
```

**...将转换此输入...**

```
<root>
    <Posts>
        <Post ID="1">
            <Title>this post 1</Title>
            <Body>The comment comes here</Body>
        </Post>
        <Post ID="2">
            <Title>this post 2</Title>
            <Body>The comment comes here</Body>
        </Post>
        <Post ID="3">
            <Title>this post 3</Title>
            <Body>The comment comes here</Body>
        </Post>
        <Post ID="4">
            <Title>this post 4</Title>
            <Body>The comment comes here</Body>
        </Post>
        <Post ID="5">
            <Title>this post 5</Title>
            <Body>The comment comes here</Body>
        </Post>
    </Posts>
</root> 
```

**..进入这个输出...**

```
<!DOCTYPE html SYSTEM "">
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Blog</title>
    <style type="text/css">
      table {
        width: 100%;
        border: 1px solid #000;
      }
      td.main-col,  td.subsiduary-col {
        vertical-align:text-top;
      }
      td.main-col {
        width: 75%
      }
      td.subsiduary-col {
        width: 25%
      }
    </style>
  </head>
  <body>
    <table border="1">
      <tr>
        <td class="main-col">
          <h1>this post 5</h1>
          <p>The comment comes here</p>
        </td>
        <td class="subsiduary-col">
          <h2>this post 1</h2>
          <p>The comment comes here</p>
          <h2>this post 2</h2>
          <p>The comment comes here</p>
          <h2>this post 3</h2>
          <p>The comment comes here</p>
          <h2>this post 4</h2>
          <p>The comment comes here</p>
        </td>
      </tr>
    </table>
  </body>
</html> 
```

**要查看它在浏览器中的呈现方式，请将 html 输出粘贴到[http://htmledit.squarefree.com/](http://htmledit.squarefree.com/)中。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:42:43.220

根据在 Web 部件的面板工具中选择的排序显示第一个或最后一个项目。

```
 <xsl:if test="count(preceding-sibling::*)=0"> 
```

例子

```
<xsl:template name="DisplayPosts" match="Row[@Style='DisplayPosts']" mode="itemstyle">    

 <table width="100%" border="1">
 <tr>
  <td width="70%">
     <xsl:if test="count(preceding-sibling::*)=0">
        <xsl:value-of select="@Title" />
     </xsl:if>
 </td>
 <td width="30%">
    <xsl:if test="count(preceding-sibling::*)&gt;0">
        <xsl:value-of select="@Title" />
  </xsl:if>             
 </td>  
 </tr>
 </table>

</xsl:template> 
```

# erlang - 依赖于库应用程序的 Erlang EUnit 测试模块

> ID：13310546
> 
> 赞同：6
> 
> 时间：2012-11-09T15:07:04.480
> 
> 标签：erlang, rebar, eunit

我有一个带有少量应用程序的中型版本。我最近在发行版中将一些常见功能重构为库应用程序。`undef`这使我的 EUnit 测试在测试任何需要库应用程序的东西时 失败并显示消息。

设置是这样的：

```
% In apps/utils/src/utils.erl
-module(utils).

-export([foo/0]).

foo() -> "OH HAI". 
```

然后

```
% In apps/some_app/src/some_app.erl
-module(some_app).

-export([bar/0]).

bar() -> io:format("foo: ~s~n", [utils:foo()]).

% unit tests for bar() 
```

然后单元测试`some_app:bar()`失败。我正在运行它们`rebar eunit skip_deps=true`。我正在使用`skip_deps=true`，因为我的版本使用了一些 3rd 方应用程序（SQL 等）。

我假设测试开始失败是因为 EUnit 在没有依赖关系的情况下调用被测应用程序？有没有什么办法解决这一问题？我已将 .app 文件配置为显式声明依赖项。它在发行版中运行良好，并且已经部署了大约一天，没有问题，但如果我能让测试再次通过，我会感觉好多了:)

（我可以使用一个模拟应用程序来存根`utils:foo/0`，我可以看到这在哪里是理想的惯用语，但在这种情况下这似乎有点矫枉过正，因为`utils:foo/0`（阅读：它是现实世界的对应物）做了一些非常简单的事情。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-26T22:56:19.560

我能够通过做这个来工作`rebar compile eunit skip_deps=true`。

关键是`compile`在那里，我不知道为什么。我猜想编译步骤将所有模块都放入内存。我很想听听一个很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:35:47.323

我认为您可以通过将其中一个应用程序包含在 .app 文件的应用程序部分中来加载该实用程序，如下所示：

```
{application,yourapp
         [{description,"A description"},
          {vsn,"1.0.0"},
          {modules,[mod1, mod2, utils]},
           SNIP 
```

或以其他方式将其添加到 erlang 节点的路径中......也许在启动节点时使用 -pa 标志。

# c++ - VSC++2010：-Zm135

> ID：13310547
> 
> 赞同：0
> 
> 时间：2012-11-09T15:07:08.663
> 
> 标签：c++, visual-studio-2010, pch

我想阅读 -Zm135 Visual Studio 2010 命令行选项的详细说明。简而言之，这是在超出 PCH 的虚拟内存时设置的选项。另外，-Zm 字母的含义是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:13:00.807

它指定可用于预编译标头的内存百分比：http: [//msdn.microsoft.com/en-us/library/bdscwf1c%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bdscwf1c%28v=vs.100%29.aspx)

# git - 不小心设置了一个分支起源来跟踪本地分支

> ID：13310548
> 
> 赞同：2
> 
> 时间：2012-11-09T15:07:08.400
> 
> 标签：git

我不小心做了：

```
git checkout mybranch
git branch --set-upstream origin mybranch 
```

吉特说：

```
Branch origin set up to track local branch mybranch. 
```

我该如何重置它，它对我有什么影响？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:30:10.733

如果一切都失败了，只需`.git/config`使用文本编辑器进行编辑。所有命令都设置在那里

```
[branch "origin"]
merge=refs/heads/mybranch 
```

所以只需删除无效的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:42:05.450

这意味着您只有一个本地分支，该分支设置为跟踪同名的远程分支。这样做没有害处，您不会被迫使用远程分支；）

您可以删除跟踪链接

```
--no-track 
```

或删除远程分支：

```
git push origin :branch-name 
```

对于后者，如果您愿意，您需要使用 -d 选项专门删除分支。

# c# - 如何在委托的方法签名中检测和记录参数名称和值？

> ID：13310550
> 
> 赞同：3
> 
> 时间：2012-11-09T15:07:11.560
> 
> 标签：c#, reflection, dependency-injection

感谢您的关注！

# 背景

我有一个扩展方法，用于将给定方法包装在 a 中`try/catch`，并且我正在添加用于记录任何捕获的异常的代码：

```
 public static T HandleServerError<T>(this Func<T> func)
        {
            T result = default(T);
            try
            {
                result = func();
            }
            catch (Exception ex)
            {
                //******************************
                //Code for logging will go here.
                //******************************

                ErrorHandlers.ThrowServerErrorException(ex);
            }

            return result;
        } 
```

以下是该方法的调用方式：

```
var result = new Func<SomeClass.SomeType>(() => SomeClass.SomeMethod(id, name, color, quantity)).HandleServerError();
return result; 
```

如您所见，我调用的任何方法都被注入到扩展方法中并在 try/catch 中执行。

我们将使用 NLog 或 ELMAH 进行日志记录，但这在很大程度上与这个问题无关。

# 问题

如果出现问题，我需要尽可能多地记录有关委托方法的信息，因为诸如“对象引用未设置为对象的实例”之类的内容本身并没有帮助。

我想记录被调用方法的类和名称以及方法签名中的参数及其值。如果可能的话，我什至想记录哪一行失败，最后是实际的堆栈跟踪。

我猜我需要为此使用反射，并且可能在注入方法执行时以某种方式捕获绑定标志，但我不完全确定这是否是最好的方法，或者它是否可行。

# 问题

使用 C#，我如何获取有关注入/委托方法的元信息（即方法名称、来源类、参数、参数值）？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T15:27:35.390

在我看来，您有可能改进将此日志记录横切关注点添加到应用程序的方式。

这里的主要问题是，尽管您的解决方案阻止您对`SomeClass.SomeMethod`（或任何调用的方法）进行任何更改，但您仍然需要对使用代码进行更改。换句话说，您打破了[开放/封闭原则](https://en.wikipedia.org/wiki/Open/closed_principle)，它告诉我们必须可以在不更改任何现有代码的情况下进行此类更改。

您可能认为我在夸大其词，但您`HandleServerError`的应用程序中可能已经有超过一百个调用，而且调用的数量只会越来越多。你很快就会在系统中添加更多的“功能装饰器”。您是否考虑过进行任何授权检查、方法参数验证、检测或审计跟踪？你必须承认，做事`new Func<T>(() => someCall).HandleServerError()`感觉很乱，不是吗？

通过向系统引入正确的抽象，您可以解决所有这些问题，包括您实际问题的问题。

第一步是将给定的方法参数提升为[Parameter Object](http://c2.com/cgi/wiki?ParameterObject)：

```
public SomeMethodParameters
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Color Color { get; set; }
    public decimal Quantity { get; set; }

    public decimal Result { get; set; }
} 
```

我们可以将它们作为一个对象一起传递，而不是将所有单独的参数传递给一个方法。你说这有什么用？继续阅读。

第二步是引入一个通用接口来隐藏`SomeClass.SomeMethod` （或实际上任何方法）背后的实际逻辑：

```
public interface IMethodHandler<TParameter>
{
    void Handle(TParameter parameter);
} 
```

对于系统中的每个（业务）操作，您都可以编写一个`IMethodHandler<TParameter>`实现。在您的情况下，您可以简单地创建一个包装调用的实现`SomeClass.SomeMethod`，如下所示：

```
public class SomeMethodHandler 
    : IMethodHandler<SomeMethodParameters>
{
    void Handle(SomeMethodParameters parameter)
    {
        parameter.Result = SomeClass.SomeMethod(
            parameter.id,
            parameter.Name, 
            parameter.Color, 
            parameter.Quantity);
    }
} 
```

做这样的事情可能看起来有点傻，但它可以让你快速实现这个设计，并将静态的逻辑移动`SomeClass.SomeMethod`到`SomeMethodHandler`.

第三步是让消费者依赖于一个`IMethodHandler<SomeMethodParameters>`接口，而不是让他们依赖于系统中的一些静态方法（在你的情况下也是`SomeClass.SomeMethod`）。想一想依赖这种抽象有什么好处。

这样做的一个有趣结果是，它使对消费者进行单元测试变得更加容易。但也许你对单元测试不感兴趣。但是您对松散耦合感兴趣。当消费者依赖这样的抽象而不是真正的实现（尤其是静态方法）时，您可以做各种疯狂的事情，例如添加横切关注点，例如日志记录。一个很好的方法是用[装饰器](https://en.wikipedia.org/wiki/Decorator_pattern)`IMethodHandler<T>`包装实现。这是您的用例的装饰器：

```
public class LoggingMethodHandlerDecorator<T> 
    : IMethodHandler<T>
{
    private readonly IMethodHandler<T> handler;

    public LoggingMethodHandlerDecorator(
        IMethodHandler<T> handler)
    {
        this.handler = handler;
    }

    public void Handle(T parameters)
    {
        try
        {
            this.handler.Handle(parameters);
        }
        catch (Exception ex)
        {
            //******************************
            //Code for logging will go here.
            //******************************

            ErrorHandlers.ThrowServerErrorException(ex);

            throw;
        }
    }
} 
```

看看`Handle`这个装饰器的方法是如何包含你原来`HandleServerError<T>`方法的代码的？实际上，它与您已经在做的事情并没有太大的不同，因为`HandleServerError`“装饰”（或“扩展”）原始方法的行为具有新的行为。但我们现在使用的是对象，而不是使用方法调用。

所有这一切的好处是，这个单一的泛型`LoggingMethodHandlerDecorator<T>`可以包装在每个`IMethodHandler<T>`实现中，并且可以被每个消费者使用。通过这种方式，我们可以添加横切关注点，例如日志记录等，而无需消费者和方法都知道这一点。这就是开放/封闭原则。

但这还有其他一些非常好的东西。您最初的问题是关于如何获取有关方法名称和参数的信息。好吧，所有这些信息现在都很容易获得，因为我们已经将所有参数包装在一个对象中，而不是调用包装在`Func`委托中的一些自定义方法。我们可以这样实现`catch`子句：

```
string messageInfo = string.Format("<{0}>{1}</{0}>",
    parameters.GetType().Name, string.Join("",
        from property in parameters.GetType().GetProperties()
        where property.CanRead
        select string.Format("<{0}>{1}</{0}>",
            property.Name, property.GetValue(parameters, null))); 
```

这会将 TParameter 对象的名称及其值序列化为 XML 格式。或者您当然可以使用 .NET`XmlSerializer`将对象序列化为 XML 或使用您需要的任何其他序列化。所有信息（如果在元数据中可用），这非常好。当您给参数对象一个好的且唯一的名称时，它允许您立即在日志文件中识别它。连同实际参数和可能的一些上下文信息（例如日期时间、当前用户等），您将拥有修复错误所需的所有信息。

`LoggingMethodHandlerDecorator<T>`这个和你原来的有一个区别`HandleServerError<T>`，那就是最后`throw`一句话。您的实现实现了某种`ON ERROR RESUME NEXT`可能不是最好的事情。当方法失败时继续（并返回默认值）实际上是否安全？根据我的经验，通常情况并非如此，并且继续这一点，可能会使编写消费类的开发人员认为一切都按预期工作，或者甚至可能使应用程序的用户认为一切都按预期进行（他的更改例如被保存了，而事实上他们没有）。通常对此您无能为力，并且将所有内容都包含在内`catch`陈述只会使情况变得更糟，尽管我可以想象您想要记录此信息。不要被用户要求所迷惑，例如“应用程序必须始终工作”或“我们不想看到任何错误页面”。通过抑制所有错误来实现这些要求将无济于事，也不会解决根本原因。但尽管如此，如果你真的需要捕捉并继续，只需删除`throw`语句`，你就会回到原来的行为。

如果您想了解更多关于这种系统设计方式的信息：[从这里开始](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:21:12.230

您可以简单地访问它的`Method`和`Target`属性，因为它基本上是任何其他委托。

只需使用`func.Method`和`func.Target`。

# jquery - first jquery click event not firing correctly in ie8

> ID：13310551
> 
> 赞同：1
> 
> 时间：2012-11-09T15:07:20.997
> 
> 标签：jquery, internet-explorer-8, asp.net-mvc-4

I have a group of radio buttons in a div that is displayed after the user clicks a button.

```
<div id="quiz_take" class="media_layout quiz_panel hide">
    <div class="quiz_panel_layout">
        <p><b>Quiz4 Title</b></p>
        <ol>
            <li>
                <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit?</div>
                <div class="ans">
                    <input type="radio" name="..." id="0-0" value="0" />
                    <label>wrong</label>
                </div>
                <div class="ans">
                    <input type="radio" name="..." id="0-1" value="1" />
                    <label>right</label>
                </div>
                <div class="ans">
                    <input type="radio" name="..." id="0-2" value="2" />
                    <label>wrong</label>
                </div>
            </li>
            <li>
                <div>Cras luctus ante a sem gravida rutrum?</div>
                <div class="ans">
                    <input type="radio" name="..." id="1-0" value="0" />
                    <label>right</label>
                </div>
                <div class="ans">
                    <input type="radio" name="..." id="1-1" value="1" />
                    <label>wrong</label>
                </div>
                <div class="ans">
                    <input type="radio" name="..." id="1-2" value="2" />
                    <label>wrong</label>
                </div>
            </li>
            <li>
                <div>Fusce vulputate porta sem, ut bibendum urna lacinia in?</div>
                <div class="ans">
                    <input type="radio" name="..." id="2-0" value="0" />
                    <label>wrong</label>
                </div>
                <div class="ans">
                    <input type="radio" name="..." id="2-1" value="1" />
                    <label>wrong</label>
                </div>
                <div class="ans">
                    <input type="radio" name="..." id="2-2" value="2" />
                    <label>right</label>
                </div>
            </li>
        </ol>
        <div class="fit">
            <span id="submit_quiz" class="media_layout disabled-quiz-button button">Submit</span>
        </div>
    </div>
</div> 
```

This works fine in every browser, except for IE8 (the qa machine is an XP environment). It even works fine in IE7 oddly enough.

The event is handled by:

```
// can only submit if every radio group has selected
$('div.ans input:radio').live('click', function () {
    ...
}); 
```

This is the click event for a button above it that shows the quiz div:

```
// start quiz
$('#start_quiz').click(function () {
    if ($(this).hasClass('quiz-take-button')) {
        $('#quiz_ready').hide();
        $('#quiz_result').hide();
        $('div.ans input:radio').attr('checked', false);
        $('#quiz_take').show();
    }
}); 
```

The radio button event was originally a .click jquery event. But I've been trying many different methods to see troubleshoot. On the first click IE8 doesn't recognize it and the button is not selected, this is the case for any button. But each subsequent click does work. It's like one of the parent elements intercepts the first click. The css styling (padding and other spacing) is also not displaying correctly until after the first click event as well.

Any thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:17:54.880

您可以尝试更新已废弃的`.live()`方法，`.on()`看看它是否可以帮助您解决问题。

```
$('div.ans').on('click','input:radio', function(){

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:34:11.123

Sounds like a bug. What version of jQuery are you using? Here are a few workarounds that you can try.

I like using the 'change' event on input fields.

```
$('div.ans input:radio').live('change', function () { 
```

Are the radio buttons loaded dynamically after the page has loaded? If not, try removing the live.

```
$('div.ans input:radio').change(function () { 
```

I’ve noticed issues with more complex CSS selectors. Can you add a class to the radio button.

```
$('.myRadioButtonClass').live('change', function () { 
```

Or maybe something like this.

```
$('div.ans').find('input').live('change', function () { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:27:32.813

我想你只是想提交帮助？如何验证用户何时认为他们已经完成？

我不得不猜测你上面的 html 代码，所以这是我在下面使用的

# html

```
<div class="quiz-container">
  <div class="question">
  <input type="radio" name="q1"/>
  <input type="radio" name="q1"/>
  <input type="radio" name="q1"/>
 </div>
 <div>
  <input type="radio" name="q1"/>
  <input type="radio" name="q1"/>
  <input type="radio" name="q1"/>
 </div>
  <div class="question">
  <input type="radio" name="q2"/>
  <input type="radio" name="q2"/>
  <input type="radio" name="q2"/>
 </div>
 <div class="question">
  <input type="radio" name="q3"/>
  <input type="radio" name="q3"/>
  <input type="radio" name="q3"/>
 </div>
 <div class="submit">submit</div>
</div> 
```

# javascript

因此，对于每个测验容器提交按钮，检查每个答案都有一个选中的单选按钮。如果没有，请将该问题归为“红色”类，或者您想对它做的任何其他事情。

```
$("div.quiz-container").on({
  "click":function(event){
    var quizContainer = $(this).closest(".quiz-container"),
        questions =$(".question",quizContainer) ,
        answers = $("input:radio:checked",quizContainer);
   if(questions.length !== answers.length){
      questions.not(answers.closest(".question")).addClass("red");
   }
}
},".submit",null); 
```

# ajax - MVC3 ajax action request: handling answer

> ID：13310554
> 
> 赞同：0
> 
> 时间：2012-11-09T15:07:42.303
> 
> 标签：ajax, asp.net-mvc

I'm doing an Ajax request to an MVC3 action and I want to process the JsonResult in the success or error function. Currently the behaviour is strange: Before hitting my breakpoint in the action it hits the error function. Can anyone help me please and has a hint?

My view:

```
<form id="myForm">
    //fields go here...
    <button id="myButton" onclick="myFunction();">ButtonName</button>
</form> 
```

The ajax call:

```
function myFunction() {    
if ($('#myForm').valid() == false) {
    return;
}
var data = {
    val1: $("#val1").val(),
    val2: $("#val2").val()
};
var url = "/Controller/Action";
$.ajax({
    url: url,
    type: 'POST',
    dataType: 'json',
    cache: false,
    data: data,
    success: function (data, statusCode, xhr) { 
        alert('1');
        if (data && data.Message) {
            alert(data.Message);
            alert('2');
        }
        alert('3');
    },
    error: function (xhr, errorType, exception) { 
        alert('4');
        var errorMessage = exception || xhr.statusText; 

        alert("There was an error: " + errorMessage);
    }
});
return false; 
```

}

My action:

```
[HttpPost]
    public ActionResult Action(Class objectName)
    {
        var response = new AjaxResponseViewModel();

            try
            {
                var success = DoSomething(objectName);

                if (success)
                {
                    response.Success = true;
                    response.Message = "Successful!";
                }
                else
                {
                    response.Message = "Error!";
                }
            }
            catch (Exception exception)  
            {  
                response.Success = false;  
                response.Message = exception.Message;   
            }

            return Json(response); 
    } 
```

If you look in the ajax call I get directly the alert #4 and only then the action gets called which is too late. Unfortunately the exception is null. Directly after that the view gets closed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:49:08.293

您不会阻止默认的 onclick 行为。您可以尝试以下方法吗？

```
onclick="return myFunction()" 
```

# c# - 在不停止序列的情况下处理反应式扩展中的异常

> ID：13310557
> 
> 赞同：10
> 
> 时间：2012-11-09T15:07:55.577
> 
> 标签：c#, .net, exception-handling, system.reactive

为什么 RX 有以下语法`OnNext* (OnError|OnCompleted)`？而不是`(OnNext|OnError)* OnCompleted`？从实现的角度来看，这很清楚（这也与`IEnumerable`and有共同的语义`yield`），但我想这与现实生活中的情况不同。在现实生活中 - 生产者生成混合的数据流和异常（并且异常不会破坏生产者）。

问题：如果我理解正确，唯一可能的解决方案是使可观察的返回复杂数据结构结合初始数据和产生的异常（`Observable.Timestamp()`并且`.TimeInterval()`具有类似的概念）或者还有其他选择吗？

* * *

目前我找到了以下解决方案：在可观察生产者内部，我手动处理异常并将它们传递给以下数据结构，这是我可观察的结果

```
public class ValueOrException<T>
{
    private readonly Exception ex;
    private readonly T value;

    public ValueOrException(T value, Exception ex)
    {
        this.value = value;
        this.ex = ex;
    }

    public ValueOrException(T value)
    {
        this.value = value;
    }

    public T Value
    {
        get { return this.value; }
    }

    public Exception Ex
    {
        get { return this.ex; }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T16:46:03.023

如果消费者知道是否[`Exception`](https://msdn.microsoft.com/en-us/library/system.exception(v=vs.110).aspx)是预期的，那么我说这里*抛出*异常是不正确的。

您本质上是在尝试传达状态或逻辑，而异常并不意味着这样做。异常意味着使系统（或至少是当前操作）陷入停顿，因为发生了一些代码本身并不知道如何从中恢复的事情。

在这种情况下，它恰好`Exception`是您的业务逻辑/状态的*一部分*，但这并不意味着您可以抛出它们。您需要将它们向下传递给您的消费者，然后让您的消费者处理它们。

A[`Tuple<T, Exception>`](https://msdn.microsoft.com/en-us/library/dd268536(v=vs.110).aspx)在这里可以工作，但是类型（以及属性）缺乏特异性通常很混乱，所以我建议创建一个专用类型来传达你的操作结果，并通过[`IObservable<T>`](https://msdn.microsoft.com/en-us/library/dd990377(v=vs.110).aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T15:03:15.897

OnError 表示发生不可恢复错误的消息，因此应重置流。恢复之后，下一个事件在异常之前发生的事件的上下文中没有意义。

例如，考虑事件流：

*   用户加入了聊天
*   用户加入了聊天
*   **！！**聊天崩溃，所以所有用户都被踢了
*   用户加入了聊天

现在流消费者使用 Aggregate 函数来显示聊天的数量。最后应该显示什么？当然是1，不是3。我们应该在异常之后从头开始计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T21:40:31.690

ValueOrException 看起来像函数式编程中的 Either 类型。您刚刚交换了左右。按照惯例，右代表成功，左代表失败。

# sql - change the output format of the time elapsed between two hours

> ID：13310563
> 
> 赞同：2
> 
> 时间：2012-11-09T15:08:19.670
> 
> 标签：sql, database, oracle

I have the following SQL Query:

```
 SELECT 
    TO_CHAR(Event1, 'HH24:MI:SS'),
    TO_CHAR(Event2, 'HH24:MI:SS'),
    TO_CHAR((Event1-Event2) * -1440) AS Elapsed
... 
```

This gives me the time elapsed between the two hours at which event1 and event2 happened in minutes.

My question: how do I enforce the time elapsed to be displayed not in minutes but in the following format `HH24:MI:SS`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:30:21.363

您可以转换为导致间隔数据类型的 TIMESTAMP

```
SQL> create table test(a date, b date);

Table created.

SQL> insert into test values (sysdate - 1.029384, sysdate);

1 row created.

SQL> select 1440*(b-a) diff_in_secs from test;

DIFF_IN_SECS
------------
  1482.31667

SQL> select (cast(b as timestamp)-cast(a as timestamp)) diff_in_secs from test;

DIFF_IN_SECS
---------------------------------------------------------------------------
+000000001 00:42:19.000000 
```

`extract('hour' from your_interval_expression)`您可以使用等提取单个元素。

```
SQL> select extract(day from diff)||'d '||extract(hour from diff)||'h '||extract(minute from diff)||'m '||extract(second from diff)||'s' from (select (cast(b as timestamp)-cast
(a as timestamp)) diff from test);

EXTRACT(DAYFROMDIFF)||'D'||EX
--------------------------------------------------------------------------------
1d 0h 42m 19s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:33:01.323

尝试

```
select 
TRUNC(event1-event2)||':'||
TRUNC(MOD(event1-event2),1)*24)||':'||
TRUNC(MOD(MOD(event1-event2),1)*24,1)*60)||':'||
TRUNC(MOD(MOD(MOD((event1-event2),1)*24,1)*60,1)*60) as elapsed 
```

# javascript - Array length undefined

> ID：13310566
> 
> 赞同：-3
> 
> 时间：2012-11-09T15:08:44.520
> 
> 标签：javascript, multidimensional-array, variable-length

I'm trying to get the length of a multidimensional Array as follows, but when I test it with `alert()` I get undefined. I would like to know how many items has the parent array (myArray), as I would like then to use it in a cycle `i=0;i<myArray.length;i++`.

Any ideas?

```
myArray = array = {
        'def':array = {
            "first":"value",
        },
        0 : array = {
            "T":"Some text",
        },
        1 : array = {
            "T":"Some text",
        },
};

leng = myArray.length;
alert(leng); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:12:28.300

您可以使用数组语法创建数组：

```
 array = ["first item", {second:'item'}, 3];
    array.def = {something:"else"};
    alert(array.length); 
```

以下是使用数组数组创建多维数组的方法：

```
 array = [
        [1,2,3],
        [4,5,6],
        [7,8,9]
    ];

    alert(array[0][2]); // alerts "3" 
```

# odata - What's wrong with this OData batch update query?

> ID：13310568
> 
> 赞同：0
> 
> 时间：2012-11-09T15:08:51.453
> 
> 标签：odata

I followed the example from [here](http://www.odata.org/documentation/batch#BatchRequestBody) but I cannot get this to work!

I can't see anything wrong with the update query and I can't think of what to change because it seems fine. I'm only testing with one request because I wanted to make sure it works first.

Here's the request's body:

```
--batch_hJUuHcmH7ADWhYbtkF0o9JWlq
Content-Type: multipart/mixed; boundary=changeset_oYIVi6ByvAtKBlI7hqFWoOwX7

--changeset(oYIVi6ByvAtKBlI7hqFWoOwX7)
Content-Type: application/http
Content-Transfer-Encoding: binary

MERGE PrescriptionService.svc/Prescriptions(1L) HTTP/1.1
Host: 192.168.10.179
Content-Type: application/json;odata=verbose

{"PrescriptionType":"RegularMedicationPrescriptionType","Page":"0","Comment":"whoaaaaaa"}

--changeset(oYIVi6ByvAtKBlI7hqFWoOwX7)--
--batch(hJUuHcmH7ADWhYbtkF0o9JWlq)-- 
```

I get a `202 Accepted` so the "overall" batch request is not malformed. This is the response from the server:

```
--batchresponse_d8e813eb-0327-4518-9312-9b7a55d0da0c

Content-Type: multipart/mixed; boundary=changesetresponse_fc085e3b-68a8-46dd-86c6-334b1070607d

--changesetresponse_fc085e3b-68a8-46dd-86c6-334b1070607d--

--batchresponse_d8e813eb-0327-4518-9312-9b7a55d0da0c-- 
```

I tried POSTing to that same URL in the batch body to create an entity and it doesn't work either, so it has to be something with the request body.

What's wrong with the request's body?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:06:02.793

标题中指定的变更集边界：

边界=changeset_oYIVi6ByvAtKBlI7hqFWoOwX7

必须与稍后使用的完全匹配：

--changeset(oYIVi6ByvAtKBlI7hqFWoOwX7)

它没有。我不知道你为什么添加括号，但它们不应该在那里。批次边界本身也是如此。

# javascript - Changing Hidden Values to Geolocation in a Form on the fly

> ID：13310569
> 
> 赞同：0
> 
> 时间：2012-11-09T15:08:55.027
> 
> 标签：javascript, wordpress, google-maps, geolocation

I am creating a search script that also pulls in the users latitude & longitude, which can also be uses as basis of the search. I achieve this by using an onLoad method that calls a javascript that should place the code into the form.

```
<body <?php body_class(); ?> onload="office_getLocation()">
<form name='office_address_search_home' method='post' action='http://domain.com   /address-search-test/#map' class='form-search'>
<input class='office_address_search_input_home input-medium search-query' name='office_address_search' style="height:12px;font-size: 12px;padding-top:5px;" onClick="this.value=''" value="Find Your Nearest Office" />
<input type='hidden' name='region' value='United Kingdom' />
<input type="hidden" name="office_latitude" id="office_latitude_id" value=""/>
<input type="hidden" name="office_longitude" id="office_longitude_id" value="" />
<input name='Submit' class='office_address_submit_home btn' type='submit' value='Search' style='height: 26px;line-height: 12px;' />
</form>

<script>
function office_getLocation()
{
if (navigator.geolocation)
{
navigator.geolocation.getCurrentPosition(showPosition);
}
}

function showPosition(position)
{
document.getElementById("office_latitude_id").value = position.coords.latitude; 
document.getElementById("office_longitude_id").value = position.coords.longitude;
}
</script> 
```

However it doesn't work.

I have echoed the results of showPosition(position) out (the position.coords.latitude & longitude) onto the screen and it is getting them okay, just not assigning them to the hidden values.

Any ideas? Will happily supply more data if need be.

Cheers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:26:10.747

我想通了：）

基本上，代码在上面工作。但是更新的地理位置值没有出现在源代码中。我通过将隐藏变量更改为文本框来测试这一点，并且 - 最终（在页面完成加载后一秒钟左右）它们出现了。此更改未反映在源代码中，但确实有效:)

不确定这对任何人有多大用处，但你去吧:)

# sql - 使用字段在许多列标题中进行 PIVOT

> ID：13310580
> 
> 赞同：1
> 
> 时间：2012-11-09T15:09:07.217
> 
> 标签：sql, sql-server, sql-server-2008, pivot

我有以下使用 PIVOT 命令的基本 SQL 语句。

```
SELECT *
FROM

(
--select statement that creates my dataset 
) s

PIVOT (Max(incidentcount) for dept in ([dept1],[dept2])) p 
```

这符合我的预期，它为我提供了每个原因的事件计数，并以部门作为我的专栏。我的问题是我用于列的部门从 1 到 60。无论如何我可以告诉查询使用该列`Department`来填充该`PIVOT in`部分。显然我想避免手动输入每个部门。

**编辑**

这是创建我在数据透视表中使用的数据集的 sql...

```
SELECT Details, Department , count(*) NoIncidents
  FROM myincidentdb
  Group by Details,  Department 
```

**编辑 2**

![这是我的 sql 查询在我尝试 PIVOT 之前显示的内容](../Images/b4b54ba65384b7da915c54c38988d817.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:12:29.447

您将需要`PIVOT`对此使用动态 sql，您的代码将与此类似：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT DISTINCT ',' + QUOTENAME(dept) 
                    from yourtablewithDepartments
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT *
              from 
              (
                <your query goes here>
              ) src
              pivot 
              (
                max(incidentcount)
                for dept in (' + @cols + ')
              ) piv '

execute(@query) 
```

如果您发布更多详细信息，例如表结构等，则可以对其进行细化以满足您的需求。

编辑，根据您当前的查询，您似乎可以使用以下内容：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsNull AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(department) 
                    from myincidentdb
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT  Details, ' + @cols + ' 
              from 
              (
                select Details, Department
                from myincidentdb 
              ) x
              pivot 
              (
                count(Department)
                for Department in (' + @cols + ')
              ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d60d1/2)

# backbone.js - Pre loading backbone collections

> ID：13310581
> 
> 赞同：1
> 
> 时间：2012-11-09T15:09:16.657
> 
> 标签：backbone.js, backbone.js-collections

So what I'm wanting to do is have Backbone fetch all my collections when the router starts, and then keep all the collections and not have to re-fetch and reload all the collections while moving to different routes in the router. Does anyone know a way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:27:21.697

来自[Backbone.js 文档：](http://backbonejs.org/#Collection-fetch)

> 请注意，不应在页面加载时使用 fetch 来填充集合——加载时所需的所有模型都应该已经[引导](http://backbonejs.org/#FAQ-bootstrap) 到位。fetch 旨在为不需要立即需要的接口延迟加载模型：例如，具有可以切换打开和关闭的注释集合的文档。

这就是我在评论中的意思：

```
<script>
  define("data", function() {
    return <?php echo json here ?>;
  });
</script> 
```

然后你可以拥有`var data = require("data");`并使用它来初始化 Backbone 模型/集合。我不确定这是正确的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:42:53.990

好吧，主干默认情况下会这样做。只需将代码添加到您的路由器以创建每个集合的实例并`fetch()`在每个集合上调用一次。然后确保您的应用程序的其余部分只使用这些相同的集合实例并且`fetch()`不再调用它们。真的就是这么简单。

但是，我假设您希望应用程序的其他部分能够调用`fetch()`并在需要时静默使用缓存数据。这被认为是一个很难正确完成的问题，但一个天真的简单实现是简单地将`isCached`标志存储为您的集合的属性并在您的覆盖`fetch()`方法中检查它，如果您的集合数据已经加载，则无需执行任何操作就返回。

# asp.net - VB.NET WebBrowser 对象以低分辨率捕获远程网页

> ID：13310583
> 
> 赞同：2
> 
> 时间：2012-11-09T15:09:23.173
> 
> 标签：asp.net, .net, vb.net

**背景**
我有一个带有 VB.NET 后端的 ASP.NET Web 应用程序。在此应用程序中，用户可以创建付款请求，这些请求必须由经理批准，然后才能发送到应付账款进行进一步处理。在我的请求页面（用户输入请求信息的页面）中，我有一个链接到单独的.aspx 页面的按钮，该页面提供请求的打印预览。当请求被所有必需的批准者批准时，我有一个 VB.NET 函数，其中包含一个`WebBrowser`对象，该对象导航到幕后的打印预览页面并对其进行快照，然后将其保存为 .tiff 文件到内部文件共享，然后由内部进程获取并导入另一个名为 OnBase 的内部应用程序，以处理应付账款。

**问题**
我的问题是，当我的函数拍摄打印预览页面的快照时，保存的 tiff 的分辨率低于预期。换句话说，当它通过 OnBase 查看和打印出来时，它看起来有点糟糕。

**问题**
如何在生成网页快照时提高生成的 .tiff 文件的分辨率？

**编码**

```
 Private Sub CaptureWebPage()
    Try
        Dim tiffFileName As String
        tiffFileName = OnBasePath & "CheckRequest_" & CurrentRequestId & ".tiff"

        Dim impersonateCode As New AliasAccount("TheUsername", "ThePassword")
        impersonateCode.BeginImpersonation()

        Dim browser As Windows.Forms.WebBrowser = New Windows.Forms.WebBrowser
        browser.ScrollBarsEnabled = False
        browser.ScriptErrorsSuppressed = True
        browser.Navigate(OnBasePath & htmlFileName)

        While browser.ReadyState <> Windows.Forms.WebBrowserReadyState.Complete
            System.Windows.Forms.Application.DoEvents()
        End While

        System.Threading.Thread.Sleep(1500)
        browser.ClientSize = New Size(950, 768)
        Dim Height As Integer = browser.Document.Body.ScrollRectangle.Bottom
        browser.ClientSize = New Size(950, Height)
        Dim bmp As Bitmap = New Bitmap(browser.Bounds.Width, Height)

        browser.DrawToBitmap(bmp, browser.Bounds)

        If File.Exists(tiffFileName) Then
            File.Delete(tiffFileName)
        End If

        If File.Exists(OnBasePath & htmlFileName) Then
            File.Delete(OnBasePath & htmlFileName)
        End If

        bmp.Save(tiffFileName.ToString(), ImageFormat.Tiff)
        bmp.Dispose()

        impersonateCode.EndImpersonation()

    Catch ex As Exception
        Throw
    End Try
End Sub 
```

**附加信息**
我尝试使用`.SetResolution`我的位图对象的方法，但它实际上并没有改变生成的 .tiff 文件的分辨率。我已经多次尝试谷歌找到解决方案，但没有发现任何有用的东西。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:13:36.187

屏幕“分辨率”远低于打印“分辨率”。通常桌面显示器约为 100ppi，而桌面上的普通打印机可能为 600dpi。

我对获得更高分辨率的网页渲染的唯一建议是将抓取屏幕截图的内容配置为使用您现在使用的 3 倍分辨率，然后将其缩放设置为 300%。文本元素和矢量图形将被平滑渲染。图像仍然是他们的网络分辨率，你甚至可能在调整大小时通过插值损失图像质量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-18T17:24:32.527

您可以尝试将页面以 PDF 格式打印到虚拟打印驱动程序。我发现 OnBase 有时会对图像文件做一些奇怪的事情，它不喜欢彩色或灰度 TIFF。而是将 JPEG 用于彩色/灰度。

# cakephp - CakePHP - 将一组记录 ID 传递给分页 - 有可能吗？

> ID：13310589
> 
> 赞同：0
> 
> 时间：2012-11-09T15:09:39.017
> 
> 标签：cakephp

由于不得不从旧的非蛋糕应用程序和奇怪地构建的数据库表中导入数据，我需要传递允许显示的记录数组的分页 - 这可能吗？

通常我会将数据重新组织成适当的关系等，但由于时间尺度等原因，这是不可能的。

为您提供更多信息 - 在我的用户表中，我有一个字段，其中包含与允许查看的文档相关的 ID 列表。该字段将包含类似

```
123,23,45,56,765,122,11.9,71,25 
```

每个 ID 指的是文档模型。我知道通常您会创建适当的 ACO 和 ARO，并让 ACL/Auth 组件处理哪些用户可以访问哪些内容，但这一次不是一个选项。所以我想如果我可以通过分页/查找来做到这一点，它可能是一个选择吗？

任何帮助将非常感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:42:58.440

您不会将 ID 列表传递给它，而是在分页条件中使用 ID - 如下所示。

（代码写在我的头上，所以请原谅任何语法错误......等等。它至少应该给你正确的想法/路径）：

```
//Controller
$this->loadModel('User');
$this->loadModel('Document');

$user = $this->User->findById($userId);

$documentIds = explode(',', $user['User']['doc_ids']);

$this->paginate = array(
    'conditions' => array(
        'id' => $documentIds
    )
));
$documents = $this->paginate('Document'); 
```

当您将数组作为条件（例如`'id'=>$arrayOfIds`）传递时，它使用 MySQL 的“IN” - 类似于：

```
... WHERE id IN (45, 92, 173) 
```

# java - 为什么 java.sql.DriverManager.getCallerClassLoader() 是原生的？

> ID：13310592
> 
> 赞同：1
> 
> 时间：2012-11-09T15:09:51.117
> 
> 标签：java, jdbc, classloader, native-methods

`DriverManager.getCallerClassLoader()`类中的方法`java.sql.DriverManager` [声明为](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/sql/DriverManager.java#DriverManager.getCallerClassLoader%28%29) `native`. 我了解应用程序中的所有类加载器引用在当前执行的 JVM 中都可用。另外，我对本机方法的基本理解是，它用于调用本机库中定义的方法，并且它们在 JVM 执行环境之外执行。

我的问题是，`DriverManager.getCallerClassLoader()`需要它的实现是本机的需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:48:58.767

> 我对本机方法的基本理解是它用于调用本机库中定义的方法

这是正确的，本机方法表示对作为本机编译库的一部分的代码的调用

> 它们在 JVM 执行环境之外执行

这就是本机方法通常所做的事情。即Java用户编写的本机方法。但是，本机方法的功能并不受限制：一旦您在 JVM 之外，您就可以为所欲为。[`Class<T>`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Class.java?av=f)事实上， Java的内置类（例如`native`.

其中一种方法是包私有[`java.lang.Class<T>.getClassLoader0`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Class.java#Class.getClassLoader0%28%29)（是的，零）。最终的实现[`ClassLoader.getCallerClassLoader`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/ClassLoader.java#ClassLoader.getCallerClassLoader%28%29)参考了这个方法，它查询JVM内部来获取类加载器。

请注意，`DriverManager`不能将调用转发到`ClassLoader.getCallerClassLoader`，因为这将返回`DriverManager`的类加载器（因为`DriverManager`将是 的调用者`getCallerClassLoader`）。也不可能`DriverManager`重复`ClassLoader`'s的“魔力” `getCallerClassLoader`，因为它位于不同的包中（即不在 中`java.lang`），因此`Class<T>.getClasLoader0`无法访问。这就是为什么它被迫移动`getCallerClassLoader`到`native`领土，本地代码可以获取调用类并无限制地获取其类加载器。

# java - JSP 重定向到不同的 URL

> ID：13310593
> 
> 赞同：1
> 
> 时间：2012-11-09T15:09:55.780
> 
> 标签：java, jsp

在我的应用程序中，用户可以订阅不同的俱乐部，例如儿童俱乐部、青年俱乐部、成人俱乐部和老年俱乐部。现在，假设如果用户已经在 2012 年 10 月 7 日订阅了儿童俱乐部，并且如果他在 2012 年 11 月 2 日再次尝试订阅同一个俱乐部“儿童俱乐部”，那么我们尝试将该用户重定向到另一个俱乐部，例如青年俱乐部或成人俱乐部或老年俱乐部。每个俱乐部都有自己的域名，例如（例如）

```
Kid club = kidclub.google.mobi
Youth Club = youthclub.yahoo.mobi
Adult Club=adult.godaddy.mobi
Elderly Club = elderly.google.mobi 
```

以下是重定向的示例代码，但这不是重定向到不同的域 URL。是sendRedirect()方法的原因吗？这个应用程序中没有使用Servlet。Apache Tomcat 服务器中的 MySQL 数据库仅使用 JSP 请尽快提出建议。

```
 void doRedirect(HttpServletResponse response, String url)
    {
    try 
    {
    response.sendRedirect(url);
    }
    catch (Exception e) 
    {
    e.printStackTrace()
    }
    }

    void redirectReturningUser( HttpServletRequest request, HttpServletResponse
    response, ClubDomain currentDomain )
    {
    String redirectToUrl = currentDomain.getDefaultUrl();

    if( "kidclub.google.mobi".equals( currentDomain.getDefaultUrl() ) )
    redirectToUrl = "youthclub.yahoo.mobi";
    else if( "adult.godaddy.mobi".equals( currentDomain.getDefaultUrl() ) )
    redirectToUrl = "kidclub.google.mobi";
    else if( "youthclub.yahoo.mobi".equals( currentDomain.getDefaultUrl() ) )
    redirectToUrl = "adult.godaddy.mobi";
    else if( "adult.godaddy.mobi".equals( currentDomain.getDefaultUrl() ) )
    redirectToUrl = "elderly.google.mobi";
    else if( "elderly.google.mobi".equals( currentDomain.getDefaultUrl() ) )
    redirectToUrl = "adult.godaddy.mobi";

    doRedirect(response, "http://"+redirectToUrl );
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:17:35.290

`response.sendRedirect(url);`适用于相对（不带`http:`）和绝对 URL，因此问题一定出在其他地方。

`getOutputStream()`问题的最常见原因是其他一些代码已经开始使用or将输出写入响应`getWriter()`：一旦第一个字节以这种方式写入，就会生成 HTTP 标头（包含重定向信息）并将其发送到浏览器。

所以你应该调查一下，`catalina.out`因为`e.printStackTrace()`可能被调用了。

您可能还想检查`currentDomain.getDefaultUrl()`返回的内容；也许`if`上面的 s 根本不匹配。

# python - 定位颜色条

> ID：13310594
> 
> 赞同：73
> 
> 时间：2012-11-09T15:09:59.477
> 
> 标签：python, matplotlib

我有一个带有颜色条的 matplotlib 图。我想定位颜色条，使其水平，并在我的情节下方。

我几乎通过以下方式做到了这一点：

```
plt.colorbar(orientation="horizontal",fraction=0.07,anchor=(1.0,0.0)) 
```

但是颜色条仍然与绘图略有重叠（以及 x 轴的标签）。我想将颜色条进一步向下移动，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2017-04-15T10:48:40.357

### 使用填充`pad`

为了相对于子图移动颜色条，可以使用`pad`参数 to `fig.colorbar`。

```
import matplotlib.pyplot as plt
import numpy as np; np.random.seed(1)

fig, ax = plt.subplots(figsize=(4,4))
im = ax.imshow(np.random.rand(11,16))
ax.set_xlabel("x label")

fig.colorbar(im, orientation="horizontal", pad=0.2)
plt.show() 
```

[![在此处输入图像描述](../Images/01173b96ba674702989013e591fd7536.png)](https://i.stack.imgur.com/Ne4Me.png)

### 使用轴分隔器

可以使用 的实例`make_axes_locatable`来划分轴并创建一个与图像图完全对齐的新轴。同样，该`pad`参数将允许设置两个轴之间的空间。

```
import matplotlib.pyplot as plt
from mpl_toolkits.axes_grid1 import make_axes_locatable
import numpy as np; np.random.seed(1)

fig, ax = plt.subplots(figsize=(4,4))
im = ax.imshow(np.random.rand(11,16))
ax.set_xlabel("x label")

divider = make_axes_locatable(ax)
cax = divider.new_vertical(size="5%", pad=0.7, pack_start=True)
fig.add_axes(cax)
fig.colorbar(im, cax=cax, orientation="horizontal")

plt.show() 
```

[![在此处输入图像描述](../Images/787d11dd8cbbf5dd67b51a353ba803b9.png)](https://i.stack.imgur.com/5kQWJ.png)

### 使用子图

可以直接创建两排子图，一排图片，一排彩条。然后，在图形创建中设置`height_ratios`，`gridspec_kw={"height_ratios":[1, 0.05]}`使其中一个子图的高度比另一个小得多，并且这个小子图可以承载颜色条。

```
import matplotlib.pyplot as plt
import numpy as np; np.random.seed(1)

fig, (ax, cax) = plt.subplots(nrows=2,figsize=(4,4), 
                  gridspec_kw={"height_ratios":[1, 0.05]})
im = ax.imshow(np.random.rand(11,16))
ax.set_xlabel("x label")

fig.colorbar(im, cax=cax, orientation="horizontal")

plt.show() 
```

[![在此处输入图像描述](../Images/4697df0125022f8e8e58b3309abd39af.png)](https://i.stack.imgur.com/HLJbz.png)

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-11-09T16:23:11.387

**编辑**：更新`matplotlib`版本> = 3。

[这个答案](https://stackoverflow.com/a/43425119/1812739)已经分享了三种很好的方法。

[matplotlib 文档](https://matplotlib.org/stable/gallery/axes_grid1/inset_locator_demo.html)建议使用`inset_locator`. 这将按如下方式工作：

```
import matplotlib.pyplot as plt
from mpl_toolkits.axes_grid1.inset_locator import inset_axes
import numpy as np

rng = np.random.default_rng(1)

fig, ax = plt.subplots(figsize=(4,4))
im = ax.imshow(rng.random((11, 16)))
ax.set_xlabel("x label")

axins = inset_axes(ax,
                    width="100%",  
                    height="5%",
                    loc='lower center',
                    borderpad=-5
                   )
fig.colorbar(im, cax=axins, orientation="horizontal") 
```

[![代码输出](../Images/d426c551df046bd0ce0bf19ae7035d2c.png)](https://i.stack.imgur.com/4WkDW.png)

# django - Django Fomset is_valid() 失败且没有错误

> ID：13310596
> 
> 赞同：0
> 
> 时间：2012-11-09T15:10:02.050
> 
> 标签：django, django-forms, formset

我正在构建一个基于自定义 ModelForm 和自定义验证的表单集。

问题是验证失败且没有错误。

这是自定义的 ModelForm 和 Formset：

```
 class AlternateFloorForm(ModelForm):
         class Meta:
                 model = Floor
                 exclude = ('id_edificio', 'numero_di_piano', 'link', 'id')

                 widgets = {
                         'bearing' : HiddenInput(),
                         'zoom_on_map' : HiddenInput(),
                         'posizione_immagine' : HiddenInput(),
                 }  

 class BaseAlternateFloorFormSet(BaseFormSet):

         def clean(self):
                 if any(self.errors):
                         return

                 for i in range(0, self.total_form_count()):
                         form = self.forms[i]
                         bearing = form.cleaned_data.get('bearing', None)
                         if (bearing != None) or (bearing < 0) or (bearing > 360):
                                 raise forms.ValidationError("Bearing is not correct!!!") 
```

我也尝试过只使用一种形式，但 is_valid() 始终为 False，并且 field.errors field.non_field_errors 什么也不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:40:54.043

您缺少返回cleaned_data

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:04:51.447

所以，我错过了一个

```
 return self 
```

在表单验证中，正如 Raunak Agarwal 所说，我使用了错误的方法来返回 Mark Lavin 所说的错误。

但最重要的是

```
 if (bearing != None) or (bearing < 0) or (bearing > 360): 
```

总是返回 False。这是正确的条件：

```
 if (bearing == None) or (bearing < 0) or (bearing > 360): 
```

谢谢大家！

# r - 其他从矩阵显示图片的好方法？（除了图像（））

> ID：13310597
> 
> 赞同：0
> 
> 时间：2012-11-09T15:10:04.390
> 
> 标签：r, image, matrix, plot

说，我有一个特征向量`vec`，它实际上是一张图片（拉伸）。为了展示它，我使用了[这篇文章](https://stackoverflow.com/q/5638462/688080)中的解决方案：`image(matrix(vec,nrow=height,ncol=width),axes = FALSE,col = grey(seq(0, 1, length = 256)))`，但是因为原点在左下角，所以图片旋转了 90°。我想我也可以移动原点，但 R 应该有一个类似于`imshow`MATLAB 的函数，它更适合和直接用于显示图片而无需进行太多配置，而`image()`用于可视化矩阵。那么，有这样的功能吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:47:26.750

将矩阵转置`t()`为解决方案：

```
vec = runif(4096)
vec[1:500]=0
v = matrix(vec,nrow=height,ncol=width)
image(v,axes = FALSE,col = grey(seq(0, 1, length = 256))) 
```

![在此处输入图像描述](../Images/3801365f8d1b17fe7e486d7e7dfe97de.png)

```
image(t(v),axes = FALSE,col = grey(seq(0, 1, length = 256))) 
```

![在此处输入图像描述](../Images/31c6dd4fe4c42172602f82d93c715b6c.png)

或者翻转它：

```
image(t(v)[, nrow(v):1],axes = FALSE,col = grey(seq(0, 1, length = 256))) 
```

![在此处输入图像描述](../Images/fc1254ce1c6945dc83809c045d173d4f.png)

# selenium - selenium web 测试过渡到 java applet 测试并返回

> ID：13310606
> 
> 赞同：1
> 
> 时间：2012-11-09T15:10:58.657
> 
> 标签：selenium, web, applet

我有一个使用 selenium web 驱动程序编写的自动化 web 测试，它非常适合我测试的 web 部分。但是来自网页的部分测试实际上运行了一个本地 java 小程序（如果没有，则下载），它执行一个功能，然后在完成时自动关闭。我希望 selenium 测试无缝地转移到我可以在 java applet 上运行的自动化测试，然后在 java applet 上的自动化测试部分完成后继续。关于如何解决这个问题的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:18:32.757

您可以添加诸如[FEST](http://code.google.com/p/fest/)之类的 Swing 测试库并继续进行小程序测试。小程序部分完成后，您可以回到 Selenium 来处理您的 Web 部分。

据我所知，您无法使用 Selenium 进行小程序测试。

编辑：看起来像谷歌搜索“摇摆 gui 测试”给你几个其他的选择。

# java - Designer 中奇怪的 GWT 异常

> ID：13310607
> 
> 赞同：1
> 
> 时间：2012-11-09T15:11:02.120
> 
> 标签：java, eclipse, gwt, java-6

在尝试使用 GWT 设计器时，我开始遇到一些奇怪的异常。如果重要的话，我在 Ubuntu 上，GWT 2.4.0，Java 1.6.0_20 x64

当我使用设计器时，一个以前使用过`DisclosurePanel`的会显示在一个粉红色的框中，指示。查看详细信息时，它指示`NoClassDefFound`错误。这是没有意义的，因为在代码编辑器中，类是可见的并且编译时没有错误。

其次，我无法在设计器上放置 CellTable 实例。即使使用最基本的 T = java.lang.Object，错误也会回来表明`IllegalArgumentException : "Unable to find 'columns' in class com.google.gwt.user.client.UI.HTML.`

这是昨天和设计师一起工作的，但突然之间就进入了废话。我尝试重新安装 GWT 插件，甚至使用安装了新 GWT 插件的新 eclipse 安装，但无济于事。有谁知道这些错误的来源以及如何纠正它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:39:43.763

好吧，似乎前几天我第一次同步了我的构建机器，并在我的开发机器上安装了不同版本的 java。OpenJDK 1.6.0_20（冰茶 1.9）与 Java SE 1.6.0_35。

由于这个 java 在我的 /usr/bin 中，它在我的 PATH envi var 中早于我在 PATH 末尾的 1.6.0_35 构建，因此它使用的是旧的 0_20 版本。我猜 GWT 设计器是用比 1.6.0_20 更接近 1.6.0_35 的东西构建的，并导致[这里](https://developers.google.com/web-toolkit/tools/gwtdesigner/faq#NoSuchMethodError)暗示的冲突。：

首先检查您的 Eclipse“.log”文件（位于 /.metadata 目录中）。如果错误引用了您的某个类或方法，请检查您的类路径是否正确引用了您尝试使用的类。还要检查您的类是否已正确编译（没有红色 X），以及项目 /bin 目录中是否存在 .class 文件。用于编译代码的 JDK 与用于运行 Eclipse 的 JVM 之间的不匹配也可能表现为 NoClassDefFoundError 问题。例如，如果您使用 JDK 1.5 或 1.6 编译代码，然后使用 1.4 或 1.5 JVM 运行 Eclipse，则可能会遇到此问题。如果错误涉及自定义小部件，您还应该检查您的组件在其初始化期间没有触发异常（这可能表现为 NoClassDefFoundError）。尝试使用 Project > Clean... 或 Project > Build Project 命令刷新和清理您的项目。如果这没有帮助，请将测试用例发送给支持人员。

# colors - 使用 Conemu 的 Rspec 颜色

> ID：13310612
> 
> 赞同：7
> 
> 时间：2012-11-09T15:11:24.273
> 
> 标签：colors, rspec, cmd, conemu

我试图在运行 rspec 时让颜色显示在我的 Windows 7 x64 机器上。我已经尝试过 console2 和 ansicon 但这会使 Ruby 崩溃。我已经安装了 ConEmu 并且 Ruby 再次运行，但我没有为 rspec 获得任何颜色。同样在我希望看到颜色的行中，它们前面是 [31m 或 [36m 之类的文本（cmd.exe 也会出现这种情况）。

感谢您的帮助沙龙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T20:36:02.687

要在 ConEmu 中启用 ANSI X3.64 处理，您必须在“功能”页面上启用两个选项：

*   “注入 ConEmuHk”
*   “ANSI X3.64 / xterm 256 色”

事实上，如果您**只需要在根进程**中进行 ANSI 处理（例如 cmd.exe），则无需启用“Inject ConEmuHk”。但在大多数情况下，当您从 root shell 运行 smth（使用 ANSI）时 - 需要“注入”。

ATM，推荐最新的 alpha 版本，当前稳定版本存在一些滞后。

# curl - 由于更新冲突，无法删除文档

> ID：13310613
> 
> 赞同：7
> 
> 时间：2012-11-09T15:11:23.273
> 
> 标签：curl, couchdb, http-delete

这就是我获取文档并检查更新版本的方式：

```
curl  http://localhost/cdb/characters/e6b153975174556adc0b344e9a000a7f?revs=true

returns:
{"_id":"e6b153975174556adc0b344e9a000a7f","_rev":"1-25b25539eca3944ef8d8f20748ed4902","name":"Barack Obama","position":"US President"} 
```

然后我尝试像这样删除该文档：

```
curl -X DELETE http://localhost/cdb/characters/e6b153975174556adc0b344e9a000a7f?rev=1-25b25539eca3944ef8d8f20748ed4902

response:
{"error":"conflict","reason":"Document update conflict."} 
```

为什么，如果修订似乎没有问题，删除时是否存在文档冲突？

删除没有其他修订的文档是否有问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T17:53:43.667

删除具有其他修订的文档已完成：
`curl -X DELETE http://couchhost:5984/couchdb/docid\?rev\=rev_number`

这对我有帮助
`{"error":"conflict","reason":"Document update conflict."}`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T16:19:55.190

首先，由于您的代码看起来是正确的，请检查您的参数是否确实被发送。

否则，您应该检查修订是否被标记为已删除：

```
curl -X GET http://127.0.0.1:5984/kina/  \
 04ce1239166b841ae8a317897ec45b11?revs_info=true
{
  "_id":"04ce1239166b841ae8a317897ec45b11",
  "_rev":"3-bc27b6930ca514527d8954c7c43e6a09",
  "_revs_info":
  [
   {
    "rev":"3-bc27b6930ca514527d8954c7c43e6a09",
    "status":"available"
   },
   {
    "rev":"2-eec205a9d413992850a6e32678485900",
    "status":"deleted"
   },
   {
    "rev":"1-967a00dff5e02add41819138abb3284d",
    "status":"available"
   }
  ]
} 
```

要摆脱已删除的版本，您必须使用 _purge。例如：

```
curl -X POST http://127.0.0.1:5984/kina/_purge/ \
     -H "content-type:application/json" \
     -d ’{"7341477ce373f9cc76f351e598001cdd":
           ["2-5c7fb5dfeaf6f7cea149922fa1cdaf96"]
        }’

{
  "purge_seq":1,"purged":
  {
    "7341477ce373f9cc76f351e598001cdd":
    ["2-5c7fb5dfeaf6f7cea149922fa1cdaf96"]
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-30T14:42:31.047

这不是一个直接的答案，但是对于像我这样编码太晚并认为查询参数被命名为`_rev`的人`rev`来说，只需删除该下划线即可。

（实际上，我不得不启用 couchdb 调试日志来比较从 fauxton 与我的应用程序发送时 couchdb 收到的 http 请求）

# csh - 子外壳标准输出 n tcsh

> ID：13310614
> 
> 赞同：2
> 
> 时间：2012-11-09T15:11:26.290
> 
> 标签：csh, tcsh

在 bash 中，我得到一个 subshel​​l 块的标准输出并将其分配给一个变量，例如：

```
$ VAL="$(ls)" 
```

如何在 tcsh 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:16:30.780

使用反引号获取输出并将`set`其分配给变量

例子：

```
 $ set val=`ls`
    $ set val=`ls | grep foo` 
```

清除变量使用`unset val`

有关csh / tcsh 的更多示例和信息，请参见[http://www.grymoire.com/Unix/Csh.html](http://www.grymoire.com/Unix/Csh.html)

# c# - 用 dday 计算循环结束日期

> ID：13310616
> 
> 赞同：2
> 
> 时间：2012-11-09T15:11:40.300
> 
> 标签：c#, icalendar, dday

我想使用 DDAY.Ical 库获取重复事件的结束日期。有可能的？

例如我有这个代码：

```
 calendar = new iCalendar();
            event = new Event();
            rp = new RecurrencePattern("RRULE:FREQ=DAILY;COUNT=10");
            event.RecurrenceRules.Add(rp);
            rp.Parameters.
            event.DTStart = new iCalDateTime(DTToday);
            calendar.Events.Add(event);
            event.GetOccurrences(new iCalDateTime(DTTomorrow)); 
```

我想要 event.DTEnd 和这条线的发生

```
 event.GetOccurrences(new iCalDateTime(DTTomorrow)); 
```

# linux-device-driver - 从网络设备驱动程序中的硬盘读取/写入 (Linux)

> ID：13310622
> 
> 赞同：1
> 
> 时间：2012-11-09T15:11:57.047
> 
> 标签：linux-device-driver

我是 Linux 编程的新手。我想根据我的需要定制一个现有的驱动程序。它是 RealTek 8169 网络驱动程序。

我的问题是：我可以访问驱动程序内的硬盘吗？这是“允许”的吗？或者我会遇到一些问题吗？

我想做这样的事情：

```
 // Which disk?
  char diskName[] = "/dev/sda";
  std::string diskError = std::string() + diskName + ": ";

  // Open device file
  std::ifstream disk(diskName, std::ios_base::binary);

  if(!disk)
    throw(std::runtime_error(diskError + std::strerror(errno)));

  // Seek to 12345'th sector
  disk.seekg(512 * 12345);
  if(!disk)
    throw(std::runtime_error(diskError + std::strerror(errno)));

  // Read in one sector
  std::vector<char> buffer(512);
  disk.read(&buffer[0], 512);
  if(!disk)
    throw(std::runtime_error(diskError + std::strerror(errno))); 
```

# shell - 从 grep 迭代数组

> ID：13310627
> 
> 赞同：0
> 
> 时间：2012-11-09T15:12:06.360
> 
> 标签：shell, ubuntu-12.04

我在这里有一个 Ubuntu 12.04 服务器，并且我有一个可以使用系统中某些端口的进程。

我必须跟踪这些端口的方法是这个命令：

`ps ax | grep thin | grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}\:[0-9]{1,5}'`

现在我想将此命令用作 shell 脚本中的数组变量。

如何将那里的值解析为数组？

该值如下所示：

`0.0.0.0:3000 0.0.0.0:3001 0.0.0.0:3002 0.0.0.0:3003`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:21:38.257

要将命令的输出放入数组中：

```
array=( $(ps ax | grep thin | grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}\:[0-9]{1,5}') ) 
```

# c++ - 如何使用 FFMpeg 解析 RTP H264 数据包

> ID：13310631
> 
> 赞同：4
> 
> 时间：2012-11-09T15:12:12.873
> 
> 标签：c++, ffmpeg, h.264, rtp, live555

我是这个论坛的新手，我希望有人可以帮助我解决我的问题。

我需要`RTP H264 packets`使用`FFMpeg`to转换`BMP files`，到目前为止我已经实现了以下目标：

-`Reading H264 file and convert it to BMP files using FFMpeg.`

-`Receiving raw RTP H264 packets.`

如果有人可以帮助我`RTP H264`使用 解码数据包`FFMpeg`，我将不胜感激，我在互联网上进行了很多搜索，并找到了以下解决方案：

*   **libavformat 使用 rtp_h264.c**，我无法在任何地方下载库，虽然文件在那里，但没有下载库就无法使用它，如果可能的话，有人可以提供下载链接和示例吗？

*   **live555 使用 H264VideoRTPSource**，下载库后，我不明白如何使用此代码，我应该实例化该类吗？还是继承它？互联网上有使用 H264VideoRTPSource 的示例吗？

有没有其他方法可以在不阅读所有标准的情况下做到**这**一点`(RFC3984 and RFC6184)`

谢谢你。

# java - java.util.Map 键和值的运行时类型

> ID：13310632
> 
> 赞同：0
> 
> 时间：2012-11-09T15:12:15.097
> 
> 标签：java, spring, types, map, dependency-injection

**问题：** 我正在尝试查找映射的键和值的 java 类型，但不必遍历映射然后使用`instanceof`，并且即使映射为空也想知道它。
上下文：
`CKEditorConfig`可以从这里下载（http://ckeditor.com/download）是使用地图实现的。但是你不能使用注入来设置这个映射，因为没有提供setter方法，也没有提供构造函数来使用构造函数注入来设置它。但是，有五个 addConfigValue 方法（见下文），我可以使用它们来添加这些值。

```
public void addConfigValue(final String key, final Number value);
public void addConfigValue(final String key, final String value);
public void addConfigValue(final String key, final Boolean value);
public void addConfigValue(final String key, final Map<String, ? extends Object> value);
public void addConfigValue(final String key, final List<? extends Object> value); 
```

我将在我的 j2ee/java web 应用程序的几个地方使用 ckeditor，所以我想我应该创建一个工厂类，它返回通过某个名称初始化编辑器所需的设置。但我想将这些配置外部化并将它们设置在 spring 上下文文件中。所以由于我无法创建配置对象，我必须使用常规地图，然后使用地图构建配置对象。但我需要在构建对象之前验证那些来自 spring 的地图。

这是我构建配置对象的方法：

```
 @SuppressWarnings("unchecked")
    public CKEditorConfig buildConfigFromMap(Map<String, Object> configMap) {
        CKEditorConfig config = new CKEditorConfig();
        for (String key : configMap.keySet()) {
            Object val = configMap.get(key);
            if (val instanceof Number)
                config.addConfigValue(key, (Number) val);
            else if (val instanceof String)
                config.addConfigValue(key, (String) val);
            else if (val instanceof Boolean)
                config.addConfigValue(key, (Boolean) val);
            else if (val instanceof List) {
                config.addConfigValue(key, (List<Object>) val);
            } else if (val instanceof Map) {
                // TODO
            }
            throw new IllegalArgumentException("invalid map value types");
        }
            return config;
    } 
```

正如你所看到的，如果对象是一个地图，我需要能够验证它的键是否是一个字符串。我知道我可以做这样的事情：

```
} else if (val instanceof Map) {
    for (Object mapKey : ((Map<Object, Object>) val).keySet()) {
    if (!(mapKey instanceof String))
        throw new IllegalArgumentException("invalid map value types");
    }
config.addConfigValue(key, (Map<String, Object>) val);
} 
```

但整个练习让我觉得我做的不对？有什么建议么？我愿意使用完全不同的方法。感谢您的意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:36:02.537

这是不可能的，Java 泛型在运行时会被删除。实际上它们只存在于编译器（和源代码）中。

您无法检查键和值的实际类型并从中推断出用于 Map 的泛型。

您只能在源代码中为您控制的地图推断泛型。

在我看来，您想强制 Spring 仅提供 Map<String, ?>。这是一种解决方法：

```
public class StringKeyMapEntry { public String key; public Object value; } 
```

注入 List<StringKeyMapEntry> 或 StringKeyMapEntry[] （不确定Spring是否可以做数组）并将其转换为 Map<String, ?>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:29:17.667

您有许多由字符串引用的设置......我会使用一种方法并将签名更改为此。

```
public void configure(final Map<String, ? extends Object> map); 
```

然后对每个设置做你想做的事情，你可以直接调用每个设置或循环遍历它。

# xsd - cvc-elt.1：找不到元素“MyElement”的声明

> ID：13310637
> 
> 赞同：46
> 
> 时间：2012-11-09T15:12:35.957
> 
> 标签：xsd, xml-namespaces, xml-validation, xml-error

我正在尝试使用 xsd 验证一个非常简单的 xml，但由于某种原因，我收到了这个错误。如果有人能解释我为什么，我将不胜感激。

*XML 文件*

```
<?xml version="1.0" encoding="utf-8"?> 
<MyElement>A</MyElement> 
```

*XSD 文件*

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema"
        targetNamespace="http://www.example.org/Test"
        xmlns:tns="http://www.example.org/Test"
        elementFormDefault="qualified">

    <simpleType name="MyType">
        <restriction base="string"></restriction>
    </simpleType>

    <element name="MyElement" type="tns:MyType"></element>
</schema> 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-10T10:20:28.543

您的架构适用于其目标命名空间，因此它在该目标命名空间中`http://www.example.org/Test`定义了一个具有名称的元素。但是，您的实例文档在**no namespace**中具有 name 的元素。这就是为什么验证解析器告诉您它找不到该元素的声明，您没有为没有命名空间中的元素提供架构。`MyElement``http://www.example.org/Test``MyElement`

 **您要么需要更改架构以根本不使用目标命名空间，要么需要更改实例以使用例如`<MyElement xmlns="http://www.example.org/Test">A</MyElement>`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-12-15T14:59:01.407

在进行上述 Martin 建议的更改后，我仍然遇到同样的错误。我不得不对我的解析代码进行额外的更改。我正在通过 DocumentBuilder 解析 XML 文件，如 oracle 文档中所示： [https ://docs.oracle.com/javase/7/docs/api/javax/xml/validation/package-summary.html](https://docs.oracle.com/javase/7/docs/api/javax/xml/validation/package-summary.html)

```
// parse an XML document into a DOM tree
DocumentBuilder parser = DocumentBuilderFactory.newInstance().newDocumentBuilder();
Document document = parser.parse(new File("example.xml")); 
```

问题是 DocumentBuilder 默认情况下不支持命名空间。以下附加更改解决了该问题：

```
// parse an XML document into a DOM tree
DocumentBuilderFactory dmfactory = DocumentBuilderFactory.newInstance();
dmfactory.setNamespaceAware(true);

DocumentBuilder parser = dmfactory.newDocumentBuilder();
Document document = parser.parse(new File("example.xml")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-25T19:15:48.803

我的 XXX 元素出现此错误，这是因为我的 XSD 根据 javax.xml.bind v2.2.11 格式错误。我认为它使用的是较旧的 XSD 格式，但我没有费心去确认。

我最初的错误 XSD 如下所示：

```
<xs:element name="Document" type="Document"/>
...
<xs:complexType name="Document">
    <xs:sequence>
        <xs:element name="XXX" type="XXX_TYPE"/>
    </xs:sequence>
</xs:complexType> 
```

我迁移成功的良好 XSD 格式如下：

```
<xs:element name="Document">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="XXX"/>
        </xs:sequence>
    </xs:complexType>        
</xs:element>
...
<xs:element name="XXX" type="XXX_TYPE"/> 
```

对于每个类似的 XSD 节点，依此类推。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-16T20:29:30.213

我在使用 Maven 的 Eclipse 中使用附加信息时遇到了同样的错误

```
schema_reference.4: Failed to read schema document 'https://maven.apache.org/xsd/maven-4.0.0.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>. 
```

这是在复制一个新控制器之后，它的界面来自一个 Thymeleaf 示例。老实说，无论我多么小心，我仍然无法理解人们应该如何解决这个问题。在（幸运的）猜测中，我右键单击了该项目，单击了 Maven 和更新项目，这解决了问题。**

# winforms - 如何删除winform应用程序中的自动滚动？

> ID：13310638
> 
> 赞同：0
> 
> 时间：2012-11-09T15:12:38.673
> 
> 标签：winforms, datagridview, autoscroll

我有一个 .NET 4.0 中的 winform（Windows 窗体）应用程序。在主屏幕上，我有两个 DataGridView，一个在第二个的顶部。如果我在一个小屏幕（比如 1024x768）上启动我的应用程序，我不会完全看到第二个 DataGridView。当我在第二个 DataGridView 中单击时，屏幕会自动滚动以显示完整的 DataGridView。我不想要这种行为，因为现在我在我的第一个 DataGridView 中看不到重要信息！。那么我该如何消除这种烦人的行为呢？

仅供参考：我的应用程序针对 1280x960 屏幕进行了优化。

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:10:42.317

你可能正在寻找[这个](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.autoscroll%28v=vs.90%29.aspx)

将此属性设置为`false`应该可以解决问题。

# http - HTTP Keep-Alive - 如果保持轮询 - 连接是否有最大值？

> ID：13310645
> 
> 赞同：0
> 
> 时间：2012-11-09T15:13:19.967
> 
> 标签：http

我搜索并发现普遍的共识是，在不确定的时间内使用 1.1 keep-alive 不是正确使用 1.1 keepalive 类型的连接。我们正在通过代理进行隧道传输，并希望长时间维护此套接字（如果可能，永远保持）。

撇开它可能不合适，是否有一些普遍接受的最长时间？

客户端和服务器端软件是自定义的，因此没有问题。我们已经有了具有永久持久套接字的客户端。我们正在尝试通过他无法使用 HTTP 访问的代理来克服隧道。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:21:36.740

大多数浏览器使用不到两分钟，chrome 是一个例外，只有 5 分钟。

1.  歌剧 11.11 – 120 秒
2.  Chrome 13 – 至少 300 秒（服务器在 300 秒超时后关闭）
3.  IE 9 – 60 秒（可在注册表中更改，似乎也适用于 IE 8/9，尽管该页面仅提及 IE 5/6/7）
4.  Firefox 4 – 115 秒（可在 about:config 中使用 network.http.keep-alive.timeout 首选项更改）

我觉得你应该使用类似于浏览器使用的东西。我认为没有一个推荐的最大超时时间。

[这个](https://stackoverflow.com/questions/4139379/http-keep-alive-in-the-modern-age)Stackoverflow 帖子也可能有用。

# c# - 为什么 Do() 和 Subscribe() 中的 OnError 行为在 .NET RX 中不同

> ID：13310652
> 
> 赞同：1
> 
> 时间：2012-11-09T15:13:50.043
> 
> 标签：c#, .net, system.reactive

`IObservable.Do()`处理程序重载，`OnError`但异常被传播到`Subscribe()`调用，但如果`OnError`在中指定`Subscribe`- 异常不会传播给调用者 - 这是一个简单的例子：

```
 public static void Main()
    {
        OnErrorInDo(); // throws
        OnErrorInSubscribe(); // doesn't throw
    }        
    public void OnErrorInDo()
    {
        var observableThatThrows = GetEnumerableThatThrows().ToObservable();
        var res = observableThatThrows.Do(i => Console.Write("{0}, ", i), LogEx).Subscribe();
    }
    public void OnErrorInSubscribe()
    {
        var observableThatThrows = GetEnumerableThatThrows().ToObservable();
        var res = observableThatThrows.Do(i => Console.Write("{0}, ", i), LogEx)
            .Subscribe(i=>{}, LogEx);
    }

    public IEnumerable<int> GetEnumerableThatThrows()
    {
        foreach (var i in Enumerable.Range(0,10))
        {
            if (i != 5)
                yield return i;
            else
                throw new Exception("ex in enumerable"); 
        }
    }
    public void LogEx(Exception ex)
    {
        Console.WriteLine("Ex message:" + ex.Message);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:37:35.980

这个问题的简短回答是：`Do`监控通知；`Subscribe`处理它们。

一个抛出而不是另一个的实际原因是，默认 OnError 处理程序调用订阅不提供一个是抛出异常。因此，第一个方法将抛出，无论 Do 是否存在，第二个方法不会因为传递给订阅的 OnError 处理程序。

Do 是作为 teeing 运算符提供的，它允许您在通知被订阅者观察或发送到运算符的管道之前对通知进行一些处理。它最常见的用途是调试或记录。除了传递给 Do 的方法的副作用之外，您应该看到*使用或不使用 Do 的系统行为之间没有区别*。

如果你有：

```
obs.Do(i => { /* ... */ }, ex => { /* ... */ }).Subscribe(...); 
```

和

```
obs.Subscribe(...); 
```

您将在传递给的方法中看到相同系列的通知`Subscribe`。如果 Do 没有传递异常，它将修改通知流，这与该运算符的设计背道而驰。

# r - R - 如何从数据框中的单个列和行中获取字符串

> ID：13310653
> 
> 赞同：2
> 
> 时间：2012-11-09T15:13:49.170
> 
> 标签：r

所以我试图在 R 中[解决这些问题](http://rosalind.info/problems/as-table/)以便学习它。

但是我被困在[第一个问题](http://rosalind.info/problems/dna/)上，即简单地计算字符串中字符的频率。我什至无法超越加载数据并获取字符串:-(

我该如何做一些事情，比如从这个文本文件中打印字符串的第一个字符？

这是我到目前为止所尝试的：

```
> rosalind_dna <- read.table("~/Downloads/rosalind_dna.txt", quote="")
Warning message:
In read.table("~/Downloads/rosalind_dna.txt", quote = "") :
  incomplete final line found by readTableHeader on '~/Downloads/rosalind_dna.txt'
>   viewData(rosalind_dna)
> str(rosalind_dna[1,1,1])
 Factor w/ 1 level "GGCCCGGTTACTGCGACTGAACAATCAAAATCTGAAGCATTTAAGCCAAACCAATTGAGATCGACTTACGAGCGATAACCCAGTATATTCAAGTGCTACTGATGAGGCGTGGTCCCCTGGACAAGGC"| __truncated__: 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:32:38.470

到目前为止，您所做的一切都很好。

`read.table`返回一个数据框。在这种情况下，您只会得到一个包含单列且该列中只有一个值的数据框。

默认情况下，R 会将数据框中的字符列转换为因子。您可以使用`as.character`.

然后，您只需将该单个字符串拆分为单个字符 ( `strsplit`)，然后制作一个表格 ( `table`)。（不需要循环！）

这是一个玩具示例，说明了我提到的所有功能：

```
> dat <- data.frame(V1 = factor("abcdfjtusje"))
> str(dat)
'data.frame':   1 obs. of  1 variable:
 $ V1: Factor w/ 1 level "abcdfjtusje": 1
> x <- as.character(dat[1,1])
> x
[1] "abcdfjtusje"
> strsplit(x,"")
[[1]]
 [1] "a" "b" "c" "d" "f" "j" "t" "u" "s" "j" "e"

> strsplit(x,"")[[1]]
 [1] "a" "b" "c" "d" "f" "j" "t" "u" "s" "j" "e"
> table(strsplit(x,"")[[1]])

a b c d e f j s t u 
1 1 1 1 1 1 2 1 1 1 
> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:03:38.870

我已将链接中的文件复制`/tmp/string.txt`到此文件中只有一行：

```
AGCTTTTCATTCTGACTGCAACGGGCAATATGTCTCTGTGTGGATTAAAAAAAGAGTGTCTGATAGCAGC 
```

`readLines`我们可以使用以下命令读取文件：

```
s = readLines("/tmp/string.txt") 
```

该变量`s`只是一个字符串。为了拆分基础，我们使用：

```
strsplit(s, "") 
```

然后使用`table`：

```
table(strsplit(s, "")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:24:39.557

如果要显示整个文件的第一个字符，可以执行以下操作：

```
s = readLines("Your file.txt",n=1)
substr(s, 1, 1) 
```

要显示每行的第一个字符：

```
s = readLines("Your file.txt")
substr(s, 1, 1) 
```

要显示每行的第 n 个字符：

```
n = 5
s = readLines("Your file.txt")
substr(s, n, n) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-03T14:54:09.073

你可以使用 readLine 和 substr 命令来解决这个问题，但是如果你坚持从数据帧中 grep 的第一个字符，你可以简单地使用 `substr(dataframe$colname,1,1)` 它将返回一个字符串向量。

# java - 查看二维数组中的元素

> ID：13310656
> 
> 赞同：0
> 
> 时间：2012-11-09T15:14:07.110
> 
> 标签：java, arrays, multidimensional-array

我正在使用二维数组，我想查看最后一行中最小元素的“左上角”“顶部”和“右上角”的元素。我有一个有效的代码，但是它显示了行中每个元素的所有方向，而不仅仅是最小的一个。任何人都可以帮忙吗？这是我的代码：

```
for (int y = array.length-1; y == array.length-1; y--)
{
    for (int x = 0; x < array[y].length; x++)
    {
        int lowest = array[y][0];  
        for (x = 0; x < array[y].length; x++)
        {
            if (array[y][x] <= lowest)
                lowest = array[y][x];

            //if element is on left
            if (x == 0)
            {
                up = array[y-1][x];
                upRight = array[y-1][x+1];
                upLeft = 0;
            }

            //if element is on right
            else if (x == array[0].length - 1)
            {
                upLeft = array[y-1][x-1];
                up = array[y-1][x];
                upRight = 0;
            }

            //if element is anywhere else
            else
            {
                upLeft = array[y-1][x-1];
                up = array[y-1][x];
                upRight = array[y-1][x+1];
            }
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:02:43.073

一些观察。

目前，您似乎有 2 个嵌套`for`循环，您在其中迭代整个数组。根据您的描述，这听起来没有必要，您只需搜索`array[array.length - 1]`最低值即可。

专注于编写一个单独的步骤（可能是它自己的方法），它将找到最后一行中最小值的索引。

你几乎有正确的逻辑来找到左上角、右上角和右上角。`array[array.length - 2]`您只需要它根据最后一行的最小值的索引来查看元素。

* * *

**更新：**

您在问题中提到您的代码“*显示行中每个元素的所有方向*”。您没有包含任何显示结果的代码，但从您在下面的评论中听起来您的问题如下：

设置`upLeft`,`up`的代码`upRight`位于搜索最小值的循环**内。**即你有：

```
for (x = 0; x < array[y].length; x++)
        {
            if (array[y][x] <= lowest)
                lowest = array[y][x];

            //if element is on left
            if (x == 0) 
```

所以这意味着它发生在行中的每个元素上。

你可能想要做的是让你的循环找到最低的元素，并记住它的索引：

```
for (x = 0; x < array[y].length; x++)
{
    if (array[y][x] <= lowest) {
        lowest = array[y][x];
        indexOfLowest = x;
    }
} 
```

然后在那**之后**，在内循环之外， set `upLeft`，`up`并`upRight`使用找到的最低元素的索引：

```
//if element is on left
if (indexOfLowest == 0) 
```

等等

# c# - 需要有关将用户帐户添加到 Windows 窗体的建议

> ID：13310659
> 
> 赞同：0
> 
> 时间：2012-11-09T15:14:22.687
> 
> 标签：c#, security, user-accounts

所以我继承了这个项目，它有大约 20 个表单、数百个控件和数万行代码。我已经研究了一段时间，现在我的老板要求添加用户帐户。

基本上，会有不同的级别，例如`User`、`Supervisor`和`Administrator`。当您启动应用程序时，您必须登录，它会根据某种数据库检查您的登录凭据，并确定您拥有什么样的权限。

`User`将在主窗体上禁用除`Go`按钮之外的所有控件（这样做的好方法吗？）。`Supervisor`将启用所有内容并可以创建用户帐户（仅以某种形式）。`Administrator`相同`Supervisor`但也可以备份用户帐户。

现在我的问题是我不确定如何实现这一点。我无法查询在线服务或数据库，因为该程序必须在没有互联网连接的情况下才能使用。在计算机上拥有外部文件的问题是有人可以编辑或删除它。

我的想法是将用户帐户存储在`Settings`应用程序的类中，但即使存储外部配置文件。我想我需要它能够存储在可执行文件中，但也需要作为文件保存和导入。

显然，密码也必须在此文件中进行哈希处理。有谁知道任何好的且易于使用的类（最好是没有使用限制的类，因为此应用程序将在商业上出售）。用户名也应该被散列吗？因为如果有人掌握了该文件，他们也不应该知道所有用户名，因为这样可以更容易猜测密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:45:25.027

你的老板要求对你的申请进行重大调整。

在不了解您的所有要求的情况下，我无法真正将您推向一个方向或另一个方向。查看[智能客户端架构和设计指南](http://msdn.microsoft.com/en-us/library/ff647359.aspx)（也提供[PDF 格式](http://www.microsoft.com/downloads/details.aspx?FamilyId=8EC600BD-A2E5-44AC-9A8F-68D06361853E&displaylang=en)），它应该可以帮助您了解您要完成的工作的范围，并确定您需要考虑的一些设计/架构模式。

[第 5 章](http://msdn.microsoft.com/en-us/library/ff648203.aspx)处理安全注意事项并描述不同的身份验证模型。这至少应该给你一个很好的起点。

# asp.net - ASP.NET mvc 3 分页/跟踪最后一页

> ID：13310666
> 
> 赞同：0
> 
> 时间：2012-11-09T15:14:53.780
> 
> 标签：asp.net, pagination

我是 asp 新手，编写了一个项目，该项目将连接到数据库，检索数字记录，然后在分页表中将这些记录呈现给用户。然后用户可以单击记录进行编辑、进行编辑、保存更改并返回到原始表格视图。更新页面是强类型的。

我正在努力跟踪上次查看的分页页面，然后导航回它。即，如果用户在第 5 页（共 10 页），则他们从第 5 页更新记录，当保存编辑时，表格再次显示，但已返回到第 1 页。跟踪记录的最佳方法是什么最后一页？

任何帮助表示赞赏。

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:17:08.527

通常我会在表单提交中传递页码，然后在保存后重定向时，将其作为查询字符串的一部分传递，以便您的操作可以将正确的数据页面提供回视图。

这还允许用户为特定页面添加书签，这可能很有用，或者甚至在必要时刷新当前页面，而不会失去他们的位置。

如果该功能可用，您可能还需要传递排序信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:39:02.157

我发现将它保存在视图状态中很好：例如：

ViewState("分页") = 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:38:42.260

最后，我在服务器上使用了会话 cookie 来跟踪显示的页面和最后一次搜索。这意味着我可以在页面/控制器之间导航并跟踪每个页面中显示的页面，并且不需要传递大量参数。我添加了一个新类：

```
public class SearchModel 
{
    public string TargetController { get; set; }
    public string TargetMethod { get; set; }
    public string OriginalSearchCriteria { get; set; }
    public string NewSearchCriteria { get; set; }
    public int Page { get; set; }

    public void SetCriteria(String newCriteria, int pageIn)
    {

        if (!newCriteria.Equals(OriginalSearchCriteria))
        {
            OriginalSearchCriteria = newCriteria;
            Page = 1;
        }
        else
        {
            Page = pageIn;
        }
    }

    public void SetPage(int newPage)
    {
        if (newPage != 0)
            Page = newPage;

    }

} 
```

在我刚刚添加的控制器中：

```
private SearchModel GetSearch()
    {
       SearchModel search = (SearchModel)Session["CgRefCodeSearch"];
       if (search == null)
       {
          search = new SearchModel();
          search.Page = 1;
          search.OriginalSearchCriteria = "";
          Session["CgRefCodeSearch"] = search;
        }
        return search;
     } 
```

然后，在控制器中的每个功能上，我可以参考：

```
GetSearch().SetPage(page);
CurrentPage = GetSearch().Page etc... 
```

这是基于我在 Adam Freeman 的 Pro ASP.NET MVC 3 Framework 第三版中阅读的内容；史蒂文·桑德森。它真的很简单，但工作正常。

# python - 在特定偏移量的 python 列表中插入

> ID：13310670
> 
> 赞同：0
> 
> 时间：2012-11-09T15:15:04.440
> 
> 标签：python

我有一个像这样预初始化的 python 列表： eventarray=[None]*10000

有没有其他方法可以预初始化这个列表，这样 10000 可以是一个变量，可以从内部的不同函数中更改，而不会更改列表中的数据。

注意：预初始化是为了在列表的特定偏移量上插入值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:32:01.183

很难确切地说出你在问什么，所以这可能不是你想要的。如果不是，你应该澄清你的问题。

要创建`n`每个元素为 的元素列表`None`，您可以执行以下操作：

```
myList = [None]*n 
```

`n`必须在范围内才能执行此操作，并且将来的更改`n`不会影响列表长度。

如果要将值插入列表，并将其余值右移，可以使用[`list.insert(i,x)`](http://docs.python.org/2/tutorial/datastructures.html)：

```
myList = [None]*10000
myList.insert(5,0) 
```

这将`0`在索引 5 处插入 a，并将剩余的值（索引 5 和更高）移动到右侧。这导致一个列表的长度比插入之前的长度大一。如果您只想在列表中设置一个值：

```
myList = [None]*10000
myList[5] = 0 
```

这将产生一个包含 10,000 个元素的列表，其中第 6 个元素（索引为 5）为 0。初始列表和最终列表的长度将相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:33:40.247

从我可以从您的问题中推断出，您想要创建一个具有全局范围的列表，其长度在运行时确定。

编辑：以下代码现在在每次访问 my_list_creator 时根据需要扩展列表：

```
foo = []

def my_list_creator(n):
    '''Makes the nth value in a list n. If the list is not
    long enough, it extends it, initialised with None.
    '''
    global foo

    if len(foo) < n:
        foo.extend([None] * (n - len(foo)))

    foo[n-1] = n

def access_a_global():
    print foo

def another_func():
    my_list_creator(10)
    access_a_global()
    my_list_creator(20)        
    access_a_global()

another_func() 
```

`foo`在范围内是全局的，但根据需要进行初始化。

# c# - 构建 C#.Net 4.0 应用程序后的数据库路径错误

> ID：13310672
> 
> 赞同：0
> 
> 时间：2012-11-09T15:15:10.020
> 
> 标签：c#, .net, visual-studio, ms-access, .net-4.0

我正在使用**.Net 4.0**和**Access 数据库在****Visual Studio 2010中构建应用程序。**

 ****我已经指定了我的数据库的现有路径，即`D:/project/record.accdb`. 构建应用程序后，当我在自己的计算机上安装并运行它时，它给了我一个数据库路径错误。

我的应用程序在单击`F5`（调试）时工作正常，但它显示错误

> “找不到路径。”

我已经使用以下步骤构建了我的项目：

1.  建造
2.  构建“项目名称”
3.  使用 CD/DVD 进行安装
4.  结束

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:55:59.847

听起来，在您的 Dev PC 上它运行良好，但在您想要将其部署到的另一台机器上却没有。

检查您是否在另一台电脑（没有开发工具的电脑）上安装了 Microsoft Access。安装 Access 后重复测试。

* * *

**更新：** 您最近写信给我说该路径不起作用。尝试以下操作以创建有效的数据源字符串：

1.  在桌面上，创建一个新的空文本文档（右键单击，然后选择新建>文本文档）
2.  重命名该文档，使其具有扩展名`.UDL`，例如`Access.UDL`
3.  双击文件。*“数据链接属性”*打开。
4.  转到第一个选项卡（提供程序），选择*“Microsoft Office XX.X Access Database Engine OLE DB Provider”*（其中 XX.X 是您正在使用的 Office 版本）
5.  转到第二个选项卡（连接），在*“1。输入数据源和/或数据位置”中，*您指定 Access 数据库的完整路径，例如`C:\Documents and Settings\All Users\My Documents\Database1.accdb`
6.  单击“测试连接”按钮以确保连接成功。
7.  用“确定”关闭对话框。

如果您之后使用 NOTEPAD 打开 UDL 文件（在我们的示例 Access.UDL 中），您会看到正确的数据源字符串：

> [oldb]
> 
> ; 此行之后的所有内容都是 OLE DB 初始化字符串
> 
> Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Documents and Settings\All Users\My
> Documents\Database1.accdb;Persist Security Info=False

您可以直接在 C# 代码中使用此字符串，也可以将其存储在 app.config 文件中并加载。如果路径应该是动态的，您可以执行以下操作（以下示例使用硬编码的数据源字符串）：

```
var strDS=string.Format(
    "Data Source={0}\Database1.accdb;Persist Security Info=False", strPath); 
```

这会将存储在变量中的路径插入`strPath`到数据源字符串`strDS`中。如前所述，您还可以从 app.config 加载此字符串。****

# c# - 给定这个 lambda，我如何使用表达式树手动编写它？

> ID：13310674
> 
> 赞同：2
> 
> 时间：2012-11-09T15:15:11.877
> 
> 标签：c#, lambda, expression

```
class Program
{
    static void Main(string[] args)
    {
        Expression<Func<string[], Poco>> exp = a => new Poco { MyProperty1 = a[0], MyProperty2 = a[1], MyProperty3 = a[2] };
        var lambda = exp.Compile();

        var output = lambda(new[] {"one", "two", "three"});

        Console.WriteLine(output.MyProperty1);
    }
}

class Poco
{
    public string MyProperty1 { get; set; }
    public string MyProperty2 { get; set; }
    public string MyProperty3 { get; set; }
} 
```

我对调用 lambda 的部分不感兴趣，这只是为了完整性。我在试图导航表达式树时完全迷失了方向，这可能会教我如何钓鱼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:25:15.407

我现在没有时间翻译完整的树，但是您可以做的一件事是编译您的代码，然后使用 ildasm（或反射器等）查看编译器在做什么。你不能总是在你自己的代码中做同样的事情，但它让你对你想要的表达式有一个概念。特别是，在这种情况下，您需要：

*   [`Expression.Parameter`](http://msdn.microsoft.com/en-us/library/dd267996.aspx)创建参数 ( `a`)
*   [`Expression.New`](http://msdn.microsoft.com/en-us/library/bb351456.aspx)创建新实例
*   [`Expression.Bind`](http://msdn.microsoft.com/en-us/library/bb355922.aspx)创建属性分配
*   [`Expression.MemberInit`](http://msdn.microsoft.com/en-us/library/bb301790.aspx)分配新对象中的属性
*   [`Expression.ArrayIndex`](http://msdn.microsoft.com/en-us/library/bb352913.aspx)对于每个数组访问（`a[0]`等）
*   [`Expression.Constant`](http://msdn.microsoft.com/en-us/library/bb301591.aspx)对于数组索引本身 (0, 1, 2)
*   [`Expression.Lambda`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.lambda.aspx)`Expression<TDelegate>`为整个事物创造一个

如果以后有时间，我将尝试构建一个完整的工作示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:29:19.223

```
private static Expression<Func<string[], Poco>> CreateExpr()
{
    ParameterExpression paramExpr = Expression.Parameter(typeof(string[]), "a");
    var newExpr = Expression.New(typeof(Poco));

    var memberExprs = Enumerable.Range(0, 3)
        .Select(i =>
        {
            string propertyName = "MyProperty" + (i + 1);
            var property = typeof(Poco).GetProperty(propertyName);
            Expression.Bind(property, Expression.ArrayIndex(paramExpr, Expression.Constant(i)));
        });

    var expr = Expression.MemberInit(newExpr, memberExprs);
    return Expression.Lambda<Func<string[], Poco>>(expr, paramExpr);
} 
```

# ruby - 将格式作为参数传递给 rake spec

> ID：13310678
> 
> 赞同：29
> 
> 时间：2012-11-09T15:15:33.170
> 
> 标签：ruby, rspec, rake

我的问题与[此](https://stackoverflow.com/questions/2890521/how-to-pass-f-specdoc-option-through-rake-task)类似，他们想要覆盖`rake spec`的输出格式。该问题的解决方案是使用 .rspec 配置文件，这是有限制的。我希望这是一个命令行参数，因为我希望它在不同的机器上有所不同。

rspec 可执行文件具有`-f`定义格式的选项。`rake spec`已经`-f`定义了一个 rakefile。`rake spec --format`是无效的。这是疏忽`rake spec`吗？“格式”真的不是一个选项吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-21T19:15:16.680

回答：我在这里自我回答我的问题。rake spec 将采用 SPEC_OPTS 环境变量。

```
rake spec SPEC_OPTS="--format documentation" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T20:24:54.887

一种更清洁的方法`Rakefile`：

```
RSpec::Core::RakeTask.new(:spec) do |t|
  t.rspec_opts = '--format documentation'
end 
```

# ssh - 通过 ssh 复制所有 webalizer.hist 文件

> ID：13310679
> 
> 赞同：1
> 
> 时间：2012-11-09T15:15:33.147
> 
> 标签：ssh, whm

我在每个用户帐户中都有文件 webalizer.hist /home/*/tmp/webalizerftp/webalizer.hist * - 是用户名。

我需要将它们全部复制到另一个目录'/home/stats/'并以这种风格重命名它们 /home/some_username/tmp/webalizerftp/webalizer.hist -> /home/stats/some_username.hist /home/another_username/tmp /webalizerftp/webalizer.hist -> /home/stats/another_username.hist

我需要通过 SSH 来完成。

你能帮我吗？

# javascript - Onclick 不工作

> ID：13310680
> 
> 赞同：-1
> 
> 时间：2012-11-09T15:15:38.307
> 
> 标签：javascript, jquery, onclick

为什么这段代码不能作为 onclick 工作？

```
$('.mainz11').click (function() {
    $(this).animate({
        height: '280px'
    }, 800);
}, function() {
    $(this).animate({
        height: '100px'
    }, 800);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:32:28.057

如果您尝试先扩展元素然后收缩它，它可能应该是这样的：

```
$('.mainz11').click(function() {
    // determine target heights
    if ($(this).hasClass("expanded")) {
            var targetHeight = 100;
    } else {
        var targetHeight = 280;
    }

    // animate
    $(this).animate({
        height: targetHeight
    }, { 
        duration: 800,
        complete: function() { $(this).toggleClass("expanded"); }
    });
}); 
```

这可能需要进行一些清理，但它可以解决问题，您可以通过这种方式轻松跟踪扩展项目。见这里：http: [//jsfiddle.net/mpQek/3/](http://jsfiddle.net/mpQek/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:18:07.983

[click](http://api.jquery.com/click/)函数只需要一个函数，但您要向它传递 2 个函数。你可以这样尝试：

```
 $('.mainz11').click (function() {
    $(this).animate({
    height: '280px'
    }, 800);
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:22:33.387

如果要链接动画，请将下一个动画作为要在第一个动画完成时运行的函数：

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

```
 $('.mainz11').click (function() { 
  $(this).animate({ height: '280px', 800, 
    function() { $('.mainz11').animate({ height: '100px'}, 800)
  ); 
 }); 
```

# php - xpath循环到未知数量的节点

> ID：13310681
> 
> 赞同：0
> 
> 时间：2012-11-09T15:15:42.823
> 
> 标签：php, xpath, html-parsing

我有一个看起来像这样的 xpath：

```
$path = '//*[@id="page-content"]/table/tbody/tr[3]/td['.$i.']/div/a'; 
```

从`$i`1 到**X**的位置。我通常会使用：

```
for($i=1; $i<X;$i++){
  $path = '//*[@id="page-content"]/table/tbody/tr[3]/td['.$i.']/div/a';
  $nodelist = $xpath->query($path);
  $result = $nodelist->item(0)->nodeValue;
}; 
```

**但是，在这种情况下，我不知道X**是多少。有没有办法在不知道 X 的情况下循环遍历它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:25:49.010

为什么不只是堆叠它们？类似的东西（脆弱的代码，添加你的检查）：

```
// first xpath for the outer node-list
$tds = $xpath->query('//*[@id="page-content"]/table/tbody/tr[3]/td');
foreach ($tds as $td)
{
    // fetch the included values with a relative xpath to the current node
    $nodelist = $xpath->query('./div/a', $td);
    ...
} 
```

实际上，您甚至不需要那个内部节点列表，因为您最终想查询节点值。然而，我把它留在这里是为了展示你可以通过使用相对于具体节点的 xpath 直接做些什么。

* * *

因此，如果您需要ID 为*"page-content"的**任何*节点内*任何*表的*第三个内的**任何*内的*第一个* `<a>`元素，您可以直接编写它，这是一个查询： *`<div>` *`<tr>`**

 ***```
//*[@id="page-content"]/table/tbody/tr[3]/td/div/a[1] 
```

谓词（即括号）仅适用于路径中前缀为它的节点，因此`[1]`is only for`a`在末尾，因为is only `[3]`for the `tr`.

代码示例：

```
$as = $xpath->query('//*[@id="page-content"]/table/tbody/tr[3]/td/div/a[1]');
foreach ($as as $a) 
{
    echo $a->nodeValue, "\n";
} 
```

因此，这将为您提供单个节点列表的结果，您无需运行第二个 xpath 查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:27:01.197

如果我理解您的问题，您是在问如何循环直到`<td>`XPath 下的最大元素数？

您可以使用以下方法检索节点数：

`count(//*[@id="page-content"]/table/tbody/tr[3]/td)`并将其存储为临时变量，然后在下一条语句中使用它，如下所示：

```
for($i=1; $i<numberOfTdElements;$i++){
  $path = '//*[@id="page-content"]/table/tbody/tr[3]/td['.$i.']/div/a';
  $nodelist = $xpath->query($path);
  $result = $nodelist->item(0)->nodeValue;
}; 
```

针对hakre的建议：

```
$tbody = $doc->getElementsByTagName('tbody')->item(0);

// our query is relative to the tbody node
$query = 'count(tr[3]/td)';

$tdcount = $xpath->evaluate($query, $tbody);
echo "There are $tdcount elements under tr[3]\n"; 
```

然后将它们全部结合起来：

```
for($i=1; $i<$tdcount;$i++){
      $path = '//*[@id="page-content"]/table/tbody/tr[3]/td['.$i.']/div/a';
      $nodelist = $xpath->query($path);
      $result = $nodelist->item(0)->nodeValue;
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:33:18.003

I think what you are trying to do is fetch every `a` element that is a child of a `div`, which in its turn is a child of any `td` element that, in its turn, is a child of every *third* `tr` element, etc. If that is correct, you can simply fetch these with this query:

```
<?php 

$doc = new DOMDocument();
$doc->loadXML( $xml );
$xpath = new DOMXPath( $doc );
$nodes = $xpath->query( '//*[@id="page-content"]/table/tbody/tr[3]/td/div/a' );
foreach( $nodes as $node )
{
    echo $node->nodeValue . '<br>';
} 
```

Where `$xml` is a document, similar to this:

```
<?php

$xml = <<<XML
<?xml version="1.0" encoding="utf-8" ?>
<result>
    <div id="page-content">
        <table>
            <tbody>
                <tr>
                    <td>
                        <div><a>This one shouldn't be fetched</a></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div><a>This one shouldn't be fetched</a></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div><a>This one should be fetched</a></div>
                    </td>
                    <td>
                        <div><a>This one should be fetched</a></div>
                    </td>
                    <td>
                        <div><a>This one should be fetched</a></div>
                    </td>
                    <td>
                        <div><a>This one should be fetched</a></div>
                    </td>
                    <td>
                        <div><a>This one should be fetched</a></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div><a>This one shouldn't be fetched</a></div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</result>
XML; 
```

In other words, no need to loop trough all these `td` elements. You can fetch them all in one go, resulting in a `DOMNodeList` with all required nodes.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-19T10:46:13.537

```
$doc = new DOMDocument();

$doc->loadXML( $xml );

$xpath = new DOMXPath( $doc );

$nodes = $xpath->query( '/result/div[@id="page-content"]/table/tbody/tr[3]/td/div/a');

foreach( $nodes as $node )
{
    echo $node->nodeValue . '<br>';
} 
```***

# javascript - 获取 jQuery() 选择的默认(?) 元素

> ID：13310682
> 
> 赞同：1
> 
> 时间：2012-11-09T15:15:43.020
> 
> 标签：javascript, jquery

我确信有一个简单的解决方案。

开始的场景如下。我创建一个`<select>`元素并动态填充它：

```
function CreateDropDown(name, id, optionList)
{
    var combo = $("<select></select>").attr("id", id).attr("name", name);

    $.each(optionList, function (i, item) {
        combo.append("<option value='"+item.val+"'>" + item.el + "</option>");
    });

    return combo;
} 
```

目的是提取outerHTML。以下工作正常：

```
combo[0].outerHTML(); 
```

但我觉得索引数组非常粗糙。至少在 jQuery() 函数返回单个元素数组的所有情况下。

**问题**

每当 jQuery() 函数返回单个元素数组时，是否可以在**没有数组索引**的情况下获取唯一元素？

[**演示**](http://jsfiddle.net/TF8gJ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:34:21.390

jQuery objects are inherently collections of DOM objects, and there is no syntactic way to treat a jQuery object as wrapper around a single item.

jQuery documentation suggests using [get method](http://api.jquery.com/get/) to access individual DOM elements. It does not comment on performance difference between indexing operator and `.get()`, but it does say that "each jQuery object also masquerades as an array", so it would be ok to assume that indexing operator just adds another method call.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:46:24.180

如果您“觉得索引数组非常粗糙”，您可以编写自己的*好*帮手方法。像这样的东西：

```
window.$$ = function(){
   return jQuery.apply(jQuery,arguments)[0];
} 
```

*用法：*

```
var combo = $$("<select></select>");
console.log( combo.outerHTML ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:34:20.030

Use `.get()` to get the html elements.

[http://api.jquery.com/get/](http://api.jquery.com/get/)

# ios - 如何使用opencv查找多边形并显示为透明

> ID：13310684
> 
> 赞同：0
> 
> 时间：2012-11-09T15:15:57.537
> 
> 标签：ios, opencv, uiimageview, transparency, blob

我有两个 UIImageViews。第一个在背景中并包含图像。第二个是在前景中，它被使用以便用户可以追踪他在背景中看到的一部分。

在用户跟踪该区域后，我希望程序能够用我选择的稍微透明的颜色填充该多边形，以便您可以看到多边形下方的图像。

到目前为止，我已经完成的是显示图像并让用户进行跟踪的能力。我可以使用填充将多边形填充为黑色，但外面的区域是白色的，而不是透明的。这是我所做的：

```
cv::Mat input = [traceImageView.image CVMat];
cv::Mat output, finalOutput, mask;
cv::Rect rect;

cv::cvtColor(input, output, cv::COLOR_RGB2GRAY);
cv::floodFill(output, cv::Point(0, 0), cv::Scalar(255,0,0,0), &rect, cv::Scalar(0,0,0), cv::Scalar(0,0,0));

traceImageView.image = [UIImage imageWithCVMat:output]; 
```

这是输出的样子：

[![输出](../Images/ae069cabd56dbfde073a8bc4d8ae9e71.png)](https://i.stack.imgur.com/iugxT.png)
[（来源：[mulvaandgipple.com](http://www.mulvaandgipple.com/blob.png)）]

结果是前面的图像完全覆盖了它后面的图像。我希望多边形外部的白色是透明的。关于如何做到这一点的任何想法？

# java - sql中的计数函数

> ID：13310685
> 
> 赞同：0
> 
> 时间：2012-11-09T15:16:02.520
> 
> 标签：java, sql

```
account_id current_balance opening_date
1 100 2012-03-01
2 100 2012-4-01
3 100 2013-03-1

```

现在当我在 sql work bench 中运行查询时很好

```
select count(acc.account_id) 
from daily_account acc 
where acc.opening_date < '2013-03-01' 
```

但是当我在 NetBeans 中运行它时，它没有给出正确的输出。

```
select count(acc.account_id) 
from daily_account acc 
where acc.opening_date < '"+ new Date((Integer.parseInt(FromYearComboBox.getSelectedItem().toString())-1900),FromMonthComboBox.getSelectedIndex(),Integer.parseInt(FromDateComboBox.getSelectedItem().toString()))).toString() 
```

谁能帮助我为什么会这样？

编辑 ：

```
rs = st.executeQuery("select count(acc.account_id) from daily_account
acc where  acc.opening_date < '"+ new
Date((Integer.parseInt(FromYearComboBox.getSelectedItem().toString())-1900),FromMonthComboBox.getSelectedIndex(),(Integer.parseInt(FromDateComboBox.getSelectedItem().toString()))).toString()+"';");

rs.next();

tabledata[0][2]=rs.getString(1); 
```

> 编辑::它给了我错误的答案......它正在计算所有的帐户ID......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:22:39.063

最后，您似乎有一个额外的右大括号`)`，即`toString())))`. 它应该少一个，例如

> select count(acc.account_id) from daily_account acc where acc.opening_date < '"+ new Date((Integer.parseInt(FromYearComboBox.getSelectedItem().toString())-1900),FromMonthComboBox.getSelectedIndex(),Integer.parseInt( FromDateComboBox.getSelectedItem().toString())).toString()+"'";

**注意**这确实使您的查询字符串难以维护。尝试事先构造日期字符串，然后附加到查询中。

**另一个注意事项：** `Date`不推荐使用带参数的构造函数，而且您似乎真的不需要日期而是字符串。在那种情况下，你为什么不写一些简单的东西：

```
 String dateStr = 
      String.valueOf(Integer.parseInt(
                              FromYearComboBox.getSelectedItem().toString())-1900)
  + FromMonthComboBox.getSelectedIndex()
  +FromDateComboBox.getSelectedItem().toString();

String queryStr = "select count(acc.account_id) from daily_account acc "+
                  " where acc.opening_date < '"+ dateStr +"'"; 
```

# eclipse - 在 Eclipse 中设置内存断点

> ID：13310693
> 
> 赞同：15
> 
> 时间：2012-11-09T15:16:33.187
> 
> 标签：eclipse, memory, conditional-breakpoint

如何在 Eclipse 中设置内存断点？也就是说，我想设置一个条件断点，当给定内存位置的数据发生变化时触发。

这个问题以前曾被[问过](https://stackoverflow.com/questions/9814476/how-to-set-memory-breakpoint-in-eclipse)，但[唯一提供的答案](http://www.linuxtopia.org/online_books/eclipse_documentation/eclipse_c_c++_guide/topic/org.eclipse.cdt.doc.user/tasks/eclipse_c_c++_guide_cdt_t_add_watch.htm)并没有*解决这个问题，并且与*[Eclipse 在线帮助](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/expressions/ref-addwatch.htm)中的信息基本相同。

我正在寻找的是更详细的信息（或者一个例子会很好），用于在 Eclipse 中设置条件断点，该断点将在特定内存地址的数据发生变化时触发。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T15:27:57.240

您需要使用[观察点](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.cdt.doc.user/tasks/cdt_t_add_watch.htm)。从页面：

1.  在编辑器中突出显示变量，或在大纲视图中选择它。
2.  单击**运行 > 切换观察点**。
3.  执行以下任一操作：
    *   要在读取监视表达式时停止执行，请选中**读取**复选框。
    *   要在写入监视表达式时停止执行，请选中**写入**复选框。
4.  观察点出现在**断点**视图列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-01T08:16:34.780

有效的解决方案：

```
 1/ Select the variable representing the pointer you want to break on in a given context in the "Variables" tab
 2/ Right click, then select "Add Watchpoint (C/C++)
 3/ In the field "Expression to watch", just replace the name of the variable by the memory address to break on. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-09T18:52:49.303

在 Eclipse Oxygen 中使用观察点：

1.  在表达式视图（窗口 > 显示视图 > 表达式）中，添加一个表达式，例如： `*(uint8_t*)0x231cc528`。演员表告诉 Eclipse 内存位置大小。
2.  右键单击添加的表达式并选择“添加观察点”。
3.  生成的观察点可以在“断点”视图中进行编辑和控制。
4.  It may be important to edit the Watchpoint. If you want to e.g. detect changes done by other threads: right-click the Watchpoint in the "Breakpoints" view, select Breakpoint Properties... > Filter, UN-check "Restrict to Selected Processes and Threads"

# python - Python - 从动态 attrname 列表中创建 __init__ 属性

> ID：13310696
> 
> 赞同：1
> 
> 时间：2012-11-09T15:16:35.247
> 
> 标签：python, plugins, properties, constructor

我正在为一些天文馆软件编写 Python 插件。这个插件带有访问天文馆软件命名空间内对象的功能，但它们很麻烦，而且不是面向对象的。因此，我试图创建一个类来重载属性访问以简化编码。我希望能够做一些事情，例如，

```
rocket = RemoteObject('rocket')
rocket.color = blue 
```

将天文馆软件命名空间中火箭物体的颜色设置为蓝色。

[如何定义属性`__init__`](https://stackoverflow.com/questions/1454984/how-to-define-properties-in-init)非常接近。我遇到的一个困难是我需要在创建实例时确定我的属性的名称。另一个困难是由于我对描述符的一般理解不足：属性调用正在返回或覆盖我的属性对象本身，而不是调用它的 getter 和 setter。

这是我到目前为止所拥有的：

```
class RemoteObject(object):
    def __init__(self,remote_object_name):
        self.normalattr = 'foo'
        self.normalmethod = lambda: 'spam'
        for attrname in get_remote_object_attrnames(remote_object_name):
            def _get(self):
                return fetch_remote_attr_value(remote_object_name,attrname)
            def _set(self,value):
                set_remote_attr_value(remote_object_name,attrname,value)
            setattr(self,attrname,property(_get,_set))

if __name__ == '__main__':
    get_remote_object_attrnames = lambda name: {'apple','banana','cherry'}
    fetch_remote_attr_value = lambda o,a: 'Reading %s.%s' % (o,a)
    set_remote_attr_value = lambda o,a,v: 'Writing %s.%s = %s' % (o,a,v)

    scene = RemoteObject('scene')
    for x in scene.__dict__.items(): print x
    print '-----'
    print scene.normalattr
    print scene.normalmethod()
    print scene.apple
    scene.banana = '42'
    print '-----'
    for x in scene.__dict__.items(): print x 
```

运行时，它返回：

```
('cherry', <property object at 0x00CB65A0>)
('normalmethod', <function <lambda> at 0x00CB8FB0>)
('banana', <property object at 0x00CB65D0>)
('normalattr', 'foo')
('apple', <property object at 0x00CB6600>)
-----
foo
spam
<property object at 0x00CB6600>
-----
('cherry', <property object at 0x00CB65A0>)
('normalmethod', <function <lambda> at 0x00CB8FB0>)
('banana', '42')
('normalattr', 'foo')
('apple', <property object at 0x00CB6600>) 
```

有没有更好的方法来处理需要每个实例的属性的动态属性名称集？为什么与属性名称匹配的实例属性返回属性对象本身，而不是执行其 getter 或 setter？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:20:50.090

您不能在实例上定义属性；对象是描述符，只有类支持`property`描述符`__get__`和挂钩。`__set__`

您必须在类上定义所有这些属性并*禁用*`AttributeError`它们（可能从禁用的属性中抛出），或者使用`__getattr__`and`__setattr__`代替。

“全部定义”方法：

```
class Foo(object):
    __enabled_properties = ()

    def __init__(self):
        self.__enabled_properties = ('bar',)

    @property
    def bar(self):
        if 'bar' not in self.__enabled_properties:
            raise AttributeError('bar')
        ...

    @bar.setter
    def bar(self, value):
        if 'bar' not in self.__enabled_properties:
            raise AttributeError('bar')
        ... 
```

和`__getattr__`方法`__setattr__`：

```
class Foo(object):
    __enabled_properties = ()
    __dynamic_properties = ('bar', 'spam', 'eggs')

    def __init__(self):
        self.__enabled_properties = ('bar',)

    def __getattr__(self, attr):
        if attr in self.__dynamic_properties:
            if attr not in self.__enabled_properties:
                raise AttributeError(attr)
            # Fetch a remote value here and return it
        if attr not in self.__dict__:
            raise AttributeError(attr)
        return self.__dict__[attr]

    def __setattr__(self, attr, value):
        if attr in self.__dynamic_properties:
            if attr not in self.__enabled_properties:
                raise AttributeError(attr)
            # Set a remote value here
        self.__dict__[attr] = value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:23:25.757

您可能会更轻松地使用`namedtuple`. 这是另一个具有类似答案的问题：[如何动态地将属性添加到类中？](https://stackoverflow.com/questions/1325673/python-how-to-add-property-to-a-class-dynamically)

# c# - 使用 WebMatrix (C#) 和/或 JavaScript/jQuery 输入类型“文件”的图片预览适用于所有版本的 IE（8 及更高版本）

> ID：13310699
> 
> 赞同：0
> 
> 时间：2012-11-09T15:17:00.023
> 
> 标签：c#, javascript, jquery, image, webmatrix

如何让图片预览与 IE 8 及更高版本一起使用？

我可以使用 JavaScript/jQuery 从输入类型“文件”中获取二进制图像数据吗？

如果我可以将数据（以正确的格式）返回到服务器，我应该能够在那里使用它，然后用 AJAX 返回它（尽管我绝对不是 AJAX 专家）。

根据我所做的研究，没有办法仅使用 javascript 在所有 IE 版本中获取图片预览（这是因为获取完整文件路径被他们视为潜在的安全风险）。我可以要求我的用户将网站添加到受信任的网站，但您通常不会要求用户篡改那些低级设置（更不用说让您的网站在用户看来可疑的最快方法是询问他们直接将您的网站添加到受信任的网站列表中。这就像发送电子邮件并要求输入密码。“相信我！我很安全！”:)

我在除 IE 之外的所有内容中都有图片预览，并且使用条件注释将 IE 特定的执行方式与我在其他浏览器中执行的方式分开没有问题。换句话说，答案甚至不必是跨浏览器，只需跨 IE（8 和 9）。我知道我以前（不知何故）见过 IE 网站使用图片预览，所以我知道必须至少有一种方法可以做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:16:55.260

So if you need to support IE lower than 10 you could upload the file to the server using some of the existing AJAX upload components (Uploadify, Plupload, Valums AJAX Upload, Bleuimp, ...), generate and store a thumbnail on the server and send the url to the saved image to the client using JSON so that it could display it using an tag. Actually since IE supports Data URI Scheme you don't need to store the uploaded file to the server in order to generate the preview. You could directly return the resulting thumbnail image from your Preview controller action formatted as Data URI Scheme so that you could show it on the client.

Another solution if you don't have the time and resources to implement this functionality is to simply tell your users that if they want to get a realtime preview of the image that they should consider using a different web browser because your site doesn't support IE for this.

# css - 在 CSS 中链接一半图像

> ID：13310701
> 
> 赞同：3
> 
> 时间：2012-11-09T15:17:14.620
> 
> 标签：css, hyperlink, image

我有一个标志的图像，它下面有一个标语。我希望徽标作为主页的超链接，但我希望它只能从实际徽标中点击，而不是它下面的标语。但我无法做到这一点，因为标志和口号是一个图像的一部分。

除了有两个单独的图像之外，还有其他方法吗？

HTML：

```
<a href="http://www.dalewoods.com" id="logo_link">
    <img src="images/logo.png" alt="Dale Woods" class="logo"/></a> 
```

CSS：

```
img.logo {
margin-top: 20px; 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T15:20:37.417

您可以使用[`<map>`](https://developer.mozilla.org/en-US/docs/HTML/Element/map)和[`<area>`](https://developer.mozilla.org/en-US/docs/HTML/Element/area)在图像上创建图像映射。然后该区域可用于仅链接图像的一部分。

这是一个简单的示例，您可以对其进行修改以满足您的需求：

```
<map name="a">
  <area shape="rect" coords="25,25,75,75" href="http://www.dalewoods.com">
</map>
<img src="images/logo.png" alt="Dale Woods" class="logo" usemap="#a" /> 
```

在这个例子中，只有被矩形区域覆盖的标志部分会被链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:24:34.427

就在这里。:)

```
<div id="logo">
  <a href="http://www.dalewoods.com" id="logo_link">Dale Woods</a>
</div> 
```

和 CSS：

```
#logo {
  width:200px;height:200px;position:relative;
  background:url(images/logo.png) no-repeat;overflow:hidden;
}
#logo_link {
  display:block;position:absolute;top:0;left:0;
  width:200px;height:150px;text-indent:-2000px;
} 
```

必须更改位置和尺寸，但从结构上讲，这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:35:41.497

这是一个例子：[http ://codepen.io/anon/pen/Kedrc](http://codepen.io/anon/pen/KEdrc)

HTML：

```
<div class="logo">
  <a href="#"></a>
  <img src="image.png" alt="Logo">
</div> 
```

CSS：

```
.logo { 
  display: inline-block;
  position: relative;
}

a { 
  position: absolute;
  left: 0; top: 0;
  height: 50%; width: 100%;
}

img { display: block; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T15:26:53.643

我试图在这里解释如何做到这一点..检查小提琴，你可以了解如何做到这一点......

[例子](http://jsfiddle.net/Sriganesh/5Kd3c/3/)

```
<img src="example.gif" width="145" height="126" alt="Example" usemap="#Example">

<map name="Example">
  <area shape="rect" coords="0,0,82,126" alt="Firsthalf" href="#">
</map> 
```

​</p>

这里认为图像和前半部分是可点击的，第二部分是不可点击的。尝试这样做或在小提琴中提供您的图像..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-08T14:51:55.457

拥有一个 286x176 像素的图像，这就是我实现它的方式，左半部分是指向 Android 的链接，右半部分是指向 Apple 的链接：

```
<map name="logos">
    <area shape="rect" coords="0,0,143,176" href="http://www.android.com" title="Link to Android" alt="Link to Android">
    <area shape="rect" coords="143,0,286,176" href="http://www.ios.com" title="Link to Apple" alt="Link to Apple">
</map>
<img src="myimage.png" usemap="#logos"> 
```

# python - 测试我已连接到 Django 中的特定信号

> ID：13310702
> 
> 赞同：7
> 
> 时间：2012-11-09T15:17:14.933
> 
> 标签：python, django, testing

我有一个名为“publisher”的 Django 应用程序，它连接到我的 django 项目中的各种信号，当它接收到它们时，它会向 rabbitmq 队列发送一条消息。我想要做的是能够测试我的设置代码是否连接到正确的信号。

我的应用程序结构如下所示：

```
publisher
    - __init__.py
    - signals.py
    - tests.py 
```

我的 __init__.py 看起来像：

```
import signals 
```

和我的信号.py：

```
def receiver_function(*args, **kwargs):
    #Does rabbitmq stuff

my_interesting_signal.connect(receiver_function) 
```

我考虑过修补接收器函数，并检查在我发送信号时是否调用了模拟：

测试.py：

```
class SignalsTeste(TestCase):

    def_test_connection(self):

        with patch('publisher.signals.receiver_function') as receiver_mock:
            my_interesting_signal.application_created.send(None)
            self.assertEquals(receiver_mock.call_count, 1) 
```

但是由于导入了信号模块，因此在运行测试之前进行了信号连接，因此这种方法不起作用，因为连接是在功能修补之前进行的......

任何人都可以提出替代策略吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-09T19:06:59.690

我遇到了你描述的同样的嘲笑问题。我的解决方案是进入 Django 的信号注册表并断言我的函数已使用正确的信号注册。

这是我的测试：

```
def test_signal_registry(self):
    from foo.models import bar_func  # The function I want to register.
    from django.db.models import signals
    registered_functions = [r[1]() for r in signals.pre_delete.receivers]
    self.assertIn(bar_func, registered_functions) 
```

关于该列表理解的一点解释：

“pre_delete”是我在这种情况下关心的 django.dispatch.dispatcher.Signal 的实例。您将在示例中使用自己的“my_interesting_signal”。信号有一个称为“接收器”的内部属性，它是一个双元组列表，其中第二个元素是您注册的函数的弱引用（因此 r[1]）。调用弱引用会返回所指对象。

我不得不和weakrefs一起玩来弄清楚这么多：

```
import weakref
def foo():
    pass
w = weakref.ref(foo)
w() == foo 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-15T13:10:03.690

测试信号是否已连接的一种方法是断开它并检查此操作的结果。如果信号断开或没有断开，则调用`<some_signal>.disconnect(...)`返回。`True``False`

例如，我们要测试`post_save`信号是否连接到我们的`receiver_function`.

模块.py

```
def receiver_function(*args, **kwargs):
    pass

signals.post_save.connect(receiver_function) 
```

测试.py

```
class SignalsTest(TestCase):
    def test_connection(self):
        result = signals.post_save.disconnect(receiver_function)

        self.assertTrue(result) 
```

调用必须使用与call( , )`disconnect`相同的参数`connect``sender``dispatch_uid`

*测试后需要重新连接信号，否则会一直断开*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-03T13:20:40.413

这很棘手，因为正如您所说，如果您从包含接收器的文件中模拟或导入任何内容，您会自动连接它。这是在*整个测试套件*中，而不仅仅是在有问题的测试文件中。这是您可以使用的片段，但您需要遵守有关避免在接收器文件中导入的评论。

```
from django.test import TestCase

class ReceiverConnectionTestCase(TestCase):
    """TestCase that allows asserting that a given receiver is connected
    to a signal.

    Important: this will work correctly providing you:
        1\. Do not import or patch anything in the module containing the receiver
           in any django.test.TestCase.
        2\. Do not import (except in the context of a method) the module
           containing the receiver in any test module.

    This is because as soon as you import/patch, the receiver will be connected
    by your test and will be connected for the entire test suite run.

    If you want to test the behaviour of the receiver, you may do this
    providing it is a unittest.TestCase, and there is no import from the
    receiver module in that test module.

    Usage:

        # myapp/receivers.py
        from django.dispatch import receiver
        from apples.signals import apple_eaten
        from apples.models import Apple

        @receiver(apple_eaten, sender=Apple)
        def my_receiver(sender, **kwargs):
            pass

        # tests/integration_tests.py
        from apples.signals import apple_eaten
        from apples.models import Apple

        class TestMyReceiverConnection(ReceiverConnectionTestCase):
            def test_connection(self):
                self.assert_receiver_is_connected(
                    'myapp.receivers.my_receiver',
                    signal=apple_eaten, sender=Apple)

    """
    def assert_receiver_is_connected(self, receiver_string, signal, sender):
        receivers = signal._live_receivers(sender)
        receiver_strings = [
            "{}.{}".format(r.__module__, r.__name__) for r in receivers]
        if receiver_string not in receiver_strings:
            raise AssertionError(
                '{} is not connected to signal.'.format(receiver_string)) 
```

这是因为 Django`django.test.TestCase`在`unittest.TestCase`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-25T00:50:04.990

我还面临验证所有必需信号是否已连接的问题。感谢您的所有评论。结果，有可用的[SignalConnectionTestCase](https://github.com/zakamarek/django-test-signals)基于自省（正如@frank-t 提出的那样），对于内置信号，初始问题的解决方案可以如下完成：

```
class SignalsTest(SignalConnectionTestCase):
    expected_post_save = ['publisher.signals.receiver_function'] 
```

对于自己的信号，您可以[`verify`](https://github.com/zakamarek/django-test-signals/blob/850eee692de8f5ef7aa85c3ef8d098d60871881a/django_test_signals/signalconnectiontestcase.py#L46)在测试方法中调用函数。

# c# - 实体框架 - 使其只读？

> ID：13310704
> 
> 赞同：2
> 
> 时间：2012-11-09T15:17:18.093
> 
> 标签：c#, entity-framework

> **可能重复：**
> [如何使实体框架数据上下文只读](https://stackoverflow.com/questions/10437058/how-to-make-entity-framework-data-context-readonly)

是否有使实体“只读”的配置设置或简单方法我有一个数据访问层，它与作为 CRM 解决方案后端的数据库相对。我们不想（意外或故意）写入 CRM UI 之外的数据库，但我们确实想通过几个自定义应用程序读取数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T16:24:23.610

对于您的自定义应用程序，将连接字符串指向仅具有只读访问权限的数据库用户。如果他们随后尝试写入数据库，您将收到错误消息。

[http://www.joellipman.com/articles/microsoft/sql-server/454-create-read-only-database-user-in-sql-server.html](http://www.joellipman.com/articles/microsoft/sql-server/454-create-read-only-database-user-in-sql-server.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:26:04.563

我选择覆盖 SaveChanges 并暂时抛出异常。

再三考虑和一些好的反馈后，我不会这样做。

# c# - 手势 CTRL+C 和 CTRL+V 的 KeyBinding 不起作用？

> ID：13310705
> 
> 赞同：2
> 
> 时间：2012-11-09T15:17:21.550
> 
> 标签：c#, wpf, xaml, key-bindings

我的视图模型中有一些 ICommand，我想使用键盘绑定将它们绑定到我的用户控件。我面临的问题是，当我使用`CTRL`+`C`和 `CTRL`+`V`在我的 UserControl 中绑定我的复制和粘贴命令时，它们不会被触发。我应该覆盖它们还是什么？

```
<UserControl.InputBindings>
    <KeyBinding Gesture="CTRL+C" Command="{Binding CopyCommand}" />
</UserControl.InputBindings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-11-03T14:08:48.997

这对我来说就像一个魅力：

```
<!--COPY-->
<UserControl.InputBindings>
    <KeyBinding Key="C" Modifiers="Ctrl" Command="{Binding CopyToStackCommand}" />
</UserControl.InputBindings>

<!--PASTE-->
<UserControl.InputBindings>
    <KeyBinding Key="V" Modifiers="Ctrl" Command="{Binding PasteFromStackCommand}" />
</UserControl.InputBindings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-17T02:17:55.293

```
<KeyBinding Key="C" Modifiers="Ctrl" Command="Copy" CommandParameter="{Binding copy}" /> 
```

# java - 了解 Swing 和 repaint()

> ID：13310707
> 
> 赞同：3
> 
> 时间：2012-11-09T15:17:27.343
> 
> 标签：java, swing, repaint, paintcomponent

我试图了解如何使用 Swing 进行绘画。为此，我一直在阅读 Oracle 教程：[http ://docs.oracle.com/javase/tutorial/uiswing/painting/step3.html](http://docs.oracle.com/javase/tutorial/uiswing/painting/step3.html)

我的问题很简单：为什么对同一函数（重绘）的两次调用具有不同的行为？UI Delegate 是如何在之前绘制的矩形上绘制背景，但在新区域上绘制一个新矩形？我在paintComponent() 上没有看到任何特殊原因。

我还阅读了[http://docs.oracle.com/javase/tutorial/uiswing/painting/closer.html](http://docs.oracle.com/javase/tutorial/uiswing/painting/closer.html)试图了解情况。似乎与组件的 opaque 属性有某种联系。在我们创建一个新的矩形后这个属性是否会改变，所以它是真的（因此，如前所述，ui.update() 会将它设置为背景颜色）。为什么paintComponent() 没有在那里绘制一个新的矩形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:29:52.457

该函数使用不同的参数调用：

```
repaint(squareX,squareY,squareW+OFFSET,squareH+OFFSET);
squareX=x;
squareY=y;
repaint(squareX,squareY,squareW+OFFSET,squareH+OFFSET); 
```

在第一次调用 repaint() 时，squareX 和 squareY 指示先前绘制的对象的位置。在第二次调用中，squareX 和 squareY 更改为当前鼠标位置。

来自关于 repaint() 的[JComponent API 文档：](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)

> 如果组件正在显示，则将指定区域添加到脏区域列表。在所有当前挂起的事件都被调度后，组件将被重新绘制。

也就是说，第一次调用 repaint() 将先前的位置标记为脏，第二次调用将当前位置标记为脏。当事件（moveSquare）完成后，paintComponent 被重新执行，这两个区域被更新。红色矩形只放置在新位置，旧位置更新为“空”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:58:46.127

您对[opaque 属性](http://www.oracle.com/technetwork/java/painting-140037.html#props)是正确的，它`true`适用于典型`PanelUI`实现。特别是，[`paintComponent()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)说，

> 如果您不调用 super 的实现，则必须遵守 opaque 属性...如果您不遵守 opaque 属性，您可能会看到视觉伪影。

您的代码*确实*通过调用`super.paintComponent(g)`. *这两个*调用都`repaint()`将绘图矩形清除为背景颜色。尝试在构造函数中设置不同的背景颜色`MyPanel`并省略`super`调用以查看效果：

```
public MyPanel() {

    setBorder(BorderFactory.createLineBorder(Color.black));
    setBackground(Color.cyan);
    ...
}

@Override
protected void paintComponent(Graphics g) {
    //super.paintComponent(g);
    g.drawString("This is my custom Panel!", 10, 20);
    ...
} 
```

# mysql - 独角兽在不考虑池大小的情况下吃掉 MySQL 连接 - Rails

> ID：13310714
> 
> 赞同：2
> 
> 时间：2012-11-09T15:17:58.487
> 
> 标签：mysql, ruby-on-rails, unicorn

我为我的 Rails 应用程序运行了 4 个 Unicorn 进程，它们耗尽了所有可用的 MySQL 连接，导致它因“连接太多”错误而崩溃。今天我不得不重启我的数据库实例 4 次。=(

流程

```
$ ps斧头| grep [u]ni
21618 ? sl 0:15 unicorn master -D -c /home/deployer/apps/XXX/shared/config/unicorn.rb -E production                                                           
21632 ? Sl 0:20 unicorn worker[0] -D -c /home/deployer/apps/XXX/shared/config/unicorn.rb -E production                                                        
21636 ? Sl 0:14 独角兽工人[1] -D -c /home/deployer/apps/XXX/shared/config/unicorn.rb -E production                                                        
21640 ? Sl 0:20 独角兽工人[2] -D -c /home/deployer/apps/XXX/shared/config/unicorn.rb -E production                                                        
21645 ? Sl 0:12 独角兽工人[3] -D -c /home/deployer/apps/XXX/shared/config/unicorn.rb -E production  

```

我的**database.yml**正在为 ActiveRecord 池设置 22 个连接...

```
...
生产：
  适配器：mysql2
  编码：utf8
  数据库：xxx
  用户名：xxx
  密码：xxx
  主持人：xxx
  端口：3306
  游泳池：22
...

```

**Unicorn 配置**文件如下所示：

```
工作目录“/home/deployer/apps/XXX/current”
pid "/home/deployer/apps/XXX/shared/pids/unicorn.pid"
stderr_path "/home/deployer/apps/XXX/shared/log/unicorn.log"
stdout_path "/home/deployer/apps/XXX/shared/log/unicorn.log"

听“/tmp/unicorn.XXX.sock”
worker_processes 4
超时 100

preload_app 真

before_fork 做 |服务器，工人|
  # 断开连接，因为数据库连接不会继续
  如果定义？活动记录::基础
    ActiveRecord::Base.connection.disconnect！
  结尾

  # 退出旧的独角兽进程
  old_pid = "#{server.config[:pid]}.oldbin"
  如果 File.exists?(old_pid) && server.pid != old_pid
    开始
      Process.kill("QUIT", File.read(old_pid).to_i)
    拯救 Errno::ENOENT, Errno::ESRCH
      # 其他人为我们完成了我们的工作
    结尾
  结尾
结尾

after_fork 做 |服务器，工人|
  # 在worker中再次启动数据库连接
  如果定义了？（ActiveRecord::Base）
    ActiveRecord::Base.establish_connection
  结尾
  child_pid = server.config[:pid].sub(".pid", ".#{worker.nr}.pid")
  system("echo #{Process.pid} > #{child_pid}")
结尾

```

如果我们查看 DB 控制台，我们会看到类似这样的内容。他们已经吃掉了大部分的联系。（我现在只有独角兽在运行）在我看来应该有 1 个连接 * 4 个独角兽 = 4 个连接。

```
mysql> 显示完整的进程列表；
+-----+----------+-------------------------------- ------------------+------------------------+------ ---+--------+-------+------------------------+
| 身份证 | 用户 | 主持人 | 分贝 | 命令 | 时间 | 状态 | 信息 |
+-----+----------+-------------------------------- ------------------+------------------------+------ ---+--------+-------+------------------------+
| 2 | rdsadmin | 本地主机：31383 | 空 | 睡眠 | 9 | | 空 |
| 52 | 水平 | 212.100.140.42:50683 | leveltravel_production | 查询 | 0 | 空 | 显示完整的进程列表 |
| 74 | 水平 | ip-10-55-10-151.eu-west-1.compute.internal:38197 | leveltravel_production | 睡眠 | 5 | | 空 |
| 75 | 水平 | ip-10-55-10-151.eu-west-1.compute.internal:38199 | leveltravel_production | 睡眠 | 8 | | 空 |
| 76 | 水平 | ip-10-55-10-151.eu-west-1.compute.internal:38201 | leveltravel_production | 睡眠 | 8 | | 空 |

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～

| 157 | 水平 | ip-10-55-10-151.eu-west-1.compute.internal:38321 | leveltravel_production | 睡眠 | 154 | | 空 |
| 158 | 水平 | ip-10-55-10-151.eu-west-1.compute.internal:38322 | leveltravel_production | 睡眠 | 17 | | 空 |
| 159 | 水平 | ip-10-55-10-151.eu-west-1.compute.internal:38325 | leveltravel_production | 睡眠 | 54 | | 空 |
| 160 | 水平 | ip-10-55-10-151.eu-west-1.compute.internal:38326 | leveltravel_production | 睡眠 | 54 | | 空 |
| 161 | 水平 | ip-10-55-10-151.eu-west-1.compute.internal:38327 | leveltravel_production | 睡眠 | 54 | | 空 |
| 162 | 水平 | ip-10-55-10-151.eu-west-1.compute.internal:38329 | leveltravel_production | 睡眠 | 42 | | 空 |
+-----+----------+-------------------------------- ------------------+------------------------+------ ---+--------+-------+------------------------+
一组 90 行（0.15 秒）

```

您还可以查看 sidekiq 存储库中的 Issue #503，了解此问题的背景[https://github.com/mperham/sidekiq/issues/503](https://github.com/mperham/sidekiq/issues/503)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T20:05:00.767

您已经运行了 4 个独角兽进程。这是过程，而不是线程。
每个进程在池中有 22 个连接。他们总共有 22*4 = 88 个连接。
如果您想为 4 个工作进程提供 4 个连接，您可以在 database.yml 中设置 pool: 1

# java - 内存泄漏，当我将数据从一个 treeStore 复制到另一个 ext js 4.1

> ID：13310715
> 
> 赞同：2
> 
> 时间：2012-11-09T15:17:57.430
> 
> 标签：java, jsp, servlets, extjs

我有两个 extjs treeStore，一个是 temp，另一个是工作 treeStore，其数据由 treePanel 解释。代码：

```
var treeStore = Ext.create('Ext.data.TreeStore',{
root: {
childrens:[],
expanded: true,
text: 'Services'
}
 });
  var tempStore = Ext.create('Ext.data.TreeStore',{
    autoload: false,
    proxy:{
        type: 'ajax',
        url: 'server.jsp',
      reader: {
          type:'json'
      }
    },
    clearOnLoad: true,
  listeners:{
    load:{
        fn: afterload
    }
    }   
  });
  tempStore.load();

  function afterload(store)
  {
 var rootTree = treeStore.getRootNode();
 var copyChilds = Ext.clone(store.getRootNode().childNodes);
 if(rootTree.hasChildNodes())
 {
 rootTree.removeAll(false);
 }
 for(var i=0;i<copyChilds.length;i++)
 {
 rootTree.appendChild(copyChilds[i]);
 }
} 
```

当调用 tempStore.load 方法时，我将在服务器上发送查询，获取数据，然后将其放在另一个 treeStore.p> tempStore 使用 TaskRunner 每 3 秒重新加载一次：

```
var taskTree = {
        run: reloadTree,
    interval:3000 // 1 second
       }
 var runReloadTreePanel = Ext.create("Ext.util.TaskRunner"); 
```

我有复选框，当我将它的状态更改为 true 时，跑步者开始工作：

```
var checkbox = Ext.create('Ext.form.field.Checkbox',{
       boxLabel: 'Refresh',
       listeners :{
           change: {
                fn: changeCheckBoxState
            }
        }
});
    function changeCheckBoxState(field,newValue,oldValue) 
         {
      if(newValue)
    {
            runReloadTreePanel.start(taskTree);
    }
      else
    {
    runReloadTreePanel.stop(taskTree);
    }
         } 
```

**问题**：

由于方法后加载内容，即复制数据，在启动 2-3 分钟后内存开始增长（每 10 秒 3-4MB）。是错误还是我做错了什么？也许函数 removeAll(false) 没有删除 treeStore 根节点的所有子数据？我使用了很多变体——使用 Ext.select(..) + innerHtml 清理 dom 模型元素，尝试使用 remove(..) 将记录一一删除，但内存会增长。我的树形面板解释一切都很好，没有不必要的数据。有任何想法吗？对不起，如果我的英语不好。（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:39:17.943

i tried to change content of function load to this:

```
function load(store)
{
var childs = Ext.clone(store.getRootNode().childNodes);
Ext.select('div#treepanel-1032-body div table tbody tr[class^="x-grid-row"]').remove();
treepanel.setRootNode({
 text: "Services",
 expanded: true,
 children: childs
}); 
```

I removed dom model object directly, removed from config properties of treepanel store, and set every 3 sec new root, but the memory grows, especially in IE. Any advices?

# c# - 使用 .NET 程序集依赖项升级应用程序后出现严重的运行时错误

> ID：13310718
> 
> 赞同：3
> 
> 时间：2012-11-09T15:18:17.193
> 
> 标签：c#, .net, .net-assembly

我正在升级应用程序并遇到一些问题。现在旧应用程序是 1.0 版，并在 2.1.1 版加载依赖程序集 A 该程序集存在于应用程序本地目录中。我正在将新应用程序升级到版本 2.0，它将加载程序集 A 版本 1.0.1，它存在于其应用程序本地目录中。我已经使用 ISpy 检查了应用程序引用并确认了新的应用程序引用 A 版本 1.0.1

但是当我启动新应用程序（v 2.0）时，它仍在尝试加载程序集版本 2.1.1 并且失败。我检查了 app.config、machine.config 和 GAC，并且没有针对程序集 A 版本的重定向。我还检查了融合日志文件，但没有看到任何重定向。我所看到的只是融合日志是应用程序在 2.1.1 版本中预绑定了 A，因此无法设置其本地目录中存在的程序集。

我在这里缺少什么吗？应用程序在运行时仍然引用旧程序集的可能原因是什么？

**更新：**使用一些工具，我意识到旧程序集是从我的应用程序引用的本机 DLL 引用的，但我不知道是哪个第三方 DLL，并且应用程序加载了大量它们。融合日志通过记录“调用程序集：（未知）”来确认它。对于缺少的程序集。

现在我的下一步是找出哪个 dll 引用了错误的程序集并修复它。现在的问题是 ILSpy 工具不显示本机 DLL 引用，而 DLLDepends 工具不显示程序集引用，所以我无法链接这两者。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T00:18:52.460

由于您尝试引用的库应该是 GAC 的一部分；您可能想尝试：

1.  控制面板
2.  小图标（管理工具）
3.  事件查看器
4.  应用

Windows 本身应该抛出一个异常，并在出现错误时尝试引用一些特定的细节。特别是如果它是 GAC 的一部分。*相当容易地磨练mscoree.dll*和*mscorelib.dll*库对我更有帮助。授予我使用的那些客户有损坏的框架；但是事件查看器告诉我它有问题的确切库。

您可能想尝试一下。不确定哪个库；但请记住，这通常对`%windir%/Assembly`文件夹中的库有益。希望有帮助。

# php - SmartyPHP 多个 Foreach

> ID：13310719
> 
> 赞同：0
> 
> 时间：2012-11-09T15:18:19.273
> 
> 标签：php, html, mysql, smarty

```
<select name="country[]" multiple="multiple" id="type" class="medium" style="width:20%;height:300px;">
    <option value="United States">United States</option>
    <option value="Canada">Canada</option>
        <option value="United Kingdom">United Kingdom</option>
    <option value="Australia">Australia</option>
    <option>---------------------------------</option>

   {foreach from=$country key=id item=n}
     {foreach from=$cntry key=i item=name}

      <option value="{$n}" {if $name == $n}SELECTED{/if}>{$n}</option>
     {/foreach}
   {/foreach}
 </select> 
```

出于某种原因，它重复了我在数组列表中的每个国家 4 次，并且它没有从`$cntry`与`$country`.

`$cntry`（从数据库中的行中选择国家），而`$country`只是所有国家的数组列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:45:34.457

你可以这样试试：

```
 {foreach from=$country key=id item=n}
     {assign var=sel value=''}
     {foreach from=$cntry key=i item=name}
        {if $name == $n}{assign var=sel value='selected'}{/if}
     {/foreach}
      <option value="{$n}" {$sel}>{$n}</option>
   {/foreach} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:20:33.990

您已经嵌套了循环。它们可能应该连续完成：

```
{foreach from=$country key=id item=n}
   <option blah blah blah>
{/foreach}
{foreach from=$cntry key=i item=name}
   <option blah blah blah >
{/foreach} 
```

# java - 不同JVM的java序列化问题

> ID：13310722
> 
> 赞同：4
> 
> 时间：2012-11-09T15:18:25.713
> 
> 标签：java, android, serialization

我在 Java 中使用序列化时遇到问题。我在网上搜索了解决方案，但还没有找到答案。

问题是这样的——我有一个 Java 库（我有代码，并在执行代码之前将其导出到存档），我需要与两个不同的 JVM 一起使用。一个 JVM 在服务器上（Ubuntu，运行 Java(TM) JRE SE 运行时环境（内部版本 1.7.0_09-b05）），另一个在 Android 2.3.3 上。我在 Java 1.6 中编译了这个库。

现在，我正在尝试将一个从服务器导出的对象导入到客户端，但我收到此错误：

> java.io.InvalidClassException: [Lweka.classifiers.functions.MultilayerPerceptron$NeuralEnd;; 不兼容的类（SUID）：[Lweka.classifiers.functions.MultilayerPerceptron$NeuralEnd;: static final long serialVersionUID =-359311387972759020L; 但预期 [Lweka.classifiers.functions.MultilayerPerceptron$NeuralEnd;: static final long serialVersionUID =1920571045915494592L;

我确实在 class 上声明了一个明确的串行版本 UID `MultilayerPerceptron$NeuralEnd`，如下所示：

```
protected class NeuralEnd extends NeuralConnection {
    private static final long serialVersionUID = 7305185603191183338L;
} 
```

其中 NeuralConnection 实现了 java.io.Serializable 接口。如果我在上面做一个***serialver***，`MultilayerPerceptron$NeuralEnd`我会收到我声明的 serialVersionUID。那么，为什么两个 JVM 都改变了这个值呢？你能帮助我吗？

谢谢，阿尔贝托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:51:17.823

我认为没有解决方案。序列化在不同的 JVM 版本之间不起作用（Dalvik 甚至不是 JVM...）。寻找其他解决方案，如 JSON/XML 对象序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:56:47.697

您的 serialVersionUID 值是错误的。将其设置为错误消息中的“预期”值。

# wpf - WPF 网格中的键盘导航

> ID：13310726
> 
> 赞同：3
> 
> 时间：2012-11-09T15:18:46.590
> 
> 标签：wpf, keyboard, navigation, grid, itemscontrol

假设您有一个 StackPanel，其中包含一个 ScrollViewer，该 ScrollViewer 包含另一个 StackPanel，其中一个 ItemsControl 和一个绑定的 ItemsSource。此 ItemsSource 绑定到在运行时创建的 Grid 集合。每个 Grid 包含一个标签和一个文本框/组合框/几个复选框，它们在 StackPanel 中都有一个唯一的 TabIndex 值。这是xaml：

```
<ScrollViewer Name="scrollViewer" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
  <StackPanel Name="stackPanel" MinWidth="500" Width="Auto">
    <ItemsControl Name="itemsControl"                          ItemsSource="{Binding ElementName=SomeWindow, Path=GridsCollection,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
  </StackPanel>
</ScrollViewer> 
```

我想简单地从一个控件切换到下一个控件，但仅限于网格集合中网格的控件内。到目前为止，我已经尝试了不同的 KeyboardNavigation.TabNavigation 设置，但没有任何运气。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:34:11.447

为您想要表现得像这样的每个容器设置`TabNavigation`为[`KeyboardNavigationMode.Cycle`](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboardnavigationmode.aspx)，因此只要您使用`Tab`and `Shift`+ ，焦点就不会逃脱它`Tab`：

```
KeyboardNavigation.SetTabNavigation(grid1, KeyboardNavigationMode.Cycle); 
```

如果您想更改`Ctrl`+`Tab`行为，请使用[`KeyboardNavigation.SetControlTabNavigation`](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboardnavigation.setcontroltabnavigation.aspx).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T09:40:56.350

您可以应用一个隐式样式来禁用每个控件的选项卡，然后重新启用它以实现您想要的选项卡：

```
<ScrollViewer Name="scrollViewer" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
  <ScrollViewer.Resources>
      <Style TargetType="Control">
          <Setter Property="IsTabStop" Value="False" />
      </Style>
  </ScrollViewer.Resources>
  <StackPanel Name="stackPanel" MinWidth="500" Width="Auto">
    <ItemsControl Name="itemsControl"                          
                  ItemsSource="{Binding ElementName=SomeWindow, Path=GridsCollection,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
  </StackPanel>
</ScrollViewer> 
```

不要忘记将动态生成的网格上的 IsTabStop 设置为 True

# cometd - Cometd：似乎 ServerChannel 失去了一些订阅者

> ID：13310730
> 
> 赞同：2
> 
> 时间：2012-11-09T15:19:02.503
> 
> 标签：cometd

我用cometd实现通知推送，但是发现如下问题：
登录系统后，一开始客户端可以接收到服务器的消息，但是等了很久或者做一些其他操作，客户端可能就收不到了不再接收来自服务器的消息。有没有其他人遇到过这个问题？提前致谢。
Blow 是我的代码：
1\. 客户端代码

```
var cometd = dojox.cometd;cometd.websocketEnabled = false;
    cometd.init(url);
    cometd.subscribe("/foo/new", function(message) {
            ......The business logic......
        }
    ); 
```

2\. 与 AbstractService 集成的 ServletContextAttributeListener

```
public class BayeuxInitializerListener implements ServletContextAttributeListener {
private static final String CLIENT_CHANNEL = "/foo/new";
@Override
public void attributeAdded(ServletContextAttributeEvent event) {
    if(BayeuxServer.ATTRIBUTE.equals(event.getName())) {
        BayeuxServer bayeuxServer = (BayeuxServer) event.getValue();
        boolean isCreated = bayeuxServer.createIfAbsent(CLIENT_CHANNEL, new ConfigurableServerChannel.Initializer() {
            @Override
            public void configureChannel(ConfigurableServerChannel channel) {
                channel.setPersistent(true);
            }
        });
        new MyService(bayeuxServer);

    }
} 
```

3.服务

```
public class MyService extends AbstractService {
private static final Logger logger = Logger.getLogger(MyService .class);

private static final String CLIENT_CHANNEL = "/foo/new";
private static final String LISTENER_CHANNEL = "/service/notification";

public MyService(BayeuxServer bayeuxServer) {
    super(bayeuxServer, "notification");
    this.addService(LISTENER_CHANNEL, "processNotification");
}

public void processNotification(ServerSession serverSession, Map<String, Object> data) {
    LocalSession localSession = this.getLocalSession();
    if(logger.isDebugEnabled()) {
        logger.debug("Local Session : " + localSession.getId() + ".");
    }
    ServerChannel serverChannel = this.getBayeux().getChannel(CLIENT_CHANNEL)
    Set<ServerSession> subscribers = serverChannel.getSubscribers();
    if(0 == subscribers.size()) {
        logger.info("There are no subcribers for " + CLIENT_CHANNEL + ".");
    }
    for(ServerSession subscriber : subscribers) {
        logger.info("The subscriber for " + CLIENT_CHANNEL + " : " + subscriber.getId() + ".");
    }
    serverChannel.publish(localSession, data, null);
} 
```

# sql - 使用 @values 更新 MS SQL 行

> ID：13310731
> 
> 赞同：1
> 
> 时间：2012-11-09T15:19:04.563
> 
> 标签：sql, sql-server, vb.net, sql-update

我们是否可以使用我**现有的 INSERT 代码**并让它做同样的事情但**UPDATE**？

示例是：

```
ID  | formTitle1 | formTitle2 | formTitle3 | formTitle4
-------------------------------------------------------
20  | The Rock   | Booker     | The Vine   | Keys 
```

如果我想更新所有 4 行，那么我想我可以这样做吗？：

```
sql = "UPDATE formSettings " & _
      "SET (formTitle1, formTitle2, formTitle3, formTitle4) " & _
      "VALUES (@formTitle1, @formTitle2, @formTitle3, @formTitle4) " & _
      "WHERE ID = '" & theID & "'"

Dim updateCmd As New SqlCommand(sql, myCONN)
updateCmd.Parameters.Add("@formTitle1", SqlDbType.VarChar)
updateCmd.Parameters.Add("@formTitle2", SqlDbType.VarChar)
updateCmd.Parameters.Add("@formTitle3", SqlDbType.VarChar)
updateCmd.Parameters.Add("@formTitle4", SqlDbType.VarChar)

updateCmd.Parameters("@formTitle1").Value = "changed1"
updateCmd.Parameters("@formTitle2").Value = "changed2"
updateCmd.Parameters("@formTitle3").Value = "changed3"
updateCmd.Parameters("@formTitle4").Value = "changed4"

myCONN.Open()
updateCmd.ExecuteScalar()
myCONN.Close() 
```

应更新为：

```
ID  | formTitle1 | formTitle2 | formTitle3 | formTitle4
-------------------------------------------------------
20  | changed1   | changed2   | changed3   | changed4 
```

我知道我有错误的 UPDATE 语法，但我不确定这是否可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:25:23.300

您的更新语法无效，应该是

```
sql = "UPDATE formSettings " & _
      "SET formTitle1 = @formTitle1, formTitle2 = @formTitle2, formTitle3 = @formTitle3, formTitle4 = @formTitle4 " & _
      "WHERE ID = @ID" 
```

并参数化你的`ID`，你现在将有 5 个参数

还将您的代码重组为这个，

*   使用`USING`语句
*   添加异常处理

片段，

```
Dim _sql As String = "UPDATE formSettings " & _
      "SET formTitle1 = @formTitle1, formTitle2 = @formTitle2, formTitle3 = @formTitle3, formTitle4 = @formTitle4 " & _
      "WHERE ID = @ID" 
Using conn As New SqlConnection("connectionStringHere")
    Using comm As New SqlCommand()
        With comm
            .Connection = conn
            .CommandType = CommandType.Text
            .CommandText = _sql
            .Parameters.AddWithValue("@formTitle1", "changed1")
            .Parameters.AddWithValue("@formTitle2", "changed2")
            .Parameters.AddWithValue("@formTitle3", "changed3")
            .Parameters.AddWithValue("@formTitle4", "changed4")
            .Parameters.AddWithValue("@ID", theID)
        End With
        Try
            conn.Open()
            comm.ExecuteNonQuery()
        Catch ex As SqlException
            ' do something on the error
            ' do not hide it!
        End Try
    End Using
End Using 
```

来源

*   [加值](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)
*   [**添加**（*推荐使用*）](http://msdn.microsoft.com/en-us/library/hyaybfa1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:25:13.333

```
UPDATE tbl
SET Field1 = @Value1, Field2 = @Value2
WHERE .... 
```

# powershell - powershell set-adcomputer netbootguid

> ID：13310734
> 
> 赞同：0
> 
> 时间：2012-11-09T15:19:16.527
> 
> 标签：powershell, active-directory

快速提问。我想更新活动目录计算机对象的 netbootguid。以下虽然似乎不起作用。

```
Set-ADComputer -identity $someComputerName -add@{'netbootGUID' = $theguidhere} 
```

`$guid = "00000000-0000-0000-0000-001CC082A15C"`#一个mac地址在哪里

我收到以下错误：

```
Set-ADComputer : A value for the attribute was not in the acceptable range of values 
```

知道我做错了什么以及如何纠正吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:27:26.610

尝试声明的类型`$guid`（我现在无法测试）：

```
[guid]$guid = "00000000-0000-0000-0000-001CC082A15C" 
```

并尝试：

```
Set-ADComputer -identity $someComputerName -add@{'netbootGUID' = $guid.tobytearray() 
```

# xml - 在 XSD 中，simpleType/restriction/simpleType 元素的含义/用途是什么？

> ID：13310737
> 
> 赞同：1
> 
> 时间：2012-11-09T15:19:40.123
> 
> 标签：xml, xsd, schema, restriction

在 XML 模式定义 (XSD) 文档中，根据[this](http://msdn.microsoft.com/en-us/library/ms256057.aspx)，可以有一个**simpleType**元素，该元素包含一个可能有另一个**simpleType元素的****限制**元素。

 **我浏览了许多与**限制**/**简单类型**相关的页面，包括 W3 Schema Primer，但我还没有找到一个简单的解释来解释 XSD 处理器应该如何解释它。我明白了 simpleType 是什么，我得到了它的大部分可能的限制，但我不太明白 simpleType/restriction/simpleType 构造应该是什么意思。模式设计者通常/通常如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:19:20.700

它是`base=""`. 类似于`<element>`具有一个`type=""`或一个 `<complexType>`（但不是两者都不是）。

> `base` {基本类型定义} 简单类型定义组件由[attribute] 或`<simpleType>` [children]的实际值解析为，以存在者为准。

[http://www.w3.org/TR/2001/REC-xmlschema-2-20010502/#derivation-by-restriction](http://www.w3.org/TR/2001/REC-xmlschema-2-20010502/#derivation-by-restriction)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T17:35:20.023

XSD 通常允许一个定义通过名称 (ref=NNNN) 或通过内嵌另一个定义来引用另一个定义。我看不出有任何强烈的理由使用这种机制来定义通过限制派生的类型的基本类型，但它是为了通用性和一致性。（仅仅因为我看不到它的用途并不意味着没有……）**

# linux - 启动-停止-重启 shell 脚本的功能

> ID：13310738
> 
> 赞同：4
> 
> 时间：2012-11-09T15:19:43.230
> 
> 标签：linux, bash, shell, unix, console

我是一个 shell 脚本新手，试图理解一些代码，但是有些行对我来说太复杂了。我正在谈论的这段代码可以在这里找到：[https](https://gist.github.com/447191) ://gist.github.com/447191 它的目的是启动、停止和重新启动服务器。这是非常标准的东西，所以值得花一些时间来理解它。我评论了那些我不确定意思或者我完全不明白的行，希望有人能给我一些解释。

```
 #!/bin/bash
    #
    BASE=/tmp
    PID=$BASE/app.pid
    LOG=$BASE/app.log
    ERROR=$BASE/app-error.log

    PORT=11211
    LISTEN_IP='0.0.0.0'
    MEM_SIZE=4
    CMD='memcached'
# Does this mean, that the COMMAND variable can adopt different values, depending on
# what is entered as parameter? "memcached" is chosen by default, port, ip address and 
# memory size are options, but what is -v?
    COMMAND="$CMD -p $PORT -l $LISTEN_IP -m $MEM_SIZE -v"

    USR=user

    status() {
        echo
    echo "==== Status"

        if [ -f $PID ]
        then
    echo
    echo "Pid file: $( cat $PID ) [$PID]"
            echo
# ps -ef: Display uid, pid, parent pid, recent CPU usage, process start time, 
# controling tty, elapsed CPU usage, and the associated command of all other processes
# that are owned by other users.
# The rest of this line I don't understand, especially grep -v grep
    ps -ef | grep -v grep | grep $( cat $PID )
        else
    echo
    echo "No Pid file"
        fi
    }

    start() {
        if [ -f $PID ]
        then
    echo
    echo "Already started. PID: [$( cat $PID )]"
        else
    echo "==== Start"
# Lock file that indicates that no 2nd instance should be started
            touch $PID
# COMMAND is called as background process and ignores SIGHUP signal, writes it's
# output to the LOG file. 
            if nohup $COMMAND >>$LOG 2>&1 &
# The pid of the last background is saved in the PID file
            then echo $! >$PID
                 echo "Done."
                 echo "$(date '+%Y-%m-%d %X'): START" >>$LOG
            else echo "Error... "
                 /bin/rm $PID
            fi
    fi
    }
# I don't understand this function :-(    
    kill_cmd() {
        SIGNAL=""; MSG="Killing "
        while true
    do
    LIST=`ps -ef | grep -v grep | grep $CMD | grep -w $USR | awk '{print $2}'`
            if [ "$LIST" ]
            then
    echo; echo "$MSG $LIST" ; echo
    echo $LIST | xargs kill $SIGNAL
# Why this sleep command?
                sleep 2
                SIGNAL="-9" ; MSG="Killing $SIGNAL"
                if [ -f $PID ]
                then
                    /bin/rm $PID
                fi
    else
    echo; echo "All killed..." ; echo
    break
    fi
    done
    }

    stop() {
        echo "==== Stop"

        if [ -f $PID ]
        then
    if kill $( cat $PID )
            then echo "Done."
                 echo "$(date '+%Y-%m-%d %X'): STOP" >>$LOG
            fi
            /bin/rm $PID
            kill_cmd
        else
    echo "No pid file. Already stopped?"
        fi
    }

    case "$1" in
        'start')
                start
                ;;
        'stop')
                stop
                ;;
        'restart')
                stop ; echo "Sleeping..."; sleep 1 ;
                start
                ;;
        'status')
                status
                ;;
        *)
                echo
    echo "Usage: $0 { start | stop | restart | status }"
                echo
    exit 1
                ;;
    esac

    exit 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:06:12.453

1) `COMMAND="$CMD -p $PORT -l $LISTEN_IP -m $MEM_SIZE -v"`—`-v`在 Unix 传统中，很多时候是`--verbose`. 所有这些美元符号都是变量扩展（它们的文本值被插入到分配给新变量 COMMAND 的字符串中）。

2) `ps -ef | grep -v grep | grep $( cat $PID )`- 它是一个管道： ps 将其输出重定向到 grep 输出到另一个 grep 并且最终结果被打印到标准输出。 `grep -v grep`意思是“取所有*不*包含 'grep' 的行”（grep 本身就是一个过程，所以你需要从 的输出中排除它`ps`）。`$( $command )`是一种运行命令并将其标准输出插入此脚本位置的方法（在这种情况下：`cat $PID`将显示名称为 $PID 的文件的内容）。

3) `kill_cmd`。这个函数是一个无限循环，试图杀死“memcached”进程的 PID 列表。首先，它尝试发送 TERM 信号（礼貌地要求 $LIST 中的每个进程退出，保存其工作并正确关闭），给它们 2 秒（`sleep 2`）来完成它们的关闭工作，然后尝试确保所有进程都被杀死使用信号 KILL ( `-9`)，它使用操作系统工具立即杀死进程：如果进程在 2 秒内没有完成关闭工作，则认为它已挂起）。如果杀戮`kill -9`成功，它会删除 PID 文件并退出循环。

`ps -ef | grep -v grep | grep $CMD | grep -w $USR | awk '{print $2}'`打印名称为 $CMD ('memcached') 和用户 $USR ('user') 的所有进程的 PID。`-w`grep 的选项表示“仅整个单词”（这不包括所寻求的名称是另一个进程名称的一部分的情况，例如“fakememcached”）。`awk`是一个小解释器，最常用于从输入的每一行中获取一个单词编号 N（您可以将其视为文本表列的选择器）。在这种情况下，它在输出行中每隔一个单词打印一次`ps`，这意味着每个 PID。

如果您还有其他问题，我会在下面添加答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:24:18.610

以下是对您不理解的代码片段的解释：

1.

```
# Does this mean, that the COMMAND variable can adopt different values, depending on
# what is entered as parameter? "memcached" is chosen by default, port, ip address and 
# memory size are options, but what is -v?
    COMMAND="$CMD -p $PORT -l $LISTEN_IP -m $MEM_SIZE -v" 
```

在男人身上，靠近-v：

```
$ man memcached
...
 -v     Be verbose during the event loop; print out errors and warnings.
... 
```

2.

```
# ps -ef: Display uid, pid, parent pid, recent CPU usage, process start time, 
# controling tty, elapsed CPU usage, and the associated command of all other processes
# that are owned by other users.
# The rest of this line I don't understand, especially grep -v grep
ps -ef | grep -v grep | grep $( cat $PID ) 
```

打印所有进程的详细信息 ( `ps -ef`)，排除带有 grep ( `grep -v grep`) 的行（因为您正在运行 grep，它将在进程列表中显示自己）并通过名为 $PID ( `/tmp/app.pid`) ( `grep $( cat $PID )`) 的文件中找到的文本进行过滤。

3.

```
# I don't understand this function :-(    
    kill_cmd() {
        SIGNAL=""; MSG="Killing "
        while true
    do
    ## create a list with all the pid numbers filtered by command (memcached) and user ($USR)
    LIST=`ps -ef | grep -v grep | grep $CMD | grep -w $USR | awk '{print $2}'`
    ## if $LIST is not empty... proceed
            if [ "$LIST" ]
            then
    echo; echo "$MSG $LIST" ; echo
    ## kill all the processes in the $LIST (xargs will get the list from the pipe and put it at the end of the kill command; something like this < kill $SIGNAL $LIST > )
    echo $LIST | xargs kill $SIGNAL
# Why this sleep command?
## some processes might take one or two seconds to perish
                sleep 2
                SIGNAL="-9" ; MSG="Killing $SIGNAL"
                ## if the file $PID still exists, delete it
                if [ -f $PID ]
                then
                    /bin/rm $PID
                fi
    ## if list is empty
    else
    echo; echo "All killed..." ; echo
    ## get out of the while loop
    break
    fi
    done
    } 
```

这个函数会`memcached`缓慢而痛苦地杀死所有相关的进程（实际上恰恰相反）。以上是解释。

# javascript - 用文档片段javascript替换元素内容

> ID：13310740
> 
> 赞同：19
> 
> 时间：2012-11-09T15:19:53.620
> 
> 标签：javascript, replace, documentfragment

我正在尝试用文档片段替换元素的所有内容：

`var frag = document.createDocumentFragment()`

文档片段正在创建得很好。那里没有问题。我给它添加元素就好了，那里也没有问题。我可以使用`element.appendChild(frag)`. 这也很好用。

我正在尝试创建一个类似于 jQuery 的 HTML 的“替换”方法。我不担心旧浏览器的兼容性。是否有一个神奇的功能可以替换元素的所有内容？

我已经尝试过`element.innerHTML = frag.cloneNode(true)`，（根据我能找到的*每个*“替换元素内容”wiki），这是行不通的。它给了我`<div>[object DocumentFragment]</div>`。

请不要使用库，甚至不要使用 jQuery 解决方案。

为了清楚起见，我正在寻找一种“神奇”的解决方案，我知道如何一次删除所有现有元素，然后附加我的片段。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-09T15:23:01.767

你有没有尝试过`replaceChild`

像这样的东西

```
element.parentNode.replaceChild(frag, element) 
```

来源：[https ://developer.mozilla.org/en-US/docs/DOM/Node.replaceChild](https://developer.mozilla.org/en-US/docs/DOM/Node.replaceChild)

原始jsFiddle：http: [//jsfiddle.net/tomprogramming/RxFZA/](http://jsfiddle.net/tomprogramming/RxFZA/)

编辑：啊，我没有看到替换内容。好吧，先删除它们！

```
element.innerHTML = "";
element.appendChild(frag); 
```

jsfiddle：http: [//jsfiddle.net/tomprogramming/RxFZA/1/](http://jsfiddle.net/tomprogramming/RxFZA/1/)

请注意，在 jsfiddle 中，我只使用 jquery 来连接按钮，整个点击处理程序都是原始 javascript。

Edit2：pimvdb 也建议，但只需将新内容附加到分离的元素并替换。

```
var newElement = element.cloneNode();
newElement.innerHTML = "";
newElement.appendChild(frag);
element.parentNode.replaceChild(newElement, element); 
```

[http://jsfiddle.net/tomprogramming/RxFZA/3/](http://jsfiddle.net/tomprogramming/RxFZA/3/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-15T11:24:41.810

2017：
从 ContentEditable 字段尝试这个神奇的答案和[`Range`](https://developer.mozilla.org/en/docs/Web/API/Range)

```
var range = document.createRange(); // create range selection 
range.selectNodeContents($element); // select all content of the node
range.deleteContents() // maybe there is replace command but i'm not find it
range.insertNode(frag) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:45:29.417

**编辑**（因为我原来的答案很愚蠢）：

```
var rep = document.createElement("div");
rep.appendChild(frag);
element.innerHTML = rep.innerHTML; 
```

# internet-explorer - IE 出现错误，指出一个属性不是对象

> ID：13310741
> 
> 赞同：1
> 
> 时间：2012-11-09T15:19:54.353
> 
> 标签：internet-explorer, extjs, internet-explorer-8

当我开始在 IE 上测试我的页面时，我发现了奇怪的错误。IE 不断返回错误，例如“XXXXX 为空或不是对象”，其中“xxxx”是某个属性。
例如：

```
var test = 'test string'
if(test.length) ... bla bla 
```

和 IE 中断错误 **“长度为空或不是对象”**
我不明白....为什么这个愚蠢的浏览器一直告诉我**长度**（这是属性）不是对象？！？？我知道长度不是一个对象，因为它的属性！！！！
我说的是IE8
，我会感谢一些帮助，谢谢。

# android - 开始活动1，切换到活动2（完成后），在活动结束的地方恢复活动1

> ID：13310743
> 
> 赞同：0
> 
> 时间：2012-11-09T15:19:57.790
> 
> 标签：android

我有一个启动 PuzzleActivity 的 MainActivity，在 PuzzleActivity 中途我想去 SizeSelection 活动（它有另一个布局），当单击布局中的一个按钮并且该过程在我想要恢复的活动中完成时结束的拼图活动（它转到 SizeSelection.

尺码选择：

```
public static short getGridSize(Context content) {
        if ( mIbtn3x3 == view) {
            short gridSize = 3;
            return gridSize;
        }else if (mIbtn4x4 == view ) {
            short gridSize = 4;
            return gridSize;
        }else if (mIbtn5x5 == view ) {
            short gridSize = 5;
            return gridSize ;
        }
            return gridSize;
        } 
```

拼图活动：

```
Intent i5 = new Intent(this, SizeSelection.class);  
            startActivity(i5);
            createGameBoard(SizeSelection.getGridSize(this));
            break; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:28:41.287

使用`startActivityForResult()`而不是`startActivity()`. 这样你的启动活动不会被破坏，但就像“暂停”一样，所以它的`onPause()`方法将被调用。

然后在需要时从第二个活动返回到您的第一个活动：

```
setResult(RESULT_OK);
finish(); 
```

如果您需要发回一些数据，请使用意图和重载`setResult()`方法：

```
Intent data = new Intent();
data.put...
setResult(RESULT_OK, data); //RESULT_OK should be replaced by a positive int if you want to use the onActivityResult() method and get the data in the first activity
finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:26:32.550

你应该使用

```
startActivityForResult() 
```

而不是 startActivity。当您完成 SizeSelection 活动调用时

```
finish() 
```

然后设置网格大小。

```
onActivityResult() 
```

更详细的描述在这里 [http://developer.android.com/reference/android/app/Activity.html#StartingActivities](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

# java - 纽约从纪元到适当时间的 Java 毫秒

> ID：13310745
> 
> 赞同：-1
> 
> 时间：2012-11-09T15:20:01.673
> 
> 标签：java, datetime, jodatime

我有一个很长的值，表示从纪元开始的毫秒数，我想知道如何将其作为表示纽约时间的日期（包括是否包含夏令时偏移，对于该特定日期）。我刚刚下载了 JODA，因为我一直在阅读它可能会有所帮助，但我还是有点迷茫。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:23:49.060

使用此代码：

```
new DateTime( millis, DateTimeZone.forID( "America/New_York" ) ); 
```

说明：当您指定毫秒时，它们总是相对于时代（1.1.1970）。通过明确设置时区，JodaTime 将在您打印日期时使用该时区。

# asp.net-mvc - 无法将模型添加到列表

> ID：13310749
> 
> 赞同：0
> 
> 时间：2012-11-09T15:20:16.333
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我执行以下`for each`循环将模型插入列表：

```
 Dim weights = weight.Where(Function(x) x.FW_Food_ID = item.NDB_No)

        For Each i In weights
            Dim model = New Tbl_Food_Weight
            model.FW_GmWt = i.FW_GmWt
            Debug.Print("i.FW_GmWt=" + i.FW_GmWt)
            Debug.Print("model.FW_GmWt=" + model.FW_GmWt)
            model.FW_Food_ID = i.FW_Food_ID
            Debug.Print("i.FW_Food_ID=" + i.FW_Food_ID)
            Debug.Print("model.FW_Food_ID=" + model.FW_Food_ID)
            model.FW_Option = i.FW_Option
            Debug.Print("i.FW_Option=" + i.FW_Option)
            Debug.Print("model.FW_Option=" + model.FW_Option)
            model.FW_ID = i.FW_ID
            Debug.Print("i.FW_ID=" + i.FW_ID.ToString)
            Debug.Print("model.FW_ID=" + model.FW_ID.ToString)
            item.test.Add(model)
        Next 
```

我的模型如下：

```
Public Class Tbl_Food_Weight

    <Key()> _
    Public Property FW_ID As Integer
    Public Property FW_Food_ID As String
    Public Property FW_Option As String
    Public Property FW_Serving_Size As String
    Public Property FW_GmWt As String

End Class 
```

我的`test`财产如下：

```
<NotMapped()> _
Public Overridable Property test As List(Of Tbl_Food_Weight) 
```

我得到的输出是：

```
i.FW_GmWt=250
model.FW_GmWt=250
i.FW_Food_ID=12695
model.FW_Food_ID=12695
i.FW_Option=1
model.FW_Option=1
i.FW_ID=4481
model.FW_ID=4481
A first chance exception of type 'System.NullReferenceException' occurred in MyBlog.DLL 
```

错误发生在这一行：

```
item.test.Add(model) 
```

你看，它放入了变量，但是当我将模型添加到列表中时，它说它是空的。如何将模型添加到模型列表中？

谢谢你。

**编辑：**

上下文中的项目：

```
For Each item In food

            Dim weights = weight.Where(Function(x) x.FW_Food_ID = item.NDB_No)
            ... rest of code already posted above 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:23:19.190

模型不是空的——你的测试属性是。在任何项目的构造函数中，您都需要“新建”您的集合。

# mysql - 使用 UNION 选择子查询

> ID：13310750
> 
> 赞同：0
> 
> 时间：2012-11-09T15:20:27.347
> 
> 标签：mysql, subquery, union, correlated-subquery

```
CREATE TABLE newsarticles
    (katernenID int, Buitenland int, Economie int, Sport int, Cultuur int, Wetenschap int, Media int, userID int);

INSERT INTO newsarticles
    (katernenID, Buitenland, Economie, Sport, Cultuur, Wetenschap, Media, userID)
VALUES
    (1, 24, 5, 52, 3, 2, 3, 1),
    (3, 2, 0, 0, 1, 51, 66, 5),
    (4, 50, 2, 67, 41, 1, 54, 6),
    (5, 30, 1, 79, 0, 0, 12, 7),
    (6, 9, 26, 0, 100, 11, 0, 8),
    (7, 2, 14, 8, 1, 33, 98, 9),
    (8, 0, 1, 0, 1, 0, 0, 10);

SELECT
  userID,GROUP_CONCAT(amt ORDER BY amt DESC) AS four_highest
FROM
(
  SELECT userID, @rownum := @rownum + 1 AS rank, NAME, amt FROM (
    SELECT userID, Buitenland AS amt, 'Buitenland' AS NAME UNION
    SELECT userID, Economie, 'Economie'  UNION
    SELECT userID, Sport, 'Sport' UNION
    SELECT userID, Cultuur, 'Cultuur'  UNION
    SELECT userID, Wetenschap, 'Wetenschap'  UNION
    SELECT userID, Media, 'Media' 
         FROM( SELECT katernenID, Buitenland, Economie, Sport, Cultuur, Wetenschap, Media, userID FROM newsarticles  ) temp

  ) amounts, (SELECT @rownum := 0) r
) top4
GROUP BY userid 
```

我想让 UNION 像上面的查询一样，但是 Union 不起作用。UNION 立即需要 FROM 语句。喜欢：

```
 SELECT userID, Wetenschap, 'Wetenschap'  
                 FROM( SELECT katernenID, Buitenland, Economie, Sport, Cultuur, Wetenschap, Media, userID FROM newsarticles  ) temp
                 UNION
    SELECT userID, Media, 'Media' 
         FROM( SELECT katernenID, Buitenland, Economie, Sport, Cultuur, Wetenschap, Media, userID FROM newsarticles  ) temp 
```

但是我不能重复 FROM 语句，子查询中有太多的计算。有没有办法做到这一点，或者我错过了什么？

或者

我想要一个带有 max(a_percentage,b_percentage,c_percentage),SecondMAX(a_percentage,b_percentage,c_percentage),ThirdMAX(a_percentage,b_percentage,c_percentage) 的新列

```
 SELECT id,a,b,c,a_percentage,b_percentage,c_percentage
    -- -------------------------max percentage
    GREATEST(axis_per, hdfc_per,icici_per,citi_per ) AS max_per,
    FROM (
      SELECT id,a,b,c,
      IFNULL(a*100/a+b+c+d,0) AS a_percentage,
      IFNULL(b*100/a+b+c+d,0) AS b_percentage,
      IFNULL(c*100/a+b+c+d,0) AS c_percentage
      FROM test
        WHERE TIME > '2012-01-01'
        GROUP BY id
      ) A 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:28:07.590

如果我对您的理解正确，您应该能够只使用 中的表名`FROM`，并为每行上的列加上别名，例如：

```
SELECT
  userID,GROUP_CONCAT(amt ORDER BY amt DESC) AS four_highest
FROM
(
  SELECT userID, @rownum := @rownum + 1 AS rank, NAME, amt FROM (
    SELECT userID, Buitenland AS amt, 'Buitenland' AS NAME FROM newsarticles NAME UNION
    SELECT userID, Economie, 'Economie'  FROM newsarticles UNION
    SELECT userID, Sport, 'Sport'  FROM newsarticles UNION
    SELECT userID, Cultuur, 'Cultuur'  FROM newsarticles UNION
    SELECT userID, Wetenschap, 'Wetenschap'  FROM newsarticles UNION
    SELECT userID, Media, 'Media' FROM newsarticles
) amounts, (SELECT @rownum := 0) r
) top4
GROUP BY userid 
```

# objective-c - UITableview 仅打印 NSMutableArray 的第一个对象，IOS

> ID：13310751
> 
> 赞同：0
> 
> 时间：2012-11-09T15:20:28.633
> 
> 标签：objective-c, ios, uitableview, nsmutablearray

我有一个 NSMutableArray 和一个从 NSMutableArray 填充的分组表视图。

当我用 NSLog 打印 NSmutableArray 时，输出是 `"String1","String2","String3"`

但是在 UITableView Cell 上我总是看到 NSMUtableArray 的第一项：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return [_presenterList count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return 1;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    NSLog(@"_presenterList objectAtIndex: %@",[_presenterList objectAtIndex:indexPath.row]);

    cell.textLabel.text=[_presenterList objectAtIndex:indexPath.row];
return cell;
} 
```

输出 NSlog `"String1"`

表视图上的输出

```
String1
String1
String1 
```

我究竟做错了什么？

添加了编辑屏幕截图

我从字符串和 1 个 tableview 行创建了一些标题，如图所示

![在此处输入图像描述](../Images/51740a79f67ad828419422b4d28701e2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:23:14.833

```
cell.textLabel.text=[_presenterList objectAtIndex:indexPath.section]; 
```

代替 `cell.textLabel.text=[_presenterList objectAtIndex:indexPath.row];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:35:27.237

`numberOfRowsInSection`您在和`[array count]`中返回“1” `numberOfSectionsInTableView`。这是倒退的（除非您真的想要数组中的每个项目都有一个部分。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [_presenterList count];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
} 
```

# facebook - Facebook iOS SSO 冻结 Facebook 应用程序屏幕

> ID：13310761
> 
> 赞同：1
> 
> 时间：2012-11-09T15:20:56.180
> 
> 标签：facebook, facebook-ios-sdk

我正在为我的客户使用 Facebook iOS SDK 3.0，该客户尚未准备好迁移到 3.1，并且在某些情况下遇到了问题。

我基本上遵循 Facebook 教程 / 示例，但是，有时（到目前为止仅 iphone4S），在用户被带到 facebook 应用程序进行 SSO 并成功带回我的应用程序（使用打开的 FBSession 和有效的访问令牌和所有内容）之后，facebook 应用程序（重新打开时）永久卡在白色屏幕上，顶部只有蓝色条。当用户点击顶部蓝色条上的“取消”时，他们会立即回到我们的应用程序。用户必须完全关闭 Facebook 应用程序并重新启动才能再次正常使用 Facebook 应用程序。

即使在完全相同的设备上，此问题也不总是可重现的。我的理解是我的应用程序传递了一个启动 Facebook 应用程序的 fb:// URL，一旦它在 Facebook 应用程序中，我就无法控制或任何事情，而且冻结根本不可能是由我的代码引起的。

只是想在向客户解释之前看看我的理解是否正确......任何想法都会有所帮助......谢谢！

# c# - C# 泛型：如何应用泛型类型约束并从基本类型继承

> ID：13310763
> 
> 赞同：0
> 
> 时间：2012-11-09T15:21:10.713
> 
> 标签：c#, generics

这就是我想要做的：

```
DataService<T> where T : SomeType : DataServiceBase 
```

换句话说，我想介绍一个 T，它是 Sometype 的子类。但我也需要 DataService 从 DataServiceBase 继承。

似乎我可以做一个或另一个，但不能同时做，因为使用了两个冒号。换句话说，我可以使用“where : SomeType”的通用选择器，或者如果我不使用它，我可以从 DataServiceBase 继承。但如果我两者都做，它会产生设计时错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:27:34.830

好的，让它像这样工作：

```
DataService<T> : DataServiceBase where T : SomeType 
```

格雷格

# php - 带有两个条件的 if else 语句

> ID：13310766
> 
> 赞同：-3
> 
> 时间：2012-11-09T15:21:18.170
> 
> 标签：php

是否可以有一个带有两个条件的 if esle 语句？

我有这个代码...

```
 if ($current_page == 1) 
```

但是我可以这样写吗

```
 if ($total_pages ==1 $current_page < $total_pages) 
```

我自己尝试过几种写法，但似乎无法让它工作。

任何想法，将不胜感激，

代码

```
 echo "$current_page"; echo "$total_pages";

     if ($current_page >= 1 && ($current_page < $total_pages)) { echo "next button should be here"; } else {echo "Nothing"; } 
```

请参阅下面的链接，您可以看到它是第 1 页，共 4 页，它进入了无部分。当它应该在这里显示下一个按钮时。

[http://www.qrrw.net/k](http://www.qrrw.net/k)

php代码

```
 $pageNum = $_GET['page'];
  $engine = $_GET['engine'];
  $manid = $_GET['manid'];
  $mgid = $_GET['mgid'];
  $file = 'http://mywebsite.com/page.xml?apikey=****&vid=****&limit=10&mgid='. $mgid.'&engine='. $engine.'&manid='.$manid.'&page=' . $pageNum;

  if(!$xml = simplexml_load_file($file))
   exit('Failed to open '.$file);

  $total_pages = $xml->results->attributes()->totalPages;
  $current_page = $xml->results->attributes()->currentPage;
  $total_results = $xml->results->attributes()->totalResults;

  $count = 0;
  $max = 2;
  foreach($xml->year as $year){ 

  $count++;
  echo '<td class="manu">'. "<a href='exact.php?manid=".$manid."&engine=".$engine."&mgid=".$mgid."&year=".$year['name']."'>".$year['name']."</a>";'   </td>';

 if($count >= $max){

 $count = 0;

 echo '</tr><tr>';
 }
 }
 $pageNum = $current_page = $xml->results->attributes()->currentPage;

 if ($current_page == 1) { } else {
    echo "<a href='years.php?page=".($pageNum - 1)."&engine=".($engine)."&manid=".($manid)."&mgid=".($mgid)."'><img src='../images/previous.fw.png' width='130' height='92' /></a>";
    }

    echo "$current_page"; echo "$total_pages";

    if ($current_page >= 1 && ($current_page < $total_pages)) { 
    echo "next button should be here"; 
    } else {
    echo "Nothing"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:22:51.887

我不确定您要在这里完成什么逻辑，但是您可以通过这种方式测试两个条件：

```
 // if total pages are equal to 1 or 1 is less than total pages     
 if (($total_pages == 1) || (1 < $total_pages)) 
```

请参阅[php 逻辑运算符](http://php.net/manual/en/language.operators.logical.php)。

如果您要根据您的编辑比较当前页面小于总页面数并且当前页面大于一，您可以执行以下操作：

```
if ($current_page > 1 && ($current_page < $total_pages)) 
```

或者，如果您只想检查 total_pages 是否大于或等于 1，您可以执行以下操作：

```
if ($total_pages >= 1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T15:27:29.383

实际上，您可以根据需要使用由[逻辑运算](http://www.php.net/manual/en/language.operators.logical.php)符分隔的任意数量的[比较运算符](http://www.php.net/manual/en/language.operators.comparison.php)。

```
<?php 
    if(($value [Comparison Operator] $value) [Logical Operator] ($value [Comparison Operator] $value)){
      //do something
    }
?> 
```

## 比较运算符

```
$a == $b     Equal
$a === $b  Identical
$a != $b     Not equal
$a <> $b     Not equal.
$a !== $b  Not identical
$a < $b      Less than
$a > $b      Greater than
$a <= $b     Less than or equal to
$a >= $b     Greater than or equal to 
```

## 逻辑运算符

```
$a and $b  And 
$a or $b     Or
$a xor $b  Xor
! $a       Not
$a && $b   And 
$a || $b   Or 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T16:49:50.227

if 语句失败的原因是因为它期望`$current_page`和`$total_pages`都是整数，但它们不是。

正如您从`var_dump`发布的结果中看到的那样，这两个变量都包含足够复杂的对象，以至于它们无法隐式转换为整数。

尝试在 if 语句之前添加以下代码：

```
$current_page = (int)$current_page[0];
$total_pages = (int)$total_pages[0]; 
```

至此，您的问题实际上与您最初提出的问题无关...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T15:59:41.967

如果您希望同时满足这两个条件，请使用**AND &&**

```
if(($b > $a) && ($d > $f) 
```

对于其中任何一个匹配使用**OR ||**

```
if(($b > $a) || ($d > $f) 
```

如需完整参考，请参阅： http: [//php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

# jquery - jqplot 极地图和雷达图的最佳替代品

> ID：13310768
> 
> 赞同：3
> 
> 时间：2012-11-09T15:21:36.523
> 
> 标签：jquery, html, jqplot, polar-coordinates, radar-chart

我正在寻找绘制极坐标数据的替代方法。我需要用[这样](http://www.google.it/imgres?um=1&hl=it&client=firefox-a&rls=org.mozilla%3ait%3aofficial&channel=fflb&biw=1440&bih=797&tbm=isch&tbnid=aH-DqmSfSRvHUM%3a&imgrefurl=http://www.contentandmotion.co.uk/blog/intent-index/&docid=ExLaf6tRRrIljM&imgurl=http://www.contentandmotion.co.uk/wp-content/uploads/2012/01/RF-Intent-Index.png&w=600&h=473&ei=Uh2dUIvDH8HbtAaTnYDoAQ&zoom=1&iact=hc&vpx=340&vpy=38&dur=747&hovh=199&hovw=253&tx=190&ty=114&sig=114523337351869053473&page=1&tbnh=144&tbnw=183&start=0&ndsp=23&ved=1t:429,r:1,s:0,i:69)的动态选项来实现[这样](http://www.jqplot.com/deploy/dist/examples/kcp_pdf.html)的图表。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:09:42.957

我个人需要这些：

1.  [海图 JS](http://www.highcharts.com/demo/polar)
2.  [画布随心](http://canvasxpress.org/network.html)
3.  [D3](https://github.com/mbostock/d3/wiki/Gallery)[这里](http://mbostock.github.com/d3/talk/20111116/gears.html)有演示。

它们在你看来可能有点花哨，但我相信你会喜欢的。

# c++ - 将 png 作为纹理加载并将其绑定到球体

> ID：13310770
> 
> 赞同：0
> 
> 时间：2012-11-09T15:21:38.813
> 
> 标签：c++, opengl

我找不到任何关于如何加载 PNG 文件并将其用作纹理以将其绑定到球体的体面教程。是否有任何库函数可以做到这一点？我将如何将它绑定到一个球体？我已经尝试过了，但它没有工作，没有错误，但纹理没有加载到球体上。我在 glutMainLoop() 之前使用特定文件调用 LoadTexture

这是我加载文件的代码：

```
GLuint LoadTexture( const char * filename, int width, int height )
    {
GLuint texture;
unsigned char * data;
FILE * file;

//The following code will read in our PNG file
file = fopen( filename, "rb" );
if ( file == NULL ) return 0;
data = (unsigned char *)malloc( width * height * 3 );
fread( data, width * height * 3, 1, file );
fclose( file );

glGenTextures( 1, &texture ); //generate the texture with 

glBindTexture( GL_TEXTURE_2D, texture ); //bind the texture

glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, 
GL_MODULATE ); //set texture environment parameters

//even better quality, but this will do for now.
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
 GL_LINEAR );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
 GL_LINEAR );

//Here we are setting the parameter to repeat the texture 
//to the edge of our shape. 
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, 
 GL_REPEAT );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, 
 GL_REPEAT );

//Generate the texture
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0,
 GL_RGB, GL_UNSIGNED_BYTE, data);
free( data ); //free the texture
return texture; //return whether it was successfull 
```

}

这是我创建球体的地方

```
void renderScene(void) {

// Clear Color and Depth Buffers
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

 glEnable( GL_TEXTURE_2D );
// Reset transformations
glLoadIdentity();
glBindTexture( GL_TEXTURE_2D, texture );
glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

glPushMatrix();
glTranslatef(0.0,2.0,-6);
glRotatef(angle, 0.0f, 2.0, -6.0f);
glutSolidSphere(1,50,50);
glPopMatrix();

angle+=0.4f;
glDisable(GL_TEXTURE_2D);
glutSwapBuffers();
 } 
```

我做对了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:26:55.560

您正在将压缩的 PNG 数据提供给 OpenGL。必须先解压，因为OpenGL纹理函数无法理解PNG。您可以使用一些图像库解压缩它，例如[stb_image.c](http://nothings.org/stb_image.c)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T15:29:41.953

PNG 是压缩文件，您不能只读取它们并期望 OpenGL 知道如何解码它们。加载 PNG 的推荐方法是使用[libpng](http://www.libpng.org/pub/png/libpng.html)。

这是一个使用 libpng 的[示例](http://zarb.org/~gc/html/libpng.html)，它演示了将 PNG 文件同步读入 2D 数组。OpenGL 需要一个扁平的一维数组，因此您需要自己将其扁平化，但这非常简单。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T15:53:53.427

我意识到有一百万个库被扔给你，但我强烈推荐[SOIL](http://www.lonesock.net/soil.html)。加载 png 就像

```
GLuint tex_2d = SOIL_load_OGL_texture( "img.png", SOIL_LOAD_AUTO, SOIL_CREATE_NEW_ID, SOIL_FLAG_INVERT_Y); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T15:40:45.180

我会推荐使用像[DevIL](http://openil.sourceforge.net/)这样的图像加载库，它会为你完成所有的脏活。另外我会推荐使用[现代](http://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Chapter-1%3a-The-Graphics-Pipeline.html)的 OpenGL API，但这最终是你的决定:)

# f# - F# 默认使用惰性求值吗？

> ID：13310772
> 
> 赞同：4
> 
> 时间：2012-11-09T15:21:41.713
> 
> 标签：f#, lazy-evaluation

F# 甚至有惰性求值吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T15:22:44.603

F# 默认不是惰性的（类似于 Haskell）。但是可以使用显式的惰性。请参阅MSDN 上的[惰性计算](http://msdn.microsoft.com/en-us/library/dd233247.aspx)。

# ruby - 为什么 Ruby 不支持抽象类？

> ID：13310775
> 
> 赞同：2
> 
> 时间：2012-11-09T15:21:54.003
> 
> 标签：ruby

对不起，如果它是重复的。我发现了很多关于如何实现抽象类的帖子，但是关于为什么它们没有在 Ruby 中实现。

我与 Ruby 一起工作了大约 4 年。而且我真的还是不明白为什么 Ruby 没有抽象类的本地实现？有时它对于一个好的应用程序设计是非常必要的。我和其他开发人员一次又一次地用“NoImplementedError”做空方法，但我觉得不太好。

不支持接口和抽象类背后是否有一个棘手的意识形态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:37:54.083

如果您正在考虑抽象类或接口，您很可能会考虑为您的代码创建某种契约。

但是，Ruby~~被设计为弱类型~~，而不是设计为静态类型语言，并且确实严重依赖鸭子类型。显然，在某些情况下执行接口检查可能非常有用（例如，以确保传递的对象将支持所有需要的方法），但它仍将在运行时完成，从而使该功能实际上无用。

据我记得，有一个打算创建一个类型化的版本，或者 Ruby 和 Dave Thomas 甚至提到了一个尝试过这个并告诉它效果不好的人:)

# javascript - Google Maps API，是否可以突出显示特定街道？

> ID：13310776
> 
> 赞同：11
> 
> 时间：2012-11-09T15:22:03.363
> 
> 标签：javascript, google-maps, google-maps-api-3

Google Maps API 是否可以突出显示街道？
我能找到的唯一接近这种效果的就是在它们上面画线。但这是很多工作，而且更不准确。这些线条也会越过地名。

我想要的是突出显示某些街道名称，就好像您从 a 点导航到 b 点一样。因此，例如，如果 10 条街道被街道工作人员关闭，我可以突出显示这些街道。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T10:39:48.353

这实际上可以通过使用 Maps API 方向渲染器轻松完成。
您必须提供街道起点和终点的纬度/经度坐标，渲染器会为您完成所有计算和绘制。您无需阅读方向步骤并自己绘制折线！

在此处查看实际操作：http:
[//jsfiddle.net/HG7SV/15/](http://jsfiddle.net/HG7SV/15/)

这是代码，所有的魔法都在函数 initialize() 中完成：

```
<html>
    <head>
        <style type="text/css">
            html { height: 100% }
            body { height: 100%; margin: 0px; padding: 0px }
            #map_canvas { height: 100% }
        </style>
        <script type="text/javascript"
            src="http://maps.google.com/maps/api/js?sensor=false">
        </script>
        <script type="text/javascript">
            function initialize() {
                // init map
                var myOptions = {
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

                // init directions service
                var dirService = new google.maps.DirectionsService();
                var dirRenderer = new google.maps.DirectionsRenderer({suppressMarkers: true});
                dirRenderer.setMap(map);

                // highlight a street
                var request = {
                    origin: "48.1252,11.5407",
                    destination: "48.13376,11.5535",
                    travelMode: google.maps.TravelMode.DRIVING
                };
                dirService.route(request, function(result, status) {
                    if (status == google.maps.DirectionsStatus.OK) {
                        dirRenderer.setDirections(result);
                    }
                });
            }
        </script>
    </head>
    <body onload="initialize()">
        <div id="map_canvas" style="width:100%; height:100%"></div>
    </body>
</html> 
```

如果您的街道是弯曲的，并且渲染器应该找到您不想要的快捷方式，则可以通过添加中间路点来轻松修改，以将绘制的线精确到您想要的街道：

```
 var request = {
                    origin: "48.1252,11.5407",
                    destination: "48.13376,11.5535",
                    waypoints: [{location:"48.12449,11.5536"}, {location:"48.12515,11.5569"}],
                    travelMode: google.maps.TravelMode.DRIVING
                }; 
```

# c# - C# 5.0 可选参数与方法重载

> ID：13310777
> 
> 赞同：4
> 
> 时间：2012-11-09T15:22:12.830
> 
> 标签：c#

在 C# 5.0 中的哪些情况下您会使用其中一种：可选参数与方法重载？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:25:50.667

如果函数的内部实现完全不同，则使用方法重载。否则，使用可选参数。

可选参数方法允许您编写单个测试方法，而不是为每个重载方法编写测试方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:35:44.290

我发现当我向一个已经很简单的方法添加一个开关时，我会使用一个可选参数，例如

```
public List<Stuff> GetItems (Guid stuffID, bool includeDeleted = false)
{
   //implementation
} 
```

优点是 GetItems 方法可能已经在应用程序的其他领域广泛使用，并且您不希望在每次使用时都添加参数。

当您有一个具有大量参数的方法时，可选参数会成为一个问题，并且管理哪些是可选的，哪些不是开始是一件苦差事。在这种情况下，您需要开始命名您提供的参数。我觉得有点乱

任何比上面的例子更复杂的东西都应该真正使用重载。我想不出一个我会使用多个可选参数的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:27:40.847

当您想要执行一个方法并且不让调用者指定所有参数时，应该使用可选参数。

例如。

```
private void method (int a, int b = 0){}// if B is optional 
```

当您在方法调用中更改参数的类型时，应使用方法重载。

```
private void method (double a, int b = 0){}// type of parameter a is different - use overload 
```

您可以同时使用两者，因此它不是非此即彼的。他们都有非常不同的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T15:42:06.300

我认为使用可选参数而不是重载并不重要，但我不得不说我在使用可选参数时遇到了问题，因为它们的“恒定约束”。我有一个类型的参数`DateTime`。我想使用具有以下签名的函数：

```
void AddItem(string itemCode, Datetime defaultUpdateTime = DateTime.Now 
```

但我不能这样做，因为在编译时我得到了`

> “可选参数必须是编译时常量

因此，您必须考虑通过重载，您可以使用两个不同的签名并适时地初始化参数来解决像这样的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T15:27:42.520

正如所指出的，可选参数必须位于列表的末尾。但在大多数情况下，这真的无关紧要。

有迹象表明，如此多的 .NET 类使用重载的唯一原因是因为在编写这些类时可选参数不可用。所以我通常发现可选参数比我的方法的多个版本更容易编写。

但是，再一次，我真的没有看到任何正确或错误的方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T15:28:30.720

在少数情况下，方法重载可以被可选参数替换，但它们并不完全相同。有时我们仍然需要使用方法重载，例如：

```
void Foo()
{
    Foo(DateTime.Now);
}

void Foo(DateTime dt)
{
    //do something
}

//you can't use optional parameters here because DateTime.Now is not a constant
void Foo(DateTime dt = DateTime.Now)  //compile error
{
    //do something
} 
```

对于某些情况，两者都可以，我更喜欢可选参数，因为它使代码更短更清晰。

# fancybox - 无法让 fancybox 工作 - 在新窗口中打开

> ID：13310783
> 
> 赞同：0
> 
> 时间：2012-11-09T15:22:33.557
> 
> 标签：fancybox

我一直在尝试让 fancybox 在这个免费模板中工作，昨天一个好人在 reddit 上赠送了这个模板，但我运气不佳。我在 HTML/CSS 方面表现不错，但在 Jquery 方面不太出色。如果有人能指出我正确的方向，我将不胜感激。我正试图让投资组合图像在花式框中弹出。 [http://jsfiddle.net/yz93H/1/](http://jsfiddle.net/yz93H/1/) 在此先感谢您的帮助。

```
 <script type="text/javascript">
  $(document).ready(function() {
   $("a.fancybox").fancybox();
   });
    </script>

   <figure class="entry web"> 
                <a class="fancybox" href="img/portfolio-image.jpg"><img src="img/portfolio-image.jpg" alt=""></a>
            </figure> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:30:16.620

由于所有相对路径，您发布的 jsfiddle 有点难以使用，但我注意到的一件事是您没有将 Fancybox javascript 链接到您的文档中。

应该有类似的东西：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>`
<script type="text/javascript" src="/fancybox/jquery.fancybox-1.3.4.pack.js"></script>` 
```

希望这会解决它。

**编辑**：对不起，在文档末尾错过了您的 js。再看一遍，我发现了你的问题。您发布的代码段应该**在**jQuery 加载之后出现。由于您的 jQuery 仅在文档​​末尾加载，因此您的代码正在抛出`Object #<HTMLDocument> has no method 'ready'`.

我用你发布的工作版本创建了一个新的小提琴。一切都从 CDN 加载，我使用 Twitter 的徽标作为展示：http: [//jsfiddle.net/tiagoespinha/yz93H/4/](http://jsfiddle.net/tiagoespinha/yz93H/4/)

本质上，你唯一需要的改变就是把这个

```
<script type="text/javascript">
    $(document).ready(function() {
        $("a.fancybox").fancybox();
    });
</script> 
```

在 jQuery 的脚本标签之后。

# jquery - 从 Backstretch 图像创建链接？

> ID：13310785
> 
> 赞同：3
> 
> 时间：2012-11-09T15:22:37.503
> 
> 标签：jquery, ruby-on-rails

我正在使用[Backstretch](https://github.com/srobbin/jquery-backstretch)作为在 Ruby on Rails 项目中获得一致的用户体验跨浏览器的一种方式。这些图像实际上是`SalesPage`模型的实例，并且在图像 url 旁边有一个标题和一个附加到它们的 url。

我加载图像如下：

```
- images = []
- sales_pages_images = []
- @sales_pages.each do |page|
- images << "'#{page.images.first.image.url}'"

#backgroundImageSlider
  :javascript
  var images = [#{images.join(",")}];
  $(images).each(function(){ $("<img/>")[0].src = this; });
  var index = 0;
  setInterval(function() { index = (index >= images.length - 1) ? 0 : index + 1;       $.backstretch(images[index]);}, 5000);
$.backstretch(images[index], {speed: 500}); 
```

这工作正常。除了我想将图像制作成链接的事实。我希望背景图像可点击，并将它们链接到数据库中的 url。我不是javascript英雄，所以我无法让它工作:(

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-08T20:24:16.590

尝试这个！:)

假设在您的标记中，您的`<a>`标签周围有一个标签，`<img/>`然后在您的视图中...

```
- images = @sales_pages.inject([]) do |images, sales_page|
    - images << "sales_page.images.first.image.url"

  :javascript
    $imageTag = $("img");
    $imageLink = $imageTag.parent()
    $imageTag.backstretch(#{images}, { duration: 5000, fade: 500, });
    $(window).on("backstretch.after", function (e, instance, index) {
      $imageLink.attr('href') = #{@sales_pages[index].link};
    }); 
```

# excel - 单元格中的隐藏功能

> ID：13310790
> 
> 赞同：0
> 
> 时间：2012-11-09T15:22:49.950
> 
> 标签：excel

我有一个带有一些隐藏功能的 Excel 表单。我不是 Excel 人员，所以我将其翻译成另一个程序代码，但我需要帮助来了解 Excel 如何转换日期和时间以进行算术运算。这是一个例子：

```
 Cell B5: 11/9/12
 Function           
     =B5                =0.1/24           =D2+2415018.5+E2-$B$5/24
 D2: 11/9/12    E2: 0:06:00   F2: 2456240.96 
```

所以我的问题是我不明白Excel如何在等式中转换D2和E2：D2+2415018.5+E2-$B$5/24，以便我可以用python代码编写它。

请澄清一下！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:32:11.343

我没有按照您的示例进行操作，但是您需要知道的是 Excel 将日期存储为自 1900 年 1 月**0**日以来的天数（不是错字）。一小时是一天的 1/24，一分钟是 1/24/60，等等。有关更多信息，请参阅[此](http://www.cpearson.com/excel/datetime.htm)内容。

# android - 错误生成位置值android

> ID：13310793
> 
> 赞同：1
> 
> 时间：2012-11-09T15:22:54.307
> 
> 标签：android, xml

我正在构建一个利用用户地理位置的应用程序。这个想法是，当他们导航到 DataEntry 活动时，应用程序会获取用户的位置并用字符串值填充 TextView（从原始的双纬度/经度值转换而来）。我很难让它工作，但看不出哪里出错了。当我在尝试获取位置的位置加载 DE.Java 活动时出现 NullPointerException 错误。让我相信位置值尚未初始化，但对我来说它看起来已经初始化了！

这是DE.java的相关代码

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_data_entry);

    txtBuildingName=(EditText)this.findViewById(R.id.nameContent);
    txtDescription=(EditText)this.findViewById(R.id.descriptionContent);

    txtLongitude=(TextView)this.findViewById(R.id.TextViewLong);
    txtLongitude.setText(getLongitude());

    project=(Spinner)findViewById(R.id.type_project);
    ArrayAdapter<CharSequence> adapterTwo = ArrayAdapter.createFromResource(this, R.array.type_project_array, android.R.layout.simple_spinner_item);
    project.setAdapter(adapterTwo); 
```

该`getLongitude()`方法的代码：

```
 public String getLongitude(){
     LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
     Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
     longitude = location.getLongitude();
     String longRes = String.valueOf(longitude); 
     return longRes;
 } 
```

现在该应用程序仍在开发中，所以现在我已经打开 GPS 并使用 telnet 连接和命令行中的 geo fix 命令输入了一些位置值，这就是为什么我没有实施任何检查`LocationProvider`但我将来会实施的原因。目前，可以假设 GPS 始终可用。

以下是 LOGCAT 日志的打印输出：

```
11-09 14:55:17.301: E/AndroidRuntime(546): FATAL EXCEPTION: main
11-09 14:55:17.301: E/AndroidRuntime(546): java.lang.RuntimeException: Unable to start activity ComponentInfo{application.prototype.mfb/application.prototype.mfb.DataEntry}: java.lang.NullPointerException
11-09 14:55:17.301: E/AndroidRuntime(546):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
11-09 14:55:17.301: E/AndroidRuntime(546):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-09 14:55:17.301: E/AndroidRuntime(546):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
11-09 14:55:17.301: E/AndroidRuntime(546):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
11-09 14:55:17.301: E/AndroidRuntime(546):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 14:55:17.301: E/AndroidRuntime(546):  at android.os.Looper.loop(Looper.java:137)
11-09 14:55:17.301: E/AndroidRuntime(546):  at android.app.ActivityThread.main(ActivityThread.java:4424)
11-09 14:55:17.301: E/AndroidRuntime(546):  at java.lang.reflect.Method.invokeNative(Native Method)
11-09 14:55:17.301: E/AndroidRuntime(546):  at java.lang.reflect.Method.invoke(Method.java:511)
11-09 14:55:17.301: E/AndroidRuntime(546):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-09 14:55:17.301: E/AndroidRuntime(546):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-09 14:55:17.301: E/AndroidRuntime(546):  at dalvik.system.NativeStart.main(Native Method)
11-09 14:55:17.301: E/AndroidRuntime(546): Caused by: java.lang.NullPointerException
11-09 14:55:17.301: E/AndroidRuntime(546):  at application.prototype.mfb.DataEntry.getLongitude(DataEntry.java:181)
11-09 14:55:17.301: E/AndroidRuntime(546):  at application.prototype.mfb.DataEntry.onCreate(DataEntry.java:54)
11-09 14:55:17.301: E/AndroidRuntime(546):  at android.app.Activity.performCreate(Activity.java:4465)
11-09 14:55:17.301: E/AndroidRuntime(546):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-09 14:55:17.301: E/AndroidRuntime(546):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
11-09 14:55:17.301: E/AndroidRuntime(546):  ... 11 more 
```

我也在`ACCESS_FINE_LOCATION`Manifest.XML 文件中添加了正确的和“ACCESS_COARSE_LOCATION”，这样就不会出现问题了。

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:37:19.803

这一行：

`Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);`

位置可能为空，您必须检查是否为空！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:33:06.220

如果您使用 sdk 的 vm 作为模拟器。

```
telnet localhost 5554 
```

然后通过以下方式设置模拟器的位置

```
geo fix <longitude value> <latitude value> 
```

我在 github 上有一些代码，你可以使用

[https://github.com/billmcnamara/BarcelonaTravelGuide.Android](https://github.com/billmcnamara/BarcelonaTravelGuide.Android)

# mysql - 如何将查询存储到变量中以便可以使用两次？

> ID：13310798
> 
> 赞同：0
> 
> 时间：2012-11-09T15:23:06.963
> 
> 标签：mysql, variables, optimization, select

我有以下查询，我从表中选择所有 id 进行比较，以将某些 id 过滤为“backblaze 销售订单”。我注意到每次检查报告后，它会增加 10 秒的时间。如何将该表选择为一个变量，以便我可以比较事物以提高效率，从而不会一遍又一遍地查询该表？

到目前为止，我已经使用了保罗答案中的 temp_table，但它给了我一个错误，说“无法重新打开临时表”。

```
CREATE TEMPORARY TABLE if not exists TempTable (id varchar(36)); 
INSERT INTO TempTable (id)
SELECT
   id
FROM 
   reporting.backblaze_sales_orders;
SELECT
  2011 as year,
  so.technical_address_country,
  so.technical_address_state,
  /* ALL JOBs */
  COUNT(so.id) as all_sales,
  COUNT(mf.id) as all_jobs,
  SUM(so.total_value) as all_value,
    SUM(IF(so.check_if_new_customer=1,1,0)) as sales_order_new,
  SUM(IF(so.check_if_new_customer = 1,so.total_value,0)) as total_value_new,
    SUM(IF(so.check_if_new_customer=1 AND mf.id IS NOT NULL,1,0)) as jobs_new,
    SUM(IF(so.check_if_new_customer=0,1,0)) as sales_order_existing,
  SUM(IF(so.check_if_new_customer = 0,so.total_value,0)) as total_value_existing,
    SUM(IF(so.check_if_new_customer=0 AND mf.id IS NOT NULL,1,0)) as jobs_existing,
      /* ALL JOBs */
  COUNT(so.id) as all_sales_back_blaze,
  COUNT(mf.id) as all_jobs_back_blaze,
  SUM(so.total_value) as all_value,
    SUM(IF(so.check_if_new_customer=1 AND so.id not in (SELECT id from TempTable) ,1,0)) as sales_order_new_back_blaze,
  SUM(IF(so.check_if_new_customer = 1 AND so.id not in (SELECT id from TempTable),so.total_value,0)) as total_value_new_back_blaze,
    SUM(IF(so.check_if_new_customer=1 AND  mf.id IS NOT NULL AND so.id not in (SELECT id from TempTable),1,0)) as jobs_new_back_blaze,
    SUM(IF(so.check_if_new_customer=0 AND so.id not in (SELECT id from TempTable),1,0)) as sales_order_existing_back_blaze,
  SUM(IF(so.check_if_new_customer = 0 AND so.id not in (SELECT id from TempTable),so.total_value,0)) as total_value_existing_back_blaze,
    SUM(IF(so.check_if_new_customer=0 AND mf.id IS NOT NULL AND so.id not in (SELECT id from TempTable),1,0)) as jobs_existing_back_blaze
FROM 
  sugarcrm2.so_order so 
LEFT JOIN 
  sugarcrm2.mf_job mf on so.id = mf.sales_order_id 
WHERE 
  so.date_entered > "2010-10-30" AND so.date_entered >"2011-10-30" AND
    so.technical_address_country IS NOT NULL AND  
  so.technical_address_state IS NOT NULL AND 
  so.deleted = 0 AND 
  so.has_been_promoted = 1 
GROUP BY 
    YEAR(so.date_entered),
  so.technical_address_country, 
  so.technical_address_state
ORDER BY 
  so.technical_address_country, so.technical_address_state 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:24:47.637

没有通读您的所有代码，但听起来您需要一个临时表。这些可以像这样使用：

```
CREATE TEMPORARY TABLE TempTable (id int, otherValue varchar(100)); 

INSERT INTO TempTable (id, otherValue)
SELECT
   id,
   someOtherValue
FROM .... 
```

然后使用此表而不是您的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:26:45.623

使用光标： [http ://www.brainbell.com/tutorials/MySQL/Working_With_Cursors.htm](http://www.brainbell.com/tutorials/MySQL/Working_With_Cursors.htm)

```
DECLARE ordernumbers CURSOR
   FOR
   SELECT ordernum FROM orders; 
```

这只是一个提示！我希望有人可以使用它来给出完整的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:20:49.353

答案是简单地加入该表并测试加入表的 id 是否为空。

# java - Spring ReadOnly Transaction with Propagation.SUPPORTS with WebSphere and Oracle

> ID：13310808
> 
> 赞同：1
> 
> 时间：2012-11-09T15:23:40.247
> 
> 标签：java, oracle, spring, hibernate, websphere

我在事务/会话管理方面遇到了一些问题，因为我从 Hibernate 3.6 切换到了 Hibernate 4.1.x

我使用 Spring 3.1.2、Hibernate 4.1.4、WebSphere 8.5 和 Oracle 11。

在我的 WebApp 中，我用以下方法标记了一些方法：

```
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true) 
```

这对我的使用 OpenSessionInViewFilter 和 getSessionFactory().getCurrentSession() 的 webapp 来说工作正常。

但是我的一些代码被 JMS 或 Quartz 作业调用（没有 OpenSessionInViewFilter）导致

```
org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97) 
```

在互联网上进行了一些研究后，我将我的交易更改为：

```
@Transactional(propagation = Propagation.REQUIRED, readOnly = true) 
```

现在有一个打开的会话，Tomcat 一切正常，但在 WebSphere 上出现以下错误：

```
[SqlExceptionHelper] : SQL Error: 0, SQLState: null
[SqlExceptionHelper] : DSRA9010E: 'setReadOnly' wird in der WebSphere-Implementierung  java.sql.Connection nicht unterstützt. 
```

一些帖子说，Oracle 不支持只读。但是使用 Propagation.SUPPORTS 或使用 Tomcat 它可以工作。现在我不知道该怎么办。用 Propagation.REQUIRED 和 readOnly = false 标记 JMS 调用的所有方法？

有更好的想法吗？或者这是使用 WebSphere 时 Spring 中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:40:32.013

用英文翻译错误它说：

```
DSRA9010E: 'setReadOnly' is not supported in the WebSphere implementation java.sql.Connection 
```

这不是一个错误，只是他们没有实现只读。如果使用连接池，这也是可以理解的，因为只读通常是连接创建范围的属性。

此外 readonly 只是 jdbc 提供者的“建议”：jdbc 提供者可以忽略它，据我所知，许多提供者并没有真正为它做任何事情。

只是不要指定只读。

* * *

要回答下面的 Sam 评论：Hibernate 与该错误无关，它是实现**java.sql.Connection**的 Websphere 组件在 2003 年 6 月之后将 Websphere 与 Oracle 一起使用时发出**DSRA9010E**错误，正如IBM 本身[**在此处**](http://www-01.ibm.com/support/docview.wss?uid=swg21194913)专门解释的那样代码 DSRA9010E 和说明`"'setReadOnly' is not supported on the IBM WebSphere Application Server java.sql.Connection implementation"`：

> **解决问题**
> 
> 2003 年 6 月，对 Application Server 代码缺陷 168102 进行了更改。在 2003 年 6 月之前，setReadOnly(true) 方法在 Application Server 中设置了一个内部标志，**但没有将此信息传递给 Oracle 数据库。在 2003 年 6 月之后的版本中，Application Server 会发出上述错误。**

我对整篇文章的理解是，他们后来添加了那个错误，以解决问题，作为缺陷 168102 的解决方案，为了清楚起见：让客户端知道设置该标志对底层数据库连接没有影响，因为 Oracle 是不支持它。

在文章的结尾，他们建议升级到最新版本（发出错误的版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:51:45.200

是的，Oracle 不支持只读，这个提示将被忽略，也许你会失去更多的性能。您可以删除这些标志，而是可以将其设为实体级别 @Immutable（此注释需要一点[注意](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/annotations/Immutable.html)），或者您可以更新实体字段 @column(updatable = false, insertable = false)。

# android - android，eclipse：目标SDK高于设备API版本时无法安装应用程序

> ID：13310810
> 
> 赞同：1
> 
> 时间：2012-11-09T15:23:46.053
> 
> 标签：android, target

我的应用程序的目标 sdk 版本是 14。最小 sdk 版本是 8。设备在 android 2.2 (API 8) 下运行。如果我尝试通过 Eclipse 在设备上安装我的应用程序，Android 设备选择器会告诉我，我无法在设备上安装。但是，如果我通过命令提示符安装：

```
adb install "path to apk" 
```

它工作正常。如何通过 Eclipse 安装应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:27:22.127

我假设设备选择器会为您的设备显示一个红色的“X”。我对吗？这不是问题，您仍然可以运行该应用程序。这不会阻止您运行它。

# ruby-on-rails - 在 ruby on rails 中自动设置语言环境

> ID：13310812
> 
> 赞同：11
> 
> 时间：2012-11-09T15:23:49.980
> 
> 标签：ruby-on-rails, ruby, locale

如何在 ruby​​ on rails 上自动设置语言环境？例如，如果网页是在西班牙打开的，那么 locale=es，同样，如果它是在英国，那么 locale=en 等等？

请帮帮我。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-09T15:27:22.960

你可以在你的`ApplicationController`：

```
class ApplicationController < ActionController::Base
  before_filter :set_locale

  def set_locale
    I18n.locale = extract_locale_from_headers
  end

  private

  def extract_locale_from_headers
    request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first.presence || 'en'
  end
end 
```

它将“检查”收到的请求，找到客户端浏览器的语言并将其设置为您的 I18n 语言环境。

查看有关 I18n 的[RubyOnRails 指南](http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-client-supplied-information)以获取更多说明。

* * *

我强烈建议拥有一组受支持的语言环境并**回退到默认语言环境**。像这样的东西：

```
ALLOWED_LOCALES = %w( fr en es ).freeze
DEFAULT_LOCALE = 'en'.freeze

def extract_locale_from_headers
  browser_locale = request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first
  if ALLOWED_LOCALES.include?(browser_locale)
    browser_locale
  else
    DEFAULT_LOCALE
  end
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-09T15:40:15.390

尝试使用`gem geocoder`和[i18n_data gem](https://github.com/grosser/i18n_data)并有一个 before_filter 到一个方法

```
def checklocale
  I18n.locale =  I18nData.country_code(request.location.country) 
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-09T15:32:15.193

包括这是`ApplicationController`或`BaseController`

```
before_filter :set_locale

def set_locale
  I18n.locale = params[:locale] || I18n.default_locale
end 
```

这意味着设置`locale`为默认值或使用请求中的区域设置，优先于请求中发送的区域。如果您想将此扩展到用户、会话、请求，您可以这样做。

```
def set_locale
  I18n.locale = @user.locale || session[:locale] || params[:locale] || I18n.default_locale
end 
```

更多信息[在这里](https://stackoverflow.com/questions/9263036/why-locale-setting-in-rails-is-global/9263995#9263995)类似的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T15:32:57.487

If i get what u mean, u will have to work with geolocation, get the user location based on his ip, and then set the locale based on it, but u must not forgot to set some default in case u can't get nothing of the user's ip.

Im sorry to say, but i didnt worked with geolocation on ruby yet. I did a fast research on rubygems and couldnt find any gem to simplify your work. =(

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-24T10:34:02.850

在[Rails Guide](http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-domain-name)中，将此代码包含在 ApplicationController 中

```
before_action :set_locale

def set_locale
  I18n.locale = extract_locale_from_tld || I18n.default_locale
end

# Get locale from top-level domain or return nil if such locale is not available
# You have to put something like:
#   127.0.0.1 application.com
#   127.0.0.1 application.it
#   127.0.0.1 application.pl
# in your /etc/hosts file to try this out locally
def extract_locale_from_tld
  parsed_locale = request.host.split('.').last
  I18n.available_locales.map(&:to_s).include?(parsed_locale) ? parsed_locale : nil
end 
```

本质上，这会从诸如 application.co.id 或 example.com 之类的 url 中去除最终标识符（.en、.id 等），并基于此设置语言环境。如果用户来自您不支持的语言环境，它将返回到默认语言环境 - 英语，除非另有设置。

# ios - 根据此崩溃报告，我从哪里开始寻找？

> ID：13310815
> 
> 赞同：3
> 
> 时间：2012-11-09T15:24:07.503
> 
> 标签：ios, exc-bad-access, crash-reports

我仍然是崩溃报告分析的新手，可以使用一些帮助来追踪我的问题。这是相关报告的一部分。

```
Incident Identifier: 5D510334-3888-40A6-A7C1-5AE1109BFDD4
CrashReporter Key:   b4cfc1c63d61ef3f17a53e0732f05ad768cad375
Hardware Model:      iPhone4,1
Process:         WxT [1263]
Path:            /var/mobile/Applications/E7B24747-F168-4E23-99F9-89DC23A8531C/WxT.app/WxT
Identifier:      WxT
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-11-07 21:35:25.723 -0600
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000020
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   MapKit                          0x318325d2 _contains(objc_object*, MKQuadTrieNode*) + 10
1   MapKit                          0x318325c0 -[MKQuadTrie contains:] + 20
2   MapKit                          0x3184411c -[MKAnnotationContainerView addAnnotation:] + 264
3   MapKit                          0x3185645e -[MKMapView addAnnotation:] + 46
4   WxT                             0x0009b654 -[RadarViewController dProc2addLocalStormReports] (RadarViewController.m:6234)
5   WxT                             0x00093040 -[RadarViewController download:didFinishWithData:processObject:forStation:] (RadarViewController.m:2519)
6   WxT                             0x000a67b8 -[DownloadManager connectionDidFinishLoading:] (DownloadManager.m:185)
7   Foundation                      0x3436def2 __65-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]_block_invoke_0 + 14
8   Foundation                      0x342ad9ec -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:] + 196
9   Foundation                      0x342ad908 -[NSURLConnectionInternal _withActiveConnectionAndDelegate:] + 56
10  CFNetwork                       0x370945dc ___delegate_didFinishLoading_block_invoke_0 + 24
11  CFNetwork                       0x37093cc8 ___withDelegateAsync_block_invoke_0 + 52
12  CFNetwork                       0x370bc130 ___performAsync_block_invoke_068 + 16
13  CoreFoundation                  0x3948b74a CFArrayApplyFunction + 174
14  CFNetwork                       0x370bc58e RunloopBlockContext::perform() + 70
15  CFNetwork                       0x3702015a MultiplexerSource::perform() + 186
16  CoreFoundation                  0x3951a680 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
17  CoreFoundation                  0x39519ee4 __CFRunLoopDoSources0 + 208
18  CoreFoundation                  0x39518cb2 __CFRunLoopRun + 642
19  CoreFoundation                  0x3948beb8 CFRunLoopRunSpecific + 352
20  CoreFoundation                  0x3948bd44 CFRunLoopRunInMode + 100
21  GraphicsServices                0x378592e6 GSEventRunModal + 70
22  UIKit                           0x326cb2f4 UIApplicationMain + 1116
23  WxT                             0x0008c626 main (main.m:14)
24  WxT                             0x0008c5e0 start + 36 
```

我认为这告诉我：

(1) 调用 MapKit 函数并期望引用内存中已释放的区域。线程 0，项目 0：_contains（objc_object*，MKQuadTrieNode*）

(2) 我的代码在它不应该有的时候以某种方式释放了这个内存。

（3）我的代码中导致问题的部分参考了Thread0下的4、5、6项

我是否理解正确，我应该从那里去哪里？

**编辑：** 阅读第一条评论后，我尝试将 nil 传递给 addAnnotation: 以模拟问题。当故意传递 nil 时，我会得到不同的异常类型和代码。这是生成的崩溃报告：

```
Incident Identifier: 2BC5BEB8-6295-44A1-9235-26AE060C571A
CrashReporter Key:   b4cfc1c63d61ef3f17a53e0732f05ad768cad375
Hardware Model:      iPhone4,1
Process:         WxT Pro [2689]
Path:            /var/mobile/Applications/3AE2A909-C6E5-421A-BEE9-6DCAFEAE40B6/WxT Pro.app/WxT Pro
Identifier:      WxT Pro
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  debugserver [2687]

Date/Time:       2012-11-09 12:55:11.457 -0600
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x3954529e __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x3343497a objc_exception_throw + 26
2   CoreFoundation                  0x3949d2fa -[__NSSetM addObject:] + 582
3   MapKit                          0x31844166 -[MKAnnotationContainerView addAnnotation:] + 338
4   MapKit                          0x3185645e -[MKMapView addAnnotation:] + 46
5   WxT Pro                         0x000b055c -[RadarViewController dProc2addLocalStormReports] (RadarViewController.m:6574)
6   WxT Pro                         0x000af31a -[RadarViewController dProc2processLocalStormReportListDownload:] (RadarViewController.m:6234)
7   WxT Pro                         0x000a2bfc -[RadarViewController download:didFinishWithData:processObject:forStation:] (RadarViewController.m:2721)
8   WxT Pro                         0x000c3e36 -[DownloadManager connectionDidFinishLoading:] (DownloadManager.m:185)
9   Foundation                      0x3436def0 __65-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]_block_invoke_0 + 12
10  Foundation                      0x342ad9ec -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:] + 196
11  Foundation                      0x342ad908 -[NSURLConnectionInternal _withActiveConnectionAndDelegate:] + 56
12  CFNetwork                       0x370945da ___delegate_didFinishLoading_block_invoke_0 + 22
13  CFNetwork                       0x37093cc6 ___withDelegateAsync_block_invoke_0 + 50
14  CFNetwork                       0x370bc12e ___performAsync_block_invoke_068 + 14
15  CoreFoundation                  0x3948b748 CFArrayApplyFunction + 172
16  CFNetwork                       0x370bc58e RunloopBlockContext::perform() + 70
17  CFNetwork                       0x37020158 MultiplexerSource::perform() + 184
18  CoreFoundation                  0x3951a67e __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 10
19  CoreFoundation                  0x39519f7a __CFRunLoopDoSources0 + 358
20  CoreFoundation                  0x39518cb2 __CFRunLoopRun + 642
21  CoreFoundation                  0x3948beb8 CFRunLoopRunSpecific + 352
22  CoreFoundation                  0x3948bd44 CFRunLoopRunInMode + 100
23  GraphicsServices                0x378592e6 GSEventRunModal + 70
24  UIKit                           0x326cb2f4 UIApplicationMain + 1116
25  WxT Pro                         0x00096f36 main (main.m:14)
26  WxT Pro                         0x00096edc start + 36

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3123b350 __pthread_kill + 8
1   libsystem_c.dylib               0x345ca11e pthread_kill + 54
2   libsystem_c.dylib               0x3460696e abort + 90
3   libc++abi.dylib                 0x37726d4a abort_message + 70
4   libc++abi.dylib                 0x37723ff4 _ZL17default_terminatev + 20
5   libobjc.A.dylib                 0x33434a74 _ZL15_objc_terminatev + 144
6   libc++abi.dylib                 0x37724078 _ZL19safe_handler_callerPFvvE + 76
7   libc++abi.dylib                 0x37724110 std::terminate() + 16
8   libc++abi.dylib                 0x37725594 __cxa_rethrow + 84
9   libobjc.A.dylib                 0x334349cc objc_exception_rethrow + 8
10  CoreFoundation                  0x3948bf1c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x3948bd44 CFRunLoopRunInMode + 100
12  GraphicsServices                0x378592e6 GSEventRunModal + 70
13  UIKit                           0x326cb2f4 UIApplicationMain + 1116
14  WxT Pro                         0x00096f36 main (main.m:14)
15  WxT Pro                         0x00096edc start + 36 
```

所以，我假设我没有在生产中传递零。但是，这是否意味着我的指针指向的内存已被重写，不再代表原始数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-23T01:17:02.353

您可能已经解决了这个问题，但我得到了相同的崩溃报告，并意识到我试图在无效坐标处添加注释。我的数据源（返回 JSON 的 API）给了我一个无效的纬度值。

我改变了这段代码：

```
 //add the Station object to the array
    [stations addObject:tempStation]; // <--(this eventually calls [MKMapView addAnnotation:]) 
```

...为此，添加保障措施：

```
 if (CLLocationCoordinate2DIsValid(tempStation.coordinate))
    {
        //add the Station object to the array if its coordinate is valid
        [stations addObject:tempStation];
    }
    else
    {
        //otherwise just log an error and go to the next station
        NSLog("Invalid station coordinate: stationID %d, %@, coord %f, %f", tempStation.stationID, tempStation.name, tempStation.latitude, tempStation.longitude);
    } 
```

下次我运行我的代码时，我得到了这个日志：

```
Invalid station coordinate: stationID 311, 14th St & Colorado Ave NW, coord -1345.707008, -77.032947 
```

无效数据被忽略，崩溃停止。

# jquery - 如何使用 jquery 从 xml 参数显示网格？

> ID：13310816
> 
> 赞同：2
> 
> 时间：2012-11-09T15:24:07.953
> 
> 标签：jquery, jquery-plugins

这是我的要求

1) 进行服务调用以获取 JSON 格式的数据。

2）服务结果包含很多数据字段，需要在DataGrid视图中显示。

3）接下来，我有XML文件，就像配置文件一样。在这个 xml 文件中，我定义了需要显示哪一列* *（可见或不可见）* *，该列应该使用哪种数据归档来呈现数据。基本上这个 xml 文件定义了数据网格的列属性。

例如：

```
<Columns>
        <Column name="cloumn1" visible="true" />
       <Column name="cloumn2" visible="true" />
 </Columns> 
```

* * *

请指导我，我应该遵循什么方法以及什么是最好的 Jquery datagrid API。

谢谢大家！

# sql-server - SQL 连接问题

> ID：13310818
> 
> 赞同：1
> 
> 时间：2012-11-09T15:24:17.003
> 
> 标签：sql-server, tsql

好的，所以我在产品表中有一些数据，其中包含一个类别 id 列，该列仅包含类别列表表中使用的 4 个可用字符中的 2 个。

示例：产品的类别 ID 为“AA”，但可能来自台式机 (AAA) 或服务器 (AAB) 类别。

在类别表中，我们有 3 列包含帮助我们的信息：include、atrID 和 valID。valID 列包含一个以逗号分隔的值列表（例如，“K01819”或“K00846,K00851”），这些值可能只包含一个或多个 ID。atrID 列包含一个类似的字符串（例如“A00432”）。包含列是 1 或 0，这取决于很久以前来过的程序员所做的一些工作。

基本上，他浏览了各种表，发现对于某些类别（例如 AA），我们可以从类别表中加入另一个表，并使用 atrID 和 valID 列表将其全部绑定。

例子：

产品“a”的 catID 为 AA，是台式机。这属于“AAA”类别，其中包含 0，atrI​​D 为“A00432”，valID 为“K01819”。

获取类别信息的示例 SQL：

```
SELECT cat.atrID, cat.valID, cat.[include]
FROM db.dbo.cat AS cat
WHERE cat.catID = 'AAA' 
```

然后，我会将这些变量保存在 .Net 代码中，并根据 include 的值构建 SQL。我还将拆分 valID 并将其作为单独的参数传递，从而在 SQL 服务器上执行以下代码。

```
SELECT DISTINCT prod.prodID
FROM db.dbo.prod AS prod
INNER JOIN db.dbo.atr AS atr ON atr.prodID = prod.prodID
WHERE prod.catID = 'AA'
AND atr.atrID = 'A00432'
AND atr.valID NOT IN('K01819') 
```

要为服务器更改此设置，我会将其更改`NOT IN`为`IN`服务器 (AAB) 的包含值为 1。示例：

```
SELECT DISTINCT prod.prodID
FROM db.dbo.prod AS prod
INNER JOIN db.dbo.atr AS atr ON atr.prodID = prod.prodID
WHERE prod.catID = 'AA'
AND atr.atrID = 'A00432'
AND atr.valID IN('K01819') 
```

我使用`IN`and`NOT IN`因为某些类别在 valID 列中有多个值。

我的问题是，如果我想在事先不知道的情况下获取特定产品的类别，这是否可能？（未能从您认为它所在的类别中获取所有产品的列表并将其匹配到一个或另一个列表中）。我一直在告诉我的老板我这几天都想不通，而且我什么也没有。任何帮助将不胜感激。

编辑：

我想要做的是获取任何产品的类别。我以上述 SQL 为例，说明了如何获取桌面和服务器类别的产品列表。

我想要反过来，即当我只有产品表中的两个字母类别时，从类别表中获取 3 个字母类别。

编辑2：

产品表列：
prodID varchar(40)
catID char(2)

示例行：
“S101010”、“AA”（桌面）
“S202020”、“AA”（服务器）
“S303030”、“ED”（激光打印机）
“S404040”、“ED”（喷墨打印机）

类别表列：
catID varchar(4)
description varchar(50)
include bit（实际上是一个 tinyint，应该显示我每天处理的内容 =P）
atrID varchar(6)
valID varchar(250)

示例行：
'AAA'、'Desktops'、0、'A00432'、'K01819'、
'AAB'、'Servers'、1、'A00432'、'K01819'、
'EDA'、'Laser Printers'、1、'A00172 ', 'K00846,K00851'
'EDB', '喷墨打印机', 1, 'A00172', 'K00845'

属性表列：
prodID varchar(40)
catID char(2)
atrID varchar(10)
valID varchar(10)

示例行：
“S101010”、“AA”、“A00432”、“K01817”、“
S202020”、“AA”、“A00432”、“K01819”、“
S303030”、“ED”、“A00172”、“K00846”、“S303030
” '、'ED'、'A00172'、'K00851'
'S404040'、'ED'、'A00172'、'K00845'

我上面包含的是当我知道 category.catID 时如何获取产品列表。我想要的是能够在我只有 product.prodID 和 product.catID 的情况下获取类别。

我正在追求这样的东西，但它不完整，不会按原样工作。然后我会检查 catIn.catID 和 catNotIn.catID 的结果，看看哪个不是空的，那将是我的类别，但我无法弄清楚连接。如果它甚至是可能的。而且它没有考虑具有两个以上变体的类别。

```
SELECT prod.prodID, catIn.catID, catNotIn.catID
FROM product AS prod
INNER JOIN attributes AS atr ON atr.prodID = prod.prodID
LEFT OUTER JOIN category AS catIn ON LEFT(catIn.catID, 2) = prod.catID AND catIn.atrID = atr.atrID --more conditions needed here
LEFT OUTER JOIN category AS catNotIn ON LEFT(catNotIn.catID, 2) = prod.catID AND catIn.atrID = atr.atrID --more conditions needed here 
```

我希望这能更好地解释我所追求的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:39:27.570

我首先会说您的数据模型非常糟糕。您不应该有一个逗号列表，您需要在其中进行拆分和匹配。应该是表关系。但我离题了...

因此，如果唯一的区别是您是否使用`IN`vs`NOT IN`基于的值，`include`那么如果我将其完全写在服务器上，我会这样做：

首先，为自己准备一个不错的 CSV 拆分 UDF。 [如何在单个语句中将 CSV 数据拆分并插入到新表中？](https://stackoverflow.com/questions/3265316/how-to-split-and-insert-csv-data-into-a-new-table-in-single-statement) 这是一个很好的例子——既好又简单。

然后，查询（我将其转换为存储过程）可能看起来像这样：

```
CREATE PROCEDURE SprocNameHere
@prodID INT
AS

-- I'm making assumptions about the data types here.  Fix them accordingly
DECLARE @atrID INT
DECLARE @valID varchar(MAX)
DECLARE @include BIT
DECLARE @catID varchar(50)

-- given the passed in product ID, look up @catID
SELECT @catID = catID FROM prod WHERE prodID = @prodID

SELECT @atrID = cat.atrID, @valID = cat.valID, @include = cat.[include]
FROM db.dbo.cat AS cat
WHERE cat.catID = @catID

SELECT DISTINCT prod.prodID
FROM db.dbo.prod AS prod
INNER JOIN db.dbo.atr AS atr ON atr.prodID = prod.prodID
LEFT JOIN dbo.inline_split_me(',', @valID) ism ON ism.Value = atr.valID
WHERE prod.catID = 'AA' -- is this hardcoded or should this come from the query above??  How do you convertt 'AAA' to 'AA'?  What Table/relationship/concept does this?
AND atr.atrID = @atrID
AND ((@include = 0 AND ism.Value IS NULL) OR (@include = 1 AND ism.Value IS NOT NULL)) 
```

很难确保我上面的语法是准确的，因为我没有完整的工作模型。但总体思路是：您的 UDF`inline_split_me`将记录拆分为一个“表”，然后您可以加入该表。通过使用 LEFT JOIN，如果表之间不匹配`atr`，则 ism.Value 将为空。这可以用来做`NOT IN`。反过来，`IN`模拟也是如此。

编辑 1：根据您的反馈，这是我想出的测试平台。我没有完整的数据视图，但我认为这就是您正在寻找的（或至少接近）。评论，我会调整。

鉴于您的示例数据，我在我的 tempdb 中运行了它。由于我没有 EDB 的属性记录，因此我无法确定我是否要取回我应该取回的东西。我还取回了两条记录 S303030，一条用于 Attribute 表中的每个 valID。如果您只想在 ProdID + Category.CatID 中寻找唯一性，或者如果有一块我不明白的难题，请告诉我，我会调整我的答案，您可以使用 DISTINCT 只取回一个。这适用于除 Ink Jets 之外的所有内容，因为您的示例数据在 #Category 表中没有喷墨记录。如果我用 say 伪造一个，`UNION SELECT 'S404040', 'ED', 'A00172', 'K00845'`那么它似乎有效。

```
--DROP TABLE #Product
--DROP TABLE #Category
--DROP TABLE #Attribute

--DROP FUNCTION inline_split_me

GO
CREATE FUNCTION inline_split_me (@SplitOn char(1),@String nvarchar(max))
RETURNS @results TABLE(Part NVARCHAR(MAX))
AS
BEGIN

    IF (CHARINDEX(@SplitOn,@String)-1<= 0)
        INSERT INTO @results
        SELECT @string AS Part
    ELSE
        WITH SplitSting AS
            (
            SELECT
                LEFT(@String,CHARINDEX(@SplitOn,@String)-1) AS Part
                    , CASE WHEN LEN(@String)-CHARINDEX(@SplitOn,@String) > 0 THEN RIGHT(@String,LEN(@String)-CHARINDEX(@SplitOn,@String)) ELSE NULL END AS Remainder
                WHERE @String IS NOT NULL AND CHARINDEX(@SplitOn,@String)-1>0
            UNION ALL
            SELECT
                LEFT(Remainder,CHARINDEX(@SplitOn,Remainder)-1)
                    ,RIGHT(Remainder,LEN(Remainder)-CHARINDEX(@SplitOn,Remainder))
                FROM SplitSting
                WHERE Remainder IS NOT NULL AND CHARINDEX(@SplitOn,Remainder)-1>0
            UNION ALL
            SELECT
                Remainder,null
                FROM SplitSting
                WHERE Remainder IS NOT NULL AND CHARINDEX(@SplitOn,Remainder)=0
            )
            INSERT INTO @results
            SELECT Part FROM SplitSting

RETURN
END

GO

CREATE TABLE #Product
(
    prodID varchar(40)
    , catID char(2)
)

CREATE TABLE #Category
(
    catID varchar(4)
    , description varchar(50)
    , include bit --(actually a tinyint which should go to show what I deal with on a daily basis =P)
    , atrID varchar(6)
    , valID varchar(250)
)

CREATE TABLE #Attribute
(
    prodID varchar(40)
    , catID char(2)
    , atrID varchar(10)
    , valID varchar(10)
)

INSERT INTO #Product
SELECT 'S101010', 'AA'
UNION SELECT 'S202020', 'AA'
UNION SELECT 'S303030', 'ED'
UNION SELECT 'S404040', 'ED'

INSERT INTO #Category
SELECT 'AAA', 'Desktops', 0, 'A00432', 'K01819'
UNION SELECT 'AAB', 'Servers', 1, 'A00432', 'K01819'
UNION SELECT 'EDA', 'Laser Printers', 1, 'A00172', 'K00846,K00851'
UNION SELECT 'EDB', 'Inkjet Printers', 1, 'A00172', 'K00845'

INSERT INTO #Attribute
SELECT 'S101010', 'AA', 'A00432', 'K01817'
UNION SELECT 'S202020', 'AA', 'A00432', 'K01819'
UNION SELECT 'S303030', 'ED', 'A00172', 'K00846'
UNION SELECT 'S303030', 'ED', 'A00172', 'K00851'

-- make sure it works with just one parameter
SELECT * FROM dbo.inline_split_me(',', 'K00846')

-- so you can see the split
SELECT * FROM dbo.inline_split_me(',', 'K00846,K00851')

-- so you can see the split in reference to the category
SELECT c.*, Part
FROM #Category c
OUTER  APPLY dbo.inline_split_me(',', c.valID) split

SELECT p.*, a.*, c.*
FROM #Product p
INNER JOIN #Attribute a ON a.prodID = p.prodID AND a.catID = p.catID
INNER JOIN #Category c ON c.atrID = a.atrID
    AND (
            (c.include = 0 AND a.valID NOT IN (SELECT Part FROM dbo.inline_split_me(',', c.valID)))
            OR (c.include = 1 AND a.valID IN (SELECT Part FROM dbo.inline_split_me(',', c.valID)))
        )
ORDER BY a.ProdID, a.atrID--, c.catID

DROP TABLE #Product
DROP TABLE #Category
DROP TABLE #Attribute

DROP FUNCTION inline_split_me 
```

# php - 如何将 php 响应放入 i javascript 变量中？

> ID：13310824
> 
> 赞同：-1
> 
> 时间：2012-11-09T15:24:30.340
> 
> 标签：php, javascript, json

我的服务器上有一个 .php 文档。如果我在浏览器中调用它，这会向我发送一个 JSON 字符串。现在我想把我在浏览器中得到的这个响应放入一个 JavaScript 变量中。有谁知道如何做到这一点？

MFG 约臣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:32:48.267

您正在寻找的是`XMLHttpRequest`，它可以从 JavaScript 代码发起 HTTP 请求；不要注意`XML`名称中的误导。

所有现代 JavaScript 库都提供高级函数来增强此函数的特性（例如`jQuery.ajax`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:26:44.547

尝试

```
 // 't' being the JS variable
   var t = <?php echo $json_string; ?>; 
```

如果您想要解码的字符串，您可能需要使用[json_decode 。](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:29:04.033

```
var response = <?php echo $json_echo; ?>; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T15:33:27.127

这样你就可以将 php 变量传递给 JS

```
<script> 
     var json_js = <?php echo $json_php; ?>; 
</script> 
```

# google-chrome-extension - Chrome ExtensionInstallForcelist 政策和“允许隐身”

> ID：13310826
> 
> 赞同：2
> 
> 时间：2012-11-09T15:24:36.287
> 
> 标签：google-chrome-extension

当我使用组策略 ExtensionInstallForcelist ( [http://dev.chromium.org/administrators/policy-list-3#ExtensionInstallForcelist](http://dev.chromium.org/administrators/policy-list-3#ExtensionInstallForcelist) ) 在 Google Chrome 中安装扩展程序时，确实安装了扩展程序并防止删除或禁用 - 但是，以下选项在此扩展的 Chrome 扩展页面上不再可用/可见：

> 允许在隐身
> 
> 允许打开文件中的链接
> 
> 选项

如果可能的话，我还想强制（或默认）启用“隐身允许”，但如果这不可能，我至少需要让用户能够启用此选项。对此我能做些什么吗？我相信我已经阅读了所有相关文档，但我没有找到任何东西......

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:48:06.477

这已经在这里得到了回答：[我可以在默认情况下以隐身模式运行扩展程序吗？](https://stackoverflow.com/questions/5200184/can-i-run-extension-in-incognito-mode-by-default).

我相信它[已经被请求作为功能请求](https://code.google.com/p/chromium/issues/detail?id=55058&q=incognito%20extension%20permission&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)，在那里加注或评论怎么样？

[编辑：显然这里](https://code.google.com/p/chromium/issues/detail?id=224857)还有一个开放的错误

# mongodb - 使用锂从 MongoDB 获取不同的记录

> ID：13310832
> 
> 赞同：1
> 
> 时间：2012-11-09T15:24:58.220
> 
> 标签：mongodb, find, distinct, lithium

我想从收集的“页面”中找到不同的记录。

我试过：

```
$Volume_numbers = Pages::find(array('fields'=>'DISTINCT volume_number')); 
```

我也试过：

```
 $params = array('conditions'=>array(
        'distinct' => 'pages',
        'key' => 'volume_number',
        ));
    $pageVolumes = Pages::all($params); 
```

正如 MongoDB 文档以及其中一个答案中所建议的那样。

当我尝试通过 Mongo 执行此操作时，我得到了正确的结果

```
> db.runCommand({distinct:'pages',key:'volume_number'})
 {
    "values" : [
            22,
            38
    ],
    "stats" : {
            "n" : 1084,
            "nscanned" : 1084,
            "nscannedObjects" : 1084,
            "timems" : 25,
            "cursor" : "BasicCursor"
    },
    "ok" : 1
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:50:21.537

我不相信命令中有包装`lithium\data\source\MongoDb`方法`distinct`；但是，[MongoDb](https://github.com/UnionOfRAD/lithium/blob/master/data/source/MongoDb.php)类确实构成了 PHP 驱动程序的[Mongo](http://us1.php.net/manual/en/class.mongo.php)和[MongoDB](http://us1.php.net/manual/en/class.mongodb.php)类，因此您可以执行以下操作：

```
// Where $mongodb is an instance of lithium\data\source\MongoDb
$result = $mongodb->connection->command(array(
    'distinct' => 'pages',
    'key' => 'volume_number',
)); 
```

或者，我确信 Nate Abele 会欢迎向 Lithium 提出拉取请求，以添加`distinct`对该`read()`方法的支持，就像它已经拥有的一样`group`（事实上，当前代码是实现这一点的良好起点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T02:21:42.613

这段代码对我有用！

```
$pageVolumes = Pages::connection()->connection->command(array(
    'distinct' => 'pages',
    'key' => 'volume_number',
)); 
```

结果：

```
Array
(
    [values] => Array
        (
            [0] => 22
            [1] => 38
        )

    [stats] => Array
        (
            [n] => 1084
            [nscanned] => 1084
            [nscannedObjects] => 1084
            [timems] => 3
            [cursor] => BasicCursor
        )

    [ok] => 1
) 
```

# php - 从php中的两个多选框插入表值

> ID：13310839
> 
> 赞同：-1
> 
> 时间：2012-11-09T15:25:17.403
> 
> 标签：php, mysql

我有一个带有选择框的表单，并且在将行更新到表中时插入了重复项。但现在我已将选择框更改为多选框。那么如何插入多行呢？我尝试对每行使用两次 foreach 循环。但是该逻辑的问题是我无法将一个数组中的值插入另一个 foreach 循环中。请帮忙

HTML：

```
//html
<select name="customer_groupings[]"  multiple="multiple">
<option value="-1">-All Groups-</option>
<option value="46" selected="selected">Accessories / Retailer</option>
<option value="47" selected="selected">Counter</option>
<option value="14" selected="selected">Export</option>
<option value="45">Fast Fit</option>
<option value="2">Independent</option>
<option value="44">Internal</option>
<option value="1">National</option>
<option value="19">Other</option>
</select>
<select name="penetration_group[]"  multiple="multiple">
<option value="-1">All</option>
<option value="1" selected="selected">Main Supplier</option>
<option value="2" selected="selected">Not Main Supplier</option>
<option value="3" selected="selected">New Customer</option>
</select>

// there are other form elements as well. 
```

PHP：

```
// php
/*
table contact_scripts has the following fields
ID (PK)
branch
customerGroupID
penetrationGroupID
type
message

branch,customerGroupID,penetrationGroupID,type are UNIQUE

*/
foreach ($customerGroupID as $value) {
    $q = $this->reporting->query("
        INSERT INTO
            `contact_scripts` (`branch`, `customerGroupID`, `type`, `message`)
        VALUES
            (-1, {$value}, {$type}, '{$message}')
        ON DUPLICATE KEY UPDATE
            message = '{$message}'
    ");
}

foreach ($penetrationGroupID as $value) {
    $q = $this->reporting->query("
        INSERT INTO
            `contact_scripts` (`branch`, `penetrationGroupID`, `type`, `message`)
        VALUES
            (-1, {$value}, {$type}, '{$message}')
        ON DUPLICATE KEY UPDATE
            message = '{$message}'
    ");
} 
```

显然这不是正确的做法，因此，它不能按我的意愿工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:31:27.517

我不明白你在这里问什么。为什么你需要从另一个循环访问某些东西？我在您的查询中没有看到任何暗示这一点的内容。也许您需要将一个循环移到另一个循环中？

```
foreach ($customerGroupID as $cgid) {
  ...
  foreach ($penetrationGroupID as $pgid) {
    ...
  }
} 
```

# login - Facebook 登录、注销和 cookie（PHP SDK 和 Javascript SDK）

> ID：13310842
> 
> 赞同：0
> 
> 时间：2012-11-09T15:25:42.147
> 
> 标签：login, facebook-javascript-sdk, facebook-php-sdk

这是我的问题：当用户第一次进入应用程序时没有问题......在没有检测到或被授权用户的情况下启动应用程序。申请流程如下：

1.  点击图片开始
2.  点击“参与者”按钮
3.  JavaScript SDK 未检测到用户并显示弹出安装和许可。安装：授予许可、填写表格、提交表格并重定向到评分脚本。

但是当用户退出 facebook，并从同一个 IP 重新连接另一个用户时，会发生一些不好的事情：

1.  单击图像索引（显示用户 id 0）
2.  点击“参与者”按钮：
3.  **JavaScript SDK 检测之前从同一 IP 记录**的用户 ID 。

然后脚本join.php自动将它们重定向到score.php，而score.php检测到数据库中没有有效的id（因为它们没有被授予权限，也没有提交表单），所以它重定向到index.php返回index 仍然指示用户 0：再次单击“Participar”，然后一切正常

有谁知道可能出了什么问题？下面列出了脚本和模板。

PHP文件，按顺序

1.  index.php [pastebin.com/jnCR7dqq](http://pastebin.com/jnCR7dqq)
2.  join.php [pastebin.com/YF4xBfAu](http://pastebin.com/YF4xBfAu)
3.  score.php [pastebin.com/EcjQWTy1](http://pastebin.com/EcjQWTy1)

HTML 文件，按顺序

1.  index.html [pastebin.com/WUqNQx5x](http://pastebin.com/WUqNQx5x)（索引div之间的js循环，假href）
2.  join.html [pastebin.com/Qst0JvUT](http://pastebin.com/Qst0JvUT) (js 假 a href)
3.  score.html [pastebin.com/8ns0XCQW](http://pastebin.com/8ns0XCQW)（索引div之间的js循环，假href）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:05:56.507

我遇到了几乎类似的问题，`cookies`在初始化 facebook 对象时删除属性修复了它。

改变 `$facebook = new Facebook(array('appId' => APP_ID, 'secret' => APP_PW, 'cookie' => true));`

至

`$facebook = new Facebook(array('appId' => APP_ID, 'secret' => APP_PW));`

# java - 将 ActionEvent 添加到许多 JButton

> ID：13310851
> 
> 赞同：0
> 
> 时间：2012-11-09T15:25:57.170
> 
> 标签：java, swing

我想将 ActionEvent 添加到 81 个 JButtons 我如何使用尽可能少的代码来做到这一点？我尝试使用循环来完成工作，但程序本身有问题。这是我认为足以从中获得答案的代码的一部分。

```
 public void actionPerformed(ActionEvent e) {
    if(e.getSource()==tiles[0]) {
        n=0;
        x=1;
        y=1;
        detectMines();
        setProperties(n,x,y);
    }

    if(e.getSource()==tiles[1]) {
        n=1;
        x=1;
        y=2;
        detectMines();
        setProperties(n,x,y);
    }

    if(e.getSource()==tiles[2]) {
        n=2;
        x=1;
        y=3;
        detectMines();
        setProperties(n,x,y);
    }

    if(e.getSource()==tiles[3]) {
        n=3;
        x=1;
        y=4;
        detectMines();
        setProperties(n,x,y);
     }

     if(e.getSource()==tiles[4]) {
         n=4;
         x=1;
         y=5;
         detectMines();
         setProperties(n,x,y);
     }

     if(e.getSource()==tiles[5]) {
         n=5;
         x=1;
         y=6;
         detectMines();
         setProperties(n,x,y);
     } 
```

你知道其余的，这是我在上面的代码中使用的函数，也许这将有助于解决我的问题。

```
 public void setProperties(int n, int x, int y){
     if(grid[x][y]=="1") {
         slives--;
         Icon phpicon = new ImageIcon(getClass().getResource( "resources/"+p1hp[slives] ) );
         shp.setIcon(phpicon);
         tiles[n].setIcon(icon);    
         tiles[n].setDisabledIcon(icon);
         tiles[n].setEnabled(false);
         mines=0;       
         if(slives==0){
             message = "lose";
             sendData( message );
             JOptionPane.showMessageDialog(null,"You Have No Life Left! You Lose!");
            System.exit(0);
         }
         else{
             message = "mines";
             sendData( message );
         JOptionPane.showMessageDialog(null,"BOOOOOOOOOOM!");
         }
     }

     else if(grid[x][y]=="2") {
         clives--;
         Icon phpicon = new ImageIcon(getClass().getResource( "resources/"+p2hp[clives] ) );
         chp.setIcon(phpicon);
         tiles[n].setIcon(powerups);    
         tiles[n].setDisabledIcon(powerups);
         tiles[n].setEnabled(false);
         mines=0;
         turn--;
         message = "powerups";
         sendData( message );
         JOptionPane.showMessageDialog(null,"Powerups -HP To Enemy!");
         if(turn==0){
             message = "win";
             sendData( message );
             JOptionPane.showMessageDialog(null,"You Cleared All The Mines You Win!");
             System.exit(0);
         }
     }

     else {
     str=Integer.toString(mines);
     tiles[n].setText(str);
     UIManager.getDefaults().put("Button.disabledText",Color.BLUE);
     tiles[n].setEnabled(false);
     mines=0;
     turn--;
     if(turn==0){
         message = "win";
         sendData( message );
         JOptionPane.showMessageDialog(null,"You Cleared All The Mines You Win!");
         System.exit(0);
     }
     }
 } 
```

对不起，代码墙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:03:20.627

我希望这能帮到您：

```
import java.awt.Color;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Minesweeper extends JFrame{

    JPanel panel = new JPanel();
    JButton [] button = new JButton[81];

    public Minesweeper(){
        panel.setLayout(new GridLayout(9,9));
        for(int i=0;i<81;i++){
            button[i] = new JButton(""+i);
            button[i].addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e){
                    if( e.getSource() instanceof JButton) {
                           ((JButton)e.getSource()).setBackground(Color.red);
                       }
                }
            });
            panel.add(button[i]);
        }
        add(panel);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                Minesweeper m = new Minesweeper();
                m.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                m.pack();
                m.setVisible(true);
            }
        });
    }

} 
```

![在此处输入图像描述](../Images/f8b34f401812f41fdf36c5d5f14fd79d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:32:35.027

像这样的东西怎么样：

```
public void actionPerformed(ActionEvent e) {

    for (int i = 0; i < ??; i++) {
      if(e.getSource() == tiles[i]) {
        n=i;
        x=1;
        y=i+1;
        detectMines();
        setProperties(n,x,y);
        break;
      }
    }
} 
```

where`??`替换为您的瓷砖总数。或者按照@brano88 的建议，考虑在循环中创建按钮，而不是使用与上面显示的代码类似的代码。

# javascript - 淘汰赛将 selectedItem 设置为 null

> ID：13310852
> 
> 赞同：0
> 
> 时间：2012-11-09T15:26:01.647
> 
> 标签：javascript, mvvm, knockout.js

我有这个视图模型：

```
var contactsViewModel = {
      contacts: ko.mapping.fromJS([])                                
}; 
```

它会像这样填充：

```
ko.mapping.fromJS(contactsData, dataMappingOptions, contactsViewModel.contacts);    
ko.applyBindings(contactsViewModel); 
```

映射来自一个contactItem 模型

```
var dataMappingOptions = {
     key: function (data) {
        return data.id;
     },
     create: function (options) {
         return new contactItem(options.data);
    }
}; 
```

现在我有一个 selectedItem 方法，我将它添加到视图模型中：

```
contactsViewModel.selectedItem = ko.observable(); 
```

所以我可以添加、删除、编辑等。但是当我打电话时取消：

```
contactsViewModel.cancel = function () {
    contactsViewModel.selectedItem(null);
    console.log(contactsViewModel.selectedItem());
}; 
```

我在控制台中得到空值，但我正在编辑的项目显示了我的最新更改！！？:(

**如果您希望看到更多片段：**

```
var contactItem = function (data) {
     var self = this;
     self.id = ko.observable(data.id);
     self.email = ko.observable(data.email);
     self.firstName = ko.observable(data.firstName);
     self.lastName = ko.observable(data.lastName);
     self.company = ko.observable(data.company);              
     self.reportsURL = ko.computed(function () {
          return "#/reports/contact/" + self.id;
     });
     // validations:
    ko.validation.configure({
          insertMessages : false
    });
    self.email.extend({
          required: true,
          email: true
    });
    self.firstName.extend({ required: true });
    self.lastName.extend({ required: true });
    self.company.extend({ required: true });
    self.errors = ko.validation.group(self);
}; 
```

和我的编辑方法：

```
contactsViewModel.edit = function (contact) {
    contactsViewModel.selectedItem(contact);
}; 
```

以及具有此取消的模板：

```
<script type="text/html" id="edit">
        <td class="editMode">
            <input class="span3 animated fadeInDown" data-bind="value: email, validationAlert : email " />
        </td>
        <td class="editMode">
            <input class="span2 animated fadeInDown" data-bind="value: firstName, validationAlert : firstName " />
        </td>
        <td class="editMode">
            <input class="span2 animated fadeInDown" data-bind="value: lastName, validationAlert : lastName " />
        </td>
        <td class="editMode">
            <input class="span2 animated fadeInDown" data-bind="value: company, validationAlert : company " />
        </td>
        <td class="editMode">
            <ul class="rowOptions">
                <li><a href="#" data-bind="click: $parent.save" title="Save your edits">Save<i class="icon-ok"></i></a></li>
                <li><a href="#" data-bind="click: $parent.cancel" title="Cancel editing">Cancel<i class="icon-remove-circle"></i></a></li>
            </ul>
        </td>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T01:53:24.260

当您设置 selectedItem 时，您将其设置为对您的对象的引用。因此，当您进行编辑时，它们是针对实际对象进行的。

*   一种选择是复制/克隆要编辑的对象，然后替换它。

*   另一种选择是跟踪原始数据（在映射之前）并在取消时使用它来重新创建原始数据。

*   否则，您可以使用如下技术：[http](http://www.knockmeout.net/2011/03/guard-your-model-accept-or-cancel-edits.html) ://www.knockmeout.net/2011/03/guard-your-model-accept-or-cancel-edits.html接受/取消对单个可观察对象的编辑。

# c# - SQL Server长时间运行的查询通过.Net随机超时

> ID：13310856
> 
> 赞同：4
> 
> 时间：2012-11-09T15:26:16.623
> 
> 标签：c#, .net, sql-server, timeout, sqlclient

我们有一个程序连接到我们的数据库并运行一些存储过程来获取一些数据。

数据库是 SQL Server 2008，程序在本地运行。连接是通过 TCP/IP，但启用了共享内存。并且连接字符串的超时设置为 45 秒。

当我们通过 SQL Server Management Studio 运行它们时，运行需要 0-5 秒。当我们通过代码运行它时，它会随机超时。

为了进行一些测试，我们将超时时间从 45 秒增加到几分钟。并且为了放弃任何阻塞问题，我们检查了存储过程仅“选择”数据（没有插入或更新语句）。我们已经为 select 语句尝试了几种表修饰符，例如：`nolock`, `readpast`, ...

我也检查了一下`sp_who2`，`dbcc opentran()`没有任何东西被阻止......而且.Net的SPID是`running command ...`. 有关 .Net 等待数据库答案的更多详细信息，通过 SQL Server Management Studio，我可以毫无问题地运行相同的语句（存储过程或选择）。

对正在发生的事情有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T15:37:38.983

连接字符串超时仅影响登录超时。您似乎遇到了命令超时，只能通过修改[`CommandTimeout`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout%28v=vs.80%29.aspx). 默认值为 30 秒，推荐值为 0（无限超时）。

至于为什么您的程序会随机执行缓慢，我建议您先阅读[应用程序中的慢，SSMS 中的快？了解性能奥秘](http://www.sommarskog.se/query-plan-mysteries.html)

顺便说一句，您的查询可能没有*被阻止*。它执行一个不同的计划，该计划只需要很长时间才能执行。签`last_wait_type`入[`sys.dm_exec_requests`](http://msdn.microsoft.com/en-us/library/ms177648.aspx)可能会显示 IO 等待（PAGEIOLATCH，在[sys.dm_os_workers](http://msdn.microsoft.com/en-us/library/ms178626.aspx)加入后追逐任何红鲱鱼 CXPACKET...）。但是，重复我最初链接的 Erland Sommarskog 更全面、更出色的文章是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:48:23.727

有 2 种超时：连接和查询。

如果你的查询超时，那就是查询问题；但既然你说你可以通过 SQL Server Management Studio 运行它，我怀疑它是查询。

如果您的连接超时，则很可能是网络问题。我看到您已经尝试过（锁、提示等），但您假设是导致问题的查询。试着从网络的角度来思考。我听说过 SQL Server 中的活动监视器，它可以帮助您在连接期间检测网络问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:49:58.150

如果超时来自 .net 端，则将这 2 个参数添加到连接字符串。

超时=3600000；

最大池大小=360000；

# javascript - 更改选择字段后如何清除输入类型文本？

> ID：13310860
> 
> 赞同：1
> 
> 时间：2012-11-09T15:26:37.250
> 
> 标签：javascript, html

我正在制作一个简单的注册系统，用户必须先选择州，然后再选择城市。到现在为止还挺好。我还创建了一个函数来指定两个拥有不同航运城市的州。

用户选择他居住的州，然后输入城镇。如果他选择特定的州，他会从 SELECT FIELD 中选择城市。到目前为止也很好。

每次更改选择#estado 时，我都想清除输入#cidade。

到目前为止我的javascript：

```
$(function() {
    $('#estado').change(function() {
        var typeSelected = $(this).val();
        if (typeSelected == "0") {
            $('#cidade').hide();
            $('#santacatarina').hide();
            $('#parana').hide();
        }
        else if (typeSelected == "Santa Catarina") {
            $('#cidade').hide();
            $('#santacatarina').show();
            $('#parana').hide();
        }
        else if (typeSelected == "Paraná") {
            $('#cidade').hide();
            $('#santacatarina').hide();
            $('#parana').show();
        }
        else{
            $('#cidade').show();
            $('#santacatarina').hide();
            $('#parana').hide();
        }
    }).change();
});
$(function() {
    $('#cidadesSC').change(function() {
        var typeSelected = $(this).val();
        if (typeSelected == "0") {
            $('#outraCidadeSC').hide();
        }
        else if (typeSelected == "Outra Cidade") {
            $('#outraCidadeSC').show();
        }
        else{
            $('#outraCidadeSC').hide();
        }
    }).change();
});
$(function() {
    $('#cidadesPR').change(function() {
        var typeSelected = $(this).val();
        if (typeSelected == "0") {
            $('#outraCidadePR').hide();
        }
        else if (typeSelected == "Outra Cidade") {
            $('#outraCidadePR').show();
        }
        else{
            $('#outraCidadePR').hide();
        }
    }).change();
});
//here is the function I've been trying to do the clear of #cidade
$(function() {
    $('#estado').change(function() {
        $('#cidade').clear();
    });
}); 
```

它的 HTML。它有点长：

```
<select id="estado" name="estado">
    <option value="0">Selecione</option>
    <option value="Acre">Acre</option>
    <option value="Alagoas">Alagoas</option>
    <option value="Amazonas">Amazonas</option>
    <option value="Amapá">Amapá</option>
    <option value="Bahia">Bahia</option>
    <option value="Ceará">Ceará</option>
    <option value="Distrito Federal">Distrito Federal</option>
    <option value="Espírito Santo">Espírito Santo</option>
    <option value="Goiás">Goiás</option>
    <option value="Maranhão">Maranhão</option>
    <option value="Minas Gerais">Minas Gerais</option>
    <option value="Mato Grosso">Mato Grosso</option>
    <option value="Mato Grosso do Sul">Mato Grosso do Sul</option>
    <option value="Pará">Pará</option>
    <option value="Paraíba">Paraíba</option>
    <option value="Paraná">Paraná</option>
    <option value="Pernambuco">Pernambuco</option>
    <option value="Piauí">Piauí</option>
    <option value="Rio de Janeiro">Rio de Janeiro</option>
    <option value="Rio Grande do Norte">Rio Grande do Norte</option>
    <option value="Rio Grande do Sul">Rio Grande do Sul</option>
    <option value="Rondonia">Rondonia</option>
    <option value="Roraima">Roraima</option>
    <option value="Santa Catarina">Santa Catarina</option>
    <option value="Sergipe">Sergipe</option>
    <option value="São Paulo">São Paulo</option>
    <option value="Tocantins">Tocantins</option>
</select>
<input id="cidade" type="text" style="display:none; border:2px solid blue;">

<div style="clear:both;"></div>

<div id="santacatarina" style="display:none;">
    <select id="cidadesSC" name="cidadesSC">
        <option value="0">Selecione</option>
        <option value="Araquari">Araquaria</option>
        <option value="Balneário Camboriú">Balneário Camboriú</option>
        <option value="Barra Velha">Barra Velha</option>
        <option value="Biguaçu">Biguaçu</option>
        <option value="Blumenau">Blumenau</option>
        <option value="Bombinhas">Bombinhas</option>
        <option value="Brusque">Brusque</option>
        <option value="Camboriú">Camboriú</option>
        <option value="Florianópolis">Florianópolis</option>
        <option value="Garuva">Garuva</option>
        <option value="Gaspar">Gaspar</option>
        <option value="Governador Celso Ramos">Governador Celso Ramos</option>
        <option value="Ilhota">Ilhota</option>
        <option value="Indaial">Indaial</option>
        <option value="Itajaí">Itajaí</option>
        <option value="Itapema">Itapema</option>
        <option value="Itapoá">Itapoá</option>
        <option value="Jaraguá do Sul">Jaraguá do Sul</option>
        <option value="Joinville">Joinville</option>
        <option value="Luiz Alves">Luiz Alves</option>
        <option value="Navegantes">Navegantes</option>
        <option value="Palhoça">Palhoça</option>
        <option value="Penha">Penha</option>
        <option value="Piçarras">Piçarras</option>
        <option value="Pomerode">Pomerode</option>
        <option value="Porto Belo">Porto Belo</option>
        <option value="São Francisco do Sul">São Francisco do Sul</option>
        <option value="São José">São José</option>
        <option value="Schroeder">Schroeder</option>
        <option value="Tijucas">Tijucas</option>
        <option value="Timbó">Timbó</option>
        <option value="Outra Cidade">Outra Cidade</option>
    </select>
    <p style="float:right;">Santa Catarina possuí cidades com <a href="#">Frete Grátis</a></p>
    <input id="outraCidadeSC" type="text" style="display:none; border:2px solid red;">
</div>

<div id="parana" style="display:none;">
    <select id="cidadesPR" name="cidadesPR">
        <option value="0">Selecione</option>
        <option value="Curitiba">Curitiba</option>
        <option value="Outra Cidade">Outra Cidade</option>
    </select>
    <p style="float:right;">Paraná possuí cidades com <a href="#">Frete Grátis</a></p>
    <input id="outraCidadePR" type="text" style="display:none; border:2px solid green;">
</div> 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:31:02.670

只需添加

```
$('#cidade').val(''); 
```

在更改事件处理程序的末尾`estado`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:31:41.203

```
$(function() {
    $('#estado').change(function() {
        $('#cidade').val(""); // Should set the value to nothing.
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:32:32.157

```
$(function() {
$('#estado').change(function() {
    $('#cidade').val('');  // empty the #cidade
    var typeSelected = $(this).val();
    if (typeSelected == "0") {
        $('#cidade').hide();
        $('#santacatarina').hide();
        $('#parana').hide();
    }
    else if (typeSelected == "Santa Catarina") {
        $('#cidade').hide();
        $('#santacatarina').show();
        $('#parana').hide();
    }
    else if (typeSelected == "Paraná") {
        $('#cidade').hide();
        $('#santacatarina').hide();
        $('#parana').show();
    }
    else{
        $('#cidade').show();
        $('#santacatarina').hide();
        $('#parana').hide();
    }
}).change();
}); 
```

# eclipse - 使用 STS 3.0.1 的 Tomcat 7 启动问题

> ID：13310861
> 
> 赞同：0
> 
> 时间：2012-11-09T15:26:42.173
> 
> 标签：eclipse, spring-mvc, tomcat7

我已经安装了 STS 3.0.1，并且正在关注我的书 Pro Spring MVC with Web Flow（来自 APress）。

我已将书籍/出版商提供的源代码导入 STS。我添加了 Tomcat7 服务器并选择了 Tomcat7 作为 Targeted Runtime。

我已将 Tomcat7 设置为使用 JDK 1.6。根据我的配置，STS 似乎也在使用 JDK 1.6。

我可以使用 Gradle 构建我的项目，将 war 文件移动到 webapps 文件夹，手动重新启动 Tomcat7（在 Eclipse 之外），它就会工作。

但是，从 STS 本身，当我选择 Run as -> Run on server 时，我收到以下错误：

```
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/chapter1-bookstore]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/chapter1-bookstore]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.Error: Unresolved compilation problem: 
    The method addServlet(String, DispatcherServlet) is undefined for the type ServletContext

    at com.apress.prospringmvc.bookstore.web.BookstoreWebApplicationInitializer.registerDispatcherServlet(BookstoreWebApplicationInitializer.java:49)
    at com.apress.prospringmvc.bookstore.web.BookstoreWebApplicationInitializer.onStartup(BookstoreWebApplicationInitializer.java:43)
    at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:162)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5274)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
9-Nov-2012 11:14:12 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
9-Nov-2012 11:14:12 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
9-Nov-2012 11:14:12 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 4465 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:52:09.827

问题是这个

ServletContext 类型的方法 addServlet(String, DispatcherServlet) 未定义

如果您检查 javadoc 可以看到 addServlet 方法在 JavaEE5 中不存在

[http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html) http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContext.html

这意味着您的 Tomcat7 尝试使用 Tomcat6 配置。在eclipse中打开server选项卡，双击tomcat 7安装。然后检查运行时下拉菜单是否设置为 Tomcat7。此外，您可以单击“打开启动配置”并查看库是否设置正确。如果这些都没有帮助，您可以尝试从 eclipse 中删除您的 tomcat 实例并尝试创建一个新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T01:56:14.860

我无法解释为什么，但我切换到 STS 3.1.0 而不是 Groovy/Grails Suite 3.1.0（不知道为什么一开始就使用它）。

现在，到目前为止，我所获得的教程和解释都有效。哇！

# c# - 如何使用 .net RX 组织数据处理器序列

> ID：13310865
> 
> 赞同：0
> 
> 时间：2012-11-09T15:26:44.410
> 
> 标签：c#, .net, system.reactive

使用 .net RX 组织数据处理器序列的最佳方法是什么？
- 一个。在 observable 上调用方法，例如 `observable.Do(log).Select(transformation).Do(work).Aggregate(someState)...`
- b。实现自定义观察者，如果是这样 - 如何链接它们
- c。其他选项.. 还有什么是处理 observable 本身中可能的异常的最佳选择（请参阅上面的问题）并处理 Do、Select 等内部的异常（我知道最佳实践是订阅者不应该抛出）。

此外，我有时需要允许异常作为可观察序列的某些元素返回而不停止序列（请参阅这个问题[在不停止序列的情况下处理反应式扩展中的异常](https://stackoverflow.com/q/13310557/296494)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:15:21.867

这似乎您需要一个工作流程而不是 Rx。似乎基于您的其他问题*您正在尝试采用看起来非常适合 ProducerConsumer 排队工作流程场景的内容，并将其强制放入 Rx。

看起来像你

*   想要从队列中读取并阻塞，直到收到一个值，然后重新订阅。只需使用 BlockingCollection 的排队功能。当值到达时，它们可以从任何线程推送到集合中。
*   不希望实际上有一个值序列，而是一个可能在任何给定值上失败的工作流，转移它然后处理下一个值。只需使用队列。处理每个值并将结果放入下一个适当的队列（失败/成功）->参见[企业集成模式](http://www.eaipatterns.com/)，特别是无效的消息通道和死信通道。
*   可能并行处理这些值。请参阅 BlockingCollection.GetConsumingEnumerable 或[Disruptor](https://github.com/odeheurles/Disruptor-net)以获得高性能实现。使用这些工具，您可以拥有许多生产者和消费者。当然，你可以用 Rx 做到这一点，但它只是轮询和绑定一个线程。我认为最好明确说明这种事情

我认为您对 Rx 的使用应该为自己付出代价，并且您不应该发现自己与它抗争（就像任何其他技术或框架一样）。

*其他问题，例如 [在不停止序列的情况下处理响应式扩展中的异常](https://stackoverflow.com/questions/13310557/handling-exceptions-in-reactive-extensions-without-stopping-sequence) 以及 [如何将 Observable 序列化到云端并返回](https://stackoverflow.com/questions/13311386/how-to-serialize-observables-to-the-cloud-and-back)

# javascript - Javascript mousemove 空事件处理程序泄漏内存？

> ID：13310867
> 
> 赞同：3
> 
> 时间：2012-11-09T15:26:51.133
> 
> 标签：javascript, memory-leaks, event-handling, addeventlistener, event-listener

我正在通过以下方式使用事件侦听器/处理程序：

```
 var _builder_canvas = document.getElementById("Builder");

    mouseMove = function() {
    }

    initBuilder = function( ) {
         // Add mouse listener events
         _builder_canvas.addEventListener( 'mousemove', mouseMove, true);
    } 
```

使用主文档的 onload 处理程序调用“initBuilder”。

即使使用上面的空函数，当我在 Chrome (23.0.1271.64) 或 FF (16.0.2) 中运行此代码时，每次鼠标移动时都会分配内存，并且永远不会释放。

我知道您总是需要删除事件侦听器以避免内存泄漏，但是当它是 mousemove 处理程序时如何做到这一点？处理程序需要在页面打开的整个过程中处于活动状态。

我还注意到，以类似的方式为 mouseup 或 mousedown 添加侦听器/处理程序不会导致任何额外的内存分配。

我在这里错过了一些基本的东西吗？任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:19:23.853

如果您使用 devtools > 时间线记录内存使用情况，您会看到在触发事件后内存已被很好地释放。

# c# - 如何根据实际时间检查用户的系统时间并有条件地更新它？

> ID：13310875
> 
> 赞同：0
> 
> 时间：2012-11-09T15:27:01.083
> 
> 标签：c#, datetime, windows-8, windows-runtime, winrt-async

我如何检查用户的系统时间（简单）与“实时”时间（他们的时间可能设置错误），然后通知他们并提议将他们的系统时间更新为实际时间，然后这样做？

IOW，伪代码：

```
DateTime dtSet = DateTime.Now;
DateTime dtActual = GetActualTime();
if (dtSet != dtActual) // allow some delta, such as anything under a 1 minute variance)
{
  if (UserAllowsChange())
  {
    ChangeTheTimeTo(dtActual);
  }
} 
```

也许野田时间在我的未来。我情不自禁，但每次看到这个名字，我都会想起 Don Williams/Eric Clapton 的歌曲。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:34:21.353

进程必须有权`SE_SYSTEMTIME_NAME`设置系统时间。Windows 应用商店应用永远不会拥有此权限。Windows 应用商店应用在称为应用容器的沙盒中运行，并且在与系统其余部分交互的方式上受到限制。

来自具有足够权限的普通桌面应用程序，[`SetSystemTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724942.aspx)可用于设置系统时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:43:11.393

除了 James McNellis 的回答...DateTime.Now 使用本地系统时间。您需要连接到网络时间服务器 (NTS) 以获得“实时”时间。然后，您可以将来自 NTS 的响应解析为 DateTime 结构，并与 DateTime.Now 进行比较。

如果它们不匹配，那么您可以使用[SetSystemTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724942.aspx)（如果您有权限）来设置 NTS 给出的时间。

请记住，例如您获得 NTS 响应，解析它，然后设置系统时间，新的本地系统时间仍然是错误的，因为在获得 NTS 响应和设置系统时间之间经过了一段时间。

您可能需要考虑使用 Timespan 或 Stopwatch 之类的东西来监控在获取 NTS 响应和设置系统时间之间经过的时间。将此添加到 NTS 响应中应该会给出更准确的结果。

检查一下（连接到 NTS）

[http://www.codeproject.com/Articles/17851/Connecting-To-A-Network-Time-Server](http://www.codeproject.com/Articles/17851/Connecting-To-A-Network-Time-Server)

[http://www.dotnet-snippets.com/dns/c-simple-network-time-ntp-protocol-client-SID571.aspx](http://www.dotnet-snippets.com/dns/c-simple-network-time-ntp-protocol-client-SID571.aspx)

# php - 简单的 TRUE 代码转换为 FALSE

> ID：13310876
> 
> 赞同：-4
> 
> 时间：2012-11-09T15:27:05.403
> 
> 标签：php, false-positive

我知道我应该解释很多，但这太简单了，我什至不明白为什么我不能把它做对。

这段代码应该是 FALSE 而不是 TRUE；

```
if ($ip == $yourip && $ban == 1) 
```

我试过这个：

```
if (!$ip == $yourip && !$ban == 1) 
```

和这个...

```
if ($ip != $yourip && $ban != 1) 
```

没有运气？我只是需要它与它的本质相反。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:31:13.157

更多括号！

```
if (!($ip == $yourip && $ban == 1)) 
```

那应该只是否定整个布尔值。问题是`!$ip`试图否定之类的东西`$ip`，这（希望）不是布尔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:29:06.257

```
if ($ip != $yourip || $ban != 1) 
```

# ios - 如何缩放填充屏幕的 UIImageView

> ID：13310882
> 
> 赞同：0
> 
> 时间：2012-11-09T15:27:18.450
> 
> 标签：ios, uiscrollview, uiimageview, uiimage, zooming

我只是想缩放我在 UIScrollView 上的 UIImageView 上设置的照片。也许是因为图像与屏幕大小相同，但在我下面的代码中既没有`viewForZoomingInScrollView`也没有`scrollViewDidZoom`被调用。请帮我解决这个问题，以便我可以放大图像。谢谢：

界面：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIScrollViewDelegate>

@property (strong, nonatomic) UIScrollView* scrollView;
@property (strong, nonatomic) UIImageView *imageHolder;

@end 
```

执行：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];

// Tell the scroll view the size of the contents
self.scrollView.contentSize = self.view.frame.size;

self.scrollView.delegate = self;
self.scrollView.scrollEnabled = YES;

_imageHolder = [[UIImageView alloc]initWithFrame:self.view.frame];
_scrollView = [[UIScrollView alloc]initWithFrame:self.view.frame];

[self.imageHolder setImage:[UIImage imageNamed:@"P1020486.png"]];

[self.scrollView addSubview:_imageHolder];
[self.view addSubview:self.scrollView];

//Keep the proportion and fit the screen, not filling it --> when we rotate, resizes image correctly:
_imageHolder.contentMode = UIViewContentModeScaleAspectFit;
}

- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];

// Set up the minimum & maximum zoom scales
CGRect scrollViewFrame = self.scrollView.frame;
CGFloat scaleWidth = scrollViewFrame.size.width / self.scrollView.contentSize.width;
CGFloat scaleHeight = scrollViewFrame.size.height / self.scrollView.contentSize.height;
CGFloat minScale = MIN(scaleWidth, scaleHeight);
//
self.scrollView.minimumZoomScale = minScale;
self.scrollView.maximumZoomScale = 1.0f;

[self centerScrollViewContents];
}

- (void)centerScrollViewContents {
CGSize boundsSize = self.scrollView.bounds.size;
CGRect contentsFrame = self.imageHolder.frame;

if (contentsFrame.size.width < boundsSize.width) {
    contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
} else {
    contentsFrame.origin.x = 0.0f;
}

if (contentsFrame.size.height < boundsSize.height) {
    contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
} else {
    contentsFrame.origin.y = 0.0f;
}

self.imageHolder.frame = contentsFrame;
}

#pragma mark - UIScrollViewDelegate

- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
// Return the view that we want to zoom
return self.imageHolder;
//return self.scrollViewBar;
}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView {
// The scroll view has zoomed, so we need to re-center the contents
[self centerScrollViewContents];
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:05:30.283

我没有时间测试它，但我认为问题出在这一行：

```
self.scrollView.maximumZoomScale = 1.0f;
```

尝试放在那里 2.0f 或更大的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T18:08:45.933

通过快速查看您的代码，您似乎在初始化之前在 scrollView 上设置属性：

```
self.scrollView.contentSize = self.view.frame.size;

self.scrollView.delegate = self;

self.scrollView.scrollEnabled = YES;

_scrollView = [[UIScrollView alloc]initWithFrame:self.view.frame]; 
```

如果您颠倒顺序，它应该可以工作。

# javascript - ASP.NET：如何使 onClientClick 在回发之前完成工作？

> ID：13310883
> 
> 赞同：2
> 
> 时间：2012-11-09T15:27:18.513
> 
> 标签：javascript, asp.net, ajax, onclick, onclientclick

我有这样的控制：

```
<asp:Button ID="save_all_filt" runat="server" Text="All data for filtered subjects"
        OnClientClick="  a= saveAllFilt(); return true; "   onclick="save_all_filt_Click" /> 
```

saveAllFilt 包含一个 JQuery ajax 调用。所以我在日志中看到的是，我同时启动了回发和 saveAllFilt。然而，回发“延迟”并且在 Ajax 调用 saveAllFilt fninshes 之前什么也不做。

我想知道是否有这样的方法： 1\. onClientClick，系统进入 saveAllFilt JS 函数并以某种方式等待（！）直到 Ajax 函数以这种或那种方式完成。2\. 只有完成后，才会开始真正的回发。

我确实意识到 JQuery ajax 调用是事件驱动和异步的。只是想阻止这些回发操作直到它完成（AJAX 调用为通过服务器回发发生的检索准备数据。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:29:43.263

将jQuery AJAX 配置对象的[`async`属性](http://api.jquery.com/jQuery.ajax/)`false`设置为：

```
$.ajax({
    /* ... */
    async : false
    /* ... */
}) 
```

# c# - 附加两个pdf文件

> ID：13310890
> 
> 赞同：1
> 
> 时间：2012-11-09T15:27:26.480
> 
> 标签：c#, .net, visual-studio, pdf

如何使用 C# 将新的 pdf 文件附加到旧的文件中？我需要一个外部库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:33:30.090

you can use iTextSharp library, here is an example: [http://www.codeproject.com/Articles/28283/Simple-NET-PDF-Merger](http://www.codeproject.com/Articles/28283/Simple-NET-PDF-Merger)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:35:08.467

There is no built in support for manipulating pdf files within the .net framework. You can roll your own (a world of pain), or use an existing pdf library link [iTextdotNet](http://www.ujihara.jp/iTextdotNET/en/). I have not used iTextdotNet, but have used the iText(java) library it is derived from with success.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T15:32:09.270

是的，您不会使用 .NET 开箱即用。您可以查看[http://itextpdf.com/](http://itextpdf.com/)或其他一些商业库。那里有一些开源作品，您可能需要查看[http://www.pdfsharp.net/](http://www.pdfsharp.net/)。我在 .NET 中使用的不多，但值得一看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T15:46:56.143

也可以使用 Adob​​e Acrobat，但它不能很好地自动化。如果您拥有它并且已经付款，请尝试一下。如果您要购买东西，那么我不推荐 Adob​​e Acrobat（用于自动化）。

# macos - 在 Mac 上的 Excel 2011 中使用 VBA 用户表单（在 Windows 中编程）：文本框不起作用

> ID：13310893
> 
> 赞同：1
> 
> 时间：2012-11-09T15:27:33.657
> 
> 标签：macos, excel, vba, textbox

我在 Excel 中创建了一个包含多个文本框的用户表单（在 Windows 中，使用没有 ActiveX 控件的 VBA）。当用户输入行号并按下按钮时，这些文本框旨在显示该行中特定单元格的文本。这在 Windows 中运行良好，但是当我尝试在 Mac 上使用 Excel 2011 上的用户表单时，其中一个文本框无法正确显示文本 - 相反，它变得可见但只是空白。

表单上的其他文本框工作正常，不显示的文本最初由 Thunderbird 导出并包含电子邮件消息。我知道我正在拉入正确的单元格，因为当我将“MsgBox（emailtext）”添加到我的代码时，会弹出一个消息框，其中包含我要显示的文本 - 它只是不会出现在文本框中！我想知道这是否是某种字符编码问题。我已经将变量（“emailtext”）定义为字符串，然后简单地为其分配了我想要的单元格的值（“emailtext = Sheet2.Cells(rownumber, 7)”）。正如我所说，这种方法适用于下一列，其中包含直接输入到 excel 中的文本并且不包含任何奇怪的字符。关于如何显示此文本的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-10T19:41:28.030

```
With Textbox1
    .Locked = False
    .Text = Sheet2.Cells(rowNum, 7).Text
    .Locked = True
End With 
```

无法在 Excel for Mac 2011 中使用 VBA 设置锁定的用户窗体文本框的文本。这不适用于我测试过的所有其他版本的 Excel（PC 2007-2016 的 Excel 和 Mac 2016 的 Excel）。奇怪的！

# javascript - Soundcloud 身份验证/连接 javascript 问题

> ID：13310896
> 
> 赞同：0
> 
> 时间：2012-11-09T15:27:35.107
> 
> 标签：javascript, jquery, api, soundcloud

```
<script src="http://connect.soundcloud.com/sdk.js"></script>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script>
// initialize client with app credentials
SC.initialize({
  client_id: 'bea6b4a2c1108a4cfa99f0d40966108a',
  redirect_uri: 'http://www.samplewars.com/'
});

// initiate auth popup
SC.connect(function() {
  SC.get('/me', function(me) { 
    alert('Hello, ' + me.username); 
  });
});
</script>

Unsafe JavaScript attempt to access frame with URL http://samplewars.com/soundcloud/ from frame with URL http://www.samplewars.com/soundcloud/?code=77c9dc160d723a52f67d42a89067848e&state=SoundCloud_Dialog_80886#access_token=1-26934-195352-78151464de9a2ec39&scope=non-expiring. Domains, protocols and ports must match. 
```

我在我的 chrome 控制台中收到此错误，而在 FF 中，它只是不断循环通过允许过程而不会发出警报。

有趣的是，它工作了一秒钟，然后我去喝一杯，回来，它坏了。

编辑：它也保留在弹出窗口内，而不是关闭到原始窗口编辑 2：它实际上还在应用程序的连接菜单中添加了 soundcloud 内部的权限。只是不吐出警报。

编辑 3：好的，在我添加了一个 onclick 事件以阻止它不断循环通过 js 之后，它现在可以在 FF 中使用。所以现在代码是：

```
<script src="http://connect.soundcloud.com/sdk.js"></script>
<script>
// initialize client with app credentials
SC.initialize({
  client_id: 'bea6b4a2c1108a4cfa99f0d40966108a',
  redirect_uri: 'http://www.samplewars.com/'
});

// initiate auth popup
function connectSC(){
SC.connect(function() {
  SC.get('/me', function(me) { 
    alert('Hello, ' + me.username); 
  });
});
}
</script>
<div id="connect_button" onClick="connectSC()">
connect to soundcloud
</div> 
```

它适用于 FF，但不适用于 Chrome 或 IE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:56:11.727

有趣的因素。如果您尝试使用不带 www 的 URL 进行连接，我发现了问题。作为前缀，它不起作用。Soundcloud 必须要求它才能构建令牌

# jquery - 如何使用jQuery在按钮中设置默认图标

> ID：13310900
> 
> 赞同：0
> 
> 时间：2012-11-09T15:27:49.990
> 
> 标签：jquery, jquery-ui, jsp, button, icons

我在 jsp 中使用 jQuery 1.8.2、jQuery ui 1.9.1、Firefox 16.0.1，我试图获得一个按钮来显示一个图标。我尝试的是：

```
$('button').button({ icons: {primary: "ui-icon-triangle-1-s" } }); 
```

在 div 中：

```
<div id="buttonDiv" style="text-align: center;"> <button class="btn-primary"  type="button" id="confirmationButton" value="confirm">Confirmation</button> </div> 
```

然后我尝试使用一个 id、一个类、将类型设置为按钮等...，但由于某种原因它没有显示。

我知道，如果我尝试将按钮设为输入按钮，那么设计和使用时将无法正常工作

`$('button').button()` 等等..作为选择器它工作正常。

这是我的 CDN 声明：

```
<!-- Reference the theme's stylesheet on the Google CDN -->
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/themes/ui-lightness/jquery-ui.css" rel="stylesheet" type="text/css"/>

    <!-- Reference jQuery and jQuery UI from the CDN. Remember that the order of these two elements is important -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js" type="text/javascript"></script> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:37:44.677

你确定你没有错过任何其他资源吗？您是否包含了所需的 CSS 和图像？

具体 jquery-ui.css ： [http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css) 和[http://code.jquery.com/ui/1.9.1/themes /base/images/ui-icons_222222_256x240.png](http://code.jquery.com/ui/1.9.1/themes/base/images/ui-icons_222222_256x240.png)

**编辑：**

使用您的脚本标签，我很快就写了下来，它可以工作。

```
<!doctype html>
    <html>
    <head>
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/themes/ui-lightness/jquery-ui.css" rel="stylesheet" type="text/css"/>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js" type="text/javascript"></script>
        <script type="text/javascript">
        $(document).ready(function(){
            $('button').button({ icons: {primary: "ui-icon-triangle-1-s" } });
        });
        </script>
        </head>
    <body>
        <div id="buttonDiv" style="text-align: center;"> <button class="btn-primary"  type="button" id="confirmationButton" value="confirm">Confirmation</button> </div>
    </body>
    </html> 
```

# mysql - 选择回退到基本项目的查询

> ID：13310906
> 
> 赞同：-1
> 
> 时间：2012-11-09T15:28:08.083
> 
> 标签：mysql, select

我确信有办法做到这一点，但我不知道怎么做。

我有一个分类项目表：

```
table items
(
    item_name
    id_category
)
- item list -
"Item one", 1
"Item two", 2
"Item three", 3

table service
(
    service_name
    exclusive
    id_category
)
- service list -
"Basic service", 0, null
"Advanced service", 1, null
"Super service", 1, 2 
```

我需要在服务表上进行选择以查找特定于给定项目的服务。它应该始终返回非排他性且非特定类别的服务。当 id_category 为空时，它还应该只返回与其类别相关的独家服务。

所以“项目一”的查询应该返回

```
Basic Service
Advanced Service 
```

并且“第二项”应该返回

```
Basic Service
Super Service 
```

谁能帮我这个 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:44:37.753

你需要一个 UNION

```
(SELECT `service_name` FROM `service` WHERE `exclusive`='0')
UNION
(SELECT IFNULL(`service`.`service_name`,(SELECT `service_name` FROM `service` WHERE `exclusive`='0' AND `id_category` IS NULL)) FROM `items` LEFT JOIN `service` ON `items`.`id_category`=`service`.`id_category` WHERE `items`.`name`='Item one') 
```

第二个查询中的 WHERE 子句可能不同。我假设您正在按项目名称搜索

# android - 如何在android中从以下Json响应中获取值

> ID：13310909
> 
> 赞同：0
> 
> 时间：2012-11-09T15:28:12.190
> 
> 标签：android, json

我得到这样的 Json 响应，

```
{
    "data": {
        "id": "1",
        "name": "General Knowlege Questions",
        "description": "This questions will test your General ",
        "questions": [
            {
                "id": "1",
                "text": "Who invented the BALLPOINT PEN?",
                "type": "2",
                "answers": [
                    {
                        "id": "1",
                        "text": "Biro Brothers"
                    },
                    {
                        "id": "2",
                        "text": "Waterman Brothers"
                    },
                    {
                        "id": "3",
                        "text": "Bicc Brothers"
                    },
                    {
                        "id": "4",
                        "text": "Write Brothers "
                    }
                ]
            },
            {
                "id": "2",
                "text": "What J. B. Dunlop invented?",
                "type": "2",
                "answers": [
                    {
                        "id": "5",
                        "text": "Pneumatic rubber tire"
                    },
                    {
                        "id": "6",
                        "text": "Automobile wheel rim"
                    },
                    {
                        "id": "7",
                        "text": "Rubber boot"
                    },
                    {
                        "id": "8",
                        "text": "Model airplanes"
                    }
                ]
            },
            {
                "id": "3",
                "text": "Which scientist discovered the radioactive element radium?",
                "type": "2",
                "answers": [
                    {
                        "id": "9",
                        "text": "Isaac Newton"
                    },
                    {
                        "id": "10",
                        "text": "Albert Einstein"
                    },
                    {
                        "id": "11",
                        "text": "Benjamin Franklin"
                    },
                    {
                        "id": "12",
                        "text": "Marie Curie"
                    }
                ]
            },
            {
                "id": "4",
                "text": "What now-ubiquitous device was invented by Zenith engineer Eugene Polley in 1955?",
                "type": "1",
                "answers": [
                    {
                        "id": "13",
                        "text": "Microwave oven"
                    },
                    {
                        "id": "14",
                        "text": "Remote control"
                    }
                ]
            },
            {
                "id": "5",
                "text": "What Benjamin Franklin invented?",
                "type": "1",
                "answers": [
                    {
                        "id": "15",
                        "text": "Bifocal spectacles"
                    },
                    {
                        "id": "16",
                        "text": "Radio"
                    }
                ]
            }
        ]
    }
} 
```

我可以使用以下代码从此响应中获取所有数据，不幸的是我无法显示适合问题的答案集。

我的代码片段是，

```
public void getQuestions(String survey_response) {
    try {
        JSONObject first_obj = new JSONObject(survey_response);
        String data_stirng = first_obj.getString("data");
        JSONObject sub_obj = new JSONObject(data_stirng);
        String name_val = sub_obj.getString("questions");
        JSONArray questions_array = new JSONArray(name_val);
        for (int i = 0; i < questions_array.length(); i++) {
            JSONObject qus_elements = questions_array.getJSONObject(i);
            QUESTION_ID = qus_elements.getString("id");
            QUESTION_TEXT = qus_elements.getString("text");
            QUESTION_TYPE = qus_elements.getString("type");
            String answers_val = qus_elements.getString("answers");
            JSONArray ans_array = new JSONArray(answers_val);
            Log.v("Answers Array Values", ans_array + "");
            for (int j = 0; j < ans_array.length(); j++) {

                JSONObject ans_elements = ans_array.getJSONObject(j);
                ANSWERS_ID = ans_elements.getString("id");
                ANSWERS_TEXT = ans_elements.getString("text");
                answers_id.add(ANSWERS_ID);
                answers_text.add(ANSWERS_TEXT);
            }

            ques_id.add(QUESTION_ID);
            ques_text.add(QUESTION_TEXT);
            ques_type.add(QUESTION_TYPE);
        }
        // Log.v("QUESTION ID ARRAY", ques_id + "");
        // Log.v("QUESTION Text ARRAY", ques_text + "");
        // Log.v("QUESTION type ARRAY", ques_type + "");
        Log.v("ANSWERS ID ARRAY", answers_id + "");
        Log.v("ANSWERS TEXT ARRAY", answers_text + "");

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

我需要像这样显示这个响应，我不知道如何以这种格式显示一组问题和答案。

![sktech](../Images/038edca3123d29cb6d839922fb345508.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:47:22.490

只需像这样使用两个豆子：问题：

```
public class Question {
  private int id;
  private String text;
  private int type;
  private ArrayList<Answer> answers = new ArrayList<Answer>();

  public Question( int id, String text, int type, ArrayList<Answer> answers) {
     this.id = id;
     this.text = text;
     this.type = type;
     this.answers = answers;
  }
  //TODO Getters and Setters
} 
```

回答 ：

```
public class Answer {
  private int id;
  private String text;

  public Answer(int id, String text) {
     this.id = id;
     this.text = text;
  }
  //TODO Getters and Setters
} 
```

在您解析问题和答案时，请执行以下操作：

```
ArrayList<Question> listQuestions = new ArrayList<Question>();

    JSONArray questions_array = sub_obj.getJsonArray("questions");
            for (int i = 0; i < questions_array.length(); i++) {
                JSONObject jsonQuestion = questions_array.getJSONObject(i);
                Question q = new Question();
                q.setId(jsonQuestion.optInt("id",-1));
                q.setText(jsonQuestion.optString("text",null));
                q.setType(jsonQuestion.optInt("type",-1));
                JSONArray ans_array = jsonQuestion.getJsonArray("answers");
                Log.v("Answers Array Values", ans_array + "");
                for (int j = 0; j < ans_array.length(); j++) {

                    JSONObject jsonAnswer = ans_array.getJSONObject(j);
                    Answer a = new Answer();
                    a.setId(jsonAnswer.optInt("id",-1);
                    a.setText(jsonAnswer.optString("text"),null);
                    q.getAnswers().add(a);
                }

                listQuestions.add(q);
            } 
```

然后你就拥有了所有`Questions`的`listQuestions`; 你所要做的就是添加一个循环`For`，你会得到你的问题，每个问题都有自己的答案，`q.getAnswers()`如下所示：

```
for(int l = 0; l< listQuestions.size(); l++ ){
   Question currentQuestion = listQuestions.get(l);
   Log.i("QCMActivity", "the Question : "+currentQuestion.getText());
   ArrayList<Answer> answersOfCurrentQuestion = currentQuestion.getAnswers();
   Log.i("QCMActivity", "Answers : ");
   for( int k = 0; k< answersOfCurrentQuestion.size(); k++) {
       Answer currentAnswer = answersOfCurrentQuestion.get(k);
       Log.i("QCMActivity", "Option "+(k+1)+" : "+currentAnswer.getText());
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:03:05.760

您可以做几件事来实现这一目标。

1.  有一个简单的模型类，比如

    ```
    类条目{
        字符串问题；
        字符串 [] 选项；
    }
    //将所有已解析的条目保存到数组列表中
    ArrayList 条目；

    ```

2.  为了制作 UI，现在您可以迭代每个“条目”并使用文本视图和单选按钮显示选项。- 所以你可以管理整个问题'要么在一个视图组中，要么有单独的导航

# iphone - 在 iOS 上存储 .sqlite 数据库的位置

> ID：13310910
> 
> 赞同：3
> 
> 时间：2012-11-09T15:28:14.907
> 
> 标签：iphone, core-data

在我的应用程序中，我通过 CoreData 检索、解析 XML 数据并将其保存到 sqlite 数据库。此数据对于应用程序的操作至关重要，并且需要离线使用。我的最低目标是 iOS 4.3

这不是用户生成的，因此我无法将其存储在**/Library/Documents**

*   iOS 5.0 不支持将文件标记为“不备份”的扩展属性，因此，**/tmp**和**/Library/Caches**之外的任何内容都会被备份。

来源：[https ://developer.apple.com/library/ios/#qa/qa1719/_index.html](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)

因此，我别无选择，只能将数据存储在 /Library/Caches 文件夹中。iOS 可能随时清除此目录。

**这是否意味着每当我的应用程序下载新数据（通过 xml）并使用...保存时，** `[managedObjectContext save:&error]` 我 **首先必须检查 MyData.sqlite 是否仍然存在？**

如果没有，那么我将需要“恢复”CoreData 堆栈，然后提醒任何其他可能需要获取新指针的对象，或者修改它的 managedObjectContext 的 persistentStoreCoordinator。

这个解决方案似乎不对，但是基于不支持“不备份”的 iOS 5.0、Apple 的数据存储指南以及清除 /Libraray/Caches 目录的工作方式，我不知道还有其他选择。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-31T18:20:08.370

Nick Lockwood 的精彩 StandardPaths 库[有意见](https://github.com/nicklockwood/StandardPaths/blob/b55e79a5cba25a47b55454575ce90f90f39972d7/StandardPaths/StandardPaths.m#L147-L178)；这个库按照惯例存储应用程序私有、不被修剪、不备份、持久性跨应用程序更新数据`Library/Application Support/Offline Data`。

不过，您是对的，对于 iOS 5.0 及更早版本，任何阻止文件备份的尝试都将无效。

在 iOS 5.0.1 上，备份预防实现如下（[来源](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)）：

```
const char *filePath = [[fileURL path] fileSystemRepresentation];
const char *attrName = "com.apple.MobileBackup";
u_int8_t attrValue = 1;
setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0); 
```

在 iOS 5.1 及更高版本上，备份预防实现如下（[来源](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)）：

```
[fileURL setResourceValue: [NSNumber numberWithBool: YES]
                   forKey: NSURLIsExcludedFromBackupKey
                    error: &error]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-04-19T10:15:11.760

数据库数据库.H

```
 #import <Foundation/Foundation.h>
   #import <sqlite3.h>
   #import "DetailtableviewViewController.h"
   @interface DBDatabase : NSObject
    {
    NSString *databasePath;
     }
  +(DBDatabase*)getSharedInstance;
   - (BOOL)createDB;
   - (BOOL) saveData:(NSString*)name email:(NSString *)email  
    password:(NSString *)password confirmpassword:
    (NSString*)confirmpassword           
    age:(NSString*)age department:(NSString*)department;

    - (NSArray*) findingEmailid:(NSString*)Emailid password:
    (NSString*)password;
    - (NSArray*)studentdetailbyTableview:(NSString*)email;

    @end 
```

数据库数据库.M

```
 #import "DBDatabase.h"
   static DBDatabase *sharedInstance = nil;
  static sqlite3 *database = nil;
  static sqlite3_stmt *statement = nil;

@implementation DBDatabase
+(DBDatabase*)getSharedInstance{
if (!sharedInstance) {
    sharedInstance = [[super allocWithZone:NULL]init];
    [sharedInstance createDB];
}
return sharedInstance;
 }

 -(BOOL)createDB{
 NSString *docsDir;
NSArray *dirPaths;
// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains
(NSDocumentDirectory, NSUserDomainMask, YES);
docsDir = dirPaths[0];
// Build the path to the database file
databasePath = [[NSString alloc] initWithString:[docsDir
 stringByAppendingPathComponent: @"sasi.db"]];    
NSLog(@"CREATED DB PATH :%@", databasePath);

BOOL isSuccess = YES;
NSFileManager *filemgr = [NSFileManager defaultManager];
if ([filemgr fileExistsAtPath: databasePath ] == NO)
{
    const char *dbpath = [databasePath UTF8String];
    if (sqlite3_open(dbpath, &database) == SQLITE_OK)
    {
        char *errMsg;
     const char *sql_stmt ="CREATE TABLE IF NOT EXISTS USERDETAILS 
       (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, EMAIL TEXT, 
      PASSWORD TEXT, CONFIRMPASSWORD TEXT, AGE TEXT, DEPARTMENT 
      TEXT)"; 

        if (sqlite3_exec(database, sql_stmt, NULL, NULL, &errMsg)
            != SQLITE_OK)
        {
            isSuccess = NO;
            NSLog(@"Failed to create table");
        }
        sqlite3_close(database);
        return  isSuccess;
    }
    else {
        isSuccess = NO;
        NSLog(@"Failed to open/create database");
    }
    }
return isSuccess;
 }

 -(BOOL) saveData:(NSString*)name email:(NSString *)email password:
 (NSString *)password confirmpassword:(NSString *)confirmpassword 
  age:(NSString*)age department:(NSString*)department;
  {
const char *dbpath = [databasePath UTF8String];
if (sqlite3_open(dbpath, &database) == SQLITE_OK)
{
     NSString *insertSQL = [NSString stringWithFormat:
                           @"INSERT INTO USERDETAILS (name, email,  
  password,confirmpassword,age,department) VALUES (\"%@\", \"%@\", 
   \"%@\",\"%@\", \"%@\", 
 \"%@\")",name,email,password,confirmpassword,age,department ];  

    const char *insert_stmt = [insertSQL UTF8String];
    sqlite3_prepare_v2(database, insert_stmt,-1, &statement, NULL);
    if (sqlite3_step(statement) == SQLITE_DONE)
    {
        return YES;
    }
    else {
        return NO;
    }
    //sqlite3_reset(statement);
     }
return NO;
 }
  -(NSArray*) findingEmailid:(NSString*)Emailid password:    
  (NSString*)password;

 {
const char *dbpath = [databasePath UTF8String];
if (sqlite3_open(dbpath, &database) == SQLITE_OK)
{
    NSString *selectSql = [NSString stringWithFormat:
                           @"SELECT *from USERDETAILS Where email 
  =\"%@\" and password =\"%@\"",Emailid,password];
    NSLog(@"------>%@",Emailid);

    const char *compare_stmt = [selectSql UTF8String];
    NSMutableArray *resultarray = [[NSMutableArray alloc]init];
    if (sqlite3_prepare_v2(database, compare_stmt,-1, &statement, 
   NULL) == SQLITE_OK)
    {
        if (sqlite3_step(statement) == SQLITE_ROW)
        {
            NSString *userName =[[NSString alloc]initWithUTF8String:
   (const char *)sqlite3_column_text(statement, 1)];
            [resultarray addObject:userName];
            NSString *password =[[NSString alloc]initWithUTF8String:
   (const char *)sqlite3_column_text(statement, 2)];
            [resultarray addObject:password];
            return resultarray;
        }
        else
        {
            NSLog(@"not found");
            return nil;
        }

    }

  }
return nil;
 }
  -(NSArray*)studentdetailbyTableview:(NSString*)email;

 {
const char *dbpath = [databasePath UTF8String];
if (sqlite3_open(dbpath, &database) == SQLITE_OK)
{
    NSString *selectSql = [NSString stringWithFormat:
                           @"SELECT name,age,department FROM 
  USERDETAILS Where email =\"%@\"",email];
    NSLog(@"------->%@",email);
    const char *insert_stmt = [selectSql UTF8String];
    NSMutableArray *resultarray = [[NSMutableArray alloc]init];
    if (sqlite3_prepare_v2(database, insert_stmt,-1, &statement, 
  NULL) == SQLITE_OK)
    {
        if (sqlite3_step(statement) == SQLITE_ROW)
        {
            NSString *userName =[[NSString alloc]initWithUTF8String:
   (const char *)sqlite3_column_text(statement, 0)];
            [resultarray addObject:userName];
            NSString *age =[[NSString alloc]initWithUTF8String:(const 
    char *)sqlite3_column_text(statement, 1)];
            [resultarray addObject:age];
            NSString *department =[[NSStrin alloc]initWithUTF8String: 
      (const char *)sqlite3_column_text(statement, 2)];   
            [resultarray addObject:department];

            return resultarray;

        }
        {
            NSLog(@"not found");
            return nil;
        }

    }

}
return nil;
  }

@end 
```

寄存器 VI.H

```
#import <UIKit/UIKit.h>
#import "DBDatabase.h"

@interface RegisterViewController :UIViewController  
   <UITextFieldDelegate,UIPickerViewDelegate,UIPickerViewDataSource>

 @property (weak, nonatomic) IBOutlet UITextField *usernameText1;
 @property (weak, nonatomic) IBOutlet UITextField *emailidText2;
 @property (weak, nonatomic) IBOutlet UITextField *passwordText3;
 @property (weak, nonatomic) IBOutlet UITextField *confirmpwdText4;
 @property (weak, nonatomic) IBOutlet UITextField *dobText5;
 @property (weak, nonatomic) IBOutlet UITextField *depatmentText6;
@property (strong,nonatomic)NSArray *depmentArray;
- (IBAction)registerButton:(id)sender;
@property (weak, nonatomic) IBOutlet UIPickerView *departmentPicker;
@property (weak, nonatomic) IBOutlet UIButton *registerBttn; 
```

@结尾

寄存器视图.M

```
 #import "RegisterViewController.h"
 #import <UIKit/UIKit.h>
 #import <sqlite3.h>
 #import "DetailtableviewViewController.h"

  @interface RegisterViewController ()
    @end

  @implementation RegisterViewController

 - (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view.

self.title = @"NEW USER";
_departmentPicker.hidden=YES;
_depmentArray = [[NSArray alloc]initWithObjects:@"Computer 
Science",@"Civil",@"Mechanical",@"Electonic",nil];   
_registerBttn.enabled =NO;
}
//- (BOOL)textField:(UITextField *)textField  
 shouldChangeCharactersInRange:   
(NSRange)range replacementString:(NSString *)string
 //{
 //    NSInteger maxlength = 25;
 //    {
 //        if(textField == _usernameText1)
   //        {
 //            maxlength =15;
 //        }       
  //        else if(textField ==_dobText5)
  //        {
   //            maxlength =2;
  //        }
 //        
 //        NSUInteger length =[textField.text length]+[string length] 
     - range.length;
  //        return !(length >maxlength);
  //        
   //    }
  //}
 -(BOOL) NSStringIsValidEmail:(NSString *)checkString
 {

  }
  #pragma mark textfield delegate

  - (BOOL) textFieldShouldReturn:(UITextField *)textField {

[textField resignFirstResponder];
return YES;
 }
 -(BOOL)textField:(UITextField *)textField 
  shouldChangeCharactersInRange:(NSRange)range replacementString:
  (NSString *)string {
 if ((_usernameText1.text.length >0) && (_emailidText2.text.length 
 >0) && (_passwordText3.text.length >0) &&     
 (_confirmpwdText4.text.length >0) && (_dobText5.text.length >0))
//&& (textField == _depatmentText6)
{
    _registerBttn.enabled =YES;
}
else{
    _registerBttn.enabled =NO;
}
return YES;
 }

- (void)textFieldDidBeginEditing:(UITextField *)textField {
if( (_usernameText1.text.length >0) && (_emailidText2.text.length >0) 
&& (_passwordText3.text.length >0) && (_confirmpwdText4.text.length 
>0) && (_dobText5.text.length >0)  
&& (textField == _depatmentText6)) {

   // _registerBttn.enabled=YES;
    _departmentPicker.hidden=NO;
}
else
{
    //_registerBttn.enabled=NO;
    _departmentPicker.hidden=YES;
  }
  }

 - (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
 }

 #pragma mark-UIPickerView Datasource

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)   
  pickerView
  {
 return 1;
 }
 - (NSInteger)pickerView:(UIPickerView *)pickerView 
 numberOfRowsInComponent:(NSInteger)component   
 {
 return _depmentArray.count;
 }
 - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:   
 (NSInteger)row forComponent:(NSInteger)component
 {
return [_depmentArray objectAtIndex:row];
}

 - (void)pickerView:(UIPickerView *)pickerView didSelectRow:
 (NSInteger)row inComponent:(NSInteger)component
 {
 if (self.departmentPicker)
 {
    [_depatmentText6 setText:[NSString stringWithFormat:@"%@",    
    [_depmentArray objectAtIndex:row]]];
    _departmentPicker.hidden=YES;
 }
 }

 - (IBAction)registerButton:(id)sender {

BOOL success = NO;
if ([_usernameText1.text isEqualToString:@""]) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING      ALERT" message:@"Enter your name" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
        [self.usernameText1 becomeFirstResponder];
    }];

    [alert addAction:ok];
    [_usernameText1 becomeFirstResponder];
    [self presentViewController:alert animated:YES completion:nil];
  }

   else if([_emailidText2.text isEqualToString:@""]) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter  your email" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action)
                         {
                             [self.emailidText2 becomeFirstResponder];

                         }];
    [_emailidText2 becomeFirstResponder];
    [alert addAction:ok];

    [self presentViewController:alert animated:YES completion:nil];
}

else if(![self NSStringIsValidEmail:self.emailidText2.text ]) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter your valid emailid" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
        [self.emailidText2 becomeFirstResponder];
    }];

    [alert addAction:ok];
    [self presentViewController:alert animated:YES completion:nil];
}

else if ([_passwordText3.text isEqualToString:@""]) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter your password" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
        [self.passwordText3 becomeFirstResponder];
    }];

    [alert addAction:ok];
    [self presentViewController:alert animated:YES completion:nil];
}

else if (_passwordText3.text.length<6) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter the password greater then six characters" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
        [self.passwordText3 becomeFirstResponder];
    }];

    [alert addAction:ok];
    [self presentViewController:alert animated:YES completion:nil];
}

else if([_confirmpwdText4.text isEqualToString:@""]) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter the confirm password" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
        [self.confirmpwdText4 becomeFirstResponder];
    }];
    [alert addAction:ok];
    [self presentViewController:alert animated:YES completion:nil];

}
else if (_confirmpwdText4.text.length<6) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter the confirmpassword greater then sixcharacters" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
        [self.confirmpwdText4 becomeFirstResponder];
    }];

    [alert addAction:ok];
    [self presentViewController:alert animated:YES completion:nil];
}

else if ([_dobText5.text isEqualToString:@""]) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter your age" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
        [self.dobText5 becomeFirstResponder];
    }];

    [alert addAction:ok];
    [self presentViewController:alert animated:YES completion:nil];
}
else if ([_depatmentText6.text isEqualToString:@""]) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter your department" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
        [self.depatmentText6 becomeFirstResponder];
    }];

    [alert addAction:ok];
    [self presentViewController:alert animated:YES completion:nil];
}

else if (![_passwordText3.text isEqualToString:_confirmpwdText4.text]) {

    {
        UIAlertController *alert =[[UIAlertController alloc]init];
        alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter your password" preferredStyle:UIAlertControllerStyleAlert];
        UIAlertAction * ok =[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
            [self.confirmpwdText4 becomeFirstResponder];
        }];

        [alert addAction:ok];
        [self presentViewController:alert animated:YES completion:nil];
    }
}

else {
    success = [[DBDatabase getSharedInstance]saveData:_usernameText1.text email:_emailidText2.text password: _passwordText3.text confirmpassword:_confirmpwdText4.text age:_dobText5.text department:_depatmentText6.text];

_departmentPicker.hidden=YES;

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"SUCCESS ALERT" message:@"New User Registered succesfully" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction *cancelAction = [UIAlertAction
                                   actionWithTitle:NSLocalizedString(@"Cancel", @"Cancel action")
                                   style:UIAlertActionStyleCancel
                                   handler:^(UIAlertAction *action)
                                   {
                                       NSLog(@"Cancel action");
                                   }];

    UIAlertAction *okAction = [UIAlertAction
                               actionWithTitle:NSLocalizedString(@"OK", @"OK action")
                               style:UIAlertActionStyleDefault
                               handler:^(UIAlertAction *action)
                               {
                                   NSLog(@"OK action");
                                   [self.navigationController popViewControllerAnimated:YES];
                                   _usernameText1.text=@"";_emailidText2.text=@"";_passwordText3.text=@"";_confirmpwdText4.text=@"";_dobText5.text=@"";_depatmentText6.text=@"";
                                   [self performSegueWithIdentifier:@"New User" sender:self];
                               }];

    [alert addAction:cancelAction];
    [alert addAction:okAction];

    [self presentViewController:alert animated:YES completion:nil];
}

if (success == NO) {

    {
        UIAlertController *alert =[[UIAlertController alloc]init];
        alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"NIL" preferredStyle:UIAlertControllerStyleAlert];
        UIAlertAction * ok =[UIAlertAction actionWithTitle:@"OK" style:UIAlertActionStyleDefault handler:nil];
        [alert addAction:ok];
        [self presentViewController:alert animated:YES

  completion:nil];
    }
   }
   }
  @end 
```

查看 CONTR.H（登录）

```
 #import <UIKit/UIKit.h>
 #import <sqlite3.h>
 #import "DBDatabase.h"

 @interface ViewController : UIViewController<UITextFieldDelegate>

 @property (weak, nonatomic) IBOutlet UITextField *emailidText;
 @property (weak, nonatomic) IBOutlet UITextField *passwordText;
    - (IBAction)newregisterButton2:(id)sender;
  - (IBAction)loginButton1:(id)sender;
 @property (weak, nonatomic) IBOutlet UIButton *logBttn;

@end 
```

VIEW CONTROLL.M

```
 #import "ViewController.h"
 #import "DBDatabase.h"
 @interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad {
[super viewDidLoad];
self.title=@"LOGIN FORM";
self.logBttn.enabled =NO;

 }
 -(BOOL) NSStringIsValidEmail:(NSString *)checkString
 {
 }

- (void)textFieldDidBeginEditing:(UITextField *)textField {
if((_emailidText.text.length > 0) && (_passwordText.text.length <10))
{
      _logBttn.enabled =YES;
}
else {
      _logBttn.enabled = NO;

      }
    }
 #pragma mark-UITextFieldDelegate
-(BOOL) textFieldShouldReturn:(UITextField *)textField{

[textField resignFirstResponder];
return YES;
  }
 - (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
 }

- (IBAction)newregisterButton2:(id)sender
 {
[self performSegueWithIdentifier:@"add" sender:self];
}

 - (IBAction)loginButton1:(id)sender {

 NSArray *data =[[DBDatabase    
 getSharedInstance]findingEmailid:_emailidText.text 
 password:_passwordText.text];
if( [_emailidText.text isEqualToString:[NSString stringWithFormat:@"%@",[data objectAtIndex:1]]] ||
    [_passwordText.text isEqualToString:[NSString stringWithFormat:@"%@",[data objectAtIndex:2]]]) {

  UIAlertController *alert =[[UIAlertController alloc]init];
   alert =[UIAlertController alertControllerWithTitle:@"SUCCESS ALERT" message:@"New User Login success" preferredStyle:UIAlertControllerStyleAlert];

   UIAlertAction *okAction = [UIAlertAction
                            actionWithTitle:NSLocalizedString(@"OK", @"OK action")
                            style:UIAlertActionStyleDefault
                             handler:^(UIAlertAction *action)
                             {
                                  NSLog(@"OK action");
    [self performSegueWithIdentifier:@"Detail" sender:self];
                                   _emailidText.text=@"";
                                 _passwordText.text=@"";
                              }];

    [alert addAction:okAction];

   [self presentViewController:alert animated:YES completion:nil];
    [self.activityView startAnimating];
   //        [self.activityView stopAnimating];
}

else if(self.emailidText == nil || [self.emailidText.text isEqualToString:@""]) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter your emailid" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle
                         :@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
                             [self.emailidText becomeFirstResponder];
                         }];
    [alert addAction:ok];
    [self presentViewController:alert animated:YES completion:nil];
}

else if(![self NSStringIsValidEmail:_emailidText.text ]) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter your valid emailid" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle
                         :@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
                             [self.emailidText becomeFirstResponder];
                         }];

    [alert addAction:ok];
    [self presentViewController:alert animated:YES completion:nil];
}

else if(self.passwordText == nil || [self.passwordText.text isEqualToString:@""]) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter you password" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle
                         :@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
                             [self.passwordText becomeFirstResponder];
                         }];

    [alert addAction:ok];
    [self presentViewController:alert animated:YES completion:nil];
}

else if(![_passwordText.text isEqualToString:[NSString stringWithFormat:@"%@",[data objectAtIndex:2]]]) {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Enter correct password" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle
                         :@"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {
                             [self.passwordText becomeFirstResponder];
                         }];
    [alert addAction:ok];
    [self presentViewController:alert animated:YES completion:nil];
}

else {

    UIAlertController *alert =[[UIAlertController alloc]init];
    alert =[UIAlertController alertControllerWithTitle:@"WARNING ALERT" message:@"Email is not register" preferredStyle:UIAlertControllerStyleAlert];
    UIAlertAction * ok =[UIAlertAction actionWithTitle:@"Not Register" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action){
        [self performSegueWithIdentifier:@"add" sender:self];
        _emailidText.text=@"";
        _passwordText.text=@"";
    }];

    [alert addAction:ok];
    _emailidText.text=@"";
    _passwordText.text=@"";
    [self presentViewController:alert animated:YES completion:nil];
}
 }

 #pragma mark - Navigation

 // In a storyboard-based application, you will often want to do a  
  - (void)prepareForSegue:(UIStoryboardSegue *)segue sender: 
 (id)sender {

if ([segue.identifier isEqualToString:@"Detail"]) {
    DetailtableviewViewController *obj = 
 segue.destinationViewController;
    obj.mailid = _emailidText.text;
}
// Get the new view controller using [segue     
 destinationViewController].
// Pass the selected object to the new view controller.
}

@end 
```

详细表视图.H

```
#import <UIKit/UIKit.h>
#import "DBDatabase.h"

 @interface DetailtableviewViewController :      
 UIViewController<UITableViewDataSource,UITableViewDelegate>

 @property (weak, nonatomic) IBOutlet UITableView *detailView;
    @property (strong,nonatomic)NSString *mailid;

@end 
```

细节.M

```
#import "DetailtableviewViewController.h"
 #import "DetailTableViewCell.h"

 @interface DetailtableviewViewController ()

 @end

 @implementation DetailtableviewViewController

- (void)viewDidLoad {
[super viewDidLoad];

self.title = [NSString stringWithFormat:@"%@",self.mailid];

 }

 - (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];

 }

  #pragma mark-UITableView datasourse

 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

return 1;
  }

- (NSInteger)tableView:(UITableView *)tableView 
numberOfRowsInSection:(NSInteger)section {

return 1;
 }

- (UITableViewCell *)tableView:(UITableView *)tableView 
cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *cellid = @"cell";
DetailTableViewCell *cell = [tableView 
dequeueReusableCellWithIdentifier:cellid];
NSArray *data=[[DBDatabase 
getSharedInstance]studentdetailbyTableview:[NSString 
stringWithFormat:@"%@",self.title]];

{
    cell.nameText.text = [NSString stringWithFormat:@"%@",[data 
 objectAtIndex:0]];
    cell.ageText.text =[NSString stringWithFormat:@"%@",[data 
 objectAtIndex:1]];
    cell.departmentText.text = [NSString stringWithFormat:@"%@",[data 
 objectAtIndex:2]];
    return cell;
}
 }

 /*
 #pragma mark - Navigation

 @end 
```

详细信息表格.H

```
#import <UIKit/UIKit.h>

 @interface DetailTableViewCell : UITableViewCell

 @property (weak, nonatomic) IBOutlet UILabel *nameText;
 @property (weak, nonatomic) IBOutlet UILabel *ageText;
 @property (weak, nonatomic) IBOutlet UILabel *departmentText;

 @end 
```

细节细胞.M

```
 import "DetailTableViewCell.h"

  @implementation DetailTableViewCell

 - (void)awakeFromNib {
[super awakeFromNib];
// Initialization code
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
[super setSelected:selected animated:animated];
}

 @end 
```

# javascript - 调整窗口大小时移动图层

> ID：13310911
> 
> 赞同：1
> 
> 时间：2012-11-09T15:28:17.087
> 
> 标签：javascript, html, css

我有以下 HTML 代码

```
<div id="container">
    <div id="fixed">Logo</div>
</div>​ 
```

然后是下面的 CSS 代码

```
#container {
    width: 400px;
    border: 1px solid red;
    float:right;
}

#fixed {
    float:left;
    width: 200px;
    border: 1px solid green;
}​ 
```

当我调整窗口大小时，我希望固定 div 在窗口边缘位于其开头时继续向右移动。

你知道用 CSS、javascript 或 HTML 做这件事的任何方法吗？

我在 jsfiddle 中创建了一个示例，您可以在[http://jsfiddle.net/alvarezskinner/kRrdb/](http://jsfiddle.net/alvarezskinner/kRrdb/)中查看它，如果您调整中间栏的大小，您将看到固定层保持静止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:34:53.660

I don't think this does exactly what you want, but it at least gets closer. Change the `container` style to:

```
#container {
    width: 100%;
    border: 1px solid red;
    float:right;
    max-width:400px;
} 
```

Instead of moving the `fixed` div, this will just make sure that the `container` doesn't get wider than the page, thereby ensuring that the `fixed` div doesn't go past the left of the page. Will this work well enough?

Here is a fiddle if you want it: [http://jsfiddle.net/jdwire/kRrdb/2/](http://jsfiddle.net/jdwire/kRrdb/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:51:00.257

如果容器无法调整大小，您可以使用 javascript 执行以下操作：

```
window.onresize = function(event) {
    var fixed = document.getElementById("fixed");

    var winWidth = window.innerWidth;
    var containerWidth = document.getElementById("container").offsetWidth;
    var fixedWidth = document.getElementById("fixed").offsetWidth;

    var overlap = containerWidth - winWidth;

    if(overlap > 0) {
        // prevent the element from moving off-screen
        overlap = Math.min(overlap, fixedWidth);
    }else{
        overlap = 0;  
    }

    fixed.style.marginLeft = overlap + "px";
} 
```

[http://jsfiddle.net/kRrdb/4/](http://jsfiddle.net/kRrdb/4/)

这可以更简洁。我已经扩展以使其更易于理解。

# cmake - cmake有效地添加include_subdirectory

> ID：13310912
> 
> 赞同：1
> 
> 时间：2012-11-09T15:28:29.347
> 
> 标签：cmake

我是 CMake 构建过程的新手。我有一个子目录列表，每个子目录都需要一组 include_directories （来自不同库的文件）。

我的问题是：在主 CMakeList 中添加 include_directory 调用是否有效，以便在所有子目录中引用它（即我不需要在所有子目录中添加），或者每次添加它是否有效子目录。

请让我知道这样一个过程的优缺点是什么。

注意：我知道我可以在主 cmakelist 文件中添加常见的包含文件，但是，如果我要在主 CMakefile 中添加项目特定的包含目录怎么办？为每个子目录创建的静态库中是否包含所有 include_directories？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:34:07.053

有时 incude 目录可以有同名的文件。这可能导致编译器包含错误文件的情况。因此，通常的做法是在子目录中设置包含目录，而不是在顶部 CMakeLists.txt 中。

除此之外，没有任何区别。

# c# - WinRT中高速应用层的UDP数据包丢失？

> ID：13310917
> 
> 赞同：1
> 
> 时间：2012-11-09T15:28:52.403
> 
> 标签：c#, network-programming, udp, windows-runtime, winrt-xaml

这是我遇到的一个非常奇怪的错误，它似乎是 WinRT 框架的限制。复制这个问题的代码会占用太多空间，所以我会尽可能地描述它。在我的应用程序中，UI 由一些静态 TextBlock、一个不确定的进度条、一个确定的进度条和一个每秒更新的状态 TextBlock 组成。

`DatagramSocket`当使用高速 (~30Mbps)下载 UDP 数据包时，网络层和应用层之间会发生明显的数据包丢失 (>60%)。我说它在应用层，因为在执行下载时运行数据包跟踪（例如[netsh trace](http://msdn.microsoft.com/en-us/library/windows/desktop/dd569142%28v=vs.85%29.aspx)）会显示网络层正在接收的所有数据包，而应用层没有。

我只能假设 WinRT 框架无法跟上`MessageReceived`需要触发回调函数的速度。我还没有找到任何对 UDP 下载执行任何缓冲的方法。我发现接收 UDP 数据包的唯一方法是回调函数，它为每个单独的数据包触发。

同样，这种应用层数据包丢失发生在 30Mbps 左右的下载速度下。在 10Mbps 等较慢的速度下看不到它。

有没有其他人遇到过这个问题，或者有没有人知道在执行 UDP 下载时执行缓冲的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:43:44.987

我已经在这个问题上工作了大约一周，并确定绝大多数数据包丢失是由于 UI 中存在进度条造成的。确定的进度条甚至不需要更新——它存在于 UI 中的事实足以导致严重的数据包丢失。如果没有进度条，我能够将数据包丢失减少到大约 2%（从 >60%）。

我还编写了一个瘦客户端来测试我的应用程序结构的其余部分没有负担的问题。瘦客户端仅使用硬编码值实现了 UDP 下载功能。即使完全没有 UI，我仍然在应用程序层看到 0.05% 的数据包丢失，所以这似乎确实是 WinRT 框架中的一个问题。当我向瘦客户端添加一个不确定的进度条时，数据包丢失率跃升至 >30%。

除非有人知道执行 UDP 下载的接收部分的另一种方法（`MessageReceived`回调除外），或者在 WinRT 框架中解决此问题之前，您似乎应该预计网络层和进行高速 UDP 下载时的应用层。此外，在执行 UDP 下载时不应使用进度条。

**TL;DR：**不要在 WinRT 中使用带有 UDP 下载的进度条，并且无论如何都希望在高速下会丢失一些数据包。

# wcf - 如何将 .NET 代码库实现为服务层 - 在多个应用程序之间共享相同的 BL/CRUD

> ID：13310918
> 
> 赞同：3
> 
> 时间：2012-11-09T15:28:57.850
> 
> 标签：wcf, .net-4.0, .net-3.5, wcf-client

**设置：**我正在为我的部门开发一个 Intranet 工具集，其主要目的是集中管理数据质量和可访问性，同时还可以自动化和扩展一些部分流程。

**问题：**我目前在 CLR 程序集中有我的业务逻辑，它在我的 SQL-Server 上可用于其他直接在 SQL-Server 上运行自动 ETL 的 CLR 程序集。我还在开发一个 Intranet 站点，该站点也需要该业务逻辑程序集中的代码信息，但在部署和代码维护方面，引用 CLR 程序集代码的效果并不理想。另一个部门也表示有兴趣将代码库和数据用于他们自己的 Intranet 站点。

**问题：我已经阅读了** *[很多](https://softwareengineering.stackexchange.com/questions/162399/how-essential-is-it-to-make-a-service-layer/162426#162426)**关于这个主题的问答（1、2、3、4 [、](https://stackoverflow.com/questions/3235522/exposing-a-net-class-library-which-primarily-defines-crud-operations-as-a-ser) ... [）](https://stackoverflow.com/questions/1352063/implementing-a-service-layer-in-an-mvc-architecture)[，](https://stackoverflow.com/questions/3042534/how-to-implement-self-host-wcf-data-serivces-http-localhost1234-mydataservic/3042655#3042655)但我发现它非常包含，所以我会尝试提问更具体的案例（即单个 BL 和数据访问代码库）*

*   WCF 服务是我想要的解决方案吗？我所有潜在的服务客户端都在同一台服务器上运行，是否有另一种方法可以在 CLR 程序集和网站项目中引用相同的代码库？我不需要对不同平台（例如 Java）的支持——一切都是 .NET（对内部程序来说是的！）——WCF 是否矫枉过正？
*   WCF 服务中的代码可以像类库一样使用，还是我需要编写一种新的方式来访问服务中的类/方法？
*   开发、测试和生产实例的分离？
    *   客户端访问 WCF 服务时是否可以更新它，或者我是否需要安排维护时段？当我更新服务时，我是否也需要以某种方式更新客户端？
    *   我是否可以动态设置服务引用，就像我目前动态设置数据库连接字符串一样，取决于 StageConfig = dev、test 还是 prod？
*   我的 CLR 程序集是为 .Net 3.5 编写的，但是为 .NET 4.0 编写的网站会造成问题吗？
*   我需要知道哪些**最少的 .NET 服务架构编程才能完成此任务？**随着时间的推移，我将了解更多关于 WCF 的信息，但我需要评估架构工作并将其与完成任务（功能请求）进行权衡。[MS 教程](http://msdn.microsoft.com/en-us/library/vstudio/ms734712%28v=vs.90%29.aspx)能让我获得所需的技能吗？

我很感激只回答单个问题，如果你觉得你知道一些事情，我会 +1 任何帮助我更接近完整答案的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T11:16:49.923

好的，所以你想让你的代码在企业范围内。当你想这样做时，有两个基本问题要讨论，所以我将这样构建答案：

*   您必须了解 WCF 的全部内容。
*   您必须正确管理您的依赖关系。

* * *

**WCF 是关于什么的**

WCF 是一种执行 RPC/RMI（远程过程调用/远程方法调用）的方式，这意味着一些客户端代码可以通过网络调用位于其他地方的代码。

可调用的 WCF 服务由 ABC 三元组确定：

*   服务规范实现为具有“ServiceContract”属性的 .NET 接口。这是合同（“C”）
*   服务的“位置”由一对确定：地址（“A”）和绑定（“B”）。Binding 确定用于客户端和服务器之间通信的协议套件（NetPipe、TCP、HTTP，...）。Address 是遵循由 Binding 确定的方案的 URI ("net.pipe", "net.tcp", "http", ...)

当客户端代码在特定地址调用 WCF 服务时，具有特定的 Binding 和特定的 Contract（必须与特定地址和特定 Binding 的服务器正在交付的内容相匹配），WCF 生成一个代理对象，实现合同。

提供服务的程序是任何 .NET 可执行文件。它必须生成一个或多个 WCF 主机，这些主机将注册实现服务契约的对象或类，并将每个交付的服务与特定的地址和绑定相关联。（可能很多）

可以通过 app .config 文件进行配置，您将在其中指定 ABC 三元组并将这些三元组与您将在应用程序中使用的名称相关联。您也可以以编程方式进行，这非常容易。

WCF 不能解决您部署应用程序或地址和绑定配置的问题。它只是解决了让两个可执行文件与强类型对象（通过特定接口）相互通信的问题。共享服务配置由您决定。您可以在 Windows 共享上使用共享的 .config 文件，甚至设置一个 LDAP 服务器，该服务器将提供查找服务所需的所有数据（即 A 和 B）。

* * *

**正确管理依赖项**

在您的场景中，有三个参与者想要使用您的 WCF 基础结构：

*   您的 SQLCLR 程序集，它将成为客户端。
*   Intranet 站点，它将是另一个客户端。
*   服务主机，它将是一个服务器。

最低限度的集会数量为 4 个。每个上述参与者一个，一个指定合同，所有三个参与者都将使用该合同。它应该包含以下内容：

*   指定合约的接口。
*   接口所需的所有类型，当然会通过网络发送，因此必须是可序列化的。

里面不应该有更多的东西，否则，这将是一场维护噩梦。

* * *

**回答您的问题**

我希望我的回答是明确的。让我们总结一下您的问题的答案。

> WCF 服务是我想要的解决方案吗？我所有潜在的服务客户端都在同一台服务器上运行，是否有另一种方法可以在 CLR 程序集和网站项目中引用相同的代码库？我不需要对不同平台（例如 Java）的支持——一切都是 .NET（对内部程序来说是的！）——WCF 是否矫枉过正？

一切都是多余的。WCF 相当容易使用并且可以很好地缩减。

> WCF 服务中的代码可以像类库一样使用，还是我需要编写一种新的方式来访问服务中的类/方法？

在现有代码上设置 WCF 只需要实现一个附加类，以及一些创建将服务于上述类的主机的代码。

调用 WCF 服务需要创建一个 Channel，它是一个实现接口的 .NET（代理）对象。

所以基本上，您的业务代码保持在相同的状态。

> 开发、测试和生产实例的分离？

WCF 不会处理这个问题。不同的环境，不同的服务地址。你必须自己解决这个问题。

> 客户端访问 WCF 服务时是否可以更新它，或者我是否需要安排维护时段？

这取决于您的维护策略。杀死服务进程并启动新版本是基本的升级机制。

> 当我更新服务时，我是否也需要以某种方式更新客户端？

如果您像我在上一节中概述的那样正确管理您的依赖项，则只有在服务规范（接口）发生更改时才需要更新客户端。

> 我是否可以动态设置服务引用，就像我目前动态设置数据库连接字符串一样，取决于 StageConfig = dev、test 还是 prod？

您必须管理它，可能通过以编程方式为服务设置地址和绑定。

> 我的 CLR 程序集是为 .Net 3.5 编写的，但是为 .NET 4.0 编写的网站会造成问题吗？

如果您像我在上一节中概述的那样正确管理您的依赖项，唯一的约束将是“合同”程序集所需的最低 CLR 版本。

> 我需要知道哪些最少的 .NET 服务架构编程才能完成此任务？随着时间的推移，我将了解更多关于 WCF 的信息，但我需要评估架构工作并将其与完成任务（功能请求）进行权衡。MS 教程能让我获得所需的技能吗？

您将需要这些练习的结果：

1.  制作两个可执行文件，一个客户端和一个服务器，它们将通过位于单独 DLL 中的 WCF 合同进行通信。配置应位于 app .config 文件中。
2.  制作两个可执行文件，一个客户端和一个服务器，它们将通过位于单独 DLL 中的 WCF 合同进行通信。配置应以编程方式确定。
3.  尝试将可序列化的类作为参数发送到您的服务。
4.  尝试发送一个可序列化的类作为服务的返回值。

之后，您需要考虑共享服务的地址和绑定的最佳/最便宜的方式。

希望能帮助到你。

# c# - 继承 IDispatch 和声明接口类型的区别

> ID：13310925
> 
> 赞同：1
> 
> 时间：2012-11-09T15:29:06.820
> 
> 标签：c#

直接继承 IDispatch (IMyInterface: IDispatch) 和声明接口类型 [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)] 有什么区别？

# jquery - jQuery 在 Firefox 或 IE < 8 中找不到 iframe 元素？

> ID：13310926
> 
> 赞同：0
> 
> 时间：2012-11-09T15:29:12.140
> 
> 标签：jquery, firefox, element, selector

我的页面上有一个 iframe，它在单击链接时动态加载（灯箱）。一旦该灯箱打开并且 iframe 内容已加载，我需要向 iframe 插入一些内容。

它适用于除 Firefox 之外的所有浏览器。

```
console.log( $('.fancybox-inner iframe').contents().find('html .clearinputtext').length ); 
```

在 Firefox 中返回 0。假设返回 4。

有任何想法吗？我正在运行 Firefox v16。

编辑：实际上，它在 ie<8 中也不起作用，但这并不令人惊讶。

# c# - 无法使用 DeleteAsync 删除文件

> ID：13310933
> 
> 赞同：2
> 
> 时间：2012-11-09T15:29:21.317
> 
> 标签：c#, asynchronous, windows-runtime, delete-file

我在 VS2012、WinRT 和 C# 中工作。

我试图在解压缩后删除一些文件。我收到“访问被拒绝”错误。如果我停止应用程序并重新启动它，相同的代码可以正常工作，因此看起来仍然连接着一个句柄。

如果我不调用 unZipFile 方法，我可以删除文件。

是否有明确的方法来发布文件？在调用删除之前，我已将其设置为 null (file = null;)。

下面是调用 unzip 方法的代码块：

```
 StorageFile file = await CreateOutputFile(fileName, path);

        MemoryStream theMemStream = new MemoryStream();

        theMemStream.Write(bytes, 0, bytes.Length);

        await FileIO.WriteBytesAsync(file, bytes);

        await theMemStream.FlushAsync();
        theMemStream.Dispose();

        var result = await unZipFile(file, path);

        file = null; 
```

这是 unZipFile 方法：

```
 private async Task<string> unZipFile(StorageFile file, string path)
        {

        StorageFolder sf = await GetOutputFolder(path);

    using (var zipStream = await file.OpenStreamForReadAsync())
    {
        using (MemoryStream zipMemoryStream = new MemoryStream((int)zipStream.Length))
        {

            await zipStream.CopyToAsync(zipMemoryStream);

            try
            {
                var archive = SharpCompress.Archive.ArchiveFactory.Open(file.Path);

                foreach (var entry in archive.Entries)
                {
                    entry.WriteTo(zipMemoryStream);

                    Stream fileData = entry.OpenEntryStream();

                    StorageFile outputFile = await sf.CreateFileAsync(entry.FilePath, CreationCollisionOption.ReplaceExisting);

                    using (Stream outputFileStream = await outputFile.OpenStreamForWriteAsync())
                    {
                        await fileData.CopyToAsync(outputFileStream);
                        await outputFileStream.FlushAsync();
                        outputFileStream.Dispose();
                    }
                }
                archive = null;
            }
            catch (Exception ex)
            {
                throw new IOException("Error writing decompressed output file: " + ex.Message);
            }

            await zipStream.FlushAsync();
            zipStream.Dispose();

            await zipMemoryStream.FlushAsync();
            zipMemoryStream.Dispose();
        }
    }

    return "success";
} 
```

这是删除方法。解压后对每个文件调用：

```
private async Task<string> deleteFile(string path, string filename)
{
    StorageFolder folder = await GetOutputFolder(path);

    var files = await folder.GetFilesAsync();

    foreach (StorageFile file in files)
    {
        try
        {
            if (file != null)
            {
                if (file.Name == filename)
                    await file.DeleteAsync();
            }
        }
        catch (Exception ex)
        {
            return ex.Message;
        }
    }
    return "success";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:20:39.010

您在哪个文件上得到异常，提取的文件或 zip 存档本身？

如果是后者，则`ArchiveFactory.Open()`返回一个`IArchive`which inherits `IDisposable`，因此您应该将其包装`var archive = SharpCompress.Archive.ArchiveFactory.Open(file.Path);`在一个`using`块中，以便在使用后将其处理掉。

# jquery - MongoDB 相当于 SQL“TOP”

> ID：13310934
> 
> 赞同：10
> 
> 时间：2012-11-09T15:29:22.107
> 
> 标签：jquery, mongodb, jqgrid

从MONGODB 中用户等效 sql 查询中选择 Top 10 a, b

作为 jqgrid 保存 json 数据和从数据库检索 json 数据的功能的一部分，我需要在 MONGODB 中进行这个简单的 SQL 查询。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-09T15:35:34.627

```
.limit() 
```

例子：

```
db.things.find().limit(10) 
```

文档： [http ://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Blimit%28%29%7D%7D](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Blimit%28%29%7D%7D)

根据下面的评论，从技术上讲，您也想对集合进行排序，所以它将是：

```
db.things.find().sort({someField:1}).limit(10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:35:56.173

简短的问题，简短的回答：您可以通过`sort()`and`limit()`

# python - 美丽的汤错误：' '对象没有属性'内容'？

> ID：13310936
> 
> 赞同：1
> 
> 时间：2012-11-09T15:29:22.327
> 
> 标签：python, django, web-scraping, beautifulsoup

我正在编写一个脚本，从文章中提取内容并删除任何不必要的内容，例如。脚本和样式。Beautiful Soup 不断引发以下异常：

```
'<class 'bs4.element.Tag'>' object has no attribute 'contents' 
```

下面是 trim 函数的代码（element 是包含网页内容的 HTML 元素）：

```
def trim(element):
    elements_to_remove = ('script', 'style', 'link', 'form', 'object', 'iframe')
    for i in elements_to_remove:
        remove_all_elements(element, i)

    attributes_to_remove = ('class', 'id', 'style')
    for i in attributes_to_remove:
        remove_all_attributes(element, i)

    remove_all_comments(element)

    # Remove divs that have more non-p elements than p elements
    for div in element.find_all('div'):
        p = len(div.find_all('p'))
        img = len(div.find_all('img'))
        li = len(div.find_all('li'))
        a = len(div.find_all('a'))

        if p == 0 or img > p or li > p or a > p:
            div.decompose() 
```

查看堆栈跟踪，问题似乎出在 for 语句之后的此方法：

```
 # Remove divs that have more non-p elements than p elements
    for div in element.find_all('div'):
        p = len(div.find_all('p')) # <-- div.find_all('p') 
```

我不明白为什么这个 bs4.element.Tag 实例没有“内容”属性？我在一个实际的网页上尝试过，元素充满了 p 和 img ......

这是回溯（这是我正在处理的 Django 项目的一部分）：

```
Environment:

Request Method: POST
Request URL: http://localhost:8000/read/add/

Django Version: 1.4.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'home',
 'account',
 'read',
 'review')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/home/marco/.virtualenvs/sandra/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/marco/sandra/read/views.py" in add
  24\.             Article.objects.create_article(request.user, url)
File "/home/marco/sandra/read/models.py" in create_article
  11\.         title, content = logic.process_html(web_page.read())
File "/home/marco/sandra/read/logic.py" in process_html
  7\.     soup = htmlbarber.give_haircut(BeautifulSoup(html_code, 'html5lib'))
File "/home/marco/sandra/read/htmlbarber/__init__.py" in give_haircut
  45\.     scissor.trim(element)
File "/home/marco/sandra/read/htmlbarber/scissor.py" in trim
  35\.         p = len(div.find_all('p'))
File "/home/marco/.virtualenvs/sandra/local/lib/python2.7/site-packages/bs4/element.py" in find_all
  1128\.         return self._find_all(name, attrs, text, limit, generator, **kwargs)
File "/home/marco/.virtualenvs/sandra/local/lib/python2.7/site-packages/bs4/element.py" in _find_all
  413\.                 return [element for element in generator
File "/home/marco/.virtualenvs/sandra/local/lib/python2.7/site-packages/bs4/element.py" in descendants
  1140\.         if not len(self.contents):
File "/home/marco/.virtualenvs/sandra/local/lib/python2.7/site-packages/bs4/element.py" in __getattr__
  924\.             "'%s' object has no attribute '%s'" % (self.__class__, tag))

Exception Type: AttributeError at /read/add/
Exception Value: '<class 'bs4.element.Tag'>' object has no attribute 'contents' 
```

这是 remove_all_* 函数的源代码：

```
def remove_all_elements(element_to_clean, unwanted_element_name):
    for to_remove in element_to_clean.find_all(unwanted_element_name):
        to_remove.decompose()

def remove_all_attributes(element_to_clean, unwanted_attribute_name):
    for to_inspect in [element_to_clean] + element_to_clean.find_all():
        try:
            del to_inspect[unwanted_attribute_name]
        except KeyError:
            pass

def remove_all_comments(element_to_clean):
    for comment in element_to_clean.find_all(text=lambda text:isinstance(text, Comment)):
        comment.extract() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:45:59.730

我认为问题是`remove_all_elements`在您的代码中或其他地方您正在删除`contents`某些标签的属性。

当你打电话时，这似乎正在发生`to_remove.decompose()`。这是该方法的来源：

```
def decompose(self):
    """Recursively destroys the contents of this tree."""
    self.extract()
    i = self
    while i is not None:
        next = i.next_element
        i.__dict__.clear()
        i = next 
```

如果您手动调用此函数，会发生以下情况：

```
>> soup = BeautifulSoup('<div><p>hi</p></div>')
>>> d0 = soup.find_all('div')[0]
>>> d0
<div><p>hi</p></div>
>>> d0.decompose()
>>> d0
Traceback (most recent call last):
...
Traceback (most recent call last):
AttributeError: '<class 'bs4.element.Tag'>' object has no attribute 'contents' 
```

看起来，一旦你调用`decompose`了一个标签，你就不能再尝试使用那个标签了。我不太确定这是在哪里发生的。

我会尝试检查的一件事是`len(element.__dict__) > 0`始终在您的`trim()`功能中。

# javascript - 运行 if 语句后的 jQuery 停止事件

> ID：13310938
> 
> 赞同：1
> 
> 时间：2012-11-09T15:29:27.153
> 
> 标签：javascript, if-statement

选择正确答案后如何使 if 语句停止？我是否需要将其更改为 if else，或者我可以尝试其他什么？

如果

```
if (!arraysEqual(answerKey, answers)) {
    alert('Please Try Again');
    return false;
}

if (arraysEqual(answerKey, answers)) {
    $("#bin ol").append('<a href="index.html" name="modal"><img id="correct" src="images/visSelect/seq_correct.png"></a>');
    return false;
}
}); 
```

否则（更新）

```
if (arraysEqual(answerKey, answers)) {
    $("#bin ol").append('<a href="index.html" name="modal"><img id="correct" src="images/visSelect/seq_correct.png"></a>');
    return false;
}else{
    alert('Please Try Again');
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:32:05.490

`if..else``arraysEquals`考虑到如果返回 true ，您将调用两次，看起来会更好。

在第一种情况下，`arraysEquals`如果返回 true，该函数将被调用两次。

但在第二种情况下..该函数在所有情况下都只会被调用一次，总的来说它对我来说看起来更清楚。

# f# - 与 F# 中的 Haskell GADT 和类型类最接近的是什么？

> ID：13310941
> 
> 赞同：8
> 
> 时间：2012-11-09T15:29:38.130
> 
> 标签：f#, typeclass, gadt

F# 是带有 OOP 的 ML。与 Haskell 广义代数数据类型和类型类最接近的是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-09T16:04:45.183

答案取决于您要解决的问题。F# 没有类型类和 GADT，因此没有直接映射。但是，F# 有多种机制可以用来解决通常在 Haskell 中使用 GADT 和类型类解决的问题：

*   如果您想表示对象结构并能够添加具有不同行为的新具体实现，那么您通常可以使用标准的 OO 和接口。

*   如果您想编写通用数字代码，您可以使用静态成员约束（[这里是一个示例](http://tomasp.net/blog/fsharp-generic-numeric.aspx)），这在*技术上*可能是最接近类型类的机制。

*   如果您想编写更高级的通用代码（如通用打印机或解析器），那么您通常可以使用[强大的 F# 运行时反射](http://msdn.microsoft.com/en-us/library/ee353491.aspx)功能。

*   如果您需要通过一组函数（执行代码所需的各种子操作）参数化代码，那么您可以传递接口的实现，如@pad 所示。

还有一种方法可以[在 F# 中模拟 Haskell 类型类](http://code.google.com/p/fsharp-typeclasses/)，但这通常不是 F# 惯用的解决方案，因为 F# 编程风格在很多方面与 Haskell 风格不同。一个相当标准的用法是定义重载运算符（请参阅[this SO answer](https://stackoverflow.com/questions/12971965/overloaded-inline-operators-in-f)）。

*在元层面上，问什么是另一种语言中的特征 X 的等价物通常会导致讨论混乱，因为 X 可能用于解决一种语言中的问题 A、B、C，而另一种语言可能提供不同的特征来解决相同的问题（或某些问题可能根本不存在）。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T16:11:00.997

在 F# 中，您经常将[接口](http://msdn.microsoft.com/en-us/library/dd233207.aspx)和[继承](http://msdn.microsoft.com/en-us/library/dd233225.aspx)用于这些目的。

[举例来说，这是一个使用接口和对象表达式](http://msdn.microsoft.com/en-us/library/dd233237.aspx)的简单类型类：

```
/// Typeclass
type MathOps<'T> =
    abstract member Add : 'T -> 'T -> 'T
    abstract member Mul : 'T -> 'T -> 'T

/// An instance for int
let mathInt = 
    { new MathOps<int> with
       member __.Add x y = x + y
       member __.Mul x y = x * y }

/// An instance for float
let mathFloat = 
    { new MathOps<float> with
       member __.Add x y = x + y
       member __.Mul x y = x * y }

let XtimesYplusZ (ops: MathOps<'T>) x y z =
    ops.Add (ops.Mul x y) z

printfn "%d" (XtimesYplusZ mathInt 3 4 1)
printfn "%f" (XtimesYplusZ mathFloat 3.0 4.0 1.0) 
```

它可能看起来不是很漂亮，但它是 F#-ish 的方式。对于使用操作字典的更类似于 Haskell 的解决方案，您可以查看[这个不错的答案](https://stackoverflow.com/questions/3664258/alternative-to-typeclasses)。

# javascript - 如何为 XHTML 应用程序解码 HTML 实体

> ID：13310946
> 
> 赞同：1
> 
> 时间：2012-11-09T15:29:48.633
> 
> 标签：javascript, html, xhtml, decode

如何为 XHTML 应用程序解码 HTML 实体？

例如，`$("<div/>").html("&middot;").text()`将引发 JavaScript 错误。

错误是：

> `[Exception... "An invalid or illegal string was specified" code: "12" nsresult: "0x8053000c (SyntaxError)"`

**编辑：XHTML 表示真正的 XHTML 应用程序，具有`application/xhtml+xml`Content-type。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:42:37.143

您可以`document.createEntityReference`在 JavaScript 代码级别 ( ) 使用或转义不适合您的文件编码的字符`\uxxxx`；但是，正如您在评论中指出的那样，`document.createEntityReference`它不适用于 Firefox：[https ://developer.mozilla.org/fr/docs/DOM/document.createEntityReference](https://developer.mozilla.org/fr/docs/DOM/document.createEntityReference)

或者，您可以使用自定义库，例如 php.js ： [http](http://phpjs.org/functions/html_entity_decode/)`html_entity_decode` : //phpjs.org/functions/html_entity_decode/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:33:24.030

尝试使用纯 JavaScript[`innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)属性而不是 jQuery 的`html()`方法：

```
var elem = document.createElement('div');
elem.innerHTML = '&middot;';

var text = $(elem).text();

alert(text); 
```

如果 jQuery 对 XHTML 有问题，您可以尝试完全避免它。代替`jQuery.text()`,[`textContent`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)可以使用属性（对于过时的 IE 版本，`innerText`可以使用）。

一般来说，在服务器端解码实体是有意义的。例如，在 PHP 中，有一个用于此目的的标准函数：[`html_entity_decode()`](http://www.php.net/manual/en/function.html-entity-decode.php).

# php - PHP中的全局变量与静态变量

> ID：13310949
> 
> 赞同：12
> 
> 时间：2012-11-09T15:30:03.157
> 
> 标签：php, static, global-variables

我正在用 PHP 创建一个基本框架。我需要将当前页面的数据传递给不同的函数，让它们修改并保存，然后再传递回要显示的页面。我最初计划将数据存储在全局变量中`$GLOBALS['data']`，但我开始认为使用全局变量是个坏主意。所以我在想，我会在系统类中放置一个静态变量，并使用`system::$data`. 所以，我的问题是，哪个会更好，为什么？

这：

```
$GLOBALS['data'] = array();
$GLOBALS['data']['page_title'] = 'Home';
echo $GLOBALS['data']['page_title']; 
```

或这个：

```
class system
{
    public static $data = array()
}

function data($new_var)
{
    system::$data = array_merge(system::$data, $new_var);
}

data(array('page_title' => 'Home'));
echo system::$data['page_title']; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T15:35:18.420

全局变量和变量之间确实没有区别`public static`。类变量的命名空间稍微好一点，但这几乎没有任何区别。两者都可以随时随地访问，并且都是全局状态。

碰巧，我刚刚写了一篇关于这个主题的详尽文章：
[How Not To Kill Your Testability Using Statics](http://kunststube.net/static/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:55:32.013

> 所以，我的问题是，哪个会更好，为什么？

您已经感觉到将所有这些都放入全局变量中存在一些问题。尽管您已经开发了一些将事物封装到类中的想法。

我认为这是一个很好的起点。让我们在烹饪中添加更多的香料，以便在开始时更流畅：

```
$data = new ArrayObject(array());
$data['page_title'] = 'Home'; 
```

您现在已经创建了一个可以传递包含数据的对象。只需传递`$data`到需要它的区域即可。不需要全局或全局静态变量。

您甚至可以稍后通过[`ArrayObject`](http://php.net/ArrayObject)使用您自己的类型扩展来使该类型更加具体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-22T13:49:20.673

作为记录。

静态的优点：

代码的清晰度。例如：

```
function fn() { 
   System::data()
 } 
```

相对

```
function fn() { 
   global $system;
   $system->data()
 } 
```

静态的缺点：

*   如果您使用的是 psr-4，那么您必须添加（并包含）一个新类（和一个新文件）。即使您使用 opcache，它也会影响性能（opcache 可以减轻它，但它不是魔术）。
*   您必须定义一个代码块。

# xml - Filemaker 脚本 - XML 导入

> ID：13310952
> 
> 赞同：4
> 
> 时间：2012-11-09T15:30:13.077
> 
> 标签：xml, filemaker

我有要导入 Filemaker 的 XML 文件，并且我设法创建了与 Filemaker 一起使用的 XSLT 文件。我还编写了一个脚本，将这些 XML 文件导入到我的数据库中。但是，我只能使用“添加新记录”的“匹配名称”导入顺序导入它。

“匹配名称”很好，但我想使用“将剩余数据添加为新记录”选项“更新搜索结果中的匹配记录”。这是可能的还是我应该将 XML 放入“XML”表中的 Filemaker 中，然后更新单独表中的记录？

我还将我的 XSLT 存储在 Filemaker 全局字段中并导出该字段以创建 XSLT 文件。Filemaker 在执行此操作时似乎会创建一个 UTF-16 文件。那种感觉让我很惊讶。我看错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T00:56:59.673

要设置映射，请使用对示例 XML 和 XSLT 文件的固定引用。在命令选项中输入它们，然后设置字段映射；它将解析文件并向您显示字段（和示例数据），以便您可以看到去哪里。准备好映射后，将引用替换为变量。

您也可以同时使用：添加*两*行，一行带有变量，另一行带有固定路径，如下所示：

```
$xml
Samples/Sample.xml 
```

FileMaker 文件引用可以有多个路径；FileMaker 将使用第一个有效的。当您运行脚本并将`$xml`变量设置为某个路径时，它将选择该路径；当您编辑脚本时，不会设置变量，因此它将跳过它并使用硬编码的 Sample.xml 代替。

是的，FileMaker 将文本保存为 UTF-16。如果您指定了正确的编码，您仍然可以将它用于 XSLT。或者，您可以将 XSLT 文件存储在*容器*字段中，并使用相同的导出字段步骤保存它们。这样您就可以使用任何编码（和任何格式；这是一种非常通用的方式）。

# android - Appcelerator HTTPClient 请求未与服务器进行身份验证

> ID：13310960
> 
> 赞同：2
> 
> 时间：2012-11-09T15:30:35.577
> 
> 标签：android, appcelerator

我似乎无法弄清楚这一点，我试着用谷歌搜索我的手指现在受伤了。

我正在向启用了 SSL 的 Domino 服务器执行 HTTPClient 请求。我的请求在 iOS 上测试时完美运行，但每次通过 Android 模拟器和移动 Web 测试时都失败。

我正在运行 Android 2.2 SDK。

当我尝试从应用程序登录时，我肯定会到达服务器，因为返回了 HTML（登录 Web 表单）。返回 HTML 时，要么意味着身份验证失败，要么意味着重定向不起作用。通过 iOS 登录时，页面重定向 100%。

下面是我的代码：

```
var orderReq = Titanium.Network.createHTTPClient();
var myurl = 'https://domain/db.nsf?login';
orderReq.setEnableKeepAlive;
orderReq.open('POST',myurl, false);

var params = {
username: "Joe Smith",
password: "Password",
redirectto: "path/db.nsf/response.xsp"
};
orderReq.send(params);

var myreturn = orderReq.responseText;

if((myreturn.charAt(0) === '<') || (myreturn === ""))
{
Ti.API.info('Fail');
return 'Fail';

}
else
{
Ti.API.info('Pass');
var json = orderReq.responseText;
var response = eval('(' + json + ')');
return response.username;
} 
```

我尝试了许多属性，但无济于事。我可以确认 Android Emulator 可以连接到 Internet。感觉就像没有传递参数或者没有在网页上触发重定向。

**注意：**我注意到通过 Android 模拟器进行身份验证时会立即失败，iOS 在 1-2 秒后返回 true 或 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T13:26:13.767

好的，我知道这个问题太老了。但是，对于任何正在寻找答案的人来说，这对我有用。

1.  确保在将参数发送到服务器之前对其进行字符串化

`orderReq.send(JSON.stringify(params));`

1.  在行之后包括以下内容 - orderReq.open('POST',myurl, false);

`xhr.setRequestHeader('Content-Type', 'application/json');` `xhr.setRequestHeader('charset','utf-8');`

# azure - 在 Azure 模拟器中加载 Web 角色会导致 BadImageFormatException

> ID：13310961
> 
> 赞同：3
> 
> 时间：2012-11-09T15:30:39.507
> 
> 标签：azure, azure-web-roles

我有一个 ASP.NET MVC 项目，当我直接启动它时可以正常加载。当我尝试使用 Azure SDK 的模拟器运行它时，出现以下异常：

无法加载文件或程序集 'file:///C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\62253e0e\13ba4ff3\App_global.asax.a-wnopwm.dll' 或它的依赖项之一。试图加载格式不正确的程序。

这通常表示类似于对 32 位系统上的 64 位程序集的引用，但我从未在 ASP.NET 项目 dll 上看到此错误。项目配置设置为 AnyCPU。是什么赋予了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T20:34:07.167

问题是由于我在使用 VS 2012 的性能分析（分析）工具时向 web.config 文件的 system.web/compilation 元素添加了 assemblyPostProcessorType 属性。它似乎并没有很好地自行清理，并且配置留在原地，导致明显的组装平台不匹配。由于后期生成程序集不可用，因此在发布到 Windows Azure 时也会出现问题。

解决方案是向 Web 配置转换添加转换以删除属性 (assemblyPostProcessorType)。

# android - 谷歌电视申请

> ID：13310965
> 
> 赞同：2
> 
> 时间：2012-11-09T15:30:49.753
> 
> 标签：android, android-emulator, google-tv

我正在开发 Google Android TV 应用程序。

我的应用程序必须从社交网站下载图像，然后在 Google Android TV 处于空闲状态时将图像作为屏幕保护程序播放。

获取图像不是问题，我已经完成了。

我找不到任何屏幕保护程序的 API 或 Google API 的设置。我无法理解如何拉取下载的图像以在屏幕保护程序中播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:41:44.730

您需要一个计时器，它会在一定的时间间隔检查[`onUserInteraction()`](http://developer.android.com/reference/android/app/Activity.html#onUserInteraction%28%29)，当用户不交互时，您需要以全屏模式开始您的活动，播放所有图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:04:16.560

[使用apache](http://hc.apache.org/) http api 获取 url 和图像很容易下载图像，但将它们放在异步任务中。您还可以使用[LazyList](http://androidsnips.blogspot.com/2010/08/lazy-loading-of-images-in-list-view-in.html)之类的内容加载图像。下载图像后，您也可以在广告中使用 Imageview 轻松显示它，并在用户不活动时通过计时器检查 onUserInteraction()。

此外，您可能想查看这些问题和小组答案：

[Android禁用屏幕保护程序](https://stackoverflow.com/q/6290094/346309)

[谷歌电视申请](https://stackoverflow.com/q/13310965/346309)

[谷歌群组](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/7fv-BhOxkyc)

# java - 新消息的getMessage会强制在Spring ReloadableResourceBundleMessageSource中重新加载吗？

> ID：13310968
> 
> 赞同：1
> 
> 时间：2012-11-09T15:30:51.670
> 
> 标签：java, spring, internationalization

我在文档中找不到这个：

假设我有一个 ReloadableResourceBundleMessageSource，如果我为刚刚添加到属性文件的属性调用 getMessage() 并使用另一个进程，这是否会强制重新加载，因为该属性尚不存在（未缓存），还是会这样抛出异常？

我是否必须等待下一次 cacheRefresh 才能访问该属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:39:42.470

它会抛出异常，直到缓存超时。评估文件的最后修改时间戳，`refreshProperties()`但这仅在缓存超时后发生。

如果这是一个 Web 应用程序，我建议创建一个调用`clearCache()`. 然后，您的外部进程可以编写新的属性文件并调用服务以及时强制刷新。

# java - 保存到二进制文件

> ID：13310972
> 
> 赞同：-1
> 
> 时间：2012-11-09T15:31:13.060
> 
> 标签：java, file, binary

我想使用 java 将数据保存到二进制文件中。例如，我有数字 101，在我的程序中，输出文件有 4 个字节。如何在输出文件中仅将数字保存为三位（101）？我的程序如下所示：

```
public static void main(String args[]) throws FileNotFoundException, IOException {
    int i = 101;
    DataOutputStream os = new DataOutputStream(new FileOutputStream("file"));
    os.writeInt(i);
    os.close();
} 
```

我发现了类似的东西：http: [//www.developer.nokia.com/Community/Wiki/Bit_Input/Output_Stream_utility_classes_for_efficient_data_transfer](http://www.developer.nokia.com/Community/Wiki/Bit_Input/Output_Stream_utility_classes_for_efficient_data_transfer)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:38:29.273

您不能向文件写入少于一个字节。如果你想写二进制数 101 然后做`int i = 5`并`os.write(i)`改用。这将写入一个字节：0000 0101。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:45:12.897

首先，您不能只将 3 位写入文件，内存以特定值对齐（8、16、32、64 甚至 128 位，这是编译器/平台特定的）。如果您编写的尺寸小于该尺寸，它们将被扩展以匹配对齐方式。

其次，十进制数101，用二进制写成0b01100101。二进制数 0b00000101 是十进制 5。

第三，这些数字现在只有 1 个字节（8 位）长，因此您可以使用 char 代替 int。

最后但并非最不重要的一点是，要编写非整数，请使用`os.write()`

所以要得到你想要的，首先检查你是想写0b01100101还是0b00000101。将 int 更改为 char 并更改为适当的数字（您可以在 Java 中编写 0b01100101）。并使用 os.write()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:14:38.800

一个非常幼稚的实现，我希望它可以帮助您掌握这个想法。也未经测试，可能包含一个错误等...

```
class BitArray {
  // public fields for example code, in real code encapsulate
  public int bits=0; // actual count of stored bits
  public byte[] buf=new byte[1];

  private void doubleBuf() {
    byte [] tmp = new byte[buf.length * 2];
    System.arraycopy(buf, 0, tmp, 0, buf.length);
    buf = tmp;
  }

  private int arrayIndex(int bitNum) {
    return bitNum / 8;
  }

  private int bitNumInArray(int bitNum) {
    return bitNum & 7; // change to change bit order in buf's bytes
  }

  // returns how many elements of buf are actually in use, for saving etc.
  // note that last element usually contains unused bits.
  public int getUsedArrayElements() {
    return arrayIndex(this.bits-1) + 1;
  }

  // bitvalue is 0 for 0, non-0 for 1
  public void setBit(byte bitValue, int bitNum) { 
    if (bitNum >= this.bits || bitNum < 0) throw new InvalidArgumentException();
    if (bitValue == 0) this.buf[arrayIndex(bitNum)] &= ~((byte)1 << bitNumInArray(bitNum));
    else this.buf[arrayIndex(bitNum)] |= (byte)1 << bitNumInArray(bitNum);
  }

  public void addBit(int bitValue) {
    // this.bits is old bit count, which is same as index of new last bit
    if (this.buf.length <= arrayIndex(this.bits)) doubleBuf(); 
    ++this.bits;
    setBit(bitValue, this.bits-1);
  }

  int readBit(int bitNum) {  // return 0 or 1
    if (bitNum >= this.bits || bitNum < 0) throw new InvalidArgumentException();
    byte value = buf[arrayIndex(bitNum)] & ((byte)1 << bitNumInArray(bitNum));
    return (value == 0) ? 0 : 1;
  }

  void addBits(int bitCount, int bitValues) {
    for (int num = bitCount - 1 ; num >= 0 ; --num) {
      // change loop iteration order to change bit order of bitValues
      addBit(bitValues & (1 << num));
    }
} 
```

对于有效的解决方案，它应该使用 int 或 long 数组而不是 byte 数组，并包括更有效的多位相加方法（一次添加`bitValues`整个`buf`数组元素的一部分，而不是像上面那样逐位添加）。

要保存它，您需要从 buf 中保存正确数量的字节，由`getUsedArrayElements()`.

# mysql - 表连接以在一行中返回结果。

> ID：13310976
> 
> 赞同：-4
> 
> 时间：2012-11-09T15:31:35.027
> 
> 标签：mysql, pivot

我有两个表，需要创建一个 mysql 视图，在一行中给出结果。

目前我使用连接，但这给了我作为行而不是列的记录。我尝试了枢轴但无法使其工作。我需要一排工作的油漆时间、铅垂时间和其他（其他一切都在其他）。

表结构在这里：

![在此处输入图像描述](../Images/0a8f77a334639f62d220d7508c2f493b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:43:50.650

这基本上是一个`PIVOT`，不幸的是 MySQL 没有 PIVOT 函数，但您可以使用带有`CASE`语句的聚合函数：

```
select jobnum,
  sum(case when tasktype = 'paint' then hrs else 0 end) Paint,
  sum(case when tasktype = 'plumb' then hrs else 0 end) plumb,
  sum(case when tasktype not in ('paint', 'Plumb') then hrs else 0 end) Other
from tablea a
left join tableb b
  on a.id = b.tbla_id
group by jobnum 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/a504e/2)

结果：

```
| JOBNUM | PAINT | PLUMB | OTHER |
----------------------------------
|      1 |    10 |    10 |    20 |
|      2 |    25 |     0 |     0 | 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T15:58:44.763

```
SELECT
    a.`JobNum`,
    SUM(IF(a.`TaskType`='Paint',b.`Hrs`,0)) AS 'Paint',
    SUM(IF(a.`TaskType`='Plumb',b.`Hrs`,0)) AS 'Plumb',
    SUM(IF(a.`TaskType` IN('Paint','Plumb'),0,b.`Hrs`)) AS 'Other'
FROM `tableA` a
INNER JOIN `tableB` b
ON b.`tblAid`=a.`id`
GROUP BY a.`JobNum` 
```

# c# - 如何使用 WCF NetHttpBinding（WebSockets）通过服务器向所有客户端广播（推送）一个客户端发送的消息？

> ID：13310978
> 
> 赞同：5
> 
> 时间：2012-11-09T15:31:42.777
> 
> 标签：c#, wcf, windows-8, websocket

在 .NET 4.5 中，引入了一个新的 WCF 绑定 NetHttpBinding，它使用 WebSocket 协议作为其底层传输。这意味着这可以实现从服务器的真正推送。现在，我已经能够使用这样的回调合约进行某种推送：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)]
public class WebSocketSampleService : IDuplexContract
{
    public string SayHelloDuplex()
    {
        //push to the current caller
        OperationContext.Current.
            GetCallbackChannel<IDuplexCallbackContract>().
            SayingHello("Hello from WebSockets");

        //answer the current caller in the regular http way
        return "Hello";
    }
}
[ServiceContract(CallbackContract=typeof(IDuplexCallbackContract))]
public interface IDuplexContract
{
    [OperationContract]
    string SayHelloDuplex(string name);
}
[ServiceContract]
public interface IDuplexCallbackContract
{
    [OperationContract]
    void SayingHello(string message);
} 
```

不过，我想做的是在单个客户端调用方法时向所有客户端广播消息`SayHelloDuplex()`。有没有办法访问所有客户端的回调通道？或者我应该记录所有客户端的回调通道以供以后在其他方法中使用（例如`Connect()`）？也许我以错误的方式解决了这个问题？

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-20T12:33:56.383

每个客户端的回调通道都是唯一的，因此无法访问所有客户端的回调通道。

相反，您应该将每个客户端的回调通道保存在列表中，甚至更好地保存在字典中，以便您可以针对特定客户端。

然后，当您想向所有客户端广播消息时，只需查看列表即可。

# symfony - Symfony2 和 Doctrine：如何进行原子操作？

> ID：13310979
> 
> 赞同：2
> 
> 时间：2012-11-09T15:31:44.793
> 
> 标签：symfony, doctrine-orm

想象一下这个场景：

我有一些必须从数据库中删除的实体的 id 数组（即几个外部键，用于标识第三个表中的记录）和一些必须更新/插入的实体的 id 数组（基于一些在此时无关紧要的标准）。

我能做些什么来删除这些实体？

*   从数据库加载它们（存储库方式）
*   调用`delete()`获取的对象
*   致电`flush()`我的实体经理

在那种情况下，我可以使我的所有操作成为原子操作，因为我可以在 call 之前更新/插入其他记录`flush()`。

但是为什么我要从数据库中加载一些记录只是为了删除它们？所以我写了我的个人 DQL 查询（到 repo 中）并调用它。
问题是，如果我将该函数调用到我的 repo 中，此操作会立即完成，因此无法保证我的“原子性”。

那么，我怎样才能通过遵循第二个“删除选项”来“跳过”这个障碍呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:21:34.673

通过使用`flush()`您正在使 Doctrine[隐式启动事务](http://docs.doctrine-project.org/en/2.0.x/reference/transactions-and-concurrency.html#approach-1-implicitly)。也可以[显式使用事务](http://docs.doctrine-project.org/en/2.0.x/reference/transactions-and-concurrency.html#approach-2-explicitly)，这种方法应该可以解决您的问题。

# wpf - WPF 应用程序前端 后端

> ID：13310980
> 
> 赞同：0
> 
> 时间：2012-11-09T15:31:49.800
> 
> 标签：wpf

我正在寻找一些建议/指导来重新设计我们提供的核心应用程序。我正在寻找构建我们通过 Citrix Xenapp 服务器托管的 WPF 应用程序。此应用程序是用于保存记录的定制数据库。我希望将其分成两个不同的部分，但两者都将为服务器运行。所有客户端的前端都是相同的，每个客户端都有多个用户，后端将保存该客户端将填写的特定文档。我希望这些分开，以便我可以独立更新它们中的每一个。

任何类似的信息或链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:05:26.790

让 WPF 客户端连接到 WCF 服务。

[什么是 Windows 通信基础](http://msdn.microsoft.com/en-us/library/ms731082.aspx)

厌倦了辩论 HighCore 所以让我扩展我的答案。

这正是我在商业应用程序中所做的。Citrix 上的客户端至于安全性，我们需要托管客户端。在 WCF 中托管服务。对于生产，服务在一个单独的盒子上，但对于测试，服务在同一个盒子上。

服务方法允许您单独更新，然后只指向新端点。您甚至可以针对当前生产端点测试新客户端，然后将新客户端投入生产。

您可以将不同的参数传递给相同的后端或具有不同的后端。我们都有。

# c# - 发布表单在模型中获取空值

> ID：13310984
> 
> 赞同：0
> 
> 时间：2012-11-09T15:32:03.567
> 
> 标签：c#, asp.net-mvc-3, razor, viewmodel

当我提交表单时，我的 ViewModel 中的课程列表得到空值。这是我的视图模型：

```
public class CandidateViewModel
{
    public string Name { get; set; }
    public IList<CourseViewModel> Courses { get; set; }

    public CandidateViewModel()
    {
        Name = "Kiwanax";
        Courses = new List<CourseViewModel>();
        for (int count = 0; count < 5; ++count)
        {
            Courses.Add(new CourseViewModel( 
                string.Format("Course_{0}", count), 5));
        }
    } 
}

public class CourseViewModel
{
    public long ID { get; set; }
    public string Name { get; set; }
    public OptionViewModel SelectedOption { get; set; }
    public IList<OptionViewModel> Options { get; set; }

    public CourseViewModel(string name, int numberOfOptions) 
    {
        Name = name;
        Options = new List<OptionViewModel>();
        for (int count = 1; count <= numberOfOptions; ++count)
        {
            Options.Add(new OptionViewModel(count.ToString(), 
                string.Format("Option {0}", count)));
        }
        SelectedOption = Options[0];
    }
}

public class OptionViewModel
{
    public string Value { get; set; }
    public string Description { get; set; }
} 
```

好的。当我根据我的 IList 创建 DropDownLists 时，它工作正常。

```
<ul id="cursos">
@for (int count = 0; count < Model.Courses.Count; ++count)
{
    <li>
        @Html.DropDownListFor(i => i.Courses[count].SelectedOption,
            new SelectList(Model.Courses[count].Options, "Value", "Description", Model.Courses[count].SelectedOption))
                @Html.HiddenFor(i => i.Courses[count].ID)
                @Model.Courses[count].Name
            </li>
        }
        </ul> 
```

但是，当我从我的表单中发布时，我会从该 IList 中获取空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:59:23.193

您不能将下拉菜单绑定到复杂的属性值：

```
i => i.Courses[count].SelectedOption 
```

它必须绑定到将发送到服务器的相应原始类型：

```
i => i.Courses[count].SelectedOption.Value 
```

请记住，在 HTML 中，`<select>`元素仅将选定的值作为简单的字符串类型发送到服务器。

# symfony - Symfony2 多域登陆页面

> ID：13310989
> 
> 赞同：0
> 
> 时间：2012-11-09T15:32:09.237
> 
> 标签：symfony

我需要将许多域附加到 sf2 的单个实例......并根据请求的域、geopip、语言应用特定视图。而且我需要它在添加新域和新“主题”的方式上很容易。

我已经研究过 liip，但我不确定这是最好的方法。

任何想法 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:58:07.100

如果您的应用程序必须管理具有不同布局和模板的多个域，那么您必须使用[LiipThemeBundle](https://github.com/liip/LiipThemeBundle)

此捆绑包为您提供添加主题的可能性。在你的 bundle 目录中，它会在 Resources/themes/ 下查找，如果没有找到匹配的文件，它会返回到正常的 Resources/views。

[在此处](https://github.com/liip/LiipThemeBundle/blob/master/README.md)阅读包含示例的[文档](https://github.com/liip/LiipThemeBundle/blob/master/README.md)

# java - 将 findbugs NotNull 设置为包下所有类的默认值

> ID：13310994
> 
> 赞同：10
> 
> 时间：2012-11-09T15:32:14.923
> 
> 标签：java, findbugs

我有下面的简单代码，用于`@NonNull`使用 Maven 测试 FindBugs 注释。我执行

```
mvn clean install 
```

并且它正确地无法构建，因为它`print(null)`违反了非空条件。

您可以`NonNull`使用类注释将类内的所有方法参数设置为默认值

```
@DefaultAnnotation(NonNull.class) 
```

如何`NonNull`将给定包（和子包）下所有类中的所有方法参数设置为默认值？

**`src/main/java/test/Hello.java`**

```
package test;
import edu.umd.cs.findbugs.annotations.NonNull;
public class Hello {
    static public void print(@NonNull Object value) {
        System.out.println("value: " + value.toString());
    }

    static public void main(String[] args) {
        if (args.length > 0) {
            print(args[0]);
        } else {
            print(null);
        }
    }
} 
```

**`pom.xml`**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>hello</groupId>
  <artifactId>hello</artifactId>
  <version>1.0</version>

  <dependencies>
    <dependency>
      <groupId>net.sourceforge.findbugs</groupId>
      <artifactId>annotations</artifactId>
      <version>1.3.2</version>
    </dependency>
    <dependency>
      <groupId>net.sourceforge.findbugs</groupId>
      <artifactId>jsr305</artifactId>
      <version>1.3.7</version>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>findbugs-maven-plugin</artifactId>
        <version>2.5.2</version>
        <configuration>
          <includeTests>true</includeTests>
        </configuration>
        <executions>
          <execution>
            <phase>compile</phase>
            <goals>
              <goal>check</goal>
            </goals>
          </execution>
          <execution>
            <id>findbugs-test-compile</id>
            <phase>test-compile</phase>
            <goals>
              <goal>check</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-10T05:25:41.913

您可以对单个包执行此操作，但我还没有找到将其传播到子包的方法。对于方法参数，使用内置的包注释[`@ParametersAreNonnullByDefault`](http://jsr-305.googlecode.com/svn/trunk/javadoc/javax/annotation/ParametersAreNonnullByDefault.html)。将注释应用到包`package-info.java`目录中其文件中的包。

> 请注意，我使用的是FindBugs 认可的[JSR-305](http://mvnrepository.com/artifact/com.google.code.findbugs/jsr305/2.0.1)`javax.annotation`中的注释。

**`com/example/foo/package-info.java`**

```
/**
 * Package that doesn't allow null values as method parameters.
 */
@ParametersAreNonnullByDefault
package com.example.foo;

import javax.annotation.ParametersAreNonnullByDefault; 
```

对于字段和方法返回值，您需要创建自己的注释。我通过复制源代码`ParametersAreNonnullByDefault`并更改`ElementType`枚举来做到这一点。

**`com/example/util/FieldsAreNonnullByDefault.java`**

```
package com.example.util;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

import javax.annotation.Nonnull;
import javax.annotation.meta.TypeQualifierDefault;

/**
 * Applies the {@link Nonnull} annotation to every class field unless overridden.
 */
@Documented
@Nonnull
@TypeQualifierDefault(ElementType.FIELD)  // <-- use METHOD for return values
@Retention(RetentionPolicy.RUNTIME)
public @interface FieldsAreNonnullByDefault
{
    // nothing to add
} 
```

几个月前，我开始从头开始重写一个相当复杂的系统，每个包都应用了这三个注释（字段、参数和返回值）。避免使用值的动机带来的一个好处是`null`在适当的情况下使用空对象模式。再加上尽可能多地偏爱 final 字段和只做一件事的小类，确实保持了代码的整洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-29T21:51:54.130

您可以通过将这些行放在您的 package-info.java 中来同时对参数、文件和方法返回值执行此操作：

```
@DefaultAnnotation(NonNull.class)
package com.my.package; 
```

当 findbugs 在该包中的代码上运行时，所有方法和字段都假定为非空，除非您使用 @CheckForNull 对其进行注释。

我也不知道如何将其应用于子包。我对每个包裹都这样做。

# git - git difftool --dir-diff 没有创建临时文件供 Beyond Compare 3 使用

> ID：13310995
> 
> 赞同：26
> 
> 时间：2012-11-09T15:32:13.930
> 
> 标签：git, msysgit, beyondcompare3

我正在尝试使用 git 的新（从 gi​​t 1.7.11 开始）目录 diff 命令，并将 Beyond Compare 3 作为 difftool，但没有创建临时文件。

例如：

`git difftool --dir-diff <branch1> <branch2>`

Beyond Compare 会打开与列出的正确目录和更改文件的目录比较。

但是，当我单击任何文件时，会出现以下错误：

`Unable to load C:\Users\<username>\AppData\Local\Temp\git-difftool.yG8V5\left\<path to some file>: The system cannot find the path specified`

所以，我检查`C:\Users\<username>\AppData\Local\Temp\git-difftool.yG8V5`目录是否存在，它不存在。

Beyond Compare 3 作为非目录差异和合并的差异工具可以正常工作。

我正在使用 git for Windows (msysgit) 1.8.0。

以下是相关的 .gitconfig 设置：

```
# External Visual Diff/Merge Tool
[diff]
    tool = bc3

[difftool "bc3"]
    path = "C:/Program Files (x86)/Beyond Compare 3/BComp.exe"

[merge]
    tool = bc3

[mergetool "bc3"]
    keepTemporaries = false
    trustExitCode = true
    keepBackup = false
    path = "C:/Program Files (x86)/Beyond Compare 3/BComp.exe" 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-30T00:31:05.960

[这里](http://theo.im/blog/2012/10/27/directory-comparison-for-git-difftool/)描述了一个解决方案。基本上，如果您修改 .gitconfig 以使用`BCompare.exe`而不是`BComp.exe`，控制台会话将保持打开状态，直到 Beyond Compare 窗口关闭。

修改您的 .gitconfig 设置为：

```
# External Visual Diff/Merge Tool
[diff]
    tool = bc3

[difftool "bc3"]
    path = "C:/Program Files (x86)/Beyond Compare 3/BCompare.exe" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-27T08:12:34.907

Scott Wegner 的回答有一个小缺点 - 如果您尝试同时运行 2 个比较，第二个将不起作用。这是因为 BCompare.exe 不运行第二个应用程序实例，因此过早关闭启动的进程。

遗憾的是，BCompare.exe 不理解`/solo`命令行选项，所以我在 Beyond Compare 3 安装目录中编写了一个小 bat 文件：

C:\Program Files (x86)\Beyond Compare 3\BCompD.bat

```
start /wait "" "%~dp0/bcomp.exe" %* /solo 
```

并将其用作工具

```
[difftool "bc3dir"]
    path = C:/Program Files (x86)/Beyond Compare 3/bcompd.bat
    cmd = \"C:/Program Files (x86)/Beyond Compare 3/bcompd.bat\" \"$LOCAL\" \"$REMOTE\" 
```

我不将其用作默认的 diff tol，因此我将其命名`bc3dir`并使用如下：

```
git difftool --dir-diff --tool=bc3dir 760be6d47d35b42a6a2409636b40a5521361e72f^ 760be6d47d35b42a6a2409636b40a5521361e72f 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-04T18:15:02.010

我尝试[了@ScottWegner](https://stackoverflow.com/a/13637243/5671993)的答案，但它仅在 Beyond Compare 尚未运行时才有效。[我在@SergeyAzarkevich](https://stackoverflow.com/a/42480677/5671993)的回答的帮助下找到了解决方案。这就是我在我的`.gitconfig`

```
[diff]
    tool = bc3
[difftool]
    prompt = false
[difftool "bc3"]
    cmd = \"c:/program files (x86)/beyond compare 3/bcompare.exe\" -solo \"$LOCAL\" \"$REMOTE\" 
```

注意`-solo`. 这会导致 Beyond Compare 生成程序的一个新实例。

在 Windows 上，我们应该使用该`/solo`选项，但由于`git difftool`命令生成`sh.exe`以处理其命令行，因此该`/solo`选项被错误地解释为路径。所以我必须用它作为`-solo`

With this option, I run `start git difftool --dir-diff`, so this will free up my command prompt, and a new prompt will continue waiting for the new instance of Beyond Compare to exit. This will also make sure that the temp files/folders created by `git` will continue to live till the diff tool exits.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-23T23:15:13.117

请注意，您还有另一种`git difftool --dir-diff`可能行为不端的情况。

" `git difftool --dir-diff`" 从子目录开始时有轻微的回归，该子目录已在 Git 2.12（2017 年第一季度）中修复。

请参阅[David Aguilar (](https://github.com/davvid) [)的](https://github.com/davvid)[提交 853e10c](https://github.com/git/git/commit/853e10c19755669bd4695b1d9fd81f3278466727)（2016 年 12 月 7 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 afe0e2a](https://github.com/git/git/commit/afe0e2a391665c01daae78d8f8a9a105420b0218))^(中，2016 年 12 月 19 日）)[`davvid`](https://github.com/davvid)
^([`gitster`](https://github.com/gitster))

> ## `difftool`：修复`dir-diff`子目录中的索引创建
> 
> [9ec26e7（`difftool`：修复子目录中的参数处理，2016-07-18，Git 2.9.3）](https://github.com/git/git/commit/9ec26e797781239b36ebccb87c590e5778358007)更正了路径参数在子目录中的处理方式，但它在子目录之外的条目如何处理方面引入了回归`dir-diff`。
> 
> 在准备差异的右侧时，我们只在临时区域中包含更改的路径。
> diff 的左侧是从一个临时索引构造的，该索引是从同一组更改的文件中构造的，但它是从子目录中构造的。
> 这是一个问题，因为索引路径是相对于顶层的，因此它们没有被添加到索引中。
> 
> 在准备其临时索引之前，教`difftool`到`chdir`存储库的顶层。
> 这确保了所有顶级相对路径都是有效的。