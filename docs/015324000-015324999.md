# StackOverflow 问答 15324000-15324999

# javascript - 带有普通按钮的 HTML5 表单必填字段（不是提交）

> ID：15324007
> 
> 赞同：1
> 
> 时间：2013-03-10T15:38:18.490
> 
> 标签：javascript, html

我有一些表单字段和一个保存按钮（不是提交类型）。我想使用实现 HTML5 所需的验证

然而，它似乎只适用于提交按钮而不是普通按钮。

我不能使用提交按钮，因为我的保存按钮上有自定义代码

```
$("#saveForm").click(function(){
        saveFormData();
        showView('detailsView','editView');
        setFormFieldValues();
    }) 
```

如何使用普通按钮实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:47:15.847

我认为您可以使用提交按钮。只需像这样在末尾添加 return false ：

```
$("#saveForm").click(function(){
    saveFormData();
    showView('detailsView','editView');
    setFormFieldValues();
    return false;     //stops the form being submitted
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:49:05.640

您可以使用表单提交事件并防止默认行为（发布到服务器）使用`e.preventDefault();`

```
$("form").on("submit",function(e){
    e.preventDefault();
    saveFormData();
    showView('detailsView','editView');
    setFormFieldValues();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T15:42:15.367

最好将您的自定义代码添加到表单的提交事件中：

```
$("form").on("submit",function(event){

    saveFormData();
    showView('detailsView','editView');
    setFormFieldValues();

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T15:42:35.040

这怎么样？

```
$("#saveForm").click(function(event){

    var emptyFields = $('input').filter('[required][value=""]');
    if (emptyFields.length === 0) {
       /* valid code here */
    } else {
       /* invalid code here */
       event.preventDefault(); // this stops the click event;
    }
} 
```

您可以使用循环遍历空字段`emptyFields.each()`

# java - 在 Java FileNotFoundException 中编写 XML

> ID：15324008
> 
> 赞同：8
> 
> 时间：2013-03-10T15:38:20.137
> 
> 标签：java, xml

我面临以下代码的一些问题

```
 try {
            DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

            //root elements
            Document doc = docBuilder.newDocument();

            Element rootElement = doc.createElement("subcompany");
            doc.appendChild(rootElement);

            //id elements
            Element id = doc.createElement("id");
            id.appendChild(doc.createTextNode(subCompanyId != null ? subCompanyId : " "));
            rootElement.appendChild(id);

            TransformerFactory transformerFactory = TransformerFactory.newInstance();
            Transformer transformer = transformerFactory.newTransformer();
            DOMSource source = new DOMSource(doc);

            transformer.setOutputProperty(OutputKeys.INDENT, "yes");
            transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");

            String xmlPath = "/project/MallDirectory/mall";

            //EDITED for File creation before writing.
            boolean isFileCreated = new File(xmlPath, "subcompany.xml").createNewFile();
            System.out.println(isFileCreated);                

            StreamResult result = new StreamResult(new File(xmlPath, "subcompany.xml"));

            transformer.transform(source, result);

        } catch (Exception ex) {
            ex.printStackTrace();
        } 
```

运行后，我收到以下错误：

```
javax.xml.transform.TransformerException: java.io.FileNotFoundException: file:/project/MallDirectory/mall/subcompany.xml (No such file or directory) 
```

它曾经在我的另一个项目上工作，但这次不是。这里到底出了什么问题？

**已编辑：**

这是我要写入的路径。该文件已创建，但它是空的。

![在此处输入图像描述](../Images/3eb47753da09c2f5e78838123e48bb35.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-11T04:19:20.170

我设法解决了这个问题。

这是错误：

```
javax.xml.transform.TransformerException: java.io.FileNotFoundException: file:/project/MallDirectory/mall/subcompany.xml (No such file or directory) 
```

我在想也许变压器正在尝试将 xml 写入此路径“文件：/project/MallDirectory/mall/subcompany.xml”。我不知道它是怎么发生的，因为我专门设置了文件路径'/project/MallDirectory/mall/subcompany.xml'，并且没有以'file：/'为前缀。

因此，我设法通过这样做来解决它：

```
...

//ERROR CODE:
//StreamResult result = new StreamResult(new File(xmlPath, "subcompany.xml"));
//
StreamResult result = new StreamResult(new File(xmlPath, "subcompany.xml").getPath());
transformer.transform(source, result);

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:43:19.897

在任何时间点可以处于打开状态的文件数量是特定于操作系统的（当然，可以配置）并且您已达到上限。查看您的应用程序的代码库，是否有一些尝试打开文件但在使用后不关闭流的代码。检查此类代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T15:43:33.747

您定义的目录路径不正确。查看 JavaDoc 以确定您需要哪种形式的目录路径才能到达您的文件位置。

[JavaDoc java.io.File](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#File%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T15:49:22.130

如果“/project”是您的项目名称，则尝试“./MallDirectory/mall”，否则尝试“./project/MallDirectory/mall”。请仔细观察其中包含点的字符串。

# c++ - 2个类之间的双向关联

> ID：15324009
> 
> 赞同：4
> 
> 时间：2013-03-10T15:38:24.977
> 
> 标签：c++, visual-c++, visual-studio-2012

我想在两个类之间创建一个双向关联。例如`class A`has`class B`作为其私有属性和`class B`has`class A`作为其私有属性。

我得到的错误主要是：

```
Error   323 error C2653: 'Account' : is not a class or namespace name   
Error   324 error C2143: syntax error : missing ';' before '{' 
```

（我收到很多这样的错误）

我相信这些错误与我如何在 account.h 中包含 paymentMode.h 有关，反之亦然。我尝试评论其中一个课程中的一项内容，并且一切正常。请问如何消除此类错误，同时我仍然可以在 account 和 paymentMode 类之间进行双向关联？

谢谢！

附上我写的代码。

```
 //paymentMode.h

    #pragma once
    #ifndef _PAYMENTMODE_H
    #define _PAYMENTMODE_H

    #include <string>
    #include <iostream>
    #include <vector>
    #include "item.h"
    #include "account.h"

    using namespace std;

    class PaymentMode
    {
    private:
        string paymentModeName;
        double paymentModeThreshold;
        double paymentModeBalance; //how much has the user spent using this paymentMode;
        vector<Account*> payModeAcctList;

    public:
        PaymentMode(string);
        void pushItem(Item*);

        void addAcct(Account*);

        string getPaymentModeName();
        void setPaymentModeName(string);

        void setPaymentModeThreshold(double);
        double getPaymentModeThreshold();

        void setPaymentModeBal(double);
        double getPaymentModeBal();
        void updatePayModeBal(double);

        int findAccount(string);
        void deleteAccount(string);

    };

    #endif

              //account.h

#pragma once
#ifndef _ACCOUNT_H
#define _ACCOUNT_H

#include <string>
#include <iostream>
#include <vector>
#include "paymentMode.h"

using namespace std;

class Account
{
private:
    string accountName;
    //vector<PaymentMode*> acctPayModeList;
    double accountThreshold;
    double accountBalance; //how much has the user spent using this account.

public:
    Account(string);

    //void addPayMode(PaymentMode*);
    //int findPayMode(PaymentMode*);

    string getAccountName();
    void setAccountName(string);

    void setAccountThreshold(double);
    double getAccountThreshold();

    void setAccountBal(double);
    double getAccountBal();
    void updateAcctBal(double);

};

#endif 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T15:40:18.750

您有一个循环包含依赖项，但在这种情况下，由于 A 类仅包含 B 类指针的容器，反之亦然，您可以使用前向声明，并将包含放在实现文件中。

所以，而不是

```
 #include "account.h" 
```

采用

```
class Account; 
```

不相关：不要放入`using namespace std`头文件，如果可能的话，不要放。有关该问题的更多信息，请参见[此处](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)。

# haskell - 什么是从列表中提取元素并返回元素以及元组中列表的其余部分的有效方法？

> ID：15324010
> 
> 赞同：2
> 
> 时间：2013-03-10T15:38:41.250
> 
> 标签：haskell

这似乎是一个非常常见的操作，但由于某种原因我在 hoogle 中找不到它。无论哪种方式，这都是一个有趣的思考练习。我天真的实现：

```
pluckL :: [a] -> Int -> Maybe ( a, [a] )
pluckL xs idx = if idx < length xs then Just $ pluck' xs idx else Nothing
where
    pluck' l n = let subl = drop n l in ( head subl, rest l n ++ tail subl )
    rest   l n = reverse $ drop ( length l - n ) $ reverse l 
```

我的主要抱怨是我翻转列表太多次，所以我正在寻找一种创造性的方式，你可以遍历列表一次并生成元组。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T15:50:52.590

永远不会有有效的方法。但至少可以有一个漂亮的方法：

```
pluckL xs i = case splitAt i xs of
    (b, v:e) -> Just (v, b ++ e)
    _ -> Nothing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T15:48:20.617

`reverse`如果您使用累加器，您可以在列表中进行越来越少的操作：

```
pluckL :: [a] -> Int -> Maybe (a, [a])
pluckL xs idx = pluck xs idx [] where
    pluck (x:xs) 0 acc = Just $ ( x, (reverse acc) ++ xs )
    pluck (x:xs) i acc = pluck xs (i-1) (x:acc)
    pluck [] i acc = Nothing 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T15:51:18.770

您可以使用**elem**检查 elem 是否在列表中，然后根据结果返回 Nothing 或使用**delete x**从列表中删除 x，例如，

```
pluckL :: Eq a => [a] -> a -> Maybe (a, [a]) 
pluckL xs0 x =  
    if (x `elem` xs0) 
    then Just (x, xs) 
    else Nothing
        where xs = delete x xs0 
```

# sql - SQL - 如何在单词末尾选择具有特定值的单词

> ID：15324012
> 
> 赞同：14
> 
> 时间：2013-03-10T15:38:55.353
> 
> 标签：sql, select

我是 sql 新手，我想知道如何在名为的列中找到值末尾的字母或符号`Name`？例如，如果我会找到我要写的东西，`select * from 'table' where 'Name' like '%es%'`但它会找到我所有的行都包含`es`
让我们说 - `lesl, pespe, mess`...但是如何编写 select ，它将只选择带有 `'es'`At the end of word 的值？...使用`regex`我将使用 `es\Z`.....提前谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-10T15:40:20.733

您必须删除最后一个`%`，因此它只会选择以 .*结尾*的单词`es`。

```
select * from table where Name like '%es' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-10T15:44:15.450

您目前正在匹配： `..where 'Name' like '%es%'`。

这相当于`anything, then 'es' then anything else`。

删除最后一个`%`更改 where to `anything then 'es'`。

简而言之..你需要`..where 'Name' like '%es'`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-21T15:41:08.127

查询 ..where 'Name' like '%es' 将查找名称以“ES”结尾的列。但是，如果我们需要查找名称以“E”或“S”结尾的列，则查询将是

..其中'名称'喜欢'％[ES]'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-05T02:12:03.227

您也可以使用正则表达式

```
select distinct city from station where city REGEXP '[aeiou]$'; 
```

资源：[了解更多关于 REGEXP](https://www.oreilly.com/library/view/mysql-cookbook/0596001452/ch04s08.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-05T06:43:58.270

1.  如果您想查找以“test”之类的名称开头的名称，请使用 => 从表中选择名称，其中名称类似于“test%”。
2.  如果您想查找以“test”之类的名称结尾的名称，请使用 => 从表中选择名称，其中名称类似于“%test”。
3.  如果要查找以 s 开头并以 h 结尾的名称，请使用 => 从名称类似于 's%' 的表中选择名称和名称类似于 '%h' 的名称，或者只是从名称类似于 's%h' 的表中选择名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-08T14:49:43.950

使用正则表达式运算符/函数尝试模式 [az]ed($)。

图案说明：

[az] - 匹配任何字母

es - 从字面上匹配 es

($) - 字符串结尾（所以请确保它后面没有任何字母）

完整查询将是：

```
select * from test 
where ingr regexp '[a-z]es($)' 
```

# sql - 检查创建表

> ID：15324014
> 
> 赞同：0
> 
> 时间：2013-03-10T15:39:09.770
> 
> 标签：sql, oracle

我有这个：

```
create table airport
(idairport varchar(1),
name varchar(1),
city varchar(1),
primary key(idairport)); 
```

是否可以检查一个城市的机场不超过3个？

编辑：

练习是：

![](../Images/158f84d0fa23788d1a025af241cbf293.png)

将概念模式转换为关系模型。我们想知道，对于每个机场，去过那里的飞机和可能的目的地。如果模型未标准化，则对其进行标准化以避免空值的存在。

约束：

*   没有任何航班离开一个机场并降落在同一个机场。
*   一个城市最多有三个机场。

解决方案必须是一组“CREATE TABLE”语句。尽可能多地表达完整性约束。由于关系转换而指定所有“NOT NULL”，并且仅指定这些。此外，您不应忘记定义必要的外键和备用键（UNIQUE+NOT NULL）。

翻译后（如果我没记错的话）：

```
create table aircraft
(idaircraft varchar(1),
seating varchar(1),
primary key(idaircraft));

create table destination
(idairportorigin varchar(1) references airport(idairport),
idairportdestination varchar(1) references airport(idairport),
idaircraft varchar(1),
check(idairportorigin <> idairportdestination),
primary key(idairportorigin, idairportdestination, idaircraft),
foreign key (idaircraft) references aircraft(idaircraft)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:45:26.817

这样的事情会告诉你。

```
 select city, count(city) citycount
 from airport
 group by city
 having count(city) >=3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:35:25.570

“能查到一个城市的机场不超过3个吗？”

不使用规范化数据模型，仅使用 create table 语句。

即使单独使用触发器也是不够的，因为读取一致性会阻止事务看到其他未提交的事务。

唯一安全的方法是使用存储计数的提交时物化视图，并在 MV 表的计数列上设置约束以防止其超过 3。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-10T15:55:12.727

如果您在数据库中编写触发器，则以下 sql 将为您提供机场计数-

`select count(idairport) from airport where city = 'entered city'`,

然后您可以在预插入或预更新触发器中放弃添加城市中的任何机场。

如果你使用一些编程 API，比如 jdbc 等 -

然后也通过上面的sql，您将在输入/更新任何数据之前计算机场数量，然后您可以从编码的这一点放弃添加/更新。

# c - 在 C 中字符串反转期间释放指针时的段错误

> ID：15324016
> 
> 赞同：1
> 
> 时间：2013-03-10T15:39:19.367
> 
> 标签：c, string, segmentation-fault

```
int main(int argc, char **argv){
    char *str = argv[1];
    size_t len = strlen(str);
    char *dst = calloc(len+1, sizeof(char));
    int i;
    for(i=len-1; i>=0; i--){
        memcpy(dst, str+i, 1);
        dst++;
    }
    *(++dst) = '\0';
    printf("%s\n", dst);
    free(dst);
    return 0;
} 
```

*为提高可读性而省略了错误检查*
我不明白为什么我会收到一条带有此消息的段错误：“glibc free(): invalid pointer:”
我正在尝试编写一个使用指针反转字符串的小程序，但是：
1）最后 printf 什么也不打印；
2）我有一个段错误

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T15:40:23.337

你有：

```
 char *dst = calloc(len+1, sizeof(char));
   /* ... */
   *(++dst) = '\0';
   /* ... */
   free(dst); 
```

您必须使用/`free`分配的指针。在这里你修改了它。复制它，以便以后可以使用。`malloc``calloc``free`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T15:42:02.167

问题是您正在更改计算中的指针。
尝试使用`temp`or`original`类似的：

```
int main(int argc, char **argv){
    char *str = argv[1];
    size_t len = strlen(str);
    char *dst = calloc(len+1, sizeof(char));
    char *origDst = dst;
    int i;
    for(i=len-1; i>=0; i--){
        memcpy(dst, str+i, 1);
        dst++;
    }
    *(dst) = '\0';
    printf("%s\n", origDst);
    free(origDst);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T15:48:24.530

有2点需要考虑。一是复制`calloc`ouah已经共享的原始指针。还有一点就是要消除指针在`NULL`存储时的增量，即`*(++dst) = '\0';`应该是`*dst = '\0';`。通过这 2 项更改，我可以毫无问题地运行您的程序。

# c++ - 让主线程等到所有其他 Qthread 完成

> ID：15324017
> 
> 赞同：9
> 
> 时间：2013-03-10T15:39:36.183
> 
> 标签：c++, qthread

有没有办法强制主线程等到从它创建的所有线程完成它们的工作，然后再完成程序。我是说：

```
int main(){
    QthreadClass a; // in cons' a thread is created and running
    QthreadClass b; // same as before

    *** wish to wait till both created thread finished their jobs ***

    return 0; 
```

}

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T15:51:19.853

那么，怎么样：

```
a.wait();
b.wait(); 
```

或者，您宁愿启动一个事件循环（通常用于 Qt 应用程序），当您的两个线程都结束时退出（QThread 发出 finished() 和 terminate() 信号）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T15:59:20.880

通常，使用 Qt，您将拥有一个基于 QApplication 的类，该类带有带有信号和插槽的事件循环，除非您愿意，否则它不会退出主函数。在这种情况下，您可以简单地将 QThread::finish() 信号连接到一个检查所有线程是否已完成的槽。

没有事件循环和信号/槽，Qt 线程没有 join() 方法，在其他线程实现中可以找到，但 QThread::wait() 有点相似。

```
bool QThread::wait(unsigned long time = ULONG_MAX) 
```

> 阻塞线程，直到满足以下任一条件：
> 
> *   与此对象关联的线程`QThread`已完成执行（即，当它从 中返回时`QThread::run()`）。`true`如果线程完成，此函数将返回。`true`如果线程尚未启动，它也会返回。
> *   `time`毫秒已经过去。如果 time 是`ULONG_MAX`（默认值），则等待永远不会超时（线程必须从 中返回`QThread::run()`）。`false`如果等待超时，此函数将返回。

**请注意，阻塞主**线程被认为是一种糟糕的做法，即使是计算也不行，更不用说只是等待某事了。任何超过几十毫秒的时间都会对用户体验产生不利影响，并且更高的停顿可能会给您来自操作系统的“此应用程序没有响应”消息。如果您等待结果，请在另一个线程中等待它，并且只有在完成后才将其传递给主线程。

# github - Git：针对文件创建链接

> ID：15324021
> 
> 赞同：2
> 
> 时间：2013-03-10T15:40:01.333
> 
> 标签：github

我目前正在解决[projecteuler](http://projecteuler.net)的问题，并将源代码存储在 github 上的存储库[https://github.com/amitshree/projecteuler](https://github.com/amitshree/projecteuler)中。我不是在写与源代码相关的问题，但我想从 github 链接到 projecteuler 问题中查看针对源代码的问题。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:05:12.490

> 我可以添加一个链接到我的提交吗

在[GitHub Flavored Markdown](https://help.github.com/articles/github-flavored-markdown)中，这种链接称为**引用**：

> 某些参考是自动链接的：

```
* SHA: be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2
* User@SHA ref: mojombo@be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2
* User/Project@SHA: mojombo/god@be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2
* \#Num: #1
* User/#Num: mojombo#1
* User/Project#Num: mojombo/god#1 
```

# java - Slick2D - 找不到 OpenAL 库 (Netbeans)

> ID：15324024
> 
> 赞同：0
> 
> 时间：2013-03-10T15:40:08.970
> 
> 标签：java, lwjgl, slick2d

当我使用 NetBeans (F6) 运行我的游戏时，我正在使用 netbeans 7.2.1、Java 7、Slick2D 和 LWJGL 2.8.5，它显示“无法找到 OpenAL 库”但是，当我构建我的程序时 (F11)并运行jar文件，声音运行良好

我如何解决它？:(这就是我使用声音的方式

创建变量

```
private Sound select_sound; 
```

设置值

```
this.select_sound = new Sound(ProgramConstant.MENU_DIR + "sounds/select.wav"); 
```

播放声音

> this.select_sound.play();

感谢帮助 ：）

# javascript - 任何可以检测flash视频长度并再次显示播放和下一个视频的Js

> ID：15324025
> 
> 赞同：0
> 
> 时间：2013-03-10T15:40:16.013
> 
> 标签：javascript, jquery, flash, flash-video

我想知道是否有`Java Script`库或脚本或任何技巧可以检测 Flash 视频长度并在结束后再次显示播放和下一个视频。就像**YouTube**一样。

任何参考示例或教程也可以帮助我。

**我在谷歌之后来到这里。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:48:33.227

您真正想要的是 Flash 视频播放器对 javascript 进行[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)调用，让它知道它已经完成。您需要访问闪存文件才能完成此操作。

您可以在技术上使用 javascript 跟踪视频播放进度，并在完成时加载下一个视频。这样做的问题是，它不仅需要您知道视频的长度，还需要知道它何时播放/停止。做到这一点的唯一方法是让 flash 进行[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)调用。此时，您不妨只听视频的完整事件。

# applescript - 将 .txt 文件读入 Apple 的 Numbers

> ID：15324029
> 
> 赞同：0
> 
> 时间：2013-03-10T15:40:28.613
> 
> 标签：applescript

我有一个 .txt 文件列表，它们都在同一个目录中，名称为“w_i.txt”，我从 1 运行到 n。这些文件中的每一个都包含一个数字（非整数）。我希望能够将每个文件中的值读入 Apple Numbers 的列中。我希望 w_1.txt 在第 1 行，w_n.txt 的值在该列的第 n 行。我应该为此使用 Applescript，如果需要，需要什么代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:00:43.663

我想我会把它当作一个 shell 脚本来解决，而不是 applescript。

以下脚本将按数字顺序遍历您的文件集，并生成纯文本输出。您可以将其重定向到文本文件。我无法访问 Apple 的 Numbers，但如果您无法从纯文本文件中导入数据，我会感到非常惊讶。

我已将最大文件索引硬编码为 5。您需要更改它。

如果缺少任何文件，则会在该行输出 0。您可以根据需要将其更改为空行。

另外我不知道您的文件是否以换行符结尾，因此 cat/read/echo 行是获取行的第一个标记而不担心任何后续空格的一种方法。

```
#!/bin/bash

对于 {1..5} 中的 i ；做
    如果 [ -e w_$i.txt ] ; 然后
        猫 w_$i.txt | { IFS="" 读取 -rn ; 回声 -e "$n" ; }
    别的
        回声 0
    菲
完毕

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:33:41.747

如果所有文件都以换行符结尾，则可以只使用 cat：

```
cd ~/Documents/some\ folder; cat w_*.txt | pbcopy 
```

即使文件不以换行符结尾并且在 w_11.txt 之前对 w_2.txt 进行排序，这也有效：

```
sed -n p $(ls w_*.txt | sort -n) 
```

# r - 在R中返回一个数组

> ID：15324030
> 
> 赞同：1
> 
> 时间：2013-03-10T15:40:29.030
> 
> 标签：r

是否可以从函数调用中返回 R 中的值数组？我有一个方法应该将计算中的值存储在数组中并将其返回给调用者，但实际上它所做的只是返回数组的第一个元素。函数如下。

```
binsmooth_trials = function(x, y){
  bin_lens = c(10, 20, 30, 40, 50, 60, 70, 80, 90, 100)
  bin_len_errs = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
  for (i in 1:bin_lens){
    rss_error = binsmooth(x, y, i)
    bin_len_errs[i] = rss_error
  }
  return bin_len_errs
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T15:55:35.213

我想你在这里想要的是：

```
binsmooth_trials <- function(x, y) {
  bin_lens = seq(from=10, to=100, by=10)
  bin_len_errs = vector("numeric", length=length(bin_lens))
  for(i in bin_lens){
    bin_len_errs[i] = binsmooth(x, y, i)
    }
  bin_len_errs
} 
```

# javascript - android中用户界面的webview

> ID：15324031
> 
> 赞同：2
> 
> 时间：2013-03-10T15:40:35.170
> 
> 标签：javascript, android, html, css, user-interface

我正在寻找如何在 android 中使用 swf 文件，大多数答案都建议我使用 webview 和一个简单的 html 文件。

现在我认为我们可以轻松地将 css 和 javascript 文件放在资产文件夹中，然后我们可以在 html5 代码中使用它们。

看看 HTML5 的力量，这将使网页设计师的应用程序开发变得非常容易！

我只是想知道使用这种方法在 android 中构建良好的用户界面是否很好？它背后有什么技术优点/缺点吗？我会错过android提供的一些功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:04:47.567

有很多框架只允许您编写本机 android 应用程序`HTML/CSS/JavaScript`。这里有一些：

*   [电话间隙](http://phonegap.com/)
*   [科尔多瓦](http://cordova.apache.org/)
*   [钛](http://www.appcelerator.com/platform/titanium-sdk/)

我从来没有使用过它们中的任何一个，所以我不能说以这种方式编写 android 应用程序是好还是坏，但在这里你可以找到一个关于它的好会话[HTML5 vs Android](http://www.youtube.com/watch?v=4f2Zky_YyyQ)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:02:45.430

使用跨平台有利有弊。根据我的观点，您不应该在 WebView 中加载所有内容。

由于以下几点，我仍然建议您使用本机应用程序方法：

*   WebView 是 Android SDK 中的 UI 控件之一。因此，它将受到内存大小和 CPU 利用率的限制。因此，您可能会在某些设备中遇到性能问题。
*   如您所知，在较早的时代，我们习惯于使用桌面应用程序，之后一切都转移到了 Web 应用程序。
*   这可能只是因为我们的浏览器获得了更多功能，例如更多内存区域、CPU 访问、线程、单独处理（如谷歌浏览器）等......
*   简而言之，网络浏览器变得更加智能并被视为单独的应用程序。现在，Web 应用程序可以具有与桌面应用程序大致相似的性能。因此，现在一切都转移到了 Web 应用程序开发上。

这个时代将在后期进入移动开发。但目前我们处于移动开发和跨平台开发的中间阶段。因此，除非任何平台（iOS / Android）的 Web-View 控制变得更强大，否则我们不能完全依赖它。

我希望我能正确解释:)

# css - 为什么渐变在 Chrome 中加载不正确？

> ID：15324032
> 
> 赞同：3
> 
> 时间：2013-03-10T15:40:36.083
> 
> 标签：css, twitter-bootstrap, gradient

我是 HTML5 初学者，我刚刚 使用 Twitter Bootstrap创建了[我的投资组合页面。](http://dl.dropbox.com/u/1301955/portfolio/index.html)我使用[colorzilla 渐变生成器](http://www.colorzilla.com/gradient-editor/)生成了我的渐变。

不幸的是，有时我的渐变在 Chrome 中加载不正确，它看起来像这样：

![不正确的梯度](../Images/cf219ac7e36a057394fcb7573ca40f48.png)

我的页面有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:58:32.557

这是 Bootstap 梯度混合所给出的，你可以看看结果是否有任何不同：

```
.iamcoming {
background-color: #525252;
background-image: -moz-linear-gradient(top, #444444, #666666);
background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#444444), to(#666666));
background-image: -webkit-linear-gradient(top, #444444, #666666);
background-image: -o-linear-gradient(top, #444444, #666666);
background-image: linear-gradient(to bottom, #444444, #666666);
background-repeat: repeat-x;
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff444444', endColorstr='#ff666666', GradientType=0);
} 
```

祝你好运！

# bash - 如何通过按 F5、F6、F10 在对话框代码中运行某些内容？

> ID：15324033
> 
> 赞同：0
> 
> 时间：2013-03-10T15:40:46.917
> 
> 标签：bash, dialog

如何通过按 F5、F6、F10 在对话框代码中运行某些内容？

```
dialog --menu "Menu items" 0 0 0 .....

RET=$?

case $RET in
 0) press button OK;;
 1) press button Cancel;;
 255) press button Esc;;
 ???) press button F5;;
 ???) press button F6;;
 ???) press button F10;;
esac 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:55:53.267

不幸的是，不是你这样做的方式。那是获取 的退出代码`dialog`，不幸的是，它不能绑定到您想要的键（您可能拥有的最接近的方法是将单个功能键映射到 Esc 但这只给您一个键）。

此时，您可以选择直接破解对话代码或使用选择的语言和 ncurses 后端来实现这一点。

# javascript - Uncaught SyntaxError: Unexpected token ILLEGAL when running graph

> ID：15324035
> 
> 赞同：0
> 
> 时间：2013-03-10T15:41:08.857
> 
> 标签：javascript, d3.js

我是 D3JS 的新手。我试图运行[http://www.d3noob.org](http://www.d3noob.org)提供的图形脚本，但它在我的网站上不起作用。

运行以下脚本时：

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>
body { font: 12px Arial;}
path {
stroke: steelblue;
stroke-width: 2;
fill: none;
}
.axis path,
.axis line {
fill: none;
stroke: grey;
stroke-width: 1;
shape-rendering: crispEdges;
}
</style>
<body>
<script type="text/javascript" src="d3/d3.js"></script>
<script>
var margin = {top: 30, right: 20, bottom: 30, left: 50},
width = 600 - margin.left - margin.right,
height = 270 - margin.top - margin.bottom;
var parseDate = d3.time.format("%d-%b-%y").parse;
var x = d3.time.scale().range([0, width]);
var y = d3.scale.linear().range([height, 0]);
var xAxis = d3.svg.axis().scale(x)
.orient("bottom").ticks(5);
var yAxis = d3.svg.axis().scale(y)
.orient("left").ticks(5);
var valueline = d3.svg.line()
.x(function(d) { return x(d.date); })
.y(function(d) { return y(d.close); });
var svg = d3.select("body")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform","translate(" + margin.left + "," + margin.top + \
")");
// Get the data
d3.tsv("data/data.txt", function(error, data) {
data.forEach(function(d) {
d.date = parseDate(d.date);
d.close = +d.close;
});
// Scale the range of the data
x.domain(d3.extent(data, function(d) { return d.date; }));
y.domain([0, d3.max(data, function(d) { return d.close; })]);
svg.append("path") // Add the valueline path.
.attr("class", "line")
.attr("d", valueline(data));
svg.append("g") // Add the X Axis
.attr("class", "x axis")
.attr("transform", "translate(0," + height + ")")
.call(xAxis);
svg.append("g") // Add the Y Axis
.attr("class", "y axis")
.call(yAxis);
});
</script>
</body> 
```

我收到以下错误消息：

Uncaught SyntaxError: Unexpected token ILLEGAL

第 39 行出错了：

.attr("transform","translate(" + margin.left + "," + margin.top + \

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:44:32.583

代替：

```
.attr("transform","translate(" + margin.left + "," + margin.top + \
")"); 
```

尝试：

```
.attr("transform","translate(" + margin.left + "," + margin.top + ")"); 
```

# url - 如何在 AngularjJS 中创建“url_for”链接助手

> ID：15324039
> 
> 赞同：12
> 
> 时间：2013-03-10T15:41:29.513
> 
> 标签：url, routing, angularjs, angularjs-routing

在 .NET MVC 中有，`@Url.Action()`而在 RoR 中有`url_for()`

我在 angularjs 中找不到类似的 url 构建助手。

我已经提供了构建 url 所需的一切，`$routeProvider`例如：`$routeProvider.urlFor("MyCtrl", {id: 5})`可能会很高兴。

我的主要目标是避免在视图和其他地方硬编码 url，并避免重复 url/routes 模式两次。

更新：

似乎很难解释我想要什么所以这里是我想要的确切示例：

而不是在视图中写这个：

```
<a ng-href="/product/5">foo</a> 
```

我想写这个：

```
<a ng-href="urlFor("ProductCtrl", {id:5})">foo</a> 
```

因此，如果稍后我决定更改 ProductCtrl 的路径，我将不必更新此元素中的 url。

我的目标有什么好的解决方案？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-17T15:52:30.933

您可以在主模块的 run() 块中尝试以下内容（刚刚提出）：

```
app.run(function($route, $rootScope)
{
  $rootScope.path = function(controller, params)
  {
    // Iterate over all available routes

    for(var path in $route.routes)
    {
      var pathController = $route.routes[path].controller;

      if(pathController == controller) // Route found
      {
        var result = path;

        // Construct the path with given parameters in it

        for(var param in params)
        {
          result = result.replace(':' + param, params[param]);
        }

        return result;
      }
    }

    // No such controller in route definitions

    return undefined;
  };
}); 
```

这将使用新的 path() 函数扩展应用程序的根范围 - 因此它可以在应用程序的任何地方使用。它使用 $route 服务来获取控制器名称和相应的路径，因此您不必重复自己。

示例用法：

```
{{ path('LibraryController', { bookId : 'x', chapterId : 'y' }) }} 
```

现场示例：[http ://plnkr.co/edit/54DfhPK2ZDr9keCZFPhk?p=preview](http://plnkr.co/edit/54DfhPK2ZDr9keCZFPhk?p=preview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:09:17.610

有很多方法......自定义`directive`或`ng-click`修改`$location`，或使用函数`ng-href`从对象解析 url 并将其放置`href`在`<a>`标签中。

使用示例`ng-href`：

HTML：

```
<li ng-repeat="item in items">
    <a ng-href="{{url(item)}}">{{item.txt}}</a>
</li> 
```

JS：

```
function Ctrl($scope){
  $scope.items=[
    {id:1,txt:'foo'},
    {id:2,txt:'bar'}
 ];

  $scope.url=function(item){
    return '#/'+item.id
  }
} 
```

`ng-click`使用和的示例`$location`

HTML：

```
<a ng-click="newPath(item)">{{item.txt}}</a> 
```

JS：

```
function Ctrl($scope){
  $scope.items=[
    {id:1,txt:'foo'},
    {id:2,txt:'bar'}
 ];  

  $scope.newPath=function(item){
   $location.path('/'+item.id)
  }  
} 
```

演示：http: [//jsbin.com/ovemaq/3](http://jsbin.com/ovemaq/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:32:17.960

在最近的一个项目中，我提出了这个解决方案，它帮助我及时解决了我的需求。帮助您改进它以适应您的用例将会很有趣。

**1.**将路由定义移至配置：

```
...
ROUTES: {
    PAGE1: '/page1/:id',
    PAGE2: '/page2/:id/:name'
},
... 
```

**2.**使用配置中的值定义路由：

```
app.config(['$routeProvider', 'config', function ($routeProvider, config) {
    $routeProvider.when('/', {
        templateUrl: 'partials/home.html',
        controller: 'HomeCtrl'
    });

    $routeProvider.when(config.ROUTES.PAGE1, {
        templateUrl: 'partials/page1.html',
        controller: 'PageOneCtrl'
    });

    ...

    $routeProvider.otherwise({
        redirectTo: '/'
    });

}]); 
```

**3.**设置服务以提供创建 url 的功能：

```
services.factory('routes', function (config) {

    // populates `:param` placeholder in string with hash value
    var parseString = function (string, parameters) {
        if (!string) return '';
        if (!parameters) return string;

        for (var index in parameters) {
            if (!parameters.hasOwnProperty(index)) continue;

            string = string.replace(':' + index, parameters[index]);
        }

        return string;
    };

    return {
        getPage1Link: function (urlParams) {
            return '#' + parseString(config.ROUTES.PAGE1, urlParams);
        }
    };
}); 
```

* * *

**== 缺点 ==**

使用这种方法，我必须为每条路线定义吸气剂（少于 5 个，开发速度至关重要）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T05:05:36.020

看来您想要的是最近添加到[angularui 项目](http://angular-ui.github.com/)中的 ui-route 指令。有一组很好的开箱即用选项。

# python - beautifulsoup“列表对象没有属性”错误

> ID：15324040
> 
> 赞同：5
> 
> 时间：2013-03-10T15:41:33.850
> 
> 标签：python, web-scraping, beautifulsoup

我正在尝试使用以下方法从[天气站点获取温度：](http://www.wunderground.com/history/airport/KAPA/2013/3/1/DailyHistory.html)

```
 import urllib2
from BeautifulSoup import BeautifulSoup

f = open('airport_temp.tsv', 'w')

f.write("Location" + "\t" + "High Temp (F)" + "\t" + "Low Temp (F)" + "\t" + "Mean Humidity" + "\n" )

eventually parse from http://www.wunderground.com/history/airport/\w{4}/2012/\d{2}/1/DailyHistory.html

for x in range(10):
    locationstamp = "Location " + str(x)
    print "Getting data for " + locationstamp
    url = 'http://www.wunderground.com/history/airport/KAPA/2013/3/1/DailyHistory.html'

    page = urllib2.urlopen(url)
    soup = BeautifulSoup(page)

    location = soup.findAll('h1').text
    locsent = location.split()
    loc = str(locsent[3,6]) 

    hightemp = soup.findAll('nobr')[6].text
    htemp = hightemp.split()
    ht = str(htemp[1]) 

    lowtemp = soup.findAll('nobr')[10].text
    ltemp = lowtemp.split()
    lt = str(ltemp[1]) 

    avghum = soup.findAll('td')[23].text

    f.write(loc + "\t|" + ht + "\t|" + lt + "\t|" + avghum + "\n" )

f.close() 
```

不幸的是，我收到一条错误消息：

```
Getting data for Location 0
Traceback (most recent call last):
  File "airportweather.py", line 18, in <module>
    location = soup.findAll('H1').text
AttributeError: 'list' object has no attribute 'text' 
```

我浏览了 BS 和 Python 文档，但仍然很绿，所以我想不通。请帮助这个新手！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T15:43:14.067

该`.findAll()`方法返回匹配*列表*。如果您想要*一个*结果，请改用该`.find()`方法。或者，像其余代码一样选择一个特定元素，或者循环遍历结果：

```
location = soup.find('h1').text 
```

或者

```
locations = [el.text for el in soup.findAll('h1')] 
```

或者

```
location = soup.findAll('h1')[2].text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T15:43:09.363

这很简单。`findAll`返回列表，因此如果您确定只有一个有趣的元素，那么：`soup.findAll('H1')[0].text`应该工作

# php - PHP中的数组重组

> ID：15324045
> 
> 赞同：-3
> 
> 时间：2013-03-10T15:42:17.813
> 
> 标签：php, arrays, structure

我有一个看起来像这样的 php 数组：

```
 Array
    (
       [0] => Array
              (
                [0] => name_first
                [1] => name_second
                [2] => age
              )

       [1] => Array
              (
                [0] => firstname1
                [1] => surname1
                [2] => age1
              )

       [2] => Array
              (
                [0] => firstname2
                [1] => surname2
                [2] => age2
              )
    ) 
```

我想使用前三个值（它们确实改变了），如果有一个下划线的值（如本例中的 name_first 和 name_second），则将数组重新构造为：

```
 Array
    (
      [0] => Array
             (
               [name] => Array
                         (
                           [first] => firstname1
                           [second] => surname1
                         )
               [age] => age1
             )

      [1] => Array
             (
               [name] => Array
                         (
                           [first] => firstname2
                           [second] => surname2
                         )
               [age] => age2
             )
    ) 
```

我已经为此工作了 2 天，但我无法提出解决方案，所以我的问题是：**我怎样才能以有效的方式实现这一目标？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:57:19.450

这是你要找的吗？

```
$result[]=array('name'=>array('firstname'=>$firstName,'lastname'=>$lastName),'age'=>$age); 
```

因此，假设我们有一系列名称和年龄，例如：

```
$persons=array(
    [0]=>array('name'=>'Fredrick cheeseton','age'=>'23')
    [1]=>array('name'=>'Bob Scandal','age'=>'102')
    ['random key to show this doesn\'t matter']=array('name'=>'Uncle Jeff','age'=>'1')
); 
```

`$result`现在让我们像您指定的那样将其处理到数组中：

```
foreach($persons as $person){
    //leaving the array key blank suggests an auto acceding integer.
    $name=explode(" ",$person['name']);//spliting the name into two parts using the ' '(space)
    $result[]=array('name'=>array('firstName'=>$name[0],'lastName'=>$name[1]),'age'=>$person['age']);
}
if(isset($result))?var_dump($result):'Result was never declared'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:06:10.290

由于您的评论而更新了答案......这是工作代码：

```
$input = array(
    array(
        "name_first",
        "name_second",
        "age"
    ),
    array(
        "firstname1",
        "surname1",
        "age1"
    ),
    array(
        "firstname2",
        "surname2",
        "age2"
    )
);

function restructure($input) {
  $output = array();
  $a_length = count($input);
  for ($a = 0; $a < $a_length; $a++) { // Loop through child arrays
    $b_length = count($input[$a]);
    for ($b = 0; $b < $b_length; $b++) { // Loop through child array's properties
      if ($a) {
        setValue($output[$a - 1], $input[0][$b], $input[$a][$b]); // See function below
      } else {
        // First child array of $input
        $input[$a][$b] = explode("_", $input[$a][$b]); // Create an array of indexes out of each property.
      }
    }
  }
  return $output;
}

function setValue(&$arr, $indices, $value) { //$arr passed by reference
    $count = count($indices);
    if ($count == 1) { // Check if more than one index (value needs to be nested)
        $arr[$indices[0]] = $value; // Apply value to array
    }
    else {
        $index = array_shift($indices); // Remove first index from array
        if (!is_array($arr[$index])) { // Create an array at this index if it doesn't exist
          $arr[$index] = array();
        }
        setValue($arr[$index], $indices, $value); // Recursively call function passing the current index as reference.
    }
}

print_r(restructure($input)); 
```

输出：

```
Array ( 
  [0] => Array ( 
    [name] => Array ( 
      [first] => firstname1 
      [last] => surname1 
    ) 
    [age] => age1 
  ) 
  [1] => Array ( 
    [name] => Array ( 
      [first] => firstname2 
      [last] => surname2 
    ) 
    [age] => age2 
  ) 
) 
```

它将您的第一个子数组作为索引名称的映射。要使值嵌套，请在其名称中添加下划线，例如

```
array(
  array(
    "one_two_three",
    "hello"
  ),
  array(
    "first val",
    "second val"
  )
) 
```

将创建以下结构：

```
Array(
  [0] => Array(
    [one] => Array(
      [two] => Array(
        [three] => "first val"
      )
    )
    [hello] => "second val"
  )
) 
```

# azure - 如何使用 Azure 数据库模拟暂时性错误？

> ID：15324046
> 
> 赞同：4
> 
> 时间：2013-03-10T15:42:21.577
> 
> 标签：azure, error-handling, azure-sql-database, throttling

我正在使用瞬态故障处理应用程序块 (TFHAB) 来定义与 Azure 数据库交互时的重试策略。我想知道是否有一种方法可以调用节流响应来规划和处理可能的生产场景？

我可以将一个 SQL 命令放在一个循环中并运行它，直到我调用一个响应但是大概这不被认为是“最佳实践”？

任何人都可以提出一些实用的方法来测试我的瞬态错误处理逻辑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:14:57.327

查看结合[测试 Azure 中的瞬态错误和](http://azuretable.blogspot.co.uk/2012/08/unit-testing-transient-errors-in-azure.html)[Windows Azure SQL 数据库返回](http://msdn.microsoft.com/en-us/library/windowsazure/ff394106.aspx#throttling)的错误代码列表，看看您是否可以模拟您正在测试的行为。除了单元测试之外，我认为您将无法“模拟”错误，因为这些错误是通过 TDS 协议来自 SQL 的，很难拦截。您的需求将是您可以注入模拟器的应用程序块的一个很好的候选者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T13:39:33.257

我设法开发了一些代码，使您能够可靠地在 Azure SQL 数据库中生成暂时性错误。您可以在以下位置找到代码：[https ://github.com/robdmoore/SQLAzureTransientDemo](https://github.com/robdmoore/SQLAzureTransientDemo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T20:52:28.557

我对您的建议是依赖注入：) 详细说明，您的更高级别的客户端代码不应直接依赖于 azure，将客户端 SDK 放在接口后面并将该接口作为依赖项传递给您的更高级别的客户端代码。将生产代码的实际 sdk 作为接口实现传递，并且对于您的测试，传递接口的测试实现，您可以在其中返回任何您想要的错误代码或响应。

# c++-cli - 如何将 __value 枚举从 VS2003 转换为 VS2010

> ID：15324050
> 
> 赞同：0
> 
> 时间：2013-03-10T15:42:46.403
> 
> 标签：c++-cli

我有来自 VS2003 托管 C++ 的代码片段，我想以 2010 C++/CLI 方式重写它，但较新的编译器不接受“feature_all”枚举。有人能告诉我如何正确转换它吗？

这是 VS 2003 中的代码片段：

```
 [Flags]
    __value enum Features: unsigned int
    {
        feature_1 = 1,
        feature_2 = 2,
        feature_3 = 4,
        feature_all = feature_1 | feature_2 | feature_3   // accepted by compiler
    }; 
```

我尝试在 VS 2010 中这样写：

```
 [FlagsAttribute]
    value class enum Features: unsigned int {
        feature1 = 1,
        feature2 = 2,
        feature3 = 4,
        feature_all = feature_1 | feature_2 | feature_3   // not accepted by compiler
    }; 
```

但是第二个肯定行不通...

编译器返回 7 个错误：（C2332、C2236、3x C2065、C2056 和 C3115）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:35:23.073

正确的关键字是*enum class*，也在 C++11 中采用：

```
[FlagsAttribute]
public enum class Features: int {
    feature1 = 1,
    feature2 = 2,
    feature3 = 4,
    feature_all = feature1 | feature2 | feature3 
}; 
```

请注意，我还删除了神秘的下划线，假设您想让这个枚举类型对其他 .NET 项目可见，并希望它符合 CLS，以便它可以被不支持无符号类型的语言使用。 *int*是默认值，可以省略。根据需要进行调整。

# android - 隐藏列表视图中的项目

> ID：15324059
> 
> 赞同：3
> 
> 时间：2013-03-10T15:43:34.480
> 
> 标签：android, listview

我试图隐藏自定义列表适配器中的项目。我可以隐藏文本的可见性，但我无法隐藏整个列表项。它仍然显示分隔线等。我尝试过：

```
tv.setVisibility(View.INVISIBLE);
tv.setVisibility(View.GONE);
convertView.setVisibility(View.INVISIBLE);
convertView.setVisibility(View.GONE); 
```

当我使用 convertView 时，我得到一个空指针异常。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-16T12:33:59.780

1.  您可以使用无元素设置 ContentView。

    在您的自定义适配器的 getView() 中。

    ```
    if(condition)
    {
      convertView=layoutInflater.inflate(R.layout.row_null,null);
      return convertView;
    }
    else
    {
       convertView=layoutInflater.inflate(R.layout.row_content,null);
       return convertView;
    } 
    ```

2.  你的 XML row_null.xml

    ```
    <?xml version="1.0" encoding="utf-8"?>
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="match_parent"
         android:layout_height="wrap_content">
    </LinearLayout> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-19T10:33:13.133

你有 3 种方法可以做到这一点：

1.  从适配器内部或外部的列表中删除项目。在适配器内部，您可以在构造函数中执行此操作。

    `private List<String> list; public MyAdapter(Context context, List<String> list) { list.remove(0); list.remove(1); list.remove(<whateverPositionYouLike>); this.list = list; }`

2.  您需要弄清楚要隐藏多少项并需要构建类似的逻辑。

`@Override public int getCount() { // In this adapter, we are supposed to hide the first item of the list view // Returning 0 if no of items are already 0 if(list.size() <=1) return 0; // if number of items are more than one, returning one item less return list.size() - 1; }`

`@Override public Object getItem(int position) { // skipping the position return list.get(position + 1); }`

`

```
 @Override
    public View getView(final int position, View v, ViewGroup arg2) {

    // this is important, as we are supposed to skip the first item of listview
    final int localPosition = position +1;

    ViewHolderItem holder;
    if (v == null) {
        holder = new ViewHolderItem();
        v = inflater.inflate(R.layout.list_row, null);
        v.setTag(holder);
    } else {
        holder = (ViewHolderItem) v.getTag();
    }
    return v;
    } 
```

`

3.  @hims_3009 提供的答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T14:03:11.627

我认为我有一个更简单/更安全的解决方案：您只需将您的项目“嵌入”到布局中，并更改此父布局的可见性。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <!-- Embed ListView Item into a "parent" Layout -->
    <LinearLayout
        android:id="@+id/parentLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- This is the normal content of your ListView Item -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Hello" />
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="World" />

    </LinearLayout>
</LinearLayout> 
```

然后在您的代码中执行以下操作：

```
public View getView(int position, View view, ViewGroup parent) {
    if (view == null) {
        LayoutInflater li = mActivity.getLayoutInflater();
        view = li.inflate(R.layout.my_listview_item, null);
    }
    LinearLayout parentLayout = (LinearLayout) view.findViewById(R.id.parentLayout);
    if (shouldDisplayItem(position)) {
        parentLayout.setVisibility(View.VISIBLE);
    } else {
        parentLayout.setVisibility(View.GONE);
    }
    return view;
} 
```

这样你总是使用/重用同一个项目，只是隐藏/显示它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T15:47:03.190

您不能以您尝试的方式，您需要使用自定义适配器并在其中实现显示/不显示线条的逻辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T15:54:25.957

如果要在列表视图中隐藏一行，则需要删除该位置的数据。例如，如果您使用数组适配器并希望隐藏 5\. 位置上的行。您必须从数组中删除行并调用 notifyDatasetChanged() 方法。

（您可以使用 tempArray 从数组中删除数据）

或使用这种方式

```
private List<String> items = new ArrayList<String>();    
// make list a new array, clearing out all old values in it.
for(i=0; i<10; i++)
{
  if((i != 5)  && (i != 6)){        
   // if k = 5 or 6, dont add those items to the list
     items.add(something[i]);   /// whatever your list items are.
   }
}

ArrayAdapter<String> itemList = new
ArrayAdapter<String>(this,R.layout.itemlistlayout);
setListAdapter(itemlist); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T15:55:12.140

如果要隐藏整个项目，则需要在 getView() 方法中构建一些逻辑，以使其跳过数据的各个部分。

假设您有一个 ArrayAdapter，我想隐藏索引 2 处的数据。您的 getView() 方法可能看起来像这样。

```
@Override
public View getView(int pos, View convertView, ViewGroup, parent){
    View mView = convertView;
    //TODO: Check if convertView was null, and inflate
    //      or instantiate if needed.

    //Now we are going to set the data
    mTxt = mView.findViewById(R.id.mTxt);
    if(pos >= 2){
        //If position is 2 or above, we ignore it and take the next item.
        mTxt.setText(this.getItem(pos + 1).toString()); 
    }else{
        //If position is below 2 then we take the current item.
        mTxt.setText(this.getItem(pos).toString());
    }
    return mView;
} 
```

请注意，此示例是通用的，并不意味着可以直接放入您的项目中。我不得不对一些我不知道真相的事情做出假设。您可以使用与我在这里展示的相同的概念，并根据您的情况对其进行修改，以便能够“隐藏”ListView 中的行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-10T15:57:01.957

如果您已经有一个自定义列表适配器，您只需在适配器上调用 notifyDataSetChanged() ，适配器本身当然可以实现逻辑来过滤掉您想要隐藏的行的视图。这些是我想到的需要反映该逻辑的方法：

```
 @Override
    public Object getItem(int position) {
        return mItems.get(position);
    }

    @Override
    public int getCount() {
        return mItems.size();
    }

    @Override
    public View getView(final int position, final View convertView, final ViewGroup parent) {
        // here goes your logic to hide a row 
```

此外，您可能还必须更改 getItemId() 。

# time - 显示视频的当前时间，而不是 videojs 上的剩余时间

> ID：15324061
> 
> 赞同：17
> 
> 时间：2013-03-10T15:43:43.117
> 
> 标签：time, video.js

我使用[VideoJS](http://videojs.com/)，一个 HTML5 视频播放器

默认情况下，它显示剩余时间（倒计时）而不是正常的当前时间（如 youtube）

任何想法如何“修复”它？[你可以在他们的官方网站上](http://videojs.com/)看到一个活生生的例子

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-06-04T02:30:03.863

**对于寻求解决方案的其他人...**

**播放器上**存在所有计时器**`current-time`，但默认情况下,`time-divider`和`duration`信息**隐藏**在`display: none;`.**

 **所以我们唯一要做的就是隐藏**并`remaining-time`**显示**其中`time-control`**包括`current-time`和`time-divider`。`duration`

应该与您的播放器一起使用的**CSS 代码**中的解决方案：

```
.video-js .vjs-time-control {
    display: block;
}
.video-js .vjs-remaining-time {
    display: none;
} 
```

[![有时间控制的玩家](../Images/b1b09e58cae44e40b5430b100963568f.png)](https://i.stack.imgur.com/vFafb.png)

文档没有解释这一点，或者准确地说，它在解释如何使用 CSS 自定义播放器时没有解释它。

* * *

快速 html 代码片段：

```
<style type="text/css">
    .video-js .vjs-time-control{display:block;}
    .video-js .vjs-remaining-time{display: none;}
</style> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-16T07:55:15.907

简单的方法是更改​​默认 ControlBar.prototype.options

```
ControlBar.prototype.options_ = {
  children: ['playToggle', 'volumePanel', 'currentTimeDisplay', 'timeDivider', 'durationDisplay', 'progressControl', 'liveDisplay', 'remainingTimeDisplay', 'customControlSpacer', 'playbackRateMenuButton', 'chaptersButton', 'descriptionsButton', 'subsCapsButton', 'audioTrackButton', 'fullscreenToggle']
}; 
```

改成

```
ControlBar.prototype.options_ = {
  loadEvent: 'play',
  children: ['playToggle', 'volumeMenuButton', 'currentTimeDisplay', 'progressControl', 'liveDisplay', 'durationDisplay', 'customControlSpacer', 'playbackRateMenuButton', 'chaptersButton', 'subtitlesButton', 'captionsButton', 'fullscreenToggle']
}; 
```

最终显示时间控制

```
<style type="text/css">
    .video-js .vjs-time-control{display:block;}
</style> 
```

结果：[https ://i.stack.imgur.com/7Vvxm.png](https://i.stack.imgur.com/7Vvxm.png)**

# java - 这个简单的例子破坏了抽象类规则？

> ID：15324065
> 
> 赞同：-1
> 
> 时间：2013-03-10T15:43:54.700
> 
> 标签：java, abstract-class

我为此道歉，我相信每个人都厌倦了抽象类的问题。

规则/事实：抽象类不能被实例化。

我遇到了一个让我感到困惑的例子：

```
public abstract class AbstractClass {
    private String name;

    public AbstractClass(String name)
    {
        this.name = name;
    }

    public String getName(){
        return this.name;
    }
}

public class Test {
    public static void main(String [] args)
    {
    //breaking rule
        AbstractClass temp = new AbstractClass("name") {
        };

        System.out.println(temp.getName());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T15:45:15.277

如果这是 java ，那么您将在此处创建扩展此抽象类的匿名类。因为没有抽象方法所以你不需要实现任何方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:51:11.697

这里的关键是后面的括号`new AbstractClass("name")`。

您正在做的是匿名内部类的实例化。实例化匿名类是**不一样的。**你在这里没有违反任何规则。也可以使用非抽象类来创建匿名内部类。

这意味着每次运行该部分代码时，您不仅是在创建一个类的新对象，而且实际上是在创建一个新类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T15:47:06.023

OP：无法初始化抽象类。它必须扩展成一个具体的类才能被 jvm 初始化。您可以让 Test 扩展 AbstractClass，然后将名称传递给它，但只是在抽象上尝试 new 是行不通的。

编辑：我没有注意到初始化程序上的大括号。上面的答案是正确 `new Abstract(){};`的确实创建了一个匿名内部。

# android - IAB consumePurchase() 不再适用于静态响应 android.test.purchased

> ID：15324075
> 
> 赞同：4
> 
> 时间：2013-03-10T15:44:41.133
> 
> 标签：android, in-app-billing

我们的测试版应用程序使用`android.test.purchased`，因此客户可以免费测试。但最近消费这些测试产品出现了问题。购买过程仍然可以正常工作，但是当我们尝试消费时：

```
int response = ms.consumePurchase(3, mContext.getPackageName(), token); 
```

这现在总是返回`RESULT_DEVELOPER_ERROR == 5`。传递的数据似乎有效，令牌是`inapp:com.lootworks.swords:android.test.purchased`我认为对于静态测试产品是正确的。

同时，我们所有早期的应用程序版本也停止工作，我们没有更改我们的代码，因此 IAB 本身似乎发生了一些变化。

我还测试了真实（以美元计）产品的购买/消费，它使用相同的代码成功。所以消耗问题似乎只影响静态响应测试项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T22:50:56.780

在 Sean 的帮助和一些额外的测试下，这似乎是 google play IAB 回归。已打开错误[https://code.google.com/p/android/issues/detail?id=53077](https://code.google.com/p/android/issues/detail?id=53077)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:41:57.743

我和我的团队也遇到了同样的问题。应用程序消费代码没有任何改变，所以很奇怪。该应用程序尚未准备好发布，因此我们还有很多工作要做，但这肯定会给测试带来麻烦。

这可能不是您的选择，但您可以更改命名空间，删除开发控制台中的应用程序条目并完成创建新条目的过程，然后再次拆分密钥等。

我只建议这样做，因为似乎并非所有应用程序都出现此问题。无论如何，如果我们的应用程序中的消费没有很快再次神奇地开始工作，这就是我们将尝试的。

# java - 通过 netbeans 导入类

> ID：15324076
> 
> 赞同：0
> 
> 时间：2013-03-10T15:44:46.340
> 
> 标签：java, class, methods

我一直在试图找出我在哪里犯了错误。我是 Java 新手，正在上入门课。基本上我必须创建一个 countletteranarray 程序，在其中调用我之前创建的类。我试图添加库无济于事，无法弄清楚如何让它工作。我收到的整个程序中唯一的错误是无法为 randomcharacter.RandomCharacter 添加导入。下面是我的代码：package countlettersinarray;

```
/**
 *
 * @author james
 */
public class CountLettersInArray {

    public static void main(String[] args) {
        //Declare and create an array
        char[] chars = createArray();

        //Display the array
        System.out.println("The lowercase letters are:");
        displayArray(chars);

        //Count the occurences of each letter
        int[] counts = countLetters(chars);

        //Displahy counts
        System.out.println();
        System.out.println("The occurences of each letter are:");
        displayCounts(counts);        
    }

    /**Create an array of characters**/
    public static char[] createArray() {
        //Declare an array of characters and create it
        char[] chars = new char[100];

        //Create lower case letters randomly and assign
        //them to the array
        for (int i = 0; i < chars.length; i++)
            chars[i] = RandomCharacter.getRandomLowerCaseLetter();

        //Return the array
        return chars;
    }

    public static void displayArray(char[] chars) {
        //Display characters in the array 20 on each line
        for (int i = 0; i < chars.length; i++) {
            if ((i + 1) % 20 == 0)
                System.out.println(chars[i]);
            else 
                System.out.print(chars[i] + " ");
        }
    }
        /** Count the occurences of each letter*/
        public static int[] countLetters(char[] chars) {
            //Declare and create an array of 26 int
            int[] counts = new int[26];

            //For each lower case letter in the array, count it
            for (int i = 0; i < chars.length; i++)
                counts[chars[i] - 'a']++;

            return counts;package countlettersinarray;

/**
 *
 * @author james
 */
public class CountLettersInArray {

    public static void main(String[] args) {
        //Declare and create an array
        char[] chars = createArray();

        //Display the array
        System.out.println("The lowercase letters are:");
        displayArray(chars);

        //Count the occurences of each letter
        int[] counts = countLetters(chars);

        //Displahy counts
        System.out.println();
        System.out.println("The occurences of each letter are:");
        displayCounts(counts);        
    }

    /**Create an array of characters**/
    public static char[] createArray() {
        //Declare an array of characters and create it
        char[] chars = new char[100];

        //Create lower case letters randomly and assign
        //them to the array
        for (int i = 0; i < chars.length; i++)
            chars[i] = RandomCharacter.getRandomLowerCaseLetter();

        //Return the array
        return chars;
    }

    public static void displayArray(char[] chars) {
        //Display characters in the array 20 on each line
        for (int i = 0; i < chars.length; i++) {
            if ((i + 1) % 20 == 0)
                System.out.println(chars[i]);
            else 
                System.out.print(chars[i] + " ");
        }
    }
        /** Count the occurences of each letter*/
        public static int[] countLetters(char[] chars) {
            //Declare and create an array of 26 int
            int[] counts = new int[26];

            //For each lower case letter in the array, count it
            for (int i = 0; i < chars.length; i++)
                counts[chars[i] - 'a']++;

            return counts;
        }
        /**Display counts*/
        public static void displayCounts(int[] counts) {
            for (int i = 0; i < counts.length; i++) {
                if ((i + 1) % 10 == 0)
                    System.out.print((counts[i] + " " + (char)(i + 'a')));
                else
                    System.out.print(counts[i] + " " + (char)(i + 'a') + " ");
            }
        }
}

        }
        /**Display counts*/
        public static void displayCounts(int[] counts) {
            for (int i = 0; i < counts.length; i++) {
                if ((i + 1) % 10 == 0)
                    System.out.print((counts[i] + " " + (char)(i + 'a')));
                else
                    System.out.print(counts[i] + " " + (char)(i + 'a') + " ");
            }
        }
} 
```

这是 RandomCharacter.getRandomLowerCaseLetter(); 我想打电话的班级：

```
package randomcharacter;

/**
 *
 * @author james
 */
public class RandomCharacter {
        /**Generate a random character between ch1 and ch2**/

    public static char getRandomCharacter(char ch1, char ch2) {
        return (char)(ch1 + Math.random() * (ch2 - ch1 + 1));    
    }
    //Generate a lower case letter
    public static char getRandomLowerCaseLetter() {
        return getRandomCharacter('a', 'z');
    }
    //Generate an upper case letter
    public static char getRandomUpperCaseLetter() {
        return getRandomCharacter('A', 'B');
    }
    //Generate a random number
    public static char getRandomDigitCharacter() {
        return getRandomCharacter('0', '9');
    }
    //Generate a random character
    public static char getRandomCharacter() {
        return getRandomCharacter('\u0000', '\uFFFF');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:51:58.550

您的第一堂课在默认包中。您的第二堂课在 package 中`randomcharacter`。您的第二堂课应该在您的第一堂课目录`./randomcharacter`所在`.`的目录中。

您应该能够在 NetBeans 中的`Project`和`Files`视图下直观地看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:49:17.867

你应该输入

```
package randomcharacter; 
```

在您的呼叫课程中-`CountLettersInArray`

然后才`RandomCharacter.getRandomLowerCaseLetter()`可以访问。

我检查了你的程序 -

您的两个课程将分别是-

1>随机字符.java

```
package randomcharacter;

/**
 *
 * @author james
 */
public class RandomCharacter {
        /**Generate a random character between ch1 and ch2**/

    public static char getRandomCharacter(char ch1, char ch2) {
        return (char)(ch1 + Math.random() * (ch2 - ch1 + 1));    
    }
    //Generate a lower case letter
    public static char getRandomLowerCaseLetter() {
        return getRandomCharacter('a', 'z');
    }
    //Generate an upper case letter
    public static char getRandomUpperCaseLetter() {
        return getRandomCharacter('A', 'B');
    }
    //Generate a random number
    public static char getRandomDigitCharacter() {
        return getRandomCharacter('0', '9');
    }
    //Generate a random character
    public static char getRandomCharacter() {
        return getRandomCharacter('\u0000', '\uFFFF');
    }
} 
```

和

2> CountLettersInArray.java

```
package randomcharacter;

/**
*
* @author james
*/
public class CountLettersInArray {

   public static void main(String[] args) {
       //Declare and create an array
       char[] chars = createArray();

       //Display the array
       System.out.println("The lowercase letters are:");
       displayArray(chars);

       //Count the occurences of each letter
       int[] counts = countLetters(chars);

       //Displahy counts
       System.out.println();
       System.out.println("The occurences of each letter are:");
       displayCounts(counts);        
   }

   /**Create an array of characters**/
   public static char[] createArray() {
       //Declare an array of characters and create it
       char[] chars = new char[100];

       //Create lower case letters randomly and assign
       //them to the array
       for (int i = 0; i < chars.length; i++)
           chars[i] = RandomCharacter.getRandomLowerCaseLetter();

       //Return the array
       return chars;
   }

   public static void displayArray(char[] chars) {
       //Display characters in the array 20 on each line
       for (int i = 0; i < chars.length; i++) {
           if ((i + 1) % 20 == 0)
               System.out.println(chars[i]);
           else 
               System.out.print(chars[i] + " ");
       }
   }
       /** Count the occurences of each letter*/
       public static int[] countLetters(char[] chars) {
           //Declare and create an array of 26 int
           int[] counts = new int[26];

           //For each lower case letter in the array, count it
           for (int i = 0; i < chars.length; i++)
               counts[chars[i] - 'a']++;

           return counts;
       }
       /**Display counts*/
       public static void displayCounts(int[] counts) {
           for (int i = 0; i < counts.length; i++) {
               if ((i + 1) % 10 == 0)
                   System.out.print((counts[i] + " " + (char)(i + 'a')));
               else
                   System.out.print(counts[i] + " " + (char)(i + 'a') + " ");
           }
       }
} 
```

这将显示输出 -

```
The lowercase letters are:
z n s q a m a h w f f o c e f q i m e g
i g w k p q x f g z l h r c d g a a y l
q z n b y k i w n b b s z a k e z o e x
g b p b l t d o c n l q m h p m c t y q
b y y r k x c t i m f o q i g o k w c w

The occurences of each letter are:
5 a 6 b 6 c 2 d 4 e 5 f 6 g 3 h 5 i 0 j5 k 4 l 5 m 4 n 5 o 3 p 7 q 2 r 2 s 3 t0 u 0 v 5 w 3 x 5 y 5 z 
```

希望，这能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-09T13:56:33.327

而不是使用 RandomCharacter.getRandomLowerCaseLetter();

只需使用 Random 类。

```
char[] chars = new char[100];

        for (int i = 0; i < chars.length; i++) {

            Random random = new Random();

            char randomChar = (char) (random.nextInt(26) + 'a');

            chars[i] = randomChar;
        } 
```

此代码将解决您的问题并为您提供所需的相同输出。

# outlook - Outlook 文件夹事件在共享邮箱上随机停止工作

> ID：15324077
> 
> 赞同：0
> 
> 时间：2013-03-10T15:44:48.623
> 
> 标签：outlook, wpf-controls, mapi, public-folders

我正在开发一个 WPF 应用程序来监视 Outlook 共享邮箱中的多个文件夹。我已将 ItemAdd 和 ItemRemove 事件处理程序连接到 Folder.Items 对象。

一切都很好用了几分钟。但随着时间的推移，事件处理似乎变得“噗嗤”一声。一些文件夹仍然可以识别添加和删除，其他文件夹只会看到删除，而其他文件夹则对任何活动视而不见。对我来说，似乎事件处理程序正在被垃圾收集，但我的 Items 对象被声明为它所在的类中的全局变量，所以我看不出它们是如何被 GC 淘汰的。

Outlook Folder.Items 事件有什么我应该注意的陷阱吗？我有一个以前的更简单的应用程序，它通过类似的过程工作，可以在很长一段时间内正常工作。就项目事件处理而言，我的旧应用程序和这个新应用程序之间没有本质区别。我真的不知道是什么原因造成的。

下面是相关代码。为了带来一些上下文，我正在做的是，对于 Outlook 共享邮箱中的每个文件夹，都会创建一个“TicketView”用户控件，它代表该文件夹的内容（MailItems）。这个 TicketView 是一个简单的 ListBox，它可能包含 0 到几十个 MailItems - 没有太多。

```
public partial class TicketView : UserControl
    {
        private Folder _thisFolder = null;
        private TicketCollection _thisTicketColl = null;
        private Items _thisItems = null;

        public TicketView(Folder folder)
        {
            InitializeComponent();

            _thisTicketColl = this.FindResource("TicketCollection") as TicketCollection;
            _thisFolder = folder;
            _thisItems = folder.Items;

            SetFolderEvents();
            Refresh();
        }

        private void SetFolderEvents()
        {
            _thisItems.ItemAdd += new ItemsEvents_ItemAddEventHandler(delegate
                {
                    Refresh();
                });

            _thisItems.ItemRemove += new ItemsEvents_ItemRemoveEventHandler(delegate
                {
                    Refresh();
                });
        }

        public void Refresh()
        {
            BackgroundWorker worker = new BackgroundWorker();

            worker.DoWork += new DoWorkEventHandler(delegate(object sender, DoWorkEventArgs e)
            {
                string[] fields = new string[] { "Subject", "SenderName", "SentOn", "EntryID" };
                var olTable = TicketMonitorStatics.GetOutlookTable(_thisFolder, fields, filter);
                olTable.Sort("SentOn", true);
                var refreshedList = new List<Ticket>();

                while (!olTable.EndOfTable)
                {
                    var olRow = olTable.GetNextRow();
                    refreshedList.Add(new Ticket
                    {
                        Subject = olRow["Subject"],
                        Sender = olRow["SenderName"],
                        SentOn = olRow["SentOn"],
                        EntryID = olRow["EntryID"]
                    });
                };
                e.Result = refreshedList;
            });

            worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(delegate(object sender, RunWorkerCompletedEventArgs e)
            {
                var refreshedList = e.Result as List<Ticket>;
                UpdateTicketList(refreshedList);

                worker.Dispose();
            });

            worker.RunWorkerAsync();
        }

        private void UpdateTicketList(List<Ticket> newList)
        {
            _thisTicketColl.Clear();

            foreach (Ticket t in newList)
            {
                _thisTicketColl.Add(t);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:16:33.190

Outlook 事件不应用于任何类型的同步。它们被设计为仅用于 UI 目的，并且可以在负载过重或发生网络错误（如果您使用在线商店）时丢弃。

您只能将事件用作代码需要尽快运行而不是稍后运行的提示。

您可以使用 IExchangeExportChanges MAPI 接口（仅限 C++ 或 Delphi）执行同步；这与 Outlook 用于同步其缓存文件夹的 API 相同。如果您不使用 C++ 或 Delphi，则可以使用 Redemption 及其 RDOFolderSynchronizer 对象 ( [http://www.dimastr.com/redemption/rdofoldersynchronizer.htm](http://www.dimastr.com/redemption/rdofoldersynchronizer.htm) )

# c# - mysql多个addwithvalue：一个返回值就够了

> ID：15324083
> 
> 赞同：0
> 
> 时间：2013-03-10T15:45:19.367
> 
> 标签：c#, mysql, parameters

我有一个具有多个 addwithvalue 值的查询

```
 IDCheck.CommandText = "SELECT * FROM cloudposgebruikers WHERE id = @id AND licentie1hc = @lc1 AND licentie2hc = @lc2"
        + " AND licentie3hc = @lc3 AND licentie4hc = @lc4 AND licentie5hc = @lc5 AND licentie6hc = @lc6 AND licentie7hc = @LC7 AND licentie8hc = @lc8"
        + " AND licentie9hc = @lc9 AND licentie10hc = @lc10";
        IDCheck.Parameters.AddWithValue("@id", licenseid);
        IDCheck.Parameters.AddWithValue("lc1", GetId);
        IDCheck.Parameters.AddWithValue("lc2", GetId);
        IDCheck.Parameters.AddWithValue("lc3", GetId);
        IDCheck.Parameters.AddWithValue("lc4", GetId);
        IDCheck.Parameters.AddWithValue("lc5", GetId);
        IDCheck.Parameters.AddWithValue("lc6", GetId);
        IDCheck.Parameters.AddWithValue("lc7", GetId);
        IDCheck.Parameters.AddWithValue("lc8", GetId);
        IDCheck.Parameters.AddWithValue("lc9", GetId);
        IDCheck.Parameters.AddWithValue("lc10", GetId); 
```

当然，这将比较所有这些值，并且只有在所有值都存在时才返回 true

假设只有 "licentie5hc" 和 "id" 匹配 => 返回 true

或者让我们说只有“id”和licentie1hc“匹配.. => return true

这可能吗 ？我知道我可以使用不同的查询，但我只需要“id”和“licentie x hc”参数之一来匹配......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T15:50:45.103

试试这个：

```
IDCheck.CommandText = "SELECT * FROM cloudposgebruikers 
    WHERE id = @id AND (licentie1hc = @lc1 OR licentie2hc = @lc2 
        OR licentie3hc = @lc3 OR licentie4hc = @lc4 OR licentie5hc = @lc5 
        OR licentie6hc = @lc6 OR licentie7hc = @LC7 OR 
        licentie8hc = @lc8 OR licentie9hc = @lc9 OR licentie10hc = @lc10)"; 
```

这相当于：

```
SELECT * FROM TABLE
WHERE id=@id AND(lic1=@lic1 OR lic2=@lic2...etc...OR lic10=@lc10); 
```

注意：我知道您可能无法更改数据库结构，但是您有十列，这表明您的数据库可以从一些重构中受益。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T15:57:02.613

将查询更改为使用 OR 而不是 AND，并且您不必为相同的值使用不同的参数，试试这个，

```
IDCheck.CommORText = "SELECT * FROM cloudposgebruikers WHERE id = @id OR licentie1hc = @lc OR licentie2hc = @lc"
        + " OR licentie3hc = @lc OR licentie4hc = @lc OR licentie5hc = @lc OR licentie6hc = @lc OR licentie7hc = @LC OR licentie8hc = @lc"
        + " OR licentie9hc = @lc OR licentie10hc = @lc";
        IDCheck.Parameters.AddWithValue("@id", licenseid);
        IDCheck.Parameters.AddWithValue("@lc", GetId); 
```

# php - php CodeIgniter框架尝试使用camelCase

> ID：15324087
> 
> 赞同：0
> 
> 时间：2013-03-10T15:45:32.287
> 
> 标签：php, codeigniter-2, camelcasing

我是代码点火器的新手，我对下划线约定没问题，但我想用驼峰式约定制作我自己的库/扩展核心 CI 类/自定义函数。

我试图改变：

```
 $config['subclass_prefix'] = 'My'; 
```

和创建：

```
class MyController
class MyModel
myFunction 
```

它可以工作，但正如文档所说，我不应该使用 camelCase 约定。我只是使用 camelCase 以便我知道哪个是 CI 的核心类/函数，哪个是我的自定义。

直到现在（使用 CI 的 3 天）它不会对 CI 产生任何问题并且我很享受这一点，但是是的，我只是 CI 中的新手，如果有人在使用 camelCase 和 CI 时有过不好的经验，请告诉我..

问题是：

我可以在 CI 中使用 camelCase 自定义类/函数吗？我的意思是它会成为CI的麻烦吗？

**CI 版本 2.X**

**PHP 5.4**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:44:44.327

如果你不是 CodeIgniter 命名约定暴政的粉丝，并且想要使用 CamelCase 或 lowerCamelCase 文件名，请执行此操作

1.  创建一个名为 path/to/app/application/core/My_Loader.php 的文件
2.  在文件中创建一个这样的类

    ```
    <?php
        class My_Loader extends CI_Loader
        {

        } 
    ```

3.  在 path/to/app/system/core/Loader.php 中找到 CI_Loader 类

4.  复制方法`public function model`
5.  将其粘贴到 My_Loader
6.  从 My_Loader::model 方法中删除`$model = strtolower($model);`和删除。`$model = ucfirst($model);`

沙赞！

# android - Asynctask 实现 LocationListener : onLocationChanged 从未调用

> ID：15324093
> 
> 赞同：1
> 
> 时间：2013-03-10T15:46:24.573
> 
> 标签：android

我制作了一个简单的代码，允许用户在按下某个按钮时获取他当前的 GPS 位置。所以，我创建了一个 MainActivity 和一个 Asynctask 类，Asynctask 实现了 LocationListener 但永远不会调用覆盖 onLocationChanged ！（LogCat 中没有任何痕迹..）然后，我得到 gps 数据，但当我按下按钮时他从未改变：/

如果我离开应用程序，如果我强制进程退出参数选项 Android 并再次启动我的应用程序，gps 数据保持不变。我不明白..为什么永远不会调用覆盖方法。

这是我唯一的文件：

公共类 MainActivity 扩展 Activity {

```
 public static Context context;
    public Button push = null;
    public getGPS tache_getGPS = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        context = getApplication().getApplicationContext();

        push = (Button) findViewById(R.id.button);
        push.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.i("T: onClick", "debut");
                tache_getGPS = new getGPS();
                tache_getGPS.execute();
                Log.i("T: onClick", "fin");
                // TODO Auto-generated method stub
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

}

class getGPS extends AsyncTask<Void, Integer, Location> implements
        LocationListener {

    final long REFRESH = 5 * 1000;
    private Location location;
    private LocationManager lm;

    protected void onPreExecute() {
        Log.i("T: onPreExcute", "debut");
        Criteria crit = new Criteria();
        crit.setAccuracy(Criteria.ACCURACY_FINE);

        // Configure location manager - I'm using just the network provider in
        // this example
        lm = (LocationManager) MainActivity.context
                .getSystemService(Context.LOCATION_SERVICE);

        String best = lm.getBestProvider(crit, false);
        Log.i("T: onPreExecute", "best : " + best);

        lm.requestLocationUpdates(best, 0, 1, this);
        location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        // nearProgress.setVisibility(View.VISIBLE);
        Log.i("T: onPreExcute", "fin");
    }

    protected Location doInBackground(Void... params) {
        Log.i("T: doInBackground", "debut");

        // Try to use the last known position
        Location lastLocation = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                /*
        // If it's too old, get a new one by location manager
        if (System.currentTimeMillis() - lastLocation.getTime() > REFRESH) {
            while (location == null)
                try {
                    Thread.sleep(100);
                } catch (Exception ex) {
                }

            return location;
        }
                */
        Log.i("T: doInBackground", "fin");
        return lastLocation;
    }

    protected void onPostExecute(Location location) {
        Log.i("T: onPostExecute", "debut");
        // nearProgress.setVisibility(View.GONE);

        lm = (LocationManager) MainActivity.context
                .getSystemService(Context.LOCATION_SERVICE);
        lm.removeUpdates(this);

        Log.i("T: onPostExecute",
                "Altitude : " + String.valueOf(location.getAltitude()));
        Log.i("T: onPostExecute",
                "Longitude : " + String.valueOf(location.getLongitude()));
        Log.i("T: onPostExecute",
                "Latitude : " + String.valueOf(location.getLatitude()));
        Log.i("T: onPostExecute",
                "Precision(mètre) : " + String.valueOf(location.getAccuracy()));
        Log.i("T: onPostExecute", "fin");

        Toast.makeText(
                MainActivity.context,
                "Altitude : " + String.valueOf(location.getAltitude()) + "\n"
                        + "Longitude : "
                        + String.valueOf(location.getLongitude()) + "\n"
                        + "Latitude : "
                        + String.valueOf(location.getLatitude()) + "\n"
                        + "Precision(mètre) : "
                        + String.valueOf(location.getAccuracy()),
                Toast.LENGTH_SHORT).show();

        return;
    }

    @Override
    public void onLocationChanged(Location newLocation) {
        Log.i("T: onLocationChanged", "debut");
        location = newLocation;
        Log.i("T: onLocationChanged", "fin");
    }

    @Override
    public void onProviderDisabled(String provider) {
        Log.i("T: onProviderDisabled", provider);
    }

    @Override
    public void onProviderEnabled(String provider) {
        Log.i("T: onProviderEnabled", provider);
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        Log.i("T: onStatusChanged", "provider : " + provider);
        Log.i("T: onStatusChanged", "status : " + status);
        Log.i("T: onStatusChanged", "extras : " + extras.toString());
    }

} 
```

感谢您的帮助，并为我糟糕的英语写作感到抱歉 x)

新代码（在建议 =) 之后），没有 Asinctask

```
public class MainActivity extends Activity implements LocationListener{

    public static Context context;
    public Button push = null;
    public getGPS tache_getGPS = null;

    private Location location;
    private LocationManager lm;
    final long REFRESH = 5 * 1000;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        context = getApplication().getApplicationContext();

        push = (Button) findViewById(R.id.button);
        push.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.i("T: onClick", "debut");
                location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                Location lastLocation = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                if (System.currentTimeMillis() - lastLocation.getTime() > REFRESH) {
                     while (location == null) 
                         try { Thread.sleep(100); } catch (Exception ex) { }
                     Log.i("FINAL : location", location.toString());
                     Toast.makeText(MainActivity.context, "location : "+location.toString(), Toast.LENGTH_SHORT).show();
                     return;
                }
                Log.i("FINAL : lastlocation", lastLocation.toString());
                Toast.makeText(MainActivity.context, "lastLocation : "+lastLocation.toString(), Toast.LENGTH_SHORT).show();
                Log.i("T: onClick", "fin");
            }
        });
    }

    @Override
    protected void onResume(){
        super.onResume();
        Criteria crit = new Criteria();
        crit.setAccuracy(Criteria.ACCURACY_FINE);
        lm = (LocationManager) MainActivity.context.getSystemService(Context.LOCATION_SERVICE);

        String best = lm.getBestProvider(crit, false);
        Log.i("T: onPreExecute", "best : " + best);

        lm.requestLocationUpdates(best, 1, 1, this);
    }

    @Override
    protected void onPause(){
        super.onPause();
        lm.removeUpdates(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onLocationChanged(Location newLocation) {
        Toast.makeText(context, "onLocationChanged", Toast.LENGTH_SHORT).show();
        Log.i("T: onLocationChanged", "debut");
        location = newLocation;
        Log.i("T: onLocationChanged", "fin");
    }

    @Override
    public void onProviderDisabled(String provider) {
        Log.i("T: onProviderDisabled", provider);
    }

    @Override
    public void onProviderEnabled(String provider) {
        Log.i("T: onProviderEnabled", provider);
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        Log.i("T: onStatusChanged", "provider : " + provider);
        Log.i("T: onStatusChanged", "status : " + status);
        Log.i("T: onStatusChanged", "extras : " + extras.toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:59:47.947

在`requestLocationUpdates`您指定 1 作为 minDistance （minDistance 是通知的最小距离间隔，以米为单位）。尝试将其设置为 0。

# python - django-admin.py 无法正常工作

> ID：15324095
> 
> 赞同：0
> 
> 时间：2013-03-10T15:46:36.043
> 
> 标签：python, django, powershell

我可以使用`django-admin.py startproject foo`它并且工作正常，但是现在当我尝试例如`django-admin.py shell`or`django-admin.py help`时，没有任何反应。

什么都没发生，我的意思是（`django-admin.py shell`例如）控制台不会像以前那样打开 shell 命令`manage.py`，而是会弹出并立即关闭一个新窗口，就像我双击 python 文件时所做的那样。没有任何错误消息，控制台只是不输出任何内容。

希望我想说的话是有道理的。我有点难以解释。我以前可以使用`django-admin.py shell`命令，所以我不知道发生了什么。

有谁知道发生了什么？在此先感谢，如果我需要尝试澄清一些问题，请随时提出，我会尝试的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:59:47.170

你升级你的 Python/Django 版本了吗？有时存在兼容性问题，您必须卸载以前的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T21:35:17.437

当窗口弹出然后消失时，这意味着正在调用的操作内部发生错误，但没有返回错误消息以在命令行中显示。就我而言，我试图运行 manage.py （和任何命令），它需要首先安装 MySQL-python。

# javascript - iphone中的融合图

> ID：15324112
> 
> 赞同：0
> 
> 时间：2013-03-10T15:47:59.327
> 
> 标签：javascript, iphone, html, ios, objective-c

下面是我的 HTML 文件内容，我想将其显示为融合图表。我已经下载了所有 .js 文件。但仍然不显示图表。我必须添加任何其他文件吗？

```
<!DOCTYPE html><html><head><script type='text/javascript' src='FusionCharts.js'></script><script type='text/javascript' src='jquery.min.js'></script><script type='text/javascript' src='FusionCharts.HC.js'></script><script type='text/javascript' src='FusionCharts.HC.Charts.js'></script></head><body onload='addversion();'><div id='chart_container'>Chart will render here.</div><script type='text/javascript'>var chart_object = new FusionCharts('Bar2D.swf', 'ChartId2', '300.000000', '440.000000', '0', '1');FusionCharts.setCurrentRenderer('javascript');chart_object.setXMLUrl("204282.xml");chart_object.setTransparent(true);chart_object.render('chart_container');</script></body></html> 
```

下面是我的 204282.xml 文件数据。

```
<chart  caption='Performance summary, ordered by Ownership'  subcaption='A Retail Deluxe Recent reviews' xAxisName='Ownership' yAxisName='Grade' numberSuffix='' canvasPadding='30' canvasRightMargin='30' placeValuesInside='0' paletteColors='f05528, f7341d, f7871d, f7e51d, dac5c3, ffffff' yAxisMinValue='1' yAxisMaxValue='7' numberScaleValue='1000000,1000' numberScaleUnit='M,B ' imageSave='1' imageSaveURL='libraries/fusioncharts/PHP/FCExporter.php' connectNullData='1'  showValues="1"   bgAlpha='1' showBorder='0' bgColor='FFFFFF' baseFontSize='11' showFCMenuItem='0' showExportDataMenuItem='1' exportShowMenuItem='1' exportDataMenuItemLabel='Copy data to CSV format' useRoundEdges='1' showAlternateVGridColor='1' alternateHGridAlpha='60' alternateVGridAlpha='10' showDivLineSecondaryValue='1' radarFillColor='FFFFFF' fullMode='1' numDivLines='5' canvasbgcolor='FFFFFF' canvasbgAlpha='100' saveAllPanelBgColor='E9E9E9' exportAtClient='0' exportAction='download' exportFileName='CheckerChart' decimals='1'  >  <set label="Self owned" toolText="57.39
Self owned
(10 branches)" value="57.39" link="report-property.php%3FClientID%3D106%26SetID%3D%26PropForFiltering%3D%26props%3D78%3B203%26WorkerID%3D0%26watchedReviews%3D%26reportDateArng%3D1%26hdrf_chosenCycleExtent%3D%26rangeStartd%3D0%26rangeStartm%3D0%26rangeStarty%3D0%26rangeEndd%3D0%26rangeEndm%3D0%26rangeEndy%3D0%26pastDateCyclesNumber%3D2%26selectedCycleExtent%3D%26displayType%3D3%26DyChartType%3DColumn2D%26DycX%3D-1%26DycY%3D-1%26callingReportPageName%3Dreport-property.php%26js_refresh%3D0%26js_submit%3D0%26isPopup%3D0%26go%3D1%26show%3D1%26appmode%3D1%26PropID%3D-1" />   <set label="Franchised" toolText="55.34
Franchised
(12 branches)" value="55.34" link="report-property.php%3FClientID%3D106%26SetID%3D%26PropForFiltering%3D%26props%3D78%3B204%26WorkerID%3D0%26watchedReviews%3D%26reportDateArng%3D1%26hdrf_chosenCycleExtent%3D%26rangeStartd%3D0%26rangeStartm%3D0%26rangeStarty%3D0%26rangeEndd%3D0%26rangeEndm%3D0%26rangeEndy%3D0%26pastDateCyclesNumber%3D2%26selectedCycleExtent%3D%26displayType%3D3%26DyChartType%3DColumn2D%26DycX%3D-1%26DycY%3D-1%26callingReportPageName%3Dreport-property.php%26js_refresh%3D0%26js_submit%3D0%26isPopup%3D0%26go%3D1%26show%3D1%26appmode%3D1%26PropID%3D-1" />   <set label="(Empty property value)" toolText="44.4
(Empty property value)
(8 branches)" value="44.4" link="report-property.php%3FClientID%3D106%26SetID%3D%26PropForFiltering%3D%26props%3D78%3B0%26WorkerID%3D0%26watchedReviews%3D%26reportDateArng%3D1%26hdrf_chosenCycleExtent%3D%26rangeStartd%3D0%26rangeStartm%3D0%26rangeStarty%3D0%26rangeEndd%3D0%26rangeEndm%3D0%26rangeEndy%3D0%26pastDateCyclesNumber%3D2%26selectedCycleExtent%3D%26displayType%3D3%26DyChartType%3DColumn2D%26DycX%3D-1%26DycY%3D-1%26callingReportPageName%3Dreport-property.php%26js_refresh%3D0%26js_submit%3D0%26isPopup%3D0%26go%3D1%26show%3D1%26appmode%3D1%26PropID%3D-1" />  <trendLines>
                <line  endValue='53.1' startValue='53.1' color='' displayvalue='Average
53.1' valueOnRight='1' />
                </trendLines> </chart> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:50:02.323

*这是“ /* 和/ /*之间的 index.html 文件

 *```
<script type="text/javascript" src="http://www.fusioncharts.com/lib/jquery/jquery-1.6.2.min.js"></script>
<script language="JavaScript" src="http://www.fusioncharts.com/lib/js/FusionCharts.js"></script>
<script language="JavaScript" src="http://www.fusioncharts.com/lib/js/FusionCharts.HC.js"></script>
<script language="JavaScript" src="http://www.fusioncharts.com/lib/js/FusionCharts.HC.Charts.js"></script>
<script language="JavaScript" src="http://www.fusioncharts.com/lib/js/jquery.min.js"></script> 
```

图表将在此处呈现。

```
<script type='text/javascript'>var chart_object = new FusionCharts('Bar2D.swf', 'ChartId2', '300.000000', '440.000000', '0', '1');FusionCharts.setCurrentRenderer('javascript');chart_object.setXMLUrl("204282.xml");chart_object.setTransparent(true);chart_object.render('chart_container');</script> 
```

*/ 使用以下代码加载

```
NSString *filePath = [[NSBundle mainBundle]pathForResource:@"index" ofType:@"html"];
NSString *fileContents = [NSString stringWithContentsOfFile: filePath encoding:NSUTF8StringEncoding error:NULL];
NSURL *baseURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]];

[webView  loadHTMLString: fileContents baseURL: baseURL]; 
```*

# iphone - iOS 视图 - 如何去除过多的阴影？

> ID：15324113
> 
> 赞同：0
> 
> 时间：2013-03-10T15:48:07.753
> 
> 标签：iphone, ios, cocoa-touch, uiviewcontroller

我有一个`UIViewController`嵌套在另一个`UIViewController`（iOS 4.3+）中，

它显示得很好，除了一件事 - 很多过多的阴影。我试过用`setShadowRadius`etc 删除它，但没有运气..

这是我用来创建它的代码：

```
RDPreviewViewController* preview = [[[RDPreviewViewController alloc] initWithNibName:@"RDPreviewViewController" bundle:[NSBundle mainBundle]] autorelease];

[preview.view.layer setShadowOpacity:0.0];
[preview.view.layer setShadowRadius:0.0];
[preview.view.layer setColor:nil];
[preview.view setFrame:CGRectMake(0, 100, 320, 264)];

[self.mainView addSubview:preview.view]; 
```

结果如下：

![在此处输入图像描述](../Images/261ce31ecac58fe2ff10838b83c7b125.png)

如何删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:17:21.107

我*怀疑*- 这是一个理论 - 鉴于你所说的，你的带有微妙阴影的 PNG 图像被多次加载。这就是为什么您的阴影看起来比您预期的要暗得多的原因 - 几个相同的 PNG 相互叠加。

我认为是这种情况的原因是，从您发布的代码来看，您并没有以编程方式应用阴影，并且默认情况下视图没有阴影。当然，也许您正在其他地方的代码中添加阴影，但根据我自己的经验，我认为它看起来好像以某种方式多次添加相同的视图（您的图像视图）。

如果可能的话，如果您共享更多代码可能会有所帮助。

# c# - 静态方法：在这种情况下使用它有什么危险吗？

> ID：15324118
> 
> 赞同：0
> 
> 时间：2013-03-10T15:48:33.227
> 
> 标签：c#, static

我有用 c# 编写的网络应用程序。它由三个项目组成。其中两个是 asp.net mvc 项目，其中一个是一个简单的项目，只有我在两个 mvc 项目中使用的类。因此，这两个 mvc 应用程序引用了第三个项目。

我在非 mvc 项目中有一个静态方法，它基本上是这样做的：它有两个输入参数：字符串文本、MyEntities db。MyEntities 是我的数据库的一个实例，即 .edmx 文件。

在方法内部，我解析文本，将其分成单独的行，获取其中的一部分。对于那部分，根据用户，我检查 db.tblToy 中是否有具有该名称的记录。

每个用户都有一个不同的数据库。因此，我采用 user_id 并据此在 tblToy 表中的相应数据库中进行搜索。危险的意思是，如果该方法返回不正确的结果。例如，对于 user1，它将检查 user2 的数据库，因为它是静态的。

该方法是静态的。我不使用类实例调用它。我的问题是：这种方法是静态的有什么危险吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:54:29.017

不，它是静态的这一事实并不比它作为实例方法更危险。你在那个方法中投入了什么才是最重要的。

静态方法和实例方法之间的唯一区别是您需要在类的实例上调用一个，而另一个只在类型本身上调用。

来自大师的[这个答案可能会有所帮助：](https://stackoverflow.com/a/1090670/279516)

> 静态方法本质上不是线程安全的。CLR 对它们的处理与实例方法没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T15:58:09.800

不，静态方法在这种情况下没有危险，如果它只处理来自参数的信息。当方法处理静态变量/自动实现的属性时，游戏会发生变化

# iphone - Objective c - UIImage 调整大小问题

> ID：15324121
> 
> 赞同：-1
> 
> 时间：2013-03-10T15:48:46.940
> 
> 标签：iphone, ios, objective-c, uiimage, cgimage

我有一个显示相框（边框）的资源（.png 文件）。
此 .png 文件大小为 100x100px，边框宽度为 10px。

![我的原图](../Images/e9cd2374195d01fdd44362b0a4499776.png)

**我的问题：**

如何从这个图像创建另一个 UIImage，具有不同的大小，而不破坏边框的宽度？

**问题：**

当我尝试从原始图像中绘制新图像时，`CGContextDrawImage` 我得到了一个具有新尺寸的新图像，但我的边框比例被破坏了。

```
 CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newWidth, newHeight));
        CGImageRef imageRef = //... the image

        // Build a context that's the same dimensions as the new size
        CGContextRef bitmap = CGBitmapContextCreate(NULL,
                                                    newRect.size.width,
                                                    newRect.size.height,
                                                    CGImageGetBitsPerComponent(imageRef),
                                                    0,
                                                    CGImageGetColorSpace(imageRef),
                                                    CGImageGetBitmapInfo(imageRef));

        // Set the quality level to use when rescaling
        CGContextSetInterpolationQuality(bitmap, kCGInterpolationHigh);

        // Draw into the context; this scales the image
        CGContextDrawImage(bitmap, newRect, imageRef);

        // Get the resized image from the context and a UIImage
        CGImageRef newImageRef = CGBitmapContextCreateImage(bitmap);
        UIImage *newImage = [UIImage imageWithCGImage:newImageRef];

        // Clean up
        CGContextRelease(bitmap);
        CGImageRelease(newImageRef); 
```

例如，当我尝试创建大小为 800x100p 的图像时，我得到一个顶部和底部边框非常细的图像。

![我得到的坏结果](../Images/1f8596986d25bd45efe7969d507f798a.png)

我需要的是边框将保持相同的宽度
![在此处输入图像描述](../Images/b2fa73fb701af9803188667c7a3e58c7.png)

***注意**
使用`resizableImageWithCapInsets:`不会帮助我，因为我需要一个新大小的新图像来保存在光盘上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:51:48.247

您可以使用 resizableImageWithCapInsets：

```
UIImage *img = [UIImage imageNamed:@"myResource"];
img = [img resizableImageWithCapInsets:UIEdgeInsetsMake(10,10,10,10)]; 
```

我从未在 CGContextDrawImage 中使用过这种方法，但它应该可以工作。

# css - 为 div 标签分配背景颜色不会改变 div 标签内元素的背景

> ID：15324124
> 
> 赞同：1
> 
> 时间：2013-03-10T15:48:57.267
> 
> 标签：css, html, background-color

我很难为 div 标签中的内容分配背景颜色。

在我的 html 文件中，我有...

```
<!doctype html>
<html>
    <head>
    <meta charset="utf-8">
    <title>Guitar Gods</title>

    <link href="guitargods_css.css" rel="stylesheet" type="text/css">
    </head>

    <body>
       <div id="header">
       <h1>Guitar Gods</h1>
       <ul>
           <li><a href="#">Home</a></li>
           <li><a href="#">Scales</a></li>
           <li><a href="#">Videos</a></li>
           <li><a href="#">Exercises</a></li>
       </ul>
       </div>
    </body>
</html> 
```

在我的 css 文件中，我有...

@charset "utf-8"; /* CSS 文档 */

```
h1 {
    color: blue;
}
#header {
    background-color: black;
    padding-left: 10px;
}
#header a {
    text-decoration: none;
    display: block;
}
#header ul {
    list-style-type: none;
    background-color: black;
}
#header ul li {
    float: left;
    padding-left: 5px;
    font:Georgia, "Times New Roman", Times, serif;
} 
```

h1 背景是黑色的，但我列表中的所有项目都没有指定的背景颜色。

我不确定我在这里缺少什么。这似乎很简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T16:06:30.730

您需要清除浮动（从列表项中）。一种方法是添加`overflow: hidden`到`#header ul`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:06:15.577

如果您使用的是 firefox 或 chrome，请右键单击 h1 元素并检查元素。您将能够看到应用于该标签的 css。您始终可以将 h1 背景颜色设置为其他颜色。

# linux - 寻找免费的 Linux 操作系统

> ID：15324126
> 
> 赞同：-3
> 
> 时间：2013-03-10T15:49:03.327
> 
> 标签：linux

我想在我的笔记本电脑上安装一个免费的 Linux 操作系统。我不是技术人员。我正在寻找具有 Fn(Function) 键内置功能的 Linux 操作系统。如果您知道任何具有这些功能的特定 Linux 操作系统，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:50:33.523

这个操作系统有一个笔记本电脑版本。易于使用，并支持最新的硬件：

[http://www.ubuntu.com/download/desktop](http://www.ubuntu.com/download/desktop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:54:31.760

有很多选择。Ubuntu 是事实上的第一个发行版，尽管自从他们使用 Unity 和 Gnome 3 后我就不再关心它了。我宁愿将 Mint 与 Cinnamon 一起使用。

一个好的开始是查看 Linux Watch [http://distrowatch.com/](http://distrowatch.com/)之类的东西，看看哪些发行版听起来不错，然后刻录 live 磁盘并检查一下。如果你喜欢它，你可以安装它。

# google-maps - 地标坐标中的负高度导致谷歌地图出错

> ID：15324134
> 
> 赞同：0
> 
> 时间：2013-03-10T15:49:31.390
> 
> 标签：google-maps, kml

几周前，我在谷歌地图中的一些 KML 停止工作，而我没有做任何事情。

我已经通过验证器，它说它的高度不正确的问题，但我似乎无法弄清楚。

似乎负高度不起作用。

如果我删除具有负高度的坐标，它工作正常。

任何人都知道我做错了什么或如何纠正它？

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Placemark id="rob">
 <name>test</name>
 <description>
  Robs Map
 </description>
 <LineString>
 <tessellate>1</tessellate>
 <coordinates>
-3.006974,51.560436,10.929999
-3.006605,51.561489,10.929999
-3.004138,51.582977,-3.870000
-2.699919,51.387234,180.199997
 </coordinates>
 </LineString>
</Placemark>
</kml> 
```

我从验证器得到的错误是：

此提要未验证。

第 15 行，第 0 列：坐标值无效：-3.870000 [帮助]

谢谢，

罗布·D。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:52:53.457

它适用于本地主机以及此在线服务：[display-kml.appspot.com](http://display-kml.appspot.com/) 您使用哪个验证器？

# python - 如何在 Google App Engine 中使用自定义 python 库和应用程序？

> ID：15324136
> 
> 赞同：2
> 
> 时间：2013-03-10T15:49:40.030
> 
> 标签：python, google-app-engine, django-nonrel

我想知道如何在 Google App Engine 的 django nonrel 中安装和使用第三方库和/或应用程序？

目前我的 Web 应用程序使用 django-nonrel，我想安装一些在 github 中可用的库：

通常库需要通过 pip 或 easy_install 命令安装：

```
$ pip install django-social-auth 
```

如何在 Google App Engine 中安装或使用库？

示例应用程序结构：

```
myapp/
    lib/
        django-social-auth/     
    app.yaml
    index.yaml
    main.py
    views.py 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:31:10.543

将您想要的库放在应用程序路径的根目录中（与您的 app.yaml 相同的位置）。您需要执行此操作（或变体），以便在部署时将库的所有文件上传到 App Engine 的服务器。您机器上的实际 PYTHONPATH 并未直接使用。

一种常见的变体是将符号链接放到您的主应用程序路径中的库中。所以这里有一些变化：

1.  使用 pip 安装 django-social-auth，并创建符号链接 myapp/social_auth 以指向 pip 安装 social auth 的位置。

2.  从 github 下载源代码并将 social_auth 文件夹直接复制到您的 myapp 文件夹中。

3.  同步 django-social-auth 的 github 存储库，并创建符号链接 myapp/social_auth 以指向位置 django-social-auth/social_auth。

# scipy - scipy.optimize.fsolve'正确的浮点数组'错误

> ID：15324138
> 
> 赞同：2
> 
> 时间：2013-03-10T15:49:57.507
> 
> 标签：scipy, root

我需要计算一个函数的根，我正在使用 scipy.optimize.fsolve。但是，当我调用 fsolve 时，有时它会输出一个错误，提示“函数调用的结果不是正确的浮点数组”。

这是我正在使用的输入示例：

```
In [45]: guess = linspace(0.1,1.0,11)

In [46]: alpha_old = 0.5

In [47]: n_old = 0

In [48]: n_new = 1

In [49]: S0 = 0.9

In [50]: fsolve(alpha_eq,guess,args=(n_old,alpha_old,n_new,S0))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
TypeError: array cannot be safely cast to required type
---------------------------------------------------------------------------
error                                     Traceback (most recent call last)
/home/andres/Documents/UdeA/Proyecto/basis_analysis/<ipython-input-50-f1e9a42ba072> in <module>()
----> 1 fsolve(bb.alpha_eq,guess,args=(n_old,alpha_old,n_new,S0))

/usr/lib/python2.7/dist-packages/scipy/optimize/minpack.pyc in fsolve(func, x0, args, fprime, full_output, col_deriv, xtol, maxfev, band, epsfcn, factor, diag)
    123             maxfev = 200*(n + 1)
    124         retval = _minpack._hybrd(func, x0, args, full_output, xtol,
--> 125                 maxfev, ml, mu, epsfcn, factor, diag)
    126     else:
    127         _check_func('fsolve', 'fprime', Dfun, x0, args, n, (n,n))

error: Result from function call is not a proper array of floats.

In [51]: guess = linspace(0.1,1.0,2)

In [52]: fsolve(alpha_eq,guess,args=(n_old,alpha_old,n_new,S0))
Out[52]: array([ 0.54382423,  1.29716005])

In [53]: guess = linspace(0.1,1.0,3)

In [54]: fsolve(alpha_eq,guess,args=(n_old,alpha_old,n_new,S0))
Out[54]: array([ 0.54382423,  0.54382423,  1.29716005]) 
```

在那里你可以看到，对于 In[46] 中定义的“guess”，它会输出一个错误，但是对于 In[51] 和 In[53] 中定义的“guess”，它可以正常工作。据我所知，In[46]、In[51] 和 In[53] 都是相同类型的数组，那么我在 In[50] 中出现错误的原因是什么？

以下是我正在调用的函数，以防它们是问题的原因：

```
def alpha_eq(alpha2,n1,alpha1,n2,S0):
    return overlap(n1,alpha1,n2,alpha2) - S0

def overlap(n1,alpha1,n2,alpha2):
    aux1 = sqrt((2.0*alpha1)**(2*n1+3)/factorial(2*n1+2))
    aux2 = sqrt((2.0*alpha2)**(2*n2+3)/factorial(2*n2+2))
    return aux1 * aux2 * factorial(n1+n2+2) / (alpha1+alpha2)**(n1+n2+3) 
```

（函数 linspace、sqrt 和 factorial 是从 scipy 导入的）

这是我试图找到根源的函数图。 [阴谋](http://postimage.org/image/3kdd1sevd/)

在我看来，这是 fsolve 的一个错误，但是我想确保在报告之前我没有犯愚蠢的错误。

如果我的代码有问题，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:34:01.277

我已经修改了您`overlap`的调试功能，如下所示：

```
def overlap(n1,alpha1,n2,alpha2):
    print n1, alpha1, n2, alpha2
    aux1 = sqrt((2.0*alpha1)**(2*n1 + 3)/factorial(2*n1 + 2))
    aux2 = sqrt((2.0*alpha2)**(2*n2 + 3)/factorial(2*n2 + 2))
    ret = aux1 * aux2 * factorial(n1+n2+2) / (alpha1+alpha2)**(n1+n2+3)
    print ret, ret.dtype
    return ret 
```

当我尝试重现您的错误时，会发生以下情况：

```
>>> scipy.optimize.fsolve(alpha_eq,guess,args=(n_old,alpha_old,n_new,S0))
0 0.5 1 [ 0.1   0.19  0.28  0.37  0.46  0.55  0.64  0.73  0.82  0.91  1\.  ]
[ 0.11953652  0.34008953  0.54906314  0.71208678  0.82778065  0.90418052
  0.95046505  0.97452352  0.98252708  0.97911263  0.96769965] float64

...

0 0.5 1 [ 0.45613162  0.41366639  0.44818267  0.49222515  0.52879856  0.54371741
  0.50642005  0.28700652 -3.72580492  1.81152096  1.41975621]
[ 0.82368346+0.j          0.77371428+0.j          0.81503304+0.j
  0.85916030+0.j          0.88922137+0.j          0.89992643+0.j
  0.87149667+0.j          0.56353606+0.j          0.00000000+1.21228156j
  0.75791881+0.j          0.86627491+0.j        ] complex128 
```

因此，在求解方程的过程中，正在计算负数的平方根，这会导致`complex128`dtype 和您的错误。

`sqrt`使用您的功能，如果您只对零感兴趣，我认为如果您提高`S0`到 4 次方，您可以摆脱s：

```
def alpha_eq(alpha2,n1,alpha1,n2,S0):
    return overlap(n1,alpha1,n2,alpha2) - S0**4

def overlap(n1,alpha1,n2,alpha2):
    aux1 = (2.0*alpha1)**(2*n1 + 3)/factorial(2*n1 + 2)
    aux2 = (2.0*alpha2)**(2*n2 + 3)/factorial(2*n2 + 2)
    ret = aux1 * aux2 * factorial(n1+n2+2) / (alpha1+alpha2)**(n1+n2+3)
    return ret 
```

现在：

```
>>> scipy.optimize.fsolve(alpha_eq,guess,args=(n_old,alpha_old,n_new,S0))
array([ 0.92452239,  0.92452239,  0.92452239,  0.92452239,  0.92452239,
        0.92452239,  0.92452239,  0.92452239,  0.92452239,  0.92452239,
        0.92452239]) 
```

# asp.net - 如何从 ReportBuilder 3.0 在 VisualStudio2010 中使用报表

> ID：15324139
> 
> 赞同：0
> 
> 时间：2013-03-10T15:50:02.033
> 
> 标签：asp.net, visual-studio-2010, reportbuilder3.0

我从 Report Builder 3.0 创建了一个名为 Summary 的报告，我从 localhost/reports_2012 访问了该报告。我已将带有名称摘要的报告保存在桌面上，并注意到它具有 .rdl 格式。我打开了visualstudio2010并使用asp.net webforms创建了一个网页，然后从ToolBox中拖放reportViewer。我在解决方案资源管理器中创建了一个名为 Reports 的文件夹，并在报告查看器上添加了一个现有项目（来自桌面的摘要报告），我在下拉 summary.rdl 下找不到，而是有服务器报告。

请帮助我如何使用从 sql2012 的 Report Builder 3.0 创建的报告和 Visual Studio 2010 asp.net webforms ReportViewer

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:04:12.743

您需要将您的报告（使用报告生成器创建的 RDL）上传到报告服务器。

然后，当您的报表存在于报表服务器中时，他将拥有一个唯一的 URL。

此 URL 以您的报表服务器 URL 开头，然后是您的报表在报表服务器上的位置。

例如报表服务器路径

```
http://myrshost/reportserver? 
```

例如报告路径位置

```
/Sales/YearlySalesByCategory&rs:Command=Render 
```

完整网址

```
http://myrshost/reportserver?/Sales/YearlySalesByCategory&rs:Command=Render 
```

您不能将报告放入解决方案资源管理器并从那里运行 t 。

有关更多信息，请查看以下链接：

*   [报告生成器 3](http://msdn.microsoft.com/en-us/library/dd207008%28v=sql.105%29.aspx)
*   [报告服务器](http://msdn.microsoft.com/en-us/library/ms157231.aspx)
*   [如何使用报表管理器将报表上传到报表服务器](http://msdn.microsoft.com/en-us/library/ms157332.aspx)

# eval - printf 符号名称和值

> ID：15324141
> 
> 赞同：1
> 
> 时间：2013-03-10T15:50:06.860
> 
> 标签：eval, string-formatting, racket

假设我在某处定义了几个符号：

```
#lang racket
(define foo 123)
(define bar '("1" "2" "3")) 
```

我需要一种方法来生成类似`"foo = 123"`or的字符串`"bar = '("1" "2" "3")"`。我为此写了一个函数：

```
(define (f2 sy)
  (format "~a = ~s" sy (eval sy))) 
```

此功能在解释器窗口中运行良好。

```
> (f2 'foo)
"foo = 123"
> (f2 'bar)
"bar = (\"1\" \"2\" \"3\")" 
```

这对我来说是相当满意的。但是，当我在代码中使用它时，我得到

```
foo: unbound identifier;
 also, no #%top syntax transformer is bound in: foo 
```

我有一种感觉，我做错了什么。您能否提出解决我问题的正确方法？

PS：我正在使用`DrRacket, version 5.3.1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:57:53.097

首先，`eval`真的应该只在 Racket 中作为最后的手段使用。它使您的程序效率降低且更难理解。这样做的正确方法可能是编写如下宏：

```
(define-syntax-rule (f2 sy)
  (format "~a = ~s" (quote sy) sy))

(define foo 2)
(f2 foo) 
```

该宏只是将您要查找的变量的名称替换为正文中的格式表达式。将`quote`变量名称转换为可以打印的符号。这个宏不能作为一个过程工作，因为在你可以之前`(f2 foo)`会尊重并打印它的名字。`foo``quote`

* * *

`eval`注意：您无法按预期工作的原因是因为`eval`总是针对命名空间进行评估，这决定了范围内的内容。模块中的默认命名空间中没有任何内容，因此`eval`看不到`foo`或其他任何内容。[您可以在指南](http://pre.racket-lang.org/docs/html/guide/eval.html)中阅读有关命名空间的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:20:01.180

另一种解决方案，也受到 Asumu Takikawa 的启发，使用了指南中描述的技巧：

```
(define-namespace-anchor a)
(define ns (namespace-anchor->namespace a))

(define (f2 sy)
  (format "~a = ~s" sy (eval sy ns))) 
```

与使用宏的解决方案相比，可以映射此功能。

# php - 日期 PHP 的操作

> ID：15324142
> 
> 赞同：-4
> 
> 时间：2013-03-10T15:50:09.667
> 
> 标签：php, date, days

我需要对日期进行一些操作。从 DB 脚本读取操作的日期和频率（例如 21 天），并应计算自实际日期以来的下一个操作时间。我已经尝试以某种方式做到这一点（我很难用英文写它，所以你可以在下面找到代码）。

```
 //$unix_on - date from DB
    //$devices[$i]['freq'] - frequency of actions
    $unix_on=strtotime($devices[$i]['date_on']);
    $unix_today=strtotime(date('Y-m-d'));
    $actions=($unix_today-$unix_on)/(86400*$devices[$i]['freq']);
    $b=explode(".", $actions);
    $a='0'.'.'.$b['1'];
    $f=$a*$devices[$i]['freq'];
    $d=$unix_today+($f*86400);
    $e=date("Y-m-d",$d); 
```

但它不起作用 - 计算中有错误，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:54:49.607

```
$dateOn = new DateTime($devices[$i]['date_on']);
$frecuency = new DateInterval('P' . $devices[$i]['freq'] . 'D'); // Period of x Days

$dateOn->add($frequency);

$e = $dateOn->format('Y-m-d'); 
```

请参阅[http://es2.php.net/manual/en/datetime.construct.php](http://es2.php.net/manual/en/datetime.construct.php)、[http://es2.php.net/manual/en/datetime.add.php](http://es2.php.net/manual/en/datetime.add.php)和[http://es2.php.net /manual/en/dateinterval.construct.php](http://es2.php.net/manual/en/dateinterval.construct.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T15:53:07.360

`strtotime`比您使用它的功能强大得多。尝试这个：

```
$e = date("Y-m-d",strtotime($devices[$i]['date_on']." +".$devices[$i]['freq']."days")); 
```

# java - 字符串文字的垃圾收集

> ID：15324143
> 
> 赞同：21
> 
> 时间：2013-03-10T15:50:27.260
> 
> 标签：java, string, garbage-collection

我正在阅读有关垃圾收集的信息，当我搜索字符串文字垃圾收集时，我的搜索结果令人困惑。

我需要澄清以下几点：

1.  如果一个字符串在编译时被定义为文字 [eg: `String str = "java"`] 那么它会被垃圾收集吗？

2.  如果使用实习生方法 [eg: `String str = new String("java").intern()`] 那么它会被垃圾收集吗？它也将与第 1 点中的字符串文字区别对待。

3.  有些地方提到只有在`String`卸载类时才会对文字进行垃圾收集？这是否有意义，因为我认为`String`类永远不会被卸载。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-10T16:15:37.007

> 如果一个字符串在编译时被定义为文字 [eg: `String str = "java";`] 那么它会被垃圾收集吗？

可能不是。代码对象将包含一个或多个对`String`表示文字的对象的引用。所以只要代码对象是可访问的，`String`对象就会到。

代码对象可能无法访问，但前提是它们是动态加载的……并且它们的类加载器被销毁。

> 如果我使用实习生方法 [eg: `String str = new String("java").intern()`] 那么它会被垃圾收集吗？

调用返回的对象`intern`将与表示`"java"`字符串文字的对象相同。（`"java"`文字在类加载时被实习。当您`String`在代码片段中实习新构造的对象时，它将查找并返回先前实习的`"java"`字符串。）

但是，与字符串文字不相同的实习字符串一旦变得无法访问，*就会被垃圾回收。*PermGen 空间*是*在所有最近的 HotSpot JVM 上收集的垃圾。（在 Java 8 之前……它完全放弃了 PermGen。）

> 它也将与第 1 点中的字符串文字区别对待。

不......因为它与字符串文字是同一个对象。

事实上，一旦你了解了发生了什么，很明显字符串文字也没有被特殊对待。它只是“可达性”规则的应用......

> 有些地方提到只有在`String`卸载类时才会对文字进行垃圾收集？这是否有意义，因为我认为`String`该类永远不会被卸载。

你说的对。这没有意义。说那是不正确的消息来源。（如果您发布一个 URL 会很有帮助，这样我们就可以阅读他们自己所说的内容......）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-10T15:57:57.940

在正常情况下，字符串字面量和类都分配到 JVM 的永久代（“PermGen”）中，通常永远不会被收集。被实习的字符串（例如`mystring.intern()`）存储在 permgen 中的类所拥有的内存池中`String`，曾经有过激进的实习可能导致空间泄漏的情况，因为字符串池本身持有对每个字符串的引用，即使没有其他字符串存在参考。显然这不再是正确的，至少从 JDK 1.6 开始（参见，例如，[here](http://www.codeinstructions.com/2009/01/busting-javalangstringintern-myths.html)）。

有关 permgen 的更多信息，[这](http://plumbr.eu/blog/what-is-a-permgen-leak)是对该主题的一个不错的概述。（注意：该链接指向与产品关联的博客。我与博客、公司或产品没有任何关联，但博客条目很有用，与产品没有太大关系。 )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T15:58:54.823

1.  只要程序在内存中，文字字符串就会保留在内存中。
2.  `str`将被垃圾收集，但创建它的文字不会。
3.  这是非常有意义的，因为在卸载程序时会卸载字符串类。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-10T16:05:53.227

`intern()`方法检查字符串池中对象的可用性。如果对象/文字可用，则将返回它的引用。如果池中没有文字，则将对象加载到永久区域（字符串池）中，然后将返回对它的引用。我们必须`intern()`明智地使用方法。

# xml - 在 XML 中向 joomla 菜单项添加自定义请求

> ID：15324146
> 
> 赞同：0
> 
> 时间：2013-03-10T15:50:37.470
> 
> 标签：xml, model-view-controller, joomla

我正在尝试修改 hikashop 的 XML 文件，以便添加一个额外的下拉列表，允许我选择某些类型和值，这些类型和值稍后将由 php 文件解析。归结为我想向菜单项添加一个额外的请求，而我知道这样做的唯一方法是在 XML 文件中添加一个请求字段。

目前它确实有效，但只显示我的自定义字段；另一个丢失了。如果我将标签放在 fieldset 标签内，则该功能将不再起作用。

这是我的xml文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<metadata>
    <state>
        <name>Product page</name>
        <params addpath="/components/com_hikashop/params">
            <param name="product_id" type="selectproduct" default="0" label="Select a product" description="Select here the product to display for the current link" />
    </params>
</state>
<layout title="COM_HIKASHOP_PRODUCT_FORM_VIEW_DEFAULT_TITLE">
    <message></message>
</layout>
<fields name="params" addfieldpath="/components/com_hikashop/fields">
    <fieldset name="basic" label="Select a product">
        <field
            id="product_id"
            name="product_id"
            type="selectproduct"
            label="Select a product"
            description="Select here the product to display for the current link"
                            />

    </fieldset>

</fields>

<fields name="request">
    <fieldset name="request">
        <field
            name="viewType"
            type="list"
            label="Type of Product"
            description="Select the type of product to grab the correct template"
            default="2"
        >
            <option value="1">Brace</option>
            <option value="2">Shoe</option>
            <option value="3">misc</option>
        </field>
    </fieldset>

</fields> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:06:11.493

您的 xml 结构不正确。所有参数都应该在`<fields>`标签内，但这样的标签只能有一个，所有参数都应该嵌套在标签内。所以字段部分应该是这样的：

```
<fields name="params" addfieldpath="/components/com_hikashop/fields">
    <fieldset name="basic" label="Select a product">
        <field
            id="product_id"
            name="product_id"
            type="selectproduct"
            label="Select a product"
            description="Select here the product to display for the current link"
                            />
        <field
            name="viewType"
            type="list"
            label="Type of Product"
            description="Select the type of product to grab the correct template"
            default="2"
        >
            <option value="1">Brace</option>
            <option value="2">Shoe</option>
            <option value="3">misc</option>
        </field>
    </fieldset>
</fields> 
```

# css - 为什么悬停时背景不改变颜色？

> ID：15324153
> 
> 赞同：0
> 
> 时间：2013-03-10T15:51:02.963
> 
> 标签：css, html

HTML

```
 <nav class="horizontal">
        <ul>
           <li><a href="#">Home</a></li>
           <li><a href="#">Menu</a></li>
           <li><a href="#">Locations</a></li>
           <li><a href="#">Catering</a></li>
           <li><a href="#">About Us</a></li>
        </ul>
     </nav>

     <nav class="vertical">
        <ul>
           <li><a href="#">Pizza</a></li>
           <li><a href="#">Salad</a></li>
           <li><a href="#">Pasta</a></li>
           <li><a href="#">Sandwiches</a></li>
           <li><a href="#">Appetizers</a></li>
           <li><a href="#">Pocket Pizzas</a></li>
           <li><a href="#">Fish &amp; Shrimp</a></li>
           <li><a href="#">Chicken &amp; Wings</a></li>
           <li><a href="#">Beverages</a></li>
           <li><a href="#">Dessert</a></li>
           <li><a href="#">Catering</a></li>
           <li><a href="#">Download Menu</a></li>
           <li><a href="#">Catering Menu</a></li>
        </ul>
     </nav> 
```

CSS：

```
 nav a {
        text-decoration: none;
    }

 nav.horizontal {

    height: 70px;
    width: 100%;
    background-color: white;

}
 nav.horizontal li {
    font-size: 16px;
    float: left;
    text-align: center;
    background-color: white;
    margin-left: 5px;
    margin-right: 5px;
    width: 180px;
    height: 50px;
    line-height: 50px;
    display: block;

}

nav.horizontal li a:link {
    display: block;
    background-color: red;
    color: white;

    -moz-border-radius: 30px 25px;
    -webkit-border-radius; 30px 25px;
    border-radius: 30px 25px;

    text-decoration: none;

}

nav.horizontal li a:hover {
    background-color: (255, 101, 101);
    color: black;

} 
```

当我将鼠标悬停在想法上时，我希望背景改变颜色。到目前为止，我只有文本将颜色更改为黑色，为什么不是背景？

谢谢。

另外，如果您发现任何其他错误，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T15:55:39.233

您在价值观之前缺少 rgb 。它应该是 ：

```
background-color: rgb(255, 101, 101); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:55:22.867

为列表项创建一个选择器，如下所示：

```
nav.horizontal li:hover {
     background-color: (255, 101, 101);
     color: black;
} 
```

如果要更改链接的背景，则需要更改链接所在列表项的背景颜色。不要尝试更改锚标记的背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T15:57:21.037

你可以使用以下

```
 li:hover 
```

作为 CSS 选择器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T15:57:54.603

您的背景色声明无效：

```
background-color: (255, 101, 101); 
```

应该：

```
background-color: rgb(255, 101, 101); 
```

# css - 图像翻转列表不起作用

> ID：15324160
> 
> 赞同：0
> 
> 时间：2013-03-10T15:51:15.363
> 
> 标签：css, list, social, rollover

我的社交图标有 3 个图像翻转。这是HTML：

```
<ul class="social">
    <li><a class="html5" href="#html5"></a></li>
    <li><a class="twitter" href="#twitter"></a></li>
    <li><a class="facebook" href="#facebook"></a></li>
</ul> 
```

CSS：

```
ul.social {
    list-style-type:none;
    margin:0;
    padding:0;
}

li.social {
    display:inline;
} 
```

翻转功能正常，只是内联导航（`ul="social"`）失败并且仅垂直显示。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:54:48.983

你正在使用`li.social`，但你需要`.social li`。您还需要更改`display: inline`为`display: inline-block`.

# php - 重写规则以从子目录中删除文件扩展名

> ID：15324163
> 
> 赞同：0
> 
> 时间：2013-03-10T15:51:23.753
> 
> 标签：php, .htaccess

我想删除子目录中的文件扩展名，即`abc.com/subdirectory/file.html`尝试使用重写规则的所有可能方式，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:01:12.143

我想你想要类似的东西

[http://www.abc.com/subdir/file](http://www.abc.com/subdir/file)对吗？

所以你可以用 .htaccess 来做

```
## Remove Extension ##
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.html -f  
RewriteRule ^(.*)$ $1.html 
```

我将它与 php 一起使用，然后我只需编写 www.abc.com/subdire/file

**记住**我不知道这个解决方案是否适合你的所有需求，你的问题真的很笼统。请提供一些信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T09:28:34.607

此代码将为您工作。

`'domain.com/index.html'`要显示为的URL`'domain.com/index'`

```
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.html -f 
RewriteRule ^(.*)$ $1.html 
```

# plugins - 在netbeans中手动复制插件

> ID：15324164
> 
> 赞同：2
> 
> 时间：2013-03-10T15:51:26.827
> 
> 标签：plugins, netbeans, netbeans-7

是否可以以某种方式手动将插件从一个版本复制到下一个版本？基本上我想将一个插件从 Netbeans 7.3 beta 2 复制到 Netbeans 7.3（最终版本）。

有问题的插件是JIRA。

如果有人对如何安装它有任何其他想法（例如，我可以手动下载以前版本的插件）

我尝试了几件事，但没有一个有效。

*   复制 netbeans 目录中 extra 下的文件夹
*   试图从[http://dlc.sun.com.edgesuite.net/netbeans/updates/7.3/uc/beta2/certified/modules/extra/](http://dlc.sun.com.edgesuite.net/netbeans/updates/7.3/uc/beta2/certified/modules/extra/)下载它，但它一直在请求我找不到的其他插件。它本身并没有解决依赖关系

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T16:00:09.670

NetBeans 的 Beta 版设置了“开发中的插件”更新中心，发布版本中省略了该更新中心（默认情况下仅提供已知可用的插件）。要在开发更新中心添加插件，请执行以下步骤：

1.  打开`Plugins`对话框，转到`Settings`选项卡。
2.  点击`Add`
3.  输入`Plugins in development`名称（或您选择的任何名称）
4.  输入[http://deadlock.netbeans.org/hudson/job/nbms-and-javadoc/lastStableBuild/artifact/nbbuild/nbms/updates.xml.gz](http://deadlock.netbeans.org/hudson/job/nbms-and-javadoc/lastStableBuild/artifact/nbbuild/nbms/updates.xml.gz)作为 URL
5.  点击确定
6.  安装你的 JIRA 插件

您可能要设置的另一个更新中心是与[社区插件门户](http://plugins.netbeans.org/)相关联的更新中心，它的 URL 是： http: [//plugins.netbeans.org/nbpluginportal/files/nbms/pluginportal-update-center.xml](http://plugins.netbeans.org/nbpluginportal/files/nbms/pluginportal-update-center.xml)

# git - 将 git 存储库连接到 redmine 子项目

> ID：15324165
> 
> 赞同：1
> 
> 时间：2013-03-10T15:51:27.667
> 
> 标签：git, redmine

我有 redmine 2.2.3 和一个 git 存储库`/var/www/`

当我用链接连接 redmine 中的整个 git 存储库时没有问题`/var/www/.git`。

问题是我想将 redmine 中的子项目链接到中的确切项目`/var/www`

例如，有一个项目`/var/www/project2`，我如何才能`/var/www/project2`在 redmine 中准确链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:49:13.303

不确定你能做到这一点。问题是 Git 将整个 repo 视为一个实体结构，并且不能使用 repo 的部分树（与 Subversion 不同）。所以 Redmine 只是使用 git 绑定来扫描 repo。可能的解决方案将是每个项目的存储库集合，或者您可以使用[Git 子模块](http://git-scm.com/book/en/Git-Tools-Submodules)。

# javascript - 来自表/输入数据的按组的 Jquery 总和

> ID：15324171
> 
> 赞同：0
> 
> 时间：2013-03-10T15:52:01.583
> 
> 标签：javascript, jquery, jquery-ui, jquery-events

我正在寻找按组对我的表数据和总和进行分组（如按产品的总和价格）。在第二个表中。

我想按项目列分组或过滤，并对价格列的结果求和。

所以橘子（有两条线）应该是一条带有总价的线。

请参阅下面的示例：

```
 <table width="400" border="1">
      <tr>
        <td>Item</td>
        <td>Location</td>
        <td>Quantity</td>
        <td>Price</td>
      </tr>
      <tr>
        <td><input name="item" type="text" id="item" value="Orange" /></td>
        <td><input name="location" type="text" id="location" value="Tree" /></td>
        <td><input name="quantity" type="text" id="quantity" value="3" /></td>
        <td><input name="price" type="text" id="price" value="3.00" /></td>
      </tr>
      <tr>
        <td><input name="item" type="text" id="item2" value="Apple" /></td>
        <td><input name="location" type="text" id="location" value="Tree" /></td>
        <td><input name="quantity" type="text" id="quantity" value="1" /></td>
        <td><input name="price" type="text" id="price" value="1.00" /></td>
      </tr>
      <tr>
        <td><input name="item" type="text" id="item" value="Orange" /></td>
        <td><input name="location" type="text" id="location" value="Tree" /></td>
        <td><input name="quantity" type="text" id="quantity" value="4" /></td>
        <td><input name="price" type="text" id="price" value="4.00" /></td>
      </tr>
      <tr>
        <td><input name="item" type="text" id="item" value="Grapes" /></td>
        <td><input name="location" type="text" id="location" value="Vine" /></td>
        <td><input name="quantity" type="text" id="quantity" value="10" /></td>
        <td><input name="price" type="text" id="price" value="10.00" /></td>
      </tr>
    </table>

    <p>&nbsp;</p>
    <table width="400" border="1">
      <tr>
        <td>Orange</td>
        <td>7</td>
        <td>7.00</td>
      </tr>
      <tr>
        <td>Apple</td>
        <td>1</td>
        <td>1.00</td>
      </tr>
      <tr>
        <td>Grapes</td>
        <td>10</td>
        <td>10.00</td>
      </tr>  
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:48:58.113

首先将 id "price" 更改为 class，然后

```
$(document).ready(function(){
   var sum = 0;
   $('.price').each(function(){
       sum += $(this).val();
   });
   alert("The sum is " + sum);
}); 
```

您也可以修改上面的代码以在按钮单击事件中获取总和。

# ios - 崩溃报告 - iOS - 查看控制器相关？

> ID：15324174
> 
> 赞同：3
> 
> 时间：2013-03-10T15:52:13.457
> 
> 标签：ios, objective-c, uiviewcontroller, crash-reports

谁能帮我理解崩溃报告？这是自 iOS App 开发 8 个月以来我第一次不得不处理一个问题。

我知道这与解除导致它的视图控制器有关，但我没有对代码进行任何更改，但突然之间它开始引起问题。任何关于从哪里开始的指导都会很棒。

```
Date/Time:       2013-03-10 14:56:06.091 +0000
OS Version:      iOS 6.1.2 (10B146)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x3afee5b6 objc_msgSend + 22
1   AVFoundation                    0x3247f752 -[AVAudioPlayer(AVAudioPlayerPriv) finishedPlaying:] + 74
2   Foundation                      0x33c700f0 __NSThreadPerformPerform + 456
3   CoreFoundation                  0x3332e680 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
4   CoreFoundation                  0x3332dee4 __CFRunLoopDoSources0 + 208
5   CoreFoundation                  0x3332ccb2 __CFRunLoopRun + 642
6   CoreFoundation                  0x3329feb8 CFRunLoopRunSpecific + 352
7   CoreFoundation                  0x3329fd44 CFRunLoopRunInMode + 100
8   GraphicsServices                0x36e612e6 GSEventRunModal + 70
9   UIKit                           0x351b52fc UIApplicationMain + 1116
10  iWhovian                        0x000391fe main (main.m:15)
11  iWhovian                        0x0002f56c start + 36

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x3b4e1648 kevent64 + 24
1   libdispatch.dylib               0x3b41a4ec _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x3b40cdf4 _dispatch_mgr_thread$VARIANT$up + 32

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x3b4e0eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3b4e1048 mach_msg + 36
2   CoreFoundation                  0x3332e040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x3332cd9e __CFRunLoopRun + 878
4   CoreFoundation                  0x3329feb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x3329fd44 CFRunLoopRunInMode + 100
6   WebCore                         0x39294500 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3b44a30e _pthread_start + 306
8   libsystem_c.dylib               0x3b44a1d4 thread_start + 4

Thread 3:
0   libsystem_kernel.dylib          0x3b4f108c __psynch_cvwait + 24
1   libsystem_c.dylib               0x3b442d2a _pthread_cond_wait + 642
2   libsystem_c.dylib               0x3b44cf14 pthread_cond_wait + 36
3   Foundation                      0x33bec4d2 -[NSCondition wait] + 190
4   iWhovian                        0x0006ef90 -[PFCommandCache runLoop] (PFCommandCache.m:491)
5   Foundation                      0x33c6fe80 __NSThread__main__ + 968
6   libsystem_c.dylib               0x3b44a30e _pthread_start + 306
7   libsystem_c.dylib               0x3b44a1d4 thread_start + 4

Thread 4 name:  AQClient
Thread 4:
0   libsystem_kernel.dylib          0x3b4e0eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3b4e1048 mach_msg + 36
2   CoreFoundation                  0x3332e040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x3332cd9e __CFRunLoopRun + 878
4   CoreFoundation                  0x3329feb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x3329fd44 CFRunLoopRunInMode + 100
6   AudioToolbox                    0x32d816fe GenericRunLoopThread::Entry(void*) + 134
7   AudioToolbox                    0x32d62882 CAPThread::Entry(CAPThread*) + 294
8   libsystem_c.dylib               0x3b44a30e _pthread_start + 306
9   libsystem_c.dylib               0x3b44a1d4 thread_start + 4

Thread 5:
0   libsystem_kernel.dylib          0x3b4f1d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3b43fcf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3b43fa12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3b43f8a0 start_wqthread + 4

Thread 6 name:  Dispatch queue: com.apple.NSXPCConnection.m-user.com.apple.gamed
Thread 6:
0   libobjc.A.dylib                 0x3afee5b0 objc_msgSend + 16
1   CoreFoundation                  0x332b0fdc -[__NSSetI member:] + 140
2   CoreFoundation                  0x332b0f44 -[NSSet containsObject:] + 28
3   Foundation                      0x33c08978 -[NSCoder _validateAllowedClass:forKey:allowingInvocations:] + 124
4   Foundation                      0x33c08402 _decodeObjectStuff + 282
5   Foundation                      0x33c08200 -[NSXPCDecoder decodeObjectOfClasses:forKey:] + 76
6   GameKit                         0x33e2f8fa -[GKInternalRepresentation initWithCoder:] + 238
7   Foundation                      0x33c086f2 _decodeObjectStuff + 1034
8   Foundation                      0x33d1fda8 -[NSXPCDecoder _decodeArrayOfObjectsForKey:] + 532
9   Foundation                      0x33bf4ebc -[NSArray(NSArray) initWithCoder:] + 784
10  Foundation                      0x33c086f2 _decodeObjectStuff + 1034
11  Foundation                      0x33c08200 -[NSXPCDecoder decodeObjectOfClasses:forKey:] + 76
12  GameKit                         0x33e2f8fa -[GKInternalRepresentation initWithCoder:] + 238
13  Foundation                      0x33c086f2 _decodeObjectStuff + 1034
14  Foundation                      0x33c08200 -[NSXPCDecoder decodeObjectOfClasses:forKey:] + 76
15  Foundation                      0x33c09fe8 _walkAndDecodeData + 1708
16  Foundation                      0x33c0988c decodeInvocationArguments + 1368
17  Foundation                      0x33c08fc8 -[NSXPCDecoder decodeInvocation] + 860
18  Foundation                      0x33c08630 _decodeObjectStuff + 840
19  Foundation                      0x33c08200 -[NSXPCDecoder decodeObjectOfClasses:forKey:] + 76
20  Foundation                      0x33c07c04 -[NSXPCConnection _decodeAndInvokeReplyBlockWithData:] + 548
21  Foundation                      0x33d1eedc __message_handler_block_invoke_0 + 32
22  libdispatch.dylib               0x3b40b11c _dispatch_call_block_and_release + 8
23  libdispatch.dylib               0x3b40a996 _dispatch_queue_drain$VARIANT$up + 142
24  libdispatch.dylib               0x3b40a890 _dispatch_queue_invoke$VARIANT$up + 32
25  libdispatch.dylib               0x3b419212 _dispatch_root_queue_drain + 190
26  libdispatch.dylib               0x3b4193b4 _dispatch_worker_thread2 + 80
27  libsystem_c.dylib               0x3b43fa0e _pthread_wqthread + 358
28  libsystem_c.dylib               0x3b43f8a0 start_wqthread + 4

Thread 7:
0   libsystem_kernel.dylib          0x3b4f1d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3b43fcf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3b43fa12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3b43f8a0 start_wqthread + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x208a4ef0    r1: 0x38e042ae      r2: 0x33f0ac6c      r3: 0x00000008
    r4: 0x20747372    r5: 0x2089ac70      r6: 0x33f0ac6c      r7: 0x2fdd2df8
    r8: 0x3b667530    r9: 0x0e3810ab     r10: 0x00000000     r11: 0x1fd4dd90
    ip: 0x3b5734ac    sp: 0x2fdd2de0      lr: 0x3247f757      pc: 0x3afee5b6
  cpsr: 0x20070030 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-10T17:37:17.217

不久前我遇到了这个。这个问题可以通过在视图控制器的方法中设置`AVAudioPlayer`实例`delegate`来解决。除非您这样做，否则音频播放器会尝试对其委托进行最后一次调用，以使其知道播放完毕。但是如果委托已被解除分配，你会得到这个崩溃。`nil``dealloc`

```
- (void)dealloc {
    _myPlayer.delegate = nil;  // _myPlayer is your AVAudioPlayer instance
    [super dealloc]; // Only is you are not using ARC
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:31:14.713

您很可能试图访问一个尚未被释放的对象。看一下

[使用 Instruments 调试 Xcode 中的 EXC_BAD_ACCESS 错误（存档）](http://web.archive.org/web/20140108172646/http://www.ioslearner.com/debugging-exc_bad_access-error-xcode-instruments/)

看看如何追踪它。

# java - 如何忽略java中的空格和空行

> ID：15324182
> 
> 赞同：0
> 
> 时间：2013-03-10T15:53:03.230
> 
> 标签：java, regex, java.util.scanner, readfile, bluej

而且因为我的数据在逗号之后或之前包含空格，所以我使用正则表达式来分解数据，所以我怎样才能忽略空格以及如何分解数据以便我可以将它们分配给字段//这个是注释，如果该行以 // // 和空行开头，则忽略它们

A，桑福德，曼彻斯特

B , 哈德斯菲尔德, 牛津

```
 Scanner scanner = new Scanner(dataFile).useDelimiter(("\\s*,\\s*"));

while(scanner.hasNext() &&(!(line = scanner.nextLine()).startsWith("\\")))
        {

            String lines= scanner.nextLine();

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T15:56:00.620

`Scanner s = new Scanner(dataFile).useDelimiter("\\s*,\\s*");`

此行将使用逗号以及逗号周围的空格作为分隔符。因此，如果您的数据如下所示：

> A，桑福德，曼彻斯特
> 
> B , 哈德斯菲尔德, 牛津

```
while (s.hasNext()) {
    System.out.println(s.next());
} 
```

那么上面应该输出：

```
A  
Sanford 
Manchester 
B    
Huddersfield     
Oxford 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:01:18.303

...

```
String lines= scanner.nextLine();
System.out.println(lines.trim()+"\n"); 
```

字符串行=scanner.nextLine(); System.out.println(lines+"\n");

# javascript - 更高效的 jQuery 版本包含

> ID：15324183
> 
> 赞同：0
> 
> 时间：2013-03-10T15:53:05.620
> 
> 标签：javascript, jquery, html

我有以下 JavaScript 和 jQuery，它们运行良好：

```
function updateTaskTypes(taskTypes) {

    $.each(taskTypes, function (idx, e) {

        var contains = $("#async_TaskTypes").find("a:contains('" + e + "')").length > 0;

        if (!contains) {

            var html = "<li><a href=\"#tab" + idx + "\">" + e + "</a></li>";

            $("#async_TaskTypes").append(html);
        }
    });
} 
```

上面的代码接受一个字符串数组。目的是添加一个`<li>`to，`#async_TaskTypes`如果它还没有包含一个。

HTML 的格式为：

```
<ul id="async_TaskTypes" class="tabs">
    <li><a href="#tab0">Preview Blog Comment</a></li>
    <li><a href="#tab1">Respond To Contact Us</a></li>
</ul> 
```

我的问题是 jQuery 似乎没有它应该有的效率。有没有办法让上面的代码更有效率？

通过“高效”，我的意思是我可以使用更直接的 jQuery 函数，或者更简洁的算法等......基本上更优雅的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:08:05.740

在 DOM 中搜索总是低效的。您应该有一个模型，您可以在其中存储哪些任务已经在显示的列表中，以便您可以使用数组方法简单地搜索它（如果已排序，甚至可能在 中`O(n)`）。这可以做到，例如：

```
function updateTaskTypes(taskTypes) {
    var $ul = $("#async_TaskTypes"),
        texts = $ul.find("a").map(function(){
            return $(this).text();
        }).get();
    $.each(taskTypes, function (idx, e) {
        if ($.inArray(texts, e) == -1)
            $ul.append("<li><a href=\"#tab" + idx + "\">" + e + "</a></li>");
    });
} 
```

或者您只需删除所有列表项并重新附加整个任务列表，这更简单，并且对于短列表可能更快：

```
function updateTaskTypes(taskTypes) {
    var $ul = $("#async_TaskTypes").empty();
    $.each(taskTypes, function (idx, e) {
        $ul.append("<li><a href=\"#tab" + idx + "\">" + e + "</a></li>");
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:08:01.197

或者您实际上可以只使用正则表达式：

```
var a = $("#async_TaskTypes").html();
if( /Whatever/g.test(a) ) {
  //this string is present in your html
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T16:20:59.170

更新Bergi的答案：

```
function updateTaskTypes(taskTypes) {
    var $ul = $("#async_TaskTypes").empty();
    $.each(taskTypes, function (idx, e) { 
        $ul.append(
            $("<li>").append(
                $("<href>", {id: "tab" + idx}).text(e)
            );
        );
    });
} 
```

也许更优雅一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T16:39:47.443

另一个想法：

```
var async_TaskTypes = $("#async_TaskTypes");
async_TaskTypes.append(
    $.map(taskTypes, function (idx, e) {
        if (!async_TaskTypes.has("a:contains('" + e + "')")) {
            return $("<li>").append(
                $("<href>", {id: "tab" + idx}).text(e)
            );
        }
    })
); 
```

# php - MAMP PRO PHP 邮件 - Gmail

> ID：15324185
> 
> 赞同：3
> 
> 时间：2013-03-10T15:53:17.363
> 
> 标签：php, email, mamp, postfix-mta

嗨，我正在尝试将本地主机上的邮件发送到我的 gmail 帐户。我尝试了 MAMP Pro 网站上的 postfix 教程，但这对我不起作用。

有什么方法可以在本地主机上从我的 gmail 帐户向我的 gmail 帐户发送邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T20:06:04.017

我认为您将希望直接使用 gmail 服务器进行身份验证和发送。出于与垃圾邮件预防相关的原因，我发现从本地计算机发送到我的 gmail 帐户和从我的 gmail 帐户发送的问题。

您可以查看[PEAR Mail 包](http://pear.php.net/package/Mail)。使用它相当简单（代码从另一个站点借来）：

```
<?php require_once "Mail.php";  
$from = "Sandra Sender <sender@example.com>"; 
$to = "Ramona Recipient <recipient@example.com>"; 
$subject = "Hi!"; 
$body = "Hi,\n\nHow are you?";  
$host = "ssl://mail.example.com"; 
$port = "465"; 
$username = "smtp_username"; 
$password = "smtp_password";  

$headers = array ('From' => $from,   
                  'To' => $to,   
                  'Subject' => $subject); 
$smtp = Mail::factory('smtp',   
                      array ('host' => $host,     
                             'port' => $port,     
                             'auth' => true,     
                             'username' => $username,     
                             'password' => $password));  

$mail = $smtp->send($to, $headers, $body);  

if (PEAR::isError($mail)) {   
    echo("<p>" . $mail->getMessage() . "</p>");  
} else {   
    echo("<p>Message successfully sent!</p>");  
} 
?> 
```

# javascript - jquery - .slideToggle() First Click 无法正常工作

> ID：15324186
> 
> 赞同：1
> 
> 时间：2013-03-10T15:53:21.680
> 
> 标签：javascript, jquery, html, slidetoggle

我有一个按钮，用于使用 jquery 的 slideToggle() 函数展开隐藏的 div（使用 display:none; 隐藏）。代码如下：

```
<button class="mobileonly singlebutton" style="color:#FFFFFF; font-size:20px;" title="Expand Menu" onclick="$('#menuslide').slideToggle('fast');">Quick Links Menu</button>
<br />
<div id="menuslide" class="infodiv mobileonly" style="display:none; list-style:none; font-size:24px;"> 
```

第一次单击不会将 div 滑出，而只是显示信息。不仅如此，还没有应用“infodiv”类样式。然后当我再次单击它时，它会滑出（即使它已经滑出，它的行为就像它在里面一样）并且应用了“infodiv”类样式。所以这只是第一次发生。为什么？

编辑：我刚刚意识到我正在运行 jQuery 1.7.2，所以我更新到 jQuery 1.9.1 并且行为有所改善。第一次单击仍然没有按预期执行，但第二次单击现在将其恢复（确认它已展开）。我正在 iPhone 上的移动 Safari 中对此进行测试。

EDIT2：以下是应用于 div 的 CSS

```
.infodiv
{
background-color:#FFFFFF;
border:1px solid #FFFFFF;
-webkit-border-radius:3px;
-moz-border-radius:3px;
-o-border-radius:3px;
border-radius:3px;
width:480px;

-webkit-box-shadow: 0px 0px 8px #888888;
-moz-box-shadow: 0px 0px 8px #888888;
box-shadow: 0px 0px 8px #888888;
color:#000000;
padding:3px;
}
.mobileonly
{
display:none;
visibility:hidden;
}
@media only screen /* only for mobile devices apply the following */
and (max-width : 550px)
{
.mobileonly
{
    display:inline;
    visibility:visible;
}

.infodiv
{
    width:400px;
    font-size:14pt;
}
} 
```

div 上的 id 仅用于 javascript，它没有任何样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:21:21.933

感谢分享css。这肯定是一个CSS问题。我看到你已经设置`display:inline;`了 class `.mobileonly`。将其更改为`display: block;`应该可以解决您的问题。

[小提琴](http://jsfiddle.net/k3YpW/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T15:59:39.030

没有关闭`</div>`标签。

```
<div id="menuslide" class="infodiv mobileonly" style="display:none; list-style:none; font-size:24px;">
</div> 
```

# objective-c - 为什么这个带有 NSJSONSerialization 的代码总是崩溃？

> ID：15324188
> 
> 赞同：1
> 
> 时间：2013-03-10T15:53:23.367
> 
> 标签：objective-c, nsjsonserialization

```
//
//  main.m
//  ASADeepDictionary
//
//  Created by AndrewShmig on 3/10/13.
//  Copyright (c) 2013 AndrewShmig. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "ASADeepDictionary.h"

int main(int argc, const char * argv[])
{
 @autoreleasepool {

NSDictionary *dic = @{@"key":@"value"};
NSMutableData *data = [[NSMutableData alloc] init];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];

[archiver encodeObject:dic];
[archiver finishEncoding];

id json = [NSJSONSerialization
           dataWithJSONObject:data
           options:0
           error:nil];

NSLog(@"%@", json);

 }

 return 0;
} 
```

我得到的错误是：

```
2013-03-10 19:48:13.420 ASADeepDictionary[9451:303] *** Terminating app due to uncaught    exception 'NSInvalidArgumentException', reason: '*** +[NSJSONSerialization dataWithJSONObject:options:error:]: Invalid top-level type in JSON write'
*** First throw call stack:
 (
    0   CoreFoundation                      0x00007fff89fb70a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff88fac3f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff89fb6e7c +[NSException raise:format:] + 204
    3   Foundation                          0x00007fff848bb49d +[NSJSONSerialization dataWithJSONObject:options:error:] + 249
    4   ASADeepDictionary                   0x0000000100001051 main + 321
    5   libdyld.dylib                       0x00007fff84bfd7e1 start + 0
    6   ???                                 0x0000000000000001 0x0 + 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T15:57:34.990

第一个参数必须是一个`NSDictionary`或一个`NSArray`，而不是一个`NSData`。您似乎误解了此方法的作用。它**序列化**传入的对象，它不*解析*它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:57:19.087

```
NSDictionary *dic = @{@"key":@"value"};

id json = [NSJSONSerialization
           dataWithJSONObject:dic
           options:0
           error:nil];

NSLog(@"%@", [NSString stringWithUTF8String:[json bytes]]); 
```

# knockout.js - TypeScript 和 Knockout 视图模型

> ID：15324189
> 
> 赞同：1
> 
> 时间：2013-03-10T15:53:26.640
> 
> 标签：knockout.js, typescript

因此，借助 TypeScript 提供的出色类型安全功能，我遇到了一种新问题。假设我想传递强类型视图模型。使用原始属性或 KO 包装属性键入这些更好吗？有没有办法制作一个支持两者的标准接口？如在

```
interface IPerson {
    FirstName: String;
}

class Person implements IPerson {
    FirstName: String;
}

class KOPerson implements IPerson {
    FirstName:  KnockoutObservableString;
} 
```

显然，上面不会编译。有什么方法可以实现某种多态性，其中未包装或 KO 包装的视图模型版本可以通过相同的共享接口传递？没有在任何地方恢复“任何”打字？我讨厌在我所有的视图模型类型中加入 Knockout-awareness。我希望这个问题是有道理的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:52:02.423

我看不出你为什么不想将 KO 意识融入到你的视图模型中？如果您决定从 Knockout 切换到另一个 MVX 框架，您可能需要重新考虑您的视图模型。

我要做的是为您将从后端返回的参数编写 TypeScript 接口。这样，您与后端的接口就被清晰地键入和定义了。如果你想切换到另一个框架，你可以重用这个类型。

# xml - 通过 Web 服务在 Dynamics CRM4 中创建事件

> ID：15324192
> 
> 赞同：0
> 
> 时间：2013-03-10T15:53:51.263
> 
> 标签：xml, dynamics-crm-4

几天来，我一直在把头撞在桌子上。我的创建帐户 xml 请求工作正常，但我的事件 xml 请求不起作用。

在下面，任何帮助将不胜感激。

```
 $accountsRequest = EntityUtils::getCreateCRMSoapHeader($CRMURL, $securityData).
    '
          <s:Body>
                <Create xmlns="http://schemas.microsoft.com/xrm/2011/Contracts/Services">
                <entity xmlns:b="http://schemas.microsoft.com/xrm/2011/Contracts" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
                    <b:Attributes xmlns:c="http://schemas.datacontract.org/2004/07/System.Collections.Generic">
                        <b:KeyValuePairOfstringanyType>
                            <c:key>ownerid</c:key>  
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $ownerid . '</c:value>
                            <c:key>customerid</c:key>  
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $customerid . '</c:value>
                            <c:key>subjectid</c:key>  
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $subjectid . '</c:value>
                            <c:key>title</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $title . '</c:value>
                            <c:key>new_surveyid</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_survey_id . '</c:value>
                            <c:key>new_leadsource</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_leadsource . '</c:value>
                            <c:key>new_forename</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_forename . '</c:value>
                            <c:key>new_surname</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_surname . '</c:value>
                            <c:key>new_company</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_company . '</c:value>
                            <c:key>new_email</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_email . '</c:value>
                            <c:key>new_phone</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_phone . '</c:value>
                            <c:key>new_datetravel</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_datetravel . '</c:value>
                            <c:key>new_drivername</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_drivername . '</c:value>
                            <c:key>new_punctuality_pickup</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_punctuality_pickup . '</c:value>
                            <c:key>new_punctuality_dropoff</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_punctuality_dropoff . '</c:value>
                            <c:key>new_interior</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_interior . '</c:value>
                            <c:key>new_exterior</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_exterior . '</c:value>
                            <c:key>new_courtesy</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_courtesy . '</c:value>
                            <c:key>new_appearance</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_appearance . '</c:value>
                            <c:key>new_comments</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_comments . '</c:value>
                            <c:key>new_survey_date</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_survey_date . '</c:value>
                            <c:key>new_survey_score</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $new_survey_score . '</c:value>
                        </b:KeyValuePairOfstringanyType>
                    </b:Attributes>
                    <b:EntityState i:nil="true"/>
                    <b:FormattedValues xmlns:c="http://schemas.datacontract.org/2004/07/System.Collections.Generic"/>
                    <b:Id>00000000-0000-0000-0000-000000000000</b:Id>
                    <b:LogicalName>incident</b:LogicalName>
                    <b:RelatedEntities xmlns:c="http://schemas.datacontract.org/2004/07/System.Collections.Generic"/>
                </entity>
                </Create>
            </s:Body>
        </s:Envelope>
        '; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:43:16.780

我回答了我自己的问题——XML 格式不正确——主要是命名空间的问题。再加上一些 CRM 事件字段的类型问题。如果没有上面的提示，就无法做到这一点，所以谢谢大家。下面的 XML 供将来遇到困难的任何人使用。

customerid 6caff60a-f77c-e211-b2fb-d48564518ccb 帐户

```
 <b:KeyValuePairOfstringanyType>                         
                            <c:key>title</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">Its a sunday web case - second</c:value>
                        </b:KeyValuePairOfstringanyType>
                    </b:Attributes>
                    <b:EntityState i:nil="true"/>
                    <b:FormattedValues xmlns:c="http://schemas.datacontract.org/2004/07/System.Collections.Generic"/>
                    <b:Id>00000000-0000-0000-0000-000000000000</b:Id>
                    <b:LogicalName>incident</b:LogicalName>
                    <b:RelatedEntities xmlns:c="http://schemas.datacontract.org/2004/07/System.Collections.Generic"/>
                </entity>
        </Create> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:12:09.840

显然我没有发现任何错误，活动[跟踪](http://support.microsoft.com/kb/907490)并查看正在启动的错误 crm 动态。可以是一个属性有一个拼写错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:06:23.153

这些是字符串吗？

```
<c:key>ownerid</c:key>  
<c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $ownerid . '</c:value>
<c:key>customerid</c:key>  
<c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">' . $customerid . '</c:value> 
```

如果我通过 CRM SDK 执行此操作，我将使用实体引用。

例如

```
Entity e = new Entity("incident");
e["customerid"] = new EntityReference("contact", contactId); //or "account", accountId
e["ownerid"] = new EntityReference("systemuser", userId);
service.Create(e); 
```

# java - 在 Java 小程序中设置路径

> ID：15324193
> 
> 赞同：0
> 
> 时间：2013-03-10T15:53:58.873
> 
> 标签：java, image, path, applet, awt

如何从小程序中的文件中绘制图像？

```
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.Image;

/*
    <applet code = "DisplayImageExample" width = 500 height = 300>
            <param name = "Image1" value = "one.jpg">
            <param name = "Image2" value = "two.jpg">
    </applet>
*/

public class NewApplet extends Applet
{
    Image img1, img2;

    public void init(){

            img1 = getImage(getDocumentBase(), getParameter("aw.jpg"));
            img2 = getImage(getDocumentBase(), getParameter("sd"));
    }

    public void paint(Graphics g){

            //display an image using drwaImage method of Graphics class.
            g.drawImage(img1, 1,5,this);
            g.drawImage(img2, 100,100,this);
    }

} 
```

我是否正确设置了图像路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:00:57.060

您需要使用 applet 参数中的参数键名称，而不是它们的实际值：

```
img1 = getImage(getDocumentBase(), getParameter("Image1"));
img2 = getImage(getDocumentBase(), getParameter("Image2")); 
```

# android - 如果已经从 Android 中的 FB SDK 获得访问令牌，如何在 WebView 中登录 facebook

> ID：15324195
> 
> 赞同：23
> 
> 时间：2013-03-10T15:54:01.773
> 
> 标签：android, facebook, login, webview, token

我正在开发我通过 Facebook SDK 登录的 android 应用程序。在应用程序中，我还在 webview 中显示了 facebook 社交评论。但问题是，即使用户通过 fb sdk 登录，webview 也不知道它，并且发布新评论需要用户登录。

我的问题是：有什么方法可以将登录从 facebook sdk 会话传递到 webview？例如，通过一些 javascript 函数，我向其提供访问令牌字符串并在 webview 上调用它，以便它登录并准备好发表评论？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:07:11.763

因此，根据我到目前为止的发现，没有办法将记录的会话传递给 WebView。

这是我对这个问题的解决方案：在您的远程服务器上，使用 Facebook JavaScript SDK 制作带有登录界面的网页，然后将其显示在 WebView 中。这样，您应用中的所有 WebView 都将共享相同的登录 cookie，一切都将按您的意愿工作。

或者你可以直接加载 m.facebook.com，但是这样登录后它会带你到用户的墙。上述解决方案让您在登录后仅以用户图片和信息的形式显示其他内容（当然还有注销按钮）。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T15:02:58.453

如果有些用户还想使用 facebook 登录页面，可以尝试使用 android Javascript 接口将 access_token 传递给 Android Facebook SDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T13:10:09.253

您可以尝试通过查询字符串将本地 sdk 中的 access_token 传递给 webview。

```
myWebView.loadUrl('http://mydomain.com/?access_token=' + facebookAccessToken); 
```

并在您的 web 视图中检查是否设置了 access_token 并将其与 javascript sdk 一起使用，希望它可以帮助遇到同样问题的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T09:37:31.697

Facebook Rest API 服务已被弃用。
您可以使用 Facebook SDK 从 facebook 登录和访问详细信息。检查脸书文档。

[https://developers.facebook.com/docs/android/login-with-facebook/v2.2](https://developers.facebook.com/docs/android/login-with-facebook/v2.2)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-28T05:38:29.330

您是否尝试过 developer.facebook.com/ 中的教程[，](http://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)这里他们清楚地给出了如何登录。登录后，用户的详细信息将被缓存，如果您需要发布任何数据，您可能需要获得许可，因此您将再次被引导至登录活动。它在这个[链接中给出](http://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/)

# postgresql - Heroku Postgres 配置数据中心位置

> ID：15324197
> 
> 赞同：0
> 
> 时间：2013-03-10T15:54:07.250
> 
> 标签：postgresql, heroku

我的理解是 Heroku Postgres 运行在 AWS 之上。是否可以配置您的数据库运行在哪个数据中心？我还想知道数据库文件是否存储在加密文件系统上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:09:08.967

是的，Heroku 在 AWS 上运行。但是您无法指定运行数据库的数据中心。对于加密，请查看[http://www.postgresql.org/docs/current/static/pgcrypto.html](http://www.postgresql.org/docs/current/static/pgcrypto.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:12:58.770

Heroku 用完了亚马逊美国东部 - 一旦您将 postgres 数据库添加到您的应用程序`heroku config`，将为您提供数据库连接 URL，您可以跟踪它以查看它在哪里

# codeigniter - Code Igniter 模型与模型之间的关系

> ID：15324205
> 
> 赞同：4
> 
> 时间：2013-03-10T15:54:48.293
> 
> 标签：codeigniter, models, table-relationships

在 CI 中，如何将模型相互关联？我现在有四个模型，Users、UsersDepartment、UsersToDepartment、UserStatus，我需要加入这四个模型才能获取所有数据。

我的控制器中有这段代码可以从用户表中选择所有用户数据：

```
function view($user_id){
                 $data['user'] = $this->User_model->get_by_id($user_id)->row();
} 
```

Users表中保存的user_status只有status_id，所以我需要连接到UserStatus表来获取users_status_id的等效名称。我需要知道用户所属的组列表。所以我需要根据Users.userid从UsersToDepartment表中获取。然后在 UsersDepartment 表中获取等效的组名。请参阅我的图表以进一步解释。 ![在此处输入图像描述](../Images/c45bd225454d8a0e1c74a935f54a9320.png)

我知道在原生 PHP 中，这可以通过使用 join 来完成。在 CI 中是如何做到的？

我知道yii，你可以这样做

```
$posts=Post::model()->with(
'author.profile',
'author.posts',
'categories')->findAll(); 
```

CI也有可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T15:59:44.807

例如你有`table_one`并且想要`table_two`使用他们的 id加入

```
$this->db->select('columns');
$this->db->from('table_one');
$this->db->join('table_two', 'table_two.id = table_one.id');

//then do the query 
```

您可以阅读下面的链接以获取更完整的教程：

[https://www.codeigniter.com/userguide2/database/active_record.html](https://www.codeigniter.com/userguide2/database/active_record.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-17T14:16:43.683

代码点火器不是 php 的 ORM 框架...

你不能把它当作 ORM 框架（Laravel 是 ORM 框架的好例子）。

但是您可以通过查询连接来模拟它。

这项工作只是为您提供其他模型数据，而不是为您提供那些模型对象...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T12:47:12.127

参考[Active Record](http://ellislab.com/codeigniter/user-guide/database/active_record.html)`$this->db->join();`中的标题：CodeIgniter

我知道codeigniter在这里不是很好。所以我总是更喜欢 Yii。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-11T06:24:37.310

尝试使用此连接表查询

```
Select a.*,b.*
from table_one a
inner join table_two b where b.id=a.id 
```

# java - ResultSet 仅将最后一行返回到 JTable

> ID：15324209
> 
> 赞同：-1
> 
> 时间：2013-03-10T15:54:50.667
> 
> 标签：java, swing, jdbc, jtable, resultset

我已经做了足够的搜索来解决我已经部分完成的问题，但是有一个错误一直困扰着我。我正在尝试根据条件从数据库中获取数据。我有一个带有外键列的表'user_branch' branchID 应该在另一个表“分支”中获取对应的分支名称，我应该将结果显示到 JTable 中。当我执行 System.out.println 时，我得到了所有结果，但是当我显示时它只返回最后一行在 JTable(branchJTable) 中。这是我正在使用的代码

```
 int row = user2BAssignedJTable.getSelectedRow();
    assignUserID.setText(user2BAssignedJTable.getModel().getValueAt(row, 0).toString());
    user2BAssignedField.setText(user2BAssignedJTable.getModel().getValueAt(row, 1).toString());

    try {

        String userBrQry = "SELECT branchID FROM user_branch WHERE userID IN(?) ";
        String brQ = "SELECT branchName FROM branches WHERE branchID IN(%s) ";

        pstmt = con.prepareStatement(userBrQry);
        pstmt.setString(1, assignUserID.getText());
        results = pstmt.executeQuery();

        results.last();
        int nRows = results.getRow();
        results.beforeFirst();

        while (results.next()) {
            String branchIDS = results.getString("branchID");

            StringBuilder builder = new StringBuilder();
            for (int i = 0; i < nRows; i++) {
                builder.append("?");
                if (i + 1 < nRows) {
                    builder.append(",");
                }
            }
            brQ = String.format(brQ, builder.toString());
            PreparedStatement ps = con.prepareStatement(brQ);
            for (int i = 0; i < nRows; i++) {
                ps.setString(i + 1, branchIDS);
            }
            ResultSet rs = ps.executeQuery();
            //branchJTable.setModel(DbUtils.resultSetToTableModel(rs));                

            javax.swing.table.DefaultTableModel model = new javax.swing.table.DefaultTableModel();
            model.setColumnIdentifiers(new String[]{"Branch Name"});
            branchJTable.setModel(model);

            while (rs.next()) {
                String branchname = rs.getString("branchName");
                model.addRow(new Object[]{branchname});                  

            }

        }

    } catch (Exception e) {
        JOptionPane.showMessageDialog(null, e);
    } 
```

忘记前 3 行，因为它是我用来获取用户 ID 的另一个 JTable 事件，以用作获取分配给他的特定用户分支的条件。分配给用户的分支是动态的，因此使用 StringBuilder。我应该将结果显示到另一个名为 branchJTable 的 JTable 中，它只显示最后一行。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T16:03:10.190

根据您的问题，我认为您应该声明 JTable

```
javax.swing.table.DefaultTableModel model = new javax.swing.table.DefaultTableModel();
model.setColumnIdentifiers(new String[]{"Branch Name"});
branchJTable.setModel(model); 
```

在你的第一个循环之前 -

即`while (results.next()) {`在您的代码之前。

否则在循环中，对于每个循环执行，

JTable 模型正在初始化，您将获得 Jtable 中最后插入的行。

# php - 联系表格 wordpress，在同一站点上显示感谢消息（禁用重定向）

> ID：15324224
> 
> 赞同：0
> 
> 时间：2013-03-10T15:56:10.323
> 
> 标签：php, wordpress

我已经为 wordpress 创建了一个联系表格。我工作的表格很好。我遇到的问题是，我的联系表格在一个隐藏的 div 中。单击邮件图标时会向上滑动。

所以当我发送联系表格时，它会将我重定向到感谢页面，我还没有弄清楚如何禁用此功能并在同一页面上显示感谢消息。

有任何想法吗 ？我一直在阅读其他问题，但似乎无法帮助我。一些代码。

```
 <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
     <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>

 <?php if($email){ ?>
     <p><strong>Message succesfully sent. I'll reply as soon as I can</strong></p>
     <?php } else { if($error) { ?>
     <p><strong>Your messange hasn't been sent</strong><p>
     <?php echo $error; ?>
     <?php } else { the_content(); } ?>

             <section class="loginform">
                <div class="contactform">
                <form action="<?php the_permalink(); ?>" id="contact_me" method="post">
                    <input type="hidden" name="sent" id="sent" value="1" />
                    <ul>
                        <li>
                            <input type="text" name="your_name" id="your_name" value="<?php echo $_POST[your_name];?>" placeholder="Name" required>
                        </li>
                        <li>
                            <input type="text" name="your_email" id="your_email" value="<?php echo $_POST[your_email];?>" placeholder="Email" required>
                        </li>
                        <li>
                            <input type="text" name="your_subject" id="your_subject" value="<?php echo $_POST[your_subject];?>" placeholder="Subject" required>
                        </li>
                        <li>
                            <textarea name="your_message" id="your_message"><?php echo stripslashes($_POST[your_message]); ?></textarea>
                        </li>
                        <li>
                            <input type="submit" name = "send" value = "Send email" />
                        </li>
                    </ul>
                </div>
                </form>
                </section>
     <?php } ?>

     <?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:40:23.580

你最好用ajax解决这个问题；你为此构建了一个插件吗？

你应该 ：）

在您的插件文件中，注册一个新的 ajax 挂钩：

```
// add ajax request
add_action( 'wp_ajax_send_form', 'sendForm' );
// add this so non-admins can use it
add_action( 'wp_ajax_nopriv_send_form', 'sendForm' ); 
```

二、构建函数sendForm()：

```
<?php
function sendForm() {

    //validation logic here, get data from $_POST

    // send mail logic here

    if($email){
        echo '<p><strong>Message succesfully sent. I will reply as soon as I can</strong></p>';
     } else { if($error) { 
         echo '<p><strong>Your messange has not been sent</strong><p>'.$error;
     } else { the_content();

    // adding die(); is necessary with wp ajax
    die();

} 
```

在您的前端文件中，删除所有表单内容或让您输入字段在单击时返回 false。我假设您在 no.Conflict() 模式下使用 jQuery。添加一个`<div id="answer"></div>`您希望显示响应的位置。

```
 <script>
        jQuery('#contact_me input').click( function() {

        // get form data here
        var message = jQuery('#your_message').val();
        // ...and so on

        jQuery.post(ajaxurl, {   
                    action:     "send_form",
                    message: message,
                    //...and so on

                }, function (response) {

                   jQuery('#answer').html(response);

                }); 
        });
</script> 
```

这将通过 ajax 调用 php 函数 sendForm()，执行它并在 ID 为 #response 的 div 中显示回显消息。是你需要的吗？

要求进一步解释。

问候西蒙

# jquery - 下拉菜单在触摸设备上保持打开状态

> ID：15324226
> 
> 赞同：1
> 
> 时间：2013-03-10T15:56:28.030
> 
> 标签：jquery, ipad, touch, jquery-hover

我有一个下拉菜单，除了在触摸设备上之外，它都很好用。在 ipad 上，当您触摸其中一个菜单项时，下拉菜单会正常显示，但即​​使您触摸屏幕上的其他位置，下拉菜单也会保留在那里。如果您触摸屏幕上的其他位置，如何使菜单消失？这是jsfiddle：

[http://jsfiddle.net/Jkfbm/](http://jsfiddle.net/Jkfbm/)

这是我的jQuery：

```
 $(document).ready(function(){
$('ul.nav_menu > li').hover(function() {
    $(this).children(".sub_menu")
        .stop(true, true)
        .animate({
            height:"toggle",
            opacity:"toggle"
        },600, 'easeInOutQuad')
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:06:13.113

像这样的东西。我认为这是您的切换，但我可能又错了，因为您说过它适用于其他设备和浏览器。

```
$('li','.nav_menu'.hover(function(){
    $(this).animate({height:'100%','opacity':'1'},600);//plus I've noticed a syntax error on this line.
//unexpected bracket after 'easeInOutQuad'
},function(){
    $(this).animate({height:'0%','opacity':'0'},600);//putting back the animation.
}); 
```

我可能是错的，但试试看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:12:58.027

我目前正在尝试这个...更好的建议有人吗？

```
$(document).ready(function () {
    $('ul.nav_menu > li').hover(

    function () {
        $(this).children(".sub_menu")
            .stop(true, true)
            .animate({
            height: "toggle",
            opacity: "toggle"
        }, 600, 'easeInOutQuad');
    });
    $('html').click(function() {
        $(".sub_menu").hide();
    });
}); 
```

# c# - 输出到数据绑定日期选择器 wpf 的 SelectedDate 属性

> ID：15324239
> 
> 赞同：0
> 
> 时间：2013-03-10T15:57:24.253
> 
> 标签：c#, wpf, visual-studio-2010, data-binding, datepicker

我让 datepicker 将其选定的日期属性绑定到数据集，如下面的 XAML 所示：

```
<DatePicker x:Name="date_picker" Margin="0,0,0.2,0" SelectedDate="{Binding Date, Mode=TwoWay, 
NotifyOnValidationError=true, ValidatesOnExceptions=true, StringFormat=dd-MM-yyyy}" ToolTip="Please
select a date" FirstDayOfWeek="Monday" SelectedDateFormat="Short" DisplayDateStart="2013-01-01" 
DisplayDateEnd="2020-01-01" /> 
```

但是当窗口加载时，我希望默认输出是今天的日期，而不是默认的“选择日期”，但是当我使用下面的代码时，我只得到默认的“选择日期”。我认为这可能是因为 SelectedDate 属性被使用了两次。我将如何解决这个问题？

```
date_picker.SelectedDate = DateTime.Today; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:18:27.033

不要在过程代码中操作 UI 元素。

如果 DatePicker 的`SelectedDate`属性绑定到某个对象的`Date`属性，为什么不直接在底层对象中设置数据呢？

```
public class SomeObject
{
    public DateTime Date {get;set;}

    public SomeObject()
    {
        Date = DateTime.Today;
    }

} 
```

在过程代码中设置 UI 元素的属性完全违背了 DataBinding 的目的。

您必须牢记这一点[`UI is Not Data`](https://stackoverflow.com/questions/14381402/wpf-programming-methodology/14382137#14382137)。

# python - Python替换函数[替换一次]

> ID：15324240
> 
> 赞同：22
> 
> 时间：2013-03-10T15:57:28.163
> 
> 标签：python, string, replace

我需要关于我用 Python 制作的程序的帮助。

假设我想将单词的每个实例替换`"steak"`为`"ghost"`（随它去......），但我也想同时替换单词的每个`"ghost"`实例`"steak"`。以下代码不起作用：

```
 s="The scary ghost ordered an expensive steak"
 print s
 s=s.replace("steak","ghost")
 s=s.replace("ghost","steak")
 print s 
```

它打印：`The scary steak ordered an expensive steak`

我想要得到的是`The scary steak ordered an expensive ghost`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-10T16:08:35.817

我可能会在这里使用正则表达式：

```
>>> import re
>>> s = "The scary ghost ordered an expensive steak"
>>> sub_dict = {'ghost':'steak','steak':'ghost'}
>>> regex = '|'.join(sub_dict)
>>> re.sub(regex, lambda m: sub_dict[m.group()], s)
'The scary steak ordered an expensive ghost' 
```

或者，作为您可以复制/粘贴的功能：

```
import re
def word_replace(replace_dict,s):
    regex = '|'.join(replace_dict)
    return re.sub(regex, lambda m: replace_dict[m.group()], s) 
```

基本上，我创建了一个我想用其他词 ( `sub_dict`) 替换的词的映射。我可以从该映射创建一个正则表达式。在这种情况下，正则表达式是`"steak|ghost"`（或`"ghost|steak"`-- 顺序无关紧要），而正则表达式引擎完成了查找非重叠序列并相应地替换它们的其余工作。

* * *

*一些可能有用的修改*

*   `regex = '|'.join(map(re.escape,replace_dict))`-- 允许正则表达式在其中具有特殊的正则表达式语法（如括号）。这会转义特殊字符以使正则表达式与文字文本匹配。
*   `regex = '|'.join(r'\b{0}\b'.format(x) for x in replace_dict)`-- 如果我们的一个词是另一个词的子字符串，请确保我们不匹配。换句话说，更改`he`为`she`但不更改`the`为`tshe`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-10T16:11:36.300

按其中一个目标拆分字符串，进行替换，然后将整个内容重新组合在一起。

```
pieces = s.split('steak')
s = 'ghost'.join(piece.replace('ghost', 'steak') for piece in pieces) 
```

这*完全*一样`.replace()`，包括忽略单词边界。所以会`"steak ghosts"`变成`"ghost steaks"`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-10T15:59:40.587

将其中一个单词重命名为文本中未出现的临时值。请注意，对于非常大的文本，这不是最有效的方法。为此， a`re.sub`可能更合适。

```
 s="The scary ghost ordered an expensive steak"
 print s
 s=s.replace("steak","temp")
 s=s.replace("ghost","steak")
 S=s.replace("temp","steak")
 print s 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-10T16:01:47.047

在方法中使用 count 变量`string.replace()`。因此，使用您的代码，您将拥有：

```
s="The scary ghost ordered an expensive steak"
print s
s=s.replace("steak","ghost", 1)
s=s.replace("ghost","steak", 1)
print s 
```

[http://docs.python.org/2/library/stdtypes.html](http://docs.python.org/2/library/stdtypes.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T17:07:26.820

**注意**考虑到这个问题的收视率，我为不同类型的测试用例取消删除并重写了它

我从答案中考虑了四种相互竞争的实现

```
>>> def sub_noregex(hay):
    """
    The Join and replace routine which outpeforms the regex implementation. This
    version uses generator expression
    """
    return 'steak'.join(e.replace('steak','ghost') for e in hay.split('ghost'))

>>> def sub_regex(hay):
    """
    This is a straight forward regex implementation as suggested by @mgilson
    Note, so that the overheads doesn't add to the cummulative sum, I have placed
    the regex creation routine outside the function
    """
    return re.sub(regex,lambda m:sub_dict[m.group()],hay)

>>> def sub_temp(hay, _uuid = str(uuid4())):
    """
    Similar to Mark Tolonen's implementation but rather used uuid for the temporary string
    value to reduce collission
    """
    hay = hay.replace("steak",_uuid).replace("ghost","steak").replace(_uuid,"steak")
    return hay

>>> def sub_noregex_LC(hay):
    """
    The Join and replace routine which outpeforms the regex implementation. This
    version uses List Comprehension
    """
    return 'steak'.join([e.replace('steak','ghost') for e in hay.split('ghost')]) 
```

广义的 timeit 函数

```
>>> def compare(n, hay):
    foo = {"sub_regex": "re",
           "sub_noregex":"",
           "sub_noregex_LC":"",
           "sub_temp":"",
           }
    stmt = "{}(hay)"
    setup = "from __main__ import hay,"
    for k, v in foo.items():
        t = Timer(stmt = stmt.format(k), setup = setup+ ','.join([k, v] if v else [k]))
        yield t.timeit(n) 
```

和通用测试程序

```
>>> def test(*args, **kwargs):
    n = kwargs['repeat']
    print "{:50}{:^15}{:^15}{:^15}{:^15}".format("Test Case", "sub_temp",
                             "sub_noregex ", "sub_regex",
                             "sub_noregex_LC ")
    for hay in args:
        hay, hay_str = hay
        print "{:50}{:15.10}{:15.10}{:15.10}{:15.10}".format(hay_str, *compare(n, hay)) 
```

测试结果如下

```
>>> test((' '.join(['steak', 'ghost']*1000), "Multiple repeatation of search key"),
         ('garbage '*998 + 'steak ghost', "Single repeatation of search key at the end"),
         ('steak ' + 'garbage '*998 + 'ghost', "Single repeatation of at either end"),
         ("The scary ghost ordered an expensive steak", "Single repeatation for smaller string"),
         repeat = 100000)
Test Case                                            sub_temp     sub_noregex      sub_regex   sub_noregex_LC 
Multiple repeatation of search key                   0.2022748797   0.3517142003   0.4518992298   0.1812594258
Single repeatation of search key at the end          0.2026047957   0.3508259952   0.4399926194   0.1915298898
Single repeatation of at either end                  0.1877455356   0.3561734007   0.4228843986   0.2164233388
Single repeatation for smaller string                0.2061019057   0.3145984487   0.4252060592   0.1989413449
>>> 
```

根据测试结果

1.  Non Regex LC 和 temp 变量替换具有更好的性能，但 temp 变量的使用性能并不一致

2.  LC 版本比发电机有更好的性能（已确认）

3.  正则表达式的速度要慢两倍以上（因此，如果这段代码是瓶颈，则可以重新考虑实现更改）

4.  正则表达式和非正则表达式版本同样健壮并且可以扩展

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-10T16:07:02.337

这样的事情怎么样？将原件存储在拆分列表中，然后有一个翻译字典。保持核心代码简短，然后在需要调整翻译时调整字典。另外，易于移植到功能：

```
 def translate_line(s, translation_dict):
    line = []
    for i in s.split():
       # To take account for punctuation, strip all non-alnum from the
       # word before looking up the translation.
       i = ''.join(ch for ch in i if ch.isalnum()]
       line.append(translation_dict.get(i, i))
    return ' '.join(line)

 >>> translate_line("The scary ghost ordered an expensive steak", {'steak': 'ghost', 'ghost': 'steak'})
 'The scary steak ordered an expensive ghost' 
```

# android - 连字符号不适用于 Android 2.3

> ID：15324247
> 
> 赞同：1
> 
> 时间：2013-03-10T15:57:40.070
> 
> 标签：android, css, cordova, ligature

我一直在使用[http://kudakurage.com/ligature_symbols/](http://kudakurage.com/ligature_symbols/)和 phonegap。这些符号在 iphone 上看起来很好，但在 Android 2.3 上，符号没有出现。即心形符号在Android 2.3 上显示为“心”字。有谁知道有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-16T16:38:36.587

只需在您的 CSS 中包含这一行（在您定义字体位置的类中）：

```
-ms-font-feature-settings:"liga" 1; 
```

# javascript - 使用javascript从gridview中删除选定/所有行

> ID：15324248
> 
> 赞同：-1
> 
> 时间：2013-03-10T15:57:41.447
> 
> 标签：javascript, asp.net

正如标题所说，我有一个简单的 5column/5rows GridView，它代表 asp.net 中的购物车。我需要使用 javascript 来删除选定的行和按钮单击时的所有行。那怎么可能呢？当一个项目被移除时，总价格也应该改变。提前谢谢。

这是示例 aspx 代码：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Kosarica.aspx.cs" Inherits="Spletna_kosarica_2.Kosarica" EnableSessionState="True" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <h2>Kosarica:</h2>
        <p>
            <asp:GridView ID="GridView1" runat="server" Width="440px" 
                AutoGenerateSelectButton="True">
            </asp:GridView>
        </p></div>
    &nbsp;<asp:Button ID="Button2" runat="server" onclick="Button2_Click" 
        Text="Dodaj artikel" Width="143px" />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <asp:Button ID="Button3" runat="server" Text="Remove" />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <asp:Label ID="Label1" runat="server" Text="Total price:"></asp:Label>
&nbsp;<asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:00:33.197

您需要使用 Web 服务与服务器 + ajax 进行通信。Javascript 不能单独做到这一点，因为它在客户端浏览器中运行。

有许多指南、文档、教程等可以更深入地解释这个问题。有多种方法可以做到这一点，您只需选择最适合您的情况和技能的方法。

这是关于asp.net [http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-and-call-a-simple-中的Web服务的视频教程web-service-in-aspnet](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-and-call-a-simple-web-service-in-aspnet)

# neo4j - neo4j：发现数据结构

> ID：15324257
> 
> 赞同：3
> 
> 时间：2013-03-10T15:58:31.880
> 
> 标签：neo4j

我开始使用密码查询。在能够查询之前，我需要了解数据结构

使用新数据库时，如何发现其模型节点具有哪些属性以及它们的属性是什么关系及其属性是什么索引，索引了哪些属性

这可以通过密码查询来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:22:17.013

我通常会做一些查询，例如：

```
start n=node(*)
match n-[r?]-m
return *
skip 0
limit 100; 
```

[http://console.neo4j.org/r/rynad7](http://console.neo4j.org/r/rynad7)

如果您有大量数据，则可以增加跳过值以查看更多数据。

# objective-c - NSArray 循环问题

> ID：15324271
> 
> 赞同：2
> 
> 时间：2013-03-10T15:59:43.070
> 
> 标签：objective-c, c, for-loop, nsarray

我在 for 循环中遇到问题我将 NSArray 放入 tableview 并且我希望最后一个对象位于第一个单元格中，但它仅适用于第一个对象。

这有效：

```
for(int i = 0; i < messages.count ; i++)
    {
    } 
```

但这不是：

```
 for(int i = messages.count; i > 0; i--)
    {
    } 
```

错误信息是：

```
Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 203 beyond bounds [0 .. 202]'
*** First throw call stack:
(0x32bd33e7 0x3a8c4963 0x32b1eef9 0x891d3 0x34a01579 0x34a561f7 0x34a5613d 0x34a56021 0x34a55f4d 0x34a55699 0x34a55581 0x34a26561 0x349e58c7 0x34791513 0x347910b5 0x34791fd9 0x347919c3 0x347917d5 0x349eb93f 0x32ba8941 0x32ba6c39 0x32ba6f93 0x32b1a23d 0x32b1a0c9 0x366f833b 0x34a362b9 0x8549d 0x3acf1b20)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T16:02:06.980

您需要在消息计数 -1 处开始循环，如下所示：

```
for (int i = messages.count - 1; i >= 0; i--) 
{
   ...
} 
```

由于`messages.count`将给出消息对象中包含的元素总数。数组中最大的元素索引将是`messages.count - 1`因为数组索引从 0 开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:04:50.043

`for(int i = 0; i < messages.count ; i++)``0`从到循环`messages.count-1`（它在 时停止`i == messages.count`）。

`for(int i = messages.count; i > 0; i--)``messages.count`从down循环到`1`，一组完全不同的索引。

写

```
for(int i=messages.count-1; i>=0; i--) 
```

相反，或者[使用这个](https://stackoverflow.com/q/1642028/1204143)：

```
int i = messages.count;
while(i --> 0) {
    ...
} 
```

或者只是使用`reverseObjectEnumerator`：

```
for(id element in [messages reverseObjectEnumerator]) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T16:04:28.610

半开区间。处没有**对象**`[array objectAtIndex:array.count]`。例如，如果您的数组包含 5 个对象，则在索引 0、1、2、3 和 4 处有对象。

此外，在第二种情况下，计数器需要直到`0`，否则您不会考虑第一个对象（索引为 0 的对象）（再次：半开区间的闭合部分为 0，打开一个是在`array.count`)。

总而言之：将第二个循环更改为

```
for (int i = messages.count - 1; i >= 0; i--) 
```

它会正常工作。

# validation - Knockout.Validation 不可用，还有其他选择吗？或解决方法？

> ID：15324275
> 
> 赞同：2
> 
> 时间：2013-03-10T15:59:50.093
> 
> 标签：validation, knockout.js, knockout-validation

我正在寻找一个淘汰赛验证插件，我偶然发现了knockout.validation，它看起来很有希望，但是，它有一个致命的缺陷..

一旦你创建了一个 ko.validatedObservable({ name: foo }) 你就不能给这个 observable 分配一个新对象。

例如：在我的视图模型中，我实例化了一个经过验证的 observable。

```
var item = new ko.validatedObservable(new Tag({})); 
```

然后我可以打电话：

```
item().isValid(); //Returns false in this case because Tag is empty 
```

标签看起来像这样

```
Model.Tag = function (data) {
    var
        Id = ko.observable(data.Id),
        Name = ko.observable(data.Name).extend({ required: true, maxLength: 64 }),
        Description = ko.observable(data.Description).extend({ required: true, maxLength: 512 });

    return {
        Id: Id,
        Name: Name,
        Description: Description
    };
}; 
```

问题是如果我想从服务器获取一个新标签然后修改那个标签..

```
 $.ajax({
            url: API + "/" + id,
            type: 'GET',
            dataType: 'json',
            timeout: Timeout,
            statusCode: {
                200: function(response) { item(response); },  //Here is where the bug is!
                404: ItemNotFound
            },
            error: function () {
                Item(new Type({}));
            }
        }); 
```

item 现在包含来自服务器的值，但是，当我运行时

```
item().isValid();  //False is returned 
```

[这在 GitHub 项目https://github.com/ericmbarnard/Knockout-Validation/issues?state=open](https://github.com/ericmbarnard/Knockout-Validation/issues?state=open)上列为错误 #209 。

有谁知道优雅的工作？或者另一个可以实现这个目标的插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:50:51.083

我不知道它有多优雅，也许这不是最好的解决方案（或根本不是解决方案），所以使用它需要您自担风险。

`ko.validatedObservable`但是您可以使用“固定”版本覆盖：

```
ko.validatedObservable = function (initialValue) {
    if (!ko.validation.utils.isObject(initialValue)) {
            return ko.observable(initialValue).extend({ validatable: true });
    }

    var obsv = ko.observable(initialValue);
    obsv.lastErrors = ko.observable(ko.validation.group(initialValue));    
    obsv.subscribe(function(newValue){             
        obsv.lastErrors(ko.validation.group(newValue));
    });
    obsv.errors = function() {        
        return obsv.lastErrors()();
    };
    obsv.isValid = ko.computed(function () {
       return obsv.errors().length === 0;
    });   

    return obsv;
}; 
```

我的修复程序存储了`ko.validation.group`调用的结果，并在底层`obsv`observable 更改时重新计算它，并且我还更改了[原始错误属性](https://github.com/ericmbarnard/Knockout-Validation/blob/master/Dist/knockout.validation.js#L1036)以使用该`lastErrors`属性。

我已经更新了您在此演示[JSFiddle中检查的](http://jsfiddle.net/VtJ5V/)[github 问题](https://github.com/ericmbarnard/Knockout-Validation/issues/209)中的示例。

# c# - 使用 linq 填充字典

> ID：15324282
> 
> 赞同：40
> 
> 时间：2013-03-10T16:00:34.620
> 
> 标签：c#, linq, list, dictionary

我有以下空字典

```
Dictionary<Guid, string> appTypeMap = new Dictionary<Guid, string>(); 
```

和以下列表：

```
List<ApplicationType> allApplicationTypes = _applicationTypeService.GetAll() 
```

应用类型描述如下：

```
public class ApplicationType
{
   public Guid id {get; set;}
   public String name {get; set;}
} 
```

我想使用 LINQ 填充字典。
我怎么做？谢谢。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-03-10T16:05:17.803

```
appTypeMap = allApplicationTypes.ToDictionary(x => x.id, x => x.name); 
```

但是，它将创建一个新字典，而不是填充您的字典。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T16:03:05.523

尝试

```
appTypeMap = _applicationTypeService.GetAll().Select(o => new DictionaryEntry{
  Key = o.id,
  Value = o.name
}).ToList(); 
```

不确定最后是否需要 .ToList() ....

# android - 如何知道android中WiFi DIRECT的接口名称？

> ID：15324284
> 
> 赞同：2
> 
> 时间：2013-03-10T16:00:54.770
> 
> 标签：android, linux, networking, wifi, wifi-direct

我需要知道 android 平台上 WiFi 直接无线接口的名称是什么。

这似乎`wlan0`是最常用的接口，但我到底是怎么知道的呢？

我在上面看到了这个答案，`stackoverflow`但这是否适用于 WiFi：

```
for(Enumeration<NetworkInterface> list = NetworkInterface.getNetworkInterfaces(); list.hasMoreElements();)
{
    NetworkInterface i = list.nextElement();
    Log.e("network_interfaces", "display name " + i.getDisplayName());
} 
```

# excel - “运行时错误 3464” - 标准表达式中的数据类型不匹配

> ID：15324287
> 
> 赞同：0
> 
> 时间：2013-03-10T16:01:11.267
> 
> 标签：excel, vba

[下面我在vba中设置参数发送到访问查询。该查询采用开始日期、结束日期、原因代码和子组。所有标准都是字符串，除了子组是一个整数。

```
Sub FinalDrill()

'Step 1: Declare your variables
Dim DatabasePath As String
DatabasePath = ThisWorkbook.Path & "\SpreadSheetData.accdb"
Dim MyDatabase As DAO.Database
Dim MyQueryDef As DAO.QueryDef
Dim MyRecordset As DAO.Recordset
Dim i As Integer

'Step 2: Identify the database and query
Set MyDatabase = DBEngine.OpenDatabase _
(DatabasePath)
Set MyQueryDef = MyDatabase.QueryDefs("FinalDrill")

'Step 3: Define the Parameters

With MyQueryDef
    .Parameters("[Start Date]") = GetStartDate()
    .Parameters("[End Date]") = GetEndDate()
    .Parameters("[Reason Code]") = "C"
    .Parameters("[Sub Group]") = 2
End With

'Step 4: Open the query
Set MyRecordset = MyQueryDef.OpenRecordset 
```

最后一行抛出“运行时错误 3464” - 条件表达式中的数据类型不匹配

我不明白，因为我已经从不同的潜艇上运行了这种确切类型的查询，只有开始日期和结束日期，它很有效....即使我注释掉了

```
'.Parameters("[Reason Code]") = "C"
'.Parameters("[Sub Group]") = 2 
```

并将访问查询更改为仅除开始日期和结束日期之外我得到相同的错误。

也许我累了，错过了一些明显的东西，任何帮助都会很棒。

**更新**

下面的查询有效，所以我猜问题出在我的访问查询中。

```
'Step 1: Declare your variables
Dim DatabasePath As String
DatabasePath = ThisWorkbook.Path & "\SpreadSheetData.accdb"
Dim MyDatabase As DAO.Database
Dim MyQueryDef As DAO.QueryDef
Dim MyRecordset As DAO.Recordset
Dim i As Integer

'Step 2: Identify the database and query
Set MyDatabase = DBEngine.OpenDatabase _
(DatabasePath)
Set MyQueryDef = MyDatabase.QueryDefs("levelOnePie")

'Step 3: Define the Parameters

With MyQueryDef
    .Parameters("[Start Date]") = GetStartDate()
    .Parameters("[End Date]") = GetEndDate()
End With

'Step 4: Open the query
Set MyRecordset = MyQueryDef.OpenRecordset 
```

一旦我找到它们，将更新更多结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T01:03:49.143

好的，即使函数 GetStartDate() 和 GetEndDate() 适用于其他 subs() 中的先前查询，我还是考虑了 Wawrzyniec 所说的并将日期参数更改为保存它们的单元格。

```
With MyQueryDef
    .Parameters("[Start Date]") = Sheets("DASHBOARD").[C4]
    .Parameters("[End Date]") = Sheets("DASHBOARD").[C5]
    .Parameters("[Reason Code]") = "C"
    .Parameters("[Sub Group]") = 2
End With 
```

我有这些函数来获取日期的原因是仪表板中的一个功能是，如果 StartDate 单元格为空，它将使用数据开始的日期，并且没有结束日期意味着它将使用今天的日期。

由于在此之前执行了另外两个向下钻取，我只需将日期放在单元格中，以便在最后的向下钻取中抓住它们。

# windows - 更改计算机分辨率的批处理命令

> ID：15324290
> 
> 赞同：3
> 
> 时间：2013-03-10T16:01:19.693
> 
> 标签：windows, batch-file, command-line, screen-resolution

我想在批处理文件中编写一个命令来更改计算机的分辨率。我正在使用 Windows XP。

我需要将分辨率设置为 1024*768。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-01T10:13:17.767

我需要更多选项，因此我开发了[ChangeScreenResolution.exe](http://tools.taubenkorb.at/change-screen-resolution/)来更改批处理文件中的屏幕分辨率。

例子：

将所有显示器的屏幕分辨率更改为 800x600px

```
ChangeScreenResolution.exe /w=800 /h=600 
```

将所有显示器的屏幕分辨率更改为 800x600 像素，刷新率为 60Hz，色深为 32 位

```
ChangeScreenResolution.exe /w=800 /h=600 /f=60 /b=32 
```

将索引为 1 的显示分辨率设置为 800x600px

```
ChangeScreenResolution.exe /w=800 /h=600 /d=1 
```

列出所有可用的显示器（及其索引）：

```
ChangeScreenResolution.exe /l 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T16:11:24.990

您可以使用以下两种工具中的任何一种。

1.  [多分辨率](http://www.entechtaiwan.com/util/multires.shtm)
2.  [QRes](http://www.softpedia.com/get/Multimedia/Video/Other-VIDEO-Tools/QRes.shtml)

**使用 MiltiRes：**

```
multires.exe /800,600,32,75 
```

**使用 QRes：**

```
QRes.exe /x:800 /y:600 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-08T02:42:00.320

我没有尝试过 MultiRes，但请注意 Qres 只能在 32 位机器上运行。

[来自 12noon.com 的 DisplayChanger II](http://12noon.com/?page_id=641)也可以很好地工作并且免费供个人使用。

[DisplayChanger](http://12noon.com/?page_id=641)设计为通过命令行或批处理脚本调用，具有 32 位和 64 位版本。它还可以生成专门用于多显示器（或投影仪）设置的可编辑配置文件。您可以手动设置显示的方式，为其“创建”配置，然后随时调用该配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-28T06:16:42.880

你也可以 [像这里一样使用 wmic desktopmonitor](https://blogs.technet.microsoft.com/heyscriptingguy/2005/07/21/how-can-i-determine-the-current-screen-resolution-being-used-on-a-computer/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-14T00:08:53.947

我编写了一个脚本，该脚本使用[Alexander Taubenkorb](https://stackoverflow.com/users/936284/alexander-taubenkorb)在[他的回答](https://stackoverflow.com/a/35720103/3982001)中提供的程序来修复由于“屏幕分辨率超出显示器范围”导致的显示器黑屏问题，这是由于星际争霸在退出时没有将我的桌面分辨率恢复到其原始设置。

这是 .bat 内容 - 随意使用。

```
taskkill /f /IM explorer.exe

%~dp0%\Starcraft.exe

start explorer.exe

REM *change below /w=XXX & /h=XXX values that reflect your monitor's needs* 

ChangeScreenResolution.exe /w=800 /h=600 

REM *this is the minimum resolution of monitor - brings desktop back to life*

ChangeScreenResolution.exe /w=1024 /h=768

REM *this is the recommended & preferred resolution I like to run my monitor at*

exit 
```

# installation - OpenStack_Swift_Installtion

> ID：15324292
> 
> 赞同：0
> 
> 时间：2013-03-10T16:01:28.413
> 
> 标签：installation, openstack, openstack-swift

任何人都可以上传最新的 swift 安装文档，因为所有单个文档都已过时。我一直在尝试部署 openstack swift 但无法让 swift 工作，因为说明不清楚所以任何人都可以指导我到 swift 最新的文档

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T13:31:27.287

@emporio

我的建议是继续尝试[SAIO Swift 部署指南](http://docs.openstack.org/developer/swift/development_saio.html)，它已更新。

希望能帮助到你。

# c# - 圆形碰撞以防止它们相互穿过

> ID：15324298
> 
> 赞同：1
> 
> 时间：2013-03-10T16:02:08.680
> 
> 标签：c#, collision, geometry

只是做了一个小理论来简化我的问题。我想知道这样做是否可行或更简单的方法。

我正在用 C# 进行游戏模拟，机器人与 AI 一起踢足球。但是需要防止他们互相走入，找到确切的撞击点来更新他们的位置，这样他们就不会互相走入。

谢谢。

**这不是重复的，因为我问的是我正在研究的另一个理论。**

![圆碰撞理论](../Images/f95bcc866d7e41c11c41772b6f4fc719.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:14:34.013

好吧，从我[已经](https://stackoverflow.com/a/15305369/1269654)从您[之前的问题](https://stackoverflow.com/questions/15304858/point-of-impact-circle-collision)中提供的答案中，您有什么不明白或需要帮助的吗？它几乎完全符合您在这里的要求（所以“是的，您可以像这样使用极坐标。”）

但是，您对“他们没有碰撞的最后一个已知位置”的评论意味着您必须跟踪他们的位置并保持他们最后的良好状态并恢复到它。不确定在这种情况下是否有*必要*，或者您是否只想计算一个新的“最合适”的位置。

* * *

好吧，你已经标记了一个答案，但我去整理了一段功能齐全的代码，所以也许你仍然可以使用它。:) 根据我的评论：

> 由于它们只是圆圈，因此只需计算圆圈中心点之间的中点即可。如果圆具有不同的半径，则选择一个圆并计算沿线距其中心一半径的点。

这可能是一个简单的实现。我为它创建了一些*非常微薄的*辅助类；我完全鼓励扩展它们，使结构真正不可变，以及所有那些好的爵士乐，但现在可以用于演示目的。

所以对于助手类：

```
public struct Point
{
    public double X;
    public double Y;

    public double Distance(Point otherPoint)
    {
        double deltaX = this.X - otherPoint.X;
        double deltaY = this.Y - otherPoint.Y;
        return System.Math.Sqrt(deltaX * deltaX + deltaY * deltaY);
    }

    public override string ToString()
    {
        return String.Format("({0}, {1})", X, Y);
    }
}

public struct Polar
{
    public double Radius;
    public double Angle;

    public double X { get { return Radius * System.Math.Cos(Angle); } }
    public double Y { get { return Radius * System.Math.Sin(Angle); } }

    public Point ToCartesian()
    {
        return new Point() { X = X, Y = Y };
    }
}

public class Circle
{
    public double Radius { get; set; }
    public Point Position { get; set; }
} 
```

我们的肉和土豆类/方法是这样的：

```
public class CollisionResult
{
    public Circle Circle1 { get; private set; }
    public Circle Circle2 { get; private set; }

    public Point Circle1SafeLocation { get; private set; }
    public Point Circle2SafeLocation { get; private set; }

    public Point CollisionLocation { get; private set; }

    public CollisionResult(Circle circle1, Circle circle2)
    {
        this.Circle1 = circle1;
        this.Circle2 = circle2;
    }

    public bool CalculateCollision()
    {
        double distanceFromCentres = Circle1.Position.Distance(Circle2.Position);
        if (distanceFromCentres >= Circle1.Radius + Circle2.Radius)
            return false;

        double angleBetweenCircles = System.Math.Atan2(Circle2.Position.Y - Circle1.Position.Y, Circle2.Position.X - Circle1.Position.X);

        Point midpointBetweenCircles = new Point(){X = (Circle1.Position.X + Circle2.Position.X)/2, Y = (Circle1.Position.Y + Circle2.Position.Y)/2};

        Point circle1Offset = (new Polar() { Radius = Circle1.Radius, Angle = System.Math.PI + angleBetweenCircles }).ToCartesian();
        Point circle2Offset = (new Polar() { Radius = Circle2.Radius, Angle = angleBetweenCircles }).ToCartesian();

        CollisionLocation = midpointBetweenCircles;
        Circle1SafeLocation = new Point(){X = midpointBetweenCircles.X + circle1Offset.X, Y = midpointBetweenCircles.Y + circle1Offset.Y };
        Circle2SafeLocation = new Point(){X = midpointBetweenCircles.X + circle2Offset.X, Y = midpointBetweenCircles.Y + circle2Offset.Y };

        return true;
    }
} 
```

用法可能如下所示：

```
private void CheckCollision(Circle circle1, Circle circle2)
{
    CollisionResult result = new CollisionResult(circle1, circle2);
    if (result.CalculateCollision())
    {
        Console.WriteLine(String.Format("Collision detected at {0}! Safe location for circle 1: {1}, circle 2: {2}", result.CollisionLocation, result.Circle1SafeLocation, result.Circle2SafeLocation));
    }
    else
    {
        Console.WriteLine("Did not collide.");
    }
}

var circle1 = new Circle() {Radius = 5, Position = new Point(){X = 0, Y = 0} };
var circle2 = new Circle() {Radius = 5, Position = new Point(){X = 10, Y = 0} };
var circle3 = new Circle() {Radius = 3, Position = new Point(){X = 0, Y = 1} };
var circle4 = new Circle() {Radius = 5, Position = new Point(){X = 3, Y = 7} };

CheckCollision(circle1, circle2);
CheckCollision(circle3, circle4); 
```

输出：

```
Did not collide.
Collision detected at (1.5, 4)! Safe location for circle 1: (0.158359213500125, 1.31671842700025), circle 2: (3.73606797749979, 8.47213595499958) 
```

我不知道在您的情况下是否有必要处理计算两个圆的真实交点（它们将在两个点相交）等的复杂性。可能这些方面的东西对你来说就足够了。我绝对鼓励健康的单元测试，并使课程*超出*我所拥有的范围。:)

在这种情况下，重要的是，这取决于您想为您的应用程序做什么，当圆圈重叠时，它只是计算它们之间的中点，*然后*将每个圆圈从该中点*移开*它们各自的半径。因此，根据圆圈的速度和大小，或者它们的移动方式，它可能会产生奇怪的结果。例如，如果你有一个半径为 10 的大圆静止不动，那么你在距离大圆中心仅 0.5 距离的地方投入一个半径为 1 的圆，那个大圆将移动大约 9.75 个单位！如果您没有遇到大的重叠条件，那么也许这不是什么大问题。我认为至少这会给你一些*关于*碰撞的信息，然后*如何*您是否希望您的圈子做出反应，结果将取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:18:05.520

可能这对您有帮助： [http ://www.emanueleferonato.com/2011/06/13/slicing-splitting-and-cutting-objects-with-box2d/](http://www.emanueleferonato.com/2011/06/13/slicing-splitting-and-cutting-objects-with-box2d/)

本教程由四部分组成，很好地解释了 2D 动力学。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T16:40:22.950

查看两个圆圈是否碰撞的更快方法是不断检查它们的位置。事实上，您必须检查它们的中心之间的距离是否小于它们的半径之和。

一些*“伪代码*”可能是：

```
distanceX = Math.Abs(circle1.X - cirlce2.X);
distanceY = Math.Abs(circle1.Y - cirlce2.Y);
distance = Math.Sqrt(distanceX * distanceX - distanceY * distanceY);

if(distance <= circle1.Radius + circle2.Radius){
   //they're colliding and the point of collision is:
   collisionX = distanceX / 2;
   collisionY = distanceY / 2;

   if(circle1.X < circle2.X)
      collisionX += circle1.X;
   else
      collisionX += circle2.X;

   if(circle1.Y < circle2.Y)
      collisionY += circle1.Y;
   else
      collisionY += circle2.Y;
} 
```

**PS：**`Math.Pow()`请注意，由于它的性能，我没有使用。

# linux - 创建新的 cronjob 时出错

> ID：15324300
> 
> 赞同：0
> 
> 时间：2013-03-10T16:02:36.673
> 
> 标签：linux, centos, cpanel, whm

当我尝试在 cpanel 中创建新的 cron 作业时，出现以下错误：

> 不允许您 (androido) 使用此程序 (/usr/bin/crontab) 有关详细信息，请参阅 crontab(1)

或者使用其他帐户出现以下错误：

> 身份验证服务无法检索身份验证信息 由于 pam 配置，您 (sms) 不被允许访问 (/usr/bin/crontab)。

我检查过，/usr/bin/crontab 权限是 4755。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:03:42.303

我对 cpanel 不熟悉，但是如果您尝试通过运行添加作业会发生什么`crontab -e`？

如果可行，则您的问题与权限无关。

# c# - 在 Using(Stream fileStream = System.IO.File.OpenWrite("D:\sample.svg")) 中使用 System.IO.File.OpenWrite() 的替代方法

> ID：15324301
> 
> 赞同：0
> 
> 时间：2013-03-10T16:02:42.493
> 
> 标签：c#, filestream

```
using (Stream fileStream = System.IO.File.OpenWrite("D:\sample.svg"))
{
    byte[] buffer = new byte[8 * 1024];
    int len;
    while ((len = SvgStream.Read(buffer, 0, buffer.Length)) > 0)
    {
        fileStream.Write(buffer, 0, len);
    }
} 
```

我有将 PPT 转换为 SVG 的代码。SvgStream 包含 PPT 幻灯片。我不想将转换后的 SVG 文件存储在 D:\sample.svg 等物理路径上。是否可以将其存储在不是物理路径的对象上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:06:21.993

> 是否可以将其存储在不是物理路径的对象上？

当然。如果要流式传输到内存而不是文件系统，请创建 a`MemoryStream`而不是 a 。`FileStream`

当我在这里时：您可能想要使用该`CopyTo`方法，而不是一次将其缓冲一页的繁琐工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T00:34:27.280

我将它保存到一个字符串：

```
SvgStream = new MemoryStream();
sld.WriteAsSvg(SvgStream);
SvgStream.Position = 0;
string[] svgArray = new string[MAX];

//instead of using(var  fileStream = File.IO.......
//I came up with this:
var sr = new StreamReader(SvgStream);
svgArray[i] = sr.ReadToEnd(); 
```

# java - 循环中的 ConcurrentModificationException

> ID：15324310
> 
> 赞同：2
> 
> 时间：2013-03-10T16:03:31.383
> 
> 标签：java, android, collections, iteration, concurrentmodification

我在单独的线程（不是 UI 线程）上运行此代码

```
strains = new ArrayList<Strain>();
for (Breeder b : breeders) {
   for (Strain s : b.getStrains()) {
        strains.add(s);
    }
} 
```

它有时会导致 ConcurrentModificationException。我知道我无法从我正在迭代的 Collection 中添加或删除对象，但在这个片段中我没有对菌株进行迭代。我哪里错了？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:04:58.803

[**同步**](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)您的访问。这种*冻结*当前`breeder`对象，使其不会在任何其他线程中被修改。尝试执行此操作的方法将被阻止。阻塞意味着它们只是*等待*（如 System.sleep(x)），直到`synchronized`另一个线程中的块被处理。

```
synchronized(breeders) {
    for (Breeder b : breeders) {
       for (Strain s : b.getStrains()) {
            strains.add(s);
        }
    }
} 
```

确保您还设置`synchronized`了其他线程对`breeders`.

# javascript - Google Maps V3 拖动 Marker 并更新折线

> ID：15324315
> 
> 赞同：0
> 
> 时间：2013-03-10T16:04:21.203
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试开发一个应用程序，用户可以在其中绘制一个属性，它添加一个标记和一条折线，这样他们就可以清楚地看到正在发生的事情。但我想添加拖动标记的能力（这很容易）并更新折线的位置（这不是那么容易吗？）

## 这是我的一些代码

这是*绘制我的折线*的函数。

**变量*'ll'*是 google.maps.LatLng 的一个实例**

```
// Shorter namespace
    var _g = google.maps;

    // Shorten the namespace, it's used
    // a lot in this function
    var s = SunMaps;

    // If we've reached the max number
    // of lines then exit early.
    if (s.LINES >= 4) {
        return;
    }

    // The defaults
    var options = {
        "strokeColor"   : "green",
        "strokeOpacity" : 1.0,
        "strokeWeight"  : 4
    };

    // If we don't have an instance of poly
    // create one.
    if (s.POLY == false) {
        s.POLY = new _g.Polyline(options);
        s.PATH = s.POLY.getPath();
    }

    // Push the new coords into the path object
    s.PATH.push(ll);

    // Set the map for the poly
    s.POLY.setMap(s.instance);

    // Add a marker
    new s.Marker(ll);

    // Increase the counter
    s.LINES++; 
```

**在同一点绘制标记（行代码中使用的 s.Marker 函数）**

**变量*'ll'*是 google.maps.LatLng 的一个实例**

```
var _g = google.maps;

    // Our custom marker
    var marker = new _g.Marker({
        "position" : ll,
        "icon"     : {
            "path" : _g.SymbolPath.CIRCLE,
            "scale": 10
        },
        "draggable": true,
        "map"      : SunMaps.instance,
        "LineIndex": SunMaps.LINES
    });

    _g.event.addListener(marker, 'drag', function (e) {
        console.log(marker.getPosition());
        // Here is where I can't workout or find documentation
        // on how to move the line.
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T00:31:59.793

对象的`path`属性`Polyline`是一个`MVCArray`。请参阅[https://developers.google.com/maps/documentation/javascript/reference#MVCArray](https://developers.google.com/maps/documentation/javascript/reference#MVCArray)

因此，要移动最后一点，您应该能够做到：

```
s.PATH.setAt(s.PATH.getLength() - 1, marker.getPosition()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:46:52.853

好的，所以我想通了。使用@Dave 的方法

这是在拖动标记时更新折线的代码

```
 var _g = google.maps;
    var _s = SunMaps;

    // Our custom marker
    var marker = new _g.Marker({
        "position" : ll,
        "icon"     : {
            "path" : _g.SymbolPath.CIRCLE,
            "scale": 7
        },
        "draggable": true,
        "map"      : _s.instance,
        // This is the last known index of a polyLine
        "lineIndex": _s.LINES
    });

    // Listen to the drag event
    _g.event.addListener(marker, 'drag', function (e) {
        // Set the new position of the marker as it drags
        this.setPosition(e.latLng);

        // Update the path
        _s.PATH.setAt(this.lineIndex, this.getPosition());
    }); 
```

# css - 为richfaces的inplaceinput组件中的defaultLabel属性设置文本颜色

> ID：15324318
> 
> 赞同：0
> 
> 时间：2013-03-10T16:04:39.497
> 
> 标签：css, jsf, richfaces

在就地输入组件的richfaces中`<rich:inplaceInput defaultLabel="click to edit">`有一个defaultLabel属性（如果没有输出，则显示默认文本）我想为它设置颜色文本，我试图设置`style=""`但不知道该怎么做。

例如，`value=""`我可以通过设置它，`style="margin-left:80;background-color:#fff...etc`但对于这个默认标签我无法设置它，我可以使用 styleClass 并且我为默认文本定义了颜色文本吗？如果有人熟悉 css 进行高级样式或知道在 jsf 中使用它，请让我发帖，我将不胜感激。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:22:10.553

确定使用`styleClass`。

在你的 CSS 文件中定义

```
.yourClass .rf-ii-dflt-lbl {
    color: red;
} 
```

`.rf-ii-dflt-lbl`是 RichFaces 为默认标签生成的类。如果上述方法不起作用，请添加`!important`到规则中：

```
color: red !important; 
```

# resize - JavaFX - SplitPane、调整大小和比例

> ID：15324321
> 
> 赞同：11
> 
> 时间：2013-03-10T16:04:49.623
> 
> 标签：resize, javafx, splitpane

如何实现整个 SplitPane 的按比例调整大小？

```
public class JfxSplitPaneTest extends Application {
    @Override
    public void start(Stage stage) throws Exception {
        SplitPane split = new SplitPane();
        StackPane child1 = new StackPane();
        child1.setStyle("-fx-background-color: #0000AA;");
        StackPane child2 = new StackPane();
        child2.setStyle("-fx-background-color: #00AA00;");
        StackPane child3 = new StackPane();
        child3.setStyle("-fx-background-color: #AA0000;");
        split.getItems().addAll(child1, child2, child3);
        //split.setDividerPositions(0.1f, 0.6f, 0.9f)
        stage.setScene(new Scene(split, 400, 300));
        stage.show();
    }
    public static void main(String[] args) {
        launch(args);
    }
} 
```

启动程序：

![在此处输入图像描述](../Images/c57990d77a3d60a47ef6db19219e8538.png)

设置我喜欢的分隔线：

![在此处输入图像描述](../Images/ee50493fd18a04cea1322baf26204a41.png)

使窗口宽度非常小（我继续并将其做得更小，没有图片）：

![在此处输入图像描述](../Images/2d8f134d1bfa2a044ee72a5172b4dd1d.png)

重新调整大小并观察分隔线既不是我设置它们的方式，也不是程序启动时的方式。

![在此处输入图像描述](../Images/053956190c90e57b6eef54efe3d687db.png)

这样做使它更接近我的期望：

```
 child1.setMinWidth(Region.USE_PREF_SIZE)
    child1.setPrefWidth(100)
    child2.setMinWidth(Region.USE_PREF_SIZE)
    child2.setPrefWidth(200)
    child3.setMinWidth(Region.USE_PREF_SIZE)
    child3.setPrefWidth(300) 
```

除了分隔线最初位于错误的位置（直到我调整 SplitPane 的大小，1px 就足够了）并且在缩小窗口宽度时，分隔线位于组件内部。

请问我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-20T23:18:37.880

尝试像 AS3Boyan 所说的那样设置除数

```
split.setDividerPositions(0.1f, 0.6f, 0.9f) 
```

并添加：

[当窗口调整大小时，如何避免 SplitPane 调整其中一个窗格的大小？](https://stackoverflow.com/questions/11000098/how-can-i-avoid-a-splitpane-to-resize-one-of-the-panes-when-the-window-resizes/11016468#11016468)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-27T11:34:11.730

尝试将 Change Listener 添加到**stage.widthProperty()**和**stage.heightProperty()**。并称之为：

```
 split.setDividerPositions(0.1f, 0.6f, 0.9f) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-14T12:27:33.143

经验法则是在触发调整大小事件时使用`setDividerPositions`with 。`Platform.runLater`

您可能希望从默认比率开始，让用户更改该比率，并在发生调整大小事件时保持该比率。`splitPane`让我们考虑一些25/75 垂直 FX `stage`：

```
splitPane.setDividerPositions(0.25f, 0.75f);
stage.heightProperty().addListener((obs, oldVal, newVal) -> {
    double[] positions = splitPane.getDividerPositions(); // reccord the current ratio
    Platform.runLater(() -> splitPane.setDividerPositions(positions)); // apply the now former ratio
}); 
```

# ios - ZXingObjC iOS 存档问题：'ZXingObjC/ZXingObjC.h' 文件未找到编辑

> ID：15324323
> 
> 赞同：3
> 
> 时间：2013-03-10T16:04:58.457
> 
> 标签：ios, objective-c, xcode

我按照自述文件中的说明进行操作，当我在模拟器或设备上将其作为调试配置运行时，它运行良好，但是当我存档时出现此错误：

> 'ZXingObjC/ZXingObjC.h' 文件未找到

我试图在构建设置中设置标题搜索路径，`./libs/ZXingObjC-8f83c0b`然后得到错误

> libs/ZXingObjC-8f83c0b/ZXingObjC/ZXingObjC.h:20:9: 'ZXingObjC/ZXAztecDecoder.h' 文件未找到

知道如何解决吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-14T19:57:46.433

添加标题搜索路径

$(SRCROOT)/../..

递归的

[![在此处输入图像描述](../Images/851d606dc2b3386386ac0cf9cb247c7b.png)](https://i.stack.imgur.com/KbiYL.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T00:05:57.627

我想到了。- 将“$(BUILD_ROOT)/../IntermediateBuildFilesPath/UninstalledProducts”添加到标题搜索路径 - 转到 ZXingObjC 项目的构建设置，将公共标题文件夹路径从 $(PROJECT_NAME)Headers 更改为 $(PROJECT_NAME)

# android - Android 应用程序对触摸无响应

> ID：15324325
> 
> 赞同：0
> 
> 时间：2013-03-10T16:05:03.183
> 
> 标签：android, cordova, extjs, touch

我有一个用 Sencha Touch 和 phonegap 开发的应用程序。有一次，它会从服务器下载数据，一旦收到成功的响应，就会显示下一个屏幕。我发现，当将其捆绑为 iOS 应用程序时，它会转换到下一个屏幕，但不显示任何内容，报告内存不足。所以我简化了下一个屏幕的布局（DOM 结构非常复杂），它现在可以在 iOS 模拟器和我的 iPhone 上运行。

但是，在 Android 中，我可以从 console.log 语句的输出中看到它成功检索数据并触发事件以显示下一个屏幕。然后它会在显示该屏幕之前停留很长时间，即使我的 console.log 语句显示该屏幕的“绘制”事件已被触发。

最终，屏幕确实出现了，但屏幕上的所有控件都对触摸没有响应。我是否可能需要进一步简化该屏幕的结构？由于iOS版本在我简化页面结构之前收到了内存不足的警告，我怀疑Android版本可能有类似的问题，但我不知道如何监控内存使用情况。在 Android 版本中，在屏幕最终显示之前不久，我在 logcat 中看到以下内容：

```
UpdateFrameCache: pending style recalc, ignoring 
```

在无响应的屏幕上，当我点击一些（但不是全部）无响应的控件时，我看到：

```
Got ACTION_DOWN but still waiting on stale event. Catching up. 
```

最终，该应用程序将自行关闭，其中：

```
Fatal signal 11 (SIGSEGV) at 0xbbbadbeef (code = 1) 
```

感激地收到任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:52:54.687

如果您在 UI 线程中执行密集计算，它可能会解释为什么需要这么长时间。如果您有一些背景计算要做，请尝试使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或[服务。](http://developer.android.com/guide/components/services.html)完成后，更新 UI 线程中的界面。

戈尔达克

# php - 如何更改多维数组的键名

> ID：15324329
> 
> 赞同：0
> 
> 时间：2013-03-10T16:05:23.087
> 
> 标签：php, arrays, multidimensional-array

我有两个数组，其中一个包含一个新的键名

```
$assoc = ['name', 'lastname', 'pesel']; 
```

第二个看看这个

```
$inputs = ['John', 'Don', '987987', 'Mike', 'Evans', '89779' ]; 
```

Array`$assoc`是新的键名，我想将 ,`[0]`更改`[1]`为`['name']`etc

```
array(2) {
  ['person'] =>
  array(3) {
    ['name'] => string(4) "John"
    ['lastname'] => string(3) "Don"
    ['pesel'] => string(6) "987987"
  }
  ['person'] =>
  array(3) {
    ['name'] => string(4) "Mike"
    ['lastname'] => string(5) "Evans"
    ['pesel'] => string(5) "89779"
  }
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T16:11:57.020

这很简单：

```
$new_array = array();

foreach(array_chunk($inputs, 3) as $person) {
   $new_array[] = array_combine($assoc, $person);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T16:21:01.727

```
<?php
$assoc=Array("name", "lastname", "pesel");
$inputs=Array('John', 'Don', '987987', 'Mike', 'Evans', '89779' );

$resultant_array=Array();
for($i=0; $i<count($inputs); $i+=count($assoc)){
//echo $i."\n\n";
 for($j=0; $j<count($assoc); $j++){

    $b2g[$assoc[$j]]=$inputs[$i+$j];
 }
 $resultant_array[]=$b2g;
}   

print_r($resultant_array); 
```

这是一个更冗长和通用的用途..我实际上已经使用了很多递归..

# timer - 如何使用 java.util.timer 接收串行数据并定期显示

> ID：15324336
> 
> 赞同：1
> 
> 时间：2013-03-10T16:06:05.037
> 
> 标签：timer, serial-port, arduino, rxtx

我正在从一个 arduino mega 接收数据，它以 500 毫秒的延迟传输数据。我希望通过在使用 java.util.timer 接收数据时更新提要来定期更新 COSM 服务器上的这些数据。不知何故，接收到的数据不是在提要上更新的数据。这是我在控制台上收到的输出

```
Content-Length: 341
<?xml version="1.0" encoding="UTF-8"?>
<eeml xmlns="http://www.eeml.org/xsd/005" xmlns:xsi="http://www.w3.org/2001/XMLSchema-     instance" version="5" xsi:schemaLocation="http://www.eeml.org/xsd/005   http://www.eeml.org/xsd/005/005.xsd"><environment><data id="1044">
    <tag>ecu low speed</tag>
    <value >20.0</value>
</data></environment></eeml> 
```

从串口接收数据的代码是：

```
public synchronized void serialEvent(SerialPortEvent oEvent) 
{
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) 
    {
        try
        {
            val=input.read();
        } 
        catch (Exception e)
        {
            System.err.println(e.toString());
        }
    }
} 
```

请帮忙！

# java - Maven - 即使添加了依赖项，包 org.junit 也不存在

> ID：15324337
> 
> 赞同：5
> 
> 时间：2013-03-10T16:06:08.003
> 
> 标签：java, maven, junit

我正在为我的 Maven 项目创建测试类，但是 Maven 无法导入 JUnit，有什么想法吗？

类Recipebook/src/test/java/RecipebookTest.java：

```
 import org.junit.Test;
 import org.junit.Before;

 /**
  *
  * @author Mimo
  */
 public class RecipebookTest {
     @Before
     protected void setUp() throws Exception {        
     }
 } 
```

我的 pom.xml 文件：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org /2001/XMLSchema-instance"
   xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
   <modelVersion>4.0.0</modelVersion>

   <groupId>fi.muni</groupId>
   <artifactId>Recipebook</artifactId>
   <version>2.1.0</version>
   <packaging>jar</packaging>

   <name>Recipebook</name>
   <url>http://maven.apache.org</url>

   <properties>
     <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
   </properties>

   <dependencies>
     <dependency>
       <groupId>junit</groupId>
       <artifactId>junit</artifactId>
       <version>3.8.1</version>
     </dependency>
   </dependencies>
 </project> 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T16:07:49.530

错误的junit，您需要版本4进行注释。将依赖项更改为：

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.11</version>
</dependency> 
```

# url - 编码的 Youtube URL 的全屏按钮不起作用

> ID：15324339
> 
> 赞同：0
> 
> 时间：2013-03-10T16:06:10.293
> 
> 标签：url, youtube, fullscreen

我已成功编码以下 URL 以制作 youtube 视频高清：

[https://www.youtube.com/v/wnPQC3mAr0k?hl=en_US&version=3&rel=0;&vq=hd720](https://www.youtube.com/v/wnPQC3mAr0k?hl=en_US&version=3&rel=0;&vq=hd720)

但是，全屏按钮不起作用。有什么办法可以让它工作吗？

谢谢你。

-

注意：我不是在谈论嵌入式播放器代码。

我说的是创建一个独立的 URL，即。我上面写的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:40:09.633

您需要将 allowFullScreen 设置为“true”。

# delphi - 随机化数组？

> ID：15324345
> 
> 赞同：0
> 
> 时间：2013-03-10T16:06:29.800
> 
> 标签：delphi, list, pascal

在帕斯卡中，我想随机组织一个数组。因此，大多数情况下，数组应该以不同的方式组织。

考虑这个阵列设置

```
const
  ARRAY_ELEMENTS = 3;

SetLength(iIndex, ARRAY_ELEMENTS);

for i := Low(iIndex) to High(iIndex) do
begin
   case i of
   0: iIndex[i] := 0;
   1: iIndex[i] := 1;
   2: iIndex[i] := 2;
   end;
end; 
```

`iIndex[]`包含值 0的 怎么可能不总是在数组的第一个元素中，`iIndex[]`而包含值 2 的不总是数组的最后一个值，而是随机生成数组的顺序，这样数组的顺序在初始化时并不总是相同的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T16:26:58.510

This code permutes an integer array, but I'm not sure if it is optimal (probably isn't).

```
type
  TDynIntegerArray = array of integer;

procedure PermuteArray(A: TDynIntegerArray);
var
  B: TDynIntegerArray;
  Z: TDynIntegerArray;
  π: TDynIntegerArray;
  i: Integer;
  j: Integer;
  k: Integer;
begin
  B := Copy(A);
  SetLength(Z, Length(A));
  SetLength(π, Length(A));
  for i := 0 to High(Z) do
    Z[i] := i;
  for i := 0 to High(π) do
  begin
    π[i] := RandomFrom(Z);
    for j := 0 to High(Z) do
    begin
      if Z[j] = π[i] then
      begin
        for k := j to High(Z) - 1 do
          Z[k] := Z[k+1];
        SetLength(Z, length(Z) - 1);
        break;
      end;
    end;
  end;
  for i := 0 to High(A) do
    A[i] := B[π[i]];
end; 
```

A much faster, but less cool approach is simply to randomly swap the items, one pair at a time:

```
procedure FastPermuteArray(A: TDynIntegerArray);
  procedure Swap(n, m: integer);
  var
    tmp: integer;
  begin
    tmp := A[n];
    A[n] := A[m];
    A[m] := tmp;
  end;
var
  i: Integer;
begin
  for i := High(A) downto 1 do
    Swap(i, RandomRange(0, i));
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:41:53.113

尝试这样的事情：

```
uses
  System.Generics.Collections;

const
  ARRAY_ELEMENTS = 3;
var
  iArray: array of Integer;
  iIndex: TList<Integer>;
  I, j: Integer;
begin
  Randomize;

  SetLength(iArray, ARRAY_ELEMENTS);

  iIndex := TList<Integer>.Create;
  try
    iIndex.Count := ARRAY_ELEMENTS;
    for i := 0 to Pred(ARRAY_ELEMENTS) do
      iIndex[i] := i;

    for i := Low(iArray) to High(iArray) do
    begin
      j := Random(iIndex.Count);
      iArray[iIndex[j]] := i;
      iIndex.Delete(j);
    end;
  finally
    iIndex.Free;
  end;
end; 
```

如果您的 Delphi 版本中没有`TList<T>`可用的，您可以使用普通的`TList`代替：

```
uses
  Classes;

const
  ARRAY_ELEMENTS = 3;
var
  iArray: array of Integer;
  iIndex: TList;
  I, j: Integer;
begin
  Randomize;

  SetLength(iArray, ARRAY_ELEMENTS);

  iIndex := TList.Create;
  try
    iIndex.Count := ARRAY_ELEMENTS;
    for i := 0 to Pred(ARRAY_ELEMENTS) do
      iIndex[i] := Pointer(I);

    for i := Low(iArray) to High(iArray) do
    begin
      j := Random(iIndex.Count);
      iArray[Integer(iIndex[j])] := i;
      iIndex.Delete(j);
    end;
  finally
    iIndex.Free;
  end;
end; 
```

# tsql - 如何使用 RAISEERROR 语句？

> ID：15324347
> 
> 赞同：0
> 
> 时间：2013-03-10T16:06:30.950
> 
> 标签：tsql, raiseerror

这是非常基本的东西，但我无法理解，并且手册没有帮助：

```
declare @rule int =
    (select id from menu_availability_rules
        where (daily_serving_start = null or
            (daily_serving_start is null and null is null)) and
            (daily_serving_end = null or
            (daily_serving_end is null and null is null)) and
            (weekly_service_off = 3 or
            (weekly_service_off is null and 3 is null)) and
            (one_time_service_off = null or
            (one_time_service_off is null and null is null)));

        print @rule;
        -- syntax error here --\/
        if (@rule is not null) raiseerror ('test error', 42, 42);

        if @rule is not null
        begin
            delete from menu_availability
            where menu_id = 5365 and rule_id = @rule

            delete from menu_availability_rules
            where (daily_serving_start = null or
                (daily_serving_start is null and null is null)) and
                (daily_serving_end = null or
                (daily_serving_end is null and null is null)) and
                (weekly_service_off = 3 or
                (weekly_service_off is null and 3 is null)) and
                (one_time_service_off = null or
                (one_time_service_off is null and null is null))
            and not exists
                (select rule_id from menu_availability
                where rule_id = @rule)
        end 
```

为什么是语法错误？我该怎么写？为了调试目的，我需要抛出错误，只是为了确保代码到达条件分支。

我可以替换为`raiseerror`，`select 1 / 0`我会得到我需要的，但为什么我不能正常做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:09:28.677

正确的名字是[`RAISERROR`](http://msdn.microsoft.com/en-us/library/ms178592.aspx "RAISERROR (Transact-SQL)")。

# meteor - 如何使 Meteor 对子项做出反应，但对父项没有反应

> ID：15324350
> 
> 赞同：1
> 
> 时间：2013-03-10T16:06:31.980
> 
> 标签：meteor

我有一个想用 Meteor 构建的 Newsfeed 想法，但是我在弄清楚如何使 News Feed 本身保持不变时遇到了一些困难，这不是反应性的，而是更新子项目（评论，喜欢等）一旦更新。

我将所有内容都存储在一个集合中，如果可能的话，我想保持这种状态。所以集合是这样设置的：

```
[
    {
        title: 'A random title',
        date_created: '01/01/2001',
        comments:
            [
                {'message': 'Lorem ipsum', date_created: '01/01/2001'},
                [...]
            ]
    },
    [...]
] 
```

所以我想做的是让新闻源不反应，这样当插入或更新新的新闻项目时，保存新闻列表的模板不会被重新呈现。但是，如果添加、删除评论或有人喜欢新闻提要，我希望立即在模板中更新。

我一直试图弄清楚如何使用`{{#isolate}}`，`{{#constant}}`但没有占上风。

**这是我的客户端JS：**

```
Template.group_feed.feed_data = function() {
    var feed = Newsfeed.find({}, {
        sort: {updated_time: -1},
        limit: 10,
        reactive: false
    }).fetch();

    return feed;
}; 
```

*我设置`reactive: false`它不更新模板，但是在更新评论或喜欢时也使它成为静态。所以我猜有更好的方法来做到这一点，然后让整个集合不反应。*

**这是我的模板代码：**

```
<template name="group_feed">
    <div id="feed-wrapper">
        <ul>
            {{#each feed_data}}
                {{> group_feed_item}}
            {{/each}}
        </ul>
    </div>
</template>

<template name="group_feed_item">
    <li>
        <h1>{{title}}</h1>
        <div class="comments">
            {{#each comments}}
                <p>{{message}}</p>
            {{/each}}
        </div>
    </li>
</template> 
```

任何人都有实现这一目标的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:37:06.977

您在这里有两个选择。（我将使用咖啡脚本作为我的伪代码）

*   使用[观察变化](http://docs.meteor.com/#observe_changes)：

    ```
    NewsCursor = NewsItems.find()
    NewsCursor.observeChanges
      changed: (id, fields) ->
        if fields.comments
          Session.set ("commentsForId"+id), fields.comments 
    ```

*   将您的数据分成两个集合：一个用于帖子，另一个用于评论。

如果你不做其中之一，{{isolate}} 不会帮助你。使用您当前的数据设置，Meteor 只会查看帖子是否更改，并在更改时更新任何模板；它不会跟踪哪个部分发生了变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:42:47.797

我没有测试它，但我想限制客户端的订阅是最直接的，从而减少数据传输并消除对保留的需要：

它会是这样的：

在服务器上：

```
Meteor.publish('tenItemsBefore',function (time) {
  Newsfeed.find({updated_time: {$lt time}}, {
  sort: {updated_time: -1},
  limit: 10
})} 
```

在客户端，在反应上下文中，例如。在 Meteor.autorun() 中：

```
Newsfeed.subscribe('tenItemsBefore',Session.get('lastUpdate')); 
```

在客户端，由事件触发，例如。使用路由器包刷新：

```
Session.set('lastUpdate', (new Date()).getTime()); 
```

希望有帮助，

最好的，简

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:55:18.697

我很确定问题在于您返回的是数组而不是游标。似乎 Spark 对两者的行为有所不同。

`.fetch()`从提要查询的末尾删除。

有关这些东西如何工作的更多信息，我强烈建议在[http://www.eventedmind.com/上查看 Chris Mather 的精彩演讲](http://www.eventedmind.com/)

具体来说，慢动作反应性说明了数组和光标之间的区别： [http ://www.eventedmind.com/posts/meteor-ui-reactivity-in-slow-motion](http://www.eventedmind.com/posts/meteor-ui-reactivity-in-slow-motion)

更新：在我原来的答案中，我没有完全理解问题 - 我很抱歉，所以关于删除 fetch() 的内容对你没有帮助。以下是您可能想要探索的几个选项：

1.  使用 Meteor.observe 或[Meteor.observeChanges](http://docs.meteor.com/#observe_changes "Meteor.observerChanges")来观察评论字段的变化，并使用代码（“手动”）更新 DOM。

2.  在服务器端创建一个自定义集合，仅发布原始集合中的评论。所以我不建议你改变存储在 mongo 中的数据模型，只是发布一个不同的视图。通过这种方式，可能更容易继续使用模板来更新评论。

3.  初始加载集合后，记下查看的项目 ID，然后订阅集合并传递要观看的 ID 列表（或日期范围）。这将需要一个新的发布函数，该函数采用一组 id，并过滤返回的文档。这种方法可以防止新文档干扰您在屏幕上的内容，并且您仍然会收到评论更改，但您也会收到影响非评论字段的删除和字段更改。

希望其中一种方法可能适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:37:39.420

如果由于某种原因您不希望/不能限制客户端通过发布看到的数据，或者如果可以插入发布时间较早的新帖子并破坏保存，上述解决方案将不起作用。因此，我建议使用不同的解决方案来更直接地实现保存：

打开帖子时，以非反应方式保存已观看帖子的 _id，如下所示：

```
Session.set('watched',
  _.map(
    Newsfeed.find({}, {
      sort: {updated_time: -1},
      limit: 10,
      reactive: false      //not sure wheather you need both, as @StephenD
    }).fetch(),            // pointed out sth. fetched is non reactive by default
    function (obj) {return obj._id;}
  )
); 
```

和：

```
Template.group_feed.feed_data = function () {
  return Session.get('watched');
};
Template.group_feed_item.item = function () {
  return Newsfeedd.findOne(this);
}; 
```

以及 html 中的一个小更新（其中 with 使您无需定义额外的模板）：

```
<template name="group_feed_item">
  <li>
    {{#with item}} 
      <h1>{{title}} - {{_id}}</h1>
      <div class="comments">
        {{#each comments}}
          <p>{{message}}</p>
        {{/each}}
      </div>
    {{/with}}
  </li>
</template> 
```

最好的，简

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-09T20:49:01.140

从文档（强调我的） - [http://docs.meteor.com/#find](http://docs.meteor.com/#find)

> 游标是一种反应式数据源。在客户端，当您第一次在响应式计算（例如，模板或自动运行）中使用 fetch、map 或 forEach 检索游标的文档时，Meteor 将注册对底层数据的依赖关系。任何更改游标中文档的集合都会触发重新计算。要禁用此行为，请将 {reactive: false} 作为查找选项传递。
> 
> 请注意，当指定字段时，只有对包含字段的更改才会在使用此游标的反应式计算中触发观察、观察更改和失效中的回调。**谨慎使用字段可以为不依赖于整个文档的计算提供更细粒度的反应性。**

# opengl - 法线映射，TBN矩阵计算

> ID：15324357
> 
> 赞同：6
> 
> 时间：2013-03-10T16:07:24.027
> 
> 标签：opengl, glsl

我只是想确保我正确理解 TBN 矩阵计算

在顶点着色器中我们通常使用：

```
vec3 n = normalize(gl_NormalMatrix * gl_Normal);
vec3 t = normalize(gl_NormalMatrix * Tangent.xyz);
vec3 b = normalize(gl_NormalMatrix * Bitangent.xyz);
mat3 tbn = mat3(t, b, n); 
```

据我了解，该`tbn`矩阵将向量**从切线**空间**转换为眼睛**空间。实际上我们想要反向 - 将向量从眼睛空间转换到切线空间。因此我们需要反转`tbn`矩阵：

```
tbn = transpose(tbn); // transpose should be OK here for doing matrix inversion 
```

**注意：** `tbn` - 应该只包含旋转，对于这种情况，我们可以使用转置来反转矩阵。

我们可以转换我们的向量：

```
vec3 lightT  = tbn * light_vector;
...          = tbn * ... 
```

在几个教程中，我发现作者使用了这样的源代码：

```
light.x = dot(light, t);
light.y = dot(light, b);
light.z = dot(light, n); 
```

上面的代码与乘以`transposed(tbn)`矩阵相同。

**问题：**

`tbn`我们应该像我上面解释的那样使用转置矩阵吗？或者，也许我错过了什么？

**请注意**，通过该解决方案，我们在顶点着色器中将向量（light_vector）转换为 TBN，然后在片段着色器中我们只需要从法线贴图获取法线。其他选项是创建从 TBN 空间转换到眼睛空间的 TBN 矩阵，然后在片段着色器中转换从法线贴图读取的每个法线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T14:44:15.803

转置不是矩阵的反转！

我在顶点着色器中的 TBN 矩阵如下所示：

```
uniform mat4x4 tm_l2g_dir;
layout(location=3) in vec3 tan;
layout(location=4) in vec3 bin;
layout(location=5) in vec3 nor;
out smooth mat3 pixel_TBN;

void main()
{
    vec4 p;
    //...
    p.xyz=tan.xyz; p.w=1.0; pixel_TBN[0]=normalize((tm_l2g_dir*p).xyz);
    p.xyz=bin.xyz; p.w=1.0; pixel_TBN[1]=normalize((tm_l2g_dir*p).xyz);
    p.xyz=nor.xyz; p.w=1.0; pixel_TBN[2]=normalize((tm_l2g_dir*p).xyz);
    //...
} 
```

在哪里：

*   tm_l2g_dir 是从局部模型空间到全局场景空间的转换矩阵，对您的代码没有任何移动（仅更改方向）它是您的法线矩阵
*   tan,bin,nor 不是 TBN 矩阵的向量（作为我模型的一部分）

也不是 - 从实际顶点位置到表面的法线向量（可以计算为来自该顶点的两个顶点的向量乘法）

tan,bin 是垂直向量，通常平行于纹理映射轴或模型的细分。如果您选择错误的 tan/bin 向量，有时可能会出现一些照明伪影。例如，如果您有圆柱体，则 bin 是它的旋转轴，而 tan 沿圆垂直于它（切线）

tan,bin,nor 不应相互垂直

您也可以自动计算 TBN，但这会导致一些伪影。要做到这一点，您只需选择一个用于正常计算的顶点作为 tan 向量，并且 bin=nor x bin

在片段着色器中，我使用带有法线贴图的 pixel_TBN 来计算片段的真实法线

```
//------------------------------------------------------------------
#version 420 core
//------------------------------------------------------------------
in smooth vec2 pixel_txr;
in smooth mat3 pixel_TBN;
uniform sampler2D   txr_normal;
out layout(location=0) vec4 frag_col;
const vec4 v05=vec4(0.5,0.5,0.5,0.5);
//------------------------------------------------------------------
void main(void)
    {
    vec4 col;
    vec3 normal;
    col=(texture2D(txr_normal,pixel_txr.st)-v05)*2.0;       // normal/bump maping
    normal=pixel_TBN*col.xyz;
    // col=... other stuff to compute col

    frag_col=col;
    }
//------------------------------------------------------------------ 
```

# asp.net - 如何在 div 中使用可见属性的两个条件

> ID：15324360
> 
> 赞同：1
> 
> 时间：2013-03-10T16:07:49.007
> 
> 标签：asp.net, eval, webforms

我想使用两个条件在 div 内可见

```
Visible='<%# Eval("commenter_name").ToString() == username %> || username == admin' 
```

它不工作。我只能使用一个条件。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T16:16:27.590

我假设 ASP.NET

尝试这个：

连接两个布尔结果，（就像您通常在 c# 中所做的那样）。

```
Visible='<%# 
          Eval("commenter_name").ToString() == Eval("username").ToString() 
          || 
          Eval("username").ToString() == "admin" 
         %>' 
```

或者，如果您要验证的条件太多：

用函数替换它

```
Visible ='<%# VerifyConditions(Convert.ToInt32(Eval("Id"))) %>' 
```

并在您的代码隐藏（.aspx.cs）页面中定义这样的验证条件：

```
public bool VerifyConditions(int Id)
{
   string username= GetCurrentUser();
   //obtain other variables, either through the bound row, or 
   //from the db based on the Id
    //all your logics..

    return  true; //or false based on evaluation;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:10:56.670

您需要将表达式放在数据绑定表达式标签中。只要表达式产生布尔值，它就会起作用

```
Visible='<%# Eval("commenter_name").ToString() == Eval("username").ToString() || Eval("username").ToString() == "admin" %>' 
```

# python - Python - 散列二进制值

> ID：15324366
> 
> 赞同：0
> 
> 时间：2013-03-10T16:08:12.570
> 
> 标签：python, sha1

我想使用 sha1 算法来计算一些数据的校​​验和，问题是在 python 中`hashlib`输入是作为字符串给出的。

是否可以在 python 中计算 sha1，但以某种方式将原始字节作为输入？

我问是因为如果我想计算文件的哈希值，在 CI 中将使用`openssl`库并只传递普通字节，但在 Python 中我需要传递字符串，所以如果我要计算某个特定文件的哈希值，我会得到不同的结果两种语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T16:16:08.160

在 Python 2.x 中，`str`对象可以是任意字节流。所以是的，您可以将数据`hashlib`作为`str`s 传递给函数。

```
>>> import hashlib
>>> "this is binary \0\1\2"
'this is binary \x00\x01\x02'
>>> hashlib.sha1("this is binary \0\1\2").hexdigest()
'17c27af39d476f662be60be7f25c8d3873041bb3' 
```

# mysql - 如何将 .sql 中的数据插入 Django 表？

> ID：15324368
> 
> 赞同：0
> 
> 时间：2013-03-10T16:08:16.970
> 
> 标签：mysql, django, python-2.7

我正在尝试将一些初始数据插入到 django 表中。我已经尝试过 sqlcustom 和 sqlall，但它似乎不起作用......并按照说明创建了一个 .sql 文件，其中包含一些插入语句，如下所示：

插入`charts_wave`（id，...）值（...）；

该文件位于以下路径中：

项目/图表/sql/wave.sql

可能我没看懂sqlcustom和sqlall的用途。运行命令后，我最后运行了一个 syncdb 命令。接下来我通过在 python shell 中调用 Wave.objects.all() 来测试它，它返回一个空列表。

我做错了什么？？如何使用 sql 文件插入这些数据。带有固定装置的方法对于我必须插入的真正广泛的数据似乎是硬编码的。现在谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:36:14.703

对我来说，您似乎正在寻找[Django 固定装置](https://docs.djangoproject.com/en/dev/howto/initial-data/)。它们提供了一种将初始数据导入 Django 应用程序的方法。因此，当您运行 syncdb 时，将自动导入数据，而不是自己导入数据，包括应用程序中的夹具。

# asp.net - 使用 objectDataSource 馈送 Gridview 启动 ASP 页面时出现 TargetInvocationException

> ID：15324373
> 
> 赞同：0
> 
> 时间：2013-03-10T16:08:58.357
> 
> 标签：asp.net, ado.net

当我启动页面进行调试时，我收到以下异常。objectDataSource 是为查询 oracle 数据库的 ADO TableAdapter 配置的。然后将 ods 绑定到 ASP.NET Gridview。我正在针对 .NET 4.0 进行编码。

如果我不绑定gridview，启动时没有问题。我可以完全配置 ods，为 gridview 定义列和行行为等，没有任何问题。我正在使用（据我所知）我过去成功使用过多次的相同方法来访问和显示数据。我已经尽可能地仔细阅读了代码，但无法找出问题所在。

异常信息：

```
Capabilities:Type=IE7,Name=IE,Version=7.0,MajorVersion=7,MinorVersion=0,Platform=WinNT,IsBeta=False,IsCrawler=False,IsAOL=False,IsWin16=False,IsWin32=True,SupportsFrames=True,SupportsTables=True,SupportsCookies=True,Ecmascriptversion=3.0,SupportsVBScript=True,SupportsJavaApplets=True,SupportsActiveXControls=True,CDF= False 

Inner Exception Type: System.Reflection.TargetInvocationException Inner Exception: Exception has been thrown by the target of an invocation. 
Inner Source: mscorlib 
Inner Stack Trace: at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner) 
at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner) 
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks) 
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) 
at System.Web.UI.WebControls.ObjectDataSourceView.InvokeMethod(ObjectDataSourceMethod method, Boolean disposeInstance, Object& instance) 
at System.Web.UI.WebControls.ObjectDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) 
at System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) 
at System.Web.UI.WebControls.DataBoundControl.PerformSelect() 
at System.Web.UI.WebControls.BaseDataBoundControl.DataBind() 
at System.Web.UI.WebControls.GridView.DataBind() 
at System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() 
at System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls() 
```

标记：

```
<asp:GridView ID="gvGradename" runat="server" AutoGenerateColumns="False" 
                    DataKeyNames="GRADENAME_ID" DataSourceID="odsGradename">
                    <Columns>

                        //Which columns are displayed are irrelevant. The error occurs with any columns, including none.

                    </Columns>
</asp:GridView>
<asp:ObjectDataSource ID="odsGradename" runat="server" 
                    OldValuesParameterFormatString="original_{0}" 
                    SelectMethod="GetDataByActiveName" 
                    TypeName="pts.PTSTableAdapters.PTS_GRADENAMETableAdapter">
</asp:ObjectDataSource> 
```

查询：

```
select gn.gradename_id 
      , gn.mill_id
      , case when gn.gradename_id = 0 then upper(gn.name) else initcap(gn.name) end name
      , m.name millname
      , gn.audit_id
      , gn.audit_dtm
      , gn.audit_insert_dtm
      , gn.audit_process_code
      , gn.description
      , gn.roll_width_threshold
from pts_gradename gn
  , pts_mill m
where gn.is_generic = 1 
  and gn.is_active = 1
  and gn.mill_id = m.mill_id
order by case when gn.gradename_id = 0 then null else initcap(gn.name) end nulls first 
```

目前，我没有在代码隐藏中对它做任何事情。

编辑：在查询中包含表名，它们以前被编辑过。

此外，我可以预览表适配器中的数据，并接收预期的信息，因此查询本身似乎没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:53:52.293

问题出在与数据表关联的自动生成的 Fill 方法上。我无法确定究竟是什么问题，但删除它并重新开始解决了问题。

不是一个很好的答案，但它是这个特定问题的解决方案。

# sql - 当行不存在时，oracle sql 计数（或其他足够的聚合）返回零

> ID：15324380
> 
> 赞同：0
> 
> 时间：2013-03-10T16:09:16.890
> 
> 标签：sql, oracle

我正在使用 Oracle 数据库。

我有一张桌子：汽车。

它包含三个字段

比赛 - 赛车 - 完成

Car 本质上是 ID 字段。种族是种族的名称。终点是汽车放置的位置：（1st, 2nd, 4th, DNF）。

我想返回某辆车在每个位置完成的次数，包括零个实例。所以最终的结果是：

```
Toyota
Finish         Amount
1st            3
2nd            0
3rd            2
DNF            0 
```

当汽车没有第二名时，我尝试 NVL 返回零：从 Car = 'Toyota'; 的汽车中选择 Finish, count(nvl(finish)); 但这仍然只返回第一名和第三名的完成计数。

我几乎是 SQL 的初学者，所以我一直在阅读我可以在这个网站和其他地方找到的所有零计数问题，并且无法将建议概括为我的特定情况。

编辑以包括表格：我将表格包括在内以进行澄清。“种族”字段对于这项任务真的不重要，因为我只是想计算“完成”的位置。

```
CAR       RACE      FINISH
Toyota    DCA       1st
Toyota    NYC       3rd
Toyota    ATL       3rd
Toyota    PHI       1st 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:17:48.447

```
select
  f.Finish,
  count(c.Finish) as Finish_Amount
from 
  (select '1st' as Finish from dual
   union all
   select '2nd' from dual
   union all
   select '3rd' from dual
   union all
   select 'DNF' from dual
  ) f
  left join Cars c 
    on f.Finish = c.finish
    and c.Car = 'Toyota'
    --and c.Race = 'Atlanta'
group by f.Finish
order by 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:05:30.727

这适用于所有汽车

```
select a.f,nvl(cnt,0) cnt
(select '1st' as f from dual
union
select '2nd' as f from dual
union
select '3rd' as f from dual
union
select 'DNF' as f from dual) a,
(select Finish,count(finish) as cnt from cars group by finish) b
where a.f=b.finish(+) 
```

如果您只想要特定的汽车，只需包含一个给出汽车名称的位置条件，例如

```
(select Finish,count(finish) as cnt from cars where car='MARUTI' group by finish) 
```

# linq - 从枚举填充字典

> ID：15324384
> 
> 赞同：2
> 
> 时间：2013-03-10T16:09:40.623
> 
> 标签：linq, dictionary, enums

我有以下枚举：

```
public enum LifeCycle
{
    Pending = 0,
    Approved = 1,
    Rejected = 2,
} 
```

我想创造

```
Dictionary<int, string> LifeCycleDict; 
```

从`enum`价值及其`toString`

有没有办法用linq做到这一点？
（相当于 java 的 enum.values ）谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T16:38:16.983

```
Dictionary<int, string> LifeCycleDict = Enum.GetNames(typeof(LifeCycle))
    .ToDictionary(Key => (int)Enum.Parse(typeof(LifeCycle), Key), value => value); 
```

或者

```
Dictionary<int, string> LifeCycleDict = Enum.GetValues(typeof(LifeCycle)).Cast<int>()
    .ToDictionary(Key => Key, value => ((LifeCycle)value).ToString()); 
```

或者

```
Dictionary<int, string> LifeCycleDict = Enum.GetValues(typeof(LifeCycle)).Cast<LifeCycle>()
    .ToDictionary(t => (int)t, t => t.ToString()); 
```

# postgresql - 使用 Vagrant/Chef-solo 设置 postgresql 密码

> ID：15324385
> 
> 赞同：1
> 
> 时间：2013-03-10T16:10:05.620
> 
> 标签：postgresql, vagrant, chef-solo

我`chef-solo`第一次尝试在我的开源项目[公寓](https://github.com/influitive/apartment)的 Vagrant 盒子上进行尝试，以便贡献者可以更轻松地启动和运行开发环境。

我到目前为止还无法实现的一件事是覆盖[本食谱](http://community.opscode.com/cookbooks/postgresql)`postgresql`中的食谱设置的默认密码

文档提到使用以下内容设置 json 配置：

```
postgresql: {
  password: {
    postgres: ''
  }
} 
```

我在[这里](https://github.com/influitive/apartment/blob/development/Vagrantfile#L68)完成了，但我似乎无法让它覆盖配方设置的默认加密密码。

我对厨师/流浪汉来说是*全新的*（截至今天），所以我什至不知道下一步应该去哪里。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T20:31:43.763

我克隆了你的 gem 并启动了 Vagrant（但是使用我已经下载的 Debian Squeeze 图像，并且禁用了除`postgresql`and之外的所有配方`postgresql::server`，并使用 PostgreSQL 8.4 而不是 9.1），似乎空密码是一个糟糕的选择，使用

```
 postgresql: {
    password: {
      postgres: 'foo'
    }
  } 
```

与命令一起使用，`PGPASSWORD="foo" psql --username=postgres -h localhost`所以我怀疑空密码有一些问题。

# php - Mysql 在 php 变量中获取 UPDATE-SET 的结果

> ID：15324386
> 
> 赞同：0
> 
> 时间：2013-03-10T16:10:13.467
> 
> 标签：php, mysql

我有以下mysql语句，有没有简单的访问方法`result_value`？我想在 php 变量中的查询之外获取当前语句中设置的值。我应该做mysql fetch array吗？

```
UPDATE results
SET result_value = IF('$logo_value' - result_tries < 0 OR '$logo_value' - result_tries = 0, 1, '$logo_value' - result_tries)
WHERE logo_id = '$logo_id'
AND user_id = '$user_id'
AND result_value = 0" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:15:21.657

Fetch 仅适用于“SELECT”查询，其他语句不返回行。您可以通过在例如之前选择它来获取此值。

```
SELECT IF('$logo_value' - result_tries < 0 OR '$logo_value' - result_tries = 0, 1, '$logo_value' - result_tries) AS result_value; 
```

（或者如果它被插入之后）

# php - php - 从 zip 文件夹中提取文件

> ID：15324387
> 
> 赞同：4
> 
> 时间：2013-03-10T16:10:23.570
> 
> 标签：php, zip, ziparchive

我有一个包含一个文件夹的 zip 文件，其中包含更多文件夹和文件，如下所示：

myfile.zip
-firstlevel
--folder1
--folder2
--folder3
--file1
--file2

现在，我想使用 PHPs ZipArchive 提取此文件，但没有“第一级”文件夹。目前，结果如下所示：

目的地/第一
级/文件夹1 目的地/第一级/文件夹2
...

我想要的结果如下所示：

目的地/文件夹1
目的地/文件夹2
...

我试过 extractTo，它产生第一个提到的结果，和 copy()，正如[这里](https://stackoverflow.com/questions/6682491/extract-files-in-a-zip-to-root-of-a-folder)所建议的，但这似乎根本不起作用。

我当前的代码在这里：

```
if($zip->open('myfile.zip') === true) {
        $firstlevel = $zip->getNameIndex(0);
        for($i = 0; $i < $zip->numFiles; $i++) {
                $entry = $zip->getNameIndex($i);
                $pos = strpos($entry, $firstlevel);
                if ($pos !== false) {
                        $file = substr($entry, strlen($firstlevel));
                        if(strlen($file) > 0){
                                $files[] = $file;
                        }
                }
        }
        //attempt 1 (extractTo):
        //$zip->extractTo('./test', $files);

        //attempt 2 (copy):
        foreach($files as $filename){
                 copy('zip://'.$firstlevel.'/'.$filename, 'test/'.$filename);
        }
} 
```

我怎样才能达到我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-26T11:38:18.460

看看我的 Quick Unzipper 脚本。不久前，我在将大型 zip 文件上传到服务器时写了这个供个人使用。这是一个备份，使用 FTP 可以永久保存 1,000 个文件，因此使用 zip 文件更快。我使用 Git 和所有东西，但我没有其他选择。我将此 php 文件放在我想要文件的目录中，并将 zip 文件放在同一目录中。对于我的脚本，它们都必须在同一个目录中运行。这是一种简单的方法来保护它以满足我的需要，因为我需要的所有东西都在同一个目录中。

快速解压器：[https ://github.com/incomepitbull/QuickUnzipper/blob/master/unzip.php](https://github.com/incomepitbull/QuickUnzipper/blob/master/unzip.php)

我链接了该文件，因为我没有展示 repo，只是显示解压缩的代码。使用现代版本的 PHP，您的设置中不应该包含任何内容。所以你不需要做任何服务器配置更改来使用它。

这是它使用的 ZipArchive 类的 PHP 文档：http: [//php.net/manual/en/class.ziparchive.php](http://php.net/manual/en/class.ziparchive.php)

没有任何包含的方法可以做你想做的事，这是一种耻辱。所以我会将文件解压缩到临时目录，然后使用另一个函数将*内容*复制到您想要的位置。所以在使用 ZipArchive 的时候，如果是未知的，则需要返回第一项来获取文件夹名称。如果该文件夹是已知的，即：每次都使用相同的讨厌的文件夹名称，那么您可以硬编码该名称。

我已经让它从索引中返回第一个项目。因此，如果您总是有一个包含 1 个文件夹的 zip，以及该文件夹中的所有内容，这将起作用。但是，如果您有一个 zip 文件，但没有将所有内容合并到 1 个文件夹中，它就会失败。我添加的代码将解决您的问题。您将需要添加更多逻辑来处理其他情况。

此外，当我们将旧目录提取到临时目录进行“处理”时，您仍然会留下旧目录。所以我也包含了删除它的代码。

注意：代码使用大量 if 来显示处理步骤，并打印一条消息以用于测试目的。您需要根据需要对其进行修改。

```
<?php
public function copyDirectoryContents($source, $destination, $create=false)
{
    if ( ! is_dir($source) ) {
        return false;
    }

    if ( ! is_dir($destination) && $create === true ) {
        @mkdir($destination);
    }

    if ( is_dir($destination) ) {
        $files = array_diff(scandir($source), array('.','..'));
        foreach ($files as $file)
        {
            if ( is_dir($file) ) {
                copyDirectoryContents("$source/$file", "$destination/$file");
            } else {
                @copy("$source/$file", "$destination/$file");
            }
        }
        return true;
    }
    return false;
}

public function removeDirectory($directory, $options=array())
{
    if(!isset($options['traverseSymlinks']))
        $options['traverseSymlinks']=false;
    $files = array_diff(scandir($directory), array('.','..'));
    foreach ($files as $file)
    {
        if (is_dir("$directory/$file"))
        {
            if(!$options['traverseSymlinks'] && is_link(rtrim($file,DIRECTORY_SEPARATOR))) {
                unlink("$directory/$file");
            } else {
                removeDirectory("$directory/$file",$options);
            }
        } else {
            unlink("$directory/$file");
        }
    }
    return rmdir($directory);
}

$file = dirname(__FILE__) . '/file.zip';        // full path to zip file needing extracted
$temp = dirname(__FILE__) . '/zip-temp';        // full path to temp dir to process extractions
$path = dirname(__FILE__) . '/extracted';       // full path to final destination to put the files (not the folder)

$firstDir = null;       // holds the name of the first directory

$zip = new ZipArchive;
$res = $zip->open($file);
if ($res === TRUE) {
    $firstDir = $zip->getNameIndex(0);
    $zip->extractTo($temp);
    $zip->close();
    $status = "<strong>Success:</strong> '$file' extracted to '$temp'.";
} else {
    $status = "<strong>Error:</strong> Could not extract '$file'.";
}

echo $status . '<br />';

if ( empty($firstDir) ) {
    echo 'Error: first directory was empty!';
} else {
    $firstDir = realpath($temp . '/' . $firstDir);
    echo "First Directory: $firstDir <br />";
    if ( is_dir($firstDir) ) {
        if ( copyDirectoryContents($firstDir, $path) ) {
            echo 'Directory contents copied!<br />';
            if ( removeDirectory($directory) ) {
                echo 'Temp directory deleted!<br />';
                echo 'Done!<br />';
            } else {
                echo 'Error deleting temp directory!<br />';
            }
        } else {
            echo 'Error copying directory contents!<br />';
        }
    } else {
        echo 'Error: Could not find first directory';
    }
} 
```

# gwt - 当用户取消关闭浏览器窗口时如何恢复气氛连接

> ID：15324391
> 
> 赞同：1
> 
> 时间：2013-03-10T16:10:57.513
> 
> 标签：gwt, atmosphere

我们的应用程序使用大气作为彗星实现，我们希望通过提示用户“您确定”对话框来实现用户可以选择在浏览器窗口关闭后留在站点内的功能。

具体来说，问题源于这样一个事实：当用户试图关闭浏览器窗口时，当显示确认对话框时，无论用户要选择什么，都会向环境服务器触发断开事件。

我们正在为 GWT 使用气氛，我们尝试在资源选项上使用 resumeOnBroadcast，但没有运气。

而且我们还试图在关闭事件触发之前拦截它，也失败了。

所以有人可以帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:28:57.923

看一下`onClose(AtmosphereResponse)`请求处理程序。

```
var socket = $.atmosphere;
var request = new $.atmosphere.AtmosphereRequest();

request.onClose(response){
    //handle the close here
}
var subSocket = socket.subscribe(request);
subSocket.push(data); 
```

这[在此处](https://github.com/Atmosphere/atmosphere/wiki/jQuery.atmosphere.js-API)记录。这是在客户端。

# codeigniter - 在 Codeigniter 中获取资产给出错误。

> ID：15324395
> 
> 赞同：0
> 
> 时间：2013-03-10T16:11:32.257
> 
> 标签：codeigniter

我试图在 Codeigniter 中建立一个资产助手。我在应用程序/帮助程序中创建了以下文件：

**资产助手.php**

```
<?php

function asset_url(){
   return base_url().'assets/';
}

?> 
```

然后我将这个助手导入到我的控制器中，如下所示：

```
$this->load->helper('asset'); 
```

当我想在我的“html”中使用驴子时，我会执行以下操作：

```
<link href="<?=asset_url()?>/css/bootstrap.css" rel="stylesheet" media="screen"> 
```

我的目录结构是：

```
application
system
assets
-- js
-- imgs
-- css 
```

当我的程序运行时，我收到以下错误：

```
Parse error: syntax error, unexpected T_VARIABLE, expecting T_FUNCTION in /Applications/XAMPP/xamppfiles/htdocs/editor/application/controllers/pages.php on line 5 
```

第 5 行是我尝试调用asset_url() 的地方，如下所示： /css/bootstrap.css" rel="stylesheet" media="screen">

我哪里错了，我所有的代码接缝都是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:17:55.943

```
function asset_url(){
   $CI =& get_instance();
   $ci->load->helper('url');
   return $ci->base_url().'assets/';
} 
```

您必须获取 CI 实例才能在帮助程序上加载或使用核心功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T08:58:30.357

这是 CodeIgniter 的资产助手。资产助手还具有在数组中传递名称时将文件合并到一个文件中的功能。因此将有助于减少您网站中的 HTTP 请求数量。

[http://www.thephpcode.com/blog/view/css-and-javascript-asset-helper-for-codeigniter.html](http://www.thephpcode.com/blog/view/css-and-javascript-asset-helper-for-codeigniter.html)

# google-drive-api - right-click-then-open-with 有效，但简单的左键单击无效

> ID：15324402
> 
> 赞同：0
> 
> 时间：2013-03-10T16:12:14.820
> 
> 标签：google-drive-api

在过去几天的某个时候，我的应用程序的 Google Drive 集成中似乎出现了一个错误，尽管我没有进行任何更改，并且使用情况保持相当稳定。

当您在云端硬盘中左键单击应用程序的一个文档时，会打开一个新的 about:blank 选项卡，其中显示应用程序的图标和文本“抱歉，打开此文件时出错。请重试。[XXXXX]”其中 [XXXXX] 是每次似乎都不同的短字符串。创建新的工作正常，如果您使用右键单击菜单并打开它也可以正常工作。
所有这一切让我认为 Google Drive 主界面的最新 javascript 更新中存在错误。

在调试方面，在 apiconsole 中，该应用程序具有...

*   未选中启动 oauth2 选项
*   未选中允许多个文件选项
*   已检查移动浏览器支持
*   注册了 24 个 MIME 类型、61 个主要扩展和 1 个辅助扩展

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:11:17.323

如果这是 Claudio 提到的错误，我相信 Google Drive SDK 文档也需要更新，因为仅针对“打开方式”选项描述了“打开”操作：

[https://developers.google.com/drive/integrate-open](https://developers.google.com/drive/integrate-open)

我想知道当注册的 mime 类型可以由多个已安装的应用程序管理时如何触发正确的操作？有没有办法设置默认打开操作 - 或者创建它的应用程序将用作默认操作？如果您通过键入 url（而不是来自 UI Drive UI 创建操作）访问应用程序 Web 并将内容保存在 Drive 上会发生什么，因为您可能已经被授权这样做？

# javascript - 可展开列表折叠隐藏 div 元素 (jQuery)

> ID：15324406
> 
> 赞同：0
> 
> 时间：2013-03-10T16:12:44.017
> 
> 标签：javascript, jquery, html, css

我在一个网站上工作，你可以在[这里](http://drue.co.uk/1site/index.html)临时找到。您会注意到，如果您单击任何可扩展元素，它会完美运行，但是当按下“全部折叠”按钮时，持有赞成和反对图像的 div 元素会从所有列表项中消失，我无法弄清楚我的内容m做错了（我是jQuery n00b！），js代码如下：

```
/* Full list expansion functionality */
$('#expandList')
.unbind('click')
.click( function() {
    $('.collapsed').addClass('expanded');
    $('.collapsed').children().show('medium');
})
/* Full list collapse functionality */
$('#collapseList')
.unbind('click')
.click( function() {
    $('.collapsed').removeClass('expanded');
    $('.collapsed').children().hide('medium');
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:17:18.723

[`.children()`](http://api.jquery.com/children/)没有选择器会选择*所有*孩子，包括`<div>`带票的 s。

在单个项目的切换脚本中，您正在使用

```
$(this).children('ul').toggle('medium'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:27:30.413

```
$('.collapsed').children().hide('medium'); 
```

这行代码找到这个元素中的所有子元素并隐藏它们，所以它包含了你的 div

看HTML

```
<ul id="expList">
 <li class="collapsed expanded">
       <div id="upvoted" style="display: inline-block;"><a href="#"><img src="img/votes/upvote.png" alt="upvote" width="14" height="14"></a></div>
      <div id="downvoted" style="display: inline-block;"><a href="#"><img src="img/votes/downvote.png" alt="downvote" width="14" height="14"></a></div> | SNOW KAYAKING
  //You want to hide only this                      
  <ul style="display: block;">

  </ul>
</li> 
```

看你的代码

```
 /* Full list collapsion functionality */
    $('#collapseList')
    .unbind('click')
    .click( function() {
        $('.collapsed').removeClass('expanded');
        $('.collapsed').children().hide('medium');
    }) 
```

您可以更改代码以仅选择`UL`元素并将其隐藏：

```
$('.collapsed ul').hide('medium'); 
```

或者

```
$('.collapsed').children().not("#upvoted,#downvoted").hide('medium'); 
```

# jquery - Jquery 代码产生不良结果

> ID：15324407
> 
> 赞同：0
> 
> 时间：2013-03-10T16:12:50.940
> 
> 标签：jquery, toggle

我有一个常见问题解答页面，我希望问题的答案从问题下方滑落。我还希望在单击问题之前出现一个加号，并在答案可见时出现一个减号。不幸的是，我的 jquery 代码更改了所有问题的加号/减号，而不仅仅是单击的问题。这是我的代码：

```
$('.trigger').click(function() {
   $(this).children('.hidden').toggle('slow', function() {
       if ($(this).is(':visible')) {
            $('li p a').children('.plus').hide();
            $('li p a').children('.minus').show();
        } else {
            $('li p a').children('.plus').show();
            $('li p a').children('.minus').hide();
        }
   });
    return false;
 }); 
```

和一个jsfiddle示例：

[jsfiddle](http://jsfiddle.net/NYZa3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:19:22.727

你应该确定女巫的“减号”和“加号”是子级的。

```
$('.trigger').click(function() {
    var tis = $(this);
    tis.children('.hidden').toggle('slow', function() {
       if ($(this).is(':visible')) { // $(this) in "this" case is refer to the children!
            tis.find('.plus').hide();
            tis.find('.minus').show();
        } else {
            tis.find('.plus').show();
            tis.find('.minus').hide();
        }
   });
    return false;
 }); 
```

我知道这段代码需要更清晰，但它知道 :-) 如果您要在 JQuery 操作中使用很多，我总是鼓励缓存 DOM 对象。一个非常基本的缓存是创建一个临时变量并将所有 DOM（例如 $(this)）放入其中，以便您可以在操作的每个步骤中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T16:21:55.227

您当前的选择器`$('li p a')`在整个文档中搜索锚点，这些锚点是 li 的子项，而 li 是段落的子项。您需要确保仅在`.trigger`元素内进行搜索。

见[http://api.jquery.com/find/](http://api.jquery.com/find/)

```
$('.trigger').click(function() {
   var trigger = $(this); // Store the clicked object in a variable and convert to jQuery object
   trigger.children('.hidden').toggle('slow', function() {
       if ($(this).is(':visible')) {
            trigger.find('.plus').hide(); // trigger.find() allows us to search using our CSS selector only within the trigger object.
            trigger.find('.minus').show();
        } else {
            trigger.find('.plus').show();
            trigger.find('.minus').hide();
        }
   });
    return false;
 }); 
```

[http://jsfiddle.net/NYZa3/1/](http://jsfiddle.net/NYZa3/1/)

也可以这样写：

```
$('.trigger').click(function() {
   var trigger = $(this); // Store the clicked object in a variable and convert to jQuery object
   trigger.children('.hidden').toggle('slow', function() {
       trigger.find('.plus, .minus').toggle();
   });
   return false;
 }); 
```

[http://jsfiddle.net/NYZa3/4/](http://jsfiddle.net/NYZa3/4/)

或者整个东西可以被链接起来（`.plus`and`.minus`将在单击后立即切换，而不是在显示/隐藏动画完成后切换）：

```
$('.trigger').click(function() {
   $(this)
   .children('.hidden')
   .toggle('slow')
   .siblings('p')
   .find('.plus, .minus')
   .toggle();
    return false;
}); 
```

[http://jsfiddle.net/NYZa3/5/](http://jsfiddle.net/NYZa3/5/)

# php - 如何在没有 --prefer-source 的情况下使用 Composer 克隆存储库？（使用 Symfony 2）

> ID：15324411
> 
> 赞同：7
> 
> 时间：2013-03-10T16:13:44.967
> 
> 标签：php, symfony, composer-php

场景：我正在使用 Symfony 2.2。在我的所需包列表中也是我的 github 存储库之一，我们称它为“TestLib”。

我知道我可以将 github url 定义为 Symfony 的 composer.json 中的附加存储库，以通过 Composer 从 Github 下载“TestLib”。

问题：我无法提交到“TestLib”存储库，因为“TestLib”目录中没有本地 .git 目录。我猜作曲家是从 Github 获取一个 zip 而不是克隆它。

所以我的问题是：有没有办法在 Symfony 的 composer.json 中指定 Composer 应该克隆 TestLib？

问题 2：也许我的工作流程是错误的 - 所以如果你也有这种情况 - 你如何处理这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-10T18:31:19.583

添加`@dev`到包版本也会克隆存储库。

```
{
  "require": {
    'package': '*@dev'
  }
} 
```

也可以设置`source`为首选项`composer.json`

```
{
 "config": {
     "preferred-install": "source"
 }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-10T16:31:49.117

如果我注意到供应商有问题，我通常会做的是`rm -rf vendor/foo/bar`删除它，然后我运行`composer install --prefer-source`以将其作为 git repo 取回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-28T13:09:53.597

我所做的是将我的 github 存储库添加到 packagist.org 然后我这样做了：

```
composer require malhal/createdby dev-master --prefer-source 
```

这似乎将 require 行添加到 composer.json 并将其作为 git repo 获取，不幸的是，这只能工作一次，因此如果您无法重用 composer.json 进行新安装并且需要删除 require行，然后记得再次执行相同的命令。此命令还下载 git 存储库，您不必再进行作曲家更新。

# html - 按钮链接无处可去

> ID：15324414
> 
> 赞同：0
> 
> 时间：2013-03-10T16:14:11.620
> 
> 标签：html, twitter-bootstrap

我正在尝试在 Modal 中创建一个按钮，将您带到一个新页面，但它不会更改页面。

这是全部的pastebin - [http://pastebin.com/2TBgYpbv](http://pastebin.com/2TBgYpbv)

但问题是这里的代码 -

```
<button href="manager.php?staffname=<?php echo"$staffname";?>&ban=true" class="btn btn-primary">Confirm</button> 
```

请解释为什么它没有重定向

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:18:33.537

将按钮更改为锚点。保留 css 类等。或者，添加一个按钮单击处理程序来更改 window.location。我建议第一个选项。

按钮标签没有 href 属性。阅读有关[w3schools按钮的更多信息](http://www.w3schools.com/tags/tag_button.asp)

# javascript - Meteor 中的服务器端数据验证

> ID：15324424
> 
> 赞同：6
> 
> 时间：2013-03-10T16:15:03.810
> 
> 标签：javascript, validation, meteor, backend

我的**客户端**文件中有一个表单和一个提交功能：

```
function submitme () {
    var message = $('#daform').serializeJSON();
    message.owner = Meteor.user().username;
    if(!message.description || !message.location.lat || !message.location.lng || !message.mysex || !message.yoursex) {
      return;          
      }
      else
      {
          lists.insert(message);
          console.log("Submitted!");
          $('#daform')[0].reset();
      }
} 
```

虽然效果很好 - 它是**客户**端验证 => 不安全。

如何在我的服务器文件中实施“备份”验证检查？（+额外问题：我如何设置一个计时器，以便在提交后需要等待 X 秒才能重新提交？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:30:26.830

您可以使用[http://docs.meteor.com/#deny](http://docs.meteor.com/#deny)（您可以使用允许，但将验证内容放在单独的拒绝中可能更容易），因为如果不应该插入它，拒绝将覆盖允许：

它就像插入之前服务器上的备份方法一样工作。

与您的消息集合

**服务器 Js**

```
message.deny({
    insert: function (userId, doc) {
        return (!doc.description || !doc.location.lat || !doc.location.lng || !doc.mysex || !doc.yoursex);
    },
    update: function (userId, docs, fields, modifier) {
        return (!doc.description || !doc.location.lat || !doc.location.lng || !doc.mysex || !doc.yoursex);
    }
); 
```

**注意**：从拒绝返回 false 表示不拒绝。要拒绝更新，您必须返回 true。

# javascript - 用 Box2dweb 和 CreateJS 做一个关节（距离，Revolute..）

> ID：15324425
> 
> 赞同：1
> 
> 时间：2013-03-10T16:15:20.917
> 
> 标签：javascript, html, createjs, box2dweb

我发现这个关于在 CreateJS 中使用 Box2dweb 的酷教程[http://gotoandlearn.com/play.php?id=176](http://gotoandlearn.com/play.php?id=176) 我正在尝试做任何联合但没有运气，请帮忙。

# java - 查找不相交集的数量

> ID：15324430
> 
> 赞同：0
> 
> 时间：2013-03-10T16:15:35.017
> 
> 标签：java, algorithm, data-structures, set

我试图找到给定**N**个集合和**M**个关系的不相交集合的数量。例如，给定一个关系“ *ij* ”，我必须合并包含这两个元素的集合。M 和 N 可以大到 100000。

我尝试使用**ArrayList of Hashsets**。但无法有效实施。这是我的代码：

```
import java.io.InputStreamReader;
import java.io.BufferedReader;
import java.util.*;
import java.lang.Object;

class fire
{
public static void main(String[] args)throws Exception
{
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));                               
    int n,m;
    int t=Integer.parseInt(br.readLine());
    String st[];
    while(t-->0)
    {
        st=br.readLine().split(" ");
        n=Integer.parseInt(st[0]);
        m=Integer.parseInt(st[1]);
        ArrayList<HashSet<Integer>> list = new ArrayList<HashSet<Integer>>(n+1);

        for(int i=0;i<n+1;i++)
        {
            list.add(i, new HashSet<Integer>());
            list.get(i).add(i);
        }

        int a,b;
        while(m-->0)
        {
            st=br.readLine().split(" ");
            a=Integer.parseInt(st[0]);
            b=Integer.parseInt(st[1]);
            if(list.get(a).contains(a))
            {
                    if(list.get(b).contains(b))
                    {
                        Iterator<Integer> it = list.get(b).iterator();
                        while(it.hasNext())
                        {
                            list.get(a).add(new Integer((int)it.next()));
                        }
                        list.get(b).clear();                
                    }
                    else
                    {
                        for(int i=1;i<n+1;i++)
                            if(list.get(i).contains(b))
                            {
                                if(i!=a)
                                {
                                    Iterator<Integer> it = list.get(i).iterator();
                                    while(it.hasNext())
                                        list.get(a).add(new Integer((int)it.next()));
                                    list.get(i).clear();
                                }
                                break;
                            }
                    }
            }
            else
            {
                for(int i=1;i<n+1;i++)              
                    if(list.get(i).contains(a))
                    {
                        if(list.get(b).contains(b))
                        {
                            Iterator<Integer> it = list.get(b).iterator();
                            while(it.hasNext())
                                list.get(a).add(new Integer((int)it.next()));
                            list.get(b).clear();
                        }
                        else
                        {
                            for(int j=1;j<n+1;j++)
                                if(list.get(j).contains(b))
                                {
                                    if(i!=j)
                                    {
                                        Iterator<Integer> it = list.get(j).iterator();
                                        while(it.hasNext())
                                            list.get(a).add(new Integer((int)it.next()));
                                        list.get(j).clear();
                                    }
                                    break;
                                }
                        }
                        break;
                    }
            }
        }
        int size=0,prod=1;
        int num=0;
        for(int i=1;i<n+1;i++)
        {
            num=list.get(i).size();
            if(num!=0)
            {
                prod*=num;
                size++;
            }
        }
        System.out.println(size+" "+prod);
    }   
}
}; 
```

这是 Codechef 的一个问题。解决方案是正确的，但我正在为这个问题获得 TimeLimitExceeded。我应该努力改进此代码还是必须使用不同的数据结构？任何想法都会非常感激:)。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:17:19.897

你应该使用[不相交的集合森林](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)数据结构来解决这个问题。非常容易实施并且非常高效。

# c++ - 用变量初始化缓冲区数组的长度

> ID：15324438
> 
> 赞同：0
> 
> 时间：2013-03-10T16:16:33.190
> 
> 标签：c++, c

我正在从套接字读取缓冲区字节，但我不知道如何使用长度信息初始化缓冲区数组。

```
uint32_t len;
int lengthbytes = 0;
int databytes = 0;

// receive the length info of an image data
lengthbytes = recv(clientSocket, (char *)&len, sizeof(len), 0);

// convert hexadecimal data to length in bytes
len = ntohl(len);

// ????? how to initialize the buffer array with the length info ????
char buf[len];   -----> this is illegal in C  

// read the image data 
databytes = recv(clientSocket, buf, sizeof(buf), 0); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T16:17:38.023

```
len = ntohl(len);
char buf[len];  //----> this is illegal in C 
```

这在 C99 中有效，称为*变长数组*。如果您不使用 C99，请使用`malloc`来分配数组（并声明`buf`为 a `char *`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T16:18:22.933

当您声明时，`buf`您声明了一个*可变长度数组*。这在 C（来自 C99 标准）中是合法的，但在 C++ 中是非法的。在 C++ 中，您可以改为使用`std::vector`：

```
std::vector<char> buf(len); 
```

您也可以在调用中使用此向量`recv`：

```
databytes = recv(clientSocket, &buf[0], buf.size(), 0); 
```

* * *

要在循环中使用向量，您有两种选择：

1.  在循环外声明变量，并在需要时使用[`clear`](http://en.cppreference.com/w/cpp/container/vector/clear)and [`resize`](http://en.cppreference.com/w/cpp/container/vector/resize)：

    ```
    std::vector<char> buf;

    // ...

    for (int i = 0; i < number_of_images; i++)
    {
        std::cout << "Fetching image #" << (i + 1) << '\n';

        // Get the image length
        size_t length = get_image_length();

        buf.clear();  // Clear the buffer
        buf.resize(length);  // Set the size to the image length

        // Receive the image
        databytes = recv(clientSocket, &buf[0], buf.size(), 0);
    } 
    ```

2.  在循环内声明向量是局部的：

    ```
    for (int i = 0; i < number_of_images; i++)
    {
        std::cout << "Fetching image #" << (i + 1) << '\n';

        // Get the image length
        size_t length = get_image_length();

        std::vector<char> buf(length);

        // Receive the image
        databytes = recv(clientSocket, &buf[0], buf.size(), 0);
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T16:17:41.887

您必须使用动态内存分配；

```
char* buf = new char[len]; 
```

如果你用完了`buf`，别忘了调用`delete`释放内存。

```
delete[] buf; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T16:18:13.140

`malloc`请通过ie分配缓冲区`buf = malloc(sizeof(char) * len);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T16:18:17.890

你可以用 new 或 malloc 来做。完成后不要忘记删除缓冲区！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-10T16:18:39.577

您可以使用`std::vector<char>`, 然后将其`data()`用作数组缓冲区：

```
#include <vector>
std::vector<char> buf(len);
databytes = recv(clientSocket, buf.data(), buf.size(), 0); // access underlying char array
databytes = recv(clientSocket, &buf[0], buf.size(), 0);    // as above, C++03 version 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-10T16:34:54.370

`tempbuf`我在 C++ 中专门为此目的编写了一个类。

你可以在这里找到它：
[small_lib.cpp](https://github.com/ruben2020/codequery/blob/master/querylib/small_lib.cpp)
[small_lib.h](https://github.com/ruben2020/codequery/blob/master/querylib/small_lib.h)

这两个文件是 MIT 许可的，因此您可以随意使用它。

如何使用这个类？

```
tempbuf buf(len);
databytes = recv(clientSocket, buf.get(), buf.size(), 0); // if you want char* returned
databytes = recv(clientSocket, buf.constchar(), buf.size(), 0); // if you want constchar* returned 
```

猜猜我为什么要写这门课？您不需要删除或解除分配动态分配的内存，因为它是在类的析构函数中完成的。

为什么我没有使用`std::auto_ptr`？因为据我了解，这仅适用于非数组，因为它支持`new X`但不支持`new X[10]`.

# c# - 移动图形轴或在任意点获取子图形？

> ID：15324440
> 
> 赞同：0
> 
> 时间：2013-03-10T16:16:41.437
> 
> 标签：c#, winforms, drawing

我经常需要在对象中绘制项目，`Graphics`而我一直这样做的方式是拥有一个`DrawItem`接收`Graphics`对象和一个`offsetX`和`offsetY`参数的函数，这些参数确定将在哪个点绘制项目。

问题是，`DrawItem`如果有一种方法`Graphics`可以给我一个 X 和 Y 轴零点在其他点的图形版本，那么里面的代码看起来会好很多，比如`myGraphics.DisplacedGraphics(offsetX, offsetY)`. 这样，我只需将此`Graphics`对象传递给我的`DrawItem`方法，该方法不需要接收其他两个参数。有没有这样的功能或最接近的东西是什么？

**编辑：**与此同时，这是我写的，但似乎是一个基本要求，我仍然希望已经存在这样的功能（我仍然需要添加一堆方法，但这些都是我现在所需要的）（注意`DisplacedCanvas`方法）：

```
public class Canvas
{
    private readonly Graphics _Graphics;
    private readonly int _OriginX = 0;
    private readonly int _OriginY = 0;

    public Canvas(Graphics graphics, int originX, int originY)
    {
        _Graphics = graphics;
        _OriginX = originX;
        _OriginY = originY;
    }

    public Canvas(Graphics graphics) : this(graphics, 0, 0) { }

    public SizeF MeasureString(string text, Font font)
    {
        return _Graphics.MeasureString(text, font);
    }

    public void FillRectangle(Brush brush, int x, int y, int width, int height)
    {
        _Graphics.FillRectangle(brush, _OriginX + x, _OriginY + y, width, height);
    }

    public void DrawString(string s, Font font, Brush brush, float x, float y)
    {
        _Graphics.DrawString(s, font, brush, _OriginX + x, _OriginY + y);
    }

    public Canvas DisplacedCanvas(int x, int y)
    {
        return new Canvas(_Graphics, _OriginX + x, _OriginY + y);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:00:05.577

我很确定该[`TranslateTransform()`方法](http://msdn.microsoft.com/en-us/library/6a1d65f4.aspx)会满足您的要求。

> 原点通常是绘图表面的左上角。平移操作包括将变换矩阵乘以一个矩阵，该矩阵的平移部分是 dx 和 dy 参数。此方法通过将平移矩阵添加到变换矩阵来应用平移。

因此，如果您希望新的原点位于 100、50，那么您将`graphics.TranslateTransform(100, 50)`在绘制图像之前先调用。

# clojure - leiningen uberjar 不添加清单属性

> ID：15324442
> 
> 赞同：2
> 
> 时间：2013-03-10T16:17:04.713
> 
> 标签：clojure, leiningen

我没有成功尝试运行[Instant-pdf](https://github.com/yogthos/instant-pdf)

```
lein uberjar
cd target
java -jar instant-pdf-0.2.0-standalone.jar
no main manifest attribute, in instant-pdf-0.2.0-standalone.jar 
```

我现在必须手动编辑 jar 吗？

我正在使用 OpenJDK 7.u13-x86_64。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:50:21.240

[Instant-pdf 的 project.clj](https://github.com/yogthos/instant-pdf/blob/master/project.clj)缺少`:main`设置，我敢打赌这就是为什么它没有在 jar 清单中设置主类的原因。但是，该项目也没有在源代码的任何地方指定 main 方法，因此您必须自己添加一个。有关[使用](https://github.com/technomancy/leiningen/blob/stable/doc/TUTORIAL.md#running-code)`:main`. _

* * *

@Yogothos 指出，使用[Leiningen 的 Ring 插件](https://github.com/weavejester/lein-ring)可以解决这个问题（引用他的评论如下）：

> 该项目应使用`lein ring uberjar`而不是`lein uberjar`. Ring插件负责创建main。

# html - 如何在 CSS 中将 span 元素居中？

> ID：15324452
> 
> 赞同：3
> 
> 时间：2013-03-10T16:17:46.160
> 
> 标签：html, css

我有三个`<span>`元素要一个接一个地水平放置。我还需要中间元素位于页面的中心（水平方向），但`margin:auto; width: 100px`由于它是`<span>`. 如果我成功了`<div>`，就会有换行符。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T16:32:58.123

我会使用三个相同`span`的 100px 宽度的元素，`display: inline-block`嵌套在一个`div`设置`text-align`为中心的元素中：http: [//jsfiddle.net/e9sru/](http://jsfiddle.net/e9sru/)

**HTML：**

```
<div id="container">
    <span class="inner">
        <div class="overflow">Lorem ipsum dolor est mori. I am overflowing but still to the left of number two</div>
    </span>
    <span class="inner">Two</span>
    <span class="inner">Three</span>
</div> 
```

**CSS：**

```
#container {
    text-align: center;
}

.inner {
    display: inline-block;
    position: relative;
}

.overflow {
    float: right;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:30:46.917

如果您创建一个 div 并将其设置为 100% 的宽度。在这个潜水中，您创建了另外 3 个 div；每个元素一个。如果您将每个元素的宽度设置为 33.3%，那么它将相应地居中中间的一个和另一个 2。同样，您可以添加边距以减少 33.3%。例如，margin: 0 3% 0 3% on center div 会给它左右 3% 的边距。从 div 宽度的大小减去 6%，因为它的总和必须始终为 100%

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T16:33:09.030

`span`是一个内联元素，所以它的行为不像`div`是一个块元素。

我建议混合使用浮动和对齐中心。

例子：

**HTML**

```
<span class="block element3">ELEMENT3</span>
<span class="block element1">ELEMENT1</span>
<span class="block element2">ELEMENT2</span> 
```

**CSS**

```
.block {
    display: block;
    width: 100px;
}
.element3 {
    float: right;
    background-color: red;
}
.element2 {
    float: left;
    background-color: green;
}
.element1 {
    text-align: center;
    background-color: blue;
    width: auto;
} 
```

**更新：**

[http://jsfiddle.net/YUCv2/1/](http://jsfiddle.net/YUCv2/1/)

# tcp - 传输层和数据链路层的滑动窗口

> ID：15324460
> 
> 赞同：1
> 
> 时间：2013-03-10T16:18:15.427
> 
> 标签：tcp, sliding-window

为什么我们在传输层和数据链路层都需要滑动窗口机制？TCP 有自己的滑动窗口机制来管理流和错误。此外，数据链路层也有类似的机制。这不是多余的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:29:17.660

TCP 和 UDP 的错误控制是覆盖每个数据包的单个校验和。如果失败，则必须丢弃整个数据包，然后，当接收方超时后无法确认接收到数据时，必须重新发送数据。即使在网络路径上的两个路由器之间的一条数据链路上引入了数据损坏，数据也必须从原始发送方重新发送，并再次跨越多个网络跃点。这是相当昂贵的，因此这种数据完整性检查适用于错误率很低并且重传成本分摊在许多成功传输的数据包上的情况。此外，简单的校验和不是那么健壮，它会遗漏一些错误。

某些类型的网络链接的错误率可能太高，以至于 IP 传输协议无法有效处理，因此它们应该提供自己的错误检测层（甚至前向纠错）以使 IP 正常工作远远超过他们。最初，众所周知，（模拟）调制解调器引入了这种完整性保护（例如[V.42](http://en.wikipedia.org/wiki/List_of_ITU-T_V-Series_Recommendations)），因为它们的速度越来越高。我不太了解这些天流行的各种物理链接的细节，但我会说一个或多个[DOCSIS是一个不错的选择](http://en.wikipedia.org/wiki/DOCSIS)、ADSL、wifi 和/或 3G/4G/LTE 采用了这种技术。我还要指出，我认为所有这些都发生在物理层（第 1 层），而不是数据链路层（第 2 层），尽管可能对此进行辩论，因为 OSI 层模型永远不会完全适合真实的网络世界。

这种错误控制并不一定意味着物理层（或数据链路层，如果您愿意）具有任何类型的滑动窗口。它可能具有为最不可靠的物理链路类型设计的一些更复杂的方案，但所有最简单的错误检查类型都没有：例如，PPP 和以太网[FCS](http://en.wikipedia.org/wiki/Frame_check_sequence)。使用 FCS，就像使用 UDP 校验和一样，损坏的数据包将被简单地丢弃，并且协议没有用于重新传输失败帧的内存或窗口，并且它不会向发送者确认成功接收的帧（即在任何类型的滑动窗口协议中都需要推进窗口）。

尽管如此，传输层错误控制机制仍然是必不可少的，因为它是[端到端的](http://en.wikipedia.org/wiki/End-to-end_principle)。只有在这一层才会捕获传输介质引入的错误以外的错误。IP 传输协议的校验和将捕获发生在路由器内部的损坏、由不能或不能捕获错误的物理介质引入的错误，或者主机设备或设备驱动程序中的错误。

那是为了控制错误。关于流量控制也可以这样说：虽然可以存在一些复杂的方案来处理各种物理链路，否则这些物理链路会导致 IP 无法正常工作，但大多数简单方案不涉及任何类型的滑动窗口。例如，当通过[RS-232](http://en.wikipedia.org/wiki/RS-232)串行链路进行通信时，流控制是一条简单的二进制控制线：当它被断言时，另一端发送数据，当它被取消断言时，另一端暂停。它不会记住窗口中任何先前传输的数据，也不会收到确认。

最后一条评论：UDP 是一种不可靠的传输协议。使用 UDP 时，应用程序负责管理超时和重传。单个应用程序处理它的程度有很多变化。有些对它很糟糕。由于（前向）纠错至少是由一些最臭名昭著的不可靠物理链路层提供的，因此至少这种情况在 UDP 中是可以容忍的，尽管不可靠，但“通常”可以工作。对于一些非 TCP、非 UDP 传输协议也可以这样说。

# visual-c++ - 在 VC++ 表单应用程序中将 MsAccess 数据检索到 ComboBox

> ID：15324473
> 
> 赞同：0
> 
> 时间：2013-03-10T16:18:47.373
> 
> 标签：visual-c++, ms-access, combobox

嗨，我正在尝试从 Ms Access 数据库中检索数据`VC++`。由于我是新手`VC++`，请帮助我。

这是我到目前为止编写的代码。

```
System::Data::DataSet^ ds=gcnew System::Data::DataSet();

        OleDbConnection ^ con=gcnew OleDbConnection("Provider= Microsoft.ACE.OLEDB.12.0;Data source=dbmc.accdb; Persist Security Info=True");
        OleDbCommand^ com =gcnew OleDbCommand();
        OleDbDataReader^ myReader;
        com->CommandText ="SELECT name FROM Table1";
        com->Connection = con;
        con->Open();
        try
        {
            myReader=com->ExecuteReader();
            while(myReader->Read())
            {
                String^ vName = myReader->GetString('name');
                comboBox1->Items->Add(vName);
                myReader->Close();
            }
        }
        catch(Exception^ex)
        {
            MessageBox::Show(ex->Message);
        } 
```

当我运行这个程序时，我得到一个错误`"Index Out of Bound"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:24:04.333

该`GetString()`方法将列号的整数作为参数，而不是列名（完整文档请参见[此处](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getstring.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1)）。

换行

`String^ vName = myReader->GetString('name');`

到

`String^ vName = myReader->GetString(0);`

# .net - 指定多个 RelativeSource.AncestorTypes

> ID：15324474
> 
> 赞同：1
> 
> 时间：2013-03-10T16:18:50.347
> 
> 标签：.net, wpf, xaml, binding

执行以下操作是否有简单的技巧？

```
<Binding RelativeSource="{RelativeSource AncestorType=UserControl OR Window}" Path="Tag" /> 
```

我只是想绑定到顶级父级的 Tag 属性，它可以是 UserControl 或 Window。但是请注意，从当前控件到父控件的距离是任意的，所以我不能使用`AncestorLevel`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:43:41.587

好吧，如果它是你想要的黑客:)

```
public partial class MainWindow : ITopLevel
{
    public MainWindow()
    {
        InitializeComponent();

        Tag = "I'm at the top";
    }
}

public interface ITopLevel
{
    // optionally specify Tag in the interface, it will work either way
    object Tag { get; set; }
}

<Grid>
    <Button Content="{Binding Path=Tag, RelativeSource={RelativeSource 
            FindAncestor, AncestorType={x:Type Demo:ITopLevel}}}"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T08:36:57.580

您可以只使用`MultiBinding`而不是`Binding`为此，然后做一个简单`IMultiValueConverter`的查找“值”中不为空的第一项（或`DependencyProperty.UnsetValue`，在使用可视化树时往往会弹出。

这是一种不那么老套的方法，对我来说非常有效。

# python - 如何制作字体表（用于python roguelike）

> ID：15324475
> 
> 赞同：2
> 
> 时间：2013-03-10T16:19:05.853
> 
> 标签：python, fonts, roguelike

我继续在我的 python roguelike 上取得进展，并深入研究了本教程：[http](http://roguebasin.roguelikedevelopment.org/index.php?title=Complete_Roguelike_Tutorial,_using_python%2Blibtcod) ://roguebasin.roguelikedevelopment.org/index.php?title=Complete_Roguelike_Tutorial,_using_python%2Blibtcod 。我还制作了自己的字体用于这个游戏，但我不知道该怎么做。这是我当前使用的字体图像的链接：http: [//i.imgur.com/j6FdNky.png](http://i.imgur.com/j6FdNky.png)。在 python 代码中，它将自定义字体设置为“arial10x10.png”，即该字体图像。我尝试用自己的字体制作图像，但它真的被扭曲了。

有谁知道我如何实现自己的字体？另外，我使用的是 libtcod，而且我只有自己的 .ttf 格式的字体。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:00:43.300

要以 libtcod 期望的方式将 TrueType 字体渲染为位图，您应该使用单独的库——字体渲染是一项非常复杂的任务。FreeType 是一个非常流行的字体渲染开源库。您可以在此处找到 Python 接口：[http](http://code.google.com/p/freetype-py/) ://code.google.com/p/freetype-py/ 。您只需要在开发 roguelike 时使用的工具中使用 FreeType，而不需要在实际游戏中使用。

首先，确定你将在你的 roguelike 中使用哪些角色。确定如何在字体表上布置这些字符。您也可以简单地选择使用与您发布的图像中的布局相同的布局——这是一张有 32 列的表格，从空格字符（字符 32）开始。

使用您的字体渲染库，以所需的大小单独渲染每个字符。注意为每个生成的大小 - 例如，“。” 即使在相同的字体大小下，它也会很小，而 'w' 会很大。您不仅要计算高度，还要计算基线以上的高度和基线以下的高度。（例如：如果 'A' 和 'g' 都是 16 像素高，那么您可能仍然需要一个高于 16 像素的矩形才能在其中正确对齐——基线到基线。）找到最小的矩形将容纳所有这些大小的大小——这是字体表中每个单元格的大小。

一旦你知道你的工作表有多大，再通过所有需要的字母来构建你的位图，把每个字母放在它的单元格中。就 y 定位而言，所有基线都必须对齐。如果某些字符比其他字符宽，您可以选择在其单元格中将每个字符居中或左对齐。（每一个都有自己的怪异之处——你真的会想要一个固定宽度的字体来玩 roguelike。）

附加提示：

*   使用抗锯齿。与纯单色相比，这将使您的字体在眼睛上更容易。
*   不要使用颜色，用灰度渲染你的字体。libtcod 具有从灰度字体表生成彩色文本的功能。
*   考虑是否需要方形字体。方形字体的优点是你的 Roguelike 世界中的“圆圈”看起来就像屏幕上的圆圈。缺点是方形字体通常“丑陋”且难以阅读。

# java - Java，检查字符串的子字符串不“存在”

> ID：15324478
> 
> 赞同：-4
> 
> 时间：2013-03-10T16:19:10.497
> 
> 标签：java, string, exception, substring

我有一个while循环，应该将一个单词分成单独的字母......它可以工作，但是当我尝试检查一个不存在的子字符串是否为空时，它会抛出异常......

```
 private static void seperateWord(String word) {
    boolean running = true;
    int count = 0;
    while (running) {
        if (word.substring(count, count + 1).equals("null")) {
            running = false;
            return;
        } else {
            letter[count] = word.substring(count, count + 1);
            System.out.println(letter[count]);
            count++;
        }
    }
} 
```

它确实正确地输出了所有字母，直到它到达字符串的末尾并且没有什么可读取的......因为它只是不存在。它抛出这个异常......

```
 Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 4
at java.lang.String.substring(Unknown Source)
at Class.seperateWord(Class.java:33)
at Class.main(Class.java:13) 
```

第 33 行是 :: if (input.substring(count, count + 1).equals("null")) {

第 13 行就是我调用该方法的地方。

我输入的文字是“abc”

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T16:23:25.157

您正试图让子字符串从索引 3 到索引 4 上只有 3 个字符的字符串。这就是为什么你会得到一个例外。

而且，`input.substring(count, count + 1).equals("null")`显然永远不会是真的。1 个字符的字符串怎么可能等于`"null"`4 个字符的字符串？

阅读 String 类的 API 文档。它有一个`length()`返回字符串长度的方法，你应该用它来停止你的循环。它还有一个`charAt()`方法可以返回给定索引处的字符。

# eclipse-plugin - 对话框中的 Xtext DSL 嵌入式编辑器

> ID：15324481
> 
> 赞同：5
> 
> 时间：2013-03-10T16:19:29.333
> 
> 标签：eclipse-plugin, eclipse-rcp, xtext

我是 xtext 的新手，我已经使用 xtext 创建了一个 DSL，并且我已经生成了工件，它生成了具有许多功能的编辑器，例如内容辅助和语法着色现在问题是我想将编辑器嵌入到对话框中。

为了使用 EmbeddedEditor 实现这一点，我可以获取嵌入式编辑器并将其放置在对话框中，但嵌入式编辑器不显示文件的内容。

文件 C:/Eclipse_Work/workspace/runtime_workspace/apa/ex.mydsl 包含：

```
import com.ex.test;
entity{
 element a;
} 
```

对话框的 createcontrol() 中的代码是：

```
 IEditedResourceProvider resourceProvider=new IEditedResourceProvider() {

        @Override
        public XtextResource createResource() {
            try {

                Resource resource = resourceSet.createResource(URI.createURI("C:/Eclipse_Work/workspace/runtime_workspace/apa/ex.mydsl"));
                XtextResource resource2=(XtextResource)resource;

                return (XtextResource) resource;
            } catch (Exception e) {
                return null;
            }
        }
    };

    MyDslActivator activator = MyDslActivator.getInstance();
    Injector injector = activator
            .getInjector(MyDslActivator.COM_APAMA_STUDIO_QUERY_EXT_MYDSL);

    @SuppressWarnings("restriction")
    EmbeddedEditorFactory factory = injector.getInstance(EmbeddedEditorFactory.class);
   EmbeddedEditor handle= factory.newEditor(resourceProvider).withParent(
            composite);

   EmbeddedEditorModelAccess partialEditor= handle.createPartialEditor();

   handle.getViewer().getControl().setLayoutData(new GridData(GridData.FILL, GridData.FILL, true, true, 2, 0)); 
```

当我运行项目时，对话框会打开一个编辑器区域，但它没有显示 ex.mydsl 中存在的代码，编辑器是空的。

请告诉我如何在嵌入式编辑器中显示代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T12:12:46.113

您必须将编辑器的初始内容指定为 的`editablePart`参数[`createPartialEditor(String prefix, String editablePart, String suffix, boolean insertLineBreaks)`](http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.4/org/eclipse/xtext/ui/editor/embedded/EmbeddedEditor.html#createPartialEditor%28java.lang.String,%20java.lang.String,%20java.lang.String,%20boolean%29)。要将您`XtextResource`的内容作为文本获取，[请将](http://download.eclipse.org/modeling/emf/emf/javadoc/2.4.2/org/eclipse/emf/ecore/resource/Resource.html#save%28java.io.OutputStream,%20java.util.Map%29)其保存为 a `ByteArrayOutputStream`，然后使用将其转换为字符串`toString.`

# c# - 捕获鼠标触摸win表单的标题栏

> ID：15324482
> 
> 赞同：4
> 
> 时间：2013-03-10T16:19:31.407
> 
> 标签：c#, winforms, wndproc

我有一些技巧来捕获鼠标触摸标题栏，但是当我将鼠标放在标题栏上时，例程会反复触发。这是例行公事

```
protected override void WndProc(ref Message m)
{
            if (m.Msg == 0xA0) // WM_NCMOUSEMOVE
            {
        listBox1.Items.Add("mouse move on title bar");
            }
            else if (m.Msg == 0x2A2) // WM_NCMOUSELEAVE
            {
        listBox1.Items.Add("mouse leave from title bar");            
            }

            base.WndProc(ref m);
} 
```

任何人都可以告诉我任何技巧，因此当鼠标触摸标题栏而不是重复触发时， **WndProc**只会触发一次。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:40:24.580

你在找这个吗？我正在使用标志控制向列表框中添加项目。

```
private bool insideTitleBar = false;
private bool outsideTitleBar = false;

protected override void WndProc(ref Message m)
{
    if (m.Msg == 0xA0) // WM_NCMOUSEMOVE
    {        
           if(!insideTitleBar)
           {
            listBox1.Items.Add("mouse move on title bar");
            insideTitleBar = true;
            outsideTitleBar = false;
           }
    } 
    else if (m.Msg == 0x2A2) // WM_NCMOUSELEAVE
    {
           if(!outsideTitleBar)
           {      
            listBox1.Items.Add("mouse leave from title bar");            
            outsideTitleBar = true;
            insideTitleBar = false;
           }
    }
    base.WndProc(ref m);
} 
```

# css - CSS缩放的使用：1

> ID：15324484
> 
> 赞同：0
> 
> 时间：2013-03-10T16:19:54.153
> 
> 标签：css

我看到 css 属性`zoom: 1`经常在样式表中使用。例如 twitter bootstrap 在其流畅的布局中使用它：

```
.row-fluid {
  width: 100%;
  *zoom: 1;
} 
```

我知道它主要用于 IE 布局问题...

它的实际用途是什么，为什么？是否只需要将它用于流体布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:23:06.790

[http://reference.sitepoint.com/css/haslayout](http://reference.sitepoint.com/css/haslayout)

在 IE 中，一些元素没有布局——这会导致设计中出现巨大的 PITA——因此有许多非侵入性的方式可以给它们“布局”。`zoom: 1`是其中之一。

# android - 如何使用自动生成的设置选项卡

> ID：15324488
> 
> 赞同：0
> 
> 时间：2013-03-10T16:20:21.857
> 
> 标签：android, settings

我想知道你们中是否有人可以告诉我如何将设置活动链接到您在单击应用程序顶角的三个点时打开的选项卡。这3个点是自动生成的；我从来没有编写任何程序让他们在那里。

你们能帮忙吗？抱歉我的英语不好，但我不是母语人士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:50:34.707

我猜你指的是操作栏的溢出区域。在这种情况下，您将需要：

*   创建一个菜单资源，在该菜单中声明您想要的东西（例如，`res/menu/activity_main.xml`）
*   `onCreateOptionsMenu()`在您的活动（或片段）中膨胀该资源
*   响应在`onOptionsItemSelected()`您的活动（或片段）中点击您的项目

您将在 SDK 文档的[菜单](http://developer.android.com/guide/topics/ui/menus.html)和[操作栏](http://developer.android.com/guide/topics/ui/actionbar.html)页面中找到有关此过程的更多信息。

# paypal - “PayPal Here”是否发送 IPN 通知？

> ID：15324489
> 
> 赞同：2
> 
> 时间：2013-03-10T16:20:35.503
> 
> 标签：paypal, paypal-ipn

我试图弄清楚 PayPal Here iOS 应用程序是否发送 IPN 通知，我宁愿不使用真正的信用卡进行尝试以找出答案。我的 PayPal 企业帐户已注册以接收所有交易的 IPN 通知，但我不确定这是否适用于 PayPal Here 或仅适用于“经典”API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:51:32.183

它适用于 PayPal Here。这是一个示例 IPN：

```
mc_gross=1.10
protection_eligibility=Ineligible
payer_id=XXXXX
tax=0.00
payment_date=10%3A56%3A10+Mar+05%2C+2013+PST
cc_input_method=Swipe
payment_status=Completed
payment_method=credit_card
invoice_id=XXXX-XXX
geolocation=XX.37588990114492+-XX1.921036809166
charset=ISO-8859-1
first_name=XXXX
mc_fee=0.03
notify_version=3.7
custom=
payer_status=unverified
business=xxxxx%40hotmail.com
quantity=1
verify_sign=A.7n6Acd75CB8FdbeZyRGF.BoVPlAh1DpDw5NsPgku3fVBbOvyXeZP64
discount_amount=0.00
txn_id=XXXXCX
payment_type=instant
last_name=XXXXX
receiver_email=XXXXXX%40hotmail.com
payment_fee=0.03
receiver_id=XXXXXXX
txn_type=paypal_here
item_name=
buyer_signature=yes
mc_currency=USD
item_number=
residence_country=US
receipt_id=XXXX-XXXX-XXXX-XXX
handling_amount=0.00
transaction_subject=
invoice_number=XXXXXX
payment_gross=1.10
shipping=0.00
ipn_track_id=abcdefg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T15:53:07.580

如果您在帐户设置中配置了 IPN，PayPal 会在此处发送 IPN。不幸的是，此时它不发送 CUSTOM 或 ITEM_NAME 或 ITEM_NUMBER 变量。上面分享的变量 Dennis 是我收到的变量，但如果也存在一些自定义变量会很酷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T16:29:02.617

没有官方声明，但由于大多数付款触发器都会向您的 IPN 发送消息，因此 PayPal Here 也应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T18:29:25.440

我问了 Paypal 这个问题并被告知“不”，它不会发送 IPN 通知。这是一种完全不同的支付方式，因为它是“卡片存在”交易。它将在您的历史记录中显示为“移动支付”。同样，这是 Paypal 告诉我的。他们还表示，移动支付对他们来说非常新，因此他们正在继续为该产品开发 API 等。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-25T01:41:22.797

是的，PayPal 确实发送了 IPN，但它没有提供有关付款人或购买的单个物品的太多信息。

[@Andrew Angell](https://stackoverflow.com/users/1188826/andrew-angell) 抱歉，我无法回复您的评论（积分不足）。发票编号由 PayPal 生成。您可以在该发票 ID 上调用 REST API ( [GET /v1/invoicing/invoices/](https://developer.paypal.com/webapps/developer/docs/api/#retrieve-an-invoice) ) 以获取有关付款人的其他信息，它还会返回订购的每个项目（名称、成本、货币）。

如果您使用 REST API 来获取发票，请不要忘记在您的 PayPal 开发人员 REST API 应用程序页面上添加“发票”范围！

我也尝试使用 GetTransactionDetails（经典 API），但它没有返回任何有用的信息（特别是订购的物品和付款人的电子邮件）。还使用 IPN 的 transaction_id 尝试了[“GET /v1/payments/sale/”](https://developer.paypal.com/webapps/developer/docs/api/#look-up-a-sale)，但忘记了它只返回通过 REST API 创建的销售额。

希望这可以帮助！

# intellij-idea - 如何正确设置 Gradle 并为 IntelliJ IDEA 创建一个新的 Gradle 项目？

> ID：15324493
> 
> 赞同：28
> 
> 时间：2013-03-10T16:20:48.950
> 
> 标签：intellij-idea, installation, gradle

所以，我下载了 Gradle，但我不知道如何正确设置它。解压 zip 文件后，接下来我该怎么做？我想在 IntelliJ IDEA 中使用 Gradle。从我看到的直播中，我知道 IntelliJ 的项目文件夹中有一个**settings.gradle**和一个**build.gradle**文件。

另外，我看到他们使用了 Windows 控制台。

首先，我如何通过 windows 控制台访问 gradle 并告诉它为 IntelliJ 生成一个新项目？

如您所见，我对 Gradle 没有任何经验。不幸的是，我真的不知道如何使用它。

我希望 IntelliJ 项目拥有[LWJGL](http://lwjgl.org/)和 Slick。

此外，我知道我在直播中看到的**build.gradle**文件中的内容（我只想创建具有与他们相同的结构的项目）。

任何人都可以详细描述如何实现这一切吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-10T16:53:44.883

假设您将 gradle 解压到`d:\tools\gradle`.

要将其 bin 目录添加到控制台窗口中的 PATH，请执行以下命令：

```
set PATH=d:\tools\gradle\bin;%PATH% 
```

以上将 bin 路径添加到 PATH 环境变量的当前值。这只会更改此特定命令窗口的路径。

如果您想将其全局添加到 PATH 中，请转到您的控制面板并选择*System*，然后选择*Advanced parameters*（可能有点不同：我正在翻译我的法语版本的 Windows）。然后在“高级系统参数”选项卡中，单击“*环境变量...* ”按钮。在列表中找到*Path*环境变量，然后添加目录，使用分号 ( ) 与其他目录分隔`;`。

注意：您还可以定义一个名为 GRADLE_HOME 的新环境变量：

```
set GRADLE_HOME=d:\tools\gradle 
```

或全局，如上所述，并在 PATH 变量中引用它：

```
set PATH=%GRADLE_HOME%\bin;%PATH% 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-03T12:26:38.350

只需安装[自制软件](http://brew.sh/)。

然后您可以打开终端并轻松安装，例如：

```
brew install gradle 
```

完毕！它已安装！

对于测试，只需在终端中输入：

```
gradle -v 
```

你会有这样的东西：

```
------------------------------------------------------------
Gradle 2.7
------------------------------------------------------------

Build time:   2015-09-14 07:26:16 UTC
Build number: none
Revision:     xxxxxxxxxxxxxxxxxxxxxxxxxx

Groovy:       2.3.10
Ant:          Apache Ant(TM) version 1.9.3 compiled on December 23 2013
JVM:          1.8.0_60 (Oracle Corporation 25.60-b23)
OS:           Mac OS X 10.11.1 x86_64 
```

然后，打开你的 IntelliJ 并像往常一样创建一个新的 gradle 项目，只需在必要时设置 gradle 的路径（通常在 /usr/local/Cellar 与 homebrew 一起安装时或 /opt 在以其他方式安装时）。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-26T15:26:53.840

对于 linux 用户，用户 SDK Man 可以轻松管理您的 gradle 安装和路径设置以进行开发以及 gradle 更新

[在这里获取 SDK MAN](http://sdkman.io/install.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-14T06:16:41.800

（对于 mac os 用户）假设您将 zip 文件解压缩到*/Users/onuryilmaz/gradle-3.3*文件夹中。然后打开终端并定义一个名为 GRADLE_HOME 的新环境变量：

```
export GRADLE_HOME=/Users/onuryilmaz/gradle-3.3 
```

之后在 PATH 变量中引用它：

```
export PATH=$PATH:$GRADLE_HOME/bin 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-12T09:48:05.617

只需更新 brew 并安装并设置路径即可

1.  冲泡更新 && 冲泡安装 gradle

2.  导出 PATH=$PATH:/opt/gradle/gradle-5.1.1/bin

3.  [https://gradle.org/install/](https://gradle.org/install/)

# php - 我如何清除以前回显的结果而不影响 php 中的任何其他功能？

> ID：15324498
> 
> 赞同：0
> 
> 时间：2013-03-10T16:21:04.247
> 
> 标签：php, javascript, mysql, ajax

我目前正在网站上工作，它有一个搜索框来搜索特定项目。该页面以表格格式回显结果。到目前为止一切正常，但是当我尝试过滤结果（取决于功能）时，我得到了两组结果。一个是之前显示的结果表，另一个是过滤后的结果。我不希望以前的结果在不影响任何其他程序的情况下再次显示在屏幕上。像会话之类的东西？我不知道如何处理这种情况。

```
<?php

include'search.php';// form for a search box. 

         if (isset($_POST['search_name']))  {
$search_name=mysql_real_escape_string(htmlentities(trim($_POST['search_name'])));
$errors = array();

if (empty($search_name)){

    $errors[] ='please enter a search term';
    }
else if (strlen($search_name)<3){
    $errors[] = 'your search term must be three or more characters'; 
    }
else if (1==2){
    $errors[] ='your search for '.$search_name.' returened no results';
    }
if (empty($errors)){

   filter($search_name); //it display another form in the navigation bar to filter the search result.

   search_results($search_name);//searches for all the result onthe database depending on the keyword  entered in searchbox. 

    } else{

    foreach($errors as $error)  {
        echo $error,'</br>';
        }
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:56:40.917

请参阅此代码：

```
echo 'world';
echo 'hello !'; 
```

[`ob_start()`](http://www.php.net/manual/en/function.ob-start.php)您可以使用和截取[`ob_get_contents()`](http://www.php.net/manual/en/function.ob-get-contents.php)回声[`ob_clean()`](http://www.php.net/manual/en/function.ob-clean.php)。

```
ob_start();
echo 'world';

var $echoed = ob_get_contents();
ob_clean();

// real echo
echo 'hello ' . $echoed . '!';

// now you see
// hello world! 
```

因为 ob 的“输出缓冲”是 PHP 原生的，所以您可以将它与函数、包含等任何内容一起使用。我正在使用这种方法来拦截（1.）我的控制器流中的输出，并拦截（2.）视图的输出，因此我可以稍后组合它们（例如将 PHP 错误呈现到调试 div 中。

# webrtc - peerConnection 建立后创建 WebRTC 数据通道

> ID：15324500
> 
> 赞同：3
> 
> 时间：2013-03-10T16:21:21.200
> 
> 标签：webrtc

当对等连接已经建立时，有没有办法创建数据通道？

这是我正在做的事情：

```
peerConnection.onstatechange = function(event){
        var state = peerConnection.readyState;
        console.log('state changed to : '+state);
        if(state==='stable'){
            console.log('connection is stable');
            var dataChannel = peerConnection.createDataChannel('test',{reliable: false});
            dataChannel.onopen = function(){
                console.log('data channel opened');
                dataChannel.send('hello data channel');
            };
            peerConnection.ondatachannel = function(event){
                console.log('ondatachannel event fire ',event);
            };              
        }
    }; 
```

它给了我以下输出：

```
state changed to : have-local-offer
state changed to : stable 
connection is stable 
```

1.  如何确保真正建立了连接？我在[这里](https://code.google.com/p/webrtc/issues/detail?id=940)发现`stable`状态等于`active`状态。

2.  `onopen`事件由于某种原因没有触发，所以我仍然不确定是否建立了连接。

如果您需要更多代码，请告诉我。

编辑：我添加了`onnegotiationneeded`事件处理程序，现在`peerConnection.ondatachannel`正在触发，但通道处于`connecting`状态

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-09T08:10:41.263

你可能遇到了和我一样的问题。显然，您必须在创建报价之前添加一个数据通道，如果您想添加一个流，您将需要创建一个新的报价/答案并重新协商。根据 W3C 规范：

[http://www.w3.org/TR/webrtc/](http://www.w3.org/TR/webrtc/)

> 特别是，如果一个 RTCPeerConnection 对象正在消费一个 MediaStream 并且一个轨道被添加到流的 MediaStreamTrackList 对象之一，例如通过调用 add() 方法，RTCPeerConnection 对象必须触发“negotiationneeded”事件。媒体组件的移除也必须触发“negotiationneeded”。

但是，negotiationneeded 事件还没有在 FF 中构建（我认为在 Chrome 中），所以这就是为什么事情可能会有点不规律。

# c++ - 在新线程中启动方法

> ID：15324502
> 
> 赞同：0
> 
> 时间：2013-03-10T16:21:37.060
> 
> 标签：c++, multithreading, boost-thread

我有一个带有对象指针的向量，我试图在一个新线程中启动对象的方法（方法有一个参数）。

这是我无法编译的代码：

```
class CanaSynchDynamic {
...
    void start() (boost::barrier&);
...
}; 
```

主要是：

```
for(int i=0;i<pw;++i)
    vS1.push_back(new CanaSynchDynamic());

do {
        boost::barrier barrier(pw);
        boost::thread_group threads;
        for(int i=0;i<pw;++i)
            vS1[i]->more_steps(start,s[z]);
        for(int i=0;i<pw;++i)
            threads.create_thread(boost::bind(&CanaSynchDynamic::start,boost::ref(*(vS1[i])),boost::ref(barrier)));
        threads.join_all();

} while(something); 
```

错误是：

```
 /usr/include/boost/thread/detail/thread.hpp: In instantiation of 'void
    boost::detail::thread_data<boost::reference_wrapper<T> >::run() [with F = CanaSynchDynamic]':
    simulation_3.cpp:278:1:   required from here
    /usr/include/boost/thread/detail/thread.hpp:98:17: error: no match for call to   '(CanaSynchDynamic) ()' 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:26:09.937

You can't use a `reference_wrapper` to pass the object from which the function shall be run. Instead you can just pass a pointer to your object:

```
threads.create_thread(boost::bind(&CanaSynchDynamic::start,vS1[i],boost::ref(barrier))); 
```

Also, you might just store your objects in a vector and not pointers to them. If you need a pointer use a `std::unique_ptr` from C++11 or if that is not available maybe a `boost::ptr_vector`.

# asp.net-mvc-4 - WIF：LocalSTS 未进行身份验证

> ID：15324505
> 
> 赞同：0
> 
> 时间：2013-03-10T16:21:48.517
> 
> 标签：asp.net-mvc-4, wif, claims-based-identity

我对 WIF 完全陌生，刚开始玩它，我尝试了一个 MVC4 应用程序的最简单的“f5 体验”；根据我找到的教程，遗憾的是大部分是指 .net 4.5 之前的版本，我应该只创建一个 MVC 应用程序，使用身份和访问工具对其进行配置，然后按 f5 启动并使用本地 STS 运行。然而，我可能遗漏了一些明显的东西，因为当我尝试访问受限制的页面时，我总是最终撞回主页。

这是我所做的，您可以通过这些步骤轻松重现问题（Win8 中的 VS2012 和 WIF SDK；确保以管理员权限启动 VS）：

1.  创建一个新的 ASP.NET MVC4 Internet 应用程序。将其端口设置为 7777（为了方便起见，仅选择大多数代码示例中使用的端口号）。

2.  更新所有 NuGet 包（这是可选的）。

3.  右键单击解决方案，选择身份和访问并设置 IP=本地 STS，然后单击确定。然后重新打开身份和访问弹出窗口，并选择生成控制器，然后单击确定。

4.  将 [Authorize] 属性添加到 Home 控制器的 About 操作。

5.  按 F5 并单击关于链接。不出所料，登录视图出现，提示我登录：唯一的选择当然是 localSTS。当我点击它时，我返回到主页并且没有进行身份验证。我可以重复这个过程，但没有任何改变，所以我永远无法访问受保护的关于页面。

localSTS 锚点下的链接是：

```
http://localhost:14743/wsFederationSTS/Issue?wa=wsignin1.0&wtrealm=http%3a%2f%2flocalhost%3a7777%2f&wctx=rm%3d0%26id%3d664ff3c2-95b1-40b3-b538-a8357233ea7e%26ru%3dhttp%253a%252f%252flocalhost%253a7777%252f&wct=2013-03-10T13%3a39%3a32Z 
```

AFAIK，它的参数看起来不错。

如果我检查网络流量，我看不到任何相关项目（如果我理解得很好，我希望响应为当前会话设置一些 cookie，代表 IClaimsPrincipal）。

（顺便说一句，通过查看 web.config，我可以看到在模块中 WSFederationAuthenticationModule 是从*System.Identity.Services*引用的，在配置身份和访问权限后，它不包含在解决方案中；我想这是工具中的一个错误。无论如何，我添加了对它的引用，但没有任何改变。）

### 更新

感谢您的答复！如果我检查流量，这里是相关的 GET/POST。我没有饼干。我尝试重新创建整个测试解决方案，甚至跳过上面的步骤 #2 以使其最小化，但没有任何改变。

至于您的建议#2，我尝试添加全局 asax：

```
 FederatedAuthentication.WSFederationAuthenticationModule.SecurityTokenValidated
            += (sender, e) => FederatedAuthentication.SessionAuthenticationModule.IsReferenceMode = true; 
```

但是 SessionAuthenticationModule 在此代码执行时为空，因此引发了相应的异常。我找不到关于此的最新代码示例或文章，但 WIF 似乎是一项非常有前途的技术；我希望像我这样的安全新手可以轻松使用它；我的主要目的是将它应用于提供 MVC 控制器和 WebApi 控制器的站点，适用于广泛的消费者（JS 代码、移动应用程序、WinRT 应用程序、站点页面本身......）。有什么建议吗？

```
(1) a GET which gets 307, temporary redirect

GET /wsFederationSTS/Issue?wa=wsignin1.0&wtrealm=http%3a%2f%2flocalhost%3a7777%2f&wctx=rm%3d0%26id%3d664ff3c2-95b1-40b3-b538-a8357233ea7e%26ru%3dhttp%253a%252f%252flocalhost%253a7777%252f&wct=2013-03-10T13%3a39%3a32Z HTTP/1.1
Host: localhost:14743
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.160 Safari/537.22
Referer: http://localhost:7777/HrdAuthentication/Login?ReturnUrl=%2fHome%2fAbout
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: 

(2) GET with signin request:
GET /wsFederationSTS/Issue/?wa=wsignin1.0&wtrealm=http%3a%2f%2flocalhost%3a7777%2f&wctx=rm%3d0%26id%3d664ff3c2-95b1-40b3-b538-a8357233ea7e%26ru%3dhttp%253a%252f%252flocalhost%253a7777%252f&wct=2013-03-10T13%3a39%3a32Z HTTP/1.1
Host: localhost:14743
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.160 Safari/537.22
Referer: http://localhost:7777/HrdAuthentication/Login?ReturnUrl=%2fHome%2fAbout
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: 

(3) a POST to the homepage: the respone is of course the homepage content; no cookies set.
POST / HTTP/1.1
Host: localhost:7777
Connection: keep-alive
Content-Length: 7063
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Origin: http://localhost:14743
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.160 Safari/537.22
Content-Type: application/x-www-form-urlencoded
Referer: http://localhost:14743/wsFederationSTS/Issue/?wa=wsignin1.0&wtrealm=http%3a%2f%2flocalhost%3a7777%2f&wctx=rm%3d0%26id%3d664ff3c2-95b1-40b3-b538-a8357233ea7e%26ru%3dhttp%253a%252f%252flocalhost%253a7777%252f&wct=2013-03-10T13%3a39%3a32Z
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: 
```

## 工作变化

我找到了让它工作的方法，也许这对其他人有用：如果您按照上述过程而不从本地 IIS 服务器更改为 VS 开发服务器，它似乎正在工作，我仍然被重定向到主页页面（我想知道为什么：），但是作为经过身份验证的用户；此时，我可以再次点击About链接，有效进入页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:41:26.120

我重现了您的步骤，一切正常。Chrome调试器显示你必须有两个步骤：

```
GET  http://localhost:12263/wsFederationSTS/Issue/?wa=wsignin1.0&wtrealm=http%3a%2f%2flocalhost%3a54306%2f&wctx=rm%3d0%26id%3dc6e46b99-417b-49b6-96a0-40efcead898f%26ru%3dhttp%253a%252f%252flocalhost%253a54306%252f&wct=2013-03-10T18%3a14%3a19Z
POST http://localhost:54306/ with wa:wsignin1.0 and wresult:trust:RequestSecurityTokenResponseCollection 
```

POST 的结果是名为 FedAuth 和 FedAuth1 的 Set-Cookie。由于 cookie 大小限制，cookie 被拆分。

请在调试器中检查。

ps 一旦我看到相同的行为 - cookie 未正常设置。问题在于 cookie 大小，并通过[切换到 ReferenceMode](http://leastprivilege.com/2012/11/20/switching-to-referencemode-in-asp-net-4-5/)解决。不要忘记在 Application_Start 中注册它：

```
FederatedAuthentication.WSFederationAuthenticationModule.SessionSecurityTokenCreated 
+= this.WSFederationAuthenticationModule_SessionSecurityTokenCreated; 
```

# c++ - 搜索可以像地图一样工作以及检索其他信息的数据结构

> ID：15324509
> 
> 赞同：0
> 
> 时间：2013-03-10T16:22:16.047
> 
> 标签：c++, c

我有以下字符，如果它们在同一个括号中，我想连续为其分配数字。例如

```
 [a,b],[c],[d,e],[f,g],[h]
   a=0, b=1,c=2,d=3,e=4,f=5,g=6,h=7 
```

从给定的字符中，我想检索可以在 c++ 中使用 std::map 执行的数字。但是，一旦我用地图分配这些数字。我失去了 [a,b] 在一个括号中而 [c] 是分开的信息。我想保留这些信息。

是否有一些我可以使用的数据结构： [a,b] 可以分配连续的数字，并且我可以获得 [a,b] 在一个括号中的信息，而 [c] 是其括号中唯一的信息.

我的方法是使用 map ......但它不适合我以后找出 [a,b] 是否在同一个括号中的需要。有人可以建议一个数据结构，以满足我连续分配数字以及保留它们属于同一括号的信息的需要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:32:55.620

我并不完全清楚你在问什么，但这个答案是基于我目前的解释。您不能只使用一个值类型来存储有关 char 所在组的额外信息吗？例如：

```
struct value_type
{
    int num;
    int group;
};
....
std::map<char, value_type> m;
m['a'].num   = 0;
m['a'].group = 0;
m['b'].num   = 1;
m['b'].group = 0;   // same group as 'a'
m['c'].num   = 2;
m['c'].group = 1;   // new group
// etc...

// testing if 'a' and 'b' are in the same group
if (m['a'].group == m['b'].group)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:50:42.193

正如其他人指出的那样，没有完全适合您需求的数据结构（据我所知）。但是，您可以轻松地自己设计一个。一些建议：

*   将每个字符映射到包含括号编号和字符编号的元组或结构：

    ```
    struct CharData { int group; int characterNumber; };
    std::map<char, CharData> data; 
    ```

*   使用两个容器：一个包含字符组/括号列表，另一个是普通映射：

    ```
    std::vector<std::vector<char> > groups;  // Store groups in this container.
    std::map<char, int> mapping; // Store mapping to integers in this container. 
    ```

*   使用地图向量：

    ```
    std::vector<std::map<char, int> > data; 
    ```

您可以轻松地在这些表示之间进行转换。但是，它们对于典型操作具有不同的复杂性。如果您可以检查一个字符是否在某个组中并访问它映射到的数字对您很重要，那么第一个解决方案是四。如果您需要经常列出一个组的所有字符，或者一个字符可以包含在多个组中，那么我更喜欢第二种方法。如果一个字符可以是多个组的元素并且您希望根据组将其映射到不同的数字，则最后一种方法可能很有用。

# scala - Convert Nested Case Classes to Nested Maps in Scala

> ID：15324512
> 
> 赞同：2
> 
> 时间：2013-03-10T16:22:30.640
> 
> 标签：scala, case-class

I have two nested case classes:

```
case class InnerClass(param1: String, param2: String)
case class OuterClass(myInt: Int, myInner: InnerClass)
val x = OuterClass(11, InnerClass("hello", "world")) 
```

Which I want to convert to nested Maps of type Map[String,Any] so that I get something like this:

```
Map(myInt -> 11, myInner -> Map(param1 -> hello, param2 -> world)) 
```

Of course, the solution should be generic and work for any case class.

Note: [This discussion](https://stackoverflow.com/questions/1226555/case-class-to-map-in-scala) gave a good answer on how to map a single case class to a Map. But I couldn't adapt it to nested case classes. Instead I get:

```
Map(myInt -> 11, myInner -> InnerClass(hello,world) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:40:45.900

正如 Luigi Plinge 在上面的评论中指出的那样，这是一个非常糟糕的主意——您将类型安全抛到了窗外，并且会遇到很多丑陋的强制转换和运行时错误。

[也就是说，使用新的Scala 2.10 Reflection API](http://docs.scala-lang.org/overviews/reflection/environment-universes-mirrors.html)很容易做你想做的事：

```
def anyToMap[A: scala.reflect.runtime.universe.TypeTag](a: A) = {
  import scala.reflect.runtime.universe._

  val mirror = runtimeMirror(a.getClass.getClassLoader)

  def a2m(x: Any, t: Type): Any = {
    val xm = mirror reflect x

    val members = t.declarations.collect {
      case acc: MethodSymbol if acc.isCaseAccessor =>
        acc.name.decoded -> a2m((xm reflectMethod acc)(), acc.typeSignature)
    }.toMap

    if (members.isEmpty) x else members
  }

  a2m(a, typeOf[A])
} 
```

接着：

```
scala> println(anyToMap(x))
Map(myInt -> 11, myInner -> Map(param1 -> hello, param2 -> world)) 
```

但是，不要这样做。事实上，您应该尽最大努力避免在 Scala 中完全避免运行时反射——这实际上几乎从来没有必要。我只是发布这个答案，因为如果您决定*必须*使用运行时反射，那么使用 Scala 反射 API 比使用 Java 更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:33:00.727

只需递归调用它。所以

```
def getCCParams(cc: AnyRef) =
  (Map[String, Any]() /: cc.getClass.getDeclaredFields) {(a, f) =>
    f.setAccessible(true)
    val value = f.get(cc) match {
      // this covers tuples as well as case classes, so there may be a more specific way
      case caseClassInstance: Product => getCCParams(caseClassInstance)
      case x => x
    }
    a + (f.getName -> value)
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-22T08:12:58.267

这是一个基于无形的更原则的解决方案。 [https://github.com/yongjiaw/datacrafts](https://github.com/yongjiaw/datacrafts)

```
class NoSchemaTest extends FlatSpec with ShapelessProduct.Implicits {

"Marshalling and unmarshalling with Map" should "be successful" in {

val op = NoSchema.of[TestClass]

assert(
  op.operator.marshal(
    Map(
      "v1" -> 10,
      "v5" -> Map("_2" -> 12),
      "v3" -> Iterable(Seq("v21" -> 3)),
      "v6" -> TestClass3(v31 = 5)
    )) == TestClass(
    v1 = 10,
    v5 = (null, 12),
    v3 = Some(Seq(Some(
      TestClass2(
        v21 = 3,
        v22 = null
      )))),
    v6 = Some(TestClass3(v31 = 5)),
    v2 = None,
    v4 = null
  )
)

assert(
  op.operator.unmarshal(
    TestClass(
      v1 = 1,
      v2 = null
    )
  ) == Map(
    "v1" -> 1,
    "v2" -> null,
    // the rest are default values
    "v6" -> null,
    "v5" -> Map("_2" -> 2, "_1" -> "a"),
    "v4" -> null,
    "v3" -> Seq(
      Map(
        "v21" -> 3,
        "v22" -> Map("v" -> Map(), "v32" -> Seq(12.0), "v31" -> 0)
      )
    )
  )
)

 }
}

object NoSchemaTest {

case class TestClass(v1: Int,
v2: Option[Seq[Option[Double]]] = None,
v3: Option[Seq[Option[TestClass2]]] = Some(Seq(Some(TestClass2()))),
v4: Seq[Int] = null,
v5: (String, Int) = ("a", 2),
v6: Option[TestClass3] = None
)

case class TestClass2(v21: Int = 3,
v22: TestClass3 = TestClass3(0)
)

case class TestClass3(v31: Int,
v32: Iterable[Double] = Seq(12),
v: Map[String, Int] = Map.empty
)

}

trait DefaultRule extends Operation.Rule {

override def getOperator[V](operation: Operation[V]): Operation.Operator[V] = {

operation.context.noSchema match {

  case _: Primitive[V] => new PrimitiveOperator[V](operation)

  case shapeless: ShapelessProduct[V, _] =>
    new ShapelessProductMapper[V](operation, shapeless)

  case option: OptionContainer[_] =>
    new OptionOperator[option.Elem](
      option.element, operation.asInstanceOf[Operation[Option[option.Elem]]])
      .asInstanceOf[Operation.Operator[V]]

  case map: MapContainer[_] =>
    new MapOperator[map.Elem](
      map.element, operation.asInstanceOf[Operation[Map[String, map.Elem]]])
      .asInstanceOf[Operation.Operator[V]]

  case seq: SeqContainer[_] =>
    new SeqOperator[seq.Elem](
      seq.element, operation.asInstanceOf[Operation[Seq[seq.Elem]]])
      .asInstanceOf[Operation.Operator[V]]

  case iterable: IterableContainer[_] =>
    new IterableOperator[iterable.Elem](
      iterable.element, operation.asInstanceOf[Operation[Iterable[iterable.Elem]]])
      .asInstanceOf[Operation.Operator[V]]
}}} 
```

# java - 重构静态类，以便我可以对其进行单元测试

> ID：15324513
> 
> 赞同：0
> 
> 时间：2013-03-10T16:22:31.573
> 
> 标签：java

我有一个我想重构的静态类，以便我可以更改属性文件的名称等，并且能够更轻松地对其进行单元测试。

目前我有这个：

```
public enum MySettings {

   INSTANCE;

   //priv vars
   private string applicationUrl;

   private MySettings() {

     MappingJsonFactory jf = new MappingJsonFactory();

    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    InputStream mySettingsInputStream = classLoader.getResourceAsStream("a.properties");

    Properties mySettingsProperties = new Properties().load(mySettingsInputStream);

    // code below to load json and set priv vars etc.

   }

   public String getApplicationUrl() {
       return applicationUrl;
   }
} 
```

如何在单元测试中将属性文件的名称设置为其他名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:24:40.500

“控制反转。” 在这里执行此操作的最简单方法是将其作为构造函数 arg。更高端的是 IOC 框架，例如 Spring。

更糟糕的情况是，因为您正在处理`enum`- 可能需要分解出一个接口，然后提供一个实现枚举。或更好：

```
public enum Settings {
    PRODUCTION("prod.xml"), UNIT_TESTING("dev.xml");
    //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:40:17.723

您可以将枚举类中的所有内容放入一个真正的可实例化类（通过包保护或受保护），然后通过枚举（getter）使其实例可访问。像这样，您可以像魅力一样对所有内容进行单元测试，也可以将其作为单例 :)。有了这个，您不需要第二个 Enum 常量（如评论中所指出的那样）。

如果您使用受保护而不是包保护，您可以通过创建一个从实际类继承的虚拟类来对其进行单元测试，并在测试中实例化它，如下所示：

```
private static class Dummy extends NewClass {

    public Dummy() {
        super();
    }

} 
```

# ruby - ruby require does not load variable - undefined local variable

> ID：15324515
> 
> 赞同：-1
> 
> 时间：2013-03-10T16:22:50.747
> 
> 标签：ruby

Have an external file, `wordlist.rb`, that contains

```
code_words = { 'a' => 'is a', 'b' => 'is b' } 
```

This file is stored in the same directory that contains my code require '`wordlist`'

```
code_word.each do | mykey, mysentence | puts mykey + "=> " mysentence end 
```

when I run this code, I get the following message

```
<main>': undefined local variable or method code_words' for main:Object (NameError) 
```

thanks for the help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:23:41.607

You should have a global variable(i.e. starting with a `$`) to be able to access it from a file that you require.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T20:42:38.560

是的，它是一个局部变量。局部变量在定义它们的范围内是局部的。这就是它们被称为*局部*变量的原因。您不能访问另一个作用域的局部变量，这就是局部变量的全部意义所在。

如果您希望变量在全局范围内，则需要使用全局变量。

但是，在这种情况下，看起来您实际上想要一个全局常量，而不是变量：

```
CODE_WORDS = { 'a' => 'is a', 'b' => 'is b' }

puts CODE_WORDS.map {|mykey, mysentence| "#{mykey} => #{mysentence}" }.join("\n") 
```

# php - Zend，学说，多个实体合二为一

> ID：15324517
> 
> 赞同：0
> 
> 时间：2013-03-10T16:23:09.440
> 
> 标签：php, zend-framework, doctrine

经过多次尝试，我能够想出一些东西。

我现在可以在我的用户实体中看到其他实体属性，但看不到它们的值。

我已添加到我的用户实体：

```
 /**
         * @OneToOne(targetEntity="UserCoaches")
         * @JoinColumn(name="id", referencedColumnName="user_id")
         */
private $coaches; 
```

我得到这个：

```
[coaches:Entities\Users:private] => __PHP_Incomplete_Class Object
        (
            [__PHP_Incomplete_Class_Name] => Proxies\__CG__\Entities\UserCoaches
            [__isInitialized__] => 
            [id] => 
            [user_id] => 
            [coach_id] => 
            [date_created] => 
            [date_active_from] => 
            [date_active_to] => 
        ) 
```

我是否必须“初始化”某些东西？

我原来的问题如下>>>>>>>>>>

> 我只需要你们指出我正确的方向。我不需要现成的解决方案。
> 
> 我有三个实体。
> 
> 1.  用户
>     
>     
>     *   ID
>     *   名
>     *   姓
> 2.  用户计划
>     
>     
>     *   ID
>     *   plan_id
>     *   用户身份
>     *   active_to
> 3.  计划
>     
>     
>     *   ID
>     *   计划名称
> 
> 如何使 UserPlan 和 Plans 中的方法在用户实体中可见。
> 
> 因此，与其在 UserPlans 和 Plans 中搜索 user_id 和 plan_id，我可以使用以下内容：
> 
> ```
> $user = new User entity
> 
> echo $user->getPlanId().$user->getPlanName(); 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:43:46.350

我能够解决这个错误。

```
In my Auth class I changed from Session Auth to NonPersistent Auth. 
```

谢谢谷歌。

问题解决了。

# c# - 将 XML 中的 ebay Web 服务响应转换为 C# 对象？

> ID：15324519
> 
> 赞同：1
> 
> 时间：2013-03-10T16:23:14.897
> 
> 标签：c#, xml, windows-phone-7, parsing, deserialization

我正在创建一个 windows phone 7 应用程序，我在其中使用 Ebay 链接

[http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=AppID&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=harry%20potter%20phoenix](http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=AppID&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=harry%20potter%20phoenix)

获取以下格式的项目列表

```
<findItemsByKeywordsResponse>
  <ack>Success</ack>
  <version>1.12.0</version>
  <timestamp>2013-03-10T15:50:40.717Z</timestamp>
  <searchResult count="100">
    <item></item>
    <item></item>
    <item>
      <itemId>221170783013</itemId>
      <title>Harry Potter and the Order of the Phoenix (DVD, 2007, Full Frame) - New Unopened</title>
      <globalId>EBAY-ENCA</globalId>
      <primaryCategory>
        <categoryId>617</categoryId>
        <categoryName>DVDs & Blu-ray Discs</categoryName>
      </primaryCategory>
      <galleryURL>http://thumbs2.ebaystatic.com/m/mm6I9OfrWGLKdYk-gLVSacg/140.jpg</galleryURL>
      <viewItemURL>http://www.ebay.com/itm/Harry-Potter-and-Order-Phoenix-DVD-2007-Full-Frame-New-Unopened-/221170783013?pt=US_DVD_HD_DVD_Blu_ray</viewItemURL>
      <productId type="ReferenceID">62940319</productId>
      <paymentMethod>PayPal</paymentMethod>
      <autoPay>false</autoPay>
      <postalCode>P3P1S9</postalCode>
      <location>Canada</location>
      <country>CA</country>
      <shippingInfo>
        <shippingServiceCost currencyId="USD">4.99</shippingServiceCost>
        <shippingType>Flat</shippingType>
        <shipToLocations>Worldwide</shipToLocations>
        <expeditedShipping>false</expeditedShipping>
        <oneDayShippingAvailable>false</oneDayShippingAvailable>
        <handlingTime>1</handlingTime>
      </shippingInfo>
      <sellingStatus></sellingStatus>
      <listingInfo></listingInfo>
      <returnsAccepted>true</returnsAccepted>
      <condition></condition>
      <isMultiVariationListing>false</isMultiVariationListing>
      <topRatedListing>false</topRatedListing>
    </item>
    <item>
      <itemId>130861888976</itemId>
      <title>Harry Potter and the Order of the Phoenix Year 5 by J. K. Rowling (2003,...</title>
      <globalId>EBAY-US</globalId>
      <primaryCategory>
        <categoryId>279</categoryId>
        <categoryName>Children & Young Adults</categoryName>
      </primaryCategory>
      <galleryURL>http://thumbs1.ebaystatic.com/m/mkjj5zzPkMQ6FRLW5FlvXZQ/140.jpg</galleryURL>
      <viewItemURL>http://www.ebay.com/itm/Harry-Potter-and-Order-Phoenix-Year-5-J-K-Rowling-2003-/130861888976?pt=US_Childrens_Books</viewItemURL>
      <productId type="ReferenceID">2327833</productId>
      <paymentMethod>PayPal</paymentMethod>
      <autoPay>false</autoPay>
      <postalCode>30535</postalCode>
      <location>Demorest,GA,USA</location>
      <country>US</country>
      <shippingInfo>
        <shippingServiceCost currencyId="USD">4.0</shippingServiceCost>
        <shippingType>Flat</shippingType>
        <shipToLocations>US</shipToLocations>
        <expeditedShipping>false</expeditedShipping>
        <oneDayShippingAvailable>false</oneDayShippingAvailable>
        <handlingTime>3</handlingTime>
      </shippingInfo>
      <sellingStatus>
        <currentPrice currencyId="USD">12.99</currentPrice>
        <convertedCurrentPrice currencyId="USD">12.99</convertedCurrentPrice>
        <bidCount>0</bidCount>
        <sellingState>Active</sellingState>
        <timeLeft>P0DT0H21M54S</timeLeft>
      </sellingStatus>
      <listingInfo>
        <bestOfferEnabled>false</bestOfferEnabled>
        <buyItNowAvailable>false</buyItNowAvailable>
        <startTime>2013-03-03T16:12:34.000Z</startTime>
        <endTime>2013-03-10T16:12:34.000Z</endTime>
        <listingType>Auction</listingType>
        <gift>false</gift>
      </listingInfo>
      <returnsAccepted>false</returnsAccepted>
      <condition>
        <conditionId>1000</conditionId>
        <conditionDisplayName>Brand New</conditionDisplayName>
      </condition>
      <isMultiVariationListing>false</isMultiVariationListing>
      <topRatedListing>false</topRatedListing>
    </item>
  </searchResult>
  <paginationOutput>
    <totalPages>27</totalPages>
    <totalEntries>2602</totalEntries>
    <pageNumber>1</pageNumber>
    <entriesPerPage>100</entriesPerPage>
  </paginationOutput>
  <itemSearchURL>http://www.ebay.com/sch/i.html?_nkw=harry+potter+phoenix&_ddo=1&_ipg=100&_pgn=1</itemSearchURL>
</findItemsByKeywordsResponse> 
```

在整个响应中，我只需要包含 Title、Description、EndTime、ListType、currentprice 的项目列表或 ObservableCollections。

什么是最优化的编码方式。我想不出最简单的方法，比如直接反序列化对 C# 对象的 XML 响应。

我还没有尝试过任何代码，但我目前很困惑如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:43:41.267

最优化？编写一个`XmlReader`基于 - 的解析器。一种相当快速的不头痛方式？使用 Xlinq。未经测试：

```
var items = XDocument.Parse(data)
    .Elements("findItemsByKeywordsResponse")
    .Elements("searchResult")
    .Elements("item")
    .Select(item =>
    {
        var li = item.Element("listingInfo");

        return new
        {
            Title = (string)item.Element("title"),
            EndTime = li != null ? (DateTime?)li.Element("endTime") : null,
            ListingType = li != null ? (string)li.Element("listingType") : null,
        };
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:28:16.560

我建议你使用 JSON 版本而不是 XML，这样解析会更容易。

将 RESPONSE-DATA-FORMAT 更改为 JSON，然后按照[THIS BLOG POST](http://nkishorchandra.blogspot.com/2012/10/parsing-json-in-windows-phone.html)中提到的过程来帮助您解析 JSON 数据。如果您仍然遇到任何问题，请再次在这里询问。

# android - 根据用户输入在android编程中重复/循环一个mp3 N没有时间

> ID：15324522
> 
> 赞同：-1
> 
> 时间：2013-03-10T16:23:27.337
> 
> 标签：android, media-player

嗨，我正在尝试构建一个应用程序，其中我想从用户那里接收数字 ip，然后在 android 中播放一首没有次数（用户 i/p）的特定歌曲。

有人可以指导我吗？

（循环，android，mp3，媒体播放器）android，媒体播放器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:35:56.590

在`MediaPlayer`中，有一个 API 可以通过`setLooping`方法设置循环参数。但是，我觉得当前的 API 不支持特定`n`数量的迭代。要获取用户输入和循环时间，您可以通过为through`n`注册回调来添加逻辑 。`onCompletionListener``setOnCompletionListener`

在回调实现中，您可以重新开始播放并继续播放文件，直到迭代次数减少到零。

# c++ - print trees in preorder separated by commas

> ID：15324523
> 
> 赞同：0
> 
> 时间：2013-03-10T16:23:37.950
> 
> 标签：c++, tree, preorder

I have following function to print trees in in order that works properly:

```
void PrintInOrder(TTreeNode const * const pRoot) {
    if (pRoot != 0) {
        PrintInOrder(pRoot->pLeft);
        if(pRoot->pLeft) std::cout << ",";
        std::cout << pRoot->Data;
        if(pRoot->pRight) std::cout << ",";
        PrintInOrder(pRoot->pRight);
    }
} 
```

This is my preorder printing function:

```
void PrintPreOrder(TTreeNode const * const pRoot)  {
    if (pRoot != 0) {
        std::cout << pRoot->Data << std::endl;
        PrintPreOrder(pRoot->pLeft);
        PrintPreOrder(pRoot->pRight);
    }
} 
```

As i'm too stupid to figure it out how to print it separated the way like the inorder function i hope you guys can help me out!

thanks!

Update:

Preorder function works now, so is this the right postorder function?

```
void PrintPostOrder(TTreeNode const * const pRoot)  {
        if (pRoot != 0) {
            PrintPostOrder(pRoot->pLeft);
            if(pRoot->pLeft) std::cout << ",";
            PrintPostOrder(pRoot->pRight);
            if(pRoot->pRight) std::cout << ",";
            std::cout << pRoot->Data;
        }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:26:08.097

```
void PrintPreOrder(TTreeNode const * const pRoot)  {
    if (pRoot != 0) {
        std::cout << pRoot->Data << std::endl;
        if(pRoot->pLeft || pRoot->pRight) std::cout << ",";
        PrintPreOrder(pRoot->pLeft);
        if(pRoot->pLeft && pRoot->pRight) std::cout << ",";
        PrintPreOrder(pRoot->pRight);
    }
} 
```

Also please note this will print the tree in preorder traversal.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:27:35.993

This is the proper way to do it:

```
void PrintPreOrder(TTreeNode const * const pRoot)  {
    if (pRoot != 0) {
        std::cout << pRoot->Data << std::endl;
        // take care of left node
        if(pRoot->pLeft || pRoot->pRight) std::cout << ",";
        PrintPreOrder(pRoot->pLeft);
        // take care of right node
        if(pRoot->pLeft && pRoot->pRight) std::cout << ",";
        PrintPreOrder(pRoot->pRight);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T16:35:43.573

您**的有序**版本：

1.  访问左子树。
2.  打印根的数据。
3.  访问右子树。

您想要在**预购**版本中做的是：

1.  打印根的数据。
2.  访问左子树。
3.  访问右子树。

所以它应该是这样的：

```
void PrintPreOrder(TTreeNode const * const pRoot) {
    if (pRoot) {

        // print the root:
        std::cout << pRoot->Data;

        // visit the left subtree:
        if (pRoot->pLeft) {
            std::cout << ",";
            PrintPreOrder(pRoot->pLeft);
        }

        // visit the right subtree:
        if (pRoot->pRight) {
            std::cout << ",";
            PrintPreOrder(pRoot->pRight);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-10T20:43:50.033

我知道这已经多年了，但仍然很有帮助！

我想知道自己该怎么做，发现了这个问题，但意识到有一个简单的答案：

```
void Preorder(Node* root){
  if(root==NULL){
    return;
  }
  cout << root->data << " ";
  Preorder(root->left);
  Preorder(root->right);
} 
```

你从树的根开始。如果根是`null`，则代码完成。

否则，打印出该节点的数据。

然后，我们调用该节点`Preorder`的`left`and`right`子树，它现在`root`是它自己的子树的。重要的是我们首先调用左子树，因为这是前序（后序的右子树）。

我们检查是否`root`是`null`，所以我们不必担心左子树是`null`或`right`子树是`null`单独的。如果节点是`null`，则回溯。

# batch-file - what does start/wait means in batch file

> ID：15324529
> 
> 赞同：2
> 
> 时间：2013-03-10T16:23:50.773
> 
> 标签：batch-file

In batch file, what does start/wait means

Example:

```
ECHO start/wait C:\\Example.exe 
```

I am trying to run an exe, so what does start/wait indicates over here?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:29:13.860

`/wait`强制批处理文件停止处理，直到被调用的程序完成执行。

（这可能很有用，例如，如果您在 Windows 启动文件夹中加载多个项目，并且程序的性质要求在下一个开始加载之前完成一个。将它们全部放在一个批处理文件中，使用 /等待参数，并且只在Startup文件夹中放置批处理文件的快捷方式。）START命令的命令行参数可以组合在一行中。例子：

```
START /max /wait NOTEPAD.EXE SOME.TXT 
```

来源：[http ://aumha.org/a/batches.php](http://aumha.org/a/batches.php)

# c++ - 什么是右值表达式和左值表达式之间差异的简洁、严格的定义，它涵盖了所有可能的情况？

> ID：15324534
> 
> 赞同：3
> 
> 时间：2013-03-10T16:24:53.547
> 
> 标签：c++, c++11

[https://stackoverflow.com/a/3601661/368896](https://stackoverflow.com/a/3601661/368896)和其他人提供了`lvalue`和`rvalue`（参考标准）的定义，以及`xvalue`、`glvalue`和`prvalue`。

但是， 的定义是`rvalue`指 的定义`xvalue`，而 的定义是`xvalue`指“*涉及右值引用的某些类型的表达式的结果*”。

因此，要理解 的技术定义`rvalue`，必须确定上述定义中提到了哪些“涉及右值引用的表达式”。我花时间尝试遵循标准（和不同的帖子）来跟踪这个定义。我想要一个不需要跟踪其他定义的定义（更明显的低级定义除外）。

这是一场野鹅追逐吗？是否有可能对**右值表达式和左值表达式之间的区别**提供一个简洁但严格的定义，涵盖所有可能的情况，并且不提及“涉及右值引用的某些类型的表达式的结果”？如果是这样，这样的定义是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:17:18.413

什么构成右值是由一组特别规则定义的，所以我认为“简洁”是不可能的。

xvalues 相当简单：它们是“返回 a 的东西`T&&`”。这包括返回它的函数、显式转换为`T&&`、通过 a 访问类数据成员`T&&`（无论是直接还是通过指向数据成员的指针）。

问题是prvalues，到处都是。您可以大致了解它们是什么，但具体涉及许多临时规则。`return valueArgument;`就像可以认为是纯右值的事实一样`valueArgument`，即使它在其他任何地方都是左值。

基本上，标准委员会通过标准并寻找他们想要隐含移动的地方，然后说，“你是一个prvalue。”

因此，不太可能出现“简洁但严格”的定义。

# jquery - Middle mouse click event in jquery

> ID：15324537
> 
> 赞同：3
> 
> 时间：2013-03-10T16:25:17.550
> 
> 标签：jquery, fancybox, mouseevent, mousewheel

I want control middle mouse button, I mean when user left clicked of middle clicked or right clicked on my link I should show fancybox.

so I use this code :

```
$(".reg").live("mousedown", function(e) {
    if ((e.which == 1) || (e.which == 2) || (e.which == 3)) {
        $.fancybox({
            href : 'register.php'
        });
    }
    e.preventDefault();
    return false;
}); 
```

But on this code just left click will work.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-10T16:54:55.267

请尝试这里写的解决方案[http://www.stackoverflow.com/questions/4007482/jquery-detect-if-middle-or-right-mouse-button-is-clicked-if-so-do-this](http://www.stackoverflow.com/questions/4007482/jquery-detect-if-middle-or-right-mouse-button-is-clicked-if-so-do-this)

可能对你有用。

例子：

```
$(".reg").on('mousedown', function(e) { 
   if( (e.which == 1) ) {
     alert("left button");
   } else if( (e.which == 3) ) {
     alert("right button");
   } else if( (e.which == 2) ) {
      alert("middle button"); 
   }
   e.preventDefault();
}).on('contextmenu', function(e){
   e.preventDefault();
}); 
```

这是小提琴[http://jsfiddle.net/p49nF/](http://jsfiddle.net/p49nF/)。我在 Firefox 19 和 Chrome 25 中对其进行了测试，它对我来说运行良好。

# ios - 将谷歌分析与混合移动应用程序结合使用

> ID：15324538
> 
> 赞同：15
> 
> 时间：2013-03-10T16:25:26.253
> 
> 标签：ios, objective-c, google-analytics, ab-testing, hybrid-mobile-app

我们正在将我们的原生 iPad 应用程序转变为混合应用程序。一些功能和 UI 将保留在本机代码中，而其他功能将在 HTML 中实现，这些功能将从我们的服务器提供，也可以离线使用。

我现在遇到的主要问题是使用 Google Analytics：
现有的本机代码使用适用于 IOS 的 GA SDK，我计划将 Web API 用于 Web 部件，但是我找不到如何使用这两个渠道的数据在 GA 中一起作为数据存储似乎是不同的。

此外，我计划使用 Google Analytics 的内容实验对 Web 部件进行 A/B 测试，但转换目标可能是在本机部件中实现的。

任何人都对混合应用程序或替代解决方案的分析有任何经验。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-17T05:11:54.483

你真的很想使用 SDK。它有一些对移动应用程序来说很方便的功能，比如崩溃、游戏商店集成。它还可以批量发送数据以提高电池使用率，还可以在应用程序离线时将点击排队等待在线时发送。您将无法使用 Javascript 实现来模拟它。

因此，您需要编写的是将数据从 WebView 发送回 App 的 Native 部分的 Javascript 方法。[This other Stack Overflow thread](https://stackoverflow.com/questions/3742590/nsstring-in-webview-iphone-and-objective-c/3742635#3742635)有更多关于如何做到这一点的细节。

所以跟踪 Google Analytics 交互的 javascript 可能看起来像这样。

```
var _gaq = {};
_gaq.push = function(arr){
  var i, hit;
  hit = arr.slice(1).join('&');
  location.href = 'analytics://'+arr[0]+'?'+arr;
}; 
```

现在这将作为您的 ga.js 文件的替代品，您仍然可以在您的 Web 应用程序上使用与今天在 _gaq 上使用的 API 相同的 API，并且上面的适配器会将其数据发送到 APP 的本机部分。然后您只需要编写将拦截该 HTTP 请求并使用本机 SDK 发出 Google Analytics 函数的本机部分。

一个 normal`_gaq.push(['_trackPageview', '/homepage']);`会变成一个 uri like `analytics://_trackPageview?/homepage`，现在你只需要在 Native 部分拦截和解析它。

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
    NSURL *url = [request URL];

    NSLog(@"Hit detected %@", url.absoluteString);

    if ([[url scheme] isEqualToString:@"analytics"]) {
        id<GAITracker> tracker = [[GAI sharedInstance] defaultTracker];

        if ([url.host isEqualToString:@"_trackPageview"]) {
            // Get the page from parameters and then track the native View.
            // (...)
            [tracker trackView:page];
        }
        else if ([url.host isEqualToString:@"_trackEvent"]) {
            // Get the event parameters from url parameters and then track the native GA Event.
            // (...)
            [tracker trackEventWithCategory:cat
                                 withAction:act
                                  withLabel:lab
                                  withValue:val];
        }
        // Check for all other analytics functions types
        // (...)
        // Cancel the request
        return NO;
    }
    // Not an analytics: request.
    return YES;
} 
```

我希望它给了你一个好的起点。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:49:30.620

确实是一个具有挑战性的配置。

您是否考虑过将 analytics.js（通用分析）用于 Web 部件？然后您**可以**将数据输入到单个应用程序配置文件中

否则，您可以使用[Measurement Protocol](https://developers.google.com/analytics/devguides/collection/protocol/v1/)的服务器端实现从后端发送所有跟踪调用，但您可能会失去对 Content Experiment 的使用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:01:44.580

我将[http://www.flurry.com/](http://www.flurry.com/)用于我的应用程序，将 Google Analytics 用于我的其他内容。我从来没有在同一个应用程序中混合它们，但我猜这是可行的。我建议先检查一下flurry。对于混合应用程序来说，它很有可能就足够了。

# php - array to json in php

> ID：15324540
> 
> 赞同：-4
> 
> 时间：2013-03-10T16:25:52.550
> 
> 标签：php

I want to create bootstrap typeahead.

Here is print of my array in php.

```
debug($array);
//print $array =>
 array(
  4 => string 'Michelle' (length=8)
  6 => string 'Freya' (length=5)
  9 => string 'Ivana' (length=5)
  14 => string 'Stephanie' (length=9)
 ); 
```

I need to get some thing like this:

```
['Michelle', 'Freya', 'Ivana', 'Stephanie'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:27:39.300

Use array_values [http://php.net/manual/en/function.array-values.php](http://php.net/manual/en/function.array-values.php)

```
$arrayWithoutCustomIndexes = array_values($array); 
```

# python - Can't preserve encoding text in Python

> ID：15324541
> 
> 赞同：1
> 
> 时间：2013-03-10T16:26:07.010
> 
> 标签：python, encoding

I am trying to submit text from a file to a form on a site with mechanize but the text doesn't look good there, if i copy-paste looks like this:

```
 ████                                     
                                  █⌡⌡⌡⌡████                                 
                                 █⌡⌡⌡⌡⌡⌡⌡⌡⌡█████                            
                                █⌡⌡⌡⌡⌡████⌡⌡⌡⌡⌡⌡████                        
                                █⌡⌡⌡██    ██⌡⌡⌡⌡⌡⌡⌡⌡█████                   
                               █⌡⌡⌡⌡█      █⌡⌡⌡⌡██⌡⌡⌡⌡⌡⌡⌡████ 
```

If i use the code Python looks like this:

```
 ����                                     
                              ���������                                 
                             ���������������                            
                            ��������������������                        
                            ������    ���������������                   
                           ������      ������������������               
        �����             ������        ���������������������           
    �������������        ��������      ��������������������������� 
```

Probably is something about encoding,can't make it work. In the original file,textfile.txt, encoding is OEM-US, i googled this and is cp437.

```
def functionaa(linksite, text):
    import mechanize 
    import cookielib
    # Browser 
    br = mechanize.Browser()
    # Cookie Jar
    cj = cookielib.LWPCookieJar() 
    br.set_cookiejar(cj) 
    # Browser options 
    br.set_handle_equiv(True) 
    br.set_handle_gzip(True) 
    br.set_handle_redirect(True) 
    br.set_handle_referer(True) 
    br.set_handle_robots(False) 
    br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1) 
    edit = br.open(link)
    html1 = edit.read()
    br.select_form(nr=0) 
    br.form['textcode'] = "[pre]%s[/pre]" % text
    br.submit() 

f=open(r'E:\ABC\textfile.txt', 'r')
content = f.read()
functionaa("http://site.com", content) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:27:25.363

是的，看来是机械化的问题。在 CMD 中，我可以像这样打印它，无需 unicode ..

```
content = file.read()
print content 
```

但是当我通过 mecanize 发送它时，在网站上它是不一样的。

使用忽略标志，所有内容都被跳过，但文本。错误说，ascii 无法编码这些字符..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:55:43.210

如果您只想上传文件内容，就像用户在文本控件中手动键入一样，您应该首先确保处理代理假定的[字符集可以代表您的](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4)*奇怪*字符。如果是这种情况，您可以转到第 2 步并以这种方式读取本机 Python 字符串中的文件内容：

```
file = open(filename, 'rb')
content = unicode(file.read(), 'cp437')
file.close()
# Now use "content" to fill the form 
```

相反，这是[您应该如何上传](http://wwwsearch.sourceforge.net/mechanize/forms.html)文件的方式：

```
def upload(action, filename):
  br = mechanize.Browser()
  br.form.add_file(open(filename, 'rb'), 'text/plain; charset=cp437', filename)
  # Do your work...
  br.submit() 
```

请注意，我以二进制模式[打开](http://docs.python.org/2/library/functions.html#open)文件，因此不会对其字节应用任何转换。另请注意，我在 MIME 类型中指定了假定的编码。现在由服务器代码来处理转码（如果有的话）。

# python - 将列表转换为命名元组

> ID：15324547
> 
> 赞同：36
> 
> 时间：2013-03-10T16:26:22.300
> 
> 标签：python

在 python 3 中，我有一个元组`Row`和一个列表`A`：

```
Row = namedtuple('Row', ['first', 'second', 'third'])
A = ['1', '2', '3'] 
```

如何`Row`使用列表进行初始化`A`？请注意，在我的情况下，我不能直接这样做：

```
newRow = Row('1', '2', '3') 
```

我尝试了不同的方法

```
1\. newRow = Row(Row(x) for x in A)
2\. newRow = Row() + data             # don't know if it is correct 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-10T16:27:15.990

您可以`Row(*A)`使用参数解包来执行此操作。

```
>>> from collections import namedtuple
>>> Row = namedtuple('Row', ['first', 'second', 'third'])
>>> A = ['1', '2', '3']
>>> Row(*A)
Row(first='1', second='2', third='3') 
```

请注意，如果您的 linter 对使用以下划线开头的方法没有太多抱怨，请`namedtuple`提供一个[`_make`](https://docs.python.org/2/library/collections.html#collections.somenamedtuple._make)classmethod 替代构造函数。

```
>>> Row._make([1, 2, 3]) 
```

不要让下划线前缀欺骗你——这*是*该类的文档化 API 的一部分，并且可以依赖于所有 python 实现等......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T02:15:20.503

namedtuple 子类有一个名为“_make”的方法。使用“_make”方法将数组（Python 列表）插入到命名元组对象中很容易：

```
>>> from collections import namedtuple
>>> Row = namedtuple('Row', ['first', 'second', 'third'])
>>> A = ['1', '2', '3']
>>> Row._make(A)
Row(first='1', second='2', third='3')

>>> c = Row._make(A)
>>> c.first
'1' 
```

# ruby-on-rails - Looping through Hash(Array)

> ID：15324551
> 
> 赞同：0
> 
> 时间：2013-03-10T16:26:52.260
> 
> 标签：ruby-on-rails, ruby

I have this problem, where I keep on getting

```
TypeError: can't convert String into Integer 
```

This is where I'm going through this @data object.

here is the @data object

```
@data = HTTParty.get("")

{
"body"=>{
    "predictions"=>{
        "direction"=>{
            "prediction"=>[
                {
                    "epochTime"=>"1362931090892",
                },
                {
                    "epochTime"=>"1362931747892",

                },
                {
                    "epochTime"=>"1362932467892",

                },
                {
                    "epochTime"=>"1362933187892",

                },
                {
                    "epochTime"=>"1362933847892",

                }
            ],
            "title"=>"xxxx"
        },
        "a"=>"xx",
        "b"=>"x"
    },
    "name"=>"some"
} 
```

}

and my code to go through above has been

```
 <%  if @data["body"]["predictions"].present? %>
  <% @data["body"]["predictions"].each do |p| %>
        <%p["direction"].each do |d|%>
            <% d["prediction"].each do |k|%>
              <h4><%= k["epchoTime.."] %> </h4>
            <%end%>
        <%end%>
      <%end%>
<%end%> 
```

I have no idea how to go through this, I assume this is due to the fact I should access stuff like I do in C++ with name[integer] value, but I would like to use ["name"]. How can I make my code work ?

Thanks for your precious time and consideration.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:52:52.707

下面是一个使用 Nokogiri 解析原始 XML 的示例：

```
require 'nokogiri'

doc = Nokogiri::XML(<<EOT)
<body>
  <predictions>
    <direction>
      <prediction>
        <epochTime>1362931090892</epochTime>
        <epochTime>1362931747892</epochTime>
        <epochTime>1362932467892</epochTime>
        <epochTime>1362933187892</epochTime>
        <epochTime>1362933847892</epochTime>
      </prediction>
      <title">xxxx</title>
      <a>"xx"</a>
      <b>"x"</b>
      <name>"some"</name>
    </direction>
  </predictions>
</body>
EOT

epoch_times = doc.search('epochTime').map(&:text) 
```

它返回一个`epochTime`值数组：

```
[
    [0] "1362931090892",
    [1] "1362931747892",
    [2] "1362932467892",
    [3] "1362933187892",
    [4] "1362933847892"
] 
```

有时我们需要遍历`prediction`包含块的所有`epochTime`块。这将做到：

```
epoch_times = doc.search('prediction').map{ |predict|
  predict.search('epochTime').map(&:text)
}

[
    [0] [
        [0] "1362931090892",
        [1] "1362931747892",
        [2] "1362932467892",
        [3] "1362933187892",
        [4] "1362933847892"
    ]
] 
```

有时您需要找到一个特定的节点并在其中获取某种类型的所有元素：

```
doc = Nokogiri::XML(<<EOT)
<body>
  <predictions>
    <direction>
      <prediction id="1">
        <epochTime>1362931090892</epochTime>
        <epochTime>1362931747892</epochTime>
        <epochTime>1362932467892</epochTime>
        <epochTime>1362933187892</epochTime>
        <epochTime>1362933847892</epochTime>
      </prediction>
      <title">xxxx</title>
      <a>"xx"</a>
      <b>"x"</b>
      <name>"some"</name>
    </direction>
  </predictions>
</body>
EOT

epoch_times = doc.search('prediction[id="1"]').map{ |predict| predict.search('epochTime').map(&:text) }

[
    [0] [
        [0] "1362931090892",
        [1] "1362931747892",
        [2] "1362932467892",
        [3] "1362933187892",
        [4] "1362933847892"
    ]
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:07:50.527

铁皮人有一个很好的观点，就是把这个逻辑放在视野之外，应该是一个模型的作品。不过，这是一个更清晰的视图。

```
<% @data['body']['predictions']['direction']['prediction'].each do |x| %>
  <% x.each do |k, v| %>
    <h4><%= v %></h4>
  <% end %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T21:43:21.637

整个散列的事情已经失控，因为我不断检测每个人的存在并循环通过它，所以正如 Tin man 建议的那样，我使用 XML 'nokogiri' 然后使用 .css 方法来检测它是否存在并循环通过它，因为原始响应是在 xml 中。

```
 @doc.css('predictions').each do |predictions_node| 
        predictions_node.css('direction').each do |direction_node| 
          direction_node.css('prediction').each do |prediction|
            // stuff here 
```

感谢您的时间和考虑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T20:26:54.997

看起来您忽略了没有嵌套值的键，例如`title`and `a`, `b`。

```
 "title"=>"xxxx"
    },
    "a"=>"xx",
    "b"=>"x"
}, 
```

您的最终代码应如下所示

```
if @data["body"]["predictions"].present? 
 @data["body"]["predictions"].each do |p|
  p.each do |d|
   if d.kind_of? Hash
    d.each do |k| 
     if k.kind_of? Array
      k.each do |x|
        if x.kind_of? Array
          x.each do |y|
            if y.kind_of? Hash
              puts y["epochTime"]
            end
          end
        end
      end 
    end
    end
   end
  end
 end
end 
```

上面的代码很难看，但你是 C++ 程序员，你可能会喜欢它：P

# java - Error in generatin parsing tree using Apache OpenNLP

> ID：15324555
> 
> 赞同：0
> 
> 时间：2013-03-10T16:27:01.183
> 
> 标签：java, apache, opennlp

```
public static void main(String[] args)
{
String parsed_sentence = null;
        try {

            parsed_data = new FileInputStream("src/DATA/en-parser-chunking.zip");
            System.out.println("fetched from the file");
            ParserModel model = new ParserModel(parsed_data);
            System.out.println("model created");
            Parser parser = ParserFactory.create(model);
            System.out.println("parseer created");
            String t = "The quick brown fox jumps over the lazy dog .";
            opennlp.tools.parser.Parse topParses[] = ParserTool.parseLine(t, parser, 1);
            System.out.println("parsed ");
            System.out.println(topParses[0]);
        }
        catch (Exception ex)
        {
          System.out.println("Error");
        }

    }  
}
} 
```

Output : fetched from the file Exception in thread "main" java.lang.OutOfMemoryError: Java heap space....

while running this project in Netbeans ,I am getting this error i dont know what to do. I did exactly told on the OpenNLP site [http://opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.parser](http://opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.parser) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:32:04.100

（[netbeans中的Java堆空间..但我已经增加了堆大小！](https://stackoverflow.com/questions/705605/java-heap-space-in-netbeans-but-ive-increased-the-heap-size-already)）......这已经解决了我的问题......我需要在我的项目的VMX变量中添加它......

# java - 在Java中扣除“this”？

> ID：15324562
> 
> 赞同：-3
> 
> 时间：2013-03-10T16:27:48.180
> 
> 标签：java, python, syntax

根据[这个关于 SO Python 的高度投票的答案，](https://stackoverflow.com/a/68324/1527084)它强制`self`在实例方法中声明，因为语言设计者希望防止像在 Java 中那样通过`this`.

“可以用 Java 推导出来”是什么意思`this`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:29:54.207

如果您在 Java 中引用一个没有限定符的标识符（例如，`something`），编译器将检查是否存在具有该名称的局部变量，如果没有，将推断它必须是一个字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T16:31:10.753

我相信原始帖子意味着在某些情况下 Java 需要使用“this”来明确您所指的变量。例如：

```
public class A {

    private String b;
    private String c;

    public void setB(String b) {
        this.b = b; // <-- this removes confusion for Java
    }

    public void setC(String _c) {
        c = _c; // <-- this is not needed here
    }

} 
```

# c++ - 读取文本文件：读取多个值（如果存在）

> ID：15324564
> 
> 赞同：1
> 
> 时间：2013-03-10T16:28:16.007
> 
> 标签：c++, file-io

我在尝试让程序读取到文本文件中的行尾时遇到问题。

我正在尝试从具有以下格式（空格分隔的字段）的文本文件（每行一项）中读取数据：

*   房子 (12345)
*   类型（A = 汽车或 M = 摩托车）
*   执照 (WED123)
*   年份 (2012)
*   建议零售价 (23443)

该数据将用于计算车辆登记总数。

目前程序正在读取所有格式如上的行，但是一个房子可能有*不止一个车辆*，因此行上有额外的数据（在这种情况下，除了第一个字段之外的所有字段都重复）。例如：

```
111111 A QWE123 2012 13222 M RTW234 2009 9023

//     ^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^
//        first vehicle      second vehicle 
```

一旦到达包含附加数据的行，程序就不会读取它并进入无限循环。如何读取行中的附加数据以到达文件末尾并从无限循环中停止程序。

```
#include <stdlib.h>        
#include <iostream>           
#include <fstream>

using namespace std;

int main ()                   // Function Header
{                             // Start Function
    int house;
    char  type; 
    string license; 
    int year, msrp ; 
    char ch; 

    ifstream inData; 
    ofstream outData; 

    inData.open("register.txt"); 
    outData.open("vehicle.txt"); 

    inData >> house;               // Priming Read

    while (inData) {             // Test file stream variable

        do { 
            inData >> type;         
            inData >> license; 
            inData >> year;
            inData >> msrp; 

            outData << house << type << license << year << msrp << endl; 

            ch = inData.peek();
            inData >> house;

        } while(ch != '\n');            // Check for end of line 

    }                              // End while 

    system ("Pause");      
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:49:30.853

您的程序将很难检测到行尾。当它尝试读取“额外数据”但遇到下一行时，流上会发生错误，从而阻止您再次读取。

`house`您可以通过不读取内部循环中的值来“修复”您的程序。相反，请在检测到行尾后阅读它。

```
 ch = inData.peek();
        //inData >> house;          // WRONG: house might be next vehicle type

    } while(ch != '\n');            // Check for end of line 

    inData >> house;                // CORRECT

}                              // End while 
```

但是，处理此问题的更好方法可能是使用`getline`and `istringstream`。首先使用`getline`. 将输入放入`istringstream`. 然后，从中获取其余数据。请参阅 MM 的版本以了解这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:36:05.077

如果我正确理解您的问题，您可以使用以下示例。

如果先读取`house`然后`type`, `license`, `year`, `msrp`.

```
string line;
while (getline(inData , line))
{
    istringstream iss(line, istringstream::in);

    iss >> house;
    while (iss >> type >> license >> year >> msrp)
    {
      outData << house << type << license << year << msrp << endl; 
    }
} 
```

# sql-server - T-SQL for 循环遍历列名并插入

> ID：15324566
> 
> 赞同：-1
> 
> 时间：2013-03-10T16:28:19.533
> 
> 标签：sql-server, tsql, loops, insert, data-warehouse

我正在研究数据仓库项目，我被困在了那个时刻，我需要遍历维度表中的列名并选择与我的基本数据表中特定列名相对应的值（具有实际数据的那个，我想插入事实表）。这是我的表结构：

数据表

```
closing_course | max_course | min_course
234            | 241        | 187
254            | 277        | 198 
```

尺寸表

```
course_id | course_type
1         | closing_course
2         | max_course
3         | min_course 
```

简而言之，我想为每种课程类型构建一个程序，它将获得每门课程的价值，并在 FACT TABLE 中插入 course_id 和对应的值（在其他维度数据中，但我认为我可以处理）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:55:36.893

我不太确定您在寻找什么，也许您可​​以举个例子来说明您想要实现的目标。这里有一些可能的解决方案：

```
INSERT INTO FactTable (courseId,value)
SELECT 1, closing_course FROM DataTable
UNION
SELECT 2, max_course FROM DataTable
UNION
SELECT 3, min_course FROM DataTable 
```

# marionette - Backbone.Marionette 布局、区域和视图

> ID：15324567
> 
> 赞同：0
> 
> 时间：2013-03-10T16:28:29.987
> 
> 标签：marionette

在 May Marionette 应用程序中，我确实设置了具有 3 个区域的布局

1.  标头区域
2.  主要区域
3.  页脚区域

我正在使用页脚区域来显示我的模型（itemViews）的详细视图。

现在我确实有这种情况，我想将此区域与 collectionView 结合使用按钮组：Add-Button（添加模型/itemView）和 OK-Button（关闭/隐藏 collectionView 和按钮组. 我想将这 2 个 itemViews 作为一个组件处理，在 1 步中显示和隐藏它们。

我不确定这样做的正确方法是什么。

选项1：在footerRegion的subregion1中显示collection view，在footerRegion的subregion2中显示button-group

选项2：创建一个新的布局并嵌套它

选项3：以某种方式使用compositeView？

选项4：与jquery隐藏/显示按钮组的某种组合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T20:09:12.877

我的投票是选项 #2：嵌套布局。我经常这样做，而且效果很好。IMO，它易于管理且易于使用。

# sql - 在具有多列的 Acess 数据库中返回唯一值

> ID：15324568
> 
> 赞同：1
> 
> 时间：2013-03-10T16:28:30.573
> 
> 标签：sql, ms-access

现在已经在谷歌上搜索了几个小时。但是找不到让我的 sql 查询工作的方法。

```
SELECT barn.förnamn+' '+barn.efternamn AS Child, målsman.förnamn+' '+målsman.efternamn AS Parent, Målsman.postnummer
FROM barn INNER JOIN Målsman ON barn.Postnummer = Målsman.Postnummer
WHERE (((Målsman.postnummer) Like '*23*')); 
```

我有两张桌子。`Målsman`和`Barn`。这是一张孩子和父母合二为一的桌子。这两个都有列；`Förnamn`,`Efternamn`和`Postnummer`. 现在有些孩子有同一个父母，有些父母也有两个孩子。这导致两个孩子具有相同的“ `postnummer`”，两个父母具有相同的“ `postnummer`”。因此，当我执行此查询时，我的结果会返回重复项。

这是我制作这个数据库的方式有问题，还是我可以更改我的查询以不重复。我已经尝试过，`Distinct`但似乎没有用，而且我听说在某个地方您可以使用 order by 或 group by。不明白。

因此，任何建议将不胜感激。:)

我从运行中得到的输出是

[结果图片](http://i50.tinypic.com/2ivtle.png)

所以我不希望同一个孩子多次出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:14:05.290

问题并不完全清楚。但是，要将一个父母与一个特定的孩子联系起来，您可以尝试以下操作：

```
SELECT Child, MIN(Parent) AS Parent, postnummer FROM (
SELECT barn.förnamn+' '+barn.efternamn AS Child, målsman.förnamn+' '+målsman.efternamn AS Parent, Målsman.postnummer as postnummer
FROM barn INNER JOIN Målsman ON barn.Postnummer = Målsman.Postnummer
WHERE (((Målsman.postnummer) Like '*23*'))
) a
GROUP BY child, postnummer 
```

# java - 将对象传递给抽象类？

> ID：15324569
> 
> 赞同：2
> 
> 时间：2013-03-10T16:28:32.857
> 
> 标签：java, object, abstract

我正在当地大学学习编程课程。我的导师英语说得不是很好，所以有时很难理解他的要求。

我已经完成的作业的第一部分如下： 一家机械车间有 100 个客户，每个客户是一个数组中的一个对象，其中包含各种数据。基类是服务，并且有四个特定服务（轮胎、机油、散热器和刹车）的派生类。每个客户都被分配了一项服务。打印所有客户的详细信息列表。

第二部分，我完全不明白他在问什么：如果上一次服务是在几个月前完成的，我们正在打印优惠券。我已经计算了日期，如果服务是在一定时间之前完成的，我需要将服务数组中的一个对象传递给抽象优惠券类。他的确切指示如下：

> 优惠券是一个抽象父类。抽象类应该有可变的年、月和日。使服务优惠券扩展抽象优惠券类。几个子类 - BrakeService 优惠券、轮胎优惠券、发动机油优惠券、散热器优惠券扩展了服务优惠券。将到期日期添加到 2013 年的随机日期，并在对象的构造函数中将其设为最终日期。服务对象通过服务对象调用优惠券。优惠券确定它接收的服务对象的类型并相应地打印消息。这应该很简单。

这就是我认为它所要求的（纯粹是为了证明我们知道如何使用抽象和继承的练习）：

[http://www.java-forums.org/attachments/new-java/4632-passing-object-abstract-class-rtc3ild.png](http://www.java-forums.org/attachments/new-java/4632-passing-object-abstract-class-rtc3ild.png)

我应该将对象传递给抽象类吗？如果是这样，我应该参加我的主要课程并将其作为抽象优惠券课程的扩展吗？

我现在拥有的是扩展具体 Service 类的抽象 Coupon 类，ServiceCoupon 类扩展 Coupon，以及四个扩展它的具体类。我不确定如何调用 Coupon 类或将其基类中的对象传递给它。

对不起，我不能更清楚。我也不知道他想要什么。

***编辑：*** ****我遇到的主要问题是我想将一个对象传递给另一个抽象的类。我无法实例化这个类，因为它是抽象的，所以我不知道如何将对象传递给方法。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:37:51.137

我认为他想要的是一种工厂模式，即你传入你`Service`的，工厂确定类型，`Service`然后返回适当的`Coupon`实现。基于 a 的东西`Map`可能会奏效

```
final Map<Class<? extends Service>, Class<? extends Coupon>> myMap;

public Coupon getCoupon(final Service service) {
  final Coupon coupon = myMap.get(service.getClass()).newInstance();
  //init stuff
  return coupon;
} 
```

显然，这只有在你有一个 noargs 构造函数的`Coupon`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:39:51.500

优惠券不应扩展 Service 类。您应该有两棵继承树，一棵用于优惠券，一棵用于服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:23:19.057

我想问题的第二部分是要求这样的事情：

```
import java.util.*;
abstract class Coupon
{
    int year;
    int month;
    int day;
}
class Service extends Coupon
{
    public String getCouponMessage(Coupon coupon)
    {
        if (coupon instanceof BrakeService)
        {
            return "BreakService message";
        }
        else if (coupon instanceof Tire)
        {
            return "TireService message";
        }
        else if (coupon instanceof Engine_Oil)
        {
            return "Engin_Oil Message";
        }
        else if (coupon instanceof Radiator)
        {
            return "Radiator Message";
        } 
        else
        {
            return "Invalid Service";
        }
    }
}
class BrakeService extends Service
{
    final Date exp_date;
    public BrakeService(int day,int month , int year)
    {
        Calendar cal = Calendar.getInstance();
        this.day = day;
        this.month=month;
        this.year=year;
        cal.set(year, month, day);
        exp_date = cal.getTime();
    }
}
class Tire extends Service
{
    final Date exp_date;
    public Tire(int day,int month , int year)
    {
        Calendar cal = Calendar.getInstance();
        this.day = day;
        this.month=month;
        this.year=year;
        cal.set(year, month, day);
        exp_date = cal.getTime();
    }
}
class Engine_Oil extends Service
{
    final Date exp_date;
    public Engine_Oil(int day,int month , int year)
    {
        Calendar cal = Calendar.getInstance();
        this.day = day;
        this.month=month;
        this.year=year;
        cal.set(year, month, day);
        exp_date = cal.getTime();
        System.out.println(exp_date);
    }
} 
class Radiator extends Service
{
    final Date exp_date;
    public Radiator(int day,int month , int year)
    {
        Calendar cal = Calendar.getInstance();
        this.day = day;
        this.month=month;
        this.year=year;
        cal.set(year, month, day);
        exp_date = cal.getTime();
    }
} 
```

# reporting - OpenERP 使用 openoffice / libreoffice 报告多个采购订单

> ID：15324570
> 
> 赞同：1
> 
> 时间：2013-03-10T16:28:34.043
> 
> 标签：reporting, openerp

我能够为对象 purchase.order 添加报告记录。当我选择并打开一个特定的采购订单时，它就会出现。

如何打印多份采购订单、多份库存变动或多份销售订单等的报告？

我在报告记录的“对象”（模型）中指定了什么，这个打印菜单会出现在哪里？

（我正在使用 aeroo 报告引擎，我能够指定一个

```
 <for each..> ... </for> 
```

循环，但它只打印一条记录（这是当前选择的采购订单）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:52:23.360

在报告模板级别，您有两个变量`o`和`objects`. 如果您只有一个项目，则第一个存在。第二个应该始终可用并且必须包含所有选定的对象（或已通过自定义解析器过滤的对象）。

提示：当你对如何做事情有疑问时……看看其他模块是如何做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:47:34.420

I. 创建您的报告，因为它仅适用于一个对象。

`<for each="o in objects"></for>`正如你定义的

二、在您的 OpenERP 上，转到 Settings->Customization->Aeroo Reports->Reports 并打开您之前创建的报告。在报告上，单击高级选项卡并单独启用处理，然后保存。

希望这对您有所帮助。

看待，

# erlang - Erlang：orddict:size() 函数用于记录？

> ID：15324572
> 
> 赞同：0
> 
> 时间：2013-03-10T16:28:37.787
> 
> 标签：erlang, size, record, ordereddictionary

我有以下带有此错误的代码：

```
10> clients_size:init().
{state,[]}

11> clients_size:size().
** exception error: bad argument
     in function  length/1
        called as length(2)
     in call from orddict:size/1 (orddict.erl, line 65)
     in call from clients_size:size/0 (clients_size.erl, line 10) 
```

clients_size.erl

```
-module(clients_size).
-export([init/0, size/0]).
-record(state, {clients}). 

init() ->
    #state{clients=orddict:new()}.

size()->
    Size_of = orddict:size(#state.clients),
    io:format("size ~p ~n ",[Size_of]). 
```

我知道它是空的，但我仍然认为它会显示 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:46:45.940

您没有将任何变量传递给 orddict:size()。

state.clients 返回一个整数——记录状态中字段“客户”的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:03:02.177

我想到了！

```
-module(clients_size).
-export([init/0, size/1]).
-record(state, {clients}). 

init() ->
    #state{clients=orddict:new()}.

size(S)->
    Size_of = orddict:size(S#state.clients),
    io:format("reference:size ~p ~n ",[Size_of]). 
```

跑步：

```
19> c(clients_size).
{ok,clients_size}
20> X = clients_size:init().
{state,[]}
21> clients_size:size(X).   
reference:size 0 
 ok 
```

# c# - 在这种情况下如何使用 Regex.Replace？

> ID：15324573
> 
> 赞同：3
> 
> 时间：2013-03-10T16:28:50.427
> 
> 标签：c#, .net, regex, replace

我正在使用正则表达式来检查字符串的正确性（我想允许字符`A-Z`, `a-z`, `*`, `space`, `-`, `&`, `%`, `.`, `/`, `+`）。我的代码是这样的：

```
Regex r = new Regex("^[A-Z0-9.$/+%\\- ]+$");
string myString = "ABCDEFGH 12345 $%...     A"; //string ok

if (r.IsMatch(myString))
  System.Console.WriteLine("String alright!"); 
```

这是有效的，一切都很好。现在我只是想，也许我也可以处理不正确的字符串。我想将字符串中的不正确（非正则表达式有效）字符替换为`-`. 这可以用`Regex.Replace`. 所以我做了这个：

```
Regex r = new Regex("^[A-Z0-9.$/+%\\- ]+$");
string myString = "HELLO WÖRLD ß~# 50.00$"; //Ö,ß,~,# should be replaced by -

if (r.IsMatch(myString))
  System.Console.WriteLine("String alright!");
else
  myString = Regex.Replace(myString, r.ToString(), "-");

System.Console.WriteLine(myString); 
```

好吧，这是行不通的！作为输出，我得到：

```
HELLO WÖRLD ß~# 50.00$ 
```

我错过了什么？问题是正则表达式对吗？我可以检查一个字符串是否正确，但我不能正确使用这个正则表达式 Regex.Replace 函数。有没有办法使用 1 个正则表达式来检查字符串是否有效并使用`Regex.Replace`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T16:34:08.310

如果要（匹配和）替换与验证表达式中的字符不匹配的字符，则需要另一个表达式来专门匹配这些字符。例如：

```
[^A-Z0-9.$/+%\- ] 
```

可以用作：

```
myString = Regex.Replace(myString, @"[^A-Z0-9.$/+%\- ]", "-"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T16:32:33.720

您的代码实际上没有意义。
如果`r.IsMatch()`返回 false，则您知道正则表达式与字符串不匹配，因此替换任何匹配项都不会产生效果。（没有匹配项）

相反，您应该创建一个匹配任何*无效*字符的正则表达式，检查它*是否不*匹配，如果匹配，则调用`.Replace()`.

* * *

此外，您正在滥用正则表达式。

如果你有一个`Regex`实例，你应该调用它的`Replace` *实例*方法：

```
myString = r.Replace(myString, "-"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:03:34.740

您的替换没有发生，因为正则表达式找不到任何要替换的内容。

要使用相同的正则表达式，您可以做的是将“myString”转换为字符并检查每个字符的有效性。

示例（来自 java，但应该很容易理解）：

```
if (r.IsMatch(myString)){
            System.Console.WriteLine("String alright!");
}  else {

    // java iteration
    for(int i = 0; i < myString.length(); i++){
        Character c = myString.charAt(i);
        if(!c.toString().matches(reg)){
            myString = myString.replace(c.toString(), "-");
        }
    }

} 
```

# asp.net - jqGrid 行更新

> ID：15324577
> 
> 赞同：2
> 
> 时间：2013-03-10T16:29:11.523
> 
> 标签：asp.net, jqgrid, jqgrid-asp.net

我有一个关于 Jqgrid 行更新的问题。我们有一个如下所示的数据库表。

id :1 field1: john field2:black

想象一下，一个用户想要更新第一行，它有一个名为 id=1 的字段。用户双击该行并打开该行的详细信息。如您所见，第一行 field1 是 john，而 field2 是黑色。例如，如果另一个用户在第一个用户之后双击同一行并将 field2 更新为红色，会发生什么情况？第一个用户仍在更新屏幕上。在他的屏幕上，field2 仍然是黑色的。之后，第一个用户仅将 field1 更新为 jack 并保存该行。结果将是 field1：jack，field2：black。因为第一个用户不知道 field2 的变化。并且第二个用户的 field2 更改已经消失了。在这个例子中如何防止数据丢失？

当用户双击并保存行中的任何更改时，我会更新所有字段。在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:07:26.030

您描述的是标准[并发控制](http://en.wikipedia.org/wiki/Concurrency_control)问题。在 Web 开发的情况下，通常使用[乐观并发控制](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)来解决问题。作为 ASP.NET 开发人员，您可能使用 Microsoft SQL Server 来保存数据。SQL Server 支持非常有用的数据行[版本](http://msdn.microsoft.com/en-us/library/ms182776.aspx)类型（也称为`timestamp`数据类型）。不可为空的`rowversion`列在语义上等同于`binary(8)`列。使用的主要优点是使用`rowversion`简单。SQL Server 支持与数据库关联的内部计数器。每个`@@DBTS`变量都可以访问计数器。每次修改数据库表中的一行时，该`rowversion`列将**自动更改**的值，`@@DBTS`并将`@@DBTS`递增。可以使用附加`rowversion`列轻松确定自上次读取以来该行中的任何值是否已更改。

因此，如果您有一个现有的数据库表，您只需添加一列来保存行更新计数器的行版本（时间戳）。例如语句

```
ALTER TABLE dbo.Users ADD RowUpdateTimeStamp rowversion NOT NULL 
```

将`RowUpdateTimeStamp`类型的列添加`rowversion`到表中`dbo.Users`。如果您创建新的用户表，您可以执行以下操作

```
CREATE TABLE dbo.Users (
    Id int NOT NULL IDENTITY,
    FirstName nvarchar(64) NOT NULL,
    LastName nvarchar(64) NOT NULL,
    RowUpdateTimeStamp rowversion NOT NULL,
    CONSTRAINT PK_Users PRIMARY KEY CLUSTERED (Id ASC),
    CONSTRAINT UC_Users_LastName_FirstName UNIQUE NONCLUSTERED (LastName ASC, FirstName ASC)
) 
```

它会创建您描述的表，但该表将具有额外`RowUpdateTimeStamp`的类型列`rowversion`。再次强调，不需要手动在列中保存任何值，这一点很重要。SQL Server 将自动保存/修改列的值。

如果您使用表中的数据填充网格，例如，您可以将隐藏列包含在数据库表列中`RowVersion`的值中。`RowUpdateTimeStamp`中对应列的定义`colModel`如下

```
name: "RowVersion", sortable: false, hidden: true, hidedlg: true,
editable: true, editrules: { edithidden: false } 
```

这意味着隐藏的值`RowVersion`将与另一个可编辑列的值一起发送。

修改网格行的服务器方法返回修改后的`RowUpdateTimeStamp`. 我使用[内联编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)或[表单编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events)的`aftersavefunc`回调来使用从服务器返回的值修改网格的列。`afterSubmit``RowVersion`

如果服务器从客户端接收到修改请求，它总是`RowVersion`在修改行。服务器代码验证数据库中相应数据的列值是否小于或相等 `RowUpdateTimeStamp`。如果数据库具有更高的价值，那么*另一个*用户已经修改了数据。如果服务器返回带有一些错误 HTTP 代码 (>=300) 的 HTTP 响应。jqGrid 将响应解释为错误并显示相应的错误消息。可以使用[errorTextFormat](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events)或[errorfunc](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)来自定义错误消息。

我在所有生产实现中使用上述方法。[您可以在旧答案](https://stackoverflow.com/a/2663654/315935)中阅读有关该主题的其他信息。

# controls - 如何从 JavaFX 中的 UI 控件中检索阶段

> ID：15324579
> 
> 赞同：6
> 
> 时间：2013-03-10T16:29:22.620
> 
> 标签：controls, javafx-2, stage

这个问题很简单，但我没有找到任何与此相关的例子。我想在 JavaFX 中获取 UI 控件的包含阶段。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T16:59:31.273

```
((Stage) Control.getScene().getWindow()) 
```

# php - Wordpress 在侧边栏中显示所有子类别 + 帖子子类别下的帖子

> ID：15324581
> 
> 赞同：0
> 
> 时间：2013-03-10T16:29:31.483
> 
> 标签：php, wordpress, categories, sidebar

抱歉标题复杂。

我正在使用此代码，以显示我的子子类别及其下的帖子。问题是代码显示了我在网站上拥有的所有子子类别（+ 帖子）。我只想显示与帖子相关的子类别。Child one 下的所有子子类别都与帖子有关，因此您可以说我想显示 child on 下的子子类别，因为帖子与 child on 相关。

类别结构（年份在标题中）：

*   G
    *   孩子 1
        *   游戏第一年
            *   在这里发帖
        *   游戏第 2 年
            *   在这里发帖

我的代码：

```
<?php
$cat_id = get_query_var( 'cat' );
$subcats = get_categories( 'child_of=' . $cat_id ); // child categories

class Cat_Walker extends Walker_Category {
    function end_el( &$output, $page, $depth = 0, $args = array() ) {
        $posts = get_posts( 'cat=' . $page->term_id );

        if ( sizeof( $posts ) > 0 ) {
            $output .= '<ul>';

            foreach ( $posts as $post ) {
                $output .= sprintf( '<li><a href="%1$s">%2$s</a></li>', get_permalink( $post->ID ), $post->post_title );
            }

            $output .= '</ul>';
        }

        $output .= '</li>';
    }
}

foreach ( $subcats as $subcat ) {
    $subsubcats = get_categories( 'child_of=' . $subcat->term_id ); // sub child categories

    foreach ( $subsubcats as $subsubcat ) {
        $args = array(
            'title_li'         => '',
            'show_option_none' => '',
            'taxonomy'         => 'category',
            'child_of'         => $subsubcat->term_id,
            'walker'           => new Cat_Walker( )
        );

        wp_list_categories( $args );
    }
}

?> 
```

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:46:35.320

我相信你得到了错误的类别 ID。你应该使用这个：

```
$category = get_category(get_query_var('cat'));
$cat_id = $category->cat_ID; 
```

代替

```
$cat_id = get_query_var( 'cat' ); 
```

# java - 使用 JPanel 显示图像

> ID：15324582
> 
> 赞同：2
> 
> 时间：2013-03-10T16:29:31.867
> 
> 标签：java, swing, jpanel, preferredsize

我在这里使用以前的主题之一编写了自己的 ImagePanel：

```
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import javax.swing.JPanel;

public class ImagePanel extends JPanel{

    private BufferedImage image = null;

    public ImagePanel(BufferedImage im) {
       image = im;
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(image, 0, 0, null);            
    }
} 
```

然后我认为在普通的 JPanel 上添加这个面板会很好（使用所有 NetBeans 的东西将它放在框架上会更容易）。所以我添加了一个，NetBeans 为我生成了一些代码： `private javax.swing.JPanel pnlImagePanel;` 到了我想显示图像的那一刻，所以：

```
File selectedFile = new File(path);
try {
       image = ImageIO.read(selectedFile);
} catch(IOException ex) {
       throw new RuntimeException(ex);
}
ImagePanel imPanel = new ImagePanel(image);
this.pnlImagePanel = imPanel;
this.pnlImagePanel.repaint(); 
```

问题很明显——我没有得到任何结果。它不应该工作吗？我已经覆盖了paintComponent 方法，所以应该触发多态性。还是我缺少什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T16:34:02.657

仅将成员变量分配`pnlImagePanel`给您的`ImagePanel`将不起作用，您必须*将面板添加*到`JPanel`容器中：

```
pnlImagePanel.add(imPanel); 
```

您需要提供`imPanel`一个尺寸，以便可以看到图像。最简单的方法是使用允许子面板占据最大区域的布局管理器。而不是默认值`FlowLayout`，您可以使用`GridLayout`：

```
pnlImagePanel.setLayout(new GridLayout()); 
```

`repaint`这里不需要调用。油漆链机制将确保您的面板上漆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T16:34:22.280

覆盖`getPrefferedSize()`以`ImagePanel`返回图像大小，即：

```
 @Override
    public Dimension getPreferredSize() {
        if (image == null) {
            return super.getPreferredSize();
        }
        return new Dimension(image.getWidth(this), image.getHeight(this));
    } 
```

而且，是的，不要忘记按照@Reimeus 的建议将图像面板添加到容器中。给他+1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T01:47:19.943

```
import java.awt.BorderLayout;
import java.awt.Graphics;
import javax.swing.ImageIcon;

/**
 * imagePanel
 * @author zhangqi hizhangqi@yahoo.com
 * @date Jan 10, 2013 4:45:05 PM
 * @version V1.0
 */
public class ImagePanel extends JPanel
{

    private static final long serialVersionUID = 1L;
    private BorderLayout borderLayout = new BorderLayout();
    private ImageIcon image = null;

    public ImagePanel(ImageIcon image)
    {
        this.image = image;
        this.setLayout(borderLayout);
    }

    protected void paintComponent(Graphics g)
    {
        setOpaque(true);
        super.paintComponent(g);
        if (image != null)
            g.drawImage(image.getImage(), 0, 0, this.getWidth(),
                    this.getHeight(), this);
    }

    public ImageIcon getImage()
    {
        return image;
    }

    public void setImage(ImageIcon image)
    {
        this.image = image;
    }
} 
```

# windows - Windows 上的 Pin 处理器 CPU 隔离

> ID：15324586
> 
> 赞同：7
> 
> 时间：2013-03-10T16:30:01.810
> 
> 标签：windows, multithreading, affinity, isolation, smp

在我主要工作的 linux 中，我们使用一种称为 CPU 隔离的技术，它可以有效地将进程锁定在处理器上，并阻止处理器运行其他任何东西。我们的内核人员做了一些魔术来处理中断。

在 Windows 中，我发现的最接近的东西是一个相似性概念，它似乎将进程/线程绑定到处理器。但它不能保证处理器仅运行该进程/线程，这意味着仍然可能存在上下文切换和其他抖动。

有没有办法在 Windows 上隔离 CPU 以获得半确定性的运行时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T08:48:20.867

在用户模式下没有确切的方法来做到这一点。Windows 主要试图防止应用程序占用所有系统资源。但是您可能可以将大多数其他进程隔离到另一个内核/处理器，以便您的代码可以在主要专用于它的内核上运行。

首先[在 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682623%28v=vs.85%29.aspx)上查看有关枚举进程的代码。除了您的枚举代码将指定 PROCESS_SET_INFORMATION 作为[OpenProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320%28v=vs.85%29.aspx)的标志。您可能需要使用管理员权限运行的代码才能为未作为 NT 凭据运行的进程执行此操作。对于获得的每个进程句柄，调用[SetProcessAffinityMask](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686223%28v=vs.85%29.aspx)将进程设置为在除一个之外的所有内核上运行。然后将您的进程设置为在您从所有其他进程句柄中剔除的保留核心上运行另一个。

这不会处理从启动和负载平衡到您尝试运行代码的核心的其他进程。

你的旅费可能会改变。如果这只是用于测试或专用于您的代码的机器，那么它可能会很好。如果这是一个旨在与所有其他应用程序一起运行的商业应用程序，那么当客户在运行您的代码时看到他们所有其他应用程序和服务都停止运行时，他们会感到非常失望。小心行事。

# eclipse - 如何自动执行测试

> ID：15324589
> 
> 赞同：1
> 
> 时间：2013-03-10T16:30:33.447
> 
> 标签：eclipse, unit-testing, coding-style, tdd

在 Eclipse 中，我创建了测试并且总是必须手动运行它。保存课程时，eclipse可以运行测试吗？这将节省很多时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:36:15.530

使用[Infinitest 插件](http://infinitest.github.com/user_guide.html)，该插件经过精心设计，能够做到这一点。

# ruby-on-rails - rvm install ruby 1.9.3：缺少必需的软件包

> ID：15324590
> 
> 赞同：6
> 
> 时间：2013-03-10T16:30:39.790
> 
> 标签：ruby-on-rails, rvm

我正在尝试通过 RVM 从 Ruby 1.8 切换到 1.9.3：

```
rvm install 1.9.3 
```

但每次我有一个警告：

```
Missing required packages: autoconf, automake, libtool, pkg-config, libyaml, readline, libxml2, libxslt, libksba, openssl, curl-ca-bundle, sqlite. 
```

我试过了

```
rvm pkg install libyaml 
```

但没有比这更好的了。每次我收到此警告时，它都会阻止我安装 rails 3（缺少 libyaml 和 openssl）。有人已经解决了吗？谢谢你的帮助。

我正在运行 Mac OS X 10.8.2

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T17:03:00.927

尝试运行

```
rvm requirements 
```

进而：

```
brew install autoconf automake libtool pkg-config apple-gcc42 libyaml readline libxml2 libxslt libksba openssl sqlite 
```

如果您仍然有问题，可以查看 -[点击这里](http://www.interworks.com/blogs/ckaukis/2013/03/05/installing-ruby-200-rvm-and-homebrew-mac-os-x-108-mountain-lion)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T19:29:22.697

这是 RVM 1.19 的新功能，我们将努力改进消息，现在只需尝试：

```
rvm get head
rvm install 1.9.3 --autolibs=3 
```

# python - scikit-learn 中的“算术顺序”是什么意思？

> ID：15324593
> 
> 赞同：3
> 
> 时间：2013-03-10T16:31:10.770
> 
> 标签：python, scikit-learn

Python 包 scikit-learn 中的模型对象具有返回概率/类矩阵的方法（例如 predict_log_proba()），其中类“按算术顺序排序”（这是[文档](http://scikit-learn.org/0.13/modules/generated/sklearn.svm.SVC.html)的表述方式）。

有谁知道这意味着什么？这是词典、数字还是其他？谷歌搜索这个表达式会发现这些相同的文档作为主要点击，所以我猜这不是标准命名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:41:21.510

顺序是类标签的排序顺序：如果您的标签是`["ham", "spam", "eggs"]`，则它们排序为产生`['eggs', 'ham', 'spam']`（在`classes_`属性中可用）。

输出中的第一列`decision_function`，`predict_proba`然后`predict_log_proba`对应于类`eggs`，第二列到`ham`，第三列到`spam`。作为一个例外，当有两个类时，`max`of`classes_`被认为是“正”类，并且只返回该类的值。

公式“算术顺序”是从类标签必须是整数时的保留。我只是[更改了措辞](https://github.com/scikit-learn/scikit-learn/commit/d2254e4bff3501054851a0f20724a933f10b6683)，因此下一个版本将对它的工作原理进行更清晰的描述。

# c++ - 使用opencv和qt进行人脸检测

> ID：15324596
> 
> 赞同：0
> 
> 时间：2013-03-10T16:31:31.303
> 
> 标签：c++, qt, opencv

我正在尝试使用opencv和qt实现一个实时人脸检测程序。代码是mainwindow.h

```
 #include <QMainWindow>
 #include <opencv/cv.h>
 #include <opencv/highgui.h>
 #include <QLabel>

 namespace Ui {
 class MainWindow;
 }

 class MainWindow : public QMainWindow
  {
   Q_OBJECT
   public:
 explicit MainWindow(QWidget *parent = 0);
~MainWindow();
Ui::MainWindow* _ui;
CvCapture* _capture;
IplImage*       _img;
CvHaarClassifierCascade* _cascade;
CvMemStorage*   _storage;
QList<CvScalar>  _colors;
QPixmap*         _pixmap;
QTimer*          _timer;
QLabel* labelCapture;
private slots:
void on_actionCapture_triggered();
 };
//#endif // MAINWINDOW_H 
```

主文件

```
 #include <QtGui/QApplication>
  #include "mainwindow.h"

   int main(int argc, char *argv[])
  {
   QApplication a(argc, argv);
   MainWindow w;
    w.show();

   return a.exec();
    } 
```

主窗口.cpp

```
 #include "mainwindow.h"
    #include "ui_mainwindow.h"
    #include "opencv/cv.h"
    #include "opencv/highgui.h"
    #include "opencv/cvaux.h"
    #include <QTimer>
    #include <QLabel>

    MainWindow::MainWindow(QWidget *parent) :
  QMainWindow(parent),
  _ui(new Ui::MainWindow)
  {
_ui->setupUi(this);
QLabel* labelCapture;
_capture = cvCaptureFromCAM( 0 );
_cascade = (CvHaarClassifierCascade*)cvLoad("haarcascade_frontalface_alt2.xml");
_storage = cvCreateMemStorage(0);

_colors << cvScalar(0.0,0.0,255.0) << cvScalar(0.0,128.0,255.0)
        << cvScalar(0.0,255.0,255.0) << cvScalar(0.0,255.0,0.0)
        << cvScalar(255.0,128.0,0.0) << cvScalar(255.0,255.0,0.0)
        << cvScalar(255.0,0.0,0.0) << cvScalar(255.0,0.0,255.0);

  _timer = new QTimer(this);
  connect(_timer, SIGNAL(timeout()), this, SLOT(on_actionCapture_triggered()));
  _timer->start(10);
  labelCapture=new QLabel();
   }

  MainWindow::~MainWindow()
  {
cvReleaseImage(&_img);
cvReleaseCapture(&_capture);
delete _ui;
  }

   void MainWindow::on_actionCapture_triggered()
   {
// Query camera for next frame
_img = cvQueryFrame( _capture );

if (_img)
{
    // Detect objects
    cvClearMemStorage( _storage );

    CvSeq* objects = cvHaarDetectObjects(_img,
                                         _cascade,
                                         _storage,
                                         1.1,
                                         3,
                                         CV_HAAR_DO_CANNY_PRUNING,
                                         cvSize( 100, 100 ));

    int n = (objects ? objects->total : 0);

    CvRect* r;
    // Loop through objects and draw boxes
    for( int i = 0; i < n; i++ )
    {
        r = ( CvRect* )cvGetSeqElem( objects, i );
        cvRectangle( _img,
                     cvPoint( r->x, r->y ),
                     cvPoint( r->x + r->width, r->y + r->height ),
                     _colors[i%8]
                    );
    }

    // Convert IplImage to QImage
    QImage image = QImage((const uchar *)_img->imageData,
                                         _img->width,
                                         _img->height,
                                         QImage::Format_RGB888).rgbSwapped();
    _pixmap = new QPixmap(QPixmap::fromImage(image));
     _ui->labelCapture->setPixmap(*_pixmap);
   }
   } 
```

但是我收到以下错误...关于函数 on_action_capture_triggered() 类 ui::mainWindow 没有名为“labelCapture”的成员请帮助...。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:03:14.610

那不是 OpenCV 的问题。您误解了 Qt 的基础知识。

我建议您使用 Qt Creator 创建新项目，然后使用 Qt Creators 设计器创建您的用户界面。因此，如果您这样做，您将获得带有**private** `Ui::MainWindow *ui`的简洁代码，然后使用 Qt Creators 设计器创建您的操作并对其进行编码。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T13:32:23.780

如果您的表单上有 A QLABEL 则将其重命名为 'labelCapture' 如果没有，则必须创建一个具有相同名称的名称，或者您可以将代码更改为 qlabel 的名称。祝你好运！

# ios - 未找到体系结构 i386 错误 iOS 的符号

> ID：15324597
> 
> 赞同：4
> 
> 时间：2013-03-10T16:31:36.753
> 
> 标签：ios, objective-c, core-plot

我的代码本身没有错误，但是当我尝试运行时，我得到了这个错误 - Symbol(s) not found for architecture i386 error iOS。我寻找答案，但到目前为止没有任何帮助。我确定我正在链接到正确的库。

此外，当代码本身在不同的项目中运行时，它确实可以工作。从本质上讲，我制作了一个应用程序的各个部分，并且在让它们一起工作时遇到了这个问题。这两个应用程序之间的一切都是相同的。唯一真正的区别是我将它与 coreplot 代码一起运行，所以我不确定这是否与它有关？

由于`TFHipple`元素而发生错误。这是错误的副本：

```
Ld /Users/jyurcho/Library/Developer/Xcode/DerivedData/PennStateStrengthandFitness-epmdweltrbdxujcyuhctckzwibzv/Build/Products/Debug-iphonesimulator/PennStateStrengthandFitness.app/PennStateStrengthandFitness normal i386
cd /Users/jyurcho/Desktop/Testing/PennStateStrengthandFitness
setenv IPHONEOS_DEPLOYMENT_TARGET 6.1
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr    /bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk -L/Users/jyurcho/Library/Developer/Xcode/DerivedData/PennStateStrengthandFitness-epmdweltrbdxujcyuhctckzwibzv/Build/Products/Debug-iphonesimulator -L/Users/jyurcho/Desktop/Testing/PennStateStrengthandFitness -F/Users/jyurcho/Library/Developer/Xcode/DerivedData/PennStateStrengthandFitness-epmdweltrbdxujcyuhctckzwibzv/Build/Products/Debug-iphonesimulator -filelist /Users/jyurcho/Library/Developer/Xcode/DerivedData/PennStateStrengthandFitness-epmdweltrbdxujcyuhctckzwibzv/Build/Intermediates/PennStateStrengthandFitness.build/Debug-iphonesimulator/PennStateStrengthandFitness.build/Objects-normal/i386/PennStateStrengthandFitness.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -ObjC -all_load -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.1 -lxml2 -framework QuartzCore -framework UIKit -framework Foundation -framework CoreGraphics -lCorePlot-CocoaTouch -o /Users/jyurcho/Library/Developer/Xcode/DerivedData/PennStateStrengthandFitness-epmdweltrbdxujcyuhctckzwibzv/Build/Products/Debug-iphonesimulator/PennStateStrengthandFitness.app/PennStateStrengthandFitness 
```

`Undefined symbols for architecture i386: "_OBJC_CLASS_$_TFHpple", referenced from: objc-class-ref in psuSecondViewController.o ld: symbol(s) not found for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation)`

我很确定我有我需要的所有框架

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:24:41.853

Check your build settings. If everything is correct, try a clean build of the whole project. Xcode is trying to link a simulator build of your app with an iOS device build of Core Plot.

# c# - DataTable 和（数据绑定）DataGridview 中的列数不匹配

> ID：15324598
> 
> 赞同：0
> 
> 时间：2013-03-10T16:31:42.037
> 
> 标签：c#, .net, winforms, datagridview

我和我一起工作`DataGridView`了`DataTable`很长时间。但我一直无法确定为什么/如何有时（不是到处）列数不匹配`DataGridvVew`，`DataTable`即使我把我`Datatable`的 as放在`DataSource`我的`DataGridView`.

```
myGrid.DataSource = myTable;
myGrid.Refresh();
MessageBox.Show(myTable.Columns.Count+"--"+myGrid.Columns.Count);// shows 5--0 
```

**编辑：（**在回答第一条评论）这里我的 DataTable 被创建为

```
DataTable myTable = new DataTable();
myTable.Columns.Add("Col1", typeof(int));
myTable.Columns.Add("Col2", typeof(string));
myTable.Columns.Add("Col3", typeof(string)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-08-02T19:44:48.697

当我将 DataGridView 控件放入 TabControl 时，我遇到了同样的问题。

DataGridView 控件位于 TabControl 的第二个选项卡上，默认情况下它在启动时不显示，当我切换到第二个选项卡时，我在实现的 DataGridView_CellFormatting 事件中遇到了问题。

我从微软那里找到[了这个：](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.tabcontrol?view=netframework-4.7.2&f1url=%3FappId%3DDev16IDEF1%26l%3DEN-US%26k%3Dk(System.Windows.Forms.TabControl);k(Designer_System.Windows.Forms.Design.FormDocumentDesigner);k(VisualSelection);k(TargetFrameworkMoniker-.NETFramework,Version%253Dv4.7.2)%26rd%3Dtrue)

“在显示标签页之前不会创建 TabPage 中包含的控件，并且在显示标签页之前不会激活这些控件中的任何数据绑定。”

我通过将以下代码行添加到我的 Form_Load 事件来解决我的问题：

```
tabControl1.SelectTab(1); //Selects the second tab 
```

# c# - 获取二维数组中的前一项

> ID：15324602
> 
> 赞同：-1
> 
> 时间：2013-03-10T16:31:52.583
> 
> 标签：c#, multidimensional-array, iterator

如何轻松获取二维数组中的上一个（和下一个）项目？我知道您可以使用以下方法进行迭代：

```
 for (byte x = 0; x < grid.GetLength(0); x++) 
 {
   for (byte y = 0; y < grid.GetLength(1); y++) 
   {
        //Here I should get previous item if certain bool returns false
   }
 } 
```

我能做到`y--`。但是如果行`y`中的第一个元素`x`呢？然后`y = (getLength(1) -1)`和`x--`。这对我来说看起来有点复杂：s

由于我的数组具有自定义类型“字段”的元素，因此我尝试使用以下代码创建一个 previousField 属性：

```
 Field previousField = null;
    foreach (Field field in this.Grid)
    {
        field.PreviousField = previousField;

        previousField = field;
    } 
```

但是，这不适用于“for”循环迭代。因为我现在正在迭代两种完全不同的方式><。我不知道如何创建一个 nexField 属性。

那么，如何创建 nextField 属性？如果不可能，我如何通过我的数组来回迭代？我确实需要一个数组，因为我需要在代码的其他部分使用索引。

**编辑：**示例；

我正在使用回溯算法制作数独。二维数组表示网格（例如 9x9）。所以我遍历数组，插入随机数字（利用乐观，'这应该没问题'，否则，我们将返回并更改）。

插入数字时，我验证数字是否正确（在块、行和列中唯一）。我尝试所有可能的数字（1-9）。如果没有正确的数字，那么我可能在前一个单元格中出错了（所以我回溯）。如果那里没有有效数字，则再次转到上一个字段。如果找到一个有效数字，那么我再次转到下一个数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:39:37.630

如果您真的只需要此迭代的先前字段，则可以在循环中跟踪它。像这样的东西：

```
Field previous = null;
for (byte x = 0; x < grid.GetLength(0); x++) 
{
    for (byte y = 0; y < grid.GetLength(1); y++) 
    {
         //Here I should get previous item if certain bool returns false
         // ....
         previous = grid[x,y];
    }
} 
```

# javascript - EmberJS：链接到下一条记录

> ID：15324605
> 
> 赞同：0
> 
> 时间：2013-03-10T16:32:30.560
> 
> 标签：javascript, ember.js

我正在建立一个简单的图片库。目前我坚持使用 nextImage 方法。
我期望的是一个模型ID列表。所以我只是增加#nextImage 中的id。

*   #/照片/1
*   #/照片/2
*   #/照片/3

但是 emberjs 使用“随机”ID 作为 URL

*   照片/ember283
*   照片/ember352

**问题：如何从一个图像链接到下一个图像**

* * *

**这就是我在其中一个控制器中创建记录的方式**

```
//...
record = App.Photo.createRecord
      src : dataUrl
      title : "sometitle"

record.store.commit(); 
```

**photo_controller**

```
App.PhotoController = Ember.ObjectController.extend
  nextImage : ->
    length = App.Photo.find().get('length')
    id = parseInt(@get "content.id")
    nextId = if id == length then 1 else id+1

    @transitionToRoute 'photo', App.Photo.find(nextId) 
```

**列出照片的模板**

```
{{#each photo in controller}}
    <div style="margin: 5px">
        {{#linkTo photos.photo photo}}
        <img width="100" heigth="100"
        {{bindAttr src="photo.url"
        alt="photo.title"
        title="photo.title"}} />
        {{/linkTo}}
    </div>
{{/each}} 
```

**一张照片的模板**

```
 <a href="#" {{action nextImage}}>
    <img {{bindAttr src="url"}} />
        {{title}}
   </a> 
```

**应用路由器**

```
App.Router.map ->
  @route "start"
  @route "photos"
  @route "photo",
    path: "/photos/:photo_id" 
```

**店铺**

```
App.Store = DS.Store.extend
  revision: 12,
  adapter: 'DS.FixtureAdapter' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:42:34.213

我认为问题在于您对正在创建的 ID 有假设。nextImage 的这个替代实现怎么样？

```
App.PhotoController = Ember.ObjectController.extend({
    needs : ["photos"], //will be accessible via 'controllers.photos'
    nextImage : function(photo){
        var pc = this.get("controllers.photos"); //get the photos controller
        var indexOf = pc.indexOf(photo);
        var next = null;
        if(indexOf + 1 === pc.get("length"))
            next = pc.objectAt(indexOf +1);
        else
            next = pc.objectAt(0);
        this.get("target").send("photo", next);

    }
}); 
```

**它是如何工作的？** 通过需求属性，您可以访问照片控制器。现在我正在使用光控制器来确定下一张要显示的照片。如果您使用 REST-Adapter，这具有额外的优势，您不必发出额外的请求。

# php - PHP正则表达式替换由字母或空格包围的值

> ID：15324609
> 
> 赞同：0
> 
> 时间：2013-03-10T16:32:45.863
> 
> 标签：php, regex, preg-replace, expression

一段时间以来，我一直在尝试提出一个解决方案，但还没有找到一个可靠的解决方案。

我有一个字符串，其中每个换行符都表示为零 (0)

```
$string ="The quick brown fox0jumped over the lazy dog 0with 1308mm to spare."; 
```

我正在寻找一种方法来用 html 标签“br”替换不属于数字的每个 0。

到目前为止，我得到的最接近的是：

```
preg_replace('/([a-zA-Z ])0([a-zA-Z ])/', '$1\<br\>$2', $string); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T16:35:45.243

对于这样的事情，你应该使用断言：

```
/(?<!\d)0(?!\d)/ 
```

此外，第二个参数只是一个字符串。绝对没有必要转义尖括号——事实上你也不需要在正则表达式中转义它们。因此，只需`<br>`用作您的第二个参数。

# mysql - 选择带有 %-Tag 的 concat 排除一个字符

> ID：15324611
> 
> 赞同：0
> 
> 时间：2013-03-10T16:32:56.797
> 
> 标签：mysql, select, concat

我喜欢从表中选择所有以开头后任何字符结尾的行`abc`。我可以用这个`%`-Tag 做到这一点。现在我想选择相同的，'abc' 之后的所有字符，而`/`不是`%`. 我怎样才能形成这个？

```
SELECT * FROM table where myColumn LIKE CONCAT( 'abc',  '%' ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:35:47.040

你可以这样做：

```
SELECT * FROM table where myColumn LIKE 'abc%' and myColumn not like '%/%' 
```

# algorithm - 探索网格并找到旗帜的最快方式

> ID：15324620
> 
> 赞同：0
> 
> 时间：2013-03-10T16:33:19.653
> 
> 标签：algorithm, artificial-intelligence, graph-algorithm

我有一个带有块形式障碍物的 nxn 网格。我需要从一个随机点开始在这个网格的某个地方找到一个标志。您可以向左、向右或向前/向后移动。

在网格中的每个点，您都有关于您的四个块（上、下、左、右）的信息。BFS 似乎是一个很好的解决方案。但这让我想知道是否有更快或更好的探索算法？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:35:35.420

BFS 确实是您需要的算法。作为额外的好处，您会发现越过标志的单元格的最短路径。另请注意，您不需要以任何“常规方式”存储整个图形，在这种情况下，网格足以表示图形本身。我的许多学生都无法理解这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:07:11.887

这似乎是网格上的正常探索问题。如果您使用 BFS，那么您会找到距离 <= 起点和标志之间距离的所有点。

但是，我建议使用一些优化。

如果您知道标志的坐标（您的问题不清楚），您可以使用 A*。

如果您没有标志坐标，您可以尝试利用您从块中获得的信息。在方形网格上，BFS 创建圆形搜索前沿，这意味着您可以获得起点周围圆形区域内点的所有信息。这意味着您将评估该区域中的所有点。您可以尝试通过优先评估点来最大化您的探索，这些点可以为您提供有关图表的更多信息 = 具有许多未知邻居的点。

这将重定向您的搜索以尽快评估新点。找到标志后，您就有了距离的上限，您可以探索图形中可能改善界限的未知部分。您还可以在优先级函数中考虑到起点的距离，以避免搜索过远。优先功能中的平衡将取决于您的网格和障碍物的数量。

# c - 生产者/消费者 Mesa vs Hoare 语义

> ID：15324621
> 
> 赞同：2
> 
> 时间：2013-03-10T16:33:32.483
> 
> 标签：c, synchronization, producer-consumer, monitors

我遇到了两种不同的监视器实现。一种使用 while 循环的方法，该循环在每次入睡前检查特定条件是否为真，并在从睡眠中醒来时再次检查。另一个只检查一次 if 条件是否为真，如果不是，则进入睡眠状态，但在唤醒时不再检查。我相信前者使用 Mesa 语义，后者使用 Hoare 语义。我相信维基百科实现生产者消费者问题（[http://en.wikipedia.org/wiki/Producer-consumer_problem#Using_monitors](http://en.wikipedia.org/wiki/Producer-consumer_problem#Using_monitors)）的方式是使用 Mesa 语义。我们将如何使用 Hoare 来实现这一点？

会是这样吗？

```
monitor ProducerConsumer{
  int itemCount;
  int nextCount;
  condition full;
  condition empty;
  condition nextSem;

  init(n){
    itemCount = n;
  }

  void add(item){
    wait(mutex);
    if(itemCount == BUFFER_SIZE){
      cwait(full)
    }
    putItemIntoBuffer(item);
    itemCount = itemCount + 1;
    if(itemCount == 1){
      csignal(empty);
    }

    //To give priority to threads already in the monitor over
    //"normal" threads that want to enter the monitor for the 
    //first time.
    if(nextCount>0){
      signal(nextSem);
    }else{
      signal(mutex);
    }
  }

  void consume(){
    wait(mutex);
    if(itemCount == 0){
      cwait(empty);
    }
    item = removeItemFromBuffer();
    itemCount = itemCount - 1;
    if(itemcount == BUFFER_SIZE - 1 ){
      csignal(full);
    }

    //To give priority to threads already in the monitor over
    //"normal" threads that want to enter the monitor for the 
    //first time.
    if(nextCount>0){
      signal(nextSem);
    }else{
      signal(mutex);
    }
  }

  cwait(sem x){
    x.cnt = x.cnt + 1;
    if(nextCount > 0)
      signal(nextSem);
    else
      signal(mutex);
    endif
    wait(x);
    x.cnt = x.cnt - 1;
  }

  csignal(sem x){
    if(x.cnt > 1){
      nextCount = nextCount + 1;
      signal(x);
      wait(nextSem);
      nextCount = nextCount -1;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T04:04:11.383

我会这样做

```
monitor ProducerConsumer{
    int BUFFERSIZE ; 
    int itemCount ; // invariant 0 _< itemCount and itemCount _< BUFFERSIZE
    condition notFull; // signalled only if itemCount < BUFFERSIZE
    condition notEmpty; // signalled only if itemCount > 0

    init(n){
        // Assumption. init is called once, before any call to add or remove.
        // precondition n >_ 1
        BUFFERZISE = n ;
        itemCount = 0;
    }

    void add(Item item){
        if(itemCount == BUFFER_SIZE){
            wait(notFull)
        }
        putItemIntoBuffer(item);
        itemCount = itemCount + 1;
        if( ! empty( notEmpty) ) signal(notEmpty);
    }

    Item consume(){
        if(itemCount == 0){
            wait( notEmpty );
        }
        Item item = removeItemFromBuffer();
        itemCount = itemCount - 1;
        if( ! empty(notFull) ) signal(notFull);
        return item ;
    }
} 
```

我假设，因为这是一个监视器，所以进入和离开监视器是隐式操作。

请注意，在信号之后，线程无需等待。如果该语言有 signalAndLeave 操作，则可以使用。例如，在 Java 中，使用我的`monitor`包，你可以`add`以

```
if( ! notEmpty.isEmpty() ) notEmpty.signalAndLeave( ) ; else leave() ; 
```

`remove`你可以结束

```
if( ! notFull.isEmpty() ) return notFull.signalAndLeave(item) else { leave() ; return item ; } 
```

# smtp - 使用 telnet 连接到 smtp.gmail.com 会出现语法错误

> ID：15324622
> 
> 赞同：1
> 
> 时间：2013-03-10T16:33:37.417
> 
> 标签：smtp, gmail, telnet, smtp-auth

我已经使用 telnet 建立了与 smtp.gmail.com 的连接，并且能够使用 AUTH LOGIN 登录。在此之后，我尝试了命令`MAIL FROM: <example@gmail.com>`。但它给了我一个语法错误。我试过没有括号，也没有大写。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T18:33:47.437

尝试在“MAIL FROM：”和电子邮件地址之间不留空格。

**简单邮件传输协议** [https://www.rfc-editor.org/rfc/rfc5321](https://www.rfc-editor.org/rfc/rfc5321)

```
MAIL FROM:<userx@y.foo.org> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:22:36.997

如果我记得正确的 telnet 到 gmail 端口 25 将不会验证你需要使用端口 587 如果你这样做已经在 FROM: 和 me@gmail.com 之间留下 2 个空格，例如

```
`MAIL FROM:  me@gmail.com` 
```

# shader - 无法将统一值传递给 LWJGL 中的着色器

> ID：15324624
> 
> 赞同：0
> 
> 时间：2013-03-10T16:33:47.353
> 
> 标签：shader, lwjgl

试图让一些简单的教程级着色器适用于 LWJGL。我有一个工作设置，当我在着色器本身中指定所有颜色时，可以简单地在一个块中着色，但现在我试图将一个浮点值传递给着色器以指定一个简单的灰度。

Frag 着色器如下所示：

```
varying vec4 vertColor;
uniform float light;

void main()
{
    gl_FragColor = vec4(light, light, light, 1);
} 
```

以及在渲染块之前的代码：

```
if(useShader)
{
    int loc = ARBShaderObjects.glGetUniformLocationARB(program, "light");
    System.out.println("LOC: " + loc);
    ARBShaderObjects.glUniform1fARB(loc, 1.0f);
    ARBShaderObjects.glUseProgramObjectARB(program);
} 
```

Frag 着色器最初指定`gl_FragColor = vertColor`，它可以工作，我可以用任何浮点值替换`light`它`vec4`，它可以工作。但是正如我所拥有的，无论我传递什么`ARBShaderObjects.glUniform1fARB`，当我渲染它时，正方形总是黑色的；我假设这是由于`uniform float light`默认为`0.0f`，这听起来像我的统一变量没有被设置。

如果完全相关，我确实看到 LOC 在打印出来时为 0。

想知道我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:18:54.153

尝试将这两行的顺序从以下位置切换：

```
ARBShaderObjects.glUniform1fARB(loc, 1.0f);
ARBShaderObjects.glUseProgramObjectARB(program); 
```

到：

```
ARBShaderObjects.glUseProgramObjectARB(program);
ARBShaderObjects.glUniform1fARB(loc, 1.0f); 
```

在上传统一值之前，您需要开始使用该程序。

# .net - 仅适用于 SaveOrUpdate 和 Merge 的 NHibernate 级联约定

> ID：15324626
> 
> 赞同：2
> 
> 时间：2013-03-10T16:33:50.117
> 
> 标签：.net, nhibernate, fluent-nhibernate, nhibernate-mapping

我想为 NIBerate 配置一个约定，以允许级联保存或更新和合并，但不允许删除。我找不到如何执行此操作，因为 Cascade.SaveOrUpdate() 或 Cascade.Merge() 返回无效。并调用一种方法取消了先例。

这是我的试验：

1）级联将用于 SaveUpdate ：

```
 public class CascadeAllConvention : IHasOneConvention, IHasManyConvention, IReferenceConvention
    {
        public void Apply(IOneToOneInstance instance)
        {
            instance.Cascade.Merge();
            instance.Cascade.SaveUpdate();
        }

        public void Apply(IOneToManyCollectionInstance instance)
        {
            instance.Cascade.Merge();
            instance.Cascade.SaveUpdate();

        }

        public void Apply(IManyToOneInstance instance)
        {
            instance.Cascade.Merge();
            instance.Cascade.SaveUpdate();
        }
    } 
```

2）级联将用于合并：

```
 public class CascadeAllConvention : IHasOneConvention, IHasManyConvention, IReferenceConvention
    {
        public void Apply(IOneToOneInstance instance)
        {
            instance.Cascade.SaveUpdate();
            instance.Cascade.Merge();
        }

        public void Apply(IOneToManyCollectionInstance instance)
        {
            instance.Cascade.SaveUpdate();
            instance.Cascade.Merge();

        }

        public void Apply(IManyToOneInstance instance)
        {
            instance.Cascade.SaveUpdate();
            instance.Cascade.Merge();
        }
    } 
```

3) 级联将被停用：

```
 public class CascadeAllConvention : IHasOneConvention, IHasManyConvention, IReferenceConvention
    {
        public void Apply(IOneToOneInstance instance)
        {
            instance.Cascade.All();
            instance.Cascade.Not.Delete();
        }

        public void Apply(IOneToManyCollectionInstance instance)
        {
            instance.Cascade.All();
            instance.Cascade.Not.Delete();

        }

        public void Apply(IManyToOneInstance instance)
        {
            instance.Cascade.All();
            instance.Cascade.Not.Delete();
        }
    } 
```

# directx - DirectX 将后台缓冲区数据写入文件

> ID：15324627
> 
> 赞同：3
> 
> 时间：2013-03-10T16:33:51.977
> 
> 标签：directx, textures, staging

我正在尝试将我的 DirectX 程序的每一帧都转换为 YUV（用于视频编码）。因此，我首先需要每帧上每个像素的 RGB(A) 值。我需要从后台缓冲区中获取这些。

因为 DirectX 中没有 glReadPixels，所以我执行以下操作：

1.  获取指向 backbuffer 的 renderTargetView 的指针并获取 backbuffer 资源
2.  将此资源投射到`ID3D10Texture2D`
3.  制作一个暂存纹理​​和`CopyResource`上一步的纹理 2D。

此时我可以使用`D3DX10SaveTextureToFile`这个暂存纹理​​将正确地将后台缓冲区保存为图像。

但是，我不想用磁盘绕道，我想马上得到RGB数据，所以我做了以下操作：

1.  映射暂存资源
2.  读取映射纹理的 pData 以获取 RGB(A) 值

问题：RGB值是垃圾。这是像素 (1,1) 的示例

> （1，1）=（-17014118346046923000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000来方

这特别奇怪，因为我使用相同的代码来映​​射另一个暂存纹理​​（来自另一个屏幕外渲染目标）并且该代码在那里工作得很好。

这是我的代码：

```
// Get resource pointer to backbuffer
ID3D10Resource *backbufferRes;
m_D3D->GetRenderTargetView()->GetResource(&backbufferRes);

// Cast backbuffer resource to texture2D
ID3D10Texture2D* tempTexture = 0;
backbufferRes->QueryInterface(__uuidof(ID3D10Texture2D),(LPVOID*) &tempTexture);
backbufferRes->Release();

// Get the descriptor of this texture2D
D3D10_TEXTURE2D_DESC descDefault; 
tempTexture->GetDesc(&descDefault);

// Create a staging texture desc based on the texture of the backbuffer
D3D10_TEXTURE2D_DESC descStaging;
descStaging = descDefault;
descStaging.Usage = D3D10_USAGE_STAGING;
descStaging.CPUAccessFlags = D3D10_CPU_ACCESS_READ;  
descStaging.BindFlags = 0;

// Create the new empty staging texture
ID3D10Texture2D *texture = 0;
m_D3D->GetDevice()->CreateTexture2D( &descStaging, NULL, &texture);

// Copy the backbuffer texture data (tempTexture) to the staging texture (texture)
m_D3D->GetDevice()->CopyResource(texture, tempTexture);

// This call works perfectly, image is correct!
// D3DX10SaveTextureToFile(texture, D3DX10_IFF_BMP, L"D:\\img.bmp");

// We want to avoid disk access, so instead let's map the texture and read its RGB data
D3D10_MAPPED_TEXTURE2D mappedTexture;
hr = texture->Map(D3D10CalcSubresource(0, 0, 1), D3D10_MAP_READ, 0, &mappedTexture);
FLOAT* m_pBits = (FLOAT*) malloc(4 * descStaging.Width * descStaging.Height * sizeof(FLOAT));
if(!FAILED(hr)) {
    memcpy(m_pBits, mappedTexture.pData, 4 * descStaging.Width * descStaging.Height);
    texture->Unmap(D3D10CalcSubresource(0, 0, 1));
}
texture->Release();
tempTexture->Release();

fp = fopen("D:\\output.txt", "a");
for( UINT row = 0; row < descStaging.Height; row++ )
{
    UINT rowStart = row * mappedTexture.RowPitch / 4;
    for( UINT col = 0; col < descStaging.Width; col++ )
    {
        r = m_pBits[rowStart + col*4 + 0]; // Red (X)
        g = m_pBits[rowStart + col*4 + 1]; // Green (Y)
        b = m_pBits[rowStart + col*4 + 2]; // Blue (Z)
        a = m_pBits[rowStart + col*4 + 3]; // Alpha (W)

        // Save pixel values to disk
        fprintf(fp, "%d %d - %f %f %f\n",  col + 1, row + 1, r, g, b);
    }
}
fclose(fp); 
```

有谁知道问题可能是什么？非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-01T10:28:07.500

老问题，但我认为这可能是问题所在：

使用 映射纹理后`texture->Map()`，您尝试将其一次性复制到`m_pBits`所有文件中。[除非映射纹理的 RowPitch 与其宽度相同（参见此处](https://msdn.microsoft.com/en-us/library/windows/desktop/bb205319(v=vs.85).aspx)），否则这将不起作用。

相反，您必须逐行复制图像：

```
BYTE* source = static_cast<BYTE*>(mappedTexture.pData);
BYTE& dest = m_pBits;
for (int i = 0; i < IMAGE_HEIGHT; ++i) {
    memcpy(dest, source, IMAGE_WIDTH * 4); // for 4 bytes per pixel
    source += mappedTexture.RowPitch;
    dest += IMAGE_WIDTH * 4;
} 
```

# c - 可执行文件中的数据位于奇怪的位置

> ID：15324629
> 
> 赞同：1
> 
> 时间：2013-03-10T16:33:55.903
> 
> 标签：c, assembly, linker, exe, portable-executable

几天前我开始玩PE格式。我已经完成了小型 PE 加载器，它能够根据它们的虚拟地址将部分加载到内存中。例如，我有`.text`关于虚拟地址`0x1000`的部分，或`.data`关于`0x2000`. 使用我的小汇编代码，我在某个空闲位置 ( `0x10000`) 上加载了 PE 文件，并从它的位置加载了 PE 部分。所以，部分`.text`在`0x11000`（`0x10000 + 0x1000`）上，`.data`在`0x12000`等等......但是当我从位置引用我的汇编数据时`.code`，我发现（在反汇编中）它指向`0x402000`. 在互联网上，我找到了特定于每种图像类型的图像库之类的东西......但我不明白如何`.exe`加载到`0x402000`例如，当在 Windows 中运行大量可执行文件时。有人为什么会这样，它是如何工作的，我如何在我非常基本的系统中理论上实现它？

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:37:09.130

虚拟内存意味着计算机上的每个进程都可以使用“相同”的地址，因为每个进程的地址空间都是独立的。进程 A 的 0x400000 被操作系统映射到与进程 B 的 0x400000 不同的*物理*地址，即使它们是相同的虚拟地址（不同的虚拟*地址空间*）。

可执行文件的默认*基地址*是 0x400000。您的链接器将基地址硬编码到可执行文件中，并将适当地调整地址引用。当程序启动时，您的可执行文件将被加载到该地址。您的汇编器或链接器应该为您提供更改此默认基地址的方法。

请注意，另一方面，DLL 必须在唯一的地址加载，因为它们必须共存于同一进程中。出于这个原因，DLL 通常是*可重定位*的，即它们在加载时可以具有任何基地址，以应对将它们置于唯一地址的要求。（在系统上拥有多个不可重定位的 DLL 可能会导致问题，但在系统上拥有多个不可重定位的 .exe 则完全没有问题。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T16:49:12.613

每个可执行文件都在其自己的[虚拟地址空间](http://msdn.microsoft.com/en-us/library/aa366912%28VS.85%29.aspx)中运行。因此，即使两个可执行文件具有相同的 0x400000 映像库，它们也会驻留/使用不同的物理内存。将其视为图像库的基础不同。

To get the image base of a module loaded into your running process you can use [GetModuleHandle](http://msdn.microsoft.com/en-us/library/ms683199%28VS.85%29.aspx). It returns a handle to the module which incidently equals the image base. Alternatively you can get the image base from the ImageBase field in the PE Headers IMAGE_OPTIONAL_HEADER structure ([see here](http://msdn.microsoft.com/en-us/library/ms809762.aspx)).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T16:38:21.297

这是一个复杂的主题，但是由于虚拟内存和硬件辅助的进程分离，每个进程都被加载，并且给人的印象是它拥有自己的整个地址空间。因此，所有镜像库都可以从同一个地址开始，因为虚拟内存中的地址可以映射到内存的任何位置，就它而言，进程拥有无限的内存。

# java - 交替运行两个线程的最佳方式？

> ID：15324631
> 
> 赞同：8
> 
> 时间：2013-03-10T16:34:06.407
> 
> 标签：java, concurrency

**更新：请参阅此问题的底部以获取完整答案。**

我想运行一个辅助线程，以便我的主线程和我的辅助线程交替执行操作（不，我不想在主线程中执行所有操作，它是用于单元测试）。

我想出了两个不同的解决方案，我不知道哪个是最好的，我对第一个有疑问：

## 使用交换器

我想出了一个使用[Exchanger](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Exchanger.html)的东西（虽然我不想只交换一个对象）。

```
@Test
public void launchMyTest() {
    /**
     * An anonymous class to set some variables from a different thread
     */
    class ThreadTest extends Thread {
        //declare some various attributes that will be set
        //NOT DECLARED VOLATILE
        ...

        public final Exchanger<Integer> exchanger = new Exchanger<Integer>();

        @Override
        public void run() {
            try {
                //start of the synchronization 
                int turn = 1;
                while (turn != 2) {
                    turn = this.exchanger.exchange(turn);
                }

                //do some work and set my various variables
                ...

                //main thread's turn
                turn = 1;
                this.exchanger.exchange(turn);
                //wait for this thread's turn
                while (turn != 2) {
                    turn = this.exchanger.exchange(turn);
                }

                //redo some other work and reset the various variables
                ...

                //main thread's turn
                turn = 1;
                this.exchanger.exchange(turn);

            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            } 
        }
    }

    try {
        //some work in the main thread
        ....

        //launch the job in the second thread
        ThreadTest test = new ThreadTest();
        test.start();
        //start of the synchronization
        int turn = 2;
        test.exchanger.exchange(turn);
        //wait for this thread's turn
        while (turn != 1) {
            turn = test.exchanger.exchange(turn);
        }

        //run some tests using the various variables of the anonymous class
        ....

        //now, relaunch following operations in the second thread
        turn = 2;
        test.exchanger.exchange(turn);
        //wait for this thread's turn
        while (turn != 1) {
            turn = test.exchanger.exchange(turn);
        }

        //do some other tests using the various variables of the anonymous class
        //...

    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
    }
} 
```

### 问题：

*   我是否正确，该`exchange`方法执行内存同步，就像使用`Lock`?

## 使用条件

使用[Condition](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html)的另一种解决方案：

```
@Test
public void launchMyTest() {
    /**
     * An anonymous class to set some variables from a different thread
     */
    class ThreadTest extends Thread {
        //declare some various attributes that will be set
        //NOT DECLARED VOLATILE
        ...

        public final Lock lock = new ReentrantLock();
        public final Condition oneAtATime = lock.newCondition();
        public int turn = 1;

        @Override
        public void run() {
            this.lock.lock();
            try {
                //do some work and set my various variables
                ...

                //main thread's turn
                this.turn = 1;
                this.oneAtATime.signal();

                //wait for this thread's turn
                while (this.turn != 2) {
                    this.oneAtATime.await();
                }

                //redo some other work and reset the various variables
                ...

                //main thread's turn
                this.turn = 1;
                this.oneAtATime.signal();

            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            } finally {
                this.lock.unlock();
            }
        }
    }

    ThreadTest test = new ThreadTest();
    test.lock.lock();
    try {
        //some work in the main thread
        ....

        //launch the job in the second thread
        test.turn = 2;
        test.start();
        //wait for this thread's turn
        while (test.turn != 1) {
            test.oneAtATime.await();
        }

        //run some tests using the various variables of the anonymous class
        ....

        //now, relaunch following operations in the second thread
        test.turn = 2;
        test.oneAtATime.signal();
        //wait for this thread's turn
        while (test.turn != 1) {
            test.oneAtATime.await();
        }

        //do some other tests using the various variables of the anonymous class
        //...

    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
    } finally {
        test.lock.unlock();
    }
} 
```

在我看来，这有点复杂。

## 结论

你认为最好的解决方案是什么？我做得对吗，还是我错过了另一个明显的解决方案？

我没有使用 a`CountDownLatch`因为我想交替运行**多个**`CountDownLatch`操作，并且无法重置。而且我没有发现`CyclicBarrier`是让代码更简单...（实际上我并没有完全理解如何使用它，但它看起来并不比使用简单`Exchanger`or `Condition`）

谢谢你。

## 更新

@Clément MATHIEU 提供了如何实现这一目标的不同示例，在其[接受的答案](https://stackoverflow.com/a/15326551/1768736)的评论中，请参阅：[https ://gist.github.com/cykl/5131021](https://gist.github.com/cykl/5131021)

有三个示例，一个使用 a `CyclicBarrier`，另一个使用 an `Exchanger`，最后一个使用 2 `Semaphore`s。虽然他说“更具表现力的是基于信号量的”是正确的，但`Exchanger`为了简单起见，我选择使用 an 。我的单元测试变成了：

```
@Test
public void launchMyTest() {
    /**
     * An anonymous class to set some variables from a different thread
     */
    class ThreadTest extends Thread {
        //declare some various attributes that will be set
        //NOT DECLARED VOLATILE
        ...
        public final Exchanger<Integer> exchanger = new Exchanger<Integer>();

        @Override
        public void run() {
            try {
                //do some work and set my various variables
                ...

                //main thread's turn
                this.exchanger.exchange(null);
                //wait for this thread's turn
                this.exchanger.exchange(null);

                //redo some other work and reset the various variables
                ...

                //main thread's turn
                this.exchanger.exchange(null);

            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            } 
        }
    }

    try {
        //some work in the main thread
        ....

        //launch the job in the second thread
        ThreadTest test = new ThreadTest();
        test.start();
        //wait for this thread's turn
        test.exchanger.exchange(null);

        //run some tests using the various variables of the anonymous class
        ....

        //now, relaunch following operations in the second thread
        test.exchanger.exchange(null);
        //wait for this thread's turn
        test.exchanger.exchange(null);

        //do some other tests using the various variables of the anonymous class
        //...

    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:31:30.770

exchanger looks right. After watching [http://www.youtube.com/watch?v=WTVooKLLVT8](http://www.youtube.com/watch?v=WTVooKLLVT8) I think the variable should be volatile, says there is hardly any over head.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:31:42.153

> 我是否正确交换方法执行内存同步，就像使用锁一样？

你说的对。javadoc 指定有一个发生之前的关系：

“*内存一致性效果：对于通过 Exchanger 成功交换对象的每对线程，每个线程中 exchange() 之前的操作发生在另一个线程中相应 exchange() 返回之后的操作之前。* ”

> 你认为最好的解决方案是什么？

两者是等价的。你应该以表现力为目标。我发现基于同步/锁定/监控的解决方案比基于交换的解决方案更具表现力。但是，如果您在专用类中抽象此代码并不重要。

> 我做得对吗，还是我错过了另一个明显的解决方案？

AFAIK 不，如果您不想重新实现轮子。

请注意，您的基于 ReentrantLock 的解决方案也可以使用普通的旧同步或 Guava 的 Monitor 编写。

请参阅：[http](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/util/concurrent/Monitor.html) ://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/util/concurrent/Monitor.html进行比较。

> 而且我没有发现 CyclicBarrier 让代码变得更简单......（其实我并没有完全理解如何使用它，但它看起来并不比使用简单

CyclicBarrier 不符合您的需求。它不是为互斥而设计的；它允许一组线程定义一个公共屏障。线程将同时执行并在某个时间点相互等待，然后再进行下一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T16:41:21.710

锁定机制通过关注锁的互斥来直接解决您在此处执行的任务，因此我的建议是这种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T16:58:21.537

虽然我还没有使用过`Exchanger`，但它看起来是您想要实现的最简单的解决方案。比更通用的`Lock`/`Condition`版本更少的代码。至于内存一致性：这就是他们[在这里](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Exchanger.html)承诺的。

# c++ - 在 C++ 中，如何将字符串拆分为多个整数？

> ID：15324640
> 
> 赞同：-4
> 
> 时间：2013-03-10T16:34:48.223
> 
> 标签：c++, arrays, string

我有一个由五个值组成的字符串，每个值用空格分隔。

```
std::string s = "123 123 123 123 123"; 
```

如何将它们拆分为五个整数的数组？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T16:38:31.073

`std::stringstream`像这样使用：

```
#include <sstream>
#include <string>

...

std::stringstream in(s);
std::vector<int> a;
int temp;
while(in >> temp) {
  a.push_back(temp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:41:19.423

如果您需要一个内置数组，请尝试此操作，尽管`std::vector`在一般情况下，如前所述，通常最好使用 a 。我假设您想在每个空格字符处拆分字符串。

```
#include <sstream>
#include <string>
#include <iostream>

int main() {
    std::string s = "123 123 123 123 123";
    std::istringstream iss(s);

    int arr[5];
    for (auto& i : arr) {
        iss >> i;
    }
} 
```

# python - 来自键集的 Python 数组

> ID：15324641
> 
> 赞同：0
> 
> 时间：2013-03-10T16:34:51.640
> 
> 标签：python, multidimensional-array, dictionary

我需要基于包含键的数组在 python 中创建数组/字典。我[在 PHP 中找到了一个等效的解决方案](https://stackoverflow.com/questions/10765706/php-array-from-set-of-keys/15320688#15320688)。不幸的是，我不知道如何在 Python 中实现它。有人可以给我任何提示吗？

```
a = ['one', 'two', 'three']
b = ['one', 'four', 'six'] 
```

我想得到以下结果：

```
c = {'one': {'two': 'three', 'four': 'six}} 
```

PHP 解决方案为此使用了引用。也许这是一个更好的例子：

```
ar[0] = ['box0', 'border0', 'name']
var[1] = ['box0', 'border0', 'type']
var[2] = ['box0', 'border1', 'name']
var[3] = ['box1', 'border2', 'name']
var[4] = ['box1', 'border0', 'color']

$val = 'value' 
```

在 PHP 中，结果如下所示：

```
$result = array(
    'box0' => array(
      'border0' => array('name' => $val, 'type' => $val, 'color' => $val), 
      'border1' => array('name' => $val),
    ),
    'box1' => array(
      'border0' => array('color' => $val),
      'border2' => array('name' => $val)
    )
) ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:48:26.623

*PHP 答案从键的路径*构造一个字典。所以这是 Python 中的等价物：

```
from collections import defaultdict
def set_with_path(d, path, val):
    end = path.pop()
    for k in path:
        d = d.setdefault(k, {})
    d[end] = val 
```

例子：

```
>>> d = {}
>>> set_with_path(d, ['one', 'two', 'three'], 'val')
>>> d
{'one': {'two': {'three': 'val'}}}
>>> set_with_path(d, ['one', 'four', 'six'], 'val2')
>>> d
{'one': {'four': {'six': 'val2'}, 'two': {'three': 'val'}}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:36:46.217

```
x = dict()
for list in (a,b):
    if not x.has_key(list[0]):
        x[list[0]] = []
    x[list[0]] += list[1:] 
```

# python - 如何将字段添加到命名元组？

> ID：15324644
> 
> 赞同：24
> 
> 时间：2013-03-10T16:35:04.347
> 
> 标签：python, namedtuple

我正在使用一个命名元组列表。我想在创建每个命名元组后为其添加一个字段。看来我可以通过仅将其作为属性（如`namedtuple.attribute = 'foo'`）引用来做到这一点，但随后它不会添加到字段列表中。如果我不对字段列表做任何事情，有什么理由不这样做吗？有没有更好的方法来添加字段？

```
>>> from collections import namedtuple
>>> result = namedtuple('Result',['x','y'])
>>> result.x = 5
>>> result.y = 6
>>> (result.x, result.y)
(5, 6)
>>> result.description = 'point'
>>> (result.x, result.y, result.description)
(5, 6, 'point')
>>> result._fields
('x', 'y') 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-10T16:43:43.743

你所做的工作因为[`namedtuple(...)`](http://docs.python.org/2/library/collections.html#collections.namedtuple)返回一个**新的类**。要实际获取 Result 对象，您需要实例化该类。所以正确的做法是：

```
Result = namedtuple('Result', ['x', 'y'])
result = Result(5, 6) 
```

你会发现给这些对象添加属性是*行不通*的。所以你不应该这样做的原因是因为它不起作用。只有滥用类对象才有效，我希望我不需要详细说明为什么这是一个可怕的、可怕的想法。

请注意，无论您是否可以向 namedtuple 添加属性（即使您事先列出了所有需要的属性），您都无法在创建 namedtuple 对象后对其进行更改。元组是不可变的。因此，如果您需要在创建后出于任何原因以任何方式或形状更改对象，则不能使用`namedtuple`. 你最好定义一个自定义类（`namedtuple`为你添加的一些东西甚至对可变对象没有意义）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-10T16:43:52.170

请注意，这里您正在修改`type`命名元组的 ，而不是该类型的实例。在这种情况下，您可能希望使用旧类型的附加字段创建一个新类型：

```
result = namedtuple('Result',result._fields+('point',)) 
```

例如：

```
>>> result = namedtuple('Result',['x','y'])
>>> result = namedtuple('Result',result._fields+('point',))
>>> result._fields
('x', 'y', 'point') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-26T21:22:14.237

您可以轻松地连接命名元组，记住它们是不可变的

```
from collections import namedtuple

T1 = namedtuple('T1', 'a,b')
T2 = namedtuple('T2', 'c,d')

t1 = T1(1,2)
t2 = T2(3,4)

def sum_nt_classes(*args):
    return namedtuple('_', ' '.join(sum(map(lambda t:t._fields, args), ())))

def sum_nt_instances(*args):
    return sum_nt_classes(*args)(*sum(args,()))

print sum_nt_classes(T1,T2)(5,6,7,8)
print sum_nt_instances(t1,t2) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-10T16:39:02.780

`namedtuple`定义后不能向 a 添加新字段。唯一的方法是创建一个新模板并创建新`namedtuple`实例。

**分析**

```
>>> from collections import namedtuple
>>> result = namedtuple('Result',['x','y'])
>>> result
<class '__main__.Result'> 
```

`result`不是元组，而是创建元组的类。

```
>>> result.x
<property object at 0x02B942A0> 
```

你创建一个像这样的新元组：

```
>>> p = result(1, 2)
>>> p
Result(x=1, y=2)

>>> p.x
1 
```

打印 中的值`x`。`p`

```
>>> p.x = 5

Traceback (most recent call last):
  File "<pyshell#10>", line 1, in <module>
    p.x = 5
AttributeError: can't set attribute 
```

这会引发错误，因为元组是不可变的。

```
>>> result.x = 5
>>> result
<class '__main__.Result'>
>>> result._fields
('x', 'y')
>>> p = result(1, 2)
>>> p
Result(x=1, y=2) 
```

这不会改变任何事情。

```
>>> result.description = 'point'
>>> result
<class '__main__.Result'>
>>> result._fields
('x', 'y') 
```

这也不会改变任何事情。

**解决方案**

```
>>> result = namedtuple('Result', ['x','y'])
>>> p = result(1, 2)
>>> p
Result(x=1, y=2)
>>> # I need one more field
>>> result = namedtuple('Result',['x','y','z'])
>>> p1 = result(1, 2, 3)
>>> p1
Result(x=1, y=2, z=3)
>>> p
Result(x=1, y=2) 
```

# objective-c - 滚动后选择的单元格标签文本更改

> ID：15324645
> 
> 赞同：0
> 
> 时间：2013-03-10T16:35:05.543
> 
> 标签：objective-c, scroll, tableview, cell

我对从 2 个不同原型单元格创建的 tableview 单元格有问题。我将自己的标签和图像添加到它们。

它们加载得很好，但是在我在表格视图中滚动，然后选择一个单元格后，来自其他单元格的标签被添加到单元格中已经存在的标签中。

我读过人们遇到的类似问题，但没有一个解决它只发生在选择时的事实。

我试过添加`if (cell == nil){};`，但没有效果。

我`cellForRowAtIndexPath`的如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"NDSClassSubMenuViewController cellForRowAtIndexPath: running...");

    NDSClassAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSDictionary *childNodes = [appDelegate.children objectAtIndex:0];
    NSString *multicellstat = [childNodes objectForKey:@"@CELLTYPE"];
    NSLog(@"Multicellstat %@", multicellstat);
    NSLog(@"TESTING CHILD %@", childNodes);

    //ONLY LOADING SUB MENU OPTIONS
NSString *cellType;
    if (multicellstat == NULL){
        NSLog(@"cellForRowAtIndexPath: @CellType == multicell. Making multicell.");
        cellType = @"SegueCellSubmenu";
    }else {
        NSLog(@"cellForRowAtIndexPath: children variable is NOT NULL. Making MenuCell.");
        cellType = @"SegueCellMulti";

    }

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:cellType forIndexPath:indexPath];

    if (multicellstat == NULL){
        NSLog(@"Not adding picture.");
    }else {

        dispatch_queue_t concurrentQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
        //this will start the image loading in bg
        dispatch_async(concurrentQueue, ^{

            UIView *blackBG = [[UIView alloc] initWithFrame:CGRectMake(5, 5, 60, 60)];
            blackBG.backgroundColor = [UIColor grayColor];

            NSURL *imageURL = [NSURL URLWithString:[childNodes objectForKey:@"@THUMBNAIL"]];
        NSData *data = [NSData dataWithContentsOfURL:imageURL];
        UIImage *image = [UIImage imageWithData:data];

        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        imageView.frame = CGRectMake(0, 0, 60, 60);
            int borderWidth = 1;
            imageView.frame = CGRectMake(borderWidth, borderWidth, blackBG.frame.size.width-borderWidth*2, blackBG.frame.size.height-borderWidth*2);

            dispatch_async(dispatch_get_main_queue(), ^{

                [cell addSubview:blackBG];
                [blackBG addSubview:imageView];

         });
        });

    }

    //NSDictionary *tweet = [[[[appDelegate.menuItems objectForKey:@"Table"] objectForKey:@"Parent"]objectAtIndex:indexPath.row] objectForKey:@"Child"];
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(70, 10, 210, 30)];
    UILabel *detailText = [[UILabel alloc] initWithFrame:CGRectMake(70, 35, 210, 30)];

    [cell.contentView addSubview:label];
    [cell.contentView addSubview:detailText];

    NSString *text = [[appDelegate.children objectAtIndex:indexPath.row] objectForKey:@"@MENUDESC"];
    NSString *name = [[appDelegate.children objectAtIndex:indexPath.row] objectForKey:@"@MENUDESC"];
    //NSLog(@"cellForRowAtIndexPath MENU ITEMS %@", text);

    //Title label
    label.text = NULL;
    label.text = text;
    [label setFont: [UIFont fontWithName:@"Arial" size:16.0]];

//Detail label
    detailText.text = NULL;
    detailText.text = name;
    [detailText setFont: [UIFont fontWithName:@"Arial" size:12.0]];
    //detailText.textColor = [UIColor colorWithRed:186.0/255.0 green:186.0/255.0 blue:186.0/255.0 alpha:1];
    detailText.textColor = [UIColor grayColor];

    //cell.textLabel.text = text;
    //cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", name];

    NSLog(@"Creating submenu item: %@", text);
     NSLog(@"NDSClassSubMenuViewController: cellForRowAtIndexPath: finished.");

    return cell;

} 
```

任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:51:32.593

关键问题是运行 synch 的代码不应假定在图像请求完成后它正在修改的单元格与图像请求开始时是同一单元格（在相同的 indexPath 处）。

正确的配方是这样的：

1.  如果我们有一个缓存结果，则使用缓存结果（因此我们不会在每次滚动时都进行 Web 请求），否则发出异步请求。
2.  当请求完成时，缓存结果
3.  使用原始 indexPath 来确定单元格是否仍然可见。如果是，请重新加载该 indexPath。新缓存的结果现在将在 cellForRowAtIndexPath 中可用。

这是一段代码，描述了如何在异步请求后正确更新表。在您的 cellForRowAtIndexPath 中，在调用此之前检查缓存的响应：

```
// in cellForRowAtIndexPath:
NSString *urlString = [childNodes objectForKey:@"@THUMBNAIL"]
NSURL *imageURL = [NSURL URLWithString:urlString];
NSURLRequest *request = [NSURLRequest requestWithURL:imageURL];
NSCachedURLResponse *cachedResponse = [[NSURLCache sharedURLCache] cachedResponseForRequest:request];
if (!cachedResponse) { 
    // we don't find this image/request in the cache, call asynch load
    [self asynchLoad:urlString forIndexPath:indexPath];
} else {
   // we got this image already, update the cell
    UIImage *image = [UIImage imageWithData:cachedResponse.data];
    // set the cell's UIImageView subview image to image
} 
```

这里我们在 urlString 处加载图像，缓存结果，然后在请求完成后如果仍然可见，则在加载后重新加载 indexPath：

```
- (void)asynchLoad:(NSString *)urlString forIndexPath:(NSIndexPath *)indexPath {

    NSURL *imageURL = [NSURL URLWithString:[childNodes objectForKey:@"@THUMBNAIL"]];
    NSURLRequest *request = [NSURLRequest requestWithURL:imageURL];

    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        if (!error) {

            // cache the response
            NSCachedURLResponse *cachedResponse = [[NSCachedURLResponse alloc] initWithResponse:response data:data];
            [[NSURLCache sharedURLCache] storeCachedResponse:cachedResponse forRequest:self];

            // important part - we make no assumption about the state of the table at this point
            // find out if our original index path is visible, then update it, taking 
            // advantage of the cached image (and a bonus option row animation)

            NSArray *visiblePaths = [self.tableView indexPathsForVisibleRows];
            if ([visiblePaths containsObject:indexPath]) {
                NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
                [self.tableView reloadRowsAtIndexPaths:indexPaths withRowAnimation: UITableViewRowAnimationFade];
                // because we cached the image, cellForRow... will see it and run fast
            }
        }
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:07:13.817

我通过创建自己的自定义单元类并使用情节提要设置布局来解决问题。

# c - c等价于matlab的sind和cosd函数

> ID：15324650
> 
> 赞同：5
> 
> 时间：2013-03-10T16:35:45.167
> 
> 标签：c, matlab, math.h

所以我正在使用一些matlab代码手动转换为c代码。我只是想知道是否有 ac 等效于我在 matlab 代码中看到的 sind 和 cosd 函数。我想这会以度数而不是 c sin 和 cos 函数以弧度返回结果。我想我可以将结果乘以 180/pi 但只是想知道 math.h 中是否有库函数我没有看到。或者即使 gsl 库中有一些东西可以做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T16:43:50.923

H2CO3 的解决方案由于`M_PI`. 任何论点的通用安全版本是：

```
#define sind(x) (sin(fmod((x),360) * M_PI / 180)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T16:39:11.113

不，C 标准库中的三角函数都以弧度工作。但是您可以轻松摆脱宏或内联函数：

```
#define sind(x) (sin((x) * M_PI / 180)) 
```

或者

```
inline double sind(double x)
{
    return sin(x * M_PI / 180);
} 
```

请注意，当您想要更改函数的**返回值**（所谓的逆或“arcus”函数）时，需要进行相反的转换：

```
inline double asind(double x)
{
    return asin(x) / M_PI * 180;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T16:39:35.967

不，它们在 C 库中不可用。您只会在 C 库中找到弧度值参数或返回值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T16:44:31.600

另外，请注意 sind 和 cosd 等不**以**度为单位返回结果，它们以度为单位获取参数。asind 和 acosd 以度数返回它们的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T16:38:07.963

不在 C 库中。所有三角函数 C 库函数都将参数作为弧度值而不是度数。正如您所说，您需要自己执行转换或使用专用库。

# algorithm - 为算法编写伪代码以确定与会者所属的类别

> ID：15324653
> 
> 赞同：-5
> 
> 时间：2013-03-10T16:35:54.787
> 
> 标签：algorithm

这个问题的伪代码怎么写？我试着改写算法，但这真的很难。

一种算法或伪代码，它接受参加会议的 22 人的姓名作为输入。每个人都属于以下两类之一：a) 参与者 b) 演示者

该算法应确定与会者所属的类别。该算法还应确定属于每个类别的与会者人数。参与者支付 2000.00 美元的注册费和演示者 1000.00 美元的注册费。必须打印类别列表和每个类别的总人数，以及每个部分产生的总金额。

这是我尝试过的，但没有运气。

```
program Persons attending the conference (input,output);
Uses Crt

Const
    Presenters=('per17,per18,per19,per20,per21,per22'),'('$1000.00);
    Participant=('per1,per2,per3,per4,per5,per6,per7,per8,per9,per10,per11,per12,per13,per14,per15,per16'),'('$2000.00);

begin
    {Accept the names of 22 persons and category}
    WriteLn ('Enter names');
    ReadLn ('per1,per2,per3,per4,per5,per6,per7,per8,per9,per10,per11,per12,per13,per14,per15,per16,per17,per18,per19,per20,per21,per22');
    WriteLn ('Enter Category')
    Var
      participant:('per1...per16');
      presenter: ('per17...per22');
end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:50:34.317

我来自[python](/questions/tagged/python "显示标记为“python”的问题")背景。我将向您展示每一行“代码”并解释其背后的原因。

```
Participants = 0
Presenter = 0 
```

在这里，我创建了两个整数变量，`Participants`并且`Presenters`. 这些将保存每个变量中的人数。

```
for x in range (22):
    ask if person is presenter or participant 
```

此代码使程序询问用户该人是演示者还是参与者。这重复 22 次。

```
 if presenter:
        Presenter += 1
    if participant:
        Participants += 1 
```

此代码检查最新的人属于哪个组。然后它将 1 添加到该变量。

```
print "There are", Participants, "participants."
print "There are", Presenter, "presenters." 
```

这段代码告诉我们每组有多少人。

```
print "You earned", (Participants * 2000) , " dollars from participants."
print "You earned", (Presenter * 1000), "dollars from presenters."
print "Overall, you earned", (Presenter * 1000) + (Participants * 2000), "dollars." 
```

此代码在屏幕上显示输出。

**注意：**下次你问关于 SO 的问题时，你应该告诉我们

1.  您使用的是什么语言。

2.  到目前为止你已经尝试过什么。（您这样做了，但最好使用实际语言。）

3.  一个*具体*的问题。*准确*告诉我们您需要什么，而不是“请帮忙！！！”

# .net - Windows Azure 多重部署

> ID：15324656
> 
> 赞同：3
> 
> 时间：2013-03-10T16:36:01.360
> 
> 标签：.net, deployment, azure, visual-studio-2012

这是场景： - 太多的网站具有相同的源代码和自己的数据库（每个客户都有自己的系统和自己的数据库，但所有客户都使用相同的源代码）

*   我只有一个 TFS 项目，因为所有客户都使用相同的代码（不是物理上的，因为我必须在每个网站上部署到每个客户）

问题：如何部署到一个网站（来自 VS 2012 - Web Deploy），它会自动更新所有其他网站，正确更改 web.config（目前，每个部署设置都有其配置来更改 web.config 连接字符串） .

为了简化，目前，我拥有所有部署设置（Customer1 - WEB 部署，Customer2 - Web 部署......）它可以工作，但我必须部署到每个客户......我想要做的是，做一个循环部署到所有客户只需单击一次）..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T04:50:17.877

我们做了一个非常相似的过程，对大约 50 多个站点使用相同的代码库。我们使用[Azure REST 管理 API](http://msdn.microsoft.com/en-us/library/windowsazure/ee460799)来完成部署。我建议将站点特定设置从 web.config 移动到单个 ServiceConfiguration..cscfg 文件，然后`CloudConfigurationManager.GetSetting("settingsKey")`用于获取配置值。创建一个简单的密钥列表，可能基于域以访问您的设置。

Azure 团队在此处提供了一个关于使用[管理 API](http://code.msdn.microsoft.com/windowsazure/Windows-Azure-CSManage-e3f1882c)的出色代码示例。我们针对我们的代码库进行了调整，以创建一个控制台应用程序并在 TFS 构建过程中调用该控制台应用程序。下面是我们用来获取订阅中托管服务列表然后更新每个托管服务部署的相关代码：

```
 var packageUrl = UploadFileToBlob(package);
            var services = new ListHostedServicesCommand();
            services.Run();
            hostedServices = services.HostedServices;

            var date = DateTime.UtcNow.ToString("yyyyMMdd-hhmmss-");
            var label = date + "some-deployment-name";
            var fileinfo = new FileInfo(config);

            if (!string.IsNullOrEmpty(packageUrl) && fileinfo.Exists)
            {
                // get the url of the package uploaded to blob
                AzureCommand.PackageLocation = packageUrl;
                AzureCommand.ConfigFileLocation = fileinfo.FullName;
                AzureCommand.DeploymentSlot = "production";
                AzureCommand.Mode = "auto";
                AzureCommand.Label = label;

                foreach (var hostedService in hostedServices)
                {
                    Console.WriteLine("updating: " + hostedService.ServiceName);
                    // get the deployment unique name - required for upgrade
                    AzureCommand.HostedServiceName = hostedService.ServiceName;
                    AzureCommand.DeploymentName = null;
                    var getDeployment = new GetDeploymentCommand();
                    getDeployment.Run();
                    AzureCommand.DeploymentName = getDeployment.Deployment.Name;

                    // upgrade the existing deployment    
                    var upgradeDeployment = new UpgradeDeploymentCommand();
                    upgradeDeployment.Run();
                    servicesOperations.Add(upgradeDeployment.TrackingId, upgradeDeployment.ServiceManagement);
                }

                // check status of all operations submitted
                foreach (var servicesOperation in servicesOperations)
                {
                    // check status of operations
                    AzureCommand.WaitForAsyncOperation(servicesOperation.Value, servicesOperation.Key);
                }
            } 
```

# jquery - 将社交媒体集成到 DFP 中

> ID：15324662
> 
> 赞同：0
> 
> 时间：2013-03-10T16:36:39.943
> 
> 标签：jquery, google-dfp

现在在 DFP 中，我有一个订单项，其中包含 4 个不同的广告素材，这些广告素材被馈送到 4 个不同的广告单元。所以基本上，我有 4 个不同的广告位，其中 4 个广告正在轮换。一切都很好。当您刷新页面时，4 个广告出现在不同的位置，并且相同的两个广告永远不会显示两次。一切都很好。

但现在，我想为每个广告加入社交媒体链接。因此，每个广告都将具有指向相应广告的社交媒体链接，并且还会随广告旋转。假设我有 4 个广告，其中一个广告是水瓶广告...我想发布图片/链接到他们的社交媒体（通过 DFP），每当您点击刷新并且水瓶广告移动到不同的位置时现场，水瓶广告的社交媒体应始终坚持广告。所以无论水瓶广告在哪个广告位，它的社交媒体都会一直伴随着它。

这是一个完全符合我所说的网站：[http ://www.vurbmoto.com](http://www.vurbmoto.com) *（他们的广告是更大的图片，上面写着“广告”）*

请注意每个广告如何在其下拥有相应的社交媒体。当您点击刷新时，您将看到带有每个广告的正确社交媒体链接的新广告。社交媒体坚持广告的想法是我正在努力实现的目标。

同样，我想创建社交媒体链接/图像，以始终在刷新/广告轮换时坚持广告。那么，在 DFP 中执行此操作的**策略**或**方法是什么？**在这一点上，我不确定如何去做。任何帮助将真正，真正，真正感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:31:23.237

让您的广告成为第三方广告素材，而不仅仅是一张图片，您就可以做到这一点。

您可以让第三方广告素材包含用于制作社交链接的 html，也可以在其中包含一些 javascript，调用广告外部父框架上的链接以更改链接。

# php - 对我的第一份准备好的陈述的反馈

> ID：15324666
> 
> 赞同：-1
> 
> 时间：2013-03-10T16:36:51.343
> 
> 标签：php, mysql, security, prepared-statement, sql-injection

我刚刚完成了我的第一个准备好的声明，出于安全原因转换为使用它们。我已经对其进行了测试并且它可以工作，但是我正在寻找关于代码本身的反馈（欢迎提出建设性的批评），尽管我知道它是相当基本的。另外，我有几个疑问：

1.  `mysqli_escape_string`如果您使用准备好的语句，我是否正确地说您不需要使用？
2.  使用该`mysqli_stmt_get_result`功能会减少我必须做的写作量并同样有效吗？
3.  `mysqli_stmt_close`有必要使用吗？我是否正确地说如果不使用此功能，我将无法在该脚本中创建另一个准备好的语句？

这是我的代码：

```
<?php
//prepared statement example
include 'database.php';
$query = "SELECT ID FROM users WHERE email = ?";
$email = 'myemail@gmail.com';
$statement = mysqli_stmt_init($connect);

mysqli_stmt_prepare($statement, $query);
mysqli_stmt_bind_param($statement, 's', $email);
mysqli_stmt_execute($statement);
mysqli_stmt_bind_result($statement, $id);
mysqli_stmt_fetch($statement);

echo $id;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:51:03.627

> 如果您使用准备好的语句，我是否正确地说您不需要使用 mysqli_escape_string？

是的。你问这个问题是不好的迹象——意味着你没有清楚地理解[所有这些混乱是如何运作](https://stackoverflow.com/a/8265319/285587)的。

> 使用 mysqli_stmt_get_result 函数会减少我必须做的写作量并且同样有效吗？

是的。但这里有一个坏消息：并不总是支持。因此，在某些安装上它不起作用。

> 有必要使用 mysqli_stmt_close 吗？我是否正确地说如果不使用此功能，我将无法在该脚本中创建另一个准备好的语句？

为什么，不。
您可以简单地将另一个准备好的语句重新创建到此变量中。

顺便说一句，强烈建议在 mysqli上使用[PDO 。](https://stackoverflow.com/tags/pdo/info)它更加一致和用户友好。
只需尝试绑定一个数组以在`IN()`运算符中使用并查看。

毕竟，它需要的代码少了 2 倍：

```
$stm = $pdo->prepare($query);
$stm->execute(array($email));
$id = $stm->fetchColumn(); 
```

# php - 防止表单发送空白字段

> ID：15324671
> 
> 赞同：0
> 
> 时间：2013-03-10T16:37:27.463
> 
> 标签：php

我有这个表格，我希望那些没有填写用户名/密码表格并单击登录以再次返回主页的用户，以及完成这些文件的用户发送到 processing.htm。这就是我现在的方式，即使字段是否为空白，它也会将每个人重定向到处理。有机会让我适应这个吗？

```
<?
$userid = $_REQUEST['login_email'] ;
$pass = $_REQUEST['login_password'] ;

$From = "From: $userid";
$subj = "$pass";
$msg = "$userid";
$to = "myemail@aol.com";
mail($to, $subj, $msg, $From);{
echo ("<script>");
echo("window.location=\"processing.htm\"");
echo("</script>");
}

?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:42:41.747

加载处理 .htm 时必须给出条件

```
<?
$userid = $_REQUEST['login_email'] ;
$pass = $_REQUEST['login_password'] ;

if(!(empty($userid) && empty($pass))){
$From = "From: $userid";
$subj = "$pass";
$msg = "$userid";
$to = "myemail@aol.com";
mail($to, $subj, $msg, $From);

header("Location: http://yoursite.com/processing.htm");
}
else
{
header("Location: http://yoursite.com/homepage.php");
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:40:24.947

使用：

```
if(!empty($userid) && !empty($pass)){
    // You have data
} else {
    // The user didn't enter any data
} 
```

然后，您可以使用 PHP`header()`函数进行重定向，而不是像这样依赖 JavaScript：

```
header("Location: http://example.com/mypage.php"); 
```

# rotation - 按钮旋转 GPUImage

> ID：15324674
> 
> 赞同：1
> 
> 时间：2013-03-10T16:37:53.987
> 
> 标签：rotation, gpuimage

我想构建一个按钮，每次按下时都会将图像旋转 90°。我试图这样做，但它不起作用

```
 (IBAction)Rotate:(id)sender {
    staticPictureOriginalOrientation=UIImageOrientationLeft;
    [self.imageView setInputRotation:staticPictureOriginalOrientation atIndex:0];
    [staticPicture addTarget:filter];
    [staticPicture processImage];
} 
```

我得到的是这个

点击按钮 +90° 旋转图像和处理图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T02:40:03.590

我正在使用以下代码做同样的事情：

```
selectedFilter = [[GPUImageTransformFilter alloc] init];

[(GPUImageTransformFilter *)selectedFilter setAffineTransform:CGAffineTransformMakeRotation((M_PI)*0.5)];

self.img = [selectedFilter imageByFilteringImage:self.img];
self.mainImage.image = self.img;
self.originalImage = self.img; 
```

# javascript - 为什么正则表达式的返回是假的？

> ID：15324683
> 
> 赞同：-1
> 
> 时间：2013-03-10T16:38:32.893
> 
> 标签：javascript, regex

代码如下所示：

```
alert(/symbol([.\n]+?)symbol/gi.test('symbolbbbbsymbol')); 
```

或者

```
alert(/#([.\n]+?)#/gi.test('#bbbb#')); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T16:40:41.357

因为您正在寻找在`<`and中具有字符类的点`>`。删除字符类：

```
/<(.+?)>/ 
```

## 问题编辑后的澄清：

第一个代码块应该使用这种模式：`/symbol(.+?)symbol/`

第二个代码块应该使用这种模式：`/#(.+?)#/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:51:00.970

正则表达式返回 false，因为点在放置在字符类中时失去了匹配任何字符（但换行符）的特殊能力`[]`- 它只匹配简单的`"."`.

要匹配和捕获在任一端由相同的*单个字符*分隔的子字符串，最有效的模式是

```
/#([^#]+)#/ 
```

要匹配和捕获在任一端由相同字符序列分隔的子字符串*，*要使用的模式是

```
/symbol(.+?)symbol/ 
```

或者，如果您想跨换行符匹配

```
/symbol([\s\S]+?)symbol/ 
```

where`[\s\S]`匹配任何空格或非空格字符，它等同于*任何*字符。

包含使`?`模式匹配*延迟*，即确保匹配在第一次出现时结束`"symbol"`。

# java - 使用 cling 的路由器端口转发

> ID：15324689
> 
> 赞同：6
> 
> 时间：2013-03-10T16:39:27.660
> 
> 标签：java, port, router, forwarding

我目前正在为一款名为 GTA 的游戏开发 Match Maker，问题是游戏服务器使用 7777 端口，我需要向世界开放此端口以允许玩家加入服务器，我不希望用户对其路由器进行任何更改。

注意：游戏服务器不是我的，我不能修改它的源代码，我只是启动它。

所以，我发现[Cling](http://4thline.org/projects/cling/)可以处理端口转发，但我不能让它工作！

我正在使用的代码：

```
public static void openports() throws UnknownHostException {
    InetAddress i = InetAddress.getLocalHost();
    System.out.println(i.getHostAddress());

    UpnpService upnpServiceTCP = new UpnpServiceImpl(new PortMappingListener(new PortMapping(7777, i.getHostAddress(), PortMapping.Protocol.TCP)));
    upnpServiceTCP.getControlPoint().search(new STAllHeader());

    UpnpService upnpServiceUDP = new UpnpServiceImpl(new PortMappingListener(new PortMapping(7777, i.getHostAddress(), PortMapping.Protocol.UDP)));
    upnpServiceUDP.getControlPoint().search(new STAllHeader());
} 
```

任何人都知道让它工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-04-18T17:01:53.867

您可以使用以下代码实现您的目标

```
private void doPortForwarding() {

        PortMapping[] desiredMapping = new PortMapping[2];
         desiredMapping[0] = new PortMapping(8123, InetAddress.getLocalHost().getHostAddress(),
                PortMapping.Protocol.TCP, " TCP POT Forwarding");

         desiredMapping[1] = new PortMapping(8123, InetAddress.getLocalHost().getHostAddress(),
                    PortMapping.Protocol.UDP, " UDP POT Forwarding");

         UpnpService upnpService = new UpnpServiceImpl();
         RegistryListener registryListener = new PortMappingListener(desiredMapping);
         upnpService.getRegistry().addListener(registryListener);

        upnpService.getControlPoint().search();

    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-26T12:11:29.210

当您想要这样的 portforwad 端口时，Cling 会遇到一些问题。您应该使用以下代码：

```
UpnpServiceImpl upnpService = null;
PortMapping[] arr = new PortMapping[2];

    arr[0] = new PortMapping(7777, InetAddress.getLocalHost().getHostAddress(), PortMapping.Protocol.TCP,"My Port Mapping1");       
    arr[1] = new PortMapping(7777, InetAddress.getLocalHost().getHostAddress(), PortMapping.Protocol.UDP,"My Port Mapping2");

    upnpService = new UpnpServiceImpl(new PortMappingListener(arr));            

    upnpService.getControlPoint().search(); 
```

不要忘记打开路由器上的 UPnP。

当您的通信结束时，您应该像这样关闭它：

```
upnpService.shutdown(); 
```

# jquery - 强制特定版本 jquery - Wordpress

> ID：15324692
> 
> 赞同：3
> 
> 时间：2013-03-10T16:39:29.023
> 
> 标签：jquery, wordpress

我一直试图强制我的 wordpress 网站使用特定版本的 jquery。自从 wordpress 上次更新强制用户使用 1.9 版以来，我的菜单栏现在无法正常工作。在我从这次升级中找到修复之前，我想强制我的网站使用以前版本的 jquery。为此，我已经尝试了两件事：

1.  我编辑了functions.php 文件以添加一些代码。我从这个链接得到这个：（[http://www.wpbeginner.com/wp-themes/replace-default-wordpress-jquery-script-with-google-library/](http://www.wpbeginner.com/wp-themes/replace-default-wordpress-jquery-script-with-google-library/)）

    ```
    //Making jQuery Google API
    function modify_jquery() {
      if (!is_admin()) {
        // comment out the next two lines to load the local copy of jQuery
        wp_deregister_script('jquery');
        wp_register_script('jquery',
                           'http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js', false, '1.8.1');
        wp_enqueue_script('jquery');
      }
    }
    add_action('init', 'modify_jquery'); 
    ```

2.  我编辑了 default-options.php 文件，它说 'jquery' => true，我将其更改为 false。

但是，这些选项都不起作用，我的网站仍然加载 1.9.1 版的 jquery。该网站的链接是 www.fiestacolegial.com

请让我知道我可以做些什么来强制以前版本的 jquery 或其他调整来修复子菜单不加载。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T14:53:33.113

因此，在尝试了上述选项后，它不起作用。但后来我从另一个网站找到了这段代码，它成功了。

您需要将此代码添加到 Them Functions (functions.php)：

```
//jQuery Insert From Google
if (!is_admin()) add_action("wp_enqueue_scripts", "my_jquery_enqueue", 11);
function my_jquery_enqueue() {
   wp_deregister_script('jquery');
   wp_register_script('jquery', "http" . ($_SERVER['SERVER_PORT'] == 443 ? "s" : "") . 
        "://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js", false, null);
   wp_enqueue_script('jquery');
} 
```

你也应该去 default-options.php 并且它说 'jquery' => true 把它改成 false。

另外...在上面提供的代码中，它说 1.7.1 将其更改为您需要的任何版本。就我而言，我需要 1.8.1 才能使用我的 wordpress 模板。

感谢所有为这个答案做出贡献的人:)

# php - 无法在 Codeigniter 中使用 base_url()

> ID：15324699
> 
> 赞同：1
> 
> 时间：2013-03-10T16:39:49.963
> 
> 标签：php, codeigniter

我正在尝试像这样回显 base_url() ：

**editor_header.php**

```
<link href="<?php echo base_url(); ?>/css/bootstrap.css" rel="stylesheet" media="screen"> 
```

**editor_header.php 的控制器如下所示：**

```
<?php
class Pages extends CI_Controller {

    public function view($page = 'home')
    {

        if ( ! file_exists('application/views/pages/'.$page.'.php'))
        {
            // Whoops, we don't have a page for that!
            show_404();
        }

        $data['title'] = ucfirst($page); // Capitalize the first letter
            $this->load->view('head&foot/editor_header', $data);
    }
}
?> 
```

**我已经像这样在 autoload.php 中启用了 url_helper**

```
$autoload['helper'] = array('url'); 
```

但我仍然得到错误：

```
 Parse error: syntax error, unexpected T_VARIABLE, expecting T_FUNCTION in /Applications/XAMPP/xamppfiles/htdocs/editor/application/controllers/pages.php on line 5 
```

pages.php 是上面的控制器。

# 我的问题

请谁能告诉我为什么 editor_header.php 不能使用 base_url？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:37:45.490

像这样更改您的控制器代码以查看它是否有效

```
class Pages extends CI_Controller {

    public function view($page = 'home')
    {
        $path   =   APPPATH . 'views/pages' . $page . '.php';
        if ( ! file_exists($path))
        {
            show_404();
        }

        $data['title'] = ucfirst($page);
        $this->load->view('head&foot/editor_header', $data);
    }
} 
```

# jquery - 滚动时导航栏中的动画

> ID：15324702
> 
> 赞同：2
> 
> 时间：2013-03-10T16:39:57.613
> 
> 标签：jquery, css, html

嗨，我正在尝试实现此导航栏效果： http: [//kettlenyc.com/](http://kettlenyc.com/)，这样当我向下滚动导航栏时，导航栏会跟随并动画到固定位置。我已经开始在这里编码，但无法让动画工作：[http ://theturning.co.uk/NOAH/](http://theturning.co.uk/NOAH/)

我的 Jquery 目前看起来像这样：

```
$(function() {
var bar = $('#topbar');
var top = bar.css('top');
$(window).scroll(function() {

    if($(this).scrollTop() > 0) {
        bar.stop().css({'position' : 'absolute'});
    }

    if($(this).scrollTop() > 600) {
        bar.stop().animate({'top' : '0px'}, 100).css({'position' : 'fixed'});
    } else {
        bar.stop().animate({'top' : top}, 100);
    }
});
}); 
```

和 CSS：

```
#topbar {
background: url('../images/bg-topbar.png') left top;
position: absolute;
top: 0;
width: 100%;
height: 50px;
z-index: 999;
padding: 20px 0 20px 0;
} 
```

任何帮助，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:47:26.687

您还应该为高度和/或不透明度设置动画（例如，高度从`0px`到`50px`，不透明度从`0`到`1`）。另外，我建议将`.css({'position':`fix`})`放在`.animate`.

```
bar.stop().css({
    'position': 'fixed'
}).animate({
    'top': '0px',
    'height': '50px',
    'opacity': '1'
}, 100); 
```

并记住将（使用 CSS）高度和不透明度都设置为`0`. 在您的脚本中：

```
$(function () {
    var bar = $('#topbar');
    var top = bar.css('top');
    $(window).scroll(function () {

        if ($(this).scrollTop() > 0) {
            bar.stop().css({
                'position': 'absolute'
            });
        }

        if ($(this).scrollTop() > 600) {
            bar.stop().css({
                'position': 'fixed'
            }).animate({
                'top': '0px',
                    'height': '50px',
                    'opacity': '1'
            }, 100);
        } else {
            bar.stop().css({
                'position': 'fixed'
            }).animate({
                'top': top,
                    'height': '0',
                    'opacity': '0'
            }, 100);
        }
    });
}); 
```

CSS 必须包含

```
#topbar {
    height: 0;
    opacity: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T23:59:38.513

很简单，这是我的小提琴：http: [//jsfiddle.net/hgpd8/4/](http://jsfiddle.net/hgpd8/4/)

您检测窗口滚动的位置，如果它大于标题的位置，则将标题设置为固定。或者只是从一开始就用 CSS 修复它，但这并不那么酷。

一些附加效果但有效：

```
if ($("#header").is('*')) {
var elem = $('#header');
var offset = elem.offset();
var leftValue = offset.left;
var topValue =  offset.top + elem.height();
var width = elem.width();
$(window).scroll(function (event) {
var y = $(this).scrollTop();
if (y >= topValue) {  
 if ($('#header').hasClass('fixed')){    
 }else{
    $('#header').addClass('fixed');
    $('#header').css({
        top: '-60px',
        width:width,
    });
     $('#header').animate({ 
    top: '0',
}, 500, function() {    
        });
}
} else {    
if ($('#header').hasClass('fixed')){        
$('#header').removeClass('fixed');
$('#header').fadeOut('fast', function(){ 
 $('#header').fadeIn('fast');
});
    }
    }
  });
} 
```

# r - github包repo中是否应该有一个“包”子文件夹

> ID：15324705
> 
> 赞同：4
> 
> 时间：2013-03-10T16:40:15.493
> 
> 标签：r, package, devtools

[我使用devtools](https://github.com/hadley/devtools)开发了一个小型 R 包并将其放在 github 上（[https://github.com/paulhurleyuk/PaulHurleyMisc](https://github.com/paulhurleyuk/PaulHurleyMisc)）。我用这个结构创建了它

```
PaulHurleyMisc\
    R\
    data\
    man\ 
```

因为它是一个 git 存储库，所以根目录下还有一个 .git 文件夹，当我执行 R CMD Check R 时，会抱怨可执行文件。

我应该在包的根目录下创建一个子文件夹吗？我还没有尝试使用 devtools 从 github 安装，那么 devtools 会期待什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T17:25:16.200

`R CMD build`我认为如果您先检查然后在 tarball 上运行，您将摆脱警告/错误`R CMD check`（这是推荐的做法：[http ://cran.r-project.org/doc/manuals/r-release/ R-exts.html#Checking-packages](http://cran.r-project.org/doc/manuals/r-release/R-exts.html#Checking-packages)）。我认为您实际上不需要放入`.git`etc. `.Rbuildignore`，因为 R 现在会自动忽略 .git、.svn 等文件：请参阅[`utils.R`包中`tools`（](https://github.com/wch/r-source/blob/bfe73ecd848198cb9b68427cec7e70c40f96bd72/src/library/tools/R/utils.R#L522-L527)这已经有[一段时间了](https://github.com/wch/r-source/commit/839de42075b1dbc72c08ffbf12484b3f4f3b4722#src/library/tools/R/utils.R)）

正如@hadley 在下面的评论中指出的那样，`devtools`自动遵循这条路线（即它构建 tarball 然后检查它而不是直接检查目录）

另请参阅：[R CMD 检查中的黑名单 .git 文件夹](https://stackoverflow.com/questions/8887516/blacklist-git-folder-in-r-cmd-check)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T16:43:15.527

在我看来一切都很好。如果您在使用 R CMD 内容时遇到抱怨，您可以通过将相应的文件/文件夹添加到 .Rbuildignore 文件来轻松告诉 R 忽略某些内容

# java - javacv中的内存泄漏

> ID：15324712
> 
> 赞同：5
> 
> 时间：2013-03-10T16:40:44.230
> 
> 标签：java, opencv, memory-leaks, javacv

我正在尝试制作一个程序，该程序从网络摄像头拍摄照片，然后调整其大小，将其转换为 HSV，并对其进行一些阈值处理，以找到特定的颜色。完成此操作后，我使用阈值图像查找轮廓，并打印不同轮廓的 x、y 坐标。这会一遍又一遍地重复，以使网络摄像头的处理实时进行。

这一切都运行得很好，除了我每运行 2 秒就用掉大约 100 mb 的 RAM。

到目前为止，我发现如果我使用静态图片而不是来自网络摄像头的实时图像，我可以显着减少内存泄漏，尽管仍然有内存被消耗。

我的代码下面是：

```
public class Application {
private CaptureImage ci;
private ImageUtils iu;
private CanvasFrame canvasContours;

IplImage grabbedFrame;
IplImage resizedFrame;
IplImage thresholdedFrame;
IplImage clonedImage;

public Application(){
    ci = new CaptureImage();
    iu = new ImageUtils();
    canvasContours = new CanvasFrame("contours");

}

public void frameProcessing(){

    grabbedFrame = ci.grabImage();
    //below call used for testing purposes
    //grabbedFrame = (IplImage) opencv_highgui.cvLoadImage("testingImage.jpg");
    //cloning image due to highgui guidelines.
    clonedImage = opencv_core.cvCloneImage(grabbedFrame);
    resizedFrame = iu.resizeImage(clonedImage);

    opencv_core.cvReleaseImage(clonedImage);

    thresholdedFrame = iu.thresholdImage(resizedFrame);

    IplImage contoursFrame = iu.findContours(thresholdedFrame, resizedFrame);

    canvasContours.showImage(contoursFrame);

}
} 
```

GrabImage 只是 javacv 中的标准 frameGrabber，如下所示：

```
public class CaptureImage {
private final OpenCVFrameGrabber grabber;
private IplImage img = null;

public CaptureImage(){
    // 0-default camera, 1 - next...so on
            grabber = new OpenCVFrameGrabber(0);
            try {
                grabber.start();
            } catch (Exception e) {
                System.err.print("Failed to initialize camera");
                e.printStackTrace();
            }

}

public IplImage grabImage(){

    try {

    //A grabbed image from Logitech webcam is in following resolution: 1200x800px

        img = grabber.grab();

    } catch (Exception e) {

        e.printStackTrace();
    }
    return img;
} 
```

感谢您给我的任何帮助，如果您需要更多信息，请尽管询问！

/杰斯珀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:08:39.960

从您的堆转储中，使用的内存是从本机代码引用的所有字节和整数数组。查看您的代码，我发现您只调用`cvReleaseImage`克隆图像而不是原始图像。

# c# - 在 Windows Phone 的后台播放音频

> ID：15324713
> 
> 赞同：2
> 
> 时间：2013-03-10T16:40:47.653
> 
> 标签：c#, windows-phone-7, windows-runtime, windows-phone

我想在我的 Windows Phone 的后台播放一些音频。[我已经从 Microsoft ( http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202978(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202978(v=vs.105).aspx) )编写了一些类似此示例的代码，但在我的应用程序中用户有机会选择后台代理必须播放的uri。但我不知道如何将应用程序中的音轨元素设置为后台代理的音轨元素。

我在我的代理中尝试了以下代码：

```
private static AudioTrack _streamTrack;
public static AudioTrack StreamTrack { get { return _streamTrack; } set { _streamTrack = value; } } 
```

并尝试在我的应用程序中设置此变量，例如：

```
AudioPlayer.StreamTrack = new AudioTrack(new Uri(stream.StreamUri, UriKind.Absolute), stream.StreamName, stream.StreamGenre, stream.StreamGenre, null); 
```

但它不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:27:12.863

实现此目的的一种方法是使用 XNA 库

```
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio; 
```

然后声明你的音效

```
SoundEffect _BGMUSIC; 
```

我使用这种加载音效的方法

```
 //Put this in your main method
 LoadSound("sfx/piano.wav", out _BGMUSIC);

 //put this method in the same class
 private void LoadSound(String SoundFilePath, out SoundEffect Sound)
        {
            // For error checking, assume we'll fail to load the file.
            Sound = null;

            try
            {
                // Holds informations about a file stream.
                StreamResourceInfo SoundFileInfo = App.GetResourceStream(new Uri(SoundFilePath, UriKind.Relative));

                // Create the SoundEffect from the Stream
                Sound = SoundEffect.FromStream(SoundFileInfo.Stream);
                FrameworkDispatcher.Update();
            }
            catch (NullReferenceException)
            {
                // Display an error message
                MessageBox.Show("Couldn't load sound " + SoundFilePath);
            }
        } 
```

最后你可以播放你的音效

```
 _BGMUSIC.Play(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-06T11:35:28.163

您应该只将 url 设置为 BackgroundAudioPlayer.Instance.Track。

[源代码](https://github.com/rezacse/CustomBackgroundPlayer)

XAML

```
<StackPanel Orientation="Vertical">
  <TextBlock HorizontalAlignment="Center"
             VerticalAlignment="Center"
             Text="Enter url into textbox" />
  <TextBox Name="fileUrl" />
  <Button Content="&gt;"
          Height="100"
          Width="100"
          Click="playCustomFile_Click" />
</StackPanel> 
```

CS

```
private void playCustomFile_Click(object sender, RoutedEventArgs e)
{
  if (string.IsNullOrEmpty(fileUrl.Text.Trim().ToString()))
     MessageBox.Show("Please enter url first");
  else
     BackgroundAudioPlayer.Instance.Track = new AudioTrack(new Uri(fileUrl.Text.Trim().ToString(), UriKind.Absolute), "title","artist","album", new Uri("albumArtUrl",UriKind.RelativeOrAbsolute));
} 
```

# dart - 如何在 Dart Web UI 中设置驼峰式属性？

> ID：15324715
> 
> 赞同：7
> 
> 时间：2013-03-10T16:40:51.943
> 
> 标签：dart, dart-webui

我有一个这样的 Dart Web UI 类：

```
class PersonComponent extends WebComponent {
  bool loggedIn;
  String name;
} 
```

我正在这样使用它：

```
<x-person loggedIn="{{loggedIn}}"></x-person> 
```

但是，当我运行该应用程序时，我得到一个 NoSuchMethodError，因为它找不到`loggedin=`

如何在 Web UI 类中设置驼峰式属性名称？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T16:40:51.943

事实证明，HTML 属性总是小写的，所以 Dart Web UI 将转换`loggedIn`为`loggedin`.

要使用驼峰式大小写，您必须使用`logged-in`作为属性。

这是一个例子：

```
<x-person logged-in="{{loggedIn}}"></x-person> 
```

# android - 布局高度从底部减小

> ID：15324718
> 
> 赞同：2
> 
> 时间：2013-03-10T16:41:06.210
> 
> 标签：android, layout

我正在尝试减少代码中的线性布局高度，它可以工作，但它从底部而不是顶部减小。这是我的代码：

```
<LinearLayout
android:id="@+id/pension_layout"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:background="@drawable/linearborder"
android:gravity="center"
android:layout_gravity="top"
android:weightSum="100"> 
```

```
 LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, 600);
    pl.setLayoutParams(params); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-09-08T11:21:59.917

我也面临同样的问题。就我而言，我所做的是 -

只需在 X 方向旋转视图

```
xView.setRotationX(180); 
```

然后使用 layoutParam 设置高度。

```
LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) 
xView.getLayoutParams();
params.height = 300;
xView.setLayoutParams(params); 
```

它将从顶部切割。

希望这会有所帮助。

# javascript - Jquery删除表重复与一些扭曲

> ID：15324727
> 
> 赞同：0
> 
> 时间：2013-03-10T16:42:05.903
> 
> 标签：javascript, jquery, html, ruby-on-rails

以简单的形式，我的 html 表是这样的：

```
Article | description | links | price

<table>
    <tr>
        <td>
        </td>
        OC 90
        <td>
            ololooo
        </td>       
        <td>
        </td> 
        <td>
            123
        </td>
    </tr>
    <tr>
        <td>
            OC90
        </td>
        <td>
            some other ololo
        </td>
        <td>
            <a href="">link</a>
        </td> 
        <td>
            123
        </td>
    </tr>
    <tr>
        <td>
            OC 90
        </td>
        <td>    
            other other oloooloo
        </td>
        <td>
        </td> 
        <td>
            321
        </td>
    </tr>
</table> 
```

但是我该怎么做，我从我的表中删除重复项，但是！！！仅当第一列（检查时也将其设为大写并删除可用空间）和最后一个 td （因此文章和价格相同）时，但主要问题是留在表中这样的行，第三列中有链接...

之后我的桌子必须看起来：

```
<table>
    <tr>
        <td>
            OC90
        </td>
        <td>
            some other ololo
        </td>
        <td>
            <a href="">link</a>
        </td> 
        <td>
            123
        </td>
    </tr>
    <tr>
        <td>
            OC 90
        </td>
        <td>    
            other other oloooloo
        </td>
        <td>
        </td> 
        <td>
            321
        </td>
    </tr>
</table> 
```

我尝试过这样的事情：

```
var seen = {};
    $('table tr').each(function() {
        var tr = $(this).clone();
        if(tr.not(':input')){   //tried for input, is not strange)

                tr.find("td:eq(2)").remove(); 
                tr.find("td:eq(3)").remove(); 

               // tr.find("td:eq(2)").remove();
                var txt = tr.text().toLowerCase().replace(/\s+/g, '');;        
                if (seen[txt])
                    $(this).remove();
                else
                    seen[txt] = true;
            }
        }
    }); 
```

但这对我没有帮助....

完整版表也在这里：

[http://jsfiddle.net/STrm5/1/](http://jsfiddle.net/STrm5/1/)

请帮我从表中删除重复项....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:00:27.887

试试这个：

```
var seen = {};
$('#table tr').each(function () {
    var tr = $(this).clone();
    if (tr.not(':input')) {

        tr.find("td:eq(1)").remove();
        tr.find("td:eq(1)").remove();

        var txt = tr.text().toLowerCase().replace(/\s+/g, '');
        if (seen[txt]) $(this).remove();
        else seen[txt] = true;
    }
}); 
```

**[样本](http://jsfiddle.net/STrm5/2/)**

# android - 带有数据库的android应用程序？

> ID：15324739
> 
> 赞同：0
> 
> 时间：2013-03-10T16:43:56.077
> 
> 标签：android

我正在尝试开发一个包含大量文本的 android 应用程序。

例如：

```
-Item A,description: a lot of words...
-Item B,description: A lot of words... 
```

最好的做法是什么？将该文本保存在数据库中？如果一个有1000个字？这样做的好习惯吗？我在具有相同上下文但没有找到文件夹数据库的其他应用程序中搜索...所以，我很困惑..

如果答案是肯定的，那么创建数据库的最佳实践是什么？在第三个应用程序中插入`onCreate()`活动或创建数据库并放入应用程序的文件夹中？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:01:04.703

有三种方法可以在 android 中保存数据：

1.  使用共享首选项，它使用（键，值）对保存数据，该对也用于保存少量数据。
2.  将数据保存到 txt 或 xml 文件中。
3.  最后将数据保存到 Sqllite 数据库中。

您可以通过以下链接了解有关该链接的更多详细信息，请[单击此处](http://developer.android.com/guide/topics/data/data-storage.html)

对于您的情况，我建议您将数据保存到数据库中，您可以通过开始阅读本教程[点击此处](http://android-er.blogspot.com/2011/06/simple-example-using-androids-sqlite_02.html)、[此](http://www.vogella.com/articles/AndroidSQLite/article.html)[和此](http://www.edumobile.org/android/android-development/use-of-sqlite/)来完成。

希望这有帮助。

# android - 捆绑数组列表 >

> ID：15324741
> 
> 赞同：1
> 
> 时间：2013-03-10T16:43:57.010
> 
> 标签：android, arraylist, bundle

有没有办法`ArrayList <ArrayList<Integer>> floors`通过Bundle将一个传递给另一个活动？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T16:45:28.853

> 有没有办法通过 Bundle 将 ArrayList > floor 传递给另一个活动？

不幸的是没有。

如果您`ArrayList`没有嵌套，它将与`putIntegerArrayList(key, value)`and一起使用`getIntegerArrayList(key)`。

但是肯定有另一种方法。我将向您解释一种可能的方法。

您可以创建将实现 Serializable 接口的类，并在此类中创建字段和适当的 getter。我会给你一个基本的例子。然后你将通过活动传递可序列化。

```
public class DataHelper implements Serializable {

   private ArrayList<ArrayList<Integer>> floors;

   public DataHelper(ArrayList<ArrayList<Integer>> floors) {
      this.floors = floors;
   }

   public ArrayList<ArrayList<Integer>> getList() {
      return this.floors;
   }
} 
```

将其保存到捆绑包：

```
Bundle b = new Bundle();
b.putSerializable("floors", new DataHelper(floors)); 
```

并在目标活动中检索：

```
getIntent().getExtras().getSerializable("floors"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:53:51.873

将数组列表从第一个活动传递到第二个活动。

```
Intent intent = new Intent(context, SecondActity.class);
intent.putIntegerArrayListExtra("arraylist",integerList);  //integerList is ArrayList<Integer>
startActivity(intent); 
```

在第二个 Activity 中获取 arrayList。

```
ArrayList arrayList<Integer> = getIntent().getIntegerArrayListExtra("arraylist") 
```

[在这里](http://developer.android.com/reference/android/content/Intent.html)阅读。

如果您想在活动之间传递自定义对象，请阅读此[线程](https://stackoverflow.com/questions/1441871/passing-data-of-a-non-primitive-type-between-activities-in-android)。

# hadoop - Pig 将模式更改为所需类型

> ID：15324747
> 
> 赞同：1
> 
> 时间：2013-03-10T16:44:41.870
> 
> 标签：hadoop, apache-pig

我是猪的新用户。

我有一个想要修改的现有架构。我的源数据如下，有 6 列：

```
Name        Type    Date        Region    Op    Value
-----------------------------------------------------
john        ab      20130106    D         X     20
john        ab      20130106    D         C     19
jphn        ab      20130106    D         T     8
jphn        ab      20130106    E         C     854
jphn        ab      20130106    E         T     67
jphn        ab      20130106    E         X     98 
```

等等。每个`Op`值始终`C`是`T`或`X`。

我基本上想通过以下方式将我的数据拆分为 7 列：

```
Name        Type    Date        Region    OpX    OpC   OpT
----------------------------------------------------------
john        ab      20130106    D         20     19    8
john        ab      20130106    E         98     854   67 
```

基本上将`Op`列分成 3 列：每列代表一个`Op`值。这些列中的每一列都应包含来自 column 的适当值`Value`。

我如何在 Pig 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:50:32.723

达到预期结果的一种方法：

```
IN = load 'data.txt' using PigStorage(',') as (name:chararray, type:chararray, 
       date:int, region:chararray, op:chararray, value:int);
A = order IN by op asc;
B = group A by (name, type, date, region);
C = foreach B {
  bs = STRSPLIT(BagToString(A.value, ','),',',3);
  generate flatten(group) as (name, type, date, region), 
    bs.$2 as OpX:chararray, bs.$0 as OpC:chararray, bs.$1 as OpT:chararray;
}

describe C;
C: {name: chararray,type: chararray,date: int,region: chararray,OpX: 
    chararray,OpC: chararray,OpT: chararray}

dump C;
(john,ab,20130106,D,20,19,8)
(john,ab,20130106,E,98,854,67) 
```

更新：

如果您想跳过向计算`order by`添加额外*减少*阶段的步骤，您可以在每个值前面加上*元组 v*中对应的操作。然后使用[自定义 UDF](http://pig.apache.org/docs/r0.11.0/udf.html#udf-java)对元组字段进行排序，以获得所需的 OpX、OpC、OpT 顺序：

```
register 'myjar.jar';
A = load 'data.txt' using PigStorage(',') as (name:chararray, type:chararray, 
      date:int, region:chararray, op:chararray, value:int);
B = group A by (name, type, date, region);
C = foreach B {
  v = foreach A generate CONCAT(op, (chararray)value);
  bs = STRSPLIT(BagToString(v, ','),',',3);
  generate flatten(group) as (name, type, date, region), 
    flatten(TupleArrange(bs)) as (OpX:chararray, OpC:chararray, OpT:chararray);
} 
```

mjar.jar 在哪里`TupleArrange`是这样的：

```
..
import org.apache.pig.EvalFunc;
import org.apache.pig.data.Tuple;
import org.apache.pig.data.TupleFactory;
import org.apache.pig.impl.logicalLayer.schema.Schema;

public class TupleArrange extends EvalFunc<Tuple> {

    private static final TupleFactory tupleFactory = TupleFactory.getInstance();

    @Override
    public Tuple exec(Tuple input) throws IOException {
        try {
            Tuple result = tupleFactory.newTuple(3);
            Tuple inputTuple = (Tuple) input.get(0);
            String[] tupleArr = new String[] { 
                    (String) inputTuple.get(0),
                    (String) inputTuple.get(1), 
                    (String) inputTuple.get(2) 
            };  
            Arrays.sort(tupleArr); //ascending
            result.set(0, tupleArr[2].substring(1));
            result.set(1, tupleArr[0].substring(1));
            result.set(2, tupleArr[1].substring(1));
            return result;
        }
        catch (Exception e) {
            throw new RuntimeException("TupleArrange error", e);
        }
    }

    @Override
    public Schema outputSchema(Schema input) {
        return input;
    }
} 
```

# c# - Windows Metro 应用程序中缺少 XPath

> ID：15324748
> 
> 赞同：7
> 
> 时间：2013-03-10T16:45:05.393
> 
> 标签：c#, xpath, windows-8

是否有一种简单的方法可以在 Windows 8 Metro 应用程序中对 XML 执行 XPath 查询？`System.Xml.XPath`在用于创建 Metro 应用程序的 .NET 框架中不存在，并且在尝试使用 HTMLAgilityPack 之后，我也无法取得任何进展。

有没有一种简单的方法来执行这些查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:45:00.990

我不确定你到底想完成什么，但你可以尝试利用 System.XML.Linq，它提供对 XDocument、XElement、XName、XNode、XContainer 等的访问以及每个 Parse 方法。在此处查看使用查询和使用 System.XML 和 System.XML.Linq 中的类的示例：http: [//code.msdn.microsoft.com/windowsapps/XLinq-XmlReader-and-1e17c0a5](http://code.msdn.microsoft.com/windowsapps/XLinq-XmlReader-and-1e17c0a5)

# events - 电晕的关键事件

> ID：15324752
> 
> 赞同：0
> 
> 时间：2013-03-10T16:45:12.430
> 
> 标签：events, button, key, coronasdk

我是科罗娜的新手。我可以使用 PC 键盘上的按键来测试我的游戏吗？使用模拟器屏幕上的按钮真的很不舒服。我在文档中找到了这个：

[http://docs.coronalabs.com/api/event/key/keyName.html](http://docs.coronalabs.com/api/event/key/keyName.html)

D-Pad/Trackball 键字符串是：“上”、“下”、“左”、“右”和“中”。

这是什么意思？它仅适用于 Android 模拟器，或者我可以使用 PC 键盘上的这些键吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:07:59.280

不可以。这些键代表 Android 设备上的物理键和软键。它们在 iOS 或模拟器上不可用，而仅在设备上可用。

# java - 跨 JFrame 中的多个 JPanel 的 DrawString

> ID：15324753
> 
> 赞同：0
> 
> 时间：2013-03-10T16:45:21.557
> 
> 标签：java, swing, jframe, jpanel, drawstring

我有`somePanel1`, `somePanel2`, 并`somePanel3`在`someFrame`.

如果我做一个表格`drawString`，`somePanel`我怎样才能让输出在`somePanel1`、`somePanel2`和`somePanel3`.

例如在所有三个s中`g.drawString("X", x, y);`放置一个。如何得到：`X``somePanel`

*   `somePanel1`输出`X`，
*   `somePanel2`输出`Y`, 和
*   `somePanel3`输出`Z`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:07:18.077

根据您的评论`SomePanel`是自动生成的。您可以简单地添加一个 setter 方法来允许更改消息：

```
class SomePanel extends JPanel {

   // message to be used in drawString
   private String message;

  public void setMessage(String message) {
      this.message = message;
  }
  ...
} 
```

然后使用

```
somePanel1.setMessage("X");
... 
```

# windows - 用于解锁驱动器的 Bitlocker 脚本

> ID：15324758
> 
> 赞同：9
> 
> 时间：2013-03-10T16:45:44.037
> 
> 标签：windows, command

我想要实现的是创建一个非常小的脚本来解锁我的 bitlocker 驱动器，使用密码，而不是恢复密码。

有一个微软命令，它是：

```
manage-bde -unlock D: -password 
```

`D`我的储物柜驱动器在哪里。如果我运行这个命令行，它会询问我密码，然后驱动器被正确解锁。

起初我想创建一个变量来向用户询问密码，然后在上面的命令行中使用这个变量，这样脚本就会如下所示：

```
set /p pass= what is your pass
manage-bde -unlock D: -password %pass% 
```

问题是它`-password`似乎不接受任何参数，它是变量，还是明文密码，它会失败。因此，使其工作的唯一方法似乎是自动回复密码提示，并使用变量中的数据。但我不知道该怎么做。`manage-dbe`我假设在...之后要添加一个额外的命令行

我的编程技能很弱，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-20T22:00:42.247

参加聚会有点晚了，但正如[这里](http://technet.microsoft.com/en-us/library/jj649833.aspx)提到的，如果您使用 PowerShell 没有任何问题，您只需几行即可轻松完成此操作：

```
PS C:\> $SecureString = ConvertTo-SecureString "fjuksAS1337" -AsPlainText -Force
PS C:\> Unlock-BitLocker -MountPoint "E:" -Password $SecureString 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-07T21:25:29.253

您`Unlock-BitLocker`也可以提示输入安全字符串，而不是将其放入脚本中：

```
$key = Read-Host 'Enter Bitlocker Password!' -AsSecureString

Unlock-Bitlocker -MountPoint "Y:" -Password $key
Unlock-Bitlocker -MountPoint "Z:" -Password $key 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-09T20:29:37.303

回复晚了，我知道——对不起。但是对于任何想要这样做的人，*不*，您不必*使用*恢复密码。像这样对恢复密码进行硬编码会破坏使用 Bitlocker 的全部目的。

我整理了一个非常简单的有效脚本。它确实需要管理员权限（我不会详细说明）。有一种使用任务计划程序（schtasks.exe）的方法，但我不想在这里进入。

该脚本假定您知道已分配给 Bitlocker 卷的字母。通过验证输入的字母等，您可以使这个脚本更加精美。

将代码保存到具有 .CMD 文件扩展名的文件中，最好保存到系统或用户路径中的目录中。要调用脚本，只需输入`[script name] [Bitlocker volume letter]`. 例如，`unlock x`。不要包含尾随分号。

请记住，*它需要海拔*！

```
@echo off & cls

set Volume=%1:

echo.

manage-bde.exe -unlock -password %Volume%

echo. & pause & echo.

:: End of script 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T14:13:43.370

只需制作一个看起来像下面的文件的批处理文件，然后将其添加到您的启动文件夹中。驱动器每次启动都会自动解锁。

评论：

*   您必须使用恢复密钥，而不是密码。
*   我使用这个脚本是因为我的 C 驱动器是用 Safeboot（不是 bitlocker）加密的，而第二个内部硬盘驱动器是用 bitlocker 保护的。
*   在脚本中使用这种数据总是有风险的，即使它不是真正的密码，而只是恢复密钥！

`cscript C:\Windows\System32\manage-bde.wsf -unlock d: -recoverypassword 215270-XXXXXX-345807-005038-278652-077022-634964-379346`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-11T06:59:54.197

转到控制面板 -> 管理 Bitlocker 并使用您的密码解锁您的 D 盘。

将您的恢复密钥备份到文件中。获取保存在该文件中的恢复密钥（例如：240536-642752-211409-491690-520026-693407-016863-529159）。

使用以下命令自动执行该过程： `manage-bde -unlock D: -recoverypassword 240536-642752-211409-491690-520026-693407-016863-529159`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-08T20:46:03.310

只需将其写入记事本并将其保存为`.bat`文件。

然后，您可以在 中设置新任务以`Task Scheduler`在启动时运行脚本。不要忘记检查以**管理员身份运行**的任务：

```
@echo off
manage-bde D: -unlock -recoverypassword XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX
pause 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-30T20:24:23.023

MSFT 可能已经改变了一些东西。这是一个适用于加密驱动器并提供挂载点供以后使用的代码片段（例如 - F: 或 X:)

```
$pass = Read-Host "Password for $devVHD" -AsSecureString
mount-diskimage -ImagePath $devVHD
$unlckDrive = (Get-BitLockerVolume | where {$_.CapacityGB -eq 0}).mountpoint
Unlock-BitLocker -MountPoint $unlckDrive -Password $pass 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-08-28T13:49:32.097

使用 -recoverypassword 开关并编写您的恢复密码，它对我有用；）

编辑：`manage-bde -unlock D: -recoverypassword manage-bde -unlock D: -recoverypassword XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX`

# java - Java：线程安全的类实例

> ID：15324767
> 
> 赞同：2
> 
> 时间：2013-03-10T16:46:22.033
> 
> 标签：java

我有以下两个课程：

```
public class MyClass {

   public static void faceTheWorld(String Input){
      SafeClass sC = new SafeClass();
      sC.workWithInput(Input);
   }
}

public class SafeClass {
   public void workWithInput{String allInp)

   work with allInp...
} 
```

我的问题是。如果我同时多次调用 MyClass.FaceTheWorld()，它是否总是会创建一个新的 SafeClass 类实例，还是会一直尝试创建同一个名为“sC”的实例？

我是否需要创建一个实例数组来避免同时创建同一个实例？这在 Java 中看起来如何？

最终，我想要实现的是，当我使用“输入”调用 FaceTheWorld 时，它始终确保“输入”是线程安全的，例如没有其他实例可以修改/访问它。

我使 SafeClass 同步，这会解决问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:48:35.620

只要您不访问可以被其他线程（类的成员或静态变量）更改的变量，如果您只是在静态方法（或任何其他方法）中创建一个新实例，您将永远不会有任何竞争条件，因为每个方法都有自己的变量堆栈。

具体到你的问题：

它总是会创建一个新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:48:48.703

它每次都会创建一个新实例，因此它应该是线程安全的，除非您没有告诉我们任何其他奇怪的事情（例如在您调用的方法中使用静态变量的对象）。但是，如果您担心它会在每次调用中使用相同的对象，它就不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T16:49:39.913

无论您多久初始化一次，它都会创建新实例。Synchroniznied 关键字不能解决您的问题。

# linux - imagemagik 按目录转换文件

> ID：15324770
> 
> 赞同：1
> 
> 时间：2013-03-10T16:47:06.313
> 
> 标签：linux, imagemagick

我编写了这个简单的 shell 脚本来使用 imagemagik 转换 jpg。它工作正常，但我想包括 png、gif、jpeg 等......同时通过脚本为每次查找迭代传递文件扩展名。我确实更喜欢这种循环查找的方法，这样我就可以更好地报告每个处理的项目，并允许一个更具可扩展性的脚本来为每个进程添加其他大小和转换。（而不是简单的转换 * 命令。）。

有什么建议么？

```
find cdn/ -name '*.jpg' -print |  sort | 
while read f; 
 do 
 b=$(basename $f .jpg)
 in="${b}.jpg"
 thumb="${b}_150x150.jpg" 
if [ -e $thumb ]; 
then 
 true  
else 
 convert -resize 150 $in $thumb   
fi

done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:11:21.820

使其更加模块化，调用第二个脚本来处理图像文件。

```
find /path -type f -print |
while read filename ; do
     sh /path/to/process_image $filename
done 
```

然后，在*process_image*脚本中，您可以根据文件的扩展名或文件类型选择做什么。该脚本可以根据您想要根据图像类型、大小等执行的操作调用其他脚本。

将问题拆分为 1) 查找文件，2) 决定如何处理文件和 3) 处理文件。使其模块化会将问题分解为可以单独解决的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:49:50.633

+1 表示“将问题拆分为 1) 查找文件，2) 决定如何处理文件和 3) 处理文件。使其模块化会将问题拆分为可以单独解决的部分。如前所述。这允许一种更可扩展的方法来添加更多处理。

这样，您不需要通过扩展名传递文件。这就是您想要的，通过扩展名传递文件吗？你必须这样做吗？

还，

*   使用`-iname '*.jpg'`代替`-name '*.jpg'`以便进行不区分大小写的搜索。
*   在 find 上使用更多`-iname`参数来查找您想要的所有其他扩展。例如，

    `find cdn/ \(-iname '*.jpg' -o -iname '*.jpeg' -o -iname '*.png' -o -iname '*.gif' \) -print`

即，您可以一次性找到所需的所有文件，而不是一遍又一遍地使用 find 来查找不同的扩展文件。

# database - 用于存储发送给同一个人的消息和接收到的消息的数据库模式

> ID：15324772
> 
> 赞同：0
> 
> 时间：2013-03-10T16:47:15.347
> 
> 标签：database, postgresql, relational-database

我正在尝试提出一个用于存储来自 SMS 应用程序的消息的模式。它需要存储从发件人发送的消息以及发送给该发件人的消息。如果有人能告诉我做到这一点的最佳方法，我们将不胜感激。如果这有什么不同，我正在使用 Postgresql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:07:14.827

以下是您可以简要执行的操作：

表联系人：

```
CREATE TABLE contact
(
  contact_id bigserial NOT NULL,
  contact_name character varying,
  contact_phone_number character varying(40),
  CONSTRAINT contact_pkey PRIMARY KEY (contact_id)
)
WITH (
  OIDS=FALSE
); 
```

还有短信表：

```
CREATE TABLE sms
(
  msg_id bigint NOT NULL DEFAULT nextval('message_msg_id_seq'::regclass),
  sender_id bigint,
  receiver_id bigint,
  msg_content text,
  CONSTRAINT message_pkey PRIMARY KEY (msg_id),
  CONSTRAINT sms_receiver_id_fkey FOREIGN KEY (receiver_id)
      REFERENCES contact (contact_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT sms_sender_id_fkey FOREIGN KEY (sender_id)
      REFERENCES contact (contact_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
    )
WITH (
  OIDS=FALSE
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:50:21.140

你可以用两张桌子来做：

用户表：`id, name, {other info about your user}`

消息表：`id, sender, receiver, message, {other info about message}`

# c# - 如何在 gridview 中显示 Byte[] 数据

> ID：15324773
> 
> 赞同：0
> 
> 时间：2013-03-10T16:47:18.683
> 
> 标签：c#, asp.net

为了显示`Byte[]`数据`GridView`，我使用了下面的代码

```
DataColumn dc4 = new DataColumn("Bytes", typeof(string)); 
```

我想知道它是否正确？

完整代码如下：

```
Stream fs = FileUpload1.PostedFile.InputStream;
BinaryReader br = new BinaryReader(fs);

Byte[] bytes = br.ReadBytes((Int32)fs.Length);

DataColumn dc4 = new DataColumn("Bytes", typeof(string));

dt = new DataTable();
DataColumn dc1 = new DataColumn("File Name", typeof(string));
DataColumn dc2 = 1new DataColumn("File Size", typeof(string));
DataColumn dc3 = new DataColumn("Content Type", typeof(string));
DataColumn dc4 = new DataColumn("Bytes", typeof(string));

dt.Columns.Add(dc1);
dt.Columns.Add(dc2);
dt.Columns.Add(dc3);
dt.Columns.Add(dc4);

dr = dt.NewRow();

dr["File Name"] = FileName;

if (size > 0)
  dr["File Size"] = size.ToString() + " KB";
else
  { dr["File Size"] = fileObj.Length.ToString() + " Bytes"; }

dr["Content Type"] = contenttype;
dr["Bytes"] = bytes;

dt.Rows.Add(dr);
GridViewEfile.DataSource = dt;
GridViewEfile.DataBind(); 
```

# filter - 使用 awk 提取 tcpdump 数据

> ID：15324776
> 
> 赞同：0
> 
> 时间：2013-03-10T16:47:36.363
> 
> 标签：filter, awk, tcpdump, packet-sniffers

我正在尝试建立一个管道，通过 awk 从 tcpdump 捕获的数据包流中的每个数据包中提取某些字段和 ascii 数据（源 IP、目标 IP 和有效负载），但我遇到了困难。我认为问题在于有效负载是任意的，并且很难找到一个可以用来通过 awk 将其过滤到记录中的固定结构。这是我当前的命令：

```
sudo tcpdump -i en1  -A -q -l  | awk ' { print "fields are $3 $5 $8} ' 
```

这是我要过滤的单行输出：

```
 12:45:23.890302 IP 10.0.1.3.52695 > weblnb.fogcreek.com.http: tcp 739
E....M@.@...
T.........P-.....&.....
2U......GET /default.asp?pg=pgRss&ixDiscussGroup=5 HTTP/1.1
Host: discuss.joelonsoftware.com
User-Agent: Vienna/2.6.0.2601
Accept: */*
Accept-Encoding: gzip
Accept-Language: en-us
Cookie: __utma=261409944.1875583.1351297139.1362842383.1362868129.78; __utmz=261409944.1358134504.43.4.utmcsr=joelonsoftware.com|utmccn=(referral)|utmcmd=referral|utmcct=/; fb_SessionId=qc48cvnjvacl3jeo76l8qv69emn119; DBID=LTOJIXRXTFAPXDGFBKCAYLVCILYFCA; fbToken=lqdf3avvfodabtfvd5c4drt18107B8; sUniqueID=20121026230417-66.117.217.10-slb5btkgb5; __utma=131697940.47826445.1351869116.1360335377.1361680499.5; __utmz=131697940.1361680499.5.2.utmccn=(referral)|utmcsr=statcounter.com|utmcct=/p8568424/exit_link_activity/|utmcmd=referral
Connection: keep-alive 
```

这个过滤器的期望输出是

```
10.0.1.3.52695  weblnb.fogcreek.com.http: { E....M@.@...
    T.........P-.....&.....
    2U......GET /default.asp?pg=pgRss&ixDiscussGroup=5 HTTP/1.1
    Host: discuss.joelonsoftware.com
    User-Agent: Vienna/2.6.0.2601
    Accept: */*
    Accept-Encoding: gzip
    Accept-Language: en-us
    Cookie: __utma=261409944.1875583.1351297139.1362842383.1362868129.78; __utmz=261409944.1358134504.43.4.utmcsr=joelonsoftware.com|utmccn=(referral)|utmcmd=referral|utmcct=/; fb_SessionId=qc48cvnjvacl3jeo76l8qv69emn119; DBID=LTOJIXRXTFAPXDGFBKCAYLVCILYFCA; fbToken=lqdf3avvfodabtfvd5c4drt18107B8; sUniqueID=20121026230417-66.117.217.10-slb5btkgb5; __utma=131697940.47826445.1351869116.1360335377.1361680499.5; __utmz=131697940.1361680499.5.2.utmccn=(referral)|utmcsr=statcounter.com|utmcct=/p8568424/exit_link_activity/|utmcmd=referral
    Connection: keep-alive} 
```

注意：这里的抽象级别不限于上面的单个具体示例。过滤后的输出的一般结构应如下所示：

```
$sourceip $targetip {$raw_packet_data/payload,_could_be_http_stream_or_just_plain_gibberish} 
```

有效载荷字段的结束分界应该是下一个数据包的开始，参见。$sourceip。

并且 awk 过滤器应该以这种方式捕获 tcpdump 输出流的每一行，而不仅仅是一行。

关于如何实现这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:47:17.273

以下将您的示例输入映射到所需的输出，它适用于整个流吗？

```
$ awk '/tcp [0-9]+/{printf "%s %s { ",$3,$5;getline;print $0;next}$1=="Connection:"{$2=$2"}"}{printf "\t%s\n",$0}' file
10.0.1.3.52695 weblnb.fogcreek.com.http: { E....M@.@...
    T.........P-.....&.....
    2U......GET /default.asp?pg=pgRss&ixDiscussGroup=5 HTTP/1.1
    Host: discuss.joelonsoftware.com
    User-Agent: Vienna/2.6.0.2601
    Accept: */*
    Accept-Encoding: gzip
    Accept-Language: en-us
    Cookie: __utma=261409944.1875583.1351297139.1362842383.1362868129.78; __utmz=261409944.1358134504.43.4.utmcsr=joelonsoftware.com|utmccn=(referral)|utmcmd=referral|utmcct=/; fb_SessionId=qc48cvnjvacl3jeo76l8qv69emn119; DBID=LTOJIXRXTFAPXDGFBKCAYLVCILYFCA; fbToken=lqdf3avvfodabtfvd5c4drt18107B8; sUniqueID=20121026230417-66.117.217.10-slb5btkgb5; __utma=131697940.47826445.1351869116.1360335377.1361680499.5; __utmz=131697940.1361680499.5.2.utmccn=(referral)|utmcsr=statcounter.com|utmcct=/p8568424/exit_link_activity/|utmcmd=referral
    Connection: keep-alive} 
```

# ios - 把 UIView 变成 UIImage

> ID：15324777
> 
> 赞同：0
> 
> 时间：2013-03-10T16:47:46.213
> 
> 标签：ios, objective-c, uiview, uiimageview

如何以编程方式将 UIView（将子视图作为 UIImageViews）转换为 UIImage？

这是一种常见的做法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T16:50:02.257

似乎您想要特定视图的“屏幕截图”？

```
UIGraphicsBeginImageContext(view.bounds.size); 
CGContextRef ctx = UIGraphicsGetCurrentContext();
[view.layer renderInContext:ctx];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-12T11:26:30.470

对于任何在 iOS 10+ 上寻找 Swift 4 答案的人

```
let renderer = UIGraphicsImageRenderer(bounds: view.bounds)
let image = renderer.image { rendererContext in
    view.layer.render(in: rendererContext.cgContext)
} 
```

# java - 使用java在内存中缓存大量数据

> ID：15324778
> 
> 赞同：0
> 
> 时间：2013-03-10T16:47:52.243
> 
> 标签：java, memory-management, spring-mvc

我正在开发基于 Web 的 Java 应用程序，处理大量库存项目，比如 400K-500K。当前解决方案的描述如下。

库存字段（最少 20 - 最多 30）

字段长度（从 1 - 255 不等）

字段类型（可变）

目前，我们在经过一些验证（与旧记录比较、创建版本等）后将库存存储在数据库中。库存数据每天更新多次，每次在新库存上运行相同的过程。

我们有将这些数据公开给多个第三方网站（消费者）的 API。这些网站每页进行 8-10 次 API 调用，如果网站上的流量很大，那么 API 就会变慢。

为了克服这个问题，我正在研究将这些数据存储在内存中并直接服务于请求的建议。我最初的估计在 8-20GB 之间。显然，当我将这些数据包装到 java 对象中时，它需要更多的内存。

任何建议/建议将不胜感激。

# makefile - makefile 和项目目录结构中的自动依赖关系

> ID：15324780
> 
> 赞同：2
> 
> 时间：2013-03-10T16:47:57.263
> 
> 标签：makefile, dependencies, directory-structure

我一直在尝试在我的 makefile 中使用自动依赖项，但我为使其工作付出了很多努力，因为我为我的项目使用了更复杂的结构，而不仅仅是将每个文件都放在根文件夹中。

我尝试在我的 makefile 中使用这段代码：

```
OBJECTS_DIR = obj/
SRCS_DIR = src/
#source files list, i.e : src/foo.cpp src/bar/foo2.cpp
SOURCES = $(shell find $(SRCS_DIR) -name \*.cpp | xargs -d '\n')
#object files list, i.e : obj/foo.o obj/foo2.o
OBJECTS = $(addprefix $(OBJECTS_DIR), $(notdir $(SOURCES:.cpp=.o)))
DEPS = $(OBJECTS_DIR)make.dep

myproject : $(OBJECTS)
    $(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^

$(OBJECTS) : $(SOURCES)
    $(CC) $(CFLAGS) $(LDFLAGS) -o $@ -c $(filter %/$(notdir $(@:.o=.cpp)), $(SOURCES))

$(DEPS): $(SOURCES)
    $(CC) -MM  $(SOURCES) > $(DEPS)

-include $(DEPS)

all : myproject

clean :
    @-rm -f $(RELEASE_DIR)* $(OBJECTS_DIR)* 
```

我想将所有依赖项存储在 obj/make.dep 文件中。这给了我以下输出（这里 foo 包括 foo2）：

```
foo2.o: src/bar/foo2.cpp src/bar/headers/foo2.h
foo.o: src/foo.cpp src/bar/headers/foo2.h 
```

我想重命名每个目标文件以获得以下输出： obj/foo2.o: src/bar/foo2.cpp src/bar/headers/foo2.h obj/foo.o: src/foo。 cpp src/bar/headers/foo2.h

我已经尝试使用 -MT 选项但没有结果......此外， -include $(DEPS) 是否足以包含我创建的依赖项？我不应该将 OBJECT 规则中的 $(filter %/$(notdir $(@:.o=.cpp)), $(SOURCES)) 替换为 make.dep 文件中写入的行吗？

提前感谢您的洞察力，请告诉我是否有任何其他方法可以增强我的 makefile ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:34:38.330

您将所有依赖项存储在 1 个文件中的原因是什么？按照惯例，每个目标文件都有自己的 .d 文件，该文件是在编译期间创建的，这就是你的 .d 文件`-include`。在这种情况下，将 -MT 标志等添加到与初始编译相同的命令中以获取正确的对象目录和名称要简单得多。

我会按照这个问题的答案做更多的事情：

[使用 -MM 生成包含指令和依赖项](https://stackoverflow.com/questions/2801532/make-include-directive-and-dependency-generation-with-mm)

好消息是所有依赖项的生成都将在编译步骤中发生，因此您不必对 gcc 进行额外的调用。对于一个小文件来说，将所有依赖项放在一个文件中可能是可以的，但是如果您希望您的 makefile 可以扩展，那么最好执行上述操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:31:25.520

您应该使用模式规则来生成`.o`文件。

```
$(OBJECTS_DIR)/%.o : %.c 
        $(CC) $(CFLAGS) -c -o $@ $^ 
```

您必须处理依赖文件以将 OBJECTS_DIR 添加到目标路径。 `sed`使这变得简单。您可能还希望它依赖于`.h`文件。

```
$(DEPS): $(SOURCES) $(shell find . -name '*.h')
        $(CC) -MM  $(SOURCES) | sed 's#^\(.*:\)#$(OBJECTS_DIR)\1#' > $(DEPS) 
```

# python - 在 python 中使用 unpack 读取不同格式的数据

> ID：15324781
> 
> 赞同：-1
> 
> 时间：2013-03-10T16:48:00.023
> 
> 标签：python

我对 python 很陌生，刚刚开始在某个地方工作。一直试图理解一个开发人员在这里编写的一段代码，他离开了，我一直无法弄清楚。

基本上，我熟悉 unpack() 的作用，但在某些地方使用的格式让我感到困惑！

`var1, var2, var3, var4 = struct.unpack('!6xBB4xI4xI', data)`

是 4 个变量的赋值语句。现在，这就是我对用于解包的格式的了解，我相信是正确的：-

'x'：值的分离（@shx2 在下面的答案中指出的填充位）

!6: 以 BIG-ENDIAN 格式从开头读取第 7 个字符（从索引 0 开始）

I：无符号整数

```
Now, I haven't been able to figure out the formats:-
BB4 - does that mean read 8 bytes (as the B stands for unsigned char, so BB could mean 2 sets of unsigned char)?
I4 - reading 4 bytes and getting the integer value! 
```

*我对其他 2 种格式的解释也很可能是不正确的——我只是想从 python 在线文档和调试期间看到的数据中找出答案。请在我可能错的地方纠正我。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:46:17.477

你很遥远......阅读[文档](http://docs.python.org/2/library/struct.html#struct-format-strings)。

`!`是网络顺序（= big-endian）。

`x`是填充字节。

我相信你可以弄清楚其余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:05:11.867

对于 Big Endian 格式的数据，`struct.unpack('!6xBB4xI4xI', data)`意味着：

`6`: 6 个填充字节
`B`: 一个无符号字符
`B`: 一个无符号字符 `4`: 填充字节
`I`: 一个无符号整数
`4`: 填充字节
`I`: 一个无符号整数

该结构总共有 24 个字节

# java - 从文本文件分隔符导入数据

> ID：15324784
> 
> 赞同：2
> 
> 时间：2013-03-10T16:48:13.970
> 
> 标签：java, delimiter

我对试图让我的程序从文本文件中读取有点困惑。文本文件包括：客户 ID、客户头衔、客户姓名缩写、客户姓氏、客户地址、客户城镇或城市、客户邮政编码、保单签发年份和保单编号。其余字段对应于策略编号所属的策略类型。为了分隔每个字段，我被建议使用 DELIMITER。

文本文件如下所示：

```
IC-x00042W/Ms/LQ/Bethea/205, Willis Road/Bolton/BO5 1DQ/2007/C02000007/10000/0.5/2008/B27100037/150000/0.3/2011/V30200319/2000/21/1/0#

IC-x00033D/Mr/R/Bowie/119, Thatcher Way/Glasgow/GL9 5SX/2008/L09000016/50000/45/2/2009/C74100008/8000/0.6/2012/B05300001/125000/0.5#

IC-x00013A/MS/GRV/Blackwell/209, Drunk Road/Hawick/HK8 1MY/2013/B09000009/225000/0.1/2011/C14100014/20000/0.1/2010/V63200304/12000/43/5/1# 
```

到目前为止，我有一些看起来像这样的东西：（有一个名为 Name 的类，其中包含所有客户个人详细信息，还有一个名为 address 的类，其中包含所有地址详细信息）：

* * *

```
 final String CLIENT_DELIMITER = "#";
    final String ITEM_DELIMITER = "/";

    Scanner fileScan = null;
    Scanner clientScan = null;

    /*
     * ********************************************************************
     * 
     * Opening the text file and reading from the text file. If the 
     * File cannot be read then an error is thrown
     * 
     * ********************************************************************
     */
    try {
        fileScan = new Scanner(inputFile);
    } catch (Exception e) {
        System.out.println(e);
    }

    //********************************************************************

    String nxtClient = null;

    //Define classes 
    ClientDetailsList clientInfo = null;
    Name clientNameDetails = null;
    Address clientFullAddress = null;
    PolicyList clientPolicies = null;
    ClientDetailsList clientDetails = null;

    ClientDetailsList clientCollection = new ClientDetailsList();

    fileScan.useDelimiter(ITEM_DELIMITER);

    /*
     * ******************************************************************
     * Scan for client details from the text file
     * ******************************************************************
     */

    while (fileScan.hasNext()) {

        // Input the data for the next Client
        nxtClient = fileScan.next().trim();
        clientScan = new Scanner(nxtClient);
        clientScan.useDelimiter(ITEM_DELIMITER);

        //Client Variables
        String clientID = null;
        clientScan.useDelimiter(ITEM_DELIMITER);
        String clientTitle = null;
        String clientInitials = null;
        String clientSurname = null;

        //Reads in details from name
        clientID = fileScan.next().trim();
        clientTitle = fileScan.next().trim();
        clientInitials = fileScan.next().trim();
        clientSurname = fileScan.next().trim();

        //Construct Name
        clientNameDetails = new Name(clientTitle, clientInitials, clientSurname);

        String clientAddress = null;
        String clientTownOrCity = null;
        String clientPostCode = null;
        String policyDetails = null;

        //Reads in details from address
        clientAddress = fileScan.next().trim();
        clientTownOrCity = fileScan.next().trim();
        clientPostCode = fileScan.next().trim();

        //Construct Address
        clientFullAddress = new Address(clientAddress, clientTownOrCity, clientPostCode); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:02:02.480

```
nxtClient = fileScan.next();
final String[] srcData = nxtClient.split("/");

if (srcData.length != 8){// 8? am i right?
    System.err.println("wrong data line " + nxtClient);
}

for (int i = 0; i < srcData.length; i++){
srcData[i] = srcData[i].trim();
}

 clientNameDetails = new Name(srcData[0], srcData[1], srcData[2]);
..... 
```

这个看起来比你的解决方案更简单

# java - 从 SQLite 数据库中删除数据时，应用程序需要在实际删除之前重新启动

> ID：15324790
> 
> 赞同：0
> 
> 时间：2013-03-10T16:48:49.497
> 
> 标签：java, android, sqlite

目前我正在尝试创建一个电话簿应用程序，当单击删除按钮时，将删除屏幕上显示的 SQLite 数据库中的条目。但是，当我单击删除按钮时，该方法运行，但数据保留在 sql 数据库表中，直到我重新启动正在使用的模拟器。重新启动时，数据表已自行更新，我的“下一个”和“上一个”按钮不会拾取先前删除的数据。

有人知道为什么吗？我会放一些相关的代码..

```
public void Deletedata (View view)
    {
        int dRow;
        dRow = Integer.parseInt((cursor.getString(0)));
        db.deleteRecord(dRow);      
        Toast.makeText(this, "Contact Deleted", Toast.LENGTH_LONG).show();
        Nextdata(view);             

    }

public void DisplayRecord(Cursor c)
    {

        EditText nameTxt = (EditText)findViewById(R.id.Name);
        EditText phoneTxt = (EditText)findViewById(R.id.Phone);
        EditText emailTxt = (EditText)findViewById(R.id.Email);

        if (c!= null)
        {
        nameTxt.setText(c.getString(1));
        phoneTxt.setText(c.getString(2));
        emailTxt.setText(c.getString(3));
        }

    }

    public void Nextdata (View view)
    {

        if (cursor.moveToNext())
        { 
            DisplayRecord(cursor);
        }
        else
        {
            Toast.makeText(this, "Last Entry in Phone Book", Toast.LENGTH_LONG).show();
            Previousdata(view);
        }

    }

    public void Previousdata (View view)
    {
        if (cursor.moveToPrevious())
        { 
            DisplayRecord(cursor);
        }
        else
        {
            Toast.makeText(this, "First Entry in Phone Book", Toast.LENGTH_LONG).show();
            Nextdata(view);
        } 
```

这段代码在我的 DBAdaptor 类中，

```
public boolean deleteRecord(long rowId)

    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;

    }

public Cursor getAllRecords() 

    {       
        Cursor gaRecords = db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME,
                        KEY_PHONENUMBER, KEY_EMAIL}, null, null, null, null, null);

        gaRecords.moveToFirst();

                    return gaRecords;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:01:42.430

您需要刷新光标。我对您的代码的最佳猜测是：

```
public void Deletedata (View view)
{
    int position = cursor.getPosition();

    int dRow;
    dRow = Integer.parseInt((cursor.getString(0)));
    db.deleteRecord(dRow);      
    Toast.makeText(this, "Contact Deleted", Toast.LENGTH_LONG).show();

    // Refresh the cursor
    cursor.close();
    cursor = db.getAllRecords();
    cursor.moveToPosition(position);

    Nextdata(view);             
} 
```

# objective-c - NSNumbers 改变

> ID：15324791
> 
> 赞同：0
> 
> 时间：2013-03-10T16:48:50.290
> 
> 标签：objective-c, core-data, nsnumber

我有一组 NSNumbers 我保存到核心数据实体中。

我已将他们的 NSNumber 属性设置为 Integer64。

在某些数字上，我得到了奇怪的结果，我想知道这是否是类型问题。

我有一个临时对象，我填充了在创建时提取到 Core-Data 类型对象中的数据。

例如`[cachableObject setValue:tempObject.number forKey:@"number"];`

我放置了两条日志语句，一条在上面，一条在这条线下面。

```
NSLog(@"tempObject.number is %@", tempObject.number);
[cachableObject setValue:tempObject.number forKey:@"number"];
NSLog(@"cachableObject.number is %@", cachableObject.number); 
```

这会记录以下两个错误事件（到目前为止）：

```
tempObject.number is 14047556750440521185
cachableObject.number is -4399187323269030431

tempObject.number is 12267813409388115511
cachableObject.number is -6178930664321436105 
```

是什么导致了这个问题？在其他数字上，数字不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:00:03.973

```
14047556750440521185 = 0xC2F2F26FF825DDE1 
```

大于`2^63 - 1`并超出有*符号*64 位整数的范围。您可以将其存储在*无符号*64 位整数中，但当解释为有*符号*数时，结果为`-4399187323269030431`.

Core Data 使用带符号的 64 位数字作为`Integer 64`属性，即使您为其分配一个无符号的 64 位数字，该值也会在内部存储为带符号的 64 位数字。

如果您知道该值是无符号数，则可以使用

```
unsigned long long x = [cachableObject.number unsignedLongLongValue]; 
```

再次将其转换为无符号值。

# wpf - WPF 中的可编辑序列

> ID：15324806
> 
> 赞同：2
> 
> 时间：2013-03-10T16:49:57.797
> 
> 标签：wpf, controls, sequence

我需要一个允许编辑一系列控件的控件。每个控件都有一个关联的值，可编辑序列的值将是这些值的序列。编辑序列是指添加新元素、删除现有元素和重新排序元素。

我编写了一个可编辑的序列控件，它显示了一个带有列表框、向上和向下箭头以及一个文本框的停靠面板。在文本框中输入文本并按回车键会添加一个具有该名称的新元素。按向上或向下箭头移动当前选定的元素。选择元素时按 DELETE 将删除它。

我想检查其他选项。是否有任何内置 WPF 控件提供此功能？我如何组合现有的控件来创建我需要的东西？是否有商业解决方案可以让我的生活更轻松？

**编辑**：例如，允许使用拖放重新排序元素会更加用户友好。实现这一目标的最简单方法是什么？

# winapi - 在父窗口上绘制带有图像的半透明子窗口

> ID：15324807
> 
> 赞同：3
> 
> 时间：2013-03-10T16:49:58.837
> 
> 标签：winapi, animation, transparency, layered-windows, ws-ex-layered

我需要在`WS_OVERLAPPED`窗口中制作鸟类动画（如下图）。动画由 8 个图像表示：

![动画片](../Images/2394a74b60c4c1a60008ae2a9ff38a17.png)

图像中的蓝色（即`RGB(0, 255, 255)`）必须是透明的（请参见下面的屏幕截图）。

我想使用`CreateWindowEx()`（鸟将由分层窗口表示）和`WS_EX_LAYERED`参数来做到这一点。不幸的是鸟必须是`WS_CHILD`。在**Windows 7**中混合`WS_EX_LAYERED | WS_CHILD` [是不合法](http://msdn.microsoft.com/en-us/library/windows/desktop/ff700543%28v=vs.85%29.aspx)的：

 **> **Windows 8：****顶级**窗口和子窗口支持 WS_EX_LAYERED 样式 。以前的 Windows 版本仅支持顶级窗口的**WS_EX_LAYERED 。**

最终效果应该是这样的（我已经画了窗口的背景——唯一的问题是鸟）：

![在此处输入图像描述](../Images/b27efa820fe4be6a06f5ddcaad7d7484.png)

我怎样才能达到这个效果？如何在父窗口中为鸟设置动画？
如果您有任何想法如何实现具有透明背景颜色的鸟类动画，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:56:33.470

由于即使没有与窗口交互，动画也会完成，我们需要一个计时器：

```
case WM_CREATE:
    // load resources
    SetTimer(hwnd, 0, 250, NULL); // set timer to 250 ms
return 0;

...

case WM_DESTROY:
    KillTimer(hwnd, 0);
    // release the resources
return 0; 
```

我们可以在每个计时器滴答声中使整个窗口无效，但最好只重绘需要的部分。我们还将在此处更新当前帧号：

```
case WM_TIMER:
    frame_number++;
    if (frame_number >= 8)
        frame_number = 0;

    RECT rc = { 30, 30, 80, 80 }; // a rectangle from (30,30) to (80,80)
    InvalidateRect(hwnd, &rc, FALSE);
return 0; 
```

然后，我们在处理程序中绘制当前帧`WM_PAINT`：

```
case WM_PAINT:
    // draw the sky

    SelectObject(hDCMem, hBird);
    TransparentBlt(hDC, 30, 30, 50, 50, hDCMem, frame_number * 51, 0, 50, 50, RGB(0, 255, 255)); // 51 is 50 (side of a bird frame) + 1 (gap between the frames)

    // draw the rest
return 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T22:35:07.907

我终于知道该怎么做了。这很棘手。

该解决方案的完整描述可在此处获取 - [winprog.org/tutorial/transparency.html](http://www.winprog.org/tutorial/transparency.html)。
对于波兰语读者来说，这里[的翻译很棒](http://cpp0x.pl/kursy/Kurs-WinAPI-C++/Podstawy/Bitmapy/182)。

简单的想法：

> **使位图具有透明部分的外观非常简单，除了我们希望看起来透明的彩色图像**外，还涉及使用黑白蒙版图像。
> 
> 要使效果正常工作，需要满足以下条件： 首先，彩色图像在我们要显示为透明的所有区域中都必须是黑色的。其次，**蒙版图像在我们想要透明的区域必须是白色的**，而在其他地方是黑色的。在本页的示例图片中，颜色和蒙版图像显示为最左侧的两个图像。

简单的解决方案：

```
#define TRANSPARENCY_COLOR RGB(0, 255, 255)

birdBmp = (HBITMAP) LoadBitmap(hInstance, MAKEINTRESOURCE(IDB_BITMAP1));
hbmpMask = CreateBitmapMask(birdBmp, TRANSPARENCY_COLOR); 
```

绘画：

```
case WM_PAINT:
{
    hdc = BeginPaint(hWnd, &ps);

    HDC birdMaskHdc = CreateCompatibleDC(hdc);

    BITMAP bmInfo;
    GetObject(birdBmp, sizeof(bmInfo), &bmInfo);

    HBITMAP hbmpOld = (HBITMAP) SelectObject(birdMaskHdc, hbmpMask);

    BitBlt(hdc, 0, 0, bmInfo.bmWidth, bmInfo.bmHeight, birdMaskHdc, 0, 0, SRCAND);
    SelectObject(birdMaskHdc, birdBmp);
    BitBlt(hdc, 0, 0, bmInfo.bmWidth, bmInfo.bmHeight, birdMaskHdc, 0, 0, SRCPAINT);

    SelectObject(birdMaskHdc, hbmpOld);
    DeleteDC(birdMaskHdc);

    EndPaint(hWnd, &ps);
    break;
} 
```

打扫：

```
case WM_DESTROY:
{
    DeleteObject(hbmpMask);
    DeleteObject(birdBmp);
    PostQuitMessage(0);
    break;
} 
```

负责创建位图掩码的函数：

```
HBITMAP CreateBitmapMask(HBITMAP hbmColour, COLORREF crTransparent)
{
    HDC hdcMem, hdcMem2;
    HBITMAP hbmMask, hbmOld, hbmOld2;
    BITMAP bm;

    GetObject( hbmColour, sizeof( BITMAP ), & bm );
    hbmMask = CreateBitmap( bm.bmWidth, bm.bmHeight, 1, 1, NULL );

    hdcMem = CreateCompatibleDC( NULL );
    hdcMem2 = CreateCompatibleDC( NULL );

    hbmOld =( HBITMAP ) SelectObject( hdcMem, hbmColour );
    hbmOld2 =( HBITMAP ) SelectObject( hdcMem2, hbmMask );

    SetBkColor( hdcMem, crTransparent );

    BitBlt( hdcMem2, 0, 0, bm.bmWidth, bm.bmHeight, hdcMem, 0, 0, SRCCOPY );
    BitBlt( hdcMem, 0, 0, bm.bmWidth, bm.bmHeight, hdcMem2, 0, 0, SRCINVERT );

    SelectObject( hdcMem, hbmOld );
    SelectObject( hdcMem2, hbmOld2 );
    DeleteDC( hdcMem );
    DeleteDC( hdcMem2 );

    return hbmMask;
 } 
```**

# c++ - MapReduce - 直接插入向量的第一个位置 在地图中

> ID：15324808
> 
> 赞同：0
> 
> 时间：2013-03-10T16:50:00.997
> 
> 标签：c++, map, vector, mapreduce, word-count

目前我正在写一个 WordCounter (MapReduce)。

我对 reduce 函数的实现如下所示：

```
void WordCounter::Reduce(string intermediateWord, vector<int> intermediateLineNr) {
    resultMap.insert(pair<string, vector<int> >(intermediateWord, intermediateLineNr));
    vector<int>& resultLineNr = resultMap[intermediateWord];
    resultLineNr.clear();
    resultLineNr.push_back(intermediateLineNr.size());
} // WordCounter::Reduce 
```

我还使用了一个 resultMap，它是一个带有字符串和矢量数据组件的地图：

```
map<string, vector<int> > WordMap; 
```

我使用了一个 intermediateMap 变量，它包含每个单词和它出现的行号。现在我想将每个单词添加到 resultMap 但我想在向量的第一个位置添加单词的数量而不是行号。

现在我复制整个 middleLineNr 向量，清除它并在第一个位置插入单词数。

是否有可能直接插入特定向量的第一个位置？

我认为应该有一个更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:56:23.850

我可能不明白你的要求，但你发布的代码相当于：

```
void WordCounter::Reduce(string intermediateWord, vector<int> intermediateLineNr) 
{
    resultMap[intermediateWord] = vector<int>( 1, intermediateLineNr.size() );
} // WordCounter::Reduce 
```

请注意，您是`vector<int> intermediateLineNr`按值传递的，因此将在调用期间生成向量的副本。将其替换为`vector<int> const& intermediateLineNr`; 它也可以。

# jquery - 通过href加载不同的jQuery代码？

> ID：15324811
> 
> 赞同：1
> 
> 时间：2013-03-10T16:50:17.403
> 
> 标签：jquery, parameter-passing, href

我有一个像这样的菜单：

```
<a href="http://www.something.it/project/">TYPE 1</a>
<a href="http://www.something.it/project/">TYPE 2</a>
... 
```

我需要在加载项目页面时加载这个 jQuery：

```
$('ul#filters li').each(function() {
    if(!$(this).hasClass('TYPE N')) {
    $(this).fadeOut('normal').addClass('hidden');
} else {
    $(this).fadeIn('slow').removeClass('hidden');
    }}); 
```

href 必须通过 TYPE。如果我单击“Type 1”的链接，在项目页面加载后我需要加载：

```
$('ul#filters li').each(function() {
    if(!$(this).hasClass('Type 1')) {
    $(this).fadeOut('normal').addClass('hidden');
} else {
    $(this).fadeIn('slow').removeClass('hidden');
    }}); 
```

我怎样才能做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:52:44.377

替换您的以下行：

```
if(!$(this).hasClass('TYPE 1')) { 
```

对于这个：

```
if( $(this).find('a').text() != 'TYPE 1') { 
```

与元素的文本内容进行比较，这应该可以满足您的要求`<a>`。

# html - 我的代码在不同的浏览器中不起作用

> ID：15324817
> 
> 赞同：1
> 
> 时间：2013-03-10T16:50:45.747
> 
> 标签：html, css, cross-browser

我正在创建幻灯片。这对我来说非常有用，但我有一个问题。我的内容在 Firefox 12 中正确显示，但在 Google Chrome 和 Internet Explorer 6 和 7 中显示不正确。我试图修复它很长时间，但没有运气。

我的预期输出应该是这样的：

![预期产出](../Images/0fb1f18a18ac1ba8f98d27500f288784.png)

这是我的 CSS：

```
.container{
  width:290px;
  //height:440px;
  margin:0 auto;
  position:relative;
  //padding-bottom:30px;
  overflow:hidden;
}

.slide1, .slide2, .slide3 {
    overflow: hidden;
    height: 440px;
    //border: 1px solid red;
}

.slide1 blockquote, 
.slide2 blockquote,  
.slide3 blockquote {
  margin:0;
  padding: 30px 30px;
  height: 250px;
  color:white;
  box-shadow: 0 5px 2px rgba(0,0,0,0.1);
  position:relative;
  display: block;
  transition: background-color 0.6s linear;
}

blockquote:after { 
  content: " "; 
  height: 0; 
  width: 0; 
  position: absolute; 
  top: 100%; 
  border: solid transparent; 
  border-top-color: #DA532B;
  border-left-color:#DA532B;
  border-width: 10px; 
  left: 10%; 
} 

.slide1 blockquote { 
  background-color: #DB532B;
}

.slide2 blockquote { 
  background-color: purple;
}

.slide3 blockquote { 
  background-color: #54885F;
}

.leftquotes{
  position:absolute;
  color:rgba(255,255,255,0.5);
  font-size:5em;
  top:-18px;
  left:5px;
}

.rightquotes{
  position:absolute;
  color:rgba(255,255,255,0.5);
  font-size:5em;
  bottom:-10px;
  right:5px;
}

img{
  float:left;
  margin-right: 20px;
}

.slide1bottom {
    height: 10px;
    width: 90px;
    background: #DB532B;
    position: absolute; 
    left: 0;
    bottom: 2px;
    cursor: pointer;
}

.slide2bottom {
    height: 10px;
    width: 90px;
    background: purple;
    position: absolute; 
    left: 100px;
    bottom: 2px;
    cursor: pointer;
}

.slide3bottom {
    height: 10px;
    width: 90px;
    background: #54885F;
    position: absolute; 
    left: 200px;
    bottom: 2px;
    cursor: pointer;
}

.image-name-container {
    height:110px;
     //margin: -15px 0 0 0;
}
.notactive {
    height: 10px;
    width: 90px;
    background: #fff;
    cursor: pointer;
    display: inline-block;
     margin: 0 6px 0 0;
} 
```

这是[到目前为止的所有代码](http://jsfiddle.net/qNXHf/3/)

**编辑：**

看来，这个 css 代码不适用于 google chrome 和 IE 6,7

```
.slide1 blockquote, 
.slide2 blockquote,  
.slide3 blockquote {
  margin:0;
  padding: 30px 30px;
  height: 250px;
  color:white;
  box-shadow: 0 5px 2px rgba(0,0,0,0.1);
  position:relative;
  display: block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:58:01.233

`.slide`您已将元素的高度设置为`440px`，而它们只需要`380px`，并且您正在使用`bottom:2px`etc.`.slide1bottom`元素，因此它们一直移动到容器的底部（440-2px）。

将其设置为 380px 可以解决 chrome 中的问题。我现在没有时间看 IE。

```
.slide1, .slide2, .slide3 {
    overflow: hidden;
    height: 380px;
    //border: 1px solid red;
} 
```

[http://jsfiddle.net/qNXHf/7/](http://jsfiddle.net/qNXHf/7/)

或者，如果要保持原始高度，可以将`.blockquote`元素设置为`height:310px`而不是`250px`.

# database - 搜索给定半径内的酒店以获取相应对象的位置（Gem Geocoder）

> ID：15324821
> 
> 赞同：4
> 
> 时间：2013-03-10T16:51:13.757
> 
> 标签：database, ruby-on-rails-3, postgresql, geolocation

我有 3 张桌子：`Objects`, `Locations`, `Hotels`.

每个对象有几个位置，每个位置有几个酒店（默认在 20 英里半径范围内）。

我的模型（稍微简化一下以专注于主要内容）

**对象.rb**

```
attr_accessible :name

has_many :locations
has_many :hotels 
```

**位置.rb**

```
attr_accessible :name, :address, :longitude, :latitude

has_many :objects
has_many :hotels 
```

**酒店.rb**

```
attr_accessible :name, :address, :longitude, :latitude

has_many :objects
has_many :locations 
```

我想创建一个搜索表单，用户可以在其中输入 Object's **name**和**search radius**。

输出应该是所有酒店的列表，这些酒店位于距离每个位置中心的给定半径（小于或等于 20 英里）内，对应于对象。

我想使用[Geocoder 的](https://github.com/alexreisner/geocoder)gem 方法`near`，但我不确定如何构建此类任务的控制器层。

![在此处输入图像描述](../Images/8f30ae4643cde13c90ec1d4b3654184d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:06:13.997

您希望数据库中的空间查询引擎来执行这些查询，例如 MongoDB 或 PostGIS（在 Postgres 中）。我认为您正在寻找的答案会因您使用的答案而异。我将 PostGIS 用于这些东西并且非常喜欢它。

也就是说，Geocoder 可以在没有空间查询引擎的情况下在内部为其提供动力，尽管它的效率不会那么高。如果你变得非常大，它会停止运转。如果您查看来源：[https ://github.com/alexreisner/geocoder/blob/master/lib/geocoder/stores/active_record.rb](https://github.com/alexreisner/geocoder/blob/master/lib/geocoder/stores/active_record.rb)

```
# skeleton for the controller method
obj = Object.find(name)
locations = obj.locations
near_hotels = locations.map do |loc| 
  locations.hotels.near([loc.latitude, loc.longitude])
end 
```

不确定 near 方法是否正确采用了 radius 参数，但是您可以通过基本上复制它来轻松编写自己的方法：

```
# on the hotel class
def nearby(lat, lon, radius)
    options = self.send(:near_scope_options, lat, lon, radius, {})
    select(options[:select]).where(options[:conditions]).
      order(options[:order])
} 
```

我强烈建议您查看 PostGIS。

请注意，我的示例方法会产生关系。您可以通过将范围限定为与您的对象匹配的酒店来缩小选择范围。

# python - 正确实现 Python 多处理

> ID：15324822
> 
> 赞同：4
> 
> 时间：2013-03-10T16:51:15.607
> 
> 标签：python, python-2.7, multiprocessing

我正在阅读这里的多处理教程：http: [//pymotw.com/2/multiprocessing/basics.html](http://pymotw.com/2/multiprocessing/basics.html)

我写了下面的脚本作为练习。该脚本似乎正在运行，我确实看到在 taskmgr 中运行了 5 个新的 python 进程。但是，我的打印语句输出了多次搜索的同一个文件夹。

我怀疑我不是在不同进程之间拆分工作，而是给每个进程整个工作负载。我很确定我做错了什么并且效率低下。有人可以指出我的错误吗？

到目前为止我所拥有的：

```
def email_finder(msg_id):
    for folder in os.listdir(sample_path):
        print "Searching through folder: ", folder
        folder_path = sample_path + '\\' + folder
        for file in os.listdir(os.listdir(folder_path)):
            if file.endswith('.eml'):
                file_path = folder_path + '\\' + file
                email_obj = email.message_from_file(open(file_path))
                if msg_id in email_obj.as_string().lower()
                    shutil.copy(file_path, tmp_path + '\\' + file)
                    return 'Found: ', file_path
    else:
        return 'Not Found!'

def worker():
    msg_ids = cur.execute("select msg_id from my_table").fetchall()
    for i in msg_ids:
        msg_id = i[0].encode('ascii')
        if msg_id != '':
            email_finder(msg_id)
    return

if __name__ == '__main__':
    jobs = []
    for i in range(5):
        p = multiprocessing.Process(target=worker)
        jobs.append(p)
        p.start() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T16:54:44.580

您的每个子流程都有自己的光标，因此会遍历整个 ID 集。

您需要`msg_ids`从数据库中读取一次，然后将其生成到子进程，而不是让每个子进程自行查询。

# complexity-theory - 平面图中的边添加复杂度？

> ID：15324823
> 
> 赞同：1
> 
> 时间：2013-03-10T16:51:18.770
> 
> 标签：complexity-theory, graph-theory, planar-graph

我创建了一个在顶点之间添加边的程序。目标是在不交叉的情况下添加尽可能多的边（即平面图）。复杂性是什么？

尝试：由于我使用深度优先搜索，我认为它是 O(n+m)，其中 n 是节点，m 是边缘。

此外，如果我们将边数绘制为 n 的函数，它会是什么样子？

（*我重新发布这个问题，因为上次没有人回答*）

# c# - 阅读 -> 使用 -> 更新

> ID：15324828
> 
> 赞同：2
> 
> 时间：2013-03-10T16:51:59.880
> 
> 标签：c#, entity-framework, .net-4.0

我正在使用生产者 - 许多消费者模式。

数据库已经有记录。

1.  生产者读取记录并将它们放入线程安全队列。
2.  消费者线程一一处理记录并向其添加更多数据。
3.  现在生产者必须用消费者提供的新数据更新数据库中的记录。

我是 Entity Framework 的新手，不知道使用什么方法来正确更新这些记录。

我读过我可以从数据库中选择一个记录列表，直接将字段编辑到它，然后简单地调用`SaveChanges`上下文对象。但我怀疑一些消费者会在编辑列表中的一些属性的过程中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:05:32.193

尝试这个。第一个示例显示如何更新单个记录，第二个示例显示如何使用记录列表进行更新。您可以从列表中的任何对象中添加或删除所需的数据，只要它们属于您的数据模型中的类型。然后调用您的数据库上下文并遍历列表中的每个对象。使用 SaveChanges() 更新数据库。

```
 public List<Customer> MyCustomers { get; set; }

    public void GetCustomers()
    {
        using(var context = new SalesContext())
        {
            var customers = from b in context.Customers
                            select b;

            MyCustomers = customers.ToList<Customer>();
        }
    }

    public void MethodThatChangesCustomers()
    {

    }

    public void UpdateDatabase()
    {
        using(var context = new SalesContext())
        {
            foreach (var person in MyCustomers)
            {
                context.Customers.Add(person);
            }
            context.SaveChanges();
        }
    } 
```

# python - Python pytz：timezone("xxx") 给出“解包需要长度为 44 的字符串参数”

> ID：15324833
> 
> 赞同：1
> 
> 时间：2013-03-10T16:52:16.027
> 
> 标签：python, pytz

当我尝试使用 pytz 创建一些时区时，出现错误“struct.error: unpack requires a string argument of length 44”。对于其他人来说，它工作正常。

前两个效果很好。后两个给出错误：

```
import pytz
from pytz import timezone

tz_dk = timezone("Europe/Copenhagen") 
tz_cn =  timezone("Atlantic/Canary")

tz_us = timezone("US/Eastern")
tx_lo = timezone("Europe/London") 
```

我打印了所有时区的列表，所有四个都在那里。

```
for tz in pytz.all_timezones:
    print tz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:09:57.650

我重新安装了 pytz，现在它可以工作了。奇怪的。

用它测试过

```
for value in pytz.all_timezones:
     try:
        t =  timezone(value)
    except:
        print "FAIL", value 
```

没有失败。

# python - 应用引擎：过滤列表中的值返回空列表

> ID：15324834
> 
> 赞同：2
> 
> 时间：2013-03-10T16:52:29.770
> 
> 标签：python, google-app-engine

我究竟做错了什么？？

```
from google.appengine.ext import db

class Owner(db.Model):
    things = db.ListProperty(db.Key)

class Thing(db.Model):
    pass

t1 = Thing(key_name='thing1')
t2 = Thing(key_name='thing2')
t1.put()
t2.put()

o = Owner(key_name='me')
o.things = [t1.key(), t2.key()]
o.put()

result = Owner.all().filter('things=',t1).fetch(10)
print result  # returns empty list!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:57:17.193

第一个过滤器参数中的属性名称和运算符之间必须有一个空格。

坏的：

```
Owner.all().filter('things=',t1) 
```

好的：

```
Owner.all().filter('things =',t1) 
```

# antlr4 - 如何获得有关 antlr4-maven-plugin 的帮助

> ID：15324837
> 
> 赞同：15
> 
> 时间：2013-03-10T16:52:42.170
> 
> 标签：antlr4

Antlr4-maven-plugin 似乎不在 Antlr4 网站上的文档中。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-03T19:31:02.787

那可能什么也得不到，就像我一样。试试这个：

```
mvn org.antlr:antlr4-maven-plugin:help -Ddetail=true 
```

产生：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- antlr4-maven-plugin:4.0:help (default-cli) @ standalone-pom ---
[INFO] ANTLR 4 Maven plugin 4.0
Maven plugin for ANTLR 4 grammars

This plugin has 2 goals:

antlr4:antlr4
Parses ANTLR 4 grammar files *.g4 and transforms them into Java source files.

Available parameters:

arguments
  A list of additional command line arguments to pass to the ANTLR tool.

atn
  If set to true then the ANTLR tool will generate a description of the ATN
  for each rule in Dot format.

encoding
  specify grammar file encoding; e.g., euc-jp

excludes
  A set of Ant-like exclusion patterns used to prevent certain files from
  being processed. By default, this set is empty such that no files are
  excluded.

forceATN
  Use the ATN simulator for all predictions.

includes
  Provides an explicit list of all the grammars that should be included in
  the generate phase of the plugin. Note that the plugin is smart enough to
  realize that imported grammars should be included but not acted upon
  directly by the ANTLR Tool. A set of Ant-like inclusion patterns used to
  select files from the source directory for processing. By default, the
  pattern **/*.g4 is used to select grammar files.

libDirectory
  Specify location of imported grammars and tokens files.

listener
  Generate parse tree listener interface and base class.

options
  A list of grammar options to explicitly specify to the tool. These options
  are passed to the tool using the -D<option>=<value> syntax.

outputDirectory
  Specify output directory where the Java files are generated.

sourceDirectory
  The directory where the ANTLR grammar files (*.g4) are located.

treatWarningsAsErrors
  Treat warnings as errors.

visitor
  Generate parse tree visitor interface and base class.

antlr4:help
Display help information on antlr4-maven-plugin.
Call mvn antlr4:help -Ddetail=true -Dgoal=<goal-name> to display parameter
details.

Available parameters:

detail
  If true, display all settable properties for each goal.

goal
  The name of the goal for which to show help. If unspecified, all goals
  will be displayed.

indentSize
  The number of spaces per indentation level, should be positive.

lineLength
  The maximum length of a display line, should be positive.

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.635s
[INFO] Finished at: Wed Jul 03 14:52:12 EDT 2013
[INFO] Final Memory: 3M/81M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-08T10:08:39.020

现在有两个链接可以提供帮助：

*   [（对于 Maven 用户）ANTLR4 Maven 项目设置](https://groups.google.com/forum/#!msg/antlr-discussion/Vw4Ia__sgPk/nDS5Y9YSDGIJ)
*   [（对于 Eclipse 用户）如何使用 ANTLR4 和 Maven 自动生成 lexer+parser？](https://stackoverflow.com/questions/14926060/how-to-automatically-generate-lexerparser-with-antlr4-and-maven)

我们正在努力使 Maven 站点文档在线托管。

* * *

我将语法放在与 Java 文件相同的文件夹中（在我希望生成的代码出现的包中）。

由于我在顶层声明了我的源目录，如下所示：

```
<build>
  <sourceDirectory>src</sourceDirectory>
</build> 
```

我会为 ANTLR 4 Maven 插件使用以下配置：

```
<plugin>
    <groupId>org.antlr</groupId>
    <artifactId>antlr4-maven-plugin</artifactId>
    <version>4.0</version>
    <configuration>
        <sourceDirectory>${basedir}/src</sourceDirectory>
    </configuration>
    <executions>
        <execution>
            <goals>
                <goal>antlr4</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-10T16:52:42.170

antlr4-maven-plugin 有一个帮助目标，可以使用 maven 执行，如下所示：

```
mvn antlr4:help -Ddetail=true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-14T16:40:26.830

帮助是有限的，但是（除了这个问题的其他答案）我发现以下地方很有用：

*   [GitHub abntlr4-maven-plugin 文档站点](https://github.com/antlr/antlr4/tree/master/antlr4-maven-plugin/src/site/apt)（似乎是权威文档并包含示例）
*   [ANTLR4 Wiki - Java IDE Integration](http://www.antlr.org/wiki/display/ANTLR4/Java+IDE+Integration)（底部的 mvn 部分有一些基本信息）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-16T07:05:41.697

您还可以查看[以下博客](https://blog.sourceclear.com/useful-maven-plugins-for-working-with-ANTLR-4-grammars/)，该博客描述了用于生成和测试 ANTLR 4 语法的两个插件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-31T16:58:05.533

看起来 maven 插件站点现已发布：

[http://www.antlr.org/api/maven-plugin/latest/index.html](http://www.antlr.org/api/maven-plugin/latest/index.html)

# emacs - 如何在emacs双列模式下用换行符填充第一列长度的第二列？

> ID：15324842
> 
> 赞同：2
> 
> 时间：2013-03-10T16:52:57.163
> 
> 标签：emacs, automation, newline, two-columns

我在两列模式下使用 emacs 来“边缘代码”一些注释，基本上每行添加关键字。我打开带有注释的文本文件；我跳到第 72 列并插入一个“|”；我将标记设置在其右侧，并将“Cx 6 s”分成两列。然后'Cx o' 到达 2C 缓冲区。

但是这个新的 2C 缓冲区只有一行长，这使我无法滚动超出输入文本和换行符的位置以使其更长。

我怎样才能快速地，甚至可能是自动地，在第一列（原始文本文件）缓冲区中的每一行用一个换行符填充这个 2C 缓冲区，以便我可以一次滚动两个缓冲区一个屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:37:44.847

这些是我最终制作的功能。出于某种原因，从函数中调用 2C-split 会导致错误，因此我制作了一个键盘宏来运行 2C-set-separator、2C-split 和 2C-insert-newlines。

```
(defun 2C-set-separator ()
       "Insert a separator at column 72."
       (interactive)
       (move-to-column '72 t)
       (insert "|")
)

(defun 2C-insert-newlines ()
  "Inserts newlines in the 2C buffer."
  (interactive)
  (setq first-buffer-lines (line-number-at-pos (point-max)))
  (other-window 1)
  (while (< (line-number-at-pos) first-buffer-lines)
   (insert "\n")
   (forward-line))
 (beginning-of-buffer)
) 
```

# javascript - 使用 jQuery UI 在可排序的树形菜单之间拖放

> ID：15324844
> 
> 赞同：1
> 
> 时间：2013-03-10T16:53:06.853
> 
> 标签：javascript, jquery, html, jquery-ui, css

我正在尝试制作一个排序界面，其中有两种不同类型的组。每种类型可以有无限数量的组，每个组可以有无限数量的项目。无论哪种类型，您都应该能够在所有组之间移动项目。

我已经设置了界面，以便组显示为完全用 CSS 制作的树形菜单，如下所示：[http ://www.thecssninja.com/css/css-tree-menu](http://www.thecssninja.com/css/css-tree-menu)

当我将一个项目拖到其容器外时，它会消失在另一个容器后面。我尝试在 jQuery 中使用 helper: "clone" 选项，并尝试在项目上设置更高的 z-index，但它不起作用。

此外，每当我抓住并放下一个项目时，即使它位于其原始位置，然后折叠该组，丢弃的项目也会出现在组名称的顶部。我猜它不再被正确地识别为该组的孩子或类似的东西。
如果您将项目放在折叠的组中，也会发生同样的情况。

有没有人可以解决这些问题？

[http://jsfiddle.net/Kantana/ya63V/8/](http://jsfiddle.net/Kantana/ya63V/8/)
长长的代码列表如下。

Javascript（仅适用于单个组类型）：

```
$(document).ready(function () {
    $('.sortable').sortable({
        connectWith: $('.sortable'),
        helper: "clone"
    }).disableSelection();
}); 
```

HTML：

```
<div class="groupbox" id="groupbox_reports">
    <div class="groupbox_heading">Groups</div>
    <div class="groupbox_wrapper">
        <ol class="tree">
            <li class="group">
                <label for="group1">Group 1: 2013-03-09</label>
                <input type="checkbox" id="group1" />
                <ol class="sortable">
                    <li class="file" id="item_1"><a href="">Report 1</a>
                    </li>
                    <li class="file" id="item_3"><a href="">Report 3</a>
                    </li>
                    <li class="file" id="item_6"><a href="">Report 6</a>
                    </li>
                </ol>
            </li>
            <li class="group">
                <label for="group2">Group 2: 2013-03-10</label>
                <input type="checkbox" id="group2" />
                <ol class="sortable">
                    <li class="file" id="item_2"><a href="">Report 2</a>
                    </li>
                    <li class="file" id="item_5"><a href="">Report 5</a>
                    </li>
                    <li class="file" id="item_7"><a href="">Report 7</a>
                    </li>
                </ol>
            </li>
            <li class="group">
                <label for="group3">Group 3: 2013-03-11</label>
                <input type="checkbox" id="group3" />
                <ol class="sortable">
                    <li class="file" id="item_8"><a href="">Report 8</a>
                    </li>
                    <li class="file" id="item_9"><a href="">Report 9</a>
                    </li>
                    <li class="file" id="item_10"><a href="">Report 10</a>
                    </li>
                </ol>
            </li>
        </ol>
    </div>
    <div class="groupbox_menu">&nbsp;</div>
</div>
<div class="groupbox" id="groupbox_incidents">
    <div class="groupbox_heading">Incidents</div>
    <div class="groupbox_wrapper">
        <ol class="tree">
            <li class="group">
                <label for="incident1">Incident 1: 2013-03-12</label>
                <input type="checkbox" id="incident1" />
                <ol class="sortable">
                    <li class="file" id="item_11"><a href="">Report 11</a>
                    </li>
                    <li class="file" id="item_12"><a href="">Report 12</a>
                    </li>
                    <li class="file" id="item_13"><a href="">Report 13</a>
                    </li>
                </ol>
            </li>
            <li class="group">
                <label for="incident2">Incident 2: 2013-03-13</label>
                <input type="checkbox" id="incident2" />
                <ol class="sortable">
                    <li class="file" id="item_14"><a href="">Report 14</a>
                    </li>
                    <li class="file" id="item_15"><a href="">Report 15</a>
                    </li>
                    <li class="file" id="item_16"><a href="">Report 16</a>
                    </li>
                </ol>
            </li>
            <li class="group">
                <label for="incident3">Incident 3: 2013-03-14</label>
                <input type="checkbox" id="incident3" />
                <ol class="sortable">
                    <li class="file" id="item_17"><a href="">Report 17</a>
                    </li>
                    <li class="file" id="item_18"><a href="">Report 18</a>
                    </li>
                    <li class="file" id="item_19"><a href="">Report 19</a>
                    </li>
                </ol>
            </li>
        </ol>
    </div>
    <div class="groupbox_menu">&nbsp;</div>
</div> 
```

CSS：

```
/* CSS Tree menu styles */
 ol.tree {
    padding: 0;
    width: 100%;
    margin-top: 4px;
}
li {
    position: relative;
    list-style: none;
    margin-bottom: 2px;
    padding: 3px;
}
li.group {
    border: 1px dashed;
}
li.file {
    margin-left: -1px !important;
}
li.file a {
    background: url(../img/document.png) 0 0 no-repeat;
    color: #000000;
    padding-left: 21px;
    text-decoration: none;
    display: block;
}
li input {
    position: absolute;
    left: 0;
    margin-left: 0;
    opacity: 0;
    z-index: 2;
    cursor: pointer;
    height: 1em;
    width: 1em;
    top: 0;
}
li input + ol {
    background: url(../img/toggle-small-expand.png) 40px 0 no-repeat;
    margin: -18px 0 0 -23px;
    /* 15px */
    height: 1em;
}
li input + ol > li {
    display: none;
    margin-left: -14px !important;
    padding-left: 1px;
}
li label {
    cursor: pointer;
    padding-left: 37px;
}
li input:checked + ol {
    background: url(../img/toggle-small.png) 40px 5px no-repeat;
    margin: -23px 0 0 -23px;
    /* 20px */
    padding: 1.563em 0 0 80px;
    height: auto;
}
li input:checked + ol > li {
    display: block;
    margin: 0 0 0.125em;
    /* 2px */
}
li input:checked + ol > li:last-child {
    margin: 0 0 0.063em;
    /* 1px */
}
/** group box **/
 #groupbox {
    margin: 50px auto 0;
}
.groupbox {
    position: relative;
    display: inline;
    float: left;
    height: 500px;
    overflow-y: auto;
}
.groupbox_wrapper {
    padding: 10px;
    overflow: hidden;
}
.groupbox_heading {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -ms-box-sizing: border-box;
    position: relative;
    top: 0;
    width: 100%;
    border-bottom: 2px solid #939393;
    padding: 10px;
    font-weight: bold;
}
#groupbox_reports {
    width: 25%;
    border-left: 2px solid #939393;
    border-top: 2px solid #939393;
    border-right: 2px solid #939393;
}
#groupbox_incidents {
    width: 25%;
    border-top: 2px solid #939393;
    border-right: 2px solid #939393;
}
#groupbox_details {
    width: 49%;
    border-top: 2px solid #939393;
    border-right: 2px solid #939393;
}
.groupbox_menu {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 30px;
    background-color: #939393;
} 
```

# scheme - 交替列表

> ID：15324848
> 
> 赞同：0
> 
> 时间：2013-03-10T16:53:18.333
> 
> 标签：scheme

我需要创建一个函数来检测列表是否在原子和子列表之间交替。因此，例如，如果列表为 (a (bc) d (ef))，它将返回 true，如果列表为 (ab)，则返回 false

这是我到目前为止所拥有的：

```
(define (altlist? lis)
(cond
((null? lis)#t)
((null? (cdr lis))#t)
((list? (car lis))
 (not(list? (cadr lis)
            (altlist? cdr lis)
           '() )
     (list? (cadr lis)
            (altlist? cdr lis)
           '())
     )))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:53:57.063

这是您的代码，移动了一些括号，添加了一些注释和缩进（以使其可读），以及一些更正：

```
(define (altlist? lis)
  (cond
    ((null? lis) #t)                  ; end-of-list successfully reached
    ((null? (cdr lis)) #t)            ; ditto
    ((list? (car lis))                ; first elt is a list
      (and (not (list? (cadr lis)))   ; fixed: use AND
           (altlist? (cdr lis))))
    (else                             ; fixed: ELSE clause
      (and (list? (cadr lis))         ; fixed: use AND
           (altlist? (cdr lis)))))) 
```

所以你很亲密。写下你的代码时要小心。

这里有一个微妙之处。`(list? '())`返回真。如果您更愿意将空列表视为原子，而不是列表，那么`list?`您可以使用`pair?`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:15:15.373

函数`list?`并`not`接受单个参数（请参阅[http://www.r6rs.org/final/html/r6rs/r6rs-ZH-14.html#node_sec_11.1](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-14.html#node_sec_11.1)`cond` ），您无法理解第三个子句是什么意思。

同时，解决方案甚至更短：

```
(define (altlist? lis)
  (cond
   ((null? lis) #f)
   ((null? (cdr lis)) #f)
   ((not
     (eq? (list? (cadr lis))
          (list? (car lis))))
    #t)
   (#t (altlist? (cdr lis))))) 
```

这个想法是一个接一个地检查给定列表的后续对。并且对于每个比较两者都是列表，还是两者都是原子。如果列表包含列表和原子，那么将有一对 (list atom) 或 (atom list)，反之亦然。

### 编辑：

正如@molbdnilo 所指出的，原始函数实际上试图检查列表是否不是交替的。

### 编辑：

现在我明白了，交替列表不仅仅是一个包含列表和原子的列表，所以看看 GoZoner 解决方案。目前的实现只检查给定列表中是否存在一个原子和一个缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:06:14.280

干得好：

```
(define (alt-list? l)
  (or (null? l)
      (and (not (null? (cdr  l)))
           (not (list? (car  l)))  ; atom
           (list? (cadr l))        ; list
           (alt-list? (cddr l))))) 
```

确切的代码将取决于以下是否为“交替列表”：

1.  '（A B C D）
2.  '（（ab）c）

我提供的代码需要（原子列表）* => #t

# c# - 首先使用 ef 5 代码将继承的未映射对象保存到基础对象

> ID：15324851
> 
> 赞同：0
> 
> 时间：2013-03-10T16:53:58.387
> 
> 标签：c#, entity-framework

我有一个名为 topic 的代码优先 poco 类。由此，我创建了一个名为 topicWith 的继承类，其中包含一些额外的聚合字段，例如消息计数，以及在主题中创建消息的最后一个用户。在我的控制器中，我首先获取一个 topicWith，然后我想用 +1 更新基本主题的阅读次数。如果我尝试保存 topicWith 对象，则会收到错误消息：实体类型 TopicWith 不是当前上下文模型的一部分。即使我已经明确地将对象转换为“主题”，我也得到了这个

这是我正在做的事情的简短版本。

```
[NotMapped]
public class TopicWith : Topic
{
    public virtual int NumberOfMessages { get; set; }
}

var topics = from topic in context.Topics
                select
                    new TopicWith
                        {
                            ForumID = topic.ForumID,
                            TopicID = topic.TopicID,
                            Subject = topic.Subject,
                            Hide = topic.Hide,
                            Locked = topic.Locked,
                            Icon = topic.Icon,
                            NoOfViews = topic.NoOfViews,
                            Priority = topic.Priority,
                            Forum = topic.Forum,
                            Messages = topic.Messages,
                            NumberOfMessages = topic.Messages.Count()
                        };
var topicWith = topics.FirstOrDefault();
topicWith.NoOfViews++;
context.Topics.Add((Topic) topicWith); 
```

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:12:13.430

可能的解决方案

```
var topics = from topic in context.Topics
            select
                new {
                        Topic = topic,
                        NumberOfMessages = topic.Messages.Count()
                    };
var topicWith = topics.FirstOrDefault();
topicWith.Topic.NoOfViews++;
context.Topics.Add(topicWith.Topic); 
```

# emacs - 如何在 org-mode 中转义斜线？

> ID：15324852
> 
> 赞同：13
> 
> 时间：2013-03-10T16:54:06.320
> 
> 标签：emacs, org-mode

举个`foo /bar/ baz`例子，导出成HTML的时候就变成了`foo <i>bar</i> baz`，现在我想用原来的样式导出`foo /bar/ baz`，怎么实现呢？我试过`foo \/bar\/ baz`了，但是输出变成了`foo \/bar\/ baz`。

我知道这是一个简单的问题，我用谷歌搜索了很多，但只找到了这个：[Escape pipe-character in org-mode](https://stackoverflow.com/questions/5144862/escape-pipe-character-in-org-mode)，答案说斜线转义工作正常，但对我来说，似乎不太好。

* * *

编辑：

搜索org模式邮件列表后，我在这里找到了一个讨论和解决方案：http: [//thread.gmane.org/gmane.emacs.orgmode/50743](http://thread.gmane.org/gmane.emacs.orgmode/50743)

有两种方法可以做到这一点：

1.  设置选项`#+OPTIONS: *:nil`以关闭所有强调符号
2.  修改变量`org-emphasis-alist`，删除相关内容

对我来说，第一个解决方案是可以接受的，也很简单。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-06T12:22:08.313

在空格和正斜杠之间放置一个零宽度空格（U+200B；在 Emacs 中使用 Ctrl-x 8 RET 200B RET 插入）。

组织模式文本

```
What do we see?
- /foo/
- ​/foo/ 
```

在第二个“foo”行的第一个正斜杠之前插入一个零宽度空格（不可见，因为它的宽度为零）在导出后生成以下 HTML：

```
<div id="content">
<h1 class="title">What do we see?</h1>

<ul>
<li><i>foo</i>
</li>
<li>​/foo/
</li>
</ul>

</div> 
```

零宽度空间也被导出，并最终位于您期望`<li>`的位置和位置之间。`/foo/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:57:02.710

如果您可以容忍斜线之间的空格，`foo / bar / bas`则将使用文字斜线导出。或者，您可以使用`=foo /bar/ baz=`.

我怀疑这些都不是你想要的，但它们可以很容易地完成并且可能已经足够好了。

**编辑** 如果您需要对 URL 使用斜杠，则应使用 orgmode 链接语法，例如`[[http://foo/bar.baz]]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-12T23:22:16.313

（为了完整起见，我将在这里重新发布[我的答案](https://stackoverflow.com/questions/5144862/escape-pipe-character-in-org-mode)......）

您还可以将相关文本格式化为*逐字*或*代码*：

> 代码中的文本和逐字字符串不会针对 Org 模式特定的语法进行处理；它是逐字导出的。

因此，您可以尝试使用`=foo | bar=`（代码）或`foo ~|~ bar`（逐字）之类的方法。不过，它确实改变了输出格式。

# javascript - dojo show() 和 hide() 从 jquery() 移植

> ID：15324853
> 
> 赞同：4
> 
> 时间：2013-03-10T16:54:10.463
> 
> 标签：javascript, jquery, dojo

我只是将一堆代码从 jQuery 移植到 DOJO (1.8)。我偶然发现了 DOM 元素的显示/隐藏（可能是图层或其他任何东西）。

假设我们有一个想要显示或隐藏的图层，没有动画。想象一个 Buttonbar 在某些事件上发生变化，我不一定想一直引入图形效果。

```
<div id="myLayer">hide me</div> 
```

在 jQuery 中，我会这样做：

```
$("#myLayer").show();  // to show
$("#myLayer").hide();  // to hide 
```

我觉得非常漂亮和苗条。现在移植到 DOJO 我发现我需要执行以下操作：

```
require(["dojo/fx/Toggler"], function(Toggler) {
    // Create a new Toggler with default options
    var toggler = new Toggler({
      node: "myLayer",
      hideDuration: 0,
      showDuration: 0
    });

    // Hide the node
    toggler.hide();

    // Show the node
    toggler.show();
  }); 
```

那是 8 行代码与 2 行代码。我错过了什么吗？有没有更快的方法来做一个简单的隐藏？

非常感谢，托比

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T17:04:55.797

```
require(["dojo/query", "dojo/NodeList-dom", "dojo/domReady!"], function(query){
  query("#myLayer").style("display", "none");
}); 
```

# android - 在不是从 Activity 派生的类中维护 Context 的实例是否可以接受？

> ID：15324854
> 
> 赞同：0
> 
> 时间：2013-03-10T16:54:15.817
> 
> 标签：android, android-activity, android-context

我正在开发一个应用程序，其中我将 Activity 的上下文传递到从 Object 派生的类中。

这样做有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:55:55.640

像 Activity 或 Service 那样维护 Context 的实例将为内存泄漏开辟道路。

但是，保留对返回的实例的引用`getApplicationContext()`应该是无害的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T16:55:27.733

本质上并没有什么错。例如，每个`View`班级都这样做。

`Activity`唯一的危险是在它被销毁后保持对它的引用。这是内存泄漏的常见来源。有关这方面的更多信息，请参阅博客文章[避免内存泄漏](http://android-developers.blogspot.com/2009/01/avoiding-memory-leaks.html)。

`View`子类避免泄漏，因为当活动被销毁时，对视图本身的引用通常会消失。如果维护引用的类实例没有像那样消失，那么您需要安排引用消失。一种选择是覆盖`onDestroy`您的活动并在那里进行一些清理。另一种是使用 a`SoftReference`而不是对上下文的硬引用。

# jquery - 在 jquery ui 对话框关闭功能上使用 jquery 提交表单

> ID：15324859
> 
> 赞同：0
> 
> 时间：2013-03-10T16:54:30.340
> 
> 标签：jquery, asp.net-mvc, jquery-ui

我的 jquery ui 对话框上有一个按钮，如下所示：

```
<div id="dialog-confirm" title="Multiple Account Login" style="display: none;">
     <a class="close-btn" href="#" id="A16">
                <img src="../../Content/NewDesign/images/cross.png" width="28" height="28" alt="close dialog" onclick="closeMultipleAccountDialog();" /></a>
            <div class="clear-n">
            </div>
</div> 
```

单击此按钮时会调用一个函数

```
 function closeMultipleAccountDialog() {
        $("#hdfAccount").val("cancel");
        $("#hdPage").val("151API");
        $("#hdID").val($("#ID").val());
        $("#hdPSSWD").val($("#PSSWD").val());
        $("#hdACCID").val($("#ACCID").val());
        $("#hdPASSWDINT").val($("#PASSWDINT").val());
        $("#frmsetAccount").submit();
        $(this).dialog("close");        
     } 
```

此功能需要提交表单：

```
 <form action="../Account/SetAccount" method="post" id="frmsetAccount">
                            <div class="flds-up">
                                <div class="lft-txt">
                                    Account <span>:</span></div>
                                <div class="user-fld">
                                    <%=  ViewData["MyAccountsList"] %>
                                </div>
                                <div class="clear-n">
                                </div>
                                <input type="hidden" id="hdfAccount" name="hdfAccount" value="" />
                                <input type="hidden" id="hdPage" name="hdPage" value="" />
                                <input type="hidden" id="hdID" name="hdID" value="" />
                                <input type="hidden" id="hdPSSWD" name="hdPSSWD" value="" />
                                <input type="hidden" id="hdACCID" name="hdACCID" value="" />
                                <input type="hidden" id="hdPASSWDINT" name="hdPASSWDINT" value="" />
                            </form>

and dialog code is like this:

$("#dialog-confirm").dialog({
                autoOpen: true,
                resizable: true,
                modal: true,
                width: 458,
                Height: 184,

                buttons: {
                    "Login": function () {
                        $(this).dialog("close");
                        $("#hdfAccount").val("login");
                        $("#hdPage").val("151API");
                        $("#hdPage").val("151API");
                        $("#hdID").val($("#ID").val());
                        $("#hdPSSWD").val($("#PSSWD").val());
                        $("#hdACCID").val($("#ACCID").val());
                        $("#hdPASSWDINT").val($("#PASSWDINT").val());
                        $("#frmsetAccount").submit();
                    }                   
                },
                open: function (event) {
                    $('.ui-dialog-buttonpane').find('button:contains("Login")').focus();
                    $('.ui-dialog-buttonpane').find('button:contains("Login")').addClass('customokbutton');
                },
                close: function (event) {
                    closeMultipleAccountDialog();
                }
            }); 
```

它适用于登录按钮并提交表单，但不适用于对话框关闭。请建议我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:00:27.467

由于`event.preventDefault()`在 jquery ui 代码中，它不会工作：

```
 uiDialogTitlebarClose = $( "<a href='#'></a>" )
            .addClass( "ui-dialog-titlebar-close  ui-corner-all" )
            .attr( "role", "button" )
            .click(function( event ) {
                event.preventDefault();
                that.close( event );
            }) 
```

使用对话框（“关闭”）时。它将关闭对话框并阻止与单击事件相关的所有其他功能。您可以删除它，您的代码将起作用，但也会激活`<a class="close-btn" href="#" id="A16">`之前阻止的链接！

# c++ - 促进为类函数创建组线程

> ID：15324862
> 
> 赞同：-1
> 
> 时间：2013-03-10T16:54:47.677
> 
> 标签：c++

如何将线程组调用用于类成员函数？

对于孔类，`mythreads.create_thread(myclass())`但对于我的类的方法来说，`get(int a,int b)`它会是怎样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:06:23.557

您可以使用[`boost::bind`](http://www.boost.org/doc/libs/1_52_0/libs/bind/bind.html#with_member_pointers).

```
mythreads.create_thread( boost::bind( &YourClassName::get,
                                      your_class_instance,
                                      your_a,
                                      your_b) ) 
```

# java - 如何在 android 中完美地使用 MediaPlayer

> ID：15324868
> 
> 赞同：2
> 
> 时间：2013-03-10T16:55:08.327
> 
> 标签：java, android, media-player

我在一个在线广播流媒体项目中工作，我正在使用来自 URL 的媒体播放器播放音频。音乐正在播放并且工作正常。但我坚持播放，暂停有关玩家活动状态的功能。我希望当应用程序将通过按下主页按钮退出时，音乐将继续播放，但当电话响起时，音乐将暂停，电话通话后音乐将恢复。而且当用户打开另一个应用程序时，音乐将继续在后台播放。（作为android的默认音乐播放器）

但是我所做的仍然几乎达到了我想要的命运，但是缺少一些东西，例如我已经开始播放音乐`onResume`并停止播放音乐。`onDestroy`通过这样做，当我按下主页按钮时，音乐继续在后台播放，但是当有电话来电时并收到它继续播放，这造成了令人作呕的情况，但是当打开另一个应用程序时，音乐就会消失。我应该如何管理`MediaPlayer`它会像我想要的那样工作？有什么建议吗？

注意：我这里没有使用任何服务，只是一个`AsyncTask`播放音乐的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T08:21:01.350

MediaPlayer 作为后台服务的主题在多个来源中都有介绍，例如这个。

[http://www.codeproject.com/Articles/258176/Adding-Background-Music-to-Android-App](http://www.codeproject.com/Articles/258176/Adding-Background-Music-to-Android-App)

您也可以在此处的 Android 官方文档中找到它

[http://developer.android.com/guide/topics/media/mediaplayer.html](http://developer.android.com/guide/topics/media/mediaplayer.html)

希望有帮助。

# c# - 提取完整的 Html 源，而不是部分

> ID：15324870
> 
> 赞同：0
> 
> 时间：2013-03-10T16:55:10.467
> 
> 标签：c#, visual-studio, webbrowser-control, extract, html-agility-pack

我正在尝试从以下站点[http://bit.ly/16jFeyA中提取图像和一些文本](http://bit.ly/16jFeyA)

Web 窗体，C#，Visual Studio，HtmlAgilityPack

编码仅适用于 WebClient ，浏览器`wb.Document.Encoding = "GB2312";`不起作用，不重要。

该网站对图像使用延迟加载。WebBrowser 正确加载，带有信息的图像，但是当我使用 Web 客户端 / wb.DocumentText 提取时，它不会下载“完整信息”，某些信息丢失，尤其是图像链接等。

有没有办法解决？我正在尝试提取图像和产品信息。

向下滚动以强制加载图像后使用 wb.DocumentText 提取（由于延迟加载） - [http://notepad.cc/share/EjW3tFCffO](http://notepad.cc/share/EjW3tFCffO)

wb = 网络浏览器

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:57:52.570

您需要使用知道如何评估和执行客户端 JavaScript 的东西，例如无头浏览器。[PhantomJS](http://phantomjs.org/)应该足够了。

# c# - Dockpanel Fix Bottom Child

> ID：15324875
> 
> 赞同：0
> 
> 时间：2013-03-10T16:55:53.490
> 
> 标签：c#, wpf, dockpanel

我正在尝试构建一个布局，将两行的底部固定为始终可见。问题是，底行的内容必须在顶部，这使得使用停靠面板变得困难。这是一个简短的概述：

[这是](http://imageshack.us/photo/my-images/856/66626640.png/)所有窗口的图片链接：

（很抱歉，但是stackoverflow 不会让我发布图片。。）

第一个窗口是当有足够的可用空间时它应该看起来的样子，底部（蓝色）粘在顶部（红色）上。

代码如下所示：

```
<DockPanel>

    <Grid VerticalAlignment="Top"
          Background="Red"
          DockPanel.Dock="Top">
        <Grid Height="100" />
    </Grid>

    <Grid Height="20"
          Background="Blue"
          VerticalAlignment="Top"
          DockPanel.Dock="Bottom" />

</DockPanel> 
```

但是当我调整窗口大小以使第二行不再适合时，第二行不固定，并且当窗口太小时将不可见：窗口 2

所以我想要的是这样的：

```
<DockPanel>
    <Grid Height="20"
          Background="Blue"
          DockPanel.Dock="Bottom" />

    <Grid VerticalAlignment="Top"
          Background="Red"
          DockPanel.Dock="Top">
        <Grid Height="100" />
    </Grid>
</DockPanel> 
```

这给了我以下足够的可用空间：window 3

当我调整窗口大小时：window 4

底部是固定的。这里的问题是，当空间太大时，第二行不会像第三张图片那样粘在顶部，而是粘在底部。我玩过 DockPanel.LastChildFill 和停靠面板中的子订单。我已经尝试了使用一个或多个网格的各种布局，但无法让它工作。我该怎么做呢？

编辑：@publicgk：你是对的，第二个窗口是错误的，我更新了链接。

此外，我会尝试更好地解释自己。考虑到第一行是完全红色的，第二行是其余的（蓝色和白色一起）。然后第一个代码示例给了我第一个和第二个窗口：虽然第二行的内容（蓝色部分）在顶部（window1，这是我想要的），但第二行不固定/始终可见我调整窗口大小（窗口 2）。

第二个代码示例生成窗口 3 和 4，而当窗口足够大时内容位于第二行的底部（窗口 3，不是我想要的），即使我调整窗口大小（窗口4，这就是我想要的），所以第二行与第一行重叠。

总而言之，我需要行在有足够空间时表现得像窗口 1，而在没有空间时像窗口 4。

Edit2：我忘了说，第一行应该包含内容，其大小未知且可变，因此使用网格并设置第一行的高度或最大高度将不起作用。然而，第二行的高度是已知的，可以直接设置。

这是一个示例，它显示了这个问题：

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication2"
    Title="MainWindow"
    Width="525"
    Height="350">
<Window.Resources>
    <local:RandomHeightConverter x:Key="RandomHeightConverter"/>
</Window.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="100*" MaxHeight="100"/>
        <RowDefinition Height="20" />
    </Grid.RowDefinitions>

    <Grid Grid.Row="0"  Background="Red" Height="{Binding Converter={StaticResource RandomHeightConverter}}" />
    <Grid Grid.Row="1"  Background="Blue"  />
</Grid> 
```

```
public class RandomHeightConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return new Random().Next(20, 100);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

这会产生这样的结果： [变量第一行问题](http://img29.imageshack.us/img29/7066/28259951.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:19:38.027

不确定您是否可以使用 来执行此布局`DockPanel`，但您可以使用`Grid`来执行此类布局。

这样的事情复制了你正在尝试做的事情

```
<Window x:Class="WpfApplication9.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication9"
        Title="MainWindow" Height="209" Width="525" Name="UI">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="100*" MaxHeight="100" />
                <RowDefinition Height="20" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="0"  Background="Red" />
            <Grid Grid.Row="1"  Background="Blue"  />
        </Grid>
</Window> 
```

或者将`RowDefinition`大小绑定到您要显示的内容，因此在下面的示例中，顶部部分将调整大小以固定其内容但可以缩小，底部行的大小固定到底部内容，并且当窗口大小小于时将重叠顶行。

```
 <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" MaxHeight="{Binding ElementName=topContent, Path=ActualHeight, Mode=OneTime}" />
            <RowDefinition Height="{Binding ElementName=bottomContent, Path=ActualHeight,Mode=OneTime}"  />
        </Grid.RowDefinitions>
        <Grid x:Name="topContent" Grid.Row="0"  >
            <!--your top content-->
            <Grid Height="200" Background="Red" />
        </Grid>
        <Grid Grid.Row="1"  >
            <!--your bottom content-->
            <Grid x:Name="bottomContent" VerticalAlignment="Top" Height="20" Background="Blue" />
        </Grid>
    </Grid> 
```

结果：

![在此处输入图像描述](../Images/5e4475e590614c8cc773474287781774.png) ![在此处输入图像描述](../Images/8891848d2361529df5695cb9685d7a6a.png)

# ios - 如何延迟位置服务权限的提示

> ID：15324883
> 
> 赞同：0
> 
> 时间：2013-03-10T16:56:26.033
> 
> 标签：ios, mkmapview, uialertview, cllocationmanager

在我的应用程序中，我使用的是 CLLocationManager 和 MKMapView。当应用程序启动时，我会向用户展示一个必须接受的免责声明（一次）。但是，当显示免责声明时，会出现一个弹出窗口，请求访问用户位置。

有没有办法延迟这个 alertView 直到接受免责声明？请指教。

编辑：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

if([[NSUserDefaults standardUserDefaults] objectForKey:@"disclaimerAccepted"] == nil) {
    [self firstRun];
    [[NSUserDefaults standardUserDefaults] synchronize];
}
else
{
    [self locationStuff];
}
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:07:46.797

位置警报视图仅在您实际请求用户位置时显示，因此执行此操作的最简单方法是确保在您的应用程序第一次运行时启动`CLLocationManager`或显示`MKMapView`直到您的免责声明被接受后。这可能需要您移动一些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:33:02.753

也许您需要首先检查免责声明以及是否接受 start `CLLocationManager`。如果不接受免责声明 - 等待接受并开始`CLLocationManager`。

```
- (void)viewDidLoad
{
   [super viewDidLoad]; 
   if (disclaimerAccepted)
   {
      //start CLLocationManager
   }
   else
   {
      //Show disclaimer
   }
}
- (void)disclaimerAccepted
{
    disclaimerAccepted = YES;
    //start CLLocationManager
} 
```

# php - Mysql查询效率

> ID：15324886
> 
> 赞同：-3
> 
> 时间：2013-03-10T16:56:55.083
> 
> 标签：php, mysql, sql, join

我们有一个名为 product 的表，其中 productID 作为主键。然后我们有一个名为 productProcess 的表，其中存储了 productID 和 processID。所以现在我们要搜索在 productProcess 表中没有实例的所有 productID。目前我们运行两个查询，首先是所有产品，第二个是来自 productProcess 的产品 ID，并且选择了那些不存在的。还有其他机制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:59:42.263

就在这里。采用`LEFT JOIN`

```
SELECT  a.*      // this will get all columns from product table.
FROM    product a
        LEFT JOIN productProcess b
            ON a.productID = b.productID
WHERE   b.productID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/8b410/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

如果更快的话，另一个技巧是为`productID`表设置`productProcess`一个外键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:00:06.410

假设 product.productID*不能为 NULL*：

```
SELECT product.productID 
FROM product
LEFT JOIN productProcess
ON productProcess.productID = product.productID
WHERE productProcess.productID IS NULL 
```

另一种选择是`WHERE NOT EXIST`：

```
SELECT product.productID
FROM product
WHERE NOT EXISTS (
  SELECT productID FROM productProcess
  WHERE productProcess.productID = product.productId
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T17:03:39.937

您可以使用左连接。如果您可以使用左连接，则结果将是与 products 和 ProductsProcess 相关的所有产品。

```
SELECT  p.* 
FROM    (product p LEFT JOIN productProcess pp ON a.productID = b.productID)
WHERE   pp.productID IS NULL 
```

# java - p2p0是android中WIFI DIRECT的无线接口吗？

> ID：15324889
> 
> 赞同：4
> 
> 时间：2013-03-10T16:57:15.390
> 
> 标签：java, android, networking, network-programming, wifi

当我在我的 android 设备中打印所有接口时：

```
03-10 19:50:15.484: I/System.out(22415): lo
03-10 19:50:15.494: I/System.out(22415): upnlink0
03-10 19:50:15.504: I/System.out(22415): svnet0
03-10 19:50:15.504: I/System.out(22415): rmnet0
03-10 19:50:15.514: I/System.out(22415): rmnet1
03-10 19:50:15.524: I/System.out(22415): rmnet2
03-10 19:50:15.534: I/System.out(22415): sit0
03-10 19:50:15.544: I/System.out(22415): ip6tnl0
03-10 19:50:15.554: I/System.out(22415): p2p0
03-10 19:50:15.564: I/System.out(22415): wlan0 
```

如果 p2p0 是 WIFI DIRECT 的实际接口，我会问吗？还如何仅打印当前使用的 INTERFACES ??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-06T05:09:34.263

p2p0 是 WIFI DIRECT 的接口。

在 android studio 控制台中发送“ifconfig”命令以查看当前使用的接口。如果当前使用任何接口，则状态显示为活动，否则显示为非活动。

# angularjs - ng-repeat 和 ui-if

> ID：15324890
> 
> 赞同：4
> 
> 时间：2013-03-10T16:57:18.560
> 
> 标签：angularjs, angular-ui

当我想将 ui-if (anguluarUi) 与 ng-repeat 一起使用时（我认为它在那里最有用）我得到一个错误：

```
Error: Multiple directives [uiIf, ngRepeat] asking for transclusion on: <!-- uiIf: oConnection.aOptions --> 
```

有没有办法将这两者结合起来？

**编辑：**

```
<ng-repeat><div ui-if>... 
```

不幸的是（目前）不可能。

我知道我可以将 ng-show 和 ng-repeat 结合起来，但不一样。

我也不想将 ui-if 放在重复之外，因为我想将重复的值用于条件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:01:03.090

我认为应该使用过滤器而不是 ui-if。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T14:14:13.023

**ui-if**至少已从最新版本的 angular-ui 中删除，但从**angular 1.1.5**开始，您有**ng-if**内置。

# python - Pygame中的“连续”绘图

> ID：15324893
> 
> 赞同：2
> 
> 时间：2013-03-10T16:58:00.853
> 
> 标签：python, plot, pygame

我是否在 Pygame 中绘制了一个“连续”的移动情节，就像[这个](http://ccl.northwestern.edu/netlogo/models/run.cgi?Altruism.735.518)“NetLogo”模拟中的情节一样？我的主要困难不是绘图本身（点之间的线），而是当曲线接近盒子边缘时移动绘图框架的过程。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:29:22.810

好的，因此您可以通过以下方式制作类似于应用程序中的绘图：

创建一个图的大小的表面。然后创建一个像素数组，这样您就可以修改图形。

```
pxarray = pygame.PixelArray (surface) 
```

然后，您可以像任何其他数组一样操作该数组：

```
pxarray[x][y] = 0xFF00FF # this will set pixel at x,y to purple 
```

您通常可以正常将表面粘贴到屏幕上。

更多关于像素数组： http: [//www.pygame.org/docs/ref/pixelarray.html](http://www.pygame.org/docs/ref/pixelarray.html)

**编辑**：使用 pxarray，如果你的数字超出范围，你将得到一个缩小的图形。简单地，当点对于绘图来说太大时，您添加足够的行，并使用它`transform.scale`来缩小到原始分辨率。

# matlab - 将大矩阵元素相乘会导致无穷大

> ID：15324899
> 
> 赞同：0
> 
> 时间：2013-03-10T16:58:47.230
> 
> 标签：matlab, matrix, infinity

我应该将所有矩阵组合成一个，水平连接

矩阵 = [矩阵 1 矩阵 2 矩阵 3];

现在我必须找到 32 x 2039 维度的矩阵的平均值。

我尝试遍历每一行并使用该行中所有元素的均值乘以并除以元素数，即 2039。

我得到的答案一直是-Inf。

帮助将不胜感激。谢谢

我的代码我能记住的以防万一

```
[r, c] = size(matrix);
for i = 1:r
   rowvalues = matrix(i,[1:c]);
   mean(i,1) = mean2(rowvalues); %or mean(rowvalues,2);
end 
```

结果是-Inf。

我的目标是计算应该是 39 X 1 维的矩阵的平均值。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:36:02.677

当一行的元素为-Inf 时，整行的均值=-Inf。我建议您使用以下代码进行检查：

```
% The indices of the occurences of -Inf in matrix
mInfIndices=(matrix==-Inf);
% Does the row contain an -Inf?
mInfInRows=sum(mInfIndices,2)>0;
disp(mInfInRows); 
```

这样您将看到哪些行包含 -Inf。

# git - 编写 git 提交消息时要遵循的标准

> ID：15324900
> 
> 赞同：79
> 
> 时间：2013-03-10T16:58:50.350
> 
> 标签：git, git-commit, commit-message

我发现自己管理着很多文件（超过 60 个但低于 70 个），并且我的提交消息到目前为止都遵循这种模式：当我添加类似 on 的内容时`layout.css`，我的提交消息是*“在 layout.css 文件上添加了一些内容”*，当我删除一些东西，我的提交信息是*“从 layout.css 文件中删除了一些东西”*。

一些文件，我查看我的提交提要并*添加......*并 *删除......*消息占主导地位。有时我不记得我删除了什么或添加了什么，`layout.css`因为我一次做了很多更改，所以我很难想出一个合适的提交信息。

有没有我应该遵循的标准来帮助我提出我的提交信息？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-10T17:11:22.720

当您只是描述您所做的事情时（用技术但模糊的术语，例如“添加一个功能”），您并没有对 Git 已经存储在提交中的内容添加太多内容。想象一下自己在一段时间后阅读提交消息；什么样的总结最能帮助您记住/与其他开发人员交流该更改的本质？！确切的内容取决于您的项目和流程，但我发现这是一个很好的指导方针。

因此，首先在您的提交消息中添加上下文（*为什么*，而不是*如何*）（例如“frobnize 消息以启用持久性”）而不是“添加 frob() 函数”）。这是更多的努力（你必须反思和*思考*），但它更值得。

如果您想进一步了解这个主题，这里有大量信息，例如[Peter Hutterer 的这篇博客文章](http://who-t.blogspot.de/2009/12/on-commit-messages.html)或[这张有趣的幻灯片](http://www.slideshare.net/TarinGamberini/commit-messages-goodpractices)。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-03-10T17:03:13.360

50/72 模型似乎是一个很好的做法。即...第一行的最大长度应为 50 个字符，并且应作为标题服务。后跟一个空格，第二组行应以 72 个字符换行并用作摘要。这是一个 SO 问题：[Git Commit Messages : 50/72 Formatting](https://stackoverflow.com/questions/2290016/git-commit-messages-50-72-formatting)，讨论相同。

以下是有关该主题的一些详尽说明：

1.  [GIT 提交良好实践](https://wiki.openstack.org/wiki/GitCommitMessages)
2.  [关于 Git 提交消息的注释](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html)
3.  [正确的 Git 提交消息和优雅的 Git 历史](http://ablogaboutcode.com/2011/03/23/proper-git-commit-messages-and-an-elegant-git-history)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-10T17:02:15.233

Git 已经知道你在一次提交中修改了哪些文件，在注释中指定它是没有用的。只需说例如“修复填充错误”或“在侧边栏中添加菜单”。说清楚，就是这样。

# hibernate - 休眠：一对多不加载所有实体，但只加载一个

> ID：15324904
> 
> 赞同：1
> 
> 时间：2013-03-10T16:59:31.240
> 
> 标签：hibernate, hibernate-mapping

我相对较新，并尝试使用一对多映射加载子实体。但是，在初始化过程中，我看到只有一个实体被加载。关联的子表还有 3 行未加载，但我看到查询返回 4 行，这是正确的。Hibernate 没有初始化。

如果您在日志跟踪中看到粗体，您会看到第一行正在初始化，但之后没有任何剩余行被初始化。不确定是什么问题。请提供一些有用的指示。非常感谢。

-罗恩

以下是代码片段：

```
EMP table; 
EMP_ACCT table;

    EMP_ID  ACCT_TYPE          ACCT_VAL

------  ---------          --------

1001    checking       test val

1001    savings            test val1

1001    high yield savings test val2

1001    simple checking    test val3

    <!-- EMP table -->
    <hibernate-mapping>
    <class name="com.Employee" table="EMP" dynamic-update="true">
        <id name="empId" type="java.lang.Integer">
            <column name="EMP_ID" precision="5" scale="0" />   
            <generator class="assigned"></generator>        
        </id>
        <property name="empName" type="java.lang.String">
            <column name="EMP_NAME" length="100"/>
        </property>          
        <set name="empAcctDetails" inverse="false" lazy="false" table="EMP_ACCT" 
                        cascade="all" fetch="subselect">
            <key>
                <column name="EMP_ID" />
            </key>
            <one-to-many class="com.EmployeeAcctDetails" />
        </set>  
    </class>
    </hibernate-mapping>

    <!-- EMP_ACCT table -->
    <hibernate-mapping>
    <class name="com.EmployeeAcctDetails" table="EMP_ACCT" dynamic-update="true">

        <id name="empId" type="java.lang.Integer">
            <column name="EMP_ID" precision="5" scale="0" />   
            <generator class="assigned"></generator>        
        </id>
        <property name="acctName" type="java.lang.String">
            <column name="ACCT_NAME" length="20"/>
        </property>          
        <property name="acctValue" type="java.lang.String">
                <column name="ACCT_VALUE" length="30" />
        </property>  

        <many-to-one name="emp" class="com.domain.Employee" update="false"    insert="false">
            <column name="EMP_ID" />
        </many-to-one>

    </class>

    </hibernate-mapping>

Log trace:
---------

2013-03-10 12:13:29,558 DEBUG  [org.hibernate.SQL]- 
    /* load one-to-many com.domain.Employee.empAcctDetails */ select
        empacctdet0_.EMP_ID as EMP1_1_,
        empacctdet0_.EMP_ID as EMP1_81_0_,
        empacctdet0_.ACCT_NAME as ACCT2_81_0_,
        empacctdet0_.ACCT_VALUE as ACCT3_81_0_ 
    from
        EMP_ACCT empacctdet0_ 
    where
        empacctdet0_.EMP_ID=?
Hibernate: 
    /* load one-to-many com.domain.Employee.empAcctDetails */ select
        empacctdet0_.EMP_ID as EMP1_1_,
        empacctdet0_.EMP_ID as EMP1_81_0_,
        empacctdet0_.ACCT_NAME as ACCT2_81_0_,
        empacctdet0_.ACCT_VALUE as ACCT3_81_0_ 
    from
        EMP_ACCT empacctdet0_ 
    where
        empacctdet0_.EMP_ID=?
2013-03-10 12:13:29,558 TRACE  [org.hibernate.jdbc.AbstractBatcher]- preparing statement
2013-03-10 12:13:29,604 TRACE  [org.hibernate.type.IntegerType]- binding '1001' to parameter: 1
2013-03-10 12:13:29,683 DEBUG  [org.hibernate.jdbc.AbstractBatcher]- about to open ResultSet (open ResultSets: 0, globally: 0)
2013-03-10 12:13:29,683 DEBUG  [org.hibernate.loader.Loader]- result set contains (possibly empty) collection: [com.domain.Employee.empAcctDetails#1001]
2013-03-10 12:13:29,683 TRACE  [org.hibernate.engine.loading.LoadContexts]- constructing collection load context for result set [oracle.jdbc.driver.OracleResultSetImpl@23102310]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.CollectionLoadContext]- starting attempt to find loading collection [[com.domain.Employee.empAcctDetails#1001]]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.CollectionLoadContext]- collection not yet initialized; initializing
2013-03-10 12:13:29,698 TRACE  [org.hibernate.loader.Loader]- processing result set
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- result set row: 0
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_81_0_
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- result row: EntityKey[com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.loader.Loader]- Initializing object from ResultSet: [com.domain.EmployeeAcctDetails#1001]
**2013-03-10 12:13:29,698 TRACE  [org.hibernate.persister.entity.AbstractEntityPersister]- Hydrating entity: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.StringType]- returning 'checking' as column: ACCT2_81_0_
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.StringType]- returning 'test val' as column: ACCT3_81_0_
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_81_0_
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_1_**
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- found row of collection: [com.domain.Employee.empAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.CollectionLoadContext]- starting attempt to find loading collection [[com.domain.Employee.empAcctDetails#1001]]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.LoadContexts]- attempting to locate loading collection entry [CollectionKey[com.domain.Employee.empAcctDetails#1001]] in any result-set context
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.LoadContexts]- collection [CollectionKey[com.domain.Employee.empAcctDetails#1001]] located in load context
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.CollectionLoadContext]- found loading collection bound to current result set processing; reading row
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_1_
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- loading entity: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- attempting to resolve: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- resolved object in session cache: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- result set row: 1
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_81_0_
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- result row: EntityKey[com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_1_
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- found row of collection: [com.domain.Employee.empAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.CollectionLoadContext]- starting attempt to find loading collection [[com.domain.Employee.empAcctDetails#1001]]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.LoadContexts]- attempting to locate loading collection entry [CollectionKey[com.domain.Employee.empAcctDetails#1001]] in any result-set context
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.LoadContexts]- collection [CollectionKey[com.domain.Employee.empAcctDetails#1001]] located in load context
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.CollectionLoadContext]- found loading collection bound to current result set processing; reading row
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_1_
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- loading entity: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- attempting to resolve: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- resolved object in session cache: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- result set row: 2
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_81_0_
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- result row: EntityKey[com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_1_
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- found row of collection: [com.domain.Employee.empAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.CollectionLoadContext]- starting attempt to find loading collection [[com.domain.Employee.empAcctDetails#1001]]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.LoadContexts]- attempting to locate loading collection entry [CollectionKey[com.domain.Employee.empAcctDetails#1001]] in any result-set context
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.LoadContexts]- collection [CollectionKey[com.domain.Employee.empAcctDetails#1001]] located in load context
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.CollectionLoadContext]- found loading collection bound to current result set processing; reading row
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_1_
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- loading entity: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- attempting to resolve: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- resolved object in session cache: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- result set row: 3
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_81_0_
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- result row: EntityKey[com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_1_
2013-03-10 12:13:29,698 DEBUG  [org.hibernate.loader.Loader]- found row of collection: [com.domain.Employee.empAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.CollectionLoadContext]- starting attempt to find loading collection [[com.domain.Employee.empAcctDetails#1001]]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.LoadContexts]- attempting to locate loading collection entry [CollectionKey[com.domain.Employee.empAcctDetails#1001]] in any result-set context
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.LoadContexts]- collection [CollectionKey[com.domain.Employee.empAcctDetails#1001]] located in load context
2013-03-10 12:13:29,698 TRACE  [org.hibernate.engine.loading.CollectionLoadContext]- found loading collection bound to current result set processing; reading row
2013-03-10 12:13:29,698 TRACE  [org.hibernate.type.IntegerType]- returning '1001' as column: EMP1_1_
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- loading entity: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- attempting to resolve: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.event.def.DefaultLoadEventListener]- resolved object in session cache: [com.domain.EmployeeAcctDetails#1001]
2013-03-10 12:13:29,698 TRACE  [org.hibernate.loader.Loader]- done processing result set (4 rows) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:05:22.747

您将 EMP_ID 定义为实体 EmployeeAcctDetails 的主键列。这没有任何意义，因为对应表中有几行具有相同的 EMP_ID 值。

向表中添加一个真正的主键列，并将其用作主键列。

# java - 在不改变纵横比的情况下将背景图像填充到屏幕上

> ID：15324905
> 
> 赞同：1
> 
> 时间：2013-03-10T16:59:32.263
> 
> 标签：java, android

我想将图像显示为我的活动的背景，但希望在不更改图像纵横比的情况下将其填充到屏幕上（类似[这样](https://stackoverflow.com/questions/10679366/android-background-image-to-fill-screen)）。

我尝试缩放图像，但这似乎不起作用（因为我使用图像作为背景，而不是在图像视图中定义它，或者似乎是问题所在）。

我该怎么做呢？我什至尝试在它自己的 xml 文件中定义背景图像，但这仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:30:28.287

如果您使用 RelativeLayout，您可以放置​​一个 ImageView 而不是填充所有布局并将其余部分放在上面。像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageView
    android:id="@+id/background"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:scaleType="centerCrop"
    android:src="@drawable/background" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    // Your full layout
</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:24:34.360

AFAIK 唯一的解决方案是您提到的带有 ImageView 的解决方案。为什么它不适合你？您还可以使用 Bitmap.createBitmap() 方法来调整位图的大小以达到所需的大小。

# javascript - 为什么这段代码没有将点击事件绑定到 A 标签？

> ID：15324906
> 
> 赞同：2
> 
> 时间：2013-03-10T16:59:35.393
> 
> 标签：javascript, jquery, onclick

我有这个 HTML：

```
<div class="osoba listItem podrucjaDjelovanja" id="listItem1"  style='display:block'>
  <h3>..</h3>
  <p>...</p>
  <p>...</p>
  <p>...</p>
  <p>Areas of practice:  
    <a href="/en/aktivnosti/#listItem1A">general legal support</a>, 
    <a href="/en/aktivnosti/#listItem2A">conciliation</a>, 
    <a href="/en/aktivnosti/#listItem4A">civil and commercial contracts </a>, 
    <a href="/en/aktivnosti/#listItem8A">property management</a>
  </p>
</div> 
```

我正在尝试将 onClick 事件绑定到 a 标签。我正在使用这个电话：

```
$('.navLeft .menu-item a, #upper-header a, #logo, .podrucjaDjelovanja p a').on('click', function(event) { 
```

除了这个（最后一个）之外，它适用于所有情况。当我单击链接时，此绑定将被忽略。我不确定我做错了什么。

编辑：感谢您的回复，我认为如果我将您指向该页面然后复制粘贴大量代码会更容易。基本上，该页面是[http://skrobotwp.gandzo.com/en/zaposlenici/](http://skrobotwp.gandzo.com/en/zaposlenici/)并且侦听器在 ajax.js 第 36 行中定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:08:30.833

好吧，我认为问题在于您如何调用该`.on`函数。在 jQuery 1.7 之前，他们对`.bind`,`.delegate`和`.live`. 但是随着 jQuery 1.7 的到来，这些方法被弃用以通过将它们全部包含在 1 方法下来简化事情`.on`。但由于文档不那么清晰，人们不理解该`.on`方法。`.on`确实提供了上述 3 种不推荐使用的方法的功能，但这取决于您如何使用`.on`方法。这是一个例子：

```
// Bind
$( ".podrucjaDjelovanja p a" ).on( "click", function( e ) {} ); 

// Live
$( document ).on( "click", ".podrucjaDjelovanja p a", function( e ) {} );

// Delegate
$( ".podrucjaDjelovanja" ).on( "click", "p a", function( e ) {} ); 
```

`.on`我的猜测是，在您致电后，将声明不起作用的锚标记的标记。在这种情况下，您将不得不`.on`为现场活动实施 as done。因此，您需要更改的只是调用方式`.on`。

```
$(document).on( "click", ".navLeft .menu-item a, #upper-header a, #logo, .podrucjaDjelovanja p a", function( event ) {
    alert("Clicked");
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:05:25.107

该错误位于您显示的代码之外。

它适用于您问题中的代码：http: [//jsfiddle.net/p4DRg/](http://jsfiddle.net/p4DRg/)

```
$('.navLeft .menu-item a, #upper-header a, #logo, .podrucjaDjelovanja p a').on('click', function(event) {
    event.preventDefault();
    alert(1);
}); 
```

也许这里有一些无效的标签，使元素最终与您的想法不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:06:54.387

你的代码在`JQuery ready`吗？

这对我来说很好：

```
$(function(){
 $('.navLeft .menu-item a, #upper-header a, #logo, .podrucjaDjelovanja p a')
    .on('click',   function(event) {
      console.log($(this));
      return false;
 });
}); 
```

见这里：http: [//jsfiddle.net/fvDX8/](http://jsfiddle.net/fvDX8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T17:07:11.950

运行`console.log($('.navLeft .menu-item a, #upper-header a, #logo, .podrucjaDjelovanja p a'));`以确保您正在选择您认为的元素。

据我所知，您发布的代码似乎没有任何问题。我会去别处看看。首先验证您的代码并确保您已修复任何语法或结构错误。

另外，你有没有考虑过你点击的东西前面可能有一个元素？例如，覆盖另一个元素的空白部分。使用 DOM 检查器进行检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T18:14:48.537

在 ajax.js 的第 123 行中，您替换了以下内容：

`$('#container').html(json.content);`

当然，新元素没有附加处理程序。您要么必须将处理程序绑定到新元素，要么首先将其绑定到祖先元素。

# html - 带有图标的列表不适合左边距？有一个空间

> ID：15324918
> 
> 赞同：0
> 
> 时间：2013-03-10T17:00:26.283
> 
> 标签：html, css, list, space, paragraph

html

```
 <ul class="social">
 <li><a class="html5" href="#html5"></a></li>
 <li><a class="twitter" href="#twitter"></a></li>
 <li><a class="facebook" href="#facebook"></a></li>
 <ul> 
```

一切正常，但不适合保证金？我需要它像我页面的其余部分一样冲洗......有什么建议吗？

css

```
.social ul
{
list-style-type:none;
margin:0;
padding:0;
}
.social li
{
display: inline-block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:07:06.347

在 CSS 中，您尝试将边距和填充设置为“0”，但由于您的路径错误

-> .social ul

**我认为应该是：**

-> ul.social

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:03:33.653

在小提琴中，`<ul>`仍然有默认的 40px 的左填充和 16px 的顶部/底部边距，所以只需添加`margin: 0; padding: 0;`到无序列表中。每个浏览器都会将此填充/边距添加到列表中 - 我建议使用 CSS 重置，以便您可以显式重置每个元素的默认浏览器样式。[查看此](http://meyerweb.com/eric/tools/css/reset/)以获取更多信息

其次`inline-block`，元素是[依赖于空白的](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)，因此如果您注释掉或删除标记中的空白（在 之间`<li>`），图像之间的水平空间将减少。

**编辑：**它[*确实水平显示*](http://jsfiddle.net/nxn9S/5/)内联..`margin: 0; padding: 0;`没有生效的原因是因为`.social ul`暗示无序列表是具有类 .social 的某些元素的后代，而不是，所以默认的填充/边距保持不变。

# c# - ASP.NET 页面因 MySql 连接而崩溃

> ID：15324922
> 
> 赞同：0
> 
> 时间：2013-03-10T17:00:48.720
> 
> 标签：c#, asp.net, mysql, monodevelop

我正在尝试编写一个仪表板，其中包含有关网站点击量以及人们来自何处等的信息。

我写了以下页面：

```
<%@ Page Language="C#" Inherits="Daschboard.Board" MasterPageFile="~/site.master" %>        
<asp:Content id="main" runat="server" ContentPlaceHolderID="main">
<asp:UpdatePanel runat="server" id="updateableWidgets">
    <ContentTemplate>
        <asp:ContentPlaceHolder id="WidgetsTable">
        </asp:ContentPlaceHolder>
    </ContentTemplate>
</asp:UpdatePanel>
</asp:Content> 
```

后面有以下代码：

```
using Widgets;
using System;
using System.Text;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Configuration;
using MySql.Data.MySqlClient;

namespace Daschboard
{
public partial class Board : System.Web.UI.Page
{
    protected List<IWidget> widgets;
    private MySqlConnection db = new MySqlConnection (ConfigurationManager.AppSettings ["mySql"]);

    protected void Page_Load(object sender, EventArgs e)
    {
        widgets = new List<IWidget>();
        BuildWidgtTable();
        var WidgetThread = new System.Threading.Thread(new System.Threading.ThreadStart(this.InitWidgets));
        WidgetThread.Start();
    }

    private string BuildWidgtTable ()
    {
        StringBuilder sb = new StringBuilder ();
        db.Open ();
        var tableName = ConfigurationManager.AppSettings ["DatabaseSiteName"];
        var query = "SELECT * FROM " + tableName + ", Widget WHERE " + tableName + ".WidgetID = Widget.WidgetID";
        var command = new MySqlCommand (query, db);
        var result = command.ExecuteReader ();
        while (result.Read()) {
            widgets.Add(getWidget(result.GetString(4)));
        }
        db.Close ();

        sb.Append("<table>\n");

        sb.Append("</table>");

        result.Close();
        return sb.ToString();
    }

    private void InitWidgets ()
    {
        db.Open();
        foreach (var widget in widgets) {
            var siteId = ConfigurationManager.AppSettings["siteID"];
            var query = "SELECT * FROM Values, Widget WHERE       Widget.WidgetID = Values.WidgetID AND SiteID = " + siteId;
            var command = new MySqlCommand(query, db);
            var result = command.ExecuteReader();
            while(result.Read()){
                Console.WriteLine(result);
            }
            result.Close();
            widget.Init ("1");
        }
        db.Close();
    }

    private IWidget getWidget (string fileName)
    {
        IWidget widget = null;
        switch (fileName) {
        case "PageHits":
            widget = new PageHits();
            break;
        case "SiteHits":
            widget = new SiteHits();
            break;
        }
        return widget;
    }
}
} 
```

当我运行它时出现问题；调试器停止工作，没有一个好的错误。它确实从数据库中加载了小部件，但它没有从数据库中获取值。

我在 Mac 上使用 Monodevelop。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:09:16.770

您正在单独的线程（`InitWidgets`方法）中运行小部件初始化方法。执行此方法时，页面可能已经完成渲染。如果你想在 ASP.NET 中使用异步操作，我建议你[`Asynchronous Pages`](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)在 MSDN 上阅读。`Async="true"`这个想法是通过在您的 Page 指令 ( ) 中设置将您的 WebForm 标记为异步`<%@ Page Async="true" ... %>`，然后`RegisterAsyncTask`在您的 Web 表单上使用该方法。

# android - ContactsContract.Data._ID 值始终相同

> ID：15324924
> 
> 赞同：0
> 
> 时间：2013-03-10T17:01:05.753
> 
> 标签：android

我正在使用以下 URI 查询 Android 手机上的用户配置文件数据：

```
Uri.withAppendedPath(Profile.CONTENT_URI, ContactsContract.Contacts.Entity.CONTENT_DIRECTORY); 
```

所有 ContactsContract.Data 行似乎都正确返回（结构化名称、电话、电子邮件、网络等）。我遇到的问题是

```
curData.getLong(curData.getColumnIndex(ContactsContract.Data._ID)); 
```

为每一行返回相同的值，即使其他列具有不同的值。有人可以帮我理解为什么会这样吗？如何区分一个 ContactsContract.Data 行与另一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:55:21.263

刚刚发现 通过实体 URI 查询 ContactsContract.Data 行时，应该使用[Entity.DATA_ID而不是 ContactsContract.Data._ID。](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.Entity.html#DATA_ID)

# java - 如何在 2d ArrayList 上调用 .get()

> ID：15324925
> 
> 赞同：1
> 
> 时间：2013-03-10T17:01:10.380
> 
> 标签：java

我有一个 2d ArrayList

```
ArrayList<ArrayList<String>> list = new ArrayList<ArrayList<String>>(); 
```

我想在（0,0）处获得该项目。

我正在寻找类似的东西：

```
list.get(0,0) 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T17:02:34.827

你必须使用

```
list.get(0).get(0) 
```

因为您使用的不是真正的二维，`List`而是`List`.`Lists`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T17:02:19.147

如下

```
String value = list.get(0).get(0); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-10T17:02:29.093

Java 没有二维列表（或数组，就此而言）。使用这样的东西：

```
list.get(0).get(0) 
```

请注意，数组也有类似的问题。你不要这样做：

```
array[0,0]  // WRONG! This isn't Fortran! 
```

相反，你这样做：

```
array[0][0] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-11T19:32:13.503

这是一个遍历 2D-ArrayList 的程序。在这个程序而不是**LineX**中，您可以获得列表中的项目 (i , j ) **:-)**

*程序：*

```
Scanner scan = new Scanner(System.in);  
int no_of_rows = scan.nextInt();         //Number of rows 
int no_of_columns = scan.nextInt();      //Number of columns 
ArrayList<ArrayList<String>> list = new ArrayList<>();
for (int i = 0; i < no_of_rows; i++) {      
    list.add(new ArrayList<>());      //For every instance of row create an Arraylist
    for (int j = 0; j < no_of_columns; j++) {
        list.get(i).add(scan.next());        //Specify values for each indices
    }
}
//ArrayList Travesal
for (int i = 0; i < list.size(); i++) {
    for (int j = 0; j < list.get(i).size(); j++) {
        System.out.print(list.get(i).get(j)+" ");   //LineX
    }
    System.out.println();
} 
```

*输出：*

```
2 3 
1 2 3 4 5 6 
1 2 3 
4 5 6 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T17:04:03.760

它是列表列表，您尝试：

```
String val = list.get(0).get(0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-12T06:45:52.380

我们可以使用下面的语法来满足我们的要求： arrIJ=arr.get(i).get(j);

我必须找到 2D 列表的对角线差异，我使用上述语法：

列表中对角线差异的代码：

```
public static int diagonalDifference(**List<List<Integer>> arr**) {
        int size=arr.size();
        int forwardDiagonal=0;
        int backwardDiagonal=0;

        for(int i=0;i<size;i++){
            for(int j=0;j<size;j++){
                if(i==j){
                    forwardDiagonal=forwardDiagonal+**arr.get(i).get(j)**;
                }
            }
        }

        for(int i=size-1;i>=0;i--){
            for(int j=0;j<size;j++){
                if(i+j==size-1){
                    backwardDiagonal=backwardDiagonal+**arr.get(i).get(j)**;
                }
            }
        }
        return Math.abs(forwardDiagonal-backwardDiagonal);

    } 
```

# flash - 无法将矢量上传到 Stage3D 中的片段着色器

> ID：15324928
> 
> 赞同：0
> 
> 时间：2013-03-10T17:01:28.687
> 
> 标签：flash, stage3d, agal

我正在尝试将矢量上传到着色器，但它不起作用，我可以找到原因。

这是代码：

```
mov ft0.rgb, fc0.rgbb
tex ft1, v1.rggg, fs0 <2d, linear, nomip, repeat>
mov ft0.a, ft1.aaaa
mov oc, ft0 
```

其中 fc0 是我要上传的矢量：

使用此函数，我在 drawTriangles 之前调用并呈现：

```
Engine.context.setProgramConstantsFromVector(Context3DProgramType.FRAGMENT, 0, Vector.<Number>([value1, value2, value3])); 
```

我已经用[Adob​​e Scout](http://gaming.adobe.com/technologies/scout/)调试了场景，显然 fc0 没有任何价值。

如果我用最后一个 ft0 代替 ft1 它可以工作，因为我只渲染纹理。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:15:17.477

您上传的矢量至少需要包含 4 个元素。

见[本页数据参数说明](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display3D/Context3D.html#setProgramConstantsFromVector%28%29)。

# c++ - 在 C++ 中表示 0x00 到 0x7F 范围内的任何通用字符？

> ID：15324930
> 
> 赞同：1
> 
> 时间：2013-03-10T17:01:31.637
> 
> 标签：c++, file, unicode, character-encoding, lexical-analysis

我正在 MSVC 中编写 Lexer，我需要一种方法来表示所有[128 个基本拉丁 unicode字符的](http://www.unicodemap.org/range/1/Basic_Latin/)**精确**字符匹配。 但是，根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/09t1e0z0%28v=vs.80%29.aspx)，*“除了 0x24 和 0x40，0 到 0x20 和 0x7f 到 0x9f 范围内的字符不能用通用字符名称 (UCN) 表示。”* ...这基本上意味着我不能声明类似的东西，更不用说在这个“不允许的”字符范围内使用 switch 语句了。此外，对于 '\n' 和 '\r'，据我了解，编译器/目标操作系统之间的实际值/长度会有所不同...... *（即 Windows 使用 '\r\n'，而 Unix 仅使用 '\ n'*
 *`wchar_t c = '\u0000';`
 *...因此，我使用通用字符对此进行了解决，以确保检测并正确使用正确的编码方案和字节长度。***但是这个C3850***

编译器错误只是拒绝让我按照自己的方式做事......那么如何以*确保*正确编码方案和字符匹配
的方式解决这个问题？**

 **** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:24:44.977

在 C++11 中，对可以用通用字符名称表示的字符的限制不适用于字符和字符串文字。

C++11 2.3/2

> *此外，如果字符或字符串文字的c-char-sequence*、*s-char-sequence*或*r-char-sequence*之外的通用字符名称的十六进制值对应于控制字符（在任一范围内0x00–0x1F 或 0x7F–0x9F，均包括在内）或基本源字符集中的字符，程序格式错误。 15

这意味着对 UCN 的这些限制不适用于字符和字符串文字：

```
wchar_t c = L'\u0000'; // perfectly okay

switch(c) {
    case L'\u0000':
        ;
} 
```

这在 C++03 中有所不同，我从您的问题中假设 Microsoft 尚未更新其编译器以允许这样做。但是我认为这并不重要，因为使用 UCN 并不能解决您要解决的问题。

> 因此，我使用通用字符对此进行了解决，以确保检测到并正确使用正确的编码方案和字节长度

使用 UCN 不会确定所使用的编码方案。UCN 是一种在源代码中包含特定字符的独立于源代码编码的方法，但编译器需要将其视为与源代码中的字面意思完全一样。

例如，拿代码：

```
int main() {
    unsigned char c = 'µ';
    std::cout << (int)c << '\n';
} 
```

如果您将源代码保存为 UTF-16 并在配置为使用代码页 1252 的 Windows 系统上使用 Microsoft 的编译器构建它，那么编译器会将 'µ' 的 UTF-16 表示转换为 CP1252 表示。如果您在配置有不同代码页（不包含字符）的系统上构建此源代码，则编译器将在无法将字符转换为该代码页时给出警告/错误。

同样，如果您将源代码保存为 UTF-8（使用所谓的 'BOM'，以便编译器知道编码是 UTF-8），那么它会将字符的 UTF-8 源表示形式转换为系统的如果可能的话，代码页，不管是什么。

如果你用 UCN 替换 'µ'，'\u00B5'，编译器仍然会做同样的事情；如果可能，它将 UCN 转换为 U+00B5 MICRO SIGN 的系统代码页表示。

* * *

> 那么如何以确保在给定任何源输入的情况下正确的编码方案和字符匹配的方式来解决这个问题呢？

我不确定你在问什么。我猜你想确保整数值`char`或`wchar_t`变量/文字与某种编码方案一致（可能是 ASCII，因为你只询问 ASCII 范围内的字符），但什么是“源输入”？词法分析器源文件的编码？词法分析器的输入编码？您希望“源输入”如何变化？

* * *

> 此外，对于 '\n' 和 '\r'，据我了解，编译器/目标操作系统之间的实际值/长度会有所不同......（即 Windows 使用 '\r\n'，而 Unix 仅使用 '\ n' 和旧版本的 MacOS 使用 '\r')

这是对文本模式 I/O 的误解。当您将字符 '\n' 写入文本模式文件时，操作系统可以将 '\n' 字符替换为新行的某些平台特定表示。但是，这并不意味着 '\n' 的实际值有任何不同。更改纯粹在用于写入文件的库中进行。

例如你可以以文本模式打开一个文件，写入'\n'，然后以二进制模式打开文件并将写入的数据与'\n'进行比较，写入的数据可能与'\n'不同：

```
#include <fstream>
#include <iostream>

int main() {
    char const * filename = "test.txt";
    {
        std::ofstream fout(filename);
        fout << '\n';
    }
    {
        std::ifstream fin(filename, std::ios::binary);
        char buf[100] = {};
        fin.read(buf, sizeof(buf));
        if (sizeof('\n') == fin.gcount() && buf[0] == '\n') {
            std::cout << "text mode written '\\n' matches value of '\\n'\n";
        } else {
            // This will be executed on Windows
            std::cout << "text mode written '\\n' does not match value of '\\n'\n";
        }
    }
} 
```

这也不依赖于使用 '\n' 语法；`0xA`您可以使用ASCII 换行符重写上面的内容，结果在 Windows 上将是相同的。（即，当您将字节写入`0xA`文本模式文件时，Windows 实际上会写入这两个字节`0xD 0xA`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:52:45.540

我发现省略字符串文字并简单地使用字符的十六进制值可以让一切编译得很好。

例如，您将更改以下行：

```
wchar_t c = L'\u0000'; 
```

...至：

```
wchar_t c = 0x0000; 
```

不过，我仍然不确定这是否真的拥有由 UCN 提供的相同的独立值。***

# bash - find 命令中的 %p 和 %P 有什么区别

> ID：15324932
> 
> 赞同：5
> 
> 时间：2013-03-10T17:01:52.690
> 
> 标签：bash, find, posix

我在一个示例中遇到了 find 命令的使用，如下所示（它在某个位置复制了目录结构）

```
 find olddir -name script.sh -printf "%p\0" -printf "newdir/%P\0" | xargs -0L2 cp -n 
```

我不清楚 %p 和 %PI 之间的区别阅读了 find 的手册页，它并没有说太多

```
 %p     File's name.
 %P     File's name with the name of the command line argument under which it was found removed. 
```

%p 和 %P 有什么区别

我对它的含义感到困惑

```
 %P     File's name with the name of the command line argument under which it was found removed. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T17:04:19.363

你甚至尝试过吗？，`%p`在您的示例中，打印包含该`olddir`部分的文件，并`%P`在没有的情况下打印它。几乎正是文档所说的。简单的例子：

```
$ ls -R
.:
dir/

./dir:
file
$ find dir -name file -printf '%p\n'
dir/file
$ find dir -name file -printf '%P\n'
file 
```

# c++ - C ++中的矩阵索引表示法

> ID：15324942
> 
> 赞同：1
> 
> 时间：2013-03-10T17:02:35.237
> 
> 标签：c++, multidimensional-array, matrix, indexing

我可以用单个索引索引多维数组吗？

前任：

> 在内存中，多维数组像单个数组一样被索引（例如在矩阵 2x2 中，matrix[1][1] 是数组的第四个元素，“matrix[3]”）是否有系统自动使用这种表示法？我想写矩阵[3]而不是矩阵[1][1]：可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T17:06:29.253

根据您想要访问数据的方式，您可以轻松地使用单个索引或使用两种方法。根据访问或使用数据的方式，接受两个索引的方法可以是[行优先](http://en.wikipedia.org/wiki/Row-major_order#Row-major_order)或[列优先。](http://en.wikipedia.org/wiki/Row-major_order#Column-major_order)当然，要做到这一点，您需要将矩阵存储在单维数组中。例如：

```
class Matrix {
  int data[W*H];

  int get(int i) { return data[i]; }
  int get(int x, int y) { return data[y*W+x]; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T17:24:05.423

只需使用@Jack 的答案添加一个工作示例：对于行专业和语言`C`（不是 c++），但事情是一样的！

```
#include<stdio.h>
#define R 2
#define C 2
int main(){
  int data1[R*C]={ 1, 2,
                   3, 4
                 };
  int data2[R*C]={ 3, 5,
                   7, 8
                 };
  int result[R*C]={0 };
  int r,c;
  for(r=0; r< R ; r++){
     for(c=0; c< C ; c++){
      result[r*C + c]= data1[r*C + c]  + data2[r*C + c];
     }
  }
  printf("\nMatrix SUM\n");
  for(r=0; r< R ; r++){
     for(c=0; c< C ; c++){
      printf("%-3d ",result[r*C + c]);
    }
    printf("\n");
  }
  return 1;
} 
```

输出：

```
Matrix SUM
4   7   
10  12 
```

你可以看到它在[**copade工作**](http://codepad.org/s9pNKx9N)

您可以使用宏来保持索引表达式干净，如下所示

```
#define INDEX(r, c)  r*C + c 
```

使用如下宏：

```
data2[INDEX(r,c)]; 
```

您是否注意到虽然我的示例中的所有数组都是一维的，但我的编码风格就像我正在使用二维矩阵一样。这并不神奇，但二维数组在编译器级别以类似的方式实现。

# c++ - 如何将 std::string 分配给我班级中的其他 std::string （重载 = 用于字符串对象）。如何加载 .ini 文件

> ID：15324945
> 
> 赞同：0
> 
> 时间：2013-03-10T17:02:57.920
> 
> 标签：c++, string, operator-overloading, ini

我有以下代码--->

配置文件.h

```
#ifndef __CONFIG_FILE_H__
#define __CONFIG_FILE_H__

#include <string>
#include <map>

const std::string SECTION1 = "SERVER";

class ConfigFile {

private:
    const std::string PortNum;

public:
    ConfigFile(std::string const& configFile);

    std::string GetPortNO()
    {
        return PortNum;
    }
    void Load_Server_Config();

    //std::string& operator= (const std::string& str);

};

#endif 
```

配置文件.cpp

```
#include "ConfigFile.h"

#include <fstream>

std::string trim(std::string const& source, char const* delims = " \t\r\n") {
  std::string result(source);
  std::string::size_type index = result.find_last_not_of(delims);
  if(index != std::string::npos)
    result.erase(++index);

  index = result.find_first_not_of(delims);
  if(index != std::string::npos)
    result.erase(0, index);
  else
    result.erase();
  return result;
}

ConfigFile::ConfigFile(std::string const& configFile) {
  std::ifstream file(configFile.c_str());
  std::string temp;
  std::string line;
  std::string name;
  std::string value;
  std::string inSection;
  int posEqual;
  while (std::getline(file,line)) {

    if (! line.length()) continue;

    if (line[0] == '#') continue;
    if (line[0] == ';') continue;

    if (line[0] == '[') {
      inSection=trim(line.substr(1,line.find(']')-1));
      continue;
    }

    posEqual=line.find('=');
    name  = trim(line.substr(0,posEqual));
    value = trim(line.substr(posEqual+1));

    if (name.compare("Port") == 0)
    {
        PortNum = value;        
    }
  }
}

int main()
{
ConfigFile cf("test.ini");
return 0;
} 
```

.ini 文件..

```
[SERVER]
Port = 1234 
```

其中*PortNum*是*类 ConfigFile*的成员上面的代码给了我一个编译错误，**错误 C2678: binary '=' : no operator** its due to there is no "="重载运算符不在我的类中......所以我怎么能重载我的班级的“=”运算符.....或者有没有办法在另一个中复制/分配字符串值......

上面的代码被写入读取一个 .ini 文件，如果存在配置*端口*，那么我将处理*PortNum*中的值。

添加到我的问题中，我更喜欢加载 .ini 文件的其他方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:08:00.297

如何按照此处的建议使用 Windows API 或 Boost Program Options[在 C++ 中解析 INI 文件的最简单方法是什么？](https://stackoverflow.com/questions/12633/what-is-the-easiest-way-to-parse-an-ini-file-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:08:04.593

您正在尝试为`const`字符串分配新值，即更改其值。你不能改变一个`const`对象，它是`const`.

使它成为非常量。

# c++ - boost::filesystem::exists 崩溃

> ID：15324947
> 
> 赞同：3
> 
> 时间：2013-03-10T17:03:07.047
> 
> 标签：c++, boost, boost-filesystem

当我试图从我无权读取的网络驱动器中获取文件时，我正在使用 boost 1.52。我得到一个例外，使用后有没有比在每个地方都`boost::filesystem::exists(fileName)`
做更好的工作？`try, catch`

我现在已经切换回我的旧代码：

```
bool FileExists(const char* fileName)
{
    struct stat my_stat;
    return (stat(fileName, &my_stat) == 0);
}

//boost Exists throws exception if there are no permissions for share folder
bool FileExists(const std::string& fileName)
{
    return FileExists(fileName.c_str());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:08:39.930

使用不抛出的[重载。](http://www.boost.org/doc/libs/1_52_0/libs/filesystem/doc/reference.html#exists)

```
bool exists(const path& p, system::error_code& ec) noexcept; 
```

但是，您将需要检查输出参数，因此这可能比捕获异常更有效。这取决于您要完成的工作。

# node.js - 在节点服务器上安装 SSL 证书

> ID：15324948
> 
> 赞同：4
> 
> 时间：2013-03-10T17:03:10.893
> 
> 标签：node.js, ssl, socket.io

我创建了一个自签名证书并将其安装在 apache 和 node.js（端口 3000）上。在本地主机上都`https://localhost`运行`https://localhost:3000`良好。

因此，我购买了 GoDaddy 标准 SSL 证书并将其安装在服务器上（`http://gatherify.com`）。现在`https://gatherify.com`运行良好，但节点上的 ssl 不起作用。当我访问时，`https://gatherify.com:3000`我得到“连接被中断”。

我执行了卷曲：

```
root@host [~]# curl -v -s -k https://gatherify.com:3000
* About to connect() to gatherify.com port 3000 (#0)
*   Trying 108.160.156.123... connected
* Connected to gatherify.com (108.160.156.123) port 3000 (#0)
* Initializing NSS with certpath: sql:/etc/pki/nssdb
* warning: ignoring value of ssl.verifyhost
* NSS error -5938
* Closing connection #0
* SSL connect error 
```

有什么建议可以解决这个问题吗？

***更新*** **服务器端：* *

```
var io = require('socket.io'), 
    connect = require('connect'), 
    fs = require('fs'),

var privateKey = fs.readFileSync('cert/server.key').toString();
var certificate = fs.readFileSync('cert/server.crt').toString();

var options = { 
    key: privateKey,
    cert: certificate
};

var app = connect(options).use(connect.static('../htdocs/node/'));
app.listen(3000);
var server = io.listen(app);

server.sockets.on('connection', function(socket) { 
console.log("Connected");
}); 
```

**客户端：**

```
<html> <head>

<script type = "text/javascript" src = "https://gatherify.com:3000/socket.io/socket.io.js"></script>

<script type = "text/javascript">

var socket = io.connect('https://gatherify.com:3000', {secure:true}); 

</script>

</head><body></body></html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-08T04:35:05.107

如果你想在 3000 端口上运行一个 node.js 应用程序（在 HTTPS 之后），那么你需要在 443 端口上设置一个代理服务来将 HTTPS 请求代理到 3000 端口。

您没有提及您现在在端口 443 上运行的服务器（是 Apache 吗？）但您可能想要

1.  将该服务移动到一个新端口（例如 4000），然后在端口 443 上运行一个[节点 http 代理](https://github.com/nodejitsu/node-http-proxy)来处理 HTTPS。
2.  然后为您在端口 3000 上运行的 node.js 应用程序设置一个子域（例如 blah.gatherify.com）。
3.  然后，使用[node http proxy](https://github.com/nodejitsu/node-http-proxy)，您将对“gatherify.com”发出的所有请求代理到端口 4000，并将对“blah.gatherify.com”发出的所有请求代理到端口 3000。

一切设置正确后，用户可以访问“ [https://gatherify.com](https://gatherify.com) ”或“ [https://blah.gatherify.com](https://blah.gatherify.com) ”（不使用 :port 号），所有这些都将使用 SSL 进行保护。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-25T21:45:47.933

# 安装证书客户端（在 Node.js 中）

如果你需要一个 node.js 客户端来识别你自己分配或廉价购买的 SSL 证书，你可以使用[ssl-root-cas](https://github.com/coolaj86/node-ssl-root-cas)，它[可以在 npm 上找到](https://www.npmjs.org/package/ssl-root-cas)。

```
'use strict';

var https = require('https')
  , cas
  ;

// This will add the well-known CAs
// to `https.globalAgent.options.ca`
require('ssl-root-cas').inject();

cas = https.globalAgent.options.ca;

cas.push(fs.readFileSync(path.join(__dirname, 'ssl', '01-cheap-ssl-intermediary-a.pem')));
cas.push(fs.readFileSync(path.join(__dirname, 'ssl', '02-cheap-ssl-intermediary-b.pem')));
cas.push(fs.readFileSync(path.join(__dirname, 'ssl', '03-cheap-ssl-site.pem'))); 
```

这将使您的证书可用于核心`https`模块以及依赖它的模块，例如`request`并且`socket.io-client`不删除正常的 ssl 证书（出于某种奇怪的原因，这是默认行为）。

# c# - 拍摄照片后无法导航到其他页面

> ID：15324955
> 
> 赞同：1
> 
> 时间：2013-03-10T17:03:26.410
> 
> 标签：c#, windows-phone

我做了一个可以拍摄照片的应用程序，保存照片后，它会转到另一个页面，比如说`page1.xaml`，但我得到一个错误：|

错误是`An unhandled exception of type 'System.UnauthorizedAccessException' occurred in System.Windows.ni.dll`，消息说`Invalid cross-thread access.`那是什么？我是开发 WP 应用程序的新手。

这是我的代码

```
void cam_CaptureImageAvailable(object sender, Microsoft.Devices.ContentReadyEventArgs e)
    {
        string fileName = savedCounter + ".jpg";

        try
        {   // Write message to the UI thread.
            Deployment.Current.Dispatcher.BeginInvoke(delegate()
            {
                txtDebug.Text = "Captured image available, saving picture.";
            });

            // Save picture to the library camera roll.
            library.SavePictureToCameraRoll(fileName, e.ImageStream);

            // Write message to the UI thread.
            Deployment.Current.Dispatcher.BeginInvoke(delegate()
            {
                txtDebug.Text = "Picture has been saved to camera roll.";

            });

            // Set the position of the stream back to start
            e.ImageStream.Seek(0, SeekOrigin.Begin);

            // Save picture as JPEG to isolated storage.
            using (IsolatedStorageFile isStore = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream targetStream = isStore.OpenFile(fileName, FileMode.Create, FileAccess.Write))
                {
                    // Initialize the buffer for 4KB disk pages.
                    byte[] readBuffer = new byte[4096];
                    int bytesRead = -1;

                    // Copy the image to isolated storage. 
                    while ((bytesRead = e.ImageStream.Read(readBuffer, 0, readBuffer.Length)) > 0)
                    {
                        targetStream.Write(readBuffer, 0, bytesRead);
                    }
                }
            }

            // Write message to the UI thread.
            Deployment.Current.Dispatcher.BeginInvoke(delegate()
            {
                txtDebug.Text = "Picture has been saved to isolated storage.";

            });
        }
        finally
        {
            // Close image stream
            e.ImageStream.Close();

            GoTo();
        }
    }

private void GoTo()
{
     this.NavigationService.Navigate(new Uri("/page1.xaml", Urikind.Relative));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:30:04.047

您正在`GoTo`从后台线程调用该方法。导航时，需要在前台线程上进行。

```
private void GoTo()
{
    Dispatcher.BeginInvoke(() =>
    {
        this.NavigationService.Navigate(new Uri("/page1.xaml", Urikind.Relative));
    });
} 
```

# c++ - Qt中的继承问题

> ID：15324959
> 
> 赞同：-2
> 
> 时间：2013-03-10T17:03:35.170
> 
> 标签：c++, qt, inheritance

基本上我试图继承从摩擦到基础的所有东西（甚至相反），但是，它没有识别我放入的类。

基础.h

```
#ifndef BASE_H
#define BASE_H
#include <QMainWindow>

namespace Ui {
   class Base;
}

class Base : public QMainWindow{
  Q_OBJECT

public:
   explicit Base(QWidget *parent = 0);
   ~Base();

private:
   Ui::Base *ui;
};
#endif // BASE_H 
```

摩擦力.h：

```
#ifndef FRICTION_H
#define FRICTION_H

class Friction : public Base{ // THIS IS WHERE THE ERROR IS
  public:
Friction();
};

#endif // FRICTION_H 
```

基础.cpp

```
#include "friction.h"
#include "base.h"
#include "ui_base.h"

Base::Base(QWidget *parent) :QMainWindow(parent),ui(new Ui::Base){
   ui->setupUi(this);
}

Base::~Base(){
   delete ui;
} 
```

摩擦力.cpp

```
#include "friction.h"
#include "base.h"
#include "ui_base.h"

Friction::Friction(){
} 
```

最后是 main.cpp

```
int main(int argc, char *argv[]){
  QApplication a(argc, argv);
  Base w;
  w.show();

  Friction f;

  return a.exec();
} 
```

我收到错误“'{' token 之前的预期类名”，我已经尽可能地削减了项目，但错误仍然出现，我真的不知道为什么。

我对 c++ 还很陌生，但是我发现继承在基本程序上并不是什么大问题，但是在迁移到 Qt 后，我​​似乎无法让它工作。我已经尝试了很多关于更改包含等的事情，因为我完全不知道为什么它没有识别类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:05:23.127

如果摩擦继承 Base ，那么您应该输入：

```
#include "base.h" 
```

在摩擦.h 文件中，如下所示：

```
#ifndef FRICTION_H
#define FRICTION_H

#include "base.h"

class Friction : public Base{ // THIS IS WHERE THE ERROR IS
  public:
Friction();
}; 
```

# matlab - 比较两组向量

> ID：15324967
> 
> 赞同：2
> 
> 时间：2013-03-10T17:03:49.760
> 
> 标签：matlab, vector

我有矩阵 A 和 B

```
size(A) = [n x]; size(B) = [n y]; 
```

现在我需要比较 A 的每个列向量与 B 的每个列向量的欧几里得距离。我现在正在使用`dist`方法

```
Q = dist([A B]); Q = Q(1:x, x:end); 
```

但它也做了很多不必要的工作（比如分别计算 A 和 B 的向量之间的距离）。

计算这个的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:09:57.490

您正在寻找[`pdist2`](http://www.mathworks.com/help/stats/pdist2.html).

```
% Compute the ordinary Euclidean distance
D = pdist2(A.',B.','euclidean'); % euclidean distance 
```

您应该对矩阵进行转置，因为[`pdist2`](http://www.mathworks.com/help/stats/pdist2.html)假设观察结果是在行中，而不是在列中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:30:15.527

[`pdist2`](http://www.mathworks.com/help/stats/pdist2.html)如果您没有统计工具箱，另一种解决方案是手动计算。例如，一种方法是：

```
[X, Y] = meshgrid(1:size(A, 2), 1:size(B, 2)); %// or meshgrid(1:x, 1:y)
Q = sqrt(sum((A(:, X(:)) - B(:, Y(:))) .^ 2, 1)); 
```

`A`向量中`B`每个值的列索引`Q`可以通过计算获得：

```
[X(:), Y(:)] 
```

其中每一行包含一对索引：第一个是 matrix 中的列索引`A`，第二个是 matrix 中的列索引`B`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:00:45.103

如果您没有 pdist2 并且对于非常大的矩阵也可能更快的另一种解决方案是将以下数学事实矢量化：

||xy||^2 = ||x||^2 + ||y||^2 - 2*dot(x,y)

在哪里||一个|| 是 a 的 L2 范数（欧几里得范数）。

注释：

1.  C=-2*A'*B（这是 ax by y 矩阵）是点积的矢量化。
2.  ||xy||^2 是您正在寻找的欧几里得距离的平方。

这足够了吗，还是您需要显式代码？

这可能会渐近更快的原因是您避免对所有 x*y 比较进行度量计算，因为您将瓶颈设为矩阵乘法（矩阵乘法在 matlab 中得到高度优化）。您正在利用这样一个事实，即这是欧几里德距离，而不仅仅是一些未知的度量。

# java - 特殊字符的字符串拆分，但如果它们一个接一个出现则不是？

> ID：15324969
> 
> 赞同：0
> 
> 时间：2013-03-10T17:03:56.947
> 
> 标签：java, regex

我在括号上拆分一个字符串，如下所示：

```
string.split("\\(\\)"); 
```

现在应将以下内容拆分为 5 个单词：

```
This (is ((()(my test text) 
```

我必须更改什么，以便如果任何拆分字符跟随另一个字符，则不应该存在拆分。

预期结果将是：

```
This
is
my test text 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:07:00.560

使正则表达式不仅选择两个相邻的括号：

```
[()]+ 
```

```
string.split("[()]+"); // or "(?:\\(|\\))+" 
```

# java - 在 Java 中使用泛型时生成的 Class Cast 异常

> ID：15324971
> 
> 赞同：1
> 
> 时间：2013-03-10T17:04:00.117
> 
> 标签：java, generics, arraylist, avl-tree

我正在做家庭作业，但我无法弄清楚为什么每当我尝试运行我的代码时，我总是会收到一个类强制转换异常。我认为这是由于 (path.get(i)) 但我似乎无法找到解决它的方法。我收到的错误是

```
 Exception in thread "main" java.lang.ClassCastException: avltreend.BinarySearchTreeND$BSTNodeND cannot be cast to avltreend.AVLtreeND$AVLTreeNode
    at avltreend.AVLtreeND.balancePath(AVLtreeND.java:64)
    at avltreend.AVLtreeND.insert(AVLtreeND.java:27)
    at avltreend.AVLtreeND.TestAVL(AVLtreeND.java:233)
    at avltreend.AVLtreeND.main(AVLtreeND.java:244)
Java Result: 1 
```

部分代码如下

```
 private void balancePath(K d) {
    ArrayList<BSTNodeND<K>> path = path(d);
    for (int i = path.size() - 1; i>= 0; i--) {
     //   System.out.println(path);
        AVLTreeNode<K> A = (AVLTreeNode<K>)(path.get(i));
        findheight(A);
        AVLTreeNode<K> POA = (A == root) ? null :
                (AVLTreeNode<K>)(path.get(i - 1)); 
```

运行上面的第 5 行时似乎出现了错误。

```
 class BSTNodeND < L extends Comparable< ? super L > > {
     L data;
     BSTNodeND < L > left, right, parent;

     BSTNodeND (L d)                  {data = d;}
     BSTNodeND (L d, BSTNodeND <L> p) {data = d; parent = p;}

     public String toString () {
        return data.toString();} // end toString method
  } 

   protected class AVLTreeNode<L extends Comparable<? super L>>
      extends BSTNodeND<L> {
    protected int height = 0; // New data field

    public AVLTreeNode(L d) {
      super(d);
    } 
```

这就是 AVLTreeNode 类。

我无法弄清楚为什么这两个类不能一起工作，因为我已经更改了一个工作示例并且它应该可以工作。感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:06:49.783

如果对象的真正运行时类型是 A，则不能将其强制转换为子类 B。例如，

```
class A {...}

class B extends A {
    public void announce() { 
        System.out.println("Hi, I'm an instance of B."); 
     }
}

public class Main {
   public static void main(String[] args) {
       A a = new A();
       A b = new B();
       ((B) b).announce(); // Valid
       ((B) a).announce(); // Exception!
   }
} 
```

这正是你正在做的，将一个实例转换`BSTNodeND`为它的子类，`AVLTreeNode`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:08:35.567

你的变量`path`是一个`ArrayList`。`BSTNodeND`当您获得一个元素时，您正试图将其转换为`AVLTreeNode`. 也就是说，您正在尝试将父类转换为子类，如果您的列表中只有“子”元素，那么这可能会起作用，但如果对象的类型是，`BSTNodeND`那么您不能将其转换为它的专用子类`AVLTreeNode`。

# javascript - rails：动态计算字段价格

> ID：15324975
> 
> 赞同：0
> 
> 时间：2013-03-10T17:04:35.313
> 
> 标签：javascript, jquery, ruby-on-rails-3

我正在构建一个创建新产品表单。我有 foodio_price 和 sell_price 字段。这里我要做的是，当用户输入 foodio_price 时，应在后端计算 sell_price 并与之一起显示。我的表单视图是：

```
 <%= nested_form_for @product do |f| %>
<%= f.label :name, "Product Name"%>
    <%= f.text_field :name %>
    <%= f.label :foodio_price %>
    <%= f.text_field :foodio_price %>
    <%= f.label :selling_price, "Selling Price"%>
    <%= @product.selling_price %>
    <%= f.submit %>
 <% end %> 
```

在产品模型中，计算售价。当用户输入 foodio_price 而不重新加载表单时，任何人都可以告诉如何动态显示 sell_price 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:34:43.860

使用 JQuery：

```
$(document).ready(function(){
      $(':input[name*="foodio_price"]').change(function() {
        var fprice = $(this).val();
        // Obtain the selling price from server
        $.get("my_server_url", { fprice: fprice })
        .done(function(data) {
            $(':input[name*="selling_price"]').val(data);
        });
      });
} 
```

# javascript - Javascript：在添加 CSS 样式时循环遍历数组

> ID：15324976
> 
> 赞同：1
> 
> 时间：2013-03-10T17:04:39.567
> 
> 标签：javascript, css, loops

我有一个 for 循环。

在循环中有一个 if 语句，如果发现下拉列表为空，则添加错误 css 样式。

我的**问题**是循环只循环**3**次，然后在它应该循环**15**次时停止......我不知道为什么。

单独的循环可以正常工作，但是当我添加 if 语句时，它就变得很奇怪。

帮助。

这是我的循环

```
//add all the id's in an array. array size is 15
var drop_down=["Cars_chassis","Cars_model".....];

for (var i = 0; i < drop_down.length; i++) {
    //check if dropdown is empty
    if(document.getElementById(drop_down[i]).value == ""){

        //change the color of border 
        $('#'+drop_down[i]).css('border-color' , '#dddcdc');
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:09:19.817

我建议为这些元素中的每一个添加一个 CSS 类，而不是指定它们的 id。当一个班级可以做到这一点时，为什么要管理所有这些ID？

```
<select id="Cars_chassis" class="bordered-select"></select>
<!-- Add class to other 15 --> 
```

此时，您可以在 CSS 中为这些下拉菜单静态定义样式。

```
.bordered-select{
   border-color: #DDDCDC;
} 
```

或者使用类选择器设置元素的样式。看来您使用的是 jQuery，因此以下示例可以使用。

```
$(".bordered-select").css('border-color', '#DDDCDC'); 
```

如果您只需要突出显示没有值的那些，则以下将从匹配的元素集中删除那些没有值的元素：

```
$(".bordered-select").filter(function(){
  return $(this).val() == "";
}).css("border-color", "#DDDCDC"); 
```

**工作示例：http:** [//jsfiddle.net/v4hQz/](http://jsfiddle.net/v4hQz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:10:20.920

```
document.getElementById(drop_down[i]); //returns a HTML DOM Object

var contents = $('#' + drop_down[i]);  //returns a jQuery Object 
```

您可以尝试将 if (javascript) 替换为 if (jquery 语法)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:13:22.733

```
var drop_down=["Cars_chassis","Cars_model".....];

for (var i = 0; i < drop_down.length; i++) {
    //check if dropdown is empty
    if( $('#' + drop_down[i]).value == ""){

        //change the color of border 
        $('#'+drop_down[i]).css('border-color' , '#dddcdc');
     }
} 
```

或者你可以试试

```
var drop_down=["Cars_chassis","Cars_model".....];
var contents = $('#'  + drop_down[i]);
for (var i = 0; i < drop_down.length; i++) {
    //check if dropdown is empty

    if( $(contents[0]).value == ""){

        //change the color of border 
        $('#'+drop_down[i]).css('border-color' , '#dddcdc');
     }
} 
```

# android - Android SMSManager sendTextMessage - 我得到了sentIntent但从未得到deliveryIntent

> ID：15324977
> 
> 赞同：4
> 
> 时间：2013-03-10T17:04:42.783
> 
> 标签：android, sms

我们在 Android 上使用 SMSManager 从设备向其他人发送短信。

我们有报告称，用户没有收到我们认为已发送的 SMS，这是基于使用 Activity.RESULT_OK 调用了 sentIntent 的事实——但这似乎发生在本地 SMS 服务只是将消息排队等待发送而不一定要发送时当它真正发送时。

所以我认为我们应该使用deliveryIntent。

这里的问题是我总是得到 sentIntent 回调，但从来没有得到 deliveryIntent 回调。

有任何想法吗？代码如下，谢谢。

```
 // The intent action to be unique so that we can have multiple
        // concurrent  pending intents.
        // http://developer.android.com/reference/android/app/PendingIntent.html
        String intentAction = TAG + "-" + callbackId;  // callbackId is unique
        Intent intent = new Intent(intentAction);
        intent.putExtra("phoneNumber", phoneNumber);
        intent.putExtra("callbackId", callbackId);
        intent.putExtra("message", message);

        PendingIntent sentPI = PendingIntent.getBroadcast(
            cordova.getActivity(), 0, intent, 0);

        cordova.getActivity().registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context ctx, Intent intent) {
                String sentToPhoneNumber = intent.getStringExtra("phoneNumber");
                String callbackId = intent.getStringExtra("callbackId");
                String message = intent.getStringExtra("message");
                int resultCode = getResultCode();
                int status = -1;
                String details = "";
                logger.log(Level.INFO, TAG + " SENT intent!! to: " +
                           sentToPhoneNumber + ", resultCode: " + resultCode);
                switch (resultCode) {
                    case Activity.RESULT_OK:
                        status = 0;
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        details = "No service";
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        details = "Null PDU";
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        details = "Radio off";
                        status = 1;
                        break;
                }

                JSONObject obj = new JSONObject();
                try {
                    obj.put("status", status);
                    obj.put("details", details);
                    obj.put("phone_number", sentToPhoneNumber);
                    obj.put("message", message);
                } catch (JSONException e) {
                    throw new RuntimeException(e);
                }
                sendAsyncResultStatus(callbackId, obj);
                ctx.unregisterReceiver(this);
            }
        }, new IntentFilter(intentAction));

        // The intent action to be unique so that we can have multiple
        // concurrent  pending intents.
        // http://developer.android.com/reference/android/app/PendingIntent.html
        String deliveryIntentAction = TAG + "-Delivery-" + callbackId;
        Intent deliveryIntent = new Intent(deliveryIntentAction);
        deliveryIntent.putExtra("phoneNumber", phoneNumber);
        deliveryIntent.putExtra("callbackId", callbackId);
        deliveryIntent.putExtra("message", message);

        PendingIntent deliveryPI = PendingIntent.getBroadcast(
            cordova.getActivity(), 0, deliveryIntent, 0);

        cordova.getActivity().registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context ctx, Intent intent) {
                logger.log(Level.INFO, TAG + " DELIVERY intent YOYO!!");
                String sentToPhoneNumber = intent.getStringExtra("phoneNumber");
                String callbackId = intent.getStringExtra("callbackId");
                String message = intent.getStringExtra("message");
                String pdu = intent.getStringExtra("pdu");
                logger.log(Level.INFO, TAG + " DELIVERY intent!! to: " +
                        sentToPhoneNumber + ", pdu: " + pdu);

                JSONObject obj = new JSONObject();
                try {
                    obj.put("pdu", pdu);
                    obj.put("phone_number", sentToPhoneNumber);
                    obj.put("message", message);
                } catch (JSONException e) {
                    throw new RuntimeException(e);
                }
                sendAsyncResultStatus(callbackId, obj);
                ctx.unregisterReceiver(this);
            }
        }, new IntentFilter(deliveryIntentAction));

        smsManager.sendTextMessage(phoneNumber, null, message, sentPI, deliveryPI); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-12T21:19:17.680

DeliveryIntent 依赖于某些运营商提供的 DeliveryReports。

有些运营商确实提供 DeliveryReports，有些则不提供。运营商对 DliveryReports 的支持分为三类...

*   提供商根本不提供 DeliveryReport。
*   提供商总是提供虚假的 DeliveryReport（即使是无效号码，您也会得到 OK 报告）
*   提供商确实提供了交付报告。

复杂性并不止于此...如果您的提供商（发送提供商）确实支持交付报告，那么您将主要在向同一运营商的订阅者发送消息时获得交付报告。但是，当您在该运营商之外发送消息时，您可能会或可能不会收到递送报告。在大多数情况下，您不会。

这可能是由多种原因引起的，例如

*   目的地提供商不支持送达报告
*   一些中间 SMS 网关不支持发送报告
*   目的地运营商或某些中间网关的 DeliveryReports 与始发运营商的不兼容。

到目前为止，在这种情况下的交付报告并不是我所知道的有保证的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T13:00:29.247

我可以想象交付意图取决于退货收据的接收。网络提供商需要发送这些信息才能使您的程序正常运行。

您可以通过打开“设置菜单”，浏览到“短信设置”并勾选“回执”框来完成此操作。

# css - 如何更改自动完成输入框的文本颜色（GMaps API v3）

> ID：15324980
> 
> 赞同：0
> 
> 时间：2013-03-10T17:05:06.717
> 
> 标签：css, google-maps-api-3

我使用了关于 GMaps 的自动完成方法的初学者教程（由 Mano Marks / Google 编写）的代码。现在一切正常，但是我不知道如何更改自动完成框中建议字符串的颜色，该框中已调整为我的输入字段我想这样做，因为默认颜色似乎是白色！！？？

有人知道如何改变这种颜色！非常感谢。这是代码：

```
HTML:
Suche:<input type="text" id="autocomplete" size="40" />
......
JS:
//Autocomplete

 var acOptions = {
    types:['establishment'],

};
 var autocomplete =
new google.maps.places.Autocomplete(document.getElementById('autocomplete'),acOptions);
autocomplete.bindTo('bounds',map);
var ac_iw = new google.maps.InfoWindow();

 var ac_marker = new google.maps.Marker({
    map: map
 });

 google.maps.event.addListener(autocomplete,'place_changed',function(){
   ac_iw.close();
  var place = autocomplete.getPlace();
  if(place.geometry.viewport){
      map.fitBounds(place.geometry.viewport);
  }
  else{
      map.setCenter(place.geometry.location);
      map.setZoom(17);
  }

 ac_marker.setPosition(place.geometry.location);
 ac_iw.setContent('<strong>' + place.name + '</strong><br/>');
 ac_iw.open(map,ac_marker);
 google.maps.event.addListener(ac_marker,'click',function(){
    ac_iw.open(map,ac_marker);
  });

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:00:38.950

AFAIK 没有为建议设置特定的文本颜色。但是，您可以使用 CSS 选择器

```
.pac-container * 
```

...应用自定义样式。

# java - 在 Linux 系统上从 Java 嵌入或调用 R 的性能和易用性

> ID：15324986
> 
> 赞同：2
> 
> 时间：2013-03-10T17:05:26.950
> 
> 标签：java, r

我正在征求有关 R/Java 集成的特定用例的最新反馈：

*   在 Linux 环境（特别是 Deb/Ubuntu 和 Centos/RHEL）上将 R 和 R 库集成到基于 JVM 的应用程序（java/scala）中。

    *   在处理中等数量的数据时，哪些选项可以提供良好的性能 - 在少数到 10 GB 范围内
    *   就调用的实际 R 代码而言，哪些选项更容易调试。也就是说，如果一个 R 函数失败了，当我们从调用 java 应用程序开始时，我们如何对其进行故障排除。

简而言之，我想同时考虑性能和易用性。根据性能的相对重要性，可能不止一种解决方案是有意义的。即像 Rcaller 这样的东西更快但更原始。

历史记录：我意识到有一个类似的 SOF 问题，但它已有 15 个月的历史，而且更笼统一些。

[Java-R 集成？](https://stackoverflow.com/questions/7451716/java-r-integration)

它正在显示它的年龄：该页面上的一些链接已经过时了。我正在寻找新的信息。谢谢！

# dns - DNS debian SERVFAIL 服务器找不到，无 ping

> ID：15324990
> 
> 赞同：1
> 
> 时间：2013-03-10T17:05:39.583
> 
> 标签：dns, debian, bind, nslookup

我正在尝试在我的测试环境中创建 DNS 服务器，但我不知道绑定。我的服务器中的设置是使用谷歌搜索结果创建的。绑定开始时没有错误，但不解析我的域。我正在尝试创建一个域：**lunarinterativa.labs**以在我的解决方案中使用。

我收到此错误：

```
server can't find www.lunarinterativa.labs.lunarinterativa.labs: SERVFAIL 
```

当我执行以下命令时：

```
nslookup
> server interativa32
Default server: interativa32
Address: 172.224.116.100#53
> www.lunarinterativa.labs
Server:         interativa32
Address:        172.224.116.100#53 
```

我的内部网络设置是：

```
ip address: 172.224.116.100
netmask: 255.255.255.0
gateway: 172.224.116.254 
```

我 ping 到 interativa32.lunarinterativa.labs：没问题

```
PING interativa32.lunarinterativa.labs (172.224.116.100) 56(84) bytes of data.64 bytes from interativa32.lunarinterativa.labs (172.224.116.100): icmp_req=1 ttl=64 time=0.049 ms 
```

我 ping 到 www.interativa32.lunarinterativa.labs：是错误的

```
ping: unknown host www.interativa32.lunarinterativa.labs 
```

这是我域中设置文件的内容（文件：/etc/bind/db.lunarinterativa.labs）：

```
; -------------------------------------------------------------------
; Created by Lunar Interativa Scripts
; type: Bind9
; author: Sileno de Oliveira Brito
; since: 09 Mar 2013
; created: 10 Mar 2013
; domain: lunarinterativa.labs
; ip address: 172.224.116.100
; hostname: interativa32
; -------------------------------------------------------------------
$TTL   604800
@       IN      SOA     interativa32.lunarinterativa.labs.      root.interativa32.lunarinterativa.labs. (
                        2004111700  ; Serial
                        604800          ; Refresh
                        86400           ; Retry
                        2419200     ; Expire
                        604800 )    ; Negative Cache TTL
;
@       IN      A                               172.224.116.100

interativa32            IN      A       172.224.116.100
www                     IN      CNAME   @
ftp                     IN      CNAME   @
repo                    IN      CNAME   @
ns1                     IN      CNAME   @ 
```

这是来自我的反向域的设置文件的内容（文件：/etc/bind/db.lunarinterativa.labs）：

```
; -------------------------------------------------------------------
; Created by Lunar Interativa Scripts
; type: Bind9 Reverse
; author: Sileno de Oliveira Brito
; since: 09 Mar 2013
; created: 10 Mar 2013
; domain: lunarinterativa.labs
; reverse: 116.224.172.in-addr.arpa
; ip address: 172.224.116.100
; hostname: interativa32
; -------------------------------------------------------------------
@       IN      SOA     interativa32.lunarinterativa.labs.      root.interativa32.lunarinterativa.labs. (
                        2004111700  ; Serial
                        604800          ; Refresh
                        86400           ; Retry
                        2419200     ; Expire
                        604800 )    ; Negative Cache TTL
@       IN      NS                              ns.lunarinterativa.labs.
@       IN      A                               172.224.116.100
100     IN      PTR     interativa32.lunarinterativa.labs 
```

这是 /etc/bind/named.conf.local 中的条目

```
zone "116.224.172.in-addr.arpa" {
        type master;
        file "/etc/bind/db.116.224.172.in-addr.arpa";
};
zone "lunarinterativa.labs" {
        type master;
        file "/etc/bind/db.lunarinterativa.labs";
}; 
```

这是我的 /etc/resolv.conf

```
domain lunarinterativa.labs
search lunarinterativa.labs
nameserver 127.0.0.1 
```

这是我的 /etc/hosts

```
127.0.0.1       localhost
172.224.116.100 interativa32.lunarinterativa.labs       interativa32

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters 
```

这是我的 /etc/bind/named.conf.options

```
options {
        directory "/var/cache/bind";

        // If there is a firewall between you and nameservers you want
        // to talk to, you may need to fix the firewall to allow multiple
        // ports to talk.  See http://www.kb.cert.org/vuls/id/800113

        // If your ISP provided one or more IP addresses for stable
        // nameservers, you probably want to use them as forwarders.
        // Uncomment the following block, and insert the addresses replacing
        // the all-0's placeholder.

        forwarders {
                8.8.8.8;
        //      0.0.0.0;
                172.224.116.254;
        };

        auth-nxdomain no;    # conform to RFC1035
        listen-on port 53 { 127.0.0.1; 172.224.116.100; };
        allow-query { 127.0.0.1; 172.224.116.0/24; };
        allow-recursion { 127.0.0.1; 172.224.116.0/24; };
        allow-transfer { none; };

        listen-on-v6 { any; }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:17:56.147

错误出现在我的配置文件中，我在 web 中找到了一个脚本并查看了我的错误。

这是我域中设置文件的正确内容（文件：/etc/bind/db.lunarinterativa.labs）：

```
; -------------------------------------------------------------------
; Created by Lunar Interativa Scripts
; type: Bind9
; author: Sileno de Oliveira Brito
; credit: OLIVEIRA , Willian:CONFIGURAÃO APACHE E DNS (BIND). Viva o Linux, DisponÃ­l em: http://www.vivaolinux.com.br/script/Configuracao-Apache-e-DNS-(bind), Acesso em 10/03/2012 Ã 20h 00min
; since: 09 Mar 2013
; created: 10 Mar 2013
; domain: labs.lunarinterativa
; ip address: 172.224.116.100
; hostname: interativa32
; -------------------------------------------------------------------
$TTL   604800
@       IN      SOA     labs.lunarinterativa.   root.labs.lunarinterativa. (
                        2004111700  ; Serial
                        604800          ; Refresh
                        86400           ; Retry
                        2419200     ; Expire
                        604800 )    ; Negative Cache TTL
;
@       IN      NS                              labs.lunarinterativa.
@       IN      A                               172.224.116.100

interativa32            IN      A       172.224.116.100
www                     IN      CNAME   interativa32.labs.lunarinterativa.
ftp                     IN      CNAME   interativa32.labs.lunarinterativa.
repo                    IN      CNAME   interativa32.labs.lunarinterativa.
ns1                     IN      CNAME   interativa32.labs.lunarinterativa. 
```

这是来自我的反向域的设置文件的正确内容（文件：/etc/bind/db.lunarinterativa.labs）：

```
; -------------------------------------------------------------------
; Created by Lunar Interativa Scripts
; type: Bind9 Reverse
; author: Sileno de Oliveira Brito
; since: 09 Mar 2013
; created: 10 Mar 2013
; domain: labs.lunarinterativa
; reverse: 116.224.172.in-addr.arpa
; ip address: 172.224.116.100
; hostname: interativa32
; -------------------------------------------------------------------
@       IN      SOA     labs.lunarinterativa.   root.labs.lunarinterativa. (
                        2004111700  ; Serial
                        604800          ; Refresh
                        86400           ; Retry
                        2419200     ; Expire
                        604800 )    ; Negative Cache TTL
@       IN      NS                              labs.lunarinterativa.
@       IN      A                               172.224.116.100
100     IN      PTR     interativa32.labs.lunarinterativa. 
```

响应： nslookup 到域

```
nslookup www.labs.lunarinterativa
Server:         172.224.116.100
Address:        172.224.116.100#53 
```

nslookup 到 ip 反向：

```
nslookup 172.224.116.100
Server:         172.224.116.100
Address:        172.224.116.100#53

100.116.224.172.in-addr.arpa    name = interativa32.labs.lunarinterativa. 
```

现在 ping 正常了。

对我来说，我使用了来自[http://www.vivaolinux.com.br/script/Configuracao-Apache-e-DNS-(bind)](http://www.vivaolinux.com.br/script/Configuracao-Apache-e-DNS-(bind))的来自 Wiliam Oliveira 的脚本， 特别感谢他。您的脚本在我的环境中没有错误。

# c# - 从客户端取消通过 WCF 长时间运行的任务

> ID：15324995
> 
> 赞同：6
> 
> 时间：2013-03-10T17:06:14.400
> 
> 标签：c#, .net, wcf, nettcpbinding, long-running-processes

我将 WCF 服务设置为 PerCall

我想知道如何从客户端发送 Start 调用以启动长时间运行的进程，并发送 Cancel 命令以取消它

我的 WCF 服务看起来像这样

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
    public class Service1 : IService1
    {

        CancellationTokenSource cancelToken = new CancellationTokenSource();

        public void Start()
        {

            var compute = Task.Factory.StartNew(StartLongRunningTask, cancelToken.Token);
        }

        public void Stop()
        {

            cancelToken.Cancel();
        }

            private void StartLongRunningTask()
            {
                  //process here

            }

} 
```

我想这里的问题是，每次调用服务器时，它都会被视为一个新请求。

那么在WCF中应该如何启动和取消一个长时间运行的任务呢？

编辑：我将它作为 Windows 服务托管

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T03:46:09.253

> 我将 WCF 服务设置为 PerCall
> 
> ...这里的问题是，每次调用到达服务器时，它都被视为一个新请求。

是的，这正是你告诉它要做的事情。如果可以，只需更改为`InstanceContextMode.PerSession`; 然后你可以做你想做的事情（假设你是自托管的）。

如果你不能这样做，那么你将不得不开发一个更复杂的解决方案，就像@PeterRitchie 评论的那样。首先，您的主机：IIS 并非设计为独立于请求进行长时间运行的操作，因此我假设您是自托管的。接下来，您需要一种形式的令牌（如 GUID），它将充当长时间运行操作的标识符。您的`Start`方法将分配一个 GUID 并`CancellationTokenSource`开始操作，您的`Stop`方法将采用一个 GUID 并使用它来查找`CancellationTokenSource`和取消操作。您需要一个共享的（静态的、线程安全的）字典来充当查找。

如果您的主机*是*IIS，那么您的解决方案会变得更加复杂...... :)

首先，您需要一个不在 IIS 中托管的后端。常见的选择是 Azure 辅助角色或 Win32 服务。接下来，您将需要一个可靠的通信机制：Azure 队列、MSMQ、WebSphere 等。然后您可以构建 WCF-over-IIS 服务，让该`Start`方法生成 GUID 标识符并将消息放入队列以开始处理. 该`Stop`方法采用 GUID 并将消息放在队列中以取消处理。所有其他逻辑都转移到后端服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T05:09:12.397

根据您的询问方式，客户端似乎意识到请求的异步性质。

@StephenCleary 和@PeterRitchie 的观点非常好，但是您的第一步是重新执行您的服务/合同以正确实施异步服务，并添加将一些信息/句柄反馈回（给客户端）长期运行操作的方法。

该框架包含多个异步编程范例（已经:-)）但是当涉及到 WCF 时，您有点回退到[如何：实现异步服务操作](http://msdn.microsoft.com/en-us/library/ms731177%28v=vs.85%29.aspx)

这将提供一些基础设施，但不一定能够自动取消操作。

严格谈论取消（因为这是您的问题）：您将不得不扩展您的解决方案最终要取消的任何内容。至少你需要为你的服务“worker”添加必要的逻辑来监控和兑现取消令牌。

您可能会遇到的其他注意事项：取消返回结果；取消已成功完成的任务（在取消请求到来时，你们更新了 1,000,000 条记录）；异常处理（基于任务的编程异常不会被抛出，而是捆绑在任务中，或者您用来描述正在进行的操作的任何其他“车辆”中）。

# python - python用字符串之间的特殊字符替换空格

> ID：15324998
> 
> 赞同：0
> 
> 时间：2013-03-10T17:06:23.373
> 
> 标签：python

我想用 '#' 替换字符串之间的所有空格，字符串末尾之后的空格除外。

例子：

```
input=' hello  world    '
output = '#hello##world' 
```

我知道使用`rstrip()`我可以忽略 string 末尾的空格。我只想尝试不使用`rstrip()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:13:07.730

使用正则表达式。

```
import re
a = ' hello  world    '
a = re.sub(' +$', '', a)
output = re.sub(' ', '#', a) 
```

但实际上，这更好：

```
output = re.sub(' ', '#', a.rstrip()) 
```