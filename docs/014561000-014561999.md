# StackOverflow 问答 14561000-14561999

# c# - 删除文本文件中的行的正则表达式是什么

> ID：14561000
> 
> 赞同：0
> 
> 时间：2013-01-28T11:26:09.097
> 
> 标签：c#, regex

这是我在文本文件中的行。我想使用正则表达式从我的文本文件中删除这一行。

```
---------- RECOMMENDATION 1 OF 3 IN GROUP 1 (USD 168.90)---------- 
```

我正在尝试这段代码，但它给出了错误。

```
 StreamReader sreader = File.OpenText(@"C:\FareSearchRegex.txt");
       string line;
       while ((line = sreader.ReadLine()) != null)
       {
  var pattern = "---------- RECOMMENDATION 1 OF 3 IN GROUP 1 \(USD 168.90\)----------";

       var result = Regex.Replace(sreader,pattern," ");
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:29:23.287

正则表达式做一件事，而且只做一件事：

*它们匹配文本。*

其他所有内容（例如删除、替换、命名）都是库提供的功能，而不是正则表达式本身。

*匹配*您的行的正则表达式非常简单：

```
---------- RECOMMENDATION 1 OF 3 IN GROUP 1 \(USD 168\.90\)---------- 
```

…但是如何*删除*它取决于您使用的语言/库。由于您使用的是 C#，因此您可以使用以下[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)方法：

```
var pattern = "---------- RECOMMENDATION 1 OF 3 IN GROUP 1 \(USD 168\.90\)----------"
var result = Regex.Replace(text, pattern, ""); 
```

[`String.Replace`](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)但是由于您的模式实际上只是一个固定的字符串，因此仅使用普通方法会更高效、更简单：

```
var line = "---------- RECOMMENDATION 1 OF 3 IN GROUP 1 (USD 168.90)----------";
var result = text.Replace(line, ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:33:02.850

如果要删除确切的行，则无需使用正则表达式。通常，正则表达式用于匹配模式。不过，如果您想对此行使用正则表达式，您可以继续执行以下操作：

```
---------- RECOMMENDATION 1 OF 3 IN GROUP 1 \(USD 168.90\)---------- 
```

不要忘记添加`\`之前`(`和`)`

# asp.net - 如何让函数在 VB.net 中运行回调

> ID：14561007
> 
> 赞同：8
> 
> 时间：2013-01-28T11:26:48.690
> 
> 标签：asp.net, vb.net, callback

恐怕我一直在谷歌搜索，但找不到我理解或可以使用的答案。

在 Javascript 中，您可以运行一个函数并设置一个回调函数，该函数在第一个函数运行后调用：

```
function doThis(callBack){
    // do things
    // do things
    if(callBack){
         callBack();
    }
} 
```

通过以下方式调用：`doThis(function () { alert("done") });`

因此，在它完成操作后，它会调用一个警报来告诉你它已经完成了。

但是你如何在 VB.NET 中做同样的服务器端呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T11:30:53.070

只需创建一个以[`Action`委托](http://msdn.microsoft.com/en-us/library/system.action.aspx)为参数的方法：

```
Sub DoThis(callback as Action)

    'do this
    'do that

    If Not callback Is Nothing Then
        callback()
    End If

End Sub 
```

你可以这样称呼它

```
DoThis(Sub() Console.WriteLine("via callback!")) 
```

# php - 带有 LIKE 的 sql 查询

> ID：14561008
> 
> 赞同：1
> 
> 时间：2013-01-28T11:26:53.807
> 
> 标签：php, mysql, drupal, drupal-6, phpmyadmin

我有一个奇怪的问题，请看一下这个查询：

```
select * from myfriend where name like "%n%"; 
```

在 phpMyAdmin 上执行此查询时，查询返回了正确的结果，但是当使用 php 执行时，没有返回结果。

请注意这个查询在 drupal 6 中执行。

char“n”和PHP有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:43:07.293

百分号在 Drupal 6 查询中用作占位符，因此您需要对它们进行转义：

```
$query = db_query('select * from myfriend where name like "%%n%%"'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:48:29.057

```
$searchChar = "n";

$query = "SELECT * FROM `myfriend` WHERE `name` LIKE '%" . $searchChar . "%'"; 
```

然后`$query`在您的语句中使用该变量。

例如：

`$mysql->query($query);`

`mysql_query($query);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:39:56.510

你的查询很完美。简要介绍一下。您可以检查从 php 到 mysql 的数据库连接是否正确。您可以从 php 文件中回显该查询并运行 phpmyadmin，如果输出正确，那么肯定会出现数据库连接问题。

php 中的任何字符绝对没有问题。

# python - 如何在 Numpy 中使用数组作为自己的索引

> ID：14561012
> 
> 赞同：3
> 
> 时间：2013-01-28T11:26:57.537
> 
> 标签：python, matrix, numpy, indices

这适用于 MATLAB：

```
>> p = [1, 0, 2, 4, 3, 6, 5];
>> p(p+1)

ans = 

     0   1   2   3   4   5   6 
```

有没有办法在 NumPy 中做同样的事情？我不知道如何：

```
>>> p = mat([1, 0, 2, 4, 3, 6, 5])
>>> p[p]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\site-packages\numpy\matrixlib\defmatrix.py", line 305, in __getitem__
    out = N.ndarray.__getitem__(self, index)
IndexError: index (1) out of range (0<=index<0) in dimension 0
>>> p[:,p] 
```

此时解释器似乎进入了无限循环。这也会导致无限循环：

```
>>> [p[:,i] for i in p] 
```

但这有效：

```
>>> [p[:,i] for in range(0,6)] 
```

因此，使用矩阵成员作为它自己的索引会导致问题。这是 Python 中的错误吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:29:23.980

只有整数可以用作数组或矩阵索引。像这样初始化的矩阵的默认类型是浮点数。

您可以使用 a `numpy.array`not a `numpy.matrix`：

```
In [2]: import numpy as np
In [3]: x = np.array([1, 0, 2, 4, 3, 6, 5])
In [4]: x[x]
Out[4]: array([0, 1, 2, 3, 4, 5, 6]) 
```

或者您可以将矩阵显式更改为整数类型：

```
In [5]: x = np.matrix(x).astype(int)
In [6]: x[0, x]
Out[7]: matrix([[0, 1, 2, 3, 4, 5, 6]]) 
```

A`numpy.matrix`是专为 2D 矩阵设计的专用类。特别是，您不能使用单个整数索引 2D 矩阵，因为 - 好吧 - 它是二维的，您需要指定两个整数，因此在第二个示例中需要额外的 0 索引。

# c - 如何使用 C 生成所有可能的子序列，包括字符串的非连续子序列

> ID：14561014
> 
> 赞同：-2
> 
> 时间：2013-01-28T11:26:58.970
> 
> 标签：c, string

例如，

```
char str[20];
str="ABCD"; 
```

输出 ：

```
1 - A, B, C,D

2 -  AB,AC, AD BC, BD, CD.

3 - ABC, ABD, BCD.

4 - ABCD. 
```

*子序列*仅以从左到右的方式生成。谢谢 ：）

```
#include<stdio.h>
#include <conio.h>
#include<string.h>

 int sub[10];

void next(int max, int length) {

    int pos = length - 1,a;

    //find first digit that can be increased
while(pos >= 0)
{
    if(sub[pos] == max - (length - 1 - pos))
        pos--;

    else
        break;
}

    sub[pos]++; //increase digit

    //update other digits
    for( a = pos+1; a < length; a++)
        sub[a] = sub[a-1] + 1;

}

int main()
{
char word[100];
printf("Enter a word = ");
scanf("%s",word);

int max = strlen(word) - 1,n,i,a,b; 

for(n=1; n <= max+1; n++)
{

    printf("\n");

    for(i = 0; i < n; i++)
    {
        sub[i] = i;
    }

    for(a = 0; ; a++)
    {               
        for(b=0; b < max+1; b++)
            printf("%c",word[sub[b]]);

        printf("\n");

        if(sub[0] == max - (n - 1))
            break;

        else
            next(max, n); 
    }   

    printf("\n");

}   

return 0;
} 
```

此代码仅生成长度等于字符串长度的*子序列，并且它还重复特定字符。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:50:59.953

不是最干净，最有效的代码，但这会做：D

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

char *printForMask(int mask, char *str)
{
    int i = 0;
    int j = 0;
    char *maskedString = (char *)malloc(sizeof(char) * strlen(str) + 1); 
    for (; mask > 0; mask >>= 1, j++) {
            if (mask & 1)
                    maskedString[i++] = str[j];
    }   
    maskedString[i] = '\0';
    return maskedString;
}

int main()
{
    char str[20] = "ABCD";

    int mask = 1;
    int maskLen = 1;
    int stringLen = strlen(str);

    for (maskLen = 1; maskLen <= stringLen; maskLen++) {
            printf("%d ", maskLen);
            for (mask = (int)pow(2,maskLen) - 1; mask <= (int) pow(2, stringLen) - 1; mask <<= 1) {
                    char *temp = printForMask(mask, str);
                    printf ("%s%s", temp, (mask << 1 <= (int) pow(2, stringLen) - 1) ? ", " : "\n");
                    free(temp);
            }   
    }   
    return 0;
} 
```

**编辑**

对于字符串 ABCD

```
str[0] = 'A'
str[1] = 'B'
str[2] = 'C'
str[3] = 'D' 
```

正确的？

所以我正在做的是使用整数的二进制表示`2^strlen(str) - 1` ，在这种情况下将是`2^4 - 1 = 15 = 0b1111` 在主函数的第一个 for 循环中，我增加掩码，这意味着从 a 开始`mask = 0b0001`，对于循环的每次迭代，增加掩码到`mask = 0b1111` And 在内部 for 循环中，我移动掩码以便发生这样的事情

```
mask = 0b0001  //A
mask = 0b0010  //B
mask = 0b0100  //C
mask = 0b1000  //D
//The inner loop will finish here, and the mask length will become 2
mask = 0b0011  //AB
mask = 0b0110  //BC
mask = 0b1100  //CD
//etc.  The string representation is made by the function printForMask() 
```

# java - 在linux中设置类路径并运行jar文件使可执行文件

> ID：14561015
> 
> 赞同：0
> 
> 时间：2013-01-28T11:27:06.257
> 
> 标签：java, linux, jar, executable-jar

我正在尝试在使用 jdk7 从 windows 创建的 linux 上运行 jar 文件。我正在使用以下命令运行

```
 java -jar jarfile.jar 
```

它运行 jar 并将异常作为无法识别的类格式版本抛出。因为 linux 将 java 版本显示为 1.4.2 而我在根目录中提取了 jdk1.7 但它仍然将 java 版本显示为 1.4.2 。我必须做什么才能运行使用 jdk1.7 创建的 jar 文件。我已经在根目录中提取了linux上的java（jdk1.7）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:28:30.837

您需要在路径上指定 JDK 1.7，例如

```
$ PATH=/jdk17/bin:$PATH 
```

请注意，您不仅指定了 1.7 安装的路径，还指定了该`bin`路径`within`。

打字

```
$ which java 
```

更改后，`PATH`将确认这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:51:48.360

确保 jdk1.7 在系统变量 PATH 中的 jdk1.4.2 前面。你在你的 Linux 操作系统中安装了 oracle 吗？我在 Windows 操作系统中遇到了同样的问题，因为我安装了 oracle。如果安装了oracle之类的软件，可能会在系统变量PATH中所有其他软件路径的前面插入jdk1.4。

# javascript - jquery 从给定的选择器中选择元素

> ID：14561017
> 
> 赞同：0
> 
> 时间：2013-01-28T11:27:17.533
> 
> 标签：javascript, jquery

> **可能重复：**
> [选择子集的jQuery方法及其逆？](https://stackoverflow.com/questions/4502533/jquery-method-to-select-a-subset-and-also-its-inverse)

给定这个 javascript 代码

```
var radio_buttons = $('.search-options input[type="radio"]'); 
```

我只想从变量保存的单选按钮集合中获取选中的单选按钮。我认为 find 方法可以帮助实现这一目标，但事实并非如此。

```
radio_buttons.find('input[checked]') 
```

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:37:51.990

您应该使用[`filter`](http://api.jquery.com/filter/)方法和[`:checked`](http://api.jquery.com/checked-selector/)选择器：

```
radio_buttons.filter(":checked"). ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:27:50.827

使用**[:checked](http://api.jquery.com/checked-selector/)**仅选择选中的单选按钮。

```
var radio_buttons = $('.search-options input[type="radio"]:checked'); 
```

如果您想从变量中的集合中获取选中的单选按钮；

```
var radio_buttons = $('.search-options input[type="radio"]');
 var radio_buttons_checked = radio_buttons.find(':checked'); 
```

对于容器中的已检查收音机，

```
var radio_buttons = $('.search-options input[type="radio"]');
radio_buttons.each(function(){
     containerChecked = $(this).parent().find(':checked');
     alert(containerChecked.length);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:27:58.753

您需要使用[`:checked`](http://api.jquery.com/checked-selector/)选择器，如下所示：

```
var radio_buttons = $('.search-options input[type="radio"]:checked'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T11:28:31.603

尝试这个

```
var radio_buttons = $('.search-options input[type="radio"]:checked'); 
```

# javascript - 我堆满了 'THIS' javascript 代码

> ID：14561018
> 
> 赞同：0
> 
> 时间：2013-01-28T11:27:24.650
> 
> 标签：javascript, jquery

我有一个要在滚动结束时执行的代码。所以当我滚动“div 1”时，我想用“div2”执行代码。问题是这段代码在代码中有 .scrollLoad 和一些“this”。如果我用“div2”更改“this”，则代码不起作用。因此，当我滚动到 div1 时，我希望“this”能够识别 div2。

```
$( '#div2' ).scrollLoad({

            url : 'load_more_categ.php', //your ajax file to be loaded when scroll breaks ScrollAfterHeight
            type: 'POST',
            data : '',

            start : function() {
                $('<div class="loading"><img src="bigLoader.gif"/></div>').appendTo(this);
            // you can add your effect before loading data
            },

            ScrollAfterHeight : 95,         //this is the height in percentage after which ajax stars

            onload : function( data ) {
                $(this).append( data );

                $('.loading').remove();

            }, // this event fires on ajax success

            continueWhile : function( resp ) {
                if( $(this).children('li').length >= 100 ) { // stops when number of 'li' reaches 100
                    return false;
                }
                return true; 
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:29:09.840

因为javascript在#div2的滚动加载处理程序中被贴花，`$(this)`所以是#div2。

```
$( '#div2' ).scrollLoad({ 
```

# mysql - 实体框架代码首先在生产中使用 mysql

> ID：14561019
> 
> 赞同：1
> 
> 时间：2013-01-28T11:27:29.203
> 
> 标签：mysql, asp.net-mvc, postgresql, ef-code-first, database-performance

我首先使用 EF 代码创建一个**asp.net** * *MVC * 应用程序。*我曾使用**Sql azure**作为我的数据库。但事实证明 Sql Azure 并不可靠。所以我正在考虑使用 MySql/PostgreSQL 作为数据库。

*我想知道首先使用 EF 代码和 MySql/PostgreSQL 在性能方面的影响/影响*。有没有人在生产中使用过这个组合或认识任何使用过它的人？

**编辑**
我继续在*Sql Azure*中获得以下异常。

```
SqlException: "*A transport-level error has occurred when receiving results from the server.* 
(provider: TCP Provider, error: 0 - An existing connection was forcibly closed by the remote host.)" 
```

* * *

```
 SqlException: *"Database 'XXXXXXXXXXXXXXXX' on server 'XXXXXXXXXXXXXXXX' is not
 currently available. Please retry the connection later.* If the problem persists, contact
 customer support, and provide them the session tracing ID of '4acac87a-bfbe-4ab1-bbb6c-4b81fb315da'.
 Login failed for user 'XXXXXXXXXXXXXXXX'." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:30:39.887

首先，您的问题似乎是网络问题，可能与您的 ISP 相关。您可能想查看远程 PostgreSQL 或 MySQL 数据库，我认为您会遇到同样的问题。

其次比较 MySQL 和 PostgreSQL 的性能是比较棘手的。一般来说，MySQL 针对 pkey 查找进行了优化，而 PostgreSQL 更普遍地针对复杂的用例进行了优化。这可能有点低级，但......

MySQL InnoDB 表基本上是 btree 索引，其中叶注释包含表数据。主键是索引的键。如果没有提供主键，则会为您创建一个。这意味着两件事：

1.  `select * from my_large_table`会很慢，因为不支持物理订单扫描。

2.  `Select * from my_large_table where secondary_index_value = 2`需要两次索引遍历，因为二级索引仅引用主键值。

相反，主键值的选择将比在 PostgreSQL 上更快，因为索引包含数据。

相比之下，PostgreSQL 在一系列堆页面中以无序的方式存储信息。索引与数据是分开的。如果要通过主键拉取，则扫描索引，然后读取找到数据的数据页，然后拉取数据。相比之下，如果你从二级索引中提取，这并没有更慢。此外，这些表的结构使得在执行 long 时可以进行顺序磁盘访问，这`select * from my_large_table`将导致操作系统预读缓存能够显着提高性能。

简而言之，如果您的查询只是通过主键进行无连接选择，那么 MySQL 将为您提供更好的性能。如果你有连接等，PostgreSQL 会做得更好。

# java - Web 应用程序上下文层次结构中的 Spring bean 范围

> ID：14561029
> 
> 赞同：3
> 
> 时间：2013-01-28T11:28:15.317
> 
> 标签：java, spring, applicationcontext

我在 web.xml 文件中配置了 spring 根 web 上下文。我和这个父母也有几个孩子的背景。所有子上下文都是手动创建的：

```
 ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(new String[] {"ApplicationContext/beans.xml"}, rootApplicationContext); 
```

我想在这个子上下文中管理会话和请求范围内的 bean。

如何正确创建和配置子上下文以使它们能够处理 Web 应用程序范围？

现在我在尝试自动装配会话范围 bean 时出现以下错误（显然）：

```
java.lang.IllegalStateException: No Scope registered for scope 'session' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:07:55.907

你遇到的问题是

> session-scope ：将单个 bean 定义限定为 HTTP 会话的生命周期。仅在**Web 感知 Spring ApplicationContext**的上下文中有效。

而且你`ClassPathXmlApplicationContext`的不是*网络感知的*。

我建议你去`GenericWebApplicationContext`而不是`ClassPathXmlApplicationContext`

你可以尝试这样的事情：

```
GenericWebApplicationContext context = new GenericWebApplicationContext(servletContext);
context.setParent(rootApplicationContext);
XmlBeanDefinitionReader xmlReader = new XmlBeanDefinitionReader(context);
xmlReader.loadBeanDefinitions(new ClassPathResource("ApplicationContext/beans.xml"));
context.refresh(); 
```

Spring javadoc 是有用的来源：

*   [通用应用程序上下文](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/GenericApplicationContext.html)

# c++ - 为 Metro 应用程序实施 directx IMFmediaEngineProtectedContent 时遇到问题

> ID：14561033
> 
> 赞同：1
> 
> 时间：2013-01-28T11:28:35.897
> 
> 标签：c++, microsoft-metro, directx, ms-media-foundation

我正在`IMFmediaEngineProtectedContent`为 Metro 应用程序（**win store 应用程序**）实现接口，并且在尝试实现此功能时感到困惑：

```
HRESULT SetOPMWindow(
  [in]  HWND hwnd
); 
```

据我了解，`HWND`属于 win **MFC**，但我需要将它用于 Metro 窗口（CoreWindow）。 [IMF API](http://msdn.microsoft.com/en-us/library/windows/desktop/hh447968%28v=vs.85%29.aspx)声明它支持 Windows 应用商店应用程序。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:33:25.777

HWND 不是特定于 MFC 的，它只是窗口的句柄。 [该站点](http://kennykerr.ca/2012/11/09/windows-8-whered-you-put-my-hwnd/)有一个很好的文档，介绍了如何获取 Windows 商店应用程序的句柄。

使用此信息，您可以从 CoreWindow 查询句柄。

# tinymce - 微型 MCE 换行符

> ID：14561034
> 
> 赞同：1
> 
> 时间：2013-01-28T11:28:36.143
> 
> 标签：tinymce

我正在使用具有以下设置的小 mce (3.4.7)

```
forced_root_block: 'p',
force_br_newlines: true,
force_p_newlines: false,
convert_newlines_to_brs: true 
```

例如，当我输入一些很棒的内容时，然后按 Enter 工作，chrome 中产生`<p>great<br>work</p>`的输出与在 Firefox 上不起作用的相同设置相同，Firefox 中的输出`great<br>work`缺少根块。

我需要做什么才能让 Firefox 呈现根节点？

# jquery - jquery Datatables - 我如何放入删除链接？

> ID：14561036
> 
> 赞同：0
> 
> 时间：2013-01-28T11:28:39.963
> 
> 标签：jquery, datatables

另一个问题已经被问到了，[jQuery Datatables: how to delete the row](https://stackoverflow.com/questions/10214307/jquery-datatables-how-to-delete-the-row)，但我正在努力让语法正确。

我应该做什么而不是创建如下按钮？

```
 var otable = $('#tradeList').dataTable({
        "bServerSide": true,
        "sAjaxSource": serverDataSource,
        "bProcessing": true,
        "bLengthChange": false,
        "iDisplayLength": "15",

        "bPaginate": true,
        "sPaginationType": "full_numbers",
        "aoColumns": [
                     {
                         "sName": "ID",
                         "bSearchable": false,
                         "bSortable": false,
                         "bVisible": false
                     },
                     { "sName": "TRADENAME" },
                    {
                        "sName": "TRADEID",
                        "bSearchable": false,
                        "bSortable": false,
                        "fnRender": function (oObj) {
                            // oObj.aData[2] returns the TradeId
                            if (oObj.aData[2] == "0")
                                //return "<a href='" + deleteUrl + "?id=" + oObj.aData[2] + "'>Delete</a>";
                                return "<button onclick=" + dataService.deleteTrade(oObj.aData[2], fnDraw, deleteUrl ) + ")>";
                            else
                                return "";
                        }
                    }
            ]
        }).makeEditable({
        sUpdateURL: updateUrl,
        sAddURL: addUrl,
        sDeleteURL: deleteUrl
    }); 
```

# haskell - 添加类型级自然数

> ID：14561041
> 
> 赞同：6
> 
> 时间：2013-01-28T11:29:02.117
> 
> 标签：haskell, dependent-type

我认为，不可能只在 haskell 中添加两个类型级别的自然数。这是真的？

假设自然数定义如下：

```
class HNat a

data HZero
instance HNat HZero

data HSucc n
instance (HNat n) => HNat (HSucc n) 
```

以类似于以下方式定义 HAdd 是否可行：

```
class (HNat n1, HNat n2, HNat ne) => HAdd n1 n2 ne | n1 n2 -> ne
instance             HAdd HZero HZero HZero
instance (HNat x) => HAdd HZero x     x
instance (HNat n1 
         ,HNat x) => HAdd (HSucc n1)  x (HAdd n1 (HSucc x) (???)) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-28T13:10:14.317

您不需要添加`HZero`and的案例`HZero`。第二种情况已经涵盖了这一点。通过对第一个参数的归纳，想想如何在术语级别添加 Peano naturals：

```
 data Nat = Zero | Succ Nat

 add :: Nat -> Nat -> Nat
 add Zero     y = y
 add (Succ x) y = Succ (add x y) 
```

现在，如果您正在使用函数依赖项，那么您正在编写一个逻辑程序。因此，不是在右侧进行递归调用，而是在左侧为递归调用的结果添加一个约束：

```
 class (HNat x, HNat y, HNat r) => HAdd x y r | x y -> r
 instance (HNat y)     => HAdd HZero     y y
 instance (HAdd x y r) => HAdd (HSucc x) y (HSucc r) 
```

在第二种情况下，您不需要`HNat`约束。它们被类的超类约束所暗示。

这些天来，我认为进行这种类型级编程的最好方法是使用`DataKinds`and `TypeFamilies`. 您就像在术语级别上定义的那样：

```
 data Nat = Zero | Succ Nat 
```

然后，您`Nat`不仅可以将其用作 type ，还可以用作*kind*。然后，您可以定义一个类型族以对两个自然数进行加法，如下所示：

```
 type family Add (x :: Nat) (y :: Nat) :: Nat
 type instance Add Zero     y = y
 type instance Add (Succ x) y = Succ (Add x y) 
```

这更接近于术语级别的加法定义。此外，使用“promoted”类型`Nat`可以让您不必定义一个类，例如`HNat`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T12:00:28.980

有可能的。看看包装`type-level-natural-number`和``type-level-natural-number-operations`. 两者都有点老，但易于使用，后者定义了一个`Plus`类型族。

无论如何，我会将您的最后一行更改为这样的内容（我没有测试它是否可以编译）。

```
instance (HNat n1, HNat x, HAdd n1 x y) => HAdd (HSucc n1) x (HAdd n1 x (HSucc y)) 
```

基本上，您所做的就是以归纳方式定义加法，并且附加约束`HAdd n1 x y`添加必要的归纳情况。

# android - 如何将从 google places api 获得的值传递给另一个活动？

> ID：14561045
> 
> 赞同：2
> 
> 时间：2013-01-28T11:29:10.923
> 
> 标签：android, android-intent, google-places-api

嗨，我已经使用 google places api 开发了一个应用程序。它显示附近的百货公司。

现在，当我单击它时，我需要将商店的名称传递给另一个活动。

谁能告诉我怎么做我搜索了网络并没有找到很多解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:37:32.850

尝试这个，

```
Intent i = new Intent(FirstActivity.class,Second.class);
i.putExtra("name",selected_store_name);
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:57:28.880

您的意图值没有传递给其他活动，即空指针异常，或者您没有在活动中获取值

# java - 调用 Querydsl 读取数据库表并生成 Java 类

> ID：14561048
> 
> 赞同：2
> 
> 时间：2013-01-28T11:29:17.467
> 
> 标签：java, oracle, querydsl

我使用 oracle 数据库，我需要调用 Querydsl 来读取数据库表并生成**Java 类**。我不明白该怎么做，如下所示

```
java.sql.Connection conn = ...;
MetaDataExporter exporter = newMetaDataExporter();
exporter.setPackageName("com.myproject.mydomain");
exporter.setTargetFolder(newFile("src/main/java"));
exporter.export(conn.getMetaData()); 
```

那么该怎么做呢？谢谢

# java - HttpDelete 中的 setEntity

> ID：14561049
> 
> 赞同：9
> 
> 时间：2013-01-28T11:29:18.800
> 
> 标签：java, android

HttpDelete 是否包含像 setEntity()、HttpPost 或 HttpPut 这样的方法？当我使用 HttpPost 时，我会执行以下操作：

```
httppost.setEntity(new UrlEncodedFormEntity(
    getNameValuePairsForFriends(context, friendID))); 
```

如何使用删除来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:34:57.053

我不相信 HTTP DELETE 需要输入 - 我相信它就像一个 GET 变体。

HTTP Client 提供的实现似乎也支持这个猜想。

如果您希望提供带有正文的删除，您/可能/想要考虑使用 POST 到接受正文的位置。

但是在回答您的问题时，不，删除不接受正文。您可以添加查询参数，但不能添加正文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-22T10:42:52.297

```
class MyDelete extends HttpPost
{
    public MyDelete(String url){
        super(url);
    }
    @Override
    public String getMethod() {
        return "DELETE";
    }
} 
```

让您的班级在那里扩展 http delete 班级，并在发送实体的班级对象期间，您将能够在 httpdelete 中发布数据

```
HttpResponse httpResponse;
String result = null;
HttpClient httpClient = new DefaultHttpClient();

HttpConnectionParams
        .setConnectionTimeout(httpClient.getParams(), 10000);

MyDelete httpDelete = new MyDelete(urlUnfollowPatientBundle);
StringEntity entity = null;
try {
    entity = new StringEntity(rawData);
    httpDelete.setEntity(entity);
} catch (UnsupportedEncodingException e) {
    e.printStackTrace();
}

try {

    httpResponse = httpClient.execute(httpDelete);
    if (httpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
        HttpEntity httpEntity = httpResponse.getEntity();
        result = EntityUtils.toString(httpEntity);
        status = true;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T11:35:25.520

HTTPDelete 不会携带任何有效负载。

HttpDelete 只会删除要删除的 uri/url 并向所述资源发出 DELETE HTTP Header。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-13T15:15:39.383

在 Scala 中，以下代码适用于我通过 HTTP DELETE 发送正文

```
import org.apache.http.client.methods.HttpEntityEnclosingRequestBase
import java.net.URI

class HttpDeleteWithBody(uri: URI) extends HttpEntityEnclosingRequestBase {
  val METHOD_NAME: String = "DELETE"
  def getMethod: String = METHOD_NAME
  super.setURI(uri)
  setURI(uri)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-28T09:34:25.430

试试这个，只需扩展 HttpDelete：

类 HttpDeleteWithBody 扩展 HttpDelete {

```
private HttpEntity entity;

public HttpDeleteWithBody(String url) {
    super(url);
}

public HttpEntity getEntity() {
    return this.entity;
}

public void setEntity(final HttpEntity entity) {
    this.entity = entity;
} 
```

}

# axapta - AX 2012 供应商预付款过帐

> ID：14561050
> 
> 赞同：3
> 
> 时间：2013-01-28T11:29:23.287
> 
> 标签：axapta, dynamics-ax-2012, x++

AX 2012 中有一个称为供应商预付款的新功能。它基本上允许公司在收到任何货物之前预付款给供应商。这在 AX 2009 中不存在。因此，用户基本上可以将预付款记录附加到采购订单，然后过帐称为预付款发票的内容。当货物最终到达时，此预付款发票将应用于“真实”供应商发票并结算。它非常简单，我想是合乎逻辑的。

我的要求是通过 X++ 中的代码过帐此预付款发票。

如果我尝试使用下面的 PurchFormLetter 类，它将发布真实发票，这在预付款的情况下是不正确的，没有库存交易。

```
purchFormLetter = PurchFormLetter::construct(DocumentStatus::Invoice);
purchFormLetter.update(purchTable,
                       '8001',
                       systemDateGet(),
                       PurchUpdate::All,
                       AccountOrder::None,
                       NoYes::No,
                       NoYes::Yes); 
```

我在 AX 开发指南、谷歌、博客上四处寻找，但没有任何帮助。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-20T13:06:08.120

我相信您应该研究 PurchPrepayTable 表逻辑和 PurchPrepayTable 表格。如果您对单个采购订单使用单个预付款，那么您可以使用 PurchPrepayTable.PurchTable 将预付款与购买链接。如果您愿意通过调用 X++ 代码来实现这一点，我建议：

*   检查采购订单是否存在任何 PurchPrepayTable；
*   如果是 - 更新它（请确保在此之前运行所有验证）；
*   如果没有 - 创建一个新的预付款（请参阅 PurchPrepayTable 表方法以确保您在预付款中的值通过所有验证）。

# css - 如何仅在 link_to 链接的一部分上更改 css？

> ID：14561054
> 
> 赞同：0
> 
> 时间：2013-01-28T11:29:28.530
> 
> 标签：css, ruby-on-rails

如果我有 a `<%= link_to "BlueBottles" %>`，我如何只更改其中一部分的 CSS，例如，将前四个字母变为蓝色？

单独的链接看起来不正确，恐怕我在正确的方法上做得不够。提前感谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:37:24.777

由于您使用的是 Rails 助手，因此您将拥有类似这样的内容（请记住替换`your_path`为适当的 Rails 路线）：

```
<%= link_to content_tag(:b, 'Blue') + 'Bottles', your_path %> 
```

然后是你的 CSS，就像在 Bastian Rang 的回答中一样：

```
a > b {
  color: blue;
} 
```

编辑：更改`:em`为`:b`按照 Bastian Rang 的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:33:48.137

如果您点击以下链接

```
<a href="http://www.stackoverflow.com">BlueBottles</a> 
```

您可以将其更改为

```
<a href="http://www.stackoverflow.com"><b>Blue</b>Bottles</a> 
```

和`a > b {color:blue}`CSS 中的样式

代替 B 元素，您可以使用`em`,`strong`甚至`i`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:31:17.187

有一个块形式`link_to`，我认为这是您想要使用它的情况：

```
<%= link_to your_path do %>
  <span class='special_anchor_part'>Blue</span>Bottles
<% end %> 
```

然后 css ：

```
.special_anchor_part{ color:blue; } 
```

# linq - 转换为值类型“十进制”失败，因为具体化值为 null

> ID：14561055
> 
> 赞同：0
> 
> 时间：2013-01-28T11:29:34.007
> 
> 标签：linq, linq-method-syntax

我有以下代码：

```
 public ViewResult Stock(Guid id)
    {
        // Get the product form the database
        var product = productRepository.GetById(id);

        var viewModel = new ProductStockViewModel()
        {
            Product = product,
            ProductStoreStock = storeDB.Stores.Select(store => new ProductStoreStockViewModel()
            {
                Store = store,
                Bought = storeDB.Stocks
                    .Where(s => s.StoreId == store.StoreId)
                    .Where(p => p.ProductId == product.ProductId)
                    .Sum(s => s.Quantity),
                Sold = storeDB.OrderDetails
                    .Where(o => o.Order.StoreId == store.StoreId)
                    .Where(o => o.ProductId == product.ProductId)
                    .Sum(s => s.Quantity)
            })
            .ToList()
        };

        return View(viewModel);
    }

public class ProductStoreStockViewModel
{
    public Store Store { get; set; }
    //public Product Product { get; set; }

    public decimal Bought = 0;
    public decimal Sold = 0;

    public decimal Stock
    {
        get { return Bought - Sold; }
    }
} 
```

我理解错误，有时产品已售出 0 次，因此 .Sum(s => s.Quantity) 返回空值。我知道我可以使用？？0 如果满足该条件，但在 Linq 方法语法中表达该条件的最优雅方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:10:30.690

您的问题可能是“storeDB.Stocks”为空或“storeDB.OrderDetails”为空（但在这里你会得到空执行）。以其他方式，您可以在查询中删除 1 where 以获得更优雅的代码，如下所示

```
Sold = storeDB.OrderDetails
                .Where(o => o.Order.StoreId == store.StoreId && o.ProductId == product.ProductId)
                .Sum(s => s.Quantity) 
```

正如 Cédric Bignon 所说，如果查询为空但不为空，则“已售出”将为“0”。

# ajax - 使用 jquery 和 ajax 从 php 返回数据

> ID：14561059
> 
> 赞同：0
> 
> 时间：2013-01-28T11:29:41.477
> 
> 标签：ajax, forms, request, call

我有个问题。

我正在向 php 文件发出 Ajax 请求。我想在页面中显示结果，但我不能。也许我做错了什么。

这是代码：

```
<script type="text/javascript">
$(document).ready(function() {

    $("#submit_your_name").click(function() {

        $.ajaxSetup({
            cache: false
        });

        var name = $("#your_name").val();
        var data = 'your_name=' + name;

        if(name) {
            $.ajax({
                type: "POST",
                aSync: false,
                url: "1.php",
                data: data,
                success: function(data) {
                    $("#get_name").fadeOut();
                    $("#page_1").fadeIn();
                }
            });
        }

        return false;
    });
}); 
```

接着：

```
<div id="page_1" class="page_common" style="display: none;">

<p>Hello //I want to display the name here... , what are you after?</p> 
```

我能做些什么？有任何想法吗？？？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:28:04.927

首先`aSync: false,`从您的 ajax 函数中删除。毕竟你是在做一个异步调用。

如果没有任何问题，您将`div` `#page_1`包含您的流程文件`1.php`告诉它包含的内容。（确保你是`echoing`想要的结果。）

# python - 在python中走一个绑定的目录树

> ID：14561061
> 
> 赞同：1
> 
> 时间：2013-01-28T11:29:47.840
> 
> 标签：python, tree, directory

我想用 python 遍历目录树。我找到了这个解决方案。

```
def createIndex():
    fpath=open('config/path.conf','r')
    path=fpath.readline()
    indexstr=''
    for dirname, dirnames, filenames in os.walk(path,True,None,True):
        indexstr = indexstr + 'directory : ' + dirname + '\n'
        for subdirname in dirnames:
            indexstr = indexstr + 'subdirectory :' + subdirname + '\n'
            for filename in filenames:
                indexstr = indexstr + 'file : ' + filename + '\n'
    return indexstr 
```

它在我的计算机和本地测试上运行良好。但我的目标是在远程服务器上做同样的事情。问题是，在远程服务器上，我要遍历的目录树不是目录。我在这台服务器（NAS synology）上做了一个 chroot 和一个 debootstrap。我只能在debian下使用python。但是我要走的目录树在 DSM 下。所以我这样做了`mount -o bind /volume1/music $CHROOT/music` 如果我`ls`在我的 debian 下做了一个，我会看到目录，但是使用 python 的 os.walk 它不起作用。即使使用 followlinks = true （os.walk 的最后一个参数）。

有人有想法吗？

编辑：我发现了问题，它来自`fpath=open('config/path.conf','r') path=fpath.readline()`路径值是 '../music_vibration\n' 而不是 '../music_vibration'

抱歉这个垃圾错误，感谢您的关注

# ios - 使用 Facebook iOS SDK 获取应用访问令牌

> ID：14561063
> 
> 赞同：0
> 
> 时间：2013-01-28T11:29:49.760
> 
> 标签：ios, facebook

我正在尝试获取 Facebook 应用访问令牌以获取 Facebook 页面提要。如果我发送这样的请求：`[NSURLRequest requestWithURL:[NSURL URLWithString:@"https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=client_credentials"]`我得到了一个有效的访问令牌，但我不能在 FBSession 中使用这个，因为 accessToken 属性是只读的。所以问题是：如何使用 FBSession 获取 Facebook 应用访问令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T06:35:09.183

如果您成功登录，那么您可以使用

```
[[FBSession activeSession] accessToken]; 
```

谢谢。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-26T20:14:21.160

查看 Scrumptious 示例以及 Facebook 提供的其他内容。

我做了我的喜欢：

`[FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:YES completionHandler: ^(FBSession *session, FBSessionState state, NSError *error) { [self sessionStateChanged:session state:state error:error]; }];`

# c++ - Eigen 中的内存是如何布局的？

> ID：14561064
> 
> 赞同：0
> 
> 时间：2013-01-28T11:29:52.893
> 
> 标签：c++, arguments, eigen

我编写了这个从文本文件中读取一些数字的小解析器。

```
 data.resize(7,datapoints); //Eigen::Matrix<float,7,-1> & data
    dst = data.data();

    while( fgets(buf,255,fp) != 0 && i/7 < datapoints)
    {

        int n = sscanf(buf,"%f \t%f \t%f \t%f \t%f \t%f \t%f",dst+i++, dst+i++,dst+i++,dst+i++,dst+i++,dst+i++,dst+i++);
            i = i - 7 * (n<=0);
    }
    fclose(fp);
    return !(datapoints == i/7); 
```

问题是，当我对它翻转的数据执行 std::cout 时。

数据在：

```
0   4   0.35763609  0.64077979  0   0   1
0   4   0.36267641  0.68243247  1   0   2
0   4   0.37477320  0.72945964  2   1   3 
```

data.col(3) 是

```
0.64077979  
0.68243247  
0.72945964 
```

和 data.col(4) 是

```
0.35763609  
0.36267641  
0.37477320 
```

我看不出它为什么水平翻转数据的逻辑？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T11:43:12.347

为了说明问题：

```
#include <cstdio>

void f(int i, int j, int k)
{
  printf("i = %d\tj = %d\tk = %d\n", i, j, k);
}

int main()
{
  int i=0;
  f(i++, i++, i++);
} 
```

执行此操作，返回此处（Cygwin 上的 g++ 4.3.4）：

```
i = 2   j = 1   k = 0 
```

`i++`函数调用内部调用的执行顺序完全由实现定义（即任意）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T11:36:31.527

你确定比？

```
int i=0;
sscanf(buf,"%f \t%f \t%f \t%f \t%f \t%f \t%f",dst+i++, dst+i++,dst+i++,dst+i++,dst+i++,dst+i++,dst+i++); 
```

等于：

```
sscanf(buf,"%f \t%f \t%f \t%f \t%f \t%f \t%f",dst+0,dst+1,dst+2,dst+3,dst+4,dst+5,dst+6 ); 
```

我认为在这种情况下，变量列表 arg 正在被重新评估，并且正如@Christian Rau 评论一般是未定义的评估顺序。经常考虑副作用顺序并不是一个好主意。

# git - 对 repo 的所有克隆强制执行 --recurse-submodules=on-demand

> ID：14561065
> 
> 赞同：3
> 
> 时间：2013-01-28T11:29:56.160
> 
> 标签：git, git-submodules

给定一个包含多个子模块的 Git 存储库。
有没有办法强制该存储库的所有客户端（读取*克隆*）使用`--recurse-submodules=on-demand`推送提交的选项？我不想让用户手动将该标志添加到每个`git push`.

除此之外，我还将在服务器上设置一个更新挂钩来强制执行此策略，但仅此一项就会使用户`--recurse-submodules=on-demand`每次推送提交时都必须输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:44:02.967

还没有：该[补丁](http://comments.gmane.org/gmane.comp.version-control.git/177992)`push.recurseSubmodules`中提出的配置“”没有通过。 即使有，这也意味着每个用户都需要配置他/她的克隆。

唯一的其他解决方案是定义一个别名（如“ [git - default push to`--recurse-submodules=check`](https://stackoverflow.com/questions/12681936/git-default-push-to-recurse-submodules-check) ”）。
同样，这是一个针对每个用户的解决方案（很难将该设置从一个中央存储库传播到它的所有克隆）。

# java - Java Applet 中的 StringBuffer 到 String

> ID：14561068
> 
> 赞同：0
> 
> 时间：2013-01-28T11:30:02.850
> 
> 标签：java, string, applet, stringbuffer

我有以下 Java Applet 的源代码：

```
package m2mcom.web;
import m2mcom.entities.AutomatedTelnetClient;
import javax.swing.JApplet;
import javax.swing.SwingUtilities;
import javax.swing.JLabel;

public class Displaytext extends JApplet {

public void init() {
    try {
        AutomatedTelnetClient telnetClient = new AutomatedTelnetClient();
        telnetClient.connect();

        StringBuffer text = telnetClient.sendCommand("display gps");
        telnetClient.disconnect();

        //String answer = "Testing";
        String answer = text.toString();
        JLabel lbl = new JLabel(answer);
        getContentPane().add(lbl);

    } catch (Exception e) {
        System.err.println("createGUI didn't complete successfully");
    }
}
} 
```

当我执行 .html 文件时，我只得到一个空屏幕。但是，如果我将普通字符串插入 JLabel（“Testing”）而不是将 StringBuffer 转换为 String，我会在屏幕中看到“Testing”一词。我也检查过，StringBuffer 文本变量有对应的 telnetClient.sendCommand() 方法的返回值。以下代码完美运行：

```
package m2mcom.web;
import m2mcom.entities.AutomatedTelnetClient;
import java.util.*;
import java.io.*;

public class Simple {

public static void main(String [] args) {
    try {
        AutomatedTelnetClient telnetClient = new AutomatedTelnetClient();
        telnetClient.connect();

        StringBuffer text = telnetClient.sendCommand("display gps");
        telnetClient.disconnect();
        System.out.println(text.toString());
    } catch (Exception e) {
        System.err.println("Error");
    }
}
} 
```

为什么会这样？这与我在 Applet 的方法 init() 中的事实有关吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:33:38.170

我怀疑您的 telnet 客户端库需要以某种方式刷新接收到的输出`sendCommand()`。目前看起来你`StringBuffer`是空的。

这与在小程序等中运行无关（除非 telnet 库*本身*存在受小程序约束的问题，这总是可能的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:41:44.150

我不能 100% 确定您的 AutomatedTelnetLibrary 是什么，但我在[Google 代码](http://code.google.com/p/meteorafhd/source/browse/trunk/deployServer/src/main/java/com/deployServer/util/AutomatedTelnetClient.java?r=1421)中找到了一个似乎与您的格式相匹配的内容。如果这不是您使用的，请发布您使用的。

```
 public String sendCommand(String command) {
            try {
                    write(command);
                    return readUntil(prompt + " ");
            }
            catch (Exception e) {
                    e.printStackTrace();
            }
            return null;
    } 
```

底线是，sendCommand 返回一个字符串，您将其设置为未初始化的 StringBuffer。结果，我认为您的 StringBuffer 初始化不正确。我真的很惊讶这段代码可以编译......试试这个：

```
StringBuffer text = new StringBuffer(telnetClient.sendCommand("display gps")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:37:38.170

在 init() 方法中使用远程调用的命令不好，查看小程序后试试这个，最好在线程上。

```
new Runnabled(){
public void run(){ 
     //call your method here 
  } 
} 
```

# .net - 如何使用 c# 读取 tf.exe 安装路径

> ID：14561069
> 
> 赞同：0
> 
> 时间：2013-01-28T11:30:04.190
> 
> 标签：.net

我想使用 c# 从我的计算机中读取已安装的 tfs 文件路径。请给我建议。

注意：如果 tfs 安装在 c:\program files\ms\tools 中。我必须通过提供像 tf.exe 这样的文件名，使用 c# 编程从应用程序中动态读取此路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:42:03.807

`TF.exe`作为 VS 的一部分安装，或者至少是 VS shell（如果 TF Explorer 独立安装）。

因此，一旦确定了 VS 的安装路径，就可以附加相对路径`Common7\IDE\TF.exe`。

一个选项（这当然适用于完整的 VS 安装，我假设适用于 VS shell 的 TF Explorer 版本）是环境变量：

```
名称 值
---- -----
VS90COMNTOOLS                   *Visual Studio 2008 安装文件夹*\Common7\Tools\
VS100COMNTOOLS                  *Visual Studio 2010 安装文件夹*\Common7\Tools\
VS110COMNTOOLS                  *Visual Studio 2012 安装文件夹*\Common7\Tools\

```

这已经是正确的文件夹（并且此环境变量具有适当的版本号，至少从 VS2002 开始就已经存在，但 VS2008 是 TFS 最早需要的）。

`tf.exe`（注意这些现在是一个独立的TFS客户端对象模型安装程序，但我怀疑不包括否则安装。）

# oracle - 此处显示的 SQL 中只有一个错误。“emp”表中不存在“dept”列。为什么 Oracle 以不同的方式通知此错误？

> ID：14561070
> 
> 赞同：2
> 
> 时间：2013-01-28T07:08:58.447
> 
> 标签：oracle

仔细阅读下面显示的**两条错误消息。**

第一条错误消息说，

```
ERROR at line 1:

ORA-00904: "DEPT": invalid identifier 
```

第二条错误消息说，

```
ERROR at line 1:

ORA-00904: "LOC": invalid identifier 
```

以下是我的陈述：

```
SQL> select ename, deptno from emp;

ENAME          DEPTNO
---------- ----------
SMITH                20
ALLEN                30
WARD                 30
......

14 rows selected.

SQL> select ename, loc, dept from emp;

select ename, loc, dept from emp
                   *
ERROR at line 1:

ORA-00904: "DEPT": invalid identifier

SQL> select ename, dept, loc from emp;

select ename, dept, loc from emp
                    *
ERROR at line 1:

ORA-00904: "LOC": invalid identifier 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:39:38.080

好吧，您似乎正在尝试使用两个不存在的列。Oracle sql 解析器显然设计为只报告一个错误。当面对包含多个错误的输入时，它可能只报告它遇到的第一个错误……或者可能是最后一个错误。由于您的两个输入 SQL 语句以不同的顺序提及不正确的名称，这将影响 SQL 解析器查找错误的顺序。

但这没关系。两条错误消息都是正确的。

# html - 使用 ajax 将数据从 Codeigniter 控制器传递到 div

> ID：14561078
> 
> 赞同：3
> 
> 时间：2013-01-28T11:30:26.777
> 
> 标签：html, jquery, view, codeigniter-2

我正在尝试做一个简单的脚本，在该脚本中对控制器进行 ajax 调用，并将其结果打印在 div 中。

AJAX

```
 $('#search-bar-button').click(function(){
       var search_data=$('#search-bar').val();         
       $.ajax({
            url: "<?php echo base_url('search/ajax') ?>",
            type: 'POST',
            data: "data="+search_data,
            dataType: "html",
            success: function(msg) {                    
                $('#result').html(msg);
            }
       });             
       event.preventDefault();             
       //return false;          
  }); 
```

控制器 AJAX 功能 /application/controller/search.php

```
 public function ajax()
     {
    //$this->load->library('filtri');

    $data=$this->input->post('search_data');
    echo "<p>result= ".$data."</p>";
     } 
```

看法

```
 <div class="span7">
 <?php echo form_open('validation/ricerca'); ?>
      <?php echo form_input(array('id'=>'search-bar');?>
     <?php echo form_submit(array('value'=>'Search','id'=>'search-bar-button'));?>
  <?php echo form_close(); ?>
   </div>
  <div class="well" id="result"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:36:24.940

请检查您的数据变量。您正在阅读“search_data”而不是“数据”。在你的控制器 ajax 函数中使用 $this->input->post('data')。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:12:59.460

这是你可以做的

```
public function ajax()
{
    //$this->load->library('filtri');
    $data   =   $this->input->post('data');
    echo "<p>result= ".$data."</p>";
} 
```

# eclipse - 使用 Eclipse 集成 EJB 和 OSGI？

> ID：14561080
> 
> 赞同：-3
> 
> 时间：2013-01-28T11:30:36.610
> 
> 标签：eclipse, osgi, osgi-bundle

我想使用 Eclipse 将一些 EJB 模块与 OSGI 框架集成。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:56:07.550

我看到了两种解决方案：

1.  将 EJB 客户端 jar 安装为包，并从 OSGi 使用它们来访问 EJB。如果客户端 jar 还不是捆绑包，您可以使用 maven 捆绑包插件为它们创建捆绑包。
2.  在服务器端将 EJB 发布为 Web 服务，并在客户端使用 JAXWS/JAXB 访问服务

# jquery - 带有单选按钮的 jQuery textarea 验证

> ID：14561085
> 
> 赞同：1
> 
> 时间：2013-01-28T11:30:43.380
> 
> 标签：jquery, validation

我正在开发一个调查系统。

表答案：字段：`id, answer, answer_value, valdt.`

如果 answer=（请在评论框中指定时间）我将值放在 valdt=1 中，否则为 0。

无论测量员单击此单选按钮，评论框文本都是必需的。

我的单选按钮代码是

```
$n1=$db->get_results("SELECT * FROM question where client='$client' and  status='1' order by `id`");

 foreach($n1 as $n2)
{
$s1=$db->get_results("SELECT * FROM answer where qid='$n2->id' ");
foreach($1 as $s2)
{
<input type="radio" name='ans[<?php echo $s2->id?>]' value="<?php echo $s2->id?>" validate="required:true" />
}
Comments:<textarea rows="5" cols="30" name="cmnt[<?php echo $n2->id?>]" ></textarea>
} 
```

我想验证用户是否单击单选按钮（ valdt=1 ），那么应该需要相应的评论框文本，否则不需要。

我试图解决这个问题，但警告消息触发但不会验证评论字段我将代码放在验证字段中但它不会工作

```
$(document).ready(function() {
$("#form1").validate();
function getNum(element, attrPrefix) {
var prefix = attrPrefix;
var num = element.attr("id").substring((prefix.length));
return num;
}
$(":radio").change(function() {
var num = getNum($(this), "r_");
if ($("#r_"+num).not(":checked")) {
alert(' Please Enter the comment in comment box ');
} else {
alert(' Please Enter Comment in Comment Box ');
return false;
}
return true;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:08:09.520

您的页面使用[http://jquery.bassistance.de/validate/demo/](http://jquery.bassistance.de/validate/demo/)验证，我使用了这个示例：

```
<input class="comment_check" name="check[116]" type="checkbox"> please check 
for comment<br>
<textarea cols="55" name="nn[116]" rows="5" validate="required:'input[name=check[116]]:checked'"></textarea> 
```

它对我有用，您可以像其他字段一样打印此复选框

```
<input class="comment_check" name="check[<?php echo $n2->id?>]" type="checkbox" value="<?php echo $n2->id?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:30:48.790

[这是一个使用jQuery Validate 插件](http://docs.jquery.com/Plugins/Validation)的工作演示。

**HTML**：

```
<form id="myform">
    <input type="radio" name="ans[]" id="ans" value="" />
    <textarea rows="5" cols="30" name="cmnt[]"></textarea>
    <input type="submit" />
</form> 
```

通过`.validate()`在`document.ready`. 您的规则和选项在`.validate()`函数内部传递，字段由 标识`name`。由于您希望`required`规则以单选按钮为条件，因此请`depends:`在规则中为`textarea`. 然后`textarea`，如果选择了无线电框，则只需要。

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({
        rules: {
            "cmnt[]": {
                required: {
                    depends: function (element){
                        return $("#ans").prop("checked");
                    }
                }
            }
        },
        //  other rules and options
    });

}); 
```

**工作演示**：http: [//jsfiddle.net/3Nht6/](http://jsfiddle.net/3Nht6/)

**选项文档**： http: [//docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

# php - php 检查用户输入是否不是空格

> ID：14561104
> 
> 赞同：1
> 
> 时间：2013-01-28T11:32:24.920
> 
> 标签：php, validation, input

我有以下代码来检查用户输入：

```
if(isset($_POST['block_name']) && !empty($_POST['block_name'])) {
    $block->name = trim($_POST['block_name']);
} 
```

但它接受 SPACE 作为有效输入，所以我改为：

```
if(isset($_POST['block_name']) && !empty($_POST['block_name']) && trim($_POST['block_name'])!='') {
        $block->name = trim($_POST['block_name']);
    } 
```

我在网上发现我也可以使用 !=false 。有什么区别，推荐哪个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:35:51.807

`''`在松散的比较中等于`false`，所以没有真正的区别。由于`'0'`也等于`false`，您可能希望使您的检查更加严格。`empty`如果未设置变量，也只是检查`false`而不触发错误。所以`isset && !empty`一开始是多余的。

采用：

```
if (isset($_POST['block_name']) && strlen(trim($_POST['block_name'])) > 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:35:11.997

你可以检查空格

```
 if( (strlen($string) == 1 ) && strpos(trim($string)," ")){

   echo "the string contains only a blank space";

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:35:18.963

`if(empty($_POST['block_name']))`应该检查：

```
"" (an empty string)
0 (0 as an integer)
0.0 (0 as a float)
"0" (0 as a string)
NULL
FALSE
array() (an empty array)
$var; (a variable declared, but without a value) 
```

所以，这应该是最好的搭配：`if(!empty(trim($_POST['block_name']))) { //proceed...`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T11:38:54.377

使用此条件语句。我希望它会奏效。

```
if `$custSTR` is a sample string having spaces.

$custSTR = '     ';
if (strlen(trim(preg_replace('/\xc2\xa0/',' ',$custSTR))) == 0)
{
    echo "custSTR have space or empty.\n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T11:59:57.877

毕竟我认为这种方式是最好的：

```
if(isset($_POST['block_name']) && strlen(trim($_POST['block_name'])) > 1) {
        $block->name = trim($_POST['block_name']);
    }
    else {
        $errors[] = "Please give a name for the new block. It should be at least 2 characters";
    } 
```

感谢他的回答。

# sql-server - CTE 之后的语法不正确

> ID：14561106
> 
> 赞同：6
> 
> 时间：2013-01-28T11:32:27.810
> 
> 标签：sql-server, tsql, common-table-expression

```
declare @SQL nvarchar(max);
with tbl1 as
    (
    SELECT ...
    ),
tbl2 as
    (
    SELECT ...
    ),
tbl15 as
    (
    select [tbl1].[DT],
    [tbl1].[Kr_IL.BTS],
    [tbl2].[Kr_IL.CS],
    from [tbl1], [tbl2]
    where 
    [tbl1].[DT] = [tbl2].[DT] 
    and [tbl1].[DT] = [tbl3].[DT] 
    )

set @SQL = 'select [tbl15].[DT], '
if @tag1 = 1 set @SQL = @SQL + '[tbl15].[Kr_IL.BTS], '
    else set @SQL = @SQL + 'null as [Kr_IL.BTS], '
if @tag2 = 1 set @SQL = @SQL + '[tbl15].[Kr_IL.CS], '
    else set @SQL = @SQL + 'null as [Kr_IL.CS], ';
set @SQL = STUFF(@SQL, len(@SQL), 1, ' from [tbl15]')
exec (@SQL) 
```

这是我遇到问题的存储过程脚本的一部分。消息是：

> “消息 156，级别 15，状态 1，过程 SP_select，第 202 行关键字‘set’附近的语法不正确。”。

如果我编写一个标准的选择语句（带有完整的列集），它可以正常工作。但我需要“控制”列（根据启用标签的真实数据或空数据）。根据错误消息，错误点是：

```
set @SQL = 'select [tbl15].[DT], ' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T11:42:27.590

您收到此错误是因为您没有立即在查询中引用 CTE（动态 SQL 不计算在内！）

通过使用 case 语句，可以将用于控制流的变量直接引入脚本，而不需要动态 SQL：

```
SELECT [DT],
       CASE
         WHEN @tag1 = 1 THEN [Kr_IL.BTS]
         ELSE NULL
       END AS BTS,
       CASE
         WHEN @tag2 = 1 THEN [Kr_IL.CS]
         ELSE NULL
       END AS CS
FROM   tbl15 
```

所以你的整个脚本变成：

```
;WITH tbl1 AS
    (
    SELECT ...
    ),
tbl2 AS
    (
    SELECT ...
    ),
tbl15 AS
    (
    SELECT [tbl1].[DT],
    [tbl1].[Kr_IL.BTS],
    [tbl2].[Kr_IL.CS],
    FROM [tbl1], [tbl2]
    WHERE
    [tbl1].[DT] = [tbl2].[DT]
    AND [tbl1].[DT] = [tbl3].[DT]
    )
SELECT [DT],
       CASE
         WHEN @tag1 = 1 THEN [Kr_IL.BTS]
         ELSE NULL
       END AS BTS,
       CASE
         WHEN @tag2 = 1 THEN [Kr_IL.CS]
         ELSE NULL
       END AS CS
FROM   tbl15 
```

# c - 使用 Glib 向 GSList 添加自定义结构

> ID：14561108
> 
> 赞同：1
> 
> 时间：2013-01-28T11:32:31.470
> 
> 标签：c, linked-list, structure, glib, singly-linked-list

我正在尝试使用函数 g_slist_append(list, &structure) 将结构添加到单链表。这似乎有效（它正在添加指针），但是在读取链表时我似乎无法找到查看结构中元素的方法。

我的结构如下所示：

```
 struct customstruct
 {
   int var1;
   int var2;
   char *string_1;
 } 
```

然后，我列一个清单：`GSList *list = NULL;`

然后，我附加一个这样的结构实例：

```
 struct customstruct list_entry;
 list_entry.var1 = 1;
 list_entry.var2 = 2;
 list_entry.string_1 = "String";

 list = g_slist_append(list, &entry);

 printf("Entry var1 = %d\n", list->data->var1); 
```

最后一行失败，因为`var1`找不到（请求非结构或联合中的成员）。

我想我需要将它转换为正确的类型，但我不知道如何。任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:35:37.687

我猜这个结构的`data`成员`GSList`是一个`void`指针，即一个可以指向任何东西但没有任何其他类型信息的指针。

这意味着您必须使用类型转换：

```
((struct customstruct *) list->data)->var1 
```

# asp.net-mvc-3 - ASP.NET MVC 更改默认路由

> ID：14561109
> 
> 赞同：1
> 
> 时间：2013-01-28T11:32:33.897
> 
> 标签：asp.net-mvc-3, routes, maproute

我希望我的 ASP.NET MVC 应用程序默认重定向到产品控制器索引操作。所以我将 RouteConfig 更改为

```
public class RouteConfig
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Product", action = "Index", id = UrlParameter.Optional });
        } 
```

但我仍然收到错误

```
The view 'Index' or its master was not found or no view engine supports the searched locations. 
The following locations were searched: 
~/Views/Home/Index.aspx 
~/Views/Home/Index.ascx 
~/Views/Shared/Index.aspx 
~/Views/Shared/Index.ascx 
~/Views/Home/Index.cshtml 
~/Views/Home/Index.vbhtml 
~/Views/Shared/Index.cshtml 
~/Views/Shared/Index.vbhtml 
```

我调试了应用程序并检查了第三条路线的默认部分。但它仍然说

`{[controller, Home]}` 谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:41:15.937

试试这个，它对我有用 确保默认路由位于您列出的路由表的**底部**。当涉及到 ASP.NET MVC 路由表时，顺序很重要。

```
 routes.MapRoute(
                  "Default",
                  "{id}",
                  new { controller = "Product", action = "Index", id = UrlParameter.Optional }
              ); 
```

还要检查[这个工具](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)它会对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T15:58:47.013

试试这个，它会覆盖默认路由并使用你的。

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "DefaultApi", // Route name
            "{Controller}/{action}/{id}", // URL with parameters
            new { controller = "Product", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }// Parameter defaults
        );
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:15:16.197

您还没有为产品控制器添加任何视图。为其添加视图，它将按预期工作。

# ios - CoreData NSFetchRequest 返回结果，但对象的节数返回 0

> ID：14561112
> 
> 赞同：5
> 
> 时间：2013-01-28T11:32:41.633
> 
> 标签：ios, xcode, core-data, nsfetchedresultscontroller, nsfetchrequest

我目前正在尝试编写我的第一个 CoreData 项目并且非常困惑。我正在使用以下代码来设置获取的结果控制器：

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil)
        return _fetchedResultsController;

    Singleton *singleton = [Singleton sharedSingleton];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"MapEntity" inManagedObjectContext:[singleton managedObjectContext]];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"sName" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    [fetchRequest setFetchBatchSize:8];

    // Finally check the results
    NSError *error;
    NSArray *fetchedObjects = [[singleton managedObjectContext] executeFetchRequest:fetchRequest error:&error];
    for (MapEntity *map in fetchedObjects)
    {
        NSLog(@"Maps present in database: %@", map.sName);
    }

    NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[singleton managedObjectContext] sectionNameKeyPath:nil cacheName:@"Root"];
    self.fetchedResultsController = theFetchedResultsController;
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;
} 
```

我放入 NSLog 以查看 fetchRequest 是否正在查找结果，并且确实如此：

```
2013-01-28 11:20:14.735 WildMap_iOS[10931:16a03] Maps present in database: UK Capital Cities
2013-01-28 11:20:14.736 WildMap_iOS[10931:16a03] Maps present in database: The UK
2013-01-28 11:20:14.736 WildMap_iOS[10931:16a03] Maps present in database: Testing123
2013-01-28 11:20:14.736 WildMap_iOS[10931:16a03] Maps present in database: TestForPic
2013-01-28 11:20:14.736 WildMap_iOS[10931:16a03] Maps present in database: Scottish Map
2013-01-28 11:20:14.736 WildMap_iOS[10931:16a03] Maps present in database: Old Scotland
2013-01-28 11:20:14.736 WildMap_iOS[10931:16a03] Maps present in database: Old Scotland
2013-01-28 11:20:14.737 WildMap_iOS[10931:16a03] Maps present in database: Old Scotland
2013-01-28 11:20:14.737 WildMap_iOS[10931:16a03] Maps present in database: Field Concatination 
```

但是，当我尝试使用我的 fetchedResultsController 来设置我的 tableView numberOfRowsInSection 时，如下所示：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id sectionInfo = [[_fetchedResultsController sections] objectAtIndex:section];

    return [sectionInfo numberOfObjects];
} 
```

'返回 [sectionInfo numberOfObjects];' 返回 nil，即使 fetchRequest 似乎可以很好地拾取对象。

我使用这段代码很好，但是我最近向 mapEntity (iID) 添加了一个整数，它让我删除了模拟器数据，因为存储数据的结构发生了变化。在我删除数据并重新启动应用程序后，代码不再有效。

谁能帮我理解为什么会这样？我认为它不像以前那样使用命名约定，并且 fetchRequest 正在返回结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T12:08:20.353

除了@Levi 建议的内容之外，您不应该`_fetchedResultsController`直接在`numberOfRowsInSection`（或在其他表视图数据源方法中）访问实例变量。始终使用属性访问器`self.fetchedResultsController`。

*原因*：`fetchedResultsController`getter 方法在必要时创建获取的结果控制器。直接访问`_fetchedResultsController`可能会返回`nil`.

**更新：**另一个问题是获取的结果控制器缓存。从文档中：

> 重要提示：如果您使用缓存，则必须 `deleteCacheWithName:`在更改任何获取请求、其谓词或排序描述符之前调用。除非您 `cacheName`将`nil`.
> ...
> 在可能的情况下，控制器使用缓存来避免在设置任何部分和对内容进行排序时重复执行的工作。缓存在您的应用程序启动期间得到维护。

因此，您应该使用`cacheName:nil`或确保在 FRC 的任何参数更改时删除缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:56:22.577

在您的方法中的行之前`return _fetchedResultsController;`，告诉`NSFerchedResultsController`执行请求：

```
[self.fetchedResultsController performFetch:NULL]; 
```

# javascript - 使用 JavaScript 的多个页面

> ID：14561115
> 
> 赞同：0
> 
> 时间：2013-01-28T11:32:50.917
> 
> 标签：javascript, html

我有当前生成单个页面的 HTML。根据选择的“产品”，我想使用插入 javascript 的“多页”功能。

这是一些示例代码：

```
<div id="products">

  <div id="product-1" class="product">
    <a href="/product/marco" title="View marco" class="product-a">
      <span class="stilt"></span>
      <div class="product-info"><h3 class="product-title"><span>marco</span></h3><p class="product-price"><span><span class="currency_sign">€&lt;/span>23.00</span></p></div>
    </a>
  </div>

  <div id="product-2" class="product">
    <a href="/product/la-regola-dell-amico" title="View la regola dell'amico" class="product-a">
      <span class="stilt"></span>
      <div class="product-info"><h3 class="product-title"><span>la regola dell'amico</span></h3><p class="product-price"><span><span class="currency_sign">€&lt;/span>22.00</span></p></div>
    </a>
  </div>
.
.
.
</div> 
```

例如，我想将“产品” div 拆分为多个页面，用于 id 为“product-9”的内部 div。我怎么做？

**编辑** 可能不清楚，我有很多产品，我想每页显示 9 个产品

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:40:51.597

[这是一个使用 jQuery 的非常基本的示例](http://jsfiddle.net/LZuC6/)

症结在这里：

```
function togglePage(page)
{
    for (var i = 1 ; i < pageSize  + 1; i++)
    {
        $("#product-" + ((page * pageSize) + i)).toggle();

    }
} 
```

您可以使用更复杂的选择器以更少的代码执行此操作，但我保持简单，以便非 jQuery 用户能够阅读。

基本上，我根据页面大小计算每次显示的项目。为简单起见，我将其限制为两个。CSS 有 display:none 默认隐藏。

页码没有上限检查，但创建一些不会非常困难。

# sql - 比较两个不同表的公共列中的值并显示差异

> ID：14561116
> 
> 赞同：0
> 
> 时间：2013-01-28T11:32:53.960
> 
> 标签：sql, oracle, plsql

我有两张桌子`USER`和`USER_BAL`. `USER _ID`是表的主键和`USER`表的外键`USER_BAL`。我需要比较`USER_ID`两个表的列，以确保任何值`USER_BAL.USER_ID`在`USER.USER_ID`. 我还需要输出剩下的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:40:44.260

以下将为您提供在 User_Bal 中但不在 User 中具有条目的所有用户：

```
SELECT DISTINCT User_Bal.UserID
From User_Bal
Where User_Bal.UserID NOT IN
(
   SELECT User.UserID
   FROM USER
) 
```

如果您需要在 User 中而不是在 User_Bal 中获取 UserID，并且在 User_Bal 中而不是在 User 中获取 UserID，则 Ivan 的回答是一个很好的起点。

但是，结果将取决于您的数据库架构。User 到 User_Bal 是一对一还是一对多的关系？

如果是一对一的，那么您应该更改架构以使 UserID 同时成为 User_Bal 表的 FK 和 PK。如果是一对多，那么 Ivan 的答案将为同一个 UserID 返回多行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:28:07.100

尝试这个 ：

该查询给出了存在于用户表中的用户 ID。

```
SELECT USER_BAL.USER_ID 
FROM USER_BAL 
WHERE EXISTS (
                SELECT USER.USER_ID 
                FROM USER 
                WHERE USER.USER_ID = USER_BAL.USER_ID
             ) 
```

此查询给出用户表中不存在的用户 ID

```
SELECT USER_BAL.USER_ID 
FROM USER_BAL 
WHERE NOT EXISTS (
                    SELECT USER.USER_ID 
                    FROM USER 
                    WHERE USER.USER_ID = USER_BAL.USER_ID
                 ) 
```

# php - 总是将我重定向到 admin.php

> ID：14561120
> 
> 赞同：-3
> 
> 时间：2013-01-28T11:33:22.437
> 
> 标签：php, if-statement

[重复的问题](https://stackoverflow.com/questions/14472800/correct-syntax-for-if-elseif-statment)，这是我之前提出的问题，现在已关闭。我要求我的 login.php 总是将我重定向到 admin.php 无论用户将登录它重定向到 admin.php 如何在相同的代码上防止这种情况？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:44:56.437

更改`!=$admin`为`!$admin`

```
<?php
    // If result matched $myusername and $mypassword, table row must be 1 row
    if(($count==1) && (!$admin)){
        session_register("myusername");
        $_SESSION['login_user']=$myusername;        
        header("location: welcome.php");
        exit();
    }elseif (($count==1) && ($admin)){
        header("location: admin.php");
        exit();
    }else{
        echo"Your Login Name or Password is invalid";
        header("location: invalid.html");
        exit();
    }       
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:49:39.527

在调用之前向浏览器发送一些东西`echo"Your Login Name or Password is invalid";`没有任何意义，因为在发送有效负载*后*`header("location: invalid.html");`您无法发送标头信息。

 *您应该删除`echo`-Line 否则重定向将不起作用。

除此之外，`session_register()`它已被 PHP 5.3 弃用并在 5.4 中被删除。只需使用`session_start()`.*

# c# - 通过给出其 PATH 名称搜索公共文件夹中的文件夹

> ID：14561124
> 
> 赞同：4
> 
> 时间：2013-01-28T11:33:38.130
> 
> 标签：c#, web-services, api, exchange-server, managed

是否可以通过使用 Exchange Web Service (EWS) Managed Api 提供文件夹的路径来搜索公用文件夹中的所有文件夹和子文件夹？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T16:23:26.050

您只能在文件夹中搜索，在 EWS 上一层深，以便：

> PublicFoldersRoot\subjectA\sectionB\partC\

我会搜索“subjectA”文件夹，然后一旦我有了那个 FolderId，然后我会搜索“sectionB”文件夹，依此类推，直到找到我需要的东西。

该方法`GetPublicFolderByPath`采用路径“subjectA\sectonB\partC\”并将路径拆分为文件夹名称数组，然后递归查找每个文件夹。

```
public Folder GetPublicFolderByPath(ExchangeService service, String ewsFolderPath)
{
    String[] folders = ewsFolderPath.Split('\');

    Folder parentFolderId = null;
    Folder actualFolder = null;

    for (int i = 0; i < folders.Count(); i++)
    {
        if (0 == i)
        {
            parentFolderId = GetTopLevelFolder(service, folders[i]);// for first first loop public folder root is the parent
            actualFolder = parentFolderId; //in case folders[] is only one long
        }
        else
        {
            actualFolder = GetFolder(service, parentFolderId.Id, folders[i]);
            parentFolderId = actualFolder;
        }
    }
    return actualFolder;
} 
```

该方法`GetTopLevelFolder`获取第一个文件夹“sectionA”，它是公用文件夹根目录的子文件夹，也就是“WellKnownFolderName.PublicFoldersRoot”。

```
private Folder GetTopLevelFolder(ExchangeService service, String folderName)
    {
        FolderView folderView = new FolderView(int.MaxValue);
        FindFoldersResults findFolderResults = service.FindFolders(WellKnownFolderName.PublicFoldersRoot, folderView);

        foreach (Folder folder in findFolderResults)
        {
            if (folderName.Equals(folder.DisplayName, StringComparison.InvariantCultureIgnoreCase))
            {
                return folder;
            }
        }
        throw new Exception("Top Level Folder not found: " + folderName);
    } 
```

该`GetFolder`方法采用父 FolderId 并在所有子文件夹中搜索名称提供的匹配项，并返回您请求的子 FolderId。

```
private Folder GetFolder(ExchangeService service, FolderId ParentFolderId, String folderName)
    {
        FolderView folderView = new FolderView(int.MaxValue);
        FindFoldersResults findFolderResults = service.FindFolders(ParentFolderId, folderView);

        foreach (Folder folder in findFolderResults)
        {
            if (folderName.Equals(folder.DisplayName, StringComparison.InvariantCultureIgnoreCase))
            {
                return folder;
            }
        }

        throw new Exception("Folder not found: " + folderName);

    } 
```

请注意，我使用的是 Microsoft.Exchange.WebServices 托管 API dll，与`https://yourexchangeserver/ews/services.wsdl`. 要从路径中获取文件夹，请创建 ExchangeService 对象，然后编写：
`GetPublicFolderByPath(service, "subjectA\sectionB\partC\")`

如果这对您有帮助，请投票 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T18:34:21.030

这是基于@ono2012 的回答的包装器

```
using System;
using System.DirectoryServices.AccountManagement;
using System.Linq;
using System.Net;
using System.Net.Security;
using System.Security.Cryptography.X509Certificates;
using Microsoft.Exchange.WebServices.Data;

namespace EmailServices.Web.IntegrationTests
{
    // http://msdn.microsoft.com/en-us/library/exchange/jj220499(v=exchg.80).aspx
    internal class MsExchangeServices
    {
        public MsExchangeServices()
        {
            ServicePointManager.ServerCertificateValidationCallback = CertificateValidationCallBack;
            m_exchangeService = new ExchangeService { UseDefaultCredentials = true };

            // Who's running this test? They better have Exchange mailbox access.
            m_exchangeService.AutodiscoverUrl(UserPrincipal.Current.EmailAddress, RedirectionUrlValidationCallback);
        }

        public ExchangeService Service { get { return m_exchangeService; } }

        public Folder GetPublicFolderByPath(string ewsFolderPath)
        {
            string[] folders = ewsFolderPath.Split('\\');

            Folder parentFolderId = null;
            Folder actualFolder = null;

            for (int i = 0; i < folders.Length; i++)
            {
                if (0 == i)
                {
                    parentFolderId = GetTopLevelFolder(folders[i]);
                    actualFolder = parentFolderId;
                }
                else
                {
                    actualFolder = GetFolder(parentFolderId.Id, folders[i]);
                    parentFolderId = actualFolder;
                }
            }
            return actualFolder;
        }

        private static bool RedirectionUrlValidationCallback(string redirectionUrl)
        {
            // The default for the validation callback is to reject the URL.
            bool result = false;

            Uri redirectionUri = new Uri(redirectionUrl);

            // Validate the contents of the redirection URL. In this simple validation
            // callback, the redirection URL is considered valid if it is using HTTPS
            // to encrypt the authentication credentials. 
            if (redirectionUri.Scheme == "https")
                result = true;

            return result;
        }

        private static bool CertificateValidationCallBack(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
        {
            // If the certificate is a valid, signed certificate, return true.
            if (sslPolicyErrors == SslPolicyErrors.None)
                return true;

            // If there are errors in the certificate chain, look at each error to determine the cause.
            if ((sslPolicyErrors & SslPolicyErrors.RemoteCertificateChainErrors) == 0)
            {
                // In all other cases, return false.
                return false;
            }
            else
            {
                if (chain != null)
                {
                    foreach (X509ChainStatus status in chain.ChainStatus)
                    {
                        if ((certificate.Subject == certificate.Issuer) && (status.Status == X509ChainStatusFlags.UntrustedRoot))
                        {
                            // Self-signed certificates with an untrusted root are valid. 
                        }
                        else
                        {
                            if (status.Status != X509ChainStatusFlags.NoError)
                            {
                                // If there are any other errors in the certificate chain, the certificate is invalid,
                                // so the method returns false.
                                return false;
                            }
                        }
                    }
                }

                // When processing reaches this line, the only errors in the certificate chain are 
                // untrusted root errors for self-signed certificates. These certificates are valid
                // for default Exchange server installations, so return true.
                return true;
            }
        }

        private Folder GetTopLevelFolder(string folderName)
        {
            FindFoldersResults findFolderResults = m_exchangeService.FindFolders(WellKnownFolderName.PublicFoldersRoot, new FolderView(int.MaxValue));
            foreach (Folder folder in findFolderResults.Where(folder => folderName.Equals(folder.DisplayName, StringComparison.InvariantCultureIgnoreCase)))
                return folder;

            throw new Exception("Top Level Folder not found: " + folderName);
        }

        private Folder GetFolder(FolderId parentFolderId, string folderName)
        {
            FindFoldersResults findFolderResults = m_exchangeService.FindFolders(parentFolderId, new FolderView(int.MaxValue));
            foreach (Folder folder in findFolderResults.Where(folder => folderName.Equals(folder.DisplayName, StringComparison.InvariantCultureIgnoreCase)))
                return folder;

            throw new Exception("Folder not found: " + folderName);
        }

        readonly ExchangeService m_exchangeService;
    }
} 
```

# iphone - MKMap 无法在 ViewDidLoad/ViewWillAppear 中设置区域

> ID：14561129
> 
> 赞同：2
> 
> 时间：2013-01-28T11:33:51.500
> 
> 标签：iphone, ios, objective-c

我正在尝试为 MKmap 设置坐标和区域。我编写的代码如果我把它放在 viewDidAppear 中就可以工作，但是我不希望它出现在这个方法中，因为我不希望每次出现视图时都设置它。

这是我试图在这些方法中实现的代码

```
//set the map delegate
MapView.delegate = (id)self;

//set the co-ords
CLLocationCoordinate2D zoomLocation;
zoomLocation.latitude = LAT_POSN;
zoomLocation.longitude= LON_POSN;

//create region
MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, startZoom, startZoom);
MKCoordinateRegion adjustedRegion = [MapView regionThatFits:viewRegion];
[MapView setRegion:adjustedRegion animated:YES]; 
```

编辑： startZoom 是一个常数，我已经记录它以确保在设置区域之前它在那里

我试过使用

```
if (self.isMovingToParentViewController ) 
```

为了让它在第一次调用视图时运行，但它仍然显示相同的结果。

这就是它应该的样子。

![应该看起来像](../Images/82c92607ed81f2efc58b3c0a6515d9d1.png)

但这就是我得到的。

![坏形象](../Images/0eaf1f779fa6cdc67b67e4cf2fda7228.png)

有谁知道这可能是为什么？谢谢

答案：我使用了 tkanzakic 答案来确保我的某些代码只使用了一次。另外，没有设置区域的原因是它不喜欢这行代码。

```
MKCoordinateRegion adjustedRegion = [MapView regionThatFits:viewRegion]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:03:20.810

这里的问题在于调用`-[MKMapView regionThatFits:]`.

当您为地图视图设置区域时，视图通常必须稍微调整您的区域以使其正确适应其范围。例如，您指定的区域的纵横比通常与实际视图的纵横比不匹配。

**如果**在设置之前*确实*需要知道调整后的区域，可以使用`-[MKMapView regionThatFits:]`. 过早这样做的问题（例如，在`viewDidLoad`）是地图视图根据它自己在屏幕上的大小计算“适合的区域”。在自动布局的情况下，该大小可能不正确或没有意义，直到实际布局发生。因此，当调用 viewDidLoad 时，地图视图可能还不知道其正确的实际大小。

从您的代码来看，您似乎不会长时间持有adjustedRegion，只是将其直接传递回地图视图。所以你可以省略它，而是这样做：

`[mapView setRegion:viewRegion animated:NO];`

然后地图视图将根据需要调整该区域。稍后如果您需要知道调整后的区域是什么，您可以稍后向地图视图询问（在 viewDidAppear: 或布局发生后的其他时间）。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:51:54.197

我不知道为什么这段代码在该`viewDidLoad`方法中不起作用，但为了避免每次出现视图时都会触发代码，您可以包含一个静态变量（如果您不想使用，则可以包含一个属性或属性）静态变量），像这样：

```
- (void)viewDidAppear:(BOOL)animated
{
    static BOOL isFirstLoad = YES;
    if (isFirstLoad) {
        // Put your code here
        isFirstLoad = NO;
    }

    [super viewDidAppear:animated];
} 
```

这将保证您的代码只运行一次。

# tsql - 使用最大键从表中获取值

> ID：14561130
> 
> 赞同：0
> 
> 时间：2013-01-28T11:33:52.447
> 
> 标签：tsql

我有一个有两列的表：

```
UserId (auto int)
Email(Nvarchar) 
```

我想检索上次插入表格的电子邮件。

我尝试了一些选项，但似乎没有任何效果。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:34:39.653

也许很简单：

```
SELECT TOP 1 email FROM dbo.Table ORDER BY UserId DESC 
```

或者

```
SELECT UserId, Email
FROM dbo.Table
WHERE UserId = (SELECT MAX(UserId) FROM dbo.Table) 
```

但是，滥用主键列来获取诸如“最后插入”之类的信息并不是一个好习惯。为此添加一个日期时间列。

您还可以使用以下`ROW_NUMBER`功能：

```
WITH x  AS (
    SELECT UserId, Email,
        rn = Row_number() OVER(ORDER BY UserId DESC) 
    FROM   dbo.table) 
SELECT UserId, Email
FROM   x 
WHERE  rn = 1 
```

# android - 操作栏（导航栏？）与菜单按钮

> ID：14561139
> 
> 赞同：0
> 
> 时间：2013-01-28T11:34:29.090
> 
> 标签：android, android-actionbar

我有一个全屏运行并依赖于菜单按钮的应用程序。我没有意识到像 Galaxy Tab 这样的设备使用了一个不再有菜单按钮的操作栏。当我触摸菜单按钮时，我的应用程序当前会加载一个显示设置菜单的片段：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    FragmentManager lFM = getSupportFragmentManager();
    SettingsDialogFragment lSettingsDialog = new SettingsDialogFragment();
    lSettingsDialog.show(lFM, "Settings");

    return false;    
} 
```

我知道可以向操作栏添加自定义图标，按下该图标可能会导致与菜单按钮相同的行为。我不确定的是如何实现这一点。

我如何知道设备没有菜单按钮，而我需要在操作栏中添加图标？它不可能像检查 SDK 版本那样简单，因为动作栏显然是在蜂窝中引入的，但是我的 Galaxy Note 运行冰淇淋三明治并且没有动作栏（它仍然有一个菜单按钮）。我不想放弃任何不动产，因此在我的主布局中添加按钮或菜单选项不是一种选择。

我刚刚在谷歌开发者上读到：

> 导航栏 Android 4.0 中的新手机，导航栏仅出现在没有传统硬件键的设备上。它包含设备导航控件“返回”、“主页”和“最近”，还显示为 Android 2.3 或更早版本编写的应用程序的菜单。

所以我尝试将我的应用程序的目标版本设置为 8。而不是菜单，我得到一个按钮，允许我更改应用程序的屏幕大小 - 但没有菜单按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:09:34.113

> 我有一个全屏运行并依赖于菜单按钮的应用程序。

*这两年来*一直是个坏主意。

> 我没有意识到像 Galaxy Tab 这样的设备使用了一个不再有菜单按钮的操作栏。

这种设备已经存在了*两年*。

> 当我触摸菜单按钮时，我的应用程序当前加载了一个显示设置菜单的片段

这从来都不是一个合适的设计举措。请允许存在的 MENU 按钮正常运行，在 Android 1.x/2.x 上显示选项菜单并在 Android 3.0+ 上触发操作栏溢出。

> 我怎么知道设备没有菜单按钮

[http://developer.android.com/reference/android/view/ViewConfiguration.html#hasPermanentMenuKey()](http://developer.android.com/reference/android/view/ViewConfiguration.html#hasPermanentMenuKey())

# c# - 对称加密加密大量小块

> ID：14561146
> 
> 赞同：1
> 
> 时间：2013-01-28T11:34:40.807
> 
> 标签：c#, .net, encryption, cryptography, encryption-symmetric

我正在尝试使用 .Net 对称加密 System.Security.Cryptography 来加密许多小文本块，而不会增加太多的存储开销（处理时间并不重要，只是大小）。显而易见的方法是将它们全部塞在一起并将结果加密为一个大块，但这在我的情况下不起作用。

背景是我正在开发一个工具，有人可以使用它向我发送 .docx word 文档，以便我可以在不知道内容的情况下解决结构中的问题。我打算通过对称加密每个`<w:t>`元素来做到这一点（可以是从单词的一部分到整个段落的任何内容）

我希望能够移动和/或删除此类文本元素，并且用户在我将文档归还时仍然能够解密文档，所以在我看来我别无选择，只能分别加密每个元素，但使用 AES如果你有数千个块，每个块只有几个字节，那么存储开销是巨大的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:01:30.823

对于您不想被阅读的任何信息，最好的加密方式是首先对不存在的信息进行加密。

如果您只关心文档的结构，为什么不将其完全从传输中取出并用占位符替换它呢？

*   在客户端创建一个数据存储，其中包含与占位符关联的所有已删除内容（例如：{1}、{2}、{3} ... 等）

*   给自己发送结构和占位符（即那个`<w:t>{1}</w:t>`）

*   修复结构。

*   将固定结构返回给客户端，并在客户端通过将占位符替换为原始内容来将文档一起放回。

这样您就不会传输任何有意义的信息（它保留在客户端，除了文档本身的结构外，没有任何信息会受到损害）。此外，由于大部分内容不存在，因此您将获得更小的文件大小。

更好的是，您可以在将文件发送给您之前让客户查看文件，以便他可以验证所有敏感信息实际上已被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:47:48.220

这里没有简单的解决方案，基本上您是在要求我们设计您的整个应用程序。您可以使用 CTR 模式加密，这是分组密码的流模式。使用流模式，您只需要与纯文本字节一样多的加密字节。

也就是说，在流模式下，您仍然需要存储某种随机数。必须存在此 nonce 以保护密文。然而，有时可以根据上下文计算随机数；例如，文件名上的散列应该可以解决问题。不过，这对于文档中的元素可能更难。

请注意，您必须发明一种方案将数据转换为字节并返回（确定字母表，并对字母表进行编码）。如果此方案效率不高，您最终可能会产生巨大的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:46:20.200

To encrypt something with the minimal overhead I would suggest a stream cypher, such as Rabbit, or alternatively a block cypher, such as AES in CTR mode. Both avoid the requirement for padding. You will need to think very carefully about what your encryption keys are going to be. There are ways to derive many sub-keys from a single secret master key and some less secure ancillary data. Look up Key Derivation Functions (KDFs). Examples are [PBKDF2](http://en.wikipedia.org/wiki/PBKDF2) and [HKDF](https://www.rfc-editor.org/rfc/rfc5869).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T11:53:42.630

具有 128 位块大小的 AES 平均每个加密片段会产生 8 个字节的开销——在我看来还不错。您可以连接所有片段，将它们加密为一个大块，最后将其拆分并重新放置所有片段。除非您想出一些对策，否则这将一直有效，直到您开始四处移动并删除片段。

例如，您可以使用连接块中的位置为每个加密片段添加前缀，并使用像 RC4 这样的流密码而不是 AES - 这允许您将加密片段恢复到原始顺序，使用任意填充值填充已删除元素的间隙并解密它正确。

这可能会降低开销，但您可能仍需要四个字节。您可能还必须将密文编码为十六进制或 Base64 字符串，因为您不希望 XML 中有原始二进制数据。但是这种编码会比使用 AES 的一些填充产生更大的开销，因此您最好选择最简单的解决方案。

最后的想法 - 当您使用像 AES 这样的分组密码时，在使用相同的密钥加密多个片段时必须小心，因为相同的明文可能会产生相同的密文。有关详细信息，请参阅[分组密码操作模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)。

# sql-server - SQL Server：一个表中的许多列与两个表中的较少列

> ID：14561147
> 
> 赞同：1
> 
> 时间：2013-01-28T11:34:44.680
> 
> 标签：sql-server, sql-server-2008, database-design, database-normalization

我有一个数据库表（称为`Fields`），它有大约 35 列。其中 11 个始终包含大约每 300.000 行的相同常量值 - 并充当元数据。

这种结构的缺点是，当我需要更新这 11 列值时，我需要去更新所有 300.000 行。

我可以将所有常见数据移动到不同的表中，并且只在一个地方更新一次，而不是 300.000 个地方。

但是，如果我这样做，当我显示字段时，我需要`INNER JOIN's`在两个表之间创建，我知道这会使`SELECT`语句变慢。

我必须说更新列的发生比读取（显示）数据要少。

你如何建议我应该将数据存储在数据库中以获得最佳性能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T11:56:03.980

> 我可以将所有常见数据移动到不同的表中，并且只在一个地方更新一次，而不是 300.000 个地方。

即健全的数据库设计和标准规范化。

这不是关于“许多空白字段”，而是关于大量冗余数据的残酷。你应该隔离的常量。单独的表。这也可能使事情变得更快 - 它允许数据库更有效地使用内存，因为您的数据库要小得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T11:51:53.443

我建议使用单独的表格，除非你隐藏了一些重要的东西（当然最好尝试和衡量，但我怀疑你已经知道了）。

您实际上也可以获得*更快的选择*：加入一个小表会更便宜，然后获取相同的数据 300000 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:20:37.133

This is a classic example of denormalized design. Sometimes, denormalization is done for (SELECT) performance, and always in a deliberate, **measurable** way. Have you actually measured whether you gain any performance by it?

If your data fits into cache, and/or the JOIN is unusually expensive¹, then there may well be some performance benefit from avoiding the JOIN. However, the denormalized data is *larger* and will push at the limits of your cache sooner, increasing the I/O and likely reversing any gains you may have reaped from avoiding the JOIN - you might actually *lose* performance.

And of course, getting the *incorrect* data is useless, no matter how quickly you can do it. The denormalization makes your database less resilient to data inconsistencies², and the performance difference would have to be pretty dramatic to justify this risk.

* * *

*¹ Which doesn't look to be the case here.*

*² E.g. have you considered what happens in a concurrent environment where one application might modify existing rows and the other application inserts a new row but with old values (since the first application hasn't committed yet so there is no way for the second application to know that there was a change)?*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T20:28:05.990

最好的方法是分离数据并用这 11 列形成第二个表，并将其称为一些主数据表，它将具有一个主键。

在第一个表的那 30,000 行中，这个主键可以被称为外键

# mysql - PHPMyAdmin 不能位于服务器上？

> ID：14561150
> 
> 赞同：0
> 
> 时间：2013-01-28T11:34:47.753
> 
> 标签：mysql, phpmyadmin, cpanel

我无法在我的服务器上找到 phpMyAdmin 的文件。托管服务提供商给了我一个 cPanel 访问权限。即使是管理员用户也看不到 /usr。我想手动编辑一些文件，主要是 PHPMyAdmin 的配置文件，例如：phpmyadmin/libraries/dbi/mysql.dbi.lib.php

我想这样做是为了解决 Unicode 文本外观问题。我的日文字符串在 MySQL 控制台上正确显示，但 PHPMyAdmin 把它们弄乱了。（我想转向 latin1 什么的）。排序规则和字符集现在已正确设置。通过在本地编辑这些 PHPMyAdmin 文件，我达到了预期的效果。

那么，我怎样才能找到这些文件呢？

问候 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:06:54.917

cPanel 的 PHPMyAdmin 位于此处，只能通过以下方式编辑`root`

```
/usr/local/cpanel/base/3rdparty/phpMyAdmin/ 
```

# sql - 无效月份-SQL

> ID：14561153
> 
> 赞同：-1
> 
> 时间：2013-01-28T11:35:03.643
> 
> 标签：sql, oracle, plsql, oracle9i

```
 for rate in ( select tgt.carrier_code, tgt.tc_code, tgt.exp_date, (TO_date(src.eff_date,'DD/MM/RRRR HH24:MI:SS') - 1/(24*60*60)) eff_date from mira_rate
    tgt, mira_rate_dummy src
    where src.carrier_code=tgt.carrier_code and src.tc_code=tgt.tc_code)
    loop
    update mira_rate
    set exp_date=to_date(rate.eff_date,'DD/MM/RRRR HH24:MI:SS')
end loop; 
```

当我运行此查询时，我收到格式错误。

如何纠正这个？我想给 diff to_date 选项它说一些。请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:58:11.750

假设问题标题意味着你得到了`ORA-01843: not a valid month`，这可能是`to_date()`因为 a_horse_with_no_name 建议的不必要的电话，但这取决于你的`NLS_DATE_FORMAT`设置。重现很容易，但只能通过对您的环境做出假设：

```
alter session set nls_date_format = 'MM/DD/RRRR';

select to_date(eff_date, 'DD/MM/RRRR HH24:MI:SS') from (
    select (to_date(sysdate, 'DD/MM/RRRR HH24:MI:SS') - 1/(24*60*60)) eff_date
    from dual
); 
```

这使：

```
 select (to_date(sysdate, 'DD/MM/RRRR HH24:MI:SS') - 1/(24*60*60)) eff_date
                        *
ERROR at line 2:
ORA-01843: not a valid month 
```

或者由于错误指向内部选择，只需：

```
SQL> select to_date(sysdate, 'DD/MM/RRRR HH24:MI:SS') from dual;
select to_date(sysdate, 'DD/MM/RRRR HH24:MI:SS') from dual
               *
ERROR at line 1:
ORA-01843: not a valid month 
```

问题是您正在对日期进行隐式转换；有效地：

```
select to_date(to_char(sysdate, 'MM/DD/RRRR'), 'DD/MM/RRRR HH24:MI:SS') 
```

隐式转换将其呈现为`01/28/2013`（或时间，*如果*它在您的 NLS 日期掩码中），然后当您尝试将其转换回带有掩码的日期时，`DD/MM/RRRR ...`它会尝试使用“28”作为月份，即明显无效。

如果您的字段已经是日期，那么您的`to_date()`调用毫无意义，令人困惑，在这种情况下会导致错误。你应该能够做到：

```
for rate in (select tgt.carrier_code, tgt.tc_code, tgt.exp_date,
    src.eff_date - interval '1' second as eff_date
    from mira_rate tgt, mira_rate_dummy src
    where src.carrier_code=tgt.carrier_code and src.tc_code=tgt.tc_code)
    loop
        update mira_rate
        set exp_date = rate.eff_date;
end loop; 
```

我将您更改`- 1/(24*60*60)`为，`- interval '1' second`因为我发现它更清晰，但它具有相同的效果。

您的更新虽然没有`where`子句，但由于它缺少一个`;`可能在转录中丢失的子句。

# javascript - Chrome 上 contenteditable div 中的插入符号

> ID：14561154
> 
> 赞同：1
> 
> 时间：2013-01-28T11:35:05.240
> 
> 标签：javascript, html, google-chrome, contenteditable, caret

我正在使用可竞争的 div 控件，当用户第一次在此控件内单击时，我想删除所有文本并将插入符号放在开头。到目前为止，我的代码在 IE、Opera 和 Firefox 上运行，但在 Chrome 上，插入符号似乎没有出现在我试图设置它的位置。我的代码如下：

```
<div id="mydiv" runat="server" contenteditable="true">
   <div id="innerDiv" runat="server">
       <span onclick="javascript:DisableClick();">text I want to delete on first click</span>
   </div>
</div>

function DisableClick()
{
   document.getElementById("<%=innerDiv.ClientID %>").innerHTML = "";
   if(document.createRange)
   {
      var range = document.createRange();
      range.selectNodeContents(document.getElementById("<%=innerDiv.ClientID %>"));
      range.collapse(false);
      var selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
   }
} 
```

删除文本会使插入符号在 Chrome 上完全消失。然而，奇怪的是，如果我没有将 div 的 innerHTML 设置为空字符串，而是指定了一些文本，例如 document.getElementById("<%=innerDiv.ClientID %>").innerHTML = "a"; 插入符号显示。

任何想法为什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T21:03:25.737

将内部容器的样式设置为`display:inline`或`display:inline-block`使用 SPAN 而不是 DIV。DIV 元素默认显示为“块”，Chrome 不会在没有文本内容的内容可编辑块元素中显示插入符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T02:54:56.700

我有一个插入符号没有出现在 Chrome 中的空行中的问题，`contenteditable`我想出一个不太性感的修复方法是在 div 中放置一个 div 并在该`contenteditable`div 中进行所有编辑。出于某种原因，插入符号确实出现了。但是，当然，该 div 可能会被用户“意外”删除。

Chrome 似乎有很多这样的错误。

# mysql - MSSQL SYNTAX 需要转换成 MYSQL

> ID：14561155
> 
> 赞同：-1
> 
> 时间：2013-01-28T11:35:09.983
> 
> 标签：mysql, sql-server-2008

我有下面的 Microsoft sql server 查询，我想在 MYSQL 数据库上运行。

在mysql数据库上得到以下错误：

> **[Err] 1064** - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '[Incident Num],tt.name as [Ticket Type],freetext2 as [Severity], tp.name as [Pri' 附近使用正确的语法

我正在使用的 Microsoft Sql 服务器查询：

```
SELECT t.tn AS [Incident Num],
       tt.name as [Ticket Type],
       freetext2 as [Severity],
       tp.name as [Priority] ts.name as [Status],
       title as [Description],
       create_time as [Created Timestamp],
       CASE WHEN th.state_id=15 THEN
       (select min(th.create_time) FROM ticket_history GROUP BY th.ticket_id,
           th.state_id having th.state_id=15  ) else create_time as [Assigned to Accenture Timestamp],
       (select min(create_time) FROM ticket_history group by ticket_id,state_id having state_id=4) as [In Progress Timestamp],
       (select min(create_time) FROM ticket_history group by ticket_id,state_id having state_id=3)as [Restored timestamp],
       (select max(create_time) FROM ticket_history group by ticket_id,state_id having state_id=2)as [Closed Timestamp],
       (select DATEDIFF(mi,max(create_time,min(create_time) FROM ticket_history group by ticket_id,state_id having state_id=12) as [Total Time spent by the ticket in 'Pending at user'status],
       cu.email as [Customer Name],
       customer_user.email AS Assignee
FROM ticket t
JOIN ticket_type tt ON t.type_id=tt.id
JOIN ticket_Priority tp ON t.ticket_priority_id=tp.id
JOIN ticket_state ts ON t.ticket_state_id=ts.id
JOIN ticket_history th ON t.id=th.ticket_id
JOIN customer_user cu ON t.customer_id=cu.customer_id
JOIN customer_user ON t.responsible_user_id=customer_user.id 
```

请帮我在不改变逻辑的情况下将查询语法修改为 ** MySQL**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:42:56.317

当您定义自定义列标题时，请将它们放在引号内（或反引号，如下所示：

```
t.tn AS '[Incident Num]', // and so on 
```

# 或者

```
t.tn AS `[Incident Num]`, // and so on 
```

错误是因为相同。

# tomcat - 如何知道正在关闭的连接是否被放弃？

> ID：14561166
> 
> 赞同：1
> 
> 时间：2013-01-28T11:35:55.407
> 
> 标签：tomcat, timeout, connection-pooling

我正在使用 Tomcat 连接池，并在 roder 中设置了属性 removeAbandoned=true 和 removeAbandonedTimeout=60 以确保应该放弃任何需要超过 60 秒的连接。

现在，如果连接被关闭，我想通知用户，因为它是一个废弃的连接。

任何人都可以请帮助我。

在这之间，我知道我可以设置拦截器，该拦截器将在该连接的每个操作中被调用，但在拦截器内部我怎么知道连接被关闭是否是因为它被放弃了连接。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:50:04.613

当 removeAbandoned 设置为 true 时，连接将从连接池中删除。这与最终用户在应用程序的 UI 上看到的内容是无缝的，因为他的请求将由与连接池不同的连接提供服务。

但是，有一个属性可以使用 logAbandoned =true 记录放弃的连接（如果这是您需要的）

这将在日志中记录被放弃的连接。

此外，可以为自定义体验覆盖拦截器。

# sql - 同时过滤相关对象的数量和满足Django中条件的相关对象的数量

> ID：14561168
> 
> 赞同：2
> 
> 时间：2013-01-28T11:36:01.007
> 
> 标签：sql, django, orm

所以我有相当于这个的模型（非常简化，显然）：

```
class Mystery(models.Model):
    name = models.CharField(max_length=100)

class Character(models.Model):
    mystery = models.ForeignKey(Mystery, related_name="characters")
    required = models.BooleanField(default=True) 
```

基本上，在每个谜团中都有许多角色，这些角色对故事来说可能是必不可少的，也可能不是。可以上演谜团的最少演员人数是该谜团所需的角色数量；最大数量是谜题的总字符数。

现在我正在尝试查询可以由给定数量的演员扮演的谜团。使用 Django 的过滤和注释功能的方式看起来很简单；毕竟，这两个查询都可以正常工作：

```
# Returns mystery objects with at least x characters in all
Mystery.objects.annotate(max_actors=Count('characters', distinct=True)).filter(max_actors__gte=x)

# Returns mystery objects with no more than x required characters
Mystery.objects.filter(characters__required=True).annotate(min_actors=Count('characters', distinct=True)).filter(min_actors__lte=x) 
```

但是，当我尝试将两者结合起来时...

```
Mystery.objects.annotate(max_actors=Count('characters', distinct=True)).filter(characters__required=True).annotate(min_actors=Count('characters', distinct=True)).filter(min_actors__lte=x, max_actors__gte=x) 
```

......它不起作用。min_actors 和 max_actors 都包含最大数量的参与者。正在运行的实际查询的相关部分如下所示：

```
SELECT `mysteries_mystery`.`id`,
    `mysteries_mystery`.`name`,
    COUNT(DISTINCT `mysteries_character`.`id`) AS `max_actors`,
    COUNT(DISTINCT `mysteries_character`.`id`) AS `min_actors`
FROM `mysteries_mystery`
    LEFT OUTER JOIN `mysteries_character` ON (`mysteries_mystery`.`id` = `mysteries_character`.`mystery_id`)
    INNER JOIN `mysteries_character` T5 ON (`mysteries_mystery`.`id` = T5.`mystery_id`)
WHERE T5.`required` = True
GROUP BY `mysteries_mystery`.`id`, `mysteries_mystery`.`name` 
```

...这清楚地表明，虽然 Django 在字符表上创建第二个连接很好（表的第二个副本别名为 T5），但该表实际上并没有在任何地方使用，并且两个计数都在从非混叠版本中选择，显然两次都会产生相同的结果。

即使当我尝试使用`extra`子句从 T5 中进行选择时，我也被告知没有像 T5 这样的表，即使检查输出查询表明它仍然将第二个字符表别名为 T5。`extra`另一种使用子句的尝试是这样的：

```
Mystery.objects.annotate(max_actors=Count('characters', distinct=True)).extra(select={'min_actors': "SELECT COUNT(*) FROM mysteries_character WHERE required = True AND mystery_id = mysteries_mystery.id"}).extra(where=["`min_actors` <= %s", "`max_actors` >= %s"], params=[x, x]) 
```

但这不起作用，因为我不能在 WHERE 子句中使用计算字段，至少在 MySQL 上是这样。要是我能使用 HAVING 就好了，可惜 Django 的 .extra()[不会也永远不会](https://code.djangoproject.com/ticket/10702)允许你设置 HAVING 参数。

有没有办法让 Django 的 ORM 做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:11:43.290

如何组合你的 Count()s：

```
Mystery.objects.annotate(max_actors=Count('characters', distinct=True),min_actors=Count('characters', distinct=True)).filter(characters__required=True).filter(min_actors__lte=x, max_actors__gte=x) 
```

这似乎对我有用，但我没有用你的确切模型测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:23:55.983

已经有几个星期没有建议的解决方案了，所以对于其他可能正在寻找答案的人来说，这就是我最终的解决方法：

```
Mystery.objects.annotate(max_actors=Count('characters', distinct=True)).filter(max_actors__gte=x, id__in=Mystery.objects.filter(characters__required=True).annotate(min_actors=Count('characters', distinct=True)).filter(min_actors__lte=x).values('id')) 
```

换句话说，过滤第一个计数和与第二个计数过滤的显式子查询中的 ID 匹配的 ID。有点笨重，但它对我的目的来说足够好。

# java - android HTTP POST 失败

> ID：14561174
> 
> 赞同：0
> 
> 时间：2013-01-28T11:36:32.147
> 
> 标签：java, android, jakarta-ee

我正在尝试连接并发布到一个简单的 java web 服务，从 chrome 运行帖子的 URL 成功，但 android 代码跳过以下行（没有抛出错误），但 web 服务不接受帖子

```
 HttpPost post = new HttpPost(setFacebookEventsAddress+userId+"/"+accesstoken);  
            post.setHeader("Accept", "application/json");
            post.setHeader("Content-type", "application/json");
            HttpResponse response = client.execute(post); 
```

处理上述请求的 webservice 方法签名：

```
 @GET
    @Path("setData/{user_id}/{accessToken}")
    @Produces(MediaType.APPLICATION_JSON+ ";charset=utf-8")
    public String setData(@PathParam("user_id")  String user_id,
                                @PathParam("accessToken")  String accessToken) { 
```

因为我设法发布了我的浏览器，任何人都可以帮助解决我的 android 代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:25:00.577

```
 URL url = new URL(setFacebookEventsAddress+userId+"/"+accesstoken);
        HttpURLConnection con = (HttpURLConnection) url
                    .openConnection();
        ja = readStream(con.getInputStream()); 
```

使用 HttpURLConnection 而不是 HttpPost 对我有用，感谢所有帮助者！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:45:42.600

不可能肯定地说（鉴于证据），但我的猜测是表达式

```
setFacebookEventsAddress + userId + "/" + accesstoken 
```

正在评估与您在 Web 浏览器中使用的 URL 不同的 URL。

我建议您尝试以下方法：

*   在您的服务器上打开请求日志记录，并比较正在发送的请求中的 URL。

*   修改您的客户端以打印出响应状态代码和响应正文。后者很可能是一个错误页面，会给你更多的线索。

* * *

另一个可能的问题是您的代码似乎没有通过 POST 请求发送任何正文。

* * *

重新审视这一点，问题在于您正在使用/尝试对您配置为仅支持 GET 的 Web 服务进行 POST。我希望如果您查看了状态代码，您会发现响应代码是“不支持方法”。

# encryption - 为什么“盐”这个词被用作加密算法中的术语

> ID：14561176
> 
> 赞同：0
> 
> 时间：2013-01-28T11:36:41.103
> 
> 标签：encryption

> **可能重复：**
> [为什么密码盐被称为“盐”？](https://stackoverflow.com/questions/244903/why-is-a-password-salt-called-a-salt)

正如标题所说，为什么在加密算法中使用“盐”这个词作为术语？

**盐**不是一种食物成分吗？这种食物成分与加​​密有什么关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:38:43.347

见[这篇文章](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。额外的输入有助于扰乱加密，使其更难破解。

# mootools - 带有 AJAX onSuccess 的 Mootools

> ID：14561178
> 
> 赞同：0
> 
> 时间：2013-01-28T11:36:51.033
> 
> 标签：mootools, mootools1.2

发送表单后，我正在尝试显示成功消息：

```
$('emeraldForm').addEvent('submit', function(){
        onSuccess: function(){
                alert('df');
    }
    }); 
```

# javascript - javascript preventDefault() 被忽略

> ID：14561180
> 
> 赞同：1
> 
> 时间：2013-01-28T11:36:52.857
> 
> 标签：javascript, django, preventdefault, django-autocomplete-light

所以我试图找到解决我的问题的方法，但它似乎是我在 SO 和 Google 上看到的其他 preventDefault() 问题所独有的。它也可能有点太窄了，但是如果有人有任何调试技巧，那也将不胜感激。

我有一个网站向用户显示不同的视频“书签”，用户可以点击它们并更改页面上 div 中播放的视频/ seekTo 时间。用户可以在 3 个地方执行此操作。左侧是显示“最近观看的前 10 个视频”的菜单，右侧是基于 D3.js 的拓扑树，顶部有一个由 django-autocomplete-light 构建的搜索框。这三种方法都使用相同的 javascript 函数 (playvid) 来更改网页上的视频和更新元数据信息。例如，用户单击一个链接并被带到视频 1 的第 4 分钟，然后单击另一个链接并被带到视频 45 的第 9 分钟。

当我在我的开发机器上实现这一点时，所有三种方法都适用于 FF 18 和 Safari 6（Django 1.4.3、Python 2.7.3，运行 Django 的 Web 服务器）。然后我把它放到生产服务器上（Django 1.4.3、Python 2.6.6、Apache / mod_wsgi）。现在使用 django-autocomplete-light 的搜索框的方法不起作用，但是其他两个，做！我认为不同的 Python 版本不应该是罪魁祸首......？自动完成代码与我的开发代码相同，但现在看起来像是 preventDefault() 的某种 javascript 问题？但是经过数小时的调试，我无法弄清楚在哪里以及为什么，因为代码似乎只是忽略了我的 e.preventDefault(); 呼叫...这是我的 /navigation_autocomplete/脚本。

```
{% load url from future %}

<script type="text/javascript">
$(document).ready(function() {
    $('#navigation_autocomplete').yourlabsAutocomplete({
        url: '{% url 'navigation_autocomplete' %}',
        choiceSelector: 'a',
    }).input.bind('selectChoice', function(e, choice, autocomplete) {
        e.preventDefault();
        e.stopImmediatePropagation();
        var URL = choice.attr('href');
        alert('this should not follow the link!!');
        playvid(URL);
        return false;
    });
});
</script> 
```

alert() 在 FF 和 Safari 中弹出，使用 Firebug，我可以看到浏览器尝试加载 playvid() 但随后遵循链接--e.preventDefault(); 被完全忽略。如您所见，我也试图阻止冒泡（变得绝望），但没有运气。

有没有人知道为什么我的 preventDefault() 代码可能会在这个特定方法中被忽略，但它在我的其他调用中运行良好（特别是当它在所有 3 种方法的开发中运行良好时）？或有关如何跟踪此问题的调试提示？

谢谢！

===========

# 更新

我尝试了 jpic 的解决方案，但它不起作用......这是新的代码块（也许我发胖了一些东西......）：

```
<script type="text/javascript">
$(document).ready(function() {
    $('#navigation_autocomplete a').on('click', function(e) {e.preventDefault(); });
    $('#navigation_autocomplete').yourlabsAutocomplete({
        url: '/video_search/navigation/',
        choiceSelector: 'a',
    }).input.bind('selectChoice', function(e, choice, autocomplete) {
        var URL = choice.attr('href');
        alert('this should not follow the link!!');
        playvid(URL);
        return false;
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:18:33.317

## 一个模糊的实现

您的代码会阻止**selectChoice**的默认设置，但不会阻止 click ！

`input`当通过鼠标或键盘选择选项时，自动完成对象会在元素上触发 selectChoice 。它不会与`click`事件混淆。如果您不想要浏览器默认`click`事件，那么为什么要使用`<a>`？

## 替代实施建议

您可以像这样制作一个自动完成模板：

```
{% for video in video_qs %}
<span class="div choice" data-href="{{ video.get_absolute_url }}">{{ video }}</span>
{% endfor %} 
```

有了这样的js：

```
<script type="text/javascript">
$(document).ready(function() {
    $('#navigation_autocomplete')
        .yourlabsAutocomplete({
            url: '{% url 'navigation_autocomplete' %}',
            choiceSelector: '.choice',
        }).input.bind('selectChoice', function(e, choice, autocomplete) {
            playvid(choice.data('href'));
        });
});
</script> 
```

这种简单的设计是我在 django-autocomplete-light 中最喜欢的功能。

## 无论如何都要修复模糊实现

如果你真的需要不可点击`<a>`的标签，那么你可以使用 jQuery `on()`，即：

```
$('#navigation_autocomplete').on('click', 'a', function(e) { e.preventDefault(); }); 
```

例子：

```
<script type="text/javascript">
$(document).ready(function() {
    $('#navigation_autocomplete')
        .on('click', 'a', function(e) { e.preventDefault(); })
        .yourlabsAutocomplete({
            url: '{% url 'navigation_autocomplete' %}',
            choiceSelector: 'a',
        }).input.bind('selectChoice', function(e, choice, autocomplete) {
            var URL = choice.attr('href');
            playvid(URL);
        });
});
</script> 
```

# python - python importerror：没有名为mux的模块

> ID：14561183
> 
> 赞同：0
> 
> 时间：2013-01-28T11:37:01.197
> 
> 标签：python, importerror, mux

我一个月前安装了一个模块。那时，我可以成功导入模块。
现在，当我导入这个模块时，有一个`ImportError`,

```
>>> import anuga
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    File "/home/lili/anuga_core/source/anuga/__init__.py", line 110, in <module> from anuga.file_conversion.urs2nc import urs2nc
    File "/home/lili/anuga_core/source/anuga/file_conversion/urs2nc.py", line 12, in <module>
        from mux import WAVEHEIGHT_MUX_LABEL, EAST_VELOCITY_LABEL, \
    ImportError: No module named mux 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:57:39.927

仅当模块在名为 sys.path 的列表中不可用时才会出现 ImportError。由于当前操作系统是基于 Linux 的（从错误消息 /home/lili 中得到一个想法），因此需要在路径中包含 mux.py（即 sys.path）。mux.py 将与此链接中提供的文件完全相同。

```
`https://anuga.anu.edu.au/svn/anuga/trunk/anuga_core/source/anuga/file/mux.py` 
```

当anuga安装不正确时，所有这些问题都会出现。

# windows - 无法完成批处理文件

> ID：14561189
> 
> 赞同：0
> 
> 时间：2013-01-28T11:37:32.353
> 
> 标签：windows, loops, batch-file, cmd, xcopy

```
:LOOP    
:: Finds Removable Disk Letter
for /f "tokens=1-3" %%a in ('wmic logicaldisk get caption^, description') do if "%%b %%c"=="Removable Disk" set drive=%%a&goto COPY
:COPY
xcopy %drive% D:\Backup
goto :LOOP 
```

我没有这样的批量经验，我想知道，我该怎么做？: 如果可移动磁盘不存在，不要去 COPY 去 LOOP 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:38:54.893

让我们`wmic`为你做过滤：

```
:LOOP
for /f %%d in (
  'wmic logicaldisk where description^="Removable Disk" get caption ^| find ":"'
) do (
  xcopy %%d D:\Backup
)
goto LOOP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:47:05.983

```
:LOOP    
:: Finds Removable Disk Letter
for /f "tokens=1-3" %%a in ('wmic logicaldisk get caption^, description') do (
if "%%b %%c"=="Removable Disk" set drive=%%a
if not exist "%%a" goto :LOOP
)
:COPY
xcopy %drive% D:\Backup
goto :LOOP 
```

基本上，如果驱动器不存在，它将返回到`:LOOP`，如果存在，它将自动下降到`:COPY`.

# c# - 如何在运行时绑定 advBandedGridView？

> ID：14561200
> 
> 赞同：0
> 
> 时间：2013-01-28T11:38:11.613
> 
> 标签：c#, winforms, devexpress, master-detail, xtragrid

我是使用 DevExpress 的新手。我需要设计和绑定一个复杂的 DataGrid。

我使用 Designer 设计了它。数据网格的类型为 Master-Detail，它包含“MainGrid”和其他详细信息网格。其中之一是类型：'advBandedGridView'

MainGrid的设计如下图所示：

![在此处输入图像描述](../Images/2c3c9c0f7673e4e16adddbf73e6c6ba4.png)

而“advBandedGridView”的设计如下：

![在此处输入图像描述](../Images/e490e0f3a2a1fd43c4384a70e697017e.png)

现在，我需要使用 Lists 集合填充我的 DataGrid，所以我使用了以下代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Collections;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void simpleButton1_Click(object sender, EventArgs e)
        {
            ArrayList a = new ArrayList();
            Term_Space_Grid t = new Term_Space_Grid("x", "y", true, "z");
            t.expansions = new List<MyExpansions>();
            t.expansions.Add(new MyExpansions(0, "Aya", 0, 0, 0, 0, 0));
            a.Add(t);
            resultsGridControl.DataSource = a;

        }
    }

    public class Term_Space_Grid
    {
        public string x { get; set; }
        public string y { get; set; }
        public string g { get; set; }
        public bool z { get; set; }
        public List<MyExpansions> expansions { get; set; }

        public Term_Space_Grid(string x, string y, bool z, string g)
        {
            this.x = x;
            this.y = y;
            this.z = z;
            this.g = g;

        }
    }
    public class MyExpansions
    {
        public Morphos morphos { get; set; }
        public Semantics semantics { get; set; }  

        public MyExpansions(int morphoID, string morphoDerivation, int synID, int subID, int supID, int hasID, int insID)
        {
            this.morphos = new Morphos(morphoID, morphoDerivation);
            this.semantics = new Semantics(synID, subID, supID, hasID, insID);

        }

    }

    public class Morphos
    {
         //public List<Morph> morph{ get; set; }
        public Morph morph { get; set; }

         public Morphos(int morphoID, string morphoDerivation)
        {

            //this.morph = new List<Morph>();
            //this.morph.Add(new Morph(morphoID, morphoDerivation));
            this.morph = new Morph(morphoID, morphoDerivation);
         }
    }      

    public class Semantics
    {
        public List<Sem> synonyms { get; set; }
        public List<Sem> subClasses { get; set; }
        public List<Sem> superClasses { get; set; }
        public List<Sem> hasInstances { get; set; }
        public List<Sem> instanceOf { get; set; }

        public Semantics(int id1,int id2, int id3, int id4, int id5 )
        {
            this.synonyms = new List<Sem>();
            this.subClasses = new List<Sem>();
            this.superClasses = new List<Sem>();
            this.hasInstances = new List<Sem>();
            this.instanceOf = new List<Sem>();

            this.synonyms.Add(new Sem(id1));
            this.subClasses.Add(new Sem(id2));
            this.superClasses.Add(new Sem(id3));
            this.hasInstances.Add(new Sem(id4));
            this.instanceOf.Add(new Sem(id5));
        }
    }

     public class Morph
    {
         public int MorphoID { get; set; }
        public string MorphoDerivation { get; set; }

         public Morph(int morphoID, string morphoDerivation)
        {
            this.MorphoID = morphoID;
            this.MorphoDerivation = morphoDerivation;
         }
    }
    public class Sem
    {
        public int SemID { get; set; }
        //public string MorphoDerivation { get; set; }

        public Sem(int semID)
        {
            this.SemID = semID;

        }
    }
} 
```

但是，我发现结果是作为没有任何设计形式的新 DataGrid 构建的。我的意思是我在设计器中定义的详细信息选项卡不会出现在结果网格中。

结果如下：

![在此处输入图像描述](../Images/ccf8ea71fa811f5afb3d228b5487bef6.png)

笔记

1.  结果网格的设计与我的设计完全不同，我认为它就像 Lists 对象一样。
2.  另一个问题是网格单元格中出现“WindowsFormsApplication2.Morphos”和“WindowsFormsApplication2.Semantics”，而不是我传递的值！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:22:39.400

**首先**，您应该通过[GridColumn.FildName](http://help.devexpress.com/#WindowsForms/DevExpressXtraGridColumnsGridColumn_FieldNametopic)属性在数据对象属性和 GridView 列之间创建关联。
对于您的主视图 ( `gridView2`)，它看起来像这样：

```
// gridColumn1
this.gridColumn1.Caption = "ID";
this.gridColumn1.FieldName = "x"; // associate this column with Term_Space_Grid.x property
this.gridColumn1.Name = "gridColumn1"; 
```

请阅读以下文章了解更多详细信息：[创建列并将它们绑定到数据字段](http://help.devexpress.com/#WindowsForms/CustomDocument639)

**其次**，您不能直接将列绑定到对象的嵌套属性（例如绑定到`MyExpansions.semantics.subclasses.SemID`）。

要绕过此限制，您可以使用多种方法：

1.  最简单的方法是使用[Unbound Columns](http://help.devexpress.com/#WindowsForms/CustomDocument1477)和相应的[ColumnView.CustomUnboundColumnData](http://help.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_CustomUnboundColumnDatatopic)事件（您可以处理此事件以提供来自嵌套对象的数据）。
2.  您还可以使用以下知识库文章中演示的方法：[如何在网格列中显示和编辑复杂数据属性](http://www.devexpress.com/Support/Center/KB/p/A579.aspx?searchtext=ITypedList&p=T4%7CP0%7C56)

**第三**，要获得官方和有保证的答案，您应该直接向[DevExpress 支持中心](http://www.devexpress.com/Support/Center)解决与任何 DevExpress 产品相关的任何紧急问题。

# mysql - 如何找出谁在mysql中锁定表

> ID：14561201
> 
> 赞同：0
> 
> 时间：2013-01-28T11:38:14.193
> 
> 标签：mysql, query-optimization

我正在运行`show processlist`并看到许多与状态中的特定表（顺便说一句它有 myisam 引擎）类似的查询`Locked`，我只想弄清楚哪个查询卡住了所有其他查询，因为当我从列表顶部杀死第一个查询时（通过花费时间排序）它没有帮助:(

有没有可能弄清楚谁是排长队的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:56:26.140

请检查显示进程列表结果上的**时间**列，时间列值最高的应该是锁定表的查询

# jquery - 使用 jQuery 从上到下为 div 设置动画？

> ID：14561203
> 
> 赞同：3
> 
> 时间：2013-01-28T11:38:41.803
> 
> 标签：jquery, html, css

我正在使用此代码，它从上到下移动正常，但我想连续移动而不是一次。谢谢！！

```
 $(document).ready(function(){
     var bodyHeight = $('body').height();
     var footerOffsetTop = $('#moving').offset().top;
     var topToBottom = bodyHeight -footerOffsetTop;
     $('#moving').css({top:'auto',bottom:topToBottom});
     $("#moving").delay(100).animate({
     top: '100px',
     }, 3000);  
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:42:23.447

```
$(document).ready(function() {
    setInterval(function(){
        var bodyHeight = $('body').height();
        var footerOffsetTop = $('#moving').offset().top;
        var topToBottom = bodyHeight - footerOffsetTop;
        $('#moving').css({
            top : 'auto',
            bottom : topToBottom
        });
        $("#moving").delay(100).animate({
            top : '100px',
        }, 3000);       
    }, 3200);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:10:34.917

试试这个：

```
$(document).ready(function() {
    var bodyHeight = $('body').height();
    var footerOffsetTop = $('#moving').offset().top;
    var topToBottom = bodyHeight - footerOffsetTop - $('#moving').outerHeight();

    $("#moving").animate({
        top : topToBottom,
    }, 3000);
}); 
```

**演示 - [http://jsfiddle.net/c9db5/](http://jsfiddle.net/c9db5/)**

你根本不需要`setInterval`这里。您只需要计算出屏幕高度减去`#moving`div 的高度，然后您就可以一次完成动画。

# asp.net - 即使有行返回，Linq-to-Sql count() 也会返回 0

> ID：14561205
> 
> 赞同：0
> 
> 时间：2013-01-28T11:38:45.140
> 
> 标签：asp.net, .net, linq-to-sql

我不太清楚为什么我无法使用 linq-to-sql 获取返回的行数

我有这个查询用作验证：

```
var obj1 = (from c in context.sistema_DocType_Index
where c.indexId == id
select c).First();

if(obj1 != null) {} 
```

如果没有返回行，我使用 First() 方法得到一个空异常。好的，所以我决定使用 Count()。

```
var obj1 = (from c in context.sistema_DocType_Index
where c.indexId == id
select c).Count();

if(obj1  > 0) {} 
```

我有 3 行从数据库返回，但 Count() 给了我 0。这是为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:41:03.827

你可以使用`Any();`方法。这是这种情况下的最佳用途。[任何（）](http://msdn.microsoft.com/en-us/library/bb337697.aspx)

```
if( YourDataCollection.Any(SomeCOndtion==SOmeValue))
 { 
 //  do some logic
 } 
```

# sql - 在 Oracle 中为 varchar2 字段创建序列

> ID：14561210
> 
> 赞同：4
> 
> 时间：2013-01-28T11:38:59.413
> 
> 标签：sql, database, oracle, sequences

我想为这个 varchar 创建一个序列。如果它是一个数字而不是 varchar，那会更容易。在那种情况下，我可以做

> seq_no := seq_no + 1;

但是，当我想将列中的下一个值存储为 A0000002 时，当上一个值为 A0000001（将下一个 varchar 行中的数字增加 1）时，我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T12:08:51.210

这可以通过

```
to_char(seq_no,'FM0000000') 
```

您的示例可以通过在 oracle 中创建序列来完成

```
create sequence seq_no  start with 1 increment by 1; 
```

然后

```
select 'A'||to_char(seq_no.nextval,'FM0000000') from dual; 
```

现在我已经在双重使用..但是把这个

```
'A'||to_char(seq_no.nextval,'FM0000000') 
```

在您所需的查询中..这将创建您提到的序列

**[sqlfiddle](http://sqlfiddle.com/#!4/231d5/1)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T11:48:15.500

序列是纯数字的。但是，无论如何您都需要一个触发器，因此只需调整此类触发器以插入所需的前缀：

```
CREATE OR REPLACE TRIGGER FOO_TRG1
    BEFORE INSERT
    ON FOO
    REFERENCING NEW AS NEW OLD AS OLD
    FOR EACH ROW
BEGIN
    IF :NEW.FOO_ID IS NULL THEN
        SELECT 'A' || TO_CHAR(FOO_SEQ1.NEXTVAL, 'FM0000000') INTO :NEW.FOO_ID FROM DUAL;
    END IF;
END FOO_TRG1;
/
ALTER TRIGGER FOO_TRG1 ENABLE; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T14:03:33.973

如果可以的话，我实际上会使用[CREATE TABLE](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#SQLRF01402)语法中定义的虚拟列。如果需要，它可以更容易地扩展。

这是一个工作示例。

```
SQL> create table tmp_test (
  2     id number(7,0) primary key
  3   , col1 number
  4   , seq varchar2(8 char) generated always as (
  5           'A' || to_char(id, 'FM0999999'))
  6      );

Table created.

SQL>
SQL> create sequence tmp_test_seq;

Sequence created.

SQL>
SQL> create or replace trigger tmp_test_trigger
  2    before insert on tmp_test
  3    for each row
  4  begin
  5
  6    :new.id := tmp_test_seq.nextval;
  7  end;
  8  /

Trigger created.

SQL> show errors
No errors.
SQL>
SQL> insert into tmp_test (col1)
  2   values(1);

1 row created.

SQL>
SQL> select * from tmp_test;

        ID       COL1 SEQ
---------- ---------- --------------------------------
         1          1 A0000001 
```

话说回来; 除非您有令人难以置信的紧迫业务需求，否则您最好不这样做。通过在数字前面加上一个常数值来让自己的生活变得更加困难并没有什么意义。因为 A 将永远是 A，所以它是否存在并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T11:46:15.140

如果格式始终是一个字母后跟 7 位数字，您可以执行以下操作：

```
sequence = lpad(substr(sequence,2,7)+1,7,'0') 
```

# java - 在android中使用html内容创建tableview

> ID：14561211
> 
> 赞同：-4
> 
> 时间：2013-01-28T11:39:01.527
> 
> 标签：java, android, html, append, stringbuffer

我必须使用带有 html 内容的 stringbuffer 开发一个 android 本机应用程序。

在这里，我使用了以下代码：

```
PayPalInvoiceItem item1 = new PayPalInvoiceItem();

sb.append("<html><body><table>");

         for (int i = 0; i < Constants.mItem_Detail
                    .size(); i++) {

                String title = Constants.mItem_Detail
                        .get(i).get(
                                SingleMenuItem.KEY_PNAME);

                String qty = Constants.mItem_Detail.get(i)
                        .get(SingleMenuItem.KEY_QTY);

                String cost = Constants.mItem_Detail.get(i)
                        .get(SingleMenuItem.KEY_PRICE);

                String total = Constants.mItem_Detail
                        .get(i).get(
                                SingleMenuItem.KEY_TOTAL);
                 total_count=total_count+Integer.parseInt(qty);

            StringBuffer buffer = sb.append("<tr>" + "<td>" + title
                        + "</td><td>" + qty + " * " + cost
                        + "</td>" + " = <td>" + total
                        + "  " + "</td></tr>"); 

             item1.setName(buffer.toString()); 
```

现在我必须运行应用程序意味着我的输出看起来像

```
<html><body><table>"<tr>" "<td>"krishna
                        "</td><td>" 1 " * " 100
                        + "</td>" = <td>" 100
                        + "  " + "</td></tr> 
```

但我需要像这样的o/p：

```
krishna  1   100   100
   veni       2   30       60 
```

我能怎么做？？？？请帮我 ？？？

**编辑：**

在这里我必须将下面的行更改`item1.setName(buffer.toString());` 为

```
item.setName(buffer.toString(), "text/html; charset=utf-8"); means am getting following error: 
```

PayPalInvoiceItem 类型中的方法 setName(String) 不适用于参数 (String, String) 我该如何解决这些错误？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:22:21.493

您要尝试的“项目”是`setName`什么？通过事物的声音，您可能只需要创建一个`WebView`这样的：

```
WebView view = new WebView(this);
view.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
view.loadData(stringBuffer.toString(), "text/html", "UTF-8");
setContentView(view); 
```

您似乎也没有正确终止 HTML，即您最后一次写入`StringBuffer`应该是：

```
stringBuffer.append("</table></body></html>"); 
```

还要检查您的线路：

`total_count=total_count+Integer.parseInt(qty);`

不应该是：

```
total_count=total_count+Integer.parseInt(total); 
```

# date - SAS 特定日期格式

> ID：14561212
> 
> 赞同：3
> 
> 时间：2013-01-28T11:39:05.233
> 
> 标签：date, format, sas

我在这个论坛中发现了几个关于 SAS 日期的问题，但我一直无法找到这个问题的答案。我认为这很简单，但我无法正确理解。

我有一个带有日期（DD-MM-YYYY）的数据集，由于某种原因它具有字符格式。我希望它被翻译成日期格式（YYYY-MM-DD）。我可以通过分离和连接各部分来使其“看起来”正确，但是，我无法正确获取格式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:49:05.243

使用具有适当信息的 input() 函数：

`datevariable=input(textvariable,ddmmyy10.);`

# eclipse - Xlib：意外的异步回复（序列 0x1cb4）！

> ID：14561221
> 
> 赞同：0
> 
> 时间：2013-01-28T11:39:50.390
> 
> 标签：eclipse, junit, swt, awt, junit4

我无法在 SLED 10 机器上运行 Windows 测试器。当我尝试将测试作为 JUnit 插件在测试中运行时，eclipse 启动并且我`Xlib: unexpected async reply (sequence 0x1cb4)!`在控制台中看到错误并且 eclipse 什么也不做。我用谷歌搜索并找到了这个问题的 n 号帖子，但没有适当的解决方案。如果有人遇到问题并找到解决方案，请随时回复此帖子。

注意：此链接清楚地描述了该问题`http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6386791`

这是我机器的配置

```
LSB_VERSION="core-2.0-noarch:core-3.0-noarch:core-2.0-ia32:core-3.0-ia32"
SUSE Linux Enterprise Desktop 10 (i586)
VERSION = 10
PATCHLEVEL = 4
SUSE Linux Enterprise Desktop 10 (i586)
VERSION = 10
PATCHLEVEL = 4 
```

谢谢迪帕克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:40:06.427

我也遇到了这个问题。我想要做的是为我的 Qt 应用程序制作一个插件，它将移动鼠标并测试 GUI。使用 X11 库移动鼠标。该插件启动一个单独的 QThread，在这个线程中我调用 Qt 函数来检索有关小部件的信息，但我从未设置任何位置或任何东西。甚至从另一个线程调用 Qt 函数也可能导致错误。

# vaadin - 如何在 vaadin 中播放视频？

> ID：14561222
> 
> 赞同：3
> 
> 时间：2013-01-28T11:39:51.317
> 
> 标签：vaadin

我使用了两个视频组件

```
Video video = new Video(); 
```

并嵌入

```
Embedded embed = new Embedded("my video", new ExternalResource("yyy/xxx.mp4")); 
embed.setMimeType("application/x-shockwave-flash"); 
```

这在使用 safari 浏览器的 iphone 中播放得很好，但在我的电脑上使用 mozilla firefox 浏览器时它没有播放。

它在 mime 类型中显示了类似的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:23:15.723

您可以从 vaadin sampler 检查此代码：

```
Embedded e = new Embedded(null, new ExternalResource(
            "http://www.youtube.com/v/meXvxkn1Y_8&hl=en_US&fs=1&"));
    e.setAlternateText("Vaadin Eclipse Quickstart video");
    e.setMimeType("application/x-shockwave-flash");
    e.setParameter("allowFullScreen", "true");
    e.setWidth("320px");
    e.setHeight("265px");
    addComponent(e); 
```

它适用于我的chrome和firefox。我认为您的 Firefox 插件可能会导致此问题。

# jquery - jQuery：显示/隐藏表格行

> ID：14561223
> 
> 赞同：0
> 
> 时间：2013-01-28T11:39:56.357
> 
> 标签：jquery

我试图通过为 tr 元素的类属性分配一个数字 id 来显示隐藏表行

我对其进行了编码，以便显示此编号 id 的第一个实例，而其余的则隐藏。单击第一个实例应显示具有相同 ID 的其余行。

这是我到目前为止的代码，但是它无法显示其余的行：

以下代码在 document.ready 函数中

```
var ids = ["1","2","3","4","5","6","7","8","9","10"];

        var i;

        for (i = 0; i < ids.length; i++) {

             $("." + ids[i]).hide()

             $("." + ids[i] + ":first").show()

             $("." + ids[i] + ":first").click(function () {

                if( $("." + ids[i] + ":last").css('display') == 'none') {

                    $("." + ids[i]).show()

                } else {

                     $("." + ids[i]).hide()

                     $("." + ids[i] + ":first").show()

                }

            });

        } 
```

html只是

```
<tr class="<%= @current_id %>">
<td>test data</td>
<td>test data</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:46:48.243

你有很多错误：

```
$("." + ids[i] + ":first")
to
$("." + ids[i]).first() 
```

然后

```
if( $("." + ids[i] + ":last").css('display') == 'none')

to 

if( $("." + ids[i]).last().is(':visible')) 
```

然后关闭所有方法`";"`：

```
$("." + ids[i]).show() 
```

到

```
$("." + ids[i]).show(); 
```

类`.1`或`.2`等..也无效，您应该将其替换为`.1-row`

那么，实际上你正在选择所有`tr`但不是`td`元素，你应该做一些类似的事情：

```
$("."+ids[i]).children('td').first().....ect /*this select the first td of the tr*/ 
```

# cakephp - 如何在 cakephp 中分组和排序

> ID：14561224
> 
> 赞同：1
> 
> 时间：2013-01-28T11:40:02.847
> 
> 标签：cakephp, group-by

如何在 cakephp 中按字段分组和按 DESC 排序？

```
$this->set('messages', $this->Message->find('all',array('conditions' => array('Message.receiver_id'=>$this->Session->read('Auth.User.id')),'group' => array('Message.user_id'),'order' => array('max(Message.created) ASC')))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-04-29T11:33:11.150

在 cakePhp 中获取记录取决于模型是

```
$records = $this->Model->find('all', array(
            'conditions' => array(conditons),
            'fields' => array(fieldlist),
            'group' => array('Model.column'),
            'order' => array('Model.column', 'Model.column2 DESC')
        )); 
```

从您的代码中，您可以编写为

```
$data = $this->Message->find('all', array(
               'conditions' => array( 'Message.receiver_id'=>$this->Session->read('Auth.User.id')),
               'group' => array('Message.user_id'),
               'order' => array('max(Message.created) ASC')
               ));

$this->set('messages', $data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:24:54.900

```
$records = $this->Model->find('all', array(
            'conditions' => array(conditons),
            'recursive' => -1,
            'fields' => array(fieldlist),
            'group' => array('Model.column'),
                    'order' => array('Model.column', 'Model.column2 DESC')
        )); 
```

如果您想按插入的最新消息排序，而不是像这样`created`使用排序方式排序`id``Model.id DESC'`

# php - 如何在表中显示数据库中的值

> ID：14561226
> 
> 赞同：0
> 
> 时间：2013-01-28T11:40:07.553
> 
> 标签：php, html

我在 PHP 中创建了一个简单的 html 表。这是我的代码：

```
<div id="wrapper">
    <div class="chart">
        <h2>Files Uploaded to Knowledge Base</h2>
        <table id="data-table" border="1" cellpadding="10" cellspacing="0">

        <tr id=header>
                <td>Users</td>
                <td id=center>Project Files</td>
                <td id=center>Process Files</td>
                <td id=center>System Files</td>
                <td id=center>Total Files</td>
        </tr>   

                    <?php

                    $di = new RecursiveDirectoryIterator('upload/project/');
                    foreach (new RecursiveIteratorIterator($di) as $filename => $file) {

                    $pos = 15;
                    $file = substr("$filename", +$pos); 

                    $lenght = strlen($file);
                    $pos = strpos($file, "/");
                    $file = substr("$file",0,$pos);
                    if($file1 != '.DS_Store'){

                        $serverfiles = mysql_query("SELECT uploader FROM Project WHERE location = '$file'");

                        while($row = mysql_fetch_array($serverfiles)) {
                            $occurance1 = $row['uploader'];
                            $array1[] = $occurance1; 
                            }
                        }                           
                    }

                    $di = new RecursiveDirectoryIterator('upload/process/');
                    foreach (new RecursiveIteratorIterator($di) as $filename => $file) {

                    $pos = 15;
                    $file = substr("$filename", +$pos);                         
                    $lenght = strlen($file);
                    $pos = strpos($file, "/");
                    $file = substr("$file",0,$pos);

                    if($file != '.DS_Store'){

                        $serverfiles = mysql_query("SELECT uploader FROM Process WHERE processlocation = '$file'");

                        while($row = mysql_fetch_array($serverfiles)) {
                            $occurance2 = $row['uploader'];
                            $array2[] = $occurance2; 
                            }
                        }                           
                    }

                    $di = new RecursiveDirectoryIterator('upload/system/');
                    foreach (new RecursiveIteratorIterator($di) as $filename => $file) {

                    $pos = 14;
                    $file = substr("$filename", +$pos);                         
                    $lenght = strlen($file);
                    $pos = strpos($file, "/");
                    $file = substr("$file",0,$pos);
                    if($file != '.DS_Store'){

                        $serverfiles = mysql_query("SELECT uploader FROM System WHERE location = '$file'");

                        while($row = mysql_fetch_array($serverfiles)) {
                            $occurance3 = $row['uploader'];
                            $array3[] = $occurance3; 
                            }
                        }                           
                    }

                    $table_rows = array();
                    $counter = 0;
                    $uploader = mysql_query("Select username from members");
                    while($Load = mysql_fetch_array($uploader)){
                    $value = $Load['username'];

                    $tmp = array_count_values($array1);
                    $cnt = $tmp[$value];

                    $tmp2 = array_count_values($array2);
                    $cnt2 = $tmp2[$value];

                    $tmp3 = array_count_values($array3);
                    $cnt3 = $tmp3[$value];

                    $total = $cnt + $cnt2 + $cnt3;

                    //putting the values into array
                    $counter++;
                    $table_rows[$counter] = array();
                    $table_rows[$counter]['username'] = $value;
                    $table_rows[$counter]['project'] = $cnt;
                    $table_rows[$counter]['process'] = $cnt2;
                    $table_rows[$counter]['system'] = $cnt3;
                    $table_rows[$counter]['total'] = $total;
                    }

                    //function to sort the highest total value
                    function cmp_rows($a,$b) {
                    if ($a['total'] == $b['total']) {
                    return 0;
                    }
                    return ($a['total'] > $b['total']) ? -1 : 1;
                    }

                    usort($table_rows, 'cmp_rows');

                    //loop that prints values
                    foreach($table_rows as $row) {
                    echo "<tr>";
                    echo "<td>{$row['username']}</td>";
                    echo"<td id=center>{$row['project']}</td>";
                    echo"<td id=center>{$row['process']}</td>";
                    echo "<td id=center>{$row['system']}</td>";
                    echo "<td id=center>{$row['total']}</td>";
                    }

                    ?>

        </table>

   </div>

    </body></html> 
```

用户是从数据库表中填充的。通过读取和计算目录中的文件数量来填充文件数字。该表按最高排序。我还想为每个成员显示成员表中“accessDate”列中的值，但我不确定如何执行此操作。它不像上面的其他值那样工作..

我不知道该怎么做。有人可以指导我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:17:53.763

如果您只是想将格式化的日期放入您的表格中，那么可以这样做（ - 请参阅[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html #function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)用于 MySQL 中的日期格式）

```
...
//MySQL can format the date for you
$uploader = mysql_query(
    "Select username, DATE_FORMAT(accessDate,'%m %d, %Y') formatted_date from members");
while($Load = mysql_fetch_array($uploader))
{
...
    //putting the values into array
    $counter++;
    $table_rows[$counter] = array();
    $table_rows[$counter]['date'] = $Load['formatted_date'];
    $table_rows[$counter]['username'] = $value;
...
}
...
foreach($table_rows as $row)
{
                echo "<tr>";
                echo "<td>{$row['username']}</td>";
                echo "<td>{$row['date']}</td>";
...
}
... 
```

# c# - 的含义是什么？操作员？

> ID：14561228
> 
> 赞同：1
> 
> 时间：2013-01-28T11:40:11.803
> 
> 标签：c#, operators

> **可能重复：**
> [C# 在类型后使用问号，例如：int? 我的变量；这是做什么用的？](https://stackoverflow.com/questions/2690866/c-sharp-using-the-question-mark-after-a-type-for-example-int-myvariable-what)

我看到该`?`运算符在很多地方都使用过，并尝试使用 Google 和 StackOverflow 对其进行搜索，但两个搜索引擎都将其从查询中排除，并且没有返回任何好的答案。

这个运算符的含义是什么？我通常在类型声明之后看到它，例如：

```
int? x;
DateTime? t; 
```

`int`例如，以下两个声明有什么区别：

```
int? x;
// AND
int x; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:41:19.027

此运算符不是运算符，而只是[Nullable 类型](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)的语法糖：

```
int? x; 
```

是相同的

```
Nullable<int> x; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T11:43:06.467

您可以阅读以下内容：[**Nullable 类型 - 为什么我们在编程语言中需要 Nullable 类型？**](http://pranayamr.blogspot.ca/2010/12/nullable-type-why-we-need-nullable.html)

```
int? x;//this defines nullable int x
x=null; //this is possible
// AND
int x; // this defines int variable
x=null;//this is not possible 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T11:41:28.473

它不是运算符，`int?`而是`Nullable<int>`. `Nullable<>`是允许设置一些值类型变量空值的容器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T11:42:01.257

它叫[*`nullable types`*](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx)。

> Nullable 类型是 System.Nullable 结构的实例。可空类型可以表示其基础值类型的正常值范围，外加一个额外的空值。

```
int? x; 
```

相当于

```
Nullable<int> x; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T11:42:12.583

`?`运算符指示类型可以为空。例如;

```
int? x = null; //works properly since x is nullable 
```

和

```
int x = null; //NOT possible since x is NOT nullable 
```

请注意，您访问变量值的方式会发生变化；

```
int? x = null; 
int y = 0;
if (x.HasValue)
{
    y = x.Value; // OK
} 
```

和

```
y = x; //not possible since there is no direct conversion between types. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T11:43:12.583

黑白差异？和 int 是 int 吗？可以存储 null 但 int 不能。

诠释？被称为可空运算符，它基本上在处理数据库实体时使用。

更多信息 - [http://msdn.microsoft.com/en-us/library/1t3y8s4s(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/1t3y8s4s(v=vs.80).aspx)

希望这可以帮助 ！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-28T11:43:15.467

该运算符使所有不可为空的对象都可以为空。所以这意味着如果你将声明一个变量int？x，它可以这样分配： int? x = 空。如果没有？符号，您不能为其分配空值。

# c# - 如何创建一个带有索引号的列表框，后跟列表项

> ID：14561233
> 
> 赞同：1
> 
> 时间：2013-01-28T11:40:20.443
> 
> 标签：c#, winforms, listview, listbox

在 Winforms 中，我想显示一个具有项目索引号和项目的列表框，如下所示![数字](../Images/9a7095bb4c62065c5d3409f103e2db0d.png)。我已经浏览了许多 SO 链接和许多文章，其中大多数都使用 ListView 而不是 ListBox 并且也不是显示 List Item 索引，而是在其中显示 Image+ Item。我对列表视图没问题，但我的目标是显示项目及其相应的索引，并且在选择时它应该只给我项目。任何人都可以为我提供任何链接或想法来使用 C# 在 Winform 中实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:45:36.110

您可以自定义您的列表框

以下链接将指导您正确的方向。

[http://www.codeproject.com/Articles/15464/Extending-the-ListBox-to-show-more-complex-items](http://www.codeproject.com/Articles/15464/Extending-the-ListBox-to-show-more-complex-items)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:58:36.427

我认为您应该考虑将列表框上的 DrawMode 属性设置为 DrawMode.Manual 并处理代码中项目的绘制。

看看[http://msdn.microsoft.com/en-us/library/system.windows.forms.drawmode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.drawmode.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:31:25.227

我认为您最好的选择是使用`DataGridView`两列：

*   `DataGridViewButtonColumn`, AutoSizeMode = 所有细胞
*   `DataGridViewTextBoxColumn`, ReadOnly = true, AutoSizeMode = Fill

又`RowHeadersVisible`和`ColumnHeadersVisible`以假。结果：

![在此处输入图像描述](../Images/c9d5f08d3db640c37da587c5b0834abf.png)

代码：

```
string[] members = { "Beverages", "Condiments", "Confections" };
dataGridView1.DataSource = members.Select((x, i) => new { Value = x, Index = i })
                                  .ToList(); 
```

您还需要将列设置`DataPropertyName`为索引和值。

更新（对于 .NET 2.0）：

```
string[] members = { "Beverages", "Condiments", "Confections" };
dataGridView1.AutoGenerateColumns = false;
dataGridView1.DataSource = members; 
```

订阅 CellFormatting 事件：

```
void dataGridView1_CellFormatting(object sender, 
                                  DataGridViewCellFormattingEventArgs e)
{
    if (e.ColumnIndex == 0)
    {
        e.Value = e.RowIndex;
        return;
    }

    e.Value = dataGridView1.Rows[e.RowIndex].DataBoundItem;
} 
```

# spring-mvc - Spring MVC 与 Spring Security 的集成测试

> ID：14561235
> 
> 赞同：26
> 
> 时间：2013-01-28T11:40:24.900
> 
> 标签：spring-mvc, spring-security, spring-test-mvc

我正在尝试使用 mvc-test 测试我的登录页面。在添加弹簧安全性之前，我工作得很好。

我的代码是：

```
 mockMvc.perform(
     post("j_spring_security_check")
                    .param(LOGIN_FORM_USERNAME_FIELD, testUsernameValue)
                    .param(LOGIN_FORM_PASSWORD_FIELD, testPasswordValue))
                .andDo(print())
                .andExpect(status().isOk())
                .andExpect(model().attribute(LOGIN_PAGE_STATUS_VALUE, LOGIN_PAGE_STATUS_FALSE_INDICATOR)); 
```

测试类添加了正确的注释：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(locations = {"classpath:security-context.xml", "classpath:applicationContext.xml", "classpath:test-contexts/test-context.xml" }) 
```

我的过滤器已定义（在 web.xml 中）：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

当我尝试在 @ContextConfiguration 中添加 web.xml 时，它失败了，当我删除它时，我得到一个异常：

```
java.lang.AssertionError: Status expected:<200> but was:<405> 
```

有什么方法可以添加 DelegatingProxyFilter 以使用我的 security-context.xml 中定义的配置来测试上下文以使其正常工作？我尝试了一些关于注入 FilterProxyChain 的教程，但在我的情况下它不起作用。

有人可以帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-28T20:29:50.233

**更新**：Spring Security 4+ 提供了[与 MockMvc 的开箱即用集成](http://docs.spring.io/spring-security/site/docs/4.0.x/reference/htmlsingle/#test-mockmvc)。为了使用它，请确保您使用`apply(springSecurity())`如下所示：

```
import static org.springframework.security.test.web.servlet.setup.SecurityMockMvcConfigurers.*;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
@WebAppConfiguration
public class MockMvcSecurityTests {

    @Autowired
    private WebApplicationContext context;

    private MockMvc mvc;

    @Before
    public void setup() {
        mvc = MockMvcBuilders
                .webAppContextSetup(context)
                .apply(springSecurity())
                .build();
    }
    ...
} 
```

**原始答案**

我不确定“当我尝试在 @ContextConfiguration 添加 web.xml 时失败”是什么意思，但是，您可以使用 Spring Test MVC 来验证 Spring Security。[spring-test-mvc 项目中](https://github.com/SpringSource/spring-test-mvc/blob/master/src/test/java/org/springframework/test/web/server/samples/context/SpringSecurityTests.java)有一个很好的例子。

基本轮廓看起来像这样：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(locations = {"classpath:security-context.xml", "classpath:applicationContext.xml", "classpath:test-contexts/test-context.xml" })
public class MyTests {

    @Autowired
    private FilterChainProxy springSecurityFilterChain;

    @Autowired
    private WebApplicationContext wac;

    private MockMvc mockMvc;

    @Before
    public void setup() {
        this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac)
            .addFilters(this.springSecurityFilterChain).build();
    }
} 
```

这个想法是你`@Autowire`（代表`FilterChainProxy`什么`DelegatingProxyFilter`）并指示`MockMvc`使用`FilterChainProxy`.

**注意**spring-test-mvc 已集成到 spring-test-3.2+ 和 Spring 3.1.x 的单独项目中，因此您可以相当互换地使用该示例（spring-test-mvc 不支持`@WebAppConfiguration`并且必须使用`WebContextLoader`） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T21:25:29.960

在 pom.xml 中添加

```
<repository>
    <id>spring-snaspho</id>
    <url>http://repo.springsource.org/libs-milestone/</url>
</repository>

<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-test</artifactId>
    <version>4.0.0.M1</version>
</dependency> 
```

并使用 org.springframework.security.test.web.servlet.request.SecurityMockMvcRequestPostProcessors 进行授权请求。[请参阅https://github.com/rwinch/spring-security-test-blog](https://github.com/rwinch/spring-security-test-blog) ( [https://jira.spring.io/browse/SEC-2592](https://jira.spring.io/browse/SEC-2592) )上的示例用法

# c# - System.Core.dll 中出现“System.StackOverflowException”类型的未处理异常

> ID：14561242
> 
> 赞同：10
> 
> 时间：2013-01-28T11:40:46.637
> 
> 标签：c#, asp.net-mvc, unity-container

在我的 Asp.net MVC 项目中

我有一个初始化统一容器的引导程序。

我不知道为什么，但我明白了

> System.Core.dll 中出现“System.StackOverflowException”类型的未处理异常

我已经检查了两倍，并且仅在我的初始化程序中完成了注册。

所有依赖项仅注入到 ctors 中。

是什么原因造成的？

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);

        Initializer.Initialize();
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    } 
```

失败后`BundleConfig.RegisterBundles(BundleTable.Bundles);`

```
public static class Initializer
{
    private static bool isInitialize;
    private static readonly object LockObj = new object();
    private static IUnityContainer defaultContainer = new UnityContainer();

    static Initializer()
    {
        Initialize();
    }

    public static void Initialize()
    {
        if (isInitialize)
            return;

        lock (LockObj)
        {
            IUnityContainer container = defaultContainer;

            //registering Unity for MVC
            DependencyResolver.SetResolver(new UnityDependencyResolver(container));

            //registering Unity for web API
            //  GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container);

            #region managers
            container.RegisterType<ISettingsManager, SettingsManager>();

            container.RegisterType<IMamDataManager, MamDataManager>();

            container.RegisterType<IAppsDataManager, AppsDataManager>();
            #endregion

            #region Dals
            container.RegisterType<IDal<ClientService.DAL.EntityFramework.App>, AppsDal>();

            #endregion Dals

            #region cache
            container.RegisterType<ICache<string, ClientService.DAL.EntityFramework.Group>, GroupsCache>(new ContainerControlledLifetimeManager());

            container.RegisterType<ICache<string, ClientService.DAL.EntityFramework.App>, AppsCache>(new ContainerControlledLifetimeManager());

            container.RegisterType<ICache<string, SettingsServiceData>, SettingsServiceDataCache>(new ContainerControlledLifetimeManager());
            #endregion cache

            #region Pollers
            container.RegisterType<IPoller<ClientService.DAL.EntityFramework.Group>, GroupsPoller>(new ContainerControlledLifetimeManager());

            container.RegisterType<IPoller<ClientService.DAL.EntityFramework.App>, AppsPoller>(new ContainerControlledLifetimeManager());

            container.RegisterType<IPoller<SettingsServiceData>, SettingsPoller>(new ContainerControlledLifetimeManager());

            #endregion Pollers

            container.RegisterType<IDefaultConfigurationGroupSingleton, DefaultConfigurationGroupSingleton>(new ContainerControlledLifetimeManager());

            container.RegisterType<IApplicationLogger, Log4NetLogger>();

            if (!isInitialize)
            {
                isInitialize = true;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-28T11:48:27.543

在不提供代码的情况下，我猜这是由于循环依赖。另一个可能的原因是您的一个构造函数中有一个不正确的循环。

例如，A 类需要解析 B 的实例；B 类需要解析 C 类的实例，C 类需要解析 A 的实例。这会导致无限循环：

```
public class A
{
    public A(B b)
    {
    }
}

public class B
{
    public B(C c)
    {
    }
}

public class C
{
    public C(A a)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-20T22:12:02.643

正如 Rafael 提到的，这通常是由循环依赖引起的，但是如果您需要这些依赖，您可以通过手动解决其中的一些来修复它。

例如：

```
// Register the UnityContainer with itself
container.RegisterInstance<IUnityContainer>(container);

public class A
{
    public A(B b) {}
}

public class B
{
    public B(C c) {}
}

public class C
{
    private readonly IUnityContainer _container;
    private A _a => _container.Resolve<A>();

    public C(IUnityContainer container) {
        _container = container;
    }
} 
```

这意味着在使用它之前无需了解 A 就可以构建 C :)

# php - 搜索具有相关性的大型 mysql 数据库

> ID：14561246
> 
> 赞同：20
> 
> 时间：2013-01-28T11:41:05.930
> 
> 标签：php, mysql, search, left-join, inner-join

我正在为我们公司的 Intranet 构建一个相当大的“搜索”引擎，它有 1miljon 以及它在相当快的服务器上运行的条目，但某些搜索查询最多需要 1 分钟。

这就是桌子的样子

![桌子](../Images/bdff01fb017644050454f4f6aedc8b90.png)

我尝试为它创建一个索引，但似乎我遗漏了什么，这就是显示索引的显示方式

![索引](../Images/93d3a205d335cdde17a3f48278af3d57.png)

这就是查询本身，主要是降低查询速度的排序，但即使是没有排序的查询也有点慢。

```
SELECT SQL_CALC_FOUND_ROWS *
FROM `businessunit`
INNER JOIN `businessunit-postaddress` ON `businessunit`.`Id` = `businessunit-postaddress`.`BusinessUnit`
WHERE `businessunit`.`Name` LIKE 'tanto%'
ORDER BY `businessunit`.`Premium` DESC ,
CASE WHEN `businessunit`.`Name` = 'tanto'
THEN 0
WHEN `businessunit`.`Name` LIKE 'tanto %'
THEN 1
WHEN `businessunit`.`Name` LIKE 'tanto%'
THEN 2
ELSE 3
END , `businessunit`.`Name`
LIMIT 0 , 30 
```

很感谢任何形式的帮助

**编辑：** 阻塞这个查询 99% 是按与通配符的相关性排序。`%` 当我做解释时，它说使用 where；使用 fsort

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T11:52:51.007

您应该尝试 sphinx 搜索解决方案，它是全文搜索引擎，它将为您提供非常好的性能以及许多设置相关性的选项。

[点击这里](http://sphinxsearch.com/)了解更多详情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T15:41:36.410

MySQL 非常适合存储数据，但在涉及基于文本的快速搜索时却不是很好。

除了已经建议的狮身人面像，我推荐两个很棒的搜索引擎：

1.  [Solr](http://lucene.apache.org/solr/)与[http://pecl.php.net/package/solr](http://pecl.php.net/package/solr) - 非常流行的搜索引擎。用于像 NetFlix 这样的大规模服务。

2.  [Elastic Search](http://www.elasticsearch.org/) - 相对较新的软件，但拥有非常活跃的社区和很多尊重

两种解决方案都基于同一个库[Apache Lucene](http://lucene.apache.org/core/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-28T11:52:07.060

似乎索引不涵盖`Premium`，但这是第一个`ORDER BY`参数。

用于`EXPLAIN your query here`找出查询计划并更改索引以删除任何表扫描，如[http://dev.mysql.com/doc/refman/5.0/en/using-explain.html中所述](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T07:35:20.850

大多数面向搜索引擎的网站都使用`FULL-TEXT-SEARCH`. `select`与...相比，它会更快`LIKE`...我添加了一个示例和一些链接...我认为这对您很有用...在此全文搜索中也有一些条件...

**步骤1**

```
CREATE TABLE articles (
    id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
    title VARCHAR(200),
    body TEXT,
    FULLTEXT (title,body)
); 
```

**第2步**

```
INSERT INTO articles (title,body) VALUES
    ('MySQL Tutorial','DBMS stands for DataBase ...'),
    ('How To Use MySQL Well','After you went through a ...'),
    ('Optimizing MySQL','In this tutorial we will show ...'),
    ('1001 MySQL Tricks','1\. Never run mysqld as root. 2\. ...'),
    ('MySQL vs. YourSQL','In the following database comparison ...'),
    ('MySQL Security','When configured properly, MySQL ...'); 
```

**STEP:3**
*自然语言全文搜索：*

```
SELECT * FROM articles
    WHERE MATCH (title,body) AGAINST ('database'); 
```

*布尔全文搜索*

```
SELECT * FROM articles WHERE MATCH (title,body)
     AGAINST ('+MySQL -YourSQL' IN BOOLEAN MODE); 
```

浏览此链接 [viralpatel.net](http://viralpatel.net/blogs/full-text-search-using-mysql-full-text-search-capabilities/)、[devzone.zend.com](http://devzone.zend.com/26/using-mysql-full-text-searching/)、[sqlmag.com](http://www.sqlmag.com/article/sql-server-70/sample-full-text-search-engine-8967)、[colorado.edu](http://www.colorado.edu/conflict/peace/usip_exmpl_srch.html)、[en.wikipedia.org](http://en.wikipedia.org/wiki/Full_text_search)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-05T23:39:39.480

如果“ORDER BY”确实是瓶颈，直接的解决方案是从查询中删除“ORDER BY”逻辑，并使用 C# 排序直接在应用程序代码中重新实现排序。不幸的是，这意味着您还必须将分页移动到您的应用程序中，因为您需要获得完整的结果集，然后才能对其进行排序和分页。我只是提到这一点，因为到目前为止似乎没有其他人想到它。

坦率地说（就像其他人指出的那样），您在顶部显示的查询不需要全文索引。只要有问题的列上有可用的 BTREE（而不是 HASH）索引，单个后缀通配符（例如，LIKE 'ABC%'）就应该非常有效。

而且，就我个人而言，我什至不反对双通配符（例如，LIKE '%ABC%"），它当然永远不能使用索引，只要全表扫描便宜。大概 250,000 行是重点在这里我会开始认真考虑全文索引。100,000 绝对没有问题。

不过，我总是确保我的 SELECT 是脏读（没有事务性应用于选择）。

无论如何，一旦进入用户的眼球就很脏！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-16T05:00:48.500

它可以是全文（[http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)）或模式匹配（[http://dev.mysql.com/doc/refman/5.0 /en/pattern-matching.html](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)）来自 php 和 mysql 方面。

从经验和理论：

**全文的优点 -**
1) 结果非常相关，并且在搜索查询中分隔字符（如空格）不会妨碍搜索。
**全文的缺点 -**
1) 有一些停用词被 webhosters 用作限制以防止数据负载过大。（例如，不显示包含单词 'one' 或 'moz' 的搜索结果。如果你可以避免这种情况'通过不保留停用词来运行您自己的服务器
。2）如果我输入'ree'，它只会显示包含'ree'而不是'three'或'reed'的单词。

**模式匹配的优点 -**
1) 它没有全文中的任何停用词，如果您搜索“ree”，它会显示任何包含“ree”的单词，例如“reed”或“three”，这与全文只有确切的单词不同被收回。
**模式匹配的缺点 -**
1）如果在搜索词中使用了空格等分隔符，并且如果这些空格在结果中不存在，因为每个词都与任何分隔符分开，那么它不会返回任何结果。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-09T11:51:39.243

这是一个很奇怪的查询 :) 让我们试着理解它的作用。

在某些条件下，表“businessunit”的结果少于 30 行。

第一个条件是“businessunit-postaddress”表的外键。
请检查列上是否有索引`businessunit-postaddress`。`BusinessUnit`.

第二个是只返回行的过滤器`businessunit`。`Name`以“tanto”开头。
如果我没记错的话，你有一个非常复杂的索引“业务”由 11 个字段组成！
并且字段“名称”不是该索引中的第一个字段。
所以当你运行“like tanto%”的查询时，这个索引是没有用的。
我完全怀疑这个指数的必要性。
顺便说一句，它需要相当大的资源来维护和减慢该表的编辑操作。
您必须使用唯一字段“名称”创建索引。

过滤查询后，对结果进行排序，并以某种奇怪的方式进行排序。
起初它按字段排序`businessunit`。`Premium`- 这是正常的。
但是，带有 CASE 的下一个语句也没有用。
这就是为什么。
零分配给 Name = 'tanto' （完全正确）。
下一行是在 'tanto' 之后有空格的行 - 在任何情况下（特殊符号除外）这些将在 'tanto' 之后，因为空格小于任何字母。
接下来的两行是在“tanto”之后带有一些字母的行（包括空格！）。根据定义，这些行也将按此顺序排列。
这三个是为“其他”行“保留”的，但您不会得到“其他”行 - 请记住 [WHERE `businessunit`。`Name`喜欢 '
所以这部分 ORDER BY 是没有意义的。
在 ORDER BY 的末尾有`businessunit`. `Name`再次...

我的建议：你需要从头开始重建查询，记住你想要得到什么。

无论如何我想你可以使用

```
SELECT SQL_CALC_FOUND_ROWS *
FROM `businessunit`
INNER JOIN `businessunit-postaddress` ON `businessunit`.`Id` = `businessunit-postaddress`.`BusinessUnit`
WHERE `businessunit`.`Name` LIKE 'tanto%'
ORDER BY `businessunit`.`Premium` DESC,
`businessunit`.`Name`
LIMIT 0 , 30 
```

不要忘记 field 上的索引`businessunit-postaddress`。`BusinessUnit`！

我对现场溢价有很强的假设。我猜它是为存储二进制数据而设计的（是/否）。所以一个普通的（BTREE）索引不匹配。您必须使用位图索引。

PS 我不确定你真的需要使用 SQL_CALC_FOUND_ROWS [MySQL：分页 - SQL_CALC_FOUND_ROWS vs COUNT()-Query](http://phpdevblog.niknovo.com/2009/06/mysql-pagination-sql-calc-found-rows-vs-count-query.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-04T11:25:54.050

如果 LIKE 的参数不以通配符开头，就像在您的示例中一样， LIKE 运算符应该能够[利用 index](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)。

在这种情况下，LIKE 运算符的性能应该比 LOCATE 或 LEFT 好，所以我怀疑像这样更改条件可能会使事情变得更糟，但我仍然认为值得尝试（谁知道？）：

```
WHERE LOCATE('tanto', `businessunit`.`Name`)=1 
```

或者：

```
WHERE LEFT(`businessunit`.`Name`,5)='tanto' 
```

我还将更改您的 order by 条款：

```
ORDER BY
  `businessunit`.`Premium` DESC ,
   CASE WHEN `businessunit`.`Name` LIKE 'tanto %' THEN 1
        WHEN `businessunit`.`Name` = 'tanto'      THEN 0
        ELSE 2 END,
   `businessunit`.`Name` 
```

名称必须已经是 LIKE 'tanto%'，所以你可以跳过一个条件（CASE 永远不会返回值 3）。当然，请确保 Premium 字段已编入索引。

希望这可以帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-08T17:39:09.283

我已经阅读了使用 Sphinx 优化搜索的答案。但根据我的经验，我会建议一个不同的解决方案。我们使用 Sphinx 已经好几年了，遇到了一些严重的分段错误和索引损坏问题。也许 Sphinx 不像几年前那样容易出错，但一年来我们对不同的解决方案感到非常满意：

[http://www.elasticsearch.org/](http://www.elasticsearch.org/)

巨大的好处：

*   可扩展性——您可以简单地添加另一台配置几乎为零的服务器。如果你知道 mysql 复制，你会喜欢这个功能
*   速度 - 即使在重负载下，您也可以在不到一秒的时间内获得良好的结果
*   易于学习 - 只有了解 HTTP 和 JSON，您才能使用它。如果您是 Web 开发人员，您会感到宾至如归
*   易于安装 - 无需接触配置即可使用。您只需要简单的 Java（没有 Tomcat 或其他）和防火墙来阻止来自公众的直接访问
*   良好的 Javascript 集成 - 即使是类似 phpMyAdmin 的工具也是使用 Javascript 的简单 HTML 页面：[https ://github.com/mobz/elasticsearch-head](https://github.com/mobz/elasticsearch-head)
*   [与https://github.com/ruflin/Elastica](https://github.com/ruflin/Elastica)的良好 PHP 集成
*   良好的社区支持
*   良好的文档（它对眼睛不友好，但它几乎涵盖了所有功能！）

如果您需要额外的存储解决方案，您可以轻松地将搜索引擎与[http://couchdb.apache.org/结合起来](http://couchdb.apache.org/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-07T06:08:57.617

我认为您只需要收集密钥，对它们进行排序，然后最后加入

```
SELECT A.*,B.* FROM
(
    SELECT * FROM (
        SELECT id BusinessUnit,Premium
            CASE
                WHEN Name = 'tanto'      THEN 0
                WHEN Name LIKE 'tanto %' THEN 1
                WHEN Name LIKE 'tanto%'  THEN 2
                ELSE 3
            END SortOrder
        FROM businessunit Name LIKE 'tanto%'
    ) AA ORDER BY Premium,SortOrder LIMIT 0,30
) A LEFT JOIN `businessunit-postaddress` B USING (BusinessUnit); 
```

这仍然会生成一个文件排序。

您可能需要考虑在可以索引的单独表中预加载所需的键。

```
CREATE TABLE BusinessKeys
(
    id int not null auto_increment,
    BusinessUnit int not null,
    Premium      int not null,
    SortOrder    int not null,
    PRIMARY KEY (id),
    KEY OrderIndex (Premuim,SortOrder,BusinessUnit)
); 
```

填充所有匹配的键

```
INSERT INTO BusinessKeys (BusinessUnit,Premuim,SortOrder)
SELECT id,Premium
    CASE
        WHEN Name = 'tanto'      THEN 0
        WHEN Name LIKE 'tanto %' THEN 1
        WHEN Name LIKE 'tanto%'  THEN 2
        ELSE 3
    END
FROM businessunit Name LIKE 'tanto%'; 
```

然后，要分页，仅在 BusinessKeys 上运行 LIMIT

```
SELECT A.*,B.*
FROM
    (
        SELECT FROM BusinessKeys
        ORDER BY Premium,SortOrder
        LIMIT 0,30
    ) BK
    LEFT JOIN businessunit A ON BK.BusinessUnit = A.id
    LEFT JOIN `businessunit-postaddress` B ON A.BusinessUnit = B.BusinessUnit
; 
```

**CAVEAT**：我使用`LEFT JOIN`而不是`INNER JOIN`因为`LEFT JOIN`保留了查询左侧的键顺序。

# android - 谷歌地图 API 服务条款

> ID：14561247
> 
> 赞同：-5
> 
> 时间：2013-01-28T11:41:06.857
> 
> 标签：android, google-maps, licensing

我正在开发一个使用谷歌地图 API 的应用程序。应用程序的某些功能是应用内购买。我在 9.1.2中阅读了[ToS](https://developers.google.com/maps/terms#section_9_1)

> 9.1.2 例外。
> 
> (a) 与 Google 的企业协议。如果您与 Google 签订了单独的书面协议（例如 Google Enterprise 协议）或获得了 Google 的书面许可，则第 9.1.1 节（免费访问、公共访问）中的规则不适用。
> 
> (b) 移动应用程序。(i) 如果您的 Maps API 实施用于通过在线商店收费出售的移动应用程序，并且可以下载到移动设备上，则第 9.1.1(a) 节（免费访问）中的规则不适用访问在线商店。
> 
> (ii) 如果您的 Maps API 实施是使用 Google Maps Android API 的 Android 应用程序，则第 9.1.1(b) 节（公共访问）中的规则不适用。（但是，如果您的 Maps API 实现是使用任何其他 Maps API 的 Android 应用程序，则第 9.1.1(b) 节（公共访问）中的规则将继续适用，除非 Maps API 实现符合第 9.1 节中的例外情况。 2(a)（与 Google 的企业协议）。）

这意味着我的应用程序必须是 100% 免费的？？？。

我现在有 2 个问题：

1.  我的应用提供地图视图是免费的，而其他一些功能是收费的，这可能吗？
2.  我将使用谷歌地图 API，但使用来自其他提供商的地理编码。那样行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:20:47.597

从常见问题解答：

> 我可以在商业网站上使用 Google Maps API 吗？只要消费者通常可以免费访问您的网站，您就可以使用 Google Maps API。例如，如果您的网站受广告支持，则它可能属于 Google Maps API 服务条款。如果您向人们收取在您的地图上放置信息的费用（例如列出他们待售的房屋），但您使用 Google Maps API 在您网站的免费部分显示此信息，您也将符合 Google Maps API 服务条款.
> 
> 但是，并非所有商业用途都被允许。例如，如果您的网站满足以下任何条件，您必须购买相应的 Google Maps API for Business 许可证：
> 
> 您的网站仅供付费客户使用。您的网站只能在您的公司内部或您的 Intranet 上访问。您的应用程序涉及企业调度、车队管理、业务资产跟踪或类似应用程序。请记住，Google 保留随时暂停或终止您使用 Google Maps API 的权利，因此请务必仔细阅读服务条款。

并从例外：

> (b) 移动应用程序。(i) 如果您的 Maps API 实施用于通过在线商店收费出售的移动应用程序，并且可以下载到移动设备上，则第 9.1.1(a) 节（免费访问）中的规则不适用访问在线商店。

我读到这篇文章的方式是，如果你为收费出售的应用程序开发，你可以将 API 用于商业目的。我非常怀疑这是否适用于谷歌没有明确提及的应用内购买。

**但是请注意，我们没有人能够为您提供法律建议。Google 团队也不会给您任何法律建议。您需要咨询律师以获得完整的法律建议。**

# android - D'pad 在模拟器中被禁用

> ID：14561251
> 
> 赞同：25
> 
> 时间：2013-01-28T11:41:26.850
> 
> 标签：android, eclipse, android-emulator, avd, d-pad

我正在使用 android sdk 4.0.3 ，我已经创建了一个模拟器。现在我有一个问题，模拟器显示禁用的 DPAD 按钮。我已经设置了硬件键盘存在并在配置中显示带有按钮选项的皮肤。

所以我只想在模拟器上启用 Dpad 按钮 ![](../Images/67f66a9d9e34eb44df51fad2cfcee2aa.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-12T17:38:31.197

每个模拟设备都基于或多或少的真实设备，您将其选为“4.0” WVGA (480x800:hdpi)' 这不仅涉及模拟设备的分辨率，还涉及其硬件功能。在 avd 的主屏幕中-manager 进入显示设备定义的选项卡。在那里你可以编辑你选择的设备，你会在输入下找到 dpad。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-06-14T22:38:57.633

这听起来很疯狂，但它对我有用：

1.  从 Android 虚拟设备 (AVD) 管理器中启动一个全新的模拟器。
    *注意：* “不要启动设备”。
2.  找到配置文件，类似：`~/.android/avd/XXXX.avd/config.ini`
    注意这个目录只有一个`INI`文件。
3.  编辑`config.ini`：
    更改 `hw.dPad=no`为 `hw.dPad=yes`
4.  `dPad=no`当您单击详细信息时，AVD 管理器仍将显示。在虚拟设备启动之前，它似乎不会流行起来。（笨拙？是的）
5.  启动设备。它应该显示 DPAD 而不会抱怨它不存在。
6.  AVD Manager 中的 DETAILS 按钮也应该显示`hw.dPad=yes`

我在尝试启动“Snake”演示时遇到了这个问题。它运行失败，要求按 UP 键——而键盘没有响应！设置好DPAD后，就可以通过pad控制demo了。

这似乎是 AVD 管理器中的一个错误。如果您将 dPad 设置为“是”，则可以通过 AVD 管理器将其设置为“否”。但是将“否”更改为“是”需要上述解决方法。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-21T10:29:31.227

虚拟设备文件夹有一个配置文件，就像我的 Mac OS X 和一个 VM(A17) 一样：

`~/.android/avd/A17.avd/config.ini`

改变

```
hw.dPad=no 
```

到

```
hw.dPad=yes 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-24T07:23:17.847

我在另一个文件中找到了这个解决方案。我正在使用 SDK 版本修订版 20。

1.  从您的 AVD 管理器创建一个新的 AVD。
2.  AVD 管理器中没有启用 DPAD 的选项。我什至通过单击来尝试`Edit`。
3.  转到`C:\Users\%USERNAME%\.android\avd\YOUR_AVD_NAME`文件夹
4.  打开**hardware-qemu.ini**文件。在这里，您将获得所有硬件配置详细信息。
5.  在那里你会发现***hw.dPad = no*** ; 将其更改为***hw.dPad = yes***并保存文件
6.  重新启动您的 AVD 和瞧！DPAD 现在在模拟器中启用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-20T13:59:24.400

编辑`config.ini`为

```
hw.dPad=no --> hw.dPad=yes 
```

. 使用启用键盘克隆设备定义

```
Enable Input -> Keyboard. 
```

对于您以前的 AVD，因此您将来不会再遇到这个问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-04T11:09:30.687

您必须取消选中硬件键盘存在选项。然后它将被启用。所以选择是

```
Display a skin with hardware controls - true
Hardware keyboard present - false 
```

# payment-gateway - Google checkout 在沙盒中测试信用卡问题

> ID：14561253
> 
> 赞同：1
> 
> 时间：2013-01-28T11:41:31.517
> 
> 标签：payment-gateway, shopping-cart, google-checkout

我正在使用谷歌结帐数字交付。[我在此链接https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Credit_Card_Test_Cases](https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Credit_Card_Test_Cases)中使用了测试信用卡。但是对于所有这些信用卡，我收到相同的错误邮件“您的订单被搁置：请更新您的信用卡”，在买方和卖方我收到“客户信用卡授权失败”消息。一段时间后，我收到“被谷歌取消”的消息。我无法使用沙盒测试成功付款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:34:27.597

这是谷歌方面的一个临时问题。很多人都面临同样的问题。一段时间后问题已自动解决..

# java - 地图对象上的java synchronizedMap 操作应该是同步的

> ID：14561254
> 
> 赞同：0
> 
> 时间：2013-01-28T11:41:43.610
> 
> 标签：java, concurrency, synchronization

我的代码使用以下内容：

```
public class Obj{
   public String someOperation(){...}
};

public class ClassA{
   private Map<Integer, Object> m_MsgHash;

   public boolean init()
   {
      m_MsgHash = Collections.synchronizedMap(new LinkedHashMap<Integer, Object>(1001, 1.0F, true));
   }
   private Object fetchFromHash(int Id)
   {
     return m_MsgHash.get(Id);
   }

   public void HandleMsg(int Id)
   {
     Object obj = fetchFromHash(Id);
    // do some operation on obj needs to be synchronized ?
    //synchronized (m_MsgHash) {
    obj.someOperation();
    //}
   }
} 
```

我从[Java Doc](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29)中了解到，一旦迭代 my `m_MsgHash`i 必须使用`synchronized`关键字。但我的问题是，当使用从我的地图`synchronized`中获取的时，我是否需要使用？`Object`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:45:00.883

对 synchronizedMap 结果的简单操作（例如 get）不需要“同步”。如果 obj 引用的对象本身是从多个线程访问的，并且至少被其中一个修改，则需要使对它的所有访问在同一个对象上同步，否则要确保多线程正确性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T11:45:42.257

不，你不需要：`m_MsgHash.get(Id);`是同步的，所以它是一个线程安全的操作。一旦你有了对它的引用，`obj`你就可以用它做任何你想做的事情，而无需同步，因为它独立于地图存在（只要你不跨线程共享它，但这里它是一个局部变量）。

但请注意，您的地图并未按原样安全发布。如果一个线程调用`init`和另一个调用`HandleMsg`，则第二个线程可能会看到映射的空值。

安全发布地图的一种简单方法是使其成为最终地图并在 ClassA 的构造函数中对其进行实例化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:52:18.353

不需要。每当您调用`Collections.synchronizedMap`它时，它都会创建一个实现`Map`接口并具有所有方法的类`synchronized`。这称为`Java Monitor Pattern`，其中底层 LinkedHashMap 由 Java Monitor 保护以启用线程安全。您需要在循环时同步，因为 Map 可能会在循环时发生变化。

但是像`put`,`get`和之类的动作`remove`受类 Monitor 保护，因此不需要在同步方法中，除非它们是复合动作的一部分，例如 Check-Then-Act。

# c# - 如何将数据源绑定到Ajax图表控件是asp.net c#

> ID：14561257
> 
> 赞同：0
> 
> 时间：2013-01-28T11:41:49.907
> 
> 标签：c#, asp.net, charts

我想使用基于 ajax 的图表控件制作图表。我已经为它添加了 ajax 工具包。

我想创建如下链接中的图表

`http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/BarChart/BarChart.aspx`

通过使用静态数据。我可以创建如下图表

```
<asp:BarChart ID="BarChart1" runat="server" 
ChartHeight="300" ChartWidth="450" ChartType="StackedColumn"
ChartTitle="United States versus European Widget Production" 
CategoriesAxis="2007,2008,2009,2010,2011,2012"  
ChartTitleColor="blue" CategoryAxisLineColor="Red" 
ValueAxisLineColor="yellow" BaseLineColor="green" >
<Series>
    <asp:BarChartSeries Name="United States" BarColor="#6C1E83" 
    Data="110, 189, 255, 95, 107, 140" />
    <asp:BarChartSeries Name="Europe" BarColor="#D08AD9" 
    Data="49, 77, 95, 68, 70, 79" />
</Series>
</asp:BarChart> 
```

但我不知道如何将现有数据绑定到图表控件的数据源。那么该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:10:03.900

```
private void getData()
    {
        SqlCeConnection conn = new SqlCeConnection("data source='c:\\northwind.sdf';  mode=Exclusive;");
        SqlCeDataAdapter da = new SqlCeDataAdapter("Select [Statistics] from Products",  conn);
        DataTable dtSource = new DataTable();
        da.Fill(dtSource);
        DataRow[] dr = new DataRow[dtSource.Rows.Count];
        dtSource.Rows.CopyTo(dr, 0);
        int[] dblstat= Array.ConvertAll(dr, new Converter<DataRow , int>       (DataRowToint));

    }

    public static int32 DataRowToint(DataRow dr)
    {
        return Convert.ToInt32(dr["Statistics"].ToString()); 
```

## }

上面的代码将为您提供 int 值数组，将其分配给代码隐藏中的条形图数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:12:47.710

这是一个可行的解决方案，只需将数据填充到数据表中，然后像下面一样创建一个十进制数组，分配它..

```
 protected void Page_Load(object sender, EventArgs e)
    {
        decimal[] usstat = new decimal[] { 10, 15, 16, 18, 20 };
        decimal[] ukstat = new decimal[] { 14, 18, 6, 11, 32 };

        if (BarChart1.Series[0].Name == "US")
        {
            BarChart1.Series[0].BarColor = "#6C1E83";
            BarChart1.Series[0].Data = usstat;
        }

        if (BarChart1.Series[1].Name == "UK")
        {

            BarChart1.Series[1].BarColor = "#D08AD9";
            BarChart1.Series[1].Data = ukstat;
        } 
```

---在.aspx ....

```
 <asp:BarChart ID="BarChart1" runat="server" ChartHeight="300" ChartWidth="450"  ChartType="StackedColumn" ChartTitle="United States versus European Widget Production"  CategoriesAxis="2007,2008,2009,2010,2011,2012" ChartTitleColor="blue"  CategoryAxisLineColor="Red" ValueAxisLineColor="yellow" BaseLineColor="green" >
<Series>
  <asp:BarChartSeries Name="US"/>
  <asp:BarChartSeries Name="UK"/>
</Series> 
```

# ios - 关闭的应用程序上的地理通知

> ID：14561258
> 
> 赞同：3
> 
> 时间：2013-01-28T11:41:56.857
> 
> 标签：ios, mobile, geolocation, notifications

地理围栏受到许多人的称赞，但我无法轻易找到以下问题的答案。

iOS 和/或 Android，如果您在附近，非活动应用会向您发送通知吗？

我的问题可能更像是：是否有一个底层系统知道您的应用程序需要根据应用程序内位置检查您的位置，并且尽管应用程序未处于活动状态，但仍会这样做。

忘记可以关闭特定应用程序的地理位置的设置，假设已打开。

但是让我们假设我刚刚打开了我的 iPhone，还没有运行任何应用程序。所以我把那部睡眠电话放在口袋里。我会收到位置通知吗？

我目前正在用 Highlight 测试这个，但也许有人知道这个答案的代码/技术方面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:47:31.637

因操作系统而异。

*   在 Android 上，应用程序可以作为服务运行，在手机启动时自动启动。在这种情况下，用户不需要启动应用程序。因此，在 Android 上，是的，您会在睡眠模式下收到位置通知。有关 Android 服务的更多信息，请参阅[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)或[https://stackoverflow.com/questions/9866970/tutorial-for-android-services](https://stackoverflow.com/questions/9866970/tutorial-for-android-services)。

*   在 Apple 上，我不太确定将应用程序作为服务运行，如 Android。但是，我相信后台的应用程序可以注册某些事件。同样，应用程序（一旦启动）将在睡眠模式下接收通知。

# asp.net-web-api - Autofac 和 Web API 自托管

> ID：14561261
> 
> 赞同：0
> 
> 时间：2013-01-28T11:42:03.323
> 
> 标签：asp.net-web-api, autofac, self-hosting

我得到错误：

> “无法创建请求生命周期范围，因为 HttpContext 不可用。”

如果我尝试设置我的 web api。

HttpContext 在 System.Web.Http.SelfHost 中不可用，但有替代方案吗？

我的 AuthenticationHandler 示例：

```
 public class AuthenticationHandler : DelegatingHandler
    {
        private const string m_AuthenticationScheme = "Basic";
        protected override System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
        {
            AuthenticationHeaderValue authenticationHeader = request.Headers.Authorization; //get the authorization header

            if (authenticationHeader != null && authenticationHeader.Scheme == m_AuthenticationScheme) 
            {
                Credentials credentials = authenticationHeader.ParseAuthenticationHeader();

                if (credentials != null)
                {   
                    IMyClass procadCredentials = DependencyResolver.Current.GetService<IMyClass>(); //thows the InvalidOperationException if I use self-hosting
//tried: "Autofac.Integration.Mvc.AutofacDependencyResolver.Current.RequestLifetimeScope.Resolve<IMyClass>();" too. 
```

我收到了 InvalidOperationException 消息：

> 无法创建请求生命周期范围，因为 HttpContext 不可用。

IMyClass 像这样在 global.asax 中注册：

```
m_builder.Register<IMyClass>((c, p) =>
            {
//...
//return ...
} 
```

虽然 IIS 托管，它工作正常，但使用自托管，带 AutoFac 的 IoC 失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:28:09.053

您正在使用带有 Web API 的 Autofac 的 MVC 集成包，而您确实应该使用`Autofac.WebApi` [http://nuget.org/packages/Autofac.WebApi](http://nuget.org/packages/Autofac.WebApi)

您可以在此处阅读更多相关信息 - [http://alexmg.com/post/2012/09/01/New-features-in-the-Autofac-MVC-4-and-Web-API-(Beta)-Integrations。 aspx](http://alexmg.com/post/2012/09/01/New-features-in-the-Autofac-MVC-4-and-Web-API-(Beta)-Integrations.aspx)

# list - 将选项转换为 sml 中的列表

> ID：14561264
> 
> 赞同：3
> 
> 时间：2013-01-28T11:42:13.113
> 
> 标签：list, pattern-matching, sml

我有以下接受字符串列表列表和字符串的函数。它返回一个字符串列表。

```
 fun  get_substitutions1 ((x::xs)::ys, s) = 
 all_except_option((x::xs),s) @ get_substitutions1(ys,s) ; 
```

我面临的问题是 all_except_option 返回 OPTION ，因此当我尝试连接它时出现错误。我的问题是如何从 OPTION 中提取 LIST。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T14:25:00.940

你基本上有两个选择。如果您知道它（肯定）总是返回`SOME lst`，那么您可以使用`valOf`接受`'a option`并返回`'a`值的函数

```
- val a = SOME [1,2,3,3];
val a = SOME [1,2,3,3] : int list option
- val b = valOf a;
val b = [1,2,3,3] : int list 
```

您的另一个选择是使用模式匹配解压它

```
case x of
  SOME lst => lst
| NONE => ... 
```

# c - 如何从 X 服务器读取鼠标点击事件

> ID：14561267
> 
> 赞同：1
> 
> 时间：2013-01-28T11:42:16.020
> 
> 标签：c, mouseevent, xlib

我想记录我的鼠标点击位置。我试过这个；

```
#include <stdio.h>
#include <stddef.h>
#include <X11/Xlib.h>
#include <assert.h>
#include <unistd.h>
#include <signal.h>

int working = 1;

void signal_callback_handler(int signum) {
    working = 0;
}

int main () {
    signal(SIGINT, signal_callback_handler);
    signal(SIGTSTP, signal_callback_handler);
    signal(SIGTERM, signal_callback_handler);

    Display *d = XOpenDisplay(NULL);
    assert(d);

    XSelectInput(d, DefaultRootWindow(d), ButtonPressMask);
    while(working) {
        XEvent e;
        XNextEvent(d,&e);
        if (e.type == ButtonPress) {
            printf("%dx%d",e.xbutton.x,e.xbutton.y);
        }
    }

    return 0;
} 
```

但我看到了这个错误：

```
X Error of failed request: BadAccess (attempt to access private resource denied)
Major opcode of failed request: 2 (X_ChangeWindowAttributes)
Serial number of failed request: 7
Current serial number in output stream: 7 
```

我的代码有什么问题，我该如何解决？

**更新**

我对此进行了更多研究，并从#xorg-dev 中的人们那里得到了一些帮助。使用常规 Xlib 似乎是不可能的，因为只有一个客户端可以注册窗口上的按钮按下。在这种情况下，我的 WM 已经注册，因此我无法访问。似乎这可以使用 X 输入扩展并通过侦听 XI_RawButtonPress 事件来完成，我仍在试图弄清楚如何去做。这是我到目前为止所拥有的；

```
#include <stdio.h>
#include <X11/Xlib.h>
#include <X11/extensions/XInput2.h>
#include <signal.h>
#include <assert.h>

int working = 1;

void signal_callback_handler(int signum) {
    working = 0;
}

int main() {

    signal(SIGINT, signal_callback_handler);
    signal(SIGTSTP, signal_callback_handler);
    signal(SIGTERM, signal_callback_handler);

    /* Connect to the X server */
    Display *dpy = XOpenDisplay(NULL);
    assert(dpy);

    /* XInput Extension available? */
    int opcode, event, error;
    if (!XQueryExtension(dpy, "XInputExtension", &opcode, &event, &error)) {
        printf("X Input extension not available.\n");
        return -1;
    }

    /* Which version of XI2? We support 2.0 */
    int major = 2, minor = 0;
    if (XIQueryVersion(dpy, &major, &minor) == BadRequest) {
        printf("XI2 not available. Server supports %d.%d\n", major, minor);
        return -1;
    }

    XIEventMask eventmask;

    unsigned char mask[1] = { 0 }; /* the actual mask */

    eventmask.deviceid = 2;
    eventmask.mask_len = sizeof(mask); /* always in bytes */
    eventmask.mask = mask;

    /* now set the mask */
    XISetMask(mask, XI_RawButtonPress);

    /* select on the window */
    XISelectEvents(dpy, DefaultRootWindow(dpy), &eventmask, 1);

    while(working) {
        XEvent ev;
        XNextEvent(dpy, &ev);
        if (ev.xcookie.type == GenericEvent &&
                ev.xcookie.extension == opcode &&
                XGetEventData(dpy, &ev.xcookie))
        {
            switch(ev.xcookie.evtype)
            {
                case XI_RawButtonPress:
                    printf("RawButtonPress");
                    break;
            }
        }
        XFreeEventData(dpy, &ev.xcookie);
    }
} 
```

但是，我收到此错误；

```
X Error of failed request:  XI_BadDevice (invalid Device parameter)
  Major opcode of failed request:  131 (XInputExtension)
  Minor opcode of failed request:  46 ()
  Device id in failed request: 0xad
  Serial number of failed request:  15
  Current serial number in output stream:  15 
```

**更新 2**

我曾尝试使用 ButtonRelaseEvent 来执行此操作，但我没有收到任何事件。XNextEvent 永远阻塞，无论我在哪里单击/释放按钮。这是代码；

```
#include <stdio.h>
#include <stddef.h>
#include <X11/Xlib.h>
#include <assert.h>
#include <unistd.h>
#include <signal.h>

int working = 1;

void signal_callback_handler(int signum) {
    working = 0;
}

int main () {
    signal(SIGINT, signal_callback_handler);
    signal(SIGTSTP, signal_callback_handler);
    signal(SIGTERM, signal_callback_handler);

    Display *d = XOpenDisplay(NULL);
    assert(d);

    XSelectInput(d,DefaultRootWindow(d), ButtonReleaseMask);

    while(working) {
        XEvent e;
        XNextEvent(d, &e);
    printf("Something Occured");
        if (e.type == ButtonRelease) {
            printf("%dx%d",e.xbutton.x,e.xbutton.y);
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:30:11.513

尝试`XWindowEvent`代替`XNextEvent`.

例如要抓取鼠标，您可以这样做：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>
#include <X11/cursorfont.h>

int main(){
    Display* display;
    int screen_num;
    Screen *screen;
    Window root_win;
    XEvent report;
    XButtonEvent *xb = (XButtonEvent *)&report;
    int i;
    Cursor cursor;
    display = XOpenDisplay(0);
    if (display == NULL){
        perror("Cannot connect to X server");
        exit (-1);
    }
    screen_num = DefaultScreen(display);
    screen = XScreenOfDisplay(display, screen_num);
    root_win = RootWindow(display, XScreenNumberOfScreen(screen));
    cursor = XCreateFontCursor(display, XC_crosshair);
    i = XGrabPointer(display, root_win, False,
                ButtonReleaseMask | ButtonPressMask|Button1MotionMask, GrabModeSync,
                GrabModeAsync, root_win, cursor, CurrentTime);
    if(i != GrabSuccess){
        perror("Can't grab the mouse");
        exit(-1);
    }
    for(i = 0; i < 10; i++){
        XAllowEvents(display, SyncPointer, CurrentTime);
        XWindowEvent(display, root_win, ButtonPressMask | ButtonReleaseMask, &report);
        switch(report.type){
            case ButtonPress:
                printf("Press @ (%d, %d)\n", xb->x_root, xb->y_root);
            break;
            case ButtonRelease:
                printf("Release @ (%d, %d)\n", xb->x_root, xb->y_root);
            break;
        }
    }
    XFlush(display);
    XUngrabServer(display);
    XCloseDisplay( display );
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:49:10.467

是的，来自 x11 协议规范：

> 多个客户端可以在同一个窗口中选择输入；他们的事件掩码是不相交的。当一个事件产生时，它会报告给所有感兴趣的客户。但是，SubstructureRedirect 一次只能选择一个客户端，ResizeRedirect 一次只能选择一个客户端，ButtonPress 一次只能选择一个客户端。尝试违反这些限制会导致访问错误。

但是，允许多个客户端选择 ButtonRelease 事件 - 我刚刚检查了两个客户端并且都接收事件。

# c# - 未能成功启动或连接到子 MSBuild.exe 进程。验证 MSBuild.exe

> ID：14561278
> 
> 赞同：61
> 
> 时间：2013-01-28T11:42:40.227
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio-2012, visual-studio-2013

这是第一次发生在我身上。

运行构建并收到此错误。

当我重建其他`sln`一切正常。

> 错误 1 ​​由于内部故障，构建意外停止。Microsoft.Build.Exceptions.BuildAbortedException：生成已取消。未能成功启动或连接到子 MSBuild.exe 进程。验证 MSBuild.exe "C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe" 是否成功启动，并且它正在加载与启动过程相同的 microsoft.build.dll。如果位置看起来不正确，请尝试在 BuildParameters 对象中指定正确的位置，或使用 MSBUILD_EXE_PATH 环境变量。在 Microsoft.Build.BackEnd.NodeProviderOutOfProc.CreateNode(Int32 nodeId, INodePacketFactory factory, NodeConfiguration configuration) 在 Microsoft.Build.BackEnd.NodeManager.AttemptCreateNode(INodeProvider nodeProvider,

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-02-26T16:18:34.413

退出并重新打开 Visual Studio 为我解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T21:36:40.843

今天早上刚遇到同样的问题。当您的系统内存不足时，通常会出现此错误。如果退出并重新打开 VS 不起作用，请尝试关闭当前正在运行的其他一些应用程序。如果所有其他方法都失败，请尝试重新启动系统。

[http://blogs.msdn.com/b/paraswadehra/archive/2014/01/04/the-build-stopped-unexpectedly-because-of-an-internal-failure.aspx](http://blogs.msdn.com/b/paraswadehra/archive/2014/01/04/the-build-stopped-unexpectedly-because-of-an-internal-failure.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-15T16:37:26.310

如果您已经尝试了这篇文章中的所有内容（重启、重启等），但没有任何帮助。尝试以管理员身份运行 VS2012，看看是否有帮助。

# jquery - jQuery Mobile 和 PhoneGap 不工作

> ID：14561279
> 
> 赞同：1
> 
> 时间：2013-01-28T11:42:40.017
> 
> 标签：jquery, eclipse, cordova, jquery-mobile

我刚刚开始在 Eclipse 中使用 PhoneGap 和 jQuery Mobile。我正在尝试制作一个基本的 android 应用程序，但由于某种原因，我似乎无法让 jquery mobile 工作。这是日志猫中的错误：

```
01-28 13:35:58.870: E/Web Console(535): TypeError: Result of expression 'a.browser' [undefined] is not an object. at file:///android_asset/www/js/jquery.mobile.js:2 
```

![Eclipse 的屏幕截图](../Images/c7d34c6b345b7a0b4834daf91f7a247e.png)

我创建了一个 js 文件夹并将 jQuery 和 jQuery Mobile js 放在文件夹中，我假设在 html 中我的路径是正确的。我对 css 也一样，由于某种原因，我得到了上面提到的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:56:24.213

如果您仔细观察，您会发现您在 eclipse 项目中使用了 cordova 2.3 js 文件，但同时您在 HTML 中引用了 cordova 1.5 文件。

**编辑 ：**

接下来要看的是，您是否使用过最新版本的 jQuery 和 jQuery Mobile。您可以从我的示例中下载它们：http: [//jsfiddle.net/Gajotres/QXJrk/](http://jsfiddle.net/Gajotres/QXJrk/)。还要检查您使用的是 jQuery 版本 1.82（还不要使用 2.0）。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css">    
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

# java - 如何在不公开 Java 中的整个源代码（如 .h 文件）的情况下共享类的接口

> ID：14561280
> 
> 赞同：0
> 
> 时间：2013-01-28T11:42:52.997
> 
> 标签：java, plugins, interface, header-files

我正在用 Java 构建一个基于插件的程序，因此我想保持项目的封闭源代码，但允许第 3 方开发人员创建插件。我正在使用的系统正在运行，但这只是因为我（当然）可以完全访问源代码。

基本上，插件从 Plugin.java 继承，它们可以利用 ServerManager.java 来执行某些关键功能。如何使用户能够看到这些类的接口（即他们知道 ServerManager 具有 sendMessage() 函数并且插件类可以覆盖 onMessage() 函数）而不向他们提供完整的源代码。

来自 Objective-C 背景，我将 .h 文件用于这些“接口”，将 .m 文件用于源（私有）——然后我只提供 .h 文件——显然在 Java 中没有这样的东西一个.h文件！

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:49:53.507

一种方法是创建一个*接口*，让它公开，并提供该接口的实现。

例如：

```
interface Light{
    void turnOn();
    void turnO();
    void setBrightness(int newValue);
    void setTimer(int timeoutSeconds);
} 
```

然后你在一个私有文件中定义你的实际类：

```
class MyLight implements Light {
    void turnOn() {
      // implementation
    }
    // etc..
} 
```

您可以提供一个为用户生成 MyLight 对象的 Factory 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:54:34.610

因为那个 java 有[SPI](http://docs.oracle.com/javase/tutorial/sound/SPI-intro.html)，服务提供者接口。这里有[一篇文章](http://www.developer.com/java/article.php/3848881/Service-Provider-Interface-Creating-Extensible-Java-Applications.htm)。

该机制有一个**接口**，公开可用，最好在它自己的库中。

（几个）实现者提供了一个 jar，其中一个（或多个）实现类在一个文本文件中指定，接口名称在 META-INF 下。

然后java有一个API来选择一个实现，或者列出所有。

这是一个相对简单和通用的机制，查看官方javadoc。对于 XML 实现，它被使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:21:46.863

你可以在这里打点类似的东西。创建一个开源接口，客户端将在他身边执行实现。

大多数 java EE 世界都是这样工作的。例如，您有一个像这样的接口定义[http://jsr311.java.net/nonav/javadoc/index.html](http://jsr311.java.net/nonav/javadoc/index.html)并且有多个不同的供应商 imepmentations。同样，您的代码将具有用于访问插件的接口。

Atlassian Confluence 完成了一种类似的实现，其中产品是封闭源代码，除非您拥有源代码的特定许可证，但插件开发完全分离：[https ://developer.atlassian.com/display/CONFDEV/Confluence+Plugin+Guide](https://developer.atlassian.com/display/CONFDEV/Confluence+Plugin+Guide)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:01:49.073

如果您希望任何人看不到您的核心代码，那么您可以混淆所需的代码，您可以从混淆中跳过您想要向客户端公开以创建插件的部分。

# javascript - 存储原始表单值以供以后比较、对象或隐藏字段

> ID：14561282
> 
> 赞同：1
> 
> 时间：2013-01-28T11:42:59.860
> 
> 标签：javascript, jquery, html, input

我即将重写几年前编写的脚本，该脚本检查表单是否有任何更改，以显示类似“您要保存更改吗？”之类的消息...

我的问题很简单，我应该将原始值存储在隐藏的表单字段中还是 Javascript 对象中？哪种方法更有效？

这是使用隐藏字段方法的示例：

```
<input type="text" name="first_name" id="first_name" value="John Smith" />
<input type="hidden" name="first_name_old" id="first_name_old" value="John Smith" /> 
```

和 javascript 对象替代：

```
var old_values = {
    'first_name': 'John Smith'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:57:58.027

在 JavaScript 对象中存储值更加透明和可维护，但意味着代码的更多结构化，而不是存储在隐藏字段或数据属性中。如果你正在构建一个更大的前端应用程序，在 HTML 中存储所有类型的值，很快就会变得一团糟，需要大量调用来修改 DOM。

如果有效意味着速度，你应该做一个基准，哪个更快。但是，如果您不更新这种微优化通常可以忽略不计的值，那么它会使代码的可维护性降低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:44:03.817

您可以将其存储为同一元素的[数据](http://api.jquery.com/jQuery.data/)属性。

## 编辑

误会见谅，可以这样存放

`<input type="text" name="first_name" id="first_name" value="John Smith" data-old_value="John Smith" />`

然后

```
$('#first_name').data('old_value'); 
```

会给你旧的价值

# sockets - ASP.NET Web Api：请求后委托

> ID：14561287
> 
> 赞同：0
> 
> 时间：2013-01-28T11:43:13.260
> 
> 标签：sockets, stream, asp.net-web-api

我对流和 Web api 有疑问。

我返回 web api 使用的流。目前，我在获取流后将套接字放入池中。但这会导致一些错误。

现在，我必须在请求结束后将套接字放入池中。（流已被消耗，现在已关闭）。

这个或其他一些最佳实践是否有代表？

示例代码：

```
public HttpResponseMessage Get(int fileId)
{
HttpResponseMessage response = null;
response = new HttpResponseMessage(HttpStatusCode.OK);

Stream s = GetFile(id);

response.Content = new StreamContent(fileStream);

}

GetFile(int id)
{
FSClient fs = GetFSClient();
Stream s = fs.GetFileStream(id);
AddFSToPool(fs);

return s;
} 
```

GetFile 使用自编程的 FileServer-Client。它有一个重用 FileServer-Connections 的选项。此连接将存储在池中。（池中只有未使用的 FileServer 连接）。如果下一个请求调用 GetFSClient() 它会从池中获取一个已连接的请求（并将其从池中删除）。

但是，如果另一个请求进来并使用池中的 FileServer-Connection（因为未使用），则仍然存在问题，即 Stream 可能正在使用中。

现在我想在请求结束并且流被完全消耗后执行“将 FSClint 放入池中”。

有没有一个切入点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:12:15.763

`Stream`被视为易失性/临时性资源 - 难怪它实现了`IDisposable`.

`Stream`也不是**线程安全**的，因为它有一个，这`Position`意味着如果它被读取到最后，它应该被重置为开始，*如果两个线程读取流，它们很可能会读取**不同的**块*。

因此，我什至不会尝试解决这个问题。不推荐在网站上重复使用流（本质上是多用户/多线程）。

* * *

## 更新

正如我所说，仍然认为最好的选择是重新考虑解决方案，但如果您需要注册在请求完成后运行的某些内容，请根据`RegisterForDispose`请求使用：

```
public HttpResponseMessage Get(HttpRequestMessage req, int fileId)
{
   ....
   req.RegisterForDispose(myStream);
} 
```

# .net - 用于操作系统指纹的.Net 库/组件？

> ID：14561288
> 
> 赞同：1
> 
> 时间：2013-01-28T11:43:13.500
> 
> 标签：.net, fingerprinting

任何人都可以推荐一个（最好是免费的）.Net 库/组件来执行 OS 指纹识别吗？

我正在编写一个程序来验证主机列表是否已启动，同时执行操作系统指纹以确定主机的操作系统。

背景：我的前任给我留下了 Active Directory + DNS 的遗产，它没有被 $DEITY-knows-when 保管。我想确定哪些条目仍在运行，哪些不再可访问，同时还尝试检测由于未知原因未加入域但存在于 DNS 中的 Windows 操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:29:12.530

如果机器在域中并且您有足够的权限，您可以使用 WMI（Windows 管理界面）来查询有关远程机器的信息。从 .Net 使用它相当容易

您可能需要使用组策略推出防火墙规则以允许传入的 WMI 流量，但除此之外，它非常简单。

*   [MSDN - 在远程计算机上连接到 WMI](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa389290%28v=vs.85%29.aspx#configuring_a_computer_for_a_remote_connection)
*   [MSDN - 将 WMI 与 C# 一起使用](http://code.msdn.microsoft.com/windowsdesktop/Using-WMI-with-C-4e5a9ee1)

# macos - 如何镜像 NSMutableArray？

> ID：14561290
> 
> 赞同：1
> 
> 时间：2013-01-28T11:43:15.477
> 
> 标签：macos, cocoa, nsmutablearray

一个如何镜像`NSMutableArray`（第一个元素成为最后一个，第二个成为倒数第二个，...）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:54:58.923

```
NSArray* reversedArray = [[orgArray reverseObjectEnumerator] allObjects]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T11:51:36.610

使用`-[NSMutableArray exchangeObjectAtIndex:withObjectAtIndex:]`.

因此，如果您的数组被调用`a`：

```
NSUInteger c = [a count];
for(NSUInteger i = 0; i < (c / 2); ++i) {
    [a exchangeObjectAtIndex:i withObjectAtIndex:(c - i) - 1];
} 
```

# java - 使用 apache httpClient 客户端在没有 ssl 证书验证的情况下将发布数据发送到 https

> ID：14561293
> 
> 赞同：5
> 
> 时间：2013-01-28T11:43:16.893
> 
> 标签：java, apache-httpclient-4.x

我需要使用 apache HttpClient 包将发布数据发送到 https url，

发送帖子数据后，我需要检索 html 数据。

我发送的帖子数据是一个 XML 字符串，我收到的帖子数据是一个 XML 字符串。

任何有关该问题的信息将不胜感激。

我用谷歌搜索，我在互联网上找到了使用 DefaultHttpClient 的示例，现在版本 4 中已弃用。所以我想知道如何正确使用新版本的客户端。

谢谢。

# 更新

```
public String sendPost(final String request, final String postData) throws ClientProtocolException, IOException  {
    String result = null;
    CloseableHttpClient httpclient = HttpClients.createDefault();
    HttpPost httpPost = new HttpPost(request);
    CloseableHttpResponse response = httpclient.execute(httpPost);
    try {
        HttpEntity entity = response.getEntity();
        result = EntityUtils.toString(entity);
        EntityUtils.consume(entity);
    } finally {
        response.close();
    }
    return result;

} 
```

到目前为止，我想出了这个发送请求并从响应中检索字符串的函数。我认为它应该工作。我缺少的是我对 postData 没有做任何事情。如何通过我的请求发送帖子数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T13:36:19.167

```
public String sendPost(final String request, final String postData) throws ClientProtocolException, IOException, NoSuchAlgorithmException, KeyManagementException  {
    String result = null;
    SSLContext sslContext = SSLContext.getInstance("SSL");

    // set up a TrustManager that trusts everything
    sslContext.init(null, new TrustManager[] { new X509TrustManager() {
                public X509Certificate[] getAcceptedIssuers() {
                        System.out.println("getAcceptedIssuers =============");
                        return null;
                }

                public void checkClientTrusted(X509Certificate[] certs,
                                String authType) {
                        System.out.println("checkClientTrusted =============");
                }

                public void checkServerTrusted(X509Certificate[] certs,
                                String authType) {
                        System.out.println("checkServerTrusted =============");
                }
    } }, new SecureRandom());

    CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(new SSLSocketFactory(sslContext)).build();
    HttpPost httpPost = new HttpPost(request);
    ByteArrayEntity postDataEntity = new ByteArrayEntity(postData.getBytes());
    httpPost.setEntity(postDataEntity);
    CloseableHttpResponse response = httpclient.execute(httpPost);
    try {
        HttpEntity entity = response.getEntity();
        result = EntityUtils.toString(entity);
        EntityUtils.consume(entity);
    } finally {
        response.close();
    }
    return result;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-25T21:47:37.793

这是使用 Apache 4.5 的另一种方法：

```
/////////////////
// Create SSL Client
/////////////////

CloseableHttpClient httpclient = null;
HttpHost target = new HttpHost('www.mysite.com', 443, "https");

SSLContext sslcontext = SSLContexts.createSystemDefault();
SSLConnectionSocketFactory sslConnectionSocketFactory = new SSLConnectionSocketFactory(
        sslcontext, new String[] { "TLSv1", "SSLv3" }, null,
        SSLConnectionSocketFactory.getDefaultHostnameVerifier());

Registry<ConnectionSocketFactory> socketFactoryRegistry = RegistryBuilder.<ConnectionSocketFactory>create()
        .register("http", PlainConnectionSocketFactory.INSTANCE)
        .register("https", sslConnectionSocketFactory)
        .build();
PoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager(socketFactoryRegistry);

httpclient = HttpClients.custom()
.setSSLSocketFactory(sslConnectionSocketFactory)
.setConnectionManager(cm)
.build();

/////////////////
// Send POST
/////////////////

HttpPost httppost = new HttpPost('/mypath');
ByteArrayEntity postDataEntity = new ByteArrayEntity(postData.getBytes());
httpPost.setEntity(postDataEntity);
CloseableHttpResponse response = httpclient.execute(target, httpPost);

/////////////////
// Get RESPONSE
/////////////////

try {
        HttpEntity entity = response.getEntity();
        result = EntityUtils.toString(entity);
        EntityUtils.consume(entity);
} finally {
        response.close();
} 
```

# matlab - 如何在 Matlab 中将诸如 1:10 到 10:1 的向量翻转？

> ID：14561300
> 
> 赞同：-1
> 
> 时间：2013-01-28T11:44:05.707
> 
> 标签：matlab, math

假设我有`'1 2 3'`. 我想得到`'3 2 1'`。如何在 Matlab 中获取它？

**更详细的例子**

```
N=64;
[x y]=meshgrid(linspace(-3*pi,3*pi,N),linspace(-3*pi,3*pi,N));
t=sqrt(x.^2+y.^2);

% Now instead of "f=t+2*sinc(t);", I want to get all elements inverted aka 
% first element becomes the last and so on -- I thought it would be 
% sinc(abs(length(t)-t)) but it is not. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T11:45:54.847

使用 MATLAB 函数[`fliplr`](http://www.mathworks.com/help/matlab/ref/fliplr.html)。

# php - 获取特定行上其值等于 1 的所有列名称

> ID：14561301
> 
> 赞同：2
> 
> 时间：2013-01-28T11:44:18.080
> 
> 标签：php, mysql, sql

我只是想知道是否有一个简单的语句来获取等于定义值的行的所有列。

我有一张代表用户拥有的权利的表格。

例如

```
userid | right A | right B | right C | right D
----------------------------------------------
    1  |     0   |     0   |    1    |    1
----------------------------------------------
    2  |     1   |     0   |    1    |    1
----------------------------------------------
    3  |     0   |     0   |    0    |    1 
```

我需要一个查询，它返回我具有值 1 的用户的所有列

对于用户 2，结果看起来像

“正确 A”、“正确 C”、“正确 D”

目前我加载完整的行并遍历结果以获取列名，但我希望直接在我的查询中执行此操作。

根据 MySQL，显示列等中的 where 子句仅测试名称，而不测试特定行的值。

从非 1 的结果中过滤出所有值的查询也会有所帮助，但我必须在不知道所有列名的情况下工作：-/

也许程序是一种选择，但这只是将代码从 php 外包到 mysql :-/

有什么想法或完全不可能吗？

预先感谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:55:29.800

因为，你提到你正在使用`MySQL`，你可以`IF`在这个上使用

```
SELECT  CONCAT_WS(', ', IF(`right A` = 1, 'right A', NULL), 
                        IF(`right B` = 1, 'right B', NULL),
                        IF(`right C` = 1, 'right C', NULL),
                        IF(`right D` = 1, 'right D', NULL)) columnList
FROM    tableName
WHERE   userID = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/68cbe/2)

为 50 列创建*动态 sql*，示例

```
SET @dbaseName = (SELECT DATABASE());  // FILL DATABASE NAME HERE
SET @tableName = 'TableName';          //      TableName
SET @userValue = 2;                    //      value of UserID

SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT('IF(`',COLUMN_NAME , '` = 1, ''',COLUMN_NAME,''', NULL)')
  ) INTO @sql
FROM   INFORMATION_SCHEMA.COLUMNS 
WHERE  TABLE_SCHEMA = @dbaseName AND
       COLUMN_NAME  LIKE 'right%';

SET @sql = CONCAT('SELECT CONCAT_WS('', '',', @sql, ') AS ColumnList
                   FROM    tableName
                   WHERE   userid = ', @userValue);

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/99893/1)

# websphere-7 - 独立瘦客户端 websphere 7 应用程序中的 java.lang.VerifyError

> ID：14561304
> 
> 赞同：1
> 
> 时间：2013-01-28T11:44:45.053
> 
> 标签：websphere-7, corba, thin-client

```
Properties properties = new Properties();
properties.put(Context.INITIAL_CONTEXT_FACTORY, "com.ibm.websphere.naming.WsnInitialContextFactory");
properties.put(Context.PROVIDER_URL, url);
InitialContext context = new InitialContext(properties);
Object service = context.lookup(jndiName); 
```

最后一行抛出异常：

```
java.lang.VerifyError: (class: com/ibm/rmi/corba/ORB, method: objectToIOR signature: (Lorg/omg/CORBA/Object;)Lcom/ibm/CORBA/iiop/IOR;) Incompatible object argument for function call
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.omg.CORBA.ORB.create_impl(ORB.java:322)
    at org.omg.CORBA.ORB.init(ORB.java:363)
    at com.ibm.ws.orb.GlobalORBFactory.init(GlobalORBFactory.java:92)
    at com.ibm.ejs.oa.EJSORBImpl.initializeORB(EJSORBImpl.java:179)
    at com.ibm.ejs.oa.EJSClientORBImpl.<init>(EJSClientORBImpl.java:83)
    at com.ibm.ejs.oa.EJSClientORBImpl.<init>(EJSClientORBImpl.java:59)
    at com.ibm.ejs.oa.EJSORB.init(EJSORB.java:102)
    at com.ibm.ws.naming.util.Helpers.getOrb(Helpers.java:357)
    at com.ibm.ws.naming.util.WsnInitCtxFactory.getInitialContextInternal(WsnInitCtxFactory.java:445)
    at com.ibm.ws.naming.util.WsnInitCtx.getContext(WsnInitCtx.java:124)
    at com.ibm.ws.naming.util.WsnInitCtx.getContextIfNull(WsnInitCtx.java:799)
    at com.ibm.ws.naming.util.WsnInitCtx.lookup(WsnInitCtx.java:165)
    at com.ibm.ws.naming.util.WsnInitCtx.lookup(WsnInitCtx.java:180)
    at javax.naming.InitialContext.lookup(InitialContext.java:392) 
```

如何解决这个问题呢？

类路径内容

*   com.ibm.ws.ejb.thinclient_7.0.0.jar
*   com.ibm.ws.orb_7.0.0.jar

# facebook - 将应用安装到用户个人资料

> ID：14561305
> 
> 赞同：1
> 
> 时间：2013-01-28T11:44:45.967
> 
> 标签：facebook, web-applications, facebook-javascript-sdk, facebook-apps

我在 facebook 有一个应用程序。我想添加在用户的个人时间线上安装此应用程序的功能。申请中要做什么？

我试图在文档中找到任何答案（例如 [http://developers.facebook.com/docs/appsonfacebook/pagetabs/](http://developers.facebook.com/docs/appsonfacebook/pagetabs/)）。我找到了一种仅将应用程序安装到粉丝页面的方法。但我需要能够将应用程序安装到用户的个人资料中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:26:45.203

两年多以来，用户配置文件不支持“标签”（以您可以为页面构建它们的方式）！

在用户配置文件上拥有应用程序磁贴的唯一方法（如下面的屏幕截图所示）是通过应用程序发布 Open Graph-actions。

![在此处输入图像描述](../Images/81769e8e8807a38d7b542efd1d3f801e.png)

但是，从某种意义上说，这些不是“选项卡”，因为您可以根据需要构建 iframe。它们只是显示在 app-dashboard 中定义的 Open Grap-aggregations：

![在此处输入图像描述](../Images/aed587be37a4c40d17dd90ce6ad88d4e.png)

此外，这些时间线聚合似乎很长一段时间以来都存在问题，所以我不建议过多依赖它们：

[https://developers.facebook.com/bugs/434970296563783](https://developers.facebook.com/bugs/434970296563783)

# linux - 内核级线程库

> ID：14561311
> 
> 赞同：3
> 
> 时间：2013-01-28T11:45:08.573
> 
> 标签：linux, linux-kernel, pthreads, kernel, nptl

我必须实现内核级线程但是在网上搜索时我发现在linux中创建内核级线程有三种方法：

1.  NPTL
2.  线程
3.  linux线程

它被写在某个地方，现在已经放弃了 linuxThreads。但我找不到当前对 NPTL 和 kthread 的支持。我也找不到任何可以简单地解释我如何使用它们的功能的来源。

哪个是当前支持和使用内核级线程的好库？

还请分享任何资源来安装这些库并使用它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T12:20:05.573

您混淆了“内核线程”的两个非常不同的定义。

LinuxThreads 和 NPTL 是用于用户空间进程的 POSIX pthreads 的实现。他们使用内核调度实体到用户空间线程的一对一映射。它们有时被描述为内核线程实现，*只是*因为它们创建了由内核调度的线程。

LinuxThreads 不受支持且已完全过时。NPTL 现在是 glibc 的一部分，因此您已经拥有它。安装没有什么特别的。您可以像使用任何 POSIX 线程库一样使用它们，并调用诸如`pthread_create`.

实际的内核线程运行内核代码。这些库都不相关，因为它们都是用户空间库。看看像`kthread_run`. 没有魔法，没有秘密。以编写类似内核代码的方式编写内核代码。（需要编写内核代码的知识和经验。不幸的是，这并不简单。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:51:53.710

我假设；如果你真的想创建一个内核线程，你已经知道这些事情了。

我认为，您想创建多线程应用程序并尝试查找有关用户级多线程函数的信息。

是的，您创建的这些线程将由内核本身管理。这就是你要找的东西 :: [POSIX Threads](http://en.wikipedia.org/wiki/POSIX_Threads)

# c# - c#/Linq sum where

> ID：14561312
> 
> 赞同：21
> 
> 时间：2013-01-28T11:45:13.927
> 
> 标签：c#, asp.net, linq

我有一个 NCR 表，其中包含以下格式的数据：

```
ID | Date     | Item   | Type | Qty
1  | 01/01/13 | Apple  | A    | 1 
2  | 01/01/13 | Apple  | B    | 1 
3  | 01/01/13 | Orange | C    | 1 
4  | 01/01/13 | Orange | A    | 2 
6  | 01/01/13 | Orange | C    | 1 
```

我想生成一个 linq 查询，它为我提供给定日期的类型和总和的摘要，如下所示：

```
Item   | A | B | C
Apple  | 1 | 1 | 0 
Orange | 2 | 0 | 2 
```

到目前为止，我有这个：

```
var q = data.GroupBy(l => l.Item)
             .Select(g => new {
                                    Item = g.Key,
                                    Total = g.Sum(c => c.Qty),
                                    A = g.Sum(c => c.Type == "A"),
                                    B = g.Sum(c => c.Type == "B"),
                                    C = g.Sum(c => c.Type == "C")
}); 
```

但是，我似乎无法为 g.Sum lambda 语句提供标准。如果我使用 Count （这是错误的数据），我可以给出标准，但为什么 Sum 缺少这个？除了创建可用数据的汇总表之外，我还有什么替代方法？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-28T11:46:43.910

提供给的委托`Sum`不是谓词；它是一个选择器。

你想总结`Qty`财产吗？如果是这样，我怀疑你想要：

```
A = g.Where(c => c.Type == "A").Sum(c => c.Qty),
B = g.Where(c => c.Type == "B").Sum(c => c.Qty),
C = g.Where(c => c.Type == "C").Sum(c => c.Qty) 
```

（当然，您也可以按类型分组。）

# c# - 为 WPF 中的自定义框架元素实现 Stretch="Fill"

> ID：14561313
> 
> 赞同：1
> 
> 时间：2013-01-28T11:45:18.730
> 
> 标签：c#, xaml, stretch, frameworkelement

我有一个自定义框架元素，它是折线的对偶。此元素旨在在折线中的点位置绘制标记，并将充当叠加层。

我已经成功地绘制了这些点，但是对于如何实现诸如折线之类的法线形状所具有的 Stretch="Fill" 功能感到茫然。我的课程代码如下。

如果有人能告诉我如何为此添加拉伸功能，我将不胜感激。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

using ReactiveUI;

namespace Weingartner.WPF
{
    public class PolyMarkers : FrameworkElement
    {
        static PolyMarkers()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof(PolyMarkers), new FrameworkPropertyMetadata(typeof(PolyMarkers)));
        }

        public PointCollection Points
        {
            get { return (PointCollection)GetValue(PointsProperty); }
            set { SetValue(PointsProperty, value); }
        }

        // Using a DependencyProperty as the backing store for Points.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty PointsProperty =
            DependencyProperty.Register(
                "Points", 
                typeof(PointCollection), 
                typeof(PolyMarkers), 
                new PropertyMetadata(new PointCollection()));

        private VisualCollection Children;

        public PolyMarkers()
        {

            this.WhenAny(t => t.Points, x =>
            {
                return x.Value.Select(p =>
                {
                    return CreateDrawingVisualEllipses(p, 10, 10);
                });

            }).Subscribe(x =>
            {
                foreach (var shape in x)
                {
                    AddVisualChild(shape);
                }
                InvalidateMeasure();
                InvalidateArrange();
                InvalidateVisual();
            });

        }

        private DrawingVisual CreateDrawingVisualEllipses(Point location, int dx, int dy)
        {
            DrawingVisual drawingVisual = new DrawingVisual();
            DrawingContext drawingContext = drawingVisual.RenderOpen();

            drawingContext.DrawEllipse(Brushes.Maroon, null, location, dx, dy);
            drawingContext.Close();

            return drawingVisual;
        }

        // Provide a required override for the VisualChildrenCount property.
        protected override int VisualChildrenCount
        {
            get { return Children.Count; }
        }

        // Provide a required override for the GetVisualChild method.
        protected override Visual GetVisualChild(int index)
        {
            if (index < 0 || index >= Children.Count)
            {
                throw new ArgumentOutOfRangeException();
            }

            return Children[index];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:18:41.820

最简单的做法是将 a 包裹`Viewbox`在整个元素的内容上，让它为您处理缩放。如果您想在控件内的较低级别执行此操作，您将需要覆盖所有 Measure 和 Arrange 方法并手动进行所有缩放，这可能是很多（非常容易出错）的工作。

# php - 如何使用 codeigniter 编写“或”查询

> ID：14561315
> 
> 赞同：0
> 
> 时间：2013-01-28T11:45:21.740
> 
> 标签：php, mysql, codeigniter

我想写一个像`select*from bookdetails where editionId=$edid1 or editionId=$edid2;`Codeigniter 查询一样的查询。

下面是我的 Codeigniter 查询

```
 public function get_rare_outofprintBooks($edid1,$edid2) 
     {
        $this->load->database();   
        $query = $this->db->get_where('bookdetails',array('edition_id'=>$edid1),array('edition_id'=>$edid2));  //i tried like this but its NOT Working  

   if ($query->num_rows() > 0)
        {
            foreach ($query->result() as $row)
            {
                $data[] = $row;
            }
            return $data;
        }
        return false;
   } 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:48:33.560

```
$this->db->where('editionId', $edid1);
$this->db->or_where('editionId', $edid2); 
```

就在文档[http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T11:47:16.420

```
$this->db->where('id',3);
$this->db->or_where('id',5); 
```

参考[这里](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

# c++ - 未调用 QTreeWidget 中的 QItemDelegate setModelData

> ID：14561316
> 
> 赞同：1
> 
> 时间：2013-01-28T11:45:23.330
> 
> 标签：c++, qt4

我正在尝试将委托设置为我的 QTreeWidget。问题是委托 setModelData 永远不会被调用。调用 createEditor 和 setEditorData。

由于我创建的编辑器是简单的 QLineEdit，因此不必发出 commitData() 信号。我也尝试发出这个信号以防万一，当发出editLine editingFinished() 时，但这并不能解决问题。据我了解documentaion说，对于像QLineEdit这样的简单小部件，应该在不发出commitData信号的情况下调用setModelData，因此以下代码应该可以工作：

```
MyDlg::MyDlg()
{
   mTreeWdg->setItemDelegate(new TestDelegate( this ));
}
MyDlg::OnTreeItemDoubleCliked(QTreeeWidget* item,int column)
{ 
   if(column != 1) return;
   item->setFlags(Qt::ItemIsEditable);  
   mTreeWdg->editItem(item,column);
}         

TestDelegate::TestDelegate(QObject *parent )
  :QItemDelegate(parent)
  {
  }

 QWidget* TestDelegate::createEditor(QWidget *parent, const QStyleOptionViewItem &option,
                              const QModelIndex &index) const
{
  if(index.column() == 1) // value column
  {
    QLineEdit* edit = new QLineEdit(parent);      
    return edit;
  }
  else return 0;  // no editor attached
}

void TestDelegate::setEditorData(QWidget *editor, const QModelIndex &index) const
{
   if(index.column() == 1)
   {
      QLineEdit* edit = static_cast<QLineEdit*> (editor);
      edit->setText("damn");
   }
}

void TestDelegate::setModelData(QWidget *editor, QAbstractItemModel *model,const QModelIndex &index) 
{
    if(index.column()!= 1)
      return;
}

void TestDelegate::updateEditorGeometry(QWidget *editor,const QStyleOptionViewItem &option, const QModelIndex &index) const
{
    editor->setGeometry(option.rect);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-30T17:31:33.673

```
void TestDelegate::setModelData(QWidget *editor, QAbstractItemModel *model,const QModelIndex &index) must be const:

void setModelData(QWidget *editor, QAbstractItemModel *model,const QModelIndex &index) const 
```

看上面的声明。

# asp.net - EF 函数导入无法识别 StoredProc 返回的列

> ID：14561323
> 
> 赞同：3
> 
> 时间：2013-01-28T11:45:57.123
> 
> 标签：asp.net, sql-server-2008, entity-framework, visual-studio-2012

> **可能重复：**
> [EF4 - 选定的存储过程不返回任何列](https://stackoverflow.com/questions/7128747/ef4-the-selected-stored-procedure-returns-no-columns)

我有一个存储过程，它填充一个#temp 表，对其记录执行操作，然后选择记录。

问题是，当我尝试创建函数导入并单击 [获取列信息] 时，结果窗格显示消息“选定的存储过程或函数不返回任何列”。

现在，我知道它确实返回了列，因为如果我直接从数据库运行它，我会得到预期的结果集。

存储过程可以概括如下：

```
SELECT P.PersonID, P.Surname, P.NickName, P.DateofBirth
INTO #SeriesCompleted   
FROM 
    Table1 T (NOLOCK)
INNER JOIN 
    Table2 P (NOLOCK) ON T.PID = P.PID
;
Select r.PID, SUM(rt.Distance) 'Distance'
INTO #Distance
FROM 
    #SeriesCompleted sc
    inner join table3 rsr (NOLOCK) on rsr.SeriesId = sc.SeriesId
    inner join table4 r (NOLOCK) on r.PID = sc.PID
    inner join table5 rt (NOLOCK) on rt.RouteID = r.RouteID
GROUP BY r.PID;

UPDATE #SeriesCompleted
SET Distance =  d.Distance
FROM #SeriesCompleted sc
INNER JOIN #Distance d on d.PID = sc.PPID;

--Here is where the result is returned.
SELECT distinct sc.PersonID, sc.NickName, sc.Surname, sc.DateofBirth, sc.NumberFinished, sc.Distance
FROM #SeriesCompleted SC 
```

![这是直接运行存储过程时的输出（部分删失）示例](../Images/10b64a97506583bb4d81c307234c49f9.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T12:25:50.187

在疯狂搜索之后，我找到了答案：[EF4 - 选定的存储过程不返回任何列](https://stackoverflow.com/questions/7128747/ef4-the-selected-stored-procedure-returns-no-columns)

EF 无法从使用动态查询或临时表的存储过程中获取元数据。解决方案是手动创建复杂的返回类型或放置

```
SET FMTONLY OFF 
```

在我的存储过程定义中。当然，第二个选项的危险在于，存储过程将在 Visual Studio 执行元数据调用时执行，因此理想情况下，只有在存储过程不更改任何内容时才使用此选项。

更新：另一种方法是确保存储过程确实有效。您可以做的另一件事是创建一个虚拟存储过程，该过程返回您想要的列，绑定到它，然后执行实际逻辑。

# java - 在 Java 的循环中使用 Thread.sleep() 是否可以定期执行某些操作？

> ID：14561324
> 
> 赞同：12
> 
> 时间：2013-01-28T11:46:05.613
> 
> 标签：java, multithreading, loops, intervals, thread-sleep

我读过一些线程说在循环中调用 Thread.sleep() 是有问题的，并且是一个严重的性能问题。但在某些情况下，这似乎是最自然的事情。

例如，如果我希望我的应用程序每**3 分钟**执行一次（假设它是**自动保存**）

```
public void startAutosaveLoop(){
    stop = false;
    new Thread(new Runnable() {

        @Override
        public void run() {
            while (!stop){
                Thread.sleep(T*1000);
                if (!stop){
                    // do something
                }
            }
        }
    }).start();
} 
```

有没有更好的方法来做到这一点？这种情况有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:50:27.347

如果你睡了很长时间，它不会影响性能。如果你睡了 5 毫秒，检查一些条件，再睡 5 毫秒等 3 分钟，这将有一些性能成本。

如果您需要每 3 分钟执行一次操作，那么使用调度程序会更有意义。

您可以查看[ScheduledExecutorService 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)以获得非常相似的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T11:51:22.023

如果要延迟，最好使用**ScheduledExecutorService 。**该接口支持未来和/或定期执行任务。

请检查 API 文档以获取示例代码和详细信息： http: [//docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)

# f# - 如何匹配一个值的多个副本？

> ID：14561325
> 
> 赞同：15
> 
> 时间：2013-01-28T11:46:05.983
> 
> 标签：f#, pattern-matching

F# 的模式匹配非常强大，所以写起来感觉很自然：

```
match (tuple1, tuple2) with
| ((a, a), (a, a)) -> "all values are the same"
| ((a, b), (a, b)) -> "tuples are the same"
| ((a, b), (a, c)) -> "first values are the same"
// etc 
```

但是，第一个模式匹配会产生编译器错误：

```
'a' is bound twice in this pattern 
```

有没有比以下更清洁的方法？

```
match (tuple1, tuple2) with
| ((a, b), (c, d)) when a = b && b = c && c = d -> "all values are the same"
| ((a, b), (c, d)) when a = c && b = d -> "tuples are the same"
| ((a, b), (c, d)) when a = c -> "first values are the same"
// etc 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T12:49:28.317

这是 F# 的“活动模式”的完美用例。您可以像这样定义其中的几个：

```
let (|Same|_|) (a, b) =
    if a = b then Some a else None

let (|FstEqual|_|) ((a, _), (c, _)) =
    if a = c then Some a else None 
```

然后清理与它们匹配的模式；注意第一种情况（所有值都相等）如何使用嵌套`Same`模式来检查元组的第一个和第二个元素是否相等：

```
match tuple1, tuple2 with
| Same (Same x) ->
    "all values are the same"
| Same (x, y) ->
    "tuples are the same"
| FstEqual a ->
    "first values are the same"
| _ ->
    failwith "TODO" 
```

性能提示：我喜欢用这些标记简单的活动模式`inline`——因为活动模式中的逻辑很简单（只有几条 IL 指令），因此内联它们并避免函数调用的开销是有意义的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T12:52:03.090

您可以使用[参数化的活动模式](http://msdn.microsoft.com/en-us/library/dd233248.aspx)来解决问题。

```
let (|TuplePairPattern|_|) ((p1, p2), (p3, p4)) ((a, b), (c, d)) =
    let matched =
        [(p1, a); (p2, b); (p3, c); (p4, d)]
        |> Seq.groupBy fst
        |> Seq.map (snd >> Set.ofSeq)
        |> Seq.forall (fun s -> Set.count s = 1)
    if matched then Some () else None 
```

特别是，您应该以文字（字符、字符串等）的形式定义模式。

```
match tuple1, tuple2 with
| TuplePairPattern(('a', 'a'), ('a', 'a')) -> "all values are the same"
| TuplePairPattern(('a', 'b'), ('a', 'b')) -> "tuples are the same"
| TuplePairPattern(("a", "b"), ("a", "c")) -> "first values are the same"
// etc 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T19:49:14.737

我认为，最优雅的方式可以通过结合@Stephen Swensen 和@pad 提供的两个出色答案来完成。

第一个想法是结构（一个包含两个元组的元组）可以解包一次，而不是在每种`match`情况下都这样做。
第二个想法是处理值序列，所有这些值必须彼此相等。

这是代码：

```
let comparer ((a,b),(c,d)) =
    let same = Set.ofSeq >> Set.count >> ((=) 1)
    if   same[a; b; c; d]         then "all values are the same"
    elif same[a; c] && same[b; d] then "tuples are the same"
    elif same[a; c]               then "first values are the same"
    else                                "none of above" 
```

您可以将`elif`' 更改为`match`，但对我来说似乎不可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T13:48:02.653

在实践中，我可能会预先解包元组，然后执行一系列 if / then / else 表达式：

```
let a,b = tuple1
let c,d = tuple2

if a = b && b = c && c = d then "all values are the same"
elif a = c && b = d then "tuples are the same"
elif a = c then "first values are the same"
... 
```

如果您发现自己经常这样做，则可能需要一个活动模式（在 2 元组的情况下，一个[完整的活动模式](http://msdn.microsoft.com/en-us/library/dd233248.aspx)将是可行的并且可能更可取 - 穷举匹配比非穷举匹配“更安全”）。或者，也许您需要更复杂的数据结构。

# iphone - 如何在iphone中触发相机捕获点击的方法

> ID：14561326
> 
> 赞同：0
> 
> 时间：2013-01-28T11:46:07.483
> 
> 标签：iphone, ios, uiimagepickercontroller

我正在开发一个具有主要功能视频捕获的 iPhone 应用程序。当用户开始视频录制时如何触发方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:01:03.097

UIImagePickerController 类引用具有用于图像捕获、开始和停止视频录制的即时方法。

下面是 UIImagePickerController 类的苹果文档的副本。

startVideoCapture 使用 UIImagePickerControllerCameraDevice 属性指定的相机开始视频捕获。

*   (BOOL)startVideoCapture 返回值 YES 成功或 NO 失败。由于各种原因，此方法可能会返回 NO 值，其中包括：

电影捕获已在进行中 设备不支持电影捕获 设备磁盘空间不足 讨论 将此方法与自定义覆盖视图结合使用以启动电影的编程捕获。您可以在不离开界面的情况下拍摄多部电影，但这样做需要您隐藏默认的图像选择器控件。

在捕获电影时调用此方法无效。您必须调用 stopVideoCapture 方法，然后等到关联的委托对象收到 imagePickerController:didFinishPickingMediaWithInfo: 消息后，才能捕获另一部电影。

当图像选择器的源类型设置为 UIImagePickerControllerSourceTypeCamera 以外的值时调用此方法会导致抛出 NSInvalidArgumentException 异常。

如果您需要其他选项或对电影捕获进行更多控制，请使用 AV Foundation 框架中的电影捕获方法。请参阅 AV 基础框架参考。

可用性 适用于 iOS 4.0 及更高版本。在 UIImagePickerController.h 中声明 stopVideoCapture 停止视频捕获。

*   (void)stopVideoCapture 讨论 调用该方法停止视频捕获后，系统调用图像选取器委托的 imagePickerController:didFinishPickingMediaWithInfo: 方法。

可用性 适用于 iOS 4.0 及更高版本。在 UIImagePickerController.h 中声明

您也可以从[Apple Doc 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:50:00.993

当您单击相机重新编码时。

之后，您可以通过

```
If ([imagePickerController startVideoCapture] == yes)
{
   // Fire your method here.
} 
```

# c++ - 使用 MFC 面向 Windows XP 的 Visual Studio 2012 项目

> ID：14561327
> 
> 赞同：3
> 
> 时间：2013-01-28T11:46:07.887
> 
> 标签：c++, mfc, visual-studio-2012, inno-setup, installshield

我最近从一个使用 MFC 库的 VS2005 项目中获得了源代码。首先，我将项目升级到 VS2012，现在我可以在 Windows 8 上成功构建和运行该软件。接下来，我想在 Windows XP 机器上部署该软件。

我已将平台工具集设置为构建到 Windows XP（使用 v110_xp 选项），并在目标计算机上安装了“Visual C++ Redistributable for Visual Studio 2012 Update 1”。当我运行该软件时，似乎什么也没有发生。通过一些日志记录函数，我可以确定对 LoadFrame(IDR_MAINFRAME) 的调用会导致 kernel32.dll 中的异常。由于 VS2012 中不提供 Windows XP 上的远程调试，因此我无法进一步调试 LoadFrame。

任何想法可能出了什么问题？Visual C++ Redistributable 包是要安装在目标机器上的正确版本吗？接下来我应该尝试什么？

**更新**

我的项目已经设置为使用 7.1 SDK，并且在链接器选项中将最低要求的版本设置为 5.01。

如果我使用 InstallShield 生成安装程序并包含 MFC、CRT 和 ATL 可再发行组件，则安装程序可以正常工作，并且我的程序现在可以在 Windows XP 上运行。我对可再发行组件的理解是它们只是将相关的 dll 复制到 system32 文件夹（或等效文件夹）中？那是对的吗？

但是，如果我只是简单地将文件复制过来，运行 vsredist_x86.exe 或使用 Inno Setup 来安装软件和 dll，我的程序将不再工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:26:04.740

使用正常工作的 InstallShield 项目和不工作的 Inno 项目，我能够确定真正的罪魁祸首是未注册的 msxml4.dll。我收到的错误并没有给出这个结果的真正线索，但我最终到达了那里......

```
regsvr32 msxml4.dll 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T22:08:23.813

我相信你已经阅读[了这篇博客](http://tedwvc.wordpress.com/2012/11/27/visual-studio-2012-update-1-released-real-official-xp-targeting-support/)。总之，您需要使用 7.1 SDK，并且您需要在链接器选项中将所需的最低版本设置为 5.01。

# html - HTML5 和 CSS3 模式对话框在 Opera 中不起作用

> ID：14561328
> 
> 赞同：0
> 
> 时间：2013-01-28T11:46:09.303
> 
> 标签：html, css

在这篇出色而简单的文章中，作者解释了如何仅使用 HTML 和 CSS3 构建模式对话框。

[http://www.webdesignerdepot.com/2012/10/creating-a-modal-window-with-html5-and-css3/](http://www.webdesignerdepot.com/2012/10/creating-a-modal-window-with-html5-and-css3/)

[http://netdna.webdesignerdepot.com/uploads7/creating-a-modal-window-with-html5-and-css3/demo.html](http://netdna.webdesignerdepot.com/uploads7/creating-a-modal-window-with-html5-and-css3/demo.html)

它工作正常，除了 Opera 12.12 (Opera/9.80 (X11; Linux x86_64) Presto/2.12.388 Version/12.12)。在 Opera 中，所有点击都被禁用。

可能是什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:14:06.657

问题是，模式对话框填满了整个屏幕，而您的“打开”链接就在这个容器（z-Index）的后面，所以永远不能点击它。Opera 的指针事件有问题（不支持），因此您的点击被阻止。你可以做的是像这样隐藏和显示 div：

```
.modalDialog {
    position: fixed;
    font-family: Arial, Helvetica, sans-serif;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: rgba(0,0,0,0.8);
    z-index: 99999;
    opacity:.5;
    background:red;
    -webkit-transition: opacity 400ms ease-in;
    -moz-transition: opacity 400ms ease-in;
    transition: opacity 400ms ease-in;
    pointer-events: none;
    display:none;
}

.modalDialog:target {
    opacity:1;
    display:block;
    pointer-events: auto;
} 
```

# imacros - 用于添加多个标签的 tumblr 帖子上的 imacro

> ID：14561331
> 
> 赞同：0
> 
> 时间：2013-01-28T11:46:16.003
> 
> 标签：imacros

我一直在使用 iMacros 在发布照片时输入多个标签以节省时间。他们最近更新了网站，我不知道如何让 iMacro 输入多个标签。

录制宏时，这是 iMacro 提供的代码

`TAG POS=11 TYPE=INPUT:TEXT FORM=NAME:NoFormName ATTR=* CONTENT=foo,`

`,`需要启动一个新标签。它没有开始新标签或正确记录内容。

我查看了标签出现的代码，这就是下面

```
<section class="tag_editor" style="display: block;">
<div class="tags">
<input class="post_tags" type="text" value="" style="display: none;" name="post[tags]">
<div class="editor_wrapper">
<input class="editor borderless" type="text">
</div>
</div>
</section> 
```

看起来我需要的输入就在身边`editor_wrapper`，`editor borderless`而且我认为我需要将它添加到`FORM=NAME:NoFormName`iMacro`ATTR=*`中`TAG`。我尝试了不同的组合，但 iMacro 不会为我自动填充标签。tumblr 上的新帖子功能是一个弹出式 ajax 外观窗口。

在站点更新之前工作的旧宏看起来像这样。不确定它是否会有所帮助。

```
TAG POS=1 TYPE=INPUT:TEXT FORM=ACTION:/blog/foobar/new/photo ATTR=ID:tag_editor_input CONTENT=foo,
WAIT SECONDS=.3
TAG POS=1 TYPE=INPUT:TEXT FORM=ACTION:/blog/foobar/new/photo ATTR=ID:tag_editor_input CONTENT=bar,
WAIT SECONDS=.3
TAG POS=1 TYPE=INPUT:TEXT FORM=ACTION:/blog/foobar/new/photo ATTR=ID:tag_editor_input CONTENT=foo, 
```

寻求帮助使其再次工作。为我自动填充这些标签为我节省了大量时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:45:34.650

try this one to fill the second input:

```
TAG POS=1 TYPE=INPUT:TEXT ATTR=CLASS:editor* CONTENT=foo, 
```

let me know if it works

# php - 如何使用 codeigniter 购物车类删除单个购物车项目？

> ID：14561332
> 
> 赞同：3
> 
> 时间：2013-01-28T11:46:25.280
> 
> 标签：php, codeigniter, codeigniter-2, shopping-cart, cart

我正在为我的购物车项目使用 codeigniter 购物车类。我的购物车上有很多商品。现在我确实有购物车行 ID。现在我需要做的是，需要从购物车中删除特定项目而不是所有内容（销毁购物车）。

```
$cartcontents = $this->cart->product_options($rowid); 
```

并取消设置所有内容。但行不通。请帮助你任何人有一个想法。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T11:54:39.647

```
$data = array(
'rowid'   => '30ef30b64204a3088a26bc2e6ecf7602',
'qty'     => 0
);

$this->cart->update($data); 
```

用这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T05:03:24.840

如果数量设置为零，则该项目将从购物车中删除。

```
$data = array(
           'rowid' => 'b99ccdf16028f015540f341130b6d8ec',
           'qty'   => 0
        );

$this->cart->update($data); 
```

在这里，设置 QTY = 0 然后它将被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T06:25:32.807

在视图页面上创建一个删除按钮并添加带有链接的行 ID。之后创建一个函数并传递行 id 并将数量 0 并将该数组传递给更新函数。

```
public function remove_cart_product($data) {
  $row_id=$data;
  $qty=0;
  $array=array('rowid' =>$row_id ,'qty'=>$qty );
  $this->cart->update($array);
  print_r($this->cart->contents());exit();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-30T05:42:58.627

在您的控制器中使用“removeCartItem”功能来执行此操作...

```
function removeCartItem($rowid) {   
        $data = array(
            'rowid'   => $rowid,
            'qty'     => 0
        );

        $this->cart->update($data);
} 
```

# .net - 枚举是引用类型还是值类型？

> ID：14561338
> 
> 赞同：58
> 
> 时间：2013-01-28T11:46:41.570
> 
> 标签：.net, enums, value-type, reference-type

我在我的[EntityFramework](http://msdn.microsoft.com/en-US/data/ef) 5 类中使用了 Enum 属性，但在数据库中这个字段可以为空。Visual Studio 给出此属性必须是可为空的属性的错误。我的问题是：枚举是引用类型还是值类型？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-01-28T11:48:16.763

`System.Enum`是引用类型，但任何*特定*的枚举类型都是值类型。同样，`System.ValueType`是引用类型，但从它继承的所有类型（除了`System.Enum`）都是值类型。

所以如果你有一个枚举`Foo`并且你想要一个可以为空的属性，你需要属性类型是`Foo?`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-28T11:50:25.553

如果你这样做`myEnum.SomeValue`，它将是一个值类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-20T09:17:07.140

假设我们有枚举

```
public enum eCategory
{
    health ,        
    Weapon
} 
```

和一种电子类别，例如：-

```
eCategory currentcategory; 
```

那么 currentcategory 是值类型

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-26T18:45:46.117

```
public enum TestReferenceOrValue
{
    one, two, three    
}
var a = TestReferenceOrValue.one;
var b = a;
b = TestReferenceOrValue.three; 
```

如果枚举是通过引用，改变`b`影响`a`
`Console.Write(a);`→一
`Console.Write(b);`→三

一个很棒的 cSharp 在线工具 => [http://csharppad.com/](http://csharppad.com/)

# c++ - 在 C++ 中将文本文件放入 std::string 的数组/集合中的最佳方法是什么

> ID：14561349
> 
> 赞同：1
> 
> 时间：2013-01-28T11:47:08.807
> 
> 标签：c++, stl

以[在 C++ 中将整个文件读入 std::string 的最佳方式是什么？](https://stackoverflow.com/questions/116038/what-is-the-best-way-to-slurp-a-file-into-a-stdstring-in-c)我想问一个类似的问题，除了我希望我的输出是一个包含文本文件中的行的数组/STL 容器。

C#/.net 有相当有用的[File.ReadAllLines()](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)实用函数，一个好的 C++ (STL) 版本会是什么样子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T11:50:15.127

在 C++ 中，您可以这样做。

*   将结构定义为：

    ```
    struct line : std::string 
    {
       friend std::istream & operator >> (std::istream & in, line & ln)
       {
          return std::getline(in, ln);
       }
    }; 
    ```

*   然后这样做：

    ```
    std::ifstream file("file.txt");
    std::istream_iterator<line> begin(file), end;
    std::vector<std::string> allLines(begin, end); 
    ```

*   完毕！

通过这种方法，您可以直接使用 iterator-pair`begin`和`end`. 无需使用`std::vector<std::string>`. 请注意，`line`可以隐式转换为`std::string`. `begin`因此，您可以使用`end`标准算法。

例如，

*   找到最长的线：

    ```
    auto cmp = [](line const &a, line const& b) { return a.size() < b.size(); };
    std::string longestLine = *std::max_element(begin, end, cmp); 
    ```

*   计算长度大于 的行数`10`：

    ```
    auto cmp = [](line const &a) { return a.size() > 10 ; };
    size_t count = std::count_if(begin, end, cmp); 
    ```

*   很快。通过这种方式，您可以直接使用`begin`and `end`。无需使用`std::vector`. 节省内存。

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T11:51:02.307

标准成语：

```
#include <fstream>
#include <string>
#include <vector>
#include <utility>

std::ifstream infile("file.txt");
std::vector<std::string> v;

for (std::string line; std::getline(infile, line); )
{
    v.push_back(std::move(line));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T11:50:51.480

```
std::ifstream ifs(name);
std::vector<std::string> lines;
std::string line;
while (std::getline(ifs, line))
    lines.push_back(line); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T21:29:55.343

这是[我](http://ideone.com/m4ReDo)对@Nawaz 想法的尝试。我避免从 继承`std::string`，因为我对此感到有些不安：

```
#include <iostream>
#include <iterator>
#include <vector>

struct Line 
{
    operator const std::string&() const {return string;}
    std::string string;
};

std::istream& operator>>(std::istream& in, Line& line)
{
    return std::getline(in, line.string);
}

int main()
{
    std::istream_iterator<Line> begin(std::cin), end;
    std::vector<std::string> allLines(begin, end);

    std::cout << allLines.size() << " lines read from file:" << std::endl;
    std::copy(allLines.begin(), allLines.end(),
          std::ostream_iterator<std::string>(std::cout, "|"));
    return 0;
} 
```

# google-apps-script - 从脚本添加任务

> ID：14561350
> 
> 赞同：1
> 
> 时间：2013-01-28T11:47:08.553
> 
> 标签：google-apps-script, google-tasks-api, google-tasks

我无法从脚本创建任务。以下都不起作用。

`var newlist = Tasks.newTaskList().setTitle("This tasklist is created from script");`

`var newTask = Tasks.newTask().setTitle("This task has been created from script");`

我是 Google 应用脚本的新手。我究竟做错了什么？我还添加了 OAuthApp 库。但我总是得到

> ReferenceError：未定义“任务”。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:31:26.640

1.  您应该在此处创建一个启用 Tasks API 的项目 - [https://code.google.com/apis/console/](https://code.google.com/apis/console/)
2.  复制密钥，然后在脚本编辑器中，在菜单中转到资源 -> 使用 Google API 并粘贴密钥

![在此处输入图像描述](../Images/095c8d88c21bc03165441b5d29bb96e7.png)

# php - PHP PDO、SQLITE 和 HTML

> ID：14561351
> 
> 赞同：0
> 
> 时间：2013-01-28T11:47:09.903
> 
> 标签：php, sql, pdo

嗨，我正在尝试使用 foreach 循环从我的数据库中的表中回显行

我就是这样做的

//连接数据库//

```
$stmt_seven = $db->prepare('SELECT img, description FROM Videos ORDER BY date LIMIT 10;');
$stmt_seven->execute();
$res_seven = $stmt_seven->fetchAll(PDO::FETCH_NUM);
<?php
    if(!$res_seven)
    {
        echo "<br />";
        echo"No Content Available Yet..";
    }
    else
        foreach($res AS $val)
        {
            foreach($val AS $val1)
            {
                **echo "$val1['img'];
                echo "$val1['description'];**    
            }
        }
    $db = null;
?> 
```

突出显示的代码不起作用。而且我不知道我做错了什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:10:51.910

```
$res_seven = $stmt_seven->fetchAll [...]
foreach($res as ... 
```

什么是 $res？

```
foreach( $resultOfFetchAll as $val) {
  foreach($val as $val1) {
    // now $val1 is the value of a single column, i.e. a scalar or a string
    // but you're trying to access as if it was a row / array
  }
} 
```

[您可以简单地将PDOStatement](http://docs.php.net/class.pdostatement)对象本身传递给 foreach，而不是使用 fetchAll() 然后迭代该数组，因为它实现了[可遍历](http://docs.php.net/manual/class.traversable)接口。例如

```
<?php
function foo($db) {
    $stmt = $db->query('SELECT img, description FROM Videos ORDER BY date LIMIT 10', PDO::FETCH_ASSOC);
    foreach( $stmt as $row ) {
        echo $row['img'], ' - ', $row['description'], "<br />\n";
    }
    if ( 0===$stmt->rowCount() ) {
        echo "no data yet<br />\n";
    }
    echo "---<br />\n";
}

$db = new PDO('sqlite::memory:', null, null);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
setup($db, false);
foo($db);
setup($db, true);
foo($db);

// boilerplate/data-source for self-contained example
function setup($pdo, $populate) {
    if ( !$populate ) {
        $pdo->exec('
            CREATE TABLE Videos (
                img,
                description,
                date
            )
        ');
    }
    else {
        $stmt = $pdo->prepare('INSERT INTO Videos (img,description,date) VALUES (?,?,?)');
        for($i=1; $i<21; $i++) {
            $stmt->execute(array(
                sprintf('img%02d', $i),
                sprintf('desc%02d', $i),
                sprintf('2012-01-%02d 12:00:00', $i)
            ));
        }
    }
} 
```

印刷

```
no data yet<br />
---<br />
img01 - desc01<br />
img02 - desc02<br />
img03 - desc03<br />
img04 - desc04<br />
img05 - desc05<br />
img06 - desc06<br />
img07 - desc07<br />
img08 - desc08<br />
img09 - desc09<br />
img10 - desc10<br />
no data yet<br />
---<br /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:51:30.700

根据代码，您的 $res 为空。我想应该是 $res_seven

**去掉echo "$val1['img']; echo "$val1['description'];**中的双引号

 **```
$stmt_seven = $db->prepare('SELECT img, description FROM Videos ORDER BY date LIMIT       
10;');
$stmt_seven->execute();
$res_seven = $stmt_seven->fetchAll(PDO::FETCH_NUM);
if(!$res_seven){
echo "<br />";
echo"No Content Available Yet..";
}
else
foreach($res AS $val) {
foreach($val AS $val1) {
**echo "$val1['img'];
echo "$val1['description'];**    
}
}
$db = null;
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T12:00:07.213

除了其他人已经指出的错字之外，您使用`PDO::FETCH_NUM`的是“返回一个按列号索引的数组，如结果集中返回的那样，从第 0 列开始”。

根据您想要的代码`PDO::FETCH_ASSOC`，“返回由结果集中返回的列名索引的数组”

或者，您可以将其留空并使用默认值`PDO::FETCH_BOTH`“返回由列名和 0 索引列号索引的数组，如结果集中返回的那样”

来源： http: [//php.net/manual/en/pdostatement.fetch.php](http://php.net/manual/en/pdostatement.fetch.php)**

# c++ - boost::filesystem3::path::parent_path() 在 Ubuntu 上

> ID：14561352
> 
> 赞同：0
> 
> 时间：2013-01-28T11:47:13.687
> 
> 标签：c++, ubuntu, boost, path

作为输入，函数获取文件路径和名称参数

```
const QString& buildSourcePathAndName 
```

它只需要提取路径以供进一步处理。我使用下面的代码来做到这一点。

```
boost::filesystem::path p(string(buildSourcePathAndName.toLatin1().data()));
m_pSourceCodePath = p.parent_path().string(); 
```

在 Windows 上它工作正常。但在 linux (ubuntu) 上我无法编译它，得到错误。

```
undefined reference to `boost::filesystem3::path::parent_path() const' 
```

我已经阅读了有关此错误的信息 - 建议更改 boost lib 版本。我无法在我们的系统中执行此操作。这个问题的可能解决方案是什么？（我不想实现提取路径的代码，但宁愿使用一些现有的功能）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:14:34.293

在 Windows 上，boost 库使用编译指示将库自动添加到链接器命令行。在为 linux 构建时，您需要在您使用的任何构建系统中显式添加库（按照 ForEveR 和 hmjd 的建议，在链接器命令行末尾添加 -lboost_filesystem）

# validation - 如果 Grails 命令对象绑定不满足约束

> ID：14561354
> 
> 赞同：0
> 
> 时间：2013-01-28T11:47:20.740
> 
> 标签：validation, grails

如果不满足约束，我可以绑定默认字段吗？假设我有

```
class MyCommand {
    String tag = "defaultTag"

    static constraints = {
        tag inList: ['a', 'b']
    }
} 
```

当用户通过时，`?tag=myHackieTag`我不想检查命令对象是否有效 - 只需使用默认值 ( `defaultTag`)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:40:13.730

您可以为此创建自己的一组 getter setter 方法，不是吗？

```
class MyCommand {
    String tagValue

    void setTag( value ){
        tagValue = value in ['a', 'b' ] ? value : 'defaultTag'
    }

    String getTag(){
        tagValue
    } 
} 
```

不确定这如何与 grails 2 中的新可绑定内容一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:53:35.233

您可以验证单个参数，例如

```
if (!myCommand.validate(['tag'])) {
     // provide your default value when validation fails
     myCommand.tag = "defaultTag"
} 
```

# jquery - Rails3 nested_form 不是很清楚

> ID：14561355
> 
> 赞同：0
> 
> 时间：2013-01-28T11:47:22.227
> 
> 标签：jquery, ruby-on-rails-3, ruby-on-rails-3.2, nested-forms, nested-attributes

我尝试用 rails3 中的 nested_form gem 做一些好事。（我不能使用这个 gem，但看起来 rails3 总是需要一个 gem 来做这些事情......而且谷歌总是将我重定向到这个 gem 以获取 rails3 中的嵌套表单）

所以我有这个架构：

*   Model1 has_many Model2 (, :dependent => :nullify)
*   Model1 has_many Model3 (, :dependent => :nullify)
*   模型 2 属于模型 1
*   Model2 属于 Model3
    *   接受_嵌套属性_for :model3, :limit => 1
    *   attr_accessible :model3_attributes
*   Model3 has_many Model2
*   Model3 属于 Model1

思路，在后台创建一个Model1，然后创建一个嵌套的Model2，在Model2的创建表单中，在列表中选择或者新建一个Model3。

我搭建了很多东西，现在我正在查看有关如何执行此操作的文档，但我需要帮助，因为 rails3 会“猜测”所有内容，所以我觉得我添加的东西没有真正的教程或示例，而不是做正确的事情。

### 目前：

1.  如果我创建了一些 Model3，一切正常。这是我的 Model2 表单：[http://pastebin.com/6te9fSK8](http://pastebin.com/6te9fSK8)（它们出现在列表中，我选择它们）
2.  现在我想拥有“新模型3”功能。所以我添加了nested_form gem
3.  我添加了这段代码[http://pastebin.com/nzqVzwzn](http://pastebin.com/nzqVzwzn)
4.  首先，在编辑的情况下，它“有效”：我可以创建一个新模型3，它将被添加到列表中并替换以前的模型。
5.  但是，经过审核，每次我想添加一个新的，它都会替换我添加的旧的。我看起来像一个 JavaScript 问题（我使用的是 jQuery9）
6.  如果我创建一个新模型 1，然后创建一个嵌套模型 2，模型 3 列表为空。因此，即使我添加了一个带有新字段的新模型 3，表单也希望我从（空）列表中选择一个模型 3。即使我从表单中删除列表，它仍在等待我选择一个模型 3 并且不关心我添加的新模型 3。（我可以通过在创建新模型 1 时创建默认模型 3 来绕过它，但它看起来像一个弱补丁......）

我没有接触我的控制器，除了 model2 我添加了一个受保护的方法来从 :model1_id 找到 @model1

```
 class Models2Controller < ApplicationController
      before_filter :get_model1

      ...
      protected
      def get_model1
        @model1 = Model1.find(params[:model1_id])
      end 
```

如果有人可以帮助我正确管理此问题，那将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:00:49.103

这是一个很长的问题，需要很长的答案。我建议你去看[196 Nested Model Form part1](http://railscasts.com/episodes/196-nested-model-form-part-1)，[197 Nested Model Form part2](http://railscasts.com/episodes/197-nested-model-form-part-2)，也许还有[更多](http://railscasts.com/?search=nested%20form&type=free&utf8=%E2%9C%93)，比如 Complex form 。

通常，您可以让任何模型通过`accepts_nested_attributes_for :model`在您的模型中创建任何其他模型的实例。因此，Model1 将接受 Model2，而 Model2 将接受 Model3。在你的 Model2 中（我知道你想把它放在控制器中，但不要）你可以有一个工厂方法来检查它是否有一个 Model3 实例的 id 或者它是否有一个新 Model3 的属性并根据需要创建它...

上面的截屏视频将向您展示表单层次结构的方式，您需要针对您的情况进行编辑的唯一部分是最后一步是新模型或现有模型，但这不是您遇到的问题无论如何:)

# javascript - Three.js 大纲

> ID：14561360
> 
> 赞同：4
> 
> 时间：2013-01-28T11:47:44.097
> 
> 标签：javascript, three.js

使用three.js 可以在我的3d 模型上使用黑色轮廓吗？

我会有看起来像无主之地2的图形。（卡通阴影+黑色轮廓）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-02T10:15:34.313

我确定我来晚了。让我们希望这会在以后解决某人的问题。

这是交易，你不需要渲染*所有东西*两次，开销实际上并不大，你需要做的就是复制网格并将复制网格的材质面设置为“背面”。*没有双关*。相反，您将渲染两个网格，大部分轮廓的几何图形由 WebGL 的“背面剔除”剔除。

这是一个例子：

```
var scene = new THREE.Scene();

//Create main object
var mesh_geo = new THREE.BoxGeometry(1, 1, 1);
var mesh_mat = new THREE.MeshBasicMaterial({color : 0xff0000});
var mesh = new THREE.Mesh(mesh_geo, mesh_mat);
scene.add(mesh);

//Create outline object
var outline_geo = new THREE.BoxGeometry(1, 1, 1);
//Notice the second parameter of the material
var outline_mat = new THREE.MeshBasicMaterial({color : 0x00ff00, side: THREE.BackSide});
var outline = new THREE.Mesh(outline_geo, outline_mat);
//Scale the object up to have an outline (as discussed in previous answer)
outline.scale.multiplyScalar(1.5);
scene.add(outline); 
```

有关背面剔除的更多详细信息，请查看：[http ://en.wikipedia.org/wiki/Back-face_culling](http://en.wikipedia.org/wiki/Back-face_culling)

如果您想在不添加卡通着色器的情况下为对象添加轮廓，则上述方法效果很好，因此会失去“真实感”。

香椿着色本身支持边缘检测。他们在无主之地开发了“cel”着色器来实现这种效果。

在 cel 着色开发人员可以使用对象复制方法（在 [低] 管道级别完成），或者可以使用图像处理过滤器进行边缘检测。这是在这两种技术之间进行性能权衡比较的点。

有关 cel 的更多信息：[http](http://en.wikipedia.org/wiki/Cel_shading)

://en.wikipedia.org/wiki/Cel_shading 干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:50:51.140

是的，这是可能的，但不是以简单的开箱即用方式。对于卡通着色，/examples/js/ShaderToon.js 中甚至包含着色器

对于轮廓，我认为最常用的方法是分两次渲染。第一次通过将模型渲染为黑色，并且比例略大。第二遍是正常比例和卡通着色器。这样，您将看到较大的黑色模型作为轮廓。这并不完美，但我认为没有简单的出路。搜索“three.js hidden line rendering”可能会更成功，因为虽然外观不同，但使用了一些相似的方法来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-13T16:25:27.423

这是一个老问题，但这是我所做的。

我为我的 CG 课程创建了 Outlined Cel 着色器。不幸的是，它需要 3 次渲染通道。我目前正试图弄清楚如何删除一张通行证。

想法如下： 1) 将 NormalDepth 图像渲染为纹理。

在顶点着色器中，你做你通常做的事情，定位到屏幕空间和法线到屏幕空间。

在片段着色器中，您计算​​像素的深度，然后使用深度作为 alpha 值创建正常颜色

```
float ndcDepth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far) / (gl_DepthRange.far - gl_DepthRange.near);
float clipDepth = ndcDepth / gl_FragCoord.w; 
```

2) 使用 cel-shading 将场景渲染到纹理上。我更改了场景覆盖材质。

3）制作四边形并在四边形上渲染两个纹理，然后用 orto 相机观察它。Cel-shaded 纹理只是在 quad 上渲染，但是 normaldepth 上的阴影是你使用一些边缘检测，然后你知道什么时候像素需要为黑色（边缘）。

# security - Jquery ajax.post() 即安全问题

> ID：14561361
> 
> 赞同：0
> 
> 时间：2013-01-28T11:47:44.373
> 
> 标签：security, internet-explorer, jquery

我收到了简单的 jQuery ajax 发布请求

```
$.ajax({
    url: "/_layouts/TK_Editor/DemoHandler.ashx",    //
    contentType: "application/json; charset=utf-8", //cherset set
    type: 'POST',                                   //
    dataType: "json",                               //
    data: JSON.stringify(json_str),                 //
    success: OnComplete,                            //function
    error: OnFail                                   //function
}); 
```

我在这里和谷歌浏览了几十个类似的问题，但大多数都是关于跨域或字符集的，我没有跨域，没有任何复杂的东西。在 ffox、chrome 甚至 opera 中都可以正常工作...在 json_str 由 DemoHandler 解析后，Web 服务执行了一些 TSQL 程序，但是当我尝试从 IE（8+）发出 ajax 请求时，我的服务不执行任何程序并且我一直等到请求触发。但是，当我禁用 IE 中的大部分安全功能时，它突然起作用了！谁能解释我为什么会发生这种情况以及安全性中的哪个确切选项不允许 jQuery.ajax 请求很好地触发，如果可能的话 - 如何避免这种情况？

ps：webservice 也可以正常工作，[这里有描述](https://stackoverflow.com/questions/12401239/pass-jquery-json-into-asp-net-httphandler "使用 asp.net webservice 解析 json")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:37:46.477

无论如何，我再次回答了我自己的问题。

[https://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js](https://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js)

这是解决方法，但有一些限制可以使事情顺利进行。完整描述位于此处（如果有人想阅读更多）

[http://bugs.jquery.com/ticket/8283](http://bugs.jquery.com/ticket/8283)

票证中最重要的最后记录。干杯!

# entity-framework - 实体框架 5 命名空间

> ID：14561370
> 
> 赞同：7
> 
> 时间：2013-01-28T11:48:34.247
> 
> 标签：entity-framework, entity-framework-5

我想首先将 Entity Framework 5 数据库添加到面向 .net framework 4.5 的 Visual Studio 2012 中的类库中。我对需要输入的所有标签感到困惑：

*   将 ADO.NET 实体数据模型添加到项目时的 EDMX 文件名。我放了“MyEF.edmx”。
*   将连接字符串保存到配置文件时。我放了“我的实体”。
*   在选择了一些要包含在我的模型中的表后，有一个文本框可以输入模型命名空间。我放了“MyModel”。
*   MyEF.edmx 文件的属性“自定义工具命名空间”。我把'TheEF'。
*   MyEF.Context.tt 文件的属性“自定义工具命名空间”。我把'TheContext'。
*   MyEF.tt 文件的属性“自定义工具命名空间”。我放了'TheModel'。

用ADO.NET实体数据模型设计器打开MyEF.edmx，查看MyModel的属性，有：

*   实体容器名称，填充“MyEntities”。所以连接字符串名称就在这里。
*   命名空间，用“MyModel”填充。这来自表格选择文本框。

将某些东西放入 edmx 自定义工具命名空间似乎没有任何作用。我得到这个结论是因为当我 grep 整个源代码文件夹时，我只在一个 vbproj 文件中找到它。

将“TheModel”放入 MyEF.tt 自定义工具命名空间会从 MyEF.Context.vb 中产生错误，指出类型“MyTable”（这是我的数据库表的名称）未定义。

有人可以解释每个标签的目的吗？

如果我想将这个 edmx 生成的所有类（DbContext、模型等）放入一个命名空间“MyEF”中，我应该在每个地方放什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-04T22:19:04.530

各种属性的使用如下：

*   EDMX 文件名 --> 用于 EDMX 文件名
*   连接字符串名称 --> 用于配置文件中的连接字符串名称，也用于 EDMX 的概念模型 (CSDL) 部分的容器名称
*   模型命名空间 --> 用于 EDMX 的概念模型 (CSDL) 部分的命名空间，也用于附加了 .Store 的存储模型 (SSDL) 部分
*   EDMX 文件的自定义工具命名空间 --> 我不相信这在使用 T4 生成的 POCO 实体时用于任何事情。使用 EF1 样式的内置代码生成时，设置此属性将为所有生成的文件设置 .NET 命名空间。
*   .Context.tt 文件的自定义工具命名空间 --> 上下文源文件中使用的 .NET 命名空间
*   .tt 文件的自定义工具命名空间 --> 实体源文件中使用的 .NET 命名空间

请注意，如果您将 .Context.tt 和 .tt 自定义命名空间设置为不同的东西，那么上下文将在与实体类型不同的命名空间中生成，并且不会开箱即用地编译。如果您想在此处使用不同的命名空间，您可以更新 .tt 文件，但更多情况下人们只是为两者使用相同的命名空间。

另请注意，您可能需要在更改属性后从上下文菜单中为每个 .tt 文件选择“运行自定义工具”，以便重新生成代码。

# javascript - 在 jquery-ui 选项卡中创建动态选项卡

> ID：14561372
> 
> 赞同：7
> 
> 时间：2013-01-28T11:48:49.020
> 
> 标签：javascript, jquery, html, jquery-ui

我最近在做一个关于 HTML 和 jQuery 的项目。我现在想要实现的是在单击按钮时创建具有特定数据的动态选项卡。

我的 JQuery-UI 选项卡代码是

```
$(document).ready(function() {
        var $tabs = $("#container-1").tabs();
            var tabTemplate = "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close' role='presentation'>Remove Tab</span></li>",
            tabCounter = 2;

        $('#add_tab').click( function(){   
             var label = 'New',
            id = "tabs-" + tabCounter,
            li = $( tabTemplate.replace( /#\{href\}/g, "#" + id ).replace( /#\{label\}/g, label ) ),
            tabContentHtml = 'hi';
            tabs.find( ".ui-tabs-nav" ).append( li );
            tabs.append( "<div id='" + id + "'><p>" + tabContentHtml + "</p></div>" );
            tabs.tabs( "refresh" );
            tabCounter++;
        });
        $('#new').click( function(){
            $tabs.tabs('select', 2);
        });

    }); 
```

我的 HTML 文件

```
<div id="container-1">
    <ul>
        <li><a href="#fragment-1">List</a></li>
    </ul>

    <div id="fragment-1">

    </div>

</div>

<button id="add_tab">Add Tab</button> 
```

当我单击萤火虫控制台中的“添加”按钮时，出现错误：

```
ReferenceError: tabs is not defined
http://localhost:3000/
Line 38 
```

我对 jquery-ui 不太好。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T12:32:42.040

问题出在你的脚本上。所以试试这个

```
$(document).ready(function() {
        var tabs = $("#container-1").tabs();
            var tabCounter = 1;

        $('#add_tab').click( function(){
            var ul = tabs.find( "ul" );
            $( "<li><a href='#newtab'>New Tab</a></li>" ).appendTo( ul );
            $( "<div id='newtab'>Name :<input type='text'></input></div>" ).appendTo( tabs );
            tabs.tabs( "refresh" );
            tabs.tabs('select', 1);
        });

    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:34:49.087

您的代码中唯一的问题是您在开始时定义，`$tabs`后来在`tabs`没有美元正弦的情况下调用。我刚刚删除了美元正弦，它按您预期的方式工作（注意第二行的 var tabs 定义）......我还向 jsfiddle 添加了[代码](http://jsfiddle.net/p2Qhc/)。

```
$(document).ready(function() {
    var tabs = $("#container-1").tabs();
        var tabTemplate = "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close' role='presentation'>Remove Tab</span></li>",
        tabCounter = 2;

    $('#add_tab').click( function(){   
        var label = 'New',
        id = "tabs-" + tabCounter,
        li = $( tabTemplate.replace( /#\{href\}/g, "#" + id ).replace( /#\{label\}/g, label ) ),
        tabContentHtml = 'hi';
        tabs.find( ".ui-tabs-nav" ).append( li );
        tabs.append( "<div id='" + id + "'><p>" + tabContentHtml + "</p></div>" );
        tabs.tabs( "refresh" );
        tabCounter++;
    });
    $('#new').click( function(){
        $tabs.tabs('select', 2);
    });

}); 
```

# c# - Windows中进程之间的通信

> ID：14561374
> 
> 赞同：-1
> 
> 时间：2013-01-28T11:49:05.500
> 
> 标签：c#, windows-services, windows-process

对于这种情况，您建议使用哪种项目 (C#) 类型？

拥有一个用于从一侧与远程服务器通信的应用程序（我有用于与该服务器通信的 API）并与用户计算机上的许多不同应用程序（称为客户端）进行通信。

在任何给定的时刻我只需要一个服务器连接，但每个客户都可以分别提出他的请求。

客户端可以使用某种对象（.net 对象）与服务器通信吗？

我的想法是制作 Windows 服务，但我不确定这是一个好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:27:20.893

您可以使用 WCF InProc 进行进程间通信。检查[教程](http://rasor.wordpress.com/2008/09/01/howto-inproc-wcf/)。

[ZeroMQ](http://www.zeromq.org/)也可以用作 InProc 通信的替代方案。

# bash - bash shell 脚本 heredoc 问题

> ID：14561377
> 
> 赞同：0
> 
> 时间：2013-01-28T11:49:15.750
> 
> 标签：bash, shell

我想像这样运行一个 bash shell 脚本：

> 读取文件时；
> 
> 做
> 
> ```
>  echo $file; 
> ```
> 
> 完成<< eof
> 
> $(ls)
> 
> eof;`

它在示例 .sh 文件中运行良好。但是当把它放在一个像这样的函数中时：

```
function {
    while read file;
    do
        echo $file;
    done << eof 
    $(ls) 
    eof;
} 
```

它对我不起作用。

我现在不知道如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:50:32.317

尝试取消缩进你的 eof：

```
function {
    while read file;
    do
        echo $file;
    done << eof 
    $(ls) 
eof;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:51:27.950

不要缩进你的heredoc，你的`eof`标记不应该有一个尾随分号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T14:43:26.840

在 bash 中：`<<-TERMINATION` 如果您希望它忽略`TERMINATION`字符串之前的空格，请使用（但如果您更喜欢兼容性，请使用`<<TERMINATION`and`TERMINATION`单独一行，并从第一列开始。如果尾随`;`也是问题，请将其放在下一行（或者`: ;`如果你愿意，可以放一个）

并为您的功能命名：（`function myfunction { ... }` 或者，更兼容`myfunction () { ... }` ：）

# c# - 为什么 .Net 没有通用版本的 Thread.Start()？

> ID：14561382
> 
> 赞同：3
> 
> 时间：2013-01-28T11:49:41.623
> 
> 标签：c#, multithreading

我想知道为什么.Net 没有启动线程的通用方法。

例如，我们启动一个线程，如下所示....

```
Thread th = new Thread(SayHello);
th.Start("Hello");

private static void SayHello(object obj)
        {
            string str = obj as string;
            Console.WriteLine(str);
        } 
```

为什么我们不能拥有我的意思是为什么 .Net 团队不考虑使其通用？

类似于以下...

```
Thread<string> th = new Thread<string>(SayHello); 
```

因为很多时候当我将值类型传递给线程启动时，我必须进行装箱/拆箱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:07:39.087

我可以看到实现 BCL 的人不费心写这样的东西的几个原因：

1.  如果您担心性能，那么演员表（即使是拆箱）将比实际创建线程的影响小得多。
2.  如果您担心类型安全，可以轻松使用 lambda: `new Thread(() => SayHello("Hello"))`。
3.  `Thread<T>`将是一个令人困惑的类型，因为尚不清楚它代表什么`T`。特别是因为它的含义与`T`in完全不同`Task<T>`。
4.  如果你愿意，你可以`Thread<T>`使用 20 行来创建你的包装器（见下文）。

因此，如果它确实困扰您并且解决方案可能会令人困惑，那么这个问题很小并且很容易解决。这很可能是为什么没有花费资源来实现这一点的原因。

* * *

可能的实现`Thread<T>`：

```
class Thread<T>
{
    private readonly Action<T> m_action;
    private readonly Thread m_thread;
    private T m_parameter;

    public Thread(Action<T> action)
    {
        m_action = action;
        m_thread = new Thread(DoWork);
    }

    public void Start(T parameter)
    {
        m_parameter = parameter;
        m_thread.Start();
    }

    private void DoWork()
    {
        m_action(m_parameter);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:43:07.317

使用 lambda 启动线程以使用强类型非常容易，因此他们不需要为其添加任何新的语言支持。

例如：

```
using System;
using System.Threading;

class Program
{
    static void Main(string[] args)
    {
        // Easy way to start a thread with strongly-typed multiple parameters:

        new Thread(() => MyThreadFunc("Test", 42, DateTime.Now)).Start();

        Console.WriteLine("Started thread.");
        Thread.Sleep(2000);
    }

    static void MyThreadFunc(string param1, int param2, DateTime param3)
    {
        Thread.Sleep(1000);
        Console.WriteLine("param1 = {0}, param2 = {1}, param3 = {2}", param1, param2, param3);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T11:52:13.087

因为还没有人写过那个方法。此外，由于这里的装箱/拆箱只是整个操作的一小部分，*并且*很少有程序员真正*需要*手动启动线程（大多数用例都有更好的抽象），他们可能认为几乎不需要指定、实现、测试和记录基本上不需要的更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T11:52:15.473

.net 中有很多类，如果它们是在引入泛型之后设计的，我想它们会有一个泛型版本。线程只是其中之一。

对于这个特定问题，如果您可以使用 .net 4.0+：

使用[System.Threading.Tasks](http://msdn.microsoft.com/en-us/library/dd235608.aspx)命名空间中的 Task 类。

```
private static void SayHello(string s)
{
    Task t = new Task(() => Console.WriteLine(s));
    t.Start();
} 
```

此示例是类型安全的，并且执行您的示例所做的操作。方法不同，如果您期待结果，Task 确实更有意义，但它仍然是一个很好的替代品，我认为即使在这里。我的猜测是 MS 不会将工作放在“旧”线程类中，但可能会继续改进[Task Parallel Library](http://msdn.microsoft.com/de-de/library/vstudio/dd460717.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T04:38:14.407

奇怪..实际上没有人问为什么有人想做OP要求的事情。线程旨在运行一段代码。线程不是方法。从 .NET 中泛型的性质来看，代码 new Thread() 将意味着创建具有特定类型的对象 - 字符串。无论如何，这与 Thread 类运行一段时间并做一些事情的目的无关。复杂的东西。

来说明我的想法——这就像他问的一样——为什么我们没有配备电视机和 XBOX 的压路机……

所以总而言之，我的答案 - 这没有实现，因为它与.NET的体系结构相矛盾。即*是*错误*的*而不是因为他们没有打扰。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T11:51:32.177

由于“历史原因”。该方法是在 .NET 1（无泛型）中创建的，之后没有修复。与 ICloneable 等相同。

# sencha-touch - 无法为 sench touch 应用程序创建 .apk 文件

> ID：14561384
> 
> 赞同：1
> 
> 时间：2013-01-28T11:49:57.723
> 
> 标签：sencha-touch, sencha-touch-2

我已经开发了 Sencha 应用程序。我想要一个 apk 文件在设备上进行测试。我参考了 sencha Docs。除了“sencha package build config.json”之外，所有命令都可以正常工作。我在[“这里”](http://i50.tinypic.com/5dpdgz.jpg)附加了错误文件。和配置文件这里[是“json配置”](http://www.dropbox.com/s/rtzpp444e4xjbxj/config.json)。我浪费了 3 天时间来解决这个问题。所以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:09:59.853

首先，你能说一下煎茶的版本吗？你在使用 sencha CMD 吗？

请查看：[http](http://docs.sencha.com/touch/2-1/#!/guide/command) ://docs.sencha.com/touch/2-1/#!/guide/ command ，它是存储 Sencha Touch 2.1 的 CMD 文档的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:20:06.047

可能你有一些程序文件......所以 dir 是空间。要修复它，请使用 "c:/program files/dir..." 以便 dir 应该用引号引起来

# java - 缺少序列或表：hibernate_sequence

> ID：14561385
> 
> 赞同：35
> 
> 时间：2013-01-28T11:49:58.210
> 
> 标签：java, hibernate, postgresql

我是hibernate和postgres的新手。实际上我正在尝试使用 Hibernate 映射 potgres 数据库。这是我在 postgresql 中的表结构

```
CREATE TABLE employee
(
id serial NOT NULL,
firstname character varying(20),
lastname character varying(20),
birth_date date,
cell_phone character varying(15),
CONSTRAINT employee_pkey PRIMARY KEY (id )
) 
```

我正在尝试使用以下代码向数据库添加记录

```
 System.out.println("******* WRITE *******");
    Employee empl = new Employee("Jack", "Bauer", new Date(System.currentTimeMillis()), "911");
    empl = save(empl);

 //This is the save function

    private static Employee save(Employee employee) {
    SessionFactory sf = HibernateUtil.getSessionFactory();
    Session session = sf.openSession();

    session.beginTransaction();

    int id = (Integer) session.save(employee);
    employee.setId(id);

    session.getTransaction().commit();

    session.close();

    return employee;
} 
```

当我执行代码时，出现以下错误

```
org.hibernate.HibernateException: Missing sequence or table: hibernate_sequence
Exception in thread "main" java.lang.ExceptionInInitializerError
at org.tcs.com.Hibernate.HibernateUtil.buildSessionFactory(HibernateUtil.java:18)
at org.tcs.com.Hibernate.HibernateUtil.<clinit>(HibernateUtil.java:8)
at org.tcs.com.Hibernate.MainApp.list(MainApp.java:51)
at org.tcs.com.Hibernate.MainApp.main(MainApp.java:17)
Caused by: org.hibernate.HibernateException: Missing sequence or table: hibernate_sequence
at org.hibernate.cfg.Configuration.validateSchema(Configuration.java:1282)
at org.hibernate.tool.hbm2ddl.SchemaValidator.validate(SchemaValidator.java:155)
at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:498)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1740)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1778)
at org.tcs.com.Hibernate.HibernateUtil.buildSessionFactory(HibernateUtil.java:15)
... 3 more 
```

我的数据库中有名为“employee_id_seq”的序列。但我不知道数据库为什么要寻找hibernate_seq。有人可以解释错误和原因。

提前致谢！

**添加信息**

这是我的员工班

```
import java.sql.Date;

public class Employee {

private int id;

private String firstname;

private String lastname;

private Date birthDate;

private String cellphone;

public Employee() {

}

public Employee(String firstname, String lastname, Date birthdate, String phone) {
    this.firstname = firstname;
    this.lastname = lastname;
    this.birthDate = birthdate;
    this.cellphone = phone;

}

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

public String getFirstname() {
    return firstname;
}

public void setFirstname(String firstname) {
    this.firstname = firstname;
}

public String getLastname() {
    return lastname;
}

public void setLastname(String lastname) {
    this.lastname = lastname;
}

public Date getBirthDate() {
    return birthDate;
}

public void setBirthDate(Date birthDate) {
    this.birthDate = birthDate;
}

public String getCellphone() {
    return cellphone;
}

public void setCellphone(String cellphone) {
    this.cellphone = cellphone;
}

} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2018-07-11T01:58:15.627

在您的域或模型对象中注释 id 字段，如下所示，它应该可以工作。对我来说 GenerationType.AUTO 失败了

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int id; 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-28T11:55:46.827

您还没有发布重要的部分：`Employee`课程。

但我的猜测是您的 Employee 类正在使用`@GeneratedValue()`而没有指定要使用的序列。因此，Hibernate 使用其默认名称：hibernate_sequence。

您可以提供序列名称作为 GeneratedValue 注释的一部分。例如。

```
@GeneratedValue(strategy=SEQUENCE, generator="employee_id_seq") 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-07-15T09:41:02.607

> 简单的解决方案：

创建 hibernate_sequence 表为：

```
"create sequence <schema>.hibernate_sequence" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-07T03:00:36.187

如果您在 Spring Boot 或 Spring Boot/Hibernate 迁移中遇到这种情况，那么您可能可以尝试以下操作

```
https://mkyong.com/spring-boot/spring-boot-mysql-table-db_name-hibernate_sequence-doesnt-exist/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T11:36:03.927

如果您不使用注释，您应该更改 YourClass.hbm.xml 文件。

您的 ID 部分应为：

```
<id name="id" type="int" column="id">
     <generator class="sequence">
         <param name="sequence">employee_id_seq</param>
     </generator>
</id> 
```

文件样本：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC 
 "-//Hibernate/Hibernate Mapping DTD//EN"
 "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"> 

<hibernate-mapping>
   <class name="Employee" table="EMPLOYEE">
      <meta attribute="class-description">
         This class contains the employee detail. 
      </meta>
      <id name="id" type="int" column="id">
         <generator class="sequence">
             <param name="sequence">employee_id_seq</param>
         </generator>
      </id>
      <property name="firstName" column="first_name" type="string"/>
      <property name="lastName" column="last_name" type="string"/>
      <property name="salary" column="salary" type="int"/>
   </class>
</hibernate-mapping> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-26T22:57:29.527

除了创建具有列 next_val 的表 hibernate_sequence 之外，您还可以设置 quarkus.hibernate-orm.database.generation = drop-and-create。请注意，这将删除数据库中的所有记录。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-04-24T15:19:37.257

You can do two things. One is to just manually create a blank hibernate_sequence table postgresql. Two, most likely there is a conflict with the user account permissions not allowing grails to create that table.

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-02-19T01:24:52.873

对我来说，导致此错误的原因是 MySql.Data 库的错误版本。

我在 web.config 中定义了 6.9.6.0 版本，但实际引用的版本较旧。

我刚刚评论了：

```
 <system.data>
      <DbProviderFactories>
      <remove invariant="MySql.Data.MySqlClient" />
        <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.9.6.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
     </DbProviderFactories>
   </system.data> 
```

# php - 使用jquery获取选择元素的值

> ID：14561388
> 
> 赞同：1
> 
> 时间：2013-01-28T11:50:02.313
> 
> 标签：php, jquery, wordpress

> **可能重复：**
> [Wordpress 中的 jQuery.post()](https://stackoverflow.com/questions/13924797/jquery-post-in-wordpress)

我想获取选择元素的值并在 PHP 中使用它们。我使用 jquery 将它们取出，但我无法将其传递给 PHP。这是我的代码：

```
<script>
        $(document).ready(function(){
            $("button").click(function(){
                var team = $("select#team option:selected").val();
                var ath = $("select#athletes option:selected").val();
                var tour = $("select#tour option:selected").val();
                var h = $("#hour").val();
                $.ajax({
                    type:"post",
                    url:"?page_id=26&t="+team+"&a="+ath+"&to="+tour
                    }
                }
                )
            });
        });
</script> 
```

有什么问题吗？我在 Wordpress 中工作。我认为该网址可能是错误的。请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:56:18.043

```
$.ajax({
           type:"post",
           url:"<?php echo site_url() ?>?page_id=26&t="+team+"&a="+ath+"&to="+tour
                    }
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:13:52.870

你可以用这个 jQuery post 方法做到这一点：

```
<script>
    $(document).ready(function(){
        $("button").click(function(){
            var team = $("select#team option:selected").val();
            var ath = $("select#athletes option:selected").val();
            var tour = $("select#tour option:selected").val();
            var h = $("#hour").val();
            $.post("?page_id=26&t="+team+"&a="+ath+"&to="+tour");
            }
            )
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T11:54:31.320

像这样试试

```
url:"www.mydomain.com?page_id=26&t="+team+"&a="+ath+"&to="+tour 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T11:56:17.740

URL 需要完整。您是否尝试在管理员端/用户端执行此操作？

# c++ - 这种尺寸对齐是如何工作的

> ID：14561402
> 
> 赞同：7
> 
> 时间：2013-01-28T11:50:37.407
> 
> 标签：c++, c, struct, bit-manipulation, memory-alignment

关于提供的评论，我无法理解以下代码。这段代码有什么作用，等价的代码是`8-aligned`什么？

```
/* segment size must be 4-aligned */
attr->options.ssize &= ~3; 
```

这里，`ssize`是`unsigned int`类型。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T11:56:16.827

由于二进制中的 4 是 100，任何与 4 字节边界对齐的值（即 4 的倍数）都将最后两位设置为零。

二进制中的 3 是 11，~3 是这些位的按位否定，即 ...1111100。使用该值执行按位与将保持每个位相同，除了最后两个将被清除（位 & 1 == 位和位 & 0 == 0）。这给了我们下一个较低或相等的值，它是 4 的倍数。

要对 8（二进制为 1000）执行相同的操作，我们需要清除最低三位。我们可以通过二进制 111 的按位否定来做到这一点，即~7。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-28T12:12:54.057

2 的所有幂（1、2、4、8、16、32...）都可以通过简单的 a 和操作来对齐。

这给出了四舍五入的大小：

```
size &= ~(alignment - 1); 
```

或者如果你想四舍五入：

```
size = (size + alignment-1) & ~(alignment-1); 
```

“alignment-1”，只要它是一个 2 的幂的值，就会给你“全一”，直到刚好在 2 的幂以下。`~`反转所有位，所以你得到一个零和零。

您可以通过以下方式检查某物是否为 2 的幂：

```
bool power_of_two = !(alignment & (alignment-1)) 
```

这是因为，例如 4：

```
4    = 00000100
4-1  = 00000011
&      --------
0    = 00000000 
```

或 16：

```
16   = 00010000
16-1 = 00001111
&      --------
0    = 00000000 
```

如果我们使用 5 代替：

```
5    = 00000101
4-1  = 00000100
&      --------
4    = 00000100 
```

所以不是二的幂！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-28T12:16:43.523

也许更容易理解的评论是

```
/* make segment size 4-aligned
   by zeroing two least significant bits, 
   effectively rounding down */ 
```

然后至少对我来说，我的脑海中突然出现了一个问题：当它是大小时，它真的应该被四舍五入吗？不会四舍五入更合适：

```
attr->options.ssize = (attr->options.ssize + 3) & ~3; 
```

正如在其他答案中已经说过的那样，要使其 8 对齐，需要将 3 位归零，因此请`7`使用`3`. 所以，我们可以把它变成一个函数：

```
unsigned size_align(unsigned size, unsigned bit_count_to_zero) 
{
  unsigned bits = (1 << bit_count_to_zero) - 1;
  return (size + bits) & ~bits;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T11:51:43.727

`~3`是位模式`...111100`。当您使用该模式进行按位与时，它会清除底部的两位，即向下舍入到最接近的 4 倍数。

`~7`对 8-aligned 做同样的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T11:52:00.387

该代码确保清除 的底部两位`ssize`，确保它`ssize`是 4 的倍数。8 对齐的等效代码为

```
attr->options.ssize &= ~7; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T12:13:05.413

```
number = number & ~3 
```

该**数字**四舍五入到小于 Ex 的最接近*的* 4倍数*：**`number`*

 *```
 if number is 0,1,2 or 3, the `number` is rounded off to 0 
```

同样的`if number is 4,5,6,or 7,`号码`is rounded off to 4`

但是如果这与**内存对齐**有关，则内存必须向上对齐而不是向下对齐。*

# iphone - sqlite sqlite3_column_text 返回变量不是 NSString 错误

> ID：14561405
> 
> 赞同：0
> 
> 时间：2013-01-28T11:50:46.383
> 
> 标签：iphone, sql, string, sqlite, char

这是我的 sqlite 声明：

```
NSString *queryString = @"SELECT email.pk, email.sender_name, email.sender_address, search_email.subject, email.datetime, "
"LENGTH(email.attachments), SUBSTR(search_email.body,0,150), email.folder_num, t.threadid, t.numThreads FROM "
"email, search_email ,(select  threadid, min( docid) as docid, count(*) as numThreads from search_email group by threadid) as t       "
"WHERE t.docid = email.pk AND (email.folder_num = ? OR email.folder_num_1 = ? OR email.folder_num_2 = ? OR email.folder_num_3 = ?) AND email.pk = search_email.docid "
"ORDER BY email.datetime DESC;"; 
```

我使用 sqlite3_column_text 和 sqlite3_column_int 获取的所有值都可以正常工作..但由于某种原因它在 threadid 上失败：

```
NSString* temp = @"";
const char *sqlVal = (const char *)sqlite3_column_text(folderSearchStmt, 1);

...
temp = @"";
sqlVal = (const char *)sqlite3_column_text(folderSearchStmt, 8);
if(sqlVal != nil)
    temp = [NSString stringWithUTF8String:sqlVal];
[res setObject:temp forKey:@"threadID"]; 
```

如果我在 sqlVal 上设置断点，它会返回`sqlVal = (const char*) 0x266c0a30 "1-87"` 但随后 temp 返回`(__NSCFString*)0x27f7bff0 @<variable is not NSString>`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:56:00.193

必须拒绝这样的无效条目：

```
 const char *_abc = (char *) sqlite3_column_text(statement, 1);  

   NSString *_abcTemp;

      if (_abc)
          _abcTemp = _abc == NULL ? nil : [[NSString alloc] initWithUTF8String:_abc];
     else 
        _abcTemp = [[NSString alloc] initWithString:@"Not a valid string"]; 
```

# batch-file - 如何使用批处理脚本合并两个文本文件？

> ID：14561411
> 
> 赞同：1
> 
> 时间：2013-01-28T11:51:06.937
> 
> 标签：batch-file, filemerge

我有两个文本文件，分别是 A.txt 和 B.txt，内容如下：

***一个.txt***

```
value_a1,value_a2
value_b
value_c
value_d
value_e1,value_e2 
```

***B.txt***

```
12,14
13
15
16
23,34 
```

我想要输出文件 C.txt 作为

```
"value_a1","12","value_a2","14"
"value_b","13"
"value_c","15"
"value_d,"16"
"value_e1,"23","value_e2","34" 
```

请指导我完成，因为我是批处理脚本的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:52:11.627

以下代码将起作用：

```
 @Echo off

    echo. >>d.txt
    type b.txt >>d.txt

    set dec=1
    For /F "usebackq tokens=1,* delims=, " %%a in ("a.txt") do call :File1 %%a %%b
    set dec1=0
    del d.txt

    exit /b

    :File1
    SET str1=%~1
    SET str2=%~2
    SET Count=1
    For /F "usebackq tokens=1,* skip=%dec% delims=," %%A in ("d.txt") do call :File2   %%A %%B
    set /a dec=%dec%+1

    exit /b

    :File2
    SET str3=%~1
    SET str4="%~2"
    IF %Count% EQU 1 (
    IF %str4%=="" (
    echo "%str1%","%str3%" >>c.txt
    set /a Count=%Count%+1
    ) ELSE (
    echo "%str1%","%str3%","%str2%",%str4% >>c.txt
    set /a Count=%Count%+1) 
    )
    exit /b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T04:44:28.740

这个解决方案有很多限制，但它与纯原生批处理一样简单。它对于批处理解决方案也相当有效。

```
@echo off
setlocal enableDelayedExpansion
<b.txt >c.txt (
  for /f delims^=^ eol^= %%L in (a.txt) do (
    set "ln="
    set /p "ln="
    set "out="
    for %%A in (%%L) do (
      for /f "tokens=1* delims=," %%a in ("!ln!") do (
        set "out=!out!,"%%A","%%a""
        set "ln=%%b"
      )
      echo !out:~1!
    )
  )
) 
```

限制：

*   A.TXT 不能包含`*`or`?`或`!`
*   如果 A.TXT 值包含任何`<space>` `<tab>` `,` `;` `=`
*   A.TXT 最大行长度约为 8191 字节
*   B.TXT 不能包含`!`
*   B.TXT 值不能包含`,`(`,`严格来说是分隔符)
*   B.TXT 最大行长度为 1021 字节
*   B.TXT 行必须使用 Windows 风格的终止符（回车/换行），而不是 Unix 风格的（换行）

一些限制可以相当容易地克服。其他人则需要更多的努力，以至于变得完全不切实际。

# c# - 我的 Regex.Replace 不起作用

> ID：14561412
> 
> 赞同：2
> 
> 时间：2013-01-28T11:51:14.630
> 
> 标签：c#, html, regex, string

嘿，我目前正在尝试替换字符串中的 html。即`<strong>text</strong>`需要`<b>text</b>` 等。（我意识到`b`标签被认为是过时的）

我知道我不应该使用正则表达式来解决这个问题，但这是我目前唯一的选择

我的代码：

```
//replace strong
text = Regex.Replace(text, "<strong>.*?</strong>", "<b>$1</b>");

//replace em
text = Regex.Replace(text, "<em>.*?</em>", "<i>$1</i>"); 
```

这里的问题是正则表达式替换了标签*并将*文本设置为`$1`. 如何避免这种情况？（我在 C# 顺便说一句。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:54:44.983

将`$1`使用匹配中第一个*捕获的值。*但是你没有在比赛中指定任何捕获组，所以没有什么`$1`可以替代的。

用于`(…)`在正则表达式中捕获：

```
text = Regex.Replace(text, "<strong>(.*?)</strong>", "<b>$1</b>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T11:58:06.293

请注意，以下答案只是一种解决方法；最好写一个正确的正则表达式。

```
var text = "<strong>asfdweqwe121</strong><em>test</em>";

text = text.Replace("<strong>", "<b>");
text = text.Replace("</strong>", "</b>");
text = text.Replace("<em>", "<i>");
text = text.Replace("</em>", "</i>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-21T12:56:16.560

您还可以考虑使用：

```
text = Regex.Replace(text, "<strong>(.*?)</strong>", "<b>$1</b>", RegexOptions.Singleline); 
```

Note that `RegexOptions.Singleline` is necessary to allow `.` to match line feed (LF, `\x0A`) characters, that the `.` pattern cannot match by default.

# javascript - 是否推荐 'lowercase_separated_by_underscores' 用于 Javascript 变量命名约定？

> ID：14561416
> 
> 赞同：0
> 
> 时间：2013-01-28T11:51:30.560
> 
> 标签：javascript, naming-conventions

在学习 Javascript 之前，我是一名 Python 程序员，正如`lowercase_separated_by_underscores`Python 的变量命名所建议的那样，我继续使用它来编写 Javascript，因为改变习惯是痛苦且不方便的。但是在看到很多专业的 Javascript 代码使用小驼峰式命名变量后，我开始思考最标准和建议的方式是什么，`this_way`或者`thatWay`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:54:28.493

那么，你看过 DOM API 了吗？还是内置对象？以下是一些方法名称...

```
getElementById
forEach
addEventListener
toLowerCase 
```

这应该可以回答您的担忧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T11:57:22.903

普遍接受的 JavaScript 命名约定是`lowerCamelCase`，是的。

# iphone - Facebook 登录要求安装 (iPhone)

> ID：14561419
> 
> 赞同：0
> 
> 时间：2013-01-28T11:51:31.180
> 
> 标签：iphone, ios, facebook, ipad, facebook-graph-api

我需要帮助从`Facebook-SDK-3.1` iOS 6登录`Facebook sdk`Facebook在我的.dont 知道它到底是什么......如果我这样做，然后从代码中......当我再次按下按钮登录时，它会自动而不要求。并再次自动登录，即使在注销后也是如此。/。任何人都可以帮助我为什么在注销后它要求存储以前的访问令牌和密码。`sessionLoginSample``WebView``install``project``logout``log-in``id and pssword``login page`

和**代码**是

```
- (IBAction)buttonClickHandler:(id)sender {

AppDelegate* appDelegate = [[UIApplication sharedApplication]delegate];

if (appDelegate.session.isOpen) {

  [appDelegate.session closeAndClearTokenInformation];

} else {
    if (appDelegate.session.state != FBSessionStateCreated) {

         appDelegate.session = [[FBSession alloc] initWithPermissions:[NSArray arrayWithObjects:@"email", nil]];
    }

    [appDelegate.session openWithBehavior:FBSessionLoginBehaviorForcingWebView

                            completionHandler:^(FBSession *session,

                                                FBSessionState state,

                                                NSError *error) {

                FBSession.activeSession = session;

                                [self updateView];
                                NSLog(@" state=%d",state);

                                [FBRequestConnection
                                 startForMeWithCompletionHandler:^(FBRequestConnection *connection,
                                                                   id<FBGraphUser> user,
                                                                   NSError *error) {

                                     userInfo = @"";

                                     userInfo = user.username;

                                     NSLog(@"string %@", userInfo); 
                                         [self checkfacebook];

                                 }];

                            }];    } 

} 
```

![在此处输入图像描述](../Images/64666f3e9cc15587e7e70dfc09b94c28.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:11:30.177

一旦用户登录，FB 就会授予对您应用程序的访问权限。如果用户想要修改权限，他可以通过登录 fb 并更改权限来完成。您可能需要查看 oAuth 以了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:33:51.057

当你通过新的emailid登录时，它必须为他们安装你的应用程序......所以，它要求不同的登录名......但是你再次登录时它不会问......你的第二个问题的答案是...... .你对服务器端做了什么吗...bcoz服务器上可能有一个条款可以记住用户几个小时或几天...所以，请与服务器端联系..如果不使用服务器...回复我回来我会尝试进一步回答......

# java - 使用 Play Framework 1.2.5 访问 Web 服务

> ID：14561422
> 
> 赞同：1
> 
> 时间：2013-01-28T11:51:33.420
> 
> 标签：java, web-services, playframework, playframework-1.x

我在**Eclipse IDE的应用程序中使用****Play framework 1.2.5**。我需要访问使用**IBM JAX-RPC**构建的 Web 服务。我已经获得了需要在我的应用程序中访问的 Web 服务的 wsdl 文件。

 ****对于普通的 Java EE 应用程序，我曾经将 WSDL 粘贴到我的工作区中，通过右键单击 WSDL 文件 => 生成客户端选项生成文件，即在 Eclipse IDE 的帮助下生成文件。

我不确定如何使用 Play 框架访问 WSDL。

我想知道：

1) 在我的工作区中粘贴 WSDL 文件的位置？

2）在Play框架中如何生成客户端（即使我们在play框架中是否需要这个也不确定）并访问服务方法？

3) 访问服务方法需要任何其他设置吗？

请让我知道这件事。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:41:18.010

简单的方法：

使用 Play! 的内置[`play.libs.WS`](http://www.playframework.org/documentation/api/1.2.5/play/libs/WS.html)（链接[#2](http://www.playframework.org/documentation/1.2.5/libs#WebServiceclient)和[#3](http://playframework.wordpress.com/2010/08/15/web-services-using-play/)）。您必须自己创建原始 HTTP 请求，并自己解析来自服务器的 XML 结果。当然，如果 Web 服务接口很复杂，这可能会成为一项复杂的任务。

最好，您将[基于您的 WSDL 创建一个 JAX-RPC 客户端](http://www.mkyong.com/webservices/jax-ws/jax-ws-hello-world-example/)，并从您的 Play！应用。****

# iphone - 使用浏览器我想打开一个网址，用于付款

> ID：14561426
> 
> 赞同：-1
> 
> 时间：2013-01-28T11:51:36.673
> 
> 标签：iphone, ios, objective-c, safari

在我使用浏览器的 iPhone 应用程序中，我想打开一个 url 来处理付款。当网页加载时会显示一个按钮，单击该按钮会在新窗口中打开一个新页面。在该页面上，用户输入付款详细信息并处理付款。付款后，我们将被引导至成功页面。

问题是，我如何在付款后返回我的申请？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:04:05.967

如果您拥有成功页面，那么您可以定义自己的 URI 方案，这将自动在设备上打开您的应用程序。这就是某些链接通过`itms://`URI 方案打开 iTunes 应用程序的方式。

可以在这里看到一个处理这个问题的好方法： [Possible to handle your own http URL scheme in iOS?](https://stackoverflow.com/questions/4403992/possible-to-handle-your-own-http-url-schemes-in-ios)

# jquery - jQuery 将选定项和未选定项添加到数组

> ID：14561427
> 
> 赞同：0
> 
> 时间：2013-01-28T11:51:36.790
> 
> 标签：jquery, html, jquery-selectors

我需要将表单中的所有选定项目附加到数组中，并在表单中的其他位置存储/使用它。我还需要抓取未选择的元素并将其放入数组中。

```
 <select multiple id="conditionBad" name="conditionBad">
        <option class="checker" value="Door">Door</option>
        <option class="checker" value="Light">Light</option>
        <option class="checker" value="Keypad">Keypad</option>
        <option class="checker" value="Cooking Cavity">Cooking Cavity</option>
        <option class="checker" value="Seal">Seal</option>
        <option class="checker" value="Power Cord">Power Cord</option>
        <option class="checker" value="Turn Table">Turn Table</option>
        <option class="checker" value="Grille">Grille</option>
      </select> 
```

基本上，我需要一个 jQuery 调用，它可以获取所选项目的值并将它们分别放入一个数组中，甚至一个用逗号 (',') 分隔的字符串都可以。我不确定可以执行此操作的函数，并且我尝试通过 stackoverflow 寻找解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:53:40.757

您可以使用[地图](http://api.jquery.com/jQuery.map/)。

**[现场演示](http://jsbin.com/eyepig/3/edit)**

```
var values = $('#conditionBad option').map(function(){
     return this.value;
}).get().join(); 
```

对于选定的

```
var values = $('#conditionBad option:selected').map(function(){
     return this.value;
}).get().join(); 
```

对于未选中

```
var values = $('#conditionBad option').map(function(){
     if(!$(this).is(':selected'))
        return this.value;
}).get().join(); 
```

# mysql - 这可以用mysql吗？

> ID：14561430
> 
> 赞同：1
> 
> 时间：2013-01-28T11:51:45.847
> 
> 标签：mysql

首先：对不起标题，但也许我以后会找到更好的。

几分钟前我问过这个问题，但由于我无法描述我想要什么，我再试一次:)

这是我的表结构： [http ://sqlfiddle.com/#!2/b25f9/37](http://sqlfiddle.com/#!2/b25f9/37)

该表用于存储用户会话。

为此，我想生成一个堆积条形图，显示我有多少活跃用户。我的想法是像这样根据用户最近几天的在线时间对用户进行分组 ![在此处输入图像描述](../Images/6691e38b7d20bf00cbb4c0784a7c233a.png)

让我们说它的星期五：

*   B 组：周四（和今天）在线的用户
*   C组：星期四（和今天）不在线的用户
*   D组：周四或周三不在线但周二（和今天）的用户
*   E组：周四、周三或周二不在线但上周一、周日或周六（以及今天）的用户
*   A 组：与其他组不匹配的用户（但仅在今天）

*   我只想知道这些组中的用户数量（特定日期）

*   用户只能在其中一个组中（同一天）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:21:02.517

**另一个更新：**意外（通过复制和粘贴）`starttime = ... or starttime = ...`但应该是`starttime = ... or endtime = ...`

**更新：**

为了更详细地解释我的查询（在最终查询中还有更多评论）：

首先我们得到了

```
SELECT
...
FROM gc_sessions s
WHERE DATE(starttime) = CURDATE() OR DATE(endtime) = CURDATE() 
```

这无异于说“给我今天开始或今天结束会话的所有用户”。不得不一次又一次地考虑这两次使查询有点笨拙，但实际上并没有那么复杂。

因此，通常我们会使用 COUNT() 函数来计算某些东西，但由于我们想要“条件计数”，我们只需使用 SUM() 函数并告诉它何时加 1，何时不加 1。

```
SUM (CASE WHEN ... THEN 1 ELSE 0 END) AS a_column_name 
```

SUM() 函数现在检查从今天开始的会话结果集中的每一行。因此，对于此结果集中的每个用户，我们都会查看该用户是否在我们指定的日期在线。他/她在线多少次并不重要，因此出于性能原因，我们使用`EXISTS`. 有了`EXISTS`你可以指定一个子查询，一旦找到东西就停止，所以当找到东西时它返回什么并不重要，只要它不是`NULL`. 所以不要混淆我为什么选择`1`. 在子查询中，我们必须将当前从外部查询检查的用户与来自内部查询（子查询）的用户连接起来，并指定时间窗口。如果所有标准都符合计数 1，否则为 0，如前所述。

```
SUM(CASE WHEN 
         EXISTS (SELECT 1 FROM gc_sessions sub_s WHERE s.user = sub_s.user 
                  AND ((date(starttime) = CURDATE() - INTERVAL 1 DAY) 
                       OR (date(endtime) = CURDATE() - INTERVAL 1 DAY))) 
    THEN 1 ELSE 0 END) AS todayAndYesterday, 
```

然后，我们为每个条件创建一列，瞧，您在一个查询中就拥有了您所需要的一切。因此，随着您更新的问题，您的标准已经改变，我们只需要添加更多规则：

```
SELECT
/*this is like before*/
SUM(CASE WHEN 
         EXISTS (SELECT 1 FROM gc_sessions sub_s WHERE s.user = sub_s.user 
                  AND ((date(starttime) = CURDATE() - INTERVAL 1 DAY) 
                       OR (date(endtime) = CURDATE() - INTERVAL 1 DAY))) 
    THEN 1 ELSE 0 END) AS FridayAndThursday,
SUM(CASE WHEN 
         EXISTS (SELECT 1 FROM gc_sessions sub_s WHERE s.user = sub_s.user 
                  AND ((date(starttime) = CURDATE() - INTERVAL 2 DAY) 
                       OR (date(endtime) = CURDATE() - INTERVAL 2 DAY)))
         /*this one here is a new addition, since you don't want to count the users that were online yesterday*/
         AND NOT EXISTS (SELECT 1 FROM gc_sessions sub_s WHERE s.user = sub_s.user 
                  AND ((date(starttime) = CURDATE() - INTERVAL 1 DAY) 
                       OR (date(endtime) = CURDATE() - INTERVAL 1 DAY)))
    THEN 1 ELSE 0 END) AS FridayAndWednesdayButNotThursday,
SUM(CASE WHEN 
         EXISTS (SELECT 1 FROM gc_sessions sub_s WHERE s.user = sub_s.user 
                  AND ((date(starttime) = CURDATE() - INTERVAL 3 DAY) /* minus 3 days to get tuesday*/
                       OR (date(endtime) = CURDATE() - INTERVAL 3 DAY)))
         /*this is the same as before, we check again that the user was not online between today and tuesday, but this time we really use BETWEEN for convenience*/
         AND NOT EXISTS (SELECT 1 FROM gc_sessions sub_s WHERE s.user = sub_s.user 
                  AND ((date(starttime) BETWEEN CURDATE() - INTERVAL 2 DAY AND CURDATE() - INTERVAL 1 DAY) 
                       OR (date(endtime) BETWEEN CURDATE() - INTERVAL 2 DAY AND CURDATE() - INTERVAL 1 DAY)))
    THEN 1 ELSE 0 END) AS FridayAndTuesdayButNotThursdayAndNotWednesday,
.../*and so on*/
FROM gc_sessions s
WHERE DATE(starttime) = CURDATE() OR DATE(endtime) = CURDATE() 
```

所以，我希望你现在明白了。还有问题吗？随意问。

**更新结束**

*回答以前版本的问题：*

```
select 
SUM(CASE WHEN EXISTS (SELECT 1 FROM gc_sessions sub_s WHERE s.user = sub_s.user 
                      AND ((date(starttime) = CURDATE() - INTERVAL 1 DAY) 
                           OR (date(starttime) = CURDATE() - INTERVAL 1 DAY))) 
    THEN 1 ELSE 0 END) AS todayAndYesterday,
SUM(CASE WHEN EXISTS (SELECT 1 FROM gc_sessions sub_s WHERE s.user = sub_s.user 
                      AND ((date(starttime) BETWEEN CURDATE() - INTERVAL 2 DAY AND CURDATE() - INTERVAL 1 DAY) 
                           OR (date(starttime) BETWEEN CURDATE() - INTERVAL 2 DAY AND CURDATE() - INTERVAL 1 DAY))) 
    THEN 1 ELSE 0 END) AS todayAndYesterdayOrTheDayBeforeYesterday,
SUM(CASE WHEN EXISTS (SELECT 1 FROM gc_sessions sub_s WHERE s.user = sub_s.user 
                      AND ((date(starttime) BETWEEN CURDATE() - INTERVAL 7 DAY AND CURDATE() - INTERVAL 1 DAY) 
                           OR (date(starttime) BETWEEN CURDATE() - INTERVAL 7 DAY AND CURDATE() - INTERVAL 1 DAY))) 
    THEN 1 ELSE 0 END) AS todayAndWithinTheLastWeek
from gc_sessions s
where date(starttime) = CURDATE()
or date(endtime) = CURDATE() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:31:21.507

示例表：

```
CREATE TABLE `test`.`user_login_history` (
  `id` INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  `userid` INTEGER UNSIGNED NOT NULL,
  `date` DATETIME NOT NULL,
  PRIMARY KEY (`id`)
)
ENGINE = InnoDB; 
```

用户登录后，检查他/她今天是否登录：

```
select count(*) from user_login_history where 
userid = 1 and `date` = '2013-01-28 00:00:00'; 
```

如果返回值为 1，则表示他/她今天已登录。无需更改。
但是，如果返回值为0，则表示他/她今天没有登录。所以记录下来。

```
insert into user_login_history(userid,`date`)values(1,'2013-01-28 00:00:00'); 
```

Q1。有多少用户今天在线而昨天也在线？

```
select count(*) from user_login_history u where 
u.`date` = '2013-01-28 00:00:00' and 
(
select count(*) from user_login_history v where 
v.`date` = '2013-01-27 00:00:00' and 
v.userid = u.userid
) = 1; 
```

Q2。有多少用户今天在线并且在过去两天内也在线

```
select count(*) from user_login_history u where 
u.`date` = '2013-01-28 00:00:00' and
(
select count(*) from user_login_history v where
v.`date` >= '2013-01-26 00:00:00' and
v.`date` <= '2013-01-27 00:00:00' and
v.userid = u.userid
) > 0; 
```

Q3。有多少用户今天在线并且在过去 7 天内也在线

```
select count(*) from user_login_history u where 
u.`date` = '2013-01-28 00:00:00' and
(
select count(*) from user_login_history v where
v.`date` >= '2013-01-21 00:00:00' and
v.`date` <= '2013-01-27 00:00:00' and
v.userid = u.userid
) > 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T12:00:56.653

我建议您不要依赖会话表，而是创建单独的表，其中存储 2 个字段，日期和 user_id。每次用户登录时，您都需要在此表中插入新条目。

这样，您将能够检索您的所有 3 个要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:20:14.793

您需要添加一个从指定范围（例如，1 天/2 天/7 天）加载数据并将其与当天的数据进行比较的子查询。

```
set @range = 7;
select * from gc_sessions
WHERE user in (SELECT user from gc_sessions
where starttime between subdate(current_date, @range) AND subdate(current_date, 1))

AND starttime > subdate(current_date, 0) 
```

where`@range`保存有关天数的信息。请参阅您的扩展 sql fiddle - [http://sqlfiddle.com/#!2/9584b/24](http://sqlfiddle.com/#!2/9584b/24)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T12:01:32.330

对于昨天

```
select id from gc_sessions where id in 
( 
  select id 
  from gc_sessions 
  where starttime > subdate(current_date, 2)
  and endtime < subdate(current_date, 1)
)

and starttime > subdate(current_date, 1); 
```

2天

```
select id from gc_sessions where id in 
( 
  select id 
  from gc_sessions 
  where starttime > subdate(current_date, 3)
  and endtime < subdate(current_date, 1)
)

and starttime > subdate(current_date, 1); 
```

7天

```
select id from gc_sessions where id in 
( 
  select id 
  from gc_sessions 
  where starttime > subdate(current_date, 8)
  and endtime < subdate(current_date, 1)
)

and starttime > subdate(current_date, 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T12:35:31.007

```
 SELECT today.user
          , GROUP_CONCAT(DISTINCT today.ip) ip
       FROM gc_sessions today
       JOIN gc_sessions yesterday
         ON DATE(yesterday.starttime) = DATE(today.starttime) - INTERVAL 1 DAY
        AND today.user = yesterday.user
      WHERE DATE(today.starttime) = '2013-01-10'
      GROUP 
         BY today.user; 
```

# php - 在选择一个选项时，它应该带我到带有标记值的所需页面

> ID：14561437
> 
> 赞同：0
> 
> 时间：2013-01-28T11:52:00.150
> 
> 标签：php, javascript, jquery, html

我在一个房地产网站工作。 *页眉和页脚*在所有页面中是通用的。在主页中，我正在向将显示结果的搜索结果页面提交表单。我在标题中保留了一个选项，例如豪华物业，我自己将值分配给该字段并提交到同一页面。一旦用户单击，我将调用一个`javascript`函数，在该函数中我自己分配值并提交表单。从主页完成此操作时，它可以工作。假设我在联系我们页面，我想查看豪华物业，它要我进入搜索结果页面。那时联系我们页面中没有字段。在这种情况下，我如何将值提交到搜索结果页面？我正在与`PHP`. 这是标题中选项的示例图像。

这是我正在做的代码。

```
function checkCities()
        {
            var userCity = $.cookie('UserCityName');
            if(userCity != null)
            {
                     document.getElementById('cboPropertyTypeRes').value =  'Flats';
                     document.getElementById('cboBedroomsRes').value = '4';
                     document.getElementById('cboMinimumBudgetRes').value = '10000000';
                     document.getElementById('cboMaximumBudgetRes').value = 'Above 2 Crore';
                     $('#frmSearchProperty').submit();
           }
        } 
```

![在此处输入图像描述](../Images/51ab521f04ed0deb02ae4d3d7fce2146.png)

希望我的问题很清楚。答案将是可观的。提前致谢。！！！

# android - 使用android中的服务将文件上传到服务器

> ID：14561448
> 
> 赞同：0
> 
> 时间：2013-01-28T11:52:32.353
> 
> 标签：android

我有一个存储图像的文件夹....所以我想要做的是将这些图像上传到服务器，一旦上传完成我想删除这些图像..这个上传和删除应该在后台发生......所以我创建了一个运行良好的服务..我想要的是每当一个新文件进入这个文件夹时它应该自动上传..即服务应该自动启动......有没有办法做到这一点......？ ?

```
public class MyServices extends Service {

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), "Service Started",
                Toast.LENGTH_LONG).show();

        sendfile();
        return super.onStartCommand(intent, flags, startId);
    }
    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), "Service Stopped",
                Toast.LENGTH_LONG).show();
        super.onDestroy();
    }
} 
```

sendfile() 扫描文件夹并发送图像....所以我必须继续无限调用此方法还是有其他方法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:55:46.667

您可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)有时运行您的服务并检查文件夹。（但请注意电池消耗应用程序 =））。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T23:33:05.970

这里有几个选项：

1.  您可以使用[FileObserver](http://developer.android.com/reference/android/os/FileObserver.html)来监视目录的更改。
2.  如果您的应用正在创建图像，您可以在每次添加新图像时调用 startService。
3.  您可以收听[ACTION_NEW_PICTURE](http://developer.android.com/reference/android/hardware/Camera.html#ACTION_NEW_PICTURE)以了解何时添加了新图片（假设添加图片的应用程序的行为类似于相机应用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-27T15:15:21.807

> ..所以我想要做的是将这些图像上传到服务器，一旦上传完成，我想删除这些图像.. 这种上传和删除应该在后台发生......

这个 Github 库正是这样做的 - [https://github.com/gotev/android-upload-service](https://github.com/gotev/android-upload-service) 2.3K 星 2020 年 4 月

[![在此处输入图像描述](../Images/806927d9baabe749ab9ea4d1c571cd01.png)](https://i.stack.imgur.com/bdp0W.gif)

" - 在后台轻松上传文件（开箱即用的多部分/二进制/FTP），并带有进度指示通知

- 使用 FTP、HTTP 多部分/表单数据或二进制请求将文件上传到服务器

- 在后台处理多个并发上传，即使设备处于空闲状态（打盹模式）

-自动重试失败的上传，具有可配置的指数退避可能性，以在上传成功时自动删除上传的文件

**由该库提供支持的应用程序和库-**

-JIRA云

-Quora

...

"

# sql - SQL Server查询，在1个字段中获取具有不同值的记录，在其他字段中获取最大值

> ID：14561450
> 
> 赞同：0
> 
> 时间：2013-01-28T11:52:34.853
> 
> 标签：sql, sql-server, excel, ms-query

我有一个包含一些列的表：

```
WON   param      |  machine   |    inputdate     |  val
---|-------------|------------|------------------|--------|
18 | PAR.SPTDM.X1|    MM01    | 20/01/2013 12:43 |  2.5   |
18 | PAR.SPTDM.Y1|    MM01    | 20/01/2013 12:43 |  3,4   |
22 | PAR.SPTDM.X1|    MM01    | 22/01/2013 16:10 |  1.2   |
22 | PAR.SPTDM.Y1|    MM01    | 22/01/2013 16:10 |  1.7   |
33 | PAR.SPTDM.X1|    MM03    | 22/01/2013 16:13 |  2.34  |
33 | PAR.SPTDM.Y1|    MM03    | 22/01/2013 16:13 |  2,21  |
27 | PAR.LAS.PWR |    MM10    | 25/01/2013 08:14 |  100.5 |
14 | PAR.LAS.UV  |    MM10    | 18/01/2013 17:27 |  134.8 |
41 | PAR.LAS.UV  |    SLA4    | 27/01/2013 09:14 |  2,1   |
62 | PAR.LAS.UV  |    SLA5    | 27/01/2013 11:15 |  14.6  | 
```

其中一些行被重复（由于我不知道的原因，它是管理系统的后端）。该`value`列也是一个字符串，它需要转换为数字。

数据库是只读的，我想根据几个条件将数据拉入 Excel 工作表：

*   分组`machine`和`param`
*   过滤`param`：仅`'PAR.SPTDM.%'`
*   过滤`machine`：仅`'MM%'`
*   用逗号忽略 val，将其余部分转换为数字

使用以下查询可以正常工作：

```
SELECT DISTINCT t1.param, t1.machine, cast(t1.val as float), t1.inputdate
FROM dbbackend t1
WHERE (t1.machine Like 'MM%')
    AND (t1.param Like 'PAR.SPTDM.%')
    AND (t1.val<>'') And (t1.val not Like '%,%') 
```

现在我只想用最新的`inputdate`. 首先我试过

```
SELECT DISTINCT t1.param, t1.machine, max(cast(t1.val as float)), max(t1.inputdate)
FROM dbbackend t1
WHERE (t1.machine Like 'MM%')
    AND (t1.param Like 'PAR.SPTDM.%')
    AND (t1.val<>'') And (t1.val not Like '%,%')
GROUP BY machine, param 
```

但这给了我`val`不在数据集中的，正确的机器/参数/输入日期，但错误的 val。

下一次尝试是

```
SELECT DISTINCT t1.param, t1.machine, cast(t1.val as float), t1.inputdate
FROM dbbackend t1
WHERE t1.WON IN
    (
    SELECT latestrec.WON FROM (
        SELECT DISTINCT max(t2.WON), t2.param, t2.machine, max(t2.inputdate)
        FROM dbbackend t2
        WHERE (t2.machine Like 'MM%')
            AND (t2.param Like 'PAR.SPTDM.%')
            AND (t2.val<>'') And (t2.val not Like '%,%')
            GROUP BY machine, param
        ) as latestrec
    ) 
```

但这行不通，MS Query 告诉我

> *无法添加表“（”。*

那么有人可以告诉我为什么我在第一次调用时得到错误的值，为什么第二次不起作用，或者正确的方法是什么？我还怀疑 MS 查询会跳过该嵌套子查询：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:59:45.447

你可以试试这个`CTE`功能`ROW_NUMBER`：

```
WITH x AS (SELECT t1.param, 
                t1.machine, 
                Cast(t1.val AS FLOAT) AS val, 
                t1.inputdate, 
                RN=Row_number() 
                     OVER( 
                       partition BY t1.machine, t1.param 
                       ORDER BY t1.inputdate DESC) 
         FROM   dbbackend t1 
         WHERE  ( t1.machine LIKE 'MM%' ) 
                AND ( t1.param LIKE 'PAR.SPTDM.%' ) 
                AND ( t1.val <> '' ) 
                AND ( t1.val NOT LIKE '%,%' )) 
SELECT param, 
       machine, 
       val, 
       inputdate 
FROM   x 
WHERE  rn = 1 
```

# jquery - 无法使用 jquery 在每个表行追加之间应用延迟

> ID：14561455
> 
> 赞同：0
> 
> 时间：2013-01-28T11:52:51.090
> 
> 标签：jquery

我想在每行附加之间延迟 3 秒

只有第一次附加的迭代有效，数组的其余部分不打印

```
$(document).ready(function(){
var n=[];
for(var i=1;i<80;i++)
{
n[i]=i;
$("#content table").append("<tr><td>"+n+"<td></tr>").setTimeout(3000);
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:05:35.397

尝试：

```
 $(document).ready(function () {
 var n = [];
  for (var i = 1; i < 80; i++) {
      n[i] = i;
      $("#content table").delay(3000)
          .queue(function (nxt) {
          $(this).append("<tr><td>" + n + "<td></tr>");
          nxt(); 
      });
   }
 }); 
```

[样本](http://jsfiddle.net/VcEbj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:04:46.213

这是一个工作示例：http: [//jsbin.com/etaqez/4/edit](http://jsbin.com/etaqez/4/edit)

我使用了一个带有计数器的 setInterval。如果达到数组的长度，则清除间隔。

```
$(document).ready(function(){
  var n=[];
  for(var i=1;i<80;i++) {
    n[i]=i;
  }

  var counter = 1;

  var addRow = function(elem){
    if (counter < n.length) {
      $("#content table").append("<tr><td>"+n[counter]+"<td></tr>");

      counter += 1;      
    } else {
      clearInterval(timer);
    }
  };

  var timer = setInterval(addRow, 3000);  

}); 
```

# php - 从php周数获取前一周数

> ID：14561458
> 
> 赞同：1
> 
> 时间：2013-01-28T11:53:10.040
> 
> 标签：php, date, time

我目前需要从传递 php 周数的变量中获取前一周，所以如果是第 13 周，我将得到第 12 周。

我面临的问题是，如果我在第 1 周时从原始数字中减去 1，它将返回第 0 周，除非我创建一个 if 语句，即：

```
if($week==1)
{
    $prev_week=52;
    $prev_year=$year-1;
} 
```

这是假设 php 从 1 而不是 0 开始计算周数。这似乎有点笨拙，我认为可能有更好的方法来利用 PHP 的许多日期和时间函数来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T12:11:05.570

试试这个：

```
$currentWeek = date( 'W' );

$today = strtotime( date( 'Y-m-d' ) ) - 7*24*60*60; // last week this day
// change 7 to 30 to see last year's week numer

$lastWeek = date( 'W', $today );

echo $currentWeek . '--' . $lastWeek; 
```

希望这可以帮助。

**更新**

```
$lastWeekNumber = date( 'W', strtotime( 'last week' ) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-20T10:37:47.080

```
$PreviousWeek = date("W",strtotime("-1 week")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T12:37:46.647

我认为我可能会使问题过于复杂 - 基本上我需要从选定一周的前几周出现的数据库中获取结果，因此如果一年中有 54 周的可能性，我真正需要做的就是：-

```
 if($week==1)
 {
    $year_minsued=$year-1;
    $week_minused=54;
 }
 else
 {
    $week_minused=$week-1;
    $year_minused=$year;
 } 
```

然后我的选择语句可以读取：

```
SELECT SUM(post_price), SUM(total_price) FROM
database_table
WHERE client_id='$account_no'
AND
   (year<='$year_minused' AND week<='$week_minused') 
```

我尚未对此进行测试，但认为它应该可以完成这项工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-13T16:10:48.520

HamZa 和 web-nomad 的回答帮助我走得更远，并确保我得到了正确的年份。使用`date ('Y')`可能会导致意外行为，因为它可能会发生，根据 ISO-8601（这是在欧洲使用的），第 1 周属于下一年或上一年。而是使用`date ('o')`. 否则，您可能会从第 52 周跳到上一年的第 1 周（因为根据`date ('Y')`.

```
$jahr = 2014; // jahr means year
$kw   = 52;   // kw contains week 
```

使用`date ('Y')`回报：

```
previousWeek: 51-2014
currentWeek: 52-2014
nextWeek: 01-2014 
```

使用`date ('o')`回报：

```
previousWeek: 51-2014
currentWeek: 52-2014
nextWeek: 01-2015 
```

一起查看所有代码，例如用于构建前向和后向链接：

```
$kwBack['kw'] = date ("W", strtotime ($jahr. 'W' . str_pad ($kw, 2, 0, STR_PAD_LEFT). ' -1 week'));
$kwBack['jahr'] = date ("o", strtotime ($jahr. 'W' . str_pad ($kw, 2, 0, STR_PAD_LEFT). ' -1 week'));

$kwNext['kw'] = date ("W", strtotime ($jahr. 'W' . str_pad ($kw, 2, 0, STR_PAD_LEFT). ' +1 week'));
$kwNext['jahr'] = date ("o", strtotime ($jahr. 'W' . str_pad ($kw, 2, 0, STR_PAD_LEFT). ' +1 week'));

echo "previousWeek:     " . $kwBack['kw'] . "-" . $kwBack['jahr'];
echo "<br>currentWeek:  " . $kw . "-" . $jahr;
echo "<br>nextWeek:     " . $kwNext['kw'] . "-" . $kwNext['jahr'];
echo "<br>";

// Build the links

$urlBack = $_SERVER['PHP_SELF'] . "?" . http_build_query ($kwBack);
$urlNext = $_SERVER['PHP_SELF'] . "?" . http_build_query ($kwNext);

echo "Previous week: ". $urlBack . "<br>";
echo "Next week: ". $urlNext; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-08T10:32:21.137

我们知道一年可以在 52 或 53 周之间。所以，我在这里创建了一个接收当前周和当前年份的函数。如果这是真的，很明显前一周将是前一年的最后一周，所以通过我给这个函数的变量 year，我减去 1 得到值还是上一年，我试着知道今年有多少周，在这种情况下，例如是第 1 周的前一周。否则，我在本周的值中减去 1 以获得前一周的值。

我希望我有帮助

函数 PreviusWeekNumber($ActualWeek, $Year){

```
 if($ActualWeek === 1){

         $TransformYearIntolastYear = $Year -1;

            $date = new DateTime;
            $date->setISODate($TransformYearIntolastYear, 53);
            $Result =  ($date->format("W") === "53" ? 53 : 52);

     }else{

         $Result = $ActualWeek -1;

     }

     return $Result;

 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T12:28:21.047

检查这个

```
$year = 2013; // Retrieved from the DB
$week = 1;
$prev_week = date("W",strtotime($year. 'W'.str_pad($week, 2, 0, STR_PAD_LEFT). ' -1 week'));
echo $prev_week; // returns 52 
```

显示年份的演示：

```
$year = 2013; // Retrieved from the DB
$week = 1;
$prev_week = date("W - Y",strtotime($year. 'W'.str_pad($week, 2, 0, STR_PAD_LEFT). ' -1 week'));
echo $prev_week; // returns 52 - 2012 
```

# javascript - Knockoutjs 非常慢，有 100 条记录

> ID：14561461
> 
> 赞同：0
> 
> 时间：2013-01-28T11:53:17.203
> 
> 标签：javascript, knockout.js

当我看到我的淘汰赛页面的一些结果时，我正在写一个演示，我很震惊。这是结果： ![在此处输入图像描述](../Images/d587a2fc76ce659ed653d776ad51e1da.png)

我所做的很简单，当有人要求加载数据时，我会执行以下操作：

```
 self.items = ko.observableArray([]);
            self.colors = ko.observableArray([]);
            self.productModels = ko.observableArray([]);

            self.loadData = function() {
            var buffer;

            $.getJSON('/Product/InventoryData')
                .success(function(allData) {
                    buffer = [];
                    buffer = $.map(allData, function(item) { return new SDF.Data.DTO.ProductDto(item); });
                    self.items(buffer);
                })
                .error(function() {
                    alert("error on load data");
                });

            $.getJSON('/Product/GetColors')
                .success(function(allData) {
                    buffer = [];
                    ko.utils.arrayForEach(allData, function (item) {
                        buffer.push(item);
                    });
                    self.colors(buffer);
                })
                .error(function () {
                    alert("error on load colors");
                });

            $.getJSON('/Product/GetProductModels')
                .success(function (allData) {
                    buffer = [];
                    ko.utils.arrayForEach(allData, function (item) {
                        buffer.push(item.Name);
                    });
                    self.productModels(buffer);
                })
                .error(function () {
                    alert("error on load product models");
                });
        }; 
```

所有服务器方法的结果都被缓存，而且速度非常快。颜色和产品模型也是可观察的，因为我想让用户能够更改每个打印项目的产品“颜色”或“模型”。我加载的数据量只有 100 项。

按照我的html：

```
 <tbody data-bind="foreach: items">
        <tr>
            <td>
                <input type="text" data-bind="value: name" />
            </td>
            <td>
                <select data-bind="options: $root.colors, optionsCaption: 'Choose...'">
                </select>
            </td>
            <td>
                <input type="number" data-bind="value: price" />
            </td>
            <td>
                <select data-bind="options: $root.productModels, optionsCaption: 'Choose...'">
                </select>
            </td>
            <td>
                <label data-bind="text: qty">
                </label>
            </td>
            <td>
                <a href="#" id="product-sell">Sell</a>
            </td>
            <td>
                <a href="#" id="product-edit"></a>
            </td>
        </tr>
    </tbody> 
```

除了“page it”之外的任何建议都值得赞赏。

**更新 1**

我发现这是问题所在，但现在我不知道如何解决它。问题是我如何编写每个项目的选择。可能有 repaint foreach 项目。怎么能避免呢？

**更新 2**

我发现的最佳解决方案是在我的标记中使用 Knockoutjs If-binding：http: [//knockoutjs.com/documentation/if-binding.html](http://knockoutjs.com/documentation/if-binding.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:01:48.807

你有没有在任何地方在线获得这个，或者你可以为此拼凑一个快速的jsfiddle，因为它真的不应该花那么长时间！

话虽如此，您为什么要遍历 AJAX 调用的结果并将值放入数组中？

您是否尝试过只进行一次 AJAX 调用并查看它对时间的影响？这是您页面上的大部分 html，还是还有更多？我很想知道是否是数据绑定导致样式计算和布局时间如此之大，因为它确实不应该如此。

# javascript - 什么是 window.console && console.log？

> ID：14561462
> 
> 赞同：13
> 
> 时间：2013-01-28T11:53:18.440
> 
> 标签：javascript, jquery

```
 if (open_date) {
        open_date = get_date_from_string(open_date);
        window.console && console.log(open_date);
        window.console && console.log(cancel_until); 
```

是什么`window.console && console.log`？它必须在代码中吗？通过此脚本不适用于 IE（所有版本）--> [IE 仅在按 F12 后运行 javascript](https://stackoverflow.com/questions/7602277/ie-runs-javascript-only-after-pressing-f12)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T11:54:51.783

只有当 leftside-expression 为 时，才会计算 rightside-expression `truthy`。这就是*逻辑 AND*运算符的工作原理。

它基本上是缩写

```
if( window.console ) {
    console.log( open_date );
} 
```

您可能猜对了，这是这种情况下的常见模式，因为该`console`对象可能并非在每个浏览器（尤其是移动设备）上都可用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T12:09:34.377

**1.) 什么是 window.console && console.log ？**

console.log 是指用于调试的控制台对象。例如，对于 firefox，我使用[firebug](https://getfirebug.com/)。

但如果控制台不可用，脚本将崩溃。所以 window.console 检查控制台对象是否存在，如果存在，它使用其日志功能打印出一些调试信息。

**2.) 它必须在代码中吗？**

不，它仅用于调试目的

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-29T17:32:40.487

```
window.console && console.log(open_date); 
```

上面的代码只是 if 条件语句的缩写。它不必在那里。它用于调试目的。对于大多数浏览器，您可以按 F-12 打开浏览器调试控制台。Chrome 有一个内置的调试控制台。Firefox 有一个名为 FireBug 的扩展程序，您可以使用它。下面是没有'&&'的等效语句。

```
if (window.console) console.log(open_date); 
```

我更喜欢在我的 javascript 代码的开头添加以下代码，这样我就不必到处都有这些“if”语句。它确实节省了空间并消除了潜在的错误。

```
if (typeof console == "undefined") { window.console = {log: function() {}}; } 
```

Jon Dvorak 的上述评论包含了一种优雅的替代方法：

```
console = window.console || {log:function(){}} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T11:55:19.340

Console.log 是浏览器的记录器，它在浏览器控制台上记录消息。编辑：较低版本的 Internet Explorer 不支持 Console.log

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-27T15:18:04.553

此条件用于防止 IE 上的错误...因为不幸的是，在 IE（版本 8）中我们不能使用 console.log("") ....但是测试人员仍然在 Chrome 上查看日志...

# php - Cakephp 2 ACL ERR_TOO_MANY_REDIRECTS

> ID：14561468
> 
> 赞同：2
> 
> 时间：2013-01-28T11:53:48.760
> 
> 标签：php, cakephp, cakephp-2.0, acl

我正在尝试实现此处找到的 ACL 教程：http: [//book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

我按照所有说明进行操作，但是当我尝试转到**[my_site]/users/add** ERR_TOO_MANY_REDIRECTS 错误时。

我在 Cakephp 网站上找到了这个：

> 例如，当我们有一个元素从控制器的方法接收数据时，就会发生这种情况，并且该方法的实现需要进行登录会创建一个无限循环，最终导致浏览器拒绝重定向

他们建议将此作为解决方法：

```
function  beforeFilter ()  { 
 $ this -> Auth -> allow ( 'CONTROLLER_NAME' ); 
} 
```

这似乎不起作用。

如果我从这里更改 AppController：

```
public function beforeFilter() {
    $this->Auth->allow('index', 'view', 'login', 'add');
} 
```

到：

```
public function beforeFilter() {
    $this->Auth->allow('*');
} 
```

我不再收到错误消息，但被重定向到**[my_site]/users/login**

关于我做错了什么我无法查看用户添加页面的任何建议？蒂亚！

用户控制器：

```
public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('add');
    } 
```

登录功能（UsersController）：

```
Public function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Invalid username or password, try again'));
        }
    }
} 
```

验证组件加载器：

```
public $components = array(
        'Session',
        'RequestHandler',
        'Auth' => array(
            'loginRedirect' => array('controller' => 'projects', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'pages', 'action' => 'display', 'home')
        )
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:23:26.930

您收到的错误与 ACL 无关，而是与 Auth 组件拒绝访问您的`UsersController`添加和登录功能有关，它试图将用户重定向到该功能。确保`add`and`login`函数是公开的，通过在你的`UsersController`（而不是你的`AppController`）中添加这一行：

```
public function beforeFilter() {
    $this->Auth->allow(array('add', 'login'));
} 
```

您现在遇到的循环是因为 add 和 login 函数不是公共的，因此循环看起来像：`add -> Unauthorized -> login -> Unauthorized -> login`...等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:49:07.193

我终于设法在 Brian 的帮助下解决了这个问题：

> 你有 requestAction() 代码吗？如果是这样，请尝试将其添加到

```
AppController::beforeFilter() 

if (isset($this->params['requested'])) $this->Auth->allow($this->action); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:39:11.020

请将您`beforeFilter()`的 '更改`Auth->allow('_CONTROLLER_NAME')`为：

```
public function beforeFilter(){
    $this->Auth->allow();
} 
```

希望对你有用！

# mysql - 没有存储例程的 MySQL 循环

> ID：14561472
> 
> 赞同：1
> 
> 时间：2013-01-28T11:53:59.180
> 
> 标签：mysql, loops, batch-processing

我经常发现自己需要执行类似批处理的 MySQL 操作。现在我需要使用参数 0、1、2、... 1,000 调用存储例程 1,000 次。我可以创建一个带有`LOOP`构造的存储例程来执行此操作，或者编写

```
CALL MyStoredRoutine(0);
CALL MyStoredRoutine(1);
...
CALL MyStoredRoutine(1000); 
```

我认为这两个选项都很麻烦。我想知道是否有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-23T18:38:54.823

假设要求只传递一个 INT 参数，如果您使用 *nix（使用由 ~/.mylogin.cnf 提供的 mysql 用户凭据），则可以在 shell 中使用 bash 单行。

```
$ for i in {1..1000}; do mysql -e "call `db`.`selecta`($i)"; done

+------+
| a    |
+------+
|    1 |
+------+
+------+
| a    |
+------+
|    2 |
+------+
... 
```

在这里，过程`selecta`只是对传递给过程的参数执行 SELECT，但您可以将该技术应用于任何例程。

# bash - 在 shell 脚本中使用 bash $HOME

> ID：14561475
> 
> 赞同：6
> 
> 时间：2013-01-28T11:54:28.253
> 
> 标签：bash, shell

如何使 bash 执行变量值。例如，我们有这段代码，其中变量值设置在单引号（！）中。

```
#!/bin/bash
V_MY_PATH='$HOME'
echo "$V_MY_PATH"
ls $V_MY_PATH 
```

输出是

```
$HOME
ls: $HOME: No such file or directory 
```

如果有的话，如何让 bash 将 shell 变量转换为它的值。

我想在 V_MY_PATH='$HOME' 之后添加一些代码来生成类似 echo $HOME 的输出。

这很简单，但我被卡住了。（注意：我知道使用 V_MY_PATH="$HOME" 可以正常工作。）

编辑部分：我只是想让它简单，但我觉得需要一些细节。

我正在从文件中获取参数。这部分效果很好。我不想重述。问题是当我的 V_MY_PATH 包含一个预定义的变量（如 $home）时，它不会被视为它的值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T12:02:36.950

删除单引号

```
V_MY_PATH='$HOME' 
```

应该

```
V_MY_PATH=$HOME 
```

你想`$HOME`用作变量

您不能在单引号中包含变量。

完整脚本：

```
#!/bin/bash
V_MY_PATH=$HOME
echo "$V_MY_PATH" 
ls "$V_MY_PATH"  #; Add double quotes here in case you get weird filenames 
```

输出：

```
/home/myuser
0
05430142.pdf
4
aiSearchFramework-7_10_2007-v0.1.rar 
```

等等

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T12:02:41.270

使用变量间接引用：

```
pete.mccabe@jackfrog$ p='HOME'
pete.mccabe@jackfrog$ echo $p
HOME
pete.mccabe@jackfrog$ ls ${p}
ls: cannot access HOME: No such file or directory
pete.mccabe@jackfrog$ ls ${!p}
bash                        libpng-1.2.44-1.el6      python-hwdata           squid
...
pete.mccabe@jackfrog$ 
```

${!p} 表示取 $p 的值，该值是我希望引用的内容的变量的名称

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T11:57:08.490

使用**[eval](http://tldp.org/LDP/abs/html/internal.html#EX43)**命令：

```
#!/bin/bash

V_MY_PATH='$HOME'
echo "$V_MY_PATH"
eval ls $V_MY_PATH 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-03T19:12:32.200

1.  您可以使用单引号或双引号，在您的情况下，如果您愿意，可以不使用。

2.  你没有告诉 bash 变量等于什么。也许是这样的？（除非我误解了你想要做什么）

==================================================== =====================

```
#!/bin/bash

#########################
#       VARIABLES       #
#########################
V_MY_PATH=home

#########################
#        SCRIPT         #
#########################

echo "What is your home path?"
read $home
echo "Your home path is $V_MY_PATH"
ls $V_MY_PATH 
```

当然，您也可以删除顶部的变量并使用： echo "Your home path is $home"

# sql - 使用 datagridview 更改更新数据库

> ID：14561477
> 
> 赞同：0
> 
> 时间：2013-01-28T11:54:29.437
> 
> 标签：sql, database, datagridview, sql-update

我已经`datagridview`通过数据适配器从数据库中填充。问题是我不能使用生成的填充、更新和删除命令，因为在我的`SELECT`查询中是两个连接表。我需要一些指导如何实现这一目标。我想更新`CellEndEdit`程序的变化。我应该用两个没有连接表的 SELECT 语句填充 datagridview 吗？还是有一些最简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:06:47.020

使用`UpdateCommand`您的数据适配器 ( [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx) ) 的属性来指定一个自定义存储过程（然后您必须自己编写）执行 SQL 更新

# mysql - DbExpress：在旧的 MySQL 5.0 服务器上使用新的 5.1 libmysql.dll

> ID：14561482
> 
> 赞同：0
> 
> 时间：2013-01-28T11:54:44.687
> 
> 标签：mysql, delphi, dbexpress, libmysql

我想从其他开发人员那里了解将最近的 libmysql.dll 与以前的 MySQL 服务器一起使用是否有任何缺陷。我使用 Delphi 和 DbExpress 来构建数据库应用程序。

我的主要原因是我的开发机器上同时安装了 Delphi 7 和 Delphi 2010。我用 D7 构建了使用 MySQL 5.0 但 D2010 需要 MySQL 5.1 的应用程序。

如果我能提供帮助，我想避免升级我以前的所有数据库应用程序，因此我想继续使用 MySQL 5.0 服务器，但仍然使用 D2010 开发所有新的数据库应用程序。

您对此事的意见和/或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T13:12:44.527

我有类似的 D7 和 D2010 应用程序，建议您反过来看 - 移动到 MySQL 5.1 或更高版本并测试您的 D7 应用程序以确认它们工作。（如果没有，添加新版本的 libmysql.dll（例如 MySQL v5.1.8），并确保您没有在 windows 路径中使用“旧”libmysql（重命名所有其他文件并将新的 libmysql 放入你的应用程序 exe 目录。HTH Chris

# c++ - 非类型模板参数的链接器错误

> ID：14561484
> 
> 赞同：0
> 
> 时间：2013-01-28T11:54:49.883
> 
> 标签：c++, templates, linker-errors, non-type

全部。

我制作了一组c++代码如下。
然后，我通过 g++ 将每个编译成功`.cpp`。 但是，我得到了一个链接错误`.o`

```
 Undefined symbols for architecture x86_64:
  "derive1<3>::derive1(int)", referenced from:
      derive2::derive2(int)in derive2.o
      derive2::derive2(int)in derive2.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

你能告诉我发生了什么事吗？如果我将所有代码片段绑定在一个文件中，则不会出现任何错误，并且可以按我的预期完美运行。我想我应该在某处引入 extern 关键字，但我不知道该怎么做。

我的编译器是

> i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.11.00）

“基地.hpp”

```
class base {
public:
  virtual int hoge( int num ) = 0;

}; 
```

“派生1.hpp”

```
#include "base.hpp"
#include <iostream>

template <int N>
class derive1 : public base {
public:
  explicit derive1( int n );
  virtual int hoge( int num ) {
    std::cout << "num = " << num << std::endl
          << "N = " << N << std::endl;
    return N;
  }    

}; 
```

“派生1.cpp”

```
#include "derive1.hpp"

template <int N>
derive1<N>::derive1 ( int n ) {
  std::cout << "This is the constructer of derive1" << std::endl
        << "N = " << N << ", n = " << n << std::endl;
} 
```

“派生2.hpp”

```
#include "derive1.hpp"
#include <iostream>

class derive2 : public derive1<3> {
public:
  explicit derive2( int n );
}; 
```

“派生2.cpp”

```
#include "derive2.hpp"

derive2::derive2( int n ) : derive1<3>( n ) {
  std::cout << "This is the constructer of derive2" << std::endl
        << "n = " << n << std::endl;
} 
```

“派生测试.cpp”

```
#include<iostream>
#include "derive2.hpp"

int main() {

  derive2 test(3);

  std::cout << "return value = "
        << test.hoge( 5 )
        << std::endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:02:23.737

简单的答案是您必须将所有模板化代码（`derive1::derive1(int)`等）放入头文件中，而不是放入它们自己的翻译单元中。编译器在尝试实例化模板时需要查看完整的定义。当然，您*可以*在`*.cpp`文件中定义模板，但是您必须显式地专门化它并在头文件中声明该专门化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:58:06.927

您不应该为模板类拆分 .h 和 .cpp 文件的定义和实现。

[什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix/12574417#12574417)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T11:59:06.670

不幸的是，大多数编译器需要模板函数的实现（在这种情况下，`template <int N> derive1<N>::derive1 ( int n )`使用它的编译单元可以使用它。将它移动到“derive1.hpp”。

# java - 通过Java将echo的输出重定向到文件

> ID：14561489
> 
> 赞同：4
> 
> 时间：2013-01-28T11:55:01.983
> 
> 标签：java, process, processbuilder, io-redirection

> **可能重复：**
> [ProcessBuilder 重定向输出](https://stackoverflow.com/questions/5986324/processbuilder-redirecting-output)

以下代码：

```
ProcessBuilder pb = new ProcessBuilder(new String[] {"echo", "some text", ">", "test"}); 
```

不断返回“ `some text > test`”。

我究竟做错了什么？

**编辑：**

这行得通

```
ProcessBuilder pb = new ProcessBuilder(new String[] {"bash", "-c", "echo sometext > test"}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:59:08.577

尝试关注

```
 ProcessBuilder pb = 
new ProcessBuilder("cmd.exe", "/c" ,"echo", "some text", ">", "test"); 
```

这适用于**窗户**

实际上，'Echo' 不是命令，它是 windows 中的 shell (cmd.exe) 和**linux**或**unix**中的 "bash" 的内部命令。所以，对于 Unix/Linux

```
 ProcessBuilder pb = 
new ProcessBuilder("bash", "-c","echo \"some text\" >test"); 
```

# javascript - javascript中的字符串比较

> ID：14561492
> 
> 赞同：1
> 
> 时间：2013-01-28T11:55:19.657
> 
> 标签：javascript, html, string-comparison

我有一个组合框，从中我得到值，我得到的值也是正确的，但是当我比较它们时，它没有得到比较，我也没有得到结果。

```
if(selectedItems[2] === "Pick Pack"){
                alert("packing Method 1: "+selectedItems[2]);
                global.getElementById("CIMtrek_daily_contact_1").value="";
                global.getElementById("CIMtrek_daily_contact_1").value="chris.dowden@shawinc.com"; 
            } 
```

当我打印`selectedItems[2]`它时，它给了我`Pick Pack`，但没有进入 if 条件和警报。我试图提醒，但提醒没有到来。请帮我解决这个问题

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:19:41.007

尝试使用

```
String.prototype.trim=function(){
 return this.replace(/^\s+|\s+$/g, '');
}; 
```

和

```
if(selectedItems[2].trim() === "Pick Pack"){
                alert("packing Method 1: "+selectedItems[2]);
                global.getElementById("CIMtrek_daily_contact_1").value="";
                global.getElementById("CIMtrek_daily_contact_1").value="chris.dowden@shawinc.com"; 
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:56:49.677

像这样试试

```
if(selectedItems[2] === "Pick Pack"){
            var data = 'packing Method 1: '+selectedItems[2],
            alert(data);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T12:04:22.093

我猜您使用的是三重 === 而不是双 ==。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:08:10.527

感谢您的发帖。`Abhijeet Pawar`和`Florian Margaine`评论让我开始解决这个问题

以下是帮助解决问题的代码；

```
if($.trim(selectedItems[2]) === $.trim("Pick Pack")){
                global.getElementById("CIMtrek_daily_contact_1").value="";
                global.getElementById("CIMtrek_daily_contact_1").value="chris.dowden@shawinc.com"; 
            } 
```

# spring - JSTL：动态数字货币，改变模式并保持动态？

> ID：14561494
> 
> 赞同：1
> 
> 时间：2013-01-28T11:55:38.177
> 
> 标签：spring, jsp, jstl

我正在尝试动态显示一种货币，这完全可以！

但我想将模式从“SFr. 150'000.00”更改为“150'000.00 SFr”。（并且仍然保持动态！）

有什么建议我该怎么做？

这是代码：

```
<fmt:setLocale value="${pageContext.request.locale}" scope="session" />

<fmt:formatNumber type="currency" value="${investVolume}" /> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:15:18.700

```
<fmt:formatNumber type="currency" value="${investVolume}" pattern="###,###.## ¤"/> 
```

pattern 属性遵循[DecimalFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)规则。

图案中的`¤`代表货币符号。

虽然我不确定这是否`'`会显示在较高或较低的位置，但这应该是要走的路。

# php - 如何在 smarty 模板中识别数组数据中的标签？

> ID：14561496
> 
> 赞同：2
> 
> 时间：2013-01-28T11:55:39.103
> 
> 标签：php, foreach, smarty, associative-array

以下是 smarty 模板的代码片段。实际上有一个关联数组，我们在 smarty 模板中显示它的值。关联数组的一个这样的元素是`$ans.answer_text`，我必须检查`<img>`内容（值）中是否存在任何标签，如果`<img>`标签存在，我必须做一些逻辑，如果没有，我必须做其他一些逻辑。但我面临的主要问题是如何检查`<img>`数组元素数据中是否存在标签？请帮我解决这个问题。提前致谢。

```
<tr valign="top">
    {foreach from=$qstn_ans.answer item=ans key=ans_no}
         <td valign="top" valign="top">
         {if $ans.answer_is_right==1}{assign var='correct_ans' value=$ans_no+1}{/if}
         <b>{$ans_no+1}.</b>&nbsp;&nbsp;
         {if $ans.answer_text!=''}{$ans.answer_text}{/if}
         <br />
         {if $ans.answer_file!=''}<img src="{$ans_thumb_img_path}{$ans.answer_id}_{$ans.answer_file}" />{/if}
         </td>
    {/foreach}
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:39:17.150

这种用法违背了使用寺庙引擎的目的。理想情况下，您应该在控制器中进行这些检查。

我会通过以下方式做到这一点：

```
$qstn_ans = array();
// PHP Controller
foreach ($qstn_ans as $key => $value) {
    $imgPath = ''; // generate the name here
    $qstn_ans[$key]['hasImage'] = (file_exists($imgPath))?1:0;
}

// Template file
{if $ans.hasImage}<img src="<!-- insert image here -->" />{/if} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:34:19.160

您是否尝试过使用 {html_image}？

[http://www.smarty.net/docsv2/en/language.function.html.image.tpl](http://www.smarty.net/docsv2/en/language.function.html.image.tpl)

# c# - 如何在整个网络中找到系统的IP地址

> ID：14561502
> 
> 赞同：0
> 
> 时间：2013-01-28T11:56:01.577
> 
> 标签：c#

> **可能重复：**
> [获取本地IP地址c#](https://stackoverflow.com/questions/6803073/get-local-ip-address-c-sharp)

目前我正在使用以下代码获取登录我网站的每台机器的 IP 地址。如果我的网站在我的 Intranet 服务器中，它工作正常。但是如果在客户服务器上部署了相同的代码，并且如果我使用客户应用程序 URL 从我的位置访问该站点`(http://123.23.45.89/MyProd/App.htm)`，它正在更新我的服务器地址的 ip 地址，不是我的本地机器IP。

```
string IP4Address = String.Empty;

foreach (IPAddress IPA in Dns.GetHostAddresses(Request.ServerVariables["REMOTE_ADDR"].ToString())))
{
  if (IPA.AddressFamily.ToString() == "InterNetwork")
  {
    IP4Address = IPA.ToString();
    break;
  }
}

if (IP4Address != String.Empty)
{
  return IP4Address;
}

foreach (IPAddress IPA in Dns.GetHostAddresses(Dns.GetHostName()))
{
  if (IPA.AddressFamily.ToString() == "InterNetwork")
  {
    IP4Address = IPA.ToString();
    break;
  }
}

return IP4Address; 
```

如果有任何其他方法可以找到个人电脑的 IP 地址。（比如通过互联网从任何机器上找到本地 IP 地址）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:00:40.433

据我所知，从 LAN 网络到外部服务器的所有连接都具有网络的 WAN Ip（通常是路由器的）。:(

# c# - 如何获取 wpf datagrid 选定的行值？

> ID：14561505
> 
> 赞同：0
> 
> 时间：2013-01-28T11:56:12.497
> 
> 标签：c#, wpf, wpfdatagrid

```
var Id = AccMgtgrid.SelectedItems; 
```

我得到下面的结果

![在此处输入图像描述](../Images/03cb62807ed06df87be25e02398d5ff8.png)

但我必须单独返回值**4785**。我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:08:21.430

似乎您已允许用户选择多行。如果您已将 SelectionMode 设置为 Extended，则无法获得单个值。

如果将 SelectionMode 设置为 single 然后执行此操作。

**[编辑]**

```
int accountId;
var selectedRow = AccMgtgrid.SelectedItem;
if (selectedRow != null)
    accountId = selctedRow.AccountId; 
```

**[/编辑]**

如果您允许多行，请执行此操作。

```
List <int> idList = new List<int>();
var results = AccMgtgrid.SelectedItems;
foreach (var result in results)
    idList.Add(result.AccountID); 
```

这将为您提供用户选择的所有帐户 ID 的列表。

# c++ - Qt QHBoxLayout 百分比大小

> ID：14561516
> 
> 赞同：30
> 
> 时间：2013-01-28T11:56:28.377
> 
> 标签：c++, qt, qt4

如何保持两个 QHBoxLayouts 之间的纵横比？

例如，我希望 QHBoxLayout 是整个窗口宽度的三分之一，另一个是整个窗口宽度的三分之二： ![在此处输入图像描述](../Images/d36bb336698c27248681160576b71b4c.png)

我怎样才能做到这一点？我尝试弄乱其中控件的大小提示，但没有成功

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-28T12:01:32.213

[无效 QSizePolicy::setHorizo​​ntalStretch(uchar stretchFactor)](http://qt-project.org/doc/qt-4.8/qsizepolicy.html#setHorizontalStretch)

例子：

```
QHBoxLayout* layout = new QHBoxLayout(form);

QWidget* left = new QWidget(form);
QSizePolicy spLeft(QSizePolicy::Preferred, QSizePolicy::Preferred);
spLeft.setHorizontalStretch(1);
left->setSizePolicy(spLeft);
layout->addWidget(left);

QWidget* right = new QWidget(form);
QSizePolicy spRight(QSizePolicy::Preferred, QSizePolicy::Preferred);
spRight.setHorizontalStretch(2);
right->setSizePolicy(spRight);
layout->addWidget(right); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-01-01T15:01:29.027

[york.beta](https://stackoverflow.com/users/2009882/york-beta)的答案是有效的，但我更喜欢更少的代码。

至少 sizePolicy 默认是 Prefered/Prefered。

> 默认策略是 Preferred/Preferred，这意味着小部件可以自由调整大小，但更喜欢 sizeHint() 返回的大小。

您可以简单地使用*addWidget的**第二个*参数来拉伸小部件。

 *```
QHBoxLayout *layout = new QHBoxLayout( this );
layout->setContentsMargins( 0, 0, 0, 0 );
layout->setSpacing( 0 );

QPushButton *left = new QPushButton( "133px", this );
left->setStyleSheet( "QPushButton{border: 1px solid red;}" );
QPushButton *right = new QPushButton( "267px", this );
right->setStyleSheet( "QPushButton{border: 1px solid blue;}" );

layout->addWidget( left, 33 );
layout->addWidget( right, 66 );

this->setLayout( layout );
this->setFixedWidth( 400 ); 
```

[![在此处输入图像描述](../Images/ed01eb8d1106ccd05dd5c7a8c05934f5.png)](https://i.stack.imgur.com/fZl2B.png)

见[http://doc.qt.io/qt-5/qboxlayout.html#addWidget](http://doc.qt.io/qt-5/qboxlayout.html#addWidget)

和[http://doc.qt.io/qt-5/qwidget.html#sizePolicy-prop](http://doc.qt.io/qt-5/qwidget.html#sizePolicy-prop)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-05T10:29:59.540

您还可以使用 layoutStretch 属性：

[https://doc.qt.io/qt-5/layout.html#stretch-factors](https://doc.qt.io/qt-5/layout.html#stretch-factors)

在你的情况下

```
<layout class="QHBoxLayout" name="horizontalLayout" stretch="1,2"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T12:02:40.757

您可以编辑小部件的 sizePolicy 并为右侧的小部件设置更高的[水平](http://doc.qt.digia.com/qt/qsizepolicy.html#setHorizontalStretch)拉伸。*

# ios - 如何将多个选择添加到段控制器？

> ID：14561517
> 
> 赞同：0
> 
> 时间：2013-01-28T11:56:33.363
> 
> 标签：ios, objective-c, xcode

![段控制器](../Images/ccdd2682617fb3200002bf94f4c3ddcc.png)

在 xcode 中，您可以实现一个段控制器，但它只允许一次选择一个！制作这样的东西最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:00:31.977

UISegmentedControl 无法做到这一点。您可以做的是创建一些 UIButtons 并为它们设置自定义的选定状态图像，以便您知道它们何时被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T09:21:03.667

使用来自 Github 的[**ATHMultiSelectionSegmentedControl**](https://github.com/attheodo/ATHMultiSelectionSegmentedControl)

[这是Cocoapod](https://cocoapods.org/?q=lang%3Aswift%20ATHMultiSelectionSegmentedControl)

# android - 使用 google map api v2 for android 生成热图图层

> ID：14561520
> 
> 赞同：5
> 
> 时间：2013-01-28T11:56:52.590
> 
> 标签：android, android-maps-v2

我想根据一个区域的信号强度在安卓手机上绘制热图。我可以使用 android map api v2 获取谷歌地图。但我不知道如何在上面绘制热图。我已经
[使用 Android Google Maps API 来显示热图图层](https://stackoverflow.com/questions/9902688/using-android-google-maps-api-to-display-a-heat-map-layer)，但此处指向 mapex 的链接并没有太大帮助。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T21:44:53.143

这只是一个想法，但您有没有想过使用 V2 地图中内置的 Circles.. 这可能听起来很奇怪，但它可能适合您的需求...

我会假设每个点都有一个可以设置的特定半径，然后你可以使用具有一定透明度的颜色，当靠近其他点时会相互重叠，使颜色在高点集中的区域更暗，在集中度较低的区域更亮. 当然，这只有在您希望使用一种颜色和该颜色的不同色调时才有效。例如：

```
// Instantiates a new CircleOptions object and defines the center and radius
CircleOptions circleOptions = new CircleOptions()
    .center(new LatLng(37.4, -122.1))
    .radius(10)); // In meters
    .fillColor(0x1AFF0000)//90% transparent red
    .strokeColor(Color.TRANSPARENT)//dont show the border to the circle
// Get back the mutable Circle
Circle circle = myMap.addCircle(circleOptions); 
```

如果您要执行此操作，然后在同一点再次添加它，但半径为 20，您将获得类似于附加图像的输出，这将允许您在某个特定点远离时淡出。这就像将所有点放入 for 循环并将圆圈添加到循环中的地图一样简单。这可能不是您想要的，但可能会帮助某人！ ![示例地图](../Images/aac0a8e4cec8480611eb21e7b08a11eb.png)

# javascript - 如何获取CKEDITOR文本区域的滚动/鼠标/光标的XY位置

> ID：14561521
> 
> 赞同：0
> 
> 时间：2013-01-28T11:56:54.120
> 
> 标签：javascript, jquery, asp.net, dom, ckeditor

我正在使用`CKEDITOR 4`. 如何找出***滚动/鼠标/光标XY位置*** （*不是窗口*）？

我已经测试了下面的代码，但它给出了窗口的滚动位置：

```
var win = new CKEDITOR.dom.window( window );
var pos = win.getScrollPosition();
alert( "pos.x :: " + pos.x + " pos.y :: " + pos.y ); 
```

我需要 CKEDITOR 文本区域的 XY 位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:04:09.037

尝试这个

```
var selectedRange = selected.getRanges()[0];
var node = selectedRange.startContainer;
var value = node.getText();
var position = selectedRange.endOffset; 
```

或查看[此参考](http://blog.vishalon.net/index.php/javascript-getting-and-setting-caret-position-in-textarea/)

这是代码以防万一链接断开！

```
 function doGetCaretPosition (ctrl) {
    var CaretPos = 0;   // IE Support
     if (document.selection) {
         ctrl.focus ();
         var Sel = document.selection.createRange ();
         Sel.moveStart ('character', -ctrl.value.length);
         CaretPos = Sel.text.length;
      }
   // Firefox support
   else if (ctrl.selectionStart || ctrl.selectionStart == '0')
        CaretPos = ctrl.selectionStart;
          return (CaretPos);
       }
  function setCaretPosition(ctrl, pos){
      if(ctrl.setSelectionRange)
    {
      ctrl.focus();
      ctrl.setSelectionRange(pos,pos);
    }
    else if (ctrl.createTextRange) {
    var range = ctrl.createTextRange();
    range.collapse(true);
    range.moveEnd('character', pos);
    range.moveStart('character', pos);
    range.select();
    }
 } 
```

# css - 在表单提交（html）上，我如何传递按钮和警报的值

> ID：14561522
> 
> 赞同：0
> 
> 时间：2013-01-28T11:56:57.770
> 
> 标签：css, form-submit

假设我有 10 个按钮，在按下提交后我想发送该按钮的值来控制 servlet，我这样做了：

在 HTML 页面中

```
<body> 
    <form action="test" method="get">
        <input type="button"  name="dfhgdh" value="uiui"  />   
        <input type="button" value="uiui" name="dfhgdh" />
        <input type="button" value="dghdh" name="dfhgdh" />
        <input type="button" value="dthydt" name="dfhgdh" />
        <input type="submit" value="submit" name="fuyjuf" />
    </form>
</body> 
```

并在 Control-servlet

```
Protected void processRequest(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException
{
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    String mn =request.getParameter("dfhgdh");        
    System.out.println(mn);    
} 
```

有没有人能说出哪里出了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:00:27.423

通过按钮传递参数时，您需要注意 IE < 9。这些浏览器将发送按钮的 innerHTML，而不是 value 属性。为了宣传这一点，我在页面上添加了 Javascript，将按钮中的值添加到页面内的隐藏输入中。

# objective-c - 标签栏 ios6 中的 UISplitViewController

> ID：14561525
> 
> 赞同：0
> 
> 时间：2013-01-28T11:57:22.957
> 
> 标签：objective-c, xcode, ios6, uitabbarcontroller, uisplitviewcontroller

我知道 Apple 之前已经声明 UISplitView 控制器不应该通过阅读 stackoverflow 上的其他帖子在 TabBarController 中使用 - 我在 Apple 开发人员网站上查看了相关文档，但我找不到任何东西建议不要这样做。

我知道在以前的版本中，这是因为 SplitViewController 没有正确接收到方向消息 - 但是我的应用程序始终处于横向模式。

我有 9 个拆分视图控制器 - 如果我现在必须更改它，这将是对我的应用程序的重大重新设计 - 事实上，我不太确定以我需要的格式显示数据的另一种方式！

最近有没有人在应用程序中被Apple接受这种情况？我只是担心，因为有这么多帖子（从 2010 年起）说绝对不能这样做，但是在查看 SDK 文档时我不明白为什么不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:04:15.933

UISplitViewController 本身不允许包含在导航控制器或标签栏控制器中。我使用了来自MGSplitViewController 的[MGSplitViewController](http://www.cocoacontrols.com/platforms/ios/controls/mgsplitviewcontroller)，但是我还没有将它提交到 Apple Store。MGSplitViewController 属于 UIViewController 类，因此您可以将其包含在选项卡栏中。

# ios6 - 从 GameCenter 的推送通知恢复应用程序时跳板崩溃

> ID：14561526
> 
> 赞同：1
> 
> 时间：2013-01-28T11:57:24.767
> 
> 标签：ios6, crash, game-center, springboard

我正在使用 GameCenter 开发一个基于回合的游戏，并不断收到下面的 SpringBoard 崩溃。使用弧。Iphone 4 on ios 6.0.1 请帮助理解原因，我已经与它斗争了大约两个星期。

已经发现了什么：

1.  AVFoundation 框架中的一个巨大漏洞，用 AudioToolbox 调用替换了 AVAudioPlayer，但你可能都知道，崩溃变得更加罕见，所以我想这实际上是内存问题，但不知道在哪里进一步挖掘
2.  在**[GKTurnBasedMatch loadMatchesWithCompletionHandler:^(NSArray *theMatches, NSError *error) {}]**调用中发现泄漏，仅在 ios6 上重现，不在 ios5 上，可以提供示例代码，在苹果修复它之前无法做任何事情
3.  后台有更多应用程序 - 更多崩溃的机会
4.  分配工具没有显示内存使用量的任何显着增长，增量很小，但就是**loadMatchesWithCompletionHandler**
5.  僵尸启用 - 完全没有帮助，仪器停在弹簧板坠毁的地方
6.  我从未见过妻子的 iphone 4s 崩溃
7.  看起来类似于[iOS 5.0.1：SpringBoard 在触摸推送通知横幅后崩溃](https://stackoverflow.com/questions/9373582/ios-5-0-1-springboard-crashed-after-touching-the-push-notification-banner)

先感谢您。

控制台日志：

```
Jan 28 13:05:29 Valentyn-Kovalskyys-iPhone4 ReportCrash[4481] <Notice>: Formulating crash report for process SpringBoard[3751]
Jan 28 13:05:29 Valentyn-Kovalskyys-iPhone4 backboardd[52] <Warning>: System app "com.apple.SpringBoard" has died. Spawning again...
Jan 28 13:05:29 Valentyn-Kovalskyys-iPhone4 com.apple.launchd[1] (com.apple.SpringBoard[3751]) <Warning>: (com.apple.SpringBoard) Job appears to have crashed: Segmentation fault: 11 
```

碰撞：

```
Incident Identifier: 67764776-21CD-41EA-B753-A83330CF375B

CrashReporter Key:   669f16a9b5f96366bba1fa191fa248f52ac432b5

Hardware Model:      iPhone3,1

Process:         SpringBoard [3751]

Path:            /System/Library/CoreServices/SpringBoard.app/SpringBoard

Identifier:      SpringBoard

Version:         ??? (???)

Code Type:       ARM (Native)

Parent Process:  launchd [1]

Date/Time:       2013-01-28 13:05:27.632 +0200

OS Version:      iOS 6.0.1 (10A523)

Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)

Exception Codes: KERN_INVALID_ADDRESS at 0x00000008

Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread

Thread 0 Crashed:

0   libobjc.A.dylib               0x3337f5b0 objc_msgSend + 16

1   BackBoardServices             0x39a29b50 -[BKSAccelerometer _orientationDidChange] + 84

2   Foundation                      0x340b08e8 __NSThreadPerformPerform + 456

3   CoreFoundation                  0x3249b680 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12

4   CoreFoundation                  0x3249aee4 __CFRunLoopDoSources0 + 208

5   CoreFoundation                  0x32499cb2 __CFRunLoopRun + 642

6   CoreFoundation                  0x3240ceb8 CFRunLoopRunSpecific + 352

7   CoreFoundation                  0x3240cd44 CFRunLoopRunInMode + 100

8   GraphicsServices                0x3a20a2e6 GSEventRunModal + 70

9   UIKit                         0x39cc82f4 UIApplicationMain + 1116

10  SpringBoard                   0x0000489a 0x1000 + 14490

11  libdyld.dylib                 0x35f1cb1c start + 0

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager

Thread 1:

0   libsystem_kernel.dylib          0x316a4648 kevent64 + 24

1   libdispatch.dylib             0x34ac54ec _dispatch_mgr_invoke + 792

2   libdispatch.dylib             0x34ab7df4 _dispatch_mgr_thread$VARIANT$up + 32

Thread 2 name:  WebThread

Thread 2:

0   libsystem_kernel.dylib          0x316a3eb4 mach_msg_trap + 20

1   libsystem_kernel.dylib          0x316a4048 mach_msg + 36

2   CoreFoundation                  0x3249b040 __CFRunLoopServiceMachPort + 124

3   CoreFoundation                  0x32499d9e __CFRunLoopRun + 878

4   CoreFoundation                  0x3240ceb8 CFRunLoopRunSpecific + 352

5   CoreFoundation                  0x3240cd44 CFRunLoopRunInMode + 100

6   WebCore                       0x36768a40 RunWebThread(void*) + 440

7   libsystem_c.dylib             0x34aff30e _pthread_start + 306

8   libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 3:

0   libsystem_kernel.dylib          0x316a3eb4 mach_msg_trap + 20

1   libsystem_kernel.dylib          0x316a4048 mach_msg + 36

2   CoreFoundation                  0x3249b040 __CFRunLoopServiceMachPort + 124

3   CoreFoundation                  0x32499d9e __CFRunLoopRun + 878

4   CoreFoundation                  0x3240ceb8 CFRunLoopRunSpecific + 352

5   CoreFoundation                  0x3240cd44 CFRunLoopRunInMode + 100

6   Foundation                      0x3400378a -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250

7   Foundation                      0x340a7058 -[NSRunLoop(NSRunLoop) run] + 76

8   UIKit                         0x39f99f66 -[UIStatusBarServerThread main] + 678

9   Foundation                      0x340b0678 __NSThread__main__ + 968

10  libsystem_c.dylib             0x34aff30e _pthread_start + 306

11  libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 4:

0   libsystem_kernel.dylib          0x316a3eb4 mach_msg_trap + 20

1   libsystem_kernel.dylib          0x316a4048 mach_msg + 36

2   CoreFoundation                  0x3249b040 __CFRunLoopServiceMachPort + 124

3   CoreFoundation                  0x32499d9e __CFRunLoopRun + 878

4   CoreFoundation                  0x3240ceb8 CFRunLoopRunSpecific + 352

5   CoreFoundation                  0x3240cd44 CFRunLoopRunInMode + 100

6   SpringBoard                   0x00065aa0 0x1000 + 412320

7   libsystem_c.dylib             0x34aff30e _pthread_start + 306

8   libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 5 name:  com.apple.coremedia.player.async

Thread 5:

0   libsystem_kernel.dylib          0x316b408c __psynch_cvwait + 24

1   libsystem_c.dylib             0x34af7d2a _pthread_cond_wait + 642

2   libsystem_c.dylib             0x34b01f14 pthread_cond_wait + 36

3   CoreMedia                     0x388139a4 FigSemaphoreWaitRelative + 256

4   MediaToolbox                    0x34fb0356 fpa_AsyncMovieControlThread + 22

5   CoreMedia                     0x38831988 figThreadMain + 192

6   libsystem_c.dylib             0x34aff30e _pthread_start + 306

7   libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 6:

0   libsystem_kernel.dylib          0x316a3eb4 mach_msg_trap + 20

1   libsystem_kernel.dylib          0x316a4048 mach_msg + 36

2   CoreFoundation                  0x3249b040 __CFRunLoopServiceMachPort + 124

3   CoreFoundation                  0x32499d9e __CFRunLoopRun + 878

4   CoreFoundation                  0x3240ceb8 CFRunLoopRunSpecific + 352

5   CoreFoundation                  0x3240cd44 CFRunLoopRunInMode + 100

6   SpringBoard                   0x000664dc 0x1000 + 414940

7   libsystem_c.dylib             0x34aff30e _pthread_start + 306

8   libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 7 name:  com.apple.springboard.icongeneration

Thread 7:

0   libsystem_kernel.dylib          0x316a3eb4 mach_msg_trap + 20

1   libsystem_kernel.dylib          0x316a4048 mach_msg + 36

2   CoreFoundation                  0x3249b040 __CFRunLoopServiceMachPort + 124

3   CoreFoundation                  0x32499d9e __CFRunLoopRun + 878

4   CoreFoundation                  0x3240ceb8 CFRunLoopRunSpecific + 352

5   CoreFoundation                  0x3240cd44 CFRunLoopRunInMode + 100

6   SpringBoard                   0x000665fc 0x1000 + 415228

7   libsystem_c.dylib             0x34aff30e _pthread_start + 306

8   libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 8 name:  com.apple.NSURLConnectionLoader

Thread 8:

0   libsystem_kernel.dylib          0x316a3eb4 mach_msg_trap + 20

1   libsystem_kernel.dylib          0x316a4048 mach_msg + 36

2   CoreFoundation                  0x3249b040 __CFRunLoopServiceMachPort + 124

3   CoreFoundation                  0x32499d9e __CFRunLoopRun + 878

4   CoreFoundation                  0x3240ceb8 CFRunLoopRunSpecific + 352

5   CoreFoundation                  0x3240cd44 CFRunLoopRunInMode + 100

6   Foundation                      0x3402cbc8 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304

7   Foundation                      0x340b0678 __NSThread__main__ + 968

8   libsystem_c.dylib             0x34aff30e _pthread_start + 306

9   libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 9 name:  WiFiManager callback thread

Thread 9:

0   libsystem_kernel.dylib          0x316a3eb4 mach_msg_trap + 20

1   libsystem_kernel.dylib          0x316a4048 mach_msg + 36

2   CoreFoundation                  0x3249b040 __CFRunLoopServiceMachPort + 124

3   CoreFoundation                  0x32499d9e __CFRunLoopRun + 878

4   CoreFoundation                  0x3240ceb8 CFRunLoopRunSpecific + 352

5   CoreFoundation                  0x3240cd44 CFRunLoopRunInMode + 100

6   Foundation                      0x3400378a -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250

7   Foundation                      0x340a7058 -[NSRunLoop(NSRunLoop) run] + 76

8   Foundation                      0x340b0678 __NSThread__main__ + 968

9   libsystem_c.dylib             0x34aff30e _pthread_start + 306

10  libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 10:

0   libsystem_kernel.dylib          0x316a3eb4 mach_msg_trap + 20

1   libsystem_kernel.dylib          0x316a4048 mach_msg + 36

2   CoreFoundation                  0x3249b040 __CFRunLoopServiceMachPort + 124

3   CoreFoundation                  0x32499d9e __CFRunLoopRun + 878

4   CoreFoundation                  0x3240ceb8 CFRunLoopRunSpecific + 352

5   CoreFoundation                  0x3246b9b6 CFRunLoopRun + 94

6   IMDPersistence                  0x335d406e 0x335d3000 + 4206

7   Foundation                      0x340b0678 __NSThread__main__ + 968

8   libsystem_c.dylib             0x34aff30e _pthread_start + 306

9   libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 11 name:  com.apple.coremedia.player.async

Thread 11:

0   libsystem_kernel.dylib          0x316b408c __psynch_cvwait + 24

1   libsystem_c.dylib             0x34af7d2a _pthread_cond_wait + 642

2   libsystem_c.dylib             0x34b01f14 pthread_cond_wait + 36

3   CoreMedia                     0x388139a4 FigSemaphoreWaitRelative + 256

4   MediaToolbox                    0x34fb0356 fpa_AsyncMovieControlThread + 22

5   CoreMedia                     0x38831988 figThreadMain + 192

6   libsystem_c.dylib             0x34aff30e _pthread_start + 306

7   libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 12 name:  com.apple.coremedia.player.remote

Thread 12:

0   libsystem_kernel.dylib          0x316a3eb4 mach_msg_trap + 20

1   libsystem_kernel.dylib          0x316a4048 mach_msg + 36

2   MediaToolbox                    0x34fb65ac FigExpressNotificationThread + 96

3   CoreMedia                     0x38831988 figThreadMain + 192

4   libsystem_c.dylib             0x34aff30e _pthread_start + 306

5   libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 13 name:  com.apple.CFSocket.private

Thread 13:

0   libsystem_kernel.dylib          0x316b4594 __select + 20

1   CoreFoundation                  0x3249f1f2 __CFSocketManager + 674

2   libsystem_c.dylib             0x34aff30e _pthread_start + 306

3   libsystem_c.dylib             0x34aff1d4 thread_start + 4

Thread 14 name:  Dispatch queue: com.apple.bulletinboard.bbserverqueue

Thread 14:

0   libsystem_kernel.dylib          0x316a3ee0 semaphore_signal_trap + 8

1   libdispatch.dylib             0x34ab7528 _dispatch_thread_semaphore_signal$VARIANT$up + 4

2   CoreFoundation                  0x32443040 CFPreferencesAppSynchronize + 308

3   Foundation                      0x34028fea -[NSUserDefaults(NSUserDefaults) synchronize] + 18

4   BulletinBoard                 0x375cb204 -[BBServer observer:handleResponse:] + 348

5   CoreFoundation                  0x324c99c0 __invoking___ + 64

6   CoreFoundation                  0x32420fe6 -[NSInvocation invoke] + 282

7   CoreFoundation                  0x32420b3e -[NSInvocation invokeWithTarget:] + 46

8   XPCObjects                      0x35719ec4 __block_global_0 + 476

9   libdispatch.dylib             0x34ab611c _dispatch_call_block_and_release + 8

10  libdispatch.dylib             0x34ab5996 _dispatch_queue_drain$VARIANT$up + 142

11  libdispatch.dylib             0x34ab5890 _dispatch_queue_invoke$VARIANT$up + 32

12  libdispatch.dylib             0x34ac4212 _dispatch_root_queue_drain + 190

13  libdispatch.dylib             0x34ac43b4 _dispatch_worker_thread2 + 80

14  libsystem_c.dylib             0x34af4a0e _pthread_wqthread + 358

15  libsystem_c.dylib             0x34af48a0 start_wqthread + 4

Thread 15:

0   libsystem_kernel.dylib          0x316b4d98 __workq_kernreturn + 8

1   libsystem_c.dylib             0x34af4cf6 _pthread_workq_return + 14

2   libsystem_c.dylib             0x34af4a12 _pthread_wqthread + 362

3   libsystem_c.dylib             0x34af48a0 start_wqthread + 4

Thread 0 crashed with ARM Thread State (32-bit):

    r0: 0x08870fd0    r1: 0x3915fa6c      r2: 0x087a32a0      r3: 0x00000005

    r4: 0x00000000    r5: 0x3915fa6c      r6: 0x08870fd0      r7: 0x2fdfecc8

    r8: 0x00003f03    r9: 0x0e457e9b     r10: 0x00000000     r11: 0x0036e700

    ip: 0x3be2123c    sp: 0x2fdfecb4      lr: 0x39a29b55      pc: 0x3337f5b0

  cpsr: 0x20080030 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:01:49.477

这是 6.0.1 中的一个错误，幸运的是在 6.1 中修复了！

# windows-7 - rsync 复制本地和远程文件夹

> ID：14561538
> 
> 赞同：5
> 
> 时间：2013-01-28T11:58:34.097
> 
> 标签：windows-7, rsync

我正在尝试将包含文件和文件夹的目录复制到另一个目录，首先在本地进行测试，然后再复制到远程服务器。我必须使用的工具是`rsync`，但经过大量测试和阅读文档后，我无法使其在`Windows 7`.

例如，当我尝试

`rsync -av D:\source\ D:\dest\`

我得到错误`The source and destination cannot both be remote.`

当我尝试`rysnc -av \source\ D:\dest\`时，我得到`Error: Failed to exec ssh: No such file or directory (2)`

你知道我怎样才能让它工作吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T12:45:56.353

Cygwin 路径不同，使它们类似于 Unix。利用

```
rsync -av /cygdrive/d/source/ /cygdrive/d/dest/ 
```

D：被解释为一个名为 D 的远程服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T16:23:34.413

掘墓人回来挖这个——

在我的 Windows 8.1 机器上，一切正常，但在我的 Windows 7 机器上，我遇到了同样的问题。通过编辑 vagrant 的源来修复它 -

对我来说它就在这里 - C:\HashiCorp\Vagrant\embedded\gems\gems\vagrant-1.6.3\plugins\synced_folders\rsync\helper.rb

我添加了 cygdrive 作为前缀，一切顺利 -

```
 if Vagrant::Util::Platform.windows?
      # rsync for Windows expects cygwin style paths, always.
      # Editing source is never fun, but it works : /
      hostpath = "/cygdrive" + Vagrant::Util::Platform.cygwin_path(hostpath)
    end 
```

# django - 在 main.html 中使用 provider_login_url 时出现 django allAuth 'request' 错误

> ID：14561541
> 
> 赞同：1
> 
> 时间：2013-01-28T11:58:43.180
> 
> 标签：django, django-authentication

恐怕这是一个新手问题。

我正在尝试在我的主页上使用社交登录链接，在我的模板中使用以下代码：

```
{% load i18n %}
{% load static %}
{% load socialaccount %}
{% load account %}
{% load url from future %}
{% get_static_prefix as STATIC_PREFIX %}
...
<a href="{% provider_login_url 'facebook' method='js_sdk' %}"><img src='{{ STATIC_PREFIX }}img/facebookText.png' alt="facebook connect"></a>
<a href="{% provider_login_url 'google' method='js_sdk' %}"><img src='{{ STATIC_PREFIX }}img/googleText.png' alt="google connect"></a>
<a href="{% url 'account_login' %}"><img src='{{ STATIC_PREFIX }}img/idText.png' alt="Regular login"></a> 
```

我已确保正确指定了我的站点 ID（如 [此处][1] 所述）。

我已按照本 [tutorial][2] 和本 [guide][3] 中的建议在我的 settings.py 中指定了设置：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'django_tables2_reports',
    'subscription',
    'django_tables2',
    'allauth',
    'allauth.account',
    'allauth.socialaccount',
    'allauth.socialaccount.providers.facebook',
    'allauth.socialaccount.providers.google',
    #'allauth.socialaccount.providers.linkedin',
    #'allauth.socialaccount.providers.openid',
    # 'allauth.socialaccount.providers.twitter',
    'django.contrib.admin',

)

TEMPLATE_CONTEXT_PROCESSORS = (
                               "django.core.context_processors.request",
                               'django.contrib.auth.context_processors.auth',
                               'django.core.context_processors.static',
                               "django.core.context_processors.debug", 
                               "django.core.context_processors.i18n", 
                               "django.core.context_processors.media",
                                "allauth.account.context_processors.account",
                                "allauth.socialaccount.context_processors.socialaccount",

                                )

AUTHENTICATION_BACKENDS = (

    # Needed to login by username in Django admin, regardless of `allauth`
    "django.contrib.auth.backends.ModelBackend",

    # `allauth` specific authentication methods, such as login by e-mail
    "allauth.account.auth_backends.AuthenticationBackend",

) 
```

我还指定了登录后，用户被定向到我的主页：

```
LOGIN_REDIRECT_URL="/" 
```

但是在访问我的主页（上面的模板提供的页面）时出现此错误：模板渲染期间出错

```
In template C:\Users\Andy\Desktop\business\app\static\templates\base.html, error at line 40
request
30          </style>
31  </head>
32  <body class="{% block body_class %}{% endblock %}">
33  <div align="right">
34  {% if user.is_authenticated %}
35  {% user_display user as user_display %}
36  {% blocktrans %}{{ user_display }} logged in{% endblocktrans %}
37  <a href="{% url 'account_logout' %}">Sign Out</a>
38  {% else %}
39  <img src='{{ STATIC_PREFIX }}img/loginText.png' alt="login">
40  <a href="{% provider_login_url 'facebook' method='js_sdk' %}"><img src='{{ STATIC_PREFIX }}img/facebookText.png' alt="facebook connect"></a>
41  <a href="{% provider_login_url 'google' method='js_sdk' %}"><img src='{{ STATIC_PREFIX }}img/googleText.png' alt="google connect"></a>
42  <a href="{% url 'account_login' %}"><img src='{{ STATIC_PREFIX }}img/idText.png' alt="Regular login"></a>
43  {% endif %}
44  </div>
45  
46  
47  
48  
49  {% block body %}
50  {% block content %}{% endblock %} 
```

非常感谢您的帮助:) 我怀疑我的 View 需要向我的 html 提供与此 provider_login_url 相关的其他信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T06:56:46.197

回答我自己的愚蠢问题，

我的主页视图是：

```
def home(request):
    """Main listing."""
    return render_to_response("main/index.html", "") 
```

现在它是：

```
def home(request):
    """Main listing."""
    return render_to_response("main/index.html", context_instance=RequestContext(request)) 
```

# c# - 在 Azure Webrole 运行时在配置文件中添加键值对

> ID：14561548
> 
> 赞同：1
> 
> 时间：2013-01-28T11:59:12.260
> 
> 标签：c#, azure, asp.net-mvc-4, web-config, azure-web-roles

我想`web.config`在运行时使用`c#`.

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:42:09.667

这就是我们最终的做法。

我们在 web.config 中添加了一个具有空白值的 Key，然后在运行时为其添加了一个值。我认为可以修改相同的代码以在运行时添加键和值对。

```
 using (var server = new ServerManager())
            {
                    var siteNameFromServiceModel = "Web";
                    var siteName =
                        string.Format("{0}_{1}", RoleEnvironment.CurrentRoleInstance.Id, siteNameFromServiceModel);

                    string configFilePath = server.Sites[siteName].Applications[0].VirtualDirectories[0].PhysicalPath + "\\Web.config";
                    XElement element = XElement.Load(configFilePath);

                    element.Element("appSettings").Elements("add").Where(X => X.Attribute("key").Value == "YourKeyName").Single().Attribute("value").Value = "YourValue";
                    element.Save(configFilePath);
             } 
```

# php - Magento在构造函数中添加子块到块

> ID：14561549
> 
> 赞同：1
> 
> 时间：2013-01-28T11:59:14.023
> 
> 标签：php, magento, magento-1.7

我有以下 XML：

```
<reference name="content">
    <block type="name/myblockname" name="blockname" alias="blockalias" template="name/myblockname.phtml">
        <action method="setData"><key>name</key><value>value</value></action>
        <block type="core/template" name="otherblock" template="catalog/product/view/otherblock.phtml"/>
    </block>
</reference> 
```

我需要与块构造函数中的代码相同，我试过这个。结果是该块已呈现，但 name/myblockname.phtml 中的 getChild 返回 null 值而不是该块。

```
class MyCompany_ModuleName_Block_MyBlock extends Mage_Core_Block_Template
{

    public function  __construct() {
        parent::__construct();
        // $layout = $this->getLayout();  // this didn't work
        // $layout = Mage::getModel('core/layout'); // this didn't work
        $layout = $this->loadLayout()->getLayout(); // this didn't work
        $block = $layout->createBlock("core/template");
        $block->setTemplate("catalog/product/view/otherblock.phtml");
        $block->setNameInLayout("otherblock");
        $this->append($block, "otherblock");

    }

    // ... other stuff here ...

} 
```

这是我将我的块包含到 CMS 页面的方式：

```
{{block type="name/myblockname" name="value" template="name/myblockname.phtml"}} 
```

我想知道我做错了什么，或者这在 Magento 中是否可能？（不用担心 xml 等命名，我不得不覆盖它们，因为它们包含公司数据，所以在这个例子中它们可能是错误的，但很可能不在原始代码中。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:22:14.403

我强烈建议使用`_construct()`核心调用的“fake” `__construct()`-constructor 以避免误用。然后添加一个新的子块使用这个代码：

```
function _construct() {
    $layout = Mage::getSingleton('core/layout');
    $block  = $layout->createBlock('core/template','mychildblockname');
    $block->setTemplate('your/childtemplate.phtml');
    $this->append($block);
} 
```

然后在块的 phtml 文件中，您通过以下方式调用子级：

```
$this->getChildHtml('mychildblockname'); 
```

# java - 即使在 Android 中屏幕进入睡眠模式后仍会继续振动

> ID：14561551
> 
> 赞同：3
> 
> 时间：2013-01-28T11:59:20.460
> 
> 标签：java, android, android-service

在我的应用程序中，我通过以下代码启动 VIBRATOR_SERVICE

```
long[] pattern = {50,100,1000}
Vibrator vibe=(Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE);
vibe.vibrate(pattern, 0); 
```

我希望振动一直持续到我打电话

```
vibe.cancel(); 
```

该代码工作正常，但屏幕进入睡眠模式时振动消失。

即使屏幕进入睡眠模式，我也希望振动继续。有没有办法做到这一点？请帮我。

提前致谢。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T05:45:26.417

问题的正确答案如下

在此之前，不要忘记将权限“ `android.permission.VIBRATE`”添加到您的应用清单文件中。

```
public BroadcastReceiver vibrateReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        if(intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            vibe.vibrate(pattern, 0);
        }
    }
};

IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_OFF);
registerReceiver(vibrateReceiver, filter); 
```

**唤醒锁**在这里不起作用，因为接收器只有在屏幕熄灭后才会收到意图。虽然我们可以在屏幕进入关闭模式后获得唤醒锁，但振动停止，因为它发生在`ACTION_SCREEN_OFF`. 所以可以通过接收到广播后再次启动振动来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:04:44.233

试试这个可能对你有帮助。首先要做到`broadcast receiver`这一点，当手机灯屏幕关闭时，然后编写振动手机的逻辑。

```
 public BroadcastReceiver wakeLockReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent)
    {
        if(intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            //WRITE LOGIC OF VIBRATION.
        }
    }
};

IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_OFF);
registerReceiver(wakeLockReceiver, filter); 
```

在 AndroidManifest.xml 中添加权限

```
<uses-permission android:name="android.permission.VIBRATE"/> 
```

# ruby-on-rails - 嵌套多态关系 CanCan

> ID：14561555
> 
> 赞同：0
> 
> 时间：2013-01-28T11:59:37.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, cancan, polymorphic-associations

我在响应和帖子、电话和会议之间存在多态关系：

```
 class Response < ActiveRecord::Base
    belongs_to :responseable, polymorphic: true
    ...
 end

class Post < ActiveRecord::Base
   has_many :responses, as: :responseable, dependent: :destroy
   ...
end

class Call < ActiveRecord::Base
   has_many :responses, as: :responseable, dependent: :destroy
   ...
end

class Meeting < ActiveRecord::Base
   has_many :responses, as: :responseable, dependent: :destroy
   ...
end 
```

我正在使用 CanCan 来定义我的能力，使用嵌套资源功能来授权查看取决于其父母能力的响应：

```
class ResponsesController < ApplicationController

  before_filter :authorize_parent
  load_resource :post
  load_resource :call
  load_resource :meeting  
  load_and_authorize_resource :response, :through => [:post, :call, :meeting]

  ...

private

  def authorize_parent
    authorize! :read, (@post || @call || @meeting)
  end

end 
```

使用控制器中的标准动作，所有能力都在正常工作。

**但是**，我的响应控制器中有一个操作，用于每 15 秒通过 JS 脚本轮询一次新响应：

```
def polling
   current_user_id = params[:current_user_id]
   responseable_type = params[:responseable_type]
   klass = [Post, Call, Meeting].detect { |c| responseable_type == c.name }
      @responseable = klass.find(params[:responseable_id])
   undivided_millisecond_epoch_time_in_integer = params[:after]
   undivided_millisecond_epoch_time_in_decimal = (undivided_millisecond_epoch_time_in_integer).to_d
   divided_millisecond_epoch_time_in_decimal = (undivided_millisecond_epoch_time_in_decimal / 1000000).to_d
   @responses = @responseable.responses.where("created_at > ? AND user_id <> ?", Time.at(divided_millisecond_epoch_time_in_decimal), current_user_id)
end 
```

无论我尝试什么，我都无法让它发挥作用。即我只是得到响应“*您无权访问此页面*”。我想我需要添加一些东西才能让这个自定义操作起作用，但我对在哪里和做什么有点迷茫。

非常感谢任何帮助。

**编辑：在我的能力文件中添加了详细信息：**

```
if user.role == "client"
  can :index, Post, :user_expert_private => false
  can :index, Post, :user_expert_private => true, :user_id => user.id
  can :show, Post, :user_expert_private => false, :countries => { :id => user.country_ids}
  can :show, Post, :user_expert_private => true, :user_id => user.id
  can :create, Post
  can :edit, Post, :user_id => user.id
  can :update, Post, :user_id => user.id
  can :read, Response
  can :create, Response
  can :polling, Response
  can :read, Call, :user_id => user.id
  can :create, Call, :user_id => user.id
  can :edit, Call, :user_id => user.id
  can :update, Call, :user_id => user.id
  can :read, Meeting, :user_id => user.id
  can :create, Meeting, :user_id => user.id
  can :edit, Meeting, :user_id => user.id
  can :update, Meeting, :user_id => user.id
  can :responses, :polling          
  can :posts, :autocomplete
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:16:14.070

根据[this](https://github.com/ryanb/cancan/wiki/authorizing-controller-actions)，在您的轮询方法结束时，您应该能够将其放在轮询方法的末尾：

```
authorize! :read, @responses 
```

我相信原因是您仅在父对象的主持下才授权使用 Response 对象。

根据能力编辑：

也许像

```
can :polling, Response, :user_id => user.id 
```

我正在另一个项目中做一些工作，[这个页面可能会有用](https://github.com/ryanb/cancan/wiki/Nested-Resources#nested-through-method)。如果/当它被证明是正确的，我会更新这个答案。

# opengl - 如何在不改变物体比例或偏移的情况下进行透视投影“视差”？

> ID：14561559
> 
> 赞同：2
> 
> 时间：2013-01-28T11:59:51.263
> 
> 标签：opengl, directx, projection, parallax, perspective

问题：我正在制作一个具有视差效果的 2D 游戏，但我使用的是 3D 空间，所以我没有模拟视差，而是让透视投影为我处理它。现在的问题是我有自己的游戏编辑器来设计关卡，在这个编辑器中我只使用图像并为每一层设置一个 Z 值。但是，我希望这些图层在游戏引擎中完全按照我在游戏编辑器中设置的方式显示，简而言之，我希望透视投影做视差，但不改变它们的比例或偏移/位置。

明显的解决方案是将它们按比例放大并抵消它们，但问题是如何计算它们的偏移量？通过缩放，我尝试了 object->Scale(object.Z/view.Z) 并且似乎将它们恢复到实际大小，但它们的位置仍然是错误的。我尝试了 object->setPositionX(object->getPosition().x*(object.Z/view.Z)) 并且似乎是对齐的，除了它们似乎都发生了变化。

我尝试过不投影并尝试从世界矩阵转换为屏幕矩阵并找到一些比率等等。

这怎么能以优雅/数学的方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:32:44.310

透视投影将始终缩放您的几何图形，如果不是，则不是透视。如果将投影设置为更远的正交和滚动几何图形，则可以轻松模拟视差。
我不知道你在制作什么样的游戏，但是为了这个例子，假设它是一个马里奥克隆。当您按下右箭头键时，马里奥向右移动 X 量，并且您的相机以相同的速度移动。您可以让所有不属于直接级别网格的几何体（与 mario 相同的“层”）滚动 X*object.z 量（您可能必须调整该值），以使更靠近的对象滚动更慢并且对象滚动得越远越快。

# azure-sql-database - SQL Azure。变更跟踪

> ID：14561563
> 
> 赞同：4
> 
> 时间：2013-01-28T12:00:12.240
> 
> 标签：azure-sql-database, change-tracking

经过一段时间的谷歌搜索，我发现 SQL Azure 不支持更改数据捕获功能。这让我很沮丧，因为我想在没有重大代码更改的情况下实现更改跟踪，这是实现它所必需的。

SQL Azure 中是否有任何用于更改跟踪的内置功能？

* * *

*如果它真的不能在 SQL Azure 中使用 - 哪些库或产品可以为企业级项目提供此功能？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-19T20:07:32.237

从 v12 开始，SQL Azure 支持更改跟踪（不是更改数据捕获）。这比使用触发器和添加额外的列来跟踪更改要好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T16:21:30.177

我偶然发现了[这个](http://social.technet.microsoft.com/wiki/contents/articles/2976.how-to-enable-sql-azure-change-tracking.aspx)，它描述了将“本地数据缓存”项添加到 VS 项目的解决方法。显然，这只是在您的数据库表中添加了一些日期时间列并用触发器填充它们，在我看来这似乎是一个伪劣的选择。（特别是：我会谨慎将该日期时间设置为事务提交时间还是插入时间，这可能会导致在并发场景中丢失更改，具体取决于您处理更新的方式。）

# python - 用python对分布式内存集群进行“全局数组”并行编程

> ID：14561566
> 
> 赞同：1
> 
> 时间：2013-01-28T12:00:25.640
> 
> 标签：python, cluster-computing, distributed-computing, pytables, numexpr

我正在寻找一个 python 库，它将 numpy 的功能扩展到分布式内存集群上的操作：即“一种并行编程模型，其中程序员将数组视为单个全局数组，而不是位于不同处理器上的多个独立数组。 "

对于 Matlab，麻省理工学院的林肯实验室创建了[pMatlab](http://www.ll.mit.edu/mission/isr/pmatlab/pmatlab.html%20pMatlab)，它允许在集群上进行矩阵代数，而不必过多担心并行编程方面的细节。（以上引用的出处。）

对于基于磁盘的存储，python 存在 pyTables。尽管它没有优化计算在集群中的分布方式，而是优化了计算在磁盘上的大数据如何“分布”。- 这相当相似，但仍然缺少一个关键方面。

目的不是从集群中榨取最后一点性能，而是进行对于单台机器来说太大的科学计算（半交互式）。

python是否存在类似的东西？我的愿望清单是：

*   积极维护
*   代替*numpy*
*   或者类似于*numexpr的用法*
*   并行编程部分的高度抽象：即不需要用户显式使用 MPI
*   支持分布式内存集群中的数据局部性
*   支持集群中的多核机器

这可能有点像相信牙仙，但你永远不知道......

到目前为止我发现：

1.  太平洋西北国家实验室（存在/曾经存在）为 Global Array 提供了一个 python 接口。[请参阅“使用 NumPy 和全局数组工具包在 Python 中进行高性能并行计算”](http://conference.scipy.org/scipy2011/tutorials.php%20ssfd)主题下的链接。（特别是“GA_SciPy2011_Tutorial.pdf”。）但是这似乎又消失了。

2.  [DistNumPy ：在](http://code.google.com/p/distnumpy/%20DistNumPy)[本文](http://distnumpy.googlecode.com/files/kristensen10.pdf)中有更详细的描述。然而，这些项目似乎已被放弃。

如果您知道任何软件包或使用过以上两种中的任何一种，请描述您对它们的体验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:11:52.410

您应该看看[Blaze](http://blaze.pydata.org/)，尽管目前它的开发可能还不足以满足您的需求。从链接页面：

> Blaze 是一组富有表现力的、紧凑的基础抽象，用于对大量半结构化数据、任意格式和分布在任意网络中的计算进行组合。

# jsrender - jsrender - 如何将 javascript 文字对象传递给自定义标签？

> ID：14561567
> 
> 赞同：0
> 
> 时间：2013-01-28T12:00:26.373
> 
> 标签：jsrender

是否可以将 javascript 文字对象传递给 jsrender 中的自定义标签？例如这样的：

```
{{tag parameter={width: 200, 
                 click: function(){
                            alert('clicked');
                      }
                } 
/}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:41:20.963

现在不支持它，假设你没有设置`allowCode=true`. JsRender 模板应该是无副作用的。javascript 文字`{}`正在创建一个新的 Object()，因此没有副作用。但是你可以通过模板参数/帮助器传入任何你想要的对象。有很多方法可以做到这一点，例如在模板上声明助手，声明全局助手，在调用中作为选项传入`.render(data, options)`......然后你只需编写`{{tag parameter=~myPassedInObject}}`. 您还可以有一个返回不同对象的助手，例如`{{tag parameter=~myWidthObject(200,...)}}`，

# javascript - 比较 form.fieldName.value 与 $('#field').val()

> ID：14561571
> 
> 赞同：0
> 
> 时间：2013-01-28T12:00:35.700
> 
> 标签：javascript, html

以我有如下表格为例：

```
<form id="form1" name="form1">
    <input id="firstName" name="firstName" type="text"/>
</form> 
```

以下哪种方式更好更快？

```
var firstName = $('#firstName').val() 
```

或者

```
var form1 = document.forms.form1;
var firstName = form1.firstName.value 
```

在多个字段和单个字段的情况下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:04:19.923

使用 jQuery 总是会比纯 JavaScript 解决方案给出更慢的结果，所以第二种方式无论如何都更快。但是，最快的方法是通过 ID 定位表单元素：

```
var firstName = document.getElementById("firstName").value; 
```

**JSPerf：http:** [//jsperf.com/access-form-element](http://jsperf.com/access-form-element)

# javascript - 在 Javascript 中的 SET 中获取查询参数

> ID：14561575
> 
> 赞同：0
> 
> 时间：2013-01-28T12:00:54.407
> 
> 标签：javascript, jquery, query-parameters

> **可能重复：**
> [如何获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)
> [将 URL 参数转换为 javascript 对象](https://stackoverflow.com/questions/8648892/convert-url-parameters-to-a-javascript-object)

在我的应用程序中，有一个页面我需要（从浏览器）检索页面 url，然后从中提取所有查询参数。

有没有快速的方法来做到这一点？我宁愿不使用 jQuery 插件，因为它不容易理解并使应用程序依赖于插件。

我知道，我问了 2 个问题，但有没有办法将它们存储在 Set 中，以便可以作为键值对列表访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:13:40.440

正如另一篇文章中的第二个答案所引用的那样 - [https://stackoverflow.com/a/2880929/1236019](https://stackoverflow.com/a/2880929/1236019)

```
var urlParams = {};
(function () {
    var match,
        pl     = /\+/g,  // Regex for replacing addition symbol with a space
        search = /([^&=]+)=?([^&]*)/g,
        decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
        query  = window.location.search.substring(1);

    while (match = search.exec(query))
       urlParams[decode(match[1])] = decode(match[2]);
})(); 
```

示例查询字符串：

```
 ?i=main&mode=front&sid=de8d49b78a85a322c4155015fdce22c4&enc=+Hello%20&empty 
```

结果：

```
urlParams = {
    enc: " Hello ",
    i: "main",
    mode: "front",
    sid: "de8d49b78a85a322c4155015fdce22c4",
    empty: ""
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:27:07.973

还有一个非常不错的 jQuery 插件，称为 purl/jQuery-URL-Parser：[https ://github.com/allmarkedup/jQuery-URL-Parser](https://github.com/allmarkedup/jQuery-URL-Parser)

有了它，你可以这样做：

```
var url = "http://localhost:3000?i=main&mode=front&sid=de8d49b78a85a322c4155015fdce22c4&enc=+Hello%20&empty"
jQuery.url(url).param()

// ==>

urlParams = {
  enc: " Hello ",
  i: "main",
  mode: "front",
  sid: "de8d49b78a85a322c4155015fdce22c4",
  empty: ""
} 
```

如果只是调用`$.url()`它将采用当前的 url。

# c# - 在两个模板字段之间填充 datagrid 列

> ID：14561578
> 
> 赞同：0
> 
> 时间：2013-01-28T12:01:00.507
> 
> 标签：c#, asp.net

我有一个数据网格“dgData”`AutoGenereateColumns="true"`

在这我有 2 个模板字段。

现在我想填充这两个模板字段之间的所有数据。

我如何使用 C# 做到这一点

# iphone - iOS 设备和蓝牙

> ID：14561579
> 
> 赞同：4
> 
> 时间：2013-01-28T12:01:02.287
> 
> 标签：iphone, ipad, bluetooth, mfi

有谁知道外部蓝牙设备和 iPhone / iPad（4S 起）之间的最大数据传输速率。

我读到 BT3.0 中的增强数据速率为 24Mbs - iPhone 可以支持吗？

使用 BT4.0 LTE 可能的最大数据是多少？

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:57:26.223

iPhone / iPad 是蓝牙 4.0 数据速率取决于所涉及设备的版本。典型的经典蓝牙数据速率理论上是 2.0 或 3.0 Mbps 的空中比特率。将转化为大约 1.5-2.0 Mbps 的应用程序级吞吐量。您可以在 iPhone / iPad 上获得此费率（取决于您使用的配置文件和远程设备）

您提到的是 BT 3.0 + HS（高速）24 Mbps 等是通过使用 802.11 作为蓝牙堆栈/配置文件的底层 mac 来实现的。iPhone / iPad 不支持高速。

BT 4.0（在 LE 模式下）主要用于需要非常低功耗的传感器设备，因此数据速率不是 LE 的重点（但电池寿命是一年），应用程序的最大数据速率约为 300 Kbps。（当您有大量数据要发送时，您不应该使用 LE - 改用蓝牙经典），LE 已针对小型间歇性数据传输进行了优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T10:18:38.847

恐怕答案有点误导。无线数据速度是一个很好的数字，但不是反映现实生活中净数据速率的衡量标准。

比如经典的BT2.0，2.1网络数据SPP连接速度在128kbps左右（这是BT标准要求的），而不是2-3Mbps。更糟糕的是，即使是这种可怕的低比特率，大多数手持设备也无法承受。昨天我找到了一个品牌的平板电脑，允许 24kbps 的最大速度。iOS 经典的 bt 速度记录在 6kbps 左右。

# jquery - jquery 1.4.4 到 jquery 1.8.0

> ID：14561581
> 
> 赞同：0
> 
> 时间：2013-01-28T12:01:09.290
> 
> 标签：jquery

如何重写它以使用 jquery 1.8.0？整个站点使用 1.8 库，只是这个脚本需要 jquery 1.4.4。请帮忙复习一下。该脚本的原文是[http://perishablepress.com/demos/slide-fade-content/#first-item](http://perishablepress.com/demos/slide-fade-content/#first-item)

```
$(document).ready(function(){
            $('.more').live('click',function(){
                var href = $(this).attr('href');
                if ($('#ajax').is(':visible')) {
                    $('#ajax').css('display','block').animate({height:'1px'}).empty();
                }
                $('#ajax').css('display','block').animate({height:'200px'},function(){
                    $('#ajax').html('<img class="loader" src="loader.gif" alt="">');
                    $('#ajax').load('slide-fade-content.html #'+href,function(){
                        $('#ajax').hide().fadeIn().highlightFade({color:'rgb(253,253,175)'});
                    });
                });
                return true;
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:30:31.497

您可以使用这两个版本的 jQuery。只需给其中一个不同的命名空间并检查[jQuery.no.Conflict()](http://api.jquery.com/jQuery.noConflict/)。我以前做过很多次。

我建议您使用其他滑块或选项卡插件，例如[循环](http://jquery.malsup.com/cycle/)或[easytabs](http://os.alfajango.com/easytabs/#tabs1-html)

# java - CXF Web 服务加上 JAXB 从另一个 jar 生成的类？

> ID：14561582
> 
> 赞同：0
> 
> 时间：2013-01-28T12:01:21.870
> 
> 标签：java, jaxb, cxf, jaxb2

我有一个 java 存档 schema.jar，其中包含使用 xjc 从 XSD 生成的类。我需要使用 web 方法创建一个 CXF web 服务 (jax-ws)，这些 web 方法从 schema.jar 中生成的类集中创建和返回对象。我已经尝试使用代码优先方法使用 CXF，但是，尽管生成的 WSDL 是有效的，但由于从 schema.jar 导入的类型存在命名空间问题，SOAP 响应无效

**编辑：**响应有两个使用不同前缀（ns2 和 ns3）的 XSD 相同命名空间的声明。渲染的返回对象的一部分具有来自 ns2 的元素，而其他元素使用 ns3。由于这种奇怪的行为，使用 XMLSpy 验证响应会将元素列为不合适的元素。

我一直在搜索文档、教程、沼泽或任何可能有帮助但找不到太多有用信息的东西。假设可以做到这一点，在做这样的事情时是否有任何特殊的步骤要遵循？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:50:03.607

我想我已经解决了这个问题，`@WebResult(targetNamespace="...")`方法是在每个接口方法上放置一个注释，以确保返回的对象使用相同的命名空间呈现。

问候， 马特

# python - How to add html attributes using python and BeautifulSoup

> ID：14561583
> 
> 赞同：1
> 
> 时间：2013-01-28T12:01:25.577
> 
> 标签：python, beautifulsoup

```
html_doc="""
<html>
    <head></head>
    <body>
        <ul class="navigation"></ul>
    </body>
</html>
"""
link_doc="""
<p>
<li><a href="http://example.com/elsie" id="link1">Elsie</a></li>
<li><a href="http://example.com/lacie" id="link2">Lacie</a></li>
<li><a href="http://example.com/tillie" id="link3">Tillie</a></li>
</p>
"""
from bs4 import BeautifulSoup
soup = BeautifulSoup(html_doc)
link = BeautifulSoup(link_doc)

navigation = soup.find_all("ul", {"class" : "navigation"})
links = link.find_all('li')

for i in range(0,3): # assume I would like to write to 3 files
    for n in range(len(links)):
        navigation[0].append(links[n])
    output = navigation[0].prettify(formatter=None)
    file = open(str(i) + '.html', 'w')
    file.write(output)
    file.close()
    navigation[0].clear() 
```

I have two simple documents like this. What I'd like to do is add some links between `<ul class="navigation">` and write them to 3 files.

But also I'd like to add class attributes `active` to the `<li>` element depending on file order. For example *0.html* should be like this:

```
<ul class="navigation">
 <li class="active">
  <a href="http://example.com/elsie" id="link1">
   Elsie
  </a>
 </li>
 <li>
  <a href="http://example.com/lacie" id="link2">
   Lacie
  </a>
 </li>
 <li>
  <a href="http://example.com/tillie" id="link3">
   Tillie
  </a>
 </li>
</ul> 
```

*1.html* would be like this etc.

```
<ul class="navigation">
 <li>
  <a href="http://example.com/elsie" id="link1">
   Elsie
  </a>
 </li>
 <li class="active">
  <a href="http://example.com/lacie" id="link2">
   Lacie
  </a>
 </li>
 <li>
  <a href="http://example.com/tillie" id="link3">
   Tillie
  </a>
 </li>
</ul> 
```

How can I do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:46:44.803

**EDIT**: I added a much better way of inserting a link. I hope this helps!

**edit x2**: This should work now:

Adding links in:

```
from bs4 import BeautifulSoup
html = '<ul class="navigation"> foo <i>hi</i> bar</ul>'
soup = BeautifulSoup(html)
original_tag = soup.ul
new_tag = soup.new_tag('a', href='http://www.example.com')
new_tag.insert(0, 'Text!')
original_tag.append(new_tag)
print original_tag
# Prints:
# <ul class="navigation"> foo <i>hi</i> bar<a href="http://www.example.com">Text!</a></ul>
# If you don't want it to go to the last bit of the tag all the time, 
# use original_tag.insert(). Here's a link to the documentation about it:
# http://www.crummy.com/software/BeautifulSoup/bs4/doc/#insert 
```

For adding your class="active", replace your last for loop with this:

```
for i in range(0,3): # assume I would like to write to 3 files
    for n in range(len(links)):
        navigation[0].append(links[n])
    output = navigation[0].prettify(formatter=None)
    soup2 = BeautifulSoup(output)
    mylist = soup2.find_all('li')
    mylist[i]['class'] = 'active'
    filee = open(str(i) + '.html', 'w') # I changed it to filee to avoid confusion with the file function
    filee.write(str(soup2))
    filee.close()
    navigation[0].clear() 
```

# mysql - Resorting users 排名按点排序

> ID：14561590
> 
> 赞同：0
> 
> 时间：2013-01-28T12:01:40.520
> 
> 标签：mysql, sql

我有一个名为“排名”的表格，它基本上保存了按“点”排序的用户排名位置。它的：

> *Id - 整数 - AI（这是位置。1 = 第一个。最高分）
> *IdUser - 整数
> *PointsNow - 整数
> *PointsBefore - 整数
> *PositionBefore - 整数

我想要实现的是有一些方法可以知道用户是否进入了最高级别的位置，或者他现在是否更低。

例如，这些是一些条目：

> 1 | 第2236章 41 | 0 | 0
> 
> 2 | 551 | 40 | 0 | 0
> 
> 3 | 第1557章 34 | 0 | 0

所以我认为我可以做到这一点：

> *删除所有条目
> 
> *将自动增量重置为1
> 
> *将 PointsNow 复制到 PointsBefore 并将 Id 复制到 PositionBefore。

我不确定我是否应该这样做，或者是否有更合乎逻辑的选择。我会很感激一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:41:13.890

试试这个：

```
select @rownum:=@rownum+1 `rank`, u.idUser 
from User u, (SELECT @rownum:=0) r 
order by PointsNow desc; 
```

如果您只想根据排名对用户进行排序：

```
SELECT * FROM User
ORDER BY PointsNow DESC; 
```

样本数据：

```
CREATE TABLE User(
IdUser Integer primary key,
PointsNow Integer,
PointsBefore Integer,
PositionBefore  Integer);

INSERT INTO User(IdUser,PointsNow,PointsBefore,PositionBefore)
VALUES (2236,41,0,0),(551,40,0,0),(1557,34,0,0); 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/76a26/2)

需要注意的是，我省略了 id 列。使用触发器自动执行查询。有关排名计算的更多信息，请参阅。[MySQL 更新语句来存储排名位置](https://stackoverflow.com/questions/3196971/mysql-update-statement-to-store-ranking-positions)。

# actionscript-3 - 播放前预加载嵌入的声音

> ID：14561592
> 
> 赞同：0
> 
> 时间：2013-01-28T12:01:46.513
> 
> 标签：actionscript-3

```
package{
import flash.display.MovieClip;
public class MySoundContainer extends MovieClip {
 var _mySound:MySound = new MySound();  // my custom sound imported in library 

 public function _OnButtonClick(e:MouseEvent) : void {
   _mySound.play();  // first call shows delay in play
 } 
}
} 
```

**第一次**单击按钮时，我看到播放声音有明显的延迟。

是否可以预先为嵌入文件预加载音效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:14:50.333

可能会`play`在应用启动时呼叫并静音（音量 = 0），稍后再返回音量`_OnButtonClick`将对您有所帮助。

但奇怪的是，预加载不需要嵌入声音，它们已经加载了 swf 文件。可能是 mp3 文件开头的缓冲或音量衰减（将音量从 0 增加到 1 1-2 秒）。这种延迟是否仅在第一次单击时发生？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:48:46.977

[在 Flash 中播放短声音的延迟](https://stackoverflow.com/questions/227674/latency-in-playing-short-sounds-in-flash-9-actionscript-3)极大地帮助我理解了声音播放中延迟的各种原因。

我发现（从上面的链接）只有在 Flash 中预览时才会出现问题。它在运行编译的 swf 时完美运行。

如果有人像我一样遇到问题，他们应该尝试执行 File->Publish 并运行 .html 文件。

# c# - 禁用asp.net中按钮的回发

> ID：14561596
> 
> 赞同：0
> 
> 时间：2013-01-28T12:01:53.047
> 
> 标签：c#, asp.net, postback

你好，我有一个学校任务要制作一款名为“The Hang Men”的游戏，我开始制作这款游戏​​，但有一个大问题我无法解决

每次我点击按钮。所有元素都从页面中消失。我知道原因，因为回发。

但是如果我从按钮禁用回发，则不会发生任何事情。

有什么想法我该怎么做？如何在不创建回发的情况下单击按钮并执行某些事件？

这是代码..

```
abc ltr;

Words word = null;

static Label [] lbl = null;

static Button[] btn = null;

protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        SetBord();
        SetWords();
    }

}

private void SetWords()
{
    word = new Words();
    Random ids = new Random();
    string temp_word;
    int id = ids.Next(0, word.GetListSize());
    temp_word = word.GetWords(id);

    lbl = new Label[word.GetWordLenght(id)];

    for (int i = 0; i < word.GetWordLenght(id); i++)
    {
        lbl[i] = new Label();
        lbl[i].ID ="lbl"+i;
        lbl[i].CssClass = "LetterStyle";
        lbl[i].Text = Convert.ToString(word.get_chars(id,i));
        this.Words_Panel.Controls.Add(lbl[i]);
    }

}
private void SetBord()
{
    ltr = new abc();

    btn = new Button[27];
    for (int i = 0; i<27; i++)
    {
      btn[i] = new Button();  
      btn[i].ID = "btn" + i;
      btn[i].Attributes.Add("runat", "server");
      btn[i].Click += new EventHandler(LetterClicked);
      btn[i].Width = new Unit("100px");
      btn[i].Height = new Unit("49px");
      btn[i].Text = "" + ltr.getLetters(i); 
      this.Letters.Controls.Add(btn[i]);
    }

}

protected void LetterClicked(object sender, EventArgs e)
{
    Button letter = (Button)sender;
    letter.Enabled = false;
    lbl[0].Text = letter.Text;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:15:59.053

你在做动态控件创建时遇到的一个现象。由于您在代码中动态创建按钮和标签，因此当您重新加载页面时，这些控件不会“持久化”（记住）（每次重新加载/回发页面时它们都会丢失）。

如果除了动态生成它们之外没有其他方法可以解决问题；那么您将不得不像每个人处理动态控件创建的方式一样进行操作。

这里有一些提示：

*   创建控件时，您需要“记住”您创建的控件（视图状态？会话？）。
*   当页面重新加载/刷新时，在 Page_Load 事件中，您需要重新创建所有这些控件，然后才能处理它们。如果您想随后处理来自这些控件的事件/值，则尤其如此。如果没有重新创建它们，那么您在它们上设置的任何值都不会被 IIS“持久化”（因为 IIS 找不到控件，所以提交的值将被丢弃）。

您需要针对上述内容构建您的设计/程序。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:07:15.677

添加 Page_Init 事件

```
protected void Page_Init(object sender, EventArgs e)
{

        SetBord();
        SetWords();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:07:46.417

好吧，如果没有回发，您将无法使您的游戏正常运行，或者您必须在 javascript 中完成所有操作（但我认为这不是制作这款游戏​​的目的）。

由于您动态创建控件，因此您需要在每次回发时重新创建它们（只需删除 Page_Load 函数中的条件）

此外，您应该将游戏数据从一个回发持久化到另一个

# android - Blob 数据类型和日期函数

> ID：14561597
> 
> 赞同：0
> 
> 时间：2013-01-28T12:02:02.783
> 
> 标签：android, sqlite, android-sqlite

当我浏览 SQLite DB 的文档时，我发现了两件我无法理解的事情：

1.  我看到它有一个[数据类型](http://www.sqlite.org/datatype3.html) `BLOB`。那么请任何人解释这种数据类型的真正用途是什么？

2.  然后我发现它有[日期和时间函数](http://www.sqlite.org/lang_datefunc.html)，但我无法成功使用它。我没有抓住它的主要目的，SQLITE 也没有日期的数据类型，所以这将如何与 SQlite 一起使用？

所以请有人帮助理解这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:35:59.197

1.  BLOB 旨在存储二进制数据。它们的行为很像字符串，但可以存储*任何*数据，例如零字节或不是有效 UTF-8 数据的字节序列。

    您使用 BLOB 来存储图像、音频数据或任何类型的不是有效字符串的数据。

2.  正如[数据类型页面](http://www.sqlite.org/datatype3.html#datetime)所解释的，SQLite 确实没有单独的日期/时间数据类型，而是将日期/时间值存储为字符串或数字。数据/时间函数接受这种格式的任何字符串或数字。

    要将日期存储在 SQLite 数据库中，请使用一些返回日期的 SQLite 函数（例如`date('now')`or `current_timestamp`），或者仅以正确的`yyyy-mm-dd...`格式（或日期或秒数）构造一个字符串。然后可以将这些值与这些日期/时间函数一起使用。

    如果您不想使用 SQLite 的内置日期/时间函数，您也可以使用任何其他格式来存储日期/时间。

# javascript - 调整 DOM 元素大小的最佳实践

> ID：14561604
> 
> 赞同：0
> 
> 时间：2013-01-28T12:02:23.657
> 
> 标签：javascript, jquery, dom

> **可能重复：**
> [window.scroll 函数冻结 firefox](https://stackoverflow.com/questions/12428754/window-scroll-function-freezes-firefox)

我正在处理必须调整大量**DOM**元素大小并想知道如何优化它的项目。

现在我正在使用**jQuery** resize 方法做所有事情，但也许有更有效的方法可以做到这一点。

现在我的问题是，然后我正在调整窗口大小，它开始滞后直到所有计算完成，因为它正在调整内部支架元素的大小以适应它的支架。

也许使用纯**javascript**而不是**jQuery**调整大小方法更好？

将来谢谢。

# android - 通过edittext在android地图中搜索位置

> ID：14561607
> 
> 赞同：4
> 
> 时间：2013-01-28T12:02:33.313
> 
> 标签：android, google-maps, ontouchlistener, itemizedoverlay

我正在开发 android 中的地图服务，我想在我的地图中搜索一个特定的地方，比如“柏林”。为此，我在我的地图中放置了一个 EDITTEXT，每当我输入名称时，我都希望在我的地图中用标记指向那个地方。

这是我的 HelloItemizedOverlay 类：

```
 public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem>
 {
 private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
 private Context mContext;

 public HelloItemizedOverlay(Drawable defaultMarker, Context context)
{
 super(boundCenterBottom(defaultMarker));
 mContext = context;
}

public void addOverlay(OverlayItem overlay)
{
mOverlays.add(overlay);
populate();
}
@Override
protected OverlayItem createItem(int i)
{
return mOverlays.get(i);
}
@Override
public int size()
{
return mOverlays.size();
}
@Override
protected boolean onTap(int index)
{
OverlayItem item = mOverlays.get(index);
AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
dialog.setTitle(item.getTitle());
dialog.setMessage(item.getSnippet());
dialog.show();
return true;
}
 } 
```

这是我的主要课程：

```
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);

 setContentView(R.layout.main);
 mapView = (MapView) findViewById(R.id.mapView);

 mapSearchBox = (EditText)findViewById(R.id.search);
 mapSearchBox.setOnTouchListener(new View.OnTouchListener(){
 public boolean onTouch(View view, MotionEvent motionEvent) {                                                       

 List<Address> addresses = geocoder.getFromLocationName(mapSearchBox.getText().toString(),5);

    if(addresses.size() > 0)
    {
       GeoPoint  p = new GeoPoint( (int) (addresses.get(0).getLatitude() * 1E6), 
                          (int) (addresses.get(0).getLongitude() * 1E6));

           controller.animateTo(p);
           controller.setZoom(12);

           List<Overlay> mapOverlays = mapView.getOverlays();
           Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
           HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);
           OverlayItem overlayitem = new OverlayItem(p,"","");
           itemizedoverlay.addOverlay(overlayitem);
           mapOverlays.add(itemizedoverlay);
           mapView.invalidate();
           mapSearchBox.setText("");
    }
    else
    {
            AlertDialog.Builder adb = new AlertDialog.Builder(GoogleMapActivity.this);
            adb.setTitle("Google Map");
            adb.setMessage("Please Provide the Proper Place");
            adb.setPositiveButton("Close",null);
            adb.show();
    }                
    return false;
    }});

    LocationManager locationManager = (LocationManager) getSystemService(this.LOCATION_SERVICE);
    LocationListener listener = new MylocationListener();
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,0,0,listener);
    } 
```

在这里，我在该行中收到一条错误消息：

```
 Drawable drawable = this.getResources().getDrawable(R.drawable.icon); 
```

说 getresource 方法未定义新视图。触摸监听器；下一行还显示了另一个错误：

```
 HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this); 
```

构造函数 HelloItemizedOverlay 未定义。

有人知道建议吗？？如果是这样，请帮个忙。提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:22:01.270

从**_** _

this.getResources().getDrawable(R.drawable.icon);

看看它对你有没有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:06:43.337

代替

```
 this.getResources().getDrawable(R.drawable.icon); 
```

利用

```
 ClassName.this.getResources().getDrawable(R.drawable.icon); 
```

其中 ClassName 是您的活动名称

也为构造函数做这个而不是

```
 HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this); 
```

利用

```
 HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,ClassName.this); 
```

# javascript - 如何通过将var的值解析为float来将var的值分配给java脚本中的文本

> ID：14561613
> 
> 赞同：0
> 
> 时间：2013-01-28T12:02:47.370
> 
> 标签：javascript, html

我有 var a=99.90090 我想将其修复为仅 99 并将其显示在文本框中，但 var a 的原始值应保持不变。

我想要像我们在 iphone 中做的那样

```
 SevereEIULabel.text=[NSString stringWithFormat:@"%.2f",appDelegate.Same_Vaccination_SevereEI_Unvaccinated]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:04:55.337

a = 99.90090;

```
b = a.toFixed(0); // 100
b = a.toFixed(1); // 99.9 
```

**编辑**

b = parseInt(99.90090); // 99

**编辑 2**

```
<input type="text" id="my_field" name="my_field" value="" />

<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script>
a = 99.90090;
$('#my_field').val(parseInt(a)); 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:09:54.113

为什么那么认真.............

```
 <script type="text/javascript">
function fnc()
{
    var value=99.90090;
    testvalue=parseInt(value);
    document.getElementById("atext").value=testvalue;
}
</script>
<input type="text" value="" id="atext" />
<input type="button" onclick="fnc()" value="click me" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:09:54.503

检查此代码，如果我对您要求实施的内容有误，请告诉我 -

```
var a=99.90090;

document.write(parseInt(a.toString())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:41:02.470

```
var a =99.90090;
temp = parseInt(a);
document.write(temp); 
```

检查我的代码并提醒我是否需要任何更改

# regex - 正则表达式 - 查找字谜和子字谜

> ID：14561614
> 
> 赞同：5
> 
> 时间：2013-01-28T12:02:58.213
> 
> 标签：regex, anagram

我有一个字符池，我想使用正则表达式匹配所有这些字符的字谜或这些字符的子集的单词。

示例：给定字符串“ACNE”，正则表达式应该给我这些结果：

*   痤疮 [T]
*   塞纳 [T]
*   不能]
*   卡恩 [F]
*   佳能 [F]

我已经尝试过这个解决方案`/b[acne]{1,4}/b`，但它接受多个重复的单个字符。我能做些什么来最多一次获取每个字符？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T12:59:05.443

“痤疮”这个词的子变位词是那些

*   仅由字母组成`acne`
*   不包含`a`超过一次
*   不包含`c`超过一次
*   不包含`n`超过一次
*   不包含`e`超过一次

将其编译为正则表达式：

```
^(?!.*a.*a)(?!.*c.*c)(?!.*n.*n)(?!.*e.*e)[acne]*$ 
```

测试：[正则表达式](http://regexpal.com/?flags=gm&regex=%5E(%3F!.*a.*a)(%3F!.*c.*c)(%3F!.*n.*n)(%3F!.*e.*e)%5Bacne%5D*%24&input=acne%0Aean%0Adean%0Anne%0Acan%0A)

或者，由于“acne”不包含不止一次的任何字母，“acne”这个词的子变位词是

*   仅由字母组成`acne`
*   不包含任何字母超过一次。

将其编译为正则表达式：

```
^(?!.*(.).*\1)[acne]*$ 
```

测试：[正则表达式](http://regexpal.com/?flags=gm&regex=%5E(%3F!.*(.).*%5C1)%5Bacne%5D*%24&input=acne%0Aean%0Adean%0Anne%0Acan%0A)

注意：单词“magmoid”的子字谜可以匹配为

```
^(?!.*([agoid]).*\1)(?!(.*m){3})[magoid]*$ 
```

（不包含任何`agoid`超过一次，也不包含`m`超过两次）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-23T07:50:24.480

**使用正则表达式在给定字符串中查找单词的字谜数量的代码**

***Fork 下面的存储库，用于 Java、DataStructure、算法和公司面试问题实践。请随时为存储库做出贡献***

[https://github.com/arpans2112/techsqually-java8-best-practices/blob/master/src/com/techsqually/java/library/util/regularexpression/anagramStrings.java](https://github.com/arpans2112/techsqually-java8-best-practices/blob/master/src/com/techsqually/java/library/util/regularexpression/anagramStrings.java)

```
package com.techsqually.java.library.util.regularexpression;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class anagramStrings {

    public static void main(String[] args) {

       int count = findAnagramsInAGivenStrings("arpan","Hi arpan Aarpn we are testing rapan rranp anagram");
        System.out.println(count);
    }

    /**
     * <p> Use to find the number of anagrams of a word in a Given String</p>
     * @param : word : is the word for which you want to find the anagrams
     * @param : givenString : is the string in which you want to find the anagrams of word given
     * @return : total number of anagrams of the word passed
     *  
     *  all words in which each character count is same but their order can be different 
     *  e.g arpan and rapan are anagrams 
     *  
     * @output of above given example is 3, "arpan" , "Aarpn" and rapan are anagrams of arpan
     * */
    public static int findAnagramsInAGivenStrings(String word, String givenString){

        word = word.toLowerCase();
        givenString = givenString.toLowerCase();
        HashMap<String,Integer> numberOfAnnagrams = new HashMap<>();
       Matcher matcher = Pattern.compile("[" + word + "]{" + word.length() + "}").matcher(givenString);

       int count = 0;
        while (matcher.find()){

                 char[] matchWordArray = matcher.group().toCharArray();
                 char[] givenWordArray = word.toCharArray();
            Arrays.sort(matchWordArray);
            Arrays.sort(givenWordArray);

            if (Arrays.equals(matchWordArray,givenWordArray)) count++;
        }

        return count;
    }
} 
```

# ruby-on-rails-3 - 防止在 db:seed 在heroku 上发送电子邮件

> ID：14561616
> 
> 赞同：0
> 
> 时间：2013-01-28T12:03:01.050
> 
> 标签：ruby-on-rails-3, heroku

我有一个模型**观察者**，所以每次创建一个新模型时，它都会自动发送一封通知**电子邮件**。事实是，每次我在 heroku 上**部署**并重置数据库时，它都会在创建这些模型时发送一堆电子邮件......

有没有办法防止在“db:seed”期间从观察者发送电子邮件？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:34:33.240

根据您的 Rails 版本，[此问题](https://stackoverflow.com/questions/707615/simple-way-of-turning-off-observers-during-rake-task)有几种不同的方法。

# postgresql - Postgresql ColdFusion CFQuery 块

> ID：14561620
> 
> 赞同：6
> 
> 时间：2013-01-28T12:03:04.013
> 
> 标签：postgresql, coldfusion, coldfusion-9, postgresql-9.1

我是 ColdFusion 的新手，我在 CFQuery 中编写了一段 Postgres 代码：

```
<cffunction name="insertToReport" access="private" returntype="struct" output="false" >

  <cfset var xyz = structNew() >
  <cfset xyz.code = "">
      <cfquery name="querysampleresult" datasource="abc">
            DO            
            $BODY$
                DECLARE resultValue int;
            BEGIN
               resultValue = 1;
               SELECT resultValue INTO resultValue ;    
            END;
            $BODY$
      </cfquery>

            <cfset xyz.code = querysampleresult.resultValue  >

           <cfreturn xyz >
</cffunction> 
```

我的问题是我无法访问`resultValue`CFQuery 标记之外的变量，即它抛出异常：

```
Element RESULTVALUE is undefined in querysampleresult 
```

这发生在函数末尾的 CFSet 语句中：

```
<cfset xyz.code = querysampleresult.resultValue  > 
```

我不知道如何`resultValue`在结构中设置变量，我一定会从这里返回一个结构到调用环境。请帮助我，提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:50:42.017

将另一个 select 语句添加到选择结果值的查询中。现在您正在选择 INTO 一个不返回查询的表。

```
<cffunction name="insertToReport" access="private" returntype="struct" output="false" >
<cfargument name="rptDataObj" required="yes" type="com.certain.register123.data.reportData" hint="The affected report.">
<cfargument name="maxColumns" type="numeric" required="false" default="10" hint="The maximum number of active columns that should be saved to the report. " ><!--- As of REG-559 20060215, the default was 10 --->
<cfargument name="dsn" type="string" required="false" default="#application.portals.data[request.applicationName].dsn#" >
<cfset var uiCustomColumn = queryNew("") >
<cfset var strSaveError = structNew() >
<cfset strSaveError.code = 0 >
<cfset strSaveError.message = "">
<cfset strSaveError.udcId = "">

<cfquery name="uiCustomColumn" datasource="#arguments.dsn#">
DO            
$BODY$
    DECLARE resultValue int;
    DECLARE nextId bigint;
    DECLARE maxColumns bigint;
    DECLARE udcReportId bigint; /*Have to use this value more than once, so declare it to reduce number of parameters*/
    DECLARE udcOrder int;  /*Have to use this value more than once, so declare it to reduce number of parameters*/

BEGIN
    udcReportId = #arguments.rptDataObj.getId()# ;
    maxColumns = #arguments.maxColumns# ;

    IF (( select count( udc_id ) from user_defined_column WHERE udc_frn_rpt_id = udcReportId AND udc_is_active = true ) >= maxColumns) THEN
        BEGIN
            resultValue = 1; /*There isn't an available slot for this column */
        END;
        ELSE
        BEGIN

            nextId = (SELECT coalesce( MAX(udc_id), 0 ) FROM user_defined_column ) + 1 ;
            udcOrder = (SELECT coalesce( MAX(udc_order), 0 ) FROM user_defined_column WHERE udc_frn_rpt_id = udcReportId AND udc_is_active = true ) + 1 ;

            INSERT INTO user_defined_column(
                udc_id
                ,udc_frn_rpt_id
                ,udc_label
                ,udc_data
                ,udc_type
                ,udc_order
                ,udc_is_active
                ,udc_date_created
                ,udc_date_modified
            )
            VALUES(
                nextId
                ,udcReportId
                ,'hi'
                ,'hi'
                ,12
                ,udcOrder
                ,true
                ,now()
                ,now()
            );

            resultValue = 0;
        END ;
    END IF;
    SELECT resultValue, nextId INTO resultValue  /*Set a success result */
          , nextId;

    SELECT resultValue;

END;
$BODY$
</cfquery>

<cfset strSaveError.code = uiCustomColumn.resultValue  >
<cfset strSaveError.udcId = uiCustomColumn.nextId  >

<cfreturn strSaveError > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:45:25.330

匿名代码块 ( `DO`) 总是返回`void`。您需要使用一个函数来返回任何其他内容：

```
create function f()
returns integer as $body$
declare 
    resultValue integer;
begin
    resultValue := 1;
    return resultValue;
end;
$body$
language plpgsql 
```

创建函数后，您可以在查询中使用它：

```
select f() as resultValue; 
```

# objective-c - 可可创建的 PDF 以 CMYK 而非 RGB 显示（使用 Acrobat）

> ID：14561627
> 
> 赞同：1
> 
> 时间：2013-01-28T12:03:59.910
> 
> 标签：objective-c, pdf-generation

早上好，

我正在为相册应用程序开发 PDF 生成器，但在 Acrobat 中预览时遇到了颜色管理问题。（我认为自己是可可的初学者，但我对色彩管理非常熟悉）。我遵循的过程是：

*   为双页（表格）创建一个 NSView 并绘制内容
*   将此视图添加到屏幕外窗口
*   使用 dataWithPDFInsideRect 获取视图的 PDF 数据
*   创建一个 NSPDFImageRep 并将其添加到一个空的 NSImage
*   使用图像创建 PDFPage，设置框大小并将其插入 PDFDocument

所有图像和图形元素均以 RGB 指定。（图像具有 sRGB 嵌入式配置文件）。

Pdf 在 Apple preview.app 中看起来不错，在 Photoshop 中正确光栅化。但是当用 Acrobat 打开时，我通过 CMYK 模拟看到它（显然）。当我要求使用 sRGB（或其他 RGB 配置文件）进行配置文件模拟时，我可以获得正确的颜色方面。

我曾多次尝试操作 PDF 元数据，但均未成功，我尝试使用 CGPDFContext 制作一个非常简单的案例（1 页 - 1 张图片），尝试设置 OutputIntents ......我有点迷茫，似乎没有任何改变情况。

注意：使用 InDesign 创建的 PDF（以 RGB 格式）在 Acrobat 中以 RGB 格式显示，无需任何特殊设置。我希望我的 PDF 做同样的事情......

有人遇到同样的问题吗？非常感谢任何精确或帮助！

您可以下载按照此处说明生成的（重...）PDF：http: [//bunex-industries.com/filesToDownload/couverture.zip](http://bunex-industries.com/filesToDownload/couverture.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:44:44.530

我假设您的 PDF 文件包含一些透明度（可能是软掩码），在这种情况下，Adobe Acrobat 切换到 CMYK（没有人知道为什么，只有 Acrobat 这样做，其他查看器按预期工作）。
但是，只有您可以提供示例 PDF 文件，才能给出准确的答案。

更新：第一页包含将填充 alpha 设置为 0 的扩展图形状态，这会导致 Acrobat 切换到 CMYK。一种解决方案是向文档添​​加具有 RGB ICC 颜色空间的输出意图。

# sql - 有人可以建议从员工表中选择第二高薪水的创新查询吗？

> ID：14561628
> 
> 赞同：0
> 
> 时间：2013-01-28T09:03:45.750
> 
> 标签：sql, oracle

有人可以建议从包含三个“NOT NULL”字段、sal(salary)、name、empno(employee number) 的表“EMP”中选择第二高薪水的创新查询吗？

我有一个：

```
Select sal 
from EMP A 
where 1 = (select count(DISTINCT SAL) from EMP B whre A.sal < B.sal);

select DISTINCT sal 
from emp a 
where 1 = (select count(DISTINCT sal) from emp b where a.sal < b.sal); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:27:18.253

```
select empno, 
       name,
       salary
from (
   select empno, 
          name,
          salary, 
          dense_rank() over (order by salary desc) as rnk
   from employee
) t
where rnk = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-08T04:17:33.953

`select top (1) sal from Emp where sal<(select max(sal) from emp) order by sal desc`

在上面的查询中，首先我们按降序对所有薪水进行排序，以便在顶部获得最高薪水，然后我们选择低于该列中最高薪水的最高薪水。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T11:41:02.683

查询以查找第二高的薪水。

```
SELECT * FROM EMP WHERE SAL IN(SELECT MAX(SAL) FROM EMP WHERE SAL NOT IN (SELECT MAX(SAL) FROM EMP)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-08T03:35:26.113

```
SELECT * FROM EMP A
WHERE 2= (SELECT COUNT(*) FROM EMP B WHERE B.SAL >=A.SAL) 
```

如果 2 名员工的薪水第二高，则不要使用 2，而是在 where 子句之后使用 3。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T09:22:17.443

SOF 已经回答了这个问题，您必须决定它们是否足够创新以满足您的需求。

[查找第二大值的最简单的 SQL 查询是什么？](https://stackoverflow.com/questions/32100/what-is-the-simplest-sql-query-to-find-the-second-largest-value)

[如何从表中获取第二大或第三大条目](https://stackoverflow.com/questions/4483222/how-to-get-second-largest-or-third-largest-entry-from-a-table)

```
SELECT emp_salary,R 
  FROM (SELECT ROWNUM R,emp_salary 
          FROM (SELECT emp_salary 
                  FROM Employee 
                 ORDER BY emp_salary DESC
               )
        ) 
 WHERE R=2 
```

这应该可以按您的意愿工作。您可以替换 R 的值以查找任何值。R=2 给出第二高，R=3 给出第三高。

你可以在这里试试小提琴[http://sqlfiddle.com/#!4/a6f42/14](http://sqlfiddle.com/#!4/a6f42/14)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-22T13:58:18.617

这是最有利的面试问题。您可以通过不同的方式解决这个问题 - 查询 1：

```
select MAX(Sal) from Employee WHERE Sal NOT IN (select MAX(Sal) from Employee ); 
```

查询 2：

```
WITH CTE AS (
SELECT  Ename, sal, 
ROW_NUMBER() OVER(ORDER BY sal DESC) as RN
FROM Employee
)
SELECT Ename, sal
FROM CTE
WHERE RN = 2 
```

查询 3：如果你想得到第 N 高的薪水，你只需要提到 N(1/2/3/4/..N) 代替 2。

```
select A.Ename, A.sal from Employee A
where 2 = (select count(*) from Employee B where B.EmpNo >= A.EmpNo) 
```

您可以在 [此处] 找到更多答案。 [https://knowledgebase.techandmate.com/answers/55](https://knowledgebase.techandmate.com/answers/55)

谢谢，

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-25T10:30:55.413

```
SELECT MAX(esalary)
FROM emp 
WHERE esalary < 
(SELECT MAX(esalary)
FROM emp); 

SELECT MAX(esalary) 
FROM emp 
WHERE esalary NOT IN 
(SELECT MAX(esalary)
FROM emp); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-04-19T12:56:58.820

```
;WITH cte
AS (
    SELECT *,
        ROW_NUMBER() OVER (
            ORDER BY [salary] DESC
            ) AS rowid
    FROM [Employee].[DimEmployeeDetails]
    )
SELECT *
FROM cte
WHERE rowid = 2 
```

# jquery - 幻灯片放映问题

> ID：14561633
> 
> 赞同：1
> 
> 时间：2013-01-28T12:04:09.397
> 
> 标签：jquery, wordpress, slideshow

我正在使用 novus wordpress 主题。我无法将幻灯片放映添加到我的网站。它有两个滑块。它们是相机滑块和 onebyone 滑块。我使用主题选项上传了图像，但它们没有显示在我的主页中。onebyone 滑块的图像正在显示但没有动画。相机滑块完全不起作用。请帮我。这是我的主页滑块代码，

```
 <?php
global $slider_type, $ns_options_frnt;?>
        <?php if (sizeof($ns_options_frnt['css_addSlide_field'])>0){?>
        <?php

            //nivo, jfancytile, c1, c3, no_slider
            if(true)
            {
        ?>

        <script type="text/javascript">
        <?php if($ns_options_frnt['ns_select_slider'] == 'default'){ ?>
            jQuery(function(jQuery){
                if (jQuery('div').is('#header-slider')){
                    jQuery('#header-slider').camera({
                        height: 'auto',
                        navigation: false,
                        navigationHover: false,
                    loader: 'none',
                    pagination: false,
                    thumbnails: true,
                    mobileAutoAdvance: true,
                    autoAdvance: <?php echo $ns_options_frnt['front_Auto'] == 'enable' ? 'true' :'false'?>,
                    time: <?php echo ($ns_options_frnt['front_AutoSpeed'] ? $ns_options_frnt['front_AutoSpeed'] :7000)?>,
                    fx: "<?php echo $ns_options_frnt['front_fx'] ? $ns_options_frnt['front_fx'] :'simpleFade, curtainSliceLeft, curtainSliceRight, scrollBottom, scrollTop'?>",
                        Cols:  "<?php echo $ns_options_frnt['front_Cols'] ? $ns_options_frnt['front_Cols'] :4?>",
                        Rows:  "<?php echo $ns_options_frnt['front_Rows'] ? $ns_options_frnt['front_Rows'] :1?>",
                        slicedCols:  "<?php echo $ns_options_frnt['front_slicedCols'] ? $ns_options_frnt['front_slicedCols'] :4?>",
                        slicedRows: "<?php echo $ns_options_frnt['front_slicedRows'] ? $ns_options_frnt['front_slicedRows'] :1?>",
                        transPeriod: <?php echo $ns_options_frnt['front_box_speed'] ? $ns_options_frnt['front_box_speed'] :2500?>                       

/*

                        */
                    });
                }
            });
        <?php }elseif($ns_options_frnt['ns_select_slider'] == 'onebyone'){ ?>
            jQuery(document).ready(function() { 

   jQuery('#banner').oneByOne({
        className: 'oneByOne1',              
        /* Please provide the width and height in the responsive 
        version, for the slider will keep the ratio when resize 
        depends on these size. */
        width: 1000,
        height: 420,
        easeType: 'random',
        slideShow: true,
        responsive: true,
        minWidth: 480,
                    delay: <?php echo $ns_options_frnt['frontOneByOne_AutoSpeed'] ? $ns_options_frnt['frontOneByOne_AutoSpeed'] :'300'?>,
        tolerance: <?php echo $ns_options_frnt['frontOneByOne_Tolerance'] ? $ns_options_frnt['frontOneByOne_Tolerance'] :'0.25'?>,                          
        slideShowDelay: <?php echo $ns_options_frnt['frontOneByOne_box_speed'] ? $ns_options_frnt['frontOneByOne_box_speed'] :'2000'?>
    }); 
```

/*

# php - 输入降压

> ID：14561638
> 
> 赞同：0
> 
> 时间：2013-01-28T12:04:27.660
> 
> 标签：php, css

我的注册表有一个降级问题，我已经尝试了我在谷歌上可以找到的所有内容，但没有任何效果。

我的 DOB 部分分为 3 个不同的输入框，我试图将右侧列放在左侧旁边，但是一旦我对其进行任何样式设置，年份部分就会下降。

我尝试了很多不同的变化；浮动，显示，没有任何效果。此外，我还添加了额外的框，并且总是在前 2 个框之后发生降级。

**当我尝试设计风格时，请注意年份下降：**

![在此处输入图像描述](../Images/2646ad1f28dececc378c4e0cfc98fc83.png)

**无论顺序如何，总是在 2 之后下台：**

![在此处输入图像描述](../Images/a945ccdb41c2104218063320d58a2777.png)

**HTML 代码：**

```
<div id="regforms">
    <form method="post" action="register.php" name="registerform" id="registerform">
        <fieldset2>
            <div id="regforms1">
                <label for="username"></label><input type="text" name="username" id="username" placeholder="Username"/><br />
                <label for="password"></label><input type="password" name="password" id="password" placeholder="Password"/><br />
                <label for="email"></label><input type="text" name="email" id="email" placeholder="Email"/><br />
                <input type="submit" name="register" id="login" value="Register" />
            </div>
            <div id="regforms2">
                <label for="name"></label><input type="text" name="name" id="name" placeholder="Name"/><br />
                <div id="dob">
                    <label for="dobm"><input type="text" name="month" id="month" placeholder="MM"/><br />
                    <label for="dobd"><input type="text" name="day" id="day" placeholder="DD"/><br />
                    <label for="dobd"><input type="text" name="day" id="day" placeholder="DD"/><br />
                    <label for="dobd"><input type="text" name="day" id="day" placeholder="DD"/><br />
                    <label for="doby"><input type="text" name="year" id="year" placeholder="YYYY"/><br />
                </div>
            </div>
        </fieldset3>
    </form>
 </div> 
```

**CSS：**

```
#regforms {
margin-top:200px;
border: 0; 
display:block;
width:600px;
}

#regforms1 {
padding-right:25px;
width:275px;
float:left;
}

#regforms2 {
width:275px;
float:right;
}

#dob {
}

#month{
width:5%;
margin-right:5px;
}

#day{
width:10%;
margin-right:5px;
}

#year{
width:10%;
margin-right:5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:45:35.510

正如 Aligarian 所说，您只需要删除`<br/>`标签，尽管**您似乎没有关闭 DOB 字段中的`<label>`标签**；你应该关闭它们。

# ruby - 与 Ruby 混淆以保存带有任何扩展名的文件到 excel 列

> ID：14561640
> 
> 赞同：0
> 
> 时间：2013-01-28T12:04:36.700
> 
> 标签：ruby, win32ole

我正在创建一个脚本来将文件夹中的文件插入到 . `Excel columns`，但似乎我做错了。任何人都可以帮助我吗？

***更新的 Ruby 代码：***

```
require 'fileutils'
require 'win32ole'

#Excel Application will be started from here.
#--------------------------------------------

    excel = WIN32OLE.new('Excel.Application')
    excel.visible = true
    wb=excel.workbooks.open("E:\\WIPData\\Ruby\\Scripts\\Copy of GSL_File_DownLoad1.xlsx")
    wbs= wb.Worksheets(1)
    rows=2
    column=2

        until wbs.cells(rows,1).value == nil do

            Dir.entries("E:\\WIPData\\Ruby").each do |f|

                if f == wbs.cells(rows,1).value then

                  files_dir = File.expand_path("..", Dir.pwd)
                  column=2
                  Dir.foreach(files_dir.concat("/" + f)) do |x| 

                    full_path=files_dir.concat("/" + x)
                    wbs.cells(rows,column).Select
                    wbs.oleobjects.add({ 
                                            'Filename'      => full_path,
                                            'Link'          => true,
                                            'DisplayAsIcon' => false,
                                      })
                    column = column + 1

                  end

                    break
                end 

            end

        end

    wb.Save
    wb.Close(0)
    excel.Quit()

#Excel Application will be finished here.
#------------ 
```

* * *

**错误：**

```
E:/WIPData/Ruby/Scripts/test.rb:27:in `method_missing': (in OLE method `add': )
(WIN32OLERuntimeError)
    OLE error code:800A03EC in Microsoft Excel
      Cannot insert object.
    HRESULT error code:0x80020009
      Exception occurred.
        from E:/WIPData/Ruby/Scripts/test.rb:27:in `block (2 levels) in <main>'
        from E:/WIPData/Ruby/Scripts/test.rb:23:in `foreach'
        from E:/WIPData/Ruby/Scripts/test.rb:23:in `block in <main>'
        from E:/WIPData/Ruby/Scripts/test.rb:17:in `each'
        from E:/WIPData/Ruby/Scripts/test.rb:17:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:51:57.553

您的问题在代码的第 25 行。这`wbs.OLEObjects.Add(,full_path,False,True,,,f)`是导致问题的方法。

在 VBA 中，如果不需要，可以将方法的参数留空。但是，这在 Ruby 中不可用。

在您的原始宏中，您将关键字参数传递给该方法。在 Ruby 中执行此操作的一种方法是使用`Hash`. [Ruby on Windows](http://rubyonwindows.blogspot.com/2009/08/ruby-excel-inserting-pictures-into.html)博客上的一篇文章建议这样做：

```
wbs.oleobjects.add({
    'Filename'      => full_path,
    'Link'          => false,
    'DisplayAsIcon' => true,
    'IconIndex'     => 0,
    'IconLabel'     => f,
    'IconFileName'  => icon_path
}) 
```

我没有看到您在 Ruby 代码中提供图标路径，因此我对最终变量进行了假设。

另请注意，`true`and`false`是小写的。Ruby 会将大写版本作为常量或类读取。

如果您正在使用 Ruby 在 Microsoft Office 中工作，我强烈建议您经常[在 Windows 上使用 Ruby。](http://rubyonwindows.blogspot.com/)作者似乎不再发帖，但它仍然是相关来源。

**编辑：**

您的新错误可能是由于`Dir.entries`. 此方法将抓取`.`和`..`何时拉取条目。我想 Excel 会尝试将这两个添加到工作表中。

有两种方法可以删除它。`each`1）在你的街区跳过它们。

```
Dir.entries("E:\\WIPData\\Ruby").each do |f|
    next if ['.', '..'].include? f
    # The rest of your block code
end 
```

2）使用[`Dir#glob`](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-glob)不会返回`.`和`..`

```
Dir.chdir("E:\\WIPData\\Ruby")
Dir.glob('*').each do |f|
    # Your block code
end 
```

**编辑：**

出于文档的考虑，该主题也在[Ruby 论坛](http://www.ruby-forum.com/topic/4410179)上进行了讨论。

# ios - MKMapView - 将 long / lat 转换为查看 x / y

> ID：14561651
> 
> 赞同：1
> 
> 时间：2013-01-28T12:04:55.797
> 
> 标签：ios, xcode, mkmapview, latitude-longitude

我正在尝试将地图视图中的特定点映射到我的视图。我正在使用以下代码，但它返回了一些非常高且错误的数字。

```
CGPoint annPoint = [self.mapView convertCoordinate:coord toPointToView:self.view]; 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:22:21.503

我发现了错误。在我可以调用转换方法之前，应该加载地图视图（完全？）。

# php - 设置变量的 Jquery Ajax 调用不会在调用之外持续存在

> ID：14561653
> 
> 赞同：0
> 
> 时间：2013-01-28T12:04:59.493
> 
> 标签：php, jquery, json

不完全确定为什么会出错。jQuery新手。根据我见过的所有示例，它应该可以工作，但事实并非如此。

在以下脚本中，函数为变量设置新值，但新值不会保留在函数之外。（控制台日志显示了这一点）

```
$(document).ready(function() {

    // url
    var path = location.pathname.split("/"),
        pos1_path = path[1] != undefined ? path[1] : false,
        pos2_path = path[2] != undefined ? path[2] : false,
        pos3_path = path[3] != undefined ? path[3] :  false;

    //console.log('before: ' + pos2_path);
    if (pos1_path = 'article') {
        $.post("/js/ajax/article_crumbs.php", { func: "getArticleCrumbs" },
            function(data){
                pos2_path = data.category;
                //console.log('during: ' + pos2_path);
            return pos2_path}, "json");
    }
    //console.log('after: ' + pos2_path);

    // navigation
    // set category nav to current category
    if ( path[2] ) {
        $('#category_nav a[class$="' + pos2_path + '"]').toggleClass('current');
    }
    else {
        $('#category_nav a:first').toggleClass('current');
    }
}); 
```

PHP：

```
<?php echo json_encode(["category"=>"arts-and-culture"]); 
```

另外，根据控制台打印输出，“之后”打印输出出现在“期间”之前，这是否意味着该函数直到脚本的其余部分结束时才会运行？

**编辑：**为了澄清，我需要将脚本的**{ if(path[1]) *setcurrent* }部分保留在****{ if(pos1_path = 'article') }**部分之外，以便如果 pos1_path 不是文章，它会设置值到 URI 中的任何内容..

**解决方案**根据以下答案：

```
$(document).ready(function() {

    // url
    var path = location.pathname.split("/"),
        pos1_path = path[1] != undefined ? path[1] : false,
        pos2_path = path[2] != undefined ? path[2] : false,
        pos3_path = path[3] != undefined ? path[3] :  false;

    if (pos1_path = 'article') {
        //console.log('before: ' + pos2_path);
        var data = {id: pos2_path}
        $.ajax({
            type: 'POST',
            url: "/js/ajax/article_crumbs.php",
            data: data,
            success: function(data){
                pos2_path = data.category;
                //console.log('during: ' + pos2_path);},
            dataType: "json",
            async: false
        });
    }
    //console.log('after: ' + pos2_path);

    // navigation
    // set category nav to current category
    if ( path[2] ) {
        $('#category_nav a[class$="' + pos2_path + '"]').toggleClass('current');
    }
    else {
        $('#category_nav a:first').toggleClass('current');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:10:38.633

$.post 请求是异步调用，所以很明显它会移动到其余的代码行，而不是等待 $.post 的回调

尝试使用`$.ajax`并使其`async=false`使用相同的代码

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType,
  async:false
}); 
```

或者

将您的代码移动到成功回调中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:08:12.317

试试这个 ：

```
$(document).ready(function() {

    // url
    var path = location.pathname.split("/"),
        pos1_path = path[1] != undefined ? path[1] : false,
        pos2_path = path[2] != undefined ? path[2] : false,
        pos3_path = path[3] != undefined ? path[3] :  false;

    if (pos1_path = 'article') {
        var data = {id: pos2_path}
        $.post("/js/ajax/article_crumbs.php", { func: "getArticleCrumbs" },
            function(data){
                pos2_path = data.category;
                // navigation
                // set category nav to current category
                if ( path[1] ) {
                    $('#category_nav a[class$="' + pos2_path + '"]').toggleClass('current');
                }
                else {
                    $('#category_nav a:first').toggleClass('current');
                }
            }, "json");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:10:53.123

这是一个异步调用...所以当控制到达`if ( path[2] ) {`语句时，您无法确定服务器是否响应...

您可以`success callback`在`$.post`

```
$(document).ready(function() {

    // url
    var path = location.pathname.split("/"),
        pos1_path = path[1] != undefined ? path[1] : false,
        pos2_path = path[2] != undefined ? path[2] : false,
        pos3_path = path[3] != undefined ? path[3] :  false;

    //console.log('before: ' + pos2_path);
    if (pos1_path = 'article') {
        $.post("/js/ajax/article_crumbs.php", { func: "getArticleCrumbs" },
            function(data){
                pos2_path = data.category;
                if ( path[2] ) {
                    $('#category_nav a[class$="' + pos2_path +'"]').toggleClass('current');
                } else {
                    $('#category_nav a:first').toggleClass('current');
                }
            },"json")
    }
}) 
```

# c++ - 重新开发 MFC 应用程序

> ID：14561654
> 
> 赞同：0
> 
> 时间：2013-01-28T12:05:00.773
> 
> 标签：c++, visual-studio, mfc

我有一个用 c++ 编写的程序，必须对其进行一些修改。但是，我没有任何解决方案文件或类似文件，只有一堆 .h、.cpp、.obj、.dpb、.dll、.mdi、.dfm、.res、.tds、.bpl 文件和一个.exe 文件。
所以我可以启动一个应用程序，看看它在做什么以及控件是什么，但是当涉及到添加更改时，尝试将 UI 的行为映射到源代码文件似乎很乏味。
是否可以重新创建某种解决方案文件或只是简单的过程？（我使用的是 VS 2012，一个应用程序是在 2002 年编写的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:54:26.047

这些文件扩展名表明源来自 Borland IDE。我认为那个 .mdi 文件表示 Borland 的多文档界面……我大胆猜测这个项目很难使用 Visual Studio “重新编译”。我什至没有在您的列表中看到 .rc （资源文件）。重写可能是最简单的方法，具体取决于应用程序的复杂性......

# grails - Grails 中的默认错误消息未在视图中呈现

> ID：14561655
> 
> 赞同：0
> 
> 时间：2013-01-28T12:05:02.930
> 
> 标签：grails, message

如果在插入用户时发生某些错误，我希望查看默认错误消息。在控制器中我有 2 个动作：

```
def openPage() {
    [user: new User(params)]
}

def save() {
    User user = new User(params)
    if (!user.save(flush:true)) {
        redirect(view:'openPage', model:[user:user])
        return
    } else {
        flash.message = "User saved"
        redirect(action:'openPage')
    }
} 
```

这是我的gsp：

```
<g:hasErrors bean="${user }">
    <g:eachError bean="${user }" var="error">
        <li>${error } </li>
    </g:eachError>
</g:hasErrors>

<g:if test="${flash.message }">
    ${flash.message }
</g:if>
    <g:form action="save"> 
        Name:<g:textField name="username"/>
        <g:submitButton name="ok" value="Save"/>
    </g:form> 
```

但是有问题，如果我没有发送任何值，我看不到任何错误。这是我的域名：

```
String username

static constraints = {
    username(nullable:false, blank:false, unique:true)
} 
```

我的代码有什么问题？请帮忙。我必须使用这种方法来捕获错误还是最好使用 if...else 和 try...catch？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:09:42.377

如果保存失败，则调用 render 而不是 redirect() 方法：

```
if (!user.save(flush:true)) {
    render(view:'openPage', model:[user:user])
    ... 
```

# javascript - 无法在 JavaScript 中访问全局数组

> ID：14561661
> 
> 赞同：0
> 
> 时间：2013-01-28T12:05:35.760
> 
> 标签：javascript

我有一个全局变量说：

```
var series,hours;
var loadData = function(){
series = [[]];
hours = [];
d3.json("data/radar.json", function(error, data) {

    data.QualitySummaryObject.forEach(function(d,i) {
        series[i] = d.extractPercentage;
        hours[i] = d.extractorName;
  });

});  
console.log(hours);
}; 
```

现在，如果我试图访问这个 console.log 它工作正常，但是。

```
var print = function(){
    console.log(hours); //here its not working no value in hours why ... ?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:21:53.040

确保您`hours`是全球性的：

```
window.hours = []; 
```

然后你可以在任何地方记录它：

```
console.log(window.hours); 
```

直接使用 var 而不声明将避免上下文问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:16:17.883

如果您在函数中运行上述代码，则该变量`hours`不是全局变量，*因为*您之前使用`var`.

如果要将变量声明为全局变量，而不是这样：

```
var hours = []; 
```

做这个：

```
hours = []; 
```

要声明一个全局变量，你所要做的就是给它一个名字。

# xaml - 绑定到 Xaml

> ID：14561662
> 
> 赞同：1
> 
> 时间：2013-01-28T12:05:36.427
> 
> 标签：xaml, mvvm, binding

我正在将模型绑定到我的 Xaml 代码，并且对如何绑定到属性有疑问。

假设我的视图模型看起来像

```
internal class LogsVM
{
    private List<Log> logList;
    public List<Log> LogList
    {
        get; set;
    }       

    public LogsVM()
    {

    }

    public LogsVM(List<Logging.Log> logs)
    {
        logList = logs;
    }
} 
```

并假设我的 Log 类看起来像

```
internal class Log
{
    public string Title { get;set; }
    public List<MoreDetails> moreDetails;

    public Log()
    {
        moreDetails= new List<MoreDetails>();
    }
} 
```

在 Xaml 中，如何绑定到 TreeView 中的标题？

到目前为止，我的 Xaml 看起来像

```
<Window x:Class="BackUps.Logging.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:myData ="clr-namespace:BackUps.Logging.ViewModel"
        Title="Logging Results" Height="350" Width="525">

    <Grid>
        <Grid.Resources>
            <myData:LogsVM x:Key="Vm" />
        </Grid.Resources>
        <Grid.DataContext>
            <Binding Source="{StaticResource Vm}"></Binding>
        </Grid.DataContext>
        <TreeView>
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate DataType="{x:Type myData:LogsVM}" ItemsSource="{Binding LogList}">
                    <TextBlock Text="{Binding Title}" />
                    <HierarchicalDataTemplate.ItemTemplate>
                        <DataTemplate DataType="{x:Type myData:LogsVM}">
                            <TextBlock Text="{Binding moreDetails.Staus}" />
                        </DataTemplate>
                    </HierarchicalDataTemplate.ItemTemplate>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
    </Grid>
</Window> 
```

我的 MainWindow 代码在后面

```
public MainWindow(List<Log> logs)
    {
        InitializeComponent();
        LogsVM logVm = new LogsVM(logs);
        this.DataContext = logVm;
    } 
```

正如您在上面的代码中看到的，我正在尝试绑定 Title 属性，但我的屏幕根本不显示文本。

所以，我的两个问题是：

1.  单独使用我的 ViewModel 类就足够了吗，还是我还需要告诉 Xaml ViewModel 的每个内部类（在本例中为 Log 类）？例如

    xmlns:myData="clr-命名空间:BackUps.Logging.ViewModel"
    xmlns:moreData = "clr-命名空间:BackUps.Logging.Logs"

2.  我需要做什么来绑定标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:50:47.283

`Binding`并不像您想象的那样复杂，您只是没有掌握`Treeview`'s 的`HierarchicalDataTemplate`内容并将属性公开给`XAML`，请将您的所有域类设置为 public，因为它们在公共属性中使用。myData 应该引用域类命名空间。例如：在我的情况下`xmlns:myData="clr-namespace:WpfApplication3"` `MoreDetails`，它必须是类中的公共属性`Log`。

```
 <TreeView ItemsSource="{Binding LogList}" >
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate DataType="{x:Type myData:Log}" ItemsSource="{Binding MoreDetails}">
                <TextBlock Text="{Binding Title}" />
                <HierarchicalDataTemplate.ItemTemplate >
                    <DataTemplate DataType="{x:Type myData:MoreDetails}" >
                        <TextBlock Text="{Binding Status}" />
                    </DataTemplate>
                </HierarchicalDataTemplate.ItemTemplate>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView>

public class Log
    {
        public string Title { get; set; }
        public List<MoreDetails> MoreDetails { get; set; }

        public Log()
        {
            MoreDetails = new List<MoreDetails>();
        }
    }

    public class MoreDetails
    {
        public string Status { get; set; }
    }

public class YourVM
{
     public YourVM() // in my case i've just run it fast in code behind 
            {
                LogList = new List<Log>
                    {
                        new Log{Title = "Hichem", MoreDetails = new List<MoreDetails>{ new MoreDetails{Status = "OK"}}},
                        new Log{Title = "Hichem"},
                        new Log{Title = "Hichem"},
                        new Log{Title = "Hichem"},
                    };

            }

            public List<Log> LogList { get; set; }
} 
```

# php - 删除查询的sql注入

> ID：14561666
> 
> 赞同：0
> 
> 时间：2013-01-28T12:06:02.123
> 
> 标签：php, mysql, sql-injection, sql-delete

我有这个查询：

```
DELETE FROM users WHERE user_email = '$email' 
```

SQL注入攻击如何导致所有记录被删除？ 在将其发送到查询之前`addslashes()`应用函数。`$email`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:11:46.180

如果在数据库中设置了错误的编码（这不适用于 UTF-8），您可以绕过 addlashes，如下所示：

```
$email = urldecode('%BF%27 OR 1 -- '); // user input

$email = addslashes($email);
$sql = "DELETE FROM users WHERE user_email = '$email'"; 
```

因为 a`\`被添加到`%27`( `'`) 之前，`%BF`并且一个黑斜线会产生一个有效的多字节字符

[这是一篇解释这一点的博客文章](http://shiflett.org/blog/2006/jan/addslashes-versus-mysql-real-escape-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:18:21.507

如果您正在使用`PDO`，您可以使用`$pdo->quote($var)`或使用 PDOStatement `bindParam`，`bindValue($var, PDO::INT_PARAM)`它会清理数据并避免所有公共已知的特殊字符被用作 sql 注入。

**编辑**

那是因为每个数据库都有自己的保留字。

# php - 将焦点放在弹出窗口中的文本字段

> ID：14561668
> 
> 赞同：0
> 
> 时间：2013-01-28T12:06:12.753
> 
> 标签：php, javascript, textbox, focus

我正在使用弹出框添加类别。脚本是

```
<script>
    function changeMenu(id)
    {
    if (id=='other')
    { //Getting the variable's value from a link 
    var loginBox = 'login-box';
    $('#login-box').fadeIn(300);
    var popMargTop = ($('#login-box').height() + 24) / 2; 
    var popMargLeft = ($('#login-box').width() + 24) / 2; 
    $('#login-box').css({ 
    'margin-top' : -popMargTop,
    'margin-left' : -popMargLeft
    });
    $('body').append('<div id="mask"></div>');
    return false;
    }
    }
</script> 
```

弹出窗口的 html 是

```
<div id="login-box" class="login-popup">
<script>
    // When clicking on the button close or the mask layer the popup closed
    $('a.close, #mask').live('click', function() { 
    $('#mask , .login-popup').fadeOut(300 , function() {
    $('#mask').remove();  
    }); 
    return false;
    });
    </script>
    <a href="#" class="close"><img src="images/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>
    <form method="post" class="signin" action="#" name="catform" id="catform">
    <table align="center" width="500" height="200" class="border2">
    <tbody><tr>
    <td bgcolor="#cccccc" align="center" class="txt_users">
    Add</td></tr>
    <tr bgcolor="#ffffff">
    <td align="center" colspan="2"><font color="#ff0000">
    </font>
    </td></tr>
    <tr bgcolor="#eeeee1">
    <td align="center"><span class="txt_sitedetails">
    Name</span>&nbsp;&nbsp;
    <input type="text" style="width: 300px;" value="" name="cat" id="cat" class="cat">
    <input type="hidden" value="1" name="cate">
    <input type="hidden" value="" name="mode">
    <input type="hidden" value="" name="id">
    <br><br><input type="submit" onclick="return val();" class="button" value="Submit" name="add">
    </td></tr>
    </tbody></table>
    </form>
</div> 
```

我必须将重点放在弹出窗口中的名称文本字段上。我尝试了以下脚本

```
<script type="text/javascript" language="JavaScript">
document.forms['catform'].elements['cat'].focus();
</script>
<script language="Javascript">
document.catform.cat.focus()
</script>
<script language="javascript">
$(function() {
    $('input.cat').focus();
});
</script> 
```

但它们都不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:16:32.737

使用 id 属性将焦点设置在文本字段上。

```
$(document).ready(function(){
   $('#cat').focus();
}); 
```

在您的弹出页面中调用此函数，当页面加载时，它会将焦点设置在 cat 上。

# android - 将巨大的字符串从本机传递到 java - 内存不足错误

> ID：14561669
> 
> 赞同：3
> 
> 时间：2013-01-28T12:06:14.120
> 
> 标签：android, c++, string, java-native-interface

我正在用本机 C++ 编写一个函数，它使用`env->NewStringUTF`. 问题是当字符串很大（大约 23 MB）时，我会在 Java 中遇到内存不足的异常。

我已经尝试过部分获取数据，但是速度很慢。

这是我的代码：

```
char* d = data.c_str();
jstring str = env->NewStringUTF(d);
return str; 
```

如何将此字符串传递给Java？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:11:14.503

你不能在内存中保留这么大的字符串。某些 android 设备上的堆限制为整个应用程序的 16MB。

我建议您将此字符串保存到文件（或者可能在 db 中）并将文件名传递给 java.util.

或者，也许您应该更改应用程序逻辑并继续将字符串保留在本机空间中，并仅将请求的小部分传递给 java...

PS您可以使用GZIP压缩字符串并多次减少它的内存占用，但是您仍然无法在java中保留整个解压缩的字符串...

# mysql - 1GB MySQL可以处理多少数据

> ID：14561670
> 
> 赞同：4
> 
> 时间：2013-01-28T12:06:16.410
> 
> 标签：mysql, sqlite

我要启动一个有很多用户的创业公司，我想在数据库中存储大量数据。那里的一些朋友向我推荐了一些 HostingProviderA。（未附上姓名）

我正要继续通过 HostingProviderA 签署托管包，但他们在包的详细信息中明确列出了每个 MySQL 可以为我们包含的每个数据库包含 1GB。

问题如下，在我脑海中浮现，需要澄清。

1.  只是想知道我可以在 1GB 数据中存储多少数据。
2.  如果我想托管自己的服务器，那么使用 Ubuntu 32 位 20GB 存储 VPS 计划可以存储多少数据。
3.  MySQL 和 SQLite 有什么区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T12:19:07.897

1.  取决于你如何组织你的数据库以及你有多少表/字段...我运行一个有大约 50 个表和 150 万条记录的论坛，它是 460MB。
2.  如果你要做一些自定义的东西（大型脚本、大量 MySQL 处理等），VPS 将很重要。你对 VPS 有更多的控制权。在共享主机中，如果另一个站点出现问题，您的站点很可能会变慢/无响应。
3.  SQLlite 是一个基本的 SQL 服务器，通常为本地应用程序/电话等打包...... MySQL 是一个企业关系数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:16:52.843

1.这取决于您的数据库结构。您是否有固定长度的字段、许多关系、索引等。使用额外的 10-20% 的非数据空间进行计算。因此您可以存储大约 800MB 的纯数据。

根据您的数据库结构，您可能会以最佳方式使用该空间。

2\. 如果您希望拥有许多用户和大量数据 - 不要使用 VPS 计划。

3.[也许这可以帮助你](http://blog.sobbayi.com/sqlite-vs-mysql-how-to-decide-which-to-use/)

# angularjs - AngularJS 和 contentEditable 两种方式绑定无法按预期工作

> ID：14561676
> 
> 赞同：43
> 
> 时间：2013-01-28T12:06:50.140
> 
> 标签：angularjs, contenteditable, angularjs-directive

为什么在下面的示例中初始渲染值是`{{ person.name }}`而不是`David`？你会如何解决这个问题？

[现场示例在这里](http://plnkr.co/edit/orz6XK?p=preview)

HTML：

```
<body ng-controller="MyCtrl">
  <div contenteditable="true" ng-model="person.name">{{ person.name }}</div>
  <pre ng-bind="person.name"></pre>
</body> 
```

JS：

```
app.controller('MyCtrl', function($scope) {
  $scope.person = {name: 'David'};
});

app.directive('contenteditable', function() {
  return {
    require: 'ngModel',
    link: function(scope, element, attrs, ctrl) {
      // view -> model
      element.bind('blur', function() {
        scope.$apply(function() {
          ctrl.$setViewValue(element.html());
        });
      });

      // model -> view
      ctrl.$render = function() {
        element.html(ctrl.$viewValue);
      };

      // load init value from DOM
      ctrl.$setViewValue(element.html());
    }
  };
}); 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-28T12:37:51.160

问题是您在插值尚未完成时更新视图值。

所以删除

```
// load init value from DOM
ctrl.$setViewValue(element.html()); 
```

或将其替换为

```
ctrl.$render(); 
```

将解决问题。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-10T10:50:27.187

**简短的回答**

您正在使用以下行从 DOM 初始化模型：

```
ctrl.$setViewValue(element.html()); 
```

您显然不需要从 DOM 初始化它，因为您正在控制器中设置值。只需删除此初始化行。

**长答案（可能是不同的问题）**

这实际上是一个已知问题：[https ://github.com/angular/angular.js/issues/528](https://github.com/angular/angular.js/issues/528)

[在此处](http://docs.angularjs.org/api/ng.directive%3angModel.NgModelController)查看官方文档示例

html:

```
<!doctype html>
<html ng-app="customControl">
  <head>
    <script src="http://code.angularjs.org/1.2.0-rc.2/angular.min.js"></script>
    <script src="script.js"></script>
  </head>
  <body>
    <form name="myForm">
     <div contenteditable
          name="myWidget" ng-model="userContent"
          strip-br="true"
          required>Change me!</div>
      <span ng-show="myForm.myWidget.$error.required">Required!</span>
     <hr>
     <textarea ng-model="userContent"></textarea>
    </form>
  </body>
</html> 
```

JavaScript：

```
angular.module('customControl', []).
  directive('contenteditable', function() {
    return {
      restrict: 'A', // only activate on element attribute
      require: '?ngModel', // get a hold of NgModelController
      link: function(scope, element, attrs, ngModel) {
        if(!ngModel) return; // do nothing if no ng-model

        // Specify how UI should be updated
        ngModel.$render = function() {
          element.html(ngModel.$viewValue || '');
        };

        // Listen for change events to enable binding
        element.on('blur keyup change', function() {
          scope.$apply(read);
        });
        read(); // initialize

        // Write data to the model
        function read() {
          var html = element.html();
          // When we clear the content editable the browser leaves a <br> behind
          // If strip-br attribute is provided then we strip this out
          if( attrs.stripBr && html == '<br>' ) {
            html = '';
          }
          ngModel.$setViewValue(html);
        }
      }
    };
  }); 
```

[Plunkr](http://plnkr.co/edit/mnUHdgMZhVoHxJO3eddB?p=preview)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-17T20:33:48.527

这是我对自定义指令的理解。

下面的代码是两种方式绑定的基本概述。

你也可以看到它在这里工作。

[http://plnkr.co/edit/8dhZw5W1JyPFUiY7sXjo](http://plnkr.co/edit/8dhZw5W1JyPFUiY7sXjo)

```
<!doctype html>
<html ng-app="customCtrl">
  <head>
    <script src="http://code.angularjs.org/1.2.0-rc.2/angular.min.js"></script>
    <script>

  angular.module("customCtrl", []) //[] for setter
  .directive("contenteditable", function () {

    return {
      restrict: "A",  //A for Attribute, E for Element, C for Class & M for comment
      require: "ngModel",  //requiring ngModel to bind 2 ways.
      link: linkFunc
    }
    //----------------------------------------------------------------------//
    function linkFunc(scope, element, attributes,ngModelController) {
        // From Html to View Model
        // Attaching an event handler to trigger the View Model Update.
        // Using scope.$apply to update View Model with a function as an
        // argument that takes Value from the Html Page and update it on View Model
        element.on("keyup blur change", function () {
          scope.$apply(updateViewModel)
        })

        function updateViewModel() {
          var htmlValue = element.text()
          ngModelController.$setViewValue(htmlValue)
        }
              // from View Model to Html
              // render method of Model Controller takes a function defining how
              // to update the Html. Function gets the current value in the View Model
              // with $viewValue property of Model Controller and I used element text method
              // to update the Html just as we do in normal jQuery.
              ngModelController.$render = updateHtml

              function updateHtml() {
                var viewModelValue = ngModelController.$viewValue
                // if viewModelValue is change internally, and if it is
                // undefined, it won't update the html. That's why "" is used.
                viewModelValue = viewModelValue ? viewModelValue : ""
                element.text(viewModelValue)
              }
    // General Notes:- ngModelController is a connection between backend View Model and the 
    // front end Html. So we can use $viewValue and $setViewValue property to view backend
    // value and set backend value. For taking and setting Frontend Html Value, Element would suffice.

    }
  })

    </script>
  </head>
  <body>
    <form name="myForm">
    <label>Enter some text!!</label>
     <div contenteditable
          name="myWidget" ng-model="userContent"
          style="border: 1px solid lightgrey"></div>
     <hr>
     <textarea placeholder="Enter some text!!" ng-model="userContent"></textarea>
    </form>
  </body>
</html> 
```

希望，它可以帮助那里的人。！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-29T09:53:10.250

检查这个 angularjs 指令 [https://github.com/clofus/angular-inputnlabel](https://github.com/clofus/angular-inputnlabel) [http://clofus.com/viewarticles/109](http://clofus.com/viewarticles/109)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-07T14:26:29.217

如果 scope.$apply 已经在进行中，您可能会在使用 @Vanaun 的代码时遇到问题。在这种情况下，我使用 $timeout 来解决问题：

html:

```
<!doctype html>
<html ng-app="customControl">
  <head>
    <script src="http://code.angularjs.org/1.2.0-rc.2/angular.min.js"></script>
    <script src="script.js"></script>
  </head>
  <body>
    <form name="myForm">
     <div contenteditable
          name="myWidget" ng-model="userContent"
          strip-br="true"
          required>Change me!</div>
      <span ng-show="myForm.myWidget.$error.required">Required!</span>
     <hr>
     <textarea ng-model="userContent"></textarea>
    </form>
  </body>
</html> 
```

JavaScript：

```
angular.module('customControl', []).
  directive('contenteditable', function($timeout) {
    return {
      restrict: 'A', // only activate on element attribute
      require: '?ngModel', // get a hold of NgModelController
      link: function(scope, element, attrs, ngModel) {
        if(!ngModel) return; // do nothing if no ng-model

        // Specify how UI should be updated
        ngModel.$render = function() {
          element.html(ngModel.$viewValue || '');
        };

        // Listen for change events to enable binding
        element.on('blur keyup change', function() {
          $timeout(read);
        });
        read(); // initialize

        // Write data to the model
        function read() {
          var html = element.html();
          // When we clear the content editable the browser leaves a <br> behind
          // If strip-br attribute is provided then we strip this out
          if( attrs.stripBr && html == '<br>' ) {
            html = '';
          }
          ngModel.$setViewValue(html);
        }
      }
    };
  }); 
```

工作示例：[Plunkr](http://plnkr.co/edit/2nRtzu7REjNjEsb1iiYW)

# code-coverage - Cobertura中条件覆盖的计算

> ID：14561679
> 
> 赞同：4
> 
> 时间：2013-01-28T12:07:02.353
> 
> 标签：code-coverage, cobertura

我有两段代码给我带来了麻烦。我使用单元测试对它们进行测试，使用 cobertura 来分析测试覆盖率，但我不明白条件覆盖率是如何计算的。这是第一部分：

```
if ((x.getInt() == a) 
 || (x.getInt() == y.getInt()) { ... 
```

Cobertura 报告我需要涵盖 4 个案例，假设忽略短路，这似乎很好。

然后，在另一种方法中，我有另一个（更长的）条件：

```
if ((x == null)
 || ObjectUtils.equals(x.getInt(), a)
 || ObjectUtils.equals(x.getInt(), y.getInt())) {
  ... 
```

这是我不明白的部分：Cobertura 报告说涵盖了 5/6 个案例。我本来预计有 8 个案例，我可以解释 5 个案例（考虑到 x == null），但是

> 在这些情况下，cobertura 如何处理有条件的覆盖，为什么会导致 6 个案例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T00:22:49.310

覆盖率不是通过测试所有可能的布尔标志状态组合来衡量的，而只是那些足以覆盖所有用例的组合。

考虑以下类：

```
public class MyClass {

public boolean allOr(boolean x, boolean y) {
    return x || y;
}

public boolean allOr(boolean x, boolean y, boolean z) {
    return x || y || z;
}

public boolean allOr(boolean w, boolean x, boolean y, boolean z) {
    return w || x || y || z;
}

public boolean allAnd(boolean x, boolean y) {
    return x && y;
}

public boolean allAnd(boolean x, boolean y, boolean z) {
    return x && y && z;
}

public boolean andOr(boolean x, boolean y, boolean z) {
    return x && y || z;
}

public boolean orAnd(boolean x, boolean y, boolean z) {
    return (x || y) && z;
}

} 
```

提供完整覆盖的测试如下：

```
public class MyClassTest {

@Test
public void testAllOr2() {
    MyClass instance = new MyClass();
    // For OR clause, test that all false returns false
    assertFalse(instance.allOr(false, false));
    // For OR clause, test that any one true returns true
    assertTrue(instance.allOr(false, true));
    assertTrue(instance.allOr(true, false));
}

@Test
public void testAllOr3() {
    MyClass instance = new MyClass();
    // For OR clause, test that all false returns false
    assertFalse(instance.allOr(false, false, false));
    // For OR clause, test that any one true returns true
    assertTrue(instance.allOr(false, false, true));
    assertTrue(instance.allOr(false, true, false));
    assertTrue(instance.allOr(true, false, false));

    // These do not add to coverage
    // assertTrue(instance.allOr(false, true, true));
    // assertTrue(instance.allOr(true, false, true));
    // assertTrue(instance.allOr(true, true, false));
    // assertTrue(instance.allOr(true, true, true));
}

@Test
public void testAllOr4() {
    MyClass instance = new MyClass();
    // For OR clause, test that all false returns false
    assertFalse(instance.allOr(false, false, false, false));
    // For OR clause, test that any one true returns true
    assertTrue(instance.allOr(false, false, false, true));
    assertTrue(instance.allOr(false, false, true, false));
    assertTrue(instance.allOr(false, true, false, false));
    assertTrue(instance.allOr(true, false, false, false));
}

@Test
public void testAllAnd2() {
    MyClass instance = new MyClass();
    // For AND clause, test that all true returns true
    assertTrue(instance.allAnd(true, true));
    // For AND clause, test that any one false returns false
    assertFalse(instance.allAnd(true, false));
    assertFalse(instance.allAnd(false, true));
}

@Test
public void testAllAnd3() {
    MyClass instance = new MyClass();
    // For AND clause, test that all true returns true
    assertTrue(instance.allAnd(true, true, true));
    // For AND clause, test that any one false returns false
    assertFalse(instance.allAnd(false, true, true));
    assertFalse(instance.allAnd(true, false, true));
    assertFalse(instance.allAnd(true, true, false));
}

@Test
public void testAndOr() {
    MyClass instance = new MyClass();
    // Since AND takes precedence,
    // OR is the external operator, AND is the internal operator
    // For the AND clause, false can be achieved in two ways
    // Compare to testAllAnd2 # 2, 3
    assertFalse(instance.andOr(true, false, false));
    assertFalse(instance.andOr(false, true, false));
    // This completes the first test case for the external operator
    // Compare to testAllOr2 # 1

    // Now irrespective of the arguments
    // as long as the value returned by the internal operation is false
    // we can perform the testAllOr2 # 2
    assertTrue(instance.andOr(true, false, true));
    // We do not need the case for false, true, true
    // because we have tested that no matter what the first two args are
    // it does not make a difference as long as one of them is false

    // However, if both args are true
    // the value returned by the internal operation is true
    // we can perform the testAllOr2 # 3
    // This is only possible in one way
    // Compare testAllAnd2 # 1
    assertTrue(instance.andOr(true, true, false));
}

@Test
public void testOrAnd() {
    MyClass instance = new MyClass();
    // Since OR takes precedence,
    // AND is the external operator, OR is the internal operator
    // For the OR clause, true can be achieved in two ways
    // Compare to testAllOr2 # 2, 3
    assertTrue(instance.orAnd(false, true, true));
    assertTrue(instance.orAnd(true, false, true));
    // This completes the first test case for the external operator
    // Compare to testAllAnd2 # 1

    // Now irrespective of the arguments
    // as long as the value returned by the internal operation is true
    // we can perform the testAllAnd2 # 2
    assertFalse(instance.orAnd(false, true, false));
    // We do not need the case for true, false, false
    // because we have tested that no matter what the first two args are
    // it does not make a difference as long as one of them is true

    // However, if both args are false
    // the value returned by the internal operation is false
    // we can perform the testAllAnd2 # 3
    // This is only possible in one way
    // Compare testAllOr2 # 1
    assertFalse(instance.orAnd(false, false, true));
}

} 
```

# java - 用消息抛出简单的异常

> ID：14561680
> 
> 赞同：0
> 
> 时间：2013-01-28T12:07:06.847
> 
> 标签：java, exception

java中有没有简单的方法用消息抛出异常？在以下方法中，我检查类型，如果类型不存在，我想抛出不支持该类型的消息，最简单的方法是什么？

```
public static SwitchType<?> switchInput(final String typeName) {

    if (typeName.equals("java.lang.String")) {

    }
    else if (typeName.equals("Binary")) {

    }
    else if (typeName.equals("Decimal")) {

    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:09:31.507

使用以字符串为参数的[异常构造函数：](http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html#Exception%28java.lang.String%29)

```
 if (typeName.equals("java.lang.String")) {

        }
        else if (typeName.equals("Binary")) {

        }
        else if (typeName.equals("Decimal")) {

        }
        else {
           throw new IllegalArgumentException("Wrong type passed");
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:09:24.313

处理非法参数的标准方法是[抛出`IllegalArgumentException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)：

```
} else {
    throw new IllegalArgumentException("This type is not supported: " + typeName);
} 
```

如果可以避免，请尽量[不要返回 null 。](https://stackoverflow.com/questions/2168397/is-returning-null-after-exception-is-caught-bad-design)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:14:12.570

这个方法不能真的抛出异常
，因为`typeName`函数的输入参数`String`已经是..

# java - 解析json数组android

> ID：14561685
> 
> 赞同：6
> 
> 时间：2013-01-28T12:07:15.160
> 
> 标签：java, android, json, arrays

嗨，我正在尝试从此 url 解析 json[数组](http://zasvadba.mk/test.php)。json 数组看起来像这样。

```
 [
   {
      "id":1,
      "introtext":"\u041b\u0438\u043c\u0443\u0437\u0438\u043d\u0430\u0442\u0430 \u0435 \u043e\u0434 \u0430\u043c\u0435\u0440\u0438\u043a\u0430\u043d\u0441\u043a\u043e \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u0432\u043e \u0431\u0435\u043b\u0430 \u0431\u043e\u0458\u0430 \u0434\u043e\u043b\u0433\u0430 \u043e\u043a\u043e\u043b\u0443 8,5 \u043c\u0435\u0442\u0440\u0438\. \u041e\u043f\u0440\u0435\u043c\u0435\u043d\u0430 \u0435 \u0441\u043e \u043a\u043b\u0438\u043c\u0430 \u0440\u0435\u0434, \u0422\u0412, \u0414\u0412\u0414 \u0438 \u0431\u0430\u0440\. \u041c\u043e\u0436\u0430\u0442 \u0434\u0430 \u0441\u0435 \u0432\u043e\u0437\u0430\u0442 \u0434\u043e 9 \u043b\u0438\u0446\u0430\. \u0421\u0435 \u0438\u0437\u043d\u0430\u0458\u043c\u0443\u0432\u0430 \u0441\u043e \u043d\u0430\u0448 \u0448\u043e\u0444\u0435\u0440.\n{AdmirorGallery}..\/katalog\/prevoz\/limo-servis-jasmina\/linkoln\/{\/AdmirorGallery}\n\u00a0",
      "image":"http:\/\/zasvadba.mk\/media\/k2\/items\/cache\/787ae9ec9023a82f5aa7e4c1a64f73cb_S.jpg",
      "title":"\u041b\u0438\u043c\u0443\u0437\u0438\u043d\u0430 \u041b\u0438\u043d\u043a\u043e\u043b\u043d",
      "catid":"20",
      "alias":"\u043b\u0438\u043c\u0443\u0437\u0438\u043d\u0430-\u043b\u0438\u043d\u043a\u043e\u043b\u043d-\u043b\u0438\u043c\u043e-\u0441\u0435\u0440\u0432\u0438\u0441-\u0458\u0430\u0441\u043c\u0438\u043d\u0430"
   }
] 
```

我在我的java类中这样做

```
try {
            JSONfunctions j=new JSONfunctions();
            JSONObject json = j.getJSONfromURL(url);
            Log.i("log_tag", json.toString()); 
            String jsonvalues =  json.getString("id");

            Log.i("DARE", jsonvalues);  
        }
        catch (Exception ex)
        {
            Log.e("log_tag", "Error getJSONfromURL "+ex.toString());           
        }
    } 
```

但它不起作用，任何人都可以帮我解析我的json数组

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T12:51:41.823

您需要根据您在此处发布的字符串对当前代码进行两项更改以解析为 Json ：

**首先：**`getJSONfromURL`将方法的返回类型更改为`JSONArray`并`JSONArray`从它返回，而不是`JSONObject` 例如：

```
public JSONArray getJSONfromURL(String url){
    String str_response="response from server";

    // convert response to JSONArray
   JSONArray json_Array=new JSONArray(str_response);

   return json_Array; //<< retun jsonArray
} 
```

**第二：**更改您的代码以获取价值`JsonArray` ：

```
try {
    JSONfunctions j=new JSONfunctions();
    JSONArray jArray = j.getJSONfromURL(url);
    Log.i("log_tag", jArray.toString()); 

     for(int i=0;i<jArray.length();i++){
      JSONObject json_data = jArray.getJSONObject(i);
      String jsonvalues =  json_data.getString("id");
      // .. get all value here
      Log.i("DARE", jsonvalues);  
   }
  }
catch (Exception ex)
   {
    Log.e("log_tag", "Error getJSONfromURL "+ex.toString());           
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T12:11:24.387

当然*不行*！您应该使用`json.getJSONArray(...)`方法在 Json 中解析数组:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-30T06:39:22.287

您可以使用 gson 库轻松完成。

这是代码示例：

您的实体类会喜欢：

```
public class ResponseEntity {
    @SerializedName("id")
    public int id;
    @SerializedName("introtext")
    public String introtext;
    @SerializedName("image")
    public String image;
    @SerializedName("title")
    public String title;
    @SerializedName("catid")
    public String catid;
    @SerializedName("alias")
    public String alias;

} 
```

现在使用 GSON 库转换这个 json 数组。

```
Gson gson=new Gson();    
    ResponseEntity[] entities = gson.fromJson(yourResponseAsString.toString(),
          ResponseEntity[].class); 
```

现在你有实体数组了`entities`。

谢谢。

# java - 无法从控制台运行 Maven

> ID：14561686
> 
> 赞同：1
> 
> 时间：2013-01-28T12:07:19.873
> 
> 标签：java, eclipse, maven-3

[我已经从这篇博](http://briansjavablog.blogspot.it/2012/08/rest-services-with-spring.html)文下载了示例的源代码，我想将它导出到 Tomcat。我已经“几乎”成功地将项目导入 Eclipse，几乎是因为 Eclipse 没有将该项目视为 Web 项目。

好的，我仍然可以从控制台编译 WAR，而不是从 IDE 导出。

相反，我从控制台尝试过`mvn package`，但出现错误：

```
djechelon@RAYNOR:~/workspace/rest-sample> mvn package
28/gen/2013 12:54:47 com.google.inject.internal.MessageProcessor visit
INFO: An exception was caught and reported. Message: java.util.NoSuchElementException
java.util.NoSuchElementException
   at java.util.AbstractList$2.next(libgcj.so.13)
   at com.google.inject.spi.InjectionPoint.forMember(InjectionPoint.java:116)
   at com.google.inject.spi.InjectionPoint.<init>(InjectionPoint.java:73)
   at com.google.inject.spi.InjectionPoint$InjectableMethod.toInjectionPoint(InjectionPoint.java:459)
   at com.google.inject.spi.InjectionPoint.getInjectionPoints(InjectionPoint.java:725)
   at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields(InjectionPoint.java:358)
   at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields(InjectionPoint.java:377)
   at com.google.inject.internal.BindingBuilder.toInstance(BindingBuilder.java:84)
   at org.codehaus.plexus.DefaultPlexusContainer$ContainerModule.configure(DefaultPlexusContainer.java:803)
   at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:229)
   at com.google.inject.spi.Elements.getElements(Elements.java:103)
   at com.google.inject.spi.Elements.getElements(Elements.java:80)
   at org.sonatype.guice.bean.binders.MergedModule.configure(MergedModule.java:54)
   at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:229)
   at com.google.inject.spi.Elements.getElements(Elements.java:103)
   at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:136)
   at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:104)
   at com.google.inject.Guice.createInjector(Guice.java:94)
   at com.google.inject.Guice.createInjector(Guice.java:71)
   at com.google.inject.Guice.createInjector(Guice.java:61)
   at org.codehaus.plexus.DefaultPlexusContainer.addPlexusInjector(DefaultPlexusContainer.java:470)
   at org.codehaus.plexus.DefaultPlexusContainer.<init>(DefaultPlexusContainer.java:196)
   at org.codehaus.plexus.DefaultPlexusContainer.<init>(DefaultPlexusContainer.java:160)
   at org.apache.maven.cli.MavenCli.container(MavenCli.java:375)
   at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:191)
   at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
   at java.lang.reflect.Method.invoke(libgcj.so.13)
   at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
   at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
   at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
   at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
28/gen/2013 12:54:47 com.google.inject.internal.MessageProcessor visit
INFO: An exception was caught and reported. Message: java.util.NoSuchElementException
java.util.NoSuchElementException
   at java.util.AbstractList$2.next(libgcj.so.13)
   at com.google.inject.spi.InjectionPoint.forMember(InjectionPoint.java:116)
   at com.google.inject.spi.InjectionPoint.<init>(InjectionPoint.java:73)
   at com.google.inject.spi.InjectionPoint$InjectableMethod.toInjectionPoint(InjectionPoint.java:459)
   at com.google.inject.spi.InjectionPoint.getInjectionPoints(InjectionPoint.java:725)
   at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields(InjectionPoint.java:358)
   at com.google.inject.spi.InjectionPoint.forInstanceMethodsAndFields(InjectionPoint.java:377)
   at com.google.inject.internal.BindingBuilder.toInstance(BindingBuilder.java:84)
   at org.codehaus.plexus.DefaultPlexusContainer$DefaultsModule.configure(DefaultPlexusContainer.java:836)
   at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:229)
   at com.google.inject.spi.Elements.getElements(Elements.java:103)
   at com.google.inject.spi.Elements.getElements(Elements.java:80)
   at org.sonatype.guice.bean.binders.MergedModule.configure(MergedModule.java:54)
   at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:229)
   at com.google.inject.spi.Elements.getElements(Elements.java:103)
   at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:136)
   at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:104)
   at com.google.inject.Guice.createInjector(Guice.java:94)
   at com.google.inject.Guice.createInjector(Guice.java:71)
   at com.google.inject.Guice.createInjector(Guice.java:61)
   at org.codehaus.plexus.DefaultPlexusContainer.addPlexusInjector(DefaultPlexusContainer.java:470)
   at org.codehaus.plexus.DefaultPlexusContainer.<init>(DefaultPlexusContainer.java:196)
   at org.codehaus.plexus.DefaultPlexusContainer.<init>(DefaultPlexusContainer.java:160)
   at org.apache.maven.cli.MavenCli.container(MavenCli.java:375)
   at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:191)
   at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
   at java.lang.reflect.Method.invoke(libgcj.so.13)
   at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
   at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
   at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
   at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
[ERROR] Error executing Maven.
[ERROR] null 
```

上述错误适用于任何 Maven 项目。我首先尝试从不稳定的[包](https://software.opensuse.org/package/maven)安装 Maven 3 ，然后卸载它，从 Apache 下载官方 Maven 3，然后在主目录中使用新包重试（所以我没有运行`mvn`但是`/home/djechelon/apache-mvn------/bin/mvn`）：同样的错误。

但是，如果我从 Eclipse STS ( `Spring Tools`-> `Update Maven dependencies`) 运行 Maven，我不会收到任何错误，它会更新 Eclipse 的所有依赖项（但不会使项目成为 Web 项目）。

如何解决问题并将 WAR 部署到 Tomcat？

[添加] pom.xml 的内容

```
<?xml version="1.0"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                             http://maven.apache.org/maven-v4_0_0.xsd">
    <artifactId>rest-sample</artifactId>
    <modelVersion>4.0.0</modelVersion>
    <inceptionYear>2011</inceptionYear>
    <packaging>war</packaging>
    <groupId>com.blog.rest</groupId>
    <version>1.0</version>
     <properties>
        <releaseCandidate>1</releaseCandidate>
        <spring.version>3.1.1.RELEASE</spring.version>
        <java.version>1.5</java.version>
        <jackson.mapper.version>1.5.6</jackson.mapper.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
        <maven.javadoc.reporting.version>2.7</maven.javadoc.reporting.version>
        <commons.logging.version>1.1.1</commons.logging.version>
        <log4j.version>1.2.16</log4j.version>
        <context.path>rest-sample</context.path>
        <jackson.mapper.version>1.5.6</jackson.mapper.version>
    </properties>
    <build>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <warName>${context.path}</warName>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
    <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>${log4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-asm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>${jackson.mapper.version}</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.4</version>
        </dependency>
    </dependencies>
</project> 
```

[编辑] Java 版本

```
djechelon@RAYNOR:~/workspace/rest-sample> java -version
java version "1.7.0_09"
OpenJDK Runtime Environment (IcedTea7 2.3.4) (suse-3.20.1-x86_64)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode) 
```

# android - 是否可以在单个项目中调用更多包，而无需在 emulator/phone.want 单个 apk 中安装其他包

> ID：14561688
> 
> 赞同：0
> 
> 时间：2013-01-28T12:07:36.310
> 
> 标签：android

是否可以在单个项目中调用更多包，而不在模拟器/手机中安装其他包，想要单个 apk 文件..我保留了这个代码......但是当包在模拟器/手机中可用时是可能的..请建议我...如果模拟器/手机中没有该软件包

```
Intent intent = new Intent(Intent.ACTION_MAIN);
 intent.setComponent(new ComponentName(
            "com.abc.def.packname",
            "com.abc.def.packname.MyActivity"));

  startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:42:10.993

为了能够使用 Intent 启动任何 Activity，必须有一个 Activity 可用于处理它。这既适用于针对一个特定 Activity 的直接意图，也适用于会导致选择器对话框的更一般的意图，例如共享意图。

所以简而言之，是的，您引用的包也必须安装，否则您的应用程序将崩溃。如果您可以访问另一个项目的源代码，则可以将它们合并为一个。如果这不可行，您可以要求用户在您的应用启动时安装其他应用。

# java - @RequestMapping 在不同类中的相同 URL 上使用“params”会导致 JUnit 中使用 SpringJUnit4ClassRunner 出现“IllegalStateException：无法映射处理程序”

> ID：14561691
> 
> 赞同：6
> 
> 时间：2013-01-28T12:07:40.123
> 
> 标签：java, spring, spring-mvc, junit

我执行重构并将控制器拆分为 2 个控制器：

```
@RequestMapping(value = "/graph.htm", method = RequestMethod.POST, params="first")

```

在第一个控制器中，并且：

```
@RequestMapping(value = "/graph.htm", method = RequestMethod.POST, params="second")

```

在第二个控制器中，因此这些注释位于不同的文件中。当我构建和使用项目时，一切都很好（我在表单中**输入**了不同名称的 HTML 标签：*first*和*second*）。

但是当我尝试运行 JUnit 控制器测试时：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:test-context.xml" })

```

我得到跟踪：

```
引起：java.lang.IllegalStateException：无法映射处理程序'firstController'
  到 URL 路径 [/graph.htm]：已经有处理程序
  类型 [class com.web.controller.SecondController] 映射。
    在 org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:294)
    在 org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:266)
    在 org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.detectHandlers(AbstractDetectingUrlHandlerMapping.java:82)
    在 org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.initApplicationContext(AbstractDetectingUrlHandlerMapping.java:58)
    在 org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
    在 org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
    在 org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    在 org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
    在 org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
    在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization（AbstractAutowireCapableBeanFactory.java:399）
    在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1479)
    在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)

```

当我注释掉这个时：

```
@RequestMapping(value = "/graph.htm", method = RequestMethod.POST, params="second")

```

在第二个控制器中，第一个控制器的单独测试成功完成。

要解决此问题，我可能会使用不同的 URL（**@RequestMapping**中的**值**），但我不明白为什么在我的应用程序的生产构建中为**参数解析请求映射并因****SpringJUnit4ClassRunner**失败。

 ******欢迎任何帮助！

**附言**。我使用 Spring 3.2。

**聚苯乙烯**。我发现几乎相同的问题[我可以在不同的 Spring 控制器中使用不同的参数具有相同的映射值吗？](https://stackoverflow.com/questions/7581784/can-i-have-the-same-mapping-value-with-different-param-in-a-different-spring-con)但根据答案，我的生产构建也必须失败？！但我成功运行生产构建！

另请参阅：

*   [@RequestMapping 在渲染方法中有 2 个参数](https://stackoverflow.com/questions/12640265/requestmapping-with-2-params-in-render-method)
*   [Spring MVC 3：不同控制器中的相同@RequestMapping，具有集中式 XML URL 映射（混合 xml/注释方法）](https://stackoverflow.com/questions/11255706/spring-mvc-3-same-request-mapping-different-controller-mapping)

***PPS**。

我查看 3.2 的官方文档：

[http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html#params%28%29](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html#params%28%29)

```
在 Servlet 环境中，参数映射被视为限制
在类型级别强制执行。主路径映射（即
指定的 URI 值）仍然必须唯一标识目标处理程序，其中
参数映射仅表示调用处理程序的先决条件。

```

所以似乎我执行了非法编码练习......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:17:09.777

这是我在阅读您的问题中引用的官方文档时所理解的：

> 在 Servlet 环境中，参数映射被视为在类型级别强制执行的限制。主路径映射（即指定的 URI 值）仍然必须唯一标识**类**中的目标处理程序，参数映射仅表示调用处理程序的先决条件。

我添加了“**在课堂内**”这几个词。

请注意**在类型级别强制执行**。据我了解，这意味着：在 servlet 环境中。在方法级别声明*参数与在类型级别声明**参数*完全相同（至少如果您的类中只有一个方法）。

最后，如果您注意这句话（[相同来源](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html#params%28%29)）：

> 在类型级别使用时，所有方法级别映射都继承此参数限制（即，在处理程序方法被解析**之前检查类型级别限制）。**

我认为所有这些总结了为什么您没有进行*非法编码*。

**关于单元测试：**

这里同样重要的是“**在 Servlet 环境**中”这句话。显然，在运行单元测试时：你不在*Servlet 环境*中，这可能就是它失败的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:35:28.360

我的邻居同事帮我解决了调试问题。

我们比较了生产环境和测试环境，发现上下文 XML 配置存在差异。

先前失败的测试配置：

```
    <bean name="handlerMapping"
          class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
    <bean name="handlerAdapter"
          class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>

```

新的和有效的测试上下文配置：

```
    <bean name="handlerMapping"
          class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping"/>
    <bean name="handlerAdapter"
          class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter"/>

```

不同的 spring 类使用不同的映射模式。每个类的旧用途，每个方法的新用途！******

# android - 在网格视图中使用 android:configChanges="orientation|keyboardHidden" 但适用于其他选项卡时的选项卡小部件问题

> ID：14561693
> 
> 赞同：3
> 
> 时间：2013-01-28T12:07:47.000
> 
> 标签：android, permissions, tabs, android-manifest, android-orientation

我被我的问题困住了。事情是它是一个自定义选项卡小部件。其中有多个选项卡，例如 `Home`- `News`- `Abc`- `PQR`。

活动应为`both orientation like portrait and landscape`. 因此，每个选项卡都有`two xml`存储在的纵向和存储在的`layout-port/file.xml`横向`layout-land/file.xml`

为了管理从纵向到横向的方向，我`android:configChanges="orientation|keyboardHidden"`在每个活动中添加了规则标签。

*   `TAB_SAMPLE.java`选项卡文件。
*   `TAB_GROUP_ACTIVITY`每个选项卡组活动文件
*   `file.java`任务文件

**毕竟这些东西我在这里遇到问题：**

如果我`add`android:configChanges="orientation|keyboardHidden"`rule tag in tab_sample`活动那么它的工作完美。喜欢管理不同的视图。港口到陆地和陆地到港口，但它在 Home.java 中不起作用。

现在，如果我`remove android:configChanges="orientation|keyboardHidden" rule tag in tab_sample`活动，那么它适用于 Home 活动而不是 News.java

意思是当我改变方向时，它保持相同的 xml 表单端口不从 layout-land 使用。从某种意义上说，它再次调用 OnCreate()。

所以我发现`may be issue is in Tab Widget.`

**更新**

现在跟踪我的代码后，我发现主要问题在于网格视图活动，因为它唯一的活动不起作用。

`Issue is between Tab host v/s Grid View`. 我不知道为什么它不采用 layout-land xml 文件。我发现[这](https://stackoverflow.com/questions/14339255/change-layout-while-orientation-change-at-runtime-in-a-fragment-without-recreati)是同一个问题，但也没有重播该问题

请参阅 Detail [manifestfile.xml](http://pastie.org/5896221) 我想在所有活动中同时保持纵向和横向。

[两个 XML 文件](http://pastie.org/5925648)

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:18:34.083

Oooohhh 最后我得到了上述问题的解决方案。这是非常困难的。

为了保持横向到纵向的方向状态，反之亦然，我们通常`android:configChanges="keyboardHidden|orientation"`在活动下添加属性标签。

但在这里，`may be issue is Tab_Group_ Activity`由于我无法在 GridView 中维护状态。`Grid_File.java`是**唯一一个没有处理所有其他工作正常的方向的java文件。**

现在，如果我`remove android:configChanges="keyboardHidden|orientation"`从那时`TAB_SAMPLE.java`起**它只处理`Grid_File.java`其他人。**

```
mean that was keeping same Layout XML in landscape also where i have two separate XML File. 
```

**这是我的解决方案：**

我有`add android:configChanges="keyboardHidden|orientation"`以及`TAB_SAMPLE.java` *设置* `implement onConfigurationChanged(Configuration newConfig)`网格的列数。喜欢`gridView.setNumColumns(6);`

```
@Override
    public void onConfigurationChanged(Configuration newConfig)
    {
        super.onConfigurationChanged(newConfig);
        // gridView.setSelection(index);
        if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
        {

            // Log.e("On Config Change", "LANDSCAPE");
            gridView.setNumColumns(6);

        } else
        {

            // Log.e("On Config Change", "PORTRAIT");
            gridView.setNumColumns(4);
        }
    } 
```

通常我们`android:configChanges="keyboardHidden|orientation"`在活动下添加标签，或者`implementing onConfigurationChanged(Configuration newConfig)`但在这里我已经写了两者。

# razor - 升级到 Razor 2/RE 3.2 后，RazorEngine 扩展方法失败并出现 RuntimeBinderException

> ID：14561695
> 
> 赞同：2
> 
> 时间：2013-01-28T12:07:53.037
> 
> 标签：razor, extension-methods, razor-2

我有一个[RazorEngine](https://github.com/Antaris/RazorEngine)项目在升级到 Razor 2.0 和 RazorEngine 3.2.0 后失败

这在以前基于 Razor 1.0 的 RazorEngine (3.0.8) 版本中运行良好。

我有`myInstance`一个类 ( ) 的实例 ( )`MyClass`和扩展方法：

```
namespace MyCompany.Extensions 
{
    public static class MyClassExtensions
    {
        public static string ExtensionMethod(this MyClass thing) 
        {
            // do stuff
        }
    }
} 
```

我想在 RazorEngine 视图中调用它（简化示例，有很多这些方法，并且都以相同的方式失败）：

```
@using MyCompany.Extensions
@using MyCompany
@{
    var myInstance = new MyClass(Model, ...);
}

Some text @myInstance.ExtensionMethod() some more text 
```

这是在 RazorEngine 编译的文本文件中：

```
string parsedResult = RE::Razor.Parse(fileContent, myModel, "testfile.txt"); 
```

问题是这条线（以前可以工作）抛出一个`RuntimeBinderException`：

> “MyCompany.MyClass”不包含“ExtensionMethod”的定义

请注意，如果我将文本文件更改为：

```
Some text @MyClassExtensions.ExtensionMethod(myInstance) some more text 
```

它工作正常，所以我认为它必须找到扩展方法的命名空间。

我的第一个想法是它必须将传递的模型视为 a `dynamic`（因此也将任何从它派生的模型视为`dynamic`），但它知道`RuntimeBinderException`. 由于异常是运行时的，我认为在编译模板时它一定无法识别扩展方法，但为什么会改变呢？

我不确定 3.0.8 和 3.2.0 之间发生了什么变化，或者为什么会出现这种情况。是否需要添加一些内容以便在编译模板时可以找到扩展方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T16:36:47.743

这是[RazorEngine 中的一个错误](https://github.com/Antaris/RazorEngine/issues/83)：`Razor.Compile`工作`TemplateBase<dynamic>`（因此`Model`以及从它派生的所有内容也是`dynamic`如此），这意味着没有扩展方法经过“编译器魔术”将它们转换为静态调用。然后`Razor.Run`将 .`Model`作为正确的类型传递，但扩展方法语法被称为实例方法。

可能很快就会解决这个问题（这个错误只有几天前，这是一个极端情况），但与此同时我有一个解决方法：*在 Razor 模板中**显式键入`Model`*

```
@using MyCompany.Extensions
@using MyCompany
@{
    ExpectedModelClass strongTypeModel = Model as ExpectedModelClass;
    MyClass myInstance = new MyClass(strongTypeModel , ...);
}

Some text @myInstance.ExtensionMethod() some more text 
```

这现在有效，因为即使`Model`仍`dynamic`处于编译时，也不会再传播`myInstance`。

这并不理想，我`Model`现在使用的任何地方都必须是`strongTypeModel`，但这是一个更简单的替换。

# mysql - 对sql中的一行求和

> ID：14561696
> 
> 赞同：3
> 
> 时间：2013-01-28T12:07:53.523
> 
> 标签：mysql, sql

我想将 Punten1、Punten 2、Punten 3、Punten4 的值加总。但我只知道如何对列中的值求和。但不是跨行。有谁知道如何做到这一点。

```
SELECT Punten1, Punten2, Punten3, Punten4
Punten1 + Punten 2 + Punten3 + Punten4 as Puntentotaal
FROM puntentotaal 
```

所以我想在一个新列中总结 Punten1、Punten 2、Punten 3、Punten4 的值：puntentotaal 谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:15:07.390

```
SELECT Punten1, Punten2, Punten3, Punten4, 
Punten1 + Punten2 + Punten3 + Punten4 as Puntentotaal
FROM puntentotaal; 
```

只是一个额外的逗号。我假设您的表作为列的唯一 ID。

```
UPDATE puntentotaal AS t1 INNER JOIN puntentotaal AS t2 SET t1.Puntentotaal = 
(t2.Punten1 + t2.Punten2 + t2.Punten3 + t2.Punten4) where t1.ID = t2.ID; 
```

这将更新所有行中 Puntentotaal 列中 Punten1、Punten 2、Punten 3、Punten4 的总和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:16:30.720

您的问题标题为“跨行总和”，但您想要实现的是跨列总和。

如果您正在寻找“跨行总和”，则有一个名为**SUM(field_name)**的函数将为您提供所有选定行的特定字段的总和，您可以将此函数与 GROUP BY 一起使用

如果您正在寻找“跨列总和”，那么您使用 + 号就可以了，只需按照@paul 的建议添加逗号即可。

# iphone - NSString 值 Crossout iphone

> ID：14561697
> 
> 赞同：2
> 
> 时间：2013-01-28T12:07:55.093
> 
> 标签：iphone, objective-c, ios5

如何在中间划掉 $127.95 的字符串。有什么简单的方法可以用来**Strike**吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:16:25.857

从 iOS6 开始，您可以使用`NSAttributedString`：

```
NSDictionary *attributes = @{NSStrikethroughStyleAttributeName: [NSNumber numberWithInteger:NSUnderlinePatternSolid | NSUnderlineStyleSingle]};

NSAttributedString *attributedString = [[NSAttributedString alloc] initWithString:@"$127.95" attributes:attributes]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:11:13.577

请看一下这个答案：

[iPhone 上的 CoreText 和删除线](https://stackoverflow.com/questions/6579270/coretext-and-strikethrough-on-iphone)

它建议使用此处描述的核心文本：

[http://www.cocoanetics.com/2011/01/befriending-core-text/](http://www.cocoanetics.com/2011/01/befriending-core-text/)

注意：这仅适用于 iOS6。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:53:28.070

使用[https://github.com/mattt/TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)进行`UILabel`替换，它可以很好地完成所有核心文本的繁重工作。

# php - PHP/MySQL：我应该使用什么来管理错误？

> ID：14561703
> 
> 赞同：0
> 
> 时间：2013-01-28T12:08:13.803
> 
> 标签：php, mysql, error-handling

我有一个使用 PHP 和 Mysqli 构建的网站，我应该考虑我的错误处理。

即使我认为我的代码是完美的，当我向公众发布网站时也会出现错误。我发现[这个答案](https://stackoverflow.com/a/1645674)显示了我如何为用户隐藏错误，但开发人员仍然可以看到它们。虽然我不知道这是否真的是我网站的最佳方法。我不希望用户看到丑陋的错误消息产生了我的 PHP 本身，但我可以根据错误设计自己的错误消息。

1.  我应该如何管理这些错误？我应该将它们全部保存在数据库中吗？
2.  我怎么知道可能发生哪些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:10:58.760

PHP 有内置函数来捕捉各种类型的错误：

```
set_error_handler 
```

您应该使用此功能来捕获所有页面的错误，您可以编写自定义代码是否将错误插入数据库，或者写入单独的错误日志文件，或者通过电子邮件立即通知开发人员，您可以决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:26:34.113

```
error_reporting(E_ALL);
ini_set('display_errors','On');

ini_set('error_log', 'error.log');
ini_set('log_errors', 'On'); 
```

如果有任何错误，这些函数将显示错误，它还将在 error.log 中列出错误。如果您想隐藏错误出现在站点上，那么您可以将值从“on”设置为“off”。如果您只想对用户隐藏它而不是对开发人员隐藏它，那么您可以设置“ini_set('display_errors','off');” 所以这些对用户来说是不可见的，但开发人员可以从 error.log 中解决它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:06:28.157

> 我应该如何管理这些错误？

您应该记录它们并分析日志以解决它们（或至少确保您的站点是安全的）。

> 我应该将它们全部保存在数据库中吗？

不 - 您将失去对数据库连接问题的了解。正确的方法是通过本地机器上的 syslog 功能。

> 我怎么知道可能发生哪些错误？

? 他们全部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:12:04.480

我会先使用

```
 try 
    { 
     //your code here 
     } 
 catch(Exception $ex) 
     { 
     echo $ex->getMessage();
     } 
```

在进行数据库查询时。错误处理可以将其登录到文件或类似的东西。这样你就可以捕捉到正在发生的事情并为自己设定需要做的事情......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T13:56:29.110

处理错误是应用程序最重要的方面之一。用户希望它能够工作，但是当发生错误时，他们可能会对您的应用程序失去信心，无论它是谁。我很难学会。

我们使用类似于以下的类：

```
class ErrorHandler
{   
    public static function registerHandlers()
    {
        $inst = new ErrorHandler;
        set_error_handler(array(&$inst, 'errorHandler'), E_ALL);
        set_exception_handler(array(&$inst, 'exceptionHandler'));
        register_shutdown_function(array(&$inst, 'shutdownHandler'));
    }

    public function shutdownHandler()
    {
        if (($error = error_get_last()))
        {
            $this->_clearOutputBuffers();
            // Handle error
        }
    }

    public function errorHandler($errno, $errstr, $errfile, $errline, $errcontext)
    {
        $this->_clearOutputBuffers();
        // Handle error
    }

    public function exceptionHandler(Exception $exception)
    {   
        $this->_clearOutputBuffers();
        // Handle error
    }

    private function _getErrorCode($sMessage, $sFile, $nLine, $nCode)
    {
        $errorCode = sprintf("%u", crc32($sMessage.$sFile.$nLine.$nCode));
    }

    private function _clearOutputBuffers()
    {
        if (count(ob_list_handlers()) > 0)
        {
            ob_clean();
        }
    }
} 
```

这个类能够捕捉到大多数错误，并且在调试方面也能很好地工作。当发现错误时，我们会将所有信息写入一个文件，以便以后参考。此外，我们将开发和生产环境分开，并为其设置单独的错误屏幕。

对于开发环境，我们使用错误屏幕显示文件的提取、堆栈跟踪和变量。

对于生产环境，我们会显示一个错误屏幕，其中包含从 _getErrorCode 返回的错误号。如果客户想就错误与我们联系，他所要做的就是告诉我们号码，我们可以立即查找并将所有数据摆在我们面前。

我附上了我们的开发错误屏幕的屏幕截图。

![错误屏幕的示例图像](../Images/75e09b4365cee8dd77682784bb875f78.png)

# c++ - 虚函数的奇怪行为

> ID：14561710
> 
> 赞同：1
> 
> 时间：2013-01-28T12:08:36.070
> 
> 标签：c++, inheritance

使用以下代码，我希望输出是 Bf Bf DD.f，但我得到的输出是 Bf Bf Bf 这怎么可能，当`DD`派生自`D`which has `f`as virtual 时。

```
class B
{
public:
    void f() { cout << "B.f "; }
};

class D : public B
{
public:
    virtual void f() { cout << "D.f "; }
};

class DD : public D{
public:
    virtual void f() { cout << "DD.f "; }
};

B * b = new B();
B * d = new D();
B * dd = new DD();

b->f();
d->f();
dd->f(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:11:09.137

函数`virtual`从它们被声明的级别`virtual`开始。您首先声明`f` `virtual`in `D`，这意味着动态调度只会从`D`向上发生。`B`不，也不应该知道派生类。

想想编译器如何看待它：

您有一个指向`B`-的指针`B`具有以下定义：

```
class B
{
public:
    void f() { cout << "B.f "; }
}; 
```

既然`f`不是`virtual`，我将继续静态地解决呼叫 - 即`B::f()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:09:39.927

要使动态调度从指向 的指针工作`B`，您需要使`f()`virtual in `B`：

```
class B
{
public:
    virtual void f() { cout << "B.f "; }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T12:09:50.650

您需要设置`B::f()`为virtual，不设置`B::f()`为virtual，它不会出现在B virtual table(vtbl)中，因此`B::f()`被调用而不是派生调用派生类。

```
class B
{
public:
   virtual void f() { cout << "B.f "; }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:29:31.303

一旦你在 B 中声明 f() virtual，这将开始维护一个虚拟表，该表包含派生类的所有其他同名函数的函数指针。这是一个查找表，用于以动态/后期绑定方式解析函数调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T18:32:57.933

当您使用引用或指针调用方法时，编译器会在方法的声明处搜索指针或引用的类型（这里它在`B`带有签名的某些方法的声明中搜索`f()`）。当它找到一个时：

*   如果它没有被标记为`virtual`，那么它将它作为对此类定义的方法的调用来解决 - 这是一个静态绑定。
*   如果它被标记为`virtual`，则调用的方法将是引用或指向的对象的适当之一 - 这是一个动态绑定。

下一个测试是：

```
DD * dd = new DD();
D * d = dd;
B * b = d;

b->f();
d->f();
dd->f(); 
```

一个使用/查看方式不同的单个对象`new DD()`...每种类型都可以被视为您对对象的一种视图。如果您将其视为 a`B`则`f()`做某事，但总是做同样的事情，但如果您将其视为`D`or `DD`，`f()`则做一些不同的事情...

如果你在街上遇到某人，他向你打招呼的标准方式是打招呼，但对于同一个人，当他遇到他的朋友时，他要么打招呼！或哟！：

```
class Person {
public:
  void salute() { cout << "Hello" << endl; }
};
class Friend : public Person {
public:
  virtual void salute() { cout << "Hi!" << endl; }
};
class RoomMate : public Friend {
public:
  virtual void salute() { cout << "Yo!" << endl; }
};
void asACustomer(Person &p) {
   p.salute(); // static binding, we need the standard politeness
}
void asAFriend(Friend &f) {
    p.salute(); // dynamic binding, we want an appropriate message...
}
RoomMate joe;
asCustomer(joe);
asFriend(joe); 
```

使用静态绑定，您在编译时就知道调用了哪个方法；使用动态绑定你不能，你只知道一个合适的绑定。这是子类型多态性的一个关键点。

通常，在为方法混合静态和动态绑定时要小心。

# c# - N数据库列表 进入 IBindingList

> ID：14561714
> 
> 赞同：0
> 
> 时间：2013-01-28T12:08:47.047
> 
> 标签：c#, oop, data-binding, ndatabase

我正在使用[NDatabase](http://ndatabase.codeplex.com/)，但在尝试绑定`IEnumerable<T>`我正在使用基本数据访问层 ( `BaseDAL`) 检索的数据时遇到问题。

```
public IEnumerable<T> GetMany<T>()
{
  using(var odb = OdbFactory("Example.db"))
  {
    return odb.AsQueryable<T>().ToList();
  }
} 
```

`T`在我的例子中是`Employee`.

```
public interface IEmployee
{
  string Username { get; set; }
  List<UserConfiguration> ConfigurationList { get; set; }  
} 
```

本质上我需要一个`List<Employee>`可以用来绑定到网格的（目前我明白了`the underlying datasource doesn't support editing`）。

我知道我需要以某种方式实现`IBindingList`，但是这方面的实现是巨大的！我想知道是否有人可以指出我正确的方向？还是我必须遵循以下原则：

```
public class BindableList<T> : IObjectSet<T>, IBindingList {} 
```

谢谢！

**NDatabase IObjectSet 结构**

```
public interface IObjectSet<TItem> : ICollection<TItem>, IEnumerable<TItem>, IEnumerable
{
  TItem GetFirst();
  bool HasNext();
  TItem Next();
  void Reset();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:18:29.353

傻我...

[`BindingList<T>`](http://msdn.microsoft.com/en-US/library/ms132679%28v=VS.80%29.aspx)

上面需要一个构造函数，`IList`所以我只需要将我的`BaseDAL`方法更改为：

```
public IEnumerable<T> GetMany<T>()
{
  using(var odb = OdbFactory("Example.db"))
  {
    return new BindingList<T>(odb.AsQueryable<T>().ToList());
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:54:46.137

您编写的代码可以通过以下方式改进：

```
public IEnumerable<T> GetMany<T>()
{
  using(var odb = OdbFactory("Example.db"))
  {
    return new BindingList<T>(odb.QueryAndExecute<T>().ToList());
  }
} 
```

此代码没有使用在这种情况下您不需要的所有 Linq to NDatabase 事物（包装器）。

# java - Android: How to make the margin of a button relative to screen width?

> ID：14561719
> 
> 赞同：1
> 
> 时间：2013-01-28T12:08:55.890
> 
> 标签：java, android, xml

for example I want the button's margin to be 1/4 of the screen width (in pixels), what should I do? I prefer to change something in layout xml file instead of coding.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:26:27.973

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:weightSum="4" >

<View
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
/>

<Button
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="2"
    />

<View
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:27:59.173

Use `weightSum` and `layout_weight` to achieve this.

For e.g

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100"
    android:visibility="visible" >

        <Button
            android:id="@+id/sign_in_button"
            android:layout_weight="25"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="testing" />
</LinearLayout> 
```

# javascript - 回调函数中的“this”

> ID：14561723
> 
> 赞同：0
> 
> 时间：2013-01-28T12:09:21.530
> 
> 标签：javascript

我以前用

```
MyClass.prototype.myMethod1 = function(value) {
    this._current = this.getValue("key", function(value2){
        return value2;
    });
}; 
```

如何在回调函数中访问 this 的值，如下所示？

```
MyClass.prototype.myMethod1 = function(value) {
   this.getValue("key", function(value2){
       //ooopss! this is not the same here!    
       this._current = value2;
   });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:12:05.387

```
MyClass.prototype.myMethod1 = function(value) {
    var that = this;
    this.getValue("key", function(value2){
         //ooopss! this is not the same here!
         // but that is what you want
         that._current = value2;
    });

}; 
```

或者您可以让您的`getValue`方法执行回调并[`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)设置为实例（使用[`call`/`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this#call_and_apply)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:12:07.327

在外部范围内声明一个变量来保存你的 this ：

```
MyClass.prototype.myMethod1 = function(value) {
    var that = this;
    this.getValue("key", function(value2){
         that._current = value2;
    });

}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T12:12:33.853

之前将其声明为变量

```
MyClass.prototype.myMethod1 = function(value) {
var oldThis = this;
 this.getValue("key", function(value2){
    /// oldThis is accessible here.
    });

}; 
```

# javascript - 验证 Ember.js 架构

> ID：14561729
> 
> 赞同：1
> 
> 时间：2013-01-28T12:09:38.527
> 
> 标签：javascript, html, model-view-controller, ember.js

我正在努力适应 Ember.js 架构的布局。有人可以给我提示和技巧，以最合适的方式构建我的应用程序。

```
<html>
    <head>
        <script src="../script/library/jquery.js"></script>
        <script src="../script/library/handlebars.js"></script>
        <script src="../script/library/ember.js"></script>
        <script>
            $(document).ready(function(){
                Application = Ember.Application.create();

                Application.ApplicationView = Ember.View.extend({
                    templateName: 'application'
                });

                Application.ApplicationController = Ember.Controller.extend();

                Application.Cat = Ember.Object.extend({
                    name: null,
                    breed: null
                });

                Application.CatView = Ember.View.extend({
                    templateName: 'catCreate'
                });

                Application.CatController = Ember.Controller.extend({
                    content: null,
                    create: function() {
                        alert("controller uploading: " + this.get('content').name);
                    }
                });

                Application.Router = Ember.Router.extend({
                    root: Ember.Route.extend({
                        createCat: Ember.Route.extend({
                            route: '/',
                            connectOutlets: function(router) {
                                router.get('applicationController').connectOutlet('cat', Application.Cat.create());
                            }
                        })
                    })
                });

                Application.initialize();
            });

        </script>
    </head>
<body lang="en">
    <script type="text/x-handlebars" data-template-name="application">
        {{outlet}}
    </script>

    <script type="text/x-handlebars" data-template-name="catCreate">
        <h1>Cat Detail</h1>
        {{view Ember.TextField id="name" valueBinding="content.name"}}<br/>
        {{view Ember.TextField id="breed" valueBinding="content.breed"}}<br/>
        <button {{action "create" target="controller"}}>Done</button>
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:32:14.057

看看这个问题：[有人能指点我一个使用最新路由系统的 ember.js 项目吗？如果它也使用 ember-data，](https://stackoverflow.com/questions/14508362/could-someone-point-me-to-an-ember-js-project-that-uses-the-latest-routing-syste)那么还有一些不错的应用示例。

我个人非常喜欢这个：

[https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences)

它为您提供了有关如何构建文件和使用现代工具开发和部署应用程序的好主意。

# image - 在 win32 windows 程序中拉伸 .gif 图像

> ID：14561731
> 
> 赞同：1
> 
> 时间：2013-01-28T12:09:40.110
> 
> 标签：image, winapi, gif

我正在制作一个应用程序，我正在尝试调整 .gif 动画图像的大小，该图像显示在主窗口内的另一个窗口中。到目前为止，我正在使用 windows.h 中的 SetWindowPos 函数。此功能只是调整窗口大小，而不是图像。

请帮我解决我的问题。我想使用 C++ 语言的 win32 编程来调整 .gif 动画图像的大小。

# php - 在 PHP 中将添加的信息从一个 mysql 表复制到另一个

> ID：14561732
> 
> 赞同：-1
> 
> 时间：2013-01-28T12:09:41.693
> 
> 标签：php, mysql

我在不同的mysql数据库中有两个表。

我想从表 A 复制到表 B。只有一种方法。我需要从表 B 中读取最后一个日期时间，然后检查在读取的日期时间之后是否有任何数据添加到表 A 中。如果添加了一些数据，则复制它。

我试过这个：

如果我刷新页面，它会写一行，但我需要它一次加载所有内容！

```
do
   {

#TABLE A    
$querylastA = "SELECT * FROM `stock` ORDER BY `jrk` DESC LIMIT 1";
$resultlastA = mysql_query($querylastA) or die(mysql_error());
while($rows=mysql_fetch_array($resultlastA)){
$lastcodeA = $rows['datetime'];
}

#TABLE B
$querylastB = "SELECT * FROM `stockcopy` ORDER BY `jrk` DESC LIMIT 1";
$resultlastB = mysql_query($querylastB) or die(mysql_error());
while($rows=mysql_fetch_array($resultlastB)){
$lastcodeB = $rows['datetime'];
}

#TABLE A - NEXT DATE AFTER LAST DATE IN TABLE B
$querynextA = "SELECT datetime FROM stock WHERE datetime > '$lastcodeB' ORDER BY datetime ASC LIMIT 1";
$resultnextA = mysql_query($querynextA) or die(mysql_error());
while($rows=mysql_fetch_array($resultnextA)){
$nextcodeA = $rows['datetime'];
}

   mysql_query("INSERT INTO stockcopy(datetime, data1, data2) SELECT datetime, data1, data2 FROM stock WHERE datetime = '$nextcodeA'");
   echo "Date from table A " . $lastcodeA . "<br>";
   echo "Date from table B " . $lastcodeB . "<br>";
   }
 while ('$lastcodeA' == '$lastcodeB'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:16:16.297

您可以使用`SELECT`语句在表中插入数据，因此您只需将条件放入`SELECT`.

例如：

```
INSERT INTO table_example(foo, bar)
SELECT foo, bar FROM table_example2
WHERE time_condition > {SOME DATE} 
```

这会将`SELECT`语句返回的行插入到 table_example 中，这些行满足时间条件。您需要将 {SOME DATE} 替换为实际日期（不带括号）。

另外，请参阅：[INSERT with SELECT](https://stackoverflow.com/questions/5391344/mysql-insert-with-select)

还有：[跨不同数据库选择列](https://stackoverflow.com/questions/674115/select-columns-across-different-databases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:15:07.640

您可以在几乎不了解 SQL 的情况下做到这一点，但需要一点创造力 :)

创建一个临时表 ( `table_c`)，并复制其中的内容`table_a`。

然后手动（这意味着通过在 phpmyadmim 中运行删除查询）删除不再重要的信息（`DELETE FROM table_c WHERE id < 1000`例如）。

然后，从中导出信息`table_c`并将其导入`table_b`（并删除`table_c`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:29:48.750

问题出在：`while ('$lastcodeA' == '$lastcodeB');`

将其更改为：`while ($lastcodeA != $lastcodeB);`现在它可以工作了！谢谢你们 ：）

# visual-studio-2012 - 有没有办法在创建项目时设置项目的默认命名空间？

> ID：14561734
> 
> 赞同：5
> 
> 时间：2013-01-28T12:09:52.257
> 
> 标签：visual-studio-2012, projects-and-solutions, project-template

在 Visual Studio 中创建项目时，您用于项目的名称用于：

*   为项目文件命名
*   命名项目文件夹
*   为项目生成默认命名空间

前两个值有些相关，因此从约定的角度来看，保持它们相同是有意义的，但是将值用于命名空间会导致问题：

要么将项目名称放入命名空间，导致文件路径非常长（当 MSBuild 超过 Windows 的 248 长度限制时，这通常会导致问题，你会得到一个不遵循正常命名约定的默认命名空间，然后必须用查找和替换来改变。

我已经解决这个问题 12 年了，但它并没有变得更有趣。

在您设置项目时，是否有一些方法可以单独设置这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:38:57.137

在项目创建期间无法做到这一点，但您可以在项目属性 | 之后立即更改默认命名空间。应用 | 默认命名空间

# c# - 同步播放 FLV 数据

> ID：14561737
> 
> 赞同：5
> 
> 时间：2013-01-28T12:09:54.687
> 
> 标签：c#, .net, media-player, rtmp

我只是在调查[http://www.broccoliproducts.com/softnotebook/rtmpclient/rtmpclient.php](http://www.broccoliproducts.com/softnotebook/rtmpclient/rtmpclient.php) RTMP 客户端代码。它工作正常，因此它可以获取数据并将 FLV 文件保存在本地。

[**代码**](http://www.broccoliproducts.com/softnotebook/rtmpclient/Red5Download.cs)非常简单。所以我的问题是：

**1\. 可以同步播放这个流吗？（好吧，由于缓存有一些延迟）（我试图通过 VLC 打开写入文件，但它很忙......）**

**2.任何线索如何实施？**

**！！！这不是这个项目的任何广告！我只需要在 WPF 中创建一些 RTMP 播放器。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T02:10:41.130

如果你有 Cygwin，你可以通过管道输出`tee`

```
rtmpdump -i "rtmp://server/app playpath=mp4:foo.mp4" | tee a.flv | vlc - 
```

这会将输出保存到文件中，同时通过 VLC 播放流。如果您不想安装 Cygwin，我有 [**一个小版本**](http://code.google.com/p/strm/downloads)，只有 3.2 MB。您也可能只找到一个 Windows 版本的`tee`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:15:54.947

一个通用的帖子，直到您提供一些额外的要求。

在 Flash 中，您将创建一个按钮，然后实现以下`ActionScript`.

```
on (press) {
    fscommand("Variable1", "Variable2");
} 
```

然后在 Visual Studio 中，您需要添加`COM Object`对`Shockwave Flash Object`. 您需要确保您`embed`设置为 true。

现在在 Visual Studio 中，您应该能够`Properties`找到`fscommand`允许您以物理方式连接 Flash 影片中的值的位置。

`AxShockwaveFlashObjects._IShockwaveFlashEvents_FSCommandEvent`

这将在 Flash 中收集您的变量。您只需使用`e.command`and`e.arg`例如让收集的项目做某事。如...

```
lbl_Result.Text="The " + e.args.ToString() + " " + e.command.ToString()+ " was clicked."; 
```

现在，您可以将 Flash 电影的数据从 Flash 传输到 Visual Studio。这很简单，很直接。

这将允许您的 C# 应用程序实际继承​​和利用您的 Flash 视频。

*要考虑的事情：*

*   确保您已设置`embed`为 true。这就是将所有内容物理保存`Path References`在您的 Flash 对象中的内容。否则可能会调用无效路径。

*其他参考帮助：*

1.  在您的项目中打开`Solution Explorer`.
2.  右键单击`Reference`和`Add Reference`。
3.  去`COM Object`。

> 这些是可用的对象：

*   `Shockwave ActiveX`
*   `Flash Accessibility`
*   `Flash Broker`
*   `Shockwave Flash`

上述解决方案将让您在其本机环境中实际使用 Flash，您只需简单地传递变量数据或您希望以这种方式在 C# 中实现的控件。这样，您实际上可以直接使用 RTMP 到 Flash。您的 C# 应用程序将只公开 Flash 对象。

这是一种通用方法，当您提供一些额外信息时，我会更新以尝试更好地为您提供帮助。还有一些库，例如 F-In-The-Box、LibRTMP，它们也可能有所帮助。

就像我说的那样，上面的内容非常通用；但它会调用您在 Flash 视频对象中记录的任何质量；那么你的 C# 可以像这样简单地调整它们：

```
<% MyYoutubeUtils.ShowEmebddedVideo("<object width="425" height="344"><param name="movie" value="http://www.youtube.com/v/gtNlQodFMi8&hl=en&fs=1"></param><param name="allowFullScreen" value="true"></param><embed src="http://www.youtube.com/v/gtNlQodFMi8&hl=en&fs=1" type="application/x-shockwave-flash" allowfullscreen="true" width="425" height="344"></embed></object>") %> 
```

或者...

```
public static string ShowEmbeddedVideo(string youtubeObject)
{
    var xdoc = XDocument.Parse(youtubeObject);
    var returnObject = string.Format("<object type=\"{0}\" data=\{1}\"><param name=\"movie\" value=\"{1}\" />",
        xdoc.Root.Element("embed").Attribute("type").Value,
        xdoc.Root.Element("embed").Attribute("src").Value);
    return returnObject;
} 
```

您可以在此处找到该主题：[附加嵌入说明和详细信息。](https://stackoverflow.com/questions/2547101/purify-embedding-youtube-videos-method-in-c-sharp)

这就是您可以将 Flash 放入 C# 的方式，也有一些方法可以将您的 C# 输出到 Actionscript。但是，如果没有更多关于你试图做什么的细节，我真的不能做更多的这些一般性的反应。

请记住，这是假设您尝试`FLV`在应用程序中存储数据，或将数据从 C# 聚合到 Flash。我需要更多细节来提供进一步帮助。我不太确定为什么需要 C# 以及您实际尝试做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T13:01:22.330

[VLC](http://www.videolan.org/vlc/index.html)可以播放大多数任何源，并具有多种语言的绑定。.net 肯定在名单上。

一个来源：[样品](http://libvlcnet.codeplex.com/)
更多信息：[这里](http://wiki.videolan.org/.Net_Interface_to_VLC)

看起来[FluorineFX](http://www.fluorinefx.com/)也可以与 RTMP 服务器通信。不确定播放，但可以从 .net 访问 SharedObjects 及其同类。

# xaml - Windows 应用商店应用程序：转发鼠标事件

> ID：14561738
> 
> 赞同：0
> 
> 时间：2013-01-28T12:09:59.850
> 
> 标签：xaml, events, windows-store-apps, ui-automation, bing-maps

我有一个全屏 Bing 地图控件。在顶部，我想覆盖各种其他控件。

```
<Grid>
<maps:Map x:Name="Map" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />

<Grid Style="{StaticResource LayoutRootStyle}" Background="Transparent"
      x:Name="InnerGrid">
  <Grid.RowDefinitions>
    <RowDefinition Height="132" />
    <RowDefinition Height="*" />
  </Grid.RowDefinitions>

  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="700" />
    <ColumnDefinition Width="350" />
  </Grid.ColumnDefinitions>

  ... Content ... 
```

问题是 InnerGrid 消耗了我需要地图控件接收的鼠标事件。将背景设置为透明没有任何用处。

所以，我找到了 RoutedEvents 的东西：

```
internal sealed partial class PageCodeBehind : Page
{
    public PageCodeBehind()
    {
        InitializeComponent();
        InnerGrid.AddHandler(PointerPressedEvent, new PointerEventHandler(OnPointerPressedEvent), true);
        InnerGrid.AddHandler(PointerMovedEvent, new PointerEventHandler(OnPointerMovedEvent), true);
    }

    private void OnPointerPressedEvent(object sender, PointerRoutedEventArgs pointerRoutedEventArgs)
    {
        // I can hit a breakpoint here...

        var peer = FrameworkElementAutomationPeer.FromElement(GigMap) as MapAutomationPeer;
        peer.RaiseAutomationEvent(...); 
```

所以 - 我可以捕获事件，但我不知道如何在 Map 控件上触发事件。看过自动化同行的东西 - 似乎他们关心比鼠标按下更高级的概念，例如打开工具提示等。

知道如何将所有事件从 InnerGrid 控件转发到 Map 控件吗？

非常感谢您的帮助，乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:13:35.047

好的 - 我找到了解决方法。在 InnerGrid 上设置 Background="{x:Null}" 使其转发事件。像往常一样在 MSDN 上精美的无证 :-)

如果有人知道更多信息，我仍然想知道任何其他可用的方法。

非常感谢，乔恩

# gremlin - 通过仅考虑propertyname = value的顶点找到2个顶点之间的所有路径

> ID：14561743
> 
> 赞同：3
> 
> 时间：2013-01-28T12:10:10.973
> 
> 标签：gremlin, orientdb

我有一个遍历用例，如下所示。orientDb 支持吗？

1）查找从节点 1 到节点 2 的所有路径。仅遍历那些具有属性 xyz="val1" 的节点 2）查找最短路径。仅遍历那些具有属性 xyz="val1" 的节点 3）查找最长路径。仅遍历那些节点具有属性 xyz="val1"

```
abstract class TraversGraph{
     public  Path getPath(Node src,Node dest, Propery property,Value value);
} 
```

注意：请注意我在大写字母中提到的条件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T13:11:14.943

您可以使用 Gremlin 获取两个节点之间的路径。您可以首先找到所有路径，因此所有这些路径中都包含最短和最长的路径。这是一个示例： ![在此处输入图像描述](../Images/4a18952699eea8481e590743c43f1dc7.png) 如图所示，从 A 到 B 有 3 条路径（A->B、A->F->C->B、A->E->D->C-> B)，但节点 F 没有值为“val1”的属性“xyz”，因此不应包含此路径。

代码：

```
gremlin> g = new TinkerGraph()
==>tinkergraph[vertices:0 edges:0]
gremlin> a = g.addVertex(null,[name: "A", xyz: "val1"])
==>v[0]
gremlin> b = g.addVertex(null,[name: "B", xyz: "val1"])
==>v[1]
gremlin> c = g.addVertex(null,[name: "C", xyz: "val1"])
==>v[2]
gremlin> d = g.addVertex(null,[name: "D", xyz: "val1"])
==>v[3]
gremlin> e = g.addVertex(null,[name: "E", xyz: "val1"])
==>v[4]
gremlin> f = g.addVertex(null,[name: "F"])
==>v[5]
gremlin> g.addEdge(a, b, "KNOWS")
==>e[6][0-KNOWS->1]
gremlin> g.addEdge(a, e, "KNOWS")
==>e[7][0-KNOWS->4]
gremlin> g.addEdge(a, f, "KNOWS")
==>e[8][0-KNOWS->5]
gremlin> g.addEdge(f, c, "KNOWS")
==>e[9][5-KNOWS->2]
gremlin> g.addEdge(e, d, "KNOWS")
==>e[10][4-KNOWS->3]
gremlin> g.addEdge(d, c, "KNOWS")
==>e[11][3-KNOWS->2]
gremlin> g.addEdge(c, b, "KNOWS")
==>e[12][2-KNOWS->1] 
```

并在节点A和节点B之间遍历（这里我们不过滤属性“xyz”），所以我们得到三个路径：

```
gremlin> a.out('KNOWS').loop(1){it.loops<100}{true}.has('name', 'B').path{it.name}
==>[A, B]
==>[A, F, C, B]
==>[A, E, D, C, B] 
```

并添加属性“xyz”的过滤器

```
gremlin> a.out('KNOWS').loop(1){it.loops<100 && it.object.hasNot('xyz', null)}{true}.has('name', 'B').path{it.name}
==>[A, B]
==>[A, E, D, C, B] 
```

因此我们得到最短路径：[A, B] 和最长路径：[A, E, D, C, B]

英语不是我的母语，所以如果有任何困惑，请随时与我联系。

# winjs - 在翻转视图子项中启用鼠标滚动

> ID：14561750
> 
> 赞同：1
> 
> 时间：2013-01-28T12:10:41.610
> 
> 标签：winjs

在我的 WinJS 应用程序中，我使用了一个翻转视图，其中包含一个 Listview。

listview 作为一个长内容，所以它是可滚动的：滚动条是可见的，我可以用手指在触摸屏上滚动，但鼠标滚轮不起作用。

看了flipview源码后，在我的listview上加了*win-interactive*类，现在可以用鼠标滚轮滚动了，但是问题是滚动也适用于flipview容器：鼠标滚动直接在不同的翻转视图项目。

有没有办法在不修改翻转视图行为的情况下启用列表视图的滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:43:44.460

是的，您可以订阅在您的和从那里`mousewheel`触发的事件到.`ListView``stopPropagation()``FlipView`

# c++ - C ++ Apache2模块未加载

> ID：14561754
> 
> 赞同：0
> 
> 时间：2013-01-28T12:10:58.213
> 
> 标签：c++, c, module, apache2

我无法让 apache2 模块工作。一段时间后，我设法将其编译为 .dll 文件。我正在使用 Visual Studio Express 2012。

```
module AP_MODULE_DECLARE_DATA hello_module; 
```

它正在导出以下模块。但是，当我尝试使用以下行在 apache2 中加载它时：

```
LoadModule module_hello modules/module_hello.dll 
```

我收到以下错误：

> 在文件 C:/Program Files (x86)/Apache Group/Apache2/modules/module_hello.dll 中找不到 API 模块结构“module_hello”：没有错误

我在某处读到出口装饰可能是原因，所以我尝试了 LoadModule _module_hello 和 LoadModule __module_hello 都没有成功。

对于这个问题，任何人都有解决方案或朝着正确方向轻推？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:45:20.423

好吧，由于隧道视觉和缺乏休息时间，我犯了一个愚蠢的错误。该结构实际​​上被声明为 hello_module 而不是 module_hello。我为浪费你的时间道歉

# android - 如何制作时尚的微调器？

> ID：14561767
> 
> 赞同：0
> 
> 时间：2013-01-28T12:11:34.993
> 
> 标签：android

我尝试在我的`Android`应用程序中创建一个时尚的小宽度微调器，而不是[默认的粗微调器](https://imgur.com/I3Q5gUf)。

我试图更改项目的背景，但向下箭头从微调器中消失 - 如此[图片](https://imgur.com/sXoQs8a)

如何获得小宽度微调器？

```
<Spinner
  android:id="@+id/lgnspinner"
  android:prompt="@string/network_prompt"
  android:layout_weight="1"
  android:layout_width="0dp"
  android:background="#ffffff"
  android:layout_marginRight="45dp"
  android:layout_marginLeft="45dp"
  android:layout_height="wrap_content"
  android:textColor="#000000" 
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:19:07.307

尝试这个，

```
cityadapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

# php - Instagram 实时订阅发送空的 POST 请求

> ID：14561770
> 
> 赞同：1
> 
> 时间：2013-01-28T12:11:46.480
> 
> 标签：php, json, instagram

我有一个问题，Instagram 向我发送了实时订阅的空数据。这是我的步骤

我正在注册订阅

```
root@132701-10002:/var/www/realtime# curl -F 'client_id=MYSECRET'      -F 'client_secret= MYSECRET'      -F 'object=tag'      -F 'aspect=media'      -F 'object_id=newyork'      -F 'callback_url=http://myurl/realtime'      https://api.instagram.com/v1/subscriptions/ 
```

Instagram 回答我

```
{
    "meta": {
        "code": 200
    },
    "data": {
        "object": "tag",
        "object_id": "newyork",
        "aspect": "media",
        "callback_url": "http://myurl/realtime",
        "type": "subscription",
        "id": "2838731"
    }
} 
```

没关系。

比我尝试使用此脚本接受 instagram 请求：

```
<?php
if (@$_GET["hub_challenge"])
{
  echo $_GET["hub_challenge"];
}
$myString = file_get_contents('php://input');
$answer = json_decode($myString);
$ALL = date("F j, Y, g:i a")." ".print_r($answer,true)."\r\n";
file_put_contents('activity.log', $ALL, FILE_APPEND);
?> 
```

在活动中由空查询组成：

```
January 28, 2013, 12:09 pm 
January 28, 2013, 12:09 pm 
January 28, 2013, 12:09 pm 
January 28, 2013, 12:09 pm 
January 28, 2013, 12:09 pm 
January 28, 2013, 12:09 pm 
January 28, 2013, 12:09 pm 
January 28, 2013, 12:10 pm 
January 28, 2013, 12:10 pm 
January 28, 2013, 12:10 pm 
January 28, 2013, 12:10 pm 
January 28, 2013, 12:10 pm 
January 28, 2013, 12:10 pm 
January 28, 2013, 12:10 pm 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T13:48:09.853

我尝试向您的回调 URL 发送 POST 请求，这是我得到的：

```
curl -X POST x.x.x.x/realtime
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>301 Moved Permanently</title>
</head><body>
<h1>Moved Permanently</h1>
<p>The document has moved <a href="http://x.x.x.x/realtime/">here</a>.</p>
<hr>
<address>Apache/2.2.22 (Ubuntu) Server at x.x.x.x Port 80</address>
</body></html> 
```

我认为 Instagram 不支持 301 重定向。因此，您可能必须更改回调 URL 以添加尾部斜杠。

所以你的回调 URL 应该是`http://x.x.x.x/realtime/`

# css - 带有覆盖 div 的 IE7 z-index 问题

> ID：14561771
> 
> 赞同：1
> 
> 时间：2013-01-28T12:11:47.320
> 
> 标签：css, internet-explorer-7

我的页面上有这个（简化的）DOM：

```
<div id="Cover" style="display: none;"></div>
<div class="body">
    <div id="header">
        <div class="controlContainer">
            <div id="FirstSelectorContainer">
                <div id="FirstLink"><a href="/scriptlessfallback">Open Link</a></div>
                <div id="FirstLinkChoice"><a href="/test">I should be clickable</a></div>
            </div>
        </div>
    </div>
</div> 
```

`#Cover`有这个 CSS：

```
#Cover
{
    background-color: white;
    filter: alpha(opacity=50);
    opacity: 0.5;
    -moz-opacity: 0.50;
    z-index: 600;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
} 
```

`#FirstLinkChoice`有这个CSS：

```
#FirstLinkChoice
{
    width: 616px;
    height: 77px;
    position: absolute;
    right: 144px;
    border: 1px solid #424242;
    z-index: 800;
    background-color: white;
    padding: 4px;
    text-align: left;
    display: none;
} 
```

此脚本将点击事件添加到`#FirstLink`：

```
$(document).ready(function () {
    if ($("#FirstLink").length) {
        $("#FirstLink").click(function () { $("#FirstLinkChoice").show(); dimOn(); return false; });
    }
}); 
```

`display`（dimOn，只需使用 CSS属性激活封面。）

期望的结果是当有人点击`#FirstLink`封面越过页面并且内容`#FirstLinkChoice`可供选择时。

这似乎适用于除 IE7 之外的所有浏览器，它会`#Cover`覆盖整个页面，包括`#FirstLinkChoice`尽管 z-index 较低。

我需要改变什么才能让它在 IE7 中工作？不幸的是，我在生产中被这种嵌套结构所困扰。

我完全可以使用基于 Javascript 的解决方案（没有 javascript，链接将退回到具有与弹出窗口类似的信息的页面）或仅适用于 IE7 的特殊 CSS，因为我将使用条件样式表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:17:49.590

嵌套在应该被覆盖`#FirstLinkChoice`的元素内可能是原因。尝试放置在外面。`.body``#Cover``#FirstLinkChoice``.body`

例如：

```
<div id="Cover" style="display: none;"></div>
<div id="FirstLinkChoice"><a href="/test">I should be clickable</a></div>
<div class="body">
    ...
</div> 
```

# java - 如何使用 JSR 303（Bean 验证）？

> ID：14561772
> 
> 赞同：6
> 
> 时间：2013-01-28T12:11:49.883
> 
> 标签：java, bean-validation, hibernate-validator

我阅读了许多关于 JSR 303 规范的教程，但我没有看到任何可用于生产的示例。到处都描述了如何获取`Set<Constraintviolation<T>>`对象。

例子：

```
ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
validator = factory.getValidator();
Set<ConstraintViolation<Car>> violations = validator.validate(car); 
```

**但接下来呢？**我想通知方法调用者（客户端）方法参数处于不一致状态。

我必须做什么`Set<ConstraintViolation<Car>>`？我需要手动迭代 `Set<ConstraintViolation>`，将所有错误消息收集到一个字符串中，然后用这些消息抛出异常？

还是存在一些更方便的开箱即用方式？

或者最好`validate`在每个 bean 中提供方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:52:32.453

我会接受你的第一个建议 - 迭代约束违规。您不一定要创建包含所有这些内容的错误消息。只显示一条错误消息`bean <bean> is not valid`并将约束违规设置为异常的属性可能是一个好主意。

也许您需要将约束违规转换为另一个对象，因为否则您将使您的大部分应用程序依赖于 bean 验证 api。这可能是一个太强的耦合。

您的问题是，如何处理违反约束是非常具体的用例。在许多情况下，您不想通知调用者违反约束，而是通知其他对象。例如，在 Web 表单中，您希望通知您的视图模型它也应该显示这些约束违规。抛出异常只是另一回事。请注意，`ConstraintViolationException`在大多数情况下，这不是一个特定的例外，而是一个特定于应用程序的例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:49:54.640

它还取决于您如何使用 Bean Validation。您描述的用例是您自己直接使用 Bean Validation API。在这种情况下，您将得到一个*Set>*作为 validate 调用的结果。你如何处理它取决于你。但是，许多技术集成了 Bean Validation，并且经常隐藏对 Bean Validation API 的所有直接调用。例如 JPA。如果您使用 JPA 并且 Bean Validation 在类路径上，实体将在生命周期事件（pre-persist/update/delete）和*javax.validation.ConstraintViolationException上自动验证*在验证错误的情况下将被抛出。在 JSF 中类似，使用 Bean Validation 对表单元素的验证是自动发生的，并且错误也可以突出显示。因此，除非您想使用普通的 Bean Validation API，否则您需要寻找有关您选择的技术如何与 JSR 303 集成的示例。

# database - Prestashop：将产品页面中的附加字段保存在数据库中

> ID：14561779
> 
> 赞同：0
> 
> 时间：2013-01-28T12:12:12.687
> 
> 标签：database, field, product, prestashop

我在产品页面中添加了 2 个文本框，以便从用户那里为每个产品接收高度和宽度。
我使用了文本框输入，就像购买块表单中的数量一样。
现在我想将此文本框保存在数据库中，并在每个购物车和产品的购物车页面和订单页面中使用它们。
我在 cartcontroller.php 中添加了 2 个变量，例如函数 preProcess() 中的 $qty。
现在如何将它们保存在数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:20:51.610

如果我理解，您希望您的客户在他们订购的产品中提交自定义值。

在这种情况下，您应该寻找 PrestaShop 的“产品定制”功能：http: [//doc.prestashop.com/display/PS15/Adding+Products+and+Product+Categories#AddingProductsandProductCategories-ManagingCustomization](http://doc.prestashop.com/display/PS15/Adding+Products+and+Product+Categories#AddingProductsandProductCategories-ManagingCustomization)

您可以在产品页面上添加文本框，客户将输入值，这些值将显示在购物车和订单详细信息中。

# android - 适用于 Android 的不规则/自定义形状的 ImageButton

> ID：14561782
> 
> 赞同：0
> 
> 时间：2013-01-28T12:12:17.270
> 
> 标签：android, user-interface, transparent, imagebutton, viewgroup

我想根据按钮图像的透明区域为 Android 创建形状不规则的图像按钮。

基本上，如果您单击按钮的透明区域，而不是处理事件，它应该将其“向下”传播到其下方的视图。因此，如果您重叠其中两个按钮，您实际上可以单击`'bottom'`一个（由 重叠`'top'`），如果您单击 的透明区域`'top'`但不透明区域`'bottom'`。

基于相同原理的 iOS 工作解决方案是例如 OBShapedButton [http://www.cocoacontrols.com/platforms/ios/controls/obshapedbutton](http://www.cocoacontrols.com/platforms/ios/controls/obshapedbutton)

* * *

我的第一个想法是创建一个`ImageButton`子类 ( `CustomShapedButton`) 来实现这个功能。以下代码可用于确定您是否单击了透明区域，给定实际的可绘制状态和`MotionEvent`.

```
public class CustomShapedButton extends ImageButton {
[...]

    if (e.getAction() == MotionEvent.ACTION_UP)
    {
        // click coordinates of (MotionEvent e)
        float x = e.getX();
        float y = e.getY();

        // get current state of drawable and the color under the click
        StateListDrawable s = (StateListDrawable)this.getBackground();
        int color = ((BitmapDrawable)s.getCurrent()).getBitmap().getPixel((int)x, (int)y);

        Log.d(TAG, "custom shaped button clicked at x: "+x+" y: "+y+" with color: "+color);

        if (color != 0)
        {
            // normal region clicked, should count as click
            // ...
        }
        else
        {
            // transparent region clicked, should NOT count as click
            // ...
        }
    }

[...]
} 
```

我应该把上面的代码放在哪里以获得正确的功能？我试图覆盖`public boolean onTouchEvent(MotionEvent e)`和`public boolean dispatchTouchEvent(MotionEvent e)`方法，但没有运气（也许我只是没有为每种情况找到正确的返回值）。

根据 Android API 文档，`public boolean interceptTouchEvent(MotionEvent e)`这种行为看起来像是一种可能的解决方案，但它是在`ViewGroup`类中定义的，因此不能用于`ImageView`子类。

如果您有处理/传播触摸事件的经验并且知道我的问题的答案，请回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T23:25:07.373

我在控制触摸方面也遇到过类似的问题。我的解决方案是扩展 WebView 以便它处理自己的操作。我也用一个大的 TextView 做了同样的事情。您可以在此 zipfile 中找到第一个的源代码：

[http://this-voice.org/dnlds/MoDaBrowserGNU.zip](http://this-voice.org/dnlds/MoDaBrowserGNU.zip)

至于按钮，我不知道这是否会有所帮助。但是将图像放在常规按钮上的结果与使用 ImageButton 的结果不同。您可能会在那里找到满足您需求的东西。此外，也许您已经尝试过了，但是您可以使用 XML 中的边距将一个按钮放在另一个按钮上。至于向下传递新闻，您将不得不在我的 WebView 解决方案中截取新闻坐标并“模拟”重叠。我使用引号是因为所有这些东西都是模拟的，对吧？努力让用户感觉他正在做你想让他体验的事情。引擎盖下的内容并不重要。

# c - 我得到“greedy.c:17:1: error: expected identifier or '(' {" 有人可以帮忙吗？它指的是 int main(void) 之后的行

> ID：14561791
> 
> 赞同：-4
> 
> 时间：2013-01-28T12:12:43.610
> 
> 标签：c, identifier, cs50

```
/**************************************************
 * Greedy.c
 *
 * CS50x pset1
 * Daniel Riley
 *
 * A program that determines the minimum amount of
 * coins used for change owed
 *
 *
 **************************************************/
 #include <stdio.h>
 #include <cs50.h>
 #include <math.h>

 int main (void);
 {

 float change;
 int cents = round (change * 100);
 int coins = 0;

 do
     {
     printf("How much change is required? ");
     change = GetFloat();
     }
 while(change < 0);

 do
     {
     cents -= 25;
     coins ++;
     }
 while(cents >= 25);

 do
     {
     cents -= 10;
     coins ++;
     }
 while(cents >= 10);

 do
     {
     cents -= 5;
     coins ++;
     }
 while(cents >= 5);

 do
     {
     cents -= 1;
     coins ++;
     }
 while(cents >= 1);

 printf("%d\n", coins);
 return 0;
 } 
```

我在编译时收到错误预期标识符'（'请帮助。它是第 17 行 int main(void) 之后的行。据我所知，我已经正确地将所有函数括起来。程序必须要求用户进行更改和确定用于找零的最少硬币数量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:16:16.093

不是后面的线`int main(void)`，是后面的线`int main (void);`。换句话说，删除第`;`16 行的 in。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:18:20.613

```
int main()
{
} 
```

错过`;`第 16 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:02:09.763

去掉`main()`函数后面的分号..

# wpf - 如何使应用程序从类库的 app.config 文件中动态读取密钥

> ID：14561796
> 
> 赞同：0
> 
> 时间：2013-01-28T12:12:59.847
> 
> 标签：wpf, app-config, config, configuration-files, configurationmanager

我的要求如下。1）我想使用应用程序设置来读取位置路径并在我的项目中使用它来读取该文件夹中的文件。--- 我通过创建带有路径的设置来实现这一点，我曾经从项目中的设置中读取路径，如下所示

```
 Properties.Settings.Default.XMLModelPath 
```

2）现在的实际要求是我希望类库的 app.config 在 bin 中可用，这样如果以后需要任何更改以及每次运行应用程序时，我都可以更新路径，该项目的设置应该读取这个文件并更新它的值。

有没有办法实现这一点或提出任何其他可能的方法。？

```
 <?xml version="1.0" encoding="utf-8" ?>
   <configuration>
       <configSections>
       <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
           <section name="MyClass.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
       </sectionGroup>
       </configSections>
     <applicationSettings>
        <MyClass.Properties.Settings>
          <setting name="XMLModelPath" serializeAs="String">
            <value>C:\Resources\</value>
          </setting>
        </MyClass.Properties.Settings>
     </applicationSettings>
   </configuration> 
```

这是我的 app.config 类文件。我希望它在 bin 中可用，并且每次运行我的应用程序时都会更新项目的设置。

# eclipse - 扩展 Eclipse 包资源管理器是不可能的吗？

> ID：14561800
> 
> 赞同：5
> 
> 时间：2013-01-28T12:13:11.123
> 
> 标签：eclipse, package-explorer

是否可以通过绑定自定义 navigatorContent 来扩展 Eclipse 的 Package Explorer？

当我用我的自定义 navigatorContent 测试 Project Explorer 时，就像下面的 xml 代码一样，我的 contentProvider 和 labelProvider 与 Project Explorer 配合得很好。

但是对于包资源管理器，这意味着我在“viewerId”属性中用“org.eclipse.jdt.ui.PackageExplorer”替换了“org.eclipse.ui.navigator.ProjectExplorer”，但事实并非如此。

所以我想确认Package Explorer是否可以通过自定义navigatorContent扩展。

这是我的 plugin.xml 的摘要。

```
<extension
    point="org.eclipse.ui.navigator.viewer">
    <viewer
        viewerId="org.eclipse.ui.navigator.ProjectExplorer">
    </viewer>
    <viewerContentBinding
        viewerId="org.eclipse.ui.navigator.ProjectExplorer">
        <includes>
            <contentExtension
                pattern="abc.pkg.explorer.navigator.propertiesContent">
            </contentExtension>
        </includes>
    </viewerContentBinding>
</extension>
<extension
    point="org.eclipse.ui.navigator.navigatorContent"> 
    <navigatorContent
        id="abc.pkg.explorer.navigator.propertiesContent"
    .. omitted below. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:23:09.927

我找到了答案。

这是不可能的，因为“包资源管理器”不使用“CommonNavigator”。

如果你想扩展“包资源管理器”，你应该做另一种方式。

也就是说，您需要制作一个扩展“CommonNavigator”的自定义视图，然后将“Java Element”navigatorContent 与您的自定义视图绑定。您可以在包含“Package Explorer”的“org.eclipse.jdt.ui”插件中找到“Java Element”navigatorContent。

# r - 数据帧的逻辑合并

> ID：14561801
> 
> 赞同：0
> 
> 时间：2013-01-28T12:13:13.947
> 
> 标签：r

我有两个 data.frames，其中一个包含一式三份进行的许多实验的特定顺序（DF1 设计表）；另一个包含这些实验的结果（一式三份，DF2 结果表）。第一个数据帧具有随机的实验顺序，结果表具有不同的顺序。

DF1 的前六列包含实验的因素，例如温度、试剂当量等……结果表 DF2 也具有相同的六列以及包含实验结果的其他列，例如产量, 各种试剂的转换等...

这些表的不同之处在于行数。结果表的行数比设计表少三行。

如何合并这两个表，以便将结果附加到设计中，以便设计表中的实验参数与实验表中的适当结果相匹配。

DF1

```
T1  A1  B1
T2  A1  B1
T1  A2  B1
T2  A2  B1
T1  A1  B2
T2  A1  B2
T1  A2  B2
T2  A2  B2 
```

但一式三份。

DF2

```
T1  A2  B2  1
T1  A2  B1  3
T2  A2  B1  3
T1  A1  B1  1
T2  A1  B2  2
T2  A2  B2  2
T2  A1  B1  2 
```

再次一式三份，注意少了一行。请注意，结果列比显示的多。

至于所有这些工作的重点：我正在研究是否可以将包 RcmdrPlugin.DoE 应用于一些真实数据。

至于我尝试过的……好吧，我考虑过将 sapply、cbind 和 ifelse 与逻辑函数一起使用

```
sapply(
DF3 <- ifelse( DF1[,1] == DF2[,1] | DF1[,2] == DF2[,2] | DF2[,3] == DF2[,3],
cbind(DF1, DF2[,3]), NA)
) 
```

我在这段代码中遇到了 NA 的问题。但在我到达 NA 之前，我发现我有一个论点 'FUN' is missing error。

我认为我要么离题要么非常接近答案，但两者中的哪一个。谁能指出我正确的方向，好吗？

编辑...我将标题更改为 A、B、C 和 D 的七行数据的样本，这些都是两个 data.frames 共有的。

```
 run.no run.no.std.rp Block.ccd   A     B C     D
C0.17      1         C0.17         0 400 147.5 5 2.675
C0.7       2          C0.7         0 450 120.0 2 4.000
C0.6       3          C0.6         0 350 175.0 2 4.000
C0.3       4          C0.3         0 450 120.0 8 4.000
C0.4       5          C0.4         0 350 120.0 8 4.000
C0.16      6         C0.16         0 350 120.0 2 1.350
C0.15      7         C0.15         0 450 120.0 2 1.350 
```

另一个 data.frame 具有标题 A、B、C 和 D 以及包含产量、转换和其他结果的列。我需要第一个 data.frame 与最后标记的产量等完全相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T12:17:36.013

该`data.table`包（允许 x[y] 语法）使这项工作变得异常简单。假设`df1`和`df2`是你的data.frames：

```
require(data.table)
dt1 <- data.table(df1, key=c("V1","V2","V3"))
dt2 <- data.table(df2, key=c("V1","V2","V3"))
dt2[dt1]

#    V1 V2 V3 V4
# 1: T1 A1 B1  1
# 2: T1 A1 B2 NA
# 3: T1 A2 B1  3
# 4: T1 A2 B2  1
# 5: T2 A1 B1  2
# 6: T2 A1 B2  2
# 7: T2 A2 B1  3
# 8: T2 A2 B2  2 
```

给你想要的结果。

**编辑：**我使用了您编辑的数据，它似乎有效。

```
df1 <- structure(list(V1 = structure(c(1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L), 
                     .Label = c("T1", "T2"), class = "factor"), 
                 V2 = structure(c(1L, 1L, 2L, 2L, 1L, 1L, 2L, 2L), 
                 .Label = c("A1", "A2"), class = "factor"), 
                 V3 = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L), 
                 .Label = c("B1", "B2"), class = "factor")), 
                 .Names = c("V1", "V2", "V3"), 
                 class = "data.frame", row.names = c(NA, -8L))

df2 <- structure(list(V1 = structure(c(1L, 1L, 2L, 1L, 2L, 2L, 2L), 
                      .Label = c("T1", "T2"), class = "factor"), 
                      V2 = structure(c(2L, 2L, 2L, 1L, 1L, 2L, 1L), 
                      .Label = c("A1", "A2"), class = "factor"), 
                      V3 = structure(c(2L, 1L, 1L, 1L, 2L, 2L, 1L), 
                      .Label = c("B1", "B2"), class = "factor"), 
                      run.no = 1:7, 
                      run.no.std.rp = structure(c(3L, 7L, 6L, 4L, 5L, 2L, 1L), 
                      .Label = c("C0.15", "C0.16", "C0.17", "C0.3", "C0.4", "C0.6", "C0.7"), 
                      class = "factor"), 
                      Block.ccd = c(0L, 0L, 0L, 0L, 0L, 0L, 0L), 
                      A = c(400L, 450L, 350L, 450L, 350L, 350L, 450L), 
                      B = c(147.5, 120, 175, 120, 120, 120, 120), 
                      C = c(5L, 2L, 2L, 8L, 8L, 2L, 2L), 
                      D = c(2.675, 4, 4, 4, 4, 1.35, 1.35)), 
                      .Names = c("V1", "V2", "V3", "run.no", "run.no.std.rp", 
                      "Block.ccd", "A", "B", "C", "D"), 
                      row.names = c("C0.17", "C0.7", "C0.6", "C0.3", "C0.4", 
                      "C0.16", "C0.15"), class = "data.frame")

require(data.table)
dt1 <- data.table(df1, key=c("V1", "V2", "V3"))
dt2 <- data.table(df2, key=c("V1", "V2", "V3"))
dt2[dt1]
#    V1 V2 V3 run.no run.no.std.rp Block.ccd   A     B  C     D
# 1: T1 A1 B1      4          C0.3         0 450 120.0  8 4.000
# 2: T1 A1 B2     NA            NA        NA  NA    NA NA    NA
# 3: T1 A2 B1      2          C0.7         0 450 120.0  2 4.000
# 4: T1 A2 B2      1         C0.17         0 400 147.5  5 2.675
# 5: T2 A1 B1      7         C0.15         0 450 120.0  2 1.350
# 6: T2 A1 B2      5          C0.4         0 350 120.0  8 4.000
# 7: T2 A2 B1      3          C0.6         0 350 175.0  2 4.000
# 8: T2 A2 B2      6         C0.16         0 350 120.0  2 1.350 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:12:15.250

您的标题提到了“合并”，但您似乎没有尝试过该`merge`功能。（或者我错过了什么？）

这是您的前两个示例`data.frame`：

```
DF1 <- structure(list(T1 = c("T2", "T1", "T2", "T1", "T2", "T1", "T2"
  ), A1 = c("A1", "A2", "A2", "A1", "A1", "A2", "A2"), B1 = c("B1", 
  "B1", "B1", "B2", "B2", "B2", "B2")), .Names = c("T1", "A1", 
  "B1"), class = "data.frame", row.names = c(NA, -7L))

DF2 <- structure(list(T1 = c("T1", "T2", "T1", "T2", "T2", "T2"), A2 = c("A2", 
  "A2", "A1", "A1", "A2", "A1"), B2 = c("B1", "B1", "B1", "B2", 
  "B2", "B1"), X1 = c(3L, 3L, 1L, 2L, 2L, 2L)), .Names = c("T1", 
  "A2", "B2", "X1"), class = "data.frame", row.names = c(NA, -6L)) 
```

以下是您`merge`从基础 R 中使用的方法。 `by.x`and参数应包括您在两个s`by.y`中应该共有的列的名称。`data.frame`该`all`论点说不要删除任何“空白”，而是用它们填充`NA`。

```
merge(DF1, DF2, 
      by.x = c("T1", "A1", "B1"), 
      by.y = c("T1", "A2", "B2"), 
      all = TRUE)
#   T1 A1 B1 X1
# 1 T1 A1 B1  1
# 2 T1 A1 B2 NA
# 3 T1 A2 B1  3
# 4 T1 A2 B2 NA
# 5 T2 A1 B1  2
# 6 T2 A1 B2  2
# 7 T2 A2 B1  3
# 8 T2 A2 B2  2 
```

这是 Arun 创建`merge`的两个s 的结果。`data.frame`请注意，我们不需要指定要合并的列，因为它们具有共同的列名。

```
merge(df1, df2, all = TRUE)
#   V1 V2 V3 run.no run.no.std.rp Block.ccd   A     B  C     D
# 1 T1 A1 B1      4          C0.3         0 450 120.0  8 4.000
# 2 T1 A1 B2     NA          <NA>        NA  NA    NA NA    NA
# 3 T1 A2 B1      2          C0.7         0 450 120.0  2 4.000
# 4 T1 A2 B2      1         C0.17         0 400 147.5  5 2.675
# 5 T2 A1 B1      7         C0.15         0 450 120.0  2 1.350
# 6 T2 A1 B2      5          C0.4         0 350 120.0  8 4.000
# 7 T2 A2 B1      3          C0.6         0 350 175.0  2 4.000
# 8 T2 A2 B2      6         C0.16         0 350 120.0  2 1.350 
```

# dynamics-crm-2011 - Xrm.Page.getAttribute("").getValue() 没有得到实际值

> ID：14561802
> 
> 赞同：2
> 
> 时间：2013-01-28T12:13:17.477
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, xrm

我在 CRM 2011 中有一个带有关闭代码（下拉列表）和解决方案（多行文本）字段的自定义实体。

奇怪的是发生了什么，这就是下一句话，没有得到实际的字段值：

```
var detailsSet = Xrm.Page.getAttribute("aux_solution").getValue(); 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:45:19.030

正如评论中所解释的，我的问题是该字段没有采用实际值，因为焦点在它上面。在检查值之前移动到另一个字段是我解决这个问题的方法。我希望可以帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T10:29:40.200

这是因为当您专注于该领域时，对象模型不会获得刷新的数据。如果您想获得值而无需在外部单击，则需要使用旧的 document.getElementById 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-06T10:20:22.963

如果是选项集，则应使用 eiter getSelectedOption() 或 getText()

所以试试

```
var detailsSet = Xrm.Page.getAttribute("aux_solution").getText(); 
```

有关更多详细信息，请参阅[此](https://msdn.microsoft.com/en-us/library/gg334409.aspx#BKMK_getText)

# ruby - 如何在 cucumber.feature 测试中嵌入 ruby 变量

> ID：14561804
> 
> 赞同：3
> 
> 时间：2013-01-28T12:13:21.797
> 
> 标签：ruby, cucumber

我有以下黄瓜测试

```
Scenario Outline: 
  Given site <url> is available
  Then I see all all content

Examples:
|url|
|"google.com| 
```

在测试用例中是动态的，并且是在 ruby​​ 代码中生成的。

问题：我想用 ruby​​ 变量替换 google.com，例如 <%URL%>。是否可以在黄瓜测试和评估中嵌入 ruby​​ 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:22:51.563

我认为您不应该在功能步骤上这样做。如果你在这里需要一个 ruby​​ 变量，这意味着你做错了什么。检查周围的一些例子

[链接在这里](https://stackoverflow.com/questions/5681249/good-cucumber-examples-in-the-wild)

这些功能应该是明文，以便任何人都可以阅读，尤其是非程序员。所以这就是为什么你现在应该开始混合代码和特性。代码在您的步骤定义中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:31:17.350

`eval`如果您信任此功能文件中的代码，您可以将其字符串化。但由于@SnakeSanders 概述的原因，这可能不是一个好主意。

# css - Selenium 记录和回放一个 CSS 元素

> ID：14561806
> 
> 赞同：1
> 
> 时间：2013-01-28T12:13:34.680
> 
> 标签：css, selenium, selenium-ide

当我尝试播放录制的脚本时，在其中单击 CSS 下拉菜单并从中选择一个选项时，出现以下错误：“找不到元素”。

这里没有像加载这样的东西，所以它需要一些时间并且元素不可见。这只是一个普通的网页。

请帮助我解决此问题并继续录制脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:17:16.730

尝试在底层元素上调用[`mouseOver`](http://release.seleniumhq.org/selenium-core/1.0/reference.html#mouseOver)命令，这应该会提示下拉菜单出现，并且您缺少的元素将可见。

# c# - 将对象反序列化为 MongoDB C# 驱动程序的接口

> ID：14561809
> 
> 赞同：14
> 
> 时间：2013-01-28T12:13:46.650
> 
> 标签：c#, mongodb, mongodb-.net-driver

我正在开发一个使用**MongoDB**（带有 C# 驱动程序）和**DDD**的项目。

我有一个类（*聚合*），它有一个类型是接口的属性。在另一个类中，我实现了这个接口。此类具有另一个属性，该属性类型是接口，并使用另一个实现的类进行设置。

下面的代码解释得更好：

```
// Interfaces
public interface IUser {
    Guid Id { get; set;}
    IPartner Partner{ get; set; }
}

public interface IPartner {
    IPhone Mobile { get; set; }
}

public interface IPhone {
    string number { get; set; }
}

// Implemented Classes
public class User: IUser {
    [BsonId(IdGenerator = typeof(GuidGenerator))]
    public Guid Id { get; set; }

    [BsonIgnoreIfNull]
    public IPartner Partner { get; set; }
}

public struct Partner : IPartner {
    public IPhone Mobile { get; set; }
}

public struct Phone : IPhone {
    public string Number { get; set; }
} 
```

好吧，当我调用该`MongoCollection<User>.Insert()`方法时，它会引发两个异常：

> System.IO.FileFormatException：反序列化类 .User 的 Partner 属性时出错：反序列化类 .Partner 的 Phone 属性时出错：值类 .Mobile 无法反序列化。---> System.IO.FileFormatException：反序列化类 .Partner 的 Mobile 属性时出错：无法反序列化值类 .Phone。---> MongoDB.Bson.BsonSerializationException：值类 .Phone 无法反序列化。

然后，我在互联网上搜索以发现如何将类型反序列化为接口，我想我必须有办法做到这一点：使用强制转换映射属性，使用`BsonClassMap.RegisterClassMap`或编写自定义 BSON 序列化程序。

我需要知道这两种方式中哪一种更好以及如何实施。

**注意**：我需要一个不修改接口的解决方案，因为他们的项目不能包含任何外部引用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T19:13:41.733

好吧，我在尝试得到这个答案时发现了很多问题。

首先，MongoDB C# 驱动程序**在反序列化接口时**确实存在一些问题，就像 Craig Wilson 在这个问题评论中所说的那样，正如[问题页面中所描述的](https://jira.mongodb.org/browse/CSHARP-485)那样。

这个问题的安全实现，就像我之前说的，真的可能是一个自定义的 BS​​ON 序列化器或一个特定的类映射，使用`BsonClassMap.RegisterClassMap`.

所以，我已经实现了类映射并且问题仍然存在。

期待这个问题，我发现**异常与驱动程序的另一个问题有关：反序列化时的问题`structs`**。

我已将项目回滚到初始状态（没有类映射或自定义序列化程序）并将结构类型更改为类类型，**并且它工作正常**。

在简历中，此异常错误与结构反序列化有关，与接口反序列化无关。

* * *

无论如何，这是一个真正的问题，第二个问题需要被视为一个错误而不是改进，就像第一个问题一样。

您可以在以下链接中找到问题：

*   [https://jira.mongodb.org/browse/CSHARP-485](https://jira.mongodb.org/browse/CSHARP-485)
*   [https://jira.mongodb.org/browse/CSHARP-94](https://jira.mongodb.org/browse/CSHARP-94)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-12T00:10:46.067

`[BsonSerializer(typeof(ImpliedImplementationInterfaceSerializer<IReviewExpert, ReviewExpert>))] public IReviewExpert Expert { get; set; }`

为我工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-19T10:19:38.030

我们在 mongo 驱动程序的 1.x 分支上，遗憾的是没有罗伯特贝克`ImpliedImplementationInterfaceSerializer`建议的那样，这似乎是一个很好的解决方案。为此，我创建了自己的序列化程序，允许您为接口成员指定具体类型。

```
public class ConcreteTypeSerializer<TInterface, TImplementation> : BsonBaseSerializer where TImplementation : TInterface
{
    private readonly Lazy<IBsonSerializer> _lazyImplementationSerializer;

    public ConcreteTypeSerializer()
    {
        var serializer = BsonSerializer.LookupSerializer(typeof(TImplementation));

        _lazyImplementationSerializer = new Lazy<IBsonSerializer>(() => serializer);
    }

    public override object Deserialize(BsonReader bsonReader, Type nominalType, Type actualType, IBsonSerializationOptions options)
    {
        if (bsonReader.GetCurrentBsonType() == BsonType.Null)
        {
            bsonReader.ReadNull();
            return default(TInterface);
        }
        else
        {
            return _lazyImplementationSerializer.Value.Deserialize(bsonReader, nominalType, typeof(TImplementation), options);
        }
    }

    public override void Serialize(BsonWriter bsonWriter, Type nominalType, object value, IBsonSerializationOptions options)
    {
        if (value == null)
        {
            bsonWriter.WriteNull();
        }
        else
        {
            var actualType = value.GetType();
            if (actualType == typeof(TImplementation))
            {
                _lazyImplementationSerializer.Value.Serialize(bsonWriter, nominalType, (TImplementation)value, options);
            }
            else
            {
                var serializer = BsonSerializer.LookupSerializer(actualType);
                serializer.Serialize(bsonWriter, nominalType, value, options);
            }
        }
    }
} 
```

用法如下：

```
[BsonSerializer(typeof(ConcreteTypeSerializer<IMyInterface,MyClass>))]
public IMyInterface MyProperty {get; set;} 
```

关于代码的一些注意事项 - 它实际上所做的只是延迟加载适当具体类型的序列化程序，然后使用适当的具体类型而不是接口将所有序列化/反序列化调用传递给该序列化程序。

它还检查该类型是否实际上是预期的类型，如果不是，则仅找到该类型的默认序列化程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-15T21:22:30.910

注册一个具体的序列化程序对我不起作用，因为我想要存储的对象包括一个具有 6 个不同实现的接口列表。使用 CosmosDB 可以很好地存储一些 Newtonsoft 设置。它将实现的类型序列化到对象中并调用它`$type`。所以，我想我会做同样的事情来让它在 MongoDB 中工作。

```
public class BsonTypeSerializer<T> : IBsonSerializer<T>
{
    public Type ValueType { get => typeof(T); }

    public T Deserialize(
        BsonDeserializationContext context, 
        BsonDeserializationArgs args)
    {
        var document = BsonSerializer.Deserialize<BsonDocument>(context.Reader);
        var typeStr = document.GetValue("$type").AsString;
        var type = Type.GetType(typeStr);
        var result = (T) BsonSerializer.Deserialize(document, type);
        return result;
    }

    public void Serialize(
        BsonSerializationContext context, 
        BsonSerializationArgs args,
        T value)
    {
        var typeStr = value.GetType().FullName;
        BsonDocument document = value.ToBsonDocument();
        document.Add(new BsonElement("$type", BsonValue.Create(typeStr)));
        BsonSerializer.Serialize(context.Writer, typeof(BsonDocument), document);
    }

    public void Serialize(
        BsonSerializationContext context,
        BsonSerializationArgs args,
        object value)
        => Serialize(context, args, (T) value);

    object IBsonSerializer.Deserialize(
        BsonDeserializationContext context,
        BsonDeserializationArgs args)
        => Deserialize(context, args);
} 
```

你会`T`在注册时给它你的界面。具体类型将存储在 Document 中。

但是，如果您重构类名甚至它们所在的命名空间，这将中断。因此，像这样存储所有内容并不是一个好主意。我已经将它用于一次性配置文件。

如果您正在为“真实数据”设计数据模型，这是一个坏主意。您正在将数据与编写它的代码完全绑定。这使得从您以后可能创建的处理相同数据的其他项目中读取数据变得不必要的复杂。

# php - 我想知道给定下拉列表的值存储在数据库中的 magento 货币的位置

> ID：14561815
> 
> 赞同：1
> 
> 时间：2013-01-28T12:14:04.933
> 
> 标签：php, magento

我想知道给定下拉列表的值存储在数据库中用于 magento 货币的位置，代码用于显示 magento 货币的下拉列表。

```
<select id="currency_options_allow" class=" select multiselect" multiple="multiple"   
size="10" name="groups[options][fields][allow][value][]">

<option value="AFN">Afghan Afghani</option>
<option value="ALL">Albanian Lek</option>
<option value="DZD">Algerian Dinar</option>

</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:13:48.147

货币列表属于区域设置，可以在 /lib/Zend/Locale/Data/en.xml 中找到

# objective-c - 将文本字段输入与字符串进行比较

> ID：14561818
> 
> 赞同：0
> 
> 时间：2013-01-28T12:14:18.060
> 
> 标签：objective-c, xcode4, uitextfield

您能否告诉我为什么这段代码没有将文本字段中的输入文本与“admin”字符串进行比较？

```
if ([usertext.text isEqualToString:@"admin"]) {                 
     if ([inputText length] <= 8) {
            return [self method2];
     }
     return [self method];
} 
```

编辑：实际代码

```
-(void)method1{ 
  NSString *usertext=[uname text]; 
  NSString *inputText = [typepassword text]; 

  if ([usertext isEqualToString:@"admin"]) { 
     if( [inputText length] <= 8 ) { 
        return [self method2]; 
     } 
     return [self method]; 
  } 
  moviesViewController *moviesViewcont = [[moviesViewController alloc] init]; 
  [self.navigationController pushViewController:moviesViewcont animated:YES]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:27:38.067

您的代码看起来不错并且没有错误。一些可能的错误原因是

1.  `usertext`包含一个带空格的字符串。

    在这种情况下，`isEqualToString`与“admin”的比较将失败。

2.  你检查错了`UITextField`，或者变量`usertext` 是`nil`。

3.  您错误地认为第一个条件失败。您是否使用断点进行过调试？

编辑：在 if 条件之前放置一些 NSLog 语句

```
NSLog(@"Username text : %@",usertext); 
NSLog(@"password text : %@", inputText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:19:08.400

我认为您正在尝试查看输入中是否包含“管理员”一词？

该方法`isEqualToString:`进行了精确比较，这意味着 usertext.text 需要完全是“admin”才能做到这一点。此外，如果这是真的，那么字符串长度将为 5，因此无需检查它是否小于 8。

如果你想知道它是否被包含，你需要这样做：

```
if ([usertext.text rangeOfString:@"admin"].location != NSNotFound) {
    ...
} 
```

# alm - 在 ubuntu 12.10 64 位服务器下安装 tuleap 时卡在配置 mailman

> ID：14561826
> 
> 赞同：0
> 
> 时间：2013-01-28T12:14:41.250
> 
> 标签：alm, tuleap

我按照[此链接](https://tuleap.net/plugins/forumml/message.php?group_id=101&topic=12118&list=1)在 ubuntu 12.10 服务器 64 位中安装 tuleap，但卡在“配置 mailman”步骤中。好像只能将光标移动到特定语言，然后按“回车”，但是卡在这一步，无法进行下一步，为什么？

![在此处输入图像描述](../Images/a949570dd547f86c8ad1c4c3c30d479b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:03:26.237

不确定你的问题是什么。如果是“如何使用”这个界面的问题，你应该通过突出显示它来选择一种语言，然后按«空格»来选择它。然后您可以通过按“输入”键移动到«ok»。

在这种情况下，选择英语并继续！

——马丁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T20:31:12.900

空格键 - 只需使用空格键选择您需要的语言，然后使用 Tab 将光标移至 OK，然后按 Enter。

# jquery - 为 IE 8 调试 jquery，为什么它不起作用？

> ID：14561829
> 
> 赞同：1
> 
> 时间：2013-01-28T12:14:47.787
> 
> 标签：jquery, internet-explorer

我正在使用 jquery 制作一个非常简单的画廊，它适用于所有浏览器，但在 IE8 和 7 中失败。

任何想法为什么以及如何调试它？

```
//Gallery system, single and compare pages
function makeGallery (whichThumb,whichMainImage,whichImageWrap) {
    $(whichThumb).live("click", function() {
        $(whichMainImage).hide();
        $(whichImageWrap).css('background-image', "url('images/no-image.png')");
        var i = $('<img />').attr('src',this.href).load(function() {
            $(whichMainImage).attr('src', i.attr('src'));
            $(whichImageWrap).css('background-image', 'none');
            $(whichMainImage).fadeIn();
        });
        return false; 
    });
} // End makeGallery 
```

发生的事情是图像更改为`no-image.png`，之后没有任何反应......我正在设置 jsfiddle 进行演示......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:16:47.480

您应该反向设置 onload 回调和 src ：

```
 var i = $('<img />');
  i.load(function() {
        $(whichMainImage).attr('src', i.attr('src'));
        $(whichImageWrap).css('background-image', 'none');
        $(whichMainImage).fadeIn();
  });
  i.attr('src',this.href); 
```

在旧的 ie 版本上，如果浏览器足够快来获取图像（例如从缓存中），则不会调用回调，并且使用此顺序通常是最佳实践。

由于 live 已被弃用很长时间并且现在已从最新版本中删除，因此您应该使用[on](http://api.jquery.com/on/)代替。

# c++ - C++ 为一般设计问题找到最合适的设计模式

> ID：14561833
> 
> 赞同：0
> 
> 时间：2013-01-28T12:14:51.980
> 
> 标签：c++

试图将实际问题与理论等价物联系/联系起来，我已经筋疲力尽了。

我将选择一个非常简单的例子来说明我的问题。

假设我有一个 Worker 类：

```
class Worker {
private : // default access modifier 
     int workerId;
}; 
```

假设我有一个 Table 类：

```
class Table {
private : // default access modifier 
    int tableId;
}; 
```

假设我有一个 ResturantManager 类：

```
class ResturantMangager
private: // default access modifier
    list<Table*> allTables;
    list<Worker*> allWorkers;
public:
    // the function should tell the worker that he should call one of its function,
    // its decision to what table to put the client returned by its function 
    // must be somehow updated in the allTables (mark the table he chose to put the client
    // as unavailable).
    void putClientInTable(const Worker& worker, const Client& client);
}; 
```

现在我想允许工作人员将一个客户端放在一个可用的表中，然后我希望餐厅的类数据成员 allTables 将此表（通过 ID 查找）标记为不可用。这意味着 Worker 应该能够决定选择哪个表（或者 ResturantManager 告诉他 - 我看不出如何以不同的方式实现它），然后必须更新 ResturantManager 的 allTables 。

我正在寻找最适合这个想法的设计模式（ [http://sourcemaking.com/design_patterns ）。](http://sourcemaking.com/design_patterns)

有没有适合这个问题的设计模式？

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:37:02.803

“*我只是不确定是否有适合这个想法的设计模式并且我可以使用它。它总是比再次发明轮子更好*？

一个非常令人愉快的方法。但是要正确回答您的问题，您应该问自己**“什么想法？”** . 存在解决**一般**问题的模式。您的问题涉及餐馆和工人，因此，您可能会发现选择特定模式很麻烦。

此外，没有在所有情况下都可以采用的“神圣”设计模式。没有适合建模餐厅、汽车或其他东西的设计模式。你必须从你的模型中*抽象*出这些细节，并弄清楚你正在解决的问题的本质是什么。

你想在你的班级之间建立什么样的关系？这些关联应如何导航？

程序不是静态数据库：它们对你的数据*做*一些事情，你的数据结构应该以最适合它们的方式设计，以适合你的**算法**应该做的处理。很少有“普遍好”的设计这样的东西。如果有人在那里告诉你他的，请带着怀疑的态度听他的。

您的程序是否应该找出某个客户坐在哪张桌子上？它应该找出哪些顾客坐在哪张桌子上吗？是否应该找出哪些服务员在为哪个顾客或哪张桌子服务，或者每个服务员在一天中为同一张桌子服务了多少次？

换句话说，您的程序的**操作要求是什么？**执行上述查找的频率如何？插入是否比查找更频繁？通过客户姓名或表格 ID 进行查找，比仅在整组表格/服务员/客户上进行简单迭代以打印出报告的频率更高？

如果你不明确*它应该适合什么，*你就找不到*合适*的设计。所以总结一下，你应该做两件事：

 *1.  *确定（或至少尝试做出合理的假设）您的程序的操作要求；*
2.  *通过抽象术语推理来选择适当的设计模式，即删除特定于您的应用程序领域的细节。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:35:33.503

正如我所看到的，您想随时了解所有表格的状态吗？

一种设计理念是在您的父类或主类中维护全局数据集（在您的示例中，餐厅经理类中的 Table* allTables）。- 在您的工作人员类中编写函数，该函数将 Table* 的指针作为要处理的参数之一。- 使用指向主类中数据集的指针调用此函数。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T12:47:54.500

一个情侣的想法。

*   您的餐厅经理可能只是餐厅，因为它包含桌子。管理器不包含表。:-)

*   工人和桌子应存放在容器中。STL 提供了很多。

*   函数 PutClientInTable 可以是 Table 类的成员。这样，您可以通过“查看”表格来判断表格是否被占用（如果您将“GetIsOccupied()”添加到 Table 类中）。

*   餐厅可以提供一个公共函数“GetNextAvailableTable”供工人调用。*

# sql - SQL Server 查询跟踪

> ID：14561837
> 
> 赞同：0
> 
> 时间：2013-01-28T12:15:04.547
> 
> 标签：sql, sql-server

我正在尝试捕获我们公司使用的打包应用程序生成的 SQL 查询代码。我需要针对 SQL Server 后端开发自定义 SQL 报告，因为该应用程序（实际上是 PowerBuilder 应用程序）在报告方面很弱。不幸的是，软件供应商没有提供任何信息来将应用程序表单映射到基础表。所以我希望能够在测试环境中打开应用程序，并在打开各种表单时捕获发送到服务器的 SQL。

我知道我应该使用 SQL Profiler，但如果它不可用，我还有其他选择吗？就 SQL Profiler 而言，我知道我可以购买 SQL Server 的 Developer 版本，只要我不针对生产运行它。

谢谢。

韦恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:19:39.773

您可以尝试按照以下方式运行查询，然后尝试选择您感兴趣的 SQL：

```
SELECT deqs.last_execution_time AS [Time], dest.TEXT AS [Query]
FROM sys.dm_exec_query_stats AS deqs
CROSS APPLY sys.dm_exec_sql_text(deqs.sql_handle) AS dest
ORDER BY deqs.last_execution_time DESC 
```

（在您的报告运行时运行查询）

# scala - Scala中的LRUCache？

> ID：14561845
> 
> 赞同：13
> 
> 时间：2013-01-28T12:15:16.993
> 
> 标签：scala, caching, java, lru

我知道 Guava 有[一个优秀的缓存库](http://code.google.com/p/guava-libraries/wiki/CachesExplained)，但我正在寻找一些更 Scala/功能友好的东西，我可以在其中执行类似`cache.getOrElse(query, { /* expensive operation */})`. 我还查看了[Scalaz 的备忘录](https://stackoverflow.com/questions/3640823/what-type-to-use-to-store-an-in-memory-mutable-data-table-in-scala)，但没有 lru 到期。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-30T15:42:40.160

Spray 人有一个使用 Futures的[喷雾缓存模块。](http://spray.io/documentation/spray-caching/)有一个普通的 LRU 版本和一个允许您指定明确的生存时间的版本，之后条目会自动过期。

Futures 的使用显然允许您编写不会阻塞的代码。不过，真正酷的是它解决了“雷声大雨点”问题作为奖励。比如说，对于不在缓存中的同一个条目，一堆请求同时进入。在一个简单的缓存实现中，一百个线程可能会错过缓存中的那个条目，然后跑去为那个缓存条目生成相同的数据，但当然其中 99% 只是浪费精力。你真正想要的是只有一个线程去生成数据，所有 100 个请求者都可以看到结果。如果您的缓存包含 Future，这很自然会发生：第一个请求者立即在缓存中安装 Future，因此只有第一个请求者未命中。所有 100 个请求者都会为生成的结果获得该 Future。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-28T21:38:10.333

[在Twitter 的 Scala Util 库](https://twitter.github.io/util/docs/com/twitter/util/LruMap.html)中找到了我正在寻找的东西

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-30T13:28:35.620

基于 Java LinkedHashMap 并公开为 Scala mutable.Map 的 LRUCache 解决方案

```
import java.util.Collections.synchronizedMap

import scala.collection.JavaConversions._
import scala.collection.mutable

class LRUCache[K, V](maxEntries: Int)
  extends java.util.LinkedHashMap[K, V](100, .75f, true) {

  override def removeEldestEntry(eldest: java.util.Map.Entry[K, V]): Boolean 
     = size > maxEntries

}

object LRUCache {
  def apply[K, V](maxEntries: Int): mutable.Map[K, V] 
    = synchronizedMap(new LRUCache[K, V](maxEntries))
} 
```

当 map size > maxEntries 最后最近使用的条目将被删除。

对于 LRU 策略，LinkedHashMap 第三个构造函数参数应该设置为 true。 `LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder)`

使用示例：

```
val cache = LRUCache[String, Int](1000)
val key = "key1"
val value = 111

cache.get(key) shouldBe None
cache += key -> value
cache.get(key) shouldBe Some(value)
cache(key) shouldBe value 
```

# crystal-reports - Crystal Reports 11：将 PNG 添加到 OLE 对象

> ID：14561847
> 
> 赞同：1
> 
> 时间：2013-01-28T12:15:20.060
> 
> 标签：crystal-reports, png, png-transparency

我正在尝试向我的 Crystel Reports 11 报告中的 OLE 对象添加具有透明度的 PNG 图像。

当我运行报告时，图像只是变黑。

有没有办法解决这个问题，或者水晶报表不支持 PNG？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:45:16.867

CR 确实支持 PNG（以及 BMP、TIFF、JPEG 和 WMF），但不*正式*支持透明度。不过，这并不是说没有解决方法。

一种选择是将叠加图像转换为 WMF，将其插入报告中，然后将图像放置在您可能拥有的任何其他图像的顶部（通过右键单击菜单上的“移至前面”选项）。详细信息在这里：[向 Crystal Reports 添加具有透明度的图像](https://stackoverflow.com/questions/847204/add-an-image-with-transparency-to-crystal-reports)

# java - 从 Oracle ADF 中 java 代码中的 URL 获取参数

> ID：14561851
> 
> 赞同：2
> 
> 时间：2013-01-28T12:15:25.183
> 
> 标签：java, oracle, oracle-adf

我在从 java 代码中的 URL 获取参数时遇到了一些问题。我有这样的网址：

```
http://127.0.0.1:7101/Application6-ViewController-context-root/faces/view1?_adf.ctrl-state=x8y1lwhxd_3&ttt=ttt 
```

我想要做的就是从 url 中读取值（参数 ttt 应该给出 ttt 作为结果）。

我有 Java 类和 JSF 页面（其中包含一个按钮）。单击该按钮后，我想在控制台中打印 ttt 参数。我试过这样的事情：

```
HttpServletRequest request = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
System.err.println("GET :" + request.getParameter("ttt")); 
```

但输出为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:28:55.760

尝试这个
`Map <String,String> map=FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();`
`String tttValue=map.get("ttt");`

# java - 使用 Java 访问 CD-ROM

> ID：14561863
> 
> 赞同：4
> 
> 时间：2013-01-28T12:16:26.607
> 
> 标签：java, audio, javasound, cd

我想问一下是否有可能通过 Java 中的声音库访问 cdrom 设备。

我想做的是使 CD 模拟静音。我用google搜索了很久，但是没有关于这种操作的信息。我认为这是微不足道的或非常复杂的。

这个简单的代码列出了我的混音器：

```
try
{
    Mixer.Info [] mixerList = AudioSystem.getMixerInfo();
    for (Mixer.Info mixerInfo : mixerList)
    {
        System.out.println();
        System.out.println("MIXER: "+ mixerInfo.getName());
        Mixer mixer = AudioSystem.getMixer(mixerInfo);
        Line.Info[] li = mixer.getSourceLineInfo();
        System.out.println("LINES:");
        for (Line.Info info2 : li)
        {
            System.out.println(info2.toString());
        }

    }
} 
catch (Exception e)
{
    e.printStackTrace();
} 
```

输出是：

```
混音器：主声音驱动器
线路：
接口 SourceDataLine 支持 8 种音频格式，以及至少 32 字节的缓冲区
支持 8 种音频格式的接口 Clip，以及至少 32 字节的缓冲区

混音器：扬声器（Realtek 高保真音频）
线路：
接口 SourceDataLine 支持 8 种音频格式，以及至少 32 字节的缓冲区
支持 8 种音频格式的接口 Clip，以及至少 32 字节的缓冲区

MIXER：主要声音捕捉驱动程序
线路：

MIXER：桌面麦克风（电影院 - Mi
线路：

混音器：麦克风（瑞昱高清
线路：

MIXER：端口扬声器（Realtek High Definiti
线路：

MIXER：端口桌面麦克风（Cinema - Mi
线路：
MICROPHONE 源端口

MIXER：端口麦克风（Realtek High Defini
线路：
MICROPHONE 源端口

```

但是没有像cd模拟这样的设备。当我尝试使用从混音器获取特定端口时`Port.Info.COMPACT_DISC`出现异常`no such device`。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:20:05.683

看看[java-avm](http://java-avm.sourceforge.net/)库：

> java-avm (Audio Video Media) 是一个 Java API，用于访问和控制磁盘驱动器，特别是 CD-ROM 和 CD-R(W) 驱动器、可移动驱动器和回送设备。
> 
> ...
> 
> 光盘专用：
> 
> *   通过音量调节控制 CD 音频播放。

# python - 与我的本地计算机相比，为什么 App Engine 显示不同的浮点舍入结果？

> ID：14561864
> 
> 赞同：5
> 
> 时间：2013-01-28T12:16:29.847
> 
> 标签：python, google-app-engine

如果您将以下内容放入[App Engine Shell](http://shell.appspot.com/)中，您将获得`'50.49'`. 这个结果在 2.5 和 2.7 运行时都是一致的。

```
 >> a = '%0.2f' % (round(float(u'50.485'), 2),)
 >> a
'50.49' 
```

但是，如果我将相同的东西放入运行 python 2.7.1 的本地 MacBook Pro 中，我会得到`'50.48'`.

```
 >> a = '%0.2f' % (round(float(u'50.485'), 2),)
 >> a
'50.48' 
```

为什么会有所不同？如何才能在本地计算机和 App Engine 的服务器之间获得一致性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:51:03.950

显然，Google App Engine 使用“float”C 类型（IEEE 754 单精度），而本地 Python 使用“double”代替（IEEE 754 双精度）。

我怀疑 CPython 有一个配置开关来使用“float”而不是“double”，但还没有找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:41:15.843

有趣的是，官方 Python 教程中涵盖了这个确切的主题。

浮点运算：问题和限制
[http://docs.python.org/2/tutorial/floatingpoint.html](http://docs.python.org/2/tutorial/floatingpoint.html)

> 其他惊喜随之而来。例如，如果您尝试将值 2.675 舍入到小数点后两位，您会得到这个
> 
> ```
> >>>
> >>> round(2.675, 2)
> 2.67 
> ```
> 
> 内置 round() 函数的文档说它四舍五入到最接近的值，从零开始四舍五入。由于小数部分 2.675 恰好在 2.67 和 2.68 之间，您可能会期望这里的结果是（二进制近似）2.68。不是，因为当十进制字符串 2.675 转换为二进制浮点数时，它再次被二进制近似值替换，其精确值为
> 
> ```
> 2.67499999999999982236431605997495353221893310546875 
> ```
> 
> 由于这个近似值比 2.68 更接近 2.67，因此向下舍入。
> 
> **如果您关心的是小数中途情况的舍入方式，您应该考虑使用小数模块。**顺便说一下，decimal 模块还提供了一种很好的方法来“查看”存储在任何特定 Python 浮点数中的确切值
> 
> ```
> >>>
> >>> from decimal import Decimal
> >>> Decimal(2.675)
> Decimal('2.67499999999999982236431605997495353221893310546875') 
> ```

尽管使用了 FORTRAN，但官方 Python 教程 ( [http://www.lahey.com/float.htm ) 中链接的一篇文章正确地描述了 IEEE 754 的真正含义：](http://www.lahey.com/float.htm)

> 不同的计算机使用不同的位数来存储浮点数。**即使使用相同的 IEEE 格式来存储数字，由于中间寄存器的大小，也会出现计算差异。**为了增加可移植性并确保结果一致，我建议不要在 FORTRAN 中比较实数的精确相等性。

因此，如果您真的关心这一点，那么一定要使用内置的十进制模块（或 cdecimal 模块，如果性能是一个问题，请在此处获得[http://pypi.python.org/pypi/cdecimal/2.3 ）。](http://pypi.python.org/pypi/cdecimal/2.3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:08:11.157

其他答案是正确的，所以我不会就`round`函数的行为说任何话，但是如果您想获得一致的结果，您可以跳过`round`，因为您使用的是`'%0.2f'`示例中显示的字符串格式 ( )。

```
>> a = '%0.2f' % (float(u'50.485'))
>> a
'50.48' 
```

# java - 正则表达式多重负前瞻

> ID：14561867
> 
> 赞同：3
> 
> 时间：2013-01-28T12:16:39.397
> 
> 标签：java, regex

这是我的正则表达式模式：`[Ss]ection\s\d+(?![a-zA-z])(?!</ref>)`

例如，它应该匹配：`section 5`或`section 50`

例如，它不应该**匹配**：`section 5A`or `section 5</ref>`or `section 5A</ref>`or`section 50A`

问题是实际上它匹配错误：[http ://regexr.com?33ien](http://regexr.com?33ien)

虽然不知道模式有什么问题......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T12:28:21.740

也许试试`[Ss]ection\s\d++(?![a-zA-z])(?!</ref>)`。++ 是[所有格量词](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)。这个量词类似于贪心量词，除了它阻止它匹配的字符串片段被正则表达式的后面部分使用。

例子

```
System.out.println("ababab".matches("(ab)++ab")); 
// prints false since last "ab" is possessed by (ab)++ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:24:18.660

匹配没有错：在您的正则表达式中，您希望“部分”后跟一个或多个数字，而不是某些文本或“”

这是真的`section 50A`：

`section 5`紧随其后`0A`，这不在您的负面预测中。

您可以执行以下操作：

```
[Ss]ection\s\d+(?![a-zA-Z0-9])(?!</ref>) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T12:23:46.977

这个应该工作：

```
[Ss]ection\s\d+(?!\d)(?![a-zA-z])(?!</ref>) 
```

我已经解释了我们对 Strangeness 的正则表达式前瞻的思考问题，[以及 Java 正则表达式中的负前瞻断言](https://stackoverflow.com/questions/14367854/strangeness-with-negative-lookahead-assertion-in-java-regular-expression/14368133#14368133)，它也适用于这里。

这里的情况略有不同：当我们不希望它匹配时，负前瞻确实匹配，因为匹配器*倾向于接受预前瞻部分的较短匹配，如果它有助于匹配整个表达式*。这就是为什么在使用前瞻时了解输入边界很重要的原因：无论是单词边界、锚点`$`还是关于以下文本的某些断言（在我提出的解决方案中*不看数字）。*

# jquery - 寻找有关网站如何合并动态 URL 的建议

> ID：14561871
> 
> 赞同：-1
> 
> 时间：2013-01-28T12:16:47.840
> 
> 标签：jquery, html, url

即使页面没有刷新，我也很想知道[这个网站是如何合并动态 URL 的。](http://qz.com/47651/if-the-uks-economy-is-so-lousy-how-come-its-job-market-is-doing-so-well/)例如，当您向下滚动页面时，url 会随着故事的变化而变化，我可以想象它是使用 jquery/ajax 完成的。

我想知道这会如何影响 SEO 之类的事情，以及 Google 会如何解释这个网站。即使页面没有刷新，Google 是否可以识别 URL 何时更改？是否有一种编程方法可以通知 Google 在爬取页面时 URL 已更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:35:14.353

这种导航可以通过历史 API 来完成，例如使用 jnavigate 插件。导航链接具有使用 AJAX 加载内容的 onClick 事件处理程序，并具有为不使用 AJAX 加载页面定义的“href”属性。谷歌的蜘蛛收集这些 URL，并索引相关页面的内容。因此，它对用户和 SEO 都有好处。

# asp.net - 在 ValidationSummary 中仅显示唯一的错误消息

> ID：14561872
> 
> 赞同：1
> 
> 时间：2013-01-28T12:16:52.033
> 
> 标签：asp.net, .net, validation, webforms, validationsummary

如何使[ValidationSummary](http://msdn.microsoft.com/en-us/library/dd5c6s6h(v=vs.71).aspx)控件仅显示唯一的错误消息？

我正在使用 a来执行 CRUD 操作并为某些字段`Repeater`使用验证控件（内部）。`ItemTemplate`例如 a`RequiredFieldValidator`用于 First Name/Last Name 列。我设置`Text="*"`了验证器，因此很容易发现验证失败的地方。对于`ValidationSummary`至少有 1 个验证器失败的每一列，应该有 1 条错误消息。

问题是`ValidationSummary`对于验证失败的每一行都会显示相同的消息（这是预期的行为，但能够删除重复的错误消息会很好）。

示例，假设 2 行且未输入数据：

> 名字是必填项
> 
> 名字是必填项
> 
> 姓氏是必填项
> 
> 姓氏是必填项

而不是所需的行为：

> 名字是必填项
> 
> 姓氏是必填项

我发现的一个解决方案是在每一列之外使用一个[CustomValidator](http://msdn.microsoft.com/en-us/library/9eee01cx(v=vs.71).aspx)`Repeater`并将它们放在相同`ValidationGroup`的位置，`ValidationSummary`但我认为必须有一个更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:46:34.013

我还出现了重复的消息，并找到了以下对我有用的 javascript 解决方案。

Javascript：

```
<script language="javascript" type="text/javascript">

function RemoveValidationDuplicates(validationGroup) {
    Page_ClientValidate(validationGroup);

    if (typeof (Page_ValidationSummaries) == "undefined")
        return;
    var summary, sums, s;
    for (sums = 0; sums < Page_ValidationSummaries.length; sums++) {
        summary = Page_ValidationSummaries[sums];
        summary.style.display = "none";
        if (!Page_IsValid) {

            if (summary.showsummary != "False") {
                summary.style.display = "";
                if (typeof (summary.displaymode) != "string") {
                    summary.displaymode = "BulletList";
                }
                switch (summary.displaymode) {
                    case "List":
                        headerSep = "<br/>";
                        first = "";
                        pre = "";
                        post = "<br/>";
                        final = "";
                        break;
                    case "BulletList":
                    default:
                        headerSep = "";
                        first = "<ul>";
                        pre = "<li>";
                        post = "</li>";
                        final = "</ul>";
                        break;
                    case "SingleParagraph":
                        headerSep = " ";
                        first = "";
                        pre = "";
                        post = " ";
                        final = "<br/>";
                        break;
                }
                s = "";
                if (typeof (summary.headertext) == "string") {
                    s += summary.headertext + headerSep;
                }
                s += first;

                for (i = 0; i < Page_Validators.length; i++) {
                    if (!Page_Validators[i].isvalid && typeof (Page_Validators[i].errormessage) == "string") {
                        var tempstr = pre + Page_Validators[i].errormessage + post;
                        var isExist = s.search(tempstr);
                        if (isExist == -1)
                            s += pre + Page_Validators[i].errormessage + post;
                    }
                }
                s += final;
                summary.innerHTML = s;
                window.scrollTo(0, 0);
            }
        }
    }
}    
</script> 
```

摘要和验证器共享一个 ValidationGroup，当提交按钮的 OnClientClick 被触发时，该 ValidationGroup 用作调用 RemoveValidationDuplicates 的输入：

```
<div>
    <asp:ValidationSummary ID="ValidationSummary1" runat="server" ValidationGroup="validationGroupName"/>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <asp:RequiredFieldValidator ControlToValidate="TextBox1" ID="RequiredFieldValidator1" runat="server" ErrorMessage="RequiredFieldValidator" ValidationGroup="validationGroupName"></asp:RequiredFieldValidator>
    <br/>
    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
    <asp:RequiredFieldValidator ControlToValidate="TextBox2" ID="RequiredFieldValidator2" runat="server" ErrorMessage="RequiredFieldValidator" ValidationGroup="validationGroupName"></asp:RequiredFieldValidator>
    <br/>
    <asp:TextBox ID="TextBox4" runat="server"></asp:TextBox>
    <asp:RequiredFieldValidator ControlToValidate="TextBox4" ID="RequiredFieldValidator4" runat="server" ErrorMessage="RequiredFieldValidator1" ValidationGroup="validationGroupName"></asp:RequiredFieldValidator>
    <br/>
    <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" OnClientClick="RemoveValidationDuplicates('validationGroupName')"/>
</div> 
```

最初由 KIRAN 在[csharpquery.blogspot.nl上发布的解决方案](http://csharpquery.blogspot.nl/2010/01/in-validationsummary-remove-duplicate.html)

3 月 23 日更新：更改了 javascript 函数以使其可重用，删除了一些冗余代码。

# java - 从 JavaScript 调用 @JSFunction，TypeError：找不到对象的默认值

> ID：14561874
> 
> 赞同：8
> 
> 时间：2013-01-28T12:16:55.730
> 
> 标签：java, javascript, rhino

我正在调用一个带`@JSFunction`注释的方法`ScriptableObject`

JavaScript 文件

```
Target = Packages.com.acme.rhino.Target;

function evaluate() {
    var t = Target();
    t.addModifier("foobar", 1);
    return t;
} 
```

Java 文件

```
public class Target extends ScriptableObject {
    private static final long serialVersionUID = 1L;
    public List<Modifier> modifiers = new LinkedList<>();

    @JSConstructor
    public Target() {
    }

    @JSFunction
    public void addModifier(final String message, final int value) {
        modifiers.add(new Modifier(message, value));
    }

    public int getValue() {
        int sum = 0;
        for (final Modifier modifier : modifiers) {
            sum += modifier.getValue();
        }
        return sum;
    }

    @Override
    public String getClassName() {
        return "Target";
    }
} 
```

但我明白了

```
org.mozilla.javascript.EcmaError: TypeError: Cannot find default value for object.
    at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3687)
    at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3665)
    at org.mozilla.javascript.ScriptRuntime.typeError(ScriptRuntime.java:3693)
    at org.mozilla.javascript.ScriptRuntime.typeError1(ScriptRuntime.java:3705)
    at org.mozilla.javascript.ScriptableObject.getDefaultValue(ScriptableObject.java:976    )
    at org.mozilla.javascript.ScriptableObject.getDefaultValue(ScriptableObject.java:895    )
    at org.mozilla.javascript.ScriptRuntime.toString(ScriptRuntime.java:761)
    at org.mozilla.javascript.ScriptRuntime.notFunctionError(ScriptRuntime.java:3774)
    at org.mozilla.javascript.ScriptRuntime.getPropFunctionAndThisHelper(ScriptRuntime.    java:2269)
    at org.mozilla.javascript.ScriptRuntime.getPropFunctionAndThis(ScriptRuntime.    java:2251)
    at org.mozilla.javascript.optimizer.OptRuntime.callProp0(OptRuntime.java:83)
    at org.mozilla.javascript.gen.script_5._c_evaluate_1(script:6)
    at org.mozilla.javascript.gen.script_5.call(script)
    at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:394)
    at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3091)
    at org.mozilla.javascript.gen.script_5.call(script) 
```

不知道从那里去哪里。当我不调用`addModifier`方法时，给定的代码有效，并且`notFunctionError`在堆栈跟踪中给出错误，我认为 Rhino 不会将给定的方法解释为 JavaScript 函数。

*   OSX 10.8.2
*   爪哇 7
*   犀牛1.7R4

可以在[此处找到重现错误的完整 Maven 项目](https://github.com/oschrenk/stackoverflow-q14561874)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:34:03.863

tl;博士看到[这](https://github.com/tschaub/stackoverflow-q14561874/compare/alt1) [两种](https://github.com/tschaub/stackoverflow-q14561874/compare/alt2)选择。

上述方法的问题`Target.prototype`在于未在脚本范围内正确设置。[`ScriptableObject.defineClass()`](https://github.com/mozilla/rhino/blob/3b36c861d20773d8719ab5b400aea625ce71bc02/src/org/mozilla/javascript/ScriptableObject.java#L1162-L1202)有关如何在脚本范围内正确定义原型的详细信息，请参阅静态方法。

您有几个选择来为`Target`您的脚本提供构造函数。第[一种选择](https://github.com/tschaub/stackoverflow-q14561874/compare/alt1)是始终`Target`为所有脚本定义构造函数。如果您提前知道要`Target`在全球范围内可用，则此方法效果很好。这基本上归结为以下几点：

```
final Context context = Context.enter();
try {
  final ScriptableObject scope = context.initStandardObjects();
  ScriptableObject.defineClass(scope, Target.class, false, true);
  context.evaluateString(scope, script, "script", 1, null);
  // etc.
} finally {
  Context.exit();
} 
```

相反，如果您希望脚本作者决定哪些构造函数是必需的，则[第二种选择](https://github.com/tschaub/stackoverflow-q14561874/compare/alt2)是将`defineClass`函数提供给脚本。使用此功能，脚本作者可以在其类路径上“导入”任何可编写脚本的对象（这可能超出您的允许范围）。要为`defineClass`脚本提供功能，请在进入上下文后执行以下操作：

```
final Context context = Context.enter();
try {
  final ScriptableObject scope = context.initStandardObjects();
  scope.defineFunctionProperties(
          new String[] {"defineClass"},
          Global.class,
          ScriptableObject.DONTENUM);

  context.evaluateString(scope, script, "script", 1, null);
  // etc.
} finally {
  Context.exit();
} 
```

然后，JavaScript 作者使用`Target`以下构造函数：

```
defineClass("com.acme.rhino.Target");
// whatever `getClassName()` returns is now available
var target = new Target(); 
```

在上述两个分支中，如果您向`Target`构造函数添加更多内容，我还进行了一些其他更改，这些更改可以让您更好地设置。零参数构造函数不需要`@JSConstructor`注释。如果您以后想要一个接受参数的构造函数，这个零参数构造函数将用作原型构造函数，并且您可以`@JSConstructor`在用于初始化对象的方法上使用注释。根据您编写此构造方法的方式，`new`在 JavaScript 中使用关键字将变得很重要。

简而言之，`Packages.com.acme...`语法对于从脚本访问构造函数*没有*用处。`ScriptableObject`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T20:42:21.843

我通过使用 new 运算符让它工作（非常相似的代码）。在你的例子中

```
 function evaluate() {
      var t = new Target();
      ... 
```

应该也可以。

# android - 如何在单个 HashMap 中获取两个字符串值？

> ID：14561875
> 
> 赞同：0
> 
> 时间：2013-01-28T12:17:10.727
> 
> 标签：android, list, hashmap, key

我是安卓新手。

我需要的是？..我可以在一个哈希图中获得两个字符串值，这是可能的。我有两个哈希图，这两个哈希图值应该在另一个哈希图中得到。如何实施？任何帮助..提前谢谢..

> ```
>  String question = c.getString(TAG_QUES);
>                 System.out.println("Checking ::"+question);
>                 HashMap<String, String> map = new HashMap<String, String>();
>                 map.put(TAG_QUES,question);
>                 System.out.println("questionMap:"+map);
>                 ques1.add(question); 
> ```

```
 String answer = c.getString(TAG_ANSW);
                System.out.println("Checking ::"+answer);
                HashMap<String, String> map1 = new HashMap<String, String>();
                map1.put(TAG_ANSW, answer);
                System.out.println("AnswerMap:"+map1);
                answ1.add(answer); 
```

我想在单个键中的单个哈希图中获取这两个哈希图值（TAG_QUESID 和 TAG_ANSW），例如）：如果我有 map3 并且我打印 map3，我应该打印这两个值.. 怎么做？因为基于 questionid 我应该得到答案，所以我想为下一个问题增加 questionid。请帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:28:02.137

确实，这是一个java问题。有很多方法可以做到这一点。

1.  `HashMap<String, String[]> map = new HashMap<String, String[]>();`

2.  `HashMap<String, ArrayList<String>> map = new HashMap<String, ArrayList<String>>();`

3.  创建一个类或枚举（首选）例如 TAG，它有两个字符串字段，然后 `Map<String, TAG> map = new HashMap<String, TAG>();`

由于您更新的问题有点不清楚，我试图根据自己的理解回答这个问题。我认为你想要做的是不断地得到问题和他们的答案。

所以也许你可以尝试另一种方法：

```
class Question{
    String questionText;
    String answer;
    ...
}

//map from questionID to a question
Map<String, Question> questionMap = new HashMap<String, Question>();
//TODO: fill up the map with existing questions.
Question question = questionMap.get(questionID);
System.out.println("Question:" + question.questionText + " Answer:" + question.answer);
//same for another question 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:24:05.167

使用由分隔符分隔的值并稍后拆分它们。

```
HashMap<String, String> map1 = new HashMap<String, String>();
map1.put(TAG_ANSW, ""+answer+":"+"questionid"); 
```

然后，当您检索它时，只需拆分它们：

```
x= map1.get(TAG_ANSW)
String [] ans_questionId = x.split(); 
```

将它们存储到各自的值...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:24:55.927

```
 HashMap<String, ArrayList<String>> multiMap = 
   new HashMap<String, ArrayList<String>>();

 void put(String key, String value) {
     ArrayList<String> values = multiMap.get(key);
     if (values == null) {
        values = new ArrayList<String>();
        multiMap.put(values);
     }
     values.add(value); 
 }

 ArrayList<String> get(String key) {
   ArrayList<String> value = multiMap.get(key);
   return value;
 }

 // Need to specify also which value to remove
 void remove(String key, String value) {
   ArrayList<String> values = multiMap.get(key);
   if (values != null) {
      values.remove(value);
      if (values.size() == 0)
        multiMap.remove(key);
   }
 } 
```

如果您不想为同一个键保留重复值，请使用`HashSet`代替`ArrayList`. 在任何情况下，您都会返回您曾经存储在此键下的所有值的集合。

# iphone - uiscrollview 在 iphone 4 中不能平滑滚动

> ID：14561876
> 
> 赞同：0
> 
> 时间：2013-01-28T12:17:14.110
> 
> 标签：iphone, ios, uiscrollview, scroll, smooth-scrolling

我已经实现[了 TMQuiltView](https://github.com/1000Memories/TMQuiltView/archive/master.zip)。

它在 iPhone 5 和 iOS 5 以及 iOS 6.0 中也能正常工作。我有我的 iPhone 4。它更新到 iOS 6。但滚动不顺畅。那里有什么问题？谁能帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:24:40.280

如果没有看到您的代码并监控设备上的性能，就不可能说。

但是，我建议您使用[Instruments](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004652-CH1-SW1)，尤其是 Core Animation 工具来衡量您的应用在 iPhone 4 上的图形性能。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:27:31.767

很可能该设备不够强大，无法足够快地处理所有操作以使视图平滑滚动。

如果没有任何代码示例，很难说您是否能够在不深入研究库本身的情况下提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:59:25.330

我认为您在您的 scrollViews 委托中处理了许多 imageVews，您可以运行`instrument`，选择“时间”并查看每个方法成本的时间。当您的方法花费超过 1000ms/24 时，也许您应该修改方法

# asp.net - 如何在 web.config 中为 iis7 注册处理程序

> ID：14561880
> 
> 赞同：1
> 
> 时间：2013-01-28T12:17:30.067
> 
> 标签：asp.net, web-config, httphandler, ihttphandler

我不得不 301 重定向一些 htm 页面。我正在尝试通过`HttpHandler`. 本网站不使用任何命名空间。我创建了一个测试处理程序，如下所示：

```
<%@ WebHandler Language="C#" Class="htmlhandler" %>

using System;
using System.Web;

public class htmlhandler : IHttpHandler {

    public void ProcessRequest (HttpContext context) {
        string url = HttpContext.Current.Request.Url.AbsoluteUri;
        context.Response.ContentType = "text/plain";
        context.Response.Write(url);
    }

    public bool IsReusable {
        get {
            return false;
        }
    }

} 
```

在`Web.config`我尝试按如下方式注册处理程序：

```
<httpHandlers>
  <add verb="*" path="*.htm" type="htmlhandler"/>
</httpHandlers> 
```

但我收到以下错误：

```
Parser Error Message: Could not load file or assembly 'htmlhandler' or one of its dependencies. The system cannot find the file specified. 
```

请帮忙。我的处理程序放在`App_Code`文件夹中，但服务器仍然无法找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:19:23.300

尝试使用`<add verb="*" path="*.htm" type="htmlhandler, assemblyName"/>`.

也`<system.webServer>`仅当您在集成模式下运行应用程序池时才有效。检查您是在集成模式还是经典模式下运行应用程序池。

# javascript - 使用javascript从gridview中的选中复选框获取值

> ID：14561883
> 
> 赞同：0
> 
> 时间：2013-01-28T12:17:40.833
> 
> 标签：javascript, asp.net, gridview

我有 gridview 控件，其中列包含用于选择行的复选框，并且我在标题模板中还有另一个复选框用于选择所有行的目的..

现在我想使用javascript从选中的复选框（全部选中或可能是4到5个选中的复选框）中获取值，当用户取消选中选中的复选框时，它的值不应传递给javascript函数或应该为空。

```
 <asp:gridview id="gvFriends" runat="server" autogeneratecolumns="False">
    <columns>
        <asp:ImageField DataImageUrlField="PictureUrl" HeaderText="Picture" />
        <asp:BoundField DataField="Name" HeaderText="Name" />

        <asp:TemplateField>
            <HeaderTemplate>
                <asp:CheckBox ID="chkSelectAll" runat="server" Text="Select All" />
            </HeaderTemplate>
            <ItemTemplate>

  <input id="Checkbox1" type="checkbox" value='<%#Eval("id")%>' />
            </ItemTemplate>
        </asp:TemplateField>

    </columns>
</asp:gridview> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:28:42.060

我推荐你使用 jQuery 来完成这个任务。

您可以在此处查看如何获取复选框值：http: [//jquery-howto.blogspot.ru/2008/12/how-to-check-if-checkbox-is-checked.html](http://jquery-howto.blogspot.ru/2008/12/how-to-check-if-checkbox-is-checked.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:06:27.680

**这将在您的页面以HTML**形式呈现给客户端后生成许多复选框元素

 **使用**jQuery**，您可以获得与以下相同的值

```
$('<%= gvFriends.ClientName%>').find('input[type=checkbox]').eq(i).is(':checked') 
```

将 i 替换为所需元素的索引

另一种解决方案是在复选框中添加 rel="chk<% #Eval(id) %>"

```
$('<%= gvFriends.ClientName%>').find('input[rel=chk'+ id +']').is(':checked') 
```**

# javascript - 快照视图 Windows 8 javascript

> ID：14561884
> 
> 赞同：1
> 
> 时间：2013-01-28T12:17:45.393
> 
> 标签：javascript, windows-8

在我的项目中，我们使用的是快照视图，问题是如果我们在 homepage.js 中使用快照视图，它会影响所有页面

```
 window.addEventListener("resize", onResize,false); 
```

此代码在我们捕捉的所有页面上调用。

```
 (function () {
 "use strict";
 var pageName = "homePage";
 WinJS.UI.Pages.define("/pages/home/home.html", {
    ready: function (element, options) {
 window.addEventListener("resize", onResize,false);
}

function onResize() {
var pageName = "homePage";    
 if (Windows.UI.ViewManagement.ApplicationView.value ==  Windows.UI.ViewManagement.ApplicationViewState.fullScreenLandscape) {

     var UsrName = localStorage.getItem("username");
     var parameters = "'strUserName':'" + UsrName + "'";
     ServiceCall("GetAllDeals", parameters, pageName);
     var UsrName = localStorage.getItem("username");
     var UId = localStorage.getItem("UserID");
     var parameters = "'strUserName':'" + UsrName + "','UserID':'" + UId + "'";
     ServiceCall("TrackDeals", parameters, pageName);

} 
```

}

这是我们在主页中使用的代码，但是当我们在诸如 trackpage.js 之类的其他页面中并且当我们捕捉该页面并取消捕捉时，我们将返回 homepage.js onResize 函数服务调用。如何避免这种情况，并实现仅在当前页面上。如果此代码中有任何错误，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:08:19.270

因为 onResize 函数被添加到窗口对象中，所以如果您不希望在窗口改变大小时调用它，则必须将其删除。即使您可以离开 home.html，该事件仍然是连接的。这正是 SPA 风格应用程序的工作方式，包括现代 Win8 应用程序。

为了解决这个问题，您有两种选择，您可以在导航发生之前处理它：

```
WinJS.Navigation.onbeforenavigate = function () { window.removeEventListener('resize', onresize);}; 
```

或者您可以使用 WinJS 页面卸载功能来处理它：

```
WinJS.UI.Pages.define("/pages/home/home.html", {
        unload: function() {window.removeEventListener('resize', onresize);},
        // rest of Page code, including Ready goes here
} 
```

哪一个最适合您。onbeforeenavigate 在卸载之前触发，如果这对您很重要。

# iphone - UIKeyboardWillShowNotification 和 UIkeyBoardDidShowNotification

> ID：14561885
> 
> 赞同：1
> 
> 时间：2013-01-28T12:17:45.340
> 
> 标签：iphone, uikeyboard

我在数字键盘 iphone 上制作了一个完成按钮，如[下面的教程](http://horseshoe7.wordpress.com/2012/08/17/tutorial-creating-a-done-button-on-the-iphone-number-pad-keyboard/#comment-78)所示。

当我使用`UIKeyBoardWillShowNotification` `[tempWindow.subviews count]`出来为“0”时，因为尚未添加键盘，那么如果我使用`UIKeyboardDidShowNotification`它工作正常，除了延迟添加完成按钮图像......如果有人知道原因，请提交，如果可能的话 -提供解决方案。

# dictionary - 减去两个“字典列表”

> ID：14561890
> 
> 赞同：0
> 
> 时间：2013-01-28T12:17:59.053
> 
> 标签：dictionary, python-2.7, unique, union, intersect

`list of dictionaries`我应该如何以pythonic方式减去两个？

*我想在第一个 listOfDict 中找到唯一的元素。*

请参阅下面的示例：

```
firstDict = [{'A':1 ,'B':1}, {'A':2 ,'B':2}]
secondDict = [{'A':3 ,'B':3}, {'A':2 ,'B':2}] 
```

`magicFunction(A, B)`应该返回

```
[{'A':1 ,'B':1} 
```

并且`magicFunction(B, A)`应该返回

```
[{'A':3 ,'B':3} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:21:24.837

您可以为此使用集合，但`dict`遗憾的是不能将 a 添加到集合中。您需要将字典“强制转换”为集合*可以*处理的内容，例如不可变类型，例如元组序列。将其与索引相结合以返回引用的`dict`:

```
def magicFunction(a, b):
    a = [tuple(sorted(d.items())) for d in a]
    b = [tuple(sorted(d.items())) for d in b]
    return [dict(kvs) for kvs in set(a).difference(b)] 
```

结果：

```
>>> firstDict = [{'A':1 ,'B':1}, {'A':2 ,'B':2}]
>>> secondDict = [{'A':3 ,'B':3}, {'A':2 ,'B':2}]
>>> magicFunction(firstDict, secondDict)
[{'A': 1, 'B': 1}]
>>> magicFunction(secondDict, firstDict)
[{'A': 3, 'B': 3}] 
```

# wpf - WPF 弹出窗口出现在其他桌面窗口上，如何只出现在 WPF 主窗口的顶部？

> ID：14561891
> 
> 赞同：5
> 
> 时间：2013-01-28T12:18:03.313
> 
> 标签：wpf, popup

我有一个带有网格的 WPF 主窗口，并且我添加了一个 WPF 弹出窗口，以在单击按钮时向用户询问额外信息。但问题是，当其他桌面窗口移到弹出窗口上时，弹出窗口会覆盖其他桌面窗口。如何解决此问题，以便弹出窗口仅位于 WPF 主窗口的最顶部，而不是其他桌面窗口。当设置为始终位于顶部时，弹出窗口的行为就像任务管理器！

如果您使用下面的代码，您将看到弹出窗口保持在顶部。因此，将任何其他桌面窗口移到弹出窗口上方，弹出窗口将覆盖其他桌面应用程序！请注意，我不想使用 StaysOpen="False"。

```
<Grid>
    <Popup Name="myPopup" Placement="Center" IsOpen="True">
        <StackPanel Background="Green" >
            <TextBox Width="200" Margin="0,0,10,0"/>
            <Button Name="closePopupBtn" Content="close" Width="100" />
        </StackPanel>
    </Popup>
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:39:39.513

您已在弹出窗口中设置 Owner 属性。在您的弹出窗口中，

```
this.owner = instanceOfParentWindow; 
```

这也与您的问题相似。

[弹出窗口始终保持在顶部](https://stackoverflow.com/questions/7606954/popup-always-stays-on-top)

[在这里，他们使用 user32.dll](http://chriscavanagh.wordpress.com/2008/08/13/non-topmost-wpf-popup/)创建了一个自定义弹出窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-20T08:25:29.380

我知道这是一个老问题，我通过搜索如何解决同样的问题来解决这个问题。

最简单的方法是用 Tooltip 控件替换 Popup。工具提示具有相同的基本功能，但它不像弹出窗口那样充当单独的层，因此工具提示不会出现在其他应用程序之上。

（Popup 不是 WPF 定义它们的方式的控件，而是不打算按原样使用的组件）。

# asp.net - ASP.NET MVC 路由：如何使我的 MVC URL 具有 .aspx 扩展名？

> ID：14561892
> 
> 赞同：3
> 
> 时间：2013-01-28T12:18:06.543
> 
> 标签：asp.net, asp.net-mvc, routing, asp.net-mvc-routing, asp.net-routing

我希望 MVC 应用程序具有 .aspx 页面 URL，即使没有任何物理 aspx 页面，并且我将使用 Razor 视图引擎。

1）是否可以定义这样的路线？

2）如果我想要一个 url，比如下面给出的那个，那条路线会是什么样子：

```
http://example.com/controller/action.aspx 
```

并且可以选择

```
http://example.com/controller/action.aspx/id 
```

并且可以选择

`http://example.com/controller/action.aspx?queryParam1=value&queryParam2=value`（等等...）

**更新**

我意识到我想要这样的 URL：

```
http://example.com/controller/id.aspx 
```

换句话说，我不想指定具体的行动。默认操作将处理所有请求。

**另一个更新**

我在路由配置中指定的是：

```
routes.MapRoute(
name: "Default",
url: "{controller}/{id}.aspx",
defaults: new { controller = "Foo", action = "Index", id = "default" }
); 
```

但是，虽然上述路线确实适用于指定 Id 的 Url，例如以下：

```
http://example.com/foo/bar.aspx 
```

当没有指定 Id 时，它不起作用，例如以下情况：

```
http://example.com/foo/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T12:21:39.240

如果它应该影响所有路由，您可以将默认路由更改为如下所示：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}.aspx/{id}",
    new { controller = "Home", action = "Index" }
); 
```

如果您只希望它用于特定路线，那么您可以添加一个像上面那样的附加路线，但名称比`Default`, 并保持默认路由不变。然后，您可以在需要时通过其名称使用新的路由模式。

**更新：**

我没有尝试过，所以我不确定，但这是我会尝试的：

```
routes.MapRoute(
    "Default",
    "{controller}/{id}.aspx",
    new { controller = "Home", action = "Index" }
); 
```

*您必须修改动作参数的默认值，使其与您的动作匹配。*

**另一个更新：**

为了处理这个问题，我相信你必须有两条路线。第一个路由应该需要一个 ID 并且不指定默认 ID。如果该路线不匹配，就像在您的第二个示例中一样，我们将落入第二条路线：

```
routes.MapRoute(
    "DefaultWithId",
    "{controller}/{id}.aspx",
    new { controller = "Home", action = "Index" }
);

routes.MapRoute(
    "Default",
    "{controller}/",
    new { controller = "Home", action = "Index" }
); 
```

*最具体的路线首先出现是很重要的，然后您会退回到越来越不具体的路线，因为您的路线将自上而下读取，并且一旦找到匹配项，就会使用该路线。*

# mysql - 计算特定行 ID（查询）的 NOT NULL 列数

> ID：14561893
> 
> 赞同：1
> 
> 时间：2013-01-28T12:18:09.897
> 
> 标签：mysql, sql, count, database

我需要在任何 db 中提取“特定行的非空列数的计数”。

任何事物 ？...

谢谢，干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:34:50.877

您应该查看此选项以获取所有不为空的字段名称：

```
show columns from TABLE_NAME where Null = 'NO'; 
```

从 PHP 运行此查询并尝试通过 mysql_num_rows 获取此查询的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:45:03.490

尝试这个

```
select 
     if(name1 = 0, 0, 1) +
     if(name2 = 0, 0, 1) +
     if(name3 = 0, 0, 1) as NumMsg
 from attributes where `id`='5' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:32:01.713

尝试一些类似的东西

```
SELECT 
(
 (CASE WHEN col1 IS NOT NULL THEN 1 ELSE 0 END)
 + (CASE WHEN col2 IS NOT NULL THEN 1 ELSE 0 END)
 ...) AS count_of_not_nulls
FROM table t
WHERE t.Id= @ROW_ID 
```

# php - 在 codeigniter 中处理存储过程输出参数

> ID：14561894
> 
> 赞同：3
> 
> 时间：2013-01-28T12:18:11.430
> 
> 标签：php, mysql, codeigniter, stored-procedures

我在 mysql 中有一个带有输出参数的存储过程，我需要将结果发送到我的 php 中，该 php 使用了 codeigniter

注册模式

```
 public function registerUser($data){

            $sql = "call register_new_user('" . $data['uemail'] . "','" . $data['fname'] . "','".$data['lname'] . "','" . $data['pword']."',
            '" . $data['states'] . "',".$data['chargifyId'].");";

            if ($query = $this->db->query($sql)) {

            return  $this->db->query("Select @last_id");               

            } else {
                return false;
            }

    } 
```

这是存储过程

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `register_new_user`(IN `uemail` VARCHAR(100), IN `fname` VARCHAR(45),
IN `lname` VARCHAR(45), IN `pword` VARCHAR(100), IN `states` VARCHAR(20), IN `chargifyid` INT, OUT `last_id` INT)
    NO SQL
BEGIN

if not exists (SELECT * from gi_user where 
(gi_user_email = uemail)) THEN

INSERT INTO gi_user(gi_user_email, gi_user_fname, 
gi_user_lname, gi_user_password,gi_user_status, 
gi_account_id, chargifyId) 
VALUES (uemail,fname,lname,pword,states,1,chargifyid);

SET last_id = LAST_INSERT_ID( ) ;

END IF;

END 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-22T08:12:33.533

使用 CodeIgniter 事务

```
$this->db->trans_start();
$this->db->query('AN SQL QUERY...');
$this->db->query('ANOTHER QUERY...');
$this->db->query('AND YET ANOTHER QUERY...');
$this->db->trans_complete(); 
```

例子：

```
$SQL = "call UPDATE("
                . $ID.","
                . $this->db->escape($data["NAME"])."," // input
                . $this->db->escape($data["DESCRIPTION"])."," // input
                . " @out1" ."," // output
                . " @out2" //output
                .");";

        $this->db->trans_start();
            $this->db->query($SQL); // not need to get output
            $query = $this->db->query("SELECT @out1 as row_1,  @out2 as row_2");
        $this->db->trans_complete();

        $result = array();

        if($query->num_rows() > 0)
            $result = $query->result_array();

        print_r($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-07T11:24:54.900

```
$out='';
$query ="begin register_new_user('" . $email . "','" .$name. "','".$lname ."','". $pword."','" . $states . "',:out); end;";
    $stmt = oci_parse($this->db->conn_id, $query );
    oci_bind_by_name($stmt, ":out", $out,300);

    oci_execute($stmt); 

    echo $out; 
```

它为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-11T18:15:57.807

工作示例！

--> SP

```
CREATE PROCEDURE calculateStock
(IN itemId INT(10), OUT stock INT(10))
BEGIN
    DECLARE purchased INT(10);
    DECLARE sold INT(10);

    SET purchased = (SELECT SUM(purchase_rows.qty) AS purchased FROM purchase_rows WHERE template_id = item_id);
    SET sold = (SELECT SUM(sale_rows.qty) AS sold FROM sale_rows WHERE template_id = item_id);

    SET stock = purchased - sold; 
    SELECT stock;
END 
```

--> 型号

```
public function getStock($item_id){
    $query = "CALL calculateStock(?, @stock);";
    $parameters = array($item_id);

    $result = $this->db->query($query, $parameters);
    mysqli_next_result($this->db->conn_id); //Important Line 

    return $result->row()->stock;
} 
```

# uniqueidentifier - 检索参数类型唯一标识符

> ID：14561895
> 
> 赞同：0
> 
> 时间：2013-01-28T12:18:19.863
> 
> 标签：uniqueidentifier, powerbuilder, datawindow

我在 SQL Anywhere 中有下表：

```
CREATE TABLE "documents" (
    "doc_id" uniqueidentifier NOT NULL DEFAULT NEWID(*),
    "doc_description" varchar(50) NOT NULL,
    ...
    PRIMARY KEY("doc_id")
) 
```

我创建了一个数据窗口。

（SQL 语句：

```
SELECT
"documents"."doc_id",      
"documents"."doc_description"
FROM "documents"   
WHERE "documents"."doc_id" = :ruid_doc ) 
```

我添加`ruid_doc`为检索参数和 type = string。

当我尝试保存时，出现以下错误：

> SQLSTATE = 07006 [Sybase][ODBC 驱动程序] 无法将 0 转换为唯一标识符。

我曾尝试使用`convert`和`cast`。

仅供参考，可以通过编辑源来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:33:56.090

[这篇](http://scn.sap.com/community/developer-center/powerbuilder/blog/2012/10/25/using-autoincrementing-columns-from-a-powerbuilder-datawindow)描述如何在数据窗口中使用自动增量列的帖子可能会有所帮助。

简而言之：

*   在 DW 中，您将列声明为数字
*   在DW的更新属性中，为“身份列”选择正确的列
*   根据使用的 DBMS，您需要在`PBODBxxx.ini`（xxx 是版本号）中说明插入后如何检索标识列。看起来您正在使用 Sybase 驱动程序，它可以是

    ```
    [Sybase SQL Server]
    PBSyntax='SYBASE_SYNTAX' 
    ```

    和

    ```
    [SYBASE_SYNTAX]
    GetIdentity='Select @@identity'
    ; GetIdentity='Select max(IDENTCOL) from &TableName'
    ; Alternative technique if table has insert trigger associated with it. 
    ```

这篇文章详细解释了它。

# wicket - “试图在空对象上设置属性值”

> ID：14561901
> 
> 赞同：1
> 
> 时间：2013-01-28T12:18:35.883
> 
> 标签：wicket

我编写了一个 wicket 应用程序来根据给定的输入过滤记录。我得到错误

> 试图在空对象上设置属性值。属性表达式：code 值：ad

其中，代码是字段的名称，广告是输入要过滤的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:47:26.433

biziclop 的答案，它是 Wicket Model NullPointer。像 PropertyModel 或 CompoundPropertyModel 这样的 Wicekt 模型使用 javabean getter/setter 表示法，例如“customer.address.street.name”。因此，如果您将“客户”对象中的地址值设置为 null，并且 wicket 会尝试从文本字段中设置“street.name”，您将收到此异常。

# ios - GPS读数错误

> ID：14561902
> 
> 赞同：0
> 
> 时间：2013-01-28T12:18:37.213
> 
> 标签：ios, objective-c, xcode

在我的应用程序中，我从 CLlocationmanager 获取纬度和经度详细信息，然后使用这些详细信息在地图上绘制叠加层。有时我会看到，即使我在路径（高速公路）上行驶，GPS 也会获取错误的详细信息，因此我的地图应用程序会将叠加层绘制在真正旅行的地方之外。它显示就像在建筑物、河流和树木上行驶。谁能帮我纠正这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:21:34.060

这不是错误。这就是 GPS 信号的准确性。有可能获得尽可能准确的定义`locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation;`，其中`locationManager`是类型的对象`CLLocationManager`。但是，可能无法始终获得用户的确切位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-25T12:33:28.790

您的 GPS*会*出现错误，这是不可避免的。您有两个选择：要么直接使用 GPS 数据，要么使用您的地图信息来查找您认为 GPS 所在的位置。例如，如果 GPS 以超过 10 mph 的速度移动并且已经在街道上或靠近街道，那么您可以猜测它仍然在同一条街道上并更改坐标。但是，这非常棘手，因为您不知道实际情况如何。

# entity-framework - EF 连接字符串作为 DbContext 构造函数参数

> ID：14561903
> 
> 赞同：7
> 
> 时间：2013-01-28T12:18:38.950
> 
> 标签：entity-framework, entity-framework-5

我看到一些[代码示例](http://odetocode.com/Blogs/scott/archive/2012/08/14/a-troubleshooting-guide-for-entity-framework-connections-amp-migrations.aspx)在创建新的 DbContext 时将实体框架连接字符串作为构造函数参数。但是当我将一个新的 ADO.NET 实体数据模型添加到项目中（首先是数据库）时，DbContext 只有一个无参数构造函数。

我错过了一步吗？我应该怎么做才能得到那个构造函数？

面向 .net 框架 4.5 实体框架 5 的 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-05T01:55:23.897

根据 Arthur Vickers 的建议，我正在扩展部分类以拥有一个接受连接字符串的构造函数。在 C# 中（与 hege 的答案非常相似）：

```
public partial class MyEFEntities
{
    public MyEFEntities(string connectionstring)
        : base(connectionstring)
    {
    }
} 
```

或者在 VB.Net 中：

```
Partial Public Class MyEFEntities
    Public Sub New(ConnectionString As String)
        MyBase.New(ConnectionString)
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T18:48:31.953

新的数据模型向导将连接字符串添加到您的配置文件，并设置代码生成以使用无参数构造函数创建上下文，然后使用“name = foo”调用基本构造函数，以便配置文件中的连接字符串为用过的。

如果您想将连接字符串显式传递给构造函数（而不是从配置中读取），那么您可以使用上下文是部分类的事实来添加该构造函数。您还可以修改 T4 代码生成模板以更改生成的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:01:59.120

如果您想先更改为代码，请使用此 :)

```
 public class MyCustomDBContext : DbContext
    {
        public MyCustomDBContext()
           : base(GetConnectionStringName())
        {

        }

        public MyCustomDBContext(string connString) : base(connString)
        {

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-31T10:29:14.197

我通过将“代码生成策略”更改为“旧版 ObjectContext”来解决此问题，以使其与 EF4 一起使用

![在此处输入图像描述](../Images/79650eec8d8e78bccddc36f599d4e5a5.png)

# php - PHPUnit 在预期异常后不继续测试

> ID：14561908
> 
> 赞同：31
> 
> 时间：2013-01-28T12:19:11.377
> 
> 标签：php, exception, phpunit

为什么 PHPUnit 在这段代码中不做最后一个异常断言？

```
public function testConfigOverriding()
{
    $this->dependencyContainer = new DependencyContainer(__DIR__ . "/../../Resources/valid_json.json");
    $this->assertEquals('overriden', $this->dependencyContainer->getConfig('shell_commander')['pygmentize_command']);

    $unexisting = "unexisting_file";
    $this->setExpectedException('Exception', "Configuration file at path \"$unexisting\" doesn't exist.");
    $this->dependencyContainer = new DependencyContainer($unexisting);

    $invalid = __DIR . "/../../Resources/invalid_json.json";
    $this->setExpectedException('Exception', "Configuration JSON file provided is not valid.");
    $this->dependencyContainer = new DependencyContainer($invalid);
} 
```

所以基本上：它测试是否抛出了“unexsisting_file”异常，但完全忽略了“invalid json”测试。我需要为每个抛出的异常进行单独的测试吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-28T13:45:45.460

即使使用`setExpectedException`，您的测试仍然是常规 PHP 代码，并且遵循 PHP 的常规规则。如果抛出异常，程序流会立即跳出当前上下文，直到到达`try`/`catch`块。

在 PHPUnit 中，当您使用 时`setExpectedException`，它会告诉 PHPUnit 的核心，它应该何时预期即将运行的代码出现异常。`try`因此，它使用/`catch`块等待它，如果`catch`使用它期望的异常类型调用它，则通过测试。

但是，在您的测试方法中，正常的 PHP 规则仍然适用——当异常发生时，这就是当前代码块的结尾。除非您在测试方法中有自己的`try`/`catch`块，否则不会执行该方法中的任何其他内容。

因此，为了测试多个异常，您有几个选项：

1.  将您自己的`try`/添加`catch`到测试方法中，以便您可以在第一个异常之后在该方法中继续进行进一步的测试。

2.  将测试拆分为单独的方法，以便每个异常都在自己的测试中。

3.  这个特殊的例子看起来是使用 PHPUnit`dataProvider`机制的一个很好的例子，因为你基本上是在用两组数据测试相同的功能。该`dataProvider`功能允许您定义一个单独的函数，其中包含要测试的每组值的输入数据数组。然后将这些值一次一组传递到测试方法中。您的代码将如下所示：

    ```
    /**
     * @dataProvider providerConfigOverriding
     */
    public function testConfigOverriding($filename, $expectedExceptionText) {
        $this->dependencyContainer = new DependencyContainer(__DIR__ . "/../../Resources/valid_json.json");
        $this->assertEquals('overriden', $this->dependencyContainer->getConfig('shell_commander')['pygmentize_command']);

        $this->setExpectedException('Exception', $expectedExceptionText);
        $this->dependencyContainer = new DependencyContainer($filename);
    }

    public function providerConfigOverriding() {
        return array(
            array('unexisting_file', 'Configuration file at path "unexisting_file" doesn\'t exist.'),
            array(__DIR__ . "/../../Resources/invalid_json.json", "Configuration JSON file provided is not valid."),
        );
    } 
    ```

希望有帮助。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-08-26T08:46:42.680

我发现在异常发生后继续测试的最简单方法是在测试中实现 try/finally 块。这实质上允许测试的执行继续进行，而不管抛出任何异常。

这是我的实现：

```
$this->expectException(InvalidOperationException::class);

try {
    $report = $service->executeReport($reportId, $jobId);
} finally {
    $this->assertEquals($report->getStatus(), StatusMapper::STATUS_ABORTED);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-15T17:01:20.673

如果您需要在抛出异常后执行其他断言，只需使用此模板：

```
 //You can use annotations instead of this method
    $this->expectException(FooException::class);

    try {
        $testable->setFoo($bar);
    } catch (FooException $exception) {
        //Asserting that $testable->foo stays unchanged
        $this->assertEquals($foo, $testable->getFoo());
        //re-throwing exception
        throw $exception;
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-18T11:07:29.000

对于任何想要做问题标题中的事情的人来说，这是我想出的最干净的事情。

```
$exception_thrown = false

try {
    ... stuff that should throw exception ...
} catch (SomeTypeOfException $e) {
    $exception_thrown = true;
}

$this->assertSame(true, $exception_thrown); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-28T12:38:43.887

基于@SDC的回答，我推荐以下

*   进一步拆分测试
*   避免使用实例属性来引用被测系统

### 进一步拆分测试

如果断言与相同的行为不相关，则单个测试中的多个断言会出现问题：您无法正确命名测试，甚至可能最终`and`在测试方法名称中使用。如果发生这种情况，请将测试拆分为单独的测试

### 避免使用 SUT 的实例属性

当我开始编写测试时，我觉得在将被测系统 (SUT) 安排在 中`setUp`，然后通过各个测试中的相应实例属性引用 SUT 时，有机会减少代码重复。

这很诱人，但过了一段时间，当您开始从 SUT 中提取协作者时，您将需要设置测试替身。*一开始这可能仍然对您有用，但是您将开始在不同的测试中以不同*的方式设置测试替身，并且之前旨在避免的所有重复都会回到您身上：您最终将设置两个测试替身，并再次在您的测试中安排 SUT。

当我在代码审查中遇到这个时，我喜欢参考

*   [在谈论单元测试时，“DAMP not DRY”是什么意思？](https://stackoverflow.com/questions/6453235/what-does-damp-not-dry-mean-when-talking-about-unit-tests)

我建议阅读它。

重要的一点是，你想让测试的编写*和*维护变得容易。维护测试（或任何代码，如果你愿意的话）主要意味着使代码易于阅读。如果您阅读一些代码，比如说，一个类方法，您想轻松理解它的含义，理想情况下，该方法应该按照您的类名做您期望它做的事情。如果您正在测试不同的行为，请通过创建不同的测试方法使其显而易见。

这也有一个好处，如果你运行你的测试

```
$ phpunit --testdox 
```

您最终会得到一个很好的预期行为列表，请参阅

*   [https://phpunit.de/manual/current/en/other-uses-for-tests.html#other-uses-for-tests.agile-documentation](https://phpunit.de/manual/current/en/other-uses-for-tests.html#other-uses-for-tests.agile-documentation)

### 基于您的问题的示例

**注意**我在这个例子中提供的注释只是为了说明进一步拆分测试的想法，在实际代码中我不会有它们。

```
/**
 * The name of this method suggests a behaviour we expect from the
 * constructor of DependencyContainer
 */
public function testCanOverrideShellCommanderConfiguration()
{
    $container = new DependencyContainer(__DIR__ . '/../../Resources/valid_json.json');

    $this->assertEquals(
        'overriden', 
        $container->getConfig('shell_commander')['pygmentize_command']
    );
}

/**
 * While the idea of using a data provider is good, splitting the test
 * further makes sense for the following reasons
 *
 * - running tests with --testdox option as lined out above
 * - modifying the behaviour independently 
 *     Currently, a generic Exception is thrown, but you might 
 *     consider using a more specific exception from the SPL library, 
 *     (see http://php.net/manual/en/spl.exceptions.php), 
 *     or creating your own NonExistentConfigurationException class, 
 *     and then a data provider might not make sense anymore)
 */
public function testConstructorRejectsNonExistentConfigurationFile()
{
    $path = 'unexisting_file';

    $this->setExpectedException(\Exception::class, sprintf(
        'Configuration file at path "%s" doesn\'t exist.',
        $path
    ));

    new DependencyContainer($path);
}

public function testConstructorRejectsInvalidConfigurationFile()
{
    $path = __DIR__ . '/../../Resources/invalid_json.json';

    $this->setExpectedException(
        \Exception::class, 
        'Configuration JSON file provided is not valid.'
    );

    new DependencyContainer($path);
} 
```

**注意**我也建议看看

*   [https://thephp.cc/news/2016/02/questioning-phpunit-best-practices](https://thephp.cc/news/2016/02/questioning-phpunit-best-practices)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T12:23:51.497

首先，有一个错字。代替

`__DIR`

和

`__DIR__`

:)

* * *

感谢@SDC 的评论，我意识到您确实需要为每个异常提供单独的测试方法（如果您使用的`expectedException`是 PHPUnit 的功能）。您的代码的第三个断言只是没有被执行。如果您需要在一种测试方法中测试多个异常，我建议您在测试方法中编写自己的`try` `catch`语句。

再次感谢@SDC

# c# - 访问冲突异常未处理

> ID：14561911
> 
> 赞同：0
> 
> 时间：2013-01-28T12:19:31.050
> 
> 标签：c#, winforms, image, printing

我正在尝试按`OnPrintPage`事件打印图像，如下所示。

```
protected virtual void OnPrintPage(object sender, PrintPageEventArgs e)
{
    Image img = ExportAsMetafile(0);
    CultureInfo current = Thread.CurrentThread.CurrentCulture;
    Thread.CurrentThread.CurrentCulture = CultureInfo.InvariantCulture;
    e.Graphics.DrawImage(img, new Rectangle(0, 0, (int)e.Graphics.VisibleClipBounds.Width, (int)e.Graphics.VisibleClipBounds.Height));
    Thread.CurrentThread.CurrentCulture = current;            
} 
```

当我尝试保存 img 时`img.Save("img.png");`，我得到了我需要的图像

但是，当我尝试在其中绘制此图像时`e.Graphics.DrawImage`，它显示异常如下 ![在此处输入图像描述](../Images/16014ce1d36d39b053bdfa75a2b21159.png)

谁能帮我解决这个问题。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:59:39.167

你为什么不试试这个（注意我从 msdn 得到这个）

```
e.Graphics.DrawImage(Image.FromFile("C:\\My Folder\\MyFile.bmp"), ev.Graphics.VisibleClipBounds); 
```

# java - 关于如何使用pop3使用javamail从gmail帐户中删除电子邮件的查询

> ID：14561915
> 
> 赞同：0
> 
> 时间：2013-01-28T12:19:44.857
> 
> 标签：java, jakarta-mail

我们收到了正确数量的已删除邮件。但来自 gmail 帐户的邮件并未被删除。expunge() 方法不适用于 pop3。pop3有没有类似的方法永久删除邮件？我们还设置**了 folder.close(true)**

代码如下——

```
import java.util.Date; 
import java.util.Properties; 

import javax.mail.Address; 
import javax.mail.FetchProfile; 
import javax.mail.Folder; 
import javax.mail.Message; 
import javax.mail.MessagingException; 
import javax.mail.Part; 
import javax.mail.Session; 
import javax.mail.Store; 
import javax.mail.URLName; 
import javax.mail.internet.ContentType; 
import javax.mail.internet.ParseException; 

import com.sun.mail.imap.protocol.FLAGS;
import com.sun.mail.pop3.POP3SSLStore; 

public class GmailUtilities { 

    private Session session = null; 
    private Store store = null; 
    private String username, password; 
    private Folder folder; 

    public GmailUtilities() { 

    } 

    public void setUserPass(String username, String password) { 
        this.username = username; 
        this.password = password; 
    } 

    public void connect() throws Exception { 

        String SSL_FACTORY = "javax.net.ssl.SSLSocketFactory"; 

        Properties pop3Props = new Properties(); 

        pop3Props.setProperty("mail.pop3.socketFactory.class", SSL_FACTORY); 
        pop3Props.setProperty("mail.pop3.socketFactory.fallback", "false"); 
        pop3Props.setProperty("mail.pop3.port",  "995"); 
        pop3Props.setProperty("mail.pop3.socketFactory.port", "995"); 

        URLName url = new URLName("pop3", "pop.gmail.com", 995, "", 
                username, password); 

        session = Session.getInstance(pop3Props, null); 
        store = new POP3SSLStore(session, url); 
        store.connect();   //uses session properties

    } 

    public void openFolder(String folderName) throws Exception { 

        // Open the Folder 
        folder = store.getDefaultFolder(); 

        folder = folder.getFolder(folderName); 

        if (folder == null) { 
            throw new Exception("Invalid folder"); 
        } 

        // try to open read/write and if that fails try read-only 
        try { 

            folder.open(Folder.READ_WRITE); 

        } catch (MessagingException ex) { 

            folder.open(Folder.READ_ONLY); 

        } 
    } 

    public void closeFolder() throws Exception { 
        folder.close(false); 
    } 

    public int getMessageCount() throws Exception { 
        return folder.getMessageCount(); 
    } 

 public void printAllMessages() throws Exception { 

        // Attributes & Flags for all messages .. 
        Message[] msgs = folder.getMessages(); 

        // Use a suitable FetchProfile 
        FetchProfile fp = new FetchProfile(); 
        fp.add(FetchProfile.Item.ENVELOPE);         
        folder.fetch(msgs, fp); 

        for (int i = 0; i < msgs.length; i++) { 
            System.out.println("--------------------------"); 
            System.out.println("MESSAGE #" + (i + 1) + ":"); 
            dumpPart(msgs[i]); 
msgs[i].setFlag(FLAGS.Flag.DELETED, true);

System.out.println("Message " +(i+1)+" is deleted");
        } 
folder.close(true);          
    } 

    public static void dumpPart(Part p) throws Exception { 
        if (p instanceof Message) 
            dumpEnvelope((Message)p); 
       Object content = p.getContent(); 
      System.out.println(content); 
        String ct = p.getContentType(); 
        try { 
            pr("CONTENT-TYPE: " + (new ContentType(ct)).toString()); 
        } catch (ParseException pex) { 
            pr("BAD CONTENT-TYPE: " + ct); 
        } 

        /* 
         * Using isMimeType to determine the content type avoids 
         * fetching the actual content data until we need it. 
         */ 
        if (p.isMimeType("text/plain")) { 
            pr("This is plain text"); 
            pr("---------------------------"); 
            System.out.println((String)p.getContent());         
        } else { 

            // just a separator 
            pr("---------------------------"); 

        } 
    } 

    public static void dumpEnvelope(Message m) throws Exception {         
        pr(" "); 
        Address[] a; 
        // FROM 
        if ((a = m.getFrom()) != null) { 
            for (int j = 0; j < a.length; j++) 
                pr("FROM: " + a[j].toString()); 
        } 

        // TO 
        if ((a = m.getRecipients(Message.RecipientType.TO)) != null) { 
            for (int j = 0; j < a.length; j++) { 
                pr("TO: " + a[j].toString());                 
            } 
        } 

        // SUBJECT 
        pr("SUBJECT: " + m.getSubject()); 

        // DATE 
        Date d = m.getSentDate(); 
        pr("SendDate: " + 
                (d != null ? d.toString() : "UNKNOWN")); 

    } 

    static String indentStr = "                                               "; 
    static int level = 0; 

    /** 
     * Print a, possibly indented, string. 
     */
    public static void pr(String s) { 

        System.out.print(indentStr.substring(0, level * 2)); 
        System.out.println(s); 
    } 

    public static void main(String[] args) { 

        try { 

            GmailUtilities gmail = new GmailUtilities(); 
            gmail.setUserPass("abc@gmail.com","password"); 
            gmail.connect(); 
            gmail.openFolder("INBOX"); 

            int totalMessages = gmail.getMessageCount(); 

            System.out.println("Total messages = " + totalMessages); 

            gmail.printAllMessages(); 

        } catch(Exception e) { 
            e.printStackTrace(); 
        } 

    } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:04:50.973

可能与您的问题无关，但您可能想阅读此[常见 JavaMail 错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)列表。

至于为什么邮件没有被删除，我不知道。确保您确实打开了读/写文件夹。[协议跟踪](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)可能会提供一些关于真正发生的事情的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:29:21.457

Gmail 不允许您通过 POP3 协议删除邮件。

[POP 下载后删除 Gmail 中的邮件](http://support.google.com/mail/bin/answer.py?hl=en&answer=13290)

[GMail - 行为解释](http://www.chilkatsoft.com/p/p_184.asp)

# c++ - 是否有跨平台的方法来获取 C++ 中的网络统计信息？

> ID：14561917
> 
> 赞同：0
> 
> 时间：2013-01-28T12:19:49.300
> 
> 标签：c++, networking, cross-platform

我对每个接口的系统范围的网络负载信息感兴趣。

目标平台是 linux 和 windows。

UPD 正确的答案是 libpcap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:20:32.700

如果您可以使用 Qt，答案就[在这里](https://stackoverflow.com/questions/2475266/verfiying-the-network-connection-using-qt-4-4)。看起来您*不需要*库的 GUI 部分。 [Qt](http://qt-project.org/)完全是跨平台的，并且得到了很好的[支持](http://qt.digia.com/)和记录。

如果您可以使用 boost，另一种可能性是[Boost.Asio 。](http://www.boost.org/doc/libs/1_36_0/doc/html/boost_asio.html)

[在stackoverflow](https://stackoverflow.com/questions/118945/best-c-c-network-library)中提到了boost 和[POCO](http://pocoproject.org/)。

您将来可能想查看旧的 SO 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:30:41.590

例如，您可以使用[zabbix](http://www.zabbix.com/)开始。另一种工具与[Linux 的带宽监控工具有关](http://www.dynacont.net/documentation/linux/network_monitoring/)。另外，看看[Monitoring Tools Web Based](http://www.linuxscrew.com/2012/03/22/linux-monitoring-tools/)，[Cacti](http://www.cacti.net/download_cacti.php)似乎是一个很好的解决方案。

# tinymce - 更改 tinymce 字体系列菜单的字体大小

> ID：14561928
> 
> 赞同：1
> 
> 时间：2013-01-28T12:20:23.313
> 
> 标签：tinymce, themes, font-size

我已经检查过了：[TinyMCE 增加字体系列下拉字体大小](https://stackoverflow.com/questions/14115747/tinymce-increase-font-family-dropdown-font-sizes)，但我的问题有点不同。我希望在特定文本区域上实例化 tinyMCE 实例时**动态**更改字体大小。

所以我做了一个CSS文件说：

```
.mceMenu span.mceText,.mceMenu .mcePreview {
    font-size: 14px !important;
} 
```

并在运行时像这样添加它：

```
tinyMCE.settings['content_css'] = "css/tinymcearabic.css";
tinyMCE.execCommand("mceAddControl", false, myel_id); 
```

我检查过了，路径是正确的。但这似乎并没有什么不同。

## 编辑

如果我将 CSS 直接添加到我正在使用 TinyMCE 的页面上，那么字体确实会变大，但我不能保持这种状态，因为菜单取决于触发它的事件。

所以我然后尝试使用它动态编辑它：

```
$('.mceText').css('font-size','20px'); 
```

又没用。这是一个小提琴： http: [//fiddle.tinymce.com/EBcaab](http://fiddle.tinymce.com/EBcaab)

有任何想法吗？

## 编辑 2

如果将其硬编码到代码中，我正在寻找的效果很容易得到上面的小提琴：

```
<style>
.mceMenu span.mceText,.mceMenu .mcePreview {
    font-size: 14px !important;
}

</style> 
```

唯一的问题是这是一个静态解决方案，而我需要动态地获得这种效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:11:49.547

好的，当您重新初始化编辑器时，您将需要使用一个 init 对象并分配一个不同的 content_css。看看这个小提琴： http: [//fiddle.tinymce.com/FBcaab/1](http://fiddle.tinymce.com/FBcaab/1)。您将需要创建 css 文件并使用 content_css 参数将其嵌入到 init 中。

# memory - GC Heap 很大，但 DumpHeap 很小

> ID：14561929
> 
> 赞同：1
> 
> 时间：2013-01-28T12:20:37.317
> 
> 标签：memory, clr, heap-memory, windbg

我正在尝试使用 windbg 分析转储文件的高内存使用率（进程达到 15GB）。

该应用程序非常密集并且处理高流量，并且我们过去处理过内存问题，但通常我们通过 -DumpHeap stat 解决问题，它向我们显示未按时释放的对象..

但这一次，情况有所不同。似乎虽然 -EEHeap 显示 GC 堆大小确实超过了 14GB，但 -DumpHeap stat 没有显示任何接近这个值的东西。我总结了 -DumpHeap stat 中的所有对象（包括“免费”对象），仅达到 700MB。

基于此处提出的问题：（[WinDbg 地址摘要](https://stackoverflow.com/questions/11876516/windbg-address-summary)）我还运行了 !address -summary，它显示 14.8GB 为未分类但 MEM_COMMIT 为 14.8GB，因此它看起来与本机泄漏的情况不同。

我可以从这里去哪里？那些缺少 14GB 的在哪里？

谢谢，这里是 !EEHeap 和 !address -summary 的输出

```
 0:000> !EEHeap
Loader Heap:
--------------------------------------
System Domain: 000007feed372f20
LowFrequencyHeap: Size: 0x0(0)bytes.
HighFrequencyHeap: 000007ff00022000(8000:8000) Size: 0x8000(32768)bytes.
StubHeap: 000007ff0002a000(2000:1000) Size: 0x1000(4096)bytes.
Virtual Call Stub Heap:
  IndcellHeap: Size: 0x0(0)bytes.
  LookupHeap: Size: 0x0(0)bytes.
  ResolveHeap: Size: 0x0(0)bytes.
  DispatchHeap: Size: 0x0(0)bytes.
  CacheEntryHeap: Size: 0x0(0)bytes.
Total size: 0x9000(36864)bytes
--------------------------------------
Shared Domain: ed373820
LowFrequencyHeap: 000007ff000e0000(2000:2000) 000007ff002d0000(10000:c000) Size: 0xe000(57344)bytes.
HighFrequencyHeap: 000007ff000e2000(8000:8000) 000007ff00910000(10000:10000) 000007ff00dc0000(10000:7000) Size: 0x1f000(126976)bytes.
StubHeap: 000007ff000ea000(2000:2000) 000007ff002c0000(10000:7000) Size: 0x9000(36864)bytes.
Virtual Call Stub Heap:
  IndcellHeap: 000007ff000f0000(5000:1000) Size: 0x1000(4096)bytes.
  LookupHeap: 000007ff000fa000(3000:1000) Size: 0x1000(4096)bytes.
  ResolveHeap: 000007ff00122000(3e000:3000) Size: 0x3000(12288)bytes.
  DispatchHeap: 000007ff000fd000(25000:1000) Size: 0x1000(4096)bytes.
  CacheEntryHeap: 000007ff000f5000(5000:1000) Size: 0x1000(4096)bytes.
Total size: 0x3c000(245760)bytes
--------------------------------------
Domain 1: 184070
LowFrequencyHeap: 000007ff00030000(2000:1000) 000007ff00160000(10000:10000) 000007ff00170000(10000:3000) 000007ff00180000(80000:80000) 000007ff00210000(10000:c000) 000007ff00220000(10000:10000) 000007ff00230000(10000:10000) 000007ff002a0000(10000:10000) 000007ff00320000(10000:1000) 000007ff00330000(30000:30000) 000007ff00370000(10000:e000) 000007ff003c0000(80000:80000) 000007ff00450000(10000:c000) 000007ff00460000(10000:10000) 000007ff00470000(10000:d000) 000007ff00480000(30000:2f000) 000007ff004b0000(10000:3000) 000007ff004c0000(20000:20000) 000007ff00530000(10000:10000) 000007ff00580000(10000:10000) 000007ff005d0000(10000:6000) 000007ff005f0000(40000:40000) 000007ff00630000(10000:5000) 000007ff00640000(30000:30000) 000007ff00670000(30000:30000) 000007ff006b0000(10000:10000) 000007ff006f0000(10000:10000) 000007ff00730000(10000:b000) 000007ff00760000(10000:f000) 000007ff00770000(10000:10000) 000007ff00790000(10000:10000) 000007ff007d0000(10000:10000) 000007ff00820000(10000:10000) 000007ff00850000(20000:1c000) 000007ff00880000(10000:10000) 000007ff008b0000(10000:10000) 000007ff008d0000(10000:10000) 000007ff00900000(10000:10000) 000007ff00930000(10000:10000) 000007ff00950000(10000:10000) 000007ff00990000(10000:e000) 000007ff009b0000(10000:10000) 000007ff00a10000(10000:f000) 000007ff00a30000(10000:10000) 000007ff00a70000(10000:10000) 000007ff00b00000(10000:10000) 000007ff00b40000(10000:10000) 000007ff00b70000(10000:10000) 000007ff00bc0000(10000:1000) 000007ff00bd0000(20000:20000) 000007ff00c30000(10000:10000) 000007ff00c70000(10000:e000) 000007ff00cf0000(10000:e000) 000007ff00d20000(10000:10000) 000007ff00d60000(10000:10000) 000007ff00dd0000(10000:c000) 000007ff00df0000(10000:10000) 000007ff00e10000(10000:10000) 000007ff00e70000(10000:10000) 000007ff00ea0000(10000:10000) 000007ff00ed0000(10000:10000) 000007ff00f30000(10000:5000) Size: 0x516000(5332992)bytes.
Wasted: 0x71000(462848)bytes.
HighFrequencyHeap: 000007ff00032000(8000:7000) 000007ff00200000(10000:10000) 000007ff00280000(10000:10000) 000007ff002b0000(10000:10000) 000007ff002e0000(10000:10000) 000007ff00360000(10000:10000) 000007ff003a0000(10000:f000) 000007ff00440000(10000:10000) 000007ff004e0000(10000:10000) 000007ff00500000(10000:10000) 000007ff00510000(10000:10000) 000007ff00520000(10000:10000) 000007ff00540000(10000:10000) 000007ff00560000(10000:10000) 000007ff00570000(10000:10000) 000007ff00590000(10000:10000) 000007ff005a0000(10000:10000) 000007ff005b0000(10000:10000) 000007ff005e0000(10000:10000) 000007ff006a0000(10000:10000) 000007ff006c0000(10000:10000) 000007ff006e0000(10000:10000) 000007ff00700000(10000:10000) 000007ff00710000(10000:10000) 000007ff00720000(10000:10000) 000007ff00750000(10000:10000) 000007ff00780000(10000:10000) 000007ff007a0000(10000:10000) 000007ff007c0000(10000:10000) 000007ff007e0000(10000:10000) 000007ff007f0000(10000:10000) 000007ff00810000(10000:10000) 000007ff00830000(10000:10000) 000007ff00840000(10000:10000) 000007ff00870000(10000:10000) 000007ff00890000(10000:10000) 000007ff008c0000(10000:10000) 000007ff008e0000(10000:10000) 000007ff008f0000(10000:10000) 000007ff00920000(10000:10000) 000007ff00940000(10000:10000) 000007ff00960000(10000:10000) 000007ff00970000(10000:10000) 000007ff009a0000(10000:10000) 000007ff009c0000(10000:10000) 000007ff009e0000(10000:10000) 000007ff00a00000(10000:10000) 000007ff00a20000(10000:10000) 000007ff00a40000(10000:10000) 000007ff00a60000(10000:10000) 000007ff00a80000(10000:10000) 000007ff00aa0000(10000:10000) 000007ff00af0000(10000:10000) 000007ff00b10000(10000:10000) 000007ff00b30000(10000:10000) 000007ff00b50000(10000:10000) 000007ff00b90000(10000:10000) 000007ff00bb0000(10000:10000) 000007ff00bf0000(10000:10000) 000007ff00c00000(10000:10000) 000007ff00c20000(10000:10000) 000007ff00c40000(10000:10000) 000007ff00c50000(10000:10000) 000007ff00cc0000(10000:10000) 000007ff00d00000(10000:10000) 000007ff00d30000(10000:10000) 000007ff00d50000(10000:10000) 000007ff00d80000(10000:10000) 000007ff00da0000(10000:10000) 000007ff00db0000(10000:10000) 000007ff00e20000(10000:10000) 000007ff00e80000(10000:10000) 000007ff00eb0000(10000:10000) 000007ff00ee0000(10000:10000) 000007ff00f40000(10000:1000) Size: 0x497000(4812800)bytes.
Wasted: 0x2000(8192)bytes.
StubHeap: 000007ff0003a000(2000:2000) 000007ff002f0000(10000:10000) 000007ff00300000(10000:10000) 000007ff00310000(10000:10000) 000007ff00390000(10000:10000) 000007ff009f0000(10000:10000) 000007ff00b80000(10000:10000) 000007ff00de0000(10000:d000) Size: 0x6f000(454656)bytes.
Virtual Call Stub Heap:
  IndcellHeap: 000007ff00040000(6000:6000) Size: 0x6000(24576)bytes.
  LookupHeap: 000007ff0004f000(4000:4000) 000007ff009d0000(10000:8000) Size: 0xc000(49152)bytes.
  ResolveHeap: 000007ff00084000(5c000:28000) Size: 0x28000(163840)bytes.
  DispatchHeap: 000007ff00053000(31000:14000) Size: 0x14000(81920)bytes.
  CacheEntryHeap: 000007ff00046000(9000:9000) 000007ff00b60000(10000:a000) Size: 0x13000(77824)bytes.
Total size: 0xa6a000(10919936)bytes
--------------------------------------
Jit code heap:
LoaderCodeHeap: 000007ff00ef0000(40000:d000) Size: 0xd000(53248)bytes.
HostCodeHeap: 000007ff00ec0000 Size: 0xc000(49152)bytes.
HostCodeHeap: 000007ff00e90000 Size: 0xe000(57344)bytes.
LoaderCodeHeap: 000007ff00e30000(40000:40000) Size: 0x40000(262144)bytes.
HostCodeHeap: 000007ff00d90000 Size: 0xf000(61440)bytes.
HostCodeHeap: 000007ff00d70000 Size: 0xf000(61440)bytes.
HostCodeHeap: 000007ff00d40000 Size: 0xf000(61440)bytes.
HostCodeHeap: 000007ff00ce0000 Size: 0xf000(61440)bytes.
HostCodeHeap: 000007ff00cd0000 Size: 0xf000(61440)bytes.
LoaderCodeHeap: 000007ff00c80000(40000:40000) Size: 0x40000(262144)bytes.
HostCodeHeap: 000007ff00c60000 Size: 0xb000(45056)bytes.
HostCodeHeap: 000007ff00c10000 Size: 0xf000(61440)bytes.
HostCodeHeap: 000007ff00ba0000 Size: 0xf000(61440)bytes.
LoaderCodeHeap: 000007ff00ab0000(40000:40000) Size: 0x40000(262144)bytes.
HostCodeHeap: 000007ff00a90000 Size: 0xf000(61440)bytes.
HostCodeHeap: 000007ff00a50000 Size: 0xf000(61440)bytes.
HostCodeHeap: 000007ff003b0000 Size: 0xf000(61440)bytes.
LoaderCodeHeap: 000007ff00240000(40000:40000) Size: 0x40000(262144)bytes.
Total size: 0x1c8000(1867776)bytes
--------------------------------------
Module Thunk heaps:
Module 000007feebbc1000: Size: 0x0(0)bytes.
Module 000007ff000e2568: Size: 0x0(0)bytes.
Module 000007ff000e2020: Size: 0x0(0)bytes.
Module 000007ff00032e30: Size: 0x0(0)bytes.
Module 000007fee9eb1000: Size: 0x0(0)bytes.
Module 000007feeb191000: Size: 0x0(0)bytes.
Module 000007feeaf51000: Size: 0x0(0)bytes.
Module 000007ff00038208: Size: 0x0(0)bytes.
Module 000007ff002075c0: Size: 0x0(0)bytes.
Module 000007fee9051000: Size: 0x0(0)bytes.
Module 000007fee94d1000: Size: 0x0(0)bytes.
Module 000007fee9381000: Size: 0x0(0)bytes.
Module 000007fee9c71000: Size: 0x0(0)bytes.
Module 000007ff002ea138: Size: 0x0(0)bytes.
Module 000007ff002edaf8: Size: 0x0(0)bytes.
Module 000007fee8801000: Size: 0x0(0)bytes.
Module 000007fee7ad1000: Size: 0x0(0)bytes.
Module 000007fee5551000: Size: 0x0(0)bytes.
Module 000007feedcd1000: Size: 0x0(0)bytes.
Module 000007feedbc1000: Size: 0x0(0)bytes.
Module 000007fee5251000: Size: 0x0(0)bytes.
Module 000007ff005e58a8: Size: 0x0(0)bytes.
Module 000007ff005ec7c8: Size: 0x0(0)bytes.
Module 000007ff005eeae8: Size: 0x0(0)bytes.
Module 000007ff00724518: Size: 0x0(0)bytes.
Module 000007ff0075b530: Size: 0x0(0)bytes.
Module 000007ff0075c920: Size: 0x0(0)bytes.
Module 000007fee63f1000: Size: 0x0(0)bytes.
Module 000007ff00849de0: Size: 0x0(0)bytes.
Module 000007ff00877b60: Size: 0x0(0)bytes.
Module 000007ff009a1440: Size: 0x0(0)bytes.
Module 000007ff009a1d30: Size: 0x0(0)bytes.
Module 000007ff009e7d78: Size: 0x0(0)bytes.
Module 000007ff00db1fb0: Size: 0x0(0)bytes.
Module 000007ff00db9e30: Size: 0x0(0)bytes.
Total size: 0x0(0)bytes
--------------------------------------
Module Lookup Table heaps:
Module 000007feebbc1000: Size: 0x0(0)bytes.
Module 000007ff000e2568: Size: 0x0(0)bytes.
Module 000007ff000e2020: Size: 0x0(0)bytes.
Module 000007ff00032e30: Size: 0x0(0)bytes.
Module 000007fee9eb1000: Size: 0x0(0)bytes.
Module 000007feeb191000: Size: 0x0(0)bytes.
Module 000007feeaf51000: Size: 0x0(0)bytes.
Module 000007ff00038208: Size: 0x0(0)bytes.
Module 000007ff002075c0: Size: 0x0(0)bytes.
Module 000007fee9051000: Size: 0x0(0)bytes.
Module 000007fee94d1000: Size: 0x0(0)bytes.
Module 000007fee9381000: Size: 0x0(0)bytes.
Module 000007fee9c71000: Size: 0x0(0)bytes.
Module 000007ff002ea138: Size: 0x0(0)bytes.
Module 000007ff002edaf8: Size: 0x0(0)bytes.
Module 000007fee8801000: Size: 0x0(0)bytes.
Module 000007fee7ad1000: Size: 0x0(0)bytes.
Module 000007fee5551000: Size: 0x0(0)bytes.
Module 000007feedcd1000: Size: 0x0(0)bytes.
Module 000007feedbc1000: Size: 0x0(0)bytes.
Module 000007fee5251000: Size: 0x0(0)bytes.
Module 000007ff005e58a8: Size: 0x0(0)bytes.
Module 000007ff005ec7c8: Size: 0x0(0)bytes.
Module 000007ff005eeae8: Size: 0x0(0)bytes.
Module 000007ff00724518: Size: 0x0(0)bytes.
Module 000007ff0075b530: Size: 0x0(0)bytes.
Module 000007ff0075c920: Size: 0x0(0)bytes.
Module 000007fee63f1000: Size: 0x0(0)bytes.
Module 000007ff00849de0: Size: 0x0(0)bytes.
Module 000007ff00877b60: Size: 0x0(0)bytes.
Module 000007ff009a1440: Size: 0x0(0)bytes.
Module 000007ff009a1d30: Size: 0x0(0)bytes.
Module 000007ff009e7d78: Size: 0x0(0)bytes.
Module 000007ff00db1fb0: Size: 0x0(0)bytes.
Module 000007ff00db9e30: Size: 0x0(0)bytes.
Total size: 0x0(0)bytes
--------------------------------------
Total LoaderHeap size: 0xc77000(13070336)bytes
=======================================
The garbage collector data structures are not in a valid state for traversal.
It is either in the "plan phase," where objects are being moved around, or
we are at the initialization or shutdown of the gc heap. Commands related to 
displaying, finding or traversing objects as well as gc heap segments may not 
work properly. !dumpheap and !verifyheap may incorrectly complain of heap 
consistency errors.
Number of GC Heaps: 1
generation 0 starts at 0x00000003e1d5a588
generation 1 starts at 0x00000003e14a6e88
generation 2 starts at 0x0000000002a61000
ephemeral segment allocation context: (0x00000003e1d5a588, 0x00000003e1d5a5a0)
         segment            begin         allocated             size
0000000002a60000 0000000002a61000  0000000012a5fd90 0x000000000fffed90(268430736)
000000002b850000 000000002b851000  000000003b84ff10 0x000000000fffef10(268431120)
000000003b850000 000000003b851000  000000004b84fd38 0x000000000fffed38(268430648)
000000004b850000 000000004b851000  000000005b84f370 0x000000000fffe370(268428144)
000000005b850000 000000005b851000  000000006b84f7e8 0x000000000fffe7e8(268429288)
000000007fff0000 000000007fff1000  000000008ffeed20 0x000000000fffdd20(268426528)
0000000097ff0000 0000000097ff1000  00000000a7fef398 0x000000000fffe398(268428184)
00000000a7ff0000 00000000a7ff1000  00000000b7fef3a8 0x000000000fffe3a8(268428200)
00000000b7ff0000 00000000b7ff1000  00000000c7fef860 0x000000000fffe860(268429408)
00000000c7ff0000 00000000c7ff1000  00000000d7fefee0 0x000000000fffeee0(268431072)
00000000e3ff0000 00000000e3ff1000  00000000f3feff90 0x000000000fffef90(268431248)
00000000f3ff0000 00000000f3ff1000  0000000103fefe98 0x000000000fffee98(268431000)
0000000103ff0000 0000000103ff1000  0000000113feffb0 0x000000000fffefb0(268431280)
0000000113ff0000 0000000113ff1000  0000000123feffd8 0x000000000fffefd8(268431320)
0000000123ff0000 0000000123ff1000  0000000133fefda8 0x000000000fffeda8(268430760)
0000000133ff0000 0000000133ff1000  0000000143fefbd0 0x000000000fffebd0(268430288)
0000000143ff0000 0000000143ff1000  0000000153fef658 0x000000000fffe658(268428888)
0000000153ff0000 0000000153ff1000  0000000163feffa8 0x000000000fffefa8(268431272)
0000000163ff0000 0000000163ff1000  0000000173fef0e0 0x000000000fffe0e0(268427488)
0000000195800000 0000000195801000  00000001a57ffba8 0x000000000fffeba8(268430248)
00000001a5800000 00000001a5801000  00000001b57ffca8 0x000000000fffeca8(268430504)
00000001b5800000 00000001b5801000  00000001c57ffc88 0x000000000fffec88(268430472)
00000001c5800000 00000001c5801000  00000001d57ff448 0x000000000fffe448(268428360)
00000001d5800000 00000001d5801000  00000001e57fef50 0x000000000fffdf50(268427088)
00000001e5800000 00000001e5801000  00000001f57ff1a8 0x000000000fffe1a8(268427688)
00000001f5800000 00000001f5801000  00000002057fff08 0x000000000fffef08(268431112)
0000000205800000 0000000205801000  00000002157ff0c0 0x000000000fffe0c0(268427456)
0000000215800000 0000000215801000  00000002257feff0 0x000000000fffdff0(268427248)
0000000225800000 0000000225801000  00000002357ffa28 0x000000000fffea28(268429864)
0000000235800000 0000000235801000  00000002457ffd28 0x000000000fffed28(268430632)
0000000245800000 0000000245801000  00000002557ffd38 0x000000000fffed38(268430648)
0000000255800000 0000000255801000  00000002657ff440 0x000000000fffe440(268428352)
0000000265800000 0000000265801000  00000002757ff590 0x000000000fffe590(268428688)
0000000275800000 0000000275801000  00000002857ff3e0 0x000000000fffe3e0(268428256)
0000000285800000 0000000285801000  00000002957ffef8 0x000000000fffeef8(268431096)
0000000295800000 0000000295801000  00000002a57ffb88 0x000000000fffeb88(268430216)
00000002a5800000 00000002a5801000  00000002b57fefd8 0x000000000fffdfd8(268427224)
00000002d9800000 00000002d9801000  00000002e97ffcb8 0x000000000fffecb8(268430520)
00000002e9800000 00000002e9801000  00000002f97ff420 0x000000000fffe420(268428320)
00000002f9800000 00000002f9801000  00000003097ffd88 0x000000000fffed88(268430728)
0000000324810000 0000000324811000  000000033480fc88 0x000000000fffec88(268430472)
0000000374810000 0000000374811000  000000038480fd58 0x000000000fffed58(268430680)
0000000173ff0000 0000000173ff1000  0000000183fefc00 0x000000000fffec00(268430336)
0000000183ff0000 0000000183ff1000  0000000193fefe58 0x000000000fffee58(268430936)
0000000334810000 0000000334811000  000000034480f210 0x000000000fffe210(268427792)
0000000344810000 0000000344811000  000000035480ffe8 0x000000000fffefe8(268431336)
0000000354810000 0000000354811000  000000036480f1f8 0x000000000fffe1f8(268427768)
0000000364810000 0000000364811000  000000037480f388 0x000000000fffe388(268428168)
0000000384810000 0000000384811000  000000039480f198 0x000000000fffe198(268427672)
0000000394810000 0000000394811000  00000003a480fa50 0x000000000fffea50(268429904)
00000003a4810000 00000003a4811000  00000003b480f3c8 0x000000000fffe3c8(268428232)
00000003b4810000 00000003b4811000  00000003c480ed10 0x000000000fffdd10(268426512)
00000003c4810000 00000003c4811000  00000003d480f258 0x000000000fffe258(268427864)
00000003d4810000 00000003d4811000  00000003e235a5d8 0x000000000db495d8(229938648)
Large object heap starts at 0x0000000012a61000
         segment            begin         allocated             size
0000000012a60000 0000000012a61000  0000000017bb9bf0 0x0000000005158bf0(85298160)
00000002b5800000 00000002b5801000  00000002d5801020 0x0000000020000020(536870944)
Total Size       0x382c54048(15078867016)
------------------------------
GC Heap Size       0x382c54048(15078867016)

0:000> !address -summary

--- Usage Summary ---------------- RgnCount ----------- Total Size -------- %ofBusy %ofTotal
Free                                    217      7fc`3fb62000 (   7.985 Tb)           99.82%
                          733        3`b3e80000 (  14.811 Gb)  98.71%    0.18%
Image                                   950        0`0c5a9000 ( 197.660 Mb)   1.29%    0.00%
TEB                                      42        0`00054000 ( 336.000 kb)   0.00%    0.00%
ActivationContextData                    11        0`00010000 (  64.000 kb)   0.00%    0.00%
PEB                                       1        0`00001000 (   4.000 kb)   0.00%    0.00%

--- Type Summary (for busy) ------ RgnCount ----------- Total Size -------- %ofBusy %ofTotal
MEM_PRIVATE                             621        3`ae855000 (  14.727 Gb)  98.15%    0.18%
MEM_IMAGE                              1068        0`0da22000 ( 218.133 Mb)   1.42%    0.00%
MEM_MAPPED                               48        0`04217000 (  66.090 Mb)   0.43%    0.00%

--- State Summary ---------------- RgnCount ----------- Total Size -------- %ofBusy %ofTotal
MEM_FREE                                217      7fc`3fb62000 (   7.985 Tb)           99.82%
MEM_COMMIT                             1493        3`b2ba3000 (  14.793 Gb)  98.59%    0.18%
MEM_RESERVE                             244        0`0d8eb000 ( 216.918 Mb)   1.41%    0.00%

--- Protect Summary (for commit) - RgnCount ----------- Total Size -------- %ofBusy %ofTotal
PAGE_READWRITE                          570        3`a1e76000 (  14.530 Gb)  96.84%    0.18%
PAGE_EXECUTE_READ                       113        0`0ad30000 ( 173.188 Mb)   1.13%    0.00%
PAGE_READONLY                           343        0`04137000 (  65.215 Mb)   0.42%    0.00%
PAGE_WRITECOPY                          199        0`0126e000 (  18.430 Mb)   0.12%    0.00%
PAGE_EXECUTE_READWRITE                  182        0`00a81000 (  10.504 Mb)   0.07%    0.00%
PAGE_EXECUTE_WRITECOPY                   43        0`00115000 (   1.082 Mb)   0.01%    0.00%
PAGE_READWRITE|PAGE_GUARD                42        0`000be000 ( 760.000 kb)   0.00%    0.00%
PAGE_EXECUTE                              1        0`00004000 (  16.000 kb)   0.00%    0.00%

--- Largest Region by Usage ----------- Base Address -------- Region Size ----------
Free                                      5`16fc6000      63d`e8c1a000 (   6.242 Tb)
                            2`b5800000        0`20022000 ( 512.133 Mb)
Image                                   7fe`e68ba000        0`01145000 (  17.270 Mb)
TEB                                     7ff`ffec8000        0`00002000 (   8.000 kb)
ActivationContextData                     0`00030000        0`00004000 (  16.000 kb)
PEB                                     7ff`fffd9000        0`00001000 (   4.000 kb) 
```

# postgresql - WHERE子句中的函数返回表，如何使用查询结果作为参数？

> ID：14561934
> 
> 赞同：0
> 
> 时间：2013-01-28T12:20:53.043
> 
> 标签：postgresql, postgresql-9.1

我有一个 PL/pgSQL 函数，它返回一个表，其定义如下：

```
CREATE OR REPLACE FUNCTION get_movement_aggregation(movement_table varchar,place_table varchar,geom varchar,point_gid varchar, radius numeric DEFAULT 20000, inArea geometry DEFAULT NULL)
RETURNS TABLE(place_i integer) AS
-- actual code here 
```

现在我想通过使用`inArea`从另一个表中获得的几何（参数）来使用这个函数。当我尝试以下查询时：

```
WITH x AS (
  SELECT wkb_geometry from tha_adm1 
  WHERE name_1 = 'Ubon Ratchathani' LIMIT 1
)
SELECT g.* 
FROM x,
get_movement_aggregation('movements','places','geom','place_id',14000,x.wkb_geometry) 
```

我收到以下错误：

`ERROR: function expression in FROM cannot refer to other relations of same query level`

正如我在该条款`x`的两个部分中确实提到的那样，这确实是有道理的。`FROM`

子查询返回以下内容：

```
+----------------------------------+
|   |  wkb_geometry                |
|   |  geometry(MultiPolygon,4326) |
+---+------------------------------+
| 1 | some very long number here   |
+---+------------------------------+ 
```

我只是使用这个参数来过滤我在函数中使用的记录列表。一种解决方案是使用过滤后的记录创建一个临时表并提供给该函数，但如果有一种方法可以使用子查询来做到这一点，那就太好了。

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:34:29.297

为什么不这样：

```
WITH x AS (
  SELECT wkb_geometry from tha_adm1 
  WHERE name_1 = 'Ubon Ratchathani' LIMIT 1
)
SELECT 
get_movement_aggregation('movements','places',
                         'geom','place_id',14000,x2.wkb_geometry)
FROM (SELECT * FROM x) as x2 
```

或者更简单的形式，没有`WITH`子句：

```
SELECT 
get_movement_aggregation('movements','places',
                         'geom','place_id',14000,x2.wkb_geometry)
FROM (SELECT wkb_geometry from tha_adm1 
  WHERE name_1 = 'Ubon Ratchathani' LIMIT 1) as x2 
```

或者，如果您更喜欢在最终选择列表中使用显式字段而不是函数调用：

```
SELECT g.* FROM 
 (SELECT get_movement_aggregation('movements','places',
                                  'geom','place_id',14000,x2.wkb_geometry)
    FROM (SELECT wkb_geometry from tha_adm1 
           WHERE name_1 = 'Ubon Ratchathani' LIMIT 1) as x2
 ) as g; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:08:10.053

这种形式的查询`LATERAL`在 SQL 标准中被调用。PostgreSQL 9.3 将提供对此类查询的支持，您可以在这里找到@depesz的[精彩评论。](http://www.depesz.com/2012/08/19/waiting-for-9-3-implement-sql-standard-lateral-subqueries/)

在此之前，您将不得不使用子查询，@Daniel 概述了一系列可能性。

# asp.net - 通过ajax将当前页面html发送回服务器

> ID：14561935
> 
> 赞同：0
> 
> 时间：2013-01-28T12:20:55.823
> 
> 标签：asp.net, ajax, jquery

在我的应用程序中，我通过 jquery ajax 将网页的 html 发送回服务器（因为我需要在服务器中存储此页面的副本）。代码是这样的

```
$(document).ready(function () {
    var pcontent = document.body.innerHTML;
     var url = new URI().addQuery("pcontent", pcontent);

    $.ajax({
        url: url, 
        type: "GET", 
        success: function (data) {
            alert(data.html());
        },
        complete: function () {
            alert(1);
        },
        error: function(jqXHR, error, errorThrown) {  
            if (jqXHR.status) {
                alert(jqXHR.responseText); 
            }
            else {
                alert("Something went wrong");
            }
        }
    });
    return false;
}); 
```

但这会引发错误：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<HTML>
    <HEAD>
        <TITLE>Request URL Too Long</TITLE>
        <META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii">
    </HEAD>
    <BODY>
        <h2>Request URL Too Long</h2>
        <hr>
        <p>HTTP Error 414\. The request URL is too long.</p>
    </BODY>    
</HTML> 
```

有什么办法可以做到这一点？

编辑：从我从这里得到的输入我已经改变了我的代码（改变 get to post）

```
 $(document).ready(function () {

    var pcontent = document.body.innerHTML;

    var url = new URI().addQuery("pcontent", pcontent);

    $.ajax({
        url: url, type: "POST"
      , success: function (data) {

          alert(data.html());
      },
        complete: function () {
            alert(1);
        },
        error: function (jqXHR, error, errorThrown) {
            if (jqXHR.status) {
                alert(jqXHR.responseText);
            } else {
                alert("Something went wrong");
            }
        }
    });
    return false;
}); 
```

但仍然存在相同的错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T12:32:13.507

您应该使用**发布**请求而不是**获取**请求。

```
var pcontent = document.body.innerHTML;
var url = new URI();

$.ajax({
    url: url,
    type: "POST",
    data: {"pcontent": pcontent},
    success: function (data) {
            alert(data.html());
    },
    complete: function () {
        alert(1);
    },
    error: function(jqXHR,error, errorThrown) {  
        if(jqXHR.status){
            alert(jqXHR.responseText); 
        }else{
            alert("Something went wrong");
        }
    }
});
return false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:23:02.293

那是因为 GET 变量只支持有限的数据量，使用 type: POST 而不是 type GET

```
$.ajax({
 url: url, type: "POST"
    , success: function (data) {

        alert(data.html());
    },
 complete: function () {
    alert(1);
 },
 error: function(jqXHR,error, errorThrown) {  
 if(jqXHR.status){
    alert(jqXHR.responseText); 
 }else{
    alert("Something went wrong");
 }
 }
});//indentation 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T12:23:05.897

使用 HTTP POST 请求。

```
$.ajax({
    url: url,
    type: "POST"
    // ...
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T12:23:53.417

使用`POST`请求。`GET`在 IE 中限制为 2048 个字符，在大多数其他中限制为 65,538 个字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T12:23:55.620

GET 方法发送 URL 中的所有数据。

请改用 POST 方法。

# sql-server - Xpath 查询名称而不是索引

> ID：14561937
> 
> 赞同：1
> 
> 时间：2013-01-28T12:20:59.813
> 
> 标签：sql-server, tsql, xpath

我在 sql server 的 xml 列中有以下 xml，它与 id 列一起在一个表中 -

```
<ArrayOfExtVar xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ExtVar>
    <Name xsi:type="xsd:string">Rate Code</Name>
    <Value xsi:type="xsd:string">E46</Value>
  </ExtVar>
  <ExtVar>
    <Name xsi:type="xsd:string">Middle Name</Name>
    <Value xsi:type="xsd:string">Henry</Value>
  </ExtVar>
</ArrayOfExtVar> 
```

我有以下 XPath -

```
SELECT CustID, 
ExtVars.value('(/ArrayOfExtVar/ExtVar/Value)[1]', 'Nvarchar(max)') AS RateCode,
ExtVars.value('(/ArrayOfExtVar/ExtVar/Value)[2]', ''Nvarchar(max)') AS MiddleInitial 
FROM dbo.Customer 
```

这很好，但我真正想做的是通过“名称”而不是索引（[1]）查询 xml，因为这些可能不时以不同的顺序存储。

基本上我需要知道的是如何通过“名称”的值进行查询，例如 -

```
'(/ArrayOfExtVar/ExtVar/Value)[Rate Code]' 
```

我可以向 ExtVars 节点添加一个属性并对其进行查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:52:16.647

听起来你想要

```
/ArrayOfExtVar/ExtVar[Name = 'Rate Code']/Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:49:33.417

您也可以在谓词中执行轴步骤。

```
//ExtVar[Name eq 'Rate Code']/Value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:44:42.540

我不知道 SQL Server 的 XPath 实现是否支持父 ( `..`) 运算符，但您可以试试这个：

```
/ArrayOfExtVar/ExtVar/Name[text()='Rate Code']/../Value 
```

这会找到`Name`内部文本为 的节点`'Rate Code'`，然后导航到其父节点，然后从那里转到它`Value`下面的节点。

* * *

如果您可以添加`Name`作为`ExtVar`节点的属性，那会更容易一些：

*示例 XML：*

```
...
<ExtVar name="Rate Code">
    <Value xsi:type="xsd:string">E46</Value>
</ExtVar>
... 
```

*XPath：*

```
/ArrayOfExtVar/ExtVar[@name='Rate Code']/Value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:29:47.007

你是否试图做这样的事情：

```
DECLARE @input TABLE (ID INT, ExtVars XML)

INSERT INTO @input VALUES(1, '<ArrayOfExtVar xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ExtVar>
    <Name xsi:type="xsd:string">Rate Code</Name>
    <Value xsi:type="xsd:string">E46</Value>
  </ExtVar>
  <ExtVar>
    <Name xsi:type="xsd:string">Middle Name</Name>
    <Value xsi:type="xsd:string">Henry</Value>
  </ExtVar>
</ArrayOfExtVar>')

SELECT
    Name = ExtVar.value('(Name)[1]', 'varchar(50)'),
    [Value] = ExtVar.value('(Value)[1]', 'varchar(50)')
FROM
    @input
CROSS APPLY
    ExtVars.nodes('/ArrayOfExtVar/ExtVar') AS XTbl(ExtVar)
WHERE   
    ID = 1 
```

像这样返回输出：

![在此处输入图像描述](../Images/5ccc418b71d199922dd5e8aeb4961102.png)

当然，您也可以`WHERE`为此添加一个基于名称的子句（“到达”XML 以确定结果）：

```
SELECT
    Name = ExtVar.value('(Name)[1]', 'varchar(50)'),
    [Value] = ExtVar.value('(Value)[1]', 'varchar(50)')
FROM
    @input
CROSS APPLY
    ExtVars.nodes('/ArrayOfExtVar/ExtVar') AS XTbl(ExtVar)
WHERE   
    ExtVar.value('(Name)[1]', 'varchar(50)') LIKE 'Rate%'   -- or whatever you want 
```

# ruby-on-rails - ruby on rails：rake 不适用于 rspec

> ID：14561938
> 
> 赞同：1
> 
> 时间：2013-01-28T12:21:02.547
> 
> 标签：ruby-on-rails, ruby, rspec, rake

我正在按照 Addison Wesley Ruby On Rails 书做一个教程，我目前正在学习 TDD。问题是我在安装 rspec 后使用 rake 时遇到问题，这是我在尝试“rake db:migrate”后从终端得到的：

```
 rake aborted!
undefined method `prerequisites' for nil:NilClass
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/rspec-rails-2.0.1/lib/rspec/rails/tasks/rspec.rake:3:in `<top (required)>'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/rspec-rails-2.0.1/lib/rspec-rails.rb:10:in `load'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/rspec-rails-2.0.1/lib/rspec-rails.rb:10:in `block in <class:Railtie>'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/railtie.rb:184:in `instance_exec'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/railtie.rb:184:in `block in load_tasks'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/railtie.rb:184:in `each'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/railtie.rb:184:in `load_tasks'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/engine.rb:423:in `block in load_tasks'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `each'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application/railties.rb:8:in `all'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/engine.rb:423:in `load_tasks'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/application.rb:145:in `load_tasks'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/Jay/rails_projects/sample_app/Rakefile:7:in `<top (required)>'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `eval'
/Users/Jay/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `<main>'
(See full trace by running task with --trace) 
```

我正在使用 rake 10.0.3 和 rspec 2.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:34:39.793

您需要更新到更新版本的 rspec-rails gem 来解决这个问题。

# asp.net - 应用程序中的服务器错误 - 找不到表 0

> ID：14561940
> 
> 赞同：0
> 
> 时间：2013-01-28T12:21:09.937
> 
> 标签：asp.net, deployment

在 IIS 7 中部署 ASP.NET 应用程序时，出现错误：

```
Server Error in '/' Application

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 
```

异常详细信息：System.IndexOutOfRangeException：找不到表 0。

```
 Source Error: 
    Line 46:             dsDesignation= GetChartData("select * from LHSDesignation");
    Line 47: 
    Line 48:             if (dsDesignation != null && dsDesignation.Tables[0].Rows.Count > 0)
    Line 49:             {
    Line 50:                 foreach (DataRow dr in dsDesignation.Tables[0].Rows)

    Source File: D:\Raji\LHS\LHS\Chart.aspx.cs    Line: 48 

Stack Trace: 

[IndexOutOfRangeException: Cannot find table 0.]
   System.Data.DataTableCollection.get_Item(Int32 index) +95
   LHS.Chart.Page_Load(Object sender, EventArgs e) in D:\Raji\LHS\LHS\Chart.aspx.cs:48
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

页面加载的代码是：

```
protected void Page_Load(object sender, EventArgs e)
        {
            string tmpDesignation = string.Empty;
            conString =Convert.ToString(ConfigurationManager.AppSettings["conString"]);
            strDesignation = Convert.ToString(ConfigurationManager.AppSettings["Designation"]);
            conection = new SqlConnection(conString);

            if (HttpContext.Current.Session["UserLogin"] != null)
            {
                ClientScript.RegisterStartupScript(this.GetType(), "", "$.prompt('Please login to Update Score')", true);
            }

            dsDesignation= GetChartData("select * from LHSDesignation");

            if (dsDesignation != null && dsDesignation.Tables[0].Rows.Count > 0)
            {
                foreach (DataRow dr in dsDesignation.Tables[0].Rows)
                {
                    dnDesignatin.Add(Convert.ToString(dr["DesignationName"]), Convert.ToString(dr["TargetScore"]));
                }
            } 
```

请帮助我解决此错误 在 IIS 7 中运行需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:13:46.863

我现在可以成功运行该应用程序。我做了以下事情：

1.  在 SQL SERVER 中创建了新的登录“IIS APPPOOL\LHS”

2.  在 C 中创建了一个名为“TempImageFiles”的文件夹：然后成功运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-17T10:01:48.457

在应用程序池启用 32 位应用程序中解决了我的问题。

# c++ - 如何一次将多个整数传递给一个向量？

> ID：14561941
> 
> 赞同：79
> 
> 时间：2013-01-28T12:21:21.453
> 
> 标签：c++, c++11, vector, push-back

目前当我必须`vector.push_back()`多次使用时。

我目前使用的代码是

```
 std::vector<int> TestVector;
  TestVector.push_back(2);
  TestVector.push_back(5);
  TestVector.push_back(8);
  TestVector.push_back(11);
  TestVector.push_back(14); 
```

有没有办法只使用`vector.push_back()`一次并将多个值传递给向量？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2016-10-24T10:42:26.043

您可以使用初始化列表来做到这一点：

```
std::vector<unsigned int> array;

// First argument is an iterator to the element BEFORE which you will insert:
// In this case, you will insert before the end() iterator, which means appending value
// at the end of the vector.
array.insert(array.end(), { 1, 2, 3, 4, 5, 6 }); 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-01-28T12:22:27.987

尝试将数组传递给向量：

```
int arr[] = {2,5,8,11,14};
std::vector<int> TestVector(arr, arr+5); 
```

您总是可以调用[std::vector::assign](http://en.cppreference.com/w/cpp/container/vector/assign)将数组分配给向量，调用 std::vector::insert 添加多个数组。

如果你使用 C++11，你可以尝试：

```
std::vector<int> v{2,5,8,11,14}; 
```

或者

```
 std::vector<int> v = {2,5,8,11,14}; 
```

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2013-01-28T12:26:23.450

您也可以使用[vector::insert](http://www.cplusplus.com/reference/vector/vector/insert/)。

```
std::vector<int> v;
int a[5] = {2, 5, 8, 11, 14};

v.insert(v.end(), a, a+5); 
```

**编辑：**

当然，在实际编程中，您应该使用：

```
v.insert(v.end(), a, a+(sizeof(a)/sizeof(a[0])));  // C++03
v.insert(v.end(), std::begin(a), std::end(a));     // C++11 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-09-22T10:09:01.417

使用**vector::insert (const_iterator position, initializer_list il);** [http://www.cplusplus.com/reference/vector/vector/insert/](http://www.cplusplus.com/reference/vector/vector/insert/)

```
#include <iostream>
#include <vector>

int main() {
  std::vector<int> vec;
  vec.insert(vec.end(),{1,2,3,4});
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-28T14:07:48.487

您还可以使用[Boost.Assignment](http://www.boost.org/doc/libs/1_52_0/libs/assign/doc/index.html)：

```
const list<int> primes = list_of(2)(3)(5)(7)(11);

vector<int> v; 
v += 1,2,3,4,5,6,7,8,9; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-07-29T03:13:51.610

这是三种最直接的方法：

1) 从初始化列表初始化：

```
std::vector<int> TestVector = {2,5,8,11,14}; 
```

2）从初始化列表分配：

```
std::vector<int> TestVector;
TestVector.assign( {2,5,8,11,14} ); // overwrites TestVector 
```

3) 在给定点插入一个初始化列表：

```
std::vector<int> TestVector;
...
TestVector.insert(end(TestVector), {2,5,8,11,14} ); // preserves previous elements 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-22T12:06:43.020

这些天（`c++17`）很容易：

```
auto const pusher([](auto& v) noexcept
  {
    return [&](auto&& ...e)
      {
        (
          (
            v.push_back(std::forward<decltype(e)>(e))
          ),
          ...
        );
      };
  }
);

pusher(TestVector)(2, 5, 8, 11, 14); 
```

编辑：对于真正喜欢冒险的人（c++20）：

```
template <typename F, class Tuple>
constexpr void operator|(Tuple&& t, F f)
{
  [&]<auto ...I>(std::index_sequence<I...>) noexcept(noexcept((f(std::get<I>(t)), ...)))
  {
    (f(std::get<I>(t)), ...);
  }
  (std::make_index_sequence<std::tuple_size_v<std::remove_reference_t<Tuple>>>());
}

std::forward_as_tuple(2, 5, 8, 11, 14) | [&](auto&& e){ TestVector.push_back(std::forward<decltype(e)>(e)); } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-07-17T21:04:07.690

由于`c++17`您可以使用以下方法：

```
#include <iostream>
#include <vector>

using namespace std;

vector<int> vec;
template<typename... T>
void vecPush(const T& ... x) {
    (vec.push_back(x), ...);
}

int main() {
    vecPush(4, 10, 4);
    for(const auto& a : vec)
        cout << a << " ";
    return 0;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-02-22T17:15:17.930

是的，你可以，在你的情况下：

```
vector<int>TestVector;`
for(int i=0;i<5;i++)
{

    TestVector.push_back(2+3*i);

} 
```

# java - Jtable RowSorter 图标

> ID：14561946
> 
> 赞同：1
> 
> 时间：2013-01-28T12:21:43.850
> 
> 标签：java, swing, icons, jtable, tablerowsorter

我有一个使用 RowSorter(Java 1.6) 的 JTable，并且我使用的是使用 Java 1.4 实现的外观，当时没有在 Java 中添加 RowSorter。现在我的问题是：当我点击表格标题时，表格被排序，但表格标题上没有出现 RosSorter 图标。我以某种方式需要那个图标，我无法升级现有的外观和感觉。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:44:45.273

基本的方法是包装 LAF 提供的渲染器，让它配置渲染组件，另外让它根据需要绘制一个排序图标。就像是：

```
final TableCellRenderer r = table.getTableHeader().getDefaultRenderer();
TableCellRenderer wrapper = new TableCellRenderer() {

    @Override
    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus,
            int row, int column) {
        Component comp = r.getTableCellRendererComponent(table, value, isSelected, 
            hasFocus, row, column);
        if (comp instanceof JLabel) {
            JLabel label = (JLabel) comp;
            label.setIcon(getSortIcon(table, column));
        }
        return comp;
    }

    /**
     * Implements the logic to choose the appropriate icon.
     */
    private Icon getSortIcon(JTable table, int column) {
        SortOrder sortOrder = getColumnSortOrder(table, column);
        if (SortOrder.UNSORTED == sortOrder) {
            return null;
        }
        return SortOrder.ASCENDING == sortOrder ? ascendingIcon : descendingIcon;
    }

    private SortOrder getColumnSortOrder(JTable table, int column) {
        if (table == null || table.getRowSorter() == null) {
            return SortOrder.UNSORTED;
        }
        List<? extends SortKey> keys = table.getRowSorter().getSortKeys();
        if (keys.size() > 0) {
            SortKey key = keys.get(0);
            if (key.getColumn() == table.convertColumnIndexToModel(column)) {
                return key.getSortOrder();
            }
        }
        return SortOrder.UNSORTED;
    }

};
table.getTableHeader().setDefaultRenderer(wrapper); 
```

这是最简单的情况，如果呈现组件是 JLabel 并且不以其他方式使用其图标属性，则可以工作。

# windows - 在 Windows 的 localhost 上使用 Red5 1.0.0 RC1 和 jdk1.7 启动应用程序的问题

> ID：14561947
> 
> 赞同：0
> 
> 时间：2013-01-28T12:21:44.133
> 
> 标签：windows, localhost, red5

我已经用 jdk1.7 在我的本地主机上安装了 red51.0.0RC1，但我无法启动应用程序。我正在连接.... /installer/ 在 /demos/port_tester.html 上，我再次连接...请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:55:54.720

尝试！在防火墙中打开以下端口 TCP/843,TCP/1935,TCP/5229,TCP/5080

# c# - 使用 ODP.NET 进行 LDAP 查找，托管驱动程序 Beta (Oracle.ManagedDataAccess.dll) 在 C# 应用程序中失败

> ID：14561952
> 
> 赞同：1
> 
> 时间：2013-01-28T12:22:08.123
> 
> 标签：c#, oracle, ldap, odp.net, data-access

我在我的 C# 应用程序中使用[ODP.NET、托管驱动程序 Beta](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html) (Oracle.ManagedDataAccess.dll) 来访问 Oracle 数据库。这是为了替换使用 ODP.NET 的本机版本，以删除对 Oracle 客户端 10g/11g/等的所有本地依赖项。这样就不必在本地安装。这是我在[这里](https://stackoverflow.com/a/13970965/197591)找到的解决方案。

这是我的 C# 代码：

```
new OracleConnection("Data Source=ABCDEFG1;User Id=myuserid;Password=mypassword;").Open(); 
```

到达此行并`OracleConnection`成功创建对象，从而表明所有依赖项均已成功加载。但是，它会*在*调用`Open()`. 错误信息是：

> 网络传输：无法解析连接主机名

我的组织使用 LDAP 执行主机名查找，这是通过 ORA 文件使用 DIRECTORY_SERVER 设置完成的。但是，我很难让它使用 ODP.NET 的托管版本来执行此操作。ORA 文件存储在 C:\Apps\oracle\network\admin 中。

tnsping 我的数据源（'ABCDEFG1'）工作正常。因此，我使用了 tnsping 的输出，并使用此输出在 tnsnames.ora 中为 ABCDEFG1 添加了一个条目。然后我的应用程序连接成功。所以，我知道它肯定是在查找和使用 ORA 文件，但是由于某种原因，它不会执行非托管 ODP.NET（在其他应用程序中）使用的 LDAP 查找。

使用这个新的托管 ODP.NET 的人是否知道这个问题或我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:34:25.593

[我在 Oracle 论坛上](https://forums.oracle.com/forums/thread.jspa?threadID=2491603)问过同样的问题，那里有人给出了[答案](https://forums.oracle.com/forums/message.jspa?messageID=10817895#10817895)。托管 ODP.NET 似乎不支持 LDAP，这在其[发行说明](http://www.oracle.com/technetwork/database/windows/downloads/odpmbetainstall-1696475.html)中。

不过，我确实有一个[进一步的问题](https://stackoverflow.com/questions/14566632)，如果有人可以通过回答这个问题来进一步帮助我，我会很高兴。

非常感谢。

# c++ - IE9 BHO 中 DocumentComplete (DISPID_DOCUMENTCOMPLETE) 中的窗口无效

> ID：14561953
> 
> 赞同：3
> 
> 时间：2013-01-28T12:22:09.567
> 
> 标签：c++, events, internet-explorer-9, bho, mshtml

我正在开发 BHO，但在**IE9**中处理事件时遇到问题。我处理**DocumentComplete** (DISPID_DOCUMENTCOMPLETE)，然后获得**IHTMLWindow2**及其**IHTMLLocation**以供将来操作。

**代码（简化）**

BHO 类使用

```
public IDispEventImpl<1, CBHO, &DIID_DWebBrowserEvents2, &LIBID_SHDocVw, 1, 0>, 
```

**在SetSite**中为浏览器事件提供建议

 **```
STDMETHODIMP CBHO::SetSite(IUnknown *punkSite)
{
    if(punkSite != NULL)
    {
        CComQIPtr<IServiceProvider> pServiceProvider = punkSite;
        pServiceProvider->QueryService(SID_SWebBrowserApp, IID_IWebBrowser2, (void**)&m_pWebBrowser);
        IDispEventImpl<1, CBHO, &DIID_DWebBrowserEvents2, &LIBID_SHDocVw, 1, 0>::DispEventAdvise(m_pWebBrowser);
    }
...
} 
```

水槽图

```
BEGIN_SINK_MAP(CBHO)
    SINK_ENTRY_EX(1, DIID_DWebBrowserEvents2, DISPID_DOWNLOADCOMPLETE, OnDownloadComplete)
    SINK_ENTRY_EX(1, DIID_DWebBrowserEvents2, DISPID_NAVIGATECOMPLETE2, OnNavigateComplete2)
    SINK_ENTRY_EX(1, DIID_DWebBrowserEvents2, DISPID_ONQUIT, OnQuit)
    SINK_ENTRY_EX(1, DIID_DWebBrowserEvents2, DISPID_WINDOWSTATECHANGED, OnWindowStateChanged)
    SINK_ENTRY_EX(1, DIID_DWebBrowserEvents2, DISPID_PROPERTYCHANGE, OnPropertyChange)
    SINK_ENTRY_EX(1, DIID_DWebBrowserEvents2, DISPID_BEFORENAVIGATE2, BeforeNavigate2)
    SINK_ENTRY_EX(1, DIID_DWebBrowserEvents2, DISPID_DOCUMENTCOMPLETE, DocumentComplete)
END_SINK_MAP() 
```

DocumentComplete 事件处理程序：

```
void _stdcall CBHO::DocumentComplete( IDispatch *pDisp, VARIANT *URL)
{
    CComQIPtr<IWebBrowser2> pBrowser(pDisp);
    CComPtr<IDispatch> pDispDoc;
    pBrowser->get_Document(&pDispDoc);
    CComQIPtr<IHTMLDocument2> pDoc(pDispDoc);;
    CComPtr<IHTMLWindow2> wnd;
    pDoc->get_parentWindow(&wnd);

    CComPtr<IHTMLLocation> pLoc;
    HRESULT hr = wnd->get_location(&pLoc);
    CComBSTR locHref; 
    hr=oLoc->get_href(&locHref);  //"Access denied" error here
} 
```

这在大多数情况下都是正确的，**除了新选项卡中的打开链接**（使用中键单击或带有 target="_blank" 的链接）。在这个新标签案例中，我得到 DocumentComplete 事件，然后得到指向 IHTMLWindow2 和 IHTMLLocation 的非 NULL wnd 指针，但是当我尝试使用 pLoc 指针进行任何操作时，例如获取 href 或其他任何内容时，我得到“访问被拒绝错误”错误. 另外，当检查*doc.documentElement.outerHTML*我得到了

```
<HTML><HEAD></HEAD>
<BODY>
<P>&nbsp;</P></BODY></HTML> 
```

这不是目标页面的内容。

同时在 IE10 中，此代码按预期工作。

任何人都可以请教，我错在哪里以及为什么我在 DocumentComplete 中得到无效对象？**

# php - 在包含带有“&”符号的值的变量中传递 URL

> ID：14561959
> 
> 赞同：1
> 
> 时间：2013-01-28T12:22:46.923
> 
> 标签：php

我想在一个变量中传递 Url，这个变量包含带有值的 url。
例如：

```
$addr = "http://".$_SERVER['SERVER_NAME']."/".$_SERVER['REQUEST_URI']."";
echo $addr; 
```

这一步会给我`http://localhost/index.php?page=3&var1=A&var2=B`
当我将这个 $addr var 传递到另一个页面并回显它时，我只会得到``http://localhost/index.php?page=3`
它的样子，当有 & 签名它消失了。我该怎么办？有没有办法传递这个变量并回显整个变量？
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T12:25:42.623

你会想要[`urlencode`](http://php.net/manual/en/function.urlencode.php)他们。一个快速的谷歌搜索告诉我，简单地替换`&`就`%26`足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:31:29.533

尝试使用`$_SERVER['QUERY_STRING']`至少获得问号后的所有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:44:54.567

您可以使用`$_SERVER['HTTP_REFERER']`（但要小心，因为它不是 100% 可靠的）。

另一种选择是将其添加到 URL。

```
$addr = "http://".$_SERVER['SERVER_NAME']."/".$_SERVER['REQUEST_URI']."";
$addr = urlencode($addr);
$yourUrl = 'http://wwww.google.com?var1=4'; // some url
header("Location:{$yourUrl}&from={$addr}"); 
```

就是这样。

# c# - 向 GridView DevExpress 添加新列

> ID：14561965
> 
> 赞同：3
> 
> 时间：2013-01-28T12:23:02.467
> 
> 标签：c#, winforms, excel, devexpress

我正在从 Excel 导入工作表。我需要在网格末尾添加一个新单元格，其中包含有关空单元格的消息，我将它们保存在一个名为 msg 的数组中；

```
 private void simpleButton1_Click(object sender, System.EventArgs e)
    {
        try
        {
            OleDbConnection con = new OleDbConnection();
            con.ConnectionString = "Provider=Microsoft.Ace.OLEDB.12.0;Data Source=C:\\Users\\pc\\Documents\\Emp.xlsx;Extended Properties=\"Excel 12.0;HDR=Yes\"";

            con.Open();
            DataTable dtSchema;
            dtSchema = con.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });
            OleDbCommand Command = new OleDbCommand ("select * FROM [" + dtSchema.Rows[0]["TABLE_NAME"].ToString() + "]", con);
            OleDbDataAdapter da = new OleDbDataAdapter(Command);
            DataSet ds = new DataSet ();
            da.Fill(ds);
            dataGrid1.DataSource = ds.Tables[0];
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }   

        string[] msg = new string[50];
        for (int i = 0; i < gridView3.RowCount ; i++)
        {
            System.Data.DataRow Rows = gridView3.GetDataRow(i);
            string cellvalue = Rows[0].ToString();
            if (cellvalue == "")
            {
                msg[0] = "Missing 'First Name'";
            }
            cellvalue = Rows[1].ToString();
            if (cellvalue == "")
            {
                msg[1] = "Missing 'Father Name'";
            }
            cellvalue = Rows[2].ToString();
            if (cellvalue == "")
            {
                msg[2] = "Missing 'Last Name'";
            }       
        } 
```

我正在使用 XtraGrid Control.. 如何添加此列添加 抱歉，我是 DevExpress 的新手，谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T12:34:21.527

我建议您使用 XtraGrid [Unbound Columns](http://documentation.devexpress.com/#windowsforms/CustomDocument1477)，您可以在其中编写自定义文本。

将 UnBound Column 添加到 Xtragrid 的示例代码片段：

```
using DevExpress.XtraGrid.Views.Base;
using DevExpress.XtraGrid.Columns;

private void Form1_Load(object sender, System.EventArgs e) {
   // ...
   gridControl1.ForceInitialize();

   // Create an unbound column.
   GridColumn unbColumn = gridView1.Columns.AddField("Total");
   unbColumn.VisibleIndex = gridView1.Columns.Count;
   unbColumn.UnboundType = DevExpress.Data.UnboundColumnType.Decimal;
   // Disable editing.
   unbColumn.OptionsColumn.AllowEdit = false;
   // Specify format settings.
   unbColumn.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
   unbColumn.DisplayFormat.FormatString = "c";
   // Customize the appearance settings.
   unbColumn.AppearanceCell.BackColor = Color.LemonChiffon;
}

// Returns the total amount for a specific row.
decimal getTotalValue(int listSourceRowIndex) {
    DataRow row = nwindDataSet.Tables["Order Details"].Rows[listSourceRowIndex];
    decimal unitPrice = Convert.ToDecimal(row["UnitPrice"]);
    decimal quantity = Convert.ToDecimal(row["Quantity"]);
    decimal discount = Convert.ToDecimal(row["Discount"]);
    return unitPrice * quantity * (1 - discount);
}

// Provides data for the Total column.
private void gridView1_CustomUnboundColumnData(object sender, CustomColumnDataEventArgs e) {
   if (e.Column.FieldName == "Total" && e.IsGetData) e.Value = 
     getTotalValue(e.ListSourceRowIndex);
} 
```

或者您可以使用[CustomColumnDisplayText](http://documentation.devexpress.com/#WindowsForms/CustomDocument3077)事件来显示自定义文本 Xtragrid。

```
using DevExpress.XtraGrid.Views.Base;

    private void gridView1_CustomColumnDisplayText(object sender, 
    CustomColumnDisplayTextEventArgs e) {
       if(e.Column.FieldName == "Discount")
          if(Convert.ToDecimal(e.Value) == 0) e.DisplayText = "";
    } 
```

要了解[如何创建列并将它们绑定到数据字段](http://documentation.devexpress.com/#WindowsForms/CustomDocument639)，请参阅文档：

[列和卡片字段概述](http://documentation.devexpress.com/#WindowsForms/CustomDocument638)

```
using DevExpress.XtraGrid.Views.Base;

ColumnView View = gridControl1.MainView as ColumnView;
DialogResult answer = MessageBox.Show("Do you want to create columns for all fields?", 
  "Confirmation", MessageBoxButtons.YesNo, MessageBoxIcon.Question);
if (answer == DialogResult.Yes)
   View.PopulateColumns();
else {
   string[] fieldNames = new string[] {"ProductID", "ProductName", "QuantityPerUnit", "UnitPrice"};
   DevExpress.XtraGrid.Columns.GridColumn column;
   View.Columns.Clear();
   for (int i = 0; i < fieldNames.Length; i++) {
      column = View.Columns.AddField(fieldNames[i]);
      column.VisibleIndex = i;
   }
} 
```

希望这有帮助..

# java - 10 秒后执行方法

> ID：14561968
> 
> 赞同：0
> 
> 时间：2013-01-28T12:23:09.130
> 
> 标签：java, android

我想创建一个在 10 秒后执行方法的程序，如何在 java 或 android 中执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:25:52.043

您可以使用[ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)，并提交调用您的方法的 Runnable 或 Callable 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T12:36:22.373

试试这个代码，

```
 final Handler mTimerHandler = new Handler();
       final Handler threadHandler = new Handler();
       new Thread() {
               @Override
               public void run() {
                       threadHandler.postDelayed(new Runnable() {
                               public void run() {

                               }
                       }, 5000);
               }
       }.start(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T12:25:07.097

看一下[TimerTask](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimerTask.html)：可以由 Timer 安排一次或重复执行的任务。

示例：[安排定期任务](http://www.javapractices.com/topic/TopicAction.do?Id=54)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T12:25:14.277

你应该看看[Timer](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)和[TimerTask](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimerTask.html)。这是一个关于这个的[教程](http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T12:26:14.483

对于 android 我使用[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)

# ios - 关于核心数据库设计

> ID：14561969
> 
> 赞同：0
> 
> 时间：2013-01-28T12:23:19.580
> 
> 标签：ios, database, database-design, core-data

我正在开发一个 IOS 应用程序一个月，我觉得我已经准备好创建数据库了。因此，当我在学校学习时，我拿起铅笔开始创建我的数据库设计。

然后我开始阅读核心数据指南，事实上我已经使用过核心数据，但它是在较小的项目中。因此，我阅读了有关托管对象的信息，它们似乎总是完全适合应用程序的模型对象 (MVC)。

所以这是我的问题。我是否必须将托管对象编写为 sqlLite 数据库 shema（带有拆分表等......）并开始编写一些方法来从这些表中构造我的模型对象？或者我应该将托管对象精确地写为模型对象吗？它们将更容易重建，但效率会降低吗？

换一种方式问：核心数据库shema应该看起来像带有拆分表的sqlLit数据库还是应该看起来像我的一组模型对象？

我希望我的问题很清楚。

谢谢，

亚历山大

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:33:01.160

如果你想使用核心数据，你不应该以任何方式与 SQLite 数据库交互。核心数据存储对象的确切方式对您来说应该是不透明的。

没有什么可以阻止您自己编写数据库层。您可以直接创建 SQLite 数据库并与之交互，并自己完成所有操作。

一般的建议是核心数据已经存在很长时间了，你在创建对象和保持它们在线程间同步、缓存和访问速度方面遇到的任何问题都已经被核心数据团队遇到并修复了。节省一些工作，站在巨人的肩膀上，使用 Core Data。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:01:57.147

仅仅因为您已经用 iOS 标记了您的问题，您可以做的最好的事情之一就是忘记您以前在关系数据库中使用的传统模型关系技术（尤其是用于 Web 应用程序的技术），并根据需要构建 NSManagedObject 图也关于您在 UI 中的使用。

当你有像 UITableView 这样的东西时尤其如此。例如，如果您在表格单元格中仅显示标题和描述，然后您有包含所有数据的详细视图，那么将您的图表建模如下是非常有意义的：

```
EntityMain {
  NSString *title,
  NSString *desc,
  // other that may be useful, such as a state...ecc
  toOne relationship --> EntityDesc
}

EntityDesc {
  NSString *prop1,
  NSString *prop2,
  ......
  ....
  NSString *prop 20
} 
```

例如，通过 NSFetchedResultsController 检索 EntityMain，而在详细视图中，您可以检索整个对象。在这种情况下，您不会获取不必要的数据，并且性能会受益。

如果您希望使用单独的 NSManagedObjectContext 进行详细编辑，这也将帮助您。

# php - 再次进入同一页面时会话变量不起作用

> ID：14561973
> 
> 赞同：1
> 
> 时间：2013-01-28T12:23:41.063
> 
> 标签：php, session, drupal, drupal-7

嗨，我正在尝试在 drupal 视图中添加一个添加到购物车的链接，并显示每个项目并将其更改为在单击它时从购物车中删除。并实现了这一点。并且所选项目的 id 正在存储在 session 中。如果我关闭视图并再次打开它，我希望从购物车中删除我选择的项目链接，但它不会发生。

视图-视图-字段--iiteneries--nid.tpl.php

```
<?php
session_start();
if (isset($_SESSION["iteneries"][$output])){
?>
<a id="iteneries_<?php print $output; ?>" href="javascript:void(0)" class="ccc" onclick="remove_from_cart(<?php print $output; ?>,'iteneries')">Remove from cart</a>
<?php }
else{ 
?>
<a id="iteneries_<?php print $output; ?>" href="javascript:void(0)" class="ccc" onclick="add_to_cart(<?php print $output; ?>,'iteneries')">Add to cart</a>
<?php } 
```

?>

提前感谢您的帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:34:03.747

首先，您没有以正确的方式在 Drupal 中使用会话。据我所知，您不必包含 session_start() 即可使用 session。Drupal 会自动为您执行此操作。其次，检查您的数据是否存储在会话变量中，只有我们`print_r($_SESSION)`（`dpm($_SESSION)`如果您使用的是 Devel 模块）来调试会话变量。如果您没有看到您的信息存储在 $_SESSION 变量中，请检查添加到购物车逻辑，您将在其中添加 $_SESSION 变量中的值。

# c# - WCF REST 返回具有 2 个属性的 JSON

> ID：14561982
> 
> 赞同：-2
> 
> 时间：2013-01-28T12:24:28.387
> 
> 标签：c#, .net, json, wcf

我有以下问题。我需要在开始时返回带有 2 个属性的 JSON，并且 1 属性将具有从表中读取的多个值。另一种只是返回一个代码。您能否指导我完成在一个类实例中返回这两个对象的步骤。JSON 需要看起来像这样。

和标签必须是 2 个对象`GetAllCustomersResult`。`FoundData`

```
{
"GetAllCustomersResult": [
    {
        "City": "Kimberley",
        "CompanyName": "My Company",
        "CustomerID": "Mary"
    },
    {
        "City": "London",
        "CompanyName": "My Company",
        "CustomerID": "Delia"
    },
    {
        "City": "Miami",
        "CompanyName": "My Company",
        "CustomerID": "Haley"
    }
]
} 
```

这是我的代码。

```
public class Service1 : IService1

  {
    public wsCustomer[] GetAllCustomers()
    {
        NorthwindDataContext dc = new NorthwindDataContext();
        List<wsCustomer> results = new List<wsCustomer>()
        {
            new wsCustomer { CustomerID = "Mary", CompanyName = "My Company", City = "Kimberley" },
            new wsCustomer { CustomerID = "Delia", CompanyName = "My Company", City = "London" },
            new wsCustomer { CustomerID = "Haley", CompanyName = "My Company", City = "Miami" } 
        };

        return results.ToArray();
    }
    public string founddata()
    {
        string foundCust = "1";
        return foundCust;
    }

}

} 
```

我的运营合同：

```
[OperationContract]
    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle =       WebMessageBodyStyle.Wrapped, UriTemplate = "getAllCustomers")]
    wsCustomer[] GetAllCustomers(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:06:06.893

只需将结果包装在另一个类中并返回该类：

```
public class Results
{
    public wsCustomer[] Customers {get;set;}
    public int Result {get;set;}
} 
```

# ruby-on-rails - 在 Spree 支持的 Ruby on Rails 电子商务应用程序中集成印度支付网关 (CCAvenue)

> ID：14561985
> 
> 赞同：5
> 
> 时间：2013-01-28T12:24:32.440
> 
> 标签：ruby-on-rails, payment-gateway, spree, ccavenue

目前正在开发电子商务网络应用程序。它是由 Spree 在 Ruby on Rails 平台上开发的。
我无法在此应用程序中集成任何印度支付网关。
我尝试了 CCAvenue，但遇到了问题。即使我找不到任何使用它的命令。
这也不起作用[https://github.com/meshbrain/active_merchant_ccavenue](https://github.com/meshbrain/active_merchant_ccavenue)

我也尝试过 Paypal，但 Paypal 已停止在印度的服务。

* * *

请尽快提出建议，因为我没有时间整合它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:13:03.097

**如果你使用 Spree，你必须尝试这个宝石**......

```
gem 'spree_gateway', :git => 'git://github.com/spree/spree_gateway.git', :branch => "1-1-stable" # make sure to include after spree 
```

# c# - 关于c#winform中覆盖ProcessCMDKey

> ID：14561986
> 
> 赞同：0
> 
> 时间：2013-01-28T12:24:37.757
> 
> 标签：c#, winforms

我希望我的应用程序响应左箭头和右箭头键。所以我写了

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData) 
```

当我点击键盘左侧的Ctrl时，会调用这个函数，keyData的值为

```
keyData = LButton | ShiftKey | Control 
```

这是为什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T12:44:55.023

调试器被 Keys 枚举的声明弄糊涂了。看起来像这样：

```
[Flags]
public enum Keys {
    LButton = 1,
    ShiftKey = 0x10,
    ControlKey = 0x11,
    Control = 0x20000,
    // And lots more
} 
```

打开 [Flags] 属性后，调试器可视化器会尝试显示`keyData`. 您按下了 Control 键 Keys.ControlKey，其值为 0x11。控制标志因此打开，因此 keyData = 0x20011。

因此调试器将 0x20011 解释为位并将其设为 0x20000 | 0x00010 | 0x00001。变成“LButton | ShiftKey | Control”。`(int)keyData`除了在调试器表达式中使用之外，没有任何好方法可以让它更智能。根本问题是枚举上的 [Flags] 属性，它只是有点合适，但绝大多数 Keys 枚举值不是标志值。

# javascript - 处理浏览器的“ctrl+s”按键事件

> ID：14561988
> 
> 赞同：10
> 
> 时间：2013-01-28T12:24:51.353
> 
> 标签：javascript, jquery, event-handling, jquery-events

我试图为基于浏览器的应用程序实现`CTRL`+`S`功能。我进行了搜索，并在以下问题中遇到了两个脚本

[使用 JQuery 捕获 CTRL+S 的最佳跨浏览器方法？](https://stackoverflow.com/questions/93695/best-cross-browser-method-to-capture-ctrls-with-jquery)
[Ctrl+S 防止 Chrome 中的默认设置](https://stackoverflow.com/questions/11000826/ctrls-preventdefault-in-chrome)

但是，当我尝试实现它时，它起作用了，但是我仍然得到默认的浏览器保存**对话框/窗口**。

我的代码：对于`shortcut.js`：

```
 shortcut.add("Ctrl+S",function() {
     alert("Hi there!");
 },
 {
     'type':'keydown',
     'propagate':false,
     'target':document
}); 
```

jQuery 热键.js：

```
$(document).bind('keydown', 'ctrl+s', function(e) {
    e.preventDefault();
    alert('Ctrl+S');
    return false;
}); 
```

我相信`e.preventDefault();`应该做的伎俩，但由于某种原因它不起作用。我哪里错了。对不起，如果它很简单，还在学习jJvascript。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-28T12:32:46.323

您不需要任何这些库，只需尝试以下操作：

```
$(document).on('keydown', function(e){
    if(e.ctrlKey && e.which === 83){ // Check for the Ctrl key being pressed, and if the key = [S] (83)
        console.log('Ctrl+S!');
        e.preventDefault();
        return false;
    }
}); 
```

问题是您的代码在 停止`alert()`，阻止您的函数中断保存对话。

（仍然使用 jQuery）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-28T13:15:25.100

这只是为我使用的问题添加不同的实现。 **改编自 SO answer.Also，适用于 MAC**

```
 document.addEventListener("keydown", function(e) {
      if (e.keyCode == 83 && (navigator.platform.match("Mac") ? e.metaKey : e.ctrlKey))      {
        e.preventDefault();
        //your implementation or function calls
      }
    }, false); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-05T22:51:15.653

人们似乎仍在查看此内容，因此可能值得指出的是，此处不需要 jQuery：

```
function keydown (event) {
    var isCtrlKeyDown = navigator.platform.indexOf("Mac") > -1 ? event.metaKey : event.ctrlKey,
        isSDown = (event.key && event.key === "s") || (event.keyCode || event.which) === 83 // falls back to keycode if no event.key

    if (isCtrlKeyDown && isSDown) {
        // prevent default event on newer browsers
        if (event.preventDefault) {
            event.preventDefault()
        }

        // ... your code here ...

        // prevent default event on older browsers
        return false
    }
}

// register the event
if (document.addEventListener) {
    document.addEventListener("keydown", keydown)
} else {
    document.onkeydown = keydown
} 
```

这应该适用于所有浏览器，这也适用于在 Windows 上使用 QWERTY 的替代键盘布局的人，它报告不正确的键代码（至少在我的测试中 Windows 10 上的 Chrome 56 上）

但是，这看起来有点笨拙且令人困惑，因此如果您只支持现代浏览器，则可以执行以下操作：

```
document.addEventListener("keydown", function keydown (event) {
    if (navigator.platform === "MacIntel" ? event.metaKey : event.ctrlKey && event.key === "s") {
        event.preventDefault()

        // ... your code here ...
    }
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-01T14:33:34.307

从 2017 年开始，`e.keyCode === 83`您应该使用，而不是使用`e.key === 's'`，因为前者已被弃用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T12:34:44.243

无需使用任何插件，只需使用下面的jquery代码

```
$(document).bind('keydown', 'ctrl+s', function (e) {
        if (e.ctrlKey && (e.which == 83)) {

            e.preventDefault();
            //Your method()
            return false;
        }
    }); 
```

由于您正在使用警报，因此执行会在警报处停止，并且在您关闭警报框之前不会执行“return false”，这就是您看到默认对话框的原因。

如果您的方法运行时间较长，则最好使用 asyn 方法方法。

# documentation - 如何在 doxygen 中支持多种输出语言的评论

> ID：14561993
> 
> 赞同：0
> 
> 时间：2013-01-28T12:24:56.253
> 
> 标签：documentation, doxygen

我有一些用多种语言编写的评论，以下是评论：

```
/**
 * \brief Norwegian
 *
 * Norwegian Bokmål.
 *
 */ 
```

我使用 doxygen 生成文档。在 doxygen 配置文件中，OUTPUT_LANGUAGE 的值为英文。

在生成的文档中，“Bokmål”未正确显示，即：

```
Norwegian Bokm�l. 
```

有人知道正确显示“Bokmål”的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:58:57.617

这可能是在配置文件中设置正确的输入编码的问题，即

```
INPUT_ENCODING = ISO-8859-1 
```

默认编码为 UTF-8。

# javascript - Jquery-tokeninput 在移动设备上无法正常工作

> ID：14561994
> 
> 赞同：3
> 
> 时间：2013-01-28T12:24:56.477
> 
> 标签：javascript, jquery, jquery-mobile, jquery-tokeninput

我们使用 jquery-tokeninput 让用户搜索他们的linkedin 和 facebook 好友并进行选择。

我们面临着许多问题

1.  当用户开始在框中键入时，橙色框会突出显示文本框。但是这个橙色框并没有完全覆盖文本框，而只是文本框周围的部分文本。我们不确定这个问题是否是由于 jQuery-tokeninput 和我们的 ruby​​ 代码的一些配置不匹配造成的。

2.  有时，指示文本框上当前输入位置的指针是不可见的。当用户单击文本框并且没有看到这样的指针（闪烁的 | 行）时，就会发生这种情况。

[http://imgur.com/ii6df3L](http://imgur.com/ii6df3L)是截图之一 [http://imgur.com/7HId3id](http://imgur.com/7HId3id)，imgur.com/8KIXpa0 是截图的其他图片。

以下是我们在 erb 和 rb 文件中使用的代码

```
<div data-role="content">

    <%= form_tag(compose_referral_message_facebook_page_path, {:method => "get", "data-ajax" => false})  do %>

      <%= hidden_field_tag :job_posting_id, params[:job_posting_id] %>
      <%= hidden_field_tag :facebook_friend_list %>

      <%= label_tag(:att_uid, "Employee ID*") %>
      <%= text_field_tag(:att_uid, params[:att_uid], :placeholder => "Enter your ATTUID*") %>

      <%= label_tag(:to, "Search Connections by Name") %>

      <div data-role="content">
      <input type="text" id="facebook_friend_search_box_id", placeholder="Search Connections by Name"/>
      </div>

      <div data-role="content">
      <fieldset class="ui-grid-a">
          <div class="ui-block-a">
            <button id="facebook_friend_submit_button_id" type="submit" data-theme="b">
              Continue
            </button>
          </div>
          <div class="ui-block-b">
            <%= link_to "Cancel", show_jobs_page_url(:job_posting_id => params[:job_posting_id]), {"data-role" => "button", "data-theme" => "c"} %>
          </div>
  </fieldset>
  </div>

<% end %> 
```

建议文本框代码为

```
 <div data-role="content">
  <input type="text" id="facebook_friend_search_box_id", placeholder="Search Connections by Name"/>
  </div> 
```

和相应的逻辑文件包含

```
$(document).ready(function() {
  if ($("#facebook_friend_search_box_id").length !== 0) {
    return $("#facebook_friend_search_box_id").tokenInput("search_facebook_friend");
  }
}); 
```

# jsf - 在带有“for”标签的合成组件中使用 Omnifaces Validator

> ID：14561997
> 
> 赞同：1
> 
> 时间：2013-01-28T12:25:14.767
> 
> 标签：jsf, validation, composite-component, omnifaces

我想将omnifaces库中的o:validator标签用于组合组件：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core" xmlns:cc="http://java.sun.com/jsf/composite"
xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui"
xmlns:pe="http://primefaces.org/ui/extensions">
<cc:interface>
    <cc:attribute name="disabled" />
    <cc:attribute name="label" />
    <cc:attribute name="validatorMessage" />
    <cc:attribute name="required" />
    <cc:attribute name="value" required="true" />
    <cc:editableValueHolder name="date" targets="textfield"/>
</cc:interface>
<cc:implementation>
    <p:outputLabel id="label" for="textfield" value="#{cc.attrs.label}" rendered="#{cc.attrs.label!=null}" />
    <p:inputText id="textfield" value="#{cc.attrs.value}" styleClass="dateInputField" required="#{cc.attrs.required}" disabled="#{cc.attrs.disabled}">      
        <f:convertDateTime locale="de_DE" type="date" />
        <!-- some other stuff... -->
    </p:inputText>
    <p:watermark for="textfield" value="TT.MM.JJJJ" />  
    <cc:insertChildren/>
</cc:implementation> 
```

验证器的调用方式如下：

```
<o:validator validatorId="customGreaterThanValidator" compareTo="#{bean.date}" validatorMessage="given date must be later than #{bean.date}" for="date"/> 
```

但不幸的是，omnifaces 的验证器标签似乎忽略了“for”属性。使用来自 JSF 的原始验证器标记，“for”标记有效，但如果“compareTo”标记的值是 ValueExpression，则无效。

我试图实现一个自定义标记处理程序，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:23:13.710

`<o:validator>`当前的 1.3 （也不）确实不支持这一点`<o:converter>`。[根据第 126 期](http://code.google.com/p/omnifaces/issues/detail?id=126)（您可以在其中下载快照），它将在未来的 1.4 中出现。

关键是分别更改`TagHandler`为[`ValidatorHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/ValidatorHandler.html)和[`ConverterHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/ConverterHandler.html)以便[`TagHandlerDelegate`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/TagHandlerDelegate.html)可以为复合材料完成其工作。