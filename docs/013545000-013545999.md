# StackOverflow 问答 13545000-13545999

# c++ - 将 BitmaskType 与零进行比较的正确方法？

> ID：13545005
> 
> 赞同：2
> 
> 时间：2012-11-24T19:55:32.793
> 
> 标签：c++, c++11, bitmask, c++-concepts

根据这个`BitmaskType`概念，实现必须确保以下语句的格式正确：（列在 §17.5.2.1.3.4 中）

> 如果表达式 X & Y 不为零，则在对象 X 中设置值 Y。

其中 X 和 Y 属于概念类型`BitmaskType`。

使用 gcc 4.7 尝试以下简单代码片段时，出现模板推导错误：

```
#include <future>

int main() {
    (std::launch::async & std::launch::async) != 0;
} 
```

错误：

```
error: no match for 'operator!=' in '(std::launch)1 != 0'
... followed by tons of deduction errors 
```

这是 gcc 中的错误还是我只是在这里出错了？如果是，执行这种检查的正确方法是什么？

我已经检查了 gcc buglist 但找不到任何涵盖该主题的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T20:04:01.510

类的成员`enum`并不意味着隐式转换，`int`反之亦然。您可以确保将位掩码类型转换为`int`或使用`enum`类的零值。我认为后者更可取：

```
(std::launch::async & std::launch::async) != std::launch() 
```

（我还在按位运算周围添加了括号，因为它比比较具有更高的优先级，并且对位掩码类型的布尔值`and`按位并没有多大意义）。`and`

看到这一点的最简单方法是 7.2 [enum.dcl] 第 9 段：

> ...请注意，没有为范围枚举提供此隐式枚举到 int 的转换：...

然而，这属于非规范性示例。跟踪标准中范围规则的规则可能需要排除所有允许转换并且目前不太喜欢这个练习的情况。

# android - 对于 Wifi 性能是否需要保持唤醒锁定？

> ID：13545007
> 
> 赞同：1
> 
> 时间：2012-11-24T19:55:48.980
> 
> 标签：android

我有服务在 android 中运行以在用户需要时同步文件。这不是 24/7 服务，仅在 wifi 上运行一段时间的文件传输，因此用户在完成文件传输后退出应用程序，因此服务退出。

因此，这种情况可能是用户离开了手机，它可能会自动锁定/屏幕关闭。

无论屏幕打开或关闭，是否有办法确保 wifi 始终以低延迟执行相同的操作？与此相关的api有多个，Wifi lock，Wifi-sleep-policy，screen lock..人们似乎使用它们的组合来保持良好的无线性能。

wifi锁是否足以确保它？还是我需要使用 API 组合？

谢谢你。

编辑：这篇文章对 [下载线程中的 PARTIAL_WAKE_LOCK 与 SCREEN_DIM_WAKE_LOCK很有帮助](https://stackoverflow.com/questions/5183859/partial-wake-lock-vs-screen-dim-wake-lock-in-download-thread?rq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:08:29.663

为了安全起见，WifiLock 和 WakeLock 将是最佳选择，WakeLock 是更重要的锁。WakeLock 确保设备保持开启状态，而 WifiLock 确保无线电正在运行。这应该确保一致的延迟。但是，当涉及到数据传输时，您不能指望任何事情，因此请让您的应用程序准备好处理随机连接丢失。

# visual-studio-2010 - _AMD64_未在VS2010中定义

> ID：13545010
> 
> 赞同：4
> 
> 时间：2012-11-24T19:56:29.167
> 
> 标签：visual-studio-2010, 64-bit

我在 VS2010 中创建了一个新的 c++ 项目。我添加了 x64 作为新的解决方案平台。我尝试将“复制设置从”设置为“Win32”和“空”，但都没有成功。`_AMD64_`当我选择 x64 作为平台时未定义。不应该吗？对于 64 位的编译，是否还有另一个我不知道的步骤？

期待问题：我使用的是VS2010 Ultimate，Windows 7 64bit，在VS安装期间选择了x64编译器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-20T11:23:38.757

您已正确完成所有步骤。*默认情况下*，Visual Studio 未预定义符号`_AMD64_`。如果你想使用它，你需要自己定义它：

 *```
#if defined _M_X64 || defined _M_AMD64
    #define _AMD64_
#endif 
```

但你并没有弥补它存在的记忆。除了其他一些符号之外，Windows DDK 还附带定义此符号的生成文件。入住`makefile.def`。可能性是：

*   `_X86_`
    各种称为 x86、i386 和 IA-32
    （这与 VS 的预定义相同`_M_IX86`）

*   `_AMD64_`
    各种称为 AMD64、x64、x86-64、IA-32e 和 Intel 64
    （这与 VS 的预定义`_M_X64`和相同`_M_AMD64`）

*   `_IA64_`
    Intel Itanium (IA-64)
    （这个和VS的预定义一样`_M_IA64`）

*   …以及其他一些架构不再针对的目标

理想情况下，您将配置您的构建系统以预定义一组已知的宏，然后您将在自己的代码中使用这些宏。如果您没有构建系统，至少在预编译的头文件中设置一些内容。*这样，您就不会到处*依赖实现相关的符号，切换编译器也不是一件繁琐的工作——例如，GCC 预定义的目标体系结构符号与 MSVC 非常不同。*

# nginx - 通过反向代理自动用户登录

> ID：13545015
> 
> 赞同：1
> 
> 时间：2012-11-24T19:56:56.723
> 
> 标签：nginx, reverse-proxy, authentication, form-authentication

Given 是配置为反向代理的 Nginx 后面的应用程序。该应用程序需要用户通过 Web 表单和 HTTP POST 登录。是否有可能向 Nginx 提供通用技术用户的凭据并让它自动登录，这样用户就不必再显式登录了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:03:37.160

没有某种模块可能会很困难 :) 但如果它是一个内部应用程序，您可能会告诉 nginx 为每个请求添加某些标头并由它们进行身份验证。但如果它是一个生产应用程序，我不会走这条路:)

# git - 提交/推送到 GitHub 存储库：覆盖

> ID：13545018
> 
> 赞同：0
> 
> 时间：2012-11-24T19:57:11.513
> 
> 标签：git, github, repository

当我之前提交并推送到我的 github 存储库时，我已经编译了 *.o 文件和一些其他文本文件，并且这些文件包含在存储库中。我最近完成了这个项目，我想通过没有那些 *.o 文件等来清理 github 存储库。我清理了本地 repo 上的源文件夹，是否有命令链可以提交/推送我想要的文件，并且只显示在 repo 的最新主分支上？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:03:22.067

在您的存储库中拥有一个 .gitignore 文件也是一个好主意，这样您就不会意外添加已编译的二进制文件或目标文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:04:21.253

请注意，即使您删除了这些（可能很大）`*.o`文件，它们仍会出现在 git 历史记录中，并且仍会占用 git 对象存储中的空间。如果您想永久清除这些文件（即使在历史记录中），您应该使用[`git filter-branch`](http://git-scm.com/docs/git-filter-branch).

完成此操作后，请务必进行编辑`.gitignore`以避免将来添加垃圾。

# node.js - 如何将 Node 和 Express 与 coffeescript 和 requirejs 一起使用？

> ID：13545022
> 
> 赞同：7
> 
> 时间：2012-11-24T19:57:31.690
> 
> 标签：node.js, coffeescript, express, requirejs

这就是我想要的。

*   使用 express 网络服务器的节点应用程序
*   在服务器上使用咖啡脚本，更重要的是客户端
*   在客户端（最终在服务器上）使用 require.js

我能够找到为客户端连接咖啡脚本的推荐方法是使用[connect-assets](https://github.com/TrevorBurnham/connect-assets)。这似乎需要使用玉助手来实际编译咖啡脚本，例如。

```
!=js('monalisa.js') 
```

似乎编译 monalisa.coffee 并生成正确的`<script>`标签。现在我想使用 require.js 在这里我绊倒了。如何确保 connect-assets 在不使用玉助手的情况下正确编译所有内容？

这是我相当简单的 app.js：

```
require('coffee-script');

var express = require('express')
  , http = require('http')
  , path = require('path')
  , connectAssets = require('connect-assets');

var publicDir = path.join(__dirname, 'public');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');

  app.use(express.favicon());
  app.use(express.logger('dev'));

  app.use(express.bodyParser());
  app.use( connectAssets() );
  app.use('/public', express.static(publicDir));

  app.use(express.logger());
  app.use(express.methodOverride());
  app.use(app.router);
});

app.configure('development', function(){
  app.use(express.errorHandler({
    dumpExceptions: true,
    showStack: true
  }));
});

app.get('/', require('./routes').index);
app.get('/monalisa', require('./routes/monalisa').monalisa);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T17:19:50.743

我创建了一个包来帮助解决这个问题；它被称为[connect-assets-jspaths](https://npmjs.org/package/connect-assets-jspaths)。

从自述文件：

### 安装

`npm install connect-assets-jspaths`

*   请注意，对 CoffeeScript 存在依赖关系。

### 服务器端使用

```
assets = require "connect-assets"
jsPaths = require "connect-assets-jspaths"

# Snip ...

app.use assets()
# Exports the global function exportPaths() and jsUrl(); see below in View Helpers.
jsPaths assets

# Optionally, pass a log function to see progress
# jsPaths assets, console.log 
```

### 观察变化并重新编译

现在你可以传入一些额外的回调，它会监控你的连接资产目录的变化。

```
fileChangedCallback = (err, filePath) ->
    console.log "File Changed: #{filePath}"

jsPaths assets, console.log, fileChangedCallback, (err, watcher) ->
    console.log "Watcher initialized" 
```

**注意**您可能希望在生产模式下禁用它。

### 查看使用情况

该模块导出两个全局函数`exportPaths()`和`jsUrl()`.

```
// Using this in your view
!= exportPaths("jsPaths")

// Turns into this when rendered in production
<script type="text/javascript">
    var jsPaths = { "main", "/builtAssets/js/main.13819282742.js" /* snip all the other file paths */ };
</script>

// Using this in your view
- var mainJsPath = jsUrl("/js/main.js")
script(type="text/javascript", data-main="#{mainJsPath}", src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.0.2/require.min.js")    

// Turns into this when rendered in production
<script type="text/javascript" data-main="/builtAssets/js/main.13819282742.js" src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.0.2/require.min.js"></script> 
```

### 动态 RequireJS 路径

现在我们有了一个变量，其中包含我们的 requireJS 友好路径，我们可以在 RequireJS 配置中设置这些路径

```
# Example main.coffee file in /assets/js folder

requirePaths =
  paths:
    jquery: "//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min"
    underscore: "//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min"
    backbone: "//cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min"
    text: "/js/lib/text"
    handlebars: "/js/lib/handlebars"

if jsPaths
  for own key, value of jsPaths
    # Fix up the lib references
    key = key.slice 4 if key.slice(0, 4) == "lib/"
    requirePaths.paths[key] = value 

require.config
  paths: requirePaths.paths

  shim:
    jquery:
      exports: "$"
    underscore:
      exports: "_"
    backbone:
      deps: ["underscore", "jquery"]
      exports: "Backbone"

require ['app'], (App) ->
    new App().initialize() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T05:04:33.233

试试含羞草，开箱即用，它会帮助你处理这些事情。 [http://www.mimosajs.com](http://www.mimosajs.com)

`mimosa new [name]`将为您提供一个包含所有内容的入门项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T17:42:52.070

很抱歉有新的答案，但我决定去注册一个帐户。=)

如果您选择 Express 作为`mimosa new`工作流程的一部分，Mimosa 将为您提供一个小型 Express 应用程序。如果你选择`CoffeeScript`它，它会给你一个 CoffeeScript 中的 Express 应用程序。它将在脚手架应用程序中包含 RequireJS。所以你不需要重写任何东西。你只需要插入你的东西。如果它给你的 Express 应用程序将作为一个例子让你自己做而不使用 Mimosa。

# regex - 多个 htaccess 规则

> ID：13545023
> 
> 赞同：1
> 
> 时间：2012-11-24T19:57:37.833
> 
> 标签：regex, apache, .htaccess, mod-rewrite

自从最后几个小时以来，我一直在努力让它工作，但没有运气......如果有任何帮助真的会很棒。

```
 Options +FollowSymLinks
   RewriteEngine On
   RewriteBase /
   RewriteCond %{HTTP_HOST} ^example\.com$ [NC] 
   RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]
   RewriteRule ^(.+)/$ /$1 [R=301,L]
   RewriteRule ^profile/(.*)$ details.php?profile=$1 [L,NC,QSA] 
   RewriteRule ^industry/(.*)$ category.php?industry=$1 [L,NC,QSA] 
   RewriteRule ^page/(.+)$ index.php?page=$1 [L,NC,QSA]
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d 
   RewriteRule . /index.php [R=301,L] 
```

很复杂吗？但实际上并不容易，但是当我尝试在上述规则集中添加一个规则时，它不起作用。

实际网址 -`http://www.examples.com/req-info.php?tag=denis-reach-home&about=denis-reach&info=home`

到网址 - `http://www.examples.com/tag/denis-reach-home/denis-reach/home`

我尝试了各种各样的东西，但没有运气.. 例如 -

```
RewriteRule ^tag/([^/]*)/([^/]*)$ /req-info.php?tag=$1&about=$2info=$3 [L] 
```

任何专家都可以分享一些技巧。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:02:00.460

你很亲密。在您的 .htaccess 中有此代码：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^example\.com$ [NC] 
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]
RewriteRule ^(.+)/$ /$1 [R=301,L]
RewriteRule ^profile/(.*)$ details.php?profile=$1 [L,NC,QSA] 
RewriteRule ^industry/(.*)$ category.php?industry=$1 [L,NC,QSA] 
RewriteRule ^page/(.+)$ index.php?page=$1 [L,NC,QSA]

# your new rule
RewriteRule ^tag/([^/]+)/([^/]+)/([^/]+)/?$ req-info.php?tag=$1&about=$2info=$3 [L,QSA,NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . /index.php [R=301,L] 
```

# jquery - Ajax 提交 - 选择并关注字段验证错误

> ID：13545024
> 
> 赞同：1
> 
> 时间：2012-11-24T19:57:42.577
> 
> 标签：jquery, ajax, jsf, jsf-2

我正在尝试根据验证决策来实现选择（并聚焦）组件。

例如：

*   登录表单（2 个输入：用户名、密码；1 个提交按钮）
*   如果验证失败`username`，`<h:inputText id="name">`将被关注
*   如果验证失败`password`，`<h:inputSecret id="password">`将被关注
*   页面不会刷新，提交是一个**ajax**按钮

**我试过的：**

**没有**ajax 调用（这***工作正常***-`componentId`在验证过程中的 bean 中设置，并在每次页面刷新/提交后选择/聚焦）：

```
$(document).ready(function() {
  document.getElementById('form:#{bean.componentId}').focus();
  document.getElementById('form:#{bean.componentId}').select();
});
...
<h:commandButton id="save" action="#{bean.save}" type="submit"/> 
```

但是**使用**ajax调用：

```
function myFunc(data) {
  if (data.status == "success") {
    var element = document.getElementById('form:#{bean.componentId}');
    element.focus();
    element.select();
}}
...
<h:commandButton id="save" action="#{bean.save}" type="submit">
  <f:ajax execute="@form" render="@form" onevent="myFunc"/>
</h:commandButton> 
```

这种方式也行得通，问题是，`componentId`仍然是一样的（在 bean 创建期间被初始化的那个）。

与此主题相关的先前问题：

*   [ajax调用后处理onclick函数](https://stackoverflow.com/questions/13540298/proccess-onclick-function-after-ajax-call-fajax)
*   [每个提交按钮调用相同的函数](https://stackoverflow.com/questions/13539497/each-submit-button-calls-the-same-function)

如何使用 ajax 提交按钮并选择/聚焦到验证错误的字段？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:15:01.890

非 ajax 提交基本上重新呈现整个页面，包括脚本。ajax 提交仅重新呈现页面的一部分，在您的特定情况下仅是表单本身（由`<f:ajax render>`属性控制）。脚本显然没有放在表单中，因此它们保留了“旧”值（你知道，EL`#{}`在 webserver 中运行而不在 webbrowser 中运行，所以在 webbrowser 检索 HTML/JS 代码时，EL 已经运行时间长，调用JS代码时不会重新执行）。

您还需要将带有这些 EL 表达式的脚本块放在相同的形式中，以便它也将在 ajax 提交时更新。

# node.js - 如何获取除当前在 Node.js 中查看的用户之外的在线用户列表

> ID：13545026
> 
> 赞同：0
> 
> 时间：2012-11-24T19:57:51.007
> 
> 标签：node.js, socket.io

我正在使用 socket.io 制作一个聊天应用程序，我需要在其中显示当前用户列表。到目前为止，它在显示当前用户列表的情况下工作正常

我正在使用此代码来维护用户列表

```
usernames[socket.id] = name;//where name is the name of the user 
```

然后在断开连接时，我再次从列表中删除该用户

```
delete usernames[socket.id]; 
```

但是，我对这种方法的问题是假设有三个用户 a、b 和 c

现在用户列表将在连接事件中填充，就像这样

```
 io.sockets.on('connection', function(socket) { 

    ...

    socket.on('register', function(name) {

    usernames[socket.id] = name; 
```

用户列表将类似于“a,b​​ 和 c”

但是，我想要的是，对于用户“a”，列表应该显示“b and c”，对于“b”，它应该是“a and c”，对于“c”，它应该是“a and b”。

我还考虑基于一些变量在客户端删除它，该变量存储正在查看它的用户的名称，但对于这个聊天，多个用户可以有相同的名称。因此，如果假设所有三个名称都为“a”，那么它将删除所有三个而不是仅从列表中删除一个名称。

....我想我对这个没有想法。请帮我在socket.io中实现它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:00:40.710

您的问题实际上与 Socket.IO 无关。显示用户列表时，根本不显示当前用户！

```
for (userIndex in users) {
    if (users[userIndex].id !== currentUser.id) {
        // Add user to displayed user list
    }
} 
```

# python - python“ImportError：无法导入名称 urandom”

> ID：13545030
> 
> 赞同：3
> 
> 时间：2012-11-24T19:58:13.520
> 
> 标签：python, ubuntu-10.04, kubuntu

不知何故，我的 python 坏了并发出错误：

```
jseidel@EDP15:/etc/default$ python -c 'import random'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python2.6/random.py", line 47, in <module>
    from os import urandom as _urandom
ImportError: cannot import name urandom 
```

这不是这里和其他地方经常记录的 virtualenv 错误：我不直接使用 python，我从未显式设置 virtualenv，并且没有 virtualenv 目录或 python 脚本可以在我的系统上的任何位置找到。

我正在运行 Kubuntu 10.04，直到最近我的 KPackageKit 运行良好，并且处理更新没有问题。现在它什么都没有显示......也许是因为这个 python 错误，也许是因为别的什么。

我该如何寻找错误并修复python？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-29T01:36:56.857

正如@Armin Rigo 所建议的，这对我有用：

1)`print 42`在 /usr/lib/python2.6/os.py 文件的末尾添加一个。

2) 如果您看到“42”，那么这是正确的 os.py 文件，并且 urandom 模块不包括在内。添加语句以包含 urandom（您可以从另一个 os.py 文件中找到示例）。这对我有用。

3) 如果您没有看到“42”，那么这不是您正在使用的 os.py 文件。找到正在崩溃的 random.py 文件并插入`import os; print os.__file__`以获取有关失败的更多信息。

# php - 允许用户从我的数据库构建视图并编辑这些字段

> ID：13545036
> 
> 赞同：2
> 
> 时间：2012-11-24T19:58:31.180
> 
> 标签：php, mysql, database-design

我正在构建一个包含“面板”的站点，这些“面板”用作各种信息的容器。我已将其设置为可编辑面板，这对于仅包含文本的面板来说很简单。为此，我只是从数据库中获取内容并将其包装在文本区域而不是`<p>`标签中。然而，对于包含表格视图的面板，这被证明是一项更困难的任务。

首先，我无法让网站管理员选择给定表格中的信息（例如，如果管理员想要添加一个面板视图，显示每个成员的名字、姓氏和他们可以从中选择的图片我的数据库中的列）。我想出了几种方法来做到这一点，但每种方法都有自己的问题。

我尝试使用 INFORMATION_SCHEMA 表来生成一个表，其中包含用户可以选择的可能的表和列。但是在使用 PDO 构建查询时，我遇到了问题。例如，对于准备好的语句，您不能将变量用于模式。

我也想过使用 MySQL 视图，但我似乎也不知道如何做到这一点。

我的第二个问题是允许管理员直接向表中添加行。现在所有添加行模板所做的就是在每列中创建一个带有文本字段的行。这对于纯文本选项（如名字）很有用，但对于图片之类的内容，显然文本字段不起作用。我应该创建一个包含此元数据的表还是在 PHP 中执行检查？如果是后者，我怎么知道列需要什么输入类型？

我认为我的主要问题是我试图仅通过一项设计更改（或一次不专注于一个问题）来解决太多事情。这导致我变得非常慌乱和困惑。非常感谢您的帮助，如果您需要更多信息，例如当前如何设置我的数据库表，我将提供 ERD。

**编辑：**我只是想明确一点，我不想让用户实际操作数据库中的表，而是选择现有表中的哪些信息显示在给定面板上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:08:11.720

对用户自由查询数据库的能力进行编码有很多问题（包括安全性），并且比简单地返回一组定义的信息的预定义信息查询要复杂得多。

它还将定义哪些信息可能对用户有用的负担。它将决定特定用户是否可以访问特定信息的负担置于查询逻辑和数据库访问规则上。

实际上，您正在尝试使用不同的设计复制 PHPMyAdmin，并且仅将您定义的数据库作为目标。

# android - 在通话结束时更改活动

> ID：13545040
> 
> 赞同：0
> 
> 时间：2012-11-24T19:59:20.947
> 
> 标签：android, phone-state-listener

在我正在制作的应用程序中，需要在通话结束时更改活动。我使用的代码不像我想要的那样工作：

```
 protected class EndCallListener extends PhoneStateListener {

    @Override
    public void onCallStateChanged(int state, String incomingNumber){
        switch(state){
        case TelephonyManager.CALL_STATE_OFFHOOK:
            Intent intent = new Intent(MainActivity.this, Password.class);
            startActivity(intent);

            break;

            default:
        }
        super.onCallStateChanged(state, incomingNumber);
        }

    } 
```

有任何想法吗？

# html - 我需要在一个简单的输入表单上执行两个操作？我已阅读并尝试了有关此主题的所有先前答案，但均未成功

> ID：13545041
> 
> 赞同：0
> 
> 时间：2012-11-24T19:59:48.760
> 
> 标签：html, forms, action

以下代码显示了我如何尝试首先将信息写入 .txt 文件，然后执行自定义搜索。如果我注意到 Button2 中的操作，Button1 可以正常工作并将文本写入 .txt。当我打开 Button2 进行搜索时，似乎 Button1 中的 .php 被忽略并且 Button2 呈现自定义搜索，但是，有写入 .txt 文件。我已经尝试了我能找到的所有内容，包括一个 .php 文件中的所有内容，但是第二个操作似乎可以控制并且不允许第一个操作运行。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">

    <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>If NOT found to right ENTER Your</title>
    <script language="Javascript">
    <!--
    function OnButton1()
    {
        // Action used to write to .txt file only
        document.Form1.action = "open-close.php";
    }
    function OnButton2()
    {
        // Action performs custom google search
        document.Form1.action = "http://www.google.com";
    }

    -->
    </script>
    </head>

    <body>
    <h3><span style="color: #00ff00;">If NOT found to right ENTER Your Topic Here!        </span></h3>
    <style type="text/css">
    @import url(http://www.google.com/cse/api/branding.css);
    </style>
    <div class="cse-branding-right" style="background-color:#999999;color:#000000">
      <div class="cse-branding-form">
        <form id="cse-search-box" target="_blank" name="Form1">
          <div>
            <input type="hidden" name="cx" value="" />
            <input type="hidden" name="ie" value="UTF-8" />
            <input type="text" name="q" size="55" />
            <input type="submit" name="sa" value="Search" Onclick="OnButton1(); OnButton2();"/>
          </div>
        </form>
      </div>
      <div class="cse-branding-logo">
        <img src="http://www.google.com/images/poweredby_transparent/poweredby_999999.gif" alt="Google"                 />
      </div>
      <div class="cse-branding-text">
        Your Custom Search
      </div>
    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:06:18.253

在按钮单击时调用 OnButton1() 并从函数 onButton1() 调用 onButton2()：

```
<input type="submit" name="sa" value="Search" Onclick="OnButton1();"/>

 function OnButton1()
    {
        // Action used to write to .txt file only
        document.Form1.action = "open-close.php";
    OnButton2();

    } 
```

# php - 通过 PEAR 安装 AWS SDK 时出现奇怪的错误

> ID：13545046
> 
> 赞同：7
> 
> 时间：2012-11-24T20:01:03.597
> 
> 标签：php, amazon-web-services, sdk, pear, aws-sdk

通过 PEAR 安装 AWS SDK 时出现此错误。我以前从来没有得到过这个。

```
$ sudo pear channel-discover pear.amazonwebservices.com
Adding Channel "pear.amazonwebservices.com" succeeded
Discovery of channel "pear.amazonwebservices.com" succeeded    
$ sudo pear install aws/sdk
Unknown remote channel: guzzlephp.org/pear
aws/sdk requires package "channel://guzzlephp.org/pear/Guzzle" (version >= 3.0.2)
No valid packages found
install failed 
```

谁能帮我一把。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T10:08:31.113

取自这里： [https ://github.com/aws/aws-sdk-php/blob/master/README.md#installing-via-pear](https://github.com/aws/aws-sdk-php/blob/master/README.md#installing-via-pear)

通过 PEAR 安装

PEAR，代表 PHP Extension and Application Repository，是一个用于可重用 PHP 组件的框架和分发系统。它是其他包管理解决方案（如 Yum）的 PHP 等价物，可在系统范围内安装包。

PEAR 包易于安装，并且在您的 PHP 环境路径中可用，因此任何 PHP 项目都可以访问它们。PEAR 包不是特定于您的项目，而是特定于安装它们的机器。

从命令行，您可以使用 PEAR 安装 SDK，如下所示。注意：您可能需要对以下命令使用 sudo。

```
pear -D auto_discover=1 install pear.amazonwebservices.com/sdk 
```

通过 PEAR 安装 SDK 后，您可以使用以下命令将 phar 加载到您的项目中：

```
require 'AWSSDKforPHP/aws.phar'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T02:36:23.867

有同样的问题，但这解决了它：

先安装旧包

```
sudo pear -D auto_discover=1  install pear.amazonwebservices.com/sdk-1.6.0 
```

然后更新一下

```
sudo pear install pear.amazonwebservices.com/sdk 
```

去检查：

```
ubuntu@ip-xx-xx-xx:~$ sudo pear install aws/sdk
aws/sdk is already installed and is the same as the released version 2.4.0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T23:54:12.333

在安装 SDK 之前试试这个：

```
sudo pear install --alldeps --force guzzle/guzzle 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T20:40:02.153

好吧，我最终安装了旧包（我不需要冰川等新东西）

梨安装 aws/sdk-1.5.17.1

# drupal - 清漆缓存 - 如何仅为主页清除/删除缓存

> ID：13545049
> 
> 赞同：5
> 
> 时间：2012-11-24T20:01:23.127
> 
> 标签：drupal, caching, drupal-7, varnish, varnish-vcl

我正在使用 Drupal 7 最新的开发版本。

我已经安装了 Varnish 和 Expire 模块并进行了设置。他们工作得很好，但我有一个关于从清漆中删除缓存的问题。

问题是如何仅**删除****索引（主页）**页面的清漆缓存而不删除其他页面的缓存。我查看了他的清漆日志，发现每次 Drupal 执行命令时都会删除整个清漆缓存

```
 ban req.http.host ~ www.cdm.me && req.url ~ "/" 
```

该命令由 varnish 模块或 expire 模块执行，表示删除主页（索引）页面的缓存。但正如我所见，它正在删除清漆中的所有缓存页面。

**如何解决这个问题？如何仅删除主页的缓存？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T00:23:40.090

您应该从 Drupal 调用其他命令：

```
ban req.http.host ~ www.cdm.me && req.url ~ "^/$" 
```

整个站点的缓存无效，因为正则表达式“/”匹配所有 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T12:58:07.103

这个 Drupal Purge 模块会为你做吗？[https://drupal.org/project/purge](https://drupal.org/project/purge)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T21:57:19.123

你也可以做

```
ban req.http.host == www.cdm.me && ban req.url == "/" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-16T13:09:07.267

有[Varnish HTTP Accelerator Integration](https://www.drupal.org/project/varnish)模块，它提供了一个非常有用的函数 varnish_purge()。

使用该功能清除清漆缓存。

# ruby-on-rails - 在 Rails 中获取 HTTP 响应

> ID：13545050
> 
> 赞同：0
> 
> 时间：2012-11-24T20:01:28.977
> 
> 标签：ruby-on-rails, http, url

在我的 Rails 控制器中，我有`url`用户输入的内容：

```
url_parsed = URI.parse(url)
response = Net::HTTP.get_response(url_parsed) 
```

如果用户输入`www.google.com`，它给出

```
undefined method `request_uri' for #<URI::Generic:0x00000002e07908 URL:www.google.com> 
```

就行了`response = ...`。

我希望它显示我的错误页面，而不是这个错误。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:28:35.733

不知道您的问题是为什么它不起作用，或者如何使用视图中的错误消息。

**为什么你会收到错误**

**编辑：**

我认为这是因为没有协议`'www.google.com'`，`'http://www.google.com'`应该可以工作

**如何显示错误**

挽救错误：

```
error = nil
begin
  url_parsed = URI.parse(url)
  response = Net::HTTP.get_response(url_parsed)
rescue => error
end
if error
  @error_message = "Your URL wasn't good enough"
  # or you can use error.message if you want
  # then use @error_message in your view
else
  # do stuff when ok
end 
```

# ruby-on-rails - NameError：rails 控制台中未初始化的常量

> ID：13545051
> 
> 赞同：3
> 
> 时间：2012-11-24T20:01:31.193
> 
> 标签：ruby-on-rails, ruby, rake

我正在向我的数据库中添加一个“问题”表......当我迁移它时......一切似乎都很好。但是当我进入rails控制台时......它告诉我'NameError：未初始化的常量问题'

我错过了什么？这是我的迁移输出、迁移文件数据和 rails 控制台错误。

我是 Rails 的初学者，所以请原谅我的菜鸟。

所以我在我的 rake db:migrate... 之后得到了这个

```
 Zach:FundAnEd zach$ rake db:migrate 
    ==  DropQuestionTable: migrating ==============================================
    -- drop_table(:questions)
       -> 0.0490s
    ==  DropQuestionTable: migrated (0.0492s) =====================================

    ==  CreateQuestions: migrating ================================================
    -- create_table(:questions)
       -> 0.0161s
    -- add_index(:questions, :scholarship_id)
       -> 0.0254s
    ==  CreateQuestions: migrated (0.0417s) ======================================= 
```

这是我的迁移文件内容...

```
 class CreateQuestions < ActiveRecord::Migration
      def change
        create_table :questions do |t|
          t.string :question_type
          t.references :scholarship
          t.string :question_title

          t.timestamps
        end
        add_index :questions, :scholarship_id
      end
    end 
```

这是我得到的错误....

```
 NameError: uninitialized constant Question
        from (irb):1
        from /Users/zach/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
        from /Users/zach/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
        from /Users/zach/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

我究竟做错了什么？我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T07:45:44.597

首先你必须确保你有一个 Question 模型，如果你有它，那么确保你遵循了正确的命名约定，ruby on rails 中的模型是单数的，这意味着模型名称将是“Question”而不是“Questions”。希望它会有所帮助

# javascript - 如何使用 jQuery 访问以编程方式生成的元素

> ID：13545055
> 
> 赞同：1
> 
> 时间：2012-11-24T20:02:22.080
> 
> 标签：javascript, jquery

如何使用 jQuery 访问动态创建的元素？假设我有以下代码：

```
for (var i = 0; i < count; i++)
{
    var div = document.createElement("div");
    div.setAttribute("id", "divHour" + i);

    var button = document.createElement("button");
    button.setAttribute("id", "btnHour" + i);

    div.appendChild(button);
    document.getElementById("divHours").appendChild(div);
} 
```

如何使用 jQuery 访问按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:07:33.097

```
var $button0 = $('#btnHour0')
var $button1 = $('#btnHour1')
// ... etc ... 
```

一旦你缓存了 jQuery 对象，就可以随意使用它了……

```
$button0.css({width: 400}).animate({width: 200}) 
```

* * *

编辑要访问循环中的所有按钮...

```
// assuming `count` is the same as the code used to create the buttons
for (var i = 0; i < count; i++){
    var $button = $('#btnHour'+i)
    // do stuff with $button here
} 
```

* * *

编辑

或者，访问 ID 以开头的所有按钮元素`btnHour`

```
var $buttons = $('button[id^="btnHour"]')
// do stuff to all buttons here
$buttons.css({width:300}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:08:16.513

只要您知道元素的 HTML ID。您需要做的就是：

`$("#html_id")`

jQuery 使用 CSS 选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T20:09:09.277

```
var buttons=$('button[id^="btnHour"]'); 
```

将为您提供完整的按钮集合

您的问题非常模糊，我怀疑您想访问用户与之交互的 div 中包含的特定按钮。您需要更多详细信息。

编辑：以下是如何在点击处理程序中访问按钮的索引。

```
var buttons=$('button[id^="btnHour"]').click(function(){
   var buttonIndex= buttons.index(this);
    var div=$('#divHour'+ buttonIndex)
    /* can now interact with corresponding div*/
}); 
```

查找父 div 的另一种更简单的方法是：

```
$('button[id^="btnHour"]').click(function(){
   var $parentDiv=$(this).parent()
}) 
```

以特定按钮使用`eq()`方法为目标

```
var thirdButton=$('button[id^="btnHour"]').eq(2);/* indexing is zero based*/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T20:12:18.417

给按钮一个类：

```
div.setAttribute("class", "myButton"); 
```

然后你可以得到所有的按钮

```
$('.myButton') ... 
```

例如，循环它们：

```
$('.myButton').each(function(){

    console.log($(this).attr("id"));

}); 
```

如果要识别每个按钮，请将数字从类中解析出来或给它一个`data-mynumber`属性并使用`$(this).data('mynumber')`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T20:19:03.560

要选择原始循环内的按钮...

```
for (var i = 0; i < count; i++)
{
    var div = document.createElement("div");
    div.setAttribute("id", "divHour" + i);

    var button = document.createElement("button");
    button.setAttribute("id", "btnHour" + i);

    div.appendChild(button);
    document.getElementById("divHours").appendChild(div);

    // moved after the button has been added to the DOM
    // do something with the button in jQuery
    $("#btnHour" + i).css({width:100})

} 
```

# arrays - 将值插入matlab数组的问题

> ID：13545057
> 
> 赞同：0
> 
> 时间：2012-11-24T20:02:56.560
> 
> 标签：arrays, matlab, vector

我正在尝试将一个值插入到 Matlab 向量中，如下所示：

```
 P = [ P(1:pos) point P(pos+1:end-1) ]; 
```

然而我不断收到这个错误：

```
??? Error using ==> horzcat
CAT arguments dimensions are not consistent.

Error in ==> main at 65
 P = [ P(1:pos) point P(pos+1:end-1) ]; 
```

这是`end-1`因为我将上面的错误与数组限制不匹配有关。

PS 我知道向数组中插入值是很常见的问题，但这似乎是最简单的方法，我真的很想了解为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:07:55.403

此语句试图水平连接

```
P = [ P(1:pos) point P(pos+1:end-1) ] 
```

但是你的向量 P 是一个列向量。

你需要的是一个行向量，所以先转置P

```
P=P'; 
```

# sql - 如何在 SQL 中只提取字符串的第二个单词？

> ID：13545058
> 
> 赞同：2
> 
> 时间：2012-11-24T20:02:56.050
> 
> 标签：sql, oracle, substr

我试图弄清楚如何在供应商名称中显示第二个单词，但我不断收到以下代码错误：

```
SELECT SUBSTR(
SUBSTR(vendor_name,CHARINDEX(' ',vendor_name)+1,len(vendor_name)),1,CHARINDEX(' ',
SUBSTR(vendor_name,CHARINDEX(' ',vendor_name)+1,len(vendor_name)))
)
FROM vendors 
```

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T20:57:11.720

`CHARINDEX`不是 Oracle 函数。我认为最接近的匹配是 INSTR。您还可以使用 REGEXP_SUBSTR：

```
SELECT REGEXP_SUBSTR( vendor_name, '^[^ ]* ([^ ]*)', 1, 1, 'i', 1 )
  FROM vendors 
```

这是一个[SQLFiddle](http://sqlfiddle.com/#!4/4afab/7/4)。

# mysql - 如果我在 mysql 中将 char 的长度设置为 80，并且不对此进行验证，那会被利用吗

> ID：13545060
> 
> 赞同：1
> 
> 时间：2012-11-24T20:03:35.780
> 
> 标签：mysql, char, overflow, string-length

这是示例代码。

```
create table (id int(11) not null, name char(80)); 
```

并且在接受输入时，我不验证最大长度，我只是查看用户输入值是否不为空，而不是插入或更新表。

如果某些用户输入的值超过 80 个字符，查询将不会运行并返回 SQL 错误，现在这个 SQL 错误是否可以利用？

我的第一个和最后一个猜测是“不”。用例子证明我错了。

感谢与问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T20:19:51.167

你错了。**查询将被执行并且只返回警告**。将插入前 80 个字符，其余字符将被忽略！自己试试。打开 phpmyadmin 制作你的这张表，然后在名称列中插入 81 个或更多字符，你会看到！[http://goo.rs/rK6sWE](http://goo.rs/rK6sWE)这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:16:29.513

不，如果您尝试将 100 个字符的输入放入 80 个字符的字段中，攻击者将无法利用它。但是，您会遇到运行时错误，因此在尝试将数据粘贴到数据库中之前，您仍应确保数据适合列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T20:18:51.823

`name char(80)`仅确保 MySQL 将拒绝存储超过 80 个字符的任何内容。然而，在这些数据甚至被写入 MySQL 之前（比如从你的 web 表单中），就没有这样的保证。

如果您真的关心安全性，则应始终使用准备好的语句和绑定变量。

# c# - 单例模式中的堆栈溢出错误

> ID：13545063
> 
> 赞同：0
> 
> 时间：2012-11-24T20:03:41.597
> 
> 标签：c#, exception, singleton

我已经实现了单一模式。这是我的代码，当我调用 Test.BuildData() 函数时出现错误。请帮忙

```
 public class WordDataItem
    {
        public string Word { get; set; }
        public string Definition { get; set; }
        public int WordGroupKey { get; set; }
    }

    public class WordDataGroup
    {
        public List<WordDataItem> listItem = new List<WordDataItem>(); 
        public int GroupKey { get; set; }
    }
    public sealed class WordDataSource
    {
        private static  WordDataSource _dataSoruce;

        private List<WordDataGroup> listGroup = new List<WordDataGroup>();

        public List<WordDataGroup> ListGroup
        {
            get { return listGroup; }
            set { listGroup = value; }
        }

        private WordDataSource() { }

        public static WordDataSource Instance
        {
            get
            {
                if (Instance == null)
                {
                    _dataSoruce = new WordDataSource();
                }
                return _dataSoruce;
            }
        }        
    }

    public static class Test
    {
        public static void BuildData()
        {
             WordDataSource.Instance.ListGroup.Add(new WordDataGroup() { GroupKey = 8, listItem = new List<WordDataItem>() { new WordDataItem() {Word = "Hello", Definition="Greetings", WordGroupKey = 8}} });
        }
    } 
```

调用 Test.BuildData() 函数时出现堆栈溢出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:13:33.293

当您检查它是否为空时，您的 Instance 属性会递归调用自身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T20:15:01.680

尝试这个：

```
public static WordDataSource Instance
{
    get
    {
        if (_dataSoruce == null)
        {
            _dataSoruce = new WordDataSource();
         }
         return _dataSoruce;
     }
} 
```

# excel - 无法为 Excel VBA 编写宏以将特定单元格值复制到下一个空白行

> ID：13545064
> 
> 赞同：1
> 
> 时间：2012-11-24T20:03:50.153
> 
> 标签：excel, vba

我有一个 excel 电子表格，其值后跟 29 个空格。我试图找到一种方法将该值复制到接下来的 29 个空白行空间，然后再次循环并将下一个值复制到以下 29 个空格。

每个值都是不同的，没有顺序。我有超过 50,000 行，我花了很多时间试图找到一种方法来做到这一点。任何帮助深表感谢。我相信我可以运行一个循环来完成这个，但是我是一个新手。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:33:11.217

以下内容应该可以帮助您到达需要去的地方。如果您遇到任何问题，请再次发布详细信息：

```
Sub Copy29Rows()

Dim wks As Excel.Worksheet
Dim rng_Source As Excel.Range, rng_target As Excel.Range

'Change this to the name of the worksheet that you're working with
Set wks = ThisWorkbook.Worksheets("Sheet2")

'Change the sheet and cell name to whatever your original source is.
Set rng_Source = wks.Range("A1")

'Check that there is a value to copy
If rng_Source.Value = "" Then
    MsgBox "There are no values to copy"
    GoTo ExitPoint
End If

'We keep looping until we find no further values.
Do While rng_Source.Value <> ""

    'Make sure that you don't run off the end of the sheet
    If rng_Source.Row + 29 > wks.Rows.Count Then
        Err.Raise vbObjectError + 20000, , "There aren't enough empty rows in the sheet to copy down 29 rows."
    End If

    'The target will be offset one row from the value that we're
    'copying and will be 29 rows high.
    Set rng_target = rng_Source.Offset(1, 0).Resize(29, rng_Source.Columns.Count)

    'Now copy the original value and paste it into the target range
    rng_Source.Copy rng_target

    'Finally move the source 30 rows down.
    Set rng_Source = rng_Source.Offset(30, 0)

Loop

ExitPoint:
On Error Resume Next
Set rng_Source = Nothing
Set rng_target = Nothing
Set wks = Nothing
On Error GoTo 0

Exit Sub

ErrorHandler:
MsgBox "Error " & Err.Number & vbCrLf & Err.Description

Resume ExitPoint

End Sub 
```

# java - java静态实例字段和构造函数

> ID：13545068
> 
> 赞同：3
> 
> 时间：2012-11-24T20:04:15.777
> 
> 标签：java, static, constructor

在具有静态实例字段的 Java 类中，是每次访问字段时调用构造函数，还是仅在第一次访问时调用？我在构造函数中初始化了静态字段，并且想知道这是否会导致速度变慢，因为这些字段在每次访问时都会被初始化。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-24T20:06:15.490

> 我在构造函数中初始化静态字段，

**不要**。永远不要在构造函数中初始化静态字段。`static`字段不是与类的任何实例相关联的东西。它必须上课。该变量只有一个副本，可以跨所有实例访问。因此，如果您在构造函数中对其进行初始化，那么每次创建实例时，该字段都会为每个其他实例重新初始化。

您应该使用`static initializer`块来初始化您的静态字段，或者只是在声明的地方初始化它们。

```
class Demo {
    private static int x;  // Either initialize it here.

    static {   // Or use static initializer block
        x = 10;
    }
} 
```

> 使用静态实例字段，是每次访问字段时调用的构造函数，

**不**，静态字段是在 上访问的`class`。它们在类加载时被加载和初始化。然后您可以稍后修改它`class name`，在这种情况下，更改将对所有实例生效。因此，无论何时访问，都不会调用构造函数`static field`。

事实上，即使您访问实例字段，也不会每次都调用构造函数。构造函数用于新创建的实例一次`initialize`。`state`并且为了进一步访问和修改该字段，`constructor`将不会被调用。

因此，只要您想访问类的任何字段，构造函数就完全没有作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:06:07.380

静态字段对象的构造函数只被调用一次，在第一次访问该字段之前的某个时间点。您不应在常规*实例*构造函数中初始化静态字段。如果他们需要特殊初始化，您应该提供一个静态初始化块，如下所示：

```
public class Test {
    static int[][] a = new int[20][];
    static {
        for (int i = 0 ; i != 20 ; i++) {
            a[i] = new int[i+1];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:06:43.977

加载类时加载静态变量。而且只有一次。根据[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.1)：

> 如果一个字段被声明为静态的，那么无论最终创建多少个类的实例（可能为零），都只存在该字段的一个化身。静态字段，有时称为类变量，在类初始化时体现

所以这回答了你的问题。iee 正是在加载类时:)

静态变量一直持续到 JVM 关闭。

# java - 切换到 objectify 时，Google 云端点 .api 文件被从战争中删除

> ID：13545074
> 
> 赞同：1
> 
> 时间：2012-11-24T20:05:03.637
> 
> 标签：java, google-app-engine, objectify, google-cloud-endpoints, google-plugin-eclipse

使用 Google 云端点创建成功（本地）部署的服务后，我想从使用 JDO 切换到 Objectify。

使用对象化代码更新端点类后，我遇到了一个问题，即战争中的 .api 文件被删除并且不会重新生成。结果是端点不再暴露，每个请求都返回 404 错误。

我手动将文件重新添加回（从另一个项目修改），它与部署的战争一起工作过一次，它似乎试图提供请求（由于缺少 objectify 注释而失败），但随后再次删除了 .api 文件。

任何人都可以帮助我就可能导致文件被删除且根本不重新生成的原因提出任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:15:36.087

Dan Holevoet 的评论有助于解决这个问题。

事实证明，堆栈跟踪中显示的参数化客观性键存在问题。删除 Key 字段导致 .api 文件重新生成成功。

正如下面评论中所指出的 - 这预计将在 SDK 的下一版本中得到解决。

# xpages - 如何在 XPage 中包含通过包资源管理器导入/复制的 CSS 文件？

> ID：13545077
> 
> 赞同：0
> 
> 时间：2012-11-24T20:05:11.547
> 
> 标签：xpages, lotus-domino

我通过包资源管理器导入了一堆文件，例如图像、样式表。现在我想在 XPage 中使用它们。

我怎样才能包含它们，例如样式表？如果我通过资源添加它们，我应该使用什么 URL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T21:10:41.067

在 NSF 中存储文件有多种方式：

首先，您可以将它们移到文件夹结构*Resources/*中，然后移到相应的子文件夹中。在这种情况下，这些文件将在 Database 透视图中可用（如果您不想对它们进行排序，只需将它们放在*Resources/Files 文件*夹中）。或者您可以将它们添加到*WebContent*文件夹中。

*在这两种情况下，您都可以通过xp:this.resources*定义或使用 URL *http://example.com/yourdb.nsf/style.css*直接访问它们。

**编辑：** 您也可以将资源添加到其他文件夹中。如果您将它们 fe 添加到文件夹名称*src*中，您可以像这样访问它们：*http* ://example.com/yourdb.nsf/src/style.css 。这是将它们添加为资源的方法：

```
<xp:this.resources>
   <xp:styleSheet href="/src/test.css"></xp:styleSheet>
</xp:this.resources> 
```

# php - 从 MySQL 查询创建一个数组，对该数组的值进行平均，然后将该平均值向上取整

> ID：13545078
> 
> 赞同：0
> 
> 时间：2012-11-24T20:05:19.597
> 
> 标签：php, mysql, arrays

好的。这是我到目前为止的代码......

```
mysql_query($userrating);
$userratingquery =  "SELECT rating FROM user_rating WHERE user_id=$sellerid";
$userrating = mysql_query($userratingquery) or die('SQL Error :: '.mysql_error());
$userrating = array();

while(($row =  mysql_fetch_assoc($userrating))) {
   $rating[] = $row['rating'];
}

if (!empty($userrating)) {
   $averagerating = array_sum($userratingary); 
   print_r($userratingary);
} else {
   echo '<img src="images/star.png" class="ratingstar" /><img src="images/star.png" class="ratingstar" /><img src="images/halfstar.png" class="ratingstar" />';
} 
```

我要做的是创建一个名为“rating”的数据库值数组，平均该数组中的值，然后我想将这些值向上取整。因此，例如，如果这些值的平均值最终为 3.7，那么平均值将变为 4。

从那里我可以将结果应用于代码......我现在的数组遇到了很多麻烦。我现在遇到的错误是......

> 警告：mysql_fetch_assoc()：提供的参数不是有效的 MySQL 结果资源

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:08:37.867

你的问题在这里：

```
$userrating = mysql_query($userratingquery) or die('SQL Error :: '.mysql_error());
$userrating = array(); 
```

您正在将 $userrating 变量重置为数组，因此当您尝试获取 mysql 行时，$userrating mysql 结果不再有效。

为您的 $userrating 数组使用不同的变量名，或者为您的 mysql 结果使用另一个变量名。

# c# - 正则表达式仅替换整个匹配项

> ID：13545083
> 
> 赞同：1
> 
> 时间：2012-11-24T20:05:53.200
> 
> 标签：c#, regex

我正在尝试替换文件中的一堆字符串。字符串与新的字符串值一起存储在数据表中。

```
string contents = File.ReadAllText(file);
foreach (DataRow dr in FolderRenames.Rows)
{
    contents = Regex.Replace(contents, dr["find"].ToString(), dr["replace"].ToString());

    File.SetAttributes(file, FileAttributes.Normal);

    File.WriteAllText(file, contents);
} 
```

字符串看起来像这样`_-uUa`，`-_uU`等等`_-Ha`。

我遇到的问题是，例如这个字符串“ `_uU`”也会覆盖“ `_-uUa`”所以替换看起来像“newvaluea”

有没有办法告诉正则表达式查看找到的字符串之后的下一个字符并确保它不是字母数字字符？

我希望很清楚我在这里想要做什么。以下是一些示例数据：

```
private function _-0iX(arg1:flash.events.Event):void
    {
        if (arg1.type == flash.events.Event.RESIZE) 
        {
            if (this._-2GU) 
            {
                this._-yu(this._-2GU);
            }
        }
        return;
    } 
```

下一个字符可以是`;`, `(`, `)`, 点, 逗号, 空格,`:`等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:02:02.320

这里有两个技巧可以帮助你：

1.  按长度对所有搜索字符串进行排序，并首先替换最长的字符串，这样您就不会意外替换较短的字符串。
2.  使用 MatchEvaluator，而不是遍历所有行，而是搜索字符串中的所有替换模式并在数据集中查找它们。

选项一很简单，选项二看起来像这样：

```
Regex.Replace(contents", "_-\\w+", ReplaceIdentifier)

public string ReplaceIdentifier(Match m)
{
   DataRow row = FolderRenames.Rows.FindRow("find"); // Requires a primary key on "find"
   if (row != null) return row["replace"];
   else return m.Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:12:19.410

首先，您应该使用`Regex.Escape`.

那时你可以使用

```
contents = Regex.Replace(
  contents, 
  Regex.Escape(dr["find"].ToString()) + @"(?![a-zA-Z])",
  Regex.Escape(dr["replace"].ToString())); 
```

甚至更好

```
contents = Regex.Replace(
  contents, 
  @"\b" + Regex.Escape(dr["find"].ToString()) + @"\b",
  Regex.Escape(dr["replace"].ToString())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T23:35:36.273

我想这就是你要找的：

```
contents = Regex.Replace(
    contents,
    string.Format(@"(?<!\w){0}(?!\w)", Regex.Escape(dr["find"].ToString())),
    dr["replace"].ToString().Replace("$", "$$")
); 
```

您不能使用`\b`，因为您的搜索字符串并不总是以单词字符开头和结尾。相反，我使用`(?<!\w)`and`(?!\w)`来确保匹配的子字符串不是紧跟在单词字符（即字母、数字或下划线）之前或之后。我不知道您的搜索字符串的完整规范，所以这个模式可能需要一些调整。

您提供的示例模式均不包含正则表达式元字符，但与其他响应者一样，我过去总是将`Regex.Escape()`其呈现为安全的。在替换字符串中，您需要注意的唯一字符是美元符号 ( [ref](http://msdn.microsoft.com/en-us/library/ewy2t5e0.aspx) )，而逃避它的方法是使用另一个美元符号。请注意，我使用`String.Replace()`它而不是`Regex.Replace()`.

# python - Python 错误：TypeError：'list' 对象不支持索引

> ID：13545084
> 
> 赞同：0
> 
> 时间：2012-11-24T20:06:03.450
> 
> 标签：python

我正在测试一些我将用于一个简单游戏的代码，但我收到了这个错误`in init gamefield[x][y] = tecken TypeError: 'field' object does not support indexing`

游戏有点类似于蛇，我希望我的程序做的是首先创建一个游戏场，它是一个矩阵，我想在其中插入我的蛇（我在这里称之为蠕虫），用“+”表示，位置应该被随机选择。

然后我希望能够决定蠕虫向哪个方向生长，从而决定生长功能。

谁能看到这里有什么问题？任何帮助将不胜感激！

```
import random

class field:
    def __init__(self):

        self.table= [ [ "0" for i in range(10) ] for j in range(10) ]

def printfield(self):
    for row in self.table:
            print (row)
class worm:
    def __init__(self,tecken):

        x = random.randint(1,9) 
        y = random.randint(1,9)
        gamefield[x][y] = tecken

    def grow(self,p,b,c):             
            try :               

                for antal in range(p):
                    if p != 0:      
                        gamefield[x-antal*b][y-antal*c] = "+"    

            except IndexError :
                print ("Game Over")

p = 2
b = 3
c = 0
gamefield = field()
hilda = worm("+")
hilda.grow(p,b,c)

print(gamefield.printfield) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:10:15.917

名单是`gamefield.table`。`gamefield`本身不可索引。

如果您愿意，您可以定义`__getitem__`and `__setitem__`，以便将操作包装在 上`table`。或者，您可以简单地将其实例`gamefield`化为列表列表，而不是使其成为单独的对象类型。

# java - 如何 从 Java 中的 StringBuilder 中删除标签？

> ID：13545094
> 
> 赞同：0
> 
> 时间：2012-11-24T20:07:06.333
> 
> 标签：java, stringbuilder

只是它，我知道如何使用字符串而不是使用 StringBuilder。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:08:31.037

一种方法是使用`indexOf()`来定位标签，并`delete()`​​删除它们。

请参阅[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)。

为了有效地做到这一点，您需要`indexOf(String str, int fromIndex)`循环使用以确保您删除了多个标签 - 并注意`fromIndex`删除标签后的更新方式！更简单但效率低的方法是`indexOf()`重复调用，直到匹配项用完，但这会继续从字符串的开头重新开始搜索。

或者，您可以将 StringBuilder 转换为 String，使用删除的标签创建一个新的 String `replaceAll()`，然后使用结果创建一个新的 StringBuilder。虽然这最初看起来不必要地丑陋和低效，但如果效率不是优先考虑的话，它可能代码更少，并且更易于阅读。

# html - 如何在 100%-Xpx 高度有一个 div？

> ID：13545102
> 
> 赞同：3
> 
> 时间：2012-11-24T20:08:05.073
> 
> 标签：html, css, positioning

我在使用简单的 div 高度和百分比时遇到问题。我已经搜索了网络，但没有运气。这是布局：

```
<div id="modal">
    <div id="modalHead">HEAD</div>
    <div id="modalBody">BODY</div>
</div> 
```

就那么简单。css（精简）：

```
#modal{position:fixed; top:0; left: 0; height:100%;}
#modalHead{height:40px}
#modalBody{height:100%} 
```

问题是我得到 100% 的高度加上 40px。导致额外的 40px 滚动条。因此，我尝试使用负边距，高度：自动，但没有运气。有没有办法做到这一点？

基本上，我想要的是高度线中的东西：100%-40px。

比你！

**编辑：** [链接到 jsFiddle](http://jsfiddle.net/akKWu/1)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:16:55.780

试试这个：

```
#modal{position:fixed;top:0;left:0;right:0;bottom:0}
#modalHead{height:40px}
#modalBody{position:absolute;left:0;right:0;top:40px;bottom:0} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:13:25.273

尝试从您的正文标签和 HTML 中删除所有内容

```
html, body{margin:0px; padding:0px border:0px} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:20:41.940

听起来您只是不希望 modalHead 元素影响 modalBody 的高度，在这种情况下您可以这样做：

```
#modalHead{height:40px; position: absolute;} 
```

一旦你有了它，如果需要，你可以使用 left 和 top 来弄乱它的其余尺寸和位置。

编辑：

离开你的jsfiddle，我想说最简单的解决方案是按照我上面的建议做，只需在modalBody的第一个元素中添加一个margin-top：40px或top：40px（取决于定位）。在您的 jsfiddle 示例中，这将是 p 标签。

```
#modalBody p:first-child{margin-top: 40px;} 
```

# android - 更改选项卡标题的字体 - ActionBarSherlock

> ID：13545107
> 
> 赞同：4
> 
> 时间：2012-11-24T20:08:17.130
> 
> 标签：android, actionbarsherlock, typeface

是否可以通过编程将 ActionBarSherlock Tab 标题的字体更改为自定义字体？我四处寻找一种方法，但只发现使用的字体是默认字体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:39:29.400

我想它会类似于我在这里的[http://thehax.org/code-cuts/setting-a-custom-font-throughout-your-entire-app/](http://thehax.org/code-cuts/setting-a-custom-font-throughout-your-entire-app/)

我扩展了 textview 并在那里设置了字体，但是您应该能够获取 textview 对象并在那里进行操作。

```
String otfName = “FrutigerLTStd-Cn.otf”;
               Typeface font = Typeface.createFromAsset(c.getAssets(), otfName);
               this.setTypeface(font); 
```

# wpf - Application.Dispatcher.UnhandledException 和 CurrentDomain.UnhandledException

> ID：13545108
> 
> 赞同：3
> 
> 时间：2012-11-24T20:08:27.173
> 
> 标签：wpf, multithreading

我正在调查奇怪的 WPF 多线程应用程序挂起，它比开发机器更容易在生产机器上随机发生。

我添加了 Application.Dispatcher.UnhandledException 和 CurrentDomain.UnhandledException 事件处理程序来记录每个异常，以防止应用程序崩溃，因为它是一个系统外壳。

我怀疑挂起的原因是我正在处理这些事件并且不允许应用程序崩溃，这让我说的是，当我使用 Windows 任务管理器监视应用程序活动时，我注意到 CPU 负载可能是由应用程序中的后台任务和这些后台任务正在按预期写入日志。

logger 类使用 BeginInvoke 将日志异步写入磁盘。

最大的问题是每次应用程序在生产机器上挂起时，我在日志文件中都找不到任何东西。

现在我有两个问题：

1.  这些事件的触发顺序是什么：“Application.Dispatcher.UnhandledException 和 CurrentDomain.UnhandledException”。

2.无论如何我可以设法知道我的代码是否失败

**注意**：我在后台任务中使用了很多 Thread.Sleep，因为我自己管理线程，我认为这种方法出错了，我正在考虑从头开始重写我的所有后台任务。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:38:34.570

本次活动顺序为：

1.  [Application.DispatcherUnhandledException](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx)
2.  [CurrentDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

如果您想从代码失败的异常中获取信息，请检查属性 StackTrace。您还可以附加到您的项目 pdb 文件，在这种情况下，您将获得带有行号的 StackTrace。

# html - 在图像上应用？ 我想在背景图像之上申请.page-header .icon1 例如：http: //jsfiddle.net/fR5F6/ 应该在橙色图像的顶部。 怎么做到呢？应该在橙色图像的顶部。 怎么做到呢？

### Some Title...

| Field1 | Field2 | Field3 | Field4 |
| Cell1 | Cell2 | Cell3 | Cell4 |
| Cell1 | Cell2 | Cell3 | Cell4 |

.page-header { background-color:pink; width: 1000px; height: 196px; color: white; font-size: 16px; margin: 0; } .page-header .icon1 { background:url(http://www.nigeltomm.com/images/orange_square_nigel_tomm_m.jpg) no-repeat; width:250px; height:400px; position:absolute; margin-left:5px; margin-top: 20px; } .data { margin-top:20px; } sbteclipse 默认不创建 Scala 项目？ 我只想用 sbt 和 sbteclipse 为我的 scala 项目创建一个目录布局。以下是我的 sbt 文件。 import com.typesafe.sbteclipse.plugin.EclipsePlugin.EclipseKeys name := "BGS" organization := "com.example" version := "1.0.0" scalaVersion := "2.9.2" scalacOptions ++= Seq("-deprecation") EclipseKeys.createSrc := EclipseCreateSrc.Default + EclipseCreateSrc.Resource EclipseKeys.projectFlavor := EclipseProjectFlavor.Scala scalaSource in Compile <<= (sourceDirectory in Compile)(_ / "scala") scalaSource in Test <<= (sourceDirectory in Test)(_ / "scala") libraryDependencies += "org.scalatest" %% "scalatest" % "1.8" % "test" libraryDependencies += "junit" % "junit" % "4.10" % "test" unmanagedBase <<= baseDirectory { base => base / "lib" } unmanagedJars in Compile <<= baseDirectory map { base => (base ** "*.jar").classpath } 在这个 sbt 文件中，我不得不使用 folling to lines 来强制创建 Scala 目录： scalaSource in Compile <<= (sourceDirectory in Compile)(_ / "scala") scalaSource in Test <<= (sourceDirectory in Test)(_ / "scala") 此外，从 sbt 控制台运行“eclipse”后，我将项目导入 Eclipse，但无法创建 Scala 类。Eclipse 项目图标附有“J”字母，表明它是一个 Java 项目：-？ 为什么 sbt 和 sbteclipse 默认为 Java？ 我正在运行 sbt 版本 0.12（截至 2012 年 11 月的最新版本），scala 2.9.2 供您参考，我的目标是使用 sbt 创建具有以下目录结构的工作项目： ├── build.sbt ├── lib │   ├── biojava3-core-3.0.4.jar ├── project │   ├── plugins.sbt │   ├── project │   │   └── target │   └── target │   ├── config-classes │   ├── scala-2.9.2 │   └── streams ├── src │   ├── main │   │   ├── java │   │   ├── resources │   │   └── scala │   └── test │   ├── java │   ├── resources │   └── scala ├── target │   ├── scala-2.9.2 │   │   ├── cache │   │   ├── classes │   │   └── test-classes │   └── streams │   └── compile └── test htmlcss 4 2 回答 2 This answer is useful 3 那你为什么不直接使用z-index呢？喜欢... .data { margin-top:20px; z-index: 1; position: relative; /* ...as z-index only has an effect if an element is positioned */ } JS小提琴。于 2012-11-24T20:10:16.017 回答 This answer is useful 1 尝试这个： .data { margin-top:20px; z-index:2; position:absolute; } 于 2012-11-24T20:12:32.723 回答 Related 1 cakephp - cakephp 包含关联条件问题 1 sql - SQL 字典表是否应该有 IDENTITY 列 0 objective-c - 在 IOS 中渲染交互式 PDF 0 drupal - Drupal 日期重复间隔继承 1 android - 锁定（“Kiosk 模式”）Android 设备 2 iphone - 如何以简单的方式将 iPhone 应用程序转换为通用应用程序？ 1 templates - 将属性动态插入 JSF2/Primefaces 模板？ 3 json - awk 将配置文件转换为 json 1 c# - 使用 SmtpClient 时“操作超时” 2 sql - 在自引用表上编写递归 SQL 查询 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13545114
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, css

我想在背景图像之上申请`.page-header .icon1`

例如：http: [//jsfiddle.net/fR5F6/](http://jsfiddle.net/fR5F6/)

`<table>`应该在橙色图像的顶部。

怎么做到呢？

```
<div class='page-header'>
    <h3>Some Title...</h3>
    <span class='icon1'> </span>
</div>

<table class='data'  border='1' width='500'>
    <tr>
        <td> Field1 </td>
        <td> Field2 </td>
        <td> Field3 </td>
        <td> Field4 </td>
    </tr>
    <tr>
        <td> Cell1 </td>
        <td> Cell2 </td>
        <td> Cell3 </td>
        <td> Cell4 </td>
    </tr>
    <tr>
        <td> Cell1 </td>
        <td> Cell2 </td>
        <td> Cell3 </td>
        <td> Cell4 </td>
    </tr>
 </table>

.page-header {
    background-color:pink;
    width: 1000px;
    height: 196px;
    color: white;
    font-size: 16px;
    margin: 0;
}
.page-header .icon1 {
    background:url(http://www.nigeltomm.com/images/orange_square_nigel_tomm_m.jpg) no-repeat;
    width:250px;
    height:400px;
    position:absolute;
    margin-left:5px;
    margin-top: 20px;
}

.data {
  margin-top:20px;   
}
​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:10:16.017

那你为什么不直接使用`z-index`呢？喜欢...

```
.data {
  margin-top:20px;   
  z-index: 1;
  position: relative; 
  /* ...as z-index only has an effect if an element is positioned */
} 
```

[JS小提琴](http://jsfiddle.net/fR5F6/2/)。​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:12:32.723

尝试这个：

```
.data {
  margin-top:20px; 
z-index:2;  
position:absolute;   
} 
```

# python - 使用python将tgz存储到couchdb

> ID：13545119
> 
> 赞同：1
> 
> 时间：2012-11-24T20:09:30.617
> 
> 标签：python, python-2.7, couchdb, couchdb-python

我正在尝试读取 tgz 文件并将其写入 couchdb。

这是代码。

```
import couchdb
conn = couchdb.Server('http://localhost:5984')
db = conn['test']

with open('/tmp/test.txt.tgz.enc') as f:
     data = f.read()
     doc = {'file': data}
     db.save(doc) 
```

它失败了

```
Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
  File "/usr/local/lib/python2.7/dist-packages/couchdb/client.py", line 407, in save
    _, _, data = func(body=doc, **options)
  File "/usr/local/lib/python2.7/dist-packages/couchdb/http.py", line 399, in post_json
    status, headers, data = self.post(*a, **k)
  File "/usr/local/lib/python2.7/dist-packages/couchdb/http.py", line 381, in post
    **params)
  File "/usr/local/lib/python2.7/dist-packages/couchdb/http.py", line 419, in _request
    credentials=self.credentials)
  File "/usr/local/lib/python2.7/dist-packages/couchdb/http.py", line 176, in request
    body = json.encode(body).encode('utf-8')
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe3 in position 11: ordinal not in range(128) 
```

我自己仍在谷歌搜索以找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:31:13.543

好吧，我解决了。仔细检查了文档，并且有一个 put_attachment 函数，但它需要预先创建一个文档，您将分配附件。

代码示例，如果其他人需要它：

```
import couchdb

conn = couchdb.Server('http://localhost:5984')
db = conn['test1']

doc = {'name': 'testfile'}
db.save(doc)
db.put_attachment(doc, data, filename="test.txt.tgz") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:43:10.803

ki 明白了。参见下面的示例 db=couch.create('test1')-这是使用 test1.doc={'name':'testfile'} 创建数据库名称 -这是键值对。f=open ('/home/yamunapriya/pythonpractices/addd.py','r')-这是用读取模式打开文件.db.save(doc)-保存文件couchdb.db.put_attachment(doc,f, filename="/home/yamunapriya/pythonpractices/addd.py") - 在此参数 doc-key 值对，f-filename/path with read/write mode,filename

```
import couchdb  

couch=couchdb.Server()
db=couch.create('test1') 
doc={'name':'testfile'}  
f=open('/home/yamunapriya/pythonpractices/addd.py','r')
db.save(doc)  
db.put_attachment(doc,f,filename="/home/yamunapriya/pythonpractices/addd.py") 
```

# scala - sbteclipse 默认不创建 Scala 项目？

> ID：13545120
> 
> 赞同：1
> 
> 时间：2012-11-24T20:09:56.937
> 
> 标签：scala, sbt, sbteclipse

我只想用 sbt 和 sbteclipse 为我的 scala 项目创建一个目录布局。以下是我的 sbt 文件。

```
import com.typesafe.sbteclipse.plugin.EclipsePlugin.EclipseKeys

name := "BGS"

organization := "com.example"

version := "1.0.0"

scalaVersion := "2.9.2"

scalacOptions ++= Seq("-deprecation")

EclipseKeys.createSrc := EclipseCreateSrc.Default + EclipseCreateSrc.Resource

EclipseKeys.projectFlavor := EclipseProjectFlavor.Scala

scalaSource in Compile <<= (sourceDirectory in Compile)(_ / "scala")

scalaSource in Test <<= (sourceDirectory in Test)(_ / "scala")

libraryDependencies += "org.scalatest" %% "scalatest" % "1.8" % "test"

libraryDependencies += "junit" % "junit" % "4.10" % "test"

unmanagedBase <<= baseDirectory { base => base / "lib" }

unmanagedJars in Compile <<= baseDirectory map { base => (base ** "*.jar").classpath } 
```

在这个 sbt 文件中，我不得不使用 folling to lines 来强制创建 Scala 目录：

```
scalaSource in Compile <<= (sourceDirectory in Compile)(_ / "scala")

scalaSource in Test <<= (sourceDirectory in Test)(_ / "scala") 
```

此外，从 sbt 控制台运行“eclipse”后，我将项目导入 Eclipse，但无法创建 Scala 类。Eclipse 项目图标附有“J”字母，表明它是一个 Java 项目：-？

为什么 sbt 和 sbteclipse 默认为 Java？

我正在运行 sbt 版本 0.12（截至 2012 年 11 月的最新版本），scala 2.9.2

供您参考，我的目标是使用 sbt 创建具有以下目录结构的工作项目：

```
├── build.sbt
├── lib
│   ├── biojava3-core-3.0.4.jar
├── project
│   ├── plugins.sbt
│   ├── project
│   │   └── target
│   └── target
│       ├── config-classes
│       ├── scala-2.9.2
│       └── streams
├── src
│   ├── main
│   │   ├── java
│   │   ├── resources
│   │   └── scala
│   └── test
│       ├── java
│       ├── resources
│       └── scala
├── target
│   ├── scala-2.9.2
│   │   ├── cache
│   │   ├── classes
│   │   └── test-classes
│   └── streams
│       └── compile
└── test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:49:49.957

由于到目前为止我还没有得到任何理想的答案，所以我倾向于使用 Typesafe Stack。我删除了手动安装的 scala 和 sbt，我正在使用 Typesafe Stack 中的所有内容。当我用这种方式完成测试时，我会更新更多。

这是我承诺的最终更新：

我按照此链接中的说明操作，效果很好： [http ://typesafe.com/resources/typesafe-stack/downloading-installing.html](http://typesafe.com/resources/typesafe-stack/downloading-installing.html)

如果有人想关注 Mac OSX 的详细信息：

基本上，我首先按照此处的说明将 macport 切换到自制软件：

```
http://bitboxer.de/2010/06/03/moving-from-macports-to-homebrew/ 
```

然后我做了：

```
brew install scala sbt maven giter8 
```

然后从命令行创建一个 Scala 项目：

```
g8 typesafehub/scala-sbt 
```

最后，我按照此处的说明添加 sbteclipse 并将项目转换为 eclipse：

```
https://github.com/typesafehub/sbteclipse 
```

一切都按我的预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T23:46:52.137

你为什么要 sbt 来创建这些导演？为什么不自己创建它们。这是一次事件。

你不应该需要以下任何一行

```
EclipseKeys.createSrc := EclipseCreateSrc.Default + EclipseCreateSrc.Resource

EclipseKeys.projectFlavor := EclipseProjectFlavor.Scala

scalaSource in Compile <<= (sourceDirectory in Compile)(_ / "scala")

scalaSource in Test <<= (sourceDirectory in Test)(_ / "scala") 
```

`mkdir -p src/main/scala`每当我开始一个新项目时，我通常都会这样做。

# java - 麻烦创建从磅到公斤的方法

> ID：13545123
> 
> 赞同：-6
> 
> 时间：2012-11-24T20:10:04.793
> 
> 标签：java

我才刚开始`Java`，所以我对语言基本上一无所知。我来自`Python`背景，所以我知道这看起来像这样`Python`：

```
def lbs2kg(w):
    return 0.453592*w 
```

但当然它在 Java 中并不是那么简单。我将如何做到这一点`Java`？是什么`public static void main(String[] args)`意思？

任何能向我发送关于如何以正确的方式解决这个简单问题的`Java`方法都会很棒。我试过了，我似乎得到了指向缺少分号的错误。什么时候放分号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:37:12.030

一定要从一本书中学习。我在学校学习“JAVA: An Eventful Approach” 虽然我很少使用这本书来学习，但它作为参考指南是非常宝贵的。无论如何，这应该可以解决问题：

```
import java.util.Scanner;

public class Practice {
    public static void main(String[] args) {
        Scanner keyboardScan=new Scanner(System.in);
        System.out.println("Input amount:");
        double size = keyboardScan.nextInt();
        System.out.println("Answer: "+ size*0.453592);
    } 
```

虽然这很有效，但它作为带有键盘输入的可运行示例很有用。在一个真正的程序中，你不会想要键盘的东西。请参阅下面的@Taymon 帖子以获得更好的形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T21:01:45.843

在 Java 中，与 Python 不同，没有直接的函数。一切都是类中的方法。您可以获得的最接近的是静态方法，它们与整个类相关联，而不是与它的任何特定实例相关联。

您可以在 Java 中获得最接近您发布的 Python 代码的是：

```
public class Conversions {
    public static double lbs2kg(double w) {
        return 0.453592 * w;
    }
} 
```

我肯定会建议从其他人建议的书或教程中学习语言。

# web-applications - Web 应用程序如何更新前端的实时计数器/计时器？

> ID：13545127
> 
> 赞同：0
> 
> 时间：2012-11-24T20:10:45.340
> 
> 标签：web-applications, asynchronous, web

我一直在寻找一些便士拍卖网站，并试图弄清楚它们是如何运作的。这些网站有实时计时器，显示在最新竞标者获胜之前拍卖的时间。计时器会在有人出价时重置，或者在计时器接近 0 时给予更多时间。

我查看了萤火虫控制台以查看是否正在发出任何 HTTP 请求，并且某些站点每秒发送一个 GET 请求以获取更新的计时器，但其他站点没有。计时器（独立于其他计时器）会随机刷新，而不会向服务器发送任何请求。他们如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:13:20.827

我不确定您正在检查的网站是如何实现这一点的，但我相信使用 websockets 是可能的。[http://www.websocket.org/echo.html](http://www.websocket.org/echo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T19:42:47.003

你的意思是这样的：[http](http://codecanyon.net/item/realtime-online-users/3740135) ://codecanyon.net/item/realtime-online-users/3740135 ？

# expression - 查找正则语言 L={w | 的正则表达式 w 是整数的十进制表示法，它是 4 的倍数}

> ID：13545129
> 
> 赞同：-1
> 
> 时间：2012-11-24T20:10:56.140
> 
> 标签：expression

谁能弄清楚如何解决这个问题？需要一些帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:21:50.687

`0|4|8|(0|1|2|3|4|5|6|7|8|9)*((0|2|4|8)(0|4|8)|(1|3|5|7)(2|6))`

# ruby-on-rails - 如何从 Rails 中删除错误的路线？

> ID：13545130
> 
> 赞同：0
> 
> 时间：2012-11-24T20:11:11.873
> 
> 标签：ruby-on-rails

我正在 Rails 3 中测试一些示例，但不知何故，路由表以错误的路由告终。这是rails知道的路线

```
course_ad_student POST   /students/:id/course_ad(.:format)               students#course_ad 
```

但在我的学生控制器方法中是这样的

```
def course_add
   #code
end 
```

所以问题是，如何删除“course_ad_student”路线并改为放置“course_add_student”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:20:43.320

看`config/routes.rb`。找到类似的行`post 'course_ad'`并适当地更改它。

# ruby - 是否可以对使用 ruby 发送的 Net::SMTP 电子邮件进行单元测试？

> ID：13545132
> 
> 赞同：5
> 
> 时间：2012-11-24T20:11:16.390
> 
> 标签：ruby, unit-testing, email, smtp

是否可以对使用 ruby​​ 发送的 Net::SMTP 电子邮件进行单元测试？

也许是某种嘲讽？

# iphone - Youtube API 自动完成搜索

> ID：13545133
> 
> 赞同：0
> 
> 时间：2012-11-24T20:11:20.863
> 
> 标签：iphone, objective-c, search, autocomplete, youtube-api

我正在使用 Youtube API，我想要一个搜索自动完成功能，就像 int 网站一样，当您在 iPhone 应用程序的搜索输入框中输入内容时，它会为您提供术语建议。我已经阅读了文档，但仍然缺少，这可以使用 API 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-05T19:04:01.800

好吧，我知道在这里回答为时已晚，但我会发布这个答案，因为这让我疯狂了几天！！！并希望它会保存给其他人......

所以...我正在使用这个**API**： [http](http://suggestqueries.google.com/complete/search?client=youtube&ds=yt&alt=json&q=%@) ://suggestqueries.google.com/complete/search?client=youtube&ds=yt&alt=json&q=%@ （q 是自动完成搜索的查询）。

现在，如果您尝试打开浏览器，粘贴此 API 并将 q=%@ 更改为（假设）：q=br，您会注意到一些后缀为 .js 的文件已下载到您的计算机。出于某种原因，我无法像那样解析**JSON**，所以我做了那个技巧：

```
 @property(strong, nonatomic) NSMutableArray *ParsingArray // Put that in .h file or after @interface in your .m file

  -(void)autocompleteSegesstions : (NSString *)searchWish{
//searchWish is the text from your search bar (self.searchBar.text)

NSString *jsonString = [NSString stringWithFormat:@"http://suggestqueries.google.com/complete/search?client=youtube&ds=yt&alt=json&q=%@", searchWish];
    NSString *URLString = [jsonString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; // Encoding to identify where, for example, there are spaces in your query.

NSLog(@"%@", URLString);

    NSData *allVideosData = [[NSData alloc]initWithContentsOfURL:[[NSURL alloc]initWithString:URLString]];

NSString *str = [[NSString alloc]initWithData:allVideosData encoding:NSUTF8StringEncoding];
NSLog(@"%@", str); //Now you have NSString contain JSON. 
NSString *json = nil;
NSScanner *scanner = [NSScanner scannerWithString:str];
[scanner scanUpToString:@"[[" intoString:NULL]; // Scan to where the JSON begins
[scanner scanUpToString:@"]]" intoString:&json];
//The idea is to identify where the "real" JSON begins and ends.
json = [NSString stringWithFormat:@"%@%@", json, @"]]"];
NSLog(@"json = %@", json);

NSArray *jsonObject = [NSJSONSerialization JSONObjectWithData:[json dataUsingEncoding:NSUTF8StringEncoding] //Push all the JSON autocomplete detail in to jsonObject array.
                                                                                 options:0 error:NULL];
self.ParsingArray = [[NSMutableArray alloc]init]; //array that contains the objects.
for (int i=0; i != [jsonObject count]; i++) {
    for (int j=0; j != 1; j++) {
        NSLog(@"%@", [[jsonObject objectAtIndex:i] objectAtIndex:j]);
        [self.ParsingArray addObject:[[jsonObject objectAtIndex:i] objectAtIndex:j]];
        //Parse the JSON here...

    }

}} 
```

而已。现在 ParsingArray 是包含来自 YouTube 的所有自动完成信息的数组！为了能够在用户每次单击 searchBar 上的另一个字符时更改它，请使用此函数：

```
 - (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{
    [self autocompleteSegesstions:self.searchBar.text];} 
```

现在，这是您应该拥有的主要代码。要使这段代码更快（因为您现在可以看到键盘上有写入延迟），请使用另一个线程下载**ParsingArray**或使用**Asynchronous block**。（只需将第一个方法的内容插入 Async 块...）

请记住-也许还有另一种实现**自动完成youTube搜索**的方法比这更好，但我只是没有找到它，我搜索了很多！如果有人知道更好的方法，如果他在这里发布，我会更高兴。

玩得开心！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:41:57.603

不是 Youtube API——但您可以使用 Google Suggest API。调用此 URL：

```
http://suggestqueries.google.com/complete/search?client=youtube&ds=yt&q=QUERY 
```

这将返回您的应用可以解析和显示的建议术语的 json 响应。如果您更喜欢 XML 而不是 json，请更改

```
client=youtube 
```

至

```
output=toolbar 
```

（其余参数保持不变）。

# c# - 如何在wpf中将组合框绑定到组合框

> ID：13545136
> 
> 赞同：-1
> 
> 时间：2012-11-24T20:11:38.170
> 
> 标签：c#, wpf, binding, .net-4.0, combobox

我有两个组合框

```
<ComboBox x:Name="sourceNumber">
    <ComboBoxItem Content="1"/>
    <ComboBoxItem Content="2"/>
    <ComboBoxItem Content="3"/>
    <ComboBoxItem Content="4"/>
    <ComboBoxItem Content="5"/> 
```

和

```
<ComboBox x:Name=destinationNumber ItemsSource="{Binding Source={sourceNumber.SelectedIndex}"/> 
```

当我选择`sourceNumber = 3` (1,2,3) 时将添加到`destinationNumber`
当我选择`sourceNumber = 5` (1,2,3,4,5) 时将添加到`destinationNumber`

我该怎么做 ？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:18:16.710

你可以使用转换器来解决这个问题。

```
public class ComboBoxItemsSourceConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if(value != null && value is int)
            {
                int max = (int)value;
                if (max == -1) return null;
                return Enumerable.Range(1, max + 1);
            }
            else
                return null;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

您必须稍微更改您的 XAML 代码：

```
<ComboBox x:Name="destinationNumber" 
                  ItemsSource="{Binding Path=SelectedIndex, ElementName=sourceNumber, Converter={StaticResource myConverter}}"/> 
```

在哪里`myConverter`：

```
<local:ComboBoxItemsSourceConverter x:Key="myConverter" /> 
```

# winjs - 带有嵌套 for 循环 WinJS 的模板绑定

> ID：13545138
> 
> 赞同：1
> 
> 时间：2012-11-24T20:11:55.437
> 
> 标签：winjs

我遇到了一个问题，我正在使用 template.render 来呈现基于 html 模板的项目数组。数组中的每个项目还包含另一个数组，我想在该区域的父元素内绑定到另一个模板。我知道我可以为组使用网格布局，但我正在尝试以另一种方式完成此操作，所以请不要建议使用不同的控件，我只是好奇为什么以下内容无法正常工作。

```
 //html templates
   <div id="area-template" data-win-control="WinJS.Binding.Template">
    <h1 class="area-title" data-win-bind="innerHTML:title"></h1>
    <div class="items">

    </div>
  </div>

<div id="item-template" data-win-control="WinJS.Binding.Template">
    <h2 class="item-title" data-win-bind="innerHTML:title"></h2>
</div>

   // JS in ready event
   var renderer = document.getElementsByTagName('section')[0];
            var area_template = document.getElementById('area-template').winControl;
            var item_template = document.getElementById('item-template').winControl;
            for (var i = 0; i < areas.length; i++) {
                var area = areas.getAt(i);
                area_template.render(area, renderer).done(function (el) {
                    var item_renderer = el.querySelector('.items');
                    for (var j = 0; j < area.items.length; j++) {
                        var item = area.items[j];
                        item_template.render(item, item_renderer).done(function (item_el) {
                        });
                    }
                });
            } 
```

那么应该发生的是，在它渲染区域之后，在“完成”函数中，新创建的元素（el）被返回，然后我发现它是“.items”div来附加项目。但是，这会将所有项目附加到创建的第一个 div 中。如果它是最后一个 div，由于闭包，它可能更有意义，但它发生在第一个 div 上的事实真的让我失望！

有趣的是，如果我使用 document.createElement 和 el.appendChild 替换我的模板渲染函数，它会正确显示，例如：（在完成区域渲染中）

```
 area_template.render(area, renderer).done(function (el) {
    var item = area.items[j];
    var h2 = document.createElement('h2');
    h2.innerText = item.title;
    el.appendChild(h2);
} 
```

虽然我已经意识到这是 el 它正在附加它，而不是 el 的实际 .items div

我不太确定这里会发生什么。看起来 el 的值正在正确更新，但是 el.querySelector 要么总是返回错误的“.items” div，要么它被保留在某个地方，但是调试确实表明 el 在循环期间发生了变化。任何见解将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:27:39.277

我已经弄清楚这里发生了什么。渲染承诺中返回的“el”不是我想的新创建的元素。它是渲染器和新创建的 html 一起。因此 el.querySelector('.items') 总是带回它找到的第一个 '.items'。我一定是误读了文档，但希望其他人会发现这些信息有用，以防万一他们有同样的错误。

我想解决这个问题的一种方法是执行 item_rendered = el.querySelectorAll('.items')[i] 并根据循环中的位置返回编号的 '.items'

例如

```
 for (var i = 0; i < areas.length; i++) {
                var area = areas.getAt(i);
                area_template.render(area, renderer).done(function (el) {
                    var item_renderer = el.querySelectorAll('.items')[i];
                    for (var j = 0; j < area.items.length; j++) {
                        var item = area.items[j];
                        var h2 = document.createElement('h2');
                        h2.innerText = item.title;
                        item_renderer.appendChild(h2);
                    }
                });
            } 
```

# ruby-on-rails - rails respond_to format.js API

> ID：13545148
> 
> 赞同：45
> 
> 时间：2012-11-24T20:12:35.677
> 
> 标签：ruby-on-rails, ruby, syntax

我是一位经验丰富的 JAVA 和 C++ 开发人员，我正在尝试了解 Rails 的工作原理。

我在下面得到了这段代码：

```
respond_to do |format|
      if @line_item.save
        format.html { redirect_to store_url }
        format.js { render :json => @line_item, :mime_type => Mime::Type.lookup('application/json'), 
                :callback => 'javascriptFunction' } 
```

我一直在搜索定义我可以在其中传递`format.js {}`但我找不到的 api。

首先：什么样的语句是`format.js`，它是一个变量吗？

最重要的是：我可以将哪些属性传递给 format.js {} ？你能通过直接链接吗？我搜索了[http://api.rubyonrails.org/](http://api.rubyonrails.org/)

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-11-24T21:35:21.663

```
respond_to do |format|
  format.js # actually means: if the client ask for js -> return file.js
end 
```

`js`这里指定控制器方法将作为响应发回的 mime 类型；
[默认 Rails 哑剧类型](http://apidock.com/rails/Mime)。
如果您也尝试使用`format.yaml`：

```
respond_to do |format|
  format.js
  format.yaml
end 
```

这意味着您的控制器将返回`yml`或`js`取决于客户端的要求；

`{}`对 ruby​​ 而言是一个[块](http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/)；如果您不指定任何 rails 将尝试从 app/views/[contoller name]/[controller method name].[html/js/...] 渲染默认文件

```
# app/controllers/some_controller.rb
def hello
  respond_to do |format|
    format.js
  end
end 
```

会寻找`/app/views/some/hello.js.erb`；// 至少在 Rails v. 2.3 中。

如果您确实指定了块：

```
respond_to do |format|
    # that will mean to send a javascript code to client-side;
    format.js { render             
        # raw javascript to be executed on client-side
        "alert('Hello Rails');", 
        # send HTTP response code on header
        :status => 404, # page not found
        # load /app/views/your-controller/different_action.js.erb
        :action => "different_action",
        # send json file with @line_item variable as json
        :json => @line_item,
        :file => filename,
        :text => "OK",
        # the :location option to set the HTTP Location header
        :location => path_to_controller_method_url(argument)
      }

  end 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-09-12T13:46:58.733

我相信这是您要查找的网址：

[https://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to](https://apidock.com/rails/ActionController/MimeResponds/InstanceMethods/respond_to)

这可能对某些人也有帮助，看看您实际上可以在 format.js 方法中直接渲染 js，例如，如果您只想返回一个小的一行 js 语句，并且您**不想**推迟一个 RJS 文件，如`controller_action_name.js.erb`：

```
respond_to do |format|
  format.html { redirect_to new_admin_session_path }
  format.js   { render :js => "window.location='#{ new_admin_session_path }'" }
end 
```

# php - 如何在类中添加参数？

> ID：13545149
> 
> 赞同：0
> 
> 时间：2012-11-24T20:12:39.487
> 
> 标签：php, class, post

在页面 test.php 上，我发送带有方法 post 的表单。

**代码页 test.php**

```
var_dump($_POST);
error_reporting(E_ALL | E_STRICT);
require('UploadHandler.php');
$upload_handler = new UploadHandler(); 
```

当我使用`var_dump($_POST)`时，我可以看到

```
array(1) {
  ["prod"]=>
  string(7) "4477535"
} 
```

**部分代码页 UploadHandler.php**

```
class UploadHandler
{
......
function add_img($img)
    {
    $prod=mysql_real_escape_string($_POST('prod'));
    $add_to_db = $this->query("INSERT INTO prods (`prod`, `image`, `main`) VALUES ('$prod','".$img."','')") or die(mysql_error());
    return $add_to_db;
    }
...
} 
```

当我使用此代码时，我有**500 内部服务器错误**

**有了萤火虫，我看到了 POST**

```
-----------------------------20037128598723 
Content-Disposition: form-data; name="prod"

4477535

-----------------------------20037128598723
Content-Disposition: form-data; name="files[]";
filename="Penguins.jpg" Content-Type: image/jpeg
...
...
...
-----------------------------20037128598723-- 
```

请告诉我如何将**$_POST('prod')**添加到课程中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:24:55.783

而不是`$_POST('prod')`，使用`$_POST['prod']`.

如果这不能解决整个问题，您需要添加更多关于特定错误消息的详细信息。500 Internal Server Error 仅表示 PHP 在 STDERR 上输出了一些内容。检查您的日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:25:38.827

您在 php 中有语法错误

```
 $prod=mysql_real_escape_string($_POST('prod')); 
```

改用这个

```
 $prod=mysql_real_escape_string($_POST['prod']); 
```

# java - ArrayList 混淆

> ID：13545150
> 
> 赞同：0
> 
> 时间：2012-11-24T20:12:41.817
> 
> 标签：java, string, list, arraylist, java.util.scanner

下面的代码是我尝试从字符串文件中读取，通读每一行直到找到'：'然后存储+打印之后的所有内容。但是，打印功能会打印出我从文件中读取的所有内容。有人能发现我哪里出错了吗？谢谢

编辑：每一行都是这种格式“这里有一些文字：这里有更多文字”

```
public void openFile() {

        try {
            scanner = new BufferedReader(new FileReader("calendar.ics"));
        } catch (Exception e) {
            System.out.println("Could not open file");

        }

    }

    public void readFile() {
        ArrayList<String> vals = new ArrayList<String>();
        String test;

        try {
        while ((line = scanner.readLine()) != null)
        {

        int indexOfComma = line.indexOf("\\:"); // returns firstIndexOf ':'
        test = line.substring(indexOfComma+1);  // test to be everything after ':'
        vals.add(test);  // add values to vals
        }
        }  catch(Exception ex){ }

            for(int i=0; i<vals.size(); i++){
         System.out.println(vals.get(i));
    }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T20:14:40.480

你不需要逃避你的结肠。

```
line.indexOf("\\:"); 
```

将上面的行更改为： -

```
line.indexOf(":"); 
```

因为，那将搜索`\\:`，如果没有找到则返回 value `-1`。

```
test = line.substring(indexOfComma+1); 
```

所以，如果你的`indexComma`is `-1`，肯定会是，如果你的字符串不包含 - `\\:`，那么你上面的行变成： -

```
line.substring(0);  // same as whole string 
```

* * *

作为建议，您应该在声明列表时将抽象类型作为引用类型。因此，您应该在声明的 LHS 上使用`List`而不是：-`ArrayList``List`

```
List<String> vals = new ArrayList<String>(); 
```

# android - 调用 Web 服务和接收数据时出错

> ID：13545151
> 
> 赞同：1
> 
> 时间：2012-11-24T20:12:47.763
> 
> 标签：android, web-services, ksoap2

我尝试使用此代码从 Web 服务接收数据，但发生致命错误

```
package com.example.lo2i05;

import java.io.IOException;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
    private static String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
    private static String NAMESPACE = "http://tempuri.org/";
    private static String METHOD_NAME = "CelsiusToFahrenheit";
    private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";
    private TextView tv;
    private Button btn;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         tv = (TextView)findViewById(R.id.txt);
         btn = (Button)findViewById(R.id.btn);
         btn.setOnClickListener(new View.OnClickListener() 
         {
            @Override
            public void onClick(View arg0) 
         {

                final SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);             
                 request.addProperty("Celsius","32"); 
                 final SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                 envelope.setOutputSoapObject(request);
                 envelope.dotNet = true;
                 try 
                    {
                            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                            androidHttpTransport.call(SOAP_ACTION, envelope);                    
                            SoapPrimitive result = (SoapPrimitive) envelope.getResponse();          
                            String r = result.toString();
                            tv.setText(r);
                    }
                    catch (IOException e) 
                    {
                           tv.setText("1");
                    }
                    catch (XmlPullParserException e) 
                    {
                           tv.setText("2");
                    }   
         }
        });

       } 
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是一个 LogCat

```
11-24 23:04:03.100: W/IInputConnectionWrapper(1155): getSelectedText on inactive InputConnection
11-24 23:04:03.100: W/IInputConnectionWrapper(1155): setComposingText on inactive InputConnection
11-24 23:04:03.100: W/IInputConnectionWrapper(1155): getExtractedText on inactive InputConnection
11-24 23:04:08.135: D/GestureDetector(1155): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
11-24 23:04:08.165: D/AndroidRuntime(1155): Shutting down VM
11-24 23:04:08.165: W/dalvikvm(1155): threadid=1: thread exiting with uncaught exception (group=0x412862a0)
11-24 23:04:08.170: E/AndroidRuntime(1155): FATAL EXCEPTION: main
11-24 23:04:08.170: E/AndroidRuntime(1155): android.os.NetworkOnMainThreadException
11-24 23:04:08.170: E/AndroidRuntime(1155):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at org.ksoap2.transport.ServiceConnectionSE.openOutputStream(ServiceConnectionSE.java:109)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:157)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at com.example.lo2i05.MainActivity$1.onClick(MainActivity.java:46)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at android.view.View.performClick(View.java:4223)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at android.view.View$PerformClick.run(View.java:17275)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at android.os.Handler.handleCallback(Handler.java:615)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at android.os.Looper.loop(Looper.java:137)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at android.app.ActivityThread.main(ActivityThread.java:4898)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at java.lang.reflect.Method.invokeNative(Native Method)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at java.lang.reflect.Method.invoke(Method.java:511)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
11-24 23:04:08.170: E/AndroidRuntime(1155):     at dalvik.system.NativeStart.main(Native Method)
11-24 23:09:16.970: I/Process(1155): Sending signal. PID: 1155 SIG: 9 
```

Android 版本：4.2（果冻豆）。

# 我在清单中添加了访问 Internet 的权限。

新代码 (1.0)

```
package com.example.lo2i05;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
    private static String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
    private static String NAMESPACE = "http://tempuri.org/";
    private static String METHOD_NAME = "CelsiusToFahrenheit";
    private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";
    private TextView tv;
    private Button btn;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         tv = (TextView)findViewById(R.id.txt);
         btn = (Button)findViewById(R.id.btn);
         btn.setOnClickListener(new View.OnClickListener() 
         {
            @Override
            public void onClick(View arg0) 
         {
                 final SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);             
                 request.addProperty("Celsius","32"); 
                 final SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);
                 envelope.setOutputSoapObject(request);
                 envelope.dotNet = true;
                 new AsyncTask<Void, Void, Boolean>() {
                    SoapObject obj;

                    @Override
                    protected Boolean doInBackground(Void... params) {
                           //here you can do your background network job
                        try{ HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);          
                               androidHttpTransport.call(SOAP_ACTION, envelope);             
                               obj = (SoapObject)envelope.getResponse();
                               return true;  }
                         catch (Exception e)  {e.printStackTrace();   
                                 return false;}}
                    @Override
                    protected void onPostExecute(Boolean result) {
                     //here you can do your UI job
                        if (!result) 
                            tv.setText("Error");
                        else 
                            tv.setText(obj.getProperty(0).toString());
                        super.onPostExecute(result);
                    }
                }.execute();
         }
        });

       } 
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

========================================

日志猫

```
11-24 23:37:34.120: E/Trace(2671): error opening trace file: No such file or directory (2)
11-24 23:37:34.235: D/libEGL(2671): loaded /system/lib/egl/libEGL_mali.so
11-24 23:37:34.240: D/libEGL(2671): loaded /system/lib/egl/libGLESv1_CM_mali.so
11-24 23:37:34.240: D/libEGL(2671): loaded /system/lib/egl/libGLESv2_mali.so
11-24 23:37:34.245: D/(2671): Device driver API match
11-24 23:37:34.245: D/(2671): Device driver API version: 10
11-24 23:37:34.245: D/(2671): User space API version: 10 
11-24 23:37:34.245: D/(2671): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Wed Sep 12 17:53:53 KST 2012 
11-24 23:37:34.275: D/OpenGLRenderer(2671): Enabling debug mode 0
11-24 23:37:35.895: D/GestureDetector(2671): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
11-24 23:37:50.615: W/System.err(2671): java.lang.ClassCastException: org.ksoap2.serialization.SoapPrimitive cannot be cast to org.ksoap2.serialization.SoapObject
11-24 23:37:50.615: W/System.err(2671):     at com.example.lo2i05.MainActivity$1$1.doInBackground(MainActivity.java:48)
11-24 23:37:50.615: W/System.err(2671):     at com.example.lo2i05.MainActivity$1$1.doInBackground(MainActivity.java:1)
11-24 23:37:50.620: W/System.err(2671):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
11-24 23:37:50.620: W/System.err(2671):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-24 23:37:50.620: W/System.err(2671):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-24 23:37:50.620: W/System.err(2671):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
11-24 23:37:50.620: W/System.err(2671):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-24 23:37:50.620: W/System.err(2671):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-24 23:37:50.620: W/System.err(2671):     at java.lang.Thread.run(Thread.java:856)
11-24 23:38:05.935: W/IInputConnectionWrapper(2671): getSelectedText on inactive InputConnection
11-24 23:38:05.935: W/IInputConnectionWrapper(2671): setComposingText on inactive InputConnection
11-24 23:38:05.935: W/IInputConnectionWrapper(2671): getExtractedText on inactive InputConnection 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:17:02.847

看看这个[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。根据官方文档，如果您使用 Honeycomb SDK 或更高版本，则不应将网络操作放在主/UI 线程上。允许针对早期 SDK 版本的应用程序在其主事件循环线程上进行联网，但强烈建议不要这样做，因为它会阻塞 UI 并可能导致 ANR。

您需要使用后台线程或`AsyncTask`进行网络操作以避免出现此异常。

作为一般规则，总是将耗时的任务放在后台线程或`AsyncTask`.

编辑：

更改代码中的以下行

```
obj = (SoapObject)envelope.getResponse(); 
```

至

```
SoapPrimitive result = (SoapPrimitive) envelope.getResponse(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T20:31:28.643

尝试像这样异步：

```
public class MainActivity extends Activity {
private static String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
private static String NAMESPACE = "http://tempuri.org/";
private static String METHOD_NAME = "CelsiusToFahrenheit";
private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";
private TextView tv;
private Button btn;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     tv = (TextView)findViewById(R.id.txt);
     btn = (Button)findViewById(R.id.btn);
     btn.setOnClickListener(new View.OnClickListener() 
     {
        @Override
        public void onClick(View arg0) 
     {
      new MyTask().execute();
      }
    });
  }
public class MyTask extends AsyncTask<Void, Void, String> {

    ProgressDialog progress;
        String response = "";

      public void onPreExecute() {

        super.onPreExecute();
      }

    @Override
    protected Stirng doInBackground(Void... arg0) {
             final SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);             
             request.addProperty("Celsius","32"); 
             final SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
             envelope.setOutputSoapObject(request);
             envelope.dotNet = true;
             try 
                {
                        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                        androidHttpTransport.call(SOAP_ACTION, envelope);                    
                        SoapPrimitive result = (SoapPrimitive) envelope.getResponse();          
                         response = result.toString();

                }
                catch (IOException e) 
                {
                 response = "1";
                }
                catch (XmlPullParserException e) 
                {
                 response = "2";
                } 

        return response;
    }
    @Override
    public void onPostExecute(String res) {

                if(!(res.equalsIgnoreCase("")))
                {
                 tv.setText(res);
                }

      }
    }
 } 
```

现在试试这个

# asp.net-mvc - ActionLink 到 HttpPost 操作方法

> ID：13545161
> 
> 赞同：1
> 
> 时间：2012-11-24T20:13:35.640
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery

我的页面上有这个链接：

```
@Html.ActionLink("Like", "Like", "Like", new {likeId = i.ItemId}, new {id = @i.ItemId, @class = "likeButton"}) 
```

这是我的ajax调用：

```
$(document).on("click", ".likeButton", function (event) {

        var itemId = event.target.id;

        $.ajax({
            url: this.href,
            type: 'POST',
            data: { item: itemId },
            context: this,
            success: function (result) {
                ...
        return false;
    }); 
```

它在动作方法如下时起作用：

```
public ActionResult Like(int itemId)
... 
```

但是如果我用它装饰方法`[HttpPost]`不起作用。
这可以实现吗？
如果我不添加，还有什么安全问题`[HttpPost]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:19:16.427

尝试这个：

```
$(document).on("click", ".likeButton", function (event) {

    $.ajax({
        url: this.href,
        type: 'POST',
        context: this,
        success: function (result) {
            ...
    return false;
}); 
```

您将 item.Id 传递两次，第一次在 url 中，第二次在正文中。使用 post 方法时，仍然可以通过 url 传递参数。当你想隐藏这些参数时，用 body 传递参数是很好的。

还有一件事，您可以在这种情况下使用 Ajax.ActionLink（因为它是为这种情况创建的）

你有错误：

```
data: { item: itemId } 
```

应该：

```
data: { itemId: itemId }, 
```

# maple - Maple - 对于非常简单且可能的集成，集成返回未定义

> ID：13545163
> 
> 赞同：-1
> 
> 时间：2012-11-24T20:14:03.460
> 
> 标签：maple

这是一个关于 maple 产生未定义错误的问题。

下面的代码应该给出结果 0，但 maple 选择将其标记为“未定义”。

```
(nj*(nj-1))*(int(N^(ni+nj-2),N=-1..1));
ni:=0;  nj:=0; 
```

由于 nj=0，您可以很清楚地看到，即使在积分之前，答案也是 0 x 积分。

积分是可以做的，手工做它会给你 (-1/N) 在 1 和 -1 之间评估，所以用 (-1/1)-(-1/-1) 代替 -1-1 = -2)。

总体答案由 0x-2 给出，即 0。

Maple 返回**undefined**。

但是，如果您采用该代码的一小部分（只是积分）

```
 (int(N^(ni+nj-2),N=-1..1)) or even (int(N^(-2),N=-1..1)) 
```

然后 maple 返回**infinity**。

这些都不正确。

谁能向我解释为什么会这样？我认为其他人可能会遇到类似的问题，因为它是如此简单的枫树程序。然而，它给出了一个令人困惑的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:16:21.853

正如评论中已经分享的那样，0 次无穷大是未定义的，参见例如[为什么无穷大乘以零不是一个简单的零答案](https://math.stackexchange.com/questions/28940/why-is-infinity-multiplied-by-zero-not-an-easy-zero-answer)

为了保持 Maple 表尽可能完整，您始终可以在代码中包含 if 语句，这非常容易

```
if nj = 0 then
 #do something
end if; 
```

但是，您应该始终检查您是否在数学上做正确的事情，因为 Maple 确实输出*Undefined*是有原因的！

# c# - ListView.ItemTemplate的MultiBinding DataTemplate？

> ID：13545164
> 
> 赞同：0
> 
> 时间：2012-11-24T20:14:07.297
> 
> 标签：c#, windows-runtime, datatemplate, itemtemplate, multibinding

`DataTemplate`我只是想为我定义一个自定义`ListView`，以便显示一个类的一些数据。在早期的项目（c#、.net 3.5、wpf）中，我有这样的东西：

```
<Style x:Key="Custom_ComboBox_Style" TargetType="{x:Type ComboBox}">
<Setter Property="ItemTemplate">
    <Setter.Value>
        <DataTemplate>
            <TextBlock>
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{0}    {1} Members">
                        <Binding Path="Name"/>
                        <Binding Path="MemberCount"/>
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
        </DataTemplate>
    </Setter.Value>
</Setter> 
```

不幸的是，这在我当前的 WinRT 项目中不起作用:(我搜索了谷歌，发现 WinRT 已经没有`MultiBinding`了。直到现在我找不到任何解决这个问题的方法。任何想法如何解决这个问题并实现和上面`DataTemplate`的一样吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:59:43.760

试试这个：

```
<Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Name}" Margin="0,0,20,0" />
                    <TextBlock Text="{Binding MemberCount}" Margin="0,0,5,0" />
                    <TextBlock Text="Members"  />
                </StackPanel>
            </DataTemplate>
        </Setter.Value>
    </Setter> 
```

# data-structures - 一棵树的前序、后序和中序遍历是从哪里得名的？

> ID：13545167
> 
> 赞同：1
> 
> 时间：2012-11-24T20:14:26.913
> 
> 标签：data-structures

只是好奇。我似乎每次都忘记了他们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T20:20:19.667

[*Pre-*表示“之前”](http://www.merriam-webster.com/dictionary/pre-)， [*post-*表示“之后”](http://www.merriam-webster.com/dictionary/post-)。在前*序*遍历中，您处理其子*节点之前处理一个节点。*在*后序*遍历中，您处理其子*节点后处理一个节点。*在中*序*遍历中，您处理其子*节点之间处理一个节点。*

# c# - 如何合并两个字典

> ID：13545169
> 
> 赞同：2
> 
> 时间：2012-11-24T20:14:52.353
> 
> 标签：c#, dictionary

> **可能重复：**
> [在 C# 中合并字典](https://stackoverflow.com/questions/294138/merging-dictionaries-in-c-sharp)

使用具有 2 个类型的字典的 c#4

```
<string,List<int>>

dictionary1 = [ { "key1" , [ 1, 2, 3]} ,
                 { "key2" , [ 1, 2, 4 , 6]}
              ] 
```

我想和dictionary2联合

```
dictionary2 = [ { "key0" , [ 1, 2, 3]} ,
                 { "key2" , [ 1, 2, 3, 5 , 6]} 
              ] 
```

所以得到=>

```
dictionary1 + dictionary2  = [ { "key1" , [ 1, 2, 3]} ,
                 { "key2" , [ 1, 2, 3, 4, 5, 6]},
                 { "key0" , [ 1, 2, 3]}
              ] 
```

我该怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T20:21:13.910

一个带有`Enumerable.Union`? 的简单循环：

```
foreach (var kv in dictionary2)
{
    List<int> values;
    if (dictionary1.TryGetValue(kv.Key, out values))
    {
        dictionary1[kv.Key] = values.Union(kv.Value).ToList();
    }
    else
    {
        dictionary1.Add(kv.Key, kv.Value);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T20:33:43.060

```
var result = 
   dictionary1.Union(dictionary2)
    .GroupBy(kv => kv.Key)
    .ToDictionary(g => g.Key, g => g.SelectMany(v => v.Value).Distinct().ToList()); 
```

# php - PDO 使用键作为列名插入数组

> ID：13545170
> 
> 赞同：2
> 
> 时间：2012-11-24T20:14:58.940
> 
> 标签：php, mysql, sql, pdo

我将我的 PHP 数组的 $_POST 内容插入到带有 PDO 的表中。我正在查看以下代码行，并且遇到了其中一个“必须有更好的方法来做到这一点”的时刻。如果键名与表中的列名匹配，是否有更简单的方法将其全部插入？

代码例如：

```
$statement = $db->prepare("INSERT INTO `applications`(`username`, `email`, `password`, `name`) VALUES (?,?,?,?)");

$statement->execute(array($_POST['username'], $_POST['email'],$_POST['password'],$_POST['name'])); 
```

这段代码工作，但它似乎有点过头了（特别是随着越来越多的列被添加）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-24T20:37:41.210

我会这样做：

首先声明列。我们将使用这些来提取 $_POST 的子集以用作列。否则，用户可能会传递与表的任何列都不匹配的虚假请求参数，这会破坏我们的 SQL。

```
$columns = array('username','email','password','name');
$column_list = join(',', $columns); 
```

创建命名参数占位符，即`:username`.

```
$param_list = join(',', array_map(function($col) { return ":$col"; }, $columns)); 
```

单独形成 SQL，因为如果它在自己的变量中，则更易于阅读和调试。

```
$sql = "INSERT INTO `applications` ($column_list) VALUES ($param_list)"; 
```

*始终*检查从`prepare()`和返回的错误状态`execute()`。

```
$statement = $db->prepare($sql);
if ($statement === false) {
  die(print_r($db->errorInfo(), true));
} 
```

这里我们*只*取$_POST 中与我们要插入的列相匹配的字段。

```
$param_values = array_intersect_key($_POST, array_flip($columns)); 
```

并将该数组传递给`execute()`. 再次检查错误返回状态。

```
$status = $statement->execute($param_values);
if ($status === false) {
  die(print_r($statement->errorInfo(), true));
} 
```

# c++ - 优化 dijkstra 实现

> ID：13545173
> 
> 赞同：2
> 
> 时间：2012-11-24T20:15:13.560
> 
> 标签：c++, algorithm, matching, priority-queue, dijkstra

**问题已编辑，现在我只想知道是否可以使用队列来改进算法。**

我发现了一个混合成本最大流量算法的实现，它使用了 dijkstra： http: [//www.stanford.edu/~liszt90/acm/notebook.html#file2](http://www.stanford.edu/~liszt90/acm/notebook.html#file2)

将它粘贴在这里以防它在互联网空白中丢失：

```
// Implementation of min cost max flow algorithm using adjacency
// matrix (Edmonds and Karp 1972).  This implementation keeps track of
// forward and reverse edges separately (so you can set cap[i][j] !=
// cap[j][i]).  For a regular max flow, set all edge costs to 0.
//
// Running time, O(|V|^2) cost per augmentation
//     max flow:           O(|V|^3) augmentations
//     min cost max flow:  O(|V|^4 * MAX_EDGE_COST) augmentations
//     
// INPUT: 
//     - graph, constructed using AddEdge()
//     - source
//     - sink
//
// OUTPUT:
//     - (maximum flow value, minimum cost value)
//     - To obtain the actual flow, look at positive values only.

#include <cmath>
#include <vector>
#include <iostream>

using namespace std;

typedef vector<int> VI;
typedef vector<VI> VVI;
typedef long long L;
typedef vector<L> VL;
typedef vector<VL> VVL;
typedef pair<int, int> PII;
typedef vector<PII> VPII;

const L INF = numeric_limits<L>::max() / 4;

struct MinCostMaxFlow {
  int N;
  VVL cap, flow, cost;
  VI found;
  VL dist, pi, width;
  VPII dad;

  MinCostMaxFlow(int N) : 
    N(N), cap(N, VL(N)), flow(N, VL(N)), cost(N, VL(N)), 
    found(N), dist(N), pi(N), width(N), dad(N) {}

  void AddEdge(int from, int to, L cap, L cost) {
    this->cap[from][to] = cap;
    this->cost[from][to] = cost;
  }

  void Relax(int s, int k, L cap, L cost, int dir) {
    L val = dist[s] + pi[s] - pi[k] + cost;
    if (cap && val < dist[k]) {
      dist[k] = val;
      dad[k] = make_pair(s, dir);
      width[k] = min(cap, width[s]);
    }
  }

  L Dijkstra(int s, int t) {
    fill(found.begin(), found.end(), false);
    fill(dist.begin(), dist.end(), INF);
    fill(width.begin(), width.end(), 0);
    dist[s] = 0;
    width[s] = INF;

    while (s != -1) {
      int best = -1;
      found[s] = true;
      for (int k = 0; k < N; k++) {
        if (found[k]) continue;
        Relax(s, k, cap[s][k] - flow[s][k], cost[s][k], 1);
        Relax(s, k, flow[k][s], -cost[k][s], -1);
        if (best == -1 || dist[k] < dist[best]) best = k;
      }
      s = best;
    }

    for (int k = 0; k < N; k++)
      pi[k] = min(pi[k] + dist[k], INF);
    return width[t];
  }

  pair<L, L> GetMaxFlow(int s, int t) {
    L totflow = 0, totcost = 0;
    while (L amt = Dijkstra(s, t)) {
      totflow += amt;
      for (int x = t; x != s; x = dad[x].first) {
        if (dad[x].second == 1) {
          flow[dad[x].first][x] += amt;
          totcost += amt * cost[dad[x].first][x];
        } else {
          flow[x][dad[x].first] -= amt;
          totcost -= amt * cost[x][dad[x].first];
        }
      }
    }
    return make_pair(totflow, totcost);
  }
}; 
```

我的问题是是否可以通过在 Dijkstra() 中使用优先级队列来改进它。我试过了，但我无法让它正常工作。实际上我怀疑在 Dijkstra 它应该循环相邻节点，而不是所有节点......

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T11:12:13.490

当然 Dijkstra 的算法可以通过使用 minheap 来改进。在我们将一个顶点放入最短路径树并处理（即标记）所有相邻顶点之后，下一步是选择尚未在树中的具有最小标记的顶点。
这就是 minheap 想到的地方。我们不是顺序扫描所有顶点，而是从堆中提取最小元素并对其进行重组，这需要 O(logn) 时间 vs O(n)。请注意，堆将只保留那些尚未在最短路径树中的顶点。但是，如果我们更新它们的标签，我们应该能够以某种方式修改堆中的顶点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-27T14:52:00.360

我不太确定使用优先级队列来实现 Dijkstra 的算法实际上会提高运行时间，因为使用优先级队列会减少找到与源的距离最小的顶点所需的时间量 (O(log V) 与优先级队列与朴素实现中的 O(V) 相比，它还增加了处理新边所需的时间量（优先级队列的 O(log V) 与朴素实现中的 O(1)）。

因此，对于简单的实现，运行时间是 O(V^2+E)。

但是，对于优先级队列的实现，运行时间是 O(V log V+E log V)。

对于非常密集的图，E 可能是 O(V^2)，这意味着朴素实现的运行时间为 O(V^2+V^2)=O(V^2)，而优先级队列实现的运行时间为O(V log V+V^2 log V)=O(V^2 log V)。因此，如您所见，在密集图的情况下，优先级队列实现实际上具有更差的最坏情况运行时间。

鉴于编写上述实现的人将边存储为邻接矩阵而不是使用邻接列表，看起来编写此代码的人期望该图是具有 O(V^2) 边的密集图，因此，他们将在这里使用天真的实现而不是优先级队列实现是有道理的。

有关 Dijkstra 算法运行时间的更多信息，请阅读[此 Wikipedia 页面](https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm#Running_time)。

# html - 将内容居中放在 div 中

> ID：13545175
> 
> 赞同：0
> 
> 时间：2012-11-24T20:15:44.713
> 
> 标签：html, css

我有以下标记。我试图让“上一个”一直到左边，“下一个”一直到右边，数字居中。我似乎无法让数字居中。

我试`margin: 0 auto;`了`.numbers`没用。我最接近的方法是将左边距设置为`.numbers`40% 左右，但这似乎很骇人听闻，因为上一个和下一个可能并不总是存在，并且可能多于或少于 4 个数字。我对标记和 css 非常灵活。

[http://jsfiddle.net/dcsUc/15/](http://jsfiddle.net/dcsUc/15/)

```
<div id="content">
    <div class="pagination">
        <div class="previous">Previous</div>
        <div class="numbers">
            <a href="#">1</a>
            <a href="#">2</a>
            <a href="#">3</a>
            <a href="#">4</a>
        </div>
        <div class="next">Next</div>
        <div class="clear"></div>
    </div>
</div>​ 
```

和

```
#content {
    width: 100%;
    border: 1px solid #000;
}

.previous, .numbers {
    float: left;
}

.next {
    float: right;
}

.clear {
    clear: both;
}
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:36:47.793

在标记中移动`div.next`到之前`div.numbers`，不要浮动`.numbers`，并`text-align: center`应用于`.numbers`.

[jSFiddle](http://jsfiddle.net/mnJfP/)适合那些不在 CSS 中思考的人 ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:39:39.187

如果您想使用“margin: 0px auto”，您还必须为 div 设置宽度。

# colors - 颜色：CIE XYZ 模型 - 色度图

> ID：13545177
> 
> 赞同：2
> 
> 时间：2012-11-24T20:15:53.040
> 
> 标签：colors

我想为 XYZ CIE 颜色模型绘制剖面图，如下所示：

![在此处输入图像描述](../Images/3a08b870835a6ff93f18366099a0240a.png)

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T23:52:05.147

很简短...

您可以通过为标准观察者绘制 xy（我有 XY 而不是 xy）数据来绘制谱线（马蹄形）。然后，您可以通过对这些点应用凸包算法来找到需要填充的多边形。列出要在多边形内绘制的 xy 值。通过 找到固定亮度的 z 值`z = 1 - x - y`。转换为 RGB - 您将需要一个名为 XYZtoRGB 之类的函数（有一个 python 模块，或使用维基百科上的转换）。您可能希望先将所有数字乘以常数或其他值来增加亮度。将 xy 位置的像素设置为 RGB 值。与您计算的凸包和/或谱线一起绘制。

我有标准 2deg（我认为）观察者的数据（我找不到链接） - 您需要除以 X+Y+Z 才能从 XYZ 转换为 xyz。如果您希望我将它们发送给您，请给我发送消息，这里有太多数据无法发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-10T08:28:51.193

`colour`Python 模块有一个子模块，`plotting`其中这种绘图是提供的绘图之一。请参阅[plot_chromaticity_diagram_CIE1931](https://colour.readthedocs.io/en/develop/generated/colour.plotting.plot_chromaticity_diagram_CIE1931.html)和[plot_sds_in_chromaticity_diagram_CIE1931的文档](https://colour.readthedocs.io/en/develop/generated/colour.plotting.plot_sds_in_chromaticity_diagram_CIE1931.html#colour.plotting.plot_sds_in_chromaticity_diagram_CIE1931)

它在引擎盖下使用 Matplotlib。

# objective-c - NSUserDefaults 重置首次运行

> ID：13545178
> 
> 赞同：1
> 
> 时间：2012-11-24T20:16:00.737
> 
> 标签：objective-c, ios, nsuserdefaults, appdelegate

我在 AppStore 中有一个使用 NSUserDefaults 的应用程序。一些默认设置是我在首次启动应用程序时继续设置的默认设置，然后允许用户稍后根据需要更改它们。所以，在我的 AppDelegate appDidFinishLaunchingWithOptions 我放：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

if (! [defaults boolForKey:@"notFirstRun"]) {

    [defaults setBool:YES forKey:@"notFirstRun"];

    [defaults setInteger:0 forKey:@"verseKey"];
    [defaults synchronize];
} 
```

我现在遇到的问题是我想在 NSUserDefault 类别中添加更多默认设置，所以我想让它看起来像这样：

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

if (! [defaults boolForKey:@"notFirstRun"]) {

    [defaults setBool:YES forKey:@"notFirstRun"];
    NSString *smalltitle = @"4";
    NSString *smallarticle = @"3";
    [defaults setObject:smalltitle forKey:@"Title"];
    [defaults setObject:smallarticle forKey:@"Article"];
    [defaults setInteger:0 forKey:@"verseKey"];
    [defaults synchronize];
} 
```

我知道这会给那些已经下载该应用程序并且只是更新它的人带来问题。他们不会运行该代码，因为 notFirstRun Bool 已设置为 YES。关于我应该在这里做什么的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T20:34:48.583

正确的解决方案是不实际填充`NSUserDefaults`默认值。相反，请使用该`registerDefaults:`方法。

在应用程序启动时，您执行以下操作：

```
NSUserDefaults *default = [NSUserDefaults standardUserDefaults];
[defaults registerDefaults:@{
    @"Title" : @"4",
    @"Article" : @"3",
    @"verseKey" : @0
}]; 
```

而已。每次运行应用程序时调用它。这些默认值实际上并没有持久化。仅当键还没有显式值时才返回该值。您可以根据需要更新这些默认值，而不会影响任何现有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:19:29.657

创建一个新的`notFirstRun`布尔值（即`notFirstRunTwo`）。对于现有用户来说，这也将是“不”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:38:13.503

我建议执行以下操作：

*   检查存储的应用程序版本的 userdefaults 是否等于当前版本，如果不是。
*   存储当前应用程序版本并进行首次启动初始化

    编码

`

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
 NSString *appVersion = [NSString stringWithFormat:@"%@",[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleShortVersionString"]];

 if (! [defaults objectForKey:appVersion ])
 { 
  /// store the current version and then do your first run functions
      [defaults setObject:[NSNumber numberWithInt:1] forKey:appVersion];
   /// here do your first run
 ......
 }` 
```

# nosql - Cassandra Thrift 使用 DateType Comparator 添加动态行

> ID：13545179
> 
> 赞同：0
> 
> 时间：2012-11-24T20:16:08.770
> 
> 标签：nosql, cassandra, thrift

我有以下列系列：

```
CREATE COLUMN FAMILY messages with comparator=DateType and key_validation_class=UTF8Type and default_validation_class=UTF8Type; 
```

现在我正在使用 Cassandra Thrift 来存储新数据：

```
 TTransport tr = this.dataSource.getConnection();
         TProtocol proto = new TBinaryProtocol(tr);      
         Cassandra.Client client = new Cassandra.Client(proto);
         long timestamp = System.currentTimeMillis();
            client.set_keyspace("myTestSPace");
             ColumnParent parent = new ColumnParent("messages");
             Column messageColumn = new Column();
             String time = String.valueOf(timestamp);        
             messageColumn.setName(time.getBytes());
             messageColumn.setValue(toByteBuffer(msg.getText));
             messageColumn.setTimestamp(timestamp);
             client.insert(toByteBuffer(msg.getAuthor()), parent, messageColumn, ConsistencyLevel.ONE); 
```

但我得到了例外：

```
InvalidRequestException(why:Expected 8 or 0 byte long for date (16))
    at org.apache.cassandra.thrift.Cassandra$insert_result.read(Cassandra.java:15198)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_insert(Cassandra.java:858)
    at org.apache.cassandra.thrift.Cassandra$Client.insert(Cassandra.java:830)
    at com.vanilla.cassandra.DaoService.addMessage(DaoService.java:57) 
```

怎么做才对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T00:16:38.280

您似乎正在使用原始 Thrift 界面。出于您遇到的原因以及许多其他原因，我强烈建议您使用现有的高级客户端，例如[Hector](https://github.com/hector-client/hector)、[Astyanax](https://github.com/Netflix/astyanax)或 CQL 客户端。

问题的根本原因是您必须将不同的数据类型打包成二进制格式。更高级别的客户端会自动管理它。

# crawler4j - Crawler4j - 获取异常 java.lang.NoSuchMethodError

> ID：13545180
> 
> 赞同：1
> 
> 时间：2012-11-24T20:16:19.020
> 
> 标签：crawler4j

我正在尝试通过 eclipse(juno) 设置 crawler4j。当我运行它时，我得到以下异常（即使程序继续运行而没有记录任何内容）：

> “线程“主”java.lang.NoSuchMethodError 中的异常：com.sleepycat.je.EnvironmentConfig.setAllowCreate(Z)Lcom/sleepycat/je/EnvironmentConfig；在 edu.uci.ics.crawler4j.crawler.CrawlController.(CrawlController.java :90) 在 packCrawler.BasicCrawlController.main(BasicCrawlController.java:81)" 错误？我也遇到同样的错误。当我点击（CrawlController.java:90）”

我可以看到 crawler4j-3.4.jar 中没有为 CrawlController 附加源。所以我无法确定是否有方法“ `setAllowCreate`”。

有类似的帖子：[NoSuchMethodError in crawler4j CrawelController class](https://stackoverflow.com/questions/12160206/nosuchmethoderror-in-crawler4j-crawelcontroller-class/13542984#13542984)

但它并没有确切说明问题是如何解决的。有人有什么建议吗？

非常感谢你花时间陪伴。内哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-24T13:52:26.953

看看新的 crawler4j github：[https ://github.com/yasserg/crawler4j](https://github.com/yasserg/crawler4j)

使用 maven 依赖系统，你所有的麻烦都会消失！：

```
<dependency>
    <groupId>edu.uci.ics</groupId>
    <artifactId>crawler4j</artifactId>
    <version>4.2</version>
</dependency> 
```

您将获得最新版本（现在在 github 上而不是 google 代码上）

使用 Maven 等依赖管理工具，您将自动逃离所有类路径地狱......

# user-controls - EM_SETCUEBANNER 发送消息 vb.net 用户控件不起作用

> ID：13545181
> 
> 赞同：1
> 
> 时间：2012-11-24T20:16:28.487
> 
> 标签：user-controls, sendmessage

如果我在 vb.net winform 上使用下面显示的代码，则会出现提示横幅/水印并按预期运行（Win7 Pro 32 位 VS2008 和 64 位 VS2010）。但是，当在 vb.net 用户控件中使用相同样式的代码时，不会显示水印。有人有任何线索吗？

*几个小时后......这看起来像PEBKAC。在测试应用程序中工作。与用户控件。在设计时创建的和在运行时加载的，仍然不能在主应用程序中工作。尽管。还是很疑惑。还在寻找线索。*

```
' Call from form / usercontrol load event handler.
Userhint.WatermarkSet(textbox1, "Some arbitrary text.")

' Noddy library class.
Friend Class Userhint

<DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)>_
Private Shared Function SendMessage(ByVal hWnd As HandleRef, _
                                    ByVal Msg As UInteger, _
                                    ByVal wParam As IntPtr, _
                                    ByVal lParam As String) As IntPtr
End Function

Public Shared Sub WatermarkSet(ByVal ctl As Control, _
                               byval hintText as string)

  const EM_SETCUEBANNER as int32 = &h1501
  dim retainOnFocus As IntPtr = new IntPtr(1)

  SendMessage(New HandleRef(ctl, ctl.Handle), _
              EM_SETCUEBANNER, _
              retainOnFocus, _
              hintText)

End sub

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:51:47.783

与其说是 PEBKAC，不如说是另一个 M$ 没有像他们可能的那样记录事物的实例。

简短的回答是在 Run 方法之前调用 Application.EnableVisualStyles() 。

```
Application.EnableVisualStyles()
Application.Run() 
```

有关更多信息，请参阅本网站上的 questions/7518894/sendmessage-doesnt-work-in-one-project。

# networking - 我想使用 ISO 文件从 USB 启动

> ID：13545190
> 
> 赞同：-1
> 
> 时间：2012-11-24T20:17:10.123
> 
> 标签：networking, boot

我下载了可启动 USB 工具并将 Windows 8 复制到 USB。

但我想更改启动优先级。当我进入 BIOS 时，我有四个选项，例如 CD/DVD 硬盘软盘以太网

我应该将哪一个更改为优先级 1 ro 从 USB 启动？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:20:36.853

一些较旧的计算机不支持从 USB 启动。您可以将一些软件刻录到 CD 以从 CD 启动，然后您可以从 USB 启动。这是howtogeek.com 上的[教程链接，该教程将对您有所帮助。](http://www.howtogeek.com/howto/16822/boot-from-a-usb-drive-even-if-your-bios-wont-let-you/)

# php - 发送电子邮件标题附件的语法

> ID：13545191
> 
> 赞同：0
> 
> 时间：2012-11-24T20:17:15.040
> 
> 标签：php, email, pear

> **可能重复：**
> [如何使用带有附件的 PEAR 邮件包使用 PHP 发送电子邮件](https://stackoverflow.com/questions/11801013/how-to-send-emails-with-php-using-the-pear-mail-package-with-attachment)

我想使用生成的附件（不是服务器上的文件）发送一封带有 PHP 的电子邮件，我对语法很好奇。

```
<?php
@require_once "Mail.php";

$from = "foo@me.com>";
$to = "blah@me.com>";
$subject = "Hi!";
$body = "Attached is the file\n\n";

$attachment = header( 'Content-Type: text/csv' );
$attachment = $attachment.header( 'Content-Disposition: attachment;filename=example.csv');
$attachment =  'transactionid,valid,fname,lname,email,studentid,status
            "654","1","First Name","Last Name","Email@me.com","1000000"';
$body = $body.$attachment;

$headers = array ('From' => $from,
'To' => $to,
'Subject' => $subject);

$smtp = @Mail::factory('smtp', array('host' => $host,
                                    'port' => $port,
                                    'auth' => true,
                                    'username' => $mail_username,
                                    'password' => $mail_password));

$mail = @$smtp->send($to, $headers, $body);
if (@PEAR::isError($mail)) {
   echo("<p>" . $mail->getMessage() . "</p>");
} else {
   echo("<p>Message successfully sent!</p>");
}
?> 
```

* * *

编辑：请注意，我知道有很多在电子邮件中附加来自服务器的文件的示例，但我问的是如何将生成的 csv 文件（不在服务器上）附加到电子邮件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:04:54.770

[从如何使用带有附件的 PEAR Mail 包使用 PHP 发送电子邮件](https://stackoverflow.com/questions/11801013/how-to-send-emails-with-php-using-the-pear-mail-package-with-attachment)开始

然后替换以下内容：

```
if ($mime->addAttachment($file,'application/pdf')){ 
```

和

```
$file =  'transactionid,valid,fname,lname,email,studentid,status
            "654","1","First Name","Last Name","Email@me.com","1000000"';
if ($mime->addAttachment($file,'text/csv', 'example.csv', false)){ 
```

[请参阅http://pear.php.net/manual/en/package.mail.mail-mime.addattachment.php](http://pear.php.net/manual/en/package.mail.mail-mime.addattachment.php)上的文档

# css - 创建带有两个切角的边框

> ID：13545192
> 
> 赞同：0
> 
> 时间：2012-11-24T20:17:15.787
> 
> 标签：css, border

我想为我的网站创建一个带有两个切角的边框。我需要这个边框用于不同的 div 大小。

大约一个小时后，我让它以 200 像素的固定大小工作。但我不知道如何才能变得如此灵活。

这是一个 [演示](http://jsfiddle.net/EevrP/8/)

**HTML**

```
<div id="outer"><span>Some Text</span></div> 
```

**CSS**

```
body {background: #000;}

#outer {
    width: 200px;
    height: 200px;
    position: relative;
    margin: 0 auto;
    margin-top: 50px;
    background: #0ff;
}

#outer:before {
    content: "";
    height: 200px;
    left: -15px;
    position: absolute;  
    border-top: 15px solid transparent;
    border-right: 15px solid #fff;
}

#outer:after {
    content: "";
    width: 200px;
    height: 200px;
    top: -15px;
    right: -215px;
    position: absolute;
    border-left: 15px solid #fff;
    border-bottom: 15px solid transparent;
}

#outer span {
    width: 200px;
    height: 200px;
    position: absolute;
    padding: 50px;
}

#outer span:before {
    display: block;
    content: "";
    width: 200px;
    top: -15px;
    left: 0;
    position: absolute;
    border-bottom: 15px solid #fff;
    border-left: 15px solid transparent;
}

#outer span:after {
    display: block;
    content: "";
    width: 200px;
    height: 200px;
    top: 200px;
    left: -15px;
    position: absolute;
    border-top: 15px solid #fff;
    border-right: 15px solid transparent;
} 
```

有人知道更好的解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:57:10.893

你自己也差不多。我调整了小提琴以使用尺寸和位置的百分比值。边框仍然是 15px 宽：

演示： http: [//jsfiddle.net/b48AK/show](http://jsfiddle.net/b48AK/show)
来源：http: [//jsfiddle.net/b48AK](http://jsfiddle.net/b48AK)

```
body {background: #8aa; padding:0px; margin:0px}
#outer {
  background: #bfb;
  position:relative;
  margin:15px;
} 

#outer:before { 
  content: ""; 
  height: 100%;
  left: -15px;
  position: absolute;  
  border-top: 15px solid transparent;
  border-right: 15px solid #fff;
} 

#outer:after { 
  content: ""; 
  width: 100%;
  height: 100%;
  top: -15px;
  left: 100%;
  position: absolute; 
  border-left: 15px solid #fff;
  border-bottom: 15px solid transparent;
} 

#outer span:before {
  display: block;
  content: "";
  width: 100%;
  top: -15px;
  left: 0;
  position: absolute;
  border-bottom: 15px solid #fff;
  border-left: 15px solid transparent;
}

#outer span:after {
  display: block;
  content: "";
  width: 100%;
  height: 100%;
  top: 100%;
  left: -15px;
  position: absolute;
  border-top: 15px solid #fff;
  border-right: 15px solid transparent;
} 
```

​</p>

# autocomplete - jquery自动完成如何恢复模糊值？

> ID：13545195
> 
> 赞同：0
> 
> 时间：2012-11-24T20:18:08.360
> 
> 标签：autocomplete, restore, blur

我试过这个：

```
$(function(){
    $('.aComplete').each(function(){

        var inputField = $(this);

        $(this).autocomplete({
            source   :"index.php?action=acomplete&name="+$(this).attr("name"),
            minLength:1
        })

        //clear the input on click
        .focus(function(){
            if(inputField.val(undefined) != true){
                temp = inputField.val();
                inputField.val(undefined);
        }
        inputField.data("autocomplete").search(inputField.val());

        //restore initial value if nothing was typed
        }).blur(function(){
            //check if field is empty and restore value from `temp` if so
            alert(temp); //this shows empty string
        });
    });
}); 
```

但是，*有趣*的是，当我在 blur 事件中调用它时，我的变量`temp`变成了一个空字符串。

为什么会发生这种情况，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:46:27.070

发现了故障，虽然我无法完全解释自己......
我刚刚移到`temp = inputField.val();`上面`if(inputField.val(undefined) != true){`并且它起作用了。

# java - Eclipse 中的 JADE-LEAP 配置？

> ID：13545198
> 
> 赞同：2
> 
> 时间：2012-11-24T20:18:28.563
> 
> 标签：java, wurfl, agents-jade

我对 JADE LEAP 和 WURFL 存储库有 2 个问题，因为我是 JADE 的新手。

1-谁能告诉我如何在 Eclipse 中配置 JADE LEAP。我下载了 JADE-LEAP 插件但不知道如何配置？我在我的 Eclipse 项目中添加了简单的jade.jar，但我想在 Eclipse 中使用 JADE-Leap 查看移动模拟器

2- 我如何创建一个 WURFL 代理，它在不使用 servlet 的情况下从存储库或 wurfl.xml 文件中检索属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:26:33.683

看看这里：http: [//jade.tilab.com/papers-examples.htm](http://jade.tilab.com/papers-examples.htm)

下载“chat android”包并在eclipse中导入（你的eclipse必须配置为android开发），编译应该没有问题。

使用该代码和“Jade Android 教程”（相同链接），您应该能够了解如何在 android 上使用玉的基本知识。

# javascript - 将鼠标悬停在意外操作的延迟上

> ID：13545207
> 
> 赞同：1
> 
> 时间：2012-11-24T20:19:20.197
> 
> 标签：javascript, jquery, jquery-ui

当用户意外将鼠标悬停在菜单上然后再次悬停时，我试图延迟或停止菜单的 slideUp 操作。当用户无意中滚出悬停区域时，我试图防止菜单向上滑动。我希望用户在一瞬间将鼠标悬停回来，并且没有菜单可以向上滑动。

我使用了下面的延迟功能，因为这不会阻止菜单向上滑动。谢谢。

```
$(document).ready(function() {
$('#nav li').hover(
    function () {
        //show its submenu
        $('ul', this).slideDown(250);

    }, 
    function () {
        //hide its submenu
        $('ul', this).delay(1000).slideUp(500);         
    }
);
}); 
```

演示：http: [//jsfiddle.net/D3A5g/](http://jsfiddle.net/D3A5g/)

这是尼尔森发布的建议。它适用于 jsfiddle，但不适用于我的页面。谁能告诉我是什么阻止了我的页面上的工作？

工作演示：http: [//jsfiddle.net/xwAdG/6/](http://jsfiddle.net/xwAdG/6/)

下面的代码在我测试时不起作用。任何想法为什么它不起作用？

```
<html>
<head>
<style type="text/css">
#nav {
padding: 40px;
border: solid #999 1px;
}
#nav ul {
margin: 0;
padding: 0;
display: none;
background-color: #CCC;
}
#nav ul li {
margin: 0;
list-style: none;
list-style-type: none;
padding: 5px;
width: 40px;
}
#nav a {
color: black;
text-decoration: none;
padding: 5px;

}
#nav a:hover {
text-decoration: none;
background-color: yellow;
}​
</style>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="http://cherne.net/brian/resources/jquery.hoverIntent.js"></script>
<script>
var config = {    
 over: function () { //onMouseOver callback (REQUIRED) 
    $('ul', this).slideDown(250);//show its submenu

},    
timeout: 500, // milliseconds delay before onMouseOut  (default 0)  
out: function () { // function = onMouseOut callback (REQUIRED)
    $('ul', this).slideUp(500); //hide its submenu        
}     
};
$('#nav li').hoverIntent(config);
</script>
</head>

<body>
<ul id="nav">
<li ><a href="#">Main</a>
<ul>
<li><a href="#">AAAAA</a></li>
<li><a href="#">BBBBB</a></li>
<li><a href="#">CCCCC</a></li>
<li><a href="#">DDDDD</a></li>
<li><a href="#">FFFFF</a></li>
</ul>
</li>
</ul>
</body>
</html> 
```

**更新**：我发现我需要用 $(document).ready 包装代码。通过这样做，它可以在 html 页面中工作。

```
<script>
$(document).ready(function() {
var config = {    
over: function () { //onMouseOver callback (REQUIRED) 
$('ul', this).slideDown(250);//show its submenu

},    
timeout: 500, // milliseconds delay before onMouseOut  (default 0)  
out: function () { // function = onMouseOut callback (REQUIRED)
$('ul', this).slideUp(500); //hide its submenu        
}     
};
$('#nav li').hoverIntent(config);
});​
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:22:39.540

我向你推荐[hoverIntent 插件](http://cherne.net/brian/resources/jquery.hoverIntent.html)，我已经在一些项目中使用它并且到目前为止非常高兴。

您发布的代码将与插件一起使用，如下所示：

```
var config = {    
     over: function () { //onMouseOver callback (REQUIRED) 
        $('ul', '#nav li').slideDown(250);//show its submenu

    },    
    timeout: 0, // milliseconds delay before onMouseOut  (default 0)  
    out: function () { // function = onMouseOut callback (REQUIRED)
        $('ul', '#nav li').slideUp(500); //hide its submenu        
    }     
};
$('#nav li').hoverIntent(config); 
```

# php - 遍历这个数组，key值是非法偏移？

> ID：13545222
> 
> 赞同：0
> 
> 时间：2012-11-24T20:21:09.733
> 
> 标签：php, arrays, associative-array

所以我有一个这样的数组：

```
$style  = array(
 'css' => array(
    'name' => array('core-css', 'babababa'),
    'path' => array(get_bloginfo('stylesheet_url'), get_template_directory_uri() . '/bababa.css')
    ),
 'js' => array(
    'name' => array('core-css', 'babababa'),
    'path' => array(get_bloginfo('stylesheet_url'), get_template_directory_uri() . '/bababa.css')
    )   
); 
```

我可以通过这种方式走过：

```
function load_css(){
    foreach($style as $key => $value){
        var_dump($key);
    }
} 
```

现在 var_dump 将返回：

```
string(3) "css" string(2) "js" string(3) "css" string(2) "js" 
```

问题是，如果我执行 var_dump($key['css]) 或 'js' 我会得到一个非法偏移错误.....

我需要检查两者，所以我假设这样做：

```
if(isset($key['css']) && $key['css']){} 
```

进而

```
if(isset($key['js']) && $key['js']){} 
```

但很遗憾，它不起作用......

有人可以告诉我我做错了什么吗？这样的数组我已经走过无数次了.... >.<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:24:03.640

您需要使用`$style['css']`或`$style[$key]`。键本身是一个字符串，而不是一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:25:19.527

这是正确的 PHP 行为

```
$a = array(
    'key' => 'value';
);

foreach ($a as  $key => $value) {
     echo $key . PHP_EOL;
     echo $value . PHP_EOL;
} 
```

将输出

```
key
value 
```

要获取名称和路径，请使用：

```
$value['name'];
$value['path']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:29:00.997

尝试改用 $value['name'] 等。样式数组的键是 'css' 和 'js'，数组在 $value 中。

（另外，我认为这只是您的问题中的一个错字，但您还没有关闭引用`$key['css]`:-)

# java - 如何使用 Java2D 选择要移动、旋转和缩放的图形

> ID：13545228
> 
> 赞同：-2
> 
> 时间：2012-11-24T20:22:13.710
> 
> 标签：java, java-2d

我遇到的问题不是选择一个数字，并且选择的那个数字会应用旋转尽可能多的数字，因为我没有像前两点那样执行以下操作，但我有但不是第三点：

*   该程序应允许在平面上绘制多个图形。
*   每次在平面上插入图形时都应询问图形的尺寸和插入时的坐标。
*   插入图形后，程序应允许选定的形状变换、旋转、平移和缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:49:30.210

您没有提供有关您的问题的足够详细信息，但是，您可以查看以下处理轮换的内容

*   [AffineTransform.rotate() - 我如何同时移动、旋转和缩放？](https://stackoverflow.com/questions/11911610/affinetransform-rotate-how-do-i-xlate-rotate-and-scale-at-the-same-time/11911758#11911758)
*   [如何使用 Java.awt 镜像图像](https://stackoverflow.com/questions/12432791/how-to-mirror-an-image-with-java-awt/12433025#12433025)
*   [使用 Java 中的算法更改绘图的角度/位置](https://stackoverflow.com/questions/12824684/change-the-angle-position-of-a-drawing-with-a-algorithm-in-java/12826882#12826882)

以下处理调整大小

*   [调整应用程序窗口大小时，如何调整应用程序内的图像大小？](https://stackoverflow.com/questions/12876615/how-do-i-resize-images-inside-an-application-when-the-application-window-is-resi/12876799#12876799)
*   [Java：保持JPanel背景图像的纵横比](https://stackoverflow.com/questions/11959758/java-maintaining-aspect-ratio-of-jpanel-background-image/11959928#11959928)

我也建议你看看

*   [二维图形](http://docs.oracle.com/javase/tutorial/2d/index.html)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [使用鼠标监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)

# excel - 如何在 Excel 中获取原始鼠标事件

> ID：13545229
> 
> 赞同：0
> 
> 时间：2012-11-24T20:22:24.280
> 
> 标签：excel, vba

我有一个 Excel 工作簿应用程序，其中包含图表的低级定义。它不是内置的 Excel，而是我在 [WorkBook->Sheets->WorkSheet->ChartObjects->ChartObject->Chart->[Chartarea, Shapes]] 链之后定义的。我不想谈论破解**那个**密码需要多长时间。

所有绘图的东西都有效，我可以在图表上画线和放置文本。

现在我想捕捉鼠标事件，如果它们在图表范围内，就对它们采取行动。我已经尝试了所有我能想到的方法，包括右键单击图表并执行“分配宏”位。子永远不会被触发。

必须有一个地方可以放置 blahblah_onMouseDown()，但我找不到。

[工作簿的当前状态在这里](http://smpro.ca/sipmath/SIPshaper1.xlsm)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T01:07:35.333

我将把这个标记为已回答。我还没有解决它，但我找到了一个我有理由肯定会解决它的信息来源 - 但我必须重新组织我的应用程序才能让它工作。有很多我没有意识到我不知道。

[来源是 Pearson Software Consulting Here](http://www.cpearson.com/excel/Events.aspx)

该网站加载了 Excel/VBA 知识，其质量远远超出任何 Microsoft 文档。

# c# - try catch finally 块是如何工作的？

> ID：13545230
> 
> 赞同：54
> 
> 时间：2012-11-24T20:22:32.123
> 
> 标签：c#, try-catch, try-catch-finally

在`C#`中，try catch finally 块如何工作？

所以如果出现异常，我知道它会跳转到catch块，然后跳转到finally块。

但是如果没有错误，catch 块不会运行，但是 finally 块会运行吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-24T20:25:10.103

是的，不管有没有异常，finally 块都会运行。

```
尝试
    [尝试语句]
    [退出尝试]
[捕捉[异常[作为类型]][当表达式]
    [捕捉语句]
    [退出尝试]]
[ 抓住 ... ]
[ 最后
    [ finallyStatements ] ] --始终运行
结束尝试

```

请参阅：http: [//msdn.microsoft.com/en-us/library/fk6t46tz%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/fk6t46tz%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-24T20:34:15.247

是的，如果没有例外，finally 子句就会被执行。举个例子

```
 try
        {
            int a = 10;
            int b = 20;
            int z = a + b;
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
        finally
        {
            Console.WriteLine("Executed");
        } 
```

所以在这里，如果假设发生异常，finally 也会被执行。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-08-06T19:46:28.390

> **该`finally`块将始终在方法返回之前执行。**

尝试运行下面的代码，您会注意到语句中的`Console.WriteLine("executed")`of 在有机会执行之前执行的位置。`finally``Console.WriteLine(RunTry())`

```
static void Main(string[] args)
{
    Console.WriteLine("Hello World!");
    Console.WriteLine(RunTry());
    Console.ReadLine();
}
public static int RunTry()
{
    try
    {
        throw new Exception();
    }
    catch (Exception)
    {
        return 0;
    }
    finally
    {
        Console.WriteLine("executed");
    }
    Console.WriteLine("will not be executed since the method already returned");
} 
```

查看结果：

```
Hello World!
executed
0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T15:40:14.877

finally 块总是运行，无论如何。试试这个方法

```
 public int TryCatchFinally(int a, int b)
    {
        try
        {
            int sum = a + b;
            if (a > b)
            {
                throw new Exception();
            }
            else
            {
                int rightreturn = 2;
                return rightreturn;
            }
        }
        catch (Exception)
        {
            int ret = 1;
            return ret;
        }
        finally
        {
            int fin = 5;
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-16T05:14:56.080

```
 try
        {
            //Function to Perform
        }
        catch (Exception e)
        {
         //You can display what error occured in Try block, with exact technical spec (DivideByZeroException)
            throw; 
            // Displaying error through signal to Machine, 
            //throw is usefull , if you calling a method with try from derived class.. So the method will directly get the signal                
        }

        finally  //Optional
        {
            //Here You can write any code to be executed after error occured in Try block
            Console.WriteLine("Completed");
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-01T10:25:03.487

是的，Finally 将始终执行。

**即使 try 后没有 catch 块， finally 块仍然会执行**。

finally 基本上可以用于释放资源，例如文件流、数据库连接和图形处理程序，而无需等待运行时中的垃圾收集器完成对象。

```
 try
        {
            int a = 10;
            int b = 0;
            int x = a / b;
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }
        finally
        {
            Console.WriteLine("Finally block is executed");
        }
        Console.WriteLine("Some more code here"); 
```

输出：

System.DivideByZeroException：试图除以零。

finally 块被执行

其余代码

来源：[C# 中的异常处理（带有 try-catch-finally 块详细信息）](https://qawithexperts.com/article/c-sharp/exception-handling-in-c-with-try-catch-finally-block-details/175)

# mysql - 多个表使用多个联结表引用一个表

> ID：13545231
> 
> 赞同：2
> 
> 时间：2012-11-24T20:22:34.017
> 
> 标签：mysql, database, file, innodb, junction

我有下表将存储文件（图像、PDF 等）

```
CREATE TABLE `tbl_file` (
    `id` INT(10),
    `size` FLOAT,
    `name` VARCHAR(45),
    `type` VARCHAR(16),
    `content` BLOB,
    `date_time` TIMESTAMP,
    PRIMARY KEY (`id`) 
) 
```

有许多表将包含文件（tbl_order & tbl_payment），我只想使用一个表来存储文件（tbl_file）。但是，某些表的每一行可能有多个文件。

例如，一个订单（发票、采购订单、提单、合同）有多个文件，每次付款可能有多个文件等。

所以我为每个可能有多个文件的表制作了以下联结表（我没有包括外键代码）。

```
CREATE TABLE `tbl_order_file` (
    `order_id` INT(10),
    `file_id` INT(10),
    PRIMARY KEY (`order_id`, `file_id`),
) 
```

和

```
CREATE TABLE `tbl_payment_file` (
    `payment_id` INT(10),
    `file_id` INT(10),
    PRIMARY KEY (`payment_id`, `file_id`),
) 
```

这里的问题是一个文件可以与两个表相关。也许这是一个优势而不是一个问题，但我想知道是否有更好的方法来做到这一点，或者找到一种方法来限制文件，以便它只在一个表中引用。

我正在使用带有 innodb 引擎的 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:50:14.457

声明约束以强制执行此操作的一种方法是确保 tbl_file 中的每一行都标记为文件类型，“O”或“P”（或将来的其他类型）。

```
CREATE TABLE `tbl_file` (
    `id` INT(10),
    `file_type` CHAR(1) NOT NULL,  -- must be 'O' or 'P'
    `size` FLOAT,
    `name` VARCHAR(45),
    `type` VARCHAR(16),
    `content` BLOB,
    `date_time` TIMESTAMP,
    PRIMARY KEY (`id`),
    UNIQUE KEY (`id`, `file_type`)
); 
```

然后每个从属表强制其所有行用相应的类型标记。因此 tbl_order_file 中的一行只能引用*tbl_file*中具有相同 file_type 的行：

```
CREATE TABLE `tbl_order_file` (
    `order_id` INT(10),
    `file_id` INT(10),
    `file_type` CHAR(1) NOT NULL, -- must be 'O'
    PRIMARY KEY (`order_id`, `file_id`),
    FOREIGN KEY (`file_id`, `file_type`) REFERENCES `tbl_file` (`id`, `file_type`)
); 
```

同样对于 tbl_payment_file：

```
CREATE TABLE `tbl_payment_file` (
    `payment_id` INT(10),
    `file_id` INT(10),
    `file_type` CHAR(1) NOT NULL, -- must be 'P'
    PRIMARY KEY (`payment_id`, `file_id`),
    FOREIGN KEY (`file_id`, `file_type`) REFERENCES `tbl_file` (`id`, `file_type`)
); 
```

MySQL 中的一个特别困难是 MySQL 不支持 CHECK 约束以允许表定义限制 file_type 的值。您必须在触发器或应用程序代码中执行此操作。

* * *

回复您的评论：

> 假设我想在没有 file_type 的情况下使用我的解决方案，将来会出现什么问题？

好吧，正如您在原始问题中已经说过的那样，没有任何约束，没有什么可以阻止文件表中的一行被多个联结表引用，并且您最终可能会得到对您的应用程序来说是异常的数据。

另一方面，如果给定文件既涉及订单又涉及付款，您可能*希望允许这种灵活性。*如果您无法维护多个引用，则必须复制此类文件以允许它们属于多个类别。

还有一个问题：这些解决方案都不能阻止您的应用程序在文件表中插入没有子元素的行；即没有来自*任何*联结表的引用的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:40:27.727

首先：如果表之间存在多对一关系，则不要在`order_id`. 我会将所有文件放入一个表 ( `tbl_file`) 中并向表中添加两个外键字段：`order_id`and `payment_id`，这将引用`payment`or`order`表中的相应条目。

所以一个条目（如果一笔付款有多个文件）看起来像：

```
id  payment_id  order_id    size    name        type        content     date_time
1   1           null        434     File.txt    text/plain  <blob>      24.11.2012
2   1           null        131     File2.txt   text/plain  <blob>      24.11.2012 
```

# c++ - 为什么选择 for (;;){} 而不是 while(1)？

> ID：13545237
> 
> 赞同：2
> 
> 时间：2012-11-24T20:23:35.687
> 
> 标签：c++, loops, for-loop, while-loop

> **可能重复：**
> [“for(;;)”是否比“while (TRUE)”快？如果不是，人们为什么要使用它？](https://stackoverflow.com/questions/2611246/is-for-faster-than-while-true-if-not-why-do-people-use-it)

我看到这个

```
for (;;)
{
  // Some code here
} 
```

经常。但它有什么好处，为什么不选择`while(1){}`呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T20:27:53.650

它们产生相同的代码。您可能更喜欢的原因有几个，`for (;;)`但这只是个人喜好：

1.  一些编译器会警告您有关始终为真的条件。`for(;;)`不会有那个问题。

2.  `for (;;)`字面意思是“永远循环！”，而*似乎*`while (true)`仍然有某种条件。

 *我说选择一个并坚持下去。只要不随意切换就没有关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T20:25:33.050

这是[Kernighan 和 Ritchie 在他们的书](http://en.wikipedia.org/wiki/The_C_Programming_Language)^(*中使用的)*永远*循环的形式。绝对没有其他理由更喜欢一种形式而不是另一种形式。

^*第 3.5 节关于 While 和 For 循环，示例四。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T20:24:50.477

两者是等价的，并且很可能会产生相同的机器代码。选择一个而不是另一个是个人喜好的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-24T20:25:45.353

这并不重要 - 这只是个人喜好。

我`for(;;)`更喜欢，因为我认为它强调*了循环永远*的方面。*

# mysql - textarea 到 mysql 描述不起作用

> ID：13545240
> 
> 赞同：-1
> 
> 时间：2012-11-24T20:23:59.400
> 
> 标签：mysql, textarea

我真的看不出我的代码中的问题 - 我认为它可能是 SQL 查询。我犯了一个错误，但我无法真正发现它，这是我第一次使用它`textareas`。

所以，如果你对它有很好的理解，我真的很期待你的解决方案。

```
<?php 
ob_start();
?>
<?php include_once "includes/connection.php"; ?>
<h1>Outputting Games from the Database</h1>
<?php

// Connection to the Database

// Quering the database and outputting
$sql = "SELECT * FROM menu";
$result = mysql_query($sql);

if (mysql_num_rows($result) > 0) {

while($row = mysql_fetch_array($result)) {

echo $row['id'] . ' - ' . $row['name'] . ' - ' . $row['description'] . '<br />';

    }

}

// Insert the Data into the database
// Tjekker om formen er blevet sendt
if (isset($_POST['name'])) {

    $name = $_POST['name']; // Ligger titlen i en php variable
    $description = mysql_real_escape_string($_POST['description']);

    $sql = "INSERT INTO menu(name, description) VALUES( {'$name' . '$description')}";

    // Vi laver et tjek om den er blevet indsat i databasen
    // Hvis der ikke skal være noget tjek kan du gøre lige som her:
    // mysql_query($sql);
    // bare slette denne if statement
    if (mysql_query($sql)) {
        header('location: insert.php');
    }

}

?>

<h1>Insert new game title</h1>
<form action="insert.php" method="post">

<input type="text" name="name" />
<textarea name="description"></textarea>
<input type="Submit" value="Insert Game Title" />

</form> 
```

问题是我可以使用“名称”的名称上传我的输入，
但我无法包含我的描述。
基本上我的查询失败了：

```
$description = mysql_real_escape_string($_POST['description']);
$sql = "INSERT INTO menu(name, description) VALUES( {'$name' . '$description'} )"; 
```

相比：

```
 $sql = "INSERT INTO menu(name) VALUES('$name')";

        if (isset($_POST['name'])) {

    $name = $_POST['name']; // Ligger titlen i en php variable
    $description = mysql_real_escape_string($_POST['description']);

    $sql = "INSERT INTO menu(name, description) VALUES( {'$name' . '$description'} )";

    // Vi laver et tjek om den er blevet indsat i databasen
    // Hvis der ikke skal være noget tjek kan du gøre lige som her:
    // mysql_query($sql);
    // bare slette denne if statement
    if (mysql_query($sql)) {
        header('location: insert.php');
    }

    } 
```

如果您能找到解决方案，非常欢迎您提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:45:53.897

您已注释掉查询的执行：

```
// mysql_query($sql); 
```

其次：尝试更改SQL：

```
$sql = "INSERT INTO menu(name, description) VALUES( '".$name."', '".$description."' )"; 
```

尝试将 SQL 查询打印到您的页面并查看它的内容。

```
print $sql."<br>"; 
```

如果查询失败，还要打印 mysql_error()。

```
mysql_query($sql) or die ("ERROR: ".mysql_error()); 
```

# c - MPI 核心数

> ID：13545246
> 
> 赞同：0
> 
> 时间：2012-11-24T20:24:23.880
> 
> 标签：c, mpi

我在哪里可以在 C 中指定或查看 MPI 程序中的内核数。换句话说，我改进了一个用 c 编写的程序（MPI fox 算法），它运行 2 个内核，但实际上我想更改它以便运行 4 个内核...该程序使用笛卡尔拓扑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T11:49:41.887

您为 SPMD/MPMD 启动器`mpiexec`（或`mpirun`）指定所需的进程数，通常为

```
mpiexec -n <# of processes> <other options> ./executable <arguments> 
```

然后你可以通过查询世界通信器的大小来找出启动的 MPI 进程的数量：

```
int nprocs;
MPI_Comm_size(MPI_COMM_WOLRD, &nprocs);
printf("There are %d processes running in this MPI program\n", nprocs); 
```

如果程序也是混合 MPI+OpenMP 代码，则可以通过设置`OMP_NUM_THREADS`环境变量来控制每个进程中的线程数，除非该数字在代码中通过调用`omp_set_num_threads()`或`num_threads`应用到`parallel`区域的显式子句而被覆盖。

# c++ - 在带有整数的控制台中显示无关紧要的数字

> ID：13545258
> 
> 赞同：0
> 
> 时间：2012-11-24T20:25:21.260
> 
> 标签：c++, console, integer, iostream

我有一个程序，它显示从文本文件中读取的歌曲以及时间，并在控制台中以整齐有序的方式显示它们。但是我遇到了问题，但是有一个**整数**显示，`01`或者与我的时间格式（00:00:00）`06`相反。当整数低于 10 时，我将如何操作输出以在整数前面显示零？`1``6`

我的程序的示例输出：

```
SONG TITLE
The once and future carpenter      0:4:52
I never knew you                   0:7:48
Life                               0:10:52
February seven                     0:15:0
My lfe                             0:24:12
Yuor frei                          0:37:20
Lisjlf                             0:49:23
Lasifj                             0:53:39
Longsong                           1:9:2
Longer                             1:22:3
Almost done                        1:34:48

Process returned 0 (0x0)   execution time : 0.280 s
Press any key to continue. 
```

期望的输出：

```
SONG TITLE
The once and future carpenter      00:04:52
I never knew you                   00:07:48
Life                               00:10:52
February seven                     00:15:00
My lfe                             00:24:12
Yuor frei                          00:37:20
Lisjlf                             00:49:23
Lasifj                             00:53:39
Longsong                           01:09:02
Longer                             01:22:03
Almost done                        01:34:48

Process returned 0 (0x0)   execution time : 0.280 s
Press any key to continue. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:29:09.203

```
printf("%02d:%02d:%02\n", h, m, s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:32:05.980

你如何展示你的价值观？使用标准库提供的流实用程序？如果是这样，您可以将`setw`操纵器与`setfill`. `stdio`对应的还允许使用带有格式说明符的适当标志来指定宽度和填充：

```
#include <iomanip>
#include <iostream>

...
cout << setw(2) << setfill('0') << h << ':' 
    << setw(2) << setfill('0') << m << ':' 
    << setw(2) << setfill('0') << s << '\n'; 
```

# c# - 使用 DataContractJsonSerializer 序列化 Dictionary<> 对象

> ID：13545263
> 
> 赞同：4
> 
> 时间：2012-11-24T20:25:49.057
> 
> 标签：c#, .net, json, silverlight, serialization

我有以下`Dictionary<>`对象：

```
Dictionary<String, object> parameters = new Dictionary<string, object>();
parameters.Add("username", "mike");
parameters.Add("password", "secret");
parameters.Add("persist", false); 
```

当我序列化它时：

```
using (MemoryStream stream = new MemoryStream())
{
   DataContractJsonSerializer serializer = new DataContractJsonSerializer(parameters.GetType());
   serializer.WriteObject(stream, parameters);

   byte[] bytes = stream.ToArray();
   string json = Encoding.UTF8.GetString(bytes, 0, bytes.Length);

   return json;
} 
```

我得到以下信息：

```
"[{\"Key\":\"username\",\"Value\":\"mike\"},{\"Key\":\"password\",\"Value\":\"secret\"},{\"Key\":\"persist\",\"Value\":false}]" 
```

我想要得到的是一个原始的键/值对映射，如下所示：

```
"{\"username\":\"mike\", \"password\":\"secret\", \"persist\": false}" 
```

我已经尝试设置`UseSimpleDictionaryFormat`为 true，但是这个属性没有任何效果，也没有在我能找到的任何地方记录它的预期用途。

我不能使用自定义类，因为参数键/值对在编译时是未知的。

我也不能使用第三方库，例如 JSon.NET。我正在使用 Silverlight 框架和 Windows Phone 8 运行时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:29:13.350

尝试序列化这个

```
var parameters = new
{
    username = "mike",
    password = "secret",
    persist = false
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T03:42:02.797

添加 System.Json 作为参考后，使用此帮助程序类来构造 JSON 属性：

```
public static class JsonHelper
{
    public static KeyValuePair<string, JsonValue> CreateProperty(string name, dynamic value)
    {
        return new KeyValuePair<string, JsonValue>(name, new JsonPrimitive(value));
    }
} 
```

以下 LINQ 查询将使用 Helper 类将 JSON 属性作为 JsonArray 动态返回。

```
var result = from item in parameters
             select new JsonObject(JsonHelper.CreateProperty(item.Key, item.Value));

string json = (new JsonArray(result)).ToString(); 
```

结果：

```
[{\"username\":\"mike\"},{\"password\":\"secret\"},{\"persist\":false}] 
```

# ajax - jQuery .ajax 'success' 函数永远不会运行

> ID：13545265
> 
> 赞同：1
> 
> 时间：2012-11-24T20:26:22.787
> 
> 标签：ajax, jquery

我第一次尝试使用 jQuery，而我使用 .ajax 的 POST 函数让我很伤心。POST 成功；我的 PHP 页面正确运行 MySQL 查询并返回新创建的用户 ID。唯一的问题是，而不是运行“成功”功能；它只是加载我调用的 PHP 页面，它只是简单地回显用户 ID。

这是jQuery函数：

```
function register() {
$.ajax({
    type: "POST",
    url: 'sendRegistration.php',
    data: dataString,
    datatype: 'html',
    success: function(response){alert(response);},
    complete: function(response,textStatus){console.log(textStatus);},
    error: function(response){alert(response);}
});
} 
```

...和PHP返回的东西：

```
 // Create a new send & recieve object to store and retrieve the data
    $sender = new sendRecieve();
    $custId = $sender->submitUser($userVars);
    if ($custId != 0) {
        echo $custId;
    } else {
        echo "Database connection problems...";
    } 
```

创建数据库对象，然后从 'url' 参数加载 php 页面，显示 $sender->submitUser() 函数返回的 id。

理想情况下，我希望它永远不会显示“sendRegistration.php”页面，而是运行另一个 js 函数。

我确信有一个简单的解决方案，但经过数小时的搜索后我无法找到它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:34:55.617

您可能正在通过表单处理此问题。如果不阻止浏览器默认的表单提交过程，页面会重定向到`action`表单的url。如果没有`action`表格，当前页面将重新加载，这很可能是您的情况。

为防止这种情况，请使用以下任一方法

```
$('form').submit(function(event){
    /* this method before AJAX code*/
    event.preventDefault()    

        /* OR*/

      /* this method after all other code in handler*/
      return false;
}) 
```

如果您从表单提交按钮上的单击处理程序发送 AJAX，则适用相同的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:32:57.863

你是如何调用 register() 函数的？可能是传统上提交的表单，您可能需要阻止默认操作（标准表单提交）。

# playframework-2.0 - 具有不同查询参数的 Playframework 路由

> ID：13545271
> 
> 赞同：4
> 
> 时间：2012-11-24T20:27:38.433
> 
> 标签：playframework-2.0

我的搜索控制器中有两种方法

searchBoundingBox - 进行边界框搜索并需要边界框纬度和经度值。搜索 - 进行距离搜索（从中心点进行基于距离的搜索）。

我在路由文件中定义了我的两条路由，如下所示。

```
#Search
#bounding box
GET     /search                             controllers.Search.searchBoundingBox(swLatitude:java.lang.String,swLongitude:java.lang.String, neLatitude:java.lang.String,neLongitude:java.lang.String)

# distance based
GET     /search                             controllers.Search.search(latitude:java.lang.String,longitude:java.lang.String, offset:java.lang.Integer?=0,distance:java.lang.Integer?=50, limit:java.lang.Integer?=10) 
```

但是当我在第二条路线（基于距离）中创建查询时，它没有得到解决。

任何解决方法！！！（请注意，如果我更改路线的顺序，那么边界框搜索将失败）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T08:09:56.817

如果您被迫使用查询参数，您可以对两个搜索使用一个操作作为解决方法：

```
GET     /search   controllers.Search.search 
```

并自己获取查询参数：

斯卡拉：

```
def search = Action { request =>
     val latitude = request.queryString.getOrElse("latitude", Seq()).headOption.getOrElse("default") 
```

爪哇：

```
public static Result search() {
        String latitude = request().queryString().get("latitude")[0];//of course check if param is in map 
```

所以你可以拆分动作：

```
if(latitude != null)
   searchWithoutBoundingBox()
else
   searchBoundingBox() 
```

您会发现这不是一个很好的类型安全 API，因此最好遵循 Julien 和 biesior 的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T09:28:38.760

当两条路由使用相同的方法 ( `GET`) 并且仅首先使用相同的路径 ( `/search`) 时，这是正常的，此规则没有减损。

**Schleichardt**给出的第一个解决方案是可能的，但是为了获得最佳安全性，您应该严格控制输入类型。

其次，更快，更容易的解决方案是......只是路径独特的路径，即：

```
#bounding box
GET     /search/bound/:swLatitude/:swLongitude/:neLatitude/:neLongitude      controllers.Search.searchBoundingBox(swLatitude: String, swLongitude: String, neLatitude: String, neLongitude: String)

# distance based
GET     /search/distance/:latitude/:longitude   controllers.Search.search(latitude: String, longitude: String, offset: Int?=0, distance: Int?=50, limit: Int?=10) 
```

顺便说一句，如果您的 Java 方法使用带有 Scala 的 Integer 类型构造路由，则不需要提供常见类型（如`String`,等）的完整路径。`Integer``Int`

# android - 稳态非零线加速度

> ID：13545281
> 
> 赞同：0
> 
> 时间：2012-11-24T20:28:59.310
> 
> 标签：android, accelerometer, android-sensors

> **可能重复：**
> [Android 加速度计精度（惯性导航）](https://stackoverflow.com/questions/7829097/android-accelerometer-accuracy-inertial-navigation)

我是 android 编程的业余爱好者，目前正在设计一个游戏，我需要计算用户移动他/她的设备时所覆盖的距离。

我从设备或在加速度计上应用高通滤波器得到线性加速度的值，这几乎相同。

我面临的问题是，即使我将设备保持在稳定状态，它可能与 X、Y 和 Z 形成一个角度。此时，我通过线性加速度得到一些非零值。在这里，我无法理解即使我的设备保持稳定状态，为什么我得到一个非零值。有没有办法应用过滤器，以便在稳定条件下使线性加速度值为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:43:42.520

假设 x、y 和 z 是您正在读取的加速度。如果你取 Math.sqrt(x*x+y*y+z*z) 的值，你会得到 9.81 的稳定条件（地球重力加速度）。所以你可以说当这个值等于 11 左右（需要一点校准）

# python - 如何在我的主项目中添加 setuptools entry_point 作为示例？

> ID：13545289
> 
> 赞同：6
> 
> 时间：2012-11-24T20:29:19.797
> 
> 标签：python, setuptools

我想让我的程序可插入。我想使用 setuptools 这样做的方式，使用鸡蛋。

我已经能够制作一个插件来为某些功能提供替代类，并且我可以使用它。

我想选择在运行时使用的类；我的核心模块或任何插件中的一个。我想使用 pkg_resources 方式查询这些类：

```
for entrypoint in pkg_resources.iter_entry_points("myapp.myclasses"): 
```

如何在核心中为我的类创建一个 EntryPoint 对象并注册它，以便 iter_entry_points 以与我的 .egg 插件类相同的方式返回它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T20:47:09.830

`pkg_resources.iter_entry_points`列出任何egg中给定名称的任何入口点，包括您自己的包。因此，如果您的`entry_points`条目`setup.py`列出以下内容，*并且*您已经运行`setup.py develop`以生成元数据，那么您自己的入口点将被包括在内：

```
[myapp.myclasses]
classentry1 = myapp.mymodule:myclassname1
classentry2 = myapp.mymodule:myclassname2 
```

[Babel 项目](http://babel.edgewall.org/)正是这样做的。它[`setup.py`](http://babel.edgewall.org/browser/trunk/setup.py)列出了`babel.checkers`和的入口点，这些入口点分别由和`babel.extractors`查找。[`babel.messages.checkers:_find_checkers`](http://babel.edgewall.org/browser/trunk/babel/messages/checkers.py#L162)[`babel.messages.extract:extract`](http://babel.edgewall.org/browser/trunk/babel/messages/extract.py#L204)

如果您不想拥有一个`setup.py`文件（这很容易从模板创建和/或生成），那么您将不得不改变内部状态`pkg_resources.working_set`：

*   `working_set.entries`是一个鸡蛋列表。您必须将项目顶级目录的路径添加到此目录。
*   `working_set.entry_keys`是从路径`entries`到包名称列表的映射。将您的项目添加为 `working_set.entry_keys[path] = ['package.name']
*   `working_set.by_key`是从包名到`pkg_resources.Distribution`实例的映射。您需要创建一个`Distribution`实例并将其存储在您的包名下：`working_set.by_key['package.name'] = yourdistribution`.

出于您的目的，该`Distribution`实例可能相当稀疏，但我至少会包含项目名称。不过，您需要有一个入口点地图：

```
yourdistribution = Distribution(project_name='package.name')
yourdistribution._ep_map = {'myapp.myclasses', {
    'classentry1': entrypointinstance_for_classentry1,
    'classentry2': entrypointinstance_for_classentry2,
}} 
```

内部结构`_ep_map`通常根据需要从 egg-info 元数据中解析。

请注意，这完全依赖于可以在版本之间更改的未记录的内部数据结构。换句话说，你在这里是一个人。我会生成一个`setup.py`文件，然后运行`python setup.py develop`以生成 egg 元数据。

# javascript - 悬停时显示和隐藏列表项

> ID：13545290
> 
> 赞同：3
> 
> 时间：2012-11-24T20:29:27.637
> 
> 标签：javascript, jquery, html

我有一个看起来像这样的无序列表

**HTML**

```
<div id="pop">
     <ul>
          <li>Item 1</li>
          <li>Item 2</li>
          <li>Item 3</li>
          <li>Item 4</li>
          <li>Item 5</li>
          <li>Item 6</li>
          <li>Item 7</li>
     </ul>
</div>
<div id="info-1></div>
<div id="info-2></div> 
```

当您将鼠标悬停在其中一个项目上时，会显示一个窗口，其中包含有关该项目的一些信息。我已经为一个项目解决了这个问题，现在我想知道如何让这个项目适用于整个列表。

我最初的想法是为每个项目创建一个脚本......但考虑到 js 的功能，这似乎有点厚。

**Javascript**

```
$(function(){
     $('pop a').hover(function(){
          $('#info-1').show();
     },function(){
          $('#info-1').hide();
     });
}); 
```

所以我的问题当然是，我怎样才能使这个脚本适用于所有项目。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T20:33:07.947

我建议：

```
$('#pop li').hover(
    function() {
        $('div.info').eq($(this).index()).show();
    }, function() {
        $('div.info').eq($(this).index()).hide();
    });​ 
```

使用稍有改动的 HTML：

```
<div id="pop">
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        <li>Item 4</li>
        <li>Item 5</li>
        <li>Item 6</li>
        <li>Item 7</li>
    </ul>
</div>

<div class="info"></div>
<div class="info"></div>
<div class="info"></div>
<div class="info"></div>
<div class="info"></div>
<div class="info"></div>
<div class="info"></div>​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nJm5J/)。

我忘了说的是，这将显示与当前悬停的`.info`元素对应的元素，因此悬停第*一个*将显示第一个，依此类推。因此，它依赖于维护和元素之间的可预测关系。`index``li` *`li``.info``li``.info`*

 *顺便说一句，可以仅使用 CSS 来复制此交互，尽管它需要*单击*而不是悬停事件，只要您修改`li`HTML 以包含指向`id`相关的链接`div`：

```
<div id="pop">
    <ul>
        <li><a href="#info1">Item 1</a></li>
        <li><a href="#info2">Item 2</a></li>
        <li><a href="#info3">Item 3</a></li>
        <li><a href="#info4">Item 4</a></li>
        <li><a href="#info5">Item 5</a></li>
        <li><a href="#info6">Item 6</a></li>
        <li><a href="#info7">Item 7</a></li>
    </ul>
</div>

<div class="info" id="info1"></div>
<div class="info" id="info2"></div>
<div class="info" id="info3"></div>
<div class="info" id="info4"></div>
<div class="info" id="info5"></div>
<div class="info" id="info6"></div>
<div class="info" id="info7"></div>​ 
```

和CSS：

```
.info {
    /* hides by default */
    display: none;
}

.info:target {
    /* shows when targeted */
    display: block;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nJm5J/1/)。​</p>

顺便说一句，引用属性是可选的（尽管如果它是包含空格的属性，则*必须*引用它），但是*如果*您引用，则必须在您引用的值的两端都有一个引号：*不是*`<div id="info-1></div>`有效*的*HTML（因为string 直到下一个属性*开头*的下一行才关闭）；使用：`<div id="info-1"></div>`。

而且，进一步，您发布的 jQuery：

```
$(function(){
     $('pop a').hover(function(){
          $('#info-1').show();
     },function(){
          $('#info-1').hide();
     });
}); 
```

这行不通，因为：

1.  选择器不会匹配任何元素，您正在尝试定位`a`元素内部的`pop`元素（显然，它不存在）。您需要做的是在前面`id`加上 a `#`（就像您在下一行中所做的那样，所以我假设那里有一个错字），给出：`$('#pop a')`。但，
2.  `a`元素中没有`#pop`元素，因此没有事件将被或可以被绑定。

但是，如果您需要使用该表单，则可以进行一些调整：

```
$(function(){
     $('#pop li').hover(function(){
          $('#info-' + $(this).text().match(/(\d+)/)).show();
     },function(){
          $('#info-' + $(this).text().match(/(\d+)/)).hide();
     });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nJm5J/6/)。

参考：

*   [`eq()`](http://api.jquery.com/eq/).
*   [`hide()`](http://api.jquery.com/hide/).
*   [`hover()`](http://api.jquery.com/hover/).
*   [`index()`](http://api.jquery.com/index/).
*   [`match()`](http://api.jquery.com/match/).
*   [`show()`](http://api.jquery.com/show/).
*   [`text()`](http://api.jquery.com/text/).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T20:33:03.843

试试这个 ：

```
$(function(){
  $('#pop li').hover(function(){
     $('#info-'+$(this).index()+1).show();
  },function(){
     $('#info-'+$(this).index()+1).hide();
  });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T20:32:53.593

您已经在 pop 元素内的所有标签上绑定了一个悬停事件`a`（尽管您有语法错误，但在按 id 寻址元素时应该始终添加“#”）并且您没有它们您正在寻找的是：

```
$('#pop li').hover(function() {

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-24T20:39:38.773

这是示例[http://fiddle.jshell.net/7QmR5/](http://fiddle.jshell.net/7QmR5/)

**HTML：**

```
<div id="pop">
    <ul>
        <li id="li1">Item 1</li>
        <li id="li2">Item 2</li>
        <li id="li3">Item 3</li>
    </ul>
</div>

<div id="info-1" style="display:none;">info 1</div>
<div id="info-2" style="display:none;">info 2</div>
<div id="info-3" style="display:none;">info 3</div> 
```

**JavaScript：**

```
$(function(){
    $('#pop li').hover(function(){
        $('#info-' + $(this).attr('id').replace('li','')).show();
    },function(){
        $('#info-' + $(this).attr('id').replace('li','')).hide();
    });
});​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T20:36:59.883

我有一个更简单的解决方案：

CSS

```
#info-1{
    display:none;
}
ul > li:hover #info-1 {
    display:block;
} 
```

给 li 元素一个 id 可以更容易地使用 CSS 选择它们，除非你想使用 pseudo 我相信它被调用了。

或者如果需要的话 jQuery：

```
$('li:eq[0]','#pop').hover(function(){
    $('info-1').show();
}); 
```*

# c - 我可以在 C 中省略 main 的返回吗？

> ID：13545291
> 
> 赞同：11
> 
> 时间：2012-11-24T20:29:49.810
> 
> 标签：c, main, c99

在 C++ 中，3.6.1 主函数

> (3.6.1/5) main 中的 return 语句具有离开 main 函数（销毁任何具有自动存储持续时间的对象）并以返回值作为参数调用 exit 的效果。**如果控制到达main的末尾没有遇到return语句，效果就是执行return 0；**

我可以在 C99 中执行以下操作而不返回 0 吗？

```
int main() { } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-24T20:31:04.040

是的，从 C99 开始，如果返回类型与 .兼容，则到达`}`main 末尾的 0 返回 0 。`main``int`

> **5.1.2.2.3 程序终止**
> 
> 如果`main`函数的返回类型是与int兼容的类型，那么从函数的初始调用返回`main`就相当于以`exit`函数返回的值`main`作为参数调用函数；^(11))到达`}`终止`main`函数返回值0。如果返回类型与 不兼容`int`，则返回到宿主环境的终止状态未指定。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-24T20:32:12.380

是的，C99 标准说（§5.1.2.2.3）：

> 到达`}`终止`main`函数的返回值 0。

# android - 如何将数组添加到菜单

> ID：13545296
> 
> 赞同：0
> 
> 时间：2012-11-24T20:30:31.070
> 
> 标签：android

我在下面有一些简单的代码，它在大多数情况下都有效。它现在所做的是为我的数组中的前 5 个元素创建 5 个不同的菜单，然后其余元素显示在一些可滚动的菜单选择中。

我怎样才能使我的数组中的所有元素都出现在可滚动的菜单选择中？

谢谢！

```
public boolean onCreateOptionsMenu(Menu menu) {

 for(int i = 0; i<ARRAY.length; i++)
     {
         menu.add(ARRAY[i]);

     }
return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:43:34.130

您可以使用添加菜单`menu.add(..)`，您可以为第二个参数设置id，`menu.add(0, id ,...)`您可以设置标签`menu.add(...., ARRAY[i])`

```
 public boolean onCreateOptionsMenu(Menu menu) {

        for(int i = 0; i<ARRAY.length; i++)
        {
             int id = i;
             menu.add(0,id,0,ARRAY[i]);
        }
        return true;
} 
```

您可以访问此菜单并使用以下命令执行操作`onOptionsItemSelected()`

```
 @Override
   public boolean onOptionsItemSelected(MenuItem item) {

        switch(item.getItemId())
        {
           case 0:
                  //code goes here when you press the menu with id 0
                  break;
           case 1:
                  //code goes here when you press the menu with id 1
                  break;
        }
        return true;
    } 
```

# c - 使用 xlib 检测正在运行的屏幕保护程序

> ID：13545302
> 
> 赞同：4
> 
> 时间：2012-11-24T20:31:36.960
> 
> 标签：c, linux, xlib, screensaver

我正在尝试检测屏幕保护程序是否正在运行。

这是我到目前为止的代码：

```
/* LDFLAGS='-L/usr/X11R6/lib/ -lX11 -lXext -lXss' make xidle */
#include <stdio.h>
#include <X11/Xlib.h>
#include <X11/Xutil.h>
#include <X11/extensions/scrnsaver.h>

int
main(int argc, char *argv[])
{
    XScreenSaverInfo info;
    Display *dpy = XOpenDisplay(NULL);

    if(NULL == dpy) {
        fprintf(stderr, "failed to open display\n");
        return 1;
    }

    int a = 0;
    int b = 0;
    XScreenSaverQueryExtension(dpy, &a, &b);
    printf("%d %d\n", a, b);

    XScreenSaverQueryInfo(dpy, RootWindow(dpy, DefaultScreen(dpy)), &info);
    printf("%d %d %d %d\n", info.state, info.til_or_since, info.idle, info.kind);
    return 0;
} 
```

但 info.state 始终为 3（ScreenSaverDisabled）。我已经用 xscreensaver 和 gnome-screensaver 对此进行了测试。

这是一些示例输出：

```
92 0
3 0 9903 0 
```

无论是否运行屏幕保护程序都是一样的（当然除了 info.idle）。

附加信息：

```
$ X -version
X.Org X Server 1.13.0
Release Date: 2012-09-05
X Protocol Version 11, Revision 0 
```

窗口管理器：i3

发行版：Arch Linux

编辑：在 [this][1] 的帮助下，我创建了一个 xcb 版本，它也不起作用。为了排除我的测试过程中的错误，这里是：我让这段代码在无限循环中运行，而我让 xscreensaver 在后台运行。为了实际激活屏幕保护程序，我使用 xscreensaver-command --activate

```
#include <stdlib.h>
#include <stdio.h>
#include <xcb/xcb.h>
#include <xcb/screensaver.h>

static xcb_connection_t * connection;
static xcb_screen_t * screen;

/**
 * Connects to the X server (via xcb) and gets the screen
 */
void magic_begin () {
    connection = xcb_connect (NULL, NULL);
    screen = xcb_setup_roots_iterator (xcb_get_setup (connection)).data;
}

/**
 * Asks X for the time the user has been idle
 * @returns idle time in milliseconds
 */
unsigned long magic_get_state () {
    xcb_screensaver_query_info_cookie_t cookie;
    xcb_screensaver_query_info_reply_t *info;

    cookie = xcb_screensaver_query_info (connection, screen->root);
    info = xcb_screensaver_query_info_reply (connection, cookie, NULL);

    int state = info->state;

    return state;
}

int main(int arc, char *argv[])
{
    magic_begin();
    int state = magic_get_state();
    printf("state: %d\n", state);
}

[1]: http://stackoverflow.com/questions/9049087/with-x11-how-can-i-get-the-users-time-away-from-keyboard-while-ignoring-cert 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:32:50.593

我去了 xorg irc 频道，并被告知至少 xscreensaver 不使用我使用的扩展名。

# sql - 在 MsAccess 查询中将行转置为列

> ID：13545303
> 
> 赞同：0
> 
> 时间：2012-11-24T20:31:50.750
> 
> 标签：sql, ms-access

我有一张桌子

> cID，边，行，列

有一些数据

```
24, 1, 10, 5
25, 1, 12, 6
24, 2, 18, 3 
```

等等。现在我希望这些数据以以下形式显示：

```
cID=24
side    1   2
row    10  18
column  5   3

cID=25
side     2
row     12
column   6 
```

cID 在查询中被过滤，因此输出将是 3 行（边、行、列）以及特定 cID 的数据。使用 MsAccess Query/SQL 是否可行？如何实现？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:54:53.180

这些线上的东西：

```
TRANSFORM First(q.rvalue) AS firstofrow
SELECT q.rhead
FROM   (SELECT cid,
               side,
               row   AS rvalue,
               "row" AS rhead
        FROM   atable
        UNION ALL
        SELECT cid,
               side,
               column   AS rvalue,
               "column" AS rhead
        FROM   atable) AS q
WHERE   q.cid = 24
GROUP  BY q.rhead
PIVOT q.side; 
```

# php - 如何在 html 表中检索 php 函数值和格式化数据

> ID：13545305
> 
> 赞同：0
> 
> 时间：2012-11-24T20:32:05.330
> 
> 标签：php, html, class

这是我的函数，通过这个函数，我可以通过请求参数获取许多查询的结果。问题是使用返回函数保持沉默不显示任何内容，但使用 echo 或 print 它显示。

```
public function select_query( $query ) {

        if ( $result = $this->_mysqli->query( $query ) ) {

            /* fetch object array */
            while ( $row = $result->fetch_array() ) {

                //printf( "%s", $row[0] );
                //print $row[0];
                return $row[0];
            }

            $result->close();
        }
    } 
```

当我初始化我的类并使用这个函数时，我没有以表格格式捕获值，如下所示：

```
echo '<table border=1><tr>';

        echo '<td>'. date('Y-m-d', time() - 13*24*60*60) .'</td>';
        echo '<td>' .$init->get_req_data($_POST['ex'], date('Y-m-d', 24*60*60)). '</td>';

        echo '</tr></table>'; 
```

在此，我没有在表中获得 $init 的值，它在表外显示值，而不是在表结构中显示日期。另一个查询是我必须调用 php self 函数来检索与我相同的页面中的数据，但是代码在我的 html 上方打印 php 值，如果我试图将值存储在 html 表中，那么它会在页面打开时显示类错误. 请在这个问题上帮助我。任何帮助将不胜感激，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:35:03.737

我看到的第一薄是检索数据的功能`select_query`，你打电话`get_req_data`

在你的桌子上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:38:37.373

您在循环中使用 return 。这是不好的。这将只返回第一个值。

使用变量来存储所有值，并在函数结束时返回该变量。

# java - 如何在java上编写伪代码来解决这个问题？

> ID：13545306
> 
> 赞同：0
> 
> 时间：2012-11-24T20:32:08.730
> 
> 标签：java

假设 Alice 选择了三个不同的整数，并以随机顺序将它们放入堆栈 S。编写一段短的、直线的伪代码（没有循环或递归），它只使用一个比较和一个变量 x，但以 2/3 的概率保证在这段代码的末尾变量 x 将存储最大的爱丽丝的三个整数。争论为什么你的方法是正确的。

Java 上的数据结构

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T20:35:53.473

```
x = S.pop()
return max(S.pop(), x) 
```

解释：

我有一个 S 堆栈 [A, B, C]

```
x = S.pop() // x points to A
return max(S.pop(), x) // compares B to A 
```

一旦我知道最大值是从 B 和 A 返回的，则有一种可能性是最大整数不在这两个整数（B 和 A）之间，即 C 所以.. 我有两种可能获得三个之间的较大数-> 2/3

# c++ - C++ 类命名空间中的 C 函数调用

> ID：13545308
> 
> 赞同：2
> 
> 时间：2012-11-24T20:32:42.963
> 
> 标签：c++, system-calls

我试图通过一个项目来熟悉 C++，但我遇到了一个我不太确定如何处理的错误。我有以下代码：

```
void myclass::write(std::string str) {
  write(filedes, (void *)str.c_str(), str.length());
} 
```

其中filedes 是myclass 的一个实例变量。尝试编译它会产生错误：

```
myclass.cpp: In member function ‘void myclass::write(std::string)’:
myclass.cpp:38: error: no matching function for call to ‘myclass::write(int&, void*, size_t)’
myclass.cpp:37: note: candidates are: void myclass::write(std::string)
myclass.hpp:15: note:                 void myclass::write(std::string, int) 
```

那么我做错了什么？我不能合法地从方法中调用这个函数吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T20:36:02.517

大概您想调用`write(2)`位于全局命名空间中的 ：

```
::write(filedes, str.c_str(), str.length()); 
```

（您可能需要`#include <unistd.h>`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:35:56.157

看起来编译器不知道全局`write`函数。您是否包含了正确的标题（`<unistd.h>`在 unix 中）？（而且，那个`(void *)`演员是没用的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:36:53.950

正如我从编译器错误中看到的那样，filedes 不是您的类的实例变量（不是您的类的实例），而是您的类的 int 类型的成员。如果你想从全局命名空间中调用与那里的方法同名的函数，请使用 ::write(...)。顺便说一句：使用 std::size_t 作为长度，而不是 int。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T20:37:06.820

编译器认为 write 是你的类方法，它不是。如果您正在谈论系统调用 write 您应该 #include unistd.h 并使用 ::write(filedes, (void *)str.c_str(), str.length());

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T20:48:45.750

这取决于 write 函数是什么，如果它是一个系统函数，那么你必须使用 ::write ，如果它在其他一些代码中，请确保你放置 extern，使用标题或实现该函数的代码

# jquery - ? Internet Explorer 和 Jquery 的 $("document").ready(function() 是否存在已知问题？

> ID：13545316
> 
> 赞同：1
> 
> 时间：2012-11-24T20:33:21.440
> 
> 标签：jquery, internet-explorer

这是一个通用问题，因此实际上没有任何代码可以在此问题中显示。

我在让特定的 jquery 脚本在 IE9 中运行时遇到问题（实际上是任何版本的 IE）

最烦人的是，它似乎有点被击中或错过，这使得调试变得非常困难。

在 FF 和 Chrome 中它运行完全没有问题。

但在 IE 中，脚本只有在按 F5 刷新时才会运行。

显然我正在使用

```
$("document").ready(function() {

    alert("start control script");
    // lots more code here
}; 
```

通过观察，一旦我运行脚本一次，如果我随后注销并重新登录，一切都很好。但是如果我完全关闭浏览器，我又需要按 F5 来启动脚本。这只发生在 IE 中。

我想一旦我刷新并注销它就可以工作，因为某种缓存在我完全关闭浏览器时会丢失。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:35:25.653

你写错了，它`document`是一个全局对象，不需要引号。

```
$(document).ready(function() {

    alert("start control script");
    // lots more code here
}); 
```

请注意单词周围缺少引号`document`和末尾缺少括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:37:10.207

您不需要引号中`)`的文档，最后也缺少括号。

```
$(document).ready(function() {

    alert("start control script");
    // lots more code here
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T20:37:54.917

来自 jQuery 文档：

以下所有三种语法都是等效的：

```
$(document).ready(handler)
$().ready(handler) (this is not recommended)
$(handler) 
```

从 jQuery 1.8 开始，还有`$(document).bind("ready", handler)`, 已弃用。这与 ready 方法的行为类似，但如果 ready 事件已经触发并且您尝试 .bind("ready") 绑定的处理程序将不会被执行。以这种方式绑定的就绪处理程序在上述其他三种方法的任何绑定之后执行。

.ready() 方法只能在匹配当前文档的 jQuery 对象上调用，因此可以省略选择器。

.ready() 方法通常与匿名函数一起使用：

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

这相当于调用：

```
$(function() {
 // Handler for .ready() called.
}); 
```

如果在 DOM 初始化后调用 .ready() ，传入的新处理程序将立即执行。

# three.js - Three.js Ray.intersectObjects 不尊重父 Object3D 旋转

> ID：13545320
> 
> 赞同：1
> 
> 时间：2012-11-24T20:33:33.393
> 
> 标签：three.js

我在 Object3D 变换的层次结构中使用 Ray.intersectObjects 时遇到问题。本质上， intersectObjects 似乎忽略了层次结构顶层的旋转。我试图通过修改 webgl_interactive_cubes.html 演示来重现此问题，但没有运气。不幸的是，我无法发布我正在做的事情。我将尝试重现该问题以便我可以分享它，但也许有人对出了什么问题提出了建议。这是使用 THREE.js r52。

以下是我认为相关的部分：

> *   我有一个包含顶级旋转的根 THREE.Object3D 元素。这是似乎被忽略的旋转。
> *   这个根元素有两个孩子，都是三个.Object3D 对象。它们每个都有一个（固定的）旋转和位置变换。
> *   我正在寻找这两个元素的子元素之间的交集。这些孩子都是来自另一个层次结构的 THREE.Mesh 对象的克隆，使用 THREE.Mesh.clone() 创建。
> *   当顶层旋转归零时，交叉点都可以正常工作。
> *   一旦应用了顶级旋转，交叉点就好像没有旋转一样......对象在屏幕上移动，但我得到的交叉点就好像对象没有移动一样返回。

在检查交叉点之前，我曾尝试在根上调用 updateMatrixWorld(true) ，但这没有区别。

# ruby-on-rails - Paperclip 尝试上传内容长度为 0 的图像

> ID：13545336
> 
> 赞同：1
> 
> 时间：2012-11-24T20:35:34.953
> 
> 标签：ruby-on-rails, paperclip

我正在尝试使用回形针和 AWS S3 存储上传图像

我已经为回形针设置了默认配置

```
config.paperclip_defaults = {
  :storage => :s3,
  :bucket => '<bucket_name>',
  :s3_credentials => Rails.root.join('config', 'aws.yml').to_s
} 
```

在我的模型中，我有这个

```
as_attached_file :img, :styles => { :medium => "300x300>", :thumbnail => "100x100>" }, :path => "assets/products/:attachment/:id/:style.:extension" 
```

在控制器中，我有一个简单的属性更新，因为我的模型是首先创建的，并且在图像上传之后：

```
def upload_thumbnail
   @product = Product.find(params[:id])

   if @product.update_attribute(:img, params[:image])
    render :json => { :done => true, :img_path => @product.img.url }
   else
    render :json => @product.errors }
   end
end 
```

当我上传图像时，我在控制台中出现此错误

```
[paperclip] Saving attachments.
[paperclip] saving assets/products/imgs/10/original.jpg
[AWS S3 200 4.134236 3 retries] put_object(:acl=>:public_read,:bucket_name=>"<bucket_name>",:content_length=>0,:content_type=>"image/jpeg",:data=>Paperclip::UploadedFilAdapter: image.jpg,:key=>"assets/products/imgs/10/original.jpg") AWS::Core::Client::NetworkError AWS::Core::Client::NetworkError 
```

在 S3 中，图像是在指定的路径创建的，大小设置为 0 字节。我也注意到当插件试图调整图像大小时我得到了这个

```
[paperclip] Error while determining content type: Cocaine::CommandNotFoundError 
```

但原始图像应该正确上传。我做错了什么？

# php - 使用 PHP 将对象转换为数组的不同方法

> ID：13545339
> 
> 赞同：-5
> 
> 时间：2012-11-24T20:35:52.793
> 
> 标签：php, arrays, object

使用此代码时：

`$array=(array)$yourObject;`

convert的属性`$yourObject`可以索引一个数组，但是如何转换为一个数组，这些意思是，通过对象访问的和我`$yourObject`是一个索引？！`$array``echo $array[0]`

**另一种提问方式，请参阅此示例代码：**

```
<?php

$var1 = (string) 'a text';
$var2 = (array) array('foo', 'bar');
$var3 = (object) array("foo" => 1, "bar" => 2);

//It's OK.
foreach((array)$var1 as $v) {
    echo $v."<br>";
}

echo "<hr>";

//It's OK.
foreach((array)$var2 as $v) {
    echo $v."<br>";
}

echo "<hr>";

//It's NOT OK. I want through $var3 in output as an array with one index!
foreach((array)$var3 as $v) {
    echo $v."<br>";
}

echo "<hr>";

?> 
```

**另一种方式：**

我想在 foreach 中使用一个变量，但我不确定这个类型，我想为任何类型变量（字符串，数组，对象，...）工作 foreach 而不会出错例如我认为我必须为某些这种类型提供这个示例输出：

$var1 的输出：

```
array
  0 => string 'a text' (length=6) 
```

$var2 的输出：

```
array
  0 => string 'foo' (length=3)
  1 => string 'bar' (length=3) 
```

$var3 的输出：

```
array
  0 => 
    object(stdClass)[1]
      public 'foo' => int 1
      public 'bar' => int 2 
```

最后我确定 foreach 返回当前结果没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:37:43.160

你的意思是把你的对象包装在一个数组中？

```
$array = array($yourObject); 
```

正如 mc10 所提到的，您可以使用[PHP 5.4 开始的新短数组语法](http://php.net/manual/en/language.types.array.php#example-82)：

```
$array = [$yourObject]; 
```

# c++ - 默认构造函数的分段错误；矢量未正确初始化

> ID：13545342
> 
> 赞同：-2
> 
> 时间：2012-11-24T20:36:00.443
> 
> 标签：c++

当我在 int main() 中调用默认构造函数 Heap() 时，我有一种感觉，我没有正确初始化我的向量指针，给我一个分段错误。我不确定如何解决这个问题。下面是一个示例代码，其中包含我遇到问题的区域的注释（`segmentation faults`在将元素添加到`vector`using时`push_back`）。

```
#include <vector>
#include <iostream>

struct A
{
  A(int av, int bv):a(av),b(bv){}

  int a, b;
};

struct Heap
{
  Heap() : ptr() {}

  Heap(std::vector<A> *p) : ptr(p) {}

  void makeHeap()
  {
    heapLoc.push_back(0);
    if(ptr->size()==1){
      return;
    }

    for(int i=1; i<ptr->size(); ++i){
      heapLoc.push_back(i);
      filterUp(i);
    }
  }

  void filterUp(int idx)
  {
    int parent;
    parent = (idx-1)/2;

    while((*ptr)[heapLoc[parent]].b > (*ptr)[heapLoc[idx]].b){
      std::swap(heapLoc[parent],heapLoc[idx]);
      idx=parent;
      parent=(parent-1)/2;
    }
  }

  void pushHeap(A newA)
  {
    int idx;

    ptr->push_back(newA);  //SEGMENTATION FAULT caused by this line when calling h2.pushback(a8)
    idx=ptr->size()-1;
    heapLoc.push_back(idx);
    filterUp(idx);
  }

  std::vector<A> *ptr;
  std::vector<int> heapLoc;
};

int main()
{
  A a0(2,5), a1(4,2), a2(8,4), a3(0,3), a4(2,1),a5(2,7);  
  std::vector<A> aArray;  
  aArray.push_back(a0);
  aArray.push_back(a1);
  aArray.push_back(a2); 
  aArray.push_back(a3);
  aArray.push_back(a4);
  aArray.push_back(a5);

  Heap h(&aArray);
  h.makeHeap();

  A a8(99,1);
  h.pushHeap(a8);  //works fine

  Heap h2();
  h2.pushHeap(a8); //SEGMENTATION FAULT

  return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:41:16.067

`h2.ptr`是 NULL，这就是你得到段错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:43:07.943

我猜你的默认构造函数应该是这样的：

```
Heap() : ptr(new std::vector<A> ()) {} 
```

在您当前的变体中，您的 ptr 被初始化为一些未定义的值（NULL 或者可能是一些垃圾）。它应该用一个指向实际向量的指针来初始化。

# c# - 一页中有两个更新面板

> ID：13545344
> 
> 赞同：0
> 
> 时间：2012-11-24T20:36:46.807
> 
> 标签：c#, asp.net, asp.net-ajax, updatepanel

我有两个更新面板，在这些更新面板中是两个模态弹出窗口。我正在尝试从 modalpopup 内的第一个更新面板内的控件（按钮）更改其中一个更新面板内的标签。单击按钮后，第一个 modalpopup 将关闭，第二个 modalpopup 将显示标签更改，但弹出窗口内的标签不显示。

当我尝试在后面的代码中调用 secondUpdatePanel.Update() 时，第二个模式弹出窗口甚至没有出现。帮助表示赞赏！我已经看过将 asyncpostbacktriggers 从第一个弹出窗口分配到第二个弹出窗口的教程，这些教程不在模态弹出窗口中。

所以，我可能会遗漏一些东西。

```
<asp:UpdatePanel ID="upPnlFormalAppeal" runat="server" UpdateMode="Conditional" >
        <ContentTemplate>
            <asp:HiddenField ID="hfFormalAppeal" runat="server" />
            <asp:ModalPopupExtender ID="mpopupFormalAppeal" runat="server"
                TargetControlID="hfFormalAppeal" 
                PopupControlID="pnlFormalAppealPopup" 
                CancelControlID="btnClose" 
                BackgroundCssClass="modalBackground" >
                <Animations>
                    <OnShown><Fadein Duration="0.50" /></OnShown>
                    <OnHiding><Fadeout Duration="0.75" /></OnHiding>
                </Animations>
            </asp:ModalPopupExtender>
            <!-- Details View for Formal Appeal -->
            <asp:DetailsView ID="dvFormalAppeal" runat="server" Height="50px" AutoGenerateRows="False" CssClass="dvCSS" >
                <!-- DATA HERE -->
            </asp:DetailsView>
            <div class="footer">
                <asp:LinkButton ID="btnSubmit" runat="server" Text="Submit" 
                    CausesValidation="false" OnClick="btnSubmit_Click" />
                    &nbsp;
                <asp:LinkButton ID="btnClose" runat="server" Text="Close" CausesValidation="false" />
                <asp:ConfirmButtonExtender ID="cbeSubmit" runat="server" 
                    ConfirmText="Submit Appointment Request?" TargetControlID="btnSubmit">
                </asp:ConfirmButtonExtender>
            </div>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

modalpopup 中的第二个 UpdatePanel。

```
<asp:Panel ID="Panel1" runat="server" CssClass="panelConfirmation" >
    <asp:UpdatePanel ID="upPnlMessageBox" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">
        <ContentTemplate>
            <asp:HiddenField ID="hfSubmissionConfirmationBox" runat="server" />
            <asp:ModalPopupExtender ID="mpopupConfirmation" runat="server"
                TargetControlID="hfSubmissionConfirmationBox" 
                PopupControlID="Panel1" 
                CancelControlID="btnClose" 
                BackgroundCssClass="modalBackground" >
            </asp:ModalPopupExtender>
                    <div class="mpopupBody">
                        <asp:Label ID="lblConfirmationMessage" runat="server"></asp:Label>
                    </div>
                    <div class="footer">
                        <asp:Button ID="btnConfirmClose" runat="server" Text="Close" 
                            CausesValidation="false" onclick="btnConfirmClose_Click" />
                    </div>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnSubmit" EventName="Click" />
            <asp:AsyncPostBackTrigger ControlID="btnConfirmClose" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel>
</asp:Panel> 
```

后面的代码。

```
protected void btnSubmit_Click(object sender, EventArgs e)
    {
        this.mpopupFormalAppeal.Hide();

        this.lblConfirmationMessage.Text = "Text changed!";
        //this.upPnlMessageBox.Update();
        this.mpopupConfirmation.Show();
    } 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:59:56.563

对于那些有相同场景的人......我设法通过重新排序我的布局设计来解决它。

我将 modalpopup 放在 UpdatePanel 之外，如下所示：

```
<asp:HiddenField ID="hfSubmissionConfirmationBox" runat="server" />
<asp:ModalPopupExtender ID="mpopupConfirmation" runat="server"
    TargetControlID="hfSubmissionConfirmationBox" 
    PopupControlID="Panel1" 
    CancelControlID="btnClose" 
    BackgroundCssClass="modalBackground" >
</asp:ModalPopupExtender>
<asp:Panel ID="Panel1" runat="server" CssClass="panelConfirmation" >
    <asp:UpdatePanel ID="upPnlMessageBox" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">
        <ContentTemplate>
            <div class="mpopupBody">
                <asp:Label ID="lblConfirmationMessage" runat="server"></asp:Label>
            </div>
            <div class="footer">
                <asp:Button ID="btnConfirmClose" runat="server" Text="Close" 
                    CausesValidation="false" onclick="btnConfirmClose_Click" />
            </div>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnSubmit" EventName="Click" />
            <asp:AsyncPostBackTrigger ControlID="btnConfirmClose" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel>
</asp:Panel> 
```

# c# - 无法通过实例引用访问；改为使用类型名称来限定它

> ID：13545346
> 
> 赞同：15
> 
> 时间：2012-11-24T20:36:47.813
> 
> 标签：c#, multithreading

使用示例 1：在本[MSDN 教程中的](http://msdn.microsoft.com/en-us/library/aa645740(v=vs.71).aspx#vcwlkthreadingtutorialexample1creating)*线程之间创建、启动和交互，*更具体地说是第 3 行到第 7 行`Main()`

我有以下代码并出现以下错误：

> 无法通过实例引用访问；而是用类型名称来限定它。

**程序.cs**

```
public static ThreadTest threadTest = new ThreadTest();
private static Thread testingThread = new Thread(new ThreadStart(threadTest.testThread()));
static void Main(string[] args)
{

} 
```

**线程测试.cs**

```
public static void testThread()
{
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-24T20:55:02.103

你`testThread`是一个静态方法，所以它可以通过类型名称获得。因此，不要使用 istance `threadTest`，而是使用`ThreadTest`type。

```
// public static void testThread()
testingThread = new Thread(new ThreadStart(ThreadTest.testThread)); 
```

或更改方法声明（删除`static`）：

```
// public void testThread()
testingThread = new Thread(new ThreadStart(threadTest.testThread)); 
```

此外，您应该将方法传递给委托`ThreadTest.testThread`（删除括号），而不是传递方法调用的结果`ThreadTest.testThread()`。

# bash - cd(1) 和带空格的变量 (cygwin)

> ID：13545351
> 
> 赞同：3
> 
> 时间：2012-11-24T20:37:09.737
> 
> 标签：bash, cygwin, environment-variables, spaces, cd

我遇到了一个非常不寻常的问题。在我的 .bashrc 文件中，我将一个变量设置为一个带有空格的路径名。我觉得这会导致问题，但我尝试以类似的方式设置别名并让它像这样工作：

```
alias npp="\"/cygdrive/c/Program Files (x86)/Notepad++/notepad++.exe\"" 
```

现在，我想我可以对我的环境变量使用相同的技巧 -

```
export PRO="\"/cygdrive/c/Program Files (x86)\"" 
```

这行得通。有点儿。

```
[myName]  
$ echo $PRO  
"/cygdrive/c/Program Files (x86)"

[myName]  
$ cd $PRO  
bash: cd: "/cygdrive/c/Program: No such file or directory 
```

我试过在空格前放置一个转义符，有和没有删除双引号，我试过单引号有和没有转义符。我试过用重音作为引号。我试过逃跑，我试过

```
export PRO=/cygdrive/c/Program\\\ Files\\\ \\\(x86\\\) 
```

这些都没有奏效。唯一的事情是——

```
export PRO="/cygdrive/c/Program Files (x86)"
$ cd "$PRO" 
```

最终，我试图找到一种方法来使我的变量工作，而无需在每次键入变量时都在其周围加上引号。完全没有想法后，我来到这里希望有人能够帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-12T08:45:06.630

我用通配符解决了这个问题：

导出 PRO="/cygdrive/d/Program*Files/"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T20:45:49.430

由于单词拆分，如果您不引用`$PRO`该空格会将您的路径分成多个单词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T20:42:29.257

在您的情况下，如果不引用变量，就无法使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T10:34:30.097

从技术上讲，我无法回答您的问题，但一个好的解决方法是创建一个指向您想要的文件夹的链接，为该链接创建一个变量，然后 cd 到该变量。这是一个烦人的第二步，也是一个毫无意义的链接，但如果值得将其放入您的 bash 配置文件中，那么额外的麻烦可能是值得的。

这是我所做的：

```
ln -sf '/cygdrive/c/Users/Mic/Desktop/PENDING - Pics/' '/cygdrive/c/Users/Mic/mypics' 
```

然后我把它放在我的 bash_profile 中，现在我可以 cd 到 $pic

```
pic=/cygdrive/c/Users/Eric/mypics/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-30T02:10:46.377

我遇到了一个类似的问题，一个 shell 脚本评估一个变量中的目录路径，而没有转义“程序文件”中的空间。我通过以管理员身份运行 Cygwin 并创建符号链接来解决这个问题。这里的答案都没有奏效。

`ln -s "/cygdrive/c/Program Files" /cygdrive/c/ProgramFiles`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-20T10:10:17.023

只需用这种方式将程序文件用双引号括起来

```
/cygdrive/c/"Program Files (x86)" 
```

这个对我有用

# codeigniter - 为页面加载第二个模型

> ID：13545360
> 
> 赞同：0
> 
> 时间：2012-11-24T20:38:13.200
> 
> 标签：codeigniter, php

我是 CodeIgniter 的新手，我正在努力了解事物的结构。

我有一个使用这种方法的主页：

```
public function index()
{
  $this->load->model('header2');
  $this->load->model('homepage_model');

  $data = $this->homepage_model->HeadData();

  $this->load->view('homepage_view', $data);
} 
```

如果我取出加载 header2 模型的行，我的页面加载正常，只要我放入该行，我就会得到：

> 致命错误：在第 303 行的 H:\Forum\system\core\Loader.php 中找不到类 'Header2'

homepage_model.php 和 header2.php 都存在于我的模型目录中。

我的 header2.php 包含以下类：

```
class Head_model extends CI_Model
{
  private $data;

  public function HeaderData()
  {
    $data = array();

    $data['title'] = 'Forum main page';
    $data['heading'] = 'Welcome to yet another forum';
    $data['css_common'] = 'assets/css/common.css';
    $data['meta_desc'] = 'Forum main page';
    $data['meta_keywords'] = 'Forum Main Home';
    $data['js_jquery'] = 'js/jquery-1.8.2.js';
  }  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T20:47:49.533

您的班级名称不正确。header2.php 类名应如下所示

```
class Header2 extends CI_Model 
```

# c# - IE Window 没有进入前台，在它被 setParent 为 windows 窗体之后

> ID：13545362
> 
> 赞同：2
> 
> 时间：2012-11-24T20:38:20.680
> 
> 标签：c#, winforms, foreground, setparent

我有一个带有选项卡的 Windows 窗体，在每个选项卡中我都使用`SetParent()`api 嵌入了 IE 浏览器。

```
SetParent((IntPtr)explorer.HWND, parent); 
```

还有另一个应用程序说记事本在我的表单顶部，当我单击嵌入的 IE 浏览器时，虽然 IE 被激活但它没有出现在顶部，并且记事本在停用状态下保持在顶部。

我还尝试使用`SetForegroundWindow((IntPtr)explorer.HWND)`一个计时器来设置前台，该计时器跟踪鼠标点击。代码已执行，但没有成功。

我也试过。

```
SetWindowPos((IntPtr)explorer.HWND, HWND_NOTOPMOST, 0, 0, 0, 0, SetWindowPosFlags.IgnoreResize | SetWindowPosFlags.IgnoreMove );

SwitchToThisWindow(GetParentHandle(windowClicked), false);

BringWindowToTop(GetParentHandle(windowClicked)); 
```

但没有成功。

# javascript - 数组转换成 json 数组 - JSON.stringify

> ID：13545366
> 
> 赞同：0
> 
> 时间：2012-11-24T20:38:42.797
> 
> 标签：javascript, json, node.js

我正在从数据库中读取数据：我有我想要的值

```
 for (var index in entities) {                                                                  
    console.log(entities[index].PartitionKey);                                                                    
    console.log(entities[index].RowKey);                                                                       
    console.log(entities[index].Details);                                                               
    console.log(entities[index].Date);
    } 
```

以上将打印我想要的所有数据。现在我想将其转换为 Json 对象。我怎样才能做到这一点 。

我已经使用并知道我可以使用 JSON.stringify 但是当我在这种情况下在这里尝试时，它会给出错误。

我试着保持在forloop中：

```
jasonarray[index1].PartitionKey     = entities[index].PartitionKey;
jasonarray[index1].RowKey           = entities[index].RowKey; 
```

和

```
JSON.stringify({ key: jasonarray[index1].PartitionKey, RowKey: jasonarray[index1].RowKey ) 
```

但是在执行这个函数时它是未定义的。

我正在寻找的只是var x：

```
where x is a 

[

{partionkey: "val",key: "val"}
{partionkey: "val",key1: "val"}
{partionkey: "val",key2: "val"}

] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:58:10.637

Javascript：工作示例[http://fiddle.jshell.net/xrB8J/](http://fiddle.jshell.net/xrB8J/)

```
var entities = [
    {PartitionKey: 'a', RowKey: 5, Details:'details 1', Date:'01.01.2012' },
    {PartitionKey: 'b', RowKey: 7, Details:'details 2', Date:'02.01.2012' },
    {PartitionKey: 'c', RowKey: 3, Details:'details 3', Date:'03.01.2012' }
];

var a = new Array();
for(i = 0; i < 3; i++) 
    a.push({
        PartitionKey: entities[i].PartitionKey, 
        RowKey: entities[i].RowKey
    });

alert(JSON.stringify(a)); 
```

​或 C#：

```
string json = (new JavascriptSerializer()).Serialize(entities.Select(x => new
    {
        x.PartitionKey,
        x.RowKey
    }
)); 
```

# ruby-on-rails - 删除heroku后使用capistrano

> ID：13545367
> 
> 赞同：1
> 
> 时间：2012-11-24T20:38:44.970
> 
> 标签：ruby-on-rails, deployment, heroku, capistrano

我有一个在 heroku 上运行的 rails 应用程序，我最近得到了我的 VPS 并试图将它移动到我自己的服务器上。

所以，我删除了我的heroku，并添加了一个来源。

我为 deploy.rb 做了所有设置（一切看起来都很好）

但是当我运行 cap deploy:setup 时，我得到了：

```
* 2012-11-24 20:35:21 executing `deploy:setup'
* executing "mkdir -p /var/www/sites/phil88530.com /var/www/sites/phil88530.com/releases /var/www/sites/phil88530.com/shared /var/www/sites/phil88530.com/shared/system /var/www/sites/phil88530.com/shared/log /var/www/sites/phil88530.com/shared/pids"
servers: ["phil88530.com"]
[phil88530.com] executing command
*** [err :: phil88530.com] 
*** [err :: phil88530.com] !  Invalid path.
*** [err :: phil88530.com] 
*** [err :: phil88530.com] !  Syntax is: git@heroku.com:<app>.git where <app> is your app's name.
command finished in 956ms 
```

我不希望 heroku 存在了，为什么它要求 heroku？

而且我也不理解无效路径，如果我的 capistrano 可以为我提供更多信息，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:46:00.287

[http://phil88530.com/](http://phil88530.com/)解析为 heroku... 所以当 capistrano 连接到 时`servers: ["phil88530.com"]`，它正在连接到 heroku。

您可以将服务器设置为新 VPS 的 IP 地址，或将 DNS 移至新 VPS 以解决问题。

# jquery - jQuery.Load() 在 asp 中

> ID：13545368
> 
> 赞同：-1
> 
> 时间：2012-11-24T20:38:53.623
> 
> 标签：jquery, asp-classic

我在使用 jQuery.load() 时遇到问题我有一个页面是管理员控制面板，此页面包含侧边栏，此侧边栏包含链接，当管理员单击该链接时，我想加载目标页面的内容到管理面板页面。例如目标页面包含文本框和一个按钮，管理员必须输入他或她的详细信息并单击按钮以保存数据数据库，但是当管理员单击保存按钮时，页面重定向到目标页面，我该如何解决这个问题。

我是一个新的asp程序员，请帮助，TNX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:42:23.377

为什么不用 JQuery Ajax 方法，非常简单好用，不需要刷新页面，打开链接：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:54:34.790

也许你可以添加一个

```
<input type="hidden" value="the-page-you-want-to-target" name="target_page" /> 
```

在保存按钮之前。

然后在您的 ASP 脚本中，您可以检查

```
Request.QueryString("target_page") 
```

并重定向到正确的页面。至少现在您知道加载了哪个页面。

有时我们只需要保持简单;）

# php - PHP Composer 无法在 Mac 上运行

> ID：13545369
> 
> 赞同：4
> 
> 时间：2012-11-24T20:38:54.643
> 
> 标签：php, macos, composer-php

我安装了一个 bitnami mac 堆栈，主要是因为我的项目至少需要 PHP 5.4.7 版本。但是，我遇到了作曲家的问题。这是我运行时遇到的错误：

```
php composer.phar install --dev 
```

错误：

```
Richard-Knops-MacBook-Pro:my-project richardknop$ php composer.phar install --dev
dyld: Library not loaded: /Applications/MAMP/Library/lib/libiconv.2.dylib
  Referenced from: /opt/local/bin/php
  Reason: Incompatible library version: php requires version 8.0.0 or later, but libiconv.2.dylib provides version 7.0.0
Trace/BPT trap
Richard-Knops-MacBook-Pro:my-project richardknop$ 
```

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:07:47.467

更新您的 mamp 安装错误清楚地表明您的 libiconv.2.dylib 已过时。

如果 MAMP 没有最新版本，请通过安装 apache + php。mac 端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:48:12.650

BitNami 是独立的，不会修改您的系统环境。我认为问题在于未加载 BitNami 环境。

> 引用自：/opt/local/bin/php

这似乎不属于 BitNami 安装。为了将来参考，解决方案（我认为）应该是：

*   加载 BitNami 环境执行`/Application/mampstack-5.4.x/use_mampstack`
*   之后确保环境加载正确执行`which php`
*   然后执行`php composer.phar install --dev`

# c - 程序在重新分配内存时导致内存损坏

> ID：13545370
> 
> 赞同：-1
> 
> 时间：2012-11-24T20:38:59.050
> 
> 标签：c, malloc, valgrind, realloc

我有一个带有二维数组的程序。首先我像这样分配数组：

```
char **crossword;
crossword = (char **) malloc(n* sizeof(*crossword));
for (i = 0; i < n; i++)
    crossword[i] = (char *)malloc(n); 
```

其中 n = 50。

然后我有函数，从标准输入读取字符串。问题是，我不知道这些字符串会有多少或多长。

```
void read(char **p,int *n)
{
char tmp = 0,prevtmp = 0;
int i = 0, j = 0,x;

while (1)
{
    prevtmp = tmp;
    tmp = getchar();
    if ((tmp == '\n' && prevtmp == '\n') || feof (stdin))
    {
        *n = i;
        break;
    }
    if (tmp == '\n')
    {
        p[i][j] = '\0';
        i++;
        if (i == *n)
        {
            p = (char **) realloc(p, 2*i); // if there is more strings than space for them, allocate more memory.
            for (x = i; x < 2*i; x++)
                p[x] = (char *) malloc (*n);

            *n *= 2;
        }
        j = 0;
        continue;
    }
    p[i][j] = tmp;
    j++;
    if (j == *n)
        p[i] = (char *)realloc(p[i], 2*j); //same as above
}
} 
```

函数是这样调用的：

```
read(crossword,&n); 
```

当不需要 realloc（少于 50 个字符串，每个小于 50 个字符）时，此函数工作正常。但是对于大量输入，这会失败

```
*** glibc detected *** ./a.out: malloc(): memory corruption (fast): 0x00000000014282f0 *** error. 
```

我认为我的问题在于我重新分配更多内存的部分，这是 valgrind 的输出：

```
==8885== Invalid write of size 1
==8885==    at 0x40084C: read (in /home/xerw/Dropbox/CVUT/PROGTEST/du6/a.out)
==8885==    by 0x40177F: main (in /home/xerw/Dropbox/CVUT/PROGTEST/du6/a.out)
==8885==  Address 0x51f2b88 is not stack'd, malloc'd or (recently) free'd
==8885== 
==8885== Invalid write of size 8
==8885==    at 0x4008A6: read (in /home/xerw/Dropbox/CVUT/PROGTEST/du6/a.out)
==8885==    by 0x40177F: main (in /home/xerw/Dropbox/CVUT/PROGTEST/du6/a.out)
==8885==  Address 0x51f4f00 is not stack'd, malloc'd or (recently) free'd

valgrind: m_mallocfree.c:266 (mk_plain_bszB): Assertion 'bszB != 0' failed.
valgrind: This is probably caused by your program erroneously writing past the
end of a heap block and corrupting heap metadata.  If you fix any
invalid writes reported by Memcheck, this assertion failure will
probably go away.  Please try that before reporting this as a bug.

==8885==    at 0x3804C6CF: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==8885==    by 0x3804C812: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==8885==    by 0x38000883: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==8885==    by 0x380574EA: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==8885==    by 0x38057E03: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==8885==    by 0x380212DC: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==8885==    by 0x3802146A: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==8885==    by 0x3808F656: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)
==8885==    by 0x3809E68C: ??? (in /usr/lib/valgrind/memcheck-amd64-linux)

sched status:
  running_tid=1

Thread 1: status = VgTs_Runnable
==8885==    at 0x4C2B3F8: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==8885==    by 0x4008A5: read (in /home/xerw/Dropbox/CVUT/PROGTEST/du6/a.out)
==8885==    by 0x40177F: main (in /home/xerw/Dropbox/CVUT/PROGTEST/du6/a.out) 
```

我一直在试验指针很短的时间，所以我不知道出了什么问题。我一直试图解决这个问题几个小时，但我没有想出任何东西。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:58:19.163

问题似乎与以下行有关：

```
p = (char **) realloc(p, 2*i); 
```

我想应该是：

```
p = (char **) realloc(p, (2*i)*sizeof(char*)); 
```

即你想增加数组来保存元素，`2*i`所以你需要分配`2*i`.`char*`

# php - 使用 jQuery 和 PHP 发送和接收 AJAX 请求

> ID：13545376
> 
> 赞同：2
> 
> 时间：2012-11-24T20:40:28.413
> 
> 标签：php, javascript, jquery, ajax

我正在尝试向页面发送 AJAX 请求以解释一些数据，如果它符合我正在寻找的内容，则发送另一个 AJAX 请求。现在我可以看到第一个请求正在发出，但我没有得到一个回复

```
//message.php
<head>
<script>
function org_name(str){
    alert(str); //this alert appears, so I know the data is being received by this function
    $.get("common_functions.php", { group_name: str} );
}
</script>
</head> 
```

然后，在 common_functions.php 上，我收到了类似的请求，但是，我不确定到底是什么问题。警报框甚至没有出现，所以我很困惑为什么控制台会说请求已发送

```
//common_functions.php

if(isset($_GET['group_name'])){
  ?>
  <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
  <script type="text/javascript">
  alert('common_functions'); //this does not appear
  $.get("message.php", { name: "test"} );
  </script>
  <?
} 
```

当我在 chrome 中打开 javascript 控制台时，我看到请求将表单消息发送到 common_functions，但显然 common_functions 上的请求没有发回

```
//text from javascript console
Request URL:http://localhost/message/common_functions.php?group_name=test
Request Method:GET
Status Code:200 OK 
```

有没有人看到我做错或失踪的明显事情？如果有什么不同，common_functions 会包含在 message.php 中，因为我确实使用该页面中的一些其他函数用于我的 php。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:44:56.153

你必须对你的数据做一些事情。现在，您正在进行 AJAX 调用，并且对您的数据不做任何事情。

所以像下面这样的东西会起作用：

```
$.ajax({
    url: "common_functions.php",
    data: { group_name: str },
    type: "GET",
    success: function (data) {
        $(data).appendTo("head");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:48:39.260

如果您想控制执行状态，请使用 $.ajax：

```
 $.ajax({
            type: "POST",
            url: "common_functions.php",
            data: { name: "test"},
            success: function(r)
            {
                 // user r as output
            },
            error: function(xhr, ajaxOptions, thrownError)
            {
                 // error report
                alert(xhr.responseText);
            }
    }); 
```

在这种情况下，您可以查看执行是否成功或是否发生错误。

您还可以使用 firebug 插件 for firefox 或 chrome 来检测是否发送了响应。还有一个名为[Fidler](http://www.fiddler2.com/fiddler2/)的优秀工具，它可以让您更好地了解请求/响应状态。

[这](http://www.youtube.com/watch?v=W4jXAaEMp2M)是一个很好的ajax调试教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T08:31:57.513

您可以使用自动为您执行此操作的库，在您的情况下使用[http://phery-php-ajax.net](http://phery-php-ajax.net) ，它将是

```
function messages($data){
  $r = new PheryResponse;
  // return your messages
  return $r->json($messages);
}

function common($data){
  $r = new PheryResponse;
  switch ($data['group_name']){
    case 'messages':
       $r
       ->include_script(array( 
         'jquery' => 'http://code.jquery.com/jquery-1.8.2.js'
       ))
       ->phery_remote('messages'); // load your messages
       break;
  }
  return $r;
}

Phery::instance()->set(array(
  'common' => 'common',
  'messages' => 'messages'
))->process(); 
```

在您的页面加载

```
$(function(){
  phery.remote('common', {'group_name': 'messages'});
}); 
```

你不必做任何其他事情。顺便说一句，如果你在使用之后包含 jQuery `$.get()`，它显然不会工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T20:44:33.470

`$.get`将去除`<script>`标签。`load()`您可以使用另一个不会使用的jQuery AJAX 方法，或者使用`$.getScript`. 如果您需要内容和脚本，您可以通过对内容发出 ajax 请求来完成这两种操作，并在该 ajax 的成功回调中调用脚本`$.getScript`

`load()`替换指定选择器中的所有内容

```
$('#myDiv').load('common_functions.php', { name: "test"}) 
```

将获取 php 输出的所有内容并替换所有内容，`#myDiv`但也会运行脚本

# database - 如何使用 localdb 在 Code First 中查看数据库图

> ID：13545382
> 
> 赞同：31
> 
> 时间：2012-11-24T20:41:45.730
> 
> 标签：database, entity-framework, visual-studio-2012, relationship, diagram

我有一个使用created in的`Code First`项目。虽然我可以在a中看到我的类关系，但是如何看到自动生成的数据库的可视化图表呢？`Entity Framework 5.0.0``localdb``Visual Studio 2012 Ultimate``Class Diagram``EF`

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-02T00:15:22.713

安装[Entity Framework Power Tools Beta 4](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)，重新启动 Visual Studio，右键单击解决方案视图中的上下文，您将在上下文菜单中看到一个新的“实体框架”选项。选择“查看实体数据模型”以在 Visual Studio 中查看漂亮的可视化数据库图。瞧！

Entity Framework 6 电动工具：[链接](https://marketplace.visualstudio.com/items?itemName=ErikEJ.EntityFramework6PowerToolsCommunityEdition)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-01-31T10:56:12.667

您可以使用**Microsoft SQL Server Management Studio 2012**，`localdb`它以您可能习惯于使用其他 SQL Server 数据库的方式支持数据库图表。

1.  Open Management Studio（应该已经与 Visual Studio 一起安装）
2.  `(localdb)\v11.0`使用 Windows 身份验证连接到
3.  查找相关数据库
4.  展开 Database Digrams，如果您还没有安装图表支持对象
5.  添加您需要的表格，您就完成了！

资料来源：这篇较旧但仍然相关的文章：http: [//visualstudiomagazine.com/blogs/data-driver/2012/05/visual-studio-11-beta-easier-development-localdb.aspx](http://visualstudiomagazine.com/blogs/data-driver/2012/05/visual-studio-11-beta-easier-development-localdb.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-19T14:26:55.960

我检查了[Entity Framework Power Tools Beta 4](https://marketplace.visualstudio.com/items?itemName=EntityFrameworkTeam.EntityFrameworkPowerToolsBeta4)，它不再受支持。Intead，您可以使用新的[Entity Framework 6 Power Tools Community Edition](https://marketplace.visualstudio.com/items?itemName=ErikEJ.EntityFramework6PowerToolsCommunityEdition)。

它应该工作相同。

# configuration - 如何从 Yaml 配置文件中调用初始化脚本中的变量

> ID：13545385
> 
> 赞同：1
> 
> 时间：2012-11-24T20:41:50.520
> 
> 标签：configuration, initialization, yaml, erb

我正在尝试运行一个初始化脚本来帮助我从我的 config.yml 文件中检索数据。

config.yml 目前看起来像这样：

```
production: &default
  log_server: log_server
  deploy_to: /path/to/deploy
  unicorn:
    port: 8080
    uid: user 
    gid: group
 development: &dev
  <<: *default
  deploy_to:path/to/deploy
  unicorn:
    port: 80
    uid: unicorn 
    gid: unicorngroup 
```

这是我到目前为止的 config.rb 文件：

```
require 'yaml'
require 'erb'

config = YAML.load(ERB.new(File.read("/Users/NguyenC/gomoto_server/config/api_settings.yml")).result) 
```

如果我“放置配置”，输出如下所示：

```
{"production"=>{"log_server"=>"log_server", "deploy_to"=>"path/to/deploy",  "unicorn"=>{"port"=>8080, "uid"=>"user", "gid"=>"group"}}, "development"=>{"log_server"=>"log_server", "deploy_to"=>"path/to/deploy", "unicorn"=>{"port"=>80, "uid"=>"unicorn", "gid"=>"unicorn group"}} 
```

如果我只想从产品或开发中获取某些变量，我将如何调用这些变量？我的目标是能够根据我使用的环境调用任何变量。

# css - 试图让 div 漂浮在另一个 div 旁边

> ID：13545386
> 
> 赞同：0
> 
> 时间：2012-11-24T20:41:59.240
> 
> 标签：css, html

我有两个 div featureText 和 SkillText 一个接一个，我试图让第二个在下一个右侧浮动而不是堆叠，我尝试了第二个的相对位置，向左浮动无济于事，容器本身是相对定位的。当我检查第一个 div 时，它显示为超宽，但我设置了宽度，边距和填充已设置为 0，以查看这是否是问题所在。这是一个菜鸟问题，但我需要帮助。

现场[直播](http://anderskitson.ca/update)

**html**

```
<!DOCTYPE html>
<html>
<head>
    <title>Portfolio of Anders Kitson</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/styles.css">
    <script type="text/javascript" src="//use.typekit.net/lfr7txf.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>
<div id="container">
    <header>
        <h1>ASK</h1>
        <h2>Anders Samuel Kitson, front end web developer.</h2>
    </header>
    <div id="featureText">
        <h1>Recent Works</h1>
    </div>
    <div id="skillsText">
        <h1>Super hero skills</h1>
    </div>
    <div id="siteThumbs"><!--not sure if this is appropriate use of the section tag-->
        <div id="springmethod">
            <a href="#"><h1 class="springmethod">Springmethod.com</h1></a>
        </div>
        <div id="goodmorning">
            <a href="#"><h1 class="goodmorning">goodmorningmoon.ca</h1></a>
        </div>
    </div>

</div>
</body>
</html> 
```

**css**

```
/*variables*/
/*shared styles*/
#container {
  width: 960px;
  max-width: 90%;
  border: solid 0px #000;
  margin: auto;
  position: relative; }

header h1 {
  background: url("../images/ask.gif");
  width: 97px;
  height: 96px;
  text-indent: -9000px; }
header h2 {
  font-family: "brandon-grotesque",sans-serif;
  font-weight: 300;
  font-size: 2.5em; }

#featureText {
  margin-top: 70px;
  margin-bottom: 20px;
  width: 24%;
  background: red; }
  #featureText h1 {
    font-family: "brandon-grotesque",sans-serif;
    font-size: 2.5em;
    font-weight: 700; }

#skillsText {
  width: 28%;
  background: aqua;
  position: relative;
  float: left; }
  #skillsText h1 {
    font-family: "brandon-grotesque",sans-serif;
    font-size: 2.5em;
    font-weight: 700;
    margin-top: -10px; }

#siteThumbs {
  position: relative;
  float: left;
  width: 960px; }
  #siteThumbs .springmethod {
    background: url("../images/springmethod.jpg") no-repeat;
    width: 318px;
    height: 241px;
    text-indent: -9000px;
    padding: 0;
    margin: 0; }
  #siteThumbs .goodmorning {
    background: url("../images/goodmorning.jpg") no-repeat;
    width: 318px;
    height: 241px;
    text-indent: -9000px;
    padding: 0;
    margin: 0; }

#siteThumbs a:hover .springmethod {
  background: url("../images/springmethod.jpg") 0 -241px no-repeat; }
#siteThumbs a:hover .goodmorning {
  background: url("../images/goodmorning.jpg") 0 -241px no-repeat; }

#springmethod {
  width: 318px;
  position: relative;
  float: left; }

#goodmorning {
  width: 318px;
  position: relative;
  float: left; }

/*media queries*/
/* Smartphones (portrait and landscape) */
@media only screen and (min-width: 0px) and (max-width: 767px) {
  header h2 {
    font-size: 1.5em; } } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:49:35.580

移出`margin-top: 70px;`并`#featureText`向左浮动 `#skillsText`

```
#featureText {
   margin-bottom: 20px;
   width: 24%;
   background: red;
   float: left;
}

#skillsText { float:left; } 
```

# python - 使用 matplotlib 从 CSV 文件中绘制数据

> ID：13545388
> 
> 赞同：31
> 
> 时间：2012-11-24T20:42:09.613
> 
> 标签：python, numpy, matplotlib

我有一个 CSV 文件，位于`e:\dir1\datafile.csv`. 它包含三列和 10 个标题和尾随行，需要跳过。我想用 numpy.loadtxt() 来绘制它，我还没有找到任何严格的文档。

这是我从网上找到的几次尝试中开始写的。

```
import matplotlib as mpl
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.cbook as cbook

def read_datafile(file_name):
    # the skiprows keyword is for heading, but I don't know if trailing lines
    # can be specified
    data = np.loadtxt(file_name, delimiter=',', skiprows=10)
    return data

data = read_datafile('e:\dir1\datafile.csv')

x = ???
y = ???

fig = plt.figure()

ax1 = fig.add_subplot(111)

ax1.set_title("Mains power stability")    
ax1.set_xlabel('time')
ax1.set_ylabel('Mains voltage')

ax1.plot(x,y, c='r', label='the data')

leg = ax1.legend()

plt.show() 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-25T11:32:57.963

根据[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html) `numpy.loadtxt`是

> 用于简单格式文件的快速阅读器。genfromtxt 函数提供了更复杂的处理，例如缺失值的行。

所以只有几个选项可以处理更复杂的文件。如前所述[`numpy.genfromtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)，有更多选择。所以作为一个例子，你可以使用

```
import numpy as np
data = np.genfromtxt('e:\dir1\datafile.csv', delimiter=',', skip_header=10,
                     skip_footer=10, names=['x', 'y', 'z']) 
```

读取数据并为列分配名称（或从文件中读取标题行`names=True`），然后用

```
ax1.plot(data['x'], data['y'], color='r', label='the data') 
```

我认为 numpy 现在有很好的记录。[`ipython`](http://ipython.org/ipython-doc/stable/interactive/tutorial.html#introducing-ipython)您可以从内部或使用 IDE轻松检查文档字符串，[`spider`](http://code.google.com/p/spyderlib/)如果您更喜欢阅读呈现为 HTML 的文档字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T21:05:46.410

我正在猜测

```
x= data[:,0]
y= data[:,1] 
```

# r - 为 rpart 制定数据

> ID：13545391
> 
> 赞同：0
> 
> 时间：2012-11-24T20:42:18.023
> 
> 标签：r, rpart, cart-analysis

连接列表的列名称以准备公式`rpart`？

只是想连接名称（log_data），`log_data`是一个包含 60 个不同向量的列表，所以我只希望它们的列名采用某种格式，以便我可以将它们放在 rpart 中的公式中......就像`rpart(A ~ B + C + D + E ,log_data)`，所以在这里，我只想将 formula="A~B+C+D+E" 提取为一个完整的字符串，其中 A,B,C,D,E 是我们必须从 log_data 中提取的列名，或者是否有任何从列表中获取树的更好方法。
我努力了，

```
a <- names(log_data)  
rpart(a[1] ~ a[2] + a[3] + a[4], log_data) 
```

收到错误

```
Error in paste(temp, yprob[, i], sep = " ") : subscript out of bounds 
```

在哪里

```
a[2]

[1] "X.u.crpice..vin20f1..vol.vin20f1v1.r_credit_credshare2...91...90."

a[3]

[1] "X.u.crpice..vin20f1..vol.vin20f1v1.r_credit_credshare2...92...90."

c<-paste(a[1], "~", sep="")

rpart_formula <- as.formula(paste(c, paste(a[2:60], collapse = " + "), sep = ""))

rpart(rpart_formula,log_data) 
```

由于列名太长或者可能是 n=60，它在 rpart 进入无限循环

我可以附上任何列名**colnames(log_data) <- c(?)**，我应该在“？”处放什么，这样在 n=60 时很容易绘制它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:18:26.197

我相信你想要

```
shortnames <- paste0("c",seq(ncol(log_data)))
names(log_data) <- shortnames
form <- reformulate(paste(shortnames[2:4],collapse="+"),
                    response=shortnames[1])
rpart(form,log_data) 
```

# xml - XSL 以不同方式转换子节点值

> ID：13545393
> 
> 赞同：1
> 
> 时间：2012-11-24T20:42:49.500
> 
> 标签：xml, xslt-2.0

基本上，这是我正在尝试的逻辑。

对于父节点（ByFirstNameSearchList 或 ByLastNameSearchList）：

-所有子元素值为空（value1-4），插入一个值% -当一个或任何一个子元素有值时，用NOVAL替换所有具有空值的兄弟元素。

我有以下 XML：

```
<GetName>
    <ByLastNameSearchList>
        <Value1/>
        <Value2/>
        <Value3/>
        <Value4/>
        <Value5/>
    </ByLastNameSearchList>
    <ByFirstNameSearchList>
        <Value1>String</Value1>
        <Value2>String</Value2>
        <Value3/>
        <Value4/>
        <Value5/>
    </ByFirstNameSearchList>
  </GetName> 
```

这就是我想要的样子：

```
<GetName>
    <ByLastNameSearchList>
        <Value1>%</Value1>
        <Value2>%</Value2>
        <Value3>%</Value3>
        <Value4>%</Value4>
        <Value5>%</Value5>
    </ByLastNameSearchList>
    <ByFirstNameSearchList>
        <Value1>String</Value1>
        <Value2>String</Value2>
        <Value3>NOVAL</Value3>
        <Value4>NOVAL</Value4>
        <Value5>NOVAL</Value5>
    </ByFirstNameSearchList>
</GetName> 
```

我真的很感谢你帮助我。相信我，我已经用我有限的 XSL 知识尝试了一切。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:05:08.247

这个样式表

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

   <xsl:template match="*|@*">
      <xsl:copy>
         <xsl:apply-templates/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="ByFirstNameSearchList/* | ByLastNameSearchList/*">
      <xsl:copy>
         <xsl:choose>
            <xsl:when test="string-length(text()) gt 0">
               <xsl:value-of select="text()"/>
            </xsl:when>
            <xsl:when test="some $Value in ../* satisfies string-length($Value/text()) gt 0">
               <xsl:text>NOVAL</xsl:text>
            </xsl:when>
            <xsl:otherwise>
               <xsl:text>%</xsl:text>
            </xsl:otherwise>
         </xsl:choose>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

将产生你想要的输出。

更新：

这个版本更通用一些，因为它不依赖于只包含一个字符串的非空元素：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

   <xsl:template match="*|@*">
      <xsl:copy>
         <xsl:apply-templates/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="ByFirstNameSearchList/* | ByLastNameSearchList/*">
      <xsl:choose>
         <xsl:when test="string-length(text()) gt 0">
            <xsl:copy-of select="."/>
         </xsl:when>
         <xsl:when test="some $Value in ../* satisfies string-length($Value/text()) gt 0">
            <xsl:copy>
               <xsl:text>NOVAL</xsl:text>
            </xsl:copy>
         </xsl:when>
         <xsl:otherwise>
            <xsl:copy>
               <xsl:text>%</xsl:text>
            </xsl:copy>
         </xsl:otherwise>
      </xsl:choose>
   </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:28:10.037

**就这么简单**（对于 XSLT 2.0 和 XSLT 1.0）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*/*/*[not(node())]">
  <xsl:copy>NOVAL</xsl:copy>
 </xsl:template>

 <xsl:template match="/*/*[not(*/node())]/*">
    <xsl:copy>%</xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<GetName>
    <ByLastNameSearchList>
        <Value1/>
        <Value2/>
        <Value3/>
        <Value4/>
        <Value5/>
    </ByLastNameSearchList>
    <ByFirstNameSearchList>
        <Value1>String</Value1>
        <Value2>String</Value2>
        <Value3/>
        <Value4/>
        <Value5/>
    </ByFirstNameSearchList>
</GetName> 
```

**产生了想要的正确结果：**

```
<GetName>
      <ByLastNameSearchList>
            <Value1>%</Value1>
            <Value2>%</Value2>
            <Value3>%</Value3>
            <Value4>%</Value4>
            <Value5>%</Value5>
      </ByLastNameSearchList>
      <ByFirstNameSearchList>
            <Value1>String</Value1>
            <Value2>String</Value2>
            <Value3>NOVAL</Value3>
            <Value4>NOVAL</Value4>
            <Value5>NOVAL</Value5>
      </ByFirstNameSearchList>
</GetName> 
```

**说明**：

1.  身份规则“按原样”复制选择执行它的每个节点。

2.  模板会覆盖作为顶部元素的孙子元素且没有子元素的任何元素的标识模板。这将复制元素并生成一个文本节点子节点，其字符串值为字符串“NOVAL”。

3.  第二个覆盖模板，它覆盖标识模板和第一个覆盖模板：匹配作为顶部元素的孙子元素并且其父元素没有具有子节点的子元素的任何元素。这将复制元素并生成一个文本节点子节点，其字符串值为字符串“%”。

**请注意**：

1.  这是一个纯粹的“推式”转换。

2.  没有明确的条件指令（no `xsl:choose`, no `xsl:when`, no `xsl:otherwise`），no`xsl:text`甚至 no `xsl:apply-templates`（身份模板除外）。

3.  没有`some ... satisfies ...`使用特殊的 XPath 2.0 表达式 ( )，因为它们是不必要的。

4.  没有`string-length()`使用任何功能。

# netbeans-7 - Netbeans 中的“不支持的 major.minor 版本 51.0”

> ID：13545394
> 
> 赞同：0
> 
> 时间：2012-11-24T20:42:50.253
> 
> 标签：netbeans-7, java-6, unsupported-class-version

我知道标题与其他问题几乎相同，但是，我无法用这些答案解决我的问题。

这就是问题：

我有 2 个几乎相同的项目（一个是用 mercurial 从另一个克隆而来的），并且已经进行了一些更改。从原始项目中最后一次拉取后，当我尝试运行该项目时出现以下错误。我知道这意味着该项目正在使用 java7 编译并使用 java6 运行。

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: com/[...]/Start : Unsupported major.minor version 51.0 
```

原项目继续正常运行。

如果我将项目属性中的 Java 平台更改为 java7，它就会运行，但我需要项目在 java6 上运行，所以这不是一个选项。

```
Product Version: NetBeans IDE 7.2 (Build 201207171143)
Java: 1.6.0_35; Java HotSpot(TM) 64-Bit Server VM 20.10-b01
System: Linux version 3.2.0-32-generic running on amd64; UTF-8; en_US (nb) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:59:04.187

您可以在您的环境中添加超过 1 个 jdk，并且您可以决定使用哪一个。尝试添加 jdk 6 并在此基础上进行编译。

# java - 如何在整个 Java 应用程序中更改光标？

> ID：13545396
> 
> 赞同：1
> 
> 时间：2012-11-24T20:43:11.247
> 
> 标签：java, image, swing, dialog, cursor

我正在使用以下代码在我的 java 应用程序中创建自定义光标：

```
this.setCursor(Toolkit.getDefaultToolkit().createCustomCursor(
            Utilities.getImage("images\\mouse_pointer.png", false), 
            new Point(0, 0), 
            "cursor")); 
```

“this”指的是扩展 JFrame 的类。使用此代码，光标按预期更改，但是每当我打开一个新的模式对话框时，光标都会返回到它的默认状态。我尝试更改每个新对话框的光标，但这仅在我将鼠标悬停在对话框上时才有效；一旦我离开对话框的区域，光标就会再次返回到它的原始状态。有人知道为什么会发生这种情况，或者知道在整个应用程序中更改光标的方法吗？任何帮助将不胜感激。

谢谢。

# javascript - 如何在 HTML 中使用这个 Javascript checkAlphaNumeric()？

> ID：13545400
> 
> 赞同：0
> 
> 时间：2012-11-24T20:43:39.430
> 
> 标签：javascript, html, validation, passwords

我难住了。我有以下代码，无法正常工作。我有点使用onkeyup的密码或电子邮件验证事件，但如果我点击提交，我真的只想让它工作。我的表单已经在使用 validateForm() 和 checkPass()。我只需要让它工作。

```
// *********** ALPHA-Numeric check ***************************
    function checkAlphaNumeric()
    {  
       var passw = document.getElementById("_password");
       var mystring=new String(passw)
       var authpassword = document.getElementById("AuthPass");

      if(mystring.search(/[0-9]+/)==-1) // Check at-least one number
        {
           authpassword.innerHTML = "<span class='smaller'>*Password must be 8 characters, 1 letter, and 1 number!</span>!";
           return false; 
        } else {
           count++; 
           document.getElementById("err_password").innerHTML="";
         }

      if(mystring.search(/[A-Z]+/)==-1 && mystring.search(/[a-z]+/)==-1) // Check at-least one character
        {
           authpassword.innerHTML = "<span class='smaller'>*Password must be 8 characters, 1 letter, and 1 number!</span>!";
           return false;
        } else {  count++; 
           document.getElementById("err_password").innerHTML="";
          }
      } //*** END FUNCTION
 HTML CODE IS BELOW
 <input id="_password" type="password" name="password" autocomplete="off" size="40"      onkeyup="checkAlphaNumeric(); return false;"><span id="AuthPass" class="AuthPass" style="font-size: smaller; color:red;""></span> 
```

# mysql - 带有 ASP 的 MySQL 循环

> ID：13545402
> 
> 赞同：2
> 
> 时间：2012-11-24T20:43:46.263
> 
> 标签：mysql, asp-classic

我一直试图让一些 ASP 代码工作一段时间，但根本做不到（我是一个 PHP 人，并与某人签约为我做这件事，但他现在拒绝回复电子邮件）。所以我想知道是否有人可以帮助我解决我遇到的问题，也许可以解释这段代码的问题所在。这是代码：

```
'------------ Connect to MySQL --------------------------
sConnection = "DRIVER={MySQL ODBC 3.51 Driver}; SERVER=" & sServer & "; DATABASE=" & sDBName &"; UID=" & sDBUser & ";PASSWORD=" & sDBPass & "; PORT=3306;"
Set oConnection = Server.CreateObject("ADODB.Connection")
oConnection.Open(sConnection)
Set oRS = Server.CreateObject("ADODB.Recordset")
'------------ Connect to MySQL --------------------------

'Checks if the cookie exists
sCookieValue = Request.Cookies(sCookieName)
bCookieFound = CBool(Len(sCookieValue) > 0)

if bCookieFound then

    oRS = oConnection.Execute("SELECT * FROM sessions WHERE id=" & sCookieValue )
    Dim bSDFound
    Dim sDate
    bSDFound = false
    Do while NOT oRS.EOF
        bSDFound = true
        sDate = oRS("date")
        oRS.MoveNext ' Next record
    Loop

    ' Check if found in the DB
    if bSDFound then
        'Convert from universal Date format
        Dim dateDB
        dateDB = CDate(Mid(sDate, 1, 10) & " " & Mid(sDate, 12, 8))

        'Check if is longer than 1 hour old            
        if DateDiff("n", dateDB, Now) > 60 then
            Response.Redirect urlLogin
        else
            'If it is not older than an hour, update it to the current timestamp and redirect
            oConnection.Execute("UPDATE sessions set date=Now() WHERE id=" & sCookieValue )
            Response.Redirect urlWelcome
        end if
    else
        Response.Redirect urlLogin
    end if

else
    Response.Redirect urlLogin
end if 
```

我很确定问题出在“while NOT 循环”中，但我对 ASP 的了解还不够，无法弄清楚。

我知道： - 正在使用的 MySQL 信息是正确的， - 当 while 循环被删除时，代码可以工作。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:07:57.133

oRS = oConnection.Execute( 应该设置 oRS = oConnection.Execute( – Gaby aka G. Petrioli

# android - 你如何循环浏览视图ID？

> ID：13545405
> 
> 赞同：5
> 
> 时间：2012-11-24T20:44:07.620
> 
> 标签：android

对于我的 android 应用程序，我需要制作一个`View`ID 数组。

该数组将包含 81 个值，因此将它们一一添加非常冗长。这是它现在的样子：

```
cells[0] = R.id.Square00;
cells[1] = R.id.Square01;
cells[2] = R.id.Square02;
cells[3] = R.id.Square03;
cells[4] = R.id.Square04;
cells[5] = R.id.Square05;
//All the way to 80. 
```

有没有更短/更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T20:58:18.463

值得庆幸的是，有。使用[`getIdentifier()`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)：

```
Resources r = getResources();
String name = getPackageName();
int[] cells = new int[81];
for(int i = 0; i < 81; i++) {
    if(i < 10)
        cells[i] = r.getIdentifier("Squares0" + i, "id", name);
    else
        cells[i] = r.getIdentifier("Squares" + i, "id", name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-11T15:03:28.753

> 山姆的答案更好，但我认为我应该分享一个替代方案

```
int [] ids = new int [] {R.id.btn1, R.id.btn2, ...};
Button [] arrayButton = new Button[ids.length];

for(int i=0 ; i < arrayButton.length ; i++)
{
  arrayButton[i] = (Button) findViewById(ids[i]);
} 
```

**Sam Answer 的修改形式**

不需要 if else 使用整数字符串格式化

```
Resources r = getResources();
String name = getPackageName();

int[] resIDs = new int[81];

for(int i = 0; i < 81; i++) 
{
        resIDs[i] = r.getIdentifier("Squares0" + String.format("%03d", i), "id", name);
} 
```

# php - 检查所选数据中的重复数据

> ID：13545409
> 
> 赞同：0
> 
> 时间：2012-11-24T20:44:57.897
> 
> 标签：php

您好，我要检查所选数据中的重复数据，但我的代码无法正常工作

我的代码是：

```
$cs="0";
$location=array();
$check=array(); $check[0]="";
while ($db_field = mysql_fetch_array($result)) {    
     for ($z=0; $z<=$cs;$z++){
        if($check[$z]==$db_field['location']) { 
          //*in here going to check same or not
        } 
        else {                            
          //*if not same $location_c[$cs] will get
          $location_c[$cs]= $db_field['location'];
          $check[$cs]= $db_field['location'];
        }
    }
    $cs++;
} 
```

此代码打印所有数据而不检查重复数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:48:44.843

我认为您应该使用`in_array()`以避免重复，我还删除了不必要的东西：

```
$location=array();
while ($db_field = mysql_fetch_array($result)) {
    if(!in_array($db_field['location'], $location_c)) {
        $location_c[] = $db_field['location'];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:50:01.273

假设重复是位置字段

```
$cs="0";
$location=array();
$check=array(); 
while ($db_field = mysql_fetch_array($result)) {    
     for ($z=0; $z<=$cs;$z++){

        if (in_array($db_field['location'], $check)) continue;
        $check[]=$db_field['location'];

        $location_c[$cs]= $db_field['location'];

    }
    $cs++;
} 
```

但是您不能避免 SQL 查询重复吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:52:45.147

您遇到的第一个问题是在您的 for 声明中：`for ($z=0; $z<=$cs;$z++)`. 没有必要这样做。您应该使用[in_array()](http://php.net/manual/en/function.in-array.php)来确定您要查找的内容是否已设置。此外，您的密钥无需使用增量值。如果使用`[]`没有开销，并且会自动使用数字键。

最后，似乎根本没有理由使用`$check`数组。你可以直接去`$location_c`。这减少了很多代码：

```
$location_c = array();
while ($db_field = mysql_fetch_array($result)) {
    if(!in_array($db_field['location'],$location_c)){
        $location_c[]= $db_field['location'];
    }
} 
```

# java - 是和 可互换？

> ID：13545410
> 
> 赞同：2
> 
> 时间：2012-11-24T20:45:06.593
> 
> 标签：java, generics

[Java 教程](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)就是这么说的，`<?>`而且`<T>`是可以互换的。那么为什么我可以编译下面的第[1](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)行，而我不能编译第 [2] 行？

```
abstract class A<K extends Number>{
  abstract public A<?> f(A<?> k); //[1]
  abstract public <S> A<S> f(A<S> k); //[2]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:52:02.320

您必须限制`S`扩展`Number`：

```
abstract class A<K extends Number>{
    //abstract public A<?> f(A<?> k); //[1] 
    abstract public <S extends Number> A<S> f(A<S> k); //[2]
} 
```

我猜你什么时候使用`<?>`它是自动限制的——真的不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:39:08.413

经过数小时的阅读和搜索，我终于找到了自己问题的答案。首先，我不得不说一下`<?>`，这里有一些信息。

> 那么各种集合的超类型是什么？它写成Collection `<?>`（读作“未知的集合”），即元素类型匹配任何东西的集合。（[Java教程](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)）

好的，所以我们`A<?>`是各种As的超级**类型**。并且 parametr`A<?>`可以接受任何 As （多态）作为参数，因此第[1](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)行编译。 ![Java 教程](../Images/2f0644b3ce0a043869c69701bc1f31a6.png)

Java 规范告诉我们：

> 通配符是存在类型的受限形式。给定一个泛型类型声明`G<T extends B>`，`G<?>`大致类似于 Some `X<:B`。`G<X>`

**B**代表边界；`X<:B`表示子类型关系在类型 X 和 B 之间成立。

因此`A<?>`确实是*自动限制的*；

当我们声明类型参数`<S>`时，在某种程度上，就好像我们声明了`class S{}`，类型**S**与 Number（我们的绑定）没有任何关系并且强制转换为 1 会失败，所以我们应该声明“S 扩展 Number”为具有与 for 相同的效果`<?>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:48:16.763

`?`并且`T`是可以互换的（不是真的，因为你失去了确切的类型），因为没有界限。在这种情况下，`K`它有一个扩展的界限`Number`

因此，它`abstract public <S extends Number> A<S> f(A<S> k);`会做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T20:50:50.417

这对我来说编译得很好：

```
abstract class A<K extends Number>
{
//  abstract public A<?> f(A<?> k); //[1] 
    abstract public A<K> f(A<K> k); 
} 
```

# map - 在映射阶段后停止 hadoop

> ID：13545412
> 
> 赞同：0
> 
> 时间：2012-11-24T20:45:17.667
> 
> 标签：map, hadoop, mapreduce, reduce

是否可以在映射阶段完成后停止 hadoop 并收集有关中间数据（映射输出/reducer 输入）的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:49:08.670

您可以指定“-reducer NONE”，Hadoop 作业的输出将是映射的输出。更多信息：[Amazon MapReduce 没有减速器作业](https://stackoverflow.com/questions/1985609/amazon-mapreduce-no-reducer-job)

# ajax - 表单中的 Ajax 生成的元素值不会发布到 PHP

> ID：13545413
> 
> 赞同：1
> 
> 时间：2012-11-24T20:45:18.287
> 
> 标签：ajax, forms, post, drop-down-menu

尽管我为 ajax 生成的下拉列表（基于另一个选择）获得了正确的选项，但我没有看到 PHP 脚本的值发布。但是，我看到了来自普通 HTML 元素的所有值（不是由 ajax 生成的）。我错过了什么？

**1\. 我的 scr_ajax.php 脚本生成的 HTML。**- OK
$options 由 SQL 查询生成，结果选择是准确的。这几乎与 drop_down_1 相同。）。

```
<td>Drop Down 2</td>
<td></td>
<td>
<select name="drop_down_2" id="drop_down_2" value="" style="width:100%">
<option></option>
'.$options.'
</select>
</td>'; 
```

**2\. ajax 生成的 HTML 数据的去向..** - OK
正确接收上面的第二个下拉列表的 AJAX 生成的表单元素。）：

```
... 
<tr id="ajaxContent">
</tr>
... 
```

**3.常规'ol提交按钮..** - 不OK
drop_down_1可以在$_POST数据中被捕获，但drop_down_2不能。我知道我在这里遗漏了一些东西..）

```
<input type="submit" value="Submit Request" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:56:48.833

更好地开始将 jquery 用于日常任务。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:28:17.727

**[更新：2012 年 11 月 25 日]**
我现在可以通过使用 jQuery 提交侦听器并填充隐藏字段来组合 HTML 和 AJAX 生成的帖子结果。然而，这似乎更像是一种特殊的技术/解决方法，而不是更直接的方法。

第一，我添加了隐藏的输入元素：

```
<input type="hidden" name="drop_down_2" id="drop_down_2" value="" /> 
```

第二，我添加了 jQuery 提交监听器：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#form_name").submit(function() {
        var field = "drop_down_2";
        var param = document.getElementById(field).options[document.getElementById(field).selectedIndex].value;
        document.forms[0].elements[field].value = param;
    }); 
});
</script> 
```

**[更新：2012** 年 12 月 1 日] 听起来正确的解决方案涉及掌握序列化功能。我将在验证后发布更新。

# java - 通过 Play 中的多对多关系过滤模型对象！2.0

> ID：13545416
> 
> 赞同：0
> 
> 时间：2012-11-24T20:45:55.777
> 
> 标签：java, playframework, playframework-2.0, ebean

我有一个具有多对多关系和函数的简单模型，可以渲染模型页面，如​​下所示。我想知道是否有办法按类别（ManytoMany 字段）过滤项目页面，例如`.ilike("categories", "%" + filter + "%")`

```
public class Item extends Model {
    @Id
    public Long id;

    @ManyToMany(fetch=FetchType.EAGER, cascade=CascadeType.ALL)
    public List<Category> categories = new ArrayList<Category>();

    public String title;

    @Formats.DateTime(pattern="dd/MM/yyyy")
    public Date postDate=new Date();

    public String content;

    public String picture;

    public String price;

    public String url;

    public static Finder<Long,Item> find = new Finder<Long,Item>(
            Long.class, Item.class
          ); 

    public static Page<Item> page(int page, int pageSize, String sortBy, String order, String filter) {
            return
                find.where()
                    .ilike("content", "%" + filter + "%")
                    .orderBy(sortBy + " " + order)
                    .findPagingList(pageSize)
                    .getPage(page);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:02:32.003

这是[几个主题前的类似问题](https://stackoverflow.com/a/13542804/1066240)，您可以使用其中的示例（并检查[关系过滤](https://stackoverflow.com/a/11704403/1066240)的其他可能性）

您的查询应如下所示（查找`Items`哪些包含`Categories`在其名称中包含“某些”单词）：

```
find.where()
        .ilike("categories.name", "%some%")
        .orderBy(sortBy + " " + order)
        .findPagingList(pageSize)
        .getPage(page); 
```

# android - 如何在java中转换十六进制颜色？

> ID：13545421
> 
> 赞同：0
> 
> 时间：2012-11-24T20:46:33.657
> 
> 标签：android, colors, hex

我有十六进制 rgb 颜色和黑白蒙版。这是两个整数数组：

```
mColors = new int[] {
                 0xFFFF0000, 0xFFFF00FF, 0xFF0000FF, 0xFF00FFFF, 0xFF00FF00,
                 0xFFFFFF00, 0xFFFF0000
             };
mColorsMask = new int[] {
                     0xFFFFFFFF, 0xFF000000, 0xFFFFFFFF, 0xFF000000, 0xFFFFFFFF,
                     0xFFFFFFFF, 0xFF000000
                 }; 
```

我需要**根据对比度将颜色转换为****黑色**值。对比度是 0 到 255 范围内的整数值： **![在此处输入图像描述](../Images/7702567e3ba101229c09830484d5fa7d.png)**

 **用**白色**一切都很好，我做了字节加法：

```
int newHexColor = (contrast << 16) | (contrast << 8) | contrast | mColors[i];
newColorsArray[i] = mode; 
```

如何将其转换为黑色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:49:18.767

您可以使用对比度使图像变成黑白。

看代码..

```
public static Bitmap createContrast(Bitmap src, double value) {
    // image size
    int width = src.getWidth();
    int height = src.getHeight();
    // create output bitmap
    Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
    // color information
    int A, R, G, B;
    int pixel;
    // get contrast value
    double contrast = Math.pow((100 + value) / 100, 2);

    // scan through all pixels
    for(int x = 0; x < width; ++x) {
        for(int y = 0; y < height; ++y) {
            // get pixel color
            pixel = src.getPixel(x, y);
            A = Color.alpha(pixel);
            // apply filter contrast for every channel R, G, B
            R = Color.red(pixel);
            R = (int)(((((R / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(R < 0) { R = 0; }
            else if(R > 255) { R = 255; }

            G = Color.red(pixel);
            G = (int)(((((G / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(G < 0) { G = 0; }
            else if(G > 255) { G = 255; }

            B = Color.red(pixel);
            B = (int)(((((B / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(B < 0) { B = 0; }
            else if(B > 255) { B = 255; }

            // set new pixel color to output bitmap
            bmOut.setPixel(x, y, Color.argb(A, R, G, B));
        }
    }

    return bmOut;
 } 
```

在方法调用时将双精度值设置为 50。例如`createContrast(Bitmap src, 50)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T03:23:40.627

您可能会考虑使用 HSB 颜色空间。它似乎更适合您尝试做的事情。特别是，您在“我想要什么”图像中看到那些最终变成黑色的角度？这些对应于 60、180 和 300 度的“色调”（Java 中的 1.0/6、3.0/6 和 5.0/6）。白色对应于 0、120 和 240 度（Java 中的 0、1.0/3 和 2.0/3）——并非巧合的是，这些角度的颜色是原色（也就是说，三个 RGB 分量中的两个是零）。

你要做的是找到你的颜色的色调和最接近的原色之间的差异。（应该小于 1/6。）按比例放大（乘以 6 就可以了），给你一个介于 0 和 1.0 之间的值。这会给你一个“杂质”值，它基本上是与最接近的原色的偏差。当然，从 1.0 中减去的数字会给你“纯度”，或者接近原色。

您可以使用 R、G 和 B 的相应值，alpha 为 1.0f，根据杂质或纯度创建灰度颜色。

```
public Color getMaskColor(Color c) {
    float[] hsv = Color.RGBtoHSB(c.getRed(), c.getGreen(), c.getBlue(), null);
    float hue = hsv[0];

    // 0, 1/3, and 2/3 are the primary colors.  Find the closest one to c,
    // by rounding c to the nearest third.
    float nearestPrimaryHue = Math.round(hue * 3.0f) / 3.0f;

    // difference between hue and nearestPrimaryHue <= 1/6
    // Multiply by 6 to get a value between 0 and 1.0
    float impurity = Math.abs(hue - nearestPrimaryHue) * 6.0f;
    float purity = 1.0f - impurity;

    // return a greyscale color based on the "purity"
    // (for #FF0000, would return white)
    // using impurity would return black instead
    return new Color(purity, purity, purity, 1.0f);
} 
```

您可以使用返回颜色的颜色分量作为“对比度”值，也可以更改函数以使其根据需要返回“纯度”或“杂质”。

请注意，灰度颜色的数学变得不稳定。（Java 计算 HSB 的方式，纯灰色只是没有色调（饱和度 = 0）的红色（色调 = 0）。唯一改变的组件是亮度。）但是因为你的色轮没有灰度颜色......**

# html - 移动 Safari 中的 HTML5 地理位置“权限被拒绝”错误

> ID：13545422
> 
> 赞同：5
> 
> 时间：2012-11-24T20:46:42.313
> 
> 标签：html, geolocation, mobile-safari

我正在创建一个移动网站，它使用 HTML5 地理位置请求用户单击按钮时的当前位置。这在移动 Chrome 中运行良好 - 系统会提示用户分享他们当前的位置，如果他们接受，程序流程会按预期继续。但是，在移动版 Safari 中，永远不会提示用户分享他们的位置，并且浏览器默认显示地理位置的“PERMISSION_DENIED”错误。

就好像用户选择不分享他们的位置，尽管他们从来没有被提示过......

地理位置代码：

```
function geoLocate() {
try{
    if(navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(getUserPosition, handleGeolocateErrors);
    } else {
        alert('your browser does not support geolocation');
    }
} catch(evt) {
    alert(evt);
}

} 
```

错误处理：

```
function handleGeolocateErrors(error) {
switch(error.code) {
    case error.PERMISSION_DENIED: alert('User did not share location'); break;
    case error.POSITION_UNAVAILABLE: alert('Unable to get position'); break;
    case error.TIMEOUT: alert('Request timed out'); break;
    default: alert('An error occured'); break;
}
} 
```

# ruby-on-rails - 如何使用 Devise 创建两步注册流程？

> ID：13545425
> 
> 赞同：2
> 
> 时间：2012-11-24T20:47:01.157
> 
> 标签：ruby-on-rails, devise

例如，在 Twitter.com，用户可以输入他们的全名、电子邮件和密码以在主页上“注册”.. 然后重定向到另一个注册页面，在那里他/她可以进一步输入更多详细信息（用户名, 接受 T&C 等)

如何将注册过程分成两页或更多页？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:22:03.517

您可能想尝试将其更多地视为第一页注册（创建操作），第二页添加更多信息（编辑操作）。

您可以将第一页设置为真正的注册页面，他们可以在其中输入全名、电子邮件和密码。提交（并自动登录）后，他们将被重定向到修改后的编辑页面，在那里他们可以向他们的帐户添加其他信息（用户名、接受 T&C 等）。这样你就可以坚持 CRUD。

# java - 如何验证 Facebook 个人资料图片上次更新时间？

> ID：13545426
> 
> 赞同：0
> 
> 时间：2012-11-24T20:47:02.920
> 
> 标签：java, android, facebook, facebook-fql

我有一个简单的 android 应用程序，它通过 FQL 查询与 Facebook 交互。

当应用程序第一次加载时，我运行一个 FQL 查询来检索用户的朋友数据和个人资料图片，并将其保存在本地设备上。

当应用程序第二次加载时，我正在从手机中检索数据。

我的问题是我如何知道用户的每个朋友的个人资料图片上次修改时间是什么？

我只想在需要时重新获取个人资料图片。

在此先感谢，Oz Radiano。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:56:55.463

我想您还可以存储个人资料图片 ID（或对其进行哈希处理，更好）并将其与之前存储的 ID 进行比较。如果它们不同，您应该下载新图片。

# php - Save to MySQL serialized info with quotes

> ID：13545427
> 
> 赞同：5
> 
> 时间：2012-11-24T20:47:08.273
> 
> 标签：php, mysql, serialization, quotes

Trying to save serialized string to SQL, but then i am having problems with unserializing it because of quotes.

Example, string is "te'st", after serialize we have

```
s:5:"te'st"; 
```

But to save it to SQL we need to add slashes, and i am doing

```
serialize(addslashes($string)) 
```

after this, in our MySQL db we have

```
s:6:"te'st"; 
```

And this is the problem. s:6 means we have 6 symbols string, but our "te'st" is only 5, so when we trying to unserialize it, we getting error.

How to solve it? Tried **htmlspecialchars** and **mysql_real_escape_string**

Update:

How i use **mysql_real_escape_string**

```
 mysql_query("INSERT INTO `table`(`string`) VALUES ('" . serialize(array('iId' =>$aSqlResult['typeID'], 'sName' => mysql_real_escape_string($sScanResultLine))) . "')"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T20:52:53.083

You should pass the data through the escape function *after* the serialization, not *before* - which is what you are doing now.

```
$serialized = mysql_real_escape_string(serialize($data)); 
```

Use a parameterised query with PDO or MySQLi and you can forget about the escaping altogether.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T20:55:00.407

You're making a mistake I've seen many making. A bit of a fundamental misunderstanding of how escaping functions and should be used.

You cannot simply chain escape functions and end up with something that's perfect for any context. Your mistake is simple..

You're doing two things:

1.  Serializing an object ( a string in this case )
2.  Saving that into the database.

So before you save it to the database, you must make sure that your value is properly escaped. DO THIS WITH MYSQLI! The mysql_ functions are dead.

The equivalent is [mysqli::real_escape_string](http://de2.php.net/manual/en/mysqli.real-escape-string.php).

But most importantly.. (sorry for dragging this on)..

`serialize` modifies the output, it can return a whole bunch of things.. quotes, `0x00`'s and this is not allowed in mysql queries.

So `real_escape_string` must obviously be the last step! First serialize, and the escape the output of that function. You did the exact opposite.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T20:51:02.053

In your case the `mysql_real_escape_string()` is the way to go. It have to work, unless you did it somehow wrong (**note: you need to be connected to DB before calling that function**). And in fact you should use `mysqli_` or `PDO`, not a `mysql_` extension which is now deprecated. Using `htmlspecialchars()` is simply using wrong tool for the task.

Code should be like this:

```
mysql_real_escape_string( serialize( $string ) ); 
```

# c# - Facebook 权限错误

> ID：13545429
> 
> 赞同：1
> 
> 时间：2012-11-24T20:47:10.020
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk

```
public Form1()
        {
            InitializeComponent();

            // The application key of the Facebook application used
            fbService.ApplicationKey = "XXXXXXXXXXX";

            // Add all needed permissions
            List<Enums.ExtendedPermissions> perms = new List<Enums.ExtendedPermissions>
            {
               Enums.ExtendedPermissions.none
        };
            fbService.ConnectToFacebook(perms);   //error here (The given key was not present in the dictionary.)         
        } 
```

我提到了我收到错误的错误，因为我是 facebook api 的新手，特别是 c# 的新手，任何解释的答案都是适用的 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:50:43.163

像这样在 FacebookClient 上使用静态方法：

```
FacebookClient.SetDefaultHttpWebRequestFactory(uri => {
    var request = new HttpWebRequestWrapper((HttpWebRequest)WebRequest.Create(uri));
    request.Proxy = ......; // normal .net IWebProxy
    return request;
}); 
```

另请参阅此答案：[Facebook SDK 代理设置 C#](https://stackoverflow.com/questions/12251150/facebook-sdk-proxy-setting-c-sharp)

# xslt-1.0 - XSLT 删除与属性值不匹配的节点

> ID：13545430
> 
> 赞同：1
> 
> 时间：2012-11-24T20:47:12.603
> 
> 标签：xslt-1.0

如果某些属性值不匹配，我正在尝试从 xml 中删除节点。这是我的 XML：

```
<CONFIGURATIONS>
<CONFIG1 DOMAIN="CAE" FOCUS="IN" STATUS="ACTIVE" >
    <ATTR>1<ATTR>
</CONFIG1>
<CONFIG1 DOMAIN="CAE" FOCUS="OUT" STATUS="INACTIVE" >
    <ATTR>2<ATTR>
</CONFIG1>
    <CONFIG1 DOMAIN="CAE" FOCUS="OUT" STATUS="ACTIVE" >
    <ATTR>2<ATTR>
</CONFIG1>
    <CONFIG1 DOMAIN="MFG" FOCUS="OUT" STATUS="ACTIVE" >
    <ATTR>3<ATTR>
</CONFIG1>
</CONFIGURATIONS> 
```

我想删除没有 DOMAIN 值的节点作为 CAE 并且 FOCUS 不是 OUT 并且 STATUS 不是 ACTIVE。

```
<CONFIGURATIONS>    
    <CONFIG1 DOMAIN="CAE" FOCUS="OUT" STATUS="ACTIVE" >
    <ATTR>2<ATTR>
</CONFIG1> 
```

我正在使用以下 xslt：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes"/>
    <xsl:template match="node()|@*">
         <xsl:copy>
              <xsl:apply-templates select="node()|@*"/>
          </xsl:copy>
    </xsl:template>
    <xsl:template match="SM_CONFIG_ITEM [@DOMAIN !='CAE' and @FOCUS !='OUT' and @STATUS != 'INACTIVE']"/>
</xsl:stylesheet> 
```

但它没有产生所需的输出。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:48:09.820

> ```
> <xsl:template match="SM_CONFIG_ITEM [@DOMAIN !='CAE' and @FOCUS !='OUT' and @STATUS != 'INACTIVE']"/> 
> ```
> 
> 但它没有产生所需的输出。我究竟做错了什么？

您希望在满足其中一个条件时匹配元素——*但*`!=`上述匹配模式指定必须满足*所有*条件。`!=`

**解决方案**：

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "CONFIG1[not(@DOMAIN='CAE' and @FOCUS='OUT' and @STATUS='ACTIVE')]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<CONFIGURATIONS>
    <CONFIG1 DOMAIN="CAE" FOCUS="IN" STATUS="ACTIVE" >
        <ATTR>1</ATTR>
    </CONFIG1>
    <CONFIG1 DOMAIN="CAE" FOCUS="OUT" STATUS="INACTIVE" >
        <ATTR>2</ATTR>
    </CONFIG1>
    <CONFIG1 DOMAIN="CAE" FOCUS="OUT" STATUS="ACTIVE" >
        <ATTR>2</ATTR>
    </CONFIG1>
    <CONFIG1 DOMAIN="MFG" FOCUS="OUT" STATUS="ACTIVE" >
        <ATTR>3</ATTR>
    </CONFIG1>
</CONFIGURATIONS> 
```

**产生想要的正确结果**：

```
<CONFIGURATIONS>
   <CONFIG1 DOMAIN="CAE" FOCUS="OUT" STATUS="ACTIVE">
      <ATTR>2</ATTR>
   </CONFIG1>
</CONFIGURATIONS> 
```

# java - 在 JUnit 测试中使用旧实例

> ID：13545431
> 
> 赞同：1
> 
> 时间：2012-11-24T20:47:20.000
> 
> 标签：java, junit, robotium

我尝试使用不同的实例进行测试，但始终使用第一个。在第二次测试期间，显示的是第一个实例的内容。我不知道去哪里找。

```
public class MyActivityTest extends
    ActivityInstrumentationTestCase2<MyActivity> {

private Solo solo;  

public MyActivityTest() {
    super(MyActivity.class);
}

protected void setUp() throws Exception {
    super.setUp();
    Authentication.setSessionId("mysessionid", this.getInstrumentation()
            .getTargetContext().getApplicationContext());
    solo = new Solo(getInstrumentation(), getActivity());
}

public void testFailFetching() {

    CommunicationFactory.setInstance(MyActivityData.FALSE_QUIZCOMM_DEFAULT);

    //some Solo tests

}

public void testSucceedFetching() {

    CommunicationFactory.setInstance(MyActivity.CORRECT_QUIZCOMM_DEFAULT);

    //some Solo tests

}

@Override
protected void tearDown() throws Exception {
    CommunicationFactory.setInstance(null);
    super.tearDown();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:50:09.153

该`setUp()`方法将在每次测试之前调用。如果它在没有抛出异常的情况下完成（这可能会中止您的测试），则将`solo`为每个测试重建您的变量。以下测试代码演示了这一点：

```
public class ExampleTest extends TestCase {
  private static int num = 1;

  private Foo foo;  

  @Override
  protected void setUp() throws Exception {
    super.setUp();
    foo = new Foo(num++);
  }

  public void testA() {
    foo.printNum();
  }

  public void testB() {
    foo.printNum();
  }

  private static class Foo {
    private final int num;

    public Foo(int num) {
      this.num = num;
    }

    public void printNum() {
      System.out.println(num);
    }
  }
} 
```

这打印：

```
1
2 
```

`Solo`在单独的测试中，对象可能彼此*相等。*但它们不会是*同一个*对象。

# javascript - ACE 编辑器中的自动补全

> ID：13545433
> 
> 赞同：46
> 
> 时间：2012-11-24T20:47:30.813
> 
> 标签：javascript, html, autocomplete, syntax-highlighting, ace-editor

我发现了类似的问题：[Ace Editor autocomplete and multiple languages](https://stackoverflow.com/questions/7938985/ace-editor-autocomplete-and-multiple-languages)

但回应是 ACE 不支持自动完成功能，并且根据 [Google 小组的 Ace 编辑器](https://groups.google.com/forum/?fromgroups#!topic/ace-discuss/Qy27HtaYCMQ%5C)的说法，“我希望 Ace 能够使用它，而 Cloud9 确实需要它”。

这篇文章已经有一年了，正如你所看到的，cloud9 现在支持自动完成： [https ://c9.io/site/features/](https://c9.io/site/features/)

那么默认情况下，Ace Editor 中是否提供自动补全功能？我找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-11-01T15:59:16.880

自动完成现在是 API 的官方部分。启用它需要 3 行代码：

```
ace.require("ace/ext/language_tools");
var editor = ace.edit("editor");
editor.setOptions({
    enableBasicAutocompletion: true
}); 
```

根据您使用 require-js 的设置，您可能还需要在页面的 html 中包含一个额外的 javascript 文件：

```
<script src="ace/ext-language_tools.js"></script> 
```

[您可以在https://github.com/ajaxorg/ace/blob/master/demo/autocompletion.html](https://github.com/ajaxorg/ace/blob/master/demo/autocompletion.html)找到演示

这是我刚刚写的关于这个主题的维基页面：

[https://github.com/ajaxorg/ace/wiki/How-to-enable-Autocomplete-in-the-Ace-editor](https://github.com/ajaxorg/ace/wiki/How-to-enable-Autocomplete-in-the-Ace-editor)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-01-07T21:18:39.307

由于自动完成现在是[ACE](http://ace.c9.io/) api 的一部分：

1)在 html 顶部包含[ace.js ：](https://github.com/ajaxorg/ace/blob/master/lib/ace/ace.js)

```
 <script type="text/javascript" src="js/ace.js"></script> 
```

2）还包括您的[模式](https://github.com/ajaxorg/ace-builds/tree/01387134306d44415871cbb9da91652b752f195f/src)（语言类型）：

```
 <script type="text/javascript" src="js/mode-yaml.js"></script> 
```

3）还包括你的[主题](https://github.com/ajaxorg/ace-builds/blob/01387134306d44415871cbb9da91652b752f195f/src-noconflict/theme-monokai.js)：

```
 <script type="text/javascript" src="js/theme-monokai.js"></script> 
```

4) 还包括[ex-language_tools.js](https://github.com/ajaxorg/ace-builds/blob/01387134306d44415871cbb9da91652b752f195f/src/ext-language_tools.js)：

```
 <script src="js/ext-language_tools.js"></script> 
```

5）使用 id 编辑器添加您的 div（这将成为您的[IDE](http://en.wikipedia.org/wiki/Integrated_development_environment)）：

```
 <div id="editor"></div> 
```

6）包括以下脚本（请参阅我的评论以了解它们）：

```
 <script>
    var langTools = ace.require("ace/ext/language_tools"); 
```

下面的行将 id="editor" 的 div 转换为编辑器

```
 var editor = ace.edit("editor"); 
```

下面的行设置颜色主题。此处可用的其他主题...[在](http://ace.c9.io/tool/mode_creator.html)[此处](https://github.com/ajaxorg/ace-builds/tree/01387134306d44415871cbb9da91652b752f195f/src)尝试

```
editor.setTheme("ace/theme/monokai"); 
```

下面的行根据编程语言设置模式......这里的其他模式：

```
editor.getSession().setMode("ace/mode/yaml");

    editor.setShowPrintMargin(false); 
```

下面的行会实时打开自动完成功能。

```
editor.setOptions({
    enableBasicAutocompletion: true,
    enableSnippets: true,
    enableLiveAutocompletion: false
}); 
```

**因此，整个事情可以分为以下几部分：**

```
<!DOCTYPE html>
<html>
<head>
  <title>IDE AUTOCOMPLETE</title>
  <link rel="stylesheet" type="text/css" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.min.css">
  <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
  <script type="text/javascript" src="js/ace.js"></script>
  <script type="text/javascript" src="js/mode-yaml.js"></script>
  <script type="text/javascript" src="js/theme-monokai.js"></script>
  <script src="js/ext-language_tools.js"></script>
</head>
<body>
  <!-- EDITOR SECTION BELOW! -->
  <div id="editor"></div>
  <script>
    var langTools = ace.require("ace/ext/language_tools");
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/yaml");
    editor.setShowPrintMargin(false);
    editor.setOptions({
        enableBasicAutocompletion: true,
        enableSnippets: true,
        enableLiveAutocompletion: false
    });
  </script>
  <!-- EDITOR SECTION ABOVE -->
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-10T18:31:48.520

Ace 本身仍然无法使用自动完成功能，但是我们已经为基于 Ace 且完全开源的[Codiad IDE](http://codiad.com/)实现了一个组件。您可以在[Github](https://github.com/Codiad/Codiad/blob/master/components/autocomplete/init.js)上查看代码，它肯定会帮助您编写自己的代码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-12-09T15:37:39.770

注意，要实现自定义完成逻辑，您可以在`enableBasicAutocompletion`.

见[jsfiddle](https://jsfiddle.net/klesun/e48d75np/1/)

```
<!-- integrity removed for example sake -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-language_tools.js"></script>

<script>
const editor = ace.edit('some-ace-editor-holder-div-id');
editor.setOptions({
  enableBasicAutocompletion: [{
    getCompletions: (editor, session, pos, prefix, callback) => {
      // note, won't fire if caret is at a word that does not have these letters
      callback(null, [
        {value: 'hello', score: 1, meta: 'some comment'},
        {value: 'world', score: 2, meta: 'some other comment'},
      ]);
    },
  }],
  // to make popup appear automatically, without explicit _ctrl+space_
  enableLiveAutocompletion: true,
});
</script> 
```

[![在此处输入图像描述](../Images/159a6078cc841a2bd8aff75a99994ef1.png)](https://i.stack.imgur.com/0YINA.png)

信息[来源](https://github.com/securingsincity/react-ace/issues/69#issuecomment-354134011)

另请参阅[此](https://stackoverflow.com/a/44772708/2750743)和[此](https://stackoverflow.com/a/24652084/2750743)答案

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-04T17:12:55.057

**AjaxOrg**已在其**Cloud9**存储库中推送了一个提交，并带有以下消息：

> 代码补全插件

我认为这将是这个问题的答案。

[**这**](https://github.com/ajaxorg/cloud9/commit/09f2ada631c07e1ed1925916c959f6903215f93d)是提交。

* * *

另外，我认为[**这**](https://github.com/cucumber/gherkin-editor)是一个可以帮助我们的好项目。

有关更多信息，我们可以关注[**Cloud9 存储库中打开的此问题**](https://github.com/ajaxorg/ace/issues/110)的消息。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-11-15T07:26:41.230

确保有以下进口

```
require('ace/ext/language_tools'); 
```

根据需要在代码段下使用

```
editor.setOptions({
            enableBasicAutocompletion: true,
            enableSnippets: true,
            enableLiveAutocompletion: true
        }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-24T21:46:45.397

目前它不以任何形式提供。根据这个问题： [https ://github.com/ajaxorg/ace/issues/1031](https://github.com/ajaxorg/ace/issues/1031)

自动完成功能仅在 Cloud9 IDE（基于 ACE）中可用，**以后**可能会作为 ACE 编辑器的单独插件提供。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-22T07:30:01.980

将此添加到您的已安装：

```
this.aceEditor.setOptions({
        enableSnippets: true,
        enableLiveAutocompletion: true,
        enableBasicAutocompletion: true
      }) 
```

# pascal - FreePascal 中的闰年

> ID：13545434
> 
> 赞同：1
> 
> 时间：2012-11-24T20:47:34.497
> 
> 标签：pascal, freepascal, leap-year

输入 - 年份

输出 - 闰年与否

我努力了

```
Program LeapYear;

var  
    Year:Integer

begin

    writeln('Insert year');
    readln(Year)

    if Year MOD 4 = 0 and Year MOD 100 = 0 and not Year MOD 400 = 0 then
        begin
            writeln(Year,'is leap year')
        end
    else
        begin
            writeln(Year,'is not leap year')
        end

end. 
```

但这不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:54:46.143

你的算法是错误的。它应该是：

```
if (year mod 400 = 0) or ((year mod 4 = 0) and not (year mod 100 = 0)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T14:51:06.140

该[`IsLeapYear`](http://orion.lcg.ufrj.br/RPMS/myrpms/lazarus/fpc-lazarus-doc/rtl/sysutils/isleapyear.html)函数已在`datih.inc`文件中定义，因此您无需编写自己的版本，只需添加`sysutils`单元即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-20T17:35:04.333

希望能帮助到你：

```
if((a MOD 4) = 0) and ((a MOD 100) = 0) and ((a MOD 400) = 0) then y:=true 
else y:=false; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-06-18T11:47:03.120

`Program LeapYear`;

`Uses crt;`

```
var 
```

`Year:Integer;`

```
 begin

clrscr;
  writeln('Insert year');
readln(Year);

if (Year MOD 4 = 0)then 
  writeln(Year,'is leap year');
If (Year Mod 4 >=1 ) Then 
  writeln(Year,'is not leap year') 
```

结尾。

# javascript - Highstock 为不同的标记设置不同的颜色

> ID：13545436
> 
> 赞同：0
> 
> 时间：2012-11-24T20:47:54.370
> 
> 标签：javascript, highcharts, highstock

我正在尝试在 Highstock 中开发一个图表，其中每个标记都有一个单独的颜色。当我将我的数据推送到这样的数组中时：

```
 series.data.push([ 
       parseInt(Math.round(myDate.getTime())),
       parseInt(Math.round(myDate.getHours()))
       ]); 
```

数据显示正确，但是当我尝试像这样在每个数据对象中设置颜色时，显示点不起作用。

```
 series.data.push([ {          
          x:   parseInt(Math.round(myDate.getTime())),
          y:   parseInt(Math.round(myDate.getHours())),
          marker:{fillColor: 'red'}} ]); 
```

我错过了什么？

**更新**：当我用萤火虫检查它时，我可以看到图表对象中的系列设置正确。那为什么它现在出现了？：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:01:45.733

这应该工作

```
series.data.push([ {          
    x:   parseInt(Math.round(myDate.getTime())),
    y:   parseInt(Math.round(myDate.getHours())),
    marker:{
       enabled:true,
       fillColor:'red',
       states:{
        enabled:true,
        fillColor:'red' 
       }
    } 
} ]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:16:40.437

我解决了我的问题。手动创建图表后，我必须更改 for 循环中的每个标记。它看起来像这样：

```
 chart2.series[0].data[i].update(
                {
                    y: chart2.series[0].data[i].y,
                    marker: {
                        enabled: true,
                        fillColor: myColor,
                        states: {
                            hover: {
                                enabled: true,
                                fillColor: "black"
                            }
                        }
                    }
                }
                ,false,false);
    }

    chart2.redraw(); 
```

# google-app-engine - 使用 Skue 或类似框架在 google-app-engine 上构建 REST API

> ID：13545437
> 
> 赞同：1
> 
> 时间：2012-11-24T20:47:58.020
> 
> 标签：google-app-engine, rest, python-2.7

在寻找构建 REST API 的方法时，我找到了`skue`(https://code.google.com/p/skue/)。但是，网站上没有太多信息。我的计划是严格按照以下方式构建一个rest api：

```
Models << Business logics << Restful Resources. 
```

这意味着：模型只能由`business logic`; `restful resources`接口是客户端可以直接访问的唯一层。我指定所有这些是为了避免人们建议使用`appengine-rest-server`.

我的问题是：有没有人成功使用过 Skue？如果是这样，您有什么不介意分享的例子吗？`GET`就`POST`足够了，但欢迎更多。如果没有`Skue`，是否有任何框架允许在 google-app-engine 之上构建这样的 rest-apis？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:07:01.377

为什么不直接使用 json.loads() 并获取字典？在 python 中（与 Java 不同）字典是一等公民。

作为一名经验丰富的 Java 程序员，当我转向 Python 时，我很想将所有数据加载到我在其他地方定义的对象中，但我发现在 python 中获取字典并使用它是完全可以的。传递字典并在许多地方使用它们要容易得多（例如作为方法中的关键字参数）。只需使用更多测试...

在 python 中，您正在将静态编译检查移向动态单元测试检查，这在 pythonic 方式中是完全可以的。

# .net - 如果我从 .NET 4.0 升级到 4.5 会有什么问题吗

> ID：13545438
> 
> 赞同：25
> 
> 时间：2012-11-24T20:48:00.803
> 
> 标签：.net, upgrade, .net-4.5

我有一个在 .NET 4.0 上结合使用 MVC 和 WebForms 的现有 Web 应用程序。我想升级到 4.5 以利用 EF 5 中的一些新功能（需要 4.5）。希望防止破坏现场站点的几个问题：

1.  当我将 .NET 4.5 安装到托管服务器时，它会取代 4.0，还是我的 4.0 应用程序会继续以 4.0 模式运行，直到我更改它们
2.  4.5 中是否有任何可能使我的 4.0 应用程序脱机的重大更改
3.  如果事情变糟，我可以退出安装 4.5 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T02:26:56.557

1.  安装 4.5 后，之前使用 4.0 的所有内容都将使用 4.5。
2.  存在一些兼容性问题。 [优雅代码描述了我们在升级到 4.5 时遇到的问题](http://elegantcode.com/2012/08/23/net-4-5-operation-could-destabilize-the-runtime-yikes/)
3.  您必须卸载 4.5，然后重新安装 4.0 才能退出 4.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:30:49.707

如果这对您很重要，您应该注意的一个小问题是：

Visual Studio 2010 和 Visual Studio 2012 共享解决方案和项目文件的格式，这使得不都使用相同浏览器版本的团队或透明升级变得非常容易。

但是，一旦您将项目绑定到 .NET 4.5，Visual Studio 2010 将无法打开或编辑该项目。

当我切换到 .NET 4.5 时，为了获得对一些新的 HttpListener 功能的访问权限，我很难学到这一点，并且失去了对 Visual Studio 2010 和我旧 Rescharper 许可证的访问权限。

# javascript - 比 Google Map V3 上的 setTimeout 更好的方法

> ID：13545440
> 
> 赞同：1
> 
> 时间：2012-11-24T20:48:03.377
> 
> 标签：javascript, map, settimeout, marker, geocode

在我使用 setTimeout 摆脱地理编码器 OVER_QUERY_LIMIT 的 Asp.net Web 应用程序中，较短的超时时间是 10 毫秒，这对我来说太长了，我有 800 个以上来自 SQL SERVER 的地址，由于这个 setTimeout 会增加大约需要 5 到 7 分钟才能取代地图上的所有标记，这令人沮丧。我研究并看到了这个链接[setTimeout: how to get the shortest delay](http://ajaxian.com/archives/settimeout-delay)

但无法弄清楚他实际上想做什么。请有人指导我....

```
 function InitializeMap() {       
    // Here am calling the webService by PageMethods in which CityNames, Countries Name will take their places 
    PageMethods.GetCitiesbyUser_Extender(onSucess);

    var myOptions =
    {
       zoom: 0, 
        center: new google.maps.LatLng(-34.397, 150.644),
        mapTypeId: google.maps.MapTypeId.ROADMAP,

    };
    var map = new google.maps.Map(document.getElementById("map"), myOptions);
    // Creating latlngbound to bound the markers on map
    var bounds = new google.maps.LatLngBounds(); 

    //// Creating an array that will contain the addresses 
    var places = []; 
    // Creating a variable that will hold the InfoWindow object 
    var infowindow; 
    // create this to add the marker Cluster on map
    mc = new  MarkerClusterer(map);
    var popup_content = [];
    var geocoder = new google.maps.Geocoder(); 
    // image for ballon i want to change default ballon to this
    var iconimage = "http://chart.apis.google.com/chart?cht=mm&chs=24x32&chco=FFFFFF,008CFF,000000&ext=.png";        
    var markers = [];

    // Create this function for passing the values which was taken by webservice cntName is the return in webservice 
    function onSucess(cntName){
    // loop through the cntName to pass the individual City one by one from geocode
        for (i = 0; i < cntName.length; ++i) {
               //for  fixing the issue use closure to localize the cntName[i] variable before passing into geocode and callback function within it.
            (function CreateMarkAndInfo(address) {
                geocoder.geocode({ 'address': address },
                    function (results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            places[i] = results[0].geometry.location;

                            var marker = new google.maps.Marker({
                                position: places[i],
                                title: results[0].formatted_address,
                                map: map,
                                icon: iconimage
                            });

                            markers.push(marker);
                            mc.addMarker(marker);
                            google.maps.event.addListener(marker, 'click', function () {
                                if (!infowindow) {
                                    infowindow = new google.maps.InfoWindow();
                                }

                                // Setting the content of the InfoWindow afterward
                                infowindow.setContent(popup_content[i]);

                                // Tying the InfoWindow to the marker afterward
                                infowindow.open(map, marker);
                            });

                            // Extending the bounds object with each LatLng 
                            bounds.extend(places[i]);

                            // Adjusting the map to new bounding box 
                            map.fitBounds(bounds);
                            // Zoom out after fitBound
                            var listener = google.maps.event.addListenerOnce(map, "idle", function () {
                                if (map.getZoom() < 10) map.setZoom(2);

                            });
                        }
                        else {
                            // if geocode will end the limit then make delay by timer in order to avoid the OVER_QUERY_LIMIT
                            if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {
                                setTimeout(function () { CreateMarkAndInfo(address); }, (15)); // here i think i should use better approch but for now it`s ok.                                   
                            }

                            else {
                                alert("Geocode was not successful for the following reason: " + status);
                            }  
                        }                            
                    });

            })(cntName[i]);// End closure trick     
        }  
    }
}
google.maps.event.addDomListener(window, 'load', InitializeMap); 
```

**编辑：** @just.another.programmer 我不能，因为 DB 中没有纬度和经度，客户将自己添加城市和国家，这就是为什么我必须通过地理编码和地理编码来转换城市和国家名称来准确地完成它的工作我如何通过网络服务调用城市和国家名称

```
 [System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod()]
    public static string[] GetCitiesbyUser_Extender()
    {       
        System.Data.DataSet dtst = new System.Data.DataSet();
        string ses = HttpContext.Current.Session["UserName"].ToString();
        USTER.Dal.clsSearch clssearch = new USTER.Dal.clsSearch();
        // Assinging the Stroed Procedure Method to DataSet
        dtst = clssearch.GetAllCitiesByUser(ses);
        string[] cntName = new string[dtst.Tables[0].Rows.Count];
        int i = 0;
        try
        {
            foreach (System.Data.DataRow rdr in dtst.Tables[0].Rows)
            {
                // Columns Name in SQL Server Table "CityName" and "CountryName"
                cntName.SetValue(rdr["CityName"].ToString() +","+ rdr["CountryName"].ToString() , i);
                i++;
            }
        }
        catch { }
        finally
        {

        }
        return cntName;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:52:02.073

首次获取地址时对地址进行一次地理编码，然后将纬度/经度存储在您的数据库中，这样您就不必再次进行地理编码。这将*大大*减少您的地理编码请求并消除对`setTimeout`.

# java - Java中的if语句正则表达式

> ID：13545441
> 
> 赞同：-2
> 
> 时间：2012-11-24T20:48:08.410
> 
> 标签：java, regex, if-statement

我想扫描 txt 文件并查找 if 语句（**如果**不是 SOMETHINGifSOMETHING）。

我是这么想的

```
 [\\W|\\s]*if[\\s*|\\(] 
```

但它不起作用。

如果正则表达式，请帮我做对。

```
class Test {
  public static void main(String[] args) {
    // if (x > 10) a = b;
    int pif = 2;  // if
    int ifa = 3;
    int ifff;
    int kif;
    int cif;
    /*
     if
    */       

    int a = 0, b = 0, c;

    if (a > b) c = 1;  // wariant jest subwariantem
    if(a > b) c = 1;if (a<b) c=1; if(a==b) c= 7;
    if (a>b) c =1; else if (a==b) c=2;
    if (a>b) c =1; else {if(a==b) c=2;}
    if
    (a<b) c = 7;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:58:45.713

你可以试试这个：

```
[;\s]+if[\s*|\(] 
```

它不会知道哪些被注释掉了，但它会找到所有的“if”而不是捕获所有的 somethinfIfSomethings。

# ruby-on-rails - 将保管箱文件列表与 Ruby on Rails 3 中表的内容进行比较的最快最有效的方法是什么？

> ID：13545442
> 
> 赞同：0
> 
> 时间：2012-11-24T20:48:12.730
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, carrierwave, dropbox-api

我已经完成了这项工作，但是对于十几个左右的文件来说，它的速度非常慢（到了超时的程度）。

它从 Dropbox 中获取目录列表，并将其与表的内容进行比较。我想对此进行优化，使其尽可能快速有效地运行。我知道每次查询都不是最佳的，但我认为主要的延迟是在`Photo.create`方法期间，因为它将文件从保管箱文件夹复制到 Amazon S3（通过`carrierwave gem`）。我正在考虑花时间进行操作，以了解延迟的来源。对于包含 10 个文件的文件夹，加载页面需要一分钟多的时间。奇怪的是，即使它跳过这些文件也需要这么长时间，因为它们已经存在，这对我来说毫无意义。

这是我的控制器代码：

```
def sync
    photo_size = 1024
    @event = Event.find(params[:id])

    @client = Dropbox::API::Client.new(:token  => 'derp', :secret => 'herp')
    @dropbox_files = @client.ls "images/#{@event.keyword}/#{photo_size}/"

    @existing_photos = @event.photos.all
    @data = []

    # TODO: need to make it not add files multiple times

    @dropbox_files.each do |f|

      photo_exists = Photo.where(:dropbox_path => f.direct_url.url).count
      if photo_exists == 0
        @photo = Photo.create(:remote_filename_url => f.direct_url.url, 
                              :dropbox_path => f.direct_url.url,
                              :event_id => @event.id)
        @data << "Added: #{f.direct_url.url.split('/').last}"
      else
        @data << "Skipped: #{f.direct_url.url.split('/').last}"
      end
    end
  end 
```

理想情况下，我想将每个`Photo.create`调用分成一个异步请求，但这可能是一个完整的“没什么”。现在，如果它可以处理从 100 张照片中添加 5 张照片而不会超时的东西，我会很高兴。

做这个的最好方式是什么？我是一名 PHP 程序员，刚接触 RoR3。请帮忙。谢谢！

注意：目前，这会输出到屏幕，但最终它将成为后台操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:40:39.177

我有几件事你可以试试。我不熟悉 Dropbox API，但您应该能够弄清楚：

存储上次同步的日期，并仅检索新的或更改的文件。

将您的方法提取`sync`到一个新类中 - 控制器可能不是此职责的最佳选择。这是一个如何做到这一点的示例：

```
class EventSync
  attr_reader :event

  def initialize(event_or_id)
    @event = Event.find(event_or_id)
  end

  def sync
    dropbox_files.each do |f|
      process_file(f)
    end
  end

  private
    def photo_size
      1024
    end

    def process_file(file)
      event.photos.where(dropbox_path: file.direct_url.url).first_or_create do |file|
        file.remote_filename_url = file.direct_url.url
      end 
    end

    def client
      @client ||= Dropbox::API::Client.new(:token  => 'derp', :secret => 'herp')
    end

    def dropbox_files
      @dropbox_files ||= client.ls "images/#{event.keyword}/#{photo_size}/"
    end

end 
```

这将像这样使用：`EventSync.new(params[:event_id]).sync`.

通过将其拆分为许多较小的方法，基准测试将更容易（您可以单独测试每种方法），这意味着您将能够更好地确定减速的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:26:04.473

在我尝试 Zach 的方法之前，这就是我现在的工作方式。

在控制器中：

```
 def syncall
    #TODO: Refactor sync and syncall
    photo_size = 1024
    @event = Event.find(params[:id])

    new_image_dir = "images/#{@event.keyword}/#{photo_size}/"
    @client = Dropbox::API::Client.new(:token  => 'uuzpqar2m5839eo', :secret => 'nr9tmx0vc8qh892')
    @dropbox_files = @client.ls new_image_dir
    start = Time.now  

    existing_photos = @event.photos.all
    @data = []
    photo_list = []

    existing_photos.each do |ep|
      filename = URI.unescape(ep.dropbox_path.split('/').last) #dropbox_path is url encoded...
      photo_list << filename
    end
    @data << photo_list

    skipped_files = 0

    @dropbox_files.each do |f|
      sql_start = Time.now
      db_filename = f.path.split('/').last

      if photo_list.include? db_filename 
        skipped_files += 1
      else
        pc_start = Time.now
        if db_filename.split('.').last == 'jpg'
          db_path = f.direct_url.url
          @photo = Photo.create(:remote_filename_url => db_path, 
                                :dropbox_path => db_path,
                                :event_id => @event.id)
          @data << "#{db_filename} added in #{Time.now - pc_start} seconds"
        else
          @data << "#{db_filename} was skipped in #{Time.now - pc_start} seconds"
        end
      end
    end    
    @data << "Total Time: #{Time.now - start} (#{skipped_files} skipped.)"
  end 
```

这样，如果没有要添加的文件，则只有一个查询运行。另一个问题是`direct_url.url`调用非常繁重，因为每次调用它都会连接到保管箱。

每张跳过的照片从大约 2 秒变为 0.01 秒，每张上传的照片从 5-7 秒变为 2-4 秒。我还是更喜欢 Zach 的方法，所以我现在要试试。

# php - wordpress 在每个页面分页中显示相同的帖子

> ID：13545444
> 
> 赞同：1
> 
> 时间：2012-11-24T20:48:20.510
> 
> 标签：php, wordpress

我进行了分页，但它不能正常工作，在每个页面中都显示相同的帖子。

代码：

```
<?php if ( have_posts() ) : ?>
    <?php $query = new WP_Query( array('post_type' => 'post', 'kalba' => 'Lietuviu', 'posts_per_page' => 2) );?>
    <?php while ( $query->have_posts() ) : $query->the_post();?>
        <h2 class="title"><a href ="<?php the_permalink();?>"><?php echo $query->post->post_title;?></a></h2>
        <div class="date"><?php echo mysql2date('Y-m-d', $query->post->post_date);?></div>
        <div class="post"><p><?php echo $query->post->post_content;?></p></div>
    <?php endwhile;?>
    <? $big = 999999999; // need an unlikely integer
        echo paginate_links( array( 'base'    => str_replace( $big, '%#%', get_pagenum_link( $big ) ),
                            'format'  => '?paged=%#%',
                            'current' => max( 1, get_query_var( 'paged' ) ),
                            'total'   => $query->max_num_pages,
                            'end_size'=> 1,
                            'mid_size'=> 10 ) );?>
<?php endif; ?> 
```

我找不到问题，也许问题是我使用“分类法”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:04:03.770

问题是您一遍又一遍地执行相同的查询：

```
<?php $query = new WP_Query( array('post_type' => 'post', 'kalba' => 'Lietuviu', 'posts_per_page' => 2) );?> 
```

您需要在 WP_Query 数组中设置[偏移量：](http://wordpress.org/support/topic/query_posts-offset-and-pagination)`'offset'=> 2`

我们可以通过使用 wordpress 使用的全局变量来计算偏移量，该变量`$page`使用一个简单的等式调用：`$offset = ($page -1) * $post_per_page;`

所以你最终的 WP_QUERY 应该是这样的：

```
<?php $query = new WP_Query( array('post_type' => 'post', 'kalba' => 'Lietuviu', 'posts_per_page' => 2, 'offset'=> (($page -1) * 2) ) );?> 
```

# http - 不支持/识别请求的 websocket 子协议时的 HTTP 响应代码

> ID：13545453
> 
> 赞同：5
> 
> 时间：2012-11-24T20:49:12.303
> 
> 标签：http, websocket, http-response-codes

在将 HTTP 连接升级到 websocket 时，可以在可选的 HTTP 标头“Sec-WebSocket-Protocol”中提供一个或多个子协议。

如果服务器接受任何子协议，它会以 HTTP 响应代码 101（“HTTP/1.1 101 交换协议”）进行响应，并包含指示所选子协议的 HTTP 标头“Sec-WebSocket-Protocol”。

但是服务器应该如何正确处理未知/不受支持的子协议呢？

这是否应该在 HTTP 连接“内”完成——通过使用一些 HTTP 响应代码？

还是应该将连接升级到 websocket——并通过发送带有一些预定义 websocket 状态代码的“关闭帧”立即被服务器关闭？

RFC6455 怎么说？我无法得出结论。现有的服务器实现如何处理它？

问候/每/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T20:58:10.390

通过对 RFC 6455 的简要了解，我相信 WebSocket 子协议是可选的和协商的。在第[4.2.2](https://www.rfc-editor.org/rfc/rfc6455#section-4.2.2)节的“服务器要求”下：

```
 /subprotocol/
      Either a single value representing the subprotocol the server
      is ready to use or null.  The value chosen MUST be derived
      from the client's handshake, specifically by selecting one of
      the values from the |Sec-WebSocket-Protocol| field that the
      server is willing to use for this connection (if any).  If the
      client's handshake did not contain such a header field or if
      the server does not agree to any of the client's requested
      subprotocols, the only acceptable value is null.  The absence
      of such a field is equivalent to the null value (meaning that
      if the server does not wish to agree to one of the suggested
      subprotocols, it MUST NOT send back a |Sec-WebSocket-Protocol|
      header field in its response).  The empty string is not the
      same as the null value for these purposes and is not a legal
      value for this field.  The ABNF for the value of this header
      field is (token), where the definitions of constructs and
      rules are as given in [RFC2616]. 
```

如果服务器不同意与客户端使用子协议，则服务器不应发送值为“null”的子协议响应标头，并且客户端有责任在该点继续或终止连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:41:20.130

WebSocket 的全部意义在于使用 WebSocket 运行从客户端到服务器的特定协议。但是客户端和服务器需要知道协议，以便两端都知道如何处理通过的 WS 消息。WS 消息处理与您在 TCP 级别执行的操作没有什么不同。您不必使用协议字段，它仅在您想强制兼容性时才相关。

对于 Kaazing 服务器，我们提供了位于基本 websocket 层之上的特定协议库。您还可以在 Github 上找到各种协议库。除了握手之外，其他一切都是您使用 TCP 处理它的方式。您处理 websocket 消息并尝试解码协议。握手中的协议字段应该用于确保您的库实际上是匹配的协议库。因此，例如，如果我的服务器使用 STOMP，并且我尝试与我的客户端连接并且我想使用 STOMP，我的 STOMP 库应该检查协议字段以确保它匹配。端点可以按优先顺序指示，例如它可以说 AMQP 0.9 和 AMQP 1.0，如果两者都可用，将选择 AMQP 1.0。如果端点之一没有'

# asp.net-mvc - Web API 过滤器阻止其他过滤器被击中

> ID：13545454
> 
> 赞同：0
> 
> 时间：2012-11-24T20:49:15.407
> 
> 标签：asp.net-mvc, asp.net-web-api

当我添加 HttpHeader 过滤器时，其他过滤器停止工作。我不知道为什么。

**BaseApiController.cs**

```
[ExceptionHandling, ApiValidation, HttpHeader("X-Robots-Tag", "noindex, nofollow")]
    public abstract class BaseApiController : System.Web.Http.ApiController
    { 
```

**HttpHeaderFilter.cs**

```
namespace Tournaments.Models.Mvc.Filters
{
    public class HttpHeaderAttribute : System.Web.Http.Filters.FilterAttribute 
    {
        public string Name { get; set; }
        public string Value { get; set; }

        public HttpHeaderAttribute(string name, string value)
        {
            Name = name;
            Value = value;
        }

        public override bool AllowMultiple
        {
            get { return true; }
        }
    }

    public class HttpHeaderFilter : System.Web.Http.Filters.IActionFilter
    {
        private readonly string _name;
        private readonly string _value;

        public HttpHeaderFilter(string name, string value)
        {
            _name = name;
            _value = value;
        }

        public bool AllowMultiple
        {
            get { return true; }
        }

        public Task<HttpResponseMessage> ExecuteActionFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
        {
            return continuation().ContinueWith<HttpResponseMessage>((tsk) =>
                {
                    HttpResponseMessage response = tsk.Result;

                    response.Headers.Add(_name, _value);

                    return response;

                }, TaskContinuationOptions.OnlyOnRanToCompletion);;
        }
    }
} 
```

**全球.asax**

```
protected override IKernel CreateKernel()
        {

            return Bootstrap.Configure((kernel) =>
                {
                    kernel.Bind<IUnitOfWork>().To<UnitOfWork>();
                    kernel.Bind<IDatabaseFactory>().To<DatabaseFactory>().InRequestScope();
                    //kernel.Bind<IDatabaseFactory>().To<DatabaseFactory>().InScope(q => HttpContext.Current ?? StandardScopeCallbacks.Thread(q));
                    kernel.Bind<IEmailService>().To<EmailService>().WithConstructorArgument("templates", emailTemplates);
                    kernel.Bind<IPaymentMethod>().To<AuthorizeNetProvider>().Named("AuthorizeNet");
                    kernel.Bind<IPaymentMethod>().To<StripeProvider>().Named("Stripe");
                    kernel.Bind<List<IPaymentMethod>>().ToConstant(kernel.GetAll<IPaymentMethod>().ToList());

                    ServiceBindings.Register(kernel);
                    RepositoryBindings.Register(kernel);
                    ValidationBindings.Register(kernel);

                    kernel.BindHttpFilter<ApiValidationFilter>(System.Web.Http.Filters.FilterScope.Action)
                        .WhenControllerHas<ApiValidationAttribute>();

                    kernel.BindHttpFilter<HttpHeaderFilter>(System.Web.Http.Filters.FilterScope.Controller)
                       .WhenControllerHas<HttpHeaderAttribute>()
                       .WithConstructorArgumentFromControllerAttribute<HttpHeaderAttribute>("name", q => q.Name)
                       .WithConstructorArgumentFromControllerAttribute<HttpHeaderAttribute>("value", q => q.Value);

                    GlobalConfiguration.Configuration.Filters.Add(new ExceptionHandlingAttribute());

                    GlobalConfiguration.Configuration.DependencyResolver = new Common.Ioc.NinjectDependencyResolver(kernel);
                    GlobalConfiguration.Configuration.Formatters.Add(new CustomXmlFormatter());
                    GlobalConfiguration.Configuration.Formatters.Remove(GlobalConfiguration.Configuration.Formatters.XmlFormatter);
                });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:54:26.367

我添加了这个

```
TaskContinuationOptions.ExecuteSynchronously 
```

代替

```
TaskContinuationOptions.OnlyOnRanToCompletion 
```

现在工作正常。

# ruby-on-rails-3 - rails 生成器不会在 rails 3.2.9 引擎中创建 rspec 文件/目录

> ID：13545463
> 
> 赞同：2
> 
> 时间：2012-11-24T20:50:23.297
> 
> 标签：ruby-on-rails-3, rspec2

我们使用以下命令创建 rails 3.2.9 引擎：

```
rails plugin new my_eng --mountable --dummy-path=spec/dummy 
```

在 my_eng.gemspec 中，添加了 rspec：

```
s.add_development_dependency "rspec-rails", ">= 2.0.0" 
```

运行`bundle install`。然后在引擎的根目录中：

```
rails g rspec:install 
```

在 spec/ 下创建一个 spec_helper.rb 文件。

问题是，当创建模型或控制器时，例如，`rails g model my_model...`在 spec/ 下，没有模型目录并且创建了 my_model_spec.rb。我们尝试`rails g rspec:install`在 spec/dummy/ 下运行，但问题仍然存在。我们的代码有什么问题？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:11:17.860

您必须在 config/application.rb 中插入如下内容：

```
config.generators do |g|
  g.template_engine :erb
  g.test_framework  :rspec, :fixture => true, :views => false
  g.integration_tool :rspec, :fixture => true, :views => true
  g.fixture_replacement :factory_girl, :dir => "spec/support/factories" 
end 
```

# html - 图像未显示在 html 页面上

> ID：13545465
> 
> 赞同：-1
> 
> 时间：2012-11-24T20:50:33.250
> 
> 标签：html

我是**Ubuntu**的新手，并且使用**Lampp**，我的问题是，在我的应用程序的图像文件夹中存储图像后，图像未显示在 HTML 文件中（找不到图像）。localhost 文档根目录是，如果我使用以下链接`/opt/lampp/htdocs/`，我的根文件夹是**f_21**

```
http://localhost/f_21/index.html    // not works 
```

但是，如果我使用以下链接，图像显示效果很好：

```
 file:///opt/lampp/htdocs/f_21/index.html  // but it works 
```

任何想法 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:08:56.450

您应该将 image 和 index.html 文件都保存在 htdocs 下。

为您，将您的 index.html 和图像文件放在 f_21 文件夹下，并在您的 index.html 中更新 img 标签的 src 属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:06:23.987

如果图像的链接是基于您的文件系统的绝对路径`file`，那么您将无法在通过 http 查看 html 页面时加载它。

Chrome 不允许（我不确定其他浏览器）允许在使用 http 请求的文件上加载本地资源。

如果您使用的是 chrome，您可以按 ctrl+shift+j 来查看控制台，这将显示任何错误。您可能会看到类似的内容：`Not allowed to load local resource`.

解决方案是将`src`图像更改为相对于它所在的 html 页面。

# java - 需要静态位置

> ID：13545466
> 
> 赞同：0
> 
> 时间：2012-11-24T20:50:47.143
> 
> 标签：java, position, jframe

我有一个带有 25 个 JButton 的框架，每个都有一个图标。如果矩阵上的某个位置有 1，则有一种方法可以更改图标，但真正的问题在于尺寸，因为新图标可能更大，因此元素变得“疯狂”，有一种布局或方法可以保持元素的位置？

# c# - 是PostBack 和GET 请求吗？

> ID：13545467
> 
> 赞同：1
> 
> 时间：2012-11-24T20:50:49.170
> 
> 标签：c#, asp.net, http, url, get

GET 请求可以导致`IsPostBAck`为真吗？

`_ViewState` 我从未尝试过，但我读到它（在某处）如果我添加,`_EventValidation`和`form`参数就可以完成。

是真的吗？这会导致 PostBack 吗？

谢谢。

# 编辑

我在[这里找到了](http://books.google.co.il/books?id=QJNoykS0Tv4C&pg=PT125&lpg=PT125&dq=%22However,%20moving%20to%20forms%20is%20not%20enough.%20An%20attacker%20can%20easily%20build%20a%20form%20on%20his%22&source=bl&ots=JNbgq6zojQ&sig=O4sYbhSakH4K9Zo7_3CvayCV7N8&hl=en&sa=X&ei=8qixUJrUNsGztAallYE4&redir_esc=y)

![在此处输入图像描述](../Images/11c529fa00b4afa5dedf697a41c176f4.png) [这里](http://books.google.co.il/books?id=QJNoykS0Tv4C&pg=PT125&lpg=PT125&dq=%22However,%20moving%20to%20forms%20is%20not%20enough.%20An%20attacker%20can%20easily%20build%20a%20form%20on%20his%22&source=bl&ots=JNbgq6zojQ&sig=O4sYbhSakH4K9Zo7_3CvayCV7N8&hl=en&sa=X&ei=8qixUJrUNsGztAallYE4&redir_esc=y)

# 测试后编辑 2 - 它确实有效

我什至没有在网上找到 **一个**关于这个的话题。

这里是 ：

[http://imageshack.us/f/688/croppercapture1q.gif/](http://imageshack.us/f/688/croppercapture1q.gif/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:34:02.833

我在问题更新后做出新的回答。实际上我做了一个工作示例，**我确认了这个问题**，那是可以做到的！

[http://www.planethost.gr/SOPostBackTest.rar](http://www.planethost.gr/SOPostBackTest.rar)

我做什么：

我制作了一个aspx页面，渲染它，然后使用渲染页面获取并制作一个html，然后将方法从更改`post`为`get`

```
<form name="form1" method="get" action="PostBackTest.aspx" id="form1"> 
```

然后我打开html页面，然后`get`到aspx页面！而aspx页面实际上将其视为IsPostBack。

结果让我吃惊。Flag IsPostBack 设置为 TRUE，您可以自己查看和测试。我不知道如何考虑这一点 - BUG，或 asp.net 工作得如此出色的功能，以至于您在表单上发送它们的任何内容都会使其正常工作。

是的，`Request.HttpMethod`如果是 GET 或 POST 命令，可以显示更准确。

# mapreduce - 在 couchdb 中构建聚合文档的最佳方法是什么？

> ID：13545472
> 
> 赞同：2
> 
> 时间：2012-11-24T20:51:59.700
> 
> 标签：mapreduce, couchdb

好的 SO 用户。我正在尝试学习和使用 CouchDB。我将 StackExchange 数据导出加载为 XML 文件中的每行文档，因此沙发上的文档基本上如下所示：

```
//This is a representation of a question:
{
 "Id" : "1",
 "PostTypeId" : "1",
 "Body" : "..."
}

//This is a representation of an answer
{
 "Id" : "1234",
 "ParentId" : "1",
 "PostTypeId" : "2"
 "Body" : "..."
} 
```

（请忽略这些文件的导入基本上将所有属性都视为文本，我理解使用实数，布尔值等可以产生更好的空间/处理效率。）

我想做的是将其映射到单个聚合文档中：

这是我的地图：

```
function(doc) {
    if(doc.PostTypeId === "2"){
      emit(doc.ParentId, doc);
    }
    else{
        emit(doc.Id, doc);
    }
} 
```

这是减少：

```
function(keys, values, rereduce){
    var retval = {question: null, answers : []};

    if(rereduce){
        for(var i in values){
            var current = values[i];
            retval.answers = retval.answers.concat(current.answers);
            if(retval.question === null && current.question !== null){
                retval.question = current.question;
            }
        }
    }
    else{
        for(var i in values){
            var current = values[i];            

            if(current.PostTypeId === "2"){
                retval.push(current);
            }
            else{
                retval.question = current;
            }
        }
    }
    return retval;
} 
```

从理论上讲，这将产生如下文件：

```
{
    "question" : {...},
    "answers" : [answer1, answer2, answer3]
} 
```

但相反，我得到了标准的“没有足够快地减少”错误。

我是否错误地使用了 Map-Reduce，是否有一个完善的模式可以在 CouchDb 中实现这一点？

（另请注意，我希望得到完整文档的回复，其中问题是“父母”，答案是“孩子”，而不仅仅是 ID。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T23:32:37.850

所以，完成我上面要做的事情的“正确”方法是添加一个“列表”作为我的设计文档的一部分。（我试图达到的目的似乎被称为“整理文件”）。

无论如何，您可以随心所欲地配置您的地图，并将其与同一功能中的“列表”结合起来。

为了解决上面的问题，我去掉了我的reduce（只有一个map函数），然后添加了一个类似下面的函数：

```
{
   "_id": "_design/posts",
   "_rev": "11-8103b7f3bd2552a19704710058113b32",
   "language": "javascript",
   "views": {
       "by_question_id": {
           "map": "function(doc) {
                if(doc.PostTypeId === \"2\"){
                    emit(doc.ParentId, doc);
                }
                else{
                    emit(doc.Id, doc);
                }
            }"
       }
   },
   "lists": {
       "aggregated": "function(head, req){ 
                        start({\"headers\": {\"Content-Type\": \"text/json\"}});
                        var currentRow = null;
                        var currentObj = null; 
                        var retval = []; 
                        while(currentRow = getRow()){
                            if(currentObj === null || currentRow.key !== currentObj.key){
                                currentObj = {key: currentRow.key, question : null, answers : []};
                                retval.push(currentObj);
                            } 
                            if(currentRow.value.PostTypeId === \"2\"){
                                currentObj.answers.push(currentRow.value);
                            } 
                            else{
                                currentObj.question = currentRow.value;
                            }
                        }
                        send(toJSON(retval));
                    }"
   }
} 
```

所以，在你加载了一些元素之后，你可以像这样访问它们：

```
http://localhost:5984/<db>/_design/posts/_list/aggregated/by_question_id?<standard view limiters> 
```

我希望这可以节省人们一些时间。

# sql - SQLite 自然连接坏了？

> ID：13545476
> 
> 赞同：5
> 
> 时间：2012-11-24T20:52:13.130
> 
> 标签：sql, sqlite, inner-join, natural-join

我刚刚开始了解 NATURAL JOIN，而 SQLite 并没有像我预期的那样表现。

```
SELECT * FROM r1 NATURAL JOIN (r2 NATURAL JOIN r3); 
```

和

```
SELECT * FROM (r1 NATURAL JOIN r2) NATURAL JOIN r3; 
```

产生相同（正确）的结果。

但是，如果我省略括号，如下所示：

```
SELECT * FROM r1 NATURAL JOIN r2 NATURAL JOIN r3; 
```

我看到 r1 和 r2 正确连接但是 r3 根本没有连接到结果中，而是形成了 r1 NATURAL JOIN r2, r3 的笛卡尔积。

第一个连接结果的属性名称有问题，还是我误解了 SQL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T21:26:06.783

我自己不使用那个数据库，但是根据[这个文档](http://www.sqlite.org/lang_select.html#fromclause)，SQLite 中的所有连接都是基于左右表的笛卡尔积。

`NATURAL`连接使用公共列名作为“键”来组合两个表。使用括号强制在处理外连接之前构建“派生表”。没有括号，它不会“看到”公共列名，因此第二个`NATURAL`关键字被忽略。

一点建议：最好了解 a 的`NATURAL JOIN`工作原理，以防您在代码中看到它，但不要自己使用它。这是一个没有什么价值的“危险”结构。只是我的观点。

# java - 试图打印一个数组

> ID：13545477
> 
> 赞同：1
> 
> 时间：2012-11-24T20:52:15.833
> 
> 标签：java, compiler-construction, bluej

我需要一些有关 java 的帮助并从数组中返回结果。

我的数组列表存储来自餐厅的订单（由订单类创建）。Deliverylog 类（它创建数组列表）然后具有将订单添加到名为 waitingList 的数组列表的方法。

每个订单都有一个参考编号以及交货时间等详细信息..

我试图做的，但没有得到线索的是，创建一个带有参数（int ref）的方法，该方法将在数组列表中搜索与输入的参考号相同的项目。当它找到它时，它会返回 order ，否则它会返回 null。

任何帮助都会得到帮助。

代码

```
 /**
 * Show a order.
 * @param refnum The reference number of the order to be shown
 */
public void findOrderWaiting(int refnum)
  {
    if(refnum < 0) {
        // This is not a valid reference number
    }
    else if(refnum <= numberOfOrders()) {
        // This is a valid reference number
        System.out.println(waitingList.get(refnum));
    }
    else {
        // This is not a valid reference number
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:57:46.710

你知道 arrayList 有一个方法可以在里面找到一个项目：

```
 //a is an arraylist

  //filling the list here is omitted

   //o is the object to find its index
   int ind=a.indexOf(o); 
```

`int indexOf(Object o)`已经发明了，所以你不必制作方法。如果您想将此用于学习目的，您可以从互联网上搜索散列技术，但您使用的是 arrayList，最简单的方法是 indexOf() 方法。

HashTable 更加灵活，让您可以自由搜索项目或密钥（您提供密钥并获取项目，或者您提供项目并获取其密钥）（密钥也可以是一个对象！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:54:46.583

好吧，您可以使用标准 for 循环遍历数组：

```
for(int i=0; i<array.length; i++){
   if(array[i].intPart == ref) return array[i];
}
return null; 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:57:57.260

```
for(String s: restaurentOrders){
   if(s.equalsIgnoreCase()){
              //You have it..
   }
} 
```

如果您将数组/数组列表存储在restaurentOrders 中。希望能帮助到你

# python - 字典和整数的元组列表，如何搜索每个字典

> ID：13545483
> 
> 赞同：1
> 
> 时间：2012-11-24T20:53:31.717
> 
> 标签：python

我正在做一个项目，其中我有一个列表，其中包含一个 dict 和一个 int 的元组。我正在尝试在每个字典中搜索一个名字，但我遇到了一些麻烦。

```
dicts = [ (somedict, 0), (someOtherDict, 5)] 
```

在我只有一个字典列表之前，我可以轻松地搜索

```
def search(name):
    for d in reversed(dicts):
        if name in d: return d[name] 
```

但是现在我有了一个元组列表，我不太确定如何搜索字典。任何帮助或建议将不胜感激。我现在很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:56:04.897

只需使用生成器表达式来获取您的 dicts：

```
def search(name):
    for d in (t[0] for t in dicts):
        if name in d: return d[name] 
```

或者，您可以使用元组赋值：

```
def search(name):
    for d, _ in dicts:
        if name in d: return d[name] 
```

但这假设您所有的元组都有 2 个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:58:04.607

您需要使用 0 对枚举 dicts 的结果进行索引，因为那是您的 dict 在 dict/int 元组中的位置。

```
def search(name):
    for d in reversed(dicts):
        if name in d[0]: return d[0][name] 
```

# javascript - javascript中eval内部的声明

> ID：13545487
> 
> 赞同：4
> 
> 时间：2012-11-24T20:54:03.680
> 
> 标签：javascript, scope, eval

考虑以下两个 JavaScript 片段：

```
var x = 2;
function f() {
    var y = x;
    eval('var x;');
    return y;
} 
```

对比

```
var x = 2;
function f() {
    var y = x;
    var x;
    return y;
} 
```

唯一的区别是我已经替换`eval('var x;');`为`var x;`.

第一个返回`2`，但第二个返回`undefined`。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T20:55:58.470

解析器将变量声明**提升**到词法范围的顶部。在第二个代码块中，它的实际运行方式是：

```
function f() {
  var x, y;
  y = x;
  return y;
} 
```

函数声明也被提升。最终结果是变量声明应该被认为总是包含它出现的整个词法范围。如果变量在函数中的**任何位置**`x`声明，则该函数中的每个引用都是局部变量。`var` **`x`**

 **在您的第一个示例中，该`eval()`行只是一个正则表达式语句，因此它按照它在函数中出现的顺序执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T20:56:27.500

因为对于第二个，在`var`执行任何其他语句之前，将 * 提升到函数的开头。

所以它就好像你的代码是这样的：

```
var x = 2;
function f() {
    var x, y
    y = x;
    return y;
} 
```

但是对于第一个， the`var x`是`eval()`表达式的一部分，因此它没有机会像第二个那样被提升*。

* * *

*“吊装”一词不是官方术语。它只是人们用来描述声明发生在执行上下文中评估任何表达式之前的一个词。函数声明也被提升。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T20:57:07.380

这是因为当解释器在函数范围内时，它会将值设置`undefined`为在其中声明的所有变量（以`var`关键字为前缀）。无论您将声明放在何处，如果函数内部有变量声明，则该变量的值将一直存在`undefined`，直到您明确设置它的值为止。在第一种情况下`eval('var x;')`，当设置 的值时，您仍然没有评估`y`它。这就是为什么值为`y`is的原因，因为上层作用域中`2`的变量值为. 这里也一样：`x``2`

```
var x = 2;
function foo() {
    var y = x;
    console.log(y); //undefined
    console.log(x); //undefined
    var x = 3;
}

function bar() {
    var y = x;
    console.log(y); //2
} 
```

* * *

```
var x = 2;
function foobar() {
    console.log(x); //undefined
    var x;
    console.log(x); // undefined
    x = 3;
    var y = x;
    console.log(y); //3
} 
```

eval 就像一个正则表达式一样被评估。**

# ios - 调整模态视图控制器的大小时出现阴影错误

> ID：13545488
> 
> 赞同：0
> 
> 时间：2012-11-24T20:54:22.707
> 
> 标签：ios, presentmodalviewcontroller, uimodalpresentationstyle

我想调整和重新定位模态视图。调整大小效果很好。重新定位不起作用。有阴影的错误。请看截图二。是否可以降低阴影？

```
-(IBAction) onModal:(id)sender
{
 UINavigationController *nav = [[UINavigationController alloc] init];
 nav.modalPresentationStyle = UIModalPresentationFormSheet;
 [self presentViewController:nav animated:YES completion:nil];

 nav.view.superview.bounds = CGRectMake(0, 0, 200, 200);    
} 
```

![在此处输入图像描述](../Images/61f5d629d23fc801755b694ab333fb3d.png)

```
nav.view.superview.bounds = CGRectMake(0, -200, 200, 200); 
```

![在此处输入图像描述](../Images/7b91c3141d4d85f609cd6458f14b6603.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:07:37.327

您可以通过设置视图层的 shadowPath 属性来移动阴影。

```
// be sure to include this and to link your app against it.
#import <QuartzCore/QuartzCore.h>
...

// UIBezierPath has nice convenience methods for creating rounded rectangles.
UIBezierPath *shadowPath = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(0.f, 0.f, 200.f, 200.f) cornerRadius:4.f];

// Transform the path to your heart's content
[shadowPath applyTransform:CGAffineTransformMakeTranslation(0.f, 200.f)];

// use the CGPath method to get a CGPathRef for the layer's shadowPath
nav.view.superview.layer.shadowPath = shadowPath.CGPath; 
```

注意：或者，您可以使用所需的偏移量创建 UIBezierPath，而不是作为第二步进行转换。

# c++ - 静态内存中的数组的大小可以在 C++ 的运行时更改吗？怎么会？

> ID：13545489
> 
> 赞同：3
> 
> 时间：2012-11-24T20:54:25.833
> 
> 标签：c++, arrays, dynamic-memory-allocation

我从这里读过这一段：[http ://www.cplusplus.com/doc/tutorial/dynamic/](http://www.cplusplus.com/doc/tutorial/dynamic/)

> 您可能想知道声明普通数组和将动态内存分配给指针之间的区别，就像我们刚刚所做的那样。最重要的区别是数组的大小必须是一个常数值，这将它的大小限制在我们在设计程序的那一刻，在它执行之前决定的范围内，而动态内存分配允许我们在执行期间分配内存使用任何变量或常量值作为其大小执行程序（运行时）。

但我的这段代码工作得很好：

```
int number;
cin>>number;
int myArray[number];

cout<<sizeof(myArray)/sizeof(myArray[0])<<endl;
cout<<sizeof(myArray)<<endl; 
```

这是否意味着数组是在动态内存中创建的？或者它是在静态内存中创建的，但它的大小仍然在运行时确定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T21:00:06.157

您发布的代码不符合 C++ 标准。由于可变长度数组在 C 中很流行，因此 C++ 编译器实现者可能已经决定在 C++ 中也提供此功能是一个好主意。这样做当然不是一个好主意，因为它是在 C 中完成的，但是正在讨论一些变体以包含在 C++ 中。

看来，gcc 和 clang 接受了上面的代码（在添加了必要的包含、函数等之后）。clang 甚至在没有警告的情况下这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T21:01:37.420

正如我在评论中指出的那样，但这里有更多细节。

在标准 C++ 中，数组的大小必须在编译时知道。在您的示例中，情况并非如此。您的代码可以编译，因为您（可能）使用`variable length array`启用了扩展的 gcc。

正确设置警告级别将阻止此代码编译。

# asp.net - SelectedValue 属性和动态创建的 DropDownLists。ASP.NET

> ID：13545497
> 
> 赞同：2
> 
> 时间：2012-11-24T20:54:47.843
> 
> 标签：asp.net, drop-down-menu

.aspx 文件有它通常的 html 代码和一个“Panel1”控件。首先，我正在创建一个名为“ddl”的下拉列表并向其中添加一些 ListItem，所有这些都来自后面的代码。接下来我想创建一定数量的其他 DropDownLists 并将我添加到“ddl”的所有 ListItems 复制到它们，之后我需要在页面运行时将它们添加到“Panel1”控件中。最重要的部分是我希望所有动态创建的下拉列表在运行页面时都有一个选定的值。你可以看到下面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    DropDownList ddl = new DropDownList();
    ddl.Items.Add(new ListItem("One", "1"));
    ddl.Items.Add(new ListItem("Two", "2"));
    ddl.Items.Add(new ListItem("Three", "3"));
    ddl.Items.Add(new ListItem("Four", "4"));
    ddl.Items.Add(new ListItem("Five", "5"));
    ddl.Items.Add(new ListItem("Six", "6"));
    ddl.Items.Add(new ListItem("Seven", "7"));

    int j = 2;
    for (int h = 0; h < 3; h++)
    {
        DropDownList ddlDynamic = new DropDownList();

        //Add the items from ddl to the new dropdownlsit
        for (int i = 0; i < ddl.Items.Count; i++)
        {
            ddlDynamic.Items.Add(ddl.Items[i]);
        }
        //the selected item in the first dropdownlist 
        //must be "Two" but it will be "Four". WHY???
        ddlDynamic.SelectedValue = j.ToString();
        ddlDynamic.ID = h.ToString();
        Panel1.Controls.Add(ddlDynamic);
        Panel1.Controls.Add(new LiteralControl("<br />"));
        j++;
    }
} 
```

这里的问题是所有三个下拉列表的选定值都是相同的，它将是“四”，当逻辑上第一个必须是“二”时，第二个是“三”，第三个必须有“四”作为选定值。第一个问题是：我做错了什么？

第二个问题。当使用`ddlDynamic.Items.FindByValue(j.ToString()).Selected = true;`而不是`ddlDynamic.SelectedValue = j.ToString();`我得到“不能在下拉列表中选择多个项目”时。这是为什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T22:10:51.600

我找到了答案。这里重要的是要记住这一`ddlDynamic.Items.Add(ddl.Items[i]);`行，通过引用从“ddl”下拉列表中添加项目，并且不会将 ListItems 复制到使用“for”循环动态创建的每个 DropDownLists 中。所有动态创建的下拉列表都使用之前初始化并添加到“ddl”的相同列表项。重要的是要知道：

```
ddlDynamic.DataSource = ddl.Items;
        ddlDynamic.DataBind(); 
```

将做同样的事情：将通过引用“ddl”来使用 ListItems。所以我找到的解决方案是为每个动态创建的 DropDownList 创建 ListItems，并从源填充它们，在这种情况下它将是一个 DataTable：

```
protected void Page_Load(object sender, EventArgs e)
{
    DataTable table = new DataTable();
    table.Columns.Add("text", typeof(string));
    table.Columns.Add("value", typeof(string));

    table.Rows.Add("One", "1");
    table.Rows.Add("Two", "2");
    table.Rows.Add("Three", "3");
    table.Rows.Add("Four", "4");
    table.Rows.Add("Five", "5");
    table.Rows.Add("Six", "6");
    table.Rows.Add("Seven", "7");

    int j = 1;
    for (int h = 0; h < 3; h++)
    {
        DropDownList ddlDynamic = new DropDownList();
        foreach (DataRow rw in table.Rows)
        {
            ddlDynamic.Items.Add(new ListItem((string)rw["text"], (string)rw["value"]));
        }

        ddlDynamic.SelectedValue = j.ToString();
        ddlDynamic.ID = h.ToString();
        Panel1.Controls.Add(ddlDynamic);
        Panel1.Controls.Add(new LiteralControl("<br />"));
        j++;
    }
} 
```

如果有人有更好的主意，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T22:40:27.013

你有正确的答案。我正在玩代码，并认为我会继续发布我所拥有的。

```
protected void Page_Load(object sender, EventArgs e)
{
    var numListControls = 3;
    for (int i = 0; i < numListControls; i++)
    {
        var newList = new DropDownList() { ID = i.ToString() };
        newList.Items.AddRange(GetListItems(i + 1));
        Panel1.Controls.Add(newList);
        Panel1.Controls.Add(new LiteralControl("<br />"));
    }        
}

string[] values = new[] { "One", "Two", "Three", "Four", "Five", "Six", "Seven" };
public ListItem[] GetListItems(int selectedValue)
{           
    return values.Select((val, pos) => new ListItem() {
        Text=val, 
        Value=(pos + 1).ToString(), 
        Selected = selectedValue == pos
    }).ToArray();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:28:48.007

我推荐你阅读[这篇文章](http://learning2code.net/Learn/2009/8/12/Adding-Controls-to-an-ASPNET-form-Dynamically.aspx)。它有一点：“很容易假设添加到占位符的所有控件也自动添加到 ViewState。但是情况并非如此”

# javascript - jquery/javascript 删除 HTML 标签但没有内容

> ID：13545499
> 
> 赞同：2
> 
> 时间：2012-11-24T20:54:57.207
> 
> 标签：javascript, jquery, regex

我有以下代码，

```
$(document.getElementById('messages_message-wysiwyg-iframe').contentWindow.document).keydown(function() {
        var iFrame =  document.getElementById('messages_message-wysiwyg-iframe');
        var iFrameBody;
        if ( iFrame.contentDocument ) 
        { // FF
            iFrameBody = iFrame.contentDocument.getElementsByTagName('body')[0];
        }
        else if ( iFrame.contentWindow ) 
        { // IE
            iFrameBody = iFrame.contentWindow.document.getElementsByTagName('body')[0];
        }
            console.info(iFrameBody.innerHTML);
    }); 
```

如果获取 iframe 的内容，我想要做什么，但删除所有不是的 html 标签，

`b, strong, i, a, u, img`

但是我不想删除任何文本，例如，如果 iframe 中有以下内容，

```
<div class="box segment panel">
    <a href="http://www.google.com>hello world</a> 
    click this link and go far. 
    <img src="http://placehold.it/100x100" alt="Placeholder"/>
 </div> 
```

返回的内容如下，

```
<a href="http://www.google.com">hello world</a>  
click this link and go far.
</a>
<img src="http://placehold.it/100x100" alt="Placeholder" /> 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:49:50.657

这是我的纯 JS 解决方案：

```
function sanitize(el) {

    if (el.nodeType !== 1) return;

    if (!/^(B|STRONG|I|A|U|IMG)$/.test(el.tagName)) {
        var p = el.parentNode;

        // move all children out of the element, recursing as we go
        var c = el.firstChild;
        while (c) {
            var d = c.nextSibling;  // remember the next element
            p.insertBefore(c, el);
            sanitize(c);
            c = d;                  // look at the next sibling
        }

        // remove the element
        p.removeChild(el);
    }
} 
```

演示在[http://jsfiddle.net/alnitak/WvJAx/](http://jsfiddle.net/alnitak/WvJAx/)

它通过（递归地）将受限标签的子节点移出其父节点，然后在它们为空时删除这些标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:15:43.443

```
var iFrame = document.getElementById('messages_message-wysiwyg-iframe');
var iFrameDoc = iFrame.contentDocument || iFrame.contentWindow.document;
$(iFrameDoc).keydown(function() {
    var iFrameBody = $("body", iFrameDoc);
    var cleared = iFrameBody.clone();
    cleared.find("*:not(b,strong,i,a,u,img)").each(function() {
        var $this = $(this);
        $this.replaceWith($this.contents());
    });
    console.log(cleared.html());
}); 
```

[jsfiddle.net 上的演示](http://jsfiddle.net/3jfrA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:29:30.807

使用正则表达式：

```
iFrameBody.innerHTML=iFrameBody.innerHTML.replace(/<[^(b|strong|i|a|u|img)]\b[^>]*>/gi,"").replace(/<\/[^(b|strong|i|a|u|img)]>/gi,""); 
```

第一次替换删除开始标签，第二次删除结束标签。

[请注意，使用正则表达式匹配 html 时](https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg)有几个陷阱。但在这种特定情况下，这似乎是一个合理的选择（参见我对其他答案的评论）。

作为记录，这是我用来访问 iframe 内容文档的内容：

```
var doc=ifr.contentWindow||ifr.contentDocument;
if (doc.document) doc=doc.document; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-24T21:16:37.743

我认为你对如何描述你正在尝试做的事情有点困惑。当您谈论“文本”时，您指的是标签内的 innerHTML/text 节点。我认为，您真正想做的是获取所有特定内容和内容的结构，也就是 iFrame 的子元素。

您可以使用 jQuery 的 .text() 方法单独获取每个元素的文本内容并在从 DOM 中删除实际标签之前保存它，如果您想说，获取跨度的文本内容但您不想要跨度不再位于 DOM 中，或者您想将其放置在文档中的其他位置。

```
var elemText = $('span#mySpan').text();
$('span#mySpan').remove(); 
```

对于您根据示例 HTML 尝试执行的操作，您可能需要查看 jQuery 的分离方法：[http ://api.jquery.com/detach/](http://api.jquery.com/detach/)

这将允许您存储返回的子元素，以便稍后附加到其他地方。

# iphone - Kobold 2dD - 找不到 kkARCSupport.h 文件 - 如何管理？

> ID：13545502
> 
> 赞同：0
> 
> 时间：2012-11-24T20:55:06.813
> 
> 标签：iphone, objective-c, xcode, kobold2d

我想在我的一般（现有）Xcode（单视图）项目中使用来自 Kobold2D (ObjectAL) 的音频管理。

我使用官方的说明：

> 将此项目中的 libs/ObjectAL 复制到您的项目中。如果愿意，您可以简单地将其拖到 xcode 中的“组和文件”部分（请务必选择“将项目复制到目标组的文件夹”）。或者，您可以将 ObjectAL 构建为静态库（就像在 ObjectAL 演示项目中配置的那样）。
> 
> 将以下框架添加到您的项目中： OpenAL.framework AudioToolbox.framework AVFoundation.framework

但收到此错误：**找不到 kkARCSupport.h 文件。**为什么？

# regex - 使用 sed 从字符串中返回最后一个 [0-9]\{6\}

> ID：13545503
> 
> 赞同：1
> 
> 时间：2012-11-24T20:55:21.750
> 
> 标签：regex, sed, pattern-matching

我想以表格形式传递一长串文件名

```
something_0230232_long_5160mK.csv
something_0230232_long-025160mK.csv
simething_0230342_lingk425460mK.csv 
```

sed（或类似的 linux shell 工具）并始终获取每行 mK 之前的最后一个数字数组

如果正好有 6 位数字，则此方法有效。如何将其增强为 n 位？

```
echo "something_0230232_long_025160mK.csv" | sed -e "s/S.*\([0-9]\{6\}\)mK\.csv/\1/p" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T21:01:59.903

使用 GNU 的解决方案`grep`：

```
$ grep -Po '[0-9]+(?=mK)' file

5160
025160
425460 
```

解释：

`-o`只显示匹配的那部分行。

`-P` 使用 perl 正则表达式。

```
[0-9]+     # Match a string of digits (at least one)
(?=mK)     # Followed by mK (positive lookahead) 
```

* * *

和`sed` *（因为你问）*：

`sed -E 's/.*[^0-9]([0-9]+)mK.*/\1/' file`

`-E`使用扩展的正则表达式*（别名`-r`但更具可移植性）。*

```
s/         # Subsitution -
.*         # Match everything
[^0-9]     # That's not a digit
([0-9]+)   # Capture the last digit string
mK         # Followed by the string mK
.*         # Match everything left
/          # Replace with -
\1         # The captured digit string only
/          # 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:27:38.120

您的`sed`命令走在正确的轨道上：

```
echo "something_0230232_long_025160mK.csv" |
sed -e 's/^.*[^0-9]\([0-9]\{1,\}\)mK\.csv/\1/' 
```

差异：

*   替换`S`为`^`。这在开始时匹配（`S`数据中没有，所以原来的永远不会匹配）。
*   替换`6`为`1,`。这意味着给定上下文的“一个或多个数字”（严格来说，前一个正则表达式的一个或多个重复，但前一个正则表达式是`[0-9]`）。
*   插入`[^0-9]`以阻止`.*`太贪心。当匹配的位数固定（`\{6\}`）时，刚性防止了`.*`过于贪婪。当您有两个灵活的范围时，第一个将是最长的。如果没有`[^0-9]`，您将获得`0`示例字符串的打印结果。
*   删除“p”，以便打印一次该值。或者，保留`p`和添加`-n`作为选项。

*提醒自己：在您发布之前（或之后不久）进行测试。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:59:40.227

```
echo "something_0230232_long_025160mK.csv" | sed 's/^.*_//' | sed 's/mK.csv//' 
```

# jquery - jQuery：添加无限输入和处理表单数据

> ID：13545504
> 
> 赞同：2
> 
> 时间：2012-11-24T20:55:27.120
> 
> 标签：jquery, html, css, forms

我有一个联系人数据库表单，用户可以在其中单击加号并添加无限数量的电话输入字段、电子邮件字段、地址字段。我已经从回答的其他问题中找到了如何做到这一点。

现在我需要知道如何处理这些数据。每个可以无限添加的字段都具有相同的名称。我在想这些将被添加到一个数组中，我可以在其中使用 for 或 .each 并循环遍历它。

最后一件事是我通过 jQuery Ajax 将这些信息发送到将处理所有数据的 PHP 页面。我在 PHP 方面比在 jQuery 方面更熟练，但 jQuery 显然对于不必刷新页面很有用。我的问题是这是不好的做法吗？它似乎有点慢。我知道我可以错误检查并处理 js 中的数据，然后将处理后的数据发送到 PHP 页面以输入到数据库中，但我担心使用 js 进行错误检查有多难。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T21:00:56.780

添加表单元素时，请注意，如果在名称末尾添加方括号，则发布的数据将构造为类似数组的对象：

```
<input type="text" name="extrainput[]"/> 
```

然后，您可以迭代结果并处理用户输入。

因此，例如，如果您需要无限数量的文本框供用户输入他的语言，您可以使用：

```
$('#addbutton').click(function(){
    $('#myform').append('<input type="text" name="languages[]"/>')
}); 
```

`addbutton`用户单击以添加另一个输入的按钮的 ID 在哪里。

要遍历这些表单元素，您可以使用：

```
$('[name="languages[]"]').each(...) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T21:00:06.763

两种接近它的方法，在 PHP 中都有相似的结果

第 1 行

```
<input type="text" name="fullname[]" />
<input type="text" name="telephone[]" /> 
```

第 2 行

```
<input type="text" name="fullname[]" />
<input type="text" name="telephone[]" /> 
```

ETC

$_POST 将有一个值数组，其索引显示它们属于哪一行

第 1 行

```
<input type="text" name="row[1][fullname]" />
<input type="text" name="row[1][telephone]" /> 
```

第 2 行

```
<input type="text" name="row[2][fullname]" />
<input type="text" name="row[2][telephone]" /> 
```

$_POST 每行有一个数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T20:59:46.090

你可以简单地使用 `jQuery(yourDiv).data('mydata', anyObject);` 然后迭代

```
jQuery(selector of your divs).each(function(item){
    var obj = jQuery(item).data('mydata');
    // do anything you want here
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T21:15:46.267

您可以在 html 中使用数组作为名称：

```
var i = 0;
$('.add').click(function(){
   var newE = $('<input/>').attr({type:'text',name:'data[]',value:i,'class':'inputs'});
   $('.myform').append(newE).hide().fadeIn('1000');
}); 
```

并使用 ajax 发送：

```
var data = {};
$.each($('.inputs'),function(i,val){
      data[i] = $(val).val();
});
callajaxfunction(data); 
```

然后你可以用 php 得到这个数组：

```
foreach($_POST['data'] as $key => $value){
   echo $key.':'.$value.'<br>';
} 
```

# java - 创建实例的类数组

> ID：13545505
> 
> 赞同：0
> 
> 时间：2012-11-24T20:55:34.307
> 
> 标签：java, arrays, instance

`Obj`在他的构造函数中有类`System.out.println("Hello world!") ;`

我创建了一个此类使用的数组 -并且没有打印任何内容，这意味着 - 没有调用`Obj[] objArray = new Obj[10] ;` 任何实例。`Obj`有没有办法创建这样的数组，但是除了在 for 循环中创建它们之外，还有实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:56:46.807

好吧，既然你想知道除了使用 for 循环之外的方法，你可以这样做： -

```
Obj[] objArray = {new Obj(), new Obj(), new Obj()}; 
```

这里发生的是，您正在使用数组元素直接初始化您的数组引用。现在，实际数组对象的类型是从 LHS 上的数组引用类型推断出来的。

因此，通过该声明，创建了一个大小为 3 的数组（在上述情况下），数组中的每个索引都使用给定顺序`instance`的类初始化。`Obj`

* * *

我建议的更好方法是使用`ArrayList`，在这种情况下，您必须在没有 for 循环的情况下`double-braces initialization`初始化。`List`再加上一个额外的优势，您可以随时向其中添加新元素。因为它`dynamically increasing`排列。

```
List<Object> list = new ArrayList<Object>() {
    {
        add(new Obj());
        add(new Obj());
        add(new Obj());
    }
};  // Note the semi-colon here.

list.add(new Obj());  // Add another element here. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T21:02:23.147

到目前为止的答案很好而且很有帮助。我在这里只是为了提醒你

```
Obj[] objArray = new Obj[10];
Arrays.fill(objArray, new Obj()); 
```

但是，这只会为数组的所有元素分配一个引用（对新的 Obj()）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T20:59:18.027

当你这样做时，`Obj[] objArray = new Obj[10] ;` 你只创建一个引用数组来指向实际的“Obj”对象。

但是在您的情况下，从未创建过实际的 Obj 对象。

```
for (int i = 0; i < objArray.length; i++) {
objArray[i] = new Obj();
} 
```

执行上述操作将打印所需的内容。

最后做所有的`System.out.println(Arrays.deepToString(objArray))`打印`toString()``Obj`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T20:59:36.293

`Obj[] objArray = new Obj[10] ;`只需创建一个能够容纳 10 个 Objs 的数组。要将 Objs 放入数组中，您需要使用 Rohit 的方法或编写一个简单的`for`循环来一次初始化一个数组条目：

```
for (int i = 0; i < 10; i++) {
    objArray[i] = new Obj();
} 
```

或者，没有 for 循环：

```
int i = 0;
while (i < 10) {
    objArray[i] = new Obj();
    i++;
} 
```

# java - 使用 java API 播放 Sony DVF 文件

> ID：13545506
> 
> 赞同：1
> 
> 时间：2012-11-24T20:55:56.727
> 
> 标签：java, audio

我正在研究需要读取不同音频文件的项目。但我无法播放索尼 DVF 扩展。我试过[“Java 声音 API”](http://www.oracle.com/technetwork/java/index-139508.html)

但是，它不适用于 DVF 文件。需要有关如何使用 java 播放 dvf 文件的帮助。

# javascript - 在调用之前在另一个页面中预加载 javascript (ckeEditor.js wysiwyg)

> ID：13545510
> 
> 赞同：0
> 
> 时间：2012-11-24T20:56:06.103
> 
> 标签：javascript, ckeditor

有没有办法在我们打开调用 ckEditor.js javascript 的页面之前预加载 ckEditor [ckEditor ？](http://ckeditor.com/demo)我想这样做，因为 ckEditor.js 是一个 350kb 的重文件，对于某些用户来说，它需要 20-30 秒才能通过拨号连接上传。我想在用户只打开首页（这只是一个简单的静止 html）并忙于阅读首页时加载它。当他/她移动到使用 ckeditor 的页面时，ckeditor.js 已经加载并缓存了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:07:56.823

您绝对可以通过将 CKEditor 作为 js 文件定期包含在您的主页上来做到这一点，这将导致它在移动到另一个页面之前加载到缓存中。问题是 CKEdtior 通常与某个任意数字链接到文件名末尾的查询字符串，这使得它无法缓存（ckeditor.js?v=12424324234 或类似的东西）。您可能需要进入 CKEditor 源代码（我记得这是一场彻头彻尾的噩梦）并全局查找该文件调用您尝试缓存的 JS 文件的位置，并确保它不包含该变量查询字符串在最后。

# iphone - 应用程序不活跃运行作业，怎么办？

> ID：13545512
> 
> 赞同：2
> 
> 时间：2012-11-24T20:56:11.953
> 
> 标签：iphone, objective-c, ios

大家好，我看到**google plus** iphone 应用程序在没有激活应用程序或在后台完全关闭的情况下上传我的图像！我如何在我的应用程序中运行这样的进程

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T23:21:24.420

你误会了。这不会发生。该应用程序会在您点击它时上传您的照片，并在使用主页按钮退出应用程序后在后台继续运行 10 分钟

```
- (UIBackgroundTaskIdentifier)beginBackgroundTaskWithExpirationHandler:(void (^)(void))handler 
```

谷歌甚至说这是[他们的即时上传常见问题解答](http://support.google.com/plus/bin/answer.py?hl=en&answer=2453873)中发生的事情：

> 注意：照片和视频将在 Google+ 应用程序打开时上传，并在之后的一小段时间内上传。

你想要什么，运行代码的能力

> “没有应用程序处于活动状态或在后台完全关闭！”

在 iOS 上是不可能的

# android - 通过 UDP 套接字发送字符串

> ID：13545526
> 
> 赞同：4
> 
> 时间：2012-11-24T20:57:42.877
> 
> 标签：android, string, sockets, udp, client

我试图让我的测试应用程序通过 UDP 套接字发送字符串。它不断在线抛出`AndroidRuntime`错误`soc.send(pac);`。我已经在`android_manifest`文件中设置了所需的权限。

```
 import java.io.IOException;
    import java.net.DatagramPacket;
    import java.net.DatagramSocket;
    import java.net.InetAddress;
    import android.app.Activity;
    import android.os.Bundle;
    import android.view.Menu;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;

     public class MainActivity extends Activity {

     private EditText editText1;

    @Override
     public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);
     Button button1 = (Button) findViewById(R.id.button1);
     editText1 = (EditText) findViewById(R.id.editText1);
    button1.setOnClickListener(new View.OnClickListener() {
        String text= editText1.toString();
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
                udpmsg(text);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    });
}

    public void udpmsg(String text) throws java.io.IOException 
    {
        InetAddress to = InetAddress.getByName("192.168.0.105");
        int port=55505;
        DatagramSocket soc = new DatagramSocket();
        byte[] data = text.getBytes();
        DatagramPacket pac = new DatagramPacket(data, data.length, to, port);
        soc.send(pac);

        }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:07:28.790

请注意，DatagramSocket 的*send*方法也可能抛出*java.lang.SecurityException*，这是一个运行时异常，您不会在代码中的任何地方捕获它。

作为快速检查，将*catch (IOException e) {*替换为*catch (Exception e) {*并告诉我们修改后日志中显示的内容。

# javascript - Twitter Bootstrap 工具提示数据选择器？

> ID：13545533
> 
> 赞同：5
> 
> 时间：2012-11-24T20:58:13.237
> 
> 标签：javascript, jquery, css, twitter-bootstrap

[Twitter 的引导工具提示](http://twitter.github.com/bootstrap/javascript.html#tooltips)中使用的数据选择器选项是什么？描述如下...

```
If a selector is provided, tooltip objects will be delegated to the specified targets. 
```

但我不明白它的目的或如何使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T21:08:49.140

它类似于使用 jQuery 委托方法，例如`on()`或`delegate()`以说明运行代码时页面中不存在的工具提示元素。

示例绑定到，`body`因为它始终存在于页面中

```
$('body').tooltip({
   selector: '.mytooltipClass'

}) 
```

# java - JAXB 不序列化完整的对象图

> ID：13545538
> 
> 赞同：3
> 
> 时间：2012-11-24T20:58:30.130
> 
> 标签：java, jakarta-ee, jaxb, marshalling

我已经从课程中遗漏了所有其他属性等。我在 Question 中的所有列表都没有序列化。我添加了答案列表的示例。JSON 响应很好，只是“答案”为空。为什么？当我将测验对象打印到控制台时，它已完全初始化（是的，即使它是延迟加载的，存储库层中的自定义代码也会得到照顾）。我还使用调试器进行检查。

```
@XmlRootElement
public class Quiz {

    private List<Question> questions;

    public List<Question> getQuestions() {
        return questions;
    }

    public void setQuestions(List<Question> questions) {
        this.questions = questions;
    }
}

public class Question {

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "QuestionId", nullable = false)
    @XmlElementWrapper(name = "answers")
    public List<Answer> getAnswers() {
        return answers;
    }

    public void setAnswers(final List<Answer> answers) {
        this.answers = answers;
    }
}

@Entity
@Table(name = "Answer")
public class Answer  {

} 
```

* * *

编辑：

似乎未注释的代码造成了麻烦。切换评论使代码工作。

```
public void setAnswers(final List<Answer> answers) {

        //this.answers = answers;

        this.answers.clear();

        for (Answer answer : answers) {
            addAnswer(answer);
        }

    }

public void addAnswer(final Answer answer) {
    if (!(answers.contains(answer))) {
        checkThatOnlyOneAnswerMayBeCorrect(answer);
        answers.add(answer);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T22:57:07.740

关于[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现需要注意的重要一点是，如果您已经预初始化了一个`List`值，则将使用该值。例如，如果您的`answers`字段按如下方式初始化，`ArrayList`则将使用该实例。

```
List<Answer> answers = new ArrayList<Answer>(); 
```

如果您`answers`按如下方式初始化您的字段，`LinkedList`则将使用该实例。

```
List<Answer> answers = new LinkedList<Answer>(); 
```

这意味着问题出在以下代码上。当您`clear`在`answers`字段上执行时，您也会清除传入的值，因为它们是相同的实例。

```
public void setAnswers(final List<Answer> answers) {

    //this.answers = answers;

    this.answers.clear();

    for (Answer answer : answers) {
        addAnswer(answer);
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/01/jaxb-and-choosing-list-implementation.html](http://blog.bdoughan.com/2011/01/jaxb-and-choosing-list-implementation.html)

# ruby-on-rails - 一页上有多个 form_tags

> ID：13545542
> 
> 赞同：0
> 
> 时间：2012-11-24T20:58:51.793
> 
> 标签：ruby-on-rails, ruby, forms

假设我在一个页面上有两个 form_tag ，每个都像这样：

```
 = form_tag({:action => :import}, :multipart => true) do
    = file_field_tag 'file'
    = submit_tag 'Import', name: 'import_this' 
```

所以我知道它是如何在 params 中实现的，但是如果我有两个表单并且每个表单都有相同的名称字段，我如何在生成的 params 数组中对它们进行命名空间以及如何访问它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:28:10.357

为了区分这两种形式，您需要为字段创建不同的名称。

最常见的做法是将字段嵌套到“命名空间”中，如下所示：

```
 = form_tag({:action => :import}, :multipart => true) do
    = file_field_tag 'form1[file]'
    = submit_tag 'Import', name: 'form1[import_this]' 
```

第二种形式：

```
 = form_tag({:action => :import}, :multipart => true) do
    = file_field_tag 'form2[file]'
    = submit_tag 'Import', name: 'form2[import_this]' 
```

然后在控制器中，您可以像这样访问它们：

```
params[:form1][:file] 
```

或者

```
params[:form2][:file] 
```

**请记住**，您不能同时提交两种表格。

# algorithm - 操作性条件反射算法？

> ID：13545543
> 
> 赞同：1
> 
> 时间：2012-11-24T20:58:53.860
> 
> 标签：algorithm, machine-learning, artificial-intelligence, neural-network, artificial-life

为代理实施实时操作性条件反射（基于监督奖励/惩罚的学习）的最佳方法是什么？我应该使用神经网络（以及什么类型）？或者是其他东西？

我希望代理能够接受训练，像狗一样遵循命令。这些命令将以触摸屏上的手势形式出现。我希望代理能够接受训练以遵循路径（在连续的 2D 空间中），根据命令进行行为更改（由 FSM 状态转换建模），并执行一系列动作。

代理将处于模拟的物理环境中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:52:24.533

[强化学习](http://en.wikipedia.org/wiki/Reinforcement_learning)是一个很好的机器学习算法来解决你的问题。

基本的强化学习模型包括：

*   一组环境状态`S`（你有一个以某种方式离散的二维空间，这是狗的当前位置，如果你想做连续的二维空间，你可能需要一个神经网络来作为值函数映射器。）
*   一组动作`A`（你提到狗执行一系列动作，例如移动、旋转）
*   状态之间的转换规则（你的狗的位置转换可以通过 FSM 建模）
*   确定`r`转换的标量立即奖励的规则（到达目标位置时，您可能希望给狗一个大奖励，而中间里程碑也欢迎小奖励）
*   描述代理观察的规则。（狗的视野可能有限，例如，只能看到 4 或 8 个相邻单元格，下图是显示狗的当前位置`P`和狗可以看到的 4 个相邻单元格的示例。）

![在此处输入图像描述](../Images/b3942bd84ee155e432ea6eeabe0b4577.png)

要找到最优策略，您可以从无模型技术 - [q-learning](http://en.wikipedia.org/wiki/Q-learning)开始。

# javascript - 使用 jQuery 设置链接悬停属性

> ID：13545546
> 
> 赞同：0
> 
> 时间：2012-11-24T20:59:23.687
> 
> 标签：javascript, jquery, css

我想用 jQuery 改变链接的背景颜色，链接的原始 CSS 是

```
#container ul li:hover ul li a{
    background: #FF0000
} 
```

我正在尝试以下 jQuery 代码，但它似乎不起作用。

```
jQuery('#container ul li:hover ul li a').css('background', '#FF0000'); 
```

我可以为普通链接设置 css，但它唯一导致链接悬停的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:00:49.197

试试这个：

```
jQuery('#container ul li ul li a').hover(function(){
   $(this).css('background', '#FF0000');
}) 
```

或这个 ：

```
jQuery('#container ul li').hover(function(){
   $(this).find("ul li a").css('background', '#FF0000');
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:04:19.933

您可以尝试使用 jquery 悬停功能。[http://api.jquery.com/hover/](http://api.jquery.com/hover/) 并重新设置颜色。

# r - 如何将包含一列的数据框写入文件？

> ID：13545547
> 
> 赞同：5
> 
> 时间：2012-11-24T20:59:31.240
> 
> 标签：r

这是我的虚拟数据集：

```
dataset<-data.frame(a=c(1,2,3,4),b=c('a','b','c','d'), c=c("HI","DD","gg","ff"))
g=list(c("a","b"),c(2,3,4), c(44,33,11,22),c("chr","ID","i","II"))
dataset$l<-g
dataset

 a b  c              l
1 1 a HI           a, b
2 2 b DD        2, 3, 4
3 3 c gg 44, 33, 11, 22
4 4 d ff chr, ID, i, II

> mode(dataset$l)
[1] "list" 
```

当我尝试将数据集写入文件时：

```
> write.table(dataset, "dataset.txt", quote=F, sep="\t")
Error in write.table(x, file, nrow(x), p, rnames, sep, eol, na, dec, as.integer(quote),  : 
  unimplemented type 'list' in 'EncodeElement' 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T00:44:20.003

保存的输出不可读。dump 或 dput 的输出是 ASCII 并且对于了解 R 对象结构的人来说是可读的，但我猜你希望它更传统地排列。

```
>  apply(dataset, 1, function(x) paste(x, sep=",", collapse=","))
[1] "1,a,HI,c(\"a\", \"b\")"                  
[2] "2,b,DD,c(2, 3, 4)"                       
[3] "3,c,gg,c(44, 33, 11, 22)"                
[4] "4,d,ff,c(\"chr\", \"ID\", \"i\", \"II\")" 
```

反斜杠不出现在文本文件输出中：

```
 writeLines(con="test.txt", apply(dataset, 1, function(x) paste(x, sep=",", collapse=",")))
#-------output-----
1,a,HI,c("a", "b")
2,b,DD,c(2, 3, 4)
3,c,gg,c(44, 33, 11, 22)
4,d,ff,c("chr", "ID", "i", "II") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T02:51:34.503

我可以考虑几个选项，具体取决于您要实现的目标。

如果它仅用于显示，那么您可能只需要`capture.output()`or `sink()`; 这些都不是很方便读回R：

```
capture.output(dataset, file="myfile.txt")
### Result is a text file that looks like this:
#   a b  c              l
# 1 1 a HI           a, b
# 2 2 b DD        2, 3, 4
# 3 3 c gg 44, 33, 11, 22
# 4 4 d ff chr, ID, i, II
sink("myfile.txt")
dataset
sink()
## Same result as `capture.output()` approach 
```

如果您希望能够将结果表读回 R 中（尽管没有保留“ `l`”列是列表的事实），您可以采用类似于 @DWin 建议的方法。

在下面的代码中，该`dataset2[sapply...`行标识了哪些变量是列表并将它们连接成一个字符串。因此，它们成为简单的字符变量，允许您使用`write.table()`.

```
dataset2 <- dataset # make a copy just to be on the safe side
dataset2[sapply(dataset2, is.list)] <- apply(dataset2[sapply(dataset2, is.list)], 
                                             1, function(x) 
                                                 paste(unlist(x), 
                                                       sep=", ", collapse=", "))
str(dataset2)
# 'data.frame':    4 obs. of  4 variables:
#  $ a: num  1 2 3 4
#  $ b: Factor w/ 4 levels "a","b","c","d": 1 2 3 4
#  $ c: Factor w/ 4 levels "DD","ff","gg",..: 4 1 3 2
#  $ l: chr  "a, b" "2, 3, 4" "44, 33, 11, 22" "chr, ID, i, II"
write.table(dataset2, "myfile.txt", quote=FALSE, sep="\t")
# can be read back in with: dataset3 <- read.delim("myfile.txt") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T22:01:23.587

如果要求之一是保留 excel 等的格式，这可能会有所帮助：

```
 writableTable <- tableFlatten(dataset, filler="")
  #   a b  c l.01 l.02 l.03 l.04
  #   1 a HI    a    b          
  #   2 b DD    2    3    4     
  #   3 c gg   44   33   11   22
  #   4 d ff  chr   ID    i   II

  write.csv(writableTable, "myFile.csv") 
```

* * *

`tableFlatten`使用一个函数`listFlatten`，顾名思义，它采用嵌套列表并将它们展平。但是，如果列表中的元素大小不同，它会添加填充符（可以是`NA`s、空格或任何其他用户定义的选项）

它的代码如下。

```
tableFlatten <- function(tableWithLists, filler="") {
# takes as input a table with lists and returns a flat table
#  empty spots in lists are filled with value of `filler`
#
# depends on: listFlatten(.), findGroupRanges(.), fw0(.)

  # index which columns are lists
  listCols <- sapply(tableWithLists, is.list)

  tableWithLists[listCols]
  tableWithLists[!listCols]

  # flatten lists into table
  flattened <- sapply(tableWithLists[listCols], listFlatten, filler=filler, simplify=FALSE)

  # fix names
  for (i in 1:length(flattened)) colnames(flattened[[i]]) <- fw0(ncol(flattened[[i]]), 2)

  # REASSEMBLE, IN ORDER
    # find pivot point counts
    pivots <- sapply(findGroupRanges(listCols), length)

    #index markers
    indNonList <- indList <- 1

    # nonListGrp <- (0:(length(pivots)/2)) * 2 + 1
    # ListGrp <- (1:(length(pivots)/2)) * 2
    final <- data.frame(row.names=row.names(tableWithLists))
    for (i in 1:length(pivots)) {
      if(i %% 2 == 1) {
          final <- cbind(final, 
                       tableWithLists[!listCols][indNonList:((indNonList<-indNonList+pivots[[i]])-1)]
                       )
      }  else  {
          final <- cbind(final, 
                       flattened[indList:((indList<-indList+pivots[[i]])-1)]
                       )
      }
    }

    return(final)
}

#=====================================

listFlatten <- function(obj, filler=NA) {
## Flattens obj like rbind, but if elements are of different length, plugs in value filler

  # Initialize Vars
  bind <- FALSE

  # IF ALL ELEMENTS ARE MATRIX-LIKE OR VECTORS, MAKE SURE SAME NUMBER OF COLUMNS
  matLike <- sapply(obj, function(x) !is.null(dim(x)))
  vecLike <- sapply(obj, is.vector)

  # If all matrix-like. 
  if (all(matLike))   {
    maxLng <- max(sapply(obj[matLike], ncol))
    obj[matLike] <- lapply(obj[matLike], function(x) t(apply(x, 1, c, rep(filler, maxLng - ncol(x)))))
    bind <- TRUE

  # If all vector-like
  }  else if (all(vecLike))  {
    maxLng <- max(sapply(obj[vecLike], length))
    obj[vecLike] <- lapply(obj[vecLike], function(x) c(x, rep(filler, maxLng - length(x)))) 
    bind <- TRUE

  # If all are either matrix- or vector-like 
  }  else if (all(matLike & vecLike))   {

    maxLng <- max(sapply(obj[matLike], ncol), sapply(obj[vecLike], length))

    # Add in filler's as needed
    obj[matLike] <- 
       lapply(obj[matLike], function(x) t(apply(x, 1, c, rep(filler, maxLng - ncol(x)))))
    obj[vecLike] <- 
       lapply(obj[vecLike], function(x) c(x, rep(filler, maxLng - length(x))))
    bind <- TRUE
  } 

  # If processed and ready to be returned, then just clean it up
  if(bind)  {
    ret <- (do.call(rbind, obj))
    colnames(ret) <- paste0("L", fw0(1:ncol(ret), digs=2))
    return(ret)
  }

  # Otherwise, if obj is sitll a list, continue recursively    
  if (is.list(obj)) { 
      return(lapply(obj, listFlatten))
  }

  # If none of the above, return an error. 
  stop("Unknown object type")
}
#--------------------------------------------

findGroupRanges <- function(booleanVec) {
# returns list of indexes indicating a series of identical values
  pivots <- which(sapply(2:length(booleanVec), function(i) booleanVec[[i]] != booleanVec[[i-1]])) 

  ### THIS ISNT NEEDED... 
  # if (identical(pivots, numeric(0)))
  #   pivots <- length(booleanVec)

  pivots <- c(0, pivots, length(booleanVec))
  lapply(seq(2, length(pivots)), function(i)
    seq(pivots[i-1]+1, pivots[i])
  )
}

#--------------------------------------------

fw0 <- function(num, digs=NULL, mkSeq=TRUE)  {
  ## formats digits with leading 0's. 
  ## num should be an integer or range of integers.
  ## if mkSeq=T, then an num of length 1 will be expanded to seq(1, num).   

  # TODO 1:  put more error check
  if (is.list(num))
    lapply(num, fw0)

  if (!is.vector(num)) {
    stop("num should be integer or vector")
  }

  # convert strings to numbers
  num <- as.numeric(num)

  # If num is a single number and mkSeq is T, expand to seq(1, num)
  if(mkSeq && !length(num)>1)
    num <- (1:num)

  # number of digits is that of largest number or digs, whichever is max
  digs <- max(nchar(max(abs(num))), digs)  

  # if there are a mix of neg & pos numbers, add a space for pos numbs
  posSpace <- ifelse(sign(max(num)) != sign(min(num)), " ", "")

  # return: paste appropriate 0's and preface neg/pos mark
  sapply(num, function(x) ifelse(x<0, 
    paste0("-", paste0(rep(0, max(0, digs-nchar(abs(x)))), collapse=""), abs(x)),
    paste0(posSpace, paste0(rep(0, max(0, digs-nchar(abs(x)))), collapse=""), x)
    ))
}

#----------------------------------------------- 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T21:05:11.230

您可以为此使用 dput。

```
dput(dataset, "dataset.txt") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T23:59:08.507

你也可以使用 save()

```
 save(dataset, file="dataset.RData") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-17T17:27:04.327

@Ananda 提供的[答案](https://stackoverflow.com/a/13547855/63093)非常好，但是，当我有一个包含两列是列表的数据框时遇到了一个问题。

```
dataset<-data.frame(a=c(1,2,3,4),b=c('a','b','c','d'), c=c("HI","DD","gg","ff"))
g=list(c("a","b"),c(2,3,4), c(44,33,11,22),c("chr","ID","i","II"))
dataset$l<-g
dataset$l2<-g
dataset

  a b  c              l             l2
1 1 a HI           a, b           a, b
2 2 b DD        2, 3, 4        2, 3, 4
3 3 c gg 44, 33, 11, 22 44, 33, 11, 22
4 4 d ff chr, ID, i, II chr, ID, i, II 
```

使用原始答案，两个列表列都包含两列的连接内容。

```
 a b  c                              l                             l2
1 1 a HI                     a, b, a, b                     a, b, a, b
2 2 b DD               2, 3, 4, 2, 3, 4               2, 3, 4, 2, 3, 4
3 3 c gg 44, 33, 11, 22, 44, 33, 11, 22 44, 33, 11, 22, 44, 33, 11, 22
4 4 d ff chr, ID, i, II, chr, ID, i, II chr, ID, i, II, chr, ID, i, II 
```

相反，试试这个修改后的版本：

```
dataset2 <- dataset # make a copy just to be on the safe side
dataset2[sapply(dataset2, is.list)] <-
    sapply(dataset2[sapply(dataset2, is.list)], 
           function(x)sapply(x, function(y) paste(unlist(y),collapse=", ") ) )
dataset2

  a b  c              l             l2
1 1 a HI           a, b           a, b
2 2 b DD        2, 3, 4        2, 3, 4
3 3 c gg 44, 33, 11, 22 44, 33, 11, 22
4 4 d ff chr, ID, i, II chr, ID, i, II 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-05-28T17:31:09.943

我偶然发现了这一点，虽然有很多很好的答案，但我最终做了其他事情。分享给后人。

```
library(dplyr)

flatten_list = function(x){
    if (typeof(x) != "list") {
        return(x)
    }
    sapply(x, function(y) paste(y, collapse = " | "))
}

data %>%
    mutate_each(funs(flatten_list)) ->
    write_csv("data.csv") 
```

# jquery - 将 insertBefore 与 $.get 的结果一起使用

> ID：13545562
> 
> 赞同：2
> 
> 时间：2012-11-24T21:00:19.697
> 
> 标签：jquery

我试图用 jQuery 来完成这项工作

```
var ng = $.get('/static/views/ng.html');
$('#myHeader').insertBefore(ng); 
```

ng.html 包含这个

```
<div id="ng">
    <div class="c all"></div>
    <div class="f all"></div>
    <div class="p all"></div>
</div> 
```

它不会引发任何错误，我认为 $.get 没有返回正确的对象但不知道如何继续。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T21:02:54.083

由于请求是异步的，因此返回的是一个承诺，而不是查询的结果（尚不存在）。

惯用的解决方案是将回调传递给[get](http://api.jquery.com/jQuery.get/)，当查询结果可用时调用此回调：

```
$.get('/static/views/ng.html', function(html) {
    $(html).insertBefore('#myHeader');
}); 
```

您还可以以这种等效的方式使用返回的对象，即承诺：

```
$.get('/static/views/ng.html').success(function(html) {
    $(html).insertBefore('#myHeader');
}); 
```

请注意，我还反转了[insertBefore](http://api.jquery.com/insertBefore/)的接收者和参数。

# windows-runtime - WinRT AppBar 根据上下文更改（或忽略右键单击）？

> ID：13545563
> 
> 赞同：0
> 
> 时间：2012-11-24T21:00:35.017
> 
> 标签：windows-runtime, contextmenu, appbar

我正在将桌面 WPF 应用程序移植到 WinRT，但遇到了一个小问题。

我有一个 ItemsControl，每个项目都有一个上下文菜单来删除/编辑该项目。

有人告诉我 PopupMenu 在 WinRT 中不好，我应该使用 AppBar。

我认为我做错了什么或者我误解了这一点。

我认为我可以将这些选项放在 AppBar 上，当我选择一个元素时，弹出该栏并单击我需要的位置。

问题是当我右键单击我的应用程序的任何部分时，AppBar 会显示出来，这样按钮就会显示选中的项目。

那么我可以在不同的上下文中更改 AppBar 的布局（因为似乎微软希望我们将 AppBar 用作没有上下文功能的上下文菜单）还是只在我需要时通过代码显示它？

最好有一个带有一些应用程序范围选项的 TopAppBar 和一个仅用于 ListView 的项目上下文菜单的 BottomAppBar。

或者，也许我做错了所有这些事情，我必须使用另一种方法在 Listview 的项目上添加额外的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T07:48:01.503

您正在正确地考虑这一点。`AppBar`是您应该放置所有非必要和基于选择的命令的地方。

[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh761499.aspx)和[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh465302.aspx)的指南建议应按以下方式安排它们：

*   导航命令应该在`TopAppBar`
*   与选择相关的命令应该在左侧`BottomAppBar`
*   其余特定于页面的命令应位于右侧`BottomAppBar`

只有在选择该命令的相关项目时，才应显示上下文命令。为此，您应该`Visibility`相应地设置这些命令。还应`AppBar`在选择包含上下文命令的项目时自动打开。您可以通过设置其`IsOpen`属性以编程方式执行此操作。您还应该通过`IsSticky`属性将其设置为粘性模式。

如果您使用的是 MVVM，您可以将您的视图模型属性绑定到上面提到的所有`Button`属性`AppBar`。

[WinRT XAML Toolkit](http://winrtxamltoolkit.codeplex.com/)中有一个`CustomAppBar`可用的控件。我自己还没有使用过它，但它有一些额外的功能可能对你的情况很有用。

# c# - c# - 如何在 asp.net 中捕获 COMException？

> ID：13545566
> 
> 赞同：0
> 
> 时间：2012-11-24T21:00:51.227
> 
> 标签：c#, asp.net, exception, sharepoint-2010, exception-handling

在 sharepoint 上的我的 asp.net 页面中，当我与另一个用户同时更改数据库时，我收到此错误：

```
(11/24/2012 3:53:32 PM) - Error Message: Save Conflict.

Your changes conflict with those made concurrently by another user. If you want your changes to be applied, click Back in your Web browser, refresh the page, and resubmit your changes.
Stacktrace:    at Microsoft.SharePoint.SPGlobal.HandleComException(COMException comEx)
   at Microsoft.SharePoint.Library.SPRequest.UpdateField(String bstrUrl, String bstrListName, String bstrXML)
   at Microsoft.SharePoint.SPField.UpdateCore(Boolean bToggleSealed)
   at PDF_Library.VisualWebPart1.PDF_Library.import_sections_into_column()
   at PDF_Library.VisualWebPart1.PDF_Library.save_Click(Object sender, EventArgs e) 
```

但是我如何捕捉到这个错误？我试着做

```
catch (COMException) {

} 
```

但这不起作用...

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:05:35.717

COMException 由 SharePoint 在 HandleComException 方法中处理。然后，它会引发 Microsoft.SharePoint.SPException 并显示消息“保存冲突”。如果您注意捕获此特定异常类型，请将 catch 块更改为

```
catch (Microsoft.SharePoint.SPException) {
  // do stuff
} 
```

# objective-c - 在 Objective-C 可可中使用方法

> ID：13545568
> 
> 赞同：1
> 
> 时间：2012-11-24T21:01:19.167
> 
> 标签：objective-c, ios, cocoa, uitextfield, ibaction

我遇到了一些非常基本的问题。我想调用这个动作：

```
- (IBAction)changeGreeting:(id)sender {
    self.userName = self.textField.text;

    NSString *nameString = self.userName;
    if ([nameString length]==0) {
        nameString = @"World";

    }
    NSString *greeting = [[NSString alloc] initWithFormat:@"Hello, %@!", nameString];
    self.label.text = greeting;

} 
```

当用户在文本字段中输入文本后按下返回。这就是我所拥有的：

```
-(BOOL)textFieldShouldReturn:(UITextField *)theTextField{
    if (theTextField == self.textField) {
        [theTextField resignFirstResponder];
        [changeGreeting];
    }
    return YES;
} 
```

我不知道在写着“changeGreeting”的地方放什么。认为我在这里错过了这个概念。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:03:00.043

你的语法是错误的。尝试这个：

```
[self changeGreeting:self]; 
```

在 Objective-C 中发送消息（调用函数）的语法是这样的：

```
[receiver message]; 
```

由于您在调用它的同一类中实现该`changeGreeting:`方法，因此接收器将是`self`. 作为参数（发送者），您通常传递发送消息的对象，但由于您在实现中不使用它，`changeGreeting:`因此您传递的内容并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:04:06.580

你以错误的方式调用了 changeGreeting 函数

你应该这样称呼它

```
[self changeGreeting:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T03:52:26.253

或者，如果您想从 textField 中跟踪某些内容，那么

```
[self changeGreeting:theTextField]; 
```

如果您需要基于文本字段进行一些处理，发件人将获取文本字段作为参数。

# ruby - 在 Ruby 中使用未附加发送方法的正确方法是什么？

> ID：13545570
> 
> 赞同：0
> 
> 时间：2012-11-24T21:01:34.037
> 
> 标签：ruby

在开发自己的库的过程中，我一直在阅读 Github 上的各种 Ruby 库，以了解常见的习语。我一直在引用的一个库（[在此处找到](https://github.com/paulsingh/angellist-api/blob/master/lib/angellist_api/api.rb)）利用了我所谓的“未附加发送方法”。这是代码：

```
module AngellistApi
    class API

        attr_accessor *Configuration::VALID_OPTIONS_KEYS

        # Creates a new API
        def initialize(options={})
          options = AngellistApi.options.merge(options)
          Configuration::VALID_OPTIONS_KEYS.each do |key|
            send("#{key}=", options[key])
          end 
        end
    end  
end 
```

我可以在网上找到有关 Ruby 中的 send 方法的所有文档，都将其描述为一种通过字符串或符号调用对象方法的方式。但是，所有示例都将 send 方法附加到对象，例如：

```
object.send(:method_name, argument1) 
```

当它没有连接到一个对象时会发生什么？在这种情况下，它是在调用它所调用的类的方法吗？有人可以为我解释这段代码吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:16:23.390

“未附加”不是正确的术语，它是一个没有*显式接收器*的方法调用，因此它使用*隐式接收器*，即`self`. 所以`send(:foo)`（隐式接收器）等价于`self.send(:foo)`（显式接收器）。这不是唯一的`send`，任何方法调用都是如此。

唯一不完全正确的情况是被调用的方法是私有的，因为私有方法不能用显式接收者调用（实际上，这是 Ruby 中私有的定义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:07:11.163

由于它发生在实例方法中，这里的隐含对象是`self`.

```
# create a new object, assigning "foo = bar" given that
# foo is in VALID_OPTIONS_KEYS
object = AngellistApi::API.new({:foo => 'bar'})

# this would essentially do the same thing again
object.send("foo=", "bar")

# (which is equivalent to)
object.foo = bar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:23:07.100

Generally speaking, in Ruby when a method is called without an explicit receiver, the implicit receiver is `self`. `self` can sometimes be slippery though -- understanding what `self` is in various contexts is an important and enlightening step in the path to Ruby mastery :-) Yehuda Katz has [a nice article](http://yehudakatz.com/2009/11/15/metaprogramming-in-ruby-its-all-about-the-self/) on the subject, and there are [many others](http://sidtalk.wordpress.com/2008/10/06/what-exactly-is-ruby-self/) out there.

I think [the Pry alternative REPL](https://rubygems.org/gems/pry) can be helpful for exploring. A sample session where the AngelList API lib was loaded:

```
[1] pry(main)> cd AngellistApi::API
[2] pry(AngellistApi::API):2> self
=> AngellistApi::API
[3] pry(AngellistApi::API):2> ls
Object.methods: yaml_tag
AngellistApi::API#methods: access_token  access_token=  adapter  adapter=  connection_options  connection_options=  endpoint  endpoint=  gateway  gateway=  proxy  proxy=  user_agent  user_agent=
locals: _  _dir_  _ex_  _file_  _in_  _out_  _pry_  binding_impl_method 
```

Here you can see the accessors that were defined as a result of `attr_accessor *Configuration::VALID_OPTIONS_KEYS`.

# css - Bootstrap 中奇怪的 CSS 效果。在容器 div 内显示大量内容 div 时无意缩进

> ID：13545574
> 
> 赞同：7
> 
> 时间：2012-11-24T21:01:46.017
> 
> 标签：css, twitter-bootstrap, margin, indentation

我正在使用 Bootstrap 作为我和我的朋友正在开发的项目的 CSS 框架（因此是 D&D 主题）。我有一个页面，我们在其中显示特定用户的 D&D 角色。在页面上显示这些字符时，每行应该有四个（span4's in a row-fluid）。问题是从第二行开始有一个奇怪的缩进（参见附加的小提琴）。

我一直在 Chrome 中使用“检查组件”，但我似乎无法理解导致这种情况发生的原因。

[http://jsfiddle.net/sE5en/4/](http://jsfiddle.net/sE5en/4/)

希望我稍微解释了这个问题:)

主要的“容器”（本质上是 ）粘贴在下面：

```
 <div class="container"><div class="row">
    <div class="span12">
        <h3 class="mycharacters">My characters</h3>
        <a class="btn btn-success btn-small pull-right">
            <i class="icon-plus-sign icon-white"></i> Add character
        </a>
    </div>
    <div class="span12" id="actor_result"><div class="row-fluid">
<div class="span4 well well-small"><div class="media"><a class="pull-left" href="#"><img class="media-object img-circle actor" src="http://placehold.it/64x64"></a><div class="overflow-media-body media-body"><div class="btn-group pull-right"><button class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="icon-cog"></span></button><ul class="dropdown-menu"><li><a href="actor_edit_owner?id=1"><i class="icon-pencil"></i> Edit
                                    </a></li><li><a href=""><i class="icon-picture"></i> Change avatar</a></li><li><a href=""><i class="icon-trash"></i> Delete</a></li></ul></div><h4 class="media-heading">Davius</h4><div><i class="icon-heart"></i><strong> Health: </strong>17/20hp</div><br><br></div><div><i class="icon-fire"></i><strong> Effects: </strong></div><div class="actor-text">Mumblecore bushwick sed, nulla id street art dolore delectus wolf american apparel artisan sriracha.
Laboris seitan hoodie, freegan brooklyn letterpress adipisicing chambray mixtape id tofu organic butcher small batch. Art party carles readymade messenger bag williamsburg. Irony placeat sustainable, high life cillum yr sed vinyl pork belly messenger bag williamsburg VHS. Occaecat lo-fi readymade gluten-free 3 wolf moon. Ad tofu twee, blog nulla mumblecore gentrify brooklyn odio cliche selvage put a bird on it pork belly chillwave deserunt. Ea assumenda chillwave, keytar velit tumblr pour-over enim VHS mcsweeney's blog.</div><div><i class="icon-edit"></i><strong> Notes: </strong></div><div class="actor-text"></div></div></div>
<div class="span4 well well-small"><div class="media"><a class="pull-left" href="#"><img class="media-object img-circle actor" src="images/avatar/actor/leonidas.png"></a><div class="overflow-media-body media-body"><div class="btn-group pull-right"><button class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="icon-cog"></span></button><ul class="dropdown-menu"><li><a href="actor_edit_owner?id=3"><i class="icon-pencil"></i> Edit
                                    </a></li><li><a href=""><i class="icon-picture"></i> Change avatar</a></li><li><a href=""><i class="icon-trash"></i> Delete</a></li></ul></div><h4 class="media-heading">Awesome Maximus</h4><div><i class="icon-heart"></i><strong> Health: </strong>1/30hp</div><br><br></div><div><i class="icon-fire"></i><strong> Effects: </strong></div><div class="actor-text">DYYYING! öööääöååå</div><div><i class="icon-edit"></i><strong> Notes: </strong></div><div class="actor-text">lol</div></div></div>
<div class="span4 well well-small"><div class="media"><a class="pull-left" href="#"><img class="media-object img-circle actor" src="http://placehold.it/64x64"></a><div class="overflow-media-body media-body"><div class="btn-group pull-right"><button class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="icon-cog"></span></button><ul class="dropdown-menu"><li><a href="actor_edit_owner?id=4"><i class="icon-pencil"></i> Edit
                                    </a></li><li><a href=""><i class="icon-picture"></i> Change avatar</a></li><li><a href=""><i class="icon-trash"></i> Delete</a></li></ul></div><h4 class="media-heading">Master Thief Sven</h4><div><i class="icon-heart"></i><strong> Health: </strong>10/13hp</div><br><br></div><div><i class="icon-fire"></i><strong> Effects: </strong></div><div class="actor-text">Lurking</div><div><i class="icon-edit"></i><strong> Notes: </strong></div><div class="actor-text">He's a backstabber</div></div></div>
<div class="span4 well well-small"><div class="media"><a class="pull-left" href="#"><img class="media-object img-circle actor" src="http://placehold.it/64x64"></a><div class="overflow-media-body media-body"><div class="btn-group pull-right"><button class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="icon-cog"></span></button><ul class="dropdown-menu"><li><a href="actor_edit_owner?id=5"><i class="icon-pencil"></i> Edit
                                    </a></li><li><a href=""><i class="icon-picture"></i> Change avatar</a></li><li><a href=""><i class="icon-trash"></i> Delete</a></li></ul></div><h4 class="media-heading">Giant Frederic</h4><div><i class="icon-heart"></i><strong> Health: </strong>25/27hp</div><br><br></div><div><i class="icon-fire"></i><strong> Effects: </strong></div><div class="actor-text">Farting</div><div><i class="icon-edit"></i><strong> Notes: </strong></div><div class="actor-text">I will cruuuush you!</div></div></div>
<div class="span4 well well-small"><div class="media"><a class="pull-left" href="#"><img class="media-object img-circle actor" src="http://placehold.it/64x64"></a><div class="overflow-media-body media-body"><div class="btn-group pull-right"><button class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="icon-cog"></span></button><ul class="dropdown-menu"><li><a href="actor_edit_owner?id=6"><i class="icon-pencil"></i> Edit
                                    </a></li><li><a href=""><i class="icon-picture"></i> Change avatar</a></li><li><a href=""><i class="icon-trash"></i> Delete</a></li></ul></div><h4 class="media-heading">One eyed idiot</h4><div><i class="icon-heart"></i><strong> Health: </strong>35/35hp</div><br><br></div><div><i class="icon-fire"></i><strong> Effects: </strong></div><div class="actor-text">Rested</div><div><i class="icon-edit"></i><strong> Notes: </strong></div><div class="actor-text">Can't see straight</div></div></div>
<div class="span4 well well-small"><div class="media"><a class="pull-left" href="#"><img class="media-object img-circle actor" src="http://placehold.it/64x64"></a><div class="overflow-media-body media-body"><div class="btn-group pull-right"><button class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="icon-cog"></span></button><ul class="dropdown-menu"><li><a href="actor_edit_owner?id=7"><i class="icon-pencil"></i> Edit
                                    </a></li><li><a href=""><i class="icon-picture"></i> Change avatar</a></li><li><a href=""><i class="icon-trash"></i> Delete</a></li></ul></div><h4 class="media-heading">Pantless bum</h4><div><i class="icon-heart"></i><strong> Health:   </strong>5/7hp</div><br><br></div><div><i class="icon-fire"></i><strong> Effects: </strong>  </div><div class="actor-text">Stinks like you wouldn't believe</div><div><i class="icon-edit">    </i><strong> Notes: </strong></div><div class="actor-text">Needs help...</div></div></div>
</div></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:08:50.450

该缩进来自这样一个事实，即您排列的 div 堆栈超出了每行 12 列的网格限制，因此超过 12 列标记的网格元素按设计缩进。`.span4`您可以通过每个(4x3=12)仅排列 3 个div`.row-fluid`或使用一些 css 魔法来定位第四个网格元素并删除边距来避免这种情况，如下所示：

**CSS**

```
.row-fluid > .span4:nth-child(4) {
    margin-left:0;
} 
```

当然，`nth-child`旧的浏览器（例如 IE7-8）不支持选择器，但是如果您想扩展支持，可以将 CSS 替换为一些 jQuery。

更新小提琴：http: [//jsfiddle.net/sE5en/5/show/](http://jsfiddle.net/sE5en/5/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:15:07.610

缩进并不奇怪，而是意料之中的。它在第 343 行的 bootstrap.css 中定义：

```
.row-fluid [class*="span"] {
    ...
    margin-left: 2.127659574468085%;
    *margin-left: 2.074468085106383%;
    ...
} 
```

在第 218 行

```
[class*="span"] {
    float: left;
    min-height: 1px;
    margin-left: 20px;
} 
```

连续第一个 div 在第 355 行覆盖了边距：

```
.row-fluid [class*="span"]:first-child {
    margin-left: 0;
} 
```

当行内容以跨浏览器兼容的方式跨越多行时，我认为您不能覆盖边距设置，因此您应该将每 3 个字符的 div 放在单独的行中。我已经更新了你的[小提琴](http://jsfiddle.net/sE5en/6/)，所以你可以看到不同之处。

# ruby - Ruby数组转换成方法

> ID：13545576
> 
> 赞同：1
> 
> 时间：2012-11-24T21:02:16.093
> 
> 标签：ruby, arrays, methods

我在 Ruby 中有一个数组，比如`["dog", "cat", bat"]`. 如何获得一个数组，其中每个元素都传递给特定方法？例如，如果该方法反转输入字符串，那么我希望得到`["god", "tac", "tab"]`. 我知道迭代元素很容易，将它们传递给方法，然后将结果放入数组中。但是有没有更短的方法？

编辑：我也**不想**修改原始数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T21:03:35.970

```
["dog", "cat", "bat"].map { |word| word.reverse } 
```

或者

```
["dog", "cat", "bat"].map &:reverse 
```

# java - Java套接字多线程安全吗？

> ID：13545578
> 
> 赞同：17
> 
> 时间：2012-11-24T21:02:25.640
> 
> 标签：java, multithreading, sockets, thread-safety

如果我有多个 Java 线程同时写入同一个 Socket 实例，这会影响从同一个套接字读取的对象的完整性吗？即对象的内容是否会被弄乱等。对象的顺序可以是随机的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-24T21:03:18.933

一般来说，没有任何保证。不同对象的位很可能最终在电线上交错，使结果难以辨认。**因此，您需要提供外部同步。**

有趣的是，即使是操作系统级别的单个套接字写入也不一定是原子的。有关进一步讨论，请参阅[从多个线程在同一个 TCP 套接字上发出阻塞 write() 调用是否安全？](https://stackoverflow.com/questions/1457256/is-it-safe-to-issue-blocking-write-calls-on-the-same-tcp-socket-from-multiple)并且[要小心 sendmsg() 系列函数](http://web.archive.org/web/20081204092407/http://www.almaden.ibm.com/cs/people/marksmith/sendmsg.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T21:21:11.403

> 如果我有多个 Java 线程同时写入同一个 Socket 实例

`OutputStream`您将从多个线程写入相同的内容。
是什么让您认为没有同步是个好主意？如果您开始同时从多个线程写入文件而没有同步，您是否希望该文件包含任何有意义的内容？

# c# - 通过 ID 查找继承的对象 - 实体框架

> ID：13545579
> 
> 赞同：5
> 
> 时间：2012-11-24T21:02:29.107
> 
> 标签：c#, sql, entity-framework, entity

如下图所示，我有一个带有基类“Person”的模型，实体“Kunde”和“Techniker”都继承了基类。

![](../Images/75609bee1a32df677b1c563441d618e1.png)

现在我遇到了以下问题。当我尝试使用 Find 方法获取具有给定 ID 的派生类 Kunde 的对象时，它告诉我这`OfType<TResult>`是一个方法并且在此上下文中无效。

```
public Kunde GetById(int id)
{
   return dbModel.PersonMenge.OfType<Kunde>.Find(id);
} 
```

我也尝试删除 OfType 但它显然告诉我对象 Person 不能隐式转换为 Kunde。

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:15:46.853

这只是两个括号：

```
OfType<Kunde>() 
```

但是你不能再使用`Find`了，因为那是`DbSet`. 您必须使用`Single`或`dbModel.PersonMenge.Find(id) as Kunde;`。

# haskell - 在 Haskell 中使用“let”的功能纯度

> ID：13545580
> 
> 赞同：6
> 
> 时间：2012-11-24T21:02:40.743
> 
> 标签：haskell

当我正在学习 Haskell 时，我知道它是一种纯粹的函数式语言。我无法理解为什么`let`- 语句不违反纯度。

例如（在 ghci 中）：

```
Prelude> let e = exp 1
Prelude> e
2.718281828459045
Prelude> let e = 2
Prelude> e
2 
```

我的第二个`let`陈述不是产生副作用吗？或者第二个`let`语句是一个新的闭包？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-24T21:06:29.800

你的第二个`let`创建一个新的绑定，`e`它会隐藏现有的变量。它不修改`e`. 您可以通过以下方式轻松检查：

```
Prelude> let e = 1
Prelude> let f () = "e is now " ++ show e
Prelude> f ()
"e is now 1"
Prelude> let e = 2
Prelude> e
2
Prelude> f ()
"e is now 1"
Prelude> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-24T21:21:10.607

`let`引入了一个具有单个不可更改值的新局部变量，并且它具有比任何周围定义更多的局部范围，例如：

```
*Main> (let length = 2 in show length) ++ ' ':show (length "Hello")
"2 5" 
```

这里第一个`length`的值为 2，但它的范围在括号内。在括号之外，`length`表示它一直以来的意思。没有编辑任何内容，只是引入了一个更局部的变量，它恰好与不同范围内的另一个变量具有相同的名称。让我们通过省略括号并让它尝试生成`length`一个数字和一个函数来让 ghci 发疯：

```
*Main> let length = 2 in show length ++ ' ':show (length "Hello")

<interactive>:1:14:
    No instance for (Num ([Char] -> a0))
      arising from the literal `2'
    Possible fix: add an instance declaration for (Num ([Char] -> a0))
    In the expression: 2
    In an equation for `length': length = 2
    In the expression:
      let length = 2 in show length ++ ' ' : show (length "Hello")

<interactive>:1:19:
    No instance for (Show ([Char] -> a0))

      arising from a use of `show'
    Possible fix: add an instance declaration for (Show ([Char] -> a0))
    In the first argument of `(++)', namely `show length'
    In the expression: show length ++ ' ' : show (length "Hello")
    In the expression:
      let length = 2 in show length ++ ' ' : show (length "Hello") 
```

这是你的例子：

```
*Main> let e = exp 1 in show e ++ " " ++ let e = 2 in show e
"2.718281828459045 2" 
```

我将添加括号以强调范围：

```
*Main> let e = exp 1 in (show e ++ " " ++ (let e = 2 in (show e)))
"2.718281828459045 2" 
```

第一个`e`是隐藏而不是编辑。保留了引用透明度，但这绝对是不好的做法，因为它很难遵循。

* * *

现在偷偷的交互式提示有点像`do`IO monad 中的一大块，我们来看看：

```
testdo = do
  let e = exp 1
  print e
  let e = 2
  print e 
```

现在我不得不承认这看起来很像破坏参照透明性，但请记住，这看起来也是如此：

```
testWrite = do
   writeFile "test.txt" "Hello Mum"
   xs <- readFile "test.txt"
   print xs
   writeFile "test.txt" "Yo all"
   xs <- readFile "test.txt"
   print xs 
```

现在，我们在什么意义上获得了参照透明性？`xs`显然是指两个不同的字符串。那么，这个`do`符号实际上是什么意思？它是语法糖

```
testWrite = writeFile "test.txt" "Hello Mum"
         >> readFile "test.txt" 
         >>= (\xs -> print xs 
         >> writeFile "test.txt" "Yo all"
         >> readFile "test.txt"
         >>= (\xs -> print xs)) 
```

现在更清楚的是，看起来像是赋值的东西又只是局部范围。你大概很乐意做

```
increment :: [Int] -> [Int]
increment = \x -> map (\x -> x+1) x 
```

这是做同样的事情。

* * *

**总结**
似乎是分配只是引入了一个新的本地范围。呸。如果你经常使用它，你就会很不清楚你的代码是什么意思。

# coq - 重写依赖函数

> ID：13545585
> 
> 赞同：1
> 
> 时间：2012-11-24T21:03:19.480
> 
> 标签：coq, dependent-type

我正在尝试为二进制自然数（位列表）定义前置函数。我想将我的函数的输入限制为修剪过的数字（没有前导零）并且是正数（所以，我不必担心零的前身）。

这是运算符的定义`pred`：

```
Program Fixpoint pred (nat1: Nat) (H1: is_trim nat1 = True) (H2: is_pos nat1 H1 = True): Nat :=
  match nat1 with
  | Empt => _
  | Fill Zer nat2 => Fill One (pred nat2 H1 H2)
  | Fill One nat2 => Fill Zer nat2
  end. 
```

我的第一个义务如下：

```
nat1: Nat
H1: is_trim nat1 = True
H2: is_pos nat1 H1 = True
H3: Empt = nat1
______________________________________(1/1)
Nat 
```

但是，我不知道如何解决它。

矛盾显然在`H2`。但是，因为它取决于`H1`，所以我不能只`rewrite nat1`使用`Empt`，然后`(is_pos Empt H1)`使用`False`。

我应该如何证明这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:27:01.890

这个目标确实是微不足道的，因为您可以为 Empt 情况返回任何自然数，并且请放心，没有人可以达到该数字，因为他们首先必须传入适当的`H2 : is_pos nat1 H1`.

我相信解决此类问题的下一个“正确”方法是使用依赖模式匹配，如下所示：

```
Program Fixpoint pred (nat1: Nat) (H1: is_trim nat1 = True) (H2: is_pos nat1 H1 = True): Nat :=
  match nat1 as nat1' return is_pos nat1' H1 -> Nat with
  | Empt => fun isposEmpt =>
      (* hopefully, is_pos Empt H1 immediately reduces to False, and you can do this: *)
      False_rec Nat isposEmpt
  | Fill Zer nat2 => fun _ => Fill One (pred nat2 H1 H2)
  | Fill One nat2 => fun _ => Fill Zer nat2
  end H2. 
```

也就是说，您需要证明 nat1 是肯定的作为匹配的参数，并且您在 Empt 情况下得出结论，证明是假的，因此您也可以返回假的。

希望这可行并且有意义。下次请提供必要的定义，以帮助人们使用您的示例。

# c++ - C++ 提示拼写错误的单词

> ID：13545588
> 
> 赞同：0
> 
> 时间：2012-11-24T21:03:43.397
> 
> 标签：c++, c

> **可能重复：**
> [什么算法在拼写检查器中给出建议？](https://stackoverflow.com/questions/2294915/what-algorithm-gives-suggestions-in-a-spell-checker)

在旨在从文本文件中读取并为错误拼写单词提供建议的 C++ 程序中应该使用什么算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:06:53.040

使用[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)：

[http://thetechnofreak.com/technofreak/levenshtein-distance-implementation-c/](http://thetechnofreak.com/technofreak/levenshtein-distance-implementation-c/) [http://murilo.wordpress.com/2011/02/01/fast-and-easy-levenshtein-distance-using-a-trie-在-c/](http://murilo.wordpress.com/2011/02/01/fast-and-easy-levenshtein-distance-using-a-trie-in-c/)

# php - Html 表单似乎提交到了错误的地方？

> ID：13545597
> 
> 赞同：0
> 
> 时间：2012-11-24T21:04:31.483
> 
> 标签：php, html

最近，由于没有“明显”的原因，我的登录表单开始重定向到我网站的 404 页面，我在任何地方都看不到原因。

```
 <?php echo '<form action="http://' . $_SERVER['SERVER_NAME'] . '/login" method="post">'; ?>
 <li><input type="text" name="username" placeholder="Username"></li>
 <li><input type="password" name="password" placeholder="Password"></li>
 <li><input type="submit" value="Login"></li>
 </form> 
```

然而由于某种原因，它仍然会重定向到 404 页面，而`<?php echo'http://' . $_SERVER['SERVER_NAME'] . '/login`实际上是相同的页面。除了用户成功登录之外，没有其他重定向，它转到不同的页面。我只是不明白是什么原因造成的，其他人可以解决为什么吗？

编辑：我的 .htaccess 是

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?page=$1 
```

验证码：

```
<?php
if(empty($_POST) === false) {
   $username = $_POST['username'];
   $password = $_POST['password'];

   if(empty($username) === true || empty($password) === true) {
      $errors[] = 'You need to enter a username and password.';
   } else if (user_exists($username) === false) {
      $errors[] = 'We can\'t find that username. Have you registered?';
   } else if (user_active($username) === false) {
      $errors[] = 'You haven\'t activated your account!';
   } else if(strlen($password) > 32 ) {
        $errors[] = 'Password to long.';
   }
     $login = login($username, $password);
     if($login === false){
       $errors[] = 'That username/password combination is incorrect.';
     }else{
        $_SESSION['user_id'] = $login;
        header('Location: ' . $_SERVER['SERVER_NAME'] . '/?msg=1');
        exit();

     }
   }
if(empty($errors)===false){
?>
    <h1>We tried to log you in, but....</h1>
<?php
     print_r($errors);
} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:06:48.453

您可以省略`$_SERVER[]`数组并使用静态 url，仅用于调试吗？像：

```
<form method="POST" action="url.php">
<li><input type="text" name="username" placeholder="Username"></li>
<li><input type="password" name="password" placeholder="Password"></li>
<li><input type="submit" value="Login" name="submit"></li>
</form> 
```

和：

```
 header('Location: url.php?msg=1'); 
```

如果它给你一个 404 错误，它必须来自这个或你的 .htaccess 以这种方式调试它并让我们知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:09:54.327

有很多可能的原因。以下是一些故障排除提示：

```
<?php echo '<form action="http://' . $_SERVER['SERVER_NAME'] . '/login" method="post">'; ?> 
```

Clearly there is something wrong with the url that's being filled into the action of the form:

1.  The "page" in the code above is `login` in your action. Is it a page, or a directory, or do you have rewrites on? Should the url point to login.php or login.html instead of just login?

2.  When you view source of the rendered page in your browser, what do you see in the `action` of the form? Is it a legitimate url? If you copy/paste the url into your browser, what do you get?

3.  When using forms like this, any reason you wouldn't just have the action be `/login`? Server variables should not be relied upon like this, and since you're going to the same url, why not remove the complexity and just go with `/login` as the action?

4.  Are you using url rewrites? Have the rules changed, or has an htaccess file been modified/moved?

# php - preg_replace 语法

> ID：13545600
> 
> 赞同：-1
> 
> 时间：2012-11-24T21:04:58.577
> 
> 标签：php

我有一段现有的代码可以成功地替换名为 your-subject 的文本字段的空表单值。我需要为另一个名为 Bcc 的字段做同样的事情。当我尝试添加 name="Bcc" 字段时，我的语法似乎无法正确。有人可以告诉我正确的语法吗？该页面只是无法加载，所以我猜我在某处错过了引号或转义字符？

工作正常：

```
echo preg_replace('!<input type="text" name="your-subject" value=""!'
    ,'<input type="text" name="your-subject" value="MLS# '.$row['mlnum'].'"'
    ,do_shortcode( '[contact-form-7 id="17" title="Contact Form"]' )
); 
```

破碎的：

```
echo preg_replace('!<input type="text" name="your-subject" value=""!'
    ,'<input type="text" name="your-subject" value="MLS# '.$row['mlnum']
        .'"''!<input type="text" name="bcc" value=""!'
    ,'<input type="text" name="your-subject" value="test@test.com"'
    ,do_shortcode( '[contact-form-7 id="17" title="Contact Form"]' )
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:11:19.227

换行！

```
echo preg_replace(
    '!<input type="text" name="your-subject" value=""!',
    '<input type="text" name="your-subject" value="MLS# ' . $row['mlnum'] . '"',
     do_shortcode( '[contact-form-7 id="17" title="Contact Form"]' )
);

echo preg_replace(
    '!<input type="text" name="your-subject" value=""!',
    '<input type="text" name="your-subject" value="MLS# ' . $row['mlnum'] . '"''!<input type="text" name="bcc" value=""!',
    '<input type="text" name="your-subject" value="test@test.com"',
    do_shortcode( '[contact-form-7 id="17" title="Contact Form"]' )
); 
```

现在问题在第二个问题上变得更加清晰：`'"''!<input...'`是无效的字符串文字：

```
Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING 
```

# visual-studio-2010 - 如何在使用 Unity 的应用程序中逐步执行代码？

> ID：13545601
> 
> 赞同：0
> 
> 时间：2012-11-24T21:05:04.337
> 
> 标签：visual-studio-2010, c#-4.0, unity-container

我不想单步执行 Unity 源代码。

我正在查看 Unity 附带的 StopLight 示例。我想单步调试应用程序中的代码，以便弄清楚发生了什么，但是如果我在 StopLightForm 构造函数的右括号上放置一个断点，然后尝试一步一步，我就会得到“没有可用的源......等等，呸呸呸'。

我如何单步执行示例应用程序中的代码？

# assembly - IA32汇编代码转Y86汇编代码：leal指令

> ID：13545606
> 
> 赞同：1
> 
> 时间：2012-11-24T21:05:31.817
> 
> 标签：assembly, x86, y86

我正在研究如何将 IA32 汇编代码转换为 Y86 汇编代码，我被困在 IA32 代码中的以下指令中：

```
 leal(%edx, %eax), %eax 
```

我找不到 Y86 代码的等效说明。我有以下两个版本，但我不确定哪个是正确的：

版本 1：

```
 mrmovl (%edx), %ebx
 mrmovl (%eax), %esi
 addl %ebx, %esi
 rrmovl %esi, 5eax 
```

版本 2：

```
 addl %edx, %eax 
```

有没有人有更好的主意？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T23:29:47.643

`LEA`不访问内存，它只做（地址）算术。因此，您的版本 #2 是正确的。

请注意，在 x86`LEA`上不会影响标志，而`ADD`会。`LEA`还支持更复杂的有效地址语法，但仍可直接转录为 y86。例如，

```
leal offset(%eax, %ebx, 4), %edx 
```

变成：

```
rrmovl %ebx, %edx
addl %edx, %edx
addl %edx, %edx
addl %eax, %edx
pushl %eax           # save eax which used as temporary for adding the offset
irmovl $offset, %eax
addl %eax, %edx
popl %eax            # restore eax 
```

# sql - SQL DML Oracle 查询

> ID：13545608
> 
> 赞同：0
> 
> 时间：2012-11-24T21:05:45.700
> 
> 标签：sql, oracle, oracle-sqldeveloper, dml

我试图做这个查询：西班牙的医院名称是什么，那里有超过 2 名只为该医院工作的医生。但结果不是我所期望的。

我有这些表：

```
CREATE TABLE Hospital (
    hid INT PRIMARY KEY,
    name VARCHAR(127) UNIQUE,
    country VARCHAR(127),
    area INT
);
CREATE TABLE Doctor (
    ic INT PRIMARY KEY,
    name VARCHAR(127),
    date_of_birth INT,
);
CREATE TABLE Work (
    hid INT,
    ic INT,
    since INT,
    FOREIGN KEY (hid) REFERENCES Hospital (hid),
    FOREIGN KEY (ic) REFERENCES Doctor (ic),
    PRIMARY KEY (hid,ic)
); 
```

我试过这个：

```
SELECT DISTINCT H.name 
FROM Doctor D, Work W, Hospital H 
WHERE D.bi = W.bi AND H.country = 'Spain' AND H.hid = W.hid AND W.ic = D.ic 
AND NOT EXISTS(
              SELECT *
              FROM Hospital H2
              WHERE H2.hid = W.hid
)
GROUP BY (H.name)
HAVING COUNT(D.ic) > 2
; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:20:15.117

假设您的意思是拥有> 2名专职医生的医院，这应该对您有用。

```
SQL> select * from hospital;

       HID NAME                 COUNTRY            AREA
---------- -------------------- ------------ ----------
         1 General              Spain                 1
         2 Hospital 2           Spain                 1
         3 Hospital 3           Spain                 1

SQL> select * from doctor;

        IC NAME                 DATE_OF_BIRTH
---------- -------------------- -------------
         1 Gregory House                    1
         2 Dougie Howser                    1
         3 Marie Curie                      1
         4 Dr Who                           1
         5 Dr Zeuss                         1

SQL> select * from work;

       HID         IC      SINCE
---------- ---------- ----------
         1          1          1
         1          2          1
         2          3          1
         2          4          1
         3          4          1
         1          5          1

6 rows selected.

SQL> select h.hid, h.name
  2    from hospital h
  3         inner join work w
  4                 on w.hid = h.hid
  5         inner join doctor d
  6                 on d.ic = w.ic
  7   where not exists (select null
  8                       from work w2
  9                      where w2.hid != h.hid
 10                        and w2.ic = w.ic)
 11   group by h.hid, h.name
 12   having count(*) > 2;

       HID NAME
---------- --------------------
         1 General 
```

# html - 将 div 用于样式目的是一种不好的做法吗？

> ID：13545613
> 
> 赞同：4
> 
> 时间：2012-11-24T21:06:07.813
> 
> 标签：html, semantics

我最近看到了很多关于这个名为*oocss*的新概念的讨论，我想知道将主要标签包装在`div`s 中仅用于样式/页面布局是否是一种不好的做法。

我问这个是因为我看到一些框架，如**Twitter Bootstrap**使用这种方法。

从语义和可访问性的角度来看，这种标记的含义是什么？

例如：

```
<div class="container">
  <div class="row">
    <div class="span4">
      <nav class="nav">...</nav>
    </div>
    <div class="span8">
      <a href="#" class="btn btn-large">...</a>
    </div>
  </div>
</div> 
```

代替

```
<div class="menu">
  <nav class="nav">...</nav>
  <a href="#" class="bttn">...</a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:10:01.643

不，还好。HTML 是一种“标记语言”，标记涉及样式。此外，每个人都这样做。许多流畅的多列布局正是基于这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:54:42.730

使用不必要`divs`的不​​是一个好主意...如果第二个框中的 HTML 代码足以完成您想要或需要做的所有事情，那么不要使用额外的`divs`...其次，第二个框中的 HTML 代码非常清晰并且比第一个框中的代码更短...如果您的代码保持干净、简短和格式化，它将在您想要或需要将来更新您的代码时为您提供很多帮助...

# sql - 从一个表引用到另一个整个表和指定行

> ID：13545617
> 
> 赞同：0
> 
> 时间：2012-11-24T21:06:38.647
> 
> 标签：sql, postgresql

我有三个表：A、B 和 C。我想创建表 A，它应该有 3 列，第一个应该是`PRIMARY KEY`.

1）如何创建第二列，其中是对表 B 的引用，

2) 第三个 with 是对表 CAid = C.id 中的“C.id”行的引用

```
CREATE TABLE A
(
    id SERIAL PRIMARY KEY,
    // ? - reference to table B
    // ? - reference to C.id row. A.id = C.id
) 
```

数据库：postgresql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:13:19.993

我假设你使用 mysql 数据库。

```
CREATE TABLE A
(
    id INT NOT NULL PRIMARY KEY,
    b_id INT NOT NULL,
    c_id INT NOT NULL,
    FOREIGN KEY (b_id) REFERENCES B (id),
    FOREIGN KEY (c_id) REFERENCES C (id)
) TYPE = INNODB; 
```

## 使用 postgresql 的更新：

```
CREATE TABLE "A"
(
   id integer NOT NULL, 
   b_id integer NOT NULL, 
   c_id integer NOT NULL, 
   CONSTRAINT id PRIMARY KEY (id), 
   CONSTRAINT b_id FOREIGN KEY (b_id) REFERENCES "B" (id) 
      ON UPDATE NO ACTION ON DELETE NO ACTION, --with no action restriction
   CONSTRAINT c_id FOREIGN KEY (c_id) REFERENCES "C" (id) 
      ON UPDATE CASCADE ON DELETE CASCADE  --with cascade restriction
) 
WITH (
  OIDS = FALSE
)
;
ALTER TABLE "C" OWNER TO postgres; 
```

* * *

# c - 从指针数组中获取输入并将其分配给结构，指向每个结构。

> ID：13545625
> 
> 赞同：0
> 
> 时间：2012-11-24T21:07:32.487
> 
> 标签：c, pointers, struct, fill

我正在尝试将输入分配给具有指针数组的多个结构，指向每个分配的结构。我一直在尝试填充一个结构并打印它，但不断出错并且找不到原因。有任何想法吗？

谢谢您的帮助。

```
/* Structure declaration */

struct personCatalog {
  char name[50];
  char address[50];
  char cityState[50];
  char zipCode[7];
} ;

//function to fill structures

void getPerson (struct personCatalog *ArrayOfPointers[]);

   int main(int argc, const char * argv[])
 {

struct personCatalog *pointerArray[51]; 

getPerson(pointerArray);

 }

void getPerson (struct personCatalog *ArrayOfPointers[]){

struct personCatalog *tempPointer;

char stringCollector[512];

int maxNumberOfPeople = 51;
int num = 0;

while ((gets(stringCollector) != NULL) && (num < maxNumberOfPeople)) {

    tempPointer = (struct personCatalog *) malloc(sizeof(struct personCatalog));
    strcpy(tempPointer->name, stringCollector);
    gets(tempPointer->address);
    gets(tempPointer->cityState);
    gets(tempPointer->zipCode);

    ArrayOfPointers[num] = tempPointer;

    num++;

    printf("%s", ArrayOfPointers[num]->name);
    printf("%s", ArrayOfPointers[num]->address);
    printf("%s", ArrayOfPointers[num]->cityState);
    printf("%s", ArrayOfPointers[num]->zipCode);

}

 ArrayOfPointers[num] = '\0';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:26:08.480

稍微改正了一下，试试看，但还有更多工作要做......

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
/* Structure declaration */

struct personCatalog {
  char name[50];
  char address[50];
  char cityState[50];
  char zipCode[7];
} ;
const int maxNumberOfPeople = 3; // was 51;

//function to fill structures

void getPerson (struct personCatalog *ArrayOfPointers[]);

int main(int argc, const char * argv[]) {

  struct personCatalog *pointerArray[maxNumberOfPeople];

  getPerson(pointerArray);

}

void getPerson (struct personCatalog *ArrayOfPointers[]){
  struct personCatalog *tempPointer;
  char stringCollector[512];
  int num = 0;

  while ((num < maxNumberOfPeople) && (gets(stringCollector) != 0) ) {

    tempPointer = (struct personCatalog *) malloc(sizeof(struct personCatalog));
    strcpy(tempPointer->name, stringCollector);
    gets(tempPointer->address);
    gets(tempPointer->cityState);
    gets(tempPointer->zipCode);

    ArrayOfPointers[num] = tempPointer;

    printf("name      %s\n", ArrayOfPointers[num]->name);
    printf("address   %s\n", ArrayOfPointers[num]->address);
    printf("cityState %s\n", ArrayOfPointers[num]->cityState);
    printf("zipCode   %s\n", ArrayOfPointers[num]->zipCode);

    num++;
  }
  //ArrayOfPointers[num] = '\0'; this crashed at end of array
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T22:20:34.820

有趣的是，代码对我有用，并添加了必要的包括：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h> 
```

然而，这只适用于合理的输入——代码还有一些改进的余地，但稍后会更多。

您看不到任何输出的原因是您`num`在将数据分配给结构之后但在打印它之前增加索引 - 即在循环中您总是取消引用尚未分配的指针，换句话说就是垃圾。当您尝试取消引用空指针（或任何不在您的进程内存和段错误中的东西时，这只是一个时间问题。

现在来看看缺陷：

*   `malloc()` **总是**带有两件事：检查返回值和相应的`free()`！`free()`丢失了，但我知道一旦不再需要数据，代码的其他部分就可以解决这个问题。但是，您没有检查它是否不返回 NULL（即未能分配内存）。这会立即使您的程序停机（由于空指针取消引用而导致的 SEGFAULT）。

*   `gets()`- 我建议阅读此功能的手册页（如果您在 Windows 上，请在 Internet 上查找）- 它不保证读取数据有任何限制，因此您很容易溢出缓冲区。改为使用`fgets()`。另一种方法可能是`scanf()`使用宽度说明符 to `%s`。

*   `strcpy()`- 与 相同`gets()`。改为使用`strncpy()`，除非您确定它不会破坏您的数据。`char stringCollector[512]`此外，您正在复制`char personCatalog.name[50]`- 不要那样做。这是不一致的，如果您根据前者的大小进行边界检查，那么您肯定会遇到问题（而不是迟早）。

最后但并非最不重要的一点：一个错误的错误（有时确实很难做到这一点）。

```
struct personCatalog *pointerArray[51];
...
int maxNumberOfPeople = 51;
if (num < maxNumberOfPeople)) {
    ...
    num++;
    ...
}
ArrayOfPointers[num] = '\0' 
```

在最坏的情况下，您将在后面写`ArrayOfPointers`（`ArrayOfPointers[51]`具体来说）。

使用宏并决定是否要对数组进行 NULL 终止：

```
#define MAXPEOPLE 50
struct personCatalog *pointerArray[MAXPEOPLE+1]; /* +1 for the NULL terminator */
if (num < MAXPEOPLE)) ... 
```

# ruby-on-rails - 我漂亮的脚手架并不漂亮

> ID：13545629
> 
> 赞同：0
> 
> 时间：2012-11-24T21:07:47.753
> 
> 标签：ruby-on-rails, scaffolding

我第一次使用漂亮的生成器（Rails 3.2.8），我用 rails g nifty:scaffold post title:string body:string 创建了一个简单的脚手架，然后我也生成了一个漂亮的布局。然后 db:migrate 很好并启动服务器。当我访问该页面时，我希望看到我认为漂亮的默认布局；一种浅蓝色背景，表格以带圆角的白色 div 为中心。这不是漂亮的重点吗？

我所看到的只是普通的旧铁轨默认的无聊脚手架。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:55:59.983

您可以在此处找到 css 文件：

[https://github.com/ryanb/nifty-generators/blob/master/lib/generators/nifty/layout/templates/stylesheet.css](https://github.com/ryanb/nifty-generators/blob/master/lib/generators/nifty/layout/templates/stylesheet.css)

# javascript - 在 Jquery 中单击时更改变量的值

> ID：13545632
> 
> 赞同：-2
> 
> 时间：2012-11-24T21:08:00.080
> 
> 标签：javascript, jquery, html

单击 txtAnswerB div 时，我无法更改选择变量的值，这是我的代码：

```
function checkAnswer(){
    var choice;

    $("#txtAnswerB").click(function() {
        choice = Option2;
        $(this).css("background-color","#fff000");
    });
} 
```

ps：option2是全局变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:21:24.840

您需要调用该函数`checkAnswer();`才能`click()`初始化事件...

例子：

HTML：

```
<div id="answerB" class="answer"> <div id="txtAnswerB" class="txtAnswer">Quest</div> </div>​ 
```

jQuery：

```
checkAnswer();
function checkAnswer(){
var choice;
    $("#txtAnswerB").click(function() {
        choice = Option2;
        $(this).css("background-color","red");
    });
}​ 
```

观看现场[演示](http://jsfiddle.net/salih0vicX/JraL9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:10:34.873

应该是这样的

```
 <script type="text/javascript">
        var choice;
        var Option2 = /*somenthing*/;

        $(function(){
        $("#txtAnswerB").bind('click',function(){
             checkAnswer($(this));
           });
        });

        function checkAnswer(_element){
        choice = Option2;
        $(_element).css("background-color","#fff000");
        alert(choice);

        }
    </script> 
```

# c# - 如何使用 Twitterizer 获取给定用户名的 Twitter 关注者屏幕名称？

> ID：13545635
> 
> 赞同：1
> 
> 时间：2012-11-24T21:08:33.353
> 
> 标签：c#, asp.net, json, twitter, twitterizer

```
OAuthTokens tokens = new OAuthTokens();
tokens.AccessToken = "188817262xxxxx";
tokens.AccessTokenSecret = "GNqhB1gkxxxx";
tokens.ConsumerKey = "Q6xxxxx";
tokens.ConsumerSecret = "2eZyxxxxxx";

var<TwitterUser> showUserResponse = TwitterUser.Show(tokens, "twitterUsername");
if (showUserResponse.Result == RequestResult.Success)
    {
    string screenName = showUserResponse.ResponseObject.ScreenName;
    Response.Write(screenName);
    Response.Write("<br>");
    Response.Write(showUserResponse.ResponseObject.NumberOfFollowers);
    } 
```

使用此代码，我可以获得我的 Twitter`screenName`和`numberOfFollowers`，但我想`screenName`在我的 asp.net 应用程序上打印这些关注者。我怎样才能做到这一点？

```
FollowersOptions options = new FollowersOptions();
options.ScreenName = "wallace740";
TwitterResponse<TwitterUserCollection> followers = TwitterFriendship.Followers(options);

// Response.Write(followers.Content); 
```

如何`screenName`从这个 JSON 中获取我的追随者的 s（`followers.Content`给我一个 JSON 结果）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:49:04.283

您可以通过 ReponseObject 进行枚举。

```
 foreach (var follower in followers.ResponseObject)
        {
            follower.ScreenName;
        } 
```

# delphi - 使用 DrawThemeBackground 绘图时如何在从右到左 (RTL) 方向绘制元素部分？

> ID：13545636
> 
> 赞同：4
> 
> 时间：2012-11-24T21:08:44.027
> 
> 标签：delphi, winapi, right-to-left, windows-themes, uxtheme

我正在尝试以从右到左的方向绘制类的`ttGlyphClosed`元素（就像什么时候一样）。我有一个问题，我不知道如何使我的屏幕外位图透明。位图的背景总是白色的。`Explorer::Treeview``BiDiMode``bdLeftToRight`

我正在使用以下代码来镜像图像：

```
procedure TForm5.FormPaint(Sender: TObject);
var
  bm: TBitmap;
  ARect: TRect;
  Details: TThemedElementDetails;
begin    
  if ExplorerTreeviewhTheme = 0 then
    ExplorerTreeviewhTheme := OpenThemeData(0, 'Explorer::Treeview');

  ARect := Rect(20, 20, 40, 40);
  Details := ThemeServices.GetElementDetails(ttGlyphClosed);
  DrawThemeBackground(ExplorerTreeviewhTheme, Canvas.Handle,
    Details.Part, Details.State, ARect, nil); //Ok

  bm := TBitmap.Create;
  try
    bm.Width := 20;
    bm.Height := 20;

    ARect := Rect(00, 00, 20, 20);
    DrawThemeBackground(ExplorerTreeviewhTheme, bm.Canvas.Handle,
      Details.Part, Details.State, ARect, nil);

    // rendered result has white background
    Canvas.Draw(60, 10, bm);    
    // rendered result is mirrored but has also white background
    StretchBlt(Canvas.Handle, 100, 10, -20, 20, bm.Canvas.Handle, 0, 0, 20, 20, SRCCOPY);
  finally
    bm.Free;
  end;    
end; 
```

问题是如何镜像`DrawThemeBackground`函数绘制的元素（用于 RTL 读取）或如何使用此函数进行 RTL（从右到左）渲染？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T02:27:40.437

使用`SetLayout`TLama 在他现在删除的答案中显示，在绘制之前切换画布的布局。

```
function SetLayout(hdc: HDC; dwLayout: DWORD): DWORD; stdcall;
  external 'gdi32' name 'SetLayout';

const
  LAYOUT_RTL = $00000001;

procedure TForm1.FormPaint(Sender: TObject);
var
  ExplorerTreeviewhTheme: HTHEME;
  Details: TThemedElementDetails;
  ARect: TRect;
  Size: TSize;
begin
  ExplorerTreeviewhTheme := OpenThemeData(Handle, 'Explorer::Treeview');
  Details := ThemeServices.GetElementDetails(ttGlyphClosed);
  GetThemePartSize(ExplorerTreeviewhTheme, Canvas.Handle, Details.Part,
      Details.State, nil, TS_DRAW, Size);

  ARect := Rect(20, 30, 20 + Size.cx, 30 + Size.cy);

  // normal layout
  DrawThemeBackground(ExplorerTreeviewhTheme, Canvas.Handle,
                      Details.Part, Details.State, ARect, nil);

  // switched layout
  SetLayout(Canvas.Handle, LAYOUT_RTL);

  // calculate the rectangle for RTL as if it's in LTR
  OffsetRect(ARect, 0, Size.cy); // align to the bottom of the first image so that we can see
  ARect.Left := ClientWidth - ARect.Left - Size.cx;
  ARect.Right := ARect.Left + Size.cx;

  DrawThemeBackground(ExplorerTreeviewhTheme, Canvas.Handle,
                      Details.Part, Details.State, ARect, nil);

  // restore layout
  SetLayout(Canvas.Handle, 0);
  CloseThemeData(ExplorerTreeviewhTheme);
end; 
```

输出： ![在此处输入图像描述](../Images/2bb6a6f8c33b7577e0fd26aa711bfe45.png)

主题 api 正在绘制一个 6px 宽的三角形，零件尺寸为 16px（W7-aero）。由于您无法知道图像在零件中的位置，因此您将无法更好地对齐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T00:05:35.990

您在您的 stretchblt 调用中使用 srccopy，但我认为您可能需要寻找替代方案，包括可能使用掩码

我已经有一段时间没做过这些东西了，所以我记不太清了

# java - Java中灵活大小的多维数组？

> ID：13545637
> 
> 赞同：0
> 
> 时间：2012-11-24T21:08:46.457
> 
> 标签：java, multidimensional-array, row

我正在尝试创建一个多维数组，该数组将存储“客户”信息，其中每一行都用于客户，列存储有关客户的信息。例如，某些列可能是：姓名、电话号码、地址、邮政编码、ID。我事先知道所需列的数量。但是，我不知道需要多少行。

这带来了一个问题，因为要声明这样的数组，除了列之外，还必须指定行数。有没有办法声明这样一个可能具有灵活大小的行数的数组，或者是否有类似类型的数据收集可以让我这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:12:14.717

只需使用 ArrayList 类。这将根据需要进行调整。要创建，只需使用：

```
ArrayList<Customer> customers = new ArrayList<Customer>();

customers.add(new Customer(...)); //to add
customers.get(index); // to retrieve 
```

当然，这假设您有一个 Customer 对象，我建议您存储每个属性，而不是一个数组数组。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:12:54.667

尝试使用 ArrayList。如果需要，您可以附加数据。

# apache-flex - 在火花皮肤中使用 mx 组件

> ID：13545641
> 
> 赞同：1
> 
> 时间：2012-11-24T21:09:20.267
> 
> 标签：apache-flex, flex4, flex3, skinning

既然`fontSharpness`并且`fontThickness`不能在 Flex 4 中工作，正如这里所说[（](http://forums.adobe.com/message/3632979)尽管我想被证明是错误的），我已将`<s:Label/>`应用程序中的每个`<mx:Label/>`.

尽管它在面板和对话框中运行良好，但在皮肤中却不起作用。当我将皮肤部件添加到皮肤时，它们应该扩展一个预定义的类。说`promptDisplay`在`TextInputSkin`我不能使用这个：

```
<mx:Label id="promptDisplay"/> 
```

这在哪里：

```
<s:Label id="promptDisplay"/> 
```

应该是，因为`promptDisplay`应该扩展一个`IDisplayText`.

最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T00:11:39.857

`Label`好吧，我想最快的解决方法是通过子类化 mx和实现来创建自己的 Label 类`IDisplayText`。像这样的东西：

```
import mx.controls.Label;

public class MyLabel extends Label implements IDisplayText {

    public function get isTruncated():Boolean {
        return false;
    }

} 
```

现在您可以在需要`MyLabel`的任何地方使用`IDisplayText`并应用它`fontSharpness`，`fontThickness`因为这两种样式是继承的。
请注意，如果需要 a，这将不起作用`TextBase`。

# c# - ASP.NET MVC 路由：URL 中的点 (.)

> ID：13545642
> 
> 赞同：2
> 
> 时间：2012-11-24T21:09:37.463
> 
> 标签：c#, asp.net-mvc-4, asp.net-mvc-routing

我正在使用以下路线映射到通过标签查找内容的控制器

```
routes.MapRoute(
            "SearchByTagname",
            url: "Search/Tag/{tagname}",
            defaults: new { controller = "Search", Action="Tag", tagname = "" }); 
```

如果 URL 中没有点 (.)，它可以正常工作。

调用 /Search/Tag/ASP.NET 给我 404。

谢谢和问候

斯蒂芬

# objective-c - 代码运行后自定义 segue 动画延迟。（目标 C）

> ID：13545647
> 
> 赞同：0
> 
> 时间：2012-11-24T21:10:20.317
> 
> 标签：objective-c, dispatch-async

我`dispatch_async`链接了几种方法，因此它们对我系统中的用户进行身份验证。

下一个异步方法仅在前一个完成时发生，因为它们每个都有完成处理程序。

最后一个完成后，我使用 2 个`uiview`动画块执行自定义转场。

但是，当我记录每个实际运行时，日志和实际发生的动画之间存在相当大的差距，最终视图动画和完成块被调用。

我真的不知道在此处添加我的代码会有多大用处，但我已经测试过，它必须是异步方法，因为如果我将它们注释掉并且只是返回`YES`动画，那么动画就会与日志同时发生而不会延迟。

有谁知道为什么会发生这种情况？

**编辑 *（带代码）**

用于电子邮件、用户、用户 ID 的典型“存在检查”。

```
- (void)existsInSystemWithCompletionHandler:(void (^)(BOOL))block
{
    self.existsInSystem = NO;

    if (self.isValid) {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            //
            //  Get data
            //
            if (dataIsValid) {
                block(YES);
            } else {
                block(NO);
            }
        });
    } else {
        block(self.existsInSystem);
    }
} 
```

检查用户是否存在

```
[potentialUser existsInSystemWithCompletionHandler:^(BOOL success) {
    if (success) {
        //  Perform segue
        //
        [self performSegueWithIdentifier:@"Logging In" sender:self];
    }
}]; 
```

转场

```
- (void)perform
{
    NSLog(@"Perform");

    LogInViewController *sourceViewController = (LogInViewController *)self.sourceViewController;
    LoggingInViewController *destinationViewController = (LoggingInViewController *)self.destinationViewController;

    destinationViewController.user = sourceViewController.potentialUser;

    //  Animate
    //
    [UIView animateWithDuration:0.2f
                     animations:^{
                         NSLog(@"Animation 1");
                         //
                         // Animate blah blah blah
                         //
                     }];

    [UIView animateWithDuration:0.4f
                          delay:0.0f
                        options:UIViewAnimationOptionCurveEaseIn
                     animations:^{
                         NSLog(@"Animation 2");
                         //
                         // Animate blah blah blah
                         //
                     }
                     completion:^(BOOL finished) {
                         NSLog(@"Completion");
                         //
                         // Finished
                         //

                         [sourceViewController presentViewController:destinationViewController animated:NO completion:nil];
                     }];
} 
```

登录VC

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [self.user loginWithCompletionHandler:^(BOOL success) {
        if (success) {
            [self performSegueWithIdentifier:@"Logged In" sender:self];
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T01:08:07.260

固定的！现在似乎可以在我的代码中添加以下行：

```
dispatch_async(dispatch_get_main_queue(), ^{
    completionBlock(success);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:19:43.433

从您的描述看来，您的 segue 可能正在等待一个过程完成。

也许您的嵌套异步方法通过它们的完成方法相互跟随，从而产生了一些令人费解的代码。这可能是您可能忽略阻塞方法的原因。

整理代码的一种方法是使用顺序队列。推送到队列中的块只有在前一个完成后才会开始。

# java - 使用 JSoup 从表中提取数据

> ID：13545658
> 
> 赞同：3
> 
> 时间：2012-11-24T21:11:22.010
> 
> 标签：java, html, arrays, jsoup, html-table

我想使用 JSoup 框架提取此表，以将内容保存在“表”数组中。第一个 tr-tag 是表头。以下所有（不包括）描述的内容。

```
<table style=h2 width=100% cellspacing="0" cellpadding="4" border="1" bgColor="#FFFFFF">
<tr>
<td align="left" bgcolor="#9999FF" >
<!-- 0 -->
Kl.
</td>
<td align="left" bgcolor="#9999FF" >
<!-- 3 -->
Std.
</td>
<td align="left" bgcolor="#9999FF" >
<!-- 4 -->
Lehrer
</td>
<td align="left" bgcolor="#9999FF" >
<!-- 5 -->
Fach
</td>
<td align="left" bgcolor="#9999FF" >
<!-- 6 -->
Raum
</td>
<td align="left" bgcolor="#9999FF" >
<!-- 7 -->
VLehrer
</td>
<td align="left" bgcolor="#9999FF" >
<!-- 8 -->
VFach
</td>
<td align="left" bgcolor="#9999FF" >
<!-- 9 -->
VRaum
</td>
<td align="left" bgcolor="#9999FF" >
<!-- 13 -->
Info
</td>
</tr>
<tr>
<!-- 1 0 -->
<td align="left" bgcolor="#FFFFFF" >
&nbsp;
</td>
<!-- 1 3 -->
<td align="left" bgcolor="#FFFFFF" >
4
</td>
<!-- 1 4 -->
<td align="left" bgcolor="#FFFFFF" >
Méta
</td>
<!-- 1 5 -->
<td align="left" bgcolor="#FFFFFF" >
HU
</td>
<!-- 1 6 -->
<td align="left" bgcolor="#FFFFFF" >
&nbsp;
</td>
<!-- 1 7 -->
<td align="left" bgcolor="#FFFFFF" >
Shne
</td>
<!-- 1 8 -->
<td align="left" bgcolor="#FFFFFF" >
&nbsp;
</td>
<!-- 1 9 -->
<td align="left" bgcolor="#FFFFFF" >
&nbsp;
</td>
<!-- 1 13 -->
<td align="left" bgcolor="#FFFFFF" >
&nbsp;
</td>
</tr> 
```

我已经测试了这个和其他一些，但我没有让它们为我工作： [Using JSoup To Extract HTML Table Contents](https://stackoverflow.com/questions/8222118/using-jsoup-to-extract-html-table-contents)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T22:06:32.753

以下是一些示例代码，您如何仅选择标题：

```
Element tableHeader = doc.select("tr").first();

for( Element element : tableHeader.children() )
{
    // Here you can do something with each element
    System.out.println(element.text());
} 
```

你得到`Document`...

1.  解析**文件**：（和字符集在`Document doc = Jsoup.parse(f, null);`哪里，请参阅 jsoup 文档以获取 mor 信息）`f``File``null`

2.  解析**网站**：（`Document doc = Jsoup.connect("http://your.url.here").get();`不要错过`http://`）

**输出：**

```
Kl.
Std.
Lehrer
Fach
Raum
VLehrer
VFach
VRaum
Info 
```

* * *

现在，如果您需要所有条目的数组（或更好`List`），您可以创建一个新类，其中存储每个条目的所有信息。接下来，您通过 jsoup 解析 Html 并填充类的所有字段并将其添加到列表中。

```
// Note: all values are strings - you'll need to use better types (int, enum whatever) here. But for an example its enough.
public class Entry
{
    private String klasse;
    private String stunde;
    private String lehrer;
    private String fach;
    private String raum;
    private String vLehrer;
    private String vFach;
    private String vRaum;
    private String info;

    // constructor(s) and getter / setter

    /*
     * Btw. it's a good idea using two constructors here: one with all arguments and one empty. So you can create a new instance without knowing any data and add it with setter-methods afterwards.
     */
} 
```

接下来，填充您的条目的代码（包括存储它们的列表）：

```
List<Entry> entries = new ArrayList<>();        // All entries are saved here
boolean firstSkipped = false;                   // Used to skip first 'tr' tag

for( Element element : doc.select("tr") )       // Select all 'tr' tags from document
{
     // Skip the first 'tr' tag since it's the header
    if( !firstSkipped )
    {
        firstSkipped = true;
        continue;
    }

    int index = 0;                              // Instead of index you can use 0, 1, 2, ...
    Entry tableEntry = new Entry();
    Elements td = element.select("td");         // Select all 'td' tags of the 'tr'

    // Fill your entry
    tableEntry.setKlasse(td.get(index++).text());
    tableEntry.setStunde(td.get(index++).text());
    tableEntry.setLehrer(td.get(index++).text());
    tableEntry.setFach(td.get(index++).text());
    tableEntry.setRaum(td.get(index++).text());
    tableEntry.setvLehrer(td.get(index++).text());
    tableEntry.setvFach(td.get(index++).text());
    tableEntry.setInfo(td.get(index++).text());

    entries.add(tableEntry);                    // Finally add it to the list
} 
```

如果您使用第一篇文章中的 html，您将获得以下输出：

```
[Entry{klasse= , stunde=4, lehrer=Méta, fach=HU, raum= , vLehrer=Shne, vFach= , vRaum=null, info= }] 
```

**注意：**我只是用于`System.out.println(entries);`那个。所以输出的格式`toString()`来自`Entry`.

* * *

请参阅[Jsoup 文档](http://jsoup.org/)，尤其是用于[jsoup 选择器 api](http://jsoup.org/cookbook/extracting-data/selector-syntax)的文档。

# java - java：将参数传递给复制构造函数

> ID：13545659
> 
> 赞同：0
> 
> 时间：2012-11-24T21:11:22.527
> 
> 标签：java, copy-constructor

```
Inside of class ATester
{
   private A<Integer> p1,p2;

    p1 = new B<Integer>();
    p2 = new B<Integer>( p1);

}

public class B<E extends Comparable<? super E>> implements A<E>
{
     public B()   // default constructor
     {
        // skip
     }

     public B(B other)  // copy constructor
     {
        // skip
     }

} 
```

我想定义一个复制构造函数，它接受另一个 B 作为参数，但是当我将 p1 传递给

```
p2 = new B<Integer>( p1); 
```

编译时，它给了我错误信息

> “没有为 B< A < Integer >> 找到合适的构造函数”

我应该更改或添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:21:16.870

您需要在调用复制构造函数之前将您的`p1`转换为。`B<Integer>`

```
 p2 = new B<Integer>( (B<Integer>)p1); 
```

或者您可以定义另一个接受接口类型的构造函数，例如

```
 public B(A<E> other)  // copy constructor
    {
         //type cast here and use it
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:18:56.053

将其更改为

或称为`p2 = new B<Integer>( (B<Integer>)p1);`

因为您要做的是在构造函数中`A<Integer>`发送。`B`最终它是

```
B b = element of type A<Integer> 
```

由于参数类型的逆变换，这是错误的。根据设计更改`B`构造函数中的参数类型或执行上述操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:24:51.940

您的 B 已经实现了 A，因此将构造函数 arg 从 B 更改为 A：

```
public class B<E extends Comparable<? super E>> implements A<E>
{
     public B()   // default constructor
     {
        // skip
     }

     public B(A other)  // copy constructor
     {
        // skip
     }

} 
```

然后你可以同时使用 A 和 B 作为一个有效的 cons 参数；

```
 A<Integer> p1, p2;
    B<Integer> c = new B<Integer>();

    p1 = new B<Integer>(c);
    p2 = new B<Integer>( p1); 
```

# c++ - 如何将函数作为参数传递？

> ID：13545660
> 
> 赞同：2
> 
> 时间：2012-11-24T21:11:35.170
> 
> 标签：c++

将一个函数作为另一个函数的参数传递而不在一行中使用除 std 之外的其他库的最快和最短的方法是什么？

我的意思是，假设我们有一个函数`forloop(int x, *) {...}`，它运行一个 for 循环`0`来`x`运行该`*`函数；函数调用应该是这样的：`forloop(3, **() { std::cout "Hi!"; });`.

PS：`*`并且`**`只是逐个参数类型的占位符以及将函数作为参数传递的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:14:04.190

C++11 提供匿名函数：

```
forloop(3, []{ std::cout "Hi!"; }); 
```

**示例**：

```
#include <iostream>
#include <functional>

 void forloop(int times, std::function<void()> f) {
     for(int i = 0; i < times; i++) {
         f();
     }
 }

int main() {
    forloop(3, [] () { std::cout << "Hello world"; });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:13:36.607

如果您的函数是任何类的成员，请尝试“指向成员函数的指针”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:17:36.570

您正在查看几个选项。

1.  函数指针，C 风格的方式
2.  `std::function`这是 C++ TR1 和 C++11 的一部分
3.  使用函子并`std::ptr_fun`调整您的功能

您展示的语法仅适用于 C++11。早期的 C++ 版本不提供定义匿名函数的可能性。

# ios - 当一个持久存储是只读的时没有反向的核心数据关系？

> ID：13545661
> 
> 赞同：1
> 
> 时间：2012-11-24T21:11:44.943
> 
> 标签：ios, core-data, persistence, data-modeling

我正在研究一个应该使用两个持久存储的 iOS[核心数据](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)模型，其中一个是只读的，另一个是读写的。只读存储将包含实体，读写存储将包含集合，集合和实体之间将存在一对多的关系。

1.  [我假设这是一个（罕见的）有效场景，用于建模没有反向](https://stackoverflow.com/questions/764125/does-every-core-data-relationship-have-to-have-an-inverse)的一对多关系（因为一端的对象是只读的，所以它既不能删除也不能更新）。是这样吗？
2.  如果确实如此，是否有推荐的方法来抑制相应的“这是一个高级设置”警告（但不是全局抑制所有此类警告）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:27:19.537

在 Build Settings 中，您可以只禁用这一种警告：

```
MOMC_NO_INVERSE_RELATIONSHIP_WARNINGS == NO; 
```

# shell - 如何在shell脚本中使用expect

> ID：13545662
> 
> 赞同：4
> 
> 时间：2012-11-24T21:11:56.283
> 
> 标签：shell, expect

> 我有一个 bash+expect 脚本，它必须连接普通用户，我想读取特定文件并将其存储到要在 root 用户中的特定文件之后使用的变量中。我怎样才能获得价值？我的脚本是：

```
#!/bin/bash
set prompt ">>> "
set command ls /root/test1

expect << EOF
spawn su root
expect "password:"
send "rootroot\r"
expect "$prompt\r"
send "$command\r"
expect "$prompt\r"
expect -re "(.*)\r\n$prompt\r\n"
EOF

echo "$command"

 if [ ! -f "$command" ]; then

                echo "file is not exist"
else
                echo "file is exist"
            fi 
```

> 每当我执行我的 shell 脚本时，它都会显示以下输出：
> 
> ls: /root/: 权限被拒绝
> 
> 文件不存在
> 
> 基本上测试在那里，但它显示“文件不存在”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-19T11:41:40.563

这个问题很老了，但我希望有人能从这个答案中得到帮助。

--> 你应该使用`#!/usr/bin/expect`或正确`#!/bin/expect`使用`expect`，`expect<<EOF`可能会工作，但那不是写脚本的常规方式。

--> 你的脚本应该以`EOF`statement 结尾。前任。

```
#!/usr/bin/expect << EOF
<some stuff you want to do>
EOF 
```

--> 关于`spawn`. 无论你写什么`spawn`都会执行，但它不会对整个脚本产生影响。它不像环境变量。

简而言之，**`spawn`将启动新进程并且您的命令不在生成进程下。** 前任。

```
#!/usr/bin/expect
spawn bash -c "su root '<your-cmd-as-root>'"
<some-expect-send-stuff-etc> 
```

现在在你的脚本中，`$command`应该`spawn`像我在上面的例子中显示的那样写在里面。

# c# - RavenDb "In" 运算符如何工作？

> ID：13545663
> 
> 赞同：8
> 
> 时间：2012-11-24T21:12:07.160
> 
> 标签：c#, linq, lucene, ravendb

我可能不明白 RavenDb 中的“In”扩展方法是如何工作的。我认为它相当于 SQL 世界中的 IN 命令，例如 WHERE Number IN (1, 2, 3)。但它的行为很奇怪。

```
// i have 3 records - two with Normal severity, one with Low severity
using (var session = store.OpenSession())
{
    session.Store(new TestObject { Name = "o1", Severity = Severity.Normal });
    session.Store(new TestObject { Name = "o2", Severity = Severity.Low });
    session.Store(new TestObject { Name = "o3", Severity = Severity.Normal });
    session.SaveChanges();
}

// this writes the Low severity record, it seems correct
using (var session = store.OpenSession())
{
    var data = session.Query<TestObject>()
        .Where(o => o.Severity.In(new[] { Severity.Low }))
        .OrderBy(o => o.Name).ToList();
    data.ForEach(r => Console.WriteLine(r));
}

// this writes also the Low severity record, it still seems correct
using (var session = store.OpenSession())
{
    var data = session.Query<TestObject>()
        .Where(o => o.Severity.In(new[] { Severity.Low, Severity.High }))
        .OrderBy(o => o.Name).ToList();
    data.ForEach(r => Console.WriteLine(r));
}

// this writes all records, still seems correct
using (var session = store.OpenSession())
{
    var data = session.Query<TestObject>()
        .Where(o => o.Severity.In(
            new[] { Severity.High, Severity.Low, Severity.Normal }))
        .OrderBy(o => o.Name).ToList();
    data.ForEach(r => Console.WriteLine(r));
}

// but this does not write anything 
// despite there are 2 records with Normal severity
using (var session = store.OpenSession())
{
    var data = session.Query<TestObject>()
        .Where(o => o.Severity.In(new[] { Severity.High, Severity.Normal }))
        .OrderBy(o => o.Name).ToList();
    data.ForEach(r => Console.WriteLine(r));
}

// and this does not write anything either, 
// I just tried whether the order of values in the array matters
using (var session = store.OpenSession())
{
    var data = session.Query<TestObject>()
        .Where(o => o.Severity.In(new[] { Severity.Normal, Severity.High }))
        .OrderBy(o => o.Name).ToList();
    data.ForEach(r => Console.WriteLine(r));
} 
```

还是我在 RavenDb/Lucene 引擎中发现了一个错误？

## 编辑

我发现了另一个奇怪的事情。它必须与枚举成员的字母顺序有关。当我将 Severity.Normal 重命名为 Severity.A 时，最后两个查询运行正常并返回结果。当我将 Severity.Normal 重命名为 Severity.La 时，它仍然有效（因为 La < Low）。但是当我将 Severity.Normal 重命名为 Severity.Lu (Lu > Low) 时，它会中断并且最后两个查询不再返回结果。原始样本不起作用，因为正常 > 低。但我仍然想知道为什么会发生这种情况，因为这对我来说毫无意义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T22:57:34.790

您遇到了过时的索引，这就是为什么您会得到奇怪的结果。您需要先等待索引完成。

# uitableview - 使用带有 UITableView 部分的 iOS 辅助功能时崩溃，并且在几个 [tableview reloadData] 后会崩溃

> ID：13545665
> 
> 赞同：1
> 
> 时间：2012-11-24T21:12:29.573
> 
> 标签：uitableview, crash, accessibility, reloaddata

在将 iOS Accessibility 与 UITableView 部分一起使用时，我遇到了崩溃，其中该部分是一个可访问性元素，并且在几个 [tableview reloadData] 之后它会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:24:44.283

事实证明，[tableView reloadData] 是从一个块中调用的——换句话说，是从另一个线程调用的。

简单的解决方案如下：

```
- (void)blockTest
{
    [self displayData:YES animated:YES onCompletion:^(void) {
    [self performSelectorOnMainThread:@selector(updateTableData) withObject:nil waitUntilDone:YES];
    }];
}

- (void)updateTableData
{
    [self.tableView reloadData];
} 
```

之后不再崩溃。

# c++ - 使用按位运算符的 PE 文件格式指针

> ID：13545666
> 
> 赞同：0
> 
> 时间：2012-11-24T21:12:47.843
> 
> 标签：c++, c, file, assembly, portable-executable

我想知道这些代码行背后的数学原理。处理指针。有人可以用 if 语句中的 + 运算符和 & 位运算符指导我进行数学运算吗？我只是不太明白。

```
 // check signatures -- must be a PE
    pDosHeader = (PIMAGE_DOS_HEADER)hMap;
    if(pDosHeader->e_magic != IMAGE_DOS_SIGNATURE) goto cleanup;

    pNtHeaders = (PIMAGE_NT_HEADERS)((DWORD)hMap + pDosHeader->e_lfanew);
    if(pNtHeaders->Signature != IMAGE_NT_SIGNATURE) goto cleanup;

// Not dll
 if (pNtHeaders->FileHeader.Characteristics & IMAGE_FILE_DLL
  && pNtHeaders->FileHeader.Characteristics & IMAGE_FILE_EXECUTABLE_IMAGE) goto cleanup;

    // get last section's header...
    pSectionHeader = (PIMAGE_SECTION_HEADER)((DWORD)hMap + pDosHeader->e_lfanew + sizeof(IMAGE_NT_HEADERS));
    pSection = pSectionHeader;
 pSection += (pNtHeaders->FileHeader.NumberOfSections - 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:31:02.373

+ 运算符只是算术加号。当与指针一起使用时，现在变得更清楚为什么 C 和 C++ 中的指针是类型化的 - 它不仅将字节添加到地址，而且添加了它指向的任何类型的大小。

因此，例如，如果我们有：

```
struct stuff x;
struct stuff *p = &x;    /* p now points at x */
p = p + 1;
/* the address at p has been incremented by the sizeof(struct stuff), 
    and is pointing at the next struct stuff in memeory */ 
```

用作二元运算符的 & 是按位与，它携带在两个操作数中设置的位。例如：

```
unsigned int b = 99;      /* 99 is binary 01100011 */
unsigned int w = b & 6;   /*  6 is binary 00000110 */
/* w is now 2                 2 is binary 00000010 */ 
```

看起来在您的示例代码中，它用于测试是否在结构成员中设置了位掩码 IMAGE_FILE_DLL 和 IMAGE_FILE_EXECUTABLE_IMAGE。

# javascript - 项目随着淡入/淡出而改变（jQuery）

> ID：13545672
> 
> 赞同：0
> 
> 时间：2012-11-24T21:13:35.040
> 
> 标签：javascript, jquery, fadein, fadeout

我想在我的网页中创建一个菜单，其中每个列表项都由图像表示。当鼠标指向其中一些图像时，该图像应该淡出并被另一个图像替换（我认为 fadeIn() 会很有用）。

HTML 代码：

```
<ul id="buttons">`    
    <li><a href="#" onmouseover="change(1)" onmouseout="ret(1)">  
        <img src="button01.png" id="button01_1" />
        <img src="button01_hover.png" id="button01_2"/>  
    </a></li>
    <li><a href="#" onmouseover="change(2)" onmouseout="ret(2)">  
        <img src="button02.png" id="button02_1" />
        <img src="button02_hover.png" id="button02_2"/>  
     </a></li>
</ul> 
```

jQuery - 我是使用 jQuery 的新手，我试过这个，但有很多错误。图片没有正确改变 - “淡入”图片改变了位置（每个列表项都是绝对定位的），并且第一张图片正在消失并不断出现。这是代码：

```
function change(i)
{
    switch(i)
    {
        case 1:
            $("#button01_1").fadeOut(500); 
            $("#button01_2").fadeIn(500); 
            break;
        case 2:
            $("#button02_1").fadeOut(500);
            $("#button02_2").fadeIn(500);
    }
} 
```

（ret（i）是相似的..）

感谢帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:29:24.770

你快到了，但我可以简化：

```
<ul id="buttons">
    <li>
        <a href="#" id="link1">
            <img src="button01.png" id="button01_1" />
        </a>
    </li>
    <li>
        <a href="#" id="link2">
            <img src="button02.png" id="button02_1" />
        </a>
    </li>
</ul> 
```

jQuery代码：

```
$('#link1').hover(function(){
    $('#button01_1').fadeOut(500).attr('src','button01_hover.png').fadeIn(500);
},function(){
    $('#button01_1').fadeOut(500).attr('src','button01.png').fadeIn(500);
}); 
```

使用选择器，您可以删除 id button01_1 并替换 jQuery 选择器`$('img','#link')`以适应。对不起，如果我使用了太多的 jQuery 库而不是 javascript。

功能说明：

$('#link1').hover(function(){ -- 悬停时的初始函数-- },function(){ -- 从悬停中出来-- });

编辑 ：

jQuery 库：`<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>`

将库添加到您的 html 页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:23:38.010

我认为问题在于淡出图像也会触发鼠标移出（因为`display:none`一旦淡出完成它就会触发），这反过来又会触发淡入，依此类推。考虑重新思考你的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:26:51.850

**更新：**
像这样使用：

```
<ul id="buttons">    
    <li><a href="#" onmouseover="change($(this),1)" onmouseout="ret($(this),1)">  
        <img src="button01.png"/> 
    </a></li>
    <li><a href="#" onmouseover="change($(this),2)" onmouseout="ret($(this),2)">  
        <img src="button02.png"/> 
     </a></li>
</ul> 
```

jQuery：

```
function change(elem ,i){
   $(elem).find('img').fadeOut('500',function(){
      $(this).attr('src','button0'+i+'_hover.png').fadeIn('2000');
   });
}
function ret(elem ,i){
   $(elem).find('img').fadeOut('500',function(){
       $(this).attr('src','button0'+i+'.png').fadeIn('2000');
   });
} 
```

我希望工作...

# extjs4 - 如何水平滚动extjs 4网格

> ID：13545674
> 
> 赞同：2
> 
> 时间：2012-11-24T21:13:41.880
> 
> 标签：extjs4

在加载时水平滚动网格的正确方法是什么。

我想在加载时滚动到特定的网格列。

我可以使用它来关注我想要的列：

```
dataStore.on('load', function() {
     var cl = dataGrid.columns[43];
     cl.focus();
}); 
```

但是当我这样做时网格不会滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:46:29.007

一种可能性是使用`scrollByDeltaX`. 例子：

```
viewready: function(){
    var c = this.columns[5];
    var p = c.getPosition();

    this.scrollByDeltaX(p[0]);
} 
```

工作样本：http: [//jsfiddle.net/YRraU/2/](http://jsfiddle.net/YRraU/2/)

# windows-services - StartService() 和 'sc start'，返回 ERROR_FILE_NOT_FOUND

> ID：13545675
> 
> 赞同：3
> 
> 时间：2012-11-24T21:13:51.233
> 
> 标签：windows-services

我的远程服务在我的 32 位 Server 2008 上运行良好，但是当我尝试在我的 Windows 7 机器上运行它时，StartService() 失败并出现 ERROR_FILE_NOT_FOUND。

OpenSCManager()、CreateService()、QueryServiceStatus() 和 OpenService() 都返回成功，但 StartService() 失败。

我什至从 SDK Samples\WinBase\Service 编译了服务并将其复制到我的 Win 7 机器上的 Windows\system32 目录，并使用“-install”运行它。当我尝试使用“SC start”启动它时，它返回相同的错误。

以下是来自 SC 的信息：

```
C:\Windows\System32>sc query SimpleService

SERVICE_NAME: SimpleService
        TYPE               : 10  WIN32_OWN_PROCESS
        STATE              : 1  STOPPED
        WIN32_EXIT_CODE    : 1077  (0x435)
        SERVICE_EXIT_CODE  : 0  (0x0)
        CHECKPOINT         : 0x0
        WAIT_HINT          : 0x0

C:\Windows\System32>sc qc SimpleService
[SC] QueryServiceConfig SUCCESS

SERVICE_NAME: SimpleService
        TYPE               : 10  WIN32_OWN_PROCESS
        START_TYPE         : 3   DEMAND_START
        ERROR_CONTROL      : 1   NORMAL
        BINARY_PATH_NAME   : C:\Windows\System32\ServiceSvc.exe
        LOAD_ORDER_GROUP   :
        TAG                : 0
        DISPLAY_NAME       : Simple Service
        DEPENDENCIES       :
        SERVICE_START_NAME : LocalSystem

C:\Windows\System32>sc start SimpleService
[SC] StartService FAILED 2:

The system cannot find the file specified. 
```

我什至在我的 Win 7 机器上运行 xCmd.exe，它运行类似类型的远程服务，它给出病毒警告，但即使返回相同的错误。

我敢肯定，如果是权限问题，它可能会返回 ERROR_ACCESS_DENIED。

我已经在网上搜索了所有内容，但找不到任何关于它返回的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:29:21.167

我很确定我找到了问题所在。

我找到了检测应用程序是否在 WOW64 中运行并返回 true 的代码，它运行在 64 位 Windows 7 机器上。

当它在 WOW64 中运行时，它会转到 Windows\SysWOW64 而不是 system32。

一旦我将 32 位服务 .exe 复制到 Windows\SysWOW64 并运行它，服务就会启动！:-)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-07-01T15:54:12.037

从 \windows\system32 运行服务可执行文件

# css - 宽度总和为 100% 的元素倾向于上溢/下溢

> ID：13545676
> 
> 赞同：1
> 
> 时间：2012-11-24T21:13:59.340
> 
> 标签：css, width

我想为我的锻炼显示一个时间线，但是所有的宽度加起来（即使它们等于 100%）都溢出了。我怎样才能让它们始终完美地适应 100% 的宽度？

[http://jsfiddle.net/Lzqvk/](http://jsfiddle.net/Lzqvk/)

HTML：

```
<div class="workoutTimeline">
 <div class="section vertical yellow" style="width:7.117437722419928%">
  <div class="exercise" style="width:33.33333333333333%"></div>
  <div class="exercise" style="width:33.33333333333333%"></div>
  <div class="exercise" style="width:33.33333333333333%"></div>
 </div>
 <div class="section vertical orange" style="width:35.58718861209964%">
  <div class="exercise" style="width:50%"></div>
  <div class="exercise" style="width:50%"></div>
 </div>
 <div class="section vertical red" style="width:32.02846975088968%">
  <div class="exercise" style="width:5.555555555555555%"></div>
  <div class="exercise" style="width:5.555555555555555%"></div>
  <div class="exercise" style="width:5.555555555555555%"></div>
 </div>
 <div class="section vertical blue" style="width:21.352313167259783%">
  <div class="exercise" style="width:100%"></div>
 </div>
 <div class="section vertical purple" style="width:7.117437722419928%">
  <div class="exercise" style="width:25%"></div>
  <div class="exercise" style="width:25%"></div>
  <div class="exercise" style="width:25%"></div>
  <div class="exercise" style="width:25%"></div>
 </div>
</div>​ 
```

CSS：

```
.workoutTimeline {
    height: 20px;
    width: 100%;

    .section {
        float: left;
        opacity: 0.5;
        height: 100%;

        &.active {
            opacity: 1;
        }

        .exercise {
            float: left;
            opacity: 0.5;
            height: 100%;

            &.active {
                opacity: 1;
            }
        }
    }
} 
```

# python - python passlib：“回合”的最佳价值是什么

> ID：13545677
> 
> 赞同：8
> 
> 时间：2012-11-24T21:14:00.907
> 
> 标签：python, encryption, pbkdf2

来自[passlib 文档](http://packages.python.org/passlib/password_hash_api.html#choosing-the-right-rounds-value)

> 对于大多数面向公众的服务，在用户开始生气之前，您通常可以让登录时间超过 250 毫秒 - 400 毫秒。

那么，如果我们认为登录尝试**对数据库有一个调用**，并且它使用带有**非阻塞调用的****MongoDB ，那么****登录/注册**`rounds`的最佳价值是什么。（使用[Mongotor](https://github.com/marcelnicolay/mongotor)，并使用电子邮件作为，因此默认情况下它是**索引**的，查询速度很快：**0.00299978256226**并且当然使用具有**3条记录**的数据库进行了测试......）********`_id`********

 ******```
import passlib.hash
import time

hashh = passlib.hash.pbkdf2_sha512
beg1 = time.time()
password = hashh.encrypt("test", salt_size = 32, rounds = 12000)
print time.time()- beg1 # returns 0.142999887466
beg2 = time.time()
hashh.verify("test", password) # returns 0.143000125885
print time.time()- beg2 
```

现在如果我使用半值：

```
password = hashh.encrypt("test", salt_size = 32, rounds = 4000) # returns 0.0720000267029
hashh.verify("test", password) # returns 0.0709998607635 
```

我在戴尔 XPS 15 i7 2.0 Ghz 上使用**Windows 7 64 位**

注意：安装了[bcrypt](http://www.mindrot.org/projects/py-bcrypt/)，当然，直接使用它作为默认值（`rounds = 12`）真的很痛苦：

```
hashh = passlib.hash.bcrypt
beg1 = time.time()
password = hashh.encrypt("test", rounds = 12) # returns 0.406000137329
print time.time()- beg1
beg2 = time.time()
hashh.verify("test", password) # returns 0.40499997139
print time.time()- beg2 
```

半值：

```
password = hashh.encrypt("test", rounds = 12) # 0.00699996948242 wonderful?
hashh.verify("test", password) # 0.00600004196167 
```

你能建议我在使用时`pbkdf2_sha512`对生产有好处吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-26T20:03:06.457

*（此处为 passlib 开发人员）*

pbkdf2_sha512 花费的时间与它的 rounds 参数 ( `elapsed_time = rounds * native_speed`) 成线性比例。为您的系统使用数据`native_speed = 12000 / .143 = 83916 iterations/second`，这意味着您需要大约`83916 * .350 = 29575 rounds`350 毫秒的延迟。

对于 bcrypt 来说，事情有点棘手，因为它所花费的时间与它的 rounds 参数 ( `elapsed_time = (2 ** rounds) * native_speed`) 成对数比例。使用您系统的数据`native_speed = (2 ** 12) / .405 = 10113 iterations/second`，这意味着您需要大约`log(10113 * .350, 2) = 11.79 rounds`350 毫秒的延迟。但由于 BCrypt 只接受整数轮参数，所以你需要选择`rounds=11`(~200ms) 或`rounds=12`(~400ms)。

* * *

所有这些都是我希望在 passlib 的未来版本中解决的问题。作为一项正在进行的工作，passlib 的 mercurial repo 当前包含一个简单的小脚本，[choose_rounds.py](https://raw.githubusercontent.com/efficks/passlib/master/choose_rounds.py)，它负责为给定的目标时间选择正确的轮数值。可以直接下载运行如下（运行可能需要20s左右）：

```
$ python choose_rounds.py -h
usage: python choose_rounds.py <hash_name> [<target_in_milliseconds>]

$ python choose_rounds.py pbkdf2_sha512 350
hash............: pbkdf2_sha512
speed...........: 83916 iterations/second
target time.....: 350 ms
target rounds...: 29575  

$ python choose_rounds.py bcrypt 350
hash............: bcrypt
speed...........: 10113 iterations/second
target time.....: 350 ms
target rounds...: 11 (200ms -- 150ms faster than requested)
target rounds...: 12 (400ms -- 50ms slower than requested) 
```

* * *

*（编辑：添加了关于安全最小轮次的响应......）*

*免责声明：确定一个安全的最小值是一个非常棘手的问题——有许多难以量化的参数、非常少的真实世界数据以及一些严格无益的理论。由于缺乏良好的权威性，我一直在自己研究这个话题；对于即兴计算，我将原始数据归结为一个简短的公式（如下），这通常是我使用的。请注意，它背后是几页假设和粗略估计，使其更像是[费米估计](http://en.wikipedia.org/wiki/Fermi_problem)而不是确切答案：|*

我使用 GPU 攻击 PBKDF2-HMAC-SHA512 的经验法则（2012 年中）是：

```
 days * dollars = 2**(n-31) * rounds 
```

*   `days`是攻击者有 50/50 的机会猜到密码之前的天数。
*   `dollars`是攻击者的硬件预算（美元）。
*   `n`是用户密码中的平均熵（以位为单位）。

*回答你的脚本小子问题：*如果一个平均密码有 32 位熵，并且攻击者有一个价值 2000 美元的系统和一个好的 GPU，那么在 30000 轮中，他们将需要 30 天（`2**(32-31)*30000/2000`）有 50/50 的破解机会给定的哈希。我建议您使用这些值，直到您达到您满意的轮数/天数权衡。

需要记住的一些事项：

*   字典攻击的成功率不是线性的，它更多的是“长尾”情况，所以将 50/50 标记视为更多的半衰期。

*   这`31`是关键因素，因为它编码了使用特定技术水平攻击特定算法的成本估计。实际值`2**-31`衡量攻击者花费的“每轮美元天数”。相比之下，使用[ASIC](http://en.wikipedia.org/wiki/Application-specific_integrated_circuit)攻击 PBKDF2-HMAC-SHA512的因素更接近`46`- 更大的数字意味着攻击者的成本更高，并且每轮的安全性更低，尽管脚本小子通常不会有那种预算： )******

# ruby - 我正在尝试使用调度程序在heroku上运行涉及datamapper的rake任务，但似乎heroku正在尝试使用sqlite？！

> ID：13545684
> 
> 赞同：0
> 
> 时间：2012-11-24T21:14:56.667
> 
> 标签：ruby, sqlite, postgresql, heroku, datamapper

我有一个 rakefile.rb ，其中有一个名为`add_latest_apps`. 如果这些表不是使用 datamapper 创建的，则此任务会在数据库中创建一些表，从 xml 提要中抓取一些信息，然后将数据放入表中。问题是我似乎无法让我的 rake 任务运行。

如果我使用以下命令`heroku run rake add_latest_apps`，那么我得到：`rake aborted! no such file to load -- dm-sqlite-adapter`这向我表明正在尝试使用 sqlite 适配器，即使它应该使用 postgres 适配器。我究竟做错了什么？

rakefile.rb：

```
require 'open-uri'
require 'nokogiri'
require 'awesome_print'
require 'data_mapper'
require 'dm-postgres-adapter'
require 'pg'

task :add_latest_apps do
    DataMapper.setup(:default, ENV['DATABASE_URL'] || "sqlite3://#{Dir.pwd}/app.db")

class Company
    include DataMapper::Resource

    property :id, Serial
    property :company_name, String
    property :company_id, Text, :unique => true

    has n, :apps
end

class App
    include DataMapper::Resource

    property :id, Serial
    property :app_id, Integer
    property :bundle_id, Text
    property :app_name, Text
    property :company_name, Text
    property :created_at, DateTime
    property :rank, Integer

    belongs_to :company
end

DataMapper.finalize.auto_upgrade!

puts 'Database and tables created'

#Get App data from Apple
#Insert apps and companies into database

end 
```

宝石文件：

```
source :rubygems
gem 'sinatra', '1.1.0'
gem 'thin'
gem 'nokogiri'
gem 'awesome_print'
gem 'data_mapper'
gem 'dm-postgres-adapter'
gem 'pg' 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:25:40.947

您需要设置`DATABASE_URL`环境变量。

问题出在这条线上：

```
DataMapper.setup(:default, ENV['DATABASE_URL'] || "sqlite3://#{Dir.pwd}/app.db") 
```

在这里`DataMapper`查找`ENV['DATABASE_URL']`，如果未设置则回退到`"sqlite3://#{Dir.pwd}/app.db"`，这会导致它尝试加载`dm-sqlite-adapter`。

运行[`heroku config`](https://devcenter.heroku.com/articles/config-vars)以显示您的环境变量，它可能不会显示`DATABASE_URL`。查看[Heroku Postgres 文档](https://devcenter.heroku.com/articles/heroku-postgresql)以确定您的 URL 应该是什么。你也许可以做类似的事情`heroku pg:promote HEROKU_POSTGRESQL_GRAY_URL`（尽管你需要检查你应该使用什么颜色）。

# gml - 使用变量调用 script_execute

> ID：13545685
> 
> 赞同：1
> 
> 时间：2012-11-24T21:14:58.600
> 
> 标签：gml, game-maker

我正在使用 GameMaker:Studio Pro 并尝试执行存储在变量中的脚本，如下所示：

```
script = close_dialog;
script_execute(script); 
```

它不起作用。它显然是在寻找一个名为“脚本”的脚本。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-11T11:57:36.193

这个问题现在已经很老了，但如果其他人最终通过谷歌来到这里（就像我所做的那样），我发现这里的东西效果很好，并且不需要任何额外的数据结构作为参考：

```
scriptToCall = asset_get_index(scr_scriptName);
script_execute(scriptToCall); 
```

此处的第一行创建变量 scriptToCall，然后为它分配 Game Maker 的内部 ID 号，用于您要调用的脚本。这允许 script_execute 正确地从 ID 中找到脚本，如果您尝试将包含脚本名称的字符串传递给它，这将不起作用。

我使用它来定义在特定情况下应从包含的 txt 文件中调用哪些脚本，因此需要将字符串转换为可寻址的脚本 ID！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T16:20:50.293

您似乎对 Game Maker 的工作方式有些困惑，所以我会在解决实际问题之前尝试解决这个问题。

GML 是一个头脑简单的野兽，它只知道两种数据类型：字符串和数字。其他所有内容（对象、精灵、脚本、数据结构、实例等）在 GML 代码中都用数字表示。

例如，您可能有一个名为“Player”的对象，它包含各种奇特的事件，但对于代码而言，Player 只是一个常数，您可以（例如）打印出来`show_message(string(Player));`

现在，该函数`script_execute(script)`将应执行的脚本的 ID 作为参数。那个ID只是一个普通的号码。`script_execute`将在某个内部表中找到具有该 ID 的脚本，然后运行该脚本。

换句话说，如果您碰巧知道 ID是 14，那么`script_execute(close_dialog)`您也可以调用而不是调用（尽管这是不好的做法，因为它使代码难以理解并且易受 ID 更改的影响）。`script_execute(14)``close_dialog`

现在应该很明显，首先将数值分配给`close_dialog`变量然后调用`script_execute`该变量是完全可以的。最后，`script_execute`只关心传递的数字，而不关心这个数字来自的变量的名称。

如果您提前考虑一下，您可能想知道当时是否需要`script_execute`，或者您是否可以这样做：

```
script = close_dialog;
script(); 
```

在我看来，在语言中允许这样做是非常好的，但它不起作用 - 函数调用运算符实际上*确实*关心您尝试调用的事物的名称。

现在有了这个背景，你的实际问题。如果`close_dialog`实际上是一个脚本，那么您建议的代码将可以正常工作。如果它是扩展函数（或内置函数——我不拥有 Studio，所以我知道什么），那么它实际上没有 ID，你不能用`script_execute`. 事实上，你甚至不能给`close_dialog`一个变量赋值，因为它在 GML 中没有任何值——你所能做的就是调用它。不过，要解决这个问题，您可以创建一个脚本（例如，`close_dialog_script`它只调用`close_dialog`，然后您可以像上面一样使用它。

编辑：由于它似乎无论如何都不起作用，请检查您是否有不同的资源名称`close_dialog`（可能是按钮精灵）。这种冲突可能意味着`close_dialog`给你精灵的 ID，而不是脚本的 ID，而直接*调用*脚本仍然可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T01:48:55.113

在论坛上进行了多次讨论后，我最终采用了这种方法。

我写了一个名为 script_id() 的脚本

```
var sid;
sid = 6; //6 = scriptnotfound script :)

switch (argument0) {
    case "load_room":
        sid = 0;
        break;
    case "show_dialog":
        sid = 1;
        break;
    case "close_dialog":
        sid = 3;
        break;
    case "scrExample":
        sid = 4;
        break;
}

return sid; 
```

所以现在我可以调用 script_execute(script_id("close_dialog"));

我讨厌它，但在我看来，这比保留电子表格要好。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-12-10T08:56:27.967

还有另一种方法，execute_string(); 应该是这样的：

```
execute_string(string(scriptName) + "();"); 
```

# matlab - matlab如何遍历多个矩阵

> ID：13545688
> 
> 赞同：1
> 
> 时间：2012-11-24T21:15:38.070
> 
> 标签：matlab

我有一个垫子文件，加载时会给我这样的东西：

火车0：[1200x300] 火车1：[1450x300]。. . . . . 火车N：[Nx300]

我想要做的是以像 train+"i" 这样的方式遍历每个矩阵，其中 i = 0 到 N，并创建一个值为 i 的 NX1 矩阵。这里 N 将是每个训练矩阵中的行数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:23:11.370

尝试将文件加载到结构中

```
ld = load(matfilename);
numRow = structfun( @(x) size(x,1), ld ); 
```

更复杂的方法可能是：

```
ld = load(matfilename);
matNames = fieldnames( ld );
numRows = zeros( 1, numel(matNames) );
for fi = 1:nueml(matNames)
    tkn = regexp( matNames{fi}, '^train(\d+)$', 'tokens', 'once' );
    ii = str2double( tkn{1} );
    numRows(ii) = size( ld.(matNames{fi}), 1 );
end 
```

无论如何，将 mat 文件加载到结构中允许您将所有加载的矩阵作为结构字段进行操作。

# ruby-on-rails - 获取相关项目

> ID：13545693
> 
> 赞同：0
> 
> 时间：2012-11-24T21:15:55.427
> 
> 标签：ruby-on-rails

我有一个`User`模型和一个`Book`模型。

书被宣布为`belongs_to :user`.

如何获取属于特定用户的所有书籍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:18:28.320

您还需要在用户中声明：

```
has_many :books 
```

之后你可以通过 ruby​​ 控制台访问它，或者如果你想在 rails 中使用它，你需要在 routes.rb 中创建一个路由：

```
 resources :books do
    resources :users
  end 
```

之后，您可以向控制器询问一个用户的所有书籍。只需调用控制器中用户的书籍即可。

如果您在代码中的其他地方需要某个用户的所有书籍（例如@user）：

```
@user.books 
```

# c# - 如何检查客户端是否连接到服务器？

> ID：13545695
> 
> 赞同：-3
> 
> 时间：2012-11-24T21:16:18.763
> 
> 标签：c#, tcpclient

我正在使用远程聊天服务器。当我打开聊天（客户端）时，如何检查它是否已连接到服务器？

我不知道这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:19:58.780

实施回声服务？

或者，如果您使用的是 TcpClient，那么它有一个`client.Connected`布尔值，您可以检查

# php - 使用 PHP、JS 或 JQuery 生成多页 PDF 订单？

> ID：13545702
> 
> 赞同：2
> 
> 时间：2012-11-24T21:17:08.743
> 
> 标签：php, javascript, jquery, css, pdf

我正在开发一个我计划在 Intranet 上设置的运输/接收系统。我有 HTML、CSS、PHP、MySQL、JavaScript、JQuery 和 AJAX 方面的经验。我的基本目标是能够扫描条形码，然后生成并保存 PDF 用于打印和存储，可以是 1 页或 100 页。我基本上想创建一个包含订单信息的标题，例如订单 ID、客户/供应商、日期、页码等，下面的列包含零件号、数量、描述等信息。

我不确定是否可以使用 css 和“foreach 变量”创建整个页面，或者是否可以将文本简单地放在默认 pdf 之上的模板效果最好？过去，我能够采用基本模板并在特定 X 和 Y 坐标处将文本输入到单页 pdf 中，但我不确定是否检测分页符等。

任何关于从哪里开始的建议将不胜感激！提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:27:37.433

看看[FPDF](http://www.fpdf.org/)，它是一个非常强大的 PHP 库，用于创建 PDF:s。我已经使用了很多次，我相信它会满足您的需求。

我认为没有必要有一个模板来放置文本。例如，您可以使用 FDPF 中第三方脚本提供的表格功能来呈现您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:30:08.073

使用诸如[wkhtmltopdf 之](http://code.google.com/p/wkhtmltopdf/)类的解决方案，它是一个 HTML 到 PDF 转换器，您可以使用 php 生成发票的 html 并使用该工具输出 PDF 文件。在 Ubuntu 机器上，您可以简单地使用`sudo apt-get install wkhtmltopdf`. [wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)是一个命令行工具，因此您可能会在后台运行一个 cron，它会在文件夹中提取 html 文件并使用该工具或使用 php[`exec()`](http://php.net/manual/en/function.exec.php)或[`system()`](http://www.php.net/manual/en/function.system.php)函数来执行程序将它们转换为 PDF。希望有帮助

# c++ - 使用 SFML 在第二台显示器上打开全屏窗口？

> ID：13545703
> 
> 赞同：6
> 
> 时间：2012-11-24T21:17:13.450
> 
> 标签：c++, c, windows, sfml

有没有办法在第二台显示器上使用[SFML](http://www.sfml-dev.org/documentation/2.0/)打开全屏窗口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T08:49:10.257

恐怕答案是否定的。这是该网站不同部分的引述：

> SFML 没有明确地管理多个监视器。因此，您将无法选择窗口出现在哪个监视器上，并且您将无法创建多个全屏窗口。这应该在未来的版本中得到改进。

# php - php代码直接从数据库计算phpbb中的未读帖子

> ID：13545705
> 
> 赞同：1
> 
> 时间：2012-11-24T21:17:35.527
> 
> 标签：php, mysql, phpbb, ezsql

我正在尝试直接从 phpbb3 数据库中检索特定用户的未读帖子总数。我正在使用 ezsql 让我的生活更轻松，我根据以下帖子编写了以下代码：[https ://www.phpbb.com/community/viewtopic.php?f=46&t=2107403#p12881167](https://www.phpbb.com/community/viewtopic.php?f=46&t=2107403#p12881167)

$unreadposts 似乎总是返回一个高于实际未读帖子数的数字。在过去的 12 个小时里，我一直在研究这个，它把我的头发扯掉了：）

任何帮助或建议将不胜感激！

```
 // Step 1: get all topics the user has access to. Assuming all of them are unread until we prove otherwise
        $usertopicsallowed = $forumdb->get_results("SELECT DISTINCT t.topic_id, t.forum_id, t.topic_last_post_time FROM $forumdbname.phpbb_users u 
        INNER JOIN  $forumdbname.phpbb_user_group ug ON u.user_id = ug.user_id
        INNER JOIN  $forumdbname.phpbb_groups g ON g.group_id = ug.group_id
        INNER JOIN  $forumdbname.phpbb_acl_groups acl ON acl.group_id = ug.group_id
        INNER JOIN  $forumdbname.phpbb_forums f ON f.forum_id = acl.forum_id
        INNER JOIN  $forumdbname.phpbb_topics t ON f.forum_id = t.forum_id
        WHERE u.user_id = " . $forumuserid . ";");

        $usertopicsallowedcnt = count($usertopicsallowed);

        // Step 2: Return any topics for this user in topics_track
        $usertopicstrack = $forumdb->get_results("SELECT topic_id, mark_time FROM phpbb_topics_track WHERE user_id = " . $forumuserid . " ;");

        if (!empty($usertopicsallowed))
        {
            foreach($usertopicsallowed as $key => $usertopicallowed)
            {
                if (!empty($usertopicstrack))
                {
                    foreach($usertopicstrack as $key2 => $usertopictrack)
                    {
                        if ($usertopicsallowed[$key]->topic_id == $usertopicstrack[$key2]->topic_id)
                        {
                            if ($usertopicsallowed[$key]->topic_last_post_time < $usertopicstrack[$key2]->mark_time)
                            {
                                unset($usertopicsallowed[$key]);
                            }
                        }   
                    }
                }
            }
        }
        $usertopicsallowed2 = array_values($usertopicsallowed);
        $usertopicsallowed2cnt = count($usertopicsallowed2);

        // Step 3a: eturn any topics for this user in forums_track
        $userforumstrack = $forumdb->get_results("SELECT forum_id, mark_time FROM phpbb_forums_track WHERE user_id = " . $forumuserid . ";");

        // Step 3b: remove all topics before the forum tracks lastmark time
        if (!empty($usertopicsallowed2))
        {
            foreach($usertopicsallowed2 as $key => $usertopicsallow2)
            {
                if (!empty($userforumstrack))
                {
                    foreach($userforumstrack as $key2 => $userforumtrack)
                    {
                        if ($usertopicsallowed2[$key]->forum_id == $userforumstrack[$key2]->forum_id)
                        {
                            if ($usertopicsallowed2[$key]->topic_last_post_time < $userforumstrack[$key2]->mark_time)
                            {
                                unset($usertopicsallowed2[$key]);
                            }
                        }   
                    }
                }
            }
        }
        $usertopicsallowed3 = array_values($usertopicsallowed2);
        $usertopicsallowed3cnt = count($usertopicsallowed3);

        // Step 4: remove all topics before the user's lastmark time
        if (!empty($usertopicsallowed3))
        {
            foreach($usertopicsallowed3 as $key => $usertopicsallow3)
            {
                if ($usertopicsallowed3[$key]->topic_last_post_time < $forumuserlastmark)
                {
                    unset($usertopicsallowed3[$key]);
                }
            }
        }
        $usertopicsallowed4 = array_values($usertopicsallowed3);
        $usertopicsallowed4cnt = count($usertopicsallowed4);

        $unreadposts = count($usertopicsallowed4); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:30:42.747

好的，正如我在上面的评论中所说，在 12 小时未能使其正常工作后，我在此处发布后的 15 分钟内找到了答案！注意到这个回复，所以也许它会在未来对其他人有所帮助，我也会在链接上回复。

这个链接给出了答案（https://www.phpbb.com/community/viewtopic.php?f=46&t=2092813#p12800435）但不允许权限，所以你需要添加我在下面写的代码. 因此完整的代码是：

```
// Step 1: get all topics the user has access to. Assuing all of them are unread until we prove otherwise
        $usertopicsallowed = $forumdb->get_results("SELECT DISTINCT t.topic_id, t.forum_id, t.topic_last_post_time FROM $forumdbname.phpbb_users u 
        INNER JOIN  $forumdbname.phpbb_user_group ug ON u.user_id = ug.user_id
        INNER JOIN  $forumdbname.phpbb_groups g ON g.group_id = ug.group_id
        INNER JOIN  $forumdbname.phpbb_acl_groups acl ON acl.group_id = ug.group_id
        INNER JOIN  $forumdbname.phpbb_forums f ON f.forum_id = acl.forum_id
        INNER JOIN  $forumdbname.phpbb_topics t ON f.forum_id = t.forum_id
        WHERE u.user_id = " . $forumuserid . ";");

        // Step 2: Calculate unread posts in all forums (regardless of permissions)         
        $phpbbv2 = $forumdb->get_results("SELECT t.topic_id, t.topic_last_post_time, tt.mark_time as topic_mark_time, ft.mark_time as forum_mark_time FROM (phpbb_topics t) 
        LEFT JOIN phpbb_topics_track tt ON (tt.user_id = " . $forumuserid . " AND t.topic_id = tt.topic_id) 
        LEFT JOIN phpbb_forums_track ft ON (ft.user_id = " . $forumuserid . " AND t.forum_id = ft.forum_id) 
        WHERE ( (tt.mark_time IS NOT NULL AND t.topic_last_post_time > tt.mark_time) 
        OR (tt.mark_time IS NULL AND ft.mark_time IS NOT NULL AND t.topic_last_post_time > ft.mark_time) 
        OR (tt.mark_time IS NULL AND ft.mark_time IS NULL AND t.topic_last_post_time > " . $forumuserlastmark . ") ) AND t.topic_moved_id = 0 AND t.topic_approved = 1 ORDER BY t.topic_last_post_time DESC;");

        // Step 3: Loop through step 2 and only increment the counter for every topic the user has permission to view
        $unreadcounter=0;
        if (!empty($phpbbv2))
        {
            foreach($phpbbv2 as $key => $phpbbv2a)
            {
                if (!empty($usertopicsallowed))
                {
                    foreach($usertopicsallowed as $key2 => $usertopicallowed)
                    {
                        if ($phpbbv2[$key]->topic_id == $usertopicsallowed[$key2]->topic_id)
                        {
                            $unreadcounter++;
                        }   
                    }
                }
            }
        }
        $unreadpost=$unreadcounter; 
```

我相信它可能会更好，我不是最有经验的 php，但它为我工作。

# wolfram-mathematica - 字符串操作的混乱

> ID：13545714
> 
> 赞同：1
> 
> 时间：2012-11-24T21:18:44.823
> 
> 标签：wolfram-mathematica, mathematica-8

`InputForm[{a, b, c, d, e, f}]` 给 `{a, b, c, d, e, f}`

`InputForm[Characters["SOMETHING"]]` 给 `{"S", "O", "M", "E", "T", "H", "I", "N", "G"}`

但是为什么不`Drop[InputForm[Characters["SOMETHING"]],1]`给`{"O", "M", "E", "T", "H", "I", "N", "G"}`

但给出一个 InputForm[] 而没有别的？

我怎样才能做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T21:47:48.197

当你评估

```
InputForm[Characters["SOMETHING"]] 
```

Mathematica 内部产生结果

```
InputForm[List["S","O","M","E","T","H","I","N","G"]] 
```

即，它是一个带有`InputForm`作为头部的表达式，它包含`ListList["S","O","M","E","T","H","I","N","G"]`作为它的第一个子表达式。当 Mathematica 显示表达式时，您看不到`InputForm`头部，因为前端仅使用它作为表达式应该如何显示的提示，但它仍然存在于幕后。

然后，当您使用 时`Drop[..., 1]`，它会查看给定的表达式，挑选出第一个子表达式，即`List["S","O","M","E","T","H","I","N","G"]`，然后丢弃它。就这样离开了`InputForm[]`。

打个比方：如果你评估

```
Drop[List[List["S","O","M","E","T","H","I","N","G"]], 1] 
```

你会明白为什么你会得到一个空列表，对吧？这是同样的事情。

# google-apps-script - 如何在 flextable 中的现有标签下将项目添加到 flextable？

> ID：13545718
> 
> 赞同：1
> 
> 时间：2012-11-24T21:19:11.780
> 
> 标签：google-apps-script

如何从下拉列表中添加项目，例如“项目 1”、“项目 2”和“项目 3”在 flextable 中现有标签的下方？弹性表中的现有标签是：“产品类型”和“尺寸”。

```
 function doGet() {
  var app = UiApp.createApplication();
  //Create listBox
  var listBox = app.createListBox();
  //Add items to listBox
  listBox.addItem("item 1").addItem("item 2").addItem("item 3").setName("myListBox");
  //Create hidden app      
  var hidden = app.createHidden().setName('hidden').setId('hidden')
  //Create button handler
  var handler = app.createServerHandler("buttonHandler");
  // pass the listbox into the handler function as a parameter and the hidden widget as well
  handler.addCallbackElement(listBox).addCallbackElement(hidden);

  //Create flextable 
  var table = app.createFlexTable().setId("myTable");

  //Create flex table style attributes
    table.setStyleAttribute("border-style", "solid")
    table.setStyleAttribute("border-width", "1px")  
    table.setCellPadding(1);

  //Create flex table headers  
  table.setWidget(0, 0, app.createLabel("Product Type")).setStyleAttribute("color", "blue");
  table.setWidget(0, 5, app.createLabel("Size")); 

  var button = app.createButton("+", handler);

  // add all widgets to the app
  app.add(table).add(hidden);
  app.add(listBox).add(button)
  return app;
}

function buttonHandler(e) {
  var app = UiApp.getActiveApplication();
  // get the position (is a string)
  var pos = e.parameter.hidden;
  // initial condition, hidden widget is empty
   if(pos==null){pos='0'};
  // convert to number
   pos=Number(pos);
  var table = app.getElementById("myTable");
  // add the new item at the right place
  table.insertRow(pos).insertCell( pos, 0).setText(pos, 0, e.parameter.myListBox);
  // increment position
  ++pos;
  // save value
  app.getElementById('hidden').setValue(pos);
  // update app
  return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T22:20:27.470

在这里，只需使用 value = '1' 初始化 hidden

*（对不起，我不明白您对其他帖子评论的要求）*

```
function doGet() {
  var app = UiApp.createApplication();
  //Create listBox
  var listBox = app.createListBox();
  //Add items to listBox
  listBox.addItem("item 1").addItem("item 2").addItem("item 3").setName("myListBox");
  //Create hidden app  with initial value    
  var hidden = app.createHidden().setName('hidden').setId('hidden').setValue('1')
  //Create button handler
  var handler = app.createServerHandler("buttonHandler");
  // pass the listbox into the handler function as a parameter and the hidden widget as well
  handler.addCallbackElement(listBox).addCallbackElement(hidden);

  //Create flextable 
  var table = app.createFlexTable().setId("myTable");

  //Create flex table style attributes
  // I changed this line also, seems you want to have borders
    table.setBorderWidth(1)
    table.setCellPadding(1);

  //Create flex table headers  
  table.setWidget(0, 0, app.createLabel("Product Type")).setStyleAttribute("color", "blue");
  table.setWidget(0, 5, app.createLabel("Size")); // why 5 ????? this creates empty cells in between

  var button = app.createButton("+", handler);

  // add all widgets to the app
  app.add(table).add(hidden);
  app.add(listBox).add(button)
  return app;
}

function buttonHandler(e) {
  var app = UiApp.getActiveApplication();
  // get the position (is a string)
  var pos = e.parameter.hidden;
  // initial condition, hidden widget is ='1'
  // convert to number
   pos=Number(pos);
  var table = app.getElementById("myTable");
  // add the new item at the right place
  table.insertRow(pos).insertCell( pos, 0).setText(pos, 0, e.parameter.myListBox);
  // increment position
  ++pos;
  // save value
  app.getElementById('hidden').setValue(pos);
  // update app
  return app;
  } 
```

注意：见评论，为什么 5 in `setWidget(0, 5, app.createLabel("Size"))`？

# java - 同一个包中的显式类导入

> ID：13545720
> 
> 赞同：1
> 
> 时间：2012-11-24T21:19:37.537
> 
> 标签：java, package

我的一个朋友最近遇到了一个问题，他在同一个包中的另一个类中实例化了一个类，但代码无法编译。显式导入类后：`import Baz.Bar;`一切都很好。我已经在 Google 上搜索了这方面的文档，但都没有找到。
如果有人可以提供为什么需要显式导入的参考，那就太好了，谢谢。

# 显式导入示例：

## Foo.java

```
package Baz;
import Baz.Bar;

public class Foo {
  public Foo() {
    new Bar();
  }
} 
```

## 酒吧.java

```
package Baz;

public class Bar {
  public Bar() {}
} 
```

# lisp - CLISP Lambda Calculus Div 实现

> ID：13545721
> 
> 赞同：3
> 
> 时间：2012-11-24T21:19:39.910
> 
> 标签：lisp, common-lisp, lambda-calculus

我正在尝试使用 clisp Lambda Calc 实现除法函数。风格

我从[这个](http://jwodder.freeshell.org/lambda.html)站点读到一个除法的 lambda 表达式是：

> Y (λgqab.LT ab (PAIR qa) (g (SUCC q) (SUB ab) b)) 0

这些是 TRUE 和 FALSE

```
(defvar TRUE #'(lambda(x)#'(lambda(y)x)))
(defvar FALSE #'(lambda(x)#'(lambda(y)y))) 
```

这些是 Int 和 Church 数字之间的转换函数

```
(defun church2int(numchurch)
    (funcall (funcall numchurch #'(lambda (x) (+ x 1))) 0)
)
(defun int2church(n)
    (cond
        ((= n 0) #'(lambda(f) #'(lambda(x)x)))
        (t #'(lambda(f) #'(lambda(x) (funcall f
            (funcall(funcall(int2church (- n 1))f)x))))))

) 
```

这是我的 IF-THEN-ELSE 实现

```
(defvar IF-THEN-ELSE
    #'(lambda(c)
        #'(lambda(x)
            #'(lambda(y)
                #'(lambda(acc1)
                    #'(lambda (acc2)
                        (funcall (funcall (funcall (funcall c x) y) acc1) acc2))))))
) 
```

这是我的 div 实现

```
(defvar division
    #'(lambda (g)
        #'(lambda (q)
            #'(lambda (a)
                #'(lambda (b)
                    (funcall (funcall (funcall (funcall (funcall IF-THEN-ELSE LT) a) b)
                        (funcall (funcall PAIR q)a))
                        (funcall (funcall g (funcall succ q)) (funcall (funcall sub a)b))
                    )))))

) 
```

PAIR、SUCC 和 SUB 功能工作正常。我这样设置我的教会号码

```
(set six (int2church 6))
(set two (int2church 2)) 
```

然后我做：

```
(setq D (funcall (funcall division six) two)) 
```

我有：

```
#<FUNCTION :LAMBDA (A)
  #'(LAMBDA (B)
     (FUNCALL (FUNCALL (FUNCALL (FUNCALL (FUNCALL IF-THEN-ELSE LT) A) B) (FUNCALL (FUNCALL PAR Q) A))
      (FUNCALL (FUNCALL G (FUNCALL SUCC Q)) (FUNCALL (FUNCALL SUB A) B))))> 
```

据我了解，这个函数返回一个教堂对。如果我尝试使用 FRST 函数（FRST 可以正常工作）获取第一个元素，如下所示：

（功能第一个 D）

我有

```
#<FUNCTION :LAMBDA (B)
  (FUNCALL (FUNCALL (FUNCALL (FUNCALL (FUNCALL IF-THEN-ELSE LT) A) B) (FUNCALL (FUNCALL PAR Q) A))
   (FUNCALL (FUNCALL G (FUNCALL SUCC Q)) (FUNCALL (FUNCALL SUB A) B)))> 
```

如果我尝试使用 Church2int 获取 int 值（Church2int 工作正常），如下所示：

```
(church2int (funcall frst D)) 
```

我有

```
*** - +:
       #<FUNCTION :LAMBDA (N)
         #'(LAMBDA (F)
            #'(LAMBDA (X)
               (FUNCALL (FUNCALL (FUNCALL N #'(LAMBDA (G) #'(LAMBDA (H) (FUNCALL H (FUNCALL G F))))) #'(LAMBDA (U) X)) (LAMBDA (U) U))))>
      is not a number 
```

我希望得到 3

我认为问题出在 DIVISION 函数中，在 IF-THEN-ELSE 之后，我尝试对其进行一些更改（我认为这是一个嵌套括号问题），但我遇到了很多错误。

任何帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:04:13.797

你的定义有几个问题。

`DIVISION`不使用**Y**组合器，但原始定义使用。这很重要，因为`DIVISION`函数需要在`g` 参数中复制它自己。

但是，即使您添加了**Y**调用，您的代码仍然无法工作，而是进入无限循环。这是因为 Common Lisp 与当今大多数语言一样，是一种按值调用的语言。在调用函数之前评估所有参数。这意味着您不能像传统的 lambda 演算语义所允许的那样优雅地定义条件函数。

这是在 Common Lisp 中进行教堂编号划分的一种方法。我冒昧地引入了一些语法以使其更具可读性。

```
;;;; -*- coding: utf-8 -*-
;;;; --- preamble, define lambda calculus language

(cl:in-package #:cl-user)

(defpackage #:lambda-calc
  ;; note: not using common-lisp package
  (:use)
  (:export #:λ #:call #:define))

;; (lambda-calc:λ (x y) body)
;;   ==> (cl:lambda (x) (cl:lambda (y) body))
(defmacro lambda-calc:λ ((arg &rest more-args) body-expr)
  (labels ((rec (args)
             (if (null args)
               body-expr
               `(lambda (,(car args))
                  (declare (ignorable ,(car args)))
                  ,(rec (cdr args))))))
    (rec (cons arg more-args))))

;; (lambda-calc:call f a b)
;;   ==> (cl:funcall (cl:funcall f a) b)
(defmacro lambda-calc:call (func &rest args)
  (labels ((rec (args)
             (if (null args)
               func
               `(funcall ,(rec (cdr args)) ,(car args)))))
    (rec (reverse args))))

;; Defines top-level lexical variables
(defmacro lambda-calc:define (name value)
  (let ((vname (gensym (princ-to-string name))))
    `(progn
       (defparameter ,vname nil)
       (define-symbol-macro ,name ,vname)
       (setf ,name
             (flet ((,vname () ,value))
               (,vname))))))

;; Syntax: {f a b}
;;   ==> (lambda-calc:call f a b)
;;   ==> (cl:funcall (cl:funcall f a) b)
(eval-when (:compile-toplevel :load-toplevel :execute)
  (set-macro-character #\{
                       (lambda (stream char)
                         (declare (ignore char))
                         `(lambda-calc:call
                            ,@(read-delimited-list #\} stream t))))
  (set-macro-character #\} (get-macro-character #\))))

;;;; --- end of preamble, fun starts here

(in-package #:lambda-calc)

;; booleans
(define TRUE
  (λ (x y) x))
(define FALSE
  (λ (x y) y))
(define NOT
  (λ (bool) {bool FALSE TRUE}))

;; numbers
(define ZERO
  (λ (f x) x))
(define SUCC
  (λ (n f x) {f {n f x}}))
(define PLUS
  (λ (m n) {m SUCC n}))
(define PRED
  (λ (n f x)
    {n (λ (g h) {h {g f}})
       (λ (u) x)
       (λ (u) u)}))
(define SUB
  (λ (m n) {n PRED m}))

(define ISZERO
  (λ (n) {n (λ (x) FALSE) TRUE}))
(define <=
  (λ (m n) {ISZERO {SUB m n}}))
(define <
  (λ (m n) {NOT {<= n m}}))

(define ONE   {SUCC ZERO})
(define TWO   {SUCC ONE})
(define THREE {SUCC TWO})
(define FOUR  {SUCC THREE})
(define FIVE  {SUCC FOUR})
(define SIX   {SUCC FIVE})
(define SEVEN {SUCC SIX})
(define EIGHT {SUCC SEVEN})
(define NINE  {SUCC EIGHT})
(define TEN   {SUCC NINE})

;; combinators
(define Y
  (λ (f)
    {(λ (rec arg) {f {rec rec} arg})
     (λ (rec arg) {f {rec rec} arg})}))

(define IF
  (λ (condition if-true if-false)
    {{condition if-true if-false} condition}))

;; pairs
(define PAIR
  (λ (x y select) {select x y}))
(define FIRST
  (λ (pair) {pair TRUE}))
(define SECOND
  (λ (pair) {pair FALSE}))

;; conversion from/to lisp integers
(cl:defun int-to-church (number)
  (cl:if (cl:zerop number)
    zero
    {succ (int-to-church (cl:1- number))}))
(cl:defun church-to-int (church-number)
  {church-number #'cl:1+ 0})

;; what we're all here for
(define DIVISION
  {Y (λ (recurse q a b)
       {IF {< a b}
           (λ (c) {PAIR q a})
           (λ (c) {recurse {SUCC q} {SUB a b} b})})
     ZERO}) 
```

如果将其放入文件中，则可以执行以下操作：

```
[1]> (load "lambdacalc.lisp")
;; Loading file lambdacalc.lisp ...
;; Loaded file lambdacalc.lisp
T
[2]> (in-package :lambda-calc)
#<PACKAGE LAMBDA-CALC>
LAMBDA-CALC[3]> (church-to-int {FIRST {DIVISION TEN FIVE}})
2
LAMBDA-CALC[4]> (church-to-int {SECOND {DIVISION TEN FIVE}})
0
LAMBDA-CALC[5]> (church-to-int {FIRST {DIVISION TEN FOUR}})
2
LAMBDA-CALC[6]> (church-to-int {SECOND {DIVISION TEN FOUR}})
2 
```

# markdown - 自动从 pandoc/markdown 中的 bibtex 创建参考书目，无需内联引用

> ID：13545725
> 
> 赞同：19
> 
> 时间：2012-11-24T21:20:00.763
> 
> 标签：markdown, pandoc, bibtex, citations

**如何从 bibtex 文件自动创建引文列表，最好是 markdown（更具体地说，pandoc）格式？**

我正在建立我的个人学术网站。与大多数个人学术网站一样，我在其中包含一个列出我的出版物的页面。但是，我真的不想手写每一个引用，所以我试图找到一种从一个或多个 bibtex 文件创建引用的自动化方法。

理想情况下，我可以使用一个工具将包含我的出版物的 bibtex 文件交给它，它会吐出降价（我正在使用 pandoc + makefile 来创建网站）。我目前不知道有任何此类工具。

使我的需求更加复杂的是，简单的平面出版物列表是不够的。我需要能够列出不同类别下的不同出版物（至少同行评审和非同行评审）。尽管如果确实存在我想要的上述工具，我可以轻松维护多个 bibtex 文件并使用一些 bash-fu 来完成此操作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T02:59:21.307

您可以为此使用 pandoc 自己的引用支持。按照以下行创建一个降价文件：

```
# Peer-reviewed papers

1\. [@me2001]
2\. [@me2002]

# Non-peer-reviewed papers

1\. [@me1999]
2\. [@me1998] 
```

其中`me1999`etc 是您的 bibtex 文件中的键。然后找到或创建一个 CSL 文件，以您想要的方式格式化引文，并使用 pandoc 进行处理：

```
pandoc --bibliography mybiblio.bib --csl mycsl.csl -o citations.html -s citations.txt 
```

或者，您可以根据需要添加`-t markdown`并获取降价版本。

如果您不想手动创建输入降价文件，您可能会编写一个脚本从您的 bibtex 文件生成它，如果它包含足够的元数据来区分同行评审和非同行评审的论文。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-05T15:10:46.313

[出于同样的原因，我想要同样的东西（使用Hakyll](http://jaspervdj.be/hakyll/)创建网站），我发现了“问题”：CSL 文件。

事实上，[Pandoc完美地完成了这项工作](http://johnmacfarlane.net/pandoc/)[，MacFarlane 提供的解决方案](https://stackoverflow.com/a/13558096/635669)是正确的，但它缺乏对 CSL 文件规则的解释——它定义了你是否要在中间文本中使用带有编号的引用列表出版物的最终与否。

[Julien Tanguy](http://julien.jhome.fr/)创建了一种[CSL 风格，将来自 BibTeX 的出版物简化信息放在引用参考的地方](https://github.com/jtanguy/julien.jhome.fr/blob/master/assets/csl/jcsl.csl)，源自芝加哥风格。当然，您可以使用它（它已获得知识共享署名-相同方式共享 3.0 许可），但您也可以创建自己的。

所以，现在（在您发布问题很久之后），我希望您有完整的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-10T22:12:49.600

2012 年和 2014 年较早的评分最高的答案当然是有效的；但是，请注意，自 pandoc 2.11 版（2020-10-11）以来，**pandoc 现在接受 bibtex （以及一些其他书目数据格式）作为输入格式**。这使得解决方案更接近原始问题所寻求的：“一种工具，我可以将包含我的出版物的 bibtex 文件交给它，它会吐出降价”，以便“我可以轻松维护多个 bibtex 文件并使用一些 bash-福”。现在您可以做到这一点：将您的出版物保存在单独的 bibtex 文件中，然后将它们递归地提供给 pandoc（例如，`pandoc -f bibtex --citeproc --csl=chicago-annotated-bibliography.csl pubs.bib -o pubs.md`）并将结果连接或包含在您的其他文本中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-22T11:02:57.790

正如其他人所指出的，完成此任务的最简单方法是使用适当的 CSL 文件。Kieran Healy 在他的 pandoc-templates 存储库中提供了这样一个文件，[托管在 GitHub 上](https://github.com/kjhealy/pandoc-templates)。

> chicago-syllabus.csl 文件对标准 Chicago Notes CSL 文件进行了微小更改，因此您可以使用它在文档正文中输出引文信息。这使得它对于 CV 和课程大纲中的参考文献列表非常有用。

只需下载文件并将选项传递`--csl==<link to CSL-file>`给 pandoc（`<link to CSL-file>`您​​存储下载文件的路径在哪里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-20T17:12:43.820

我正在为我的个人网站使用[bibtexbrowser 。](http://www.monperrus.net/martin/bibtexbrowser/)它是一个易于集成到其他网站的 PHP 脚本（只要服务器支持 PHP）。不幸的是，这个解决方案不会生成 markdown，但它相当灵活，并且具有直接读取 bibtex 文件的优势。

或者，您可以使用 bibtex2html（或类似工具）生成 HTML。Pandoc 连接多个输入文件，您可以在 Markdown 中使用原始 html，因此可以直接将其包含在您需要的任何地方。如果 Markdown 需要成为您的最终输出，您还可以使用 Pandoc 将 HTML 转换为 Markdown。

# java - 如何发现两个物体之间的角度？

> ID：13545727
> 
> 赞同：2
> 
> 时间：2012-11-24T21:20:33.047
> 
> 标签：java, android, math, angle

我想要做的是：我有一个对象（蓝点），我想将它指向其他对象，无论它位于它周围的什么位置（绿点）。所以我需要知道这两个对象之间的角度来做我想做的事吗？

[http://s13.postimage.org/6jeuphcdj/android_angle.jpg](http://s13.postimage.org/6jeuphcdj/android_angle.jpg)

问题是，我不知道该怎么做才能实现这一目标。我已经使用了 atan、math.tan 和许多其他函数，但没有任何好的结果。

你可以帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:24:40.287

计算对象向量的点积。使用`Math.acos`您获得的价值。这会给你一个弧度的角度。

所以，假设你的蓝点在`vec1 = (50, 100)`，绿点在`vec2 = (100, 400)`。

`(x, y)`作为二维向量的元组描述了对象`(0, 0)`在屏幕上的位置和距离。要找到这两个向量之间的角度，您需要对它们进行标准的二进制点积运算。这将为您提供一个标量（一个值，`cos(Theta)`），但您想要它的倒数（`acos`），这是您正在寻找的角度。

您可以在[此处对此事有更好的了解](http://en.wikipedia.org/wiki/Dot_product#Geometric_interpretation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T23:45:27.920

假设蓝点和绿点的坐标分别是(xblue, yblue) 和(xgreen, ygreen)。

蓝点与绿点的夹角为：

```
double angleRadians = Math.atan2(ygreen-yblue, xgreen-xblue); 
```

如果你想要以度为单位的角度：

```
double angleDegrees = Math.toDegrees(angleRadians); 
```

# java - Java：如何以 ISO 8601 SECOND 格式获取当前日期

> ID：13545735
> 
> 赞同：6
> 
> 时间：2012-11-24T21:21:23.743
> 
> 标签：java, date, timezone, format, iso

我需要以 SS 毫秒和 HH:MM 时区获取ISO **8601**中**的**[当前日期](https://en.wikipedia.org/wiki/ISO_8601)

 ****完整的日期加上小时、分钟、秒和秒的小数部分：YYYY-MM-DDThh:mm:ss.sTZD（例如 1997-07-16T19:20:30\. **45+01:00**）

见：[http ://www.w3.org/TR/NOTE-datetime](http://www.w3.org/TR/NOTE-datetime)

我尝试了不同的方法，但我无法获得正确的毫秒和时区数字：

```
DateFormat df=new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSZZ");
df.setTimeZone(TimeZone.getTimeZone("UTC"));
df.format(new Date()); 
```

**JAVA 结果：** 2012-11-24T21:19:27。**758+0000**

**阿帕奇结果：** 2012-11-24T21:19:27。**758+00:00**（Apache Commons FastDateFormat）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T21:42:59.517

实际上 JDK 中有一个类可以处理 ISO8601 的解析和格式化：

```
import javax.xml.bind.DatatypeConverter;

DatatypeConverter.printDateTime(new GregorianCalendar())
//2012-11-24T22:42:03.142+01:00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-12T20:02:48.803****

# css - 需要帮助创建基于百分比的 SASS 网格系统

> ID：13545737
> 
> 赞同：0
> 
> 时间：2012-11-24T21:21:35.930
> 
> 标签：css, sass

我的数学令人震惊，我做不到，因为我一生都在做这个计算。我正在创建一个 CSS 网格系统，它允许用户指定任意数量的网格列（默认情况下有 12 个）、这些列之间的装订线、列周围的最大宽度以及该总宽度内的边距。有希望的结果是每列宽度的百分比宽度和所有列的左边距的百分比。

如果我使用下面的默认值，最大宽度将为 1200 像素，左右的内边距将为 20，为网格的最大允许空间提供 1160 的内部宽度。那有意义吗？

顺便说一句，我使用的是 SASS。查看代码中的注释以查看当前有效和无效的内容。

**这是 jsFiddle 上的代码：http: [//jsfiddle.net/mrmartineau/fMeBk/](http://jsfiddle.net/mrmartineau/fMeBk/)**

```
$gridColumnCount      : 12;   // Total column count
$gridGutterWidth      : 40;   // [in pixels]
$gridColumnPadding    : 30;   // [in pixels]
$gridMaxWidth         : 1200; // [in pixels]
$gridMargin           : 20;   // [in pixels] Space outside the grid

@function gridColumnWidth() {
    @return $gridMaxWidth / $gridColumnCount;
}
// Grid calculations
@function gridColumnWidthCalc($colNumber) {
    // Is correct
    @if $gridGutterWidth == 0 {
        @return percentage($colNumber / $gridColumnCount);
    }
    // Is incorrect
    @else $gridMargin > 0 {
        @return percentage( (($colNumber / $gridColumnCount) - gutterCalc(false) ) );
    }
}

@mixin columns($columnSpan: 1) {
    width: gridColumnWidthCalc($columnSpan);
}
@function gutterCalc($showUnit: true) {
    @if $showUnit == true {
        @return percentage( $gridGutterWidth / ( $gridMaxWidth - ($gridMargin * 2) ) );
    } @else {
        @return $gridGutterWidth / ( $gridMaxWidth - ($gridMargin * 2) ) * 100;
    }
}

@mixin gridColumn() {
    @if $gridGutterWidth > 0 {
        margin-left: gutterCalc();
    }
    @if $gridColumnPadding > 0 {
        padding: $gridColumnPadding + px;
    }
    float: left;
    min-height: 30px;
    position: relative;
    clear: none;
    &:first-child {
        margin-left: 0;
    }
    background-color: pink;
    border: 1px solid red;
}
@for $i from 1 to $gridColumnCount + 1 {
    .span#{$i}  { @include columns($i); }
}

.container {
    padding-left: $gridMargin + px;
    padding-right: $gridMargin + px;
    max-width: $gridMaxWidth + px;
}

.col {
    @include gridColumn();
}

​ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T22:13:57.327

好的，我花了一个小时来理解你的无注释代码。

首先，作为网格单元的“列”和作为实际元素的“列”之间存在歧义。下面我称后者为“块”。

您正确地覆盖了连续第一个块的排水沟。因此，排水沟的总数比一行中的块数少一。

但是当你计算块的宽度时，你会从每一列中减去排水沟，而没有考虑到排水沟比块少。

所以你应该按比例减小块的宽度。

工作解决方案：

```
// Accepts a number of columns that a block should span.
// Returns a percentage width for that block.
@mixin columns($columnSpan: 1) {
    $number-of-blocks-in-container: $gridColumnCount / $columnSpan;
    $total-width-of-all-gutters:    gutterCalc(false) * ($number-of-blocks-in-container - 1);
    $total-width-of-all-blocks:     1 - $total-width-of-all-gutters;
    $width-of-a-single-block:       $total-width-of-all-blocks / $number-of-blocks-in-container;

    width:                          percentage( $width-of-a-single-block );
} 
```

现在你的轮子正在滚动！看看它的实际效果：http: [//jsfiddle.net/fMeBk/46/](http://jsfiddle.net/fMeBk/46/)请记住，浏览器会将百分比值四舍五入，但会出现轻微错误，因此网格定位可能不是像素完美的。顺便说一句，右对齐一行中的最后一个块对于最小化此舍入误差的视觉影响是必要的。

伙计，您的代码架构非常错误，并且您的方法有许多缺点。如果你愿意，我可以命名它们。

你真的应该再试一次苏西。它是 SASS 的精彩部分，也是学习 SASS 技术的重要来源。它的源代码有很好的注释并且可以在 GitHub 上找到。

根据您的说法，Susy 缺乏您的网格框架的哪些功能？

我向你保证，苏西**可以**为所欲为。只需解释一个任务，我就会尝试利用 Susy 提出一个优雅的解决方案。

PS我并不是要劝阻你不要尝试。熟能生巧！实验**是**必要的，而且你做得很好。我想告诉你的是，你应该遵循一个好的榜样并采取良好的做法，这样你就不会走错地方。

PPS 请给我我的评价。我花了很多个人时间试图帮助你，而你却忽略了我的回答。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:24:46.260

您没有说明任何具体问题，这违反了 StackOverflow 规则。

如果没有您对框架结构的解释，就很难理解您使用每个函数和 mixin 究竟想要实现什么。

我们应该如何提供帮助？

无论如何，您的方法是错误的，原因有两个：

1.  您正在尝试重新发明轮子。已经有几十个网格框架。
2.  您正在使用非语义方法。您通过在 HTML 中应用特定于样式的类来设置样式。相反，你的类应该是语义的（即声明块的功能，而不是它们的外观）并且样式应该应用于 CSS 中的这些类。使用 SASS，这很容易。

解决方案：使用[Susy](http://susy.oddbird.net/)。这是一款很棒的软件，它的作者 Eric Meyer 在 StackOverflow 上的反应非常好。

使用 Susy，您的代码可能如下所示：

HTML：

```
<div id="container">
        <div id="gallery">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <div id="promos">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <div id="footer">
            <div id="bottom-menu"></div>
            <div id="partners"></div>
            <div id="social-buttons"></div>
        </div>
        <div>
            <div class="col span12"></div>
        </div>
</div> 
```

萨斯：

```
//////////
// Imports
//////////

@import susy

//////////
// Defining variables
//////////

// Main grid properties
$total-columns  : 12      // Number of columns
$container-style: fluid   // The grid should stretch
$max-width      : 1200px  // But not wider than this

// Proportions between column width and gutter between columns
$column-width   : 85%     
$gutter-width   : 100% - $column-width

// Setting margins around the grid
$grid-padding   : 1em     // This will remain absolute
$container-width: 100%    // If you want relative margins, change this instead

//////////
// Applying containers and columns
//////////

// Setting containers in all immediate children of #container
#container > *
  +container /* ← Actual Susy magic! :D */
  max-width: $max-width

// Setting columns
#gallery > *
  +span-columns(1)
  &:last-child             // The last column should be marked with "omega"
    +span-columns(1 omega) // to compensate browsers' calculation errors

#promos > *
  +span-columns(2)
  &:last-child
    +span-columns(2 omega)

// #footer
#bottom-menu
  +span-columns(6)

#partners
  +span-columns(4)

#social-buttons
  +span-columns(2 omega) 
```

抱歉，我没有测试过这段代码，它可能包含错误，但你仍然可以看到这个想法。

Susy 还可以让您轻松创建响应式网格。他们说 Susy 将成为 Compass 中的默认网格引擎。

UPD：请参阅此问题旁边的特定问题答案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T16:02:42.943

不久前，我组装了一个简单的基于 SASS 百分比的网格生成器。您正在寻找的数学在这里：

[https://github.com/jordancooperman/simple_grid/blob/master/assets/css/scss/partials/_grid.scss](https://github.com/jordancooperman/simple_grid/blob/master/assets/css/scss/partials/_grid.scss)

那里的一些 css 仅用于显示目的，因此如果使用项目中也包含的标记，您将看到您的网格。如果您有任何问题，请告诉我，干杯！

# java - 具有邻接表图的 Dijkstra 算法

> ID：13545738
> 
> 赞同：0
> 
> 时间：2012-11-24T21:21:57.880
> 
> 标签：java, graph, dijkstra

我有一个作为邻接表实现的无向加权图。有一个以 Node 对象作为键，Edge 对象列表作为值的 hashmap。这些 Edge 对象包含两个节点之间的边的权重。

我正在尝试编写 Dijkstra 的最短路径算法；但我担心我的图形结构太复杂，无法理解我能为 Dijkstra 找到的所有示例/伪代码。任何人都可以提供任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:28:55.613

[使用Boost Graph Library](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/table_of_contents.html)怎么样，还有 python 绑定。我认为 Dijkstra Shortest path 就是它的例子之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:33:31.813

对于 Java，有很多可用的。JGraphT 简单又好用。Jung，JTS 等。如果您自己实现，那么我宁愿使用 LinkedHashSet，例如：

```
public abstract class Graphs<T, E> 
{
final LinkedHashSet<Vertex<? extends T>> allVertex;
 ... 
```

和顶点将是：

```
/**
 * E is of the type: the kind of vertex I want to make. For example String

 */
 public interface Vertice<E>
  {
  public void setAttribute(E ob);
  public E getAttribute();
  //      public Set<Edge<?>> getConnectedVertices();
  public Set<Edge<?>> getConnectedEdges();       
  public Edge<?> getPassageToVertice(Vertice<?> vertice);
  } 
```

边缘是：

```
package Graph;

   public interface Edge<E> 
   {

/**
 * Returns the attribute Associated with the Edge
 * @return The Attribute associated with the Edge
 */
public E getAttribute();

public void setSource(Vertex<?> source);

public void setDestination(Vertex<?> dest);

/**
 * Sets the attribute of the edge
 * @param attr Sets the attribute of the Edge
 */
void setAttribute(E attr);

/**
 * Get the permission to access the destination from the source.
 * <p> For example:    
 * <li>A-------edge---------B </li>
 * here A is a vertex
 *      B is a vertex
 *      edge is the edge.
 * If the argument of the method is vertex A then it returns Vertex B, if it is
 * legal to return (for ex will return B if the edge is intended to be Undirected)
 * This method can be used to create different types of Edge's.</p>
 * <p> In case of a directed edge
 * <li>A----->----edge------>B</li>
 * on calling getPassage(B) it will return null.
 * </p>
 * @param source One end of the edge
 * @return The other end of the edge if the edge has access to. Or else return null;
 */
public Vertex<?> getPassage(Vertex<?> source);

public Vertex<?> getSource();

public Vertex<?> getDestination(); 
```

}

# asp.net-mvc - 使用实体框架更新数据库迁移时，一个或多个实体的验证失败

> ID：13545743
> 
> 赞同：2
> 
> 时间：2012-11-24T21:22:08.213
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4, ef-code-first

尝试`update-database`执行迁移步骤时出现以下错误（打开包管理器控制台窗口并输入“update-database”命令）

> *System.Data.Entity.Validation.DbEntityValidationException：一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。*

我在`Movie`课堂上添加新字段

```
public class Movie
{
        public int ID { get; set; }
        [Required]
        [DisplayName("Name")]
        public string MovieName { get; set; }
        [Required]
        [DisplayName("Type")]
        public string MovieType { get; set; }
        [DisplayName("Year")]
        public int MovieProductionYear { get; set; }
        [Range(1, 5)]
        [DisplayName("Priority")]
        public int priority { get; set; }
        [DisplayName("NoOfWatches")]
        public int NumberOfWatches { get; set; }
        [DisplayName("isWatched")]
        public bool isWatched { get; set; }
        [Range(1, 10)]
        [DisplayName("IMDB")]
        public int IMDBRating { get; set; }
        [DisplayName("Available")]
        public bool Availability { get; set; }
        [StringLength(50)]
        [DisplayName("Comments")]
        public string Comments { get; set; }
        [DisplayName("Actor")]
        public string Actor { get; set; }
        [DataType(DataType.Date)]
        public DateTime ReleasedDate { get; set; }
    } 
```

并且新字段的添加迁移类包含这个 up 和 down 方法

```
public override void Up()
{
    AddColumn("dbo.Movies", "NumberOfWatches", c => c.Int(nullable: false));
    AddColumn("dbo.Movies", "ReleasedDate", c => c.DateTime(nullable: false));
}

public override void Down()
{
    DropColumn("dbo.Movies", "ReleasedDate");
    DropColumn("dbo.Movies", "NumberOfWatches");
} 
```

当我删除这两个字段并更新数据库时，种子方法成功运行

有什么建议么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:14:14.407

种子方法是否包含 NumberofWatches 的零值？这是一个不可为空的 int，您需要在种子中提供一个零（或其他整数值）。同样，ReleaseDate 将需要每个电影种子对象的日期值，因为它也是不可为空的。

# restsharp - 是否有适用于可移植类库的 RestSharp 实现？

> ID：13545744
> 
> 赞同：11
> 
> 时间：2012-11-24T21:22:18.187
> 
> 标签：restsharp, portable-class-library

当我尝试使用 nuget 将 RestSharp 添加到可移植类库项目时，我得到以下信息：

> 无法安装软件包“RestSharp 104.1”。您正在尝试将此包安装到以“.NETPortable,Version=v4.0,Profile=Profile104”为目标的项目中，但该包不包含任何与该框架兼容的程序集引用或内容文件。有关详细信息，请联系包作者。

我假设它不受支持？如果是这样的话，有人对如何让它工作有任何建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-17T08:35:12.600

另一个有趣的选择是[Flurl](https://flurl.io)

> Flurl 是一个现代的、流畅的、异步的、可测试的、可移植的、充满流行语的 URL 构建器和 HTTP 客户端库。

代码片段：

```
var result = await "https://api.mysite.com"
    .AppendPathSegment("person")
    .SetQueryParams(new { a = 1, b = 2 })
    .WithOAuthBearerToken("my_oauth_token")
    .PostJsonAsync(new { first_name = "Frank", last_name = "Underwood" })
    .ReceiveJson<T>(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T17:44:29.603

您有一个便携式 RestSharp 在以下位置工作：

[https://github.com/Geodan/geoserver-csharp/tree/master/RestSharp](https://github.com/Geodan/geoserver-csharp/tree/master/RestSharp)

看起来它运行良好......它也使用 Json.net 便携式版本

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-02T13:20:27.980

你可以试试[RestSharp.Portable](https://www.nuget.org/packages/FubarCoder.RestSharp.Portable/)。这是一个提供与 RestSharp 非常相似的 API 的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T19:02:27.003

您可能还想查看[PortableRest](https://github.com/advancedrei/PortableRest)。同样，通过 Xamarin 为 .NET 4.5、Silverlight 5、Windows Phone 8.x 和 Windows 8.x 以及 iOS 和 Android 提供与 RestSharp 类似的功能（并严格遵循 API 样式）。

# java - 在tomcat容器中运行的java servlet中使用“环境”变量

> ID：13545746
> 
> 赞同：2
> 
> 时间：2012-11-24T21:22:27.907
> 
> 标签：java, tomcat, servlets, environment-variables

我需要从 java servlet 访问在 shell 脚本中创建的变量。看了论坛里的相关帖子，还是没搞明白。如果我在我的 debian 系统上导出一个变量 (export var=foo123)，然后我想在我的 sevlet (System.getenv(var)) 中使用这个变量，它总是返回一个空值。

我已经尝试在 /etc/init.d/tomcat7 中添加 'export var=foo123' 但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:33:26.147

我认为你不需要使用导出，它应该足够了：

```
 VARIABLE_NAME="variable_value" 
```

在tomcat脚本文件中。并且不要忘记“”！

# mvvm - 在模型中使用 MVVM Light 引用

> ID：13545749
> 
> 赞同：0
> 
> 时间：2012-11-24T21:22:39.693
> 
> 标签：mvvm, mvvm-light

在我正在进行的一个项目中，我正在尝试开发一种通用机制，用于将消息从代码库中的任何位置发送回前端，以进行可能的日志记录、向用户显示等。

由于错误/异常，可能会发送消息以报告进度等。最初我想使用类似 log4net 的东西来报告消息数据，并在应用程序级别有一个自定义附加程序来使用这些消息，然后将它们显示/记录为合适的。但是，由于几个问题，我不确定这是最好的方法

1) 该项目被拆分为多个单独的程序集，我发现跨多个 dll 配置 log4net 存在问题。

2) 这种消息传递方案不仅仅是日志，因此使用日志框架可能过于严格。

目前，我正在使用 C# 自定义消息事件从程序集发送数据并在应用程序级别注册处理程序以捕获它们。

但是我已经意识到 MVVMLight 中的 Messenger 类正是我正在寻找的，一种跨程序集发送通用数据包（类）的方法。但是因为我可能会从模型代码发送消息，所以我想知道这是否会在模型代码中添加对 MVVMLight 的不必要的依赖项。

我的印象是模型代码应该尽可能地无依赖，这样它就可以不加修改地放入任何应用程序框架中。

你们有什么感想？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:25:13.033

如果这就是你想要做的，那么你应该使用 Messenger 类。

模型代码被另一个应用程序使用的可能性有多大（真的）？如果它是通用的（用户偏好、安全性等），那么您可能想在其他地方使用它，但如果您提供定制的业务数据，那么[YAGNI](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)。

从良好实践的角度来看，我建议做这样的事情：

```
public interface IMessenger<T>
{
    public void Send(T message);
}

public class MessengerProxy:IMessenger<ErrorDto>
{
    public void Send(ErrorDto error)
    {
        Messenger.Default.Send(error);
    }
}

public class AnotherModel
{
    public AnotherModel(IMessenger<ErrorDto> errorRegister)
    {
        _errorRegister=errorRegister;
    }

    private RegisterError(Exception ex)
    {
      var dto=new ErrorDto(ex,"My Title");
      _errorRegister.Send(dto);
    }
} 
```

在 MVVM Light 中注册 MessengerProxy 并将其注入到模型类的构造函数中。在上面的模型类中，我将接口注入到构造函数中。这使我可以访问 Messenger，但如果以后需要，我可以更改底层实现。

# wpf - 将依赖属性注册到内部控件

> ID：13545750
> 
> 赞同：0
> 
> 时间：2012-11-24T21:22:47.260
> 
> 标签：wpf, xaml

我有一个名为 BasicUserControl2 的控件，它只包含一个 TextBox。我想注册一个依赖属性，该属性公开嵌套在控件内的 TextBox。这样在父控件中说 BasicUserControl1 我可以写类似

```
<tt:BasicUserControl2 TextBox.FontSize="10" /> 
```

我目前有以下依赖属性：

```
 public TextBox TextBox
    {
        get { return (TextBox)_textBox; }
        set { this.SetValue(TextBoxProperty, value); }
    }
    public static readonly DependencyProperty TextBoxProperty = DependencyProperty.Register(
      "TextBox", typeof(TextBox), typeof(BasicUserControl2)); 
```

我需要登记什么样的财产？我试图避免必须将文本框上的属性单独映射到父 UserControl 上的相同属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:21:21.227

您需要在自定义 UserControl 上创建[Attached 属性而不是 Dependency 属性。](http://msdn.microsoft.com/en-us/library/ms749011.aspx)

# mysql - 汽车租赁的实体关系图（MySQL）

> ID：13545752
> 
> 赞同：1
> 
> 时间：2012-11-24T21:23:04.763
> 
> 标签：mysql, database, entity-relationship

我是论坛的新手，我已经尝试过寻找答案，但找不到我需要的具体内容。这是交易。对于拼贴项目，我必须制作一个汽车租赁网络应用程序。我想出了一个想法，它应该做什么，为此我创建了我的 ER 模型。但我不确定它是否好。事情不是做非常复杂的应用程序，而是涵盖一个 RAD 工具。我最终选择了 Iron Speed。这是应用程序的想法。

客户可以到租车网站进行预约，除此之外，他还可以选择开始日期、结束日期和车辆。员工可以编辑，查看所有预订，如果客户亲自到“办公室”也可以进行预订。他还可以将新车添加到数据库（汽车类型 + 型号等）并为每次预订记帐。管理员可以添加新员工和其他所有内容（但这是他的主要内容）。

表USERS有关于员工和管理员的所有信息，角色中有角色，他们需要有一个桥表（这是需要的，因为RAD工具使用户角色权限）。

不会单独需要有关客户的信息（这可能是一件坏事，但让我们这样吧），我们在 REZERVATION 表中有他们的信息。

注意 - 我知道将员工与预订（一对多）联系起来是合乎逻辑的，但这给了我一个问题，即客户在预订时需要选择员工，与添加汽车一样，选择员工添加汽车是愚蠢的......我的意思是有人需要将汽车放入数据库是合乎逻辑的。对于比尔来说，这是合乎逻辑的，所以我知道是谁做的。汽车类型和汽车以这种方式与预订相关联，因此我可以稍后在下拉菜单中进行过滤类型-> 型号。

jpeg 链接： http: [//dl.dropbox.com/u/50541281/SnapShot_121124_220841.jpg](http://dl.dropbox.com/u/50541281/SnapShot_121124_220841.jpg)

链接到 mysql 工作台文件：[http ://dl.dropbox.com/u/50541281/car%20rental.mwb](http://dl.dropbox.com/u/50541281/car%20rental.mwb)

如果知道的人可以根据需要对其进行修改，或者在需要时放置一些桥接表，我将非常感激。或者只是在这里输入注释，以便我可以自己调整我的架构。

补充一下，这只是假设需要查看 ER 模型的版本，因为我刚刚将它从我的语言翻译成英文，所以所有属性、类型等都不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T08:54:10.900

在这种情况下，您最好在 sql 语句期间使用连接来获取信息。假设员工在流程后期（预订汽车后）之前与此帐户没有任何关系，您应该将其留给另一个界面。预订汽车后，员工应登录并检查，如果他们处理订单，则将 EmployeeID 添加到表中。让它没有关系，它看起来很乱，但它是一个快速的解决方案。

# sql - 创建视图 + 查询（组合列 + 添加额外属性）

> ID：13545754
> 
> 赞同：3
> 
> 时间：2012-11-24T21:23:09.087
> 
> 标签：sql, views

我设法在两个查询之间使用 UNION 解决了​​它，我相信我的尝试有点偏离并尝试进行数学加法。这可能不是你能做到的最好方法，但它有效，这对我来说已经足够了。感谢您的帮助。

工作解决方案：

```
CREATE VIEW Registrations AS
(SELECT S.identificationnumber AS StudentId, S.name AS StudentName, C.code AS CourseCode, C.name AS CourseName, 'Waiting' AS Status
FROM  Waitinglist W, Student S, Course C
WHERE S.identificationnumber = W.identificationnumber
AND W.code = C.code) UNION (SELECT S.identificationnumber AS StudentId, S.name AS StudentName, C.code AS CourseCode, C.name AS CourseName, 'Registered' AS Status
FROM  Registeredat R, Student S, Course C
WHERE S.identificationnumber = R.identificationnumber
AND R.code = C.code); 
```

* * *

原始问题：

我是数据库和 SQL 的初学者，所以事情可能看起来不那么专业。

我正在尝试以纯文本方式执行的操作： *我正在尝试为所有注册和等待的学生以及所有课程创建一个视图。我还想添加一个新的“列”，即“已注册”或“等待”。*

我希望视图看起来如何：

```
StudentID, StudentName, CourseCode, CourseName, Status

StudentID = Combined idenficationnumber for Table "RegisterdAt" and "Waitinglist"
StudentName = Based on StudentID find matching name in Table "Student"
CourseCode = Combined code for Table "RegisterdAt" and "Waitinglist"
CourseName = based on code find matching name in Table "Course"
Status = Either "registered" or "waiting" 
   depending on if we got the "row" from Table "RegisterdAt" or "Waitinglist" 
```

创建的表（我还在其中添加了一些示例数据，以便于测试）：

```
CREATE TABLE Student(
identificationnumber  VARCHAR(20),
name VARCHAR(50),
branchname VARCHAR(50),
programmename VARCHAR(50),
PRIMARY KEY(identificationnumber),
FOREIGN KEY(branchname, programmename) REFERENCES Branch(name, programmename)
);

CREATE TABLE Course(
code CHAR(6),
name VARCHAR(50),
credits VARCHAR(10),
departmentname VARCHAR(50),
PRIMARY KEY(code),
FOREIGN KEY(departmentname) REFERENCES Department(name)
);

CREATE TABLE Waitinglist(
identificationnumber VARCHAR(20),
code CHAR(6),
ddate VARCHAR(10),
PRIMARY KEY(identificationnumber, code),
FOREIGN KEY(identificationnumber) REFERENCES Student(identificationnumber),
FOREIGN KEY(code) REFERENCES Course_with_maxstudents(code)
);

CREATE TABLE Registeredat(
identificationnumber VARCHAR(20),
code CHAR(6),
PRIMARY KEY(identificationnumber,code),
FOREIGN KEY(identificationnumber) REFERENCES Student(identificationnumber),
FOREIGN KEY(code) REFERENCES Course(code)
); 
```

尝试创建视图（不工作，并且缺少注册/等待属性）：

```
CREATE VIEW Registrations AS
SELECT (R.identificationnumber + W.identificationnumber) AS StudentId, S.name AS StudentName, (R.code + W.code) AS CourseCode, C.name as CourseName
FROM  Registeredat R, Waitinglist W, Student S, Course C
WHERE S.identificationnumber = (R.identificationnumber + W.identificationnumber)
AND C.code = (R.code + W.code); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:52:54.777

您发布的工作解决方案看起来很棒。我只会将普通的 UNION 变成 UNION ALL，因为您似乎不太可能需要从这两个子查询之间删除重复项。ALL 将阻止服务器做不必要的工作来重新组合结果并搜索不存在的重复项。

所以它会变成：

```
CREATE VIEW Registrations AS  
(
    SELECT S.identificationnumber AS StudentId, S.name AS StudentName, C.code AS CourseCode, C.name AS CourseName, 'Waiting' AS Status  
    FROM  Waitinglist W, Student S, Course C  
    WHERE S.identificationnumber = W.identificationnumber  
    AND W.code = C.code  
)  
UNION ALL  
(  
    SELECT S.identificationnumber AS StudentId, S.name AS StudentName, C.code AS CourseCode, C.name AS CourseName, 'Registered' AS Status  
    FROM  Registeredat R, Student S, Course C  
    WHERE S.identificationnumber = R.identificationnumber  
    AND R.code = C.code  
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T22:36:29.857

根据 r.code 不为空添加列状态“已注册”，否则为“等待”

```
CREATE VIEW Registrations AS
SELECT (R.identificationnumber + W.identificationnumber) AS StudentId,
       S.name AS StudentName,
       (R.code + W.code) AS CourseCode,
       C.name as CourseName,
       case when r.code is not null then 'registered' else 'waiting' end as status
FROM  Registeredat R, Waitinglist W, Student S, Course C
WHERE S.identificationnumber = (R.identificationnumber + W.identificationnumber)
AND C.code = (R.code + W.code); 
```

[SQL Fiddle](http://www.sqlfiddle.com/#!2/e70ff)用于进一步测试。

我删除了外键约束，因为这里没有定义各种表。

# android - 如何为我的网络用户提供下载我的 Android 应用程序的选项

> ID：13545756
> 
> 赞同：1
> 
> 时间：2012-11-24T21:23:27.570
> 
> 标签：android, redirect, web, download

我已经使用 androidcreator.com 创建了我的 Android 应用程序，并且我已经下载了它。

现在，我想向从 Android 设备访问我的网站的网络用户展示在他们访问我的网站时下载应用程序的选项。

我的网站使用 php。是否存在要求我的网络用户下载 Android 应用程序的“标准”php/javascript 代码？（仅当它们来自 Android 设备时）

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:24:54.410

您可以简单地将链接添加到 Google Play。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T00:01:02.280

如果您想更加主动，您可以在 PHP 中检查客户端的用户代理字符串是否为“Android”，并使用它来弹出一些内容以鼓励他们下载您的应用程序。

请参阅： [解析用户代理字符串的代码？](https://stackoverflow.com/questions/2122786/code-to-parse-user-agent-string)

# java - 在标签上添加后者的方法按钮

> ID：13545758
> 
> 赞同：0
> 
> 时间：2012-11-24T21:23:35.230
> 
> 标签：java, swing

我有 HangGame 程序，当我按下任何后者按钮时，我不会编写此代码，例如 (A,B,.....)在文本文件中读取它例如我在文本文件中读取单词，如（Stake），屏幕上会出现五个标签（_ _ _ _ _），当我按住 S 按钮时，字符 S 将出现在第一个标签部分（ S _ _ _ _ ) 等等.... 我不知道如何为 Button 中的 Action 侦听器编写代码。最后我添加标签没有问题，但我不知道如何将正确的字符放在正确的位置。我希望你能理解我的问题。

```
 public void ButtonComponent () {
    for (int i = 65; i < 78; i++) {
        JButton temp = new JButton("" + (char) i);
        temp.addActionListener(new BtnListener());
        temp.setBounds((i - 64) * 55, 110, 50, 30);
        add(temp);
    }
    for (int i = 78; i < 91; i++) {
        JButton temp = new JButton("" + (char) i);
        temp.addActionListener(new BtnListener());
        temp.setBounds((i - 77) * 55, 150, 50, 30);
        add(temp);
    }
}
class BtnListener implements ActionListener {
public void actionPerformed(ActionEvent e) {

    for (int s=0;s<splitword.length;s++) {
    String btnText = ((JButton)e.getSource()).getText().toLowerCase();
    if (splitword[s].contains(btnText)) {
        System.out.println("This letter is contained in the word:" + btnText);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:55:00.623

因为这是刽子手，您必须跟踪使用的所有正确字母。这是解决方案的模板：

```
String guessWord = "STAKE";
StringBuilder builder = new StringBuilder();
builder.append("S"); // hint: btnText...
builder.append("T");
String displayWord = guessWord.replaceAll("[^" + builder.toString() + "]", "_"); 
```

我不会彻底解决问题，但这应该给你足够的工作。

# .net - 命名空间“GalaSoft.MvvmLight”中不存在类型或命名空间名称“Ioc”

> ID：13545761
> 
> 赞同：1
> 
> 时间：2012-11-24T21:24:16.207
> 
> 标签：.net, mvvm-light

我有一个通过 MvvmLight 库使用 MVVM 模式设计的 WPF 应用程序的源代码。该应用程序已由另一位开发人员开发，现在我必须支持它并添加一些功能。

所以现在我的问题是我无法构建应用程序。我的 VS2012 在 ViewModelLocator 类中显示了一个奇怪的编译时错误：

> 命名空间“GalaSoft.MvvmLight”中不存在类型或命名空间名称“Ioc”（您是否缺少程序集引用？）

...尽管该项目引用了 GalaSoft.MvvmLight.Extras 库，其中包含此命名空间以及 ViewModelLocator 类使用的 SimpleIoc 类。除此之外，VS 甚至突出了 SimpleIoc 类，并且不突出 Galasoft.MvvmLight.Extras 导入作为使用部分中的错误之一......

该应用程序是针对 .NET 3.5 构建的，我使用与以前的开发人员相同的库版本。

请告知什么可以解决这个问题？可能有人遇到过这个问题？

在此先感谢，马克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:19:36.620

添加 GalaSoft.MVVMLight.Extras 因为 Ioc 存在于这个库中......

# wordpress - WordPress 更新覆盖 .svn 文件夹

> ID：13545764
> 
> 赞同：2
> 
> 时间：2012-11-24T21:24:38.757
> 
> 标签：wordpress, svn

我们使用 Subversion 来跟踪我们的网络团队对我们的 Wordpress 网站所做的更改。我们只是修改和更新我们的自定义主题，但我们很难更新 Wordpress 核心和插件。

现在，我的已签出副本正在本地安装 WordPress。但是，当我在此本地副本上运行自动 WordPress 更新时，更新会覆盖相应子文件夹中的 .svn 文件夹，导致在我尝试提交更新时出现“缺少包含工作副本管理区域的目录 .svn”错误。

如何在不覆盖 .svn 文件夹的情况下自动进行这些更新？截至目前，我正在诉诸手动复制文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:29:54.597

如果您只是维护您的主题，则不应将整个 wordpess 安装在 svn 下，而应仅安装主题。我还认为，在您的情况下，在实际的实时站点中实际使用存储库的工作副本是没有意义的。在您的情况下，我会将您的主题的工作副本保存在您服务器上的某个位置，然后按需 rsync 到您的主题文件夹。通过这种方式，您可以自动更新 wordpress 和您的插件而不会出现问题。

# android - 禁用后如何重新启用键盘保护？

> ID：13545770
> 
> 赞同：4
> 
> 时间：2012-11-24T21:25:19.290
> 
> 标签：android, locking, screen, keyguard

我正在制作一个使用前台服务的锁屏应用程序，该服务在启动时禁用键盘保护并在销毁时重新启用它。我可以很好地禁用它，但是当服务停止时它不会重新启用。我正在停止活动中的服务，并且我知道 onDestroy() 正在被调用，因为通知消失了。我在服务中的代码：

```
@Override
public void onDestroy() {
    isRunning = false;
    KeyguardManager keyguardManager = (KeyguardManager) getSystemService(Service.KEYGUARD_SERVICE);
    KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
    lock.reenableKeyguard();
    stopForeground(true);  
    super.onDestroy(); 
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    KeyguardManager keyguardManager = (KeyguardManager) getSystemService(Service.KEYGUARD_SERVICE);
    KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
    lock.disableKeyguard();

    Notification notification = new Notification(R.drawable.ic_launcher, getText(R.string.ticker_text),
            System.currentTimeMillis());
    Intent notificationIntent = new Intent(this, LockService.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
    notification.setLatestEventInfo(this, getText(R.string.notification_title),
            getText(R.string.notification_message), pendingIntent);
    startForeground(1, notification);

    return Service.START_STICKY;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:32:32.027

要禁用（解锁）键盘保护，请使用以下代码。这将创建一个新的 KeyguardLock 并使用它来禁用键盘保护

```
KeyguardLock keyguardLock = keyguardManager.newKeyguardLock(“Keyguard_Lock_Test”);
keyguardLock.disableKeyguard(); 
```

要重新启用键盘保护，请使用以下行来释放锁定。如果键盘锁首先被锁定，并且当前没有应用程序持有键盘锁，这将锁定键盘锁

```
keyguardLock.reenableKeyguard();
keyguardLock = null; 
```

# django - 如何在管理员中实现设置？

> ID：13545771
> 
> 赞同：0
> 
> 时间：2012-11-24T21:25:57.670
> 
> 标签：django

我有自己的应用程序的 Django 项目。这个应用程序只有两个模型。我需要为此应用程序配置一些特定的选项，但在默认的 Django 管理面板中。

例如，我正在考虑创建一个模型：`SettingsApp`并使用我的设置创建一个条目，但在管理面板中，用户可以添加其他条目或删除现有条目，并且应用程序将无法运行。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T22:04:17.067

你应该看看：

[https://github.com/jqb/django-settings](https://github.com/jqb/django-settings)

并检查它是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T22:34:20.783

这适用于我的设置模型：

```
class SettingsAdmin(admin.ModelAdmin):

    def has_add_permission(self, request):
        return False

    def has_remove_permission(self, request):
        return False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T12:02:16.140

我建议您从[此处查看应用程序](https://bitbucket.org/bkroeze/django-livesettings)**django-livesettings**。如[文档](http://django-livesettings.readthedocs.org/en/latest/)中所述：

> Django-Livesettings 是从 Satchmo 项目中分离出来的一个项目。它提供了通过管理界面配置设置的能力，而不是通过编辑 settings.py。此外，livesettings 允许您设置合理的默认值，以便您的站点无需任何更改即可完美运行。Livesettings 使用缓存来确保这对您网站的性能影响最小。
> 
> 最后，如果您希望锁定您的站点并禁用设置，您可以导出您的 livesettings 并将它们存储在您的 settings.py 中。这使您可以灵活地决定各种用户如何与您的应用程序交互。
> 
> Livesettings 支持多种类型的输入选择：
> 
> *   布尔值
> *   十进制
> *   期间
> *   漂浮
> *   整数
> *   正整数
> *   细绳
> *   长串
> *   多个字符串
> *   长多个字符串
> *   模块值
> *   密码
> 
> Livesettings 已经在 satchmo 项目中使用了很多年，并且被认为是稳定的并且可以用于生产。

# python - 如何在 Python 中创建对象集合代理？

> ID：13545772
> 
> 赞同：1
> 
> 时间：2012-11-24T21:25:59.797
> 
> 标签：python, object, collections, proxy

我正在尝试创建一个对象集合代理，它可以执行以下操作：

```
class A:
    def do_something():
        # ...

class B:
    def get_a():
        return A()

class Proxy:
    ?

collection = [B(), B()]
proxy = Proxy(collection)

proxy.get_a().do_something()
# ^ for each B in collection get_a() and do_something() 
```

实现这一目标的最佳架构/策略是什么？

我猜关键问题是，如何缓存 get_a() 的结果，以便我可以代理 do_something()

注意我不希望`proxy.get_a().do_something()`返回任何明智的东西，它只是应该做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T22:53:42.157

很简单......您可能希望对其进行调整以进行更多检查

```
class A(object):
    def do_something(self):
        print id(self), "called"

class B(object):
    def get_a(self):
        return A()

class Proxy(object):
    def __init__(self, objs):
        self._objs = objs

    def __getattr__(self, name):
        def func(*args, **kwargs):
            return Proxy([getattr(o, name)(*args, **kwargs) for o in self._objs])
        return func

collection = [B(), B()]

proxy = Proxy(collection)
proxy.get_a().do_something() 
```

结果是：

```
4455571152 called
4455571216 called 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T21:54:35.473

最pythonic的方式可能是[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)：

```
results = [b.get_a().do_something() for b in collection] 
```

如果要缓存调用`B.get_a()`，可以使用[memoization](http://en.wikipedia.org/wiki/Memoization)。自己进行记忆的一种简单方法如下所示：

```
cache = None

# ...

class B:
    def get_a(self):
        global cache
        if cache is None:
            cache = A()
        return cache 
```

如果要在多个地方使用缓存，则需要根据键缓存结果以区分它们，并且为了方便起见，编写一个[装饰器](https://stackoverflow.com/a/1594484/1599111)，您可以简单地包装要缓存其结果的函数。

*在Python Algorithms: Mastering Basic Algorithms in the Python Language*中找到了一个很好的例子（参见[这个问题](https://stackoverflow.com/questions/4669391/python-anyone-have-a-memoizing-decorator-that-can-handle-unhashable-arguments)）。针对您的情况进行了修改，不使用函数参数，而是使用函数名作为缓存键，它看起来像这样：

```
from functools import wraps

def memoize(func):
    cache = {}
    key = func.__name__
    @ wraps(func)
    def wrap(*args):
        if key not in cache:
            cache[key] = func(*args)
        return cache[key]
    return wrap

class A:
    def do_something(self):
        return 1

class B:
    @memoize
    def get_a(self):
        print "B.get_a() was called"
        return A()

collection = [B(), B()]

results = [b.get_a().do_something() for b in collection]
print results 
```

输出：

```
B.get_a() was called
[1, 1] 
```

# objective-c - 在第二个 ViewController 上显示工具栏

> ID：13545775
> 
> 赞同：0
> 
> 时间：2012-11-24T21:26:15.203
> 
> 标签：objective-c, ios

我在同一个**故事板上有****两个视图控制器**。我想要做的是将一组字符串值发送到另一个视图控制器上的表视图控件。

 **```
 ViewController2 *second=[self.storyboard instantiateViewControllerWithIdentifier:@"View2"];
    second.arrayFromVC1=areaArray;
    [self presentViewController:second animated:YES completion:nil]; 
```

默认情况下，第二个视图控制器在顶部有一个工具栏控件。（见下文。）

![第二个视图控制器](../Images/a0f0099c828765728f5b4044a5eaea9d.png)

将数据传递给另一个视图控制器对我来说并不容易，因为我已经使用 Xcode 两个星期了。我以某种方式管理它。因此，字符串数组通过设置在第二个实现文件上的数组变量 (arrayFromVC1) 发送到第二个视图控制器。我想有经验的 Xcode 用户知道我在说什么。无论如何，第二个视图控制器确实会收到如下所示的值列表。

![在此处输入图像描述](../Images/d8c1319e8ce86c0edf8ceafd2e57c5a6.png)

好吧，问题是当用户看到列表时，第二个视图控制器上的工具栏控件将消失，并且表格视图控件（UITableView）占据了整个窗口。我知道您可以通过在**viewDidAppear**方法下指定值来控制表格视图控件的大小。但我的问题是……这就是 iOS 和 Xcode 的工作方式吗？因此，如果我想在顶部显示该工具栏控件，我还必须通过在 viewDidAppear 方法下编写代码来以编程方式进行吗？

感谢您的意见。

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T22:07:43.363

汤姆，你在使用界面构建器和故事板吗？如果是这样，请在 IB 中选择 ViewController，转到 Editor（在顶部菜单中）--> Embed In --> Navigation Controller。

这会将选定的 VC 和它所连接的任何 VC（等等）嵌入到导航控制器中。**

# c++ - protobuf：如何将 GZipOutputStream 与 CodedOutputStream 一起使用？

> ID：13545776
> 
> 赞同：1
> 
> 时间：2012-11-24T21:26:18.873
> 
> 标签：c++, sockets, protocol-buffers

为了通过套接字传输数据，我使用下面的“sendData”方法。由于数据量可能会变得非常大（~ 250000 - 500000 字节），我想使用 GZipOutputStream 来压缩 protobuf 消息。我面临的问题是，我无法获得压缩消息的大小来添加它。

我如何将 GZipOutputStream 与 CodedOutputStream 结合使用？

```
void CommIF::sendData(FVMsg message, vector<int> clients)
{   
  google::protobuf::uint32 message_length = message.ByteSize();
  int prefix_length = sizeof(message_length);
  int buffer_length = prefix_length + message_length;
  google::protobuf::uint8 buffer[buffer_length];

  google::protobuf::io::ArrayOutputStream array_output(buffer, buffer_length);
  google::protobuf::io::CodedOutputStream coded_output(&array_output);

  coded_output.WriteLittleEndian32(message_length);
  message.SerializeToCodedStream(&coded_output);

  for (vector<int>::iterator it = clients.begin(); it!=clients.end(); ++it) {
    int client = *it;
    int sent_bytes = write(client, buffer, buffer_length);
    if (sent_bytes != buffer_length) {
      ERROR_LOG("problems sending . Only sent " << sent_bytes << " bytes");
    }
    else
    {
      DBG_LOG("Successfully sent " << sent_bytes << " bytes");
    }
  }
} 
```

# php - PHP根据一个值返回一定数量的代码

> ID：13545778
> 
> 赞同：0
> 
> 时间：2012-11-24T21:26:50.243
> 
> 标签：php

我正在尝试以星和半星的形式创建从 1 到 5（包括 0.5 值）的用户评分的视觉表示。我已经从 MySQL 数据库创建了用户评分数组，我对这些值进行了平均，以创建数字形式的平均用户评分。我想做的是取这个值..

```
$averageuserrating 
```

如果该值为“1”，则返回此代码一次

```
 echo '<img src="images/star.png" class="ratingstar" />'; 
```

如果 $averageuserrating 为 1.5，则返回此代码

```
<img src="images/star.png" class="ratingstar" /><img src="images/halfstar.png" class="ratingstar" /> 
```

等等......有没有办法在没有 10 个嵌套 if 语句的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:30:04.423

可以通过以下方式完成：

```
$fullStar = '<img src="images/star.png" class="ratingstar" />';
$halfStar = '<img src="images/halfstar.png" class="ratingstar" />';

$rating = 1.5;

while($rating > 0){
    if($rating >= 1){
        echo $fullStar;
        $rating = $rating - 1;
        continue;
    }

    if($rating >= 0.5){
        echo $halfStar;
        $rating = $rating - 0.5;
    }
} 
```

附带说明，这不是显示评级系统的最佳方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:29:45.140

```
for($i = 1; $i <= floor($averageuserrating); $i++)
    echo '<img src="images/star.png" class="ratingstar" />';
if($averageuserrating > floor($averageuserrating))
    echo '<img src="images/halfstar.png" class="ratingstar" />'; 
```

注意：如果您的平均值不仅增加了 0.5，而且例如您可以获得 1.4： 将第二个条件更改为：

```
if($averageuserrating >= (floor($averageuserrating) + 0.5)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T21:34:58.920

只需使用`str_repeat`函数和一点数学。

```
$full_star = '<img src="images/star.png" class="ratingstar" />';
$half_star = '<img src="images/halfstar.png" class="ratingstar" />';

echo str_repeat( $full_star, floor($averageuserrating) );
if(! is_int($averageuserrating) ){
    echo $half_star;
} 
```

我认为它会正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T21:29:38.390

您可以使用 switch 语句。

```
switch($value){
case "1";
echo '<img src="images/star1.png" class="ratingstar" />';
break; 
case "1";
echo '<img src="images/star2.png" class="ratingstar" />';
break;

so on and so forth.. 

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T21:39:36.943

这是可能的解决方案的代码：

```
$numWholeStars = (int)$averageuserrating;

$numHalfStars = $averageuserrating - (int)$averageuserrating;

for($i = 0; $i < $numWholeStars; $i++) {
    echo '<img src="images/star.png" class="ratingstar" />';
}

if($numHalfStars != 0) {
    echo '<img src="images/halfstar.png" class="ratingstar" />';
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T21:58:24.033

听起来您需要重新考虑基础代码以 a) 收集所有评级 b) 显示评级应显示多少颗星。首先看 [php 数学 - 模数](http://ca1.php.net/operators.arithmetic)

```
get_user_ratings($user="bob")
{
    15 - the user ratings should/could be in 1 place (int)users.total_ratings
    // lets say there are 15 records similar to the one below
    jim, 1, bob 
    ...
    mary, 1.5, bob

    // calculate the average of all votes
    ...
    ...
    /* If your rating system offers the chance to rate a user 1.5 stars
     use modulus to check if the rating needs half stars */
    $stars = "";
    if( $averageuserrating % 1 == 0)
    {
        for(
            i=0;
            i<$averageuserrating-1; 
           $i++;$stars .= '<img src="images/star.png" class="ratingstar" />'; 
        )
        return $stars;
    }
    else
    {
        for(
            i=0;
            i<$averageuserrating-1; 
            $i++;$stars .='<img src="images/star.png" class="ratingstar" />' 
        )
        $stars .= '<img src="images/halfstar.png" class="ratingstar" />'; 
        return $stars;
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-24T22:06:15.637

```
$fullstar = '<img src="images/star.png" class="ratingstar" />';
$halfstar = '<img src="images/halfstar.png" class="ratingstar" />';

$value=2.5;//some rating

$number = number_format ( $value, 1 );
$fs = floor ( $number );  //full stars
$hs=(($value*10)%10)/5;   //half stars

while($fs>0)
{
echo $fullstar;
$fs=$fs-1;
}

if($hs==1)
echo $halfstar; 
```

# php - Wordpress 输出循环到 html 列（两个 div）？

> ID：13545780
> 
> 赞同：0
> 
> 时间：2012-11-24T21:26:55.953
> 
> 标签：php, wordpress-theming, wordpress

我有一个循环通过我的自定义帖子类型。

我只想选择 8 个帖子，并将输出打印成 2 列，每列 4 个帖子。我不确定如何处理这个问题。到目前为止，我有：

```
<?php
            $args = array( 'post_type' => 'hh_event', 'posts_per_page' => 8 );
            $loop = new WP_Query( $args );
            while ( $loop->have_posts() ) : $loop->the_post();

                echo '<div class="entry-date">';
                $event_date = get_post_meta($post->ID, 'event_date', true); 
                echo date('M j',strtotime($event_date));
                echo '</div>';
                the_title();
                echo '<div class="entry-content">';
                the_content();
                echo '</div>';

            endwhile;
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:38:29.760

一个简单的解决方案是将您的内容存储在一个数组中，如下所示：

```
<?php
$args = array( 'post_type' => 'hh_event', 'posts_per_page' => 8 );
$loop = new WP_Query( $args );

$columns = array( '', '' );
$content = '';
$i = 0;
global $post;

while ( $loop->have_posts() ) : $loop->the_post();
    $content = '<div class="entry-date">';
    $event_date = get_post_meta($post->ID, 'event_date', true); 
    $content .= date('M j',strtotime($event_date));
    $content .= '</div>';
    $content .= get_the_title();
    $content .= '<div class="entry-content">';
    $content .= apply_filters( 'the_content', $post->post_content );
    $content .= '</div>';

    $columns[ ($i % 2) ] .= $content;
    $i ++;
endwhile;

echo '<div class="column-left">' . $columns[0] . '</div><div class="column-right">' . $columns[1] . '</div>';

?> 
```

所以基本上你有一个包含两个空字符串的数组。然后，您将每列的内容分配给名为 的变量`$content`。然后将该变量的值附加到变量的适当部分`$columns`并递增计数器`$i`。

然后只需将每列的内容回显到适当的包装`<div>`元素，或者您要将它们分成两列。

# java - Jruby 新手：安装 gems

> ID：13545781
> 
> 赞同：0
> 
> 时间：2012-11-24T21:27:01.073
> 
> 标签：java, ruby, rvm, jruby

我在 OSX Mountain Lion 上通过 rvm 安装了 jruby-1.7.0。我对 Ruby 相当了解，但对 Java 的经验却很少。

设置好之后，我尝试做的第一件事是安装 gem（特别是`gem install bundler`）。什么都没有发生，我没有返回提示。唯一的迹象是我的 macbook 的风扇开始转动，几分钟后，机器变得非常热。

我真的不知道如何追踪正在发生的事情，更重要的是，如何解决它。有关如何诊断此问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:19:57.387

我认为`gem install --verbose bundler`应该给你更多关于正在发生的事情的反馈，如果你想知道是否有任何事情发生，这很好。

`gem env`显示了 ruby​​gems 是如何设置的。运行它还将显示至少 ruby​​gems 的某些部分正在按应有的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:49:09.740

您可能使用的是较旧的 java，jruby 使用最新版本的 Java 1.7 或实验性 java 1.8 会运行得更快

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T22:10:28.230

我刚刚安装了它，要安装一个gem，你需要使用jruby的具体安装gem。

# version-control - 我如何为我的多解决方案棕地项目使用 TFS 源代码控制

> ID：13545785
> 
> 赞同：0
> 
> 时间：2012-11-24T21:27:42.770
> 
> 标签：version-control

我想为我的棕色项目使用 TFS 源代码控制。我的项目有很多解决方案。一种解决方案取决于另一种解决方案。我有如下模块。

**商务ERP.Sales.sln**

```
BusinessERP.Sales.UI
BusinessERP.Sales.BL
BusinessERP.Sales.DAL
BusinessERP.Sales.DTO 
```

**商务ERP.Purchase.Sln**

```
BusinessERP.Purchase.UI
BusinessERP.Purchase.BL
BusinessERP.Purchase.DAL
BusinessERP.Purchase.DTO 
```

…… 等等

**BusinessERP.Integration.Sln**

```
BusinessERP. Integration.UI
BusinessERP. Integration.BL
BusinessERP. Integration.DAL
BusinessERP. Integration.DTO 
```

这里一个模块依赖于另一个模块，集成依赖于所有单独的模块。

我的问题是如何使用 TFS 源代码控制

我应该创建一个 TeamProject，然后将我的所有解决方案粘贴到那里。如果我这样做了，那么默认情况下 TFS 会忽略 dll 文件。因此，当我想签出时，我会得到一个没有 dll 的解决方案。然后我的解决方案没有运行。保持我的解决方案以使我无法复制 dll 或我必须做的事情的标准方法是什么？

另一个问题是，我应该在同一团队项目下的 TFS 中创建区域吗？然后在每个区域下我会放置我的每个解决方案？

需要帮助我如何从我的多解决方案现有项目开始 TFS 源代码控制，以便我可以从 TFS 中获得所有好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:26:03.490

我要做的是为您拥有的每个***产品/项目*****创建一个团队项目。**如果解决方案一起发布，它们是同一个 TP 的一部分。

 *将所有解决方案一起存储在源代码管理中。这意味着，例如，如果您的产品名为*BusinessERP*，那么您的资源将存储在以下树状配置中：
`$/`
`- BusinessERP`
`-- BusinessERP.Sales`
`--- BusinessERP.Sales.UI`
`--- BusinessERP.Sales.BL`
`--- BusinessERP.Sales.DAL`
`--- BusinessERP.Sales.DTO`
`-- BusinessERP.Purchase`

等等。

如果您打算使用发布/版本控制计划（并且您确实应该进行任何认真的工作），那么这就是您将放入版本控制结构中的结构。有关 TFS 中的版本管理的更多信息，您可能需要参考[Visual Studio Team Foundation Server 分支和合并指南](http://vsarbranchingguide.codeplex.com/)。

**需要注意的一件重要事情：**如果您在不同的解决方案中管理您的资源，请确保正确管理这些解决方案之间的相互依赖关系。确保您不依赖外部解决方案的来源，而是依赖它们的**输出**，并以与 3rd 方依赖项相同的方式管理它们。当您尝试设置新的开发环境时，这将为您节省很多问题，并避免由于另一个解决方案的更改而导致依赖解决方案中断的情况。相反，如果您只依赖某个解决方案的经过测试的版本，您将能够适应*您的*日程安排中的任何重大更改，而不是其他团队的更改。*

# perl - perl，使用 IO::Select 和 IO::Socket::INET 读取阻塞

> ID：13545788
> 
> 赞同：2
> 
> 时间：2012-11-24T21:28:23.127
> 
> 标签：perl, sockets, unix, nonblocking

该服务器工作正常，但如果我这样做

> bash$ (echo -n "abcd" ;sleep 50 ; echo "efgh") | 数控本地主机 9090

服务器阻塞 50 秒。在我的完整代码中，我有多个`IO::Select::INET`. 我有另一个套接字侦听其他端口（1234），当服务器被睡眠阻塞时，我无法处理该端口中的任何内容。我尝试更改`getline`by`getc`但我只读取了第一个字母“a”并且它阻塞了。

有人可以帮助我吗？

```
use common::sense;
use IO::Select;
use IO::Socket;

use constant PORT1 => 9090;
use constant TIMEOUT => 1;

my $event_socket  = new IO::Socket::INET(Listen => 1, LocalPort => PORT1, ReuseAddr => 1) 
    or die "Can't bind event_socket: $@\n";

my $sel = IO::Select->new;
$sel->add($event_socket);

my $event_emiter = undef;

while(1){ 
    foreach my $sock (my @ready = $sel->can_read(TIMEOUT)) {
        if ($sock == $event_socket) {
            my $new = $event_socket->accept;
            binmode($new, ":encoding(UTF-8)");
            $sel->add($new);

            $event_emiter=$new;

            warn "[event socket] connect from ",$new->peerhost, "\n";
        } elsif ($sock == $event_emiter) {
            unless($sock->eof){
                my $recv_data = $sock->getline;
                warn "[event socket] LOL '$recv_data'\n";
            } else {
                $sel->remove($sock);
                $sock->close;
                $event_emiter = undef;
                warn "[socket] disconnect\n";
            }
        } else {

            $sel->remove($sock);
            $sock->close;

            warn "[socket] disconnect\n";
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T21:34:05.370

您不是在读取可用数据，而是在读取换行符之前一直在读取。始终使用`sysread`.

改变

```
 elsif ($sock == $event_emiter) {
        unless($sock->eof){
            my $recv_data = $sock->getline;
            warn "[event socket] LOL '$recv_data'\n";
        } else {
            $sel->remove($sock);
            $sock->close;
            $event_emiter = undef;
            warn "[socket] disconnect\n";
        }
    } 
```

至

```
 elsif ($sock == $event_emiter) {
        our $buf; local *buf = \$bufs{$fh};  # alias $buf = $bufs{$fh};

        my $rv = sysread($fh, $buf, 64*1024, length($buf));
        if (!$rv) {
            if (defined($rv)) {  # EOF
                # ... Handle anything left in $buf ...
            } else {  # Error
                # ... Handle error ...
            }

            delete $bufs{$fh};
            $sel->remove($sock);
            $sock->close;
            $event_emiter = undef;
            warn "[socket] disconnect\n";
            next;
        }

        while ($buf =~ s/^(.*)\n//) {
            warn "[event socket] LOL '$1'\n";
        }
    } 
```

并`my %bufs;`在选择循环之外添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:34:53.240

它在这里阻塞：

```
my $recv_data = $sock->getline; 
```

这是因为 getline() 正在阻塞等待`\n`. 相反，您应该`sysread()`在单独的缓冲区中组装您的命令。

# algorithm - 世界需要一种算法来在二维正方形中找到总和相同的数字

> ID：13545790
> 
> 赞同：0
> 
> 时间：2012-11-24T21:28:30.113
> 
> 标签：algorithm, language-agnostic

我一直在看一个电视选秀节目，一个人刚刚挑战整个国家（**！**）来解决一个问题。我觉得我可以写一个小脚本来解决它，但我仍然需要以某种方式识别问题。所以问题是这样的：

```
 +---+---+---+
    |   |   |   |  -->
    +---+---+---+
    |   |   |   |  -->  sum of
    +---+---+---+       3 rows
    |   |   |   |  -->
    +---+---+---+

      |   |   |     also sum of
      v   v   v     2 diagonals
       sum of
       3 columns 
```

将数字从`1`到写到`9`上面的正方形中，以获得所有标记线的相同总和（例如 3 行、3 列和 2 条对角线的总和）。

然后，他通过临时扩展大正方形并按以下顺序写下数字，继续展示此问题实例的解决方案：

```
 +---+
        | 3 |
    +---+---+---+
    | 2 |   | 6 |
+---+---+---+---+---+
| 1 |   | 5 |   | 9 |
+---+---+---+---+---+
    | 4 |   | 8 |
    +---+---+---+
        | 7 |
        +---+ 
```

然后，他删除了多余的方格，并将其中的值分别放在最远的空方格中：

```
 +---+---+---+
    | 2 | 7 | 6 |
    +---+---+---+
    | 9 | 5 | 1 |
    +---+---+---+
    | 4 | 3 | 8 |
    +---+---+---+ 
```

然后他得到了总和：

```
rows:
2 + 7 + 6 = 15
9 + 5 + 1 = 15
4 + 3 + 8 = 15

columns:
2 + 9 + 4 = 15
7 + 5 + 3 = 15
6 + 1 + 8 = 15

diagonals:
2 + 5 + 8 = 15
6 + 5 + 4 = 15 
```

**所以问题是用 100 x 100 的正方形来解决这个问题。**

1.  这是什么问题？
2.  NP完全吗？
3.  我该如何解决这个问题？

我可能记错了一些细节，但它不在 youtube 上，所以请随时建议对问题进行更改。

**注意**电视很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:41:53.237

这样的正方形被称为 MAGIC SQUARES。[在http://en.wikipedia.org/wiki/Magic_square#Method_for_constructing_a_magic_square_of_odd_order](http://en.wikipedia.org/wiki/Magic_square#Method_for_constructing_a_magic_square_of_odd_order)了解他们的构造

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T21:33:00.907

它被称为“魔方”，维基百科提供了一些算法示例来生成魔方。

# android - 在android中绘制一个带边框的填充矩形

> ID：13545792
> 
> 赞同：58
> 
> 时间：2012-11-24T21:28:47.283
> 
> 标签：android, border, android-canvas, paint, fill

Android中有什么方法可以绘制一个带有黑色边框的填充矩形。我的问题是 canvas.draw() 需要一个绘画对象，据我所知，绘画对象不能为填充和描边使用不同的颜色。有没有解决的办法？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-08-24T09:51:26.530

试试油漆。**setStyle** (Paint.Style.FILL **)**和绘画。**设置样式**（Paint.Style.STROKE **）**。

 **```
Paint paint = new Paint();
Rect r = new Rect(10, 10, 200, 100);

@Override
public void onDraw(Canvas canvas) {
    // fill
    paint.setStyle(Paint.Style.FILL);
    paint.setColor(Color.MAGENTA); 
    canvas.drawRect(r, paint);

    // border
    paint.setStyle(Paint.Style.STROKE);
    paint.setColor(Color.BLACK);
    canvas.drawRect(r, paint);
} 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2017-05-16T12:21:36.763

如果您正在绘制多个视图，那么您还可以使用两种颜料，一种用于描边，一种用于填充。这样您就不必一直重置它们。

[![在此处输入图像描述](../Images/1a8ca7d7d506f461e89c8f006a97839a.png)](https://i.stack.imgur.com/kqsyA.jpg)

```
Paint fillPaint = new Paint();
Paint strokePaint = new Paint();

RectF r = new RectF(30, 30, 1000, 500);

void initPaints() {

    // fill
    fillPaint.setStyle(Paint.Style.FILL);
    fillPaint.setColor(Color.YELLOW);

    // stroke
    strokePaint.setStyle(Paint.Style.STROKE);
    strokePaint.setColor(Color.BLACK);
    strokePaint.setStrokeWidth(10);
}

@Override
protected void onDraw(Canvas canvas) {

    // First rectangle
    canvas.drawRect(r, fillPaint);    // fill
    canvas.drawRect(r, strokePaint);  // stroke

    canvas.translate(0, 600);

    // Second rectangle
    int cornerRadius = 50;
    canvas.drawRoundRect(r, cornerRadius, cornerRadius, fillPaint);    // fill
    canvas.drawRoundRect(r, cornerRadius, cornerRadius, strokePaint);  // stroke
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T21:32:04.697

您用边框的颜色和矩形加上边框的大小绘制一个矩形，您更改油漆的颜色并再次绘制具有正常大小的矩形。**

# php - 在循环php中创建一个多维数组

> ID：13545797
> 
> 赞同：1
> 
> 时间：2012-11-24T21:29:20.847
> 
> 标签：php, arrays, multidimensional-array

我已经进行了相当多的谷歌搜索，但找不到任何有效的东西，我什么也没得到，这可能很简单，但有很多变化似乎与我正在做的不匹配。

为了让您总体了解我的工作，我正在访问一个 API 并将信息作为一个对象取回。有评论和附件，它们在单独的数组中。

我想要做的是按日期和时间的顺序一起显示评论和附件，而不是分开显示。

我认为最好的方法是通过评论数组创建一个循环，然后通过附件数组创建一个循环，然后加入两者并按日期（纪元）排序，然后循环整个合并循环，以呼应我想要的内容。那应该提供一些上下文，现在我只想为评论创建多维数组，我可以弄清楚其余的。

```
$comments_holder = array();

//total number of comments in the array     
$comment_total = $issue_json->fields->comment->total -1;
$i=1;
while ($i <= $comment_total)
    {
    //this is the date,time and timezone info for each comment
    $raw_date = $issue_json->fields->comment->comments[$i]->updated;

    $comments_holder[$i] = array();

    //convert_sql_time just converts from 2012-11-04T16:33:00.936+600 into epoch time so i can sort the results later based on date
    $comments_holder[$i]['comments_date'] = convert_sql_time($raw_date); 
    $comments_holder[$i]['comments_displayName'] = $issue_json->fields->comment->comments[$i]->author->displayName;
    $comments_holder[$i]['comments_body'] = $issue_json->fields->comment->comments[$i]->body;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T22:21:03.517

如果数据一切正常，则此代码足以构建这样的数组：

```
$comments = $issue_json->fields->comment->comments;
$result = array();

foreach ($comments as $comment) {
  $result[] = array(
    'comments_date' => convert_sql_time($comment->updated),
    'comments_displayName' => $comment->author->displayName,
    'comments_body' => $comment->body,
  );
}

print_r($result); 
```

*   如果comment->comments 是一个数组，则无需单独计算；
*   foreach 足以遍历数组，无需为计算数组索引保留单独的变量；
*   [] 表示法将自动增加数组索引并直接分配数组将起到作用（即会导致多暗数组）

# asp.net - ASP 导出到 Excel 客户端并让浏览器知道它是什么应用程序

> ID：13545808
> 
> 赞同：0
> 
> 时间：2012-11-24T21:30:28.400
> 
> 标签：asp.net

我正在使用下面的代码，并指定它是什么类型的应用程序。但是，当提示打开应用程序时，浏览器不知道它是什么类型的文件。我怎样才能让浏览器已经想将它作为excel打开？

任何帮助表示赞赏

```
public static void ExportToSpreadsheet(DataTable table, string name)
{
    HttpContext context = HttpContext.Current;
    context.Response.Clear();
    foreach (DataColumn column in table.Columns)
    {
        context.Response.Write(column.ColumnName + "\t");
    }
    context.Response.Write(Environment.NewLine);
    foreach (DataRow row in table.Rows)
    {
        for (int i = 0; i < table.Columns.Count; i++)
        {
            context.Response.Write(row[i].ToString() + "\t");
        }
        context.Response.Write(Environment.NewLine);
    }
    context.Response.ContentType = "application/ms-excel";
    context.Response.AppendHeader("Content-Disposition", "attachment; filename=" + name+ ".xls");
    context.Response.End();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:55:29.890

尝试：

```
Response.ContentType = "application/vnd.ms-excel"; 
```

或用于 xlsx

```
Response.ContentType = "application/application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"; 
```

# iphone - 将具有大量子节点的 XML 解析为 UITableView

> ID：13545811
> 
> 赞同：2
> 
> 时间：2012-11-24T21:31:20.940
> 
> 标签：iphone, objective-c, ios, xml, cocoa-touch

我有一个看起来像这样的 xml 文件：

```
<result>
<trip duration="03:30">
<takeoff date="2010-06-19" time="18:40" city="Moscow"/>
<landing date="2010-06-19" time="20:10" city="Novgorod"/>
<flight carrier="Rossiya" number="8395" eq="320"/>
<price>13429.00</price>
</trip>
<trip duration="03:40">
<takeoff date="2010-06-19" time="09:20" city="Omsk"/>
<landing date="2010-06-19" time="11:15" city="Paris"/>
<flight carrier="AirFrance" number="1145" eq="320"/>
<price>13229.00</price>
</trip>
<trip duration="03:50">
<takeoff date="2010-06-19" time="07:20" city="Omsk"/>
<landing date="2010-06-19" time="14:15" city="Barcelona"/>
<flight carrier="AirFrance" number="1100" eq="320"/>
<price>13329.00</price>
</trip>
</result> 
```

我想获取所有参数并将它们放在 3 个 UITableViewCells 中。如您所见，有 3 个航班及其相关数据。我一直在尝试在 TableView 中解析它，但我只是设法让`<price>`事情顺利进行。您将如何处理在 XML 文件中解析复杂结构的参数？我的意思是我将如何获得`takeoff date`参数等等？据我所知，您不能像这样应用我正在使用的策略：

```
- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
        if ([elementname isEqualToString:@"price"]) 
        {
            currentTweet.dateCreated = currentNodeContent;
        } 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:59:14.617

您也必须管理 didStartElement。这是一个示例元代码，可能对您有好处：

```
-(void)parser:(NSXMLParser*)parser didStartElement:(NSString *)elementName namespaceURI:(NSString*)namespaceURI qualifiedName:(NSString*)qualifiedName attributes:(NSDictionary*)attributeDict {
    if([elementName isEqualToString:@"trip"]) {
       currentTweet.tripDuration = [attributeDict objectForKey:@"duration"];
    } else if ([elementName isEqualToString:@"takeoff"]) {
       currentTweet.takeoffDate = [attributeDict objectForKey:@"date"];
       currentTweet.takeoffTime = [attributeDict objectForKey:@"time"];
       currentTweet.takeoffCity = [attributeDict objectForKey:@"city"];
    } else if ([elementName isEqualToString:@"landing"]) {
       ...............
    } else if ...........
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T22:01:07.783

这是我经常使用的代码，用于从 XML 文件构建字典，该文件遵循一些定义明确的重复元素（在本例中为`"trip"`）的基本模型，以及其中的一系列数据元素，其中一些我正在阅读标签的属性（在本例中`"takeoff"`为`"landing"`和`"flight"`），以及其他我正在读取开始和结束标签之间的数据（在本例中为`"price"`）。

我有以下 ivars：

```
@interface XmlParserViewController () <NSXMLParserDelegate>
{
    NSMutableArray *trips;
    NSMutableDictionary *currentTrip;
    NSMutableString *currentElement;
}
@end 
```

然后代码如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    trips = [[NSMutableArray alloc] init];

    // I'm getting my xml from my bundle. You get it however you're currently getting it.

    NSString *filename = [[NSBundle mainBundle] pathForResource:@"results" ofType:@"xml"];
    NSData *data = [NSData dataWithContentsOfFile:filename];
    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];
}

#pragma mark - NSXMLParserDelegate methods

#define kRowElementTag @"trip"

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
    NSArray *attributeElementNames = @[@"takeoff", @"landing", @"flight"];
    NSArray *foundCharacterElementNames = @[@"price"];

    if ([elementName isEqualToString:kRowElementTag])
    {
        currentTrip = [[NSMutableDictionary alloc] init];
        [trips addObject:currentTrip];
        if (attributeDict)
            [currentTrip setObject:attributeDict forKey:elementName];
    }
    else if (currentTrip)
    {
        if ([attributeElementNames containsObject:elementName])
        {
            if (attributeDict)
                [currentTrip setObject:attributeDict forKey:elementName];
        }
        else if ([foundCharacterElementNames containsObject:elementName] && currentElement == nil)
        {
            // you can change this to just grab a few fields ... add whatever fields you want to this

            currentElement = [[NSMutableString alloc] init];
            [currentTrip setObject:currentElement forKey:elementName];
        }
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:kRowElementTag])
    {
        currentTrip = nil;
    }
    else if (currentElement)
    {
        currentElement = nil;
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (currentElement)
    {
        [currentElement appendString:string];
    }
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError
{
    NSLog(@"%s error=%@", __FUNCTION__, parseError);

    // we should handle the error here
}

- (void)parserDidEndDocument:(NSXMLParser *)parser
{
    NSLog(@"%s trips=%@", __FUNCTION__, trips);

    // generally I immediately kick off the reload of the table, but maybe 
    // you want to grok the trips dictionary first.
    //        
    // [self.tableView reloadData];
} 
```

正如您所猜想的那样，我正在尝试使用我们已经习惯于解析 JSON 文件的那种嵌套数组/字典结构。显然，我不喜欢我必须在我的代码中预先识别 XML 文件的一些结构的事实（外部数组有`"trip"`标签，即`"takeoff"`,`"landing"`和`"flight"`具有属性但 "price"` 没有t) 等。但这比我第一次尝试 XML 解析所有硬编码值的尝试要好一些。叹。

# r - 如何在申请中指定“绑定方法”

> ID：13545812
> 
> 赞同：0
> 
> 时间：2012-11-24T21:31:24.227
> 
> 标签：r

比如说，我有一个`m`2 行 3 列的矩阵，以及一个接受数字类型参数并返回向量的函数。例如，

```
f <- function(x){
    rep(x,4)
} 
```

如果我使用

```
 t <- apply(m, MARGIN = c(1,2), FUN = f) 
```

我会得到一个张`t`量`dim(t) == c(4,2,3)`。但我想要的是一个张`t`量`dim(t) == c(2,3,4)`。我怎样才能方便地做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T22:05:04.797

使用`aperm`，广义转置：

```
tt <- <- apply(m, MARGIN = c(1,2), FUN = f)
aperm(tt, c(2,3,1)) 
```

请参见此处：[如何更改数组维度的顺序](https://stackoverflow.com/questions/10679131/how-to-change-order-of-array-dimensions)

# mysql - MySQL：如何在 mysql 中获取列表 innodb 文件名？

> ID：13545813
> 
> 赞同：1
> 
> 时间：2012-11-24T21:31:29.677
> 
> 标签：mysql

是否有 SQL 命令来获取当前 mysql InnoDB 引擎的文件列表？

注意：我有一个 mysql 文件夹，里面有很多文件，我不确定哪些是实际使用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T22:06:51.270

有，详情请看[这里](http://dev.mysql.com/doc/refman/5.5/en/innodb-backup.html)。基本上，在 mysql 数据目录中，每个数据库都有一个子目录，在其中，每个表都有文件，因此您可以收集哪些已使用和未使用。[我刚刚在 Linux 上的mysql](http://mysql.com)实例上确认了这一点。

# ruby-on-rails - 导轨未定义的方法'has_many'

> ID：13545815
> 
> 赞同：4
> 
> 时间：2012-11-24T21:31:45.180
> 
> 标签：ruby-on-rails, migration, rake, migrate

我正在制作一个数据库：

```
class CreateUsers < ActiveRecord::Migration
  def change
    has_many :listings, :dependent => :restrict #won't delete if listings exist
    has_many :transactions, :dependent => :restrict #won't del if trans exist
    create_table :users do |t|
      t.integer :key #it's hard to use string as primary
      t.string :identifier_url
      t.string :username
      t.integer :rating

      t.timestamps
    end
  end
end 
```

和

```
class CreateListings < ActiveRecord::Migration
  def change
    has_one :book
    belongs_to :transaction
    belongs_to :user
    create_table :listings do |t|
      t.integer :key
      t.integer :condition
      t.decimal :price

      t.timestamps
    end
  end
end 
```

我在任何地方都找不到任何东西，所以我猜这是非常基本的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:36:27.000

关联（has_many、belongs_to 等）应该在模型中声明，而不是在迁移中。

这是从迁移开始的好读物：http: [//guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

而这个用于关联： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:40:57.337

将您的关联放入模型中

```
class Member < ActiveRecord::Base

has_many :listings, :dependent => :restrict 
has_many :transactions, :dependent => :restrict

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:33:37.060

您不必在迁移中声明关联，而是在模型中声明！

# javascript - HTML5 画布数组创建错误

> ID：13545822
> 
> 赞同：-1
> 
> 时间：2012-11-24T21:32:41.523
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

我正在使用以下代码来试用该`canvas`元素

```
 Shape = function(x,y){
        this.x = x;
        this.y = y; 
    };

    shapes = new array();

    shapes.push(new Shape(50,50,10,10));
    shapes.push(new Shape(100,100,10,10));
    shapes.push(new Shape(150,150,10,10));

    function animate(){
        context.clearRect(0,0, canvas.width(),canvas.height());
        var shapesLength = shapes.length;
        for(var i = 0; i < shapesLength; i++){
            var tmpShape = shapes[i];
            tmpShape.x++;
            context.fillRect(tmpShape.x,thmpShape.y,10,10);
        }
        context.fillStyle = 'yellow';
        context.fill();
        if(playAnimation){
            setTimeout(animate, 1)
        }
    } 
```

但是，当我在浏览器中运行它时，我收到以下错误 -

```
ReferenceError: array is not defined    

shapes = new array(); 
```

我尝试将其设为全局和局部变量，但我看不出哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:34:07.730

`array`应该大写，因为这是构造函数的名称：

```
shapes = new Array(); 
```

此外，最好使用方括号表示法来创建数组。像这样：

```
shapes = []; 
```

# jquery - 最核心的简单jquery滑块效果

> ID：13545823
> 
> 赞同：0
> 
> 时间：2012-11-24T21:32:54.143
> 
> 标签：jquery, css

* * *

**主要编辑：**

这将有助于更好地解释问题，看看[这个](http://jsfiddle.net/Z6Dgb/)，如您所见，两张幻灯片使用淡入淡出效果进行更改，如何更改此效果以实现向左滑动的效果，就像您在树探索中看到的那样在[Github](https://github.com/lockitron/selfstarter)上？

* * *

想象两个div，一个叫Master，第二个叫Slave。

```
<div id="container">
  <div id="master" style="background-color:#ABC;">1</div>
  <div id="slave" style="background-color:#CBA;">2</div>
</div> 
```

仅当按下主 div 上的按钮（已编程），成功时（ajax 调用完成并且 div 从属已更新），从属 div 上的内容才通过 ajax 更新我希望主 div 向左滑动，而从属 div 也滑动。

在第一种状态下，用户只能看到 Master div，slave 是不可见的，当按下按钮时，master 滑动到左侧，Slave 滑动到原来的 master 位置（只是一个简单的滑块）。正如我所说，我已经在 jquery 和服务器端代码（php + ajax）上编写了所有基本交互，但我不知道如何设置 css 以实现这一点，因为我使用简单的动画`$('#div').slideLeft(400);`

我不想使用任何现有的 jquery 插件或 html5 或 css3（如果可能的话），只是想保持简单，但同样，我不是很好的前端开发人员，并且弄清楚 css 来做到这一点让我发疯了。谢谢你的帮助！

**编辑** 当我说slideLeft时，我的意思是：

```
$(this).hide("slide", { direction: "left" }, 1000);
$(this).show("slide", { direction: "left" }, 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:54:41.013

通过使用 css2 “clip” 属性，添加一个额外的容器 div [使剪辑工作] 并稍微修改您的小提琴代码以依赖`animate`而不是`fadeIn`and `fadeOut`，这种效果是可能的。但是，解决方案并不像您希望的那样简单，也不像您希望的那样干净。无论如何，它有效。

HTML：

```
<div style="position:relative;width:200px;height:100px;left:100px;">
    <div style="position:absolute;clip:rect(0px,200px,100px,0px);overflow:none;width:200px;height:100px">
    <div class="table-cont" style="display: none; position:absolute; background-color:#ABC;width:100%;height:100px;"></div>
    <div class="table-coupons" style="display: none; position:absolute;top: 0px; background-color:#CBA;width:100%;height:100px;"></div>
</div>
</div> 
```

JS：

```
 $(document).ready(function() {

$('div.table-coupons').css({opacity:0,marginLeft:200});

     calltable();
        function calltable()    {
$('div.table-coupons').css('display','block');
$('div.table-cont').css('display','block');

            $('div.table-coupons').animate({opacity:0,marginLeft:200},{ duration: 300, queue: false,complete:function(){$(this).css('display', 'none')}});
            $('div.table-cont').html('HELLO World! <a href="#" class="coupon_link">Next</a>');
            $('div.table-cont').animate({opacity:1,marginLeft:0},{ duration: 300, queue: false });
            $('a.coupon_link').click(function() { next_slide(); });
        }
        function next_slide() {
$('div.table-coupons').css('display','block');
$('div.table-cont').css('display','block');

            $('div.table-cont').animate({opacity:0,marginLeft:-200},{ duration: 300, queue: false, complete:function(){$(this).css('display', 'none')}});
            $('div.table-coupons').html('HELLO again! <a href="#" class="back_link">Back</a>');
            $('div.table-coupons').animate({opacity:1,marginLeft:0},{ duration: 300, queue: false });
            $('a.back_link').click(function() { back_slide(); });            
        } 
        function back_slide() {    
            calltable();            
        }            

 }); 
```

JSFiddle：http: [//jsfiddle.net/97pcj/1/](http://jsfiddle.net/97pcj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:44:27.973

不确定您是否要向左移动，或者当您说“滑动”时，您的意思是在 slideUp() 和 slideDown() 中。如果你说的是后者

```
$(this).animate({width:'toggle'},400); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:42:21.950

# python - 将文件上传到特定文件夹

> ID：13545839
> 
> 赞同：0
> 
> 时间：2012-11-24T21:35:03.863
> 
> 标签：python, django

我的项目结构

```
untitled2
      --mysite
      --media
           --audio
           --css
           --img
           --js
      untitled2
        --media
        --templates
        --settings.py
        --urls.py 
```

# 模型.py

```
class Audio(models.Model):
    link_mp     = models.FileField(upload_to='audio/') 
```

# 设置.py

```
SITE_ROOT = os.path.dirname(os.path.realpath(__file__))
MEDIA_ROOT = os.path.join(SITE_ROOT, 'media/')

MEDIA_URL = '/media/' 
```

> 当我从管理员上传文件时，我的文件复制到 untitled2-->untitled2-->media，但我想将它复制到 utitled2-->media-->audio

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:51:21.480

你所要做的就是：

```
MEDIA_ROOT = os.path.join(os.path.dirname(SITE_ROOT), 'media/') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T22:08:35.143

Your`SITE_ROOT`是`/untitled2/untitled2/`your 所在的子文件夹`settings.py`，因此您的`media`root 是`/untitled2/untitled2/media/`并且 your`upload_to`是`/untitled2/untitled2/media/audio/`。更改您的媒体根目录以`/untitled/media`使用

# java - java显式调用super方法

> ID：13545841
> 
> 赞同：3
> 
> 时间：2012-11-24T21:35:09.400
> 
> 标签：java, inheritance

有什么理由从超类调用方法吗？

我遇到了很多`super`调用方法而不是`this`方法的地方，例如：

```
public String getCustomValue() {
    String value = (String) super.getValue(someArgHere);
    return value;
} 
```

有什么好处吗？我只看到了继承的一个主要问题：如果我`getValue`在这个类或其后代之一中`getCustomValue`重写将忽略该重写和调用`super`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:39:27.860

`super.getValue(someArgHere)`调用`getValue`超类的方法。相反，`this.getValue(someArgHere)`调用`getValue`当前类的方法（如果已定义）。如果当前类没有覆盖`getValue`，则调用超类方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T03:16:57.933

除非您重写了该方法`getValue(...)`并且您**确实确定**（您的确定性值得在代码中添加注释）您想要绕过它，否则您不应该`super`像现在这样使用它。稍后，如果您或其他人决定覆盖`getValue(...)`，他们可能希望效果也适用`getCustomValue()`。

虽然您绝对可以调用`super.myMethodOne()`from `myMethodTwo()`，但通常的情况是当您想要调用`super.myMethodOne()`from`myMethodOne()`时覆盖它。像 Ruby 这样的一些语言甚至会自动为您传递方法参数，这样您就不必重新输入它们。

这是一个例子：

```
public class A {
    public void close() {

      // do a bunch of things...
    }
}

public class B extends A {
    @Override
    public void close() {
        // close things related to the subclass B
        // and then make sure A is closed as usual...
        super.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T21:38:59.563

在方法未被覆盖的情况下，使用`super`over没有任何技术优势。`this`

但是，有人可能会说使用它更清晰，`super`而不是`this`因为您刚才提到的原因。如果您在子类中覆盖该函数，那么您将需要使用`super`; 如果你不这样做，你*可以*使用`this`. 与其玩猜谜游戏（或强迫人们检查该方法是否已被覆盖），不如*总是*`super`在你的意思时使用`super`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T21:40:26.870

> 我只看到了继承的一个主要问题：如果我`getValue`在这个类或其后代之一中`getCustomValue`覆盖将忽略该覆盖并调用超级方法。

然后不要`super`显式调用该方法，只需调用`getValue`. 如果该方法没有被覆盖，它将默认为超级方法。如果有，它将使用覆盖的方法。

我不知道在这种情况下询问“好处”是否合适——这真的取决于你到底想要完成什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T21:40:10.010

关键是设计。当我们编码时，我们按照它是什么来做的！所以即使`getValue`是扩展的，它也是完美的，因为这是你的班级应该做的。

通常，`super`用于从 中获取任何信息或数据或副作用，`super type`并根据您当前的类功能对其进行修改或改进

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T21:57:48.647

唯一的好处是，如果您的类覆盖了超类的方法，您仍然可以使用`super`.

# jquery - 更改 div Jquery 或 CSS 的名称

> ID：13545845
> 
> 赞同：0
> 
> 时间：2012-11-24T21:35:33.613
> 
> 标签：jquery, css

我的 DOM 中有这个 div

```
<div class="span4 minus65" id="divChange"> 
```

我给了它一个 id 以便我可以用 jquery 选择它

我想要做的是将 div 更改为

```
<div class="span12" id="changeBack"> 
```

例如，当屏幕尺寸低于 600 像素时（我已经设置了 id=changeback，因为我猜我需要将其恢复回来？）我正在学习 jquery，所以希望能得到一些关于如何在此处实现这一点的指示，或者有没有办法使用 CSS 媒体查询？（虽然没有我能想到的）

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:38:33.617

使用该`resize`事件来检测窗口何时调整大小，并相应地应用适当的 id。

```
$(window).resize(function(){
    if($(this).outerWidth() < 600){
        $('#divChange').attr('id',"changeBack");
    }else{
        $('#changeBack').attr('id',"divChange");
    }
}); 
```

这是一个演示：http: [//jsfiddle.net/JkypX/](http://jsfiddle.net/JkypX/)

（调整右下角的结果窗格大小以查看发生的变化）

通过维护当前 ID 并使用媒体查询指定不同的样式，可以为 CSS 目的实现等效效果：

```
#divChange{
    color:red;
}
@media all and (max-width: 600px){
    #divChange{
        color:green;
    }
} 
```

当然，这是否更适合您取决于您​​要达到的目标。

这是这种方法的演示：http: [//jsfiddle.net/JkypX/1/](http://jsfiddle.net/JkypX/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:38:43.833

像这样的东西应该工作。您应该查看 CSS 3 Media Queries，因为它们可能会帮助您在不涉及 JavaScript 的情况下完成任务。

```
$(window).resize(function(){
    if($(window).width() < 600 && $("#changeBack").length == 0){
        $("#divChange").attr("id", "changeBack");
    }
    else{
        $("#changeBack").attr("id", "divChange");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:38:41.787

您可以使用 jQuery 来更改 'id' 属性，如下所示：

```
$('#divChange').attr('id','changeBack'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T21:43:57.393

我建议使用媒体查询。删除对 j​​Query 的任何依赖。

[http://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

# jquery - 在窗口调整大小时重新计算航点元素的高度

> ID：13545847
> 
> 赞同：2
> 
> 时间：2012-11-24T21:36:18.310
> 
> 标签：jquery, jquery-plugins, jquery-waypoints

我将 jQuery Waypoints 插件与单页网站上的固定菜单结合使用。菜单由一个向上和向下箭头组成，当路点被传递时，我使用 jQuery 将向上和向下箭头中的链接更改为下一页或上一页。当按下按钮时，我使用 jQuery 滚动滚动到该页面。它工作得很好，我不确定我以前是否见过以这种方式使用的 jQuery 航路点。感谢您的出色插件！

但是，我正试图让我的网站完全响应，并且我有一个问题，我认为是刷新航点信息。调整窗口大小时，页面高度（在定义航点时计算）不会改变。这会导致滚动距离不正确。

我是一名学生，我的代码有点乱，可能效率有点低，但我的网站的测试版可以在这里看到：http: [//beta.kyleboulay.com](http://beta.kyleboulay.com)

再次说明一下：当您在页面首次加载后调整窗口大小时会出现问题，距离没有重新正确计算。

**编辑：**我似乎通过将路点的偏移值更改为 50% 来解决问题。但是，知道如何在窗口调整大小时触发航点的重新定义仍然很棒。

任何帮助将不胜感激！谢谢。

以下是我的代码示例。

我这样定义我的航点：

```
//first get all the pages // this returns my six pages

sections = $(".pages");

//then define what happens as each waypoint is passed, depending on the direction**

$(sections[5]).waypoint({

    handler: function(event, direction){

                //console.log('5');
                distanceDown = $(sections[5]).offset().top;
                distanceUp =  $(sections[4]).offset().top;

                if(direction==='up'){

                    //console.log('5 up');
                    distanceDown = $(sections[5]).offset().top;
                    distanceUp =  $(sections[3]).offset().top;

                }

    },

    offset: '50%'

});

//then when the down or up button is pressed on the menu, i do the following:

$('#icon-up').click(function(){

$('html, body').animate({ scrollTop: distanceUp }, { duration: slideSpeed, easing: 'swing' });

});//end inline 
```

# matlab - 积分计算

> ID：13545849
> 
> 赞同：3
> 
> 时间：2012-11-24T21:36:32.680
> 
> 标签：matlab, integral

我想执行以下操作：

![在此处输入图像描述](../Images/b5b254b5da39b2f6491869da88d90215.png)

在哪里

![在此处输入图像描述](../Images/10f419348c78a330d12c56b131be0582.png)

后图中的参数可以通过以下方式获得：

```
%% Inizialization
time = 614.4; % Analysis Time
Uhub = 11;
HubHt = 90;
alpha = 0.14;
TI = 'A'; % Turbulent Intensity (A,B,C as in the IEC or Specific value)
N1 = 4096;
N2 = 32;
N3 = 32;

N = N1*N2*N3; % Total Number of Point
t = 0:(time/(N1-1)):time; % Sampled Time Vector

L1 = Uhub*time; % Box length along X
L2 = 150; % Box length along Y
L3 = 220; % Box length along Z

dx = L1/N1; % Grid Resolution along X-axis
dy = L2/N2; % Grid Resolution along Y-axis
dz = L3/N3; % Grid Resolution along Z-axis

V = L1*L2*L3; % Analysis Box Volume

gamma = 3.9; % Turbulent Eddies Distorsion Factor
c = 1.476;
b = 5.6;

if HubHt < 60
    lambda1 = 0.7*HubHt;
else
    lambda1 = 42;
end
L = 0.8*lambda1;

if isequal(TI,'A')
    Iref = 0.16;
    sigma1 = Iref*(0.75*Uhub + b);
elseif isequal(TI,'B')
    Iref = 0.14;
    sigma1 = Iref*(0.75*Uhub + b);
elseif isequal(TI,'C')
    Iref = 0.12;
    sigma1 = Iref*(0.75*Uhub + b);
else
    sigma1 = str2num(TI)*Uhub/100;
end

sigma_iso = 0.55*sigma1;
sigma2 = 0.7*sigma1;
sigma3 = 0.5*sigma1;

%% Wave number vectors
ik1 = cat(2,(-N1/2:-1/2),(1/2:N1/2));
ik2 = -N2/2:N2/2-1;
ik3 = -N3/2:N3/2-1;

[x y z] = ndgrid(ik1,ik2,ik3);

k1 = reshape((2*pi*L/L1)*x,N1*N2*N3,1);
k2 = reshape((2*pi*L/L2)*y,N1*N2*N3,1);
k3 = reshape((2*pi*L/L3)*z,N1*N2*N3,1);

k = sqrt(k1.^2 + k2.^2 + k3.^2);

%% Calculation of beta by means of the Energy Spectrum Integration
E = @(k) (1.453*k.^4)./((1 + k.^2).^(17/6));

%//Independent integration on segments 
Local_int = arrayfun(@(i)quad(E,i-1,i), 2:(N1*N2*N3));      
%//integral additivity + cumulative removal of queues
E_int = 1.5 - [0 fliplr(cumsum(fliplr(Local_int)))]; %//To remove queues

E_int = reshape(E_int,N,1);
S = k.*sqrt(E_int);
beta = (c*gamma)./S;

%% Help Parameters
k30 = k3 + beta.*k1;

k0 = sqrt(k1.^2 + k2.^2 + k30.^2);

C1 = (beta.*k1.^2.*(k1.^2 + k2.^2 - k3.*k30))./(k.^2.*(k1.^2 + k2.^2));
C2 = (k2.*k0.^2./((k1.^2 + k2.^2).^(3/2))).*atan2((beta.*k1.*sqrt(k1.^2 + k2.^2)),(k0.^2 - k30.*k1.*beta));

xhsi1 = C1 - (k2./k1).*C2;
xhsi2 = (k2./k1).*C1 + C2;

E_k0 = (1.453*k0.^4)./((1 + k0.^2).^(17/6)); 
```

例如，输入

```
phi_33 = @(k2,k3) (E_k0./(4*pi.*k.^4)).*((k1.^2 + k2.^2));

F_33 = arrayfun(@(i) dblquad(phi_33,k3(i),k3(i+1),k2(i),k2(i+1)), 1:((N1*N2*N3)-1)); 
```

Matlab 检索到以下错误消息：

```
Error using  + 
Matrix dimensions must agree.

Error in @(k2,k3)(E_k0./(4*pi.*k.^4)).*((k1.^2+k2.^2)) 
```

你知道如何克服这个问题吗？

我真的很期待收到您的来信。

最好的问候， FPE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:06:44.340

错误很容易解释：

首先你定义`E_k0`然后你尝试调用`Ek0`.

```
phi_11 = @(k1,k2,k3) (E_k0./4*pi.*kabs.^4).*(k0abs.^2 - k1.^2 - 2*k1.*k03.*xhsi1 + (k1.^2 +  k2.^2).*xhsi1.^2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:52:04.000

我是这样解决的：

1.  为每个 PHI 元素编写一个函数，例如 (for PHI11)

    函数 phi_11 = phi_11_new(k1,k2,k3,beta,i) k = sqrt(k1(i).^2 + k2.^2 + k3.^2); k30 = k3 + beta(i).*k1(i); k0 = sqrt(k1(i).^2 + k2.^2 + k30.^2); E_k0 = 1.453.*k0.^4./((1 + k0.^2).^(17/6)); C1 = (beta(i) *.k1(i).^2)。*(k1(i).^2 + k2.^2 - *k3.k30)./(k.^2.* (k1(i).^2 + k2.^2)); C2 = k2.*k0.^2./((k1(i).^2 + k2.^2).^(3/2)).*atan2((beta(i).*k1(i). *sqrt(k1(i).^2 + k2.^2)),(k0.^2 - k30.*k1(i).*beta(i))); xhsi1 = C1 - k2./k1(i).*C2; xhsi1_q = xhsi1.^2; phi_11 = E_k0./(4.*pi.k0.^4 *)。*(k0.^2 - k1(i).^2 - 2.*k1(i).*k30.*xhsi1 + (k1(i).^2 + k2.^2).*xhsi1_q); 结尾

2.  我在主代码中回忆这个函数如下

    对于 l = 1:numel(k1) phi11 = @(k2,k3) phi_11(k1,k2,k3,l) F11(l) = integral2(phi,-1000,1000,-1000,1000); 结尾

似乎它有效。

# java - 混合纹理显示得很好，但普通的彩色形状却不行

> ID：13545852
> 
> 赞同：2
> 
> 时间：2012-11-24T21:37:13.380
> 
> 标签：java, opengl, lwjgl

出于某种原因，启用 alpha 混合会导致我无法绘制普通的彩色形状。绘制所有内容的顺序没有区别。即使唯一被绘制的是彩色形状，它仍然不会显示。

禁用 alpha 混合可以解决此问题，但会禁用 alpha 混合（显然）。这让我相信问题在于我如何初始化 openGL。

纹理对象包含在被注释掉的世界中。评论“world.run();” out 没有区别，只有禁用 alpha 混合。

```
public class Core {

int width=800, height=600;

//World world;

public void Start(){

    try {
        Display.setDisplayMode(new DisplayMode(width,height));
        Display.create();
    } catch (LWJGLException e) {
        e.printStackTrace();
        System.exit(0);
    }

    initGL();
    System.out.println("OpenGL version: " + GL11.glGetString(GL11.GL_VERSION));

    boolean Close = Display.isCloseRequested();

    //world = new World(width, height);

    while(!Close){
        GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT);

        if(Keyboard.isKeyDown(Keyboard.KEY_ESCAPE) || Display.isCloseRequested())
            Close = true;

        //world.run();
        GL11.glColor4d(1, 0, 0, 1);
        GL11.glBegin(GL11.GL_QUADS);
        GL11.glVertex2d(0, 0);
        GL11.glVertex2d(0, 50);
        GL11.glVertex2d(50, 50);
        GL11.glVertex2d(50, 0);
        GL11.glEnd();

        Display.update();
        //Display.sync(60);
    }

}

public void initGL(){
    GL11.glEnable(GL11.GL_TEXTURE_2D);               

    GL11.glClearColor(1.0f, 1.0f, 1.0f, 0.0f);          

        // enable alpha blending
        GL11.glEnable(GL11.GL_BLEND);
        GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);

        GL11.glViewport(0,0,width,height);

    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GL11.glOrtho(0, width, height, 0, 1, -1);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
}

public static void main(String args[]){
    Core m = new Core();
    m.Start();
} 
```

}

这是一个 2D 应用程序，我试图在黑白世界地图的纹理后面绘制元球。

普通的彩色形状是指以下内容，

```
GL11.glColor4d(1, 0, 0, 1);
GL11.glBegin(GL11.GL_QUADS);
    GL11.glVertex2d(0, 0);
    GL11.glVertex2d(0, 50);
    GL11.glVertex2d(50, 50);
    GL11.glVertex2d(50, 0);
GL11.glEnd(); 
```

即使单独绘制，只要启用了 alpha blending，它就不会显示出来。

更新：*世界*的构造函数正在加载（但不绘制）纹理。删除那部分代码会让彩色方块出现。我推断只要加载纹理就会出现问题，无论它是否显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T23:27:33.763

你已经进入`glEnable(GL_TEXTURE_2D)`了`initGL`，但我没有看到它在任何地方被禁用。

你知道如果你想绘制一个没有纹理的对象，你必须禁用纹理，对吧？

# php - 这是可能的？输入文本 2 处文本区域

> ID：13545853
> 
> 赞同：-2
> 
> 时间：2012-11-24T21:37:43.330
> 
> 标签：php, javascript, html, css

这是可能的？在输入文本中写入文本时可以发送（2 处文本区域）并在浏览器上打开 2 个选项卡。（Page1.html 和 Page2.html）

Page1.html

```
<script type="text/javascript">
    function sendtext(){
       /*Input TimeLineText to textarea in page 1 on browser*/
       document.textarea.textarea_in_page1=input.getElementById('TimeLineText');
       /*Input TimeLineText to textarea in page 2 on browser*/
       document.textarea.textarea_in_page2=input.getElementById('TimeLineText');
    }
</script>

<input type="text" id="TimeLineText" 
name="text" value="TimeLineText" onkeyup="sendtext();" />
<textarea id="textarea_in_page1"> TimeLineText </textarea> 
```

Page2.html

```
<textarea id="textarea_in_page2"> TimeLineText </textarea> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:42:41.123

如果您使用的是 HTML5，这是可能的。查看本地存储。它在所有现代浏览器中实现。

它在同一域内的所有选项卡中永久存储字符串。

[http://dev.w3.org/html5/webstorage/](http://dev.w3.org/html5/webstorage/)

# java - Java迭代项目问题

> ID：13545854
> 
> 赞同：0
> 
> 时间：2012-11-24T21:37:47.657
> 
> 标签：java, loops, for-loop, iteration

我需要为作业做这个，我似乎无法让它工作......它应该做的是输出这个：

```
**********
*********
********
*******
******
*****
****
***
**
* 
```

这是我的代码：

```
public class stars {

    public static void main(String args[]){

        for(int l = 1; l<= 10; l++){
            System.out.println();
            for(int i = 10; i>= 1; i--){
                System.out.print("*");
            }
        }

    }

} 
```

这似乎输出了这个：

```
**********
**********
**********
**********
**********
**********
**********
**********
**********
********** 
```

我希望有人能帮助我！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:39:00.210

```
for(int l = 1; l<= 10; l++){
    System.out.println();
    for(int i = 10; i>= 1; i--){
        System.out.print("*");
    }
} 
```

您需要更改`inner loop`from `i >= 1`to的终止条件`i >= l`，否则它将`10 times`在每次迭代中运行。

```
for(int l = 1; l<= 10; l++){
    System.out.println();
    for(int i = 10; i>= l; i--){
        System.out.print("*");
    }
} 
```

并且请不要将变量命名为： -`l`看起来像`One`，类似地，`O`看起来像`Zero`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:46:34.123

正如我在上面的评论中所说：

```
for(int l = 1; l<= 10; l++){
    System.out.println();
    for(int i = l + 1; i <= 10; i++){
        System.out.print("*");
    }
} 
```

# java - 在已创建的文件中写入数据

> ID：13545855
> 
> 赞同：0
> 
> 时间：2012-11-24T21:37:52.770
> 
> 标签：java, file, io, file-handling

> **可能重复：**
> [如何将文本附加到 Java 中的现有文件](https://stackoverflow.com/questions/1625234/how-to-append-text-to-an-existing-file-in-java)

我已经在 C:\myfile.txt 中创建了一个文件，其中包含一些数据。现在当我尝试使用 File files = new File("C:\myfile.txt"); , 它覆盖原始数据并在其中插入新数据.. 是否有避免覆盖旧数据的机制？...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:40:07.867

使用该方法`new FileOutputStream(File,true)`附加到现有文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T21:40:39.733

您可以在文件编写器类之一中使用附加模式：

```
FileWriter writer = new FileWriter("myfile.txt", true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T21:43:22.527

在构造函数中提供`true`附加文件，如上面所说的更详细的控制，使用`RandomAccessFile`

# php - PHP变量数组+循环

> ID：13545857
> 
> 赞同：1
> 
> 时间：2012-11-24T21:37:58.760
> 
> 标签：php, arrays, api, loops

首先我应该说我不是 PHP 人，所以如果有人可以提供帮助，我会尽我所能理解任何建议。

我有以下代码通过 PHP 包装器访问 API 并输出一些数据：

```
$idMovie=11;
$pelinfo = $tmdb_V3->movieDetail($idMovie);

<h1><?php echo $pelinfo[original_title]; ?></h1>
<h2><?php echo $pelinfo[release_date]; ?></h2>
<img src="<?php echo $pelinfo[poster_path]; ?>">
<p><?php echo $pelinfo[overview]; ?></p> 
```

这很好用，它显示了一项的数据。我需要做的是显示更多项目的数据。到目前为止，我只是重复了该块并更改了 $idMovie 变量-但这当然不是这样做的方法。

我想我需要这样做：

1.  设置一个数组来保存每个变量，所以 $idMovie[12,34,56,78]

2.  创建一个循环来遍历每个变量，并使用我上面的代码块输出数据。

如果有人能指出我正确的方向，那将是最有帮助的。

谢谢戴夫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T21:42:59.720

PHP 中有一个非常有用的结构 - [**foreach**](http://php.net/manual/en/control-structures.foreach.php)：

```
<?php foreach($idMovies as $idMovie): 
    $pelinfo = $tmdb_V3->movieDetail($idMovie); ?>

    <h1><?php echo $pelinfo['original_title']; ?></h1>
    <h2><?php echo $pelinfo['release_date']; ?></h2>
    <img src="<?php echo $pelinfo['poster_path']; ?>">
    <p><?php echo $pelinfo['overview']; ?></p>

<?php endforeach; ?> 
```

在这里，我使用了所谓的“替代语法”，当 PHP 片段包含在 HTML 模板中时很有用。

然而，有不止一种方法可以遍历这个数组。例如：

```
<?php
    $idMovies = array(11, 22, 33, 42);

    $pelHTMLs = array_map(function($id) use ($tmdv_V3) { 
       $pelInfo = $tmdv_V3->movieDetail($id);
       // perhaps you should check the result here, no?

       return <<<HTML
    <h1>$pelInfo[original_title]</h1>
    <h2>$pelInfo[release_date]</h2>
    <img src="$pelInfo[poster_path]" />
    <p>$pelInfo[overview]</p>
HTML;
    }, $idMovies);

    echo implode("\n", $pelHTMLs);
?> 
```

在这里，我使用[array_map](http://php.net/array_map)函数创建了一个数组`$pelHTMLs`，其中的每个元素都是电影数据的一些 HTML 表示，与从`$idMovies`数组中获取的 id 相关。然后所有这些部分都被“加入”到一个带有“内爆”功能的单个字符串中 - 并回显出来。

这种形式在 PHP 5.3+ 环境中经常使用（当您可以向`array_map`类似的列表理解函数提供匿名函数时）。但它实际上也可以在 PHP 5.2 中完成 - 您只需将这部分提取到单独的函数（或类方法）中，然后将其名称（或具有两个参数的数组 - 类名和方法名）作为“回调”参数.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:42:23.283

尝试使用

```
while($data = $pelinfo){<h1><?php echo $pelinfo[original_title]; ?></h1>
<h2><?php echo $pelinfo[release_date]; ?></h2>
<img src="<?php echo $pelinfo[poster_path]; ?>">
<p><?php echo $pelinfo[overview]; ?></p>} 
```

这应该经历所有这些。从这里你应该能够解决你的第一个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T21:44:59.763

它就像你的伪代码一样简单。这里作为一个实现：

```
<?php
$ids = array('12','34','56','78') //array of movie ids
$foreach($ids as $id) : //I'm a huge fan of foreach vs for
  $pelinfo = $tmdb_V3->movieDetail($id);
?>
<h1><?php echo $pelinfo[original_title]; ?></h1>
<h2><?php echo $pelinfo[release_date]; ?></h2>
<img src="<?php echo $pelinfo[poster_path]; ?>">
<p><?php echo $pelinfo[overview]; ?></p>
<?php endforeach; ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T21:46:47.337

```
$idMovie = array(12,34,56,78);

foreach($idMovie as $id){
   $pelinfo = $tmdb_V3->movieDetail($id);

   echo "<h1> $pelinfo[original_title] </h1>
         <h2> $pelinfo[release_date] </h2>
         <img src='$pelinfo[poster_path]'>
         <p>$pelinfo[overview]</p>";

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T21:43:03.853

```
$idMovieArr=array(11,22,35,...);

foreach ($idMovieArr as $key) {
$idMovie=$idMovieArr[$key];
$pelinfo = $tmdb_V3->movieDetail($idMovie);

<h1><?php echo $pelinfo[original_title]; ?></h1>
<h2><?php echo $pelinfo[release_date]; ?></h2>
<img src="<?php echo $pelinfo[poster_path]; ?>">
<p><?php echo $pelinfo[overview]; ?></p>
<?php } ?> 
```

像这样的东西

# dart - Getter/Setter 函数参考

> ID：13545859
> 
> 赞同：8
> 
> 时间：2012-11-24T21:38:19.047
> 
> 标签：dart

我的数据模型中定义了以下变量和 getter / setter：

```
class Actor {
    int _x;
    int get x => _x;
    set x(int value) => _x = value;
} 
```

还有一个需要getter / setter函数指针的泛型类

```
class PropertyItem {
   var getterFunction;
   var setterFunction;
   PropertyItem(this.getterFunction, this.setterFunction);
} 
```

如何将 X 的 getter / setter 函数的引用传递给 PropertyItem 类？

```
// Something like this
var item = new PropertyItem(x.getter, x.setter); 
```

编辑：更新了一个更明确的问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T15:24:40.503

简而言之，你没有。getter 和 setter 是不可提取的——它们与仅仅拥有一个字段没有区别（当然，如果你不做副作用的话）。

在您的示例中，您可以这样做：

```
class Actor {
  int x;
} 
```

并获得完全相同的效果。

你想要的是，对于一些演员“演员”，自己制作功能：

```
var item = new PropertyItem(() => actor.x, (v) { actor.x = v; }); 
```

This [proposal about generalized tear offs](https://github.com/gbracha/generalizedTearOffs/blob/master/proposal.md#cons) is [approved](http://news.dartlang.org/2015/06/null-aware-operators-and-generalized.html) and will probably implemented soon and allows to closurize getters and setters like:

```
var item = new PropertyItem(actor#x, actor#x=); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T22:25:12.877

在 Dart 中，如下：

```
class Foo {
  int _offsetX;
  int get offsetX => _offsetX;
  set offsetX(int ox) => _offsetX = ox;
} 
```

相当于：

```
class Foo {
  int offsetX;
} 
```

# iphone - Iphone：定制的 UIView 是否需要 dealloc

> ID：13545861
> 
> 赞同：0
> 
> 时间：2012-11-24T21:38:30.537
> 
> 标签：iphone, release, nib, dealloc

我有一个定制的 uiview 类，并且我有一个 dealloc，其中包含其他发布调用。

在这个自定义 uiview 中，我有 3 个控件出口：按钮、textview 等。当自定义 uiview 解除分配时，我收到此错误：对象 0x88782c0 错误：未分配指针被释放。

在代码内部，我根本没有发布任何这些出口。当我删除了发布调用的那 3 个出口时，错误就消失了。我是否需要取消分配这些网点。

```
[[[[NSBundle mainBundle] loadNibNamed:@"ParanoidView" owner:self options:nil] objectAtIndex:0] autorelease];

    [self.view setFrame:CGRectMake(0.0f, 0.0f, frame.size.width, frame.size.height)];

    [self addSubview:self.view]; 
```

上面的代码被添加到 initWithFrame 调用中以加载 nib 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:11:07.393

您的代码有很多问题。

```
[[[[NSBundle mainBundle] loadNibNamed:@"ParanoidView" owner:self options:nil] objectAtIndex:0] autorelease]; 
```

你不能释放或自动释放你没有保留的东西。时期。

# android - 如何在 Canvas 上获取文本输入？

> ID：13545865
> 
> 赞同：9
> 
> 时间：2012-11-24T21:38:47.370
> 
> 标签：android, input, android-edittext, android-canvas

我是 Android 世界的新手，我有一个非常烦人的问题。在我的程序中，我使用 Android Canvas。我想添加一个 EditText 元素或类似的元素来获取用户文本输入。你能帮我找到解决这个问题的方法吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T00:17:27.207

最初，您不能放置任何编辑文本或按钮susig 画布。相反，您必须绘制它。因此，创建一个自定义布局并使用画布绘制该布局

试试这个，它可能对你有帮助。在`onDraw(..)`

```
 LinearLayout lL = new LinearLayout(context);

   EditText editTextView = new EditText(context); 

   editTextView.setVisibility(View.VISIBLE);
   lL.addView(editTextView);

    lL.measure(canvas.getWidth(), canvas.getHeight());
    lL.layout(0, 0, canvas.getWidth(), canvas.getHeight());

    // placing the edit text at specific co-ordinates:
    //canvas.translate(0, 0);
    layout.draw(canvas); 
```

看看这个另一个例子： [点击这里](http://www.kellbot.com/2009/06/android-hello-circle/)

它提供了另一种添加视图的方法

# c# - 使用查询字符串打开 html 文件

> ID：13545871
> 
> 赞同：3
> 
> 时间：2012-11-24T21:39:11.180
> 
> 标签：c#, html, wpf, process, query-string

是否可以使用查询字符串加载本地 HTML 文件？我正在使用 Process.Start，但这失败了，因为附加`?querystring=test`到文件名的末尾会使其搜索。

```
Process.Start("page.html?querystring=test") 
```

上面的代码导致 FileNotFound 异常。我尝试使用 ProcessStartInfo 并将查询字符串作为参数传递，但这只是加载了普通页面。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:30:09.483

这是不可能的，因为查询字符串是 HTTP 协议的一部分，因此它们仅在从 Web 服务器提供文件时才有效。只需从文件系统中读取本地 HTML 文件。

# vb.net - 单击保存按钮时如何验证多个输入

> ID：13545873
> 
> 赞同：1
> 
> 时间：2012-11-24T21:39:25.497
> 
> 标签：vb.net

如果有人可以分析以下代码并帮助我，我会更高兴。这只是验证的第一个条件，但即使 staffId 不正确，也可以保存数据。

```
Try
    If rbnMale.Checked = True Then
        Sex = "M"
    Else
        Sex = "F"
    End If
    photo = "k"
    If txtStaffID.Text.Length < 6 Or txtStaffID.Text.Length > 6 Then
        lblStError.Text = "Please StaffID is not a six-digit integer"
        lblErrorMsges.Text = "At least one data validation error occured on this form. Please see the specific error messages."
        If txtName.Text.Length > 25 Then
            lblNameErr.Text = " Name should not exceed 25 characters"
            lblErrorMsges.Text = "At least one data validation error occured on this form. Please see the specific error messages."
                Else
        qry = "Insert into StaffDetails.Staff(StaffID,EmployeeName,SSN,Day,Month,Year,Sex,Qualifications,Rank,Responsibility,ApDay,ApMonth,ApYear,RegNumber,Phone,Email,Status,Photo)values(@StaffID,@EmployeeName,@SSN,@Day,@Month,@Year,@Sex,@Qualifications,@Rank,@Responsibility,@ApDay,@ApMonth,@ApYear,@RegNumber,@Phone,@Email,@Status,@Photo)"
        cmd = New SqlCommand(qry, cn)
        cmd.Parameters.Add(New SqlParameter("@StaffID", Val(txtStaffID.Text)))
        cmd.Parameters.Add(New SqlParameter("@EmployeeName", txtName.Text))
        cmd.Parameters.Add(New SqlParameter("@SSN", txtSsNumber.Text))
        cmd.Parameters.Add(New SqlParameter("@Day", cboDay.Text))
        cmd.Parameters.Add(New SqlParameter("@Month", cboMonth.Text))
        cmd.Parameters.Add(New SqlParameter("@Year", txtYear.Text))
        cmd.Parameters.Add(New SqlParameter("@Sex", Sex))
        cmd.Parameters.Add(New SqlParameter("@Qualifications", txtQualifications.Text))
        cmd.Parameters.Add(New SqlParameter("@Rank", txtRank.Text))
        cmd.Parameters.Add(New SqlParameter("@Responsibility", txtRespons.Text))
        cmd.Parameters.Add(New SqlParameter("@ApDay", cboApDay.Text))
        cmd.Parameters.Add(New SqlParameter("@ApMonth", cboApMonth.Text))
        cmd.Parameters.Add(New SqlParameter("@ApYear", txtApYear.Text))
        cmd.Parameters.Add(New SqlParameter("@RegNumber", txtRegdNum.Text))
        cmd.Parameters.Add(New SqlParameter("@Phone", txtPhone.Text))
        cmd.Parameters.Add(New SqlParameter("@Email", txtEmail.Text))
        cmd.Parameters.Add(New SqlParameter("@Status", cboStatus.Text))
        cmd.Parameters.Add(New SqlParameter("@Photo", img))
        cmd.ExecuteNonQuery()
        MessageBox.Show("Record successfully saved", "Saved", MessageBoxButtons.OK, MessageBoxIcon.Information)
        btnSave.Enabled = False
    End If
End If
    Showgrid()
Catch ex As Exception
    MessageBox.Show(ex.Message)
End Try 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:49:50.207

问题是你有一个嵌套的 If 语句，所以它仍然会检查第二个条件，如果它通过仍然保存你的记录。我会用一个布尔标志做这样的事情来指示错误。

像这样的东西：

```
Dim bError As Boolean
Try
    If rbnMale.Checked = True Then
        Sex = "M"
    Else
        Sex = "F"
    End If
    photo = "k"
    If txtStaffID.Text.Length < 6 Or txtStaffID.Text.Length > 6 Then
        lblStError.Text = "Please StaffID is not a six-digit integer"
        lblErrorMsges.Text = "At least one data validation error occured on this form. Please see the specific error messages."
        bError = True
    End If

    If txtName.Text.Length > 25 Then
        lblNameErr.Text = " Name should not exceed 25 characters"
        lblErrorMsges.Text = "At least one data validation error occured on this form. Please see the specific error messages."
        bError = True
    End If

    If Not bError Then
        qry = "Insert into StaffDetails.Staff(StaffID,EmployeeName,SSN,Day,Month,Year,Sex,Qualifications,Rank,Responsibility,ApDay,ApMonth,ApYear,RegNumber,Phone,Email,Status,Photo)values(@StaffID,@EmployeeName,@SSN,@Day,@Month,@Year,@Sex,@Qualifications,@Rank,@Responsibility,@ApDay,@ApMonth,@ApYear,@RegNumber,@Phone,@Email,@Status,@Photo)"
        cmd = New SqlCommand(qry, cn)
        cmd.Parameters.Add(New SqlParameter("@StaffID", Val(txtStaffID.Text)))
        cmd.Parameters.Add(New SqlParameter("@EmployeeName", txtName.Text))
        cmd.Parameters.Add(New SqlParameter("@SSN", txtSsNumber.Text))
        cmd.Parameters.Add(New SqlParameter("@Day", cboDay.Text))
        cmd.Parameters.Add(New SqlParameter("@Month", cboMonth.Text))
        cmd.Parameters.Add(New SqlParameter("@Year", txtYear.Text))
        cmd.Parameters.Add(New SqlParameter("@Sex", Sex))
        cmd.Parameters.Add(New SqlParameter("@Qualifications", txtQualifications.Text))
        cmd.Parameters.Add(New SqlParameter("@Rank", txtRank.Text))
        cmd.Parameters.Add(New SqlParameter("@Responsibility", txtRespons.Text))
        cmd.Parameters.Add(New SqlParameter("@ApDay", cboApDay.Text))
        cmd.Parameters.Add(New SqlParameter("@ApMonth", cboApMonth.Text))
        cmd.Parameters.Add(New SqlParameter("@ApYear", txtApYear.Text))
        cmd.Parameters.Add(New SqlParameter("@RegNumber", txtRegdNum.Text))
        cmd.Parameters.Add(New SqlParameter("@Phone", txtPhone.Text))
        cmd.Parameters.Add(New SqlParameter("@Email", txtEmail.Text))
        cmd.Parameters.Add(New SqlParameter("@Status", cboStatus.Text))
        cmd.Parameters.Add(New SqlParameter("@Photo", img))
        cmd.ExecuteNonQuery()
        MessageBox.Show("Record successfully saved", "Saved", MessageBoxButtons.OK, MessageBoxIcon.Information)
        btnSave.Enabled = False
    End If
    Showgrid()
Catch ex As Exception
    MessageBox.Show(ex.Message)
End Try 
```

# shared-libraries - 从共享库（ubuntu）中提取导出的函数

> ID：13545877
> 
> 赞同：2
> 
> 时间：2012-11-24T21:39:47.340
> 
> 标签：shared-libraries

标题已经描述了我的问题。
我找到了这篇[文章](https://stackoverflow.com/questions/2274617/how-to-list-exported-functions-in-a-shared-lib-on-ubuntu "stackoverflow.com")，但它并没有完全回答我的问题。
在它的帮助下，我从nm得到了这个输出......

```
$nm -C -g -D ./libLoggingHandler.so 

000000cc A _DYNAMIC
...
000042e0 T write_str(char*, char const*, int*)
00005a78 T RingBuffer::WriteUnlock()
...
00005918 T TraceLines::GetItemSize()
...
         U SharedMemory::attach(int, void const*, int)
...
00003810 T TraceProfile::FindLineNr(int, int)
...
00002d40 T LoggingHandler::getLogLevel()
...
         U SharedResource::getSharedResourceKey(char const*, int)
... 
```

哪些是导出的函数？我已经在这篇[文章](https://stackoverflow.com/questions/4514745/how-do-i-view-the-list-of-functions-a-linux-shared-library-is-exporting "stackoverflow.com")中找到了一个提示，“T”表示它正在被导出。[但是，如果我在这里](http://linux.about.com/library/cmd/blcmdl1_nm.htm "http://linux.about.com")查看 nm 手册，它只会
显示 T - 该符号在文本（代码）部分中。
我的问题是：此输出是否为我提供了哪些函数是导出函数（或变量）的信息？
如果没有，我如何得到它？

问候，平谷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:00:47.667

作为附录，通常该 .so 文件只是指向真实文件的指针/链接，例如：

foo.so -> foo.so.1.5.1

确保它指向您认为它应该指向/链接的版本。安装可能会出错，这是一个很好的完整性检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:08:40.240

我尝试使用 IDA 自己检查它，您可以在其中看到所有导出的函数和变量。似乎如果 nm 输出行标有“T”或“B”，则它是一个导出函数。
不确定这是否适用于每个 .so 文件，但只要没有其他人有更好的解决方案......
如果我错了，请纠正我。

问候平谷

# sql-server - 使用 SQL UPDATE 语句将数据从一个表复制到另一个表

> ID：13545878
> 
> 赞同：7
> 
> 时间：2012-11-24T21:39:58.170
> 
> 标签：sql-server, sql-server-2008, sql-update

```
UPDATE table2 
SET table2.col1 = table1.col1, 
table2.col2 = table1.col2,
    table2.col3 = table2.col3,
...
FROM table1, table2 
WHERE table1.memberid = table2.memberid 
```

请帮助我了解当有 9-10 行时如何实现 SET 子句，并且使用公共列名 SCRIPT_ID 以便将来可以再次使用脚本来更新同一个表。

这是表中的一个片段：

```
____     _____________   __________________  _____     _     _____
 999     EMS02075SVC     Host Controller     15099     3     60000 
1000     EMS02075SVC     DSM Controller      15099     1     60000 
1001     EMS02075WEB1    Application Server   4447     1     60000 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T15:42:59.160

如果您的源表和目标表相同并且具有相同的 memberids（我假设它们是主键），这将起作用：

```
UPDATE destination 

SET destination.col1 = source.col1, 
destination.col2 = source.col2,
destination.col3 = source.col3,
...
FROM table1 AS source
JOIN table2 AS destination ON source.memberid = destination.memberid 
```

如果您的源表和目标表相同，但您的源有目标缺少的新行（记录），则您需要一个选择性`INSERT`语句：

```
INSERT INTO table2 (
    col1,
    col2,
    col3,
    ...
) SELECT col1, col2, col3, ... 
FROM table1 
WHERE NOT EXISTS (
    SELECT memberid 
    FROM table2 
    WHERE table2.memberid = table1.memberid) 
```

以上将只插入尚未在目标表中的记录。由于您使用的是 SQL Server 2008，因此您可以尝试使用`MERGE`应该处理这两种情况的语句以及您在一组代码中编写的任何其他内容。

# c - 指针内存中的最后一个值不正确

> ID：13545879
> 
> 赞同：1
> 
> 时间：2012-11-24T21:40:02.920
> 
> 标签：c, pointers, loops, fwrite

该程序很长（这里是完整版：[http://pastebin.com/cvg1eSJ1](http://pastebin.com/cvg1eSJ1)），（sample.txt 看起来像这样： http: [//pastebin.com/hWihPpSj](http://pastebin.com/hWihPpSj)，它是 INPUT 文件，另一个命令行参数是输出文件。）但我发布了处理“第二个指针列表”的部分。基本上我有一个包含 47 个左右项目的列表，我需要将某个范围之外的项目添加到第二个列表中。这是我第一次保存值的地方。我使用“tempAddress”只是为了清理一些代码。我只是取当前地址的值，检查它，如果匹配，则将其添加到第二个阅读列表中。

```
 for (i; i < numElements; i++) {
        tempAddress = firstReadingList++;
        if ((double) *tempAddress > plusOutlier || (double) *tempAddress < minusOutlier) {
            *secondReadingList++ = *tempAddress;

            numOutliers++;
            printf("%d ", *tempAddress);
        }
    } 
```

稍后，我必须在另一个函数中将此阅读列表写入文件。我打印出这些值，只有最后一个值不正确。我不知道为什么。这是我将它们写入文件的代码（在这种情况下 tempAddress 是一个新变量）

```
for (i; i < numElements; i++) {
    tempAddress = (outlierList + i);
    printf("%d ", *tempAddress);
    fprintf(out, "%d ", *tempAddress);
} 
```

第一个函数中的输出如下：

752 843 840 848 752 850 753（这是正确的）

第二个代码片段输出这个

752 843 840 848 752 850 577（577不正确）

我做错什么了吗？我对指针还比较陌生。我不会在函数之间的任何位置修改 secondListPointer。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:14:48.577

Before you call `get_outliers`, you allocate memory for **one** `int`:

```
int *outlierList = malloc(sizeof *outlierList);

int numOutliers = get_outliers(dataPointer, numReadings, outlierList, average, stdDev, STDDEV_SCALAR); 
```

but there may be more than one outlier. Then you write outside the allocated memory, invoking undefined behaviour, with unforeseeable consequences. Here, just some data was corrupted.

# css - 浮动 div 正在扩展容器的高度，但如果我将百分比高度应用于内部 div 元素，则高度未定义

> ID：13545880
> 
> 赞同：0
> 
> 时间：2012-11-24T21:40:03.893
> 
> 标签：css, html

我有一个容器 div 它包含多个浮动 div 我希望容器内的特定边框 div 具有容器本身的 90% 高度但是它似乎没有检测到容器的高度，即使我已经应用 clear:both在容器的末尾，也溢出：隐藏到容器 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:54:01.350

您可以使用此`js`脚本：

```
<script type="text/javascript">
    $(document).ready(function() {
        setHeight();
        $(window).resize(function() {
           $('.seperator2').css({ height: '50px'});
           setTimeout(function(){
              setHeight();
            },300);        
        });
   });
  function setHeight(){
     var contentH = $('.content').height();
     separatorH = parseFloat(contentH * 0.9);
     $('.seperator2').css({ height: separatorH });
  }
</script> 
```

该脚本可以位于页面的头部或底部。尽管有这个地方，但请确保首先链接`jQuery`库。

**注意：**要在头部（或页面的其他地方）链接`jQuery`库，请使用以下脚本：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

**编辑：**您可以将`height`元素的设置为 0 或完全删除它。我仍然可能会将其保留为`height: 100;`; 在执行脚本之前，这将强制页面看起来不错。

# javascript - 我可以使用 javascript 在两个本地 html 文件之间进行通信吗？

> ID：13545883
> 
> 赞同：2
> 
> 时间：2012-11-24T21:40:11.493
> 
> 标签：javascript, html, cross-domain

我在同一个文件夹中有两个本地 .html 文件。一个页面与另一个页面一起打开一个窗口，并尝试在新打开的窗口中调用一个函数。但是，函数调用失败，我在控制台中得到了这个：

> 不安全的 JavaScript 尝试从带有 URL file:///***/B.html 的框架访问带有 URL file:///***/A.html 的框架。域、协议和端口必须匹配。

这发生在 Chrome 和 Webkit (Mac) 上。有什么办法可以：禁用 file:// 协议的跨域检查，或者在不同的本地文件中调用 javascript 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T23:21:56.713

您可以使用 window.postMessage 执行以下操作：

初始窗口 html 文件：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            var otherWindow;
            function openOther() {
                otherWindow = window.open("other.html", "otherWindow");

            }

            function otherFunc() {
                otherWindow.postMessage("otherFunc", "*");
            }
        </script>
    </head>
    <body>
        <div onclick="openOther()">Open the other window</div>
        <div onclick="otherFunc()">Call the other window's function</div>
    </body>
</html> 
```

第二个窗口的HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            window.addEventListener("message", function(event) {
                alert("The other window's function executed.");
            }, false);
        </script>
    </head>
    <body>
        <div>This is the other window.</div>
    </body>
</html> 
```

[这是window.postMessage](http://developer.mozilla.org/en-US/docs/DOM/window.postMessage)的一个很好的参考。

# internet-explorer - .net IE8 Hash Url Redirect - 再次询问

> ID：13545884
> 
> 赞同：1
> 
> 时间：2012-11-24T21:40:16.597
> 
> 标签：internet-explorer, url, redirect, hash, login

3 个月前有一个帖子基本上问了我的问题，但我正在重新发布，因为没有答案可以处理我的情况。问题是当表单身份验证重定向到 ASP.NET 中的登录页面时，URL 的哈希部分会丢失（因为它从未发送到服务器），因此登录后，用户不会被定向到正确的位置。有人建议用户可以在重定向用户时存储散列值，但在我的情况下，这不起作用，因为用户正在从电子邮件中的链接访问页面，并且重定向发生在我的代码，但由于 web.config 表单配置而自动执行。有什么想法可以让用户在登录后被引导到正确的基于哈希的深层链接？

这是现有的帖子：[.net IE8 hash url redirect](https://stackoverflow.com/questions/12012232/net-ie8-hash-url-redirect)

这是一篇关于某人如何在 Java 中解决相同浏览器行为的帖子：http: [//forum.springsource.org/showthread.php?101421-Preserving-URL-anchor-when-redirecting](http://forum.springsource.org/showthread.php?101421-Preserving-URL-anchor-when-redirecting)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:56:12.117

以下解决方法可解决此问题：

1）在电子邮件链接中，包含一个包含哈希地址编码版本的查询字符串变量，并包含哈希地址内容

```
 myUrl = baseUrl + "Account\" + acctId + "?route=%2FApplication%2FEntry" + "#/Application/Entry" 
```

2) 在登录页面的服务器端代码中，读取路由并使用它将哈希部分附加到登录页面将在登录后重定向到的 returnUrl 中：

```
 if (returnUrl.Contains("?route="))
        {
            string[] split = returnUrl.Split(new string[] { "?route=" }, StringSplitOptions.None);
            var route = Server.UrlDecode(split[1]);
            returnUrl = split[0] + "#" + route;  
        } 
```

# c - C中的命名空间

> ID：13545885
> 
> 赞同：0
> 
> 时间：2012-11-24T21:40:20.410
> 
> 标签：c, namespaces, c99

我有以下代码：

```
typedef struct Y {int X;} X;
enum E {X}; 
```

这会产生错误：

> 错误：“X”重新声明为不同类型的符号

据我所知，C 为结构、联合和枚举标签以及它们的成员隐式定义了命名空间。所以，我不确定为什么`E::X`会与 typedef 结构标签发生冲突`X`？

C 中的名称空间到底是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T21:50:41.940

C 没有单独的`enum`成员命名空间。当您编写`enum {X}`时，会创建一个全局常量`X`（可能与其他全局名称冲突，例如`typedef`'d 标签）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:43:07.997

因为该类型`X`是在*全局*命名空间中声明的，所以它包含`enum E`，它又包含对 的重新声明`X`。所以发生这种情况是因为它们不在同一级别 - 一个“命名空间”包含另一个。

# python - 如何强制网格在 wxPython 中重绘？

> ID：13545886
> 
> 赞同：0
> 
> 时间：2012-11-24T21:40:20.527
> 
> 标签：python, wxpython

我有一个函数可以对网格列中的每个单元格执行一些操作。`SetCellBackgroundColour`该函数根据运算结果设置单元格 ( ) 的背景颜色。我的问题是，功能完成后，单元格保持不变。在 OSX 上，只有当我向下滚动时，单元格才会重绘并以颜色显示。在 Windows 上，它们甚至不会重绘，我必须在它们着色之前选择和取消选择单元格。

更改单元格背景颜色后，如何强制 Grid 控件重绘并正确显示？

* * *

### 我试过的

我试图`Layout()`在网格和网格的父面板上调用，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:40:20.527

[在通过API](http://www.wxpython.org/docs/api/wx.grid.Grid-class.html)进行更多搜索后想通了。我找到了`Grid.ForceRefresh`完美的方法。只需要在我完成网格编辑后调用它一次。

# c++ - C++ 条件运算符与 if-else

> ID：13545893
> 
> 赞同：3
> 
> 时间：2012-11-24T21:41:07.437
> 
> 标签：c++, conditional, operator-keyword, if-statement

我一直想知道这一点。假设我们有一个变量字符串权重和一个输入变量 int 模式，它可以是 1 或 0。

使用是否有明显的好处：

```
weight = (mode == 1) ? "mode:1" : "mode:0"; 
```

超过

```
if(mode == 1)
    weight = "mode:1";
else
    weight = "mode:0"; 
```

超出代码可读性？速度是否受到影响，编译器是否以不同的方式处理（例如某些 switch 语句转换为跳转表的能力）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T22:03:09.500

条件运算符和 if/else 块之间的主要区别在于条件运算符是表达式，而不是语句。因此，很少有地方可以使用条件运算符而不能使用 if/else。例如，常量对象的初始化，像这样：

```
const double biasFactor = (x < 5) ? 2.5 : 6.432; 
```

如果在这种情况下使用 if/else，`biasFactor`则必须是非常量。

此外，构造函数初始化器列表也调用表达式而不是语句：

```
X::X()
  : myData(x > 5 ? 0xCAFEBABE : OxDEADBEEF)
{
} 
```

在这种情况下，myData 可能没有定义任何赋值运算符或非常量成员函数——它的构造函数可能是向它传递任何参数的唯一方法。

另外，请注意，任何表达式都可以通过在末尾添加分号来转换为语句——反之则不然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:50:33.407

使用mingw，生成的汇编代码

```
const char *  testFunc()
{
    int mode=1;
    const char * weight = (mode == 1)? "mode:1" : "mode:0";
    return weight;
} 
```

是：

```
testFunc():
0040138c:   push %ebp
0040138d:   mov %esp,%ebp
0040138f:   sub $0x10,%esp
10          int mode=1;
00401392:   movl $0x1,-0x4(%ebp)
11          const char * weight = (mode == 1)? "mode:1" : "mode:0";
00401399:   cmpl $0x1,-0x4(%ebp)
0040139d:   jne 0x4013a6 <testFunc()+26>
0040139f:   mov $0x403064,%eax
004013a4:   jmp 0x4013ab <testFunc()+31>
004013a6:   mov $0x40306b,%eax
004013ab:   mov %eax,-0x8(%ebp)
12          return weight;
004013ae:   mov -0x8(%ebp),%eax
13        } 
```

与

```
const char *  testFunc()
{
    const char * weight;
    int mode=1;
    if(mode == 1)
        weight = "mode:1";
    else
        weight = "mode:0";

    return weight;
} 
```

是：

```
testFunc():
0040138c:   push %ebp
0040138d:   mov %esp,%ebp
0040138f:   sub $0x10,%esp
11          int mode=1;
00401392:   movl $0x1,-0x8(%ebp)
12          if(mode == 1)
00401399:   cmpl $0x1,-0x8(%ebp)
0040139d:   jne 0x4013a8 <testFunc()+28>
13              weight = "mode:1";
0040139f:   movl $0x403064,-0x4(%ebp)
004013a6:   jmp 0x4013af <testFunc()+35>
15              weight = "mode:0";
004013a8:   movl $0x40306b,-0x4(%ebp)
17          return weight;
004013af:   mov -0x4(%ebp),%eax
18        } 
```

生成几乎相同的代码。您的应用程序的性能不应依赖于这样的小细节。

所以，不，这没有什么区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:45:34.520

不，这纯粹是为了将代码呈现给人类读者。我希望任何编译器都能为这些生成相同的代码。

# mysql - 错误 1005 (hy000) 无法在 mysql 中创建表 (errno 150)

> ID：13545895
> 
> 赞同：-1
> 
> 时间：2012-11-24T21:41:32.703
> 
> 标签：mysql, sql, foreign-keys

![mysql问题截图](../Images/b01b9f1cacc50f843914a2ea95b622bf.png)

如屏幕截图所示，两个字段：客户表中的 cust_id 和 ShelfLocation 表中的 Store_ID 具有相同的签名，但我仍然无法从 Store_ID 引用 cust_id。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T17:40:22.497

这为我解决了这个问题：在第一行之前添加：

```
SET FOREIGN_KEY_CHECKS = 0; 
```

在最后一行之后添加：

```
SET FOREIGN_KEY_CHECKS = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T17:20:40.720

解决方案是检查以确保`Primary_Key`并`Foreign_Key`完全匹配它们的数据类型。

如果一个已签名而另一个未签名，它将失败。好的做法是确保两者都是无符号 INT。

# r - SAM 和 samR 输出的问题

> ID：13545896
> 
> 赞同：2
> 
> 时间：2012-11-24T21:41:52.607
> 
> 标签：r

我在 csv 格式表中有以下基因信息：

```
 1       1       1       2     2         2
1415670_at  1   365.1   293.4   288.9   394.5   312     381.6
1415671_at  2   556.1   584.2   567.8   592.8   471.6   513.1
1415672_at  3   1048.3  763.1   1074.9  852.3   826.1   898.3
1415673_at  4   60.8    51.7    51.6    224     248.4   150.7
1415674_at  5   129.1   107.2   230.4   175.5   250.5   172.4 
```

我一直在运行 SAM for Excel，可在[http://www-stat.stanford.edu/~tibs/SAM/](http://www-stat.stanford.edu/~tibs/SAM/)中获得 ，结果如下：

```
Positive genes (3)                              
Row Gene ID Gene Name   Score(d)    Numerator(r)    Denominator(s+s0)   Fold Change q-value(%)
5   1415673_at  4   2.539689902 153 60.24357537 1.14E+46    0
2   1415670_at  1   0.707325294 46.9    66.30612588 1.31313E+14 0
6   1415674_a_at    5   0.574118361 43.9    76.46506883 1.64141E+13 0 
```

我使用的参数如下图所示：

![在此处输入图像描述](../Images/9cef5c3f499c428469933ff64968679b.png)

当我通过以下程序将 samR 用于 R 时：

```
 filename<-"test.csv"
 y <- c(1,1,1,2,2,2)        
 m <- read.csv(filename,sep=",",row.names=1)
 t <- as.matrix(m)
 samfit <- SAM(t, y, resp.type="Two class unpaired",
          nperms=100, testStatistic=c("standard"),
          knn.neighbor=10, random.seed=1234567, logged2=TRUE)
 print(samfit)
 rownames(m)[ as.numeric( samfit$siggenes.table$genes.up[ , "Gene Name"]) ]
 rownames(m)[ as.numeric( samfit$siggenes.table$genes.lo[ , "Gene Name"]) ] 
```

结果更加不同：

```
Call:
SAM(x = t, y = y, resp.type = "Two class unpaired", nperms = 100, 
    testStatistic = c("standard"), knn.neighbors = 10, random.seed = 1234567, 
    logged2 = TRUE)

Genes up
     Gene ID Gene Name Score(d) Numerator(r) Denominator(s+s0)
[1,] g5      5         1.173    115.375      98.348           
[2,] g4      4         0.877    107.867      122.948          
     Fold Change          q-value(%)
[1,] 5.38686075651057e+34 0         
[2,] 2.95870863324773e+32 0         

Genes down
NULL
     rownames(m)[ as.numeric( samfit$siggenes.table$genes.up[ , "Gene Name"])]

     [1] "1415674_a_at" "1415673_at"  
     rownames(m)[ as.numeric( samfit$siggenes.table$genes.lo[ , "Gene Name"])]

     character(0) 
```

而对于庞大的数据集，情况会变得更糟，有人知道为什么吗？

未格式化的数据是：

```
,,1,1,1,2,2,2
1415670_at,1,365.1,293.4,288.9,394.5,312,381.6
1415671_at,2,556.1,584.2,567.8,592.8,471.6,513.1
1415672_at,3,1048.3,763.1,1074.9,852.3,826.1,898.3
1415673_at,4,60.8,51.7,51.6,224,248.4,150.7
1415674_a_at,5,129.1,107.2,230.4,175.5,250.5,172.4 
```

我也尝试过使用未记录的数据，SAM 和 samR 的结果仍然不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:24:14.623

我加载了库（我猜？案例很重要，你说`samR`）

```
library(samr) 
```

和你的样本输入数据

```
txt <- textConnection(",,1,1,1,2,2,2
1415670_at,1,365.1,293.4,288.9,394.5,312,381.6
1415671_at,2,556.1,584.2,567.8,592.8,471.6,513.1
1415672_at,3,1048.3,763.1,1074.9,852.3,826.1,898.3
1415673_at,4,60.8,51.7,51.6,224,248.4,150.7
1415674_a_at,5,129.1,107.2,230.4,175.5,250.5,172.4")

m <- read.csv(txt, row.names=1) 
```

我有

```
> head(as.matrix(m))
             X.1     X1  X1.1   X1.2    X2  X2.1  X2.2
1415670_at     1  365.1 293.4  288.9 394.5 312.0 381.6
1415671_at     2  556.1 584.2  567.8 592.8 471.6 513.1
1415672_at     3 1048.3 763.1 1074.9 852.3 826.1 898.3
1415673_at     4   60.8  51.7   51.6 224.0 248.4 150.7
1415674_a_at   5  129.1 107.2  230.4 175.5 250.5 172.4 
```

的第一列`m`是不需要的，所以我在转换为矩阵之前将其删除——这是你的错误吗？

```
t <- as.matrix(m[,-1]) 
```

然后适合

```
y <- rep(1:2, each=3)
samfit <- SAM(t, y, resp.type="Two class unpaired",
              nperms=100, testStatistic=c("standard"),
              knn.neighbor=10, random.seed=1234567, logged2=TRUE,
              genenames=rownames(t)) 
```

`m`结果与不删除第一列时的结果不同。

# c++ - endl 和 '\n' 的区别

> ID：13545898
> 
> 赞同：4
> 
> 时间：2012-11-24T21:42:06.537
> 
> 标签：c++, stream, outputstream

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T21:42:43.337

`std::endl`写入换行符，**并刷新缓冲区**。正如您所发现的，刷新可能是一项相当昂贵的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T21:54:51.210

`endl`有额外昂贵的`flush()`操作

**27.7.3.8 标准 basic_ostream 操纵器 [ostream.manip]**

```
namespace std {
template <class charT, class traits>
basic_ostream<charT,traits>& endl(basic_ostream<charT,traits>& os);
}
1 Effects: Calls os.put(os.widen(’\n’)), then os.flush().
2 Returns: os. 
```

# uml - 用例可以导致另一个用例

> ID：13545899
> 
> 赞同：1
> 
> 时间：2012-11-24T21:42:07.517
> 
> 标签：uml, use-case

我有以下用例：

![在此处输入图像描述](../Images/a6a3d27202511e8ba3b094f5e1f34885.png)

当用户在空间中移动时（应用程序将在移动设备上运行，所以它实际上是关于一个地理位置），他可以访问新资源，或者失去对某些资源（或资产）的访问权限。

如何在 UML 2 中清晰地建模？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:54:30.247

看一下[用例](http://en.wikipedia.org/wiki/Use_case)的维基百科定义：

“在软件和系统工程中，用例是一系列步骤，通常定义角色（在 UML 中称为“参与者”）和系统之间的交互，以实现目标。”

用例是您最终实现的东西。*“用户移动”不是一个用例，参与者和某个系统*之间没有交互。同样，“有手机”和“有电脑”也不是用例。

请记住，用例主要用于对用户与*系统*的交互进行建模。看起来您的用例是先决条件或状态，而不是交互。

# python - 如何在列表列表中找到最常见的元素？

> ID：13545902
> 
> 赞同：3
> 
> 时间：2012-11-24T21:42:29.160
> 
> 标签：python, list, python-3.x, count, python-2.7

我明白

```
a = max(set(lst), key=lst.count) 
```

将导出列表中最常见的元素

但是如何在不使用辅助函数的情况下导出列表列表中最常见的元素？

例如

```
lst = [['1','2','3','4'],['1','1','1','1'],['1','2','3','4']] 
```

输出应该相等`1`。

当我尝试`a = max(set(lst), key=lst.count)`

它写道`builtins.TypeError: unhashable type: 'list'`

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T21:49:00.927

有很多方法，但我想让你知道标准模块中有一些很好的工具可以处理这类事情，例如[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)：

```
In [1]: lst = [['1','2','3','4'],['1','1','1','1'],['1','2','3','4']]
In [2]: from collections import Counter
In [3]: from operator import itemgetter
In [4]: max((Counter(l).most_common(1)[0] for l in lst), key=itemgetter(1))[0]
Out[4]: '1' 
```

或者，您可以（有点）为每个子列表使用您当前的解决方案：

```
In [5]: max(((max(set(l), key=l.count), l) for l in lst),
   ...: key=lambda x: x[1].count(x[0]))[0]
Out[5]: '1' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T21:50:52.397

只需压平您的`list of list`, 并[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)在其上使用。然后使用`Counter.most_common()`方法获取其出现次数从高到低的元素：`list`-`tuple`

```
>>> lst = [['1','2','3','4'],['1','1','1','1'],['1','2','3','4']]
>>> flattened_list = [elem for sublist in lst for elem in sublist]  
>>> flattened_list
['1', '2', '3', '4', '1', '1', '1', '1', '1', '2', '3', '4']
>>>
>>> from collections import Counter
>>>
>>> counter = Counter(flattened_list)
>>> counter.most_common()
[('1', 6), ('3', 2), ('2', 2), ('4', 2)]
>>>
>>> counter.most_common(1)
('1', 6) 
```

或者，您可以使用您的方法从`flatten`列表中获取最常见的元素。

```
>>> max(set(flattened_list), key=flattened_list.count)
'1' 
```

* * *

您也可以像这样展平您的列表：-

```
>>> sum(lst, [])
['1', '2', '3', '4', '1', '1', '1', '1', '1', '2', '3', '4'] 
```

* * *

所以，**作为一个单行，**你可以这样做： -

```
>>> lst = [['1','2','3','4'],['1','1','1','1'],['1','2','3','4']]

>>> max(set(sum(lst, [])), key=sum(lst, []).count)
'1' 
```

当然，最后一个创建了两个具有相同内容的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T22:02:52.403

您必须展平您的列表（使用`chain(*lst)`），然后计算列表中每个元素的条目`Counter(chain(*lst).most_common())`并对结果进行排序。

```
from itertools import chain
from collections import Counter

lst = [['1','2','3','4'],['1','1','1','1'],['1','2','3','4']]
sorted(Counter(chain(*lst)).most_common())[0][0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-05T01:17:42.430

您可以使用它`Counter`来查找最常见的元素，并`chain`遍历列表列表的元素：

```
from collections import Counter
from itertools import chain

print Counter(val for val in chain.from_iterable(lst)).most_common(1) 
```

# autoconf - 如何让 autoconf 检查 -R 是否可以传递给 flex？

> ID：13545903
> 
> 赞同：4
> 
> 时间：2012-11-24T21:42:29.383
> 
> 标签：autoconf, flex-lexer

显然，MacOS 和 Linux 上的 gnuflex 需要`-R`选项 or来生成可重入扫描程序，但在 FreeBSD 上，它默认生成可重入扫描程序，如果提供or则`%option reentrant`抛出错误。我想让 autoconf 自动检查是否允许 -R 选项，如果允许，请提供它。我不清楚如何为此进行 autoconf 测试。我的猜测是我应该使用 -R 在空文件上运行 gnuflex 并检查结果代码并设置某种变量，然后将其添加到 FLEX 选项中，但我不太确定。有任何想法吗？`-R``%option reentrant``gnuflex`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:18:43.080

我假设您已经设置`$FLEX`了 ，可能是 和 的`AC_ARG_VAR`组合`AC_PATH_PROG`。

```
AC_CACHE_CHECK([whether $FLEX supports -R],
               [my_cv_prog_flex_dash_r],
               [mv_cv_prog_flex_dash_r=no
                echo '%%' | "$FLEX" -R && my_cv_prog_flex_dash_r=yes
                rm -f lex.yy.c])
AS_IF([test $my_cv_prog_flex_dash_r = yes], [FLEX="$FLEX -R"]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T04:56:47.113

这就是我最终做的事情。它比@Jack Kelly 的更具可读性，而且它不会创建边变量......

```
## Determine if we can use flex -R                                                                                       
if eval "echo %% | $FLEX -R -t > /dev/null 2>&1"
then
  AC_MSG_NOTICE([$FLEX supports -R])
else
  AC_MSG_ERROR([$FLEX does not support -R.  Please get a modern version of gnu flex])
fi 
```

# python - 使用 Tkinter 在 Pygame 中画一个圆圈

> ID：13545911
> 
> 赞同：5
> 
> 时间：2012-11-24T21:43:07.813
> 
> 标签：python, drawing, tkinter, pygame

使用来自另一个问题的一些代码，我在 tkinter 窗口中嵌入了一个 pygame 窗口，我正在尝试制作一个在 pygame 窗口上绘制一个圆圈的 tkbutton，已经试验了一段时间，到目前为止还没有任何结果。任何想法都会很棒！这是我到目前为止的代码......

```
import Tkinter as tk
import os
import pygame as py

#         R   G  B
red =   (225, 0, 0)
green = (0, 255, 0)
w, h = 500, 200

p = False

def maketrue(p):
    p = True
    returnp

root = tk.Tk()
window = tk.Frame(root, width=w, height=h)
window.pack()

os.environ['SDL_WINDOWID'] = str(window.winfo_id())

root.update

py.display.init()
screen = py.display.set_mode((w, h))
screen.fill(py.Color(255, 0, 0))
drawbutton = tk.Button(root, text='Draw Circle', command = maketrue(p))
drawbutton.pack()

while True:
    if p == True:
        py.draw.circle(screen, red, (250, 50), 20)
        py.display.update()
    else:
        pass
    py.draw.circle(screen, green, (250, 100), 20)

    root.update() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-14T19:01:12.443

一直想做这件事，但我现在有时间，这是一些基本代码，程序创建一个 tkinter 窗口，然后在一个框架中嵌入一个 pygame 窗口，然后创建另一个框架并在该窗口上放置一个按钮按下时，调用一个函数，告诉 pygame 在 pygame 窗口上画一个圆圈。

```
import pygame
import Tkinter as tk
from Tkinter import *
import os

root = tk.Tk()

embed = tk.Frame(root, width = 500, height = 500) #creates embed frame for pygame window
embed.grid(columnspan = (600), rowspan = 500) # Adds grid
embed.pack(side = LEFT) #packs window to the left

buttonwin = tk.Frame(root, width = 75, height = 500)
buttonwin.pack(side = LEFT)

os.environ['SDL_WINDOWID'] = str(embed.winfo_id())
os.environ['SDL_VIDEODRIVER'] = 'windib'

screen = pygame.display.set_mode((500,500))
screen.fill(pygame.Color(255,255,255))

pygame.display.init()
pygame.display.update()

def draw():
    pygame.draw.circle(screen, (0,0,0), (250,250), 125)
    pygame.display.update()

button1 = Button(buttonwin,text = 'Draw',  command=draw)
button1.pack(side=LEFT)

root.update()

while True:
    pygame.display.update()
    root.update() 
```

# javascript - 检查窗口是否打开，如果没有调用另一个 javascript 函数

> ID：13545913
> 
> 赞同：2
> 
> 时间：2012-11-24T21:43:21.390
> 
> 标签：javascript

我正在使用以下 javascript 打开另一个窗口，我想检查该窗口是否真的打开，但是如果窗口没有打开，我希望它调用“pause()”函数。即使经过3天的研究，我也不知道如何做到这一点，有人可以指导我吗？

打开窗口的javascript：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.js"></script>
    <script type="text/javascript">
        var windowSizeArray = ["width=300,height=300",
                                "width=200,height=400,scrollbars=yes"];

        $(document).ready(function () {
            $('#newWindow').click();
            window.open($('#newWindow').attr('href'), 'window name', 'window settings')
            $('.newWindow').click(function (event) {

                var url = $(this).attr("href");
                var windowName = "popUp"; //$(this).attr("name");
                var windowSize = windowSizeArray[$(this).attr("rel")];

                window.open(url, windowName, windowSize);

                event.preventDefault();

            });
        });

    </script> 
```

如果该窗口未打开，我希望它调用暂停函数：

```
<a href="javascript:void(0);" onclick="pause();"><img name="b1" src="system/modules/surf/stop.png" border="0" alt="Pause" title="Pause" style="position:absolute;top:28px;margin-left:5px"></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:04:54.023

该函数`window.open()`返回一个新创建的窗口的句柄，它有一个`closed`属性。如果新窗口已关闭，则此属性为 true：

```
var popuphandle=window.open(...);
alert(popuphandle.closed); 
```

如果您需要持续监控窗口的状态，请使用`window.setInterval()`：

```
window.setInterval(function()
{
    if (popuphandle.closed) pause();
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T22:01:15.923

您可以从您的新窗口中，通过调用 opener 的函数反复告诉 window.opener 它仍然处于打开状态

`window.opener.callFunctionToTellIamOpened()`

要重复调用此函数，您可以使用 setInterval [http://www.w3schools.com/jsref/met_win_setinterval.asp](http://www.w3schools.com/jsref/met_win_setinterval.asp)

# .net - WCF WSDL 摆脱 qXX 命名空间

> ID：13545915
> 
> 赞同：3
> 
> 时间：2012-11-24T21:43:40.500
> 
> 标签：.net, wcf, wsdl, .net-4.5

我从 WCF 服务导出了 WSDL，并应用了单个 WSDL 参数。

有很多 qXX XML 命名空间，如以下片段中的类型和方法。

```
<xs:complexType name="PrincipalReference">
  <xs:complexContent mixed="false">
    <xs:extension base="q2:EntityReferenceBase">
      <xs:sequence/>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>

<xs:element name="GetPermissions">
  <xs:complexType>
    <xs:sequence>
      <xs:element minOccurs="0" name="principal" nillable="true" type="q1:PrincipalReference"/>
      </xs:sequence>
  </xs:complexType>
</xs:element> 
```

PrincipalReference 类继承自 EntityReferenceBase。PrincipalReference 和 EntityReferenceBase 都在同一个 C# 命名空间中，并且 DataContractAttribute 的 Namespace 字段的值相同。所以它们无论如何都在一个命名空间中。

我能以某种方式摆脱这些 q1 和 q2 XML 命名空间吗？Web 服务旨在从各种环境（平台/语言）中使用，因此 WSDL 更清晰，我更快乐。

例如，我可以作为一种解决方法，停止使用继承，将基类内容复制到派生的内容，从而解决 q2 问题，但我不知道如何处理应用于方法参数类型的 q1 命名空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:13:05.923

我认为您需要执行以下操作：-

在注释服务合同和数据合同时使用命名空间属性。例如这样的事情： -

```
[ServiceContract(Namespace = "http://some.url/2012/11")]

[DataContract(Namespace = "http://some.url/2012/11")] 
```

此外，在设置端点时，请确保设置`bindingNameSpace`属性：-

```
<endpoint address=""
          binding="wsHttpBinding"
          bindingConfiguration="someBindingConfiguration" 
          bindingNamespace="http://some.url/2012/11"
          contract="Some.Contract" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-10T13:39:32.233

我有同样的问题，奇怪的是它首先没有这些 q1, q2, q3 前缀。我正在使用 DataContract 序列化程序，但我错过了使用 DataContract 和 DataMember 属性覆盖我需要的所有内容。之后这些前缀就消失了。

还要注意你序列化的内容，我有一个必须替换为 int 的 TimeSpan 值，这样就不会再发生这种情况了。

# php - 使用类中的方法作为回调

> ID：13545916
> 
> 赞同：2
> 
> 时间：2012-11-24T21:43:42.787
> 
> 标签：php, class, object, methods

我正在构建一个类，它包含一些方法

在某些方法中，我尝试使用`[array_map][1]`函数并使其成为`$callback`在同一个类中定义的方法，所以我尝试了

`array_map('$this->something()',$this->somearray);`

但它没有用！并导致了这个错误

`function '$this->something' not found or invalid`

在类中使用内部方法作为回调的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:50:26.500

如果您使用的是 PHP >= 5.3，那么只需使用闭包。

```
array_map(function($a) {}, $this->somearray); 
```

否则应该是：

```
array_map(array($this, 'something'), $this->somearray); 
```

# ruby - 包罗万象的救援

> ID：13545919
> 
> 赞同：0
> 
> 时间：2012-11-24T21:44:06.833
> 
> 标签：ruby, rescue

在 Ruby/Rails 中，是否有一个“包罗万象”的`rescue`语句也允许更具体的`rescue`可能性？我试过了

```
begin
  # something
rescue URI::InvalidURIError
  # do something
rescue SocketError
  # do something else
rescue 
  # do yet another thing
end 
```

事实证明，即使有`URI::InvalidURIError`or `SocketError`，它也会进入最后一个`rescue`（即它执行`do yet another thing`）。我希望它分别是`do something`， or `do something else`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:58:12.443

```
require 'uri'
require 'socket'

Errors = [URI::InvalidURIError, SocketError]
a = lambda { |e=nil|
             begin
               raise e unless e.nil? 
             rescue URI::InvalidURIError
               puts "alligator"
             rescue SocketError
               puts "crocodile"
             rescue
               puts "vulture"
             else
               puts "rhino"
             end } 
```

现在试试

```
a.( Errors[ 0 ] )
a.( Errors[ 1 ] )
a.call 
```

它将完全按照您的需要运行。如果您上面的代码不起作用，那么您的程序中发生的事情超出了您的想象。

# jquery - 点击 JQUERY 时显示和隐藏表格行

> ID：13545921
> 
> 赞同：0
> 
> 时间：2012-11-24T21:44:20.153
> 
> 标签：jquery, asp.net-mvc

我正在用 ASP 开发一个项目，但我不习惯 Javascript 或 Jquery

我发现一些代码，如果我点击一行，它会改变颜色。

我现在想在单击一行时将显示更改为正常，然后在单击任何其他行时将其隐藏。

到目前为止我所拥有的

```
<table id="myTable" class="tablesorter"> 
<thead> 
<tr> 
    <th>INFO</th> 
</tr> 
</thead> 
<tbody> 
<tr onclick="changeMe(this);"> 
    <td>INFO</td> 
            <tr class="versionRow" style ="display:none">
                <td>INFO</td>
            </tr>
</tr> 
</tbody> 
</table> 
```

还有我的改变颜色的脚本。

```
<script>
    var whosChanged = null;

    function changeMe(el) {
        el.style.backgroundColor = "#00FF00";
        el.style.color = "#000000";

        if (whosChanged != null) {
            whosChanged.style.backgroundColor = ""
            whosChanged.style.color = ""
        }

        whosChanged = el;
    }
</script> 
```

当我点击它时，我只想能够显示带有类 versionRow 的行。

有什么想法或建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T22:29:47.287

这是一种方法：

```
function hasClass(el, needle) {
    if (!el || !needle) {
        return false;
    }
    else {
        var classes = el.className.split(/\s+/);
        for (var i = 0, len = classes.length; i < len; i++) {
            if (classes[i] == needle) {
                return true;
            }
        }
        return false;
    }
}

function nextElementSiblingShim(el) {
    if (!el) {
        return false;
    }
    else {
        return el.nextSibling.nodeType == 1 ? el.nextSibling : nextElementSiblingShim(el.nextSibling);
    }
}

function changeMe(el) {
    if (!el) {
        return false;
    }
    else {
        var nextElem = el.nextElementSibling || nextElementSiblingShim(el);
        if (hasClass(nextElem, 'versionRow')) {
            nextElem.style.display = window.getComputedStyle(nextElem, null).display !== 'none' ? 'none' : 'table-row';
        }
    }
}

var rows = document.getElementsByClassName('changeMe');

for (var i = 0, len = rows.length; i < len; i++) {
    rows[i].onclick = function(){
        changeMe(this);
    };
}​​​​​​ 
```

不过，这确实依赖于格式良好的 HTML：正如我对您的问题的评论中所述， a只是 a 、`tr`和元素的有效子级*。*它***不是***another 的有效子代。您可以将 a 嵌套在 a内，但 a 内不应有*除*and之外的*元素*。也就是说，以下 HTML 将允许上述脚本工作：`table``thead``tbody``tfoot`*`tr``table``td`*`tr` *`td``th`***

 ***```
<table id="myTable" class="tablesorter">
    <thead>
        <tr>
            <th>INFO</th>
        </tr>
    </thead>
    <tbody>
        <tr class="changeMe">
            <td>INFO</td>
        </tr>
        <tr class="versionRow">
            <td>INFO</td>
        </tr>
    </tbody>
</table>​​​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7Gabh/)。

请注意，我已经删除了`onclick`事件处理程序，以将行为与标记分开，并希望将来使事情更易于维护。我*还*`tr`从其父级中移动了嵌套的（无效）并将其添加为同级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T22:36:44.913

这样做的问题是您不能在一行中添加一行。所以你的浏览器（至少是chrome）而不是这个html部分：

```
<tr onclick="changeMe(this);"> 
    <td>INFO</td> 
            <tr class="versionRow" style ="display:none">
                <td>INFO</td>
            </tr>
</tr> 
```

这个：

```
<tr onclick="changeMe(this);"> 
    <td>INFO</td>
</tr> 
<tr class="versionRow" style ="display:none">
    <td>INFO</td>
</tr> 
```

因此，如果您只有一个类名为 versionRow 的元素，那么当您像浏览器一样重新格式化代码时应该没有问题。您所要做的就是添加这行 jquery 代码：

```
$('.versionRow').css("display","block"); 
```

但是，如果您想显示您单击的孩子的版本块，您必须将 html 重新格式化为。它看起来像这样：

```
<table id="myTable" class="tablesorter"> 
<thead> 
<tr> 
    <th>INFO</th> 
</tr> 
</thead> 
<tbody> 
<tr onclick="changeMe(this);" > 
    <td>INFO</td> <td><span style="display:none;" class="versionRow" >INFO</span></td>
</tr>
</tbody> 
</table> ​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

脚本将如下所示：

```
var whosChanged = null;

    function changeMe(el) {
        el.style.backgroundColor = "#00FF00";
        el.style.color = "#000000";

        $('span.versionRow',el).css("display","block");

        if (whosChanged != null) {
            whosChanged.style.backgroundColor = ""
            whosChanged.style.color = ""
        }

        whosChanged = el;
    }​ 
```

[JSFIDDLE 演示](http://jsfiddle.net/ToBadForU/GCQeE/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T21:57:52.690

自从我在没有 jQuery 的情况下完成此操作以来已经有一段时间了，试试这个

```
<script>
    var whosChanged = null;

    function changeMe(el) {
        el.style.backgroundColor = "#00FF00";
        el.style.color = "#000000";

        if (whosChanged != null) {
            whosChanged.style.backgroundColor = ""
            whosChanged.style.color = ""
        }

        whosChanged = el;

        // ok so you are using jquery. The above isn't at all!
        // in which case it's so simple
        el.find('.versionRow').show();
    }
</script> 
```***

# ruby-on-rails - Magento oauth 和 REST api 问题

> ID：13545922
> 
> 赞同：4
> 
> 时间：2012-11-24T21:44:20.833
> 
> 标签：ruby-on-rails, magento, rest, oauth, omniauth

我正在尝试将我的 ruby​​ on rails 应用程序集成到 magento，并且我已经提出了初始请求，获得了授权，我相信我得到了最终的令牌，但我不能确定。以下是我的回复：

（这里有很多东西，所以跳过我提取导入位的地方）

```
 .....
 "credentials"=>
  {"token"=>"r8apb2rcgci9ry5hugcuiqlnwdi0evc1",
   "secret"=>"8pnyogb4048toujt5rjoq26tqh50vkv5"},
 "extra"=>
  {"access_token"=>
    #<OAuth::AccessToken:0x007fdd59893468
     @consumer=
      #<OAuth::Consumer:0x007fdd5995f928
       @http=#<Net::HTTP mymagentocart.dev:443 open=false>,
       @http_method=:post,
       @key="ttuj6ok0ioziv7bcfwi8wprzqe6o4x1e",
       @options=
        {:signature_method=>"HMAC-SHA1",
         :request_token_path=>"/oauth/initiate",
         :authorize_path=>"/admin/oauth_authorize",
         :access_token_path=>"/oauth/token",
         :proxy=>nil,
         :scheme=>:header,
         :http_method=>:post,
         :oauth_version=>"1.0",
         :site=>"https://mymagentocart.dev"},
       @secret="b0maut2ftkg2wb3nm24t263720n7kxqa">,
     @params=
      {:oauth_token=>"r8apb2rcgci9ry5hugcuiqlnwdi0evc1",
       "oauth_token"=>"r8apb2rcgci9ry5hugcuiqlnwdi0evc1",
       :oauth_token_secret=>"8pnyogb4048toujt5rjoq26tqh50vkv5",
       "oauth_token_secret"=>"8pnyogb4048toujt5rjoq26tqh50vkv5"},
     @secret="8pnyogb4048toujt5rjoq26tqh50vkv5",
     @token="r8apb2rcgci9ry5hugcuiqlnwdi0evc1">},
 "oauth_token"=>"jj2dbrea7dimxwc0twibyoikxjazvs6y",
 "oauth_verifier"=>"83idqmtmb76fe5axad1rf7lhfa3wqxki"
..... 
```

我在访问令牌、我的密钥和秘密中看到：

```
@key="ttuj6ok0ioziv7bcfwi8wprzqe6o4x1e" 
@secret="b0maut2ftkg2wb3nm24t263720n7kxqa” 
```

这是我在管理员中创建 REST 使用者时 magento 给我的。

然后是一堆重复的令牌和秘密，但它们都是相同的，属于“凭证”标签：

```
“token"=>"r8apb2rcgci9ry5hugcuiqlnwdi0evc1" 
“secret"=>"8pnyogb4048toujt5rjoq26tqh50vkv5” 
```

最后，还有 oauth_token 和 oauth_verifier：

```
“oauth_token"=>"jj2dbrea7dimxwc0twibyoikxjazvs6y" 
“oauth_verifier"=>"83idqmtmb76fe5axad1rf7lhfa3wqxki” 
```

所以这是我的问题……</p>

我需要在将来的请求中传递哪些以立即进行身份验证而无需重新生成令牌？

目前在我的应用程序中，每次我提出请求时，它都会将我发送回magento中的用户确认屏幕以进行授权。

另外，如何请求获取我的 magento 用户 ID、姓名等……以便我可以使用此信息在 Rails 应用程序中生成用户？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:15:20.997

您拥有访问令牌对象，因此您应该能够执行以下操作：

```
auth_hash["extra"]["access_token"].get("/api/rest/products") 
```

如果您想创建一个新的访问令牌对象，您可以使用我从您的示例中提取的密钥和令牌执行以下操作：

```
@consumer=OAuth::Consumer.new("ttuj6ok0ioziv7bcfwi8wprzqe6o4x1e", "b0maut2ftkg2wb3nm24t263720n7kxqa", {:site => "https://mymagentocart.dev"})
@access_token = OAuth::AccessToken.new(@consumer, "r8apb2rcgci9ry5hugcuiqlnwdi0evc1", "8pnyogb4048toujt5rjoq26tqh50vkv5")
@access_token.get("/api/rest/products") 
```

请参阅此页面上的“使用长期访问令牌”：[http ://code.google.com/p/oauth-plugin/wiki/AccessToken](http://code.google.com/p/oauth-plugin/wiki/AccessToken)

# c++ - 在 C++ 映射中找不到元素

> ID：13545928
> 
> 赞同：1
> 
> 时间：2012-11-24T21:45:13.717
> 
> 标签：c++, file-io, map

我对 C++ 地图有一个奇怪的问题。

首先，我将文件名作为键插入，将递增的整数作为值插入：

```
int getdir (const char* dir, map<const char*, int> &filemap)
{
    DIR *dp;

    struct dirent *dirp;
    if((dp  = opendir(dir)) == NULL) 
    {
        cout << "Error(" << errno << ") opening " << dir << endl;
        return errno;
    }
    int index = 0;
    while ((dirp = readdir(dp)) != NULL) 
    {
        string temp1(dir);
        string temp2(dirp->d_name);

        if(!isalpha(temp2[0]))
        {
            continue;
        }

        filemap[dirp->d_name] = index; 
        index++;
    }

    closedir(dp);
    return 0;
} 
```

然后在另一个函数中，我尝试通过以下代码片段查找此映射以查找某个文件名是否存在：

```
stringstream ss(firststr);
string sourceid;
getline(ss, sourceid, ':');
sourceid = sourceid+".txt";

if(filemap.find(sourceid.c_str())!=filemap.end())
{
   cout<<"found"<<endl;
} 
```

我检查了 sourceid.c_str() 是否与文件映射中的某个键相同，但不会在映射中找到。

相反，如果我将元素插入地图的方式更改为以下（其余相同）：

```
...
string temp1(dir);
string temp2(dirp->d_name);

...

filemap[temp2.c_str()] = index;  //previously is filemap[dirp->d_name] = index;
index++; 
```

然后可以在其他功能的地图中找到某个键​​。但是问题是文件映射仅包含最后一个元素，其大小为 1。似乎映射的键被覆盖，因此最后映射包含“last_element => last_index”。

我已经调试了很长时间，但仍然无法解决。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:46:26.837

为了`const char*`用作 a 的键`map`，您需要提供一个比较器。请参阅[使用 char* 作为 std::map 中的键](https://stackoverflow.com/questions/4157687/using-char-as-a-key-in-stdmap)

一个更简单的选择是更改地图以`std::string`用作其键。

# php - 解析 json 时遇到问题

> ID：13545929
> 
> 赞同：0
> 
> 时间：2012-11-24T21:45:14.910
> 
> 标签：php, json

> **可能重复：**
> [在 PHP 中提取 JSONP 结果集](https://stackoverflow.com/questions/5081557/extract-jsonp-resultset-in-php)

```
 $url_address = "http://geocoder.ca/?latt=" . $lat . "&longt=" . $lon . "&reverse=1&allna=1&geoit=xml&corner=1&jsonp=1&callback=getinfo";
    $addressSet = json_decode(file_get_contents($url_address), true); 
```

当我尝试访问时`$addressSet[0]`没有任何东西

所以[http://geocoder.ca/?latt=42.04&longt=-87.79&reverse=1&allna=1&geoit=xml&corner=1&jsonp=1&callback=getinfo](http://geocoder.ca/?latt=42.04&longt=-87.79&reverse=1&allna=1&geoit=xml&corner=1&jsonp=1&callback=getinfo)返回数据，我该如何解析呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:50:35.260

它不是返回 JSON，而是返回[JSONP](http://en.wikipedia.org/wiki/JSONP)。不幸的是 geocoder.ca 没有纯 JSON API。

真正的问题是如何用 PHP 解析 JSONP。请参阅[此答案](https://stackoverflow.com/a/5081588/253686)以[在 PHP 中提取 JSONP结果集](https://stackoverflow.com/questions/5081557/extract-jsonp-resultset-in-php)

# php - PHP filter_var 错误？

> ID：13545930
> 
> 赞同：3
> 
> 时间：2012-11-24T21:45:15.887
> 
> 标签：php, validation, filter-var

以下代码成功地将字符串“0123.250”验证为有效浮点数，但实际上它不是。这是一个 PHP 错误还是我做错了什么？

```
filter_var('0123.250', FILTER_VALIDATE_FLOAT); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T22:01:00.727

来自[**关于浮点文字的 PHP 文档**](http://php.net/manual/en/language.types.float.php)：

```
LNUM          [0-9]+
DNUM          ([0-9]*[\.]{LNUM}) | ({LNUM}[\.][0-9]*)
EXPONENT_DNUM [+-]?(({LNUM} | {DNUM}) [eE][+-]? {LNUM}) 
```

如您所见，前导零没有限制，如以下位所示：`[0-9]*[\.]`和`[0-9]+`.

由于该页面从未提及八进制，因此我们需要假设前导零对解释没有影响。

我*假设*应用了完全相同的规则`FILTER_VALIDATE_FLOAT`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:53:41.167

前导 0 只是明确表明千位值为零的事实，这通常是由于该位值没有数字而暗示的。

如果您担心前导零是一个非有效数字这一事实，我认为 PHP 并没有严格遵循该定义。

# twitter - Twitter4j : 搜索公共推文

> ID：13545936
> 
> 赞同：15
> 
> 时间：2012-11-24T21:46:13.560
> 
> 标签：twitter, twitter4j

如何使用 Twitter4j 库在公共推文中进行搜索？

```
public static void main(String[] args) {
        Twitter twitter = new TwitterFactory().getInstance();
        try {
            Query query = new Query("Cocaine");
            QueryResult result;
            do {
                result = twitter.search(query);
                List<Status> tweets = result.getTweets();
                for (Status tweet : tweets) {
                    System.out.println("@" + tweet.getUser().getScreenName() + " - " + tweet.getText());
                }
            } while ((query = result.nextQuery()) != null);
            System.exit(0);
        } catch (TwitterException te) {
            te.printStackTrace();
            System.out.println("Failed to search tweets: " + te.getMessage());
            System.exit(-1);
        }
    } 
```

这给了我一个`Authentication credentials are missing.`错误

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-10T10:39:15.007

您需要为 Twitter 注册您的应用程序。如果您有自己的私人帐户，您只能这样做。在您获得`ConsumerKey`, `ConsumerSecret`,`AccessToken`和`AccessTokenSecret`（它们将在您注册应用程序后显示给您）后，最简单的解决方案是将代码更改为以下示例：

```
public static void main(String[] args) {
    ConfigurationBuilder cb = new ConfigurationBuilder();
    cb.setDebugEnabled(true)
          .setOAuthConsumerKey("yourConsumeKey")
          .setOAuthConsumerSecret("yourConsumerSecret")
          .setOAuthAccessToken("yourAccessToken")
          .setOAuthAccessTokenSecret("yourTokenSecret");
    TwitterFactory tf = new TwitterFactory(cb.build());
    Twitter twitter = tf.getInstance();
        try {
            Query query = new Query("query");
            QueryResult result;
            result = twitter.search(query);
            List<Status> tweets = result.getTweets();
            for (Status tweet : tweets) {
                System.out.println("@" + tweet.getUser().getScreenName() + " - " + tweet.getText());
            }

            System.exit(0);
        } catch (TwitterException te) {
            te.printStackTrace();
            System.out.println("Failed to search tweets: " + te.getMessage());
            System.exit(-1);
        }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T11:52:54.570

您需要注册您的应用程序以获取 OAuth Authentication Consumerkey、c​​onsumersecret 以及 Accesstoken 和 Accesstokensecret，并将这些值提供给配置构建器类。

# ruby-on-rails - 如何将 pdftk 添加到 Heroku Cedar 应用程序？

> ID：13545937
> 
> 赞同：10
> 
> 时间：2012-11-24T21:46:15.993
> 
> 标签：ruby-on-rails, heroku, pdftk

我需要在我的 Heroku Cedar Rails 应用程序中将多个 PDF 文件合并为一个，并已决定使用 pdftk 来执行此操作。

我不知道如何做到这一点。我认为最好的方法是创建一个自定义 buildpack，其中包含一个为 pdftk 编译的二进制文件，但我不太清楚如何让 Vulcan 做到这一点。

有没有办法在没有 Vulcan 的情况下做到这一点？是否有一个预先存在的包含我可以使用的 pdftk 的 ruby​​ buildpack？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T16:22:38.323

我现在已经开始工作了，带有 pdftk 的自定义 Heroku Ruby buildpack 的公开版本在这里： [https ://github.com/millie/heroku-buildpack-ruby-pdftk](https://github.com/millie/heroku-buildpack-ruby-pdftk)

请务必查看自述文件中的说明。

Heroku 的 Cedar 堆栈的 pdftk 预编译版本可在此处获得： [https ://github.com/millie/pdftk-source](https://github.com/millie/pdftk-source)

希望这可以为别人省去一些麻烦！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-31T20:26:51.200

如果这对这里的任何人有帮助，我会按照我安装[millie的预编译pdftk](https://github.com/millie/pdftk-source)并使用我现有的Cedar应用程序的**确切**步骤。你的旅费可能会改变：

```
mkdir -p [my_project]/vendor/pdftk/lib [my_project]/vendor/pdftk/bin
cd /tmp
git clone https://github.com/millie/pdftk-source.git
cd pdftk-source
tar xzvf pdftk.tar.gz
mv bin/pdftk [my_project]/vendor/pdftk/bin/
mv lib/libgcj.so.12 [my_project]/vendor/pdftk/lib/
cd [my_project]
git add -f vendor/pdftk/
git commit -m "Add pdftk dependencies"
git push heroku master
heroku config:set LD_LIBRARY_PATH=/app/.heroku/vendor/lib:/app/vendor/pdftk/lib
heroku config:set PATH=/app/.heroku/python/bin:/usr/local/bin:/usr/bin:/bin:/app/vendor/pdftk/bin
heroku run bash
$ pdftk 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T03:32:31.883

2015 年 9 月，我使用[andedebauchery 的出色回答](https://stackoverflow.com/a/17980297/189412)作为指导，调整了这些步骤，以便在我的 Heroku Node.js 应用程序上安装 pdftk。他的步骤和我的步骤之间的主要区别是：

1.  我必须将 github 存储库的 URL 从[https://github.com/millie/pdftk-source.git](https://github.com/millie/pdftk-source.git)更新为[https://github.com/SirRawlins/pdftk-source](https://github.com/SirRawlins/pdftk-source)

2.  我必须[下载 BSDtar](http://gnuwin32.sourceforge.net/packages/libarchive.htm)才能从 pdftk.tar.gz 中提取可执行文件（我首先尝试了 GnuWin32 tar.exe，但它没有工作，因为它不处理 .tar.gz 文件）

3.  `git update-index --add --chmod=+x pdftk`一旦文件进入远程 Linux 环境，我必须使用它来授予对文件的执行权限

希望这对将来的其他 Windows 开发人员有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-18T06:49:05.493

这就是我在 heroku 中的 nodejs 应用程序中设置 pdftk 的方式
1- 创建 heroku 应用程序
*heroku create*
2- 为 pdftk
*BUILDPACK_URL = [https://github.com/ddollar/heroku-buildpack-apt](https://github.com/ddollar/heroku-buildpack-apt)*
设置 buildpack 3- 为 nodejs
*heroku buildpacks 设置 buildpack：添加 --index 1 heroku/nodejs*
4 - 将 libgcj.so.* 添加到您的搜索路径：
*heroku config:set LD_LIBRARY_PATH=/app/bin*
5- 打开至少一个 dyno
*heroku ps:scale web=1*
6- 创建项目根目录中的 Procfile 并定义以下内容：
*web: node server.js*
5- 在 heroku 中推送更改
*git push heroku master*

# mysql - 另一个“为什么这个声明运行缓慢”的询问

> ID：13545939
> 
> 赞同：0
> 
> 时间：2012-11-24T21:46:32.313
> 
> 标签：mysql

我一直在阅读与我在 SO 上类似的问题并在谷歌上搜索了几天，但似乎找不到适合我情况的解决方案。请参阅下面的详细信息。当我运行下面的 sql 语句时，需要一分钟。它也没有使用 tableA.col4 上的索引。为什么？

就像我说的那样，我已经在谷歌上搜索了很长一段时间，但此时似乎在转圈。任何帮助是极大的赞赏！

---细节---（对不起，它太长了，但最好有所有的信息，我猜）

我有以下两个表，表A和B：

tableA：（5M 行......最终将是 20M）

```
tableA | CREATE TABLE `tableA` (
  `col1` varchar(50) NOT NULL,
  `col2` int(10) NOT NULL DEFAULT '0',
  `col3` varchar(300) DEFAULT NULL,
  `col4` varchar(50) DEFAULT NULL,
  `col5` datetime DEFAULT NULL,
  PRIMARY KEY (`col1`,`col2`),
  KEY `col4` (`col4`),
  KEY `col5` (`col5`),
  KEY `col1` (`col1`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 | 
```

表 A 上的索引：

```
+---------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table   | Non_unique | Key_name   | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+---------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| tableA |          0 | PRIMARY    |            1 | col1         | A         |        NULL |     NULL | NULL   |      | BTREE      |         |               |
| tableA |          0 | PRIMARY    |            2 | col2         | A         |     4780162 |     NULL | NULL   |      | BTREE      |         |               |
| tableA |          1 | col4       |            1 | col4         | A         |         426 |     NULL | NULL   | YES  | BTREE      |         |               |
| tableA |          1 | col5       |            1 | col5         | A         |     2390081 |     NULL | NULL   | YES  | BTREE      |         |               |
| tableA |          1 | col1       |            1 | col1         | A         |     2390081 |     NULL | NULL   |      | BTREE      |         |               |
+---------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ 
```

tableB：（1M 行......最终将在 5M 左右）

```
| tableB | CREATE TABLE `tableB` (
  `col1` varchar(300) NOT NULL DEFAULT '',
  `col2` varchar(300) DEFAULT NULL,
  `col3` int(10) DEFAULT NULL,
  `col4` varchar(300) DEFAULT NULL,
  `col5` varchar(300) DEFAULT NULL,
  `col6` varchar(300) DEFAULT NULL,
  `col7` varchar(300) DEFAULT '0',
  `col8` varchar(300) DEFAULT '0',
  `col9` varchar(300) DEFAULT '0',
  `col10` varchar(300) DEFAULT NULL,
  `col11` varchar(300) DEFAULT NULL,
  `col12` mediumtext,
  `col13` decimal(15,2) DEFAULT NULL,
  `col14` decimal(15,2) DEFAULT NULL,
  `col15` varchar(300) DEFAULT NULL,
  `col16` varchar(300) DEFAULT NULL,
  `col17` decimal(15,2) DEFAULT NULL,
  `col18` decimal(15,2) DEFAULT NULL,
  `col19` varchar(300) DEFAULT NULL,
  `col20` varchar(300) DEFAULT NULL,
  `col21` decimal(15,2) DEFAULT NULL,
  `col22` decimal(15,2) DEFAULT NULL,
  `col23` varchar(300) DEFAULT NULL,
  PRIMARY KEY (`col1`),
  KEY `col3` (`col3`),
  KEY `col5` (`col5`),
  KEY `col2` (`col2`),
  KEY `col1` (`col1`),
  FULLTEXT KEY `col12` (`col12`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 | 
```

表 A 上的索引：

```
+----------+------------+---------------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table    | Non_unique | Key_name      | Seq_in_index | Column_name   | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+----------+------------+---------------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| tableB |          0 | PRIMARY        |            1 | col1           | A         |      989765 |     NULL | NULL   |      | BTREE      |         |               |
| tableB |          1 | col3           |            1 | col3           | A         |        9799 |     NULL | NULL   | YES  | BTREE      |         |               |
| tableB |          1 | col5           |            1 | col5           | A         |       98976 |     NULL | NULL   | YES  | BTREE      |         |               |
| tableB |          1 | col2           |            1 | col2           | A         |      197953 |     NULL | NULL   | YES  | BTREE      |         |               |
| tableB |          1 | col1           |            1 | col1           | A         |      989765 |     NULL | NULL   |      | BTREE      |         |               |
| tableB |          1 | col12          |            1 | col12          | NULL      |           1 |     NULL | NULL   | YES  | FULLTEXT   |         |               |
+----------+------------+---------------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ 
```

解释：

```
EXPLAIN SELECT *
FROM tableA LEFT OUTER JOIN tableB ON tableA.col1 = tableB.col1 
WHERE tableA.col4 NOT IN ('8/G','2','9/D','7','6/M') ORDER BY tableA.col5 DESC LIMIT 25

+----+-------------+----------+--------+-------------------+---------+---------+-----------------------+---------+-----------------------------+
| id | select_type | table    | type   | possible_keys     | key     | key_len | ref                   | rows    | Extra                       |
+----+-------------+----------+--------+-------------------+---------+---------+-----------------------+---------+-----------------------------+
|  1 | SIMPLE      | tableA   | ALL    | col4              | NULL    | NULL    | NULL                  | 4780162 | Using where; Using filesort |
|  1 | SIMPLE      | tableB   | eq_ref | PRIMARY, col1     | PRIMARY | 902     | mydb.tableA.col1      |       1 |                             |
+----+-------------+----------+--------+-------------------+---------+---------+-----------------------+---------+-----------------------------+ 
```

简介：

```
Status  Time
starting    0.000012
Waiting for query cache lock    0.000003
checking query cache for query  0.000079
checking permissions    0.000004
checking permissions    0.000003
Opening tables  0.000013
System lock 0.000006
Waiting for query cache lock    0.000027
init    0.000028
optimizing  0.000008
statistics  0.000404
preparing   0.000009
executing   0.000003
Sorting result  2.135376
Sending data    0.004359
Waiting for query cache lock    0.000004
Sending data    0.004735
Waiting for query cache lock    0.000004
....
....
....   
Sending data    0.008573
Waiting for query cache lock    0.000006
Sending data    0.005630
Waiting for query cache lock    0.000005
Sending data    0.005760
Waiting for query cache lock    0.000005
Sending data    0.005295
Waiting for query cache lock    0.000005
Sending data    0.005239
Waiting for query cache lock    0.000004
Sending data    0.004954
Waiting for query cache lock    0.000004
Sending data    82.246597
end 0.000012
query end   0.000004
closing tables  0.000009
freeing items   0.000014
logging slow query  0.000002
logging slow query  0.000003
cleaning up 0.000003 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T23:11:35.723

> 它也没有使用 tableA.col4 上的索引。为什么？

好吧，tableA.col4 NOT IN ('8/G','2','9/D','7','6/M') 是罪魁祸首。MySQL 真的不能使用索引来满足 NOT IN。

正在发生的事情是 MySQL 正在运行 tableA 的所有约 500 万行并建立一组行，其中 tableA.col4 NOT IN ('8/G','2','9/D','7',' 6/月')。然后它按 col5 降序排序，然后（希望）从中挑选出前 25 行，然后执行连接。

tableA 上 col5 和 col4 上的多列索引（按该顺序）可能有助于此查询，因为我相信 MySQL 将以相反的顺序处理索引，并在获得满足 tableA.col4 NOT IN 的 25 行后停止('8/G','2','9/D','7','6/M')。

所以我的建议是：

```
CREATE INDEX ix_tableA_col5_col4 ON tableA(col5,col4); 
```

然后重新运行您的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:54:08.790

唔。只是快速拍摄。分析输出表明发送数据需要 82.246597，所以也许你得到了很多需要花费大量时间传输的输出？

# html - 位置：绝对和父高度？

> ID：13545947
> 
> 赞同：129
> 
> 时间：2012-11-24T21:47:35.183
> 
> 标签：html, css, position, height, absolute

我有一些容器，它们的孩子只是绝对/相对定位。如何设置容器高度以便他们的孩子在里面？

这是代码：

**HTML**

```
<section id="foo">
    <header>Foo</header>
    <article>
        <div class="one"></div>
        <div class="two"></div>
    </article>
</section>    

<div style="clear:both">Clear won't do.</div>
<!-- I want to have a gap between sections here -->

<section id="bar">
    <header>bar</header>
    <article>
        <div class="one"></div><div></div>
        <div class="two"></div>
    </article>
</section> 
```

**CSS**

```
article {
    position: relative;
}

.one {
    position: absolute;
    top: 10px;
    left: 10px;
    background: red;
    width: 30px;
    height: 30px;
}

.two {
    position: absolute;
    top: 10px;
    right: 10px;
    background: blue;
    width: 30px;
    height: 30px;
} 
```

这是一个jsfiddle。我希望“条形”文本出现在 4 个正方形之间，而不是在它们后面。

[http://jsfiddle.net/Ht9Qy/](http://jsfiddle.net/Ht9Qy/)

有什么简单的修复方法吗？

**请注意，我不知道这些孩子的身高，也无法为容器设置 height: xxx。**

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-11-24T21:54:47.127

如果我理解您要正确执行的操作，那么我认为在保持孩子绝对定位的同时使用 CSS 是不可能的。

绝对定位的元素完全从文档流中移除，因此它们的尺寸不能改变其父元素的尺寸。

如果你*真的*必须在保持子元素为 的同时实现这种`position: absolute`效果，你可以使用 JavaScript 通过在渲染后找到绝对定位的子元素的高度，并使用它来设置父元素的高度。

或者，只需使用`float: left`/`float:right`和边距来获得相同的定位效果，同时将子级保持在文档流中，然后您可以`overflow: hidden`在父级（或任何其他 clearfix 技术）上使用以使其高度扩展到其子级的高度。

```
article {
    position: relative;
    overflow: hidden;
}

.one {
    position: relative;
    float: left;
    margin-top: 10px;
    margin-left: 10px;
    background: red;
    width: 30px;
    height: 30px;
}

.two {
    position: relative;
    float: right;
    margin-top: 10px;
    margin-right: 10px;
    background: blue;
    width: 30px;
    height: 30px;
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2017-09-18T14:05:42.003

这是我的解决方法，
在您的示例中，您可以添加具有*“相同样式”*的 .one 和 .two 元素的第三个元素，但没有绝对位置并且具有隐藏的可见性：

**HTML**

```
<article>
   <div class="one"></div>
   <div class="two"></div>
   <div class="three"></div>
</article> 
```

**CSS**

```
.three{
    height: 30px;
    z-index: -1;
    visibility: hidden;
    width:0!important; /* if you got unnecessary horizontal scroll*/
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-09T21:49:00.830

这是一个迟到的答案，但是通过查看源代码，我注意到当视频全屏时，“mejs-container-fullscreen”类被添加到“mejs-container”元素中。因此，可以基于此类更改样式。

```
.mejs-container.mejs-container-fullscreen {
    // This rule applies only to the container when in fullscreen
    padding-top: 57%;
} 
```

此外，如果您希望使用 CSS 使您的 MediaElement 视频流畅，下面是 Chris Coyier 的一个绝妙技巧：http: [//css-tricks.com/rundown-of-handling-flexible-media/](http://css-tricks.com/rundown-of-handling-flexible-media/)

只需将其添加到您的 CSS 中：

```
.mejs-container {
    width: 100% !important;
    height: auto !important;
    padding-top: 57%;
}
.mejs-overlay, .mejs-poster {
    width: 100% !important;
    height: 100% !important;
}
.mejs-mediaelement video {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    width: 100% !important;
    height: 100% !important;
} 
```

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-09-02T18:58:55.180

您可以使用网格来做到这一点：

```
article {
    display: grid;
}

.one {
    grid-area: 1 / 1 / 2 / 2;
}

.two {
    grid-area: 1 / 1 / 2 / 2;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-08T15:52:00.257

这种布局问题现在可以用 flexbox 解决，避免需要知道高度或使用绝对定位或浮动来控制布局。OP 的主要问题是如何让父母包含未知高度的孩子，并且他们想在特定布局内做到这一点。将父容器的高度设置为“fit-content”即可；使用“display：flex”和“justify-content：space-between”会产生我认为OP试图创建的部分/列布局。

```
<section id="foo">
    <header>Foo</header>
    <article>
        <div class="main one"></div>
        <div class="main two"></div>
    </article>
</section>    

<div style="clear:both">Clear won't do.</div>

<section id="bar">
    <header>bar</header>
    <article>
        <div class="main one"></div><div></div>
        <div class="main two"></div>
    </article>
</section> 

* { text-align: center; }
article {
    height: fit-content ;
    display: flex;
    justify-content: space-between;
    background: whitesmoke;
}
article div { 
    background: yellow;     
    margin:20px;
    width: 30px;
    height: 30px;
    }

.one {
    background: red;
}

.two {
    background: blue;
} 
```

我修改了 OP 的小提琴：http: [//jsfiddle.net/taL4s9fj/](http://jsfiddle.net/taL4s9fj/)

flexbox 上的 css-tricks： [https ://css-tricks.com/snippets/css/a-guide-to-flexbox/](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-17T11:39:25.617

```
article {
    position: relative;

}

//clear the float

article::after{
  content: '';
  clear: both;

}

.one {
    position: relative;
    float:left
    margin-top: 10px;
    margin-left: 10px;
    background: red;
    width: 30px;
    height: 30px;
}

.two {
    position: relative;
    float: right;
    margin-top: 10px;
    margin-right: 10px;
    background: blue;
    width: 30px;
    height: 30px;
}
```

* * *

## 回答 #7

> 赞同：-20
> 
> 时间：2015-04-23T22:18:30.050

这是另一个较晚的答案，但我想出了一种将“条形”文本放置在四个正方形之间的相当简单的方法。这是我所做的更改；在 bar 部分，我将“bar”文本包裹在 center 和 div 标签中。

```
<header><center><div class="bar">bar</div></center></header> 
```

在 CSS 部分，我创建了一个“bar”类，用于上面的 div 标签。添加后，条形文本位于四个彩色块之间。

```
.bar{
    position: relative;
} 
```

# html - 在画布中处理图像。如何使来源保密

> ID：13545956
> 
> 赞同：0
> 
> 时间：2012-11-24T21:49:25.327
> 
> 标签：html, base64

我正在处理 html5 画布中的图像。源图像作为 base64 存储在数据库中。是否可以确保该源图像对访问该网站的人保持隐藏和秘密？

现在我做一个mysql查询并将base64字符串从php传递给javascript。这就是为什么很容易找出 source-base64 字符串的原因。

也许我需要这样做。希望大家能给我一些建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:18:03.507

**简短的回答：**只要您在用户机器上进行图像处理就可以了。

**长答案：** Javascript 在用户机器上执行。几乎所有的网络浏览器都有调试工具，允许用户监控你的 javascript 应用程序正在做什么。您可以加密您的图像数据，但为了处理它，您迟早必须解密它。任何懂一点 Javascript 的用户都可以在那一刻提取您的图像数据。

您可以通过混淆器运行您的 js 代码来使其更难。但这也不是可靠的保护。只要它是机器可读的，它就是人类可读的。有足够决心的人也会挖掘混淆代码。

当您希望源图像保密时，您必须在服务器上进行所有图像处理，并将处理后的图像发送给用户。

# javascript - 后面的 HTML div 不应该被检测到，但必须在前面，CSS 位置是绝对的

> ID：13545958
> 
> 赞同：0
> 
> 时间：2012-11-24T21:49:28.557
> 
> 标签：javascript, html, css, z-index, css-position

## 描述

我有`div`一张桌子，这张桌子的每个 TD 都会有一个事件`onClick`。

但有时，我需要在这张桌子前面显示一些文字，尽管这些文字不能弄乱我桌子的 TD。

所以我的问题是，我需要在表格前面显示一个文字，但是当我点击这个文字时，它不会影响任何东西，并且在文字后面正确点击的TD应该调用它的事件。

## 我做了什么：

我有`#div1`和`#div2`，`#div1`在后面，`#div2`是前面（两者都是`position:absolute`）。
那么，`#div1`是否存在，但它是*不可见*的，仅`#div2`显示出来。

尽管只`#div2`显示了，但我需要显示`#div1`前面的文本`#div2`。为了做到这一点，我`span`打开`#div1`并设置了 span's `z-index:1`。这种方式，`#div1`仍然没有出现，但它`span`是。

一切都很好，但我现在遇到了一个新问题。

我需要点击`#div2`（前面），并在整个 div 上获取事件。

即使有来自 的文本`#div1`，它也不应该在那里有业务，只是显示出来。

只是阅读很难理解，所以我做了这个[Fiddle](http://jsfiddle.net/W9jy5/7/)。

点击红色的“Text1 from #div1...”，我需要它来提醒TD html内容！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:07:01.720

您可以尝试此解决方法：http: [//jsfiddle.net/W9jy5/5/](http://jsfiddle.net/W9jy5/5/)

**JavaScript**

```
$(document).ready(function(){
    $("#div2").click(function(){
        clickedOnDiv2();
    });
    $('#span1').click(function (e) {
        var div2 = $('#div2'),
            offset = div2.offset();
        if (e.pageX > offset.left && e.pageX < offset.left + div2.width() &&
            e.pageY > offset.top && e.pageY < offset.top + div2.height()) {
                clickedOnDiv2();
            }
    });

    function clickedOnDiv2() {
        alert('#div2');
    }
})​ 
```

在此解决方法中，span 元素上有一个单击事件侦听器。如果用户点击 Text1 并且点击结束 #div2 我们执行`clickOnDiv2`。

在这里它回答了您评论[http://jsfiddle.net/W9jy5/17/](http://jsfiddle.net/W9jy5/17/)中的问题。它是跨浏览器的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:56:40.520

由于`#div1`and`#div2`是 DOM 兄弟，因此您无法“捕获” `#div1`in的事件`#div2`。由于`SPAN`是 的后代`#div1`，但您仍然需要与附加到 相同的处理程序`#div2`，因此您需要将侦听器附加到多个元素或重新排列 DOM。

解决此问题的一种方法是将点击委托给父 div：

```
$("#container").on('click', '#div2, #div1 span', function(){
    alert("#div2");
}) 
```

演示：http: [//jsfiddle.net/Pwkqq/](http://jsfiddle.net/Pwkqq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T22:34:29.797

`#div1 span1`您可以使用一些 CSS进行点击“贯穿” ：

```
#div1 span{
  pointer-events: none;
} 
```

它应该在 FF 和 webkit 浏览器中工作，但你在 IE8 及更低版本中不走运。

工作示例：http: [//jsfiddle.net/W9jy5/12/](http://jsfiddle.net/W9jy5/12/)

# php - 指令 'magic_quotes_gpc' 在 PHP 5.3 和更高版本的 laravel 中已弃用

> ID：13545962
> 
> 赞同：5
> 
> 时间：2012-11-24T21:49:52.593
> 
> 标签：php, laravel

> 指令 'magic_quotes_gpc' 在 PHP 5.3 中已弃用，而在 laravel 中则更高

我无法访问服务器上的 php.ini 文件，所以我无法关闭 magic_quotes，我已经尝试过 .htaccess 方法它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T22:18:11.890

您应该要求您的托管服务提供商关闭魔术报价。

如果你不能这样做，你可以使用这个代码来删除你自己的魔术引号：

```
// Remove Magic Quotes

if (get_magic_quotes_gpc()) {
    $process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
    while (list($key, $val) = each($process)) {
        foreach ($val as $k => $v) {
            unset($process[$key][$k]);
            if (is_array($v)) {
                $process[$key][stripslashes($k)] = $v;
                $process[] = &$process[$key][stripslashes($k)];
            } else {
                $process[$key][stripslashes($k)] = stripslashes($v);
            }
        }
    }
    unset($process);
} 
```

只需将此代码放在引导级别的某个位置，或者您应该将其作为脚本中的第一个代码。

我有类似的情况，我打开了 PHP 5.3 和魔术引号。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:53:30.530

您的网站配置错误。请咨询您的托管服务提供商，如果他们没有将其关闭，请查找其他主机或 VPS。

# android - 正在运行的线程崩溃中的Android按钮

> ID：13545963
> 
> 赞同：0
> 
> 时间：2012-11-24T21:50:12.877
> 
> 标签：android, multithreading, sockets, button

谢谢我通过在按钮上使用切换值让它工作

```
public void onClick(View v) {
                               // TODO Auto-generated method stub

                             doit=1;
                             Log.e("ErrorButton","NextTime "+doit);
                           }
                       });  
                      if(doit==1)
                      {
                          Log.e("ErrorButton","If");
                      ////
                          out = new PrintWriter( new BufferedWriter( new OutputStreamWriter(socket.getOutputStream())),true); 
                        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));                

                        out.println("Helloo");

                        while ((text = in.readLine()) != null) {
                            finall += text;
                            Log.e("Test","Final: "+finall);
                          if(text=="quit")
                          {
                              socket.close();
                          }
                      Log.e("ClientActivity", "After Read "+doit+" "+finall);
                     // in.close();

                       doit=0;
                       Log.e("ClientActivity", "After If "+doit);
                      } 
```

每当我单击按钮时，代码都会执行其任务然后崩溃

这是我的安卓代码：

```
package com.example.socketclient;

import android.R.string;
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import java.io.BufferedReader;
import java.io.BufferedWriter; 
import java.io.IOException; 
import java.io.InputStream;
import java.io.OutputStreamWriter; 
import java.io.InputStreamReader;
import java.io.PrintWriter; 
import java.net.InetAddress; 
import java.net.Socket; 
import java.net.UnknownHostException; 
import android.util.Log; 

public class SocketCode extends Activity {
    private boolean connected = false;
    //private Handler handler = new Handler();
    public TextView txt;
    protected SocketCore Conn;
    public Button b;
    public EditText TextToSend;
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_socket_code);
        b = (Button)findViewById(R.id.button1);
        txt = (TextView)findViewById(R.id.textView1);
        TextToSend = (EditText)findViewById(R.id.editText1);
        //Conn = new SocketCore(this,txt);

        Thread cThread = new Thread(new ClientThread());
        cThread.start();

    }
    public class ClientThread implements Runnable {
        Socket socket ;
String finall;
        public void run() {
            try {
                InetAddress serverAddr = InetAddress.getByName("192.168.0.150");
                Log.d("ClientActivity", "C: Connecting...");
                socket= new Socket(serverAddr,4444);
                connected = true;
                while (connected) {
                    try {
                        Log.d("ClientActivity", "C: Sending command.");

                       b.setOnClickListener(new View.OnClickListener() {

                           public void onClick(View v) {
                               // TODO Auto-generated method stub

                               ClientHandler("Hex");

                           }
                       });  

                            Log.d("ClientActivity", "C: Sent.");

                    } catch (Exception e) {
                        Log.e("ClientActivity", "S: Error", e);
                    }
                    Thread.sleep(2000);
                }
                socket.close();
                txt.setText("Closed Socket");
                Log.d("ClientActivity", "C: Closed.");
            } catch (Exception e) {
                Log.e("ClientActivity", "C: Error", e);
                connected = false;
            }
        }

        public void ClientHandler(String Send)
        {
            try{
              PrintWriter   out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                       .getOutputStream())), true);
          out.println(Send);
           BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
           finall = in.readLine();

           txt.setText(finall);
            }
            catch(IOException e)
            {txt.setText("Exception");}
        }

    }

} 
```

这是错误日志：

```
11-24 23:44:12.920: E/AndroidRuntime(10046): FATAL EXCEPTION: main
11-24 23:44:12.920: E/AndroidRuntime(10046): android.os.NetworkOnMainThreadException
11-24 23:44:12.920: E/AndroidRuntime(10046):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:163)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at libcore.io.IoBridge.recvfrom(IoBridge.java:513)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at java.io.InputStreamReader.read(InputStreamReader.java:244)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at java.io.BufferedReader.fillBuf(BufferedReader.java:130)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at java.io.BufferedReader.readLine(BufferedReader.java:354)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at com.example.socketclient.SocketCode$ClientThread.ClientHandler(SocketCode.java:103)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at com.example.socketclient.SocketCode$ClientThread$1.onClick(SocketCode.java:66)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at android.view.View.performClick(View.java:4211)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at android.view.View$PerformClick.run(View.java:17267)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at android.os.Handler.handleCallback(Handler.java:615)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at android.os.Looper.loop(Looper.java:137)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at android.app.ActivityThread.main(ActivityThread.java:4898)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at java.lang.reflect.Method.invokeNative(Native Method)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at java.lang.reflect.Method.invoke(Method.java:511)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
11-24 23:44:12.920: E/AndroidRuntime(10046):    at dalvik.system.NativeStart.main(Native Method) 
```

注意：服务器端接受连接没有问题也接受来自客户端的数据，然后再崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:55:48.227

据此。[_](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html) 当应用程序尝试在其主线程上执行网络操作时引发的异常。

问题是这条线

```
PrintWriter   out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                   .getOutputStream())), true); 
```

当你做`b.setOnClickListener`你的`View.OnClickListener()`，因此`ClientHandler`由 UI 线程而不是生成的线程执行。稍后的 UI 线程尝试执行上述操作，其中包含`socket.getOutputStream()`异常

这主要是因为，像许多其他工具包一样，Android 工具包不是线程安全的。`UI Thread`执行所有`UI`操作。网络操作通常具有与之相关的延迟。如果 Ui 线程忙于网络，它如何在屏幕上呈现任何内容？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T22:06:15.830

更改此部分并添加 runOnUiThread：

```
runOnUiThread(new Runnable() 
{
    public void run() 
    {
        b.setOnClickListener(new View.OnClickListener() {...});
        // and also Logs
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:51:54.893

看看这个[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。根据官方文档，如果您使用 Honeycomb SDK 或更高版本，则不应将网络操作放在主/UI 线程上。允许针对早期 SDK 版本的应用程序在其主事件循环线程上进行联网，但强烈建议不要这样做，因为它会阻塞 UI 并可能导致 ANR。

您需要使用后台线程或`AsyncTask`进行网络操作以避免出现此异常。

作为一般规则，总是将耗时的任务放在后台线程或`AsyncTask`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T21:58:06.107

严格模式是用于检测 UI 线程中某些操作的开发者工具。阅读此内容以获取详细信息[http://developer.android.com/reference/android/os/StrictMode.html](http://developer.android.com/reference/android/os/StrictMode.html)

从 Android 版本 3.0 开始，默认启用严格模式。

# grails - 执行自定义验证时如何在 Grails 生成的表单中显示字段错误？

> ID：13545972
> 
> 赞同：1
> 
> 时间：2012-11-24T21:50:57.327
> 
> 标签：grails

我有一个 Grails 生成的表单，其中包含以下字段：

```
<div class="fieldcontain ${hasErrors(bean: applicantInstance, field: 'applicantName', 'error')} ">
<label for="applicantName">
    <g:message code="applicant.applicantName.label" default="Applicant Name" />

</label>
<g:textField name="applicantName" maxlength="50" value="${applicantInstance?.applicantName}"/>
</div> 
```

我想在正常的 Grails 验证之外执行服务器端验证，并在验证失败时重新显示记录。我尝试添加自己的 FieldError，但它不起作用。

```
def error = new org.springframework.validation.FieldError("Applicant", "applicantName", "This name fails the custom server-side validation")
applicantInstance.errors.fieldErrors.add(error) 
```

如何在我的 Grails 生成的表单中显示此字段错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:27:10.287

如果您想在域对象中声明的成本约束之外添加自定义验证，我建议您使用[命令对象](http://grails.org/doc/latest/guide/theWebLayer.html#commandObjects)

# c# - XmlDocument.Save OutOfMemory 异常

> ID：13545974
> 
> 赞同：3
> 
> 时间：2012-11-24T21:51:31.983
> 
> 标签：c#, xml, xmldocument

我一直在使用这个方便的功能来“美化”一个 xml 文档，以便使用缩进和换行符对其进行格式化。但是对于更大的文档（~1MB），出于某种原因，我在 doc.Save(writer) 处得到了 OutOfMemoryException。我该如何解决这个问题？

```
public static string BeautifyXmlDocument(XmlDocument doc)
{
    MemoryStream sb = new MemoryStream();
    XmlWriterSettings s = new XmlWriterSettings();
    s.Indent = true;
    s.IndentChars = "  ";
    s.NewLineChars = "\r\n";
    s.NewLineHandling = NewLineHandling.Replace;
    s.Encoding = new UTF8Encoding(false);
    XmlWriter writer = XmlWriter.Create(sb, s);
    doc.Save(writer);
    writer.Close();
    return Encoding.UTF8.GetString(sb.ToArray());
} 
```

堆栈跟踪：

```
at System.IO.MemoryStream.set_Capacity(Int32 value)
at System.IO.MemoryStream.EnsureCapacity(Int32 value)
at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
at System.Xml.XmlUtf8RawTextWriter.FlushBuffer()
at System.Xml.XmlUtf8RawTextWriter.RawText(Char* pSrcBegin, Char* pSrcEnd)
at System.Xml.XmlUtf8RawTextWriter.RawText(String s)
at System.Xml.XmlUtf8RawTextWriter.WriteFullEndElement(String prefix, String localName, String ns)
at System.Xml.XmlUtf8RawTextWriterIndent.WriteFullEndElement(String prefix, String localName, String ns)
at System.Xml.XmlWellFormedWriter.WriteFullEndElement()
at System.Xml.XmlElement.WriteTo(XmlWriter w)
at System.Xml.XmlElement.WriteContentTo(XmlWriter w)
at System.Xml.XmlElement.WriteTo(XmlWriter w)
at System.Xml.XmlElement.WriteContentTo(XmlWriter w)
at System.Xml.XmlElement.WriteTo(XmlWriter w)
at System.Xml.XmlElement.WriteContentTo(XmlWriter w)
at System.Xml.XmlElement.WriteTo(XmlWriter w)
at System.Xml.XmlElement.WriteContentTo(XmlWriter w)
at System.Xml.XmlElement.WriteTo(XmlWriter w)
at System.Xml.XmlElement.WriteContentTo(XmlWriter w)
at System.Xml.XmlElement.WriteTo(XmlWriter w)
at System.Xml.XmlDocument.Save(XmlWriter w) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:04:16.490

也许在关闭流之前尝试返回你的字符串，“使用”语句可以在这里提供帮助。这似乎适用于 5MB 的 xml 文件。

```
 public static string BeautifyXmlDocument(XmlDocument doc)
        {
            using (MemoryStream sb = new MemoryStream())
            {
                XmlWriterSettings s = new XmlWriterSettings();
                s.Indent = true;
                s.IndentChars = "  ";
                s.NewLineChars = "\r\n";
                s.NewLineHandling = NewLineHandling.Replace;
                s.Encoding = new UTF8Encoding(false);
                using (XmlWriter writer = XmlWriter.Create(sb, s))
                {
                    doc.Save(writer);
                    return Encoding.UTF8.GetString(sb.ToArray());
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T22:12:40.180

只要您的实现需要获取完整的文档字符串，总有人可以创建一个`XmlDocument`会导致`OutOfMemoryException`. 要*真正*解决这个问题，您需要转向使用`Stream`对象（`TextWriter`例如任何对象），以便在任何给定时间只有一小部分文档真正在内存中。如果您提供有关如何使用美化字符串的更多详细信息，我或其他人可能会想出一些可以提供帮助的东西。

另一方面，如果您无法更改实现以避免将整个字符串保存在内存中，则应将发布的实现更改为使用 a`StringWriter`并将其传递给`XmlWriter.Create`。这至少消除了一些内存压力，因为您不会同时在内存中拥有 the`MemoryStream` *和*final `string`：

```
public static string BeautifyXmlDocument(XmlDocument doc)
{
    using (StringWriter sw = new StringWriter())
    {
        XmlWriterSettings s = new XmlWriterSettings();
        s.Indent = true;
        s.IndentChars = "  ";
        s.NewLineChars = "\r\n";
        s.NewLineHandling = NewLineHandling.Replace;
        s.Encoding = new UTF8Encoding(false);
        using (XmlWriter writer = XmlWriter.Create(sw, s))
        {
            doc.Save(writer);
        }
        return sw.ToString();
    }
} 
```

# php - 代码更改导致下拉菜单中的选项不出现

> ID：13545975
> 
> 赞同：0
> 
> 时间：2012-11-24T21:51:38.357
> 
> 标签：php, mysqli

好的，如果您查看 editsessionteacher.php 脚本，它包含以下代码，当它在下拉菜单中显示以下值时，该代码起作用：

```
$outputmodule = ""; 

        $moduleInfo = explode("_", $_POST['modules']);
        $moduleId = $moduleInfo[0];
        $moduleName = $moduleInfo[1];
        $outputmodule = sprintf("<p><strong>Module:</strong> %s - %s</p>", $moduleId, $moduleName); 
```

module.php 是这样的：

```
$course = isset($_POST['course']) ? $_POST['course'] : ''; 

$sql = "
SELECT cm.CourseId, cm.ModuleId,
c.CourseName,
m.ModuleName
FROM Course c
INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
JOIN Module m ON cm.ModuleId = m.ModuleId
WHERE
(c.CourseId = ?)
ORDER BY c.CourseId, m.ModuleId
"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->bind_param("s",$course);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

$moduleHTML  = "";  

     while($sqlstmt->fetch()) { 
         $moduleHTML .= sprintf('<option value="%1$s_%2$s">%1$s - %2$s</option>'.PHP_EOL, $dbModuleId, $dbModuleName);
    } 

echo $moduleHTML; 

 $sqlstmt->execute(); 
```

**编辑：**

但是我想将 moduleNo 添加到下拉菜单中，所以当我尝试将代码更改为下面的代码时，它不起作用：

编辑sessionteacher.php：

```
 $sql = "SELECT CourseId, CourseNo, CourseName FROM Course"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

 $courses = array(); // easier if you don't use generic names for data 

 $courseHTML = "";  
 $courseHTML .= '<select name="courses" id="coursesDrop" onchange="getModules();">'.PHP_EOL; 
 $courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

 while($sqlstmt->fetch()) 
 { 
     $courseno = $dbCourseNo;
     $course = $dbCourseId;
     $coursename = $dbCourseName; 
     $courseHTML .= "<option value='".$course."'>" . $courseno . " - " . $coursename . "</option>".PHP_EOL;  
  } 

  $courseHTML .= '</select>'; 

    $moduleHTML = "";  
    $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
    $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
    $moduleHTML .= '</select>'; 

    ?>

    <script type="text/javascript">

    function getModules() { 
    var course = jQuery("#coursesDrop").val(); 
    jQuery('#modulesDrop').empty(); 
    jQuery('#modulesDrop').html('<option value="">Please Select</option>'); 
    jQuery.ajax({ 
    type: "post", 
    url:  "module.php", 
    data: { course:course }, 
    success: function(response){ 
    jQuery('#modulesDrop').append(response); 
    } 
    }); 

    }

    </script> 

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation();">
<table>
<tr>
<th>Course: <?php echo $courseHTML; ?></th>
<th>Module: <?php echo $moduleHTML; ?></th>
</tr>
</table>
<p><input id="moduleSubmit" type="submit" value="Submit Course and Module" name="moduleSubmit" /></p>
</form>

<?php

if (isset($_POST['moduleSubmit'])) {    

$outputmodule = ""; 

$moduleInfo = explode("_", $_POST['modules']);
$moduleId = $moduleInfo[0];
$moduleNo = $moduleInfo[1];
$moduleName = $moduleInfo[2];
$outputmodule = sprintf("<p><strong>Module:</strong> %s - %s</p>", $moduleNo, $moduleName);

.... 
```

模块.php：

```
 $course = isset($_POST['course']) ? $_POST['course'] : ''; 

    $sql = "
    SELECT cm.CourseId, cm.ModuleId, c.CourseNo, m.ModuleNo,
    c.CourseName,
    m.ModuleName
    FROM Course c
    INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
    JOIN Module m ON cm.ModuleId = m.ModuleId
    WHERE
    (c.CourseId = ?)
    ORDER BY c.CourseId, m.ModuleId
    "; 

     $sqlstmt=$mysqli->prepare($sql);

     $sqlstmt->bind_param("s",$course);

     $sqlstmt->execute(); 

     $sqlstmt->bind_result($dbCourseId,$dbModuleId,$dbCourseNo,$dbModuleNo,$dbCourseName,$dbModuleName);

    $moduleHTML  = "";  

$moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
$moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

 while($sqlstmt->fetch()) { 
     $moduleHTML .= sprintf('<option value="%1$s">%2$s - %3$s</option>'.PHP_EOL, $dbModuleId, $dbModuleNo, $dbModuleName);
} 

$moduleHTML .= '</select>'; 

echo $moduleHTML; 
```

我的问题是，当我更改代码以添加模块编号时，为什么下拉菜单中没有显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:53:54.850

我不明白为什么您的下拉菜单没有显示，但我确实看到您的修改存在问题`module.php` `sprintf()`以及它将如何显示在您的`editsessionteacher.php`.

原始`module.php` `sprintf()`传递的 2 个值使用 '_' 连接

```
$moduleHTML .= sprintf('<option value="%1$s_%2$s">%1$s - %2$s</option>'.PHP_EOL, $dbModuleId, $dbModuleName);
                                       --------- 
```

和你的`editsessionteacher.php` `explode()`那两个价值观

```
$moduleInfo = explode("_", $_POST['modules']);
$moduleId = $moduleInfo[0];
$moduleName = $moduleInfo[1]; 
```

但是您的修改`module.php` `sprintf()`仅传递了 1 个值-

```
$moduleHTML .= sprintf('<option value="%1$s">%2$s - %3$s</option>'.PHP_EOL, $dbModuleId, $dbModuleNo, $dbModuleName);
                                      ----- 
```

但你`editsessionteacher.php`正在尝试`explode()`3 个值

```
$moduleInfo = explode("_", $_POST['modules']);
$moduleId = $moduleInfo[0];
$moduleNo = $moduleInfo[1];
$moduleName = $moduleInfo[2]; 
```

因此，根据您的`editsessionteacher.php` `explode()`，尝试将您的更新`module.php` `sprintf()`为 -

```
$moduleHTML .= sprintf('<option value="%1$s_%2$s_%3$s">%2$s - %3$s</option>'.PHP_EOL, $dbModuleId, $dbModuleNo, $dbModuleName);
                                       -------------- 
```

# android - 将数据从自定义视图传递到活动，反之亦然

> ID：13545978
> 
> 赞同：1
> 
> 时间：2012-11-24T21:52:12.053
> 
> 标签：android, view, android-activity, fragment

我有一个在其 XML 文件中加载 2 个片段的活动，这两个片段有一个自定义视图。

这个视图是一个操纵杆，所以它有一个 onTouch 方法，但是我想从视图中获取 X 和 Y 值以在 Activity 中使用。

我已经尝试在片段中获取 ActivityContext 并将其传递到视图中，但这并没有给我实例。

我也尝试过从 Activity 访问视图，但没有任何运气。

任何人都可以推荐一种传递这些数据的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:01:54.653

有一篇很好的关于通过 Activity 进行片段到片段通信的培训[文章。](http://developer.android.com/training/basics/fragments/communicating.html)

您基本上应该让活动实现自定义回调接口。获取活动的最佳方式是在片段的 onAttach(Activity activity) 方法中。

据我了解，您希望将 onTouchListener 添加到您的视图中，这反过来将调用您使用所需值实现的回调。

# python - 如何将数据放入树视图？

> ID：13545979
> 
> 赞同：1
> 
> 时间：2012-11-24T21:52:17.513
> 
> 标签：python, list, treeview

我在 python 列表中有一个数据表，数据如下所示：

```
[    
{Artist='Madonna', album='Ray of Light', title='Substitute for love'},    
{Artist='Madonna', album='Ray of Light', title='Frozen'},    
{Artist='Madonna', album='Something to remember', title='You'll see'},    
{Artist='Madonna', album='Bedtime stories', title='Secret'},    
{Artist='U2', album='The Joshua Tree', title='Where the streets have no name'}, 
{Artist='U2', album='The Joshua Tree', title='I still haven'ts found...'},    
{Artist='U2', album='The Joshua Tree', title='With or without you'},    
{Artist='U2', album='Acthung Baby', title='One'},    
{Artist='U2', album='Acthung Baby', title='Until the end of the world'}    
] 
```

我想把它放到一个树视图中（特别是一个 QTreeWidget），所以它看起来像这样：

*   麦当娜

    *   光射线

        *   代替爱
        *   冷冻
    *   要记住的东西
        *   你会看到的
    *   睡前故事
        *   秘密
*   U2

    *   约书亚树
        *   哪里的街道..
        *   我还没...
    *   宝贝
        *   一
        *   直到结束。。

我不知道如何以这种方式对其进行编码：我想到了嵌套循环，但找不到解决方案。有没有人为这个查询设计过解决方案，请用任何语言？如果不是代码，我将需要逻辑。然后任何人都可以使用自己的编程语言来实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:13:42.980

[您可以使用嵌套的defaultdicts](http://docs.python.org/2/library/collections.html#collections.defaultdict)将记录列表转换为嵌套字典。

```
from collections import defaultdict

data = [ {'Artist':'Madonna', 'album':'Ray of Light', 'title':'Substitute for love'},
         ....
         {'Artist':'U2', 'album':'Acthung Baby', 'title':'Until the end of the world'}
      ]   

tree_data = defaultdict(lambda: defaultdict(list))

for d in data:
    tree_data[d['Artist']][d['album']].append(d['title']) 
```

一旦您拥有此表单中的数据，就可以轻松地将其打印成您需要的格式。

这是您示例的简单方法：

```
for artist in tree_data.keys():
    print(artist)
    for album, titles in tree_data[artist].iteritems():
        print("\t" + album)
        for title in titles:
            print ("\t\t" + title) 
```

# php - 将图像文件上传到数据库

> ID：13545984
> 
> 赞同：0
> 
> 时间：2012-11-24T21:52:52.873
> 
> 标签：php

我有这样的html代码： -

```
<form id="form" name="form" action="banner_ad_post.php" method="post" enctype="multipart/form-data">
                <p>
                  <label for="banner_name"><font color="#FF0000"> * </font>Banner Name: </label>
                  <input type="text" name="banner_name" id="banner_name" value="" maxlength="100" required="required"/>
                </p>
                <p>
                  <label for="Banner_website_url"><font color="#FF0000"> * </font>Banner website Url: </label>
                  <input type="url" name="banner_site_url" id="banner_site_url" value="" maxlength="100" required="required"/>
                </p>

                <p>
                  <label for="banner_image_url">Banner Image Url: </label>
                  <input type="file" name="file" id="file" value="" accept="image" placeholder="Browse from hard disk" onchange="img_path()"/> &nbsp;
                   <font color="#FF0000"> OR</font> &nbsp;
                  <input type="url" name="banner_image_url" id="banner_image_url" value="" maxlength="100" placeholder="Enter the url from website." onchange="validate()"/> &nbsp; 

                </p>
                <p>
                <label for="submit"> </label>
                  <input type="submit" id="submit" name="submit" value="Submit" onclick="preview()" />
                </p>
              </form> 
```

和 php 脚本如下： -

```
<?php 
     if(isset($_POST['banner_name']) && isset($_POST['banner_site_url']) && isset($_POST['banner_image_url']) && isset($_FILES['file']['name']))
     {
        $banner_name=$_POST['banner_name'];
        $banner_name=strip_tags($banner_name);
        $banner_site_url=$_POST['banner_site_url'];
        $banner_site_url=strip_tags($banner_site_url);
        $banner_image_url=$_POST['banner_image_url'];
        $banner_image_url=strip_tags($banner_image_url);
        $name=$_FILES['file']['name'];

        $size=$_FILES['file']['size'];
        $type=$_FILES['file']['type'];
        $tmp_name=$_FILES['file']['tmp_name'];
        $error=$_FILES['file']['error'];
        $maxsize = 512000;
        $location='uploads/';
        if(!empty($banner_image_url))
            {
            $file_location=$banner_image_url;
            ?>
            <div id="img"> 
            <img src="<?php echo $file_location?>" align="left" width="200px" height="200px">
            </div>
            <?php
            } elseif (!empty($name))
            {
            $file_location=$location.$name;
            ?>
                    <div id="img">  
                    <img src="http://localhost/leadstool/<?php echo $file_location?>" align="left" width="200px" height="200px">
                    </div>

                    <?php 
            }

          if(!empty($banner_name) && !empty($banner_site_url))
          {
             $query="INSERT INTO `banner_ad` VALUES('','$id','$banner_name','$file_location','$banner_site_url','0',now())";
             if($query_run=mysql_query($query))
             {
                if($size <= $maxsize)
                {                         
                  if(move_uploaded_file($tmp_name,$location.$name))
                    {
                    echo'<font color="green">File uploaded & has been sent for approval.</font>';
                    } 
                    else 
                    {
                    echo'<font color="red">File can not be uploaded.</font>';

                    }
                } else {
                echo'<font color="green">Your information has been uploaded and has been sent for approval.</font>';
                }
             }
             else
             {
                  echo'<font color="red"> The request can not be performed.</font>';
             }
         } 
         else 
         {
          echo'<font color="red">These fields are mandatory.</font>';
         }
    }

     ?> 
```

这里，问题是由于某些原因 move_uploaded_file() 方法无法上传数据库中的文件。但它仍然会给出类似“文件已上传并已发送以供批准”的输出。现在，我不明白我到底错过了什么？

任何帮助将不胜感激......提前谢谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:14:32.503

对不起！这个问题没有编程错误。只是一个简单的逻辑错误。

我正在重新发布代码...我已经编辑以纠正问题。

```
if($size <= $maxsize)
                {                         
                  if(move_uploaded_file($tmp_name,$location.$name))
                    {
                    echo'<font color="green">File uploaded & has been sent for approval.</font>';
                    } 
                    else 
                    {
                    echo'<font color="red">File can not be uploaded.</font>';
                    ?>
                    <div id="img">  
                    <img src="http://localhost/leadstool/<?php echo $file_location?>" align="left" width="200px" height="200px">
                    </div>

                    <?php 

                    }
                } else {
                echo'<font color="red">File size must be less than 500KB.</font>';
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T22:43:56.330

你也可以这样做。它工作得很好：

图像通过表格到数据库：

表单页面：

```
<form enctype="multipart/form-data" action="insert_image.php" method="post" name="changer">
<input name="image" accept="image/jpeg" type="file">
<input value="Submit" type="submit">
</form> 
```

插入数据库页面：

```
<?php

  include 'conf.php';

  if ($_FILES["image"]["error"] > 0)
  {
     echo "<font size = '5'><font color=\"#e31919\">Error: NO CHOSEN FILE <br />";
     echo"<p><font size = '5'><font color=\"#e31919\">INSERT TO DATABASE FAILED";
   }
   else
   {
     move_uploaded_file($_FILES["image"]["tmp_name"],"images/" . $_FILES["image"]["name"]);
     echo"<font size = '5'><font color=\"#0CF44A\">SAVED<br>";

     $file="images/".$_FILES["image"]["name"];
     $sql="INSERT INTO database_table (table_column_1, table_column_2) VALUES ('','$file')";

     if (!mysql_query($sql))
     {
        die('Error: ' . mysql_error());
     }
     echo "<font size = '5'><font color=\"#0CF44A\">SAVED TO DATABASE";

   }

   mysql_close();

?> 
```

# python - 子类 __init__ 覆盖超类的

> ID：13545985
> 
> 赞同：2
> 
> 时间：2012-11-24T21:52:58.450
> 
> 标签：python

我有一个超类和一个子类。超类包含一个包含一些属性的构造函数，子类也应该有一个初始化一些属性的构造函数。然而，问题是，当我在我的子类中创建一个 __init__ 方法时，它会覆盖超类的构造函数。

如何解决这个问题，以便子类的构造函数不会覆盖超类的构造函数方法？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:54:55.333

让子类调用超类`__init__`方法。您可以显式执行此操作，也可以使用该`super`函数执行此操作。对于像单继承这样的简单情况，这两种方法是等价的。

```
class Subclass(Superclass):
    def __init__(self):
        Superclass.__init__(self) 

class Subclass(Superclass):
    def __init__(self):
        super(Subclass, self).__init__() 
```

# c# - 出现错误“'targetFramework' 属性当前引用的版本晚于已安装的 .NET Framework 版本”

> ID：13545986
> 
> 赞同：9
> 
> 时间：2012-11-24T21:53:03.097
> 
> 标签：c#, .net, asp.net-mvc, iis, asp.net-web-api

我在 IIS7 服务器上发布了一个 ASP.NET Web API。当我在本地测试它时。我在下面收到一个框架错误：

> 配置错误
> 
> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：Web.config 文件元素中的“targetFramework”属性 `<compilation>`仅用于面向 .NET Framework 4.0 及更高版本（例如，“ `<compilation targetFramework="4.0">`”）。'targetFramework' 属性当前引用的版本晚于已安装的 .NET Framework 版本。指定 .NET Framework 的有效目标版本，或安装所需版本的 .NET Framework。
> 
> 源错误：
> 
> 第 20 行： `</appSettings>`
> 第 21 行： `<system.web>`
> 第 22 行： `<compilation targetFramework="4.5" />`
> 第 23 行： `<httpRuntime targetFramework="4.5" />`
> 第 24 行： `<authentication mode="None" />`

我不太确定它出了什么问题，因为我有一个使用框架 4.0 在服务器上运行的 ASP.NET 网站。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-11T11:19:51.003

[成功安装后从这里](https://www.microsoft.com/en-us/download/details.aspx?id=30653)下载 .net 4.5 运行命令提示符（以管理员身份）并找到此地址：

> %windir%\Microsoft.NET\Framework\v4.0.30319

现在运行这个命令：

> aspnet_regiis -iru

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-08T19:11:04.980

或者您可以将您的应用程序框架从 更改`4.5`为`4.0`您可以通过右键单击来执行此操作`project >> Properties >> Target Framework`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-23T04:18:11.837

> 指定 .NET Framework 的有效目标版本，或**安装所需的 .NET Framework 版本**。

您需要在运行网站的服务器上安装 .NET 4.5。

# paypal - 我可以在沙盒中制作一个虚假的 PayPal 捐赠按钮进行测试吗？

> ID：13545988
> 
> 赞同：3
> 
> 时间：2012-11-24T21:53:15.297
> 
> 标签：paypal, paypal-sandbox, donations

我想使用转到沙盒帐户的 PayPal 捐赠按钮设置一个虚假捐赠页面。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:57:26.103

您需要注册此页面：[https ://developer.paypal.com/](https://developer.paypal.com/)

然后你可以像这样使用 paypal API：

```
<html>
<head>
<title>Test Page</title>
</head>
<body>

<p>This is a test HTML file.</p>

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">

<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----...[Encrypted message]...-----END PKCS7-----">

<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">

</form>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T22:39:30.160

在沙盒系统中发送的任何电子邮件都不会发送到实际的电子邮件。他们只会转到您的 developer.paypal.com 帐户中的“测试电子邮件”选项卡。

也就是说，您始终可以创建一个新的买家或卖家账户，然后使用该账户。您在创建帐户时创建密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-26T15:19:01.770

创建沙盒帐户后，您可以从沙盒贝宝按钮网址获取“假”捐赠按钮：[https ://www.sandbox.paypal.com/buttons/](https://www.sandbox.paypal.com/buttons/)

在我们发现这一点之前，我们无法测试捐赠按钮。

# android - ActionBarSherlock 选项卡

> ID：13545989
> 
> 赞同：1
> 
> 时间：2012-11-24T21:53:22.630
> 
> 标签：android, actionbarsherlock

我必须使用 ActionBarSherlock 在我的应用程序中实现选项卡。我在[这里](http://comfreek.blogspot.com/2012/06/actionbars-and-tabs-under-android-2x.html)遵循这个例子。现在我想向其中一个片段添加按钮，并对其执行操作。我该怎么做 ？假设这是按钮所在的布局

```
public class AFragment extends SherlockFragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.hello, container, false);
    }
} 
```

我如何从视图中读取按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T23:19:51.683

```
public class AFragment extends SherlockFragment {
private Button button;    
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    // Inflating the layout view  to this fragment
    View view = inflater.inflate(R.layout.hello, container, false);
    button = (Button) view.findViewById(R.id.button_id);

    button.setOnClickListener(this);

    return view;
   }
    @Override onClick() {
       switch(v.getId()_ {
          case R.id.button_id:
                       //Your logic for button goes here
                       break;
       }
    }
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T22:08:40.820

我相信这就是它的完成方式。据我所知。我还没有完全让我的工作，但不认为我的问题在这里。

```
 private Button button;    

    public class AFragment extends SherlockFragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        View inflater = inflate(R.layout.hello, container, false);
        button = (Button) inflater.findViewById(R.id.reminder_slider);
        button setOnItemClickListener(new OnClickListener() {
        //do stuff on item click aka @Override onClick()
        }
        return inflater;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T23:18:52.957

```
private Button button;    

    public class AFragment extends SherlockFragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.hello, container, false);
        //finding the button by ID inside the inflated view
        button = (Button) view.findViewById(R.id.btnid);
        //setting an event
        button.setOnItemClickListener(new OnClickListener() {

        });
        return view;
    } 
```

# eclipse - 在eclipse中导出和创建war时的JDK版本

> ID：13545990
> 
> 赞同：0
> 
> 时间：2012-11-24T21:53:22.730
> 
> 标签：eclipse, compiler-construction, java

我的问题如下：

如果您在 [window->preferences->java->compiler] 中设置了 Java 1.6 编译器

当你这样做时[右键单击项目->导出为->战争]

或者

[右键单击项目->导出为-> jar]

它是用 Java 1.6 编译器编译的吗？还是用 JAVA_HOME 指向的那个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:27:20.153

导出操作（JAR 或 WAR 或任何东西）与构建过程无关。

导出时，工作台首先确保构建所有相关项目。它通过简单地触发 Eclipse 事件来完成构建。您的项目将使用它们配置为构建的任何内容，使用它们被配置为编译的编译器设置来构建。用于此目的的编译器不一定是您`JAVA_HOME`所指的那个；它是在工作台的首选项中定义的。

构建完成后，导出处理程序将文件从工作台（现在包括`.class`每个构建项目的文件）实际导出到存档（JAR、WAR 等）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:59:14.377

它使用首选项中提到的设置进行设置。在您的情况下，您提到而不是`Java_Home`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T04:21:02.870

解压缩你的战争和 jar 并检查你的清单文件，以获取 build-jdk 行。

# wordpress - widget_text 小部件不适用于简码

> ID：13545991
> 
> 赞同：1
> 
> 时间：2012-11-24T21:53:23.043
> 
> 标签：wordpress, text, filter, widget, shortcode

大家好，我对在 text_widget 中不起作用的短代码有一个大问题。我已经添加了适当的代码

```
add_filter( 'widget_text', 'shortcode_unautop');
add_filter( 'widget_text', 'do_shortcode'); 
```

我仍然不成功，是否有任何我可以使用或建议自己解决此问题的故障排除技术？

简码也可以在 the_content 和 the_excerpt 中完美运行。

```
add_filter('the_content', 'do_shortcode');  
add_filter('the_excerpt', 'do_shortcode'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:16:37.310

尝试添加优先级。

```
add_filter( 'widget_text', 'shortcode_unautop');
add_filter( 'widget_text', 'do_shortcode', 11); 
```

如果不成功 - 尝试禁用所有插件并将主题更改为默认值 - 尽管统计上存在其中一个插件出于某种不明原因而删除此过滤器的可能性，但存在轻微的可能性......

# c# - 过程或函数在我的存储过程中指定的参数过多

> ID：13545995
> 
> 赞同：0
> 
> 时间：2012-11-24T21:53:30.543
> 
> 标签：c#, sql

我有这个存储过程，当我从我的 c# 代码调用时，我得到了错误，我不知道是什么问题。

存储过程

```
ALTER procedure [dbo].[modProducto]    

Store Procedure    
@id integer,    
@descripcion varchar(100),    
@tipoproducto integer,  
@existencia integer,  
@precio money  
AS  
 update producto  
set descripcion = @descripcion, idtipoproducto = @tipoproducto, existencia = @existencia, precio = @precio  
where idproducto = @id  
select 'Producto modificado correctamente' 
```

C# 代码

```
MessageBox.Show(cx.ejecutarOtro("modProducto " +    
                                txtProducto.Text + ",'" +  
                                txtDescripcion.Text + "'," +  
                                (comboProducto.SelectedIndex + 1) + "," +  
                                numericUpDownExistencia.Text + "," +  
                                txtPrecioProducto.Text  
                               )); 
```

*   `cx.ejecutarotro`是执行 SQL 查询的方法。
*   `txtProducto`,`txtDescripcion`并且`txtPrecioProducto`是文本框。
*   `Numericupdownexistencia`是一个`NumericUpDown`盒子。
*   `comboProducto`是一个下拉列表。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T22:04:17.157

问题可能是数字的 i18n 格式 - 逗号与句点。答案是：正确解析输入，并使用参数。绝不。绝不。永远不要将用户输入连接到 SQL 中。我有没有提到过？