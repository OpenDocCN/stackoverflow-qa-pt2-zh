# StackOverflow 问答 14955000-14955999

# arrays - selenium ide 循环遍历数组变量

> ID：14955000
> 
> 赞同：4
> 
> 时间：2013-02-19T10:18:03.820
> 
> 标签：arrays, testing, selenium, selenium-ide

在 selenium ide 中，我构建了一个测试用例，其中一个数组变量存储值。我使用 while 循环来打印这些数组变量。

![在此处输入图像描述](../Images/54517635aa9df80aea66add1cca88000.png)

在这里，我使用“getEval | myarray[0]”来打印第一个值，即“postgresql”。但未列出该值。没有错误发生。

```
[info] Executing: |getEval | myarray = new Array('postgresql','mysql'); | |
[info] script is: myarray = new Array('postgresql','mysql');
[info] Executing: |getEval | index=0; | |
[info] script is: index=0;
[info] Executing: |while | index < myarray.length; | |
[info] Executing: |getEval | myarray[0] | mynewvalue |
[info] script is: myarray[0]
[info] Executing: |echo | ${mynewvalue} | |
[info] echo: ${mynewvalue}
[info] Executing: |getEval | index++; | |
[info] script is: index++;
[info] Executing: |endWhile | | |
[info] Executing: |while | index < myarray.length; | |
[info] Executing: |getEval | myarray[0] | mynewvalue |
[info] script is: myarray[0]
[info] Executing: |echo | ${mynewvalue} | |
[info] echo: ${mynewvalue}
[info] Executing: |getEval | index++; | |
[info] script is: index++;
[info] Executing: |endWhile | | |
[info] Executing: |while | index < myarray.length; | | 
```

现在再次在同一个测试用例中，我将“getEval | myarray[0]”更改为“getEval | myarray[${index}]”以按循环索引列出数组值。

![在此处输入图像描述](../Images/e4fce97878fe3895edda5d5bd19b43dd.png)

现在我收到以下错误：

```
[info] Executing: |getEval | myarray = new Array('postgresql','mysql'); | |
[info] script is: myarray = new Array('postgresql','mysql');
[info] Executing: |getEval | index=0; | |
[info] script is: index=0;
[info] Executing: |while | index < myarray.length; | |
[info] Executing: |getEval | myarray[${index}] | mynewvalue |
[info] script is: myarray[${index}]
[error] Threw an exception: missing ] in index expression 
```

我只需要 echo 打印“postgresql”，“mysql”是单独的新行。我对硒很陌生，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T07:55:20.550

这对我有用，希望它对其他人也有帮助......

![在此处输入图像描述](../Images/529c8f2cf2d60290f3e2977ceedc3ae5.png)

```
[info] Executing: |storeEval | new Array("postgresql","mysql"); | myarray
[info] script is: new Array("postgresql","mysql");
[info] Executing: |getEval | index=0;
[info] script is: index=0;
[info] Executing: |while | index < storedVars['myarray'].length;
[info] Executing: |storeEval | index | temp
[info] script is: index
[info] Executing: |echo | javascript{storedVars['myarray'][storedVars['temp']]}
[info] echo: postgresql
[info] Executing: |getEval | index++; 
[info] script is: index++;
[info] Executing: |endWhile | | |
[info] Executing: |while | index < storedVars['myarray'].length; | 
[info] Executing: |storeEval | index | temp |
[info] script is: index
[info] Executing: |echo | javascript{storedVars['myarray'][storedVars['temp']]}
[info] echo: mysql
[info] Executing: |getEval | index++; | |
[info] script is: index++;
[info] Executing: |endWhile | | |
[info] Executing: |while | index < storedVars['myarray'].length; 
```

这是用于剪切和粘贴的源 HTML 中的上述内容：

```
<tr>
<td>storeEval</td>
<td>new Array(&quot;postgresql&quot;,&quot;mysql&quot;);</td>
<td>myarray</td>
</tr>
<tr>
<td>getEval</td>
<td>index=0;</td>
<td></td>
</tr>
<tr>
<td>while</td>
<td>index &lt; storedVars['myarray'].length</td>
<td></td>
</tr>
<tr>
<td>storeEval</td>
<td>index</td>
<td>temp</td>
</tr>
<tr>
<td>echo</td>
<td>javascript{storedVars['myarray'][storedVars['temp']]}</td>
<td></td>
</tr>
<tr>
<td>getEval</td>
<td>index++;</td>
<td></td>
</tr>
<tr>
<td>endWhile</td>
<td></td>
<td></td>
</tr> 
```

# excel - Excel 公式 - 两个或多个不同的单元格重复相同的文本

> ID：14955003
> 
> 赞同：1
> 
> 时间：2013-02-19T10:18:12.653
> 
> 标签：excel

我需要一个公式的帮助。在 AI 列中有一个数字或文本列表。在 B 列中，我有另一个数字或文本列表，但例如在单元格 B 中，10 与单元格 A55 中的数字或文本相同。我需要 C10 列中的公式来显示单元格 B10 和 A55 相同。

A 列和 B 列包含不同的数据（文本或数字），但 B 列中的数据可能会重复为 A 列中的数据。在 A 列中，我在 B 列中有大约 250 个不同的数据，最多 15 个，所以我需要C 列的公式，将指示 B 列中的值是否重复。

我需要excel 2003的公式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:34:58.960

这将为您提供在 A 列中找到的第一个对象的行号，该对象在 B 列的单元格中重复。

=IFERROR(匹配(B1,A:A,0),"")

![在此处输入图像描述](../Images/a253958f8698d411a8e62e91293721e3.png)

用你的数字：

![在此处输入图像描述](../Images/2d1d67282bd8d244baca8aceaf32d9b6.png)

# node.js - NodeJs 响应客户端的 url 请求到另一个

> ID：14955005
> 
> 赞同：1
> 
> 时间：2013-02-19T10:18:17.877
> 
> 标签：node.js, socket.io

我正在管理一种从“/js/”开始的客户端请求，这意味着服务器端的根文件夹或者可能位于“/public/js/”中以供进一步使用。好的，问题是我收到了这条消息：

```
//server side
GET /js/socket.io/socket.io.js 304 7ms  

// client side 
Uncaught ReferenceError: require is not defined     
Uncaught ReferenceError: io is not defined 
```

[x] 来源

```
// index.html
<script src="/js/socket.io/socket.io.js"></script>

// app.js   
app.get('/js/*', function (req, res) {
    res.sendfile(__dirname + req.url.substr('/js'.length));
}); 
```

但是当我更改为固定路径时它确实有效。

[o] 来源

```
// index.html
<script src="/socket.io/socket.io.js"></script>

// app.js   
app.get('/socket.io/socket.io.js', function (req, res) {
    res.sendfile(__dirname + '/socket.io/socket.io.js');
}); 
```

这有点奇怪，不是吗？谁能弄清楚哪里错了。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:27:16.890

你对这个回应的确切问题是什么？

`304`状态码表示，这`Not modified`意味着您的浏览器可以使用缓存版本，`/js/socket.io/socket.io.js`而不是服务器必须再次将其发送到浏览器（因此，节省了带宽）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:40:09.043

当您在应用程序中需要 socket.io 时，它会设置一个处理程序来拦截对`/socket.io/socket.io.js`( [source](https://github.com/LearnBoost/socket.io/blob/0d5200ed696f4dc442efd00ab5d09b004294b762/lib/index.js#L145) ) 的请求。这就是第二个示例有效的原因。

实际上，您可以删除以下行`app.js`：

```
app.get('/socket.io/socket.io.js', function (req, res) {
  res.sendfile(__dirname + '/socket.io/socket.io.js');
}); 
```

# mysql - 将唯一记录插入 MS access 2007

> ID：14955008
> 
> 赞同：3
> 
> 时间：2013-02-19T10:18:27.047
> 
> 标签：mysql, ms-access

所以我一直在环顾四周，并没有找到太多东西。我提前道歉，因为这可能是错误的做法，但事实就是如此。

所以我必须跟踪同事完成的课程。这是通过提供 MS 访问数据库的 Excel 表完成的。有 3 个字段提供给我。

全名、课程名称和完成日期。

我知道我在这里没有主键，所以我试图创建一个查询，它只会附加从 Excel 表中提取的唯一记录。我可以基于单个字段执行此操作，但需要帮助使我的查询仅在全名和课程名称不相同时附加它，例如

`Joe Somebody, Course#1, 14feb13`

`Joe Somebody, Course#2, 15feb13`

`Joe Somebody, Course#1, 15feb13`

我需要一个查询，它将前 2 行附加到表中，但由于该人已经完成了课程#1，因此忽略了第三行。这就是我到目前为止所拥有的，基本上将我的姓名字段变成了主键。

```
INSERT INTO table [Full name], [Course], [Date]

SELECT excel_table.[Full name], excel_table.[Course], excel_table.[Date]

FROM excel_table

WHERE excel_table.[Full name] Not in (SELECT table.[Full Name] FROM table) 
```

最后我也有一些 Is Not Null 的东西，但我认为这与问题无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:26:25.350

为了避免重复，最简单的方法是添加索引。在这种情况下，复合主键似乎就是答案。只需选择要包含在复合键中的所有字段，然后单击主键按钮：

![添加复合主键](../Images/08ee610370f9d652043de04ad30658df.png)

您将不允许在包含主键的任何字段中为空，但只要字段组合不匹配，每个字段中的数据都可以重复。所以：

```
Joe Somebody, Course#1, 14feb13     <-- good
Joe Somebody, Course#2, 15feb13     <-- good
Joe Somebody, Course#1, 15feb13     <-- fails
Joe SomebodyElse, Course#1, 14feb13 <-- good 
```

现在，如果您使用查询设计窗口运行普通的追加查询构建，如果该记录在 Excel 导入表中存在两次或已在 Access 中存在，您将收到错误：

![追加错误](../Images/82401101c734d777dc3e6ae3519a42d8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:02:26.213

您实际上并不需要复合主键。事实上，在 Access 中有一些地方鼓励您*不要*使用复合主键。您可以使用简单的整数主键创建 Access 表：

```
create table CourseCompletions (
  ID autoincrement primary key
, FullName varchar(100)
, CourseName varchar(100)
, CompletionDate date
); 
```

然后，您可以从 Excel 文件中获取所有数据：

```
insert into CourseCompletions (
, FullName
, CourseName
, CompletionDate
) select
  [Full name]
, [Course]
, [Date]
from excel_table; 
```

这将为输入 Excel 表的每一行提供一个唯一编号，并将其存储在 Access 表中。现在您需要决定如何拒绝 CourseCompletions 表中的冲突行。（以下查询仅显示您决定*不*拒绝的记录。）如果您想拒绝同一个人在以后完成同一课程：

```
select
  ID
, FullName
, CourseName
, min(CompletionDate)
from CourseCompletions
group by
  ID
, FullName
, CourseName; 
```

如果您想在较早的日期拒绝完成，只需将 MIN 更改为 MAX。

如果您想拒绝 Excel 表中早先出现的任何课程完成：

```
select
  cc1.ID
, cc1.FullName
, cc1.CourseName
, cc1.CompletionDate
from CourseCompletions as cc1
inner join (
  select
    max(ID) as WantedID
  , FullName
  , CourseName
  from CourseCompletions
  group by FullName, CourseName
) as cc2
on cc1.ID = cc2.WantedID; 
```

要拒绝稍后出现在 Excel 表中的课程完成，只需将 MAX 替换为 MIN。

因此，使用整数主键为您提供了一些选择。

# php - 在php中查找和替换字符串

> ID：14955012
> 
> 赞同：0
> 
> 时间：2013-02-19T10:18:31.677
> 
> 标签：php

我通过 foreach 循环获得了许多值。现在我想用一个字符串检查每个值。

我的字符串是`"http://www.example.com/TantraProjects/Ranjit/nt_plugin"`

我的值如下所示：

```
http://blogsearch.google.com/blogsearch?scoring=d&partner=wordpress&q=link:http://www.example.com/TantraProjects/Ranjit/nt_plugin/

http://blogsearch.google.com/blogsearch_feeds?scoring=d&ie=utf-8&num=10&output=rss&partner=wordpress&q=link:http://www.example.com/TantraProjects/Ranjit/nt_plugin/

link:http://www.example.com/TantraProjects/Ranjit/nt_plugin/ - Google Blog Search 
```

现在我想更改所有值，替换`http://www.example.com/TantraProjects/Ranjit/nt_plugin`为`MY NEW PATH`.

如何使用 php 替换字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:20:45.487

**[str_replace](http://php.net/manual/en/function.str-replace.php)**

请使用谷歌，网上有成千上万个该问题的答案。:)

此外，如果您想在这样的 URL 中嵌入链接：

> [http://blogsearch.google.com/blogsearch?scoring=d&partner=wordpress&q=link:http://www.example.com/TantraProjects/Ranjit/nt_plugin/](http://blogsearch.google.com/blogsearch?scoring=d&partner=wordpress&q=link:http://www.example.com/TantraProjects/Ranjit/nt_plugin/)

您需要在传递的 URL 上使用[urlencode](http://www.php.net/manual/en/function.urlencode.php)`&q=`。

所以基本上：

```
$string = "http://blogsearch.google.com/blogsearch?scoring=d&partner=wordpress&q=MY_NEW_PATH";
$output = str_replace('MY_NEW_PATH', "link:".urlencode('http://www.example.com/TantraProjects/Ranjit/nt_plugin'), $string); //$search , $replace, $subject 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:20:49.153

可能通过像这样使用[str_replace](http://php.net/manual/en/function.str-replace.php)：

```
$findstr = "http://www.example.com/TantraProjects/Ranjit/nt_plugin";
$newstr = "new string here";
$newlist = array();

foreach($list as $item)
{
   $newlist[] = str_replace($findstr, $newstr, $item);
} 
```

# php - rabbitmq 与 wamp 服务器

> ID：14955014
> 
> 赞同：0
> 
> 时间：2013-02-19T10:18:35.830
> 
> 标签：php, wamp, rabbitmq, pecl

好的，所以我看到了有关此的其他问题，但我仍然没有正确。

我需要从 php 连接到 rabbitmq，但我在我的 windows 机器上使用 wamp。

我已经看到我需要下载一个 pecl .dll。我已经下载了一些，但我仍然无法让它工作。

有没有人有这个工作如果他们有请告诉我如何。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:47:44.270

Have you look at AMQP PHP Extension?

[http://www.php.net/manual/en/amqp.installation.php](http://www.php.net/manual/en/amqp.installation.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T11:49:42.183

这可以通过[php-amqplib](https://github.com/videlalvaro/php-amqplib)轻松实现。

> 这个库是 AMQP 协议的纯 PHP 实现。它已经针对 RabbitMQ 进行了测试。
> 
> 要求：由于使用命名空间，PHP 5.3。

因此它也可以在 Windows 上完美运行 :)

# javascript - 正则表达式获取没有子页面的url

> ID：14955029
> 
> 赞同：1
> 
> 时间：2013-02-19T10:19:33.050
> 
> 标签：javascript, regex, url

没有子页面的 url 的正确正则表达式是什么？

错误：`http://abc.com/subpage`
正确：`http://abc.com`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:20:47.750

检查这个：

```
^https?://([^/]+?\.[a-zA-Z]{2,4})/?$ 
```

它将匹配：

*   `http://`或者`https://`
*   `/`除（1 次或多次）以外的任何字符
*   `.X`以where结尾的`X`是 2、3 或 4 个字母。

我试图让它变得简单。如果你[在谷歌上搜索，](https://www.google.com/search?q=URL+Regex)你会得到很多结果，这些结果会给你一个更具体的正则表达式来匹配 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T10:54:27.697

以下内容应捕获看起来像有效 URL 的所有内容。我说“应该”是因为它不会检查 TLD 是否真的真实。

```
^(https?:\/\/)([\da-z\.-]+)\.([a-z\.]{2,6})\/?$ 
```

如果您只想检查某些 TLD，您可以使用以下正则表达式。只需添加更多 TLD 用管道分隔它们 | 符号。

```
^(https?:\/\/)([\da-z\.-]+)\.(net|org|nl|com|co\.uk)\/?$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:20:42.553

```
^([a-z]{3,5}:\/{2})((?:[\w-]+\.)?[\w-]+\.[a-z]{2,4})$

match 'http://abc.com' -> ['http://abc.com'], ['http://'], ['abc.com']
match 'http://www.abc.com' -> ['http://www.abc.com'], ['http://'], ['www.abc.com']
match 'http://abc.com/test' -> null 
```

如果您必须考虑 TLD，您也可以在末尾使用`{2,6}`而不是。`{2,4}``.museum`

# colors - 不同电脑的网站背景颜色不一样？

> ID：14955031
> 
> 赞同：1
> 
> 时间：2013-02-19T10:19:33.550
> 
> 标签：colors, background, web, mismatch

[我们为网站http://sblpl.com](http://sblpl.com)放置了橙黄色 (#FFCF21) 背景。但在我们的客户端系统中，它显示为非常浅的黄色，看起来一点也不好看。

这可能是什么原因？比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:22:29.790

这可能是由多种原因造成的。

我能想到的一个想法是，您客户的显示器呈现的颜色与您使用的显示器不同。

此外，由于颜色配置文件设置，您客户的浏览器可能会与您的浏览器呈现不同的内容。

# javascript - 使用多个系列高图更改图表类型

> ID：14955034
> 
> 赞同：0
> 
> 时间：2013-02-19T10:19:40.050
> 
> 标签：javascript, jquery, highcharts

我在 highcharts 中有多个系列，类似于 highcharts 上的第一个[演示](http://www.highcharts.com/demo/)。现在我正在使用以下函数动态更改图表类型

```
function ChangeChartType(chart, series, newType) {
    newType = newType.toLowerCase();
    for (var i = 0; i < series.length; i++) {
        var srs = series[0];
        console.log(srs.options.data);
        try {
            srs.chart.addSeries({
                type: newType,
                stack: srs.stack,
                yaxis: srs.yaxis,
                name: srs.name,
                color: srs.color,
                data: srs.options.data
            },
            false);
            srs.remove(false);
        } catch (e) {
        }
    }
    chart.redraw();
} 
```

但是这两个系列都没有改变。该系列中只有一个正在更改。可能是什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:54:09.557

图表类型不能动态更改，只能销毁图表并创建新图表。但是这个选项应该在 3.0 版本中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:24:30.427

错误在其他地方。不在此功能中。该函数适用于更改图表类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:38:28.817

是否改变

```
 var srs = series[0]; 
```

至

```
 var srs = series[i]; 
```

帮助？

# c# - asp 菜单在浏览器中的显示方式不同

> ID：14955037
> 
> 赞同：0
> 
> 时间：2013-02-19T10:19:48.560
> 
> 标签：c#, asp.net, css, visual-studio-2010, menu

我有一个在页面顶部有一个菜单栏的 Web 应用程序。此菜单栏在 Internet Explorer 9 中显示良好，但在 chrome 中显示不正确。我真的不知道如何使这个 css 文件成为跨浏览器 css 文件。
这是它在 IE 中的显示方式。 ![在此处输入图像描述](../Images/52382025958b67148b2d876593baedf5.png)

这是它在 chrome 中的显示方式。 ![在此处输入图像描述](../Images/bd86131744dd6e430bfc022997894bdf.png)

我的CSS如下：

```
div.hideSkiplink
{
    background-color: #796540;
    width: 100%;
    height: 56px;
    margin: 0px 5px 20px 0px;
}

div.menu
{
    padding: 1px 0px 1px 8px;
    margin: 5px 0px 5px 0px;
}

div.menu ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
    width: auto;
} 
```

这是我的页面标记

```
 <div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="False"
                    IncludeStyleBlock="False" Orientation="Horizontal" BackColor="#F7F6F3" DynamicHorizontalOffset="2"
                    Font-Names="Verdana" Font-Size="0.8em" ForeColor="#7C6F57" StaticSubMenuIndent="10px"
                    DataSourceID="SiteMapDataSource1" OnMenuItemDataBound="NavigationMenu_MenuItemDataBound">
                </asp:Menu>
            </div> 
```

有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:32:59.117

尝试改变宽度：100%；固定/不变的东西。或者，尝试阅读这篇文章[http://fabenterprises.wordpress.com/2009/03/21/aspnet-menu-not-rendering-correctly-in-googles-chrome/](http://fabenterprises.wordpress.com/2009/03/21/aspnet-menu-not-rendering-correctly-in-googles-chrome/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:25:32.983

尝试覆盖 li paddings、li margins、hideskipling paddings 的默认参数

# c# - 读取 DNS(mDNS) 响应

> ID：14955042
> 
> 赞同：0
> 
> 时间：2013-02-19T10:20:03.657
> 
> 标签：c#, .net, dns, packet, mdns

对于一个项目，我必须阅读 mDNS 响应。

我阅读了 IETF 文档（和 tcpguide，其中包含很多[架构](http://www.tcpipguide.com/free/t_DNSMessageResourceRecordFieldFormats-2.htm)），我认为我尊重它们，但我有一个问题。

我经常尝试读取我的流，但流对于我要读取的数据来说太短了。

我有几个案例，我想我错过了一些东西。

一个具体的例子：我收到了这个（我做了一个小的“响应解析器”来查看我收到的内容并“解码”它：

```
0000000000000000  0              ID
1                 True           IsResponse
0000              0              Opcode
1                 True           Authoritative
0                 False          Truncation
0                 False          Recursion desired
0                 False          Recursion available
000               000            Zero
0000              0              RCode
0000000000000000  0              Question count
0000000000000100  4              Answers count
0000000000000000  0              Authority count
0000000000000000  0              Additional count
Answers:
00001001          9              Size
01011111          _
01110011          s
01100101          e
01110010          r
01110110          v
01101001          i
01100011          c
01100101          e
01110011          s
00000111          7              Size
01011111          _
01100100          d
01101110          n
01110011          s
00101101          -
01110011          s
01100100          d
00000100          4              Size
01011111          _
01110101          u
01100100          d
01110000          p
00000101          5              Size
01101100          l
01101111          o
01100011          c
01100001          a
01101100          l
00000000          0              Size
00000000          0              Size
00001100          12             Size
00000000
00000001          ?
00000000
00000000
00011100          ?
00100000
00000000
00010111          ?
00001111          ¤
01011111          _
01110000          p
01100100          d
01101100          108            Size
00101101          -
01100100          d
01100001          a
01110100          t
01100001          a
01110011          s
01110100          t
01110010          r
01100101          e
01100001          a
01101101          m
00000100          ?
01011111          _
01110100          t
01100011          c
01110000          p
11000000          ?
00100011          #
11000000          ?
00001100          ?
00000000
00001100          ?
00000000
00000001          ?
00000000
00000000
00011100          ?
00100000
00000000
00001011          ?
00001000
01011111          _
01110000          p
01110010          r
01101001          i
01101110          n
01110100          t
01100101          e
01110010          r
11000000          ?
01000100          D
11000000          ?
00001100          ?
00000000
00001100          ?
00000000
00000001          ?
00000000
00000000
00011100          ?
00100000
00000000
00000111
00000100          ?
01011111          _
01101001          i
01110000          p
01110000          p
11000000          ?
01000100          D
11000000          ?
00001100          ?
00000000
00001100          ?
00000000
00000001          ?
00000000
00000000
00011100          ?
00100000
00000000
00001000
00000101          ?
01011111          _
01101000          h
01110100          t
01110100          t
01110000          p
11000000          ?
01000100          D
out of range      out of range
out of range      out of range
[...] 
```

我不明白为什么我这里没有足够的数据。截断位设置为假，所以我应该在这个数据包中包含所有数据，`01101100`实际上意味着大小为 108，而我这里只有 ~75 个字节。那么我做错了什么？这个问题似乎主要发生在包含答案的数据包中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:15:16.457

事实上，问题在于协议定义了压缩。如果下一个链的大小以 11xx xxxx 开头，则表示它是指向前一个字符串的指针，xx xxxx 是流的字节索引。

我不是在读这个，这意味着我在读 11xx xxxx 有一个长度，给了我一个经常超出范围的巨大长度。

# python - 如何使用 Gdata python 获取 Google 联系人图片链接

> ID：14955043
> 
> 赞同：1
> 
> 时间：2013-02-19T10:20:04.730
> 
> 标签：python, gdata, gdata-api, google-contacts-api

如何使用 Gdata python 客户端获取 Google 联系人图片链接。

我试过`gd_client.GetPhoto(contact_entry)`了，它允许在本地下载联系人图像。

但我不想在本地保存图像。我需要直接图像链接，以便我可以动态填充我的网络应用程序，例如`<img src="google contact image link"></img>`.

任何解决方案都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:33:42.867

使用较新的[google-api-python-client](http://code.google.com/p/google-api-python-client/)库，OAuth 2.0 身份验证，您可以从基本用户配置文件中获取照片 URI：

[获取用户配置文件信息](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall)

以下是在 AppEngine 中使用其中一些内容的示例：

[Google+ OAuth 2.0 AppEngine 示例](http://code.google.com/p/google-api-python-client/source/browse/#hg/samples/appengine)

# ruby-on-rails - 在 Rails 中撤消先前播种的数据

> ID：14955044
> 
> 赞同：10
> 
> 时间：2013-02-19T10:20:06.157
> 
> 标签：ruby-on-rails, undo, seed

我通过编辑`db/seed.rb`文件和执行`rake db:seed`命令将一行数据播种到我的表中。在不知不觉中，我在该行中输入了一些错误信息。所以我想删除之前添加的数据行。是否有相同的 rake 命令`rake db:rollback`用于`rake db:migrate`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T12:48:04.913

这有几个方面：

1：您想在数据库中没有其他数据时更改种子数据：

您应该`rake db:seed`在更新 seed.rb 文件后简单地重做。`MyModel.delete_all`在尝试向该模型添加任何内容之前，请确保您拥有。

2：你想改变种子数据，但是有其他数据添加到数据库中

这有点难。通常最简单的做法是使用原始 sql 语句或使用[PhpPpAdmin](http://phppgadmin.sourceforge.net/doku.php)、[PhpMyAdmin](http://www.phpmyadmin.net/home_page/index.php)等工具手动更改数据。

* * *

现在，有一种方法可以一起破解，那就是在 seed.rb 文件中做一些巫术。所以你可以运行`rake db:seed deseed=true`，然后在你的 seed.rb 中：

```
if ENV['deseed'] 
   #Do your deseeding action here
else
   #Do your seeding here.
end 
```

你甚至可以变得非常疯狂并做这样的事情：

```
deseed = ENV['desee']

#DANGER: Dirty hacks upcoming:
deseed? myModelCall = MyModel.method(:destroy_all): myModelCall = MyModel.method(:create)

myModelCall.call :user_id_or_whatevs => 23 #this creates or deletes a MyModel entity with the given parameters
#NOTE this might not work in all cases and I would not necessarily recommend doing this. 

#<3uby 
```

# c# - AssignProcessToJobObject 未正确分配

> ID：14955045
> 
> 赞同：0
> 
> 时间：2013-02-19T10:20:06.390
> 
> 标签：c#, object, jobs, flags, assign

我尝试使用以下方法将“job_object_limit_kill_on_job_close”设置为子进程：

```
int pid = System.Diagnostics.Process.GetProcessesByName("Child")[0].Id;
Job job = new Job("TEST JOB");
job.AddProcess(Process.GetProcessById((int)pid).Handle); 
```

使用 Process Explorer，我看到分配给我的子进程的作业“TEST JOB”，但没有以某种方式列出作业限制……它只是空的。

什么可能导致这种情况？

`GetLastWin32Error`刚回来`0`

这是我正在使用的课程：

```
public class Job : IDisposable
{
    [DllImport("kernel32.dll", CharSet = CharSet.Unicode)]
    static extern IntPtr CreateJobObject(IntPtr a, string lpName);

    [DllImport("kernel32.dll")]
    static extern bool SetInformationJobObject(IntPtr hJob, JobObjectInfoType infoType, IntPtr lpJobObjectInfo, UInt32 cbJobObjectInfoLength);

    [DllImport("kernel32.dll", SetLastError = true)]
    static extern bool AssignProcessToJobObject(IntPtr job, IntPtr process);

    private IntPtr handle;
    private bool disposed;

    public Job(string jobName)
    {
        handle = CreateJobObject(IntPtr.Zero, jobName);

        var info = new JOBOBJECT_BASIC_LIMIT_INFORMATION
        {
            LimitFlags = 0x2000
        };

        var extendedInfo = new JOBOBJECT_EXTENDED_LIMIT_INFORMATION
        {
            BasicLimitInformation = info
        };

        int length = Marshal.SizeOf(typeof(JOBOBJECT_EXTENDED_LIMIT_INFORMATION));
        IntPtr extendedInfoPtr = Marshal.AllocHGlobal(length);
        Marshal.StructureToPtr(extendedInfo, extendedInfoPtr, false);

        if (!SetInformationJobObject(handle, JobObjectInfoType.ExtendedLimitInformation, extendedInfoPtr, (uint)length))
            throw new Exception(string.Format("Unable to set information.  Error: {0}", Marshal.GetLastWin32Error()));
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    private void Dispose(bool disposing)
    {
        if (disposed)
            return;

        if (disposing) { }

        Close();
        disposed = true;
    }

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool CloseHandle(IntPtr hObject);

    public void Close()
    {
        CloseHandle(handle);
        handle = IntPtr.Zero;
    }

    public bool AddProcess(IntPtr processHandle)
    {
        return AssignProcessToJobObject(handle, processHandle);
    }

    public bool AddProcess(int processId)
    {
        return AddProcess(Process.GetProcessById(processId).Handle);
    }

}

#region Helper classes

[StructLayout(LayoutKind.Sequential)]
struct IO_COUNTERS
{
    public UInt64 ReadOperationCount;
    public UInt64 WriteOperationCount;
    public UInt64 OtherOperationCount;
    public UInt64 ReadTransferCount;
    public UInt64 WriteTransferCount;
    public UInt64 OtherTransferCount;
}

[StructLayout(LayoutKind.Sequential)]
struct JOBOBJECT_BASIC_LIMIT_INFORMATION
{
    public Int64 PerProcessUserTimeLimit;
    public Int64 PerJobUserTimeLimit;
    public UInt32 LimitFlags;
    public UIntPtr MinimumWorkingSetSize;
    public UIntPtr MaximumWorkingSetSize;
    public UInt32 ActiveProcessLimit;
    public UIntPtr Affinity;
    public UInt32 PriorityClass;
    public UInt32 SchedulingClass;
}

[StructLayout(LayoutKind.Sequential)]
public struct SECURITY_ATTRIBUTES
{
    public UInt32 nLength;
    public IntPtr lpSecurityDescriptor;
    public Int32 bInheritHandle;
}

[StructLayout(LayoutKind.Sequential)]
struct JOBOBJECT_EXTENDED_LIMIT_INFORMATION
{
    public JOBOBJECT_BASIC_LIMIT_INFORMATION BasicLimitInformation;
    public IO_COUNTERS IoInfo;
    public UIntPtr ProcessMemoryLimit;
    public UIntPtr JobMemoryLimit;
    public UIntPtr PeakProcessMemoryUsed;
    public UIntPtr PeakJobMemoryUsed;
}

public enum JobObjectInfoType
{
    AssociateCompletionPortInformation = 7,
    BasicLimitInformation = 2,
    BasicUIRestrictions = 4,
    EndOfJobTimeInformation = 6,
    ExtendedLimitInformation = 9,
    SecurityLimitInformation = 5,
    GroupInformation = 11
}

#endregion 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:45:02.160

没有错，Process Explorer 只是没有显示关闭标志时的终止。它将显示[作业内存和进程限制](http://books.google.com/books?id=ZNLkWZU0gyMC&pg=PT167&lpg=PT167&dq=sysinternals%20process%20job%20limits&source=bl&ots=Rf6WVCNgNl&sig=tFAyvW_GiFnpkbQzNNAyFYPm-pA&hl=en&sa=X&ei=xY4jUbRi7a7QAY3YgOAN&ved=0CFoQ6AEwBQ)。

您是否测试并确保您的子进程在您结束作业时结束？只要您的程序运行正确，您就不必担心外部工具显示的内容。

# asp.net-mvc-3 - 如何将此 ASP 语法更改为 Razor？

> ID：14955050
> 
> 赞同：0
> 
> 时间：2013-02-19T10:20:21.240
> 
> 标签：asp.net-mvc-3, razor

如何将其转换为 ASP.NET？

或者如何将 ASP 转换为 Razor，我将添加或删除什么以及在将 ASP 转换为 Razor 或反向时要记住什么。

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<PopulatingDDLusingEF.ViewModels.IndexViewModel>" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:03:11.323

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<PopulatingDDLusingEF.ViewModels.IndexViewModel>" %> 
```

在**Razor**中，您应该使用`@Model`关键字

```
@model PopulatingDDLusingEF.ViewModels.IndexViewModel
@{
    ViewBag.Title = "Result";
    Layout = "~/Views/Shared/Site.Master";   
} 
```

**这是我从 Marcind 的[帖子中获得的如何将 ASP 语法转换为 razor 语法的示例](https://stackoverflow.com/questions/4019740/does-razor-syntax-provide-a-compelling-advantage-in-ui-markup/4021282#4021282)**

```
<% if(someCondition) { %>
  <ol>
  <% foreach(var item in Model) { %>
     <li><%: item.ToString() %></li>
  <% } %>
  </ol>
<% } %>

Can be expressed as follows in Razor:

@if(someCondition) {
   <ol>
   @foreach(var item in Model) {
      <li>@item.ToString()</li>
   }
   </ol>
} 
```

**还要检查[这个](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)以获得快速有用的 Razor 参考**

# google-app-engine - 如何允许某些电子邮件地址验证 GAE 应用程序？

> ID：14955052
> 
> 赞同：0
> 
> 时间：2013-02-19T10:20:28.207
> 
> 标签：google-app-engine

在我的 GAE 应用程序中，我想允许`only three`（例如 abc@mydomain.com、xyx@mydomain.com 和 abc@gmail.com）电子邮件地址`authenticate`，但我无法配置它。在创建 GAE 应用程序时，它有三个不符合我要求的选项。任何对此提供帮助的人都将受到高度赞赏。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:22:15.567

您可以在 app.yaml 中为非管理员用户“关闭”您的处理程序

```
- url: .*
  script: main.application
  login: admin 
```

然后，只需在管理控制台/权限中将您的三个用户添加为应用程序所有者/开发者/查看者。此用户需要注册 google 帐户才能申请。

# c++ - Tesseract setVariable 其他语言的白名单

> ID：14955053
> 
> 赞同：3
> 
> 时间：2013-02-19T10:20:31.673
> 
> 标签：c++, ocr, tesseract

Tesseract setVariable 白名单适用于英语，例如我用它来识别图像中的数字和字母（不包括特殊字符 &*^%！等）

```
myOCR->SetVariable("tessedit_char_whitelist",
"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"); 
```

但我不能对俄语做同样的事情

```
myOCR->SetVariable("tessedit_char_whitelist", "0123456789абвгдежзийклмнопрстуфхцчшщъыьэюяАБВГДЕЖЗИЙКЛМОПРСТУФХЦЧШЩЭЮЯ"); 
```

有不同的原理吗？因为这是行不通的。我在输出中只收到数字，而不是所有确定的字符，tesseract 忽略了我放入白名单的所有俄语字母。黑名单也没有用。有没有办法摆脱它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:01:43.603

所以答案是在白名单中使用这个符号unicode代码，不知道该怎么做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T07:56:56.617

C＃

```
var fromEncodind = System.Text.Encoding.UTF8;
var bytes = fromEncodind.GetBytes(ans);
var toEncoding = System.Text.Encoding.GetEncoding(1251);
ans = toEncoding.GetString(bytes);
engine.SetVariable("tessedit_char_whitelist", ans); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-26T12:21:53.257

我在android（tess-two）中有类似的问题。可以使用例如这个在线[工具](http://itpro.cz/juniconv/)将 UTF8 转换为 java 实体来简单地完成。例如你的字符集：

```
tess.setVariable(TessBaseAPI.VAR_CHAR_WHITELIST, "0123456789\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E\u044F\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042D\u042E\u042F"); 
```

# javascript - JavaScript 中的弹出窗口

> ID：14955055
> 
> 赞同：2
> 
> 时间：2013-02-19T10:20:35.620
> 
> 标签：javascript, popup, window, blogger, tumblr

我在基于 Blogger 的[网站](http://www.xeasycorex.net)上使用自定义 Tumblr 共享按钮，我希望共享屏幕在弹出窗口中打开。现在它在一个新选项卡中打开。

有人可以告诉我如何做到这一点吗？

```
<div class='tumblr-button'>
<script>
var strPostUrl = "<data:post.url/>";
var strPostTitle = '<data:post.title/>';
var strNewUrl = strPostUrl.replace("http://","");
var strNewTitle = strPostTitle.replace(/"/g, '"');
document.write("<a href='http://www.tumblr.com/share/link?url="+strNewUrl+"&amp;name="+strNewTitle+"' target='_new'><img src='http://platform.tumblr.com/v1/share_1.png'/></a>");
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:29:24.160

```
 <div class='tumblr-button'>
    <script>
    var strPostUrl = "http://google.com";
    var strPostTitle = 'Google';
    var strNewUrl = strPostUrl.replace("http://","");
    var strNewTitle = strPostTitle.replace(/"/g, '"');

    </script>
    <a href='javascript:void(0);' id='tumblr'><img src='http://platform.tumblr.com/v1/share_1.png'/></a>
</div>
    <script type="text/javascript">
    jQuery(document).ready(function(){
        jQuery('#tumblr').click(function(){
         var width  = 775,
            height = 500,
            left   = ($(window).width()  - width)  / 2,
            top    = ($(window).height() - height) / 2,        
            opts   = 'status=1' +
            ',width='  + width  +
            ',height=' + height +
            ',top='    + top    +
             ',left='   + left;
    var url = "http://www.tumblr.com/share/link?url="+strNewUrl+"&name="+strNewTitle;
    window.open(url , 'tumblr', opts);
    });
   });
    </script> 
```

检查[http://jsfiddle.net/gzMXd/上的演示代码](http://jsfiddle.net/gzMXd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:23:21.753

使用javascript`window.open()`函数

```
$('#buttonID').click(function() {
  myWindow=window.open('','','width=200,height=100');  
  myWindow.document.write("<p>This is 'myWindow'</p>");  
  myWindow.focus();  
}); 
```

**句法：**

```
window.open (URL, windowName[, windowFeatures]) 
```

例如。`window.open ("http://jsc.simfatic-solutions.com", "mywindow","status=1,toolbar=1");`

# backbone.js - backbone.js AssociatedModel 错误：类型必须继承自 Backbone.AssociatedModel

> ID：14955060
> 
> 赞同：0
> 
> 时间：2013-02-19T10:20:47.113
> 
> 标签：backbone.js

我正在寻找一个库来遵循子模型并遇到了骨干关联

我创建了模型并设置了关系。结构看起来像

GatewayModel 与 GradeModel 有关系

GradeModel 与 ButtonModel 有关系

我创建了 GatewayModel 的 obj 并添加了 GradeModel。但是当我尝试将 ButtonModel 添加到 GradeModel 时，它会引发错误

未捕获的错误：类型必须从 Backbone.AssociatedModel 继承

我检查了所有模型的声明，它们正确地扩展了 AssociatedModel

请有人帮忙解决问题可能是什么

我在这里创建了 JSFiddle

jsfiddle.net/5d4Fa

[编辑] 我注意到如果我将类型更改为 Backbone.One 它工作正常。请有人解释一下 One 和 Many 之间的区别。

我的理解是，如果模型包含关系模型的多个记录，我必须使用 Backbone.Many 但是一旦我使用 Backbone.Many，它就会开始抛出错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:34:16.367

我解决了这个问题。该问题与在 collectionType 中传递的数据类型不正确有关。它需要字符串，我将值作为类传递

```
type: Backbone.Many,
key: 'grade',
relatedModel: Model,
collectionType: 'Collection' 
```

# firebird - Firebird 检查日期是否在当天的下午 12 点之前

> ID：14955065
> 
> 赞同：-1
> 
> 时间：2013-02-19T10:21:14.267
> 
> 标签：firebird

日期计算不是我的强项，我需要一点帮助。我正在尝试检查所选字段中的日期（即时间戳）是否在当天中午 12 点之前。提前致谢。

场景：如果在当天中午 12 点之前下订单，则将获得 x 资格，否则获得 y。因此，我在选择语句中得到该订单的创建日期（包括时间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:02:11.830

该`DATE`类型不携带时间信息，因此您可以定义日期的时间点。`TIMESTAMP`如果时间信息也很重要，您应该使用类型。无论如何，假设该字段在下午 12 点存储日期，然后您使用

```
WHERE date_field <= CURRENT_DATE; 
```

`CURRENT_DATE`是所谓的上下文变量，显然它返回当前日期。`CURRENT_TIMESTAMP`并且`CURRENT_TIME`也可用。您可以使用[DATEADD](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-intfunc-dateadd.html)和[DATEDIFF](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-intfunc-datediff.html)内置函数进行一些日期计算。

所以如果该字段实际上是时间戳，你可以这样做

```
WHERE date_field < DateAdd(12 HOUR to cast(CURRENT_DATE as timestamp)); 
```

# ruby-on-rails - Rails 应用程序到引擎

> ID：14955068
> 
> 赞同：5
> 
> 时间：2013-02-19T10:21:21.290
> 
> 标签：ruby-on-rails, rails-engines

我们如何将现有的 Rails 应用程序（3.2.11）转换为引擎。我们在 Rails 应用程序中定义了一些功能，我们希望将此 Rails 应用程序功能用作引擎，以便我们可以与其他 Rails 应用程序添加/共享/安装此功能。

我们是否有任何可用的宝石或任何想法。

提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:16:37.373

我们最近开始在我的公司这样做，我们永远不会回头。引擎 gem 非常适合在多个项目中使用相同的逻辑。

也就是说，从这个 railscast 开始：Mountable [Engines](http://railscasts.com/episodes/277-mountable-engines)（我认为这是正确的链接，它在工作中被阻止，所以我无法确定。如果不是那么只是谷歌“railscasts 引擎”。）

另外，请查看[此处的文档。](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)

这是我们开始的地方，我们很快就发布了我们的引擎。

# xcode4.5 - 已删除的属性仍然出现

> ID：14955070
> 
> 赞同：0
> 
> 时间：2013-02-19T10:21:22.473
> 
> 标签：xcode4.5

我只是遇到了一个奇怪的问题，或者对我来说可能很奇怪。

我有一个文本字段，并创建了属性 ageTextField。然后我将其更改为ageValue。我在所有地方都改变了它。但是一旦我在模拟器上运行项目，我就会看到这个错误。

> 2013-02-19 02:47:11.510 FatCalc [17492:11303] ***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键值编码的键ageTextField 。

这可能是有限的信息，但我不知道我还能提供什么更多信息。我是否需要删除所有属性并从头开始？

谢谢

# facebook - Facebook 分享按钮未分享正确的标题和描述

> ID：14955073
> 
> 赞同：2
> 
> 时间：2013-02-19T10:21:30.550
> 
> 标签：facebook, addthis

我正在尝试解决 **[http://davitpir.ack.neowebservices.co.uk/offer-61.html中的 FB 分享按钮的问题](http://davitpir.ack.neowebservices.co.uk/offer-61.html)**

您可以查看源代码（html 代码）我已正确设置元标题、描述等。

但是当我点击分享按钮时，它分享的是“Davit Pirvelashvili”，这是其他页面的标题，而不是优惠页面（即我上面提到的链接）

如何让 FB 分享按钮分享正确的标题和描述。

您可以查看上述网址的来源以查看我提到的标题/描述

**更新**

奇怪的是，它适用于 **[http://davitpir.ack.neowebservices.co.uk/offer-83.html](http://davitpir.ack.neowebservices.co.uk/offer-83.html)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:36:33.723

OpenGraph 标签可以被缓存（我不确定 FB 使用的术语）。但是，如果您使用以下方法测试您的 URL：

[https://developers.facebook.com/tools/debug/og/object](https://developers.facebook.com/tools/debug/og/object)

它强制缓存更新。

*编辑：使用调试工具后，标题对我来说是正确的。*

# jquery - 用淘汰赛隐藏jqgrid打破它（jquery问题？）

> ID：14955074
> 
> 赞同：0
> 
> 时间：2013-02-19T10:21:31.510
> 
> 标签：jquery, jqgrid, knockout.js

```
<div data-bind="ifnot: SelectedElement">
    test
    <table id="elementsTable" class="scroll">
    </table>
</div>

<div data-bind="with: SelectedElement">
    <p data-bind="text: Id"></p>
    <p data-bind="text: Name"></p>
    <p data-bind="text: Description"></p>

    <button data-bind="click: $parent.CloseElement">Close</button>
</div> 
```

上面的代码隐藏了一个 jqGrid 以显示元素详细信息并允许关闭它并在以前的状态下显示 jqGrid - 但是在关闭元素 jqGrid disaper 之后，我总是可以再次调用 initGrid() 但这不是最好的解决方案。有什么解决方法可以做到这一点吗？创建具有绝对位置的元素不是最佳选择（可能会导致一些设计问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:11:35.227

好的，小的解决方法，而不是使用数据绑定我使用 jquery 显示/隐藏 - 这保留了 jqGrid 不变。

# hibernate - 使用连接时更新查询的休眠 HQL 错误

> ID：14955075
> 
> 赞同：0
> 
> 时间：2013-02-19T10:21:36.863
> 
> 标签：hibernate, hql

在休眠中执行此查询时出现“org.hibernate.hql.ast.QuerySyntaxException：意外令牌：在第 1 行，第 132 列附近打开”的错误。任何人都可以帮助我了解我的代码如何使用 ON 进行休眠。

```
Session session  = (Session) em1.getDelegate();

org.hibernate.Query q=session.createQuery("UPDATE sc_ob_temp_audit set export_flag ='Y' WHERE audit_id IN(select a.audit_id FROM sc_ob_temp_audit a JOIN sc_ob_allocation b  ON a.sc_ob_profile_code = b.sc_ob_profile_code AND a.sc_orig_country= b.sc_orig_country LEFT OUTER JOIN sc_fac_group f ON   b.sc_orig_country = f.sc_orig_country AND b.sc_orig_sf_group_code = f.sc_fac_group_code LEFT OUTER JOIN (SELECT e.gp_cnt_cd,d.sc_prod_cont_code,d.sc_prod_group_code,d.sc_orig_country, e.gp_cd FROM sc_ob_prod_group d LEFT OUTER JOIN gbl_product e ON d.sc_prod_cont_code = e. gp_cnt_cd)de ON b.sc_orig_country = de.sc_orig_country AND b.sc_prod_cont_group_code=de.sc_prod_group_code WHERE a.sc_orig_country=:countryCd AND a.export_flag= 'N')");

q.setParameter("countryCd", country.trim());

q.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:33:38.523

您正在尝试执行 SQL 查询 - 为此，您必须改用[SQLQuery](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/SQLQuery.html)对象。要获取一个`SQLQuery`对象，只需调用`session.createSqlQuery`

另一方面——如果你只是写 SQL 语句，为什么还要使用 Hibernate？你映射`sc_ob_temp_audit`表了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:44:46.537

您需要先了解有关 HQL 语法的更多信息。

**也可以看看：**

*   [16.3\. 关联和连接](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/queryhql.html#queryhql-joins)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:35:09.140

查看您的查询后，它似乎不是 hql。它看起来像一个 sql 查询。使用 session.createSqlSquery 代替 session.createQuery。

# sql - 带有 in 子句的 SQL 索引

> ID：14955077
> 
> 赞同：3
> 
> 时间：2013-02-19T10:21:39.727
> 
> 标签：sql, oracle, indexing, oracle10g, in-clause

我们的应用程序在其中一个环境中突然变慢了。我所做的唯一更改是更改了 SQL。在发布之前，SQL 是这样的

```
Select EmployeeId 
From Employee 
Where Dept='CS' 
  and record_state='ACTIVE' 
  and EmployeeTypeId ='1' 
```

发布后的 SQL 是

```
Select EmployeeId 
From Employee Where Dept='CS' 
 and record_state='ACTIVE' 
 and EmployeeTypeId IN ('1','2') 
```

此表上的索引是 employee_state_id_index (Dept,record_state,EmployeeTypeId ) 该索引没有更改。这个索引对新SQL没有帮助吗？新的 SQL 会扫描整个表吗？我不知道索引如何与 in 子句一起使用。感谢您的帮助和评论

查询的解释计划是

```
| Id  | Operation         | Name                     | Rows  | Bytes | Cost (%CPU)|

|   0 | DELETE STATEMENT  |                          |     1 |    57 |     4   (0)|
|   1 |  DELETE           | Employee                 |       |       |            |
|*  2 |   INDEX RANGE SCAN| employee_state_id_index  |     1 |    57 |     4   (0)|
--------------------------------------------------------------------------------

Predicate Information (identified by operation id):

PLAN_TABLE_OUTPUT

   2 - access("C"."Dept"='CS' AND
              "C"."RECORD_STATE"='ACTIVE')
       filter("C"."EmployeeTypeId"='1' OR
              "C"."EmployeeTypeId"='2') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T08:51:32.133

我们面临的问题的解决方案是重新索引表。该表有 1000 万条记录，我们最近清理了表中的数据（当我们意识到我们有重复的记录时），这将其减少到几乎是以前记录量的一半。所以我们认为我们会尝试重新索引，因为无论如何它需要它。这有帮助:)

# mediawiki - Mediawiki：将代码输入皮肤以仅出现在某些页面上？

> ID：14955078
> 
> 赞同：1
> 
> 时间：2013-02-19T10:21:39.233
> 
> 标签：mediawiki, facebook-comments, skin

**背景**

我正在尝试将 Facebook 评论框添加到我的 Mediaskin php 文件中，但是当我使用框下方的代码时，该框会出现在每个页面上。

**代码**

```
<!-- /debughtml -->
</div>
<br />
<center><div class="fb-comments" data-width="800" data-num-posts="100" data-colorscheme="dark"></div></center>
<!-- /bodyContent --> 
```

**问题**

如何使 facebook 评论仅出现在已读页面上（`index.php?title=`在 URL 中但不在`&action=edit`URL 末尾的页面？

# jquery - jquery 对象不支持属性或方法

> ID：14955079
> 
> 赞同：0
> 
> 时间：2013-02-19T10:21:41.373
> 
> 标签：jquery, dwr

我在下面使用 jquery 1.8 在 IE 8 上收到错误“对象不支持属性或方法”

jQuery(".errorContents");

我在我的项目中使用 DWR 和 jQuery，还添加了 $.noConflict(); 但不断收到上述错误

```
function addError(){
       var errorContents= jQuery(".errorContents");
       errorContents.html('Errors in the Page');
       errorContents.show(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:56:24.313

这对我来说很好：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
<div class="errorContents">asdf</div>
<script type="text/javascript">
    function addError() {
        var errorContents = $(".errorContents");
        errorContents.html('Errors in the Page');
        errorContents.show();
    }
    addError();
</script>
</body>
</html> 
```

小提琴：http: [//jsfiddle.net/5wbb8/](http://jsfiddle.net/5wbb8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:03:22.150

这可能是因为多次加载相同的 jQuery 插件或加载了多个版本的 jQuery 插件。

# sharepoint - 页面布局共享点中的内容查询 Web 部件

> ID：14955083
> 
> 赞同：1
> 
> 时间：2013-02-19T10:22:05.867
> 
> 标签：sharepoint, page-layout, cqwp

是否可以在页面布局中添加 cqwp？我试图将 webpart 从页面移动到页面中使用的页面布局。但在第二种情况下，我什么也没看到。

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T13:40:32.743

支持将 CQWP 实例添加到页面布局中。

CQWP 结果不可见的可能原因：

*   影响 Web 部件可见性的 Javascript/CSS
*   验证 Web 部件的源设置。如果页面和页面布局位于不同的站点并且源属性被配置为`Show items from the following list`或者`Show items from the following site and all subsites`这可能是原因。在这两种情况下，对于源属性，都可以指定**相对路径。**

![在此处输入图像描述](../Images/5b649f633510591176d1de0142e4a8f7.png)

# foreign-keys - 实体关系图：主键和外键的组成

> ID：14955085
> 
> 赞同：0
> 
> 时间：2013-02-19T10:22:18.620
> 
> 标签：foreign-keys, primary-key, entity-relationship

我已经定义了以下表格及其属性：

```
Table A)    Table B)    Table C)
- ID        - ID        - ID1
- Name      - xxx       - ID2
- Address   - yyy       - zzz
                        - ...
                        - ... 
```

我有两个问题：

1）在`Table A)`，`ID`是我的主键。和中的`ID`属性是相同的，我不确定是否可以用作主键和外键？显然，它也是一个主键，但同时也是一个外键。这是允许的吗？`Table A)``Table B)``Table B)` `ID``ID``Table B)``Table A)`

2）在`Table C)`我需要两个属性`ID1`和`ID2`. 两者本身都不是主要的，但它们确定了属性`zzz`。`ID1`但是，这两个属性`ID2`或多或少可以互换，因此我有可能创建两个不同的主键： 1) `ID1`+ `zzz`OR 2) `ID2`+ `zzz`。我不确定选择哪个键是否重要，或者是否完全允许这种情况。或者在这种特殊情况下，主键是所有 3 个属性的组合`ID1`，`ID2`并且`zzz`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:02:26.253

1.  如果 A 和 B 中的 ID 相同，则可以合并两个表并放置相同的 ID：

    ```
    Table AB)
    -ID
    -name
    -address
    -xxx
    -yyy 
    ```

    所以ID应该不一样...

2.  您可以将主键用作 ID1 和 ID2 的组合

# c# - Apple 推送通知中的自定义 JSON

> ID：14955093
> 
> 赞同：0
> 
> 时间：2013-02-19T10:22:49.533
> 
> 标签：c#, ios, push-notification, apple-push-notifications

我想在没有任何其他信息的情况下向苹果手机发送推送通知中的自定义 JSON。
我会发送类似的东西：

```
{
    message: "Message bla bla"
    , type: 1
    , data: "Tekst" 
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T10:34:50.410

如果您还希望在其中传递参数，您可以像这样创建 JSON：-

```
{"aps":{"alert":"You got a new message","badge":1,"sound":"beep.wav"},"message":"Message bla bla","type":1,"data":"Tekst"} 
```

希望对你有帮助。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:13:07.147

`aps`PJ 的回答大多是正确的，除了字典可以为空这一事实，如本例所示（从[APNS 指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW1)复制）：

> 示例 5\. 以下示例显示了一个空的 aps 字典；因为缺少徽章属性，所以应用程序图标上显示的任何当前徽章编号都将被删除。acme2 自定义属性是一个包含两个整数的数组。
> 
> {
> 
> ```
> "aps" : {
> 
> },
> 
> "acme2" : [ 5,  8 ] 
> ```
> 
> }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:44:39.180

```
{
    "aps" : {
        "alert" : "You got your emails.",
        "badge" : 9,
        "sound" : "bingbong.aiff"
    }

} 
```

# javascript - 创建混合高度的合理标题？

> ID：14955099
> 
> 赞同：3
> 
> 时间：2013-02-19T10:23:17.357
> 
> 标签：javascript, jquery, html, css, typography

我有一个设计有*很多*三行混合高度的标题。解释外观的最简单方法可能是举个例子：

![例子](../Images/5e8313ab727bda33bc2f588f2c14e5a6.png)

（为此，请忽略最后一行有两个单词的事实。）

一切都是完全合理的，但字体大小和字距会根据单词的长度而变化。

有没有办法用 JavaScript 或 CSS 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T13:08:36.810

我浏览了该项目的大量库，包括：

*   [FitText.js](http://fittextjs.com/)
    *   无法让它工作，因此不同的线有不同的大小（即，合理的，但不是混合高度）。
*   [BigText.js](http://www.zachleat.com/web/bigtext-makes-text-big/)
    *   根本无法让它工作。
*   [拉紧](http://archive.plugins.jquery.com/project/stretch)
    *   我忘记了这个问题，但它对我的目的不起作用。
*   获胜者：**[SlabText](https://github.com/freqDec/slabText/)**
    *   这就是我最终使用的，而且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:15:57.947

您可以查看 CSS 部分的[调整 CSS 中的字距调整，](https://stackoverflow.com/questions/3848715/adjusting-kerning-in-css)并查看[http://kerningjs.com/](http://kerningjs.com/)吗？

# python - 使用 PyDev 开发行为步骤

> ID：14955100
> 
> 赞同：3
> 
> 时间：2013-02-19T10:23:19.120
> 
> 标签：python, eclipse, ide, pydev, bdd

[Behave](http://pythonhosted.org/behave/)是 Python 中行为驱动开发的绝佳工具。然而，结合 PyDev 我有两个问题：

1.  PyDev 无法解析行为的`@given`,`@when`和`@then`注释。这可能会发生，因为行为确实对`behave`包进行了一些名称魔术。
2.  行为建议命名所有方法`step`，因为每个方法都有一个定义“真实”名称的注释。PyDev 抱怨这些“重复”的方法。

    例子：

    ```
    from behave import given, when, then

    @given('I navigate to Google')
    def step(context):
        # ...

    @when('I enter coffee into the search field')
    def step(context):
        # ... 
    ```

到目前为止，我通过包含来解决这两个问题`#@PydevCodeAnalysisIgnore`，这会关闭任何 PyDev 分析。我想为代码的所有其他部分保留 PyDev 分析。

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T18:52:44.273

1.  只是一个猜测。您是否尝试过导入重新定义？

    ```
    from behave import given as given_behaviour, when as when_behaviour, then as then_behaviour
    @given_behaviour('I navigate to Google') 
    ```

    您还可以检查 eclipse 设置：菜单 Window -> Preferences -> PyDev -> Interpreters -> Python Interpreters。`PYTHONPATH`有时，如果在配置解释器之后添加了新库以将这些库包含在 eclipse中的系统中，则删除并重新添加 python 解释器可能会有所帮助。

2.  尝试`#@`在方法名称末尾添加驼峰式消息，以关闭 PyDev 中的警告消息。就像是：

    ```
    def step(context): #@DuplicatedSignature 
    ```

# facebook - 如何让 Facebook 应用在应用中心获得批准？

> ID：14955104
> 
> 赞同：6
> 
> 时间：2013-02-19T10:23:25.290
> 
> 标签：facebook, facebook-apps, review

我已经提交了我们的 Facebook 应用程序以供应用程序中心审核，但根据 facebook 应用程序中心指南[http://developers.facebook.com/docs/appcenter/guidelines/](http://developers.facebook.com/docs/appcenter/guidelines/) ，它已处于待处理状态 10 天“一旦它有**足够的积极性评分和参与度**，我们将自动审核您的应用详细信息页面，如果需要任何更改，我们会在它出现在类别中之前与您联系。”

在 Facebook 应用提交审核后，谁能告诉我，如何获得足够的正面评价和参与度？确切的评分/参与量是多少？我在哪里可以看到进度？任何 facebook 应用程序中心联系电子邮件？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-12T18:48:22.273

不要让您失望，但在耐心耗尽之前，我们已经对我们的应用程序进行了 4 个月零 11 天的审核。在 450 个总评分中，我们有 50K 用户和 400 个 5* 评分。FB 在审查内容方面是多么不负责任，真是太疯狂了。我们重新提交了该应用程序以供审核，该应用程序在应用程序中心上线之前需要几天时间。

正面评分是指安装您的应用程序的用户对其评分从 1 星到 5 星。参与度基本上是总共有多少用户安装了您的应用，以及有多少用户在短时间内没有删除它（越多越好）。没有确切的数量，但例如第一周的 10K 新安装量要好于第一年的 10K 安装量，但数量是相同的。进度条也是如此——Facebook 有其内部指标。祝你审查顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T05:21:31.493

我们无法在应用中心提交申请页面/详细信息进行审核，因为

“您的应用目前没有足够高的评分和用户参与度，无法在应用中心进行审核”。

我问了一些关于这个的问题：

1) 如何在不被 Facebook 应用中心列出的情况下提高收视率？2）我们的用户参与度与发布在应用中心的同类别其他应用大致相同。什么是有资格进行审查的临界质量？哪些数字是相关的？

我从 Facebook 开发人员那里得到的回复：

1) 我们随机要求使用您的应用的用户对其进行评分。2) 没有具体数字。我们的算法尽可能多地获取数据，并尝试确定它是否是一个高质量的应用程序。但一般来说，如果你得到差评，你需要更多的活跃用户，如果你有好的评论，你需要的更少。

**更新：**

在我们的例子中，我们不得不在 App details 部分禁用 web 和移动 web 实现，因为它们的用户太少（所以只有 Android/iOS 仍然启用 - 我们的主要应用程序）。之后我们得到了批准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-12T10:54:00.393

提交应用程序的过程非常艰难。我们需要严格遵守准则。我们需要确定我们正在开发的应用程序类型以及需要的权限列表。由于许多 Facebook 应用程序开发人员的垃圾邮件，Facebook 应用程序中心需要确切的理由来获得批准所需的权限。

以下是提交指南的示例。

```
Tags

There may be scenarios where your app's users want to tag a friend. This tagging capability comes in two forms. One scenario is if the user takes an action with the friend (i.e. cooks a pizza with someone), and the other scenario is when the user simply wants to mention a friend (i.e. "Hey John Smith, let's make a pizza next time"). If you choose to choose to support both action and mention tags, clearly distinguish the two different use cases in your submission.

Action tagging appends "- with Friend" to the story.

Mention tagging allows your app's users to tag friends names within their user messages. 
```

应用中心指南[应用中心指南链接](https://developers.facebook.com/docs/games/appcenter/guidelines)

提交流程[https://developers.facebook.com/docs/opengraph/submission-process](https://developers.facebook.com/docs/opengraph/submission-process)

请同时阅读提交指南。我希望这会帮助任何人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-31T07:17:56.307

我可以将我的两个应用程序上传到 App Center，但现在好像我没有正确的游戏类型选项来上传一个

# c++ - 使用 C++ 的 MSTest：测试方法不可运行

> ID：14955105
> 
> 赞同：0
> 
> 时间：2013-02-19T10:23:26.407
> 
> 标签：c++, c++-cli, mstest

我尝试使用 MSTest 来对原生 C++ 代码执行单元测试（以尝试实现测试驱动开发）。

“添加新项目”C++ 向导中有一个 MSTest 条目。它显然在 C++/CLI 中创建了一些代码。

但是，每当我尝试运行这些测试时，Visual Studio 都会提示我这些测试不可运行：

```
Not Runnable    TestMethod2 CargoOCRTests   UTA007: Method TestMethod2 defined in class CargoOCRTests.UnitTest1 does not have correct signature. Test method marked with the [TestMethod] attribute must be non-static, public, does not return a value and should not take any parameter. for example: public void Test.Class1.Test(). 
```

但是我认为我的两个测试功能确实尊重原型 VS 抱怨：

```
namespace CargoOCRTests
{
    [TestClass]
    public ref class UnitTest1
    {
        [TestMethod]
        void TestMethod1()
        {
            Assert::IsTrue(true);
        };

        [TestMethod]
        void TestMethod2()
        {
            Assert::IsTrue(false);
        };
    };
} 
```

你知道是什么原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:26:58.547

您需要将测试方法标记为`public`

```
public:
   [TestMethod]
   void TestMethod1() {} 
```

# google-maps - 谷歌地图：设置放大选项

> ID：14955106
> 
> 赞同：0
> 
> 时间：2013-02-19T10:23:33.323
> 
> 标签：google-maps, google-maps-markers

我使用谷歌地图，我添加了 2 个标记。

**在线演示：http:**
[//jsfiddle.net/VnwFT/1/](http://jsfiddle.net/VnwFT/1/)

我只需要设置一个缩放，我也尝试`mapOpts`过`fitBounds`：

```
zoom 
minzoom
maxzoom 
```

前任：

```
var mapOpts = {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    scaleControl: true,
    scrollwheel: false,
        zoom: 16
} 
```

它不起作用。

如何设置缩放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:51:07.360

看看我在这里做了什么：

[http://jsfiddle.net/VnwFT/27/](http://jsfiddle.net/VnwFT/27/)

首先，您需要在初始化地图时定义地图的中心：

```
var mapOpts = {
    center: new google.maps.LatLng(45.764043,4.835659),
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    scaleControl: true,
    scrollwheel: false,
    zoom: 16
} 
```

然后，如果您不需要 fitBounds 函数（地图的中心已在初始化时定义），您可以对其进行注释。

然后在标记单击侦听器中，您可以编辑代码以在标记单击时缩放地图：

```
google.maps.event.addListener(pushPin, "click", function () {
    infoWindow.setOptions(options);
    infoWindow.open(map, pushPin);
    if (this.sidebarButton) this.sidebarButton.button.focus();
    map.setZoom(16);
}); 
```

# hive - 在 Hive 查询中使用不等号

> ID：14955125
> 
> 赞同：7
> 
> 时间：2013-02-19T10:24:35.783
> 
> 标签：hive

我需要在带有分区的配置单元查询中使用“！=”符号。我尝试了类似的东西

```
from sample_table
insert overwrite table sample1
partition (src='a')
select * where act=10
insert overwrite table sample1
partition (src!='a')
select * where act=20 
```

但它在“！=”符号处显示错误。我该如何替换！=

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T05:48:23.023

尝试在 hive 中使用[rlike/regex](https://cwiki.apache.org/Hive/languagemanual-udf.html#LanguageManualUDF-StringFunctions)函数来指定条件。

我认为您也可以使用 not 运算符`<>`not`!=`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T15:17:37.583

`partition (src!='a')`- 你希望 Hive 做什么 - 将“select *”结果写入任何分区而不是“a”？你看， `partition (src='a')`这意味着你正在将后面的 select 语句的结果写入名为“a”的表的分区中。“PARTITION (a=b)”不是像“WHERE a=b”这样的条件命令，你只是指定如何命名一个分区。您只需指定另一个分区名称，因此您的查询应如下所示：

`from sample_table insert overwrite table sample1 partition (src='a') select * where act=10 insert overwrite table sample1 partition (src='b') select * where act=20;`

之后，您应该会在表“sample1”中看到 2 个新分区“a”和“b”，其中分别包含来自这些分区`select * where act=10`和`select * where act=20`查询的一些数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T15:51:40.797

我可以知道你的蜂巢版本吗？尝试使用 A <> B

Hive DOCS 的描述：如果 A 或 B 为 NULL，则为 NULL，如果表达式 A 不等于表达式 B，则为 TRUE，否则为 FALSE。

# c# - 如何使用 Linq to SQL 查询带有 XML 列（作为字符串）的 SQL Server 表？

> ID：14955126
> 
> 赞同：0
> 
> 时间：2013-02-19T10:24:36.920
> 
> 标签：c#, sql-server, linq, linq-to-sql

如何使用 LINQ to SQL 查询具有 XML 数据类型列作为 IQueryable 的表？

SQL Server 表：

```
Id [int]
SomeData [xml] 
```

SomeData 的一个示例可能是：

```
<container><Person>Joe Smith</person></container> 
```

在 T-SQL 中，我可以像这样查询表来查找具有特定姓名的员工：

```
SELECT 
    *
FROM
    [MyTable]
WHERE 
    SomeData.value('(//*[local-name()="Person"])[1]', 'varchar(max)') = 'Joe Smith' 
```

或者将 xml 视为字符串，无论 xml 架构如何都搜索字符串：

```
SELECT 
    *
FROM
    [MyTable]
WHERE 
    CONVERT(varchar(max), SomeData) like '%Joe Smith%' 
```

现在我转向 LINQ to SQL，并希望执行第二个查询：

```
var myTable = db.MyTable.Where(x => x.SomeData.Value.Contains("Joe Smith")); 
```

我得到错误：

```
"The member 'System.Xml.Linq.XElement.Value' has no supported translation to SQL. 
```

**我明白为什么我会收到错误，但是有没有办法解决它？**

在这种情况下，能够将列作为字符串查询（没有 xml 结构的概念）是完全可以的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:27:15.517

创建一个将 Xml 列公开为 varchar(...) 的视图并对其进行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-14T22:01:21.997

您可以使用 System.Data.Linq.SqlClient.SqlMethods.Like() 而不是包含。

`var myTable = db.MyTable.Where(x => SqlMethods.Like(x.SomeData, "%Joe Smith%"));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:31:53.093

将 xml 文件导入带有 xml 列的临时表中，然后尝试解析文件并将其放入关系表中。

# apache-camel - 使 Camel xslt 组件使用 xml 目录来解析 DTD

> ID：14955131
> 
> 赞同：0
> 
> 时间：2013-02-19T10:25:04.880
> 
> 标签：apache-camel

我们使用camel xslt 组件来转换一个xhtml 文件。但是为了转换文件，使用的 XMLReader 从 w3c 网站下载 xhtml dtd。

是否有可能告诉 xslt 组件将 xml 阅读器配置为使用本地版本（例如，通过使用 xml 目录）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T09:07:16.247

我找到了一种使用处理器的方法，该方法使用 CatalogResolver 创建 XMLReader 并将使用此 xmlReader 的 SAXSource 放入交换中。

```
@Override
public void process(Exchange exchange) throws Exception {
    InputStream inputStream = exchange.getIn().getBody(InputStream.class);

    XMLReader xmlReader = XMLReaderFactory.createXMLReader();
    xmlReader.setEntityResolver(new CatalogResolver());
    exchange.getIn().setBody(new SAXSource(xmlReader, new InputSource(inputStream)));
} 
```

然后 xsltComponent 使用的 Transformer 将使用这个 xmlReader。

# postgresql - 将函数输出存储在数组中

> ID：14955133
> 
> 赞同：0
> 
> 时间：2013-02-19T10:25:10.627
> 
> 标签：postgresql, plpgsql, libpq

我有以下功能可以正常工作，但我不确定它是否在数组中存储任何内容。

```
DECLARE 
     _r record;
     point character varying[] := '{}';
     i int := 0;

BEGIN

FOR _r IN EXECUTE ' SELECT a.'|| quote_ident(column_name) || ' AS point
       FROM ' || quote_ident (table_name) ||' AS a'
LOOP

       point[i] = _r;
       i = i+1;

END LOOP;

RETURN point;
END; 
```

我所追求的是拥有一个数组，我可以从 javascript 端遍历并读取存储在数组中的每个值。这是正确的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:24:37.823

PL/pgSQL 或 PostgreSQL 中的数组与 javascript 或 php 中的数组无关。

如果您正在使用`libpq`-aware 客户端，例如 php，那么对数据库的任何查询都将返回一组记录，这些记录可以累积到调用方的内部数组变量中，例如[`pg_fetch_array()`php](http://php.net/manual/en/function.pg-fetch-array.php)。

如果您正在使用瘦客户端，例如 javascript，您将需要以适合 javascript 理解的格式返回数据。您将需要一个服务器端数据提供服务，该服务将通过`libpq`本机接口从 PostgreSQL 获取结果并将其转换为 javascript-ready 的，例如`JSON`. PostgreSQL 对数据类型有原生支持，`XML`而且`JSON`（目前有点受限）。不确定这是否会对您有很大帮助。

至于 PL/pgSQL 函数，我真的推荐阅读关于这种语言的[官方文档。](http://www.postgresql.org/docs/current/interactive/plpgsql.html)为了`point`在运行时查看 的值，请使用以下语句：

```
RAISE NOTICE 'point = %', point; 
```

# binary-tree - BinaryTree 函数 - 复杂性

> ID：14955135
> 
> 赞同：0
> 
> 时间：2013-02-19T10:25:15.743
> 
> 标签：binary-tree

我只是在写下不同的函数，这些函数是可以在二叉树上完成的操作。

我想知道这个函数的运行时间是多少，试图摆脱它们：

```
 getMaxDepth(Tree) //What can be the time complexity here? 
    if Tree.root = NIL return 0 // BaseCase
    leftDepth := 1 + getMaxDepth(Tree.root.left)
    rightDepth := 1 + getMaxDepth(Tree.root.right)
    if leftDepth > rightDepth then return leftDepth;
    else return rightDepth;

  internalNodeCount(Node n) // And here?
    if isLeaf(n) then return 0
    return 1 + internalNodeCount(n.left) + internalNodeCount(n.right)

  isLeaf(Node n)
    return n=NIL OR (n.left=NIL AND n.right=nil); 
```

`GetMaxDepth`我假设时间复杂度是 O(n) 因为我需要递归地遍历整个树的每个节点......有什么好的解释？

InternalNodeCount 我猜它是相同的复杂度 O(n) 出于同样的原因.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T03:38:15.950

据我了解，您似乎正在寻找一些证据。

对于 getMaxDepth 这里是解释：

```
T(1) = c1
T(n) = T(k) + T(n-k-1) + c2
where
T(n) = Time to process tree of n nodes 
n = number of nodes
k = nodes in left subtree
n-k-1 = nodes in right subtree
c1, c2 = constants (not dependent upon n) 
(Time to calculate the depth of the tree from given left and right subtree depth) 
```

除了 contants 会不同之外，同样可以应用于 internalNode 。

# android - 重启后闹钟不响

> ID：14955136
> 
> 赞同：0
> 
> 时间：2013-02-19T10:25:16.320
> 
> 标签：android

我创建了一个程序，该程序将为从日期选择器手动设置的不同日期创建警报。代码工作正常。但是如果重新启动它会丢失数据并且警报不起作用，我该如何克服

我使用的代码是

```
 int count;
@Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    OnClickListener setClickListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            /** This intent invokes the activity DemoActivity, which in turn opens the AlertDialog window */
            Intent i = new Intent("in.com.example.demoactivity");

            /** Creating a Pending Intent */
            PendingIntent operation = PendingIntent.getActivity(getBaseContext(), count++, i, Intent.FLAG_ACTIVITY_NEW_TASK);

            /** Getting a reference to the System Service ALARM_SERVICE */
            AlarmManager alarmManager = (AlarmManager) getBaseContext().getSystemService(ALARM_SERVICE);

            /** Getting a reference to DatePicker object available in the MainActivity */
            DatePicker dpDate = (DatePicker) findViewById(R.id.dp_date);

            /** Getting a reference to TimePicker object available in the MainActivity */
            TimePicker tpTime = (TimePicker) findViewById(R.id.tp_time);

            int year = dpDate.getYear();
            int month = dpDate.getMonth();
            int day = dpDate.getDayOfMonth();
            int hour = tpTime.getCurrentHour();
            int minute = tpTime.getCurrentMinute();

            GregorianCalendar calendar = new GregorianCalendar(year,month,day, hour, minute);

            long alarm_time = calendar.getTimeInMillis();

            /** Setting an alarm, which invokes the operation at alart_time */
            alarmManager.set(AlarmManager.RTC_WAKEUP  , alarm_time , operation);

            /** Alert is set successfully */
            Toast.makeText(getBaseContext(), "Alarm is set successfully",Toast.LENGTH_SHORT).show();

        }
    };      

    OnClickListener quitClickListener = new OnClickListener() {         
        @Override
        public void onClick(View v) {
            finish();
        }
    };

    Button btnSetAlarm = ( Button ) findViewById(R.id.btn_set_alarm);
    btnSetAlarm.setOnClickListener(setClickListener);

    Button btnQuitAlarm = ( Button ) findViewById(R.id.btn_quit_alarm);
    btnQuitAlarm.setOnClickListener(quitClickListener);

} 
```

从那个到活动片段

```
 public class DemoActivity extends FragmentActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {        
    super.onCreate(savedInstanceState); 

    /** Creating an Alert Dialog Window */
    AlertDemo alert = new AlertDemo();

    /** Opening the Alert Dialog Window */
    alert.show(getSupportFragmentManager(), "AlertDemo");       
} 
```

}

从这里到创建警报框的活动

公共类 AlertDemo 扩展 DialogFragment {

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    /** Turn Screen On and Unlock the keypad when this alert dialog is displayed */
    getActivity().getWindow().addFlags(LayoutParams.FLAG_TURN_SCREEN_ON | LayoutParams.FLAG_DISMISS_KEYGUARD);

    /** Creating a alert dialog builder */
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    /** Setting title for the alert dialog */
    builder.setTitle("Alarm");

    /** Setting the content for the alert dialog */
    builder.setMessage("An Alarm by AlarmManager");

    /** Defining an OK button event listener */
    builder.setPositiveButton("OK", new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            /** Exit application on click OK */
            getActivity().finish();
        }                       
    });

    /** Creating the alert dialog window */
    return builder.create();
}

/** The application should be exit, if the user presses the back button */ 
@Override
public void onDestroy() {       
    super.onDestroy();
    getActivity().finish();
} 
```

即使我重新启动设备，我也希望调用警报，请有人帮我解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:31:55.547

您必须使用`BroadcastReceiver`其中您必须`Intent.ACTION_BOOT_COMPLETED`在 Receiver 中检查和重置警报操作。例如：

```
public class MyBootReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {

        if(intent.getAction().equalsIgnoreCase(Intent.ACTION_BOOT_COMPLETED)) {
            //reset your alarm here
        }
    }

} 
```

**更新：**

使用共享偏好来存储您的数据，或者您也可以使用数据库。我使用共享偏好做了同样的事情，检查下面的代码：

```
public class MyBootReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {

        if(intent.getAction().equalsIgnoreCase(Intent.ACTION_BOOT_COMPLETED)) {
            SharedPreferences mPreferences = context.getSharedPreferences(context.getPackageName(), Context.MODE_PRIVATE);
            String datetime = mPreferences.getString("date", null);
            if(!TextUtils.isEmpty(datetime)) {
                Utility.setNotification(context);//set your alarm here.

            }
        }
    }

} 
```

# xml - 如何使用 XQuery 根据分隔符拆分字符串

> ID：14955137
> 
> 赞同：1
> 
> 时间：2013-02-19T10:25:20.247
> 
> 标签：xml, string, split, xquery

我从 sql 返回了这个 xml：

```
<Keywords>
  <Record CIMtrek_Keywords="Bus Dev|Ser Del|Sol Del|?" />
</Keywords> 
```

我想将这些值一一放入组合框中，示例代码在下面，它`Increase and Decrease`的值与我希望`Bus Dev and Ser Del and Sol Del and ?`一一获得的方式相同

```
<select size="1" style="width:60%;" name="CIMtrek_CI_CER_Type"
                                                id="CIMtrek_CI_CER_Type">
                                                <option value="0">Select Fund Type</option>
                                                <option value="Increase">
                                                    <xsl:if test="//Record/CIMtrek_CI_CER_Type/text()='Increase'">
                                                        <xsl:attribute name="selected">true</xsl:attribute>
                                                    </xsl:if>
                                                    Increase
                                                </option>
                                                <option value="Decrease">
                                                    <xsl:if
                                                        test="//Record/CIMtrek_CI_CER_Type/text()='Decrease'">
                                                        <xsl:attribute name="selected">true</xsl:attribute>
                                                    </xsl:if>
                                                    Decrease
                                                </option>
                                            </select> 
```

这就是我从 SQL 查询生成的 xml 中的值创建组合框的方式：

```
<xsl:for-each select="//CIMtrek_CarrierName/Record">
                                                    <option>
                                                        <xsl:if
                                                            test="//Record/CIMtrek_RegWhseCo_Carrier/text()=@CIMtrek_CarrierName">
                                                            <xsl:attribute name="selected">true</xsl:attribute>
                                                        </xsl:if>
                                                        <xsl:attribute name="value"><xsl:value-of
                                                            select="@CIMtrek_CarrierName" />!@#$%^*!<xsl:value-of
                                                            select="@Carrier_LateContacts" />!@#$%^*!<xsl:value-of
                                                            select="@Carrier_Contacts1" />!@#$%^*!<xsl:value-of
                                                            select="@Carrier_Contacts2" />!@#$%^*!<xsl:value-of
                                                            select="@Carrier_Contacts3" /></xsl:attribute>
                                                        <xsl:value-of select="@CIMtrek_CarrierName" />
                                                    </option>
                                                </xsl:for-each> 
```

有了 BeniBela 的回答，我无法像上面的代码一样把东西放进去，

希望贝尼贝拉能帮我弄清楚。

这该怎么做，

请帮我，

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:55:53.033

该`tokenize()`功能正是这样做的。请注意，它采用正则表达式，因此`|`必须转义为`[|]`：

```
for $o in /Keywords/Record/tokenize(@CIMtrek_Keywords, "[|]") return
  <option value="{$o}">{$o}</option> 
```

新的 xml 可以像这样转换为 xquery：

```
for $r in //CIMtrek_CarrierName/Record return  $r/
  <option value="{@CIMtrek_CarrierName}!@#$%^*!{@Carrier_LateContacts}!@#$%^*!{@Carrier_Contacts1}!@#$%^*!{@Carrier_Contacts2}!@#$%^*!{@Carrier_Contacts3}">
  {  if (//Record/CIMtrek_RegWhseCo_Carrier/text()=@CIMtrek_CarrierName) then attribute selected { "true" } else (),
     data(@CIMtrek_CarrierName)  }
  </option> 
```

开头的 $r/ 改变了上下文，所以我们不需要在每次访问属性之前都写 $r/，xsl:value-of 变成 {..} 并且 xsl:attribute 变成了一个类似 xml 的属性声明或 'attribute name {..}'

# windows - awk 的 gsub 问题（gawk）

> ID：14955138
> 
> 赞同：3
> 
> 时间：2013-02-19T10:25:23.833
> 
> 标签：windows, awk

我需要在文本文件中搜索一个字符串，并进行替换，其中包含一个随着每次匹配而递增的数字。

要“找到”的字符串可以是单个字符、单词或短语。

替换表达式并不总是相同的（如下面的示例所示），但总是包含一个递增的数字（变量）。

例如：

1）我有一个名为“data.txt”的测试文件。该文件包含：

```
Now is the time
for all good men
to come to the
aid of their party. 
```

2) 我将 awk 脚本放在名为“cmd.awk”的文件中。该文件包含：

```
/f/ {sub ("f","f(" ++j ")")}1 
```

3）我像这样使用awk：

```
awk -f cmd.awk data.txt 
```

在这种情况下，输出如预期：

```
Now is the time
f(1)or all good men
to come to the
aid of(2) their party. 
```

当一条线上有多个匹配时，问题就来了。例如，如果我正在搜索字母“i”，例如：

```
/i/ {sub ("i","i(" ++j ")")}1 
```

输出是：

```
Now i(1)s the time
for all good men
to come to the
ai(2)d of their party. 
```

这是错误的，因为它不包括“时间”或“他们”中的“我”。

所以，我尝试了“gsub”而不是“sub”，比如：

```
/i/ {gsub ("i","i(" ++j ")")}1 
```

输出是：

```
Now i(1)s the ti(1)me
for all good men
to come to the
ai(2)d of thei(2)r party. 
```

现在它替换了所有出现的字母“i”，但插入的数字对于同一行上的所有匹配项都是相同的。

所需的输出应该是：

```
Now i(1)s the ti(2)me
for all good men
to come to the
ai(3)d of thei(4)r party. 
```

注意：数字并不总是以“1”开头，所以我可能会像这样使用 awk：

```
awk -f cmd.awk -v j=26 data.txt 
```

要获得输出：

```
Now i(27)s the ti(28)me
for all good men
to come to the
ai(29)d of thei(30)r party. 
```

为了清楚起见，替换中的数字并不总是在括号内。并且替换并不总是包含匹配的字符串（实际上它非常罕见）。

我遇到的另一个问题是......

我想为“搜索字符串”使用 awk 变量（不是环境变量），所以我可以在 awk 命令行上指定它。

例如：

1) 我将 awk 脚本放在名为“cmd.awk”的文件中。该文件包含以下内容：

```
/??a??/ {gsub (a,a "(" ++j ")")}1 
```

2）我会像这样使用awk：

```
awk -f cmd.awk -v a=i data.txt 
```

要获得输出：

```
Now i(1)s the ti(2)me
for all good men
to come to the
ai(3)d of thei(4)r party. 
```

这里的问题是，如何在 /search/ 表达式中表示变量“a”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:55:58.110

awk 版本：

```
awk '{for(i=2; i<=NF; i++)$i="(" ++k ")" $i}1' FS=i OFS=i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:57:44.473

`gensub()`在这里听起来很理想，它允许您替换第 N 个匹配项，因此听起来像一个解决方案的解决方案是在循环中迭代字符串，一次`do{}while()`替换一个匹配项并递增`j`. `gensub()`如果替换不包含原始文本（或更糟糕的是，包含多次），这种简单的方法将不起作用，见下文。

因此，在 awk 中，缺少 perl 的 " `s///e`" 评估功能及其有状态的正则表达式`/g`修饰符（由 Steve 使用），剩下的最佳选择是将行分成块（*head*、*match*、*tail*）并将它们重新组合在一起：

```
BEGIN { 
    if (j=="") j=1
    if (a=="") a="f"
}
match($0,a) { 
    str=$0; newstr=""
    do {
         newstr=newstr substr(str,1,RSTART-1) # head
         mm=substr(str,RSTART,RLENGTH)        # extract match
         sub(a,a"("j++")",mm)                 # replace
         newstr=newstr mm 
         str=substr(str,RSTART+RLENGTH)       # tail
    } while (match(str,a))
    $0=newstr str     
}
{print} 
```

这`match()`用作表达式而不是`//` 模式，因此您可以使用变量。（你也可以只使用“ `($0 ~ a) { ... }`”，但是`match()`这段代码中使用了的结果，所以不要在这里尝试。）

您可以在命令行上定义`j`和。`a`

`gawk`支持`\y`相当于 perlre's `\b`，并且还支持`\<`并`\>`显式匹配单词的开头和结尾，只需注意从 unix 命令行添加额外的转义符（我不太确定 Windows 可能需要或允许什么）。

* * *

**限定`gensub()`版**

如上所述：

```
match($0,a) {
    idx=1; str=$0
    do {
        prev=str
        str=gensub(a,a"(" j ")",idx++,prev)
    } while (str!=prev && j++)
    $0=str
} 
```

这里的问题是：

*   如果您将子字符串“ `i`”替换为子字符串“ `k`”或“ `k(1)`”，则`gensub()`下一个匹配项的索引将关闭 1。如果您提前知道这一点，或者改为通过字符串向后工作，则可以解决此问题。
*   如果将子字符串“ `i`”替换为子字符串“ `ii`”或“ `ii(i)`”，则会出现类似的问题（导致无限循环，因为`gensub()`不断寻找新的匹配项）

稳健地处理这两种情况是不值得的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:00:08.200

我并不是说这不能使用`awk`.，但我强烈建议转向更强大的语言。改为使用`perl`。

要包括从 26 开始的字母计数`i`，请尝试：

```
perl -spe 's:i:$&."(".++$x.")":ge' -- -x=26 data.txt 
```

这也可以是一个 shell 变量：

```
var=26
perl -spe 's:i:$&."(".++$x.")":ge' -- -x=$var data.txt 
```

结果：

```
Now i(27)s the ti(28)me
for all good men
to come to the
ai(29)d of thei(30)r party. 
```

* * *

要包含特定单词的计数，请在单词`\b`周围添加单词边界（即 ），尝试：

```
perl -spe 's:\bthe\b:$&."(".++$x.")":ge' -- -x=5 data.txt 
```

结果：

```
Now is the(6) time
for all good men
to come to the(7)
aid of their party. 
```

# barcode - Code128 条码语言独立

> ID：14955145
> 
> 赞同：2
> 
> 时间：2013-02-19T10:25:34.010
> 
> 标签：barcode

我正在使用这个[code128 条形码字体](http://www.jtbarton.com/Barcodes/Code128.aspx)。它工作正常，但是当我有下划线 (_) 时，我的 USB 条形码阅读器会自动将其转换为减号 (-)。我尝试切换键盘语言并得到一个斜杠 (/)。所以，我认为语言有问题。我想要一个与语言无关的条形码。这可能吗？如何？

我用来生成条形码表示的代码就像[这里](http://grandzebu.net/informatique/codbar-en/code128.htm)所说的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:14:35.620

我解决了。问题是我的条形码扫描仪（Datalogic HeronG）的设置。我将 USB 接口设置为`USB-KBD - ALT-mode`. 在该`USB-KBD`模式下，扫描仪模拟国家键盘。

# angularjs - 如何在 AngularJS 的 ng-repeat 中对对象数据源进行排序？

> ID：14955146
> 
> 赞同：50
> 
> 时间：2013-02-19T10:25:48.073
> 
> 标签：angularjs, angularjs-ng-repeat, angularjs-orderby

假设我有以下用户：

```
$scope.users = {
  "2": {
    email: 'john@gmail.com',
    name: 'John'
  },
  "3": {
    email: 'elisa@gmail.com',
    name: 'Elisa'
  }
} 
```

我想`<select>`使用以下选项创建一个：

```
<option value="3">Elisa</option>
<option value="2">John</option> 
```

换句话说，用户应该按名称排序。

我使用语法尝试了以下操作[`(key, value) in expression`](http://docs.angularjs.org/api/ng.directive:ngRepeat#Parameters)，但它不起作用：

```
<option ng-repeat="(user_id, user) in users | orderBy:'user.name'" 
        value="{{ user.id }}">
  {{ user.name }}
</option> 
```

[活的例子在这里。](http://plnkr.co/edit/u54UQsI9PZRvF5j2cm09?p=preview)

我错过了什么？

请不要建议与`ng-options`我使用[`ui-select2`](http://angular-ui.github.com#directives-select2)的不兼容的解决方案`ng-options`。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-09-22T00:17:07.603

虽然您会在链接中作者的答案引用的线程中看到这一点，但我认为最好在 SO 上提出上述解决方法之一：

确实，这在技术上没有实现，但是如果您愿意稍微更改数据模型，则可以轻松解决：使用自定义过滤器生成对象属性的数组（**无需**替换）。如果您将关键字段添加到对象（在上述情况下为“id”），您应该能够获得您正在寻找的行为：

```
app.filter("toArray", function(){
    return function(obj) {
        var result = [];
        angular.forEach(obj, function(val, key) {
            result.push(val);
        });
        return result;
    };
});
...

$scope.users = {
    1: {name: "John", email: "john@gmail.com", id: 1},
    2: {name: "Elisa", email: "elisa@gmail.com", id: 2}
}; 
```

这是可以使用的 ng-repeat 指令：

```
<option value="{{user.id}}" ng-repeat="user in users | toArray | orderBy:'name'">{{user.name}}</option> 
```

这是[plunkr](http://plnkr.co/edit/YDyTarL8KOs2Sngyvjtl?p=preview)。

请注意，`orderBy`过滤器将`name`其作为参数，而不是`user.name`.

不幸的是，将`id`属性添加到您的对象确实会造成与包含对象中的键不匹配的可能性。

在您在回答中提到的链接中，还提出了`id`在用户对象中动态创建属性的解决方案，但我觉得这种方法不那么混乱（以引入数据复制为代价）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-19T10:33:37.820

好的，我找到了答案：

[它还没有实现:(](https://github.com/angular/angular.js/issues/1286)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T13:38:14.053

添加到接受的答案并查看您的数据格式，您应该将数据转换为

```
app.filter('myFilterUsers',function(){
    return function(data)
    {
        var newRes = [];
        angular.forEach(data,function(val,key){
            val["id"] = key;  //Add the ID in the JSON object as you need this as well.
            newRes.push(val);
        });
        return newRes;
    }
}); 
```

# c - 拦截路由器上的udp数据包

> ID：14955151
> 
> 赞同：2
> 
> 时间：2013-02-19T10:25:57.813
> 
> 标签：c, linux, sockets, network-programming

我在PC上有一个客户端。我在PC上有一台服务器。客户端和服务器通过基于 Linux 操作系统固件的路由器连接。
客户端向服务器发送数据包并接收响应。路由器必须拦截数据包并对其进行修改。像嗅探一样的东西，但它不是嗅探，因为我需要修改数据包。
我必须为此编写一个程序。
我试图在路由器上打开一个原始套接字，但原始套接字上的 reсvfrom 不会拦截数据包而只是复制它。数据包正在进行中。
你能建议我解决这个问题的任何方法吗？
PS对不起我的英语不好。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:47:10.920

我会混合使用`iptables`和`libnetfilter_queue`（假设您的内核是相对较新的）

1.  添加将`iptables`所有 udp 数据包转发到的规则，`NFQUEUE 0`以便将数据包从内核获取到用户空间。

    `iptables -A INPUT -p udp -m udp --dport xxxxx -j NFQUEUE --queue-num 0`

2.  构建一个进程来监听`NFQUEUE number 0`、修改有效负载并使用功能将完整的数据包返回给内核空间`libnetfilter_queue`。按照[此链接](http://www.netfilter.org/projects/libnetfilter_queue/doxygen/group__Queue.html#ga593b576017b7423646f49558a39f4ee5)了解如何操作。

简而言之，您必须打开队列 0 ( `nfq_create_queue`)，设置模式以获取数据包的内容 ( `nfq_set_mode`)，然后无限循环`recv`以获取被过滤的 udp 数据包`iptables`

```
fd = nfq_fd(h);

while ((rv = recv(fd, buf, sizeof(buf), 0)) >= 0) {
    printf("pkt received\n");
    nfq_handle_packet(h, buf, rv);
} 
```

每次调用`nfq_handle_packet`时，都会调用阶段期间定义的回调`nfq_create_queue`。在该回调中，您必须修改有效负载，更新大小并重新计算校验和，然后设置为“有效”`nfq_set_verdict`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:29:08.147

我为内核和一些应用程序编写了模块。模块使用 netfilter 并丢弃我需要到 netfilter_queue 的数据包。应用程序处理一个队列，我决定如何处理每个包。

```
uint hook_main(uint hooknum,
                  struct sk_buff *skb,
                  const struct net_device *in,
                  const struct net_device *out,
                  int (*okfn)(struct sk_buff *)  )
{
     struct iphdr *ip;
     struct udphdr *udp;
     if (skb->protocol == htons(ETH_P_IP)){
        ip = (struct iphdr *)(skb->data);
        if (ip->version == 4 && ip->protocol == IPPROTO_UDP){
            udp = (struct udphdr *)(skb->data + sizeof(struct iphdr));
            if(ntohs(udp->dest) == SOME_PORT){
                return NF_QUEUE;
            }
        }
     }
     return NF_ACCEPT;
}

int init_module ()
{
    printk("[udp-catch] start udp-catch\n");

    catch_hook.hook = hook_main;
    catch_hook.owner = THIS_MODULE;
    catch_hook.pf = PF_INET;
    catch_hook.hooknum = NF_INET_FORWARD;
    catch_hook.priority = NF_IP_PRI_FIRST;
    nf_register_hook(&catch_hook);

    return 0;
} 
```

[来自 netfilter.org 的重新设计示例](http://www.netfilter.org/projects/libnetfilter_queue/doxygen/nfqnl__test_8c_source.html)是该应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:36:39.407

路由器将自动发送它们在其他端口上接收到的任何内容。

例如，对于一个 4 端口路由器，从端口 1 进入的内容将在端口 2,3 和 4 上发送出去。

要执行您需要的操作，您需要另一台带有 2 个网卡的 PC。将您的客户端 PC 连接到一个网卡，将服务器 PC 连接到另一个。

然后你的程序需要从一张网卡上*recvfrom ，修改数据包**并发*送到另一张网卡上。

# php - 即使没有分配房间，SQL 计数值也会返回 0

> ID：14955152
> 
> 赞同：0
> 
> 时间：2013-02-19T10:25:59.583
> 
> 标签：php, mysql

我的 SQL 查询再次出现问题...

D.0.02 已分配给第 1 天的第 1 期，所以它应该算 0。但它没有分配给第 1 天的第 2 期。为什么它返回为 0？

```
SELECT COUNT(DISTINCT rm.Id)
FROM ts_room rm LEFT JOIN ts_roompref rp ON rp.room_id = rm.id
  LEFT JOIN ts_request rq ON rq.id = rp.request_id
  LEFT JOIN ts_allocation a ON a.request_id = rq.id
WHERE room_id = "D.0.02"
  AND (a.status IS NULL OR a.status IN ('Pending', 'Failed', 'Declined'))
  AND (day_id=1 AND period_id=2) 
```

这是我的小提琴：[http ://sqlfiddle.com/#!2/5e1de/13](http://sqlfiddle.com/#!2/5e1de/13)

如果状态不是 Pending、Failed、Declined，则忽略该房间，但它可以在其他期间或几天内免费但未预订 - 如果未预订，则未分配 - 这意味着 day_id 和 period_id 将不存在，但房间仍然可以免费预订。

看来我需要重新输入我的 SQL 查询。关于如何做的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:31:22.590

`Count()` **即使没有行匹配，也**总是返回一个数字。**在您的情况下，没有行匹配，因此 count() 返回`0`。**

 ****编辑：**

您的选择会计算预订数量。0 表示未预订。

如果要在未预订时返回 1，则需要将其撤消：

```
SELECT 1 - COUNT(DISTINCT rm.Id) 
FROM ts_room rm LEFT JOIN ts_roompref rp ON rp.room_id = rm.id
  LEFT JOIN ts_request rq ON rq.id = rp.request_id
  LEFT JOIN ts_allocation a ON a.request_id = rq.id
WHERE room_id = "D.0.02"
  AND a.status = 'Allocated'
       AND day_id=1 AND period_id=2 
```

请注意，如果您进行更广泛的搜索，例如一天中的所有时段，您需要将 更改`1`为时段数 ( `9`) 以返回空闲时段的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:42:55.513

房间的状态`D.0.02` 是`"Allocated"`。

`a.status IN ('Pending', 'Failed', 'Declined')`=假

`a.status IS NULL`=假

语句的结果`WHERE`变为`false`。

没有找到房间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:00:48.377

问题是您的 dayId 和 period_id 是 varchar 并且您将其作为数字进行比较

更新查询的最后一行，并添加该 day_id 和 period_id 的记录，以便获得结果。

```
AND (day_id like "1" AND period_id like "2") 
```

更新

```
 select 1- count(distinct rp.Id) from 
ts_roompref rp, ts_request rq, ts_allocation ta
where rp.room_id= "D.0.02" AND rq.id = rp.request_id and
ta.request_id = rq.id AND ta.status not in ("Pending", "Declined", "Failed")
AND day_id like "1" AND period_id like "5"; 
```

检查 [http://sqlfiddle.com/#!2/5e1de/187](http://sqlfiddle.com/#!2/5e1de/187)

希望这可以帮助**

# html - 三列html的问题

> ID：14955157
> 
> 赞同：1
> 
> 时间：2013-02-19T10:26:14.867
> 
> 标签：html, multiple-columns

我有一个三列显示的问题。我在两列之间有空格。很难用语言来解释，所以这里是一个屏幕：

![在此处输入图像描述](../Images/26a5a64522870025884b19eb05ff5689.png)

每个大类（挖掘机、装载机……）都是 UL。`float:left` 我想删除装载机和平地机之间或刮板机和伸缩叉车之间的空白区域...

这是生成的 HTML

```
<div class="right_list">
                <ul class="group_list">
        <li><a class="titre_cat" href="xxx" title="Excavators">Excavators (588)</a></li>

                                            <li><a class="sous_cat" href="xxx" title="Dragline Excavators ">Dragline Excavators  (1)</a></li>
                                <li><a class="sous_cat" href="xxx" title="Track excavators ">Track excavators  (239)</a></li>
                                <li><a class="sous_cat" href="xxx" title="Wheel excavator">Wheel excavator (111)</a></li>
                                <li><a class="sous_cat" href="xxx" title="Industrial excavators">Industrial excavators (3)</a></li>
                                <li><a class="sous_cat" href="xxx" title="Excavators accesories">Excavators accesories (13)</a></li>
                                <li><a class="sous_cat" href="xxx" title="Mini digger ">Mini digger  (221)</a></li>
                                </ul>
[... and more and more ...]
</div> 
```

这是应用的CSS：

```
.right_list {
    float: left;
    margin: 0 0 0 7px;
    width: 756px;
}

.group_list {
    float: left;
    margin: 0 10px 5px 0;
    width: 242px;
} 
```

这是我想要的：

![在此处输入图像描述](../Images/16d1f2e648baea08b90eb9ac61bc1316.png)

祝你今天过得愉快

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:29:07.917

尝试先创建 3 列，然后将 div 放入这些列中。列本身也应该是`div`.

```
<div class="col">
  <div class="right_list"></div>
  <div class="right_list"></div>
  <div class="right_list"></div>
</div>
<div class="col">
  <div class="right_list"></div>
  <div class="right_list"></div>
  <div class="right_list"></div>
</div>
<div class="col">
  <div class="right_list"></div>
  <div class="right_list"></div>
  <div class="right_list"></div>
</div> 
```

# full-text-search - 使用 Word1 和 NOT Word2 进行 XQuery 全文搜索

> ID：14955164
> 
> 赞同：4
> 
> 时间：2013-02-19T10:26:34.963
> 
> 标签：full-text-search, basex, xquery-3.0

以下是 XML 结构 -

```
<Docs>
  <Doc>
    <Name>Doc 1</Name>
    <Notes>
        <specialNote>
          This is a special note section. 
           <B>This B Tag is used for highlighting any text and is optional</B>        
           <U>This U Tag will underline any text and is optional</U>        
           <I>This I Tag is used for highlighting any text and is optional</I>        
        </specialNote>      
        <generalNote>
           <P>
            This will store the general notes and might have number of paragraphs. This is para no 1\. NO Child Tags here         
           </P>
           <P>
            This is para no 2            
           </P>  
        </generalNote>      
    </Notes>  
    <Desc>
        <P>
          This is used for Description and might have number of paragraphs. Here too, there will be B, U and I Tags for highlighting the description text and are optional
          <B>Bold</B>
          <I>Italic</I>
          <U>Underline</U>
        </P>
        <P>
          This is description para no 2 with I and U Tags
          <I>Italic</I>
          <U>Underline</U>
        </P>      
    </Desc>
</Doc> 
```

将有 1000 个`Doc`标签。我想给用户一个搜索条件，他可以搜索`WORD1`而不是`WORD2`。以下是查询 -

```
for $x in doc('Documents')/Docs/Doc[Notes/specialNote/text() contains text 'Tom' 
ftand  ftnot 'jerry' or 
Notes/specialNote/text() contains text 'Tom' ftand ftnot 'jerry' or 
Notes/specialNote/B/text() contains text 'Tom' ftand ftnot 'jerry' or 
Notes/specialNote/I/text() contains text 'Tom' ftand ftnot 'jerry' or 
Notes/specialNote/U/text() contains text 'Tom' ftand ftnot 'jerry' or
Notes/generalNote/P/text() contains text 'Tom' ftand ftnot 'jerry' or 
Desc/P/text() contains text 'Tom' ftand ftnot 'jerry' or 
Desc/P/B/text() contains text 'Tom' ftand ftnot 'jerry' or 
Desc/P/I/text() contains text 'Tom' ftand ftnot 'jerry' or 
Desc/P/U/text() contains text 'Tom' ftand ftnot 'jerry']
return $x/Name 
```

这个查询的结果是错误的。我的意思是，结果包含一些带有`Tom`和的文档`jerry`。所以我将查询更改为 -

```
for $x in doc('Documents')/Docs/Doc[. contains text 'Tom' ftand ftnot 'jerry'] 
return $x/Name 
```

这个查询给了我确切的结果，即；只有那些带有`Tom`and Not的文档`jerry`，但需要花费大量时间......大约。45 秒，而前一个花了 10 秒！

我正在使用 BaseX 7.5 XML 数据库。

需要专家对此的评论:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:24:39.780

第一个查询分别测试文档中的每个文本节点，因此`<P><B>Tom</B> and <I>Jerry</I></P>`会匹配，因为第一个文本节点包含*Tom*但不包含*Jerry*。

在第二个查询中，对元素的所有文本内容执行全文搜索，就`Doc`好像它们被连接成一个字符串一样。[BaseX 的全文索引](http://docs.basex.org/wiki/Full-Text)（目前）不能回答这个问题，它分别索引每个文本节点。

一种解决方案是分别对每个术语执行全文搜索并最终合并结果。这可以对每个文本节点分别进行，因此可以使用索引：

```
for $x in (doc('Documents')/Docs/Doc[.//text() contains text 'Tom']
            except doc('Documents')/Docs/Doc[.//text() contains text 'Jerry'])
return $x/Name 
```

上面的查询被查询优化器重写为这个等价的查询，使用两个索引访问：

```
for $x in (db:fulltext("Documents", "Tom")/ancestor::*:Doc
            except db:fulltext("Documents", "Jerry")/ancestor::*:Doc)
return $x/Name 
```

如果需要，您甚至可以调整合并结果的顺序，以使中间结果保持较小。

# solr - Solr - 获取给定用户的所有“filemetadata.filesize”字段的总和

> ID：14955165
> 
> 赞同：0
> 
> 时间：2013-02-19T10:26:39.543
> 
> 标签：solr

我正在构建某种文件存储软件。文件元数据 使用`filesize`和`userId`

我想做的是能够计算用户使用的空间。

例如，如果我有文件：

*   文档 ID = 1 | 用户 ID = 1 | 文件大小 = 10
*   文档 ID = 2 | 用户 ID = 2 | 文件大小 = 5
*   文档 ID = 3 | 用户 ID = 1 | 文件大小 = 3

我想运行一个查询，以便对于 userId=1 我检索结果为 13MB (10+3)

* * *

我已经看到我们可以运行[FunctionQuery](http://wiki.apache.org/solr/FunctionQuery)但它似乎并没有做我想要的。

对于不允许在分组结果上运行聚合函数的[FieldCollapsing也是如此。](http://wiki.apache.org/solr/FieldCollapsing)

* * *

我也测试了 StatsComponent，但由于未知原因，它似乎不起作用。

我的架构包含：

```
<field name="FileSize" type="integer" indexed="false" stored="true" required="true" />
<field name="OtherField" type="sfloat" indexed="true" stored="true" required="false" />
<field name="OtherField2" type="integer" indexed="true" stored="true" required="false" multiValued="false"/>
<field name="OtherField3" type="integer" indexed="true" stored="true" required="false" multiValued="false"/> 
```

当我执行查询时

```
http://mysolr:8414/solr/mycore/select/?q=docId:123
&rows=0
&stats=true
&stats.field=FileSize
&stats.field=OtherField
&stats.field=OtherField2
&stats.field=OtherField3 
```

我得到了结果：

```
<lst name="stats">
  <lst name="stats_fields">
    <null name="FileSize"/>
    <lst name="OtherField">
      <double name="min">6.0</double>
      <double name="max">6.0</double>
      <long name="count">1</long>
      <long name="missing">0</long>
      <double name="sum">6.0</double>
      <double name="sumOfSquares">36.0</double>
      <double name="mean">6.0</double>
      <double name="stddev">0.0</double>
      <lst name="facets"/>
    </lst>
    <lst name="OtherField2">
      <double name="min">0.0</double>
      <double name="max">0.0</double>
      <long name="count">1</long>
      <long name="missing">0</long>
      <double name="sum">0.0</double>
      <double name="sumOfSquares">0.0</double>
      <double name="mean">0.0</double>
      <double name="stddev">0.0</double>
      <lst name="facets"/>
    </lst>
    <null name="OtherField3"/>
  </lst>
</lst> 
```

正如您所看到的，我正在询问单个文档的统计信息（这并不是真正有用但有助于调试，无论如何没有`q=docId:123`它不会给我带来更好的结果）。该文档的 FileSize 设置为 15 我使用 Solr 4.1

有人可以解释一下为什么我可以获得字段和的统计信息`OtherField`，`OtherField2`但不能获得字段`FileSize`和的统计信息`OtherField3`吗？我完全看不出问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:01:46.090

好消息，写这个问题帮助我找到了解决方案。我使用旧版模式​​，但没有注意到该`FileSize`字段有`indexed="false"`. 将此属性传递给 true 会使 StatsComponent 返回该字段的统计信息！

但是，对于`OtherField3`与 定义完全相同的字段`OtherField2`，我没有答案

# java - java.lang.UnsatisfiedLinkError：无法加载库“jpbc-pbc”：找不到指定的模块

> ID：14955169
> 
> 赞同：1
> 
> 时间：2013-02-19T10:26:52.617
> 
> 标签：java

我怎么解决这个问题：

```
java.lang.UnsatisfiedLinkError: Unable to load library 'jpbc-pbc': The specified module could not be found.
    at com.sun.jna.NativeLibrary.loadLibrary(NativeLibrary.java:164)
    at com.sun.jna.NativeLibrary.getInstance(NativeLibrary.java:237) 
    at com.sun.jna.Library$Handler.<init>(Library.java:140) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:32:20.687

看起来您正在使用需要一些本机库（.dll 或 .so 文件）的 Java 库（.jar 文件），但 JVM 找不到该本机库。本机库可能被命名为`jpbc-pbc.dll`or `libjpbc-pbc.so`。确保你有这个文件，并且它的路径在你的`LD_LIBRARY_PATH`（在 Unix 上）或在你的`PATH`（在 Windows 上）或`java.library.path`JVM 属性中。

# reporting-services - SSRS 导出到每个文件限制的 word 页

> ID：14955172
> 
> 赞同：-2
> 
> 时间：2013-02-19T10:27:02.970
> 
> 标签：reporting-services, ms-word, export, report, limit

我需要在 30 页的文件中将 SSRS 报告导出到 Word。因此，如果报告包含 100 页，我必须获得 4 个 doc 文件（30、30、30 和 10 页）。这该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:18:53.203

您只能使用报告服务以编程方式执行此操作。为此，您需要：

1.  向您的报告添加附加参数，该参数将指示输出的页面范围（即 1-30、31-60...）。并仅在报告中生成该范围的页面。
2.  为此服务生成 wcf 客户端：

    > `http://[server name]/[reportserver path]/ReportExecution2005.asmx`

    例如：

    > `http://localhost/reportserver/ReportExecution2005.asmx`

3.  使用 render 方法分别生成和导出所有报表。您可以在此处阅读有关渲染方法的更多信息：[msdn 渲染方法](http://msdn.microsoft.com/en-us/library/microsoft.wssux.reportingserviceswebservice.rsexecutionservice2005.reportexecutionservice.render%28SQL.90%29.aspx)

# java - 如何声明 Java 服务器（码头）电子邮件服务？

> ID：14955179
> 
> 赞同：0
> 
> 时间：2013-02-19T10:27:23.053
> 
> 标签：java, spring, email, smtp

我正在使用 Spring 邮件服务从我的服务器发送电子邮件。但是，如何确保服务器主机（在用户环境中运行）运行 SMTP 服务器？

默认情况下，本地主机上的 Spring 服务器用户端口为 25。我应该在用户安装我的服务器时从用户那里获取 SMTP 配置，还是有更友好的方式来发送电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:59:48.080

像这样创建一个 bean 并将其添加到您的应用程序上下文文件中。

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host"><value>smtp.gmail.com</value></property>
    <property name="port"><value>587</value></property>
    <property name="protocol"><value>smtp</value></property>
    <property name="username" value="YOUR-MAIL-ID-HERE" />
    <property name="password" value="YOUR-PASSWORD-HERE" />

    <property name="javaMailProperties">
        <props>
            <prop key="mail.smtp.auth">true</prop>
            <prop key="mail.smtp.starttls.enable">true</prop>
            <prop key="mail.smtp.timeout">25000</prop>
        </props>
    </property>
</bean> 
```

并且您可能应该使用模板引擎`Thymeleaf`（参见[此处](http://www.thymeleaf.org)）将电子邮件的内容设置在单独的文件中。

希望这可以帮助..

# python - 如何在没有引用对象的实例的情况下获取 collection_name？

> ID：14955182
> 
> 赞同：1
> 
> 时间：2013-02-19T10:27:34.023
> 
> 标签：python, google-app-engine, collections, referenceproperty

我正在做一个关于客户、产品和草稿的简单程序。

由于它们以某种方式相互引用，因此当我删除一种实体时，另一种实体可能会出错。

这是我所拥有的：

-客户.py

```
class Customer(db.Model):
    """Defines the Customer entity or model."""
    c_name      = db.StringProperty(required=True)
    c_address   = db.StringProperty()
    c_email     = db.StringProperty() ... 
```

-draft.py

```
class Draft(db.Model):
    """Defines the draft entity or model."""
    d_customer      = db.ReferenceProperty( customer.Customer,
                                        collection_name='draft_set')
    d_address       = db.StringProperty()
    d_country       = db.StringProperty() ... 
```

好的，现在我要做的是在删除客户之前检查客户是否有任何引用他的草稿。这是我正在使用的代码：

```
def deleteCustomer(self, customer_key):
    '''Deletes an existing Customer'''

    # Get the customer by its key
    customer = Customer.get(customer_key)

    if customer.draft_set: # (or customer.draft_set.count > 0...)
        customer.delete()

    else:
        do_something_else() 
```

而现在，问题来了。如果我之前创建了一个包含选定客户的草稿，则完全没有问题，它会做必须做的事情。但是，如果我没有创建任何引用该客户的草稿，则在尝试删除他时，它将显示此错误：

```
AttributeError: 'Customer' object has no attribute 'draft_set' 
```

我究竟做错了什么？是否需要始终创建包含客户的草稿以使 collection_name 属性“可用”？

***编辑***：我发现了错误是什么。由于我在不同的 .py 文件中都有这两个类，因此 GAE 似乎在“通过”包含该模型的文件的同时将实体加载到数据存储中。因此，如果我正在执行该程序，并且从不使用或导入该文件，则数据存储在此之前不会更新。现在我正在做的是：

```
from draft.py import Draft 
```

在de“deleteCustomer（）”函数内部，它终于可以正常工作了，但是因此我得到了一个可怕的“未使用警告”。

有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:33:44.470

collection_name 属性是一个查询，因此它应该始终可用。

您可能缺少的是`reference_class`参数（查看[ReferenceProperty 文档](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#ReferenceProperty)）

```
class Draft(db.Model):
"""Defines the draft entity or model."""
    d_customer = db.ReferenceProperty(reference_class=customer.Customer, collection_name='draft_set') 
```

以下应该有效：

```
if customer.draft_set.count():
    customer.delete() 
```

请注意，`customer.draft_set`它将始终返回 true，因为它是生成的 Query 对象，因此您必须使用`count()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T14:33:26.473

有两种可能的解决方案：

1.  丑陋的，坏的：如我编辑的问题中所述。

2.  最佳实践：将**所有模型放在**一个文件（例如 models.py）中，如下所示：

    ```
    class Customer(db.Model):

        """Defines the Customer entity or model."""

        c_name      = db.StringProperty(required=True)
        c_address   = db.StringProperty()
        c_email     = db.StringProperty() ...

    class Draft(db.Model):

        """Defines the draft entity or model."""
        d_customer      = db.ReferenceProperty( customer.Customer,
                                    collection_name='draft_set')
        d_address       = db.StringProperty()
        d_country       = db.StringProperty() ... 
    ```

简单的！

# regex - 在 Sublime Text 2 中使用正则表达式搜索

> ID：14955189
> 
> 赞同：0
> 
> 时间：2013-02-19T10:28:06.347
> 
> 标签：regex, sublimetext2

我想创建一个规则来删除`array(`和`)`从此文本：

```
"price"=>     array(129), 
```

要得到：

```
"price"=>     129, 
```

我尝试了这个表达式但没有成功：

```
(?<="price"=>\s*)array\((?=\d*)\)(?=,) 
```

然后我决定分两步更换。首先，我删除了`array(`：

```
(?<="price"=>\s\s\s\s\s)array\( 
```

并得到：

```
"price"=>     129), 
```

所以我只需要删除一个右括号`)`。我试过没有成功：

```
(?<="price"=>\s*\d*)\)(?=,) 
```

这有效，但仅适用于已知数量的空格和数字：

```
(?<="price"=>\s\s\s\s\s\d\d\d)\)(?=,) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:21:46.187

试试这个寻找：

`("price"=>\s+)array\((\d+)\)`

这用于替换：

`\1\2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:51:28.297

尝试这个：

```
(?:(?<=\"price\"=>\s*)array\((?=\d+\)))|(?<=\"price\"=>\s*array\(\d+)\) 
```

正则表达式主要由两部分组成（中间的管道是一个交替符号，这意味着如果第一部分不匹配，它应该寻找第二部分）。

第一部分通过分别使用[后视](http://www.php.net/manual/en/regexp.reference.assertions.php)**(?<= ... )**和[前瞻](http://www.php.net/manual/en/regexp.reference.assertions.php)**(?= ... )**符号检查**数组 (**前面是否为**"price"=> ...**并由**)**后接.

 ****```
(?:(?<=\"price\"=>\s*)array\((?=\d+\))) 
```

然后我们有一个管道（上面解释过）..

```
| 
```

第二部分检查是否**)**前面是我们之前匹配的所有内容 ( **"price"=> array(129** ) 也使用[后视](http://www.php.net/manual/en/regexp.reference.assertions.php)符号**(<= ... )**：

```
(?<=\"price\"=>\s*array\(\d+)\) 
```

因此，对于字符串**"price"=> array(129)，**结果应该是两个匹配项：**array(**和**)**。

请让我知道这是否适合您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T10:42:46.257

你可以用这个匹配整行

```
\"price"[^a)]+(array\()\d+(\),) 
```

它包含一组用于“array(”，另一组用于“)”****

# php - 将运行时创建的文本框保存到 mysql 数据库中

> ID：14955190
> 
> 赞同：-2
> 
> 时间：2013-02-19T10:28:06.483
> 
> 标签：php, html, mysql

嗨，我是 php 新手。我正在处理一个表单，它在打开页面时创建一个动态表问题是该表由输入文本框组成，我不知道将其保存到我的数据库中我知道基本的插入查询但是这个一个是棘手的部分谁能帮助我这里是我的代码

```
 <table border='0px'>
                <?php 
                $c = 1;
                $scomp = mysql_query("SELECT * FROM subject WHERE compulsory!='$c'")or die(mysql_error());
                $v =0;
                while($fsub = mysql_fetch_array($scomp)){

                $ycode = $fsub["code"];
                echo "<tr>";
                echo "<td width='200px'><font color='#FF6600'><strong>$fsub[name]</strong></td><td><input name='s_$ycode' type='text' size='1' maxlength='2'></td>";
                echo "</tr>";
                $v++;
                }
                 echo "<input id='hh' name='hh' type='text' value= '$v'/>";
                ?>
            </table> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T10:37:46.843

您没有使用连接运算符将字符串与变量连接起来。PHP 中的连接运算符是 (.) 点运算符。即使您运行 mysql 查询，您也不会得到任何记录。

以下是您的查询的正确语法

$scomp = mysql_query("SELECT * FROM subject WHERE!= ".$c);

以下是您的固定代码。现在就试试

```
 $c = 1;
            $scomp = mysql_query("SELECT * FROM subject WHERE compulsory!=".$c)or die(mysql_error());
            $v =0;
            while($fsub = mysql_fetch_array($scomp)){

            $ycode = $fsub["code"];
            echo "<tr>";
            echo "<td width='200px'><font color='#FF6600'><strong>".$fsub[name]."</strong></td><td><input name='s_".$ycode."' type='text' size='1' maxlength='2'></td>";
            echo "</tr>";
            $v++;
            }
             echo "<input id='hh' name='hh' type='text' value= '$v'/>";
            ?>
        </table> 
```

# excel - 如何通过单击按钮将值添加到 Excel 表格中？

> ID：14955192
> 
> 赞同：0
> 
> 时间：2013-02-19T10:28:07.657
> 
> 标签：excel, userform, vba

我需要填写目录。

我想为此进行输入`Userform`，通过单击按钮将`add new product`值`Textboxes`插入到特定列

```
Private Sub CommandButton1_Click()

 Sheet3.Cells.Rows.Insert
 Sheet3.Cells(25, 27).Value = TextBox1.Value

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:58:31.483

这是你正在尝试的吗？

```
Private Sub CommandButton1_Click()
    With Sheet3
        '~~> Insert row at the 25th row.
        .Rows(25).Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
        '~~> Add textbox value
        .Cells(25, 27).Value = TextBox1.Value
    End With
End Sub 
```

# c - 引用的复合数组文字的生命周期

> ID：14955194
> 
> 赞同：5
> 
> 时间：2013-02-19T10:28:22.413
> 
> 标签：c, compound-literals

我最近才知道我实际上可以在 C 中使用对复合文字数组的引用，我觉得这很有用，但我不太明白它是如何工作的。

例如，假设我使用该功能来避免必须为调用某个我不关心返回名称长度的套接字接口函数声明一个变量，如下所示：

```
int sockfamily(int fd)
{
    struct sockaddr_storage ss;

    getpeername(fd, (struct sockaddr *)&ss, (socklen_t [1]){sizeof(ss)});
    return(ss.ss_family);
} 
```

显然，`sizeof(ss)`需要实际存储在堆栈中以便将指向它的指针传递给`getpeername`，因此必须为此目的分配和保留堆栈上的空间，但是此分配的生命周期是多少？我可以相信它保持分配状态多久？

查看 GCC 的汇编输出，我观察到如果我将调用放入`getpeername`循环中，分配不会在循环的多次迭代中继续存在，但还有哪些其他条件可能导致它不存在？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T10:37:28.283

在函数中定义的*复合文字*具有与包含它的块关联的自动生命周期（即与在同一级别上声明的变量具有相同的生命周期）。这在标准第 6.5.2.5p5 段中有所规定。

```
int f() {
    for (int i = 0; i < 10; ++i) {
        int *j = (int []){i};  // storage duration of loop body
    }
} 
```

这实质上意味着复合文字等价于在同一范围内声明和初始化的变量：

```
int f() {
    for (int i = 0; i < 10; ++i) {
        int __unnamed[] = {i};
        int *j = __unnamed;
    }
} 
```

如果在任何地方传递复合文字，它们的指针可能会持续到它们的生命周期，请注意：

```
int f() {
    int *p;
    if (1) {
        p = (int []){0, 1, 2};
        assert(p[0] == 0);
    }
    // *p is undefined
} 
```

# eclipse - 如何使用 Eclipse AST 了解 StringLiterals？

> ID：14955197
> 
> 赞同：3
> 
> 时间：2013-02-19T10:28:36.703
> 
> 标签：eclipse, rcp, eclipse-jdt, string-literals, abstract-syntax-tree

我需要创建一个 Eclipse 插件，当我将鼠标悬停在字符串文字上时显示工具提示。但前提是该字符串文字是特殊方法的第一个参数。

这是我用来测试插件的 Test.java 文件：

```
package test;

public class Test {
    public static void main(String[] args) {
        String hello = "Hello";
        String world = Translator.get("Test.worldLabel");
        System.out.println(hello + " " + world);
    }
} 
```

我创建了一个实现 IJavaEditorTextHover 的类，我需要编译当前编辑的 Java 文件来计算光标是否悬停在需要翻译的字符串上。

*   悬停“你好”不会有任何作用。
*   悬停“Test.worldLabel”将显示我的工具提示，因为该文字包含在 Translator.get() 方法调用中。

起初我用这个（170在“Test.worldLabel”里面）：

```
ITypeRoot typeRoot = (ITypeRoot)
    JavaUI.getEditorInputJavaElement(editorPart.getEditorInput());

JavaElement foundElement = (JavaElement) typeRoot.getElementAt(170); 
```

但是 foundElement 包含整个 main() 方法：它不够细粒度。

那么，正确的方法是，我认为：

```
private static ASTNode parse(ICompilationUnit unit, int position) {
    ASTParser parser = ASTParser.newParser(AST.JLS3);
    parser.setKind(ASTParser.K_COMPILATION_UNIT);
    parser.setSource(unit);
    parser.setResolveBindings(true);
    parser.setIgnoreMethodBodies(false);
    // TODO Future optimisation: parser.setFocalPosition(position);
    return parser.createAST((IProgressMonitor) null); // parse
} 
```

在我的 IJavaEditorTextHover.getHoverInfo(...) 实现中：

```
ICompilationUnit compilationUnit = (ICompilationUnit)
    JavaUI.getEditorInputJavaElement(editor.getEditorInput())
int position = 170/*hoverRegion.getOffset()*/;
ASTNode ast = parse(compilationUnit, position); 
```

**现在，这是我的问题：**

如何从这个 ast 节点获得代表源代码中位置 170 处的 StringLiteral 的 ASTNode（“Test.worldLabel”字符串）？

额外的问题：我选择了正确的解决方案吗？在性能的基础上。

* * *

编辑： **嗯，这是我找到的解决方案：**

```
private StringLiteral findStringLiteralAtPosition(final ASTNode parent, final int position) {

    final List<StringLiteral> stringLiterals = new ArrayList<StringLiteral>();

    parent.accept(new ASTVisitor() {
        @Override
        public boolean visit(StringLiteral stringLiteral) {
            int start = stringLiteral.getStartPosition();
            int end = start + stringLiteral.getLength();
            if (start <= position && position <= end) {
                stringLiterals.add(stringLiteral);
            }
            return super.visit(stringLiteral);
        }
    });

    return (stringLiterals.size() > 0 ? stringLiterals.get(0) : null);
} 
```

接缝好吗？还是一种更简单的方法或更高效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:33:46.523

一种解决方案是根本不使用偏移逻辑。您可以通过使用节点父检查来概括解决方案。

这是一个示例代码：

```
public boolean visit(StringLiteral stringLiteral) {

        // Check if parent is a method inovacation.
        if (stringLiteral.getParent().getNodeType() == ASTNode.METHOD_INVOCATION) {

              // get the parent method inovacation.
              MethodInvocation miNode = (MethodInvocation) stringLiteral.getParent();

              //To do: null and empty check on argument list.

              // Check if is the special method and this is the 1st argument
              if (miNode.getName().toString().equals("SpecialMethod")
                        && miNode.arguments().get(0).toString().equals(stringLiteral.toString())) {

                    System.out.println("Found it : " + stringLiteral.toString());
              }
        }

        return true;
    } 
```

# mongodb - MongoDB 中的一个大 GridFS 集合还是许多更小的集合？

> ID：14955201
> 
> 赞同：3
> 
> 时间：2013-02-19T10:28:44.457
> 
> 标签：mongodb, blob, large-files, gridfs

我们使用 MongoDB 存储转换前后的视频数据。一个文件的编码结果是六个或更多较小的文件（几个质量等级和不同的格式）。输入和输出文件共享相同的唯一文件 ID。

问题是哪种方法在性能和可扩展性方面更好：将所有输出文件存储在一个巨大的 gridFS 集合中，其复合键包含原始文件 id、质量等级和格式类型，还是为每个质量/格式对单独收集？

对我来说，这两种方法都有自己的优点和缺点，即

*   使用一个大的结果集合在读取时使用较少的配置，但需要更复杂的查询来查找文件；
*   使用多个生成的集合涉及更简单和更快的查询，但需要额外的配置来选择此查询应针对哪个集合。

在我看来，这更像是个人选择的问题……但是可扩展性或性能呢？以前有没有人遇到过这样的解决方案？也许有人可以建议？

考虑到大量大文件，从战略角度来看，哪种方法更好？未来哪种方法更容易扩展和分片？从长远来看，也许会有性能损失？

# jms - 在远程队列中发布消息

> ID：14955203
> 
> 赞同：1
> 
> 时间：2013-02-19T10:28:48.903
> 
> 标签：jms, message-queue

我试图将消息发布到远程队列。

```
Exception in thread "main" javax.naming.NameNotFoundException: Exception in lookup.: `SCF' could not be found. [Root exception is weblogic.corba.cos.naming.NamingContextAnyPackage.NotFound: IDL:weblogic/corba/cos/naming/NamingContextAny/NotFound:1.0]
    at weblogic.corba.j2ee.naming.Utils.wrapNamingException(Utils.java:65)
    at weblogic.corba.j2ee.naming.ContextImpl.lookup(ContextImpl.java:230)
    at weblogic.corba.j2ee.naming.ContextImpl.lookup(ContextImpl.java:168)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at com.producer.group.BridgedProducer.init(BridgedProducer.java:27)
    at com.producer.group.BridgedProducer.main(BridgedProducer.java:61)
Caused by: weblogic.corba.cos.naming.NamingContextAnyPackage.NotFound: IDL:weblogic/corba/cos/naming/NamingContextAny/NotFound:1.0
    at weblogic.corba.cos.naming.NamingContextAnyPackage.NotFoundHelper.read(NotFoundHelper.java:72)
    at weblogic.corba.cos.naming._NamingContextAnyStub.resolve_any(_NamingContextAnyStub.java:87)
    at weblogic.corba.j2ee.naming.ContextImpl.lookup(ContextImpl.java:208)
    ... 4 more 
```

在类路径中包含 wlclient.jar 和 jms.jar。这其中一定有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-11T13:27:42.143

我假设“SCF”是您的连接工厂。您的客户端没有问题，但在服务器上找不到“SCF”工厂。Weblogic 具有复杂而令人困惑的定位。

在 Weblogic 控制台中，转到**Services** -> **Messaging** -> **JMS Modules**。单击您创建的 JMS 模块。如果你没有一个创建一个。

确保有一个“连接工厂”名称“SCF”并且它在“目标”下有一个值（我的是 myserver） 如果您有队列，您需要对“队列”执行相同的操作。如果“目标”部分下的任何内容为空，则不会在您的客户端上查找。

# jquery - 在主 div 中滚动 div 集合

> ID：14955204
> 
> 赞同：0
> 
> 时间：2013-02-19T10:28:51.523
> 
> 标签：jquery, html, css

我有一组小 div 框，它们沿着页面顶部水平移动，我希望在现有的较大 div 中显示为可滚动的其中多达 50 个。我已将主 'FloatMain' div 设置为溢出：滚动，虽然这将是答案，但小 div 只是继续流过主 div。我已经查看了这里的所有解决方案，但似乎没有什么可以帮助我解决特定问题，请问有什么帮助吗？

```
 <div id="FloatMain">

  <div title="Driver Details" id="i1001" class="divd" style="left:100px">i1001<br>Paul Stott</div>
  <div title="Driver Details" id="i1002" class="divd" style="left:155px">i1002<br>Simon Latcham</div>
  <div title="Driver Details" id="i1003" class="divd" style="left:210px">i1003<br>Phil Murphy</div>
  <div title="Driver Details" id="i1004" class="divd" style="left:265px">i1004<br>Lee Taylor </div>
  <div title="Driver Details" id="i1005" class="divd" style="left:320px">i1005<br>Martin Macklin</div>
  <div title="Driver Details" id="i1006" class="divd" style="left:375px">i1006<br></div>
  etc ... more of these .....

  </div> 
```

款式细节

```
.divd {
position:fixed ;
width: 50px;
height: 50px;   
top: 50px ;
left: 50px ; 
border: 1px solid black;
background-color:#999; 
border-radius:5px;  
z-index:200;
}

#FloatMain {
position:fixed ; 
width: 300px;
height: 300px;
top: 40px ; 
border: 2px solid black;
background-color:#FFF;
color:#000;  
left:50% ; 
margin-left:-150px;
display:none ;
border-radius:7px;  
z-index:10;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:36:42.357

你可以这样使用：

```
 .divd {
    width: 50px;
    height: 50px;   
    border: 1px solid black;
    background-color:#999; 
    border-radius:5px;  
    }

    #FloatMain {
     background-color: #FFFFFF;
        border: 2px solid black;
        border-radius: 7px 7px 7px 7px;
        color: #000000;
        height: 300px;
        width: 300px;
        overflow-y:scroll;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:07:47.527

你的`divd`div 有`position:fixed`. 我不认为你可以实现你想要的。

我会插入一个额外的容器 div `position:relative`，然后将所有`divd`div 放入其中`position:absolute`。或者，更好的是，只需制作所有`divd`div `float:left`，然后您可以删除`style`HTML 中的所有这些属性。

这是后一种方法的 jsfiddle 示例：http: [//jsfiddle.net/4EUVE/1/](http://jsfiddle.net/4EUVE/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:33:27.617

保持您之前添加的溢出属性并添加

`<div style="clear:both"/>`在结束父 div 之前。希望它会起作用。

# iphone - 将通过代码生成的数据保存到 xcode 中计算机中的特定位置？

> ID：14955207
> 
> 赞同：-2
> 
> 时间：2013-02-19T10:29:00.150
> 
> 标签：iphone, objective-c, ios6

我已经创建了一个用于在 Xcode 中生成 QRCode 的应用程序。我的问题是我只能通过模拟器查看此 QRCode，我不知道如何将这些生成的 QRCode 保存在我计算机内的某个位置。请帮我.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:53:16.430

选项1）你可以这样保存，

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSData *myImageData = UIImagePNGRepresentation(myImage);
[fileManager createFileAtPath:@"/Users/Me/Desktop/myimage.png" contents:myImageData attributes:nil]; 
```

或者

选项 2) 保存在模拟器/应用程序中，然后使用 finder 访问

```
NSString *documentDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES) objectAtIndex:0]; 
```

这是路径（在 Mac 上），您可以在其中找到与您的设备安装或您在模拟器上部署的应用程序相关的所有内容：

/Users/“您的家庭名称”/Library/Application Support/iPhone Simulator/您使用哪个版本（4.3.2“这是我的”）/Applications

# java - 将数组输入到 Hashmap

> ID：14955213
> 
> 赞同：5
> 
> 时间：2013-02-19T10:29:14.270
> 
> 标签：java, hashmap

我觉得这是一个非常简单的问题，但我找不到答案。

**可以在 HashMap 的 put 方法中输入一个数组对象吗？**

例子：

假设你有一个 HashMap：
`HashMap<Integer, String> map = new HashMap <Integer, String>();`

您有一个整数数组和一个方便地给出的字符串数组。数组未按如下所示进行初始化，但包含未知值（这只是为了更容易说明结果）。

```
int[] keys = {1, 3, 5, 7, 9};
String[] values = {"turtles", "are", "better", "than", "llamas"}; 
```

我希望 HashMap 的键值对是：

```
1, turtles
3, are
5, better
7, than
9, llamas 
```

这可以通过类似的东西来实现`map.put(keys, values)`吗？我知道这不起作用，您应该收到类似“ *HashMap 类型中的方法 put(Integer, String) 不适用于参数 (int[], String[])* ”的错误。我只想要比以下更高效、优雅或紧凑的东西：

```
for (int i=0; i < keys.length; i++) {
    map.put(keys[i],values[i]);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T10:31:02.610

我无法想象

```
for (int i=0; i < keys.length; i++) {
    map.put(keys[i],values[i]);
} 
```

可以变得更有效率。如果这是您经常要做的事情，那么我可能会在`Map`.

请注意，如果要添加的值*已经*在地图中，则[Map.putAll()存在。](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#putAll%28java.util.Map%29)

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T10:33:32.157

在我看来，您已经发现了一种非常直接的方法来解决这个问题。

```
HashMap<Integer, String> map = new HashMap <Integer, String>();
int[] keys = {1, 3, 5, 7, 9};
String[] values = {"turtles", "are", "better", "than", "llamas"};

for(int i = 0; i < keys.length; i++){
    map.put(keys[i], values[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:31:35.257

如果您需要这种行为，那么您确实需要解析每个元素以将它们放入 HashMap。最坏情况的复杂度将是*O(n)*并且你不能减少它。您需要触摸所有元素以填充 HashMap
下面的代码（正如您所提到的）是唯一的解决方法

```
for (int i=0; i < keys.length; i++) {
    map.put(keys[i],values[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T10:40:56.877

没有其他方法可以直接将数组放入 Map。您需要遍历数组的每个元素并将键值对插入到 Map 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T10:57:35.047

除了好旧的，没有其他的`for`，但你总是可以实现你自己的解决方案。对于一个非常冗长的方法：

```
 public class MapFromArrayBuilder {
     private MapFromArrayBuilder() {}

     public static <K, V> Binder<K, V> map(K[] keys, V[] values) {
         return new Binder(keys, values);
     }   

     public static class Binder<K, V> {
         private final V[] values;
         private final K[] keys;

         public Binder(K[] keys, V[] values) { this.keys = keys; this.values = values; }

         public void into(Map<K, V> map) {
             for (int i = 0; i < keys.length; i++) {
                 map.put(keys[i], values[i]);
             }   
         }   
     } 
```

有了它，你可以做类似的事情

```
 public static void main(String[] args) {
     Map<Integer, String> leMap = new LinkedHashMap<Integer, String>();

     map(new Integer[] {0}, new String[] {"teste"}).into(leMap);

     for (Integer key : leMap.keySet()) {
         System.out.format("%d = %s\n", key, leMap.get(key));
     }   
 } 
```

但它只是为了可读性而创建对象：P 不是最具性能的解决方案，但阅读它很酷：）

不管怎样，还是喜欢好老的`for`。我喜欢创建这种结构只是为了好玩，它不打算在生产代码中使用，因为它会产生很多循环只是为了避免一些命令式代码:)*

# java - 添加计时器进行绘画

> ID：14955214
> 
> 赞同：0
> 
> 时间：2013-02-19T10:29:19.760
> 
> 标签：java, paintcomponent

我的程序当前从文本文件中读取，并根据数组中的下一个值绘制不同颜色的圆圈。目前我正在读取数组中的前 10 个值，所以应该有 10 个画圆。这些圆圈都是同时绘制的，但我希望它们一个一个地绘制，例如每个绘制的圆圈之间有两秒的间隔。下面的代码是读取值和绘制圆圈的部分。有人可以帮帮我吗。我对在哪里以及如何添加计时器感到非常困惑。

```
public void paintComponent(Graphics g) {
        drawShapes(g, circlesT);
    }

    public void drawShapes(Graphics g, ArrayList<Shape> circlesT) {
        Graphics2D ga = (Graphics2D) g;
        ga.drawImage(newImage, 0, 0, null);

        for (int i = 0; i < circlesT.size(); i++) {
            ga.draw(circlesT.get(i));
            ga.setPaint(Color.white);
            ga.fill(circlesT.get(i));
        }

        for (int i = 0; i < 10; i++) {

            if (read.temp.get(i) < 31 && read.temp.get(i) > 30) {
                ga.draw(circlesT.get(i));
                ga.setPaint(Color.green);
                ga.fill(circlesT.get(i));
            } else if (read.temp.get(i) < 32 && read.temp.get(i) > 31) {
                ga.draw(circlesT.get(i));
                ga.setPaint(Color.red);
                ga.fill(circlesT.get(i));
            } else if (read.temp.get(i) < 33 && read.temp.get(i) > 32) {
                ga.draw(circlesT.get(i));
                ga.setPaint(Color.yellow);
                ga.fill(circlesT.get(i));
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:48:36.113

在绘画方法中设置计时器或睡眠不是一个好主意。这将阻止整个应用程序并使用户感到困惑。

您可以使用在另一个线程中逐步构建的屏幕外图像，并在paint方法中简单地显示该图像。

您的代码的一般布局可能如下所示：

```
BufferedImage img = new BufferedImage(...);
ActionListener taskPerformer = new ActionListener() {
    int currentIteration = 0;
    public void actionPerformed(ActionEvent evt) {
        drawShapes(currentIteration++);
        invalidate();
        repaint();
        if (currentIteration >= maxIterations) {
            timer.stop();
        }
    }
}
timer = new Timer(2000, taskPerformer);
timer.start(); 
```

在该`drawShapes`方法中，您会将圆圈绘制`i`到图像上`img`。之后，调用`invalidate`和`repaint`导致`paintComponent`被调用。在那里，您只需`drawImage`将 的内容`img`放在屏幕上

# paypal - 我们可以通过仅获取他的payapl accountID来知道任何帐户中的可用资金吗

> ID：14955221
> 
> 赞同：-5
> 
> 时间：2013-02-19T10:29:48.270
> 
> 标签：paypal

**大家好，请确认我的查询：**

> > 我正在开发“在线购物网站”并通过 Paypal 完成所有交易。所以我的问题是“我们能否通过仅获取他的 payapl accountID 来了解任何帐户中的可用资金”。

**如果有人有想法，请与我分享。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:31:40.950

不，你不能知道。

Paypal 说得很清楚，他们从不分享这些信息。

# python - python cgi.FieldStorage.getvalue() 不从 POSTed 表单元素返回值

> ID：14955224
> 
> 赞同：1
> 
> 时间：2013-02-19T10:30:16.107
> 
> 标签：python, forms, http, cgi

使用

```
import cgi
form = cgi.FieldStorage()
email = form.getvalue('email', 0) 
```

当表单值通过 GET 发送但不通过 POST 发送时有效，即 0 被分配给`email`.

我究竟做错了什么？

编辑：添加html

```
<!DOCTYPE html>
<html><head><title>login</title></head>
<body>
<form action="cgi.py" method="post">
<input type="text" name="email"/>
<input type="submit"/>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:46:06.267

找到了。我使用的另一个模块也称为 cgi.FieldStorage()。由于这会将 POST 数据作为文件流读取，因此它只会读取一次表单数据。GET 不作为流读取。在这种情况下，首先调用另一个模块并在我上面的代码有机会查看它之前提取表单数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T12:12:43.937

根据您发布的 HTML，您似乎忘记了以下内容：

```
<input type="text" name="email"/> 
```

# android - Ksoap2 标头输入/输出

> ID：14955227
> 
> 赞同：0
> 
> 时间：2013-02-19T10:30:18.937
> 
> 标签：android, wcf, ksoap2

我想知道是否有人可以帮助我处理 ksoap2 标头。这是我的soapUI 请求，我需要将其转换为使用带有ksoap2 的服务。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tim="http://www.xxx.co.uk/schemas/111.Security">
   <soapenv:Header>
      <ip>127.0.0.1</ip>
   </soapenv:Header>
   <soapenv:Body>
      <tim:Login>
         <tim:userName>username</tim:userName>
         <tim:password>pass</tim:password>
      </tim:Login>
   </soapenv:Body>
</soapenv:Envelope> 
```

这是我的课我日食：

```
private static final String SOAP_ACTION="http://www.xxx.co.uk/schemas/111.Security/ISecurity/Login" ;
    private static final String METHOD_NAME="Login";
    private static final String NAMESPACE="http://www.xxx.co.uk/schemas/111.Security";
    private static final String URL="http://192.168.5.68:55969/Timesheet/yyy.111.Services/Security.svc"; 
```

在 buttonclicklistener 上是我的操作：

```
@Override
    public void onClick(View v) 
    {

        try 
        {            
            SoapObject soap = new SoapObject(NAMESPACE, METHOD_NAME);
            soap.addProperty("userName" ,txtUserName.getText().toString()); 
            soap.addProperty("password",txtPassword.getText().toString());

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;

            Element[] headers = new Element[1];             
            Element element = new Element();
            element.setName("ip");
            element.setNamespace(NAMESPACE);        
            element.addChild(Element.TEXT, "127.0.0.1");        

            headers[0] = element;                         
            envelope.setOutputSoapObject(soap);
            envelope.headerOut = headers;
            envelope.bodyOut = soap;

            HttpTransportSE transport = new HttpTransportSE(URL);
            transport.call(SOAP_ACTION, envelope);

            SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            String resultValue = response.toString();

            lblStatus.setText(resultValue);
        } 
        catch (Exception e) 
        {                   
            new AlertDialog.Builder(this).setTitle("Error").setMessage("Error").show();
        }

    } 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:26:01.747

您需要将此添加到 android 清单文件中。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# sql-server - 从 EF 连接到 SQL Server 时，有时会出现 ProviderIncompatibleException

> ID：14955229
> 
> 赞同：1
> 
> 时间：2013-02-19T10:30:25.477
> 
> 标签：sql-server, entity-framework, active-directory

我有带有“ApplicationPoolIdentity”用户帐户的 IIS 应用程序池，运行 ASP.NET MVC 应用程序，它首先使用 EF 代码连接到 SQL Server，在域中的单独机器上运行。这是连接字符串：

```
<add name="MyDatabaseContext"
     providerName="System.Data.SqlClient"
     connectionString=
 "Data Source=ServerName;Initial Catalog=DatabaseName;Integrated Security=True"/> 
```

SQL Server 具有相应 Active Directory 组的登录名。

通常，一切都运行顺利。但是有时，突然（没有找到可能的触发器），我开始收到以下异常：

*System.Data.ProviderIncompatibleException：从数据库获取提供者信息时出错。这可能是由 Entity Framework 使用不正确的连接字符串引起的。检查内部异常以获取详细信息并确保连接字符串正确。---> System.Data.ProviderIncompatibleException：提供程序未返回 ProviderManifestToken 字符串。---> System.Data.SqlClient.SqlException：用户“ **NT AUTHORITY\ANONYMOUS LOGON** ”登录失败。*

重新启动服务器机器会有所帮助。但是，这在生产环境中不是可接受的解决方案。我们将此问题归因于我们在域中遇到的与 AD 相关的技术问题。不过，这些问题似乎已经解决了。还有其他可能的原因吗？

# titanium - 按钮角变得模糊（Android）

> ID：14955230
> 
> 赞同：0
> 
> 时间：2013-02-19T10:30:28.760
> 
> 标签：titanium, titanium-mobile

*我正在为 android 开发一个应用程序（Ti Sdk 2.1.2，Android Sdk 2.2）。我想要圆角按钮，但是当我应用borderRadius时角落变得模糊。*

```
var win= Titanium.UI.createWindow();
var login = Ti.UI.createButton({
    title : 'Login',
    height :50,
    width : 280,
    top :  50,
    left : 100,
    backgroundImage:'btn_bg.png',
    borderRadius: 5,
    color:'white',

});

win.add(login);

win.open(); 
```

[btn_bg.png](http://postimage.org/image/pfv5glrbp/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:26:20.793

几个选项：

1.  如果它是一种简单的颜色（在您的情况下，图像仅显示红色） - 使用背景颜色而不是图像
2.  [如此处所述，](http://docs.appcelerator.com/titanium/latest/#!/guide/Icons_and_Splash_Screens)为按钮使用 Android 9-Patch 图像
3.  （不好）使用带有圆角和透明角的完整图像作为背景图像。

提示：也许您还应该设置边框宽度和边框颜色以避免外观模糊。

# jquery - 在下拉选择中选择复选框

> ID：14955236
> 
> 赞同：0
> 
> 时间：2013-02-19T10:30:55.303
> 
> 标签：jquery

处理一些 Jquery 代码是这样的

```
 $(function(){
     $("select").change(function() {                
         $(".class1").each(function(index) {                                
             if($("select option:selected").text()== $(this).text()) {
                  $(".class2:eq(index)").prop('checked', true);                 
             }  
         })
     })
 })

<INPUT TYPE="CheckBox" CLASS='class2'> 
<TD CLASS=class1>content1</TD> 
```

我想将下拉选择的值与某个类的元素进行比较，并想检查另一个类中相同索引的复选框，但它根本不起作用请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:33:24.583

改变

```
$(".class2:eq(index)").prop('checked', true); 
```

到

```
$(".class2:eq("+index+")").prop('checked', true); 
```

或者

```
$(".class2").eq(index).prop('checked', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:35:28.803

即使你可以试试这个：

```
 $(".class2").index(index).prop('checked', true); 
```

更多编辑：

```
$("select").change(function() {
     var selText = $("option:selected", this).text(); // <--get the text here
     $(".class1").each(function(index) {                                
         if(selText== $(this).text()) {  //<---then compare here
              $(".class2").eq(index).prop('checked', true);                 
         }  
     });
 }); 
```

# c# - 在 asp.net 中创建多个 Jquery 对话框

> ID：14955237
> 
> 赞同：0
> 
> 时间：2013-02-19T10:30:59.577
> 
> 标签：c#, jquery, asp.net, jquery-ui, jquery-dialog

我正在尝试创建多个对话框，有些我无法理解如何创建这些对话框。

`DIV's`对于每个对话框，我都有每个操作的消息。基本上，如果用户检查`CheckBox`然后出现对话框，说明您要确认此操作。一段时间后，如果用户再次取消选中该选项，`CheckBox`则会出现另一个带有差异消息的对话框。请帮我解决这个问题。

这是我到目前为止所得到的。

================

## HTML

```
<div id="dialog-isReceived" title="Mark as Received?">
    Are you sure you want to mark this order as "Received"? <br />
    The customer will receive an email confirming their order is ready for collection.
</div>
<div id="dialog-notReceived" title="Mark as Not Received?">
    Are you sure you want to mark this order as "Not Received"? <br />
</div> 
```

* * *

# jQuery

```
var isReceivedCheckBox = $('.isReceivedCheckBox input[type=checkbox]');
var dialogId; //trying to pass the Id of the div dynamically BUT not working 
var result;
$(document).ready(function () {
$(dialogId).dialog(
  {
        autoOpen: false,
        width: 300,
        height: 200,
        resizable: false,
        modal: false,
        buttons: {
              "Confirm": function () {
                    result = true;
              },
              Cancel: function () {
                    result = false;
                    $(this).dialog("close");
              }
        },
  });
}); 
```

======================

# 我要执行的代码

```
$(document).on("change",isReceivedCheckBox, function () {
var checked = $(this).is(':checked');
if (checked) {
  dialogId = "'#dialog-isReceived'"; //setting the DIV ID here and hoping that dialog will appears.
  $(dialogId).dialog('open');
  if(!result)
        $(this).attr("checked", false); // if user clicks cancel on dialog then do not check the checkbox
} else {
    dialogId = "'#dialog-notReceived'";
    $(dialogId).dialog('open');
  if(!result)
        $(this).attr("checked", true); //if user clicks cancel on dialog then do not uncheck the checkbox because it was checked previously
}
}); 
```

这里的问题是对话框永远不会出现，因为当页面加载时我的所有 div 都是可见的，因为我无法`dialogID`在页面加载时设置变量。此外，我在此页面上至少有 5 个对话框执行相同的功能。如果您能提出更好的方法或告诉我我在这里做错了什么，将非常感激。

谢谢，米兰P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:57:23.793

您的方法的另一个可能问题是 jQuery 对话框是异步的，这意味着条件

```
if(!result) 
```

将在您的用户有时间确认或取消对话框之前进行评估。如果您想要模仿 javascript 使用对话框确认的行为，您需要使用 jQuery Deferred 对象。另外，我建议根据需要创建和销毁对话框，例如：

```
function confirmDialog(msg) {
    var dialog = $("<div>"+msg+"</div>");
    var def = $.Deferred();

    $(dialog).dialog({
        autoOpen: true,
        width: 300,
        height: 200,
        resizable: false,
        modal: false,
        buttons: {
            'Confirm': function() {
                def.resolve();
                $( this ).dialog( "close" );
            },
            'Cancel': function() {
                def.reject();
                $( this ).dialog( "close" );
            }
        },
        close: function () {
            if (def.state() === "pending") {
                def.reject(); // Make sure unanswered dialog rejects
            }

            $( this ).remove();
        }
    });
    return def.promise();
} 
```

然后这样称呼它：

```
confirmDialog("are your sure?").done(function() {
    // He/She said yes
}).fail(function() {
    // He/She said no
}); 
```

在此处阅读有关 jQuery Deferred 的更多信息[http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

小提琴：http: [//jsfiddle.net/fGQTj/](http://jsfiddle.net/fGQTj/)

编辑：固定代码，添加小提琴

# jsp - 在jsp中添加导航链接？

> ID：14955243
> 
> 赞同：-1
> 
> 时间：2013-02-19T10:31:30.367
> 
> 标签：jsp, web-applications, servlets, struts, jstl

我制作了一个 Struts 项目 (Struts2)，其中包含一些基本页面，例如`Login.jsp`等`Main.jsp`。

我已经以这种方式完成了导航，有更好的方法吗？

在会话中添加了一个将 url 路径作为属性保存的列表（在 servlet/action 类中完成）

```
private void initNavigationMenu(){
    navigationMenu = new HashMap<String, String>();
    navigationMenu.put("Main", "/main.jsp");
    navigationMenu.put("Login", "/login.jsp");
    navigationMenu.put("Registration", "/registration.jsp");
}

@Override
public void contextInitialized(ServletContextEvent event) {
    initNavigationMenu();
    event.getServletContext().setAttribute("menu", navigationMenu);

} 
```

在 JSP 页面中，我正在比较字符串

```
<div id="nav_container">
    <ul id="nav">
        <c:forEach items="${menu}" var="item">
            <c:choose>
                <c:when test="${pageContext.request.servletPath == item.value}">
                  <li><a id="nav_active" href="" style="color: #000000">${item.key}</a> </li>
                </c:when>
                <c:otherwise>
                  <b>
                  <li><a href="/projectname${item.value}">${item.key}</a></li>
                  </b>
                </c:otherwise>
            </c:choose>
        </c:forEach>
    </ul>                   
</div> 
```

绝对有更好的方法可以做到这一点，有人可以建议我正确的实施方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:20:21.477

假设`navigationMenu`对象包含动作路径。然后在每个操作中生成一个页面对象，就像获取对菜单项的引用并将该对象放入请求中一样。因此，它可以通过`${page}`.

当您呈现 JSP 页面时，您知道页面对象存在什么，而不是比较`servletPath`.

如果您需要管理持久性页面对象，最好使用大部分 CMS。一些 CMS 甚至使用唯一的页面 ID 作为 URL 中的参数来引用它们正在显示的页面。但这不是必需的。您所需要的只是引用操作路径的页面对象。

# android-spinner - 使用外部 Sqlite 数据库填充微调器

> ID：14955247
> 
> 赞同：2
> 
> 时间：2013-02-19T10:31:40.210
> 
> 标签：android-spinner

我有三个旋转器。第三个旋转器依赖于第二个旋转器，第二个旋转器依赖于第一个旋转器。微调器中的字段由外部 sqlite 数据库填充。现在的问题是，如果我有一个巨大的数据库，说有数千条记录，我是否必须为所有数千条记录编写条件，以便当我单击第一个微调器的第一个位置时，结果值应该显示在第二个微调器上等等在第三个微调器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T06:26:30.337

//这是我的主要活动类

```
 public class MainActivity extends Activity implements OnItemSelectedListener{
   private CarHelper dbcarhelper=null;
   private Cursor ourCursor = null,cur=null,vercur=null;
   private CarAdapter car_adapter = null;
   public Spinner spinner,spinner2,spinner3,spinner4;
   public String a;

   @Override
   protected void onCreate(Bundle savedInstanceState)
   {
try
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    spinner = (Spinner)findViewById(R.id.spinner1);
    spinner2=(Spinner)findViewById(R.id.spinner2);
    spinner3= (Spinner)findViewById(R.id.spinner3);

    dbcarhelper = new CarHelper(this);
    dbcarhelper.createDatabase();
    dbcarhelper.openDataBase();

    ourCursor = dbcarhelper.getCursor();
    startManagingCursor(ourCursor);
    car_adapter = new CarAdapter(ourCursor);
    spinner.setAdapter(car_adapter);
    spinner.setOnItemSelectedListener(this);

    startManagingCursor(cur);
    spinner2.setOnItemSelectedListener(this);
    startManagingCursor(vercur);

}
catch(Exception e)
{
    Log.e("ERROR","ERROR IN CODE:" + e.toString());
    e.printStackTrace();
}
   }

   class CarAdapter extends CursorAdapter
   {

 CarAdapter(Cursor c ) {
    super(MainActivity.this, c);
 }

@Override
public void bindView(View row, Context ctxt, Cursor c) {
    CarHolder holder= (CarHolder)row.getTag();
    holder.populateFrom(c,dbcarhelper);

}

@Override
public View newView(Context ctxt, Cursor c, ViewGroup parent) {
    // TODO Auto-generated method stub
    LayoutInflater inflater = getLayoutInflater();
    View row = inflater.inflate(R.layout.row, parent, false);
    CarHolder holder= new CarHolder(row);
    row.setTag(holder);
    return (row);
}

}
   static class CarHolder {
       private TextView make = null, model= null, ver=null;
   CarHolder (View row)
   {
   make = (TextView)row.findViewById(R.id.carText);
   model = (TextView)row.findViewById(R.id.carText);
   ver = (TextView)row.findViewById(R.id.carText);
   }

   void populateFrom(Cursor c,CarHelper r)
   {
   make.setText(r.getName(c));
   model.setText(r.getName(c));
   ver.setText(r.getName(c));
   }

   }

   public void onItemSelected(AdapterView<?> parent, View arg1,int position,long        arg3) 
   {
       int id = parent.getId();
   switch(id)
   {
case R.id.spinner1:

int b = spinner.getSelectedItemPosition();
b++;
a = Integer.toString(b);

if(a!=null)
{
    dbcarhelper.m_pop(a);
}   

CarHelper ch = new CarHelper(getApplicationContext());

List<String> lables = ch.getAllLabels();
//ch.getAllLabels(str);

ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
    android.R.layout.simple_spinner_item, lables);

dataAdapter
    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

spinner2.setAdapter(dataAdapter);

break;

case R.id.spinner2:
    int i = spinner.getSelectedItemPosition();
    i++;
    a = Integer.toString(i);

    if(a!=null)
    {
        dbcarhelper.v_pop(a);
    }   

    CarHelper c = new CarHelper(getApplicationContext());

    List<String> lable = c.getAllLabel();

    ArrayAdapter<String> dAdapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, lable);

    dAdapter
        .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinner3.setAdapter(dAdapter);
    break;

}

   }

   @Override
   public void onNothingSelected(AdapterView<?> arg0) {
// TODO Auto-generated method stub

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T06:31:36.127

//这是我的助手类

```
 public class CarHelper extends SQLiteOpenHelper{

private static final String DATABASE_PATH= "//data//data//com.example.dropdown//databases//";
private static final String DATABASE_NAME= "car_Database.sqlite";
private static final int SCHEMA_VERSION =1;
public static final String COLUMN_ID = "_id";
public static final String TABLE_NAME = "Make";
public static final String COLUMN_TITLE = "car_make";

public static final String TABLE_MODEL = "Model";
public static final String COLUMN_MODEL = "car_model";

public static final String TABLE_VER = "Version";
public static final String COLUMN_VER = "car_ver";

public SQLiteDatabase dbsqlite,db1;
private final Context myContext;

public CarHelper(Context context) {
    super(context, DATABASE_NAME, null, SCHEMA_VERSION);
    this.myContext = context;
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

}

public void createDatabase()
{
    createDB();
}

private void createDB()
{
    boolean dbExist = DBExists();
    if(!dbExist)
    {
        this.getReadableDatabase();
        copyDBFromResource();
    }
}

private boolean DBExists()
{
    SQLiteDatabase db = null;
    try
    {
        String databasePath = DATABASE_PATH + DATABASE_NAME;
        db = SQLiteDatabase.openDatabase(databasePath,null, SQLiteDatabase.OPEN_READWRITE);
        db.setLocale(Locale.getDefault());
        db.setLockingEnabled(true);
        db.setVersion(1);
    }
    catch(SQLiteException e)
    {
        Log.e("AqlHelper","database not found");
    }
    if(db!=null)
    {
        db.close();
    }
    return db!=null ? true : false;

}

private void copyDBFromResource()
{
    InputStream ip = null;
    OutputStream op = null;
    String dbFilePath = DATABASE_PATH + DATABASE_NAME;
    try
    {
        ip= myContext.getAssets().open(DATABASE_NAME);
        op = new FileOutputStream(dbFilePath);
        byte[] buffer = new byte[1024];
        int length;
        while((length = ip.read(buffer))>0)
        {
            op.write(buffer, 0, length);
        }
        op.flush();
        op.close();
        ip.close();
    }
    catch(IOException e)
    {
        throw new Error("Problemcopying database from Resource");
    }
}

public void openDataBase() throws SQLException
{
    String myPath = DATABASE_PATH + DATABASE_NAME;
    dbsqlite = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
}
@Override
public synchronized void close()
{
    if(dbsqlite != null)
    {
        dbsqlite.close();
    }
    super.close();
}

public Cursor getCursor()
{
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    queryBuilder.setTables(TABLE_NAME);
    String[] asColumnsToReturn = new String[] {COLUMN_ID,COLUMN_TITLE};
    Cursor mCursor = queryBuilder.query(dbsqlite, asColumnsToReturn, null, null, null, null, "car_make ASC");
    return mCursor;
}

public void m_pop(String st){
    String a = st;
    dbsqlite.execSQL("delete from temp");
    dbsqlite.execSQL("insert into temp(name) select car_model from Model where make_id="+a); 

}
public List<String> getAllLabels(){
    List<String> labels = new ArrayList<String>();
    String selectQuery = "select name from temp";
    dbsqlite = this.getReadableDatabase();
    Cursor cursor = dbsqlite.rawQuery(selectQuery, null);

    if (cursor.moveToFirst()) {
        do {
            labels.add(cursor.getString(cursor.getColumnIndex("name")));

        } while (cursor.moveToNext());
    }

    cursor.close();
    dbsqlite.close();

    return labels;
}

public void v_pop(String st){
    String a = st;
    dbsqlite.execSQL("delete from temp");
    dbsqlite.execSQL("insert into temp(name) select car_ver from Version where _id="+a); 

}
public List<String> getAllLabel(){
    List<String> label = new ArrayList<String>();

    String selectQuery = "select name from temp";
    dbsqlite = this.getReadableDatabase();
    Cursor cursor = dbsqlite.rawQuery(selectQuery, null);

    if (cursor.moveToFirst()) {
        do {
            label.add(cursor.getString(cursor.getColumnIndex("name")));

        } while (cursor.moveToNext());
    }

    cursor.close();
    dbsqlite.close();

    return label;
}

public String getName(Cursor c){
    return (c.getString(1));
}

   } 
```

# visual-studio - Visual Studio 2012 速成版和专业版

> ID：14955249
> 
> 赞同：1
> 
> 时间：2013-02-19T10:31:50.100
> 
> 标签：visual-studio

如果我在 VS 2012 Web Express 中创建一个 MVC 4 项目，然后在 VS 2012 Professional 中打开它。然后我可以在 VS 2012 Web Express 中再次打开它吗？我问的原因是我的家用台式机上有 VS 2012 Professional，但我的家用笔记本电脑上只有 VS 2012 Web Express。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:38:06.750

是的，这应该不是问题。我的理解是，两个版本之间唯一真正的区别之一是 express 缺乏插件支持。

# iphone - 如何合并两个 NSArray

> ID：14955250
> 
> 赞同：2
> 
> 时间：2013-02-19T10:31:51.850
> 
> 标签：iphone, ios, objective-c, algorithm, ipad

我会知道如何合并两个包含一些重复的数组：这是一个例子来说明我想要做什么：

```
// Here is some dictionary which contain an unique "id" key.
NSDictionary *dico1 = [NSDictionary dictionaryWithObjectsAndKeys:
                       @"11111111", @"id", nil];
NSDictionary *dico2 = [NSDictionary dictionaryWithObjectsAndKeys:
                       @"22222222", @"id", nil];
NSDictionary *dico3 = [NSDictionary dictionaryWithObjectsAndKeys:
                       @"33333333", @"id", nil];
NSDictionary *dico4 = [NSDictionary dictionaryWithObjectsAndKeys:
                       @"44444444", @"id", nil];
NSDictionary *dico5 = [NSDictionary dictionaryWithObjectsAndKeys:
                       @"55555555", @"id", nil];

// And here is duplicates of the 2nd and 3td dictionary.
NSDictionary *dico2_bis = [NSDictionary dictionaryWithObjectsAndKeys:
                           @"22222222", @"id", nil];
NSDictionary *dico3_bis = [NSDictionary dictionaryWithObjectsAndKeys:
                           @"33333333", @"id", nil]; 
```

现在我有一个数组，其中包含一些字典：

```
NSArray *currentArray = [NSArray arrayWithObjects:
                         dico1, dico2, dico3, nil]; 
```

这是要与第一个合并的新数组，其中包含一些重复的和新的“数据”：

```
NSArray *tempArray = [NSArray arrayWithObjects:
                      dico2_bis, dico3_bis, dico4, dico5, nil]; 
```

在最后阶段，我的目标是拥有一个包含所有字典的数组，并删除所有重复项

```
NSArray *finalArray = [NSArray arrayWithObjects:
                       dico1, dico2, dico3, dico4, dico5, nil]; 
```

我不知道什么是最有效的解决方案，合并必须很快。我是否必须实现快速枚举或基于块的枚举算法，或者可能是 NSPredicate 实现？我已经搜索过 NSPredicate，但我还没有找到一种方法来使用其他数组过滤数组 =/
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:42:59.377

你不使用 NSArrays，你需要的是一个自动消除“重复”的集合（“doubloon”是西班牙金币）。所以你只是使用一个 NSMutableSet 并将你的 NSDictionaries 添加到它。

```
NSMutableSet aSet = [NSMutableSet new];
[aSet addObject:dico1];
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:51:36.957

试试这个。

```
NSArray *hasDuplicates = [NSArray arrayWithObjects:@"first", @"second", @"first", nil];
NSArray *noDuplicates = [[NSSet setWithArray: hasDuplicates] allObjects];

NSLog(@"%@ %@",hasDuplicates,noDuplicates); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:49:52.030

您可以使用 NSMutableSet 代替 NSArray。NSSet 类有一个类似 *-(void)setSet:(NSSet *)otherSet*的方法。NSSet（和 NSMutableSet）正在测试是否为双对象。

# c# - 等待reportviewer 呈现后再继续

> ID：14955255
> 
> 赞同：1
> 
> 时间：2013-02-19T10:31:57.173
> 
> 标签：c#, .net, reportviewer, reporting-services

我正在尝试在循环中创建一些 SSRS 报告，报告应该在屏幕上呈现，然后保存到文件中，然后更新列表框以说明它已被保存。我设法让报告在循环内呈现，更新列表框并保存，问题是报告永远不会显示在屏幕上，直到最后一个报告运行之后最后一个报告神奇地出现！我*认为*问题在于我没有等待报告呈现，然后再次继续循环（尽管我不确定是否必须呈现报告才能保存它？）。如何等到报告呈现后再继续循环中的下一步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:13:30.583

我认为您最好并行运行该过程。

意味着您可以将报表导出为 PDF 而无需在屏幕上呈现，并同时呈现它以供用户查看。

[强制 SSRS 报告创建文件而不是在屏幕上呈现](https://stackoverflow.com/questions/14591878/force-ssrs-report-to-create-a-file-rather-than-render-on-screen/14592132#14592132)

# c# - C#防止excel文件被修改

> ID：14955256
> 
> 赞同：0
> 
> 时间：2013-02-19T10:32:05.467
> 
> 标签：c#, .net, excel, security

嗨，我正在寻找一种**防止****excel 文件**被**修改**的方法。我**不想使用隐藏字段**，您必须在其中放置计算的哈希码。

当我重新打开文件时，我的程序应该能够注意到文件已在应用程序之外进行了修改。

**编辑：对不起，我忘了提到我也不想使用密码**，因为 excel 文件可能只能在应用程序中编辑，而不是在外部......

有解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:33:29.187

您可以使用密码保护 excel 文件：[http ://www.online-tech-tips.com/ms-office-tips/the-password-you-can-always-remember/](http://www.online-tech-tips.com/ms-office-tips/the-password-you-can-always-remember/)

或者只能设置密码保护编辑的限制：http: [//office.microsoft.com/en-001/excel-help/make-a-document-read-only-HA010152719.aspx](http://office.microsoft.com/en-001/excel-help/make-a-document-read-only-HA010152719.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:47:08.190

您的限制阻止了最理智的方法，因此我将执行以下操作：计算 excel 文件的哈希并将其保存在某处。重新打开时，重新计算哈希并将其与旧值进行比较...

# jquery - select2插件在弹出窗口中不起作用

> ID：14955257
> 
> 赞同：0
> 
> 时间：2013-02-19T10:32:05.763
> 
> 标签：jquery, html, blockui, jquery-select2

我一直在使用 select2 插件一段时间，直到现在它是完美的。

我有一个页面，其中包含 3 个正在加载数据且运行良好的选择，以及弹出窗口内的多个选择。它们看起来不错，但您不能在搜索字段上写字。在主页上搜索运行良好，所以我无法弄清楚是什么问题..

我正在使用用于弹出窗口的 blockUI 插件。我已经尝试过 z-index，销毁并在 blockUI 函数的回调上启动插件，但没有任何效果，我不知道为什么。

编码：

```
<!doctype html>
<html>
<head>
    <title>ff</title>
    <link type="text/css" rel="stylesheet" href="http://cdn.jsdelivr.net/select2/3.2/select2.css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://cdn.jsdelivr.net/select2/3.2/select2.js"></script>
    <script type="text/javascript" src="http://xiao3meng.googlecode.com/files/jquery.blockUI.js"></script>
    <script>
        $(document).ready(function() {
            $(".startselect").select2();

            $('#clickstartpopup').click(function() { 
                $.blockUI({ 
                    message: $('#popblock'),
                    onBlock: function() { 
                        $(".popupselect").select2();

                    }
                });
            });

        });
    </script>
</head>
<body>
<div id="maincontent1" class="maincontent mywebsitepage">
  <select  class="startselect" id="merchantList">
     <option value="volvo">Volvo</option>
     <option value="saab">Saab</option>
     <option value="mercedes">Mercedes</option>
     <option value="audi">Audi</option>
  </select>
</div>
<div style="clear: both; height: 15px;"></div>
<span id="clickstartpopup" style="cursor: pointer;color:red;" >click me!</span>
<div style="height: 300px;background-color: red;display:none;" id="popblock" >
   <select class="popupselect">
     <option value="volvo">Volvo</option>
     <option value="saab">Saab</option>
     <option value="mercedes">Mercedes</option>
     <option value="audi">Audi</option>
   </select>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T02:39:14.807

The reason this is happening is because of the way Chosen/Select2 works. The actual native controls are still there, but are made invisible so that elements can be overlayed which are styled the way you like them.

In this case, the Select2 elements are rendered outside of `#popblock`, like this:

```
<div class="blockUI blockMsg blockPage" style="z-index: 1001; position: fixed; padding: 0px; margin: 0px; width: 30%; top: 40%; left: 35%; text-align: center; color: rgb(0, 0, 0); border: 3px solid rgb(170, 170, 170); background-color: rgb(255, 255, 255); cursor: wait;">
    <div style="height: 300px; background-color: red;" id="popblock">
        <div class="select2-container popupselect select2-dropdown-open select2-container-active"
        id="s2id_autogen1">
            <a href="#" onclick="return false;" class="select2-choice" tabindex="-1">   <span>Volvo</span><abbr class="select2-search-choice-close" style="display:none;"></abbr>   <div><b></b></div></a>
        </div>
        <select class="popupselect" style="display: none;">
            <option value="volvo">
                Volvo
            </option>
            <option value="saab">
                Saab
            </option>
            <option value="mercedes">
                Mercedes
            </option>
            <option value="audi">
                Audi
            </option>
        </select>
    </div>
</div>
<div class="select2-drop select2-with-searchbox select2-drop-active" style="top: 337px; left: 692px; width: 76px;">
    <div class="select2-search">
        <input type="text" autocomplete="off" class="select2-input" style="">
    </div>
    <ul class="select2-results">
        <li class="select2-results-dept-0 select2-result select2-result-selectable select2-highlighted">
            <div class="select2-result-label">
                <span class="select2-match">
                </span>
                Volvo
            </div>
        </li>
        <li class="select2-results-dept-0 select2-result select2-result-selectable">
            <div class="select2-result-label">
                <span class="select2-match">
                </span>
                Saab
            </div>
        </li>
        <li class="select2-results-dept-0 select2-result select2-result-selectable">
            <div class="select2-result-label">
                <span class="select2-match">
                </span>
                Mercedes
            </div>
        </li>
        <li class="select2-results-dept-0 select2-result select2-result-selectable">
            <div class="select2-result-label">
                <span class="select2-match">
                </span>
                Audi
            </div>
        </li>
    </ul>
</div> 
```

The reason that only the search bar seems to not be working is that the search bar is the only UI control that does not have a native counterpart.

# c# - 在 C# 中创建动态字符串

> ID：14955261
> 
> 赞同：1
> 
> 时间：2013-02-19T10:32:24.977
> 
> 标签：c#, string, ref

我有我创建的字符串：

```
string label = Name + " " + Number; 
```

where`Name`和`Number`是属性。我希望这个标签字符串在`Name`or`Number`更新时改变。我尝试使用`ref`关键字，但 C# 告诉我不能`ref`用于属性。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T10:33:44.910

将其创建为另一个属性，只有一个`get`方法：

```
public string Label { get { return Name + " " + Number; }} 
```

这样，每次调用该属性时，它都会根据`Name`and的当前值创建返回值`Number`。

但是，这需要在类级别定义，并且`Label`可能也不是合适的名称。

* * *

当然，现在的问题是，为什么`Label`首先调用它？

如果您使用此值来设置 WinForms 样式标签控件，并且想要动态更新它，那么您将需要一种不同的方法。您可以修改您当前的属性，`Name`并`Number`在设置器中做一些“额外的工作”。

例如：

```
private string _name
public string Name 
{
    get { return _name; }
    set { _name = value; DoChange(); }
}

private string _number
public string Number 
{
    get { return _number; }
    set { _number = value; DoChange(); }
}

public string Label { get { return Name + " " + Number; }}

private void DoChange()
{
    MyLabel.Text = Label;
} 
```

对于这个问题，这可能有点矫枉过正，但只是需要考虑的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T10:34:35.607

您可以`Label`在提供`Name`and的类中实现一个属性，`Number`如下所示：

```
public string Label 
{
    get
    {
        return Name + " " + Number;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T10:35:43.823

即使是*引用类型*a 的`string`行为也像*值类型*，所以每次你给它赋值时，它都会保留一个新的值**副本**。

但即使它不会那样做，这也不会解决您的问题，因为您的`label`值是基于其他 2 个值的组合值。

您需要以某种方式构建您的代码，即：

（只是一个例子）其中一个属性被更改（`Name`或`Number`），引发事件，因此标签*重新计算*其值。

# node.js - 使用 Node 和 Connect 设置 Stylus 中间件时遇到问题

> ID：14955263
> 
> 赞同：0
> 
> 时间：2013-02-19T10:32:30.047
> 
> 标签：node.js, connect, stylus

我正在尝试设置 Stylus 中间件，但没有成功。该[文档](http://learnboost.github.com/stylus/)不适合初学者或 Nodejs 新手。我猜想我需要创建一个使用手写笔中间件的小型迷你 Node 应用程序。但是，即使在该页面上设置了简单的设置，我也无法使其正常工作。这是我所做的：

当然，我已经安装了节点和手写笔。然后我创建了一个文件 stylus-middleware.app。到目前为止，我已经添加了以下代码（基于文档中最简单的示例）：

```
var app = connect();
app.middleware(__dirname); 
```

当我尝试运行简单的应用程序时，我收到以下错误：

```
Tue Feb 19:~/Sites/test $ node stylus.app
/Library/WebServer/Documents/test/stylus.app:1
ction (exports, require, module, __filename, __dirname) { var app = connect();
                                                                    ^
ReferenceError: connect is not defined
    at Object.<anonymous> (/Library/WebServer/Documents/test/stylus.app:1:73)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我做了一个网络搜索，发现connect()是一个与nodejs的连接插件相关的函数，所以我尝试安装它，但我得到的错误是一样的。所以我很难过......我对nodejs的工作原理知之甚少，还不知道这里发生了什么。

任何建议将不胜感激！

### **更新**

经过一番折腾，我了解了如何设置手写笔中间件并将其链接到连接服务器。但是，我的代码仍然无法正常工作。我没有收到任何错误，但手写笔没有编译位于应用程序目录中的 .styl 文件（即在 __dirname 中）。这是现在的应用程序代码：

```
function compile(str, path) {
      return stylus(str)
        .import(__dirname)
        .set('filename', path)
        .set('warn', true)
        .set('compress', true);
}

var stylus = require('stylus');
var connect = require('connect');
var app = connect();
app.use(stylus.middleware({
        src: __dirname,
        dest: __dirname,
        compile: compile
}));
app.use(connect.static(__dirname));
var server = require('http').createServer(app).listen(8000);
console.log('Watching .styl files in directory: '+__dirname); 
```

如果有人知道这里缺少什么或有一些建议，我很想听听一些想法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:47:18.270

您将需要在命令行上安装连接，然后将其要求到您的代码中：

```
npm install connect 
```

然后像这样要求它

```
var connect = require('connect),
    app = connect(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T12:31:23.597

您可能需要安装一个文件检查器来检测您何时对文件进行更改并自动重新编译您的 .styl 文件

最受欢迎的两个是 nodemon 和 npm-supervisor。

作为测试，您可以删除您的 .CSS 文件，并在启动应用程序时查看 .styl 文件是否编译为 .CSS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T08:09:59.760

这是一个适合我的最小应用程序。但是，它使用`Express`而不是`Connect`。

首先安装 Express 和 Stylus：

```
npm install express
npm install stylus 
```

接下来，创建服务器代码（`app.js`或您喜欢的任何文件名）：

```
var express = require('express');
var stylus  = require('stylus');
var app     = express();

app.use(stylus.middleware({
    src     : __dirname + '/node/www',
    dest    : __dirname + '/node/nginx',
    compile : function(str, path) {
      return stylus(str)
        .set('filename', path)
        .set('warn', true)
        .set('compress', true);
    }
}));

app.use(express.static(__dirname + '/node/nginx'));

app.listen(3000); 
```

创建一个简单的 Stylus 样式表（调用它`./node/www/app.styl`）：

```
body
  background #123 
```

启动服务器：

```
node app.js 
```

对 CSS 文件执行请求：

```
curl http://localhost:3000/app.css 
```

在该请求之后，`./node/nginx`查看它现在是否包含 (生成的) `app.css`。

**编辑**：刚刚意识到这可能只能解决您的部分问题。

如果您的意图是使用 nginx 提供生成的 CSS 文件，那么它不会起作用。这样做的原因是 Stylus 中间件拦截`.css`文件请求，以查看 a) 它是否有一个随附`.styl`文件和 b) 该`.styl`文件是否需要编译。如果 nginx 捕获所有对 CSS 文件的请求，则该请求将永远不会被 Stylus 中间件处理。

# php - Codeigniter 图像输出在不同的控制器中不起作用

> ID：14955265
> 
> 赞同：0
> 
> 时间：2013-02-19T10:32:32.947
> 
> 标签：php, codeigniter

我有 2 个控制器（CodeIgniter）

```
controllers
 - indexController.php
 - admin (Folder)
   - adminController.php 
```

*   IndexController 是 MY_Controller 的子类
*   adminController 是 MY_Admin_Controller 的子类（MY_Admin Controller 是 MY_Controller 的子类）

在两个控制器（索引和管理员）中，我都有一个功能。这个：

```
function thumb() {
    $product = $this->products->get_product_by_id($this->uri->segment(2));

    if($product == NULL) show_error("No Access", 403);

    $delimeter = "";
    if(stripos($product->thumbpath, "/") !== false) {
        $delimeter = "/";
    } else {
        $delimeter = "\"";
    }
    $arr = explode($delimeter, $product->thumbpath);

    $path = "uploads/".$this->uri->segment(2)."/".$arr[count($arr)-1];

    $this->load->image($path, get_mime_by_extension($path));

} 
```

如果我从 adminController 执行此功能 - 它确实如此。但是如果我从 indexController 执行这个函数 - 它不会......

这是在我的 routes.php 中：

```
$route['thumb/:any'] = "index/thumb"; 
```

*   从 adminController 我得到一个工作图像......
*   从 indexController 我得到一个损坏的图像....

实际上没有限制（会话，文件权限......）

任何人——知道我能做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:22:39.613

我的猜测是当你在索引控制器中时 $path 是错误的。尝试这个：

```
$path = base_url()."uploads/".$this->uri->segment(2)."/".$arr[count($arr)-1]; 
```

老实说，当我使用 base_url 而不是相对路径使它们成为绝对路径时，我发现 CI 中的大多数链接更容易处理，而且从我的理解来看，绝对路径更适合 SEO，尽管我无法证明这是真的。

# php - PHP Curl 下载 PDF 文件

> ID：14955266
> 
> 赞同：1
> 
> 时间：2013-02-19T10:32:34.763
> 
> 标签：php

使用 PHP curl 下载 50 多个 PDF 文件的正确方法是什么？

下面是我正在使用的代码：

```
$fp = fopen("test.pdf", 'w');        
$ch = curl_init();

curl_setopt($ch,CURLOPT_PROXY,"http://test:123");
curl_setopt($ch,CURLOPT_PROXYPORT,123);
curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 0);
curl_setopt ($ch, CURLOPT_TIMEOUT, 500);
curl_setopt($ch,CURLOPT_URL,"http://download/test.pdf");
curl_setopt($ch, CURLOPT_FILE, $fp);

curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

问题是有时，没有正确下载 2-3 个 PDF 文件（大小为 0-1 个字节）。知道为什么它不稳定吗？我必须在上面的代码中包含其他任何内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:29:26.660

通常，即使来自浏览器和良好的连接，Web 请求也可能非常狡猾。从远程站点拒绝您的连接到从多个位置同时执行您的 php 文件，这里可能会出现一些问题。看一下：

[http://www.php.net/manual/en/function.curl-error.php](http://www.php.net/manual/en/function.curl-error.php)

尝试在某处打印错误消息以对 curl_exec 进行分析。

如果是连接问题，你可能需要引入重试机制，不确定你的脚本是否有可能从多个位置并行执行，但如果是，你应该看看[http://php。 net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)作为一种方法，首先生成一个合理唯一的文件名，尝试下载，如果没有返回错误，则仅*将文件移动到预期的目标文件，否则重试最多 X 次。*

关于 Curl 的稳定性，我经常使用它，并没有证明它对我来说不稳定，但我并没有拉下二进制数据。我希望一些错误检测和错误消息的输出可以进一步阐明根本原因是什么。

# android - 如果改变方向，活动使用哪些标志

> ID：14955268
> 
> 赞同：2
> 
> 时间：2013-02-19T10:32:43.187
> 
> 标签：android, android-intent, android-activity, orientation

我正在编写登录/注册系统并且有以下情况：

1.  在`onResume()`“主页”活动中，我调用主题为对话框的登录活动。
2.  在登录中，我有注册按钮，当我单击它时，我会转到注册活动，该主题也是对话框。
3.  当我从“主页”活动更改 Android 调用`onResume()`并在注册顶部显示登录时。

（**更多信息：**我不想失去改变方向的可能性；每次按下 Home 或 Lock 按钮并返回应用程序时都必须显示登录页面，但这在这里并不重要）

**所以，这是我的问题：**当我调用 Login 和 Register 时 我需要使用`addFlags()`，但是为了让我的活动按以下顺序留在堆栈中，我需要使用哪一个：*Home - Login - Register*，但不是：*Home - Login - Register - **Login***？（第二个登录是在我们自动改变方向和 Android 调用时创建的 `onResume()`）。

这是我的代码的一部分：

从家里：

```
@Override
protected void onResume() {
    super.onResume();
        Intent intent = new Intent(HomeActivity.this, LoginDialog.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY );// which flags?
        startActivityForResult(intent, LOGIN_REQUEST_CODE);
} 
```

从登录：

```
 registerBtn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent intent = new Intent(LoginDialog.this, RegisterDialog.class);
            // intent.addFlags(Intent.FLAG_ACTIVITY_??? ); // which flags?
            startActivityForResult(intent, REGISTER_REQUEST_CODE);
        }
    }); 
```

# svn - 如何使用 svn 命令行：“svn log -l 3”来显示正确的历史记录？

> ID：14955269
> 
> 赞同：0
> 
> 时间：2013-02-19T10:32:44.733
> 
> 标签：svn

我在一家公司从事承包工作，他们使用 svn 命令行和 text diff 通过 ssh 连接到 Linux 桌面。对于显示 3 个日志项的命令：

```
svn log -l 3 
```

我想知道为什么它没有显示我刚刚提交的历史记录？该文件位于子目录之一中。

例如，如果我做一个

```
svn log -l 3 foo/bar/abc.html 
```

然后日志历史记录将显示我一分钟前刚刚完成的提交。但是我发布的第一个命令行，它只会显示 10 天前由其他人提交的日志。有没有办法让它像 Tortoise 或 Versions 一样工作，以便它显示当前目录和向下或整个项目的日志历史记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:35:22.800

这是因为您的提交创建了一个混合修订的工作副本。

请参阅“为什么 svn log 不显示我刚刚提交的内容？” svnbook 部分在这里： [http ://svnbook.red-bean.com/en/1.7/svn.tour.history.html#svn.tour.history.log](http://svnbook.red-bean.com/en/1.7/svn.tour.history.html#svn.tour.history.log)

它将参考“更新和提交是分开的”部分，该部分详细介绍了混合修订。

您可以`svn update`在运行 log 命令之前更新您的工作副本，也可以使用`svn log -l 3 -r HEAD:1`绕过默认的修订范围 BASE:1（并查看当前日志而无需先更新您的工作副本）。

# php - PHP IMAP 循环越来越慢

> ID：14955270
> 
> 赞同：1
> 
> 时间：2013-02-19T10:32:49.227
> 
> 标签：php, loops, imap

IMAP 有点问题。基本上，我连接到服务器以获取文件夹名称，为每个文件夹重新连接，循环浏览每条消息并执行我需要的操作。

除了事情变得越来越慢之外，它正在工作。有什么想法吗？我有一种有趣的感觉，它与 imap_body 有关，因为这似乎是导致问题的原因。我是否需要以某种方式为每个循环清除它？

我的代码看起来与此类似（但是删除了很多位）...

```
 $Mailbox = imap_open("$Hostname", "$Username", "$Password") or die('Error: ' . imap_last_error());
    $List = imap_list($Mailbox, "$Hostname", "*");

    if(is_array($List))
    {
            foreach ($List as $Folder)
            {
                    $FolderName = imap_utf7_decode($Folder);
                    $FolderStream = imap_reopen($Mailbox, "$Folder") or die('Error: ' . imap_last_error());
                    $FolderCount = imap_num_msg($Mailbox);
                    for($i=1;$i<=$FolderCount;$i++)
                    {
                            $EmailBody = imap_body($Mailbox, $i);
                            // Do whatever I need here
                    }
            }
    }
    imap_close($Mailbox); 
```

**更新** 我通过使用服务器的 IP 地址而不是主机名（这是除了指定端口之外）加快了速度，尽管问题仍然存在，因为事情变得越来越慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:24:20.260

这完全取决于您的网络和连接的 IMAP 服务器满足客户端请求的能力。imap_body 实际上是在获取邮件正文，邮件大小可能从几 kbs 到 20-25 mbs 不等。

客户端无能为力。

有时服务器会尝试限制连接以防数据传输过高，在这种情况下，您可以尝试重新连接连接并从先前的状态继续。

更新到 IP 不会对您有很大帮助，相反，我建议您仅使用主机名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:01:00.943

尝试在每 20/25 封邮件或下载 50/100mb 数据后重新连接到邮件服务器。我已经看到 IMAP 服务器在此之后降低了速度......

# javascript - jQuery mobile：关闭弹出窗口后隐藏虚拟键盘

> ID：14955271
> 
> 赞同：0
> 
> 时间：2013-02-19T10:32:55.077
> 
> 标签：javascript, jquery, ios, html, jquery-mobile

我在一个项目中使用 jQuery mobile，需要一个带有 textarea 的弹出窗口：

```
<div data-role="popup" id="popupDialog" data-overlay-theme="none" data-theme="a" style="width: 350px; max-width:350px;" class="ui-corner-all" data-dismissible="false">
    <button id="dialogCloseButton" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-left">Close</button>
    <div data-role="content" class="ui-corner-bottom ui-content" style="text-align: center; margin: auto;">
        <textarea id="textArea" data-theme="b" style="resize: none; max-width: 100%; max-height: 150px; width: 100%; height: 150px; padding-bottom: 5px;"></textarea>
        <button data-theme="a">Ok</button>
    </div>
</div> 
```

我正在像这样打开弹出窗口：

```
$('#popupDialog').popup('open'); 
```

当我现在在文本区域中输入文本并使用按钮关闭弹出窗口时，虚拟键盘不会隐藏在运行 iOS 6.1 的 iPad 上。

我尝试了这个[hack](https://stackoverflow.com/questions/8780346/how-to-hide-keyboard-in-jquerymobile-page-in-phonegap-app)，它对我不起作用。

当我在关闭弹出窗口之前模糊 textarea 时，textarea 将自动再次获得焦点（您可以使用“模糊”按钮在我的示例站点上进行测试）。

**编辑：**删除示例的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:59:10.567

这对我有用：

```
$('#textArea').blur();
$('#popupDialog').attr("tabindex",-1).focus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T03:03:19.030

这是不言自明的。第二行将分散所有输入字段的焦点，它依赖于 jQuery。我发现在单个焦点文本字段上调用 ​​blur() 并不总是有效。这两条线中的任何一条都应该独立工作，但两者一起不能停止！

```
var hideKeyboard = function() {
    document.activeElement.blur();
    $("input").blur();
}; 
```

# c# - 在 DirectX 中为多色模型使用什么 VertexFormat 和 Lighting？

> ID：14955274
> 
> 赞同：0
> 
> 时间：2013-02-19T10:33:06.173
> 
> 标签：c#, 3d, directx, vertex

我是 DirectX 的新手，无法让颜色和照明正常工作。

我希望能够将各种彩色顶点加载到单个顶点缓冲区中并启用定向照明，但是我尝试的每种方法都有问题。想象一下，我想渲染 3 个立方体，分别是红绿和蓝色，背面有白色定向照明。

1）我不想通过 device.Material 设置颜色，因为那样我必须为每个立方体单独调用 DrawPrimitives()。

2）从样本工作，我似乎能够通过使用 CustomVertex.PositionNormalColored 来获得一些工作 - 问题是我不够聪明，无法以编程方式设置 Normal 顶点。（任何提示？我不想要任何花哨的东西，只是为了照明工作。）

3) CustomVertex.PositionColored 似乎很理想，但似乎不适用于我打开照明并添加方向光，它似乎需要法线向量。

我并没有真正提供稳定的代码示例，但希望获得有关如何实现此功能的任何一般性建议 - 使用什么 CustomVertex，定向照明工作需要什么等。

-布伦丹

# python - ImportError：谷歌应用引擎中没有名为 **** 的模块错误

> ID：14955284
> 
> 赞同：6
> 
> 时间：2013-02-19T10:33:30.380
> 
> 标签：python, google-app-engine, google-cloud-sql

我正在使用谷歌应用引擎开发我的应用程序，现在我正在使用谷歌云 SQL。它完美地在本地主机上运行，​​但是当我将我的应用程序部署到服务器时，它给了我以下错误。

```
ImportError: No module named MySQLdb 
```

后来我将 MySQLdb 包复制到应用程序目录。现在它给了我错误

```
ImportError: No module named _mysql. 
```

我在这里做错了什么，有什么指导方针吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-10T10:04:13.023

您的 app.yaml 中可能缺少 MySQLdb。这个库应该在那里，以便 Google App Engine 为您的实例加载它。希望这会有所帮助。

```
libraries:
- name: MySQLdb
  version: "latest" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:26:57.753

本[教程](http://howto.pui.ch/post/39245389801/tutorial-django-on-appengine-using-google-cloud-sql)让我的应用程序最终工作......

我做了什么：我创建了一个非常基本的项目（只有一个带有一个模型的简单应用程序）并按照上面的教程让它在我的开发环境和 GAE 上工作。然后将我的代码从我的旧（非 GAE）项目迁移到新项目。一切都很好。

坏消息：在 GAE 和 Cloud SQL 上正确部署一个新项目仍然需要一些努力。我从来没有设法让它一口气工作。您必须仔细检查 GAE 日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:37:34.643

查看似乎根本不是您这样做的文档。

[使用本地 MySQL 实例构建应用程序](https://developers.google.com/appengine/training/cloud-sql/application_with_local_mysql)

```
from google.appengine.api import rdbms

CLOUDSQL_INSTANCE = ''
DATABASE_NAME = 'guestbook'
USER_NAME = 'username'
PASSWORD = 'password'

def get_connection():
    return rdbms.connect(instance=CLOUDSQL_INSTANCE, database=DATABASE_NAME,
                         user=USER_NAME, password=PASSWORD, charset='utf8') 
```

# solr - 选择什么字段类型以及如何查看我的查询

> ID：14955285
> 
> 赞同：0
> 
> 时间：2013-02-19T10:33:31.687
> 
> 标签：solr

问题是这样的：我有一个列（名为**name**），其中包含示例“Иван Кирилов Петров”、“Нина Семова Мариножа”等名称。

所以我想进行一个查询，它将获取所有名字为“Иван”和姓氏“Петров”的名字；第二个名字无关紧要，所以我会放`*`输入通配符。

还有一个更大的问题：如果用户写“Иван Кирилов Петров”，我应该能够找到这个确切的人

我尝试过的：

我制作了字段`text_ws`类型并测试了以下查询：

```
q=name:Иван*Петров 
```

完美 - 它找到我想要的 - 所有名字都有名字`Иван`和姓氏`Петров`；

但后来我想找到 Иван Кирилов Петров 我没有得到回应，因为我想进行精确搜索，我的类型应该是字符串

我该如何解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:28:11.580

我认为您不需要通配符查询。`text_ws`如果您只在索引时间（

```
q=name:(Иван AND Петров) 
```

或者

```
q=name:(ИВАН AND МИНЧЕВ AND ПЕТРОВ) 
```

**更新**：在您发表评论后，我看到这将进行词袋搜索并且不会保留顺序。我想你需要保留一个字符串[复制字段](https://wiki.apache.org/solr/SchemaXml#Copy_Fields)，`name`比如说`name_str`，这会给你更多的搜索选项。例如，如果查询中有 2 个空格，这意味着您获得了名字、中间名和姓氏，那么您可以对`name_str`like进行完全匹配

```
q=name_str:"ИВАН%20МИНЧЕВ%20ПЕТРОВ" 
```

如果您使用的是 Solr 4.0 及更高版本，那么对字符串字段的正则表达式查询可以为您提供帮助。你可以做

```
q=name_str:/ИВАН.*ПЕТРОВ/ 
```

将匹配以 . 开头`ИВАН`和结尾的任何内容`ПЕТРОВ`。

甚至

```
q=name_str:/Иван.*?Кирилов.*?Петров/ 
```

不幸的是，目前还没有关于正则表达式搜索的 Solr wiki 页面，但您可以四处搜索。

您需要区分要执行的不同类型的查询并执行不同的搜索。也许给您的用户一个复选框，询问他们是否想要完全匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:25:14.803

尝试在您的 text_ws 类型定义中添加[autoGeneratePhraseQueries="true"标志。](https://wiki.apache.org/solr/SchemaXml#Data_Types)并使用 debugQuery=true 标志来查看它是如何与字段匹配的。如果基本工作正常，您可以查看[eDismax 配置中的 pf3 标志](https://wiki.apache.org/solr/ExtendedDisMax#pf3_.28Phrase_trigram_fields.29)来提升查询匹配。

Solr 还带有专用的俄语标记过滤器，但您可能并不关心这些人的名字。

# html - 样式化图像容器

> ID：14955294
> 
> 赞同：0
> 
> 时间：2013-02-19T10:33:52.030
> 
> 标签：html, css, styling

我已经创建了自己的 CMS，但我的图像概览仍然一团糟。目前它看起来像这样：发生：http: [//i47.tinypic.com/raaybt.jpg](http://i47.tinypic.com/raaybt.jpg)

我正在努力实现这个结果（用photoshop制作这张照片） [http://i47.tinypic.com/30ualbm.jpg](http://i47.tinypic.com/30ualbm.jpg)

我怎样才能达到我上面发布的结果？这是我的 HTML 代码：

```
 <div id="main-content">
                   <div class="tab-content default-tab" id="tab1">
                        <div class="notification information png_bg">
                            <a href="#" class="close"><img src="resources/images/icons/cross_grey_small.png" title="Close this notification" alt="close" /></a>
                            <div>
                                Hieronder ziet u een overzicht van alle afbeeldingen die momenteel geupload zijn.
                            </div>
                        </div>

                        <div id="afbeeldingen">
                            <ul id="afbeeldingenlijst">
                                <li>
                                    <div class="afbeelding">
                                        <img src="http://placehold.it/150x150"/>
                                        <a href="#">Verwijderen</a>
                                    </div>
                                </li>

                                <li>
                                    <div class="afbeelding">
                                        <img src="http://placehold.it/150x150"/>
                                        <a href="#">Verwijderen</a>
                                    </div>
                                </li>
                            </ul>
                        </div>

                    </div></div> 
```

这是我的CSS：

```
#main-content ul li {
    width:200px;
    float: left;
} 
```

提前致谢 （：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:47:17.253

也许您应该尝试将 display 属性设置为 inline-block 而不是 float : left。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:45:36.210

在 UL 内部，元素是浮动的，它会导致父元素的高度为 0px，因此您应该清除浮动，以便将此 css 添加到您的样式表中

```
 .clearfix {
      *zoom: 1;
    }

    .clearfix:before {
      display: table;
      content: "";
    }

    .clearfix:after {
      display: table;
      content: "";
      clear: both;
    }

and <ul class="clearfix">...</ul> 
```

对所有在该元素中具有浮动元素的父元素使用此类（如果需要）

并且还使用现有属性向 LI 添加一个属性以删除项目符号

```
li{
  ...
  ...
  list-style:none;
} 
```

或者只是你可以使用

`overflow: hidden;`对于父元素（即 UL）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:48:53.603

我认为您只需要清除设计中的浮动图像元素即可。

最简单的方法是向父级添加溢出属性，例如

```
.container {
    overflow: hidden;
} 
```

这样做应该使所有父元素增加 ij 高度并在不破坏布局的情况下容纳它的浮动子元素。

# django - Apache/mod_wsgi 守护进程模式不工作

> ID：14955297
> 
> 赞同：0
> 
> 时间：2013-02-19T10:34:02.180
> 
> 标签：django, apache, mod-wsgi

我在我的 Debian/Apache/Python2.6/Django 设置上让 mod_wsgi 以守护程序模式运行时遇到问题。在我的虚拟主机配置文件中，我有

```
<VirtualHost *:80>

  ServerName mysite.com

  WSGIDaemonProcess mysite.com processes=2 threads=15
  WSGIProcessGroup mysite.com

  WSGIScriptAlias / /path/to/mysite/wsgi/django.wsgi

  <Directory /path/to/mysite/wsgi/>
    Order deny,allow
    Allow from all
  </Directory>

</VirtualHost> 
```

设置。为了测试守护程序模式的激活，我使用了这个 wsgi 脚本：

```
import sys
import os

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'mysite.settings')

def application(environ, start_response):
    print >> sys.stderr, 'mod_wsgi.process_group = %s' % repr(environ['mod_wsgi.process_group']) 

    from django.core.handlers.wsgi import WSGIHandler
    _application = WSGIHandler()

    return _application(environ, start_response) 
```

并且生成的日志文件总是说：

```
mod_wsgi.process_group = '' 
```

根据文档，这表明未使用守护程序模式。我多次检查了我的设置，Apache、mod_wsgi 和 Python 的版本是匹配的，根据我在那里读到的所有 HOWTO，我的设置是正确的。我会错过什么？

* * *

编辑：仅供参考，我的应用程序在嵌入式模式下运行良好，我只是想切换到守护程序模式，发现它没有使用上面的 wsgi 脚本激活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:14:49.650

事实证明，符号链接设置不正确，因此我的配置更改从未加载到 Apache 中。很抱歉浪费您的时间，我以为我在发布之前已经彻底检查了所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:37:30.963

该行`mod_wsgi.process_group = ''`暗示您仍在嵌入式模式下操作（如您所见）。`mod_wsgi`守护程序模式将不起作用，`Apache 1.x`因此我假设您正在运行`2.x`（正如您也注意到的）。

你可以尝试设置apache

```
LogLevel info 
```

以便在日志文件中有更多有用的信息。我还假设您已强制 apache 重新启动

```
# /etc/init.d/apache2 restart 
```

在守护进程模式下这应该不是必需的，但如果您之前处于嵌入式模式，则需要重新加载配置文件。

# android - 从列表视图拖放到android中的布局

> ID：14955300
> 
> 赞同：3
> 
> 时间：2013-02-19T10:34:11.370
> 
> 标签：android, drag-and-drop

我想从列表视图中拖动图像并将其放在线性布局上，而不是放在另一个列表视图上。我为此尝试过，我可以从列表视图中拖动图像并将其拖放到另一个列表视图中，但我想将其设置在布局上......
请帮帮我..
提前致谢

# javascript - 如何通过 jquery 更改对象嵌入源

> ID：14955301
> 
> 赞同：0
> 
> 时间：2013-02-19T10:34:11.533
> 
> 标签：javascript, jquery

我有以下场景..

当用户访问我的网站时，我会向用户展示一些来自服务器的音频文件。当用户单击一个链接时，最终会执行 jquery 函数并将嵌入对象的源更改为所选文件。

我的脚本是：

```
<script type="text/javascript">
    $("#song").click(function(){
        var src=$(this).attr("href");
        var plyr=document.getElementById("mplayer");
        var clone=plyr.cloneNode(true);
        clone.setAttribute('src',src);
        plyr.parentNode.replaceChild(clone,plyr)
    });
</script> 
```

链接以选择音频文件。

```
 <a href="resources/songs/xx21.mp3" id="song"> 
```

xx21

对象是

```
<div id="music">
    <embed type="audio/mpeg" src="#" name="plugin" height="100%" width="100%" id="mplayer">
</div> 
```

发生在我身上的是，当我点击链接时。歌曲在新页面播放。我需要在`div` `music`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:38:33.433

如果您有多个可以加载歌曲的链接，请使用类而不是 id，因为每个 id 在页面上应该是唯一的。然后您可以执行此操作以将嵌入的 src 更改为单击的链接的 href：

```
$('.song').on('click', function(e) {
    $('#mplayer').attr('src', $(this).attr('href'));
    e.preventDefault();
}); 
```

`e.preventDefault()`将阻止您的浏览器尝试转到文件的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:41:10.630

您需要阻止元素的默认执行。链接的默认执行是 - 打开链接。

你可以做什么：

要么`<a href="link-to-sound" onClick="return false;">`或

```
<script type="text/javascript">
$(".song").click(function(event){
event.preventDefault();
var src=$(this).attr("href");
var plyr=document.getElementById("mplayer");
var clone=plyr.cloneNode(true);
clone.setAttribute('src',src);
plyr.parentNode.replaceChild(clone,plyr)
});
</script> 
```

你需要添加[event.preventDefault()](http://api.jquery.com/event.preventDefault/)

# oracle - 在使用 OCI_THREADED 选项设置 OCI 环境失败后尝试释放 OCIEnv 结构时发生分段错误

> ID：14955302
> 
> 赞同：2
> 
> 时间：2013-02-19T10:34:14.043
> 
> 标签：oracle, oracle-call-interface

## 概括

在使用 OCI_THREADED 选项设置 OCI 环境失败后尝试释放 OCIEnv 结构时，会发生分段错误（由于例如错误配置的 NLS_LANG 环境变量而失败）。

当OCIEnvCreate 在*没有*OCI_THREADED 选项的情况下调用时，示例代码不会崩溃，它会按预期工作。

## 示例代码

```
#include <oci.h>;
#include <stdio.h>
#include <string.h>

int my_connect(const char *username, const char *password, const char *sid)
{
  OCIEnv *env = NULL;
  OCIError *err = NULL;
  OCISvcCtx *svc = NULL;

  if ( OCIEnvCreate(&env,
                   OCI_THREADED,
                   (dvoid *)0,
                   0,
                   0,
                   0,
                   (size_t)0,
                   (dvoid **)0) )
  {
    fprintf(stderr, "unable to initialize environment\n");
    if ( env )
    {
      printf("env:[%p]\n", env);
      OCIHandleFree(env, OCI_HTYPE_ENV); // segfault.
    }
    return -1;
  }

  printf("env:[%p]\n", env);

  if ( OCIHandleAlloc((dvoid *)env,
                      (dvoid **)&err,
                      OCI_HTYPE_ERROR,
                      (size_t)0,
                      (dvoid **)0) )
  {
    fprintf(stderr, "unable to alloc error handlers\n");
    goto error;
  }

  if ( OCIHandleAlloc((dvoid *) env,
                      (dvoid **) &svc,
                      OCI_HTYPE_SVCCTX,
                      (size_t) 0,
                      (dvoid **)0) )
  {
    fprintf(stderr, "unable to allocate service handlers\n");
    goto error;
  }

  if ( OCILogon(env, 
                err, 
                &svc,
                (CONST OraText *) username,
                strlen(username),
                (CONST OraText *) password,
                strlen(password),
                sid,
                strlen(sid)
                ) )
  {
    fprintf(stderr, "login failed\n");
    goto error;
  }
  printf("logged in\n");
  if ( OCILogoff (svc, err) )
  {
    fprintf(stderr, "logoff failed\n");
    goto error;
  }
  printf("logged out\n");
error:
  if ( err )
    OCIHandleFree(err, OCI_HTYPE_ERROR);
  if ( svc )
    OCIHandleFree(svc, OCI_HTYPE_SVCCTX);
  if ( env )
    OCIHandleFree(env, OCI_HTYPE_ENV);
  return 0;
}

int main()
{
  return my_connect("test_user", "qqq123", "XE");
} 
```

## 运行前

```
export NLS_LANG=x 
```

## 堆栈跟踪

问题是使用 NULL 指针调用 __pthread_mutex_destroy。

```
#0    __pthread_mutex_destroy (mutex=0x0) at pthread_mutex_destroy.c:28
#1    0x00007ffff585e6e0 in sltsmxd () from /lib/libclntsh.so.11.1
#2    0x00007ffff56a147c in kpufhndl0 () from /lib/libclntsh.so.11.1
#3    0x00007ffff56a0185 in kpufhndl () from /lib/libclntsh.so.11.1
#4    0x00007ffff567cac1 in OCIHandleFree () from /lib/libclntsh.so.11.1
#5    0x0000000000400a0c in my_connect (username=0x400dd1 "test_user", password=0x400dca       "qqq123", sid=0x400dc7 "XE") at test2.c:24
#6    0x0000000000400c27 in main () at test2.c:84 
```

## 产品详情

```
Basic Lite Package Information

Thu Oct  4 13:00:49 UTC 2007

Client Shared Library 64-bit - 11.1.0.6.0

System name:    Linux
Release:        2.6.9-34.0.1.0.11.ELsmp
Version:        #1 SMP Mon Dec 4 22:20:39 UTC 2006
Machine:        x86_64 
```

## 操作系统详细信息

```
Linux 3.2.0-37-generic #58-Ubuntu SMP Thu Jan 24 15:28:10 UTC 2013 x86_64 GNU/Linux
Distributor ID:    Ubuntu
Description:       Ubuntu 10.04.4 LTS
Release:           10.04
Codename:          lucid 
```

## 问题

目前我只是不释放该内存区域，但这不是一个*好的*解决方案。你怎么看，什么是好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:00:09.457

这看起来可能是“基本精简版”即时客户端中的一个错误，尽管我在 MOS 上看不到任何相关内容；但如果是这样的话`OCIEnvCreate()`，不是`OCIHandleFree()`我认为你建议的那样。

`OCIEnv`我见过的示例代码都没有尝试在遇到失败时清理`OCIEnvCreate()`; 它似乎总是退出，包括[Oracle 自己的示例代码](http://docs.oracle.com/cd/E24693_01/appdev.11203/e10646/oci16rel001.htm#sthref2433)。自从您获得指向它的指针以来，该函数似乎正在创建`OCIEnv`结构，但可能尚未分配该结构的内部。由于它处于不确定状态，因此试图清理它可能是一项吃力不讨好的任务。因此，不打电话似乎应该没问题`OCIHandleFree()`。

我能够在 Oracle Enterprise Linux 5.6 下使用适用于 Linux x86-64 的 11.2.0.3.0 Basic Lite 客户端包（来自[TechNet 下载](http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html)）重新创建问题。使用基本（非精简版）客户端包时，未发现问题 - 没有内存错误，也没有“无法初始化环境”消息，因此`OCIEnvCreate()`调用成功。但是它确实无法登录，无论如何这可能更合理。

这表明你不应该期望函数因为`NLS_LANG`值而失败——那部分看起来像一个错误。如果由于其他原因确实失败了，请不要尝试清理。我看不到任何暗示 SDK 不能与 Lite 包一起使用的东西，但是您正在强制失败，然后尝试清理超出规范，因此以前可能不会经常看到这种组合。但是，即使没有触发内存故障的清理，它看起来也是在错误的点上失败了。

要克服明显的错误并在正确的时间点出现故障，在登录期间，您可能需要切换到基本（非 Lite）客户端包。

# c# - SQL 精简版？或替代方案

> ID：14955309
> 
> 赞同：1
> 
> 时间：2013-02-19T10:34:31.827
> 
> 标签：c#, sql, database, visual-studio

我正在构建一个应用程序，它只需要通过数据库记录它的设置，所以就像我使用名称登录：“Mobstaa”一样，它需要在下次启动应用程序时填写用户名文本框。还有一些其他类似的小设置需要存储在该数据库中。

现在我想知道使用 SQL 精简版是否聪明，我读到了精简版的一些缺点，但我真的不希望运行我的应用程序的用户需要安装一个非常大的 SQL 文件一个小型应用程序，有人知道我使用 SQL Compact Edition 是否明智，或者有人对我的问题有很好的替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:39:48.767

如果您真的只想存储一些设置并想使用数据库，我建议您使用[SQLite](http://www.sqlite.org/)。这个数据库比 MS-SQL 精简版更轻量级，它是一个内存数据库，因此您可以在您的产品中发布数据库，而不必在您的计算机上安装单独的数据库。

# javascript - JQuery - 与参数函数中的变量范围混淆

> ID：14955315
> 
> 赞同：1
> 
> 时间：2013-02-19T10:35:00.277
> 
> 标签：javascript, jquery

[JSFiddle-SSCCE](http://jsfiddle.net/c7JFH/)

```
function restoreTitle() {
    for (var i = 0; i < 4; i++) {
        clicks[i] = false;
        letter = $('#title-wrapper p[index="' + i + '"]');
        letter.css('cursor', "pointer");
    }
    animateTitle();
}

function animateTitle() {
    for (var i = 0; i < 4; i++) {
        letter = $('#title-wrapper p[index="' + i + '"]');
        direction = i < 2 ? 1 : -1;
        letter.css('right', 50 * direction + "%");
        doAnimateLetter(i, letter, direction);
    }
}

function doAnimateLetter(i, letter, direction) {
   loop(function(){
        var current = letter.css('right').replace("%", "");
        var incoming = parseInt(current) - (5 * direction);

        letter.css('right', incoming + "%");
        var completed = incoming == 0;
        if(completed) letter.fadeTo(animation_speed, 1);
        return !completed;
    });       
}

function loop(run) {
    if (run.apply()) requestAnimationFrame(function () {
        loop(run);
    });
} 
```

我想要实现的是让两个左边的字母从左边飞进来，让两个右边的字母从右边飞进来。我找不到哪里出错了。

# php - 提交后php表单不会发送或转到标题位置

> ID：14955320
> 
> 赞同：0
> 
> 时间：2013-02-19T10:35:11.690
> 
> 标签：php, forms, submit, form-submit

我有一个用于联系目的的简单 php 表单。但是，提交后它不会发送电子邮件或转到正确的页面。它改为重定向到 mail.php。

我的名为contact.php的联系表格如下：

```
 <form id="contact-form" action="mail.php" method="POST">
    <fieldset>

        <label><span class="text-form">Your Name:</span> <input type="text" name="name"></label>
        <label><span class="text-form">Your Email:</span><input type="text" name="email"></label>
        <label><span class="text-form">Your Contact No:</span><input type="text" name="contact"></label>
        <div class="wrapper">
            <div class="text-form">Your Message:</div>
            <textarea name="message" rows="6" cols="25"></textarea><br />
            <div class="clear">
        </div>
        <div class="buttons">
        <a class="button" href="#"><input class="button" type="submit" value="Send"></a>
        <a class="button" href="#"><input class="button" type="reset" value="Clear"></a>
        </div>

    </fieldset>
</form> 
```

而名为mail.php的php代码如下：

```
 <?php
    $name = $_POST['name'];
    $email = $_POST['email'];
    $message = $_POST['message'];
    &contact = $_POST['contact'];
    $formcontent="From: $name \n Message: $message";
    $recipient = "info@whatever.co.za";
    $subject = "Contact form message";
    $mailheader = "From: $email \r\n";
    mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
    header("Location:contact.php");
    ?> 
```

我究竟做错了什么。它只是不会将消息发送到电子邮件或重定向到正确的页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:57:01.310

你的语法有点错误。`&contact`第 5 行应该是`$contact`. 我假设您在生产服务器上，因此错误报告将被禁用并且您不会收到任何警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T10:45:25.933

尝试在邮件功能之前使用@

```
<?php
$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$contact = $_POST['contact'];
$formcontent="From: $name \n Message: $message";
$recipient = "info@whatever.co.za";
$subject = "Contact form message";
$mailheader = "From: $email \r\n";
@mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
header("location: contact.php");
?> 
```

即使邮件功能产生任何问题，这也会让您通过。另外请检查是否有任何其他标头未使用[http://php.net/manual/en/function.headers-sent.php](http://php.net/manual/en/function.headers-sent.php)函数发送。

我强烈建议使用 PHPMailer 或其他一些类来发送任何类型的电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:39:16.207

请检查contact.php 文件是否发生了从contact.php 到mail.php 的重定向

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T10:42:29.560

我认为从您的服务器发送邮件可能存在问题。mail.php 文件可能会在邮件功能上跳闸，而不是进行重定向。

创建一个新文件，其中仅包含 php 邮件功能（带有您的电子邮件地址和测试消息）并从您的网络浏览器浏览它，它会发送吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T10:48:23.977

尝试在脚本开头使用 ob_start()，然后 exit(); 在 header("位置：contact.php");

像这样……

```
<?php
    ob_start();
    $name = $_POST['name'];
    $email = $_POST['email'];
    $message = $_POST['message'];
    &contact = $_POST['contact'];
    $formcontent="From: $name \n Message: $message";
    $recipient = "info@whatever.co.za";
    $subject = "Contact form message";
    $mailheader = "From: $email \r\n";
    mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
    header("Location: contact.php");
    exit();
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T10:50:20.197

将 mail.php 更改为以下内容：

```
<?php
mail("info@whatever.co.za", "Contact form message", $_POST['message'], "From: ".$_POST['name']." <".$_POST['email'].">");
header("Location: contact.php");
?> 
```

# dos - djgpp编译的harbor exe不能在纯dos中运行

> ID：14955323
> 
> 赞同：0
> 
> 时间：2013-02-19T10:35:18.983
> 
> 标签：dos, exe, clipper, djgpp

我使用 haarbour 编译器编译了一个 Clipper 程序，生成的 c 文件使用 djgpp 编译以生成最终的 exe。此 exe 在 Windows 98 的控制台窗口中运行良好。但是，当我退出到 msdos 提示符或尝试在纯 dos 中运行时，它不会给出任何错误。但没有走得更远。但是 num lock 和 cap locks 响应正确。当我按 ctrl+al+del 时，它会给我消息 hdpmi 被用户终止。我已经尝试过 cwsdpmi 而不是 Hdpmi32 但问题仍然存在。在 exe HBRUN.exe 上，它充当生成的 .hrb 文件的解释器，而不是独立的 exe。当我以纯方式运行 HBRUn 时，它的行为方式相同。但是当我运行另一个没有 dbf 文件的目录时，它给了我错误 dbf file not found ！这在控制台窗口中也可以正常工作，但为纯 DOS 编译。我认为使用harbor和djgpp生成的所有exe都存在一些问题，如果它们很大的话。一个简单的 5-6 行程序的 .hrb 文件由 hbrun 在纯 dos 中正确运行（hbrun 的大小约为 1700 K，而我的 exe 文件大小为 950 K 有人可以遮光吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T07:15:14.420

可悲的是，您不太可能在这里找到任何帮助。我建议向海港项目本身寻求帮助。他们可以[在 github](http://harbour.github.io/)上找到[他们的开发人员列表（带有电子邮件地址！）](http://harbour.github.io/crew.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T22:24:55.457

海港很强大。 [http://harbour.github.io/](http://harbour.github.io/)

要在纯 DOS 下运行，我建议您尝试 OPENWATCOM

这是来自 Pritpal Bedi（开发人员之一）的消息副本：

我可以用 OpenWatcom DOS 编译 Harbor。机器：Windows 7 32 位

脚步：

1.  下载： http: [//ftp.heanet.ie/pub/openwatcom/open-watcom-c-dos-1.9.exe](http://ftp.heanet.ie/pub/openwatcom/open-watcom-c-dos-1.9.exe)
2.  安装在 C:\WATCOM。安装时遵循所有默认选项，除了对 AUTOEXEC.bat 和 CONFIG.sys 进行更改。WATCOM 会将这两个文件以 .DOS 作为扩展名保存。
3.  复制 C:\Watcom\autoexec.dos C:\Watcom\m.bat
4.  将 PATH 语句重新定义为： SET PATH=C:\WATCOM\BINW;C:\Harbour\bin\dos\watcom;%PATH%
5.  保持所有其他 SET 完好无损。
6.  CD 到 C:\Harbour
7.  执行 C:\Watcom\m.bat
8.  执行 DOS-MAKE [不要使用“安装”选项，它会污染你现有的环境]
9.  Harbor 二进制文件将存放在 C:\Harbour\bin\dos\watcom

注意 [而且很奇怪] 步骤 7 和 8 必须重复几次，因为您启动它的控制台窗口会消失，但不要担心，这似乎是内存问题。

1.  CD到港口\测试
2.  问题：hbmk2 hello -workdir= -run 看起来很长的命令行无法通过，因此我们必须缩短路径并因此缩短命令行长度。
3.  高兴，因为您将在当前控制台中看到“Hello World”。

普里帕尔贝迪

# delphi - Delphi XE3 和 Fast Report 4 之间没有链接的组件

> ID：14955324
> 
> 赞同：1
> 
> 时间：2013-02-19T10:35:22.423
> 
> 标签：delphi, delphi-xe3, fastreport

我正在尝试在 FastReport 4 中打印一个数组。我在他们的官方页面上找到了教程并尝试使用它。我在报告中添加了一个`TfrxUserDataSet`组件和一个`MasterData`。但是，我无法将这两者联系起来。`MasterData`没有看到我的`TfrxUserDataSet`组件。

我究竟做错了什么？编译的演示对我没有帮助，因为我没有安装 C 语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:55:24.600

转到报表设计器中的报表>数据...并在那里检查您的 TfrxUserDataSet。

# c# - 带有迁移的 .NET 序列化框架

> ID：14955325
> 
> 赞同：3
> 
> 时间：2013-02-19T10:35:27.103
> 
> 标签：c#, .net, serialization, migration

我习惯于使用 Ruby/Rails 和 ActiveRecord 框架。这个框架的优点之一是定义数据库模式的迁移策略。这意味着旧版本的数据库始终可以自动升级。

但是现在使用 .NET 我正在寻找一种文件格式来存储项目的用户数据。XML 是显而易见的选择，而 .NET 到 XML 的序列化是微不足道的。然而，随着项目的老化，可能需要更改序列化策略。字段可能需要重命名或移动或更改其类型。

用例是程序的新版本必须加载项目文件的旧版本，这可能会自动发生，可能会向用户显示正在加载的文件将发生迁移的消息。

是否有现有的 .NET 序列化框架可以处理通用模式版本控制和迁移，还是我必须从头开始？

# javascript - 如何在javascript中创建枚举

> ID：14955332
> 
> 赞同：0
> 
> 时间：2013-02-19T10:35:49.623
> 
> 标签：javascript

我需要创建命名常量。

例如：

```
NAME_FIELD: {
            CAR : "car", 
            COLOR: "color"} 
```

使用：

```
var temp = NAME_FIELD.CAR // valid
var temp2 = NAME_FIELD.CAR2 // throw exception 
```

最重要的是，如果密钥无效，我需要使这个枚举导致错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:41:59.450

> 最重要的是，如果密钥无效，我需要使这个枚举导致错误

不幸的是，你不能。您执行伪枚举的方式是通常的方式，即在对象上创建属性，但如果您尝试从不存在的对象中检索属性，则无法让 JavaScript 引擎引发错误存在。相反，引擎将返回`undefined`.

您可以通过使用函数来做到这一点，这显然存在实用程序问题。

或者（我真的不喜欢这个想法），你可以这样做：

```
var NAME_FIELD$CAR = "car";
var NAME_FIELD$COLOR = "color"; 
```

由于您将这些作为免费标识符访问，因此尝试读取一个不存在的值：

```
var temp2 = NAME_FIELD$CAR2; 
```

...以 . 失败`ReferenceError`。（即使在非严格模式代码中也是如此；[*隐式全局的恐怖*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)只适用于*写入*一个自由标识符，而不是从一个标识符中读取。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:40:30.683

现在不推荐使用普通 javascript 对象中的自定义 setter 和 getter，解决方案可能是为您的对象和`set`函数定义一个类：

```
NAME_FIELD= {
     CAR : "CAR", 
     COLOR: "COLOR"
};

function MyClass(){
}
MyClass.prototype.setProp = function (val) {
  if (!(val in NAME_FIELD)) throw {noGood:val};
  this.prop = val;
}
var obj = new MyClass();

obj.setProp(NAME_FIELD.CAR); // no exception
obj.setProp('bip'); // throws an exception 
```

但由于枚举不是原生构造，我不确定我会使用这样的东西。这听起来太像*“试图在 javascript 中强制使用 java 功能”*。你可能不需要这个。

# symfony - 自定义 Doctrine2 'datetime' 类型也用于 'date' 比较？

> ID：14955334
> 
> 赞同：0
> 
> 时间：2013-02-19T10:35:50.563
> 
> 标签：symfony, doctrine-orm

我在 Symfony 2.0 环境中使用 Doctrine 2.1.7。为了正确处理日期和时间，我使用自定义的“日期时间”类型将每个日期和时间以 UTC 格式保存在数据库中。当我加载它们时，所有内容都会转换为当前时区。这完美地工作并且配置如下（在我的 Symfony 项目中`config.yml`）：

```
doctrine:
  dbal:
    default_connection: default
    types:
      datetime:  Acme\DemoBundle\General\UTCDateTimeType 
```

我有一个`Usage`使用日期属性调用的实体，它具有日期类型。不知何故，我未能检索到特定日期的任何使用信息，比如 2013 年 2 月 18 日。最终打开MySQL查询日志，发现执行了如下查询：

```
...
FROM account a0_
LEFT JOIN resource_usage r1_
  ON a0_.id = r1_.account_id AND (r1_.date = '2013-02-17 23:00:00')
WHERE... 
```

所以这是有趣的部分，我相信有两件事出了问题。似乎`datetime`发生了自定义类型转换（我在 GMT+1）并且 Doctrine2 使用了错误的日期格式字符串。当应用自定义日期时间时，Doctrine2 是否会以某种方式覆盖常规日期类型？还是我做错了什么？

（我`WITH`在我的 DQL 中使用了该构造，但是当我在 . 中使用相同的比较时也会发生这种情况`WHERE`。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:09:32.550

Doctrine 2 ORM 自动将自定义类型所需的转换应用于绑定到它的参数。

在您的情况下，应用的任何比较`datetime`都会将结果绑定`Acme\DemoBundle\General\UTCDateTimeType#convertToDatabaseValue($value, $platform)`到您的查询。

如果您只想使用自定义`datetime`格式处理一个特定情况，您可能应该给它另一个名称，例如`'utcdatetime'`，然后仅在绝对必要时使用它。这样，与常规`datetime`字段的比较仍将保留原始行为。

您还可以通过使用第三个参数来强制绑定类型，并按照[`Doctrine\ORM\AbstractQuery#setParameter()`](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/AbstractQuery.php#L218)您的方式强制进行参数转换。

# iphone - 旋转、缩放和移动一个图像并将变换发送到其他 ViewController 后的错误坐标

> ID：14955337
> 
> 赞同：0
> 
> 时间：2013-02-19T10:36:15.850
> 
> 标签：iphone, ios, objective-c, rotation, transform

我正在处理图像（比例、位置、旋转）。完成后，用户将被重定向到另一个视图控制器，我将在同一位置加载相同的图像。

我将转换作为字符串从一个视图控制器发送到另一个：

```
NSStringFromCGAffineTransform(self.myImage.transform) 
```

但是图像位置不正确，稍微移动了一点。

我已经尝试发送边界、中心，甚至图像的帧以及变换，但我没有得到与原始图像相同的位置、比例和旋转。

提前致谢！

# extjs - 如何取消 ExtJS 网格的 sortchange 事件？

> ID：14955338
> 
> 赞同：0
> 
> 时间：2013-02-19T10:36:16.007
> 
> 标签：extjs, extjs4.1

我正在为网格实现多重排序。我想为此使用该`sortchange`事件，但我必须取消该事件，以便我可以使用我自己的排序配置调用商店。

这没有用：

```
oGrid.on('sortchange', function(oColumnContainer, oColumn, strSortOrder){
  //...
  return false;
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:09:10.990

自己找到了解决办法。

当我需要我的多重排序时，我将网格上的所有列设置为`sortable: false`在创建时（似乎不可能即时执行此操作）

然后`on('headerclick`，我在创建网格后立即为所有列对象设置了一个 , function() {...})`。

这`sortable: false`可以防止标题上的单击事件对表格进行排序，但稍后我仍然可以`sort()`使用保存的列以编程方式调用商店。

```
var oGrid = Ext.create( 'Ext.grid.Panel', {
  ...
  columns: [
    { ..., sortable: false }
  ]
});

for( i in oGrid.columns ) {
  oGrid.columns[i].on('headerclick', function(){...});
} 
```

# flash - 如何批量编辑 swf 动画影片剪辑的形状？

> ID：14955342
> 
> 赞同：1
> 
> 时间：2013-02-19T10:36:22.310
> 
> 标签：flash, edit, batch-processing, maya

对于一个 Flash 游戏项目，我有通过 3D 渲染软件（即 Maya 矢量渲染器）生成的 swf 动画剪辑。现在我需要在单个多帧剪辑中隔离部分剪辑（角色的身体、盔甲、剑等）。但是我需要这些剪辑被角色的身体掩盖（例如，当剑在身体后面摆动时，它应该被裁剪，所以即使剑实际上在身体后面摆动，我也可以将剑的动画剪辑保持在身体剪辑的前面......）

为此，我使用了一种传统的 sfx 技术：我在纯绿色背景上渲染每个项目（例如剑），并且角色的身体也具有相同的绿色着色器。然后我只需要擦除 Flash 中剪辑的每一帧上的绿色形状。问题是我会有很多剪辑，每个剪辑都有很多帧......有没有办法使用闪存或任何软件批量编辑它？或者任何人都可以想到一种更方便的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:36:26.020

如果您有透明背景 png，请尝试将其中一个放入 flash 并进行位图跟踪。这应该只留下您的对象，为您节省每一帧上的“擦除绿色形状”步骤。

如果这是可以接受的/您想要的，那么您可以做的是将大量帧作为影片剪辑导入时间轴，然后使用 jsfl 脚本一次对所有帧进行位图跟踪。

这是我编写的一个 jsfl 脚本，它可以跟踪分布在许多帧上的位图（每帧有 1 个位图）。复制内容并将其保存为 jsfl 文件。

要运行它，将一堆 png 导入时间轴并选择它们所在的所有帧。然后转到“命令”->“运行命令”以跟踪所选帧中的每个位图。

```
var timeline = fl.getDocumentDOM().getTimeline();

// get selected frame numbers
var selectedFrameObject = timeline.getSelectedFrames();

var start = selectedFrameObject[1];
var end = selectedFrameObject[2];

fl.trace("Selected frames: "+ start +"-"+ end);

for(var counter = start; counter < end; counter++){
    timeline.currentFrame = counter;
    document.selectAll();
    // you can play with these values to change the tracing parameters
    document.traceBitmap(100, 8, "normal", "many corners");
    document.selectNone();
} 
```

# networking - 如何将 rsync 绑定到特定接口？

> ID：14955344
> 
> 赞同：3
> 
> 时间：2013-02-19T10:36:29.040
> 
> 标签：networking, rsync

我的服务器中配置了很多接口，每个接口都连接到特定的网卡并具有单独的路由表。这些接口可以通过“netstat -a”命令来识别。

现在，我想执行仅连接到特定接口的 rsync 命令。我有这个要求，因为每个接口都将通过一个单独的隧道/路径，我想要一个特定的 rsync 命令通过指定的隧道同步文件。

具体来说，我想要一种指定接口名称的方法。

谢谢，莫汉。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T10:41:30.473

您可以`--address=x.x.x.x`在命令行上使用指定接口的地址。

我认为没有任何方法可以直接指定接口，但是该`ip`命令可以告诉您接口的地址，因此您可以使用以下内容：

```
IP=$(ip -4 -br addr show eth0 | awk '{split($3,a,"/"); print a[1]}')
rsyncd ... --address=$IP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-14T13:15:37.227

我编写了这个小 perl 脚本来将接口名称转换为地址，将其保存为`iftoip`（或类似的）

```
#!/usr/bin/perl

use strict;
use warnings;
use IO::Interface::Simple;
use feature qw(say);

my $iface = shift;

my $if = IO::Interface::Simple->new($iface) or die "$!: $iface";
say $if->address;
exit 0; 
```

你可以用 bash 做类似的事情：

```
iftoip() {
  ip addr show $1 | grep inet | awk '{print $2}' | cut -d'/' -f1
} 
```

只需将以上 3 行添加到`~/.bashrc`并启动一个新的 shell 或`source ~/.bashrc`

运行它会产生：

```
v@juno:~$ iftoip ens33
10.251.17.94
v@juno:~$ iftoip ens34
192.168.78.128
v@juno:~$ echo "IP=$(iftoip ens33)"
IP=10.251.17.94
v@juno:~$ iftoip ens35 #perl
No such device: ens35 at /home/v/bin/iftoip line 10. 
```

或者

```
v@juno:~$ iftoip ens35 #bash
Device "ens35" does not exist. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-30T09:10:45.063

这已经尝试使用 2 个接口，具有不同的子网并且有效。

```
rsync -avzP -e 'ssh -b 10.100.16.X' /var/tmp/ent1 10.100.16.X:/var/tmp/;

rsync -avzP -e 'ssh -b 10.100.20.X' /var/tmp/ent2 10.100.20.X:/var/tmp/ ; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-05-22T08:09:16.087

从客户端到服务器，通过 ssh 使用：

```
 rsync -avP -e 'ssh -b x.x.x.x' tmp/ server:tmp/ 
```

# jenkins - 云我从 Jenkins/Hudson 访问构建目录？

> ID：14955347
> 
> 赞同：0
> 
> 时间：2013-02-19T10:36:34.420
> 
> 标签：jenkins, hudson, clover

我使用 Jenkins 运行 Clover，我可以在 Jenkins 的 web GUI 上看到 HTML 报告，但我也想下载 clover.pdf。它在工作区目录下创建（仅最新版本）并构建目录，如 Jenkins\jobs\Job_test\builds\2013-02-19_17-12-25。

有什么解决方案可以从 web 访问 Jenkins\jobs\Job_test\builds\2013-02-19_17-12-25 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:54:02.283

归档您需要的工件。所有存档的工件都将存储在 Jenkins 服务器中，并且可以从 Web 访问。

工件的链接如下所示/jenkins/view/Test/job/jobname/lastSuccessfulBuild/artifact/path/to/mypdf.pdf

这可以通过构建后步骤“归档工件”来实现：

![在此处输入图像描述](../Images/39bb9bc67b4e82c8000b374ea4051dfd.png)

# php - 换行在 PHP 中意外显示

> ID：14955351
> 
> 赞同：4
> 
> 时间：2013-02-19T10:36:53.007
> 
> 标签：php, include, line-breaks, linefeed

在过去的几个小时里，我一直在努力寻找解决这个问题的方法。我正在发送一个 AJAX 请求，在进行一些小的更改之前，它运行良好，将一个可爱的可用字符返回给 Javascript。然而，现在，一个 \r\n 被返回，我花了太长时间追踪它。我找到它被包含在哪里的最后一种方法是在我的脚本周围的各个地方回显“OMG”，直到它出现在 HTML 的第 2 行而不是第 1 行。这是有问题的脚本：

```
// Import Global Game Variables
include('../engine/engine_core_functions.php');

// Convert our gamestate(gameID)
//$curGamestate = getCurrentGamestate($gameID);

// Make sure it's a valid turn
if(isMyTurn()) {
    // Draw a card from the card drawing mechanism
    $cardValue = drawCard();
    $cardValue = str_replace("\r", 'R', $cardValue);
    echo $cardValue;
}
else echo 'Error 3'; 
```

跳行紧跟在顶部的包含文件之后。在包含之前，没有换行符，在包含之后，换行符。所以我去包含文件。放置我的

```
echo 'OMG!'; 
```

在包含文件的 VERY END 不会产生换行符。这使我相信包含文件可能（为什么！？）会产生换行符（现在是凌晨 5 点......）。但是，有问题的包含文件的顶部有多个包含文件。它们都不会产生中断。整个“engine_core_functions.php”根本不生成换行符。

但是，当它包含在上面显示的脚本中时，会显示一个中断。不用说，我感到困惑和非常恼火。我可以简单地删除有问题的字符（通过 PHP 或 Javascript），但这让我很恼火，我似乎无法解决问题的根源。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:41:32.127

您可能在文件的开头或其他地方有某种不可见的 BOM 标记。始终让`<?`或成为 PHP 文件的第一个字符串，并养成习惯，如果它要被另一个文件包含，则`<?php`不要以整个 PHP 文件结尾。`?>`

# transactions - Spring Batch 中的显式提交

> ID：14955352
> 
> 赞同：0
> 
> 时间：2013-02-19T10:36:54.050
> 
> 标签：transactions, commit, spring-batch, explicit

我正在使用休眠作为数据访问层的弹簧批处理。我的工作有树步骤。在最后一步中，我需要在 ItemWriter 中的工作期间执行显式提交（刷新），因为我必须读取需要之前保留特定数据的数据库视图。

我设置了一个特定的jtatransactionmanager，当执行开始时，在第一步中，它捕获了一个异常：

```
org.springframework.transaction.TransactionSystemException: Could not commit JDBC transaction; nested exception is java.sql.SQLException: You cannot commit during a managed transaction! 
```

提前致谢

# jenkins - 如何在Jenkins中将动态选择参数值传递给Shell

> ID：14955354
> 
> 赞同：0
> 
> 时间：2013-02-19T10:37:02.227
> 
> 标签：jenkins, jenkins-plugins

我已经安装了动态参数插件并选中了复选框 This build is parameterized and selected dynamic selection parameter 并使用以下脚本创建了一个下拉列表。

> `def list = ["app1","app2","app3"]`

现在我想将下拉列表的值传递给 Shell

例如在shell中我正在执行命令

```
mkdir parameter 
```

如果我从下拉列表中选择 app1 代替参数，它应该替换参数如下

```
mkdir app1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:47:48.603

我不知道动态参数插件，但是使用内置的 Jenkins 参数，符号如下：

```
mkdir ${list} 
```

# vb.net - 如何在灯光开关中将项目添加到组合框

> ID：14955361
> 
> 赞同：1
> 
> 时间：2013-02-19T10:37:32.863
> 
> 标签：vb.net, visual-studio-lightswitch, lightswitch-2012

我是 lightswitch 的新手，我搜索了很多，但找不到这个简单问题的正确解决方案。我需要根据用户选择将项目添加到组合框中。（不是来自现有表）

例如，如果用户选择国家，以下城镇必须添加到组合框中。

```
USA - Texas, New York etc
UK  - London , Surrey 
```

我怎样才能做到这一点？我使用 vb.net 作为我的后端。我发现这篇文章[如何创建一个未绑定的组合框](http://hgminerva.wordpress.com/2012/01/08/how-to-create-an-unbound-combobox-in-microsoft-ligthswitch/)很有用。但无法根据我的情况工作。

将项目添加到组合框的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:03:09.900

在 Lightswitch 中，如果您希望将一组动态数据绑定到控件，则该数据*必须*在表中。然后，您需要创建一个查询，根据用户的选择过滤该表中的数据，并将您的控件绑定到该查询。

这是一对描述实现与您的情况相似的情况的文章：

[用于数据输入的嵌套 AutoCompleteBox](https://dotnettim.wordpress.com/2011/03/20/lightswitch-nested-autocompletebox-for-data-entry/)

[用于数据输入的嵌套 AutoCompleteBox 第 2 部分](https://dotnettim.wordpress.com/2011/04/11/lightswitch-nested-autocompletebox-for-data-entry-part-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:15:05.747

我们不能直接将我们自己的值分配给组合框。我们必须使用数据表（如 embedded.kyle 所述）或者我们必须创建自定义控件来分配值。

我已经为上述场景使用了自定义用户控件。我遵循的详细步骤可以在以下[链接中找到](http://www.c-sharpcorner.com/UploadFile/051e29/user-control-in-lightswitch-2011/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:46:25.870

添加绑定表中尚不存在的记录是一种非常常见的情况。不幸的是，在 LightSwitch 中没有开箱即用的方法可以做到这一点，您只需编写代码来实现它，就像在这篇博文中一样。

[使用 AutoCompleteBox 添加不存在的记录](http://dotnettim.wordpress.com/2011/04/20/lightswitch-add-non-existent-records-using-autocompletebox/)

或者，当然也有人建议，您可以创建一个自定义控件来完成这项工作。

# apache - 当我尝试将本地目录复制到远程服务器目录时

> ID：14955365
> 
> 赞同：0
> 
> 时间：2013-02-19T10:37:40.510
> 
> 标签：apache, scp, remote-server

当我尝试将目录从本地计算机复制到远程服务器目录时，它要求输入远程服务器密码，但我没有为此设置任何密码。我应该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:42:53.500

你有没有测试在没有密码的情况下输入登录名（会话名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:44:56.443

我认为您必须设置密码，即使您在物理上使用该远程服务器时它会自动登录，您的用户帐户仍然会有密码。您的意思是您正在尝试使用没有密码的 ssh 密钥？

# ruby - 循环条件可能未定义的局部变量

> ID：14955368
> 
> 赞同：0
> 
> 时间：2013-02-19T10:37:47.383
> 
> 标签：ruby, loops, rubymine

Rubymine 将**发现**的变量标记为可能未定义。我认为答案是将在开始之外**找到**的变量移动，但然后我进入了一个永远不会退出的紧密循环。我确信这是一个块范围问题，但缺乏 ruby​​ 经验来了解问题所在。我假设这是被标记的，因为**found**是在**begin**内声明的，所以这里的问题是..这是有效的代码还是 Rubymine 的检查器在这种情况下是错误的？

```
begin
  found = false
  @some_collection.keys.each do |key|
    found = evaluate_collection(@some_collection[key], key) unless found
  end
end while found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:01:24.580

根据[ruby​​spec for while](https://github.com/rubyspec/rubyspec/blob/master/language/while_spec.rb)：

```
 it "executes code in containing variable scope" do
    i = 0
    while i != 1
      a = 123
      i = 1
    end

    a.should == 123
  end 
```

作为语句`begin...end while bool`的另一种形式`while`，它也在包含变量范围内执行：

```
begin
  found = 'asdf'
end while false
puts found 
```

将输出`asdf`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:27:22.190

你可以稍微重构你的代码，所以它不应该发出警告

```
found = false
while !found
  @some_collection.detect do |k, v|
    found = evaluate_collection(v, k)
  end
end 
```

或者你可以用递归来写

```
find = lambda do |collection|
  collection.each do |k,v|
    return found if found = evaluate_collection(v, k)
  end
  find.call(collection)
end

found = find.call(@some_collection) 
```

但是如果没有尾部优化，它可能会因堆栈溢出而失败:)

# jface - org.eclipse.jface_3.2.2的原始来源

> ID：14955371
> 
> 赞同：0
> 
> 时间：2013-02-19T10:37:59.323
> 
> 标签：jface

我有很多谷歌，还下载了 Eclipse-Version 3.2.2 来获取源代码。

插件文件夹不包含源。

有人知道我在哪里可以找到/下载它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:42:19.263

你试过 JFACE FOR ECLIPSE PAGE

[http://wiki.eclipse.org/JFace](http://wiki.eclipse.org/JFace)

# c# - .net 中的异常处理

> ID：14955374
> 
> 赞同：-1
> 
> 时间：2013-02-19T10:38:11.867
> 
> 标签：c#, exception

我已经捕获了一个异常，在捕获它之后我必须附加方法名称，以便我应该知道错误来自哪个方法，然后将其抛出到另一个函数并将其保存在数据库中。

```
try
{
}
catch (Exception ex)
{
    string strError = ex.Message.ToString() + "methodname:getNoOfRecordsForBatchProcess";
    throw strError.ToString();
} 
```

但它给了我错误，你不能使用字符串变量来抛出异常。抛出异常只与系统异常一起使用。有什么办法可以处理这个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T10:39:31.527

[方法名称在Exception.StackTrace](http://msdn.microsoft.com/it-it/library/system.exception.stacktrace.aspx)属性中也是可见的。

顺便说一句，您可能会依靠其他方法来使用[StackFrame Class](http://msdn.microsoft.com/it-it/library/system.diagnostics.stackframe.aspx)恢复其名称，例如：

```
 private static string GetCallingMethodName()
        {
            const int iCallDeepness = 2; //DEEPNESS VALUE, MAY CHANGE IT BASED ON YOUR NEEDS
            System.Diagnostics.StackTrace stack = new System.Diagnostics.StackTrace(false);
            System.Diagnostics.StackFrame sframe = stack.GetFrame(iCallDeepness);
            return sframe.GetMethod().Name;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:47:50.920

回答*您的问题*：

```
throw new Exception(strError); 
```

（但是，正如其他人所说，这可能不是处理此问题的最佳方法。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T10:42:01.920

[如何获取导致异常的方法的名称的](https://stackoverflow.com/questions/4598255/how-to-get-the-name-of-the-method-that-caused-the-exception)可能重复项。

```
catch (Exception ex)
{
   MethodBase site = ex.TargetSite;
   string methodName = site == null ? null : site.Name;
   ...           
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T10:44:11.293

当捕获和重新抛出异常时，“建议”创建一个新异常，带有有意义的错误消息，并将原始异常作为内部异常传递。

例如：

```
catch(Exception ex)
{
  const string message = "Some error message.";
  throw new MeaningfulException(message, ex);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T11:04:01.743

我也会去`StackFrame`。我正在发布@Tigran 答案的扩展（因为您要求在`try{...}catch{...}`块内更明确地使用），所以如果这有助于您理解用法，请接受他的[回答](https://stackoverflow.com/a/14955394/674700)，**而不是**我的：

```
try
{
    int a = 0;
    var r = 1 / a;
}
catch (Exception ex)
{
    throw new Exception(
        String.Format("{0} Method name: {1}",
            ex.Message,
            GetCallingMethodName()),
        ex);
} 
```

`GetCallingMethodName`: _

```
private static string GetCallingMethodName()
{
    const int iCallDeepness = 1; //DEEPNESS VALUE, MAY CHANGE IT BASED ON YOUR NEEDS
    System.Diagnostics.StackTrace stack = new System.Diagnostics.StackTrace(false);
    System.Diagnostics.StackFrame sframe = stack.GetFrame(iCallDeepness);
    return sframe.GetMethod().Name;
} 
```

PS @Tigran，如果您认为不需要此答案，我将删除此答案。

# mongodb - MongoDB 返回集合中的所有字段

> ID：14955377
> 
> 赞同：0
> 
> 时间：2013-02-19T10:38:35.270
> 
> 标签：mongodb

是否有返回集合中存在的所有字段（键）的查询？

由于 MongoDB 具有灵活的文档结构，集合中的字段从 doc 更改为 doc，我想查询集合中的所有字段。

fe {“颜色”：“红色”，“形状”：“圆形”，“半径”：3}，{“颜色”：“绿色”，“形状”：“方形”，“长度”：2，“宽度” “：3}

此文档在同一个集合中。我希望查询返回 - {"color", "shape", "radius", "length", "width"}

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:43:21.610

由于集合中的每个文档都可以有不同数量的键，因此没有好的方法可以做到这一点，MongoDB 没有（与 SQL 不同）关于集合中存在哪些键的元数据。

但是，这里有一些工具可以提供帮助：

*   [https://github.com/variety/variety](https://github.com/variety/variety)
*   [https://github.com/skratchdot/mongodb-schema/](https://github.com/skratchdot/mongodb-schema/)

这是一个相关的问题和一些答案：

*   [MongoDB获取集合中所有键的名称](https://stackoverflow.com/questions/2298870/mongodb-get-names-of-all-keys-in-collection)

# c# - 使用实体框架实现 MVVM 模式 - 添加删除

> ID：14955378
> 
> 赞同：1
> 
> 时间：2013-02-19T10:38:39.933
> 
> 标签：c#, wpf, entity-framework, mvvm

我正在尝试在我的 WPF 项目上实现 MVVM 模式，该项目使用实体框架来获取/操作数据。我很困惑，我想知道验证我的模型对象集合到数据库的更改应该在哪里？？？我的应用程序如下：在我看来，我有一个人员数据网格，两个文本框将加载所选人员的姓名/姓氏，一个更新行更改的按钮和一个删除所选行的按钮。

在我的 ModelView 中，我有一个 observableCollection，它将在类的初始化时加载，其中包含来自我的数据库（实体）的信息 + 两个用于添加/删除按钮的 Relaycommands（请在下面找到代码）。

问题是我没有很好地理解 MVVM 的理念，我的数据的修改应该在何时何地以及如何推送到数据库？现在，当我更新我的数据库中的一行，并将我的数据库上下文修改保存在我的 observable 集合上时，提交，但是当我删除一个项目时它不是 cdase，我必须在数据库中手动查找它并删除它（我已将我的 observablecollection 附加到将处理此问题的 NotifyCollectionChangedEventHandler 事件）...我不明白使用 Observable 集合的意义！

有没有使用数据库数据的“完美”mvvm架构的简单解释？？？谢谢！我的视图模型

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections.ObjectModel;
using System.Windows.Data;
using System.ComponentModel;
using System.Windows.Input;
using System.Windows;
using MVVMOK.Models;
using MVVMOK.Base;
using System.Collections.Specialized;

namespace MVVMOK.ViewModel
{
    class MainWindowViewModel : ViewModelBase
    {
        private DW_MargoEntities contexte;

        //Constructor
        public MainWindowViewModel()
        {
            contexte = new DATABASEEntities();
            collectionOfCollaborators = new ObservableCollection<Collaborator>();
            foreach (Collaborator c in contexte.Collaborator)
            {
                collectionOfCollaborators.Add(c);
            }

            //Abonnement pour l'ajout ou la suppression d'éléments :
            collectionOfCollaborators.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(collectionOfCollaboratorsChanged);

            //Assignation des commandes : 
            this._deleteComand = new RelayCommand(new Action<object>(DeleteRow));
            this._updateCommand = new RelayCommand(new Action<object>(UpdateDB));
        }
        //liste des propriétés publiques:

        //Propriété pour représenter l'élément séléctionné du datagrid
        private  Collaborator selectedItem;
        public Collaborator _selectedItem
        {
            get { return selectedItem; }
            set
            {
                if (value != selectedItem)
                {
                    selectedItem = value;
                    OnPropertyChanged("_selectedItem");
                };
            }
        }
        //Propriété pour représenter l'élément séléctionné:
        private ObservableCollection<Collaborator> collectionOfCollaborators;
        public ObservableCollection<Collaborator> _collectionOfCollaborators
        {
            get { return collectionOfCollaborators; }
            set
            {
                this.collectionOfCollaborators = value;
                OnPropertyChanged("_collectionOfCollaborators");
            }
        }

        //Commandes : 
        public ICommand _updateCommand
        {
            get;
            set;
        }
        public ICommand _deleteComand
        {
            get;
            set;
        }

        void collectionOfCollaboratorsChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            Collaborator f = new Collaborator();
            switch (e.Action)
            {
                case NotifyCollectionChangedAction.Add:

                    for(int i = 0; i<e.NewItems.Count;i++)
                    {

                        if (e.NewItems[i].GetType().Equals(f.GetType()))
                        {
                            contexte.Collaborator.Add(e.NewItems[i] as Collaborator);
                        }
                    }
                    contexte.SaveChanges();
                    break;

                case NotifyCollectionChangedAction.Remove:

                    for (int i = 0; i < e.OldItems.Count; i++)
                    {

                        if (e.OldItems[i].GetType().Equals(f.GetType()))
                        {
                            contexte.Collaborator.Remove(e.OldItems[i] as Collaborator);
                        }
                    }
                    contexte.SaveChanges();
                    break;
                //Reset = Clear

            }
        }

        //Services :
        public void UpdateDB(object msg)
        {
            contexte.SaveChanges();
        }

        public void DeleteRow(object msg)
        {

            _collectionOfCollaborators.Remove(_selectedItem);
            contexte.SaveChanges();
        }
    }
} 
```

我的模型

```
namespace MVVMOK.Models
{
    using System;
    using System.Collections.Generic;

    public partial class Collaborator
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Surname { get; set; }
    }
} 
```

我的 XAML

```
<Window x:Class="MVVMOK.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:local="clr-namespace:MVVMOK.ViewModel"
        Title="MainWindow" Height="350" Width="525">
    <Window.DataContext>
        <!-- Declaratively create an instance of our SongViewModel -->
        <local:MainWindowViewModel />
    </Window.DataContext>
    <Grid>
        <Grid Height="237" HorizontalAlignment="Left" Margin="12,12,0,0" Name="grid1" VerticalAlignment="Top" Width="479">
            <DataGrid AutoGenerateColumns="False" Height="237" HorizontalAlignment="Left" Name="dataGrid1" VerticalAlignment="Top" Width="479" ItemsSource="{Binding Path=_collectionOfCollaborators, Mode=TwoWay}" SelectionMode="Single" SelectedItem="{Binding Path=_selectedItem, Mode=TwoWay}"  >
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding Path=Id}" Header="ID" />
                    <DataGridTextColumn Binding="{Binding Path=Name}" Header="Name" Width="4*" />
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
        <TextBox Height="23" HorizontalAlignment="Left" Margin="104,255,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text ="{Binding Path=_selectedItem.Name, Mode=TwoWay}" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="104,283,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" Text ="{Binding Path=_selectedItem.Surname, Mode=TwoWay}" />
        <Label Content="Name" Height="28" HorizontalAlignment="Left" Margin="50,255,0,0" Name="label1" VerticalAlignment="Top" />
        <Label Content="Surname" Height="28" HorizontalAlignment="Left" Margin="37,283,0,0" Name="label2" VerticalAlignment="Top" />
        <Button Content="Delete Row" Height="23" HorizontalAlignment="Left" Margin="416,260,0,0" Name="button1" VerticalAlignment="Top" Width="75" Command="{Binding Path=_deleteComand}"/>
        <Button Content="Update All" Height="23" HorizontalAlignment="Left" Margin="335,260,0,0" Name="button2" VerticalAlignment="Top" Width="75" Command="{Binding Path=_updateCommand}"/>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:48:53.777

对于您为什么没有看到预期结果，我没有答案，但我想我会给您一些关于如何更好地构建它的想法。

当数据更改时，您真正想做的是应用命令。例如，应该应用删除命令。处理此命令时，您可以执行任何验证并保留更改或标记错误。因此，您在中继命令中包装的 DeleteRow 类实际上应该是应用程序模型层中的一个单独类。您可以拥有一个使用 MVVM 的 Web 层，但它应该不了解持久性，它应该应用命令，然后在命令成功或失败时做出适当的反应。

```
this._deleteComand = new RelayCommand(new Action<object>(DeleteRow)); 
```

可能更像是

```
this._deleteComand = new RelayCommand(new Action<object>() => {new DeleteCommandHandler().Apply(new DeleteCommand(){SelectedItem = _selectedItem})}); 
```

DeleteCommandHandler 和 DeleteCommand 将构成您的模型的一部分（我将为此使用不同的类库）。

现在您的处理程序需要了解您的持久性机制，因此您可以在处理程序中创建 DW_MargoEntities 上下文并执行删除工作。

这样做的好处是您的视图模型不再负责更新您的模型，因此您的视图模型将简单得多，并且不会直接依赖于您使用的数据库。

一旦你有一个命令处理程序模式设置，我将转向你的上下文的依赖注入。

例如，与其说 new DeleteCommandHandler()，不如让一个 Inversion of Control 容器（例如 Structure Map）来构建它。

```
ObjectFactory.GetInstance<DeleteCommandHandler>(); 
```

然后你的 DeleteCommandHandler 类可能看起来像

```
class DeleteCommandHandler
{
    DW_MargoEntities context;
    public DeleteCommandHandler(DW_MargoEntities context)
    {
        this.context = context;
    }

    public bool Apply(DeleteCOmmand command)
    {
        if (not valid) {return false;}
        var item = context.LoadEntityById<EntityTypeHere>(command.SelectedItem) // Query the item

        context.Delete(item);
        return true;
    }
} 
```

抱歉有点含糊，要解释的东西很多，这里有点晚了。阅读命令模式[http://en.wikipedia.org/wiki/Command_pattern](http://en.wikipedia.org/wiki/Command_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:33:54.820

我认为 mvvm 中没有“THE”方式，总是有几种方式，而且总是取决于它。

但是对于您的解决方案，有一个接口`IDataErrorInfo`可以帮助您。

例如，看看这篇文章...... [http://www.codeproject.com/Articles/98681/Validating-User-Input-WPF-MVVM](http://www.codeproject.com/Articles/98681/Validating-User-Input-WPF-MVVM)

或在这里： [http ://blindmeis.wordpress.com/2012/04/16/wpf-mvvm-idataerrorinfo-validation-errortemplate/](http://blindmeis.wordpress.com/2012/04/16/wpf-mvvm-idataerrorinfo-validation-errortemplate/)

也许您应该考虑使用存储库模式或简单的`DataService`.

希望有帮助...

# python - python + sqlalchemy：循环调用存储过程

> ID：14955382
> 
> 赞同：1
> 
> 时间：2013-02-19T10:38:52.727
> 
> 标签：python, mysql, sqlalchemy

我有一个 python 脚本，它定期查询 mysql 数据库中的数据（使用 sqlalchemy 0.7.4）。它通过运行存储过程来实现。如果过程返回任何内容，脚本将尝试处理数据（这部分与 DB 无关），然后使用第二个过程将结果保存回来。

在此之后，它会休眠一段时间（通常是一分钟），然后再次休眠直到停止。它应该能够运行数周。

我经常会收到这个错误：“在回滚无效事务之前无法重新连接”。我已经使用我能找到的各种信息进行了一些更改，我想知道这是否是实现我想要的好方法：

```
from sqlalchemy import create_engine, exc
from sqlalchemy.orm import sessionmaker
from sqlalchemy import text, func
import time

class StoredProcedures():
    _engine = None
    _connection = None
    _session = None

    def __init__(self, cs):
        self._engine = create_engine(cs, encoding='utf-8', echo=False, pool_recycle=600)
        self._connection = self._engine.connect()
        Session = sessionmaker(bind=self._engine)
        self._session = Session()

    def sp_test_1(self, user_id):
        t = self._session.begin(subtransactions=True)

        try:
            query = 'call sp_get_files(%d)'%user_id
            result = self._session.execute(query).fetchall()
            t.close()
            return result
        except exc.DBAPIError, e: #Proper way of reconnecting?
            t.rollback()
            time.sleep(5)
            self._connection = self._engine.connect()
            Session = sessionmaker(bind=self._engine)
            self._session = Session()
        except:
            t.rollback()

        return None

cs = "mysql://test:test@127.0.0.1/test_db"
db_stored_procedures = StoredProcedures(cs)

while (True):
    files = db_stored_procedures.sp_test_1(1)
    if len(files) > 0:
        print "This is where processing happens"
        #And this is where the second procedure would be called to store the results
    time.sleep(15) 
```

我已经对此进行了测试，但我几乎只是写了它，所以我没有进行任何长期测试。我想先听听你的意见。

**编辑：** 最初我使用连接来执行查询，就像这样（省略了与上述脚本相同的大部分脚本）：

```
def sp_test_1(self, user_id):
    t = self._connection.begin()

    try:
        query = 'call sp_get_files(%d)'%user_id
        result = self._connection.execute(query).fetchall()
        t.close()
        return result
    except exc.DBAPIError, e:
        #same as above
    except:
        t.rollback()

    return None 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:19:23.893

您正在使用 Session 接口，[该接口在内部使用 Transaction 对象](http://docs.sqlalchemy.org/ru/latest/core/connections.html#using-transactions)，因此我认为您不需要进行自己的事务管理。

除了简单的之外，我认为没有太多需要：

```
def sp_test_1(self, user_id):

    query = 'call sp_get_files(%d)'%user_id
    result = self._session.execute(query).fetchall()
    return result 
```

如果这会产生相同的异常，那么发布完整的堆栈跟踪会很有用。例外是朋友而不是对手。:)

# android - 使用opencv比较android中的两个图像

> ID：14955383
> 
> 赞同：2
> 
> 时间：2013-02-19T10:39:09.157
> 
> 标签：android, opencv, image-processing, computer-vision

我正在使用 OpenCV 比较 android 中的两个图像。我想使用以下功能：

[比较函数](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#compare)

但是如何在android中使用它？或者是否有另一种方法可以使用 OpenCV 比较 android 中的图像。请帮帮我。我对 OpenCV 很陌生。任何帮助，将不胜感激。我经历了许多堆栈问题，但无法得到我想要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:01:40.573

我想到了。

实际上，我必须使用 Core OpenCV 中的功能。IE

```
Core.compare(src1, src2, dst, cmpop); 
```

我不知道这个核心课程。

# django - 每种食物的几张照片。如何设计模型？

> ID：14955391
> 
> 赞同：1
> 
> 时间：2013-02-19T10:39:25.007
> 
> 标签：django, django-models

我需要每张的几张照片`Food`。设计模型有多好？

这是我的尝试，但它不是一个好的：

```
class Photo(models.Model):
    img = models.ImageField(upload_to="media/images")

class Food(models.Model):
    name = models.CharField(max_length=100)
    desc = models.TextField()
    photo = models.ManyToManyField(Photo) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:47:05.347

在我看来 ForeignKey 会更好：

```
class Photo(models.Model):
    img = models.ImageField(upload_to="media/images")
    food = models.ForeignKey(Food)

class Food(models.Model):
    name = models.CharField(max_length=100)
    desc = models.TextField() 
```

因为一张照片总是针对特定的食物

# jquery - 需要在 ul 侧识别一个居中的 li

> ID：14955393
> 
> 赞同：1
> 
> 时间：2013-02-19T10:39:26.660
> 
> 标签：jquery, jquery-mobile, swipe

我正在使用下面的代码在移动 jquery 中左右滑动列表元素，我需要识别当前与滑动对齐的 li。代码工作正常我只需要识别滑动的 li。

```
<script>
    $(function() {
        var item = $('.pan li');
        var itemWidth = item.width();
        var itemLenght = item.length;
        var scrollerWidth = itemWidth * itemLenght;
        scrollLimt = itemWidth;
        item.click(function(){
            item.removeClass('active');
            $(this).addClass('active');
        });

    var position = 0;
    function next() {
        position -= scrollLimt;
        if (position <= -scrollerWidth)
            position = 0;
        update();

    }

    function prev() {
        position += scrollLimt;
        if (position > 0)
            position = 0;
        update();
    }

    function update() {
        var pan = document.getElementById("pan");
        pan.style.OTransform = "translateX(" + position + "px)";
        pan.style.MozTransform = "translateX(" + position + "px)";
        pan.style.WebkitTransform = "translateX(" + position + "px)";
    }
        $('#pan').bind("swipeleft", next);
        $('#pan').bind("swiperight", prev);

        $("img").bind("dragstart", function(ev) { ev.preventDefault(); });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:48:33.677

试试这个：

```
function update(isSwipedLeft) {
    var pan = document.getElementById("pan");
    var swipedLi = isSwipedLeft ? $(pan).prev('li') : $(pan).next('li');//this is your required li.
    pan.style.OTransform = "translateX(" + position + "px)";
    pan.style.MozTransform = "translateX(" + position + "px)";
    pan.style.WebkitTransform = "translateX(" + position + "px)";
} 
```

并像这样调用这个函数：

```
function next() {
    position -= scrollLimt;
    if (position <= -scrollerWidth)
        position = 0;
    update(false);

}

function prev() {
    position += scrollLimt;
    if (position > 0)
        position = 0;
    update(true);
} 
```

# iphone - iPad 中的无效配置文件问题

> ID：14955395
> 
> 赞同：1
> 
> 时间：2013-02-19T10:39:36.123
> 
> 标签：iphone, macos, ipad, provisioning-profile, ios-provisioning

我尝试通过将配置文件作为邮件附件发送来安装它。当我试图打开它时，会出现一条错误消息，上面写着“无效的配置文件”。但是当我在我的 MAC 中双击相同的配置文件时，它会毫无问题地添加到 Xcode 中。当我去看组织者时，它说有效的个人资料。有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:53:50.410

无需将配置文件安装到设备中。虽然你可以安装它，但它会在安装 IPA 时自动安装。您收到的错误表明您尝试安装的配置文件不包括您的设备 UUID。在 xcode 中，它显示有效的配置文件，因为 xcode 将仅检查与该配置文件关联的证书和私钥。Xcode 不会检查哪些设备包含在配置文件中。

# android - android - 为所有片段保持相同的操作栏

> ID：14955396
> 
> 赞同：1
> 
> 时间：2013-02-19T10:39:40.890
> 
> 标签：android, android-fragments, android-fragmentactivity

我通过扩展开发了一个 android 应用程序`FragmentActivity`。一切都按原样工作。我已经`NAVIGATION_MODES`把`TABS`. 我有一个`LISTVIEW`内部`TAB A`。`FRAGMENT A`当用户点击时`LISTVIEW ITEM`，新`Fragment/ACTIVITY`的应该启动显示相同`ACTION BAR`和相同`TABS`。我怎样才能做到这一点。

请提出任何方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:59:28.177

用ListView获取当前Fragment A的容器，替换里面的Fragment

所以在listview适配器的onclick方法中：

```
FragmentManager fm = getFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
ft.replace(FragmentA.this.getParent().getID(), mNewFragment);
ft.addToBackStack(null);
ft.commit(); 
```

因为`FragmentA.this.getParent().getID()`很笨重，所以搜索FragmentA所在的Container的ID，用它代替。`R.id.FragmentAContainerID`

# javascript - 在 html5 应用程序中使用 jquery/javascript 访问外部 xml 文件而不托管文件

> ID：14955400
> 
> 赞同：0
> 
> 时间：2013-02-19T10:39:45.850
> 
> 标签：javascript, android, jquery, html, jquery-mobile

我是 jquery/java script/html 5 的新手。我正在创建一个应用程序，我将从移动设备中的 sdCard 文件夹中读取 XML 文件并对其进行解析；之后，数据将相应地填充到页面上。

如何在不托管 XML 文件的情况下访问移动应用程序的外部 XML 文件？我需要从本地驱动器访问它。我将有一个特定的路径。我需要通过我的应用程序选择 XML 数据。

目前，我正在 Microsoft Visual Studio 中将应用程序创建为 HTML 页面，并尝试访问放置在我的“D 驱动器”文件夹中的 XML 文件。

提前致谢。

还没有帮助...有人可以提出一些想法吗？？？？

# yii - ClistView - 单个视图上的父级和子级

> ID：14955401
> 
> 赞同：0
> 
> 时间：2013-02-19T10:39:47.270
> 
> 标签：yii

我有两张桌子：“Streams”和“Punches”。一条溪流有许多拳。 ![在此处输入图像描述](../Images/6a5072514fd336c68c70b8b061089579.png)

在我看来，我使用“CListView”来显示所有打孔的流图像。 ![在此处输入图像描述](../Images/9a74252c122e26e4eb843a1e082e7278.png)

但我想在第一页显示流的图像，所有打孔的图像都将显示在下一页。
我怎样才能做到这一点？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:03:16.997

啊，我解决了这个问题...打算使用CActiveDataProvider，我使用CSqlDataProvider来“联合”两个表。

```
$count=Yii::app()->db->createCommand('SELECT COUNT(*) FROM tbl_user')->queryScalar();
$sql='SELECT * FROM streams union SELECT * FROM punches';
$dataProvider=new CSqlDataProvider($sql, array(
    'totalItemCount'=>$count,
    'sort'=>array(
        'attributes'=>array(
             'id', 'username', 'email',
        ),
    ),
    'pagination'=>array(
        'pageSize'=>10,
    ),
));
// $dataProvider->getData() will return a list of arrays. 
```

# c# - Dapper、Oracle 和命令参数

> ID：14955404
> 
> 赞同：1
> 
> 时间：2013-02-19T10:39:49.440
> 
> 标签：c#, oracle, orm, parameters, dapper

我在 Oracle 中有一个名为 MESSAGE 的表，它有一列 TERMINALID (VARCHAR2 8 NOT NULL); 并且该列有一个索引。该表中大约有 300,000,000 条记录。

现在，**这工作正常（0.0 秒）**：

```
using (var con = new OracleConnection(connectionString2))
{
    try
    {
        con.Open();

        var parameters = new DynamicParameters();
        parameters.Add("PTerminalId", value: "04447777", dbType: System.Data.DbType.AnsiString);
        Console.WriteLine("ora - messages #{0}", con.Query<decimal>("SELECT COUNT(*) FROM MESSAGE WHERE TERMINALID=:PTerminalId", param: parameters).FirstOrDefault());
    }
    finally { con.Close(); }
} 
```

这**失败了（超时）**：

```
using (var con = new OracleConnection(Properties.Settings.Default.GSMConnectionString2))
{
    try
    {
        con.Open();

        Console.WriteLine("ora - messages #{0}", con.Query<decimal>("SELECT COUNT(*) FROM GSM.MESSAGE WHERE TERMINALID=:PTerminalId", param: new { PTerminalId = "04447777" }).FirstOrDefault());
    }
    finally { con.Close(); }
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:33:40.187

基本上：@Vincent 所说[的：数据类型不匹配会使索引无法使用](https://stackoverflow.com/questions/1158188/index-not-used-due-to-type-conversion/1158272#1158272)。

在没有额外信息的情况下，dapper 会做出一些假设。其中一个假设是您的字符串在数据库中将继续是 unicode，因此它默认为`DbType.String`. 在大多数情况下，这是正确的或足够的，但在某些情况下它可能会出现错误 - 这就是为什么我们还提供工具 (via `DynamicParameters`) 以更明确地说明要添加的字符串参数的类型和长度。

# c# - 自定义属性类是否继承“继承的”AttributeUsage 标志？

> ID：14955406
> 
> 赞同：9
> 
> 时间：2013-02-19T10:39:57.250
> 
> 标签：c#, reflection, custom-attributes

考虑以下场景：

*   基属性类`BaseAttribute`有一个`AttributeUsageAttribute`指定它是不可继承的 ( `Inherited = False`)。
*   派生属性类`DerivedAttribute`继承自该基属性类。
*   基域类`Base`应用了派生属性。
*   从基域类`Derived`继承的域类被要求提供其自定义属性，包括继承的属性 ( `inherit: true`)。

下面是对应的代码：

```
using System;
using System.Linq;

namespace ConsoleApplication26
{
  class Program
  {
    static void Main ()
    {
      var attributes = typeof (Derived).GetCustomAttributes (true);
      foreach (var attribute in attributes)
      {
        Console.WriteLine (
            "{0}: Inherited = {1}",
            attribute.GetType().Name,
            attribute.GetType().GetCustomAttributes (typeof (AttributeUsageAttribute), true).Cast<AttributeUsageAttribute>().Single().Inherited);
      }
    }
  }

  [AttributeUsage (AttributeTargets.All, Inherited = false)]
  public class BaseAttribute : Attribute
  {
  }

  public class DerivedAttribute : BaseAttribute
  {
  }

  [Derived]
  public class Base
  {
  }

  public class Derived : Base
  {
  }
} 
```

在这种情况下，`GetCustomAttributes`API 返回`DerivedAttribute`该类的一个实例。我本来希望它不会返回该实例，因为[http://msdn.microsoft.com/en-us/library/system.attributeusageattribute.aspx](http://msdn.microsoft.com/en-us/library/system.attributeusageattribute.aspx)说它`AttributeUsageAttribute`本身是可继承的。

现在，这是一个错误，还是预期/记录在某处？

**注（2013-02-20）：**实验表明，类的`AttributeTargets`部分`BaseAttribute`确实是类继承的`DerivedAttribute`。例如，当我将允许的目标更改为 时`BaseAttribute`，`AttributeTargets.Method`C# 编译器将不允许我应用`DerivedAttribute`到一个类。因此，该`Inherited = false`部分不被 继承是没有意义的，`DerivedAttribute`因此我倾向于认为`GetCustomAttributes`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T09:01:28.237

根据 .NET 4.0 中的元数据，`AttributeUsageAttribute`该类被标记为`[AttributeUsage(AttributeTargets.Class, Inherited = true)]`. 所以，如果你的属性类（`BaseAttribute`在你的例子中），有一个`AttributeUsageAttribute`应用到它（所有`Attribute`类都应该，但如果他们没有 - 见下文，不要破坏任何东西），那么任何派生的类都`BaseAttribute`应该继承`AttributeUsage`应用的属性给它。

你的`Derived`类继承`DerivedAttribute`自 Base，因为`DerivedAttribute`没有`AttributeUsageAttribute`应用它自己的类，所以反射 API 依赖于`BaseAttribute`'s 属性。现在，去掉`AttributeUsageAttribute`你的`BaseAttribute`类，你会得到同样的结果，因为基`System.Attribute`类用`[AttributeUsage(AttributeTargets.All, Inherited = true, AllowMultiple = false)]`. 因此，任何属性类都将继承此属性，除非您指定不同的属性。

哇，这些都是复杂的段落。属性上的属性让人读起来很重：P

# c# - LongListSelector 和 ContextMenu 返回错误的项目

> ID：14955412
> 
> 赞同：3
> 
> 时间：2013-02-19T10:40:17.537
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我`LongListSelector`在一个页面中有这个：

```
<Controls:LongListSelector Height="Auto" x:Name="historylist" HorizontalContentAlignment="Stretch"  
                                   Background="Black" SelectionChanged="DidPressSelectItem">
            <Controls:LongListSelector.ItemTemplate>
                <DataTemplate>
                    <local:SearchTemplateSelector Content="{Binding}" HorizontalContentAlignment="Stretch">
                        <toolkit:ContextMenuService.ContextMenu>
                            <toolkit:ContextMenu Opened="ContextMenu_Opened">
                                <toolkit:MenuItem Header="Edit" Click="EditVideo"/>
                            </toolkit:ContextMenu>
                        </toolkit:ContextMenuService.ContextMenu>
.
.
.
.
                   </local:SearchTemplateSelector>
                </DataTemplate>

            </Controls:LongListSelector.ItemTemplate> 
```

这是`EditVideo`

```
private void EditVideo(object sender, RoutedEventArgs e)
    {
        VideoItem selectedVideo = (sender as MenuItem).DataContext as VideoItem;
        if (video == null) { return; }

        //Do Stuff

        this.RelodeTableData();
    } 
```

和`RelodeTableData`：

```
private void RelodeTableData()
    {
        System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() =>
        {
            searchResults.Clear();
            for (int i = 0; i < historyRep.historyArray.Count; i++)
            {
                VideoItem item = historyRep.historyArray[i];
                searchResults.Add(item);
            }
        });
    } 
```

问题是，当用户编辑一个项目并尝试编辑另一个项目之后，他得到了他编辑的最后一个项目`selectedVideo`。

编辑后，我使用 ReloadTableData 刷新列表数据。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T13:14:30.050

好的，经过大量搜索如何解决这个问题。我发现如果我将`Unload`方法添加到`ContextMenu`，这将清除 DataContext。

```
private void ContextMenu_Unload(object sender, RoutedEventArgs e)
    {
        ContextMenu conmen = (sender as ContextMenu);
        conmen.ClearValue(FrameworkElement.DataContextProperty);
    } 
```

# android - 从包名中获取已安装的应用程序

> ID：14955414
> 
> 赞同：0
> 
> 时间：2013-02-19T10:40:31.073
> 
> 标签：android, android-activity, package-managers

我已经尝试了我在下面粘贴的代码..但这给了我安装的每个应用程序但是我需要通过检查包名称来检查每个应用程序是否是我的...是否有一个代码可以传递给我将包名称添加到电话系统，以便它为我提供基于该包名称安装的所有应用程序。

```
PackageManager manager = getPackageManager();
        Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
        mainIntent.addCategory(Intent.CATEGORY_DEFAULT);
        final List<ResolveInfo> apps = manager.queryIntentActivities(mainIntent, 0);
        Collections.sort(apps, new ResolveInfo.DisplayNameComparator(manager));
        ArrayList<String> oArrInstalledHomeApps = new ArrayList<String>();
        if (apps != null) 
        {
            final int count = apps.size();

            for (int i = 0; i < count; i++) 
            {
                ResolveInfo info = apps.get(i);
                String strpackageName = info.activityInfo.applicationInfo.packageName;
if(strpackageName.contains ("com.ZZ."))
{
                oArrInstalledHomeApps.add(strpackageName);
}
            }
            return oArrInstalledHomeApps;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:51:03.810

有一种更清洁的方法可以做到这一点。

```
 final PackageManager pm = getPackageManager();
        ArrayList<String> oArrInstalledHomeApps = new ArrayList<String>();
        // get a list of installed apps.
        List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);
        for (ApplicationInfo packageInfo : packages)
        {
            Log.d(TAG, "Installed package :" + packageInfo.packageName);
            Log.d(TAG, "Launch Activity :" + pm.getLaunchIntentForPackage(packageInfo.packageName));
            if (packageInfo.packageName.contains("com.ZZ."))
            {
                oArrInstalledHomeApps.add(packageInfo.packageName);
            }
        }
        return oArrInstalledHomeApps; 
```

[从这个链接](https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run)无耻地复制

# memory-leaks - 嵌入式系统中的内存泄漏

> ID：14955417
> 
> 赞同：1
> 
> 时间：2013-02-19T10:40:43.197
> 
> 标签：memory-leaks, embedded

我需要检查嵌入式系统中的内存泄漏。

IDE 是 HEW，我们使用的是 uCOSIII RTOS。

Valgrind 不支持上述配置。您能否建议一种工具或方法来检查内存泄漏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:49:27.197

在嵌入式系统中动态分配内存的第一条规则是“不要”。在执行开始时将其全部分配一次，然后不理会。`malloc`否则，您必须评估并决定在（或类似操作）失败 时该怎么做。

如果您必须在运行时动态分配内存，那么在最简单的情况下，您可以使用日志基础设施来跟踪对`malloc`/`free`的调用，方法是在它们周围编写包装器。然后，您可以跟踪分配和解除分配发生的地点和时间，并希望看到缺少的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T10:30:07.137

我一直在考虑它，这里随机尝试一下如何在嵌入式系统上做到这一点： * 首先你需要检查发生在哪个线程泄漏。在进行分配时，您还应该计算每个线程有多少活动分配。如果分配数量在没有释放的情况下不断增长，这是一个可疑的任务 * 其次，您需要计算来自该线程的分配的分配数量。为此，请将 alloc 替换为宏。使用宏，您可以保存发起呼叫的文件名和行号。

例如

```
#define alloc(x) my_alloc(x, __LINE__, __FILE__)

void * my_alloc(size_t size, int line, char * file)
{
     // increase number of allocations and dealocations for each combination line/file
} 
```

同样，您需要定义 my_free。

在此之后，运行程序和 printf 不时地不断增长的分配。这应该有助于发现内存泄漏。

PS我没有对此进行测试，但我看到有人在我们的代码中做了类似的事情:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:16:54.060

您的要求并不完全清楚。如果您正在寻找能够在您的环境中找到内存泄漏的“valgrind”工具；这很难找到。

如果您有一些代码，则可以检查特定应用程序中的所有内存分配和内存释放。作为[链接 1 链接](https://stackoverflow.com/questions/6261201/how-to-find-memory-leak-in-c-code-project) [2](https://stackoverflow.com/questions/4224569/detecting-memory-leak-in-c)

还有一些文件可以通过执行它们来找到内存泄漏。

```
http://code.axter.com/debugalloc.cpp
http://code.axter.com/debugalloc.h

http://code.axter.com/debuglogger.cpp
http://code.axter.com/debuglogger.h

http://code.axter.com/debuglog.c
http://code.axter.com/debuglog.h 
```

1.  debugalloc.* 代码具有跟踪内存泄漏的能力，并且在注释中有描述和使用信息。

2.  debuglogger.* 代码有一些用于分析代码的代码。

3.  debuglog.* 是代码的一些受限 C 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T03:45:32.713

看看[libtalloc](http://talloc.samba.org/talloc/doc/html/index.html)，它是 Samba 中使用的核心内存分配器。如果您没有`atexit()`or `stdio.h`，它可能无法为您开箱即用，但将其移植到您的环境应该不需要太多工作。

查看[talloc_enable_leak_report_full()](http://talloc.samba.org/talloc/doc/html/group__talloc__debug.html#gab01ab00014902d25e9eaba9fd172821c)和[talloc_report_full()](http://talloc.samba.org/talloc/doc/html/group__talloc__debug.html#ga66136eb6105416bfcbd390ce6a4fc89c)（以及其他）以帮助您入门。

# java - Arrays.asList().contains() 与多个 if equals 指令的性能比较

> ID：14955418
> 
> 赞同：4
> 
> 时间：2013-02-19T10:40:42.460
> 
> 标签：java, arrays, if-statement

这些说明中的哪个在性能和内存使用方面更好：

```
if(val.equals(CONSTANT1) || val.equals(CONSTANT2) ..... || val.equals(CONSTANTn)) {

} 
```

或者

```
if(Arrays.asList(CONSTANT1,CONSTANT2, ..... ,CONSTANTn).contains(val)) {

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:55:12.333

理论上 #1 更快但无关紧要，因为 Arrays.asList 只创建一个对象 - 指定数组的列表视图（包装器），没有数组复制：

```
public static <T> List<T> asList(T... a) {
return new ArrayList<T>(a);
}

private static class ArrayList<E> extends AbstractList<E>
implements RandomAccess, java.io.Serializable
{
    private static final long serialVersionUID = -2764017481108945198L;
private final E[] a;

ArrayList(E[] array) {
        if (array==null)
            throw new NullPointerException();
    a = array;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-01T13:02:54.090

一个更好的问题是如何更清楚地编写此代码（如果性能确实很重要，则更快）。答案将是一个`switch`语句（或者甚至可能是多态性，如果你想将你的常量转换为一个枚举）或一个查找数组。

但是如果你坚持比较你的两种方法，第一种会稍微快一些。要了解这一点，让我们看看第二种方法的含义：

1.  使用常量创建一个新数组，将它们传递给 Arrays.asList 的 vararg 参数
2.  创建一个包装该数组的新列表对象
3.  遍历该数组，将每个元素与 equals 进行比较

第三步相当于你的第一种方法。

最后，值得注意的是，这样的操作可能需要不到一微秒的时间，因此除非您每秒调用此方法数百万次，否则任何方法都足够快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T10:55:48.160

由于您没有使用循环，我猜值的数量是如此之少，以至于实际上任何差异都无关紧要。

但是，话虽如此，如果要手动迭代并使用 equals() 与 asList() 和 contains() ......它仍然是相同的。

Arrays.asList() 返回一个列表的私有实现，它扩展了 AbstractList 并通过引用简单地环绕现有数组（不进行复制）。contains() 方法使用 indexOf() 对每个元素使用 equals() 遍历数组，直到找到匹配项然后返回它。如果你在找到一个等于时打破你的循环，那么这两个实现将是相当等价的。

唯一的区别是 Arrays.asList() 创建的附加列表结构的内存占用很小，除此之外......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T10:48:45.300

if(val.equals(CONSTANT1) || val.equals(CONSTANT2) ..... || val.equals(CONSTANTn)) {

}

在性能和内存方面更好，因为第二个需要时间来构建一个列表并开始在该列表中搜索 val。这里需要额外的内存来维护列表，并且需要额外的时间来遍历列表。其中将 val 与常量进行比较将使用短路比较方法。

# wordpress - wordpress 中的高级自定义字段不会显示在仪表板上

> ID：14955420
> 
> 赞同：0
> 
> 时间：2013-02-19T10:40:49.217
> 
> 标签：wordpress, custom-fields

我刚刚在我的 wordpress 网站上安装了高级自定义字段。

但是我在仪表板上找不到编辑屏幕来创建新的 ACF 或编辑它们。

有人知道为什么不显示吗？

wordpress 是今天最新版本的全新安装。亚足联也是如此

Wordpress 版本：3.5.1 亚足联版本：3.5.8.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:27:58.970

安装插件之前的一个好的开始是检查与 WordPress 版本的兼容性。

为此，请访问插件页面 [http://wordpress.org/extend/plugins/advanced-custom-fields/](http://wordpress.org/extend/plugins/advanced-custom-fields/)

在右侧，您可以检查兼容性：

> **要求：** 3.0.0 或更高版本
> 
> **最高兼容：** 3.5.0

在右下角，您还可以选择一个 WordPress 版本和一个插件版本，看看它是否有效（来自用户反馈）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:44:53.087

插件开发人员正在修改代码，使其符合 WordPress 的新条款/隐私。

WordPress 存储库中的插件代码（又名：如果您通过管理区域安装插件）不起作用。

但是如果你去他的 github 页面，你可以下载该插件的最新工作版本。上传 .zip 文件以安装插件，这将为您提供最新的工作版本。

[https://github.com/elliotcondon/acf](https://github.com/elliotcondon/acf)

# php - 我需要哪种 PayPal 服务？

> ID：14955421
> 
> 赞同：2
> 
> 时间：2013-02-19T10:40:50.527
> 
> 标签：php, paypal

我以前建立过支付系统，但我从未使用过 PayPal。

以前使用 Barclays 和 SagePay，您将数据（价格、项目行等）放在一起，使用他们的服务加密数据，然后将数据发布回他们的支付处理服务。

我想用 PayPal 做到这一点，但是我找不到任何看起来足够灵活的东西来完成上述操作。

我不想使用“立​​即购买”、“加入购物车”、“订阅”按钮，我需要在现有系统中灵活管理这些按钮。关于我需要什么的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:37:03.657

您已声明不要使用“立即购买”等按钮，因此请忘记网站付款标准。

如果您愿意访问 API，请使用[Website Payments Pro](https://www.paypal.com/webapps/mpp/paypal-payments-pro)或[Payflow Gateway](https://www.paypal.com/webapps/mpp/payflow-payment-gateway)。自适应支付是一种新的支付方式；它提供了一些额外的功能。

如果没有 API，请使用[PayPal Express Checkout](https://www.paypal.com/webapps/mpp/express-checkout)。

[以下](https://stackoverflow.com/questions/3948696/paypal-x-adaptive-payments-what-is-this)是有关付款类型的一些说明。

# wpf - 在 ConverterParameter 中使用字典中的字符串

> ID：14955423
> 
> 赞同：4
> 
> 时间：2013-02-19T10:41:00.313
> 
> 标签：wpf, xaml, data-binding

我正在尝试使用`String`字典中的 a：

```
<?xml version="1.0" encoding="utf-8" ?>
<Dictionary EnglishName="English" CultureName="English" Culture="en-US">
...
<Value Id="ButtonSuppressFieldInformation" 
       ToolTip="Remove field" Name="Remove field number "/>
...
</Dictionary> 
```

在此`ConverterParamter`启用多种语言支持：

```
<Button>
    ...
    <AutomationProperties.Name>
        <MultiBinding 
                Converter="{StaticResource IndexedForAutomationId}" 
                ConverterParameter="{loc:Translate 
                      Uid=ButtonSuppressFieldInformation, Default=Delete field}">
            <Binding RelativeSource="{RelativeSource Self}" />
            <Binding ElementName="MyContactDirectoryView" 
                     Path="ListConditionToSearch" />
        </MultiBinding >
    </AutomationProperties.Name>
</Button> 
```

但唯一显示的是数字 ( `IndexedForAutomationId`)，`string`没有出现。

使用 a`string`而不是`"{loc:Translate Uid=ButtonSuppressFieldInformation, Default=Delete field}"`作品：

```
<MultiBinding Converter="{StaticResource IndexedForAutomationId}" 
              ConverterParameter="Delete field"> 
```

显示`Delete field 0`。

`loc:Translate`用作 ConverterParameter的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:10:53.237

这个问题可能是由于很多事情造成的，更多的代码在这里真的会有所帮助。但是，我将从转换器`Convert()`方法上的断点开始，`IndexedForAutomationId`以 1）检查您是否从内部绑定中获得期望的值，以及 2）检查转换器本身是否从字典中返回正确的字符串。

请务必查看这些关于[如何调试 WPF 绑定](http://www.zagstudio.com/blog/486)的指南。

# java - 如何在线程之间进行健康检查？

> ID：14955424
> 
> 赞同：2
> 
> 时间：2013-02-19T10:41:06.793
> 
> 标签：java, multithreading, design-patterns, concurrency

我有一个进程，它的一个后台线程 ( `Thread-A`) 执行任务。如果进程挂起/崩溃，我想确保后台线程也崩溃/停止（对我来说没问题）。

我的意思是我不想处于某些线程崩溃的情况下，因此该进程本质上是非功能性的，并且后台线程（`Thread-A`）继续运行。

我需要以某种方式使该线程理解问题。
有这种模式吗？可能是某种健康检查？尽管如此，我怎么能确定我不会在运行状况检查线程上遇到同样的问题。

也许我对此感到困惑。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:46:43.430

您需要查看`ExecutorService`in `java.util.concurrent`，然后您可以在主线程退出时要求服务终止`ExecutorService.shutdown()`，只要您的后台线程是周期性的，因此可以停止。

否则，您需要在线程之间使用`AtomicBoolean`to 信号，并在布尔值为 false 时告诉后台线程退出。

最后，要检测第一个线程中的崩溃，请使用`UncaughtExceptionHandler`带有回调的回调，该回调指示后台线程退出。

当然，这一切都可以通过使用[守护线程](https://stackoverflow.com/questions/2213340/what-is-daemon-thread-in-java)来避免，但是如果后台线程被意外杀死，这将不允许后台线程自行清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:50:52.780

```
public class HealthChecker
{
    public final long THRESHOLD = 10000L; // 10 seconds

    private final Map <Thread, Long> lastFineReports =
        new ConcurrentHashMap <Thread, Long> ();

    /**
     * Each thread should call this method periodically.
     */
    public void iAmFine ()
    {
        lastFineReports.put (
            Thread.currentThread (), 
            Long.valueOf (System.currentTimeMillis ()));
    }

    /**
     * Used by whatchdog to know whether everything is OK.
     */
    public boolean isEverythingOK ()
    {
        Long [] timestamps = 
            lastFineReports.
                values ().
                    toArray (new Long [lastFineReports.size ()]);

        long now = System.currentTimeMillis ();
        for (Long t: timestamps)
            if (now - t.longValue () > THRESHOLD)
                return false;

        return true;
    }
} 
```

# facebook - 用于 URL 和视频共享的 Facebook 元数据

> ID：14955427
> 
> 赞同：1
> 
> 时间：2013-02-19T10:41:21.137
> 
> 标签：facebook, metadata

我有一个页面（URL），我网站的访问者可以在他们的墙上分享。我想要的是，当他们的朋友在他们的提要中查看帖子时，帖子的链接会点击进入我的网站，但他们墙上的帖子还包含一个他们可以直接在他们的提要中播放的视频。

我一直试图让它与 Facebook 页面元数据一起使用，但到目前为止还没有运气。我添加了以下标签，有什么明显的我遗漏的吗？

```
<meta property="fb:app_id" content="xyz" />
<meta property="og:title" content="My Page Title" />
<meta property="og:type" content="video" />
<meta property="og:url" content="/url/to/my/site" />
<meta property="og:description" content="Lorem ipsum" />
<meta property="og:image" content="http://www.youtube.com/watch?v=xCydfLwgXI" />

<meta property="og:video" content="http://www.youtube.com/watch?v=xCydfLwgXI" />
<meta property="og:video:height" content="640" />
<meta property="og:video:width" content="385" />
<meta property="og:video:type" content="application/x-shockwave-flash">
<meta property="og:video:secure_url" content="https://www.youtube.com/watch?v=xCydfLwgXI" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:03:51.787

确实，非常受欢迎的问题。看源码： http: [//fb.stevelarsen.co.uk/example.html](http://fb.stevelarsen.co.uk/example.html)

类似话题：[Open graph og:video Meta Tags 内容](https://stackoverflow.com/questions/3847496/open-graph-ogvideo-meta-tags-content)

# aem - CQ5 中的激活待定

> ID：14955428
> 
> 赞同：4
> 
> 时间：2013-02-19T10:41:24.090
> 
> 标签：aem

我在 CQ5 的 Geometrixx 站点中创建了一个测试页面。我可以在4502端口（作者环境）上很好地看到页面。但是当我激活页面以在 4503 端口（发布环境）上查看它时，我总是在控制台上看到页面前面的黄色图标，悬停时显示“激活待定”。#1 在队列中'

是否有一些附加的工作流程？如果是这样，我如何检查它并可能杀死它（现在）？还是有其他原因？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T17:01:12.590

默认复制队列设置指向 localhost:4503。如果您的发布实例与作者实例不在同一台机器上（这很常见），您将需要更改设置以指向有效的发布实例。一旦配置了有效的发布实例，排队等待激活的项目就会得到处理，并且图标将从黄色变为绿色。

如果队列被阻塞，您可以通过以下方式清除它：

*   去 /etc/replication/agents.author.html
*   单击默认复制代理。
*   然后点击队列上方的“清除”。这将清除整个队列。
*   如果要清除队列中的一个或多个特定项目，可以选择它们然后单击清除。

此页面包含有关对复制代理进行故障排除的几个步骤：http: [//helpx.adobe.com/cq/kb/replication-stuck.html](http://helpx.adobe.com/cq/kb/replication-stuck.html)

此页面包含有关复制代理的一些一般信息：http: [//dev.day.com/docs/en/cq/current/deploying/configuring_cq.html#Replicating from Author to Publish](http://dev.day.com/docs/en/cq/current/deploying/configuring_cq.html#Replicating%20from%20Author%20to%20Publish)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T22:13:01.250

您可以在以下位置检查复制队列

```
http://localhost:4502/etc/replication.html 
```

默认代理是

```
http://localhost:4502/etc/replication/agents.author/publish.html 
```

从这里您可以测试连接、查看日志并查看队列中的内容。您还可以清除队列或强制重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T18:41:54.387

有一种方法可以在不发布的情况下查看测试页面的“最终视图”：`wcmmode=disabled`

```
http:// localhost: 4502/cf#/content/geometrixx/folder/test.html 
```

只需删除 /cf# 并`?wcmmode=disabled`在扩展名后添加。

```
http:// localhost: 4502/content/geometrixx/folder/test.html?wcmmode=disabled 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-01T00:48:15.137

到目前为止没有明确提到的一件事：您需要运行两个 AEM 实例。端口 4502 和 4503 不指向同一实例的不同模式，因为 AEM 仅侦听一个端口（通常）。因此，您需要将 Author jar 复制到一个新目录并将其命名为 cq5-publish-4503.jar

此外，您可能需要更新 maven pom 文件以进行代码部署。但是，您可以将作者上已安装的捆绑包设置为自动复制/发布。

# powershell - 如何使用 Powershell 脚本在 PS 中将我的二进制可执行文件作为 cmdlet？

> ID：14955430
> 
> 赞同：2
> 
> 时间：2013-02-19T10:41:25.537
> 
> 标签：powershell, cmdlet

我有一个名为的二进制可执行文件`ruby.exe`位于

```
C://test//ruby.exe 
```

如何使用 powershell 脚本将其设置为 cmdlet，以便在我的 powershell 脚本中直接运行 ruby​​？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:52:02.503

您可以将其添加到 PATH 变量中。然后直接用 Ruby.exe 调用 with：

```
$path = [Environment]::GetEnvironmentVariable("Path")
$path = $path + ";"C:\Test\Ruby"
[Environment]::SetEnvironmentVariable("Path", $path, [System.EnvironmentVariableTarget]::Machine )
$env:path = $env:path + "C:\test\ruby" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:49:10.560

我相信你在“喷溅”之后。神奇之处在于使用 @ 运算符，它将参数列表（或参数字典）传递给底层命令。$psBoundParameters 包含在 splatting 中传递的魔法数据。

```
function Invoke-Ruby(
    [Parameter(ValueFromRemainingArgumnets=$True)][string[]]$Arguments
) { 
    c:\Test\Ruby.exe @Arguments
} 
```

要阅读有关 Splatting 的更多信息，请查看关于[嘿，脚本专家的这篇文章](http://blogs.technet.com/b/heyscriptingguy/archive/2010/10/18/use-splatting-to-simplify-your-powershell-scripts.aspx)

而且，您可能不想尝试在 PowerShell 中利用 ruby​​，而只是尝试将 PowerShell 用作 Web 框架（[PowerShell Pipeworks](http://powershellpipeworks.com/)）

# java - Cygwin 运行错误的 java 版本

> ID：14955434
> 
> 赞同：4
> 
> 时间：2013-02-19T10:41:36.843
> 
> 标签：java, cygwin

我对 Cygwin 有这个问题。我安装了 Java 1.6 和 1.7。我想将 maven 3.0.4 与 Java 1.7 一起使用，但我不想卸载 Java 1.6。我的 JAVA_HOME 看起来像：

```
C:\Program Files\Java\jdk1.7.0_09 
```

当我在 Cygwin 中运行 java -version 时，我得到：

```
java version "1.6.0_29"
Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02, mixed mode) 
```

当我在 cmd.exe 中运行相同的命令时，我得到：

```
java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode) 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:26:38.783

这里有两个单独的问题。

* * *

第一个问题是为什么`java -version`在 Cygwin 和经典的 Windows 命令解释器上找到不同的 Java 安装。

答案很可能是您的 Cygwin 和 Windows 环境分别具有不同的`$PATH`和值`%PATH%`。如果你想`java -version`在 Cygwin 上运行 Java 7，你需要确保 Cygwin`$PATH`包含 Java 7 bin 目录......在适当的语法中。

* * *

第二个问题是如何`mvn`在Cygwin下获取命令使用Java 7。

答案不是那么直截了当：

*   设置`$PATH`可能会解决您的问题。

*   根据 Maven 安装文档，`mvn`包装脚本应使用`$JAVA_HOME`(Cygwin) shell 中的环境变量来决定使用哪个 Java。

*   找出真正发生的事情的方法是查看包装脚本并查看它们实际在做什么。如果阅读脚本太难，请尝试“破解”脚本以包含`set -vx`. 这将告诉您正在读取脚本的哪些行，以及正在执行哪些命令。

*   最后，POM 文件可以影响构建的源和目标级别……独立于运行构建的 JVM。

# java - 如何使用 Java 和 Apache POI 将数据拆分到 MS Excel 中的页面

> ID：14955435
> 
> 赞同：1
> 
> 时间：2013-02-19T10:41:51.637
> 
> 标签：java, excel, apache-poi

我使用 poi api 从我的 java 程序中写入一个 excel 表。当我有大约 300 行来自 ms sql server 的数据，并且我使用 poi api 写入 excel 文件时，数据被写入但是连续的。我想要类似的东西，如果行号是 70，转到下一页并写入数据。所有页面的前10行数据相同。数据被写入，但前几行公共线没有被写入。我已经设置了 sheet.setautobreaks(true)。还是行不通。
在第 70 行之后，必须将数据写入同一张表中的新页面。将第 1 页的前 10 行复制到第 2 页，然后写入来自 sql 的数据。数据正在被写入。但是如果行号是 70，我该如何写，比如开始一个新页面？

# jsp - webapp vs WEB-INF下的spring mvc和jsp页面位置

> ID：14955438
> 
> 赞同：3
> 
> 时间：2013-02-19T10:41:54.780
> 
> 标签：jsp, spring-mvc

我对 webapp 和 WEB-INF 下的 spring mvc 和 jsp 页面位置有疑问。

假设我们有以下设置。

```
webapp
  WEB-INF
    mvc-dispatcher.xml
    web.xml
  login.jsp
  register.jsp
  success.jsp
  error.jsp
  index.jsp 
```

[我可以使用http://host.com/app/index.jsp](http://host.com/app/index.jsp)之类的网址从浏览器中引用页面，然后我可以从那里链接（a href）到*register.jsp*。从*register.jsp*我发布到控制器，控制器可以返回解析为*success.jsp的**成功*视图（使用*InternalResourceViewResolver*）。

 ***如果我在WEB-INF*下移动 jsp 页面（而不是之前在*webapp*下），我将无法从浏览器中引用[http://host.com/app/index.jsp 。](http://host.com/app/index.jsp)同样从*success.jsp* ，目前我使用href="index.jsp"链接到*index.jsp*，这将需要更改为映射到控制器（可能位于/类似于调度程序servlet），该控制器将返回*索引*作为视图名称。所以我所有的链接都需要由控制器提供服务。我对吗 ？或者当jsp页面位于WEB-INF下（给定InternalResourceViewResolver已配置）时，是否有办法在没有任何映射控制器的情况下引用jsp页面。

问候，

米腾。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T11:51:50.280

你是绝对正确的。您不能`WEB-INF`直接从浏览器中引用 JSP。这**很好**。您所有的请求都应该通过控制器转发到 JSP，并且您的所有 JSP 都应该在`WEB-INF`. 这样做的原因有很多：

*   用户无法获得 JSP 的实际来源，这对安全性产生了积极影响。
*   许多 JSP 依赖于某些请求属性的存在（模型）。当用户直接从浏览器调用 JSP 时，模型不存在。这可能会打破一些逻辑。
*   一个 JSP 下`WEB-INF`可能不做任何更改就可以服务不同的 URL，用户对此一无所知！
*   [当您执行 MVC（模型 2](http://en.wikipedia.org/wiki/Model_2)，而不是[模型 1](http://en.wikipedia.org/wiki/Model_1)）时，这只是一个好习惯

考虑到您关于直接引用没有控制器的 JSP 的问题：

*   [您可以通过JSP 错误页面](https://stackoverflow.com/questions/10323653/jsp-error-pages)将 HTTP 异常/Throwables 直接映射到 JSP 。例如，一种简单的技术适用于自定义 404。
*   当使用 Apache Tiles + Spring 并访问一些`/notmappedurl`Spring (Tiles) 时会尝试查找`notmappedurl`模板定义。（根据我使用 Tiles + Spring 的经验）。我认为其他视图技术也有类似的行为。
*   写起来并不难：`@RequestMapping("/someurl")void someurl(){}`. Spring 将尝试`someurl`根据方法名称查找视图。只是一个存根。**

# c# - 如何将数据插入到sql server中的自引用表中？

> ID：14955439
> 
> 赞同：1
> 
> 时间：2013-02-19T10:41:56.773
> 
> 标签：c#, sql, .net, sql-server

将数据插入自引用表的查询是什么。我的表有 4 列：`SlNo`, `Name`, `ParentId`, `CurrentBanlance`.

我尝试了这个 SQL 查询，但它没有执行，还有其他方法吗？

```
INSERT INTO Ptr_AcntInfo 
   SELECT 
       '" + txtAcName.Text + "',
       (SELECT [SlNo] FROM Ptr_AcntInfo WHERE [Ac_Nm] = '" + cbxAcntGrpName.Text + "'),"+0.00+"" 
```

在此查询中，我收到以下错误。

> *子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:44:59.410

查询应如下所示：

```
"INSERT INTO PTR_ACNTINFO (COL1, COL2)
(SELECT " + txtAcName.Text + ", SINo FROM
PTR_ACNTINFO
WHERE [Ac_Nm]='" + cbxAcntGrpName.Text + "')" 
```

请注意，此查询容易受到`SQL Injection`攻击。

[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

您应该使用参数化查询或存储过程。

**例子：**

```
SQLCommand sqlCommand = new SQLCommand(connection); 
sqlCommand.CommandText =  "INSERT INTO PTR_ACNTINFO (SELECT $name, SINo FROM
                           PTR_ACNTINFO WHERE [Ac_Nm]='$accNo')"

sqlCommand.Parameters.AddWithValue("$name", txtAcName.Text);
sqlCommand.Parameters.AddWithValue("$accNo", cbxAcntGrpName.Text); 
```

[http://johnhforrest.com/2010/10/parameterized-sql-queries-in-c/](http://johnhforrest.com/2010/10/parameterized-sql-queries-in-c/)

# c# - Windows Phone 文本框控件前景和背景画笔未正确更新

> ID：14955441
> 
> 赞同：0
> 
> 时间：2013-02-19T10:41:57.100
> 
> 标签：c#, windows-phone-7, windows-phone-8

TLDR：当通过触摸输入手动选择时，我的文本框将正确更新其前景和背景颜色，但如果我在创建它们后使用 Textbox.Focus() 方法，则无法更新。

问题与此类似 - [windows phone - textbox background](https://stackoverflow.com/questions/11137579/windows-phone-textbox-background)

我的应用程序创建一个带有关联 GotFocus 事件的文本框，每当文本框获得焦点时，它将文本框的前景和背景颜色更改为系统默认值。当用户按下键盘上的回车键时，应用程序会在第一个文本框下方生成另一个相同的文本框。

问题在于，对于这些文本框中的任何一个，如果手动按下文本框，一切正常，并且文本框会按原样显示。但是，如果我在按下 Enter 键后使用 TextBox.Focus()，虽然焦点已传递到文本框，并且 GotFocus 事件已被处理，但背景和前景颜色不会更新，在白色背景上留下白色文本。

我已经尝试在文本框之间传递焦点很多次（最多 10 次），即使我可以确认焦点正在按应有的方式传递，但只有当用户将焦点赋予文本框时，颜色才会更新（如果我通过代码将焦点放在文本框上，然后我必须手动取消选择然后重新选择它以应用颜色更改。如果我不通过代码提供焦点，我可以简单地选择它）。

代码是：

```
public void txtInputKeyUp(object sender, KeyEventArgs e)
{
    TextBox txtBox = (TextBox)sender;
    if (e.Key == Key.Enter)
    {
        Evaluate(txtBox);
        InitializeDivider();
        InitializeTextInput();
        InitializeTextOutput();
        txtInput[txtInput.Length - 1].Focus();
    }
}

public void txtInputGotFocus(object sender, RoutedEventArgs e)
{
    TextBox txtBox = (TextBox)sender;
    if(txtBox.Text == "Input Here")
    {
        txtBox.Text = "";
    }
    txtBox.Foreground = (SolidColorBrush)App.Current.Resources["PhoneForegroundBrush"];
    txtBox.Background = (SolidColorBrush)App.Current.Resources["PhoneBackgroundBrush"];
} 
```

Initializeblabla 的东西基本上只是创建相关的文本框和所有相关的数据。我尝试在文本框之间切换焦点，禁用和启用指定的文本框和其他一些选项，并且始终唯一有效的方法不是通过代码将焦点放在文本框上，而是等待用户选择文本框，一些我不是很满意。尝试手动编辑样式也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:22:22.350

我最终的解决方案是以非常短的间隔向应用程序添加一个计时器（足够短以使更改不可见），并在文本框获得焦点后更改文本框的颜色。

# mysql - MySQL 5.6.10 通过 apt-get

> ID：14955442
> 
> 赞同：3
> 
> 时间：2013-02-19T10:41:58.713
> 
> 标签：mysql, apt-get, aptitude

MySQL 5.6.10 现在*普遍可用*。如果我尝试升级它却说我已经在最新版本，即使安装的版本是 5.5.29。我在 Ubuntu 12.04 上。

```
$ sudo apt-get install --upgrade mysql
Reading package lists... Done
Building dependency tree       
Reading state information... Done
mysql is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 34 not upgraded.
$ mysql --version
mysql  Ver 14.14 Distrib 5.5.29, for debian-linux-gnu (x86_64) using readline 6.2 
```

`sudo apt-get update`我提前跑了。

有人设法通过 aptitude 安装 MySQL 5.6 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T10:53:24.737

我不知道如何通过 aptitude 执行此操作，但您可以尝试从源代码编译最新版本。

*   **安装 libaio**

> ```
> $ cd /opt
> $ wget http://www.morphisms.net/~wkj/download/libaio.tbz
> $ bunzip2 libaio.tbz
> $ tar xf libaio.tar 
> ```

*   **下载 MySQL 5.6.10**

> ```
> $ wget http://www.mysql.com/get/Downloads/MySQL-5.6/mysql-5.6.10.tar.gz/from/http://cdn.mysql.com/
> $ tar xzf mysql-5.6.10.tar.gz
> $ cd mysql-5.6.10 
> ```

*   **配置和编译 MySQL**

> ```
> $ PATH=$PATH:/opt/bison/bin   #bison binary should be in your path
> 
> $ cmake . -DWITH_ARCHIVE_STORAGE_ENGINE=1 -DWITH_FEDERATED_STORAGE_ENGINE=1 
> -DWITH_BLACKHOLE_STORAGE_ENGINE=1 -DMYSQL_DATADIR=/opt/mysql-5.6.10/data/ 
> -DCMAKE_INSTALL_PREFIX=/opt/mysql-5.6.10 -DCURSES_LIBRARY=/opt/ncurses/lib/libncurses.a 
> -DCURSES_INCLUDE_PATH=/opt/ncurses/include/ -DHAVE_LIBAIO_H=/opt/libaio/include/ 
>  -DINSTALL_LAYOUT=STANDALONE -DENABLED_PROFILING=ON 
> -DMYSQL_MAINTAINER_MODE=OFF -DWITH_DEBUG=OFF -DDEFAULT_CHARSET=utf8 
> -DENABLED_LOCAL_INFILE=TRUE -DWITH_ZLIB=bundled
> 
> $ make 
> ```

**设置正确的系统位置！**

*   **安装**

> 进行安装

它对我有用。通过：[http ://www.geeksww.com/tutorials/database_management_systems/mysql/installation/download_configure_compile_and_install_mysql_56.php](http://www.geeksww.com/tutorials/database_management_systems/mysql/installation/download_configure_compile_and_install_mysql_56.php)

# asp.net - 通过gridview渲染超链接按钮

> ID：14955454
> 
> 赞同：1
> 
> 时间：2013-02-19T10:42:34.567
> 
> 标签：asp.net, vb.net

我有`hyperlink button`一个`gridview`属性`navigateurl = ""`。

```
<asp:HyperLink ID="btntest" runat="server" CommandName="Print" 
     CommandArgument='<%# Eval("rentalid") %>'   NavigateUrl="" CssClass ="ImClass orangeButton" 
     Text="Display/Print Rental Agreement As PDF111" Target="_blank">
</asp:HyperLink> 
```

我有一个`gridview command`创建文件并提供此`hyperlink button` `navigateurl`属性值的文件，但问题是`hyperlink button`没有调用`gridview command`，因为它是空白的，当它同时获得时`navigateurl`如何渲染？`hyperlink button``navigateurl`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:17:48.757

我有一个类似的问题......我们想出了几种方法，但对我们来说最好的选择是在我们的网格视图中使用文字。我们将文字中的 html 设置为在新窗口中打开并传递我们需要的查询字符串。我们这样做了两次，一次在存储过程中选择了 HTML。另一个在行数据绑定上。听起来两者都可以在您的情况下工作。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:18:40.190

改用链接按钮并在链接按钮的命令事件中执行您想做的任何事情。您还可以像按钮一样设置链接按钮的样式。

# z3 - Z3 中的不同值

> ID：14955455
> 
> 赞同：1
> 
> 时间：2013-02-19T10:42:34.363
> 
> 标签：z3

我想问一个关于在 Z3 中分配不同值的问题。

假设我有 6 个变量 A、B、C、D、E、F。现在，我想为其中一些分配不同的值，其中一些将为零。有多少变量是不同的，有多少变量为零，事先是未知的。这取决于某些其他条件。

通常对于我要写的所有变量

`(assert (distinct A B C D E F))`

但是，是否可以编写诸如`A, B, D`为零而其他不同的约束？再次记住，这`A,B, D`只是示例变量。它们可以根据约束动态变化。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:23:24.053

据我了解，您有一组*V*变量*v [1]，...，v [n]*，其中每个变量*v [i]*要么为零，要么与所有其他变量*v [j]， j ≠ i*不同。

例如，让`V = {a, b, c, d}`.

```
(declare-const a Int)
(declare-const b Int)
(declare-const c Int)
(declare-const d Int) 
```

您可以将约束编码为

```
(assert (or (= a 0) (not (or (= a b) (= a c) (= a d)))))
(assert (or (= b 0) (not (or (= b a) (= b c) (= b d)))))
(assert (or (= c 0) (not (or (= c a) (= c b) (= c d)))))
(assert (or (= d 0) (not (or (= d a) (= d b) (= d c))))) 
```

添加两个约束并查询 Z3 的模型

```
(assert (= a 0))
(assert (not (= b 0)))

(check-sat)
(get-model) 
```

然后产生

```
sat
(model 
  (define-fun b () Int
    (- 2))
  (define-fun c () Int
    (- 1))
  (define-fun d () Int
    0)
  (define-fun a () Int
    0)
) 
```

由于生成“零或不同”约束是一项繁琐的任务，您可能希望使用诸如 PyZ3 或 Scala^Z3 之类的 Z3 前端。

# scikit-learn - 当使用 auc_score 作为评分函数时，GridSearchCV 是否使用 predict 或 predict_proba？

> ID：14955458
> 
> 赞同：20
> 
> 时间：2013-02-19T10:42:39.843
> 
> 标签：scikit-learn

当使用 auc_score 作为评分函数时，GridSearchCV 是否使用 predict 或 predict_proba？

predict 函数生成预测的类标签，这将始终导致三角 ROC 曲线。使用预测的类别概率获得更弯曲的 ROC 曲线。据我所知，后者更准确。如果是这样，“弯曲”ROC 曲线下的区域可能是衡量网格搜索中分类性能的最佳选择。

因此，当使用 ROC 曲线下的区域作为性能度量时，我很好奇类标签或类概率是否用于网格搜索。我试图在代码中找到答案，但无法弄清楚。这里有人知道答案吗？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-20T10:52:39.627

要`auc_score`用于网格搜索，您确实需要使用`predict_proba`或`decision_function`正如您指出的那样。**这在 0.13 版本中是不可能的。**如果你这样做`score_func=auc_score`，它将使用`predict`which 没有任何意义。

[edit]从 0.14 开始[/edit]*可以使用 auc_score 进行网格搜索*，方法是将新`scoring`参数设置为`roc_auc`: `GridSearch(est, param_grid, scoring='roc_auc')`。它会做正确的事情并使用`predict_proba`（或者`decision_function`如果`predict_proba`不可用）。查看[当前开发版本的最新页面](http://scikit-learn.sourceforge.net/dev/whats_new.html)。

您需要从 github 安装当前的 master 才能获得此功能，或者等到 0.14 的 4 月（？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-19T16:10:15.153

在使用 Sklearn SVC（`predict_proba`可用）进行一些实验后，将一些结果与`predict_proba`和进行比较`decision_function`，似乎`roc_auc`用于`GridSearchCV`计算`decision_function`AUC 分数。我在这里找到了一个类似的讨论：[Reproduce Sklearn SVC within GridSearchCV's roc_auc scores manual](https://stackoverflow.com/q/66499364)

# c# - Couchbase CRUD API

> ID：14955459
> 
> 赞同：0
> 
> 时间：2013-02-19T10:42:42.777
> 
> 标签：c#, .net, transactions, couchbase

我们正在扩展 .NET couchbase 客户端以添加一些额外的功能（类似于事务，或者更确切地说是回滚），我关注的一件事是支持记录锁定。

我知道 check-and-set 会在没有 CAS 值的情况下阻止更新，但我想要做的是通过使用 couchbase 的 getlock 功能来防止脏读（这在 Python 客户端上可用，因此大概服务器，但不是 .NET 客户端）

我的第一个想法是它可能由 REST API 提供，但在做了一些研究之后，它看起来好像 API 只能用于查询视图。我知道 memcached 有一个 telnet 接口，但希望它在那里可用可能太过分了。如果它像在服务器端拨打电话一样简单，我猜它已经在客户端......

可以使用[租出](http://www.couchbase.com/docs/couchbase-devguide-2.0/reserving-documents.html)模型，但如果功能实在是遥不可及，则宁愿不走这条路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:06:59.300

Getl 支持目前尚未在 .NET 客户端中实现 (2/20/13)，但计划很快添加 ( [http://www.couchbase.com/issues/browse/NCBC-231](http://www.couchbase.com/issues/browse/NCBC-231) )。还要注意的一件事是 getl 不会阻止其他连接读取，而只会阻止其他连接写入锁定的密钥。

另外，我不太明白您为什么要尝试防止脏读，因为 Couchbase 不允许您从副本服务器读取。换句话说，每次读取都将始终返回 Couchbase 中的最新值。

*注意 Couchbase 确实有一个副本读取 api，但是通过调用它，您明确表示您可以得到一个旧项目。

# javascript - 多次调用 Raphael 悬停功能仅“有时”有效

> ID：14955462
> 
> 赞同：4
> 
> 时间：2013-02-19T10:42:52.113
> 
> 标签：javascript, events, svg, raphael

我有一个调用的函数`drawPoint`，它使用 for 循环多次调用。迭代次数根据用户正在查看的幻灯片而变化。平均而言，循环迭代 8 到 10 次。有时悬停事件会*坚持*所有的迭代，有时则不会。大多数时候它会错过 3 到 4 分。没有真正的模式。但是，如果一个元素一旦接收到一个事件失败，它总是会失败，即使在浏览器刷新之后也是如此。

**谁能想到一些 svg 元素会收到事件而其他元素不会收到事件的原因？起初我以为有处理程序上限，但工作事件的数量会波动。**这是在 for 循环中反复调用的函数：

绘图点

```
drawPoint:function (imgPoint, radius, index, arrowHead) {

    var div = document.createElement("div");
    //div.className = "point";
    //div.id = "p" + index;

    if(arrowHead == false){
        div.style.width = radius*2 +"px";
        div.style.height = radius*2 +"px";

    }else{ //TODO implement actual arrowhead instead of smaller dot
        div.style.width = radius/2 +"px";
        div.style.height = radius/2 + "px";

    }

    div.style.zIndex = 10000 + index + "";

    var paper = Raphael(div);
    var point;

    //console.log("leader x: " + leader.xLength + "\nleader y: " + leader.yLength + "\nmagnitude: " + leader.magnitude);
    if (arrowHead == false) {
        point = paper.circle(radius, radius, radius);
    }
    else if (arrowHead == true){
        point = paper.circle(radius/2, radius/2, radius/2);
    }

    point.node.setAttribute("id", "p" + index );
        point.attr({
            "stroke":Overlay.annoColor,
            "fill":Overlay.annoColor
        });

    point.hover(function(){
            if ($("#allAnno").is(":checked"))
                Overlay.showLabel(parseInt(this.node.getAttribute('id').substring(1)))},
        function(){
            if ($("#allAnno").is(":checked"))
                Overlay.hideAllLabels();

        }
    );

    /*$(".point").hover(function(){
            if ($("#allAnno").is(":checked"))
                Overlay.showLabel(parseInt($(this).attr('id').substring(1)))},
        function(){
            if ($("#allAnno").is(":checked"))
                Overlay.hideAllLabels();
        });*/

    return div;
} 
```

**以及实例化的循环......**

```
 for (var v = 0; v < Overlay.currentOverlaySet.length; v++) {
                    ImageProvider.viewer.drawer.addOverlay(Overlay.drawPoint(Overlay.currentOverlaySet[v].SDPoint,
                        pointRadius, Overlay.currentOverlaySet[v].matchIndex, Overlay.currentOverlaySet[v].arrowHead),
                        Overlay.currentOverlaySet[v].SDPoint, Seadragon.OverlayPlacement.CENTER);
                } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:59:34.073

如果有人遇到这个问题，解决方案是修改 Raphael 论文的大小，而不是修改传递给 Raphael 对象的 div。出于某种原因，div 相互覆盖，阻止了某些元素的悬停事件。您还可以通过更改多个对象的 z-index 来解决此问题，但它不是那么可靠……取决于您的应用程序。

# sas - 拆分 SAS 数据集

> ID：14955465
> 
> 赞同：0
> 
> 时间：2013-02-19T10:42:59.330
> 
> 标签：sas

我有一个看起来像这样的 SAS 数据集：

```
id | dept | ...
1    A
2    A
3    A
4    A
5    A
6    A
7    A
8    A
9    B
10   B
11   B
12   B
13   B 
```

每个观察代表一个人。

我想将数据集拆分为“团队”数据集，每个数据集最多可以有 3 个观察值。

对于上面的示例，这意味着为部门 A 创建 3 个数据集（其中 2 个数据集将包含 3 个观察值，第三个数据集将包含 2 个观察值）。B 部门的 2 个数据集（1 个包含 3 个观测值，另一个包含 2 个观测值）。

像这样：

第一个数据集（deptA1）：

```
id | dept | ...
1    A
2    A
3    A 
```

第二个数据集（deptA2）

```
id | dept | ...
4    A
5    A
6    A 
```

第三个数据集（deptA3）

```
id | dept | ...
7    A
8    A 
```

第四个数据集（deptB1）

```
id | dept | ...
9    B
10   B
11   B 
```

第五个数据集（deptB2）

```
id | dept | ...
12   B
13   B 
```

我使用的完整数据集包含数千个超过 50 个部门的观察结果。我可以计算出每个部门需要多少数据集，我认为宏是最好的方法，因为所需的数据集数量是动态的。但我无法弄清楚创建数据集的逻辑，以便它们最多有 3 个观察值。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:29:19.927

你可以试试这个：

```
%macro split(inds=,maxobs=);

  proc sql noprint;
    select distinct dept into :dept1-:dept9999
    from &inds.
    order by dept;
    select ceil(count(*)/&maxobs.) into :numds1-:numds9999
    from &inds.
    group by dept
    order by dept;
  quit;
  %let numdept=&sqlobs;

  data %do i=1 %to &numdept.;
         %do j=1 %to &&numds&i;
           dept&&dept&i&&j.
         %end;
       %end;;
    set &inds.;
    by dept;
    if first.dept then counter=0;
    counter+1;
    %do i=1 %to &numdept.;
      %if &i.=1 %then %do;
        if
      %end;
      %else %do;
        else if
      %end;
                dept="&&dept&i" then do;
      %do k=1 %to &&numds&i.;
        %if &k.=1 %then %do;
          if
        %end;
        %else %do;
          else if
        %end;
                 counter<=&maxobs.*&k. then output dept&&dept&i&&k.;
      %end;
      end;
    %end;
  run;
%mend split;

%split(inds=YOUR_DATASET,maxobs=3); 
```

只需将 %SPLIT 宏调用中的 INDS 参数值替换为输入数据集的名称即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:41:19.620

另一个版本。与 DavB 版本相比，它只处理一次输入数据，并在单个数据步中将其拆分为多个表。此外，如果需要更复杂的拆分规则，可以在 datastep 视图 WORK.SOURCE_PREP 中实现。

```
data WORK.SOURCE;
infile cards;
length ID 8 dept $1;
input ID dept;
cards;
1    A
2    A
3    A
4    A
5    A
6    A
7    A
8    A
9    B
10   B
11   B
12   B
13   B
14   C
15   C
16   C
17   C
18   C
19   C
20   C
;
run;

proc sort data=WORK.SOURCE;
by dept ID;
run;

data  WORK.SOURCE_PREP / view=WORK.SOURCE_PREP;
set WORK.SOURCE;
by dept;
length table_name $32;

if first.dept then do;
    count = 1;
    table = 1;
end;
else count + 1;

if count > 3 then do;
    count = 1;
    table + 1;
end;
/* variable TABLE_NAME to hold table name */
TABLE_NAME = catt('WORK.', dept, put(table, 3\. -L));
run;

/* prepare list of tables */
proc sql noprint;
create table table_list as
select distinct TABLE_NAME from WORK.SOURCE_PREP where not missing(table_name)
;
%let table_cnt=&sqlobs;
select table_name into :table_list separated by ' ' from table_list;
select table_name into :tab1 - :tab&table_cnt from table_list;
quit;

%put &table_list;

%macro loop_when(cnt, var);
    %do i=1 %to &cnt;
        when ("&&&var.&i") output &&&var.&i;
    %end;
%mend;

data &table_list;
set WORK.SOURCE_PREP;
    select (TABLE_NAME);
        /* generate OUTPUT statements */
        %loop_when(&table_cnt, tab)
    end;
run; 
```

# linux - 需要帮助将 python2.7 设置为默认值 & Django 安装

> ID：14955468
> 
> 赞同：0
> 
> 时间：2013-02-19T10:43:04.523
> 
> 标签：linux, django, python-2.7, centos

我无法安装 Django。我使用的是 CentOS 5，无法设置 python2.7 环境变量。以前在我的系统中 python2.4.3 可用，但是在终端中安装 python 2.7 后，我检查了系统使用的版本“python -V”cmd它作为python 2.4.3执行。但如果我使用“python2.7 -V”cmd检查它显示python2.7。请帮我解决这个.....

1.我需要将python2.7设置为默认版本。

2.帮我安装Django。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:05:30.670

你的 CentOS 依赖于 python 2.4，所以那是行不通的。您可能应该创建一个新的系统用户并在其主目录中安装 pyton 2.7（或使用您的 root 用户并在 /opt 中安装 python 以供全局使用），您可以在 Google 上找到大量教程。

成功后，您可以在用户的​​ bash 配置文件中设置别名来定义要使用的 python 版本。为每个项目和/或用户创建一个 virtualenv 也是一种常见的做法。

# git - 在 GIT 合并中需要帮助

> ID：14955476
> 
> 赞同：-4
> 
> 时间：2013-02-19T10:43:33.017
> 
> 标签：git, github

假设我有一个包含以下内容的文件

> **此行我不想删除**

假设有人克隆了此文件并对其进行了一些更改。更改后文件的内容是

> **我删除了你想要的那行**
> 
> **我添加了另一个换行符**

现在我想要具有以下内容的文件

> **此行我不想删除**
> 
> **我删除了你想要的那行**
> 
> **我添加了另一个换行符**

可以用 GIT 做到这一点吗？如果是，请指导我这样做......

编辑：我尝试过 git merge。在进行合并时，我们可以保留旧版本或新版本，但如何合并两个内容。（我希望两个文件中的所有内容都可用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:02:14.003

您必须手动执行此类操作。您不希望其他用户所做的全部更改（他删除了您的行并插入了另外两行），那么 git 应该如何知道该怎么做？那是不可能的。不仅可以使用 git，还可以使用任何工具。

# kendo-ui - 在剑道自动完成中获取对元素的引用

> ID：14955478
> 
> 赞同：0
> 
> 时间：2013-02-19T10:43:44.960
> 
> 标签：kendo-ui

我在剑道自动完成的 onselect 事件上调用一个函数。我想参考应用剑道自动完成属性的元素。我有 4 个具有相同数据源的自动完成功能。当搜索正在进行时，我想在此元素上显示加载图像。我如何获得对这些元素的引用？我怎么知道，从哪个自动完成元素 onSelect 被调用？请帮我

```
$("#pmt_apply_order1").kendoAutoComplete({ 

      select: onSelect,

});
$("#pmt_apply_order2").kendoAutoComplete({ 

      select: onSelect,

});

 function onSelect(e) { 

   // I want reference to  $("#pmt_apply_order1") when selects from $("#pmt_apply_order1")           

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:01:14.030

您可以在 onSelect 事件中使用**this.element**获取父元素的引用。要查看获取父自动完成元素的 id，您需要使用**this.element.attr("id")**。你可以在这里看到一个完整的演示：http: [//jsfiddle.net/FVQkG/](http://jsfiddle.net/FVQkG/)

```
 function onSelect(e) {

               alert("id of parent auto complete: " + this.element.attr("id"));
                        var dataItem = this.dataItem(e.item.index());

                } 
```

# less - LESS @import & Web Essentials 2012

> ID：14955481
> 
> 赞同：5
> 
> 时间：2013-02-19T10:44:03.723
> 
> 标签：less, web-essentials

在我的 Web 项目中，出于维护原因，我将 CSS 拆分为单独的 LESS 文件。我有一个名为 config.less 的文件作为主文件，它使用 @import 指令导入其他更少的文件。

这个设置的问题似乎是我在编辑我的LESS文件时得到了很多“未声明的变量”和“未声明的混合”，例如在base.less中添加一个名为@textColor的属性变量时，它在另一个less中声明名为 variables.less 的文件。有什么方法可以让 Web Essentials 了解外部 less 文件中定义的变量和 mixin？

另一件似乎让 Web Essentials 绊倒的事情是当我使用 LESS 的嵌套媒体查询功能时：

```
.some-selector {
    background: #000;
    @media only screen and (max-width: 800px) {
        background: #fff;
    }
} 
```

嵌套的@media 声明带有红色下划线，悬停时显示“样式规则中出现意外的'@'块”。悬停嵌套的背景属性会显示“验证：‘颜色’不是有效的 HTML 标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:17:31.710

我无法就`@media`Web Essentials 的问题给出答案，但我可以就变量和 mixins 问题给出建议。

基本上，将您的`config.less`文件更改为`variables.less`和任何其他混合文件为`@import-once`，然后还添加`@import-once 'variables.less`到每个使用其中变量的文件中（对使用的任何混合文件执行相同操作）。

如果您正在处理该文件（例如您的`base.less`），它的作用是导入该文件，但是当所有文件都由 编译时`config.less`，它只会导入`variables.less`一次，而不是为每个还引用`variables.less`.

# database - 识别数据文件

> ID：14955484
> 
> 赞同：1
> 
> 时间：2013-02-19T10:44:11.573
> 
> 标签：database, file

我的工作是进行数据转换。所以我试图找到一个 odbc 驱动程序来帮助转换。问题是：我无法弄清楚文件是在哪个数据库中创建的。所以我不知道要查找什么 odbc 驱动程序。

这是我所拥有的：数据存储在 .k 和 .d 文件中。我相信这些文件是在 linux 中创建的。当我在 notepad++ 中打开它们时，我可以在这里和那里看到一些数据，但其中穿插了特殊字符。在我的电脑上，它们显示为日文汉字字符。

任何人都可以对此有所了解吗？或者有人可能对如何转换这些文件有建议吗？

任何帮助将非常感激

# sql-server-2008 - Service Broker 应用程序不会在队列之间发送消息

> ID：14955485
> 
> 赞同：1
> 
> 时间：2013-02-19T10:44:17.220
> 
> 标签：sql-server-2008, message-queue, service-broker

我制作了这个 Service Broker 应用程序：http: [//pastebin.com/M1jZg2Pt](http://pastebin.com/M1jZg2Pt)

我想运行存储过程 spInsertLogLine 并在表 log_line 中结束记录。

我愿意

```
exec [broker].dbo.spSendLogLine
  @device_id = 'devid1',
  @application_name = 'appname1',
  @application_user_name = 'usrnme',
  @log_line_dt = 1, --@log_line_dt = GETDATE(), fails
  @log_line_message = 'this is the log line' 
```

我最终在队列 qReceiveLogLine 中收到一条状态为 3 的消息，而队列 qInsertLogLine 或表 log_line 中没有任何内容。

我对 Service Broker 很陌生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:16:04.050

`spSendLogLine` 变化中：

```
BEGIN DIALOG CONVERSATION @Handle
FROM SERVICE [sReceiveLogLine] 
TO SERVICE '[sInsertLogLine]'    
ON CONTRACT [cInsertLogLine]     
WITH ENCRYPTION = off; 
```

到：

```
BEGIN DIALOG CONVERSATION @Handle
FROM SERVICE [sReceiveLogLine] 
TO SERVICE 'sInsertLogLine'    
ON CONTRACT [cInsertLogLine]     
WITH ENCRYPTION = off; 
```

# dynamics-crm-2011 - Microsoft CRM 2011 模拟

> ID：14955486
> 
> 赞同：-1
> 
> 时间：2013-02-19T10:44:21.270
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

我想知道在 CRM 2011 中，我是否使用用户 (A) 启动了组织服务，然后我模拟了用户 (B)。

当我尝试执行请求（即创建帐户，...）时，CRM 将使用哪些用户权限？

**例如：**

我有

*   无权代表其他用户行事的用户 (A)。
*   具有系统管理员权限并代表其他用户权限的用户 (B)。

我创建了基于 Windows 身份验证的组织服务，并使用用户 (A) 登录，如下所示：

```
Uri organizationUri = new Uri("http://localhost:5555/RMS/XRMServices/2011/Organization.svc");
Uri homeRealmUri = null;
ClientCredentials credentials = new ClientCredentials();       
credentials.Windows.ClientCredential = System.Net.CredentialCache.DefaultNetworkCredentials;
OrganizationServiceProxy orgProxy = new OrganizationServiceProxy(organizationUri, homeRealmUri, credentials, null); 
```

然后我就这样冒充

```
orgProxy.CallerId = userBGuid; 
```

当我尝试执行 WhoAmIRequest 时；我收到以下错误：

**System.ServiceModel.FaultException`1[Microsoft.Xrm.Sdk.OrganizationServiceFault]：用户无权代表其他用户行事。（故障详细信息等于 Microsoft.Xrm.Sdk.OrganizationServiceFault）。**

当我授予用户 (A) 代表另一个用户执行操作的权限时，此代码成功通过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:09:17.630

它看起来是预期的行为。如果您设置`CallerId = userBGuid`它意味着即使您以 userA 身份登录，所有活动都代表 userB 完成。UserA 应该有这样做的特权。

# python - 符号链接如何影响 Python 查找模块的方式？

> ID：14955487
> 
> 赞同：0
> 
> 时间：2013-02-19T10:44:27.377
> 
> 标签：python

环境变量`PYTHONPATH`设置为`$HOME/lib/python`.

中的文件树`$PYTHONPATH`看起来像这样

```
foo/
    __init__.py
    bar.py 
```

两个文件都是空的。

现在我创建一个简单的脚本，其中包含

```
#!/usr/bin/env python

print __file__
import bar 
```

并将其另存为`baz.py`. 如果我在其中以外的任何地方运行脚本，`$PYTHONPATH/foo`则无法找到 module `bar`。

但是，如果我将文件移动到该文件`$PYTHONPATH/foo`并创建指向该文件的符号链接，则可以从任何地方运行它。例如：

```
$ cd /tmp
$ ln -s $PYTHONPATH/foo/baz.py baz
$ ./baz
./baz
$ 
```

然而`__file__`设置为`./baz`. 那么Python是如何找到模块栏的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:54:19.760

如果`foo`在 PYTHONPATH 中，那么`from foo import bar`应该可以在任何地方工作。

符号链接被解析为它指向的路径。然后 Python 获取真实文件并开始导入逻辑。

# c# - C#中的数组类实现

> ID：14955488
> 
> 赞同：12
> 
> 时间：2013-02-19T10:44:35.113
> 
> 标签：c#, arrays

转到实现细节，我看到`Array`类的实现为

```
public abstract class Array : ICloneable, IList, ICollection, IEnumerable, IStructuralComparable, IStructuralEquatable 
```

IList 接口的实现读作

```
public interface IList : ICollection, IEnumerable 
```

我的问题是，该类不是`Array`自动实现的吗？它实现`ICollection`的`IEnumerable`那一刻`IList`？为什么要明确实施这些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:52:36.967

数组的实现是：

```
Array : ICloneable, IList, IStructuralComparable, IStructuralEquatable 
```

[在此处](http://referencesource.microsoft.com/#mscorlib/system/array.cs,156e066ecc4ccedf)查看此来源

也许你看了一下 MSDN，它只是让文档更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:54:43.170

```
interface I
{
    void M();
}

class A : I
{
    void I.M()
    {

    }
}

class B : A
{
    void I.M() // Compilation error
    {

    }
} 
```

您可以自由编写`I i = new B()`，但不能`M`在`B`. 为此，您需要明确`B`实施`I`：

```
class B : A, I
{
    void I.M() // Is ok now.
    {

    }
} 
```

# java - 将字典转换为 sqlite 数据库

> ID：14955495
> 
> 赞同：0
> 
> 时间：2013-02-19T10:44:46.860
> 
> 标签：java, android, regex, sqlite

我有这种格式的字典

```
Traditional Simplified [pin1 yin1] /English equivalent 1/equivalent 2/
^1          ^2         ^3          ^4                  ^5 
```

例如

```
制 制 [A A zhi4] /to split the bill/to go Dutch/
^1 ^2 ^3        ^4                 ^5

T字帳 T字帐 [T zi4 zhang4] /T-account (accounting)/xyz abc
^1    ^2   ^3             ^4                     ^5 
```

我想在 sqlite 数据库 TABLE WITH **5 Column**中转换它。尝试使用**Regex**获得解决方案没有成功。

**编辑 ：**

我想要像这样的输出

```
制 制 [A A zhi4] /to split the bill/to go Dutch/

制 
制 
[A A zhi4] 
/to split the bill
/to go Dutch/ 
```

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:05:45.743

一种可能的正则表达式（每行使用）可能是

```
(\S+)\s+(\S+)\s+\[([^\[\]]*)\]\s*/([^/]*)/([^/]*) 
```

在 Java 中：

```
Pattern regex = Pattern.compile(
    "(\\S+)       # one or more non-whitespace characters -> group 1\n" +
    "\\s+         # one or more whitespace characters\n" +
    "(\\S+)       # one or more non-whitespace characters -> group 2\n" +
    "\\s+         # one or more whitespace characters\n" +
    "\\[          # [\n" +
    "([^\\[\\]]*) # anything except [] -> group 3\n" +
    "\\]          # ]\n" +
    "\\s*/        # optional whitespace, then /\n" +
    "([^/]*)      # anything except / -> group 4\n" +
    "/            # /\n" +
    "([^/]*)      # anything except / -> group 5", 
    Pattern.COMMENTS); 
```

匹配后，五个组将在`Matcher`对象的`.group(n)`(for `1 <= n <= 5`) 中。

# android - NDK：编译带有 .mm 扩展名的 c++ 文件

> ID：14955497
> 
> 赞同：2
> 
> 时间：2013-02-19T10:44:51.213
> 
> 标签：android, c++, ios, android-ndk, g++

我在 XCode 项目中有一些 C++ 源文件（扩展名为 .mm）。我试图只编译那些纯 C++（不使用 objc 语法或可可运行时）并在 Android NDK 构建（NDK r8d）中编译它们。问题似乎是 g++ 甚至不会将 .mm 文件视为 C++ 并且会失败：

```
arm-linux-androideabi-g++: error: Objective-C++ compiler not installed on this system 
```

我试过：
1\. LOCAL_CPP_EXTENSION := .mm （在 Android.mk 中） - 没有帮助。
2\. 搜索有关如何接受自定义文件扩展名的 g++ 文档 - 找不到任何内容。

我真的很想找到一种方法来强制 NDK/g++ 接受 .mm 文件，但对其他想法持开放态度，例如：

1.  将 Android 项目的 .mm 复制并重命名为 .cpp - 我不喜欢这样，因为它会使构建和版本控制复杂化，但它似乎是最基本的可行方法。

2.  将其构建为静态库（使用 xcode） - 我尝试去那里，但我不确定要构建哪种架构，或者它是否有意义。
3.  其他的？

有没有人对此有一些经验或想法？谢谢。

**解决方案（见接受的答案）**
LOCAL_CFLAGS += -x c++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:54:53.433

将[“-x c++”选项](http://gcc.gnu.org/onlinedocs/gcc/Overall-Options.html#Overall-Options)添加到 .mk 文件中的 $CFLAGS 变量。这应该会强制 GCC 使用 C++ 编译器。

编辑：抱歉错字，“-x”选项，不是“-c”和“c++”，不是“cpp”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:57:29.373

尽管接受了答案，但我仍然认为将文件重命名为 .CPP 是正确的做法。使扩展名与内容匹配有什么争议？Xcode 可以很好地编译 C++ 文件，并且作为奖励，它可以保护您免受 iOS 端的 Objective C++ 意外污染它。

# arrays - 如何使用图片框数组中的 for 循环显示图像的一部分

> ID：14955498
> 
> 赞同：0
> 
> 时间：2013-02-19T10:44:54.373
> 
> 标签：arrays, graphics, vb.net-2010, picturebox

可能有一个简单的答案，但我已经尝试了很多东西，除非我只是手动显示图像，否则似乎没有任何效果，但我想要的是将此子用于其他图片以及我将在稍后修复它显示这些图像。我的代码如下

```
Private Sub updateStandardToolbar()
    'Draws the sprites to the pictureboxes
    Dim bit As New Bitmap(gridSize, gridSize)
    Dim dest_rect As Rectangle = New Rectangle(0, 0, gridSize, gridSize)
    Dim i As Integer = 0

    ' Associate a Graphics object with the Bitmap
    Dim gr As Graphics = Graphics.FromImage(bit)

    For y As Integer = 0 To standardNum.Y
        For x As Integer = 0 To standardNum.X
            Call getSrcRect(x, y)

            'Copy that part of the image.
            gr.DrawImage(bmpStandardTile, dest_rect, src_rect, GraphicsUnit.Pixel)

            'Display the result.
            pb(i).Image = bit

            i += 1
        Next
    Next
End Sub 
```

这段代码的问题是所有图片框（pb（））都显示相同的图片，这是我图像上的最后一张。StandardNum.x 和 standardNum.y 是分别持有 3 和 1 的变量。bmpStandardTile 是我要从中复制的图像，希望 dest_rect 和 src_rect 是不言自明的 =)。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:22:23.100

哦。在查看图片框显示相同图像的原因后，我刚刚找到了自己问题的答案。这是我的代码，如果其他人有类似或相同的问题，我如何修复它。

```
Private Sub updateStandardToolbar()
    'Draws the sprites to the pictureboxes
    Dim bit As Bitmap
    Dim dest_rect As Rectangle = New Rectangle(0, 0, gridSize, gridSize)
    Dim i As Integer = 0

    ' Associate a Graphics object with the Bitmap
    'Dim gr As Graphics

    'For u As Integer = 0 To maxPics
    '    bit = New Bitmap(gridSize, gridSize)
    'Next

    For y As Integer = 0 To standardNum.Y
        For x As Integer = 0 To standardNum.X
            bit = New Bitmap(gridSize, gridSize)
            Dim gr As Graphics = Graphics.FromImage(bit)
            Call getSrcRect(x, y)

            'Copy that part of the image.
            gr.DrawImage(bmpStandardTile, dest_rect, src_rect, GraphicsUnit.Pixel)

            'Display the result.
            pb(i).Image = bit

            i += 1
        Next
    Next
End Sub 
```

答案其实很简单。傻我。我忘了清除位图图像，所以它不会改变最后一个图片框使用的图像。

```
bit = New Bitmap(gridSize, gridSize) 
```

无论如何从我的错误中吸取教训=）

# eclipse - Eclipse：提交存储库时应对不同的编码风格？

> ID：14955501
> 
> 赞同：1
> 
> 时间：2013-02-19T10:45:00.030
> 
> 标签：eclipse, svn, coding-style

我在一个开发人员团队中，他们都有自己独特的代码样式方式。

对我来说，我喜欢在使用控件或循环时为大括号添加新行。其他开发人员喜欢在同一行有一个大括号。

我想知道的是使用 Eclipse，您可以在查看代码时将代码格式化为您的样式。但是，是否有可能通过 Subversion 或使用一些 Eclipse 插件将代码样式改回我们都同意的格式，应该在存储库中。

这意味着存在一致性。

这可能吗？

这是一个图表，向您展示我的意思：

![在此处输入图像描述](../Images/42e3af1e2edf3f15ed4b863f305334e7.png)

谢谢

# security - GlassFish v3.1 防止多个用户使用相同的凭据登录

> ID：14955502
> 
> 赞同：0
> 
> 时间：2013-02-19T10:45:00.390
> 
> 标签：security, authentication, glassfish, credentials

我正在开发一个使用 GlassFish 安全领域进行身份验证的 JSF 应用程序。一切正常，但我面临一个问题。多个用户一次可以使用相同的凭据登录。

那么：如果已经登录了具有相同凭据的用户，我该如何防止登录？（假设我有 3 个用户共享相同的凭据，但我希望一次只有一个用户能够登录）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:57:24.840

我想这取决于身份验证的实现，但一般来说，您必须在某处（例如在用户数据库中）保留一个“登录”标志，并在每次登录尝试时设置/检查该标志。此外，如果用户注销，您必须将标志设置回 false。

# linux - 从硬件本身查找原始 MAC 地址

> ID：14955504
> 
> 赞同：33
> 
> 时间：2013-02-19T10:45:08.990
> 
> 标签：linux, sockets, linux-kernel, linux-device-driver, mac-address

操作系统：REDHAT LINUX Linux 管理：2.6.18.8-1 #

**这可以直接从网卡读取MAC地址吗？我有下面的代码，但它只是从上层读取而不是卡本身！**

我试图弄清楚如何在我的 linux 机器上找到以太网 NIC 的原始 MAC 地址。我了解如何使用 ifconfig 找到当前的 MAC 地址，但是如果地址已更改，例如 使用 .this 文件`'ifconfig eth0 hw ether uu:vv:ww:yy:xx:zz'`，或者我使用 .this 文件设置“永久”它......`vi /etc/sysconfig/network-scripts/ifcfg-eth0`我也可以成功。如何找到原件？一定有办法找到它，因为它仍然被永久烧录到卡中，但我找不到读取烧录地址的工具。是否有任何实用程序或命令？我想为它编写C代码。但不知道在上述情况下如何做到这一点。`UP``REBOOT`

** 下面的代码给出了我*当前的*MAC 但不是原始 MAC

```
#include <stdio.h>              /* Standard I/O */
#include <stdlib.h>             /* Standard Library */
#include <errno.h>              /* Error number and related */

#define ENUMS
#include <sys/socket.h>
#include <net/route.h>
#include <net/if.h>
#include <features.h>           /* for the glibc version number */
#if __GLIBC__ >= 2 && __GLIBC_MINOR >= 1
#include <netpacket/packet.h>
#include <net/ethernet.h>       /* the L2 protocols */
#else
#include <asm/types.h>
#include <linux/if_packet.h>
#include <linux/if_ether.h>     /* The L2 protocols */
#endif
#include <netinet/in.h>
#include <arpa/inet.h>
#include <sys/un.h>
#include <sys/ioctl.h>
#include <netdb.h>

int main( int argc, char * argv[] ){

unsigned char  mac[IFHWADDRLEN];
int i;
    get_local_hwaddr( argv[1], mac );
    for( i = 0; i < IFHWADDRLEN; i++ ){
        printf( "%02X:", (unsigned int)(mac[i]) );
    }

}

int get_local_hwaddr(const char *ifname, unsigned char *mac)
{
    struct ifreq ifr;
    int fd;
    int rv;                     // return value - error value from df or ioctl call

    /* determine the local MAC address */
    strcpy(ifr.ifr_name, ifname);
    fd = socket(AF_INET, SOCK_DGRAM, IPPROTO_IP);
    if (fd < 0)
        rv = fd;
    else {
        rv = ioctl(fd, SIOCGIFHWADDR, &ifr);
        if (rv >= 0)            /* worked okay */
            memcpy(mac, ifr.ifr_hwaddr.sa_data, IFHWADDRLEN);
    }

    return rv;
} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-12-19T16:26:19.717

当然，在 ethtool 3.1 中，您可以只打印地址： ethtool -P|--show-permaddr DEVNAME 显示永久硬件地址

例如

```
ethtool -P eth0 
```

永久地址：94:de:80:6a:21:25

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-06-02T15:05:40.087

Try `cat /sys/class/net/eth0/address` or `cat /sys/class/net/em1/address` if using Fedora. It should work.

The original answer is here: [Notes of a Systems Admin](http://www.notesofasysadmin.com/linux/find-mac-addresses-via-proc/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-19T11:21:46.643

找到原始 MAC 地址的唯一方法是使用与网卡驱动程序相同的方法 - 不幸的是，我不相信有一种通用的方法可以告诉驱动程序提供“硬件提供的”它的 MAC 地址。当然，在某些情况下，该特定接口没有硬件网卡——例如用于虚拟化的虚拟网络驱动程序以及使用网桥和软件交换机时。

当然，硬件可能是这样的，当它被软件覆盖时，您实际上无法读取“原始” MAC 地址，因为 MAC 地址本身只有一组寄存器。

我快速浏览了 pcnet32.c 驱动程序（因为它是网卡的模型之一，我大致了解它的工作原理以及不同的寄存器在哪里等，所以我可以看到它的作用）。据我所知，它不支持实际询问“你的 PROM 以太网地址是什么”的方法——MAC 地址在模块初始化的“probe1”部分被读出并存储起来。不再对这些硬件寄存器进行访问。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-19T11:20:52.120

好吧，旧的以太网地址保留在卡 eeprom 的第一个字节中（至少对于某些类型的卡），因此可以使用`ethtool`

```
bash$ sudo ethtool -e eth1
Offset      Values
------      ------
0x0000      tt uu ww xx yy zz 79 03 
0x.... 
```

其中 tt:uu:ww:xx:yy:zz 是旧的 MAC 地址

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-03-26T05:45:30.217

这可能不是程序化的方式，但为什么不是 search `dmesg`。我所有机器的网卡在检测时都会吐出 MAC 地址。

尝试这样的事情：

```
dmesg|grep eth0 
```

不同的 NIC 以不同的方式显示 MAC 地址，但日志将始终包含适配器的内核给定名称（在大多数情况下`eth0`或`wlan0`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-13T22:27:31.777

在 Ubuntu 18.4 LTS
中首先需要通过命令找到电脑上的网络接口名称

```
ls /sys/class/net 
```

我的输出是

```
docker0  enp0s31f6  lo 
```

现在你可以使用上面讨论的命令了，别忘了 sudo

```
sudo ethtool -P enp0s31f6 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-03-04T12:11:39.967

此命令列出所有以太网设备和原始硬件地址。

```
dmesg | grep eth | grep IRQ | awk {'print "permanent address of " $5 " " $9'} |tr "," " " 
```

# bash - Bash - 使用文本文件中的行运行命令

> ID：14955508
> 
> 赞同：2
> 
> 时间：2013-02-19T10:45:23.707
> 
> 标签：bash, variables, loops

我对 bash 脚本有点陌生，并且无法找到我要问的答案，也就是说，如果可能的话。

我有一个文本文件，它是通过使用 grep 在目录中搜索包含“名称”的文件并输出以下内容而创建的，例如该文件名为 PathOutput.txt

> /mnt/volnfs3rvdata/4007dc45-477a-45b2-9c28-43bc5bbb4f9f/master/vms/4c3483af-b41a-4979-98b7-6f6a4f147670/4c3483af-b41a-4979-98b7-6f6a4f147670.ov
> 
> /mnt/volnfs3rvdata/4007dc45-477a-45b2-9c28-43bc5bbb4f9f/master/vms/5b5538a5-423f-4eaf-9678-d377a6706c58/5b5538a5-423f-4eaf-9678-d377a6706c58.ovf
> 
> /mnt/volnfs3rvdata/4007dc45-477a-45b2-9c28-43bc5bbb4f9f/master/vms/0e2d1451-45cc-456e-846d-d174515a60dd/0e2d1451-45cc-456e-846d-d174515a60dd.ovf
> 
> /mnt/volnfs3rvdata/4007dc45-477a-45b2-9c28-43bc5bbb4f9f/master/vms/daaf622e-e035-4c1b-a6d7-8ee209c4ded6/daaf622e-e035-4c1b-a6d7-8ee209c4ded6.ovf
> 
> /mnt/volnfs3rvdata/4007dc45-477a-45b2-9c28-43bc5bbb4f9f/master/vms/48f52ab9-64df-4b1e-9c35-c024ae2a64c4/48f52ab9-64df-4b1e-9c35-c024ae2a64c4.ovf

现在，如果可能的话，我想做的是使用命令循环文件，使用变量来引入文本文件中的每一行。但是我无法找到一种方法来对每一行再次运行命令。在我所有的游戏中，我确实得到了一个结果，它会在第一行运行一次，但这是当 grep 的输出通过管道传输到另一个命令时。

目前在 bash 脚本中，我只是提取到 PathOutput.txt 的路径，cat 以显示路径，然后将我想要的路径复制到 read -p 命令以创建一个针对命令运行的变量。它现在工作正常，只需每次为每个路径运行脚本。如果我可以让命令循环遍历每一行，我可以将结果输出到 txt 文件。

是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:32:40.437

你可以使用`xargs`：

```
$ xargs -n1 echo "arg:" < file
arg: /mnt/volnfs3rvdata/4007dc45-477a-45b2-9c28-43bc5bbb4f9f/master/vms/4c3483af-b41a-4979-98b7-6f6a4f147670/4c3483af-b41a-4979-98b7-6f6a4f147670.ovf
arg: /mnt/volnfs3rvdata/4007dc45-477a-45b2-9c28-43bc5bbb4f9f/master/vms/5b5538a5-423f-4eaf-9678-d377a6706c58/5b5538a5-423f-4eaf-9678-d377a6706c58.ovf
arg: /mnt/volnfs3rvdata/4007dc45-477a-45b2-9c28-43bc5bbb4f9f/master/vms/0e2d1451-45cc-456e-846d-d174515a60dd/0e2d1451-45cc-456e-846d-d174515a60dd.ovf
arg: /mnt/volnfs3rvdata/4007dc45-477a-45b2-9c28-43bc5bbb4f9f/master/vms/daaf622e-e035-4c1b-a6d7-8ee209c4ded6/daaf622e-e035-4c1b-a6d7-8ee209c4ded6.ovf
arg: /mnt/volnfs3rvdata/4007dc45-477a-45b2-9c28-43bc5bbb4f9f/master/vms/48f52ab9-64df-4b1e-9c35-c024ae2a64c4/48f52ab9-64df-4b1e-9c35-c024ae2a64c4.ovf 
```

只需替换`echo "arg:"`为您实际要使用的命令即可。如果您想一次传递所有文件，请删除该`-n1`选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T10:51:04.887

如果我理解正确，您可能想要这样的东西：

```
for L in `cat PathOutput.txt`; do
    echo "I read line $L from PathOutput.txt"
    # do something useful with $L
done 
```

# java - 如何在 java 中为 apache httpclient 库创建自己的信任管理器以忽略 apache httpclient 4.2 中的证书？

> ID：14955509
> 
> 赞同：0
> 
> 时间：2013-02-19T10:45:25.473
> 
> 标签：java, web-services, httpclient, apache-httpclient-4.x

有人可以告诉我如何在 Web 服务调用期间忽略 ssl 证书。我正在调用 https weburl 以获取 api 响应，但得到 peer not authenticated 错误。旧示例不起作用，因为某些方法已被弃用，因此有人可以告诉我/提供一些示例代码，这样我就不会收到此错误。

我才知道问题出在证书上。我正在使用 3rd 方 API 进行 db 调用，他们的域有 ssl 证书，即 www.dbprovider.com（SSL 证书是 *.dbprovider.com），他们为我们创建了看起来像 myapp.dbprovider.com 的子域

所以现在问题是当我尝试通过命令时没有可用的对等证书

```
openssl s_client -ssl3 -showcerts -connect myapp.dbprovider.com:443

openssl s_client -tls1 -showcerts -connect myapp.dbprovider.com:443 
```

有人可以告诉我我现在应该用它做什么。dbprovider 站点上是否有任何控制，以便他们可以为我提供一些配置，或者我必须编写代码来忽略他们的证书（但对于忽略证书，我们没有获得他们的对等证书）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:48:16.093

使用`SSLSocketFactory`此处描述的自定义：http: [//hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e512](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e512)。忽略自签名证书的此类工厂之一是[`EasySSLProtocolSocketFactory`](http://svn.apache.org/viewvc/httpcomponents/oac.hc3x/trunk/src/contrib/org/apache/commons/httpclient/contrib/ssl/EasySSLProtocolSocketFactory.java?view=markup).

```
 ProtocolSocketFactory factory = new EasySSLProtocolSocketFactory();
  try {
    URI uri = new URI(config.getBaseUrl());
    int port = uri.getPort();
    if (port == -1) {
      port = 443;
    }
    Protocol easyHttps = new Protocol(uri.getScheme(), factory, port);
    hostConfiguration.setHost(uri.getHost(), port, easyHttps);
  } catch (URISyntaxException e) {
    throw new IOException("could not parse URI " + config.getBaseUrl(), e);
  } 
```

来源： http: [//frightanic.com/software-development/self-signed-certificates-in-apache-httpclient/](http://frightanic.com/software-development/self-signed-certificates-in-apache-httpclient/)

# c# - 我不能使用 fileUpload.PostedFiles[] 属性？

> ID：14955512
> 
> 赞同：1
> 
> 时间：2013-02-19T10:45:26.530
> 
> 标签：c#, asp.net, file-upload, multifile-uploader

我不能使用`fileUpload.PostedFiles[]`财产？
我实际上需要一个多文件上传器和调整大小。
我对所有文件都使用`HttpFileCollection`hfc。它总是错的`string filename = fileUpload`。
这是一个好方法吗？

```
protected void UploadFile_Click(object sender, EventArgs e)
    {
        HttpFileCollection hfc = Request.Files;
        for (int i = 0; i < hfc.Count; i++)
        {
            HttpPostedFile hpf = hfc[i];
            if (hpf.ContentLength > 0)
            {
              if (fileUpload.HasFile)
                {

                    **string filename=fileUpload.PostedFiles[i].FileName;**    

                    string directory = Server.MapPath(@"Uploaded-Files\");    

                    Bitmap originalBMP = new Bitmap(fileUpload.FileContent);

                    Bitmap newBMP = new Bitmap(originalBMP, 800, 480);

                    Graphics oGraphics = Graphics.FromImage(newBMP);   

                    oGraphics.DrawImage(originalBMP, 0, 0, newWidth, newHeight);

                    newBMP.Save(directory + "tn_" + filename);

                    originalBMP.Dispose();
                    newBMP.Dispose();
                    oGraphics.Dispose();

                }

            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:49:55.630

你需要这样做：

```
HttpFileCollection multipleFiles = Request.Files;
for (int fileCount = 0; fileCount < multipleFiles.Count; fileCount++) 
{
    HttpPostedFile uploadedFile = multipleFiles[fileCount];
    string fileName = Path.GetFileName(uploadedFile.FileName);
    if (uploadedFile.ContentLength > 0) {
        uploadedFile.SaveAs(Server.MapPath("~/Files/") + fileName);
        Label1.Text += fileName + "Saved <BR>";
    }
} 
```

这是重新调整大小的方法：

```
public void ResizeImage(string OriginalFile, string NewFile, int NewWidth, int MaxHeight, bool OnlyResizeIfWider)
{
    System.Drawing.Image FullsizeImage = System.Drawing.Image.FromFile(OriginalFile);

    // Prevent using images internal thumbnail
    FullsizeImage.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
    FullsizeImage.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);

    if (OnlyResizeIfWider)
    {
        if (FullsizeImage.Width <= NewWidth)
        {
            NewWidth = FullsizeImage.Width;
        }
    }

    int NewHeight = FullsizeImage.Height * NewWidth / FullsizeImage.Width;
    if (NewHeight > MaxHeight)
    {
        // Resize with height instead
        NewWidth = FullsizeImage.Width * MaxHeight / FullsizeImage.Height;
        NewHeight = MaxHeight;
    }

    System.Drawing.Image NewImage = FullsizeImage.GetThumbnailImage(NewWidth, NewHeight, null, IntPtr.Zero);

    // Clear handle to original file so that we can overwrite it if necessary
    FullsizeImage.Dispose();

    // Save resized picture
    NewImage.Save(NewFile);
} 
```

参考：[http ://www.dzone.com/snippets/c-resize-image-while](http://www.dzone.com/snippets/c-resize-image-while)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-15T13:00:24.330

```
int fileCount;
            HttpFileCollection multipleFiles = Request.Files;
            for (fileCount = 0; fileCount < multipleFiles.Count; fileCount++)
            {
                HttpPostedFile uploadedFile = multipleFiles[fileCount];

                SqlCommand cmdinsert = new SqlCommand("insert into tb_gallery values(@image,@file_upload)", cn);
                cmdinsert.Parameters.AddWithValue("@image", DropDownList1.SelectedItem.Text);

                string imgname = "";
                Random random = new Random();
                imgname = "wc" + random.Next(10, 200000).ToString() + uploadedFile.FileName.ToString();
                uploadedFile.SaveAs(Server.MapPath("../DataFilesTemp/" + imgname));
                mc.ImgCompress(imgname, "Gallery", 900, 550);
                cmdinsert.Parameters.AddWithValue("@file_upload", imgname);

                cmdinsert.ExecuteNonQuery();

            }
            Response.Write("<script>alert('"+fileCount+" files uploaded successfuly')</script>"); 
```

# ruby - 如何测试一个带有 rspec 块的函数

> ID：14955519
> 
> 赞同：14
> 
> 时间：2013-02-19T10:45:43.603
> 
> 标签：ruby, rspec, mocking, rspec2, stubbing

我有一个函数，它接受一个块，打开一个文件，产生并返回：

```
def start &block
    .....do some stuff
    File.open("filename", "w") do |f|
        f.write("something")
        ....do some more stuff
        yield
    end
end 
```

我正在尝试使用 rspec 为它编写一个测试。如何存根 File.open 以便将对象 f （由我提供）传递给块，而不是尝试打开实际文件？就像是：

```
it "should test something" do
    myobject = double("File", {'write' => true})
    File.should_receive(:open).with(&blk) do |myobject|
        f.should_receive(:write)
        blk.should_receive(:yield) (or somethig like that)
    end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T11:07:52.567

我认为您正在寻找的是[yield matchers](https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/yield-matchers)，即：

```
it "should test something" do
  # just an example
  expect { |b| my_object.start(&b) }.to yield_with_no_args
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T14:06:08.640

您的另一个选择是使用 File 的新对象来存根 :open，如下所示：

```
file = File.new
allow(File).to receive(:open) { file }
file.each { |section| expect(section).to receive(:write) }
# run your method 
```

# html - 缩放时如何制作留在页面中的粘性标题？

> ID：14955520
> 
> 赞同：1
> 
> 时间：2013-02-19T10:45:49.957
> 
> 标签：html, css, sticky

这是粘性标题的基本示例：

```
#header {
    position:fixed;
    background-color: #CCE;
    width: 500px;
}
...
#content {
    background-color: #EEE;
    width: 500px;
} 
```

标题是固定的，下面的内容滚动。这样做的一个问题是，如果您缩放页面（您经常在移动浏览器上这样做），即使您向右滚动，也无法再访问标题的右侧部分。

**在这里摆弄我的例子：http: [//jsfiddle.net/76haM/](http://jsfiddle.net/76haM/)**（放大查看它的实际效果）

如何制作一个在缩放时表现良好的粘性标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:51:49.180

这将不起作用，因为您指定了固定宽度：

```
#header {
    width: 500px;
} 
```

因为缩放，页眉的宽度会比屏幕宽，导致文字脱落。

当你有一个基于百分比的宽度时，你会用正确的元素得到更好的结果，因为宽度会根据屏幕正确调整大小：

```
#header {
    width: 100%;
} 
```

[JSF](http://jsfiddle.net/76haM/1/)中。

# php - 如何正确编码/解码通过 POST 发送的变音符号

> ID：14955523
> 
> 赞同：0
> 
> 时间：2013-02-19T10:46:00.110
> 
> 标签：php, encoding, utf-8

这是我的问题一直让我头疼一段时间。我需要我的 Web 应用程序来正确处理任何东欧变音符号（主要是 ă Ă î Î ş Ş ţ Ţ â Â）。数据库正确处理它们，php脚本正确处理它们（所有php脚本都使用utf-8编码），但是在处理表单时存在问题。

例如，将以下内容插入数据库，处理正确，字符编码正确，保存正确，显示正确：

```
$insert_value = htmlentities('ă Ă î Î ş Ş ţ Ţ â Â',ENT_COMPAT, "UTF-8"); 
```

但是，如果我在 text/textarea 输入中键入相同的字符串并使用 POST 发送它：

```
$insert_value = htmlentities($_POST['test_string'],ENT_COMPAT, "UTF-8"); 
```

这将返回一个空字符串。

我检查了脚本使用 Firefox 接收的 POST，而不是 'ş Ş ţ Ţ' 字符，我得到了奇怪的符号（º ª þ Þ），所以我猜这就是 htmlentities 返回空的原因。

我尝试将表单上的 enctype 设置为 multipart/form-data 并且它似乎可以正确发送它但随后将 htmlentities 应用到它仍然以某种方式搞砸了它（例如 if `$_POST['ta'] = ăĂîÎşŞţŢâÂ, htmlentities($_POST['ta'],ENT_COMPAT, "UTF-8") returns $kappa;`）

**编辑**：非常感谢 deceze，该链接帮助我处理我的 Web 应用程序的编码，而无需任何 htmlentities 调用。我向那些在 php、html 和数据库之间处理变音符号有困难的人推荐这篇文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:43:14.127

[很高兴评论帮助...]

不要对进入数据库的数据进行 HTML 编码，[在 Web 应用程序中从头到尾处理 Unicode](http://kunststube.net/frontback)。这样做有很多问题，前面链接的文章介绍了最大的问题。

# php - PHP - 重定向延迟

> ID：14955526
> 
> 赞同：5
> 
> 时间：2013-02-19T10:46:12.870
> 
> 标签：php, redirect

我正在使用以下代码作为空引用脚本的一种形式，它运行良好，但它只是将它们直接重定向到目标 URL。

我将如何创建一个 5 秒的延迟，以便在重定向之前显示一些广告 5 秒？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-19T10:59:41.460

您可以发送带有超时刷新的 php 标头。[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

```
<?php 
  header( "refresh:5; url=wherever.php" ); 
?> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-19T10:48:16.827

使用[sleep()](http://php.net/sleep)怎么样？

```
function method1(...) {

sleep(5);

... rest of the code 
```

### 但是请注意，更建议使用[Vahe Shadunts 的答案](https://stackoverflow.com/a/14955790/1983854)，它使用它`header()`来代替。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-08T07:22:20.510

标题`refresh`完成了这项工作，但我想强调一些潜在的问题：

*   它没有在 HTTP 标准中指定。维基百科说：

    > 专有和非标准：由 Netscape 引入并被大多数 Web 浏览器支持的标头扩展。

    但它已经存在将近 20 年了，我不知道有任何浏览器*不*支持它（虽然找不到参考）

*   某些浏览器不使用以 . 重定向的页面上的缓存`refresh`。它已在此处为 Internet Explorer 进行了演示：http: [//blogs.msdn.com/b/ieinternals/archive/2010/05/13/meta-refresh-causes-additional-http-requests.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/meta-refresh-causes-additional-http-requests.aspx)我可以复制它火狐。Chrome 没有这个问题。

## 替代方案：JavaScript

您可以在中间页面上添加一个 JavaScript，它会在 X 秒后打开一个新页面。在页面底部添加以下内容以在几秒钟`http://www.example.com/target`后重定向到：`5`

```
<script type="text/javascript">
    window.setTimeout(function() {
        window.location.href='http://www.example.com/target';
    }, 5000);
</script> 
```

## 组合

`refresh`作为奖励，如果 JS 被禁用，您可以回退到标头，使用该`meta`指令`http-equiv`告诉浏览器就像发送了某个 HTTP 标头一样。因为它是 HTML 源代码的一部分，所以您可以将它包装在一个`<noscript>`元素中。将此添加到您的`<head>`附加到上面的 JavaScript 中：

```
<noscript>
    <meta http-equiv="refresh" content="5;url=http://www.example.com/target" />
</noscript> 
```

现在，如果可用，页面将使用 JavaScript 重定向以获得最佳性能，`refresh`否则使用。

# jquery - 切换时 Div 褪色背景

> ID：14955527
> 
> 赞同：0
> 
> 时间：2013-02-19T10:46:16.670
> 
> 标签：jquery, css

同一页面中有两个 div，其中一个是隐藏的，并在使用 jQuery 单击按钮时与另一个 div 切换。

是否可以为隐藏的 div 提供“淡入”效果，这样当两个 div 切换时，新 div 的背景颜色会在 2-3 秒内“淡化”为透明以突出显示新 div？

对不起，一些不正确的英语。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:47:34.337

您可以使用：

```
$("#element").fadeOut(2000);
$("#element2").fadeIn(2000); 
```

[.fadeOut() API 文档](http://api.jquery.com/fadeOut/)
[.fadeIn() API 文档](http://api.jquery.com/fadeIn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:58:13.293

淡入后使用 jQuery UI 的 .effect() 函数突出显示第二个 div 怎么样？

第一个 div 淡出，然后第二个淡入并突出显示 3 秒。

```
$('#div1').fadeOut(500, function () {
    $('#div2').fadeIn(500, function () {
        $('#div2').effect('highlight', {}, 3000);
    });
}); 
```

请参阅：[http ://docs.jquery.com/UI/Effects/Highlight](http://docs.jquery.com/UI/Effects/Highlight)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:24:53.310

试试：http: [//jsfiddle.net/8mEL4/](http://jsfiddle.net/8mEL4/)

```
$(function () {
   $("#element1").fadeOut( { duration: 1000, queue: false });
   $('#element2').effect('highlight',{ duration: 1000, queue: false });
}); 
```

我设置`queue : false`了同步动画效果并使用[jQuery UI/Effects/Highlight](http://docs.jquery.com/UI/Effects/Highlight)来突出显示效果。

# android - MergeAdapter 与 AsyncTaskLoader

> ID：14955528
> 
> 赞同：0
> 
> 时间：2013-02-19T10:46:18.017
> 
> 标签：android, commonsware-cwac

我想用加载器加载一个 MergeAdapter。我在 onLoadFinihed 回调中将适配器添加到 MergeAdapter，但 ListView 显示为空。我注意到没有调用自定义适配器的 getview 方法。

我使用相同的自定义适配器运行相同的代码并且运行良好，但我需要将标题添加到 ListView。

MergeAdapter 与加载器一起使用？

一些代码：

我设置了适配器：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    setEmptyText(getString(R.string.raceList_empty));

    mAdapter = new MergeAdapter();
    setListAdapter(mAdapter);
    getLoaderManager().initLoader(0, null, this).forceLoad();
} 
```

然后在 onLoadFinihed 上：

```
@Override
public void onLoadFinished(Loader<List<Race>> loader, List<Race> data) {

    LayoutInflater inflater = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View headerView = inflater.inflate(R.layout.race_header_row, null);
    mAdapter.addView(headerView, true);

    RaceAdapter activeAdapter = new RaceAdapter(getActivity());

    activeAdapter.setData(data);

    mAdapter.addAdapter(activeAdapter);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:01:56.320

> MergeAdapter 与加载器一起使用？

不是你这样做的方式。引用[文档“时间”部分的当前版本](https://github.com/commonsguy/cwac-merge#timing)：

> 在调用 setListAdapter() 以将 MergeAdapter 与 ListView 关联之前，您必须将内容倒入 MergeAdapter。此限制是必需的，因为 Android 只调用一次 getViewTypeCount()，并且添加更多视图或适配器会添加更多视图类型。

# typo3 - TYPO3 扩展：生成 PDF

> ID：14955534
> 
> 赞同：3
> 
> 时间：2013-02-19T10:46:50.887
> 
> 标签：typo3

我正在尝试使用 Kickstarter 进行扩展，以覆盖页面的正常呈现，并呈现 PDF 文件。为此我使用 FPDF。但我不知道该怎么做。我试过这样做，但没有奏效：

```
<?php

// require_once(PATH_tslib . 'class.tslib_pibase.php');

class tx_ishurkunde_pi1 extends tslib_pibase {
    public $prefixId      = 'tx_ishurkunde_pi1';
    public $scriptRelPath = 'pi1/class.tx_ishurkunde_pi1.php';
    public $extKey        = 'ish_urkunde';
    public $pi_checkCHash = TRUE;

    public function main($content, array $conf) {

        if (!t3lib_extMgm::isLoaded('fpdf')) return "Error!";

        $pdf = new FPDF();
        $pdf->AddPage();
        $content = $pdf->Output('', 'S');
        return $content;

    }
}
?> 
```

它仍然会继续呈现正常的 Web 模板。我错过了什么？

仅供参考，我没有尝试将 HTML 呈现为 PDF。我试图从头开始生成 PDF，使用 URL 参数是文本变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:41:51.580

据我了解，您的目标是呈现 PDF 而不是页面元素。

**由于您将插件插入页面，因此您当前的方法**将不起作用。然后将插件的返回值返回给 TYPO3 内容解析器，如果页面已完成解析，则显示该页面。它没有任何部分可以让您忽略整个页面的渲染；至少它不打算这样做，你也不应该这样做（尽管有扩展可以这样做）。

**eID 方法**是创建一个 eID 脚本（查看 dd_googlesitemap），该脚本通过 GET 参数调用并仅呈现您需要的内容。在那里你基本上可以做你想做的一切。

在您的扩展程序中`ext_localconf.php`，您注册 eID 脚本，如下所示：

```
$GLOBALS['TYPO3_CONF_VARS']['FE']['eID_include'][$_EXTKEY] = "EXT:{$_EXTKEY}/path/to/my/EIDHandler.php"; 
```

示例 eID 处理程序结构：

```
class Tx_MyExt_EIDHandler
{
  public function main()
  {
    // Your code here
  }
}

$output = t3lib_div::makeInstance('Tx_MyExt_EIDHandler');
$output->main(); 
```

要在前端调用您的 eID 脚本，您需要附加适当的 GET 参数，例如[http://example.com/index.php?eID=tx_myext](http://example.com/index.php?eID=tx_myext)。这是您在中定义的数组键`ext_localconf.php`（在我的示例中，它是`$_EXTKEY`，但它基本上可以是任何字符串）。

**插件/排版方法**就像 TemplaVoila 那样：您创建一个 PAGE 类型并调用 a`user_func`来完成您的工作。这将是最快的方法，因为您已经有一个插件。重要的是您呈现自己的页面类型，其中仅包含您的插件。

示例排版：

```
specialPage = PAGE
specialPage {
  type = 2
  10 = USER
  10.userFunc = tx_myextension_pi1->myFunc
} 
```

之后，您可以使用[http://example.com/index.php?type=2](http://example.com/index.php?type=2)调用您的新页面。但是，标题等仍会呈现，您可能需要删除它们。

# php - 将 javascript 函数更改为 jquery

> ID：14955545
> 
> 赞同：-2
> 
> 时间：2013-02-19T10:47:38.920
> 
> 标签：php, javascript, jquery

我正在使用 Jquery 将页面加载到 div 中。加载的页面使用 javascript。如何将下面显示的 javascript 更改为 jquery

```
window.onload = function(){
    new JsDatePick({
        useMode:2,
        target:"AdddueBy",
        dateFormat:"%d-%m-%Y"           
    });
    new JsDatePick({
        useMode:2,
        target:"bDob",
        dateFormat:"%d-%m-%Y"           
    });
    new JsDatePick({
        useMode:2,
        target:"gDob",
        dateFormat:"%d-%m-%Y"           
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:55:52.473

```
$(window).load(function() {
      new JsDatePick({
        useMode:2,
        target:"AdddueBy",
        dateFormat:"%d-%m-%Y"           
    });
    new JsDatePick({
        useMode:2,
        target:"bDob",
        dateFormat:"%d-%m-%Y"           
    });
    new JsDatePick({
        useMode:2,
        target:"gDob",
        dateFormat:"%d-%m-%Y"           
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:48:20.403

除了在 jQuery 中，您还可以使用：

```
$(window).load(function() {
    // ...
}); 
```

可以将其视为等效于`window.onload`事件，但我建议改用[DOM 就绪](http://api.jquery.com/ready/)回调：

```
$(function() {
    new JsDatePick({
        useMode:2,
        target:"AdddueBy",
        dateFormat:"%d-%m-%Y"           
    });
    new JsDatePick({
        useMode:2,
        target:"bDob",
        dateFormat:"%d-%m-%Y"           
    });
    new JsDatePick({
        useMode:2,
        target:"gDob",
        dateFormat:"%d-%m-%Y"           
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:47:28.783

以下代码有效`$(function' and the '$(document).ready`，但使用 JsDatePicker 它没有将字段数据发送到下一页。

似乎当您在表单中使用 JsDatePicker 时。表格必须在表格之外才能通过发送日期字段数据

相当愚蠢，但这就是问题所在

:)

# winforms - 在单击事件时使文本在文本框中消失，并在没有焦点时再次显示相同的文本？

> ID：14955546
> 
> 赞同：1
> 
> 时间：2013-02-19T10:47:41.223
> 
> 标签：winforms, c#-4.0, textbox, onclick

我在注册表中有 6`Textbox`个带有一些预设文本的注册表单。当我单击`Textbox`for`Name`然后预设文本`Enter your full name`应该消失...如果我然后单击`Textbox`for而不在Textbox 中`Email`写入任何内容，那么应该会再次出现。这个事件应该发生在所有 my中，但它们在每个中应该是不同的文本......而不是在所有这些中。有人可以帮我吗？`Name``Enter your full name``Textbox``Textbox``Enter your full name`

我现在拥有的代码可以`Textbox`使用 GotFocus 事件在单击它们时清除它们。

```
 private void textBox1_GotFocus(Object sender, EventArgs e)
 {
     textBox1.Clear();
 } 
```

在文本框中，我有预设文本....我希望每个文本框的确切预设文本在我单击外部时返回`Textbox`。我听说过一些关于“占位符”的事情？

这是使用额外构造函数时的外观。我无法弄清楚我做错了什么？

```
 public partial class CustomTextbox : TextBox
 {
    private const string _text = @"Enter your full name";
    private bool _isEmpty = true;

    public CustomTextbox()
    {

        base.ForeColor = SystemColors.GrayText;
        Text = _text;
        Leave += LeaveTextBox;
        Enter += EnterTextBox;
        TextChanged += TextChangedTextBox;
    }
    public CustomTextbox(string tempText)
    {

        base.ForeColor = SystemColors.GrayText;
        Text = tempText;
        Leave += LeaveTextBox;
        Enter += EnterTextBox;
        TextChanged += TextChangedTextBox;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:01:12.513

尝试创建一个继承自`Textbox`. 为此，创建一个新的`Usercontrol`. 删除基类名称并放在`Textbox`那里。如果出现编译错误，请删除设计器中的任何内容。构建您的项目。您应该在工具箱中看到一个新控件。使用它，你就可以开始了。这是代码`Usercontol.cs`

```
public partial class CustomTextbox : TextBox
{
    private const string _text = @"Enter your full name";
    private bool _isEmpty = true;

    public CustomTextbox()
    {
        InitializeComponent();
        base.ForeColor = SystemColors.GrayText;
        Text = _text;
        Leave += LeaveTextBox;
        Enter += EnterTextBox;
        TextChanged += TextChangedTextBox;
    }

    private void TextChangedTextBox(object sender, EventArgs e)
    {
        _isEmpty = string.IsNullOrEmpty(Text);
    }

    public override sealed string Text
    {
        set
        {
            base.Text = value;
        }
    }

    private void LeaveTextBox(object sender, EventArgs e)
    {
        if (string.IsNullOrEmpty(Text))
        {
            Text = _text;
            _isEmpty = true;
            base.ForeColor = SystemColors.GrayText;
        }
        else
        {
            _isEmpty = false;
        }
    }

    private void EnterTextBox(object sender, EventArgs e)
    {
        if (_isEmpty)
            Text = string.Empty;

        base.ForeColor = SystemColors.ControlText;
    }
} 
```

如果您需要任何进一步的信息，请告诉我。作为一个不，您也可以`_text`作为公共属性并使用它来设置所需的文本属性。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:44:14.040

我解决了我的问题！感谢@rapsalands 提供代码。我现在已经根据我的需要对其进行了修改。

```
 public partial class UserControl1 : UserControl
 {
    public UserControl1()
    {
        InitializeComponent();
    }
 }

public partial class CustomTextbox : TextBox
{

    private string defaultText;

    public string DefaultText
    {
        get { return defaultText; }
        set { defaultText = value; }
    }

    private bool _isEmpty = true;

    public CustomTextbox(string myText)
    {

        base.ForeColor = SystemColors.GrayText;
        this.Text = myText;
        this.DefaultText = myText;
        Leave += LeaveTextBox;
        Enter += EnterTextBox;
        TextChanged += TextChangedTextBox;
    }

    private void TextChangedTextBox(object sender, EventArgs e)
    {
        _isEmpty = string.IsNullOrEmpty(Text);
    }

    public override sealed string Text
    {
        set
        {
            base.Text = value;
        }
    }

    private void LeaveTextBox(object sender, EventArgs e)
    {
        if (string.IsNullOrEmpty(Text))
        {
            Text = defaultText;
            _isEmpty = true;
            base.ForeColor = SystemColors.GrayText;
        }
        else
        {
            _isEmpty = false;
        }
    }

    private void EnterTextBox(object sender, EventArgs e)
    {
        if (_isEmpty)
            Text = string.Empty;

        base.ForeColor = SystemColors.ControlText;
    }
} 
```

}

# android - 如何在 android 的 textview 上用颜色显示数据？

> ID：14955548
> 
> 赞同：0
> 
> 时间：2013-02-19T10:47:44.877
> 
> 标签：android, html, webview

实际上我的问题是我有来自 web 服务的数据，我解析这些数据并填写我的 sqlite 数据库行。数据包含一些 android 不支持的 html 标签，比如

```
> <span Style="color:#ff0000;">the Lord Is The Creator <span>; 
```

所以“主是创造者”将以红色显示。像这样我在 android.the Html.fromHtml 的 ListView 中有 textviews 也不起作用。 **任何帮助都是适用的。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:54:04.893

如果您的问题只是在列表视图中显示带有颜色的文本视图，那么只在 sqlite 中存储项目的六色颜色。

并且在 listview 中显示 textview 时使用 textView.setTextColor(Color.parseColor("#ff0000"));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:50:56.530

```
Html.fromHtml(); 
```

此函数返回一个 Spanned 对象，可以将其设置为 Textview 的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:18:53.020

正如 njzk2 正确提到的， style 属性不被[Html.fromHtml](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)解释。另一种解决方法可能是进行一些服务器端更改。就像来自服务器的字符串可能是这样的

```
"<font color='red'>the Lord Is The Creator</font>." 
```

然后你可以像这样使用它

```
yourTextView.setText(Html.fromHtml("<font color='red'>the Lord Is The Creator</font>.")); 
```

# asp.net-mvc - 如何在 Azure 中更改 webconfig 的用户界面或本地化

> ID：14955549
> 
> 赞同：0
> 
> 时间：2013-02-19T10:47:44.790
> 
> 标签：asp.net-mvc, azure, localization

我编写了一个 MVC 应用程序，我可以在其中轻松地从 Web.config 文件更改 uiculture。

```
<system.web>
    <globalization culture="fr-FR" uiCulture="fr-FR"/>
</system.web> 
```

我必须在 Windows Azure 中托管它。我意识到您可以从 Azure 配置应用程序设置和连接字符串，但我找不到可以更改 uiculture 的任何地方。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:20:06.807

在 Windows Azure 中，没有一种明确的方法可以做到这一点，就像我们对连接字符串所做的那样。如果你想这样做，你可以在启动任务中做，你需要创建一个批处理文件（即culture.cmd），其中可以运行以下命令：

```
Appcmd set config /commit:WEBROOT /section:globalization /culture:fr-FR
Appcmd set config /commit:WEBROOT /section:globalization /uiCulture:fr-FR 
```

在您必须创建启动任务后，在“ServiceDefinition.csdef”中定义：

```
<Startup>
 <Task commandLine="culture.cmd" executionContext="elevated" taskType="simple" />
</Startup> 
```

# sql - 在多列的单行中显示多行数据

> ID：14955551
> 
> 赞同：2
> 
> 时间：2013-02-19T10:47:54.897
> 
> 标签：sql, postgresql, crosstab, window-functions

我有一些带有时间戳的记录的 PostgreSQL 数据库。

是否有简单的方法在一段时间内（例如一个月，使用 PRECEDING 和 FOLLOWING 表达式）收集窗口中的数据，然后创建包含本月所有记录的多列（例如，每月每天 30 列）？

让我们考虑这个简单的情况：一个包含两列`timestamp`和`measurement`. 我想要的是获得*31 列的表*：时间戳和`measurement1`，`measurement2`... `measurement30`，`measurement_i`时间戳前 i 天的测量值在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:58:48.903

如果您希望结果中有*多个*这样的行，我会使用一个[`crosstab()`](https://stackoverflow.com/questions/3002499/postgresql-crosstab-query/11751905#11751905)函数。

但根据你的描述，你想要一个*单行*。我会用[窗口函数`lead()`或`lag()`](http://www.postgresql.org/docs/current/interactive/functions-window.html).
主要技巧是在应用 WHERE 子句并将结果缩小到单行之前使用子查询或 CTE 生成所有列。我会在这里使用[**CTE**](http://www.postgresql.org/docs/current/interactive/queries-with.html)：

给定下表（您应该提供）：

```
CREATE TABLE tbl(
  tbl_id serial PRIMARY KEY
 ,ts timestamp NOT NULL
 ,value int
); 
```

### 保证每天一排

查询可能如下所示：

```
WITH x AS (
   SELECT tbl_id, ts, value
         ,lag(value, 1) OVER w AS value_day_before_1
         ,lag(value, 2) OVER w AS value_day_before_2
   --    ...
         ,lead(value, 1) OVER w AS value_day_after_1
         ,lead(value, 2) OVER w AS value_day_after_2
   --    ...
   FROM   tbl
   WINDOW w AS (ORDER BY ts) 
   )
SELECT *
FROM   x
WHERE  ts = '2013-02-14 0:0'::timestamp 
```

### 每天最多一行，但可能缺少天数：

时间戳也可以是一天中的任何时间。

生成一个日期列表[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html)和`LEFT JOIN`你的表格：

```
WITH x AS (
   SELECT tbl_id, ts, value
         ,lag(value, 1) OVER w AS value_day_before_1
         ,lag(value, 2) OVER w AS value_day_before_2
   --    ...
         ,lead(value, 1) OVER w AS value_day_after_1
         ,lead(value, 2) OVER w AS value_day_after_2
   --    ...
   FROM   (
       SELECT generate_series ('2013-02-01'::date
                              ,'2013-02-28'::date
                              ,interval '1d') AS day
       ) d
   LEFT JOIN tbl t ON date_trunc('day', t.ts) = d.day
   WINDOW w AS (ORDER BY day) 
   )
SELECT *
FROM   x
WHERE  ts = '2013-02-14 0:0'::timestamp; 
```

[**-> sqlfiddle**](http://www.sqlfiddle.com/#!12/41564/2)

# silverlight - Silverlight 3，从框架中的 xaml 布局更新父 xaml 布局中的文本

> ID：14955553
> 
> 赞同：0
> 
> 时间：2013-02-19T10:48:04.480
> 
> 标签：silverlight, xaml, frame, parent

我有一个主屏幕，其中有一个框架放置在中央，当它可见时，它填充了大约一半的屏幕，在主屏幕上按下一个按钮使框架可见并用另一个 xaml 文件填充它（我们称之为框架布局）

我想做的是在按下框架布局上的按钮时更新主屏幕上的文本框。

如果我可以从框架内的按钮折叠框架的可见性，那也会很有用。

希望任何人都可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:53:30.923

看起来你想要完成一些主细节场景。请查看这些链接，看看它是否指向正确的方向。

[http://msdn.microsoft.com/en-us/silverlight4trainingcourse_sl4lob_02_03_showingevents.aspx](http://msdn.microsoft.com/en-us/silverlight4trainingcourse_sl4lob_02_03_showingevents.aspx) [http://www.devcurry.com/2011/02/silverlight-4-master-details-with-two.html](http://www.devcurry.com/2011/02/silverlight-4-master-details-with-two.html)

如果这不是您要查找的内容，请提供更多详细信息和您已经获得的代码示例。

希望有帮助...

# java - Android（客户端）上的 Aes 加密和使用 C++ 的服务器上的解密

> ID：14955559
> 
> 赞同：0
> 
> 时间：2013-02-19T10:48:26.140
> 
> 标签：java, c++, openssl, aes

我正在我的 android 应用程序上使用 AES 加密，但我遇到了问题。我希望我的应用程序使用 Aes_256_Cbc 算法加密密码。每次加密的字符串都必须不同，这就是为什么我每次都需要一个真正随机的 iv。我必须加密这个词的代码是：

```
import android.content.Context;
import java.security.SecureRandom;
import javax.crypto.Cipher;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class Encryptor
{
Context context;
private static final String WORD = "aefbjolpigrschnx";
private static final String KEY = "kumyntbrvecwxasqertyplmqazwsxedc";
private final static String HEX = "0123456789ABCDEF";

public Encryptor(Context c)
{
    context = c;
}

public String getEncryptedPasswd()
{
    String ivHex = "";
    String encryptedHex = "";

    try 
    {
        SecureRandom random = SecureRandom.getInstance("SHA1PRNG");
        byte[] iv = new byte[16];
        random.nextBytes(iv);
        ivHex = toHex(iv);
        IvParameterSpec ivspec = new IvParameterSpec(iv);
        SecretKeySpec skeySpec = new SecretKeySpec(KEY.getBytes("UTF-8"), "AES");

        Cipher encryptionCipher = Cipher.getInstance("AES/CBC");
        encryptionCipher.init(Cipher.ENCRYPT_MODE, skeySpec, ivspec);
        byte[] encryptedText = encryptionCipher.doFinal(WORD.getBytes("UTF-8"));
        encryptedHex = toHex(encryptedText);
    } 
    catch (Exception e) 
    {
    }
    return ivHex + encryptedHex;
}

public static String toHex(byte[] buf) 
{
    if (buf == null)
    {
        return "";
    }       
    StringBuffer result = new StringBuffer(2 * buf.length);
    for (int i = 0; i < buf.length; i++)
    {
            result.append(HEX.charAt((buf[i]>>4)&0x0f)).append(HEX.charAt(buf[i]&0x0f));

    }
    return result.toString();

} 
```

`getEncryptedPasswd()`我的应用程序多次调用该函数，每次它按预期提供不同的十六进制输出。然后它将加密的密码发送到我的代码必须在 C++ 中的服务器。但是当我尝试使用 openssl 解密密码时，我没有得到正确的输出。谁能帮我？我在服务器上的代码是：

```
#include <iostream>
#include <string>
#include <vector>
#include <cstdlib>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <unistd.h>
#include <openssl/aes.h>

#define KEY "kumyntbrvecwxasqertyplmqazwsxedc"

using namespace std;

unsigned int hex2bin(char *ibuf, unsigned char *obuf, unsigned int ilen)
{
unsigned int i;
unsigned int j;
unsigned int by = 0;
unsigned char ch;

// process the list of characaters
for (i = 0; i < ilen; i++)
{
        ch = toupper(*ibuf++);
    // do the conversion
        if(ch >= '0' && ch <= '9')
    {
        by = (by << 4) + ch - '0';
    }    
    else if(ch >= 'A' && ch <= 'F')
    {
            by = (by << 4) + ch - 'A' + 10;
    }
        else
    {
        memcpy(obuf, "ERROR", 5);
            return 0;
        }

        // store a byte for each pair of hexadecimal digits
        if (i & 1) 
    {
            j = ((i + 1) / 2) - 1;
            obuf[j] = by & 0xff;
        }
}
return (j+1);
}

string iv_str = auth.substr(0, 16);
string enc_str = auth.substr(16);

char *iv_buf = new char [iv_str.length() + 1];
strcpy(iv_buf, iv_str.data());
char *enc_buf = new char [enc_str.length() + 1];
strcpy(enc_buf, enc_str.data());

unsigned long ilen;
unsigned char iv[16];
unsigned char enc_word[16]; // hex decrypt output
unsigned char word[16]; // decrypt output
unsigned char enc_key[] = KEY;
AES_KEY aeskeyDec;

    AES_set_decrypt_key(enc_key, 256, &aeskeyDec);

    ilen = hex2bin(enc_buf, enc_word, (int) strlen(enc_buf));
hex2bin(iv_buf, iv, (int) strlen(iv_buf));

    AES_cbc_encrypt(enc_word, word, ilen, &aeskeyDec, iv, AES_DECRYPT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:25:22.637

我是一个 C++ 人，而不是 java，所以我不能评论你的这一行，只能说它看起来可以满足你的需要：

```
Cipher encryptionCipher = Cipher.getInstance("AES/CBC"); 
```

但以防万一，请注意我可以确认 Java 默认使用 ECB 模式。和你一样，我也必须用 C++ AES 解密一些用 Java 加密的文本。我花了一段时间才弄清楚发生了什么： [如何使用 OpenSSL 解密 Java AES 加密的数据？](https://stackoverflow.com/questions/5136279/how-to-use-openssl-to-decrypt-java-aes-encrypted-data)

# asp.net-mvc - asp.net mvc tinymce 用法？

> ID：14955560
> 
> 赞同：3
> 
> 时间：2013-02-19T10:48:30.287
> 
> 标签：asp.net-mvc

脚本

```
<script type="text/javascript">
    tinyMCE.init({
        language: "tr",
        elements: "Body",
        mode: "exact",
        height: 400,
        width: 600
    });
</script>

<script>
    $(function () {
        $('#form_post').ajaxForm({
            beforeSubmit: ShowRequest,
            success: SubmitSuccesful,
            error: AjaxError
        });
    });
</script> 
```

html

```
@using (Html.BeginForm("_AddPost", "Posts", FormMethod.Post, new { id = "form_post" }))
{
     <div class="editor-label">
          <input type="file" name="File" id="File" />
     </div>

     <div class="editor-label">
         @Html.LabelFor(model => model.PostTypeId)
     </div>
     <div class="editor-field">
          @Html.DropDownListFor(model => model.PostTypeId, ViewBag.PostTypes as SelectList, "--- Haber Tipi ---", new { @class = "custom_select" })
      </div>
      <div class="editor-field">
          @Html.ValidationMessageFor(model => model.PostTypeId)
      </div>

      ...

      <div class="editor-label">
           @Html.LabelFor(model => model.Body)
      </div>
      <div class="editor-field">
           @Html.TextAreaFor(model => model.Body, new { @class = "custom_textarea" })
      </div>
      <div class="editor-field">
           @Html.ValidationMessageFor(model => model.Body)
      </div>

      <div class="editor-label">
           @Html.LabelFor(model => model.AuthorId)
      </div>
      <div class="editor-field">
           @Html.DropDownListFor(model => model.AuthorId, ViewBag.Authors as SelectList, "--- Yazarlar ---", new { @class = "custom_select" })
       </div>
       <div class="editor-field">
           @Html.ValidationMessageFor(model => model.AuthorId)
       </div>

       <div class="editor-label">
            @Html.LabelFor(model => model.IsActive)
       </div>
       <div class="editor-field">
            @Html.CheckBoxFor(model => model.IsActive)
       </div>
       <div class="editor-field">
            @Html.ValidationMessageFor(model => model.IsActive)
       </div>

       <div class="submit-field">
             <input type="submit" value="Ekle" class="button_gray" />
       </div>
} 
```

模型

```
public class PostViewModel
{
    public int Id { get; set; }

    ...

    [Required(ErrorMessage = "{0} alanı boş bırakılmamalıdır!")]
    [Display(Name = "Haber İçerik")]
    [AllowHtml]
    public string Body { get; set; }

    ...

    [Required(ErrorMessage = "{0} alanı boş bırakılmamalıdır!")]
    [Display(Name = "Haber Tipi")]
    public Nullable<int> PostTypeId { get; set; }

    [Required(ErrorMessage = "{0} alanı boş bırakılmamalıdır!")]
    [Display(Name = "Yazar")]
    public Nullable<int> AuthorId { get; set; }

    [Display(Name = "Kategori")]
    public Nullable<int> CategoryId { get; set; }

    ...

    [Required(ErrorMessage = "{0} alanı boş bırakılmamalıdır!")]
    [Display(Name = "Yayında")]
    [DefaultValue(true)]
    public bool IsActive { get { return true; } set { } }

    public HttpPostedFileBase File { get; set; }
} 
```

当我发布查看 tinymce 编辑器内容时，它不会绑定到模型属性。其他属性绑定，只有 tinymce 没有。

我的意思是在控制器动作中

```
model.Title         // is my expected
model.Description   // is my expected
model.Body          // null 
```

控制器

```
public ActionResult _AddPost()
{
    using (NewsCMSEntities entity = new NewsCMSEntities())
    {
        // following lines are true. I can see dropdownlist values...
        ViewBag.PostTypes = new SelectList(entity.PostTypes.ToList(), "Id", "Name");
        ViewBag.Authors = new SelectList(entity.Authors.ToList(), "Id", "Name");
        ViewBag.Categories = new SelectList(entity.Categories.ToList(), "Id", "Name");

        return PartialView(new PostViewModel());
    }
}

[HttpPost]
public ActionResult _AddPost(PostViewModel viewModel)
{
    Posts post = new Posts();
    post = AutoMapper.Mapper.Map<PostViewModel, Posts>(viewModel);
    PostImages postImage = new PostImages();
    HttpPostedFileBase file = viewModel.File;

    using (NewsCMSEntities entity = new NewsCMSEntities())
    {
        if (ModelState.IsValid)
        {
             // add post to db
        }
        else
        {
            foreach (ModelState modelState in ViewData.ModelState.Values)
            {
                foreach (ModelError error in modelState.Errors)
                {
                     Console.WriteLine(error);
                     // error message model.Body is null
                }
        }
   } 
```

所有模型属性都是我预期的，只有 Body 属性不是。我错过了什么？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:46:00.253

TinyMCE 的诀窍在于它用 iframe 替换了 textarea。在标准 POST 的情况下，TinyMCE 自己处理原始文本区域的更新，但是当您使用 AJAX 时，您需要自己完成。它可以在`beforeSerialize`您正在使用的 jQuery 表单插件的回调中完成：

```
$(function () {
    $('#form_post').ajaxForm({
        beforeSerialize: function($form, options) { tinyMCE.triggerSave(); },
        beforeSubmit: ShowRequest,
        success: SubmitSuccesful,
        error: AjaxError
    });
}); 
```

# css - 否决 !important 内联 CSS

> ID：14955565
> 
> 赞同：0
> 
> 时间：2013-02-19T10:48:41.933
> 
> 标签：css

我正在使用 Wordpress 插件“NextGEN Gallery”和“JJ NextGen JQuery Carousel”，因为我正在尝试制作一个看起来很像最后一个命名插件的默认外观的轮播。问题是该插件使用带有背景图像的 div 作为按钮，它得到了这个 CSS：

```
div#about-jcarousel_container .jcarousel-skin-custom .jcarousel-prev-horizontal {
    top: 188px !important;  
} 
```

因此，这不起作用（顶部：0px 部分）：

```
.jcarousel-skin-custom .jcarousel-prev-horizontal {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: rgba(24, 16, 16, 0.43) url(prev-horizontal.png) no-repeat 0 0;
    background-position-y: 50%;
    height: 100%;
} 
```

令人讨厌的地方是 188px 永远不会在任何地方调用，所以我不能只编辑它以使其成为 0px，而是在浏览器中的客户端。所以我环顾四周，似乎该插件将 188px 代码放入内联 <style> 标记中。因为它有 !important 我不能只在我的 template.css 中使用 !important 来覆盖它。

是另一种否决 !important 内联使用的标签的方法吗？我真的希望保持插件可更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:52:06.807

覆盖的唯一方法`!important`是在级联中进一步使用`!important`，因此将其放在 jcarousel 之后的 CSS 文件中。

或者，编辑 jcarousel

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:56:49.660

您似乎在 html 文件中的 .css 文件之后引用 jcarousel css 文件。在样式表（.css 文件）之前保留 jcarousel .css 文件的引用。然后您可以`!important`再次使用来覆盖默认的 jcarousel .css 文件样式属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-18T14:09:04.617

您可以更改代码的特异性。如果可能的话，寻找一个可能是父母的 ID。并将 !important 添加到您的顶部元素。

```
#ID .jcarousel-skin-custom .jcarousel-prev-horizontal {
position: absolute;
top: 0px!important;
left: 0px;
width: 32px;
height: 32px;
cursor: pointer;
background: rgba(24, 16, 16, 0.43) url(prev-horizontal.png) no-repeat 0 0;
background-position-y: 50%;
height: 100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T10:55:04.050

这就是为什么`!important`不鼓励使用的原因。您只能`!important`用另一个覆盖，`!important`而且并不总是可能的。当有两条规则时，`!important`应用“最重要”的一条。

现在的问题是，哪个更重要？

1.  `<div class="someclass" style="inline style"></div>`内联样式比普通样式更重要（例如）
2.  更具体的规则 > 不太具体（#one .example tag .yeah > .yeah）
3.  如果两条规则具有相同的优先级，则最后应用的规则获胜

如果您无法添加更重要的规则，则无法覆盖`!important`. 但是您可以在页面加载时使用脚本添加内联样式。示例（使用 jQuery）：

```
<script>
$(document).ready(function() {
    $("#test").css("color","blue");
});
</script> 
```

没有 jQuery 的示例：

```
<script>
window.onload = function () {
    document.getElementById("test").style.color = "yellow";
}
</script> 
```

# batch-file - 用于在 txt 中搜索并删除不需要的行的批处理文件

> ID：14955572
> 
> 赞同：1
> 
> 时间：2013-02-19T10:49:07.307
> 
> 标签：batch-file

**我需要一个批处理文件来搜索打印路线：**

```
Network Destination        Netmask          Gateway       Interface  Metric

      0.0.0.0          0.0.0.0       10.0.0.254        10.0.0.31    276
      0.0.0.0          0.0.0.0       10.10.10.1     10.10.10.134     25
     10.0.0.0        255.0.0.0       10.0.0.254        10.0.0.31     21
     10.0.0.0    255.255.255.0         On-link         10.0.0.31    276
    10.0.0.31  255.255.255.255         On-link         10.0.0.31    276 
```

并返回除“on-link”行之外的所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:32:08.417

您不需要为此编写脚本。这是一个班轮。

```
route print -4 | find /v /i "on-link" 
```

# c - 传递给 C 函数时 &array[0] 和 &array 之间的区别

> ID：14955574
> 
> 赞同：4
> 
> 时间：2013-02-19T10:49:10.563
> 
> 标签：c

传递给 C 函数时 &array[0] 和 &array 之间是否有区别。该数组是一个 void* 数组，当前将整数作为数据。

添加了测试代码

```
#include <iostream>
#include <conio.h>

using namespace std;

int read_buffer[10] = {0,0,0,0,0,0,0,0,0,0};

int write_buffer[10] = {0,1,2,3,4,5,6,7,8,9};

void WriteBlock(void* SrcPtr)
{
  //WriteBlock will use SrcPtr and store the data to a common memory block which ReadBlock will access.
 }

void ReadBlock(void* DstPtr)
{
   //ReadBlock function will fetch data from readBuffer and put the data back into the *DstPtr.
}

void main()
{
 WriteBlock((int*)&write_buffer);
 //Is there a difference between these two below calls.
  ReadBlock(&read_buffer[0]);
  ReadBlock(&read_buffer);
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T10:56:28.563

是的，有很大的不同，这取决于上下文。

考虑一下：-

```
char arrayA[10];
char *arrayB; 
```

`&arrayA[0]`并且`&arrayB[0]`都有 type `char *`。

但是`&arrayA`有类型`char (*)[10]`而`&arrayB`有类型`char **`- 指针的地址。

对于`arrayA`，它们指向同一个地址 - 但对于`arrayB`，**它们没有！**有一个常见的 C 误解，即“指针和数组是相同的”。这是一个很好的例子，说明他们绝对不是，

看到这个：http: [//ideone.com/OcbuXZ](http://ideone.com/OcbuXZ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:08:36.667

假设`array`被声明

```
void *array[N]; 
```

那么表达式`&array[0]`和`&array`将产生相同的*值*（数组的第一个元素的地址与数组本身的地址相同），但将具有不同的*类型*。

```
Expression        Type
----------        ----
    &array        void *(*)[10]  -- pointer to 10-element array of `void *`
  &array[0]       void **        -- pointer to pointer to void 
```

您的函数原型将需要与您传递的任何表达式匹配。如果您将该函数称为

```
func(&array); 
```

那么函数原型需要是

```
void func(void *(*arrp)[10]) {...} 
```

如果您将该函数称为

```
func(&array[0]); 
```

那么函数原型需要是

```
void func(void **arrp) {...} 
```

尽管在这种情况下，您应该将数组的大小作为单独的参数传递。

现在，假设`array`被声明

```
void **array = malloc(sizeof *array * N); 
```

那么表达式`&array`and`&array[0]`将产生不同的值*和*不同的类型。

```
Expression        Type
----------        ----
    &array        void ***  
 &array[0]        void ** 
```

`&array`将为您提供`array`变量本身的地址，该地址与为数组分配的堆内存的地址不同。同样，您的函数原型需要与您使用的表达式的类型相匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:35:04.720

如果`array`真的是一个数组，那么

*   `&array[0]`是指向元素 0 的指针`array[]`
*   `&array`是指向整个的指针`array[]`

因此，这两个表达式属于不同的类型。如果您传递了错误的两者之一，这可能会导致您的代码无法编译的主要区别。

然而，在低级别，两个指针将保存相同的地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:36:27.083

**是的，有很大的不同**

```
&array[0]==>void** 
```

**和**

```
&array==>void*** 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T10:58:24.953

这不会编译，您正在使用 a`void *`并尝试获取它的第一个元素。但它有多大？编译器不知道。`int *`如果你不尝试这样的事情，使用可能会编译：

```
int main (void) {
  int *arr = malloc( 10 );

  arr = &arr[0]; // this is ok
  arr = &arr;    // wrong data type
} 
```

`&array`返回一个`int **`，`&array[0]`返回`int *`。这些是不同的数据类型。

# symfony - 使用 config.yml 中定义的主机/用户代理进行 PHPUnit 测试

> ID：14955576
> 
> 赞同：0
> 
> 时间：2013-02-19T10:49:13.567
> 
> 标签：symfony, configuration, phpunit

我想在我的 config.yml 中定义测试客户端用户代理和主机名。

目前我在每个配置中使用相同的东西：

```
$client = static::createClient();
$container = $client->getContainer();
$client->setServerParameters(
    array(
        'HTTP_HOST' => 'Test',
        'HTTP_USER_AGENT' => 'Test'
    )
); 
```

我希望使用这样的东西

```
$client = static::createClient();
$container = $client->getContainer();
$client->setServerParameters(
    array(
        'HTTP_HOST' => $container->getParameter('test.host'),
        'HTTP_USER_AGENT' => $container->getParameter('test.useragent')
    )
); 
```

但这失败了。

> 没有扩展能够在 config.yml 中加载“测试”的配置。寻找命名空间“test”，找到“framework”、“security”、“twig”、“monolog”、“swiftmailer”、“assetic”、“doctrine” [...]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:14:55.320

将您的值添加到`parameter.yml`.

通常，仅将值放入 comfig.yml 不会自动将它们添加到您的容器中。

如果您想了解如何通过 config.yml 使您的代码可配置，请查看[如何为 Bundle 公开语义配置](http://symfony.com/doc/master/cookbook/bundles/extension.html)

# objective-c - Objective C 块 - 语法

> ID：14955577
> 
> 赞同：2
> 
> 时间：2013-02-19T10:49:13.977
> 
> 标签：objective-c, objective-c-blocks

我有一个这样定义的块：

```
CGPoint (^rotateOrderedPair)(CGFloat, CGFloat, CGFloat, CGFloat, CGFloat) = ^(CGFloat x, CGFloat y, CGFloat pivotX, CGFloat pivotY, CGFloat angle) {
    CGFloat rotatedX = cos(angle) * (x - pivotX) - sin(angle) * (y - pivotY) + pivotX;
    CGFloat rotatedY = sin(angle) * (x - pivotX) + cos(angle) * (y - pivotY) + pivotY;
    return CGPointMake(rotatedX, rotatedY);
}; 
```

`(CGFloat, CGFloat, CGFloat, CGFloat, CGFloat)`我想问一下，当所有命名参数的列表只有几个字符之后，我为什么还要写？为什么会有这种两面性？我一定遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:02:10.737

人们通常 typedef 任何重要的块，这几乎不是问题：

```
typedef CGPoint (^XYPointTransform)(CGFloat, CGFloat, CGFloat, CGFloat, CGFloat); 
```

接着：

```
XYPointTransform rotateOrderedPair =
    ^(CGFloat x, CGFloat y, CGFloat pivotX, CGFloat pivotY, CGFloat angle) {
    // …
}); 
```

从代码可读性的角度来看， typedef 也是可取的。此外，声明和定义中的签名不必完全相同：

```
typedef void (^SomeBlock)(NSObject*);
SomeBlock foo = ^(id arg) {…}; 
```

这意味着您不会重复两次完全相同的内容，并且在实际块定义中选择稍微不同类型的可能性有时很方便。

我同意进行某种类型推断会很好：

```
auto block = ^(/* a complex signature*/) {…}; 
```

据我所知，这不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:58:12.780

块的语法很大程度上模仿了 C 函数指针的语法，因此您可能应该在那个世界中寻找基本原理。

# asp.net - RESTful 验证密码服务

> ID：14955580
> 
> 赞同：5
> 
> 时间：2013-02-19T10:49:24.713
> 
> 标签：asp.net, asp.net-web-api, restful-architecture

我正在使用 ASP.NET Web Api 编写验证密码服务。

该服务接受当前登录用户的密码，对其进行验证，然后返回一个编码值。这一切都发生在 SSL 上。

调用此方法不会导致状态更改。

最初这看起来应该是一个`GET`请求，但是在进一步检查后，我担心 Web 服务器会记录纯文本密码。

我们可以将其实现为 a `POST`，但这似乎是给定动作的错误动词。

这仅仅是一个实用主义优于程序的案例，还是我们可以做更多的事情来满足务实和 RESTful 的案例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:19:26.577

您应该使用[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)，将用户名/密码作为标头传递。这也更适合已经定义的标准。

已经有一个用于进行 base64 编码的[javascript](http://www.webtoolkit.info/javascript-base64.html)代码 - 如果您需要在浏览器上执行此操作。

* * *

如果您这样做是为了进行身份验证并且编码值是访问令牌 (cookie)，则最好使用 OAuth 2.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:03:16.973

如果 API 调用发送的响应本身不是资源（不涉及从数据存储返回的资源），则应该使用动词而不是名词。

您可以拥有一个 UserPasswordsController 控制器，该控制器公开如下操作方法：

```
[HttpPost()] 
public HttpResponseMessage Validate()
{
    if (!this.Request.Content.IsFormUrlEncodedContent())
    {
        return this.Request.CreateErrorResponse(
            HttpStatusCode.BadRequest, 
            "Body of request must be form URL encoded."
        );
    }

    var parameters  = this.Request.Content.ReadAsFormDataAsync().Result;

    var userName    = parameters["userName"];
    var password    = parameters["password"];

    // TODO: Validate user name and password
    var isValid = true;

    if(!isValid)
    {
        return this.Request.CreateErrorResponse(
            HttpStatusCode.Forbidden, 
            String.Format(null, "The password provided for {0} is not valid.", userName)
        );
    }

    return this.Request.CreateResponse(HttpStatusCode.OK);
} 
```

并有这样的注册路线：

```
routes.MapHttpRoute(
    name:           "UserPasswords",
    routeTemplate:  "api/v1/validate",
    defaults:       new { controller = "userpasswords" }
); 
```

您将 POST 表单数据发送到包含您希望验证的用户名和密码的验证端点。Forbidden 状态表示密码无效，如果密码有效则返回 OK 状态。

如果您不熟悉 REST 接口并希望采用务实的方法，我强烈建议您查看[Web API Design - Crafting Interfaces that Developers Love](http://info.apigee.com/Portals/62317/docs/web%20api.pdf)。

# php - Codeigniter form_validation 库错误

> ID：14955581
> 
> 赞同：1
> 
> 时间：2013-02-19T10:49:36.753
> 
> 标签：php, login, controller, codeigniter-2

我是 Codeigniter 的新手，并尝试从教程[codeigniter login](http://www.codefactorycr.com/login-with-codeigniter-php.html)构建登录页面。现在，当我在输入用户名和密码后尝试登录时，出现以下错误。

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义的属性：Verifylogin::$form_validation
> 
> 文件名：控制器/verifylogin.php
> 
> 行号：18

编辑：

我的`verifylogin.php`文件是

```
 <?php

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
class Verifylogin extends CI_Controller
{
    function __construct() {
        parent::__construct();
    }

    function index()
    {
        $this->load->helper(array('form', 'url'));
        $this->load->model('user');
        $this->load->library('form_validation');

        //$this->load->library('form_validation', 'form_validation', true/false);

        $this->form_validation->set_rules('username','Username','trim|required|xss_clean');
        $this->form_validation->set_rules('password','Password','trim|required|xss_clean|callback_check_database');

        if($this->form_validation->run() == FALSE)
        {
            redirect('login','refresh');
        }
        else
        {
            redirect('home','refresh');
        }
    }

    function check_database($password)
    {
        $username = $this->input->post('username');
        $this->load->model('user');
        $result = $this->user->login($username,$password);

        if($result)
        {
            $sess_array = array();
            foreach($result as $row)
            {
                $sess_array = array('id'=>$row->id,'username'=>$row->username);

                $this->session->set_userdata('logged_in',$sess_array);
            }
            return TRUE;
        }
        else {
            $this->form_validation->set_message('check_database','Invalid username or password');
        }
    }
}
?> 
```

也是这个`form_validation.php`文件所在的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:14:42.223

请将所有这些代码从 index() 函数移动到构造函数，

```
$this->load->helper(array('form', 'url'));
$this->load->model('user');
$this->load->library('form_validation'); 
```

因为您也在 check_database() 函数中使用 form_validation 库。

它现在应该可以工作了。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T07:33:01.610

你能把你的 login.php 和 home.php 放在你的问题中吗？

我认为你应该使用这个

```
$this->load->view('login'); 
```

尽管如此

```
redirect('login','refresh'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:01:11.163

在使用表单验证之前，您必须调用辅助函数表单

`$this->load->helper(array('form', 'url'));`

在调用表单验证库之前使用它

# amazon-cloudwatch - AWS Cloud watch 警报，使用多个指标触发自动缩放

> ID：14955583
> 
> 赞同：10
> 
> 时间：2013-02-19T10:49:43.157
> 
> 标签：amazon-cloudwatch

我想创建一个基于多个指标数据触发自动缩放的云监视警报。由于 Cloud Watch 本身不支持此功能（如果我错了，请纠正我）。我想知道如何克服这一点。

我们是否可以从不同的指标（例如 CPUUtilization、NetworkIn、NetworkOut）中获取数据，然后使用 mon-put-data 创建自定义指标并输入这些数据以创建新的指标以触发自动缩放？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T12:35:12.967

是的.. Cloudwatch 警报只能在单个 Cloudwatch 指标上触发，因此您需要根据自己的建议发布自己的“聚合”自定义指标和警报。

这是一篇博客文章，描述了使用自定义指标来触发自动缩放。

[http://www.thatsgeeky.com/2012/01/autoscaling-with-custom-metrics/](http://www.thatsgeeky.com/2012/01/autoscaling-with-custom-metrics/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-09-14T02:35:47.883

您现在可以使用 CloudWatch Metric Math。

> 指标数学使您能够查询多个 CloudWatch 指标并使用数学表达式基于这些指标创建新的时间序列。您可以在 CloudWatch 控制台中可视化生成的时间序列并将它们添加到仪表板。

有关此处提供的度量数学语法和函数的更多信息： [https ://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/using-metric-math.html#metric-math-syntax](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/using-metric-math.html#metric-math-syntax)

但是，需要注意的是没有逻辑运算符，您必须使用算术函数才能退出。

为了帮助遇到问题的人，发布一个示例：假设您想在 CPUUtilization < 20% 和 MemoryUtilization < 30% 时触发警报。

```
m1 = Avg CPU Utilization % for 5mins
m2 = Avg Mem Utilization % for 5mins 
```

然后：

```
Avg. CPU Utilization % < 20  for 5 mins AND Avg Mem Utilization % < 30 for 5mins   ... (1) 
```

和

```
(m1 - 20) / ABS([m1 - 20]) + (m2 - 30) / ABS([m2 - 30]) < 0   ... (2) 
```

因此，定义您的两个指标并构建一个指标查询，该查询类似于上面等式 (2) 的 LHS。将您的阈值设置为`0`并将比较运算符设置为`LessThanThreshold`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-11T16:01:29.567

现在支持这个。您可以检查 [https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/using-metric-math.html](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/using-metric-math.html)是否相同。

例如，您可以使用 (CPU Utilization>80) OR (MEMORY Consumed>55)

# java - JNI从c程序调用java方法

> ID：14955584
> 
> 赞同：2
> 
> 时间：2013-02-19T10:49:49.607
> 
> 标签：java, c, java-native-interface

我需要从 c 程序调用 java 方法。我试过下面的代码通过Java本机接口调用java方法，但在编译时遇到问题。我是 C 新手，有 java 经验。所以，我无法思考自己在创建 JVM 时发生了什么。

下面是代码。

```
CTest.c
#include <stdio.h>
#include <jni.h>

JNIEnv* create_vm() {
    JavaVM* jvm;
    JNIEnv* env;
    JavaVMInitArgs args;
    JavaVMOption options[1];
    args.version = JNI_VERSION_1_6;
    args.nOptions = 1;
    options[0].optionString = "-Djava.class.path=D:\\Ashish_Review\\JNI\\src";
    args.options = options;
    args.ignoreUnrecognized = JNI_FALSE;

    JNI_CreateJavaVM(&jvm, (void **)&env, &args);
    return env;
}

void invoke_class(JNIEnv* env) {
    jclass helloWorldClass;
    jmethodID mainMethod;
    jobjectArray applicationArgs;
    jstring applicationArg0;

    helloWorldClass = (*env)->FindClass(env, "HelloWorld");

    mainMethod = (*env)->GetStaticMethodID(env, helloWorldClass, "main", "([Ljava/lang/String;)V");

    applicationArgs = (*env)->NewObjectArray(env, 1, (*env)->FindClass(env, "java/lang/String"), NULL);
    applicationArg0 = (*env)->NewStringUTF(env, "From-C-program");
    (*env)->SetObjectArrayElement(env, applicationArgs, 0, applicationArg0);

    (*env)->CallStaticVoidMethod(env, helloWorldClass, mainMethod, applicationArgs);
}

int main(int argc, char **argv) {
    JNIEnv* env = create_vm();
    invoke_class( env );
}

C:\Users\Desktop\tcc>tcc C:\TurboC++\Disk\TurboC3\BIN\CTest.c -I "C:\Program Files\Java\jdk1.6.0_16\include" -I "C:\Program Files\Java\jdk1.6.0_16\include\win32" -shared -o CTest.dll
tcc: undefined symbol '_JNI_CreateJavaVM@12' 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:16:48.453

错误消息是关于链接阶段，而不是编译 - 您已包含头文件，但要创建可执行文件，您还必须指定 .a （库文件）。

您必须链接到 JVM 的库（在 tcc 的命令行中添加一些对 libjvm.a 的引用）。

如果您没有 TurboC++ 的预编译 jvm.lib 文件，还有另一个选项 - 链接 jvm.dll 文件并手动从 JVM 导出所有方法。这使用 LoadLibrary/GetProcAddress 函数。

对于一个简短的示例（抱歉，找不到完整的导出源代码），请看这个：

```
/* load library */
HMODULE dll = LoadLibraryA("jvm.dll");

/* declare a function pointer and initialize it with the "pointer" to dll's code */
JNI_CreateJavaVM_func JNI_CreateJavaVM_ptr = GetProcAddress(dll, "JNI_CreateJavaVM"); 
```

稍后使用 JNI_CreateJavaVM_ptr 代替 JNI_CreateJavaVM。此外，您必须声明`JNI_CreateJavaVM_func`类型 - 您可能只需从“jni.h”复制签名

# tcp - 如何在java中使用rtp over tcp发送/接收数据文件

> ID：14955587
> 
> 赞同：2
> 
> 时间：2013-02-19T10:49:54.990
> 
> 标签：tcp, rtp

我想写一个应用程序可以在java中对等传输文件。有人知道在java中使用rtp over tcp发送/接收数据文件的开源吗？请帮帮我，非常感谢！

# mysql - 如何为这种情况进行mysql查询

> ID：14955590
> 
> 赞同：3
> 
> 时间：2013-02-19T10:50:02.887
> 
> 标签：mysql, sql, mysql-5.5

我让我的真实案例更简单。

案子：

有多条曲线，它们以点的形式传递，每条曲线都有最后的 1 个点。数据库中的最终点表示为曲线的最大 point_order 值。

应该找到通过特定点并具有相同最终点（相同 point_id）的曲线

案例（表）：

积分表：

```
point_id|x|y 
```

**编辑：**

curve_points 表示例 - 查找所有具有相同 point_id=80 和相同终点的曲线：

```
id|curve_id|point_id|point_order
  |119     |6       |12
  |119     |80      |9
  |119     |1000    |1
  |76      |80      |7
  |76      |6       |9
  |76      |2       |2
  |90      |80      |7
  |90      |6       |9
  |90      |99      |15 
```

输出结果应该是：

```
 |curve_id|
  |119     | 
  |76      | 
```

因为曲线 119,76 具有相同的终点 = 6 并且具有相同的点 80。曲线 90 不是因为点 6 不是他的终点

psedocode 函数 -**需要添加代码以选择相同的最终点**：

```
function findCurvesForSamePointAndSameFinalPoint(pointID){
    query="SELECT curve_id FROM curve INNER JOIN point GROUP BY curve_id HAVING point_id="+pointID+";";
    return getDATABASEResult(query);  
} 
```

Edit2：在线 sql 与一些数据进行测试：[http](http://sqlfiddle.com/#!2/59e9f/1) ://sqlfiddle.com/#!2/59e9f/1 （那里的现有查询不起作用）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:17:14.633

如果我做对了。它是这样的：

[SQLFiddle 演示](http://sqlfiddle.com/#!2/34268/9)

```
select distinct c1.curve_id,(select point_id from curve t1
       where t1.curve_id=c1.curve_id 
       order by point_order desc 
       limit 1)
TheLastPoint

from curve c1
join curve c2 on
(select point_id from curve t1
       where t1.curve_id=c1.curve_id 
       order by point_order desc 
       limit 1)
=
(select point_id from curve t2 
       where t2.curve_id=c2.curve_id 
       order by point_order desc 
       limit 1)
And c1.curve_id<>c2.curve_id

where c1.curve_id in (select curve_id from curve where point_id=80)
      and 
      c2.curve_id in (select curve_id from curve where point_id=80)
order by TheLastPoint,c1.curve_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:29:57.610

首先我想问一下，曲线表是如何与点表建立关系的？必须有 REDUNDANT Curve_ids 才能将它们与点表映射。

如果可以更改数据库结构，则可以使用 MySQL [Geometry](http://dev.mysql.com/doc/refman/5.0/en/gis-class-geometry.html)，它内置了[Point](http://dev.mysql.com/doc/refman/5.0/en/gis-class-point.html)和[Curve](http://dev.mysql.com/doc/refman/5.0/en/gis-class-curve.html)等类。您可以使用内置功能检查两条曲线是否[交叉](http://dev.mysql.com/doc/refman/4.1/en/functions-that-test-spatial-relationships-between-geometries.html)等等。

[我发现这个是相关的。](https://stackoverflow.com/questions/4604430/mysql-great-circle-intersection-do-two-roads-cross)

# java - 仅在运行时知道类型时使用 Java 泛型

> ID：14955593
> 
> 赞同：1
> 
> 时间：2013-02-19T10:50:14.273
> 
> 标签：java, generics

考虑以下代码：

```
public class Generics {
    C c; // initialized at runtime

    public void testGenericsCall(Object o) {
        c.myMethod(o);
    }
}

class C<E> {
    public void myMethod(E input) {
    }
} 
```

这是有效的，但我收到警告，因为参数化类 C 与原始类型一起使用。我不能使用像这样的声明

```
C<String> c; 
```

因为只有在运行时才知道 C 的类型。我也无法向泛型类添加类型参数，因为我需要在知道 C 的类型之前创建此类的对象。声明

```
C<?> c; 
```

或者

```
C<? extends Object> c; 
```

对于编译器来说可以，但是方法 testGenericsCall 无法编译（*“实际参数 java.lang.Object 无法通过方法调用转换转换为捕获#1？”*）

处理这种情况的最佳方法是什么？

**编辑**：请注意，当我实际（在运行时）创建 C 的实例时，我知道它的类型参数，这部分代码是类型安全的并且运行良好。在实际代码中，我没有单个“C”类，而是一系列相互关联的类，并且泛型肯定是有用的（即使在这个简化的示例中这并不明显 - 所以请不要只告诉我不要使用泛型:)。我已经有了编译时类型安全，但不是在这里，而是在 C 和其他类之间（这里没有显示）。

我看到在这种情况下我无法在编译时检查类型参数，这就是我尝试声明它的原因 `C<?> c`。在这里**，我只是在寻找在没有编译器警告的情况下桥接通用代码和非通用代码的最佳方法。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:56:26.843

由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，无法在运行时使用泛型。您必须通过检查类型或任何东西（可能是反射）以编程方式处理您的数据类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T06:12:29.220

你能行的。但是通过肮脏的伎俩和反思。例如看下面的代码。礼貌[在这里](http://code.google.com/p/dirty-mockito/source/browse/tags/dirty-mockito-0.4/src/main/java/dirty/mockito/ParameterizedTest.java)：

```
class ParameterizedTest<T> {

/**
 * @return the type parameter to our generic base class
 */
@SuppressWarnings("unchecked")
protected final Class<T> determineTypeParameter() {
    Class<?> specificClass = this.getClass();
    Type genericSuperclass = specificClass.getGenericSuperclass();
    while (!(genericSuperclass instanceof ParameterizedType) && specificClass != ParameterizedTest.class) {
        specificClass = specificClass.getSuperclass();
        genericSuperclass = specificClass.getGenericSuperclass();
    }
    final ParameterizedType parameterizedType = (ParameterizedType) genericSuperclass;

    final Type firstTypeParameter = parameterizedType.getActualTypeArguments()[0];
    return (Class<T>) firstTypeParameter;
}

}

//change the type of PrameterizedTest<Integer> to Parameterized<String> or something to    display different output
public class Test extends ParameterizedTest<Integer>{
 public static void main(String... args){
    Test test = new Test();
    System.out.println(test.determineTypeParameter());
} 
```

}

在运行时，您将获得类型参数。因此，在您的类中，您将不得不定义一个`Class`对象来获取类，如上所述。然后使用`Class.newInstance`你得到一个新的对象。但是您将不得不手动处理类型转换等。

> 问题是：这一切值得吗？

根据我的说法不，因为可以通过在泛型类型中使用边界并与绑定类型接口来避免大多数情况

# maven - 命令式与声明式构建系统

> ID：14955597
> 
> 赞同：40
> 
> 时间：2013-02-19T10:50:24.507
> 
> 标签：maven, ant, gradle

我最近开始使用 Gradle 作为构建系统。Gradle 与 Ant 和 Maven 之类的第一个比较是，Ant 是***命令式***构建系统，而 Maven 是***声明***式构建系统。而 Gradle 是一个*声明*式构建系统，没有 Maven 强制执行的刚性。

在谈论构建系统时，我想更好地理解这些*声明性*和*命令性术语。*

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-19T10:53:44.500

简而言之，一个 ant 脚本**告诉 ant 工具该做什么**——“编译这些文件，然后将它们复制到那个文件夹。然后获取这个文件夹的内容并创建一个存档。”

虽然 maven`pom`声明**了我们希望得到的结果**- “这是项目所依赖的库的名称，我们希望生成一个 Web 存档”。Maven 知道如何获取库以及在哪里可以找到它自己的源类。

虽然 ant 为您提供了更大的灵活性，但它也迫使您不断地重新发明轮子。

另一方面，Maven 需要较少的配置，但可能会感觉过于受限，特别是如果您习惯了不同的工作流程。

**编辑：** ant-maven 比较的一个重要方面是 maven 有一个**约定**，描述文件应该在哪里，在哪里找到依赖项，在哪里放置生成的工件，而 ant 没有。

因此，您可以将使用 maven 想象为乘坐公共汽车 - 您选择进入的站点和离开的站点。使用 ant 就像开车一样——你必须自己动手。您不必告诉巴士司机该做什么，但停靠站可能离您想去的地方太远。

**EDIT2：** “重新发明轮子”的比喻似乎没有我希望的那么清楚。这就是我的意思：

如果没有合理的默认/约定，您必须为每个项目明确定义项目结构和构建生命周期，这通常使其成为品味和意见的问题。由于团队和公司之间的偏好不同，因此构建流程也是如此。这需要新项目成员和后来的维护者付出更多的认知努力。根据开发人员的经验和专业知识，最终的解决方案可能难以扩展和使用。

正如我在下面的评论中所说，虽然存在 ant 构建的最佳实践，但它们仍然必须为每个项目实施，或者从一个项目复制粘贴到另一个项目，而不是成为构建的开箱即用默认值工具本身。

对于我的口味，Maven 在权衡的另一边有点过分了。更改默认值并不像它可以而且应该那样容易。

# java - 无法启动可搜索的活动

> ID：14955599
> 
> 赞同：0
> 
> 时间：2013-02-19T10:50:24.580
> 
> 标签：java, android, search, android-activity

内置搜索的清单代码，使用搜索视图。谁能告诉我它有什么问题？SearchableActivity 在 scr -> 表示中创建，它使用名为 search.xml 的 xml 布局。我是 android 新手，无法找出我的代码有什么问题。当启动搜索视图输入一个单词并按下键盘上的“Go”时，调试器会打开一个 ActivityThread.perfor.... 并告诉我找不到源。

这是我的洞 manifest.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="myTV.Android"
android:versionCode="4"
android:versionName="1.12" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="12" />

<uses-feature
    android:name="com.google.android.tv"
    android:required="true" />
<uses-feature
    android:name="android.hardware.touchscreen"
    android:required="false" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

<application
    android:icon="@drawable/mytv"
    android:label="@string/app_name"
    android:theme="@style/Theme.Transparent" >
    <activity android:name="myTV.Presentation.Main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="myTV.Presentation.Player" >
    </activity>
    <activity android:name="myTV.Presentation.VODCatalogGenre" >
    </activity>
    <activity android:name="myTV.Presentation.VODCatalog" >
    </activity>
    <activity android:name="myTV.Presentation.HomePage" >
    </activity>
    <activity android:name="myTV.Presentation.Programs" >
    </activity>
    <activity android:name="myTV.Presentation.Episodes" >
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>
    </activity>
    <activity android:name="myTV.Presentation.ChannelsListing" >
    </activity>
    <activity android:name="myTV.Presentation.Packages" >
    </activity>
    <activity android:name="myTV.Presentation.SpecialOfferContent" >
    </activity>
    <activity android:name="myTV.Presentation.linkedpage" >
    </activity>
    <activity android:name="myTV.Presentation.howtolinkdevice" >
    </activity>
    <activity android:name="myTV.Presentation.OnlineRegister" >
    </activity>
    <activity android:name="myTV.Presentation.SpecialOffer" >
    </activity>
    <activity android:name="myTV.Presentation.MyVOD" >
    </activity>
    <activity android:name="myTV.Presentation.SearchEpisodes" >
    </activity>
    <activity android:name=".Countries" />
    <activity android:name=".Genres" />
    <activity android:name=".WeeklyRecap" />

    <meta-data
        android:name="android.app.default_searchable"
        android:value=".SearchableActivity" />
    <activity android:name=".SearchableActivity" > 
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
        </intent-filter>

        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
    </activity>
</application> 
```

```
 import myTV.Android.R;
    import android.app.Activity;
    import android.app.SearchManager;
    import android.content.Context;
    import android.content.Intent;
    import android.os.Bundle;
    import android.widget.Toast;

    public class SearchableActivity extends Activity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search);

    // Get the intent, verify the action and get the query
    Intent intent = getIntent();
    if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
      String query = intent.getStringExtra(SearchManager.QUERY);
      doMySearch(query);
    }
}
public void doMySearch(String query){
    //new Request().Search(query);
    //new SearchEpisodes().Search(query);
    Context context = getApplicationContext();
    CharSequence text = query;
    int duration = Toast.LENGTH_LONG;

    Toast toast = Toast.makeText(context, text, duration);
    toast.show();
}

    } 
```

这是我的 searchable.xml：

```
 <searchable xmlns:android="http://schemas.android.com/apk/res/android"
        android:label="@string/app_name"
        android:hint="@string/SearchHint" >
</searchable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:53:00.987

我认为，您的活动在您的应用程序之外不可见。

试试`android:exported="true"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:56:13.350

尝试在您的`<intent-filter>`.

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" /> 
```

# html - 为什么我需要 HTML5 音频库？

> ID：14955600
> 
> 赞同：2
> 
> 时间：2013-02-19T10:50:24.833
> 
> 标签：html, html5-audio

我注意到有很多库可以播放 HTML5 音频，但 HTML5 音频的整个想法不是我们不需要库才能正常工作吗？

如果我不需要 Flash 后备，而是一个简单的流式音乐解决方案（我自己的），也可以一个接一个地播放每首曲目，那么我是否需要像[jPlayer](http://www.jplayer.org/)或[Soundmanager2](http://www.schillmania.com/projects/soundmanager2/)这样的库？

我知道我需要不同的音频格式，但这不是问题，因为我不会有很多在线曲目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:14:19.877

您可以直接使用 HTML5，但您很快就会意识到这有很多问题。

图书馆之类的 jPlayer（顺便说一句很棒）解决了许多常见问题，如浏览器支持、优化和后备等。

如果您想自己编写所有代码，但是一个流行的库将向前飞跃，这是明智的选择。

事实是，HTML5 提供了非常强大的功能，但目前它的支持很薄弱。这一切都是为了让您的生活更轻松！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:56:44.547

HTML5 音频的“整体理念”是最终用户和网页作者不需要依赖浏览器*插件*来播放音频——该功能应该包含在浏览器中，并且可以直接通过标准化的 HTML/JavaScript 进行控制。

我没有使用 HTML5 音频库，但查看 jPlayer 和 Soundmanager2 主页，看起来它们提供的主要功能是为不支持 HTML5 音频的浏览器提供后备功能。

我怀疑他们可能还有一些用于播放音频的内置自定义 UI，以防您不喜欢浏览器提供的本机音频控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:34:53.750

在这一点上，HTML-5 音频实际上包含了两个不同的派别。一个是音频标签，另一个是 Web Audio API。前者是一种播放嵌入音频文件的快速机制，后者是一种以低延迟方式播放、处理和操作音频的方式，适用于游戏开发和更专业的环境，其中混响效果、过滤器、“3D”等功能需要声音和其他特性。但要回答您的问题，使用 HTML 5 音频标签库的唯一真正原因是（在我看来）浏览器之间的向后兼容性以及多镜头文件触发和事件处理等操作的易用性。

# wpf - WPF数据网格在绑定到带有数据的集合后无法添加行

> ID：14955601
> 
> 赞同：2
> 
> 时间：2013-02-19T10:50:32.940
> 
> 标签：wpf, binding, datagrid, observablecollection

我有一个带有多个数据网格的 wpf 应用程序，所有数据网格都绑定到单独的自定义对象的 ObservableCollections。当集合为空时，我看到一个空白行，我可以添加数据。

但是，当我以编程方式（从 XML 读取）将对象添加到集合中时，其中一个数据网格不会显示空白行并且不允许我添加数据，而其他数据网格则可以。

我已经检查了所有对象的 cunstructors 是否是公共的，并且在我将对象添加到集合之后以编程方式刷新所有数据网格。所有数据网格都将属性 CanUserAddRows 设置为 true。

有没有人知道可能是什么原因？我在这里通过搜索找不到任何答案。

JW

# xpath - 中间有断点的 Xpath 表达式

> ID：14955603
> 
> 赞同：2
> 
> 时间：2013-02-19T10:50:41.263
> 
> 标签：xpath

我有以下代码

```
<tr>
 <td>
  F10_12-03_R1200
  <br/>
  v01.00_Vorgelegt
</td>
</tr> 
```

我必须使用 Xpath 访问它。我试过使用

```
 .//tr/td[contains(text(), 'F10_12-03_R1200')] 
```

哪个有效，但也匹配其他节点。尝试的时候

```
 .//tr/td[contains(text(), 'F10_12-03_R1200') and contains(text(), 'v01.00_Vorgelegt')] 
```

什么都没有。

有什么提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:12:40.473

当我也更改您的 XPath 时：

```
.//tr/td[contains(., 'F10_12-03_R1200') and contains(., 'v01.00_Vorgelegt')] 
```

它在 Altova XML Spy 中输出所需的输出。我已经测试过了。

查看下一个屏幕截图：http: [//i929.photobucket.com/albums/ad134/markdark81/xpath.png](http://i929.photobucket.com/albums/ad134/markdark81/xpath.png)

# ajax - Ajax调用后的Jquery mobile changePage

> ID：14955618
> 
> 赞同：0
> 
> 时间：2013-02-19T10:51:32.983
> 
> 标签：ajax, jquery, jquery-mobile, sap

我有一个问题啊changePage。我想在 Ajax 调用后切换页面。

如果表单得到提交，这个函数会被执行，但是ajax调用后页面不会切换。

如果我想在这个调用上设置一个断点，它不会停止。

我能做什么，我可以在ajax调用后切换页面。

```
$("#serialNumber").submit(function() {
        $.ajax({
            type: "POST",
            url: "mobilemain.do",
            data: "serialNumberInput=" + $("#serialNumberInput").val(),
            success: function(msg)
            {
              $.mobile.changePage("#machine_manuals", "slide");
            }
        });
    }); 
```

* * *

编辑：

好的！我发现了一些提示我的问题。

SAP-Server 调用来自表单提交，而不是来自我的 ajax 调用。他从不采用上述方法。

在我的服务器上，我做到了：

```
l_view = create_view( view_name = 'main.htm').
call_view( l_view ). 
```

但我不想调用 main.htm 。我想调用 jquery 移动项目中的第二页。(main.htm#machine_manuals)

这是如何运作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:06:45.587

除了您要更改的页面之外，$.mobile.changePage 的所有选项都作为对象中的键值对传递。

您的 changePage 应如下所示：

```
$.mobile.changePage("#machine_manuals", {transition: "slide"}); 
```

该方法的文档和可用的选项可以在这里找到：http: [//api.jquerymobile.com/jQuery.mobile.changePage/](http://api.jquerymobile.com/jQuery.mobile.changePage/)

# javascript - IE7 只在新窗口中滚动锚定

> ID：14955622
> 
> 赞同：2
> 
> 时间：2013-02-19T10:51:38.007
> 
> 标签：javascript, anchor, internet-explorer-7

我有一个包含选项卡式窗格的页面（**pageA**），每个窗格的内容由 DIV 元素表示，并且它具有唯一的 ID，例如 id="tab1"

```
<div id="tab1">Contents of tab</div> 
```

我有另一个页面（**pageB**），其中有一个链接到特定选项卡的 A 元素

```
<a href="otherpage.html#tab2">Tab 2</a> 
```

在带有选项卡的 IE7 **pageA上，只有当我从****pageB**在新窗口中打开链接时才会滚动

 **有没有人遇到过这个问题并知道如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T08:25:21.567

我注意到 IE7 中的锚正在构造的 url 无效：

```
<a href='#skipNav'>Skip</a> -> <url>/#/skipNav 
```

所以最简单的解决方案是在锚点中放置一个带有 # 的完整 url。这将防止 IE7 从头开始​​构建它（url 应该是服务器端生成的，以避免 Dev/Test/Qa/Prd 转换问题）：

```
<a href='<url>/#skipNav'>Sip</a> 
```

~~编辑：如果仍然发生错误，请尝试添加随机查询字符串。这是一个肮脏的解决方案，但在 IE7 中什么不脏~~

编辑：这是另一种方法的一个很好的例子：[window.location = #anchor 在 IE 中不起作用](https://stackoverflow.com/questions/1173394/window-location-anchor-doesnt-work-in-ie) 简而言之：

```
 <a href="#" onclick="window.scrollTo(0, 0); return false;'">Back to top</a> 
```**

# c++ - 使用 -O3 优化和奇数间距填充 16bpp 图像时崩溃

> ID：14955623
> 
> 赞同：9
> 
> 时间：2013-02-19T10:51:42.493
> 
> 标签：c++, optimization, g++

我编写了一个非常简单的代码来用一个常数值（1024）填充一个 32x32 16bpp 图像。图像缓冲区由`std::vector`. 我的图像的**间距/步幅**（即两个连续行之间的字节数）大到足以容纳一整行，但**设置为奇数**。这是我的代码：

```
#include <vector>
#include <stdint.h>

int main()
{
  int width = 32;
  int height = 32;
  int pitch = width * 2 + 1;

  std::vector<uint8_t> image(height * pitch);
  uint8_t* buffer = &image[0];

  for (int y = 0; y < height; y++)
  {
    uint16_t* p = reinterpret_cast<uint16_t*>(buffer + y * pitch);
    for (int x = 0; x < width; x++, p++)
    {
      *p = 1024;
    }
  }
} 
```

我正在使用带有 gcc 4.6.1（Ubuntu 11.10）的 Linux x86_64。代码在`-O0`,`-O1`和`-O2`优化级别下运行良好。Valgrind 不报告任何访问冲突。但是，一旦我切换到`-O3`或使用**`-ftree-vectorize`auto-vectorization 选项**，程序就会崩溃：

```
# g++ -g -O3 ./test.cpp -Wall -pedantic && ./a.out
Segmentation fault

# g++ -g -O2 -ftree-vectorize ./test.cpp -Wall -pedantic && ./a.out
Segmentation fault 
```

gdb 和 valgrind 都没有提供任何有用的信息：

```
# valgrind ./a.out
==3840== Memcheck, a memory error detector
==3840== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==3840== Using Valgrind-3.6.1-Debian and LibVEX; rerun with -h for copyright info
==3840== Command: ./a.out
==3840== 
==3840== 
==3840== Process terminating with default action of signal 11 (SIGSEGV)
==3840==  General Protection Fault
==3840==    at 0x4005B3: main (test.cpp:18)
==3840== 
==3840== HEAP SUMMARY:
==3840==     in use at exit: 2,080 bytes in 1 blocks
==3840==   total heap usage: 1 allocs, 0 frees, 2,080 bytes allocated
==3840== 
==3840== LEAK SUMMARY:
==3840==    definitely lost: 2,080 bytes in 1 blocks
==3840==    indirectly lost: 0 bytes in 0 blocks
==3840==      possibly lost: 0 bytes in 0 blocks
==3840==    still reachable: 0 bytes in 0 blocks
==3840==         suppressed: 0 bytes in 0 blocks
==3840== Rerun with --leak-check=full to see details of leaked memory
==3840== 
==3840== For counts of detected and suppressed errors, rerun with: -v
==3840== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 4 from 4)
Segmentation fault 
```

`-m32`当我使用gcc 标志切换到 32 位二进制文​​件时，不会发生崩溃。如果我使用均匀的音高（例如`pitch = width * 2 + 2`），它也不会发生。谁能帮我发现我在代码中犯的（当然是愚蠢的）错误？提前谢谢了！

* * *

**更新：**正如乔纳森所建议的，我刚刚向 GCC 开发人员报告了这个问题： [http ://gcc.gnu.org/bugzilla/show_bug.cgi?id=56392](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56392)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T12:10:57.870

我的问题已由 Richard Blener 在[gcc Bugzilla](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56392)上回答：

> “您正在取消引用指向 uint16_t 的指针，该指针对于该类型没有充分对齐。C 标准禁止这样做，导致未定义的行为。”

然而，在我看来，应该对这种未定义的行为产生警告。另请注意，@jmetcalfe 在对这篇文章的评论中也给出了这种解释。

# haskell - 在复制其余字段时分配记录中的单个字段的简写方式？

> ID：14955627
> 
> 赞同：136
> 
> 时间：2013-02-19T10:51:46.297
> 
> 标签：haskell, record

假设我有以下记录 ADT：

```
data Foo = Bar { a :: Integer, b :: String, c :: String } 
```

我想要一个函数，它接受一条记录并返回一条记录（相同类型），其中除了一个字段之外的所有字段都与作为参数传递的字段具有相同的值，如下所示：

```
walkDuck x = Bar { a = a x, b = b x, c = lemonadeStand (a x) (b x) } 
```

上述工作，但是对于具有更多字段（例如`10`）的记录，创建这样的函数将需要大量输入，我认为这是非常不必要的。

有没有更乏味的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2013-02-19T10:54:42.023

是的，有一种更新记录字段的好方法。在 GHCi 中，你可以这样做——

```
> data Foo = Foo { a :: Int, b :: Int, c :: String }  -- define a Foo
> let foo = Foo { a = 1, b = 2, c = "Hello" }         -- create a Foo
> let updateFoo x = x { c = "Goodbye" }               -- function to update Foos
> updateFoo foo                                       -- update the Foo
Foo {a = 1, b = 2, c = "Goodbye" } 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-02-19T14:57:59.710

这是[镜头](http://hackage.haskell.org/packages/archive/fclabels/1.1.4.3/doc/html/Data-Label.html#g:2)的好工作：

```
data Foo = Foo { a :: Int, b :: Int , c :: String }

test = Foo 1 2 "Hello" 
```

然后：

```
setL c "Goodbye" test 
```

会将“test”的字段“c”更新为您的字符串。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2018-08-17T15:33:22.150

您无需定义辅助功能或使用镜头。标准 Haskell 已经拥有你所需要的。让我们以唐斯图尔特的例子为例：

```
data Foo = Foo { a :: Int, b :: Int , c :: String }

test = Foo 1 2 "Hello" 
```

然后你可以说`test { c = "Goodbye" }`获取更新的记录。

# mysql - MYSQL 更新为选择 3 个表

> ID：14955628
> 
> 赞同：2
> 
> 时间：2013-02-19T10:51:46.870
> 
> 标签：mysql

我使用这个查询（插入到选择 3 个表中）将我的行插入到 mysql 表中。

```
"INSERT INTO test (catid_1, descat_1, catid_2, descat_2, id_user, user)
 SELECT '$_POST[cat_1]',t1.desc AS descat_1, '$_POST[cat_2]', t2.desc AS descat_2, 
 $_POST[id_user]',t3.user FROM t1, t2, t3 
 WHERE t1.idcat_1='$_POST[cat_1]' and t2.idcat_2='$_POST[cat_2]' 
 and t3.id_user='$_POST[id_user]'"; 
```

现在我想使用相同的逻辑来更新 mysql 表中的行（更新到选择 3 表）。

表结构

```
t1
`idcat_1` int(11) NOT NULL AUTO_INCREMENT,
`desc` varchar(100) NOT NULL,
PRIMARY KEY (`idcat_1`)

t2
`idcat_2` int(11) NOT NULL AUTO_INCREMENT,
`idcat_1` int(11) NOT NULL,
`desc` varchar(100) NOT NULL,
PRIMARY KEY (`idcat_2`)

t3
`id_user` int(11) NOT NULL AUTO_INCREMENT,
`user` varchar(40) NOT NULL,
PRIMARY KEY (`id_user`) 
```

有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T10:55:02.477

像这样：

```
UPDATE test AS t
INNER JOIN t1 ON -- join conditon
INNER JOIN t2 ON ...
INNER JOIN t3 ON ... 
SET t.catid_1 = '$_POST[cat_1]',
    t.descat_1 = t1.desc,
    ....
 WHERE t1.idcat_1='$_POST[cat_1]' 
   and t2.idcat_2='$_POST[cat_2]' 
   and t3.id_user='$_POST[id_user]' 
```

不清楚这四个表是如何连接的，您需要为每个表提供连接条件`JOIN`。

* * *

## 更新 1

从您刚刚在更新问题中发布的表格结构来看，这三个表格似乎都不是`test`，`t1`也不是通过任何键`t2`与表格相关。`t3`在此键中，您不需要加入此表，`t3`只需加入表和。假如说：`test``t1``t2`

*   `test`与`t1`相关`test.catid_1 = t1.idcat_1`。
*   `t1`与`t2`相关`t1.idcat_1 = t2.idcat_1`。

像这样：

```
UPDATE test AS t
INNER JOIN t1 ON t.catid_1 = t1.idcat_1
INNER JOIN t2 ON t1.idcat_1 = t2.idcat_1
SET t.catid_1 = '$_POST[cat_1]',
    t.descat_1 = t1.desc,
    ....
 WHERE t1.idcat_1='$_POST[cat_1]' 
   and t2.idcat_2='$_POST[cat_2]' 
```

# javascript - jQuery-UI 可拖动错误“无法调用 init 之前的方法”，更新到版本 1.10.1

> ID：14955630
> 
> 赞同：10
> 
> 时间：2013-02-19T10:51:53.017
> 
> 标签：javascript, jquery, jquery-ui, upgrade

我在使用 jQuery-UI 1.8.2 时可以很好地使用可拖动插件，然后我更改为 1.10.1。我发现的主要区别是在启用和禁用插件时，我不再需要使用：

```
$this.draggable('option', 'disabled', true); 
```

但可以简单地使用

```
$this.draggable('disable'); 
```

但后来我意识到还有另一个问题。我收到了这个错误，它弄乱了我的整个程序，我不知道如何解决它：

> 错误：在初始化之前无法调用可拖动的方法；试图调用方法“启用”

为了解决这个问题，我确保我总是`$this.draggable('enable');`在任何进一步的选择之前打电话，但这并没有什么不同。有什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-20T08:55:43.653

你的错误的意思是：`$this.draggable('enable');`之前调用过`$this.draggable();`。

检查你的程序的执行流程：确保你确实`$this.draggable();`在尝试对它做任何事情之前初始化了插件（例如：被调用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-16T02:39:46.303

扩展 LeGEC 所说的话……

`$this.draggable();`之前被调用`$this.draggable('enable');`

对我来说，解决方案是像这样链接事件......

```
$this.draggable().draggable('disable'); 
```

首先声明 $this 是可拖动的，然后声明它是禁用的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-26T08:29:19.557

从 jquery 1.6.1 升级到 1.9.1 时我遇到了类似的问题

```
var tr$ = $('<tr>', { draggable: 'true' }); 
```

抛出“无法在初始化之前调用可拖动的方法”

修改为：

```
var tr$ = $('<tr>');
if(!('draggable' in document.createElement('span'))) {
  //handle old browsers                
} else {
  tr$.attr('draggable', 'true');
} 
```

发布以防它帮助其他人以这种方式看到它。

# jquery - jquery隐藏表单必填字段

> ID：14955632
> 
> 赞同：1
> 
> 时间：2013-02-19T10:52:02.820
> 
> 标签：jquery, magento

我为 2 种类型的 reg（私人和学校）创建了注册表单，我在一页和 2 个单选按钮中为所有类型创建了表单。当用户更改私有注册而不是通过 jquery 隐藏的学校注册表格并显示私有注册表格时。但是当我尝试注册为私人并填写所有字段时，我看到错误“需要电子邮件”我认为是因为学校注册的另一个表格（未填写的字段“电子邮件”）被隐藏了。我该如何解决这个问题？谢谢

学校和私人注册表格中的电子邮件字段示例

```
 <li>
                <label for="email_address" class="required"><em>*</em><?php echo $this->__('Email') ?></label>
                <div class="input-box">
                    <input type="text" name="email" id="email_address" value="<?php echo $this->escapeHtml($this->getFormData()->getEmail()) ?>" title="<?php echo $this->__('Email Address') ?>" class="input-text validate-email required-entry" />
                </div>
   </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:46:48.243

单击私人删除所需的课程，并单击学校添加所需的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:18:55.750

谢谢！！通过添加jquery来提交按钮onclick解决了这个问题

```
 onclick="if($('#address_type_private').is(':checked')) {jQuery('.school_field').remove();} else {jQuery('.priv_field').remove();}" 
```

# algorithm - 在数组中出现超过 n/3 次的数字

> ID：14955634
> 
> 赞同：13
> 
> 时间：2013-02-19T10:52:09.027
> 
> 标签：algorithm

我读过这个问题 [Find the most common entry in an array](https://stackoverflow.com/questions/278488/puzzle-find-the-most-common-entry-in-an-array)

jon skeet 的回答令人兴奋.. :)

现在我正在尝试解决这个问题，找到一个在数组中出现超过 n/3 次的元素..

我很确定我们不能应用相同的方法，因为可能有 2 个这样的元素会出现超过 n/3 次，并且会产生错误的计数警报......所以我们有什么办法可以调整 jon skeet 的回答为此工作..？

或者是否有任何解决方案可以在线性时间内运行？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-19T11:14:41.740

[Jan Dvorak 的回答](https://stackoverflow.com/a/14761366/13005)可能是最好的：

*   从两个空的候选槽和两个设置为 0 的计数器开始。
*   对于每个项目：
    *   如果它等于任一候选者，则增加相应的计数
    *   否则，如果有一个空插槽（即计数为 0 的插槽），则将其放入该插槽并将计数设置为 1
    *   否则将两个计数器都减 1

最后，对数组进行第二次遍历，以检查候选者是否确实具有所需的计数。您链接到的问题不允许这样做，但我不知道如何避免此修改版本。如果有一个值出现超过 n/3 次，那么它将在一个槽中，但你不知道它是哪一个。

如果这个问题的修改版本保证有*两个*值超过`n/3`元素（通常，`k-1`值超过`n/k`），那么我们不需要第二遍。但是，当原始问题具有`k=2`1 个保证多数时，我们无法知道我们是否“应该”将其概括为保证 1 个这样的元素或保证`k-1`。保证越强，问题越容易。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-16T07:17:11.883

使用 Boyer-Moore 多数投票算法，我们得到：

```
vector<int> majorityElement(vector<int>& nums) {
    int cnt1=0, cnt2=0;
    int a,b;
    for(int n: nums){
        if (cnt1 == 0 || n == a){
            cnt1++;
            a = n;
        }
        else if (cnt2 == 0 || n==b){
            cnt2++;
            b = n;
        }
        else{
            cnt1--;
            cnt2--;
        }
    }
    cnt1=cnt2=0;
    for(int n: nums){
        if (n==a) cnt1++;
        else if (n==b) cnt2++;
    }
    vector<int> result;
    if (cnt1 > nums.size()/3) result.push_back(a);
    if (cnt2 > nums.size()/3) result.push_back(b);
    return result;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-19T11:05:39.293

您可以使用[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)来查找 n/3 位置和 2n/3 中的数字。

```
n1=Selection(array[],n/3);
n2=Selection(array[],n2/3);
coun1=0;
coun2=0;

for(i=0;i<n;i++)
{
    if(array[i]==n1)
      count1++;
    if(array[i]==n2)
      count2++;
}
if(count1>n)
   print(n1);
else if(count2>n)
   print(n2);
else
   print("no found!"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-26T09:28:14.323

在第 5 行，该`if`语句应该再进行一次检查：

```
if(n!=b && (cnt1 == 0 || n == a)) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-21T06:59:11.150

我使用下面的 Python 解决方案来讨论算法的正确性：

```
class Solution:
    """
    @param: nums: a list of integers
    @return: The majority number that occurs more than 1/3
    """
    def majorityNumber(self, nums):
        if nums is None:
            return None
        if len(nums) == 0:
            return None

        num1 = None
        num2 = None
        count1 = 0
        count2 = 0

        # Loop 1
        for i, val in enumerate(nums):
            if count1 == 0:
                num1 = val
                count1 = 1
            elif val == num1:
                count1 += 1
            elif count2 == 0:
                num2 = val
                count2 = 1
            elif val == num2:
                count2 += 1
            else:
                count1 -= 1
                count2 -= 1

        count1 = 0
        count2 = 0

        for val in nums:
            if val == num1:
                count1 += 1
            elif val == num2:
                count2 += 1

        if count1 > count2:
            return num1

        return num2 
```

首先，我们需要证明声明 A：

**声明 A**：考虑一个列表`C`，其中包含多次`m`出现的多数数`floor(n/3)`。从 3 个不同的数字中删除后`C`，我们有`C'`. `m`是 的多数数`C'`。

**证明**：`R`用于表示`m`中的出现次数`C`。我们有`R > floor(n/3)`. `R > floor(n/3)`=> `R - 1 > floor(n/3) - 1`=> `R - 1 > floor((n-3)/3)`。用于`R'`表示`m`中的出现次数`C'`。并用`n'`来表示 的长度`C'`。由于删除了 3 个不同的数字，我们有`R' >= R - 1`. 并且`n'=n-3`很明显。我们可以`R' > floor(n'/3)`从`R - 1 > floor((n-3)/3)`. `m`多数数也是如此`C'`。

现在让我们证明`loop 1`. 定义`L`为`count1 * [num1] + count2 * [num2] + nums[i:]`。用于`m`表示多数数。

**不变的**

多数数`m`在`L`.

**初始化**

在第一次迭代开始时，`L`是`nums[0:]`. 所以不变量是微不足道的。

**维护**

1.  `if count1 == 0`分支：迭代前，`L`是`count2 * [num2] + nums[i:]`. 迭代后，`L`是`1 * [nums[i]] + count2 * [num2] + nums[i+1:]`。换句话说，`L`没有改变。所以保持不变。

2.  `if val == num1`分支：迭代前，`L`是`count1 * [nums[i]] + count2 * [num2] + nums[i:]`. 迭代后，`L`是 `(count1+1) * [num[i]] + count2 * [num2] + nums[i+1:]`。换句话说，`L`没有改变。所以保持不变。

3.  `f count2 == 0`分支：类似于条件1。
4.  `elif val == num2`分支：类似于条件 2。
5.  `else`branch: `nums[i]`，`num1`并且`num2`在这种情况下彼此不同。迭代后，`L`是`(count1-1) * [num1] + (count2-1) * [num2] + nums[i+1:]`。换句话说，三个不同的数字从 中移出`count1 * [num1] + count2 * [num2] + nums[i:]`。从索赔 A 中，我们知道`m`是 的多数数`L`。因此保持不变。

**终止**

当循环终止时，`nums[n:]`为空。`L`是`count1 * [num1] + count2 * [num2]`。

因此，当循环终止时，多数数是`num1`or `num2`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-07T15:03:23.910

如果数组中有 n 个元素，并且假设在最坏的情况下只有 1 个元素重复 n/3 次，那么选择一个不是重复 n/3 次的数字的概率将为 (2n/3 )/n 即 1/3 ，所以如果我们从大小为“n”的数组中随机选择 N 个元素，那么我们最终选择 n/3 次重复数的概率将至少为 1-(2/3) ^N 。如果我们将其等同于 99.99% 的成功概率，对于任何“n”值，我们将得到 N=23。

因此，只需从列表中随机选择 23 个数字并计算它们的出现次数，如果我们得到大于 n/3 的计数，我们将返回该数字，如果在随机检查 23 个数字后没有得到任何解决方案，则返回 -1；

该算法本质上是 O(n) 因为值 23 不依赖于 n(size of list) ，所以在算法的最坏情况下我们必须遍历数组 23 次。

在 interviewbit(C++) 上接受的代码：

```
 int n=A.size();
  int ans,flag=0;
  for(int i=0;i<23;i++)
  {

int index=rand()%n;
int elem=A[index];
int count=0;
for(int i=0;i<n;i++)
{
    if(A[i]==elem)
    count++;
}

if(count>n/3)
{
    flag=1;
    ans=elem;
}

if(flag==1)
break;
}

if(flag==1)
 return ans;
else return -1;
 } 
```

# c# - 将值运行时设置为组合框

> ID：14955638
> 
> 赞同：0
> 
> 时间：2013-02-19T10:52:24.600
> 
> 标签：c#, combobox

我已经有一个包含四个项目的组合框。我的应用程序在运行时收到这四个项目中的任何一个（一次一个）。如何在运行时使用收到的项目（四个项目之一）设置我的组合框。

这是为了使应用程序有点用户友好。这样用户就不必自己选择了。我知道还有其他方法可以做到这一点，但我希望它像我在第一段中解释的那样工作。

我还添加了它以使其不可编辑。

```
comboBox.DropDownStyle = ComboBoxStyle.DropDownList; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:59:10.943

据我所知，将项目添加到组合框时不会触发任何事件。您可以控制何时添加项目，因此当您的代码添加项目时，它应该触发它自己的事件。

但是，如果您知道添加项目的时间，则可以将其设置为等于最近添加的项目，如下所示：

```
comboBox1.Items.Add(item);
comboBox1.SelectedIndex = comboBox1.Items.Count - 1; 
```

或者如果您可能要删除一些项目，例如：

```
comboBox1.Items.Add(item);
comboBox1.SelectedItem = item; 
```

# header - 标题下方的超大幻灯片

> ID：14955642
> 
> 赞同：1
> 
> 时间：2013-02-19T10:52:38.857
> 
> 标签：header, padding, supersized

我正在使用超大的 jquery 插件来显示全屏背景幻灯片。看看这个网站（它不是我自己的，但我使用的是相同的结构）：

[http://mysampleconcept.com/situs4/](http://mysampleconcept.com/situs4/)

正如你所看到的（例如，如果你给标题一些不透明度）图像从正文的顶部开始。但我希望它们从标题下方开始（这​​样标题就不会覆盖图像的顶部）。

如果你给出超大的 LI，例如 top: 100px; 整个图像向下移动，使图像底部消失在我的页脚下方。所以这不是我想要的解决方案。

所以总而言之，我需要的是图像可以拉伸到最大尺寸，同时仍然在窗口内，而不是拉伸到顶部 100 像素或底部。

我怎样才能做到这一点？

对不起，我的英语不是最好的...

我找到了这个解决方案，但我不知道如何实现它：[https ://stackoverflow.com/a/12889088/1981981](https://stackoverflow.com/a/12889088/1981981)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:12:21.167

您可以使用您提到的问题中提供的解决方案作为起点。只需将它放在文档就绪函数中的 $.supersized() 正下方。由于您需要顶部偏移量，因此我们还必须修改顶部值。我修改了剪辑以满足您的需求：

```
var portfolioSize = function() {
  var headerOffset = 100;
  $('#supersized').css({ 
    height: $(window).height() - headerOffset,
    top: headerOffset + 'px'
  }); 
};
portfolioSize();
$(window).resize(function() { portfolioSize(); }); 
```

我将 $(window).load 事件更改为直接调用，因为我们将代码放在文档就绪函数中。

不要忘记修改 CSS 以进行定位，如另一个答案（[https://stackoverflow.com/a/12889088/860205](https://stackoverflow.com/a/12889088/860205)）中所述。

# msmq - 元素不是类型的实例

> ID：14955643
> 
> 赞同：1
> 
> 时间：2013-02-19T10:52:49.810
> 
> 标签：msmq, linq-to-xsd

我正在使用 Linq To XSD 通过 MSMQ 发送数据。这是我的发送代码

```
public void Send()
        {
            string criMessageQueuePath = ConfigurationManager.AppSettings["CRIMessageQueuePath"];

            if (!MessageQueue.Exists(criMessageQueuePath))
            {
                MessageQueue.Create(criMessageQueuePath, false);
            }

            var messageQueue = new MessageQueue(criMessageQueuePath) { Label = "CRI Message Queue" };
            messageQueue.Formatter = new XmlMessageFormatter(new[] { typeof(XML) });

            var transaction = new MessageQueueTransaction();

            transaction.Begin();

            messageQueue.Send(CreateAuction(1), transaction);
            messageQueue.Send(CreateAuction(2), transaction);
            messageQueue.Send(CreateAuction(3), transaction);
            messageQueue.Send(CreateAuction(4), transaction);
            messageQueue.Send(CreateAuction(5), transaction);

            transaction.Commit();
        }

        private XML CreateAuction(int id)
        {
            var message = new XML {id = id};
            return message;
        } 
```

这是我的接收代码

```
public IEnumerable<string> Receive()
        {
            string criMessageQueuePath = ConfigurationManager.AppSettings["CRIMessageQueuePath"];

        var messageQueue = new MessageQueue(criMessageQueuePath);

        Message[] messages = messageQueue.GetAllMessages();

        foreach (Message message in messages)
        {
            message.Formatter = new XmlMessageFormatter(new[] { typeof(XML) });
            yield return message.Body.ToString();
        }

        messageQueue.Purge();
    } 
```

我已经尝试了很多此代码的变体，但无法弄清楚为什么我无法从另一端获取有效的 XML 对象。

目前，当我调用它时，我的代码失败了

```
static void Main()
        {
            var sender = new Sender.Sender();
            sender.Send();

            var receiver = new Receiver.Receiver();
            foreach (var xml in receiver.Receive())
            {
                var typedXML = XML.Parse(xml);
                Console.WriteLine(typedXML.id);
            }
        } 
```

它失败的那一行是`var typedXML = XML.Parse(xml);`. 错误是

```
Element is not an instance of type Domain.XML 
```

对象的 XSD 是

```
<?xml version="1.0" encoding="Windows-1252"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="Domain">
  <xs:element name="XML">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="id" type="xs:int" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

看值`xml`就行

```
var typedXML = XML.Parse(xml); 
```

我可以看到它生成了这个

```
"<XML>\r\n  <XML xmlns=\"Domain\">\r\n    <id>1</id>\r\n  </XML>\r\n</XML>" 
```

换句话说，它会围绕整个 xml 生成一个额外的 xml 节点。如果我在调试器中删除这个额外的节点，那么一切正常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:29:42.447

这是使用 hte XmlMessageFormatter 的结果，因为它序列化您的对象并将其包装在 XML 中。我建议您将 XML 文档直接写入 BodyStream 属性。

```
var msg = new Message();
var writer = new StreamWriter(msg.BodyStream);

writer.Write(xmlDoc.ToString());
writer.Flush();

queue.Send(msg); 
```

这样您就可以完全控制队列中发送的内容。格式化程序主要用于遗留用途，不应在将 XML 文档作为消息发送时使用。

# java - 如何从 Bean1 中设置 Bean2 中的数据

> ID：14955647
> 
> 赞同：1
> 
> 时间：2013-02-19T10:53:01.220
> 
> 标签：java, jsf, jsf-2, javabeans, view-scope

我所拥有的如下。

## Bean1.java

```
@ManagedBean(name = "bean1")
@ViewScoped
public class Bean1 {
    public String username;
    // some variables and getter and setter
    public String sendPassword() {
        String emailIdToSend = data from database with respect to username with below query
        //SELECT emailId FROM userSysInfo WHERE username=?
        // now I want to set this emailIdToSend to Bean2 displayEmailId
    }
} 
```

## page1.xhtml

```
<h:inputText id="username" value="#{bean1.username}" />
<h:commandButton value="Submit" action="#{bean1.sendPassword()}" /> 
```

## Bean2.java

```
@ManagedBean(name = "bean2")
@ViewScoped
public class Bean2 {
    public String displayEmailId;
    // getter and setter for this
    }
} 
```

## page2.xhtml

```
 We have sent a new password on your registered email id at #{bean2.displayEmailId} 
<br />
Please login into system using the new password. 
```

我想要的是将`bean1.var001`值设置为`bean2.var002`

知道怎么做吗？

我在下面尝试过，但它不起作用。

```
Bean2 bean2 = new Bean2();
bean2.setVar002(var001); 
```

* * *

## 编辑 1

好吧，我想做的是做“忘记密码页面”。

在第 1 页上，我要求输入用户名。一旦我有了用户名并输入提交，在后面我就有了 bean1。在这里，我检查用户名并在各自的电子邮件 ID 上发送密码。发送电子邮件后，我会转到将 bean 作为 bean2 的页面。在 page2 上，我想显示电子邮件 ID，所以我想做的是，在发送电子邮件后，在 bean1 中，将电子邮件 ID 设置为 bean2 var002 并在 page2 中显示。

# mobile - 移动 Adob e Flash AIR 上的摄像机和 Stage3D。AIR 上的增强现实

> ID：14955649
> 
> 赞同：6
> 
> 时间：2013-02-19T10:53:18.210
> 
> 标签：mobile, webcam, augmented-reality, stage3d, starling-framework

# 快速提问

如何使用 Stage3D 在 Adob​​e AIR 应用程序上快速显示网络摄像头？

* * *

# 详细问题

## 关于

我的目标是创建 AR（增强现实）移动应用程序的原型。我选择 Adob​​e Flash AIR 是为了在移动设备和 AIR 应用程序上提供良好的 3D 图形支持，以便轻松移植到许多移动平台（iOS、Android、Blackberry Playbook）。

## 目的

我想展示复杂的 3D 模型（所以我需要使用 Stage3D）。在前置摄像头的视频下方。像往常一样的 AR 应用程序。

### 这里是例子

[![](../Images/22f1624dd6c27f0b14cac1478f404045.png)](https://i.stack.imgur.com/PKeVh.jpg)
[（来源：[augmentedplanet.com](http://www.augmentedplanet.com/wp-content/uploads/2009/11/AR-Dungeons-Challenge.JPG)）]

![](../Images/512652bff1617ea9c9efa7db43f8189b.png)

## 问题

Stage3D 根本不透明，所以我不能使用 StageVideo 快速显示 Camera 的内容，因为 StageVideo 在 Stage3D 下看不到。

## 所以

我发现的唯一决定是创建具有动态纹理更新的平面。

这是[webcamvideo 与 Starling Framework (Stage3D) 集成的示例](https://forum.starling-framework.org/d/1557-integrate-a-webcamvideo-with-starling)。但是对于许多普通的移动设备，我们会获得如此大的纹理更新（几乎是屏幕分辨率的大小），以至于任何应用程序都会降到低 fps 甚至崩溃。例如，我在 Galaxy Note 上做了什么。它具有 320x200 的纹理大小，具有相当好的性能，但在 AR 应用程序中看起来很难看。

那么在 AIR 上创建 AR 有什么出色的解决方案吗？有人有同样的挑战吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T07:55:17.003

不幸的是，这个用例在 AIR 中没有得到很好的支持。您最好的选择是手动上传。在 Adob​​e 论坛上为透明 Stage3D 的功能请求添加投票可能会有所帮助。

现在来解释为什么这个功能优先级低：如果你在做 AR，你可能已经在视频上做 CPU 工作。这意味着您已经读回相机数据以在 CPU 上或作为 Stage3D 纹理进行处理。这是昂贵的部分，而不是将纹理上传回 Stage3D。

为了使其有用，需要许多复杂的代码路径完美地协同工作。在所有支持的设备上：

*   回读用于 CPU 或 GPU AR 图像处理的低分辨率相机
*   显示直通高分辨率相机图像
*   使用混合叠加 3D

不幸的是，这很难。在许多移动芯片组上，视频/摄像头、CPU 和 3D 是非常独立的单元，因此很难在它们之间共享数据而不停止或复制。如果您针对特定硬件，它可以做得很好。我知道这不能解决您的问题，但我希望它能解释为什么这个用例在 AIR 中还不能很好地工作。我认为您有以下选择：

*   使用 AIR 和回读/上传。在某些硬件上它会很慢，但它会可靠地工作。
*   去本地。在最好的情况下，这将是一个巨大的胜利，但是您需要为每个目标进行大量自定义代码和测试。
*   在一个非常狭窄的平台上进行本地化。许多非常酷的 AR 演示都是这样做的。查看 GPU 供应商的 AR SDK。他们中的大多数人都有一个。
*   充分利用糟糕的情况：坚持使用低分辨率和上传，但在视频上添加一些有趣的过滤器。一旦你支付了上传，用你的纹理做 Stage3D 的东西是非常便宜的。

我希望这能有所帮助。在开发 Stage3D 时，这个确切的用例时不时出现。我还是觉得真的很酷！也许这篇文章解释了为什么它还没有登上榜首。

# vbscript - VBScript 错误问题：预期结束 800A03F6

> ID：14955651
> 
> 赞同：0
> 
> 时间：2013-02-19T10:53:20.143
> 
> 标签：vbscript

我正在尝试使 vbs 工作，其想法是它将远程安装 msi，到包含 txt 文件的机器列表。

我收到多个错误，第一个是：

> 错误数量的参数或无效的属性分配：“WshShell.Exec”第 27 行，字符 1

```
WshShell.Exec "%COMSPEC% /C COPY " & StrInstallFile & " \\" & strComputer _
  & "\C$\Windows\Temp", 0, TRUE 
```

我似乎已经解决了这个问题：

```
Set WshExec = WshShell.Exec...... 
```

然后得到：

> 语句第 27 行的预期结尾 cahr 29

添加一个`&`：

```
Set WshExec = WshShell.Exec & "%COMSPEC%..... 
```

现在让我：

> 语句第 27 行的预期结尾 char 110

这是倒数第二个逗号

```
Set WshExec = WshShell.Exec & "%COMSPEC% /C COPY" & StrInstallFile _
  & " \\" & strComputer & "\C$\Windows\Temp", 0, TRUE 
```

所以我不确定此时出了什么问题，以及将整行更改为一组是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:21:18.710

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("MachineList.Txt", 1)
StrInstallFile="install_flash_player_11_active_x.msi"
StrNoUpdateFile="mms.cfg"
StrInstallCMD="msiexec.exe /qn /i "

Do Until objFile.AtEndOfStream

strComputer = objFile.ReadLine

' --------- Check If PC is on -------------
Set WshShell = WScript.CreateObject("WScript.Shell")
Set WshExec = WshShell.Exec("ping -n 1 -w 1000 " & strComputer) 'send 3 echo requests, waiting 2secs each
strPingResults = LCase(WshExec.StdOut.ReadAll)
If InStr(strPingResults, "reply from") Then

' ---------- Successful ping - run remote commands  ----------------

Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

' --------- Copy msi to windows temp folder
Set oExec = WshShell.Exec("%COMSPEC% /C COPY " & StrInstallFile & " \\" & strComputer & "\C$\Windows\Temp")

' --------- execute msi file on remote machine
Set oExec = WshShell.Exec("%COMSPEC% /C psexec  \\" & StrComputer & " " & strInstallCMD & "c:\Windows\Temp\" & StrInstallFile)

' --------- Copy no "no update" file to remote machine, first line is for win7, second for xp
Set oExec = WshShell.Exec("%COMSPEC% /C COPY " & StrNoUpdateFile & " \\" & strComputer & "\C$\Windows\SysWOW64\Macromed\Flash")
Set oExec = WshShell.Exec("%COMSPEC% /C COPY " & StrNoUpdateFile & " \\" & strComputer & "\C$\Windows\system32\macromed\flash")

Else

' ---------- Unsuccessful ping - Leave computer name in MachineList.txt and continue ----------------

strNewContents = strNewContents & strComputer & vbCrLf

End If
Loop

objFile.Close

Set objFile = objFSO.OpenTextFile("MachineList.txt", 2)
objFile.Write strNewContents
objFile.Close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:06:52.803

您正在混合 .Run 和 .Exec。.Exec 的原型：

```
object.Exec(strCommand) 
```

表明您需要类似的东西：

```
Set oExec = WshShell.Exec("%COMSPEC% /C COPY " & StrInstallFile & " \" & strComputer & "\C$\Windows\Temp") 
```

如果您想要 .Run ，请尝试以下操作：

```
Dim iRet : iRet = WshShell.Run(strCommand, [intWindowStyle], [bWaitOnReturn]) 
Dim iRet : iRet = WshShell.Run("%comspec% ...", 0, True) 
```

# qt - 显示图像并自动调整大小

> ID：14955655
> 
> 赞同：2
> 
> 时间：2013-02-19T10:53:30.777
> 
> 标签：qt, qt4, qpixmap, qlabel

我不太清楚在我的特定情况下显示图像的最佳方式是什么，所以希望这里有人有一些提示。

我想显示一个自动调整大小以适应可用空间的图像。我目前通过创建一个派生自 QLabel 的类来实现这一点，该类实现`void resizeEvent(QResizeEvent*)`了我`QPixmap::scaled`重新调整图像大小的位置。问题是这只在小部件放大时才有效，因为当我尝试使小部件变小时，小部件没有得到 resizeEvent。我猜是因为我将图像设置为与小部件相同的大小，所以不允许再次缩小它的大小？我想我可以尝试创建一个较小的图像，以便在图像周围引入一种“边框”，这可能会在缩小区域时允许发生重新调整大小的事件。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:49:34.557

尝试将标签的[大小策略](http://qt-project.org/doc/qt-5.0/qtwidgets/qsizepolicy.html)更改为 QSizePolicy::Preferred。

总体上看一下尺寸政策。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:48:01.200

*每当大小更改时都会发送*resizeEvent 。*放大与否无关紧要。但是您可以在缩小/放大时将 Policy 和 Max/Min size 设置为约束小部件。因此，如果您的小部件没有获得*resizeEvent*并且它也没有缩小，那么请查看您的尺寸政策和最小宽度/高度。如果它缩小但你没有*resizeEvent*那么你的逻辑有一些错误，我相信。*

 *或者，您可以使用*paintEvent*进行图像绘制，并使用 QWidget::rect() 作为小部件的宽度/高度。*

# java - 如何组织多线程与队列一起工作？

> ID：14955657
> 
> 赞同：2
> 
> 时间：2013-02-19T10:53:43.910
> 
> 标签：java, multithreading, find, queue, synchronized

我是初学者，把自己放在群里。

我需要在文件中组织多线程查找：

用户输入 where find(path) 和 what find(word);

*   第一个线程`.txt`在文件夹中查找文件并将结果添加到队列中；
*   当队列有一些文件=>第二个线程开始在这个文件中查找需要查找的内容（单词）。
*   如果找到成功，将显示此文件的路径 + 该单词在文件中相遇的次数。

问题：

*   我们可以使用 ArrayList（或存在任何替代方案）来处理与少数线程一起工作的队列吗？
*   如果队列为空，第二个线程不启动但在第一个找到需要文件时等待怎么办？
*   我们需要为这个任务使用同步并继承`MultiThreadingSearch`（或者更好地使用组合）吗？

代码：

```
import java.util.*;
import java.io.*;

class ArrayListOfFiles {
    private Node first, last;

    private class Node {
        String item;
        Node next;
    }

    public boolean isEmpty() {
        return first == null;
    }

    public synchronized void enqueue(String item) {
        Node oldlast = last;
        last = new Node();
        last.item = item;
        last.next = null;
        if (isEmpty())
            first = last;
        else
            oldlast.next = last;
    }

    public synchronized String dequeue() {
        String item = first.item;
        first = first.next;
        if (isEmpty())
            last = null;
        return item;
    }
}

class FolderScan extends MultiThreadingSearch implements Runnable {

    FolderScan(String path, String whatFind) {
        super(path, whatFind);
    }

    @Override
    public void run() {
        findFiles(path);
    }

    ArrayListOfFiles findFiles(String path) {
        File root = new File(path);
        File[] list = root.listFiles();
        for (File titleName : list) {
            if (titleName.isDirectory()) {
                findFiles(titleName.getAbsolutePath());
            } else {
                if (titleName.getName().toLowerCase().endsWith((".txt"))) {
                    textFiles.enqueue(titleName.getName());
                }
            }
        }

        return textFiles;
    }

}

class FileScan extends MultiThreadingSearch implements Runnable {
    Scanner scanner = new Scanner((Readable) textFiles);
    Set<String> words = new HashSet<String>();
    int matches = 0;

    FileScan(String file, String whatFind) {
        super(file, whatFind);
        Thread wordFind = new Thread();
        wordFind.start();
    }

    @Override
    public void run() {
        while (scanner.hasNext()) {
            String word = scanner.next();
            words.add(word);
        }

        if (words.contains(this.whatFind)) {
            System.out.println("File:" + this.path);
            matches++;
        }

        System.out.println(matches);
    }

}

public class MultiThreadingSearch {
    String path;
    String whatFind;

    ArrayListOfFiles textFiles;

    MultiThreadingSearch(String path, String whatFind) {
        this.path = path;
        this.whatFind = whatFind;
        this.textFiles = new ArrayListOfFiles();

        Thread pathFind = new Thread(new FolderScan(path, whatFind));
//      pathFind.start();

        if (!textFiles.isEmpty()) {
            @SuppressWarnings("unused")
            FileScan fileScan = new FileScan(textFiles.dequeue(), whatFind);
        }

    }

    // ask user about input
    public static void askUserPathAndWord() {

        BufferedReader bufferedReader = new BufferedReader(
                new InputStreamReader(System.in));
        String path;
        String whatFind;
        try {
            System.out.println("Please, enter a Path and Word"
                    + "(which you want to find):");
            System.out.println("Please enter a Path:");
            path = bufferedReader.readLine();
            System.out.println("Please enter a Word:");
            whatFind = bufferedReader.readLine();

            if (path != null && whatFind != null) {
                new MultiThreadingSearch(path, whatFind);
                System.out.println("Thank you!");
            } else {
                System.out.println("You did not enter anything");
            }

        } catch (IOException | RuntimeException e) {
            System.out.println("Wrong input!");
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        askUserPathAndWord();
    }
} 
```

我`Exception in thread "main" java.lang.StackOverflowError`从这段代码中得到。
怎么能解决这个任务？

谢谢，
纳扎尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T10:58:18.493

检查[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)它完全符合您的需要。线程可以阻塞，直到某个其他线程将新项目添加到队列中。
至于如何分解你的系统。我会做以下事情：

*   创建用于在路径中搜索 txt 文件的类。它实现`Runnable`. 你通过`path`它`queue`。它会搜索 txt 文件的路径并将它们添加到队列中。
*   创建用于搜索文件内容的类。它实现`Runnable`. 你传递给它，它从队列中获取新文件并检查它的内容`whatFind`。`queue`

就像是：

```
BlockingQueue<File> queue = new LinkedBlockingQueue<File>();
String path = ...;
String whatFind = ...;
FolderScan folderScan = new FolderScan(path, queue);
FileScan fileScan = new FileScan(whatFind, queue);

Executor executor = Executors.newCachecThreadPool();
executor.execute(folderScan);
executor.execute(fileScan); 
```

如果您想`FileScan`等到`FolderScan`将某些内容添加到队列中，您可以使用[take](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#take%28%29)方法：

```
BlockingQueue<File> queue;
File toProcess = queue.take(); // this line blocks current thread (FileScan) until someone adds new item to the queue. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:24:05.047

改动后：

```
package task;

import java.util.concurrent.*;
import java.util.*;
import java.io.*;

class FolderScan implements Runnable {

    private String path;
    private BlockingQueue<File> queue;
    private CountDownLatch latch;
    private File endOfWorkFile;

    FolderScan(String path, BlockingQueue<File> queue, CountDownLatch latch,
            File endOfWorkFile) {
        this.path = path;
        this.queue = queue;
        this.latch = latch;
        this.endOfWorkFile = endOfWorkFile;
    }

    public FolderScan() {  }

    @Override
    public void run() {
        findFiles(path);
        queue.add(endOfWorkFile);
        latch.countDown();
    }

    private void findFiles(String path) {

        try {
            File root = new File(path);
            File[] list = root.listFiles();
            for (File currentFile : list) {
                if (currentFile.isDirectory()) {
                    findFiles(currentFile.getAbsolutePath());
                } else {
                    if (currentFile.getName().toLowerCase().endsWith((".txt"))) {
                            queue.put(currentFile);
                    }
                }
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }

}

public class FileScan implements Runnable {

    private String whatFind;
    private BlockingQueue<File> queue;
    private CountDownLatch latch;
    private File endOfWorkFile;

    public FileScan(String whatFind, BlockingQueue<File> queue,
            CountDownLatch latch, File endOfWorkFile) {
        this.whatFind = whatFind;
        this.queue = queue;
        this.latch = latch;
        this.endOfWorkFile = endOfWorkFile;
    }

    public FileScan() {     }

    Set<String> words = new HashSet<String>();
    int matches = 0;

    @Override
    public void run() {

        while (true) {
            try {
                File file;
                file = queue.take();

                if (file == endOfWorkFile) {
                    break;
                }

                scan(file);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        latch.countDown();
    }

    private void scan(File file) {
        Scanner scanner = null;
        try {
            scanner = new Scanner(file);
        } catch (FileNotFoundException e) {
            System.out.println("FileNotFoundException.");
            e.printStackTrace();
        }
        while (scanner.hasNext()) {
            String word = scanner.next();
            words.add(word);
        }

        if (words.contains(this.whatFind)) {
            matches++;
        }

        String myStr = String.format("File: %s and the number of matches "
                + "is = %d", file.getAbsolutePath(), matches);
        System.out.println(myStr);

        matches = 0;
    }

    // ask user about input
    public void askUserPathAndWord() {

        BufferedReader bufferedReader = new BufferedReader(
                new InputStreamReader(System.in));
        String path;
        String whatFind;
        BlockingQueue<File> queue = new LinkedBlockingQueue<File>();

        try {
            System.out.println("Please, enter a Path and Word"
                    + "(which you want to find):");
            System.out.println("Please enter a Path:");
            path = bufferedReader.readLine();
            System.out.println("Please enter a Word:");
            whatFind = bufferedReader.readLine();

            if (path != null && whatFind != null) {

                File endOfWorkFile = new File("GameOver.tmp");
                CountDownLatch latch = new CountDownLatch(2);

                FolderScan folderScan = new FolderScan(path, queue, latch,
                        endOfWorkFile);
                FileScan fileScan = new FileScan(whatFind, queue, latch,
                        endOfWorkFile);

                Executor executor = Executors.newCachedThreadPool();
                executor.execute(folderScan);
                executor.execute(fileScan);

                latch.await();
                System.out.println("Thank you!");
            } else {
                System.out.println("You did not enter anything");
            }

        } catch (IOException | RuntimeException e) {
            System.out.println("Wrong input!");
            e.printStackTrace();
        } catch (InterruptedException e) {
            System.out.println("Interrupted.");
            e.printStackTrace();
        }
    }

    /**
     * @param args
     */

    public static void main(String[] args) {
        new FileScan().askUserPathAndWord();
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T10:58:41.660

This may not sound too constructive, but you can either fix that code or read something like [this](http://tutorials.jenkov.com/java-util-concurrent/index.html) first and then throw away your code. Stackoverflow usually results from a recursion running deeper than expected. Make sure there is some condition in you recursive method that stops recursion.

# php - 如何高效快速地编写 PHP/HTML 中的相对路径？

> ID：14955660
> 
> 赞同：0
> 
> 时间：2013-02-19T10:53:49.990
> 
> 标签：php, html, directory, relative-path

我已经设法自学了 PHP/PDO/SQL，但是，我终其一生都无法弄清楚相对路径在 PHP 和 HTML 中是如何工作的。我有一个带有几个目录和分支的多页网站，我希望能够创建一个简单的模板，可以用来制作新页面，而不必每次都更改指向我的样式表和 PHP 的链接，具体取决于目录。

这是我的布局如下：

```
 MySite (http://localhost/MySite/)
   RESOURCES //Not a folder, just here for readability
   > serverside > initialize.php
   > templates  > header.php
                  footer.php
                  navuser.php
                  navmenu.php
   > styles     > styles.css
   > images     > variousImages.png

   PAGES //Not a folder, just here for readability

   > index.php
     login.php
     register.php
     gettingstarted.php

  > you         > settings    > settings.php
                > youraccount.php
                > yourfavourites.php 
```

以下是游戏规则： 每个页面首先包含**serverside/initialize.php**文件（PHP 包含）。然后，每个页面都通过标准的 HTML href 属性包含**样式/styles.css 。**然后，每个页面都通过 PHP 包含**templates/header.php**和**templates/footer.php**，前者还包含**templates/navuser.php**和**templates/navmenu.php**。

问题是，如果其中一个页面位于不同的级别（例如 you/settings/settings.php），那么所有这些包含和 href 都必须更改，这似乎会影响包含中的包含。不可能！

我想要的只是能够在不使用真正的绝对路径的情况下指定文件名，因此如果需要，我可以在整个网站中复制一个模板文件 - 我已经研究过`__DIR__`, `__FILE__`, `$_SERVER['DOCUMENT_ROOT']`, 将变量 $dir 转换为文档root，但没有成功。我也不明白发生了什么。

任何人都可以阐明我的情况吗？我本质上是在寻找有关相对根/链接/文件如何在 PHP 中工作的完整解释。如何处理更复杂的目录结构？再次，我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:58:00.453

您通常会在**index.php**文件中设置一个包含绝对路径和绝对 URL 的常量，然后在包含等中从那里引用它们。

一个示例**index.php**：

```
<?php
define('ROOT_DIR', __DIR__); 
```

之后您可以使用该常量：

```
require ROOT_DIR . '/includes/database.php';
require ROOT_DIR . '/application/controllers/MyController.php';
require ROOT_DIR . '/application/models/MyModel.php'; 
```

等等。希望这可以帮助。

# c# - 为 UpdatePanel 添加 jquery 点击事件

> ID：14955662
> 
> 赞同：0
> 
> 时间：2013-02-19T10:53:51.643
> 
> 标签：c#, jquery, asp.net

我正在使用此代码使用 jQuery 将 asp.net gridview 与右键单击 contextmenu 绑定，但每次单击它（使用菜单列表中的选项）时，它都会重新加载页面。如果我想使用一个，我应该怎么做`UpdatePanel`？

```
 function fnView() {
        var lnkView = document.getElementById('<%=lnkView.ClientID %>');
        var hiddenField = document.getElementById('<%=fldProductID.ClientID %>');
        hiddenField.value = $("div").filter("[type=ContextMenu]")[0].id.replace("Menu", "");
        lnkView.click();
    }
    function fnDelete() {
        var lnkDelete = document.getElementById('<%=lnkDelete.ClientID %>');
        var hiddenField = document.getElementById('<%=fldProductID.ClientID %>');
        hiddenField.value = $("div").filter("[type=ContextMenu]")[0].id.replace("Menu", "");
        lnkDelete.click();
    }

    jQuery.fn.setEvents = function (e) {
        var me1 = jQuery(this);
        return this.each(function () {
            var me = jQuery(this);
            me.click(function (e) {
                $("div").filter("[type=ContextMenu]").hide();
                fnSetMenu(me.children(':first-child').text(), e.pageX, e.pageY);
            });
        });
    };
    function fnSetMenu(productID, left, top) {
        if ($("#Menu" + productID).html() == null) {
            var strMenuHTML = "<div type=\"ContextMenu\" id=\"Menu" + productID + "\" class=\"contextMenuClass\" mouseonmenu=\"1\"><table style='width:100%;'><tr><td onclick=fnView()>View Product</td></tr><tr><td onclick=fnDelete()>Delete Product</td></tr></table></div>";
            $("body").append(strMenuHTML);
            $.post("MenuHandler.ashx", {}, function (response) {
                $("#Menu" + productID).html(response);
            });
        }
        $("#Menu" + productID).css({ top: top + "px", left: left + "px" }).show();
    }

    $(document).ready(function () {
        $("#gvProducts tr.ShowContext").setEvents();
    }
    );
    $(document).click(function (e) {
        $clicked = $(e.target);
        if (!($clicked.parents().hasClass("ShowContext") || $clicked.hasClass("contextMenuClass") || $clicked.parents().hasClass("contextMenuClass"))) {
            $("div").filter("[type=ContextMenu]").hide();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:34:05.030

使用 jQuery 的 live 函数在 updatepanel 中绑定一个事件

或者

通过这个链接

```
http://stackoverflow.com/questions/256195/jquery-document-ready-and-updatepanels 
```

# javascript - 从 API 获取 Json 以在 Gmap 中使用

> ID：14955668
> 
> 赞同：0
> 
> 时间：2013-02-19T10:54:08.297
> 
> 标签：javascript, jquery, json

我会使用这个 API 服务来了解更多关于 Javascript/Jquery 的信息。

我需要获取 JSON 以在 Gmap 中重新利用，但我不知道如何修改函数以实现我的目标。

你可以帮帮我吗？

非常感谢你！

演示 => [http://jsfiddle.net/rpC3n/](http://jsfiddle.net/rpC3n/)

链接 API：[http ://api.citybik.es/](http://api.citybik.es/)

代码 =>

```
$.getJSON('http://api.citybik.es/networks.json', function (data) {
$.each(data.city) {
    $('#output').append(data.city);
}
}); 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:08:14.360

由于这是一个跨域请求，因此您需要使用 JSONP。

所以你的 jQuery 看起来像：

```
$.ajax({
    dataType: "jsonp",
    url: 'http://api.citybik.es/networks.json',
    success: function(data){
        $.each(data,function(){
            console.log(this);
            //do your gmap stuff here
        });
    },
    error: function(){
        console.log("Error",arguments);
    }
}); 
```

更新的小提琴： http: [//jsfiddle.net/rpC3n/1/](http://jsfiddle.net/rpC3n/1/)（检查你的控制台看看你返回的数据是什么样的）

# sql - 获取每个加入记录的计数

> ID：14955670
> 
> 赞同：1
> 
> 时间：2013-02-19T10:54:12.350
> 
> 标签：sql, count

我有 2 张桌子我想加入和..

```
A:
ID Otherfields..
1  ...
2
3
4

B:
ID aId  Otherfields..
1  1    ...
2  1
3  2
4  1 
```

所以我完全有能力通过 a.Id 加入他们，但是如何获得表 B 中匹配项的计数，例如：

```
a.id  count(b)
1     3
2     1 
```

我想它一定是 count() over() 的东西，但不记得确切的用途。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:59:04.703

你可以简单地这样做：

```
SELECT 
  A.ID, COUNT(b.ID)
FROM A 
INNER JOIN B ON A.Id = b.aID
GROUP BY A.ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T11:01:11.753

你可以有

```
SELECT A.ID, COUNT(b.ID)
FROM A 
LEFT JOIN B ON A.Id = b.aID
GROUP BY A.ID 
```

这将为您提供所有`a.ID`不存在的 s，`b.ID`因此将其计数显示为 0。

例如，

```
ID   Count
1    3
2    1
3    0
4    0 
```

# shell - 如何在shell脚本中从文件中读取数据

> ID：14955673
> 
> 赞同：2
> 
> 时间：2013-02-19T10:54:22.093
> 
> 标签：shell

我有两个 shell 脚本文件**test1.sh 和 test2.sh**。我有另一个名为**translogs.txt**的文件。
现在我需要将 test1.sh 中的两个变量的值复制到 translog.txt 中，并且需要将相同的变量复制到**test2.sh**中的相应值中。

**测试1.sh**

```
#!/bin/sh
ONE="000012"
TIME="2013-02-19 15:31:06"
echo -e "$ONE\n$TIME">translog.txt; 
```

**translog.txt**

```
ONE="000012"
TIME="2013-02-19 15:31:06" 
```

但是在**test2.sh**中，我想要与 translog.txt 中相同的值到相应的变量

**测试2.sh**

```
#!/bin/sh
ONE="000012"
TIME="2013-02-19 15:31:06" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:10:38.903

## 1 干溶液

```
$> cat translog.txt
ONE="000012"
TIME="2013-02-19 15:31:06" 
```

使用`perl`正则表达式可以使用**后向**`grep`运算符匹配这些值 。

 **```
$> grep --only-matching --perl-regex "(?<=ONE\=).*" translog.txt
"000012" 
```

对于`TIME`：

```
$> grep --only-matching --perl-regex "(?<=TIME\=).*" translog.txt
"2013-02-19 15:31:06" 
```

因此，从`test2.sh`使用脚本开始，您可以像这样使用它：

```
#!/bin/bash
ONE=`grep --only-matching --perl-regex "(?<=ONE\=).*" translog.txt`
TIME=`grep --only-matching --perl-regex "(?<=TIME\=).*" translog.txt` 
```

* * *

## 2 命令行解决方案

以下链接中指出的另一种解决方案是使用：`source`(aka `.`) 命令将文件中的所有变量加载到当前 shell 中：

```
$ source translog.txt 
```

现在您可以访问文件中定义的变量的值：

```
$ echo $TIME
"2013-02-19 15:31:06" 
```

* * *

## 3 最简单​​的解决方案

@user2086768 提到了另一种方法。将这些行放入`test2.sh：

```
#!/bin/bash
eval $(cat translog.txt) 
```

因此，您将在`test2.sh`脚本中分配两个变量：

```
ONE="000012"
TIME="2013-02-19 15:31:06" 
```

您可以轻松检查是否添加：

```
echo $ONE
echo $TIME 
```

还要检查这些链接：

*   [如何在bash中获取变量配置的值？](https://stackoverflow.com/questions/9553715/how-to-get-value-of-variable-config-in-bash)
*   这是一个更一般的概述：[将数据加载到 bash 变量中](http://af-design.com/blog/2009/07/07/loading-data-into-bash-variables/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:18:24.770

作为`translog.txt`有效的 bash 代码，您可以执行以下操作：

```
source translog.txt 
```

在 中`test2.sh`， `ONE`并且`TWO`将在 中可用`test2.sh`。

警告一句，如果 和 的值来自不受信任的来源，这确实会使您面临 shell 脚本注入`ONE`攻击`TWO`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:38:02.383

eval 应该适合你。

尝试使用这个版本的 test2.sh：

**测试2.sh**

```
#!/bin/bash
eval $(cat translog.txt)
echo $ONE
echo $TIME 
```

这输出：

000012

2013-02-19 15:31:06

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:15:29.130

如果您的 translog.txt 如您所说，那么这将起作用

```
#!/bin/sh
while read aa
do
  eval "$aa"
done < translog.txt 
```**

# android - Android 布局 - ListView 占用太多空间

> ID：14955679
> 
> 赞同：1
> 
> 时间：2013-02-19T10:54:48.673
> 
> 标签：android, listview, layout, android-activity, fragment

你好！

我在 Android 中遇到了问题（我也是 Android 新手）。

首先，我有 2 个片段。1 Fragment 包含一个 ListView，我在其中显示手机上的音乐。第二个片段有一些控件。

**我希望带有控件的片段保持在屏幕底部。ListFragment 应该贴在 Activity 的顶部。我怎样才能做到这一点？**

现在我在 xml 中编写了以下内容：activity_main.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/rain"
android:gravity="center|top"
android:orientation="vertical"
tools:context=".MainActivity" >

<!-- Playlist -->
<fragment
    android:id="@+id/playlist_fragment"
    android:layout_width="fill_parent"
    android:layout_height="0px"
    android:layout_gravity="top"
    android:layout_weight="6"
    class="at.wireless.musicstream.fragment.PlaylistFragment" />

<!-- Separator -->
<View
    android:layout_width="match_parent"
    android:layout_height="2dp"
    android:background="@android:color/holo_blue_dark" />

<!-- Controls -->
<fragment
    android:id="@+id/control_fragment"
    android:layout_width="fill_parent"
    android:layout_height="0px"
    android:layout_weight="1"
    class="at.wireless.musicstream.fragment.ControlFragment" />
    </LinearLayout> 
```

我在这里使用了 layout_weight ，但这不是我想要的，因为在不同的屏幕尺寸下，这也会占用不同的高度。但我希望控件具有“固定”大小（我在片段中使用 dp）

playlist_fragment.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center|top"
tools:context=".MainActivity" >

<ListView
    android:id="@android:id/list"
    android:layout_height="match_parent"
    android:layout_width="match_parent" >
</ListView>
</LinearLayout> 
```

还有我的 control_fragment.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@android:color/transparent"
android:orientation="horizontal"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/albumView"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_gravity="left"
    android:background="@drawable/no_album_art"
    android:contentDescription="Album Art" />

<LinearLayout android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <TextView android:id="@+id/actPlayingTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="14sp"
        android:textIsSelectable="false"
        android:text="hier titel"
        android:textColor="@android:color/white"/>
    <TextView android:id="@+id/actPlayingArtist"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textIsSelectable="false"
        android:textSize="12sp"
        android:text="hier artist"
        android:textColor="@android:color/white" />"

</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:layout_marginLeft="20dp" >

    <Button
        android:id="@+id/rewindBtt"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_gravity="right"
        android:background="@drawable/play" />

    <Button
        android:id="@+id/playbackBtt"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_gravity="right"
        android:background="@android:color/black" />

    <Button
        android:id="@+id/skipBtt"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_gravity="right"
        android:background="@android:color/white" />
</LinearLayout>
</LinearLayout> 
```

[图片](http://i.stack.imgur.com/m6iJH.png)

ListView 应该占用 control_fragment 留下的空间。所以假设我的屏幕总高度为 1000。控件占用 200，然后 ListView 剩下 800。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:37:10.303

切换到RelativeLayout，这将允许您的控件停留在固定位置，您还需要为控件定义一个高度（我已将其设置为200dp）。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/rain"
android:gravity="center|top"
tools:context=".MainActivity" >

<!-- Playlist -->
<fragment
    android:id="@+id/playlist_fragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="top"
    class="at.wireless.musicstream.fragment.PlaylistFragment"
    android:layout_above="@+id/separator"/>

<!-- Separator -->
<View
    android:id="@+id/separator"
    android:layout_width="match_parent"
    android:layout_height="2dp"
    android:layout_above="@+id/control_fragment"
    android:background="@android:color/holo_blue_dark" />

<!-- Controls -->
<fragment
    android:id="@+id/control_fragment"
    android:layout_width="fill_parent"
    android:layout_height="200dp"
    android:layout_alignParentBottom="true"
    class="at.wireless.musicstream.fragment.ControlFragment" />
    </RelativeLayout> 
```

# php - 将复选框值从表单传递到 php 页面

> ID：14955682
> 
> 赞同：0
> 
> 时间：2013-02-19T10:54:55.003
> 
> 标签：php, html, codeigniter, checkbox

我有一个表单，其中为每个生成的记录（来自随机搜索）创建了复选框，例如：

```
name    value   id .... 
abc      24      x145       []checkbox
xyz      19      b234       []checkbox
... 
```

由于记录是动态生成的，因此我在表格中有一行表示

```
<input type="checkbox" name="cb[]" onclick="toggleChecked(this.checked)"></input> 
```

因此，为每一行（记录）添加了一个复选框。如何将复选框的值从此表单传递到另一个表单以进行后期处理？我尝试了通常的方法`$_POST['cb']`，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:03:49.773

HTML 复选框不起作用`$_POST["cb"][0]==true` 如果它们被选中，表单将使用它们的值提交，因此`$_POST["cb"][0]`将包含 null，因为您没有指定任何值，或者它们甚至没有提交，因为它们没有值。

您将需要使用类似的东西：

```
<input type="checkbox" name="cb[]" value="checked" onclick="toggleChecked(this.checked)"></input> 
```

# ruby-on-rails - 如何使“清理”Rails 方法在 HTML 曾经存在的地方留下空间？

> ID：14955683
> 
> 赞同：0
> 
> 时间：2013-02-19T10:54:57.103
> 
> 标签：ruby-on-rails

所以，我正在做以下事情：

```
sanitize(self.content, :tags => %w("")) 
```

所以我正在采取这样的措施：

`<p>one two three four five six seven eight nine then eleven</p><p>twelve thirteen</p>`

并把它变成这样的东西：

`one two three four five six seven eight nine then eleventwelve thirteen`

如您所见，这里有一个问题：`eleventwelve`

我该怎么做才能在`eleven`and之间留一个空格`twelve`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:02:24.813

自定义消毒剂:) [更新]

```
# models/custom_sanitizer.rb

class CustomSanitizer  
  def do(html, *conditions)
    document = HTML::Document.new(html)    
    export = ActiveSupport::SafeBuffer.new # or just String
    parse(document.root) do |node|
      if node.is_a?(HTML::Text)
        if node.parent.is_a?(HTML::Tag) && match(node.parent, conditions) && export.present?
          export << " "
        end
        export << node.to_s
      end
    end
    export
  end

  private

  def match(node, conditions = [])
    eval(conditions.map {|c| "node.match(#{c})"}.join(" || "))
  end

  def parse(node, &block)
    node.children.each do |node|
      yield node if block_given?
      if node.is_a?(HTML::Tag)
        parse(node, &block)
      end
    end
  end

end

# Helper

def custom_sanitize(*args)
  CustomSanitizer.new.do(*args)
end 
```

基本用法：

```
custom_sanitize(html, conditions)
# where conditions is a hash or hashes like {:tag => "p", :attributes => {:class => "new_line"}} 
```

你的例子：

```
html = "<p>one two three four five six seven eight nine then eleven</p><p>twelve thirteen</p>"
custom_sanitize(html, :tag => "p")
#=> "one two three four five six seven eight nine then eleven twelve thirteen" 
```

多个条件的示例：

```
custom_sanitize(html, {:tag => "p"}, {:tag => "div", :attributes => {:class => "title"}) 
```

=========

**对于模型[简单版]**

将帮助程序包含到帮助文件中，您只需为 ActionView 环境打开它。如果你想在 AR 模型中使用这个方法，你应该在 Rails 加载之前将它包含到 ActiveRecord::Base 中。但是很容易直接使用 CustomSanitizer 类：

```
class Post < ActiveRecord::Base

  def no_html_content
    CustomSanitizer.new.do(content, :tag => "p")
  end

end

# Post.find(1).no_html_content 
```

# iphone - 如何从数组中获取特定值并在表格视图中显示

> ID：14955684
> 
> 赞同：0
> 
> 时间：2013-02-19T10:54:58.777
> 
> 标签：iphone, nsarray

我有数组并将所有值保存在 arraypartno 中，我将该特定值放在标签中，并希望在我的单元格中显示，如 PARTNUMBER：-

这是代码： -

```
 for (int i =0 ; i<[arrData count]; i++)

   {    
        [arraypartno addObject:[[arrData objectAtIndex:i] valueForKey:@"Condition"]];
        [arraypartno addObject:[[arrData objectAtIndex:i] valueForKey:@"DateCode"]];
        [arraypartno addObject:[[arrData objectAtIndex:i] valueForKey:@"MFG"]];
        [arraypartno addObject:[[arrData objectAtIndex:i] valueForKey:@"PARTNUMBER"]];
        [arraypartno addObject:[[arrData objectAtIndex:i] valueForKey:@"Qty"]];
        [arraypartno addObject:[[arrData objectAtIndex:i] valueForKey:@"id"]];
    } 
```

所以我必须在 lblplate1.text 中为特定键写什么，现在它显示整个数组值。

```
UILabel *lblplate1 = [[UILabel alloc]initWithFrame:CGRectMake(20, 0, 200, 30)];

lblplate1.text = [arraypartno  objectAtIndex:indexPath.row];
lblplate1.textColor = [UIColor colorWithRed:2.0/255.0 green:143.0/255.0 blue:213.0/255.0 alpha:1];

lblplate1.backgroundColor =[UIColor clearColor];
[cell.contentView addSubview:lblplate1]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:58:37.140

如果您正在为客户端应用程序工作，请尝试采用[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。通过以具有条件、日期代码、MFG、Partno 等属性的模型对象的形式存储数据，并将数据存储在**模型对象数组中**。

```
for (int icounter=0; icounter<[arrData count]; icounter++) {
                    if (objModalClass!=nil) {
                        [objModalClass release];
                        objModalClass=nil;
                    }
                    objModalClass=[[ModalClass alloc]init];
                    objModalClass.Condition=[[arrData objectAtIndex:i] valueForKey:@"Condition"];
                    objModalClass.DateCode=[[arrData objectAtIndex:i] valueForKey:@"DateCode"];;
                    objModalClass.partno=[[arrData objectAtIndex:i] valueForKey:@"PARTNUMBER"];
                    [arrList addObject:objModalClass];
                }
} 
```

从模型类对象中检索数据

```
for (ModalClass *obj in arrList){
           lblCondition.text=obj.Condition;
} 
```

尝试使用 MVC，因为如果您必须添加新属性或删除它们，您可以轻松更改结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:27:55.343

不要将不同的键值添加到同一个数组，而是为不同的键创建不同的数组

像这样

```
 [arrayCondition addObject:[[arrData objectAtIndex:i] valueForKey:@"Condition"]];
    [arrayDateCode addObject:[[arrData objectAtIndex:i] valueForKey:@"DateCode"]];
    [arrayMFG addObject:[[arrData objectAtIndex:i] valueForKey:@"MFG"]];
    [arraypartno addObject:[[arrData objectAtIndex:i] valueForKey:@"PARTNUMBER"]];
    [arrayQty addObject:[[arrData objectAtIndex:i] valueForKey:@"Qty"]];
    [arrayID addObject:[[arrData objectAtIndex:i] valueForKey:@"id"]]; 
```

并在 cellforRowAtIndexPath

```
lblplate1.text = [arraypartno  objectAtIndex:indexPath.row]; 
```

注意：- 请在 viewDidLoad 中初始化数组。

# c# - 将双精度转换为字符串 1

> ID：14955689
> 
> 赞同：1
> 
> 时间：2013-02-19T10:55:25.870
> 
> 标签：c#

我是 C# 新手，我目前正在制作一个计算器，我想做一个简单的计算，但它不能正常工作。

这是当前行：

```
Convert.ToString(Convert.ToDouble(A.Text)+Convert.ToDouble(B.Text)+Convert.ToDouble(C.Text)); 
```

这是每个文本框中都有 1.1 的示例输出：1.1+1.1+1.1 = 33

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:59:22.213

问题是您没有在转换中指定文化。很可能您有一种德国文化（或其他一些欧洲文化），它使用点作为组分隔符，而不是小数点。结果`1.1`被解释为`11`。

有两种解决方案：

1.  在当前文化中输入您的数字：（`1,1`首选）
2.  使用不变区域性解析数字：

    ```
    Convert.ToString(
        Convert.ToDouble(A.Text, CultureInfo.InvariantCulture) + 
        Convert.ToDouble(B.Text, CultureInfo.InvariantCulture) + 
        Convert.ToDouble(C.Text, CultureInfo.InvariantCulture),
        CultureInfo.InvariantCulture) 
    ```

第一种方法是首选，因为它将确保用户始终可以输入自己文化中的数字。将某种文化强加给用户在 20 年前是可以接受的，但现在不行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T10:59:37.850

您需要计算总和，然后将这些部分相加。String.Format 是连接字符串的好方法。

```
double sum = Convert.ToDouble(A.Text)+Convert.ToDouble(B.Text)+Convert.ToDouble(C.Text);
string resultStr = String.Format("{0}+{1}+{2}={3}", A.Text, B.Text, C.Text, sum); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-19T11:00:16.030

您应该先将中间结果分配给双变量，然后将其放入字符串，即

```
double d = Double.Parse(A.Text) + Double.Parse(B.Text) + Double.Parse(C.Text); 
```

最终你可以打电话

```
string result = d.ToString(); 
```

这要容易得多。

见[这里](http://msdn.microsoft.com/en-us/library/fd84bdyt.aspx)。

# eclipse - BIRT：使用来自一个数据集的信息作为另一个数据集的参数

> ID：14955692
> 
> 赞同：2
> 
> 时间：2013-02-19T10:55:50.923
> 
> 标签：eclipse, report, birt

我正在用 Eclipse 创建一些 BIRT 报告。现在我遇到了以下问题。我有两个数据集（设置一个名为 diag，设置两个命名风险）。在我的报告中，我在 diag 带有 diag_id 的区域中生成 fpr 每个数据。现在我尝试使用这个 diag_id 作为第二个数据集的输入参数（风险）。这可能吗，这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:19:59.440

要将一个数据集链接到 BIRT 中的另一个数据集，您可以：

*   在您的报告中创建一个子报告，通过输入参数将一个数据集链接到另一个数据集 - 请参阅[此 Eclipse 教程](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.birt.doc/birt/subreport.13.2.html)。

或者：

*   创建一个联合数据集，将两个数据集显式链接在一起 - 请参阅[此 StackOverflow 问题](https://stackoverflow.com/questions/3643030/how-to-create-birt-report-based-on-multiple-data-sets/3650884#answers)的答案。

或者，如果两个数据集都来自同一个关系数据库，您可以简单地将两个查询组合成一个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:49:01.917

如果您使用脚本数据源，则可以使用变量。

通过 Eclipse UI 添加一个名为“diag_id”的变量。

在**diag的****fetch**脚本中，设置 diag_id：

 **```
vars["diag_id"] = ...;         // store value in Variable. 
```

然后，在**risk的****打开**脚本中，根据需要使用 diag_id。

 **```
diag_id = vars["diag_id"]; 
```

这意味着**风险**报告元素的放置嵌套在**diag**重复元素中，因此 diag.fetch 将在每个 risk.open 之前发生。****

# regex - 使用 perl 验证电子邮件的更好方法

> ID：14955698
> 
> 赞同：0
> 
> 时间：2013-02-19T10:56:05.500
> 
> 标签：regex, perl

使用 perl 验证电子邮件的推荐方法是什么？

到目前为止我所尝试的：

```
(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]) 
```

# php - preg_replace 用 mysql assoc while 循环中的值替换字符串中的值

> ID：14955702
> 
> 赞同：0
> 
> 时间：2013-02-19T10:56:12.967
> 
> 标签：php, arrays, while-loop, preg-replace

**编辑：**更新 PHP 以解决 $_POST 处理程序中的数组到字符串转换问题，while 循环现在显示正确的条目数并正确替换字符串，但仅显示每个循环的数据库中第一个条目的替换值通过。

我目前正在构建一个使用模板系统向人们发送大量消息的系统。<{}> 标记中包含的值将被数据库结果中的值替换。例如，写入的消息可能是：

> 您好 <{firstname}><{lastname}>，感谢您在 <{date}> 购买 <{product}>。

替换后的结果为：

> 您好 Joe Bloggs，感谢您在 2013 年 1 月 1 日购买智能手机。

要替换的字段是从数据库中动态创建的，而数据库又是由用户上传 CSV 文档创建的。这意味着字段名称是不可预测的，我正在使用`show columns from table`SQL 函数来填充我要查找的名称。

我正在努力从我发布的值中获取值以通过 mysql_assoc 循环替换字符串中的值。

表单输入的 HTML 是使用`show columns`for each 结果的 PHP 循环创建的，每个输入看起来像：

```
<input type="hidden" name="fields[]" value="column name" /> 
```

还有一个文本区域：

```
<textarea name="message"></texarea> 
```

我的PHP来处理这个是：

```
if(isset($_POST['fields'])) {
    $strings = array();
    foreach($fields as $f) {
        $strings[] = "/<{".$f."}>/";
    }
    $replace = $_POST['fields'];
} 
```

当前循环是：

```
$query = "select * from $table_name";
    $result = mysql_query($query) or die(mysql_error());
    $string = $_POST['message'];
    $pattern = $strings;

    while($name = mysql_fetch_array($result, MYSQL_ASSOC)) {
    foreach ($replace as $r) {
        $replacement[] = $name[$r];
    }
    $message = preg_replace($pattern, $replacement, $string);
    echo "<p>$message</p>";
    } 
```

在`$table_name`文件的开头声明。

帖子有效，并且创建的数组似乎是正确的，所以我认为我的问题在于 while 循环的内容。截至目前，它什么也不返回，我怎样才能将正确的替换值`$name[]`放入`$replacement`数组中，然后循环遍历，以便正确格式化每条消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:59:23.047

好的，我已经解决了这个问题，我需要`$replacement = array();`在`foreach`. 最终结果是：

```
while($name = mysql_fetch_array($result, MYSQL_ASSOC)) {
$replacement = array();
foreach ($replace as $r) {
    $replacement[] = $name[$r];
     }
  $message = preg_replace($pattern, $replacement, $string);
  echo "<p>$message</p>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:23:16.097

你应该看看[sprintf](http://php.net/manual/en/function.sprintf.php)，可能会更容易。

# asp.net - 这个用于抑制表单身份验证的模块应该如何工作？

> ID：14955707
> 
> 赞同：1
> 
> 时间：2013-02-19T10:56:22.940
> 
> 标签：asp.net, .net, iis, forms-authentication

[这是一篇](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)关于用于抑制某些请求的表单身份验证的模块的帖子。这个想法是模块在 web.config 中注册，因此对于每个请求`Init()`都会调用它：

```
public void Init(HttpApplication context) {
    context.PostReleaseRequestState += OnPostReleaseRequestState;
    context.EndRequest += OnEndRequest;
} 
```

然后，一旦请求接近 IIS 管道的末端，就会`EndRequest`触发事件，因此会调用以下代码：

```
private void OnEndRequest(object source, EventArgs args) {
    var context = (HttpApplication)source;
    var response = context.Response;

    if (context.Context.Items.Contains(SuppressAuthenticationKey)) {
      response.TrySkipIisCustomErrors = true;
      response.ClearContent();
      response.StatusCode = 401;
      response.RedirectLocation = null;
    }
} 
```

代码的其他部分更早被调用，并保证`SuppressAuthenticationKey`在`context.Context.Items`.

现在我有了 IIS 源（它们可用于研究），`FormsAuthenticationModule`并且它订阅了它的实现，并且`EndRequest`该请求的处理程序忠实地重定向了所有以 HTTP 401 代码结尾的请求。

我不仅看到了代码，而且看到它以这种方式工作。没有任何数量`.RedirectLocation = null`对此有任何影响。

如果重定向在 IIS 中不可抑制，那么该代码应该如何抑制表单身份验证重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:14:44.003

事实证明，这就是这件事应该如何工作的。

`EndRequest`首先触发 FormsAuthenticationModule 并且它的事件处理程序设置了重定向，但是重定向并没有立即执行，实际效果是它只是在响应中搁置了 HTTP 302 和重定向 URL，请求处理继续进行。然后`EndRequest`触发抑制模块，抑制模块清除先前设置的重定向，就好像从未设置过一样。

因此，请求处理继续进行，就好像一开始没有重定向一样。

# css - 是什么导致了这种疯狂的阴影？

> ID：14955710
> 
> 赞同：0
> 
> 时间：2013-02-19T10:56:26.557
> 
> 标签：css, twitter-bootstrap, cross-browser

我正在为 IE8 做一些跨浏览器修复，我遇到了一些我以前从未见过的东西。有没有人见过这种疯狂的影子？有没有人知道可能是什么原因造成的？

我附上了两张截图，一张来自 IE8，一张来自 Chrome。

IE8 - [http://cl.ly/image/1u0t0A2D0p0l](http://cl.ly/image/1u0t0A2D0p0l) Chrome - [http://cl.ly/image/411L1B0Y2X3Y](http://cl.ly/image/411L1B0Y2X3Y)

感谢您提供任何帮助！

在此处查看 HTML 和 CSS：http: [//marcusfriberg.com/skillbird/stof.html](http://marcusfriberg.com/skillbird/stof.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:53:32.517

This problem is not only happening in IE8 but also in IE9\. When I checked through Developer tool, It is clearly showing that it is happening because of the property `filter` which is given in the `post-top` and `stats-type` classes. I suggest you to go with **conditional css** to overcome this problem. Have a look at this [**link**](http://msdn.microsoft.com/en-in/library/ie/ms530752%28v=vs.85%29.aspx)(*community additions too*) for clear understanding about the behaviour of `filter` in IE browsers.

**EDIT**:

And also in MDN, The `filter` property is not documented for IE browsers. [Check compatibility section](https://developer.mozilla.org/en-US/docs/CSS/filter#Browser_compatibility). It also stated that

> Older versions (4.0 through 9.0) of the Windows Internet Explorer browser supported a non-standard "filter" that has since been deprecated.

The other `filter` property which is compatible with IE Browsers can be found at this [link](http://msdn.microsoft.com/en-us/library/ms532853%28v=vs.85%29.aspx) (not for IE9).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:25:51.400

IE8 不支持`text-shadow`CSS，这是 Chrome 和 IE 似乎在这里使用的。

[http://caniuse.com/css-textshadow](http://caniuse.com/css-textshadow)

如果这是您继承的代码，那么很可能有人试图对 IE 使用另一种方法，但结果严重错误。

IE 有许多后备想法，但一种流行的想法是使用“IE 过滤器”。

有时，这些专有的 IE 过滤器可以达到与标准 CSS 类似的效果，但在其他时候，它们需要微调。

您可能需要扫描您的 CSS 文件以使用过滤器并根据需要进行调整。代码看起来类似于：

```
#element {  
    filter: alpha(opacity=70); /* the opacity won't work! */  
    filter: glow(color=black,strength=5);  
} 
```

有关更多信息，请参阅这篇文章：

[http://www.impressivewebs.com/css3-text-shadow-ie/](http://www.impressivewebs.com/css3-text-shadow-ie/)

为了在 IE 中实现更好的 text-shadow 效果，我使用了 CSS Pie。太奇妙了。在这里查看：

[http://css3pie.com/](http://css3pie.com/)

它现在甚至在我客户的一个网站上使用：[http ://www.tokheim.com](http://www.tokheim.com)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:10:48.363

截至本[网站](http://css-tricks.com/snippets/css/css-text-shadow/)：

```
p { text-shadow: 1px 1px 1px #000, 3px 3px 5px blue; } 
```

“第一个值指定水平距离，第二个指定阴影的垂直距离。第三个值指定模糊半径，最后一个值描述阴影的颜色。”

这意味着您的 Y 轴过滤器值太大。

# eclipse - 无法在 Tomcat 7 上加载任何内容：配置问题

> ID：14955713
> 
> 赞同：1
> 
> 时间：2013-02-19T10:56:33.950
> 
> 标签：eclipse, tomcat, servlets, configuration

我目前正在开发一个在 Tomcat 7 上运行的 Web 项目，但我看不到任何应该在 Tomcat 上的东西（当我在浏览器中执行 HTTP 请求时出现空白页面）。

### 我的作案手法：

*   我在 Eclipse 中的 locahost (apache-tomcat-7.0.34) 中启动了一个新的服务器实例（我使用 Indigo 并尝试使用 Juno）
*   Tomcat 的 ROOT 文件夹已粘贴到我工作区中所有服务器的“wtpwebapps”文件夹中
*   我在此服务器实例上添加了一个简单的 Web 项目，并尝试从 HTTP 请求访问它，但我得到一个空白页面。如果我尝试在此服务器上运行此 Web 项目的 .html 文件，则会收到“未找到 HTTP 404”错误。

### 我尝试了什么：

我尝试从头开始构建整个配置（新的 Eclipse，新的 Apache-Tomcat），但我仍然得到相同的结果。但是当我在家里的个人电脑上这样做时，一切正常！！

我试图把我的代码的旧版本或教程项目，但什么都不能启动（因此，它必须是配置问题）。

我检查了 server.xml 和 web.xml 文件，没有任何可疑之处（如果你愿意，我可以粘贴它们，但它们与在家工作的相同）

我唯一能想到的是我更改了我正在使用的计算机的互联网连接（和 IP 地址），但我认为在尝试访问 localhost 时不会有任何区别，对吧？

当我按照[非常好的教程](http://www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html)的步骤进行操作时，我确实得到了一个关于“运行 Tomcat”主题的空白页面，但是一旦我将 ROOT 文件夹复制到“wtpwebapps”中，我就没有得到 Tomcat 欢迎页面。

有人知道它可能来自哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:01:43.900

好的，伙计们，终于找到了解决方案。
当我意识到端口 8009 实际上被另一个进程使用时，我正要格式化我的计算机。
我认为这是在 Eclipse 中启动 Tomcat 服务器时会检查的内容，但它没有显示任何错误。
HTTP 请求通过了 80 端口，但是由于默认的 AJP 端口已经在使用中，Apache 无法将此请求转发给 Tomcat，因此返回了一个空白页面。

至少我对这种情况的理解是这样的……

希望这可以帮助遇到类似情况的人。

谢谢你的帮助。

# matomo - 每个用户 ID 以及或代替每个 IP 的 PIWIK 商店访问次数

> ID：14955714
> 
> 赞同：3
> 
> 时间：2013-02-19T10:56:39.490
> 
> 标签：matomo

我有 piwik 来跟踪我的网站访问。我的网站有一个登录页面，我想按用户 ID 进行分析，不一定按 IP。有没有一种方法可以让 piwik 存储我的用户会话变量，以便我准确知道哪些用户使用了确定的页面？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-27T00:36:26.723

除了使用自定义变量，您还可以使用[Piwik 的内置用户 ID 功能](http://piwik.org/docs/user-id/)，它还具有允许 Piwik 更准确地跟踪唯一性的额外好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T23:55:44.047

这样做的方法是通过自定义变量。

基本代码：

`piwikTracker.setCustomVariable(1, "Member", "<?php echo $username;?>", "visit"); piwikTracker.trackPageView();`

访问范围将持续到会话

Piwik 文档位于： [http://piwik.org/docs/custom-variables/](http://piwik.org/docs/custom-variables/)

# php - 无法在html中显示输出

> ID：14955715
> 
> 赞同：4
> 
> 时间：2013-02-19T10:56:40.860
> 
> 标签：php

我有一个功能可以打印许多学分：

```
<?php
function selectCredits()
{
 include 'sqlvars.php';
 $con = mysql_connect("localhost","bbbb","bbbb");
     if (!$con){
     die('Could not connect: ' . mysql_error());
  }
  mysql_select_db("bbbb", $con);
  $result = mysql_query($selectCredits);

  while($row = mysql_fetch_array($result)){
  echo $row['credits'];
  }
}
?> 
```

当我使用以下命令从 php 文件中调用它时：

```
<?php 
include 'sql.php';
selectCredits();
?> 
```

我可以看到输出，但是当我在 HTML 文档中时，我无法使用以下代码获得结果：

```
 <center><b>Your credits: </b></center> <?php include 'sql.php'; selectCredits(); ?> 
```

输出总是：`Your credits:`没有查询结果。

当然，我错过了一些非常小的东西。我不是一个 php 人，但我愿意学习它，已经失去了一个小时而没有任何成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T09:11:22.790

如果你真的想让 html 文件执行 php 代码，尝试在 htaccess 中加入这一行：

```
AddType application/x-httpd-php .html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:35:53.767

你的代码有问题。你写

```
while($row = mysql_fetch_array($result)){
  echo $row['credits'];
} 
```

您已经使用了 mysql_fetch_array 并且您已经直接回显了带有属性值的 $row。如果您使用 mysql_fetch_array，则使用 $row[0]、$row[1] 或 $row[2] 等。所有属性都以数组的形式出现。这就是为什么你应该把它当作数组索引值。因此，如果“credit”属性位于数据库的第 5 列，则应将其回显为

```
echo $row['4']; 
```

如果你使用mysql_fetch_assoc()而不是mysql_fetch_array，那么你可以直接写属性名。

例如，你可以写

```
echo $row['credits']; 
```

我希望，这将解决问题。如果您还有其他问题，请询问我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T11:30:05.740

检查您的查询语句“$selectCredits”。检查表名和属性名-'credits'。$row['credits'] 没有得到它的价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-25T16:02:19.413

您应该使用 JavaScript 标记来实现 PHP 文件，如下所示：

`<script type="text/javascript" src="credits.php"></script>`

`credits.php`将不得不输出：

`echo "document.write('" . $row['credits'] . "');";`

简单的 ：）

# asp.net - 从 asp.net 创建临时 MySQL 用户

> ID：14955717
> 
> 赞同：0
> 
> 时间：2013-02-19T10:56:46.187
> 
> 标签：asp.net, mysql

在我的 MySQL 数据库中，我有两种用户

1.  MySQL 用户，用于直接从客户端（例如 MySQL 工作台或任何 ODBC 编辑器）连接和访问数据库。
2.  ASP.NET 会员用户 + 角色：用于为我的网站提供登录。

**我的情况**：

当我使用 ASP.NET 用户凭据通过网页登录时。我想创建一个临时的随机 MySQL 用户（分配权限、设置密码等）并将其提供给当前登录的用户（asp.net 用户）以获得对 MySQL 数据库的临时访问权限。

我知道，如果 ASP.NET 用户具有创建用户的 root 访问权限，他也可以完全访问数据库。我的问题是，我必须提供用户名和密码，这样他才能从另一个客户端连接并直接访问数据库。（我不想给他 root 访问权限或永久访问权限）

说了他可以从另一个客户端访问，我想根据他在我的网页中的登录状态来限制这个。就像当他退出我的网页时，新创建的 MySQL 用户被标记为过期或删除。

我认为这应该很有可能，但我想不出任何起点。有人可以帮我吗？

亲切的问候

克里什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:06:33.843

这个有可能。您可以使用[create user](http://dev.mysql.com/doc/refman/5.1/en/create-user.html) and [grant](http://dev.mysql.com/doc/refman/5.1/en/grant.html)语法来创建您的用户并授予他们权限。

但是，您需要维护一个单独的表来映射具有到期日期的 MySQL 用户。

您是否考虑过不同的解决方案？

要完成的工作要多得多，但从长远来看，这可能是一个更稳定/可靠和可扩展的解决方案。

也许使用 NET.NCP 为 MySQL 创建您自己的 WCF 代理，然后您可以拥有由您管理的本地用户帐户/临时帐户，这些帐户授权您的 WCF 服务而不是直接访问数据库，代理将反过来直接连接到您的数据库。此解决方案也适用于 3rd 方应用程序。

使用自定义代理将为您提供更大的控制权，例如：

*   能够为特定用户记录 SQL 清理或限制任何
*   您不想在数据库上执行的特定命令 没有
*   您的 MySQL 服务器可在 Internet 上直接联系
*   横向扩展时将读写拆分到不同的服务器或集群

**编辑1：**根据以下评论：

我不建议在会话结束时依赖事件，因为这并不总是被触发。我建议您创建另一个表来管理用户及其到期时间。例如，包含用户 ID 或用户名和主机以及到期时间的表。根据您的要求，这可以是日期时间/整数（纪元）。然后，您需要调用一个查询来识别该表中所有已过期的帐户，然后您可以从 MySQL 中删除用户帐户。

根据您的 MySQL 版本，您可以将大量逻辑包装到一些存储过程中，这将使查询和维护开销更容易

# frameworks - 实体框架映射外键与集合和 TPH 继承

> ID：14955718
> 
> 赞同：1
> 
> 时间：2013-02-19T10:56:46.540
> 
> 标签：frameworks, foreign-keys, mapping, entity, tph

我尝试用 TPH 继承来映射这个简单的模型：

```
 public abstract class Master {
    public long Id {
        get;
        set;
    }
    public virtual ICollection<Detail> Details {
        get;
        set;
    }

}

public class MasterA : Master {
    public string FieldA {
        get;
        set;
    }
}

public class MasterB : Master {
    public string FieldB {
        get;
        set;
    }
}

public abstract class Detail {
    public long Id {
        get;
        set;
    }
    public long MasterId {
        get;
        set;
    }
    public Master Master {
        get;
        set;
    }
    public String CommonDetailInfo {
        get;
        set;
    }
}

public class DetailA : Detail {
    public MasterA MasterA {
        get;
        set;
    }

    public string SpecificA {
        get;
        set;
    }
}

public class DetailB : Detail {
    public MasterB MasterB {
        get;
        set;
    }
    public string SpecificB {
        get;
        set;
    }
} 
```

映射是用流利的表示法完成的，如下所示：

```
modelBuilder.Entity<Master>().ToTable("TestMaster");
        modelBuilder.Entity<Master>().Property(m => m.Id)
                                     .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        modelBuilder.Entity<Master>().HasKey(m => m.Id);
        modelBuilder.Entity<Master>().Map<MasterA>(m => m.Requires("MasterType").HasValue("A"));
        modelBuilder.Entity<Master>().Map<MasterB>(m => m.Requires("MasterType").HasValue("B"));

        modelBuilder.Entity<Detail>().ToTable("TestDetail");
        modelBuilder.Entity<Detail>().Property(d => d.Id)
                                     .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        modelBuilder.Entity<Detail>().HasKey(d => d.Id);
        modelBuilder.Entity<Detail>().Map<DetailA>(m => m.Requires("DetailType").HasValue("A"));
        modelBuilder.Entity<Detail>().Map<DetailB>(m => m.Requires("DetailType").HasValue("B"));

        modelBuilder.Entity<Master>()
            .HasMany(m => m.Details)
            .WithRequired(d => d.Master)
            .HasForeignKey(f => f.MasterId)
            .WillCascadeOnDelete(); 
```

如果我让 EF 创建我的数据库，则会在 TestDetail 表中添加两个字段：

```
MasterA_Id
MasterB_Id 
```

但是这两个字段总是 Null 和多余的，因为基础 Dteail 类上的 MasterId 字段做同样的工作？

如果我从数据库中删除这些字段并尝试获取主记录的详细信息，如下所示：

```
 foreach (var detail in master.Details) {...} 
```

引发异常：当我访问“详细信息”属性时，列名 MasterA_Id、MasterB_Id 无效。

我做错了什么？如何在 TPH 模式下映射此模型，而数据库中没有这两个字段？

谢谢你的帮助。

# python - 在 wxpython 中使用套接字

> ID：14955720
> 
> 赞同：2
> 
> 时间：2013-02-19T10:56:50.450
> 
> 标签：wxpython 制作, python, sockets, tcp, wxpython

我有一个 TCP 服务器和一个 TCP 客户端。
我想使用[wxpython 制作](/questions/tagged/wxpython "显示标记为“wxpython”的问题")下面代码的 GUI 版本。
我已经准备好 GUI 界面脚本，但是在合并这两个脚本时遇到了问题。

如何合并我的套接字脚本和我的 GUI？

**我的套接字服务器**

```
from socket import *
from time import ctime
import random

bufsiz = 1024
port = random.randint(1025,36000)
host = 'localhost'
addr = (host, port)
print 'Port:',port

tcpServer = socket(AF_INET , SOCK_STREAM)
tcpServer.bind(addr)
tcpServer.listen(5)
try:
    while True:
        print 'Waiting for connection..'
        tcpClient, caddr = tcpServer.accept()
        print 'Connected To',caddr

        while True:
            data = tcpClient.recv(bufsiz)
            if not data:
                break
            tcpClient.send('[%s]\nData\n%s' % (ctime(),data))
            print data
        tcpClient.close()

except KeyboardInterrupt:
    tcpServer.close()

raw_input('Enter to Quit') 
```

**我的 GUI 脚本**（使用 wxglade 制作）

```
#!/usr/bin/env python
# -*- coding: iso-8859-15 -*-
# generated by wxGlade 0.6.5 (standalone edition) on Mon Feb 18 19:50:59 2013

import wx

# begin wxGlade: extracode
# end wxGlade

class MyFrame(wx.Frame):
    def __init__(self, *args, **kwds):
        # begin wxGlade: MyFrame.__init__
        kwds["style"] = wx.DEFAULT_FRAME_STYLE
        wx.Frame.__init__(self, *args, **kwds)
        self.chat_log = wx.TextCtrl(self, -1, "", style=wx.TE_MULTILINE | wx.TE_READONLY)
        self.text_send = wx.TextCtrl(self, -1, "")

        self.__set_properties()
        self.__do_layout()

        self.Bind(wx.EVT_TEXT_ENTER, self.text_e, self.text_send)
        # end wxGlade

    def __set_properties(self):
        # begin wxGlade: MyFrame.__set_properties
        self.SetTitle("frame_1")
        self.SetSize((653, 467))
        self.chat_log.SetMinSize((635, 400))
        self.text_send.SetMinSize((635, -1))
        self.text_send.SetFocus()
        # end wxGlade

    def __do_layout(self):
        # begin wxGlade: MyFrame.__do_layout
        sizer_1 = wx.FlexGridSizer(1, 1, 1, 1)
        sizer_1.Add(self.chat_log, 0, 0, 0)
        sizer_1.Add(self.text_send, 0, wx.ALL, 1)
        self.SetSizer(sizer_1)
        self.Layout()
        # end wxGlade

    def text_e(self, event):  # wxGlade: MyFrame.<event_handler>
        text = self.text_send.GetValue()
        self.chat_log.AppendText("\n"+text)
        self.text_send.SetValue("")
        event.Skip()

# end of class MyFrame

class MyMenuBar(wx.MenuBar):
    def __init__(self, *args, **kwds):
        # begin wxGlade: MyMenuBar.__init__
        wx.MenuBar.__init__(self, *args, **kwds)
        self.File = wx.Menu()
        self.Append(self.File, "File")
        self.View = wx.Menu()
        self.Append(self.View, "View")

        self.__set_properties()
        self.__do_layout()
        # end wxGlade

    def __set_properties(self):
        # begin wxGlade: MyMenuBar.__set_properties
        pass
        # end wxGlade

    def __do_layout(self):
        # begin wxGlade: MyMenuBar.__do_layout
        pass
        # end wxGlade

# end of class MyMenuBar
if __name__ == "__main__":
    app = wx.PySimpleApp(0)
    wx.InitAllImageHandlers()
    frame_1 = MyFrame(None, -1, "")
    app.SetTopWindow(frame_1)
    frame_1.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:08:23.063

简而言之：将您的第一个脚本封装成一个函数。将您的函数导入 wxPython 应用程序。从某个事件处理程序调用该函数。将您的函数响应传达回 GUI。

但是，您需要重新设计您的软件，使其不包含无限循环。事件处理程序应该只运行很短的时间。另一种方法是在单独的线程中运行您的函数，与 GUI 通信响应并添加从主 GUI 线程终止线程的能力。

这些方面的东西：

```
import wx
from socket import *
from time import ctime
import random
import threading

bufsiz = 1024
port = random.randint(1025,36000)
host = 'localhost'
addr = (host, port)

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)
        self.text = wx.TextCtrl(self.panel, style=wx.TE_MULTILINE)

        self.sizer = wx.BoxSizer()
        self.sizer.Add(self.text, 1, wx.ALL | wx.EXPAND, 5)

        self.panel.SetSizerAndFit(self.sizer)  
        self.Show()

        self.thread = threading.Thread(target=self.Server)
        self.thread.start()

    def Print(self, text):
        wx.CallAfter(self.text.AppendText, text + "\n")

    def Server(self):
        self.Print("Port: {}".format(port))

        tcpServer = socket(AF_INET , SOCK_STREAM)
        tcpServer.bind(addr)
        tcpServer.listen(5)
        try:
            while True:
                self.Print("Waiting for connection...")
                tcpClient, caddr = tcpServer.accept()
                self.Print("Connected To {}".format(caddr))

                while True:
                    data = tcpClient.recv(bufsiz)
                    if not data:
                        break
                    tcpClient.send('[%s]\nData\n%s' % (ctime(), data))
                    self.Print(data)
                tcpClient.close()

        except KeyboardInterrupt:
            tcpServer.close()

app = wx.App(False)
win = MainWindow(None)
app.MainLoop() 
```

但是，这不会在退出时终止另一个线程。`tcpServer.accept()`正在阻塞操作。您可能想查看这个[答案](https://stackoverflow.com/questions/5308080/python-socket-accept-nonblocking)如何以非阻塞方式连接到套接字。然后，您将能够使用某些类型的共享标志轻松终止您的线程。

# javascript - 为什么按钮 onclick 会触发多次？

> ID：14955721
> 
> 赞同：1
> 
> 时间：2013-02-19T10:56:55.967
> 
> 标签：javascript, asp.net, javascript-events, event-handling

我有一个 ajaxmodalpop，它有一些控件，如下所示；问题是每当我在文本框上按“Enter”键时，它会将焦点设置在按钮上（这是正确的），但是**如果我非常快速地按五六次（或多次）“Enter 键”，那么按钮会触发与我一样多次按下回车键。** 虽然我在客户端单击按钮时有一个验证功能，但它不能（如果文本框值被清除，甚至无法通过验证功能）每隔一次传递该功能。因为我从服务器端清除了文本框值。

**非常紧急，亲爱的专家**

```
<asp:TextBox ID="txtPurpose" runat="server" TabIndex="4" Width="558px" Style="text-transform: uppercase; overflow: hidden" CssClass="textleftWithBorder" ClientIDMode="Static" onkeydown="ConvertEnterToTab(event)">/asp:TextBox> 
<asp:Button runat="server" ID="btnSubmitNAdd" TabIndex="5" Text="Submit & Add" ClientIDMode="Static" UseSubmitBehavior="true" onkeydown="HandleLeftRightArrow(event,'btnClose','btnSubmitAndClose')"                  OnClick="btnSubmitNAdd_Click" OnClientClick="return Validate()" /> 
```

和功能是；

```
 function ConvertEnterToTab(e) {
        var keyCode = e.keyCode || e.htmlEvent.keyCode;
        if (keyCode === 13) {
            var nextElement = document.getElementById("btnSubmitNAdd");
            if (nextElement != undefined) {
                nextElement.focus();
                e.cancelBubble = true;
                e.returnValue = false;
                return false;
            }
        }
    }

  function Validate() {
        if (ValueOf("txtCustomerName") != _CustomerResetText) {               
                return true;
            }
            else {                    
                return false;
            }           
    }

  function HandleLeftRightArrow(event, leftControl, rightControl) {
        var code = (event.keyCode ? event.keyCode : event.which);
        if (code == 39) {
            if (document.getElementById(leftControl).disabled == false)
                SetControlFocus(rightControl);
        }
        else if (code == 37) {
            if (document.getElementById(rightControl).disabled == false)
                SetControlFocus(leftControl);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:06:58.430

如果按钮在单击时通过验证，则应禁用该按钮。

```
UseSubmitBehavior="false" OnClientClick="if(Validate()){this.disabled=true;}" 
```

# teradata - 数据库在尝试将大小为 2MB 的文件存储为 BLOB 数据时引发异常

> ID：14955723
> 
> 赞同：1
> 
> 时间：2013-02-19T10:56:59.017
> 
> 标签：teradata

在我的一个应用程序中，我试图通过使用 JDBC 连接将一个文件（文件大小为 2MB）作为 BLOB 数据保存到 teradata 数据库表中。但是每次我遇到一个异常时，如下所示

**com.teradata.jdbc.jdbc_4.util.JDBCException: [Teradata JDBC Driver] [TeraJDBC 14.00.00.01] [Error 1186] [SQLState HY000] 参数2长度为2215538字节，大于可设置的最大64000字节.**

请帮我解决这个问题。

谢谢， 苏拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:45:49.360

尝试将 blob 列设置得更大，或者只使用系统默认值，即 2097088000 btw。

这来自 Teradata 用户文档：SQL 数据类型和文字第 7 章“为 BLOB 列分配的字节数。最大字节数为 2097088000，如果未指定 n，则为默认值。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T07:38:13.247

假设您有字符串格式的数据，我们可以使用 setCharacterStream 绕过 64000 字节的限制。

使用preparedStatement插入大量数据clob列作为

```
pStmt.setCharacterStream(paramterIndex, new StringReader(StringToBeInserted), StringToBeInserted.length()); 
```

# android - 获取Android设备的方向

> ID：14955728
> 
> 赞同：7
> 
> 时间：2013-02-19T10:57:11.097
> 
> 标签：android, orientation

你会认为会有一个直截了当的解决方案。Android 文档状态：

> 方向传感器在 Android 2.2（API 级别 8）中已弃用。我们建议您将 getRotationMatrix() 方法与 getOrientation() 方法结合使用来计算方向值，而不是使用来自方向传感器的原始数据。

然而，他们没有提供关于如何实施`getOrientation()`和`getRotationMatrix()`. 我花了几个小时阅读这里关于使用这些方法的开发人员的帖子，但他们都有部分粘贴的代码或一些奇怪的实现。谷歌搜索没有提供教程。有人可以使用这两种方法粘贴一个简单的解决方案来生成方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T11:25:23.880

这是以下的实现`getOrientation()`：

```
public int getscrOrientation()
    {
        Display getOrient = getWindowManager().getDefaultDisplay();

        int orientation = getOrient.getOrientation();

        // Sometimes you may get undefined orientation Value is 0
        // simple logic solves the problem compare the screen
        // X,Y Co-ordinates and determine the Orientation in such cases
        if(orientation==Configuration.ORIENTATION_UNDEFINED){

            Configuration config = getResources().getConfiguration();
            orientation = config.orientation;

            if(orientation==Configuration.ORIENTATION_UNDEFINED){
                //if height and widht of screen are equal then
                // it is square orientation
                if(getOrient.getWidth()==getOrient.getHeight()){
                    orientation = Configuration.ORIENTATION_SQUARE;
                }else{ //if widht is less than height than it is portrait
                    if(getOrient.getWidth() < getOrient.getHeight()){
                        orientation = Configuration.ORIENTATION_PORTRAIT;
                    }else{ // if it is not any of the above it will definitely be landscape
                        orientation = Configuration.ORIENTATION_LANDSCAPE;
                    }
                }
            }
        }
        return orientation; // return value 1 is portrait and 2 is Landscape Mode
    } 
```

你也可以参考这个例子，它代表了这两种方法的使用：

```
 getOrientation and getRotationMatrix 
```

[http://www.codingforandroid.com/2011/01/using-orientation-sensors-simple.html](http://www.codingforandroid.com/2011/01/using-orientation-sensors-simple.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-09T09:14:50.453

```
 public int getScreenOrientation() {

// Query what the orientation currently really is.
if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)                {
    return 1; // Portrait Mode

}else if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
    return 2;   // Landscape mode
}
return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-23T19:02:17.003

```
protected void onResume() {
    // change the screen orientation
    if(getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
        setContentView(R.layout.portrait);
    } else if(getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
        setContentView(R.layout.landscape);
    } else {
        setContentView(R.layout.oops);
    }
} 
```

# c++ - 从 DLL 创建和加载对话框

> ID：14955729
> 
> 赞同：0
> 
> 时间：2013-02-19T10:57:15.883
> 
> 标签：c++, winapi, dll

我在 Win32 DLL（使用资源编辑器）中创建了一个对话框，现在想将其显示为应用程序（使用此 DLL）调用 DisplayDialog，但它不起作用。

```
// AppProgram.cpp
...
LRESULT CALLBACK WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
  switch (msg) {
    case WM_COMMAND:
      switch (LOWORD (wParam)) {
          case IDM_FILE_NEW_DIALOG:
              DisplayDialog (hInst, hWnd);
              break;
          ...
      }
      break;
      ....
  }
 return DefWindowProc(hWnd, msg, wParam, lParam);
} 
```

我的 DLL 看起来像

```
#include "stdafx.h"
#include "myDLL.h"

EXPORT BOOL CALLBACK DisplayDialog (HINSTANCE hInst, HWND hWnd) {
   DialogBox (hInst, MAKEINTRESOURCE (IDD_DIALOG1), hWnd, reinterpret_cast<DLGPROC> (DiagProc));
   // MessageBox works here
}
... 
```

如果对话框属于 AppProgram，我已经测试过该 DLL 是否显示对话框。在这里，我想在它是 DLL 的一部分时显示对话框。

请建议我们是应该在 DLL 中创建对话框还是应该从程序中传递它。+ 如何在给定场景中显示对话框。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:16:07.727

该`hInst`参数是包含对话资源的模块的句柄。如果您想从 DL 的资源 L 中获取对话框，则将句柄传递给 DLL，而不是将句柄传递给主应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:33:05.817

像这样的东西：

```
HMODULE module  = LoadLibrary("MyDll.dll");
HRSRC res = FindResource(module, "#1234", RT_DIALOG);
DLGTEMPLATE* pTemplate = (DLGTEMPLATE*)LoadResource(module, res);
DialogBoxIndirect(0, pTemplate, hwnd, dlgproc); 
```

# php - 当我尝试使用 jupgrade 将 joomla 版本从 1.5.24 更新到 2.5 时出现此错误

> ID：14955730
> 
> 赞同：-2
> 
> 时间：2013-02-19T10:57:16.810
> 
> 标签：php, joomla, joomla2.5, joomla1.5

我找到了一种使用 jupgrade 将 joomla 版本从 1.5 更新到 2.5 的方法。

我已经下载了 jupgradePro ，但是当我在管理员的扩展管理器中上传它时会引发错误。

```
**JFolder::create: Could not create directory
Warning! Failed to move file.** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:01:02.783

Joomla 有关于从 1.5 迁移到 2.5 的文档：

[http://docs.joomla.org/Migrating_from_Joomla_1.5_to_Joomla_2.5](http://docs.joomla.org/Migrating_from_Joomla_1.5_to_Joomla_2.5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:39:18.903

我的意见是创建一个全新的 joomla 2.5 站点。

我尝试将我的 joomla 网站从 1.5 更新到 2.5，但出现了很多错误。一个特别带有不支持 joomla 2.5 的旧组件

# ios - IAP 恢复自定义交易

> ID：14955735
> 
> 赞同：3
> 
> 时间：2013-02-19T10:57:25.017
> 
> 标签：ios, in-app-purchase

我是 iOS 新手，我想知道是否有可能指定哪个已完成的交易用户想要恢复？现在我正在使用：

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

而且我在那里找不到任何东西来确切地告诉我要恢复哪个交易。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:01:18.490

你走在正确的轨道上。添加

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

并添加委托函数 paymentQueueRestoreCompletedTransactionsFinished。在此功能中，您可以添加特定的产品 ID。

```
- (void) paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
{
    NSMutableArray *purchasedItemIDs = [[NSMutableArray alloc] init];

    //NSLog(@"received restored transactions: %i", queue.transactions.count);
    for (SKPaymentTransaction *transaction in queue.transactions)
    {
        NSString *productID = transaction.payment.productIdentifier;
        [purchasedItemIDs addObject:productID];

        if([productID isEqualToString:IN_APP_KEY_UNLOCK_SHIP_2])
        {
            //NSError *error = nil;
            [[NSNotificationCenter defaultCenter] postNotificationName:@"ship2PurchaseRestored" object:nil];
        }
    }

} 
```

# firefox - 乔治亚字体不在 FireFox 中显示（但在所有其他浏览器中都很好）？

> ID：14955740
> 
> 赞同：0
> 
> 时间：2013-02-19T10:57:45.407
> 
> 标签：firefox, fonts, font-face

所以我将我的网站设置为使用这个字体堆栈：

```
Georgia, "Times New Roman", Times, serif 
```

我已经在 Chrome、Internet Explorer 和 Safari 中对此进行了测试——它们都显示了堆栈中的第一个字体，Georgia。

但是 Firefox 会跳过 Georgia 并显示 Times New Roman。既然我在我的网站上注意到了这一点，我也通过 Firefox 在所有其他网站上注意到了这一点——它根本不喜欢 Georgia 字体。

该字体安装在我的机器上，并且在我的所有其他程序（包括 Word 和 Photoshop）中都可以正常工作。

任何人都知道为什么 FireFox 与 Georgia Font 失之交臂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:14:34.057

也许格鲁吉亚丢失或损坏，Firefox 将其替换为不同的。

您可以进行测试以识别损坏的字体： [http ://browserspy.dk/fonts-flash.php?detail=1](http://browserspy.dk/fonts-flash.php?detail=1)

# c# - 数组/列表/对象到 JSON 问题

> ID：14955743
> 
> 赞同：0
> 
> 时间：2013-02-19T10:57:52.727
> 
> 标签：c#, json, serialization

我有一个关于将列表/数组序列化为 JSON 的问题。这是在 WFS 中完成的，我正在使用它的序列化（即我自己不做任何事情）这是我所拥有的粗略代码：

```
[DataContract]
public class MyObject
{
  [DataMember]
  string name;
  [DataMember]
  string value;
  public MyObject(string n, string v)
  {
     name = n;
    value = v;
  }
} 
```

然后我有这些对象的列表：

```
List <MyObject> lst = new List <MyObject>();
lst.add(new MyObject("Surname", "Smith"));
return lst; 
```

现在生成的 JSON 类似于：

```
[{"name":"Surname", "value":"Smith"}] 
```

然而，我想得到的是：

```
[{"Surname":"Smith"}] 
```

我在对象定义或其他地方做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:17:08.697

使用来自 newtonsoft 的 json.net。它以您想要的形式连载。

# plone - 为敏捷类型设置 UID

> ID：14955747
> 
> 赞同：4
> 
> 时间：2013-02-19T10:58:00.007
> 
> 标签：plone, dexterity

我正在将内容从 Archetypes 迁移到 Dexterity，并且我需要新项目与旧项目具有相同的 UID。

在原型项目上，我可以调用 context._setUID('my-uid')。敏捷有类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T11:18:59.870

对于 Dexterity UUID 值，使用[`plone.uuid`包](http://pypi.python.org/pypi/plone.uuid)。`plone.uuid`只需将值存储在属性中。

以下内容足以在现有的 Dexterity 对象上设置预定的 UUID `obj`：

```
from plone.uuid.interfaces import ATTRIBUTE_NAME

setattr(obj, ATTRIBUTE_NAME, uuid) 
```

# android - 我的 Android 应用程序不使用自定义适配器显示 ListView

> ID：14955749
> 
> 赞同：-1
> 
> 时间：2013-02-19T10:58:05.833
> 
> 标签：android, listview, adapter, custom-adapter

我正在编写一个 android 应用程序，它应该从 parse.com 数据库中获取歌曲数据并使用自定义 Listview 显示它。

我按照 Nitin 建议的方式尝试了它，但仍然没有显示任何列表视图。

这是新代码：

```
package de.android;

import java.util.ArrayList;
import java.util.List;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

import com.parse.FindCallback;
import com.parse.Parse;
import com.parse.ParseObject;
import com.parse.ParseQuery;

public class Lyrics extends ListActivity {

    ImageButton back;
    ListView songList;
    TextView textAnzeige;
    private ArrayList<String> Titelliste = new ArrayList<String>();
    private ArrayList<String> Interpretliste = new ArrayList<String>();
    private ArrayList<String> Dauerliste = new ArrayList<String>();

    ProgressDialog dialog;

     @Override
       public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_lyrics);

            Parse.initialize(this, "hGxasGU6e0WQAOh5JIOGDfvFBKrYyBJKXIzxBfAG", "WsOPsXerpsFjsjekKKbZnnjAHvXy5PQHVQEB8Cqu");

            initDataToView();

        }

    private void initDataToView() {

        new getData().execute();
        songList = (ListView)findViewById(android.R.id.list);

    }

    private class getData extends AsyncTask<Void, Void, SongAdapter>{

        ProgressDialog dialog;
        @Override
        protected void onPreExecute() {
            dialog = new ProgressDialog(Lyrics.this);
            dialog.setMessage("Please wait, while loading!");
            dialog.setIndeterminate(true);
            dialog.setCancelable(false);
            dialog.show();
            Log.d("Parse", "PreExecute");
        }

        @Override
        protected SongAdapter doInBackground(Void... params) {

            ParseQuery pq = new ParseQuery("SongDatenbank");
            pq.whereExists("Titel");
            pq.findInBackground(new FindCallback() {

                @Override
                public void done(List<ParseObject> liederListe,
                        com.parse.ParseException e) {
                    if(e==null){
                        Log.d("Parse", "Objektliste empfangen");

                            ParseObject x;

                        for(int i=0;i<liederListe.size();i++){
                            x = liederListe.get(i);
                            Titelliste.add(x.getString("Titel"));
                            Dauerliste.add(x.getString("Dauer"));
                            Interpretliste.add(x.getString("Interpret"));
                        }
                        initDataToView(); 

                        x = liederListe.get(0);

                        Log.d("Parse", x.getString("Titel"));
                        Log.d("Parse", x.getString("Dauer"));
                        Log.d("Parse", x.getString("Interpret"));

                    }else{

                        Log.d("Parse", "Objektliste nicht empfangen");
                    }
                }

            });

            return null;
        }

        protected void onPostExecute(SongAdapter result) {

            songList.setAdapter(result);

            dialog.dismiss();
            Log.d("Parse", "Postexecute");
        }

    }

    public class SongAdapter extends ArrayAdapter<String> {
         private final Context context;
         private final ArrayList<String> valuesTitel;
         private final ArrayList<String> valuesInterpret;
         private final ArrayList<String> valuesDauer;

          public SongAdapter(Context context, ArrayList<String> valuesTitel, ArrayList<String> valuesInterpret, ArrayList<String> valuesDauer) {
            super(context, R.layout.list_row);
            this.context = context;
            this.valuesTitel = valuesTitel;
            this.valuesInterpret = valuesInterpret;
            this.valuesDauer = valuesDauer;
          }

          public View getView(int position, View convertView, ViewGroup parent){
              LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

              View rowView = inflater.inflate(R.layout.list_row, parent, false);
              ImageView imageView = (ImageView)rowView.findViewById(R.id.list_image);
              TextView titelText = (TextView)rowView.findViewById(R.id.title);
              TextView artistText = (TextView)rowView.findViewById(R.id.artist);
              TextView duration = (TextView)rowView.findViewById(R.id.duration);

              titelText.setText(valuesTitel.get(position));
              artistText.setText(valuesInterpret.get(position));
              duration.setText(valuesDauer.get(position));
              Log.d("Parse", valuesTitel.get(position));
              return rowView;

          }

    }} 
```

我认为问题在于解析数据并将它们作为参数提供给适配器。知道怎么做吗？

如果有人可以查看我的代码并帮助我解决问题，我将不胜感激。

谢谢，保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:15:13.807

我建议你制作一个 Handler 来更新用户界面或使用 Asynctask

[从 Thread 更新 UI](https://stackoverflow.com/questions/4369537/update-ui-from-thread)

检查第一个答案中的链接，它讲述了 doInBackground 方法中的长时间操作，您应该获取数据并在 onPostExecute 中设置适配器

阅读以下代码中的注释。

```
private class PrepareAdapter1 extends AsyncTask<Void,Void,ContactsListCursorAdapter > {
    ProgressDialog dialog;
    @Override
    protected void onPreExecute() {
        dialog = new ProgressDialog(viewContacts.this);
        dialog.setMessage(getString(R.string.please_wait_while_loading));
        dialog.setIndeterminate(true);
        dialog.setCancelable(false);
        dialog.show();
    }
    /* (non-Javadoc)
     * @see android.os.AsyncTask#doInBackground(Params[])
     */
    @Override
    protected ContactsListCursorAdapter doInBackground(Void... params) {

        //do here parsing   

        return adapter1;
    }

     protected void onPostExecute(ContactsListCursorAdapter result) {
           dialog.dismiss();
    //Set Adapter
            list.setAdapter(result);

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:18:41.587

检查`R.layout.list_row`。设计得当与否。即布局的高度和宽度为fill_parent。因为从您的代码来看，一切都很好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T11:13:07.553

Adapter类中没有`getCount`方法，试试下面的代码

```
 @Override
    public int getCount() 
    {
        return x.size();// number of datas in the list .
    } 
```

此方法指定 getView 自动填充的次数。

............还有一个建议是使用`extend BaseAdapter`而不是`ArrayAdapter<String>`

# c# - switch 语句是否保证顺序？

> ID：14955751
> 
> 赞同：3
> 
> 时间：2013-02-19T10:58:07.460
> 
> 标签：c#, switch-statement, hashtable

我在很多地方读到过，`switch`带有 case 的语句`string`可能会被优化（通过编译器或 JIT）到哈希表中以提高性能。具有不完美散列函数的散列表显然不能保证项目顺序，所以我想知道：

1.  C# 编译器或 JIT 能否执行优化，将`switch`语句转换为哈希表以提供恒定时间性能？

2.  C#中的`switch`语句是否**保证**`case`按从上到下的顺序检查 's？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:06:02.303

不，没有**任何保证**将保持顺序，因为这是*纯粹的编译器实现细节*，所以即使现在是真的，因为`.net 5.1`（比如说）可能是错误的。

`switch/case`构造用于识别不同可用选项之间的唯一选项。所以，顺序无关紧要，如果不是从性能的角度来看，但即使在那里，它也基本上是无关紧要的，*如果*不是，由于上述原因无法预测。

因此，如果您正在寻找一些性能瓶颈，请不要注意这一点，并查看程序的其他部分。

# string - 如何批量格式化 CSV 文件中的字符串属性？

> ID：14955752
> 
> 赞同：0
> 
> 时间：2013-02-19T10:58:07.337
> 
> 标签：string, csv, edit, batch-processing

所以我有一个大约 15,000 行的 csv 文件。我只需要编辑作为邮政编码的 10 列之一。没有一列有标题。它目前的格式为“AB101AA”，我需要将其更改为“AB10 1AA”。

首先，有没有一种方法可以让每一行都这样做？

然后变得更加复杂，因为邮政编码的格式因这四种类型而异；

*   'A1 1AA',
*   'A10 1AA',
*   'AB1 1AA' 和
*   'AB10 1AA'。

我想要做的是找到一种方法来遍历每一行，首先测试格式以检查它是否如上所述，然后在需要时进行编辑，以强制使用该空间。

任何帮助将非常感激。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:05:18.887

那么用Excel打开怎么样

*   使用公式添加包含第一个`LENGTH(A1)-3`字符、一个空格和最后三个字符的列（复制/粘贴，或拖动单元格右下角的 +，以确保在那个新专栏）
*   复制额外的列
*   将值粘贴到原始列上
*   删除多余的列

# c# - 向 WPF RichTextBox 上下文菜单添加自定义选项

> ID：14955755
> 
> 赞同：3
> 
> 时间：2013-02-19T10:58:10.007
> 
> 标签：c#, wpf, contextmenu, richtextbox

我有一个 WPF RichTextBox，我想在默认上下文菜单中添加更多选项。我不想放弃默认菜单选项（剪切、复制、粘贴）。你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-06T09:46:37.237

Extending the previous answer:

```
<RichTextBox x:Name="rtbTest">
   <RichTextBox.ContextMenu>
     <ContextMenu>
       <MenuItem Command="ApplicationCommands.Cut"/>
       <MenuItem Command="ApplicationCommands.Copy"/>
       <MenuItem Command="ApplicationCommands.Paste"/>
       <MenuItem Header="Custom Item"/>
    </ContextMenu>
  </RichTextBox.ContextMenu>
</RichTextBox> 
```

Each command is provided with a [default UI Text and Key Gesture](http://msdn.microsoft.com/en-us/library/system.windows.input.applicationcommands.copy%28v=vs.110%29.aspx), by omitting them (in this case the 'Header') from your definition they will fallback to the default, which will be in the users own preferred language.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T12:18:08.863

恐怕这可能或不可能，但一个简单的解决方法（您可能也知道）是将所有这些应用程序命令添加回上下文菜单项，然后在此之后添加自定义菜单项：

```
<RichTextBox x:Name="rtbTest">
        <RichTextBox.ContextMenu>
            <ContextMenu>
                <MenuItem Header="Cut" Command="ApplicationCommands.Cut"/>
                <MenuItem Header="Copy" Command="ApplicationCommands.Copy"/>
                <MenuItem Header="Paste" Command="ApplicationCommands.Paste"/>
                <MenuItem Header="Custom Item"/>
            </ContextMenu>
        </RichTextBox.ContextMenu>
    </RichTextBox> 
```

这是一种解决方法，但您可以使用它轻松实现您的目的:)

# java - 覆盖返回 T 的泛型超类的方法

> ID：14955764
> 
> 赞同：0
> 
> 时间：2013-02-19T10:58:24.633
> 
> 标签：java, generics, inheritance, subclass

超级班看起来像这样：

```
public class DomainRepository<T> {
    public DomainRepository(Class genericType) {
        this.genericType = genericType;
    }

    @Transactional(readOnly = true)
    public T get(final long id) {
        return (T) sessionFactory.getCurrentSession().get(genericType, id);
    }
} 
```

子类看起来像这样

```
public class FooRepository extends DomainRepository<Foo> {
    public FooRepository(){
        super(Foo.class);
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class)
    public Foo get(final Long id) { //blah blah 
```

但是我的 IDE 突出显示了 @Override 注释 sayign 方法上的错误确实覆盖了任何东西......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:01:06.530

好像`Long`和`long`不匹配。

# jquery - 在 dataTable 中保存/恢复列宽

> ID：14955767
> 
> 赞同：0
> 
> 时间：2013-02-19T10:58:31.890
> 
> 标签：jquery, datatable, column-width

I'd like to create a dataTable with resizeable columns. When the user resizes a column, I would like to store it somewhere in memory, may be cache or session. The next time the user views the table, I want to be able to set the column widths to match their previous settings.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:58:35.130

将其存储在 cookie 中。所以下次用户访问这个页面并且这个 cookie 是存在的。您可以获得使用值。

# python - 按 SQLAlchemy 中日期时间字段的日期分组

> ID：14955769
> 
> 赞同：2
> 
> 时间：2013-02-19T10:58:42.410
> 
> 标签：python, mysql, group-by, sqlalchemy

我的数据库是 MySQL。我的表结构是：

```
name: Unicode(255)
created_at: DateTime 
```

通过以下查询，我可以按字段对结果进行分组`created_at`

```
Session.query(MyTable).group_by(MyTable.created_at).all() 
```

我的问题是，是否可以按`Date`字段`created_at`分组？我想在同一日期分发数据，而不是在同一组中分发日期时间。

# c# - FileStream.close() 不会为其他进程释放文件

> ID：14955770
> 
> 赞同：9
> 
> 时间：2013-02-19T10:58:42.783
> 
> 标签：c#, asp.net, filestream, file-access

我在 Page_Load 调用函数中有以下代码。在启动 Visual Studio 后第一次加载页面时，一切正常。
但是在此之后对文件的任何其他打开调用都会返回`IOException: "File is in use by another process"`，即使在 VisualStudio 解决方案中直接打开文件时也会返回此错误（当然不是异常）

```
FileStream mailinglist_FileStream = new FileStream(@"\foobarFile.txt", FileMode.Open);
PeekingStreamReader mailinglist_Reader = new PeekingStreamReader(mailinglist_FileStream);
//Do some stuff with the file
mailinglist_FileStream.Close();
mailinglist_Reader.Close();
mailinglist_Reader.Dispose();
mailinglist_FileStream.Dispose(); 
```

为什么文件仍然被锁定？为什么完全重新启动 Visual Studio 会重置文件？检查文件属性时，它说：

> 构建操作：内容
> 复制到输出目录：不复制

我只在读这个文件。我可以做一些类似的事情`adLockOptimistic`，以便多个进程可以访问文件吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T11:04:14.993

> 为什么文件仍然被锁定？为什么完全重新启动 Visual Studio 会重置文件？检查文件属性时它说[...]我不知道为什么文件仍然被锁定：可能是因为您的代码在流关闭/处置之前失败。

关于*“为什么要完全重新启动 Visual Studio [...]”*：因为您可能正在使用 IIS Express 或 ASP.NET Dev Server，它们在您关闭 IDE 时已关闭，因此文件上的锁被释放，因为持有锁的进程没有运行时间更长。

关于*“为什么文件仍然被锁定？[...]* ”这可能是因为文件流没有关闭，因为有时线程可能没有成功结束并且没有释放锁。

正如其他答案所说，检查`using`块如何避免`IDisposable`对象不会被处理：

```
// FileShare.ReadWrite will allow other processes 
// to read and write the target file even if other processes 
// are working with the same file
using var mailinglist_FileStream = new FileStream(@"\foobarFile.txt", FileMode.Open, FileShare.ReadWrite);
using var mailinglist_Reader = new PeekingStreamReader(mailinglist_FileStream);
      // Do your stuff. Using blocks will call Dispose() for 
      // you even if something goes wrong, as it's equal to a try/finally! 
```

> 我只在读这个文件。我可以做一些类似于 adLockOptimistic 的事情，以便多个进程可以访问文件吗？

是的，看看`File.Open`方法和`FileShare`枚举：

*   `File.Open`：http: [//msdn.microsoft.com/en-us/library/y973b725.aspx](http://msdn.microsoft.com/en-us/library/y973b725.aspx)
*   `FileShare`枚举：http: [//msdn.microsoft.com/en-us/library/system.io.fileshare.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-19T11:05:35.190

学习使用[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28VS.80%29.aspx)：

```
using (FileStream fileStream = File.Open(@"C:\somefile", FileMode.Open, FileAccess.Read))
{
    ...
} 
```

`using`即使抛出异常，该构造也可确保在您离开块时关闭文件。

您的问题可能不在此处，而在代码中的其他地方。您必须检查所有代码并查找已打开文件但不将其放在`using`语句中的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:03:25.200

尝试使用`using`积木，它可能无法解决您的锁定问题，但对于一次性物品来说它是更好的形式。

```
using (FileStream mailinglist_FileStream = new FileStream(@"\foobarFile.txt", FileMode.Open))
{
    using (PeekingStreamReader mailinglist_Reader = new PeekingStreamReader(mailinglist_FileStream))
    {
        ...            
    }
} 
```

另外，尝试关闭`mailinglist_Reader`before `mailinglist_FileStream`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-24T16:56:32.017

一个老问题，但不幸的是，给出的答案可能不适用于该问题。

具体在 Windows 中的问题在于 Windows 行为的两个方面：

a) 当为写入而打开的文件句柄关闭时，Microsoft Antimalware Service 打开文件以检查新写入的数据是否存在恶意软件；

b）操作系统本身在关闭文件的所有句柄后保持文件打开一段时间。这个时间可以从几秒到几分钟不等，具体取决于文件的性质和其他因素。

We saw this problem many times in our products and had to provide special support for this case - our kernel-mode attempts to close the file as soon as the last handle to it is closed.

# ios - UIPanGestureRecognizer：识别对象是否固定在一个区域中并且手势识别器状态未结束

> ID：14955771
> 
> 赞同：5
> 
> 时间：2013-02-19T10:58:44.370
> 
> 标签：ios, uigesturerecognizer, uipangesturerecognizer

我正在使用 UIPanGestureRecognizer 来识别对象的拖动运动，它适用于以下状态：

```
UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panAction:)];
[panGesture setMaximumNumberOfTouches:1];
[panGesture setDelegate:self];
[self.view addGestureRecognizer:panGesture];
[panGesture release];

- (void)panAction:(UIPanGestureRecognizer *)gR 
{
    switch (gR.state) 
    {       
        case UIGestureRecognizerStateBegan:
            NSLog(@"drag began");
            break;

        case UIGestureRecognizerStateChanged:
            NSLog(@"drag moved");
            break;

        case UIGestureRecognizerStateEnded:
            NSLog(@"drag ended");
            break;

        default:
            break;
    }
} 
```

现在我的问题是，是否有可能检测到用户开始拖动对象并且在某个点停止拖动并将对象保持在固定点的情况？我已经检查过，当用户停止移动对象时，它会停止记录“已更改”，直到用户开始移动对象或释放它（在这种情况下，它会记录“结束”）。这是一个示例日志：

```
2013-02-19 16:36:**01.181** Project[24201:10a03] drag began
2013-02-19 16:36:**14.004** Project[24201:10a03] drag moved
2013-02-19 16:36:14.221 Project[24201:10a03] drag moved
2013-02-19 16:36:**14.894** Project[24201:10a03] drag ended 
```

您可以看到开始、更改和结束之间有一些停顿（当时对象被固定在某个点）。是否有可能检测到这种情况？如果是这样，怎么做？任何帮助将不胜感激，在此先感谢。

**更新**

我试过 UILongPressGestureRecognizer：

```
UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPressGesture:)];
[longPressGesture setDelegate:self];
[self.view addGestureRecognizer:longPressGesture];
[longPressGesture release];

-(void)handleLongPressGesture:(UILongPressGestureRecognizer *)gR
{
    switch (gR.state)
    {
        case UIGestureRecognizerStateBegan:
            NSLog(@"long press began");
            break;

        case UIGestureRecognizerStateCancelled:
            NSLog(@"long press cancelled");
            break;

        case UIGestureRecognizerStateEnded:
            NSLog(@"long press ended");
            break;

        default:
            break;
    }
} 
```

还有委托方法：

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

现在，两个识别器被分别识别。如果先执行长按手势，则会同时识别两个手势：

```
2013-02-19 17:19:13.382 Project[24357:10a03] long press began
2013-02-19 17:19:14.901 Project[24357:10a03] drag began
2013-02-19 17:19:14.937 Project[24357:10a03] drag moving
2013-02-19 17:19:15.025 Project[24357:10a03] drag moving
2013-02-19 17:19:16.317 Project[24357:10a03] long press ended
2013-02-19 17:19:16.317 Project[24357:10a03] drag ended 
```

但是，如果先执行拖动手势，则它不再识别长按，除非拖动结束：

```
2013-02-19 17:21:05.985 Project[24357:10a03] drag began
2013-02-19 17:21:06.001 Project[24357:10a03] drag moving
2013-02-19 17:21:06.018 Project[24357:10a03] drag moving
2013-02-19 17:21:**06.052** Project[24357:10a03] drag moving
2013-02-19 17:21:**17.786** Project[24357:10a03] drag moving
2013-02-19 17:21:17.818 Project[24357:10a03] drag moving
2013-02-19 17:21:17.851 Project[24357:10a03] drag moving
2013-02-19 17:21:19.324 Project[24357:10a03] drag ended
2013-02-19 17:21:20.388 Project[24357:10a03] long press began
2013-02-19 17:21:21.188 Project[24357:10a03] long press ended 
```

我需要第二种情况来检测拖动开始后的长按。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:10:54.387

如果它存在，您可以在它无效后安排`NSTimer`它，然后在计时器的选择器中做任何您想做的事情。`UIGestureRecognizerStateChanged`

```
if(self.myTimer)
     [self.myTimer invalidate];
self.myTimer = [NSTimer scheduledTimerWithTimeInterval:PAUSE_INTERVAL target:self selector:@selector(userPaused:) userInfo:nil repeats:NO]; 
```

# c# - Lightswitch 应用程序在从 TFS 源代码控制获取最新更改时卡住

> ID：14955774
> 
> 赞同：0
> 
> 时间：2013-02-19T10:59:00.987
> 
> 标签：c#, tfs, visual-studio-lightswitch, visual-sourcesafe-2005

我有一个 Lightswitch 应用程序，它已从 Visual sourcesafe 2005 迁移到 Visual Studio 2012 和 TFS。当 VS 启动时，它设置为从 TFS 获取最新版本。

我收到当前的错误消息：“**在您的工作区中找不到项目 [Solution_name]\[Application_Name].vssscc，或者您没有访问它的权限。** ”（我检查了一下，确实丢失了）。如果我继续，工作室就会卡住。

如果我完全删除该项目并再次获取它，则解决方案加载正常，但是任何签入都会导致相同的现象重复。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:45:23.007

我终于弄清楚了问题所在：删除了一些文件，但在源代码管理中没有删除对它们的项目引用。从项目中删除引用并签入后，问题就解决了。

# iphone - 应用内购买提醒消息

> ID：14955787
> 
> 赞同：4
> 
> 时间：2013-02-19T10:59:37.987
> 
> 标签：iphone, ios, in-app-purchase, uialertview

我想更改 inApp 购买中的警报消息。来的文字是：-

DpO 你想买一个**** * **** ***** Rs** 的水平？*

 *我想让它像 :- 你想买吗**** * **** ***** Rs** 的水平？*

 *简而言之，我想从来自应用商店的 inApp 购买警报消息中删除“一个”字样。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:10:10.433

您无法更改文本，它来自 App Store。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:13:22.833

我认为不可能更改为 In App Purchase 显示的系统消息。

我最近在我的一个应用中添加了应用内购买，但没有遇到定制该消息的选项/能力。

更重要的是，看看我下载的一些应用程序内购买的应用程序，它们都有相同的默认措辞。

我假设苹果已经添加了“一个”这个词，以明确表示用户正在购买一个数量，无论 IAP 是什么。允许开发人员更改此文本会在购买过程中出现歧义，可能会出现销售失误，无论是有意还是无意……

希望有帮助，加文**

# caching - 更大的缓存大小是否总是会提高性能？

> ID：14955788
> 
> 赞同：11
> 
> 时间：2013-02-19T10:59:38.637
> 
> 标签：caching, memory, cpu, processor

由于处理器内部的缓存提高了指令执行速度。我想知道如果我们将缓存的大小增加到许多 MB，例如 1 GB，会怎样。可能吗？如果是这样，增加缓存大小总是会提高性能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:57:48.330

一方面在缓存大小和命中率之间进行权衡，另一方面在读取延迟和功耗之间进行权衡。所以你的第一个问题的答案是：技术上（可能）可能，但不太可能有意义，因为现代 CPU 中只有几 MB 大小的 L3 缓存具有大约几十个周期的读取延迟。

性能更多地取决于内存访问模式而不是缓存大小。更准确地说，如果程序主要是顺序的，缓存大小不是什么大问题。如果有很多随机访问（例如，当积极使用关联容器时），缓存大小真的很重要。

以上对于单个计算任务是正确的。在具有多个活动进程的多进程环境中，更大的缓存大小总是更好，因为减少了进程间争用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T13:22:45.980

这是一种简化，但是，高速缓存提高“速度”的主要原因之一是它提供了一个非常靠近处理器的快速内存——这比主内存的访问速度要快得多。所以，理论上，增加缓存的大小应该可以让更多的信息存储在这个“快速”的内存中，从而提高性能。在现实世界中，事情显然比这复杂得多，当然会有增加了与如此大的缓存相关的复杂性和成本，以及处理缓存一致性、缓存算法等问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-08T12:08:38.010

由于缓存临时存储数据。缓存用于轻松定位经常使用的文件。因此，如果缓存的大小增加到 1gb 或更多，它将不再作为缓存，而是变为 RAM。数据临时存储在 ram 中。因此，如果不使用缓存，当处理器调用数据时，ram 将需要时间来获取数据以提供给处理器，因为它的大小为 4gb 或更大。所以我们使用缓存作为我们最近或经常使用的东西的临时内存。这样，ram ram 不需要查找和获取数据给处理器，因为处理器直接从缓存中访问数据，由于缓存的体积小，查找数据不需要时间，并且处理器不需要调用ram 来获取数据，所有这些都可以在没有 ram 的情况下快速完成。举个例子，我们有一个宽敞的教室（RAM），我们的校长（处理器）出于某些目的调用班级 CR（数据），然后他们会去教室，在 1000 名学生的班级中找到 CR 并将他带到校长那里。这需要时间。当我们在类中为CR指定一个空间（缓存）时，由于principal大多调用类的CR，所以CR很容易找到，因为大部分时间CR是由Principal调用的。

# xml - 无法在浏览器中打开 XML

> ID：14955789
> 
> 赞同：1
> 
> 时间：2013-02-19T10:59:40.453
> 
> 标签：xml

我有一个这样的 XML 文件：

```
<? xml version="1.0" encoding="UTF-8" ?>
<News size="48011">
<Link>http://www.nuoto.it/leggi.php?leggiID=27592</Link>
<Title>Harlem Shake all'italiana</Title>
<Subtitle>by Atlantide Elmas Swimming Team</Subtitle>
<Body><img src="http://www.nuoto.it/foto_news/ridim-elams2013.jpg" style="float:left;margin-left:0px;margin-right:5px;" />&nbsp;Era nell'aria che prima o poi &nbsp;arrivasse l'Harlem Shake mania versione Italia, ecco di seguito la prima proposta nostrana realizzata dagli amici dell' ASD ATLANTIDE ELMAS SWIMMING TEAM, disponibile on line sul canale Facebook di Swimming Channel.  Attenzione al contagio!  &nbsp;        &nbsp;</Body>
</News> 
```

当我用浏览器打开它时，我收到以下错误：

```
error on line 1 at column 3: xmlParsePI : no target name 
```

像这样的 XML 文件工作正常

```
<?xml version="1.0" encoding="UTF-8" ?>
<News size="123">
<Link>aaa</Link>
<Title>bbbb</Title>
<Subtitle>ccc</Subtitle>
<Body>ddd</Body>
</News> 
```

我必须保留标签内的 HTML 代码有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T11:01:19.367

```
<? xml
  ^ 
```

处理指令的开头不允许有空格。

那应该是`<?xml`

# c++ - 如何进行生日悖论循环

> ID：14955793
> 
> 赞同：0
> 
> 时间：2013-02-19T10:59:55.477
> 
> 标签：c++, loops, for-loop, birthday-paradox

我必须做生日悖论计划作为学校的作业。我让程序运行，但似乎无法获得正确的答案。我认为这是我在`check_birthdays`函数中的循环的问题。

这是代码：

```
#include <iostream>
using namespace std;
#include<time.h>

void check_birthdays (int birthdays[], int num, int count=0)
{
     for (int i=0; i<num; i++) //to check each person in the group
     {
         for (int j=i+1; j<num; j++) //against every other person in the group
         {
             if (birthdays[i]==birthdays[j])
                 count++; 
         }
     }
     //print out the number of people with ame birthday
     cout<<"The number of people who share their birthday is "<<count;
}

int main()
{
    //create a variable for an inputted number of people
    int people, count;
    cout<< "Please input a number of people: "<<endl;;
    cin>>people;

    int birthdays[people];

    //input check
    if (people<50 || people>100)
        cout<<"Error, please try again.";
    else
    { //fill that array with random numbers
        for (int i=0; i<people; i++)
        {
            srand (time (NULL));
            birthdays[i]= rand()%365;
        }
        check_birthdays (birthdays, people, count); //send to the next function
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:47:27.127

在`main()`中，变量`count`没有被初始化，它被传递给`check_birthdays()`，所以结果可以是任何东西。

此外，在 C++ 中，当数组的大小在运行时决定时，通常的解决方案是使用`std::vector`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:04:56.360

在不知道“它不起作用”的意思的情况下，我猜您可能想用一些无效值替换匹配的生日，这样当您在循环中前进时它不会再次匹配。

再提示一下，不用`srand()`每次都打电话。

# xml - 使用 XSD Duration 类型，使用 XSLT 将值输出为正常的持续时间格式

> ID：14955794
> 
> 赞同：0
> 
> 时间：2013-02-19T10:59:58.020
> 
> 标签：xml, xslt, xsd

我在我的 XML 中存储了一个持续时间，在我的模式中我将它设置为一个持续时间类型：

```
<?xml version="1.0" encoding="UTF-8"?>

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
elementFormDefault="qualified" 
attributeFormDefault="unqualified">

<xs:element name="flights">
<xs:complexType>
  <xs:sequence>
    <xs:element name="flight" type="flighttype" minOccurs='1' maxOccurs='unbounded'>
      <xs:unique name="planeidisunique">
        <xs:selector xpath="plane"/>
        <xs:field xpath="@planeid"/>
      </xs:unique>
    </xs:element>
  </xs:sequence>
</xs:complexType>
<xs:unique name="flightidisunique">
  <xs:selector xpath="flight"/>
  <xs:field xpath="@flightid"/>
</xs:unique>
</xs:element>

<xs:complexType name="flighttype">
<xs:sequence>
    <xs:element name="flightno" type="xs:string" minOccurs="1" maxOccurs="1"/>
    <xs:element name="callsign" type="xs:string" minOccurs="1" maxOccurs="1"/>
    <xs:element name="airline" type="xs:string" minOccurs="1" maxOccurs="1"/>
    <xs:element name="plane" type="planetype" minOccurs='1' maxOccurs='unbounded' />
    <xs:element name="route" type="routetype"/>
</xs:sequence>
<xs:attribute name="flightid" type="xs:string"/>
</xs:complexType>

<!-- PLANE -->

<xs:complexType name="planetype" mixed="true">
<xs:sequence>
    <xs:element name="name" type="xs:string"/>
    <xs:element name="speed" type="speedtype"/>
    <xs:element name="wingspan" type="xs:string"/>
    <xs:element name="length" type="xs:string"/>
    <xs:element name="registereddate" type="xs:date"/>
</xs:sequence>
<xs:attribute name="planeid" type="xs:string"/>
</xs:complexType>

<!-- ALTITUDE -->

<xs:complexType name="altitudetype">
<xs:simpleContent>
  <xs:extension base="xs:integer">
    <xs:attribute name="height" type="xs:string">
    </xs:attribute>
  </xs:extension>
</xs:simpleContent>
</xs:complexType>

<!-- SPEED THE VALUE OF SPEED MUST BE AN INTEGER-->

<xs:complexType name="speedtype">
<xs:simpleContent>
  <xs:extension base="xs:integer">
    <xs:attribute name="ratio" type="xs:string">
    </xs:attribute>
  </xs:extension>
</xs:simpleContent>
</xs:complexType>

  <!-- DISTANCE VALUE OF DISTANCE MUST BE AN INTEGER-->

<xs:complexType name="distancetype">
<xs:simpleContent>
  <xs:extension base="xs:integer">
    <xs:attribute name="unit" type="xs:string">
    </xs:attribute>
  </xs:extension>
</xs:simpleContent>
  </xs:complexType>

<!-- COURSE -->

<xs:complexType name="coursetype">
<xs:simpleContent>
  <xs:extension base="xs:integer">
    <xs:attribute name="bearing" type="xs:string">
    </xs:attribute>
  </xs:extension>
</xs:simpleContent>
  </xs:complexType>

  <!-- DURATION -->

<xs:complexType name="durationtype">
<xs:simpleContent>
  <xs:extension base="xs:duration">
  </xs:extension>
</xs:simpleContent>
  </xs:complexType>

<!-- ROUTE -->

<xs:complexType name="routetype">
<xs:sequence>
    <xs:element name="routename" type="xs:string"/>
    <xs:element name="altitude" type="altitudetype" minOccurs="1" maxOccurs="1"/>
    <xs:element name="speed" type="speedtype" minOccurs="0" maxOccurs="1"/>
    <xs:element name="course" type="coursetype"/>
    <xs:element name="distance" type="distancetype"/>
    <xs:element name="duration" type="durationtype"/>
    <xs:element name="from" type="fromtype"/>
    <xs:element name="to" type="totype"/>
</xs:sequence>
</xs:complexType>

<!-- FROM -->

<xs:complexType name="fromtype">
<xs:sequence>
    <xs:element name="iatacode"/>
    <xs:element name="airport"/>
    <xs:element name="country"/>
    <xs:element name="city"/>
    <xs:element name="latitude"/>
    <xs:element name="longitude"/>
    <xs:element name="yahoowoeid"/>
</xs:sequence>
</xs:complexType>

<!-- TO -->

<xs:complexType name="totype">
<xs:sequence>
    <xs:element name="iatacode"/>
    <xs:element name="airport"/>
    <xs:element name="country"/>
    <xs:element name="city"/>
    <xs:element name="latitude"/>
    <xs:element name="longitude"/>
    <xs:element name="yahoowoeid"/>
</xs:sequence>
</xs:complexType>

</xs:schema> 
```

在我的 XML 中，我使用这样的持续时间：

```
<duration>PT12H37M</duration> 
```

这是我的 XSL 文件，我在使用持续时间的地方添加了注释：

```
<?xml version="1.0"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" omit-xml-declaration="yes" />
<xsl:output doctype-public="-//WAPFORUM//DTD XHTML Mobile 1.0//EN" doctype-system="http://www.wapforum.org/DTD/xhtml-mobile10.dtd"/>

<!-- Parameters for the map longitudes and latitudes and route name-->
<xsl:param name="a" />
<xsl:param name="b" />
<xsl:param name="c" />
<xsl:param name="d" />

<xsl:template match="/">
    <xsl:element name="html">
        <xsl:element name="head">
            <xsl:element name="title">Selected Flight Route</xsl:element>
            <link rel="stylesheet" type="text/css" href="mystyles.css" title="Style"/>
        </xsl:element>

        <xsl:element name="body"> 

            <xsl:element name="div"><!-- This holds the navigation bar-->
                <xsl:attribute name="id">
                    <xsl:text>navdiv</xsl:text>
                </xsl:attribute>

                <xsl:element name="div"><!-- This holds the image links-->
                    <xsl:attribute name="id">
                        <xsl:text>navlinks</xsl:text>
                    </xsl:attribute>

                    <xsl:element name="a">
                        <xsl:attribute name="id">
                            <xsl:text>navlinksone</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="href">flights.php</xsl:attribute>
                    </xsl:element>

                    <xsl:element name="a">
                        <xsl:attribute name="id">
                            <xsl:text>navlinkstwo</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="href">planes.php</xsl:attribute>
                    </xsl:element>

                    <xsl:element name="a">
                        <xsl:attribute name="id">
                            <xsl:text>navlinksthree</xsl:text>
                        </xsl:attribute>
                        <xsl:attribute name="href">weatherfeed.php</xsl:attribute>
                    </xsl:element>

                </xsl:element>
            </xsl:element><!-- End the navigation bar-->

            <xsl:element name="div">
                <xsl:attribute name="id">mapdiv</xsl:attribute>
                <img width="300" height="270" src="http://maps.google.com/maps/api/staticmap?size=300x270&amp;zoom=1&amp;path=color:0xff0000ff|weight:4|{$a},{$b}|{$c},{$d}
                    &amp;markers=color%3ablue|label%3aA|
                    {$a},{$b}|&amp;markers=color%3agreen|label%3aB|{$c},{$d}
                    &amp;sensor=false" />
            </xsl:element>

            <xsl:element name="hr"></xsl:element>

            <!-- The following is the table which holds all of the map and route information -->
            <table><xsl:attribute name="class">tab</xsl:attribute>
                <tr>
                    <td colspan="3"><xsl:attribute name="class">top</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/routename"/></td>
                    </tr>
                    <tr>
                    <td><xsl:attribute name="class">lside</xsl:attribute></td>
                    <td><xsl:attribute name="class">lside</xsl:attribute>From<img src="bm.png" height="18" width="12"/></td>
                    <td><xsl:attribute name="class">lside</xsl:attribute>To<img src="gm.png" height="18" width="12"/></td>
                    </tr>

                    <tr>
                    <td><xsl:attribute name="class">lside</xsl:attribute>City</td>
                    <td><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/from/city"/></td>
                    <td><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/to/city"/></td>
                    </tr>

                    <tr>
                    <td><xsl:attribute name="class">lside</xsl:attribute>IATA Code</td>
                    <td><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/from/iatacode"/></td>
                    <td><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/to/iatacode"/></td>
                    </tr>

                    <tr >
                    <td><xsl:attribute name="class">lside</xsl:attribute>Country</td>
                   <td><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/from/country"/></td>
                    <td><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/to/country"/></td>
                    </tr>

                    <tr>
                        <td><xsl:attribute name="class">lside</xsl:attribute>Weather</td>

                        <td><xsl:attribute name="class">rside</xsl:attribute>
                            <xsl:element name="a">
                                <xsl:attribute name="id">
                                    <xsl:text>weatherimagelinks</xsl:text>
                                </xsl:attribute>
                            <xsl:attribute name="href">weather.php?woeid=<xsl:value-of select="/flights/flight/route[routename/. = $code]/from/yahoowoeid" /></xsl:attribute>
                            </xsl:element>
                        </td>
                          <td><xsl:attribute name="class">rside</xsl:attribute>
                            <xsl:element name="a">
                                <xsl:attribute name="id">
                                    <xsl:text>weatherimagelinks</xsl:text>
                                </xsl:attribute>
                            <xsl:attribute name="href">weather.php?woeid=<xsl:value-of select="/flights/flight/route[routename/. = $code]/to/yahoowoeid" /></xsl:attribute>
                            </xsl:element>
                        </td>
                    </tr>
                    <tr>
                        <td><xsl:attribute name="class">lside</xsl:attribute>Distance</td>
                        <td colspan="2"><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/distance"/><xsl:value-of select="/flights/flight/route[routename/. = $code]/distance/@unit"/></td>
                    </tr>
                    <tr>
                        <td><xsl:attribute name="class">lside</xsl:attribute>Course</td>
                        <td colspan="2"><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/course"/><xsl:value-of select="/flights/flight/route[routename/. = $code]/course/@bearing"/></td>
                    </tr>
                    <tr>
                        <td><xsl:attribute name="class">lside</xsl:attribute>Airline</td>
                        <td colspan="2"><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/../airline"/></td>
                    </tr>
                    <tr>
                        <td><xsl:attribute name="class">lside</xsl:attribute>Flight No</td>
                        <td colspan="2"><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/../flightno"/></td>
                    </tr>
                    <tr>
                        <td><xsl:attribute name="class">lside</xsl:attribute>Call Sign</td>
                        <td colspan="2"><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/../callsign"/></td>
                    </tr>
                    <tr>
<!-- THIS IS WHERE I OUTPUT THE DURATION AND I THINK THIS IS WHERE I NEED TO TRANSFORM IT -->
                        <td><xsl:attribute name="class">lside</xsl:attribute>Duration</td>
                        <td colspan="2"><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/duration"/></td>
                    </tr>
                    <tr>
                        <td><xsl:attribute name="class">lside</xsl:attribute>Altitude</td>
                        <td colspan="2"><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/altitude"/><xsl:value-of select="/flights/flight/route[routename/. = $code]/altitude/@height"/></td>
                    </tr>
                    <tr>
                        <td><xsl:attribute name="class">lside</xsl:attribute>Speed</td>
                        <td colspan="2"><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/speed"/><xsl:value-of select="/flights/flight/route[routename/. = $code]/speed/@ratio"/></td>
                    </tr>

               <tr>
                    <td><xsl:attribute name="class">lside</xsl:attribute>Aircraft</td>
                     <td colspan="3">
                        <xsl:attribute name="class">lside</xsl:attribute>
                            <a><xsl:attribute name="href">aircraft.php?a=<xsl:value-of select="/flights/flight/plane[../route/routename/. =$code]/name" /></xsl:attribute>
                                <xsl:value-of select="/flights/flight/plane[../route/routename/. =$code]/name"/>
                            </a>
                    </td>
                </tr>

            </table>    
            <!-- End the map and route table -->

        </xsl:element>
        <!-- End the Body element -->

    </xsl:element>
    <!-- End the Html element -->

</xsl:template>
<!-- End the Main Template element --> 
```

如何将持续时间从 PT12H37M 转换为 12 h 37 m，使其在屏幕上正常显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:03:19.527

首先，您的 XSLT 非常冗长。你知道吗？而不是这样写：

```
 <xsl:element name="a">
                <xsl:attribute name="id">
                    <xsl:text>navlinkstwo</xsl:text>
                </xsl:attribute>
                <xsl:attribute name="href">planes.php</xsl:attribute>
            </xsl:element> 
```

你可以这样写：

```
<a id="navlinkstwo" href="planes.php"/> 
```

其次，你还没有说它是如何失败的。Martin 猜测您可能没有使用 XSLT 2.0 处理器，但这似乎是纯粹的猜测，没有任何证据。如果你告诉我们它是如何失败的，我们就不必猜测了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:06:36.580

您想使用像 Saxon 9 或 AltovaXML 或 XmlPrime 这样的 XSLT 2.0 处理器吗？

在这种情况下，您可以使用

```
<xsl:template match="duration">
  <xsl:variable name="d" select="xs:dayTimeDuration(.)"/>
  <xsl:value-of select="concat(days-from-duration($d), ' h ', minutes-from-duration($d), ' m')"/>
</xsl:template> 
```

请参阅[http://www.w3.org/TR/xpath-functions/#func-minutes-from-duration](http://www.w3.org/TR/xpath-functions/#func-minutes-from-duration)。

如果您想坚持使用单个模板样式表，请替换

```
 <tr>
<!-- THIS IS WHERE I OUTPUT THE DURATION AND I THINK THIS IS WHERE I NEED TO TRANSFORM IT -->
                        <td><xsl:attribute name="class">lside</xsl:attribute>Duration</td>
                        <td colspan="2"><xsl:attribute name="class">rside</xsl:attribute><xsl:value-of select="/flights/flight/route[routename/. = $code]/duration"/></td>
                    </tr> 
```

和

```
 <tr>
<!-- THIS IS WHERE I OUTPUT THE DURATION AND I THINK THIS IS WHERE I NEED TO TRANSFORM IT -->
                        <td class="lside">Duration</td>
                        <xsl:variable name="d" select="xs:dayTimeDuration(/flights/flight/route[routename/. = $code]/duration)" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
                        <td colspan="2" class="rside"><xsl:value-of select="concat(days-from-duration($d), ' h ', minutes-from-duration($d), ' m')"/></td>
                    </tr> 
```

# php - Whois 的 PHP 脚本

> ID：14955798
> 
> 赞同：2
> 
> 时间：2013-02-19T11:00:14.603
> 
> 标签：php, whois

我为扫描域创建 php 脚本并知道是否免费注册

```
<?php
if($_REQUEST['send']=="ok")
{
$server="".trim($domain_server_end)."";
$request="".trim($domain_server_end_request)."";

$dominio="".$_REQUEST['dominio_nombre']."";
$dominio_ext="".$_REQUEST['dominio_ext']."";
$ns = fsockopen($server,43); 
fputs($ns,"".$dominio.".".$dominio_ext."\r\n");
$result = '';
while(!feof($ns)) $result .= fgets($ns,128);
fclose($ns);

if (eregi($request,$result)) 
{ 
print'{"domain_register":"ok"}';
}
else
{
print'{"domain_exists":"ok"}';
}
}
?>

    <form name="form1" method="post" action="?">
    Server Whois<br>
    <input type="text" name="$domain_server_end"><br>
      Server whois request from server : example : No Match , etc
      <input type="hidden" name="send" value="ok">
      <br>
    <input type="text" name="domain_server_end_request"><br>
   Domain name<br>
    <input type="text" name="dominio_nombre"><br>
    Extension Domain without dot<br>
    <input type="text" name="dominio_ext">

      <br><input type="submit" name="Submit" value="Enviar">
    </form> 
```

这里的问题是 TLD 的问题，我找不到用于脚本工作的 whois 服务器，我有一个可以工作但我不知道为什么现在没有工作，如果你能告诉我一些完美的 TLD 工作因为脚本运行正常，但我找不到使用它的 whois 服务器 :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:36:18.170

Every TLD has a different whois server, and not all TLDs provide one. You can find a list of all TLD servers in my [OS whois library](http://ruby-whois.org).

This is the TLD definition list: [https://github.com/weppos/whois/blob/master/data/tld.json](https://github.com/weppos/whois/blob/master/data/tld.json)

# javascript - 防止添加重复值html表

> ID：14955801
> 
> 赞同：0
> 
> 时间：2013-02-19T11:00:26.933
> 
> 标签：javascript, jquery

我有一个 HTML 表格，我不希望第二列的值在网格中重复。

这是我的 jQuery：

```
$('#tb_cartTable tr td:nth-child(2)').each(function() {
    $ele=$(this).text();
if($ele==$productCode)
    {
        flag="x";
        return false;
    }
});

if($rowCounter>0 && flag=="x")
{
    alert("Duplicate");
}
else
{
    //...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:26:25.543

一种方法是将单元格的文本“映射”到以文本为键的 JavaScript 复杂数组中，然后将键的数量与单元格的数量进行比较。如果单元格多于键，则表示存在具有相同文本的单元格。

代码：

```
var allCells = $('#tb_cartTable tr td:nth-child(2)');
var textMapping = {};
allCells.each(function() {
    textMapping[$(this).text()] = true;
});

var count = 0;
for (var text in textMapping)
    count++;

if (count !== allCells.length) {
    alert("found duplicate values");
} else {
    alert("no duplicates found");
} 
```

[现场测试用例](http://jsfiddle.net/vCMym/1/)。

注意上面是区分大小写的：如果有一个带有“hello”的单元格和带有“Hello”的单元格，它们将被认为是不同的，它会认为没有重复。如果大小写无关紧要，则只需将行更改为：

```
textMapping[$(this).text().toLowerCase()] = true; 
```

[更新](http://jsfiddle.net/vCMym/2/)了忽略案例的测试案例。

在您的特定情况下，您可以将所有添加的值存储在普通数组中，然后使用 jQuery`inArray()`方法检查数组：

```
var $addedProductCodes = [];
$("#button_addItem").click(function(event)
{
    $("span.errorText").remove();
    $(".errorField").addClass("notErrorField");

       //Change background color of textbox to normal
       $("#frmRegisterForm :input[type='text']").attr('class','notErrorField');
    $hasError = false;
    $ele = $(event.target);
    if($ele.is("input[type=button]"))
    {    
        $td_productCode1=$("#td_productCode1").val();
        var index = $.inArray($td_productCode1, $addedProductCodes);
        if (index >= 0) {
            alert("You already added this product code in line #" + (index + 1));
        } else {
            $text_productDescription= $("#text_productDescription").val();
            $text_basicDealerPrice = $("#text_basicDealerPrice").val();
            $('#table_viewContent').append("<tr><td>"+$text_productDescription+"</td><td>"+$td_productCode1+"</td><td><td>"+$text_basicDealerPrice+"</td><td><input type='button'  name='deleteRow' id='btn_deleteRow' value='Delete' id='deleteItem' class='deleteItem button-red'></td></tr>");        
            $addedProductCodes.push($td_productCode1);
        }
    }
}); 
```

[更新了小提琴](http://jsfiddle.net/ZXvQb/1/)，添加相同的产品代码会发出警报并且不会插入。

# wordpress - 如何使用特征图像和第一张图片作为缩略图？

> ID：14955802
> 
> 赞同：0
> 
> 时间：2013-02-19T11:00:27.290
> 
> 标签：wordpress, image, thumbnails

要抓取和调整缩略图大小，我使用此链接中的 aqua resizer：

[https://github.com/sy4mil/Aqua-Resizer](https://github.com/sy4mil/Aqua-Resizer)

调用缩略图以在循环中显示此代码：

```
<?php $thumb = get_post_thumbnail_id(); 
$img_url = wp_get_attachment_url( $thumb,'full' ); 
$image = aq_resize( $img_url, 150, 700, true ); 
?>
<img src="<?php echo $image ?>" width="150" height="700" alt="<?php the_title(); ?>"/> 
```

它运作良好。但仅适用于特征图像。我想将调用者设置为不是为特征图像，而是为第一个帖子图像。因此，当我忘记在帖子中设置特色图片时，第一张图片将显示为缩略图。

我知道代码流应该是这样的：

```
if(has_post_thumbnail()) {
// resize post thumbnail here e.g. $img_url = aq_resize...
} elseif($first_img) {
// resize the first img here, $img_url = aq_resize($first_img, ...
} else {
// $img_url = ''; //empty
} 
```

但我是 php 新手。有人可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:39:31.893

你可以把这个函数放在你的functions.php中，然后从任何地方调用它。它将返回它在您的帖子中找到的第一个图像标签的源属性，或者如果它没有找到任何东西，则返回一个空白字符串。

```
function get_first_image_src()
{
    $content = get_the_content();
    $image_regex = "/<img [^>]*src=[\"']([^\"^']*)[\"']/";
    preg_match($image_regex, $content, $match);

    if (empty($match))
        return "";

    return $match[1];
} 
```

# c++ - 二值图像中骨架上两点之间的最短路径

> ID：14955805
> 
> 赞同：2
> 
> 时间：2013-02-19T11:00:47.293
> 
> 标签：c++, opencv

我有一个二进制图像，其中包含一个像素宽度的图像骨架。正如你可能在这个二进制图像中基本上知道的那样，我在骨架上有一个，在其他任何地方都有零。如何找到骨架上两个非零元素之间的最短距离？路径也应该在骨架本身上。我想使用 A-star 算法的 C++ 实现。我找到了下面的代码，我需要修改它来解决我的问题。

我将非常感谢任何帮助。谢谢。

```
/** {{{ http://code.activestate.com/recipes/577457/ (r4) */
// Astar.cpp
// http://en.wikipedia.org/wiki/A*
// Compiler: Dev-C++ 4.9.9.2
// FB - 201012256
#include <iostream>
#include <iomanip>
#include <queue>
#include <string>
#include <math.h>
#include <ctime>
using namespace std;

const int n=60; // horizontal size of the map
const int m=60; // vertical size size of the map
static int map[n][m];
static int closed_nodes_map[n][m]; // map of closed (tried-out) nodes
static int open_nodes_map[n][m]; // map of open (not-yet-tried) nodes
static int dir_map[n][m]; // map of directions
const int dir=8; // number of possible directions to go at any position
// if dir==4
//static int dx[dir]={1, 0, -1, 0};
//static int dy[dir]={0, 1, 0, -1};
// if dir==8
static int dx[dir]={1, 1, 0, -1, -1, -1, 0, 1};
static int dy[dir]={0, 1, 1, 1, 0, -1, -1, -1};

class node
{
// current position
int xPos;
int yPos;
// total distance already travelled to reach the node
int level;
// priority=level+remaining distance estimate
int priority;  // smaller: higher priority

public:
    node(int xp, int yp, int d, int p) 
        {xPos=xp; yPos=yp; level=d; priority=p;}

    int getxPos() const {return xPos;}
    int getyPos() const {return yPos;}
    int getLevel() const {return level;}
    int getPriority() const {return priority;}

    void updatePriority(const int & xDest, const int & yDest)
    {
         priority=level+estimate(xDest, yDest)*10; //A*
    }

    // give better priority to going strait instead of diagonally
    void nextLevel(const int & i) // i: direction
    {
         level+=(dir==8?(i%2==0?10:14):10);
    }

    // Estimation function for the remaining distance to the goal.
    const int & estimate(const int & xDest, const int & yDest) const
    {
        static int xd, yd, d;
        xd=xDest-xPos;
        yd=yDest-yPos;         

        // Euclidian Distance
        d=static_cast<int>(sqrt(xd*xd+yd*yd));

        // Manhattan distance
        //d=abs(xd)+abs(yd);

        // Chebyshev distance
        //d=max(abs(xd), abs(yd));

        return(d);
    }
};

// Determine priority (in the priority queue)
bool operator<(const node & a, const node & b)
{
 return a.getPriority() > b.getPriority();
}

// A-star algorithm.
// The route returned is a string of direction digits.
string pathFind( const int & xStart, const int & yStart, 
             const int & xFinish, const int & yFinish )
{
static priority_queue<node> pq[2]; // list of open (not-yet-tried) nodes
static int pqi; // pq index
static node* n0;
static node* m0;
static int i, j, x, y, xdx, ydy;
static char c;
pqi=0;

// reset the node maps
for(y=0;y<m;y++)
{
    for(x=0;x<n;x++)
    {
        closed_nodes_map[x][y]=0;
        open_nodes_map[x][y]=0;
    }
}

// create the start node and push into list of open nodes
n0=new node(xStart, yStart, 0, 0);
n0->updatePriority(xFinish, yFinish);
pq[pqi].push(*n0);
open_nodes_map[x][y]=n0->getPriority(); // mark it on the open nodes map

// A* search
while(!pq[pqi].empty())
{
    // get the current node w/ the highest priority
    // from the list of open nodes
    n0=new node( pq[pqi].top().getxPos(), pq[pqi].top().getyPos(), 
                 pq[pqi].top().getLevel(), pq[pqi].top().getPriority());

    x=n0->getxPos(); y=n0->getyPos();

    pq[pqi].pop(); // remove the node from the open list
    open_nodes_map[x][y]=0;
    // mark it on the closed nodes map
    closed_nodes_map[x][y]=1;

    // quit searching when the goal state is reached
    //if((*n0).estimate(xFinish, yFinish) == 0)
    if(x==xFinish && y==yFinish) 
    {
        // generate the path from finish to start
        // by following the directions
        string path="";
        while(!(x==xStart && y==yStart))
        {
            j=dir_map[x][y];
            c='0'+(j+dir/2)%dir;
            path=c+path;
            x+=dx[j];
            y+=dy[j];
        }

        // garbage collection
        delete n0;
        // empty the leftover nodes
        while(!pq[pqi].empty()) pq[pqi].pop();           
        return path;
    }

    // generate moves (child nodes) in all possible directions
    for(i=0;i<dir;i++)
    {
        xdx=x+dx[i]; ydy=y+dy[i];

        if(!(xdx<0 || xdx>n-1 || ydy<0 || ydy>m-1 || map[xdx][ydy]==1 
            || closed_nodes_map[xdx][ydy]==1))
        {
            // generate a child node
            m0=new node( xdx, ydy, n0->getLevel(), 
                         n0->getPriority());
            m0->nextLevel(i);
            m0->updatePriority(xFinish, yFinish);

            // if it is not in the open list then add into that
            if(open_nodes_map[xdx][ydy]==0)
            {
                open_nodes_map[xdx][ydy]=m0->getPriority();
                pq[pqi].push(*m0);
                // mark its parent node direction
                dir_map[xdx][ydy]=(i+dir/2)%dir;
            }
            else if(open_nodes_map[xdx][ydy]>m0->getPriority())
            {
                // update the priority info
                open_nodes_map[xdx][ydy]=m0->getPriority();
                // update the parent direction info
                dir_map[xdx][ydy]=(i+dir/2)%dir;

                // replace the node
                // by emptying one pq to the other one
                // except the node to be replaced will be ignored
                // and the new node will be pushed in instead
                while(!(pq[pqi].top().getxPos()==xdx && 
                       pq[pqi].top().getyPos()==ydy))
                {                
                    pq[1-pqi].push(pq[pqi].top());
                    pq[pqi].pop();       
                }
                pq[pqi].pop(); // remove the wanted node

                // empty the larger size pq to the smaller one
                if(pq[pqi].size()>pq[1-pqi].size()) pqi=1-pqi;
                while(!pq[pqi].empty())
                {                
                    pq[1-pqi].push(pq[pqi].top());
                    pq[pqi].pop();       
                }
                pqi=1-pqi;
                pq[pqi].push(*m0); // add the better node instead
            }
            else delete m0; // garbage collection
        }
    }
    delete n0; // garbage collection
}
return ""; // no route found
}

int main()
{
srand(time(NULL));

// create empty map
for(int y=0;y<m;y++)
{
    for(int x=0;x<n;x++) map[x][y]=0;
}

// fillout the map matrix with a '+' pattern
for(int x=n/8;x<n*7/8;x++)
{
    map[x][m/2]=1;
}
for(int y=m/8;y<m*7/8;y++)
{
    map[n/2][y]=1;
}

// randomly select start and finish locations
int xA, yA, xB, yB;
switch(rand()%8)
{
    case 0: xA=0;yA=0;xB=n-1;yB=m-1; break;
    case 1: xA=0;yA=m-1;xB=n-1;yB=0; break;
    case 2: xA=n/2-1;yA=m/2-1;xB=n/2+1;yB=m/2+1; break;
    case 3: xA=n/2-1;yA=m/2+1;xB=n/2+1;yB=m/2-1; break;
    case 4: xA=n/2-1;yA=0;xB=n/2+1;yB=m-1; break;
    case 5: xA=n/2+1;yA=m-1;xB=n/2-1;yB=0; break;
    case 6: xA=0;yA=m/2-1;xB=n-1;yB=m/2+1; break;
    case 7: xA=n-1;yA=m/2+1;xB=0;yB=m/2-1; break;
}

cout<<"Map Size (X,Y): "<<n<<","<<m<<endl;
cout<<"Start: "<<xA<<","<<yA<<endl;
cout<<"Finish: "<<xB<<","<<yB<<endl;
// get the route
clock_t start = clock();
string route=pathFind(xA, yA, xB, yB);
if(route=="") cout<<"An empty route generated!"<<endl;
clock_t end = clock();
double time_elapsed = double(end - start);
cout<<"Time to calculate the route (ms): "<<time_elapsed<<endl;
cout<<"Route:"<<endl;
cout<<route<<endl<<endl;

// follow the route on the map and display it 
if(route.length()>0)
{
    int j; char c;
    int x=xA;
    int y=yA;
    map[x][y]=2;
    for(int i=0;i<route.length();i++)
    {
        c =route.at(i);
        j=atoi(&c); 
        x=x+dx[j];
        y=y+dy[j];
        map[x][y]=3;
    }
    map[x][y]=4;

    // display the map with the route
    for(int y=0;y<m;y++)
    {
        for(int x=0;x<n;x++)
            if(map[x][y]==0)
                cout<<".";
            else if(map[x][y]==1)
                cout<<"O"; //obstacle
            else if(map[x][y]==2)
                cout<<"S"; //start
            else if(map[x][y]==3)
                cout<<"R"; //route
            else if(map[x][y]==4)
                cout<<"F"; //finish
        cout<<endl;
    }
}
getchar(); // wait for a (Enter) keypress  
return(0);
}
/** end of http://code.activestate.com/recipes/577457/ }}} */ 
```

# hibernate - 实体类中的休眠注释放置

> ID：14955810
> 
> 赞同：2
> 
> 时间：2013-02-19T11:00:59.350
> 
> 标签：hibernate, annotations

我有以下实体类。我可以将注释放在成员变量声明的顶部或 getter 和 setter 的顶部。

当我将注释放在成员变量声明附近时，它将保存该变量的值（不是 getter 返回的值），如果我将注释放在 getter 附近，它将保存 getter 返回的值（不是变量的值）。这一切都很好。

我的问题是，当我们将注释放在成员变量附近时，虽然它被声明为私有，但在持久化的同时，休眠如何访问成员变量值。？

```
 @Entity
 @Table(name="USERS")
 public class Users {
   @Id @GeneratedValue(strategy=GenerationType.AUTO) 
   private int userId;

   //This will save only value of userName no mater what getter returns
   @Column(name="user_name")
   private String userName;

    public int getUserId() {
      return userId;
    }

    public void setUserId(int userId) {
        this.userId = userId;
    }

    //Putting @Column(name="user_name") here will save value  
    // "userName from getter" to the DB

    public String getUserName() {
          return userName + " from getter";
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:17:31.370

Hibernate 和其他 JPA 提供程序使用[**反射**](http://docs.oracle.com/javase/tutorial/reflect/index.html)进行私有成员访问。在 Java 中，与许多 OO 语言一样，可见性声明并未强制执行得如此严格以至于无法绕过

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:20:45.240

它使用反射。有关更多信息，请参阅本文：[http ://www.javalobby.org/java/forums/m91937279.html#](http://www.javalobby.org/java/forums/m91937279.html#)

# mysql - mysqlcheck 不接受密码

> ID：14955817
> 
> 赞同：0
> 
> 时间：2013-02-19T11:01:24.220
> 
> 标签：mysql, unix

根据 mysqlcheck 手册，我可以执行以下操作：

`mysqlcheck datatabase_name --auto-repair -ao -u="user" -p="password"`

但是它从不接受密码。无论我使用 shell 登录还是数据库登录都没有关系。当我留下密码时，我可以在提示我输入密码后连接。我想把它放在一个 cron 脚本中，所以我需要能够将密码放在命令中。

如果需要，该命令将分析、优化和修复我也是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:11:19.340

尝试使用：

```
mysqlcheck datatabase_name --auto-repair -ao --user=user --password=password 
```

或者`-uuser or -ppassword should also work.`

不幸的是，我真的无法进一步深入了解您对**mysqlcheck**在您希望它执行的操作中的实际效果的查询。我怀疑它不会做真正提高数据库性能的事情，尽管比如添加放置良好的索引和优化查询以仅在必要时链接。

# json - 如何使用 d3 使用 JSON 数组

> ID：14955820
> 
> 赞同：2
> 
> 时间：2013-02-19T11:01:32.957
> 
> 标签：json, d3.js, data-visualization

我是 d3 和 json 的新手。我正在尝试构建水平甘特图。早些时候，我使用存储在 var 数据集中的内联数组也达到了同样的效果。但现在我已经用 json object array 替换了数组。

```
[   {
        "process" :"process-name 1",
        "stage" : "stage name 1",
        "activities": [
            {
            "activity_name": "waiting",
            "start": new Date('2012-12-10T06:45+05:30'),
            "end": new Date('2012-10-10T08:45+05:30'),
            },
            {
            "activity_name": "processing",
            "start": new Date('2012-10-11T05:45+05:30'),
            "end": new Date('2012-10-11T06:45+05:30'),
            },
            {
            "activity_name": "pending",
            "start": new Date('2012-10-12T11:45+05:30'),
            "end": new Date('2012-10-13T12:45+05:30'),
            }
            ]

    },
    {
        "process" :"process-name 2",
        "stage" : "stage name 2",
        "activities": [
            {
            "activity_name": "waiting",
            "start": new Date('2012-10-22T06:45+05:30'),
            "end": new Date('2012-10-23T08:45+05:30'),
            },
            {
            "activity_name": "processing",
            "start": new Date('2012-10-25T05:45+05:30'),
            "end": new Date('2012-10-25T06:45+05:30'),
            },
            {
            "activity_name": "pending",
            "start": new Date('2012-10-27T11:45+05:30'),
            "end": new Date('2012-10-27T12:45+05:30'),
            }
            ]
    }       

    ]; 
```

绘制矩形的代码的 d3 部分是这样的：

```
console.log(dataset);

var height = 600;
var width = 500;
var x = d3.time.scale().domain([new Date(2011, 0, 1,23,33,00), new Date(2013, 0, 1, 23, 59)]).range([0, width]);

var svg = d3.selectAll("body")
.append("svg")
.attr("width",width)
.attr("height",height)
.attr("shape-rendering","crispEdges");

temp = svg.selectAll("body")
.data(dataset) // LINE 1 
.enter()

temp.append("rect")
.attr("width", 4)
.attr("height",12)
.attr("x", function(d) {return x(d.activities[0].start)}) // LINE 2
.attr("y",function(d,i){return i*10;})
.attr("fill","steelblue"); 
```

我有以下问题：

1.  我想访问**活动中的****开始**日期，但使用代码行（*标记为第 1 行和第 2*行）我已经写了它只为每个活动的第一次开始提供 2 个矩形。为什么？

****   在**第 1**行中，我可以使用 dataset.actitvies 而不仅仅是数据集吗？我尝试使用它，给了我这个错误：*** 

 ***> 未捕获的类型错误：无法读取未定义的属性“0”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:26:08.137

1.  因为数据集的长度是 2，所以当你将它与你的矩形连接时，你只会得到 2 个矩形。

2.  您可以使用 dataset.activities，但您会将 LINE 2 更改为

    .attr("x", function(d) {return x(d.start)})

因为您已经更改了联接，因此 d 现在指的是活动。然而，如果你这样做，你只会得到三个矩形——你的一个项目的活动。

如果您要使用嵌套数据，您要么需要使用嵌套选择，要么需要首先通过将所有活动添加到简单数组来展平数据。

```
var data = [];

for (var i = 0, len = dataset.length; i < len; i++) {
    data = data.concat(dataset[i].activities);
} 
```

嵌套选择看起来像这样：

```
projects = svg.selectAll("g")
    .data(dataset)
  .enter().append("g")
    .attr("transform", function (d, i) { return "translate(0," + (i * 10) + ")"; }),

rects = projects.selectAll("rect")
    .data(function (d) { return d.activities; })
  .enter().append("rect")
    .attr("height", 12)
    .attr("width", 4)
    .attr("x", function (d) { return x(d.start); }) 
```

编辑：这是一个[jsfiddle](http://jsfiddle.net/qzj7m/6/)***

# c++ - 将动态数组初始化为0？

> ID：14955824
> 
> 赞同：9
> 
> 时间：2013-02-19T11:01:41.980
> 
> 标签：c++, arrays

```
int main()
{
    int arraySize;
    int arrayMain[arraySize-1];
    cout << "\n\nEnter Total Number of Elements in Array.\n\n";
    cin >> arraySize;
    arrayMain[arraySize-1]={0};
    cout <<"\n\n" <<arrayMain;
    return 0;
} 
```

当我编译上面的代码时，我的编译器冻结了。我对如何将动态数组设置为 0 感到困惑？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-19T11:02:24.233

你使用一个`std::vector`：

```
std::vector<int> vec(arraySize-1); 
```

您的代码无效，因为 1)`arraySize`未初始化和 2) 在 C++ 中不能有可变长度数组。因此，要么使用向量，要么动态分配内存（这是`std::vector`内部所做的）：

```
int* arrayMain = new int[arraySize-1] (); 
```

注意`()`最后的 - 它用于对元素进行值初始化，因此数组将其元素设置为 0。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-03-22T08:57:55.943

如果您想将整个数组初始化为零，请执行此操作，

```
int *p = new int[n]{0}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-19T11:04:47.360

如果您必须使用动态数组，则可以使用值初始化（尽管`std::vector<int>`这是推荐的解决方案）：

```
int* arrayMain = new int[arraySize - 1](); 
```

检查输入操作的结果以确保已为变量分配了正确的值：

```
if (cin >> arraySize && arraySize > 1) // > 1 to allocate an array with at least
{                                      // one element (unsure why the '-1').
    int* arrayMain = new int[arraySize - 1]();

    // Delete 'arrayMain' when no longer required.
    delete[] arrayMain;
} 
```

注意使用`cout`：

```
cout <<"\n\n" <<arrayMain; 
```

将打印`arrayMain`数组的地址，而不是每个单独的元素。要打印每个人，您需要依次索引每个元素：

```
for (int i = 0; i < arraySize - 1; i++) std::cout << arrayMain[i] << '\n'; 
```

# angularjs - 使用angularjs时无法设置复选框默认选中

> ID：14955827
> 
> 赞同：10
> 
> 时间：2013-02-19T11:02:00.490
> 
> 标签：angularjs

我想将复选框的默认值设置为选中，即，用户必须在打开页面时看到复选框被选中，因为某种原因它在使用 angularjs 时不起作用

这是我的代码

```
<html ng-app>

    <input type="radio" name="lookup"  ng-model="lookup" value="1" ng-checked="lookup==1" checked>Employee Lookup</input>
    <input type="radio" name="lookup"  ng-model="lookup" value="2" ng-checked="lookup==2">Company Lookup</input>
</html> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T12:03:56.950

由于您使用`ngModel`and `value`，如果它们匹配，将自动选择收音机。这是HTML和JS：

```
<html ng-app ng-controller="testcontroller">
  <input type="radio" ng-model="lookup" value="1">Employee Lookup</input>
  <input type="radio" ng-model="lookup" value="2">Company Lookup</input>
</html> 
```

```
function testcontroller($scope){
  $scope.lookup = 1;
} 
```

这是一个有效的 jsFiddle 演示： http: [//jsfiddle.net/BinaryMuse/ZQDts/3/](http://jsfiddle.net/BinaryMuse/ZQDts/3/)（您的 jsFiddle 可能因为拼写错误而遇到问题`ng-app`。）

# ruby - Ruby 没有在山狮上编译

> ID：14955829
> 
> 赞同：0
> 
> 时间：2013-02-19T11:02:03.213
> 
> 标签：ruby, xcode, terminal, rvm, osx-mountain-lion

嗨，我正在尝试让 ruby​​ 使用 rvm 在 osx 10.8 山狮上编译，尽管我不断收到以下错误

```
$ rvm reinstall 1.9.3 --with-readline-dir=$rvm_path/usr
Removing /Users/paulmcguane/.rvm/src/ruby-1.9.3-p194...
it seems that /Users/paulmcguane/.rvm/rubies/ruby-1.9.3-p194 is already non existent.
Removing ruby-1.9.3-p194 aliases...
Removing ruby-1.9.3-p194 wrappers...
Removing ruby-1.9.3-p194 environments...
Removing ruby-1.9.3-p194 binaries...
Installing Ruby from source to: /Users/paulmcguane/.rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...

ruby-1.9.3-p194 - #fetching 
ruby-1.9.3-p194 - #extracting ruby-1.9.3-p194 to /Users/paulmcguane/.rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #extracted to /Users/paulmcguane/.rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #configuring 
ruby-1.9.3-p194 - #compiling 
Error running 'make ', please read /Users/paulmcguane/.rvm/log/ruby-1.9.3-p194/make.log
There has been an error while running make. Halting the installation. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:14:16.883

根据我的经验，避免任何问题的最佳方法是 [osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:11:38.897

您看到 make.log 文件和错误了吗？这可能是流行的 readline 错误。为此，请参阅此。

[在 Mac OS X Lion 上安装 Ruby 1.9.3 时出错](https://stackoverflow.com/questions/9539031/error-when-installing-ruby-1-9-3-on-mac-os-x-lion)

或者，

[通过 rvm OSX Lion 10.7.2 XCode 4.2 安装 Ruby 1.9.2 时出错](https://stackoverflow.com/questions/7813231/make-error-installing-ruby-1-9-2-via-rvm-osx-lion-10-7-2-xcode-4-2)

[在 OSX Lion 下使用 RVM 和 Readline 安装 Ruby 1.9.2 时出错](https://stackoverflow.com/questions/6970545/make-error-installing-ruby-1-9-2-with-rvm-and-readline-under-osx-lion)

# java - java中的模式匹配代码

> ID：14955834
> 
> 赞同：-2
> 
> 时间：2013-02-19T11:02:10.103
> 
> 标签：java, regex

我需要解析下面给出的 JSON 代码类型的几行。我需要删除方括号内的所有逗号（，）。那就是`["Cheesesteaks","Sandwiches", "Restaurants"]`变成`["Cheesestakes""Sandwiches""Restaurants"]`。我需要保留所有其他逗号。

另一个例子 -`["Massachusetts Institute of Technology", "Harvard University"]`将`["Massachusetts Institute of Technology""Harvard University"]`保持所有其他逗号不变。

```
{"business_id": "EjgQxDOUS-GFLsNxoEFJJg", "full_address": "Liberty Place\n1625 Chestnut St\nMantua\nPhiladelphia, PA 19103", "schools": ["Massachusetts Institute of Technology", "Harvard University"], "open": true, "categories": ["Cheesesteaks", "Sandwiches", "Restaurants"], "photo_url": "http://s3-media4.ak.yelpcdn.com/bphoto/SxGxfJGy9pXRgCNHTRDeBA/ms.jpg", "city": "Philadelphia", "review_count": 43, "name": "Rick's Steaks", "neighborhoods": ["Mantua"], "url": "http://www.yelp.com/biz/ricks-steaks-philadelphia", "longitude": -75.199929999999995, "state": "PA", "stars": 3.5, "latitude": 39.962440000000001, "type": "business"} 
```

有人可以帮我找到匹配这个模式的正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:09:50.520

那应该是一个非常简单的替换。

```
String in = "[\"Cheesesteaks\",\"Sandwiches\", \"Restaurants\"]";
String out = in.replaceAll(", ?", "");
System.out.println(out); 
```

给

```
["Cheesesteaks""Sandwiches""Restaurants"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:18:12.383

试试这个：

```
Pattern outer = Pattern.compile("\\[.*?\\]");
Pattern inner = Pattern.compile("\"\\s*,\\s*\"");
Matcher mOuter = null;
Matcher mInner = null;

mOuter = outer.matcher(jsonString);
StringBuffer sb = new StringBuffer();

while (mOuter.find()) {
    mOuter.appendReplacement(sb, "");
    mInner = inner.matcher(mOuter.group());
    while (mInner.find()) {
        mInner.appendReplacement(sb, "\"\"");
    }
    mInner.appendTail(sb);
}
mOuter.appendTail(sb);

System.out.println(sb.toString()); 
```

并替换`jsonString`为您的输入。

# sql-server - 如何对字段进行 SQL Sum 并按部分分组有不同的字段？

> ID：14955838
> 
> 赞同：1
> 
> 时间：2013-02-19T11:02:13.597
> 
> 标签：sql-server, select, group-by, aggregate-functions, having-clause

我有一个这样的表：（请注意，名称不是唯一的，可以重复，而 Personal_ID 是唯一的）。

```
ID    SourceID     Personal_ID     Name     NumberOfPurchases 
1      4            1001           Alex           10
2      2            1002           Sara            5
3      4            1001           Alex            12
4      1            1003           Mina            200
5      2            1002           Sara            20  
6      2            1001           Alex            64 
```

现在需要做的是根据给定的 SourceID 获取每个人购买的总数。这样我们就有了如下结果`sourceId = 4` ：

```
 Name        Total Number of Purchases
 1\.     Alex                 22 
```

对于 SourceID = 2

```
 Name        Total Number of Purchases
1\.      Alex                 64
2\.      Sara                 25 
```

为此，我想出了这样的事情：

```
SELECT Name,Sum(NumberOfPurchases) AS Total
FROM    tblTEST
GROUP BY (Personal_ID)
HAVING (SOURCEID = @id) 
```

但这显然是错误的。我被困在这里，如果我将其他字段添加到结果中`group-by clause`，结果将完全不同，如果我不这样做，则此选择命令将不起作用。我怎样才能达到这样的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:04:24.193

像这样的东西？

```
SELECT Name, SUM(NumberOfPurchases) AS Total
FROM tblTEST
WHERE (SourceID = @id)
GROUP BY Name 
```

注意：分组*前*`WHERE`的过滤器和分组*后*的过滤器。*`HAVING`*

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:10:57.043

我猜这里的问题是你`Name`的`SELECT`子句中有，但你在`Personal_ID`. 如果您也`Name`明确地添加到您的`GROUP BY`子句中，它可能会有所帮助。如果一切顺利，`Name`将在功能上由`Personal_ID`无论如何决定。

[而且您还应该像Lucero 所说](https://stackoverflow.com/a/14955879/249353)`WHERE`的那样，在子句中将过滤器放在 SourceID 上。所以你的查询应该是这样的：

```
SELECT   Name
         ,Sum(NumberOfPurchases) AS Total
FROM     tblTEST
WHERE    SOURCEID = @id
GROUP BY Personal_ID, Name; 
```

看看这个[小提琴](http://www.sqlfiddle.com/#!3/da5e2/4)。

澄清一下：如果你使用聚合函数`SUM()`，你的子句中的所有*其他*东西`SELECT`也应该在你的`GROUP BY`子句中。但是您不想仅在 上进行分组`Name`，因为在您的情况下它不是唯一的。这就是为什么你在你的条款中同时拥有`Personal_ID` **and的原因。** 当. _ 并且您正在添加以确保并非所有 Sara 都放在一个大 Sara 组中，而是根据.`Name``GROUP BY``Name``GROUP BY``Personal_ID``Personal_ID`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T11:11:20.867

你可以试试这个：

```
SELECT  names.Name
        , names.Personal_ID
        , grouped.Total
FROM    (
            SELECT  SourceID
                    , Personal_ID
                    , SUM(NumberOfPurchases) AS Total
            FROM    tblTEST
            GROUP BY 
                    SourceID, Personal_ID
) grouped
JOIN    (

        SELECT  DISTINCT
                Personal_ID
                , Name
        FROM    tblTEST
) names ON      names.Personal_ID = grouped.Personal_ID
WHERE           SourceID = @id 
```

这是一个**[SQL 小提琴](http://sqlfiddle.com/#!3/78a3e/5/1)**

在测试数据中，我添加了另一条包含名为“Alex”的人的记录，现在有两个同名的人，这表明无法使用`Name`列进行分组，因为它不是唯一的。我还添加`Personal_ID`了选择列表，以便可以区分同名的人。**

# c++ - 立方体上的纹理映射出现错误

> ID：14955840
> 
> 赞同：1
> 
> 时间：2013-02-19T11:02:15.553
> 
> 标签：c++, opengl, textures, cubes, soil

我创建了一个立方体，然后更改了它的坐标以使其成为这样的光束[（点击我）](http://www.bracketsandbeams.com/product_images/p/ww_beam_3_sides_and_endcaps3__70338.png)。

我确信纹理加载正常，因为我已成功加载项目中的其他纹理（使用 SOIL）。

梁的代码是这样的：

```
glBindTexture(GL_TEXTURE_2D, obstacle_texture);
glBegin(GL_QUAD_STRIP);
    // front
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(0.0f, 0.0f, 0.0f);
    glTexCoord2f(1.0f, 0.0f);   glVertex3f(side, 0.0f, 0.0f);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(side, height, 0.0f);
    glTexCoord2f(0.0f, 1.0f );  glVertex3f(0.0f, height, 0.0f);
    // back
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(0.0f, 0.0f, -side);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(side, 0.0f, -side);
    glTexCoord2f(1.0f, 0.0f);   glVertex3f(side, height, -side);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(0.0f, height, -side);
    // right
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(side, 0.0f, 0.0f);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(side, 0.0f, -side);
    glTexCoord2f(1.0f, 0.0f);   glVertex3f(side, height, -side);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(side, height, 0.0f);
    // left
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(0.0f, 0.0f, 0.0f);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(0.0f, 0.0f, -side);
    glTexCoord2f(1.0f, 0.0f);   glVertex3f(0.0f, height, -side);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(0.0f, height, 0.0f);
    // top
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(0.0f, height, 0.0f);
    glTexCoord2f(1.0f, 0.0f);   glVertex3f(side, height, 0.0f);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(side, height, -side);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(0.0f, height, -side);
    // bottom
    glTexCoord2f(0.0f, 0.0f);   glVertex3f(0.0f, 0.0f, 0.0f);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(side, 0.0f, 0.0f);
    glTexCoord2f(1.0f, 1.0f);   glVertex3f(side, 0.0f, -side);
    glTexCoord2f(0.0f, 1.0f);   glVertex3f(0.0f, 0.0f, -side);
glEnd(); 
```

结果是这样的：

![beam_wrongTextureMapping](../Images/fb87527f86f233bdb86bed017263032b.png)

纹理映射应该有问题，**或者**
我应该让立方体保持原样并将纹理应用到它，然后对其进行缩放（但我认为这会使纹理看起来失真）。

我该怎么办？

**更新#1：** 在 SOIL 之前，我一直在使用加载器来加载我在网站上找到的 BMP 文件。我现在使用它，它看起来像这样：

![在此处输入图像描述](../Images/5f752eee438c2056ff008c0031667229.png)

请注意，在我指出的地方，立方体似乎有一些三角形整体。我正在使用这样的土壤：

```
GLuint tex_2d = SOIL_load_OGL_texture
        (
        imagepath,
        SOIL_LOAD_AUTO,
        SOIL_CREATE_NEW_ID,
        SOIL_FLAG_MIPMAPS | SOIL_FLAG_INVERT_Y | SOIL_FLAG_NTSC_SAFE_RGB | SOIL_FLAG_COMPRESS_TO_DXT
        );
    glBindTexture(GL_TEXTURE_2D, tex_2d);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:19:23.613

所以，这里至少有三个问题。

您正在渲染一个四边形，但提供坐标就像您正在渲染单独的四边形一样。所以你会得到额外的基元被渲染。这不是您的问题的根源，但是您在某处吐出了错误的几何形状。

一些 UV 坐标似乎偏离了 - 在某些面上，坐标在脸部周围进行，而在另一些面上，坐标呈锯齿形。

这是你的前两张脸：

```
glTexCoord2f(0.0f, 0.0f);   glVertex3f(0.0f, 0.0f, 0.0f);
glTexCoord2f(1.0f, 0.0f);   glVertex3f(side, 0.0f, 0.0f);
glTexCoord2f(1.0f, 1.0f);   glVertex3f(side, height, 0.0f);
glTexCoord2f(0.0f, 1.0f );  glVertex3f(0.0f, height, 0.0f);

glTexCoord2f(0.0f, 0.0f);   glVertex3f(0.0f, 0.0f, -side);
glTexCoord2f(0.0f, 1.0f);   glVertex3f(side, 0.0f, -side);
glTexCoord2f(1.0f, 0.0f);   glVertex3f(side, height, -side);
glTexCoord2f(1.0f, 1.0f);   glVertex3f(0.0f, height, -side); 
```

在第二个面上，中间的两个 UV 坐标是对角线的，但在第一个面上不是这样。只有其中一个是正确的，所以在不正确的面上，你会得到不好的纹理。

您的纹理加载问题可能是填充问题，加载的纹理具有与 GL 所期望的不同的填充要求（默认情况下，GL 期望将纹理数据行填充为 4 个字节）。要么告诉 GL 你的纹理是如何填充的，要么改变纹理使其匹配（这就是为什么你的 BMP 纹理效果更好 - BMP 的填充要求恰好与 GL 一起使用）。

可能的解决方法是：

*   告诉 GL 你的纹理是如何打包的，使用（例如）`glPixelStorei(GL_UNPACK_ALIGNMENT, 1);`
*   更改纹理的尺寸，以便填充匹配而不更改任何内容
*   更改纹理的加载，使填充与 GL 期望的一致

我怀疑这里可能还有一些问题，因为 BMP 和 PNG 纹理上*都*出现了一条奇怪的黄色条纹，但我会先解决明显的问题。

最后，标准建议 - 避免使用单个顶点提交的旧式固定功能管道，并使用 VBO 和绘图调用。

# php - 将 ajax-jquery 数据附加到 cakephp 的下拉列表中

> ID：14955841
> 
> 赞同：0
> 
> 时间：2013-02-19T11:02:18.477
> 
> 标签：php, javascript, jquery, ajax, cakephp

嗨朋友我正在尝试将我的 ajax 输出附加到我的下拉列表中......

我的ajax函数：-

```
 $.ajax({ 
     url: "getcolumn",
     data: {value: value},
     type: "POST",
     success: function(output) {
        var column = output;//here i am assigning the output to another variable
        var mySelect = $('#table_name');
        $.each(column, function(val, text) {
          mySelect.append($('<option></option>').val(val).html(text));
        }); 
```

我的下拉列表：-

```
echo $this->Form->input('Column', array(
    'label' => 'Select the column name below',
    'name' => 'tablename',
    'id' => 'table_name',
    'options' => array('null')
)); 
```

我想将 ajax 的输出附加到上面的下拉框......我试图在我的 ajax 成功函数中附加，但没有工作。谁能帮帮我....输出是json的形式.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:31:46.770

我建议在您的 getcolumn 脚本中创建正确的 json，以便您的 jquery 每个都可以工作，json 应该如下所示：

```
[{id: 86,label: "venue and address"}, {id: 87,label: "venue and address"}] 
```

然后修改一下你的循环：

```
mySelect.append($('<option></option>').val(text.id).text(text.label)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:24:57.780

尝试这个：

```
$.ajax({ 
 url: "getcolumn",
 data: {value: value},
 type: "POST",
 contentType: "application/json", //<----add this
 dataType: "json"                 //<----and this
 success: function(output) {
    var column = output;//here i am assigning the output to another variable
    var mySelect = $('#table_name');
    $.each(column, function(val, text) {
      mySelect.append($('<option></option>').val(val).html(text.id));
    });
 }
 }); 
```

# c++ - 为什么使用迭代器的真实值会出错？

> ID：14955842
> 
> 赞同：0
> 
> 时间：2013-02-19T11:02:22.530
> 
> 标签：c++

我正在我的一个模板中的一个方法中实例化一个迭代器。当我使用`auto`动态获取类型信息时它可以工作：

```
auto itr = my_list.cbegin(); 
```

但是，当我使用实际类型时出现编译时错误：

```
typedef InternalEdge network_internal_edge_type;
typedef std::shared_ptr< network_internal_edge_type > network_shared_edge_ptr;
typedef std::list< network_shared_edge_ptr > network_internal_edge_store_type;

network_internal_edge_store_type::const_iterator itr = internal_edges_.cbegin(); 
```

`InternalEdge`是我在代码上方某处定义的私有类。这是错误：

```
Network.hpp:411:5: error: need ‘typename’ before ‘Network<V>::internal_edge_store_mechanism:: const_iterator’ because ‘Network<V>::internal_edge_store_mechanism’ is a dependent scope
Network.hpp:411:46: error: expected ‘;’ before ‘itr’
Network.hpp:412:12: error: ‘itr’ was not declared in this scope 
```

为什么使用`auto`使代码工作？为什么编译器认为我需要“typename”？

# c - 一个简单的 C 程序的奇怪输出

> ID：14955844
> 
> 赞同：0
> 
> 时间：2013-02-19T11:02:31.720
> 
> 标签：c

我在 C 中有以下内容：

```
int x = 0;
int *a = &x;

void foo(int *a)
{
    static int x = 0;
    x++;
    *a += x;
    a = &x;
    *a = x + 10;
}

int _tmain(int argc, _TCHAR* argv[])
{
    foo(a);
    foo(a);
    printf("%d\n", *a);

    return 0;
} 
```

我可以清楚地调试它并看到该行`*a += x`没有做任何事情，而且我可以看到 x 的值在退出函数前一秒钟是`22`并且它打印出来`13`。

当我在脑海中这样做时，我已经选择了 34，据我所知，这应该是正确的答案。有人可以解释我可能错在哪里吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T11:14:55.617

让我们一步一步来。

第一回合：

```
int x = 0; // global "x"

static int x = 0; // local "x" = 0
x++; // local "x" = 1
*a += x; // global "x" += local "x" results in global "x" = 1
a = &x; // local "a" points to local "x"
*a = x + 10; // local "x" = local "x" + 10 results in local "x" = 11 
```

第二轮：

```
int x = 0; // global "x" = 1 now

static int x = 0; // local "x" = 11 now
x++; // local "x" = 12
*a += x; // global "x" += local "x" results in global "x" = 13
a = &x; // local "a" points to local "x"
*a = x + 10; // local "x" = local "x" + 10 results in local "x" = 22

printf("%d\n", *a); // prints global "x", 13 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T11:12:56.383

这简单。棘手的部分是识别 的不同副本，以及函数内部的`x`范围。`a`

```
void foo(int *a)
{
    static int x = 0;
    x++;
    *a += x;
     a = &x;   //<==== this doesn't change the a outside you see, a now points to static x
    *a = x + 10;
 } 
```

单步执行 a`gdb`应该会告诉您实际发生的情况。请注意，在上面标记的行上，`static int x`已更改。所以`*a=x+10;`实际上改变了`static int x`. 所以在第一次迭代之后：

全局`x`=1 静态`x`=11

所以在第二次迭代中 static`x`递增到`12`，然后 global `x=1+12;`。这使得全局`x==13`. 其余代码不再影响全局`x`和全局`a`。然后`foo`简单地将静态`x`加 10，这与全局变量无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:13:31.557

这样更容易看到

```
int x = 0;
int *a = &x;

void foo(int *a)
{
    static int y = 0;
    y++;
    *a += y;

      a = &y;        // a doesn't point to x anymore!!!
    *a = y + 10;
}
int _tmain(int argc, _TCHAR* argv[])
{
    foo(a);
    foo(a); // Now 'a' again points to the global 'x' (once more) 
    printf("%d\n", *a);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:31:17.533

由于 C 使用静态作用域，当有两个同名变量时，它会先使用当前块中声明的那个，然后再查看外部块。所以 static int x 会影响全局变量 x。您还应该注意的另一件事是，在 C 中，参数是按值传递的，因此如果您分配值的副本，则不会影响原始值。

假设全局变量 x 的地址为 0x8000，静态变量 x 的地址为 0x9000。这是第一次调用时发生的情况：

```
void foo(int *a)  // a= 0x8000 , global int x=0
{
    static int x = 0;
    x++;         // static int x=1
    *a += x;     // global int x=1
    a = &x;      // a=0x9000 (only a copy of a is assigned, so the global a will remain 0x8000)
    *a = x + 10;     // static int x= 11
} 
```

这就是第二次调用中发生的情况：

```
void foo(int *a)  // a= 0x8000 , global int x=1, static int x=11
{
    static int x = 0;
    x++;         // static int x=12
    *a += x;     // global int x= 13
    a = &x;      // a=0x9000
    *a = x + 10;     // static int x= 22
} 
```

# php - if 语句检查是否存在，否则更新

> ID：14955845
> 
> 赞同：0
> 
> 时间：2013-02-19T11:02:36.270
> 
> 标签：php, xml, api, if-statement

我有一个 .xml 页面，我想每 6 小时提取一次数据。

然后将此数据插入数据库，并将唯一键设置为“characterID”。

然后代码需要根据其结果检查以下执行操作。

1.  如果 .XML 文件包含数据库中尚未包含的 characterID，则添加该行！

2.  如果数据库包含不在 .XML 删除行中的字符 ID！

3.  如果 .XML 文件中的一行与数据库中的行不同（CHARACTERID 不会不同，但其他数据会），则使用新信息更新该行 WHERE charactedID 是相同的！

[这](http://pastebin.com/he3DhSAB)是我当前的源代码，它循环通过 XML 并正确插入数据，但我无法更新信息。

```
<?php
// INCLUDE DB CONNECTION FILE
include("includes/connect.php");

// CHANGE THE VALUES HERE
include("includes/config.php");

// URL FOR XML DATA
$url = "test.xml"; // For Testing Purposes

// RUN XML DATA READY FOR INSERT
$xml = simplexml_load_file($url);

// RUN SQL to check data already in table
$sql = mysql_query("SELECT * from `ecmt_memberlist`");

// Loop Through Names
foreach ($xml->result->rowset[0] as $value) {

$characterID = mysql_real_escape_string($value['characterID']);
$name = mysql_real_escape_string($value['name']);
$startDateTime = mysql_real_escape_string($value['startDateTime']);
$baseID = mysql_real_escape_string($value['baseID']);
$base = mysql_real_escape_string($value['base']);
$title = mysql_real_escape_string($value['title']);
$logonDateTime = mysql_real_escape_string($value['logonDateTime']);
$logoffDateTime = mysql_real_escape_string($value['logoffDateTime']);
$locationID = mysql_real_escape_string($value['locationID']);
$location = mysql_real_escape_string($value['location']);
$shipTypeID = mysql_real_escape_string($value['shipTypeID']);
$shipType = mysql_real_escape_string($value['shipType']);
$roles = mysql_real_escape_string($value['roles']);
$grantableRoles = mysql_real_escape_string($value['grantableRoles']);

// NOW LETS INSERT INTO DATABASE!!
$query = "INSERT INTO `ecmt_memberlist` SET
characterID='$characterID',
name='$name',
startDateTime='$startDateTime',
baseID='$baseID',
base='$base',
title='$title',
logonDateTime='$logonDateTime',
logoffDateTime='$logoffDateTime',
locationID='$locationID',
location='$location',
shipTypeID='$shipTypeID',
shipType='$shipType',
roles='$roles',
grantableRoles='$grantableRoles'";

//echo query to error check
echo $query;
echo "<br><br>";

mysql_query($query) or die(mysql_error());
};
?> 
```

插入的表还将包含一些其他信息，这些信息将与 characterID 相关联，因此需要“不删除行并替换”，否则在手动添加时我将丢失该行中的关联数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:06:11.373

你可以先`SELECT`用 CharacterID 做一个语句。你可以检查行数是否等于 1。如果是这种情况，你可以更新你的行，否则你在数据库中插入一个新行。

# c++ - 内联方法：缺点

> ID：14955846
> 
> 赞同：1
> 
> 时间：2013-02-19T11:02:45.713
> 
> 标签：c++, inline

我有一个关于内联方法的问题。我正在使用为碰撞模型开发的库。一个负责图形界面的头文件包含函数的声明和实现，但函数没有内联。因此，不可能将这些功能包含在几个翻译单元中。作为说明，这里是我为说明而设计的虚拟代码：

活人.h

```
#ifndef LIVINGBEING_H
#define LIVINGBEING_H

class LivingBeing
{
public:
    LivingBeing(double _size);
    void breathe();
private:
    double size;
};
//////////////

LivingBeing::LivingBeing(double _size)
{
    size = _size;
}
void LivingBeing::breathe()
{
    // do something
}
#endif 
```

森林.h

```
#ifndef FOREST_H
#define FOREST_H

#include "LivingBeing.h"

class Forest
{
public:
    Forest(int _numberLivingBeings);
private:
    int numberLivingBeings;
};

#endif 
```

森林.cpp

```
#include "Forest.h"

Forest::Forest(int _numberLivingBeings)
{
    numberLivingBeings = _numberLivingBeings;
            // Call LivingBeing constructor, methods etc...
} 
```

主文件

```
#include "Forest.h"

int main()
{
    Forest forest = Forest(10);
    return 0;
} 
```

除非我在构造函数 LivingBeing 和方法呼吸前添加 inline 关键字，否则此代码不会编译。错误信息是：

```
1>main_test.obj : error LNK2005: "public: __thiscall LivingBeing::LivingBeing(double)" (??0LivingBeing@@QAE@N@Z) already defined in Forest.obj
1>main_test.obj : error LNK2005: "public: void __thiscall LivingBeing::breathe(void)" (?breathe@LivingBeing@@QAEXXZ) already defined in Forest.obj
1>C:\Users\******\Documents\Visual Studio 2010\Projects\TutorialChronoEngine\Debug\Test_3.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

我的问题是：内联方法的缺点是什么？我使用的真实库非常大，我想从特定文件（在我的示例中为 LivingBeing.h）内联方法，以便可以在多个 .cpp 文件中使用这些方法。更改源文件有什么风险？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:05:24.263

您在标题中定义函数 (`LivingBeing::LivingBeing`和`LivingBeing::breathe`)，这意味着在包含该标题的每个翻译单元中都会有一个定义。这打破了单一定义规则 (ODR)，因此出现了链接错误。

你有三个选择：

*   将函数定义移动到源文件中，以便它们只定义一次；或者
*   声明它们`inline`允许多个相同的定义；或者
*   在类定义中移动定义，这隐含地使它们`inline`.

> what is the drawbacks of inlining methods ?

*   Possibly increased compilation time and executable size; but you'd need to measure to see whether there's any noticable difference.
*   A less stable API - client code will need recompiling whenever any inline function changes.
*   The possibility of accidentally breaking the ODR, for example if a function contains macros which might have different expansions in different translation units.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:08:25.573

Just because a method is defined in a "source" file (.c/.cpp) doesn't mean it won't be inlined... link-time operations may perform that optimization. Oppositely, just because a method is declared and implemented as inline in a header file doesn't mean it will be inlined. In general, I define methods in a header file if they are very simple, e.g. `int getWidth() const { return width; }`, or `MyObj* getNext() { return internal_itor ? internal_itor->next : 0; }`

# c# - 在 HTTPS 安全页面上引用 jQuery CDN？

> ID：14955847
> 
> 赞同：2
> 
> 时间：2013-02-19T11:02:52.360
> 
> 标签：c#, javascript, jquery, https, cdn

在使用 https 的页面上引用 jQuery 库的首选方式是什么？我们有一个需要使用 jQuery UI 小部件的结帐母版页，但我不断收到错误消息：

```
Uncaught TypeError: Object #<Object> has no method 'dialog' 
```

调用 jQuery 对话框时。我查看了 chrome 工具，页面正试图通过 https 获取库，但它的位置`http`在我的标记中定义。所以我要问的是，我如何在安全页面上引用这些库？我是否引用站点本身内的本地副本而不是 CDN？或者有没有我可以使用的 https 版本？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:04:47.217

Google 和 Microsoft CDN 也通过 HTTPS 提供 jQuery 和 jQuery UI。换个协议就好了。例如：

[https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js)

您也可以在引用外部库时省略协议：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

这样，脚本将使用与其文档相同的协议进行加载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T11:08:12.640

两者都通过 HTTPS 提供服务，但最好的方法是根本不使用 HTTP 部分并`//`仅使用。

**例子：**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

通过在您的代码中不使用任何 HTTP 协议，这意味着您不必担心是否实际需要它的条件逻辑。因此，您的购物页面不必专门针对。

希望这有助于清除它。

谢谢。

# android - Android：内存错误和位图的大小/质量

> ID：14955851
> 
> 赞同：0
> 
> 时间：2013-02-19T11:03:12.650
> 
> 标签：android, animation, memory-leaks

我在同一个活动中启动了 2 个 AnimationDrawables，但出现内存错误。这非常令人惊讶，因为我减小了图像的大小（宽度 = 屏幕宽度），而且我不能再减小它，因为质量会降低。例如，如果我做宽度=屏幕宽度/2，它可以工作，但质量很糟糕

在logcat中是这样写的

```
02-19 10:56:44.769: E/dalvikvm-heap(3118): 383916-byte external allocation too large for this process.
02-19 10:56:44.809: E/GraphicsJNI(3118): VM won't let us allocate 383916 bytes
02-19 10:56:44.809: W/dalvikvm(3118): threadid=1: thread exiting with uncaught exception (group=0x40018560)
02-19 10:56:44.819: E/AndroidRuntime(3118): FATAL EXCEPTION: main
02-19 10:56:44.819: E/AndroidRuntime(3118): java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

我不认为我有内存泄漏，但检查这篇文章[http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html)我试图检测潜在的内存泄漏，但它似乎我没有。

我真的需要一些帮助，因为这不是我在这个项目中的第一个内存错误，我总是很难处理。

这是我的代码：

```
private void startAnimation(AnimationDrawable animation1,AnimationDrawable animation2){
    int drawables[] = new int[] {R.drawable.fire1,R.drawable.fire2,R.drawable.fire3,R.drawable.fire4,R.drawable.fire5,R.drawable.fire6,R.drawable.fire7,R.drawable.fire8,R.drawable.fire9,R.drawable.fire10down2,R.drawable.fire11down2,R.drawable.fire12down2,R.drawable.fire13down2,R.drawable.fire14down2,R.drawable.fire15down2,R.drawable.fire16down2};
    int drawables2[] = new int[] {R.drawable.fire14down2,R.drawable.fire14down2,R.drawable.fire14down2,R.drawable.fire14down2,R.drawable.fire14down2,R.drawable.fire14down2,R.drawable.fire14down2,R.drawable.fire14down2,R.drawable.fire14down2,R.drawable.fire10up,R.drawable.fire11up,R.drawable.fire12up,R.drawable.fire13up,R.drawable.fire14up,R.drawable.fire15up,R.drawable.fire16up};
    bitmapDrawable = new BitmapDrawable[drawables.length];
    bitmapDrawable2 = new BitmapDrawable[drawables2.length];
    for (int i=0;i<drawables.length;i++) {
        bitmapDrawable[i]=new BitmapDrawable(decodeSampledBitmapFromResource(getResources(), drawables[i],width));
        Log.w("BITMAP","i="+i);
        bitmapDrawable2[i]=new BitmapDrawable(decodeSampledBitmapFromResource(getResources(), drawables2[i],width));
        animation1.addFrame(bitmapDrawable[i],50);
        animation2.addFrame(bitmapDrawable2[i],50);
    }
    animation1.setOneShot(true);
    animation2.setOneShot(true);
  image2.setLayoutParams(params);
        image2.setImageDrawable(animation1);
        image2.post(new Starter(animation1));
        image3.setLayoutParams(params);
        image3.setImageDrawable(animation2);
        image3.post(new Starter(animation2));

}
      class Starter implements Runnable {
          AnimationDrawable animation = new AnimationDrawable();
          public Starter(AnimationDrawable animation) {
              this.animation = animation;
          }

          public void run() {
              animation.start();
          }
       } 
```

我怎样才能减少位图的重量（如果有必要？问题可能在其他地方_并保持图像的质量。我看不出问题出在哪里，我只使用了 30 张图像，其他应用程序使用更多！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:14:53.360

在这里，您将重新调整质量。

```
 try {
            BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
            bmpFactoryOptions.inJustDecodeBounds = true;
            bmpFactoryOptions.inPreferredConfig = Bitmap.Config.ARGB_8888;

             bmp = BitmapFactory.decodeStream(getContentResolver().openInputStream(
                    imageFileUri), null, bmpFactoryOptions);

            bmpFactoryOptions.inSampleSize = 2;
            bmpFactoryOptions.inJustDecodeBounds = false;
            bmp = BitmapFactory.decodeStream(getContentResolver().openInputStream(
                    imageFileUri), null, bmpFactoryOptions); 
```

这里我使用这种方法从 sdcard 中获取图像。然后显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:56:13.507

您可以`ScaledBitmap`从您的创建以减小 EX 的大小：-

```
Bitmap scaledBitmap = Bitmap.createScaledBitmap(oldBitmap, 600, 600,
                        false); 
```

这会将其大小减小到 600x600 并减小其大小。你可以改变你喜欢的像素

# javascript - 使用输入框更改 HTML5 音频源

> ID：14955852
> 
> 赞同：0
> 
> 时间：2013-02-19T11:03:13.287
> 
> 标签：javascript, html, html5-audio

嗨，堆栈用户！

我正在尝试创建一个音频播放器，您可以在其中将 Source 输入到输入框中。到目前为止，我真的很喜欢它应该工作的方式，但是它不是加载输入的文件，而是重新加载原始文件。此外，我确定它正在识别文件，因为如果我输入无效的源，播放器根本不会加载。

我可能解释得不是很好，所以我准备了一个 JSFiddle，在这里：

### [http://jsfiddle.net/zT3z2/](http://jsfiddle.net/zT3z2/)

我用来测试的两首歌是：

*   [http://www.jezra.net/audio/skye_boat_song.ogg](http://www.jezra.net/audio/skye_boat_song.ogg)
*   [http://www.jezra.net/audio/star_of_the_county_down.ogg](http://www.jezra.net/audio/star_of_the_county_down.ogg)

**HTML：**

```
<input type="text" id="url" name="url" value="skye_boat_song.ogg" />
<br><br>

<audio id="sound1" preload="auto" src="http://www.jezra.net/audio/skye_boat_song.ogg"
autoplay controls></audio>
<div id="status">skye_boat_song.ogg | lorem ipsum</div> 
```

**JavaScript：**

```
$('input#url').on('propertychange paste keyup', function () {

    var url = this.value;

    $("#status").html(url + " | lorem ipsum");
    changeAudio("http://jezra.net/audio/" + url);
});

function changeAudio(song) {
    audio = document.getElementById("sound1");
    audio.src = song;
    audio.load();
    audio.play();
}

$('input#url').keyup(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:04:16.243

这是一个可以实现您目标的工作小提琴。

[http://jsfiddle.net/newtriks/Fvh2x/](http://jsfiddle.net/newtriks/Fvh2x/)

**JS：**

```
// http://goo.gl/k3oDc
// http://goo.gl/Ei0iX

var audioElement = document.getElementsByTagName('audio')[0];
var inputElement = document.getElementsByTagName('input')[0];

$('input').keyup(function () {
    if (event.keyCode == 13) {
        loadAndPlay(inputElement.value);
    }
});

function loadAndPlay(src) {
    audioElement.pause();
    audioElement.src = src;
    audioElement.load();
    audioElement.play();
}

loadAndPlay(inputElement.value); 
```

**HTML：**

```
<div>
    <audio controls></audio>
</div>
<div>
    <input type="text" value="http://goo.gl/k3oDc" />
</div> 
```

西蒙

# subquery - Batchjob：子查询可接收的记录数

> ID：14955853
> 
> 赞同：0
> 
> 时间：2013-02-19T11:03:14.850
> 
> 标签：subquery, batch-processing

我对 Apex 比较陌生，但我对正在创建的批处理作业有一些疑问。我想使用子查询进行查询（请参阅代码）。每个 Portal_c*可以有超过 200 个*Exporte_r 。

`global Database.QueryLocator start(Database.BatchableContext BC) { String query = 'SELECT Id, Name, (SELECT Id FROM Exporte__r) FROM Portal__c';
return Database.getQueryLocator(query); }`

```
global void execute(Database.BatchableContext BC, List<Portal__c> scope) {
        for (Portal__c portal : scope) {

              // doesn't work -> First error: Aggregate query has too many rows for direct assignment, use FOR loop
              // when using FOR loop -> System.QueryException: invalid query locator
              //List<Export__c> relatedExports = portal.Exporte__r;

              // grab all the related Export__c records using 'getSObjects' to avoid errors described above
              Export__c[] relatedExports = portal.getSObjects('Exporte__r');
              if (relatedExports != null) {
                    for (Export__c exp : relatedExports) {
                          // do something
                    }
              }
        }
} 
```

我有以下问题：

1.  如果我使用`List<Export__c> relatedExports = portal.Exporte__r`（我注释掉）来获取子查询记录，那么我将收到错误消息：“聚合查询有太多行无法直接分配，请使用 FOR 循环”。该错误消息对我来说毫无意义，因为 SOQL 之前已经完成。有什么解释吗？
2.  使用上述解决方案，*每个 Portal* _c 接收到的类型 Exporte_ r 的最大记录数量为 199，尽管我对 Portal__c 的某些记录有 200 多条记录，为什么它仅限于该数量？在这种情况下，似乎所有高于 199 的记录都被忽略了。
3.  是否有可能从子查询中接收超过 199 条记录？我试图更改批量大小，但它似乎与子查询可接收的记录数无关。任何想法？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T08:45:23.520

根据销售人员文档[http://www.salesforce.com/us/developer/docs/apexcode/Content/langCon_apex_loops_for_SOQL.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/langCon_apex_loops_for_SOQL.htm)

> 您可能会在 SOQLfor 循环中收到 QueryException，并显示消息 Aggregate query has too many rows for direct assignment, use FOR loop. 当访问循环内检索到的 sObject 的大量子记录时，或者在获取此类记录集的大小时，有时会引发此异常。为避免出现此异常，请使用 for 循环遍历子记录，如下所示。
> 
> ```
> Integer count=0;
> for (Contact c : returnedAccount.Contacts) {
>     count++;
>     // Do some other processing
> } 
> ```

# jquery - 验证电子邮件地址时面临的问题

> ID：14955857
> 
> 赞同：0
> 
> 时间：2013-02-19T11:03:23.270
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, unobtrusive-validation

**jQuery**

```
$(document).ready(function () {
    var EmailContainer = $('#EmailContainer');
    var url = EmailContainer.attr('data-url');
    EmailContainer.load(url, function () {
        var Emailform = $('#EmailForm');
        $.validator.unobtrusive.parse(Emailform);
        Emailform.submit(function () {
            debugger;
            var Emailform = $(this);
            if (Emailform.valid()) {
                var SendEmailUrl = EmailContainer.attr('Json-Url');
                var UserModel = { From: $('#From').val(), To: $('#To').val(), 
                      Subject: $('#Subject').val(), 
                      Description: $('#Description').val() }
                $.post(SendEmailUrl, UserModel, function (data) {
                    Emailform.html(data);
                    Emailform.removeData('validator');
                    Emailform.removeData('unobtrusiveValidation');
                    $.validator.unobtrusive.parse(Emailform);
                });
            }
            return false;
        });
    });
}); 
```

**模型**

```
public class User
    {
        [Required(ErrorMessageResourceType = typeof(Resource1), 
              ErrorMessageResourceName = "From")]
        [DataType(System.ComponentModel.DataAnnotations.DataType.EmailAddress,
              ErrorMessageResourceType = typeof(Resource1), 
              ErrorMessageResourceName = "InvalidEmail")]
        [DisplayName("From Email Address")]
        public String From { get; set; }

        [Required(ErrorMessageResourceType = typeof(Resource1),
                  ErrorMessageResourceName = "To")]
        [DataType(System.ComponentModel.DataAnnotations.DataType.EmailAddress, 
                  ErrorMessageResourceType = typeof(Resource1), 
                  ErrorMessageResourceName = "InvalidEmail")]
        [DisplayName("To Email Address")]
        public String To { get; set; }

        [Required(ErrorMessageResourceType = typeof(Resource1),
                  ErrorMessageResourceName = "Subject")]
        [DisplayName("Subject")]
        public String Subject { get; set; }

        [Required(ErrorMessageResourceType = typeof(Resource1),
                  ErrorMessageResourceName = "Description")]
        [DisplayName("Description")]
        public String Description { get; set; }
    } 
```

问题 - 不显示无效电子邮件地址的验证

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:21:53.773

> 问题 - 不显示无效电子邮件地址的验证

我在您的代码中看不到您进行任何验证的任何地方。如果要进行验证，请在模型属性上使用相应的验证属性：

```
[Required(ErrorMessageResourceType = typeof(Resource1), 
      ErrorMessageResourceName = "From")]
[DataType(System.ComponentModel.DataAnnotations.DataType.EmailAddress,
      ErrorMessageResourceType = typeof(Resource1), 
      ErrorMessageResourceName = "InvalidEmail")]
[DisplayName("From Email Address")]
[RegularExpression("GET A REGEX TO VALIDATE AN EMAIL FROM HERE: http://www.regular-expressions.info/email.html")]
public string From { get; set; } 
```

`To`如果这是一封电子邮件，显然这同样适用于您的财产：

```
[Required(ErrorMessageResourceType = typeof(Resource1),
          ErrorMessageResourceName = "To")]
[DataType(System.ComponentModel.DataAnnotations.DataType.EmailAddress, 
          ErrorMessageResourceType = typeof(Resource1), 
          ErrorMessageResourceName = "InvalidEmail")]
[DisplayName("To Email Address")]
[RegularExpression("GET A REGEX TO VALIDATE AN EMAIL FROM HERE: http://www.regular-expressions.info/email.html")]
public string To { get; set; } 
```

因此，请在此处获取电子邮件的正则表达式：[http ://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T11:08:29.933

`System.ComponentModel.DataAnnotations.DataType.EmailAddress`不是用于验证电子邮件。它用于 ASP.Net MVC 可以决定如何显示字段的值。

您必须编写自己的电子邮件验证逻辑。如果我们应用于`System.ComponentModel.DataAnnotations.DataType.EmailAddress`任何属性，则该字段将显示为超链接，而不是作为普通文本显示，该文本将添加一个“mailTo”链接。通过编写自定义数据注释添加您自己的验证电子邮件地址的逻辑。

干杯

# windows - Tortoisehg 在使用 subrepos 时会打开控制台窗口。我该如何阻止它？

> ID：14955860
> 
> 赞同：3
> 
> 时间：2013-02-19T11:03:36.623
> 
> 标签：windows, mercurial, cmd, tortoisehg, msysgit

我有一个带有 git subrepo 的 mercurial repo。每当我打开 TortoiseHG 时，都会打开多个 (5-10) 个控制台窗口并快速关闭（不到 1 秒）。我想让乌龟在不显示这些窗口的情况下工作。

到目前为止，我最好的线索是[这个旧线程](https://www.mercurial-scm.org/pipermail/mercurial-devel/2011-May/031812.html)。它适用于 SVN，但它似乎在正确的轨道上。

我可以修改 python 脚本，但我更愿意让它工作而不诉诸于此。

我在 Windows 上将 msysgit 与 openssh 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:14:03.570

看看这个类：

[http://hg.intevation.org/mercurial/crew/file/61c8327ced50/mercurial/subrepo.py#l901](http://hg.intevation.org/mercurial/crew/file/61c8327ced50/mercurial/subrepo.py#l901)

那应该包含相关的代码。这也可能有用：

[http://hg.intevation.org/mercurial/crew/file/61c8327ced50/mercurial/win32.py#l281](http://hg.intevation.org/mercurial/crew/file/61c8327ced50/mercurial/win32.py#l281)

# wpf - 双值上的 XAML 样式触发器

> ID：14955870
> 
> 赞同：0
> 
> 时间：2013-02-19T11:03:59.823
> 
> 标签：wpf, xaml, triggers, styles

我想根据数据源中的双字段显示特定图像。

该字段包含从 0.0 到 100.0 的值，我得到了四个图像，范围从 0-25、26-50、51-75 和 76-100。

如何在 XAML 中实现这一点？

我当前的触发器：

```
<Style.Triggers>
  <Trigger Property="Suitability" Value="50">
     <Setter Property="Source" Value="image2.png" />
  </Trigger>
</Style.Triggers> 
```

但这不适用于范围值，仅适用于静态值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:14:39.547

你有没有看过转换器......它基本上应该将一个双精度转换为一个字符串......在转换器逻辑中你还可以包含你的范围......或调用其他业务逻辑......

以下是如何编写转换器以及它们的用途。 [http://msdn.microsoft.com/en-us/library/aa970913.aspx](http://msdn.microsoft.com/en-us/library/aa970913.aspx)

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:16:05.757

你有视图模型吗？最简单的方法是向您的 VM 添加一个单独的枚举属性，视图可以绑定到：

```
public SuitabilityLevel SuitabilityLevel
{
    get
    {
        if (this.Suitability < 25)
        {
            return SuitabilityLevel.Low;
        }

        ...
    }
} 
```

然后在您的 XAML 中：

```
<Trigger Property="SuitabilityLevel" Value="Low">
    <Setter Property="Source" Value="image1.png" />
</Trigger> 
```

没有视图模型？使用转换器。

# c++ - 在WinXP及以上版本的c++中获取无线适配器的mac地址

> ID：14955874
> 
> 赞同：1
> 
> 时间：2013-02-19T11:04:08.613
> 
> 标签：c++, windows, wireless, iphelper

我想拥有以上。我找到了 IP Helper API，它可以工作。唯一的问题是，在比 Vista 更早的系统上，我无法识别适配器是无线的还是普通的以太网。我还需要支持 WinXP 和 Server 2003。

这是文档中的相关引用（[IP Helper](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366062%28v=vs.85%29.aspx)）：

> IEEE 802.11 无线网络接口。注意 此适配器类型在 Windows Vista 及更高版本上返回。在 Windows Server 2003 和 >Windows XP 上，IEEE 802.11 无线网络接口返回 >MIB_IF_TYPE_ETHERNET 的适配器类型。

**那么在 WinXP/Server2003 及更高版本上识别无线适配器并获取其 MAC 地址的好方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:36:53.010

如果您要从头开始支持 XP，这是在将 Native Wifi API 引入 XP 之前（SP 2 和 3 支持 Native Wifi API）。

[我认为通过WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394558%28v=vs.85%29.aspx)仍然可能有机会。您可能可以创建一个[`Win32_NetworkAdapter`](http://msdn.microsoft.com/en-us/library/aa394216%28VS.85%29.aspx)（不推荐使用的 WMI 类）在这个类中，您应该能够提取`AdapterTypeID`哪个告诉它是否是无线设备以及`MACAddress`哪个给您 MAC 地址。

所以我认为你的选择是要么支持 Windows XP SP 2 或更高版本，要么必须与 WMI 和不推荐使用的类集成。看起来无论如何都有骆驼可以吞下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:26:44.487

[GetAdapterAddresses](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365915%28v=vs.85%29.aspx)是 windows api 的一部分，应该为您提供有关 mac 地址和 NIC 类型的信息。

该调用返回一个指向适配器链表的结构。

确保你没有硬编码结构的大小以保持 Windows 版本之间的可移植性，因为`IP_ADAPTER_ADDRESSES`结构在版本之间改变了大小。

**编辑：**

这显然只给你mac地址，因为它只在Vista之后报告正确的类型

但是， [GetIfTable](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366842%28v=vs.85%29.aspx)返回一个`MIB_IFTABLE`结构，从中您可以读取一个`MIB_IFROW`具有 dwType 的结构，该结构可能是 IF_TYPE_IEEE80211 类型，也可能不是。这没有说明这对于 Vista 来说是特别的，并且应该对 XP 有效，除非 MS 弄乱了他们的文档。

这两个都应该有一个物理地址，所以你应该能够匹配这两个条目来识别一张卡。

# git - 当您只需要跟踪 1000 个文件中的几个文件时，如何组织 git 存储库？

> ID：14955878
> 
> 赞同：0
> 
> 时间：2013-02-19T11:04:16.463
> 
> 标签：git

如果有人认为主题问题是错误的，您可以编辑。

我们在这里有相当大的包，其中只有几个目录被修改。我的意思是有很多目录路径，其中包含更多文件，那么我们实际上需要使用 git 进行跟踪。所以`api/dir/dir2/contrib/`里面有10个文件，只需要跟踪2个。我们有很多这样的位置，为此使用 gitignore 真的很麻烦。第一个选择是忽略所有文件，`git add`只有那些我需要使用 -f 标志提交的文件，每次都这样做真的很烦人。有没有更好的解决方案来组织这样的 repo？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:14:59.453

您可以忽略所有内容并将*不想*忽略的文件添加到`.gitignore`文件中，并以感叹号为前缀。

例子：

```
*
!.gitignore
!foo.txt 
```

这将忽略除文件`.gitignore`和`foo.txt`根文件夹中的所有内容。

不幸的是，当涉及到目录中的文件时，它并不那么容易。

假设我有以下结构：

```
/.gitignore
/foo.txt
/sub/foo.txt
/sub/some_other.txt
/sub2/sub21/bar.txt
/sub2/sub21/some_other2.txt 
```

我只想包括`bar.txt`并`foo.txt`忽略其他所有内容。

`*`忽略所有内容，因此它也忽略子文件夹。简单地添加`!sub/foo.txt`不足以使 git 取消忽略该文件。你真正需要做的是：

1.  取消忽略`sub`：`!sub/`
2.  取消忽略`sub/foo.txt`：`!sub/foo.txt`

如果您的目录层次结构很深，这将变得非常麻烦。

要取消忽略`bar.txt`，需要以下内容：

```
!sub2/
!sub2/sub21/
!sub2/sub21/bar.txt 
```

# php - 如何将不同 php 脚本中的会话和变量用于另一个 php 文件。

> ID：14955881
> 
> 赞同：1
> 
> 时间：2013-02-19T11:04:28.387
> 
> 标签：php, web-services, session

这是一个 Android 应用程序，我使用的是用 php 编写的 web 服务。我有 3 个 php 脚本 - dbconnect.php（这包含所有 db 变量）、login.php（这将验证用户凭据并打开一个会话）和 showCases.php（它将返回从获取的 userID 变量中获取的票证列表login.php 脚本）

但是，由于某种原因，当我请求信息 showCases.php 时，我有：“用户 'ODBC'@'localhost' 的访问被拒绝（使用密码：否）”。我不太确定会话是否正确使用。

这是 login.php 脚本：

```
 //Displaying the error if sql query is incorrect
 if(!$result){
    die(mysql_error());
 }else{
    $row = mysql_fetch_assoc($result);
    $first_name = $row['first_name'];
    $id = $row['id'];
 }

 //If found, number of rows must be 1
 if($num_rows==0){    
   $success = 0;
 }else{
   //creating session
   session_start();
   session_register("$username");
   session_register("$password");
   $success = 1;  

 }
   $arr = array(
    array('username' => $username, 'id'=>$id,'success'=>$success, 'first_name'=>$first_name));
    #array('success'=> $success));

 echo json_encode((array('Username'=>$arr)));

 mysql_close();
 ?> 
```

该脚本会将用户名数组返回给 android 应用程序以供其处理验证。验证后，android 应用程序将从此 php 脚本请求票证。

```
session_start();

#require('dbconnect.php');
require_once('login.php');

$response=array();
$response['infos'] = array();   

//execute the SQL query and return records
$result = mysql_query("SELECT cases.id, cases.account_id....  casesvisibility.user_id = '$id'......";

//Displaying the error if sql query is incorrect
if(!$result){
   die(mysql_error());
}

$num_rows = mysql_num_rows($result);
$arr = array();

if($num_rows!=0){
while ($row = mysql_fetch_assoc($result)) {
$arr['cases_id']=$row['cases.id'];
$infos[]=$arr;
}
}else{
#$arr['existingCases']=$row['0'];
$arr['cases_id']=0;
$infos[]=$arr;
}

#Echoing a JSONArray
print(json_encode(array('Cases'=>$infos)));
//close the connection
mysql_close();
?> 
```

我不太确定这是我希望它实现的功能的编写良好的代码。当我从 android 应用程序调用此脚本时，我首先从登录脚本中获取 JSON_array，它告诉我：

```
{"Username":[{"username":"","id":null,"success":0,"first_name":null}]}id is 
Warning: mysql_query() [function.mysql-query]: Access denied for user 'ODBC'@'localhost' (using password: NO) in E:\wamp\www\mobile.dcl.mu\webserver\showCases.php on line 18

Warning: mysql_query() [function.mysql-query]: A link to the server could not be established in E:\wamp\www\mobile.dcl.mu\webserver\showCases.php on line 18 
```

用户 'ODBC'@'localhost' 的访问被拒绝（使用密码：否）

我知道我正在尝试使用另一个 php 脚本中的变量。

你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:15:33.790

你在哪里创作`$num_rows`？可能您想将此代码放在顶部 login.php 中：

```
 //Displaying the error if sql query is incorrect
 if(!$result){
    die(mysql_error());
 }else{
    $num_rows = mysql_num_rows($result);
    if ($num_rows) {
            $row = mysql_fetch_assoc($result);
            $first_name = $row['first_name'];
            $id = $row['id'];
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:29:52.663

我认为您正在混淆**会话**和**数据库连接**（如果我正确理解您的代码片段）。

请记住，对于服务器来说，每个请求都是一个全新的过程。您可以通过会话共享变量，但不能共享进程绑定资源，如数据库连接。

正如您的服务器告诉您的那样，在第二个请求中没有密码，甚至可能是错误的（默认？）数据库用户。

所以，你需要做的只是：

在每个可能的执行路径中提供数据库连接信息。即，如果您的 android 应用程序直接调用[http://your.server/showCases.php](http://your.server/showCases.php)，请将 dbconnect.php 也包含在 showCases.php 中。

我想你有过一次：在你的第二个脚本中，你有这一行：

```
#require('dbconnect.php'); 
```

再次尝试取消注释，它可能会让您离目标更近一步。

PS 纯`mysql_*`函数**已弃用**，请阅读 php.net 文档（或此处的其他问题）以了解有关这些函数的安全问题。升级您的脚本以使用 PDO 或 mysqli

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:24:25.843

您的数据库连接调用最有可能出现问题，您没有提供正确的用户名和/或密码。我怀疑缺少密码。检查您的数据库连接

```
$db_host = "localhost"; // database host
$db_name = "test";   // database name
$db_login = "root";  // database user
$db_pass= "*****"; // database password

$db = mysql_connect($db_host, $db_login, $db_pass);
mysql_select_db($db_name,$db); 
```

这只是指示我所指内容的示例代码。此外，请确保在每个 php 文件中都包含此 db 连接文件。有多种方法可以使 db 连接可用于不同的 php 文件（其中 sql 调用获取 make）

# java - Java Socket 连接超时错误在联系 SMS 网关时出现

> ID：14955882
> 
> 赞同：0
> 
> 时间：2013-02-19T11:04:35.233
> 
> 标签：java, http, sockets, sms

这是我试图通过红色氧气服务器发送短信的代码

这是我在 final String requestURL = " [http://www.redoxygen.net/sms.dll?Action=SendSMS](http://www.redoxygen.net/sms.dll?Action=SendSMS) ";下面执行的代码

```
 final StringBuilder stringBuilder = new StringBuilder();
    try {
        stringBuilder.append("AccountId=").append(URLEncoder.encode("****", "UTF-8"))
                .append("&Email=").append(URLEncoder.encode("*******", "UTF-8"))
                .append("&Password=").append(URLEncoder.encode("******", "UTF-8"))
                .append("&Recipient=").append(URLEncoder.encode("******", "UTF-8"))
                .append("&Message=").append(URLEncoder.encode("hello", "UTF-8"));
    } catch (UnsupportedEncodingException e) {
        throw new RuntimeException(e);
    }

    final URL address;
    try {
        address = new URL(requestURL);
    } catch (MalformedURLException e) {
        throw new RuntimeException(e);
    }

    final HttpURLConnection connection;
    try {
        connection = (HttpURLConnection) address.openConnection();
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
    try {
        connection.setRequestMethod("POST");
    } catch (ProtocolException e) {
        throw new RuntimeException(e);
    }
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setConnectTimeout(100000000);

    DataOutputStream output = null;
    try {
        output = new DataOutputStream(connection.getOutputStream());
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
    try {
        output.writeBytes(stringBuilder.toString());
    } catch (IOException e) {
        throw new RuntimeException(e);
    } 
```

执行时出现以下异常：

```
java.net.ConnectException: Connection timed out: connect
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:525)
at sun.net.NetworkClient.doConnect(NetworkClient.java:158)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:394)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:529)
at sun.net.www.http.HttpClient.<init>(HttpClient.java:233)
at sun.net.www.http.HttpClient.New(HttpClient.java:306)
at sun.net.www.http.HttpClient.New(HttpClient.java:323)
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:860)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:801)
at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:726)
at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:904)
at com.nextenders.server.LoginServlet.SendSMS(LoginServlet.java:143) 
```

我尝试增加连接 `timeout` 并关闭防火墙...等但没有运气。谁能帮我追踪问题？

这是我正在关注的教程： [http ://www.redoxygen.com/developers/java/](http://www.redoxygen.com/developers/java/)

我的代码中的“ ******* ”是网关的凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:28:58.823

当我在其他网站上对其进行测试时，以下代码运行良好（因为我无法访问您的消息传递 API）：

```
 final String requestURL = "http://www.redoxygen.net/sms.dll?Action=SendSMS";
    final StringBuilder stringBuilder = new StringBuilder();
    try {
        stringBuilder.append("AccountId=").append(URLEncoder.encode("****", "UTF-8"))
                .append("&Email=").append(URLEncoder.encode("*******", "UTF-8"))
                .append("&Password=").append(URLEncoder.encode("******", "UTF-8"))
                .append("&Recipient=").append(URLEncoder.encode("******", "UTF-8"))
                .append("&Message=").append(URLEncoder.encode("hello", "UTF-8"));
    } catch (UnsupportedEncodingException e) {
        throw new RuntimeException(e);
    }

    final URL address;
    try {
        address = new URL(requestURL);
    } catch (MalformedURLException e) {
        throw new RuntimeException(e);
    }

    final HttpURLConnection connection;
    try {
        connection = (HttpURLConnection) address.openConnection();
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
    try {
        connection.setRequestMethod("POST");
    } catch (ProtocolException e) {
        throw new RuntimeException(e);
    }
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setConnectTimeout(100000000);

    try {
        connection.connect();
    } catch (IOException e) {
        throw new RuntimeException(e);
    }

    final DataOutputStream output;
    try {
        output = new DataOutputStream(connection.getOutputStream());
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
    try {
        output.writeUTF(stringBuilder.toString());
    } catch (IOException e) {
        throw new RuntimeException(e);
    }

    final InputStream inputStream;
    try {
        inputStream = connection.getInputStream();
    } catch (IOException e) {
        final char[] buffer = new char[0x10000];
        final StringBuilder stackBuilder = new StringBuilder();
        final Reader in;
        try {
            in = new InputStreamReader(connection.getErrorStream(), "UTF-8");
        } catch (UnsupportedEncodingException ex) {
            throw new RuntimeException(ex);
        }
        try {
            int read;
            do {
                read = in.read(buffer, 0, buffer.length);
                if (read > 0) {
                    stackBuilder.append(buffer, 0, read);
                }
            } while (read >= 0);
            System.out.println("Error response code from server. Error was:");
            System.out.println(stackBuilder.toString());
        } catch (IOException ex) {
            throw new RuntimeException(ex);
        } finally {
            try {
                in.close();
            } catch (IOException ex) {
                throw new RuntimeException(ex);
            }
        }
        throw new RuntimeException(e);
    }

    final char[] buffer = new char[0x10000];
    final StringBuilder stackBuilder = new StringBuilder();
    final Reader in;
    try {
        in = new InputStreamReader(inputStream, "UTF-8");
    } catch (UnsupportedEncodingException ex) {
        throw new RuntimeException(ex);
    }
    try {
        int read;
        do {
            read = in.read(buffer, 0, buffer.length);
            if (read > 0) {
                stackBuilder.append(buffer, 0, read);
            }
        } while (read >= 0);
        System.out.println(stackBuilder.toString());
    } catch (IOException ex) {
        throw new RuntimeException(ex);
    } finally {
        try {
            in.close();
        } catch (IOException ex) {
            throw new RuntimeException(ex);
        }
    } 
```

当流未连接时，它将`toString`处理各种流并进行错误处理。
最重要的变化是使用`DataOutputStream.writeUTF`方法而不仅仅是`write`方法——这将确保`POST`数据被正确编码。我不认为这是您的问题，因为问题出在`connect`.
您使用的示例代码似乎不知道 Java 命名约定或最佳实践，我已经对其进行了相当大的整理。
可以将流阅读器拉出并放入单独的方法中以避免重复。
我建议将它指向另一个网站（我使用了我的作品），看看你是否得到输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:44:28.317

这是一个网络拓扑问题。您无法从您所在的位置连接到该站点。一些干预防火墙，可能是你自己的，正在阻止它。与您的网络管理员交谈。

# android - json解析错误

> ID：14955883
> 
> 赞同：0
> 
> 时间：2013-02-19T11:04:37.703
> 
> 标签：android, json, parsing

请帮我找出这段代码中的错误。我想通过 json 从远程服务器（php 和 mysql）获取一些数据，然后对其进行解析，问题是**结果**返回**null**，但它应该在此链接 返回**名称：http:** [//codeincloud.tk/json_android_example.php](http://codeincloud.tk/json_android_example.php)

```
package com.shadatv.shada;

import java.io.IOException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class canticlesActivity extends Activity {

    TextView httpStuff;
    HttpClient client;
    JSONObject json;

    final static String URL = "http://codeincloud.tk/json_android_example.php";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.canticles);

        httpStuff = (TextView) findViewById(R.id.textView1);
        client = new DefaultHttpClient();
        new Read().execute("name");
    }

    public JSONObject lastTweet() throws ClientProtocolException, IOException, JSONException {
        StringBuilder url = new StringBuilder(URL);

        HttpGet get = new HttpGet(url.toString());
        HttpResponse r = client.execute(get);
        int status = r.getStatusLine().getStatusCode();

        if (status == 200) {
            HttpEntity e = r.getEntity();
            String data = EntityUtils.toString(e);
            JSONArray timeline = new JSONArray(data);
            JSONObject last = timeline.getJSONObject(0);
            return last;

        } else {
            Toast.makeText(getBaseContext(), "error", Toast.LENGTH_SHORT);
            return null;
        }
    }

    public class Read extends AsyncTask<String, Integer, String>{

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub

            try {
                json = lastTweet();
                return json.getString(params[0]);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            Toast.makeText(getBaseContext(), "ahmed .. " + result, Toast.LENGTH_LONG).show();
            httpStuff.setText(result);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:21:16.517

您的 URL 提供以下数据：

> {“名称”：“Froyo”，“版本”：“Android 2.2”}

解析 JSON 的代码块如下：

> ```
>  JSONArray timeline = new JSONArray(data);
>         JSONObject last = timeline.getJSONObject(0); 
> ```

这假设您正在阅读的 JSON 文档是一个数组而不是一个对象。（两者都是有效的 JSON，但您获取的文档很明显是一个对象）。Web 服务调用可能并不总是返回一个或另一个，因此您必须注意解析正确的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:08:50.010

将当前 json 字符串解析为：

```
 HttpEntity e = r.getEntity();
 String data = EntityUtils.toString(e);
 // convert data to json object
 JSONObject last =new JSONObject(data); 
```

因为当前的 web 服务重新调整了`JSONObject`only 而不是`JSONArray`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:11:43.793

复制并过去现在它正在工作。我最后更改了 JSONObject =new JSONObject(data);

因为[http://codeincloud.tk/json_android_example.php](http://codeincloud.tk/json_android_example.php)重新调整 JSONObject

```
package com.shadatv.shada;

import java.io.IOException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class canticlesActivity extends Activity {

    TextView httpStuff;
    HttpClient client;
    JSONObject json;

    final static String URL = "http://codeincloud.tk/json_android_example.php";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.canticles);

        httpStuff = (TextView) findViewById(R.id.textView1);
        client = new DefaultHttpClient();
        new Read().execute("name");
    }

    public JSONObject lastTweet() throws ClientProtocolException, IOException, JSONException {
        StringBuilder url = new StringBuilder(URL);

        HttpGet get = new HttpGet(url.toString());
        HttpResponse r = client.execute(get);
        int status = r.getStatusLine().getStatusCode();

        if (status == 200) {
            HttpEntity e = r.getEntity();
            String data = EntityUtils.toString(e);

            JSONObject last =  new JSONObject(data);
            return last;

        } else {
            Toast.makeText(getBaseContext(), "error", Toast.LENGTH_SHORT);
            return null;
        }
    }

    public class Read extends AsyncTask<String, Integer, String>{

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub

            try {
                json = lastTweet();
                return json.getString(params[0]);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            Toast.makeText(getBaseContext(), "ahmed .. " + result, Toast.LENGTH_LONG).show();
            httpStuff.setText(result);
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:21:12.380

最好使用 GSON 库，它比手动解析要简单得多。

图书馆的链接是：[http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

# c#-4.0 - 与接口的反差

> ID：14955885
> 
> 赞同：0
> 
> 时间：2013-02-19T11:04:44.723
> 
> 标签：c#-4.0, generics

我有一个接口 iExportColumn 和一个实现接口的类 ExportColumn。ExportColumnCollection 类应该是所有实现 IExportColumn 接口的类的通用类。

```
public interface IExportColumn
{
    string Header { get; set; }
    string ColumnName { get; set; }
}

public class ExportColumn : IExportColumn
{
    public ExportColumn(){}
    public string Header { get; set; }
    public string ColumnName { get; set; }
}

public class ExportColumnCollection<T> where T: IExportColumn
{
    private List<T> cols;

    public ExportColumnCollection (List<T> c)
    {
        cols = c;
    }

    public T Columninfo (string colname)
    {
    }
      .....
 } 
```

我收到运行时错误提示无法加载类型`ExportColumnCollection`。

我正在寻找一些东西来实现类似的东西 `List<IExportColumn> = new List<ExportColumn>();`

我有两个实现接口 IExportColumn 的类，我需要持有一个 GenericCollection 来处理 List

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:10:20.177

您的班级的正确用法是：

```
List<IExportColumn> list= new List<IExportColumn>();
// you may add to the collection any class which implements IExportColumn
list.Add(new ExportColumn1() { ColumnName = "Id" });
list.Add(new ExportColumn2() { ColumnName = "Value" });

ExportColumnCollection<IExportColumn> collection = new 
    ExportColumnCollection<IExportColumn>(list);
var colInfo = collection.ColumnInfo("Id"); 
```

# sql-server-2008 - 查询存储过程结果集

> ID：14955890
> 
> 赞同：0
> 
> 时间：2013-02-19T11:05:01.223
> 
> 标签：sql-server-2008, stored-procedures

我正在使用 SQL Server 2008。我有一个存储过程的结果集，我想在结果集上触发更多查询，例如按 desc /asc 排序和一些查询。那么最好的方法是什么。使用视图或使用 OPENQUERY。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:38:19.750

您可以将存储过程调用的结果保存在与存储过程返回的结果集具有相同数量和类型的字段的任何表或表变量中，例如：

```
CREATE TABLE #temp(col1 INT, col2 VARCHAR(10))
INSERT INTO #temp(col1, col2)
EXEC usp_Proc1(@param1)

SELECT  *
FROM    #temp 
```

条件是返回由类型和（按该顺序）`usp_Proc1`的列组成的行。`INT``VARCHAR(10)`

# android - 具有固定页眉和页脚的滚动视图内的 Android 相对布局

> ID：14955891
> 
> 赞同：1
> 
> 时间：2013-02-19T11:05:03.143
> 
> 标签：android, android-layout, height, android-scrollview, android-relativelayout

我想要一个页面，它有一个静态页眉和页脚，里面有可滚动的内容。这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/headerView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/sendfunds" />
    </LinearLayout>

    <ScrollView
        android:id="@+id/scrollablContent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/footerView"
        android:layout_below="@+id/headerView" >

        <RelativeLayout
            android:id="@+id/content"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="30dp"
                android:layout_marginTop="26dp"
                android:text="Balance"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="8pt"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/textView1"
                android:layout_centerHorizontal="true"
                android:text="TextView" />

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView2"
                android:layout_alignBottom="@+id/textView2"
                android:layout_marginLeft="16dp"
                android:layout_toRightOf="@+id/textView2"
                android:text="TextView" />

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:layout_below="@+id/textView1"
                android:layout_marginTop="34dp"
                android:text="WHO ARE YOU SENDING MONEY TO?"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="8pt" />

            <TextView
                android:id="@+id/textView5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView4"
                android:layout_marginTop="35dp"
                android:text="Recipient Name"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText1"
                android:layout_width="170dp"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView5"
                android:layout_alignBottom="@+id/textView5"
                android:layout_alignParentRight="true"
                android:ems="10" />

            <TextView
                android:id="@+id/textView6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/editText1"
                android:layout_marginTop="25dp"
                android:text="Recipient Email"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView6"
                android:layout_alignBottom="@+id/textView6"
                android:layout_alignLeft="@+id/editText1"
                android:layout_alignParentRight="true"
                android:ems="10" />

            <TextView
                android:id="@+id/textView7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:layout_below="@+id/editText2"
                android:layout_marginTop="37dp"
                android:text="HOW MUCH DO YOU WANT TO SEND?"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="8pt" />

            <TextView
                android:id="@+id/textView8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView7"
                android:layout_marginTop="34dp"
                android:text="Amount"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView8"
                android:layout_alignBottom="@+id/textView8"
                android:layout_alignLeft="@+id/editText2"
                android:layout_alignParentRight="true"
                android:ems="10" >

                <requestFocus />
            </EditText>

            <TextView
                android:id="@+id/textView9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/editText3"
                android:layout_marginTop="24dp"
                android:text="Wallet Cat."
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <Spinner
                android:id="@+id/spinner1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/editText3"
                android:layout_alignParentRight="true"
                android:layout_alignTop="@+id/textView9" />

            <TextView
                android:id="@+id/textView10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView9"
                android:layout_alignBottom="@+id/textView9"
                android:layout_alignLeft="@+id/spinner1"
                android:layout_marginLeft="22dp"
                android:text="TextView"
                android:visibility="gone" />

            <TextView
                android:id="@+id/textView11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView9"
                android:layout_marginTop="35dp"
                android:text="Pay Ref."
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/textView11"
                android:layout_alignLeft="@+id/spinner1"
                android:layout_alignParentRight="true"
                android:ems="10" />

            <TextView
                android:id="@+id/textView12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView11"
                android:layout_marginTop="27dp"
                android:text="Detail Ref."
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/textView12"
                android:layout_alignLeft="@+id/editText4"
                android:layout_alignParentRight="true"
                android:ems="10" />

            <TextView
                android:id="@+id/textView13"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView12"
                android:layout_marginTop="39dp"
                android:text="Date of Birth"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/textView13"
                android:layout_alignLeft="@+id/editText5"
                android:ems="10" />

            <TextView
                android:id="@+id/textView14"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView13"
                android:layout_marginTop="40dp"
                android:text="Password"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/textView14"
                android:layout_alignLeft="@+id/editText6"
                android:layout_alignParentRight="true"
                android:ems="10" />

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/editText7"
                android:layout_marginTop="37dp"
                android:layout_toLeftOf="@+id/textView3"
                android:text="Submit" />
        </RelativeLayout>
    </ScrollView>

    <RelativeLayout
        android:id="@+id/footerView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/wallet_ic" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/imageView1"
            android:src="@drawable/send_ic_hover" />

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/imageView2"
            android:src="@drawable/upload_ic" />

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/imageView3"
            android:src="@drawable/history1" />

        <ImageView
            android:id="@+id/imageView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/imageView4"
            android:src="@drawable/more" />
    </RelativeLayout>

</RelativeLayout> 
```

有了这个，我有了静态页眉和页脚，但缺少一些可滚动的内容。我尝试增加`ScrollView`和布局的高度，`fillViewport=true`但没有运气。我应该如何增加中间布局的高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:06:31.900

您可以通过使用**LinearLayout**容器而不是**RelativeLayout**容器来解决此问题。

该容器应该有 3 个子项：Header、Content 和 Footer。内容的高度设置为填充剩余空间。您可以通过使用 weight 属性来做到这一点：

```
 android:layout_height="0dp"
    android:layout_weight="1" 
```

使用此代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/headerView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/sendfunds" />
    </LinearLayout>

    <ScrollView
        android:id="@+id/scrollablContent"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1">

        <RelativeLayout
            android:id="@+id/content"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <!-- Your Content -->                

        </RelativeLayout>
    </ScrollView>

    <RelativeLayout
        android:id="@+id/footerView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/wallet_ic" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/imageView1"
            android:src="@drawable/send_ic_hover" />

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/imageView2"
            android:src="@drawable/upload_ic" />

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/imageView3"
            android:src="@drawable/history1" />

        <ImageView
            android:id="@+id/imageView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/imageView4"
            android:src="@drawable/more" />
    </RelativeLayout>

</LinearLayout> 
```

请注意，使用

```
 android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true 
```

在**LinearLayout**中没有意义。所以这：

```
<LinearLayout
    android:id="@+id/headerView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/sendfunds" />
</LinearLayout> 
```

是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:22:23.817

尝试这个

```
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" 
android:orientation=”vertical” >

<LinearLayout
        android:id="@+id/headerView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" >

<ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/sendfunds" />  

    </LinearLayout>

    <ScrollView
        android:id="@+id/scrollablContent"
        android:layout_width="match_parent"
        android:layout_height="0dp"
    android:layout_weight=1
>

        <RelativeLayout
            android:id="@+id/content"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

     <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="30dp"
        android:layout_marginTop="26dp"
        android:text="Balance"
        android:textStyle="bold"
        android:textSize="8pt"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView2"
        android:layout_alignBottom="@+id/textView2"
        android:layout_marginLeft="16dp"
        android:layout_toRightOf="@+id/textView2"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="34dp"
        android:text="WHO ARE YOU SENDING MONEY TO?"
        android:textSize="8pt"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView4"
        android:layout_marginTop="35dp"
        android:text="Recipient Name"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="170dp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView5"
        android:layout_alignBottom="@+id/textView5"
        android:layout_alignParentRight="true"
        android:ems="10" />

    <TextView
        android:id="@+id/textView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="25dp"
        android:text="Recipient Email"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView6"
        android:layout_alignBottom="@+id/textView6"
        android:layout_alignLeft="@+id/editText1"
        android:layout_alignParentRight="true"
        android:ems="10" />

    <TextView
        android:id="@+id/textView7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/editText2"
        android:layout_marginTop="37dp"
        android:text="HOW MUCH DO YOU WANT TO SEND?"
        android:textSize="8pt"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView7"
        android:layout_marginTop="34dp"
        android:text="Amount"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView8"
        android:layout_alignBottom="@+id/textView8"
        android:layout_alignLeft="@+id/editText2"
        android:layout_alignParentRight="true"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText3"
        android:layout_marginTop="24dp"
        android:text="Wallet Cat."
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editText3"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/textView9" />

    <TextView
        android:id="@+id/textView10"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView9"
        android:layout_alignBottom="@+id/textView9"
        android:layout_alignLeft="@+id/spinner1"
        android:layout_marginLeft="22dp"
        android:text="TextView"
        android:visibility="gone" />

    <TextView
        android:id="@+id/textView11"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView9"
        android:layout_marginTop="35dp"
        android:text="Pay Ref."
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView11"
        android:layout_alignLeft="@+id/spinner1"
        android:layout_alignParentRight="true"
        android:ems="10" />

    <TextView
        android:id="@+id/textView12"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView11"
        android:layout_marginTop="27dp"
        android:text="Detail Ref."
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView12"
        android:layout_alignLeft="@+id/editText4"
        android:layout_alignParentRight="true"
        android:ems="10" />

    <TextView
        android:id="@+id/textView13"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView12"
        android:layout_marginTop="39dp"
        android:text="Date of Birth"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView13"
        android:layout_alignLeft="@+id/editText5"
        android:ems="10" />

    <TextView
        android:id="@+id/textView14"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView13"
        android:layout_marginTop="40dp"
        android:text="Password"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView14"
        android:layout_alignLeft="@+id/editText6"
        android:layout_alignParentRight="true"
        android:ems="10" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/editText7"
        android:layout_marginTop="37dp"
        android:layout_toLeftOf="@+id/textView3"
        android:text="Submit" />

        </RelativeLayout>
    </ScrollView>

    <RelativeLayout
        android:id="@+id/footerView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        >

      <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/wallet_ic" />

  <ImageView
      android:id="@+id/imageView2"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_centerVertical="true"
      android:layout_toRightOf="@+id/imageView1"
      android:src="@drawable/send_ic_hover" />

  <ImageView
      android:id="@+id/imageView3"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_centerVertical="true"
      android:layout_toRightOf="@+id/imageView2"
      android:src="@drawable/upload_ic" />

  <ImageView
      android:id="@+id/imageView4"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentTop="true"
      android:layout_toRightOf="@+id/imageView3"
      android:src="@drawable/history1" />

  <ImageView
      android:id="@+id/imageView5"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentTop="true"
      android:layout_toRightOf="@+id/imageView4"
      android:src="@drawable/more" />

    </RelativeLayout>

</LinearLayout  > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:22:36.970

试试这个布局，在你的布局上做些小改动

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/headerView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/sendfunds" />
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/footerView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/wallet_ic" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/imageView1"
            android:src="@drawable/send_ic_hover" />

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/imageView2"
            android:src="@drawable/upload_ic" />

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/imageView3"
            android:src="@drawable/history1" />

        <ImageView
            android:id="@+id/imageView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/imageView4"
            android:src="@drawable/more" />
    </RelativeLayout>

    <ScrollView
        android:id="@+id/scrollablContent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/footerView"
        android:layout_below="@+id/headerView" >

        <RelativeLayout
            android:id="@+id/content"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="30dp"
                android:layout_marginTop="26dp"
                android:text="Balance"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="8pt"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/textView1"
                android:layout_centerHorizontal="true"
                android:text="TextView" />

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView2"
                android:layout_alignBottom="@+id/textView2"
                android:layout_marginLeft="16dp"
                android:layout_toRightOf="@+id/textView2"
                android:text="TextView" />

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:layout_below="@+id/textView1"
                android:layout_marginTop="34dp"
                android:text="WHO ARE YOU SENDING MONEY TO?"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="8pt" />

            <TextView
                android:id="@+id/textView5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView4"
                android:layout_marginTop="35dp"
                android:text="Recipient Name"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText1"
                android:layout_width="170dp"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView5"
                android:layout_alignBottom="@+id/textView5"
                android:layout_alignParentRight="true"
                android:ems="10" />

            <TextView
                android:id="@+id/textView6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/editText1"
                android:layout_marginTop="25dp"
                android:text="Recipient Email"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView6"
                android:layout_alignBottom="@+id/textView6"
                android:layout_alignLeft="@+id/editText1"
                android:layout_alignParentRight="true"
                android:ems="10" />

            <TextView
                android:id="@+id/textView7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:layout_below="@+id/editText2"
                android:layout_marginTop="37dp"
                android:text="HOW MUCH DO YOU WANT TO SEND?"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="8pt" />

            <TextView
                android:id="@+id/textView8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView7"
                android:layout_marginTop="34dp"
                android:text="Amount"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView8"
                android:layout_alignBottom="@+id/textView8"
                android:layout_alignLeft="@+id/editText2"
                android:layout_alignParentRight="true"
                android:ems="10" >

                <requestFocus />
            </EditText>

            <TextView
                android:id="@+id/textView9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/editText3"
                android:layout_marginTop="24dp"
                android:text="Wallet Cat."
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <Spinner
                android:id="@+id/spinner1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignLeft="@+id/editText3"
                android:layout_alignParentRight="true"
                android:layout_alignTop="@+id/textView9" />

            <TextView
                android:id="@+id/textView10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView9"
                android:layout_alignBottom="@+id/textView9"
                android:layout_alignLeft="@+id/spinner1"
                android:layout_marginLeft="22dp"
                android:text="TextView"
                android:visibility="gone" />

            <TextView
                android:id="@+id/textView11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView9"
                android:layout_marginTop="35dp"
                android:text="Pay Ref."
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/textView11"
                android:layout_alignLeft="@+id/spinner1"
                android:layout_alignParentRight="true"
                android:ems="10" />

            <TextView
                android:id="@+id/textView12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView11"
                android:layout_marginTop="27dp"
                android:text="Detail Ref."
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/textView12"
                android:layout_alignLeft="@+id/editText4"
                android:layout_alignParentRight="true"
                android:ems="10" />

            <TextView
                android:id="@+id/textView13"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView12"
                android:layout_marginTop="39dp"
                android:text="Date of Birth"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/textView13"
                android:layout_alignLeft="@+id/editText5"
                android:ems="10" />

            <TextView
                android:id="@+id/textView14"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textView13"
                android:layout_marginTop="40dp"
                android:text="Password"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/textView14"
                android:layout_alignLeft="@+id/editText6"
                android:layout_alignParentRight="true"
                android:ems="10" />

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/editText7"
                android:layout_marginTop="37dp"
                android:layout_toLeftOf="@+id/textView3"
                android:text="Submit" />
        </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

# java - 避免简单框架输出中的空元素标记

> ID：14955902
> 
> 赞同：1
> 
> 时间：2013-02-19T11:05:40.540
> 
> 标签：java, simple-framework

序列化所需元素时避免[“空元素标签”的正确方法是什么？](http://www.w3.org/TR/REC-xml/#d0e2480)

例子：

```
@ElementList(name="rpc", required=true)
public ArrayList<FunctionRequest> getRequestedFunctions() {
    return requestedFunctions;
} 
```

一个空列表将产生一个引用的“空元素标记”样式中的单个 XML 元素：

```
<rpc/> 
```

我真正需要的是以下表示：

```
<rpc></rpc> 
```

编辑：我需要不同类型列表的解决方案！例如，可能还有`List<String>`, `List<int>`, `List<WhateverClass>`, ... 加上注释的不同名称属性，在示例中为“rpc”。

谢谢你的帮助。

# 解决方案

我将首先介绍我实际实施的解决方案以及我在项目中使用的解决方案。之后，我将提出一个*可以*直接添加到简单代码中的更改建议。

## 我实际使用的解决方案：

由于我不想手动定义 XML 元素并为程序中的每个 List 创建一个转换器，因此我决定使用我的类的现有注释以及注释的名称属性。如果他们使用 getter 和 setter，我的解决方案将适用于将被序列化的类！它目前只绑定到使用`Attribute`和`Text`注释的类！

为了更灵活，我创建了一个“基础”类`RequestListConverter`。它有两种`protected`方法`prepareMethodList`和`writeRequest`. `prepareMethodList`将使用反射遍历给定类的所有方法并创建一个方法注释映射。`writeRequest`然后将给方法类型的单个对象写入接口方法中`prepareMethodList`给出的 Simple 的 OutputNode 。`write``Converter`

```
public class RequestListConverter {
    private HashMap<Method, Object> curMethodAnnotationMap = new HashMap<Method, Object>(); 

    @SuppressWarnings("rawtypes")
    protected void prepareMethodList(Class targetClass) {
        /*
         * First, get the annotation information from the given class.
         * 
         * Since we use getters and setters, look for the "get" methods!
         */

        Method[] curMethods = targetClass.getMethods();
        for (Method curMethod : curMethods) {
            String curName = curMethod.getName();

            // We only want getter methods that return a String
            if (curName.startsWith("get") && (curMethod.getReturnType() == String.class)) {
                Attribute curAttrAnnotation = curMethod.getAnnotation(Attribute.class);
                Text curTextAnnotation = curMethod.getAnnotation(Text.class);

                if (curAttrAnnotation != null) {
                    curMethodAnnotationMap.put(curMethod, curAttrAnnotation);
                } else
                if (curTextAnnotation != null) {
                    curMethodAnnotationMap.put(curMethod, curTextAnnotation);
                }
            }
        }
    }

    protected void writeRequest(OutputNode curNode, Object curRequest) throws Exception {
        for (Map.Entry<Method, Object> curMapEntry : curMethodAnnotationMap
                .entrySet()) {
            if ((curMapEntry.getKey() == null)
                    || (curMapEntry.getValue() == null)) {
                continue;
            }

            Method curMethod = curMapEntry.getKey();

            Attribute curAttrAnnotation = null;
            Text curTextAnnotation = null;

            if (curMapEntry.getValue() instanceof Attribute) {
                curAttrAnnotation = (Attribute) curMapEntry.getValue();
            } else if (curMapEntry.getValue() instanceof Text) {
                curTextAnnotation = (Text) curMapEntry.getValue();
            } else {
                continue;
            }

            String curValue = null;
            try {
                // Try to invoke the getter
                curValue = (String) curMethod.invoke(curRequest);
            } catch (IllegalAccessException | IllegalArgumentException
                    | InvocationTargetException e) {

                // The getter method seems to need any argument, strange! Skip
                // this!
                continue;
            }

            // If the method has an Attribute annotation, then ...
            if (curAttrAnnotation != null) {
                boolean curAttrRequired = curAttrAnnotation.required();
                String curAttrName = curAttrAnnotation.name();

                /*
                 * IF the returned method value is NULL THEN IF if the attribute
                 * is required THEN throw a NullPointerException, ELSE skip the
                 * attribute
                 */
                if (curValue == null) {
                    if (curAttrRequired) {
                        throw new NullPointerException(
                                "The required attribute " + curAttrName
                                        + " returned NULL!");
                    } else {
                        continue;
                    }
                }

                // The attribute will be added as XML text now
                curNode.setAttribute(curAttrName, curValue);
            } else
            // If the method has a Text annotation, then ...
            if (curTextAnnotation != null) {
                // we only need to store it for later string creation
                curNode.setValue(curValue);
            }
        }

        curNode.commit();
    }
} 
```

基于这个类，我创建了——例如——类`SetRequestListConverter`。它实现了 Simple 的`Converter`接口，因此它提供了`read`未实现的方法，并`write`获取了可能有元素或可能为空的 List。

该示例显示了类 Converter 的实现`SetRequestList`。它扩展了之前介绍的基`RequestConverter`类并实现`Converter`了`SetRequestList`.

```
public class SetRequestListConverter extends RequestListConverter implements Converter<SetRequestList> {

    @Override
    public SetRequestList read(InputNode newNode) throws Exception {
        return null;
    }

    @Override
    public void write(OutputNode newNode, SetRequestList newValue) throws Exception {
        if (newValue.requests.isEmpty()) {
            newNode.setValue("");
            return;
        }

        this.prepareMethodList(SetRequest.class);

        /*
         * Now we can go through all SetRequests and call the methods
         * to build the XML attributes and to get the element value (i.e. parameters) 
         */

        for (SetRequest curRequest : newValue.requests) {
            OutputNode curNode = newNode.getChild("set");

            this.writeRequest(curNode, curRequest);
        }
    }
} 
```

used`SetRequestList`是一个简单的类，它包含一个`ArrayList<SetRequest>`. 这是为了隐藏这实际上是一个 ArrayList 的事实。

```
@Root
@Convert(SetRequestListConverter.class)
public abstract class SetRequestList {
    protected ArrayList<SetRequest> requests = new ArrayList<SetRequest>();

    public void add(T newRequest) {
        requests.add(newRequest);
    }
} 
```

然后可以像这样使用这个类：

```
public class ClassToSerialize {
    private SetRequestList requestedSets = new SetRequestList();

    @Element(name="get", required=true)
    public SetRequestList getRequestedSets() {
        return requestedSets;
    }

    @Element(name="get", required=true)
    public void setRequestedSets(SetRequestList newRequestedSets) {
        requestedSets = newRequestedSets;
    }
} 
```

生成的`SetRequestList`包含元素的 XML 如下所示：

```
<get>
    <set someAttribute="text" anotherAttribute="bla">Some Text</set>
    ...
</get> 
```

生成的`SetRequestList`空 XML 将如下所示：

```
<get></get> 
```

是的，这正是我所需要的，而且我可以继续在`SetRequest`类或任何类中使用注释！无需再次（重新）定义 XML 结构！

## Simple 的代码建议

**注意：**这只是一个解决方案，未经测试！

翻了一下Simple的源码，发现这个`Formatter`类其实是写了开始和结束标签，还有空元素标签。它是通过移交`Format`对象来创建的。Simple 的 Javadoc 对`Format`类的描述如下：

> Format 对象用于提供有关如何构建生成的 XML 文档的信息。

因此，如果应该创建空元素标签，则可以使用信息对其进行扩展。为此，我添加了私有变量`useEmptyEndTag`以及适当的 getter 和 setter 方法。变量将`true`在构造函数内部初始化。如果空结束标记样式不是应该创建的，您可以在创建`Format`对象后使用`myFormat.setUseEmptyEndTag(false)`.

该类`Formatter`通过保存给定对象的新私有变量得到增强，`Format`以便能够在适当的代码位置访问设置的参数。空的结束标签写在里面`writeEnd`。有看官方源代码才能看到原始代码。这是我的建议是避免空元素标签：

```
public void writeEnd(String name, String prefix) throws Exception {
    String text = indenter.pop();

    // This will act like the element contains text
    if ((last == Tag.START) && (!format.isUseEmptyEndTag())) {
        write('>');
        last = Tag.TEXT;
    }

    if (last == Tag.START) {
        write('/');
        write('>');
    } else {
        if (last != Tag.TEXT) {
            write(text);
        }
        if (last != Tag.START) {
            write('<');
            write('/');
            write(name, prefix);
            write('>');
        }
    }
    last = Tag.END;
} 
```

这个提议是更好的解决方案——在我看来——我希望它会被添加到 Simple 的源代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:00:24.997

正如 baraky 之前所写，您可以`<rpc></rpc>`使用带有 Converter 的标签解决部分问题，如下所示：[防止在 ElementListUnion 中包含空 ElementList 的空标签](https://stackoverflow.com/questions/14443749/prevent-inclusion-of-empty-tag-for-an-empty-elementlist-in-an-elementlistunion)。关于这个特殊部分的完成位置
有一个评论。`ExampleConverter`

Moreover to get the `name` attribute see here: [How do you access field annotations from a custom Converter with Simple?](https://stackoverflow.com/questions/9343348/how-do-you-access-field-annotations-from-a-custom-converter-with-simple/14822621)

So what you need is a `Converter`-implementation for your class. For types (`int`, `String` etc.) check out [`Transformer`](http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/transform/Transformer.html)-class.

# disqus - 获取已编辑的帖子

> ID：14955904
> 
> 赞同：0
> 
> 时间：2013-02-19T11:05:45.747
> 
> 标签：disqus

我正在使用[disqus api](http://disqus.com/api/docs/posts/list/)获取所有帖子并使用光标进行分页，我将它们存储在我的数据库中。

问题是如果有人写了一篇文章，我的应用程序获取它并存储在数据库中，并获取下一个光标（并将其存储以供下一次迭代），然后编辑这篇文章，我无法再次获取它.

有没有办法通过编辑的日期时间而不是创建日期时间来获取帖子？还是另一种解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:28:17.937

这有点棘手，因为您无法在编辑时获得结果。目前唯一的解决方案是将“isEdited”布尔值与每个评论一起存储，并偶尔查看最近的结果并查找任何更改。你可以在下面的 json 中看到这个值`"isEdited": true`

当然，您会错过任何后续编辑，但绝大多数编辑过的评论只编辑过一次。即便如此，大多数编辑都发生在评论发布后的第一个小时内。假设您只是为了备份目的而这样做，您可以通过延迟同步到例如一周前的评论来完全解决这个问题。

# variables - 什么是减少变量？谁能给我一些例子？

> ID：14955912
> 
> 赞同：4
> 
> 时间：2013-02-19T11:06:21.960
> 
> 标签：variables, llvm, reduction

什么是减少变量？谁能给我一些例子？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T12:24:44.870

下面是一个用类 C 语言计算数组和的简单示例：

```
int x = 0;
for (int i = 0; i < n; i++) {
    x += a[i];
} 
```

在这个例子中，

*   `i`是一个*归纳变量*- 在每次迭代中它都会改变一些常数。它可以是`+1`（如上面的示例）或`*2`或`/3`等等，但关键是在所有迭代中，数字都是相同的。

    换句话说，在每次迭代`i_new = i_old op constant`中，where `op`is `+`，`*`等，并且在迭代之间既不`op`也不`constant`变化。

*   `x`是一个*归约变量*- 它从一次迭代到下一次迭代累积数据。它总是有一些初始化（`x = 0`在这种情况下），虽然每次迭代累积的数据可能不同，但操作符保持不变。

    换句话说，在每次迭代`x_new = x_old op data`中，并且`op`在所有迭代中都保持不变（尽管`data`可能会改变）。

在许多语言中[，有一种特殊的语法来执行这样的事情](http://en.wikipedia.org/wiki/Fold_(higher-order_function))——通常称为“折叠”或“减少”或“累积”（它还有其他名称）——但在 LLVM IR 的上下文中，归纳变量将表示为循环中的 phi 节点，位于循环内部的二元运算与其之前的初始化值之间。

减少变量（例如加法）中的交换*操作对于优化编译器来说特别有趣，因为它们似乎在迭代之间显示出比实际情况更强的依赖性；例如，上面的示例可以重写为向量化形式——例如，一次添加 4 个数字，然后是一个小循环，将最终向量求和为单个值。

[* 实际上，在可以应用这样的矢量化之前，减少变量必须满足更多条件，但这确实超出了这里的范围]

# crash - Raspberry Pi 关闭会破坏文件系统

> ID：14955914
> 
> 赞同：1
> 
> 时间：2013-02-19T11:06:24.813
> 
> 标签：crash, filesystems, shutdown, raspberry-pi

我试图编写一个小型 c 程序，女巫读出一个 GPIO 引脚以从外部关闭 pi。信号的触发工作良好。该程序由 LXDE 作为自动启动应用程序启动。如果程序检测到它正在执行的关机信号：

```
sync();
system("halt"); 
```

为什么这个程序在几次重新启动后会损坏我的 ext4 文件系统。没有固定的重启次数会损坏系统。通过将停止写入命令行，我没有看到任何区别。我正在使用最新版本的固件（今天最后一次更新），内核也是最新的（今天最后一次更新）。

有人对此有好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:01:20.953

这个应用程序是个好主意，我想知道现在没有这样的应用程序......

我认为问题在于“停止”命令。您应该改用显式命令“shutdown -h now”。

[如需进一步阅读，请参阅安东尼劳伦斯](http://aplawrence.com/Linux/halt_shutdown_reboot.html)

# javascript - 刷新输入：使用 Jquery Mobile 的 iframe 收音机

> ID：14955918
> 
> 赞同：0
> 
> 时间：2013-02-19T11:06:51.943
> 
> 标签：javascript, jquery-mobile, iframe, refresh

我正在尝试更改输入的选定选项：收音机（在主页中）动态单击 iframe 内的按钮。为此，y 通过参数传递包含 input:radio 元素的变量：

```
//code from iframe.js
button.live("click", function(e) { 
    var inputRadioContainer = $(window.parent.document).find('#inputRadioContainer');
    changeInputRadio(inputRadioContainer, "email");
});

//code from mainPage.js
function changeInputRadio(inputRadioContainer, val){
    inputRadioContainer.find('input:radio[value=val]').attr('checked',true).checkboxradio('refresh');
}

//HTML content of inputRadioContainer
<ul id="inputRadioContainer" data-role="listview">
  <li>     
    <fieldset data-role="controlgroup" data-type="horizontal" data-role="fieldcontain" data-mini="true">
        <input type="radio" name="radio-contacto" id="radio-contacto-1" value="email"/>
        <label for="radio-contacto-1" value="email">email</label>

        <input type="radio" name="radio-contacto" id="radio-contacto-2" value="tlf"/>
        <label for="radio-contacto-2" value="tlf">telf</label>
    </fieldset>
  </li>
</ul> 
```

执行该代码后，所需收音机的“已检查”属性设置为“已检查”（如预期的那样），但未显示已检查收音机。似乎**“.checkboxradio('refresh');”** 不管用。我也尝试过**“inputRadioContainer.listview('refresh')”**，但它不起作用。

任何人都知道如何解决这个问题？非常感谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:03:55.837

解决方案：

使用 inputRadioContainer.find('input:radio[value=val]').attr('checked',true) **.trigger('click');**

而不是 inputRadioContainer.find('input:radio[value=val]').attr('checked',true) **.checkboxradio('refresh');**

我希望能帮助别人

# spring-webflow - spring webflow在链接上提交表单

> ID：14955920
> 
> 赞同：1
> 
> 时间：2013-02-19T11:06:54.170
> 
> 标签：spring-webflow

我有以下问题。

我想使用 SpringWebflow 将用户输入的详细信息保存在数据库中。要求是用户必须单击`Save as Draft`链接而不是提交按钮。

我想捕获用户输入/选择的详细信息并将其作为对象发送（我不想设置请求参数，因为整个流程中有 20 多个字段）。

下面是我的代码片段。PS，没有错误。我可以看到正在写入的服务中的日志。

```
step1.jsp

<form:form commandName="userEnteredCriteria" action="${flowExecutionUrl}" method="post">

<div class="submit-buttons submit-style">
            <input type="submit" name="_eventId_next" value="next"     class="submit-button product-submit"/>
</div>

<p class="return product-submit1"><a href="${flowExecutionUrl}&_eventId=saveDraftStep1">Save as Draft</a></p>

</form:form>

weblflow.xml

<view-state id="Step1">
 <transition on="saveDraftStep1">
 <evaluate expression="myAction.bindAndValidate" /> 
 <evaluate expression="myFlowService.saveDraft(userEnteredCriteria        externalContext.nativeRequest)" />
 </transition>
</view-state> 
```

有人可以帮助我如何在链接点击时提交表格吗？我知道我必须纠正一些 javascript（如果我错了请纠正我），但我不知道如何在 javascirpt 中做到这一点。我们将 JQUERY 用于 javascript。任何示例代码都会帮助

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:06:50.300

```
<input type="submit" id="saveDraftStep1" name="_eventId_saveDraftStep1" value="saveDraftStep1" style="display:none;"/>
<a href onclick="document.getElementById('saveDraftStep1').click();">Click here to save draft</a> 
```

# rcp - 在基于 RCP 的应用程序中动态更改关于对话框文本

> ID：14955926
> 
> 赞同：3
> 
> 时间：2013-02-19T11:07:03.440
> 
> 标签：rcp

是否可以在基于 RCP 的应用程序中动态更改关于对话框文本？当关于对话框打开时，我想通过动态更改其文本的某些部分来替换 aboutText 值。问题是我有一个客户端/服务器应用程序，其中有关客户端的信息可以是静态的，但服务器信息（至少是版本字符串）可能会独立更改，我不知道它何时会发生。aboutText 本身是静态文本。about.mapping 方法也不起作用，因为该文件被打包到应用程序 JAR 中，因此也是只读的。是否有可能在 About 对话框显示之前对 aboutText 进行子类化或以其他方式更新它？我不想从头开始重写所有 Eclipse About 对话框类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T13:23:03.203

您可以使用 about.mappings 中的系统属性来实现此目的：

在应用插件的根目录下创建 about.mappings 文件

添加 0=$net.dnorth.about.text$ 等行

在 plugin.properties 中的 aboutText 集中引用 {0}

现在在启动时在一些代码中调用 System.setProperty("net.dnorth.about.text", "your dynamic text here")。

参考：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=172692](https://bugs.eclipse.org/bugs/show_bug.cgi?id=172692)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T12:39:38.833

IDE 的 about 文本是特定于实例的，即如果您正在运行 RCP 应用程序，那么此时您无法更改 About 文本。只有通过检查更新链接更新您的 RCP 或安装另一个 IDE 时才有可能现在的那个。

我这两种情况只有你可以改变你的关于文本。

# r - 斯凯拉姆分布

> ID：14955929
> 
> 赞同：0
> 
> 时间：2013-02-19T11:07:26.643
> 
> 标签：r, statistics

正如你们所知，Skellam 包已从 CRAN 中删除（不要问为什么）。经过一段时间的互联网研究，我找不到 skellam pmf 函数，所以我自己编写了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:07:26.643

```
skellam <- function(k,mu1,mu2){
  return(exp(-mu1-mu2)*((mu1/mu2)^(k/2))*besselI(2*sqrt(mu1*mu2),k))
} 
```

# python - dict.has_key(somekey) 与 dict 中的 somekey 不一样

> ID：14955936
> 
> 赞同：0
> 
> 时间：2013-02-19T11:07:53.550
> 
> 标签：python, dictionary, beautifulsoup

我最近在玩 Beautifulsoup 时遇到了一个关于 python 字典的奇怪问题。我的代码看起来像这样。

```
import urllib2
from BeautifulSoup import BeautifulSoup

response = urllib2.urlopen("http://www.msn.com")
html = response.read()
soup = BeautifulSoup(html)
anchors = soup.findAll('a')
for a in anchors:
    if not a.has_key('href') == 'href' in a:
        print a 
```

它实际上打印了很多链接，其中 has_key 的工作方式与“in”不同。

谁能解释一下非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:13:24.207

你可能想要：

```
if not a.has_key('href'): 
```

或者一种非常 Pythonic 的检查方式：

```
if 'href' not in a: 
```

`has_key()`像`in`关键字一样工作（正如其他答案指出的那样，您忘记了括号），但在 Python 3.x 中`has_key()`已[弃用](http://docs.python.org/2/library/stdtypes.html#dict.has%5Fkey)且不受支持。因此，您应该始终使用`in`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:17:12.810

这来自运算符的优先级：

```
>>> a = {'a': 5, 'b': 6}
>>> a.has_key('a')
True
>>> 'a' in a
True
>>> a.has_key('a') == 'a' in a
False
>>> a.has_key('a') == ('a' in a)
True
>>> (a.has_key('a') == 'a') in a
False 
```

所以在你的情况下

```
if not a.has_key('href') == 'href' in a:
        print a 
```

实际上意味着

```
if not (a.has_key('href') == 'href') in a:
        print a 
```

当你想检查时

```
if not a.has_key('href') == ('href' in a):
        print a 
```

此外，在 python3 中弃用 has_key 并且不支持它的事情。如果您有选择，请将 python2 全部转储并选择 3.x

# php - 退出 php 命令而不触发关机功能

> ID：14955937
> 
> 赞同：1
> 
> 时间：2013-02-19T11:07:54.843
> 
> 标签：php, callback, exit, abort, atexit

如何退出 php 脚本（例如使用 exit() 函数）但不触发所有先前注册的关闭函数（使用 register_shutdown_function）？

谢谢！

编辑：或者，有没有办法从所有注册的关闭功能中清除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T11:54:14.903

如果进程被 SIGTERM 或 SIGKILL 信号杀死，则不会执行关闭函数。

```
posix_kill(posix_getpid(), SIGTERM); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T11:22:42.960

不要直接使用 register_shutdown_function。创建一个管理所有关闭功能并具有自己的功能和启用属性的类。

```
class Shutdown {

    private static $instance = false;
    private $functions;
    private $enabled = true;

    private function Shutdown() {
        register_shutdown_function(array($this, 'onShutdown'));
        $this->functions = array();
    }

    public static function instance() {
        if (self::$instance == false) {
            self::$instance = new self();
        }

        return self::$instance;
    }

    public function onShutdown() {
        if (!$this->enabled) {
            return;
        }

        foreach ($this->functions as $fnc) {
            $fnc();
        }
    }

    public function setEnabled($value) {
        $this->enabled = (bool)$value;
    }

    public function getEnabled() {
        return $this->enabled;
    }

    public function registerFunction(callable $fnc) {
        $this->functions[] = $fnc;
    }

} 
```

# c# - “新”方法中的 C# 递归

> ID：14955939
> 
> 赞同：3
> 
> 时间：2013-02-19T11:08:00.413
> 
> 标签：c#, new-operator

我的班级 MyClass 中有这段代码：

```
public new MyClass this[int index]
    {
        get
        {
            if (Count > index)
            {
                return this[index];
            }
            //...MyActions...
            return null;
        }
    } 
```

在字符串...

```
return this[index] 
```

...我有递归，但我需要在**基**类中使用属​​性。我不知道怎么做。

例子：

```
 return base.this[index] 
```

但我不能“覆盖”这个方法，只能设置“新”。我伤心

怎么做？对不起我的英语很差，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T11:10:03.920

您可以使用[base](http://msdn.microsoft.com/en-us/library/hfw7t1ce%28v=vs.71%29.aspx)关键字来访问基类的成员，包括索引器。尝试使用下一个代码片段在基类上调用索引器：

```
return base[index]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T11:10:50.573

然后`base`根据需要使用：

```
return base[index]; 
```

例如：

```
public class A {
  public object this[int index] { get; }
}

public class B : A {
  public object this[int index] {
    get { return base[index]; }
  }
} 
```

# dart - Dart UnitTest：orderedEquals 结合 closeTo

> ID：14955943
> 
> 赞同：1
> 
> 时间：2013-02-19T11:08:18.547
> 
> 标签：dart

当我尝试熟悉 dart 单元测试时，我遇到了以下问题，

我有一个数字列表，我想将其与预期的数字列表进行比较。这些值可能是“双精度值”，因此需要与 closeTo 进行比较。

是否可以以某种方式组合这两个匹配器，或者我需要自己编写，还是我跳过了任何匹配器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:01:13.833

我不知道有一个特定的匹配器结合了两个匹配器的功能来比较两个单独的可迭代对象。但是，您可以轻松编写一个测试来迭代这两个集合并检查该值是否接近预期。请记住，每个测试可以有多个`expect()`语句。

所以你的测试可能看起来像这样：

```
test('List is close', () {
    var expectedList = [1, 3, 56, 892, 919];
    List<num> myVals = someFunction();

    var len = expectedList.length;
    for(var i = 0; i < len; i++) {
      expect(myVals[i], closeTo(expectedList[i], 0.005));
    }
}); 
```

# ruby-on-rails - Rails 项目中的网络工作者

> ID：14955948
> 
> 赞同：6
> 
> 时间：2013-02-19T11:08:46.067
> 
> 标签：ruby-on-rails, web-worker

我尝试使用网络工作者来同时运行多个 javascript 代码。要启动工作人员，我将以下内容放入我的 javascript 代码部分：

```
var worker = new Worker("my_task.js");
worker.onmessage = function(e) {
    console.log('Worker said: ', e.data);
};
worker.postMessage("test"); 
```

**my_task.js**是与包含上述代码的文件相同的文件夹。这就是**my_task.js 的**样子：

```
self.addEventListener('message', function(e) {
  self.postMessage(e.data);
}, false); 
```

但是Ruby on Rails（3.2.1版）似乎有问题：

```
Started GET "/users/my_task.js" for 127.0.0.1 at ...
...
...
ActiveRecord::RecordNotFound (Couldn't find User with id=my_task) 
```

如您所见，Rails 会在脚本启动时尝试发送 http get 请求。
我怎么解决这个问题？有没有更好的方法在 Rails 项目中使用网络工作者？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-26T07:05:58.897

*   将 my_task.js 放入`/public/javascripts`
*   在创建 worker 的 javascript 代码中，使用以下 ERB：`var worker = new Worker("<%= javascript_path "my_task.js" %>");`
*   添加`.erb`到上面的 javascript 代码所在的任何文件的扩展名。所以如果它是`mypage.js`，它变成`mypage.js.erb`.

以上适用于我在 Rails 4.2.0, ruby​​ 2.0.0p598

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:51:37.933

将 my_task.js 放在公用文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-15T19:27:23.530

以上`<% javascript_path %>`

并`lib/assets/javascripts`使用 Rail5 为我工作

# python - 如何使用 python 读取 /etc/config.d/...？

> ID：14955950
> 
> 赞同：-1
> 
> 时间：2013-02-19T11:08:48.943
> 
> 标签：python, configuration-files

我希望发行版选择我的 python 应用程序，以便他们可以创建一个 /etc/myapp 配置文件和一个 /etc/myapp.d/ 文件夹，用户可以在其中将他们的配置覆盖设置放在 /etc/myapp 中。

它应该支持以下（或多或少的标准）配置风格。

```
# settingx does ...
settingx=1

settingy = 0

settingz = "--this x --that y" 
```

在我的 python 应用程序中，我想使用 settingx、settingy 等。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:15:39.160

使用[`ConfigParser`](http://docs.python.org/2/library/configparser.html)，因为这是一种接受的设置交换格式，它被烘焙到 python 发行版中。

```
import ConfigParser

config = ConfigParser.RawConfigParser()

config.add_section('myapp')
config.set('myapp', 'settingx', 1)
config.set('myapp', 'settingy ', 0)
config.set('myapp', 'settingz ', '--this x --that y')

# Writing our configuration file to 'example.cfg'
with open('/etc/myapp/example.cfg', 'wb') as configfile:
    config.write(configfile) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:16:33.050

如果您打算使用 an`RPM`来分发您的应用程序，请查看 - [http://fedoraproject.org/wiki/How_to_create_an_RPM_package](http://fedoraproject.org/wiki/How_to_create_an_RPM_package)

或者看看[distutils](http://docs.python.org/2/distutils/index.html#distutils-index)

如果您打算简单地拥有某种安装脚本，那么它可以自己创建文件和目录。

# magento - Magento 基本 url 不反映数据库中更改的值（缺少 /）

> ID：14955952
> 
> 赞同：0
> 
> 时间：2013-02-19T11:08:56.080
> 
> 标签：magento, url

这是表面上看起来很容易解决的事情之一，但它让我打败了！

我可以通过搜索看到很多人都遇到了这个问题，但似乎没有我能找到的解决方案。

我所做的： 1\. 将我的站点从根文件夹转移到 /shop 文件夹中。2\. 将安全/不安全基本 URL 的数据库条目更改为[https://www.dnabaits.com/shop/](https://www.dnabaits.com/shop/) 3\. 清除所有缓存和 Tmp 文件。发生了什么：整个站点正常运行，但没有加载样式或脚本，因为头部中的路径缺少尾随/后店。所以不是得到这个 mydomain.com/shop/skin/........ 我得到的是 mydomain.com/shopskin/........

我的页面源中的示例 URL

```
<link rel="stylesheet" type="text/css" href="https://www.dnabaits.com/shopskin/frontend/default/dna/css/lightbox.css" media="all" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:37:31.003

在你的 .htaccess 文件中确保你有这个（带有斜杠）：

```
 RewriteBase /shop/ 
```

另一种可能性是您的商店视图的商店配置范围具有不同的设置。更改您的配置范围`Admin -> System -> Configuration -> Web`并确保您的 URL 设置没有在那里自定义。

# directx - 更新 directX 纹理

> ID：14955954
> 
> 赞同：2
> 
> 时间：2013-02-19T11:08:59.117
> 
> 标签：directx, textures, directx-9

我该如何解决以下任务：一些应用程序需要

1.  使用几十个 dx9 纹理（用 dx3d 渲染它们）和
2.  更新其中一些（全部或部分）。

即有时（每帧/秒/分钟一次）我需要以`void *`不同格式（*argb*、*bgra*、*rgb*、*888、565*）将字节（）*写入*现有纹理的某些子矩形。在 openGL 中的解决方案非常简单 - `glTexImage2D`. 但是这里不熟悉的平台功能完全让我感到困惑。对 dx9 和 dx11 的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T23:00:51.000

要更新纹理，请确保在 D3DPOOL_MANAGED 内存池中创建纹理。

```
D3DXCreateTexture( device, size.x, size.y, numMipMaps,usage, textureFormat, D3DPOOL_MANAGED, &texture ); 
```

然后调用 LockRect 更新数据

```
RECT rect  = {x,y,z,w};  // the dimensions you want to lock
D3DLOCKED_RECT lockedRect = {0}; // "out" parameter from LockRect function below
texture->LockRect(0, &lockedRect, &rect, 0);

// copy the memory into lockedRect.pBits
// make sure you increment each row by "Pitch"

unsigned char* bits = ( unsigned char* )lockedRect.pBits; 
for( int row = 0; row < numRows; row++ )
{
    // copy one row of data into "bits", e.g. memcpy( bits, srcData, size )
    ...

    // move to the next row
    bits += lockedRect.Pitch;
}

// unlock when done
texture->UnlockRect(0); 
```

# javascript - Angular js - 数据集成在应用控制器中，无需外部 json。如何渲染数据

> ID：14955957
> 
> 赞同：0
> 
> 时间：2013-02-19T11:09:22.190
> 
> 标签：javascript, json, angularjs

我如何告诉 Angular 将 scope.shits 中的数据注入 ShitDetail 控制器？

```
function ShitCtrl($scope) {
  $scope.shits = [
    {
    "id": "goMedus",
    "name": "goMedus",
     "snippet": "Fast just got faster with Nexus S.",
     "copy": "hallo"
    }, 
```

这是教程中通过 json 完成的数据注入。我想获得奥斯卡麦克，因为我在使用 grails urlMappings 连接到外部 json 时遇到了麻烦，所以我想稍后再做。任何帮助表示赞赏

```
function ShitDetailCtrl($scope, $routeParams) {
  $scope.shitId = $routeParams.shitId;

} 
```

我的看法是这样的：

```
TBD: detail view for {{shitId}} and {{shitName}} 
```

shitId 得到渲染，而 shitName 没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:18:38.840

您不能将数据从范围控制器注入到另一个控制器。

但是您有三种解决方案可以在控制器之间共享数据：

1.  将您的变量定义到根范围。由于每个范围都继承自根范围，因此您的数据将可供所有控制器使用。

2.  使用事件向其他控制器发送数据（使用 $broadcast 和 $on 函数发送/捕获事件）。

3.  使用将用于在控制器之间共享数据的专用服务。

# azure - 在 Windows Azure 中注册自定义区域性

> ID：14955959
> 
> 赞同：4
> 
> 时间：2013-02-19T11:09:32.853
> 
> 标签：azure, registration, culture

我目前正在为非洲市场开发 ASP.NET MVC 4 应用程序，并希望使用以下链接[http://msdn.microsoft.com/en-gb/library/system.globalization中详述的步骤注册自定义文化.cultureandregioninfobuilder.register(v=vs.110).aspx](http://msdn.microsoft.com/en-gb/library/system.globalization.cultureandregioninfobuilder.register(v=vs.110).aspx)。我的大多数目标国家都不在预装的文化中，所以听起来我需要注册这些文化。问题是，我用于注册的控制台应用程序需要管理员权限才能完成文化注册。我假设 Windows azure 不允许开发人员对云服务环境进行管理员控制。

问题：在没有管理员权限的情况下在 Windows Azure 中注册自定义文化的最佳方式是什么。显然有一种方法可以在 Framework 2.0 上使用cultureandregioninfobuilder.compile 方法执行此操作，但这不是受支持的方法。有更好的解决方案吗？不想为了支持不同的语言而为每种文化维护不同的项目解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:09:28.677

您可以创建一个以提升的权限运行的启动任务，还可以在有限的上下文中运行您的应用程序。您的服务配置文件应如下所示：

```
 <ServiceDefinition name="MyCloudService" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-10.1.8">
  <WebRole name="MyWebRole" vmsize="Small">
    <Runtime executionContext="limited">
    </Runtime>
    <Startup>
      <Task executionContext="elevated" commandLine="scripts\SetupCulture.cmd" taskType="simple">
        <Environment>
          <Variable name="CULTURE">
            <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/ConfigurationSettings/ConfigurationSetting[@name='Culture']/@value" />
          </Variable>
        </Environment>
      </Task>
    </Startup>
    ...

   </WebRole>
 </ServiceDefinition> 
```

请注意，您可以在服务配置文件中指定所需的文化。最后，您可以在 .cmd 文件中使用环境变量“CULTURE”，将其用作执行该工作的 .NET 可执行文件的参数。

# sql - 按日期分组订购

> ID：14955960
> 
> 赞同：0
> 
> 时间：2013-02-19T11:09:35.877
> 
> 标签：sql, sql-server

```
"Project nr"    "Task"                "Task deadline"  "Task Type Production"

456             pack                  1 april 2013      Pack
456             Leave production      3 april 2013      Leave Production
456             Flight date           9 april 2013      Flight Date

123             pack                  1 april 2013      Pack
123             Leave production      6 april 2013      Leave Production
123             Flight date           9 april 2013      Flight Date

789             pack                  1 april 2013      Pack
789             Leave production      9 april 2013      Leave Production
789             Flight date           9 april 2013      Flight Date 
```

嗨，在我目前的查询下方。我怎样才能将它显示在按休假生产日期排序的三行中，以使它们保持在 3 组中。就像上面一样。项目 ID 编号必须保持在组中，并且必须在休假生产时对组进行排序。

```
 SELECT MSP_EpmProject_UserView.[Project nr]
    ,max(CASE WHEN [Task Type Production] = 'Packed' THEN [Task deadline] END) AS Pack
    ,max(CASE WHEN [Task Type Production] = 'Leave Production' THEN [Task deadline]
    END) AS [Leave Production]
    ,max(CASE WHEN [Task Type Production] = 'Flight Date' THEN [Task deadline]
    END) AS [Flight Date]

    FROM MSP_EpmProject_UserView LEFT JOIN MSP_EpmTask_UserView ON 
    MSP_EpmProject_UserView.ProjectUID = MSP_EpmTask_UserView.ProjectUID LEFT JOIN
    MSP_EpmAssignment_UserView ON MSP_EpmTask_UserView.TaskUID = 
    MSP_EpmAssignment_UserView.TaskUID LEFT JOIN MSP_EpmResource_UserView ON 
    MSP_EpmAssignment_UserView.ResourceUID = MSP_EpmResource_UserView.ResourceUID 
    WHERE (MSP_EpmTask_UserView.TaskIsProjectSummary = 0) GROUP BY 
    MSP_EpmProject_UserView.[Project nr] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:32:16.260

您需要使用`UNPIVOT`如下示例：

```
SELECT  [Project nr], Task, TaskDate
FROM    (
        SELECT   MSP_EpmProject_UserView.[Project nr]
                ,MAX(CASE   WHEN [Task Type Production] = 'Packed' 
                            THEN [Task deadline] 
                        END) AS Pack
                ,MAX(CASE   WHEN [Task Type Production] = 'Leave Production' 
                            THEN [Task deadline]
                        END) AS [Leave Production]
                ,MAX(CASE   WHEN [Task Type Production] = 'Flight Date' 
                            THEN [Task deadline]
                        END) AS [Flight Date]
        FROM    MSP_EpmProject_UserView 
                LEFT JOIN MSP_EpmTask_UserView 
                    ON MSP_EpmProject_UserView.ProjectUID = MSP_EpmTask_UserView.ProjectUID 
                LEFT JOIN MSP_EpmAssignment_UserView 
                    ON MSP_EpmTask_UserView.TaskUID = MSP_EpmAssignment_UserView.TaskUID 
                LEFT JOIN MSP_EpmResource_UserView 
                    ON MSP_EpmAssignment_UserView.ResourceUID = MSP_EpmResource_UserView.ResourceUID 
        WHERE (MSP_EpmTask_UserView.TaskIsProjectSummary = 0) 
        GROUP BY MSP_EpmProject_UserView.[Project nr]
        ) data
        UNPIVOT
        (
          TaskDate
          for [Task] in ([Pack],[Leave Production],[Flight Date])
        ) piv
ORDER BY    data.[Task deadline] 
```

# android - 如何通过引用父节点在android中进行sax解析

> ID：14955963
> 
> 赞同：0
> 
> 时间：2013-02-19T11:09:48.807
> 
> 标签：android

我是 android 新手，我正在寻找 android 中的 sax 解析。我在搜索时有太多示例，但没有一个符合我的要求，所以我在这里发布我拥有的 XML 结构和我的要求。

`<vehicle_appname version="1.0">`

```
<vehicle_selection>

<vehicle_selection_option name="car">

<vehicle_issues>
<vehicle_item id="1" vehicle_filename="honda" vehicle_fileurl="honda13" icon_image="hodaFeb13.png" vehicle_heading="1.png" chapter_count="45"/>
<vehicle_item id="2" vehicle_filename="benz" vehicle_fileurl="Woman_feb13" icon_image="benzfeb13.png" vehicle_heading="1.png" chapter_count="6"/>
</vehicle_issues>

</vehicle_selection_option>

<vehicle_selection_option name="jeep">

<vehicle_issues>
<vehicle_item id="1" vehicle_filename="mahindra" vehicle_fileurl="mahindra" icon_image="mahindra_Feb13.png" vehicle_heading="1.png" chapter_count="45"/>

</vehicle_issues>

</vehicle_selection_option>

</vehicle_selection>
</vehicle_appname> 
```

这里的vehicle_selection_option名称是一个标题标签，而vehicle_item标签包含该标题的内容，可以有一个或多个内容标签。我的要求：

1.  我想解析这个xml。我知道 XML sax 解析很容易，但是在这里我嵌套了 xml 文件。因此车辆标记中的值必须适合其标题（vehicle_selection_option 标记）。
2.  我想在列表视图中显示这些内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:43:35.310

在 startElement 方法上使用 vlaue"vehicle_selection_option" 检查 localValue（startElement 的参数）并创建 Vechile 的对象（您用于存储车辆信息）并在 endElement 方法中检查相同的字符串并将此对象添加到集合（即 ArrayList ）。解析整个数据后，您将获得集合（ArrayList）中的所有车辆对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:16:07.260

压倒一切`startElement`，`endElement`是你所需要的。实际上`startElement`会通知一个元素的开始。同时`endElement`会通知一个元素的结束。这样您就可以跟踪 `vehicle_selection_option`打开和关闭的时间

像这样：检查错字

```
boolean newCar = false;
@override
public void startElement(String uri, String localName,String qName, 
                Attributes attributes) throws SAXException {
   if (qName.equalsIgnoreCase("vehicle_selection_option"))
      newCar = true;
 }

@override
public void endElement(String uri, String localName,String qName, 
                Attributes attributes) throws SAXException {
   if (qName.equalsIgnoreCase("vehicle_selection_option"))
      newCar = false;
 } 
```

# quote - 总是用 mutt 引用普通版本

> ID：14955968
> 
> 赞同：2
> 
> 时间：2013-02-19T11:10:06.857
> 
> 标签：quote, reply, mutt

我用 mutt 阅读邮件，很多人发送纯文本和 html 版本的邮件。在某些情况下，我更喜欢看到带有 elinks 的 html 版本，所以我不得不将 text/html 设置为我的首选替代方案。

但是，在回复时，引用是臭名昭著的（很多丑陋的字符），所以我想在引用中使用文本/纯文本版本。

出现了两个相关的问题：

*   是否可以根据文件夹设置 Alternative_order 选项
*   即使邮件是在 html 中看到的，是否可以引用电子邮件的文本版本

这个问题也被问到[http://www.debian-administration.org/articles/75#comment_28](http://www.debian-administration.org/articles/75#comment_28)没有回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T07:25:18.393

使用与 mutt 配置相关的[另一个问题](https://stackoverflow.com/questions/19248871/revert-all-mutt-custom-config)的结果，我可以想到一个设置替代顺序的解决方案：

假设，我更喜欢在 folder1，html 其他地方看到纯文本：

```
#this reset all conf when changing folder
set my_reset_source=`~/.dotfiles/mutt/reset.sh ~/.dotfiles/mutt/*.config > /tmp/mutt-reset`
folder-hook . source /tmp/mutt-reset
folder-hook . source ~/.dotfiles/mutt/html_prefered
folder-hook folder1 source ~/.dotfiles/mutt/plain_prefered 
```

与 ~/.dotfiles/mutt/plain_prefered，是：

```
alternative_order text/plain 
```

但是，此解决方案没有回答问题的另一部分：如何始终引用纯文本版本。

# sql - 关键字“INNER”附近的语法不正确。关于简单 SQL 查询？

> ID：14955972
> 
> 赞同：0
> 
> 时间：2013-02-19T11:10:13.640
> 
> 标签：sql, sql-server

我在一个查询中遇到错误，该查询适用于另一个类似的任务，但在这种情况下没有。我要做的就是将值从一个表中的列复制到另一个表中：

```
UPDATE   dbo.JobClients 
SET JobClients.[Status] = dbo.Jobs.[Status]
INNER JOIN dbo.JobClients 
ON dbo.Jobs.Id = dbo.JobClients.JobId 
```

我在“状态”周围添加了方括号，因为它突出显示蓝色，我认为它可能是一个保留字，但即便如此，错误并没有指出这是问题所在：

> *消息 156，级别 15，状态 1，第 3 行
> 关键字“INNER”附近的语法不正确。*

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:11:41.390

您缺少该`FROM`条款。试试这个：

```
UPDATE  c
SET c.[Status] = j.[Status]
FROM dbo.JobClients  AS c
INNER JOIN dbo.JobClients AS j ON j.Id = c.JobId 
```

# linux - iptables：什么是链？

> ID：14955973
> 
> 赞同：3
> 
> 时间：2013-02-19T11:10:16.030
> 
> 标签：linux, networking, firewall, iptables, netfilter

我已经阅读 iptables 几个小时了，但我仍然不明白他们所说的“链”是什么。我在文档和教程中随处可见这个词，但他们在说什么对我来说仍然很模糊。什么是链子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:18:40.190

[链](https://wiki.archlinux.org/index.php/Iptables#chains)是按顺序应用的一系列规则。

有三个内置链（`INPUT`和`OUTPUT`）`FORWARD`，您可以创建自己的链来简化处理，例如特定的数据包类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T13:05:47.663

Chain 只不过是 iptables 维护的过滤规则序列。

*   INPUT Chain：用于进入系统或发往系统的数据包。
*   FORWARD Chain：用于通过系统传输（被路由）的数据包。
*   OUTPUT Chain：用于离开系统或来自系统的数据包。

要了解有关 IPTABLES 的更多信息，请访问我的[Linux 博客](http://www.yourownlinux.com/2013/05/iptables-linux-firewall.html)文章：

# xamarin.ios - Tableview 的滚动使基于 Monotouch 的 iOS 应用程序崩溃

> ID：14955975
> 
> 赞同：0
> 
> 时间：2013-02-19T11:10:19.700
> 
> 标签：xamarin.ios, monodevelop, xamarin

嗨，我现在正在使用 Monotouch 开发基于单元格的自定义表格视图。

表格视图在自定义单元格中正确显示数据。

但是当我尝试滚动表格视图时，它正在使应用程序崩溃。

**错误信息：-**

```
MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown. 

 Name: NSInvalidArgumentException Reason:
 -[__NSCFSet tableView:cellForRowAtIndexPath:]: unrecognized selector sent to instance 0xfd50430
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at OrderManagementSystem.Application.Main (System.String[] args) [0x00000] in /Users/administrator/Documents/xyz/dlds/OMS/OMS/Main.cs:17 
```

即使我启用了断点，我也无法捕捉到它崩溃的方法。

我该如何解决这个问题？

# c# - 如何使用正则表达式在 Visual Studio 中查找内容？

> ID：14955977
> 
> 赞同：1
> 
> 时间：2013-02-19T11:10:22.703
> 
> 标签：c#, asp.net, regex, visual-studio

我想在 Visual Studio 2010 中搜索任何包含“ati”但不包括任何包含“ation”或“static”的单词。

你会如何写正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:31:52.387

这看起来很有效：

```
((ati~(c))|(~(st)..ati))~(on) 
```

这发现

> （`ati`前面有两个没有的字符`st`，或者后面`c`没有） 后面没有`on`。

它很接近，但它*不会*匹配`atic`一行开头只有 0 或 1 个字符。（编辑：见下文。）

请注意，这只*匹配*（`ati`或者`..ati`如果`ati`后面跟着`c`） - 如果您尝试匹配（并且，比如说，替换）*整个单词*，这将无济于事。它只会帮助你*找到*这些地方。

编辑：以下内容也将匹配（行首，零或一个字符，`atic`）：

```
((ati~(c))|(~(st)..ati)|(^.ati)|(^ati))~(on) 
```

# javascript - 拉斐尔饼图 - 逆时针绘制路径

> ID：14955980
> 
> 赞同：1
> 
> 时间：2013-02-19T11:10:29.410
> 
> 标签：javascript, raphael, pie-chart

我正在尝试从 Raphael.js ( [http://raphaeljs.com/pie.html](http://raphaeljs.com/pie.html) ) 中获取演示饼图并顺时针绘制 - 目前它是逆时针绘制的，这没有多大意义。这个 jsfiddle 是演示中的代码：http:
[//jsfiddle.net/6bWuT/](http://jsfiddle.net/6bWuT/)

在第 14 行（从下面的“return paper.path”开始）将第二个 0 更改为 1*应该*将旋转更改为顺时针，但实际上只是拧紧了绘图。任何帮助将不胜感激:) 提前致谢。

小提琴中的代码供参考：

```
Raphael.fn.pieChart = function (cx, cy, r, values, labels, stroke) {
    var paper = this,
        rad = Math.PI / 180,
        chart = this.set();
    function sector(cx, cy, r, startAngle, endAngle, params) {
        var x1 = cx + r * Math.cos(-startAngle * rad),
            x2 = cx + r * Math.cos(-endAngle * rad),
            y1 = cy + r * Math.sin(-startAngle * rad),
            y2 = cy + r * Math.sin(-endAngle * rad);
        return paper.path(["M", cx, cy, "L", x1, y1, "A", r, r, 0, +(endAngle - startAngle > 180), 0, x2, y2, "z"]).attr(params);
    }
    var angle = 0,
        total = 0,
        start = 0,
        process = function (j) {
            var value = values[j],
                angleplus = 360 * value / total,
                popangle = angle + (angleplus / 2),
                color = Raphael.hsb(start, .75, 1),
                ms = 500,
                delta = 30,
                bcolor = Raphael.hsb(start, 1, 1),
                p = sector(cx, cy, r, angle, angle + angleplus, {fill: "90-" + bcolor + "-" + color, stroke: stroke, "stroke-width": 3}),
                txt = paper.text(cx + (r + delta + 55) * Math.cos(-popangle * rad), cy + (r + delta + 25) * Math.sin(-popangle * rad), labels[j]).attr({fill: bcolor, stroke: "none", opacity: 0, "font-size": 20});
            p.mouseover(function () {
                p.stop().animate({transform: "s1.1 1.1 " + cx + " " + cy}, ms, "elastic");
                txt.stop().animate({opacity: 1}, ms, "elastic");
            }).mouseout(function () {
                p.stop().animate({transform: ""}, ms, "elastic");
                txt.stop().animate({opacity: 0}, ms);
            });
            angle += angleplus;
            chart.push(p);
            chart.push(txt);
            start += .1;
        };
    for (var i = 0, ii = values.length; i < ii; i++) {
        total += values[i];
    }
    for (i = 0; i < ii; i++) {
        process(i);
    }
    return chart;
};

$(function () {
    var values = [],
        labels = [];
    $("tr").each(function () {
        values.push(parseInt($("td", this).text(), 10));
        labels.push($("th", this).text());
    });
    $("table").hide();
    Raphael("holder", 700, 700).pieChart(350, 350, 200, values, labels, "#fff");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:40:29.770

哎呀，找到了..更改扇区功能：

```
function sector(cx, cy, r, startAngle, endAngle, params) {
    var x1 = cx + r * Math.cos(startAngle * rad),
        x2 = cx + r * Math.cos(endAngle * rad),
        y1 = cy + r * Math.sin(startAngle * rad),
        y2 = cy + r * Math.sin(endAngle * rad);
    return paper.path(["M", cx, cy, "L", x1, y1, "A", r, r, 1, +(endAngle - startAngle > 180), 0, x2, y2, "z"]).attr(params);
} 
```

现在将 cos 和 sin 设为正数而不是负数，并且在 paper.path 行上将 0 更改为 1。赢！:)

# jquery - Jquery ui 组合框（自动完成）消失

> ID：14955983
> 
> 赞同：5
> 
> 时间：2013-02-19T11:10:42.067
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

我正在尝试执行此操作[http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox) 问题是，当我将鼠标悬停在一个选项上时，选项将消失，并出现建议：“x 不匹配任何item”，其中 x 是我在组合框中写的字母。现在我发布网站上的脚本：

```
 (function( $ ) {
$.widget( "ui.combobox", {
  _create: function() {
    var input,
      that = this,
      wasOpen = false,
      select = this.element.hide(),
      selected = select.children( ":selected" ),
      value = selected.val() ? selected.text() : "",
      wrapper = this.wrapper = $( "<span>" )
        .addClass( "ui-combobox" )
        .insertAfter( select );

    function removeIfInvalid( element ) {
      var value = $( element ).val(),
        matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( value ) + "$", "i" ),
        valid = false;
      select.children( "option" ).each(function() {
        if ( $( this ).text().match( matcher ) ) {
          this.selected = valid = true;
          return false;
        }
      });

      if ( !valid ) {
        // remove invalid value, as it didn't match anything
        $( element )
          .val( "" )
          .attr( "title", value + " didn't match any item" )
          .tooltip( "open" );
        select.val( "" );
        setTimeout(function() {
          input.tooltip( "close" ).attr( "title", "" );
        }, 2500 );
        input.data( "ui-autocomplete" ).term = "";
      }
    }

    input = $( "<input>" )
      .appendTo( wrapper )
      .val( value )
      .attr( "title", "" )
      .addClass( "ui-state-default ui-combobox-input" )
      .autocomplete({
        delay: 0,
        minLength: 0,
        source: function( request, response ) {
          var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
          response( select.children( "option" ).map(function() {
            var text = $( this ).text();
            if ( this.value && ( !request.term || matcher.test(text) ) )
              return {
                label: text.replace(
                  new RegExp(
                    "(?![^&;]+;)(?!<[^<>]*)(" +
                    $.ui.autocomplete.escapeRegex(request.term) +
                    ")(?![^<>]*>)(?![^&;]+;)", "gi"
                  ), "<strong>$1</strong>" ),
                value: text,
                option: this
              };
          }) );
        },
        select: function( event, ui ) {
          ui.item.option.selected = true;
          that._trigger( "selected", event, {
            item: ui.item.option
          });
        },
        change: function( event, ui ) {
          if ( !ui.item ) {
            removeIfInvalid( this );
          }
        }
      })
      .addClass( "ui-widget ui-widget-content ui-corner-left" );

    input.data( "ui-autocomplete" )._renderItem = function( ul, item ) {
      return $( "<li>" )
        .append( "<a>" + item.label + "</a>" )
        .appendTo( ul );
    };

    $( "<a>" )
      .attr( "tabIndex", -1 )
      .attr( "title", "Show All Items" )
      .tooltip()
      .appendTo( wrapper )
      .button({
        icons: {
          primary: "ui-icon-triangle-1-s"
        },
        text: false
      })
      .removeClass( "ui-corner-all" )
      .addClass( "ui-corner-right ui-combobox-toggle" )
      .mousedown(function() {
        wasOpen = input.autocomplete( "widget" ).is( ":visible" );
      })
      .click(function() {
        input.focus();

        // close if already visible
        if ( wasOpen ) {
          return;
        }

        // pass empty string as value to search for, displaying all results
        input.autocomplete( "search", "" );
      });

    input.tooltip({
      tooltipClass: "ui-state-highlight"
    });
  },

  _destroy: function() {
    this.wrapper.remove();
    this.element.show();
  }
});
  })( jQuery );

  $(function() {
  $( "#combobox" ).combobox();
  }); 
```

和CSS：

```
 .ui-combobox {
position: relative;
display: inline-block;
}
 .ui-combobox-toggle {
  position: absolute;
  top: 0;
  bottom: 0;
  margin-left: -1px;
  padding: 0;
  /* support: IE7 */
  *height: 1.7em;
  *top: 0.1em;
 }
 .ui-combobox-input {
  margin: 0;
  padding: 0.3em;
 } 
```

和我的选择（使用 JSP 构建）

```
 <select id="combobox"><option value="">Select one...</option>
                                    <%for(int i=0;i<ut.size();i++){
                                    out.print("<option value=\""+ut.get(i).getIdUtente()+
                                            "\">"+ut.get(i).getNome()+" "+ut.get(i).getCognome()+" ("+ut.get(i).getIdUtente()+")"+"</option>");

                                    }
                                        %>

                                    </select> 
```

现在，我的问题在哪里？提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T12:14:54.297

它也发生在我身上。jQuery UI js 文件似乎被调用了两次。删除一个，它会工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-02T17:25:24.733

这将发生在您同时引用主 jQuery UI (jquery-ui.js) 库和用于 jquery ui 自动完成的各个库的相关场景中。jQuery-ui 文件包含所有子项，因此无需同时引用两者。

# c# - C# MVC 字符串格式零值

> ID：14955988
> 
> 赞同：2
> 
> 时间：2013-02-19T11:10:49.040
> 
> 标签：c#, string, format

我目前使用它来格式化我的数字。

```
@string.Format("£{0:#,###,###.##}", 1000) outputs £1,000 
```

但是，当我输入零值时，它会这样做：

```
@string.Format("£{0:#,###,###.##}", 0.0) outputs £ 
```

即使我输入零值，我如何制作这个输出？例如 0.0 英镑

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:12:40.120

该`#`字符的意思是“仅在需要时使用数字”。

我怀疑你想要：

```
@string.Format("£{0:#,###,##0.##}", value) 
```

但是，*通常*使用以下方法是一个更好的主意：

```
@string.Format("{0:c}", value) 
```

...并让 .NET 框架做正确的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:14:01.467

第一个0是占位符，表示第一个参数。00 是实际格式。

例如，它可能是这样的：

```
 Console.WriteLine(string.Format("£{0:#,###,##0.##}", 0)); 
```

# java - 未找到启动器活动

> ID：14955993
> 
> 赞同：0
> 
> 时间：2013-02-19T11:11:02.600
> 
> 标签：java, android, android-manifest, launcher

我找不到任何问题，但它一直给我错误“未找到启动器活动！” 和“启动只会同步设备上的应用程序包！” 谁能解决这个问题？？？

**这是我最帅的**

```
 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.example.saikoro.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

            <activity
        android:name="com.example.saikoro.StartUp"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.saikoro.StartUp" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:13:00.010

`<activity>`您希望通过应用列表上的图标启动的活动元素必须包含以下*两个*部分的意图过滤器：

```
<intent-filter>
    <category android:name="android.intent.category.LAUNCHER" />

    <action android:name="android.intent.action.MAIN" />
</intent-filter> 
```

您当前的清单有一个带有 category`LAUNCHER`和 action的活动`MAIN`，但在不同的活动中。应用列表中带有图标的那个必须同时具有它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:13:25.580

改变

```
<action android:name="com.example.saikoro.StartUp" /> 
```

和

```
<action android:name="android.intent.action.MAIN" /> 
```

# php - 为什么 HTTP 响应正文开头包含“2fb”？

> ID：14955994
> 
> 赞同：2
> 
> 时间：2013-02-19T11:11:04.457
> 
> 标签：php, api, http

我在 PHP 中使用 fsockopen() 做一些 API 请求。对于大多数正常工作的 API，但从[http://geocoding.cloudmade.com/](http://geocoding.cloudmade.com/)我得到以下（RAW）响应：

```
HTTP/1.1 200 OK
Server: nginx/0.6.35
cache-control: no-cache
Content-Type: application/json; charset=utf-8
Date: Tue, 19 Feb 2013 11:08:05 GMT
pragma: no-cache
Transfer-Encoding: chunked
Connection: close

2fb
{"found": 1, "bounds": [[52.48732, 13.42553], ...
0 
```

我的问题是第一行中的“2fb”和正文最后一行中的“0”并没有告诉我什么。如果我通过 Firefox 发送相同的请求，则正文不包含“2fb”或“0”。因此，我想它有一些意义。但是什么？

感谢提示！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T11:19:10.077

这就是[分块传输编码](https://www.rfc-editor.org/rfc/rfc2616#section-3.6.1)，也由`Transfer-Encoding: chunked`响应头指示：

> 分块编码修改消息的主体，以便将其作为一系列块传输，每个块都有自己的大小指示符，后跟一个包含实体头字段的可选尾部。这允许动态生成的内容与接收者验证其已收到完整消息所需的信息一起传输。

`2fb`, 后跟`\r\n`, 表示后续块的大小（763 字节）。chunk-size`0`表示最后一个块。

# objective-c - 如何静默警告不兼容的属性类型

> ID：14955995
> 
> 赞同：0
> 
> 时间：2013-02-19T11:11:05.657
> 
> 标签：objective-c, cocoa, uiscrollview

我`RTSPagedView`在我的项目中使用 github。这给了我这个警告

```
 Property type 'id<RTSPagedViewDelegate>' is incompatible with type 'id<UIScrollViewDelegate>' unherited from 'UIScrollView' 
```

在

`@property (nonatomic, assign) IBOutlet id <RTSPagedViewDelegate> delegate;`

在`RTSPagedView.h`

应用程序在此警告下工作正常。任何人以前遇到过这个或知道解决方案请帮忙。

链接为[RTSPagedView](https://github.com/rplasman/RTSPagedView)

```
//  RTSPagedView.h
//  PagedView
//  http://github.com/rplasman/RTSPagedView

#import <UIKit/UIKit.h>

@protocol RTSPagedViewDelegate;

@interface RTSPagedView : UIScrollView

@property (nonatomic, assign) IBOutlet id <RTSPagedViewDelegate> delegate;
@property (nonatomic, assign) NSUInteger currentPage;
@property (nonatomic, readonly) NSUInteger numberOfPages;
@property (nonatomic, assign) BOOL continuous;

- (void)resizeBounds:(CGRect)bounds;
- (UIView *)dequeueReusableViewWithTag:(NSInteger)tag;
- (UIView *)viewForPageAtIndex:(NSUInteger)index;
- (void)scrollToPageAtIndex:(NSUInteger)index animated:(BOOL)animated;
- (void)reloadData;
- (NSUInteger)indexForView:(UIView *)view;

@end

@protocol RTSPagedViewDelegate <UIScrollViewDelegate>

- (NSUInteger)numberOfPagesInPagedView:(RTSPagedView *)pagedView;
- (UIView *)pagedView:(RTSPagedView *)pagedView viewForPageAtIndex:(NSUInteger)index;

@optional

- (void)pagedView:(RTSPagedView *)pagedView didScrollToPageAtIndex:(NSUInteger)index;
- (void)pagedView:(RTSPagedView *)pagedView didRecycleView:(UIView *)view;
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-13T11:56:21.343

试试这种方式：

`@property (nonatomic, assign) IBOutlet id <UIScrollViewDelegate, RTSPagedViewDelegate> delegate;`

为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:53:59.653

出现问题是因为

```
 @property (nonatomic, assign) IBOutlet id <RTSPagedViewDelegate> delegate; 
```

在这个 delagate 中，`UIScrollViewDelagate`因为`RTSPagedView`继承自`UIScrollView`.

使用任何其他名称修改完整的委托名称，例如

```
 @property (nonatomic, assign) IBOutlet id <RTSPagedViewDelegate> rtspDelegate; 
```

它将删除警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:48:58.770

我*认为*（如果没有更多代码，我无法确定）您尚未将委托类声明为符合`RTSPagedViewDelegate`协议。

试试这个：

你的类.h：

```
@interface YourClass : NSObject <UIScrollViewDelegate, RTSPagedViewDelegate>

...

@end 
```

现在当你这样做时：

```
rtsPageView.delegate = self; 
```

警告应该消失了。

这可能是完全垃圾，在这种情况下我会删除它。

# c++ - MySQL 客户端库版本与服务器的兼容性？

> ID：14955996
> 
> 赞同：0
> 
> 时间：2013-02-19T11:11:09.487
> 
> 标签：c++, mysql, libmysql

我们正在编写一个 C++ 应用程序，它动态链接到 MySQL 共享库以与服务器通信。我的问题是针对普通查询和东西（几乎每个库都支持），是否有必要强制服务器和库版本相同？

注意：有 mysql-shared-compat RPM 可以解决这个问题，但它包含以前版本的所有库。而且我们不想要求用户安装该软件包以及 mysql-shared 软件包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:14:53.700

我发现了这个讨论，HTH： http: [//lists.mysql.com/mysql/210702](http://lists.mysql.com/mysql/210702)

我们的客户端-服务器协议在很长一段时间内没有太大变化，如果有的话。使用基于 5.x 的客户端库与 4.1 甚至 3.x 服务器通信应该是相当安全的。