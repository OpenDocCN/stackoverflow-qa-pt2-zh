# StackOverflow 问答 12894000-12894999

# reportingservices-2005 - 远程报告处理需要 Microsoft SQL Server 2008 报告服务或更高版本

> ID：12894001
> 
> 赞同：3
> 
> 时间：2012-10-15T10:46:44.797
> 
> 标签：reportingservices-2005

我已经创建了一个 SQL Server 2005 报表并成功地将它托管在 sql server 2008 server 中。可以在浏览器中查看报表。现在我想将报表集成到 WPF 应用程序中。我使用报表查看器控件来显示报告。我正在使用 .net 4.0 框架和 VS 2010。下面是呈现报表的代码。下面是当我使用 sql server 2008 R2 版时在页面中成功呈现报表的代码。

```
 try
             {
                repViewer.ProcessingMode =     Microsoft.Reporting.WinForms.ProcessingMode.Remote;

                repViewer.ServerReport.ReportServerUrl = new Uri("http://tfs    /ReportServer$Sql2005");
                repViewer.ServerReport.ReportPath = "/Suman Reports/Report1";
                repViewer.RefreshReport();
             }
              catch (Exception ex)
              {
                throw ex;
              } 
```

给我消息“远程报告处理需要 Microsoft SQL Server 2008 报告服务或更高版本”。是否有任何选项可以在 wpf 应用程序中使用它而不更改为 sql server 2008。我是 SSRS 和集成领域的新手。请指导我这个。

# jquery - 自定义评分系统

> ID：12894002
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:47:00.787
> 
> 标签：jquery, html, css

我正在寻找评级系统的解决方案，但找不到我想要的解决方案。这是解释：

```
<input class="scoreS" type="submit" value="0.5"/>
    <input class="scoreB" type="submit" value="1" />
    <input class="scoreS" type="submit" value="1.5" />
    <input class="scoreB" type="submit" value="2" />
    <input class="scoreS" type="submit" value="2.5"/>
    <input class="scoreB" type="submit" value="3"/>
    <input class="scoreS" type="submit" value="3.5" />
    <input class="scoreB" type="submit" value="4" />
    <input class="scoreS" type="submit" value="4.5" />
<input class="scoreB" type="submit" value="5"/> 
```

评分有 10 分（从 0.5 到 5）评分分数是输入按钮，当您将鼠标悬停在颜色上时，颜色应该会变为光标所在的位置，并且您的评分应显示为 number 。这意味着如果您将鼠标悬停在第三个按钮上，它应该显示 1.5，您可以通过单击您所在的位置（按钮）进行评分。我需要一个跨浏览器的解决方案。谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:59:49.447

谷歌搜索：jquery 评分

第一个结果：[http ://www.fyneworks.com/jquery/star-rating/](http://www.fyneworks.com/jquery/star-rating/)

严重地？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:55:33.613

试试这个[http://www.sitepoint.com/jquery-star-rating/](http://www.sitepoint.com/jquery-star-rating/)

# android - Save Image from RelativeLayout

> ID：12894007
> 
> 赞同：2
> 
> 时间：2012-10-15T10:47:17.027
> 
> 标签：android, android-layout

I am developing a coloring app and I want to save my image (which is in a RelativeLayout) on the sd card. Below is my code.

I am inflating another layout, which consists of my image. I am drawing in the RelativeLayout, but I can't save the image that is in the RelativeLayout.

**DrawingActivity:**

```
public class DrawingActivity extends Activity {
    private Bitmap  mBitmap;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;
    private Paint   mPaint;
     MyDrawView myDrawView;
      RelativeLayout parent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_drawing);

       parent = (RelativeLayout) findViewById(R.id.singleparent);
        myDrawView = new MyDrawView(this);
        parent.addView(myDrawView);
        Activity context;
        //RelativeLayout item = (RelativeLayout)findViewById(R.id.item);
        View child = getLayoutInflater().inflate(R.layout.trans, null);
      parent.addView(child);

    }

   public void color(View v)
   {
       switch (v.getId()) {
        case R.id.button3:
           parent.setBackgroundColor(Color.RED);
            break;
        case R.id.button4:
             parent.setBackgroundColor(Color.GREEN);
            break;

        case R.id.button5:
             parent.setBackgroundColor(Color.BLUE);
            break;
        }
    }
 public void save(View v)
 {

 }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_drawing, menu);
        return true;
    }
    public class MyDrawView extends View {

        public MyDrawView(Context c) {
            super(c);

            mPath = new Path();
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);

            mPaint = new Paint();
            mPaint.setAntiAlias(true);
            mPaint.setDither(true);
            mPaint.setColor(0xFF000000);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(3);
        }

        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
            mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
        }

        @Override
        protected void onDraw(Canvas canvas) {
            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
            canvas.drawColor(Color.TRANSPARENT);

            canvas.drawPath(mPath, mPaint);
        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }
        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }
        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, mPaint);
            // kill this so we don't double draw
            mPath.reset();
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    touch_start(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_MOVE:
                    touch_move(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_UP:
                    touch_up();
                    invalidate();
                    break;
            }
            return true;
        }

        public void clear(){
            mBitmap.eraseColor(Color.TRANSPARENT);
            invalidate();
            System.gc();
        }

    }

} 
```

**activity_drawing.xml:**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Draw" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Erase" />

    <RelativeLayout
        android:id="@+id/singleparent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/button1"
        android:background="#00FF00" >
    </RelativeLayout>

    <Button
        android:id="@+id/button5"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/button2"
        android:onClick="color"
        android:text="Blue" />

    <Button
        android:id="@+id/button6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/button1"
        android:text="Save" 
        android:onClick="save"
        />

    <Button
        android:id="@+id/button3"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/button6"
        android:onClick="color"
        android:text="Red" />

    <Button
        android:id="@+id/button4"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button2"
        android:layout_alignBottom="@+id/button2"
        android:layout_toRightOf="@+id/button3"
        android:onClick="color"
        android:text="Green" />

</RelativeLayout> 
```

**trans.xml:**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/transparent"
    android:layout_marginTop="50dp"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"

     >

    <ImageView 

        android:layout_width="match_parent"
        android:layout_height="match_parent"
         android:background="@drawable/rrr"
        />

</RelativeLayout> 
```

# ruby-on-rails-3 - How can I test ActionController extensions within Rails 3.2?

> ID：12894013
> 
> 赞同：2
> 
> 时间：2012-10-15T10:47:31.730
> 
> 标签：ruby-on-rails-3, unit-testing, actioncontroller

I wrote an extension for ActionController::Base in Rails 3.2\. Now I want to test it. But because the gem I created is no application it has neither specific controllers nor routes, so I cannot use "get" or "post" to call any action.
Is there any module which can create generic controllers on the fly (like [acts_as_fu](https://github.com/nakajima/acts_as_fu) does with ActiveRecord models)? Or is there any testing pattern I can relate to?

I have found this [article](https://stackoverflow.com/questions/251225/how-to-test-controller-filters-in-ruby-on-rails-and-testunit) which explains how to test a before_filter. So far so good although the solutions are to some extend heavy-weight or unclean.

Edit: In particular I want to test an around_filter (if it works and if it redirects correctly) which is created by my extension.

I'm looking forward to your answers.
Thanks and kind regards.

# npapi - NPAPI 如何判断一个 NPObject 是否是一个函数？

> ID：12894014
> 
> 赞同：0
> 
> 时间：2012-10-15T10:47:35.753
> 
> 标签：npapi

在我的 NPAPI 插件中，我希望确定 NPObject 是否是函数（即，它是函数的实例）。有什么建议我该怎么做？

我可以检查 NPN_HasMethod() 以查看是否有一个名为“调用”的方法，但我认为更好的方法是如果我可以执行相当于 javascript 的“foo instanceof 函数”

我试图调用 NPN_Evaluate，以我的 'foo' NPObject 作为范围，以及“this instanceof Function”的脚本，但不幸的是，'this' 是全局范围，而不是我的 'foo' 对象。我在这里误解了范围参数的意图吗？我发现的任何示例都在使用该窗口。能够使用实际对象（或至少是“this”或对 javascript 对象的引用）将是可取的（对于许多其他目的），但任何确定它是否是函数的好方法都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:39:57.930

我知道的唯一方法是使用 NPN_Evaluation 将函数注入全局 javascript 范围，然后使用 NPObject 调用它。

例如，注入以下函数：

```
window.isFunction = window.isFunction || function(obj) {
  return typeof obj === 'function';
}; 
```

然后，您可以使用 NPAPI 获取窗口的 NPObject，获取“isFunction”属性，然后使用要检查的函数作为参数对其执行 NPN_InvokeDefault。

# c# - Selecting IEnumerable from JOIN results in a complex Linq-to-SQL query

> ID：12894015
> 
> 赞同：2
> 
> 时间：2012-10-15T10:47:42.273
> 
> 标签：c#, linq, linq-to-sql, ienumerable

I've got a query that looks like this:

```
var orderLines = from Order order in _orders
                 join OrderItem orderItem in dbc.OrderItems
                     on order.OrderId equals orderItem.OrderId
                 join Product product in dbc.Products
                     on orderItem.ProductId equals product.ProductId
                 join OrderItemQuantity oiq in dbc.OrderItemQuantities
                     on orderItem.OrderItemId equals oiq.OrderItemId
                     into orderItemQuantities
                 join ActivityQuantity aq in dbc.ActivityQuantities
                     on orderItem.OrderItemId equals aq.OrderItemId
                     into activityQuantities
                 orderby
                     order.OrderId ascending,
                     orderItem.OrderLineNumber ascending
                 select new {
                     Order = order,
                     Item = orderItem,
                     Product = product,
                     // I'd like to get these child items as IEnumerables or similar
                     ItemQuantities = orderItemQuantities,
                     ActivityQuantities = activityQuantities
                 }; 
```

This compiles fine, but results in the `orderItemQuantities` and `activityQuantities` parts being missing from the query, so I get a single select/join/join for order/items/products, and separate individual selects on OIQ/AQ for each entry:

```
SELECT (...) FROM [ORDERS] AS t0
INNER JOIN [ORDER_ITEMS] AS t1 ON t0.ORDER_ID = t1.ORDER_ID
INNER JOIN [PRODUCTS] AS t2 ON t1.PRODUCT_ID = t2.PRODUCT_ID
ORDER BY (...) 
```

Then, for each of those rows, it performs these queries:

```
SELECT (...) FROM [ACTIVITY_QUANTITY] as t0
WHERE t0.ORDER_ITEM_ID = @p0

SELECT (...) FROM [ORDER_ITEM_QUANTITY] as t0
WHERE t0.ORDER_ITEM_ID = @p0 
```

Since I've got tens of thousands of rows, this results in a ridiculous number of queries.

Is there a way to coalesce the `OrderItemQuantity` and `ActivityQuantity` entries for the `OrderItem` into an `IEnumerable` (or similar) in a way that makes them easily accessible from the anonymous type used in the select?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:01:59.060

我自己设法解决了这个问题。它不完全对内存友好，但它有效：

```
// build a base query that only selects the order, item and product entities
var orderLinesBase = from Order order in _orders
             join OrderItem orderItem in dbc.OrderItems
                 on order.OrderId equals orderItem.OrderId
             join Product product in dbc.Products
                 on orderItem.ProductId equals product.ProductId
             orderby
                 order.OrderId ascending,
                 orderItem.OrderLineNumber ascending
             select new {
                 Order = order,
                 Item = orderItem,
                 Product = product
             };

// get all OrderItemQuantity entities that are applicable to the orderLinesBase query
var orderItemQuantities = (from Order in _orders
                           join OrderItem orderItem in dbc.OrderItems
                               on order.OrderId equals orderItem.OrderId
                           join OrderItemQuantity oiq in dbc.OrderItemQuantities
                               on orderItem.OrderItemId equals oiq.OrderItemId
                           select oiq).ToArray();

// get all ActivityQuantity entities that are applicable to the orderLinesBase query
var activityQuantities = (from Order in _orders
                           join OrderItem orderItem in dbc.OrderItems
                               on order.OrderId equals orderItem.OrderId
                           join ActivityQuantity aq in dbc.ActivityQuantities
                               on orderItem.OrderItemId equals aq.OrderItemId
                           select aq).ToArray();

// notice that the above two queries use ToArray to force evaluation of the expression.

// this is just some cast by example trickery, to help with anonymous types
// it's just this method: List<T> CastListByExample<T>(T t) { return new List<T>(); }
var orderLines = Helpers.CastListByExample(new {
    Order = (Order)null,
    Item = (OrderItem)null,
    Product = (Product)null,
    ItemQuantities = (IEnumerable<OrderItemQuantity>)null,
    ActivityQuantities = (IEnumberable<ActivityQuantity>)null });

// manually fill the list
foreach (var orderLine in orderLinesBase)
    orderLines.Add(new
    {
        Order = orderLine.Order,
        Item = orderLine.Item,
        Product = orderLine.Product,
        // use a method to filter the quantity data sets manually, because
        // LINQ won't work with memory-backed enumerables
        ItemQuantities = FilterByOrderItemId(orderItemQuantities, orderLine.Item.OrderItemId),
        ActivityQuantities = FilterByOrderItemId(activityQuantities, orderLine.Item.OrderItemId)
    }); 
```

不完全简洁，并且在某些地方非常hacky，但它可以完成工作。我总共收到 6 个查询，而不是数千个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:50:31.317

不知道这是否适用于 LINQ to SQL，但您可以尝试

```
 select new {
                 Order = order,
                 Item = orderItem,
                 Product = product,
                 // I'd like to get these child items as IEnumerables or similar
                 ItemQuantities = orderItemQuantities.ToList(),
                 ActivityQuantities = activityQuantities.ToList()
             }; 
```

我相当肯定会在实体框架中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T22:27:12.513

尝试在内部连接之前执行组连接。这样您就可以为每个`orderItem`而不是每个内部连接结果执行组连接：

```
var orderLines = from OrderItem orderItem in dbc.OrderItems
                 join OrderItemQuantity oiq in dbc.OrderItemQuantities
                     on orderItem.OrderItemId equals oiq.OrderItemId
                     into orderItemQuantities
                 join ActivityQuantity aq in dbc.ActivityQuantities
                     on orderItem.OrderItemId equals aq.OrderItemId
                     into activityQuantities
                 join Order order in _orders
                     on orderItem.OrderId equals order.OrderId
                 join Product product in dbc.Products
                     on orderItem.ProductId equals product.ProductId
                 orderby
                     order.OrderId ascending,
                     orderItem.OrderLineNumber ascending
                 select new {
                     Order = order,
                     Item = orderItem,
                     Product = product,
                     // I'd like to get these child items as IEnumerables or similar
                     ItemQuantities = orderItemQuantities,
                     ActivityQuantities = activityQuantities
                 }; 
```

# c# - 如何在用 c#/XAML 开发的 Windows 商店应用程序中的 SQLite 中插入 blob

> ID：12894016
> 
> 赞同：3
> 
> 时间：2012-10-15T10:47:51.503
> 
> 标签：c#, windows-8, windows-runtime, microsoft-metro, windows-store-apps

我正在开发一个应用程序，其中包含一些媒体文件，如图像/音频/视频剪辑。我想将这些媒体文件作为 blob 插入到我的 C#/XAML Windows 商店应用程序的 SQLite 中。我找不到任何显示 blob 数据类型的示例。我怎样才能做到这一点 ？[在这里](http://www.sqlite.org/datatype3.html#storageclasses)你可以看到 SQLite 支持 blob 数据类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T17:58:38.383

不确定您使用的是哪个 API，但这是[SQLite-Net](https://github.com/praeclarum/sqlite-net)的单元测试。它所做的只是创建测试对象并用一些数据填充 blob（字节数组）。然后它将保存的对象与原始对象进行比较。

```
public class BlobTest
{
    public int Id { get; set; }
    public byte[] Blob { get; set; }
}

[TestMethod]
public void TestSaveBlob()
{
    var conn = new SQLiteConnection("path_to_db");
    conn.CreateTable<BlobTest>();

    var expected = new BlobTest() { Id = 1 };
    expected.Blob = new byte[10];
    for (int idx = 0; idx < expected.Blob.Length; idx++)
    {
        expected.Blob[idx] = (byte)(idx + 1);
    }

    conn.Insert(expected);

    var actual = conn.Table<BlobTest>().FirstOrDefault();
    Assert.IsTrue(actual.Id != 0, string.Format("actual.Id == '{0}', expected non-zero", actual.Id));
    Assert.IsTrue(actual.Id == expected.Id, string.Format("actual.Id == '{0}', expected '{1}'", actual.Id, expected.Id));
    Assert.IsTrue(actual.Blob != null, string.Format("actual.Blob == '{0}', expected non-null", actual.Blob));

    for (int idx = 0; idx < expected.Blob.Length; idx++)
    {
        Assert.IsTrue(expected.Blob[idx] == actual.Blob[idx], string.Format("actual.Blob[{0}] == '{1}', expected '{2}'", idx, actual.Blob[idx], expected.Blob[idx]));
    }
} 
```

只是为了查看数据库中的内容，我从 SQLite 命令行运行了它：

```
select id, hex(blob) from blobtest; 
```

结果：

```
1|0102030405060708090A 
```

# javascript - 如何在javascript中编写if else语句

> ID：12894018
> 
> 赞同：1
> 
> 时间：2012-10-15T10:48:08.297
> 
> 标签：javascript, django-templates

任何人都可以帮我解决这个 if else 声明....

编码

```
<script>
$("#id_add_select").change(function(){
    if($("#id_add_select" == "2")){
        handler(1)
    } else {
        handler(2) 
    } 
}); 

function handler(situation){
var situation = situation;
    switch (situation)
    case 1:
          display: (".name")
          display: (".address")
    case 2:
          disable: (".age")
          disable: (".email")   
}
</script> 
```

html编码

```
<html>
 ------

<select name="add_select" id="id_add_select">
        <option value="1">working</option>
        <option value="2">not working</option>
        <option value="3">retired</option>
</select>

 ------- 
```

我的情况是，如果我选择 2“不工作”，那么它将显示案例 1。否则将显示案例 2。基本的，但我无法弄清楚。太感谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:51:00.380

这个不对：

```
if($("#id_add_select" == "2")){ 
```

您可能想要执行以下操作：

```
if($(this).val() == 2) { 
```

您可以对代码进行更多优化，但这应该是正确的方向：

```
$("#id_add_select").change(function(){
    if($(this).val() == 2){
        handler(1)
    } else {
        handler(2) 
    } 
}); 
```

## 替代解决方案

IMO，在您的情况下，使用带有函数的地图对象比使用 switch 语句更干净。所以我可能会做类似的事情：

```
var actions = {
    1: function() {
        // first choice logic
    },
    2: function() {
        // second choice logic
    }
};

$("#id_add_select").change(function() {
    actions[this.value]();
}); 
```

演示：http: [//jsfiddle.net/PurjS/](http://jsfiddle.net/PurjS/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:51:55.250

`if($("#id_add_select" == "2")){`=>`if($("#id_add_select").val() == "2"){`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T10:53:16.653

首先你没有得到任何价值：

```
 <script>
  $("#id_add_select").change(function(){
     if($("#id_add_select").val()==2){
     handler(1);
   } else {
     handler(2);
    } 
  }); 
  </script> 
```

不要忘记在 switch 循环中的每个 case 之后放置 break 语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T11:13:18.697

## 弄清楚为什么某些事情不起作用

```
$("#id_add_select" == "2") 
```

显然，您打算检查所选元素的值是否为`2`. 但是，不需要知道 jQuery 是如何工作的，很明显这是行不通的。

为此，您只需将语句分解为其基本部分。

我们有一个函数调用`$()`，我们通过传递一个参数来执行：`"#id_add_select" == "2"`.

我们注意到，函数的参数完全独立于实际调用，这对*所有*函数调用都是如此。这意味着，比较的*结果*将被传递。因为比较的两个操作数都是文字，我们可以自己计算表达式并用一个常量替换它：`"#id_add_select" == "2"`显然不相等，因此结果将是`false`。

我们得出结论，它与写作相同：`$(false)`. 从这里，应该很明显，这段代码无法检查某个任意元素是否具有 value `2`。

* * *

除了其他答案，请注意

## 开关/外壳的工作原理

请注意，JavaScript 的`switch/case`语句具有贯穿行为。

这意味着，一旦一个`case`子句因为它的值与输入匹配而被执行`x`，它将执行它下面的所有代码，直到它遇到一个`break;`退出`switch/case`构造的语句。

在下面的示例中，执行`printTo5Or8(1)`不会让它在 之后终止`console.log(1)`，相反，它将“通过”`console.log(2);`直到`break;`语句！

```
function printTo5Or8(x) {
    switch(x){
        case 1: 
            console.log(1); 
        case 2: 
            console.log(2);
        case 3: 
            console.log(3);
        case 4: 
            console.log(4);
        case 5: 
            console.log(5);
            break;
        case 6:
            console.log(6);
        case 7:
            console.log(7);
        case 8:
            console.log(8);

    }
}
printTo5Or8(1); // Prints 1 2 3 4 5
printTo5Or8(3); // Prints 3 4 5
printTo5Or8(6); // Prints 6 7 8
printTo5Or8(7); // Prints 7 8 
```

## 无效的语法

该`switch/case`语句需要一个块：`{ statements; }`跟随`switch(expression)`！你没有。

* * *

```
display: (".name")
display: (".address") 
```

你可能的意思是`display(".name");`。目前，您拥有无用的标签。

## 冗余代码

```
function handler(situation){
    var situation = situation; // <-- Remove 
```

形参列表`(situation)`已经声明了一个局部变量`situation`。没有必要声明它。

## 结论

我建议你花一些精力来学习 JavaScript 作为一门语言。了解 JavaScript 是如何工作的将帮助你推理你的代码和规则“不可能”的代码，这些代码永远不会工作。如果没有很好地掌握编程语言或在这种情况下是 JavaScript 的工作原理，编程会感觉像是将一些魔法咒语混合在一起，这些咒语有时只是碰巧做你想做的事，但往往会出错。

编程是一门精确的科学，而不是猜测和运气。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T10:56:45.967

我认为这段代码更干净：

```
<script>
$("#id_add_select").change(function(){

if( $(this).val() == "2"))
    handler(1)
 else 
    handler(2) 

}); 

function handler(situation){

switch (situation){
case 1:
      display: (".name");
      display: (".address");
      break;
case 2:
      disable: (".age");
      disable: (".email");
       break;  
}
}
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T11:00:56.663

一段优化的爱情：

```
$("#id_add_select").change(handler);

var handler = function () {
    switch (this.value) {
        case 1:
            display(".name");
            display(".address");
            break;
        default:
            disable(".age");
            disable(".email");
            break;
    }
}; 
```

或者这样：

```
$("#id_add_select").change(function () {
    switch (this.value) {
        case 1:
            display(".name");
            display(".address");
            break;
        default:
            disable(".age");
            disable(".email");
            break;
    }
}); 
```

或者这样：

```
$("#id_add_select").change(function () {
    if (this.value === "1") {
        display(".name");
        display(".address");
    } else {
        disable(".age");
        disable(".email");
    }
}); 
```

也不要忘记你需要一个显示和一个禁用方法（但我猜你已经制作了它们，因为你的代码看起来像你有）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T12:18:33.160

```
 <html>
    <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

    <script>
    $(document).ready(function(){
    $("p").click(function(){
    $(this).hide();
    });

    $("#id_add_select").change(function(){

        if($(this).val() == "2")
            handler(1)
         else 
            handler(2) 
    });  
    });
     function handler(situation)
    {
    switch (situation){
    case 1:
     alert(situation);
      break;
    case 2:
      alert(situation);
       break;  
    }
    }
</script>
</head>

<body>
<p>If you click on me, I will disappear.</p>
<select name="add_select" id="id_add_select">
        <option value="1">working</option>
        <option value="2">not working</option>
        <option value="3">retired</option>
</select>
</body>

</html> 
```

# asp.net - WCF Data Services syndication field missing from client-side proxy on MVC project

> ID：12894021
> 
> 赞同：0
> 
> 时间：2012-10-15T10:48:16.573
> 
> 标签：asp.net, asp.net-mvc, silverlight, wcf-data-services, odata

We're using WCF Data Services (.NET 4 currently - planning to upgrade to WCF Data Services 5 at some point) to expose some data from a SQL DB. We're projecting that data, server-side, into a public domain model and then exposing the data via the Reflection provider.

This all works fine, except I recently added some syndication details to the domain model so that it looks a bit nicer in feed views in e.g. IE. Here's the sort of thing I've done: -

```
[DataServiceKey("ID")]
[EntityPropertyMapping("Name", SyndicationItemProperty.Title, SyndicationTextContentKind.Plaintext, false)]
public class Customer
{
    public String Name { get; set; }
    public String ID { get; set; }
    public Boolean IsActive { get; set; }
} 
```

And this correctly works insofar as the feed correctly has the syndicate field set and it shows up in IE nicely. In addition, the Name field no longer appears directly in the XML of the data. Instead, when I get a client-side reference in a Console or Silverlight application, the proxy class has attributes on it like so (I've elided the other attributes) :-

```
[global::System.Data.Services.Common.EntityPropertyMappingAttribute("Name", System.Data.Services.Common.SyndicationItemProperty.Title, System.Data.Services.Common.SyndicationTextContentKind.Plaintext, false)]
[global::System.Data.Services.Common.DataServiceKeyAttribute("ID")]
public partial class Customer : global::System.ComponentModel.INotifyPropertyChanged { // etc. } 
```

Ignoring the INotifyPropertyChanged, the main thing is the SyndicationItemProperty which I assume allows the client-side proxy to correctly rehydrate the object correctly. However, on our ASP .NET application (WebForms or MVC), we get this sort of behaviour instead: -

```
[global::System.Data.Services.Common.DataServiceKeyAttribute("ID")]
public partial class LegalEntity { // etc. } 
```

i.e. It correctly generates Key Attribute, but does not generate the Syndication Title attribute, so the client does not know how to hydrate the Name property; instead, it just comes back as null. If I turn off the syndication, it all works.

This seems to me to suggest that the template that generates code is different for different project types in VS and there's an issue with the MVC one that does not support syndication.

How can I get around this without having to resort to manually creating partial classes and decorating them with the extra attribute (or turning off the syndication)?

Added subsequently:

I've now discovered that the difference is that in the .datasvcmap file for ASP .NET projects, the following XML is absent: -

```
<Parameters>
   <Parameter Name="UseDataServiceCollection" Value="true" />
   <Parameter Name="Version" Value="2.0" />
</Parameters> 
```

Adding that in seems to fix the problem. The question that remains is why doesn't it get added automatically?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:14:11.793

如果使用命令行工具 DataSvcUtil 生成代码，则有 1.0 或 2.0 的版本切换：

[http://msdn.microsoft.com/en-us/library/vstudio/ee383989(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ee383989(v=vs.100).aspx)

似乎您获得了版本为 1.0 的 ASP/MVC 输出和版本为 2.0 的控制台/Silverlight - 可能只是巧合，但值得注意。

```
datasvcutil /out:c:\dnh.cs /uri:http://server/DataServices/Customers.svc/ /version:1.0
datasvcutil /out:c:\dnh.cs /uri:http://Server/DataServices/Customers.svc/ /version:2.0 
```

# json - 将 JSON 发布到 apicontroller

> ID：12894022
> 
> 赞同：10
> 
> 时间：2012-10-15T10:48:25.660
> 
> 标签：json, asp.net-mvc-4, asp.net-web-api

我正在为 Asp.Net 中的“新”WebApi 苦苦挣扎……

我只想发布一些Json，但它没有反序列化我的数据......我做错了什么？！

控制器类

```
 public class UtilityController : ApiController
    {
        [HttpPost]
        public string Bla(Bla bla)
        {
            return "bla";
        }
    } 
```

布拉类：

```
 public class Bla
    {
        public string Een { get; set; }
        public string Twee { get; set; }
    } 
```

接口配置：

```
    config.Routes.MapHttpRoute(
        名称：“默认API”，
        routeTemplate: "api/{controller}/{Action}/{id}",
        默认值：新 { id = RouteParameter.Optional }
    );

```

发布数据：

```
    var bla = $.parseJSON('{"Een":"UNO","Twee":"DUE"}');
    $.ajax({
    类型：“发布”，
    url: "/api/utility/Bla",
    数据：{Bla：bla}，
    数据类型：“json”
    }).done(函数(味精){
    alert("数据保存：" + msg);
    });

```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-15T10:52:04.393

> 我做错了什么！

您没有发送 JSON 请求。您正在发送`application/x-www-form-urlencoded`请求。

因此，请确保您发送的是真正的 JSON 请求：

```
var bla = { "Een": "UNO", "Twee": "DUE"};
$.ajax({
    type: 'POST',
    url: '/api/utility/Bla',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify(bla),
}).done(function( msg ) {
    alert( "Data Saved: " + msg );
}); 
```

请注意我如何将正确的标`contentType`头设置为服务器发送。`application/json``JSON.stringify``dataType: 'json'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:53:38.603

该`bla`参数可能需要`[ModelBinder]`在您的 Post 方法上标记：

```
[HttpPost]
public string Bla([ModelBinder]Bla bla)
{
    return "bla";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T10:51:54.017

您可以尝试更改此行：

```
data: {Bla : bla}, 
```

对此：

```
data: bla, 
```

# arduino - Arduino 故障安全机制

> ID：12894029
> 
> 赞同：10
> 
> 时间：2012-10-15T10:48:48.887
> 
> 标签：arduino, embedded, microcontroller, pic

假设我正在为 Arduino（或任何其他微控制器）开发故障安全机制。换句话说，当主控制器发生故障时，辅助微控制器或单独的板应该承担责任。

两种可能的机制如下。

**方法 1 - 客户端服务器机制**

*   有 2 个相同的系统单独供电。
*   辅助系统定期发送请求，主系统回复。
*   如果主系统未能回复（多次），则辅助系统将负责。

**方法 2 - 心跳机制**

*   有 2 个相同的系统单独供电。
*   主系统定期发送心跳消息。
*   如果有心跳，则辅助节点知道主节点已启动。
*   当没有心跳时，主节点被认为是死的。辅助节点获得控制权。

你们知道有什么更好的机制来实现这个吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T12:48:59.873

通常在商业嵌入式系统中，[看门狗定时器](https://en.wikipedia.org/wiki/Watchdog_timer)将用于在处理器无法通过周期性“踢狗”响应的情况下重置处理器。所有 AVR 微控制器（以及许多其他品牌，如果不是大多数）都有一个内部看门狗定时器。尽管具有独立外部看门狗定时器的设计通常更加稳健和可靠。像[这样](http://www.embedded.com/electronics-blogs/beginner-s-corner/4023849/Introduction-to-Watchdog-Timers)：

![外部看门狗设置](../Images/52265c4413e5ba22850cf79ae3ddce4d.png)

对于需要更高程度容错的系统，例如航空航天应用，使用三重冗余或[三重模块化冗余](https://en.wikipedia.org/wiki/Triple_modular_redundancy)架构。

在三重冗余系统中，三个相同的处理组件同时执行相同的任务。然后将结果发送到投票电路或 John von Neumann 所谓的“[多数机关](https://ece.uwaterloo.ca/~ssundara/courses/prob_logics.pdfSection=features3&template=/ContentManagement/ContentDisplay.cfm&ContentID=30533)”（第 4.2.2 节）。投票电路的输出是三个处理组件的多数意见。

![三重冗余](../Images/db3fa36186c19fb6e4cf6f9742dc12f9.png)

这允许处理组件之一发生故障而不影响系统的操作。但是，如果投票电路发生故障，那么整个系统也会发生故障。三重模块化冗余系统还通过实施三个表决电路消除了这种单点故障。

![三重模块化冗余](../Images/1d8cef037c4629e28a12dc7e837f32dc.png)

但最终，这三个输出将需要再次组合成一个结果，从而导致单点故障。即使那个故障点是人类看着三个仪表，每个仪表都监控相同的温度。

您需要确定的是您需要系统[的容错能力](https://en.wikipedia.org/wiki/Fault-tolerant)以及系统可以处理的[平均故障间隔时间 (MTBF) 。](https://en.wikipedia.org/wiki/Mean_time_between_failures)然后围绕它设计你的冗余系统。

# c# - C# 颜色循环 MandleBrot 分形

> ID：12894031
> 
> 赞同：0
> 
> 时间：2012-10-15T10:49:08.673
> 
> 标签：c#, winforms, colors

我正在用 C# 设计一个 Mandlebrot 分形，它工作正常...问题是我想循环遍历所有的 rgb 颜色，我认为这就是所谓的颜色循环...我知道我需要将位图转换为托盘，因此贯穿每个像素？？？？我将如何实现这一目标？现在工作了几个小时，真的不确定。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:59:57.153

使用[HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)而不是 RGB 可能会使颜色循环变得更容易，因为您只需递增（并取模）单个值，而不是尝试管理其中的 3 个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T11:43:15.190

同意@Pyritie，使用 HSV 而不是 RGB。有关示例，请参[见此问题](https://stackoverflow.com/questions/359612/how-to-change-rgb-color-to-hsv "这里")。

然后尝试使用此代码设置位图的调色板颜色：

```
var bitmap = new Bitmap(width, height, width, PixelFormat.Format8bppIndexed);

ColorPalette palette = bitmap.Palette;
palette.Entries[0] = Color.Black;
for (int i = 1; i < 256; i++)
{
    // set to whatever colour here...
    palette.Entries[i] = Color.FromArgb((i * 7) % 256, (i * 7) % 256, 255);
}
bitmap.Palette = palette; 
```

我认为原始信用属于 Jon Skeet，来自他的 TPL 演示。

# java - 如何通过 LDAPS 使用 Java 代码重置 RedHat 目录服务器中的用户密码？

> ID：12894033
> 
> 赞同：1
> 
> 时间：2012-10-15T10:49:16.407
> 
> 标签：java, ldap, redhat, hp-ux, directory-server

如何使用 LDAPS 从我的 Java 应用程序访问 RedHat 目录服务器/HP UX 目录服务器？我正在尝试通过 LDAP 访问它，它工作正常，但是在使用 LDAPS 时它没有建立与服务器的连接。

这是我的代码，它不起作用：

```
public void setPassword(String userDn,String password) {
    InitialDirContext ctx=null;
    DirContext connection;
    Hashtable env = new Hashtable();
    env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    env.put(Context.SECURITY_AUTHENTICATION, "simple");
    String systemname = "ldaps://myserver:636";
    env.put(Context.PROVIDER_URL, systemname);  
    env.put(Context.SECURITY_PRINCIPAL, "cn=directory manager");
    env.put(Context.SECURITY_CREDENTIALS, "MySecret");
    ctx = new InitialDirContext(env);
    connection = (DirContext)ctx;
    connection.lookup("dc=mydomain,dc=com");
    ModificationItem[] mods = new ModificationItem[1];
    Attribute mod0 = new BasicAttribute("userpassword",password);
    mods[0] = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, mod0);
    connection.modifyAttributes(userDn, mods);
    connection.close();
} 
```

如果我替换`ldaps`by ，上面的代码可以正常工作`ldap`。

但我也需要代码来为 LDAPS 工作。有些网站提到需要密钥库、证书等。但我对这些一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:12:34.140

你可以尝试几件事：

*   使用已知良好的工具`ldapsearch`来验证 LDAP 客户端是否可以连接到服务器
*   用于`openssl s_client -connect host:port`验证客户端是否可以建立安全连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:29:44.863

当您使用 Java 时，您需要获取服务器证书或证书颁发机构链的副本，并将其添加到与代码一起使用的 JVM 的 Java 密钥库中。

如何完成获取证书取决于您使用的 LDAP 实现。LDAP 管理员应该能够提供帮助。

至于将证书添加到 Java KeyStore，请参阅 Google。

-吉姆

# ios - How to add comment in website page by API?

> ID：12894037
> 
> 赞同：1
> 
> 时间：2012-10-15T10:49:25.827
> 
> 标签：ios, facebook-graph-api, comments, facebook-comments, facebook-rest-api

> **Possible Duplicate:**
> [How can I post new comment with Graph API into Social Comments Box?](https://stackoverflow.com/questions/7827480/how-can-i-post-new-comment-with-graph-api-into-social-comments-box)

I try to comment a web page by API directly with this URL.

In this web page, I have got a social plugin for comments (for this part, it's Okay), and I would like to send comment from an iOS App with native components. I search a way to publish comments in this web page by request, but I don't find it in Facebook developers.

I have all permissions: publish_stream and publish_action

I tried:

1) Graph API :

*   URL: [https://graph.facebook.com/](https://graph.facebook.com/)/comments
*   POST: message = test

=> return false

2) Legacy REST API :

*   URL: [https://api.facebook.com/method/comments.add](https://api.facebook.com/method/comments.add)
*   POST : access_token, object_id (= ), text and title

=> Error code 100 or 200

I have all permissions to publish and I don't understand why my request failed!

Thank you for your help

# c# - 在视图中分组和显示模型

> ID：12894039
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:49:35.850
> 
> 标签：c#, asp.net-mvc

我无法对列表进行分组，然后构建一个表示该列表的模型并将结果显示在视图中的表中。例如：

**订购物品清单**

1.  日期
2.  客户ID
3.  地点
4.  物品
5.  价格
6.  数量

如果我想按位置对列表进行分组，我将如何正确建模并在表格中显示该列表？如果我想按两个属性（例如 Location 和 CustomerId）对列表进行分组怎么办？

这是我的模型：

```
public class ViewInvoice
{
public string ClientLocation { get; set; }
public List<DetailsGroup> Details { get; set; }

public class DetailsGroup
{
    public List<string> Product { get; set; }
    public List<string> ProductSize { get; set; }
    public List<string> PackageType { get; set; }
    public List<DateTime> OrderDate { get; set; }
    public List<DateTime> DeliveryDate { get; set; }
    public List<int> OrderNumber { get; set; }
    public List<decimal> Price { get; set; }
    public List<int> ItemQuantity { get; set; }
}
} 
```

我正在尝试在我的剃刀视图中的表格中显示此模型。这是该代码：

```
@using MyModel.MyTools.Orders.SumOrder
@model SumOrder

@{
ViewBag.Title = "View Invoice";
}

<h2>View Invoice</h2>

<table>
    @foreach(var prod in Model.OCI)
    {
        <tr>
            <td>
                @prod.ClientLocation
            </td>
        </tr>
         foreach (var orderItem in prod.Details)
        {
            <tr>
                <td>
                    @orderItem.Product
                </td>
                <td>
                    @orderItem.ItemQuantity
                </td>
            </tr>
        }
    }
</table> 
```

表中的第一行显示正确，这是一个城市的名称，但在下一行我得到了这个：

System.Collections.Generic.List1[System.String] System.Collections.Generic.List1[System.Int32]

有人可以向我解释为什么我无法以可读格式返回列表，以及如何解决这个问题？

这是我用来对 ViewInvoice 模型的列表进行分组的代码：

```
public SumOrder(List<orders_Cart> order)
    {
        // create list of order cart item
        List<OrderCartItems> cartItems = new List<OrderCartItems>();

        // convert orders to ocm
        foreach(var item in order)
        {
            var newCartItem = new OrderCartItems();
            try
            {
                newCartItem.Product = db.product_Product.FirstOrDefault(p =>
                    p.Id == item.ProductId).ProductDescription ?? "none";
            }
            catch (Exception)
            {

                newCartItem.Product = "none";
            }
            try
            {
                newCartItem.ClientForProduct = MyTool.OrdersFindClientLocation(
                    (int) item.ClientForOrdersId);
            }
            catch (Exception)
            {

                newCartItem.ClientForProduct = new object[3];
            }
            try
            {
                newCartItem.ProductSize = db.products_Size.FirstOrDefault(p => p.Id ==
                    item.ProductSizeId).ProductSizeCode ?? "none";
            }
            catch (Exception)
            {

                newCartItem.ProductSize = "none";
            }
            try
            {
                newCartItem.PackageType = db.packaging_PackageType.FirstOrDefault(p =>
                    p.Id == item.PackageTypeId).PackageTypeCode ?? "none";
            }
            catch (Exception)
            {

                newCartItem.PackageType = "none";
            }
            newCartItem.OrderDate = (DateTime) item.OrderDate;
            newCartItem.DeliveryDate = (DateTime) item.DeliveryDate;
            newCartItem.OrderNumber = (int) item.OrderNumber;
            newCartItem.Price = (decimal) item.Price;
            newCartItem.ClientLocation = MyTool.OrdersFindClientLocation(
                (int) item.ClientForOrdersId, null);
            newCartItem.ItemQuantity = (int) item.Quantity;
            cartItems.Add(newCartItem);
        }

        // group the cartItems according to location
        List<ViewInvoice> ordersGrouped = cartItems.GroupBy(c => new 
            {c.ClientLocation})
            .OrderBy(c => c.Key.ClientLocation).Select(s =>
                new ViewInvoice()
                    {
                        ClientLocation = s.Key.ClientLocation,
                        Details = new List<ViewInvoice.DetailsGroup>()
                            {
                                new ViewInvoice.DetailsGroup()
                                    {
                                        Product = s.Select(p => p.Product).ToList(),
                                        ItemQuantity = s.Select(p => p.ItemQuantity).ToList(),
                                        DeliveryDate = s.Select(p => p.DeliveryDate).ToList(),
                                        OrderDate = s.Select(p => p.OrderDate).ToList(),
                                        OrderNumber = s.Select(p => p.OrderNumber).ToList(),
                                        PackageType = s.Select(p => p.PackageType).ToList(),
                                        Price = s.Select(p => p.Price).ToList(),
                                        ProductSize = s.Select(p => p.ProductSize).ToList()
                                    }

                            }

                    }).ToList();

        // set the OCI property
        OCI = ordersGrouped;
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:30:22.477

好的，我终于解决了我的问题。我一开始是过度思考这个问题。我简化了我的模型，并在我的视图中添加了一些简单的逻辑。

这是更新的模型：

```
public class ViewInvoice
{
    public string ClientLocation { get; set; }
    public List<string> Product { get; set; }
    public List<string> ProductSize { get; set; }
    public List<string> PackageType { get; set; }
    public List<DateTime> OrderDate { get; set; }
    public List<DateTime> DeliveryDate { get; set; }
    public List<int> OrderNumber { get; set; }
    public List<decimal> Price { get; set; }
    public List<int> ItemQuantity { get; set; }
} 
```

用于对模型列表进行分组的更新代码：

```
// group the cartItems according to location
        List<ViewInvoice> ordersGrouped = cartItems.GroupBy(c => new 
            {c.ClientLocation})
            .OrderBy(c => c.Key.ClientLocation).Select(s =>
                new ViewInvoice()
                    {
                        ClientLocation = s.Key.ClientLocation,
                        Product = s.Select(p => p.Product).ToList(),
                        ItemQuantity = s.Select(p => p.ItemQuantity).ToList(),
                        DeliveryDate = s.Select(p => p.DeliveryDate).ToList(),
                        OrderDate = s.Select(p => p.OrderDate).ToList(),
                        OrderNumber = s.Select(p => p.OrderNumber).ToList(),
                        PackageType = s.Select(p => p.PackageType).ToList(),
                        Price = s.Select(p => p.Price).ToList(),
                        ProductSize = s.Select(p => p.ProductSize).ToList()

                    }).ToList(); 
```

和更新的视图：

```
@using MyModel.MyTools.Orders.SumOrder
@model SumOrder

@{
    ViewBag.Title = "View Invoice";
}

<h2>View Invoice</h2>
@{
    int i = 0;
}
<table>
    @foreach(var mod in Model.OCI)
    {
        var modCount = @mod.Product.Count();
        <tr>
            <th>@mod.ClientLocation</th>
        </tr>
        <tr>
            <th>Product</th>
            <th>Price</th>
        </tr>
        foreach (var items in mod.Product)
        {
            <tr>
                <td>
                    @mod.Product.ElementAtOrDefault(i)
                </td>
                <td>
                    @mod.Price.ElementAtOrDefault(i)
                </td>
            </tr>
            i++;
        }

    }
</table> 
```

该解决方案清楚地允许我遍历模型，沿途复制任何所需的行或单元格。为这个问题玩了两天的俄罗斯轮盘赌。希望这可以节省其他一些时间。

# java - return string array in place of string

> ID：12894041
> 
> 赞同：0
> 
> 时间：2012-10-15T10:49:37.820
> 
> 标签：java, xml, arrays, parsing

i have a class which is returning a string type value and i want to return an String array, so please tell how can i able to do that

1.  i have an xml file like resource.xml

> ```
> <prompts> 
>         <prompt id="p1">welcome to</prompt> 
>         <prompt id ="p2">stack overflow</prompt>
>         <prompt id="p3">You entered</prompt> 
>         <prompt id="p4">the correct number</prompt> 
> <prompts> 
> ```

i am parsing it using sax parser

```
 public class XmlReaderPrompt {  
        public List<PromptBean> load(String langMode)
        {
            String fileName="resource.xml";     
            DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
            InputStream prompt_configfile=Thread.currentThread().getContextClassLoader().getResourceAsStream(fileName);
            DocumentBuilder db = null;
            List<PromptBean> promptMap = new ArrayList<PromptBean>();
            try {
                try {
                    db = dbf.newDocumentBuilder();
                } catch (ParserConfigurationException e) {              
                    e.printStackTrace();
                }
                Document doc = null;
                try {
                    doc = db.parse(prompt_configfile);
                }

                catch (SAXException e) {                
                    e.printStackTrace();
                }           
                NodeList nodeList=doc.getElementsByTagName("prompt");
                for(int i=0;i<nodeList.getLength();i++)
                {
                    Node node=nodeList.item(i);
                    if(node.getNodeType()==Node.ELEMENT_NODE)
                    {                                           
                        Element element=(Element)node;
                        String id = element.getAttribute("id");             
                        String name = element.getAttribute("name");                 
                        String prompt=getTextValue(element);
                        promptMap.add(new PromptBean(id,name,prompt));
                    }
                }
            }        
            catch(Exception io)
            {
                io.printStackTrace();           
            }
            finally
            {
                db=null;
                dbf=null;
            }       
            return promptMap;
        }   

        private String getTextValue(Element element) {      
            String textValue=element.getFirstChild().getTextContent().toString();
            return textValue;
        }
} 
```

and a UserFunction class to return the text from the xml file

```
public class UserFunction{  

        List<PromptBean> promptObject = new ArrayList<PromptBean>(); 
public String getPromptFunction(String promptTag,String langMode )
        {           
            List<PromptBean> promptObject=xrpObject.load(langMode);
            for (Iterator<PromptBean> iterator = promptObject.iterator(); iterator.hasNext();){
            PromptBean promptBean= (PromptBean)iterator.next();             
            if(promptBean.getId().equalsIgnoreCase(promptTag)){
                return StringEscapeUtils.escapeXml(promptBean.getPrompt());
            }
            }
             return null;
        } 
```

The problem is that I have to call the method getPromptFunction of UserFunction class every time I need to get text from the sub element like

```
String pr1 = UserFunction.getPromptFunction("p1" "resource");
String pr1 = UserFunction.getPromptFunction("p2" "resource");
String pr1 = UserFunction.getPromptFunction("p3" "resource"); 
```

and using it in jsp page as <%=pr1%>

So I want to use array like

```
String[] pr = UserFunction.getPromptFunction('"p1","p2","p3"' "resource") 
```

So how I am able to do that and also tell how to use it in jsp page .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:55:52.670

你可以这样做

```
public String[] getPromptFunction(String promptTag,String langMode )
    {   
        String temp[] = new String[promptObject.size()];        
        List<PromptBean> promptObject=xrpObject.load(langMode);
        int i = 0; 
        for (Iterator<PromptBean> iterator = promptObject.iterator(); iterator.hasNext();) {
        PromptBean promptBean= (PromptBean)iterator.next();             
        if(promptBean.getId().equalsIgnoreCase(promptTag)){
            temp[i] = StringEscapeUtils.escapeXml(promptBean.getPrompt());
        }
        i++;
        }
        return temp;
    } 
```

# android - 使用用户定义的名称将文件存储在 sd 卡中

> ID：12894043
> 
> 赞同：-4
> 
> 时间：2012-10-15T10:49:39.873
> 
> 标签：android, filenames, sd-card

我正在尝试编写将edittext的内容保存到sdcard中的文件中的代码。我发现以下代码有效：

```
 public void onClick(View v) {
    // write on SD card file data in the text box
    try {
        File myFile = new File("/sdcard/mysdfile.txt");
        myFile.createNewFile();
        FileOutputStream fOut = new FileOutputStream(myFile);
        OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
        myOutWriter.append(write_text.getText());
        myOutWriter.close();
        fOut.close();
        Toast.makeText(getBaseContext(),
                "Done writing SD 'mysdfile.txt'",
                Toast.LENGTH_SHORT).show();
    } catch (Exception e) {
        Toast.makeText(getBaseContext(), e.getMessage(),
                Toast.LENGTH_SHORT).show();
    }
}// onClick
}); // btnWriteSDFile 
```

问题是，这总是将信息保存到同一个文件，覆盖任何以前的保存。

如果给定文件存在，我如何提示用户为文件输入不同的名称并将其保存在用户提供的名称下？

请注意，我对此很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:00:13.533

我可以建议一种方法.. 在 onclick() 弹出一个自定义警报对话框中，其中包含类似[此链接中](http://codinglookseasy.blogspot.in/2012/07/alert-box-code.html)的编辑文本，并要求用户输入名称并将此名称用作文件名`File myFile = new File("/sdcard/"+myfilename+".txt");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:00:49.810

第一的

从提示对话框中获取文件名

```
public void onClick(View v) {
    // write on SD card file data in the text box
    try {

    AlertDialog.Builder alert = new AlertDialog.Builder(this.getApplicationContext());

    alert.setTitle("Title");
    alert.setMessage("Message");

    // Set an EditText view to get user input 
    final EditText input = new EditText(this.getApplicationContext());
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
      Editable value = input.getText();
      File myFile = new File("/sdcard/"+value .toString());
    myFile.createNewFile();
    FileOutputStream fOut = new FileOutputStream(myFile);
    OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
    myOutWriter.append(write_text.getText());
    myOutWriter.close();
    fOut.close();
    Toast.makeText(getBaseContext(),
            "Done writing SD 'mysdfile.txt'",
            Toast.LENGTH_SHORT).show();

      }
    });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
        // Canceled.
      }
    });

    alert.show(); 
```

}

# c# - 如何跟踪所有线程的完成情况。C＃

> ID：12894046
> 
> 赞同：4
> 
> 时间：2012-10-15T10:50:11.287
> 
> 标签：c#, multithreading, recursion

我需要冻结主线程直到递归结束。递归深度 = 线程数。

示例代码：

```
 BackgroundWorker backgroundWorker1;
    Random ran;

    private void Form1_Load(object sender, EventArgs e)
    {
        method();
        label1.Text = "Threads is finished";
    }

    private void method() // recursive method
    {

            Thread.Sleep(100);

            backgroundWorker1 = new BackgroundWorker();

            backgroundWorker1.DoWork +=
                new DoWorkEventHandler(backgroundWorker1_DoWork);
            backgroundWorker1.RunWorkerAsync();               //Beginning new thread
    }

    private void backgroundWorker1_DoWork(object sender,
       DoWorkEventArgs e)
    {
            ran = new Random();
            Thread.Sleep(ran.Next(500, 1000));
            if (ran.Next(1, 5) != 1) // if = 1 then to stop recursion
            {
                method();
            }
    } 
```

当线程完成时，`label1.Text`必须有值`"Threads is finished"`。这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:02:54.413

控制台应用程序 PoC 缓存对所有创建的工作人员的引用，并使用数字变量检查有多少工作人员仍在进行中，当该值达到 0 时 - 应用程序终止。如有任何问题，请告诉我。

```
class Program
{
    private static IList<BackgroundWorker> workers;
    private static Random ran;
    private static int activeWorkersCount;

    static void Main(string[] args)
    {            
        workers = new List<BackgroundWorker>();
        DoWork();

        while (activeWorkersCount > 0)
        {
            Thread.Sleep(200);
        }

        Console.WriteLine("Waiting for all workers to finish...");
        Console.ReadLine();
    }

    private static void DoWork() // recursive method
    {
        Thread.Sleep(100);

        var newWorker = new BackgroundWorker();

        newWorker.DoWork += BackgroundWorkerDoWork;
        newWorker.RunWorkerCompleted += (o, e) =>
               {
                  Console.WriteLine("[E] Worker finished");
                  Interlocked.Decrement(ref activeWorkersCount);
               };
        Interlocked.Increment(ref activeWorkersCount);
        newWorker.RunWorkerAsync();
    }

    private static void BackgroundWorkerDoWork(object sender, DoWorkEventArgs e)
    {
        Console.WriteLine("[S] Worker started");
        ran = new Random();
        Thread.Sleep(ran.Next(500, 1000));
        if (ran.Next(1, 5) != 1) // if = 1 then to stop recursion
        {
            DoWork();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:14:16.763

您可以使用[CountDownEvent](http://msdn.microsoft.com/en-us/library/system.threading.countdownevent.aspx)类：

例子：

```
using (CountDownEvent countdownEvent = new CountdownEvent(numberOfThreads))
{
    for (int threadIndex= 0; i < numberOfThreads; threadIndex++)
        ThreadPool.QueueUserWorkItem(
            th =>
            {
                DoWork();
                countdownEvent.Signal();
            }, threadIndex);

    countdownEvent.Wait();
}
Console.WriteLine("All threads complete"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:28:59.417

我用一个易失的整数做的，效果很好。

```
BackgroundWorker backgroundWorker1;     
    Random ran;
    long runningThreads = 0;
    public void Start()     
    {         
        method();         
       // Console.WriteLine("Threads is finished");     
    }       
    private void method() // recursive method     
    {
        Interlocked.Increment(ref runningThreads);
        Console.WriteLine("New thread started");
        Thread.Sleep(100);              
        backgroundWorker1 = new BackgroundWorker();              
        backgroundWorker1.DoWork +=                 
            new DoWorkEventHandler(backgroundWorker1_DoWork);             
        backgroundWorker1.RunWorkerAsync();               //Beginning new thread     
    }      
    private void backgroundWorker1_DoWork(object sender,        DoWorkEventArgs e)     
    {             
        ran = new Random();             
        Thread.Sleep(ran.Next(500, 1000));             
        if (ran.Next(1, 5) != 1) // if = 1 then to stop recursion             
        {                 
            method();             
        }
        Finished();
    }
    private void Finished()
    {
        Interlocked.Decrement(ref runningThreads);
        if (Interlocked.Read(ref runningThreads) == 0)
        {
            Console.WriteLine("Threads is finished");     

        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:04:21.320

当您决定停止递归时，您可以将回调发布到 GUI 线程上。在我的脑海中，它会是这样的：

```
if(ran.Next(1,5)!=1)
{
  method();
}
else
{
  Action action=()=>label1.Text = "Threads is finished";
  this.BeginInvoke(action);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T11:04:50.667

1）创建一个更新Label1的方法：

```
private void WorkFinished()
{
   if(Label1.InvokeRequired)
   {
      Label1.Invoke(WorkFinished);
   }
   else
   {
      Label1.Text = "Threads is finished";
   }
} 
```

2) 从 backgroundWorker1_DoWork 调用 WorkFinished()。

# javascript - 可调用的 CoffeeScript 类

> ID：12894056
> 
> 赞同：2
> 
> 时间：2012-10-15T10:51:05.673
> 
> 标签：javascript, coffeescript, callable

考虑以下 CoffeeScript 类：

```
class Event
    trigger : (args...) =>
        ...

    bind : (args...) =>
        ... 
```

用例是：

```
message_received = new Event()
message_received.bind(alert)                                       
message_received.trigger('Hello world!') # calls alert('Hello world') 
```

有没有办法以调用具有“可调用对象”快捷`Event`方式的方式编写类：`.trigger(...)`

```
message_received('Hello world')  # ? 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:04:32.330

您需要从构造函数返回一个函数，该函数使用当前实例的属性进行扩展（而后者又继承自`Event.prototype`）。

```
class Event
    constructor : ->
        shortcut = -> shortcut.trigger(arguments...)
        for key, value of @
            shortcut[key] = value
        return shortcut

    trigger : (args...) =>
        ...

    bind : (args...) =>
        ... 
```

[编译结果](http://coffeescript.org/#try%3aclass%20Event%0A%20%20%20%20constructor%20%3a%20-%3E%0A%20%20%20%20%20%20%20%20shortcut%20=%20=%3E%20shortcut.trigger%28arguments...%29%0A%20%20%20%20%20%20%20%20for%20key,%20value%20of%20@%0A%20%20%20%20%20%20%20%20%20%20%20%20shortcut%5Bkey%5D%20=%20value%0A%20%20%20%20%20%20%20%20return%20shortcut%0A%0A%20%20%20%20trigger%20%3a%20=%3E%0A%0A%20%20%20%20bind%20%3a%20=%3E%0A)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T23:55:17.227

查看[https://gist.github.com/shesek/4636379](https://gist.github.com/shesek/4636379)。它允许你写这样的东西：

```
Event = callable class
    trigger : (args...) =>
        ...
    bind : (args...) =>
        ...

    callable: @::trigger 
```

注意：它依赖于`__proto__`（没有其他方法可以设置函数的 [[Prototype]]），所以如果你需要它在 IE 上工作，你不应该使用它。当我知道用户不会使用 IE 时，我将它用于服务器端代码和 Intranet 项目。

# map - 基于 2D 网格的游戏：表示通过性

> ID：12894060
> 
> 赞同：3
> 
> 时间：2012-10-15T10:51:11.293
> 
> 标签：map, path, grid, path-finding

考虑基于平铺的游戏，其中每个代理都可以直线/对角线（在 8 个方向上）移动。基本上，像这样的地图可以表示为常规的 2D 网格，其中 0 表示可步行的位置，1 表示不可步行的位置（我使用的是 Lua）：

```
-- Example : 3x3 sized map
local map = {
 {0,0,0},
 {0,1,1},
 {0,0,0},
} 
```

在这一点上，我们如何根据代理来自的方向来表示瓦片的可步行性？即上面的单元格 [2][2]，它是静态不可行走的，如果来自 [1][2]（上）或 [2][1]（左），现在将是可行走的，但不是，例如，来自 [ 3][2]（下）。

我对此有过一些想法，但对我来说，我想不出足够干净的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:53:26.277

我会用单字节覆盖另一个二维网格。字节的每一位对应一个可能的入口方向，1 表示可以从该方向前进，0 表示不能。然后，您可以使用二进制掩码检查可输入性。

如果您的大部分单元格都可以从任何方向输入，那么您可以考虑使用具有图块的绝对 ID（例如 X*MaxY+Y）的[地图](https://en.wikipedia.org/wiki/Hash_table)作为键，并且上述字节方案指示可输入性。这访问速度较慢，但​​占用的空间更少。

例如，让方向排列如下：

```
Bit #      X offset  Y offset
123        -1 0 1    -1 -1 -1
4 5        -1 0 1     0  0  0
678        -1 0 1     1  1  1 
```

如果我朝东北方向走，这对应于#3 位。我可以通过将上述值转换​​为位掩码来执行掩码：

```
1   2   4
8      16
32 64 128 
```

如果以下返回 true，我可以从一个方向进入

```
Enterability(CurrentX+Xoffset(Dir), CurrentY+Yoffset(Dir)) & BitMask(Dir) 
```

（抱歉，恐怕我不太了解 Lua，无法用那种语言写这篇文章）

**编辑**

所以，说我的方向等如上，我想要一个只能从北方进入的广场。为此，我设置了第 2 位：

```
Enterability(X)=2 
```

如果我想要一个可以从北部和西南部进入的广场，我会使用：

```
Enterability(X)=2 | 64 
```

哪里`|`是按位或运算。

如果我想让一个正方形可以从除西边的任何方向输入，我使用：

```
Enterability(X)=(~8) 
```

`~`not 操作在哪里。

如果我需要关上一扇门，对东说，我可以取消设置：

```
Enterability(X)=Enterability(X) & (~16) 
```

要再次打开门，我使用：

```
Enterability(X)=Enterability(X) | 16 
```

或者，更简单地说，

```
Enterability(X)|=16 
```

生成一个位域，除了引用 16 的位之外，它都是 1。将`~16`其与 AND 运算符 ( `&`) 一起使用会保留所有位，但引用 16 的位除外。

另请注意，十六进制寻址可能更方便：

```
 Decimal          Hexadecimal
1   2   4       0x1  0x2  0x4
8      16   =   0x8       0x10
32 64 128       0x20 0x40 0x80 
```

# json - 从远程主机解析jquery json

> ID：12894061
> 
> 赞同：0
> 
> 时间：2012-10-15T10:51:12.393
> 
> 标签：json, jquery, jsonp

我正在尝试使用以下代码从远程主机获取 json 数据。但是失败了，我正在使用 jquery get json

我的代码

```
<script type="text/javascript" language="javascript">

$(document).ready(function() {
  $("#driver").click(function(event){
      $.getJSON('http://108.167.132.194/~softnet/json.php?callback=?', function(jd) {
         $('#stage').html('<p> Name: ' + jd.name + '</p>');
         $('#stage').append('<p>Password : ' + jd.password+ '</p>');

      });
  });
});

</script> 
```

当我尝试从本地主机获取数据时，它工作得很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:53:20.730

您应该查看跨域 ajax 调用。您尝试做的事情不会直接起作用。您要么必须使用 JSONP，要么将 ips/hosts 添加到允许的域列表中。

从您的客户端代码中我可以看到您正在使用 JSONP，但您的服务器端不支持它。您还需要在服务器端实现它以支持 JSNOP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:07:53.303

您的服务器需要将响应包装在回调中，以便浏览器不会立即评估它。然后应该将回调参数设置为返回的回调的名称。

# c# - 将旧的 C/C++ 库与 Windows 8 Metro 应用程序一起使用

> ID：12894063
> 
> 赞同：3
> 
> 时间：2012-10-15T10:51:18.713
> 
> 标签：c#, windows-8, microsoft-metro

我正在尝试使用用 C/C++ 编写的开源库 ( [Linphone ) 为 Windows 8 / Windows Phone 8 创建一个应用程序（在 C# 中）。](http://www.linphone.org/)我尝试在VS11中导入它，没有成功。我有所有可能需要的 .dll 文件。

有没有办法在有或没有 VS11 的情况下使用这个库来创建我的应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T03:32:47.503

您不能在 Windows 8 应用商店应用中使用使用旧版 Visual Studio（早于 Visual Studio 2012）构建的二进制文件。

原因是因为使用 Visual Studio 2010 构建的二进制文件将依赖于 Visual Studio 2010 中的 C++ 运行时 DLL。而您的应用程序的其余部分是使用 Visual Studio 2012 编写的，因此它将依赖于 C++ 运行时 DLL来自 Visual Studio 2012。后者可从 Windows 应用商店自动获得（[阅读此文](http://blogs.msdn.com/b/vcblog/archive/2012/09/28/10354327.aspx)了解更多详细信息）。但是前者在 Windows 应用商店中不可用。此外，您的应用无法表达对 VC2010 运行时的依赖。在应用程序包中包含 VC2010 运行时 DLL 也将不起作用，因为该包将在商店上传时被拒绝。

因此，最好的选择是严格使用 Visual Studio 2012 为您的 Windows 8 应用商店应用程序构建所有源代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T10:53:48.900

您不会“导入”非托管 dll。相反，您使用 PINvoke 调用他们的方法。

看到这个：

[http://msdn.microsoft.com/en-us/magazine/cc164123.aspx](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)

# floating-point - VHDL：需要库

> ID：12894064
> 
> 赞同：2
> 
> 时间：2012-10-15T10:51:33.430
> 
> 标签：floating-point, vhdl, ieee-754

我生成了随机浮点数（十进制格式）并将它们保存在一个文本文件中。我编写了一个代码来用 VHDL 读取该文件。现在我想将这些浮点数转换为 IEEE 格式（32 bir 或 64 位）。是否有任何可用的图书馆可以用于我的工作。或者VHDL中有任何代码。？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:40:31.427

有一个VHDL浮点包：

[http://vhdl.org/fphdl/index.html](http://vhdl.org/fphdl/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:31:20.390

您可以通过纯软件脚本将浮点数转换为 IEEE 754（例如 1.0 -> 0x3F800000）：

1.  matlab脚本：

    Matlab 程序将实数转换为 IEEE 754 浮点格式的数字 [http://users.eecs.northwestern.edu/~ismail/courses/c92/fpu/](http://users.eecs.northwestern.edu/~ismail/courses/c92/fpu/)

2.  lisp 脚本：[http ://common-lisp.net/project/ieee-floats/](http://common-lisp.net/project/ieee-floats/)

    使用ieee-floats 中定义的 **encode-float32 ，可以进行快速转换。**

    ```
    (defun fix2float (fp)
         (format t "~%~x~T~x" fp (ieee-floats:encode-float32 fp)))
     (fix2float 1.1) 
    ```

至于硬件库，Vfloat（王晓军，2010）值得一试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T11:18:39.770

如果您想在 VHDL 中使用随机数，为什么不使用 *math_real* 库中的 UNIFORM 函数呢？Uniform 是你的函数，用法在定义中解释

```
procedure UNIFORM (variable Seed1,Seed2:inout integer; variable X:out real);
    -- returns a pseudo-random number with uniform distribution in the 
    -- interval (0.0, 1.0).
    -- Before the first call to UNIFORM, the seed values (Seed1, Seed2) must
    -- be initialized to values in the range [1, 2147483562] and 
    -- [1, 2147483398] respectively.  The seed values are modified after 
    -- each call to UNIFORM.
    -- This random number generator is portable for 32-bit computers, and
    -- it has period ~2.30584*(10**18) for each set of seed values.
    --
    -- For VHDL-1992, the seeds will be global variables, functions to 
    -- initialize their values (INIT_SEED) will be provided, and the UNIFORM
    -- procedure call will be modified accordingly. 
```

如果这不是您需要的，请使用 *std_textio* 包来读取数据：

```
procedure READ(L:inout LINE; VALUE: out real; GOOD : out BOOLEAN);
procedure READ(L:inout LINE; VALUE: out real); 
```

# datatables - DataTables输入字段中的jQuery自动完成控件

> ID：12894065
> 
> 赞同：3
> 
> 时间：2012-10-15T10:51:42.690
> 
> 标签：datatables, jquery-autocomplete

我有一个内联[可编辑](http://goo.gl/71r6vk)行。

双击 DataTables 行时，该行更改为可编辑。在点击输入时，已编辑的行被保存并恢复为表格行。现在我需要使用 jQuery 插件将可编辑的输入字段更改为自动完成。[这是我的小提琴。](http://goo.gl/71r6vk)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-13T19:55:13.400

### 原因

您忘记了包含 jQuery UI CSS 和 JS 文件。

### 解决方案

用于调用自动完成小部件的更正代码如下所示。

```
$("#typ")
   .focus()
   .autocomplete({
      source: type1
   }); 
```

### 演示

有关代码和演示，请参阅[此 jsFiddle](http://jsfiddle.net/KVSDs/14/)。

# c++ - c++字符串到uint8_t

> ID：12894071
> 
> 赞同：1
> 
> 时间：2012-10-15T10:52:19.680
> 
> 标签：c++, string, casting

我已经下载了一张图片，它保存在`std::string`. 现在我想在以下条件下使用/打开它：

```
typedef uint8_t byte //1 byte unsigned integer type.  
static open(const byte * data, long size) 
```

我如何从`string`to投射`byte*`？

/编辑：
我已经尝试过这个：

```
_data = std::vector<byte>(s.begin(), s.end()); 
//_data = std::vector<uint8_t>(s.begin(), s.end());  //also fails, same error
_p = &_data[0];
open(_p, _data.size()) 
```

但我得到：
对'open（unsigned char const *，long）'的未定义引用
为什么它将字节错误地解释为char？！

/ EDIT2：只是为了测试它，我更改为函数调用

```
 open(*_p, _data.size()) 
```

但后来我得到：

```
error: no matching function for call to 'open(unsigned char&, size_t)'
[...] open(const byte*, long int) <near match> 
```

所以这个函数肯定找到了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:58:50.087

两种可能：

1）共同的。在您的系统上，`char`要么是 2 的补码，要么是无符号的，因此将字符读取为无符号字符是“安全的”，并且（如果`char`有符号）结果与从有符号转换为无符号相同。

在这种情况下，使用`reinterpret_cast<const uint8_t*>(string.data())`.

2）不常见的。在您的系统上，`char`是有符号的而不是 2 的补码，因此对于`char *ptr`指向负值的结果`*(uint8_t*)ptr`不等于`(uint8_t)(*ptr)`. 然后取决于`open`对数据的实际处理，上面可能没问题，或者您可能必须将数据从字符串复制到 的容器中`uint8_t`，随时转换。例如，`vector<uint8_t> v(string.begin(), string.end());`。然后`&v[0]` *在长度不为 0 的情况下*使用（与字符串不同，即使您从不取消引用，也不允许将指针指向空向量的数据）。

非 2 的补码系统几乎不存在，即使有一个系统，我认为它也不太可能`char`提供签名而不是 2 的补码的系统`uint8_t`（因为如果它提供，那么它也必须提供`int8_t`）。所以（2）只服务于迂腐的完整性。

> 为什么它将 byte 错误地解释为 char

没错，是您系统上`uint8_t`的 typedef 。`unsigned char`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:54:13.237

```
std::string string_with_image;

string_with_image.data(); 
```

# parallel-processing - x86 中“PAUSE”指令的目的是什么？

> ID：12894078
> 
> 赞同：68
> 
> 时间：2012-10-15T10:52:44.443
> 
> 标签：parallel-processing, x86, x86-64, intel, critical-section

我正在尝试创建一个自旋锁的愚蠢版本。浏览网页时，我在 x86 中发现了一条名为“PAUSE”的汇编指令，它用于向处理器提示当前 CPU 上正在运行自旋锁。英特尔手册和其他可用信息指出

> 处理器在大多数情况下使用此提示来避免内存顺序冲突，从而大大提高处理器性能。因此，建议在所有自旋等待循环中放置一条 PAUSE 指令。该文档还提到“等待（一些延迟）”是指令的伪实现。

上一段的最后一行很直观。如果我没有成功抓住锁，我必须等待一段时间才能再次抓住锁。

但是，在自旋锁的情况下，内存顺序违规是什么意思？“内存顺序违规”是否意味着自旋锁后指令的*推测性加载/存储不正确？*

自旋锁问题之前在堆栈溢出时被问过，但内存顺序违规问题仍未得到解答（至少在我的理解中）。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-10-15T21:56:16.123

想象一下，处理器将如何执行典型的自旋等待循环：

```
1 Spin_Lock:
2    CMP lockvar, 0   ; Check if lock is free
3    JE Get_Lock
4    JMP Spin_Lock
5 Get_Lock: 
```

在几次迭代之后，分支预测器将预测条件分支 (3) 将永远不会被采用，并且管道将充满 CMP 指令 (2)。这种情况一直持续到最后另一个处理器将零写入 lockvar。在这一点上，我们的管道充满了推测性的（即尚未提交的）CMP 指令，其中一些指令已经读取了 lockvar 并向下面的条件分支 (3) 报告了一个（不正确的）非零结果（也是推测性的）。这是发生内存顺序冲突的时候。每当处理器“看到”外部写入（来自另一个处理器的写入）时，它就会在其管道中搜索推测性地访问相同内存位置但尚未提交的指令。如果发现任何此类指令，则处理器的推测状态无效，并通过流水线刷新擦除。

不幸的是，这种情况（很可能）会在每次处理器等待自旋锁时重复，并使这些锁比它们应有的速度慢得多。

输入暂停指令：

```
1 Spin_Lock:
2    CMP lockvar, 0   ; Check if lock is free
3    JE Get_Lock
4    PAUSE            ; Wait for memory pipeline to become empty
5    JMP Spin_Lock
6 Get_Lock: 
```

PAUSE 指令将对内存读取“取消流水线化”，因此流水线不会像第一个示例中那样充满推测性 CMP (2) 指令。（即它可能会阻塞流水线，直到所有较旧的内存指令都被提交。）因为 CMP 指令 (2) 顺序执行，所以在 CMP 指令 (2) 读取之后发生外部写入不太可能（即时间窗口更短） lockvar 但在 CMP 提交之前。

当然，“去流水线”也会在自旋锁中浪费更少的能量，并且在超线程的情况下，它不会浪费其他线程可以更好地使用的资源。另一方面，在每个循环退出之前，仍然存在等待发生的分支错误预测。英特尔的文档并未建议 PAUSE 消除管道刷新，但谁知道......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-08-01T18:44:40.483

正如@Mackie 所说，管道将充满`cmp`s。当另一个内核写入时，英特尔将不得不刷新这些`cmp`s，这是一项昂贵的操作。如果 CPU 没有刷新它，那么你有一个内存顺序违规。此类违规的示例如下：

（这从 lock1 = lock2 = lock3 = var = 1 开始）

线程 1：

```
spin:
cmp lock1, 0
jne spin
cmp lock3, 0 # lock3 should be zero, Thread 2 already ran.
je end # Thus I take this path
mov var, 0 # And this is never run
end: 
```

线程 2：

```
mov lock3, 0
mov lock1, 0
mov ebx, var # I should know that var is 1 here. 
```

首先，考虑线程 1：

如果`cmp lock1, 0; jne spin`分支预测 lock1 不为零，它会添加`cmp lock3, 0`到管道中。

在管道中，`cmp lock3, 0`读取 lock3 并发现它等于 1。

现在，假设线程 1 正在度过美好的时光，线程 2 开始快速运行：

```
lock3 = 0
lock1 = 0 
```

现在，让我们回到线程 1：

假设`cmp lock1, 0`finally 读取 lock1，发现 lock1 为 0，并且对其分支预测能力感到满意。

该命令提交，并且没有任何内容被刷新。正确的分支预测意味着没有任何内容被刷新，即使是乱序读取，因为处理器推断没有内部依赖关系。在 CPU 的眼中，lock3 不依赖于 lock1，所以这一切都可以。

现在，`cmp lock3, 0`正确读取 lock3 等于 1 的 提交。

`je end`不被采取，并`mov var, 0`执行。

在线程 3 中，`ebx`等于 0。这应该是不可能的。这是英特尔必须补偿的内存顺序违规。

* * *

现在，英特尔为避免这种无效行为而采取的解决方案是刷新。在`lock3 = 0`线程 2 上运行时，它会强制线程 1 刷新使用 lock3 的指令。在这种情况下，刷新意味着线程 1 不会向管道添加指令，直到所有使用 lock3 的指令都已提交。在线程 1`cmp lock3`可以提交之前，`cmp lock1`必须提交。当`cmp lock1`尝试提交时，它读取到 lock1 实际上等于 1，并且分支预测失败。这会导致`cmp`被抛出。现在线程 1 已刷新，`lock3`线程 1 缓存中的位置设置为`0`，然后线程 1 继续执行（等待上`lock1`）。线程 2 现在收到通知，所有其他内核已刷新使用`lock3`并更新了它们的缓存，因此线程 2 继续执行（同时它会执行独立的语句，但下一条指令是另一个写入，因此它可能必须挂起，除非其他内核有一个队列来保存挂起的`lock1 = 0`写入）。

整个过程很昂贵，因此暂停。PAUSE 有助于线程 1，它现在可以立即从即将发生的分支错误预测中恢复，并且它不必在正确分支之前刷新其管道。PAUSE 同样有助于线程 2，它不必等待线程 1 的刷新（如前所述，我不确定这个实现细节，但如果线程 2 尝试写入太多其他内核使用的锁，线程 2 将最终必须等待冲洗）。

一个重要的理解是，虽然在我的示例中，刷新是必需的，但在 Mackie 的示例中，它不是。但是，CPU 无法知道（它根本不分析代码，除了检查连续语句依赖关系和分支预测缓存），因此 CPU 将刷新`lockvar`在 Mackie 示例中访问的指令，就像在我的示例中一样，以保证正确性。

# objective-c - 升级到 Xcode 4.4.1 后缺少框架

> ID：12894079
> 
> 赞同：0
> 
> 时间：2012-10-15T10:52:45.830
> 
> 标签：objective-c, ios, xcode

我升级到 Xcode 4.4.1。现在，我正在尝试添加框架 QuartzCore.framework，但是在设备上运行应用程序时找不到 Quartz.framework，它在模拟器上运行良好。

经过分析，我得到，路径中缺少框架：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneOS5.1.sdk/ 
```

即使 ，它也可以在：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ 
```

谁能告诉我，出了什么问题？如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:05:16.967

尝试在 Build Phases 下的 Linked Libraries 中重新添加 QuarzCore。如果您使用的是 6.0 设备，则需要将 Xcode 更新到 4.5 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:49:52.723

如果您正在为 iOS 开发，您可能需要**QuartzCore.framework**（而不是 Quartz.framework）。

# iphone - CCMotionStreak 直线

> ID：12894081
> 
> 赞同：-1
> 
> 时间：2012-10-15T10:52:56.143
> 
> 标签：iphone, cocos2d-iphone

我喜欢 CCMotionStreak 的效果，我正在看它来替换绘图功能。但是你能用它做一条直线而不是跟随触摸的路径吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T11:02:06.533

看到这个波纹管链接，你可以从这个教程中得到一些想法..

[http://www.merowing.info/2012/04/drawing-smooth-lines-with-cocos2d-ios-inspired-by-paper/](http://www.merowing.info/2012/04/drawing-smooth-lines-with-cocos2d-ios-inspired-by-paper/)

也看到这个。。

1.  [http://www.supersuraccoon-cocos2d.com/2011/11/03/ensimple-line-follow-demo-ccmotionstreakzh-ccmotionstreakja-ccmotionstreak/](http://www.supersuraccoon-cocos2d.com/2011/11/03/ensimple-line-follow-demo-ccmotionstreakzh-ccmotionstreakja-ccmotionstreak/)

2.  [http://www.scribd.com/doc/101213799/30/CCMotionStreak](http://www.scribd.com/doc/101213799/30/CCMotionStreak)

# internet-explorer - 如何防止IE9在兼容模式下渲染内网站点

> ID：12894082
> 
> 赞同：26
> 
> 时间：2012-10-15T10:52:55.357
> 
> 标签：internet-explorer, internet-explorer-9, compatibility-mode, ie-compatibility-mode

IE9 有一个奇怪的问题，它以兼容模式呈现 Intranet 站点。

有谁知道如何防止这种情况发生？

注意：我不是在寻找一种方法来阻止它在单个用户的机器上，而是一些程序化的方法来阻止站点以兼容模式呈现。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-16T08:40:39.970

[经过详尽的搜索，我在这个博客](http://tesmond.blogspot.co.at/2011/10/ie9-intranet-compatibility-mode-in.html)上找到了如何成功阻止内网站点在 IE9 中以兼容模式呈现：

**来自 Tesmond 的博客**

IE9 中有 2 个怪癖会导致兼容模式保持有效。X-UA-Compatible 元元素必须是 head 部分中的第一个元元素。X-UA-Compatible 元元素之前不能有条件 IE 语句。这意味着，如果您使用 Paul Irish 出色的 HTML5 样板，那么在具有默认 IE9 设置的 Intranet 上，您的网站将以兼容模式显示。您需要从以下更改样板的开始：-

```
<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

至：

```
<!doctype html>
<html class="no-js" lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta charset="utf-8"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-18T02:47:21.003

根据@novicePrgrmr 的回答，似乎有一种解决方法可以让 IE9 在 IE7 模式下加载 Intranet。[虽然这仍然会触发兼容模式，但我发现对Paul Irish 的 HTML5 样板标记](http://html5boilerplate.com/)稍作修改至少允许 IE9 以 IE9 标准呈现 Intranet：

```
<!doctype html>
<html class="no-js" lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta charset="utf-8">
</head>
<!--[if lt IE 7]>   <body class="home lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>      <body class="home lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>      <body class="home lt-ie9"> <![endif]-->
<!--[if IE 9]>      <body class="home lt-ie10"><![endif]-->
<!--[if gt IE 9]><!--> <body class="home"> <!--<![endif]-->

    <p>content</p>

</body>
</html> 
```

这仍然是有效的 HTML，并且现有的 IE 特定的 CSS 应该仍然可以正常工作，前提是您使用`.lt-ie`而不是`html.lt-ie`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T10:59:00.530

这可以通过添加一个简单的元标记来完成

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

另一种方法是将此代码添加到您的 .htaccess 文件中！

```
# ----------------------------------------------------------------------
# Better website experience for IE users
# ----------------------------------------------------------------------

# Force the latest IE version, in various cases when it may fall back to IE7 mode
#  github.com/rails/rails/commit/123eb25#commitcomment-118920
# Use ChromeFrame if it's installed for a better experience for the poor IE folk

<IfModule mod_headers.c>
  Header set X-UA-Compatible "IE=Edge,chrome=1"
  # mod_headers can't match by content-type, but we don't want to send this header on *everything*...
  <FilesMatch "\.(js|css|gif|png|jpe?g|pdf|xml|oga|ogg|m4a|ogv|mp4|m4v|webm|svg|svgz|eot|ttf|otf|woff|ico|webp|appcache|manifest|htc|crx|oex|xpi|safariextz|vcf)$" >
    Header unset X-UA-Compatible
  </FilesMatch>
</IfModule> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T10:59:23.760

如果您可以将代码添加到主页，则只需添加以下内容：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

到您网站的标题。

（您也可以使用`<meta http-equiv="X-UA-Compatible" content="IE=9">`to force IE9-Renderer）这将强制 IE9 以标准模式呈现。

另一种方法是使用另一种文档类型：将其放在代码的顶部：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd"> 
```

# php - 使用 html 表的奇怪输出

> ID：12894085
> 
> 赞同：1
> 
> 时间：2012-10-15T10:53:13.757
> 
> 标签：php, html, loops, html-table

这是php代码：

```
<?php
require_once('../phpFunctions/funciones.php');
conectar('localhost', 'root', '*******', 'tutoriales');

echo "<table cellspacing=\"0\" border=\"1\" cellpadding=\"0\">";
for ($x = 0; $x <= 9; $x++) {
    echo "<tr>";
    for ($y = 0; $y <= 9; $y++) {
        $numero = $x."".$y;   
        $region = (int)$numero;
        $sentencia = @mysql_query('select type,region from tutorial1_estrellas where region='.$region.'');
        $lanzar = @mysql_fetch_object($sentencia);
        if($lanzar[1]==$region){
            switch ($lanzar[0]) {
            case "red":
            echo "<td><img src=\"../images/redRegion.png\"></td>";   
            break;
            case "yellow":
            echo "<td><img src=\"../images/yellowRegion.png\"></td>";   
            break;
            case "blue":
            echo "<td><img src=\"../images/blueRegion.png\"></td>";   
            break;
        }
    } else  
        echo "<td><img src=\"../images/voidRegion.png\"></td>";   
    }   
    echo "</tr>";
}
echo "</table>";
?> 
```

HTML 输出看起来像一个巨大的 ECHO 但不是正常的表，这是一个错误还是 php 中的正常输出？我是 PHP 新手，所以请多多包涵。

输出：

`"; for ($x = 0; $x "; for ($y = 0; $y if($lanzar[1]==$region){ switch ($lanzar[0]) { case "red": echo ""; break; case "yellow": echo ""; break; case "blue": echo ""; break; } }else echo ""; } echo ""; } echo ""; ?>`

该循环创建了一个 10x10 的表，其中每个单元格的图像由交换机中的 SQL 查询的结果定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:10:03.023

请确保您的服务器已正确设置为运行 PHP 而不是显示它。从输出看来，您的问题是您的 Web 服务器没有运行 PHP 代码，因此您的浏览器尝试将您的 PHP 代码显示为 HTML。

创建一个 PHP 文件（即：test.php）并将以下内容放入其中：

```
<?php phpinfo(); ?> 
```

然后尝试获取此文件。如果输出不是带有 PHP 设置的表格，那么您的 Web 服务器设置有问题。

# php - Yii 中的多个 SQL 语句

> ID：12894089
> 
> 赞同：0
> 
> 时间：2012-10-15T10:53:29.117
> 
> 标签：php, sql, yii, composite-primary-key

我正在尝试在 yii 中执行多个 sql 语句，这是为了减少到服务器的往返。这是针对称为利基专业化的领域。一个用户最多可以输入三个条目，但是该字段是可选的。这是代码：

```
$sql = " Delete from cur_niche 
         where userid =:id ; " ;
$var2 = array_filter($object->nspecial) ;
  if(!empty($var2))                 
                    {    $str = ""  ; 
                         $i = 0 ; 
                         foreach($var2 as $n) 
                         {   if($i==0)
                         $str.= "(:id,:n".$i.")" ;
                         else 
                         $str.= ", (:id,:n".$i.")" ; 
                         $i++ ;  
                         }
        $sql .= "Insert into cur_niche (userid,nspecial) Values ".$str." ; " ;
                    }
$command = Yii::app()->db->createCommand($sql)  ;
 $command->bindParam(":id",$id,PDO::PARAM_STR) ;
  if(!empty($var2))                     
    {     $i = 0 ;
         foreach($var2 as $n) 
            { 
             $str = ":n".$i ; 

            $command->bindParam($str,$n,PDO::PARAM_STR) ;
              $i++ ; 
                }
        }   
$result = $command->execute() && $result ; 
```

我已尝试转储所有变量，sql 语句格式正确，$object 具有来自表单的正确数据，在绑定中 $str 工作正常。但是我面临以下问题：1）如果利基特殊化数组（$object->nspecial）中只有一个条目，则该条目工作正常。2) 但是如果填充了多个字段，则无法执行插入，这是因为 userid 和 nspecial 字段形成了复合主键。

复合主键是否依赖于形成唯一组合的两个值（假设用户在各个字段中输入唯一值）？如果我删除主键约束，它只会复制数据库中包含两行的一个字段的值。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:26:34.990

发现错误。对于“foreach”循环，我应该按值而不是按参数绑定，因为它引用参数的最新值，因此重复值。

# python - 如何获取部分中每个项目的值？

> ID：12894094
> 
> 赞同：0
> 
> 时间：2012-10-15T10:53:37.277
> 
> 标签：python, list, parsing, configparser

我有一个包含一个部分的配置文件，以及具有不同值的多个项目。我想将所有值（而不是变量）放入列表中。例如：

例子.ini

```
[main]
apple: green
orange: orange
strawberry: red
banana: yellow 
```

例子.py

```
config = ConfigParser.ConfigParser()
config.read('example.ini')

values = config.values('main')
for v in values:
    print v 
```

那将打印：

```
green
orange
red
yellow 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:57:21.087

使用带有列表理解的[`.items(section)`方法：](http://docs.python.org/library/configparser.html#ConfigParser.RawConfigParser.items)

```
values = [v for k, v in config.items('main')] 
```

# nhibernate - queryover 并且在列表过滤器中

> ID：12894096
> 
> 赞同：0
> 
> 时间：2012-10-15T10:53:39.277
> 
> 标签：nhibernate, nhibernate-criteria

我真的不明白如何使用 nhibernate queryover 执行此查询，我目前有：

```
var users= _session.QueryOver<User>().Future();

var comps = _session.QueryOver<UserCompetency>()
                .Where(x => users.Any(match => x.UserID == match.UserID)).Future(); 
```

一个异常不断被抛出，使用 linq to sql 这工作得很好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:23:11.290

QueryOver 不是 LINQ。它不支持任意表达式。

`Query`如果这是您需要的，请使用扩展方法。

# r - gWidgets：调整组合框的大小以适应内容

> ID：12894097
> 
> 赞同：0
> 
> 时间：2012-10-15T10:53:40.420
> 
> 标签：r, gtk, gwidgets

我使用 gWidgets 和 RGtk2 创建了一个 GUI。GUI 的一部分是带有一组 gcombobox 的布局。这些框最初是空的，一旦导入文件就会被填充。

在带有 Gtk+ 通过 X11 运行的 mac 上，组合框的宽度被调整大小以适合组合框中最长的文本字符串。在 Windows 上，这不会发生，并且组合框有滚动条来容纳长文本字符串（参见图片）。

![Windows 上的组合框](../Images/1f23ba46648bc9796cab73d97e55960b.png)

![Mac 上的组合框](../Images/ed5f7ee7583fe96ad8acef24b37b332d.png)

我尝试关闭和打开可见性以强制重绘，但大小保持固定。

反正有没有强制在 Windows 机器上调整大小？

包含相关小部件的容器的代码是：

```
optionsBox <- ggroup(cont=controlGroup)
addSpring(optionsBox)
options <- glayout(cont=optionsBox, spacing=5, fill='y')
optList <- list()
options[1, 1, anchor=c(1,0)] <- 'Category:'
options[1, 2, anchor=c(-1,0)] <- optList$category <- gcombobox(category, cont=options)
options[2, 1, anchor=c(1,0)] <- 'Order:'
options[2, 2, anchor=c(-1,0)] <- optList$order <- gcombobox(order, cont=options)
options[2, 3, anchor=c(1,0)] <- optList$numeric <- gcheckbox('numeric', checked=TRUE)
options[3, 1, anchor=c(1,0)] <- 'Plottype:'
options[3, 2, anchor=c(-1,0)] <- optList$plottype <- gcombobox(c('Bar', 'Line'), cont=options)
addSpring(optionsBox) 
```

最好的祝愿

托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:49:18.533

我无法在 Windows 上轻松测试这个，但有一些事情应该会有所帮助。首先，确保`glayout`对象的父容器没有限制初始大小。（在下面的示例中尝试设置`do_expand=FALSE`以查看会发生什么。）除非您使用`size<-`方法设置小部件的大小（不是最佳用法，但有时您可以做所有）初始大小将来自满足小部件的大小请求.

```
library(gWidgets)
options(guiToolkit="RGtk2")
w <- gwindow()
g <- ggroup(cont=w)
do_expand=TRUE
options <- glayout(cont=g, spacing=5, expand=do_expand)
items <- ""

options[1,1] = "vanilla"
options[1,2] <- gcombobox(items, cont=options)

options[2,1] = "expand"
options[2,2, expand=TRUE] <- gcombobox(items, cont=options)

options[3,1] = "expand, fill"
options[3,2, expand=TRUE, fill="y"] <- gcombobox(items, cont=options)

options[4,1] = "size"
options[4,2] <- (cb <- gcombobox(items, cont=options))
size(cb) <- c(250, -1)

## populate comboboxes 
items <- state.name 
sapply(options[,2], function(i) i[] <- items) 
```

# mysql - 设计一个每个用户都有自己的盐的数据库

> ID：12894101
> 
> 赞同：1
> 
> 时间：2012-10-15T10:53:48.990
> 
> 标签：mysql, database, authentication, normalization

我想建立一个身份验证系统，每个用户都有自己的盐 - 每个密码都用它所属的用户的盐进行哈希处理。

我应该如何设计数据库模式？

这是我想出的一个设计，但我不确定，这`hash`取决于`salt`这违反了[第三范式](http://en.wikipedia.org/wiki/Third_normal_form)：

```
users(id, salt, hash, ...) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:44:58.557

虽然我不是遵守规范化规则的坚持者，但我了解您来自哪里。

要删除有问题的列并保留其功能，您可以考虑简单地将盐和哈希连接到一个字段中；如果一个或两个值保持相同的长度，则不需要分隔符。

或者，您可以使用 Bcrypt 作为您的密码哈希：哈希采用随机盐以及密码和成本因子；它会生成一个长字符串，您可以将其存储在密码字段中。查看 ircmaxell 的博客，了解他在这个主题上的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:24:11.703

你的设计很好。很多系统都使用这个想法。它并没有完全破坏 3NF，因为 Hash 并不严格依赖（可以这么说）盐，它只是从中计算出来的（连同密码）。

# c - 在 C 中修改 fopen

> ID：12894106
> 
> 赞同：0
> 
> 时间：2012-10-15T10:53:54.330
> 
> 标签：c

请我想修改：

```
f = fopen("/home/file.txt", "w"); 
```

有以下结果：

```
f = fopen("/home/%s.txt", "w",argv[1]); 
```

您对 fopen 中的选项有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T10:56:51.340

我建议这样做：

```
char filename[MAX_PATH];
snprintf(filename, sizeof(filename), "/home/%s.txt", argv[1]);
f = fopen(filename, "w"); 
```

修改`fopen`不是一项简单的任务，尽管您可以使用上述操作编写一个包装器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T11:04:50.090

只需将调用包装`fopen`在一个函数中：

```
FILE* my_fopen(char filename[]) {
    static char buffer[MAXIMUM_SIZE];
    snprintf(buffer, MAXIMUM_SIZE, "/home/%s.txt", filename);
    return fopen(buffer, "w");
} 
```

那么你所要做的就是打电话`my_fopen("myfile.txt")`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:57:14.443

`fopen()`不采用格式字符串，因此您必须事先构造它：

```
char buf[MAX_PATH];
snprintf(buf, sizeof(buf), "/home/%s.txt", argv[1]);
FILE *f = fopen(buf, "w"); 
```

# image - Magento 在结帐时无法识别电子邮件模板中的安全属性

> ID：12894109
> 
> 赞同：0
> 
> 时间：2012-10-15T10:54:12.630
> 
> 标签：image, email, magento, https

我有一个电子邮件模板，如果客户在 Magento Enterprise 版本中进行结帐，将发送该电子邮件模板。因此，我在电子邮件模板中使用以下代码：

```
<img src="{{skin url='images/myImage.jpg' _secure=0 _area='frontend' _theme='myTheme'}}" /> 
```

那里说_secure = 0，但我仍然将图像作为https。有趣的是，如果我在后端的订单项下重新发送电子邮件，我会得到图像为 http。那么为什么我在结帐时将图像作为 https 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:42:57.090

我没有在上面测试过你的代码，但如果它不适合你，你可以试试

使用以下代码在模板文件夹中创建 email_image.phtml

```
$img = $this->getData('url');
echo '<img src="<?php echo $this->getSkinUrl($img, array('_secure'=>false)); ?>" />';
// and any other option you want to add above 
```

然后在您的静态/电子邮件块中

```
{{block type="core/template" url="images/myImage.jpg" template="path/to/file/email_image.phtml"}} 
```

# jquery - slideToggle 一次一个的分类元素

> ID：12894112
> 
> 赞同：2
> 
> 时间：2012-10-15T10:54:19.600
> 
> 标签：jquery, css

我的html：

```
<div class="showOnReady">*content*</div> 
```

我的jQuery：

```
$(document).ready(function () {

        $(".showOnReady").delay(3000).each(function () {
            $(this).slideToggle("slow");        
        });
}); 
```

问题是它们都同时发生。延迟工作正常，它们直到页面加载后 3 秒才会出现，但我希望它们一个接一个地滑动切换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:57:00.910

您可以使用它们`index`来增加每个动画之间的延迟，例如：

```
$(document).ready(function () {
        $(".showOnReady").delay(3000).each(function (i) {
            var del = i*500;
            $(this).delay(del).slideToggle(500);        
        });
});​ 
```

**[演示](http://jsfiddle.net/gionaf/DVBS7/)**

# java - 如何以同步方式使用ExpectJ（等待未知内容的答案）？

> ID：12894113
> 
> 赞同：0
> 
> 时间：2012-10-15T10:54:19.763
> 
> 标签：java, ssh, expectj

我的 Java 应用程序必须像这样工作：

*   用户在 GUI 中选择 bash 命令并按“发送”。
*   应用程序为每个命令返回不同且独立的答案（例如，我们可以将它们存储在不同的文件中）。
*   每个命令都以交互方式运行，而不是批量运行（不能像“ls\n pwd \n”等）
*   在每个命令之后，应用程序将等待并检查结果是否正常。如果是这样，它将发送下一个命令。
*   我们需要在远程主机上执行 su 。

我用过ExpectJ（对输出流做了一点修改）。它已经解决了第 1、3、4、5 点。

但是第 2 点存在问题。在我的应用程序中，我需要得到单独的答案。但我们不会知道它们的长度。命令提示符可以不同。任何人都知道如何“破解”ExpectJ，所以它会更加同步吗？我正在寻找这样的行为：发送，等待完整答案，发送，等待......我尝试了一些基本的同步技巧，但这通常会导致超时和连接丢失。

这个问题与我的老问题有关：

[Java 库通过 ssh 在远程服务器上运行多个不相关的命令](https://stackoverflow.com/questions/12690248/java-library-to-run-multiple-unrelated-commands-on-a-remote-server-via-ssh)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:16:42.553

问题基本上是expectj同时发送和监听，在不同的线程中缓冲输入和输出，所以你必须知道响应何时结束，这样你就可以分隔每个请求/响应块。如果您不关心期望“交互”模式，您可以尝试破解 expect4J、expect-for-java ( [https://github.com/ronniedong/Expect-for-Java](https://github.com/ronniedong/Expect-for-Java) ) 甚至 apache mina sshd。

我现在面临着完全相同的问题，因为我需要interact()，所以我现在没有任何其他选择。所以，下面的这个解决方案并不优雅，但可以完成这项工作。太糟糕了，我们没有一个像样的期望 java 实现。我希望我们会在 java 8 中，当（我希望）我们会关闭。

```
 ExpectJ ex = new ExpectJ(50);
    Spawn spawn = ex.spawn(new SshSpawn("192.168.56.101", 22, "alice", "password"));
    String command = "hostname -s;expr 123456788 + 1";
    spawn.send(command+"\n");
    spawn.expect("123456789");
    String lsResults = spawn.getCurrentStandardOutContents().split("123456788 \\+ 1\r\n")[2].split("123456789")[0];
    String[] lsRows = lsResults.split("\r\n");
    for(int i=0;i<lsRows.length;i++){
        System.out.println(i+":"+lsRows[i]);
    } 
```

# asp.net-mvc-2 - 使用 List 数据类从多个表中检索值并在强类型视图中显示

> ID：12894114
> 
> 赞同：1
> 
> 时间：2012-10-15T10:54:19.977
> 
> 标签：asp.net-mvc-2

我有一个名为 Courses、CoursePreRequisites 的表和一个名为 PreRequisiteTracking 的第三个故事。一个特定的课程可以包含多个 PreRequisites，因此我无法在 Courses 表中传递外键，而是创建了 PreRequisiteTracking 表。

例如：A Course,say, Introduction to Java.This 可能有以下前提条件：OOPS,Basic Programming Knowledge。这些先决条件在创建新课程时在复选框中给出。现在我的问题是如何加入所有这些表并在视图中列出它们。我加入了所有这些表，但由于只传递了 Id，我无法检索 PreRequisites 以显示在视图中。

请帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:18:08.557

我得到了我帖子的答案。

我所做的是在我的班级中我将一个属性声明为：

```
enter code here
`public class CourseModel{`
`public string coursename{set;get;}`
`public string coursecode{set;get;}`
`public string Benefits{set;get;}`
`public IEnumerable<CoursePreRequisites> display{set;get;}`
       } 
```

这里 CoursePreRequisites 是我希望在视图中显示其值的表。

然后在我给出的详细信息操作中的控制器中：

```
enter code here:var query=(from cours in db.courses
       join level in db.courselevels on cours.levelid equals level.levelid
       where cours.courseid==id
       select new CourseModel
       {
          coursename=cours.CourseName,
          coursecode=cours.CourseCode,
          Benefits=cours.Benefits,
          display=(from courss in db.course
                   join track in db.prerequisitetrack on courss.CourseId equals                                            track.CourseId
                    join prerequistes in db.courseprerequisite on prerequistes.prerequsiteId equals track.prerequsiteId
                    where track.courseid==id select prerequsite).AsEnumerable()
        }).First() as Models.CourseModel; 
```

然后创建一个 Class 类型的强类型视图并给出：

```
enter code here:<%foreach(var item in Model.display) {%>  
   <%:item.PreRequisites %> 
```

希望这对其他人有用。我试过了，它对我有用。

# android - 使用本机短信应用程序发送短信而不启动自身

> ID：12894120
> 
> 赞同：1
> 
> 时间：2012-10-15T10:54:35.700
> 
> 标签：android, android-intent, sms

我想发送短信，但不使用 SmsManager 类。我想用安卓手机上的原生短信应用程序来做。

这是一个转折点：我不想在执行此操作时启动本机应用程序。是否有某种格式的意图可以通过本机应用程序直接发送短信（给定短信正文和要发送到的电话号码）（用户无需单击“发送”）。

我用谷歌搜索了相同的内容，但所有结果和响应都只是启动了原生短信，等待用户手动发送短信。我已经看到这在某些应用程序中实现，例如“MightyText”，并希望在我的应用程序中实现。

请帮忙 ！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-23T12:40:21.557

使用 SmsManager 将通过系统发送短信，但不会像前面提到的那样将其放入短信内容提供程序中。因此，任何本机消息传递应用程序都不会看到它。

为此，您必须在通过 SmsManager 正常发送消息后通过 SMS 内容提供商手动添加它。这里有一些示例代码可以提供帮助：

```
ContentValues values = new ContentValues();
values.put("address", "+12345678"); // phone number to send
values.put("date", System.currentTimeMillis()+""); 
values.put("read", "1"); // if you want to mark is as unread set to 0
values.put("type", "2"); // 2 means sent message
values.put("body", "This is my message!");

Uri uri = Uri.parse("content://sms/");
Uri rowUri = context.getContentResolver().insert(uri,values); 
```

就这样。之后，您会注意到它已添加，并且本机消息传递应用程序正常显示它。

如果它适合您，请单击“接受”答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T04:23:38.670

好的，所以您想在不使用 SmsManager 的情况下发送 SMS，并且它应该显示在您的本地 SMS 应用程序列表中？

首先，您不能绕过**SmsManager**发送短信。如果您查看三星 Galaxy Nexus 的所有本机消息传递应用程序的源代码，它将在按钮单击时调用 SmsManager。

因此，上面发布的以下代码是正确的

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(phoneNumber, null, message, null, null); 
```

其次，发送消息后，原生应用将其放入**SMS ContentProvider中**

按照这个[如何在android中将短信保存到收件箱？](https://stackoverflow.com/questions/642076/how-to-save-sms-to-inbox-in-android)

需要注意的是，现在不支持添加此功能。因此，您可能不得不求助于黑客将其添加到已发送的框中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:22:53.477

如果您只有`ACTION_SENDTO`，那么当然会弹出任何可以发送的应用程序。

您需要为短信添加过滤器

*   带网址。见[https://stackoverflow.com/a/2372665/94363](https://stackoverflow.com/a/2372665/94363)
*   或内容类型[https://stackoverflow.com/a/10613013/94363](https://stackoverflow.com/a/10613013/94363)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T17:31:11.183

我在我正在做的一个项目中做了类似的事情。您需要使用[SmsManager](http://developer.android.com/reference/android/telephony/gsm/SmsManager.html)

会是这样的——

```
 SmsManager smsManager = SmsManager.getDefault();

        smsManager.sendTextMessage(phoneNumber, null, message, null, null); 
```

您可以使用它以编程方式发送 SMS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-12T07:29:38.963

试试这个：

```
String phoneNo = textPhoneNo.getText().toString();
String sms = textSMS.getText().toString();

try {
    SmsManager smsManager = SmsManager.getDefault();
    smsManager.sendTextMessage(phoneNo, null, sms, null, null);
    Toast.makeText(getApplicationContext(), "SMS Sent!",
        Toast.LENGTH_LONG).show();
} catch (Exception e) {
    Toast.makeText(getApplicationContext(),
        "SMS faild, please try again later!",
        Toast.LENGTH_LONG).show();
    e.printStackTrace();
} 
```

# java - 解析 xml 名称-值字段

> ID：12894121
> 
> 赞同：1
> 
> 时间：2012-10-15T10:54:41.987
> 
> 标签：java, xml, name-value

在我的 xml 中，我正在搜索特定名称并希望检索它们的值。

例如我有这个领域：

```
<n0:field>
   <n0:name n4:type="n3:string" xmlns:n3="http://www.w3.org/2001/XMLSchema"   xmlns:n4="http://www.w3.org/2001/XMLSchema-instance">LifePolicyID</n0:name> 
   <n0:value n6:type="n5:string" xmlns:n5="http://www.w3.org/2001/XMLSchema" xmlns:n6="http://www.w3.org/2001/XMLSchema-instance">1</n0:value> 
</n0:field> 
```

我尝试获取 LifePolicyID 名称的值。

有没有办法以编程方式做到这一点？

现在我像这样使用Xpath：

```
XPathExpression xpe = xpath.compile("//*[name/text()='" + name +"']/value"); 
```

在这种情况下，名称是 LifePolicyID。但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:58:30.483

你的代码似乎对我有用

```
String xml = 
    "<n0:field xmlns:n0='http://test/uri'>" +
    "  <n0:name n4:type='n3:string' xmlns:n3='http://www.w3.org/2001/XMLSchema'   xmlns:n4='http://www.w3.org/2001/XMLSchema-instance'>LifePolicyID</n0:name>" +
    "  <n0:value n6:type='n5:string' xmlns:n5='http://www.w3.org/2001/XMLSchema' xmlns:n6='http://www.w3.org/2001/XMLSchema-instance'>1</n0:value>" +
    "</n0:field>";
String name = "LifePolicyID";
XPath xpath = XPathFactory.newInstance().newXPath();
XPathExpression xpe = xpath.compile("//*[name/text()='" + name +"']/value");
Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new InputSource(new StringReader(xml)));
System.out.println(xpe.evaluate(doc)); 
```

# silverlight - Silverlight 使用 MVVM Light 框架在视图中切换视图

> ID：12894124
> 
> 赞同：2
> 
> 时间：2012-10-15T10:54:43.097
> 
> 标签：silverlight, view, mvvm-light, silverlight-5.0

我已经搜索并尝试了几天，最后必须在这里提出问题。我有一个 Silverlight 5 应用程序，使用 MVVM Light，我希望能够在主视图中动态切换视图。

为了简单起见，假设我有 2 个按钮。

Button1 将切换到 TestView1。

Button2 将切换到 TestView2。

```
 <Button Content="TestView1" Grid.Column="1" Command="{Binding CallTestView1Command}" HorizontalAlignment="Left" Margin="185,17,0,0" VerticalAlignment="Top" Width="75"/>
    <Button Content="TestView2" Grid.Column="1" Command="{Binding CallTestView2Command}" HorizontalAlignment="Left" Margin="280,17,0,0" VerticalAlignment="Top" Width="75"/> 
```

我这样做的方法是将relaycommand绑定到按钮，然后实例化相应视图的新视图模型。IE：

```
private RelayCommand _callTestView1Command;
    public RelayCommand CallTestView1Command
    {
        get
        {
            return _callTestView1Command ??
                   (_callTestView1Command = new RelayCommand(() =>
                       {
                           CurrentView = ViewModelLocator.NinjectKernel.Get<TestViewModel1>();
                       }));
        }
    } 
```

然后将 CurrentViewmodel 设置为新的视图模型。在 MainView 中，我已将 CurrentView 绑定到 ContentControl：

```
<Border x:Name="displayedView" Grid.Row="2">
        <ContentControl Content="{Binding CurrentView}" />
    </Border> 
```

这实际上会在某种程度上起作用，因为 CurrentView 会发生变化，但它不会实际显示视图的内容，它只是显示实例化的 ViewModel 的命名空间。

到目前为止，我主要使用了从这些来源获得的知识：

[http://rachel53461.wordpress.com/2011/05/28/switching-between-viewsusercontrols-using-mvvm/](http://rachel53461.wordpress.com/2011/05/28/switching-between-viewsusercontrols-using-mvvm/)

[将视图加载到 ContentControl 并通过单击按钮更改其属性](https://stackoverflow.com/questions/5956559/loading-views-into-contentcontrol-and-changing-their-properties-by-clicking-butt)

但他们并没有解决我的问题，或者我不太明白如何实际显示视图。:-(

那么有人对如何使用 GalaSoft 的 MVVM Light 在 Silverlight 5 中正确切换视图有很好的解释。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:19:55.653

您缺少的部分是`DataTemplates`告诉 WPF 如何呈现您的 ViewModel

```
<Window.Resources>
    <DataTemplate TargetType="{x:Type local:TestViewModel1}">
        <local:TestView1 />
    </DataTemplate>

    <DataTemplate TargetType="{x:Type local:TestViewModel2}">
        <local:TestView2 />
    </DataTemplate>
</Window.Resources> 
```

当您在可视树中插入对象时，例如将`ViewModel`对象放入`ContentControl.Content``TextBlock``.ToString()``namespace.classname``ViewModel``ContentControl`

`DataTemplate`通过在您的`Resources`某处定义一个隐式（即 a`DataTemplate`只有一个已`TargetType`定义的 - no ），您告诉 WPF 在尝试绘制该对象的任何时候`x:Key`使用指定的对象来绘制指定的对象，而不是使用绑定到对象的默认值。`DataTemplate``TextBlock``.ToString()`

应该注意的是，`DataTemplates`在 Silverlight 的早期版本中不支持隐式，但在 5.0+ 中支持它们。对于 Silverlight 的早期版本，我通常使用[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:14:51.047

所以我实际上解决了这个问题，不需要在**MainView**中创建数据模板，这是我不喜欢的。imo当我们谈论切换视图时， **MainView**应该对它正在显示的视图一无所知。

先决条件：对于此解决方案，您必须使用**GalaSoft 的 MVVM Light**

这是我的测试解决方案：我的**MainView**中添加了两个按钮，每个按钮都会打开一个新视图。clickevent 绑定到命令。

```
<Button Content="TestView1" Grid.Column="1" Command="{Binding CallTestView1Command}" HorizontalAlignment="Left" Margin="185,17,0,0" VerticalAlignment="Top" Width="75"/>
<Button Content="TestView2" Grid.Column="1" Command="{Binding CallTestView2Command}" HorizontalAlignment="Left" Margin="280,17,0,0" VerticalAlignment="Top" Width="75"/> 
```

在**MainView**我有一个边框，它应该包含可以切换的视图。**由于所有视图都从UserControl**继承，因此我将内容绑定到**MainViewModel**的属性**CurrentView**

 **```
 <Border x:Name="displayedView" Grid.Row="2">
        <UserControl Content="{Binding CurrentView}" />
    </Border> 
```

在**MainViewModel**我有属性 CurrentView。

```
 public const string CurrentViewPropertyName = "CurrentView";

    private UserControl _currentView;

    /// <summary>
    /// Sets and gets the "CurrentView property.
    /// Changes to that property's value raise the PropertyChanged event. 
    /// </summary>
    public UserControl CurrentView
    {
        get
        {
            return _currentView;
        }

        set
        {
            if (_currentView == value)
            {
                return;
            }

            RaisePropertyChanging(CurrentViewPropertyName);
            _currentView = value;
            RaisePropertyChanged(CurrentViewPropertyName);
        }
    } 
```

单击按钮时，会在**MainViewModel**中调用相应的命令：

```
 private RelayCommand _callTestView1Command;
    public RelayCommand CallTestView1Command
    {
        get
        {
            return _callTestView1Command ??
                   (_callTestView1Command = new RelayCommand(() =>
                       {
                           CurrentView = new TestView1();
                       }));
        }
    }

    private RelayCommand _callTestView2Command;
    public RelayCommand CallTestView2Command
    {
        get
        {
            return _callTestView2Command ??
                   (_callTestView2Command = new RelayCommand(() =>
                   {
                       CurrentView = new TestView2();
                   }));
        }
    } 
```

正如所见，每个命令都会将**CurrentView**设置为新视图，并且视图将在**MainView**中切换，因为**CurrentView**将引发 ProperTyChanged 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:19:14.837

我首先建议您不要通过 ContentControl 显示您的视图，而是考虑使用 silverlight 工具包中的导航框架。此外，我们不希望我们的 ViewModel 创建 Views ......那不是很好。但是，如果我们的 ViewModel 执行业务逻辑并确定要显示哪个视图，我们不介意。在此处获取工具包：http: [//silverlight.codeplex.com/](http://silverlight.codeplex.com/)

现在在您的主页中设置您的 XAML：

```
<Border x:Name="displayedView" Grid.Row="2"> 
        <navigation:Frame x:Name="ContentFrame" /> 
    </Border> 
```

由于您使用的是 MVVM Light，我们将使用消息传递。您的视图模型将获得更改视图的命令，确定要更改的视图，然后向主页发送消息以指示它更改视图。

在您的主页中为导航请求设置一个侦听器，如下所示：

```
public MainPage()
{
    InitializeComponent();  
    Messenger.Default.Register<Uri>(this, "NavigationRequest", (uri) => ContentFrame.Navigate(uri));
} 
```

接下来，在您的视图模型中设置您的命令。

```
 private RelayCommand _callTestView1Command;         
public RelayCommand CallTestView1Command         
{         
    get         
    {         
        return _callTestView1Command ??         
               (_callTestView1Command = new RelayCommand(() =>         
                   {         
                        Messenger.Default.Send<Uri>(new Uri("/Views/.../Page.xaml", UriKind.Relative), "NavigationRequest");

                   }));         
    }         
} 
```

这些是对我有用的基础知识。您可以对此进行扩展并获得真正的“架构”。例如，您可以为发送导航请求的视图模型创建一个基类，创建一个生成 URI 的辅助类（因此它们不会在您的应用程序中的任何地方进行硬编码等等。祝您好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:14:06.393

> 这实际上会在某种程度上起作用，因为 CurrentView 会发生变化，但它不会实际显示视图的内容，它只是显示实例化的 ViewModel 的命名空间。

因为您将`CurrentView`属性更改为视图模型实例并将其绑定为内容。这是错误的，因为内容应该是一个视图，您应该`DataContext`将该视图的设置为视图模型。

您可以在这里做的最简单的事情是在命令中创建一个 View 实例并将 viewmodel 设置为其 DataContext ，然后您可以将视图设置为`CurrentView`属性。当然，这会**违反**MVVM 模式，因此您应该将此责任转移到单独的组件中。我建议您不要编写自己的导航逻辑，而是选择现有的解决方案，因为这种任务并不像看起来那么简单。

我建议使用[棱镜库](http://compositewpf.codeplex.com/)**

# php - 在 MySQL 中搜索 - 分隔列

> ID：12894125
> 
> 赞同：1
> 
> 时间：2012-10-15T10:54:50.563
> 
> 标签：php, mysql

我正在尝试在 PHP 中创建一个小脚本来从 MySQL 数据库中获取数据。在我的数据库中，“公司”是一个名为“类别”的列，我将公司的类别存储在其中。例如“1 | 2”或只是“2”。

现在我想搜索“2”，我的数据库将返回这两个带有“1|2”和“2”的条目——但这是我的问题。我用 LIKE % 等进行了尝试，但没有像我希望的那样工作。

有人可以帮我解决我的小型 PHP 脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:23:01.463

我认为以您的方式存储类别是一个坏主意。如果您使用`LIKE "%2"`or `LIKE "%2%"`or`LIKE "2"`语句来获取属于类别“2”的公司，您将收到具有类别的公司，例如`21|12`。

最好从公司表中删除类别。并添加 2 个新表：category(id, name) 和 company_category(id, compnay_id, category_id)。这就是它必须在 RDMS 中的方式。但是，如果您有重要的论据，为什么要这样做-这就是您的交易。

在此，我建议将类别包装在附加的`|`-symbol 中以获取`|1|2|`或`|1|3|23|`使用`LIKE "%|2|%"`语句。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T10:58:56.100

```
SELECT * FROM cat_baza WHERE subsection = ".$row['id']." or subsection LIKE('%|".$row['id']."|%') or subsection LIKE('".$row['id']."|%') or subsection LIKE('%|".$row['id']."'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T11:02:17.107

尝试

```
SELECT * FROM table
WHERE category LIKE %2% AND NOT LIKE '%|%' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-15T11:09:28.027

尝试这个

```
SELECT * FROM table 
WHERE category='2' OR category LIKE '%|2' OR category LIKE '2|%' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-15T11:19:44.063

```
SELECT * FROM table 
WHERE category REGEXP '.*2.*' 
```

正则表达式应该工作

# ruby-on-rails - Rails 3.1中的rails路由错误

> ID：12894127
> 
> 赞同：1
> 
> 时间：2012-10-15T10:54:55.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想通过引用/用户查看所有公司的列表

users_controller.rb：

```
 def index
    @companies = Company.all
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @companies }
    end
  end 
```

用户/index.html.haml：

```
%div{:style => "margin:10px" }  
  %table{ :class => "table table-striped"}
    %thead
      %tr
        %th 
          = t("Logo")
        %th 
          = t("company_name")
        %th 
          = t("website")
        %th
    %tbody
      - @companies.each do |company| 
        %tr
          %td 
            - if company.logo?
              = link_to image_tag( company.logo.url, :width => "60", :height => "60"), company
            - else
              = link_to image_tag( "/lg.png", :width => "60", :height => "60"), company
          %td 
            = link_to company.name, company_path
          %td
            - if company.website?
              = link_to company.website, company.website
            - else
              = link_to company.name, company_path
          %td
            - if can? :read, company
              = link_to '<i class="icon-info-sign icon-white"></i> '.html_safe + t('Show'), company, :class => 'btn btn-small btn-info'
            - if can? :update, company
              = link_to '<i class="icon-pencil icon-white"></i> '.html_safe + t('Edit'), edit_company_path(company), :class => 'btn btn-small btn-pencil'
            - if can? :destroy, company 
              = link_to '<i class="icon-trash icon-white"></i> '.html_safe + t('Destroy'), company, confirm: t('Are you sure'), method: :delete, :class => 'btn btn-small btn-danger' 
```

但是当链接出现错误时：
`No route matches {:action=>"show", :controller=>"companies"}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:59:15.740

定义控制器不会自动创建可以到达该控制器的路由。您需要将必要的定义添加到`config/routes.rb`. 这是[路由指南](http://guides.rubyonrails.org/routing.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:00:40.213

在你`users_controller.rb'`写的

```
def show
  respond_to do |format|
    format.html{}
    format.json{}
  end
end 
```

并在您的路线文件中写入

```
resources :users 
```

# jar - 充气城堡：如何获取带有调试信息的 bcpkix-jdk15on-1.47.jar

> ID：12894129
> 
> 赞同：6
> 
> 时间：2012-10-15T10:55:04.213
> 
> 标签：jar, bouncycastle, jce

我正在尝试调试充气城堡 1.47 的问题。我可以找到“bcprov”的调试 jar，但找不到 {org.bouncycastle:bcpkix-jdk15on:1.47:jar}。

还有其他地方可以下载带有调试信息的 bcpkix-jdk15on-1.47.jar 吗？

或者

是否有一种工具可以从没有行号的 jar（包含 .class 文件）生成行号，并且还为同一个生成的 jar 生成源？

或者

我一直在尝试从源代码[1](http://www.bouncycastle.org/latest_releases.html)构建 jar，但构建无法从错误中找到我认为的测试 jar。

```
 [javadoc] /tickets/bouncycastle/src-cvs/java/crypto/build/artifacts/jdk1.5/bcprov-jdk15on-147/src/org/bouncycastle/jce/provider/test/AllTests.java:5: package junit.framework does not exist
  [javadoc] import junit.framework.Test;
  [javadoc]                       ^
  [javadoc] /tickets/bouncycastle/src-cvs/java/crypto/build/artifacts/jdk1.5/bcprov-jdk15on-147/src/org/bouncycastle/jce/provider/test/AllTests.java:6: package junit.framework does not exist
  [javadoc] import junit.framework.TestCase;
  [javadoc]                       ^
  [javadoc] /tickets/bouncycastle/src-cvs/java/crypto/build/artifacts/jdk1.5/bcprov-jdk15on-147/src/org/bouncycastle/jce/provider/test/AllTests.java:7: package junit.framework does not exist
  [javadoc] import junit.framework.TestSuite; 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T13:50:21.717

我已经设法从充气城堡源生成带有调试信息的 jar。

在 ROOT_SRC/bc-build.properties 中，将 release.debug 设置为 true

```
release.suffix: 147
release.name: 1.47
release.debug: true 
```

该构建期望邮件（sun 实现）和 junit jar 在类路径中可用。我已将它们放到 jdk/jre/lib/ext 上，并且构建工作正常。工件是在 ROOT_SRC/build 目录中生成的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-09-18T13:38:33.787

`bcprov-jdk15on`您可以排除并明确引入调试构建的`bcprov-debug-jdk15on`工件，而不是滚动您自己的构建。

Maven 配置示例：

```
<dependency>
    <groupId>org.bouncycastle</groupId>
    <artifactId>bcpkix-jdk15on</artifactId>
    <version>${bouncycastle.version}</version>
    <exclusions>
        <exclusion>
            <groupId>org.bouncycastle</groupId>
            <artifactId>bcprov-jdk15on</artifactId>
        </exclusion>
    </exclusions>
</dependency>
<dependency>
    <groupId>org.bouncycastle</groupId>
    <artifactId>bcprov-debug-jdk15on</artifactId>
    <version>${bouncycastle.version}</version>
</dependency> 
```

这将允许您调试 bouncycastle 的东西。

# ios - 使用故障保险将数据提取到 UITableView

> ID：12894131
> 
> 赞同：0
> 
> 时间：2012-10-15T10:55:08.190
> 
> 标签：ios, uitableview

我正在使用 NSURLConnection 和 NSHTTPURLResponse 从 API 获取数据，但是如果没有返回数据，我不确定显示错误的最佳（或好的）方法。就像现在一样，我只是什么都不显示。基本上只是将 UITableView 数据源设置为零。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSHTTPURLResponse* urlResponse = nil;
    NSError *error = [[NSError alloc] init];
    NSURLRequest *seriesReq = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://url/"]];
    NSData *responseData = [NSURLConnection sendSynchronousRequest:seriesReq returningResponse:&urlResponse error:&error];

    dispatch_async(dispatch_get_main_queue(), ^{
        if([urlResponse statusCode] >= 200 && [urlResponse statusCode] < 300) {
            NSError *error;

            seriesJson = [NSJSONSerialization
                          JSONObjectWithData:responseData
                          options:NSJSONReadingMutableContainers
                          error:&error];

            [_seriesTableView reloadData];
        }
        else {
            seriesJson = nil;
        }
    });
}); 
```

我在想也许只是用一个虚拟数据集填充 seriesJson，然后在内部检查它`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`以便能够显示它，但由于某种原因，它并没有让我觉得它是一个好的解决方案。

如何向用户显示请求的数据为空或不可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:20:00.597

取决于您希望用户如何处理您提供的信息。如果您只是想通知他们有错误（并且没有追索权），那么在导航栏上设置提示可能就足够了。如果有用户可以执行的操作，那么带有重试按钮（或其他）的 UIAlert 可能是合适的。

# forms - 在 Joomla 中将 ReCaptcha 与我的自定义表单一起使用

> ID：12894134
> 
> 赞同：3
> 
> 时间：2012-10-15T10:55:18.087
> 
> 标签：forms, joomla, captcha

我正在尝试使用 JFormFieldCaptcha 来处理我的自定义 jForm。我设法通过注册和联系表格完成了工作。但是我想建立我自己的基于 XML 文件的联系表单，看起来像这样：

```
<form>
    <fieldset addfieldpath="<path to JFormFieldCaptcha class>">
        <field 
             name="captcha" label="Captcha" description="COM_DEZTOUR_ORDER_CAPTCHA_DESC"
         type="text" validate="captcha"
        />
     </fieldset>
</form> 
```

我无法弄清楚为什么这段代码不起作用。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T12:28:28.113

为了使用 Joomla ReCaptcha 插件 -

[1) 从http://www.google.com/recaptcha](http://www.google.com/recaptcha)获取 recaptcha 密钥

2）将这些键设置为recaptcha插件，如果不是则激活它。

3) 前往 `Global Configuration=>Site=>Default Captcha`

并设置`"Default Captcha"=>"Captcha - ReCaptcha"`

4）创建具有您的验证码字段的xml表单实例

```
$form   =& JForm::getInstance('myform','path/to/form/form.xml'); 
```

5）在表单内创建字段-

```
$fieldSets = $form->getFieldsets();
foreach ($fieldSets as $name => $fieldSet) :
?>          
    <?php
    foreach ($form->getFieldset($name) as $field):
    ?>
        <p>
        <?php if (!$field->hidden) : ?>
        <span class="formlabel"><?php echo $field->label; ?></span> 
        <?php endif; ?>
        <span class="control"><?php echo $field->input; ?></span>
        </p>
    <?php
    endforeach;
    ?>          
    <div class="clr"></div>
<?php
endforeach; 
```

6）提交表单后验证表单-

```
$post   = JRequest::get('post');
jimport( 'joomla.form.form' );
$form   =& JForm::getInstance('myform','path/to/form/form.xml');
$res    = $form->validate($post); 
```

XML 表单示例 -

```
<?xml version="1.0" encoding="utf-8"?>
<form
    addfieldpath="/administrator/components/com_franchise/models/fields">
    <fieldset name="information">        
         <field id="name"
            name="name"
            type="text"
            label="Name"
            description=""
            class="inputbox"
            size="30"
            default=""
            required="true"
        />  

         <field
            name="captcha"
            type="captcha"
            label="COM_CONTACT_CAPTCHA_LABEL"
            description="COM_CONTACT_CAPTCHA_DESC"
            validate="captcha"

        />

    </fieldset> 
</form> 
```

你也可以试试这个—— [如何在我的自定义模块中使用 joomla recaptcha 插件](https://stackoverflow.com/questions/12840015/how-to-use-joomla-recaptcha-plugin-to-my-custom-module/12860744#12860744)

# objective-c - cocoa和objective c保存、编辑和加载文件

> ID：12894141
> 
> 赞同：1
> 
> 时间：2012-10-15T10:56:05.727
> 
> 标签：objective-c, macos, cocoa

你好我正在尝试创建一个文本文件，然后存储一些数据

```
- (IBAction)saveUser:(id)sender{
   NSString *name = [nameField stringValue];
   NSString *weight = [weightField stringValue];
   NSDate *date = [datePick dateValue];

} 
```

我希望能够创建一个存储以下信息并使用名称字段作为文件名的文件。我还希望能够加载文件并从中读取数据

感谢您提供任何帮助谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:02:08.633

这很简单。但是您可能想改为查看 NSMutableDictionary。NSString 和 Dictionary 都有 writeToFile:@"filename.txt" 方法。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setValue:[nameField stringValue] forKey:@"name"];
[dict setValue:[weightField stringValue] forKey:@"weight"];
[dict setValue:date forKey:@"date"];

[dict writeToFile:name atomically:YES]; 
```

你以同样的方式从文件中读取，

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithContentsOfFile:name]; 
```

尽可能简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:11:09.293

我想你可能会从 NSFileManager 类中得到一些信息，比如这样，

```
[fileManager createFileAtPath:filePath contents:contentData attributes:NULL]; 
```

contentData 是 NSData，它包含你要保存的内容，文件名在你需要设置的 filePath 中。

谢谢！

# linux - linux nasm 程序集 (register):(register) 是什么意思？

> ID：12894144
> 
> 赞同：1
> 
> 时间：2012-10-15T10:56:27.993
> 
> 标签：linux, assembly, nasm, division

我一直在浏览 NASM 教程，我注意到在所有对 DIV 指令的引用中，在讨论 32 位除法时，会说以下内容：

```
DIV ECX    ; EDX:EAX / ECX 
```

EDX:EAX 是什么意思？为什么两个寄存器除以一个寄存器？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T10:59:36.927

这是一个跨区寄存器或寄存器对，在这种情况下用于 64 位数学运算（因此您可以使用 64 位商，添加 IIRC 是为了允许任意点算术）。 `EDX`包含高位 DWORD 和符号，`EAX`低位 DWORD。

相同的逻辑用于返回 64 位结果。另外，应该注意的是，这与 NASM 无关，它是 x86 架构的一部分（它也定义了 32 位对，就像`DX:AX`使用 16 位指令时一样）。

# updatepanel - 带有复选框列表的更新面板中的 Asp.net 错误

> ID：12894149
> 
> 赞同：1
> 
> 时间：2012-10-15T10:56:41.813
> 
> 标签：updatepanel, checkboxlist

我有代码可以根据某些条件动态生成复选框列表，如果选中的复选框将被禁用，之后会将此复选框列表控件添加到更新面板中的占位符，

第一次没有出现问题，但是当我更新从复选框列表中添加或删除的条件时，某些复选框已禁用但未选中

ASPX 代码

```
<asp:TextBox AutoPostBack="true" ID="txtCount" runat="server" OnTextChanged="txtCount_TextChanged">0</asp:TextBox>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
          <asp:PlaceHolder runat="server" ID="ph"></asp:PlaceHolder>
    </ContentTemplate>
</asp:UpdatePanel> 
```

C# 代码

```
protected void Page_Load(object sender, EventArgs e)
{
    CheckBoxList ckb = new CheckBoxList();
    int maxCount = int.Parse(txtCount.Text);
    for (int i = 0; i < maxCount; i++)
    {
        ListItem li = new ListItem();
        li.Text = "CheckBox " + i.ToString();

        bool selected = (i % 2 == 0);

        li.Selected = selected;
        li.Enabled = !selected;

        ckb.Items.Add(li);
    }
    ph.Controls.Add(ckb);

}

protected void txtCount_TextChanged(object sender, EventArgs e)
{

} 
```

# python - 从 taggit 获取所有标签

> ID：12894154
> 
> 赞同：11
> 
> 时间：2012-10-15T10:56:56.467
> 
> 标签：python, django, django-models, django-taggit

如何从 django-taggit 获取所有（唯一）标签？我想在侧边栏中显示所有标签。目前我能够获取特定帖子的所有标签，但现在我需要获取整个博客中的所有唯一标签。

models.py 中的代码：

```
from django.db import models
from taggit.managers import TaggableManager

# Create your models here.
class Post(models.Model):
    title = models.CharField(max_length=100)
    body = models.TextField()
    created = models.DateTimeField()
    tags = TaggableManager() 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-15T11:03:02.510

您可以使用[`all()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.all)获取数据库中的所有标签：

```
from taggit.models import Tag
tags = Tag.objects.all() 
```

如果您需要完整的解决方案，请查看[`django-taggit-templatetags`](https://github.com/feuervogel/django-taggit-templatetags). 它提供了几个[templatetags](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)，包括一个用于标签列表，以将各种 taggit API 直接暴露给模板。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-12T16:16:52.403

当前维护的支持较新版本 django 的 fork 是： [https ://github.com/fizista/django-taggit-templatetags2](https://github.com/fizista/django-taggit-templatetags2)

django-taggit-templatetags 已经好几年没有维护了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-16T01:17:36.107

我知道这是一个老问题……但我是 Django 新手，在寻找用所有标签选项填充 Ajax 下拉列表的方法时发现了这个问题。我想出了一种方法，`djangorestframework`并想在这里为其他人提供一个更完整的解决方案（OP 也可以用响应填充侧边栏，或者用它做任何其他事情）。

这会添加一个 api 端点`tag`，因此您不仅可以通过导航查看它们，还可以`/tag/`获取适合 Ajax 的 JSON 响应（ergo，假设您已`djangorestframework`安装并正在使用）。

*序列化程序.py*

```
from taggit.models import Tag
class MyTagSerializer(serializers.ModelSerializer):
    class Meta:
        model = Tag
        fields = ['name', 'slug'] 
```

*视图.py*

```
from taggit.models import Tag
class TagViewSet(viewsets.ModelViewSet):
    """
    Not using taggit_serializer.serializers.TaggitSerializer because that's for listing
    tags for an instance of a model
    """
    queryset = Tag.objects.all().order_by('name')
    serializer_class = MyTagSerializer 
```

*网址.py*

```
router.register(r'tag', TagViewSet) 
```

而且，如果你需要 ajax：

```
$(document).ready(function(){

   $.ajax({
      url : "/tag/",
      dataType: "json",
      type: 'GET'
    }).done(function(response){
      for (var i in response) {
        tagEntry = response[i];
        $('#tagdropdown').append($('<option>', {
            value: tagEntry.name,
            text: tagEntry.name
        }));
      }
    }).fail(function(response){
      console.log('failed!');
      console.log(response);
    });

}); 
```

# css - 如何使精灵图像在悬停不同的项目时发生变化？

> ID：12894158
> 
> 赞同：-2
> 
> 时间：2012-10-15T10:57:06.573
> 
> 标签：css, css-sprites

我有**8 张**`sprite`图片。我想要做的是：如果有人将鼠标悬停在子菜单列表上（比如说项目 1），那么放置在不同 div 上的精灵图像必须更改。所以子菜单项和这个带有精灵的div通过css相互关联。问题是：我如何为 8 张图片执行此操作？

 **就是这样：

悬停项目 1 = 显示精灵图像 1

悬停项目 2 = 显示精灵图像 2

悬停项目 3 = 显示精灵图像 3

等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:00:38.593

当 div 是子菜单的子项或 DOM 中的同级时，您只能使用纯 css 执行此操作。如果没有，您必须为此使用 javascript：

```
/* child */
.submenu:hover (>) div{}
/*sibling*/
.submenu:hover ~|+ div{} 
```

使用 javascript，您需要将鼠标悬停事件注册到子菜单并更改处理程序函数中的图像。

```
document.queryselector(".submenu").addEventListener("mouseover",function(){/*stuff here*/}); 
```

最常见的方法是更改​​背景位置，以便您的精灵的另一部分变得可见。但是如何准确地做到这一点，取决于你的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:23:04.017

我用背景位置解决了它。谢谢大家。

```
.page-id-1 {background: url(images/image.png) top left no-repeat; background-position: -502px 0;}
.page-id-2 {background: url(images/image.png) top left no-repeat; background-position: -904px 0;}
 .page-id-3 {background: url(images/image.png) top left no-repeat; background-position: -1306px 0;}
.page-id-4 {background: url(images/image.png) top left no-repeat; background-position: -1708px 0;}
.page-id-5 {background: url(images/image.png) top left no-repeat; background-position: 0 -71px;}
.page-id-6 {background: url(images/image.png) top left no-repeat; background-position: -402px -71px;}
.page-id-7 {background: url(images/image.png) top left no-repeat; background-position: -804px -71px;}
.page-id-8 {background: url(images/image.png) top left no-repeat; background-position: -1206px -71px;} 
```**

# javascript - 正则表达式删除方括号内的 html 标记

> ID：12894161
> 
> 赞同：0
> 
> 时间：2012-10-15T10:57:18.530
> 
> 标签：javascript, regex

我使用正则表达式提取方括号内的内容：-

```
string.match(/[^[\]]+(?=])/g) 
```

但这不会提取方括号之间的字符串，例如

string="[项目描述（仅适用于）]"

还有什么是正则表达式来删除方括号内的html元素

例子 ：-

```
string="[<span>Description of project (only for)</span>]" 
```

应用正则表达式后的输出应为“项目描述（仅适用于）”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:50:25.797

1.  匹配方括号中的所有内容。

2.  使用回调函数替换此匹配内容中的 html 标记。

# 演示：http: [//jsfiddle.net/uZRQt/](http://jsfiddle.net/uZRQt/)

```
var matches = "This is <span>Outside content </span> and inside is [<span>Description of project (only for)</span>]".replace(/\[.*?\]/gi,function(match) {

    return match.replace(/<\/?[^>]*?>/gi,'');

});

alert(matches); 
```

# java - getLastKnownLocation() 总是返回 null，所有提供者都是 DummyLocationProvider

> ID：12894162
> 
> 赞同：1
> 
> 时间：2012-10-15T10:57:20.033
> 
> 标签：java, android, maps, location

我看过很多关于这个问题的帖子，但没有一个为我提供解决方案。

我正在尝试通过 GPS（或最终通过任何其他有效提供商）获取用户位置。但我总是得到空位置。我确实得到了一张地图，并且可以设置任意位置，是不工作的提供者。

**我正确设置了我的 MAPS 密钥**（还检查了它是否正确），所有必要的权限设置（`android.permission.INTERNET`, `android.permission.ACCESS_COARSE_LOCATION`, `android.permission.ACCESS_FINE_LOCATION`），事实上，昨天一切似乎都运行良好！

我尝试使用此代码获取所有可能的提供程序：

```
List<String> providers = locManager.getAllProviders();
for (String provider : providers) {
    printProvider(provider);
} 
```

这表明所有提供者（在我的例子中是 4 个）都是 DummyLocationProviders。

我试图**在手机上运行我的应用程序，而不是模拟器**（尽管我也尝试使用模拟器，启用 GPS，但无济于事）。

这是我用来获取位置的代码（昨天再次运行良好）：

```
//Get criteria
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);

        //Get best provider
        String  bestProvider = locManager.getBestProvider(criteria, false);
        printProvider(bestProvider);

        //get the current location (last known location) from the location manager
        Location location = locManager.getLastKnownLocation(bestProvider);

        //if location found display as a toast the current latitude and longitude
        if (location != null) {
            Toast.makeText(this, "Current location:\nLatitude: " + location.getLatitude() + "\n" + "Longitude: " + location.getLongitude(), Toast.LENGTH_LONG).show();

            point = new GeoPoint((int) (location.getLatitude()*1E6),(int)(location.getLongitude() *1E6));
            controller.animateTo(point);
        } else {
            Toast.makeText(this, "Cannot fetch current location!", Toast.LENGTH_LONG).show();
        } 
```

我的清单文件：

```
 <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".activities.MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".activities.GoogleMapsActivity"
            android:label="@string/title_activity_maps" >
        </activity>

        <activity
            android:name=".activities.MyMapsActivity"
            android:label="@string/title_activity_maps" >
        </activity>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:14:11.773

试试这个代码：

```
 import java.io.IOException;
  import java.util.List;
  import java.util.Locale;

  import android.content.Context;
  import android.graphics.Canvas;
  import android.location.Address;
  import android.location.Geocoder;
  import android.location.Location;
  import android.location.LocationListener;
  import android.location.LocationManager;
  import android.os.Bundle;
  import android.widget.Toast;

  import com.google.android.maps.GeoPoint;
  import com.google.android.maps.MapActivity;
  import com.google.android.maps.MapController;
  import com.google.android.maps.MapView;
  import com.google.android.maps.Overlay;

  public class MyMapsActivity extends MapActivity 
   {    

        MapView mapView;
        MapController mapController;
        LocationManager locationManager;
        LocationListener locationListener;
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState)
             {
               super.onCreate(savedInstanceState);
               setContentView(R.layout.main);

                mapView = (MapView) findViewById(R.id.mapView);
                // enable Street view by default
                mapView.setStreetView(true);

                // enable to show Satellite view
               // mapView.setSatellite(true);

              // enable to show Traffic on map
               // mapView.setTraffic(true);

                mapView.setBuiltInZoomControls(true);

                mapController = mapView.getController();
                mapController.setZoom(5); 

      locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);  
      locationListener = new GPSLocationListener();
      locationManager.requestLocationUpdates(
      LocationManager.GPS_PROVIDER, 0, 0, locationListener);
      Touchy t = new Touchy();
      List<Overlay> overlayList = mapView.getOverlays();
      overlayList.add(t);
      }
     @Override
      protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
          return false;
       }

      class Touchy extends Overlay
      {
        public boolean onTap(GeoPoint point, MapView mapView) 
           {
            Context contexto = mapView.getContext();
            String msg = "Latitude : " + point.getLatitudeE6()/1E6 + " - " + "Longitude : " + point.getLongitudeE6()/1E6;

             Toast toast = Toast.makeText(contexto, msg, Toast.LENGTH_SHORT);
             toast.show();

            return true;
          }
       }

      private class GPSLocationListener implements LocationListener 
         {
          public void onLocationChanged(Location location)
            {
             if (location != null)
              {
               GeoPoint point = new GeoPoint((int) (location.getLatitude() * 1E6),(int) (location.getLongitude() * 1E6));

               Toast.makeText(getBaseContext(),"Latitude: " + location.getLatitude() + " Longitude: " + location.getLongitude(), 
               Toast.LENGTH_SHORT).show();

         mapController.animateTo(point);
         mapController.setZoom(5);
         mapView.invalidate();
       }

          if (location != null)
             {
               GeoPoint point=null;
               String address = ConvertPointToLocation(point);
               Toast.makeText(getBaseContext(), address, Toast.LENGTH_SHORT).show();

             }
         }

        public String ConvertPointToLocation(GeoPoint point) {   
               String address = "";
               Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());
               try {
                     List<Address> addresses = geoCoder.getFromLocation(point.getLatitudeE6()  / 1E6, 
                     point.getLongitudeE6() / 1E6, 1);

           if (addresses.size() > 0) {
                  for (int index = 0; 
                    index < addresses.get(0).getMaxAddressLineIndex(); index++)
                    address += addresses.get(0).getAddressLine(index) + " ";
                }
            }
        catch (IOException e) {        
                    e.printStackTrace();
             }   

     return address;
    } 
```

}

布局编码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout 
          xmlns:android="http://schemas.android.com/apk/res/android" 
          android:layout_width="fill_parent" 
          android:layout_height="fill_parent">

     <com.google.android.maps.MapView 
              android:id="@+id/mapView"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:enabled="true"
              android:clickable="true"
              android:apiKey="Your MAP API Key"/>

     <LinearLayout android:id="@+id/zoom" 
             android:layout_width="wrap_content" 
             android:layout_height="wrap_content" 
             android:layout_alignParentBottom="true" 
             android:layout_centerHorizontal="true" />

     </RelativeLayout> 
```

获取自己的 API 密钥流程的链接：

[http://sanathnandasiri.blogspot.in/2011/04/obtaining-google-maps-api-key-for.html](http://sanathnandasiri.blogspot.in/2011/04/obtaining-google-maps-api-key-for.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:03:08.167

//从位置管理器获取当前位置（最后已知位置） Location location = locManager.getLastKnownLocation(bestProvider);

使用它而不是上面的行

```
 location = locManager.getLastKnownLocation(bestProvider);
        locManager.requestLocationUpdates(bestProvider,0, 0, locationListener);
        location = locManager.getLastKnownLocation(bestProvider);
        locManager.requestLocationUpdates(bestProvider,0, 0, locationListener); 
```

第一次位置为空，因此将您当前的位置设置为最后一个位置。

# html - 中的 HTML for="" 属性是什么？

> ID：12894169
> 
> 赞同：109
> 
> 时间：2012-10-15T10:57:30.497
> 
> 标签：html

我在 jQuery 中看到过这个 - 它有什么作用？

```
<label for="name"> text </label>
<input type="text" name="name" value=""/> 
```

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-10-15T10:59:04.237

该`for`属性用于标签。它指的是与此标签关联的元素的 id。

例如：

```
<label for="username">Username</label>
<input type="text" id="username" name="username" /> 
```

现在，当用户在文本上单击鼠标时，`username`浏览器将自动将焦点放在相应的`input`字段中。这也适用于其他输入元素，例如`<textbox>`和`<select>`。

引用[规范](http://www.w3.org/TR/html401/interact/forms.html#h-17.9.1)：

> 此属性明确地将正在定义的标签与另一个控件相关联。如果存在，此属性的值必须与同一文档中某个其他控件的 id 属性的值相同。如果不存在，则定义的标签与元素的内容相关联。

至于为什么您的问题被标记为 jQuery 以及您在哪里看到它在 jQuery 中被使用，我无法回答，因为您没有提供太多信息。

也许它在 jQuery 选择器中用于查找给定标签实例的相应输入元素：

```
var label = $('label');
label.each(function() {
    // get the corresponding input element of the label:
    var input = $('#' + $(this).attr('for'));
}); 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2020-03-21T09:47:38.127

要将`<label>`与`<input>`元素相关联，您需要提供`<input>`an`id`属性。然后`<label>`需要一个与输入相同的`for`属性：`value``id`

```
<label for="username">Click me</label>
<input type="text" id="username"> 
```

`for`属性将 a与`<label>`元素`<input>`相关联；这提供了一些主要优点：
1\. 标签文本不仅与其相应的文本输入在视觉上相关联；它也以编程方式与之关联。这意味着，例如，当用户专注于表单输入时，屏幕阅读器会读出标签，使辅助技术用户更容易理解应该输入哪些数据。
2\. 您可以**单击相关标签**来聚焦/激活输入，以及输入本身。这种**增加的命中区域**为任何试图激活输入的人提供了优势，包括那些使用触摸屏设备的人。

**或者**，您可以将`<input>`直接嵌套在 中`<label>`，在这种情况下，不需要 `for`and属性，因为关联是隐式的：`id`

```
<label>Click me <input type="text"></label> 
```

注意：
一个`input`标签可以关联多个标签。
当`<label>`单击或点击 a 并且它与表单控件关联时，也会为关联的控件引发单击事件。

## 可访问性问题

不要在标签内放置交互式元素，例如锚点或按钮。这样做会使人们难以激活与标签关联的表单输入。

### 标题

在 a 中放置标题元素`<label>`会干扰多种辅助技术，因为标题通常用作导航辅助。如果需要在视觉上调整标签的文本，请改用应用于`<label>`元素的 CSS 类。
如果表单或表单的一部分需要标题，请使用`<legend>`放置在`<fieldset>`.

### 纽扣

具有声明和有效值属性的`<input>`元素`type="button"`不需要与之关联的标签。这样做实际上可能会干扰辅助技术解析按钮输入的方式。这同样适用于`<button>`元素。

参考： [https ://developer.mozilla.org/en-US/docs/Web/HTML/Element/label](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-07-25T15:36:05.927

我觉得有必要回答这个问题。我也有同样的困惑。

```
<p>Click on one of the text labels to toggle the related control:</p>

<form action="/action_page.php">
  <label for="female">Male</label>
  <input type="radio" name="gender" id="male" value="male"><br>
  <label for="female">Female</label>
  <input type="radio" name="gender" id="female" value="female"><br>
  <label for="other">Other</label>
  <input type="radio" name="gender" id="other" value="other"><br><br>
  <input type="submit" value="Submit">
</form>
```

我将“男性”标签上的 for 属性更改为女性。现在，如果您单击“男性”，则会检查“女性”收音机。

就那么简单。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-15T10:59:27.010

一个快速的例子：

```
<label for="name">Name:</label>
<input id="name" type="text" /> 
```

当您单击标签时，该`for=""`标签也可以让输入聚焦。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-15T10:59:34.173

你用它和标签来表示两个对象属于一起。

```
<input type="checkbox" name="remember" id="rememberbox"/>
<label for="rememberbox">Remember your details?</label> 
```

这也意味着单击该标签将更改复选框的值。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-04-08T10:25:48.773

仅供参考 - 如果您在打字稿环境中，例如

```
<label for={this.props.inputId}>{this.props.label}</label> 
```

你需要使用 htmlFor

```
<label htmlFor={this.props.inputId}>{this.props.label}</label> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-15T10:59:26.733

它用于`<label>`元素

它与输入类型复选框或重做一起使用以在标签单击时进行选择

[工作演示](http://jsfiddle.net/Lfbn5/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-15T11:01:22.903

标记的`for`属性`<label>`应该等于相关元素的 id 属性才能将它们绑定在一起。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-15T10:58:56.477

它`<label>`用于 html 的文本

例如。

```
<label for="male">Male</label>

<input type="radio" name="sex" id="male" value="male"><br> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-08T12:40:58.800

它将标签与输入元素相关联。HTML 标签旨在向各种类别的用户传达特殊含义。以下是标签的含义：

1.  **对于有运动障碍的人（也适用于普通鼠标用户）**：可以单击正确使用的标签标签以访问相关的表单控件。例如。用户可以点击更容易点击的标签并切换复选框，而不是特别点击复选框。
2.  **对于有视觉障碍的用户**：有视觉障碍的用户使用屏幕阅读器，只要表单控件获得焦点，屏幕阅读器就会读取关联的标签标签。它可以帮助用户了解他们原本看不到的标签。

更多关于标签 -> [https://www.w3.org/TR/WCAG20-TECHS/H44.html](https://www.w3.org/TR/WCAG20-TECHS/H44.html)

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-10-15T10:59:39.697

`<label>`这是标签的属性：http: [//www.w3schools.com/tags/tag_label.asp](http://www.w3schools.com/tags/tag_label.asp)

# javascript - 如何将 CSS 过渡设置为新元素或对 JavaScript 执行相同操作

> ID：12894171
> 
> 赞同：6
> 
> 时间：2012-10-15T10:57:42.933
> 
> 标签：javascript, jquery, css, html-table

我看到了一个 CSS3 菜单，它有很好的过渡效果：

```
transition: all 0.3s ease 0.1s; 
```

我想对我的表应用相同的转换。我有一个表格，单击表格行时，单击行后会附加新行并显示或隐藏。

就像在下面的代码中一样（clickedTableRow 的值为单击行的 jQuery 选择器）：

```
clickedTableRow.after('<tr style="display:none;"><td>some content</td></tr>');
clickedTableRow.next().slideDown(3000); 
```

而不是`slideDown`我如何将上面的 css 转换应用到新添加的表格行，或者是否有 javascript 等价物？

**问题更新：**

也许我应该**改写**。慢慢滑下一些新创建的内容的最佳方法是什么？

这好像是：

```
clickedTableRow.after('<tr><td>some content</td></tr>').slideDown(3000); 
```

看起来与以下内容相同：

```
clickedTableRow.after('<tr><td>some content</td></tr>'); 
```

没有 slideDown 效果，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T21:09:23.657

因此，上述解决方案将使用 jquery animate 库来执行此操作。这也可以使用 css3 来完成。

我没有为任何花哨的行为调整代码，我希望这个想法很清楚：

HTML：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<meta charset=utf-8 />
<title>Slide Add Row</title>
</head>
<body>
<table>
    <tr><td>some content</td></tr>
</table>
</body>
</html> 
```

CSS：

```
 div {
      -moz-animation-duration: 1s;
      -webkit-animation-duration: 1s;
      -moz-animation-name: slidein;
      -webkit-animation-name: slidein;
    position:relative;
    }

    @-moz-keyframes slidein {
      from {
            top:-20px;
      }

      to {
            top:0px;
      }
    }

    @-webkit-keyframes slidein {
      from {
            top:-20px;
      }

      to {
            top:0px;
      }
    } 
```

和 JS（仅用于动态添加行：

```
$('table').on('click', function(){
  $tbody = $(this).find('tbody:last');
   $tbody.after('<tr><td><div>new</div></td></tr>');
}); 
```

现场演示：

[http://jsbin.com/unacog/9/](http://jsbin.com/unacog/9/)

注意事项：

1.  TD 中的数据需要包装，否则 CSS3 动画的现有实现将无法正常工作。

2.  当然，不支持 IE 浏览器，可在 Chrome、FireFox 和 Safari 中使用。

顺便说一句 - 使用 css 动画为许多其他方式播放动画提供了自由，例如，基于字体大小：http: [//jsbin.com/unacog/11/](http://jsbin.com/unacog/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:52:58.880

> “让一些新创建的内容慢慢滑下来的最佳方式是什么？”

将内容放在最初隐藏它的容器中。然后`slideDown`父级显示新添加的子级。

这对于表格行 ( ) 将非常困难，`<tr>`因为表格与 a 不是同一类型的块级元素`<div>, <span>, <p>, etc.`——它是一种独特的野兽，并非所有浏览器都以相同的方式驯服它。[（在这个 SO question](https://stackoverflow.com/questions/3331353/transitions-on-the-display-property)中解释得很好）

所以——如果是我——我会让我的表格和单元格严格语义化，并将表格包裹在可以隐藏行的东西中（如果我被迫使用表格）：

[http://jsfiddle.net/25uQr/](http://jsfiddle.net/25uQr/)（是的，我花了太多时间在上面）

对于您在帖子中描述的内容，我会使用`<ul>,<ol>, or <dl>`. 他们的孩子的行为很像一个表格行，但是是块级元素......所以操作非常简单，并且跨浏览器安全（ish）er。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T11:10:39.053

在样式表中添加一些 CSS，例如

```
.transition{
  transition: all 0.3s ease 0.1s;
   } 
```

然后

```
clickedTableRow.next().addClass('transition'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T08:00:10.433

[http://jsfiddle.net/xMRhE/4/](http://jsfiddle.net/xMRhE/4/)

```
$itemBeingAdded = $("<div class='inner start-animation'></div>");    
    $testTable.append($itemBeingAdded);
    setTimeout(function () {
        $itemBeingAdded.removeClass("start-animation");
    }, 100); 
```

还有css幻灯片效果：

```
.inner {
   height : 50px;
   -moz-transition: all 0.3s ease 0.1s;
   -webkit-transition: all 0.3s ease 0.1s;
   transition: all 0.3s ease 0.1s;
   background : #ded;
   border : 1px solid #999;
}

.inner.start-animation {
     height : 0px;
}​ 
```

这是我的方法。除了向下滑动，您只需将高度设置为正常高度的 0% 到 100%。

这是通过添加表格行、元素、div 或您拥有的基本类和“开始”类来完成的，该类为动画添加初始状态（或关键帧）的样式。将元素添加到 dom 后不久，您将删除开始关键帧类。

然后浏览器计算它必须为元素设置什么动画以使元素看起来像是由当时实际影响它的属性定义的下一个“帧”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T09:20:12.947

如果我对问题的理解正确，您正在向表格动态添加一些内容（通过 ajax？），而不是仅仅在表格底部弹出，您希望它滑出吗？

您缺少的是`hide()`：

```
clickedTableRow.after('<tr><td>some content</td></tr>').hide().slideDown(3000); 
```

`.slideDown(speed)`是 的替代方法`.show(speed)`，但要使元素正常工作，需要使用 CSS ( `display:none`) 或通过`.hide(speed)`ing 隐藏元素。

[编辑]

> 表格行对动画提出了特殊的障碍，因为浏览器对其可见显示属性使用不同的值（表格行和块）。没有动画的 .hide() 和 .show() 方法始终可以安全地用于表格行。从 jQuery 版本 1.1.3 开始，也可以使用 .fadeIn() 和 .fadeOut()。

要修复，您需要将内容包装在 div 中并显示。我创建了一个 jsFiddle：

[http://jsfiddle.net/VXe6r/](http://jsfiddle.net/VXe6r/)

# ios - 通过 NSNotification 从 UICollectionView 中删除单元格

> ID：12894172
> 
> 赞同：8
> 
> 时间：2012-10-15T10:58:01.650
> 
> 标签：ios, uicollectionview, uicollectionviewcell

为了简单起见，我有一个简单的基于 UICollectionView 的应用程序 - 一个 UICollectionView 和一个基于 NSMutableArray 的数据模型。

我可以通过 didSelectItemAtIndexPath: 委托方法毫无问题地删除单元格：

```
-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{
    [self.data removeObjectAtIndex:[indexPath row]];
    [self.collectionView deleteItemsAtIndexPaths:@[indexPath]];
} 
```

但是，我正在尝试通过 a`UIMenuController`在`UICollectionViewCell`子类中添加一个删除选项，该选项是通过 a 触发的`UILongPressGestureRecognizer`，一切正常，我成功触发了`NSNotification`

```
-(void)delete:(id)sender{
      NSLog(@"Sending deleteme message");
      [[NSNotificationCenter defaultCenter] postNotificationName:@"DeleteMe!" object:self userInfo:nil];
} 
```

我在 ViewController 中捕获它并调用以下方法：

```
-(void)deleteCell:(NSNotification*)note{
       MyCollectionViewCell *cell = [note object];
       NSIndexPath *path = nil;
       if((path = [self.collectionView indexPathForCell:cell]) != nil){
           [self.data removeObjectAtIndex:[path row]];
           [self.collectionView deleteItemsAtIndexPaths:@[path]];
       }
} 
```

它在 deleteItemsAtIndexPaths 上崩溃：调用

```
-[UICollectionViewUpdateItem action]: unrecognized selector sent to instance 0xee7eb10 
```

我已经检查了所有明显的东西——比如来自 NSNotification 的对象和从 indexPathForCell: 调用创建的 indexPath ，这一切看起来都很好。似乎我在两个地方都使用相同的信息调用 deleteItemsAtIndexPath:，但是由于某种原因，它在通过通知路由时失败了。

这是错误中给出的地址的信息：

```
(lldb) po 0xee7eb10
(int) $1 = 250080016 <UICollectionViewUpdateItem: 0xee7eb10> index path before update (<NSIndexPath 0x9283a20> 2 indexes [0, 0]) index path after update ((null)) action (delete) 
```

也许更新为空后的索引路径很重要......

有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-20T16:49:56.510

我找到了一个粗略但可行的解决方法，它甚至可以检查未来版本中是否已经实施了操作（比类别更好）

```
// Fixes the missing action method when the keyboard is visible
#import <objc/runtime.h>
#import <objc/message.h>
__attribute__((constructor)) static void PSPDFFixCollectionViewUpdateItemWhenKeyboardIsDisplayed(void) {
    @autoreleasepool {
    if ([UICollectionViewUpdateItem class] == nil) return; // pre-iOS6.
    if (![UICollectionViewUpdateItem instancesRespondToSelector:@selector(action)]) {
            IMP updateIMP = imp_implementationWithBlock(^(id _self) {});
            Method method = class_getInstanceMethod([UICollectionViewUpdateItem class], @selector(action));
            const char *encoding = method_getTypeEncoding(method);
            if (!class_addMethod([UICollectionViewUpdateItem class], @selector(action), updateIMP, encoding)) {
                NSLog(@"Failed to add action: workaround");
            }
        }
    }
} 
```

编辑：添加了对 iOS5 的检查。
Edit2：我们在许多商业项目（[http://pspdfkit.com](http://pspdfkit.com)）中都提供了它，而且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:41:47.007

您可以在通知字典中传入`NSIndexPath`所选单元格的。`userInfo`您可以在`tag`创建自定义单元格时将其设置在自定义单元格中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T08:43:27.337

我遇到过同样的问题。在我选择了放在 collectionViewCell`UICollectionView`中的文本后，当我尝试将一个单元格插入我的应用程序时，我的应用程序会崩溃。`UITextField`我的解决方法是在插入发生之前辞去第一响应者的职务。因为我使用 a`NSFetchedResultsController`来处理更新，所以我把它放在了开头`controllerWillChangeContent:`

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    [[UIApplication sharedApplication].keyWindow findAndResignFirstResponder];
    ...
} 
```

我`findAndResignFirstResponder` [从这个 SO 答案中找到](https://stackoverflow.com/a/1823360)

# xaml - 如何开发移动磁贴（切换内容）

> ID：12894182
> 
> 赞同：0
> 
> 时间：2012-10-15T10:58:56.180
> 
> 标签：xaml, windows-8, microsoft-metro, tiles

我需要在应用程序 Windows 8 Metro 中创建移动磁贴。瓷砖必须交替显示文本 3 秒，然后切换以显示图像 5 秒，就像在 windows8 的桌面上一样。请问我该怎么做？？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:55:56.807

除了计时 TileWidePeekImageAndText01 完全一样。它显示的是图片而不是文本，并且每 2-3 秒循环一次。

[平铺模板目录](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:15:55.673

你不能这样做，因为动态磁贴的显示时间是由操作系统决定的。

# java - Java + Oracle 连接 - 少量完成后拒绝

> ID：12894193
> 
> 赞同：1
> 
> 时间：2012-10-15T10:59:31.767
> 
> 标签：java, ojdbc

为了确保我正确地创建和关闭数据库连接，我编写了以下代码。这是一个简单的 java 代码，只有核心 java、Oracle 瘦客户端，连接到 Oracle 10g XE 实例。我曾期望这段代码可以毫无问题地运行——因为它只是创建和关闭连接（在一个线程中）——多次。但问题是在运行几次（20ish）后会引发错误。

编码：

```
public class TestConnection {
private final static Logger logger = LoggerFactory
        .getLogger(TestConnection.class);

@Rule
public ContiPerfRule i = new ContiPerfRule();

@Test
@PerfTest(invocations = 100, threads = 1)
@Required(max = 1200, average = 1000)
public void test() {

    Connection connection = null;
    try {
        // Load the JDBC driver
        String driverName = "oracle.jdbc.driver.OracleDriver";
        Class.forName(driverName);

        // Create a connection to the database
        String serverName = "127.0.0.1";
        String portNumber = "1521";
        String sid = "XE";
        String url = "jdbc:oracle:thin:@" + serverName + ":" + portNumber
                + ":" + sid;
        String username = "funngames";
        String password = "funngames";
        connection = DriverManager.getConnection(url, username, password);
        assertNotNull(connection);
        logger.debug("Connection made.");

    } catch (ClassNotFoundException e) {
        logger.debug(e.getMessage());
    } catch (SQLException e) {
        logger.debug(e.getMessage());
    } finally {
        if (connection != null) {
            try {
                connection.close();
                logger.debug("Connection broken.");
            } catch (SQLException e) {
                logger.debug(e.getMessage());
                fail("The connection could not be closed.");
            }
        }
    }
} 
```

}

它抛出的错误是

```
ORA-12519, TNS:no appropriate service handler found 
```

重要的是要注意，如果我只运行一次 - 而不是上面代码片段中显示的 100 次 - 它绝对可以正常工作。如果我运行它 100 次，它会运行几次（20 - 25 次），然后退出并出现上面显示的错误。例如，该片段显示许多连接已打开并已成功关闭，但之后立即开始抛出错误。

```
 foo.bar.database.TestConnection.test
16:39:17.854 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:17.854 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:17.869 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:17.869 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:17.885 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:17.885 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:17.901 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:17.901 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:17.916 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:17.916 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:17.932 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:17.932 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:17.948 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:17.948 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:17.979 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:17.979 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:17.994 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:17.994 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:18.010 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:18.010 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:18.026 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:18.026 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:18.041 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:18.041 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:18.057 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:18.057 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:18.073 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:18.073 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:18.088 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:18.088 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:18.104 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:18.104 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:18.119 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:18.119 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:18.135 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:18.135 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:18.151 [main] DEBUG foo.bar.database.TestConnection - Connection made.
16:39:18.151 [main] DEBUG foo.bar.database.TestConnection - Connection broken.
16:39:18.166 [main] DEBUG foo.bar.database.TestConnection - Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found
The Connection descriptor used by the client was:
127.0.0.1:1521:XE 
```

任何想法，这种情况有什么问题？

如果你想了解更多关于我到底想要做什么的背景信息，我已经在这里写了[博客。](http://techforenterprise.blogspot.hk/2012/10/java-and-database.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:48:59.450

行。发现了问题。

假设 - 连接关闭位发生在两个级别 1\. java 代码 2\. 数据库服务器。在我的代码中，java 位关闭连接的速度比数据库服务器能够关闭它们的速度更快（预计是因为它确实是数据库服务器在那里完成了大部分工作）。因此存在一些竞争条件，Java 代码假设先前的连接已关闭并试图创建一个新连接，而数据库服务器尚未能够关闭先前的连接。

证明 - 如果我让 java 代码在它设法关闭连接后稍等片刻，那么这段代码可以正常工作。我让这段*修改*过的 java 代码在循环中执行了 1000 次，它运行良好。将此与我报告此问题时的事实进行比较，代码在绊倒之前只会运行大约 20 到 25 次。

新代码（只是修改）...

```
...
finally {
if (connection != null) {
    try {
        connection.close();
        logger.debug("Connection broken.");
        Thread.sleep(1000);
    } catch (SQLException e) {
        logger.debug(e.getMessage());
        e.printStackTrace();
        fail("The connection could not be closed.");
    } catch (InterruptedException e) {
        logger.debug(e.getMessage());
        e.printStackTrace();

    }
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:06:27.533

我猜您的连接没有正确关闭，因为该错误意味着没有可用的侦听器来处理请求。您是否在日志中收到“连接中断”文本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:10:55.050

可能您的连接没有被关闭。我建议您让 java 为您完成关闭。现在有实现的[AutoClosable](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)接口`Connection`。它的详细信息在[这里](http://www.oracle.com/technetwork/articles/java/trywithresources-401775.html)。试试这个，看看你是否仍然得到错误。如果可能，最好让 API 为您完成工作。

# django - django 过滤器对两列使用两个列表

> ID：12894201
> 
> 赞同：1
> 
> 时间：2012-10-15T10:59:55.227
> 
> 标签：django

我有一个场景，我必须将名字和姓氏与列表进行匹配，但我找不到解决方案。对于一个记录，它工作正常，但对于列表它不起作用。

```
user.objects.filter(firstname ='john',lastname='doe') it is working fine. 
```

但如果是列表：

```
list1 = ['john','mark','john']
list2 = ['doe','waugh','peter'] 
```

约翰彼得在 db 中不可用。但由于第一个 match__ in，它带来了第三个记录。此外，在 db 中它有很多记录，但它应该返回 john doe 和 mark waugh。它应该跳过约翰彼得。

```
user.objects.filter(firstname__in =list1,lastname__in=list2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-13T13:54:12.427

一种可能的解决方案是使用[Q](https://docs.djangoproject.com/en/1.10/topics/db/queries/#complex-lookups-with-q-objects)对象：

```
query = Q()
for firstname, lastname in zip(list1, list2):
    query |= Q(firstname=firstname, lastname=lastname)
user.objects.filter(query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:45:07.703

行为是正确的，因为 __in 不是一个精确的查询。

你有两个选择：

1）切换到每个元组（名字，姓氏）的精确查询，就像在第一个示例中所做的那样

2) 在第二个查询上链接一个[排除过滤器](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-specific-objects-with-filters)，以避免显示不在 list1 和 list2 中的条目

# c# - Microsoft Project 计划转换为 PDF C#

> ID：12894212
> 
> 赞同：0
> 
> 时间：2012-10-15T11:00:54.080
> 
> 标签：c#, ms-project

我想使用 Office DLL 将 Microsoft 项目计划文件转换为 PDF。
谁能提供我的示例代码？

我不想使用任何第三方 DLL。我想通过使用 MS Office 2010 DLL 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:06:18.720

没有将 MPP 转换为 PDF 的内置 API。无论如何，[Document.SaveAs Method (Publisher)](http://msdn.microsoft.com/en-us/library/ff940221.aspx)允许您将其保存为多种文件格式，包括 HTML 和 RTF。

# android - Android X,Y 确定图像

> ID：12894213
> 
> 赞同：0
> 
> 时间：2012-10-15T11:00:56.193
> 
> 标签：android, android-layout, imageview, coordinates

我正在使用以下 xml 进行布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingLeft="10dip"
    android:paddingRight="10dip"
    android:paddingBottom="20dip"
    tools:context=".ZoneSelectionActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:paddingTop="10dip"
        android:textSize="35sp"
        android:paddingBottom="10dip"
        android:text="@string/affected_zone" />

    <FrameLayout
        android:id="@+id/imageHolder"
        android:layout_gravity="center"
        android:background="#0B3861"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ImageView
                android:id="@+id/subsegment"
                android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
                android:contentDescription="subsegment"
                android:src="@drawable/sub_segment01" />

    </FrameLayout>  

</LinearLayout> 
```

这是我的屏幕截图。我想要屏幕中标记点的坐标（图像左上角的x，y）。如何确定？

![截屏](../Images/05b51e57b91da3a409c918505a860882.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:04:22.243

```
int coords[] = {0,0};
yourImageView.getLocationOnScreen(coords);
int x = coords[0];
int y = coords[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:09:37.667

使用`View.getLocationOnScreen()`。您只能在布局阶段之后调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:10:42.460

我不确定 ImageView 是否提供了一种方法来获取其图像在屏幕上的位置。

您只能查询 ImageView 本身的位置。

尝试使用 ImageView.getImageMatrix() 但我不确定当图像居中（未缩放）时是否填充

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T12:19:20.600

尝试

```
View v;
int x = v.getLeft();
int y = v.getTop(); 
```

# delphi - 如何在 Delphi 2009 中使用 MS UI 自动化

> ID：12894215
> 
> 赞同：1
> 
> 时间：2012-10-15T11:00:59.073
> 
> 标签：delphi, interop, delphi-2009, microsoft-ui-automation

我有一个 C# 应用程序，它使用 Microsoft UI 自动化功能，例如像`AutomationElement.RootElement.FindFirst(...)`.

现在我需要在 Delphi 2009 中做同样的事情（使用 MS UI 自动化）。

我怎样才能

a) 声明我的 Delphi 代码使用 MS UI 自动化库和 b) 进行如下调用`AutomationElement.RootElement.FindFirst(...)`

?

有几个教程（[教程 1](http://edn.embarcadero.com/article/32754)，[教程 2](http://www.blong.com/Conferences/BorCon2004/Interop2/COMNetInterop.htm)）解释了如何打包自己的 .NET 代码以便它可以与 Delphi 一起使用，但在我的情况下，我需要在 Delphi 中使用“预打包”（已经安装）程序集。

**更新 1**

现在我可以`AutomationElement.RootElemeent`在一台机器上访问，但它在另一台机器上不起作用。

我怎样才能找出原因，为什么在`uiAutomation := CoCUIAutomation.Create;`第二台机器上尝试执行失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:54:35.827

如评论中所述，您必须将 UI 自动化类型库（COM 对象）导入您的项目，这可以通过 Delphi 2010 中的“导入组件”向导（组件 -> 导入组件）来完成。

Microsoft 使 COM 对象的接口非常接近于它的 .NET 对应物，因此如果您已经熟悉 .NET 自动化库，那么使用它应该不会有太多麻烦。

# sql - 使用多个选项排序

> ID：12894216
> 
> 赞同：0
> 
> 时间：2012-10-15T11:01:01.723
> 
> 标签：sql, oracle

我有一个 SQL 查询，我想按类型、顺序和类别对数据库进行排序。我可以查询所有这三个吗？

```
select * from t_person where name=xyz order by type,category,order 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:09:09.500

尝试这个：

使用`""`（双引号）转义保留关键字**顺序**

```
select * from t_person where name='xyz'
order by type,category,"order" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:12:01.960

使用双引号进行正确查询：

```
select * from t_person where name='xyz' order by type,category,"order" 
```

# freeswitch - 如何使用带有 freeswitch 的服务器呼叫内部 sip 电话

> ID：12894219
> 
> 赞同：1
> 
> 时间：2012-10-15T11:01:20.170
> 
> 标签：freeswitch

我想从具有 freeswitch 的服务器向已注册并连接且分机号为 1000 的 sip 电话进行内部呼叫

我相当确定我使用的是origin sofia，并且我一直在尝试几种组合但没有结果。我一直在尝试的那种事情是

```
 originate sofia/internal/1000@[my IP address] &park{} 
```

我得到了结果

> -ERR NO_USER_RESPONSE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:24:36.540

我目前不在我的实验室，但我相信您可以使用“user/1000”作为第一个目的地。“sofia/internal/1000”也应该可以工作。

# javascript - 谷歌翻译小部件 - 翻译完成回调

> ID：12894222
> 
> 赞同：10
> 
> 时间：2012-10-15T11:01:31.710
> 
> 标签：javascript, google-translate

我在我的一个网站上使用谷歌翻译小部件，并使用以下谷歌提供的代码：

```
<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script> 
```

我的问题：翻译在页面加载后运行，但我还有一个脚本，可以根据它们的宽度自动调整主要导航元素的大小。

这在翻译完成之前运行，因此它会根据未翻译的英文标签调整大小。一旦翻译改变了导航措辞，导航元素需要调整大小以适应新翻译的单词，因为它们的大小（宽度）可能与英文不同。

在运行代码以调整主导航的大小之前，我尝试调用 Google 翻译代码，但翻译异步运行，因此我的代码在翻译完成之前运行。

翻译完成时是否会引发回调事件（或以某种方式检测翻译何时完成），所以我可以在尝试调整导航大小之前等待？

此外，我需要在页面完成翻译后运行脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T15:46:05.467

这是我最终使用的修复程序：

```
jQuery(function(){
    firstMenu = $("#nav li:first").text();

    setTimeout(waitNav, 500);
});

function waitNav() {

    if (firstMenu != $('#nav li:first').text()) {

        initNav();
        firstMenu = $('#nav li:first').text();
        setTimeout(waitNav, 500);

    }
    else {
        setTimeout(waitNav, 500);
    }

} 
```

基本上，继续检查已知文本是否已更改（在这种情况下，它是导航块中的第一项）。

如果它已更改，则意味着翻译器已运行，请运行翻译后需要运行的代码（此处为 initNav()）。

如果用户选择另一种语言，我会不断检查更改。

它并不完美，但它对我有用:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-01T08:49:08.733

您可以检测到这样的变化：

```
$('#some-translatable-element').bind('DOMSubtreeModified', function() {
  yourCallback();
}); 
```

缺点是该事件被多次触发，因为谷歌翻译在该过程中进行了多次更改。

一个建议是检测页面上最后一个元素的变化，因为你知道上面的所有元素都已翻译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-17T09:17:50.720

```
$( document ).ready(function() {
    $('#google_translate_element').bind('DOMSubtreeModified', function() {
        var val = $(this);
        var strlang = "" + val[0].innerText + "";
        console.log(strlang); // print your selected language in console
    });
}); 
```

# ruby-on-rails - 减轻过渡到 Rails 4 的痛苦

> ID：12894224
> 
> 赞同：6
> 
> 时间：2012-10-15T11:01:36.687
> 
> 标签：ruby-on-rails, upgrade, future-proof

我现在正在开发 Rails 3.2 应用程序，但我知道 Rails 4 指日可待。在实现我的应用程序时，我现在应该注意哪些事情，以便在正式​​发布或可能在几个点发布之后更容易迁移到 Rails 4？我知道某些功能将被拆分为 gem，但是不能保证 Rails 4.1+ 中的支持。

我已阅读升级指南：[http](http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0) ://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0和发行说明：[http://edgeguides。 rubyonrails.org/4_0_release_notes.html](http://edgeguides.rubyonrails.org/4_0_release_notes.html)。

在这一点上，我更感兴趣的是找出在升级过程中会让我头疼的问题，而不是 Rails 4 的新的闪亮特性。

因此，基于互联网上的阅读和片段，我目前拥有的是：

*   至少升级到 Ruby 1.9.3。
*   不要使用插件 - 使用 gems 代替。
*   ActiveRecord::IdentityMap 不会出现在 Rails 4 中。
*   ActiveResource 不会成为核心 Rails 4 的一部分，但会在一个单独的 gem ( [activeresource](https://github.com/rails/activeresource) ) 中。可能考虑 REST API 的其他 ORM。
*   不要在 ActiveRecord 中使用动态查找器方法，`find_all_by_*`因为`scoped_by_*`这些方法将被弃用。改为使用`where`。
*   避免使用基于哈希的查找器：例如`User.find(:all, :conditions => ...`并`where`改用。
*   ActiveRecord 中的 Eager Evaluated Scope：范围将需要一个 lambda。例如`scope :red, -> { where(color: 'red') }`不使用`scope :red, where(color: 'red')`。
*   ActiveRecord::SessionStore 现在将是一个单独的 gem ( `activerecord-session_store`)。
*   使用 ActiveSupport::Logger 而不是 BufferedLogger。
*   开始使用[strong_parameters](https://github.com/rails/strong_parameters) gem 来预期 Rails 4 中的强参数。这涉及到将 attr_accessor、attr_accessible 和 attr_protected 放入 ActiveRecord 级别，`params.require`以强制提供正确的参数。

...但我敢肯定还有更多。谁能提供一份全面但常识性的清单以供注意？我不是在寻找 Rails 4 中弃用的完整列表——这是需要注意的大事，我现在可以做些什么来为它们提供未来证明。

# java - 使用 shiro 1.2.1 对数据库进行身份验证

> ID：12894227
> 
> 赞同：5
> 
> 时间：2012-10-15T11:01:47.450
> 
> 标签：java, security, authentication, guice, shiro

我在我的项目中使用 Apache Shiro。目前我正在使用 1.1.0 版本，现在我正在尝试将 Shiro 组件迁移到最新版本 1.2.1。但是，当我尝试对数据库进行用户身份验证时，由于某种原因它无法正常工作，并且我没有收到任何错误，但身份验证没有发生。

以下是我在 shiro.ini 文件中提供的数据库详细信息。

```
[main]
cacheManager = com.cacheManager.ShiroCacheManager
securityManager.cacheManager = $cacheManager

jdbcRealm=org.apache.shiro.realm.jdbc.JdbcRealm

jdbcRealm.authenticationQuery = select user_pass from users where user_name = ?
jdbcRealm.userRolesQuery = select role_name from user_roles where user_name = ?

ds = com.mysql.jdbc.jdbc2.optional.MysqlDataSource
ds.serverName = 192.168.0.75
ds.port  = 3306
ds.user = test
ds.databaseName = appfuse
jdbcRealm.dataSource = $ds 
```

但它仍然没有击中数据库。我正在使用 tomcat 服务器并尝试使用 guice 和 shiro 集成示例...

非常感谢您在这方面的任何帮助，并提前感谢您的帮助！

谢谢和问候，
古普塔·卡塔卡姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:00:13.933

1.1 和 1.2 之间有很多不同的地方可能会影响您的问题......这是我认为最有可能的一个

*   [SHIRO-178](https://issues.apache.org/jira/browse/SHIRO-178) shiro.ini 现在应该在 WEB-INF 文件夹中。你的动了吗？

此外，还有许多与身份验证相关的更改：

1.  [SHIRO-23](https://issues.apache.org/jira/browse/SHIRO-23)将 Jsecurity 与 Guice 集成
2.  [SHIRO-213](https://issues.apache.org/jira/browse/SHIRO-213)密码和哈希管理
3.  [SHIRO-279](https://issues.apache.org/jira/browse/SHIRO-279)创建一个简单的命令行实用程序来散列密码
4.  [SHIRO-280](https://issues.apache.org/jira/browse/SHIRO-280)创建 PasswordService 以自动化用户密码管理技术
5.  [SHIRO-287](https://issues.apache.org/jira/browse/SHIRO-287)使 web 配置的 SecurityManager 可以被非请求线程静态访问

我认为这是第一个，但[可以在此处找到](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310950&version=12315478)1.2.0 和[1.2.1的完整发行说明列表](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310950&version=12319511)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:37:55.670

如果您使用的是 Spring，请使用此

创建数据库accessdb

```
<bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean">
    <property name="securityManager" ref="securityManager" />
    <property name="loginUrl" value="/login" />
    <property name="successUrl" value="/homePage" />
    <property name="unauthorizedUrl" value="/unauthorized" />
    <property name="filters">
        <util:map>
            <entry key="authc">
                <bean class="org.apache.shiro.web.filter.authc.PassThruAuthenticationFilter" />
            </entry>
        </util:map>
    </property>
    <property name="filterChainDefinitions">
        <value>
            /favicon.ico = anon
            /assets/** = anon
            /** = authc
        </value>
    </property>
</bean>

<bean id="shiroCacheManager" class="org.apache.shiro.cache.ehcache.EhCacheManager">
    <property name="cacheManagerConfigFile" value="classpath:ehcache.xml"></property>
</bean>

<bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager">
    <property name="cacheManager" ref="shiroCacheManager" />
    <property name="realm" ref="myRealm" />
</bean>
<bean id="lifecycleBeanPostProcessor" class="org.apache.shiro.spring.LifecycleBeanPostProcessor" />

<bean id="myRealm" class="org.apache.shiro.realm.jdbc.JdbcRealm">
    <property name="dataSource" ref="shiroDatasource" />
    <property name="permissionsLookupEnabled" value="true" />
</bean>

<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="shiroDatasource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url"
        value="jdbc:mysql://localhost:3306/accessdb?autoReconnect=true&amp;zeroDateTimeBehavior=convertToNull" />
    <property name="username" value="username" />
    <property name="password" value="passwor" />
    <property name="validationQuery" value="SELECT 1" />
</bean> 
```

# php - 调用未定义函数 FOS\UserBundle\Util\mb_convert_case()

> ID：12894232
> 
> 赞同：6
> 
> 时间：2012-10-15T11:02:20.613
> 
> 标签：php, symfony, debian, mbstring

我收到错误

```
Call to undefined function FOS\UserBundle\Util\mb_convert_case() app_path/vendor/bundles/FOS/UserBundle/Util/Canonicalizer.php on line 18 
```

当我尝试加载固定装置时会发生这种情况。

第一步是安装 mbstring.so ext，所以我编译了 php

```
--enable-mbstring 
```

比成功编译 mbstring ext

```
phpize
./configure
make
make install 
```

并添加

```
extension=mbstring.so 
```

到我的 php.ini 文件。不幸的是，我仍然收到该错误，并且 php -m 没有将 mbstring 显示为加载的扩展名。怎么了？

任何帮助将不胜感激。

PHP 5.4.7，Debian 莱尼

从 php check.php 输出

```
[[WARNING]] Checking that the mb_strlen() function is available: FAILED
            *** Install and enable the mbstring extension *** 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-04T07:34:28.640

例如，在 CentOS 上，您需要安装这个 php 模块：

```
yum install php-mbstring 
```

[如https://stackoverflow.com/a/1216284/2071028](https://stackoverflow.com/a/1216284/2071028)上所写

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-19T08:30:39.820

在 debian 上，安装模块 php-mbstring

```
apt-get install php-mbstring 
```

如有必要，重新启动 apache2

```
service apache2 restart 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T12:33:12.220

如果您使用的是 Windows，请尝试在 php.ini 中使用完整路径设置扩展名，例如：extension="/FULL/PATH/mbstring.so"。在其他情况下，您需要将 mbstring.so 文件放在模块目录（所有其他 .so 所在的位置）中。

# iphone - 在社交网站上分享应用程序的数据

> ID：12894235
> 
> 赞同：0
> 
> 时间：2012-10-15T11:02:36.420
> 
> 标签：iphone, objective-c, ios, xcode, facebook

我正在尝试在社交网站上分享我的应用程序数据。我正在尝试实现 sharekit，但遇到了很多错误。除了 sharekit 之外，还有其他方法可以将我的应用程序分享到至少 facebook 和 twitter 的社交网站吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:29:06.627

如果您想定位 Twitter 和 Facebook，那么还值得研究 iOS 社交框架。

请注意，Facebook 仅从 iOS6 开始受支持，但这个 api 在使用上比其他用于用户处理、发布等的解决方案要简单得多......

你可以找到很多关于这个主题的好教程（例如[http://www.raywenderlich.com/21558/beginning-twitter-tutorial-updated-for-ios-6](http://www.raywenderlich.com/21558/beginning-twitter-tutorial-updated-for-ios-6)）

# c# - 如何为 Ubuntu 12.04 开发 C#.NET 应用程序

> ID：12894237
> 
> 赞同：0
> 
> 时间：2012-10-15T11:02:51.553
> 
> 标签：c#, wpf, sql-server-2008, ubuntu, ubuntu-12.04

我想使用在 Ubuntu 12.04 操作系统上运行的 C#.net (Database - SQL Server) 创建一个桌面应用程序。

如何将我的 C# .Net 代码转换为与 Ubuntu 兼容的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:04:39.640

您可以使用[Mono](http://www.mono-project.com/Main_Page)开发可以在 Linux 上运行的 C# 应用程序

就在 Linux 中使用 SQL Server 而言，您可以使用[SQL Server® ODBC Driver 1.0 for Linux](http://www.microsoft.com/en-gb/download/details.aspx?id=28160)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:04:48.657

使用开源[Mono](http://www.mono-project.com/Main_Page)框架

# python - 用于检查非英文字符是中文还是日文的 Python 脚本

> ID：12894241
> 
> 赞同：0
> 
> 时间：2012-10-15T11:02:54.743
> 
> 标签：python

我有通过命令行调用 Windows 软件（collada 精炼厂）的 python 代码。它在英国运行良好，但在中国/台湾的机器上无法运行。当文件名/文件路径包含任何中文字符时，此炼油厂无法找到或打开文件。

Python代码：

```
# somewhere in the code
subprocess.popen("refinery -i <inputfile.dae> -o <outfile.dae> -x polylists2triangles", shell=True).wait()) 
```

当这个 inputfile.dae （我必须只给出名称，然后炼油厂将当前目录的绝对路径添加到它并使这个输入文件名的完整绝对路径>奇怪，但这不是问题）被炼油厂读取时，它是否会引发错误能够打开文件。

我想在 python 中添加检查，以便如果输入文件名/路径包含中文或非英文字符，则会引发用户定义的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:54:53.007

尝试在第一个解释器行之后定义文件编码

```
# _*_ coding=utf-8 _*_ 
```

并将文件另存为 utf-8

# asp.net - 多个 Web.Config 文件 - 从代码的角度来看

> ID：12894242
> 
> 赞同：0
> 
> 时间：2012-10-15T11:02:58.980
> 
> 标签：asp.net, orchardcms

ASP.NET 允许在站点结构中的子级别使用 Web.Config 文件。但是，我找不到任何文章讨论从代码中的外观。

在 Orchard CMS 中，整个商店都有配置文件。一个只包含 .CSS 文件的文件夹中甚至还有一个配置文件！我是大型 ASP.NET 应用程序的新手，所以...

有人可以告诉我我的假设是否正确。

*   配置文件会影响服务器设置，从而影响服务器如何处理对站点结构更下方的资源的请求。

*   从代码的角度来看，如果同一类中的同一行代码在请求期间查询配置文件，`http://level1.resource`那么它可能会读取与在请求期间执行相同代码时不同的值`http://level1/level2.resource`（如果有 web.config在 2 级）

    *   总的来说，它的工作方式是基于当前的请求路径。

正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:41:57.143

您可以在子文件夹级别使用多个 web.config 文件。每个文件夹都将包含其自己的 web.config。不能在同一级别使用多个 Web.config 文件。

下面是根文件夹 web.config 的代码

```
<?xml version="1.0"?>
<configuration>
<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>
 <appSettings>
 <add key="root" value="This is from root web.config"></add>
 <add key="MySetting" value="This my settings is from root web.config"></add>
 </appSettings>
</configuration> 
```

以下是子文件夹 web.config 的代码。

```
<?xml version="1.0"?>
<configuration>
<system.web>
</system.web>
<appSettings>
 <add key="sub" value="This is from sub web.config settings"></add>
 <add key="MySetting" value="This my settings is from sub folder web.config"></add>
</appSettings>
</configuration> 
```

在 C# 中，您可以访问不同配置文件的设置，如下所示。System.Web.Configuration.WebConfigurationManager.AppSettings.Get("Root"); System.Web.Configuration.WebConfigurationManager.AppSettings.Get("MySetting")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T07:43:27.077

这是一个老问题，但我只是根据原始帖子在 Orchard CMS 上下文中专门问了自己同样的问题，并且我得到了 Orchard 特定的答案。

在 Orchard CMS 的根目录中，有一个 web.config 想要阻止所有用户请求单独的静态文件。例如，您不希望人们从主题文件夹下载placement.info 或theme.txt。这是一个很好的“阻止一切，允许你需要的东西”的方法。

```
<handlers accessPolicy="Script">
    <!-- Clear all handlers, prevents executing code file extensions or returning any file contents. -->
    <clear />
    <!-- Return 404 for all requests via a managed handler. The URL routing handler will substitute the MVC request handler when routes match. -->
    <add name="NotFound" path="*" verb="*" type="System.Web.HttpNotFoundHandler" preCondition="integratedMode" requireAccess="Script" />
    [...]
</handlers> 
```

问题是，在 Scripts（包含静态 js 文件）、Styles（仅包含大量静态 css 文件）或 Content（例如包含静态图像）等子文件夹中，您当然希望允许 Web 浏览器请求个人文件。因此，在这些子文件夹中，您有一个额外的 web.config，如下所示：

```
<handlers accessPolicy="Script,Read">
    <!-- For any request to a file exists on disk, return it via native http module. AccessPolicy="Script" above is to allow for a managed 404 page. -->
    <add name="StaticFile" path="*" verb="*" modules="StaticFileModule" preCondition="integratedMode" resourceType="File" requireAccess="Read" />
</handlers> 
```

PS：我目前正在玩主题，出于某种原因，我不得不在所有这些子 web.config 中的`<remove name="StaticFile"/>`每个之前添加。`<add name="StaticFile"...>`

# java - 表格单元格编辑器问题

> ID：12894244
> 
> 赞同：1
> 
> 时间：2012-10-15T11:03:02.923
> 
> 标签：java, swing, jtable, keylistener, tablecelleditor

我正在构建一个自定义表格单元格编辑器，以便在编辑期间调整行高。我有这个代码，但不是调整单元格的大小，而是调整整个面板或框架的大小。当我尝试在单元格中输入字符时，主框架宽度缩小到几个像素。任何人都可以看到问题吗？

```
class MyTableCellEditor extends AbstractCellEditor implements TableCellEditor {

    MyTextpane component = new MyTextpane();
    MyTable table;
    private int row;
    private int col;

    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected,
            int rowIndex, int vColIndex) {

        ((MyTextpane) component).setText((String) value);
        component.addKeyListener(new KeyListener1());
        this.table =(MyTable) table;
        this.row = rowIndex;
        this.col = vColIndex;
        return component;
    }

    public Object getCellEditorValue() {
        return ((MyTextpane) component).getText();
    }

    public class KeyListener1 implements KeyListener {

        @Override
        public void keyTyped(KeyEvent ke) {
        }

        @Override
        public void keyPressed(KeyEvent ke) {
        }

        @Override
        public void keyReleased(KeyEvent ke) {
            adjustRowHeight(table, row, col);
        }
        private java.util.List<java.util.List<Integer>> rowColHeight = new ArrayList<java.util.List<Integer>>();
        private void adjustRowHeight(JTable table, int row, int column) {
        //The trick to get this to work properly is to set the width of the column to the
        //textarea. The reason for this is that getPreferredSize(), without a width tries
        //to place all the text in one line. By setting the size with the with of the column,
        //getPreferredSize() returnes the proper height which the row should have in
        //order to make room for the text.
        int cWidth = table.getTableHeader().getColumnModel().getColumn(column).getWidth();
        setSize(new Dimension(cWidth, 1000));
        int prefH = getPreferredSize().height;
        while (rowColHeight.size() <= row) {
            rowColHeight.add(new ArrayList<Integer>(column));
        }
        java.util.List<Integer> colHeights = rowColHeight.get(row);
        while (colHeights.size() <= column) {
            colHeights.add(0);
        }
        colHeights.set(column, prefH);
        int maxH = prefH;
        for (Integer colHeight : colHeights) {
            if (colHeight > maxH) {
                maxH = colHeight;
            }
        }
        if (table.getRowHeight(row) != maxH) {
            table.setRowHeight(row, maxH);
        }
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:04:36.577

作为在编辑时调整行大小的替代方法，请考虑[`TablePopupEditor`](https://stackoverflow.com/a/3591230/230513)使用`JTextArea`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:08:34.930

[看看](https://stackoverflow.com/a/12867849/714968)

*   我对 doLayout 的回答（可以从 CellEditor 中解雇）

*   或（不仅仅是使用 TextUtils 的舒适方式）@kleopatra 关于 getPreferredSize 的评论

*   这可能（非常）混淆用户，

*   因为我想念 JScrollPane，所以必须重写 MaxSize，JScrollPane 的最大尺寸是高度和重量，否则 CellEditor 的一部分可能会超出屏幕范围......，

*   不要那样做，把 JScrollPane 和 JTextComponents 放在那里，覆盖 CellEditor 的 PreferredSize，

* * *

一切都错了，我的看法，

*   使用 JTextComponent 创建应用程序模式弹出窗口（仅基于 JDialog，因为 JWindow 不分配对 JTextComponent 的输入），在那里为 ESC 键实现 KeyBindings，对于 JDialog 丢失的 Fucus 也是如此，然后可以不装饰而没有任何问题

放在那里`Save JButton`

*   从保存按钮重新编辑到所选单元格的输出，您不能从 JTable 内的应用程序模式中失去焦点

*   内容应该被格式化、过滤、修改一个 JDialog 用于 JTable 中的所有单元格

# ruby-on-rails - Rails 中的友谊/追随者功能

> ID：12894245
> 
> 赞同：0
> 
> 时间：2012-10-15T11:03:07.607
> 
> 标签：ruby-on-rails

任何人都实现了一种管理用户朋友（两种方式的友谊）和数据库中的关注者的方式。

意味着我想要实现的目标：1）user1向user2发送连接请求。2）然后 user2 接受 user1 作为朋友或关注者或拒绝它。3) 如果 user2 接受 user1 作为朋友，那么这个友谊就是双向友谊。

我正在考虑处理这个问题：1）我将创建一个友谊表。2) 维护用户的关系栏是follower/friend。3）如果用户是朋友，那么我将创建两个条目以从两端维护朋友关系。

您能否建议我处理这种情况的最佳方法（宝石/插件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:11:37.500

您应该与以下领域建立友谊

```
1] user_id
2] friend_id 
3] status 
```

起初，当用户发送好友请求时`status`必须是`Pending`，当好友`accept/reject`请求时，它应该更改为`Accepted/Rejected`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:17:05.013

您可以创建一个包含列的表 - USER_A、USER_B、RELATION。现在，您可以创建一个常量或枚举来定义 USER_A 和 USER_B 之间的关系。例如，0 代表没有关系，1 代表 USER_A -> USER_B（用户 A 跟随用户 B），2 代表 USER_B -> USER_A（用户 B 跟随用户 A），3 代表 USER_A <-> USER_B（这意味着双向。）然后，如果您不需要历史记录，则可以更新同一行，否则您可以在关系更改时再添加一行。希望有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:21:56.570

您可以查看为您的 ActiveRecord 模型提供喜欢、关注和提及的[社交gem。](https://github.com/cmer/socialization)

# jquery - each() 完成后触发函数

> ID：12894247
> 
> 赞同：0
> 
> 时间：2012-10-15T11:03:08.220
> 
> 标签：jquery

这与这个问题略有相关 [Invoking a jQuery function after .each() has completed](https://stackoverflow.com/questions/2358205/invoking-a-jquery-function-after-each-has-completed)

但该解决方案似乎并不适合我。

基本上我有一段 JavaScript 可以计算一些元素的宽度：

```
var totalWidth = 0;
$element.find('li').each(function () {
    totalWidth += $(this).width();
}); 
```

在此之后，我想使用宽度来设置另一个元素：

```
$element.width(totalWidth); 
```

如果我附加调试器，它可以工作，但如果我只是运行它，它不会。这让我认为宽度是在`.each()`完成之前设置的。

我尝试使用`.promise()`来解决此问题，但似乎没有什么不同。

```
var totalWidth = 0;
$element.find('li').each(function () {
    totalWidth += $(this).width();
});

$element.promise().done(function () {
    $element.width(totalWidth);
}); 
```

这是我的 HTML

```
<div class="carousel">
        <ul>
            <li>
                <img src="/Images/Travel2New/Adverts/advertHolder_1.png" />
            </li>
            <li>
                <img src="/Images/Travel2New/Adverts/advertHolder_2.png" />
            </li>
            <li>
                <img src="/Images/Travel2New/Adverts/advertHolder_3.png" />
            </li>
            <li>
                <img src="/Images/Travel2New/Adverts/advertHolder_4.png" />
            </li>
            <li>
                <img src="/Images/Travel2New/Adverts/advertHolder_5.png" />
            </li>
        </ul>
    </div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:05:56.450

由于您的宽度计算应该等到加载图形后，您可以尝试以下操作：

```
$(window).load(function () {
    var totalWidth = 0;

    $element.find('li').each(function () {
        totalWidth += $(this).width();
    });

    $element.width(totalWidth);
}); 
```

从[`load()`](http://api.jquery.com/load-event/)事件示例描述中我们可以看到：

> 当页面完全加载时运行一个函数，包括图形。
> 
> ```
> $(window).load(function () {
>     // run code
> }); 
> ```

请注意，目前该`load()`事件似乎已被[弃用](http://api.jquery.com/category/deprecated/)，因此您应该考虑您利用的 jQuery 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:10:39.570

好吧，这是已知的问题`.each`

你可以这样做

```
 var totalWidth = 0;

    var $elems = $element.find('li');

    (function fetch(i) {
        if(i >= $elems.length) return;  // no elems left

        var $elem = $elems.eq(i);
        totalWidth += $($elem).width(); 
        if(i+1==$elems.length) 
        {
         $element.width(totalWidth);
        }
        else
        {
         fetch(i + 1);  // next one
        }           
    })(0);  // start with first elem 
```

# java - 网络断开不会在 Java 中抛出 IOException

> ID：12894251
> 
> 赞同：1
> 
> 时间：2012-10-15T11:03:34.173
> 
> 标签：java, sockets

我有一个线程每 5 秒写入一次 TCP 套接字，连接到远程 TCP 端口（使用 Java .net 套接字，而不是 NIO）。为了您的信息，我没有在套接字层上配置任何超时（S0，..），它具有默认值。如果连接到远程 TCP 端口的网络电缆被移除，我的 java 线程没有收到任何 IO 异常，而是继续写入套接字。

有人可以指导我为什么我没有得到这些例外吗？我猜 write 方法应该通过 IOException 尝试每 5 秒写入一次套接字。

问候， 拉吉布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:08:58.307

这完全取决于您写入套接字的数量，以防您不定期刷新。如果您每 5 秒只写入几个字节，则缓冲区可能确实需要相当长的时间才能自动填充和刷新。异常应该最终出现。如果您确实刷新，那么您可能会忽略另一个网络管道，例如 WiFi，并且传输只是故障转移到该管道。

# python - 无法在 Plone 4 的导航 portlet 中排列项目顺序

> ID：12894255
> 
> 赞同：2
> 
> 时间：2012-10-15T11:03:40.523
> 
> 标签：python, navigation, plone, portlet

所以我为我的一个文件夹对象添加了这个导航portlet。此文件夹中有 10 个子节点。portlet 按我不想要的创建日期对项目进行排序，但我找不到更改此顺序的方法。我是否必须按照我想要的顺序重新添加这 10 个对象，或者我在这里缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:17:26.843

`getObjPositionInParent`默认设置按容器顺序（目录中的索引）对项目进行排序。

您可以通过拖动它们的排序句柄来更改容器中项目的顺序：

![在 Plone 中订购拖动手柄](../Images/53ebaf0d67f7bf0d1b00b2f7db48ec26.png)

这是在文件夹内容视图 ( `Contents`) 上。

如果您需要更改默认排序参数，因为您的*所有*内容应始终按字母顺序或按发布日期或类似方式排序，则必须更改 ZMI 中的导航树参数；在 ZMI 中找到该`portal_properties`工具，您将在其中找到`navtree_properties`属性表。将属性更改`sortAttribute`为不同目录索引的名称，以便对结果进行排序。

如果您创建了自定义 Archetypes 文件夹类型，请确保它继承自`plone.app.folder.base.BaseBTreeFolder`. 使用 Dexterity 时，`plone.dexterity.content.Container`默认情况下基类是可排序的。

# java - 如何在多个 Java 线程中使用 COM 服务器

> ID：12894257
> 
> 赞同：2
> 
> 时间：2012-10-15T11:03:44.727
> 
> 标签：java, multithreading, com

我工作的公司希望为某些软件提供一些功能，因为它可以应用于多种产品，并且这些产品是用不同的语言编写的，虽然都只在 Windows 上运行，但在 COM 服务器中实现它似乎是一个不错的选择。我使用 python 和 pywin32 扩展编写了 COM 服务器，因此访问它是后期绑定，我相信 IDispatch。

我现在正在尝试为 COM 服务器创建 Java 绑定，因为它需要使用调度接口，所以我决定使用 JACOB 来访问 COM（它似乎是最近更新的项目之一，并且符合我们的需求）。作为 COM 的新手，在 COM 服务器包装的库中并没有真正看到多线程的任何问题，起初我很少关注 COM 线程，所以它是 COM 对象的 Java 绑定，我没有使用提供的任何线程东西通过 JACOB，它的简单测试在 Oracle 的 JVM 中运行良好。

然而，很明显我不能忽略 COM 线程。一个问题是 Java 产品是使用 Excelsior Jet 编译的，由于某种原因，它没有在 Java 中释放 COM 对象，因此 COM 服务器（它是一个单独的 .exe）在退出应用程序后继续运行。另一个问题是我们确实需要使用来自多个线程的 COM 对象，我最初的方法是解决 COM 对象不能在多个线程中使用的问题。

我已经阅读了 JACOB 发行版中关于它如何处理 COM 对象的文档（关于引用计数 VS GC 的文档和关于多线程的文档）。我相信我了解这些以及如何在多个线程中使用 COM 对象并正确释放它们（对每个线程使用 JACOB 的 ComThread.Release() 确实会导致 Excelsior Jet 也释放 COM 对象）。

我的想法是 COM 服务器应该可以使用多线程单元，因此根据 JACOB 文档，这仅需要每个线程在使用 COM 对象之前调用 com.jacob.com.ComThread.InitMTA() 然后调用 com.jacob .com.ComThread.Release() 在每个线程结束时使用 COM 对象。该文件还建议我可能希望 JACOB 创建一个主 STA，因此这也意味着在应用程序关闭时调用退出主 STA。

我的问题是，这个在线程开始时调用的东西似乎不太适合 Java 的做事方式，有什么办法可以尝试将应用程序的其余部分与 COM 的这些特性隔离开来，特别是在穿线区？

我考虑过，由于应用程序正在使用我的绑定而不是直接使用 COM 对象，这些东西可以在那些包装类中处理吗？但是，我似乎只在访问 COM 对象的包装对象的每个方法中调用 ComThread.InitMTA() 和 ComThread.Release()。这感觉效率低下，但是我不知道对 ComThread.InitMTA() 和 ComThread.Release() 的调用实际上做了多少，所以它可能不像最初看起来那么糟糕。

我的另一个想法是，它在使用这个库的早期阶段，我认为我们实际上并没有使用 COM 服务器发布任何东西，所以可能有更好的技术可以使用（例如 RPC，可能是 XMLRPC）？目前做出这样的改变可能不会太痛苦。

为了提供一些关于该库正在做什么的上下文，它主要将各种语音输出 API 包装成一个（例如，提供一个用于访问 SAPI4、SAPI5 和其他一些的通用接口）。所以大多数电话只是告诉系统说点什么，让语音静音或更改设置。一般来说，与库的通信非常简单（我认为返回一个字符串数组就像它得到的一样复杂）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:25:54.410

这听起来像是一些面向方面编程（AOP）的非常好的候选者。Java 中的主导框架是[AspectJ](http://www.eclipse.org/aspectj/)，但大多数人在[Spring-AOP](http://static.springsource.org/spring/docs/3.0.x/reference/aop.html)的上下文中使用它。根据您的要求和架构，您可以朝不同的方向发展：

1.  编译时编织 - 切入点和建议在编译时由特殊编译器应用（“编织”）
2.  加载时编织 - 切入点和建议由 JVM 代理在运行时应用
3.  动态代理——切入点和建议在运行时通过将建议类包装在动态代理外观中来应用（这就是 Spring-AOP 的做法）

[在aspectj weaving](http://denis-zhdanov.blogspot.se/2009/08/weaving-with-aspectj.html)上找到了这篇相当不错的文章。

# iphone - 无法管理状态栏的 20 像素空间

> ID：12894262
> 
> 赞同：1
> 
> 时间：2012-10-15T11:04:17.760
> 
> 标签：iphone, objective-c, uistatusbar

我在仅包含 UITableView 的弹出视图中打开我的视图控制器。此视图以横向模式打开。它的编码如下：

```
OilChangeView *oilVC = [[OilChangeView alloc] initWithNibName:@"OilChangeView" bundle:nil];

       popView = [[UIPopoverController alloc] initWithContentViewController:oilVC];

        [popView setPopoverContentSize:CGSizeMake(480, 200)];
        [popView presentPopoverFromRect:btnOilChange.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES]; 
```

在 didSelectRowAtIndexPath 上，我将打开另一个处于纵向模式的视图，但当时状态栏不会从横向模式移动到纵向模式，这就是为什么当我打开新的视图控制器时，20 像素的空间仍然带有白色背景。它的编码如下：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(indexPath.row == 0)
    {
        ConventionalMotorOil *conventional = [[ConventionalMotorOil alloc] initWithNibName:@"ConventionalMotorOil" bundle:nil];
        [self presentModalViewController:conventional animated:YES];
    }
} 
```

我的观点截图如下：

![在此处输入图像描述](../Images/a3321628d5b63be4c393dc6ead90f9f2.png)

所以我的视图控制器正在从横向模式转移到纵向模式，但我的状态栏没有从横向模式转移到纵向模式。

和我分享你的想法。

# php - 从第一个客户端请求在 php 中启动 websocket 服务器

> ID：12894272
> 
> 赞同：10
> 
> 时间：2012-10-15T11:04:40.497
> 
> 标签：php, websocket

我正在尝试使用 websocket 来替换对服务器的常量 ajax 请求，以更新 ajax 信息。

据我所知，在客户端-服务器场景中，我应该从命令行启动一个 php websocket 服务器：

```
php -q myserver.php 
```

我想要获得的是在客户端第一次连接时启动服务器，并将此服务器用于所有其他客户端，**而不使用命令行**：

```
var socket = new WebSocket("ws://localhost:10000/myserver.php"); 
```

如果服务器没有运行，我想运行这个命令并为此客户端打开一个连接。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:15:35.130

是的，这是可能的，但你应该看看[phpwebsocket](http://code.google.com/p/phpwebsocket/)

```
var host = "ws://localhost:10000/myserver.php";
try{
  socket = new WebSocket(host);
  log('WebSocket - status '+socket.readyState);
  socket.onopen    = function(msg){ log("Welcome - status "+this.readyState); };
  socket.onmessage = function(msg){ log("Received: "+msg.data); };
  socket.onclose   = function(msg){ log("Disconnected - status "+this.readyState); };
}
catch(ex){ log(ex); } 
```

您运行的服务器端`php -q myserver.php`

```
log("Handshaking...");
list($resource,$host,$origin) = getheaders($buffer);
$upgrade = "HTTP/1.1 101 Web Socket Protocol Handshake\r\n" .
        "Upgrade: WebSocket\r\n" .
        "Connection: Upgrade\r\n" .
        "WebSocket-Origin: " . $origin . "\r\n" .
        "WebSocket-Location: ws://" . $host . $resource . "\r\n" .
        "\r\n";
$handshake = true;
socket_write($socket,$upgrade.chr(0),strlen($upgrade.chr(0))); 
```

phpwebsocket默认不支持`RFC-6455`所以你也可以看看下面

*   [https://github.com/ghedipunk/PHP-Websockets](https://github.com/ghedipunk/PHP-Websockets)

*   [https://github.com/sebcode/php-websocketserver](https://github.com/sebcode/php-websocketserver)

*   [https://github.com/Martijnc/phpwebsockets](https://github.com/Martijnc/phpwebsockets)

# javascript - 自动将冒号添加到字符串（例如 0800 到 08:00）

> ID：12894273
> 
> 赞同：0
> 
> 时间：2012-10-15T11:04:42.727
> 
> 标签：javascript, string, time, titanium, titanium-mobile

我想将像“0800”这样的字符串自动转换为“08:00”。

所以我是这样想的：如果我在运行程序中输入 2 位数字，在输入第三位之后，冒号应该会自动出现在第二位和第三位之间。没有提神之类的。

有没有人为我解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:33:57.260

```
<input type="text" id="input" />​

<script type="text/javascript">
    document.getElementById("input").onkeydown = function(e) {
        if(e.keyCode != 8 && this.value.length == 2) {
            this.value += ":";
        }
    }​
</script> 
```

[可在此处](http://jsfiddle.net/JpPT7/2/)获得工作演示。

# java - 从后台服务启动 Android Activity

> ID：12894277
> 
> 赞同：1
> 
> 时间：2012-10-15T11:04:50.123
> 
> 标签：java, android, service, android-activity, screensaver

我需要在一段时间后屏幕空闲时启动一项活动。我已经确定最好的方法是创建一个自定义的 broadcastReceiver 来查找 Intent.SCREEN_OFF 意图并覆盖它。

在这个自定义广播接收器中，我正在启动 Activity。它在屏幕第一次关闭时工作，但在卸载并重新安装应用程序之前它不会再次工作。

我收到以下错误：

> android.content.ActivityNotFoundException: 找不到显式活动类 { */* }; 您是否在 AndroidManifest.xml 中声明了此活动？

要回答这个相当明显的问题，是的。我有。

```
<activity
        android:name="gold.KioskPlayer"
        android:configChanges="orientation|keyboardHidden"
        android:enabled="true"
         android:launchMode="singleInstance"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.HOME" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

它可以从另一个 Activity 正常工作。此外，如果清单是错误的，那么它就不会完全停止工作。

正如 Todd 所建议的那样，“这个错误听起来像是不知何故忘记了应该调用什么 Activity。” 这怎么可能？它是一个错误吗？

所以，这里是广播接收器代码：

```
BroadcastReceiver screenoff = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {

        Log.d("ScreenSaver", "ScreenSaver1 - ScreenOff");
        //Log.d("Power Lock Pressed",   "Power Button Off Pressed:" + intent.getAction());
        if(!setup.screensaverShown || !setup.canSleep)
        {
            releaseWakeLock();
            try {
                setup.wl = setup.pm.newWakeLock(
                           PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP,
                           "ScreenSaver");
                setup.wl.acquire();
                Thread.sleep(100);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try{
                KioskPlayer.setup.screensaver=true;
                Log.d("ScreenSaver", "ScreenSaver1 starting...");
                Intent i = new Intent(getBaseContext(), KioskPlayer.class);
                i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                getApplication().startActivity(i);
            }catch(Exception e)
            {
                Log.d("ScreenSaver", "ScreenSaver1 " + e.toString());
            }
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
};

BroadcastReceiver screenon = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        if(setup.canSleep)
        {
            setup.canSleep=false;
        }

    }

};

public void releaseWakeLock(){
    try {
        if ( setup.wl != null && setup.wl.isHeld() )
        {
            setup.wl.release();
            setup.wl = null;
        }
    }catch(Exception e){}
} 
```

我可以从另一个 Activity 调用 Activity 很好。我什至可以从该服务中调用它，但只能在它出现该错误之前一次又一次地调用它。

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:57:19.217

尝试更改您的意图，也许还有活动的意图过滤器，以使用过滤器而不是 KioskPlayer.class 来调用活动。不久前我遇到了类似的问题；不记得细节，但很确定它是关于 Intent 的范围：类方法是您的应用程序的“内部”；过滤器允许你在你的应用程序之外调用东西。广播接收器可能需要后者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:47:19.090

原来是因为我禁用了类组件，这意味着它只能由应用程序本身启动。

这肯定回答了 Todd 的问题：“这个错误听起来像是不知何故忘记了应该调用什么 Activity。” 我以编程方式禁用了它，因此系统无法再找到它。

# javascript - 安装 WTP 后，Eclipse 不支持 Web 项目或 Web 文件类型。我安装不正确吗？

> ID：12894278
> 
> 赞同：0
> 
> 时间：2012-10-15T11:04:56.173
> 
> 标签：javascript, html, eclipse, eclipse-wtp

我目前拥有最新版本的 Eclipse (Juno)，并且安装 ADT 没有问题。我已经转移到一个基于 Web 的项目，我需要对 JavaScript 和 HTML 等的支持。我通过更新管理器安装了 WTP，您可以看到所有必需的包似乎都已安装：

![显示所有必需软件包似乎都已安装的图像](../Images/05c0eec2754c91b711a4ec02e0b76b61.png)

然而，在 Eclipse 中，几乎没有证据表明已经安装了任何东西。我已经阅读了[这个 jsdt 教程](http://kellicker.wordpress.com/2010/08/18/javascript-eclipse-ide-jsdt-getting-started/)，我应该能够创建诸如“静态 Web 项目”之类的 Web 项目，并支持 HTML 和 JavaScript 的文本编辑。但是，我看不到 Web 项目选项、HTML 或 JavaScript 文件选项、HTML 或 JavaScript 的透视选项，也不支持编辑 html/javascript 文件。

在这里，您可以看到我尝试创建的 html 文件。请注意缺少语法着色：

![在我的 Eclipse 版本中显示不支持 html 编辑器的图像](../Images/4765c7b66d2d33aa63c11d0df81c7949.png)

在这里，您还可以看到我可以使用的所有项目创建选项：

![显示在我的 Eclipse 版本中没有可用的基于 Web 的项目类型的图像](../Images/5f87b606a43b947206c398300874c4b5.png)

那么我应该如何安装 WTP 呢？我不应该安装它以为 Eclipse 的软件管理器吗？如果可能的话，我想这样做而不必重新安装 Eclipse。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:13:17.907

这个问题似乎只发生在 Windows 7 中。我通过右键单击 Eclipse 图标，选择“以管理员身份运行”，然后重新安装所有软件包，成功安装了所需的软件。我不必在 Windows Vista 中执行此操作。

如果您遇到此问题并且您使用的是 Windows，请按照以下步骤操作。

*   右键单击 Eclipse 图标并选择**Run As Administrator**。
*   打开工作区后，转到 **Help -> Install New Software**。
*   **您在未以管理员身份运行**时安装的任何已安装软件包现在似乎都不会安装。所以再次安装它们。
*   重新启动 eclipse（通常如果你愿意的话），你想要的包应该被正确安装。

# .net - MSI 错误 1001。InstallUtilLib.dll:CorbindToRuntimeHost

> ID：12894279
> 
> 赞同：0
> 
> 时间：2012-10-15T11:04:57.347
> 
> 标签：.net, windows-installer, compatibility

AFAIK Windows 8 附带 .NET Framework 4.5，不包括 2.0 版本。我有一个针对 2.0 版的应用程序，现在如果我在 Windows 8 中运行它，它会说“您需要安装 .net framework 2.0”。据我从 msdn 阅读，所有 .net 版本都具有向后兼容性，如果您希望您的应用程序在较新版本上运行，您需要在 app.config 文件中说明支持的框架版本。我准备了下面的配置文件，现在我可以运行 msi，但是，**在执行自定义操作时 msiexec 失败并给出以下错误**“错误 1001.InstallUtilLib.dll:CoreBindToRuntimeHost (hr=0x80070003): 系统找不到路径指定的”。我该如何解决这个错误？我的猜测是它正在寻找 .net framework 2.0 文件夹下的 InstallUtilLib。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" />
    <supportedRuntime version="v3.5" />
    <supportedRuntime version="v3.0" />
    <supportedRuntime version="v2.0.50727" />
  </startup>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:29:42.383

InstallUtil 有许多缺陷和限制。您会注意到，如果您静默运行安装程序 (/qn)，您仍然会收到模式 1001 错误消息。是的，这是错误的。是的，就是这么破。

查看使用 Windows Installer XML (WiX) 部署工具基础 (DTF) 自定义操作重构代码。这是微软的一个开源项目，它解决了这些问题，包括很多你可能不知道的问题。

[部署工具基础 (DTF) 托管的自定义操作](http://blog.deploymentengineering.com/2008/05/deployment-tools-foundation-dtf-custom.html)

[WiX 工具集 v3.6](http://wix.codeplex.com/releases/view/93929)

在 Visual Studio 中，您使用 File | 新项目 | Windows 安装程序 XML | C# 自定义操作来创建您的项目。进入项目属性并将 .NET 版本设置为 2.0。删除 4.0 引用。查看 CustomAction.Config 并注意它已设置为支持 2.0、4.0 及更高版本。然后移植你的代码。构建项目并获取 CustomActionName.CA.dll 并将其作为 DLL 自定义操作添加到您的安装程序。

还要意识到，如果您使用的是 Visual Studio 部署项目，它们也会存在许多问题，并且 Microsoft 从 Visual Studio 2012 中删除了该项目类型。

# jquery - 如何在 jQuery $('#id').http('') 中编写 @Html.DropDownListFor （等等）？

> ID：12894280
> 
> 赞同：0
> 
> 时间：2012-10-15T11:05:05.683
> 
> 标签：jquery, asp.net-mvc-3, html.dropdownlistfor

我需要在通过 AJAX 获取的表中注入一些 UI 元素，我有一个元素 ID，我可以这样写值

```
$('#s-@ViewData.Model.SomeID').html('<input type="submit" id="submitInternalData" value="" class="icon-ok"/>'); 
```

这很好用

现在我需要写一些下拉元素。

```
$('#v-@ViewData.Model.SomeID').html('<b>some text:</b> @Html.DropDownListFor(model => model.VMtoAdd, (IEnumerable<SelectListItem>)ViewBag.VMServers, "your server");'); 
```

`Html.DropDownListFor`由于插入新行而出现错误

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:20:57.603

不知道你想用这个实现什么，为什么不直接从服务器生成标记，但你可以尝试对其进行编码：

```
$('#v-@ViewData.Model.SomeID').html('@HttpUtility.JavaScriptStringEncode(Html.DropDownListFor(model => model.VMtoAdd, (IEnumerable<SelectListItem>)ViewBag.VMServers, "your server").ToHtmlString())'); 
```

更好的方法是让控制器操作返回包含此下拉列表的部分视图，然后使用 AJAX 调用此控制器操作并使用部分结果简单地更新 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T20:18:44.583

我发现从中删除 endOflines 的解决方案是 pair: .Replace("\n", " ").Replace("\r", " "))

```
$('#DestinationID').html('@Html.Raw(Html.DropDownListFor(model => model.VMtoAdd, (IEnumerable<SelectListItem>)ViewBag.VMServers, "your server").ToString().Replace("\n", " ").Replace("\r", " "))'); 
```

# r - 计算具有相同标题的行

> ID：12894281
> 
> 赞同：0
> 
> 时间：2012-10-15T11:05:22.407
> 
> 标签：r, map, calculated-columns

由于我的另一个问题已经结束，这里是所需的数据。我想要做的是让 R 计算最后一列“计数”到列城市，这样我就可以映射数据。因此我需要某种代码来匹配这个。因为我想显示有多少参与者（计数）处于夏威夷（HI）等州

```
zip     city         state  latitude    longitude   count
96860   Pearl Harbor    HI  24.859832   -168.021815 36
96863   Kaneohe Bay     HI  21.439867   -157.74772  39
99501   Anchorage       AK  61.216799   -149.87828  12
99502   Anchorage       AK  61.153693   -149.95932  17
99506   Elmendorf AFB   AK  61.224384   -149.77461  2 
```

我试过的是

```
match<- c(match(datazip$state, datazip$number))>$ 
```

但我真的很无奈试图找到一个解决方案，因为我什至不知道如何简单地描述这个。之后我的计划是用数据制作等值线图，相信我现在我已经看到了几乎所有试图提供建议的页面。所以非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:50:49.040

```
# I read your sample data to a data frame
> df
    zip          city state latitude longitude count
1 96860  Pearl_Harbor    HI 24.85983 -168.0218    36
2 96863   Kaneohe_Bay    HI 21.43987 -157.7477    39
3 99501     Anchorage    AK 61.21680 -149.8783    12
4 99502     Anchorage    AK 61.15369 -149.9593    17
5 99506 Elmendorf_AFB    AK 61.22438 -149.7746     2

# If you want to sum the number of counts by state
library(plyr)
> ddply(df, .(state), transform, count2 = sum(count))
    zip          city state latitude longitude count count2
1 99501     Anchorage    AK 61.21680 -149.8783    12     31
2 99502     Anchorage    AK 61.15369 -149.9593    17     31
3 99506 Elmendorf_AFB    AK 61.22438 -149.7746     2     31
4 96860  Pearl_Harbor    HI 24.85983 -168.0218    36     75
5 96863   Kaneohe_Bay    HI 21.43987 -157.7477    39     75 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:15:47.083

也许`aggregate`对您来说是一个不错且简单的解决方案：

```
df
    zip          city state latitude longitude count
1 96860  Pearl Harbor    HI 24.85983 -168.0218    36
2 96863   Kaneohe Bay    HI 21.43987 -157.7477    39
3 99501     Anchorage    AK 61.21680 -149.8783    12
4 99502     Anchorage    AK 61.15369 -149.9593    17
5 99506 Elmendorf AFB    AK 61.22438 -149.7746     2

aggregate(df$count,by=list(df$state),sum)
  Group.1  x
1      AK 31
2      HI 75

aggregate(df$count,by=list(df$city),sum)
        Group.1  x
1     Anchorage 29
2 Elmendorf AFB  2
3   Kaneohe Bay 39
4  Pearl Harbor 36 
```

# javascript - 为什么 == 在 JavaScript 中总是被认为是一种不好的做法

> ID：12894285
> 
> 赞同：3
> 
> 时间：2012-10-15T11:05:27.780
> 
> 标签：javascript

我知道等式运算符 ( ) 有很多怪癖`==`。例如，以下都是正确的......

```
null == undefined
1 == '1'
true == 1
false == '' 
```

在上述所有情况下，使用身份运算符 ( `===`) 将返回（严格）正确答案。

但是，当我只想比较没有怪癖的更简单的事物时，为什么不使用相等运算符。例如...

```
typeof x == 'number'
str == 'something' 
```

所以，我的问题是；为什么相等运算符具有如此贬义的地位，而实际上它在某些情况下很有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T11:08:12.650

[由于称为类型强制](http://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/)的东西，它被认为是不好的。

这意味着它`"" == false`在`true`JavaScript 中，但`"" === false`不是。

这*可能*是你想要的，但可能不是。

说这*总是*不好的做法是一个笼统的说法。如果您不知道它的作用和含义，那就太糟糕*了。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T11:17:12.797

`==`当操作数保证是同一类型时，使用绝对没有错。当操作数属于同一类型时，指定执行与 完全相同的步骤`===`。一个很好的例子是使用`typeof`.

在这种情况下不受欢迎的原因`==`纯粹是风格上的。论点是，如果始终一致地使用代码，则代码更易于阅读`===`，而不必考虑使用`==`. 其中很多起源于 Douglas Crockford，并通过他的[JSLint](http://jslint.com/)工具得以延续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:11:20.043

**只有一个例外，当返回类型是固定的。**

**与相同类型比较时，使用 == 不会发生类型约定。**

例如，`typeof`总是返回字符串，

所以你可以使用`typeof func == 'function'`而不是`typeof func === 'function'`没有伤害。（这样可以节省一个字节。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:14:23.660

如果您同时使用两者，那么迟早您会犯错误并`==`在不应该使用的情况下使用。更不用说决定是否应该使用`===`或`==`在每种情况下使用所需的额外大脑周期。坚持`===`和忘记`==`更不容易出错，也少了一件需要记住的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T11:34:09.113

我还应该补充一点，如果您知道双等号的作用，则可能存在首选双等号的情况。F.ex 如果您需要无效`"0"`且`0`同样：

```
function validate(input) {
    return input == false;
}

validate(0); // false
validate("0") // false 
```

# java - 如何拦截预设链接以打开我的 android 应用程序？

> ID：12894287
> 
> 赞同：2
> 
> 时间：2012-10-15T11:05:46.567
> 
> 标签：java, android, url, android-intent, url-interception

我正在为 android 平台开发一个问题跟踪应用程序。所以我需要在我的应用程序中打开一个问题的链接。我知道如何拦截在 AndroidManifest.xml 模式中设置的链接（http://stackoverflow.com/questions/1609573/intercepting-links-from-the-browser-to-open-my-android-app），但我的问题是我不知道我将使用哪个模式。我当前的 AndroidManifest.xml 看起来像

```
<activity android:name=".activity.InterceptionActivity" >
      <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:host="*" android:scheme="http"/>
      </intent-filter>
    </activity> 
```

所以我从浏览器打开每个链接，这不是一个好方法。

有ulr例子：

1.  来自我的跟踪器的问题网址 - [http://strintec.myjetbrains.com/youtrack/issue/YD-176](http://strintec.myjetbrains.com/youtrack/issue/YD-176) android:scheme 是“http”，android:host 是“strintec.myjetbrains.com”
2.  从另一个跟踪器发出 url - [http://youtrack.jetbrains.com/issue/JT-16912](http://youtrack.jetbrains.com/issue/JT-16912) android:scheme 是“http”，android:host 是“youtrack.jetbrains.com”

我的意思是我不知道跟踪器网址会是什么样子。只有一个共同点 - “/issue/”部分，我尝试使用 android:pathPattern 但它不起作用（也许我做错了）。

是否有任何解决方案如何在已安装的应用程序中设置链接模式？或者别的什么建议。谢谢你。

# java - 带有设置字段的日期每次调用时都会给出任意值

> ID：12894294
> 
> 赞同：0
> 
> 时间：2012-10-15T11:06:02.993
> 
> 标签：java, android, date, greendao

我正在尝试使用 sqlite 中的日期，我需要一种比较它们的方法。我的问题是，当我尝试将设置日期保存到数据库中时，它给了我新的值；然而，它们并没有太大区别——仅以毫秒为单位。

这是代码：

```
Date today = new Date();
today.setHours(0);
today.setMinutes(0);
today.setSeconds(0); 
```

我如何让它给我恒定的价值？

PS我可以将它除以1000并保存，但我使用greenDao框架，它封装了插入逻辑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:44:37.780

尝试：

```
Calendar now = Calendar.getInstance();
now.set(Calendar.HOUR, 0);
now.set(Calendar.MINUTE, 0);
now.set(Calendar.SECOND, 0);
now.set(Calendar.MILLISECOND, 0);

date = now.getTime(); 
```

new Date() 分配由 System.currentTimeMillis() 返回的当前时间。这意味着您不会在代码中重置毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:51:35.883

I think you might want to look at [Java Date rounding](https://stackoverflow.com/questions/9001384/java-date-rounding)

Basically the answers suggest using Apache commons-lang DataUtils. See [http://commons.apache.org/lang/api-3.1/index.html](http://commons.apache.org/lang/api-3.1/index.html) and especially the truncate method:

> public static Date truncate(Date date,int field)
> 
> ```
> Truncate this date, leaving the field specified as the most significant field.
> 
> For example, if you had the datetime of 28 Mar 2002 13:45:01.231, if 
> ```
> 
> you passed with HOUR, it would return 28 Mar 2002 13:00:00.000\. If this was passed with MONTH, it would return 1 Mar 2002 0:00:00.000.

# gcc - OpenMPI 如何覆盖包含编译器选项前缀

> ID：12894296
> 
> 赞同：0
> 
> 时间：2012-10-15T11:06:17.237
> 
> 标签：gcc, openmpi

您好我尝试在 Eclipse 中编译 openmpi 应用程序。但它返回错误

gcc.exe：错误：/IC:\OpenMPI/include：无效参数

据我了解 gcc 需要破折号“-”作为斜杠“/”的参数前缀插入。（我已经覆盖了从 ms-cl 到 gcc 的编译器）

你能问我必须在哪里指定“-I”作为包含前缀吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:10:29.730

The compiler wrappers (`mpicc`, `mpic++`, etc.) in Open MPI are C++ programs that read in text configuration files found in `<install dir>/share/openmpi` (on Unix system) and probably in `<install dir>\share\openmpi` on Windows. These files are called `<wrapper name>-wrapper-data.txt` where `<wrapper name>` is the name of the compiler wrapper. For example for `mpicc` the wrapper confiration file is called `mpicc-wrapper-data.txt`. Inside you'd find something similar to:

```
...
preprocessor_flags=-I/opt/MPI/openmpi-1.6.1/linux/intel/include ...
compiler_flags=-fexceptions -pthread -I${prefix}/lib/lib32 ...
linker_flags= -L/opt/lsf/8.0/linux2.6-glibc2.3-x86/lib ...
libs=-lmpi -losmcomp -lrdmacm -libverbs ...
... 
```

Modify these to match your compiler flags.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-16T18:37:51.230

在 Eclipse 中，突出显示“Project Explorer”（屏幕左侧）中的项目名称。然后右键单击它并选择“属性”（列表底部）。在弹出窗口的左侧选择“C/C++ Build”，在该组中选择“Settings”。在“GCC C Linker”中选择“Libraries”（中心部分）。在此窗口的右侧，您可以添加库名称，它们将以“lib”和“-l”为前缀，因此不要包括（ei：mpi）。如果您需要，向下滚动将显示一个区域以添加“库搜索路径（-L）”。完成后选择“应用并关闭”按钮，然后再次“构建”。

# java - 成员顺序是否会像 C 或 C++ 那样在 Java 中产生性能差异？

> ID：12894298
> 
> 赞同：7
> 
> 时间：2012-10-15T11:06:18.583
> 
> 标签：java, optimization, bytecode

在 C 和 C++ 中，不允许编译器对结构的数据成员进行重新排序，因此如果您对它们的排序方式不小心，最终会浪费空间。例如：

```
struct S {
    int i;
    void *p;
    int i2;
}; 
```

在具有 32 位`int`s 和 64 位指针的平台上，`i`将首先放置，然后是 32 位填充，以便`p`可以 64 位对齐。`i2`然后占用下一个字的一半，然后是另外 32 位的填充。生成的结构是 24 字节长，而如果`p`首先声明，它将只有 16 字节长。如果数组中有很多这些结构，查找和删除填充有时可能是一项重要的优化，以节省内存并减少缓存流失。

我很想知道Java是否具有相同的功能。未装箱的类型（例如`int`和`boolean`）是否与引用的大小相同或更小？如果它们更小，是否允许编译器重新排序它们以避免插入填充以对齐后续字段？最后，如果是的话，是否有任何编译器这样做？

我现在对此没有特别的优化需求，我只是想知道在选择声明字段的顺序时是否应该记住这一点，就像我在 C 中所做的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:11:57.360

在java中有这样的问题。编译器处理变量声明，程序员无法控制在内存中分配它们的位置

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T11:20:27.220

`int`类型始终为 32 位，即使在 64 位 JVM 中，引用也通常为 32 位。

不利的一面是，Java 在每个对象的开头都有一个 8-12 字节的标头，并使用 8 字节对齐。顺便说一句，一些 C++ 环境有 16 字节对齐。

> 未装箱的类型（例如 int 和 boolean）是否与引用的大小相同或更小？

您可以期望它们对于 boolean、byte、char 和 short 来说更小，但是对于 long 和 double 来说，原语可能比引用更大。

> 如果它们更小，是否允许编译器重新排序它们以避免插入填充以对齐后续字段？

JIT 可以重新组织字段，甚至优化它们。

> 最后，如果是的话，是否有任何编译器这样做？

编译几乎没有优化，`javac`查看字节码会给你一点关于运行时会发生什么的线索。JIT 可以任意选择优化对象中的字段。

> 我只是想知道在选择声明字段的顺序时是否应该记住这一点，就像我在 C 中所做的那样。

恕我直言，您可以假设您在 C 中使用的几乎所有优化技巧都不再适用于 Java。在少数这样做的人中，它们可能并不完全相同。

您应该假设 JIT 将根据需要优化代码并使用分析器来确定您是否以及何时遇到问题。然后才考虑出于性能原因更改代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T11:12:31.400

Java 没有结构，只有类。Java 中的类并不一定意味着该类也在 C++ 后端。你甚至不知道 JVM 是否是用 C/C++ 实现的。它可以用任何其他语言。

但是对于 C++ JVM，我认为他们会尝试优化。原始（它们不称为未装箱）类型，例如 int 或 boolean，通常映射到它们的原始对应物（就我的 JNI 经验而言），但由于没有结构，它们不需要排列。

我几乎可以肯定，重新排列类字段不会对内存消耗产生任何影响。只是因为它们没有映射到结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:49:15.080

正如其他人指出的那样，您确实无法控制 java 中的这种详细程度。但是，如果您真的需要对内存进行如此多的控制，您可以通过索引到 byte[] 甚至直接[ByteBuffer](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)中的堆外来自己管理它。

# sqlite - Monodroid 和 Mono.Data.Sqlite.Orm.Linq 事务

> ID：12894303
> 
> 赞同：0
> 
> 时间：2012-10-15T11:06:30.730
> 
> 标签：sqlite, xamarin.android

我正在使用 Matthew Leibowitz 的库。我一直在检查它，它似乎不支持交易。我只能看到 BeginTransaction 方法，但没有 EndTransaction/Commit 对应的方法。有没有人能够使用这个库的交易？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:14:38.207

`BeginTransaction`返回一个事务对象，您可以在其上调用`Commit`.

# r - ggplot2 每行数据帧一行

> ID：12894306
> 
> 赞同：5
> 
> 时间：2012-10-15T11:06:35.903
> 
> 标签：r, ggplot2, dataframe

我有一个包含以下数据的 CSV 文件：

```
user,Measurement1,Measurement2,Measurement3,group
1,0.1,0.7,0.2,3
2,0.3,0.3,0.4,2
3,0.3,0.3,0.4,2 
```

我需要为每个用户绘制一条线。x 轴可以只有 1、2、3（每个测量值一个点，标记为之前、之后、之后，但我可以稍后计算出标记）。颜色将由组列设置，我发现[一个](https://stackoverflow.com/questions/11751047/ggplot-to-create-multi-line-plot-from-csv-file)类似于我需要的图，但我不想使用用户代码作为 x 值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T02:06:35.973

`ggplot`喜欢“长”格式的数据：即，每个维度对应一列，每个观察对应一行。您的数据目前是“广泛的”。使用`reshape`包裹从一个到另一个。

我是否正确理解您希望 Measurement1、Measurement2 和 Measurement3 位于 x 轴上？（因此，在您的数据中，用户 1 的行将从 0.1 变为 0.7 再到 0.2？如果是这样，您想要这样的东西：

```
require(reshape)

#Recreate your data frame
user <- gl(3, 1)
Meas1 <- c(0.7, 0.3, 0.3)
Meas2 <- c(0.7, 0.3, 0.3)
Meas3 <- c(0.2, 0.4, 0.4)
group <- c(3, 2, 2)
df <- data.frame(user=user, Meas1=Meas1, Meas2=Meas2, Meas3=Meas3, group=group)

#'melt' the data frame into long format
dfm <- melt(df, id.vars=c("user", "group"))

ggplot(dfm, aes(x=as.numeric(variable), y=value, colour=user)) + geom_line() 
```

![在此处输入图像描述](../Images/bbb8d0c285a60d5003d7c06bea6e07a3.png)

# php - 在执行表单的原始页面中显示处理后的表单 php 结果

> ID：12894310
> 
> 赞同：0
> 
> 时间：2012-10-15T11:06:55.457
> 
> 标签：php

我正在使用一个简单的表单将主题标签的名称设置为 php 文件，但我希望结果与表单显示在同一页面上。我的表格和php如下

```
 <form id"search" method="post" action="twitter.php">
    <input type="text" name="hash" id="hash"/>
    <input type="submit" name="submit" value="submit"/>
    </form> 
```

我的 php 显示哈希标记搜索的结果

```
 <?php
    global $total, $hashtag;
    $hashtag = $_POST["hash"];
    $total = 0;
    function getTweets($hash_tag, $page) {
    global $total, $hashtag;
    $url = 'http://search.twitter.com/search.json?q='.urlencode($hash_tag).'&';
    $url .= 'page='.$page;    
    $ch = curl_init($url);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, TRUE);
    $json = curl_exec ($ch);
    curl_close ($ch);
    echo "<pre>";    
    $json_decode = json_decode($json);
    print_r($json_decode->results);

    $json_decode = json_decode($json);        
    $total += count($json_decode->results);    
    if($json_decode->next_page){
     $temp = explode("&",$json_decode->next_page);        
     $p = explode("=",$temp[0]);                
     getTweets($hashtag,$p[1]);
      }        
    }
  echo $total;
  getTweets($hashtag,1);
    ?> 
```

我应该怎么做才能让 php 的结果显示在表单下方的同一页面上提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:16:28.430

将其发布到同一页面，您在表单“twitter.php”中定义一个操作，这意味着表单将转到带有发布信息的页面 twitter.php。

如果您将其发布到同一页面，请在此处捕获发布请求并在表单下方或上方显示请求的任何内容，这两个元素都显示在页面上。

小例子：

```
<?php
if ($_SERVER['REQUEST_METHOD'] == "POST" && !empty($_POST['hashtag'])) {
    echo "You searched for: " . $_POST['hashtag'] . "!";
}
?>
<form method="POST" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    Hashtag: <input type="text" name="hashtag" /> <br />
    <input type="submit" value="Submit hashtag!" />
</form> 
```

这将显示一个带有主题标签输入字段的表单。脚本发布到同一页面，PHP 捕获 POST 请求并显示搜索到的任何内容。相反，您可以使用此值从 twitter 本身检索搜索操作。

# c# - 即使 IP 已更改或浏览器数据已被清除，我如何识别我网站上的唯一用户？

> ID：12894312
> 
> 赞同：6
> 
> 时间：2012-10-15T11:07:04.287
> 
> 标签：c#, asp.net, unique, identity

我正在开发一个视频流媒体网站。我想计算每个视频的独特观看次数。我参考了互联网上的一些网站，甚至询问了其他一些程序员。他们说要么使用cookies，要么使用会话或IP地址。但这些事情会随着时间而改变。另外，如果可能的话，我们可以使用用户机器的 MAC 地址来做到这一点吗？我在这里也遇到了类似的问题-> [http://bit.ly/Qh1KNR](http://bit.ly/Qh1KNR)。他们说有像浏览器指纹一样使用MAC地址的东西。那么你能告诉我什么方法是最好的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:17:17.593

是的，所有这些属性都可以改变，并且没有确定的方法来检测同一个人是否观看了两次视频。有人可以在学校观看一次，在家里观看一次，使用不同的浏览器和 IP 地址。

您最好的选择可能是使用 IP 地址，计算一些人两次并跳过一些人（因为启用了 NAT 的路由器）。

另一种方法是只允许注册用户观看视频并记录他们所看到的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:26:06.100

您无法使用指纹跟踪用户。指纹的作用是收集有关操作系统、时区、安装的字体、插件等的一些信息……在某些情况下可能有效，但并非 100% 正确。在某些环境（如学校、大学等）中，操作系统、浏览器和几乎所有配置都可能相同，您无法跟踪用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:21:22.717

您可以使用 Evercookie 概念，将 cookie 数据存储在不同的存储位置。如果用户清除浏览历史或cookies，它将从不同的存储位置恢复cookies。用户必须在 javascript 上创建 evercookie 有一个缺点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T13:28:40.210

为什么不将 GUID 和其他一些参数以及指纹的一些 MAC 地址一起存储在 cookie 中，这将使您能够对数据进行一些控制以找出唯一性

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T11:23:53.877

**您可以比 IP 地址更深入。**

如果这只是为了跟踪使用情况而不是身份验证，那么您可以根据以下内容存储**用户浏览器的初始指纹**：

使用像这样的插件：[https ://github.com/carlo/jquery-browser-fingerprint](https://github.com/carlo/jquery-browser-fingerprint)

*   已安装的插件及其版本
*   屏幕尺寸
*   操作系统（版本）

你明白了。由于两个用户具有完全相同的分辨率、插件（包括版本）、操作系统（补丁等）的可能性相对较小。

# javascript - JavaScript API“embedSWF”的等效 Flex API 是什么

> ID：12894313
> 
> 赞同：0
> 
> 时间：2012-10-15T11:07:05.677
> 
> 标签：javascript, actionscript-3

我想在另一个 SWF 文件中渲染一个 flex 怪物 SWF 文件。谁能让我知道 Flex API 中的以下 Javascript API 是什么。

```
swfobject.embedSWF(swfFilePath+"PivotTable.swf",       
"flashcontent", "100%", "500", "10.0.0",swfFilePath+"expressInstall.swf", 
flashvars, params, attributes, swfAdded); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:10:00.807

您可能应该使用 SWFLoader 类，但不能保证外部组件在加载运行时或以这种方式嵌入时可以工作。我建议检查有关将外部组件嵌入另一个 Flex 应用程序的文档。也许您应该使用 SWF 包代替该选项。

# visual-studio-2010 - 更新 Visual Studio 2010

> ID：12894314
> 
> 赞同：-1
> 
> 时间：2012-10-15T11:07:07.267
> 
> 标签：visual-studio-2010, windows-phone-7, visual-c++

我为 Windows Phone 下载了 Microsoft Visual 2010 Express，但现在我想在我的项目中使用 Visual C++。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:55:00.010

您不能在 Windows Phone 7 项目中使用 C++。您必须等待 Windows Phone 8 能够使用 C++。

# android - BaseAdapter getView() 方法内的 LayoutInflater 中的 NullPointerException

> ID：12894316
> 
> 赞同：3
> 
> 时间：2012-10-15T11:07:08.503
> 
> 标签：android, android-fragments, android-adapter

这是我的 getView() 方法。膨胀时出现空指针异常。同样的问题有很多答案。这在片段中使用。但这不适合我。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    Context con = null;
    View vi=convertView;
    if(convertView==null){
            LayoutInflater inflater = (LayoutInflater)con.getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            vi = inflater.inflate(R.layout.stores_listview_layout, null);
     }

     TextView tv = (TextView)vi.findViewById(R.id.store_name);
     tv.setText(storeData.get(position).get("merchantName"));

    return vi;
} 
```

我在这里做错了什么？

更新：这行得通！

```
 View vi=convertView;
         Context c = null;
         if(convertView==null){
         LayoutInflater inflater = getLayoutInflater(null);
         vi = inflater.inflate(R.layout.stores_listview_layout, parent, false);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T11:13:01.570

```
LayoutInflater inflater = getLayoutInflater(null);
vi = inflater.inflate(R.layout.stores_listview_layout, parent, false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T11:11:59.303

而不是声明`Context con;`然后使用它 - 正如所指出的那样导致空指针异常，您可以简单地使用`convertView.getContext()`

[在此处](http://developer.android.com/reference/android/view/View.html#getContext%28%29)查看文档

* * *

刚刚真正考虑过它，我的第一个想法是行不通的——Doh！

由于您的代码在片段内，您可以通过[getActivity()访问 layoutinflater](http://developer.android.com/reference/android/app/Fragment.html#getActivity%28%29)

```
public View getView (int position, View convertView, ViewGroup parent){
    if( convertView == null ){
        //you can access layout inflater by accessing hosting activity
        convertView = getActivity().getLayoutInflater().inflate(R.layout.stores_listview_layout, parent, false);
    }
    TextView tv = (TextView)convertView.findViewById(R.id.store_name);
    tv.setText(storeData.get(position).get("merchantName"));
    return convertView;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T11:08:53.867

```
con.getApplicationContext()... 
```

这是你的错。`con`还没有初始化，所以是`null`. 您应该使用 Activity 作为上下文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:11:07.587

这里

```
Context con;///============> here
View vi=convertView;
if(convertView==null){
        LayoutInflater inflater = (LayoutInflater)con.getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        vi = inflater.inflate(R.layout.stores_listview_layout, null);
.... 
```

替换`Context con;`为

```
Context con= getApplicationContext(); 
```

在此代码中，您没有初始化 Context 变量。尝试先初始化它。

# java - 如何使用 ajax 显示 DOJO Autocompleter 值

> ID：12894321
> 
> 赞同：0
> 
> 时间：2012-10-15T11:07:33.267
> 
> 标签：java, ajax, struts2, dojo

我正在尝试使用 dojo 自动完成器对信息的哈希图进行 ajax 检索，但下拉菜单上似乎没有显示任何内容。请帮忙

我的 JSP 代码：

```
 <sx:head/>
 .......
 <s:url id="companyList" action="AjaxAutoCompleteCompanyPOCAction" />
 <sx:autocompleter name="company" href="%{companyList}"  size="24" loadOnTextChange="true"  preload="false" loadMinimumCount="1" showDownArrow="false" autoComplete="false" searchType="substring" key="rental.company"/> 
```

我的 Struts.XML：

```
 <action name="AjaxAutoCompleteCompanyPOCAction" class="com.kodi.action.jobs.AjaxAutoCompleteCompanyPOCAction" method="retrieveListOfCompany" >
       <result type="json">
           <param name="root">json</param>
       </result>
    </action> 
```

我的行动

```
 public String retrieveListOfCompany(){
    //if(KodiUtil.isMatch(getCompany())){ // validate special char
        setJson(new HashMap<String, String>()); // create a JSON hashmap
         if(company != null && company.length() > 0) { // check if string is empty
              List<CompanyEntity> companylist = manager.retrieveCompanyName(getCompany());  // retrieve the companies name
              for (CompanyEntity companies : companylist){
                 getJson().put(companies.getCompany_name(),""+companies.getCompany_id());
              }

         }
    return "SUCCESS";

} 
```

截至目前，代码确实在我的 Action 类中调用了retrieveListOfCompany()，n 获取了数据但它没有显示在 JSP 页面上..请帮助..我收到这个错误，

```
No result defined for action com.kodi.action.jobs.AjaxAutoCompleteCompanyPOCAction and result SUCCESS
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:375)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:277)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263) 
```

但是当我将我的 struts.xml 设置为

```
<result name="SUCCESS" type="json">
           <param name="root">json</param>
       </result> 
```

我明白了=(

```
java.lang.NoSuchMethodError: com.opensymphony.xwork2.ActionContext.get(Ljava/lang/Object;)Ljava/lang/Object;
    at com.googlecode.jsonplugin.JSONResult.execute(JSONResult.java:157)
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:373)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:277)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) 
```

我为此使用 struts2-dojo-plugin-2.1.8.1.jar

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:47:23.497

Dojo 插件已从 Struts2 中弃用，但有 JQuery 插件[http://code.google.com/p/struts2-jquery/](http://code.google.com/p/struts2-jquery/)和展示[http://struts.jgeppert.com/struts2-jquery-showcase/index.action](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:29:54.553

我终于发现我的应用程序有问题，

我得到的错误是因为 jsonplugin 与我的 dojo 和 struts 核心不兼容。

所以如果有人遇到同样的问题，只需将你的 jar 文件降级到更兼容的版本

目前我正在使用

struts2-json-plugin-2.2.1

struts2-dojo-plugin-2.1.8.1

struts2-core-2.2.1.1

希望这可以帮助

# c# - 系统事件记录

> ID：12894322
> 
> 赞同：0
> 
> 时间：2012-10-15T11:07:42.767
> 
> 标签：c#, events, system

我需要监控一些系统事件，如关机、注销、锁定等。

现在我有两个问题：

1.  在系统关闭、注销或类似情况之前，我该如何做某事？
2.  当进程被任务管理器杀死时，我是否有机会在它关闭之前做某事，而无需第二个进程？应该不会吧？（没那么重要）

到目前为止我所拥有的：

```
 public MainWindow()
    {
        InitializeComponent();
        SystemEvents.SessionSwitch += SystemEvents_SessionSwitch;
        SystemEvents.SessionEnded += SystemEvents_SessionEnded;
        SystemEvents.EventsThreadShutdown += SystemEvents_ThreadShutdown;
        SystemEvents.PowerModeChanged += SystemEvents_PowerModeChanged;
    }

    private void SystemEvents_PowerModeChanged(object sender, PowerModeChangedEventArgs e)
    {
        if(e.Mode == PowerModes.Suspend)
        {
            Thread.Sleep(5000);
            Log("PowerMode Suspend: " + DateTime.Now.ToString("HH:mm:ss") + "\r\n");
        }
        else if(e.Mode == PowerModes.Resume)
        {
            Thread.Sleep(5000);
            Log("PowerMode Resume: " + DateTime.Now.ToString("HH:mm:ss") + "\r\n");
        }
    }

    private void SystemEvents_ThreadShutdown(object sender, EventArgs e)
    {
        Thread.Sleep(5000);
        Log("EventThread Shutdown: " + DateTime.Now.ToString("HH:mm:ss") + "\r\n");
    }

    private void SystemEvents_SessionSwitch(object sender, SessionSwitchEventArgs e)
    {
        if (e.Reason == SessionSwitchReason.SessionLock)
        {
            Thread.Sleep(5000);
            Log("Locked the machine: " + DateTime.Now.ToString("HH:mm:ss") + "\r\n");
        }
        else if (e.Reason == SessionSwitchReason.SessionUnlock)
        {
            Thread.Sleep(5000);
            Log("Unlocked the machine: " + DateTime.Now.ToString("HH:mm:ss") + "\r\n");
        }
        else if (e.Reason == SessionSwitchReason.SessionLogoff)
        {
            Thread.Sleep(5000);
            Log("Logged of the machine: " + DateTime.Now.ToString("HH:mm:ss") + "\r\n");
        }
    }

    private void SystemEvents_SessionEnded(object sender, SessionEndedEventArgs e)
    {
        if (e.Reason == SessionEndReasons.SystemShutdown)
        {
            Thread.Sleep(5000);
            Log("Shutdown of the machine: " + DateTime.Now.ToString("HH:mm:ss") + "\r\n");
        }
        else if (e.Reason == SessionEndReasons.Logoff)
        {
            Thread.Sleep(5000);
            Log("Logoff of the machine: " + DateTime.Now.ToString("HH:mm:ss") + "\r\n");
        }
    } 
```

睡眠应该模拟此事件之前的一些待办事项。只有 Windows Lock & Window Closed 起作用，其他的不起作用，可能是因为程序已经关闭。

知道我该如何解决吗？

# android - MPP 101 打印机和安卓

> ID：12894324
> 
> 赞同：3
> 
> 时间：2012-10-15T11:07:47.803
> 
> 标签：android, bluetooth, printers

我想创建一个连接到 MPP 101 蓝牙打印机并打印一些文本和图片的 android 应用程序（电话）。这个任务可行吗？如果是这样，有人可以帮我找到一些有用的材料来完成这项任务。

# touch - 空指针，两个地图上的触摸事件

> ID：12894327
> 
> 赞同：1
> 
> 时间：2012-10-15T11:07:57.620
> 
> 标签：touch

我遇到了一个大问题，我必须为我映射视图，将其转移回我在手机上触摸的点，并且我不使用 ant Itemizedovelay，只是映射，覆盖一个触摸事件，一个可以工作，但另一个给我这些 logcat 和只是镇压

这真的很奇怪，有人知道或遇到这个问题吗？

-谢谢 -丹尼斯

这是日志猫

```
> Uncaught handler: thread main exiting due to uncaught exception
java.lang.NullPointerException
$ThisMapOverlay1.onTouchEvent(Favoritepoint.java:222)
com.google.android.maps.OverlayBundle.onTouchEvent(OverlayBundle.java:63)
com.google.android.maps.MapView.onTouchEvent(MapView.java:625)
android.view.View.dispatchTouchEvent(View.java:3709)
android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:852)
android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.    java:1659)
com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
android.app.Activity.dispatchTouchEvent(Activity.java:2061)
com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:  1643)
android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
android.os.Handler.dispatchMessage(Handler.java:99)
android.os.Looper.loop(Looper.java:123)
android.app.ActivityThread.main(ActivityThread.java:4363)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:521)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
dalvik.system.NativeStart.main(Native Method)
threadid=7: reacting to signal 3
Wrote stack trace to '/data/anr/traces.txt' 
```

# python - 文件夹修改时间包括里面的文件吗？

> ID：12894329
> 
> 赞同：0
> 
> 时间：2012-10-15T11:08:10.683
> 
> 标签：python

目前我所做的是：

```
import os

dir = '/var/www/site1.com'
modTime = os.path.getmtime(dir) 
```

但修改时间不如该文件夹内最近修改的文件的修改时间。有没有办法获取该目录/文件夹相对于其中的文件/文件夹的 mtime？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:11:58.977

并非不查看该`mtime`文件夹中每个文件的值。

您可以使用文件夹中每个条目`max()`的值：`getmtime`

```
modTime = max([os.path.getmtime(os.path.join(dir, p)) for p in os.listdir(dir)]) 
```

# r - R使用逻辑向量从列表中选择名称

> ID：12894331
> 
> 赞同：-2
> 
> 时间：2012-10-15T11:08:19.617
> 
> 标签：r, list, vector

假设我有我`list`的名称及其组件，并且我想获取那些在其他向量中具有其组件的名称：

那是我的**邻居名单**

```
neighbors[[1]]
 [1] "CNBP"                  "IGF2BP1"               "RPL3|OK/SW-cl.32"     
 [4] "HNRNPC"                "PURA|hCG_45299"        "RPS3A"                
         "Cnbp"                  "Mis12|DN-393H17.5"    
neighbors[[2]]
[1] "NIN"                "PRKACA"             "AURKA|RP5-1167H4.6"
[4] "GSK3B"              "AMOT"               "UBC" 
```

和我感兴趣的向量 **mtop**

```
[1] "TUBA1A"                "DNAJB1"                "MME"                  
[4] "PRKCB"                 "PARK2|KB-152G3.1"      "UBC" 
```

例如，我的想法是返回 的名称`neighbors[2]`，它们有共同的 UBC

有任何想法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:04:25.570

首先，您的数据。你的输出看起来有点奇怪。如果这不是您所拥有的，请考虑使用`dput`以可重现的方式转储这些变量。

```
mtop <- c("TUBA1A", "DNAJB1", "MME",
          "PRKCB", "PARK2|KB-152G3.1", "UBC")
neighbors <- list(c("CNBP", "IGF2BP1", "RPL3|OK/SW-cl.32",
                    "HNRNPC", "PURA|hCG_45299", "RPS3A",
                    "Cnbp", "Mis12|DN-393H17.5"),
                  c("NIN", "PRKACA", "AURKA|RP5-1167H4.6",
                    "GSK3B", "AMOT", "UBC")) 
```

要选择列表`neighbors`中至少有一个与 相同的向量元素的元素`mtop`，可以使用以下命令：

```
matching <- sapply(neighbors, function(l) length(intersect(mtop, l)) > 0)
print(neighbors[matching]) 
```

这将打印`neighbors[2]`，因为它`"UBC"`与`mtop`. 它通过逻辑向量做到这一点`matching`。这似乎是你的问题。

如果你想考虑位置，即只选择`neighbors[2]`因为`"UBC"`在两个向量中的位置 6，那么你应该使用这个命令：

```
matching <- sapply(neighbors, function(l) any(l == mtop)) 
```

但是，这会产生一个警告，因为`neighbors[[1]]`它比`mtop`.

如果您想要两个数据结构共有的名称，可以使用以下代码：

```
intersect(unlist(neighbors), mtop) 
```

如果你需要别的东西，你必须在你的问题中更具体，即给出一个输出应该是什么样子的明确示例，并涵盖所有可能导致结构不同输出的可能输入配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:22:01.267

怎么样：

```
l<- lapply(neighbours,function(x)x[x %in% mtop]) 
```

这将返回列表，其中每个列表元素都将包含向量中的元素`mtop`。

现在只选择那些长度非零的元素：

```
names(l)[sapply(l,length)>0] 
```

您可以将它们组合成一行：

```
names(neighbours)[sapply(neighbours,function(x)Reduce("|",mtop %in% x))] 
```

# iphone - NSUserDefault 持久化的优缺点？

> ID：12894332
> 
> 赞同：0
> 
> 时间：2012-10-15T11:08:25.217
> 
> 标签：iphone, ios, ipad

我是 NSUserDefault 的新手

1）我们可以在 NSUserDefault 中存储哪些数据，而不能在 NSUserDefault 中存储哪些数据？

2) 我们可以像 SQlite 一样在 NSUserDefault 中实现 RDMS 概念吗？

3）它存储在哪里，我们可以像 Sqlite 一样直接访问它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:17:04.860

**1）我们可以在 NSUserDefault 中存储哪些数据，而不能在 NSUserDefault 中存储哪些数据？**

您可以保存应用状态、游戏分数、偏好等。请不要在 NSUserDefaults 中存储密码、信用卡信息等敏感信息。为此使用[钥匙串服务](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/01introduction/introduction.html#//apple_ref/doc/uid/TP30000897)。

**2) 我们可以像 SQlite 一样在 NSUserDefault 中实现 RDMS 概念吗？**

NSUserDefault 与 SQLite 或任何其他数据库完全不同。它仅用于存储轻量级对象，例如应用偏好和状态。它根本不是为大量数据存储而设计的。

**3）它存储在哪里，我们可以像 Sqlite 一样直接访问它吗？**

NSUserDefault 值作为 plist 文件存储在应用程序包中的 Library->Preference 下。您可以像访问任何 plist 文件一样访问它

# go - 使结构“可范围”？

> ID：12894333
> 
> 赞同：11
> 
> 时间：2012-10-15T11:08:26.020
> 
> 标签：go

```
type Friend struct {
    name string
    age  int
}

type Friends struct {
    friends []Friend
} 
```

我想使`Friends`范围成为可能，这意味着，如果我有一个`my_friends`带有 type的变量`Friends`，我可以通过以下方式循环它：

```
for i, friend := range my_friends {
    // bla bla
} 
```

围棋有可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T13:45:28.383

Friends*是*一个结构体吗？否则干脆做

```
type Friends []Friend 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-15T12:49:50.980

**注意**：正如[deft_code 所](https://stackoverflow.com/questions/12894333/make-a-struct-range-able/12896013#comment44634199_12896013)提到的，当循环中断时，这段代码会泄漏一个通道和一个 goroutine。不要将其用作一般模式。

* * *

在 go 中，没有办法让任意类型兼容`range`，因为 `range`只支持切片、数组、通道和映射。

您可以使用 迭代通道`range`，如果您想迭代动态生成的数据而不必使用切片或数组，这很有用。

例如：

```
func Iter() chan *Friend {
   c := make(chan *Friend)
   go func() {
      for i:=0; i < 10; i++ {
        c <- newFriend()
      }
      close(c)
   }()
   return c
}

func main() {
  // Iterate 
  for friend := range Iter() {
    fmt.Println("A friend:", friend)
  }
} 
```

这是您可以使某些东西“可调整”的最接近的东西。

因此，一种常见的做法是`Iter()`在您的类型上定义一个方法或类似的东西并将其传递给`range`.

请参阅[规范](http://golang.org/ref/spec#For_statements)以进一步阅读`range`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:49:19.520

例如，

```
var my_friends Friends

for i, friend := range my_friends.friends {
    // bla bla
} 
```

# java - 通用下无界通配符与上限通配符

> ID：12894335
> 
> 赞同：3
> 
> 时间：2012-10-15T11:08:32.420
> 
> 标签：java, generics, wildcard, bounded-wildcard

```
import java.util.List;
import java.util.ArrayList;

interface Canine {}
class Dog implements Canine {}
public class Collie extends Dog {
    public static void main(String[] args){
        List<Dog> d = new ArrayList<Dog>();
        List<Collie> c = new ArrayList<Collie>();
        d.add(new Collie());
        c.add(new Collie());
        do1(d); do1(c);
        do2(d); do2(c);
    }
    static void do1(List<? extends Dog> d2){
        d2.add(new Collie());
        System.out.print(d2.size());
    }
    static void do2(List<? super Collie> c2){
        c2.add(new Collie());
        System.out.print(c2.size());
    }
} 
```

这个问题的答案告诉我们，当方法采用通配符通用类型时，可以访问或修改集合，但不能同时访问或修改。（凯西和伯特）

***'当方法采用通配符通用类型时，可以访问或修改集合，但不能同时访问或修改*'，这是什么意思？**

据我所知，方法 do1 有`List<? extends Dog> d2`所以 d2 只能访问但不能修改。方法 d2 有`List<? super Collie> c2`所以 c2 可以访问和修改，并且没有编译错误。

[通用指南](http://docs.oracle.com/javase/tutorial/java/generics/wildcardGuidelines.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:28:18.943

您不能将 a 添加`Cat`到 a`List<? extends Animal>`因为您不知道那是什么类型的列表。那也可以`List<Dog>`。所以你不想把你的`Cat`扔进`Black Hole`. 这就是为什么不允许这样声明`modification`的原因。`List`

同样，当你从 a 中取出一些东西时`List<? super Animal>`，你不知道你会从中得到什么。你甚至可以得到一个`Object`, 或一个`Animal`. 但是，您可以`Animal`在此安全地添加一个`List`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:18:31.413

我将您的代码粘贴到我的 IDE 中。内部发出以下错误信号`do1`：

> List 类型中的方法 add(capture#1-of ? extends Dog) 不适用于参数（Collie）

这当然是预期的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T11:24:48.507

您根本无法将 a 添加`Collie`到 a`List<? extends Dog>`因为此引用可能包含例如 a `List<Spaniel>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:21:55.273

我将您的代码粘贴到 IDEONE [http://ideone.com/msMcQ](http://ideone.com/msMcQ)中。它没有为我编译 - 这是我所期望的。你确定你没有任何编译错误吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T11:49:15.603

> 这个问题的答案告诉我们，当方法采用通配符通用类型时，可以访问或修改集合，但不能同时访问或修改。（凯西和伯特）

这是一个公平的第一个近似值，但并不完全正确。更正确的是：

您只能将 null 添加到 a`Collection<? extends Dog>`因为它的 add 方法需要一个参数`? extends Dog`。无论何时调用方法，都必须传递声明参数类型的子类型的参数；但是对于参数类型`? extends Dog`，编译器只有在表达式是 时才能确定参数是兼容类型的`null`。但是，您当然可以通过调用`clear()`or来修改集合`remove(Object)`。

另一方面，如果你从 a 中读取`Collection<? super Dog>`，它的迭代器有返回类型`? super Dog`。也就是说，它将返回一些未知超类型的子类型的对象`Dog`。但不同的是，Collection 可以是`Collection<Object>`仅包含`String`. 所以

```
for (Dog d : collection) { ... } // does not compile 
```

所以我们唯一知道的是返回了 Object 的实例，即迭代这样一个 Collection 的唯一类型正确的方法是

```
for (Object o : collection) { ... } 
```

但是可以从一个集合中读取，你只是不知道你会得到什么类型的对象。

我们可以很容易地将观察结果概括为：

```
class G<T> { ... } 
```

和

```
G<? extends Something> g; 
```

我们只能将 null 传递给具有声明类型的方法参数`T`，但我们可以调用具有返回类型的方法`T`，并将结果分配给类型的变量`Something`。

另一方面，对于

```
G<? super Something> g; 
```

我们可以将任何类型的表达式传递`Something`给声明类型的方法参数`T`，也可以调用返回类型的方法`T`，但只能将结果分配给类型为变量的变量`Object`。

总而言之，使用通配符类型的限制仅取决于方法声明的形式，而不取决于方法的作用。

# mongodb - 如何找出查询没有返回结果的原因？

> ID：12894341
> 
> 赞同：0
> 
> 时间：2012-10-15T11:09:05.020
> 
> 标签：mongodb

有没有办法找出查询在 monogodb 中没有返回结果的原因？

假设我们有一个存储员工的集合，我想获取姓名为 X、地址 Y 和年龄 Z 的任何员工。

我将编写一些查询，例如：

```
BasicDBObject query = new BasicDBObject(); 

query.put("name","X"); query.put("address","Y"); query.put("age","z"); 
```

如果此查询返回 null，我如何知道是因为没有姓名为 X 的员工，或没有地址为 Y 的员工，还是没有年龄为 z 的员工？还是有办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:12:05.377

它不会返回任何文件，因为没有文件符合您的条件。如果您真的想知道是哪一个，请在客户端上进行 3 个单独的查询并过滤/合并结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:13:33.240

没有办法开箱即用。您必须执行多个查询或使用第一个条件进行一个查询并在应用程序代码中迭代集合以找出其他条件是否匹配

# java - new Date().getTime() 不以毫秒为单位返回时间戳

> ID：12894342
> 
> 赞同：9
> 
> 时间：2012-10-15T11:09:08.387
> 
> 标签：java, unix-timestamp, java.util.date, gettime

我有一个类，它使用`java.util.Date`类来创建日期对象并`getTime()`用于获取当前毫秒。

我在`getTime()`返回毫秒的 Java 文档中看到过，我的机器上也有同样的情况。

我有另一台服务器，当我在服务器上部署我的应用程序时，同样`getTime()`会以秒为单位返回时间戳。

例如

*   服务器上的值：1350054625
*   本地价值：1350054625000

我想知道这怎么可能，我在本地尝试了相同的代码，然后又得到了以毫秒为单位的时间戳。

下面是部分代码...

```
String longTime = new Long((new Date().getTime())).toString();
if(log.isDebugEnabled())log.debug("LAST_FEED_TIME will be " + longTime + " stored."); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T11:37:47.307

'new Date()' 反过来使用 System.currentTimeMillis()

> **System.currentTimeMillis**
> 
> 以毫秒为单位返回当前时间。请注意，虽然返回值的时间单位是毫秒，但值的粒度取决于底层操作系统，并且可能更大。例如，许多操作系统以几十毫秒为单位测量时间。
> 
> 有关“计算机时间”和协调世界时 (UTC) 之间可能出现的细微差异的讨论，请参阅类 Date 的描述。

来源：[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#currentTimeMillis()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#currentTimeMillis())

# css - 页面宽度呈现不同但 CSS 不同意

> ID：12894344
> 
> 赞同：0
> 
> 时间：2012-10-15T11:09:09.640
> 
> 标签：css, width

这是两个具有相同宽度的 div 和边距等相对于宽度的页面。检查员同意这一点。然而，第二个“壁画”在渲染上似乎不那么宽泛。你能确定这是做什么的吗？

[http://www.aptart.org/about/](http://www.aptart.org/about/)

[http://www.aptart.org/gallery/murals/](http://www.aptart.org/gallery/murals/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:12:11.727

这只是垂直滚动条的副作用，它存在于一页中，而不存在于另一页中。

# git - git 分支撤消提交

> ID：12894346
> 
> 赞同：0
> 
> 时间：2012-10-15T11:09:11.290
> 
> 标签：git

不小心我忘了打开一个新分支并将我的更改提交给 master，但没有将它们推送到远程仓库。现在我收到消息：“您的分支在 'origin/master' 之前 1 次提交。”

我想做的是使我的主人与远程仓库的主人相同 - 通过恢复到以前的状态或通过其他方式 - 然后从那里打开一个分支以推送到远程。我不介意重新进行我在之前的意外提交中所做的更改。

当我 ：

```
cemgun@db05:~/mini$ git reset --hard
HEAD is now at 2e2adc9 SHBDN-8584 changes
cemgun@db05:~/mini$ git reset --hard
HEAD is now at 2e2adc9 SHBDN-8584 changes 
```

我仍然在我的意外提交中。

当我 ：

```
cemgun@db05:~/mini$ git checkout -f
Your branch is ahead of 'origin/master' by 1 commit.
cemgun@db05:~/mini$ git checkout -f
Your branch is ahead of 'origin/master' by 1 commit. 
```

我仍然在我的意外提交中。

有什么建议么 ？谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:11:34.100

尝试：

```
$ git reset --soft HEAD^
$ git checkout -b new_branch 
```

这将撤消最后一次提交，将更改留在工作存储库中，然后创建包含这些更改的 new_branch。然后，您可以在新分支中创建新提交。

# python - 在 PyQt4 的 QWebView 中设置页面大小

> ID：12894351
> 
> 赞同：1
> 
> 时间：2012-10-15T11:09:27.773
> 
> 标签：python, pyqt4, qtwebkit

我使用 PyQt4 编写了一个 python 脚本来抓取包括 AJAX 在内的网页。它有效，但它只能获得我认为与屏幕分辨率有关的“单屏”页面。我在没有 X 环境的 CentOS 服务器上运行脚本。我使用**Xvfb**并进行以下设置：

```
$ Xvfb :100 -screen 0 9000x9000x24 &
$ export DISPLAY=:100 
```

但它并没有帮助获得更多的网络信息。

我是 PyQt4 的新手。有没有办法设置QWebView大小来放大显示窗口大小？

任何有关 QtWebkit 的手册也值得赞赏。

以下是我的代码：

```
#!/usr/bin/env python
#coding: utf-8

import sys

from PyQt4.QtCore import QUrl, SIGNAL, QSize
from PyQt4.QtGui import QApplication
from PyQt4.QtWebKit import QWebPage, QWebView, QWebSettings

class WebPage(QWebPage):

    def javaScriptConsoleMessage(self, message, lineNumber, sourceID):
        sys.stderr.write('Javascritp error at line number %d\n' % (lineNumber))
        sys.stderr.write('%s\n' % (message, ))
        sys.stderr.write('Source ID: %s\n' % (sourceID, ))

class Crawler(QApplication):

    def __init__(self, url):
        super(Crawler, self).__init__(sys.argv)
        self.url = url
        self.web_view = QWebView()
        self.web_page = WebPage()
        self.web_view.setPage(self.web_page)
        self.web_frame = self.web_page.currentFrame()

        print 'Before connecting'
        self.connect(self.web_view, SIGNAL('loadFinished(bool)'), self.loadFinished)
        print 'After connecting'

        print 'Before loading'
        self.web_frame.load(QUrl(self.url))
        print 'After loading'

    def loadFinished(self, ok):
        self.web_page.setViewportSize(self.web_page.mainFrame().contentsSize())
        print 'In callback, before writing'
        with open('jd.txt', 'ab+') as fp:
            fp.write(self.web_page.currentFrame().toHtml().toUtf8())
        print 'In callback, after writing'

if __name__ == '__main__':
    url = 'http://www.360buy.com/product/707047.html'
    crawler = Crawler(url)
    sys.exit(crawler.exec_()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:25:30.707

您可以使用 setViewportSize 方法将 web_page 调整为实际大小：

```
self.web_page.setViewportSize(self.web_page.mainFrame().contentsSize()) 
```

发出 loadFinished 后触发滚动事件：

```
def loadFinished(self, ok):
    js_scroll = "window.scrollBy(0, 200);"
    self.web_page.mainFrame().documentElement().evaluateJavaScript(js_scroll) 
```

虽然我不确定您正在加载的页面实际上是如何工作的，但您可能需要等到滚动事件之后的 ajax 请求完成，数据才会出现在页面上。

# oracle - 升级到 apex 4.2 时等待锁定对象时出现错误 sys.wwv_dbms_sql 超时

> ID：12894355
> 
> 赞同：0
> 
> 时间：2012-10-15T11:09:44.210
> 
> 标签：oracle, oracle-apex

今天下午我在尝试从 4.1.1 升级到 oracle apex 4.2 时遇到此错误。

sys.wwv_dbms_sql 在等待锁定对象时发生超时，但安装进度继续。

有没有人遇到过这种错误？我的 apex 系统是否可以导致安装脚本保持继续，即使在很长一段时间内也是如此。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:01:20.003

看起来我必须重新启动 oracle，因为在我尝试升级它时，有东西访问了这个应用程序。

# hibernate - Hibernate：使用过滤器的基于鉴别器的多租户？

> ID：12894357
> 
> 赞同：8
> 
> 时间：2012-10-15T11:09:59.070
> 
> 标签：hibernate, multi-tenant, hibernate-filters

我已经在网上阅读了几篇关于多租户（针对 SaaS 应用程序中的不同客户端）的文章（即[这个](https://community.jboss.org/wiki/Multi-tenancyDesign)、[那个](http://www.devx.com/Java/Article/47817/0/page/2)和[那个](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch16.html)）。一旦你决定采用基于鉴别器的方法，[hibernate doc 指出](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch16.html)，这在版本 4 中不受支持，但会在版本 5 中出现。

不过，您可能会找到几篇关于为此目的使用休眠过滤器的文章（即[this](http://www.devx.com/Java/Article/47817/0/page/2)和[that](https://community.jboss.org/wiki/Multi-tenancyDesign)）。

我想知道，如果基于过滤器的解决方案可以的话，为什么在版本 5 中会有一些特殊的实现。因此：基于过滤器的解决方案的缺点是什么？（我已经[阅读](https://hibernate.onjira.com/browse/HHH-6054)（见 06/Dec/11 的评论）它们不适用于 find 语句。但似乎没有其他来源同意这一点。这是真的吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-07T09:10:06.247

基于过滤器的解决方案的一些缺点：

*   持久化时，必须注意tenant_id，它不会自动持久化。可能有人可以使用@PrePersist 回调方法。
*   方法 entityManager.find(EntityClass.class, "ID") 不考虑过滤器值
*   必须像这样处理@OneToMany 关系：

```
 @OneToMany(cascade = CascadeType.ALL)
     @JoinColumn(name = "ARTICLE_ID")
     @Filter(name = "tenantFilter", condition = "tenant_id = :tenantId")
     private List<ArticleChild> children; 
```

# grails - 带有遗留数据库的 grails。外键作为主键的一部分

> ID：12894361
> 
> 赞同：0
> 
> 时间：2012-10-15T11:10:08.493
> 
> 标签：grails, grails-orm, foreign-key-relationship, legacy-database

我遇到了使用旧数据库的问题。我有两个与关系相关的表：一个 - 到 - 多： 表订阅者：

```
create table SUBSCRIBERS
(
  SUBSCRIBERCODE VARCHAR2(100) not null,
  SUBSCRIBERNAME VARCHAR2(100),
  ACTIVE         CHAR(1) default 'Y' not null
)
alter table SUBSCRIBERS
  add constraint SUBSCRIBERS_PK primary key (SUBSCRIBERCODE); 
```

表订阅者联系方式：

```
create table SUBSCRIBERSCONTACTS
(
  SUBSCRIBERCODE VARCHAR2(100) not null,
  CONTACTTYPE    VARCHAR2(100) not null,
  ORDER_ID       NUMBER not null,
  CONTACTVALUE   VARCHAR2(100) not null,
  ACTIVE         CHAR(1) default 'Y' not null
)
alter table SUBSCRIBERSCONTACTS
  add constraint SUBSCRIBERSCONTAC1 primary key (SUBSCRIBERCODE, CONTACTTYPE, ORDER_ID);
alter table SUBSCRIBERSCONTACTS
  add constraint SUBSCRIBER_SUBS_FK foreign key (SUBSCRIBERCODE)
  references SUBSCRIBERS (SUBSCRIBERCODE); 
```

表 SUBSCRIBERSCONTACTS 具有复合主键 - (SUBSCRIBERCODE, CONTACTTYPE, ORDER_ID)。它还具有对 SUBSCRIBERS (SUBSCRIBERCODE) 的外键引用。SUBSCRIBERCODE 是 SUBSCRIBERSCONTACTS 主键的一部分。

我创建了两个 GORM 域类：

```
package tmsconf

class Subscribers {

String id

String subscribercode
String subscribername
String active

static hasMany = [subscriberscontacts:Subscriberscontacts]

static mapping = {
version false
id generator: 'assigned', name: 'subscribercode'
}

static constraints = {
subscribercode(size:1..100, blank: false)
subscribername(size:0..100, nullable: true)
active(size:1..1, blank: false)
}

public void setSubscribercode( String subscribercode ){
this.subscribercode = subscribercode
this.id = subscribercode
}

String toString() {
subscribercode
}

}

package tmsconf

class Subscriberscontacts  implements Serializable{

String id

Subscribers subscribers
String contacttype
Long order_id
String contactvalue
String active

static mapping = {
version false

id composite: ["subscribercode", "contacttype","order_id"], generator: "assigned"

subscribers name : 'subscribercode', column : 'subscribercode', insertable: false, updateable: false

}

public String getSubscribercode()
{
    subscribers
}

static constraints = {
contacttype(size:1..100, blank: false)
contactvalue(size:1..100, blank: false)
active(size:1..1, blank: false)
}

public void setSubscribercode( String subscribercode ){
this.subscribercode = subscribercode
this.id = subscribercode
}

String toString() {
subscribercode
}

} 
```

我生成了所有必需的：grails generate-all *.

然后我尝试运行新的 grails 应用程序并出现异常：

```
Caused by PropertyNotFoundException: Could not find a getter for subscribercode in class tmsconf.Subscriberscontacts
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread 
```

**我不想将subscribercode 属性添加到Subscriberscontacts 域类，因为如果这样做，我将在Create 表单上获得subscribercode 编辑字段。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:26:55.197

添加它，只需从脚手架中隐藏：

```
class Subscriberscontacts {
  String subscribercode
  ...
  static constraints = {
    subscribercode display: false // or editable: false
  }
} 
```

# .net-4.0 - VS2012 构建的 .Net 4.0 程序集会在未安装 .Net 4.5 的机器上运行吗

> ID：12894362
> 
> 赞同：3
> 
> 时间：2012-10-15T11:10:14.800
> 
> 标签：.net-4.0, visual-studio-2012, .net-4.5, mscorlib

我知道这个问题有点奇怪，但我问它是因为我遇到了一些问题。

我将 Visual Studio RTM 2012 与 VS2010 并排安装。根据[微软](http://connect.microsoft.com/VisualStudio/feedback/details/750762/problems-building-after-installing-vs-2012-rc)的说法，在并行安装 VS2012 和 VS2010 的情况下，一些 .Net 4.0 文件被替换为 4.5 版本（`mscorlib.dll`, `system.core`）。

我尝试使用spoon virtual application studio虚拟化一个使用VS2012为.Net 4.0构建的应用程序，但它显示 `System.core file not found`错误。

我用修复了文件未找到错误的文件替换了和`mscorlib.dll`dll `system.Core`，但这次它显示了错误。`Windows\Microsoft.net\4.0``<ProgramFiles>\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0``WindowsBase 4.0.0.0/3.0.0.0 file not found`

我担心如果我在未安装 .Net 4.5 的机器（WinXP 机器）上运行此应用程序可能会产生错误，但我没有单独的机器来测试它。这里的好人可以证实这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:34:25.367

正式地，如果您以 .NET 4.0 为目标，它应该可以在 .NET 4.0 机器上正常工作，包括 Windows XP。如果不是这种情况，那绝对是一个错误。我并不是说 4.0 和 4.5 之间没有一些不兼容，但是如果你发现某些东西在 4.5 机器上工作，但它在 4.0 机器上不工作，我们会将其视为错误。

至于“没有 WinXP 机器来测试它”，我建议只运行一个 VM。测试问题是真实存在的，虽然大多数人没有问题，但如果您不进行测试，墨菲定律可能会适用，您的应用程序将无法运行：-/

-凯夫

# jpa-2.0 - 如何将 JPA 验证与 CDI 和 Seam 验证集成

> ID：12894365
> 
> 赞同：6
> 
> 时间：2012-10-15T11:10:26.683
> 
> 标签：jpa-2.0, cdi, bean-validation, seam3

关于我之前[的问题，JSR 303 bean 验证，扩展的 ConstraintValidator 不能使用 CDI](https://stackoverflow.com/questions/10100439/the-jsr-303-bean-validation-the-extended-constraintvalidator-cannot-use-the-cdi)，[Seam 验证模块](http://seamframework.org/Seam3/ValidationModule)为我提供了一个完美的解决方案，可以集中所有 JSF 和 EJB 业务验证，而无需重复代码。

无论如何，当我尝试让*JPA (EclipseLink)*执行验证时，系统会给我如下信息：

> java.lang.IllegalStateException: WEB9031: WebappClassLoader 无法加载资源 [javax.enterprise.inject.spi.BeanManager]，***因为它尚未启动或已停止***

完整的堆栈跟踪如下：-

```
Caused by: java.lang.IllegalStateException: WEB9031: WebappClassLoader unable to load resource [javax.enterprise.inject.spi.BeanManager], because it has not yet been started, or was already stopped
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1401)
at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
at org.jboss.seam.validation.InjectingConstraintValidatorFactory.getInstance(InjectingConstraintValidatorFactory.java:67)
at org.hibernate.validator.internal.engine.ConstraintTree.createAndInitializeValidator(ConstraintTree.java:346)
at org.hibernate.validator.internal.engine.ConstraintTree.getInitializedValidator(ConstraintTree.java:334)
at org.hibernate.validator.internal.engine.ConstraintTree.validateConstraints(ConstraintTree.java:155)
at org.hibernate.validator.internal.engine.ConstraintTree.validateConstraints(ConstraintTree.java:125)
at org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:86)
at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:442)
at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:387)
at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:351)
at org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:303)
at org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:133)
at org.eclipse.persistence.internal.jpa.metadata.listeners.BeanValidationListener.validateOnCallbackEvent(BeanValidationListener.java:84)
at org.eclipse.persistence.internal.jpa.metadata.listeners.BeanValidationListener.prePersist(BeanValidationListener.java:62)
at org.eclipse.persistence.descriptors.DescriptorEventManager.notifyListener(DescriptorEventManager.java:698)
at org.eclipse.persistence.descriptors.DescriptorEventManager.notifyEJB30Listeners(DescriptorEventManager.java:641)
at org.eclipse.persistence.descriptors.DescriptorEventManager.executeEvent(DescriptorEventManager.java:200)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNewObjectClone(UnitOfWorkImpl.java:4257)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNotRegisteredNewObjectForPersist(UnitOfWorkImpl.java:4234)
at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.registerNotRegisteredNewObjectForPersist(RepeatableWriteUnitOfWork.java:513)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNewObjectForPersist(UnitOfWorkImpl.java:4176)
at org.eclipse.persistence.internal.jpa.EntityManagerImpl.persist(EntityManagerImpl.java:440) 
```

我不确定我是否可以将 CDI 与约束验证器与 JPA 一起使用。你能帮忙提供进一步的建议吗？非常感谢您提前提供的帮助。我期待着尽快收到您的来信。

**我的环境如下：**

1.  视窗 7 64 位
2.  JDK 1.6.0_31 64 位
3.  Eclipse Indigo SR1 64 位
4.  玻璃鱼 3.1.2.2
5.  EclipseLink 2.3.2（与 GF 捆绑）
6.  焊接 1.1.10-Final
7.  休眠验证 4.3.0.Final
8.  缝焊 3.1.1.Final
9.  接缝验证 3.1.0.Final

**我的示例编码**

实用程序

```
@Singleton
public class MyUtility {
    public boolean isValid(final String input) {
       return (input != null) || (!input.trim().equals(""));
    }
} 
```

约束注解

```
@Retention(RetentionPolicy.RUNTIME)
@Target({
    ElementType.TYPE,
    ElementType.ANNOTATION_TYPE,
    ElementType.FIELD
    })
@Constraint(validatedBy = Validator.class)
@Documented
public @interface Validatable {
    String  message() default "Validation is failure";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
} 
```

约束验证器

```
public class Validator extends ConstraintValidator<Validatable, MyBean> {
    //
    //----> Try to inject the utility with Seam validation
    //
    @Inject
    private MyUtility myUtil;

    public void initialize(ValidatableconstraintAnnotation) {
        //nothing
    }

    public boolean isValid(final MyBean myBean, 
                           final ConstraintValidatorContext constraintContext) {

        if (myBean == null) {
            return true;
        }
        //
        //----> It works as expected, but not for the JPA layer
        //
        return this.myUtil.isValid(myBean.getName());
    }
} 
```

作为实体 bean 的数据 bean

```
@Entity
//--other JPA annotation
@Validatable
public class MyBean {
    private String name;
    //Getter and Setter here
} 
```

JSF 支持 bean

```
@Named
@SessionScoped
public class Page1 {
    //javax.validation.Validator
    @Inject
    private Validator validator;

    @Inject
    private MyBean myBean;

    @PersistenceContext(unitName = "mydb-pu")
    private EntityManager em;

    //Submit method
    public void submit() {
        Set<ConstraintViolation<Object>> violations = 
                         this.validator.validate(this.myBean);
        if (violations.size() > 0) {
            //Handle error here.
        }
        this.em.persist(this.myBean);
    }
} 
```

持久性.xml

```
<persistence-unit name="mydb-pu"
    transaction-type="JTA">
    <jta-data-source>jdbc/mydb</jta-data-source>
    <class>...</class>

    <!-- If I comment this, the exception occurs -->
    <validation-mode>NONE</validation-mode>

    <properties>
        <property name="eclipselink.ddl-generation" value="create-tables"/>
        <property name="eclipselink.ddl-generation" value="none" />
        <property name="eclipselink.ddl-generation.output-mode" value="both"/>
    </properties>

</persistence-unit> 
```

验证.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<validation-config
   xmlns="http://jboss.org/xml/ns/javax/validation/configuration"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://jboss.org/xml/ns/javax/validation/configuration
validation-configuration-1.0.xsd">

    <constraint-validator-factory>
        org.jboss.seam.validation.InjectingConstraintValidatorFactory
    </constraint-validator-factory>
</validation-config> 
```

关于提到的 Persistence.xml，如果我删除验证模式，系统会给我一个异常。目前，我禁用 JPA 验证作为临时解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T17:46:03.770

我遇到了同样的问题并通过添加来解决它：

```
<property name="javax.persistence.validation.factory" value="org.jboss.seam.validation.InjectingConstraintValidatorFactory"/> 
```

到我在persistence.xml 中的持久性单元属性。完成后，您可以删除验证模式。

# nsis - NSIS脚本在没有任何GUI的情况下静默复制文件？

> ID：12894371
> 
> 赞同：1
> 
> 时间：2012-10-15T11:10:46.940
> 
> 标签：nsis

我的 Nsis 脚本正在将文件从一个位置复制到目标计算机上的另一个位置。它显示了一个框，例如将文件 c:\programfiles.... 复制到 c:\programfiles.... 。我不希望最终用户看到这个框。我怎样才能删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:26:38.600

```
CopyFiles /SILENT "c:\foo" "d:\bar" 
```

# html - HTML：如何从 Dropbox 中获取价值

> ID：12894372
> 
> 赞同：0
> 
> 时间：2012-10-15T11:10:49.530
> 
> 标签：html, tapestry

我的应用程序上有一个保管箱，其中包含三个选项（空格、是、否），使用挂毯填充

这有一个子保管箱，根据从下面的保管箱中选择的内容来填充

我让它工作，以便如果选择“是”或“否”，则正确填充下面的下拉框。我想要做的是，如果选择了“空白空间”，我希望下面的保管箱为空。有没有办法在不使用 Javascript 的情况下做到这一点，还是必须使用 Javascript？

就像是

```
<span jwcid="@If" condition="topDropBox.getSelectedValue != null" renderTag="literal:false"> 
```

编辑：我尝试过的 Javascript

```
function getValueFromDropBox() {
              document.getElementById('topDropBox').options[document.getElementById('topDropBox').selectedIndex].value
            } 
```

从 HTML 调用它

```
<span jwcid="@If" condition="javascript: getValueFromDropBox() != null" renderTag="literal:false"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:28:24.813

根据我的想法，是的，您必须使用javascript，只有您可以提供此选项

```
<select onclick="showdrop()">
<option value="0"></option>
<option value="1">YES</option>
<option value="2">NO</option>
</select> 
```

# pentaho - 将文件和数据库表与 Pentaho 数据集成进行比较

> ID：12894374
> 
> 赞同：0
> 
> 时间：2012-10-15T11:11:04.130
> 
> 标签：pentaho

我仍然在掌握 Pentaho 和数据集成工具。

我正在构建用户及其相关角色的数据仓库。我们每天都会收到需要插入数据库的提要。我对此感到满意，但是当我需要检查数据库以了解用户状态的变化时，问题就出现了。例如，今天有用户 X 的提要进入，用户 X 的状态为活动。当一周后有新的提要出现时，用户 X 的状态在提要中已更改为非活动状态，但尚未在数据库中。我将如何比较当前数据库中的内容和新提要文件中的内容并对此进行报告？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:42:24.423

您可以将这 2 个数据集与“合并行”步骤进行比较。

另见：[http ://wiki.pentaho.com/display/EAI/Merge+Rows](http://wiki.pentaho.com/display/EAI/Merge+Rows)

# javascript - 为什么mouseleave一直在触发？

> ID：12894376
> 
> 赞同：5
> 
> 时间：2012-10-15T11:11:08.523
> 
> 标签：javascript, jquery, html, mouseevent

我正在尝试创建地图，当我将鼠标悬停在按钮上时，该地图的某个位置应突出显示。当鼠标进入时，覆盖图像会按原样显示，但是当鼠标移动时，在悬停按钮内，覆盖图像会闪烁，并且会重复触发 mouseEnter 和 mouseLeave 事件。我还尝试了 mouseOver、hover 和 mouseout，结果相同。难道我做错了什么？

HTML：

```
 <div id="map">
                <img src="images/map/map.png" />                    
                <img src="images/map/mapHover.png" id="hoverhighlands" class="hoverButton"/>
                <img src="images/map/mapHover.png" id="hovernorth" class="hoverButton"/>
                <img src="images/map/mapHover.png" id="hovercentral" class="hoverButton"/>
                <img src="images/map/mapHover.png" id="hoverlothian"class="hoverButton" />                    <img src="images/map/mapHover.png" id="hoverwest" class="hoverButton" />
                <img src="images/map/central.png" class="mapOverlay" id="central" />
                <img src="images/map/highlands.png" class="mapOverlay" id="highlands" />
                <img src="images/map/lothian.png" class="mapOverlay" id="lothian" />
                <img src="images/map/northeast.png" class="mapOverlay" id="north"/>
                <img src="images/map/west.png" class="mapOverlay" id="west"/>
            </div> 
```

JS：

```
function setMapOverlays() {
    $(".mapOverlay").hide();
    $(".hoverButton").mouseenter(
        function () {
            var id = $(this).attr('id');            
            id = id.substr(5);

            showOverlay(id);
        }).mouseleave(function () {
            console.log('mouseleave');
            var id = $(this).attr('id');
            id = id.substr(5);
            hideOverlay(id);
        })

}

function showOverlay(id) {
    $('#' + id).show();
}

function hideOverlay(id) {
    $('#' + id).hide();
} 
```

**编辑**

好的，我知道为什么它不起作用了。当 .show() 函数触发时，我的叠加图像被放置在 hoverButtons 的顶部，触发 onmouseleave。

我设法验证了在 hoverButton 上放置 z-index:2 并在 mapOverlay 上放置 z-index:1。这样当我移动鼠标时不会触发事件。

所以我有一个临时修复。将 onmouseleave 事件移动到我的 mapOverlays 而不是我的 hoverButtons 就可以了。函数 setMapOverlays() { $(".mapOverlay").hide(); $(".hoverButton").mouseenter( function () { console.log('enter'); var id = $(this).attr('id'); id = id.substr(5);

```
 showOverlay(id);
        });

    $('.mapOverlay').mouseleave(function () {
        console.log('mouseleave');               
        hideOverlay($(this));
    })
} 
```

这可行，但不是所需的行为。当我的鼠标移出悬停按钮时，我希望覆盖隐藏。关于如何做到这一点的任何建议？

两张图片可以帮助解释我在做什么：

![地图](../Images/4e7d624531d3ae6f640fbcf955b2f44a.png)

![悬停](../Images/5f9b8d8979c761b80c3ecf65f9c1a774.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:24:58.267

不要对 hoverButton 类使用 mouseleave 事件。尝试在显示时在覆盖中处理 mousemove 事件，并检查鼠标是否仍在启动覆盖显示方法的元素上方。

```
function setMapOverlays() {
    $(".mapOverlay").hide();
    $(".hoverButton").mouseenter(function() {
        var id = $(this).attr('id');
        id = id.substr(5);

        showOverlay(id, this);
    });
};

function showOverlay(id, initiator) {
    initiator = $(initiator);
    initiatorBoundary = {
        x1: initiator.offset().left,
        x2: initiator.offset().left + initiator.outerWidth(),
        y1: initiator.offset().top,
        y2: initiator.offset().top + initiator.outerHeight()
    };

    $('#' + id).mousemove(function(event) {
        if (event.pageX < initiatorBoundary.x1 || event.pageX > initiatorBoundary.x2 || event.pageY < initiatorBoundary.y1 || event.pageY > initiatorBoundary.y2) {
            $(this).hide();
        }
    }).show();
}​ 
```

[jsFiddle在这里](http://jsfiddle.net/1stein/gDCCx/)

顺便说一句，也许没有覆盖元素会更容易实现。您是否考虑过在 mouseenter 和 mouseleave 上更改整个地图图像？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:24:17.323

我修复了您的 js 代码并将 data-id 属性添加到 img 标签

新的html是：

```
<div id="map">
    <img src="images/map/map.png" />                    
    <img src="images/map/mapHover.png" id="hoverhighlands" class="hoverButton"  data-id="highlands" />
    <img src="images/map/mapHover.png" id="hovernorth" class="hoverButton"      data-id="north" />
    <img src="images/map/mapHover.png" id="hovercentral" class="hoverButton"    data-id="central" />
    <img src="images/map/mapHover.png" id="hoverlothian"class="hoverButton"     data-id="lothian" />
    <img src="images/map/mapHover.png" id="hoverwest" class="hoverButton"       data-id="west" />
    <img src="images/map/central.png" class="mapOverlay" id="central"           data-id="central" />
    <img src="images/map/highlands.png" class="mapOverlay" id="highlands"       data-id="highlands" />
    <img src="images/map/lothian.png" class="mapOverlay" id="lothian"           data-id="lothian" />
    <img src="images/map/northeast.png" class="mapOverlay" id="north"           data-id="north" />
    <img src="images/map/west.png" class="mapOverlay" id="west"                 data-id="west" />
</div> 
```

新的jscode是：

```
function setMapOverlays() {
    $(".mapOverlay").hide();

    function showOverlay(id) {
        $('#' + id).show();
    }

    function hideOverlay(id) {
        $('#' + id).hide();
    }

    function hover() {
        console.log('hover', this, arguments);
        var id = $(this).data('id');
        showOverlay(id);
    }

    function leave(evt) {
        console.log('leave', this, arguments);
        var id = $(this).data('id');
        var hovered = evt.relatedTarget;
        if ($(hovered).data('id') == id) {
            $(hovered).mouseleave(leave);
            return;
        }
        hideOverlay(id);
    }

    $(".hoverButton")
        .mouseenter(hover)
        .mouseleave(leave);
} 
```

你可以在[jsFiddle上试试这个](http://jsfiddle.net/rudolfovich/qrcBm/4/)

# jquery - 在 jquery 中查找元素

> ID：12894378
> 
> 赞同：-1
> 
> 时间：2012-10-15T11:11:09.370
> 
> 标签：jquery, list, css-selectors

如何使用jquery动态查找第一个和最后一个li？

li 的发现应该在文档中的所有列表中接受。

```
<script>
$(document).ready(function()
 {
$('li:first-child').addClass('first');
 $('li:last-child').addClass('last');});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:12:50.883

`$('li:first')`和`:last`，分别。

作为对您的编辑的响应，将产生作为其各自父节点的第一个子节点的`li:first-child`所有元素。`li`而`li:first`只会产生`li`文档中的第一个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:13:29.697

```
$('li:first')
$('li:last'); 
```

这是一种在列表中查找第一个和最后一个的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:12:48.887

添加类以`li`说明`someclass`您是否有`li`页面编号

```
$('.someclass').last();
$('.someclass').first(); 
```

要不就

```
$('li:first')
$('li:last'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:14:20.993

如果要查找`li`页面上所有列表元素的第一个和最后一个，可以执行以下操作：

`$('li:first')`和`$('li:last')`

如果您需要在每个列表中查找第一个和最后一个列表元素：

```
$('ul, ol').each(function() {
  $('li:first', this); 
  $('li:last', this);
}); 
```

# android - Android：下载源代码的API版本

> ID：12894380
> 
> 赞同：-1
> 
> 时间：2012-10-15T11:11:24.723
> 
> 标签：android, eclipse, api

我怎样才能知道我下载的开源库是用哪个 API 版本编写的？如何找出它与哪个 API 兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:16:08.900

转到清单文件并检查此标签：

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" /> 
```

它将向您显示 min 、 target 和 max sdk 版本

# c# - C# 数据库压缩连接错误

> ID：12894383
> 
> 赞同：1
> 
> 时间：2012-10-15T11:11:41.323
> 
> 标签：c#, database

我使用一个简单的表单来测试一些数据库紧凑代码，以将数据添加到数据库中。当我单击 AddBtn 时，我只想将一些文本字段中的值插入到我的数据库中，但我收到此错误“初始化字符串的格式不符合从索引 0 开始的规范”。问题似乎在 SqlCeConnection 行中。

完整的代码示例：

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.Windows.Forms;
    using System.Data.Sql;
    using System.Data.SqlClient;
    using System.Data.SqlServerCe;

    namespace WindowsFormsApplication1
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
        InitializeComponent();
            }

            private void AddBtn_Click(object sender, EventArgs e)
            {
                SqlCeConnection con = new SqlCeConnection(@"C:\Users\Name\Documents\Visual Studio         2012\Projects\DataBaseTest\MyDatabase#1.sdf");
                try {
                    con.Open();

                    SqlCeCommand cmd = con.CreateCommand();

                    cmd.CommandText = "insert into test ([ID], [OrderID], [KundID]) values('"+textBox1.Text+"','"+textBox2.Text+"','"+textBox3.Text+"')";

                    try {
                        cmd.ExecuteNonQuery();
                    }
                    catch (Exception ex) {
                        MessageBox.Show(ex.Message);
                    }

                }
                catch (Exception ex) {
                    MessageBox.Show(ex.Message);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T11:17:22.350

是的，您的连接字符串是错误的。
看这里[http://www.connectionstrings.com/sql-server-2005-ce](http://www.connectionstrings.com/sql-server-2005-ce)

更正的应该是

```
 string pathSDF = @"C:\Users\Name\Documents\Visual Studio 2012" + 
                   "\Projects\DataBaseTest\MyDatabase#1.sdf";
 SqlCeConnection con = new SqlCeConnection("Data Source=" + pathSDF + 
                                           ";Persist Security Info=False;"); 
```

除此之外，您的 SQL 命令非常危险。您永远不应该编写连接直接取自用户输入的字符串的 sql 命令。这会导致[Sql Injection Attacks](http://en.wikipedia.org/wiki/SQL_injection)
将您的代码更改为：（我假设您的 ID 字段是数字类型而不是 varchars）

```
 cmd.CommandText = "insert into test ([ID], [OrderID], [KundID]) values " + 
                    "(@userID, @orderID, @kundID)";  

  cmd.Parameters.AddWithValue("@userID", Convert.ToInt32(textBox1.Text));
  cmd.Parameters.AddWithValue("@orderID", Convert.ToInt32(textBox2.Text));
  cmd.Parameters.AddWithValue("@kundID", Convert.ToInt32(textBox3.Text)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T11:20:52.683

您没有使用有效的连接字符串（`'Data Source='`在 SDF 的路径之前添加。请参阅 MSDN 文档以获取`SqlCeConnection`.

```
SqlCeConnection con = new SqlCeConnection(@"Data Source=C:\Users\Name\Documents\Visual Studio         2012\Projects\DataBaseTest\MyDatabase#1.sdf" 
```

除此之外，不要直接在查询中使用按钮的文本（让你容易受到 SQL 注入攻击），而是使用 SQL 参数（同样 MSDN 是你的朋友。）

# html - 指定表单的宽度以阻止其溢出

> ID：12894384
> 
> 赞同：0
> 
> 时间：2012-10-15T11:11:41.890
> 
> 标签：html, css

这是我工作的代码：

[http://jsfiddle.net/GCt3z/32/](http://jsfiddle.net/GCt3z/32/)

这将是一个流体宽度的形式，但它导致了太多的问题和不兼容。我选择了固定宽度的表格，但现在我很困惑，因为我的表格溢出了 div。我应该指定字段包装器的宽度还是字段本身来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:29:34.463

由于您在设置 div 宽度中工作，因此没有理由以百分比为输入字段大小工作。将输入字段更改为固定宽度。没有理由真正拥有我可以看到的字段包装器。[http://jsfiddle.net/calder12/GCt3z/44/](http://jsfiddle.net/calder12/GCt3z/44/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:24:44.630

它溢出了，因为您的输入字段的宽度为 100% + 左右边框。您可以将值设置为更小 100%，或者使用 box-sizing 属性并将其设置为边框框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:27:32.503

解决此问题的一种方法是使用`overflow:auto;`，但是，您会得到一个烦人的滑动条，但它会适合。另一种方法是尝试百分比。设置我检查的下一项`width: 99%:`，您的边框导致溢出。

[http://jsfiddle.net/GCt3z/43/](http://jsfiddle.net/GCt3z/43/)

解决它的另一种方法是使用表格，因为您可以只设置一个表格行，而另一个将使其达到 100%。不干净，但它可以完成工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:27:34.720

我通常指定输入字段的宽度，以便它们全部对齐，但这是您的个人喜好。对于文本框使用：

```
input[type="text"] {
line-height:28px; width: 120px; font-family:arial, sans-serif; border: 1px solid black;
} 
```

[CSS 属性选择器](http://www.w3schools.com/css/css_attribute_selectors.asp)

# c++ - 绘制多边形网格时的 Opengl 性能问题

> ID：12894397
> 
> 赞同：2
> 
> 时间：2012-10-15T11:12:07.463
> 
> 标签：c++, performance, opengl, optimization, opengl-es

我正在使用以下代码在 3D 游戏中绘制一些多边形网格。

```
void drawModelFace(const MeshFace *face, float *vertices, float *vertNormals, float *textureVerts)
{   
    glBegin(GL_POLYGON);
    for (int i = 0; i < face->_numVertices; i++) 
    {
       glNormal3fv(&vertNormals[3 * face->_vertices[i]]);

       if (face->_texVertices)
       {
           glTexCoord2fv(&textureVerts[2 * face->_texVertices[i]]);
       }

       glVertex3fv(&vertices[3 * face->_vertices[i]]);
    }
    glEnd();
} 
```

我的问题是，当这个函数被多次调用时，我在游戏中遇到了一些性能问题。

此函数平均每秒调用 50000 次，提供恒定的 60fps，但在某些地方，它被称为每秒 100000 次，提供 15fps。（我用今天的电脑降频到1Ghz来模拟今天手机的性能）

我听说即时模式可能很慢，这就是我尝试使用 glDrawArrays 的原因。这是代码：

```
void drawModelFace(const MeshFace *face, float *vertices, float *vertNormals, float *textureVerts)
{   
    GLfloat vert[3*face->_numVertices];
    GLfloat normal[3*face->_numVertices];
    GLfloat tex[2*face->_numVertices];

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);
    glVertexPointer(3, GL_FLOAT, 0, vert);
    glTexCoordPointer(2, GL_FLOAT, 0, tex);
    glNormalPointer(GL_FLOAT, 0, normal);

    for (int i = 0; i < face->_numVertices; i++) 
    {
        vert[0 + (i*3)] = vertices[3 * face->_vertices[i]];
        vert[1 + (i*3)] = vertices[3 * face->_vertices[i]+1];
        vert[2 + (i*3)] = vertices[3 * face->_vertices[i]+2];

        normal[0 + (i*3)] = vertNormals[3 * face->_vertices[i]];
        normal[1 + (i*3)] = vertNormals[3 * face->_vertices[i]+1];
        normal[2 + (i*3)] = vertNormals[3 * face->_vertices[i]+2];

            if (face->_texVertices)
            {
                tex[0 + (i*2)] = textureVerts[2 * face->_texVertices[i]];
                tex[1 + (i*2)] = textureVerts[2 * face->_texVertices[i]+1];
            }
    }

    glDrawArrays(GL_TRIANGLE_FAN ,0, face->_numVertices);
    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
    glDisableClientState(GL_NORMAL_ARRAY); 
} 
```

但是性能结果是完全一样的。

如何优化我的代码以获得一些 fps？

请注意，我的最终目标是将此代码用于 android 设备，因此不再允许 glBegin 和 glEnd 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T13:06:12.887

我认为 glDrawArray 可能是最好的选择。如果我没记错的话，数组中的数据将在每次迭代中从客户端发送到服务器。如果数据在每次迭代中都发生了变化，那么这并不是一个真正的问题，因为客户端需要在每次更改数据时将数据发送到服务器。这意味着由于 VBO 的实现，在服务器内存上存储大量数据不会真正给您带来任何性能提升，因为无论如何您都必须重新发送该数据。

您使用的是大对象还是许多小对象？我相当有信心 glDrawArrays 在大型对象的情况下是最佳的。

“性能结果完全相同”到底是什么意思？是非常相似还是有什么不同？对我来说，如果性能完全相同，这听起来有点可疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:48:46.223

如果您的网格没有改变（即它是静态模型），那么您可以使用[显示列表](http://www.opengl.org/sdk/docs/man/xhtml/glGenLists.xml "显示列表")

这允许您将所有顶点/纹理/法线调用预先组合到一个列表中，然后通过对 glCallList 的单个函数调用来呈现该列表。

# objective-c - 在导航栏中自定义 UIBarButtonItem。

> ID：12894401
> 
> 赞同：0
> 
> 时间：2012-10-15T11:12:16.807
> 
> 标签：objective-c, ios, uinavigationcontroller, customization

我有一个单独的自定义类来完成所有控件的自定义。我也在自定义导航栏按钮。

现在在导航 VC 的 viewDidLoad 中，我将 VC 的 leftBarButtonItem 的引用传递给自定义类，并且该引用的类型为 UIBarButtonItem。但是自定义类如何知道传递的对 UIBarButtonItem 的引用是左按钮？我需要班级知道这一点，因为左按钮的自定义与右按钮不同。如果可以使用内置框架功能来实现，我想避免为此创建自定义枚举。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:38:37.250

不久前我做了类似的事情。你可能想让你的自定义方法有一个参数来告诉它你传递的是什么类型的按钮

```
[CustomizationClass customizeButton:leftBarButton ofType:kLeftBarButton]; 
```

然后让 customizeButton 方法检查“ofType”并进行相应的定制。

编辑：只需阅读您所说的关于自定义枚举的内容。据我所知，没有办法检测到这一点。

# java - 创建一个 DelegateForest 并以预先确定的顺序显示它

> ID：12894402
> 
> 赞同：2
> 
> 时间：2012-10-15T11:12:19.013
> 
> 标签：java, jung

我正在尝试创建一个代表森林，其中节点以预先排序的顺序出现。我目前可以创建一个森林并显示它，但是节点的顺序在运行之间会发生变化。

我可以使用 DirectedOrderedSparseMultigraph 设置单个树中节点的顺序（如此处建议：[JUNG：将树节点按顺序放置](https://stackoverflow.com/questions/10215718/jung-placing-tree-nodes-in-order)）但我不确定如何处理整个森林。

目前我用来生成 DelegateForest 的代码如下：

```
this.forest = new DelegateForest(); 
```

而我认为我需要的代码是：

```
this.forest = new DelegateForest(aDirectedOrderedSparseMultigraph); 
```

基本上我要问的是如何创建一个包含多个树/DirectedOrderedSparseMultigraph 的 DirectedOrderedSparseMultigraph？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:18:53.703

你不应该做任何特别的事情。只需创建一个 DOSM 并将其传入，DelegateForest 就会处理它。支持 DOSM 实例将为您的森林中的每棵树提供一个组件，但您不必关心这些。

# php - 创建 vCard 二维码

> ID：12894404
> 
> 赞同：4
> 
> 时间：2012-10-15T11:12:26.337
> 
> 标签：php, google-visualization, qr-code, vcf-vcard

我有一个 PHP 脚本，可以根据网站上输入的详细信息生成名片模板。

我们最近决定将 QR 码 vCards 添加到名片中，作为保存联系信息的简便方法。我以[本](http://diginit.wordpress.com/2011/10/19/getting-vcard-info-into-a-qr-code-using-the-google-chart-api/)教程为起点。

但是，我的二维码不起作用。它一直没有给我任何结果和文本格式。

这是创建 vcard 并显示二维码的脚本：

```
$vcard = "BEGIN:VCARD\r\nVERSION:3.0\r\n
N:" . $_POST['surname'] . ";" . $_POST['name'] . "\r\n
FN:" . $_POST['name'] . " " . $_POST['surname'] . "\r\n
ORG:Example Organisation\r\n
TITLE:" . $_POST['position'] . " [" . $_POST['qualification'] . "]\r\n
TEL;TYPE=work,voice:" . $_POST['telephone'] . "\r\n
TEL;TYPE=cell,voice:" . $_POST['cellno'] . "\r\n
TEL;TYPE=work,fax:" . $_POST['fax'] . "\r\n
URL;TYPE=work:www.example.com\r\n
EMAIL;TYPE=internet,pref:" . $_POST['email'] . "\r\n
REV:" . date('Ymd') . "T195243Z\r\n
END:VCARD";

echo '<img src="http://chart.apis.google.com/chart?chs=500x500&cht=qr&chld=H&chl="' . urlencode($vcard) . '"/>'; 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T11:39:37.000

双引号被编码到二维码中，如果你删除它们应该可以工作（并且应该避免错误，因为任何特殊字符都被编码了）。

删除引号给了我这个似乎有效的二维码：

[![二维码](../Images/6c71e3e143ca1ea1e96c7ff1579f78bf.png)](https://i.stack.imgur.com/apagE.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-24T18:21:10.447

只是改变：

```
echo 'img src="http://chart.apis.google.com/chart?chs=500x500&cht=qr&chld=H&chl="' . urlencode($vcard) . '"/'; 
```

到：

```
echo 'img src="http://chart.apis.google.com/chart?chs=500x500&cht=qr&chld=H&chl=' . urlencode($vcard) . '"/'; 
```

这是因为您正在关闭，带有“来自 TAG 的 SRC `<img>`。

# c# - 在 WinRT 中膨胀压缩字节数组

> ID：12894406
> 
> 赞同：2
> 
> 时间：2012-10-15T11:12:33.693
> 
> 标签：c#, windows-8, windows-runtime

我正在尝试将以下代码移植到 WinRT 应用程序：

```
using (var stream = new InflaterInputStream(new MemoryStream(compressedBytes)))
{
    MemoryStream memory = new MemoryStream();
    byte[] writeData = new byte[4096];
    int resLen;
    while ((resLen = stream.Read(writeData, 0, writeData.Length)) > 0)
    {
        memory.Write(writeData, 0, resLen);
    }
    uncompressedBytes = memory.ToArray();
} 
```

我在其`InflaterInputStream`类中使用 SharpZipLib，但没有可用的 WinRT 编译（由于 .NET/WinRT 之间的差异太大，自己重新编译也不是一种选择）。

有人对我可以使用哪些本机/第 3 方功能来实现相同结果有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:36:41.110

好的，感谢 Hans Passant 的评论，我发现使用以下行会产生与使用 InflaterInputStream 相同的结果：

```
using (DeflateStream stream = new DeflateStream(new MemoryStream(compressedBytes, 2, compressedBytes.Length - 2), CompressionMode.Decompress)) 
```

跳过前两个字节的原因是它们是 zlib 规范的一部分，而不是 deflate 规范： http: [//george.chiramattel.com/blog/2007/09/deflatestream-block-length-does-not-match .html](http://george.chiramattel.com/blog/2007/09/deflatestream-block-length-does-not-match.html)

# xml - 如何在 vtd XML 中连接多个标签值？

> ID：12894407
> 
> 赞同：3
> 
> 时间：2012-10-15T11:12:38.030
> 
> 标签：xml, xpath, vtd-xml

如何在 vtd XML 上使用 XPATH 连接多个标记值？

```
 <pre>
      <a>
        <b>
           <c>Hi</c>  
           <d>Vtd</d>
           <e>Users</e>
        </b>
      </a>
  </pre> 
```

我尝试使用以下内容失败。

```
 Xpath: concat(\a\b\c, \a\b\d, \a\b\e)   Result is : Hi Vtd Users 
```

如果我在此 XPATH 中使用 concat，我会收到以下错误：

```
 Error "Function Expr can't eval to node set" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:31:09.777

您需要确保您从根节点开始并且您的[轴](http://www.w3schools.com/xpath/xpath_axes.asp)是正确的。下面的 XPath 返回所需的输出。

```
concat(pre/a/b/c, " ", pre/a/b/d, " ", pre/a/b/e) 
```

# asp.net-mvc - Post/Get 适用于 VS 开发服务器，但不适用于 IIS7

> ID：12894409
> 
> 赞同：1
> 
> 时间：2012-10-15T11:12:44.817
> 
> 标签：asp.net-mvc, json, iis, iis-7

我使用 Asp.Net MVC 4（VS2010 SP1，Windows 7）创建了一个网页。它还有一个 api，我可以通过它进行搜索或上传某些东西（数据和文件）。当我在 VS2010 SP1 的开发服务器上部署页面时，一切正常，但是当我选择 IIS (IIS7) 时，api 不再工作。“IsSuccessStatusCode”似乎是错误的。但是页面本身可以工作并且可以从其他机器访问。

这是我用于内置开发服务器的地址：“http://localhost:56272/api/” 我用于 IIS 的地址：“http://127.0.0.1/api/”

我为 IIS 创建了一个虚拟目录（由 VS2010 完成）。我是否需要另外配置一些东西，或者它可能是只存在于 IIS 的路由问题？

这是我的客户端 - MyService 类 - 用于 GET：

```
 public MyService(string serviceAdress) //"http://127.0.0.1/api/"
        {
            this.serviceAdress = new Uri(serviceAdress); //of type Uri
            client = new HttpClient();
            client.DefaultRequestHeaders.Accept.Add(
                new MediaTypeWithQualityHeaderValue("application/json"));
        }
    public Task<IEnumerable<Item>> SearchByTag(string tag)
    {
        client.BaseAddress = serviceAdress;
        var getStuffCall=client.GetAsync("Search/ByTag/" + tag);
        var r=getStuffCall.ContinueWith(
            t =>t.Result.IsSuccessStatusCode? (t.Result.Content.ReadAsAsync<IEnumerable<Item>>().Result):new List<Item>()
            );
        return r;
    } 
```

我的服务器端如下所示：

```
public class SearchController : ApiController
    {
        [HttpGet]
        public IEnumerable<Shared.Item> ByTag(string search)
        {....}
    } 
```

这是 WebApiConfig 中的路由：

```
config.Routes.MapHttpRoute(
            name: "SearchApi",
            routeTemplate: "api/Search/{action}/{search}",
            defaults: new
                          {
                              controller="Search"                                  
                          }
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:16:07.213

您需要确保网站和应用程序池的用户对您正在执行上传的目录具有写入权限。在开发服务器中，它不会发挥作用，因为它在您具有正常权限的本地（或域）帐户下运行。IIS7 在受限用户帐户下运行，因此必须调整其权限，或者您要上传到的文件夹需要包含该用户的写入权限。

可以在此处找到调整权限的具体说明：http: [//support.microsoft.com/kb/979124](http://support.microsoft.com/kb/979124)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:19:03.373

IIS 的地址错误。而不是“http://127.0.0.1/api/”，它必须是“http://127.0.0.1/MyVirtualFolderSomething/api/”。

# .htaccess - opencart .htaccess mod_rewrite 问题

> ID：12894412
> 
> 赞同：0
> 
> 时间：2012-10-15T11:12:53.293
> 
> 标签：.htaccess, mod-rewrite, opencart

我在 seo url-s 的开放式购物车系统上使用模式重写，根据链接它工作得很好。但我在标题中有一个 php 代码：

```
<?php
$request = new Request();
if ( !isset($request->get['route']) ||  $request->get['route']=='common/home' ) { ?>
<div class="center-main">
<?php }else {?>
<div class="center-mainbg"> 
```

因此，如果它不常见/主页，则 div 应该注入`<div class="center-mainbg">` ，并且当模式重写打开时，此规则不会接缝工作，它会保持 `<div class="center-main">`规则...

mod_rewrite 的 htaccess 规则如下所示：

```
RewriteBase /
RewriteRule sitemap.xml /index.php?route=feed/google_sitemap
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:17:38.793

我看到它的方式只需将路由变量名称更改为：

```
if ( !isset($request->get['_route_']) ||  $request->get['_route_']=='common/home' ) { ?> 
```

因为在重定向规则中，路由的名称在下划线之间。

# jsf - xmlns:h="http://java.sun.com/jsf/html" 是如何工作的？

> ID：12894418
> 
> 赞同：0
> 
> 时间：2012-10-15T11:13:12.490
> 
> 标签：jsf, facelets, jsf-1.2

根据这篇[文章](https://stackoverflow.com/questions/6594482/eclipse-cant-find-facelet-tag-library-for-uri-http-java-sun-com-jsf-html)，我试图`html_basic.taglib.xml`在 jsf-impl.jar 中查找文件（根据 BalusC 的回答）。不存在任何 xml 文件`html_basic.taglib.xml`。但是，还有其他 xml 文件，例如`jsf-ri-runtime.xml, xml.xsd`其中没有相关 URL 的条目。

由于我没有获得所需的 xml 文件和所需的 URL 条目，因此我实际上无法理解 BalusC 在该帖子中试图讲述的内容。任何人都可以详细说明吗？我在哪里可以找到 JSF jar 中的 xml 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:14:19.890

该答案适用于 JSF 2.0，而不适用于 JSF 1.2。

`.taglib.xml`在原生不支持Facelets的 JSF 1.2 中，没有任何`jsf-impl.jar`. 只有特定于 JSP 的`.tld`文件。对于 JSF 1.2 中的 Facelets，它改为包含在`jsf-facelets.jar`. 它位于 中`/META-INF/jsf-html.taglib.xml`，而后者又仅包含以下条目：

```
<facelet-taglib>
    <library-class>com.sun.facelets.tag.jsf.html.HtmlLibrary</library-class>
</facelet-taglib> 
```

[你可以在这里找到 的源代码`HtmlLibrary`](http://www.docjar.com/html/api/com/sun/facelets/tag/jsf/html/HtmlLibrary.java.html)。

# iphone - iOS6 中的 NSCalender 有问题

> ID：12894420
> 
> 赞同：0
> 
> 时间：2012-10-15T11:13:14.940
> 
> 标签：iphone, ios5, ios6

我一直在为 iPhone 开发一个天气应用程序，在 iOS5 上一切正常，但在 iOS6 上显示的日子有些奇怪......

但奇怪的是这个代码返回`satuarday instead of monday sunday instead of tuesday`等等......但它在iOS 5上运行良好

我正在使用以下方法来显示星期几..

```
-(NSString*)calculateDayOfTheWeek:(NSString *)date
{
    NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
    // [formatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
    [formatter setDateFormat:@"YYYY-MM-dd"];

    NSDate *date1 = [formatter dateFromString:date];
   // NSCalendar *gregorian = [NSCalendar currentCalendar];
    NSCalendar *gregorian = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *comps = [gregorian components:NSWeekdayCalendarUnit  fromDate:date1];

    int w = [comps weekday];
    //  NSLog(@"%i",w);

    if(w == 1)
        return @"Sun";
    else if (w == 2) 
        return @"Mon";
    else if(w == 3)
        return @"Tue";
    else if (w == 4) 
        return @"Wed";
    else if(w == 5)
        return @"Thu";
    else if (w == 6) 
        return @"Fri";
    else if (w == 7) 
        return @"Sat";

    else
        return @"";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:23:48.180

啊啊啊……我想通了……他们已将日期格式从更改`YYYY-MM-dd`为`yyyy-MM-dd`……

这可能对某人有帮助....

# android - 在android中选择微调器

> ID：12894424
> 
> 赞同：-1
> 
> 时间：2012-10-15T11:13:32.923
> 
> 标签：android, spinner, android-spinner

嗨，我必须开发一个微调器示例。

列表添加到微调框：

```
List<String> list = new ArrayList<String>();
Intent in = getIntent();

String status = in.getStringExtra(KEY_STATUS);
list.add(status);
list.add("Q");
list.add("P");
list.add("F");
list.add("I");
list.add("C"); 
```

这里的状态是从以前的活动状态值得到的。其他列表是默认的 Q、P、F、I 和 C。因为第一个列表只显示以前的状态。所以只有我必须先在这里添加状态。在这里将所有值添加到包括复制的列表，然后使用 for 循环检查当前状态并尝试从列表中删除。这里使用了这个概念。

这是我的代码：

```
public class InsertionExample extends Activity {
private final String NAMESPACE = "http://xcart.com";
private final String URL = "http://192.168.1.168:8089/XcartLogin/services/update?wsdl";
private final String SOAP_ACTION = "http://xcart.com/insertData";
private final String METHOD_NAME = "insertData";
Button btninsert;
String selectedItem;
private int i;

static final String KEY_NAME = "orderid";
static final String KEY_STATUS = "status";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    final boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.change_status);
    if (customTitleSupported) {
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);
    }

    final TextView myTitleText = (TextView) findViewById(R.id.mytitle);
    if (myTitleText != null) {
        myTitleText.setText("Change Order Status");
    }
  /*  Intent in = getIntent();

    // Get XML values from previous intent
    String orderid = in.getStringExtra(KEY_NAME);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.textView1);

    lblName.setText(orderid); */

    Spinner spinner = (Spinner) findViewById(R.id.spinner1);
    btninsert = (Button)findViewById(R.id.btn_insert1);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
             Intent in = getIntent();
             String orderid = in.getStringExtra(KEY_NAME);
             String status = in.getStringExtra(KEY_STATUS);
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo unameProp =new PropertyInfo();
            unameProp.setName("Status");//Define the variable name in the web service method
            unameProp.setValue(selectedItem);//Define value for fname variable
            unameProp.setType(String.class);//Define the type of the variable

            request.addProperty(unameProp);
            PropertyInfo idProp =new PropertyInfo();
            idProp.setName("Orderid");//Define the variable name in the web service method
            idProp.setValue(orderid);//Define value for fname variable
            idProp.setType(String.class);//Define the type of the variable
            request.addProperty(idProp);

              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
              envelope.setOutputSoapObject(request);
              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

              try{
               androidHttpTransport.call(SOAP_ACTION, envelope);
                  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

                 TextView result = (TextView) findViewById(R.id.textView2);
                  result.setText(response.toString());
             }
           catch(Exception e){

           }
              }
    });

    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());
    //Dynamically generate a spinner data 
    createSpinnerDropDown();

    }

    //Add animals into spinner dynamically
     private void createSpinnerDropDown() {

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

    //Array list of animals to display in the spinner
    List<String> list = new ArrayList<String>();
    Intent in = getIntent();

    String status = in.getStringExtra(KEY_STATUS);
    list.add(status);
    list.add("Q");
    list.add("P");
    list.add("F");
    list.add("I");
    list.add("C");
    for(i=0;i<((TextView) list).length();i++){
        if(list.get(i).equals(status)) {
                list.remove(list.get(i));
        }
     }
    //create an ArrayAdaptar from the String Array
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    //set the view for the Drop down list
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    //set the ArrayAdapter to the spinner
    spinner.setAdapter(adapter);
    adapter.notifyDataSetChanged();
    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

  }
  public class MyOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

         selectedItem = parent.getItemAtPosition(pos).toString();

       }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Do nothing.
    }
   } 
```

在这里，我的应用程序被强制关闭。在我的控制台窗口上也出现以下错误：

```
 10-15 16:34:02.021: D/dalvikvm(2203): GC_EXTERNAL_ALLOC freed 947 objects / 65120 bytes in 61ms
  10-15 16:39:29.661: D/dalvikvm(2203): GC_FOR_MALLOC freed 5616 objects / 350760 bytes in 56ms
  10-15 16:39:30.342: D/dalvikvm(2203): GC_FOR_MALLOC freed 8368 objects / 548488 bytes in 52ms
  10-15 16:39:32.082: W/drawable(2203): Bad element under <shape>: margin
  10-15 16:39:32.092: W/drawable(2203): Bad element under <shape>: margin
  10-15 16:39:32.172: D/dalvikvm(2203): GC_FOR_MALLOC freed 5508 objects / 311288 bytes in 51ms
   10-15 16:39:32.172: I/dalvikvm-heap(2203): Grow heap (frag case) to 2.912MB for 87396-byte allocation
   10-15 16:39:32.232: D/dalvikvm(2203): GC_FOR_MALLOC freed 136 objects / 5536 bytes in 52ms
    10-15 16:39:32.292: D/dalvikvm(2203): GC_FOR_MALLOC freed 0 objects / 0 bytes in 58ms
   10-15 16:39:32.292: I/dalvikvm-heap(2203): Grow heap (frag case) to 2.990MB for 87396-byte allocation
   10-15 16:39:32.352: D/dalvikvm(2203): GC_FOR_MALLOC freed 70 objects / 2880 bytes in 55ms
    10-15 16:39:32.671: D/dalvikvm(2203): GC_FOR_MALLOC freed 6159 objects / 257232 bytes in 57ms
    10-15 16:39:33.042: D/dalvikvm(2203): GC_FOR_MALLOC freed 20488 objects / 928728 bytes in 55ms
     10-15 16:39:36.112: D/AndroidRuntime(2203): Shutting down VM
     10-15 16:39:36.112: W/dalvikvm(2203): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
     10-15 16:39:36.142: E/AndroidRuntime(2203): FATAL EXCEPTION: main
     10-15 16:39:36.142: E/AndroidRuntime(2203): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.androidlogin.ws/com.androidlogin.ws.InsertionExample}: java.lang.ClassCastException: java.util.ArrayList
      10-15 16:39:36.142: E/AndroidRuntime(2203):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
     10-15 16:39:36.142: E/AndroidRuntime(2203):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
     10-15 16:39:36.142: E/AndroidRuntime(2203):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
     10-15 16:39:36.142: E/AndroidRuntime(2203):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
      10-15 16:39:36.142: E/AndroidRuntime(2203):   at android.os.Handler.dispatchMessage(Handler.java:99)
      10-15 16:39:36.142: E/AndroidRuntime(2203):   at android.os.Looper.loop(Looper.java:123)
      10-15 16:39:36.142: E/AndroidRuntime(2203):   at android.app.ActivityThread.main(ActivityThread.java:4627)
       10-15 16:39:36.142: E/AndroidRuntime(2203):  at java.lang.reflect.Method.invokeNative(Native Method)
      10-15 16:39:36.142: E/AndroidRuntime(2203):   at java.lang.reflect.Method.invoke(Method.java:521)
     10-15 16:39:36.142: E/AndroidRuntime(2203):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
      10-15 16:39:36.142: E/AndroidRuntime(2203):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
     10-15 16:39:36.142: E/AndroidRuntime(2203):    at dalvik.system.NativeStart.main(Native Method)
     10-15 16:39:36.142: E/AndroidRuntime(2203): Caused by: java.lang.ClassCastException: java.util.ArrayList
     10-15 16:39:36.142: E/AndroidRuntime(2203):    at com.androidlogin.ws.InsertionExample.createSpinnerDropDown(InsertionExample.java:122)
       10-15 16:39:36.142: E/AndroidRuntime(2203):  at com.androidlogin.ws.InsertionExample.onCreate(InsertionExample.java:101)
  10-15 16:39:36.142: E/AndroidRuntime(2203):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
   10-15 16:39:36.142: E/AndroidRuntime(2203):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
  10-15 16:39:36.142: E/AndroidRuntime(2203):   ... 11 more
   10-15 16:39:38.791: D/dalvikvm(2210): GC_EXTERNAL_ALLOC freed 976 objects / 66240 bytes in 50ms 
```

请给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:34:09.440

使用这个条件：

```
for(i=0;i<list.size();i++){
        if(list.get(i).equals(status)) {
                list.remove(list.get(i));
        }
 } 
```

希望它适用于所有人。

# python - python编写csv Django for循环

> ID：12894426
> 
> 赞同：0
> 
> 时间：2012-10-15T11:13:40.913
> 
> 标签：python, django, csv, file-io

我有点坚持使用 python csv 库编写 csv 文件。我正在使用 Django 将信息从数据库中获取到对象中。

我现在拥有的可以工作但尚未完成：

```
writer.writerow([Itag.Gen_ID if Itag else '',
     Itag.Solyc if Itag else '',
     Itag.GO_number if Itag else '',
     Itag.GO_def if Itag else '',
     Itag.Itag_description if Itag else '',
     Itag.IPR_Number if Itag else '',
     Itag.IPR_Description if Itag else '',
     Itag.Trivial_name if Itag else '',
     Loci.Locus_symbol if Loci else '',
     Loci.Locus_name if Loci else '',]) 
```

如果存在对象，这会将对象信息写入 CSV 文件。现在在下一部分中，我有一个名为 的对象`Blast`， `Blast`它有几个属性： `Blast.name, Blast.hit, Blast.score` 该对象`Itag`具有一对一的关系，`Loci`这就是为什么它完全适合连续排列的原因。

现在该`Blast`对象具有多对一关系，`Itag`因此`Loci` 5`Blast`次命中可以与 1 次命中有关系`Itag and Loci`。

现在如何将所有 5 个`Blast`对象属性写入 CSV 文件的同一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:42:24.330

它不整洁，但最明显的解决方案是将命中附加到该行：

```
<all that other stuff>, first_blast_name, first_blast_hit, first_blast_score, second_blast_name, second...<and so on> 
```

就我个人而言，如果有的话，我很少这样做。我宁愿有一个 csv 文件`loci`和另一个`blast`.

# matlab - 如何从 Psychtoolbox-3 中的通用 USB HID 设备获取事件？

> ID：12894427
> 
> 赞同：2
> 
> 时间：2012-10-15T11:13:43.333
> 
> 标签：matlab, usb, hid, psychtoolbox

我有一个 Griffin Technology 的“PowerMate”USB 旋钮。它显然符合 HID 标准，我可以使用以下代码检测到它：

```
 LoadPsychHID;
devs = PsychHID('Devices');
for i = 1:length(devs)
    index = devs(i).index;
    if strfind(devs(i).product, 'PowerMate')
        break
    end
end 
```

设备索引为`1`。

然后我尝试为设备启动一个事件队列：

```
KbQueueCreate(index);
PsychHID('KbQueueStart', index); 
```

到目前为止没有错误，所以我检查它`CharAvail`

```
[avail, numChars] = CharAvail

avail =

     0

numChars =

     0 
```

此外，运行为变量`[have_events, a, b, c, d] = KbQueueCheck(index);`返回布尔值，为变量、和返回空矩阵。`True``have_events``a``b``c``d`

我究竟做错了什么？有什么建议么？

**编辑：** 对于它的价值，我不需要非常准确的时间，所以如果有办法让它在普通的 Matlab 中工作，那也很好。如果不是绝对必要，则无需使用 Psychtoolbox！

谢谢！

# php - apache 标头中的欧元字符

> ID：12894428
> 
> 赞同：2
> 
> 时间：2012-10-15T11:13:50.120
> 
> 标签：php, iphone, mysql, ios, codeigniter

我们有基于 codeigniter 的 iphone 应用程序使用的 Web 服务，参数通过标头传递。一切正常，直到参数值中有一个欧元（€）符号。每当从 iphone 发送的参数有欧元符号时，它就会被截断。有什么想法我做错了或者我们应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:57:45.320

根据 RFC（RFC 2616，如果您有兴趣），您不能在 HTTP 标头中发送非 ASCII 字符。据我所知，当您这样做时会发生未定义的情况-您的服务器似乎丢弃了标题的其余部分。

您需要在发送前对标头的值进行 URL 编码（将特殊字符替换为 %XX 字符串，正如您经常在浏览器的地址栏中看到的那样）。

要在 iPhone 上正确执行此操作，请参阅此[帖子](https://stackoverflow.com/a/3426140/1395993)。在 PHP 端，[`urldecode()`](http://php.net/manual/en/function.urldecode.php)将允许您检索原始标头。

# php - Respak 与 PHP 的数据库连接

> ID：12894429
> 
> 赞同：0
> 
> 时间：2012-10-15T11:13:52.257
> 
> 标签：php

如何从 PHP 连接 Respak 数据库。如果 respak 数据库中尚不存在用户，我需要在其中插入用户..

是否有任何可用的文档？我没有在互联网上找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:17:58.337

其实这并不是一件复杂的事情。为此有两种方法可用。

您可以通过以下 2 种方式连接到带有 firebird 数据库的 ResPAK

1) 使用 PHP 本身的 firebird 连接到 Respak。

2) 如果您在 PHP 中连接 firebird 有任何问题，那么您可以使用 .Net 连接 firebird 和 Respak。这更容易。在 .net 接口中编写所需的函数，并将它们作为 PHP 的 Web 服务调用。我在我的项目中使用这种方式。

谢谢，

哈利，

http://www.innovativewebz.com

# jquery - 后退按钮第一次不更改哈希

> ID：12894430
> 
> 赞同：0
> 
> 时间：2012-10-15T11:14:00.287
> 
> 标签：jquery, jquery-plugins, browser-history, jquery-bbq

我的问题是这样[的](https://stackoverflow.com/questions/10822544/back-button-not-updating-hash-in-iframe-on-ie)，但我的问题不在 IE（未测试）中，而是在 Chrome 和 Firefox 中。无论如何，这个问题没有答案。

我正在使用[BBQ 插件](http://benalman.com/projects/jquery-bbq-plugin/)，代码如下：

```
 $(window).bind('hashchange', function(e) {

            var href = $.param.fragment();

            hrefOld = $("#loadZone").attr("src");
            centerZoneActivePage = href;

            // Create container for this url's content and store a reference to it in
            // the cache.
            cache[ href ] = $("#loadZone").attr("src", href);
            alert("new: " +href);
   });

   // Since the event is only triggered when the hash changes, we need to trigger
   // the event now, to handle the hash the page may have loaded with.
   $(window).trigger( 'hashchange' ); 
```

正在发生的事情是，当我在 iframe（“#loadZone”）中加载新页面时，哈希值正在正确更改。但是当我点击浏览器后退按钮时，前一页正在加载，但没有改变哈希。当第二次点击时，hash 改变并且活动页面保持在 iframe 中。我不明白为什么哈希在第一次没有改变，因为上一页加载。

注意：警报消息仅在第二次单击后退按钮时出现。

后退按钮点击总结：

*   首次点击：Iframe 上一页加载，不显示警告信息，hash 未更改；
*   第二次点击：iframe 页面还是一样，提示信息显示，hash 改变。

这个怎么同步？我正在使用 jquery-1.7.1.js。有人用过这个版本的BBQ插件，成功了吗？我已经阅读[了这个问题](https://stackoverflow.com/questions/8680933/is-jquery-bbq-plugin-still-working-with-jquery-1-7x?rq=1)，但它不是决定性的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:30:32.237

好吧，我解决了这个问题，每次需要加载页面时删除 iframe 并创建一个新的。不漂亮，但解决了。不知何故，iframe 与历史控制发生了冲突。

# git - 为什么 TortoiseGit 中的“加载腻子键”字段被禁用？

> ID：12894434
> 
> 赞同：30
> 
> 时间：2012-10-15T11:14:06.827
> 
> 标签：git, putty, ssh-keys, tortoisegit

我想使用 SSH 密钥而不是用户名和密码连接到我的存储库。

但是，当我尝试在 TortoiseGit 中执行此操作时，我无法输入密钥，因为“加载腻子密钥”已禁用。谁能指出为什么会发生这种情况以及我如何启用该领域？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-18T20:13:44.300

在 TortoiseGit 设置中转到*Network*。在*SSH Client*字段中，指定 TortoiseGitPLink 的路径

例如：

> C:\Program Files\TortoiseGit\bin\TortoiseGitPLink.exe

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-02-27T16:33:15.147

`TortoiseGitPlink.exe`为for `SSH client:`in设置正确的路径`Settings->Network`应该可以解决问题。就像是：

```
C:\Program Files\TortoiseGit\bin\TortoiseGitPlink.exe 
```

**但是，在某些情况下，由于某种原因没有保存新路径！**

正如评论中提到的，有时（在我的情况下`TortoiseGit 2.5.0.0`）该设置没有被应用。单击`OK`or`Apply`没有产生任何错误，但是当再次关闭和打开`Settings`时，旧路径在那里。

为了解决这个问题，还要检查`Enable Proxy Server`同一`Network`菜单（不要提供任何代理设置）。在此之后，窗口将在`OK`按下时关闭，当重新打开时，`Enable Proxy Server`将取消选中，但将保存新路径。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-15T12:39:35.907

SSH 和基于密钥的身份验证是 SSH-client (plink) 和 key-agent (pageant) 的工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-02T01:51:28.003

解决此问题的简单方法，请按照图片操作。谢谢

[![在此处输入图像描述](../Images/f70a3d6b6509c7e99eb5ee5a14e7b77c.png)](https://i.stack.imgur.com/yjWAi.png)

# php - 来自 htaccess 的数据

> ID：12894435
> 
> 赞同：2
> 
> 时间：2012-10-15T11:14:09.137
> 
> 标签：php, .htaccess, mod-rewrite, urlfetch

我想从 htaccess 获取所有数据我知道这是一种愚蠢的问题，但我只是想知道是否可以从 htaccess 规则列表中仅获取用户友好的链接

```
RewriteRule ^login$ common/login.php [L]
RewriteRule ^forgot-password$ common/forgotpassword.php [L]
RewriteRule ^page/(.*)$ common/page_content.php?pageslug=$1 [L]
RewriteRule ^activate/([a-zA-Z]+)/([0-9]+)/(.*)$ common/activate.php?type=$1&userid=$2&activationcode=$3 [L]
RewriteRule ^forgot-password$ common/forgotpassword.php [L] 
```

我希望这些数据格式为

```
$data->array(); //is array
$data[0] = login common/login.php 
$data[1] = forgotpassword common/forgotpassword.php or simlar to this 
```

或者请建议我一些方法来获取我网站中的所有标签及其路径名我想基于 htaccess 动态构建我的站点地图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:45:14.787

未经测试，但我认为您正在寻找这样的东西：

```
function rewriteLink($link)
{

    if(preg_match('/^login$/',$link)){return "common/login.php";}
    if(preg_match('/^forgot-password$/',$link)){return "common/forgotpassword.php";}
    if(preg_match('/^page/(.*)$/',$link,$m)){return sprintf("common/page_content.php?pageslug=%s",$m[1]);}
    if(preg_match('/^activate\/([a-zA-Z]+)\/([0-9]+)\/(.*)$/',$link,$m)){return sprintf("common/activate.php?type=%s&userid=%s&activationcode=%s",$m[1],$m[2],$m[3]);}
    return $link;
} 
```

ps您的.htaccess文件包含两个重复的forgotpassword.php重写语句，对于我上面编写的函数，我基于您的htaccess文件但从我的代码逻辑中省略了第二个冗余实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:26:02.640

```
RewriteRule ^(.*?)/(.*?)$ common/$1.php?getValues=$2 [L,NC] 
```

您可以使用此代码，您可以通过此示例制作好的网址：

如果你想去 common/forgot-password.php yoururl.com/forgot-password for go page "aboutus" yoururl.com/page/aboutus 它的意思是：common/page.php?getValues=abouts 你可以用$_GET['getValues'] 或用于多个数据

yoururl.com/activate/type/userid/key meanÇ: common/activate.php?getValues=type/userid/key 并用explode解析：

```
$datas=explode("/",$_GET['getValues']);
echo "type: $datas[0]
userid: $datas[1]
key: $datas[2]"; 
```

# javascript - 为什么在jQuery模板内部不能使用apply

> ID：12894440
> 
> 赞同：0
> 
> 时间：2012-10-15T11:14:12.247
> 
> 标签：javascript, jquery, jquery-templates

我的示例 JSON 和 js：

```
function foo1(a) { return a*1.5;} //NOTE: foo1 accept one parameter
function foo2(a,b) { return a*1.5 + b;} //NOTE: foo2 accept two parameter
var arr=[ {func:foo1, para:[10]}, {func:foo2, para:[10,20]} ]; 
```

我的 jQuery 模板（不工作）：

```
<script id="template1" type="text/x-jquery-tmpl">
        ${$item.data.func.apply(this,$item.data.para)}
</script> 
```

调用模板：

```
 $('#template1').tmpl(arr).appendTo('#mycontainer'); 
```

我的问题：

*   我有不同的函数接受不同数量的参数（我不能更改函数的参数#）
*   所以我想传递'func'中的函数名和'para'中的参数（作为一个数组），并使用“apply”方法从jQuery模板内部调用该方法
*   但是如果我在函数后使用 apply （如**$item.data.func.apply**）它会抛出“未定义”错误

更多观察（工作）：

*   如果我调用 $item.data.func(10) 或 $item.data.func(10,20) 之类的方法，它可以工作
*   在我想调用该方法的地方`typeof $item.data.func`返回“函数”

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:37:41.423

如果表达式是函数类型，则似乎是 jQuery 模板框架本身使用 apply 来调用。这使得事情阻止在 jQuery 模板中使用**apply**来调用方法。

所以这是我的技巧，它引入了一个通用的通用方法调用程序，例如

模板：

```
<script id="template1" type="text/x-jquery-tmpl">
    ${genericTrigger($item.data.func, $item.data.para)}
</script> 
```

JS：

```
function genericTrigger(func, para) {
    // This need to check, as some unexpected call is coming to this 
    // without passing value
    if (typeof func != 'undefined' && typeof func == 'function') 
    {
       return func.apply(this, para);
    }
}

var arr=[ {func:foo1, para:[10]}, {func:foo2, para:[10,20]} ];
$('#template1').tmpl(arr).appendTo('#mycontainer'); 
```

# jquery - 将 CheckboxList 的选定值与 CSV 字符串进行比较

> ID：12894446
> 
> 赞同：0
> 
> 时间：2012-10-15T11:14:37.120
> 
> 标签：jquery, string, csv, compare, checkboxlist

我在页面上有一个带有复选框的列表。无论何时选择一个项目，它都应该与一个`CSV`字符串进行比较，存储在一个隐藏的输入字段中。该字符串看起来像 13,14,19`。

`CSV`如果所选复选框的值与我的字符串中存在的任何值匹配，我需要显示一个警告框。

我的js函数是

```
 $(document).ready(function () {
            $('#<%=chkboxListReportReq.ClientID %>').click(function () {
                $('#<%=chkboxListReportReq.ClientID %> input:checked').each(function () {
                    alert($(this).closest('span').attr('data-value'));
                    //alert($(this).next('label').text());
                });
            });
        }); 
```

这是我到目前为止尝试过的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:17:29.517

> 这个问题不需要 HTML，我只是在搜索比较 CSV 和字符串。

根据您的最后评论，存在不止一种方式。最好的方法是使用`search()`. 虽然它来自纯 Javascript，但您可以将它与存储在 jquery 变量中的字符串一起使用。

对`search()`自己：

此方法使用正则表达式对象，如下所示：

```
var myCsvfileString = "13,14,15,19";
var found = myCsvfileString.search(<place here your reg expression>);

if (found > -1) {alert("Something has been found);} 
```

有关正则表达式语法的概述，您应该查看 Internet 或此处。我绝对不是`req expr`. 以下[链接](http://www.trans4mind.com/personal_development/JavaScript/Regular%20Expressions%20Simple%20Usage.htm#mozTocId423927)为您提供了一些信息，尽管我认为存在更好的信息。

# php - iOS加载查询页面冻结

> ID：12894449
> 
> 赞同：0
> 
> 时间：2012-10-15T11:14:50.553
> 
> 标签：php, javascript, ios, css

我有一个客户端站点，其中包含两个特定的 CSS 和 JS 文件，一个用于桌面，一个用于 iOS 设备：

```
<?php if(strstr($_SERVER['HTTP_USER_AGENT'],'iPhone') || strstr($_SERVER['HTTP_USER_AGENT'],'iPod') || strstr($_SERVER['HTTP_USER_AGENT'],'iPad')) 
    {
        echo '<link rel="stylesheet" type="text/css" href="http://example.com/style.mobile.css" />
        <script type="text/javascript" href="http://example.com/js/scripts.mobile.js"></script>';
    }else{
        echo '<link rel="stylesheet" type="text/css" href="http://example.com/style.css" />
        <script type="text/javascript" href="http://example.com/js/scripts.js"></script>';
    } 
?> 
```

如果我加载任一 CSS/JS 集，该站点将正常运行。如果我添加此 IF 语句，该站点将挂起并且永远不会加载。

更令人费解的是，我正在使用完全相同的 IF 语句在同一页面上加载不同的元素，并且它可以正常工作。有什么关于在标题中使用它，还是与我不知道的 JS 一起使用？

或者，有没有更好、更防弹的方法来解决这个问题？

谢谢，

泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:06:24.347

Swapnesh 的建议确实奏效了。我真的很想知道为什么。

# php - 如何使用 PHP 二维码库生成 300dpi 二维码？

> ID：12894450
> 
> 赞同：0
> 
> 时间：2012-10-15T11:14:50.683
> 
> 标签：php, qr-code, dpi

如何使用[PHP 二维码库](http://phpqrcode.sourceforge.net/)生成 300dpi 二维码？它们的尺寸范围为 1-40，最大尺寸为 984px (72dpi)。我的客户希望我开发一个可以生成可打印版本的程序，该程序需要 300dpi 和每边至少 5 英寸。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:52:13.653

> They have size ranged from 1-40, with maximum size 984px (72dpi)

No, they do not specify the DPI. DPI is an *interpretation* of the picture which can be specified at will.

An image has a given amount of pixels and a DPI *suggestion*, the DPI is not an intrinsic property of the pixel based image.

If you want a 5 by 5 inches picture at 300dpi, you simply need to have a 1500 by 1500 pixel image.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:48:09.817

我在一家商业印刷公司工作，我可以向您保证，生成 300dpi 的 QR 码没有任何好处。

虽然 300dpi 是打印光栅图形的普遍推荐分辨率，但这是因为打印时每个点都非常小，以至于人眼几乎无法区分，因此（与抗锯齿一起）曲线中的小点将使曲线看起来平滑。

然而，由于二维码中没有曲线，它们可以简单地按比例放大。它们在 300dpi 下看起来与在 72dpi 下完全相同。

# c# - 无论如何要减少我的文本框通用代码

> ID：12894451
> 
> 赞同：0
> 
> 时间：2012-10-15T11:15:06.057
> 
> 标签：c#

我有一个表单，其中有很多文本框（在 tabControl 布局中）。我正在禁用所有文本框上的右键单击功能。通过给出以下代码：

```
 txtAmountChildPlans.ContextMenu = new ContextMenu();
        txtCityHome.ContextMenu = new ContextMenu();
        txtCityPersonal.ContextMenu = new ContextMenu();
        txtCityRetirement.ContextMenu = new ContextMenu();
        txtEmailCar.ContextMenu = new ContextMenu();
        txtEmailCarIns.ContextMenu = new ContextMenu();
        txtEmailHome.ContextMenu = new ContextMenu();
        txtEmailOp.ContextMenu = new ContextMenu();
        txtEmailPersonal.ContextMenu = new ContextMenu();
        txtEmailSenior.ContextMenu = new ContextMenu();
        txtEmailTwoIns.ContextMenu = new ContextMenu();
        txtFullNamePersonal.ContextMenu = new ContextMenu();
        txtManufacturerCar.ContextMenu = new ContextMenu();
        txtMobileCar.ContextMenu = new ContextMenu();
        txtMobileCarIns.ContextMenu = new ContextMenu();
        txtMobileHome.ContextMenu = new ContextMenu();
        txtMobileNoRetirement.ContextMenu = new ContextMenu();
        txtMobileOp.ContextMenu = new ContextMenu();
        txtMobilePersonal.ContextMenu = new ContextMenu();
        txtMobileSenior.ContextMenu = new ContextMenu();
        txtMobileTwoIns.ContextMenu = new ContextMenu();
        txtModelCar.ContextMenu = new ContextMenu();
        txtMonthlySalaryCar.ContextMenu = new ContextMenu();
        txtNameHome.ContextMenu = new ContextMenu();
        txtNameRetirement.ContextMenu = new ContextMenu();
        txtPensionRetirement.ContextMenu = new ContextMenu();
        txtRegCarIns.ContextMenu = new ContextMenu();
        txtRegTwoIns.ContextMenu = new ContextMenu(); 
```

编辑：

```
 foreach (var textbox in this.Controls.OfType<TextBox>())
        {
            textbox.ContextMenu = new ContextMenu();
        }
        foreach (var textbox in this.tabCarInsurance.Controls.OfType<TextBox>())
        {
            textbox.ContextMenu = new ContextMenu();
        }
        foreach (var textbox in this.tabHealth.Controls.OfType<TextBox>())
        {
            textbox.ContextMenu = new ContextMenu();
        }
        foreach (var textbox in this.tabHomeLoans.Controls.OfType<TextBox>())
        {
            textbox.ContextMenu = new ContextMenu();
        }
        foreach (var textbox in this.tabRetirement.Controls.OfType<TextBox>())
        {
            textbox.ContextMenu = new ContextMenu();
        } 
```

反正有没有用单一功能写这个。还是更少的代码？

这对我来说看起来不太好。在 c# 中是否有任何方法可以像在 css 中一样为所有文本框提供相同的属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T11:18:43.577

您可以枚举所有文本框并在循环中创建新的上下文菜单

```
foreach (TextBox textbox in AllTextBoxes(this))
{
    textbox.ContextMenu = new ContextMenu();
}

public IEnumerable<TextBox> AllTextBoxes(Control control)
{
    List<TextBox> result = new List<TextBox>();
    result.AddRange(control.Controls.OfType<TextBox>());
    foreach (var childControl in control.Controls.OfType<Control>())
    {
        result.AddRange(AllTextBoxes(childControl));
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T11:19:31.350

如果没有嵌套控件，您可以按照以下方式进行操作：

```
foreach(var textbox in Controls.OfType<TextBox>())
{   
    textbox.ContextMenu = new ContextMenu();
} 
```

如果必须处理嵌套控件，可以使用扩展方法

```
public static class ControlExtensions
{
    public static IEnumerable<T> AllControlsOfType<T>(this Control control) 
        where T : Control
    { 
         T found = control as T;
         if(found != null)
         {
             yield return found;
         } 

         foreach (var child in control.Controls.Cast<Control>())
         {
            foreach (var item in AllControls<T>(child))
            {
               yield return item;
            }
         }
    }
} 
```

此代码可以在您的表单中使用它

```
foreach(var textbox in this.AllControlsOfType<TextBox>())
{   
    textbox.ContextMenu = new ContextMenu();
} 
```

确保引用包含 Extension 方法的命名空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T11:18:21.410

您可以创建如下所示的方法。

```
private void AssignDataContext(params TextBox[] textboxes)
{
    foreach (var textbox in textboxes)
    {
        textbox.ContextMenu = new ContextMenu();
    }
} 
```

# c# - 使用 EF5 更新实体

> ID：12894452
> 
> 赞同：2
> 
> 时间：2012-10-15T11:15:19.937
> 
> 标签：c#, entity-framework

我刚刚开始了一个新项目，并且在 Entity Framework 上度过了愉快的时光，我在最新版本中进行了 Nuget。在我尝试更新实体之前，一切都很顺利。我有以下代码；

```
using (var c = new EFContext())
{
      Data.User u = new Data.User() { UserId = UserId };
      c.Users.Attach(u);
      u.FailedPasswordAttemptCount = newFailedPasswordAttemptCount;
      c.SaveChanges();
} 
```

这在 EF4 中运行良好。但是在 EF5 中，这会出现 DbEntityValidationException，因为我在用户表 (UserName) 中有一个不可为空的字段。

我可以通过使用空 UserName 创建我的 Data.User 对象并告诉 EF 哪些属性已被修改来解决这个问题，

```
using (var c = new EFContext())
{
      Data.User u = new Data.User() { UserId = UserId, UserName = "" };
      ...
      c.Entry(u).Property("FailedPasswordAttemptCount ").IsModified = true;
      ...
} 
```

但这似乎不是特别容易管理，因为更多的不可为空的字段被添加到这个表和许多其他表中。

[这个问题](https://stackoverflow.com/questions/12855502/attach-and-update-boolean-or-int-doesnt-always-work/12864001)指出，这`Attach`仅适用于派生自`EntityObject`. 所以我假设 EF5 对象不是由此派生的。

任何人都知道如何更新我的实体，而不必每次都指定所有不可为空的字符串字段。

感觉就像我错过了一些非常明显的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:21:44.077

如果这是现有用户，您可以这样做...

```
c.Users.First(user=>user.UserId == UserId).FailedPasswordAttemptCount =         newFailedPasswordAttemptCount;

c.SaveChanges(); 
```

顺便说一句，在 EF5 代码中，实体类不派生自任何东西，但仍然可以附加。

或者，您回到您的附加方式，但我认为您需要关闭此保存的验证，因为似乎 EF 只验证整个实体或什么都不验证

```
using (var c = new EFContext()) 
{       
    c.Configuration.ValidateOnSaveEnabled = false; 
    Data.User u = new Data.User() { UserId = UserId };       
    c.Users.Attach(u);       
    u.FailedPasswordAttemptCount = newFailedPasswordAttemptCount;       
    c.SaveChanges(); 
} 
```

# c++ - 如何删除#pragma 区域的 GCC 警告？

> ID：12894454
> 
> 赞同：12
> 
> 时间：2012-10-15T11:15:20.530
> 
> 标签：c++, c, visual-studio-2010, gcc

如何删除 GCC 警告`#pragma region`？我添加`pragma region`以轻松查看代码，但它会在`#pragma region`. 我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T11:20:32.570

gcc 有这个警告标志：

> **-Wunknown-pragmas** 当遇到 GCC 不理解的 #pragma 指令时发出警告。如果使用此命令行选项，甚至会针对系统头文件中的未知 pragma 发出警告。如果警告仅由 -Wall 命令行选项启用，则情况并非如此。

并且像往常一样，你可以否定它，这意味着未知的 pragma 不会被警告。也就是说，使用`-Wno-unknown-pragmas`.

请注意，`-Wno-unknown-pragmas`必须出现在任何打开此警告的命令行标志之后，例如`-Wall`- 这也会禁用所有未知 pragma 的警告，因此请谨慎使用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-15T11:19:44.000

不要在 GCC 上使用它？:)

目前我能想到的最简单的解决方案是使用预处理器条件：

```
#ifndef __GNUC__
#pragma region
#endif

// Stuff...

#ifndef __GNUC__
#pragma endregion
#endif 
```

不是很好看或可读性不好，但会使代码在 GCC 上编译而没有警告。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-09T10:11:46.053

它似乎是一个特定于 MSVC 的编译指示，所以你应该使用

```
#ifdef _MSC_VER
#pragma region
#endif

<code here>

#ifdef _MSC_VER
#pragma endregion
#endif 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-03-20T16:33:04.423

```
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wunknown-pragmas"
... Code using Unknown pragmas ...
#pragma GCC diagnostic pop 
```

# castle-windsor - 温莎城堡按类别属性解决

> ID：12894455
> 
> 赞同：1
> 
> 时间：2012-10-15T11:15:26.567
> 
> 标签：castle-windsor, provider

我正在设计一个系统，该系统能够基于特定（基于字符串）MessageType 处理基于类型和基于 xml 的消息。理想情况下，为了处理这些消息，我想使用一系列提供者，例如：

```
[MessageType("CreateWorkOrder")]
public class CreateWorkOrderMessageProcessingProvider: IMessageProcessingProvider
{
    ... 
```

然后在 Windsor 中按名称“CreateWorkOrder”解决。我想知道是否可以使用以下变体按名称注册（使用 MessageType 属性）：

```
container.Register(Classes.FromAssemblyContaining<IMessageProcessingProvider>().Where(t => Attribute.IsDefined(t, typeof(MessageTypeAttribute)))); 
```

还是我需要提供自定义解析器？如果有更好的模式可以在这里实现，我很高兴听到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:02:45.957

您可以使用该`Configure()`方法对 Windsor 构建的 ComponentModel 进行此类自定义。这是一个查找属性值并将其分配给名称的示例，但此代码中没有错误检查（并且假设该属性公开了一个`Name`属性）：

```
container.Register(
    Classes.FromAssemblyContaining<IMessageProcessingProvider>()
        .Where(t => Attribute.IsDefined(t, typeof (MessageTypeAttribute)))
        .Configure(c =>
                    {
                        var name =
                            ((MessageTypeAttribute)
                             c.Implementation.GetCustomAttributes(typeof (MessageTypeAttribute), false)[0]).Name;
                        c.Named(name);
                    })); 
```

# wordpress - 如何在 WP 的编辑帖子页面中添加“全选”？

> ID：12894458
> 
> 赞同：1
> 
> 时间：2012-10-15T11:15:43.100
> 
> 标签：wordpress

我想在 Wordpress 管理员的编辑帖子页面上添加一个复选框，然后单击该复选框应该选择所有类别

我怎样才能做到这一点？

图片说明如下...

![在此处输入图像描述](../Images/fc13063f5ab1ca75ee8953f59d6bf241.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:59:51.830

我试图想出一种方法来帮助您，并提出了以下解决方案。我基本上做的是制作一个额外的脚本并将这个脚本放入后端。

创建一个名为 be-scripts.js 的文件并将其放在“theme_folder/js/”中。将以下代码放入其中：

```
(function($) {

  // Select all categories
  $('#categorychecklist').prepend('<li class="popular-category" id="category-all"><label class="selectit"><input type="checkbox" class="checkall" id="in-category-all" name="post_category[]"> Check all</label></li>');

  $('.checkall').click(function () {
    $(this).parents('ul:eq(0)').find(':checkbox').attr('checked', this.checked);
  });

})(jQuery); 
```

接下来，您需要将此脚本排入您网站的后端。你可以通过进入你的主题文件夹并打开functions.php来做到这一点。向其中添加以下代码：

```
function init_be_javascripts() {
    if (is_admin()) {
        wp_register_script('extra_be-script', get_template_directory_uri() . '/js/be-scripts.js', 'jquery', 0.1, true );
        wp_enqueue_script('extra_be-script');
    }
}    
add_action('init', 'init_be_javascripts'); 
```

如果一切顺利，您可以在编辑帖子时选择“全部选中”。

# javascript - javascript检测访客信息

> ID：12894460
> 
> 赞同：0
> 
> 时间：2012-10-15T11:15:54.040
> 
> 标签：javascript

我使用 javascript 来检测访问者信息，例如基于微秒生成访问者 ID、获取屏幕大小、操作系统版本和浏览器版本。

当我测试它时它工作。但是，当页面上线时，有时无法获取这些信息。这个问题表现为关于这些信息的字段是空的，意思是“”。但我已将字段设置为非 NULL 并且默认值未定义。

我在想访问者是否禁用了javascript，但这不可能发生，因为我使用ajax发送请求，所以javascript必须启用，否则不会记录在数据库中。

那么，什么因素会出现这个问题呢？

因为代码太长，所以我可以在这里发布get id函数

```
function Initvisiter_id(){
    var visiter_id;
        //alert(sessionStorage.getItem('visiter_id'));
    var date=new Date();
    visiter_id = date.getTime() + Math.floor(Math.random()*1000001);    
    return visiter_id;
} 
```

用于从 url 获取请求的服务器端脚本

```
//get parameters from url
    $parameters = $_GET['parameters'];
    $parameters = str_replace('\\','',$parameters);
    $m = json_decode($parameters); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:35:35.633

javascript 在客户端上执行。客户可以给你或不给你它想要的任何信息。

另外，我可以像这样访问您的网址：[http ://bla.com/url?parameters=](http://bla.com/url?parameters=)

这不是 ajax 请求，但它是我在没有 javascript 的情况下遵循的 URL。例如，搜索引擎蜘蛛可能会使用这种方式来跟踪您的请求。

依靠客户端信息来生成您的 ID 是不可能的。**永远不要相信客户。**

[因为我刚刚看到这个链接，所以在这种情况下可能值得分享：http: [//minimaxir.com/2012/10/client-side-validation-is-hard-mode/](http://minimaxir.com/2012/10/client-side-validation-is-hard-mode/)]

# javascript - 多个时区 - 时钟

> ID：12894463
> 
> 赞同：0
> 
> 时间：2012-10-15T11:15:58.157
> 
> 标签：javascript, time, offset, clock, digital

> **可能重复：**
> [不同时区的时钟](https://stackoverflow.com/questions/10883441/clock-in-different-time-zones)

我一直在*到处*寻找，似乎无法找到一个简单的解决方案。

我希望以**24 小时模式显示****多个时区**，例如纽约、里约、伦敦等。

 **[有点像这张图片：](https://i.stack.imgur.com/A7Nxh.png)

我知道这可以用好的旧 javascript 完成，但不知道从哪里开始。我很可能会显示超过 3 个时区，所以很容易更改和自定义的东西就是炸弹。

请帮助并提前感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:03:09.003

创建一个日期实例。用于根据本地时区偏移量（可使用）与您希望的任何其他时区的偏移[`setMinutes`](http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.32)量之间的差异来设置时间。[`getTimezoneOffset`](http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.26)

我建议使用分钟，因为它以分钟的形式返回时区偏移量，以添加到当前时间以获取 UTC。因此，要获得 UTC-04:00（纽约）某个地方的时间：

```
var d = new Date();
var offset = d.getTimezoneOffset();
var targetOffset = -4*60;
d.setMinutes(d.getMinutes() + offset + targetOffset); 
```

请注意，这只是设置时间，以便 , 等方法`getHours`返回`getMinutes`调整后的值，日期对象仍然具有本地时区偏移量，并且可能在夏令时边界上出现错误。**

# javascript - 在 Internet Explorer 中播放 HTML 音频？

> ID：12894468
> 
> 赞同：3
> 
> 时间：2012-10-15T11:16:08.547
> 
> 标签：javascript, jquery, html, internet-explorer, audio

我有这个 html 和 js 用来播放一些音频：

HTML

```
<div id="audio-clips">
    <audio src="/audio/cha-ching.wav" type="audio/wav" id="audio-cha-ching">
</div> 
```

JavaScript

```
var sfx = $("#audio-clips #audio-cha-ching")[0];
sfx.play(); 
```

这在 IE 8 中失败，因为它无法识别“播放”方法。是否有跨浏览器使用相同代码的 jQuery 音频播放方法？我宁愿这样做，然后尝试回退到一些特定于 IE 的解决方案（因为特定于浏览器的解决方案总是很脆弱）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-16T19:37:54.053

我强烈建议使用 howler.js 来播放音频文件。它在浏览器和设备之间具有很好的兼容性。它在可用时使用 HTML5 音频，并在必要时回退到旧技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:26:33.257

IE 上的 HTML5 支持始于 IE9 :(。

顺便说一句，我不确定 IE 是否播放 WAV（我不会这么说）： [http ://en.wikipedia.org/wiki/HTML5_Audio](http://en.wikipedia.org/wiki/HTML5_Audio)

[HTML 和旧版浏览器的后备解决方案](https://stackoverflow.com/questions/11712363/fallback-solution-for-html-audio-and-legacy-browsers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T11:30:20.147

该`audio`标记在 Internet Explorer 9 及更高版本中可用。您可以使用[Can I Use-Audio](http://caniuse.com/#feat=audio)进行检查。

`wav`音频标签上的 Firefox 3.6+、Safari 5+、Opera 10.5+ 和 Internet Explorer 9+ 支持该格式。`MP3`除了源之外，您还需要添加一个源`wav`以获得 Chrome 支持。

要获得向后兼容的支持，请使用以下 - 为简洁起见省略了 Flash 元素。

```
<audio controls preload="auto" autobuffer> 
  <source src="sound.mp3" />
  <source src="sound.ogg" />
  <source src="sound.wav" />
  <!-- now include flash fall back -->
</audio> 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-01-20T14:57:52.397

将您的音频编码为 mp4 格式，而不是 wav。这在 IE 11 中适用于我。

# ruby-on-rails - 如何在 Ruby on Rails 命令行中列出所有 REST URL

> ID：12894472
> 
> 赞同：4
> 
> 时间：2012-10-15T11:16:14.983
> 
> 标签：ruby-on-rails, rest

我想获取 Rails 项目之一中所有 REST URL 的列表。我认为有一个命令可以获取它们。我是 Rails 新手，所以到目前为止还没有运气。

谢谢史密斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T11:20:30.977

`rake routes`应该做的伎俩。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T11:22:36.340

*   打开命令提示符

*   导航到项目文件夹

*   跑`rake routes`

# debugging - 无法使用 Visual Studio 2012 构建

> ID：12894473
> 
> 赞同：0
> 
> 时间：2012-10-15T11:16:24.513
> 
> 标签：debugging, build, microsoft-metro

我无法在 Visual Studio 2012 中构建和运行该项目。我在另一台 Windows 8 PC 上运行相同的项目。它工作得很好。在它变成那样的前一小时，有人问我“你的电脑需要重新启动。你想重新启动吗”。我说是”。重新启动我的电脑后，所有项目都无法运行和构建。拜托，有人告诉我，我该怎么办？

# excel - 如何在excel中仅基于周末（周六和周日）计算列中的值？

> ID：12894476
> 
> 赞同：3
> 
> 时间：2012-10-15T11:16:30.757
> 
> 标签：excel, excel-2007, spreadsheet, excel-formula

我有一列“日”（C6：C37）显示当月的某天，还有一列“每日总计”（F6：F37）显示每天的总支出。我只想计算周末的总支出。

当星期六或星期日在“day”列中时，如何计算“dailytotal”中的值的总和。我怎样才能`SUMIF`在这里满足我的要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:53:58.533

您可以使用 WEEKDAY 函数来确定日期是哪一天。但是，无法直接将其与 SUMIF 公式一起使用。或者，您可以使用 SUMPRODUCT 公式：

```
=SUMPRODUCT(--(WEEKDAY(C6:C37,2)>5), F6:F37) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:15:59.330

如果您必须使用 sumif （尽管迈克尔的解决方案效果很好）。这是你可以做的。

添加一个列（我将称为“weekday_range”），它采用`=weekday(date, 2)`（并填写列）

那么你可以使用

```
=sumif(weekday_range, ">5", daily_total_range) 
```

然后，您可以根据需要隐藏 weekday_range 所在的列

# java - 更改父窗口中的url后如何在父窗口中运行子窗口java脚本函数？

> ID：12894480
> 
> 赞同：0
> 
> 时间：2012-10-15T11:17:09.857
> 
> 标签：java, php, javascript

我想在父窗口上执行子窗口的 java 脚本函数，即使更改了父窗口中的 URL。我尝试如下：

```
**Parent.html:**

<html>
  <head>
    <title>Parent window document</title>
  </head>
  <body>
  <script type="text/Javascript">
    function openChildWindow()
    {
      var s_url     = "child.html";
      var s_name    = "ChildWindowDocument";
      var s_specs   = "resizable=yes,scrollbars=yes,toolbar=0,status=0";
      var childWnd  = window.open(s_url, s_name, s_specs);
      var div       = childWnd.document.getElementById("child_wnd_doc_div_id");
      div.innerHTML = "Hello from parent wnd dddsfds";
    }
  </script>
  <input type="button" value="Open child window document" name="sss" onclick="openChildWindow()" />
    <div>Click me: nothing will happen.</div>
    <div id="aaa" class="yourclass">
        <p>This is a paragraph with a <span>span</span> where the paragraph's container has the class. Click the span or the paragraph and see what happens.</p>
        This sentence is directly in the div with the class rather than in child element.
    </div>
    <div>Nothing for this div.</div>
    <a>dsfsd</a>
  </body>
</html>

**child.html:**

<html>
  <head>
    <title>Parent window document</title>
    <script>
    opener.document.body.onclick = function(e) {
    var sender = (e && e.target) || (window.parent.event && window.parent.event.srcElement);
    document.getElementById("id").value=sender.tagName;
    }
    </script>
  </head>
  <body>
    <div id="child_wnd_doc_div_id">child window</div>
    ID: <input type="text" id="id"/><br/>
    Name: <input type="text" id="id"/><br/>
    Xpath: <input type="text" id="id"/><br/>
    CSS: <input type="text" id="id"/><br/>
  </body>
</html> 
```

显然，我的概念是：我想在改变父窗口中的url后执行子窗口功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:53:55.130

我看到的唯一方式：

观察开瓶器的卸载事件。当它触发时，尝试（在短暂超时后）重新分配 onclick 功能（以及 onunlad 功能）。

当然，这只有在两个文档都放在同一个域下时才有效。

# javascript - 悬停时不透明度的动画变化在 Internet Explorer 中不起作用

> ID：12894485
> 
> 赞同：0
> 
> 时间：2012-10-15T11:17:25.203
> 
> 标签：javascript, jquery, hover, jquery-animate, opacity

我想简单地在滑块内缓慢更改每个项目的不透明度，除了我悬停的项目。它在 chrome 中完美运行，但在 Internet Explorer 8 和 7 中都无法运行。

这是html代码：

```
 <div id="carousel-image-and-text" class="touchcarousel carousel-image-and-text clearfix" style="overflow: visible; ">
            <div class="touchcarousel-wrapper grab-cursor">
                <ul id="weekly-promos" class="touchcarousel-container" style="width: 1420px; left: 0px; ">
                    <asp:Repeater ID="RList" runat="server">
                        <ItemTemplate>
                            <li class="touchcarousel-item">
                                <a class="item-block" href="Article.aspx?PageID=<%# Eval("PageID") %>" rel="tooltip-<%# Eval("PageID") %>">
                                <figure><img src="<%# SetConf(Eval("PageID").ToString(),false) %><%# Eval("VisualSource") %>"></figure>
                                </a>
                            </li>
                        </ItemTemplate>
                    </asp:Repeater>
                </ul>
            </div> 
```

这是javascript部分：

```
 $(".carousel-slider a img").hover(function () {
            $(".carousel-slider img").not(this).stop().animate({ opacity: '0.4', filter: 'alpha(opacity=40)' }, 1000);

        }, function () {
            $(".carousel-slider img").not(this).stop().animate({ opacity: '1.0', filter: 'alpha(opacity=100)' }, 1000);
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:49:26.513

不要使用过滤器，只使用不透明度：

```
$(".carousel-slider a img").hover(function () {
  $(".carousel-slider img").not(this).stop().animate({ opacity: 0.4 }, 500);
}, function () {
  $(".carousel-slider img").not(this).stop().animate({ opacity: 1.0 }, 500);
}); 
```

# java - 访问类属性我的名字

> ID：12894486
> 
> 赞同：2
> 
> 时间：2012-10-15T11:17:29.577
> 
> 标签：java, reflection

我可以`Class`通过名称访问属性吗？

例如：

```
class Test {
    Integer GoodVar;
    Integer BadVar;
    ...

    void Func(String name, Integer value) {
        // Set A Value based on its name
    }

    void Init() {
        Func("GoodVar", 2);
        Func("BadVar", 1);
    }
} 
```

有人可以编码`Func`功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:23:20.117

您可以使用 switch 语句，在 JDK 7 中允许使用字符串（请参阅：[http](http://docs.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html) ://docs.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html ）。就像是：

```
switch (name) {
     case "GoodVar":
         GoodVar = value;
         break;
     case "BadVar":
         BadVar = value;
         break;
     default:
         throw new IllegalArgumentException("Invalid name: " + name);
 } 
```

在 JDK 7 之前，您可以改用 if 语句。另一种方法是使用反射（参见：[http](http://docs.oracle.com/javase/tutorial/reflect/index.html) ://docs.oracle.com/javase/tutorial/reflect/index.html ），但速度很慢，例如：

```
Field f = getClass().getField(name);
if (f!=null){
 f.setAccessible(true);
 f.setInt(this, value);
}else
  throw new IllegalArgumentException("Invalid name: " + name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:28:02.187

您正在寻找的东西称为反射。您可以执行以下操作：

```
void Func(String name, Integer value) {
    Field f = getClass().getField(name);
    f.setAccessible(true); // needed because f is not public
    f.setInt(this, value)
} 
```

但是我可以添加一些评论吗？

1.  按照惯例，字段、变量和方法必须以小写字母开头。
2.  字段必须是私有的。当它们可以被保护或包保护时，有几个特殊情况。这不是你的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:27:22.757

试试这个：

```
void Func(String name, Integer value) {
    // Set A Value based on its name
    Field f = getClass().getDeclaredField(name);
    f.setAccessible(true);
    f.set(this, value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:37:30.453

也试试这个：

```
package SO;

import java.lang.reflect.Field;

class Test {
    Integer GoodVar;
    Integer BadVar;

    void Func(String name, Integer value) throws IllegalArgumentException, IllegalAccessException {
    Field[] fields = this.getClass().getDeclaredFields();
    for (Field field : fields) {
        field.setAccessible(true);
        if (name.equals(field.getName())) {
        field.set(this, value);
        }
    }
    }
   // or a optimul way:
 void Func1(String name, Integer value) throws IllegalArgumentException, IllegalAccessException, SecurityException,
        NoSuchFieldException {
    Field field = this.getClass().getDeclaredField(name);
    field.setAccessible(true);
    field.set(this, value);
    }
    void Init() throws IllegalArgumentException, IllegalAccessException {
    Func("GoodVar", 2);
    Func("BadVar", 1);
    }

    @Override
    public String toString() {
    return "[GoodVar->" + GoodVar + ",BadVar-> " + BadVar + "]";
    }
} 
```

使用示例 Main 方法：

```
package SO;

public class TestTest {
    public static void main(String[] args) throws IllegalArgumentException, IllegalAccessException {
    Test test = new Test();
    System.out.println(test);
    test.Func("GoodVar", 1);
    test.Func("BadVar", 2);
    System.out.println(test);
    }
} 
```

它打印：

```
[GoodVar->null,BadVar-> null]
[GoodVar->1,BadVar-> 2] 
```

# validation - JSF 2.0 显示多个验证器的所有验证消息

> ID：12894487
> 
> 赞同：1
> 
> 时间：2012-10-15T11:17:32.813
> 
> 标签：validation, jsf

我有一个`h:inputText`包含多个验证器的元素，例如：

```
<h:inputText id="myId" value="#{some.value}">
    <f:validator validatorId="validatorOne/>
    <f:validator validatorId="validatorTwo/>
</h:inputText>
<h:message for="myId"/> 
```

现在，如果我实现我的验证器来抛出 a `ValidatorException`，第二个验证器将不会运行，即使它也会失败。

但我希望两个验证器都运行并显示两个错误消息，以防两个验证都失败。

我已经尝试过不要这样扔`ValidatorException`：

```
 facesContext.addMessage(uiComponent.getClientId(), facesMessage);
    ((UIInput)uiComponent).setValid(false); 
```

但是`h:message`不会显示两条错误消息，尽管如果我使用`h:messages`.

如何显示所有验证错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:17:38.220

这就是指定 JSF 验证器的工作方式。验证器按照它们在组件上声明的顺序被触发，如果其中一个失败，那么剩余的将不会被触发。

如果`<h:messages>`由于某些不清楚的原因真的不能使用 using （也许您不知道它的`for`属性以相同的方式工作？），那么您最好的选择是创建另一个验证器，该验证器依次委托给两个验证器并合并捕获的验证器例外合二为一。

# javascript - 如何指定另一个对象的句柄？

> ID：12894491
> 
> 赞同：0
> 
> 时间：2012-10-15T11:17:39.243
> 
> 标签：javascript, jquery-ui, jquery-ui-draggable

我想用一个句柄拖动一堆对象，并且只有一个对象包含该句柄。对象具有相同的父对象，但似乎句柄只能拖动自身的直接父对象，而不能拖动“叔叔”。

这是示例[http://jsfiddle.net/Z5yeW/43/](http://jsfiddle.net/Z5yeW/43/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:33:18.073

我不确定这正是你想要的，但这里有一些东西要检查：http: [//jsfiddle.net/Z5yeW/44/](http://jsfiddle.net/Z5yeW/44/)

编辑：反向版本：http: [//jsfiddle.net/Z5yeW/46/](http://jsfiddle.net/Z5yeW/46/)

# ruby-on-rails - rails 布尔值在创建时重置

> ID：12894494
> 
> 赞同：0
> 
> 时间：2012-10-15T11:17:51.267
> 
> 标签：ruby-on-rails, oncreate

我的模型中有一个名为 isTransfer 的字段：

```
class AddTxfrColumnsToTransaction < ActiveRecord::Migration
  def change
    add_column :transactions, :isTransfer, :boolean
    add_column :transactions, :transferAccount_id, :integer
  end
 end 
```

我创建了一个控制器，它应该像 action::new 一样，但仅用于传输调用 new_transfer：

```
def new_transfer
  account = Account.find(params[:account_id])
  @transaction = account.transactions.build
  @transaction.description = "Transfer"
  @transaction.isTransfer = true
  @transaction.amount = 100

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @transaction }
  end
end 
```

当我在我的视图表单中看到新的转移时，在发布之前，我可以看到 isTransfer 设置为 true。但是当我发布时，它总是以错误的形式进入数据库。其他字段（描述和金额）没有改变 - 它们按预期进入。

这是模型：

```
class Transaction < ActiveRecord::Base
  attr_accessible :account_id, :amount, :check, :date, :description, :is_cleared, :note, :category, :isTransfer, :transferAccount_id
  validates_presence_of :amount, :date

  belongs_to :account, class_name: 'Account'
  belongs_to :transferAccount, class_name: 'Account'

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:55:07.840

Ok, this is probably a complete noob mistake. I had originally believed that if I set a value in the controller (as part of new_transfer action) that it would persist to the create action after submit. My mistake was that in not referencing it at all on the new_transfer form, it was never passed back to the Create action as a param. By adding the following to my new_transfer form, isTransfer now updates in the create action:

```
<%= f.hidden_field(:isTransfer) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:20:48.560

我建议您在创建控制器方法中进行预设，而不是新建

此外，您可以添加一个“！” 使 save 方法从控制台返回任何错误：例如

```
def create
    ###do your preset methods here
    if(@transaction.save!)

    end
end 
```

# jquery - 使用 jquery mobile 无法适应移动屏幕

> ID：12894497
> 
> 赞同：0
> 
> 时间：2012-10-15T11:17:56.700
> 
> 标签：jquery, html, jquery-mobile

我正在使用 jquery 和 jquery mobile 实现登录页面。

登录.html

```
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Application</title>  
<link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.1.1.css" />
<link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.1.1.css" />
<link rel="stylesheet" type="text/css" href="css/jquery.mobile.theme-1.1.1.css" />

<script type="text/javascript" src='js/jquery-1.8.2.js'></script>        
<script type="text/javascript" src="js/jquery.mobile-1.1.1.js"></script>
<script type="text/javascript" src="js/login.js"></script>

</head>
<body>  
    <div data-role="page" id="home">

        <div data-role="header" data-theme="b">               
            <h1>Developers Code</h1>
        </div>

        <div data-role="content" id="contentConfirmation" name="contentConfirmation" align="center">
            <h1>Login Page</h1>
            <h2></h2>

            <form id="HLogin" method="POST">
                <div data-role="fieldcontain">
                    <label for="url">Username:*</label>  
                    <input class="required" id="Lusername" name="uid_r" value="" type="text">            
                </div>

                <div data-role="fieldcontain">
                    <label for="url">Password:*</label>  
                    <input id="Lpassword" name="pwd_r" value="" type="password">            
                </div>

                <div class="ui-grid-a">
                    <div class="ui-body ui-body-b">
                        <div class="ui-block-a">
                            <button data-icon="delete" data-theme="c" type="submit">cancel</button>  
                        </div>
                        <div class="ui-block-b">
                            <button data-theme="b" type="submit">Login</button>  
                        </div>
                    </div>
                </div>
            </form>

        </div>
    </div>  

</body>
</html> 
```

此页面不适合屏幕。我想把所有内容都放在屏幕上。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:29:01.257

您应该在`<head>`标签中添加以下内容：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

希望这可以帮助。让我知道这个是否奏效。

# php - 在 swiftmailer 中指定时间后保持连接处于活动状态

> ID：12894498
> 
> 赞同：1
> 
> 时间：2012-10-15T11:17:57.717
> 
> 标签：php, swiftmailer

我`SwiftMailer`用来发送批量电子邮件。由于我的托管服务器是共享服务器，因此它们确实有发送限制`25 emails in 5 min`，之后我必须手动发送其余的电子邮件。

为了解决这个问题，我遇到了两个插件

[1\. 防洪](http://swiftmailer.org/docs/plugins.html)

[2\. 节流器](http://swiftmailer.org/docs/plugins.html)

但我不知道哪个最适合

```
$mailer->registerPlugin(new Swift_Plugins_AntiFloodPlugin(25,300)); 
```

或者

```
$mailer->registerPlugin(new Swift_Plugins_ThrottlerPlugin(
  5, Swift_Plugins_ThrottlerPlugin::MESSAGES_PER_MINUTE
)); 
```

谁能帮助我更清楚地在这里使用哪个好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:44:36.743

两者都可以正常工作，但无需保持连接处于活动状态。

只需创建一个每 5 分钟运行一次脚本并发送电子邮件的 cron 作业。

# sugarcrm - 共享主机上的模块加载器上的 SugarCRM 错误

> ID：12894500
> 
> 赞同：1
> 
> 时间：2012-10-15T11:18:03.937
> 
> 标签：sugarcrm, suhosin

我有一个共享主机帐户并安装了 SugarCRM。一切都很好，除了我收到的模块加载器的消息。在这里，我收到将 suhosin.executor.include.whitelist = “upload://” 添加到 php.ini 文件的消息。

消息是：

> 上传流被 Suhosin 阻止，请在 suhosin.executor.include.whitelist 中添加“上传”（有关更多信息，请参见 sugarcrm.log）

因为我有一个共享主机帐户，所以我无权访问我的 etc 地图，因此也无权访问我的 php.ini 文件。

我想为此使用 .htaccess 文件，但不知道确切的代码。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:05:14.073

您可以尝试按照[http://forums.sugarcrm.com/f6/upload-stream-blocked-suhosin-82116/中的建议将此添加到您的 .htaccess 文件中](http://forums.sugarcrm.com/f6/upload-stream-blocked-suhosin-82116/)

```
<IfModule mod_php.c>  
    php_value suhosin.executor.include.whitelist upload://
</IfModule> 
```

在我的情况下，我使用的是 php-fpm，所以我修改了 /etc/php5/fpm/conf.d/suhosin.ini 中的 php.ini 定位器，并且我没有来自 SugarCRM 的更多警告

```
; configuration for php suhosin module
extension=suhosin.so
suhosin.executor.include.whitelist="phar"
suhosin.executor.include.whitelist="upload" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T09:04:17.250

Carlos Quijano 发布的解决方案对我不起作用。我发现解决方案会有所不同，具体取决于 PHP 作为模块、CGI 还是 FASTCGI 运行。

这是我找到的关于可用于为您的域（甚至子域）使用自定义 php.ini 文件的不同方法[的文档](http://www.askapache.com/php/custom-phpini-tips-and-tricks.html)

**首先，您应该检查哪一个是您的情况**。

为此，您可以使用 phpinfo 命令：

使用以下内容创建一个名为 phpinfo.php 的 php 文件：`<?php phpinfo(); ?>` 并将其上传到您的域根目录，然后访问 www.yourdomain.com/phpinfo.php，您会看到一个表格，在“服务器 API”旁边您会看到哪个PHP 的运行方式。

**对我来说**，它是“CGI/FastCGI”，所以我必须获取全局 php.ini 的副本，我不知道如何获取它，因为它无法通过 FTP 访问。我[在 Drupal 论坛中找到了解决方案](https://www.drupal.org/node/290592)：

创建一个 php 文件，您可以使用以下内容调用 gettheini.php：

```
<?php system("cp /usr/local/php5/lib/php.ini /home/YOURCPANELUSERNAME/php.ini"); ?> 
```

**第一个路径必须是之前获取的表格中“配置文件（php.ini）路径”旁边的路径（phpinfo.php），最后是php.ini。第二个路径是您要将其复制到的路径。*

将其上传到您的域根目录，然后访问 www.yourdomain.com/gettheini.php。此命令将复制全局 php.ini 文件到您指定的路径。然后您可以编辑该文件添加

```
; configuration for php suhosin module
extension=suhosin.so
suhosin.executor.include.whitelist="phar"
suhosin.executor.include.whitelist="upload" 
```

保存并上传。

由于我的托管服务已经对 php.ini 进行了一些安排，当我再次检查 phpinfo 页面时，新文件已经在工作（检查“加载的配置文件”旁边）。

**不要忘记保护新文件**，添加

```
<Files php.ini>
order allow,deny
deny from all
</Files> 
```

到 yout .htaccess 文件的末尾（在您的域或子域的同一根文件夹中）

我希望我的经验可以帮助你解决你的问题，或者至少给你一些指导。

# r - 只编译 src 文件夹中的一些 C 文件

> ID：12894502
> 
> 赞同：1
> 
> 时间：2012-10-15T11:18:11.020
> 
> 标签：r, makefile

有没有办法只编译 src 文件夹中的一些 *.c（或 *.cpp）文件而不是全部？也许可以通过某种方式修改 Makevars ？

一点背景知识：我犯了一个错误，将一些文件提交到 git master 分支，我更容易避免它们的编译，而不是全部重命名或删除分支。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:37:51.517

这确实是一个 Makefile（语言）问题，您可以通过`Makevars`具有适当设置的文件来解决。

但请注意：

1.  R*真的*更喜欢默认设置及其隐含的 Makefile。您可以使用 Makevars 来设置诸如编译器/链接器选项之类的设置，*正确*地在文件之间建立依赖关系要困难得多。很少有软件包能做到这一点。您更有可能在 Windows 上破坏双架构构建，例如 OS X 和（通过 Makevars.win）。

2.  没有理由让回购处于悲伤状态。只需清理你的 git repo，世界也会变得更美好。

# c# - Windows 窗体应用程序，线程不会停止

> ID：12894503
> 
> 赞同：0
> 
> 时间：2012-10-15T11:18:16.277
> 
> 标签：c#, winforms, multithreading, abort

我正在为我的线程演示使用 Windows 窗体应用程序。当我点击 button1 时，它将启动线程并递归地做一项工作。

在这里，表格不会像我预期的那样挂起。我想在单击 Button2 时停止当前正在运行的线程。但是，这行不通。

```
 private void button1_Click(object sender, EventArgs e)
        {
            t = new Thread(doWork);          // Kick off a new thread
            t.Start();               
        }

        private  void button2_Click(object sender, EventArgs e)
        {                
            t.Abort();
        }    

        static void doWork()
        {    
            while (true)
            {
              //My work    
            }
        }
      } 
```

.当我调试时，button2_Click 方法不会命中指针。我想是因为线程一直很忙。

如果我在某个地方出错，请纠正我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T11:23:35.433

你不能像这样杀死线程。原因是为了避免在线程中添加锁然后在释放锁之前将其杀死的情况。

您可以创建全局变量并使用它来控制您的线程。

简单示例：

```
private volatile bool m_StopThread;

private void button1_Click(object sender, EventArgs e)
{
    t = new Thread(doWork);          // Kick off a new thread
    t.Start();               
}

private  void button2_Click(object sender, EventArgs e)
{                
    m_StopThread = true;
}    

static void doWork()
{    
    while (!m_StopThread)
    {
          //My work    
    }
} 
```

# opencv - 使用 OpenCV 将光栅图像转换为矢量图形？

> ID：12894507
> 
> 赞同：5
> 
> 时间：2012-10-15T11:18:29.817
> 
> 标签：opencv, vectorization, noise-reduction, error-suppression

我正在寻找一种使用 OpenCV 将光栅图像转换为矢量数据的可能性。在那里我发现了一个`cv::findContours()`似乎有点原始的函数（更可能我没有完全理解它）：

它似乎只使用黑白图像（没有灰度和彩色图像），并且似乎不接受任何可能有助于噪声图像的过滤/错误抑制参数，以避免非常短的矢量线或避免不均匀的折线单一的，直线将是更好的结果。

所以我的问题是：OpenCV 是否有可能对彩色光栅图像进行矢量化，然后将颜色信息分配给生成的 polylinbes？以及如何将降噪和错误抑制应用于这样的算法？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:04:34.770

如果您想按颜色对图像进行光栅化，我建议您将图像聚类在某些颜色组（或量化它）上，然后提取每种颜色的轮廓并转换为所需的格式。OpenCV 中没有现成的矢量化方法。

# javascript - 使用 AJAX 和一个巨大的文本文件

> ID：12894511
> 
> 赞同：1
> 
> 时间：2012-10-15T11:18:42.253
> 
> 标签：javascript, ajax

我有一个巨大的文本文件，我将选择 5 aléatoir ligne 来读取内容并将其存储到一个数组中，但是当我测试我得到的响应时，`alert()`它并没有显示所有内容。

```
function loadWords(){
    var xhr = new XMLHttpRequest();
    xhr.open('GET', "dico/francais.txt");
    xhr.onreadystatechange = function(){
        if(xhr.readyState == xhr.DONE && xhr.status == 200){
            alert(xhr.responseText);
        }
    }
    xhr.send(null);
} 
```

还有其他更强大的方法来完成工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:21:22.533

不能将海量数据放入`alert();`

`alert`总是会在一定长度后将其剥离（有时当您的屏幕分辨率不足以显示全部等时）

您可以做的是将所有内容放入`textarea`HTML 中以便查看。

# jquery - 如何从 http://fancyapps.com/fancybox/ 获取fancybox 来处理动态图像来自数据库

> ID：12894514
> 
> 赞同：-1
> 
> 时间：2012-10-15T11:18:55.463
> 
> 标签：jquery, fancybox

我正在使用来自[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)的 fancybox 控件。当我使用静态图像时，它可以正常工作，但是当我使用 http 处理程序将源绑定到来自数据库的动态图像时。它不起作用并在新页面中打开图像。

我的 html 绑定表达式：

```
<a class="fancybox" rel="gallery1" runat="server" href='<%# "Handler3.ashx?ID="+ Eval("ID") %>' title="Test">
<img src='<%# "Handler3.ashx?ID="+ Eval("ID") %>' runat="server" alt="Test" Height="500" Width="400" />
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:40:10.967

这是因为当您使用静态图像时，fancybox 可以识别`type`内容（由于图像扩展名），但是当您使用数据库中的动态图像时，呈现的链接可能看起来像

```
<a href="Handler3.ashx?ID=7049" class="fancybox" rel="gallery1" title="Test">..... 
```

...所以 fancybox 无法知道内容是`image`......所以你必须在你的自定义脚本中告诉它：

```
$(document).ready(function() {
  $(".fancybox").fancybox({"type": "image"});
}); 
```

# java - 每次点击都会打开双倍的新帧

> ID：12894515
> 
> 赞同：1
> 
> 时间：2012-10-15T11:19:01.097
> 
> 标签：java, frames

对我编写的一些代码有一点问题来尝试一些东西。我做了一个框架，里面有一个按钮。当我单击此按钮时，会打开一个新框架，它应该。我关闭了新框架，然后再次单击该按钮，尝试查看它是否仍然有效。问题从这里开始，打开一个新框架，它打开了两个新框架。第三次单击它会打开 4 帧，依此类推。我已经尝试了很多东西，但遗憾的是似乎找不到它打开更多帧的原因。请帮忙。

```
package budget;

import java.awt.event.*;
import javax.swing.*;

public class GUI extends JFrame {

    String labelPrefix;
    JButton button;
    JButton button2;
    JLabel label;

    public static void main(String[] args) {
        JFrame f = new GUI();
        f.setExtendedState(f.MAXIMIZED_BOTH);
        f.setVisible(true);
    }

    public GUI() {
        JPanel p = new JPanel();
        p.setLayout(new BoxLayout(p, BoxLayout.Y_AXIS));
        p.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));

        button = new JButton("Click Me");
        label = new JLabel(labelPrefix);
        p.add(button);
        this.setTitle("Try");
        getContentPane().add(p);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        button.addActionListener(new MyActionListener());
    }

    class MyActionListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            button.addActionListener(this);
            labelPrefix = "Try";
            JFrame f2 = new GUI(label, labelPrefix);
            f2.setExtendedState(f2.MAXIMIZED_BOTH);
            f2.setVisible(true);

        }
    }

    public GUI(JLabel label, String labelPrefix) {
        JPanel p2 = new JPanel();
        button2 = new JButton("Close");
        p2.add(label);
        p2.add(button2);
        this.setTitle("Try");
        getContentPane().add(p2);
        this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        pack();
        button2.addActionListener(new MyActionListener2());
    }

    class MyActionListener2 implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            button2.addActionListener(this);
            dispose();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:20:41.723

很明显，问题出在这里：

```
button.addActionListener(this); 
```

每次单击按钮时，它都会再次向按钮添加侦听器。

只需删除该行，错误就会消失。将侦听器添加到按钮后，它会一直留在那里。被触发后它不会被“消耗”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:24:09.193

`actionPerformed`检查其中状态的第一行`MyActionListener`：

```
button.addActionListener(this); 
```

该行应删除。

# firefox - 取消从工具栏小部件 onClick 处理程序打开面板

> ID：12894517
> 
> 赞同：0
> 
> 时间：2012-10-15T11:19:38.023
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我有一个 Firefox 扩展，它添加了一个带有面板的工具栏小部件，该面板应在单击小部件时显示。在某些情况下，单击工具栏小部件时面板不应显示。

我正在实例化工具栏和面板，如下所示：

```
var popup = panel.Panel({
  width: 310,
  height: 400,
  contentURL: self.data.url('panel.html'),
  contentScriptFile: self.data.url('panel.js'),
  // NOTE: You can't use the contentStyleFile option here.
});

var toolbarOptions = {
  id: 'someid',
  label: 'Some Label',
  contentURL: self.data.url('icon-16.png'),
  panel: popup
};

// There doesn't seem to be a way to remove the toolbar in PB mode.
var toolbar = widgets.Widget(toolbarOptions); 
```

如何从小部件单击处理程序取消面板打开？无论我在那里输入什么逻辑，它似乎总是打开。

```
toolbar.on('click', function() {
  if (dontShowPanel()){
    // I want to somehow cancel the panel opening at this point.
  } else {
    panel.show();
  }
}); 
```

我试图`return false;`从似乎不起作用的点击处理程序中进行操作。我也试过打电话`panel.hide()`。这似乎也不起作用。

我正在使用 1.10 版的附加 SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:43:08.587

在面板显示之前调用您的`click`事件处理程序，这意味着此时您仍然可以更改面板。但是，一些不明显的事情：更改`Widget`对象的面板不会立即产生任何效果，您需要为`WidgetView`对象（特定浏览器窗口中的小部件实例）更改它。该对象作为参数传递给`click`事件处理程序。因此，您的工具栏选项可能如下所示：

```
var toolbarOptions = {
  id: 'someid',
  label: 'Some Label',
  contentURL: self.data.url('icon-16.png'),
  onClick: function(view) {
    if (dontShowPanel()){
      view.panel = null;
    } else {
      view.panel = popup;
    }
  }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:25:20.947

创建小部件时，您需要将面板实例添加为属性：

```
var panel = require("panel").Panel({
  width: 250,
  height: 250,
  contentURL: data.url('panel.html')
});

require("widget").Widget({
    id: 'id',
    label: 'my-label',
    contentURL: data.url('http://www.mozilla.org/favicon.ico'),
    panel: panel
}); 
```

更新：对不起，我不明白整个问题。据我所知，没有办法有条件地阻止基于点击事件显示面板，以保留锚定。

# android - 使用安卓联系人

> ID：12894518
> 
> 赞同：2
> 
> 时间：2012-10-15T11:19:40.743
> 
> 标签：android, contacts

我需要从所有 Android 联系人中获取信息：

*   名
*   姓
*   手机
*   出生日期

如果联系人有两个或多个手机号码，则必须多次适合选择。

现在我`ContentResolver.Query()`用来获取所需的列，但需要不止一次的查询，而不是连接表。

如何从 Android 联系人中查询多个数据字段？

即我需要执行类似 SQL 查询的东西：

```
SELECT
    dName.Data2 as [firstName]
    , dName.Data3 as [lastName]
    , dPhone.Data1 as [cellPhone]
FROM
   raw_contacts
INNER JOIN data as dName on dName.RAW_CONTACT_ID = Contacts._ID and dName.MIME_TYPE =  ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE
INNER JOIN data as dPhone on dName.RAW_CONTACT_ID = Contacts._ID and dName.MIME_TYPE =  ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-15T08:23:40.170

您提到的所有字段最终都存储在[`ContactsContract.Data`](https://developer.android.com/reference/android/provider/ContactsContract.Data.html)表中，因此无需连接。您只需要查询 Data 表中的所有数据，同时选择您的特定 mimetypes（[电话](https://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Phone.html)和[事件](https://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Event.html)，即生日），完整的联系人姓名和联系人 ID，也为每个 mimetype 存储：

```
Map<Long, List<String>> contacts = new HashMap<Long, List<String>>();

String[] projection = {Data.CONTACT_ID, Data.DISPLAY_NAME, Data.MIMETYPE, Data.DATA1, Data.DATA2, Data.DATA3};
String selection = Data.MIMETYPE + " IN ('" + Phone.CONTENT_ITEM_TYPE + "', '" + Event.CONTENT_ITEM_TYPE + "')";
Cursor cur = cr.query(Data.CONTENT_URI, projection, selection, null, null);

while (cur != null && cur.moveToNext()) {
    long id = cur.getLong(0);
    String name = cur.getString(1); // full name
    String mime = cur.getString(2); // phone / birthday
    String data = cur.getString(3); // the actual info, e.g. +1-212-555-1234

    String kind = "unknown";

    switch (mime) {
        case Phone.CONTENT_ITEM_TYPE: 
            kind = "phone"; 
            break;
        case Email.CONTENT_ITEM_TYPE: 
            Event = "birthday";
            break;
    }
    Log.d(TAG, "got " + id + ", " + name + ", " + kind + " - " + data);

    // add info to existing list if this contact-id was already found, or create a new list in case it's new
    List<String> infos;
    if (contacts.containsKey(id)) {
        infos = contacts.get(id);
    } else {
        infos = new ArrayList<String>();
        infos.add("name = " + name);
        contacts.put(id, infos);
    }
    infos.add(kind + " = " + data);
} 
```

# jquery - Javascript 错误：未定义 jQuery

> ID：12894523
> 
> 赞同：1
> 
> 时间：2012-10-15T11:19:56.073
> 
> 标签：jquery, html

```
<html>
<head><title>test</title>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">
  </script>
  <!-- ERROR IS HERE the jquery is not being loaded -->

  <script type="text/javascript" src="js/jquery.prettyPhoto.js">
  </script>
  <link rel="stylesheet" href="css/prettyPhoto.css" type="text/css" 
      media="screen" charset="utf-8" />
</head>
<body>
  <a title="Despicable Me" rel="prettyPhoto[movies]" 
    href="http://trailers.apple.com/mymovie.mov?width=640&height=360">
    <img src="images/thumbnails/quicktime-logo.gif" alt="Despicable Me" 
    width="50" />
  </a>
  <a title="Despicable Me" rel="prettyPhoto[movies]" 
    href="ai.mov?width=640&height=360">
    <img src="images/thumbnails/quicktime-logo.gif" 
      alt="Despicable Me" width="50" />
  </a>
  <script type="text/javascript" charset="utf-8">
    $(document).ready(function(){
      $("a[rel^='prettyPhoto']").prettyPhoto();
    });
  </script>
</body>
</html> 
```

当我在 Firefox 中加载此 html 时，错误控制台返回错误：

```
jQuery is not defined. 
```

html 文件、js 文件和 css 文件都在同一个文件夹中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T11:23:23.320

我想你在本地运行这个。（**注：不是本地主机，是指你打开了本地的html文件**）

如果您在本地运行，则`//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js`意味着`file:///ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js`

所以你需要指定`http://`

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

但是，一旦您将页面上传到服务器，就可以使用 just `//`，这是最佳实践。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T11:21:15.530

抱歉最后一个答案是错误的

尝试从谷歌下载 jquery 并从本地服务器使用它

```
<script src="jquery.min.js"></script> 
```

和

如果所有文件都在同一目录下，那么当您`js/`在 jquery.prettyPhoto.js 前面附加时，`css/` 它们也应该像

```
<html>
<head>
<title>test</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.prettyPhoto.js"></script>
<link rel="stylesheet" href="prettyPhoto.css" type="text/css" media="screen"  charset="utf-8" />
</head>
<body>
<a title="Despicable Me" rel="prettyPhoto[movies]" href="http://trailers.apple.com/movies/universal/despicableme/despicableme-tlr1_r640s.mov?width=640&height=360"><img     src="quicktime-logo.gif" alt="Despicable Me" width="50" /></a>
<a title="Despicable Me" rel="prettyPhoto[movies]" href="ai.mov?width=640&height=360"><img src="quicktime-logo.gif" alt="Despicable Me" width="50" /> </a>

<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
  $("a[rel^='prettyPhoto']").prettyPhoto();
});
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:22:03.380

采用

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

从谷歌服务器获取 JQuery 文件

# java - JTextPane 中的自动换行

> ID：12894526
> 
> 赞同：3
> 
> 时间：2012-10-15T11:20:06.510
> 
> 标签：java, swing, jtextpane

使用 JTextPane 时出现自动换行问题。我认为这是我的 IDE（JCreator），但是当我使用其他人都在使用的源时，我遇到了几个错误。抱歉换行了...可能是我的 IDE 还是有人可以让我知道这样做的正确方法。TIA-罗兰

我使用的源代码可以在[http://java-sl.com/tip_html_letter_wrap.html找到](http://java-sl.com/tip_html_letter_wrap.html)

**大声笑..我忘了空间！谢谢大家。它将继续进行。我整晚都在编程，有点昏昏沉沉。祝你好运-罗兰**

```
> --------------------Configuration: inigui - JDK version <Default> - <Default>--------------------
> C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:283: error: ')' expected
>               gentextp.setEditorKit( newHTMLEditorKit(){ 
>                                                        ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:285: error: ';' expected
>            public ViewFactory getViewFactory(){ 
>                                             ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:330: error: illegal
> start of type
>         }); 
>          ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:337: error: <identifier> expected
>         panel.setLayout(new GridLayout(1, 1));
>                        ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:337: error: illegal
> start of type
>         panel.setLayout(new GridLayout(1, 1));
>                         ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:337: error: ')' expected
>         panel.setLayout(new GridLayout(1, 1));
>                            ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:337: error: ';' expected
>         panel.setLayout(new GridLayout(1, 1));
>                                       ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:337: error: illegal
> start of type
>         panel.setLayout(new GridLayout(1, 1));
>                                        ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:337: error: <identifier>
> expected
>         panel.setLayout(new GridLayout(1, 1));
>                                         ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:337: error: ';' expected
>         panel.setLayout(new GridLayout(1, 1));
>                                          ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:337: error: illegal
> start of type
>         panel.setLayout(new GridLayout(1, 1));
>                                            ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:337: error: <identifier>
> expected
>         panel.setLayout(new GridLayout(1, 1));
>                                             ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:339: error: illegal
> start of type
>         return panel;
>         ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:339: error: ';' expected
>         return panel;
>               ^ C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:341: error: class, interface, or enum expected }  ^ 15 errors 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:26:16.843

`new`您在关键字后缺少一个空格：

```
gentextp.setEditorKit( newHTMLEditorKit(){ 
```

应该

```
gentextp.setEditorKit( new HTMLEditorKit(){ 
```

看看两者之间的语法着色如何变化？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T11:26:29.443

链接的代码需要在 3 个地方使用空格字符来编译。

例如

```
final JEditorPane htmlTextPane = newJEditorPane(); 
```

应该：

```
final JEditorPane htmlTextPane = new JEditorPane(); 
```

查看编译器为其他人识别的行号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T11:27:03.317

我自己尝试了链接源，它工作正常（Eclipse）

但是，根据您在此处粘贴的错误消息，您显然没有使用（完全）使用此代码。

显然，您的编译器在以下几行存在问题：

C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:283 C:\ucdhb2\gaia\inigui\inigui2\src\inigui.java:285 ...

我建议修改括号、分号等的正确用法。

如果您仍有问题，请发布您的代码。

# jquery - 只计算后面的类名

> ID：12894527
> 
> 赞同：1
> 
> 时间：2012-10-15T11:20:10.073
> 
> 标签：jquery

我的页面中有这段代码：

```
 <div id="content_1" class="select_more">
        <div>Name: <input type="text" name="fullname"/></div>
        <div>Age: <input type="text" name="age"/></div>
        <div>Address: <input type="text" name="address"/></div>
    </div>

    <ul id="my_tabs">
        <a href="javascript:select_page('2_');">page 1</a>
        <a href="javascript:select_page('3_');">page 2</a>
        <a href="javascript:select_page('4_');">page 3</a>
    </ul>
    <div id="content_2" class="select_more">
        <h3>Page 1</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>
    </div>
    <div id="content_3" class="select_more">
        <h3>Page 2</h3>
        <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?</p>
    </div>
    <div id="content_4" class="select_more">
        <h3>Page 3</h3>
        <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat</p>
    </div> 
```

我的 jquery 中有这段代码：

```
 jQuery('.select_more').each(function() {
        pageId = this.id.replace('content_', '');
    }); 
```

我只需要在 . 在我的 foreach 中应该忽略之前的 select_more 类。目前，它会拾取页面中的所有 select_more 类。

我试过这样做，但这也没有用。它仍然计算页面中的所有 select_more。

```
 if( jQuery('ul#my_tabs').length )
    {
    jQuery('.select_more').each(function() {
        pageId = this.id.replace('content_', '');
    });
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:36:57.983

我相信最简单的选择是

> $("#my_tabs ~ .select_more")

请参阅 jQuery 选择器 [http://api.jquery.com/category/selectors/?rdfrom=http%3A%2F%2Fdocs.jquery.com%2Fmw%2Findex.php%3Ftitle%3DSelectors%26redirect%3Dno](http://api.jquery.com/category/selectors/?rdfrom=http%3A%2F%2Fdocs.jquery.com%2Fmw%2Findex.php%3Ftitle%3DSelectors%26redirect%3Dno)

这适用于jsbin

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:26:24.467

你可以试试这个：

```
jQuery('ul#my_tabs').nextAll('.select_more').each(function() {
    pageId = this.id.replace('content_', '');
}); 
```

这将选择`ul#pages`匹配`.select_more`选择器之后的所有兄弟元素。

[http://api.jquery.com/nextAll/](http://api.jquery.com/nextAll/)

**注意：**在您发布的 HTML 中，只有`<ul id="my_tabs">`没有`<ul id="pages">`所以确保使用正确`id`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T11:30:34.540

尝试这个，

```
$('ul#my_tabs').nextAll().filter(".select_more"); 
```

# xml - nusoap中的xml格式

> ID：12894533
> 
> 赞同：1
> 
> 时间：2012-10-15T11:20:26.983
> 
> 标签：xml, nusoap

我在将 XML 文件与我要使用的 web 服务所需的正确格式放在一起时遇到问题。我正在使用 nusoap 类来做到这一点。我得到的错误：

```
Array
(
[Reservation_Data] => Array
(
[Reservation_Value] => 0
[Status] => ERROR_Create_Internacional_Reservation: Object reference not set to an instance of an object. - 0
)
)

POST /Rentway_Internacional_Reservations_WS/Create_Reservation.asmx HTTP/1.0
Host: www.xxxxxxx.pt
User-Agent: NuSOAP/0.9.5 (1.123)
Content-Type: text/xml; charset=UTF-8
POST /Rentway_Internacional_Reservations_WS/Create_Reservation.asmx HTTP/1.0
Host: www.xxxxxxx.pt
User-Agent: NuSOAP/0.9.5 (1.123)
Content-Type: text/xml; charset=UTF-8
SOAPAction: http://www.xxxxxxx.pt/Rentway_Internacional_Reservations_WS/Create_Internacional_Reservation/Create_Internacional_Reservation
Content-Length: 714
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns3785="http://tempuri.org">
<SOAP-ENV:Body><Create_Internacional_Reservation xmlns="http://www.xxxxxxxxx.pt/Rentway_Internacional_Reservations_WS/Create_Internacional_Reservation">
<Reservation_Request>
<MessageType>N</MessageType>
<Group>01</Group>
..........................
</Reservation_Request>
</Create_Internacional_Reservation>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我的代码是：

```
require_once('nu-soap/nusoap.php');
require_once('config.php');
$client = new     nusoap_client('http://www.xxxxxxxxxx.pt/Rentway_Internacional_Reservations_WS/Create_Reservation.asmx?wsdl', true);
$param = array('Username'=>'xxx','Password'=>'xxx','MessageType'=>'N','Group'=>'01');
$result = $client->call('Create_Internacional_Reservation', array('Reservation_Request' => $param)); 
```

在我被建议使用的网络服务手册上获取有关请求的信息时，我能找到的唯一区别是：

哪里：

```
Code (XML):
<Reservation_Request>
<MessageType>N</MessageType>
<Group>01</Group>
...........................
</Reservation_Request> 
```

应该：

```
<Reservation_Request xmlns="http://www.xxxxxx.pt/Rentway_Internacional_Reservations_WS/Reservation_Request.xsd" >
<MessageType>N</MessageType>
<Group>01</Group>
...........................
</Reservation_Request> 
```

如何在 Reservation_Request 中发送 (xmlns="http://www.xxxxxx.pt/Rentway_Internacional_Reservations_WS/Reservation_Request.xsd" )？

# c# - 有没有办法在 C# 中找到字符串是数字（int、long、float 或 double）？

> ID：12894534
> 
> 赞同：0
> 
> 时间：2012-10-15T11:20:27.463
> 
> 标签：c#

是否有任何类`C#`类似于其中的`Numberformat`类`Java`，验证字符串是一个数字。

```
NumberFormat numberFormat = NumberFormat.getInstance();
Number number = numberFormat.parse(string); 
```

* * *

在尝试使用以下参数进行浮点时 float.TryParse(value, NumberStyles.Float, CultureInfo.InvariantCulture, out fValue),

value=6666.77777 四舍五入为 6666.778。

谁能帮忙，我不希望我的价值四舍五入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T11:21:25.013

如果数字是 int，则使用`int.TryParse`它将返回 true。

*   [int.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)用于整数。
*   [float.TryParse](http://msdn.microsoft.com/en-us/library/system.single.tryparse.aspx)用于浮点数。
*   [double.TryParse](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)用于双打
*   [Int64.TryParse](http://msdn.microsoft.com/en-us/library/xssxkb0k.aspx)很长。

例如

```
string str = "123";
int temp;
if (int.TryParse(str, out temp))
{
    //its an int
}
else
{
    // not an int
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T11:22:05.343

```
int a
bool isNumber = int.TryParse("500", out a); 
```

替换`int`为您要检查的任何数字

# javascript - Django循环中的多个JQuery倒计时

> ID：12894538
> 
> 赞同：1
> 
> 时间：2012-10-15T11:20:31.613
> 
> 标签：javascript, jquery, django

我正在用 django 创建一个运动应用程序。我想显示一个比赛列表，每场比赛都有倒计时。

目前，我只有一个倒计时。我使用这个 Jquery 倒计时： http: [//keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)（进入新的一年）。我有一个循环来显示我的匹配项。所以问题是如何将倒计时插入循环并使其进入我的对象“匹配”的日期时间？

这是我的模板：

```
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />

<script type="text/javascript"     src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<style type="text/css">@import "/Users/marc-a   antoine.lacroix/Desktop/Jquery/jquery.countdown.package-1.6.0/jquery.countdown.css";</style>

<script type="text/javascript" src="http://keith-wood.name/js/jquery.countdown.js">    </script>
<script language="javascript">

$(document).ready(function(){

var newYear = new Date(); 
newYear = new Date(newYear.getFullYear() + 1, 1 - 1, 1); 
$('#defaultCountdown').countdown({until: newYear}); 

});
</script>

</head>
<body>

<div style="float:left">
{% for match in matches %}
<div>    
    <p>{{ match }}</p>
    <p> {{match.real_start}} <p>
    <a href="{{ match.get_absolute_url_grille }}">Go</a>
   </div>
{% endfor %}
</div>

<div id="defaultCountdown"> </div>

</body> 
```

“matches”是包含每个匹配项的列表。“real_start”是我的对象“匹配”的日期时间

我的views.py 很简单：

```
 def page(request):
     matches = Match.live_matches.all()

     return render_to_response('myhtml.html', {'matches': matches}, context_instance=RequestContext(request)) 
```

所以我不知道如何将我的“real_start” DateTime 导入倒计时以及如何将此倒计时插入循环中。

这是我当前的代码：

```
<script language="javascript">

  $(function(){
  $('.match_wrap').each(function(){
   var match_start=$(this).data('match_start');      
   $(this).find('.matchTimer').countdown({until: match_start});
  });
  })
</script>

</head>
<body>

 <div style="float:left">
 {% for match in matches %}
 </br></br>
 <div class="match_wrap" data-match_start="{{ match.real_start|date:"M j, Y" }}">     
    <p>{{ match }}</p>
    <p> {{match.real_start}} <p>
    <div>
        <ul>
        {% for team in match.teams %}
            <li>
                <img src="{{ team.logo.url }}">
            </li>
        {% endfor %}
        </ul>
    </div>
    <a href="{{ match.get_absolute_url_grille }}">Go</a>
    <div class="matchTimer"> </div>
    </div>
{% endfor %}
</div>
</br></br> 
```

我也试过：

```
 <head>
 <meta http-equiv="Content-type" content="text/html; charset=utf-8" />

 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript" src="http://keith-wood.name/js/jquery.countdown.js"></script>

 <script language="javascript">

  $('.match_countdown').each(function() {
  var self = $(this),
    date_string = self.attr('data-date'),
    date = new Date.parse(date_string);
  self.countdown({until: date});
});
</script>

</head>
<body>

<div style="float:left">
{% for match in matches %}
</br></br>
<div class="match_countdown" data-date="{{ match.real_start|date:'M j, Y' }}"></div>  
    <p>{{ match }}</p>
    <p> {{match.real_start}} <p>
    <div>
        <ul>
        {% for team in match.teams %}
            <li>
                <img src="{{ team.logo.url }}">
            </li>
        {% endfor %}
        </ul>
    </div>
    <a href="{{ match.get_absolute_url_grille }}">Go</a>
</div>
{% endfor %}
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:35:05.480

类似于 charlietfl 的答案，但 js 解析正确的日期。

```
{# template #}
{% for match in matches %}
    <div>    
        <p>{{ match }}</p>
        <p> {{match.real_start}} <p>
        <a href="{{ match.get_absolute_url_grille }}">Go</a>
        <div class="match_countdown" data-date="{{ match.real_start|date:'M j, Y' }}"></div>
    </div>
{% endfor %} 
```

然后是js：

```
$('.match_countdown').each(function() {
    var self = $(this),
        date_string = self.attr('data-date'),
        date = new Date(date_string);
    self.countdown({until: date});
}); 
```

这里 ( [http://jsfiddle.net/miki725/MQcYw/1/](http://jsfiddle.net/miki725/MQcYw/1/) ) js jsfiddle 说明了解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:20:50.780

当您需要在许多元素上调用插件时，每个实例需要不同的数据时，通常最容易循环所涉及的元素并从循环中调用每个实例。

这样的事情应该很容易实现：

HTML

```
{% for match in matches %}
<div class="match_wrap" data-match_start="{{match.startFormattedToCountDownPlugin}}">    
    <p>{{ match }}</p>
    <p> {{match.real_start}} <p>
    <a href="{{ match.get_absolute_url_grille }}">Go</a>
   </div>
   <div class="matchTimer"> </div>
</div>
{% endfor %} 
```

JS

```
$(function(){
   $('.match_wrap').each(function(){
      var match_start=new Date.parse($(this).data('match_start')); 
       $(this).find('.matchTimer').countdown({until: match_start});
   });
}) 
```

# distribution - 法线角度偏差的高斯分布

> ID：12894540
> 
> 赞同：1
> 
> 时间：2012-10-15T11:20:39.487
> 
> 标签：distribution, gaussian, deviation

最近我阅读了 NVidia 的[Mipmapping-Normal-Maps](http://developer.download.nvidia.com/whitepapers/2006/Mipmapping_Normal_Maps.pdf.)

在“估计正态变化”部分，它假设角度偏差的高斯分布并给出一个数字（对不起，我不能以新用户的身份发布图像，请参阅该论文中的图 2）。

那么我的问题是，Na 是如何用标准差的函数来表示的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:22:16.013

The links doesn't work for me but I assume Na is what was represented normal distributed. The function for Na would be:

![Na normal distributedf](../Images/be1654067b71b6d0b11be7f07e537a19.png)

with:

*   Na as the normal distributed value (x-axis value)
*   sigma () as the standard variance
*   f(Na) as the probability density (y-axis value)
*   mu (µ) as the expected value (usually the average value)

# mongodb - MongoDB GridFS 文件大小对于相对较小的文件来说很大

> ID：12894542
> 
> 赞同：2
> 
> 时间：2012-10-15T11:20:44.173
> 
> 标签：mongodb, storage, gridfs, filesize

我正在做一些测试，看看我们是否可以在 MongoDB 上使用 GridFS 来为未来的应用程序存储文件；我正在使用 10gen 的 C# 驱动程序将 80Mb 文件“上传”到数据库中。

第一次添加很好，大约需要 3 秒，这在我的测试机器上还算不错；但是以后添加同一个文件需要更长的时间，最多 30 秒，最终 MongoDB 告诉我它内存不足并崩溃了。

添加 10 个文件，大小为 80Mb 会导致在系统崩溃之前为我的数据库创建 8 个文件，命名为 dbaseName.0 到 dbaseName.7，它们的文件大小从文件 0 到 5 以指数方式从 16Mb 增加到 512Mb，然后文件 6 和 7 都是512MB。

这些文件不到 2Gb，显然第 10 次添加文件会使 dbase 超过 2Gb，这超出了我的 32 位测试版本的限制。

为什么存储 800Mb 的文件会占用 2Gb？有没有我在某处错过的设置？

MongoDB 是否经常将整个 GridFS 保存在 RAM 中？如果是这样，磁盘的意义何在？如果我的生产服务器上只有 32Gb 的 RAM，我只能在 GridFS 中存储 32Gb 吗？

我在 MongoGridFS 对象上使用了 EnsureIndexes，并检查了显示为 GridFS 创建索引的数据库，所以 Mongo 不应该尝试将整个数据存储区放入 RAM 中吗？

MongoDB 可以满足我们的所有需求，但我们需要它能够容纳大型文件集合；我错过了一些明显的东西吗？

堆栈跟踪：

```
Mon Oct 15 11:57:15 [conn15] insert busyNow.fs.chunks keyUpdates:0 locks(micros) w:112892 113ms
Mon Oct 15 11:57:15 [conn15] MapViewOfFileEx for /data/db/busyNow.7 failed with errno:8 Not enough storage is available to process this command. (file size is 536608768) in MemoryMappedFile::map

Mon Oct 15 11:57:15 [conn15]  busyNow.fs.chunks Fatal Assertion 16166
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\util\assert_util.cpp(124)                               mongo::fassertFailed+0x75
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\util\mmap_win.cpp(211)                                  mongo::MemoryMappedFile::map+0x4ce
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\mongommf.cpp(182)                                    mongo::MongoMMF::create+0xa3
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\pdfile.cpp(469)                                      mongo::MongoDataFile::open+0x141
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\database.cpp(280)                                    mongo::Database::getFile+0x34f
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\database.cpp(332)                                    mongo::Database::suitableFile+0x129
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\database.cpp(359)                                    mongo::Database::allocExtent+0x41
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\pdfile.cpp(1271)                                     mongo::outOfSpace+0x107
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\pdfile.cpp(1293)                                     mongo::allocateSpaceForANewRecord+0x5d
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\pdfile.cpp(1463)                                     mongo::DataFileMgr::insert+0x493
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\pdfile.cpp(1217)                                     mongo::DataFileMgr::insertWithObjMod+0x33
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\instance.cpp(761)                                    mongo::checkAndInsert+0x72
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\instance.cpp(821)                                    mongo::receivedInsert+0x4cd
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\instance.cpp(434)                                    mongo::assembleResponse+0x62a
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\db\db.cpp(192)                                          mongo::MyMessageHandler::process+0xe8
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\mongo\util\net\message_server_port.cpp(86)                    mongo::pms::threadRun+0x424
Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\third_party\boost\boost\thread\detail\thread.hpp(62)          boost::detail::thread_data<boost::_bi::bind_t<void,void (__cdecl*)(mongo::MessagingPort *),boost::_bi::list1<boost::_bi::value<mongo::MessagingPort *
> > > >::run+0x9Mon Oct 15 11:57:17 [conn15] mongod.exe  ...\src\third_party\boost\libs\thread\src\win32\thread.cpp(16707566)  boost::`anonymous namespace'::thread_start_function+0x47
Mon Oct 15 11:57:17 [conn15] mongod.exe  f:\dd\vctools\crt_bld\self_x86\crt\src\threadex.c(314)                _callthreadstartex+0x1b
Mon Oct 15 11:57:17 [conn15] mongod.exe  f:\dd\vctools\crt_bld\self_x86\crt\src\threadex.c(292)                _threadstartex+0x64
Mon Oct 15 11:57:17 [conn15]

***aborting after fassert() failure

Mon Oct 15 11:58:33 [initandlisten] connection accepted from 127.0.0.1:56308 #16 (3 connections now open) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T10:23:37.630

行; 经过大量搜索后，似乎 MongoDB 在指数大小的文件中预先分配了高达 2Gb 的空间，之后每个文件将是 2G。

[http://www.mongodb.org/display/DOCS/Excessive+Disk+Space](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space)

我的测试程序在后台文件（.0 - .7 等）中添加了 80Mb 文件，并且随着数据块开始写入最后一个文件，Mongo 预先分配了另一个文件，该文件比上一个文件大得多。

所以第一个 80Mb 文件填满了 16Mb 文件，32Mb 文件和 64Mb 背景文件，由于元数据占用了更多空间，必须稍微占用 128Mb 文件，这会触发 mongo 预分配一个 256Mb 文件，总计496MB；随着更多文件的添加，更多文件被预先分配，当我的测试机器上达到 2Gb 时，Mongo 无法访问该空间并崩溃。

因此，尽管看起来一个 80Mb 的文件占用的空间比它应该占用的空间多得多——但它以一种迂回的方式是有意义的。

这可以通过使用 --noprealloc 运行 mongod 来关闭，尽管这仅推荐用于测试机器。

感谢您的回复！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:40:44.020

GridFS 不会仅将所有文件存储在 RAM 中。

你有堆栈跟踪还是可以再次重现崩溃？

# r - 计算内聚块内聚 igraph 0.5.4

> ID：12894549
> 
> 赞同：0
> 
> 时间：2012-10-15T11:21:07.883
> 
> 标签：r, igraph

是否有或多或少直接的方法来估计`cohesive.blocks()`igraph 0.5.4 中每个内聚块（即 的结果）的内聚性？

在实际版本 (0.6) 中有一个名为 的函数`cohesion()`，但在 0.5.x 版本中没有。有没有更简单的方法来计算它，还是我应该为每个块单独计算（手动！！）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:41:35.520

这实际上在文档中，甚至在示例中：

```
g <- graph.disjoint.union(graph.full(4), graph.empty(2,directed=FALSE))
g <- add.edges(g,c(3,4,4,5,4,2))
g <- graph.disjoint.union(g,g,g)
g <- add.edges(g,c(0,6,1,7,0,12,4,0,4,1))

## Find cohesive blocks:
gBlocks <- cohesive.blocks(g)

## Examine block membership and cohesion:
gBlocks$blocks
# [[1]]
#  [1]  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17
# [[2]]
#  [1] 12 13 14 15 16
# [[3]]
#  [1]  0  1  2  3  4  6  7  8  9 10
# [[4]]
#  [1] 12 13 14 15
# [[5]]
#  [1] 0 1 2 3 4
# [[6]]
#  [1] 6 7 8 9

gBlocks$block.cohesion
# [1] 1 2 2 3 4 3 
```

# iphone - 从时间戳间隔获取缺少的月份

> ID：12894552
> 
> 赞同：-2
> 
> 时间：2012-10-15T11:21:21.127
> 
> 标签：iphone, ios5, datetime, ios4

我从服务器接收时间（以秒为单位），然后使用以下代码将 tjose 秒转换为月份：

```
NSDateFormatter * dateFormatter=[[[NSDateFormatter alloc]init]autorelease];
dateFormatter setDateFormat:@"MMM"];
[dateFormatter stringFromDate:[NSDate dateWithTimeIntervalSince1970:timeStamp]]; 
```

问题是我不是每个月都从服务器获取，就像我第一次获取 Jan 然后第二次获取 Apr 从服务器获取但我需要在我的 iPhone 屏幕上显示 2 月和 3 月（缺少月份）（服务器人员无法更改他们的代码，所以我必须在最后做）。
谁能建议我如何才能错过几个月。
同样的问题有时我会从服务器获得 11 月和 2 月，但我也必须显示 12 月和 1 月
。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:38:55.070

您可以比较两个日期之间的差异作为时间戳

```
NSDateFormatter * dateFormatter=[[[NSDateFormatter alloc]init]autorelease];
dateFormatter setDateFormat:@"MMM"];
NSString* monthName = [dateFormatter stringFromDate:[NSDate dateWithTimeIntervalSince1970:newTimestamp]]

NSTimeInterval month = 60.0 * 60.0 * 24.0 * 31.0; //seconds * minutes * hours * days ~ month
NSTimeInterval tempTimestamp = oldTimestamp;
while(tempTimestamp - newTimestamp) > month){
    //more than a month difference -> add a month
    NSString* tempMonthName = [dateFormatter stringFromDate:[NSDate dateWithTimeIntervalSince1970:tempTimestamp]];
    if(![monthName isEqualTo:newMonthName]){
        //do whatever you need with the additional month name...
    }
    tempTimestamp += month;
} 
```

希望它会有所帮助。

干杯...

# sql - Firebird“列不属于引用表”

> ID：12894555
> 
> 赞同：2
> 
> 时间：2012-10-15T11:21:31.407
> 
> 标签：sql, firebird

我正在尝试使用 ibexpert gui 在 firebird 2.5 上创建我的第一个程序。

该过程将返回属于特定“PROCESS_ID”的“PROCESS_DATE”。我准备了以下代码：

```
begin
  OUTPUT_DATE = (select PROCESS_DATE from PROCESSES
                 where PROCESS_ID = INPUT_ID);
  suspend;
end 
```

输入参数：'INPUT_ID' --> 输入'INTEGER'
输出参数：'OUTPUT_DATE' --> 输入'DATE'

但是当我试图编译它返回这个错误：

```
Column does not belong to referenced table.
Dynamic SQL Error.
SQL error code = -206.
Column unknown.
INPUT_ID.
At line 9, column 48. 
```

我不知道如何处理这个错误。

我试图在互联网上找到其他问题的解决方案，但我找不到初学者可以理解的基本答案。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:43:07.123

试试这个：

```
CREATE PROCEDURE MyP (INPUT_ID INTEGER)
  RETURNS (OUTPUT_DATE DATE)
AS 
BEGIN
  FOR
    SELECT PROCESS_DATE FROM PROCESSES
    WHERE PROCESS_ID = :INPUT_ID  
    INTO :OUTPUT_DATE
  DO
    SUSPEND;
END 
```

始终在参数名称前加上“：”。唯一不允许使用“:”的地方是“=”运算符的左侧。

# java - 使用 Ajax 或 JQuery 直接上传文件（带或不带表单）

> ID：12894562
> 
> 赞同：2
> 
> 时间：2012-10-15T11:22:01.120
> 
> 标签：java, jquery, ajax, file-upload, playframework-2.0

我正在尝试使用页面末尾描述的第二种“直接文件上传”方法：[http ://www.playframework.org/documentation/2.0/JavaFileUpload](http://www.playframework.org/documentation/2.0/JavaFileUpload)

如何实现允许我使用它的所需 Ajax/Jquery/Js 功能？谁能提供一些命中或片段？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:24:45.903

您不能使用 AJAX 上传文件。至少在不支持 HTML5 [File API](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)的浏览器中不会。对于那些浏览器，您可以使用一些现有的文件上传控件，例如[Uploadify](http://www.uploadify.com/)、[Blueimp File upload](http://blueimp.github.com/jQuery-File-Upload/)、[Valums File Uploader](https://github.com/valums/file-uploader)，...

这些控件检测浏览器是否支持 File API 并将使用它。如果不是，它将使用其他技术，例如使用 hidden `<iframe>`, `Flash`, `Silverlight`, ...

# ipad - 检测标签选择：标签栏控制器

> ID：12894566
> 
> 赞同：1
> 
> 时间：2012-10-15T11:22:07.853
> 
> 标签：ipad, ios5, uitabbarcontroller, uipopovercontroller

我的标签栏应用程序中有五个标签。如果用户在 popOverController 中输入正确的密码，我可以访问第三个选项卡。当用户点击（选择）第三个选项卡时，我想展示那个弹出控制器。我该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:31:09.277

查看 U [ITabBarControllerDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html)。特别考虑实现上述`tabBarController:didSelectViewController:`协议的方法，甚至更好的`tabBarController:shouldSelectViewController:`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:31:51.290

使用 UIPopovercontroller 在进入 tabbarcontrollerview 时显示登录表单，这意味着 viewdidload 中的第一个操作。然后验证凭据并删除登录弹出框。就是这样。

# c++ - 浮动值问题

> ID：12894569
> 
> 赞同：1
> 
> 时间：2012-10-15T11:22:27.480
> 
> 标签：c++

我在使用浮点数时遇到问题

在循环中，它的值停留在 8388608.00

```
int count=0;
    long X=10;
    cout.precision(flt::digits10);
    cout<<"Iterration #"<<setw(15)<<"Add"<<setw(21)<<"Mult"<<endl;
    float Start=0.0;
    float Multiplication = Addition * N;
    long i = 1;
    for (i; i <= N; i++){
        float temp = Start + Addition;
        Start=temp;
        count++;
        if(count%X==0 && count!=0)
        {
            X*=10;
            cout<<i;
            cout<<fixed<<setw(30)<<Start<<setw(20)<<fixed<<i*Addition<<endl;
        }
    } 
```

我应该怎么办？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:28:33.453

[当您将（相对）较小的数字添加到（相对）大的数字时，浮点加法](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BinMath/addFloat.html)不起作用。这是由[float 存储在 memory 中](http://www.cs.ucla.edu/digital_arithmetic/files/ch8.pdf)的方式引起的。

您可以尝试用[双精度浮点](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)( ) 表示替换[单精度浮点](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)( `float`)，但如果这不起作用，您可能需要像这样实现 hack：`double`

```
// Lets say
double OriginalAddition = 0.123;
int Addition = 1;

// You just use base math substitution:
// Addition = OriginalAddition
int temp = Start + Addition;  // You will treat transform floating point to fixed point
                              // with step 0.123, so 1 = 0.123
// And when displaying result (transform back into original floating point):
printf( "%f", (double)result*OriginalAddition) 
```

这需要深思熟虑才能找到一个不会导致数据丢失、覆盖所需精度且不会导致`int`溢出的替换。尝试谷歌[*定点 int C*](https://www.google.com/search?hl=en&ie=UTF-8&q=fixed%20point%20c%20int)（一些结果：[1](https://ccrma.stanford.edu/~jos/st/Binary_Integer_Fixed_Point_Numbers.html) , [2](http://www.eetimes.com/discussion/other/4024639/Fixed-point-math-in-C)）以更好地了解该做什么。

# javascript - Twitter Bootstrap 模式在显示页面上滚动

> ID：12894570
> 
> 赞同：11
> 
> 时间：2012-10-15T11:22:32.993
> 
> 标签：javascript, html, css, scroll, twitter-bootstrap-2

单击触发 Twitter Bootstrap 模式弹出的链接会导致浏览器向上滚动页面。此行为仅在 Chrome 中发生。

这是一个演示页面：

[http://www.turizmburosu.com/test2.aspx](http://www.turizmburosu.com/test2.aspx)

页面有 600 行链接，导致页面正文超出窗口高度。如果单击这些链接中的任何一个，它将显示模式对话框。在 Chrome 中，单击初始视图下方的任何链接都会导致背景页面向上滚动（并不总是完全滚动到顶部）。

我使用以下函数来触发模态的显示：

```
function test(id, imp) {
    $("#modalLabel").html("Header");
    $("#modalBody").html("Body");
    $("#myModal").modal("show");
} 
```

链接的形式为：

```
<a href="" onclick="test();return false;">Test Link ###</a> 
```

我在**Chrome 22.0.1229.94 m**中看到了这种行为。

关于为什么会发生这种情况以及如何防止它的任何建议/想法？

* * *

### 附加示例

这可以[在 Modal 插件的 Twitter Bootstrap 文档页面上](http://twitter.github.com/bootstrap/javascript.html#modals)重新创建。

进入页面后，只需覆盖现有的 data-api 即可改用 JavaScript api：

```
$('#modals a[data-toggle="modal"]').on('click',
  function(e) {
    $('#myModal').modal('toggle');
    return false
  }); 
```

现在，如果单击**Launch Demo Modal**按钮，则在显示模式时页面将向上滚动。

同样，这是使用 Chrome。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-19T12:54:18.687

# 已修复（2012 年 10 月 29 日）

### 自 Bootstrap v2.2.0 以来，此问题已得到修复。有关详细信息，请参阅[提交 e24b46...。](https://github.com/twitter/bootstrap/commit/e24b46b7f3fb9eab5f34fb6e199d24781204c745#js/bootstrap-modal.js)

* * *

### （原答案）

这是由于 Twitter Bootstrap 模式（从 2.1.1 开始）实现中的一个错误。问题的根源在于焦点在模态完成转换*之前被设置为模态。*这只会在以下条件下发生

1.  浏览器支持 CSS 过渡（并且您正在使用**bootstrap-transition.js**）；
2.  模态有类`fade`；和
3.  当焦点设置到当前视图之外的元素时，浏览器将滚动以将其移动到视图中（例如，Chrome、Safari）。

应该注意的是，这会影响 Data API（基于标记）和 Programmatic API（基于 JS）。但是，采用编程方法时它更明显的原因是，与 Data API 不同，它不会自动将焦点恢复到触发元素，因此，当模式隐藏时不会向下滚动视图。

更多信息可在 Twitter Bootstrap 存储库中的[Issue #5336: Modal Scrolls Background Content](https://github.com/twitter/bootstrap/issues/5336)下找到。

[一个修复程序已合并到**2.1.2-wip**分支](https://github.com/twitter/bootstrap/pull/5549)中，现在应该可以随时发布。

这是使用补丁**bootstrap-modal.js**的演示：

## [JSFiddle](http://jsfiddle.net/mmfansler/Ea5uT/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-20T20:55:05.817

同样的问题。它是由“#”引起的，并且锚点正在滚动。我通过删除锚标签来解决这个问题并将其放置：

```
<span onclick="$('#umisteni_modal').modal('show');" style="cursor:pointer;">Změnit místo dodání</span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-06T08:12:20.217

我在我的网站上遇到了类似的问题，这是由另一个 jquery 插件（sidr）引起的。当侧边栏出现并且我打开一个模式窗口时，我将被送回顶部。

在 jquery.sidr.js 中，我将第 102-106 行从：

```
// Prepare page if container is body
if($body.is('body')){
scrollTop = $html.scrollTop();
$html.css('overflow-x', 'hidden').scrollTop(scrollTop);
} 
```

至：

```
// Prepare page if container is body
if($body.is('body') && !$('#modal').hasClass('in')){
scrollTop = $html.scrollTop();
$html.css('overflow-x', 'hidden').scrollTop(scrollTop);
} 
```

如果您将此插件与 twitter bootstrap 的模态一起使用，也许这可以帮助您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-23T04:19:41.593

将焦点重新拉近

```
var triggerOffset=0;
$('.modal').on('show.bs.modal', function() {
    triggerOffset=$(window).scrollTop();
});
$('.modal').on('hidden.bs.modal', function() {
     var animationTime=1;
    $('html, body').animate({
        scrollTop: (triggerOffset)
    }, animationTime);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-31T19:29:25.633

我遇到了同样的问题，因为这些 CSS 行被认为会在浏览器中永久显示滚动条。删除这两行解决了问题：

```
html,
body {
    min-height: 100%;
    height: 101%;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-18T10:31:45.513

我一直有这个问题很长时间，但我的解决方案是从锚标记中删除 href

IE

```
<a onclick="test();return false;">Test Link ###</a> 
```

我现在没有跳

希望这对将来的人有所帮助

# mongodb - 使用内部字段查询 mongodb

> ID：12894573
> 
> 赞同：0
> 
> 时间：2012-10-15T11:22:45.590
> 
> 标签：mongodb

我有一个收藏：人。我想查询 people.lastname = people.firstname 的文档

这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:45:04.590

正如 Sergio 正确指出的那样，[`$where`](http://docs.mongodb.org/manual/reference/operator/where/)性能很差，但如果你仍然可以接受，那么你会这样做：

```
db.people.find( { $where: "this.lastname == this.firstname" } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:24:35.027

不，目前这是不可能的（以有效的方式）。它可能可以使用`$where`，但性能很差，我不建议在实际应用程序中使用它。

# spring - Primefaces 选项列表，转换器失败

> ID：12894575
> 
> 赞同：0
> 
> 时间：2012-10-15T11:22:52.547
> 
> 标签：spring, primefaces, converter

我在我的项目中使用 Hibernate、Spring 和 JSF (Primefaces)。我想用简单的 POJO（实体）创建一个选项列表。这是我创建的：

```
<p:pickList id="pickList" converter="#{groupConverter}" value="#{adminUsersMB.groups}" var="group"   
                        itemLabel="#{group.name}" itemValue="#{group}" >

                        <f:facet name="sourceCaption">Available groups</f:facet>  
                        <f:facet name="targetCaption">Users groups</f:facet> 

 </p:pickList> 
```

我的转换器是：

```
@RequestScoped
@FacesConverter(forClass=Group.class, value="groupConverter")
public class GroupConverter implements Converter {

    @ManagedProperty(name="groupService", value="#{groupService}")
    @Getter @Setter
    GroupService groupService;

    @Override
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {
        try {
            return groupService.getGroupByName(Integer.parseInt(arg2));
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2) {
        return ((Group) arg2).getId().toString();
    }

} 
```

当然，我将自定义转换器添加到 faces 配置中：

```
<converter>
        <converter-id>groupConverter</converter-id>
        <converter-class>pl.proedims.users.component.GroupConverter</converter-class>
</converter> 
```

但是当我提交表单时，我遇到了异常：

```
> SEVERE: javax.el.PropertyNotFoundException: /admin/user.xhtml @73,66
> itemLabel="#{group.name}": Property 'name' not found on type java.lang.String 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:23:27.413

问题解决了。我只需要输入：

```
@Component("groupConverter")
public class GroupConverter implements Converter {

    @Autowired
    GroupService groupService;
    (...) 
```

# projects-and-solutions - 如何在 FlashDevelop/ActionScript 3.0 中创建多个共享通用代码库的 Flash 应用程序？

> ID：12894578
> 
> 赞同：0
> 
> 时间：2012-10-15T11:23:01.113
> 
> 标签：projects-and-solutions, flashdevelop

情况：

我需要几个项目在 FlashDevelop 中编译的几个 swf/exe 输出文件。超过 60% 的 ActionScript 3.0 源代码对所有项目都是通用的，其余的都是项目特定的。如何在 FlashDevelop 中组织它？我想在不复制通用代码库的情况下进行“一键构建”设置（所以当我需要修复某些问题时，我不需要将解决方案复制粘贴到多个文件中）。

所有资源都在开发中，并且会经常变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T20:47:59.820

使用 svn:externals 你可以构建你的存储库，使公共部分在源代码控制系统中只存储一次，因此所做的更改可以与单个提交和更新周期同步。

例如，假设您有`^/ProjectA`and `^/ProjectB`，每个都带有 require`^/Common`作为子目录。

使用 svn:externals，拉`^/Common`入两个项目。

这样做的确切性质将取决于您使用的 svn 版本，以及您使用的任何客户端（例如 TortoiseSvn）。具体参考[svn书](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.advanced.externals)的相关版本。

实现这一点的难易程度很大程度上取决于当前公共代码在您的应用程序中的分离程度；并且将目录作为目录拉入比尝试将它们拉入现有目录更实用；不幸的是，不支持文件路径的通配符。

但是，根据您对目标的描述；这是我能想象到的最直接的解决方案。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:03:38.580

一个直接的解决方案是创建一个**外部类路径**，例如：

*   c:\dev\shared_src\
*   c:\dev\project1\
*   c:\dev\project2\

然后配置每个项目：

*   项目属性 > 类路径
*   添加类路径 > 选择 '../shared_src'

PS：当然，您应该将所有内容置于源代码控制之下。

# java - 在 Itext 中添加带有希伯来字母的注释

> ID：12894581
> 
> 赞同：0
> 
> 时间：2012-10-15T11:23:13.857
> 
> 标签：java, itext

当我使用以下方法添加注释时：

```
PdfAnnotation.createFileAttachment(writer,null,null , null,  , "שם קובץ", "שם קובץ"); 
```

注释中的希伯来字母未显示。

有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:21:46.043

1.  您在代码中使用了希伯来语字符。那不安全。请用 unicode 表示法替换它们（您需要知道它们的 unicode 值；例如`\u00a0`，不间断空格的值）。如果您不这样做，编译器可能会错误地解释字符（请参阅给出的注释）。
2.  在我看来，您在方法中没有正确数量的参数。我假设您正在使用[这种方法](https://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfAnnotation.html#createFileAttachment%28com.itextpdf.text.pdf.PdfWriter,%20com.itextpdf.text.Rectangle,%20java.lang.String,%20byte%5B%5D,%20java.lang.String,%20java.lang.String%29)。
3.  您正在使用假定字符不是 Unicode 字符的“快捷方式”方法。请不要。使用创建`PdfFileSpecification`对象的方法，并使用诸如`setUnicodeFileName()`将 unicode 参数设置为`true`. 这样，iText 就知道字符应该被解释为 Unicode 字符。
4.  您可能希望字符从右到左出现。我不知道这在 PDF 中是否支持。我浏览了 ISO-32000-1 并查看了表 44（文件规范字典中的条目），但我看到的只是：Unicode 文本字符串，它提供了 7.11.2 “文件规范字符串”中描述的形式的文件规范。这是使用带有前导字节顺序标记的 PDFDocEncoding 或 UTF-16BE 编码的文本字符串（如 7.9.2.2，“文本字符串类型”中定义）。如果您想了解更多信息，则必须深入研究这些部分。
5.  您`null`作为`Rectangle`. 那没有意义。您确定要添加文件附件注释吗？根据您的代码，我假设您想要添加文档级附件。这样做是这样的：`writer.addFileAttachment(fs);`使用类`fs`的实例`FileSpecification`。

# npm - 从 expressjs 运行 npm 命令？

> ID：12894585
> 
> 赞同：0
> 
> 时间：2012-10-15T11:23:26.687
> 
> 标签：npm, express, node-modules

我可以运行类似的东西：`npm install passport`从 expressjs 本身吗？

我想检查我是否正在使用未安装的模块并在运行应用程序之前安装它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:35:22.593

要回答您的问题，是的，您应该能够使用[fs](http://nodejs.org/api/fs.html)检查文件系统中的特定文件/文件夹。我想你需要解析你的 package.json 并检查本地 node_modules 或全局安装路径。

我会推荐一个 shell 脚本`run npm install`，然后从同一个脚本中启动你的应用程序。

```
npm install .
node <server> & 
```

# iphone - 对那些从 UIBuilder 添加的控件进行编码未应用

> ID：12894586
> 
> 赞同：0
> 
> 时间：2012-10-15T11:23:34.433
> 
> 标签：iphone, objective-c, ios, xcode

当我从界面生成器添加 UIControls 时，在运行时更改该控件的某些属性，因此不会应用更改。XCode 4.5。

别的什么，嗯。在设置中，我们必须做一些事情来做到这一点。

# xml - 元素 [servlet] 不是有效的根元素

> ID：12894594
> 
> 赞同：1
> 
> 时间：2012-10-15T11:24:03.653
> 
> 标签：xml, web, web.xml

这是错误日志，有人可以帮我看看可能会磨损什么吗？

```
In-place deployment at E:\Pavan\Java Web Apps\WebApplication2\build\web
Initializing...
deploy?DEFAULT=E:\Pavan\Java Web Apps\WebApplication2\build\web&name=WebApplication2&contextroot=/WebApplication2&force=true failed on GlassFish Server 3+ 
 Error occurred during deployment: Exception while deploying the app [WebApplication2] : Deployment descriptor file WEB-INF/web.xml in archive [web]. Element [servlet] is not a valid root element. Please see server.log for more details.
E:\Pavan\Java Web Apps\WebApplication2\nbproject\build-impl.xml:1022: The module has not been deployed.
See the server log for details.
BUILD FAILED (total time: 2 seconds) 
```

这是我的`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<servlet>
<servlet-name>
Example
</servlet-name>
<servlet-class>Exmple Servlet</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>Example</servlet-name>
<url-pattern>/Example/*</url-pattern>
</servlet-mapping>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
 version="3.0">
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
</web-app> 
```

我的主要目标是创建一个简单的文件来接受用户名和密码，然后将其显示在另一个页面上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:25:52.477

您的元素`web.xml`顺序错误。您似乎已将`<servlet>`元素插入顶部而不是`<web-app>`元素内部。

它需要看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
 version="3.0">
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<servlet>
<servlet-name>
Example
</servlet-name>
<servlet-class>Exmple Servlet</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>Example</servlet-name>
<url-pattern>/Example/*</url-pattern>
</servlet-mapping>
</web-app> 
```

另外，我很确定，你的 servlet 类名不是`Exmple Servlet`. :-) 如果您尝试像这样启动它，应用程序仍然会抛出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:26:56.183

你`<webapp>`一开始就失踪了。

# ios - 如何使用 AFNetworking API 编写 xml 响应

> ID：12894602
> 
> 赞同：0
> 
> 时间：2012-10-15T11:24:28.653
> 
> 标签：ios

我正在使用 AFNetworking API，但在其中找不到适用于 iOS 的 XML 的任何东西。

我想下载 API XML 响应并写入文件，但使用 AFNetworking 是不可能的，因为 iOS 不支持 NSXMLDocument

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:36:15.923

如果您只需要解析 XML，请尝试使用[KissXml](https://github.com/robbiehanson/KissXML)和 DDXmlDocument 类。关于[docs](https://github.com/robbiehanson/KissXML/wiki/Reference)，kiss xml 类与标准类 (NSXmlDocument) 具有相同的 intarface

# c# - 如何将数据表转换为列表？

> ID：12894604
> 
> 赞同：0
> 
> 时间：2012-10-15T11:24:32.960
> 
> 标签：c#, asp.net

我有一个数据集，其中的行和列很少，在列状态下会有很多匹配的行，我希望所有具有相同状态的行将其绑定到某个列表..如何实现它。

我需要它，因为我在具有相同状态的所有行中都有相同的资本，所以我不希望循环每次都运行......相反，我想绑定所有具有相同资本的行并使用那个数据。

```
 DataSet ds = new DataSet();
  da.Fill(ds, "table1");
  DataTable dt = new DataTable();
  dt = ds.Tables[0]; 
```

让我更清楚

我有一个包含状态、首都、人口列的数据集......我想在其他方法中使用这些数据，所以我使用循环，当状态是泰米尔纳德邦时，所有行中的首都和人口都将相同......所以它的不需要一次又一次地循环数据，所以我想将具有相同状态的数据绑定到某个东西并使用它..这是我的要求..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:31:04.167

好吧，您可以通过执行以下操作将行放入列表中：

```
using System.Linq;

...

var rowsArray = new DataRow[dt.Rows.Count];
dt.Rows.CopyTo(rowsArray, 0);
var rowsList = rowsArray.ToList(); 
```

但就根据您指定的标准进行过滤而言，我不确定，因为这里没有足够的信息来解决这个问题。

顺便说一句，您实际上可以`DefaultView`使用以下方法过滤：

```
dt.DefaultView.RowFilter = "some filter here"; 
```

然后只需绑定到`DefaultView`. 您可以在[此处](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx)找到相关文档。

## 已编辑问题的更新

好的，根据您的需要，这是一个可以满足您需求的工作控制台应用程序。简而言之，您需要实现`EqualityComparer`并***在上面的代码中添加一行***`Distinct`，即与您的比较器的调用。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication11
{
    class Program
    {
        static void Main(string[] args)
        {
            var list = new List<object[]>
            {
                new object[] {"tamilnadu","capital",2000000},
                new object[] {"other","capital",9490384},
                new object[] {"tamilnadu","capital",2000000}
            };

            foreach (var item in list)
            {
                Console.WriteLine(string.Format("{0} | {1} | {2}", item[0], item[1], item[2]));
            }

            Console.WriteLine();
            Console.WriteLine();

            var distinctList = list.Distinct(new MyArrayComparer());

            foreach (var item in distinctList)
            {
                Console.WriteLine(string.Format("{0} | {1} | {2}", item[0], item[1], item[2]));
            }
        }

        class MyArrayComparer : EqualityComparer<object[]>
        {
            public override bool Equals(object[] x, object[] y)
            {
                if (x.Length != y.Length) { return false; }
                for (int i = 0; i < x.Length; i++)
                {
                    if (!x[i].Equals(y[i]))
                    {
                        return false;
                    }
                }
                return true;
            }

            public override int GetHashCode(object[] obj)
            {
                return 0;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:40:25.360

```
 List<YourObject> mylist = new List<YourObject>();
    YourObject obj;
    foreach (DataRow dr in dt.Rows)
    {
        obj = new YourObject()
        obj.PropertyA = dr["columnA"];
        obj.PropertyB = dr["columnB"];
        obj.PropertyB = dr["columnB"];
        mylist.Add(obj);
    } 
```

PS你可能会看到一些语法错误，因为我正在使用记事本，我目前没有编译器

如果您使用的是 Linq，您也可以使用这种方式：[如何将 DataTable 转换为通用列表？](https://stackoverflow.com/questions/208532/how-do-you-convert-a-datatable-into-a-generic-list)

# c# - 如何根据 wpf 中的值使特定颜色变暗或变亮？

> ID：12894605
> 
> 赞同：11
> 
> 时间：2012-10-15T11:24:33.100
> 
> 标签：c#, wpf, colors, system.windows.media

我正在开发 wpf 应用程序。我在 C# 中有 Color 对象的实例。假设我有一个红色颜色对象的实例，即`Color c = Color.FromArgb(255,255,0,0)`现在假设我有一个范围从 1 到 10 的值。所以基于这个值我想改变“c”对象的颜色。我想要 1 为浅红色，10 为深红色。随着值从 1 增加，浅红色变为深色。如何在 C# 中为 wpf 应用程序执行此操作？您能否提供我可以解决上述问题的任何代码或链接？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T11:32:01.030

您可以尝试简单地将红色、绿色和蓝色分量乘以某个系数。

```
public static Color ChangeLightness(this Color color, float coef)
{
    return Color.FromArgb((int)(color.R * coef), (int)(color.G * coef),
        (int)(color.B * coef));
} 
```

或者，如果您想使用 1 到 10 之间的整数值而不是系数：

```
private const int MinLightness = 1;
private const int MaxLightness = 10;
private const float MinLightnessCoef = 1f;
private const float MaxLightnessCoef = 0.4f;

public static Color ChangeLightness(this Color color, int lightness)
{
    if (lightness < MinLightness)
        lightness = MinLightness;
    else if (lightness > MaxLightness)
        lightness = MaxLightness;

    float coef = MinLightnessCoef +
      (
        (lightness - MinLightness) *
          ((MaxLightnessCoef - MinLightnessCoef) / (MaxLightness - MinLightness))
      );

    return Color.FromArgb(color.A, (int)(color.R * coef), (int)(color.G * coef),
        (int)(color.B * coef));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:27:38.057

如果您有一定数量的值，那么 Style DataTrigger 呢？

[https://www.google.co.uk/search?q=c%23+wpf+style+datatrigger](https://www.google.co.uk/search?q=c%23+wpf+style+datatrigger)

```
<Button>
    <Button.Style>
        <Style TargetType="{x:Type Button}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding NameOfYourProperty}" Value="0">
                    <Setter Property="Background"
                            Value="#FF000000" />
                </DataTrigger>
                <DataTrigger Binding="{Binding NameOfYourProperty}" Value="1">
                    <Setter Property="Background"
                            Value="#FF110000" />
                </DataTrigger>
                <DataTrigger Binding="{Binding NameOfYourProperty}" Value="2">
                    <Setter Property="Background"
                            Value="#FF220000" />
                </DataTrigger>
                ( etc ... )
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

然后，如果您需要重用样式，则可以放入`<Resources>`窗口/用户控件的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T13:11:01.967

A cleaner solution would be to juxtapose 2 rectangles: one is the color you want, the other is black.

Then play with `Opacity` on the black rectangle to darken/lighten the underlying color.

It would look like:

```
<Grid>
   <Rectangle Fill="{Binding myColor}" />
   <Rectangle Fill="Black" Opacity="{Binding colorModifierPercentage}" />
</Grid> 
```

Of course, `colorModifierPercentage` must be a number between 0 and 1, and rectangle can be any [Shape](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.aspx).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T11:31:38.693

假设您正在使用一个滑块，其最小值为`1`，最大值为`10`。您可以将值乘以`25.5 (255 / max value)`。然后，从最大值 (255) 中减去该答案并将其用作红色值。

```
double newRedValue = 255 - (slider.Value * (255 / slider.Maximum));
int redValue = Convert.ToInt32(newRedValue);
Color c = Color.FromArgb(redValue ,255,0,0) 
```

您可以`255 / slider.Maximum`用一个常数值替换，因为它可能会保持不变。上面的公式会产生相反的效果，因此滑块值越低，红色的阴影越亮。当然，值 10 将导致`red`为`0`，因此如果您不希望红色分量那么低，您可以添加一个最小值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-30T21:28:12.927

CodeProject上有[一篇关于它的文章](https://www.codeproject.com/Articles/49650/WPF-Color-Conversions)：

```
 /// <summary>
    /// Converts a WPF RGB color to an HSL color
    /// </summary>
    /// <param name="rgbColor">The RGB color to convert.</param>
    /// <returns>An HSL color object equivalent to the RGB color object passed in.</returns>
    static HlsColor RgbToHls(Color rgbColor)
    {
        // Initialize result
        var hlsColor = new HlsColor();

        // Convert RGB values to percentages
        double r = (double)rgbColor.R / 255;
        var g = (double)rgbColor.G / 255;
        var b = (double)rgbColor.B / 255;
        var a = (double)rgbColor.A / 255;

        // Find min and max RGB values
        var min = Math.Min(r, Math.Min(g, b));
        var max = Math.Max(r, Math.Max(g, b));
        var delta = max - min;

        /* If max and min are equal, that means we are dealing with 
         * a shade of gray. So we set H and S to zero, and L to either
         * max or min (it doesn't matter which), and  then we exit. */

        //Special case: Gray
        if (max == min)
        {
            hlsColor.H = 0;
            hlsColor.S = 0;
            hlsColor.L = max;
            return hlsColor;
        }

        /* If we get to this point, we know we don't have a shade of gray. */

        // Set L
        hlsColor.L = (min + max) / 2;

        // Set S
        if(hlsColor.L < 0.5)
        {
            hlsColor.S = delta / (max + min);
        }
        else
        {
            hlsColor.S = delta / (2.0 - max - min);
        }

        // Set H
        if (r == max) hlsColor.H = (g - b) / delta;
        if (g == max) hlsColor.H = 2.0 + (b - r) / delta;
        if (b == max) hlsColor.H = 4.0 + (r - g) / delta;
        hlsColor.H *= 60;
        if (hlsColor.H < 0) hlsColor.H += 360;

        // Set A
        hlsColor.A = a;

        // Set return value
        return hlsColor;

    }

    /// <summary>
    /// Converts a WPF HSL color to an RGB color
    /// </summary>
    /// <param name="hlsColor">The HSL color to convert.</param>
    /// <returns>An RGB color object equivalent to the HSL color object passed in.</returns>
    static Color HlsToRgb(HlsColor hlsColor)
    {
        // Initialize result
        var rgbColor = new Color();

        /* If S = 0, that means we are dealing with a shade 
         * of gray. So, we set R, G, and B to L and exit. */

        // Special case: Gray
        if (hlsColor.S == 0)
        {
            rgbColor.R = (byte)(hlsColor.L  * 255);
            rgbColor.G = (byte)(hlsColor.L * 255);
            rgbColor.B = (byte)(hlsColor.L * 255);
            rgbColor.A = (byte)(hlsColor.A * 255);
            return rgbColor;
        }

        double t1;
        if (hlsColor.L < 0.5)
        {
            t1 = hlsColor.L*(1.0 + hlsColor.S);
        }
        else
        {
            t1 = hlsColor.L + hlsColor.S - (hlsColor.L * hlsColor.S);
        }

        var t2 = 2.0*hlsColor.L - t1;

        // Convert H from degrees to a percentage
        var h = hlsColor.H / 360;

        // Set colors as percentage values
        var tR = h + (1.0/3.0);
        var r = SetColor(t1, t2, tR);

        var tG = h;
        var g = SetColor(t1, t2, tG);

        var tB = h - (1.0 / 3.0);
        var b = SetColor(t1, t2, tB);

        // Assign colors to Color object
        rgbColor.R = (byte)(r * 255);
        rgbColor.G = (byte)(g * 255);
        rgbColor.B = (byte)(b * 255);
        rgbColor.A = (byte)(hlsColor.A * 255);

        // Set return value
        return rgbColor;
    }

    /// <summary>
    /// Used by the HSL-to-RGB converter.
    /// </summary>
    /// <param name="t1">A temporary variable.</param>
    /// <param name="t2">A temporary variable.</param>
    /// <param name="t3">A temporary variable.</param>
    /// <returns>An RGB color value, in decimal format.</returns>
    private static double SetColor(double t1, double t2, double t3)
    {
        if (t3 < 0) t3 += 1.0;
        if (t3 > 1) t3 -= 1.0;

        double color;
        if (6.0 * t3 < 1)
        {
            color = t2 + (t1 - t2) * 6.0 * t3;
        }
        else if(2.0 * t3 < 1)
        {
            color = t1;
        }
        else if(3.0*t3 < 2)
        {
            color = t2 + (t1 - t2) * ((2.0/3.0) - t3) * 6.0;
        }
        else
        {
            color = t2;
        }

        // Set return value
        return color;
    } 
```

# jquery - 选择框在带有 jquery ui-sortable 的 Mozilla 16.0.1 中不起作用

> ID：12894617
> 
> 赞同：2
> 
> 时间：2012-10-15T11:24:54.590
> 
> 标签：jquery, html, jquery-ui, jquery-ui-sortable

![在此处输入图像描述](../Images/b83867edd9a43212ed18b8451354c02e.png)我有一个可拖动的 jquery ui-sortable 有序**列表**，它工作正常。但我的问题是我在**列表**中有一个选择框，它不起作用，我什至无法从中选择一个值。以下是我的代码.请尽快提出解决方案。提前致谢。

```
<ul class="sortable">
 <li>Item 1</li>
 <li>Item 2</li>  
 <li>Item 4</li> 
 <select>
      <option>A</option>
      <option>c</option>
      <option>d</option>
      <option>e</option>
 </select>      
 <li>Item 5</li>
</ul> 
```

你可以复制上面的 html 在这里试试[http://jsfiddle.net/VPNP4/1/](http://jsfiddle.net/VPNP4/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:28:39.393

以正确的方式格式化 HTML 当前您已将选择框磨损地放在 ul 中，要么将其放在 ul 之外，要么将其放在另一个 li 或同一个 li

尝试关注

```
<ul class="sortable">
 <li>Item 1</li>
 <li>Item 2</li>  
 <li>Item 4
 <select>
      <option>A</option>
      <option>c</option>
      <option>d</option>
      <option>e</option>
 </select> 
</li>      
 <li>Item 5</li>
</ul> 
```

或者

```
<ul class="sortable">
 <li>Item 1</li>
 <li>Item 2</li>  
 <li>Item 4</li>
 <li><select>
      <option>A</option>
      <option>c</option>
      <option>d</option>
      <option>e</option>
 </select> 
</li>      
 <li>Item 5</li>
</ul> 
```

使用以下脚本代码

```
$('.sortable').sortable({
    connectWith: ".sortable",

}); 
```

意味着删除你写的最后一行 [jsfiddle.net/sumit_2201/6Q7LG/](http://jsfiddle.net/sumit_2201/6Q7LG/)

# c# - 测量Parallel.For的执行时间

> ID：12894619
> 
> 赞同：7
> 
> 时间：2012-10-15T11:25:03.943
> 
> 标签：c#, .net

我正在使用 Parallel.For 循环来提高计算的执行速度。

我想测量剩下的计算时间。通常，只需测量每个步骤所需的时间，并通过将步骤时间乘以总步骤数来估计总时间。

例如，如果有 100 个步骤，并且某个步骤需要 5 秒，那么除了总时间约为 500 秒之外，其他步骤也可以。（可以平均几个步骤并不断向用户报告这是我想要做的）。

我能想到的唯一方法是使用外部 for 循环，该循环基本上通过拆分 parallel.for 间隔并测量每个循环来恢复原始方式。

```
for(i;n;i += step)
    Time(Parallel.For(i, i + step - 1, ...)) 
```

一般来说，这不是一个很好的方法，因为一些非常长的步骤或大量的短步骤都会导致计时问题。

有人有想法么？

（请意识到我需要实时估计并行完成所花费的时间，而不是总时间。我想让用户知道执行中还剩多少时间）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T21:16:34.557

这种方法似乎很有效。我们可以通过简单地让每个并行循环增加一个计数器来“线性化”并行 for 循环：

```
Parallel.For(0, n, (i) => { Thread.Sleep(1000); Interlocked.Increment(ref cnt); }); 
```

（注意，感谢 Niclas，这`++`不是原子的，必须使用`lock`or `Interlocked.Increment`）

每个并行运行的循环都会递增`cnt`。效果是`cnt`单调增加到`n`，并且`cnt/n`是 for 完成的百分比。由于没有争用`cnt`，因此不存在并发问题，并且非常快速且非常准确。

`For`我们可以通过简单的计算来测量执行过程中任何时候并行循环的完成百分比`cnt/n`

总计算时间可以很容易地通过将循环开始以来经过的时间除以循环所处的百分比来估算。当每个循环花费大致相同的时间量时，这两个量应该具有大致相同的变化率，并且表现相对良好（也可以平均小波动）。

显然，每个任务越不可预测，剩余计算时间就越不准确。这是意料之中的，一般来说，没有解决方案（这就是为什么它被称为近似值）。我们仍然可以完全准确地获得经过的计算时间或百分比。

“剩余时间”算法的任何估计的基本假设是每个子任务花费大约相同的计算时间（假设一个想要线性结果）。例如，如果我们有一个并行方法，其中 99 个任务非常快，1 个任务非常慢，我们的估计将非常不准确。我们的计数器会很快拉到 99，然后坐在最后一个百分比，直到缓慢的任务完成。我们可以线性插值并进行进一步的估计以获得更平滑的倒计时，但最终会有一个突破点。

以下代码演示了如何有效地测量并行度。注意 100% 的时间是真正的总执行时间，可以作为参考。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Diagnostics;

namespace ParallelForTiming
{
    class Program
    {       
        static void Main(string[] args)
        {
            var sw = new Stopwatch();
            var pct = 0.000001;
            var iter = 20;
            var time = 20 * 1000 / iter;
            var p = new ParallelOptions(); p.MaxDegreeOfParallelism = 4;

            var Done = false;
            Parallel.Invoke(() =>
            {
                sw.Start();
                Parallel.For(0, iter, p, (i) => { Thread.Sleep(time); lock(p) { pct += 1 / (double)iter; }});               
                sw.Stop(); 
                Done = true;

            }, () =>
            {
                while (!Done)
                {
                    Console.WriteLine(Math.Round(pct*100,2) + " : " + ((pct < 0.1) ? "oo" : (sw.ElapsedMilliseconds / pct /1000.0).ToString()));
                    Thread.Sleep(2000);
                }

            }
            );
            Console.WriteLine(Math.Round(pct * 100, 2) + " : " + sw.ElapsedMilliseconds / pct / 1000.0);

            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:32:11.793

这是衡量所有先前完成任务的平均值的可能解决方案。每个任务完成后，`Action<T>`都会调用一个，您可以在其中总结所有时间并将其除以完成的总任务。然而，这只是当前状态，无法预测任何未来的任务/平均值。（正如其他人提到的，这非常困难）

但是：您必须衡量它是否适合您的问题，因为在方法级别声明的变量上都有可能发生锁争用。

```
 static void ComputeParallelForWithTLS()
            {
                var collection = new List<int>() { 1000, 2000, 3000, 4000 }; // values used as sleep parameter
                var sync = new object();
                TimeSpan averageTime = new TimeSpan();
                int amountOfItemsDone = 0; // referenced by the TPL, increment it with lock / interlocked.increment

                Parallel.For(0, collection.Count,
                    () => new TimeSpan(),
                    (i, loopState, tlData) =>
                    {
                        var sw = Stopwatch.StartNew();
                        DoWork(collection, i);
                        sw.Stop();
                        return sw.Elapsed;
                    },
                    threadLocalData =>   // Called each time a task finishes
                    {
                        lock (sync)
                        {
                            averageTime += threadLocalData; // add time used for this task to the total.
                        }
                        Interlocked.Increment(ref amountOfItemsDone); // increment the tasks done
                        Console.WriteLine(averageTime.TotalMilliseconds / amountOfItemsDone + ms."); 
/*print out the average for all done tasks so far. For an estimation, 
multiply with the remaining items.*/
                    });
            }
            static void DoWork(List<int> items, int current)
            {
                System.Threading.Thread.Sleep(items[current]);
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T11:42:37.967

这几乎是不可能回答的。

首先，不清楚所有步骤的作用。有些步骤可能是 I/O 密集型或计算密集型的。

此外，Parallel.For 是一个请求——您不确定您的代码是否会真正并行运行。代码是否真正并行运行取决于环境（线程和内存的可用性）。然后，如果您有依赖 I/O 的并行代码，则一个线程将在等待 I/O 完成时阻塞其他线程。而且您也不知道其他进程在做什么。

这就是为什么预测某件事需要多长时间非常容易出错，实际上，这是一种徒劳的练习。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T11:58:42.620

这个问题很难回答。您提到的使用非常长的步骤或大量非常短的步骤的时间问题可能与您的循环将在并行分区器可以处理的边缘工作有关。

由于默认分区器是非常动态的，而且我们对您的实际问题一无所知，因此没有好的答案可以让您解决手头的问题，同时仍然可以通过动态负载平衡获得并行执行的好处。

如果实现对预计运行时间的可靠估计*非常*重要，也许您可​​以设置一个[自定义分区](http://msdn.microsoft.com/en-us/library/dd997411.aspx)器，然后利用您对分区的了解从一个线程上的几个块推断时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T11:36:28.560

我建议在完成后在每个步骤报告中执行该方法。当然，这对于线程安全来说有点棘手，因此在实现时要记住这一点。这将使您可以跟踪总数中已完成任务的数量，并且还可以（某种程度上）轻松了解每个单独步骤所花费的时间，这对于删除异常值等很有用。

**编辑：**一些代码来展示这个想法

```
Parallel.For(startIdx, endIdx, idx => {
    var sw = Stopwatch.StartNew();
    DoCalculation(idx);
    sw.Stop();
    var dur = sw.Elapsed;
    ReportFinished(idx, dur);
}); 
```

这里的关键是`ReportFinished`它将为您提供有关已完成任务数量以及每个任务持续时间的连续信息。这使您可以通过对此数据进行统计来更好地猜测剩余时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-11T22:10:36.250

在这里，我写了测量时间和速度的课程

```
public static class Counter
{
    private static long _seriesProcessedItems = 0;
    private static long _totalProcessedItems = 0;
    private static TimeSpan _totalTime = TimeSpan.Zero;
    private static DateTime _operationStartTime;
    private static object _lock = new object();
    private static int _numberOfCurrentOperations = 0;

    public static void StartAsyncOperation()
    {
        lock (_lock)
        {
            if (_numberOfCurrentOperations == 0)
            {
                _operationStartTime = DateTime.Now;   
            }

            _numberOfCurrentOperations++;
        }
    }

    public static void EndAsyncOperation(int itemsProcessed)
    {
        lock (_lock)
        {
            _numberOfCurrentOperations--;
            if (_numberOfCurrentOperations < 0) 
                throw new InvalidOperationException("EndAsyncOperation without StartAsyncOperation");

            _seriesProcessedItems +=itemsProcessed;

            if (_numberOfCurrentOperations == 0)
            {
                _totalProcessedItems += _seriesProcessedItems;
                _totalTime += DateTime.Now - _operationStartTime;
                _seriesProcessedItems = 0;
            }
        }
    }

    public static double GetAvgSpeed()
    {
        if (_totalProcessedItems == 0) throw new InvalidOperationException("_totalProcessedItems is zero");
        if (_totalProcessedItems == 0) throw new InvalidOperationException("_totalTime is zero");
        return _totalProcessedItems / (double)_totalTime.TotalMilliseconds;
    }

    public static void Reset()
    {
        _totalProcessedItems = 0;
        _totalTime = TimeSpan.Zero;
    }
} 
```

使用和测试示例：

```
 static void Main(string[] args)
    {
        var st = Stopwatch.StartNew();
        Parallel.For(0, 100, _ =>
        {
            Counter.StartAsyncOperation();
            Thread.Sleep(100);
            Counter.EndAsyncOperation(1);
        });

        st.Stop();
        Console.WriteLine("Speed correct {0}", 100 / (double)st.ElapsedMilliseconds);

        Console.WriteLine("Speed to test {0}", Counter.GetAvgSpeed());
    } 
```

# html - 为什么浏览器视图元素标题标签的格式不正确？

> ID：12894621
> 
> 赞同：0
> 
> 时间：2012-10-15T11:25:09.740
> 
> 标签：html, xhtml

> **可能重复：**
> [img 标题属性显示块而不是外来字符](https://stackoverflow.com/questions/10339146/img-title-attribute-displaying-blocks-instead-of-foreign-characters)

我正在处理一个我必须在元素上设置工具提示才能以中文显示的案例。我已将页面 XHTML 语言属性设置为 zh-CN 和相应的元素标题标签，如下所示：

```
<div class="cleditorButton" title="字体颜色" style="background-color: transparent; background-position: -216px 50%; "></div> 
```

但是当我将鼠标悬停在标题上时，它们没有以正确的格式查看。

![在此处输入图像描述](../Images/6248b17a2c47f97508cf0745a96cf7e7.png)

这是因为我的电脑上没有安装中文字体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:28:03.770

将字符集设置为 utf-8，在您的元数据中会是这样的。

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:07:58.750

您可以参考[此网站](http://www.kavoir.com/2009/01/what-are-the-chinese-or-mandarin-web-safe-fonts.html)以获得更详细的答案

这将解释浏览器视图元素

# gmail - 将 Evernote 笔记导出到 Kindle（通过 Gmail？）

> ID：12894624
> 
> 赞同：2
> 
> 时间：2012-10-15T11:25:32.147
> 
> 标签：gmail, google-apps-script, kindle, evernote

我想将印象笔记中的一个笔记本中的笔记导出到我的 Kindle，主要是这样我就可以在 Kindle 上访问我保存在印象笔记中的食谱，而无需连接到移动印象笔记网站。我希望这些笔记看起来像它们在 Evernote 中或当你通过电子邮件共享它们时的样子（即使用格式，而不仅仅是文本）。一种看起来可行的方法是通过电子邮件分享笔记，然后以某种方式将它们转发到我的 Kindle。但是，仅从 Gmail 自动转发是行不通的，因为 Kindle 不查看电子邮件的内容，只查看附件。我不知道如何才能最好地将电子邮件转换为适合 Kindle 的内容。任何想法都会非常受欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T09:39:05.617

你可以使用这项服务。[en2kindle](http://www.en2kindle.com)，它每天将 Evernote 或 Pokcet 中的项目发送到您的 Kindle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:30:05.557

这是一个关于如何使用 gmail 和 docsList 服务工作的想法。
在此示例中，我阅读了您收件箱中第一个线程的第一封邮件，您当然应该使用某种过滤器来仅获取您想要发送到 Kindle 的线程和邮件，但这是非常常见的 javascript 并且易于设置。 ..

```
function getBodytoAttach(){ // using 1 variable for each state for clarity...
  var firstThread = GmailApp.getInboxThreads(0,1)[0];
  var message = firstThread.getMessages()[0];
  var subject = message.getSubject(); // from that subject you can setup a filter
  var bodystr = message.getBody();//is a string
  var bodydochtml = DocsList.createFile('body.html', bodystr, "text/html");//intermediate doc
  var bodyId=bodydochtml.getId()
  var bodydocpdf = bodydochtml.getAs('application/pdf').getBytes();// get the pdf
  var file_to_send = {fileName: 'body.pdf',content:bodydocpdf, mimeType:'application/pdf'};
  MailApp.sendEmail('theKindleMailAdress', 'convert', 'see attachment', {attachments:[file_to_send]});
} 
```

# c# - 从 DataAccessLayer.cs 检索数据集对象到 gridview 控件

> ID：12894625
> 
> 赞同：0
> 
> 时间：2012-10-15T11:25:32.220
> 
> 标签：c#, asp.net, gridview, dataset

我有一个常规的 aspx.cs 文件，其中包含一个 gridview 控件，然后有一个`DataManager.cs`类对象和一个`DataAccessLayer.cs`类对象（连接到数据库并填充数据集）。

如何将数据集记录从`DataAccessLayer.cs`文件中检索到`DataManager.cs`文件中，然后再到`aspx.cs`文件中（有脑放屁）？

```
eCustomer.GetCustomers(oCustomer);  
gvCustomers.Datasource = dsCustomers  

eCustomer.CustomerManager(oCust);  

eCustomer.CustomerDataAccessLayer(oCust);  
// Dataset object is here// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:42:59.323

这是演示的示例代码。

```
 GridView1.DataSource = MyDataSet;
    //Other option      GridView1.DataSource = MyDataSet.Tables["MyTableName"];
    GridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:44:58.840

您可以使用此代码：

```
GridView1.DataSource = myDataSet.Tables[0];
GridView1.DataBind(); 
```

# android - android - 多个触摸动作

> ID：12894626
> 
> 赞同：0
> 
> 时间：2012-10-15T11:25:32.840
> 
> 标签：android, visibility, swipe, ontouchlistener

我正在尝试从 url 加载图像并通过滑动它们来一张一张地显示。我的刷卡代码运行良好。现在我需要为页面放置页眉和页脚。

页眉和页脚需要在 10 秒内不可见，一旦用户点击屏幕，它必须重新出现，并且在接下来的 10 秒内它必须不可见。我创建了一个处理程序类来使可见和不可见。这两个代码似乎是单独工作的，但是当我一起加入时，滑动没有联系。

在我的布局中，我需要页脚和页眉在图像视图上方，所以我的 xml 文件如下

```
<FrameLayout>
    <ImageView>    </ImageView>
    <RelativeLayout>
       <RelativeLayout
          android:layout_alignParentTop="true">
       </RelativeLayout>
       <RelativeLayout
          android:layout_alignParentBottom="true">
       </RelativeLayout> 
   </RelativeLayout>
</FrameLayout> 
```

我的 onTouch 动作如下

```
public boolean onTouchEvent(MotionEvent event) 
    {
        if (event.getAction() == MotionEvent.ACTION_DOWN)
        {
            System.out.println("Touch Down X:" + event.getX() + " Y:" + event.getY());
            hide_layout.setVisibility(View.VISIBLE);
            return super.onTouchEvent(event);
        }
        else if (event.getAction() == MotionEvent.ACTION_UP)
        {
            System.out.println("Touch Up X:" + event.getX() + " Y:" + event.getY());
            startProgress();
            return super.onTouchEvent(event);
        }
        else if (gestureDetector.onTouchEvent(event))
        {
            return true;
        }
        else
        {
            return false;
        }
    } 
```

startProgress() 是处理程序类，它使相对布局再次不可见

```
public void startProgress()
    {
        Runnable runnable = new Runnable()
        {
            @Override
            public void run()
            {
                try
                {
                    Thread.sleep(2000);
                }
                catch (InterruptedException e)
                {
                    e.printStackTrace();
                }

                handler.post(new Runnable()
                {
                    @Override
                    public void run()
                    {
                        hide_layout.setVisibility(View.INVISIBLE);
                    }
                });
            }
        };
        new Thread(runnable).start();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:47:15.857

您需要提供一些额外的信息才能找到问题所在：

*   在做什么`startProgress()`方法
*   您在页眉和/或页脚中是否有运动事件（或单击）处理

作为一般注意点，请记住，Android 正在向视图层次结构传递运动事件，从最后添加的开始并连续移动，直到消费它（返回 true）或直到到达添加的第一个视图。

所以在你的布局上，由于页脚是最后添加的视图，它将是第一个接收运动事件的，然后是标题，并且只有在它被传递到 imageView 之后，如果之前没有消耗。

# hadoop - 使用 pig 脚本计算字段的不同值的计数

> ID：12894629
> 
> 赞同：7
> 
> 时间：2012-10-15T11:25:40.283
> 
> 标签：hadoop, apache-pig

对于表格的文件

```
A B user1
C D user2
A D user3
A D user1 
```

我想计算字段 3 的不同值的计数，即`count(distinct(user1, user2,user2,user1)) = 3`

我正在使用以下猪脚本执行此操作

```
A =  load 'myTestData' using PigStorage('\t') as (a1,a2,a3); 

user_list = foreach A GENERATE $2;
unique_users = DISTINCT user_list;
unique_users_group = GROUP unique_users ALL;
uu_count = FOREACH unique_users_group GENERATE COUNT(unique_users);
store uu_count into 'output'; 
```

有没有更好的方法来计算字段的不同值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-05T00:40:59.653

执行此操作的最新方法：

```
user_data = LOAD 'myTestData' USING PigStorage('\t') AS (a1,a2,a3);
users = FOREACH user_data GENERATE a3;
uniq_users = DISTINCT users;
grouped_users = GROUP uniq_users ALL;
uniq_user_count = FOREACH grouped_users GENERATE COUNT(uniq_users);
DUMP uniq_user_count; 
```

这会将值保留`(3)`在您的日志中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T15:53:08.680

我这里有一个更简洁的。您可能想检查哪个运行得更快。

```
A =  LOAD 'myTestData' USING PigStorage('\t') AS (a1,a2,a3);
unique_users_group = GROUP A ALL;
uu_count = FOREACH unique_users_group {user = A.a2; uniq = distinct user; GENERATE COUNT(uniq);};
STORE uu_count INTO 'output'; 
```

# jquery - 使用 Fancybox 未显示背景

> ID：12894631
> 
> 赞同：0
> 
> 时间：2012-10-15T11:25:52.720
> 
> 标签：jquery, fancybox

嗨，我在测试区有这个网站。

[http://newsite.carpetandvinylshowroom.co.uk/](http://newsite.carpetandvinylshowroom.co.uk/)

好的，所以在主页上，我们有最新的项目，它们弹出了一个花式框。但是没有背景显示

但如果你去

[http://newsite.carpetandvinylshowroom.co.uk/services/quality-carpets](http://newsite.carpetandvinylshowroom.co.uk/services/quality-carpets)

它是相同的脚本相同的 css，没有什么不同，但这个页面工作正常。我的代码非常标准：

```
$(".fancybox").fancybox({
        openEffect  : 'elastic',
        closeEffect : 'elastic',
        helpers : {
            title : {
                type : 'inside'
        }
    }
}); 
```

对此的任何帮助将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:52:10.103

Fancybox 通过向`div`带有 ID 的页面添加 a 并相应地对其`fancybox-overlay`进行样式来进行覆盖。如果您查看您的地毯页面（使用 Firebug/chrome 开发工具等），`div`则正在添加。如果您查看您的主页，`div`也会添加 。它们之间的区别在于您的主页上，不透明度设置为 0（即什么都没有）。在您的地毯页面上，它设置为 0.8。如果您使用 Firebug 更改不透明度，您的主页看起来应该是正常的。

问题是什么改变了这个元素的不透明度？尝试在调用中手动指定所需的不透明度`fancybox`

```
$(".fancybox").fancybox({
    helpers : {
        overlay : {
            css : {
                'background' : 'rgba(1, 1, 1, 0.8)',
            }
        }
    }
}; 
```

如果这无济于事，请尝试查看您的主页代码，了解可能影响元素不透明度并禁用它们的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:56:01.627

我注意到在您的主页中，fancybox 包装器的不透明度为 0，而在此页面[http://newsite.carpetandvinylshowroom.co.uk/services/quality-carpets](http://newsite.carpetandvinylshowroom.co.uk/services/quality-carpets)中，如果您想覆盖 0 的不透明度，则不透明度为 0.8，那么您可以把它放在你的主 css 中，以使用 fancybox 来影响你的所有页面。

```
#fancybox-overlay{ opacity:0.8 !important; } 
```

# svn - 关闭/放弃 SVN 上的项目/分支策略？

> ID：12894633
> 
> 赞同：1
> 
> 时间：2012-10-15T11:25:55.900
> 
> 标签：svn, version-control, tortoisesvn, repository, workflow

我想知道当项目或分支完成（永远不会再更改）或被放弃时，推荐的策略是什么。

如果是项目，我应该：

*   保持原状
*   有一个存储库根文件夹，所有项目在完成/放弃时都会移动到其中
*   只需将文件夹重命名为“CLOSED - 项目名称”
*   将其移至包含所有已关​​闭项目的新存储库（我认为这不是一个好主意，因为我会丢失所有历史记录）
*   另一个解决方案？

如果是分支机构，我应该：

*   保持原状
*   将其移动到名为 CLOSED 或 ABANDONED 的分支内的文件夹中
*   将分支重命名为“已关闭 - 分支名称”
*   另一个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:10:05.693

You can just delete it. All the history will be retained inside the repository - the repository (almost) never forgets.

You can access it using the command line tools by specifying a [peg revision](http://svnbook.red-bean.com/en/1.7/svn.advanced.pegrevs.html):

```
svn command item@PEG-REV 
```

In [TortoiseSVN](http://tortoisesvn.net/) you can go back in time by setting the peg revision using this button:

![Repo-Browser](../Images/a60349970e3712de0e9439a39d221d2b.png)

If you don't know the correct peg revision, use the log to find it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:38:46.790

我不喜欢从 Subversion 中删除旧项目。尽管很多人说它们将永远存在于历史中，但事实是它确实无法被发现，因为您必须开始随机选择过去的日期才能找出项目在哪里以及何时被删除。如果您不知道要查找的确切名称，那么在 Subversion 中查找已删除的项目真的很重要。

我更喜欢在 SVN 中创建名为“存档”的顶级目录的不同策略。任何旧项目都移到那里，这样您就保留了旧项目不再出现在主干中的优势，但是如果您需要查阅旧项目的源代码，那么很容易找到，并且它将旧的已失效项目保留在一个地方。

在我的情况下，存储库结构是这样的：

```
/trunk
/tags
/branches
/archive
  /projects 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:16:01.563

我建议使用适当的标记方法来跟踪最新的项目/分支状态。即使分支历史记录在被删除后保存在存储库中，有时也很难（或者只是需要很长时间）使用`peg revisions`.

至于我，我使用细粒度标记方法，可以通过下图来说明（[在这里](http://altern.kiev.ua/images/scm/branches_naming_A3.en.v1.0.0.jpg)你可以找到代表相同原理的更详细的图）：

![标记方法](../Images/957ee5b5b58b11894285e350b322a908.png)

正如您所看到的，它使用了构建存储库的特定约定。标签目录将有以下子目录：

```
/tags
    /builds
        /PA
        /A
        /B
    /releases
        /AR
        /BR
        /RC
        /ST 
```

`PA`表示**pre-alpha** `A` 表示**alpha** `B` 表示**beta** `AR`表示**alpha-release** `BR`表示**beta-release** `RC`表示**候选版本** `ST`表示**稳定**

按照所描述的约定，您的存储库中将具有特定的目录结构：

```
/tags
        /builds
            /PA
                /1.x.0
                /1.x.3
                /2.x.0
            /A
                /1.x.1
                /1.x.4
                /2.x.1
            /B
                /1.x.2
                /1.x.5
             -> /2.x.2 <-
        /releases
            /AR
                /1.0.0
            /BR
                /1.0.1
            /RC
                /1.0.2
                /1.0.3
            /ST
             -> /1.0.4 <- 
```

预计在您删除分支之前，您在相应的目录中创建标签。然后，您可以轻松地在例如目录`tags/builds/B`或`tags/releases/ST`目录中找到已删除分支的最新状态。

# android - 将所有字符串存储到文件中

> ID：12894640
> 
> 赞同：0
> 
> 时间：2012-10-15T11:26:10.790
> 
> 标签：android, ios, objective-c

> **可能重复：**
> [相当于 iOS 中的 R](https://stackoverflow.com/questions/7082336/equivalent-to-r-in-ios)

我正在寻找类似于 android 中用于 iphone 编程的“string.xml”文件的东西。

在 android 中，我将所有字符串存储到此文件中，并使用以下代码使用它们：

```
getString(R.string.make) 
```

它存在于objective-c中吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:34:07.337

getString 和 R 文件是 Android 框架的一部分（不是 Java 语言），不，Objective-C 语言也没有。

但是，iOS（框架）提供`NSLocalizedString`的有点相似，因为它允许您拥有多个版本的字符串以用于本地化目的。

有关详细信息，请参阅[字符串资源](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Strings/Strings.html)。

# ruby - 短路 (||=) 运算符的一些疑问

> ID：12894644
> 
> 赞同：0
> 
> 时间：2012-10-15T11:26:27.230
> 
> 标签：ruby, operators

我注意到`||=`以下一些有趣的用法 -

### 代码 1

```
array_1 ||= begin
    (1..5).to_a.map {|el| el*10}
end
puts array_1.to_s # [10,20,30,40,50] 
```

所以我执行了它的以下修改版本 -

### 代码 2

```
array_2 ||= def some_method
    (1..5).to_a.map {|el| el*10}
end
puts array_2 # prints nothing
puts array_2.class # NilClass
puts some_method.to_s # [10,20,30,40,50] 
```

1.  为什么会`array_2`被初始化为`nil`？
2.  是否可以`some_method`使用`array_2`对象调用？如何？

### 更新

这就是我对问题 2 所做的

```
array_2 ||= "We've got #{def some_method;(1..5).to_a.map {|el| el*10};end;array_2.send(:some_method)}"
puts array_2 # We've got [10, 20, 30, 40, 50] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:41:59.600

方法定义表达式 ( ) 的返回值`def`是实现定义的。大多数 Ruby 实现只是`nil`从`def`表达式返回，但例如，Rubinius 返回包装在`CompiledMethod`对象中的方法的编译代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:27:41.587

当您声明任何方法时，它只会返回`nil`，但是当您调用任何方法时，它将返回该方法中最后一行 return 的 o/p，除非您使用 return 关键字。

以下应该对你有用

```
def some_method
    return (1..5).to_a.map {|el| el*10}
end

array_2 ||=some_method 
```

# python - 如何使用python与命令行程序进行通信？

> ID：12894651
> 
> 赞同：1
> 
> 时间：2012-10-15T11:26:41.237
> 
> 标签：python, windows, cmd, subprocess, communicate

```
import subprocess
import sys

proc = subprocess.Popen(["program.exe"], stdin=subprocess.PIPE) #the cmd program opens
proc.communicate(input="filename.txt") #here the filename should be entered (runs)
#then the program asks to enter a number:
proc.communicate(input="1") #(the cmd stops here and nothing is passed)
proc.communicate(input="2") # (same not passing anything) 
```

我如何使用 python 传递和与 cmd 通信。

谢谢。（使用windows平台）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T11:28:31.583

上的[文档`communicate()`](http://docs.python.org/py3k/library/subprocess.html#subprocess.Popen.communicate)对此进行了解释：

> 与进程交互：将数据发送到标准输入。从 stdout 和 stderr 读取数据，直到到达文件结尾。等待进程终止。

`communicate()`一旦输入被发送就阻塞，直到程序完成执行。在您的示例中，程序在您 send 之后等待更多输入`"1"`，但 Python 等待它在到达下一行之前退出，这意味着整个事情都死锁了。

如果您想互换地读取和写入很多内容，请[创建管道](https://stackoverflow.com/questions/874815/how-do-i-get-real-time-information-back-from-a-subprocess-popen-in-python-2-5)到`stdin`/`stdout`并写入/读取到/从它们。

# matlab - Matlab - 如何制作自定义图例

> ID：12894652
> 
> 赞同：10
> 
> 时间：2012-10-15T11:26:47.757
> 
> 标签：matlab, legend

我有以下图片：

![在此处输入图像描述](../Images/aa124aa36fe57f951e9a8593c96ea8db.png)

我想为它创造一个传奇。基本上，我想为每种类型的矩形制作一个图例。在图例框中，我想根据它标记的主体类型标记每条颜色线：

*   绿线：头部
*   黄线：躯干
*   紫线：右臂
*   青色线：左臂
*   红线：左腿
*   蓝线：右腿

这基本上是自定义的，因为我有更多的每种类型的矩形。如何制作自定义图例并将其附加到绘制此图片的图形上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T12:03:04.590

有两种方法可以解决这个问题。您可以创建正方形，然后将它们分配给 hggroup。这样你就没有每种颜色的多个项目。像这样的东西：

```
hold on
for ii = 1:4
    hb(ii) = plot(rand(1,2), rand(1,2),'color','r'); 
end

hg = hggroup;
set(hb,'Parent',hg) 
set(hg,'Displayname','Legs')

legend(hg) 
```

或者您可以创建虚拟对象，如下所示：

```
hold on
for ii = 1:4
    hb(ii) = plot(rand(1,2), rand(1,2),'color','r'); 
end

p = plot([],[],'r');

legend(p,'Legs') 
```

前者更优雅一些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-02T11:22:51.583

我想添加到 dvreed77 的关于使用 hggroup 的答案中，为了干净的图例使用，我还需要设置“IconDisplayStyle”（Matlab R2014a），这样：

```
%4 kinds of lines:
n_areas = 4;
n_lines = 10;

%use built-in color map
cmap = hsv(n_areas);

%plot lines and generate handle vectors
h_fig = figure;
hold on
h_lines = zeros(1,n_lines);

for l = 1:n_areas

  for k = 1:n_lines
    h_lines(k) = plot(rand(1,2), rand(1,2),'Color',cmap(l,:));
  end

  %Create hggroup and set 'icondistplaystyle' to on for legend
  curPlotSet = hggroup;
  set(h_lines,'Parent',curPlotSet);
  set(get(get(curPlotSet,'Annotation'),'LegendInformation'),...
      'IconDisplayStyle','on');
end

%Now manually define legend label
legend('heads','legs','hands','feet') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T11:32:21.080

我能想到的最简单的方法是首先为每种类型绘制一个矩形，然后为唯一的矩形构造一个图例。像这样：

```
figure;
hold on;

% unique rectangles
plot(rand(1, 10), 'b');
plot(rand(1, 10), 'g');

% the rest
plot(rand(1, 10), 'b');
plot(rand(1, 10), 'g');

% use normal legend with only as many entries as there are unique rectangles
legend('Blue', 'Green'); 
```

您将有许多相同颜色的线条，但只有独特颜色的图例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-30T02:09:24.177

只需在情节外绘制图例点：

```
figure;
plot(-1,-1,'gs',-1,-1,'b^',-1,-1,'ro');
legend('x1','x2','x3','Location','NorthWest');
xlim([0,1]); ylim([0,1]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-17T00:31:23.353

为了控制图例条目的外观，绘制具有值的点，`NaN`然后将返回的对象`plot`和标签数组传递给`legend`函数（`NaN`点在图中不可见，但出现在图例中）。

```
colors = ["red", "blue"];
labels = ["this is red", "this is blue"];

% We 'plot' a invisible dummy point (NaN values are not visible in plots), 
% which provides the line and marker appearance for the corresponding legend entry.
p1 = plot(nan, nan, colors(1));
hold on 
p2 = plot(nan, nan, colors(2));

% Plot the actual plots. You can change the order of the next two function calls 
% without affecting the legend.
plot([0, 1], [0, 1], colors(1));
plot([0, 1], [1, 0], colors(2)); 

legend([p1, p2], labels) 
```

如果调用时的绘图`[p1, p2]`不在当前图形`legend([p1, p2], labels)`中，则会引发以下错误：

```
Invalid argument. Type 'help legend' for more information. 
```

您可以使用以下方式过滤不在当前图中的图：

```
plots_in_figure = findall(gcf,'Type','Line');
plots_for_legend_indices = ismember([p1, p2],  plots_in_figure);
plots_for_this_legend = this.plots_for_legend(plots_for_legend_indices);

legend(plots_for_this_legend, labels) 
```

# python - django 测试数据库不是用 utf8 创建的

> ID：12894658
> 
> 赞同：17
> 
> 时间：2012-10-15T11:27:03.707
> 
> 标签：python, mysql, django, testing, utf-8

我`utf-8`对 mysql 数据库使用一般不区分大小写，但`django`创建了一个测试数据库`latin collation`

我设置了这个：

```
TEST_CHARSET="utf8_general_ci"

TEST_COLLATION="utf8_general_ci" 
```

在设置文件中，但无济于事。

我还应该做什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-08-09T11:14:39.513

`TEST_CHARSET`和在 Django 1.8 中`TEST_COLLATION`被重命名为`CHARSET`和`COLLATION`移动到`TEST`字典：

```
DATABASES = {
    ...
    'TEST': {
        'CHARSET': 'utf8',
        'COLLATION': 'utf8_general_ci',
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-22T20:30:03.880

在设置中添加：

```
DATABASES = {
    'default': {
        ...
        'TEST_CHARSET': "utf8",
        'TEST_COLLATION': "utf8_general_ci",
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-10-28T15:27:25.900

请在此处查看：[https ://docs.djangoproject.com/en/1.11/ref/settings/#std:setting-DATABASE-TEST](https://docs.djangoproject.com/en/1.11/ref/settings/#std:setting-DATABASE-TEST)

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': <db_name>,
        'USER': <user>,
        'PASSWORD': <password>,
        'HOST': <host>,
        'PORT': <port>,
        'TEST': {
            'NAME': <test_db_name>,
            'CHARSET': 'utf8',
            'COLLATION': 'utf8_general_ci',
        },
    },
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T14:43:42.167

我遇到了同样的问题，花了几个小时才发现它，直到注意到

```
TEST_CHARSET
TEST_COLLATION 
```

应该是数据库的一部分，而不是 settings.py。很容易把它们混在一起...

[https://docs.djangoproject.com/en/dev/ref/settings/#testing](https://docs.djangoproject.com/en/dev/ref/settings/#testing)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-05T19:51:19.680

正如其他人指出的那样，您需要这样的东西来创建数据库

```
DATABASES = {
    ...
    'TEST': {
        'CHARSET': 'utf8mb4',
        'COLLATION': 'utf8mb4_unicode_ci',
    }
} 
```

但是您还需要确保您也有类似的东西，以确保您的测试使用适当的字符集与数据库通信。

```
DATABASES = {
    ...
    'OPTIONS': {
        'charset': 'utf8mb4'
     }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-15T14:36:29.627

看看这里的设置文件示例：[https ://docs.djangoproject.com/en/dev/ref/databases/#connecting-to-the-database](https://docs.djangoproject.com/en/dev/ref/databases/#connecting-to-the-database)

# html - CSS中的标签功能？

> ID：12894659
> 
> 赞同：-1
> 
> 时间：2012-10-15T11:27:18.583
> 
> 标签：html, css, tabs

我在页面顶部包含以下代码和 js 文件。

> **HTML**

```
<ul class="tabs">
 <li><a href="#tabr1">Tab1</a></li>
 <li><a href="#tabr2">Tab2</a></li>
 <li><a href="#tabr3">Tab3</a></li>
 </ul>

   <div id="tabr1" class="tab-content">Tab1</div>
 <div id="tabr2" class="tab-content">Tab2</div>
<div id="tabr3" class="tab-content">Tab3</div> 
```

> **CSS**

```
 ul.tabs{
margin:10px 0 -1px 0;
 padding:0;
width:100%;
 border-bottom:1px solid #e5e5e5;
 float:left;
  }

  ul.tabs li{
list-style-type:none;
margin:0 2px 0 0;
padding:0;
display:inline-block;
*display:inline;/*IE ONLY*/
position:relative;
top:0;
left:0;
*top:1px;/*IE 7 ONLY*/
zoom:1;
}

ul.tabs li a{
text-decoration:none;
color:#666;
display:inline-block;
padding:9px 15px;
position: relative;
top:0;
left:0;
line-height:100%;
background:#f5f5f5;
box-shadow: inset 0px -3px 3px rgba(0,0,0,0.03);
border:1px solid #e5e5e5;
border-bottom:0;
font-size:0.9em;
zoom:1;
}

ul.tabs li a:hover{
background:#fff;
}

ul.tabs li.current a{
position:relative;
top:1px;
left:0;
background:#fff;
box-shadow: none;
color:#222;
}

.tab-content{
border:1px solid #efefef;
border-left:1px solid #e5e5e5;
clear:both;
padding:20px;
margin:0 0 40px 0;
} 
```

当我在我的程序中使用此代码时，所有选项卡都在同一页面中组装。当标签处于活动状态时，我无法隐藏其他标签。

这将是什么原因

但我在这个[网站上](http://www.99lime.com/elements/)检查了这个。

如果有人有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:46:35.190

如果您不想使用 js 文件，那么这里是纯 CSS 选项卡

**HTML**

```
<div class="tabs">

       <div class="tab">
           <input type="radio" id="tab-1" name="tab-group-1" checked>
           <label for="tab-1">Tab One</label>

           <div class="content">
               <p>Stuff for Tab One</p>
           </div> 
       </div>

       <div class="tab">
           <input type="radio" id="tab-2" name="tab-group-1">
           <label for="tab-2">Tab Two</label>

           <div class="content">
               <p>Stuff for Tab Two</p>

               <img src="http://placekitten.com/200/100">
           </div> 
       </div>

        <div class="tab">
           <input type="radio" id="tab-3" name="tab-group-1">
           <label for="tab-3">Tab Three</label>

           <div class="content">
               <p>Stuff for Tab Three</p>

               <img src="http://placedog.com/200/100">
           </div> 
       </div> 
```

**CSS**

```
 .tabs {
  position: relative;   
  min-height: 200px; /* This part sucks */
  clear: both;
  margin: 25px 0;
}
.tab {
  float: left;
}
.tab label {
  background: #eee; 
  padding: 10px; 
  border: 1px solid #ccc; 
  margin-left: -1px; 
  position: relative;
  left: 1px; cursor:pointer
}
.tab [type=radio] {
  display: none;   
}
.content {
  position: absolute;
  top: 28px;
  left: 0;
  background: white;
  right: 0;
  bottom: 0;
  padding: 20px;
  border: 1px solid #ccc; 

  overflow: hidden;
}
.content > * {
  opacity: 0;

  -webkit-transform: translate3d(0, 0, 0);

  -webkit-transform: translateX(-100%);
  -moz-transform:    translateX(-100%);
  -ms-transform:     translateX(-100%);
  -o-transform:      translateX(-100%);

  -webkit-transition: all 0.6s ease;
  -moz-transition:    all 0.6s ease;
  -ms-transition:     all 0.6s ease;
  -o-transition:      all 0.6s ease;
}
[type=radio]:checked ~ label {
  background: white;
  border-bottom: 1px solid white;
  z-index: 2;
}
[type=radio]:checked ~ label ~ .content {
  z-index: 1;
}
[type=radio]:checked ~ label ~ .content > * {
  opacity: 1;

  -webkit-transform: translateX(0);
  -moz-transform:    translateX(0);
  -ms-transform:     translateX(0);
  -o-transform:      translateX(0);
} 
```

**[现场演示](http://jsfiddle.net/QdhtG/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:31:13.480

您已经添加了代码，但您是否还在 HTML 的标题部分（.js 文件）中添加了 jQuery 链接。

您需要添加 <script src="/site/templates/js/kickstart.js" type="text/javascript"> 和其他 js 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T06:20:08.487

**[小提琴](http://jsfiddle.net/QdhtG/)**

这可以帮助您以多种方式解决问题。

```
 <div class="tab">
       <input type="radio" id="tab-1" name="tab-group-1" checked>
       <label for="tab-1">Tab One</label>

       <div class="content">
           <p>Stuff for Tab One</p>
       </div> 
   </div>

   <div class="tab">
       <input type="radio" id="tab-2" name="tab-group-1">
       <label for="tab-2">Tab Two</label>

       <div class="content">
           <p>Stuff for Tab Two</p>

           <img src="http://placekitten.com/200/100">
       </div> 
   </div>

    <div class="tab">
       <input type="radio" id="tab-3" name="tab-group-1">
       <label for="tab-3">Tab Three</label>

       <div class="content">
           <p>Stuff for Tab Three</p>

           <img src="http://placedog.com/200/100">
       </div> 
   </div> 
```

# batch-file - 启动 Play 应用程序并关闭窗口

> ID：12894668
> 
> 赞同：2
> 
> 时间：2012-10-15T11:27:38.013
> 
> 标签：batch-file, playframework, playframework-1.x

我在 Windows 7 机器上有一个播放应用程序，我想通过双击批处理文件来启动它。

此批处理文件启动服务。调用 play 应用程序以生产模式运行，等待 5 秒并打开具有指定 url 的浏览器。

因此我使用了以下脚本：

```
call net start service1
CALL "D:\play-1.2.5\play.bat" start --%%%%prod -Dprecompiled=true
TIMEOUT /T 4
call "C:\Program Files (x86)\Mozilla Firefox\firefox.exe" localhost:9000
exit 
```

现在，当我启动批处理文件时，窗口打开并执行所有命令。可悲的是，Play 仍在将他的输出写入 cmd 并且窗口并没有消失。如果我手动关闭窗口，播放将停止执行。

如果我从 cmd 使用“播放开始”运行播放，播放将在后台开始，一切都很好。即使我关闭窗口，播放仍然运行。

当我用我的批处理文件启动应用程序时，我希望有这种行为。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:00:03.147

我不知道 Play 是什么，所以我只能猜测 :) 但尝试使用不带`call`'s 的批次，因为我认为它们没有必要，而且你永远不知道，可能会解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T23:26:43.457

1）您会看到 Play 的输出，因为仅重定向 system.out 但将 system.err 写入同一控制台。

2）我也有这个问题，正在寻找解决方案。作为一种解决方法，您可以尝试使用一些 Java Wrapper 并安装您的 Play！应用程序作为 Windows 服务。

3）玩！应用程序可以通过 Ant 任务启动。我还没试过这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:23:15.517

如果您使用的是类似 linux 的环境，我建议您使用 'nohup' 命令和最后一个 '&' 符号。然而，不幸的是，据我所知，在 Windows 上并没有直接等同于漂亮的“nohup”命令。所以，我能想到的是，您可以创建一个使用[CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)命令的小型 win api 应用程序，并在创建进程后为其提供所需的参数以隐藏命令行窗口。还有其他进程创建功能，例如[WinExec](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687393%28v=vs.85%29.aspx)，您可以使用它们来隐藏命令行。

# android - 列表视图中的箭头图标

> ID：12894669
> 
> 赞同：0
> 
> 时间：2012-10-15T11:27:38.460
> 
> 标签：android, android-layout, android-intent

我是 android 的新手。我正在使用包含图像和 textview 的列表视图。我想在每一行中添加箭头图标。我正在尝试但我无法做到这一点。我该怎么做？代码如下。非常感谢任何帮助。

CategoryActivity.java

```
public class CategoryActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.category1);

    ImageView in1 = (ImageView) findViewById(R.id.glrrr1);
     in1.setOnClickListener(new View.OnClickListener() {
         public void onClick(View view) {
             Intent myIntent = new Intent(view.getContext(),ImageSwitcherA.class);
             startActivityForResult(myIntent, 0);
         }

     });

     ImageView in2 = (ImageView) findViewById(R.id.grid1);
    in2.setOnClickListener(new View.OnClickListener() {
         public void onClick(View view) {
             Intent myIntent1 = new Intent(view.getContext(),RingGridView.class);
             startActivityForResult(myIntent1, 0);
         }

     });

    ListView view = (ListView) findViewById(R.id.list);
    //instance of custom adapter
    view.setAdapter(new CustomImageListAapter(this));

    view.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int     position, long id) {

           //Intent i = new    Intent(AndroidGridLayoutActivity.this,FullImageActivity.class);
               //Bundle bundle = new Bundle();
              // bundle.putInt("operation", position);
               //i.putExtras(bundle);
              //startActivity(i);

               if(position ==0)
               {    
                     Intent ii = new Intent(CategoryActivity.this,Ring1Full.class);
                    //Bundle bundle = new Bundle();
                   //bundle.putInt("operation", position);
                    ii.putExtra("operation", position);
                     startActivity(ii);

               }

               if(position ==1)
               {    
                     Intent in = new Intent(CategoryActivity.this,Ring2Full.class);
                    //Bundle bundle = new Bundle();
                  // bundle.putInt("operation", position);
                    in.putExtra("operation", position);
                     startActivity(in);

               }
               if(position ==2)
               {    
                     Intent inn = new Intent(CategoryActivity.this,Ring3Full.class);
                    //Bundle bundle = new Bundle();
                   //bundle.putInt("operation", position);
                    inn.putExtra("operation", position);
                     startActivity(inn);

               }
               if(position ==3)
               {    
                     Intent innm = new Intent(CategoryActivity.this,Ring4Full.class);
                    //Bundle bundle = new Bundle();
                   //bundle.putInt("operation", position);
                    innm.putExtra("operation", position);
                     startActivity(innm);

               }
               if(position ==4)
               {    
                     Intent intt = new Intent(CategoryActivity.this,Ring5Full.class);
                    //Bundle bundle = new Bundle();
                  // bundle.putInt("operation", position);
                    intt.putExtra("operation", position);
                     startActivity(intt);

               }
               if(position ==5)
               {    
                     Intent intt5 = new Intent(CategoryActivity.this,Ring6Full.class);
                    //Bundle bundle = new Bundle();
                   //bundle.putInt("operation", position);
                    intt5.putExtra("operation", position);
                     startActivity(intt5);

               }
               if(position == 6)
               {

                          Intent buset= new Intent(CategoryActivity.this,Ring7Full.class);
                         // Bundle bundle = new Bundle();
                       //bundle.putInt("operation", position);
                       buset.putExtra("operation", position);   
                          startActivity(buset);

               }

               if(position == 7)
               {

                          Intent buses= new Intent(CategoryActivity.this,Ring8Full.class);
                          //Bundle bundle = new Bundle();
                       //bundle.putInt("operation", position);
                       buses.putExtra("operation", position);   
                          startActivity(buses);

   }
               if(position == 8)
               {

                          Intent busez= new Intent(CategoryActivity.this,Ring9Full.class);
                          //Bundle bundle = new Bundle();
                       //bundle.putInt("operation", position);
                       busez.putExtra("operation", position);   
                          startActivity(busez);

               }
               if(position == 9)
               {

                          Intent buseh= new Intent(CategoryActivity.this,Ring10Full.class);
                          //Bundle bundle = new Bundle();
                       //bundle.putInt("operation", position);
                       buseh.putExtra("operation", position);   
                          startActivity(buseh);

               }
               if(position == 10)
               {

                          Intent busek1= new Intent(CategoryActivity.this,Ring11Full.class);
                          //Bundle bundle = new Bundle();
                      //bundle.putInt("operation", position);
                       busek1.putExtra("operation", position);   
                          startActivity(busek1);

               }

               if(position == 11)
               {

                          Intent busek2= new Intent(CategoryActivity.this,Ring12Full.class);
                          //Bundle bundle = new Bundle();
                       //bundle.putInt("operation", position);
                       busek2.putExtra("operation", position);   
                          startActivity(busek2);

               }
               if(position == 12)
               {

                          Intent busek3= new Intent(CategoryActivity.this,Ring13Full.class);
                          //Bundle bundle = new Bundle();
                      // bundle.putInt("operation", position);
                       busek3.putExtra("operation", position);   
                          startActivity(busek3);

               }
               if(position == 13)
               {

                          Intent busek4= new Intent(CategoryActivity.this,Ring14Full.class);
                          //Bundle bundle = new Bundle();
                      // bundle.putInt("operation", position);
                       busek4.putExtra("operation", position);   
                          startActivity(busek4);

               }
               if(position == 14)
               {

                          Intent busek5= new Intent(CategoryActivity.this,Ring16Full.class);
                         // Bundle bundle = new Bundle();
                      // bundle.putInt("operation", position);
                       busek5.putExtra("operation", position);   
                          startActivity(busek5);

               }
               if(position == 15)
               {

                          Intent busek6= new Intent(CategoryActivity.this,Ring16Full.class);
                          //Bundle bundle = new Bundle();
                       //bundle.putInt("operation", position);
                       busek6.putExtra("operation", position);   
                          startActivity(busek6);

               }
               if(position == 16)
               {

                          Intent busek7= new Intent(CategoryActivity.this,Ring17Full.class);
                         // Bundle bundle = new Bundle();
                       //bundle.putInt("operation", position);
                       busek7.putExtra("operation", position);   
                          startActivity(busek7);

               }
               if(position == 17)
               {

                          Intent busek8= new Intent(CategoryActivity.this,Ring18Full.class);
                          //Bundle bundle = new Bundle();
                      //bundle.putInt("operation", position);
                       busek8.putExtra("operation", position);   
                          startActivity(busek8);

               }

           }
        });}} 
```

CustomImageListAapter.java

```
 public class CustomImageListAapter extends BaseAdapter {

private int[] images = {
        R.drawable.rrr1,  
        R.drawable.rrr2,  
        R.drawable.rrr3,  
        R.drawable.rrr4,  
        R.drawable.rrr5, 
        R.drawable.rrr6, 
        R.drawable.rrr7, 
        R.drawable.rrr8,
        R.drawable.rrr18, 
        R.drawable.rrr10,
        R.drawable.rrr11, 
        R.drawable.rrr12,
        R.drawable.rrr13,
        R.drawable.rrr14,       
        R.drawable.rrr15,
        R.drawable.rrr16,
        R.drawable.rrr17, 
        R.drawable.rrr18, 

};

private String[] imageDesc = { "Diamond Ring", "Silver Ring",
        "Gold Ring","Antique Ring","Pearl Ring","Beats Ring","Diamond Ring","Stone Ring","Antique Ring","Diamond Ring", "Silver Ring",
        "Gold Ring","Antique Ring","Pearl Ring","Beats Ring","Diamond Ring","Stone Ring","Antique Ring"};
        Context ctx = null;

public CustomImageListAapter(Context context) {
    this.ctx = context;
}

public int getCount() {
    return images.length;
}

public Object getItem(int arg0) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

public View getView(int arg0, View arg1, ViewGroup arg2) {

    ImageView imgView = new ImageView(this.ctx);
    imgView.setScaleType(ScaleType.FIT_CENTER);
    imgView.setPadding(8, 8, 8, 8);
    imgView.setImageResource(images[arg0]);
    imgView.setAdjustViewBounds(Boolean.TRUE);
    imgView.setContentDescription(imageDesc[arg0]);
    imgView.setMaxHeight(200);
    imgView.setMaxWidth(200);

    TextView tv = new TextView(this.ctx);
    tv.setText(imageDesc[arg0]);
    tv.setMaxHeight(100);
    tv.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
    tv.setGravity(Gravity.CENTER);

    LinearLayout layoutView = new LinearLayout(this.ctx);
    layoutView.setOrientation(LinearLayout.HORIZONTAL);
    LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(150, 150);
    layoutView.addView(imgView, params1);
    LinearLayout.LayoutParams params2 = new LinearLayout.LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    layoutView.addView(tv, params2);

    return layoutView;
} 
```

}

xml:

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
 android:id="@+id/background"
 android:gravity="center_vertical"
android:orientation="vertical" >

<ListView xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="fill_parent"

android:layout_height="fill_parent"

android:id="@+id/list"

android:background="@drawable/bkg">

</ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:40:16.530

```
LinearLayout layoutView = new LinearLayout(this.ctx);
    layoutView.setOrientation(LinearLayout.HORIZONTAL);
    LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(150, 150);
    layoutView.addView(imgView, params1);
    LinearLayout.LayoutParams params2 = new LinearLayout.LayoutParams(
                   150 ,LayoutParams.WRAP_CONTENT);
    layoutView.addView(tv, params2);
ImageView i1= new ImageView(this.ctx);
         i1.setImageResource(R.drawable.ic_launcher);
layoutView.addView(i1);
return layoutView; 
```

尝试一个获取视图将一个图像视图添加到该布局（布局视图）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:55:02.857

首先，您必须为`ListView`. 以下代码`ImageView`在左侧有一个，然后是标题和副标题，右侧有一个箭头图标。

**列表行.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5sp" > 

    <!--  Left side Thumbnail image -->
    <LinearLayout android:id="@+id/thumbnail" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5sp"       
        android:layout_alignParentLeft="true"
        android:background="@drawable/image_bg" 
        android:layout_marginRight="5sp">

        <ImageView
            android:id="@+id/list_image"   
             android:layout_width="50sp"
            android:layout_height="50sp"
            />

    </LinearLayout>

    <!-- Title-->
    <TextView
        android:id="@+id/title_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/thumbnail"
        android:layout_toRightOf="@+id/thumbnail"
        android:textStyle="bold"/>

    <!-- Subtitle -->
    <TextView
        android:id="@+id/subtitle_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/title_name"
        android:layout_marginTop="2sp"
        android:layout_toRightOf="@+id/thumbnail"
        />

     <!-- Rightend Arrow -->    
     <ImageView android:contentDescription="@string/right_arrow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/arrow"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"/>

</RelativeLayout> 
```

现在您将必须创建一个自定义`Adapter`来显示您的自定义`ListView`，这将膨胀`ListRow.xml`并显示列表中的数据。您还可以访问以下链接来创建布局：-

[android-custom-listview-with-image-and-text](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

希望这可以帮助。谢谢。

# sql - 是否可以在连接查询中包含双表

> ID：12894672
> 
> 赞同：7
> 
> 时间：2012-10-15T11:27:47.690
> 
> 标签：sql, oracle

是否可以在连接查询中包含 DUAL 表？

谁能给我一个例子，其中包括`SYSTIMESTAMP`来自双表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:31:44.177

一种常见用途*（对我而言）*是使用它来制作内联视图以加入...

```
SELECT
  filter.Title,
  book.*
FROM
(
  SELECT 'Red Riding Hood'  AS title FROM dual
  UNION ALL
  SELECT 'Snow White'       AS title FROM dual
)
  AS filter
INNER JOIN
  book
    ON book.title = filter.title 
```

*[这是一个故意琐碎的例子。]*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:48:28.927

基本上可以，但没必要。
您可以将 systimestamp 伪列添加到您已有的任何查询中：

```
SELECT t.col1, t.col2, systimestamp
FROM your_table t 
```

将给出相同的结果

```
SELECT t.col1, t.col2, d.st
FROM your_table t, (select systimestamp st from dual) d 
```

请注意，对偶表只有一行，因此笛卡尔积不会将行添加到您的原始查询中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:29:20.387

试试这个解决方案：

```
 select (select SYSTIMESTAMP from dual ) as d
        /*
           Here you can add more columns from table tab
        */ 
 from tab 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:34:54.763

应该没有必要，`DUAL`关键字是一种表示您没有查询表的方式，如果您想`DUAL`与另一个表“连接”，只需查询另一个表，包括您的列不是来自该表在选择子句中。

**编辑：**正如评论所说，这个陈述是错误的，**`DUAL`是一个表。**

我仍然认为包括（来自问题）没有意义

> 连接中的 DUAL 表

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-09T01:29:02.327

您可以在 Oracle 中执行此操作。我在尝试解决类似问题时发现了这个问题。诀窍是包装`DUAL`一个子查询，并返回一个您可以加入的静态值。

就我而言，我想在插入新记录之前查看表中是否存在满足某些条件的记录。如果它存在，我想要这个`ID`专栏。如果它不存在，我想要`ID`一个序列中的新值。我曾经`DUAL`“伪造”一个外部连接，这样我总能得到一排。然后`NVL()`，如果结果为空，我会返回一个序列值。

```
SELECT NVL(v.ID, REAL_SEQUENCE.nextval)
FROM (SELECT 1 as match FROM DUAL) d,
     (SELECT 1 as match, ID 
         FROM REAL_TABLE
         WHERE CONDITION = CRITERIA) v
WHERE d.match = v.match(+) 
```

# objective-c - 在 IB 和代码中添加项目时 UIScrollView 不滚动

> ID：12894679
> 
> 赞同：2
> 
> 时间：2012-10-15T11:28:13.470
> 
> 标签：objective-c, ios, uiscrollview, xcode4.5

当我在我的场景上创建一个滚动视图，然后在 IB 中向场景添加一个按钮。然后我进入代码，设置内容大小，启用用户交互并添加另一个按钮。当我在模拟器中运行程序时，Scrollview 不起作用，如果我删除场景中 IB 中的按钮，它就可以正常工作。是否无法在 IB 中和以编程方式将项目添加到滚动视图？

编辑：我认为这可能是我已经拥有的应用程序中的一些东西。所以我决定创建一个新项目，其中只有代码和下面的场景图片。它确实添加在 ScrollView 下方。

```
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[myButton setTitle:@"My Button" forState:UIControlStateNormal];
myButton.frame = CGRectMake(100, 100, 150, 50);
[scrollView addSubview:myButton];
scrollView.userInteractionEnabled = YES;
[scrollView setContentSize:CGSizeMake(320, 1000)]; 
```

![在此处输入图像描述](../Images/4ad6724d6d9eb788d7d4340af67acb38.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:39:20.037

这是一个有用的链接：http: [//developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html#//apple_ref/doc/uid/TP40012166-CH1-SW19](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html#//apple_ref/doc/uid/TP40012166-CH1-SW19)

基本上这就是说，使用自动布局，您不必也不应该使用 setContentSize:。相反，您的内部视图应该将其边缘捕捉到滚动视图的边缘。让我演示一下我是如何解决它的。

scrollBackground ：包含需要在滚动视图中滚动的所有其他视图的视图。

```
[scrollview addSubview:scrollBackground];

[scrollview addConstraints:[NSLayoutConstraint 
       constraintsWithVisualFormat:@"V:|[scrollBackground(1000.0f)]|" 
       options:0 metrics:nil 
       views:NSDictionaryOfVariableBindings(scrollBackground)]];

[scrollview addConstraints:[NSLayoutConstraint 
       constraintsWithVisualFormat:@"H:|[scrollBackground(==scrollview)]|" 
       options:0 metrics:nil 
       views:NSDictionaryOfVariableBindings(scrollBackground)]]; 
```

这里的关键是那些 | 在 VisualFormat 字符串的开头和结尾。这些将告诉滚动视图 contentSize 是什么。当然，如果您的 contentSize 小于滚动视图的框架大小，它就不会朝那个方向滚动。在我的示例中，宽度确实如此。它只能上下滚动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T12:12:44.870

由于自动布局，您的滚动视图不会滚动，如果您不使用，请取消选中自动布局。

我刚刚做了一个类似于你的要求。它工作正常，在允许 autoLayout 之后它就停止了滚动。

自动布局约束适合屏幕的可见部分，如果 scrollView 中的对象大于屏幕大小，它将滚动。

因此，如果您不使用 autoLayout，我的建议只是取消选中它，并且工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:06:26.480

在您发布的情况下，滚动视图将不会滚动，因为所有内容都是可见的。尝试将最后一行更改为：

```
[scrollView setContentSize:CGSizeMake(50, 50)]; 
```

它将开始滚动，因为内容大小小于视图中的所有内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T11:34:24.533

确保在 viewDidLoad 中或在从 nib 文件加载视图之后的某个时间设置内容大小。

正如 vishy 指出的那样，您的 Button 应该是 ScrollView 层次结构的一部分，否则您将只是滚动一个空视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T08:23:46.693

[检查这个问题](https://stackoverflow.com/questions/13439304/uiscrollview-setcontentsize-breaks-view-with-auto-layout)中的 d2burke 答案， 您应该将代码放入`viewWillLayoutSubviews`而不是`viewDidAppear`

# javascript - 如何在 2 个 css 样式表之间切换以用于 jQuery-UI？

> ID：12894681
> 
> 赞同：0
> 
> 时间：2012-10-15T11:28:16.333
> 
> 标签：javascript, jquery, css, jquery-ui, stylesheet

一般来说，我对 jQuery 和 javascript 还是很陌生，我创建了一个简单的 .html 文件，以便使用 2 个不同的 jQuery-ui 样式表进行测试。

我想要实现的是示例对话框将使用“flick”样式表打开，并且此对话框中的日期选择器将使用“ui-lightness”样式表打开。

当用户单击对话框中的文本框时，我尝试附加选定的样式表，但仍使用“轻弹”样式表。

我的html文件中的代码如下：

```
<!doctype html>

<html>

<head>
<meta charset="utf-8">
<title>jQuery Multiple Themes</title>
<link rel="stylesheet" type="text/css" href="css/flick/jquery-ui-1.9.0.custom.css">

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery-ui.js"></script>

<script type="text/javascript">

    function openDialog() {
        $("#dialog").dialog();
    }

    function loadDatePicker() {

        $('head').append('<link rel="stylesheet" type="text/css" href="css/ui-lightness/jquery-ui.1.8.24.custom.css">');

        $("#date").datepicker({});
    }

</script>

</head>

<body>

<input type="button" value="Open Dialog" onclick="openDialog()">

<div id="dialog" title="Test Mutiple Themes" style="display: none">
    Click to open a date picker in a different CSS theme
    <input id="date" type="text" size="8" onclick="loadDatePicker()">
</div>

</body>

</html> 
```

由于缺乏使用这些脚本的经验，我希望这是一个简单的语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:35:20.343

```
<ul id="nav">
<li><a href="#" rel="/path/to/style1.css">Default CSS</a></li>
<li><a href="#" rel="/path/to/style2.css">Larger Text</a></li>
<li><a href="#" rel="/path/to/style3.css">Something Different</a></li>
</ul> 
```

jQuery

```
$(document).ready(function() { 
$("#nav li a").click(function() { 
    $("link").attr("href",$(this).attr('rel'));
    return false;
});
}); 
```

此处说明：[http ://www.cssnewbie.com/simple-jquery-stylesheet-switcher/](http://www.cssnewbie.com/simple-jquery-stylesheet-switcher/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:32:49.237

在themeroller 下载页面上，您可以为主题设置“CSS SCOPE”。这将在样式表中的所有 UI 类之前为您选择的类添加前缀。

这允许使用您的范围类为标记中的对话框设置一个对话框，以及另一个像 dateepicker 这样的小部件及其范围类。

# vb.net - 使用密码锁定文件夹

> ID：12894685
> 
> 赞同：0
> 
> 时间：2012-10-15T11:28:26.467
> 
> 标签：vb.net, filesystems, protection

您好，谁能解释我或给我一些如何使用 VB.net 锁定文件夹的示例。

我想选择文件夹，为其设置密码，然后将其锁定。当我尝试打开该文件夹时，我希望我的应用程序弹出询问密码，如果密码正确，则解锁文件夹，如果不执行任何操作。

除了访问文件夹时我的应用程序的自动运行之外，我知道如何做所有事情。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:29:41.503

您所描述的方案没有提到加密文件，并且没有加密使用这种“锁定”是有问题的。

现在，无论是否加密，您唯一的解决方案是文件系统过滤驱动程序，它会在访问文件时询问密码，然后允许或拒绝打开文件（并且还必须执行即时加密/解密）。

VB.NET 不能用于编写内核模式驱动程序（您需要深入了解 C 和 Windows 内部结构以及大约 6 个月的工作来创建驱动程序）。您可以使用我们的 CallbackFilter 产品，它提供驱动程序并允许您在用户模式下编写业务逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:53:22.237

在微软论坛上有以下解决方案，也许对你有用：[http](http://social.microsoft.com/forums/en-US/softwareresources/thread/9a0f17af-928e-4732-a3ba-90d54ed961ea) ://social.microsoft.com/forums/en-US/softwareresources/thread/9a0f17af-928e-4732-a3ba-90d54ed961ea ；您可以通过您的软件动态创建他们建议的文件，然后对其进行管理。

# jquery - 为什么资产管道找不到我的 JQuery？

> ID：12894686
> 
> 赞同：3
> 
> 时间：2012-10-15T11:28:28.180
> 
> 标签：jquery, ruby-on-rails, haml, asset-pipeline

我正在尝试在 Rails 3.2.8 应用程序中使用 JQuery 插件。

相关代码如下...

在`/app/views/layouts/application.html.haml`文件中：

```
!!!
%html
  %head
    = javascript_include_tag :defaults
    = javascript_include_tag '/assets/nospam.js' 
```

在`/public/javascripts/application.js`文件中：

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.all
//= require nospam 
```

在`/app/assets/javascripts/nospam.js`文件中：

```
$('#my-email').html(function(){
  var e = "me";
  var a = "@";
  var d = "mysite";
  var c = ".com";
  var h = 'mailto:' + e + a + d + c;
  $(this).parent('a').attr('href', h);
  return e + a + d + c;
}); 
```

在`/app/views/layouts/index.html.haml`文件中：

```
%p
We love email, so why not send a message to
%a{:href => "#"}
  %span#my-email please enable javascript to view
and let us know what's on your mind. 
```

在`Gemfile`：

```
gem 'jquery-rails'

group :assets do
  gem 'jquery-ui-rails'
end 
```

我已经运行`bundle install`并重新启动了服务器，但插件无法正常工作，并且在 Chrome 的 Javascript 控制台中出现此错误：

```
GET http://localhost:3000/assets/nospam.js 404 (Not Found) 
```

在`rails console`中，我得到：

```
Rails.application.config.assets.paths
 => ["/Users/steven/Dropbox/testivate/app/assets/javascripts", "/Users/steven/Dropbox/testivate/app/assets/stylesheets", "/Users/steven/Dropbox/testivate/vendor/assets/javascripts", "/Users/steven/.rvm/gems/ruby-1.9.3-p194/gems/jquery-rails-2.1.3/vendor/assets/javascripts"] 
```

我现在通过禁用资产管道来解决这个问题，但我知道出于性能原因我最终应该重新启用它。

我应该怎么做才能让它工作？

谢谢，

史蒂文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:17:19.387

取出线：

**/app/views/layouts/application.html.haml**

```
= javascript_include_tag '/assets/nospam.js' 
```

nospam.js 文件已经编译到 application.js 文件中，因此无需单独包含它。

此外，您需要确保您的 JQuery 代码在它引用的 html 之后执行，因此添加 $(document).ready 行，如下所示：

**/app/assets/javascripts/**

```
$(document).ready(function () {
  $('#my-email').html(function(){
    var e = "me";
    (etc...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:42:24.750

我猜：

资产管道将目录编译为`app/assets`目录`public`。

由于您的`application.js`清单位于`public/javascripts`目录中，因此资产管道不考虑它（资产管道不会在公共目录中编译资产，它是放置已编译资产的地方）。所以把它移到`app/assets/javascripts/application.js`.

您在布局中需要的只是：

```
= javascript_include_tag :defaults 
```

确保`nospam.js`位于`app/assets/javascripts/nospam.js`。

```
app/
  assets/
    javascripts/
      application.js
      nospam.js 
```

你的清单对我来说很合适。只是看起来文件不在正确的位置。

# svn - 两个项目版本中的 SVN 差异

> ID：12894687
> 
> 赞同：4
> 
> 时间：2012-10-15T11:28:30.650
> 
> 标签：svn, diff

> **可能重复：**
> [颠覆：如何找到两个标签之间的差异？](https://stackoverflow.com/questions/3270322/subversion-how-to-find-the-differences-between-two-tags)

我正在做一个多模块项目。我需要得到颠覆（svn）标签（代表版本）之间的差异。更具体地说，我想找出哪些模块已从一个版本更改为另一个版本。你能就此提出建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:35:20.263

我将使用@nvartolome 问题（this answer）链接的示例，但是 - 使用不同的命令集甚至**结果**

*   *如果*您的**模块是 dirs**，您只想知道**哪些模块已更改**并同意**通过眼睛进行手工工作**：将执行 2 ls

旧标签

```
z:\>svn ls -v http://svn.twig-project.org/tags/RELEASE_0_9_7
    331 fabien                июн 12  2010 ./
      4 fabien            191 окт 08  2009 AUTHORS
    326 fabien           7950 июн 12  2010 CHANGELOG
      4 fabien           1522 окт 08  2009 LICENSE
      4 fabien            341 окт 08  2009 README.markdown
    278 fabien                май 11  2010 bin/
    326 fabien                июн 12  2010 doc/
    328 fabien                июн 12  2010 lib/
     23 fabien           1854 окт 12  2009 package.xml.tpl
    309 fabien            652 июн 08  2010 phpunit.xml
    325 fabien                июн 12  2010 test/ 
```

较新的标签

```
z:\>svn ls -v http://svn.twig-project.org/tags/RELEASE_0_9_8
    343 fabien                июн 29  2010 ./
      4 fabien            191 окт 08  2009 AUTHORS
    342 fabien           8566 июн 29  2010 CHANGELOG
      4 fabien           1522 окт 08  2009 LICENSE
      4 fabien            341 окт 08  2009 README.markdown
    278 fabien                май 11  2010 bin/
    341 fabien                июн 28  2010 doc/
    342 fabien                июн 29  2010 lib/
     23 fabien           1854 окт 12  2009 package.xml.tpl
    309 fabien            652 июн 08  2010 phpunit.xml
    341 fabien                июн 28  2010 test/ 
```

第一列是提交的最后修订 - 只需在 dirs 中找到（差异或眼睛）更改的修订

*   如果您想以更自动的方式在文件级别执行此操作：`z:\>svn diff --summarize http://svn.twig-project.org/tags/RELEASE_0_9_7 http://svn.twig-project.org/tags/RELEASE_0_9_8`

结果会像

```
D       http://svn.twig-project.org/tags/RELEASE_0_9_7/test/fixtures/expressions/binary.test
...

A       http://svn.twig-project.org/tags/RELEASE_0_9_7/test/Twig/Tests/TemplateTest.php
M       http://svn.twig-project.org/tags/RELEASE_0_9_7/test/Twig/Tests/Node/DebugTest.php 
```

# java - jsoup - 如何检查网页是否存在

> ID：12894691
> 
> 赞同：1
> 
> 时间：2012-10-15T11:28:35.720
> 
> 标签：java, screen-scraping, jsoup

嗨 stackoverflow 用户。

当我进行网页抓取时，我遇到了一个问题，当我抓取特定网站的一系列网页时，它们的 URL 是

```
http://www.somewebsites.com/abc.php?number=0001
http://www.somewebsites.com/abc.php?number=0002
http://www.somewebsites.com/abc.php?number=0003
..
..
http://www.somewebsites.com/abc.php?number=1234 
```

像这样的东西。由于某些页面可能偶尔会关闭，服务器可能会通过重定向到不同的页面来处理它，比如主页。这样，我的抓取程序就会遇到各种与语法结构变化相关的异常（因为它是不同的页面）。

我想知道是否有办法检查我正在抓取的网页是否存在，以防止我的程序在这种情况下被终止。

我在用着

```
Jsoup.connect() 
```

连接到该页面。但是，当我访问失败的网页（重定向）时，我被重定向到另一个页面。在我的程序中，控制台不会抛出任何关于连接的异常。相反，该异常只是索引超出范围异常，因为意外重定向的网页具有完全不同的结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:34:20.157

> 由于某些页面可能偶尔会关闭，服务器可能会通过重定向到不同的页面来处理它，比如主页

通常，当网站上的页面暂时不可用并被重定向时，客户端会收到响应代码为 302（永久移动）或 307（临时移动），并带有指向重定向页面的“位置”标头。在这种情况下，您似乎可以通过将[followRedirects](http://jsoup.org/apidocs/org/jsoup/Connection.html#followRedirects%28boolean%29)设置为 false来配置`Connection`不重定向。然后您可以在将响应转换为 Document 以进行进一步处理之前验证 HTTP 响应代码。

# swing - 即使对于文本，如何在 JLabel 中禁用换行

> ID：12894693
> 
> 赞同：9
> 
> 时间：2012-10-15T11:28:40.137
> 
> 标签：swing, jtable, jlabel, tablecellrenderer

每当 JLabel 在标签中包含文本时，它都会自动应用换行（似乎）。我的要求是，无论标签包含什么文本，都应始终禁用换行。由于遗留原因，我无法在渲染器中使用 JTextArea。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-15T12:05:48.037

1.  您可以`<nobr></nobr>`在不想被包装的 HTML 内容周围使用标签
2.  简单的非 HTML 内容永远不会被包装在 JLabel 中

这是一个例子：

```
public static void main ( String[] args )
{
    JFrame frame = new JFrame ();
    frame.setLayout ( new BorderLayout () );

    final String html = "<html><body><nobr>CMV Antigenemia Stat X 2.0 dose(s)</nobr></body></html>";
    final String simple = "<html><body>CMV Antigenemia Stat X 2.0 dose(s)</body></html>";

    JTable table1 = new JTable ( new String[][]{ { html, html, html, html, html } }, new String[]{ html, html, html, html, html } );
    table1.setRowHeight ( 50 );
    frame.add ( table1, BorderLayout.NORTH );

    JTable table2 = new JTable ( new String[][]{ { simple, simple, simple, simple, simple } },
            new String[]{ simple, simple, simple, simple, simple } );
    table2.setRowHeight ( 50 );
    frame.add ( table2, BorderLayout.CENTER );

    frame.pack ();
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
} 
```

如您所见 - 第一个表格中的 HTML 内容没有被包装。

# jquery - jQuery CSS AddClass - RemoveClass 在 Internet Explorer 中移动 div

> ID：12894694
> 
> 赞同：0
> 
> 时间：2012-10-15T11:28:42.510
> 
> 标签：jquery, html, css, internet-explorer-9

我有一个 HTML 表格，并使用 jQuery 和 CSS 提供了一些悬停突出显示功能。我的悬停事件如下所示：

```
$('#' + element.id + ' tr:not(:first,[class="summary_row"])').die('mouseover mouseout').live('mouseover mouseout', function (event) {
            if (event.type == 'mouseover') {
                // do something on mouseover
                $(this).addClass("table_row_hover");
            } else {
                // do something on mouseout
                $(this).removeClass("table_row_hover");
            }
}); 
```

当鼠标移出时，我只需向相应的表格行添加和删除一个 CSS 类。我的 CSS 类（table_row_hover）很简单，只包含背景颜色和前景色：

```
.table_row_hover
{
    background-color: #660033;
    color: #FFFFFF;
} 
```

在我的表格 div 下，还有另一个 div 包含一个分页器，为表格提供分页功能。当我将鼠标悬停在表格行上时，它会将此寻呼机 div 向下移动。每次我悬停时，它都会移动更多。这只发生在 Internet Explorer 中并且当表格 div 具有可见的水平滚动条时。（表格 div 具有属性溢出：自动；溢出-y：隐藏；-ms-溢出-y：隐藏；）。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:31:10.430

这是 Internet Explorer 中的一个已知错误。我找不到 Internet Explorer 的公开链接。错误是当元素中有水平滚动条时，它的高度会在 addClass/removeClass 上增加。微软显然也意识到了这个问题，因为它似乎已经在 Internet Explorer 10 中得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:32:24.947

`live()`功能已被弃用，所以不要使用它。

```
$('#' + element.id + ' tr:not(:first,[class="summary_row"])').die('mouseover mouseout').on('mouseover mouseout', function (event) {
$(this).toggleClass("table_row_hover");

}) 
```

# function - 指针/函数组合难懂

> ID：12894700
> 
> 赞同：0
> 
> 时间：2012-10-15T11:28:56.557
> 
> 标签：function, pointers

下面的语句是什么意思。

```
((void*(*)(void*))keepfunc)(val) 
```

注意：- 一般来说，我在理解这些表达方式时遇到问题。可以，有人请为此建议我一些好的材料（网络或书籍）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:51:07.540

您应该尝试从内到外“解析”表达式：

```
void*(*)(void*) 
```

指向一个函数的函数指针，该函数需要一个 void 指针并返回一个 void 指针

```
(void*(*)(void*))keepfunc 
```

转换为期望 void 指针并返回 void 指针的函数指针

```
((void*(*)(void*))keepfunc)(val) 
```

这应该是错误的，因为必须先取消引用函数指针才能调用它。它应该看起来像这样：

```
(*(void*(*)(void*))keepfunc)(val) 
```

这是 C 编程教科书中的一个工作示例吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:41:27.390

这是一个强制转换，它将 keepfunc 转换为接受 void* 参数并返回 void* 结果值的函数指针，然后通过将 val 作为参数传递来评估函数（虽然，我认为在 keepfunc 之前应该有一个星号，因为您需要在调用它之前尊重函数指针）。我认为您应该在谷歌中查找函数指针，这应该可以解决问题。

# html - 外部文本和 HTML

> ID：12894705
> 
> 赞同：0
> 
> 时间：2012-10-15T11:29:32.140
> 
> 标签：html, web-applications

假设我有几个 Web 表单要实现。表单包含标准问候语、验证消息（例如“缺少姓名”、“电子邮件地址无效”）、错误（例如“临时处理错误”）等。

从 HTML 中提取所有这些文本消息并将其存储在外部文本文件中以便非技术人员可以编辑文本是否有意义？

他们说编辑文本文件比编辑 HTML 更容易。另一方面，我担心这会使解决方案复杂化。该领域的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:49:25.313

我正在使用一个 java webapp，它使用映射到 *.properties 文件中的字符串的键。

我注意到，如果您正在搜索“该字段标签在哪里”某个很酷的字段“，则支持此类代码会更加困难：

首先，您必须找到密钥（好的，您得到该字符串的密钥是“submit.button.text”），然后您必须找到代码中实际使用的密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:04:31.377

这取决于情况。如果文本*经常*由*非技术*人员编辑，则将文本移动到结构简单的单独文件中可能是有意义的。否则，确实会使事情复杂化。

通常，服务器端模板引擎用于从多个不同的资源（例如，HTML 模板文件、数据库、配置文件等）构建页面。使用什么类型的资源和格式取决于您并取决于具体情况。例如，您可以将错误文本存储在[JSON](http://json.org/)格式的文件中，如下所示：

```
{
    "name" : {
        "minlength" : {
            "value": 2,
            "error": "Name field must contain at least 2 characters"
        },
        "maxlength" : {
            "value": 255,
            "error": "Name field must contain not more than 255"
        }
    },
    "email" : {
        "pattern" : {
            "value": "some_regexp_for_email_validation",
            "error": "Please input a correct e-mail address"
        }
    }
} 
```

特别是在 PHP 中，可以使用`json_decode()`方法读取 JSON 格式。

JSON 的替代方案是 XML（尽管它通常更难使用）。

顺便说一句，提供一个 Web 界面来为非技术人员编辑表单错误规则和文本可能是有意义的。然后对不应该知道它们的人隐藏实施细节。所以你可以使用任何你想要的技术部分，而编辑器只会看到一个带有文本字段的可用 GUI。

您可能还对使用现成的服务器端数据验证解决方案感兴趣，例如[Zend Validator](http://framework.zend.com/manual/2.0/en/modules/zend.validator.html)。

# iphone - 将 NSObject 添加到视图 - NSObject 中的 UIButton 选择器导致崩溃

> ID：12894706
> 
> 赞同：3
> 
> 时间：2012-10-15T11:29:33.390
> 
> 标签：iphone, xcode, uibutton, selector, nsobject

在 ARC 环境中有一个小问题。创建一个将视图添加到父视图的 NSObject - 它基本上是一个“弹出类”，可以处理一些文本并显示它。

在视图控制器中它被实例化..

```
CBHintPopup *popup = [[CBHintPopup alloc]init];
[popup showPopupWithText:@"test text" inView:self.view]; 
```

和实际的类文件..

CBHintPopup.h

```
@interface CBHintPopup : NSObject {

}

-(void)showPopupWithText:(NSString *)text inView:(UIView *)view;
-(IBAction)closePopup;

@property (nonatomic, strong) UIView *popupView;
@property (nonatomic, strong) UIImageView *blackImageView;
@property (nonatomic, strong) UIButton *closeButton;

@end 
```

CBHintPopup.m

```
@implementation CBHintPopup
@synthesize  popupView,blackImageView, closeButton;

-(void)showPopupWithText:(NSString *)text inView:(UIView *)view {

//CREATE CONTAINER VIEW
self.popupView = [[UIView alloc]initWithFrame:CGRectMake((view.frame.size.width/2)-(225/2),-146,225,146)];
self.popupView.alpha = 0;
self.popupView.backgroundColor = [UIColor clearColor];

//CREATE AND ADD BACKGROUND
UIImageView *popupBackground = [[UIImageView alloc]initWithFrame:CGRectMake(0,0,225,146)];
popupBackground.image = [UIImage imageNamed:@"hintbackground.png"];
[self.popupView addSubview:popupBackground];

//CREATE AND ADD BUTTON
self.closeButton = [UIButton buttonWithType:UIButtonTypeCustom];
[self.closeButton addTarget:self action:@selector(closePopup) forControlEvents:UIControlEventTouchUpInside];
[self.popupView addSubview:self.closeButton];

//CREATE AND ADD LABEL
UILabel *popupTextLabel = [[UILabel alloc]initWithFrame:CGRectMake(22,25,176,93)];
popupTextLabel.text = text;
[self.popupView addSubview:popupTextLabel];

[view addSubview:self.popupView];
}

-(void)closePopup {
NSLog(@"HI");
} 
```

通过按下按钮调用 closePopup 后接收以下内容（不打印“HI”）..

```
-[CBHintPopup performSelector:withObject:withObject:]: message sent to deallocated instance 0x246b2fe0 
```

我尝试在非 ARC 和其他方法中保留按钮，但只是没有运气。可能是一些非常简单的事情，但我无法确定它。我已经删除了标签和图像等的所有设置以节省一些空间，所以忽略 alpha 等。

任何帮助将不胜感激，感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:36:23.483

我试过你的代码，发现你提到的崩溃。我找到了修复崩溃的解决方案。我`CBHintPopup *popup;`在`viewController`的界面中声明了。并改变了这条线

```
CBHintPopup *popup = [[CBHintPopup alloc]init]; 
```

至

`popup = [[CBHintPopup alloc]init];`

一切对我来说都很好。但我找不到这背后的原因。希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:00:13.873

你是否实现了构造函数`CBHintPopup`，因为你已经调用了构造函数

```
[[CBHintPopup alloc]init]; 
```

你必须像这样实现构造函数方法

在 CBHintPopup 的 .m 文件中

```
-(id)init{

if(self == [super init]){

// do some initialization here

   }
  return self;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:31:13.930

找到了一个解决方法——我没有把 CBHintPopup 变成一个 NSObject，而是把它变成了 UIView 的子类，并将 self 添加到父视图中（而不是 self.popupView）。不过，我不会真正将其称为“修复”-更多的是一种替代方法。当然，NSObject 可以毫无问题地将 UIView（带有 UIBUtton）添加到父视图？这是一个错误吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:34:19.937

确保您保留了 class 的对象`CBHintPopup`。

我认为崩溃即将到来，因为`CBHintPopup`释放对象。因此找不到动作方法。

# angularjs - 记录 Angular 部分中的错误

> ID：12894708
> 
> 赞同：2
> 
> 时间：2012-10-15T11:29:34.853
> 
> 标签：angularjs

我听说在AngularJS partials中可以收到表达式等的错误消息。但是，我找不到任何相关信息。有人有提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:58:01.807

你看过 [$exceptionHandler](http://docs.angularjs.org/api/ng.%24exceptionHandler)吗？ [这](http://jsfiddle.net/Fj95g/1/)是一个简单的用法

# .net - ASMX Web 服务响应中 XML 元素的顺序随构建它的 PC 而变化

> ID：12894713
> 
> 赞同：1
> 
> 时间：2012-10-15T11:30:01.220
> 
> 标签：.net, web-services, entity-framework-4, .net-4.0, asmx

在 ASMX Web 服务中，GetProductListModulesOnPage 方法返回 ProductListModule 对象的列表。ProductListModule 类来自 2 个来源：

1.  Entity Framework 4 实体（使用 POCO 模板生成）
2.  添加单个额外属性的部分类声明如下：

    `public partial class ProductListModule { public bool IsNotActivated { get; set; } }`

问题是 Web 服务响应中 IsNotActivated 元素的位置会根据构建项目的机器而有所不同。在同事的电脑上，它出现在最顶部，而在我的电脑上，它出现在最底部，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
    <GetProductListModulesOnPageResponse xmlns="http://ecommerce.company.co.uk/">
      <GetProductListModulesOnPageResult>
        <ProductListModule>
          <ListPageTabID>364</ListPageTabID>
          <ListPageModuleID>872</ListPageModuleID>
          <ListPageCategoryID>107</ListPageCategoryID>
          <ProductCategory>
            <CategoryID>107</CategoryID>
            <CategoryName>Buff</CategoryName>
            <ParentCategoryID>343</ParentCategoryID>
            <Archived>false</Archived>
          </ProductCategory>
          <IsNotActivated>false</IsNotActivated>
        </ProductListModule>
      </GetProductListModulesOnPageResult>
      <Success>true</Success>
      <Message />
    </GetProductListModulesOnPageResponse>
  </soap:Body>
</soap:Envelope> 
```

如果位置发生变化（并且服务引用未刷新），则 Web 服务客户端无法解释响应并引发异常。

我们看不出进行构建的机器之间有什么不同（相同的 VS 版本，相同的 EF 版本），而且我们都使用完全相同的源代码工作。

我们还尝试通过将以下属性添加到 IsNotActivated 属性来控制序列化顺序，但这没有效果。

`[System.Runtime.Serialization.DataMemberAttribute(IsRequired = true, Order = 1)]`

PS - 建议转换为 WCF 没有任何意义！

# mongodb - 基于字段选择性的复合索引顺序

> ID：12894719
> 
> 赞同：1
> 
> 时间：2012-10-15T11:30:11.440
> 
> 标签：mongodb, mongodb-indexes

我有两个字段*a*和*b*，其中*b*的选择性比*a*高得多。

现在，如果我只查询*a*和*b*（从不单独查询任何一个字段），以下两个索引中哪个更好，为什么：

1.  `{a: 1, b : 1}`
2.  `{b: 1, a : 1}`

解释似乎返回几乎相同的结果，但我在某处读到您应该首先放置更高的选择性字段。我不知道为什么这会有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-16T00:16:26.223

经过大量工作以改进对 150 000 000 条记录数据库的查询后，我发现了以下内容：

不一定是更高的选择性字段，但实际上匹配“更快”的字段，移动到第一个位置可以显着提高性能

我有一个由以下字段组成的索引：

邮编、地址、城市、名字、姓氏

地址由数组匹配，而不是 string = string，因此执行时间最长，匹配速度最慢。我创建的第一个索引是：**address_zip_city_last_name_first_name**，将 1000 条记录与整个数据库匹配的执行时间将持续数小时。

地址字段实际上可能对这些具有最高的选择性，但由于它不是通过简单的字符串相等来匹配，因此它花费的时间最多。它实际上是这样的

```
{ address: {$all : ["1233", "main", "avenue] }} 
```

通过将此索引更改为在开头具有“更快”字段，例如：**zip_city_first_name_last_name_address**，性能会好得多。相同的 1000 条记录只需一秒钟即可匹配，而不是持续数小时。

希望这可以帮助某人

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:23:46.570

在做了一些进一步的分析之后，从性能的角度来看，这两个索引实际上几乎是相同的。

确实，如果您处于类似情况，真正的考虑应该是将来您是否更有可能单独查询*a*或*b*，并将该字段放在索引中的第一位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:33:33.817

我相信优化器会选择最适合使用的索引，尽管您可以提供提示

例如

```
db.collection.find({user:u, foo:d}).hint({user:1}); 
```

见[http://www.mongodb.org/display/DOCS/Optimization](http://www.mongodb.org/display/DOCS/Optimization)

# c# - C# 和 Java DES 加密值不相同

> ID：12894722
> 
> 赞同：2
> 
> 时间：2012-10-15T11:30:29.370
> 
> 标签：c#, java, encryption, cryptography

我正在尝试使用 C# 和 Java 加密相同的数据。如果数据超过 7 个字节，则 Java 和 C# 的加密值不相同。

*   输入 1：**一个**
    java 输出：*FrOzOp/2Io8=*
    C# 输出：*FrOzOp/2Io8=*

*   输入 2：**abc**
    j : *H9A/ahl8K7I=*
    c#: *H9A/ahl8K7I=*

*   输入 3：**aaaaaaa** （**问题**）
    j：*Gxl7e0aWPd7j6l7uIEuMxA==*
    c#：*Gxl7e0aWPd7sf1xR6hK4VQ==*

这里是 C# 和 Java 方法的实现。
C#代码：

```
public String saltTxt = "12345678";
public String Encrypt(String txt)
{
        byte[] data = Encrypt(Encoding.UTF8.GetBytes(txt));

        DESCryptoServiceProvider alg = new DESCryptoServiceProvider();

        alg.Key = Encoding.UTF8.GetBytes(saltTxt.ToCharArray(), 0, cprovider.KeySize / 8);
        alg.IV = new byte[8];

        MemoryStream ms = new MemoryStream();
        CryptoStream stem = new CryptoStream( ms, cprovider.CreateEncryptor(),CryptoStreamMode.Write);

        stem.Write(txt, 0, txt.Length);
        stem.FlushFinalBlock();

        data = ms.ToArray();

        return Convert.ToBase64String(data);
 } 
```

Java 代码：

```
public String saltTxt = "12345678";
public String Encrypt(String str) {
    try {
        KeySpec myKey = new DESKeySpec(saltTxt.getBytes("UTF8"));
        SecretKey key = SecretKeyFactory.getInstance("DES").generateSecret(myKey);
        Cipher ecipher = Cipher.getInstance("DES");
        ecipher.init(Cipher.ENCRYPT_MODE, key);

        byte[] data = str.getBytes("UTF8");

        byte[] crypt = ecipher.doFinal(data);

        return new BASE64Encoder().encode(crypt);
    } catch (Exception ex) {
    }

    return null;
} 
```

知道为什么它没有按预期工作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T07:53:48.330

问题在于`mode`加密。

> SunJCE 提供程序**`ECB`**用作默认模式，并**`PKCS5Padding`**用作 DES、DES-EDE 和 Blowfish 密码的默认填充方案。（[JCA 文件](http://docs.oracle.com/javase/1.4.2/docs/guide/security/jce/JCERefGuide.html#CoreClasses)）

和

> 其中`.Net`，对称算法的默认操作模式是**`CipherMode.CBC`**，默认填充是**`PaddingMode.PKCS7`**。( [msdn..SymmetricAlgorithm](http://msdn.microsoft.com/en-us/library/system.security.cryptography.symmetricalgorithm.mode.aspx) )

以下更改可解决此问题。

```
// in C# 
DESCryptoServiceProvider alg = new DESCryptoServiceProvider();
alg.Mode = CipherMode.ECB;  // specified 
```

或者

```
// in java
chiper = Cipher.getInstance("DES/CBC/PKCS5Padding"); 
```

两边不要变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:34:19.257

您可能会看到 ISO 10126 填充，它将随机字节附加到纯文本以将其填充到块大小的倍数。
此行为是设计使然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T23:25:17.983

下面的代码（Java/Android）对我有用。我在 C# 上使用了相同的方法。

```
public static String Cripto(String Password)
{
    String PasswordCripto = "";
    try
    {
        String encryptionKey = "anyEncryptionString";
        MessageDigest messageDigest = MessageDigest.getInstance("MD5");
        messageDigest.update(encryptionKey.getBytes("UTF-8"), 0, encryptionKey.length());
        byte[] encryptionKeyBytes = messageDigest.digest();

        SecretKeySpec Key = new SecretKeySpec(encryptionKeyBytes,"DESede");
        Cipher cipher = Cipher.getInstance("DESEDE/ECB/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, Key);
        byte[] encryptedBytes = cipher.doFinal(Password.getBytes("UTF-8"));

        PasswordCripto = new String(Base64.encode(encryptedBytes, Base64.DEFAULT), "UTF-8");
    } catch(Exception e) { }
    return PasswordCripto ;
} 
```

# mysql - 我的 sql 中的 BLOB 类型

> ID：12894723
> 
> 赞同：1
> 
> 时间：2012-10-15T11:30:32.523
> 
> 标签：mysql, blob

我已经在一个表中存储了一个**.swf**文件的路径，比如**Test**，

我已将表格字段类型输入为 BLOB。现在的问题是，在检索时不会呈现为 swf 文件。

mysql中的BLOB数据类型不是用于存储.swf等文件类型吗？

我该如何解决我的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:41:45.800

您只需要保存文件或文件的路径吗？如果您只需要保存文件路径，则可以使用 vachar 或文本字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:35:01.107

BLOB 存储 BINARY 类型。但是您说您将 .swf 的路径存储在该字段中。您应该将 swf 的内容放入键入为 BLOB 的字段中。或者将字段类型更改为 varchar 并将路径存储在其中。

# wpf - Arcgis：如何将图像加载为地图？

> ID：12894725
> 
> 赞同：0
> 
> 时间：2012-10-15T11:30:37.350
> 
> 标签：wpf, gis, arcgis

我正在使用 Arcgis WPF，我想知道是否可以在我的应用程序中加载图像作为地图？如果可能的话，你能告诉我如何实现吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T09:09:37.550

您可以将 ImageServer 用于图像文件，如果图像是 .jpeg 或 .png 且没有地理参考，则可以使用 ArcMap 将其设为地图服务（平铺地图服务或动态地图服务），然后使用该地图在您的代码中提供服务。有关详细信息，您可以访问 ArcGIS 在线 WPF 论坛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:41:20.250

它是卫星图像还是只是图像？您使用的是什么 API？

如果只是一个图像，您可以使用[图形层](http://help.arcgis.com/en/webapi/wpf/help/index.html#/Creating_a_graphics_layer/01n700000019000000/)并将图像添加为图形。使用这种方法，您可以给它任何对您的空间参考有意义的纬度/经度。

如果您有卫星图像，您希望将其添加为栅格图层（ArcGIS for Desktop/Engine）或平铺地图服务（WPF/Silverlight API）。如果您使用的是 WPF API（而不是 ArcGIS Engine），则需要访问 ArcGIS Server 才能发布地图服务。

我建议通读[API 文档](http://help.arcgis.com/en/webapi/wpf/help/index.html#//01n700000015000000)，因为它有据可查。

# java - Maven 3 构建扩展和 IntelliJ 理念

> ID：12894743
> 
> 赞同：0
> 
> 时间：2012-10-15T11:31:59.193
> 
> 标签：java, intellij-idea, maven-3

我遇到了 jar-references 的臭名昭著的情况，这在任何公共存储库中都不可用。我正在尝试这个解决方案：[Brett Porter 28/Mar/11 9:00 AM](http://jira.codehaus.org/browse/MNG-3989?focusedCommentId=261657&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-261657)

所以我检查了[http://svn.apache.org/repos/asf/maven/sandbox/trunk/examples/extensions/bundled-repository-extension](http://svn.apache.org/repos/asf/maven/sandbox/trunk/examples/extensions/bundled-repository-extension)，用 IDEA 构建它并将生成**的 bundled-repository-extension-1.0-SNAPSHOT .jar**直接进入**C:\Program Files\Apache Software Foundation\apache-maven-3.0.4\lib\ext**

现在我正在尝试像[这里](http://svn.apache.org/repos/asf/maven/sandbox/trunk/examples/MNG-3989-maven3)显示的那样使用它。但是 IntelliJ IDEA 总是以红色突出显示它找不到这个构建扩展：

```
<build>
  <extensions>
    <extension>
      <groupId>org.apache.maven.examples</groupId>
      <artifactId>bundled-repository-extension</artifactId>
      <version>1.0-SNAPSHOT</version>
    </extension>
  </extensions>
</build> 
```

我如何帮助它找到构建扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:04:47.807

在 maven Central 上也找不到此扩展。可能的解决方案：

*   找到托管必要快照的远程存储库并启用它 insettings.xml
*   手动将此扩展安装到您的本地存储库中
*   设置您自己的存储库服务器（ sonatype nexus 是不错的选择）并将此扩展上传到那里

它可用于您的 maven 命令行构建 IDEA 会找到它。

# android - 如何在 Android 中创建信息叠加层

> ID：12894745
> 
> 赞同：5
> 
> 时间：2012-10-15T11:32:11.530
> 
> 标签：android, overlay, showcaseview

我正在寻找一种方法来创建一个简短的应用程序覆盖介绍，以向首次使用的用户显示。这些帖子让我对如何做到这一点有了一些了解，但并不完全是：

[如何创建像您在一些 Android 应用程序和 ICS 中看到的帮助叠加层？](https://stackoverflow.com/questions/10216937/how-do-i-create-a-help-overlay-like-you-see-in-a-few-android-apps-and-ics)

[如何使用 LayoutInflater / ViewStub 进行叠加](https://stackoverflow.com/questions/8285022/how-to-use-layoutinflater-viewstub-for-an-overlay)

我不明白如何正确访问我的元素，因为我的根布局元素是`LinearLayout`包含 an`Actionbar`和 a`ViewPager`而不是包含实际元素的 a。

是否有任何框架可以为您做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T11:45:45.437

我认为这个库：[ShowcaseView](https://github.com/Espiandev/ShowcaseView)是你最好的选择。顾名思义，它允许您重新创建 Android 4.x 展示视图；即：
![展示视图示例](../Images/0dbec82eb9eb3821e414e49dc5e49bb9.png)。

该项目的文档解释了如何实现它。不过忠告：这种解释视图在大多数情况下被视为糟糕的设计：如果您的应用程序设计良好，则无需向用户提供教程，它应该是直观的。
当然，在某些情况下这是完全合理的，只要确保：
-您的用户确实需要教程。
- 这不是因为您正在做与 Android 传统相反的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-06T15:23:26.713

看看[MaterialShowcaseView](https://github.com/deano2390/MaterialShowcaseView)。它继承自[ShowcaseView](https://github.com/amlcurran/ShowcaseView)并且是最新的。

![示例图片](../Images/0053739d483545654c32b33636b9f96c.png)

# c++ - 使用模板进行类型转换有奇怪的行为

> ID：12894752
> 
> 赞同：1
> 
> 时间：2012-10-15T11:32:36.837
> 
> 标签：c++, string, templates, boolean

我有一个旨在将字符串从配置文件转换为各种不同类型的函数。当使用字符串流时，需要插入一个特殊情况来处理布尔值，因为“假”等于真。

单独的函数并不是一个真正的选择，因为它会涉及对我们正在使用的每种类型的类型检查。

该函数在以前是类的一部分时可以正常工作，但是为了使其更有用，它被移到了自己的启动函数中。该函数在返回 true 时抛出 2 个错误。返回 false 符合预期。

下面是代码示例和 Visual Studio 抛出的错误。

```
template <typename T>
static T StringCast(string inValue)
{
    if(typeid(T) == typeid(bool))
    {
        if(inValue == "true")
            return true;
        if(inValue == "false")
            return false;
        if(inValue == "1")
            return true;
        if(inValue == "0")
            return false;
        return false;
    }

    std::istringstream stream(inValue);
    T t;
    stream >> t;
    return t;
} 
```

错误 1 ​​错误 C2664: 'std::basic_string<_Elem,_Traits,_Ax>::basic_string(const std::basic_string<_Elem,_Traits,_Ax> &)' : 无法将参数 1 从 'bool' 转换为 'const std: :basic_string<_Elem,_Traits,_Ax> &'

错误 2 错误 C2664: 'std::basic_string<_Elem,_Traits,_Ax>::basic_string(const std::basic_string<_Elem,_Traits,_Ax> &)' : 无法将参数 1 从 'bool' 转换为 'const std: :basic_string<_Elem,_Traits,_Ax> &'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:39:09.877

如果您想对 bool 进行专业化 - 那么只需为 bool 定义专业化。你的方法是不可能的。使用下面的正确方法：

```
template <typename T>
T StringCast(string inValue)
{
    std::istringstream stream(inValue);
    T t;
    stream >> t;
    return t;
}

template <>
bool StringCast<bool>(string inValue)
{
        if(inValue == "true")
            return true;
        if(inValue == "false")
            return false;
        if(inValue == "1")
            return true;
        if(inValue == "0")
            return false;
        return false;
}

int main() {
   int a = StringCast<int>("112");
   bool b = StringCast<bool>("true"); 
} 
```

# android - Android - 唯一标识应用程序

> ID：12894756
> 
> 赞同：0
> 
> 时间：2012-10-15T11:32:51.877
> 
> 标签：android, apk

我目前正在寻找一种在整个 Play 商店中唯一标识应用程序的可能性。仅通过 Play 商店安装应用程序时，软件包名称是唯一的，但如果应用程序是通过替代市场或手动安装的呢？

我考虑过计算 apk 文件的哈希值（可以在 /data/app 或 /system/app 下找到），但我认为这不能通过位于 /data/app-private 的应用程序来完成（没有根）。

谁能告诉我我如何仍然可以唯一地识别 Apps/.apk 文件。

非常感谢 ：）

# php - foreach 循环中的 PHP while 循环仅检索一条记录

> ID：12894759
> 
> 赞同：0
> 
> 时间：2012-10-15T11:33:06.233
> 
> 标签：php

好吧，我很困惑。由于某种原因，这种循环组合只返回一个城市记录。我有一系列邮政编码（$ `locationzips`）。我可以遍历所有这些，但只返回一个关联的城市，即使 foreach 循环正确完成。我已经检查了数据库表，并且邮政编码与正确的城市一起存在。我没看到什么？

```
foreach ($locationzips as $key => $zip) {
    $getcities = mysql_query("SELECT * FROM us WHERE code = '$zip'");
    echo 'test zip: '.$zip.'<br>';
    while($row = mysql_fetch_assoc($getcities)) {
        $city = $row['city'];
        echo 'test city: '.$city.'<br>';
    } 
} 
```

这将返回：

```
test zip: 34110<br>
test city: Naples<br>
test zip: 34145<br>
test zip: 34135<br>
test zip: 33928<br>
test zip: 33901<br>
test zip: 33904<br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:45:32.317

在不知道你的桌子是什么样子的情况下，我会说这是一种昂贵的方法。我建议从您的表格中创建一个所有城市的数组，并使用邮政编码键入它们。您将无需多次运行查询。

```
 $cities = mysql_query("SELECT * from us");
    $cityArray = array();
    while($row = mysql_fetch_row($cities, MYSQL_ASSOC)){
        $cityArray[$row['code']] = $row['city'];
    }

    foreach($locationzips as $zip) {
        print 'Test Zip:' . $zip . '<br>';
        print 'Test City:' . $cityArray[$zip] .'<br>';
    } 
```

我可以开始抱怨不使用 mysql 扩展（即 mysql_*）函数......我不会但只会说，你应该考虑替换它们；PHP 将弃用并删除它们。考虑使用 PDO 或 MySQLi。我想你会发现上面的块更有效，更容易测试/调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:01:03.460

a) 我无法使用以下脚本 + 示例数据重现该行为

```
<?php
mysql_connect('localhost', 'localonly', 'localonly') or die(mysql_error());
mysql_select_db('test') or die(mysql_error());
setup();
$locationzips = array(34110,34145,34135,33928,33901,33904);

foreach ($locationzips as $key => $zip) {
    $getcities = mysql_query("SELECT * FROM tmp_us WHERE code = '$zip'") or die(mysql_error());
    echo 'test zip: '.$zip."\n";
    while($row = mysql_fetch_assoc($getcities)) {
        $city = $row['city'];
        echo 'test city: '.$city."\n";
    }
}

function setup() {
    mysql_query('
        CREATE TEMPORARY TABLE tmp_us (
            id int auto_increment,
            city varchar(64),
            code varchar(16),
            primary key(id)
        )
    ') or die(mysql_error());

    for($code=33901; $code<=34145; $code++) {
        foreach(range('a','d') as $foo) {
            $city = $code.'_'.$foo;
            $stmt = sprintf("INSERT INTO tmp_us (city,code) VALUES('%s','%s')", $city, $code);
            mysql_query($stmt) or die(mysql_error());
        }
    }
} 
```

b）例如使用 IN 运算符时，您不需要多个查询

```
<?php
mysql_connect('localhost', 'localonly', 'localonly') or die(mysql_error());
mysql_select_db('test') or die(mysql_error());
setup();
$locationzips = array(34110,34145,34135,33928,33901,33904);

$stmt = sprintf("SELECT * FROM tmp_us WHERE code IN ('%s') ORDER BY code", join("','", $locationzips));
$getcities = mysql_query($stmt) or die(mysql_error());
$current_code = null;
while( false!==($row=mysql_fetch_assoc($getcities)) ) {
    if ( $current_code!=$row['code'] ) {
        $current_code = $row['code'];
        echo 'zip: ', $current_code, "\n";
    }
    echo '  city: ', $row['city'], "\n";
}

function setup() {
    mysql_query('
        CREATE TEMPORARY TABLE tmp_us (
            id int auto_increment,
            city varchar(64),
            code varchar(16),
            primary key(id)
        )
    ') or die(mysql_error());

    for($code=33901; $code<=34145; $code++) {
        foreach(range('a','d') as $foo) {
            $city = $code.'_'.$foo;
            $stmt = sprintf("INSERT INTO tmp_us (city,code) VALUES('%s','%s')", $city, $code);
            mysql_query($stmt) or die(mysql_error());
        }
    }
} 
```

印刷

```
zip: 33901
  city: 33901_a
  city: 33901_b
  city: 33901_c
  city: 33901_d
zip: 33904
  city: 33904_d
  city: 33904_c
  city: 33904_b
  city: 33904_a
zip: 33928
  city: 33928_a
  city: 33928_b
  city: 33928_c
  city: 33928_d
zip: 34110
  city: 34110_d
  city: 34110_c
  city: 34110_b
  city: 34110_a
zip: 34135
  city: 34135_d
  city: 34135_c
  city: 34135_b
  city: 34135_a
zip: 34145
  city: 34145_a
  city: 34145_b
  city: 34145_c
  city: 34145_d 
```

c) mysql 扩展被标记为已弃用。改用[PDO](http://docs.php.net/pdo)之类的东西

# javascript - 为什么 JavaScript 将我的 < 转换为 >

> ID：12894760
> 
> 赞同：0
> 
> 时间：2012-10-15T11:33:11.707
> 
> 标签：javascript

JavaScript 将 my`<`转换为`&gt;`. 我想提醒它，但我的消息带有编码标记，例如`@#&amp;*()}{&gt;?&gt;?`- 如何**正常显示它**但**防止**作为 HTML 代码执行？

```
<span id="ID" onClick="alertIt(this.id);">

    <p>Some string with special chars: ~!@#&*()}{>?>?>|{">@#$#^#$</p>

    <p>Why when clicked it gives something like this:</p>

    <p>'<br>
    Some string with special chars: ~!@#&amp;*()}{&gt;?&gt;?>|... and so on
    <br>'</p>

</span>

<script type="text/javascript">

function alertIt(ID)
{

    var ID = ID;
    var content = document.getElementById(ID).innerHTML;

    alert(content);

}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:47:24.637

使用`innerText`而不是`innerHTML`. [http://jsfiddle.net/WVf95/](http://jsfiddle.net/WVf95/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:46:32.273

您的问题是您使用错误的方法来获取要显示的文本`alert()`。

某些字符在 HTML 文本中是非法的（它们用于 HTML 标记和实体）。`innerHTML`将确保文本正确转义（即您可以看到标签和转义文本）。

如果您想在 中查看标签和文本`alert()`，则没有解决方案。

如果您只想要文本，那么您将不得不自己提取它。对此没有内置支持。实施起来也不是很简单。我建议在您的页面中包含[jQuery](http://jquery.com/)；然后你可以得到文本：

```
function alertIt(ID) {
    alert($(ID).text());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:42:25.757

使用`textContent`instaed of `innerHTML`or`innerText`是一种解决方案。

# unix - 在文件中搜索精确的多个模式并在模式匹配时删除行

> ID：12894762
> 
> 赞同：3
> 
> 时间：2012-10-15T11:33:30.193
> 
> 标签：unix, sed, awk, grep

例如，内容如下的文件，其中不包含任何重复条目：

```
100
10012
12345
12387
123
123456344 
```

如果模式匹配，我想在上面的文件中搜索`100`并`12345`删除该行。

我也想在一个命令中做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T11:35:11.920

我会简单地做

```
egrep -v '^(100|12345)$' file.in > file.out 
```

或者，使用 sed

```
sed -n '/^\(100\|12345\)$/!p' file.in > file.out 
```

你甚至不需要第二个文件：

```
sed -ni '/^\(100\|12345\)$/!p' file.in 
```

（见评论；严格来说，会创建一个临时文件，然后替换输入文件，但这对用户来说是透明的）

如您所见，正则表达式或多或少保持不变（除了您不需要在 egrep 中转义 ()|）。如果一行中有多个单词，但只想匹配整个单词，则可以使用以下 sed 正则表达式：

```
sed -n '/\<\(100\|12345\)\>/!p' file.in > file.out 
```

这将匹配行`100`，`123 100 123`但不是`123 100123`。

要获得与 相同的行为`grep`，请使用该`-w`选项（感谢 Janito）：

```
egrep -wv '(100|12345)' file.in > file.out 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-23T14:54:36.213

```
sed '/\(100\|12345\)/d' file.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T11:41:30.450

如果数字必须完全匹配，您可以使用扩展的 grep 模式，如下所示：

```
 grep -v -E '^(100|12345)$' inputfile 
```

这说：*打印所有不是 100 或 12345 的行*。如果数字只需要在行首匹配，请使用

```
 grep -v -E '^(100|12345)' inputfile 
```

如果他们可以在任何地方匹配，请使用

```
 grep -v -E '(100|12345)' inputfile 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T12:00:58.673

一种使用方式`sed`：

```
sed '/^\(100\|12345\)$/d' file.txt 
```

结果：

```
10012
12387
123
123456344 
```

# objective-c - UIGestureRecognizers 依赖项

> ID：12894763
> 
> 赞同：0
> 
> 时间：2012-10-15T11:33:32.007
> 
> 标签：objective-c, ios, uiview, uigesturerecognizer, touches

我有一个`UIView`这样的`UILongPressGestureRecognizer`：

```
 movementGestureRecognizer = [[UILongPressGestureRecognizer alloc] init];
    [movementGestureRecognizer setDelegate:self];
    [movementGestureRecognizer setMinimumPressDuration:0.0f];
    [self addGestureRecognizer:movementGestureRecognizer]; 
```

看名字就知道了，习惯了，一长按就`UIView`可以左右移动了。

问题是，我还希望能够添加一些其他类型的手势，例如：

```
 optionsGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(options:)];
        [optionsGestureRecognizer setNumberOfTapsRequired:2];
        [self addGestureRecognizer:optionsGestureRecognizer]; 
```

问题是，我无法打电话`options:`，因为`movementGestureRecognizer`“吸”了所有的手势。有没有办法阻止、取消`movementGestureRecognizer`或延迟呢？

* * *

**编辑 1.0**

如果我执行以下操作，`options:`我可以拨打电话：`TapGestureRecognizer`

```
 [movementGestureRecognizer setMinimumPressDuration:0.1f]; 
```

尽管如此，就可用性而言，它并不是完美的解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:35:56.327

通过执行以下操作，我能够找到解决方案：

1）在 my 上实现一个“状态机” ，根据它的状态`UIView`禁用和启用。`UIGestureRecognizers`

2) 使用 a`UIPanGestureRecognizer`来移动`UIView's`。

3）还有[这个](https://stackoverflow.com/questions/1481826/dragging-an-uiview-inside-uiscrollview?rq=1)问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:25:12.990

轻击和长按之间的区别在于您在将手指从触摸表面释放之前按住了多长时间。因此，您希望最小的按下持续时间大于 0。

此外，您还可以执行以下操作：

```
movementGestureRecognizer.delaysTouchesBegan = NO;
movementGestureRecognizer.delaysTouchesEnded = NO; 
```

这将允许系统识别轻按和长按。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:57:33.263

我不太确定，但你可以尝试`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`像这样实现委托吗：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

此外，您可以像这样指定手势识别器之间的依赖关系：

```
[optionsGestureRecognizer requireGestureRecognizerToFail: movementGestureRecognizer]; 
```

我建议您阅读[UIGestureRecognizer 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)中的详细信息！

[您还可以在此处](https://stackoverflow.com/questions/2627934/simultaneous-gesture-recognizers-in-iphone-sdk/3319426#3319426)找到详细说明同一主题的好帖子！

# ruby-on-rails - Ruby / ROR 使用 or 赋值（复选框的默认值）

> ID：12894765
> 
> 赞同：0
> 
> 时间：2012-10-15T11:33:38.600
> 
> 标签：ruby-on-rails, ruby

我正在尝试为 ROR 中的复选框分配默认值。以下是继承权：

1.  检查值是否在参数中（url 查询字符串）
2.  检查它是否在会话变量中
3.  如果两者都不是，则默认为所有可能的值并将@rates 设置为所有可能的值

我写了以下代码：

```
@all_rates = Rates.all_rates
rates_all = {} 
@all_rates.each {|rate| rates_all[rate] = "1"} 
p rates_all
@rates = params[:rates] ||= session[:rates] ||= rates_all
puts @rates.length, @rates 
```

当 ip rates_all 时，我得到了哈希值，但是当我检查 @rates.length 它没有被分配时，我得到一个 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:08:36.200

你检查是否`params[:rates]`为零？因为如果它是一个空哈希，那么它仍然是一个对象，只是没有任何值。但是空的哈希对象无论如何都会被分配`@rates`，导致rates也是一个空的哈希对象，长度为0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:29:49.643

试试这个：

```
@rates = case 
  when params[:rates].present?
    params[:rates]
  when session[:rates].present?
    session[:rates]
  else 
    Rates.all_rates.inject({}) { |hsh, rate| hsh.merge(rate => '1') }
end 
```

侧边栏：您的型号名称应该是单数`Rate`。您示例中的`||=`语法无效。应该只是`||`。

# c# - 使用数据源清除 datagridview

> ID：12894766
> 
> 赞同：0
> 
> 时间：2012-10-15T11:33:44.107
> 
> 标签：c#, winforms

我的应用程序有一个通过 mysql 连接器显示数据的 datagridview，我想清除或刷新数据网格，但不知道如何。

我试过了

```
dataGridView2.DataSource = null; 
```

但它不会清除数据源。

这是我的代码

```
using MySql.Data.MySqlClient; 

Boolean DataLoaded = false;
    string SQL = null;

    MySqlConnection MysqlConn;
    MySqlCommand WerkDataCommand = new MySqlCommand();
    MySqlDataAdapter WerkDataAdapter = new MySqlDataAdapter();
    DataTable WerkData = new DataTable();

private void gegevensOphalenBTN_Click(object sender, EventArgs e)
    {
        MysqlConn = new MySqlConnection();

        MysqlConn.ConnectionString = "server=myserver;" + "user id=user;" + "password=***;" + "database=database";

        SQL = "SELECT * FROM werkverslagen";

        try
        {
            dataGridView2.DataSource = null;
            MysqlConn.Open();

            WerkDataCommand.Connection = MysqlConn;
            WerkDataCommand.CommandText = SQL; 

            WerkDataAdapter.SelectCommand = WerkDataCommand;
            WerkDataAdapter.Fill(WerkData);

            dataGridView2.DataSource = WerkData;
        }
        catch (MySqlException myerror)
        {
            MessageBox.Show("Database gives the following error: " + myerror.Message);
        }
        finally
        {
            MysqlConn.Close();
            MysqlConn.Dispose();
            button4.Enabled = true;
        }
    } 
```

它仍将保留数据源并将相同的行添加到网格中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T11:48:40.870

你只需要这样做：

```
dataGridView2.Rows.Clear();
dataGridView2.Refresh(); 
```

# mysql - Mysql 5.1 空间重叠为什么不能正常工作？

> ID：12894767
> 
> 赞同：0
> 
> 时间：2012-10-15T11:33:54.090
> 
> 标签：mysql, geospatial

我正在对 MySQL 5.1 上的空间操作进行一些测试，并且发现了一些将多多边形与多边形重叠的问题。测试集 1) 多边形：上面有 2 个多边形，一个代表法国大陆，另一个代表科西嘉岛 2) 多边形。只是一个长方形。3）多面体和多边形，不重叠。使用 JTS 测试生成器进行测试 4) MySQL 返回重叠。

我做错了什么？你知道重叠它是否考虑了多面体边界框而不是多面体边界（看起来就是这种情况）。

提前致谢，

哈维

这里是测试查询：

```
SELECT   overlaps(
GeomFromText('MULTIPOLYGON(
((
-1.5719044 45.66331767,
-1.66445017 44.15596196,
-2.09633041 43.35382557,
-1.44851005 42.79046377,
0.98852813 42.40442147,
2.16077434 42.15335565,
3.57980926 42.24476801,
3.36386913 42.9035504,
4.13508385 43.24156757,
6.44872768 42.69984551,
8.00528012 44.22125179,
7.43172878 44.63085344,
7.47952458 45.30714395,
6.9537692 46.70140581,
8.10087187 47.70798437,
8.19646379 48.47416978,
8.67442321 49.16649286,
5.42429902 49.94163752,
4.75515576 50.46172136,
2.07858291 51.36572924,
1.1226639 50.82543226,
0.59690852 50.21768192,
-0.69358204 49.6640024,
-1.98407259 50.06452024,
-2.55762393 49.5090723,
-1.93627663 48.9472454,
-2.55762393 48.88442555,
-3.99150219 49.16649286,
-5.37758466 48.60075831,
-5.42538062 47.90060118,
-4.03929815 47.41771923,
-2.84439951 46.96299696,
-2.03186838 46.2405562,
-1.5719044 45.66331767,
-1.5719044 45.66331767
)),
((
7.03485087 43.06152362,
8.23794566 42.56366976,
8.19646379 41.73912551,
8.67442321 41.09395768,
9.86932185 41.20193051,
9.86932185 42.72995934,
9.1523828 43.49754453,
8.23794566 42.56366976,
7.03485087 43.06152362,
7.03485087 43.06152362
))
)
')
, 

GeomFromText('POLYGON((
1.1578032214844 40.974486726133,
1.1578032214844 41.79873497231,
3.1820341785157  41.79873497231,
3.1820341785157 40.974486726133,
1.1578032214844 40.974486726133
))') 
```

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:58:34.827

Overlaps 和 MBROverlaps 在 MySQL 5.1 上是同一个函数。我错过了对[文档](http://dev.mysql.com/doc/refman/5.1/en/functions-for-testing-spatial-relations-between-geometric-objects.html)的评论：

***注意** 目前，MySQL 并未按照规范实现这些功能。那些实现的返回与相应的基于 MBR 的函数相同的结果。*

似乎从 MySQL 5.6 开始，mysql 将支持多边形上的重叠[ST_Overlaps](http://dev.mysql.com/doc/refman/5.6/en/functions-for-testing-spatial-relations-between-geometric-objects.html#function_st-overlaps)。

# php - 在php中将时间戳转换为日期

> ID：12894769
> 
> 赞同：2
> 
> 时间：2012-10-15T11:34:02.237
> 
> 标签：php, oracle11g, cakephp-1.3

我有`timestamp`数据类型的 oracle 数据库字段。我想将 cakephp 控制器中的这个值转换为日期格式，它不能正常工作，它显示 1969 年。

`28-NOV-07 11.49.55.000000 AM`这是在找到数据库之后出现的，我想将其转换为`28.11.07 11:49:55.000`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:44:31.703

你可以尝试这样的事情：

```
$timestamp = "28-NOV-07 11.49.55.000000 AM";
$date = DateTime::createFromFormat( 'd-M-y h.i.s.u A', $timestamp ); 
```

获得日期后，只需以所需格式创建一个新日期。

虽然我还没有测试过，但类似的东西应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:14:04.677

我不得不这样做很长的路要走。表示使用正则表达式解析日期并使用 mktime() 获取 unix 时间戳。在 PHP 中它看起来像这样：

```
// our date in oracle-style 
$orcl_date = "22-MAY-13 12.00.00.000000 AM";

// painfully extract date related parts
preg_match( '/^(\d{2})-(\w{3})-(\d{2})\s(\d{2})\.(\d{2})\.(\d{2})\.(\d{6})\s(AM|PM)/' , $orcl_date , $matches );
@list( $all , $day , $month , $year , $hour , $minute , $sec , $minisec , $ampm ) = $matches;

// do AM/PM illogical behaviour
if ( $ampm == 'AM' ) { // 12 AM (midnight) will result in zero.
    if ( $hour == 12 )
        $hour -=  12;
} else { 
    if ( $hour != 12 ) // 12 pm (high noon) 
        $hour +=  12;
}

$month = array_search( $month , array("","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEZ" ) );

// oracle does not give us any information about the century. We assume that it's the current one.
$year += 2000;

// make a unix timestamp.
$timestamp = mktime( $hour , $minute , $sec , $month , $day , $year );

$result = strftime('%Y-%m-%d %H:%M:%S',$timestamp); 
```

# excel - 如何插入空格

> ID：12894772
> 
> 赞同：0
> 
> 时间：2012-10-15T11:34:06.943
> 
> 标签：excel, vba

以下代码浏览 excel 工作簿并允许您选择多个工作簿并将它们全部粘贴到一张表中，一切正常，但我的问题是当它粘贴它们时，它不会在它们之间留下空间来分隔文件。请任何人帮我。

```
Sub Button4_Click()
Dim fileStr As Variant
Dim wbk1 As Workbook, wbk2 As Workbook
Dim ws1 As Worksheet

fileStr = Application.GetOpenFilename(FileFilter:="microsoft excel files (*.xlsx), *.xlsx", Title:="Get File", MultiSelect:=True)
Set wbk1 = ActiveWorkbook
Set ws1 = wbk1.Sheets("Sheet3")

For i = 1 To UBound(fileStr)

MsgBox fileStr(i), , GetFileName(CStr(fileStr(i)))

Set wbk2 = Workbooks.Open(fileStr(i))
wbk2.Sheets(1).UsedRange.Copy ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row, 1)

wbk2.Close

Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:57:57.357

如果我正确解释了您的问题（以及对评论的回复），要在从不同工作簿复制的数据之间放置空格，请在代码中更改此行：

```
ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row, 1) 
```

对此：

```
ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row + 2, 1) 
```

使用您的原始代码，您实际上是将一个工作簿中的最后一行数据替换为另一个工作簿的第一行。添加`+2`将在复制的最后一个数据集下方 2 行开始粘贴操作，这将在数据集之间为您提供 1 个空白行。显然，调整+2以获得更多空间:)

**更新**

我已将您的代码修改为仅在第一个文件拉取时复制标题。

```
Sub Button4_Click()

Dim fileStr As Variant
Dim wbk1 As Workbook, wbk2 As Workbook
Dim ws1 As Worksheet

fileStr = Application.GetOpenFilename(FileFilter:="microsoft excel files (*.xlsx), *.xlsx", Title:="Get File", MultiSelect:=True)
Set wbk1 = ActiveWorkbook
Set ws1 = wbk1.Sheets("Sheet3")

For i = 1 To UBound(fileStr)

    MsgBox fileStr(i), , GetFileName(CStr(fileStr(i)))

    Set wbk2 = Workbooks.Open(fileStr(i))

    If i = 1 Then ' if it's the first file, copy the headers

        wbk2.Sheets(1).UsedRange.Copy

    Else 'otherwise only copy the data (assumes headers are always in row 1

        wbk2.Sheets(1).Intersect(wbk2.Sheets(1).UsedRange, wbk2.Sheets(1).UsedRange.Offset(1)).Copy

    End If

    ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row + 2, 1).PasteSpecial xlPasteAll

    wbk2.Close

Next i

End Sub 
```

# apache-httpclient-4.x - 通过 httpgetClient 传递参数

> ID：12894775
> 
> 赞同：0
> 
> 时间：2012-10-15T11:34:13.020
> 
> 标签：apache-httpclient-4.x

我需要点击 URL 并获得响应，但是通过这种方法我只能获得一条消息，而我想传递多个值作为响应。

这是方法：

```
public String getOutputFromUrl(String url) 
    {
        Log.d("in getOutputFromUrl", "getOutputFromUrl");
        String[] output = null;
        try {
            httpClient = new DefaultHttpClient();
            httpGet = new HttpGet(url);
            httpResponse = httpClient.execute(httpGet);
            httpEntity = httpResponse.getEntity();
            output = EntityUtils.toString(httpEntity);
        } catch (UnsupportedEncodingException e) {
            Log.d("in UnsupportedEncodingException", e.toString());
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            Log.d("in geClientProtocolExceptiontOutputFromUrl",  e.toString());
            e.printStackTrace();
        } catch (IOException e) {
            Log.d("in getOutputFromUrl", e.toString());
            e.printStackTrace();
        }
        Log.d("in getOutputFromUrl:output===>>", output);

        return output;
     } 
```

我希望方法的返回类型是 String[] 或任何类的对象，但是

```
 output = EntityUtils.toString(httpEntity) 
```

这一行只接受一个字符串；没有其他对象或字符串数​​组，所以我不能在这个输出变量中保留多个值作为来自 URL 链接的响应传递

# objective-c - 音高变化类似于会说话的汤姆

> ID：12894777
> 
> 赞同：1
> 
> 时间：2012-10-15T11:34:19.270
> 
> 标签：objective-c, ios

我正在使用 Dirac 库来更改录制声音的音高，类似于 Talking Tom 应用程序。当我包含这个库时，一切都很完美。但我面临一个问题，实际上这不是问题，处理延迟。在我将输入音频录制为 .caf 文件后，同一文件正在处理以转换为 .aif，其中包含改变音高的录制声音的音频。对于这个过程，它需要一些时间。因此，当我录制声音并尝试自动播放时，由于这种转换处理，我会延迟播放录制的声音。我的要求是克隆会说话的汤姆应用程序，其中播放在录制后立即发生。我做错了吗？如果有人能帮我解决这个问题，真的很有帮助。我是否需要发送我正在使用的代码部分。

提前致谢

# android - 如何使用 android 连接自定义 wordpress

> ID：12894781
> 
> 赞同：-2
> 
> 时间：2012-10-15T11:34:28.240
> 
> 标签：android, web-services, wordpress

我是 WordPress 新手，我将在 Android 上构建一个应用程序，所有数据都将存储在 WordPress 数据库中（如用户和帖子）。我应该怎么做才能让我的 WordPress 通过 android 应用程序向注册用户显示其他数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:48:20.013

您可以使用开源项目（适用于 Android 的 WordPress）。源代码可在此处获取[https://android.trac.wordpress.org/browser](https://android.trac.wordpress.org/browser)。您可以根据自己的要求定制这个..

# android - 链接共享 fmod 库

> ID：12894783
> 
> 赞同：1
> 
> 时间：2012-10-15T11:34:33.177
> 
> 标签：android, android-ndk, fmod

> **可能重复：**
> [纯粹从本机代码加载 FMOD](https://stackoverflow.com/questions/11427067/loading-fmod-purely-from-native-code)

我正在尝试在 android ndk 项目上链接 fmod 库，但我遇到了致命的异常错误。

我的 android.mk 看起来像这样：

```
LOCAL_PATH := $(call my-dir)

#FMOD Ex Shared Library#########

include $(CLEAR_VARS)

LOCAL_MODULE            := fmodex
LOCAL_SRC_FILES         := libfmodex.so
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/fmod

include $(PREBUILT_SHARED_LIBRARY)

#lua############################

include $(CLEAR_VARS)

LOCAL_MODULE    := lua
FILE_LIST := $(wildcard $(LOCAL_PATH)/lua/*.c)
LOCAL_SRC_FILES := $(FILE_LIST:$(LOCAL_PATH)/%=%)

include $(BUILD_STATIC_LIBRARY)

#libpng########################

include $(CLEAR_VARS)

LOCAL_CFLAGS := 

LOCAL_MODULE    := libpng
FILE_LIST := $(wildcard $(LOCAL_PATH)/libpng/*.c)
LOCAL_SRC_FILES := $(FILE_LIST:$(LOCAL_PATH)/%=%)

include $(BUILD_STATIC_LIBRARY)

#ghost##########################

include $(CLEAR_VARS)

LOCAL_MODULE := ghost
FILE_LIST := $(wildcard $(LOCAL_PATH)/ghost/*.cpp)
LOCAL_SRC_FILES := $(FILE_LIST:$(LOCAL_PATH)/%=%)
LOCAL_LDLIBS := -llog -landroid -lEGL -lGLESv2 -L$(SYSROOT)/usr/lib -ldl -L$(SYSROOT)/usr/lib -lz

# Enable debugging.
APP_OPTIM    := debug

# Support for additional libraries
#LOCAL_CFLAGS := -DANDROID_NDK -Wno-psabi
LOCAL_C_INCLUDES := $(LOCAL_PATH)/libpng/ $(LOCAL_PATH)/lua/
LOCAL_SHARED_LIBRARIES := fmodex
LOCAL_STATIC_LIBRARIES := libpng android_native_app_glue lua

include $(BUILD_SHARED_LIBRARY)

$(call import-module,android/native_app_glue) 
```

ndk-build 命令成功，没有任何错误，但是当我编译时，出现以下错误：

```
10-15 14:25:49.220: E/AndroidRuntime(16255): FATAL EXCEPTION: main
10-15 14:25:49.220: E/AndroidRuntime(16255): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.native_activity/android.app.NativeActivity}: java.lang.IllegalArgumentException: Unable to load native library: /data/data/com.example.native_activity/lib/libghost.so
10-15 14:25:49.220: E/AndroidRuntime(16255):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at android.os.Looper.loop(Looper.java:130)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at android.app.ActivityThread.main(ActivityThread.java:3701)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at java.lang.reflect.Method.invokeNative(Native Method)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at java.lang.reflect.Method.invoke(Method.java:507)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at dalvik.system.NativeStart.main(Native Method)
10-15 14:25:49.220: E/AndroidRuntime(16255): Caused by: java.lang.IllegalArgumentException: Unable to load native library: /data/data/com.example.native_activity/lib/libghost.so
10-15 14:25:49.220: E/AndroidRuntime(16255):    at android.app.NativeActivity.onCreate(NativeActivity.java:199)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-15 14:25:49.220: E/AndroidRuntime(16255):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
10-15 14:25:49.220: E/AndroidRuntime(16255):    ... 11 more 
```

如果我删除以下行，代码将在没有 fmod 支持的情况下正常编译和运行。

```
include $(CLEAR_VARS)
LOCAL_MODULE            := fmodex
LOCAL_SRC_FILES         := libfmodex.so
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/fmod

include $(PREBUILT_SHARED_LIBRARY) 
```

和

```
LOCAL_SHARED_LIBRARIES := fmodex 
```

我尝试使用 fmod 示例编译本机活动，令我惊讶的是它起作用了。我什至将我的文件位置调整为示例，但没有帮助。

任何帮助，将不胜感激。

# android - 如何在不取消滚动的情况下检测 TextView 上的投掷？

> ID：12894785
> 
> 赞同：1
> 
> 时间：2012-10-15T11:34:37.077
> 
> 标签：android, scroll, textview, onfling

尝试使用 simpleGestureDetector 检测 TextView 上的投掷：

```
public void onCreate(Bundle savedInstanceState) {

    ...

    textContent.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent ev) {
                return gestureDetector.onTouchEvent(ev);
        }        
    });
}

class MyGestureDetector extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            if(foo) {
                fooBar();
                return true;
            }
        return super.onFling(e1, e2, velocityX, velocityY);
    }
} 
```

从某种意义上说，`fooBar()`如果满足条件，我的代码就会运行`foo`，但我发现的问题是，当条件不满足时，返回 super.onFling() 会导致取消投掷，因为 textview手指抬起后，滚动不再继续。这是 XML：

```
<RelativeLayout
    android:id="@+id/main_area"
    android:layout_height="match_parent"
    android:layout_width="match_parent">
    <TextView
        android:id="@+id/main_text"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="10dp"
        android:textSize="16dp"
        android:lineSpacingExtra="2dip"
    />
</RelativeLayout> 
```

有什么办法可以保持普通的滚动行为并仍然检测到投掷？

编辑：对不起，我的错，这与手势检测器无关，这只是因为我将 TextView 从其 ScrollView 中取出 - 由于某种原因，TextViews 似乎没有像 ScrollViews 那样平滑（惯性）滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:45:14.207

scroll 和 fling 事件之间的区别在于用户在移动结束时抬起手指以使其成为 fling。（而且速度更高）。

因此，我认为不可能将这两个事件结合起来，因为它们（太）相似于检测（在结束它们之前）正在执行哪个事件。同样从用户的角度来看，同时使用两种手势是令人困惑的（由于相似性）。

所以答案是：不，没有办法保持普通的滚动行为并且仍然检测到投掷。

（至少我过去尝试过并且没有成功以正确的方式使用这两个事件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:41:50.790

我不确定这是否会是您的问题，但是`true`如果您的条件满足，您为什么要返回？如果您不希望使用该事件，则应返回`false`（或`super.onFling`）。这就是返回值的用途。

# jquery - 无法使重置选择有效

> ID：12894786
> 
> 赞同：5
> 
> 时间：2012-10-15T11:34:41.013
> 
> 标签：jquery, forms, select, reset, uniform

我正在开发一个需要重置表单的网站，该表单是使用 jQuery Uniform 构建的，但问题是我无法进行任何重置。

这是我的标题代码：

```
$j(function() 
{
    // Binds all buttons and events 
    $j('#changecountry').click(countryPopup);
    $j('#catalogsearch').click(toggleSearch);
    $j('#closesearch').click(toggleSearch);

    /* Centers content on page according to phone width */
    centerContent('.header-links', '.header-links ul');
    centerContent('.footer-links', '.footer-links ul');

    /* Other instancing */
    $j('select').uniform({
        resetSelect:    '.reset'
    });

    $j('input[type=radio]').uniform();
    $j('input[type=checkbox]').uniform();
    activateLinks();
    arrow_position();
    front_page_accordion();

}); 
```

下一部分是如下形式：

```
<select class="uniform gift-layer" name="cost" id="cost">
<option value="0"><?php echo $this->__('What is your price range?'); ?></option>
<?php foreach($prices as $price) : ?>
    <option value="<?php echo $price['value']; ?>"><?php echo $price['label']; ?></option>
<?php endforeach; ?>
</select> 
```

有没有人可以告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:13:58.360

```
$j('select').uniform({
    resetSelector:    '.reset'
 }); 
```

代替

```
$j('select').uniform({
        resetSelect:    '.reset'
}); 
```

来源：[http ://uniformjs.com/#resetSelector](http://uniformjs.com/#resetSelector)

# jquery - “按需”使用砌体的插件

> ID：12894788
> 
> 赞同：0
> 
> 时间：2012-10-15T11:34:49.647
> 
> 标签：jquery, html, image, jquery-masonry

我有一个包含越来越多图像的页面。就像一个画廊，我正在使用`Masonry`和`Lightbox`排序它，并给它一个画廊方面。该网站几乎只是一堆图像，我希望图像彼此适合（砌体可以处理）。但是画廊正在增长，（已经有 1000 多张图片），因此，页面开始需要很长时间来整理。是否有一个 js 插件可以让我进行砌体分类，并稍后为图像加载缩略图？像点播一样。或者当到达页面底部时，开始加载另一组图像......

有没有人给我指一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:41:25.287

你看过这个例子吗？ [http://masonry.desandro.com/demos/infinite-scroll.html](http://masonry.desandro.com/demos/infinite-scroll.html)

# android - 星号拨号计划与 DTMF 音调配合良好。不使用手机

> ID：12894789
> 
> 赞同：0
> 
> 时间：2012-10-15T11:34:52.817
> 
> 标签：android, iphone, asterisk, dtmf

星号服务器正在运行 chan dongle driver.DTMF 音调在这里用于更改正在播放的音频文件。这是扩展文件。

```
exten => 123,1,Answer()
exten => 123,n,Background(main-menu)
exten => 123,n,WaitExten()
exten => 2,1,Playback(digits/2) 
```

此扩展仅在我使用陆地电话时才有效。如果我使用手机，这个 DTMF 不起作用。这个怎么用手机？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:41:26.230

您在这里遇到的是手机的常见问题。但是，您没有提供足够的信息来真正解决您的问题。可以完成从手机响应 DTMF 的 Asterisk IVR（我一直这样做）。

也就是说，如果您使用 VoIP 将呼叫接到您的 PBX 上，您可以检查以下几个地方：

*   确保 DTMF 如果通过 RFC2833 传送给您，而不是音调。
*   确保您没有使用 GSM 等低带宽编解码器。
*   验证您正在使用的手机是否可以与其他**人的**IVR 一起使用，然后再将头撞到墙上，结果证明是运营商问题。

# c# - 如何在 Canvas（或任何其他 UI）上呈现 Awesomium webview？

> ID：12894793
> 
> 赞同：0
> 
> 时间：2012-10-15T11:35:02.037
> 
> 标签：c#, wpf, awesomium

如何在 Awesomium 1.7 中将 WebView 渲染到 WPFCanvas？（使用 C#） 在以前的 Awesomium 版本中，我曾经使用 WebControl 并将其添加为画布的子项。现在我想使用独立会话，这在 v1.7 中似乎是可行的，但我无法显示它。另外，我应该将 Webcontrol 与 WebSessions 和 WebViews 一起使用吗？我一无所知，因为那里还没有很多样品。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:42:29.573

您可以通过设置`WebControl.WebSession`属性以编程方式（在 WebControls 上可读写）或使用`WebSessionProvider`XAML 中的 a 来将 WebControls 与隔离会话一起使用。在这里阅读更多：[http ://wiki.awesomium.net/general-use/using-web-sessions.html](http://wiki.awesomium.net/general-use/using-web-sessions.html)

# .net - Cookie 在 IE 中的选项卡之间没有始终如一地共享

> ID：12894794
> 
> 赞同：6
> 
> 时间：2012-10-15T11:35:03.297
> 
> 标签：.net, internet-explorer, asp.net-mvc-2

有一个相当奇怪的问题，我确定是浏览器设置，所以虽然它不是严格的编程问题，但我想知道这里的人们是否在他们的开发工作中遇到过它并且可以提出解决方案/原因。

我的应用程序在 MVC 2 中并运行一个中央菜单系统，其中包含指向实际应用程序屏幕的链接都具有 target="_blank" 并因此在新窗口或新选项卡中打开，具体取决于用户通过浏览器设置的偏好。这一切在我们使用它的每个系统上都能正常工作，除了一个新的系统——我们正在设置一个新的 Citrix 桌面，并且在测试它时出现了奇怪的行为。我们可以登录，好的，然后在菜单中导航，但是当我们点击菜单链接时，90% 的时间新链接会以登录挑战打开，就好像浏览器不再有会话 cookie。但是，当我们返回主选项卡时，我们仍处于登录状态，并且可以正常浏览菜单。另一个非常奇怪的事情是偶尔我可以在新标签中加载屏幕并正常运行，但是从菜单中再次打开它失败了，我们再次收到登录挑战。一旦我登录到一个新标签，其余的都可以正常打开，这甚至更奇怪。

我猜这是某种标签隔离设置，但它似乎并不总是有效。如果有一个是已知的有点越野车？浏览器是 IE 8，我们在所有其他系统上都使用它，很好。任何可能导致这种情况发生的组策略设置，因为它发生在我们正在测试的用户登录上，但不是我的 - 我正在等待我们的网络管理员就管理员和用户之间的任何 GP 差异回复我，但我我想我会在这里问，以防他看不到任何明显的东西。

干杯 - MH

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T12:00:10.523

事实证明这是一个 IE 错误（这并不奇怪）——当浏览器在一个新的工作进程中生成一个新选项卡时，新进程无权访问会话 cookie。其他一些人发现了这一点，并停止生成新进程，虽然不是一个很好的解决方案，但似乎解决了这个问题。请注意，此问题也出现在 Yahoo 网站和所有其他使用会话 cookie 的网站上。真的不确定是哪种事件和情况的组合触发了这个（在我们的系统上只命中非管理员用户 - 我们已经查看了我们的 GPO 规则但没有发现任何明显的东西），但我认为 MS 确实需要修复它，因为如果它开始更频繁地触发它可能会完全削弱 IE。

这是暂时绕过该问题的链接，如果您自己被它击中。

[http://blogs.msdn.com/b/askie/archive/2009/03/09/opening-a-new-tab-may-launch-a-new-process-with-internet-explorer-8-0。 aspx](http://blogs.msdn.com/b/askie/archive/2009/03/09/opening-a-new-tab-may-launch-a-new-process-with-internet-explorer-8-0.aspx)

# python - 附加列表但错误“NoneType”对象没有属性“附加”

> ID：12894795
> 
> 赞同：86
> 
> 时间：2012-10-15T11:35:06.480
> 
> 标签：python, list

我有一个脚本，我在其中为每个用户提取值并将其添加到列表中，但我得到“'NoneType' 对象没有属性'append'”。我的代码就像

```
last_list=[]
if p.last_name==None or p.last_name=="": 
    pass
last_list=last_list.append(p.last_name)
print last_list 
```

我想在列表中添加姓氏。如果没有，则不要将其添加到列表中。请帮助注意：p 是我用来从我的模块中获取信息的对象，它具有所有 first_name ，last_name ， age 等......请建议......提前致谢

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2017-04-29T07:18:28.613

列表是可变的

改变

```
last_list=last_list.append(p.last_name) 
```

至

```
last_list.append(p.last_name) 
```

将工作

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-10-15T11:52:02.630

When doing `pan_list.append(p.last)` you're doing an inplace operation, that is an operation that modifies the object and returns nothing (i.e. `None`).

You should do something like this :

```
last_list=[]
if p.last_name==None or p.last_name=="": 
    pass
last_list.append(p.last)  # Here I modify the last_list, no affectation
print last_list 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2020-01-01T13:45:13.177

您不应该将其分配给任何变量，当您在列表中附加某些内容时，它会自动更新。仅使用：-

```
last_list.append(p.last) 
```

如果您再次将其分配给变量“last_list”，它将不再是一个列表（将成为一个无类型变量，因为您尚未为其声明类型）并且 append 在下一次运行中将变得无效。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-15T11:56:35.373

I think what you want is this:

```
last_list=[]
if p.last_name != None and p.last_name != "":
    last_list.append(p.last_name)
print last_list 
```

Your current if statement:

```
if p.last_name == None or p.last_name == "":
    pass 
```

Effectively never does anything. If p.last_name is none or the empty string, it does nothing inside the loop. If p.last_name is something else, the body of the if statement is skipped.

Also, it looks like your statement `pan_list.append(p.last)` is a typo, because I see neither pan_list nor p.last getting used anywhere else in the code you have posted.

# ruby - 从包含的文件中，如何获取包含文件的文件名？

> ID：12894796
> 
> 赞同：9
> 
> 时间：2012-10-15T11:35:07.780
> 
> 标签：ruby

为措辞不佳的问题标题道歉 - 不知道如何更好地表达！

在下面的代码中，当我执行时`ruby bar.rb`，我怎样才能让它输出`bar.rb`，而不是`foo.rb`？

在`foo.rb`：

```
module Foo
  def filename
    __FILE__
  end
end 
```

在`bar.rb`：

```
require_relative 'foo'
include Foo

puts filename # outputs 'foo.rb' 
```

这是一个库函数，每次执行某些代码时，都会记录该代码的位置（和 git ref）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:05:28.760

您的问题促使我打开 Ruby 解释器源代码，看看`__FILE__`实际是如何工作的。答案很有趣：它是在解析器内部实现的。词法分析器有一个特殊的标记类型`__FILE__`。当解析器看到该标记时，它将其转换为字符串常量，其中包含解析器正在处理的文件的名称。

从 ext/ripper/ripper.c 的第 14948 行开始：

```
case keyword__FILE__:
return NEW_STR(rb_external_str_new_with_enc(ruby_sourcefile, strlen(ruby_sourcefile),
                        rb_filesystem_encoding())); 
```

我认为这应该清楚地表明，尝试`__FILE__`返回包含文件的名称是完全不可能的，除非您破解 Ruby 解释器源代码，或者编写自己的预处理器，`__FILE__`在将 Ruby 源代码传递给解释器之前转换为其他东西！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:36:26.143

您可能会使用一个技巧。如果将块传递给方法，则可以使用块闭包来确定它的来源。就像是：

```
def filename(&blk)
  blk.eval "__FILE__"
end 
```

但同样，这意味着你必须通过一个街区。

老实说，我想知道您要完成什么，在制作一些常见的核心扩展方法之外的 b/c，这可能是您真正不想做的事情。

# artificial-intelligence - 神经网络输入

> ID：12894801
> 
> 赞同：0
> 
> 时间：2012-10-15T11:35:46.880
> 
> 标签：artificial-intelligence, neural-network

我真的不知道如何表达这个问题，所以请多多包涵。。

假设我正在开发一个神经网络，用于对田径比赛中的每个跑步者进行评分。我提供有关跑步者的神经网络信息，例如。win%，自上次运行以来的天数等。

我的问题是——在这种情况下，神经网络对跑步者进行评分，我可以给网络一个输入，比如比赛天气吗？例如，我给网络 1.00 表示热，2.00 表示冷，3.00 表示 OK .. ?

我问这个问题的原因是：神经网络的输出越大，跑步者就越好。因此，这意味着获胜百分比输入越高，评分就越高。如果我给神经网络输入值越大并不一定意味着跑步者越好，网络是否能够理解和使用/解释这个输入？

如果问题没有意义，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:35:45.253

神经网络所做的是映射输入和输出之间的关系。这意味着你必须为你的神经网络设定某种目标。此类目标的示例可以是“预测获胜者”、“预测每个跑步者的速度”或“预测比赛的完整结果”。当然，您可以尝试哪些示例取决于您有哪些可用数据。

如果您有一个大型数据集（例如，每个跑步者有几百场比赛），其中记录了结果时间和所有预测变量（包括天气），并且您确定天气与单个跑步者的表现之间存在*关系*，神经网络将能够很好地映射这种关系，即使它是每个跑步者的不同关系。

要记录的良好天气变量的示例可以是太阳强度 (W/m2)、逆风 (m/s) 和温度 (摄氏度)。然后可以使用这些变量对每个跑步者的表现进行建模，然后可以使用神经网络来预测跑步者的表现（注意这种方法需要每个跑步者一个神经网络）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T00:07:48.070

神经网络可以正确建模不相关的输入（通过为其分配低权重）和与所需输出成反比的输入（通过分配负权重）。神经网络在输入不断变化的情况下做得更好，所以你的例子`1.00 for hot, 2.00 for cold, 3.00 for OK ..`并不理想：更好的是`0.00 for hot, 1.00 for OK, 2.00 for cool`.

在没有真正连续关系的国家代码等情况下，最好的编码（从收敛的角度来看）是使用一组布尔属性 ( `isArgentina, isAustralia, ..., isZambia`)。尽管如此，即使没有这些，神经网络也应该能够对离散值的输入进行建模（即，*如果*国家相关并且将它们编码为数字，那么*最终*神经网络应该能够收敛到`87 (Kenya) is correlated with high performance`）。在这种情况下，可能需要更多的隐藏节点或更长的训练时间。

神经网络的全部*意义*在于在难以进行简单统计分析的情况下使用它们，所以我不同意另一个答案，即你应该预先判断你的数据。

# java - 如何以编程方式从菜单中删除 MenuItems？

> ID：12894802
> 
> 赞同：10
> 
> 时间：2012-10-15T11:35:53.483
> 
> 标签：java, android

我正在开发一些 Android 应用程序，并且我有一些菜单代码：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:showAsAction="ifRoom"
        android:id="@+id/menuItemToLeft"
        android:icon="@drawable/to_left" />
    <item
        android:showAsAction="ifRoom"
        android:id="@+id/menuItemToRight"
        android:icon="@drawable/to_right"/>
</menu> 
```

我使用“showAsAction”来在操作栏上显示这些项目。此外，我还有 3 个用于导航的选项卡。But there is the following task: remove (or set visibility as false) this items from Action bar when tab with 0 positions is selected. 但我不明白我该怎么做：

```
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    mViewPager.setCurrentItem(tab.getPosition());
    if (tab.getPosition()==0) {
    //some code
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-15T11:50:00.787

尝试不使用以下方式显示它们：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    menu.findItem(R.id.menuItemToLeft).setVisible(true);
    menu.findItem(R.id.menuItemToRight).setVisible(false);
    return true;
}
//true or false depending on your requirements 
```

或删除：

```
menu.removeItem(x); //where x is the number of the menu item from 0,1,... 
```

然后，您可能需要使用 menu.Add() 再次创建 MenuItem

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-01T16:45:04.113

一个非常小的解决方案：

```
public class MainActivity extends AppCompatActivity
        implements NavigationView.OnNavigationItemSelectedListener {
Menu myMenu;

protected void onCreate(Bundle savedInstanceState) {
.....
}

   @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        myMenu = menu;
        return true;
    }

 @Override
    public boolean onNavigationItemSelected(MenuItem item) {

int id = item.getItemId();
if (id == R.id.feedsenglish)
        {
            myMenu.findItem(R.id.allfeeds).setVisible(false);
        }
} 
```

# c++ - 从函数返回指向 wchar_t 的指针

> ID：12894803
> 
> 赞同：-4
> 
> 时间：2012-10-15T11:35:57.647
> 
> 标签：c++

为什么这段代码不起作用？

```
wchar_t path[300];
wchar_t *PathCreator(wchar_t *dir, wchar_t *fileName)
{
    int j = 0;
    while(j < 300)
    {
        path[j] = '\0';
        j++;
    }
    int i;
    i = 0;
    while(*dir != '*')
    {
        path[i] = *dir;
        i++;
        dir++;
    }
    wchar_t *t = fileName;  
    while(*t != '\0')
    {
        path[i] = *t;
        i++;
        t++;
    }
    path[i] = '\0';
    //std::wcout << path << std::endl;
    return path;
}
int _tmain(int argc, _TCHAR* argv[])
{ 
    std::wcout << PathCreator(L"A",L"B");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:43:15.027

你的循环是错误的，它不检查`dir`. 所以

```
while(*dir != '*' && *dir != '\0')
{
    path[i] = *dir;
    i++;
    dir++;
} 
```

不是

```
while(*dir != '*')
{
    path[i] = *dir;
    i++;
    dir++;
} 
```

# solr - Solr：不使用 DisMax 的附加提升查询 - 有可能吗？

> ID：12894810
> 
> 赞同：4
> 
> 时间：2012-10-15T11:36:36.547
> 
> 标签：solr, lucene, dismax

我有一个像这样的析取 Lucene 查询： `(clause_1 OR clause_2 OR ... OR clause_N)`我想在它上面添加一个附加提升查询，就像解析器中的`bq`参数一样。`DisMax`

我试过`{!edismax qf='' bq='my_boost_query'}(clause_1 OR clause_2 OR ... OR clause_N)`但它返回零结果。（我认为这可能是由空`qf`参数引起的）

是否可以在不使用`DisMax`格式重写我的查询的情况下做到这一点？`Lucene`也许查询解析器的一些特殊语法，比如`_val_`等等？或者可能是`DisMax`包装器完成了这项工作，但我只是在上面的查询语法中遗漏了一些东西？

# java - 注释 CXF (wsdl2java) 生成的包

> ID：12894811
> 
> 赞同：3
> 
> 时间：2012-10-15T11:36:40.640
> 
> 标签：java, jaxb, cxf, wsdl2java

我需要添加包级别注释（XmlJavaTypeAdapters 类型适配器）。问题是当我运行 wsdl2java 时，它会为该包生成 package-info.java 文件。

当我尝试添加自己的 package-info.java 时，出现错误：“类型 package-ingo 已定义”。

有没有办法将我的注释注入到 package-info.java？也许还有其他想法？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:11:23.043

经过一些研究，我使用了外部映射文件。对于所有与我有类似问题的人，我已经在下面描述了我的发现。

如果您使用“cxf-codegen-plugin”从 WSDL 生成源代码，则不能使用带有 package-info.java 的解决方案。这是因为生成的代码可能已经包含该文件。您也不能将注释添加到您的类，因为它是生成的。唯一的解决方案是提供您自己的映射器。

首先，您必须编写自定义映射器。之后，您应该定义 xjb 映射文件，最后将附加配置添加到您的 pom.xml。[您可以在此处](http://jaxb.java.net/guide/Using_different_datatypes.html%20here)阅读有关前两个步骤的信息。

要将外部映射文件添加到 cxf-codegen-plugin，您必须在插件定义中的配置节点中添加如下内容：

```
<defaultOptions>
    <bindingFiles>
        <bindingFile>${basedir}/src/main/resources/mapping.xjb</bindingFile>
    </bindingFiles>
    <noAddressBinding>true</noAddressBinding>
</defaultOptions> 
```

请注意，您不应该将额外的参数传递给 xjc，[因为](http://www.jroller.com/gmazza/entry/enhancing_jaxb_artifacts#BindingFile%20here)它不起作用。

希望这对任何人都有帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:23:49.303

我从未尝试过，但您可以尝试在 wsdl2java 命令中添加 -xjc-npa 标志。从理论上讲，这告诉 XJC 不要生成 package-info.java 而是将所有名称空间等粘贴到需要它的所有其他元素上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T14:10:43.797

我还需要为生成的代码添加注释。在生成 java 类之后，我使用了 maven-replacer-plugin 来执行此操作。您可以使用此解决方案来修改任何出现的文件。

这是相关的 pom.xml 位：

```
 <plugin>
            <groupId>com.google.code.maven-replacer-plugin</groupId>
            <artifactId>replacer</artifactId>
            <version>${replacer.plugin.version}</version>
            <executions>
                <execution>
                    <phase>process-sources</phase>
                    <goals>
                        <goal>replace</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <filesToInclude>target/generated-sources/cxf/com/BLAH/client/api/v4/*.java</filesToInclude>
                <filesToExclude>target/generated-sources/cxf/com/BLAH/client/api/v4/ObjectFactory.java,
                    target/generated-sources/cxf/com/BLAH/client/api/v4/package-info.java,
                </filesToExclude>
                <replacements>
                    <replacement>
                        <!-- Add @XmlRootElement in front of public class Blah -->
                        <token>public class (\w*)</token>
                        <value>@XmlRootElement(name ="$1") ${line.separator}public class $1</value>
                    </replacement>
                    <replacement>
                        <!-- Add the import for the XmlRootElement annotation to the file -->
                        <token>import javax.xml.bind.annotation.XmlType;</token>
                        <value>import javax.xml.bind.annotation.XmlType;${line.separator}import javax.xml.bind.annotation.XmlRootElement;</value>
                    </replacement>
                </replacements>
            </configuration>
        </plugin> 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T12:07:51.840

您可以提供 JAXB“绑定”，既可以内嵌在 WSDL 中，也可以作为单独的外部绑定文件提供，JAXB 将生成适当的适配器和所需的包级注释。有关示例，请参[见此问题。](https://stackoverflow.com/questions/5339615/jaxb-binding-file-xmladapters-and-package-name)

# javascript - 正则表达式匹配除括号中的所有单词 - javascript

> ID：12894812
> 
> 赞同：4
> 
> 时间：2012-10-15T11:36:43.013
> 
> 标签：javascript, regex

我正在使用以下正则表达式来匹配所有单词：

```
mystr.replace(/([^\W_]+[^\s-]*) */g, function (match, p1, index, title) {...} 
```

请注意，单词可以包含特殊字符，例如德语变音符号。如何匹配除括号内的单词之外的所有单词？

如果我有以下字符串：

```
here wäre c'è (don't match this one) match this 
```

我想得到以下输出：

```
here
wäre
c'è
match
this 
```

尾随空格并不重要。有没有一种简单的方法可以在 javascript 中使用正则表达式来实现这一点？

编辑：我不能删除括号中的文本，因为最终的字符串“mystr”也应该包含这个文本，而字符串操作将在匹配的文本上执行。“mystr”中包含的最终字符串可能如下所示：

```
Here Wäre C'è (don't match this one) Match This 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:47:46.763

尝试这个：

```
var str = "here wäre c'è (don't match this one) match this";

str.replace(/\([^\)]*\)/g, '')  // remove text inside parens (& parens)
   .match(/(\S+)/g);            // match remaining text

// ["here", "wäre", "c'è", "match", "this"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T06:58:39.093

托马斯，复活了这个问题，因为它有一个没有提到的简单解决方案，并且不需要替换然后匹配（一步而不是两步）。[（在对有关如何在 regex 中排除模式](https://stackoverflow.com/q/23589174)的一般问题进行一些研究时发现了您的问题。）

这是我们的简单正则表达式（[在 regex101 上](http://regex101.com/r/uB8kI4)查看它，查看右下面板中的组捕获）：

```
\(.*?\)|([^\W_]+[^\s-]*) 
```

左边的交替匹配完成`(parenthesized phrases)`。我们将忽略这些匹配。右侧匹配并捕获第 1 组的单词，我们知道它们是正确的单词，因为它们没有被左侧的表达式匹配。

该程序展示了如何使用正则表达式（参见[在线演示](http://js.do/code/38411)中的匹配项）：

```
<script>
var subject = 'here wäre c\'è (don\'t match this one) match this';
var regex = /\(.*?\)|([^\W_]+[^\s-]*)/g;
var group1Caps = [];
var match = regex.exec(subject);

// put Group 1 captures in an array
while (match != null) {
    if( match[1] != null ) group1Caps.push(match[1]);
    match = regex.exec(subject);
}

document.write("<br>*** Matches ***<br>");
if (group1Caps.length > 0) {
   for (key in group1Caps) document.write(group1Caps[key],"<br>");
   }

</script> 
```

**参考**

[如何匹配（或替换）模式，除了情况 s1、s2、s3...](https://stackoverflow.com/q/23589174)

# python - 获取特定文件的父目录

> ID：12894815
> 
> 赞同：5
> 
> 时间：2012-10-15T11:36:49.293
> 
> 标签：python

有一个文件`a.py`。

位置是`/home/user/projects/project1/xxx/a.py`。

如果我打电话`os.getcwd()`，它会给我`/home/user/projects/project1/xxx/`。但我想达到`/home/user/projects/project1`。我如何在 Python 中做到这一点？

**编辑：**我想我必须更清楚。我想要这个用于我的 Django 项目。

我在我的 settings.py 中使用这些代码：

```
PROJECT_PATH = os.path.abspath(os.path.dirname(__file__)) 
```

然后我使用休闲代码来指定我的静态文件夹在哪里。：

```
os.path.join(PROJECT_PATH,'statics'), 
```

我的 settings.py 文件位于：`/home/user/projects/project1/xxx/settings.py`

我的静态文件夹与`settings.py`.

现在我想将此文件夹移动到`/home/user/projects/project1`

我应该如何处理 settings.py 中的代码

谢谢你

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T11:42:09.467

```
from os.path import dirname

print(dirname(dirname(__file__))) 
```

每次调用`dirname`它都会为您提供父目录。根据需要多次调用。

或者，您可以执行以下操作：

```
normpath(join(path1, '..', '..')) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-15T11:41:10.837

```
>>> import os
>>> os.getcwd()
'/tmp/test'
>>> os.chdir('..')
>>> os.getcwd()
'/tmp'
>>> 
```

点点 ( `..`) 表示父目录。因为相对路径名指定了从当前目录开始的路径。

请参阅 的文档[`os.chdir`](http://docs.python.org/library/os.html?highlight=os.chdir#os.chdir)。

# xml - scala - XML 插入/更新

> ID：12894816
> 
> 赞同：5
> 
> 时间：2012-10-15T11:36:54.213
> 
> 标签：xml, scala, xpath, insert

你知道根据 XPath 插入和（或）更新节点的任何 Scala API 吗？例如，对于给定的节点和 XPath，此 API 将使用新节点创建 XML 副本

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-15T19:02:56.600

您可以使用[2.10.3 文档](http://www.scala-lang.org/api/2.10.3/index.html#scala.xml.transform.RewriteRule)`RewriteRule`来执行此操作。

```
val cats = <Cats>
  <Cat Name="Floyd"/>
  <Cat Name="Onyx"/>
</Cats> 
```

然后假设`RewriteRule`

```
class AddCat(name: String) extends RewriteRule {
   override def transform(n: Node): Seq[Node] = n match {
     case e: Elem if e.label == "Cats" =>
       val cats = (e \\ "Cat")
       val newCat = <Cat Name={name}/>
       new Elem(e.prefix, "Cats", e.attributes, e.scope, e.minimizeEmpty, (cats ++ newCat).toSeq:_*)
     case x => x
   }
 } 
```

那么你可以这样做，

```
val rule = new RuleTransformer(new AddCat("Stevie"))
rule.transform(cats)
res2: Seq[scala.xml.Node] = List(<Cats><Cat Name="Floyd"/><Cat Name="Onyx"/><Cat Name="Stevie"/></Cats>) 
```

同样，如果您想更改属性

```
class AddLastName(name: String, lastName: String) extends RewriteRule {
  override def transform(n: Node): Seq[Node] = n match {
    case e: Elem if e.label == "Cat" && (e \\ "@Name" text).equals(name) =>
      val cat: String = e.attributes("Name").head.text
      e % Attribute(None, "Name", Text(s"$name $lastName"), Null)
    case x => x
  }
}

val rule = new RuleTransformer(new AddLastName("Stevie", "Nicks"))
rule.transform(cats)
res3: Seq[scala.xml.Node] = List(<Cats><Cat Name="Floyd"/><Cat Name="Onyx"/><Cat Name="Stevie Nicks"/></Cats>) 
```

这两种方法都可以满足您的需求。困难的部分是弄清楚如何获取子节点，然后构建父节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:18:07.620

我要做的是使用解析xml`\\`

使用将 xml 转换为列表`.toList.last.text`

附加我需要的内容，然后收集我的选项：`jsonOption collect`在这里您可以再次使用更改一些选项`orElse Some`，然后最后使用 a`for yield`来生成我想要的 xml。

利用规模在数据转换方面的灵活性。它不必完全相同，但我相信你可以看到光......

# file-upload - 在 Symfony 中上传文件时，“重命名”调用出现“访问被拒绝”错误

> ID：12894822
> 
> 赞同：9
> 
> 时间：2012-10-15T11:37:22.033
> 
> 标签：file-upload, symfony

我正在 Win7/Apache 2.2/ZendStudio 环境中处理 Symfony 项目，但在上传文件时无法正常工作。

我的目标是让用户创建一个可以包含任意多个“文档”的新实体（基于[http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)上的文章）。我有一个表单类型，其中包含一个“集合”类型的字段（基于[http://symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)上的文章）。到现在为止还挺好。通过 jQuery，我可以添加任意多个表单作为子表单，效果很好。但是当我提交表单时，经常（但并非总是如此！）我得到以下异常：

`Warning: rename(C:/Programming/Servers/Apache2.2/htdocs/Symfony/app/cache/dev/doctrine/orm/Proxies\__CG__MyMainBundleEntityRecruiter.php.507bf02e30df69.85090364,C:/Programming/Servers/Apache2.2/htdocs/Symfony/app/cache/dev/doctrine/orm/Proxies\__CG__MyMainBundleEntityLecture.php): Zugriff verweigert (code: 5) in C:\Programming\Servers\Apache2.2\htdocs\Symfony\vendor\doctrine\orm\lib\Doctrine\ORM\Proxy\ProxyFactory.php line 194`

*Zugriff verweigert*是德语的*拒绝访问*。奇怪的是，这些文件似乎被重命名并保存在正确的位置。

为什么会出现此异常，它与我的环境有关吗？我该如何解决？我猜这个问题与[Symfony 警告有关：rename (../app/cache/dev, ../app/cache/dev_old): Access Denied。(Code : 5)](https://stackoverflow.com/questions/9062365/symfony-warning-rename-app-cache-dev-app-cache-dev-old-access-den)，但不太确定它是否与在另一个上下文中发生的相同。不过，我也确实遇到了此链接中描述的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T21:22:54.497

我最近遇到了同样的问题。我真的不知道为什么会发生问题，但问题来自 Doctrine 尝试生成代理类的过程中的一个步骤。

在我的 config.yml 文件中，在 Doctrine 配置的 ORM 部分下，我将`auto_generate_proxy_classes`from的值更改`%kernel.debug%`为`false`。自从进行更改以来，我已经使用它一段时间了，并且从那以后一直无法重现该问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-10T11:33:37.490

在寻找相同的答案时发现了这个，这似乎是一个 Windows + Doctrine 问题。

[包含更详细信息的教义票](https://github.com/doctrine/orm/issues/2907)

TLDR：基本上代理正在尝试重命名仍在使用的文件，在 Linux 中有效，但并不总是在 Windows 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-18T01:25:57.667

转到重命名文件的文件，然后将其替换为与 Windows 兼容的重命名功能

```
private function renameWindowsCompatible($oldfile,$newfile) {
    try {
        rename($oldfile,$newfile);
    } catch(\Exception $e) {
        if (copy($oldfile,$newfile)) {
            unlink($oldfile);
            return TRUE;
        }
        return FALSE;
    }
    return TRUE;
} 
```

# cuda - 在 Visual Studio 2010 中使用 Nvidia Nsight 2.2 进行调试

> ID：12894823
> 
> 赞同：2
> 
> 时间：2012-10-15T11:37:25.860
> 
> 标签：cuda, gpu, nsight

我正在使用带有 Quadro 2000 Nvidia GPU 的 Dell Precision T3500 工作站。我用 Nsight 2.2 安装了 Cuda 4.2 工具包。当我使用“开始 CUDA 调试”调试 cuda 代码时，它会连接本地机器，然后只给出一条消息

> CUDA 上下文是在不可调试的 GPU 上创建的。断点将被禁用。适配器：Quadro 2000

并退出。

VS 项目设置或 Cuda 配置是否有任何问题。

我也试过 CUDA 5.0 没有任何用处。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2016-06-06T06:27:12.547

当前的驱动程序版本和nsight版本可能与PC硬件不兼容。以下对我有用：

1.  下载最新的 CUDA 工具包（当前为 7.5）。
2.  重新加载 CUDA。
3.  不要更新驱动程序。

# c++ - 双重和字符串流格式

> ID：12894824
> 
> 赞同：17
> 
> 时间：2012-10-15T11:37:28.117
> 
> 标签：c++, double

```
double val = 0.1;
std::stringstream ss;
ss << val;
std::string strVal= ss.str(); 
```

在 Visual Studio 调试器`val`中，值为 0.10000000000000001（因为无法表示 0.1）。当`val`使用 stringstream 转换时，`strVal`等于`"0.1"`. 但是，当使用 boost::lexical_cast 时，结果`strVal`是`"0.10000000000000001"`.

另一个例子如下：

`double val = 12.12305000012;`

在 Visual Studio 下`val`显示为 12.123050000119999，使用 stringstream 和默认精度 (6) 它变为 12.1231。我真的不明白为什么它不是 12.12305(...)。

是否有默认精度，或者 stringstream 是否有特定的算法来转换无法精确表示的双精度值？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-15T11:55:10.230

您可以更改 a 的浮点精度，`stringstream`如下所示：

```
double num = 2.25149;
std::stringstream ss(stringstream::in | stringstream::out);
ss << std::setprecision(5) << num << endl;
ss << std::setprecision(4) << num << endl; 
```

输出：

```
2.2515
2.251 
```

注意数字是如何在适当的时候四舍五入的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-12-08T10:51:48.073

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-15T13:07:15.713

您必须考虑两个问题。第一个是精度参数，默认为 6（但您可以设置为任何您喜欢的值）。第二个是此参数的含义，这取决于您使用的格式选项：如果您使用的是固定格式或科学格式，则它表示小数点后的位数（这反过来又对通常的格式有不同的影响）意味着两种格式的精度）；但是，如果您使用的是默认精度 ( `ss.setf( std::ios_base::fmtflags(), std::ios_base::formatfield )`，则它表示输出中的**位数**，无论输出实际上是使用科学记数法还是固定记数法格式化的。这解释了为什么您的显示为`12.1231`，例如；您同时使用默认精度和默认格式。

您可能希望使用不同的值（可能还有不同的精度）尝试以下操作：

```
std::cout.setf( std::ios_base::fmtflags(), std::ios_base::floatfield );
std::cout << "default:    " << value[i] << std::endl;
std::cout.setf( std::ios_base::fixed, std::ios_base::floatfield );
std::cout << "fixed:      " << value[i] << std::endl;
std::cout.setf( std::ios_base::scientific, std::ios_base::floatfield );
std::cout << "scientific: " << value[i] << std::endl; 
```

看到实际输出可能会比任何详细描述更清楚：

```
default:    0.1
fixed:      0.100000
scientific: 1.000000e-01 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-15T11:43:49.427

问题发生在流插入`ss << 0.1;`而不是转换为字符串时。如果您想要非默认精度，则需要在插入双精度之前指定：

```
ss << std::setprecision(17) << val; 
```

在我的电脑上，如果我只是使用`setprecision(16)`我仍然得到`"0.1"`而不是`"0.10000000000000001"`. 我需要 17 的（稍微虚假的）精度才能看到最后的 1。

**附录**
1.0/3.0 的值出现了更好的演示。使用默认精度，您将获得`"0.333333"`. 这不是双精度 1/3 的字符串等价物。使用`setprecision(16)`生成字符串`"0.3333333333333333"`；精度为 17 产量`"0.33333333333333331"`。

# android - onKeyUp 不适用于 KEYCODE_DPAD_CENTER

> ID：12894829
> 
> 赞同：1
> 
> 时间：2012-10-15T11:37:44.060
> 
> 标签：android, d-pad

我有 2 个活动，其中我覆盖了 onKeyUp 事件：

```
@Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        Log.d(TAG, "Key up: " + keyCode);
        return super.onKeyUp(keyCode, event);
     } 
```

第一个是应用程序的主要活动，另一个是次要活动。第一个工作正常，但第二个捕获 Left-Right-Up-Down 的事件，而不是 Center click 的事件。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T17:45:14.620

由于您的布局中有一个画廊，请查看：[https](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/Gallery.java#L1216) ://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/Gallery.java#L1216 。Gallery 可能会窃取您的 DPAD_CENTER 事件（以及 ENTER）。

我建议您使用[Activity.dispatchKeyEvent(android.view.KeyEvent)](https://developer.android.com/reference/android/app/Activity.html#dispatchKeyEvent%28android.view.KeyEvent%29)在事件进入该库之前停止该事件。

尝试像这样使用它（在您的活动中）：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
  if(event.getKeyCode() == KeyEvent.KEYCODE_DPAD_CENTER) {
    // Do your stuff here.
    return true; // Consume the event (or not, your call)
  }
  return super.dispatchKeyEvent(event);
} 
```

# mysql - Mysql将数据附加到字段？

> ID：12894834
> 
> 赞同：0
> 
> 时间：2012-10-15T11:38:09.540
> 
> 标签：mysql, append, concat

我有一个包含 3 列的表，`fname` `Lname`并且`description`. 我想获取并附加它们的值`Fname`（`Lname`将此`description`数据移动到描述字段的末尾，而不覆盖该字段中的当前信息）。这完全可以用 MySQL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:43:54.690

```
 Please update function as per req...and concatination of string :
Here Concat function is used for concat string..: 
```

> update table_name set description = CONCAT(description,' ',fname,' ',Lname);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:42:48.060

```
update your_table_name set description = CONCAT(description,' ', fname,' ',Lname); 
```

# ruby-on-rails - 在 Rails 中记录部分参数

> ID：12894839
> 
> 赞同：4
> 
> 时间：2012-10-15T11:38:20.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3, documentation, comments

是否有任何标准或新兴标准来记录可以传递给 Rails 部分的参数？

当`_my_partial.html.erb`期望 a`title`和`elements`通过 传递的本地 var 时`render 'my_partial', title: t, elements: e`，必须有一种通用的方法来记录它们的名称、期望的类型和角色，而无需阅读整个部分代码。诸如 RDoc 或 Tomdoc 之类的方法和类。没有吗？

编辑：我发现[了一个帖子](http://killswitchcollective.com/articles/13_best_practices_for_rails_partials)，其作者主张`<% var ||= 'default_val' %>`在部分的第一行初始化参数，这确实是一种安全的做法和一种代码内文档。真的没有评论/参数声明解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:46:47.157

在您的部分开始时，只需调用所有引用的变量。

```
# _my_partial.html.erb
<% title %>            <---  first line of file
<% elements[0] %>

<h3><%= title %></h3>
<% elements.each do |element| %>
   <p> etc ... </p> 
```

## 这对您的项目有好处的原因：

*   它不依赖于注释或非代码文件
*   项目中的任何开发人员都可以通过查看相关文件的顶部来快速找出需要哪些变量
*   通过调用变量，您可以确保缺少的变量会导致异常。
*   用方括号调用元素是因为如果它不是可枚举的，我们也希望它爆炸，对吗？

使用的做法`<% var ||= 'default_val' %>`实际上是**不安全**的，因为它允许隐藏错误。您希望您的代码在某些事情没有正确完成时*立即崩溃。*如果应该传递这些变量，那么您希望代码在它们不存在时爆炸。

# python - 用于传递给 F90 real(8) 数据类型的 Python ctypes 数据类型

> ID：12894841
> 
> 赞同：0
> 
> 时间：2012-10-15T11:38:41.600
> 
> 标签：python, python-3.x, fortran, ctypes

我正在使用 ctypes (Pthyon3.2) 从 64 位 Debian Linux 机器上的共享库中调用 F90 例程。如果 F90 例程采用和参数类型，

```
! We're in fortran (F90) 
subroutine MyFunc(FooF90)   
real(8),intent(in) :: FooF90
! do some stuff...
return 
```

我应该从 Python 传递什么？我的猜测是，

```
# We're in Python3.2
F90func(ctypes.byref(ctypes.c_double(FooPy))) 
```

它是否正确？我无法轻易找到从 Python 传递 real(n) 类型的 fortran 参数的参考。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:45:25.657

`real(8)`标准没有定义，所以任何事情都可能发生（你应该通过`selected_real_kind`or`iso_c_binding`或获得种类编号`iso_fortran_env`）。在实践中，它相当于`c_double`大多数编译器。您可能正在使用默认情况下适用的 gfortran。

如果 Python 解释器`value`默认通过参数传递，则可能会出现问题。[在ctypes](http://docs.python.org/library/ctypes.html)中搜索`byref()`函数。

# php - 日期格式不起作用

> ID：12894844
> 
> 赞同：0
> 
> 时间：2012-10-15T11:39:07.397
> 
> 标签：php, date, datetime

我有一个像这样`2012/10/12 10:03:46`（年/月/日）格式的字符串，现在我想将其格式更改为这样的格式，`October 12, 2012 10:03 p.m`我尝试了 php 的 DateTime 类，但它不起作用：

```
<?php

 $date = new DateTime();
 $date->createFromFormat('Y/m/dd H:i:s', substr($suggestion->suggestion->created_at, 0,19));
 echo $date->format('d-m, y h:i A');

?> 
```

谁能告诉我出了什么问题，我该如何纠正？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:41:10.470

您应该至少看到一个通知，例如“不要在非静态上下文中调用静态函数”。

[`DateTime::createFomFormat()`](http://php.net/datetime.createfromformat)

```
$date = DateTime::createFromFormat('Y/m/d H:i:s', substr($suggestion->suggestion->created_at, 0,19));
echo $date->format('F j, Y, g:i a'); 
```

这是一个静态方法，并且（顾名思义）它*创建*一个新的`DateTime`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:54:04.330

尝试这个...

```
$today = date("F j, Y h:i a"); // gives October 15, 2012 5:20 PM 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T11:47:19.103

```
<?php

 $date = new DateTime('2012/10/12 10:03:46');
 echo $date->format('d-M, y h:i:s A');

//output -  12-Oct, 12 10:03:46 AM
?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T11:43:38.707

```
$today = date("F j, Y, g:i a"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T11:41:14.953

尝试这个...

```
$today = date("F j, Y g:i A"); // gives October 15, 2012 5:20 PM (g removes leading zeroes) 
```

你的情况

```
$date = new DateTime('2012/10/12 10:03:46');
echo $date->format('F j, Y h:i A'); // gives October 15, 2012 10:03 AM 
```

参考：[点击](http://php.net/manual/en/function.date.php)

# php - 如何使用“计数”列对 CgridView 进行排序

> ID：12894848
> 
> 赞同：1
> 
> 时间：2012-10-15T11:39:28.777
> 
> 标签：php, yii

情况：CausalType 1 -> N Causal

进入 causaltype 的管理视图，我使用的是 cgridview，我必须显示每个 causalType 的 causala 数量。

我将关系设置为 CausalType

```
return array(
                        "causals" => array (self::HAS_MANY, "Causal", "causalTypeId"  ), 
                ); 
```

我添加了类变量

```
 public $activeCausalCount; 
```

这是管理视图中的列

```
 array (
                  'name' => 'activeCausalCount',
                  'value' => 'count($data->causals)',    
            ), 
```

实际上这是我在 search() 中的标准

```
 $criteria=new CDbCriteria;

$criteria->compare('id',$this->id,true);
$criteria->compare('name',$this->name,true);
$criteria->compare('isActive',$this->isActive); 
```

每种类型的因果计数都是正确的，但我有一些问题

1）我只需要计算 ACTIVE 因果关系（计算 causals.isActive = 1 的因果关系）

2）我需要对列进行排序

3）我需要过滤（按整数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:20:01.200

如果您真的需要对 COUNT 进行排序和过滤，那么这可能是一个很小的过程。

一种方法是...

在您的 CausalType 表中添加一列（调用它`activeCausals`）

`CausalType`在模型中定义关系

```
"totalActiveCasuals" => array(
      self::STAT, 
      "Causal", 
      "causalTypeId", 
      'condition'=>'totalActiveCasuals.isActive=1'
), 
```

`afterSave`并在因果中定义方法

```
protected function afterSave() 
{
    $this->causaltype->activeCausals = $this->causaltype->totalActiveCasuals;
    $this->causaltype->save();

    return parent::afterSave();
} 
```

`activeCausals`现在您可以非常轻松地过滤、排序新列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:52:08.060

向您的 STAT 类型的 CasualType 添加一个新关系，如下所示：

```
return array(
   "casuals" => array (self::HAS_MANY, "Causal", "causalTypeId"  ), 
   "totalCasuals" => array (self::STAT, "Causal", "causalTypeId"  ), 
   "totalActiveCasuals" => array (self::STAT, "Causal", "causalTypeId", 'condition' => 'active = true'    ), 
); 
```

然后在您看来，只需将其用作普通属性/关系

# visual-studio-2012 - Visual Studio 2012：运行具有大量时间开销/延迟的单元测试

> ID：12894852
> 
> 赞同：1
> 
> 时间：2012-10-15T11:39:41.883
> 
> 标签：visual-studio-2012, vs-unit-testing-framework

我刚刚使用 Visual Studio 2012 在 C# 中启动了一个新项目。VS2012 是最新的，因此没有安装 beta 或 RC。当我运行单元测试时，会有很大的延迟。测试总结说，它跑了 10 秒，4 个单元测试总共跑了 96 毫秒。这就是测试资源管理器告诉我的。为什么会有将近 10 秒的时间开销这么大？如果你做 TDD 显然很烦人......

我必须设置任何配置设置吗？我错过了什么？

或者它（仍然）是VS2012中的一个错误？我找到了一篇关于 VS2012 BETA 的博客 (http://blogs.msdn.com/b/visualstudioalm/archive/2012/03/08/what-s-new-in-visual-studio-11-beta-unit-testing. ASP）。在那篇文章的结尾，他们说：“单元测试启动性能——现在我们在你开始测试运行后有一个非常难看的延迟，我们正在积极努力解决这个问题。” 但我没有找到更多关于这个问题的信息。也许错误仍然存​​在。

希望可以有人帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:58:51.610

在即将发布的 Visual Studio 季度版本中（参考[http://blogs.msdn.com/b/visualstudioalm/archive/2012/10/08/visual-studio-2012-update-1-ctp.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/10/08/visual-studio-2012-update-1-ctp.aspx)），我们做了一些性能改进。简而言之，我们改变了底层存储机制以提高发现/运行时间。

请在可用时下载季度版本。另外，如果您有更多问题，请告诉我们。

问候，

Patrick Tseng，Visual Studio ALM 团队。

# c++ - C++模板类编译错误

> ID：12894853
> 
> 赞同：0
> 
> 时间：2012-10-15T11:39:52.953
> 
> 标签：c++, class, templates

我收到以下编译错误：

```
main.cc: In function 'int main(int, char**)':¶
main.cc:200: error: no match for 'operator==' in 'rt1 == rt2'¶
triple.hh:124: note: candidates are: bool Triple<T1, T2, T3>::operator==(const    Triple<T1,T2, T3>&) [with T1 = int, T2 = int, T3 = int] <near match>¶
main.cc:27: note:                 bool operator==(const Special&, const Special&)¶ 
```

虽然我已经为我的模板类实现了 operator== 重载，如下所示：

```
bool operator==(const Triple<T1, T2, T3>& another) {
    return (a == another.first() and b == another.second() and c == another.third());
} 
```

对于我的模板类：

```
template <typename T1, typename T2, typename T3>
class Triple 
```

你知道问题可能是什么吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:44:45.393

您的布尔运算符被声明为非常量。`rt1`如果是 const 引用，请按如下方式修复它。注意添加的`const`关键字。

```
bool operator==(const Triple<T1, T2, T3>& another) const { 
```

说明：C++ 有两种基本语法用于重载比较运算符；具有一个其他参数的成员运算符，或具有两个参数的静态运算符。但是，在这两种情况下，您都应该确保两个操作数都是`const`，具有各自的语法。

从理论上讲，可以提供不同版本`const`和非`const`版本的操作符来做细微的不同的事情，所以编译器称你的为近似匹配，但仍然不是匹配。

# javascript - 修复窗口 ThreeJS 上的立方体位置

> ID：12894854
> 
> 赞同：0
> 
> 时间：2012-10-15T11:39:58.733
> 
> 标签：javascript, webgl, three.js

我正在使用`Three.JS`，我需要一个立方体来适应窗口的大小。立方体将始终尊重窗口的比例 (`window.innerWidth`和`window.innerHeight`)，但会根据显示比例更近或更远来导致 Z 位置。

```
cube = new THREE.Mesh( new THREE.CubeGeometry( windowWidth, windowHeight, 200, 6, 6, 6, materials ), new THREE.MeshFaceMaterial() ); 
cube.position.y = ???; 
cube.position.z = ???;

function onWindowResize() {

   camera.aspect = window.innerWidth / window.innerHeight;
   renderer.setSize( window.innerWidth, window.innerHeight );
   camera.updateProjectionMatrix();
   cube.position.y = ???; 
   cube.position.z = ???;
} 
```

你能想出解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:09:06.183

如果我理解正确，您的职位有问题`cube Z`。好吧，首先我不建议您将位置设置为 on `windowresize()`，并且会说在 animate 上进行操作。如：

```
function animate() {
    cube.position.z = camera.position.z  
} 
```

原谅我，但我无法进一步理解。

# iphone - 使用 iCarousel 时，我的自定义 UIView 显示但里面什么都没有？

> ID：12894858
> 
> 赞同：0
> 
> 时间：2012-10-15T11:40:11.790
> 
> 标签：iphone, ios5, uiview, ios4, icarousel

我正在使用 iCarousel 在 CoverFlow 模式下显示我的自定义 UIView 但是当我运行我的应用程序时它会显示但里面什么都没有，就像不是我添加的视图？？？那你能帮我吗？？？

```
 - (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{

    CustomView *temp;
    if (view == nil)
    {
        //don't do anything specific to the index within
        //this `if (view == nil) {...}` statement because the view will be
        //recycled and used with other index values later
        view = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 315.0f, 350.0f)] autorelease];
        temp=[[CustomView alloc] initWithFrame:view.bounds];

        temp.backgroundColor=[UIColor redColor];
        view.contentMode = UIViewContentModeCenter;

        temp.tag=1;
        [view addSubview:temp];
    }
    else
    {
        //get a reference to the label in the recycled view
        temp = (CustomView *)[view viewWithTag:1];
    }

    //set item label
    //remember to always set any properties of your carousel item
    //views outside of the `if (view == nil) {...}` check otherwise
    //you'll get weird issues with carousel item content appearing
    //in the wrong place in the carousel
    //label.text = [[items objectAtIndex:index] stringValue];

    return view;
} 
```

![在此处输入图像描述](../Images/d729844fe49946cb8d4dde7561b8250b.png) ![在此处输入图像描述](../Images/9b4bb13698e1d7e47551cc099dd7ee31.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:50:21.397

有些人认为你可以检查：

*   你实现了 iCarouselDelegate 和 iCarouselDataSource 吗？

*   您是否设置了轮播的代表前。myCarousel.delegate = 自我；myCarousel.dataSource = 自我；

*   您是否将轮播视图添加到视图堆栈前。[myView.view addSubview:myCarousel];

您还应该实现以下委托方法

*   (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel

# sonarqube - 无法在声纳上为 ant 项目配置 jacoco

> ID：12894862
> 
> 赞同：0
> 
> 时间：2012-10-15T11:40:34.470
> 
> 标签：sonarqube

我已经从互联网上下载了 jacoco，并将我的源目录下的文件夹复制到一个名为 reports 的文件夹中，现在我有以下内容

```
drwxr-xr-x. 7 root  root  4096 Oct 15 15:03 .
drwxrwxr-x. 6 build build 4096 Oct 15 14:52 ..
drwxr-xr-x. 9 root  root  4096 Oct  7 00:52 coverage
drwxr-xr-x. 6 root  root  4096 Oct  7 01:06 doc
-rw-r--r--. 1 root  root  3250 Oct  7 01:06 index.html
drwxr-xr-x. 2 root  root  4096 Oct  7 01:06 lib
drwxr-xr-x. 2 root  root  4096 Oct 15 15:02 META-INF
drwxr-xr-x. 2 root  root  4096 Oct  7 01:06 test 
```

但在以下链接 [https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/it/sonar-runner/it-jacoco-sonar-runner/reports](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/it/sonar-runner/it-jacoco-sonar-runner/reports)

我看到在报告下添加了 jacoco.exec 我很困惑我现在如何使用 jacoco。

我安装了 jenkins 并使用声纳进行代码质量分析，我想将 jacoco 用于我的 java 代码。我也在使用 Ant 并执行 sonar-runner 来生成声纳分析。

请有人可以帮助我，以便我如何获得 jacoco.exec？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:57:52.223

If you're using Ant to build your projects, then you should rather have a look at the following example projects:

*   JaCoCo for unit tests with Ant: [https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/ant](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut/ant)

*   JaCoCo for integration tests with Ant: [https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/it/ant/it-jacoco-ant](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/it/ant/it-jacoco-ant)

# c++ - C++ - 用实例初始化类成员

> ID：12894873
> 
> 赞同：1
> 
> 时间：2012-10-15T11:41:23.723
> 
> 标签：c++, class, initialization-list

我的问题如下：假设我有：

```
class Foo
{
public:
    Foo() {}
    void setInt(int i) { myInt = i; }
    int getInt() { return myInt; }
private:
    int myInt;
};

class Bar
{
public:
    Bar(Foo f) { /* do something with f.getInt() */ }
}; 
```

现在我有另一个类，其中 Bar 作为成员变量：

```
class BarUser
{
public:
    BarUser();
private:
    Bar bar;
}; 
```

我想编写 BarUser 的构造函数，但是我想用一个 Foo 成员初始化 Bar，该成员的整数为 3。IE：

```
Foo f;
f.setInt(3);
Bar b(f); 
```

但是，由于我将 Bar 作为类成员，因此我无法在初始化列表中编写所有这些代码......我的意思是：

```
BarUser::BarUser() : bar(/* Foo after executing f.setInt(3) */)
{ ... } 
```

假设 Bar 不允许赋值运算符 - 我如何按预期初始化它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:42:46.447

如果无法更改`Foo`，请编写一个函数：

```
Foo make_foo(int i) { 
     Foo f; 
     f.setInt(i); 
     return f;
} 
```

然后用 初始化`bar(make_foo(3))`。

`Foo`通过提供构造函数但没有构造函数，您有点自取其辱`int`。您最好添加一个`explicit`构造函数来`Foo`接受`int`.

# java - 字符串标记化以删除一些数据

> ID：12894882
> 
> 赞同：0
> 
> 时间：2012-10-15T11:41:47.307
> 
> 标签：java, string, string-parsing

我有一个这样的字符串：

```
1 | 2 | 3 | 4 | 5 | 6 | 7 |  |  |  |  |  |  |  | 
```

字符串也可能有更多/更少的数据。我需要`|`一一删除并只获取数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:44:28.667

番石榴的[分裂器](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Splitter.html)岩石！

```
String input = "1 | 2 | 3 | 4 | 5 | 6 | 7 | | | | | | | |";
Iterable<String> entries = Splitter.on("|")
        .trimResults()
        .omitEmptyStrings()
        .split(input); 
```

如果你真的想变得花哨：

```
Iterable<Integer> ints = Iterables.transform(entries, 
     new Function<String, Integer>(){
        Integer apply(String input){
           return Integer.parseInt(input);
        }
 }); 
```

尽管您绝对可以使用正则表达式方法或 String.split，但我觉得使用`Splitter`不太容易出错并且更具可读性和可维护性。您可能会争辩说这`String.split`可能会更有效，但由于无论如何您都必须进行所有修剪和检查空字符串，我认为它可能会平局。

关于 的一条评论`transform`，它根据需要进行计算，这可能很棒，但也意味着可以对同一个元素进行多次转换。因此我推荐这样的东西来执行所有的计算一次。

```
Function<String, Integer> toInt = new Function...
Iterable<Integer> values = Iterables.transform(entries, toInt);
List<Integer> valueList = Lists.newArrayList(values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:45:05.797

您可以尝试使用[扫描仪](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)：

```
Scanner sc = new Scanner(myString);
sc.useDelimiter("|");
List<Integer> numbers = new LinkedList<Integer>();
while(sc.hasNext()) {
    if(sc.hasNextInt()) {
        numbers.add(sc.nextInt());
    } else {
        sc.next();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:47:27.280

或者使用 Java 板载方法：

```
String[] data="1 | 2 | 3 | 4 | 5 | 6 | 7 | | | | | | | |".split("|");

for(String elem:data){
   elem=elem.trim();
   if(elem.length()>0){
      // do someting
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:47:40.710

在分隔符处拆分字符串 | 然后解析数组。

这样的事情应该做：

```
String test = "|1|2|3";
String delimiter = "|";
String[] testArray = test.split(delimiter);
List<Integer> values = new ArrayList<Integer>();
for (String string : testArray) {
    int number = Integer.parseInt(string);
    values.add(number);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T11:45:29.957

干得好：

```
String str = "1 | 2 | 3 | 4 | 5 | 6 | 7 | | | | | | | |".replaceAll("\\|", "").replaceAll("\\s+", ""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T11:45:33.113

你的意思是喜欢吗？

```
String s = "1 | 2 | 3 | 4 | 5 | 6 | 7 | | | | | | | |";
for(String n : s.split(" ?\\| ?")) {
    int i = Integer.parseInt(n);
    System.out.println(i);
} 
```

印刷

```
1
2
3
4
5
6
7 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T11:45:44.017

`inputString.split("\\s*\\|\\s*")`会给你一个数字数组作为字符串。然后你需要解析数字：

```
final List<Integer> ns = new ArrayList<>();
for (String n : input.split("\\s*\\|\\s*"))
  ns.add(Integer.parseInt(n); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-15T11:45:51.330

您可以将 split 与以下正则表达式一起使用（允许额外的空格、制表符和空存储桶）：

```
String input = "1 | 2 | 3 | 4 | 5 | 6 | 7 | | | | | | | | ";
String[] numbers = input.split("([\\s*\\|\\s*])+");
System.out.println(Arrays.toString(numbers)); 
```

输出：

> [1、2、3、4、5、6、7]

# asp.net - 为什么会抛出这样的错误？

> ID：12894885
> 
> 赞同：1
> 
> 时间：2012-10-15T11:41:51.570
> 
> 标签：asp.net

我确实将数据从 Excel 表导入到 Sql 数据库..一切都很好，当我运行此代码时，我的访问引擎找不到 mt 表，它会抛出这个错误..我的错误是

> Microsoft Jet 数据库引擎找不到对象“Sheet1$”。确保对象存在并且正确拼写其名称和路径名。

但我已经检查了我的指定文件夹，它是正确的..然后我不知道为什么它会重复

我的 C# 代码如下..

```
public partial class _Default : System.Web.UI.Page 
{
    string constr = @"Data Source=VIS1-B12\SQLEXPRESS;Initial Catalog=Sql_Excel;Integrated Security=True providerName=System.Data.SqlClient" ;

    protected void btn_okClick(object sender, EventArgs e)
    {
        string path = Fup_Excel.PostedFile.FileName;
        string exconstr = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source="+path+";Extended Properties=Excel 8.0";

        OleDbConnection excelcon = new OleDbConnection(exconstr);
        excelcon.Open();

        OleDbCommand cmd = new OleDbCommand("select * from [Sheet1$]", excelcon);
        OleDbDataReader dbreader;
        OleDbDataAdapter dap = new OleDbDataAdapter(cmd);
        DataSet ds = new DataSet();
        //dap.Fill(ds,"sheet1");
        dbreader = cmd.ExecuteReader();

        SqlBulkCopy bcpy = new SqlBulkCopy(constr);
        bcpy.DestinationTableName = "Excel_Details";
        bcpy.WriteToServer(dbreader);
        //GridView1.DataSource = ds.Tables[0].DefaultView;
        //GridView1.DataBind();
        excelcon.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:53:51.787

最好使用代码检索 excel 工作表名称。
代码如下所示

```
OleDbConnection con = new OleDbConnection(ConnString);
OleDbCommand cmd = new OleDbCommand();
cmd.CommandType = System.Data.CommandType.Text;
cmd.Connection = con;
OleDbDataAdapter dAdapter = new OleDbDataAdapter(cmd);
DataTable dtExcelRecords = new DataTable();
con.Open();
DataTable dtExcelSheetName = con.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
string getExcelSheetName = dtExcelSheetName.Rows[0]["Table_Name"].ToString();
cmd.CommandText = "SELECT * FROM [" + getExcelSheetName + "]";
dAdapter.SelectCommand = cmd;
dAdapter.Fill(dtExcelRecords); 
```

# mysql - MySQL INSERT 或 UPDATE 从 SELECT COUNT(*)

> ID：12894891
> 
> 赞同：1
> 
> 时间：2012-10-15T11:42:05.877
> 
> 标签：mysql, insert, accumulate

我需要总结各种网络之间的大量身份验证日志。

首先我跑

```
SELECT Home, Con, COUNT(*) AS 'ACCEPTS' FROM AUTHLOG WHERE response='ACCEPT'; 
```

这给了我总结：

```
+------+------+---------+
| Home | Con  | ACCEPTS |
+------+------+---------+
| net1 | net1 |      37 |
| net1 | net2 |       2 |
| net1 | net3 |     578 |
| net2 | net1 |      56 |
| net2 | net2 |   95621 |
| net2 | net3 |     465 |
| net3 | net1 |      91 |
| net3 | net2 |      83 |
| net3 | net3 |     891 |
+------+------+---------+ 
```

我需要开始将这些结果存储在一个单独的表中，累积总 ACCEPTS（因为 AUTHLOG 表被截断）。

单独的汇总表非常简单：

```
CREATE TABLE ACCEPTS_SUMMARY (
   Home char(50) DEFAULT NULL,
   Con char(50) DEFAULT NULL,
   Accepts INT UNSIGNED DEFAULT 0
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

有没有办法，最好在 MySQL 中（主机上没有 Python 或 Perl，但 bash 脚本可以工作），我可以获得上述计数，并将它们添加到汇总表中的现有总数中，或者如果 Home和 Con 组合尚不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:52:50.377

这应该可以解决问题：

```
INSERT INTO summary(Home, Con, ACCEPTS)
SELECT Home, Con, COUNT(*)
FROM AUTHLOG
WHERE response='ACCEPT'
ON DUPLICATE KEY UPDATE ACCEPTS = ACCEPTS + VALUES(ACCEPTS) 
```

确保表*摘要*在 (Home, Con) 上有一个 UNIQUE INDEX。

# asp.net - IIS 首次运行需要很长时间

> ID：12894898
> 
> 赞同：4
> 
> 时间：2012-10-15T11:42:31.267
> 
> 标签：asp.net, iis

我有一个大网站，我们将其转换为 Web 应用程序。然后我们再次发布应用程序并将结果文件放入另一个 Web 应用程序并在此基础上进行我们自己的开发。采取上述步骤以减少构建时间。它减少了构建时间，但第一次运行需要很长时间。我们的网站包含大量文件。是否有任何减少运行时间的建议。每次更改后，我们都必须等待 5-10 分钟才能加载网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T06:21:28.713

我认为[应用程序初始化模块](http://www.iis.net/downloads/microsoft/application-initialization)将对您有用；）

**编辑**

* * *

添加以下代码解决了问题，

```
<compilation optimizeCompilations="true" /> 
```

> 可选布尔属性 指定如果顶级文件更改，动态编译是否将重新编译整个站点。顶级文件包括 Global.asax 文件以及 Bin 和 App_Code 文件夹中的所有文件。如果为 True，则仅重新编译更改的文件。默认为 False。有关详细信息，请参阅[了解 ASP.NET 动态编译](http://msdn.microsoft.com/en-us/library/vstudio/ms366723%28v=vs.100%29.aspx)。

# powershell - 修改使用 Add-Type 创建的结构

> ID：12894902
> 
> 赞同：1
> 
> 时间：2012-10-15T11:42:45.640
> 
> 标签：powershell

每当我对我创建的结构进行修改时，我都必须在更改发生之前退出会话。有没有更好的方法来做到这一点？

```
Add-Type @"
  public struct Computer {
  public string Name;
  public string ProductName;
  public string InstallDate;
  public string LastBootTime;
  public string ServicePack;
  public string ProductVersion;
  public string OSArchitecture;
  public string Manufacturer;
  public string Model;
  public string Memory;
}
"@ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:52:56.240

这是一个 .NET 限制。就我所知，`appDomain`无法卸载加载的组件。这就是为什么您必须关闭 powershell 控制台并重新启动 nes 会话的原因。

# java - 在 Android 中重现一个简单的 Foreach 循环？

> ID：12894909
> 
> 赞同：0
> 
> 时间：2012-10-15T11:42:57.110
> 
> 标签：java, android, xml

我正在尝试制作一个简单的 foreach-sortof 循环。Android中似乎不存在foreach，但是我对如何解决这个问题一无所知...

我正在尝试打印出一个信息块，并且在每个块上都有新信息..一个简单的循环......

这是我到目前为止想出的：

```
while (eventType != XmlPullParser.END_DOCUMENT) {

                    String[] separated_nodes = node.split(":");

if(eventType == XmlPullParser.START_TAG && xpp.getName().equalsIgnoreCase(tag)) {
    if(tag.equals("ChannelPackage")) {

                         // ArtNr:Name:Price:Period:InitDisPeriod:DisPeriod

                         // text.setText("Network "+xpp.getAttributeValue(null, "Name"));

                             packagename += xpp.getAttributeValue(null, separated_nodes[1].trim());   
                             artnr += xpp.getAttributeValue(null, separated_nodes[0].trim());                         
                             price += xpp.getAttributeValue(null, separated_nodes[2].trim());                         
                             period += xpp.getAttributeValue(null, separated_nodes[3].trim());                        
                             initdisperiod += xpp.getAttributeValue(null, separated_nodes[4].trim());                        
                             disperiod += xpp.getAttributeValue(null, separated_nodes[5].trim());

                             text.setText("Channel Packages: \n" + artnr +"\n" +
                                        "Package Name: "+ packagename + "\n" +
                                        "Price : "+ price +"\n" +
                                        "Period: "+ period +"\n" +
                                        "InitDisPeriod: "+ initdisperiod +"\n" +
                                        "DisPeriod: "+ disperiod +"\n"
                                        );

                         text.setMovementMethod(new ScrollingMovementMethod());

                     }

                 } else if(eventType == XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase(tag)) {
                         System.out.println("End tag "+xpp.getName());

                 } 
                 eventType = xpp.next();
                }

               // text.setText(nodes.toString());
            }catch(Exception ex){
                text.setText("Failed!");
                Log.i("HTTPResponse", ex.toString());
            } 
```

但结果是这样的：

*   艺人
*   艺人
*   艺人
*   包裹名字
*   包裹名字
*   包裹名字

但我想要 ：

*   艺人
*   包裹名字
*   艺人
*   包裹名字

如何格式化我的代码以获得该结果？我完全一无所知：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:11:47.737

If the object you're iterating over extends Collection of type T you can do a foreach loop like this

```
for(T obj : someCollection) {
    // do something
} 
```

EDIT:

Ok, it seems to me that the question isn't really about the foreach loop (I don't think you can use int whith this parser) but that you're getting the elements from your xml in the wrong order. Maybe you should consider using `nextTag()` instead of `next()`?

# jquery - 本地滚动锚链接从另一个页面偏移

> ID：12894910
> 
> 赞同：3
> 
> 时间：2012-10-15T11:42:56.843
> 
> 标签：jquery, scroll

我有一个带有常见问题解答部分的页面，其中带有锚标记，单击时将动画到特定条目。

Aditionaly 我有一个固定的 Navi，所以我确实在 jquery 中设置了一个锚点偏移量。

现在我在起始页上有一个指向特定常见问题解答条目的锚链接。该链接会将您正确地引导到条目，但当然不会附加偏移量，因为不会以这种方式触发本地滚动。

当你来自另一个页面时，怎么可能给这些锚点一个偏移量？

我试图将：附加`.wrapperdiv{ position:relative; top:-10px; }` 到每篇文章。但这无济于事。

你可以在这里看到整个事情：

[页面](http://rueegg-praxis.ch/site/faq)indexpage 上的anchorlinks 链接是三个图标上的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:43:38.937

您可以测试以下内容：

```
<script type="text/javascript">

// Check if there's an anchor in the url
if (window.location.hash){
    var id = window.location.hash.substring(1);
}

// then on window load scroll to the called anchor (that will trigger the window scroll 
// so your upper menu can appear again)
$(window).load(function() {
  if (window.location.hash){
    $.scrollTo('#'+id, 300 // uncomment to set offset if you like, {offset: -70}
  );
 }
});

</script> 
```

我假设您在 js 文件中定义了函数 $.scrollTo()，正如我在[http://rueegg-praxis.ch/minimeecache/1349103535a17a59c76f4994e40f602abc25dd4d8b.js的某处看到的那样](http://rueegg-praxis.ch/minimeecache/1349103535a17a59c76f4994e40f602abc25dd4d8b.js)

# c#-4.0 - c# 三元运算符返回不同的类型

> ID：12894911
> 
> 赞同：9
> 
> 时间：2012-10-15T11:42:58.620
> 
> 标签：c#-4.0, ternary-operator

我正在尝试使用三元来返回不同的类型，尽管我似乎遇到了一些问题。我的问题是三元运算符不能返回不同的类型吗？

```
// This line causes an error
propertyGrid.Instance = (directoryRecord.directoryInfo != null) 
    ? directoryRecord.directoryInfo 
    : directoryRecord.fileInfo;

// Compiles fine
propertyGrid.Instance = directoryRecord.directoryInfo;

// Compiles fine
propertyGrid.Instance = directoryRecord.fileInfo; 
```

错误

> 无法确定条件表达式的类型，因为 'System.IO.DirectoryInfo' 和 'System.IO.FileInfo' 之间没有隐式转换

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T11:45:05.657

不，这不是那样的。*条件运算符*
的表达式具有特定类型。表达式中使用的两种类型必须是相同类型或可隐式转换。

 *你可以让它像这样工作：

```
propertyGrid.Instance = (directoryRecord.directoryInfo != null) 
    ? (object)directoryRecord.directoryInfo 
    : (object)directoryRecord.fileInfo; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:48:08.460

不
，两个返回值最终都需要存储在保存结果的同一个变量中。
所以编译器必须有一种方法来决定该变量/存储区域的类型。
由于语言类型安全，您必须知道类型，并且它们最终都会出现在同一个变量中。*

# android - Android - 通过 Intent.FLAG_ACTIVITY_CLEAR_TOP 通过保持状态返回特定活动

> ID：12894917
> 
> 赞同：2
> 
> 时间：2012-10-15T11:43:19.910
> 
> 标签：android, android-intent, android-lifecycle

假设我有 4 个活动，A、B、C 和 D。每个活动都有一个按钮，A 启动 B，B 启动 C，C 启动 D。假设在活动 B 上，有一个动态列表视图，填充使用活动 A 提供的信息。当我从 B 中选择一个项目时，它会启动 C，当我按下“后退”按钮时，我看到活动 B 的状态是我离开它的状态（动态项目和滚动状态）。

现在我想要的是，在活动 D 上有一个按钮，我想通过保持其状态（项目数据和滚动位置）返回到 B，就好像我在 C 上并按下后退按钮一样。

到目前为止，我发现，为了我从 D 回到 B 的意图，我应该使用“FLAG_ACTIVITY_CLEAR_TOP”作为意图标志。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:07:50.017

您可以在 Activity C 中通过 startActivityForResult(Intent intent, int requestCode) 启动 D。当 D 在 onActivityResult(int requestCode, int resultCode, Intent data) 中的活动 C 中以指定结果结束时，只需调用 finish(); 完成活动 C。记得为活动 D 设置结果，当你想回到活动 B 时

```
setResult(Activity.RESULT_OK, myIntent); //or any other result or intent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:57:52.170

以这种方式在 Activity C 中的 Button C click 事件上添加代码

```
 Intent intent=new Intent(CActivity.this,DActivity.class);
 startActivity(intent);
 CActivity.this.finish(); 
```

# variables - HLSL 像素着色器 - 全局变量？

> ID：12894920
> 
> 赞同：5
> 
> 时间：2012-10-15T11:43:44.607
> 
> 标签：variables, colors, hlsl

我是 HLSL 和着色器的新手。我似乎无法替换我检索到的颜色。它用于二维文本，即字幕。问题是如果我在 main() 之外设置 osd_color 它不会显示任何内容。我正在使用 Shazzam Shader Editor 1.4 快速查看效果，但是程序中发生了同样的事情..

```
sampler2D texture0 : register(s0);

float4 osd_color = float4(0,0,0,1);
struct PixelShaderInput
{
    float2 uv0: TEXCOORD0;          
    float4 color: COLOR;
};

float4 main(PixelShaderInput input): COLOR {
float4 color = tex2D(texture0, input.uv0) * osd_color;
return color;
} 
```

希望你能帮忙。

编辑：

当我在它的时候，如果我想添加一个阴影/轮廓并返回它的颜色，我会怎么做？假设每个变量都有效。osd_color 为白色，float4 轮廓为黑色。我试过了：

```
float4 outline = tex2D(texture0, (input.uv0 * 1.1) ) * outline_color;
return color + outline; 
```

有了这个，我得到的只是白色（osd_color）..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-14T15:56:54.210

您必须自己管理非静态变量的内存。静态变量将节省您的时间：

```
static float4 osd_color = float4(0,0,0,1); 
```

使用静态时，一切都按预期工作，因为编译器关心为颜色值保留一些内存。如果静态不存在，您必须自己管理内存 - 或您的应用程序 - 这意味着您必须检索变量的默认值并手动将其复制到常量缓冲区。

# java - 在jsp页面中读取java类函数变量

> ID：12894921
> 
> 赞同：0
> 
> 时间：2012-10-15T11:43:46.853
> 
> 标签：java, jsp

我正在尝试在 JSP 页面中打印函数变量的值。函数变量位于 java.class(com.project.bulk) 中。文件名为 bulk.class。我尝试通过在 JSP 文件中编写以下代码来读取变量，但它不起作用。请问有什么帮助吗？

```
<%@ page import="com.project.bulk.bulk" %>

<%=bulk.cellStoreVector %> 
```

// 函数代码如下

```
private static void printCellDataToConsole(Vector dataHolder) {

            for (int i = 0; i < dataHolder.size(); i++) {
                    Vector  cellStoreVector  = (Vector) dataHolder.elementAt(i);
                    System.out.println(cellStoreVector);
                    for (int j = 0; j < cellStoreVector.size(); j++) {
                          HSSFCell myCell = (HSSFCell) cellStoreVector.elementAt(j);
                          String stringCellValue = myCell.toString();
                         // System.out.print(stringCellValue + "\t\t");
                    }
                    System.out.println();
            }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:54:06.980

您不能访问该方法或定义它的块之外的局部变量。局部变量的范围被限制在定义它的块中。

您的以下声明对于声明它的地方是本地的`for-loop`。即使在当前方法中，它也无法在`for-loop`. 因为您的循环`scope`为此变量定义了访问权限：-

```
Vector  cellStoreVector  = (Vector) dataHolder.elementAt(i); 
```

`JSP`要在您的外部访问它，请`class`将该字段声明为您的类中的私有实例变量。并有一个`public`访问器方法，它将返回该字段的值。然后在您的 JSP 中，您可以调用该方法来获取特定实例的值。

请记住，您需要在`instance`您的类中访问该方法。您正在通过您的`class name`. 如果你想这样访问它，你需要一个`static`变量。

这是一个简单的示例，涵盖了我上面所说的所有内容：-

```
public class Dog {

    // Private Instance variable
    private int instanceVar; // Defaulted to 0

    // Private Static variable
    // Common for all instances
    private static String name = "rohit";

    // Public accessor
    public int getInstanceVar() {
        return this.instanceVar;
    }

    public void setInstanceVar(int instanceVar) {
        this.instanceVar = instanceVar;
    }

    // Static public accessor for static variable
    public static String getName() {
        return name;
    }

}

class Test {
    public static void main(String[] args) {
        // Access static method through class name
        System.out.println(Dog.getName()); 

        Dog dog = new Dog();

        // Set instance variable through public accessor, on a particular instance
        dog.setInstanceVar(10);

        // Get instance variable value and asssign to local variable x
        // x is local variable in `main`
        int x = dog.getInstanceVar(); 

        showX(); 
    }

    public static void showX() {

        // x not visible here.
        System.out.println(x);  // Will not compile
    }
} 
```

# java - 拥有线程对象锁与类锁

> ID：12894924
> 
> 赞同：0
> 
> 时间：2012-10-15T11:43:53.700
> 
> 标签：java, multithreading

> **可能重复：**
> [同步和静态同步有什么区别？](https://stackoverflow.com/questions/1536064/what-is-the-difference-between-synchronized-and-static-synchronized)

对象锁优于类锁有什么优势？

例如，

```
 public static void log2(String msg1, String msg2){
       synchronized(MyClass.class){
          log.writeln(msg1);
          log.writeln(msg2);  
       }
    } 
```

和，

```
public void log2(String msg1, String msg2){
       synchronized(this){
          log.writeln(msg1);
          log.writeln(msg2);
       }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:05:47.380

如果您在类上创建锁，则该类的所有实例都将共享该锁。如果您有 1 个实例，则不会有任何区别。如果您有数千个实例，它们都将使用相同的锁。如果多个线程同时尝试获取锁，它们会相互阻塞。在最坏的情况下，这可能会导致您的代码表现得好像根本没有线程一样。

如果您在实例上创建锁，那么多个线程可以执行受保护的代码，只要它们在不同的实例上操作。在这里，线程不会相互阻塞。所以这种方法效果更好。

但这不是你需要问的。真正的问题是：我需要什么样的锁？

如果要确保只有单个线程可以写入日志，则应在`log`. 这种方法还有一个额外的优势，即当您开始使用多个日志文件（例如，每个线程一个）时，它会自动正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:48:03.207

它们不能互换，因为它们锁定在不同的对象上。

如果锁定对象是适当的，请使用它。如果你想锁定一个类（这不太可能），你会使用它。

我会考虑这种组合。

```
public void log2(String msg1, String msg2){
    synchronized(this) {
        synchronized(log) {
            log.writeln(msg1);
            log.writeln(msg2);
        }
    }
} 
```

这将确保对象没有被修改，并且这些行一起出现在日志中。

但是，由于 log2 似乎没有使用可变字段，您可以使用

```
private final Log log = ...

public void log2(String msg1, String msg2){
    synchronized(log) {
        log.writeln(msg1);
        log.writeln(msg2);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T02:33:27.680

从下面给出的 Logger 类中，如果 Log 类被修改为使用 Lock 对象，则调用 log(String msg1, String msg2) 的线程将使用其新的同步策略对线程安全 Log 执行操作。但是调用 log(String msg1) 方法的线程将始终在 Log 实例上同步，并且 Log 类中的所有 Lock 对象将同时被持有。在这种情况下，Logger 的实现会中断。这就是为什么建议使用私有 final Lock 对象或 Lock 类而不是客户端锁定的原因。

```
public class Logger {
    private final Log log;
    private final Object lock = new Object();

    public Logger(Log log) {
        this.log = log;
    }

    public void log(String msg1) {            // log synchronizes on log instance
        synchronized (log) {        
            log.writeln(msg1);      
        }
    }

    public void log(String msg1, String msg2) {   // log uses private final lock
        synchronized (lock) {
            log.writeln(msg1);
                        log.writeln(msg2);  
        }
    }   
} 
```

# iphone - 以下代码片段中是否有任何内存泄漏？

> ID：12894926
> 
> 赞同：0
> 
> 时间：2012-10-15T11:43:56.233
> 
> 标签：iphone, memory-management, uiimage, memory-leaks

'countdown' 是一个 uimageview 属性，定义如下：

```
@property (retain, nonatomic) IBOutlet UIImageView *countDown;

countDown.image=  [[[UIImage alloc] 
      initWithContentsOfFile:[[NSBundle mainBundle] 
      pathForResource:@"backgroundimage" ofType:@"png"]]autorelease]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:48:42.640

可能有。

如果您从 Leaks Instrument 中找到它，它会向您显示泄漏对象的**创建**位置，而不是泄漏对象的位置。

因此，虽然看起来不错，但您正在将自动释放的对象传递给属性，并且属性通常可以很好地管理它们的内存，但您正在对导致它不被释放的图像执行其他操作。

您可能忘记在 dealloc 中释放它，或者在没有意识到您对它有强引用的情况下使用它。

您需要做的是尝试跟踪该图像的生命周期，以查看您将它保留在哪里没有发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:46:41.587

取决于**countDown**对象是什么，以及是否在countDown 对象的类的**dealloc()**方法中释放属性**图像。**

 **编辑：看到你的问题编辑后..

如果您正确释放 countDown ，则没有内存泄漏。**

# php - 在wordpress中重定向公共页面的网址？

> ID：12894928
> 
> 赞同：1
> 
> 时间：2012-10-15T11:43:58.310
> 
> 标签：php, wordpress, url, redirect

我正在使用 Wordpress 3.3.1 开发的这个网站。我的客户希望我开发一个公共页面。该页面将是一个简单的 php 页面。它将驻留在 wordpress 目录中，但不会成为 CMS 本身的一部分。这里的问题是我想要这个页面的 url 重定向。我的客户希望通过电子邮件向网站成员发送链接，因此他希望保持 url 干净。

这是他想要发送给成员的当前 url 的格式：

'http://www.example.com/shop/"url_encoded_category_name"/product/"product_id"'

我想将其重定向到：

'http://www.example.com/template-public-home?productId="product_id"'

我现在正在重写网址。但正如您在第一个 url 格式中看到的那样，“url_encoded_category_name”和“product_id”是变量，因此重写意味着我正在尝试将不同的 url 重写为相同的 url（仅查询字符串更改）。我想将其更改为重定向，因为据我了解，这种将多个 url 重写为同一个 url 的方法会受到大多数搜索引擎的惩罚。

为了重写，我编辑了 .htaccess 文件。我想问的是，考虑到我在 wordpress 目录中有一个可公开访问的页面：

1.  重定向我的网址的最合适方法是什么？
2.  就我而言，什么是更好的代码？301还是302？

感谢您提供的任何帮助或将我引导到我可以了解它的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:28:00.890

首先，如果您的客户只想在给会员的电子邮件中使用生成的 URL，那么任何搜索引擎都不会知道。但是，如果它们有可能泄漏，您可能确实会得到重复的内容。那么重定向是正确的方法。

1.  您可以通过在规则中使用 [R] 标志（通常与 L 作为 [R,L] 一起使用，以便不执行匹配下面的规则来重定向，就像您重写一样。
2.  从搜索引擎（以及用户）的角度来看，这些是*永久*重定向 - 您永远不会将电子邮件中的 URL 用作主要 URL（或者您会吗？）。这意味着您应该使用 R=301。

Take a look at the [documentation](http://httpd.apache.org/docs/2.2/rewrite/flags.html) to learn about the flags, test your rewrite rules online [here](http://martinmelin.se/rewrite-rule-tester/) and check [https://stackoverflow.com/questions/1426056/good-htaccess-mod-rewrite-url-rewriting-tutorial](https://stackoverflow.com/questions/1426056/good-htaccess-mod-rewrite-url-rewriting-tutorial) for some hands-on material.

# java - 使用 Java WatchService 监视文件夹中的文件夹

> ID：12894930
> 
> 赞同：4
> 
> 时间：2012-10-15T11:44:06.267
> 
> 标签：java, nio, nio2, watchservice

我正在尝试使用 Java 7 的 WatchService 来监控文件夹。我希望它监视添加到使用 WatchService 注册的路径的任何文件或文件夹。

如果我将一个文件夹添加到注册路径，它会正确地将其检测为 ENTRY_CREATE 并在 watchEvent.context() 中返回该文件夹的名称。但是，如果我将一个文件夹添加到该文件夹​​而不是再次检测到它，但 watchEvent.context() 返回相同的文件夹和 ENTRY_MODIFY，因为该文件夹已通过添加另一个文件夹进行了修改。

所以我理解这一点，但不知道我是否应该注册结构中的每个文件夹，或者只注册顶级文件夹并监听或创建和修改

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:58:40.503

跨平台没有直接支持。对于 Windows，有一个`ExtendedWatchEventModifier.FILE_TREE`将递归地监视目录。但是在 Mac 或 Linux 上没有等效的功能。另外，请注意这`ExtendedWatchEventModifier`是一个扩展，而不是标准定义的一部分。

你必须听 CREATE 和 DELETE。当创建（删除）的对象是一个目录时，您需要在子目录上添加（删除）一个新的监视。

# c++ - Windows Path API 是否有任何 Linux 替代方案？

> ID：12894931
> 
> 赞同：2
> 
> 时间：2012-10-15T11:44:08.053
> 
> 标签：c++, linux, api, path

[在 Windows API 中， Shell Path Handling Functions](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773559.aspx)中有大量用于操作路径和 URL 的方法。这些函数包括`PathAddBackslash`、`PathCanonicalize`、`PathCombine`和等辅助函数`PathIsDirectory`。

问题是：是否有任何 Posix 提供的功能或提供类似功能的基于 Linux 的库？也就是说，简化路径组合、规范化、解析以及 URL 解析？

我知道可以用 C++ 编写这样的函数（不是小但不复杂的工作），但我的问题是：Linux 上是否有任何现成的“官方”库已经具有类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:46:39.783

我对 boost_filesystem 很满意。它最好的部分是它是跨平台的，因此它也适用于 Windows。

另一种可能性是利用 Qt 或 GLIB (GTK+) 的功能。

最后，大多数路径修改操作已经在 POSIX 标准中并且开箱即用。示例参见 basename(3)、dirname(3) 的手册页：http: [//www.kernel.org/doc/man-pages/online/pages/man3/dirname.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/dirname.3.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:48:28.260

你也可以使用 POCO C++ 库，看看这里：

[http://pocoproject.org/features.html](http://pocoproject.org/features.html)

在这里您可以找到有关文件系统 api 的更多信息：

[http://pocoproject.org/slides/080-Files.pdf](http://pocoproject.org/slides/080-Files.pdf)

# jquery - 从 jquery 中的文本函数中删除文本时出错

> ID：12894938
> 
> 赞同：0
> 
> 时间：2012-10-15T11:44:41.690
> 
> 标签：jquery

我想删除文本。我正在使用以下功能。

```
 var ta=$('title', item).text(); 
```

其结果是“随身充电的案例（视频）”。我想从文本中删除“（视频）”。请让我知道

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:45:37.397

您可以使用[`replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)：

```
ta = ta.replace("(video)", ""); 
```

因此，要替换元素中的文本，请尝试以下操作：

```
$("title", item).text(function(i, text) {
    return text.replace("(video)", "");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:46:20.910

```
var ta = $('title', item).text().replace("(video)", ""); 
```

如果要删除括号之间的任何文本：

```
var ta = $('title', item).text().replace(/\(.*?\)/, ""); 
```

**演示**：http: [//jsfiddle.net/VNbjg/](http://jsfiddle.net/VNbjg/)

# c# - 无法在视图中仅显示可用项目

> ID：12894940
> 
> 赞同：0
> 
> 时间：2012-10-15T11:44:45.383
> 
> 标签：c#, wpf, button, mvvm, viewmodel

我是一名 C++ 开发人员，最近转向 C#。我正在开发一个 WPF 应用程序，我需要在其中动态生成按钮、文本框等 Ui 组件。这就是我到目前为止所做的。

**XAML 类：**

```
<Grid Visibility="{Binding IsAvailable, Converter={StaticResource booltovisibility}}">
    <Grid.Resources>
        <convert:BooleanToVisibilityConverter x:Key="booltovisibility"/>
    </Grid.Resources>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="170" />
        <ColumnDefinition />
        <ColumnDefinition Width="130" />
        <ColumnDefinition Width="115" />
    </Grid.ColumnDefinitions>
    <Label Grid.Column="0" Content="{Binding ChannelName}" Height="25" Width="120" Name="VoltageLabel" Margin="20,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Left" />
    <TextBox Grid.Column="1" Text="{Binding VoltageText}" Height="25" Width="65" Name="VoltageBox" Margin="0,0,80,0" VerticalAlignment="Center" HorizontalAlignment="Center" />
    <Button Grid.Column="1" Content="Set" CommandParameter="{Binding VoltageText}" Command="{Binding VoltageCommand}" Height="25" Width="65" Name="VoltageSetbtn" Margin="80,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Center" />
    <Label Grid.Column="2" Content="{Binding CurrentText}"  Height="25" Width="40" Name="CurrentLabel" Margin="0,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Center" />
    <ToggleButton Grid.Column="3" Content="On"  Height="25" Width="30" Name="VoltageToggleBtn" Margin="0,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Center" />
</Grid>

<Button Content="Bavaria" Name="BavariaBtn" Click="BavariaBtn_Click" /> 
```

**视图模型类：**

```
public List<VoltageBoardChannel> channelList = null;       

    public List<VoltageBoardChannel> bavaria2Channels = new List<VoltageBoardChannel>
    {
         new VoltageBoardChannel { ChannelName = "VDD__MAIN", IsAvailable = true, VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
         new VoltageBoardChannel { ChannelName = "VDD__IO__AUD", IsAvailable = true, VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
         new VoltageBoardChannel { ChannelName = "VDD__CODEC__AUD", IsAvailable = true, VoltageText = String.Empty, VoltageCommand = m_voltageCommand},
         new VoltageBoardChannel { ChannelName = "VDD__DAL__AUD", IsAvailable = true, VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
         new VoltageBoardChannel { ChannelName = "VDD__DPD__AUD", IsAvailable = true, VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
         new VoltageBoardChannel { ChannelName = "VDD__PLL__AUD", IsAvailable = true, VoltageText = String.Empty, VoltageCommand = m_voltageCommand },        
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false, VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false, VoltageText = String.Empty, VoltageCommand = m_voltageCommand }
    };

    private ICommand m_voltageCommand;        

    public List<VoltageBoardChannel> bavaria1Channels = new List<VoltageBoardChannel>
    {
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false, VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false, VoltageText = String.Empty, VoltageCommand = m_voltageCommand }
         new VoltageBoardChannel { ChannelName = "VDD__MAIN", IsAvailable = true, VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
         new VoltageBoardChannel { ChannelName = "VDD__IO", IsAvailable = true, VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
         new VoltageBoardChannel { ChannelName = "VDD__CODEC", IsAvailable = true, VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
         new VoltageBoardChannel { ChannelName = "VDD__LDO", IsAvailable = true, VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
         new VoltageBoardChannel { ChannelName = "VDD__AMP", IsAvailable = true, VoltageText = String.Empty, VoltageCommand = m_voltageCommand }             
    };            

    public VoltageViewModel()
    {
        channelList = new List<VoltageBoardChannel>(0);
        channelList = bavaria1Channels;            
        m_voltageCommand = new DelegateVoltageCommand(x => SetCommandExecute(x));
    }

    public List<VoltageBoardChannel> VoltageChannelList
    {
        get 
        { 
            return channelList; 
        }

        set
        { 
            channelList = value;
            OnPropertyChanged("ChannelList");
        }
    }        

    public void SetCommandExecute(object voltageText)
    {
        Debug.WriteLine(voltageText);
    } 
```

**型号类：**

```
private string mChannelName;
    public string ChannelName
    {
        get; set;
    }

    private bool mIsAvailable;
    public bool IsAvailable
    {
        get; set;
    }

    string voltageText = string.Empty;
    public string VoltageText
    {
        get; set;
    }

    string currentText = "0 V";
    public string CurrentText
    {
        get; set;
    }

    public ICommand VoltageCommand { get; set; } 
```

**XAml.cs：**

```
 VoltageViewModel mVoltageViewModel = new VoltageViewModel();

    public VoltageView()
    {
        InitializeComponent();
        this.DataContext = mVoltageViewModel;

        OnChildAdd();
    }
public void OnChildAdd() //Constructor
    {   
        VoltageViewModel mVoltageViewModel = new VoltageViewModel();         
        foreach (VoltageBoardChannel mVoltageChannelViewModel in mVoltageViewModel.VoltageChannelList)
        {
            VoltageChannelView mVoltageChannelView = new VoltageChannelView();
            mVoltageChannelView.Margin = new Thickness(2);
            mVoltageChannelView.ChannelInfo = mVoltageChannelViewModel;
            // Some Code
        }
    } 
```

这里它显示了 Bavaria 1 的所有频道，甚至是 one's where `available = false`。因此，当它为 false 时，它​​会显示文本框、按钮、标签和切换按钮。频道名称是“”。我想实现以下目标：

我这里有 2 个频道，**bavaria 1 和 bavaria 2。**在启动时 bavaria1 已经显示。在这里，我想检查可用频道并仅将那些添加到我的启动视图中，即`available = true`应该显示，而当`available = false`不显示相应元素时。目前甚至`available = false`显示按钮、文本框、切换按钮，除了标签（频道名称将是“”）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:18:14.780

您可以执行类似创建这样的属性的操作：

```
List<VoltageChannel> AvailableChannels {
  get
  {
     var returned = new List<VoltageChannel>();
     foreach (VoltageChannel vc in VoltageChannelList)
     {
        if (vc.IsAvailable)
          returned.add(vc);
     }
     return vc;
  }
} 
```

然后，将您的视图绑定到此属性，可能使用像这样的 ItemsControl：

```
<ItemsControl Name="_itemsControl"  ItemsSource="{Binding AvailableChannels}">
  <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate><WrapPanel />
    </ItemsPanelTemplate>
  </ItemsControl.ItemsPanel>
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      ... (your XAML to show the channels) ...
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

（没有测试你的代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:18:48.830

为了使用布尔绑定隐藏 XAML 中的元素，您需要对其进行转换，因为元素的 Visibility 属性不是布尔字段。

```
<ListBox ItemsSource="{Binding VoltageChannelList}">
  <ListBox.Resources>
    <BooleanToVisibilityConverter x:Key="booltovisibility"/>
  </ListBox.Resources>
  <Grid Visibility="{Binding IsAvailable,
                     Converter={StaticResource booltovisibility}}">
     <!-- controls -->
  </Grid>
</ListBox> 
```

使用默认的[BooleanToVisibility](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)转换器。

* * *

话虽如此，您可能应该将 VoltageChannelList 更改为[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)，以便在插入或删除项目时，更改会反映到您的视图中。

另请注意，当您使用自动属性时，您不会创建支持字段

```
private bool mIsAvailable; // this is not used by the property below
public bool IsAvailable { get; set; } 
```

使用此代码时，mIsAvailable 永远不会从对 IsAvailable 的调用中返回，因为它会创建自己的支持字段。

# sql - 日期错误无效号码

> ID：12894941
> 
> 赞同：1
> 
> 时间：2012-10-15T11:44:46.057
> 
> 标签：sql, oracle, oracle10g, date-arithmetic

我想给 sysdate 加 10 分钟，

```
select to_char(SYSDATE,'dd-Mon-yyyy hh:mi:ss') + 10/1440 from dual 
```

当我尝试上述方法时，我得到了错误

```
ORA-01722: invalid number 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:46:13.643

出现错误是因为您添加`10/1440`到 char not to date。

试试这个：

```
select SYSDATE + 10/1440 from dual; 
```

或者

```
select to_char(SYSDATE+ 10/1440,'dd-Mon-yyyy hh:mi:ss')  from dual; 
```

或者

```
select to_char( sysdate + interval '10' minute,'dd-Mon-yyyy hh:mi:ss')  
from dual; 
```

[在这里](http://www.orafaq.com/faq/how_does_one_add_a_day_hour_minute_second_to_a_date_value)您可以找到更多信息。

[在这里](https://stackoverflow.com/questions/257324/oracle-how-to-add-minutes-to-a-timestamp)你可以找到类似的问题，还有更多的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T11:47:45.573

您不需要先“to_char”日期。

任何一个

```
select SYSDATE + 10/1440 from dual; 
```

或者

```
select to_char(SYSDATE + 10/1440,'dd-Mon-yyyy hh:mi:ss') from dual; 
```

取决于您是否只想要日期或以某种方式格式化的日期的字符串表示形式。

# objective-c - 如何使用 FBRequestConnection 将带有文本的图像上传到 facebook？

> ID：12894942
> 
> 赞同：1
> 
> 时间：2012-10-15T11:44:49.363
> 
> 标签：objective-c, facebook, ios6

我正在尝试使用`FBRequestConnection`如下方式上传带有图像的文本，但我只能上传文本，而不是图像。但是，当我提供任何图像链接代替 img1(image) 时，我就可以在 facebook 墙上看到图像。

```
UIImage *img1 = [UIImage imageNamed:@"Default@2x.png"];

 NSMutableDictionary *params = [[NSMutableDictionary alloc] initWithObjectsAndKeys:
                                @"https://developers.facebook.com/ios", @"link",
                               img1, @"picture",
                               @"Facebook SDK for iOS", @"name",
                               @"build apps.", @"caption",
                               @"imagae description.", @"description",
                               nil]; 

[params setObject:@"post message" forKey:@"message"];

[FBRequestConnection
 startWithGraphPath:@"me/feed"
 parameters:params
 HTTPMethod:@"POST"
 completionHandler:^(FBRequestConnection *connection,
                     id result,
                     NSError *error) {
     NSString *alertText;
     if (error) {
         alertText = [NSString stringWithFormat:
                      @"error: domain = %@, code = %d",
                      error.domain, error.code];
     } else {
         alertText = @"Posted successfully.";
     }
     // Show the result in an alert
     [[[UIAlertView alloc] initWithTitle:@"Result"
                                 message:alertText
                                delegate:self
                       cancelButtonTitle:@"OK!"
                       otherButtonTitles:nil]
      show];
 }]; 
```

我已经获得了两个权限**@"publish_actions",@"user_photos"**

请让我知道我在这段代码中哪里错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:47:45.213

[在IOS Facebook SDK 3 上传图片](https://stackoverflow.com/questions/12607473/ios-facebook-sdk-3-upload-image-with-message/12615336#12615336)中查看我的答案并附上消息

这是您需要的类似方式。只需根据您的要求添加更多参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:02:11.157

将@“图片”更改为@“来源”。如果您使用的是新的 Facebook 3.1 SDK，您可以更简单：

```
FBRequest *req = [FBRequest requestForUploadPhoto:img1];
[req.parameters addEntriesFromDictionary:[NSMutableDictionary dictionaryWithObjectsAndKeys:@"post message", @"message", nil]];

FBRequestConnection *con = [[FBRequestConnection alloc] init];
[con addRequest:req completionHandler.... 
```

# java - Android 蓝牙设备选择器用法

> ID：12894945
> 
> 赞同：4
> 
> 时间：2012-10-15T11:44:57.433
> 
> 标签：java, android, bluetooth, device, picker

我的应用程序需要蓝牙连接。在第一阶段，我试图打开标准活动**“蓝牙设备选择器”**来帮助用户扫描新设备或从列表中选择一个设备。

问题是我无法获得蓝牙设备选择器的任何工作示例。任务很简单。使用 Intent *“android.bluetooth.devicepicker.action.LAUNCH”启动 Activity*

并且设备选择器打开没有任何问题。

但是设备选择器需要四个**附加功能**，我无法确定下面列出的两个附加功能的确切参数。

```
.putExtra("android.bluetooth.devicepicker.extra.LAUNCH_PACKAGE","com.extreme.controlcenter"

.putExtra("android.bluetooth.devicepicker.extra.DEVICE_PICKER_LAUNCH_CLASS","com.extreme.controlcenter.WelcomeActivity") 
```

我认为参数应该是

*“android.bluetooth.devicepicker.extra.LAUNCH_PACKAGE”*

应该有我的包裹的名称，所以我只通过了。那是 *“com.extreme.controlcenter”*

第二个应该是必须接收在选择设备后完成的广播的组件的名称。在这里，我尝试输入具有*onReceive()*函数的类的名称。

但问题是在设备选择器中选择设备时不会调用 onReceive() 函数！

```
public void onReceive(Context context, Intent intent) {

            String action = intent.getAction();

            //Device Selected on Device Picker
            if("android.bluetooth.devicepicker.action.DEVICE_SELECTED".equals(action)) {
                //context.unregisterReceiver(this);

                BluetoothDevice device = (BluetoothDevice) intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

                Toast.makeText(context, "device" + device.getAddress(), Toast.LENGTH_SHORT).show();

                String MAC = device.getAddress();
                //Log.d("my", MAC);

                Intent intent2 = new Intent(WelcomeActivity.this, ControlActivity.class);
                intent2.putExtra(EXTRA_DEVICE_ADDRESS, MAC);
                startActivity(intent2);
            }

        }; 
```

我创建了一个**Intent 过滤器**并在主 Activity 的 onCreate() 中注册了一个接收

```
 // Register the BroadcastReceiver
    IntentFilter filter = new IntentFilter("android.bluetooth.devicepicker.action.DEVICE_SELECTED");

    registerReceiver(mReceiver, filter); 
```

一件事是，如果我不提供这两个额外内容，则**广播**事件将成功接收。但是该代码仅在我的 TAB 上运行，但同样在手机中崩溃。所以我认为提供这两个额外的东西是强制性的。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T01:10:01.083

EXTRA 中的“com.extreme.controlcenter.WelcomeActivity”需要是一个 BroadcastReceiver 类，例如 MyBroadcastReceiver.class.getName()。我也在标签内的清单中声明了它

# c# - 不再从串口接收数据？

> ID：12894947
> 
> 赞同：2
> 
> 时间：2012-10-15T11:44:58.723
> 
> 标签：c#, event-handling, serial-port

我正在使用 SerialPort.ReadLine() 方法来显示从串行端口接收到的数据（下面的代码）。

以前的代码看起来像[**这样**](https://stackoverflow.com/questions/12886850/sending-the-right-gcode-string-to-a-serial-port)并接收到数据，但它没有发送数据。现在反过来了：

由于我将`port.DataReceived`事件放在`if(port==null)`语句中并添加`SerialPort port;`为字段，因此我不再接收数据。将事件放在 if 语句中可以改变接收和显示数据的方式吗？我该如何解决？

```
 //Fields
        List<string> myReceivedLines = new List<string>();
        SerialPort port;

        //subscriber method for the port.DataReceived Event
        private void DataReceivedHandler(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {
            SerialPort sp = (SerialPort)sender;
            while (sp.BytesToRead > 0)
            {
                try
                {
                    myReceivedLines.Add(sp.ReadLine());
                }
                catch (TimeoutException)
                {
                    break;
                }
            }
        }

        protected override void SolveInstance(IGH_DataAccess DA)
        {
           //Opening the port
            if (port == null)
            {

                string selectedportname = default(string);
                DA.GetData(1, ref selectedportname);
                int selectedbaudrate = default(int);
                DA.GetData(2, ref selectedbaudrate);
                bool connecttodevice = default(bool);
                DA.GetData(3, ref connecttodevice);

                //Assigning an object to the field within the SolveInstance method()
                port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One);

                //Event Handling Method
                if (connecttodevice == true)
                {
                    port.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);
                    DA.SetDataList(0, myReceivedLines);
                }
                //Enables the data terminal ready (dtr) signal during serial communication (handshaking)
                port.DtrEnable = true;
                port.Open();
            }

            //Displays if port if opened
            if (port.IsOpen)
            {
                DA.SetData(1, "Port Open");
            }

            //If the port is open do all the rest
            if (port.IsOpen)
            {
                //Assigning the input to variables for the code.
                List<string> gcode = new List<string>();
                DA.GetDataList(0, gcode);
                bool sendtoprint = default(bool);
                DA.GetData(4, ref sendtoprint);
                bool homeall = default(bool);
                DA.GetData(5, ref homeall);

                //What happens when input is set
                if (sendtoprint == true)
                {

                if (homeall == true)
                {
                    port.Write("G28" + "\n");
                }

            }
            else
            {
                DA.SetData(1, "Port Closed");
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:01:37.570

尝试这样的事情，从端口创建部分中删除事件处理程序的附加

```
if (port == null) 
{ 
    string selectedportname = default(string); 
    DA.GetData(1, ref selectedportname); 
    int selectedbaudrate = default(int); 
    DA.GetData(2, ref selectedbaudrate); 
    bool connecttodevice = default(bool); 
    DA.GetData(3, ref connecttodevice); 

    //Assigning an object to the field within the SolveInstance method() 
    port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One); 

    //Enables the data terminal ready (dtr) signal during serial communication (handshaking) 
    port.DtrEnable = true; 

} 

if (connecttodevice == true) 
{ 
    if(!port.IsOpen)
    {
        port.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler); 
        DA.SetDataList(0, myReceivedLines); 
        port.Open();
    }
} 
else
{
    if(port.IsOpen)
    {
        port.DataReceived -= new SerialDataReceivedEventHandler(DataReceivedHandler); 
       // DA.SetDataList(0, myReceivedLines); // Not sure how you want to remove this
        port.Close();
    } 
} 
```

# android - OutOfMemory 错误：创建位图时位图超出 VM 预算

> ID：12894950
> 
> 赞同：0
> 
> 时间：2012-10-15T11:45:13.513
> 
> 标签：android, android-layout

我在`MyView`这里画画。有时，当我打开活动时，我在 MyView 中收到 OutOfMemory 异常位图大小超出 VM 预算`onSizeChanged()`。请问有人对我有什么建议吗？

这是我的代码：

```
private Paint mPaint; 
private Bitmap mBitmap;
private Canvas canvas;
public class MyView extends View
{
    private Path mPath;
    private Paint mBitmapPaint;

    public MyView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
         mPath = new Path();
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);            
        canvas = new Canvas(mBitmap);  
        super.onSizeChanged(w, h, oldw, oldh);
    }

    public void clear(){
        mBitmap = Bitmap.createBitmap(480, 480, Bitmap.Config.ARGB_8888);
        mPath = new Path();
        invalidate();
    }

    public void destroy() {
        if (mBitmap != null) {
            mBitmap.recycle();
        }
    }

    @Override
    protected void onDraw(Canvas canvas) {
        if(action)
        {
            invalidate();
        }

        int swidth=(int)(6*(screenWidth/1024));
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        //mPaint.setColor(0xFFFF0000);
        mPaint.setColor(Color.BLACK);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(swidth);

        int swidth1=(int)(3*(screenWidth/1024));
        Paint painto = new Paint();
        painto.setAntiAlias(true);
        painto.setColor(getResources().getColor(R.color.magnata));
        painto.setStrokeWidth(swidth1);
        painto.setStyle(Paint.Style.FILL);

        xstart=(int)(15*(screenWidth/1024));
        xend=(int)(1010*(screenWidth/1024));
        ystart=(int)(90*(screenHeight/600));
        y1end=(int)(550*(screenHeight/600));

        canvas.drawLine(xstart, ystart, xend, ystart, painto);  
        canvas.drawLine(xstart, ystart, xstart, y1end, painto);
        canvas.drawLine(xstart, y1end, xend, y1end, painto);
        canvas.drawLine(xend, ystart, xend, y1end, painto);

        Paint p1=new Paint();

        p1.setColor(Color.BLACK);

        p1.setAntiAlias(true);

        Paint p2=new Paint();
        p2.setColor(getResources().getColor(R.color.bcolor));
        p2.setAntiAlias(true);

        float swidth3=(int)(120*(screenWidth/1024));

        float swidth4=(int)(4*(screenWidth/1024));
        p1.setTextSize(swidth3);
        p2.setTextSize(swidth3);

        Paint p3=new Paint();
        p3.setColor(Color.BLACK);
        p3.setStrokeWidth(swidth4);
        p3.setAntiAlias(true);
        p3.setStyle(Paint.Style.FILL);

        Typeface font = Typeface.createFromAsset(getAssets(), "font/KINDTRG.TTF"); 
        Typeface font2=Typeface.createFromAsset(getAssets(), "font/KINDB.TTF");
        p1.setTypeface(font);            
        p2.setTypeface(font);

        int xline1=(int)(15*(screenWidth/1024));

        int xline2=(int)(500*(screenWidth/1024));
        int yline1=(int)(5*(screenHeight/600));
        int yline2=(int)(85*(screenHeight/600));

        canvas.drawLine(xline1, yline1, xline2, yline1, p3);
        canvas.drawLine(xline1, yline2, xline2, yline2, p3);

        float width11=(int)(5*(screenWidth/1024));

        float width22=(int)(20*(screenWidth/1024));
        Paint paint9=new Paint();
        paint9.setStrokeWidth(width11);
        paint9.setColor(getResources().getColor(R.color.gray));
        paint9.setAntiAlias(true);
        DashPathEffect dashPath = new DashPathEffect(new float[]{width22,width22}, (float) 5.5);

        paint9.setPathEffect(dashPath);
        paint9.setStyle(Paint.Style.STROKE);

        float width121=(int)(2*(screenWidth/1024));
        Paint paint2=new Paint();
        paint2.setStrokeWidth(width121);
        paint2.setAntiAlias(true);
        paint2.setColor(Color.BLACK);
        paint2.setTextSize(15);
        paint2.setStyle(Style.STROKE);

        float width131=(int)(6*(screenWidth/1024));
        float textsize22=(int)(17*(screenWidth/1024));
        Paint paint1 = new Paint();

        paint1.setStyle(Paint.Style.FILL);
        paint1.setStrokeWidth(width131);
        paint1.setTypeface(font2);
        paint1.setAntiAlias(true);
        paint1.setColor(Color.BLACK);
        paint1.setTextSize(textsize22);

        int xtextl=(int)(65*(screenWidth/1024));
        int ytext1=(int)(107*(screenHeight/600));

        canvas.drawText("Say  the  words  that  start  with  the  short   a   sound .", xtextl, ytext1, paint1);

        int ytext2=(int)(228*(screenHeight/600));
        int ytext3=(int)(340*(screenHeight/600));
        int ytext4=(int)(359*(screenHeight/600));

        canvas.drawText("Circle  the  pictures  that  start  with  the  short   a   sound.", xtextl, ytext2, paint1);
        canvas.drawText("Say the name of each picture to help you determine the beginning sound.", xtextl,ytext3,paint1);
        canvas.drawText("  Press the tennis ball with the correct answer to spell the word.", xtextl, ytext4,paint1);

        Paint p=new Paint();
        int xcir1=(int)(65*(screenWidth/1024));
        int xcir2=(int)(1010*(screenWidth/1024));
        int xcir3=(int)(10*(screenWidth/1024));

        float rad=(int)(2*(screenWidth/1024));
        int ycir1=(int)(212*(screenHeight/600));
        int ycir2=(int)(323*(screenHeight/600));
        p.setColor(getResources().getColor(R.color.magnata));

        for(int i=xcir1;i<xcir2;i+=xcir3)
        {
            canvas.drawCircle(i, ycir1, rad, p);
        }
        for(int i=xcir1;i<xcir2;i+=xcir3)
        {
            canvas.drawCircle(i, ycir2, rad, p);
        }  

        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, mPaint); 
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 2;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }

    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        canvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();
        Log.i("me.getRawX()",""+ event.getRawX());
        Log.i("me.getRawY()",""+ event.getRawY());

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
        }
        return true;
    }
} 
```

我在`onSizeChanged()`下面的行中遇到错误：

```
mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:55:06.300

如果您的位图非常大，或者至少如果您释放的应用程序内存几乎耗尽，则新位图不再适合应用程序内存，因为旧位图仍然存在（直到垃圾收集器丢弃并释放它)

您可以通过（明确）首先释放旧位图的内存来解决您的问题。

使用[recycle()](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)方法：

```
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
  if(mBitmap != null) {
    // Explicitly free memory of old bitmap
    mBitmap.recycle();
  }
  mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);            

  // Rest of code
} 
```

你可能想在你的`clear()`方法中做同样的事情。

# c# - 我可以在 WinRT / Windows 8 商店应用程序中绑定 DynamicObject

> ID：12894952
> 
> 赞同：5
> 
> 时间：2012-10-15T11:45:18.457
> 
> 标签：c#, .net, dynamic

我有以下代码：

```
 public class MyClass: DynamicObject, INotifyPropertyChanged
    {
    Dictionary<string, object> properties = new Dictionary<string, object>();

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        if (properties.ContainsKey(binder.Name))
        {
            result = properties[binder.Name];
            return true;
        }
        else
        {
            result = "Invalid Property!";
            return false;
        }
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        properties[binder.Name] = value;
        this.OnPropertyChanged(binder.Name);
        return true;
    }

    public override bool TryInvokeMember(InvokeMemberBinder binder, object[] args, out object result)
    {
        dynamic method = properties[binder.Name];
        result = method(args[0].ToString(), args[1].ToString());
        return true;
    }

    ///.... Rest of the class.
    } 
```

当我从 xaml 绑定它时，TryGetMember 中的调试点不是触发点。我想念什么吗？

```
<DataTemplate x:Key="SearchResults">
    <Grid Width="294" Margin="6">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" Margin="0,0,0,10" Width="40" Height="40">
            <Image Source="{Binding Path=Banner}" Stretch="UniformToFill"/>
        </Border>
        <StackPanel Grid.Column="1" Margin="10,-10,0,0">
            <TextBlock Text="{Binding SeriesName}" Style="{StaticResource BodyTextStyle}" TextWrapping="NoWrap"/>
            <TextBlock Text="{Binding Subtitle}" Style="{StaticResource BodyTextStyle}" Foreground="{StaticResource ApplicationSecondaryForegroundThemeBrush}" TextWrapping="NoWrap"/>
            <TextBlock Text="{Binding Overview}" Style="{StaticResource BodyTextStyle}" Foreground="{StaticResource ApplicationSecondaryForegroundThemeBrush}" TextWrapping="NoWrap"/>
        </StackPanel>
    </Grid>
</DataTemplate> 
```

数据上下文设置为

```
public ObservableCollection<dynamic> SearchResults {get;set;} 
```

和

```
 ICollection col = item.SearchResults;    
 this.DefaultViewModel["Results"] = col;  //this is the datacontext of the gridview 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:36:55.533

这是我用于某种动态绑定的解决方案。绑定语法只需要包含 []：

```
public class DynamicLocalSettings : BindableBase
{
    public object this[string name]
    {
        get
        {
            if (ApplicationData.Current.LocalSettings.Values.ContainsKey(name))
                return ApplicationData.Current.LocalSettings.Values[name];
            return null;
        }
        set
        {
            ApplicationData.Current.LocalSettings.Values[name] = value;
            OnPropertyChanged(name);
        }
    }
} 
```

# iphone - 如何在Objective C中删除html标签并将字符修剪为250

> ID：12894955
> 
> 赞同：0
> 
> 时间：2012-10-15T11:45:26.810
> 
> 标签：iphone, xcode, uiwebview

我在 webView 中显示 html 数据（大量内容）。现在我想删除所有标签并将内容修剪为仅 250 个字符并显示在我的 Web 视图中。

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:55:12.267

在类中包含此功能。

在.h

```
- (NSString *)stringByStrippingHTML:(NSString *)inputString; 
```

米

```
- (NSString *)stringByStrippingHTML:(NSString *)inputString 
{
  NSMutableString *outString;

  if (inputString)
  {
    outString = [[NSMutableString alloc] initWithString:inputString];

    if ([inputString length] > 0)
    {
      NSRange r;

      while ((r = [outString rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
      {
        [outString deleteCharactersInRange:r];
      }      
    }
  }

  return outString; 
} 
```

通话

```
 NSString *plainString = [self stringByStrippingHTML:inputHTMLString ];

    NSString *rangedString = [plainString substringToIndex:249];  //0 to 249 makes it 250 characters 
```

# mobile - xsp.client.script.libraries=none 用于单个 XPage

> ID：12894956
> 
> 赞同：2
> 
> 时间：2012-10-15T11:45:29.057
> 
> 标签：mobile, xpages

我正在使用 XPages 开发移动应用程序。我试图通过在设备上本地缓存资源来加快速度。这不是使用扩展库中的控件的简单任务（例如，我在某些页面上有预输入）。

因此，我决定使用 jQuery Mobile 构建一个并行接口，以便能够对这两种方法进行基准测试。

在这样做时，我想处理 jQuery Mobile XPage 的资源，以便我只加载所需的资源，即避免加载 dojo（此页面上有一个简短的指南，例如：http: [//dpastov.blogspot.dk/2011 /01/trying-to-get-full-control-over-xpage.html](http://dpastov.blogspot.dk/2011/01/trying-to-get-full-control-over-xpage.html) )。我发现的解决方案的问题在于它们的应用范围很广。例如设置

```
xsp.client.script.libraries=none 
```

xsp.properties 中的 xsp.properties 将对数据库中的所有 XPage 生效（包括应用程序的 Ext.lib 版本）。按照“XPages Portable Command Guide”中的指南，我尝试将单个 XPage（jQuery Mobile 之一）的属性设置为：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xp:view xmlns:xp="http://www.ibm.com/xsp/core" disableTheme="true" createForm="false">
        <xp:this.properties>
            <xp:parameter name="xsp.client.script.libraries" value="none">  
            </xp:parameter>
        </xp:this.properties> 
```

不幸的是，这似乎不起作用。

我知道，我可以将第二个 XPage 放在单独的数据库中，但是，我想避免这种情况，因为这会引发其他问题。

有任何想法吗？

/约翰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:58:38.820

您可以通过添加禁用 dojo 库

```
facesContext.getRequestParameters().setJsLibrary(0); 
```

到XPage 的*beforeRenderResponse*或*beforePageLoad*事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:45:17.263

为您的 jQuery 设计使用辅助数据库听起来很合理。然后你应该做的是从辅助数据库加载 UI 并使用 ajax 调用来调用主数据库中的 (a) ajax/rest 控件。您还可以从资源或经典页面（设置为直通 HTML）加载您的 UI。

**选项说明**（每个项目符号是一个单独的方法）：

*   使用辅助数据库（最不理想）
*   将初始 jQuery UI（无实际数据）放入经典页面，并使用来自 XPage 上的 JSON 控件（来自 extlib）的 REST 调用加载数据
*   [使用XAgent](http://www.wissel.net/blog/d6plinks/shwl-7mgfbn)加载初始 jQuery UI并继续使用 REST/JSON 填充数据

希望有帮助

# node.js - 获取无效的 ELF 标头问题

> ID：12894959
> 
> 赞同：2
> 
> 时间：2012-10-15T11:45:32.163
> 
> 标签：node.js, npm

当我尝试安装 npm 时，会出现以下问题....

```
module.js:485
  process.dlopen(filename, module.exports);
          ^
Error: /projects/node_modules/xml2json/node_modules/node-expat/build/Release/node_expat.node: invalid ELF header
    at Object.Module._extensions..node (module.js:485:11)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/projects/node_modules/xml2json/node_modules/node-expat/lib/node-expat.js:4:13)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12) 
```

任何人都可以帮助如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-08T15:00:40.340

我最好的猜测：您将它安装在本地计算机上，然后尝试在您的任何 VM 上运行它。尝试卸载它，然后在本地安装它。

# facebook - 托管安全 Facebook 应用程序的服务器的自签名证书

> ID：12894965
> 
> 赞同：0
> 
> 时间：2012-10-15T11:45:47.240
> 
> 标签：facebook, certificate, ssl-certificate, self-signed, posting

我们有一个网站，我们有可用的自签名证书。我们将自定义的 Flash 播放器轻松发布到 FB，最终用户禁用了 FB 的安全浏览。我们需要在启用安全浏览的地方发布我们的 Flash 播放器。我们在发布到 FB 时添加了带有 https:// swf 内容的 property="og:video:secure_url" 元标记。但是播放器仍然没有加载，而是在单击图像时重定向到另一个页面。

我们在这里需要 SSL 而不是自签名证书，还是我们需要做其他事情？

# php - 如何定义 $_SERVER['HTTP_NAME'] 和 $_SERVER['SERVER_ADDR'] 在 PHP 中被更改？

> ID：12894968
> 
> 赞同：2
> 
> 时间：2012-10-15T11:45:52.340
> 
> 标签：php

> **可能重复：**
> [创建许可证系统](https://stackoverflow.com/questions/10578075/creating-a-license-system)

我在项目中有一个脚本文件（license.php），我需要知道服务器现在正在运行的确切域和 IP。我也尝试过使用`$_SERVER['HTTP_NAME']`， `$_SERVER['SERVER_ADDR']`但是通过将 license.php 重命名为 license.org.php 并制作另一个 license.php 文件并在该更改上更改为有效的许可证并需要 license.org.php，它可以很容易`$_SERVER['HTTP_NAME']`地 `$_SERVER['SERVER_ADDR']`无效。那么我怎样才能获得真正的 HTTP_NAME 和 SERVER_ADDR 呢？任何解决方案？

**注意：**所有 php 文件都将由 IonCube 加密，因此用户无法使用源代码。

# java - NoClassDefFoundError: com/beans/MyBean

> ID：12894973
> 
> 赞同：0
> 
> 时间：2012-10-15T11:46:14.300
> 
> 标签：java, noclassdeffounderror

我知道这个问题问得够多了。以前在这里的次数，但不幸的是我仍然无法找到解决方案。我正在尝试从命令提示符（没有 Eclipse）运行 swt-java 项目并得到以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/beans/MyBean
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at org.hibernate.util.ReflectHelper.classForName(ReflectHelper.java:100)
    at org.hibernate.util.ReflectHelper.reflectedPropertyClass(ReflectHelper.java:70)
    at org.hibernate.mapping.SimpleValue.setTypeUsingReflection(SimpleValue.java:276)
    at org.hibernate.cfg.HbmBinder.bindSimpleId(HbmBinder.java:401)
    at org.hibernate.cfg.HbmBinder.bindRootPersistentClassCommonValues(HbmBinder.java:334)
    at org.hibernate.cfg.HbmBinder.bindRootClass(HbmBinder.java:273)
    at org.hibernate.cfg.HbmBinder.bindRoot(HbmBinder.java:144)
    at org.hibernate.cfg.Configuration.add(Configuration.java:669)
    at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:504)
    at org.hibernate.cfg.Configuration.addResource(Configuration.java:566)
    at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1587)
    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1555)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1534)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1508)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1428)
    at com.facadeimplementation.hibernate.util.HibernateFactory.configureSessionFactory(HibernateFactory.java:83)
    at com.facadeimplementation.model.dao.MyDao.<init>(MyDao.java:23)
    at com.facadeimplementation.model.dao.MappingDao.<init>(MappingDao.java:23)
    at com.ui.MainForm.<init>(MainForm.java:45)
    at com.ui.MainForm$1.run(MainForm.java:77)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at com.ui.MainForm.main(MainForm.java:74)
Caused by: java.lang.ClassNotFoundException: com.beans.MyBean
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 37 more 
```

我能够在 Eclipse 中成功运行这个项目。

**MyBean.java**包含在一个 Jar 中。我在项目中使用了很多 POJO，因此无法直接使用它们，而不是在 jar 中使用它们。

我已经关注了很多链接来解决这个问题。他们之中有一些是 ：

[NoClassDefFoundError 和 ClassNotFoundException 之间的原因和区别是什么？](https://stackoverflow.com/questions/1457863/what-is-the-difference-between-noclassdeffounderror-and-classnotfoundexception)

[http://javaeesupportpatterns.blogspot.in/2012/06/javalangnoclassdeffounderror-how-to.html](http://javaeesupportpatterns.blogspot.in/2012/06/javalangnoclassdeffounderror-how-to.html)

[http://javarevisited.blogspot.in/2011/06/noclassdeffounderror-exception-in.html](http://javarevisited.blogspot.in/2011/06/noclassdeffounderror-exception-in.html)

谁能帮我？

**编辑**

我正在尝试使用以下命令运行我的 Java 应用程序：

```
java -classpath .:swt.jar:mybeans.jar:(other necessary jars separated by :) com.ui.MainForm.java 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:48:13.863

确保可以`com/beans/MyBean.class`在 JAR 文件中找到您的 bean。即，当您使用 列出 JAR 文件的内容时`jar tf`，必须有一行内容为

```
com/beans/MyBean.class 
```

一定是这样的。还要确保您确实将 JAR 添加到类路径中。您可以使用此代码检查：

```
URL url = getClass().getClassLoader().getResource("com/beans/MyBean.class"), 
```

如果`url`是`null`，则该类不在运行时类路径上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:25:24.517

错误的起点在

```
com.facadeimplementation.hibernate.util.HibernateFactory.configureSessionFactory(HibernateFactory.java:83) 
```

然后你得到了。

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/beans/MyBean 
```

您有可能在 POJO 中使用第三方依赖项，并且该 API 正在引用其他一些 API。如果它也从 CLASSPATH 中丢失。您可能会收到此错误。

只需检查您在 POJO 中使用的第三方依赖项是否`com/beans/MyBean`在 CLASSPATH 中。

正如您所提到的，它正在从 Eclipse 中运行查找。

当您从 CMD 运行时，eclipse CLASSPATH 中的所有`.jar`文件是否也在 CLASSPATH 中。

可能是您列出了该 POJO 中使用的 API。这可能更有帮助。

# android - 任何人都有 MediaRecorder 使用 ParcelFileDescriptor 和 createPipe()？

> ID：12894976
> 
> 赞同：25
> 
> 时间：2012-10-15T11:46:19.990
> 
> 标签：android, android-mediarecorder

我正在尝试制作一个录制音频的示例，数据存储由应用程序处理，而不是`MediaRecorder`. 用例包括将录音存储在内部存储器上或加密录音。

原则上，这应该使用 on 创建的管道工作`createPipe()`，`ParcelFileDescriptor`但我得到的输出格式错误。

首先，[这是一个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Media/AudioRecording)，它使用“自然”记录`MediaRecorder`，并`MediaRecorder`直接写入外部存储上的输出文件。这个应用程序工作得很好，输出可以由记录它的 Android 设备或我的 Linux 机器上的 VLC 播放。

[这是我`createPipe()`对这个项目的变体](https://github.com/commonsguy/cw-omnibus/tree/master/Media/AudioRecordStream)。从一般`MediaRecorder`配置（例如，`setOutputFormat()`）的角度来看，它与第一个相同，因此代码可能是正确的。

但是，我通过以下方式提供输出：

```
 recorder.setOutputFile(getStreamFd()); 
```

where `getStreamFd()`uses `createPipe()`，产生一个后台线程从管道中读取，并返回写入端供`MediaRecorder`：

```
 private FileDescriptor getStreamFd() {
    ParcelFileDescriptor[] pipe=null;

    try {
      pipe=ParcelFileDescriptor.createPipe();

      new TransferThread(new AutoCloseInputStream(pipe[0]),
                       new FileOutputStream(getOutputFile())).start();
    }
    catch (IOException e) {
      Log.e(getClass().getSimpleName(), "Exception opening pipe", e);
    }

    return(pipe[1].getFileDescriptor());
  } 
```

`TransferThread`是一个经典`java.io`的流到流复制例程，增加了智能以刷新和同步输出文件：

```
 static class TransferThread extends Thread {
    InputStream in;
    FileOutputStream out;

    TransferThread(InputStream in, FileOutputStream out) {
      this.in=in;
      this.out=out;
    }

    @Override
    public void run() {
      byte[] buf=new byte[8192];
      int len;

      try {
        while ((len=in.read(buf)) > 0) {
          out.write(buf, 0, len);
        }

        in.close();

        out.flush();
        out.getFD().sync();
        out.close();
      }
      catch (IOException e) {
        Log.e(getClass().getSimpleName(),
              "Exception transferring file", e);
      }
    }
  } 
```

当我运行第二个应用程序时，我得到一个输出文件，通过十六进制编辑器的粗略检查，看起来基本没问题。IOW，它不像是一个零字节文件，或者充满了无法识别的乱码。它充满了与第一个应用程序的输出类似的乱码。但是，Android 和 VLC 都无法播放。

如果我不得不猜测，我会假设我在从管道读取时搞砸了一些东西，但我不确定具体哪里出错了。

有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T13:51:11.160

我想这与我对您其他问题的回答有关。 [任何人都有 MediaPlayer 使用 ParcelFileDescriptor 和 createPipe()？](https://stackoverflow.com/questions/12920429/anyone-have-mediaplayer-working-with-parcelfiledescriptor-and-createpipe)

可能当 MediaRecorder 将寻求写入 Header 信息时，管道已关闭。

如果您使用：

```
recorder.setOutputFormat(MediaRecorder.OutputFormat.RAW_AMR);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
```

该记录工作正常，因为它没有标题信息，只有原始音频。

# keyboard - 在 ToolStrip 中重置“键盘提示”

> ID：12894983
> 
> 赞同：0
> 
> 时间：2012-10-15T11:46:43.673
> 
> 标签：keyboard, toolstrip

我们从网格控件的单元格中显示一个子对话框。该对话框包含一个 ToolStrip，其中包含带有 & 符号的项目，以便从键盘快速访问它们。一切正常：我们可以按 ALT 来显示这些键盘提示，和/或发出诸如 ALT+M、C 之类的击键来激活相应的 ToolStrip 命令。

但是，如果我们打开 ToolStrip 的下拉菜单之一并且没有做出选择，然后单击我们的子对话框外部以这种方式关闭它，ToolStrip 就会发疯。当我们再次打开对话框时，键盘提示最初带有下划线，最后一个顶级项目可能会突出显示，并且我们的 ALT 命令不起作用。

如何重置 ToolStrip 以使其在这种情况下正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:54:22.580

之前我们在子对话框的 OnHide 事件中使用 ToolStripDropDown 的 Hide 方法，在对话框关闭时自动关闭每个活动的下拉菜单，但正确的解决方案应该是：

```
fToolStripDropDownButtonClear.DropDown.Close(ToolStripDropDownCloseReason.ItemClicked) 
```

即需要完全使用'ItemClicked' 参数值发出Close 方法。

# python - 如何通过networkx制作可点击的图表？

> ID：12894985
> 
> 赞同：5
> 
> 时间：2012-10-15T11:46:49.993
> 
> 标签：python, networkx, imagemap

我正在尝试在 python 中生成可点击的图形图像。我一开始直接调用了graphviz，然后发现networkx [http://networkx.lanl.gov](http://networkx.lanl.gov)。

我希望我的程序获取有关在用户单击图形的 (x,y) 坐标处显示哪个节点的信息。我想我可以使用打开并显示图形的 pyplot 窗口，在鼠标单击时使用 (x,y) 坐标，但我需要某种图像映射来知道在该坐标处已可视化哪个节点！

你能告诉它是否/如何完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:33:18.663

I solved it thanks to the good folks at [http://groups.google.com/group/networkx-discuss](http://groups.google.com/group/networkx-discuss) ( [http://groups.google.com/group/networkx-discuss/browse_thread/thread/aac227e1fb2a4719](http://groups.google.com/group/networkx-discuss/browse_thread/thread/aac227e1fb2a4719) ):

The following (partial) code works in Tkinter, allows the creation of a matplotlib window (non blocking, by the way) containing a networkx graph, and executes the procedure visitNode() if you click on a given node.

```
import networkx as nx 
import matplotlib.pyplot as plt 
import pylab

class AnnoteFinder:  # thanks to http://www.scipy.org/Cookbook/Matplotlib/Interactive_Plotting
    """
    callback for matplotlib to visit a node (display an annotation) when points are clicked on.  The
    point which is closest to the click and within xtol and ytol is identified.
    """
    def __init__(self, xdata, ydata, annotes, axis=None, xtol=None, ytol=None):
        self.data = zip(xdata, ydata, annotes)
        if xtol is None: xtol = ((max(xdata) - min(xdata))/float(len(xdata)))/2
        if ytol is None: ytol = ((max(ydata) - min(ydata))/float(len(ydata)))/2
        self.xtol = xtol
        self.ytol = ytol
        if axis is None: axis = pylab.gca()
        self.axis= axis
        self.drawnAnnotations = {}
        self.links = []

    def __call__(self, event):
        if event.inaxes:
            clickX = event.xdata
            clickY = event.ydata
            if self.axis is None or self.axis==event.inaxes:
                annotes = []
                for x,y,a in self.data:
                    if  clickX-self.xtol < x < clickX+self.xtol and  clickY-self.ytol < y < clickY+self.ytol :
                        dx,dy=x-clickX,y-clickY
                        annotes.append((dx*dx+dy*dy,x,y, a) )
                if annotes:
                    annotes.sort() # to select the nearest node
                    distance, x, y, annote = annotes[0]
                    self.visitNode(annote)

    def visitNode(self, annote): # Visit the selected node
        # do something with the annote value
        print "visitNode", annote

fig = plt.figure() ax = fig.add_subplot(111) ax.set_title('select nodes to navigate there')

G=nx.MultiDiGraph()  # directed graph G = nx.wheel_graph(5)

pos=nx.spring_layout(G) # the layout gives us the nodes position x,y,annotes=[],[],[] for key in pos:
    d=pos[key]
    annotes.append(key)
    x.append(d[0])
    y.append(d[1]) nx.draw(G,pos,font_size=8)

af =  AnnoteFinder(x,y, annotes) fig.canvas.mpl_connect('button_press_event', af)

plt.show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-21T09:30:38.503

我在@minerals 发布的解决方案中发现了几个不完整的代码段。在这里，我发布了 python3 的工作代码段

```
import networkx as nx
import matplotlib.pyplot as plt
import graphistry
from pylab import *

class AnnoteFinder:  # thanks to http://www.scipy.org/Cookbook/Matplotlib/Interactive_Plotting
    """
    callback for matplotlib to visit a node (display an annotation) when points are clicked on.  The
    point which is closest to the click and within xtol and ytol is identified.
    """
    def __init__(self, xdata, ydata, annotes, axis=None, xtol=None, ytol=None):
        self.data = list(zip(xdata, ydata, annotes))
        if xtol is None: xtol = ((max(xdata) - min(xdata))/float(len(xdata)))/2
        if ytol is None: ytol = ((max(ydata) - min(ydata))/float(len(ydata)))/2
        self.xtol = xtol
        self.ytol = ytol
        if axis is None: axis = gca()
        self.axis= axis
        self.drawnAnnotations = {}
        self.links = []

    def __call__(self, event):
        if event.inaxes:
            clickX = event.xdata
            clickY = event.ydata
            print(dir(event),event.key)
            if self.axis is None or self.axis==event.inaxes:
                annotes = []
                smallest_x_dist = float('inf')
                smallest_y_dist = float('inf')

                for x,y,a in self.data:
                    if abs(clickX-x)<=smallest_x_dist and abs(clickY-y)<=smallest_y_dist :
                        dx, dy = x - clickX, y - clickY
                        annotes.append((dx*dx+dy*dy,x,y, a) )
                        smallest_x_dist=abs(clickX-x)
                        smallest_y_dist=abs(clickY-y)
                        print(annotes,'annotate')
                    # if  clickX-self.xtol < x < clickX+self.xtol and  clickY-self.ytol < y < clickY+self.ytol :
                    #     dx,dy=x-clickX,y-clickY
                    #     annotes.append((dx*dx+dy*dy,x,y, a) )
                print(annotes,clickX,clickY,self.xtol,self.ytol )
                if annotes:
                    annotes.sort() # to select the nearest node
                    distance, x, y, annote = annotes[0]
                    self.drawAnnote(event.inaxes, x, y, annote)

    def drawAnnote(self, axis, x, y, annote):
        if (x, y) in self.drawnAnnotations:
            markers = self.drawnAnnotations[(x, y)]
            for m in markers:
                m.set_visible(not m.get_visible())
            self.axis.figure.canvas.draw()
        else:
            t = axis.text(x, y, "%s" % (annote), )
            m = axis.scatter([x], [y], marker='d', c='r', zorder=100)
            self.drawnAnnotations[(x, y)] = (t, m)
            self.axis.figure.canvas.draw()

df = pd.DataFrame("LOAD YOUR DATA")

# Build your graph
G = nx.from_pandas_edgelist(df, 'from', 'to')
pos = nx.spring_layout(G,k=0.1, iterations=20)  # the layout gives us the nodes position x,y,annotes=[],[],[] for key in pos:
x, y, annotes = [], [], []
for key in pos:
    d = pos[key]
    annotes.append(key)
    x.append(d[0])
    y.append(d[1])

fig = plt.figure(figsize=(10,10))
ax = fig.add_subplot(111)
ax.set_title('select nodes to navigate there')

nx.draw(G, pos, font_size=6,node_color='#A0CBE2', edge_color='#BB0000', width=0.1,
                  node_size=2,with_labels=True)

af = AnnoteFinder(x, y, annotes)
connect('button_press_event', af)

show() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-09T13:29:16.983

[更新亚历山德罗的答案]

这是更新的 alessandro 对 python 3 的回答。

请注意，不建议使用 pylab。

```
import networkx as nx
import matplotlib.pyplot as plt
import pylab

class AnnoteFinder:  # thanks to http://www.scipy.org/Cookbook/Matplotlib/Interactive_Plotting
    """
    callback for matplotlib to visit a node (display an annotation) when points are clicked on.  The
    point which is closest to the click and within xtol and ytol is identified.
    """

    def __init__(self, xdata, ydata, annotes2, axis=None, xtol=None, ytol=None):
        self.data = zip(xdata, ydata, annotes2)
        if xtol is None:
            xtol = ((max(xdata) - min(xdata)) / float(len(xdata))) / 2
        if ytol is None:
            ytol = ((max(ydata) - min(ydata)) / float(len(ydata))) / 2
        self.xtol = xtol
        self.ytol = ytol
        if axis is None:
            axis = pylab.gca()
        self.axis = axis
        self.drawnAnnotations = {}
        self.links = []

    def __call__(self, event):
        if event.inaxes:
            clickX = event.xdata
            clickY = event.ydata
            if self.axis is None or self.axis == event.inaxes:
                annotes2 = []
                for x2, y2, a in self.data:
                    if clickX - self.xtol < x2 < clickX + self.xtol and clickY - self.ytol < y2 < clickY + self.ytol:
                        dx, dy = x2 - clickX, y2 - clickY
                        annotes2.append((dx * dx + dy * dy, x2, y2, a))
                if annotes2:
                    annotes2.sort()  # to select the nearest node
                    distance, x2, y2, annote = annotes2[0]
                    self.visitnode(annote)

    def visitNode(self, annote):  # Visit the selected node
        # do something with the annote value
        print("visitNode", annote)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.set_title('select nodes to navigate there')

G = nx.MultiDiGraph()  # directed graph G = nx.wheel_graph(5)

pos = nx.spring_layout(G)  # the layout gives us the nodes position
x, y, annotes = [], [], []
for key in pos:
    d = pos[key]
    annotes.append(key)
    x.append(d[0])
    y.append(d[1])
    nx.draw(G, pos, font_size=8)

af = AnnoteFinder(x, y, annotes)
fig.canvas.mpl_connect('button_press_event', af)

plt.show() 
```

# c# - 2 个整数数组或字典 - 选择什么来存储图像的高度和宽度？

> ID：12894988
> 
> 赞同：0
> 
> 时间：2012-10-15T11:47:01.997
> 
> 标签：c#, asp.net

我正在尝试在通用处理程序的帮助下获取原始图像的缩略图，以获取请求的宽度和高度。但我想授权对一些有限的宽度和高度的请求。前任。18*18、98*94、117*113 等。这些预定义集合之外的任何内容都将被视为错误请求。所以我想将这些预定义的高度和宽度集保存在某种数据结构中。这样当我收到一些宽度和高度的请求时，我可以检查这是否属于预定义的集合。如果没有，我可以忽略这个请求。像这样的东西：

```
 if(PreferredWidths.Contains(requestedWidth).Index == PreferredHeights.Contains(requestedHeight).Index)
{
           // Process request.. 
} 
```

这是一些逻辑，我可以提出来，我想将其转换为代码（任何更好的东西都值得赞赏）。我不确定应该使用哪些数据结构来存储一组宽度和高度。有没有更好的方法，我可以用于相同的目的。因为任何假用户都可以通过更改处理程序 url 的参数 (abc.ashx?Id=123&width=20&height=30) 从浏览器更改图像来源。在内部，我正在创建缩略图，将它们保存在磁盘上并返回相同的 url。如果请求的宽度和高度集不合法，我不想做这些事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:49:58.343

System.Drawing 中有一个[Size](http://msdn.microsoft.com/en-us/library/system.drawing.size.aspx)结构。您可以只存储尺寸列表，然后使用：

```
var ValidSizes = new List<Size> 
{
    new Size(18, 18),
    new Size(98, 94),
    new Size(117, 113)
};

if(ValidSizes.Any(p => p.Width == requestedWidth && p.Height == requestedHeight))
{
    // Process Request
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:51:34.877

```
IList<Tuple<double, double>> supported = new List<>...

// search usign LINQ
var found = supported.Where(new LambdaComparer<Tuple<double, double>>((s1, s2) =>
     { s1.Item1 == s2.Item1 && s2.Item2 == s2.Item2 })); 
```

See for LambdaComparer in intrawebs, I would recommend John Skeet's one.

# osgi - 蓝图路线部署的卡拉夫酒窖抛出异常

> ID：12894989
> 
> 赞同：5
> 
> 时间：2012-10-15T11:47:03.347
> 
> 标签：osgi, apache-karaf, dosgi

我按照下面给出的 Karaf Cellar 示例进行操作， [http://blog.nanthrax.net/2011/11/apache-karaf-cellar-and-dosgi/](http://blog.nanthrax.net/2011/11/apache-karaf-cellar-and-dosgi/)

我创建了 3 个 OSGi 包，即服务 (Bundle1)、服务实现 (Bundle2) 和客户端 (Bundle3)。我有 2 个 karaf 容器在不同的机器上运行，其中（Bundle1）和（Bundle2）部署在一个 karaf 实例上，（Bundle1）和（Bundle3）部署在另一个 karaf 实例上。正如示例中给出的那样，每件事都运行良好。我从 Karaf container2 中删除了客户端捆绑包，并希望通过蓝图中描述的骆驼路由调用服务。

```
<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
http://www.osgi.org/xmlns/blueprint/v1.0.0
http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">
    <reference id="myService" interface="org.service.cellar.EchoService"     timeout="20000" availability="optional" />
    <camelContext id="camel" trace="false"
        xmlns="http://camel.apache.org/schema/blueprint">
        <route id="client">
            <from uri="timer://foo?fixedRate=true&amp;period=10000" />
            <bean ref="myService" method="process" />
            <log message=" Invoking Service : ${body}" />
        </route>
    </camelContext>
</blueprint> 
```

在 karaf container2 中部署上述蓝图后，我在 karaf 容器 1 中看到以下异常。我无法找出此错误的来源。对此问题的任何评论表示赞赏。

谢谢你。

```
2012-10-15 13:24:40,477 | 错误 | 池 11 线程 7 | 事件调度任务 | 78 - org.apache.karaf.cellar.core - 2.2.4 | 分派任务时出错
java.lang.NullPointerException
        在 org.apache.karaf.cellar.dosgi.RemoteServiceCallHandler.handle(RemoteServiceCallHandler.java:74)[83:org.apache.karaf.cellar.dosgi:2.2.4]
        在 org.apache.karaf.cellar.dosgi.RemoteServiceCallHandler.handle(RemoteServiceCallHandler.java:34)[83:org.apache.karaf.cellar.dosgi:2.2.4]
        在 sun.reflect.GeneratedMethodAccessor31.invoke（未知来源）
        在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_35]
        在 java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_35]
        在 org.apache.aries.proxy.impl.ProxyHandler$1.invoke(ProxyHandler.java:50)[7:org.apache.aries.proxy:0.3.1]
        在 org.apache.aries.proxy.impl.DefaultWrapper.invoke(DefaultWrapper.java:31)[7:org.apache.aries.proxy:0.3.1]
        在 org.apache.aries.proxy.impl.ProxyHandler.invoke(ProxyHandler.java:78)[7:org.apache.aries.proxy:0.3.1]
        在 $Proxy24.handle（未知来源）[78:org.apache.karaf.cellar.core:2.2.4]
        在 org.apache.karaf.cellar.core.event.EventDispatchTask.run(EventDispatchTask.java:77)[78:org.apache.karaf.cellar.core:2.2.4]
        在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)[:1.6.0_35]
        在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)[:1.6.0_35]
        在 java.lang.Thread.run(Thread.java:662)[:1.6.0_35]

```

# sql - 从 SQL 结果中删除周末

> ID：12894991
> 
> 赞同：3
> 
> 时间：2012-10-15T11:47:05.210
> 
> 标签：sql, sql-server, sql-server-2005, datediff

我有以下查询，它为我产生了许多结果。其中之一是每条记录的天数。

我现在需要一个更准确的数字，从等式中删除周末。不知道如何继续并努力理解我找到的答案。到目前为止，我的查询是：

```
select
    i.incidentnumber,
    i.priority, 
    i.status, 
    i.subject,
    i.actualsystem, 
    t.ownerteam, 
    convert(varchar,i.createddatetime,103)[Created],
    convert(varchar,i.lastmoddatetime,103)[Modified], 
    datediff(day,i.createddatetime,{fn now()})[Days old],
    datediff(mi,i.createddatetime,{fn now()})[Minutes old],
    cast(i.createddatetime
    i.owner
from 
    incident i with (nolock) inner join task t with (nolock) on t.parentlink_recid = i.recid
where 
    i.status <> 'Closed' 
    and i.actualsystem <> 'System Administration' 
    --and i.service <> 'Service Request'
    and t.status in ('Active','Waiting','Accepted') 
    --and t.ownerteam <> 'UK Service Desk'

order by 
    --t.ownerteam asc
    --i.actualsystem asc
    datediff(day,i.createddatetime,{fn now()}) desc 
```

我正在使用 SQL 服务器管理器并查询 2005 数据库。我根据需要注释掉。旧的分钟是今天添加的新列。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T11:51:15.000

`DATEPART(dw, your_date)`会告诉你是否是周末。通常 1 表示周六，7 表示周日，但它可以根据服务器配置而改变。阅读[datepart](http://msdn.microsoft.com/pt-br/library/ms174420.aspx)函数以了解它的工作原理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:54:56.793

如果要计算该范围内的工作日数（非周末），最简单的方法就是考虑每周 2 个周末。
例如：

```
SELECT Datediff(D, '2012-01-01', '2012-01-31') / 7 * 5 + 
              Datediff(D, '2012-01-01', '2012-01-31') % 7 WorkDays, 
       Datediff(D, '2012-01-01', '2012-01-31')            AllDays 
```

要计算工作时间（包括部分），请使用以下查询：

```
SELECT ( T.WORKDAYS - 1 ) * 10 + OPENINGDAYHOURS + CLOSINGDAYHOURS 
FROM   (SELECT Datediff(D, OPEN_DATE, CLOSE_DATE) / 7 * 5 + 
                              Datediff(D, OPEN_DATE, CLOSE_DATE) % 7 WorkDays, 
               18 - Datepart(HOUR, OPEN_DATE) 
               OpeningDayHours, 
               Datepart(HOUR, CLOSE_DATE) - 8 
               ClosingdayHours, 
               Datediff(D, OPEN_DATE, CLOSE_DATE)                    AllDays 
        FROM   TABLE1)T 
```

此查询假定工作日从上午 8 点到下午 6 点。

工作示例可以在[这里](http://sqlfiddle.com/#!3/b6451/12)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:19:10.713

To be safe that you get correct data from DATEPART(dw,GETDATE()) you need to use

SET DATEFIRST 1

It will make sure that 1 is Monday and 7 - is Sunday.

Reference: [http://msdn.microsoft.com/en-en/library/ms181598.aspx](http://msdn.microsoft.com/en-en/library/ms181598.aspx)

# arrays - 内存超出范围错误

> ID：12894992
> 
> 赞同：0
> 
> 时间：2012-10-15T11:47:14.210
> 
> 标签：arrays, assembly, mips, pcspim

> **可能重复：**
> [编译时初始化数组错误](https://stackoverflow.com/questions/12881850/compile-time-initialized-array-error)

我正在尝试从编译时间初始化的数组中加载数据。但是当我尝试加载数据时，我得到“内存溢出错误”。这是代码：

```
.data

array: .space 'A','B','C','D','E','F','G','H','I'

.text

 main:
 .
 .
 .

 la $t0,array

# $t1 is intialized to 0 and then incremented in code later for next loading
add $s4,$t1,$t0

 lb $a0,0($s4) # Here is error "Memory out of bound"

 li $v0,4

 syscall 
```

我该如何解决这个问题？我正在使用 QTSimp

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:11:19.617

`.space` reserves empty space, without data in it. You should use:

```
.asciiz "ABCDEFGHI" 
```

# jquery - Highchart 渲染器按最小值和最大值

> ID：12894997
> 
> 赞同：2
> 
> 时间：2012-10-15T11:47:23.900
> 
> 标签：jquery, highcharts

在 Highcharts 如何使用最小值和最大值绘制渲染器矩形选择？

```
Chart.renderer.rect(x, y, width, height, 1); 
```

只有在运行时我才能获得最小值和最大值，但我不知道宽度和高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:31:55.067

您可以使用 getExtremes() 函数返回每个轴的数据最小值。 [http://api.highcharts.com/highcharts#Axis.getExtremes%28%29](http://api.highcharts.com/highcharts#Axis.getExtremes%28%29)

搜索“翻译”以查看如何从 highslide.com/forum/search.php?keywords=translate&fid[0]=9 获取像素值

您需要根据起始 x 和 y 值以及结束 x 和 y 值计算宽度和高度。