# StackOverflow 问答 14247000-14247999

# javafx-2 - 带有图标的 JavaFx2 ImageView 在 Scenebuilder 中显示，但在运行时不显示

> ID：14247000
> 
> 赞同：0
> 
> 时间：2013-01-09T21:39:59.477
> 
> 标签：javafx-2

在 Scenebuilder 中，我将 Imageview 添加到网格窗格并选择了一个图标作为 jpeg 图像。我将图标存储在 My Documents\NetBeansProjects\MyProject 中。它在 Scenebuilder 中显示良好，但是当我运行程序时，没有图标显示。

在 Scenebuilder 1.1 中，我将 Imageview 添加到网格窗格并选择了一个图标作为 jpeg 图像。我将图标存储在 My Documents\NetBeansProjects\MyProject 中。它在 Scenebuilder 中显示良好，但是当我运行程序时，没有图标显示。

这是我的 fxml 文件中的标签

```
 <ImageView fitHeight="36.28910772144808" fitWidth="96.66667175292969" pickOnBounds="true" preserveRatio="true" GridPane.columnIndex="0" GridPane.rowIndex="0">
          <image>
            <Image url="@../../my_pic.JPG" />
          </image>
        </ImageView> 
```

Windows XP、NetBeans 7.1、Java 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T14:01:23.277

将所有图像放在项目的“src”子目录中。然后从 Scene Builder 中选择它们。编译项目时，“src”子目录中的图像文件将包含在 jar 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:18:46.213

Scenebuilder 独立于 NetBeans。在运行之前，必须手动将图像文件复制到 src/ 文件夹。

# asp.net - .net 登录控件默认使用 Windows 身份验证

> ID：14247004
> 
> 赞同：0
> 
> 时间：2013-01-09T21:40:13.990
> 
> 标签：asp.net, visual-studio-2010, iis, login

我刚刚使用 VS 2010 框架 4 开发了一个 Web 应用程序，它包含对 default.aspx 的登录控制和每次运行应用程序时主页面中的登录状态它使用 Windows 用户名开始，我什至无法注销任何帮助这里是 Web。配置

```
<configuration>
  <system.web>
    <compilation debug="false" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Security, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.Entity.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
      <buildProviders>
        <add extension=".edmx" type="System.Data.Entity.Design.AspNet.EntityDesignerBuildProvider"/>
      </buildProviders>
    </compilation>
    <pages controlRenderingCompatibilityVersion="4.0"/>
  </system.web> 
```

这是一张图片 ![在此处输入图像描述](../Images/de711c9ec28e5944391af4bafebb77d4.png)

我怎样才能防止这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:44:01.767

除非我误解了某些东西，否则身份验证默认使用 Windows Auth。你想用别的东西。您需要将身份验证模式更改为表单或您计划使用的任何内容。

```
<system.web>
   <!-- mode=[Windows|Forms|Passport|None] -->
   <authentication mode="Forms" />
</system.web> 
```

# php - php mktime() 或 uniqid()

> ID：14247009
> 
> 赞同：2
> 
> 时间：2013-01-09T21:40:41.057
> 
> 标签：php, duplicates, unique-key

我正在使用其中一个来创建序列号。我想知道 md5(uniqid()) 或 md5(mktime()) 更好用吗？

哪个获得重复密钥的更改较少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T21:43:16.277

`md5(uniqid("", true))`是更好的方法。 `time()`并且`mktime()`精确到一秒，因此在同一时钟秒内的两次执行会产生重复的密钥。

# javascript - jQuery-错误的重复追加到列表

> ID：14247012
> 
> 赞同：1
> 
> 时间：2013-01-09T21:40:56.703
> 
> 标签：javascript, jquery

对 Web 开发来说非常新，我在尝试实现多维数组时遇到了一个问题，当我将一个新的 li 附加到一个 ul 并使用下面的代码产生 2 个 li 时。

该函数的参数是 dest-要附加的 ul 和 list-multi dim 数组设置为：

```
var webList2 = [["link.html","name"],["link.html","name"]... 
```

我很确定我的代码可能还有其他问题，但似乎我可能遗漏了一些我还不熟悉的东西。

任何人都可以阐明一些光？

```
function expand(dest,list){
    var i = 2;

        function expandLoop() {
            setInterval(function() {

                if(i < list.length) {
                    i++;
                    var $newLi = $('<li><li>');
                    var $newA = $('<a></a>').attr('href',list[i][0]).text(list[i][1]);
                    $newLi.append($newA).appendTo(dest).hide().fadeIn(20);
                }

            }, 20);
        }

    $(expandLoop);
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:54:59.763

`li`创建它时您没有关闭它。

```
 var $newLi = $('<li></li>'); 
```

将您的行更改为 :P 简单错误，实际上我花了一段时间才发现它！

**[现场演示](http://jsfiddle.net/loktar/nPsr2/)**

# javascript - 如何使用 JavaScript 将鼠标事件限制在当前元素

> ID：14247017
> 
> 赞同：1
> 
> 时间：2013-01-09T21:41:16.870
> 
> 标签：javascript, this, addeventlistener

当用户悬停并单击它时，我正在尝试更改 div 的背景图像。我坚持限制图像仅更改为用户悬停/单击的元素。在此示例中，当一个 div 悬停/单击时，所有按钮都会发生变化。这是我试图复制的东西，它已经在 jQuery 中工作。我猜可以使用“this”，但到目前为止我尝试过的所有方法都会导致错误。

任何人告诉我为什么在 Firefox 页面加载时出现警报而不是 IE 或 Chrome 的人的奖励积分

**JavaScript**

```
var buttons = document.getElementsByTagName('div'); 
var i;

function iconDown(e) {
    for (i=0; i<buttons.length; i++) {
        buttons[i].style.backgroundPosition = '0px -61px';
    }
}

function iconUp(e) {
    for (i=0; i<buttons.length; i++) {
        buttons[i].style.backgroundPosition = '0px -122px';
    }
}

function iconOver(e) {
    for (i=0; i<buttons.length; i++) {
        buttons[i].style.backgroundPosition = '0px -122px';
    }
}

function iconOut(e) {
    for (i=0; i<buttons.length; i++) {
        buttons[i].style.backgroundPosition = '0px 0px';
    }   
}

function processAction() {
        alert("Working!");

}

function Init () {
    for (i=0; i<buttons.length; i++) {

            if (document.addEventListener) {  // all browsers except IE before version 9

                buttons[i].addEventListener ("mousedown", iconDown, false);
                buttons[i].addEventListener ("mouseup", iconUp, false);
                buttons[i].addEventListener ("mouseover", iconOver, false);
                buttons[i].addEventListener ("mouseout", iconOut, false);
                buttons[i].addEventListener("click", processAction, false);

        }
        else {   // IE before version 9
                buttons[i].attachEvent ("onmousedown", iconDown);
                buttons[i].attachEvent ("onmouseup", iconUp);
                buttons[i].attachEvent ("onmouseover", iconOver);
                buttons[i].attachEvent ("onmouseout", iconOut);
                buttons[i].attachEvent("onclick", processAction);
            }
        }
   } 

Init(); 
```

**CSS**

```
 .btn {width:100px; height:61px; float:left;}
        #BackImg {background: url('images/Back.gif') no-repeat 0px 0px;}
        #NextImg {background: url('images/Next.gif') no-repeat 0px 0px;} 
```

**HTML**

```
 <DIV class="btn" ID="BackImg"></DIV>
        <DIV class="btn" ID="NextImg"></DIV> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:55:41.177

为此，您不需要任何 javascript。只需使用 css。

```
.specialClassyClass{
    /*default background position*/
}
.specialClassyClass:hover{
    /*hover state background position*/
}
.specialClassyClass:active{
    /*mouse down background position*/
} 
```

对于可点击的东西：

```
var whatever = function(el, ev, handler){
    el.attachEvent?
        el.attachEvent(ev, handler):
    el.addEventListener(ev, handler, false);
}

whatever(button[i], 'click', processAction); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:55:42.033

你可以使用这个：

```
function processAction(e) {
        var active = document.querySelector('.active'); // get currently active button
        if(active != undefined)      
             active.className = "btn"; // remove active class

        e.target.className = 'btn active' // add active class to clicked element
} 
```

那么你的CSS可以是这样的：

```
 .btn {width:100px; height:61px; float:left;background: orange;}
  .active {background: red;} 
```

[http://jsfiddle.net/NXVv7/](http://jsfiddle.net/NXVv7/)

# python - 在用于 Web 托管的文件夹中组织 GIT 存储库

> ID：14247018
> 
> 赞同：0
> 
> 时间：2013-01-09T21:41:18.967
> 
> 标签：python, perl, git, web, gerrit

重点是：我只是用 git 设置了一个新的 Gentoo 盒子，这样我们就可以从一个地方访问我们的项目（多个项目）；git 存储库。在我们的老树中，我们的项目放置如下：

```
 /
 |
 +--- dev_.net
 |  |
 |  +--- project_01
 |  +--- project_02
 |  |   ...
 |  +--- project_47
 |
 +--- dev_vb6
 |  +--- project_01
 |  |   ...
 |  +--- project_39
 |
 +--- clients
 |  +--- client_01
 |  |   ...
 |  +--- client_64
 |
 +--- urbane
 |  +--- project_01
 |  |   ...
 |  +--- project_13
 |
 +--- Repository_01
 +--- Repository_02
 +--- Repository_03
 +--- Repository_04
 +--- Repository_05
 \--- Repository_06 
```

我想让所有这些存储库都可以通过 Web 界面（如 gitweb、gitlist 等）查看，并为每个项目保留具有不同存储库的树结构......

主要目标是计算用于检索任何存储库、导航树以及能够查看任何文件的 URL，因为我们实际上能够使用安装在根文件夹（即 Repository_01 .. Repository_06）中的项目来做到这一点树，使用 gitlist（我不太喜欢 gitweb）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:15:48.260

有了这么多存储库，您真的应该考虑使用[`Gerrit`](http://code.google.com/p/gerrit/).

虽然 Gerrit 被 Google 设计为一个优秀的 Android 开发代码审查引擎，但它也可以作为标准的 git 服务器。

即使您不使用它进行代码审查（您完全应该这样做），Gerrit 使用其 Web 界面自动为您的用户提供 ssh 密钥管理和访问控制非常方便 - 您无需在全部。

您还可以使用灵活的访问权限。例如，您可以将其配置为不向您无法信任的人显示某些存储库的存在。此外，您可以配置一些用户或组以启用/禁用自动分支创建或强制推送，或完全推送。例如，某些用户可能只被允许提交代码审查。或者，可以允许某些用户对更改进行投票，或批准提交。

无论如何，这个列表很长 - 看看吧。如果它对 Android 有好处，它可能对你有好处。

如果您使用 Gerrit，请务必学习[`repo`](http://source.android.com/source/using-repo.html)（及其`manifest.xml`文件） - 它是专门为帮助检查和管理大型项目而创建的，它还使用`repo upload`.

# android - 有没有办法改变 TabPageIndicator 的宽度（由 Jake Wharton 提供）？

> ID：14247019
> 
> 赞同：3
> 
> 时间：2013-01-09T21:41:44.647
> 
> 标签：android, viewpagerindicator

我正在使用 Jake Wharton 的 viewpager 指示器，我想将它的宽度更改为特定值。可以在示例中找到的常见 xml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:background="@drawable/background" >

        <com.viewpagerindicator.TabPageIndicator
            android:id="@+id/indicator"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
       />

        <android.support.v4.view.ViewPager
            android:id="@+id/viewpager"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />

    </LinearLayout> 
```

TabPageIndicator 的宽度现在是 fill_parent，当我将其更改为特定值时，整个事情开始表现得很奇怪而且不太好。我想将图像放在 TabPageindicator 所在的同一行，但我不希望它成为它的一部分。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:20:57.343

为什么不把它放在带有填充的 LinearLayout 中？

```
 <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="10dp" 
        android:paddingRight="10dp">

       <com.viewpagerindicator.TabPageIndicator
            android:id="@+id/indicator"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
       />
    </LinearLayout> 
```

# sql - 将 WP 帖子导入 WAMP localhost

> ID：14247027
> 
> 赞同：0
> 
> 时间：2013-01-09T21:42:17.777
> 
> 标签：sql, wordpress, phpmyadmin

我正在尝试将我的所有帖子（包括 postmeta）导入我的 WAMP localhost 以进行网站管理。大约有 400 个帖子，包括 3 年的照片。

我导入了以下表格：wp_posts 和 wp_postmeta。

帖子可以正常工作，但不会出现图片（特色图片和内部帖子图片）。我从 phpmyadmin 运行了一个 SQL 查询。查询如下：

```
UPDATE wp_posts SET post_content = REPLACE(post_content, 'throwholics.com', 'localhost');# Mõjutati 19 rida. 

UPDATE wp_postmeta SET meta_value = REPLACE(meta_value, 'throwholics.com', 'localhost');# MySQL tagastas tühja tulemuse (s.t nulliread). 

UPDATE wp_options SET option_value = REPLACE(option_value, 'throwholics.com', 'localhost');# MySQL tagastas tühja tulemuse (s.t nulliread). 
```

[我还尝试了 Velvet Blues URL 更新插件，现在在我从旧域http://www.throwholics.com](http://www.throwholics.com)更改为之后，我什至无法输入完整的帖子`http://localhost`

它不起作用。有谁知道如何解决这个问题？我的想法在这里用完了。感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:57:04.387

我这样做的方式很有效。

1.  转储原始站点数据库（phpMyAdmin）
2.  使用一个好的 html/php/css/sql 编辑器并替换每个[http://olddomain.com](http://olddomain.com)女巫

    “http://127.0.0.1”

3.  将修改后的数据库加载到 mamp。

4.  如果您使用 perettylinks，请记住复制 .htaccess。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:53:02.120

使用法典的[移动 WordPress](http://codex.wordpress.org/Moving_WordPress#When_Your_Domain_Name_or_URLs_Change)页面中提到的[搜索和替换 WordPress 数据库脚本。](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)它将处理序列化的 PHP 结构，这可能是您的更新中断的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:07:25.363

除了更新您的数据库之外，您还需要手动将图片复制到您的本地主机到正确的文件夹并具有正确的权限

1.  使用 ftp 客户端或 scp 或 rsync 复制文件：

    将 remote_host/wp_root_path/wp-content/uploads 复制到 localhost/wp_root_path/wp-content/

2.  设置权限

    须藤 chmod -R 755

    须藤chown阿帕奇

以下是一些可能对您有帮助的附加资源：

*   自动迁移： [http ://wordpress.org/extend/plugins/wordpress-move/](http://wordpress.org/extend/plugins/wordpress-move/)
*   好教程： [http ://www.jasonbobich.com/web-design/moving-wordpress-to-a-new-server/](http://www.jasonbobich.com/web-design/moving-wordpress-to-a-new-server/)

# backbone.js - 使用backbone.js 和marionette.js 双重包装的ItemView 内容

> ID：14247037
> 
> 赞同：0
> 
> 时间：2013-01-09T21:42:51.927
> 
> 标签：backbone.js, marionette

这是一个名为 activatetwoitem 的 ItemView 模板

```
<!--  <tr>-->
<td><%= gatewayJson.serial %></td>
<td>In Inventory</td>
<td><%= gatewayJson.macaddress %></td>
<!-- </tr>--> 
```

这是名为 activatetwo 的 CompositeView 模板

```
<table class="table table-hover">
<thead>
    <tr>
        <th>Gateway ID</th>
        <th>In Group</th>
        <th>MAC Address</th>
    </tr>

</thead>

<tbody></tbody></table> 
```

这是项目视图

```
Step2View = Backbone.Marionette.ItemView.extend
    template: activatetwoitem
    tagName: 'tr' 
```

这是复合视图

```
Step2Views = Backbone.Marionette.CompositeView.extend
    itemView: Step2View
    template: activatetwo
    itemViewContainer: "tbody" 
```

现在我得到这个...

```
<table class="table table-hover">
<thead>
    <tr>
        <th>Gateway ID</th>
        <th>In Group</th>
        <th>MAC Address</th>
    </tr>
</thead>
<tbody>
    <tr>
        <!--  <tr>-->
        <tr>
            <td>AX1OD</td>
            <td>In Inventory</td>
            <td>secret mac address</td>
            <!-- </tr>-->
        </tr>
    </tr>
    <tr>
        <!--  <tr>-->
        <tr>
            <td>12RUM</td>
            <td>In Inventory</td>
            <td>secret mac address</td>
            <!-- </tr>-->
        </tr>
    </tr>
</tbody> 
```

为什么我会这样？如果我取出 tagName 那么不知何故仍会出现（当然是 div 而不是 2nd tr）有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:46:19.333

我没有看为什么，但是当我从模板中取出注释的 html 时，多余的包装器就消失了。太糟糕了，因为我喜欢模板中的注释行来提醒我应该去那里。

# jquery - jQuery“每个”方法

> ID：14247039
> 
> 赞同：0
> 
> 时间：2013-01-09T21:42:54.907
> 
> 标签：jquery, loops, each

我是一个 javascript 初学者，我在使用 jQuery 的“each”方法时遇到了一些麻烦。我在一个 Joomla 网站上有一个画廊模块，用作简单的图像滑块。我添加了一些代码以允许链接图像上的灯箱。我现在想做的是将缩略图标题（模块当前添加的）复制到链接中的 Title 属性，以便它显示在每个图像的灯箱中。

以下是 HTML 的结构...

```
<div class="camera_wrap" id="camera_wrap_106">
<div class="cameraContents">
    <div class="cameraContent">
        <a class="camera_link" href="lightbox-large.jpg" title="This is where i need the caption"></a>
        <div class="camera_caption">
            <div>This is the caption</div>
        </div>
    </div>
    <div class="cameraContent">
        <a class="camera_link" href="lightbox-large.jpg" title="This is where i need the caption"></a>
        <div class="camera_caption">
            <div>This is the caption</div>
        </div>
    </div>
    <div class="cameraContent">
        <a class="camera_link" href="lightbox-large.jpg" title="This is where i need the caption"></a>
        <div class="camera_caption">
            <div>This is the caption</div>
        </div>
    </div>
</div> 
```

到目前为止，我已经得到了代码，但它只将第一个标题 div 复制到每个标题属性，而不是在每个实例上执行它。不确定这是否是最好的开始......

```
$("#camera_wrap_106 .cameraContent").each(function() {
    $("#camera_wrap_106 a.camera_link").attr('title', $("#camera_wrap_106 .camera_caption div").html());
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:46:40.497

您可以使用[attr()的回调函数](http://api.jquery.com/attr/)

```
$("#camera_wrap_106 .cameraContent a.camera_link").attr('title',function(){
    return $.trim($(this).next().text());
}); 
```

[http://jsfiddle.net/nSj8h/](http://jsfiddle.net/nSj8h/)

或者，如果您想使用每个语句，只需在选择器中设置[上下文](http://api.jquery.com/jQuery/)

```
$("#camera_wrap_106 .cameraContent").each(function() {
    $("a.camera_link",this).attr('title', $(".camera_caption div",this).text());
}); 
```

在选择器中添加上下文与使用 find 相同

```
$('element',context) == $(context).find('element') 
```

[http://jsfiddle.net/baLmn/](http://jsfiddle.net/baLmn/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:43:51.177

你应该使用`this`：

```
$("#camera_wrap_106 .cameraContent").each(function() {
    $(this).attr('title', $(this).html());
}); 
```

`.each`提供迭代中的元素作为函数的上下文（即`this`）。

它也作为第二个参数提供（第一个是索引），这意味着你也可以这样写：

```
$("#camera_wrap_106 .cameraContent").each(function(index, element) {
    $(element).attr('title', $(element).html());
}); 
```

# php - MySQL之前从Web服务清理/组织数据的服务

> ID：14247046
> 
> 赞同：0
> 
> 时间：2013-01-09T21:43:29.193
> 
> 标签：php, mysql, xml, rest

我有来自多个 3rd 方来源的 XML 数据提要，我想要某种易于配置的中间件，可以清理和重组我们自己的 mySQL 服务器的数据。

笔记：

1.  每个客户端的 XML 格式可能不同，也可能不同
2.  我们有一个带有 Backbone 前端的 PHP RESTful API

有即插即用的解决方案吗？
最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:09:33.520

如果没有更多详细信息，很难更具体地回答问题，但是如果您想以统一的方式存储来自多个 XML 源的数据，最好的办法是提取您需要的数据，序列化为 JSON，然后存储为 TEXT在您的 MySQL 数据库中使用 PDO 准备好的查询。

这将允许您从每个提要中提取相关数据（甚至保留所有数据）并创建一个对您的应用有意义的对象。在对象上使用 PHP 的 json_encode() 方法对其进行序列化，然后将其作为数据字段添加到您的表中 — 确保存储其他字段，如 source、date_created 等，以便在将其取出时知道如何处理它。

额外的好处：使用准备好的 PDO 查询将防止来自第三方提要的错误输入，并且存储在 JSON 中将为您提供一些可以直接提供给基于 Backbone 的前端的东西。

# google-drive-api - DocsUploadView 和 setOAuthToken 导致“未定义的关闭”错误

> ID：14247048
> 
> 赞同：1
> 
> 时间：2013-01-09T21:43:33.143
> 
> 标签：google-drive-api, picker

我正在构建一个 web 应用程序，用户可以在其中通过 OAuth2 进行授权并从他们自己的驱动器中选择/上传文件以供以后使用。本质上，我们只是存储文件 ID 并使用 API 稍后访问它们。当我使用 .setAuthUser() 并要求用户独立于我们的应用程序登录时，一切正常，但是当我们使用 .setOAuthToken() 时，只有文件选择器工作 - DocsUploadView 面板返回“未定义”错误。

这种行为在 Firefox/Chrome/Safari 中是一致的，无论是否有当前用户登录。它总是能够看到文件，永远无法上传它们。我们正在请求完整的驱动器范围，但即使这样我们也看到了错误。

目前我们只是使用 setAuthUser 作为一种解决方法，但这会在用户未登录时导致额外的步骤和一些问题。是否可以将 setOAuthToken 与 DocsUploadView 一起使用？

我正在使用的选择器构建器代码如下所示，ID 和令牌的格式与我使用的相同，但为了安全而进行了更改。

谢谢！

```
var view = new google.picker.View(google.picker.ViewId.DOCS);
var uploadview = new google.picker.DocsUploadView();  
var picker = new google.picker.PickerBuilder()
     .enableFeature(google.picker.Feature.MINE_ONLY)
     .disableFeature(google.picker.Feature.NAV_HIDDEN)
     .disableFeature(google.picker.Feature.MULTISELECT_ENABLED)
     .setAppId('987654321098')
     .setOAuthToken('ya31.AIER6DRhxRgRsT0SoGPoaxPMhDd0n3OHKj43SJaG5kFndZ52')
     .addView(uploadview)
     .addView(view)
     .setCallback(pickerCallback)
     .build();
picker.setVisible(true); 
```

[交叉发布于：[https](https://groups.google.com/d/topic/google-picker-api/p9whgDscUrQ/discussion) ://groups.google.com/d/topic/google-picker-api/p9whgDscUrQ/discussion ]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:08:31.610

Picker API 目前不支持使用 OAuth 令牌上传。我提交了一个内部功能请求以实现此功能，但目前您应该继续依赖您的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:27:11.573

这甚至听起来很愚蠢，但是链接中的执行顺序呢？

```
.addView(uploadview)
.addView(view) 
```

变成

```
.addView(view)
.addView(uploadview) 
```

我在这里可能建议的另一件事是在选择器上启用 multi_select

```
enableFeature(google.picker.Feature.NAV_HIDDEN)
enableFeature(google.picker.Feature.MULTISELECT_ENABLED) 
```

，只是为了测试是否存在依赖于这些功能中的任何一个的错误。

# c# - 你知道ServiceController类（C#）的任何替代品吗

> ID：14247051
> 
> 赞同：1
> 
> 时间：2013-01-09T21:43:49.213
> 
> 标签：c#, servicecontroller

问题是，一旦我们尝试启动它，我们没有办法“取消”一个缓慢/永不启动的服务，如果它花费太长时间：

```
 ServiceController ssc = new ServiceController(serviceName);
 ssc.Start();
 ssc.WaitForStatus(ServiceControllerStatus.Running, new TimeSpan(ts))); 
```

假设我们将“ts”设置为太长，例如 300 秒，在等待 120 秒后我决定取消操作，我不想等待服务控制器状态更改或等待超时发生， 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:57:12.110

您可以编写自己的 WaitForStatus 函数`CancellationToken`来获取取消功能。

```
public void WaitForStatus(ServiceController sc, ServiceControllerStatus statusToWaitFor,
    TimeSpan timeout, CancellationToken ct)
{
    var endTime = DateTime.Now + timeout;
    while(!ct.IsCancellationRequested && DateTime.Now < endTime)
    {
         sc.Refresh();
         if(sc.Status == statusToWaitFor)
             return;

         // may want add a delay here to keep from
         // pounding the CPU while waiting for status
    }

    if(ct.IsCancellationRequested)
    { /* cancel occurred */ }
    else
    { /* timeout occurred */ }
 } 
```

# sql - 用于查找每个用户的计数的 SQL

> ID：14247052
> 
> 赞同：4
> 
> 时间：2013-01-09T21:43:50.260
> 
> 标签：sql, count, distinct

可以说我有下表：

```
Student      Course           University
1             a                   x
1             b                   x
1             c                   x
1             a                   y
2             a                   x
2             a                   y
2             a                   z
3             a                   x 
```

对于每个学生，我试图找出他们注册的独特课程和大学的数量。

输出如下：

```
Student     No. of Courses        No. of Universities
 1             3                         2
 2             1                         3
 3             1                         1 
```

我将如何为此构建 SQL？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T21:46:03.407

```
SELECT Student,
       COUNT(DISTINCT Course)     AS NumberOfCourses,
       COUNT(DISTINCT University) AS NumberOfUniversities
FROM   YourTable
GROUP  BY Student 
```

# jquery - 一段时间后如何使用 jQuery .css 设置 css？

> ID：14247054
> 
> 赞同：1
> 
> 时间：2013-01-09T21:43:56.543
> 
> 标签：jquery, css, time

我不知道如何在 jQuery .css 属性上设置时间 我找到了一个答案，该答案与我在[jQuery change CSS 中的问题在一段时间后](https://stackoverflow.com/questions/4411644/jquery-change-css-after-a-certain-amount-of-time)
最接近

这是我的代码：

```
<script>
    $(document).ready(function(){
        $("#homebutton,#title").click(function(){
            $("#title").css("font-size", "100%");  
            setTimeout(function(){ $("#title").css("font-size", "100%"); },2000)
        });
    });
</script> 
```

我不知道那有什么问题。
我上面提到的解决方案似乎对我不起作用。

提前谢谢你们

- - - - - - - - - - - - - - - - - - - - -编辑 - - - - --------------------------------------

感谢各位大侠的回复，有几点想再解释一下：

1.  我最初在我的 CSS 中将字体大小设置为 150%，这意味着通过我的 jQuery，我希望它将字体大小更改为 100%。
2.  我想我误解了代码，我想设置的是逐渐减少的时间而**不是**计时器

基本上，我想使用带有过渡的jquery来更改字体大小，而不是突然改变

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:46:52.227

问题是你首先`font-size: 100%`立即设置，然后在 2 秒后再次将其设置为*相同的值。*即，您没有更改CSS。

要在单击时设置 css 值，然后在 2 秒后将其设置为其他值，请在每次调用`.css()`. 例如，最初将字体大小减少一半，然后在 2 秒后将其恢复为正常大小：

```
$(document).ready(function(){
    $("#homebutton,#title").click(function(){
        $("#title").css("font-size", "50%");
        setTimeout(function(){ $("#title").css("font-size", "100%"); },2000);
    });
}); 
```

**编辑：**要逐渐减小字体大小，您要使用`.animate()`：

```
$(document).ready(function(){
    $("#homebutton,#title").click(function(){
        $("#title").animate({ "font-size": "50%" }, 2000);
    });
}); 
```

**演示：** [jsfiddle.net/Y6CrG/](http://jsfiddle.net/Y6CrG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:57:15.603

在 2 秒超时后更改字体大小。例如：

```
$("#title").click(function(){
  $("#title").css("font-size", "100%");  
  setTimeout(function(){ $("#title").css("font-size", "80%"); },2000)                               
}); 
```

我在下面的 jsfiddle 中尝试了它，它对我来说效果很好。[http://jsfiddle.net/kianoshp/z9QeY/](http://jsfiddle.net/kianoshp/z9QeY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-27T15:20:51.170

**你可以使用这个：**

```
 $('#title').animate({fontSize : '100%'}); 
```

**如果你想设置持续时间你可以使用这些**

```
 $('#title').animate({fontSize : '100%'}, "slow");
  $('#title').animate({fontSize : '100%'}, "fast"); 
```

# c# - 将 CSV 导入 SQL 多表

> ID：14247057
> 
> 赞同：3
> 
> 时间：2013-01-09T21:44:10.427
> 
> 标签：c#, sql, csv, sql-server-2008-r2

我正在将数据从一个系统迁移到另一个系统，并将收到一个包含要导入数据的 CSV 文件。该文件最多可包含一百万条要导入的记录。我需要获取文件中的每一行，对其进行验证并将数据放入相关表中。例如，CSV 将类似于：

```
Mr,Bob,Smith,1 high street,London,ec1,012345789,work(this needs to be looked up in another table to get the ID) 
```

实际文件中的数据比此示例多得多。

所以，SQL 应该是这样的：

```
Declare @UserID
Insert into User
Values ('Mr', 'Bob', 'Smith', 0123456789)
Set @UserID = @@Identity
Insert into Address
Values ('1 high street', 'London', 'ec1', select ID from AddressType where AddressTypeName = 'work') 
```

我正在考虑遍历每一行并使用包含上述 SQL 的文件中的参数调用一个 SP。这会是解决这个问题的最好方法吗？这不是时间关键，因为它只会在更新站点时运行一次。

我正在使用 C# 和 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:50:57.277

您如何将其加载到临时表中（请注意，这在逻辑上可能是临时的 - 不一定在技术上）作为登台，然后从那里处理它。这是标准的 ETL 行为（对于 ETL，一百万是微不足道的），您首先对数据进行分级，然后对其进行清理，然后将其放到最终位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:29:10.603

在执行这种性质的任务时，您不会考虑单独轮换每条记录，因为这将是一个巨大的性能问题。在这种情况下，您将记录批量插入临时表或使用向导导入临时表（特别是在地址字段中查找默认的 50 个字符）。然后您编写基于集合的代码来清理您需要（删除错误的电话号码或邮政编码或电子邮件地址或状态或记录数据库中所需字段中的缺失数据或使用查找表转换数据（假设您有具有某些必需值的表，这些值可能与你会在这个文件中找到，你需要转换它们。我们经常使用医生专业。所以我们的系统可能会将它们存储为 GP，但文件可能会给我们一个 General Practioner 的值。您需要查看该字段的所有不匹配值，然后确定是否可以将它们映射到现有值、是否需要丢弃记录或是否需要向查找表添加更多值。一旦你摆脱了你不想要的记录并清理了你可以在临时表中的记录，然后你导入到 prod 表中。当您写入多于一条或两条记录时，应使用 SELECT 版本的 INSERT 而不是使用 VALUES 子句来编写插入。

# actionscript-3 - Actionscript 3.0 addchild

> ID：14247058
> 
> 赞同：0
> 
> 时间：2013-01-09T21:44:31.383
> 
> 标签：actionscript-3, flash, sprite, addchild

这是我的代码，问题是当我从 main 中的 main 函数调用它时它没有添加精灵。

```
package{

import flash.display.*;
import flash.events.*;

public class gfxs extends MovieClip{

    public function gfxs(){
    }
    public function placeCar(){
       var car:MoonCar = new MoonCar();
       car.x = 100;
       car.y = 372;
       addChild(car);
       trace("PLACED CAR"); //JUST TO CHEK IF IT RUNS THIS CODE(IT DOES)
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:23:30.250

您需要将 gfxs 添加到主类的舞台上。例如在你 main.as 你可能有这样的东西：

```
var myGfxs:gfxs = new gfxs();
myGfxs.placeCar();
addChild(myGfxs); 
```

很难给出明确的答案，因为我们无法看到您在 main.as 文件中做了什么。

# python - While循环何时中断

> ID：14247066
> 
> 赞同：1
> 
> 时间：2013-01-09T21:45:00.760
> 
> 标签：python, loops

我有一个while循环：

```
def setWorkDays(dayNameList):
            workDays = []
            while self.count > 0: #continue loop until all 5 work days have been filled or the loop breaks at the end 
                for day in dayNameList: #iterate over days, adding days to work days if they are not free days, AL days, preferred days, or free Saturdays 
                    if day in self.freeDays or day in self.alDays or (day == 'Saturday' and self.satOff is True):
                        continue
                    elif day in self.programDays:
                        workDays.append(day)
                        self.count -= 1
                    elif self.preferredDay is not None and day in self.preferredDay:
                        continue
                    else:
                        workDays.append(day)
                        self.count -= 1
                if self.preferredDay not in self.workDays: #if iteration completes, 5 work days have not been filled, and the preferred day has not been added, add the preferred day 
                    workDays.append(self.preferredDay)
                    self.count -=1
                return workDays 
```

循环背后的想法是 self.count 达到 0 的第二个，循环终止。这是修改 self.count 的唯一函数。然而我得到了奇怪的结果，循环似乎持续了至少 1 个计数太长，因为程序在某些情况下为 self.count 输出 -1。这应该发生吗？while 循环不应该终止第二个 self.count 达到零，还是必须先完成 for 循环？我是否应该在 self.count 递减后添加条件逻辑来检查 self.count 是否为零，如果为零则中断？这似乎是while循环的目的......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:58:02.140

`while`一旦条件不再为真，循环不会在循环中自动退出；它只是在每个循环开始时检查条件。如果你想早点离开，你需要`break`明确地（或者做一些非本地的事情，比如`return`从函数或循环外的处理程序）`raise`。`except`

看起来你想要做的是`for`尽早退出循环，如果`self.count`曾经达到 0。真的没有办法直接做到这一点。每次减量时都必须检查。

但是，你真的根本不需要`self.count`。您在相同的地方减少`append`它`workDays`。因此，只需检查您是否拥有其中的 5 个。换句话说，每个都`self.count -= 1`变成：

```
if len(workDays) >= 5: break 
```

实际上有一种方法可以在 Python 中做（我认为）你想要的：使用生成器而不是列表。如果你`yield`每个值而不是将它附加到 a`list`然后`list`在最后返回它，那么一旦你得到 5 个条目，你就停止迭代生成器。

例如：

```
def setWorkDays(dayNameList):
    while self.count > 0: #continue loop until all 5 work days have been filled or the loop breaks at the end 
        for day in dayNameList: #iterate over days, adding days to work days if they are not free days, AL days, preferred days, or free Saturdays 
            if day in self.freeDays or day in self.alDays or (day == 'Saturday' and self.satOff is True):
                continue
            elif day in self.programDays:
                yield day
            elif self.preferredDay is not None and day in self.preferredDay:
                continue
            else:
                yield day
        if self.preferredDay not in self.workDays: #if iteration completes, 5 work days have not been filled, and the preferred day has not been added, add the preferred day 
            yield day

workDays = [setWorkDays(dayNameList) for _ in range(5)] 
```

通常，您甚至不需要`list`，您需要做的就是迭代它。为此，您可以这样做：

```
for workDay in (setWorkDays(dayNameList) for _ in range(5)): 
```

或者：

```
for workDay in itertools.islice(setWorkDays(dayNameList), 5): 
```

生成器可以做的很多事情在你理解它们之前感觉就像魔术一样——这通常意味着在你了解生成器之前你不应该做它们。因此，如果这对您没有意义，请不要随便拿起并使用它。但是，如果它提示您学习如何编写和使用生成器函数，那就太好了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:55:50.577

`self.count`您在`while`循环中多次递减。

循环只会在块的开头中断。所以可能发生的是`self.count`在块的开头是正值，然后在单个块中递减到负值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T21:59:42.703

任何语言（我知道）的`while`循环都不会按您期望的方式工作。

通常，`while`循环具有以下格式：

```
while <condition>:
  <code block> 
```

while 循环在每个循环中检查一次条件。它不会不断检查情况。这意味着整个代码块将在每个条件检查之间执行，除非在代码块期间执行某些控制流语句（例如`continue`、`break`或`return`）。

在实践中，每个循环一次的条件检查具有性能优势（计算机不必不断地评估条件）以及限制程序的[圈复杂度](http://en.wikipedia.org/wiki/Cyclomatic_complexity)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T21:59:49.087

这似乎可以满足您的需要：

```
def setWorkDays(dayNameList):
     workDays = []
     for day in dayNameList:
         if day in self.freeDays or day in self.alDays or (
             day == 'Saturday' and self.satOff):
                 continue
         elif day in self.programDays:
             workDays.append(day)
             self.count -= 1
         elif self.preferredDay is not None and day in self.preferredDay:
             continue
         else:
             workDays.append(day)
             self.count -= 1
         if self.count <= 0:
              break
     else:
         if self.preferredDay not in self.workDays:
             workDays.append(self.preferredDay)
             self.count -=1
     return workDays 
```

# performance - 如何在不干扰真实用户的情况下阻止来自我的网站的恶意机器人？

> ID：14247067
> 
> 赞同：4
> 
> 时间：2013-01-09T21:45:00.183
> 
> 标签：performance, apache, captcha, bots, robots.txt

我想保留`robots.txt`那些窃取内容并消耗我网站带宽的不好的爬虫（又名。坏机器人，被定义忽略）。同时，我不想干扰合法人类用户的用户体验，或阻止行为良好的机器人（例如 Googlebot）对网站进行索引。

处理此问题的标准方法已在此处描述：[处理行为不端的机器人的策略](https://webmasters.stackexchange.com/questions/19098/tactics-for-dealing-with-misbehaving-robots)。但是，该线程中提出和赞成的解决方案*并不是*我想要的。

一些不良机器人通过 Tor 或僵尸网络连接，这意味着它们的 IP 地址是短暂的，很可能属于使用受感染计算机的人。

因此，我一直在考虑如何通过让 IP 被列入黑名单的“误报”（即人类）再次访问我的网站来改进行业标准方法。一个想法是完全停止阻止这些 IP，而是要求他们在被允许访问之前通过验证码。虽然我认为 CAPTCHA 是合法用户的 PITA，但使用 CAPTCHA 审查可疑的恶意机器人似乎是比完全阻止这些 IP 访问更好的解决方案。通过跟踪完成 CAPTCHA 的用户会话，我应该能够确定他们是人类（并且应该将他们的 IP 从黑名单中删除），还是智能到足以解决 CAPTCHA 的机器人，将他们置于更黑名单上。

但是，在我继续实施这个想法之前，我想问问这里的好人是否预见到任何问题或弱点（我已经知道一些 CAPTCHA 已被破坏 - 但我认为我应该能够处理） .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T20:42:41.883

我认为的问题是验证码是否存在可预见的问题。在深入探讨之前，我还想说明一下您计划如何捕捉机器人以使用验证码挑战它们。TOR 和代理节点会定期更改，因此 IP 列表需要不断更新。您可以使用[Maxmind](http://www.maxmind.com)作为基准的代理地址列表。您还可以找到更新所有 TOR 节点地址的服务。但并非所有坏机器人都来自这两个向量，因此您需要找到其他捕获机器人的方法。如果您添加速率限制和垃圾邮件列表，那么您应该会遇到超过 50% 的不良机器人。其他策略确实必须围绕您的网站定制。

现在谈谈验证码的问题。首先，有像[http://deathbycaptcha.com/](http://deathbycaptcha.com/)这样的服务。我不知道我是否需要详细说明这一点，但这会使您的方法变得毫无用处。人们绕过验证码的许多其他方式都在使用 OCR 软件。Captcha 在击败 OCR 方面做得越好，对您的用户来说就越难。此外，许多 Captcha 系统使用客户端 cookie，有人可以解决一次，然后上传到他们所有的机器人。我认为最著名的是 Karl Groves 列出的 28 种击败 Captcha 的方法。[http://www.karlgroves.com/2013/02/09/list-of-resources-break-captcha/](http://www.karlgroves.com/2013/02/09/list-of-resources-breaking-captcha/)

为了充分披露，我是[Distil Networks](http://www.distilnetworks.com)的联合创始人，这是一个阻止机器人的 SaaS 解决方案。我经常将我们的软件作为一个更复杂的系统来宣传，而不是简单地使用验证码并自己构建它，所以我对你的解决方案的有效性的看法是有偏见的。

# c# - c#数据源到内存和内存到xml文件

> ID：14247076
> 
> 赞同：0
> 
> 时间：2013-01-09T21:45:45.450
> 
> 标签：c#, xml, database, service, datasource

我有一个要求

1.  将数据库查询中的数据源保存到内存中，这样我就可以循环并更新内存中的一些项目。
2.  我还需要能够将内存中的项目（根据上面第 1 项的结果）保存到`xml`硬盘驱动器上的文件中。
3.  最后我需要能够将`xml`文件加载到内存中。

谁能指出我这样做的最简单方法。这一切都在 Windows 服务中完成。

```
FAItemsUnderControl fItemsUnderControl = new FAItemsUnderControl(ConfigurationManager.AppSettings["DatabaseConnectionString"]);

//Note the line below is for binding to a gridview which is incorrect in my requirement but illustrates the idea

GridViewItemsUnderControlReport.DataSource = fItemsUnderControl.getItemsUnderControl("systemidtbd", "ALL"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:25:25.633

我必须在我的服务端声明相同的对象列表

```
// Get items to Control into running memory
                FAItemsUnderControl fItemsUnderControl = new FAItemsUnderControl(ConfigurationManager.AppSettings["DatabaseConnectionString"]);
                MyGlobals.ListOfItemsToControl = fItemsUnderControl.getItemsUnderControl(MyGlobals.System_ID, "ALL").ToList<Usp_GetListItemsBySystemResult>(); 
```

# asp.net-mvc - 在提交表单之前触发 MVC 不显眼的验证

> ID：14247077
> 
> 赞同：3
> 
> 时间：2013-01-09T21:45:46.080
> 
> 标签：asp.net-mvc, unobtrusive-validation

我有以下模型：

```
public class PersonListModel
{
   ....

    [Required(ErrorMessage=AppConstants.MustSelectRecordToAttachMessage)]
    public String SelectedPersonId { get; set; }
} 
```

和以下观点：

```
@using (Html.BeginForm("Attach", "Person", FormMethod.Post, new { @id = attachRecordFormId, targetDivId = personListId, @class = "inlineForm" }))
{
    .....

    @Html.HiddenFor(x => x.SelectedPersonId);

    .....

   <br />@Html.ValidationMessageFor(x => x.SelectedPersonId)
} 
```

隐藏的 SelectedPersonId 字段是通过一些连接到我页面上某个元素的 keyup 事件的 javascript 填充的。

我的问题是所需的验证消息会立即显示此部分视图，而不仅仅是在提交表单时。在通过 Ajax 帖子再次呈现部分视图后，它也会再次显示。

我有非常相似的观点没有表现出这个问题，但是有 2 个观点（包括上面的那个）确实表现出这个问题。我经历了一个排除过程，试图找出正常工作的视图和表现出这种不正确行为的 2 个视图之间有什么不同，但是我无法找到问题的原因。

我认为在加载问题视图时，某些东西会导致不显眼的验证触发。我怎样才能找到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:54:52.917

> 我的问题是所需的验证消息立即显示此部分视图显示

如果显示视图（包含部分视图）的控制器操作将视图模型作为参数，则可能会发生这种情况：

```
public ActionResult Display(MyViewModel model)
{
    ... if this action is called with a GET request and you have missed
        to pass a value for the "SelectedPersonId" query string parameter 
        you will get a validation error in the corresponding view

    return View(model);
} 
```

发生这种情况的原因是因为您的操作正在使用模型 => 默认模型绑定器正在尝试填充您的视图模型，并且当它尝试为`SelectedPersonId`属性设置值时，它会自动向模型状态添加验证错误如果请求中没有相应的值，因为您的模型属性被`[Required]`属性修饰。

> 在通过 Ajax 帖子再次呈现部分视图后，它也会再次显示。

这是正常的，如果目标 POST 操作将您的视图模型作为参数并呈现部分内容，则可能会发生这种情况：

```
[HttpPost]
public ActionResult Process(MyViewModel model)
{
    ... if this action is called with a POST request and you have missed
        to pass a value for the "SelectedPersonId" form parameter 
        you will get a validation error in the corresponding partial view

    return PartialView(model);
} 
```

# android - 如何使用切换按钮更改另一个按钮的图像

> ID：14247080
> 
> 赞同：-1
> 
> 时间：2013-01-09T21:46:02.490
> 
> 标签：android, togglebutton

我使用[它](http://samir-mangroliya.blogspot.com/p/android-switch-button.html)作为参考制作了一个切换按钮，我想在单击此按钮后更改另一个按钮的 drawableTop。有人可以告诉我该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:04:51.597

正如 A--C 所说，您至少应该在要求复制/粘贴代码之前尝试一下。不过我会给你一个提示:)

看看[setCompoundDrawables()](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawables%28android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable,%20android.graphics.drawable.Drawable%29)。在您的帮助下`OnCheckedChangeListener`应该能够创建您想要的效果。

# c# - 使用存储过程从 Dapper.net 查询返回值

> ID：14247081
> 
> 赞同：13
> 
> 时间：2013-01-09T21:46:04.270
> 
> 标签：c#, sql-server, dapper

我正在尝试调用存储过程`using Dapper.Net`并获取返回值。

```
p.Add("@INCIDENT_ID", dbType: DbType.Int32, direction: ParameterDirection.ReturnValue);

var retResults = con.Execute("usp_GetIncidentID", p, commandType:CommandType.StoredProcedure);

int IncidentID = p.Get<int>("INCIDENT_ID"); 
```

我用参数方向和使用`"@INCIDENT_ID"`. 如果您逐步查看结果，您可以看到正确的返回值在值中下降`retResults`，但我无法按照文档中描述的方式访问这些值，如下所示。

存储过程 Dapper 支持完全存储过程：

```
var user = cnn.Query<User>("spGetUser", new {Id = 1}, 
    commandType: CommandType.StoredProcedure).First();}}}
If you want something more fancy, you can do:

var p = new DynamicParameters();
p.Add("@a", 11);
p.Add("@b", dbType: DbType.Int32, direction: ParameterDirection.Output);
p.Add("@c", dbType: DbType.Int32, direction: ParameterDirection.ReturnValue);

cnn.Execute("spMagicProc", p, commandType: commandType.StoredProcedure); 

int b = p.Get<int>("@b");
int c = p.Get<int>("@c"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T07:58:39.013

我*怀疑*（未经测试）这纯粹是您命名参数的方式不匹配；尝试（注意已删除`@`）：

```
p.Add("INCIDENT_ID", dbType: DbType.Int32, direction: ParameterDirection.ReturnValue);

var retResults = con.Execute("usp_GetIncidentID", p, commandType:CommandType.StoredProcedure);

int IncidentID = p.Get<int>("INCIDENT_ID"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-01T17:08:04.573

使用 Dapper 的测试版，我发现这很有魅力：

```
result = dbConnection.ExecuteScalar<int>(typeof(UCCCCException).Name + "_c",
                        obj, commandType: CommandType.StoredProcedure); 
```

我正在编写一个泛型，用于将任何类型的对象插入数据库。

存储过程如下所示：

```
ALTER PROCEDURE [dbo].[UCCCCException_c]
(
@Id int = null,
@ExceptionDate datetime = null,
@HResult int = 0,
@Message varchar(8000) = null,
@Source varchar(8000) = null,
@StackTrace varchar(8000) = null,
@Module varchar(8000) = null,
@Name varchar(8000) = null,
@created_at datetime = null,
@updated_at datetime = null,
@created_by int = null,
@updated_by int = null
,
@Creator varchar(255) = null,
@Updator varchar(255) = null
)
AS

-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

Insert into dbo.uccccexceptions ( ExceptionDate, HResult, [Message], [Source], StackTrace, Module, Name)
                            values (
                                    coalesce(@ExceptionDate,getdate()),
                                    @HResult,
                                    @Message,
                                    @Source,
                                    @StackTrace,
                                    @Module,
                                    @Name
                                    )
                                    ;
select @@Identity;
go 
```

需要注意的是，即使目标表中不存在这些属性，您也必须为正在使用的类中的每个属性指定一个条目作为存储过程的参数。如果您有许多在 MVC 情况下是视图字段的字段，这可能会很烦人。

要获得返回值，您只需要使用 Execute，并确保您的最后一条语句是在存储过程中选择 @@Identity。

它工作得很好，并允许我在我的存储库中编写一个通用的插入命令，如下所示：

```
 public virtual int Insert(T obj)
    {
        int result = -2;
        if (!databaseOnline)
        {
            throw new Exception(HttpStatusCode.ServiceUnavailable.ToString());
        }
        if (obj != null)
        {
            try
            {
                using (IDbConnection dbConnection = ConnectionProvider.OpenConnection())
                {
                    dbConnection.Open();
                    result = dbConnection.ExecuteScalar<int>(typeof(T).Name + "_c",
                        obj, commandType: CommandType.StoredProcedure);
                }
            }
            catch (SqlException sqlex)
            {
                Logger.LogError(sqlex, false);
                throw;
            }
            catch (Exception ex)
            {
                Logger.LogError(ex);
                throw;
            }
        }
        return result;
    } 
```

我在我的数据库中使用约定，存储过程的名称是类型名称，后跟“_s”表示选择，“_c”表示插入，“_d”表示删除，“_u”表示更新。

PS：我讨厌使用 Dapper 的 DynamicParameters 或任何其他需要您为通用存储库中的每个类使用不同的插入或更新方法的设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T05:56:40.600

您可以读取如下值

```
var incidentId = retResults.ToList()[0].INCIDENT_ID; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-02T20:26:54.197

我在阅读 QueryMultiple 的结果时遇到了类似的问题。对 Read() 的第一次调用返回了正确的类型，第二次调用返回了 DapperRow。我发现使用 Read() 的类型化版本：

```
var lineExists = query.Read<int?>().FirstOrDefault() == 1; 
```

解决了我的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-13T19:22:13.150

为简单起见，我已将其缩减。我正在使用输出参数，因为这让我可以完全控制传回的数据类型。我可以将此方法用于任何其他场景，而不仅仅是插入。

存储过程：

```
ALTER PROCEDURE User_Insert (
@EmailAddress nvarchar(255),
@Id bigint OUT
) AS
INSERT INTO User (
        [EmailAddress]
    ) VALUES (
        @EmailAddress
    )
    set @Id = SCOPE_IDENTITY() 
```

存储库代码：

```
var sql = "Execute User_Insert @EmailAddress, @Id = @Id OUTPUT";
var _params = new DynamicParameters();
_params.Add("EmailAddress", user.EmailAddress);
_params.Add("Id", dbType: DbType.Int64, direction: ParameterDirection.Output);

using (var connection = new SqlConnection(ConnectionString)) {
    connection.Open();
    using (var transaction = connection.BeginTransaction()) {
        var result = SqlMapper.Execute(connection, sql, param, transaction);
        transaction.Commit();
    }
}    
var id = _params.Get<long>("Id"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-30T07:18:17.110

DynamicParameters 解决方案对我来说并不干净。最好让存储过程代码返回一个整数（选择 1；）并使用 dapper`ExecuteScalar<int>("[sp_name]", params);`

# backbone.js - 模板中未定义的局部变量

> ID：14247084
> 
> 赞同：0
> 
> 时间：2013-01-09T21:46:22.200
> 
> 标签：backbone.js

我正在关注本教程（仅限法语）[https://github.com/k33g/articles/blob/master/2011-08-14-BB-VIEWS.md](https://github.com/k33g/articles/blob/master/2011-08-14-BB-VIEWS.md)，它使用带有 Backbonejs 的下划线模板。

该教程说将此模板放在索引文件中。

```
 <script type="text/template" id="doc-template">
            <span><%= id %></span>
            <span><%= title %></span>
            <span><%= test %></span>
            <span><%= keywords %></span>
       </script>

   <div id='doc-container'></div> 
```

我将它放在 index.html.erb 中，但是，教程作者没有使用 rails。我有必要使用 erb，因为我还使用 rails content_for helpers 包含页面特定内容。

当我尝试查看页面时，我收到未定义的局部变量或方法错误

```
undefined local variable or method `id' for #<#<Class:0x007fd9c3a133b8>:0x007fd9c5066d90> 
```

如果我从模板中删除这些变量，它仍然不会将内容呈现到页面。

谁能解释我在渲染数据方面做错了什么？

**其他Backbone视图相关代码**

本教程在适当的容器中初始化并呈现视图...

```
 el : $('#doc-container'),
        initialize : function() {
            this.template = _.template($('#doc-template').html());

            _.bindAll(this, 'render');
            this.model.on('change', this.render);

        },

        render : function() {
            var renderedContent = this.template(this.model.toJSON());
            $(this.el).html(renderedContent);
            return this;
        } 
```

**更新**

当我按照集合视图的教程说明进行操作时，我遇到了同样的问题。下划线的 each 方法会引发错误

```
undefined local variable or method `_' for #<#<Class:0x007fd9c3a133b8>:0x007fd9c2c78a78> 
```

index.html.erb 中的模板

```
<script type="text/template" id="docs-collection-template">
    <ol>
      <% _.each(docs, function(doc) { %>
        <li><%= doc.id %> : <%= doc.title %></li>
      <% }); %>
    </ol>
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:13:49.980

问题是 Underscore 使用与 ERB 相同的模板语法，所以它是冲突的。您需要告诉 Underscore 使用不同的语法。来自下划线文档：

> 如果 ERB 样式的分隔符不是您喜欢的，您可以更改 Underscore 的模板设置以使用不同的符号来衬托内插代码。定义一个插值正则表达式以匹配应逐字插入的表达式，一个转义正则表达式以匹配应在 HTML 转义后插入的表达式，以及一个评估正则表达式以匹配应在不插入结果字符串的情况下计算的表达式。您可以定义或省略这三者的任意组合。例如，执行 Mustache.js 样式模板。

因此，在您的 JavaScript 代码中的某处，在您编译模板之前，添加以下代码：

```
_.templateSettings = {
    interpolate : /\{\{=(.+?)\}\}/g,
    escape : /\{\{-(.+?)\}\}/g,
    evaluate: /\{\{(.+?)\}\}/g,
}; 
```

然后，在您拥有的模板中的任何位置`<% %>`，将其更改为`{{ }}`、更改`<%= %>`为`{{= }}`和更改`<%- %>`为`{{- }}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T21:22:26.843

您可以使用`<%%= variable %>`. Rails 的输出将是`<%= variable %>`.

# ios - Xcode 转换为 ARC，创建通用二进制文件失败，并出现“无法确定架构类型”的错误

> ID：14247089
> 
> 赞同：8
> 
> 时间：2013-01-09T21:46:34.600
> 
> 标签：ios, objective-c, xcode, automatic-ref-counting

我正在尝试将 iOS（纯 Objective-C）项目转换为 ARC。转换在 octest 目标 CreateUniversalBinary 阶段失败，并出现以下错误。项目和目标架构构建设置对我来说看起来是正确的，所以我很难理解为什么会失败：

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo：无法确定架构类型：/Users/andybowskill/Library/Developer/Xcode/DerivedData/Make- Up_Kit-axtbxqtkmnlfmlcafkoetwqmeufc/Build/Intermediates/Make-Up Kit.build/Debug-iphoneos/Make-Up KitTests.build/Objects-normal/armv7/Make-Up KitTests 命令/Applications/Xcode.app/Contents/Developer/Platforms/ iPhoneOS.platform/Developer/usr/bin/lipo 失败，退出代码为 1

前面提到的 CreateUniversalBinary 命令如下：

> CreateUniversalBinary“/Users/andybowskill/Library/Developer/Xcode/DerivedData/Make-Up_Kit-axtbxqtkmnlfmlcafkoetwqmeufc/Build/Products/Debug-iphoneos/Make-Up KitTests.octest/Make-Up KitTests”正常“armv7 armv7s”cd“/Users /andybowskill/Development/iOS/Make-Up Kit"setenv PATH"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr /bin:/usr/bin:/bin:/usr/sbin:/sbin" lipo -create"/Users/andybowskill/Library/Developer/Xcode/DerivedData/Make-Up_Kit-axtbxqtkmnlfmlcafkoetwqmeufc/Build/Intermediates/Make-Up Kit .build/Debug-iphoneos/Make-Up KitTests.build/Objects-normal/armv7/Make-Up KitTests" "/Users/andybowskill/Library/Developer/Xcode/DerivedData/Make-Up_Kit-axtbxqtkmnlfmlcafkoetwqmeufc/Build/Intermediates/Make-Up Kit.build/Debug-iphoneos/Make-Up KitTests.build/Objects-normal/armv7s/Make-Up KitTests”-输出“/Users/andybowskill/Library/Developer/Xcode/DerivedData/Make-Up_Kit-axtbxqtkmnlfmlcafkoetwqmeufc/Build/Products/Debug-iphoneos/Make-Up KitTests.octest/Make-Up KitTests”

请有人帮忙解释错误吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T19:03:46.873

从目标中的“有效架构”中删除“armv7”（只留下“armv7s”）为我解决了这个问题。我的 iOS 部署目标是 4.3。

将“armv6”添加到目标中的“有效架构”并将我的 iOS 部署目标更新到 6.1 不起作用。

在 XCode 版本 4.6 (4H127) 中转换为 Objective-C ARC 时遇到

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T21:01:47.363

我再次搜索了我的项目构建设置，并注意到我已经删除了 armv6 架构支持，但仍然将部署目标设置为低于 4.3 的 iOS 版本。将部署目标更新到 iOS 4.3 或更高版本解决了该问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T12:29:25.600

从 NON-ARC 迁移到 ARC 时，我也遇到了同样的问题。在挖掘和敲击头部之后，我知道了 2 个解决方案

1.  在目标中的有效拱门中添加 armv6，**或者**
2.  设置构建 Active Arch。只对NO。

# ios5 - iOS iPad 应用程序：未调用具有两个 UIScrollViews 和一个 UIPageControl 的 ViewController 的委托（未调用分页的委托函数）

> ID：14247095
> 
> 赞同：0
> 
> 时间：2013-01-09T21:46:49.553
> 
> 标签：ios5, uiscrollview, uipagecontrol, uiscrollviewdelegate

对于我的 iPad 应用程序，我有一个主 ViewController，其中包含两个 UIScrollview 和一个 UIPageControl。问题是寻呼的代表没有被调用。这是布局：

![在此处输入图像描述](../Images/9e4c57e0b20321819143fc9a7ccffb3a.png)

在底部 thumbScrollView 中选择一个按钮需要更新 mainScrollView 中的图像（这可行） 滑动 thumbScrollView 或在 pageControl 上选择一个点需要“分页” thumbScrollView 以显示下一组按钮。刷卡不起作用，因为委托函数没有被调用。

我在我的 VC 中声明滚动视图和页面控件如下

```
@property (strong, nonatomic) IBOutlet UIScrollView *mainScrollView;
@property (strong, nonatomic) IBOutlet UIScrollView *thumbScrollView;
@property (strong, nonatomic) IBOutlet UIPageControl *pageControl; 
```

ViewController 实现 UIScrollViewDelegate

```
@interface MyViewController : UIViewController<UIScrollViewDelegate> 
```

我在我的 VC 的 .m 文件中实现了以下 UIScrollViewDelegate 委托函数。

```
- (void)scrollViewDidScroll:(UIScrollView *)sender;
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView;
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView; 
```

视图出现了，但是当我在按钮上滑动时，我没有看到上面的委托函数被调用。

我没有在 StackOverflow 中找到解决方案，尽管我已经考虑了其他相关帖子的其他方面的建议（例如，区分哪个滚动视图已启动操作的逻辑等）

在此处添加详细代码（根据@HeWas 的要求）

这是控制两个滚动视图和页面控件的主视图控制器的头文件（相关摘录 - 如果您需要更多信息，请告诉我）

```
// ImageBrowseViewController.h
// (NOTE - In Interface Builder I have added a tag attribute of 0 to mainScrollView
//  and 1 to thumbScrollView, to enable me to distinguish which scrollView the delegate 
//  needs to respond to)

#define TAG_MAIN_SCROLLVIEW 0
#define TAG_THUMB_SCROLLVIEW 1

@interface ImageBrowseViewController : UIViewController<UIScrollViewDelegate>
{
    UIButton* currentlySelectedButton;
    UIScrollView *mainScrollView;
    UIScrollView *thumbScrollView;
    UIPageControl* pageControl;
    BOOL pageControlBeingUsed;

}

@property (strong, nonatomic) IBOutlet UIScrollView *mainScrollView;
    // … connected as outlet in IB to mainScrollView
@property (strong, nonatomic) IBOutlet UIScrollView * thumbScrollView;
    // … connected as outlet in IB to thumbScrollView
@property (strong, nonatomic) IBOutlet UIPageControl *pageControl;
    // … connected as outlet in IB to pageControl

…
-(IBAction)changePage; //Touch up Inside IBAction connected to pageControl

…
@end 
```

这是控制两个滚动视图和页面控件的主视图控制器的实现文件（相关摘录 - 如果您需要更多信息，请告诉我）

```
//
//  ImageBrowseViewController.m
//

    …
@synthesize mainScrollView;
@synthesize thumbScrollView;
@synthesize pageControl;

// UIScrollViewDelegate
- (void)scrollViewDidScroll:(UIScrollView *)sender {

    if ( [sender tag] == TAG_THUMB_SCROLLVIEW ) {
        // This is the thumbScrollview
        // Update the page when more than 50% of the previous/next page is visible

        CGFloat pageWidth = self.thumbScrollView.frame.size.width;
        int page = 
            floor((self.thumbScrollView.contentOffset.x - pageWidth / 2) / pageWidth) 
            + 1;
        self.pageControl.currentPage = page;

    }
}
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    pageControlBeingUsed = NO;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    pageControlBeingUsed = NO;
}

- (IBAction)changePage {
    // Update the scroll view to the appropriate page
    CGRect frame;
    //frame.origin.x = self.scrollView.frame.size.width * self.pageControl.currentPage;
    frame.origin.x = self.thumbScrollView.frame.size.width * self.pageControl.currentPage;

    frame.origin.y = 0;
    frame.size = self.thumbScrollView.frame.size;
    [self.thumbScrollView scrollRectToVisible:frame animated:YES];

    // Keep track of when scrolls happen in response to the page control
    // value changing. If we don't do this, a noticeable "flashing" occurs
    // as the the scroll delegate will temporarily switch back the page
    // number.
    pageControlBeingUsed = YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:55:11.070

您的代码看起来都是 100%（除了这个错字：`@synthesize floorplanThumbScrollView;`，但这不是您的问题）。

我确信答案是您没有在 IB 中正确连接您的滚动视图*DELEGATES*。

这是线索：

> “是的，我在 Interface Builder 中设置了所有三个。所以 mainScrollView、thumbScrollView 和 pageControl 在 IB 中连接到 VC 的 .h 文件中的上述声明。”

您需要在 ViewController 和 scrollViews 之间建立 2 个连接。

(1) ctrl-drag FROM viewController TO scrollView，连接到 IBOutlet 属性。
这就是你所做的。

(2) ctrl-drag FROM scrollView TO viewController，连接到`delegate`.
我不认为你已经这样做了。

*步骤 2 的说明*

UIScrollView 有一个名为“delegate”的内置属性。scrollView 使用此属性向其委托发送消息。您可以在界面生成器中设置此委托（步骤 2），也可以在代码中进行。例如，在您的 viewController 中，您可以这样做：

```
 [myScrollView setDelegate:self]; 
```

这会将 viewController 设置为 myScrollView 的委托。如果您通过在 Interface Builder 中链接来执行此操作，则不需要此代码（并且 IB 不会创建任何代码）。

无论哪种方式，这实际上都是将 scrollView 的委托 iVar 设置为指向 viewController 的指针。像这样使用委托的好处是委托人 (UIScrollView) 不必知道任何关于委托人的事情（在这种情况下是您的 UIViewController）。只要我们遵守它的委托协议，这允许我们重用 UIScrollView。

每当 scrollView 需要通知它的委托时，它会在内部发送这样的消息..

```
 [self.delegate scrollViewDidScroll:self]; 
```

（你看不到，它在scrollView的实现中）。

您设置为 scrollView 委托的对象需要实现 scrollView 的委托协议声明的所有*必需*方法，并且可以选择实现任何*可选*委托方法。 [这是协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html)

要确定需要哪些方法，请阅读[UIScrollView 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html)，它告诉您：

> UIScrollView 类可以有一个必须采用 UIScrollViewDelegate 协议的委托。要使缩放和平移工作，代理必须同时实现`viewForZoomingInScrollView:`and `scrollViewDidEndZooming:withView:atScale:`; 此外，最大 ( `maximumZoomScale`) 和最小 ( `minimumZoomScale`) 缩放比例必须不同。

协议中的其他所有内容都是可选的。

这种委托模式是您可以轻松实现自己以重用自己的对象的一种模式，并且是在 Objective-C 中解耦对象之间传递消息的最常见方式之一。

# emacs - 是否有一个很好的大纲/笔记替代 emacs org-mode（带图像）？

> ID：14247097
> 
> 赞同：4
> 
> 时间：2013-01-09T21:47:00.233
> 
> 标签：emacs, org-mode, todo, outliner

Emacs 的 Org-mode 非常适合写下项目笔记并维护一个待办事项列表，您可以在其中快速移动内容（上/下，缩进等）。然而，特别是在图像方面，emacs 相当有限（因为它是一个文本编辑器）。有一些方法可以包含图像，甚至是从剪贴板复制粘贴的图像，但结果并不令人满意。例如，emacs 中的图像被视为字符，因此如果图像高于您的屏幕，则无法看到它的底部。滚动问题的现有解决方法也不是很令人满意。

emacs org-mode 有什么好的替代方案吗？我检查了几十个程序，但没有其他软件（支持富文本）允许快速、基于键盘的折叠和移动项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T01:05:56.600

Org-mode 现在正在开发（git）以下内容，它将适合 Org 缓冲区中的图像，不需要缩略图等：

(setq org-image-actual-width 300)

=> 总是将内联图像调整为 300 像素

ETC...

开发版：
[http](http://orgmode.org/cgit.cgi/org-mode.git/)
://orgmode.org/cgit.cgi/org-mode.git/git://orgmode.org/org-mode.git

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:28:30.030

它可能被认为是异端，但[OneNote](http://de.wikipedia.org/wiki/Microsoft_OneNote)呢？它是所见即所得和自由形式。

# php - 我应该如何为 Laravel 中的多个中间表构建 Eloquent ORM 模型？

> ID：14247105
> 
> 赞同：0
> 
> 时间：2013-01-09T21:47:22.517
> 
> 标签：php, orm, laravel, eloquent

我在任何地方都找不到有关如何使用 Eloquent ORM 模型拥有多个中间表的信息。我面临的问题是我有一个用于我的用户、权限和角色的表。这些是4个表：

**权限：**

```
id
name 
```

**权限角色：**

```
id
name 
```

**Permission_role_mappings：**

```
id
permission_id
permission_role_id 
```

**Permission_role_user_mappings：**

```
id
permission_role_id
user_id 
```

（好吧，我也有一张`users`桌子，但它的布局并不重要，因为外键在`permission_role_user_mapping`.）

所以问题是我希望能够在`permissions`从用户模型调用时从表中获取数据。我很难完全掌握 Eloquent ORM 的工作流程，所以如果我遗漏了一些至关重要的基本内容，请指出。

根据[文档](http://laravel.com/docs/database/eloquent#many-to-many)，我似乎不需要为中间表创建模型。那么如何从 User 类中指定关系呢？我可以做类似的事情吗？

```
class User extends Eloquent {

    public function permission_role()
    {
        return $this->has_many_and_belongs_to('Permission_Role', 'permission_role_user_mappings');
    }

    public function permission()
    {
        return $this->has_many_and_belongs_to('Permission_Role', 'permission_role_user_mappings')->has_many_and_belongs_to('Permission','permission_role_mappings');
    }
} 
```

这似乎不起作用，这是错误：

```
User::find(1)->first()->permission()->first();
...
Method [permission] is not defined on the Query class. 
```

我还希望能够从 Permission_Role 和 Permission 开始获取数据。我希望答案能帮助我指定所需的所有模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:58:07.023

Eloquent 关系作为对象属性而不是函数来访问。

```
User::find(1)->first()->permission; 
```

您可以将上述语句包装在`dd`函数中以查看它。

这份[关于雄辩关系的指南](http://laravel.io/topic/14/how-eloquent-relationship-methods-work)应该会有所帮助

编辑有关选择角色中所有权限的评论中的问题：

```
$roles = array();
$permission_roles = User::find(1)->permission_roles()->get();
foreach ($permission_roles as $pr) {
  if (! in_array($pr->permissions)) {
    $roles[] = $pr->permissions;
  }
} 
```

这会让你得到你想要的。但是，这最终会进行大量查询。最好利用`Eager Loading`这里。

# android - 下载图像时出现 NullPointerException

> ID：14247115
> 
> 赞同：0
> 
> 时间：2013-01-09T21:47:56.817
> 
> 标签：android, android-image

直到现在，我在我的一个片段中有这段代码：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    this.myFragmentView = inflater.inflate(R.layout.foto_setmana, container, false); //Això conté els "edittext i altres"
    cont=getActivity(); //Recupero el contexte per poder pasar-lo.

    try {
        new DownloadImageTask((ImageView) myFragmentView.findViewById(R.id.imageView1)).execute("http://192.168.1.36/testing/fotos/foto1.jpg");
    } catch (Exception e){
        Log.d("errors", "Wohoops. Crashed");
    }

    return myFragmentView;
} 
```

但是由于在片段之间滑动，每次我回到那个片段时它都会不断地加载这个图像，我决定将代码移动到主要的 FragmentActivity。此外，我读到不要在片段中使用任何这样的代码是一个好习惯。

我试过这个：

```
public class AndroidViewPagerActivity extends FragmentActivity {
[...]
try {
        Log.d("debugging","a");
        new DownloadImageTask((ImageView) this.findViewById(R.id.imageView1)).execute("http://192.168.1.36/testing/fotos/foto1.jpg");
    } catch (Exception e){
        Log.d("errors", "Wohoops. Crashed");
    }
} 
```

但它正在崩溃。

这是日志：

```
01-09 21:37:11.264: E/AndroidRuntime(976): FATAL EXCEPTION: main

01-09 21:37:11.264: E/AndroidRuntime(976): java.lang.NullPointerException
01-09 21:37:11.264: E/AndroidRuntime(976):  at com.exercise.AndroidViewPager.DownloadImageTask.onPostExecute(DownloadImageTask.java:34)
01-09 21:37:11.264: E/AndroidRuntime(976):  at com.exercise.AndroidViewPager.DownloadImageTask.onPostExecute(DownloadImageTask.java:1)
01-09 21:37:11.264: E/AndroidRuntime(976):  at android.os.AsyncTask.finish(AsyncTask.java:631)
01-09 21:37:11.264: E/AndroidRuntime(976):  at android.os.AsyncTask.access$600(AsyncTask.java:177)
01-09 21:37:11.264: E/AndroidRuntime(976):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
01-09 21:37:11.264: E/AndroidRuntime(976):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 21:37:11.264: E/AndroidRuntime(976):  at android.os.Looper.loop(Looper.java:137)
01-09 21:37:11.264: E/AndroidRuntime(976):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-09 21:37:11.264: E/AndroidRuntime(976):  at java.lang.reflect.Method.invokeNative(Native Method)
01-09 21:37:11.264: E/AndroidRuntime(976):  at java.lang.reflect.Method.invoke(Method.java:511)
01-09 21:37:11.264: E/AndroidRuntime(976):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-09 21:37:11.264: E/AndroidRuntime(976):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-09 21:37:11.264: E/AndroidRuntime(976):  at dalvik.system.NativeStart.main(Native Method) 
```

正如你所看到的，当我从我的片段中调用它时，它在我之前使用的类中崩溃（并且它有效）。

这是类代码，如果你想检查它：

```
public class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
ImageView bmImage;

public DownloadImageTask(ImageView bmImage) {
    this.bmImage = bmImage;
}

protected Bitmap doInBackground(String... urls) {
    String urldisplay = urls[0];
    Bitmap mIcon11 = null;
    Log.d("debugging","b");
    try {
        InputStream in = new java.net.URL(urldisplay).openStream();
        mIcon11 = BitmapFactory.decodeStream(in);
    } catch (Exception e) {
        Log.e("Error", e.getMessage());
        e.printStackTrace();
    }
    return mIcon11;
}

protected void onPostExecute(Bitmap result) {
    Log.d("debugging","c");
    bmImage.setImageBitmap(result);
} 
```

}

logcat 指的是最后一行，确切地说：

```
bmImage.setImageBitmap(result); 
```

有小费吗？

谢谢。

**编辑。这样我在片段中导航**

```
public class AndroidViewPagerActivity extends FragmentActivity {
ViewPager mViewPager;
TabsAdapter mTabsAdapter;
ImageView imatgeSetmana;
Bitmap fotoSetmanaBitmap;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);
    setContentView(mViewPager);

    final ActionBar bar = getActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_HOME);
    bar.hide();

    mTabsAdapter = new TabsAdapter(this, mViewPager);
    mTabsAdapter.addTab(bar.newTab().setText("Foto setmana"), MyFragmentA.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Entries this week"), MyFragmentB.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Nothing yet"), MyFragmentC.class, null);

    try {
        //Descarrego la foto
        new DownloadImageTask(this.imatgeSetmana).execute("http://192.168.1.36/testing/fotos/foto1.jpg");
        //Guardo el bitmap de la foto 
        this.fotoSetmanaBitmap=((BitmapDrawable)imatgeSetmana.getDrawable()).getBitmap();

    } catch (Exception e){
        Log.d("errors", "Wohoops. Crashed");
    }

    if (savedInstanceState != null) {
        bar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:53:04.843

当您将代码移动到您的活动时，您忘记了`findViewById()`无法找到*当前*不可见的视图。`R.id.imageView1`位于您在 Fragment 中使用的布局中，而不是您的 Activity 中。所以`findViewById()`返回`null`......
只需在 Activity 中保存对 Bitmap 的引用，但只尝试在 Fragment 中显示它（当 ImageView 可见时。）

* * *

**另外**
由于`fotoSetmanaBitmap`不是私有的，您可以将其保存在 DownloadImageTask 中，如下所示：

```
protected void onPostExecute(Bitmap result) {
    Log.d("debugging","c");
    activity.fotoSetmanaBitmap = result; // Where activity is an instance of AndroidViewPagerActivity
} 
```

然后在不使用 Intents 的情况下加载它：

```
cont= (AndroidViewPagerActivity) getActivity(); //Recupero el contexte per poder pasar-lo.
if(cont.fotoSetmanaBitmap != null) {
    ImageView image = (ImageView) myFragmentView.findViewById(R.id.imageView1);
    image.setImageBitmap(cont.fotoSetmanaBitmap);
} 
```

# php - 如何在动态生成的 div 字段上创建下拉菜单

> ID：14247116
> 
> 赞同：0
> 
> 时间：2013-01-09T21:47:56.870
> 
> 标签：php, javascript, jquery, drop-down-menu, dynamically-generated

我正在使用 php 代码从数据库中加载 div 信息：

```
for ($i=0; $i < $stmt->rowCount(); $i++){
    $row = $stmt->fetch(PDO::FETCH_ASSOC);
    $name = $row['uc_name'];
    $image_url = $row['uc_image'];
    $color = $row['uc_color']; 
```

为有多少行创建一个框：http: [//jsfiddle.net/pKR5t/1/](http://jsfiddle.net/pKR5t/1/)

我正在尝试为从数据库中检索到的每个项目创建一个下拉菜单。当用户将鼠标悬停在 上时`class="header"`，应该显示下拉菜单，但里面的列表应该与悬停的框的列表有关：

![在此处输入图像描述](../Images/dfaa93d0f9d8177689ab9f03d105a55e.png)

我相信我可以使用该`.on()`功能来完成此任务，但我完全不知道如何使用它。任何有助于实现这一目标的帮助都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:11:32.330

您可以在没有 javascript 的情况下使用 css 执行此操作。

如果您在标题 div 中插入悬停框，则可以使用 css`:hover`隐藏并在悬停时显示它。

**HTML**

```
<div class="header">
    <div class="title">PHP Row 1</div>
    <div class="hoverBox">
        <div class="hoverBoxTitle">Hover</div>
        <div class="hoverBoxContent">Hover Content</div>
    </div>
</div> 
```

**CSS**

```
.hoverBox {
    display: none;
    position: absolute;
    top: 0px;
    left: 170px;
    width:170px;
    height:90px;
    background:#333333;
    z-index: 100;
}
.header:hover .hoverBox {
    display: block;
} 
```

**[演示](http://jsfiddle.net/pKR5t/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:17:31.913

要使用`on`并且`hover`您将希望像这样使用`mouseenter`和`mouseleave`事件：

```
$("div.box div.header").on("mouseenter", function() { //mouseenter event
    var currentBox = $(this).closest("div.box");
    var currentTitleText = $(this).find("div.title").html();

    //popup the list

}).on("mouseleave", function() { //mouseleave event
    //close the list
}); 
```

有关其他信息，[请查看此帖子](https://stackoverflow.com/questions/9827095/is-it-possible-to-use-jquery-on-and-hover)。

**编辑**

更新`mouseover`和`mouseout`稍微好一点的`mouseenter`和`mouseleave`事件。

# php - PHPExcel：由于php输出而产生错误？

> ID：14247117
> 
> 赞同：1
> 
> 时间：2013-01-09T21:48:01.737
> 
> 标签：php, javascript, jquery, ajax, phpexcel

使用 PHPExcel 构建电子表格后，我无法打开“另存为”或“打开”对话框。我从 PHPExcel 库附带的示例目录中获得了以下代码片段。

```
header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Disposition: attachment;filename="01simple.xlsx"');
header('Cache-Control: max-age=0');

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter->save('php://output');
exit; 
```

我的 JavaScript：

```
$(document).on('submit', '#myForm', function(e) {
        $.post('mail.php', $(this).serialize(), function (data) {
            $('.signature-field,.notes').hide();
            //SUCCESS
            $('.successORfail').html(data);
                setTimeout(function(){
                    $(".successORfail").fadeOut("slow", function () {
                        $(".successORfail").empty().show();
                    });
                }, 4500);
        }).error(function() {
            alert("Fatal Error: mail.php not found!");
        });
        e.preventDefault();
    }); 
```

**注意：**上面的代码会生成警告消息“Fatal Error: mail.php not found!” 我设置的。除此之外，它不会生成任何错误消息，也不会保存或创建 Excel 文件。

当我使用以下方法时，没有任何标题，excel文件被完美创建，并保存在服务器上，没有任何错误：

```
 $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
    $objWriter->save('MyExcel.xlsx'); 
```

对于解决此错误的任何帮助，我将不胜感激，因为我已经为此工作了很长时间。

提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T22:19:27.883

您实际上无法按照您尝试执行此操作的方式执行此操作。Javascript 本身无法在用户系统上启动文件下载（由于安全问题）。我知道至少有一个 jQuery 插件可以提供类似 AJAX 的下载体验。你可以看看这个：

[http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)

# java - OSGi 后台线程失败

> ID：14247120
> 
> 赞同：3
> 
> 时间：2013-01-09T21:48:04.553
> 
> 标签：java, multithreading, osgi

当 a`BundleActivator`运行一个后台线程，并且该后台线程出现不可恢复的错误时，应该怎么办？

```
public class Activator implements BundleActivator
{
   private Thread t;
   @Override
   public void start(BundleContext context) throws Exception
   {
      t = new Thread(new Runnable(){
            @Override
             public void run(){
                while (!Thread.interrupted()){
                  // do something which may throw a runtime exception
               }
            }
         });
      t.start();
   }
   @Override void stop(BundleContext context) throws Exception
   {
      t.interrupt();
      t.join();
   }
} 
```

通过这个示例，我如何通知 OSGi 框架线程已死并且捆绑包已有效停止且未运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:23:53.183

看看 Peter Kriens 如何在[本文](http://www.aqute.biz/Snippets/Stop)中执行类似的操作。对于他的示例，您需要做的就是在他的 catch 块中调用激活器上的停止，而不是执行 printStackTrace。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:27:16.160

可能最好的办法就是记录错误，最好是记录到 OSGi 日志服务。然后管理员可以检测捆绑包的问题并决定要做什么。您应该将其作为声明式服务组件而不是作为`BundleActivator`.

我不认为捆绑包应该尝试自行停止。这使捆绑包处于一种奇怪的状态......它已停止但仍有代码运行......即调用`stop()`. 这可能只是短暂的一段时间，但感觉不对。

处于 ACTIVE 状态的包不一定必须一直“做某事”，它只是有*可能*“做某事”。失败的事实不应该真正影响包的外部状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:12:51.220

据我所知，OSGi 在这种特殊情况下无法直接帮助您。我通常依靠[未捕获的异常处理程序](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)来获得线程崩溃的通知，或者我实现某种形式的 SW 看门狗。

关键是产生多个线程并成功完成其启动方法的包仍然保持活动状态，即使其中一个线程在一段时间后崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T07:20:19.863

尼尔（像往常一样）非常正确。捆绑包永远不应停止自身，因为这会干扰管理代理。启动/停止是从该管理代理到捆绑包的消息，表明它应该处于活动状态。如果捆绑包无法履行其职责，您应该记录该消息，稍等片刻（越来越长）并重试。

日志是通知的地方，停止捆绑会严重混合级别。

# javascript - 使用 AJAX 在服务器上写入/读取文件

> ID：14247122
> 
> 赞同：0
> 
> 时间：2013-01-09T21:48:24.243
> 
> 标签：javascript, ajax, server-side

我知道它可能不是，但是否可以在没有服务器端语言的情况下在服务器上写入/读取文件。我查看了很多地方，发现使用`XmlHttpRequest`. 不幸的是，我没有找到任何关于阅读文件的“好”信息。

但是，在没有服务器端语言的情况下编写文件时，我完全**没有**发现任何东西。我对编码有点陌生（4 到 5 个月）并且开始使用 HTML/JS，所以我不知道任何服务器端语言，当我看到它们时，我很难理解。我知道 AJAX 与服务器交互，所以我认为必须有*某种*方法可以使用 AJAX 在服务器上写入文件。

请告诉我，我是否只是天真，或者我的假设背后是否有一些事实。如果有办法做到这一点，那么最好给我一个解释链接或自己给我一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T23:35:33.650

> 我知道它可能不是，但是否可以在没有服务器端语言的情况下在服务器上写入/读取文件。

在一个相当抽象的层面上：你必须有一个服务器。该服务器必须用某种语言编写。

所有常规 Web 服务器都支持从文件系统读取文件。通常，您指定一个目录作为根目录，然后 URL 的本地部分被映射到该目录及其子目录。

写作比较棘手。HTTP 规范包括 PUT 动词，但没有多少服务器内置支持使用它做任何有用的事情……而且您几乎总是希望在允许任何可以访问 Internet 的人写入文件之前添加某种访问控制。

表达访问控制的逻辑和文件应该放在哪里是通常最容易用编程语言处理的东西。

> 我查看了很多地方，发现使用 XmlHttpRequest 在服务器上读取文件的倾斜引用。不幸的是，我没有找到任何关于阅读文件的“好”信息。

XMLHttpRequest 只是浏览器向 JavaScript 提供的用于发出 HTTP 请求的标准 API。它完全是客户端。你给它一个 URL，你得到服务器在回调中返回的数据。

> 但是，在没有服务器端语言的情况下编写文件时，我完全没有发现任何东西。我对编码有点陌生（4 到 5 个月）并且开始使用 HTML/JS，所以我不知道任何服务器端语言，当我看到它们时，我很难理解。

JavaScript 是一种服务器端语言。这不是最容易掌握的，但它是一种选择。请参阅[node.js](http://nodejs.org/)。

对于刚接触编程的人，我建议掌握[Python](http://python.org/)并使用[Django](https://www.djangoproject.com/)。

对于我自己的项目，我倾向于[使用 Perl](http://perl.org)和[Catalyst 。](http://www.catalystframework.org/)

> 我知道 AJAX 与服务器交互，所以我认为必须有某种方法可以使用 AJAX 在服务器上写入文件。

Ajax 只是意味着“在不离开页面的情况下从 JavaScript 发出 HTTP 请求”。你可以发送一个文件，但是一旦请求到达服务器，服务器就必须处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:54:59.367

最简单的方法很可能只是使用 ajax 在服务器上调用 php 脚本。PHP 完全能够在服务器上读取/写入文件。

[http://www.tizag.com/phpT/filewrite.php](http://www.tizag.com/phpT/filewrite.php)

[http://www.tizag.com/ajaxTutorial/ajaxphp.php](http://www.tizag.com/ajaxTutorial/ajaxphp.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T08:51:06.497

好吧，让我们先了解一下这个概念。

**AJAX**主要用于在后台将数据从服务器加载到浏览器。

接下来，如果我假设您知道如何在后台将数据从服务器异步加载到浏览器。您可能正在使用 POST 或 GET 方法。

使用**xmlRequestObject.send()**函数，您可以将参数发送到服务器文件。但是再次将数据发送到服务器是不够的。服务器端需要一些代码来获取数据并写入。为此，您需要像**PHP**这样的脚本语言或使用**ASP.NET**。

在我的研发中，我没有发现任何这样的技术可以在不使用服务器端脚本语言的情况下将数据写入服务器上的文件。如果你找到任何..让我知道。

# spring - Spring mvc 控制器空返回处理程序

> ID：14247126
> 
> 赞同：0
> 
> 时间：2013-01-09T21:49:02.680
> 
> 标签：spring, hibernate, model-view-controller

```
@RequestMapping(method = RequestMethod.GET)
@ResponseBody
public List<Country> getListOfCountries() {

    return countryService.listAll();
} 
```

它显示对象的 json 视图，但如果服务返回 null，那么我想显示一条错误消息，请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:47:09.953

我认为你有几个选择：

1.  如果你返回一个空值，它将作为一个空字符串“”返回，你可能可以查找并处理它。

2.  在您的列表顶部返回一个包装器类型，这样如果包装的列表为空，则类似这样的东西将返回给客户端`{"countries":null}`，这可以在 javascript 端更容易地处理。

3.  抛出一个异常，它将作为 500 状态代码传播回客户端，然后您可以在 javascript 端有一个错误处理程序来处理这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T23:44:30.817

首先，即使这不能直接回答问题，您的对象也不应该返回**null**而不是空集合 - 您可以在[Effective Java 2nd Edition](http://www.amazon.com/Effective-Java-2nd-Edition-ebook)，Item 43 / p.201中找到原因

因此，如果没有找到国家的情况是正常的，则必须由客户端 JS 代码处理，该代码将检查计数并显示相应的消息。

如果出现问题，您可以抛出异常（正如 Biju 指出的那样 +1） - 我相信应该抛出异常的是服务，因为它知道发生异常的原因，并且无论如何都不返回 null。

我想在 Spring 3.2 中补充一点（在 Spring 3.2 之前的返回响应正文很[复杂](https://stackoverflow.com/questions/5097134/spring-exceptionhandler-does-not-work-with-responsebody)），您可以设置一个[@ExceptionHandler](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html)，它既可以返回 JSON，也可以设置 HTTP 状态代码，稍后可以由客户端处理。我认为在这里返回带有一些错误代码的自定义 JSON 响应是最理想的。

```
 @RequestMapping("/test")
    @ResponseBody
    public List<Country> getListOfCountries() {
        //assuming that your service throws new NoCountriesFoundException();
            //when something goes wrong
            return countryService.listAll();
    }

    @ExceptionHandler(NoCountriesFoundException.class)
    ResponseEntity<String> test() {
        return new ResponseEntity<String>(
                "We are sorry, our server does not know any countries yet.",
                HttpStatus.I_AM_A_TEAPOT  );
    } 
```

然后在JS代码中，可以根据返回的状态码做具体的处理。

此外，为了避免`@ExceptionHandler`在不同的控制器中声明相同的内容，在 Spring 3.2 中，您可以将`@ExceptionHandler`其放入带`@ControllerAdvice`注释的类中。

有关详细信息，请参阅[http://static.springsource.org/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-exceptionhandlers](http://static.springsource.org/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-exceptionhandlers)和[http://www.springsource.org/node/3738](http://www.springsource.org/node/3738)了解 3.2 具体内容

# python - cxfreeze 在 vi rtualenv 中缺少 distutils 模块

> ID：14247130
> 
> 赞同：6
> 
> 时间：2013-01-09T21:49:24.507
> 
> 标签：python, virtualenv, distutils, cx-freeze

从 python3.2 项目运行 cxfreeze 二进制文件时，出现以下运行时错误：

```
/project/dist/project/distutils/__init__.py:13: UserWarning: The virtualenv distutils package at %s appears to be in the same location as the system distutils?
Traceback (most recent call last):
  File "/home/chrish/.virtualenvs/project/lib/python3.2/distutils/__init__.py", line 19, in <module>
    import dist
ImportError: No module named dist 
```

`distutils`相应地，在 cxfreeze 输出的缺失模块部分中有几个条目：

```
? dist imported from distutils
? distutils.ccompiler imported from numpy.distutils.ccompiler
? distutils.cmd imported from setuptools.dist
? distutils.command.build_ext imported from distutils
? distutils.core imported from numpy.distutils.core
... 
```

我尝试通过将 distutils 导入到我的主 python 文件中并将其添加到 cxfreeze 中来强制将 distutils 作为模块包含在内`setup.py`：

```
options = {"build_exe": {"packages" : ["distutils"]} }, 
```

两种方法都不起作用。似乎我以某种方式破坏了 virtualenv [因为 distutils 似乎很重要，并且关于 distutils 位置的警告]，重复使用干净的 virtualenv 复制了问题。

值得注意的是，我通过运行安装了 cx-freeze，`$VIRTUAL_ENV/build/cx-freeze/setup.py install`因为它没有在 pip 中干净地安装。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-30T14:17:38.690

找到了另一种解决方法，它使您在冻结时仍然可以使用 virtualenv。

解决方法是排除 distutils 并手动从原始解释器（而不是 virtualenv）添加包。

```
# contents of setup.py
from cx_Freeze import setup, Executable

import distutils
import opcode
import os

# opcode is not a virtualenv module, so we can use it to find the stdlib; this is the same
# trick used by distutils itself it installs itself into the virtualenv
distutils_path = os.path.join(os.path.dirname(opcode.__file__), 'distutils')
build_exe_options = {'include_files': [(distutils_path, 'distutils')], "excludes": ["distutils"]}

setup(
    name="foo",
    version="0.1",
    description="My app",
    options={"build_exe": build_exe_options},
    executables=[Executable("foo_main.py", base=None)],
) 
```

> 感谢 Bruno Oliveira 在 github 上的回答
> 完整的答案：[https ://gist.github.com/nicoddemus/ca0acd93a20acbc42d1d](https://gist.github.com/nicoddemus/ca0acd93a20acbc42d1d)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T13:31:18.660

总结我的评论：

virtualenv 中的副本`distutils`正在做一些使 cx_Freeze 感到困惑的奇怪事情。简单的解决方法是在 virtualenv 之外冻结，以便它使用 distutils 的系统副本。

在 Ubuntu 上，Python 2 和 3 愉快地共存：只需使用`python3`Python 3 做任何事情。例如在 Python 3 下安装 cx_Freeze: `python3 setup.py install`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-25T02:32:05.723

我找到了一种解决方法，可以解决`distutils`从内部冻结`virtualenv`可能对其他人有所帮助的问题。

首先确保`distutils`从您的构建中排除：

```
build_exe_options = {'excludes': ['distutils']} 
```

其次在你的`setup.py`文件中声明这个函数：

```
def copy_distutils_to_build_dir(build_dir):
    # the code below was obtained from the distutils.py file created by
    # virtualenv
    import opcode
    dirname = os.path.dirname
    distutils_path = os.path.join(os.path.dirname(opcode.__file__), 'distutils')
    target_dir = os.path.join(build_dir, 'distutils')
    if os.path.isdir(target_dir):
        shutil.rmtree(target_dir)
    shutil.copytree(distutils_path, target_dir) 
```

最后，调用你的函数**后**调用：`setup()``setup.py`

```
setup(...)
copy_distutils_to_build_dir(join('build', 'exe.win32-3.4')) 
```

这会将整个`distutils`包从原始解释器复制到包含冻结的可执行文件的目录。

黑客和丑陋，但它的工作原理。不过，我很想听听改进的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T00:51:53.900

一个问题是 venv 中的 distutils/__init__.py 尝试进行隐式相对导入（导入 dist 而不是正确的 from distutils import dist），因此这是首先要解决的问题。venv 是如何创建的？distutils/__init__.py 来自哪里？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-01T12:17:55.063

已经有一段时间了，但我遇到了同样的问题。我能够通过将 distutils 包从本地 Python 库复制到 virtualenv 库来解决它。我还不知道副作用。一切似乎都运作良好。

# jquery - JsonResult 不返回（有效）json - 序列化出错？

> ID：14247131
> 
> 赞同：0
> 
> 时间：2013-01-09T21:49:31.860
> 
> 标签：jquery, asp.net-mvc, json, json.net

我尝试对 ASP.NET MVC 4 中的服务器端方法进行简单调用。我通过对方法进行 jQuery 调用来做到这一点。该方法被调用并且属性正确，但是该方法的响应不正确。我尝试使用 JSON.NET 序列化一个 .NET 对象。

我可以看到我得到以下响应（使用 FireBug）：

```
"{\"VisitorId\":\"11a0606b-5336-4fa7-b50f-3edf97d8301b\",\"PhoneToTransfer\":\"61793650\",\"PhoneToNotify\":\"\",\"EmailToNotify\":\"mcoroklo@gmail.com\",\"EmailToTransfer\":\"\",\"OrderState\":\"PaymentPending\",\"DestinationAddress\":\"1Ccypfi3rnXosUgY6p1sQVXFyddFvwLFEJ\",\"TransactionHash\":\"\",\"Value\":12.0,\"Confirmations\":-1,\"TransactionDate\":\"2013-01-09T22:36:33.7991116+01:00\"}" 
```

这不会解析为正确的 JSON，我不知道为什么。此外，Firebug 中的“JSON”选项卡显示“没有要显示此对象的属性”。

我很确定我的内容类型和数据类型在通话中是正确的。

这是我制作 JSON 的代码 - 使用 JSON.NET 库：

```
[HttpPost]
public JsonResult StartPurchase(string phoneReceiver, string emailNotify, string value)
{
    if (ModelState.IsValid)
    {
        BlockchainPayments block = new BlockchainPayments();
        var address = block.GetAddress(BtcContext.PurchaseSession);

        decimal val = 0;
        decimal.TryParse(value, out val);

        var ps = new PurchaseService();
        var purchase = ps.StartPurchase(BtcContext.PurchaseSession, phoneReceiver, emailNotify, address.destination, val);
        return Json(JsonConvert.SerializeObject(purchase));
    }
    return Json("Error");
} 
```

这是 jQuery 调用：

```
$.ajax({
    type: "POST",
    url: url,
    data: dataToSend,
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function (data) {
        alert('Awesome destination succes');
    },
    error: function (date) {
        alert('An occurred while purchasing. Please try again later');
    }
}); 
```

知道为什么它没有返回有效的 JSON 吗？以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:52:35.597

看起来您正在对其进行双重编码，只需使用一种转换方法，例如`return Json(purchase);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:52:06.790

`return Json`我相信已经序列化了一个对象。看起来你正在获得双重序列化。

# tcl - 在 TCL 中处理 2 个列表

> ID：14247132
> 
> 赞同：-2
> 
> 时间：2013-01-09T21:49:34.247
> 
> 标签：tcl

随着输出要求的改变，我重新表述了我之前的问题。

两个列表

```
fruit_type={apple, apple, orange, orange, pineapple, pineapple, pineapple}
num_type = {2, 1, 1, 2, 3, 1, 2} 
```

预期产出

```
apple 2
apple 1
orange 1 2
pineapple 3
pineapple 1 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:13:53.280

```
proc debugityourself-or-maybe-even-port-to-tcl8.4 {fruit_type num_type} {
    foreach fruit $fruit_type num $num_type {
        if {[info exists result]&&
            ([lindex $result end-1 0] eq $fruit)&&
            ([lindex $result end end] <= $num)} {
            lset result end [list {*}[lindex $result end] $num] 
        } else {
            lappend result [list $fruit] [list $num]
        }
    }
    if {[info exists result]} {
        return [concat {*}$result]
    }
} 
```

UPD：由于要求再次更改，这是一个新版本：

```
proc fruits-of-labour-for-new-requirements {fruit_type num_type} {
    foreach fruit $fruit_type num $num_type {
        if {[info exists resultF]&&
            ([lindex $resultF end] eq $fruit)&&
            ([lindex $resultN end end] <= $num)} {
            lset resultN end [list {*}[lindex $resultN end] $num]
        } else {
            lappend resultF $fruit
            lappend resultN [list $num]
        }
    }
    if {[info exists resultF]} {
        # $resultF is a list of fruits, $resultN is a list of
        # lists with corresponding numbers.
        return [list $resultF $resultN]
    }
} 
```

# .htaccess - .htacces 特定文件的重定向

> ID：14247133
> 
> 赞同：0
> 
> 时间：2013-01-09T21:49:40.980
> 
> 标签：.htaccess

我知道有很多关于 .htaccess 的问题，但我找不到解决方案。

我在我的域上的一个文件夹中有一个 index.php。

```
mydomain.com/folder/index.php 
```

这个 index.php 列出了 3 个我不希望人们看到的 url，我只希望它们被重定向到第一个。我无法修改 index.php 文件，我需要使用 htaccess 重定向流量，这样：

我需要将所有内容重定向到

```
mydomain.com/folder/
www.mydomain.com/folder/
mydomain.com/folder/index.php
www.mydomain.com/folder/index.php 
```

并将它们发送到此网址

```
www.mydomain.com/folder/text 
```

有任何想法吗？

非常感谢

# glassfish - 灰熊如何适应 Glassfish？

> ID：14247134
> 
> 赞同：6
> 
> 时间：2013-01-09T21:49:54.307
> 
> 标签：glassfish, grizzly

我知道 Glassfish 使用了一个名为 Grizzly 的组件，但我不确定 Grizzly 究竟扮演什么角色。我读过它是 Glassfish 的“前端”。它是否正确？Grizzly 究竟做了什么，比如当一个 HTTP 请求进来或一个响应被发回时，它是先通过 Grizzly 吗？如果是这样，出于什么原因？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T17:06:00.490

Grizzly 代表 GlassFish 中的一个或多个不同容器完成所有繁重的 NIO 提升工作。它很像 Tomcat 的连接器功能。连接器代表核心 Web 容器执行网络操作。

对于 HTTP，Grizzly 负责解析和序列化 HTTP 请求/响应。它还提供了允许 Servlet Async 支持运行的基础结构。对于 EE7，Grizzly 还提供了支持 Servlet 内的非阻塞 I/O 所需的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T23:04:42.320

直接从项目主页：

> Grizzly NIO 和 Web 框架旨在帮助开发人员利用 Java™ NIO API。Grizzly 的目标是帮助开发人员使用 NIO 构建可扩展且强大的服务器，我们还提供扩展的框架组件：Web 框架 (HTTP/S)、Bayeux 协议、Servlet、HttpService OSGi 和 Comet。

提供[用户指南](http://grizzly.java.net/nonav/docs/docbkx2.2/html/grizzly-docs.html)以及演示其各种用法的代码[示例。](http://grizzly.java.net/nonav/docs/docbkx2.2/html/samples.html)

有关更多详细信息以及如何参与，请参阅 Java.net 上的[Grizzly项目。](http://grizzly.java.net/)

# android - Android地图v2：标记显示顺序

> ID：14247139
> 
> 赞同：2
> 
> 时间：2013-01-09T21:50:20.983
> 
> 标签：android, map, google-maps-android-api-2

我正在使用地图 API 的 v2 编写一个 android 应用程序。我在地图上显示了几种不同类型的标记，我总是希望将其中一种显示在其他标记之上。

我最后尝试将该标记添加到地图中，但它似乎仍然会根据标记的相对位置在其顶部显示其他标记。

有没有人有办法强制给定标记始终显示在顶部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:06:49.647

将项目置于最前面的方法是调用 .showInfoWindow();

查看这篇文章，了解如何将点击的项目置于前面。

[Google Maps v2 Marker zOrdering - 置顶](https://stackoverflow.com/questions/14771569/google-maps-v2-marker-zordering-set-to-top/14771740#14771740)

# javascript - 从字符串中删除数字和字符

> ID：14247140
> 
> 赞同：5
> 
> 时间：2013-01-09T21:50:23.090
> 
> 标签：javascript, jquery, regex

如果用户点击一个标签，它现在可以识别全文（数字和字符）。

返回`Popular Tag %82`

我试过了：

```
$tag.click(function(){
  var $this = $(this);
  var text = $this.text();
  var num = text.parseInt();
  num.remove();
  alert(text)
}); 
```

对数字不起作用。那么我怎么才能得到这些字母呢？即：忽略两个数字和特殊字符（％）

[在这里拉小提琴！](http://jsfiddle.net/cyEzC/11/)谢谢你的帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T21:52:56.047

最简单的方法是使用正则表达式：

```
var s = "ABCblahFoo$%^3l";
var letters = s.replace(/[^A-Za-z]+/g, ''); 
```

*   代表`[]`一个字符（或许多不同的可能字符）
*   **表示除**括号中定义的字符外的`^`所有字符
***   `A-Z`等于大写字母*   `a-z`等于小写字母**

 **所以...用空字符串替换每个不是字母的字符。

[jsFiddle 演示](http://jsfiddle.net/cyEzC/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-13T04:55:36.430

**上面的答案将从字符串中删除空格。**

```
var str = "Hello^# World/";
str.replace(/[^a-zA-Z ]/g, ""); 
```

用这个。只需在正则表达式中的**AZ**之后添加空格。**

# javascript - 如何从命令提示符在浏览器中执行 JavaScript

> ID：14247141
> 
> 赞同：1
> 
> 时间：2013-01-09T21:50:30.340
> 
> 标签：javascript, windows, sublimetext2, command-prompt

我想知道是否可以使用 Windows 中的命令提示符在浏览器窗口中执行 JavaScript。是否可以在新的浏览器窗口中启动 chrome 并执行 JS 文件，所有这些都来自命令提示符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:32:31.973

我对此表示怀疑。

我只是尝试过这个：

您可以`javascript:alert("moo")`输入浏览器的主页 url 设置，它会在您打开浏览器时立即运行。

# .net - Windows Phone 7 和 Windows Phone 8 支持什么框架？

> ID：14247142
> 
> 赞同：4
> 
> 时间：2013-01-09T21:50:34.147
> 
> 标签：.net, windows-phone-7, windows-phone-8

Windows Phone 7 和 Windows Phone 8 支持什么框架？
我在网上找不到太多关于此的信息。但是我听说WP7不支持完整的框架。如果是这样，WP7 和 WP8 的框架有哪些限制？

额外问题：
WP7 和 WP8 的编程是否仅限于 C#？如果不是，可以使用哪些其他编程语言？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T03:26:34.347

每个版本的 .net 都有自己的 .net 配置文件。著名的 .net 配置文件包括“客户端配置文件”、Silverlight、Windows Phone、WinRT、紧凑框架等。“经典”.net 配置文件是用于桌面 (WinForms)、服务器 (WebForms &网页服务）。尽管 .net 桌面版本身必须应对框架版本差异（1.1、2.0、3.0、4.0、4.5 等）。

Windows Phone 8 是 Windows Phone 7 的一个分支。它是 Silverlight 4 的一个分支。它是 Silverlight 3 的一个分支。它是 Silverlight 2 的一个分支。它是 CoreCLR 配置文件的一个分支。这是 .net 3.0 的一个分支。一直以来，每个分支都将从前一个分支开始，并从 .net 桌面版中提取选定的更改。和其他配置文件。

那么，Windows Phone 8 运行的是哪个版本的 .net？Windows Phone 8 .net 配置文件。该配置文件是 Windows Phone 7 配置文件的分支，并深受 .net 4.5、WinRT 和 Silverlight 4 的影响。还不够困惑？XAML 格式也会发生同样的情况。

Codeplex 上有一个[很棒的项目](http://xamldialects.codeplex.com/)，您可以下载并检查 .net 配置文件和版本的内容。

![在此处输入图像描述](../Images/0c2bebd8a98602d48d1150b754afe8c5.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T21:53:59.040

Windows Phone 有它自己的自定义框架（基于 7.x 中的 Silverlight）。每个手机操作系统版本都支持自己的功能集。

您可以在 MSDN 主帮助（针对 Silverlight）中查看 7 和 7.1 支持的版本 - 例如，请参阅[Color](http://msdn.microsoft.com/en-us/library/system.windows.media.color%28v=vs.95%29.aspx)。在底部：

> 适用于 Windows Phone 的 Silverlight
> 
> ```
> Supported in: Windows Phone OS 7.1, Windows Phone OS 7.0 
> ```

Windows Phone 8 [API 参考文档](http://msdn.microsoft.com/library/windowsphone/develop/ff626516%28v=vs.105%29.aspx)是单独的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T02:51:03.050

要解决奖金问题，您有以下编程选项

> Windows Phone 7.x：C#/XAML、VB/XAML、XNA
> 
> Windows Phone 8：C#/XAML、VB/XAML、C++/DirectX

Windows Phone 7 应用程序将在 Windows Phone 8 设备上运行（极少数例外）。

[我有一篇关于支持各种功能](http://blogs.msdn.com/b/jimoneil/archive/2013/01/03/windows-runtime-what-s-supported-where.aspx)（也跨 Windows 8）的帖子，这可能有助于破译 API 的文档，无可否认，这些文档分散在整个 MSDN 中

# javascript - 首次加载时仅加载一次广告 (div)

> ID：14247150
> 
> 赞同：2
> 
> 时间：2013-01-09T21:51:07.780
> 
> 标签：javascript, jquery, html

我想知道我怎样才能拥有一个只有在您第一次加载页面时才加载或显示广告但每次刷新页面时隐藏它的 div？

我只有用 Jquery 加载 div 的代码，但不知道刷新页面后如何隐藏它：

```
$(document).ready(function() {
  $(".referralProgram").fadeIn("slow");
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:55:26.607

使用 cookie：

```
$(document).ready(function() {
    if (!readCookie("adSeen")) {
        $(".referralProgram").fadeIn("slow");
        createCookie("adSeen", "1", 1000);
    }
});

function createCookie(name, value, days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        var expires = "; expires=" + date.toGMTString();
    } else var expires = "";
    document.cookie = name + "=" + value + expires + "; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
} 
```

[来自quirksmode.org 的](http://www.quirksmode.org/js/cookies.html#script)Cookie 函数。

**编辑：**由于很多人都在讨论如果禁用 cookie 时如何处理这个问题，应该指出服务器会话实现依赖于 cookie 或 url 中的会话标识符。充其量，您只能阻止为同一用户展示广告，只要会话标识符在 url 中。返回主页没有会话 ID 将重新显示广告。此外，如果用户共享 url，粗心的实现（甚至一些小心的实现）可能会导致其他用户误报。 `localStorage`解决方案不适用于大多数（如果不是全部）浏览器中禁用的 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:55:05.293

您需要一种方法来跟踪广告何时显示给用户。在创建广告时设置 cookie 并在再次显示之前检查它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:57:54.373

您可以使用客户端持久存储来标记用户已经看到了这一点。这里有 3 个选项：

1) Cookies - 在访问用户的机器上设置一个 cookie。

2) HTML5 存储 - 您可以将标志存储在浏览器（仅限 HTML5）存储中。

3) 服务器会话 - 如果您使用中间件（PHP、ASP.NET、Java 等），您可以通过会话变量进行跟踪（这是 cookie 的抽象，只有在您创建它时才会持久）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T22:00:20.130

我不确定您的服务器端实现是什么样的，但如果您担心 cookie 被关闭，您可以使用会话状态在服务器端处理此问题。

# javascript - 如何根据数据库值创建动态过滤的 Web 列表

> ID：14247152
> 
> 赞同：0
> 
> 时间：2013-01-09T21:51:18.817
> 
> 标签：javascript, jquery, html

我已经建立了一个运输类型的数据库，并将关于这些类型的各种元数据输入到一个基于 Web 的数据库 (MySQL) 中。我的数据的类型和分类值是动态的，所以我不想硬编码太多。

我想创建一个基于 Web 的过滤器窗格，其中显示了我的数据的各种属性，以便用户将各种过滤器应用于数据，一旦选择了各种过滤器属性，我想对数据库执行查询并返回页面上网格中的结果记录...

请参见下面的示例：

![在此处输入图像描述](../Images/f1c418ec352b1a84d431b6ad01b0d3c2.png)

在示例中，我想将图像与数据库中的某些属性类型相关联，以便当用户单击图像时，网格会使用相关的数据库信息进行更新。

我想使用 PHP、ajax 和 Html 来做到这一点......但是我想知道是否有任何框架和特定组件可以用来简化这件事（例如 jQuery 或 MooTools）

这对我来说是全新的，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:59:28.423

您要解决的问题接近“分面搜索”。请google这个词，你会得到很多信息。

您可以使用 Solr 或 Lucene 来实现分面搜索。

# linux - 我需要在 Shell Script 中获得一个子字符串

> ID：14247153
> 
> 赞同：2
> 
> 时间：2013-01-09T21:51:35.047
> 
> 标签：linux, string, shell

我需要帮助。

我需要在下一行得到一个子字符串

```
11:46:24.851239 IP (tos 0x0, ttl 128, id 11289, offset 0, flags [none], proto UDP (17), length 229) 
```

结果必须是：`ttl 128`

我希望你能帮帮我！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:53:23.813

尝试这样做：

```
echo '11:46:24.851239 IP (tos 0x0, ttl 128, id 11289, offset 0, flags [none], proto UDP (17), length 229)' |
grep -oP "\bttl\s+\d+\b"
ttl 128 
```

## 笔记

*   `\b`是一个词边界
*   `\s`是一个空间
*   `+`表示至少一个或多个前面的字符
*   `-P`switch 是 pcre 高级有用的语法`grep`
*   `-o`switch 表示只打印匹配的部分

## 编辑

如果你想把它放在一个变量中：

```
var=$(
    echo '11:46:24.851239 IP (tos 0x0, ttl 128, id 11289, offset 0, flags [none], proto UDP (17), length 229)' |
        grep -oP "\bttl\s+\d+\b"
)
echo "$var" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:53:35.107

尝试使用`grep -o 'ttl [0-9]\+'`：

```
$ echo '11:46:24.851239 IP (tos 0x0, ttl 128, id 11289, offset 0, flags [none], proto UDP (17), length 229)' | grep -o 'ttl [0-9]\+'
ttl 128 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:54:33.830

使用[sed](/questions/tagged/sed "显示标记为“sed”的问题")：

```
sed 's/.*[ ]*\(ttl[ ]*[0-9]*\).*/\1/' input 
```

# shader - CG着色器阈值函数

> ID：14247157
> 
> 赞同：0
> 
> 时间：2013-01-09T21:51:52.910
> 
> 标签：shader, fragment-shader, cg, threshold

CG 中是否有一些内置片段函数允许我在没有条件的情况下计算以下内容？

y = x>偏差？1.0f:0.0f；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:41:18.913

几乎。它是**>=**而不是**>**

[http://http.developer.nvidia.com/Cg/step.html](http://http.developer.nvidia.com/Cg/step.html)

y = 步长（偏差，x）；

# sql-server - ADO.NET 与 SSMS 中的 SQL Server 性能

> ID：14247158
> 
> 赞同：5
> 
> 时间：2013-01-09T21:51:59.613
> 
> 标签：sql-server, sql-server-2008, ado.net

在开始之前，我在这里阅读了几篇关于过去性能问题的帖子，人们在 ADO 和 SSMS 中执行 SQL 语句/过程。我花了一天的大部分时间试图自己解决这个问题......重新索引，使用`sp_recompile`，添加`Option(Recompile)`到我的程序中。没有任何效果，所以我正在向社区寻求帮助。

我有一个存储过程，我的一个 Web 应用程序执行该存储过程来运行报告。特别是这个过程主要由动态 SQL 组成，以允许返回不同的报告结果......我网站上的一种动态报告功能。无论如何，一些报告可以运行（使用相同的程序）并且结果几乎立即返回。但是，可以使用其他选项，并且该过程可能需要几分钟才能运行。但是，使用 SSMS 中的相同选项手动运行该过程会立即产生结果。这听起来像是某种类型的计划缓存问题，但在重新编译程序并添加之后`WITH(RECOMPILE)`，它在 ADO.NET 中的运行速度仍然非常慢。

所以我开始查看 SQL 配置文件，也许 ADO 正在使用的“SET”命令之一导致了这个问题。但是，在使用完全相同的 SET 命令后，它仍然几乎可以立即使用 SSMS 返回。

我尝试使用`DBCC freeproccache`and`DBCC freesystemcache`清除任何存储的计划，但这也无济于事。

我尝试的另一件事是获取在过程中生成的动态 SQL 并直接在 SqlCommand 语句中运行它。这里没有参数，只是简单的 SQL。它再次在 SSMS 中立即运行，但在 ADO.NET 中需要永远。

有没有办法（运行 ADO.NET）来查看生成的计划？我可以在 SSMS 中执行此操作，但这对我没有帮助，因为它在 SSMS 中运行良好。

如果有任何帮助，这里是原始 SQL 语句......

```
SELECT sf.ID [FileID], sb.ID [BillID], sb.Client_BillID, sf.BobID [ClientID], c.Name [ClientName], c.Parent_ID [ParentID], pnt.Name [ParentName], Network_ID, Facility_Name, OON, sb.TaxID, Inpatient, sf.ProcessDate, sb.Reversed, sb.State, sb.Product, sb.FormType, n.Direct 
INTO #t1 FROM SubmitterFiles sf WITH(NOLOCK) 
INNER JOIN SubmitterBills sb WITH (NOLOCK) ON sf.ID = sb.FileID 
LEFT JOIN PPORecords r WITH (NOLOCK) ON sb.RecordID = r.ID 
LEFT JOIN PPONetworks n WITH (NOLOCK) ON r.Network_ID = n.ID 
LEFT JOIN PPOProviders p WITH (NOLOCK) ON r.Provider_ID = p.ID 
INNER JOIN Clients c WITH (NOLOCK) ON sf.BobID = c.ID 
LEFT JOIN Clients pnt WITH (NOLOCK) ON c.Parent_ID = pnt.ID 
WHERE sf.ProcessDate BETWEEN 'Dec  1 2012 12:00AM' and 'Dec 31 2012 12:00AM' 
AND ISNULL(sb.Status,'') NOT IN ('E','V') 
AND (c.Parent_ID IN (1989) or c.ID  IN (1989)) 
; 

SELECT TOP 100 0 as [placeholder],NULL AS BillID, NULL AS Client_BillID, NULL AS DOS
,NULL AS Network_ID
,NULL AS Client_ID
,NULL AS Client_Name
,NULL As ProcessDate
,NULL As ProcessMonth
,NULL AS SubClientID
,NULL AS SubClientName
,Product
,TaxID
, FacilityName
, LastName
, FirstName
,State
,County
,NULL As ProcCode
,NULL As FormType
,NULL As Inpatient, NULL AS Outpatient
,COUNT(DISTINCT sb.BillID) AS [Total_Bills]
,SUM(sl.Amount) AS  [Total_Charges]
,SUM(sl.StateSavings) AS [Total_StateSavings]
,SUM(sl.PPOSavings) AS [Total_PPOSavings]
,COUNT(DISTINCT TaxID) AS [Total_Unique_TaxIds]
,0,0,0,0,0
,COUNT(DISTINCT CASE WHEN sb.OON = 1 THEN sb.BillID ELSE NULL END) AS [Out_Bills]
,SUM(CASE WHEN sb.OON = 1 THEN sl.Amount ELSE 0 END) AS [Out_Charges]
,SUM(CASE WHEN sb.OON = 1 THEN sl.StateSavings ELSE 0 END) AS [Out_StateSavings]
,COUNT(DISTINCT CASE WHEN sb.OON = 1 THEN sb.TaxID ELSE NULL END) AS [Out_Unique_TaxIds]
,0,0,0,0,0
,0,0,0,0,0
 FROM SubmitterLines sl  WITH (NOLOCK, INDEX(IX_SubmitterLines_BillID))
 INNER JOIN #t1 sb WITH(NOLOCK) ON sl.BillID = sb.BillID
 INNER JOIN SubmitterBillProviders sbp WITH(NOLOCK) ON sb.BillID = sbp.ID
 INNER JOIN SubmitterBillZipCounty sbc WITH(NOLOCK) ON sb.BillID = sbc.ID
 WHERE 1 = 1
GROUP BY Product
,TaxID
,FacilityName, LastName, FirstName
,State
,County
ORDER BY [Out_Bills] DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:14:13.293

这是昨晚让我失眠的问题之一，所以我又开始重新审视所有事情。最终让我感到震惊的是，在 SSMS 中，我的默认行数设置为 1000。虽然我在 SQL Profiler 中运行跟踪时遇到了什么样的错误，但其他 SET 并没有显示出来。将 ROWCOUNT 设置回 0 可以让我在 SSMS 中重现这一点，让我可以查看执行计划并修复导致查询运行缓慢的问题。

归根结底，这不是 ADO 问题 - 这是我在 SSMS 中设置的一个设置，用于限制我通常希望返回的行数。由于我的部分查询构建了一个更大结果集的临时表，因此该临时表仅填充了 1000 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:20:37.130

你见过这个 SO 线程吗？[SQL Server 查询在 ADO.NET 中的运行速度比在 SSMS 中慢](https://stackoverflow.com/questions/1750369/sql-server-query-runs-slower-from-ado-net-than-in-ssms)

正如接受的答案中所建议的那样，Showplan XML Event Class 可以工作吗？

# python - 范围内数字的 if 语句

> ID：14247166
> 
> 赞同：0
> 
> 时间：2013-01-09T21:52:36.853
> 
> 标签：python, if-statement

我无法将其调整为仅响应 1 到 100 之间的值。我知道它很简单，但无法通过搜索找到任何有效的东西。

```
while True:
    Mynumber = raw_input('Enter number of random points')
    if Mynumber == '0 < 100':
            print 'number choosen'
            Mynumber = int(Mynumber)
            break 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T21:53:21.190

```
if 1 <= my_number <= 100: 
```

或者，由于您是从 raw_input 获取的，并且必须`int`先从未知字符串转换为：

```
try:
    my_number = int(raw_number)
except ValueError:
    print "%s not an integer value." % raw_number
else:
    if 1 <= raw_number <= 100: 
```

尽管经过进一步分析，您似乎正在尝试执行以下操作：

```
base_prompt = 'Enter number of random points'
user_input = raw_input(base_prompt)
while True:
    try:
        input_number = int(user_input)
    except ValueError:
        user_input = raw_input('%s not an interger\n%s' % (user_input, base_prompt))
    else:
        if 1 <= input_number <= 100:
            break
        else:
            user_input = raw_input('%d out of range (1 to 100)\n%s' % (input_number, base_prompt)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:56:13.873

如果您使用的是 Python 3.x，则以下内容也适用：

```
if int(my_number) in range(1, 101):
    # ... 
```

需要注意的是，范围的终点是排他性的，因此它可能比链式运算符更不直观。

# boot - Windows Embedded Compact 7 上的自定义启动画面

> ID：14247167
> 
> 赞同：1
> 
> 时间：2013-01-09T21:52:37.103
> 
> 标签：boot, autostart, windows-embedded-compact

我希望我的 Windows Embedded Compact 7 设备在启动后启动应用程序，而操作系统不会随时显示。在 Windows 启动时，我想展示一些全屏徽标图像。有什么办法可以做到这一点？

不需要 Platform Builder 的解决方案将是首选。当应用程序终止时，应显示正常的 Windows EC7 桌面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:04:01.577

您将需要平台构建器，因为您需要重新编译引导加载程序，才能将自定义图像嵌入到代码中。

在 BOOTLOADER\Display\bsp_logo.c 下安装 PB 检查时

问候，卢卡

# c - c结构被传递给函数

> ID：14247178
> 
> 赞同：0
> 
> 时间：2013-01-09T21:53:15.497
> 
> 标签：c, pointers, casting

我仍在学习 C 并且有一个与我经常看到的东西相关的问题。如果我错了，请纠正我，语句 1 是否等同于语句 2？

1.  `(struct sockaddr *) &echoServAddr`
2.  `struct sockaddr echoServAddr`

如果我理解正确，我们将转换`&echoServAddr`为与`sockaddr`.

* * *

那么下面的代码是通过地址传递结构的吗？

```
/* Bind to the local address */
if (bind(servSock, (struct sockaddr *) &echoServAddr, sizeof(echoServAddr)) < 0) {
    perror("bind() failed");
    exit(1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:01:58.677

假设这些都是函数参数。这些是不同的。第一个是通过引用传递结构。第二个是按原样传递结构 - 复制整个数据。

Bind 接受`const struct sockaddr *`它作为第二个参数，所以这是正确的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:18:33.340

```
// This declares a variable of type "struct sockaddr"
struct sockaddr echoServAddr;

// This merely takes a pointer to your structure,
// It (redundantly) casts that pointer to "struct sockaddr *" 
struct sockaddr *myPtr = (struct sockaddr *) &echoServAddr;

// This calls the function "bind()" and passes it a pointer to your structure
if (bind(servSock, (struct sockaddr *) &echoServAddr, sizeof(echoServAddr)) < 0) {
    perror("bind() failed");
    exit(1);
} 
```

PS：是的，您可以将一种结构类型的指针转​​换为不同结构类型的指针。

除非底层结构实际上是兼容的，否则这样做会让你非常难过:)

# symfony - 认证系统

> ID：14247183
> 
> 赞同：0
> 
> 时间：2013-01-09T21:53:25.050
> 
> 标签：symfony

我确实有以下security.yml：

```
security:
encoders:
    Symfony\Component\Security\Core\User\User: plaintext
    Frontend\AccountBundle\Entity\User:
     id: sha256salted_encoder

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    chain_provider:
        chain:
            providers: [in_memory, user_db]
    in_memory:
        memory:
            users:
                foo: { password: test, roles: ROLE_USER }
    user_db:
        entity: { class: Frontend\AccountBundle\Entity\User, property: email }

access_control:
     - { path: ^/secarea/, roles: ROLE_USER } 
```

如果我要以用户身份登录....

...富：

*   在每一页 foo 登录为： foo // 绿色背景
*   在每一页 foo 都经过身份验证

...作为数据库用户：

*   仅在我在 access_control 中声明的页面上，db_user 才登录并经过身份验证 // 绿色背景
*   在其他页面上，用户已登录 //黄色背景，但未通过身份验证

为什么有不同？

评论：我必须给来自 db 的用户一个角色吗？我可以为 db 用户设置默认角色吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:30:34.393

你使用防火墙吗？

前段时间我偶然发现了这个问题并在这里结束：

[无法从不安全区域访问 app.user](https://stackoverflow.com/questions/11702601/app-user-is-not-accessible-from-unsecured-area)

# silverlight - 为什么 CurrentCulture 和 CurrentUICulture 不同？

> ID：14247184
> 
> 赞同：2
> 
> 时间：2013-01-09T21:53:27.683
> 
> 标签：silverlight, globalization

我有一个 Silverlight 应用程序和相应的托管它的 ASP.Net 应用程序。

我想使用检测到的文化设置来格式化 Silverlight 应用程序中的日期，但我认为它没有正确检测系统设置（或者它使用了一些我不知道的设置作为它们的基础）。

当我检查线程上的文化值（在 ASP.Net 应用程序和 Silverlight 中）时，CurrentCulture 正确设置为 en-GB，但 CurrentUICulture 是 en-US。

我在 Windows 8 上运行，位置和语言都设置为 en-GB。

我使用 Fiddler 检查浏览器设置，并将 Accept-Language 标头值作为 en-GB 发送。

这是我需要更改的网络服务器上的某些设置吗？我正在使用 Visual Studio 的内置开发服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:09:19.547

首先，澄清一下：

CurrentCulture 适用于日期格式、数字、货币等（不是实际语言）。CurrentUICulture 是 UI 的语言。

您是否在线程中同时设置了 CurrentUICulture 和 CurrentCulture？

```
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("de-ch");
Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture("de-ch"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T12:50:43.703

请参阅[nicodemus13](https://stackoverflow.com/users/26463/nicodemus13)对 .NET 中 CultureInfo 的 CurrentCulture 和 CurrentUICulture 属性有什么区别的评论[？](https://stackoverflow.com/q/329033/1220972)

> 请记住，Microsoft 不会将美国英语和（英国）英语或其他英语的 UI 文化分开。英语没有 MUI，这意味着 CurrentUICulture 在英语机器上将始终为 en-US，无论 CurrentCulture 是什么，可以将其设置为本地化区域设置。

# git-bash - 无法在 GitHub 上使用我想要的命令

> ID：14247186
> 
> 赞同：0
> 
> 时间：2013-01-09T21:53:40.503
> 
> 标签：git-bash, github-for-windows

我已经将一个函数上传到我的 GitHub 帐户，这是我第一次这样做。我想知道如何使用 GitHub 的命令行。我想删除所有历史记录，但不是原始存储库。`git push origin +master`经过谷歌搜索后，我得到了答案。

当我在 GitHub 上的命令行中输入此命令并按回车键时，它开始搜索。我在这里做错了什么？

# objective-c - Objective C 核心绘图区

> ID：14247192
> 
> 赞同：0
> 
> 时间：2013-01-09T21:54:01.613
> 
> 标签：objective-c, ios6, core-plot

我有一个核心图散点图启动并运行，我想看看是否可以用某种颜色填充封闭区域......谁能指出我的写入方向？

谢谢你。

最好的...SL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:46:19.140

您可能想查看 core plot 的网站。他们有一堆示例应用程序。如果要填充曲线下的区域，请查看渐变填充演示。希望这可以帮助。 [http://code.google.com/p/core-plot/](http://code.google.com/p/core-plot/)

# c# - 无法按数字字符串值属性对对象集合进行排序

> ID：14247195
> 
> 赞同：1
> 
> 时间：2013-01-09T21:54:11.557
> 
> 标签：c#, asp.net, c#-4.0, collections

所以我有一个类，其中包含一个名为 myNumber 的属性。它看起来像这样：

```
public class MyThing
{
    public int name{ get; set; }
    public string myNumber{ get; set; }
} 
```

myNumber 中包含的值可能如下所示`12-24`或`12-024`。

我想`IEnumerable<MyThing> myCollection`按 myNumber 降序订购这些对象的集合（），但我不知道如何去做。

我试过`myCollection.OrderByDescending(f => f.myNumber)`了，但它并不完全符合我的预期。我希望`12-22, 13-01, 12-030`像这样订购：

```
13-01 
12-030
12-22 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:02:24.900

您可以像订购它一样订购它[`Version`](http://msdn.microsoft.com/en-us/library/system.version.aspx)。因此，您可以拆分`'-'`并使用第一部分作为主要版本，最后一部分作为次要版本：

```
var orderedLikeVersion = myCollection
    .Select(t => new
    {
        Thing = t,
        Parts = t.myNumber.Split('-')
    }).Select(x => new
    {
        x.Thing,
        Version = new Version(int.Parse(x.Parts[0]), int.Parse(x.Parts[1]))
    })
    .OrderByDescending(x => x.Version)
    .Select(x => x.Thing); 
```

[**演示**](http://ideone.com/I5z0Jq)您想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:59:36.013

我猜你有这个订单？

```
13-01 
12-22
12-030 
```

按照字母约定，这将是正确的。12-2* 大于 12-0*，因为 2 在 0 之后。

*按照数字约定，这似乎*也是正确的，因为 22 也大于 03，并且 2 大于 0。

所以我不确定您的预期顺序，为什么您将 12-030 解释为大于 12-22？连字符后的部分是否应该允许截断前导零？如果你这样做了，那么 12-30 将等于 12-030，我会问自己，前导 0 的目的是什么。

# ajax - Trigger.io Ajax 请求

> ID：14247197
> 
> 赞同：1
> 
> 时间：2013-01-09T21:54:21.370
> 
> 标签：ajax, http, httpwebrequest, trigger.io, simperium

我正在尝试让 Trigger.io 向 simperium 发出 HTTP 请求（https://simperium.com/docs/reference/http/）

我的电话看起来像：

```
forge.request.ajax({
  url: 'https://api.simperium.com/1/app-id/somebucket/i/newitem?response=1',
  headers: {
  'X-Simperium-Token': "access-token",
},
type: 'POST',
dataType: 'json',
data: {
  'test': 'test'
},
success: function (suc) {
  forge.logging.info(JSON.stringify(suc));
  // Upload complete - do nothing
},
error: function (err) {
  forge.logging.info(JSON.stringify(err));
  alert('Problem uploading the metadata');
}
}); 
```

然而触发器返回：

```
[FORGE] '{"type":"EXPECTED_FAILURE","message":"Error opening connection for ajax request"}' 
```

打电话会有什么问题？谢谢。

更新：

看起来它适用于检索对象，但仍不适用于更新/创建新对象。这适用于获取对象：

```
forge.request.ajax({
  url: 'https://api.simperium.com/1/app-id/sample/i/object-id',
headers: {
  'X-Simperium-Token': "token",
},
type: 'GET',
success: function (suc) {
  forge.logging.info(JSON.stringify(suc));
  // Upload complete - do nothing
},
error: function (err) {
  forge.logging.info(JSON.stringify(err));
  alert('Problem uploading the metadata');
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T01:33:37.617

我知道这是一个超级老问题（差不多 12 个月！！）。我正在检查开放的 Simperium 问题，只是想问你：你对图书馆还有什么问题吗？

谢谢！

# css - 谷歌字体只有ie9和其余的？

> ID：14247203
> 
> 赞同：0
> 
> 时间：2013-01-09T21:54:46.170
> 
> 标签：css, fonts, conditional-statements, google-font-api

我正在使用 Google Fonts 加载两种字体。由于它们在 ie9 以下的任何内容中看起来都非常可怕，我想忽略它们。这是我的想法：

```
<!DOCTYPE html>
<!--[if lte IE 8 ]> <html class="ie8" lang="en-US"> <![endif]-->
<!--[if !IE]><!--><html lang="en-US"><!--<![endif]--> 
```

然后在我的CSS中我可以使用这样的东西：

```
h1{
font: normal 33px/50px 'Open Sans', 'Helvetica Neue', Arial, 'Liberation Sans', FreeSans, sans-serif; 
```

}

```
.ie8 h1{
font: normal 33px/50px 'Helvetica Neue', Arial, 'Liberation Sans', FreeSans, sans-serif; 
```

}

这可以解决尝试使用 Open Sans 的问题。加载实际的样式表怎么样。这样的事情会好吗？

```
<!--[if !(lte IE 8) ]>
<link href="http://fonts.googleapis.com/css?family=Kite+One|Open+Sans:400italic,400,700" rel="stylesheet" type="text/css">
<![endif]--> 
```

这将阻止 ie8 及以下版本甚至加载 css 并防止浪费下载 - 对吗？这是正确的语法吗？

有人推荐更好的方法吗？我尝试单独加载所有字体，但它们在 ie8 和 7 中仍然无法正常工作，所以这不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:59:59.403

你必须使用这样的东西来排除 IE8 及更低版本：

```
<!--[if gt IE 8]>
    <link href="http://fonts.googleapis.com/css?family=Kite+One|Open+Sans:400italic,400,700" rel="stylesheet" type="text/css">
<![endif]-->

<!--[if !IE]> -->
    <link href="http://fonts.googleapis.com/css?family=Kite+One|Open+Sans:400italic,400,700" rel="stylesheet" type="text/css">
<!-- <![endif]--> 
```

第一个仅加载 IE9 及更高版本的字体。第二个为所有非 IE 浏览器加载它。

或者，您可以使用 JavaScript 加载字体。

# php - 使用分块传输编码发送滚动Curl得到的数据

> ID：14247228
> 
> 赞同：1
> 
> 时间：2013-01-09T21:56:39.373
> 
> 标签：php, curl, chunked-encoding

我正在使用滚动 curl 从其他 40 个网站获取数据。一旦结果可用于网站，它们就会立即使用块发送出去。

为了实现这一点，我添加了以下标题：-

```
header("Transfer-encoding: chunked");
flush(); 
```

我还使用了一个函数来打印块：-

```
function print_chunks($chunk){
    $chunk = json_encode($tempArray);
    echo sprintf("%x\r\n", strlen(($chunk)));
    print_r($chunk);
   echo "\r\n";
   flush();
} 
```

在我的例子中，每个块都是一些 JSON 格式的数据，其大小可以是除零以外的任何值。

在客户端，我使用它来处理我的回复：-

```
xml.onprogress = function () {
alert("Triggered");
} 
```

大约 40 次调用仅触发两次。我想许多回复在实际发出之前就被合并了。这会导致性能严重下降，因为结果不是单独发送，而是在所有结果都发送后才发送。是因为个人响应的大小很小吗？

[这](http://compare.buyhatke.com/example.php?searchText=Dumb%20and%20dumber)是发送分块数据以进行签出的实际句柄。

**更新 ：**

对单个块的最小大小有任何限制吗？如果我只发送简单的小字符串块，它会将我所有的块一起发送。

这是我使用的完整代码。即使我在这里制作了 10 块，我也会在 20 秒后将它们全部放在一起：-

```
<?php
header("Transfer-encoding: chunked");
flush();

function dump_chunk($chunk)
{
    echo sprintf("%x\r\n", strlen($chunk));
    echo $chunk;
    echo "\r\n";
    flush();
}

$string = "Hello World, This is chunk1";
$string1 = "Hello World, This is chunk2";
$string2 = "Hello World, This is chunk3";
$string3 = "Hello World, This is chunk4";
$string4 = "Hello World, This is chunk5";
$string5 = "Hello World, This is chunk6";
$string6 = "Hello World, This is chunk7";
$string7 = "Hello World, This is chunk8";
$string8 = "Hello World, This is chunk9";
$string9 = "Hello World, This is chunk10";
$string10 = "";

dump_chunk($string);
sleep(2);
dump_chunk($string1);
sleep(2);
dump_chunk($string2);
sleep(2);
dump_chunk($string3);
sleep(2);
dump_chunk($string4);
sleep(2);
dump_chunk($string5);
sleep(2);
dump_chunk($string6);
sleep(2);
dump_chunk($string7);
sleep(2);
dump_chunk($string8);
sleep(2);
dump_chunk($string9);
sleep(2);
dump_chunk($string10);

?> 
```

如果我不清楚我的疑问，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:01:57.320

在函数结束时使用[`flush()`](http://br1.php.net/manual/en/function.flush.php%5D%28flush%28%29%29)将内容推送到浏览器`print_chunks`应该可以工作。

# java - Java 和 libgdx：如何在两个被覆盖的方法中使用这个变量？

> ID：14247229
> 
> 赞同：2
> 
> 时间：2013-01-09T21:56:42.660
> 
> 标签：java, libgdx

我在试图弄清楚如何在一种被覆盖的方法中使用变量以及在另一种方法中使用它时遇到了一个大问题。具体来说，我使用的是libgdx，想`map`在render方法中使用create方法中的变量。

这是我的代码：

```
@Override
public void create() {
    batch = new SpriteBatch();

    background = new TextureAtlas(
            Gdx.files.internal("data/background/background.pack"),
            Gdx.files.internal("data/background/"));
    bg = background.findRegion("Background");

    t = TMXLoader.readTMX("data/world/World.tmx");

    ArrayList<Image> map = TMXLoader.drawMap();

    camera = new OrthographicCamera(WIDTH, HEIGHT);
    camera.position.set(WIDTH / 2, HEIGHT / 2, 0);
    camera.update();
}

@Override
public void render() {
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    BufferedImage image = new BufferedImage(20, 20,
            BufferedImage.TYPE_INT_ARGB);
    Graphics2D g2d = (Graphics2D) image.getGraphics();

    batch.begin();
    for (int i = 0; i < WIDTH; i += bg.getRegionWidth()) {
        for (int j = 0; j < HEIGHT; j += bg.getRegionHeight()) {
            batch.draw(bg, i, j);
        }
    }

    for (int x = 0; x < t.width; x++) {
        for (int y = 0; y < t.height; y++) {
            for (Image tile : map) {
                float[] scale = getScale();

                Image scaledTile = tile.getScaledInstance(
                        (int) (t.tilewidth * scale[0]),
                        (int) (t.tileheight * scale[1]), Image.SCALE_FAST);
                g2d.drawImage(scaledTile, x, y, null);
            }
        }
    }
    batch.end();
} 
```

事实上，我无法`map`在渲染方法中访问。我无法创建自己的方法，因为必须在创建和渲染的每个方法中调用它。我被卡住了，无法自己解决。我有一种感觉，我可以使用 get/set 来做到这一点，但我不太确定我会如何尝试做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:26:46.283

将 map 声明为全局变量。

```
private ArrayList<Image> map; 
```

在 create 方法中，像你一样做分配 -

```
map = TMXLoader.drawMap(); 
```

现在在渲染方法中，您可以使用地图。

# visual-studio - 如何在 Visual Studio Express 中调试对 DOM 的查询

> ID：14247230
> 
> 赞同：1
> 
> 时间：2013-01-09T21:56:46.730
> 
> 标签：visual-studio, debugging, windows-8, winjs

有人可以帮我找出 Visual Studio 中最适合我的问题的调试功能。我正在用 JS 编码，下面有一行代码

```
 listView = utils.query("#termTest");
 ui.setOptions(listView, {
            itemDataSource: publicMembers.itemList,
            itemTemplate:  utils.query(".itemtemplate"),
            oniteminvoked: this._itemInvoked,
 }) 
```

我的应用程序运行良好并且不会导致错误，但是我的数据没有绑定到该列表视图，这让我假设由于某种原因它没有查询或查找 DOM 的正确元素。我如何找到它实际指向的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:46:17.473

您是否尝试过使用手表功能，而不仅仅是鼠标悬停？

您可以在监视窗口中设置一个变量，右键单击它并将其设置为在该值更改时中断。

这应该使您能够轻松查看此值何时更改。

# c# - 如何将 ComboboxItem 文本绑定到 Combobox 文本？

> ID：14247233
> 
> 赞同：0
> 
> 时间：2013-01-09T21:56:54.740
> 
> 标签：c#, .net, wpf, combobox, itemtemplate

这是一个`ComboBox` `ItemTemplate`：

```
<DataTemplate x:Key="DataTemplate2">
    <Grid Background="AliceBlue" Height="30">
        <TextBlock Text="{Binding Content}" Foreground="Lime"></TextBlock>  
    </Grid>
</DataTemplate> 
```

我想`Texblock.TextTrimming`在`TextBlock`上面使用。这`TextBlock`将是`ComboBoxItem`at 屏幕，但我不知道该放什么`TextBlockText`。我应该绑定什么？

我通常会看到他们放置的示例：`Text={Binding CustomClass.CustomProperty}`，但我需要使其通用。所以它适用于每个`ComboBox`应用程序。

我可以在 Text 上放什么？

拜托，我正在尝试这个 4 小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:28:38.253

如果你希望它是通用的，只需使用`{Binding}`

例子：

```
 <Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="130" Width="167" Name="UI" >
    <Grid >
        <ComboBox ItemsSource="{Binding ElementName=UI, Path=Items}"  Height="23" HorizontalAlignment="Left" Margin="12,12,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120" >
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <Grid Background="AliceBlue">
                        <TextBlock Text="{Binding}" Foreground="Lime"/>
                    </Grid>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window
{
    public MainWindow() 
    {
        InitializeComponent();
        Items.Add("Stack");
        Items.Add("Overflow");
    }

    private ObservableCollection<string> _items = new ObservableCollection<string>();
    public ObservableCollection<string> Items
    {
        get { return _items; }
        set { _items = value; }
    }
} 
```

结果：

![在此处输入图像描述](../Images/618cbd602e505045b35055ae2d9f1588.png)

如果您使用的是自定义对象，您可以覆盖该`ToString`方法，以便在组合框中显示您想要的内容

例子

```
public partial class MainWindow : Window 
{
    public MainWindow()
    {
        InitializeComponent();
        Items.Add(new CustomObject { Name = "Stack" });
        Items.Add(new CustomObject { Name = "Overflow" });
    }

    private ObservableCollection<CustomObject> _items = new ObservableCollection<CustomObject>();
    public ObservableCollection<CustomObject> Items
    {
        get { return _items; }
        set { _items = value; }
    }

}

public class CustomObject
{
    public string Name { get; set; }

    public override string ToString()
    {
        return Name;
    }
} 
```

xml:

和上面一样

结果：

![在此处输入图像描述](../Images/e47f8009e99d461623cb9b7949b46e21.png)

# java - 如何处理可能是也可能不是数组、可能是也可能不是基元数组的 Java 对象

> ID：14247234
> 
> 赞同：1
> 
> 时间：2013-01-09T21:56:57.080
> 
> 标签：java, arrays, casting

我正在编写一些适用于 JMX api 的代码。具体来说，我正在使用的`getAttribute`方法`MBeanServerConnection`

该方法的[javadocs](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/MBeanServerConnection.html#getAttribute%28javax.management.ObjectName,%20java.lang.String%29)`getAttribute`说它返回`Object`，但我发现取决于MBean，有时它可以返回一个`Object`，而其他时候它可以返回一个`Object[]`数组。

因为我想处理`getAttribute`一致的返回，所以我编写了以下代码：

```
Object attr = mBeanServer.getAttribute(objName, attributeName);
Object[] attributes = new Object[]{};

if (attr.getClass().isArray()) {
    attributes = (Object[])attr; // create my array by casting the return from getAttribute
} else {
    attributes = new Object[] {attr}; // create my array with just one element
}

for (int i=0; i < attributes.length; i++) {
    // deal with each attribute ...
} 
```

希望你能看到这个想法。这可能是一个幼稚的解决方案，但基本上我想处理`getAttribute`一致的返回，无论它是单个`Object`还是`Object[]`数组。

以上工作......在大多数情况下！...但我现在发现'getAttribute'返回了一个数组`long`（原语，而不是类）。正因为如此，我的演员抛出了一个`java.lang.ClassCastException: [J cannot be cast to [Ljava.lang.Object;`

我理解异常 - 它不能将数组`long`转换为数组`Object`- 但我不知道如何解决它。

就个人而言，我认为方法签名`getAttribute`很烂！返回“对象”以涵盖几乎所有内容——一个对象、一个对象数组或一组原语——对我来说就像一个警察。但它不是我的 api，我必须使用它。

感谢我如何解决这个问题的任何想法或想法？

干杯

弥敦道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:03:14.157

```
if (o instanceof int[]) {
   ...
}
else if (o instanceof boolean[]) {
   ...
}
... 
```

也许有一些更优雅的解决方案，但你不知道你想用这个属性做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:59:10.120

这个怎么样？

```
import java.lang.reflect.*;
import java.util.*;

public class ArrayTest
{ 
  public static void main(String[] args)
  {
    evaluate("Hello");
    evaluate(new Boolean[]{Boolean.TRUE, Boolean.FALSE});
    evaluate(new int[]{0, 1, 2});
    evaluate(null);
  }

  public static void evaluate(Object object)
  {
    List<String> primitiveArrayTypes = Arrays.asList(new String[] {
        "boolean[]", "byte[]", "char[]", "double[]",
        "float[]", "int[]", "long[]", "short[]"
    });

    if (object == null)
    {
      System.out.println("Null object.");
      return;
    }

    Class objClass = object.getClass();

    if (objClass.isArray())
    {
      if (primitiveArrayTypes.contains(objClass.getCanonicalName()))
      {
        System.out.println("Contents of primitive array:");
        for (int i = 0; i < Array.getLength(object); i++)
        {
          System.out.println(Array.get(object, i));
        }
      }
      else
      {
        System.out.println("Contents of Object array:");
        for (Object obj : (Object[]) object)  // cast should now always work
        {
          System.out.println(obj);
        }
      }
    }
    else
    {
      System.out.println("Not an array: " + object);
    }
    System.out.println("---");
  }
} 
```

# javascript - 为什么我的远程模式不显示 .modal-header 或 footer？

> ID：14247236
> 
> 赞同：0
> 
> 时间：2013-01-09T21:57:03.233
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, modal-dialog

这是我的模态代码：

```
<div class="modal hide fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

这是与模态相关的javascript：

```
$('#myModal').on('hidden', function () {
    $(this).removeData('modal');
});

$("a[data-toggle=modal]").click(function (e) {
    lv_target = $(this).attr('data-target')
    lv_url = $(this).attr('href')
    $(lv_target).load(lv_url)}); 
```

这是我的链接代码：`<a href="http://localhost:3000/hints/found_sentences?word=创造" class="old_hint" data-remote="true" data-target="#myModal" data-toggle="modal">造&lt;/a>`

当我单击链接时，它会显示*所有*div 被替换，而不仅仅是`"modal-body"`div。也就是说，`Modal header`不会出现在远程内容的上方。

这是一个[jsfiddle](http://jsfiddle.net/webmagnets/W3TLJ/)。忽略加载的内容。请注意，modal-header 和 modal-footer 内容没有显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:08:58.970

您替换了整个模态的内容，而不是模态的正文。

```
$(lv_target).find('.modal-body').load(lv_url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:15:54.857

你在这里：http: [//jsfiddle.net/kulldox/W3TLJ/3/](http://jsfiddle.net/kulldox/W3TLJ/3/)

问题出在这里：

```
<a href="/favicon.png" class="old_hint" data-target="#myModal" data-toggle="modal">你&lt;/a> 
```

您应该删除触发器元素中的 'data-remote="true"'。首先，它不是布尔属性。其次，文档说明您应该使用 href 或 data-remote 属性，而不是同时使用两者。

您也错过了点击的结束“}”。

# java - 如何有条件地将图像附加到表格中的单元格值。它在 JSP 中，我使用表格的显示标签

> ID：14247238
> 
> 赞同：1
> 
> 时间：2013-01-09T21:57:05.380
> 
> 标签：java, jsp, displaytag

我有一个使用 DisplayTags 在 JSP 中显示的数据表。表中的一列是“优先级”列。如果优先级为 1，我必须能够在其旁边显示红灯。有没有直接的方法可以做到这一点？

```
<display:column headerClass="tableHead" title="Priority" property="priority" sortable="false" /> 
```

我需要能够在数据值为“1”的所有单元格旁边显示图像。

更新：即使它没有给出异常，我仍然看不到图像。

```
<display:column headerClass="tableHead" title="Priority" property="priority" sortable="false" ><c:if test="${dispatchresults1.priority eq 1}"><img src="images/flashinglight4.gif"/></c:if> </display:column> 
```

这是我桌子的顶部。

```
 <display:table htmlId="dispatchtable1" id="dispatchresults1" name="packedNotDispatchedlist" pagesize="20" style="width:100%;text-align:left;font-size:10px" class="thinBorder" requestURI=""   export="true" > 
```

**更新：这最终对我有用。**

```
<display:column headerClass="tableHead" title="Priority"  sortable="false" > 
<c:choose>
<c:when test="${dispatchresults1.priority eq 1}"><img src="images/flashinglight4.gif"/>
</c:when>
<c:otherwise >${dispatchresults1.priority}
</c:otherwise>
</c:choose>             
</display:column> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:05:28.830

```
<display:column headerClass="tableHead" title="Priority" sortable="false">
    <c:if test="${tableId.priority == 1}"><img src="..."/></c:if>
</display:column> 
```

# winlogon - winlogon，用户名和密码

> ID：14247245
> 
> 赞同：2
> 
> 时间：2013-01-09T21:57:40.037
> 
> 标签：winlogon

我想扩展 winlogon 对话框以包含一个附加按钮，该按钮将在按下按钮时将用户名和密码写入注册表。简单地说，当用户按下按钮启用自动登录时，注册表会更新以将其标记为自动登录系统并使用这些参数（从两个文本框和域下拉列表中收集）

所以我的问题是...... winlogon 应用程序本身是否处理用户名、密码和域控制，然后调用 gina.dll 传递文本框的值并下拉，或者 winlogon 是否调用 gina.dll 和gina.dll 显示输入密码和密码的对话框？

这仅适用于 windows xp - 并且在非常安全的环境中。

谢谢

# excel - Microsoft Open XML 未保存的文件

> ID：14247247
> 
> 赞同：0
> 
> 时间：2013-01-09T21:57:48.030
> 
> 标签：excel, openxml, vba

是否有可能通过 VBA 获得当前未保存工作簿的 Open XML 定义（不保存）？

卡洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:24:33.077

为了玩弄`xml`文件，`Excel`我一直在使用免费工具`Custom UI Editor for Microsoft Office`。我一直在使用它来自定义 Excel 中的功能区。该工具看起来非常简单：

![在此处输入图像描述](../Images/37a667571d495aae95d5bb956f472d26.png)

自定义示例如下所示：

![在此处输入图像描述](../Images/b257112c57c5ab4b5e402e405795b52d.png)

很确定我从这里下载了该工具：http: [//openxmldeveloper.org/](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/08/07/7293.aspx)

# c - 给定一个随机起始元素，精确地迭代圆形二维数组的所有元素

> ID：14247250
> 
> 赞同：0
> 
> 时间：2013-01-09T21:58:10.183
> 
> 标签：c, multidimensional-array, iteration

`A[n,m]`我们得到一个包含`n`行和列的二维数组，以及`m`随机选择的该数组的一个元素`R`。将数组视为循环的，因为当我们访问`A[n-1, m-1]`下一个元素时，我们将访问`A[0, 0]`.

从 element 开始`R`，我们希望只访问每个元素一次并`foo()`在移动到下一个元素之前调用函数。

以下是我的第一个实现，但有一个错误。错误是，如果我们从 和 之间的某处开始，`x`我们将不会访问该列中的元素。`0``n-1``0``x-1`

```
// Init - pretend rand() always returns valid index in range
curr_row = rand();
curr_col = rand();

// Look at each column once
for (int i = 0; i < m; ++i) 
{
  for (; curr_row < n; ++curr_row) 
  {
    foo(A[curr_row][curr_col]);
  }
  curr_row = 0;
  curr_col = (curr_col + 1) % m;
} 
```

为了满足上述要求，进行这种遍历的干净方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:11:19.647

对 c 很生疏，但应该是一样的：

```
// Init - pretend rand() always returns valid index in range
curr_row = rand();
curr_col = rand();

//first row
for(int j=curr_col;j<m;++j)
  foo(A[curr_row][j]);

//rest of the rows
for(int i=(curr_row+1)%n;i!=curr_row;i=(i+1)%n)
  for(int j=0;j<m;++j)
      foo(A[i][j]);

//first row , going over missed cells
for(int j=0;j<curr_col;++j)
  foo(A[curr_row][j]); 
```

如果您非常关心性能，您还可以划分第二个循环，这样根本就不会出现“%”。

另一种选择，因为 C 在一个简单的数组中有 2d 数组：

```
// Init - pretend rand() always returns valid index in range
curr_row = rand();
curr_col = rand();

int start=curr_row*m+curr_col;
int maxCell=n*m;
int end=(start-1)%maxCell;    

for(int i=start;i!=end;i=(i+1)%maxCell)
  foo(A[i]);
foo(A[end]); 
```

可能会有一个小小的数学错误，但这个想法是可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:16:54.733

只需移动到下一个索引，并检查您是否回到起点，在这种情况下，停止：

```
// should be something that guarantees in-range indices
curr_row = rand();
curr_col = rand();
int i = curr_row, j = curr_col;
do {
    foo(A[i][j]);
    ++j;
    if (j == n) {
        j = 0;
        ++i;
        if (i == m) {
            i = 0;
        }
    }
}while(i != curr_row || j != curr_col); 
```

这不是你的实现所做的，而是问题标题所要求的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T22:15:18.067

`A[curr_row, curr_col]`不是用于访问多维数组成员的语法*；*相反，你想要`A[curr_row][curr_col]`，假设数组被正确声明。`A[curr_row, curr_col]`将调用逗号运算符，它有效地计算第一个值，然后将其丢弃并计算第二个值，然后用该值索引数组。

# c# - 2 个不同的变量指向 1 个地址

> ID：14247251
> 
> 赞同：0
> 
> 时间：2013-01-09T21:58:11.087
> 
> 标签：c#, variables, memory-address

我不是那么伟大的程序员，但我正在尝试使用 C# 制作自定义 Minecraft 启动器。Soo 我有一个用于加载和保存选项的类 - 效果很好 - 但现在我有一个问题，即 1 个类中的 2 个变量以某种方式指向 1 个地址。我可以从 3 个不同的包中进行选择，每个包都有单独的选项。我可以加载和保存 RAM、调试模式、版本选择模式和自定义版本。但是MODE和VERSION指向同一个地址，所以如果我改变一个，另一个也会改变，但不知道为什么，你能帮我吗？

保存选项时会发生什么

```
 //Setting stream to beggining
        optstr.Position = 0;
        //Loading options file from the disc
        opt = formatter.Deserialize(optstr) as ObjOptions;
        //Setting version
        opt.version[modpack] = comboBox1.SelectedIndex;
        //Setting mode
        if (radioButton1.Checked) opt.mode[modpack] = 0;
        else if (radioButton2.Checked) opt.mode[modpack] = 1;
        else opt.mode[modpack] = 2;
        //Setting debug
        opt.debug[modpack] = debug.Checked;
        //Setting memory
        opt.memory[modpack] = Convert.ToInt16(ram.Text);
        //Setting stream position
        optstr.Position = 0;
        //Writing to file
        formatter.Serialize(optstr, opt);
        //Closing options window
        this.Dispose(); 
```

ObjOptions 类

```
[Serializable]
class ObjOptions
{
    public List<int> version;
    public List<int> mode;
    public List<int> memory;
    public List<bool> debug;
    public ObjOptions(List<int> version, List<int> mode, List<int> memory, List<bool> debug)
    {
        this.version = version;
        this.mode = mode;
        this.memory = memory;
        this.debug = debug;
    }
    public ObjOptions()
    {
        List<int> l1 = new List<int>();
        for (int i = 0; i < 3; i++)
            l1.Add(0);
        List<int> l2 = new List<int>();
        for (int i = 0; i < 3; i++)
            l2.Add(0);
        List<int> l3 = new List<int>();
        for (int i = 0; i < 3; i++)
            l3.Add(1024);
        List<bool> l4 = new List<bool>();
        for (int i = 0; i < 3; i++)
            l4.Add(false);
        this.version = l1;
        this.mode = l2;
        this.memory = l3;
        this.debug = l4;
    }
} 
```

如果您发现任何感觉可以做得更好，但服务方式相同的事情，请不要告诉我。我只想知道为什么**opt.mode**和**opt.version**链接在一起

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:00:10.147

因为...

```
this.version = l1;
this.mode = l1; 
```

它们都将相同的列表对象引用分配给`version`和`mode`字段。大概你的意思是分配`hovno`给`this.mode`而不是`l1`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:00:53.280

答案很简单：

```
this.version = l1;
this.mode = l1; 
```

您将两者设置`version`为`mode`同一个列表。你应该做更多类似的事情：

```
this.mode = new List<int>(l1); 
```

# python - 阅读网站时出现 Django/Python 编码错误

> ID：14247254
> 
> 赞同：2
> 
> 时间：2013-01-09T21:58:29.013
> 
> 标签：python, encoding, beautifulsoup, decoding

我想在一个网站上阅读几页的内容，对于少数人来说，我的代码可以正常工作，但对于其他人则不行。出现奇怪的字符：Å,Ä... 等等。

```
articles = ""
url = "http://www.someurl.com"
sock = urllib.urlopen(url)

content = sock.read()
sock.close()
soup = BeautifulSoup(content)

div = soup.find("div", class_="col-d")
ps = div.find_all("p")
for p in ps:
    print type(p.get_text())
    print type(p.get_text().encode('utf-8'))
    print p.get_text() 
```

输出是：

```
<type 'unicode'><type 'str'>rÃ³Å¼ni siÄ™ znaczÄ…co. DziÅ›, zgodnie z danymi Lionâ€™s House i Home Brokera, przeciÄ™tnego  zapÅ‚aciÄ‡ niespeÅ‚na 2,1 tys. zÅ‚ miesiÄ™cznie. Gdyby takÄ… samÄ… nieruchomoÅ›Ä‡ kupiÄ‡ na kredyt, to w pierwszym roku czÄ™Å›Ä‡ ods 
```

**你知道任何解决方案来完成这项工作吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:48:50.293

这是一种使用[Requests](http://docs.python-requests.org/en/latest/)库（和一个随机的波兰网站）的方法。

```
import requests
from bs4 import BeautifulSoup

r = requests.get("http://pl.bab.la/slownik/polski-niemiecki/zgodnie-z")

soup = BeautifulSoup(r.text, fromEncoding="UTF-8")
soup.find(id="showMoreCSDiv").text 
```

此代码查找此 HTML：

```
<div id="showMoreCSDiv"><a class="btn" id="showMoreCS" href="javascript:babGetMoreCS(20,'zgodnie z');">więcej</a></div> 
```

它返回这个：

```
więcej 
```

# python - 每 15 秒打开一个具有不同 IP 的站点

> ID：14247257
> 
> 赞同：-2
> 
> 时间：2013-01-09T21:58:40.853
> 
> 标签：python, python-2.7

对不起，如果我的英语不好。我想编写一个可以每 15 秒打开一次站点的程序。但是用不同的IP来做。这意味着获取一个 IP 列表，每 15 秒打开一个网站。你是怎么做到的？我应该使用什么模块？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:34:16.500

如果您要问如何确保每 15 秒触发一次连接，即使每个连接可能需要几秒钟（甚至可能超过 15 秒钟），这很容易。由于您每 15 秒只建立一个连接，因此没有理由不为每个连接生成一个线程。

所以：

```
def connectToSiteFunction(ip):
    # your code to bind ip (if it's a source) or connect to it (if it's a dst) 
    # and do your thing here

def connectAndWait():
    for ip in ips:
        t = threading.Thread(target=connectToSiteFunction, args=(ip,))
        yield t
        t.start()
        os.sleep(15)

threads = [t for t in connectAndWait()]
for t in threads:
    t.join() 
```

如果您在谈论目标 IP，并且想知道如何为每个请求使用不同的 IP……那么，您通常只需修改 URL。像这样的东西：

```
def connectToSiteFunction(ip):
    url = 'http://{}/path/to/page.html'.format(ip)
    # now open url as normal 
```

如果您询问如何将源地址与您选择的 URL 下载库绑定，您必须告诉我们哪个库，但是：该库将有一个参数，或者它可以让您指定一个`socket`工厂，否则将是不可能的（除非你想`socket.socket`用自己的工厂进行猴子补丁）。如果它允许您指定一个`socket`工厂，那么这样做的方法是：

```
def make_socket_factory(srcip):
    def socket_factory():
        s = socket.socket()
        s.bind((srcip, 0))
        return s
    return socket_factory 
```

`make_socket_factory(srcip)`然后作为工厂传入。

如果您首先想知道如何下载 URL……有很多方法可以做到这一点，从 stdlib`urllib2`到`requests`和`pycurl`to `twisted`，并且已经有很多关于 SO（和其他地方）比较和对比它们的答案。

# php - 这个 PHP 代码 SQL 是否易受攻击？

> ID：14247260
> 
> 赞同：0
> 
> 时间：2013-01-09T21:58:50.807
> 
> 标签：php, mysql, sql

所以变量 ID 是从 URL 中获取的并被剥离以防止任何东西通过。

然后我们有一个 IF 语句来检查 $ok 是否是一个数字，如果是，它现在被引用为 $id 以在下面的 SQL 查询中使用。

在编码以防止访问时，我应该采取哪些其他预防措施？

```
$ok=mysql_real_escape_string(htmlspecialchars(stripslashes(trim(strip_tags(strtoupper($_GET['id']))))));
if(is_numeric($ok)){$id=$ok;}
$sql=mysql_query("SELECT * FROM games WHERE ID = '$id'");
<...more code here...> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T22:06:21.307

防止 SQL 注入的一个好方法是使用准备好的语句： http: [//php.net/manual/de/mysqli.quickstart.prepared-statements.php](http://php.net/manual/de/mysqli.quickstart.prepared-statements.php)

例如：

```
$mysqli = new mysqli("example.com", "user", "password", "database");

// Note the '?', it's a placeholder
$stmt = $mysqli->prepare("SELECT * FROM games WHERE ID = ?"); 

// Providing an actual value for the placeholder
$stmt->bind_param("i", $_GET['id']);
$stmt->execute() 
```

这是为了防止 SQL 注入，因为该语句在没有不安全数据的情况下发送到数据库，然后在额外的步骤中提供这些数据并由数据库安全地插入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T22:08:40.480

Mysql 已被弃用，不再受支持/维护。运行 mysql_ 函数容易受到 SQL 注入等攻击 如果你习惯了 mysql，那么很容易过渡到 mysqli。您也可以使用 PDO。

mysqli 中的 i 表示“改进”。它得到了改进，因为它支持几个新的东西：

**两个接口： http:** [//php.net/manual/en/mysqli.quickstart.dual-interface.php](http://php.net/manual/en/mysqli.quickstart.dual-interface.php)

1）程序（您可能习惯于使用mysql）

```
$mysqli = mysqli_connect("example.com", "user", "password", "database");
   if (mysqli_connect_errno($mysqli)) {
   echo "Failed to connect to MySQL: " . mysqli_connect_error();
} 
```

2) 面向对象，其中对象具有可调用的方法和属性。

（这里的例子……“ *new* ”mysqli 正在创建一个新的 mysqli 对象。这个特定的对象有一个可以调用的“connect_errno”方法。）

```
$mysqli = new mysqli("example.com", "user", "password", "database");
  if ($mysqli->connect_errno) {
  echo "Failed to connect to MySQL: " . $mysqli->connect_error;
} 
```

**准备好的报表： http:** [//php.net/manual/en/mysqli.quickstart.prepared-statements.php](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)

**存储过程： http:** [//php.net/manual/en/mysqli.quickstart.stored-procedures.php](http://php.net/manual/en/mysqli.quickstart.stored-procedures.php)

**多条语句： http:** [//php.net/manual/en/mysqli.quickstart.multiple-statement.php](http://php.net/manual/en/mysqli.quickstart.multiple-statement.php)

以及其他几个改进的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T22:03:49.563

如果您根本不想担心 SQL 注入，请**使用**准备好的语句。

在 PHP 中使用 mysqli API 和准备好的语句，您的代码可能类似于以下示例。请注意，我使用的是程序样式。面向对象的样式也可用。

```
<?php
$link = mysqli_connect("localhost", "user", "password", "dbname");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

// taken from your example
$id = trim(strip_tags(strtoupper($_GET['id'])));

if(!is_numeric($id)) {
    die('BAD id');
}

/* create a prepared statement */
if ($stmt = mysqli_prepare($link, "SELECT * FROM games WHERE ID =?")) {

    /* bind parameters for markers */
    mysqli_stmt_bind_param($stmt, "s", $id);

    /* execute query */
    $result = mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $col1, $col2, ...);

   /* fetch values */
   while (mysqli_stmt_fetch($stmt)) {
       printf("%s %s\n", $col1, $col2, ...);
   }

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link); 
```

准备好的语句将`$id`示例中的查询数据与 SQL 语法分开。所以数据不能被解析为 SQL 语法。这是首选方式。

如果你想在 PHP 和 MySQL 中使用准备好的语句，你必须使用 mysqli api 或 PDO_MySQL api。无论如何，您都应该更改为其中之一，因为 PHP 的“旧的”mysql api 已被弃用并且不再开发。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T22:11:33.970

是的。

如果您没有绑定参数，那么您对 ​​SQL 注入持开放态度。

如果您正在使用不受信任的数据构建可执行的 SQL 代码，那么您对 ​​SQL 注入持开放态度。

使用 PDO 或 mysqli 是不够的。您仍然必须使用绑定参数。如果您将您的数据传递`SELECT * FROM games WHERE ID = '$id'`给 mysqli 或 PDO，则您对 SQL 注入持开放态度，因为您正在从不受信任的数据构建代码。您必须为该数据使用占位符和绑定参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T22:20:57.113

*理想*的答案是您应该使用[PDO](http://php.net/manual/en/pdo.prepared-statements.php)（首选）或[`mysqli_`*](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)中的准备好的语句。自 PHP 5.5 起，这些`mysql_`函数已被弃用。在 2013 年，你不应该编写这样的代码。

如果你被 mysql_ 函数“卡住”（例如，你有一个巨大的遗留代码库，并且有太多的费用或风险从`mysql_`to`mysqli_`或 PDO 更改），那么你就在正确的轨道上。您不需要使用您在输入上执行的所有功能。事实上，下面的内容足以防止 SQL 注入攻击，因为我在 SQL 字符串中使用`mysql_real_escape_string` *并引用了参数。*

```
$id = mysql_real_escape_string($_GET['id']);
$sql = mysql_query("SELECT * FROM games WHERE ID = '$id'"); 
```

# c++ - 对象没有被构造

> ID：14247261
> 
> 赞同：-3
> 
> 时间：2013-01-09T21:58:52.690
> 
> 标签：c++, object, operator-overloading, construction

我注意到这种奇怪的行为/错误，其中在初始化实际对象*之前调用了类方法。*我有一个包装对象，它有`operator->()`方法。现在，当我使用该`operator->()`方法将对象作为构造函数中的构造函数参数传递给另一个对象时，实际的包装器对象不会被构造，而只是运行该`operator->()`方法。

由于实际的代码示例非常复杂并且依赖于许多其他的东西，我将只展示可能无法正确编译的 C++ 代码片段：

```
template<typename T>
class wrapper_object_type
{
public:
    wrapper_object_type() {/*does not run*/}
    T* operator->() {/*does run*/}
};
class bad_behaviour
{
public:
    bad_behaviour() : another_object(wrapper_object->t_object) 
    {/*crashes(0xccc access violation*/}
}; 
```

那么标准中是否定义了一些可能允许这种行为的东西？或者更准确地说，是否有一些隐式构造等可以绕过默认构造？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:13:08.313

可能您`wrapper_object`在初始化之前使用它。成员变量的构造顺序与它们在类中声明的顺序相同，因此请确保`wrapper_object`在声明之前`another_object`。

（假设`wrapper_object`和`another_object`是 的成员变量`bad_behaviour`，但没有更合理的代码示例很难说。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:03:18.313

好吧，我确实做到了；我将对象从堆栈切换到堆，并通过`new`关键字而不是在初始化列表中显式初始化它们。正如我所想的那样，这并没有重现奇怪的行为，所以它按预期工作。我现在在想的是，它实际上可能是一个编译器错误，因为我通过初始化列表执行此操作的方式类似于我解决问题的方式。唯一改变的是我之前没有在堆中分配它们。

我还尝试提供重现该错误的工作代码，但该错误未显示在那里。这可能是因为发现错误的实际代码在很大程度上依赖于模板类型和包装对象。当对象在堆中分配时，它现在可以工作，错误不在代码中，而是在编译器中。

# java - Git在哈德逊返回null

> ID：14247265
> 
> 赞同：4
> 
> 时间：2013-01-09T21:59:20.993
> 
> 标签：java, git, continuous-integration, hudson, fetch

我正在使用带有 hudson 的 git 来构建一些测试的项目。我已经完成了所有的 hudson 配置（至少我认为我做了）并且我下载了 git for windows。该存储库位于我们办公室的 linux 机器上。当我在这里构建测试是我得到的错误：

```
Started by user anonymous
Checkout:workspace / C:\Users\username\.hudson\jobs\GitTest\workspace - hudson.remoting.LocalChannel@35e5abf2
Using strategy: Default
Checkout:test2 / C:\Users\username\git\test2 - hudson.remoting.LocalChannel@35e5abf2
Fetching changes from the remote Git repository
Fetching upstream changes from user@gitrepo:/var/gitrepo/test
ERROR: Problem fetching from origin / origin - could be unavailable. Continuing anyway
ERROR:  (Underlying report) : Error performing command: C:\Program Files (x86)\Git\cmd\git.exe fetch -t user@gitrepo:/var/gitrepo/test +refs/heads/master:refs/remotes/origin/master
null
ERROR: Could not fetch from any repository
FATAL: Could not fetch from any repository
hudson.plugins.git.GitException: Could not fetch from any repository
at hudson.plugins.git.GitSCM$3.invoke(GitSCM.java:931)
at hudson.plugins.git.GitSCM$3.invoke(GitSCM.java:889)
at hudson.FilePath.act(FilePath.java:791)
at hudson.FilePath.act(FilePath.java:773)
at hudson.plugins.git.GitSCM.gerRevisionToBuild(GitSCM.java:889)
at hudson.plugins.git.GitSCM.checkout(GitSCM.java:668)
at hudson.model.AbstractProject.checkout(AbstractProject.java:1515)
at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:521)
at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:428)
at hudson.model.Run.run(Run.java:1390)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:40)
at hudson.model.ResourceController.execute(ResourceController.java:81)
at hudson.model.Executor.run(Executor.java:137) 
```

由于某种原因，fetch 命令返回 null。当我在命令行上尝试该命令时，它只是挂起而没有输出，直到我不得不杀死它。我已经研究了一段时间，但找不到任何答案。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:02:21.213

我发生了这样的事情，原来是指纹（如果你的 git 使用 RSA 验证）在我们第一次查询 repo> 时没有被自动接受。

我以 hudson 用户的身份通过手动查询 repo 解决了这个问题：

```
git ls-remote -h git@yourepo.git HEAD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T04:24:00.813

我可以通过添加 windows 环境变量来解决这个问题。

```
Name: HOME
Value: $USERPROFILE 
```

有关更多信息，请访问以下 URL， [http ://element34.ca/blog/jenkins-remote-windows-nodes-and-private-github-repos](http://element34.ca/blog/jenkins-remote-windows-nodes-and-private-github-repos)

# command-line - 使用 .bat 脚本包装应用程序

> ID：14247267
> 
> 赞同：1
> 
> 时间：2013-01-09T21:59:24.720
> 
> 标签：command-line, batch-file

我最近决定开始使用 Google 的命令行 JavaScript 编译器 (Closure Compiler) 来缩小我的 Web 应用程序中的 JavaScript。不幸的是，编译器是用 Java 编写的，所以我必须输入使用编译器的命令有点麻烦：

```
java -jar compiler.jar --js hello.js --js_output_file hello-compiled.js 
```

对我来说，将它包装在 .bat 文件中的最简单方法是什么，这将允许我简单地键入`closure hello.js hello-compiled.js`，同时仍然允许我使用闭包的其他命令行标志，例如`--warning-level`和`--help`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:47:44.707

```
:Start
   @echo off
   if "%1"=="" Echo Error - input and output parameters were not specified.&goto End
   if "%2"=="" Echo Error - output parameter was not specified.&goto End
   if not exist %1 Echo Error - input file does not exist.&goto End
   set infile=%1
   set outfile=%2
   set "params="
:Loop
   if "%3"=="" goto Continue
   set params=%params% %3
   shift
   goto Loop
:Continue
   java -jar compiler.jar --js %infile% --js_output_file %outfile% %params%
   set "infile="
   set "outfile="
   set "params="
:End 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:56:31.913

我不知道您希望它的自动化程度如何，但这会提示您输入脚本、编译的输出文件以及是否需要任何额外的参数。

如果您想要更多选项，可轻松编辑。

```
@echo off
set /p script=Script file:
set /p compiled=Compiled script:
set /p params=Enter any extra params (leave blank if none):
if defined params (
java -jar compiler.jar --js %script% --js_output_file %compiled% %params%
) else (
java -jar compiler.jar --js %script% --js_output_file %compiled%
)
echo Done
pause >nul 
```

# asp.net - 数据库的 ASP.NET 错误

> ID：14247269
> 
> 赞同：4
> 
> 时间：2013-01-09T21:59:27.487
> 
> 标签：asp.net, sql, visual-studio-2012

我一直在学习 ASP.NET 并构建了一个小的客户门户。我使用了内置的 CreateUserWizard。我想查看 ASPNETDB.MDF 文件的内部，看看它是如何存储用户的，并可能添加一些我自己的行。我在 SQL Server Management Studio 中打开了该文件并查看了该文件。我没有保存就关闭了它。

现在，当我尝试运行该程序时，我收到了这个新错误：

无法打开数据库“C:\PROJECTS\PORTAL\PORTAL\APP_DATA\ASPNETDB.MDF”，因为它是版本 706。此服务器支持版本 662 及更早版本。不支持降级路径。

所以我假设在 SQL Server 中打开项目，它会将版本升级到 706，我该如何删除这个数据库并创建一个新数据库，或者将数据库的版本更改为支持版本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:11:34.937

以下博客条目将对您有所帮助

[http://conceptdev.blogspot.com/2009/04/mdf-cannot-be-opened-because-it-is.html](http://conceptdev.blogspot.com/2009/04/mdf-cannot-be-opened-because-it-is.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:32:54.220

将其附加到 SQL Server 2012 后，数据库立即升级到版本 706。正如错误消息所示，无法将文件降级回版本 662 (SQL Server 2008 R2)。

您可以运行在 Visual Studio 文件夹中找到的脚本 -

```
[drive:]\%windir%\Microsoft.NET\Framework\version\asp_regsql. 
```

它将显示一个 UI 供您选择要在其上安装新副本的服务器。[这是一篇关于它的 MSDN 文章](http://msdn.microsoft.com/en-US/library/ms229862%28v=vs.100%29.aspx)。

# testing - 如何为计算引擎开发回归测试

> ID：14247271
> 
> 赞同：0
> 
> 时间：2013-01-09T21:59:40.307
> 
> 标签：testing, integration-testing, regression-testing

我在一个开发财务信息网络应用程序的团队中。我们还没有为它编写很多自动化测试，所以我们决定将回归测试添加到我们程序最关键的部分。不过，我对自动化测试非常陌生，所以我不完全确定应该如何编写测试。

这篇文章很长，所以这里有一个 tl;dr 问题：如何编写回归测试来检查某些计算是否有效？不过，我不只是想测试计算 - 我还想知道计算所依赖的任何组件是否会使其输入中断。我不需要知道哪个组件特别坏了，只是有些东西不起作用。我应该使用什么方法？

这是我们的情况：我们使用分层架构开发应用程序，如下所示：

```
Views
  |
  V
Logic Managers <--> Financial Calculation Engines
  |
  V
Data Accessors
  |
  V
Database 
```

我们已经确定计算引擎是我们程序中最需要回归测试套件的部分。这些组件包含我们用来将原始财务数据处理成有用结果的计算和算法。他们相应的经理通过调用他们的公共方法来使用它们，这些方法接受原始财务数据作为参数。当引擎方法返回时，它们会发回一个包含已处理财务结果的对象。与此同时，管理人员从数据访问者那里获取原始财务数据，而后者又从数据库中获取数据。

我们决定一旦财务计算“中断”就想知道，这样我们就知道该错误存在于自上次运行测试以来已触及的程序的任何部分中。这将让我们使用持续测试来保护我们不让引擎产生错误的结果并且不知道在哪里寻找。

当我们思考这意味着什么时，我们意识到为每个引擎添加一个单元测试是不够的。例如，假设对数据访问器的错误更改意味着它们开始提取错误的数据。然后，这些数据将通过管理器发送到引擎，这将产生错误的结果。但是，引擎的算法本身仍然可以完美运行，因此单元测试仍然可以通过。这意味着当我们注意到生成了错误的数字时，我们将无法知道该错误是何时引入的，从而使得追踪和修复变得更加困难。

相反，我们希望进行回归测试，只要出现任何会导致引擎输出的最终结果不正确的错误，即使问题是错误的数据被发送到引擎和并不是说引擎本身有问题。当这些测试失败时，它们不会告诉我们问题出在哪里，但如果我们持续测试，我们会在签入错误后立即知道，并进行少量更改以查看以修复它。

所以这就是我们想要做的。不幸的是，我们不知道如何创建这些测试。哪些方法或模式可用于编写这些类型的回归测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:23:04.660

**只是一个提示：您应该每次使用相同的输入**检查财务计算引擎的每个部分，并且每次返回的对象都应该**相同**。使用相同的逻辑分别测试数据访问器：相同的输入，相同的输出。
为此，您需要[模拟](http://en.wikipedia.org/wiki/Mock_object)系统的某些部分（例如，模拟数据访问器以始终返回相同的数据集）。

对每个部分进行单独的单元测试也可以更精确地定位错误。

几个链接来了解这个想法：
[http ://www.ibm.com/developerworks/library/j-mocktest/index.html](http://www.ibm.com/developerworks/library/j-mocktest/index.html)
[http://www.slideshare.net/joewilson123/unit-testing-and-mocking](http://www.slideshare.net/joewilson123/unit-testing-and-mocking)

There are a lot of mocking frameworks around that can help you code the tests, like [Mockito](http://code.google.com/p/mockito/wiki/FeaturesAndMotivations) for Java projects.

# c++ - 在未初始化的对象上使用 std::bind 是否安全？

> ID：14247272
> 
> 赞同：2
> 
> 时间：2013-01-09T21:59:41.510
> 
> 标签：c++, bind

由于我无法正确设计我的课程，我达到了需要这样的地步：

```
struct A
{
   A( function< void(string&) cb > ): callback(cb) {}
   function< void(string&) > callback;

   template <std::size_t T>
   void func( string& str) { ... }
}

int main(){
vector<A> items = {
   A( bind( &A::func<1>, items[0], _1) ),
   A( bind( &A::func<2>, items[1], _1) ),
   ...
} 
```

这可以安全使用吗？如果没有，是否有替代方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T22:06:11.177

这当然不安全。将在初始化`items[0]`之前进行评估。`items`

在这里做的正确的事情可能是只使用一个 lambda，比如

```
vector<A> items = {
    A( [&items](string& s){ items[0].func(s); } ),
    A( [&items](string& s){ items[1].func(s); } ),
    ...
} 
```

这仅在初始化期间获取对的引用，然后仅在实际调用回调时才`items`拉出。`items[0]`

或者，您可以更改回调以`A&`作为参数吗？如果您的回调类型是，`std::function<void(A&, string&)>`那么您可以`&A::func<1>`作为回调传递，它将起作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T22:05:56.677

您正在使用`[]`运算符在构建之前访问`vector`它。这不安全。

我认为您将不得不在中创建未完全初始化的项目，`vector`然后再设置绑定者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:37:23.740

中的代码`main`创建一个固定大小的向量。如果这确实是必需的，请使用数组或，并将元素的**地址**`std::array`传递给调用：**`bind`**

 **```
A items[] = {
   A( bind( &A::func<1>, &items[0], _1) ),
   A( bind( &A::func<2>, &items[1], _1) ),
   ...
}; 
```

返回的函数对象`bind`知道如何绑定一个指向对象的指针和一个成员函数。**

# javascript - 等待用户输入并验证不起作用

> ID：14247277
> 
> 赞同：0
> 
> 时间：2013-01-09T21:59:48.993
> 
> 标签：javascript, jquery

我正在尝试创建一个检查输入字段有效性的函数，但我遇到了一个问题，即如果我输入得太快然后点击选项卡，它不会触发事件并且该字段未被验证. 我尝试了一些 keyup、keydown、blur、focus 和 focusout 的组合，但没有任何效果。

我以前使用过模糊，但模糊的问题在于，在他们的电子邮件地址的最后输入中，它不会触发，因为他们不应该远离电子邮件并模糊框。

这是我目前正在使用的代码。它在我等待时有效，但如果我输入“John”然后立即点击选项卡，它不会验证它。

```
$(function()
{
    var timer;
    // First name
    $('input[name="firstName"]').on('keydown',function(event)
    {
            clearTimeout(timer);
            timer = setTimeout(function() 
            {
                validate(/^[A-Za-z]*$/, 'firstName', 'firstName')
            }, 800);
    });
    // Last name
    $('input[name="lastName"]').on('keydown',function(event){
            clearTimeout(timer);
            timer = setTimeout(function() 
            {
                validate(/^[A-Za-z]*$/, 'lastName', 'lastName')]
            }, 800);
    });
    // Email
    $('input[name="email"]').on('keydown',function(event){
            clearTimeout(timer);
            timer = setTimeout(function() 
            {
                validate(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/, 'email', 'email')
            }, 800);
    });
} 
```

关于我应该做什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:05:04.500

在模糊时立即运行该功能。一种方法是将 0 与 setTimeout 一起使用，更好的方法是将其分解为函数调用并调用该函数。

```
$('input[name="firstName"]').on('keydown blur',function(event)
{
        clearTimeout(timer);
        timer = setTimeout(function() 
        {
            validate(/^[A-Za-z]*$/, 'firstName', 'firstName')
        }, event.type==="blur" ? 0 : 800 );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:13:39.897

其他人已经给出了问题的解决方案，但是有一个轻微的重构可以让你自己更轻松。由于看起来每个事件处理程序基本上都在做同样的事情，因此您可以分离验证并简单地为表单提供一个事件处理程序，该处理程序委托给所有子输入，从而为您提供更多性能（更少的事件处理程序）。

```
var validations = {
  firstName: /^[A-Za-z]*$/,
  lastName: /^[A-Za-z]*$/, 
  email: ...
};

$('form').on('keypress input change blur', 'input[name]', function(event) {
  clearTimeout(timer);
  timer = setTimeout(function() {
    key = e.name;
    validate(validations[key], key, key);
  }, event.type in ['blur', 'input', 'change'] ? 0 : 800 );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:01:58.767

您也可以验证`blur`事件的字段。当字段失去焦点时会触发模糊，例如当您切换到下一个字段时。

也许像：

```
$('input[name="firstName"]').on('keydown',function(event)
{
        clearTimeout(timer);
        timer = setTimeout(function() 
        {
            validate(/^[A-Za-z]*$/, 'firstName', 'firstName')
        }, 800);
}).on('blur',function(event)
{
        clearTimeout(timer);
        validate(/^[A-Za-z]*$/, 'firstName', 'firstName');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T22:04:34.343

使用`keyup`or`keypress`代替`keydown`. `keydown`在输入实际到达控件之前触发，因此该值尚未更新。 `keyup`并`keypress`在输入值后触发。

更好的是，绑定到`input`并且`change`也一样。这将涵盖用户通过复制和粘贴或拖放输入输入时的基础。

```
$('input[name="firstName"]').on('keypress input change', function(event)
{
    validate(/^[A-Za-z]*$/, 'firstName', 'firstName')
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T22:08:57.407

像您一直在做的那样在模糊上验证，然后在表单提交上再次验证以确保您获得最后一个字段以及由于太快而没有验证的任何字段。由于您是在客户端进行的，因此处理时间很短。

# c# - 在文本框中显示来自查询的数据

> ID：14247278
> 
> 赞同：1
> 
> 时间：2013-01-09T21:59:50.947
> 
> 标签：c#

这是我想要选择 max(pid) 并希望将其显示到文本框中的整个代码

```
public PatientRegistration()
    {
        InitializeComponent();
        string connectionstring = "DATABASE=hmanagmentsystem;UID=root;PASSWORD=;SERVER=localhost";
        con = new MySqlConnection(connectionstring);
        con.Open();
    }

  private void PatientRegistration_Load(object sender, EventArgs e)
    {

        MySqlCommand command = new MySqlCommand("select max(pid) from patientreg",con);
        txtpatientid.Text = command.ToString();
        con.Close();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:01:46.577

```
txtpatientid.Text = command.ExecuteScalar().ToString(); 
```

# c# - 反射器中的列表

> ID：14247289
> 
> 赞同：3
> 
> 时间：2013-01-09T22:00:38.993
> 
> 标签：c#, .net, reflector

MSDN[文档](http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.90%29.aspx "文档")说列表集合来自：

> System.Collections.Generic.List

但是当我启动 .NET Reflector 6 时，这就是我所看到的`System.Collections.Generic`：

> 位助手
> 
> 我设置
> 
> 链表
> 
> 链表节点
> 
> 队列
> 
> 排序字典
> 
> ...

但没有清单。

如果我右键单击`System.Collections.Generic`然后单击“搜索 MSDN”，它会[列出](http://msdn.microsoft.com/en-us/library/system.collections.generic)所有通用类并包括列表。

但我没有看到列表`.Net Reflector.`

我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T22:03:15.200

`LinkedList<T>`你提到的其他类都在`System.dll`程序集中。 `List<T>`在`mscorlib`. 都在`System.Collections.Generic`命名空间中。

确保浏览到 中的`System.Collections.Generic`命名空间部分`mscorlib`，而不是`System`.

您可以[在 MSDN 页面上`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.100%29.aspx)的命名空间定义下方看到这一点：

> 命名空间：System.Collections.Generic
> 
> 程序集：mscorlib（在 mscorlib.dll 中）

但是，[`LinkedList<T>`](http://msdn.microsoft.com/en-us/library/he2s3bh7%28v=vs.100%29.aspx)例如，显示：

> 命名空间：System.Collections.Generic
> 
> 程序集：系统（在 System.dll 中）

（注意也可以在Reflector中搜索类型，这样会导致正确找到...）

# r - 创建包含数据集和使用数据的 R 函数的 R 包

> ID：14247290
> 
> 赞同：3
> 
> 时间：2013-01-09T22:00:43.983
> 
> 标签：r, package

我正在创建一个包含数据集和使用数据的 R 函数的 R 包。R 函数如下所示：

```
myFun <- function(iobs){

            data(MyData)
            return(MyData[iobs,])

           } 
```

当我做通常的“R CMD check myPack”业务时，它给了我一个错误提示

```
* checking R code for possible problems ... NOTE
myFun: no visible binding for global variable ‘MyData’ 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T22:15:49.430

您可以为此使用延迟加载。

就放

`LazyData: yes`

在您的说明文件中并删除

`data(MyData)`

从你的功能。由于延迟加载，您的 MyData-Object 将在您的命名空间中可用，因此无需调用 data()。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T23:14:38.907

惰性数据方法的两种替代方案。两者都依赖于使用`list`参数来`data`

`data(list = 'MyData')`

* * *

### 定义为函数的默认参数（可能不理想，因为可以更改）

```
myFun <- function(iobs, myData = data(list='MyData')){

  return(myData[iobs,])

} 
```

* * *

### 加载到一个空的环境中，然后使用`[[`.

```
myFun2 <- function(iobs){
  e <- new.env(parent = emptyenv())
  data(list='MyData', envir = e)
  e[['MyData']][iobs,]

} 
```

请注意，这 `e$MyData[iobs,]`也应该有效。

我还建议使用as safe practice 来保留与 eg `drop = TRUE`相同的类。考虑到此函数的细节和 的结构，这可能不是问题，但这是一种良好的编程习惯，尤其是在需要健壮代码的包中。`MyData``MyData[iobs,,drop=TRUE]``MyData`

# java - 以特定布局放置对象（用于游戏）

> ID：14247295
> 
> 赞同：-2
> 
> 时间：2013-01-09T22:01:09.887
> 
> 标签：java, android, andengine

所以这就是我想做的，我现在有一个场景，我想用我创建的关卡图标在场景上创建“页面”。

现在我希望能够设置我想要的级别数量。例如，

```
int levels = 100; 
```

然后我希望它能够创建“页面”。我所说的页面是指每个级别部分之间的空间。

我希望能够像这样设置行和列：

```
int rowsPerPage = 5;
int colPerPage = 10; 
```

我的每个级别图标都是 80x80 的宽度和高度。

因此，有了这些信息，我希望能够将级别图标放置在每页的行和每页的列上。

每个级别图标之间应该有一些填充空间。

一旦它在第一页上达到每页的行和列，我想创建第二页，在第一组行和列之间留出一些空间。一旦达到每行的最大图标，它应该在该页面上开始一个新行

现在我不知道从哪里开始。我使用它的原因是因为我已经设置了手势检测，所以我的用户可以从“页面”滚动到“页面”来选择一个级别。

我知道这不是一个只要求代码的地方，但我因此坚持我目前的项目，获得一些帮助真的很棒。

提前谢谢你们。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:29:45.943

如果您自己没有尝试过，没有人会为您编写代码...

这是来自谷歌的......它可能不是你想要的。然而，这是一个开始:)

[http://www.andengine.org/forums/tutorials/menu-scroll-example-t5740.html](http://www.andengine.org/forums/tutorials/menu-scroll-example-t5740.html)

# c# - 使用正则表达式替换字符串中的单个字符

> ID：14247297
> 
> 赞同：0
> 
> 时间：2013-01-09T22:01:15.393
> 
> 标签：c#, regex

我正在尝试使用 C#替换大字符串*（文本文件）*中的单个字符。此字符串包含多行代码。

在某些时候，一个批处理文件被称为分配多个参数：

```
 call c:\script.bat 1 1 16 localhost 1 1 %0% 
```

它必须变成：

```
 call c:\script.bat 2 1 16 localhost 1 1 %0% 
```

我创建了以下语句来替换`regex`点组*（在本例中为第一个）*：

```
Regex.Replace(content, @"call c:\script.bat )(.)( 1 16 localhost 1 )(.)(%0%)","$1.$3$4$5") 
```

不知何故，我敢肯定，`number 1`不能用 a 替换替换匹配的那个，`2`因为这样替换字符串将访问不存在的组`12`，而不是附加到它`group 1`的字符。`2`

有人可以给我一个线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:06:17.337

简单的解决方案是不捕获分隔空间：

```
Regex.Replace(content, @"(call c:\script.bat) \d (1 16 localhost 1 )(.)(%0%)","$1 2 $3$4$5") 
```

**注意：**我也使用了`\d`数字字符集。您可能希望将其更改`\d+`为大于一位数的数字。

# java - Java反映API包装器（该死的检查异常混乱）

> ID：14247298
> 
> 赞同：1
> 
> 时间：2013-01-09T22:01:24.223
> 
> 标签：java, exception, checked

我有看起来像这样的方法：

```
public static <U extends Entity<?, ?>> Http<List<U>> getAllFromServerThreadRun(Integer maxResults, Class<U> clazz) {
        JsonObject o2 = new JsonObject(); // TODO exception chaos im projekt
                                            // überarbeiten
        o2.addProperty("maxResults", maxResults);

        String s;
        Type t;
        try {
            U o = clazz.getConstructor().newInstance();
            s = (String) clazz.getDeclaredMethod("getControllerName").invoke(o);
            t = (Type) clazz.getDeclaredMethod("getListType").invoke(o);
        } catch (IllegalArgumentException e) {
            ExceptionHandler.handle(e);
        } catch (SecurityException e) {
            ExceptionHandler.handle(e);
        } catch (InstantiationException e) {
            ExceptionHandler.handle(e);
        } catch (IllegalAccessException e) {
            ExceptionHandler.handle(e);
        } catch (InvocationTargetException e) {
            ExceptionHandler.handle(e);
        } catch (NoSuchMethodException e) {
            ExceptionHandler.handle(e);
        }
        return new Http<List<U>>(new HttpGet(), s, "getall", t).setParams(o2).queryServer();
    } 
```

到目前为止，我的项目中可能有 10 个。

我有一个替代的 Java 反射库可以为我隐藏这些异常吗？我不知道该怎么处理它们，它只是杂乱无章。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T22:03:47.993

我建议

```
catch (Exception e) {
            ExceptionHandler.handle(e);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T22:14:39.830

在 java 7 中，您可以在每个 catch 中捕获多种异常类型：

```
try {
    // reflection stuff
} catch (IllegalArgumentException |
         SecurityException |
         InstantiationException |
         etc e) {
    ExceptionHandler.handle(e);
} 
```

我很同情你想`catch (Exception e)`要这样做，因为反射方法抛出了许多类型的异常，但是这样做会带来无意中捕获未经检查的异常的危险，比如`NullPointerException`可能会掩盖错误。

如果你还在 Java 6 领域，恐怕你最好把它吸干。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T00:02:25.763

从 Java 7 开始，所有与反射相关的异常都扩展了[java.lang.ReflectiveOperationException](http://docs.oracle.com/javase/7/docs/api/java/lang/ReflectiveOperationException.html)，因此您只需要捕获它。

其他异常（IllegalArgumentException 和 SecurityException）是未经检查的异常，您根本不应该捕获它们。如果发生其中任何一种情况，则您的代码中存在错误。正确的做法不是捕获异常，而是修复导致异常的代码。

具体来说，我可以看到 IllegalArgumentException 永远不会发生的代码，因为它只有在您传递一个`invoke`类型不正确的对象时才会发生，而且我可以看到您正在传递一个类的实例，该类的方法您'正在调用。只有当您根本不允许访问这些方法时，才会发生 SecurityException。

# php - 产品资料页面上的 WHMCS 自定义产品字段

> ID：14247300
> 
> 赞同：0
> 
> 时间：2013-01-09T22:01:34.387
> 
> 标签：php, smarty, whmcs

我已经翻遍了，无法通过开发人员或普通文档在文档中找到它，是否有某种方式或某处允许在客户的产品概览页面上显示所有自定义字段或 X 自定义字段？

例如，我们销售的一些产品在该产品的自定义产品字段中具有特殊键，一旦购买完成，我们就会将这些自定义字段添加到产品中。但是，除了发送给客户的原始电子邮件之外，我如何在客户查看他们的产品详细信息页面时向他们展示这个？

我认为它必须在产品详细信息的模板文件中，但我不知道我是否缺少一个开关来打开它，或者我是否必须手动抓取它（如果它甚至可以抓取的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:15:31.823

那么，只需取消选中`admin only`检查即可。它将显示在客户区-> 产品和服务-> 产品详细信息中。并确保`clientareaproductdetails.tpl`包含以下内容：

```
{foreach from=$customfields item=customfield}
     {$customfield.name} : {$customfield.value}
{/foreach} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T11:54:18.993

好吧，如果您希望客户查看您的产品自定义字段，您所要做的就是允许显示管理面板上的自定义字段。

您可以通过管理面板->设置->产品和服务->相关产品->自定义字段来做到这一点

在那里，您确保检查以下内容：

```
Show on Order Form
Show on Invoice 
```

以下是未选中的：

```
Admin Only 
```

# ios6 - AVQueuePlayer 挫折（缓冲区欠载处理）

> ID：14247306
> 
> 赞同：3
> 
> 时间：2013-01-09T22:01:54.023
> 
> 标签：ios6, buffer, avplayer, avqueueplayer

我在 AVQueuePlayer 上玩得很开心。很简单，我正在使用 playerItemWithURL: 构建的 AVPlayerItems 数组上制作它，并指向网络上服务器上的视频资产。

如果我尝试在刺激器（原文如此）中运行这个东西，它会播放第一个资产，开始播放第二个资产，然后就死了。有时它甚至没有通过第一个资产。

现在，我知道 sim 的行为与设备不同，所以我也在设备上尝试了它，但遇到了同样的问题。

当我记录项目的各种状态变化时，我看到缓冲区用完了，播放器就死了。对于正在播放项目队列的构造，这对我来说似乎有点愚蠢......当然缓冲区可能会不足，但为什么它会死？

我做错了什么，或者这是它应该如何表现？

我通过观察loadedTimeRanges 属性以及当它改变时向播放器发送PLAY 来解决这个问题。但这会导致播放卡顿，这也很糟糕。

这是我的代码。有人可以告诉我如何在没有播放完全废话的情况下做到这一点吗？

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handlePlayerItemReachedEnd:) name:AVPlayerItemDidPlayToEndTimeNotification object:self.queuePlayer];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handlePlayerStalled:) name:AVPlayerItemPlaybackStalledNotification object:self.queuePlayer];

    NSString *baseURL = @"http://www.aDomain.com/assets/";
    NSMutableArray *vidItemArray = [[NSMutableArray alloc] initWithCapacity:5];

    for (int i = 1; i <= 5; i++) {
        AVPlayerItem *vid = [AVPlayerItem playerItemWithURL:[NSURL URLWithString:[baseURL stringByAppendingFormat:@"%d.mov", i]]];
        [vid addObserver:self forKeyPath:@"status" options:0 context:nil];
        [vid addObserver:self forKeyPath:@"playbackBufferEmpty" options:0 context:nil];
        [vid addObserver:self forKeyPath:@"loadedTimeRanges" options:0 context:nil];
        [vidItemArray addObject:vid];
    }

    self.queuePlayer = [AVQueuePlayer queuePlayerWithItems:vidItemArray];
    [self.mPlaybackView setPlayer:self.queuePlayer];
}

- (void)handlePlayerItemReachedEnd:(NSNotification *)notification {
    NSLog(@"Clip #%d finished playing", [self.queuePlayer.items indexOfObject:self.queuePlayer.currentItem]);
}

- (void)handlePlayerStalled:(NSNotification *)notification {
    NSLog(@"CLIP STALLED...");
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ([object isKindOfClass:[AVPlayerItem class]]) {
        AVPlayerItem *item = (AVPlayerItem *)object;

        if ([keyPath isEqualToString:@"status"]) {
            switch (item.status) {
                case AVPlayerItemStatusFailed:
                    NSLog(@"player item status failed");
                break;
                case AVPlayerItemStatusReadyToPlay:
                    NSLog(@"player item status is ready to play");
                [self.queuePlayer play];
                break;
                case AVPlayerItemStatusUnknown:
                    NSLog(@"player item status is unknown");
                break;
            }
        }
        else if ([keyPath isEqualToString:@"playbackBufferEmpty"]) {
            if (item.playbackBufferEmpty) {
                NSLog(@"player item playback buffer is empty");
            }
        }
        else if ([keyPath isEqualToString:@"loadedTimeRanges"]) {
            NSLog(@"Loaded time range = %@", item.loadedTimeRanges);
            self.queuePlayer play];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T14:52:13.767

您不应该`AVPlayerItem`在`AVQueuePlayer`最初添加很多，因为它们将同时开始缓冲，由框架自行决定。

尝试加载一个文件，然后在 KVO 上`currentItem`更改队列下一个，它可能会解决您的问题。我正在使用它来实现无缝播放。

# c# - Libnodave：connectPLC 返回 -1

> ID：14247313
> 
> 赞同：1
> 
> 时间：2013-01-09T22:02:10.450
> 
> 标签：c#, visual-studio, plc, libnodave

我正在尝试使用 Libnodave dll 通过 CP 343-1 Lean 通过以太网连接到 Siemens CPU315-2 DP。

我已经尝试了下载文件中包含的示例程序“simpleISO_TCP.cs”。函数 openSocket 工作得很好，但函数 connectPLC 总是返回 -1 ，这意味着与 PLC 的连接失败。

任何人都知道什么可能导致这个问题？

PS：我在 Windows 7 64 位中使用 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:00:32.973

您需要检查的几件事：

*   是否将正确的硬件配置下载到 PLC
*   你能ping通PLC的IP地址吗
*   如果安装了 Simatic，您是否禁用了端口 102 服务
*   您的机架和插槽编号是否正确

我会尝试使用位于 win 文件夹中的 testISO_TCP.exe。从带有 IP 地址和 -w 标志的 cmd 提示符运行它，这将写入一些内存地址（如果它是生产 PLC，请确保这样做是安全的）

我只是在使用这个库做一些工作，使用带有 CP343-1 (6GK7 343-1EX11-0EX0) 的 CPU 317-2 PN/DP 很好

# git - Git - 如何将我的本地文件恢复到我所做的最后一次提交？

> ID：14247318
> 
> 赞同：3
> 
> 时间：2013-01-09T22:02:31.203
> 
> 标签：git, bitbucket

我将文件托管在 bitbucket 上，通常不时提交更改。

自从我上次提交以来，我的代码中出现了一些错误。

（这些错误已保存在各自的本地文件中，我还没有使用 git add 将其添加到本地 git repo。）

我想用工作代码恢复到我上次提交的内容。我目前正在master的一个分支上工作。

我应该为此使用什么命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:07:34.017

对于文件：`git checkout -- filename`也`git checkout -- directory/` 将对整个目录执行此操作，当然也`git checkout -- .`对整个存储库执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:30:58.627

`git reset --hard`将所有文件还原为`HEAD`. 我更喜欢这个，`git checkout -- .`但这只是一个偏好问题。

# xml - 使用 XSL 1.0 有条件地包装内容

> ID：14247319
> 
> 赞同：2
> 
> 时间：2013-01-09T22:02:36.930
> 
> 标签：xml, xslt, xslt-1.0

我正在寻找一种用 xsl 包装内容的方法。这是我正在做的一个简化示例。Lot's of content ... 是大量的内容，并且锚标记仅用作示例。它可以是 div 或其他任何东西。

XML:

```
<root>
    <attribution>John Smith</attribution>
    <attributionUrl>http://www.johnsmith.com</attributionUrl>
</root> 
```

XSL：我目前是如何做的。这增加了大量的 xsl，我相信有一种方法可以简化。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:template match="/">
    <xsl:if test="attribution != ''">
        <xsl:choose>
            <xsl:when test="attributionUrl != ''">
                <a>
                    <xsl:attribute name="href"><xsl:value-of select="attributionUrl"/></xsl:attribute>
                    <span>Thank you, <xsl:value-of select="attribution"/></span>
                    <div>Lots of content ...</div>
                </a>
            </xsl:when>
            <xsl:otherwise>
                <span>Thank you, <xsl:value-of select="attribution"/></span>
                    <div>Lots of content ...</div>
            </xsl:otherwise>
        </xsl:choose>   
    </xsl:if>
</xsl:template> 
```

XSL：从概念上讲，这就是我想要做的。它不起作用，因为它是无效的 XML，但它确实抓住了这个想法。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:template match="/">
    <xsl:if test="attributionUrl != ''">
        <a>
    </xsl:if>

    <xsl:attribute name="href"><xsl:value-of select="attributionUrl"/></xsl:attribute>
    <span>Thank you, <xsl:value-of select="attribution"/></span>
    <div>Lots of content ...</div>

    <xsl:if test="attributionUrl != ''">
        </a>
    </xsl:if>
</xsl:template> 
```

编辑：

我试图避免多个版本`<div>Lots of content ...</div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:07:30.580

这应该这样做：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template match="text()" />

  <xsl:template match="root[attributionUrl !='' and attribution != '']">
    <a href="{attributionUrl}">
      <xsl:apply-templates select="attribution" />
    </a>
  </xsl:template>

  <xsl:template match="attribution[. != '']">
    <span>
      Thank you, <xsl:value-of select="attribution"/>
    </span>
    <div>Lots of content ...</div>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:12:19.610

您可以拥有一个执行“谢谢”的模板并将其用于这两种情况。无论如何，使用模板匹配而不是`<xsl:if>`或者`<xsl:when>`更符合 XML 的精神：

```
<xsl:template match="root[attributionUrl!='']">
  <a href="{attributionUrl}">
    <xsl:call-template name="thankYou"/>
  </a>
</xsl:template>

<xsl:template match="root" name="thankYou">
  <span>Thank you, <xsl:value-of select="attribution"/></span>
  <div>Lots of content ...</div>
</xsl:template> 
```

# android - Froyo+ 上的按钮通知？

> ID：14247321
> 
> 赞同：0
> 
> 时间：2013-01-09T22:02:42.453
> 
> 标签：android, button, notifications, android-2.2-froyo

我希望使用“Snooze”按钮按照下图的方式做一些事情，但我正在尝试在 Froyo 及更高版本上执行此操作。是否可以在 4.0 之前的设备上执行此操作？我基本上想让用户选择从通知栏中关闭我正在进行的服务。

![通知按钮示例](../Images/1adb2a9a62508d7c32188f1dc07fcdbc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:14:41.303

您可以使用 NotificationCompat：

[http://developer.android.com/reference/android/support/v4/app/NotificationCompat.html](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.html)

* * *

添加支持库修订 10 更多信息[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

# c++ - 在char数组c ++中查找值

> ID：14247324
> 
> 赞同：1
> 
> 时间：2013-01-09T22:02:52.657
> 
> 标签：c++, arrays, char

我有一个 char 数组，文本实际上看起来像 XML：

```
<root>
<number>1</number>
<counter>2</counter>
<lastNumber>3</lastNumber>
</root> 
```

我需要获取这些值并将它们存储到变量中，以便我可以使用它们。

知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T22:06:01.820

您可以使用 TinyXML 来解析文件。[http://www.grinninglizard.com/tinyxml/](http://www.grinninglizard.com/tinyxml/) 它是一个在 C++ 中解析 XML 文件的开源库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T22:09:32.190

你应该提出一个更好的问题，但总体思路很清楚，所以我建议使用一个库，`boost::spirit`或者，如果你可以以不同的方式排列你的数据，你可以使用`boost::config`这可能是一种更简单的方法，[这里是例子](https://stackoverflow.com/questions/6175502/how-to-parse-ini-file-with-boost)。

# mysql - 如何设计一个搜索短语表以查找一组单词的 MySQL 查询？

> ID：14247332
> 
> 赞同：2
> 
> 时间：2013-01-09T22:03:34.077
> 
> 标签：mysql, sql

我有一张大约有 100,000 行的表。

每行包含一个句子、句子片段或短语。

我想编写一个查询，它将查找包含***所有***单词集的所有行，即使条件中的单词与句子的顺序不同。

例如，如果我的表如下所示：

```
id sentence
-- ---------------------------------------------------------------------------
 1 How now brown cow
 2 Alas, poor Yorick! I knew him
 3 Call me Ishmael
 4 A screaming comes across the sky
 5 It was a bright cold day in April, and the clocks were striking thirteen
 6 It was the best of times, it was the worst of times
 7 You don't know about me without you have read a book
 8 In the late summer of that year we lived in a house in a village
 9 One summer afternoon Mrs. Oedipa Maas came home from a Tupperware party
10 It was a queer, sultry summer, the summer they electrocuted the Rosenbergs 
```

我的查询条件将是一个或多个单词，以任何特定顺序。

结果集应该包含所有包含所有单词的句子。

例如，如果条件为`the was`，则结果应包括第 5、6、10 行。

理想情况下，我想改进这一点，以便查询只需要包含单词的***开头***。（请注意，我希望允许用户只输入单词的开头，而不能只输入中间或结尾）。

例如，如果条件是`elect sul`，则结果将包括第 10 行。

目前，我是这样做的：

```
SELECT
    id, sentence
WHERE
    (sentence LIKE 'elect%' OR sentence LIKE '% elect%')
AND
    (sentence LIKE 'sul%' OR sentence LIKE '% sul%') 
```

这有效（我认为......） - 它找到了它应该找到的一切。但是，它非常缓慢。

有一个更好的方法吗？

对于它的价值 - 我可以灵活地重新设计表格，或创建额外的“帮助”表格。

例如，我考虑创建一个表，其中包含每个唯一单词的一行以及包含它的句子的每一行的键。

另外 - 查询需要在 MySQL 中工作。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T00:36:20.797

你的方法很好。如果要处理多个单词，可以执行以下操作：

```
select s.id, s.sentence
from sentence s join
     (select 'elect' as word union all
      select 'sul' as word
     ) words
     on s.sentence like concat(word, '%') or
        s.sentence like concat('% ', word, '%')
group by s.id, s.sentence
having count(*) = (select count(*) from words) 
```

这不会更快（因为你有额外的`group by`）。但它确实提供了更多的灵活性。

顺便问一下，您是否研究过 MySQL 中的全文搜索功能？

# sql - 是否有可以一次执行一条语句的 SQL 脚本的工具？

> ID：14247338
> 
> 赞同：1
> 
> 时间：2013-01-09T22:04:16.883
> 
> 标签：sql, database

当我必须运行数据库迁移脚本时，我往往会产生很大程度的妄想症，而*不是*像`dbcli < migration.sql`. 相反，我更喜欢一次运行一个命令。到目前为止，我一直在使用痛苦的复制/粘贴。

必须有一个可以做这种事情的工具，但我很难找到一个使用谷歌、[维基百科](http://en.wikipedia.org/wiki/Comparison_of_database_tools#Features)或 StackOverflow 的工具（[关闭](https://stackoverflow.com/questions/7969597/extracting-sql-commands-from-sql-file-using-java/7969850#7969850)但[没有雪茄](https://stackoverflow.com/questions/6192733/how-to-execute-a-set-of-related-sql-instructions-with-jdbc)）。

这绝对是[我可以自己写](https://stackoverflow.com/questions/13745753/executing-sql-script-into-oracle-db-one-statement-at-a-time)的东西，但它*必须已经*存在，不是吗？

这确实需要是可以从命令行运行并具有一点交互性的东西（例如显示将要执行的语句，让您按例如 ENTER 来执行它，然后显示输出（如果有））因为服务器通常没有任何可用的 GUI。

我的特定数据库目标是 MySQL，但不需要这样的工具是特定于数据库的。

***更新***

同时，我正在用 Java 编写一个实用程序来做我想做的事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T17:06:57.537

只要它以分号结尾，Oracle SQL Developer 就会一次运行一行。

您可以使用其他驱动程序连接到某些第 3 方数据库 ( [http://www.oracle.com/technetwork/products/migration/omwb-getstarted-093461.html](http://www.oracle.com/technetwork/products/migration/omwb-getstarted-093461.html) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T17:00:43.247

Emacs 的 SQL 模式支持逐行、逐区、逐文件发送。

当然，您必须学习 emacs，但它确实可以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:12:48.407

你可以试试[dbForge](http://www.devart.com/dbforge/mysql/studio/editions.html)。有一个免费的 Express Edition，但我无法从[功能比较列表中](http://www.devart.com/dbforge/mysql/studio/editions.html)完全判断它是否允许您逐步执行任意 SQL 脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-11T13:08:14.837

[Flyway Teams Edition（商业许可）还支持在Stream parameter](https://flywaydb.org/documentation/configuration/parameters/stream)下一一执行语句。这不是您问题的确切答案，但它至少可以为您提供有关现有工具的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-21T21:22:40.057

很久以前，我为此编写[了自己的工具](https://github.com/ChristopherSchultz/SQLExecutor)，并且随着时间的推移一直在使用和完善它。随意使用它并提供功能建议等。

# android - 使用 jsoup 解析会抛出错误（NetworkOnMainThreadException）

> ID：14247339
> 
> 赞同：7
> 
> 时间：2013-01-09T22:04:25.887
> 
> 标签：android, parsing, jsoup

我下载了 jsoup 库**jsoup-1.7.1.jar 核心并使用****Project -> Properties->Java Build Path -> Add external Jars**将其导入到我的项目中，并将库文件粘贴到我的 libs 文件夹中。但是，将 Jsoup 库导入我的项目似乎存在一些问题。当我运行我的应用程序时，启动时出现此错误。

```
12-26 22:59:24.133: E/AndroidRuntime(6710): FATAL EXCEPTION: main
12-26 22:59:24.133: E/AndroidRuntime(6710): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.jsouptest/com.example.jsouptest.MainActivity}: android.os.NetworkOnMainThreadException 
```

经过搜索和询问，我发现eclipse看到了jsoup.jar，但无法将其打包为APK文件以供应用程序运行。我试图通过按**Shift+Alt+O**来组织 Imports ，但我会得到同样的错误。在这一点上，我不确定出了什么问题，也不知道如何解决它。我只希望有人能引导我找到解决方案。感谢您的时间！

这是我的代码：

```
package com.example.jsouptest;

import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         Document doc;
         try {
             doc = Jsoup.connect("http://google.com/").get();
             String title = doc.title();
          System.out.print(title);
         } catch (IOException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
         }
         }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-09T22:08:48.063

你有一个

```
android.os.NetworkOnMainThreadException 
```

这与您的罐子是否正常工作无关。

新版本的 Android 会抛出异常，因此您不会锁定 UI 线程（即主线程）进行网络操作。

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)（关于 AsyncTask 的每个部分的简单解释可以在[这里](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)找到）或另一个[线程](http://developer.android.com/reference/java/lang/Thread.html)来处理网络内容。如果您需要在后台工作完成后更新 UI，则 Asynctask 更易于使用。

使用您的代码库的 AsyncTask 示例可以是：

```
private class MyTask extends AsyncTask<Void, Void, String> {

  @Override
  protected String doInBackground(Void... params) {
    String title ="";
    Document doc;
    try {
      doc = Jsoup.connect("http://google.com/").get();
      title = doc.title();
      System.out.print(title);
    } catch (IOException e) {
      e.printStackTrace();
    }
    return title;   
  } 

  @Override
  protected void onPostExecute(String result) {        
    //if you had a ui element, you could display the title
    ((TextView)findViewById (R.id.myTextView)).setText (result);
  }
} 
```

我假设：

*   任务是 Activity 中的一个**内部**类。
*   您正在将获得的标题转发给 UI 元素（例如 a `TextView`），因为 AsyncTasks 通常用于此目的。

要调用 AsyncTask，请将其放在后面`setContentView(R.layout.activity_main);`

```
new MyTask().execute(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-06-03T12:50:59.227

导入这些库`android.os.NetworkOnMainThreadException`并`android.os.StrictMode`在严格模式下使用

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

还要将此行添加到清单：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# c# - 创建一个 htmlhelper 扩展方法，但它仍然要求额外的第一个参数

> ID：14247340
> 
> 赞同：0
> 
> 时间：2013-01-09T22:04:26.350
> 
> 标签：c#, asp.net-mvc, model-view-controller, extension-methods

我目前已经创建了一个扩展方法

```
using System.Web;
 using System.Web.Mvc;

  namespace Mobi.QualityControl.Site.Infrastructure
{
public static class HtmlHelpers
{
    public static HtmlString ActionImage(this HtmlHelper htmlHelper, string action, object routeValues, string imagePath, string alt)
    {
        var url = new UrlHelper(htmlHelper.ViewContext.RequestContext);

        // build the <img> tag
        var imgBuilder = new TagBuilder("img");
        imgBuilder.MergeAttribute("src", url.Content(imagePath));
        imgBuilder.MergeAttribute("alt", alt);
        string imgHtml = imgBuilder.ToString(TagRenderMode.SelfClosing);

        // build the <a> tag
        var anchorBuilder = new TagBuilder("a");
        anchorBuilder.MergeAttribute("href", url.Action(action, routeValues));
        anchorBuilder.InnerHtml = imgHtml; // include the <img> tag inside
        string anchorHtml = anchorBuilder.ToString(TagRenderMode.Normal);
        return new HtmlString(anchorHtml);
    }
} 
```

}

然后，我尝试在我的页面中使用它，并在我的 web.config 中使用 using 语句，它正在选择该方法，但它

@HtmlHelpers.ActionImage("账户/注册", "/images/home/gettingstarted.png", "编辑", "GettingStarted")

它说它仍然需要 5 个参数而不是 4 个。

这可能是非常简单的事情。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:05:12.983

不，您没有正确调用您的助手。它应该是这样的：

```
@Html.ActionImage("Account/Register", "/images/home/gettingstarted.png", "Edit", "GettingStarted") 
```

ASP.NET MVC 中的 Html 助手只不过是[`extension methods`](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)在 C# 中，我邀请您在进入 ASP.NET MVC 之前熟悉它。

基本上在 C# 中，扩展方法是在它们扩展的类的实例上调用的。在你的情况下，这就是`HtmlHelper`类。Razor 视图有一个名为`Html`which 的属性，其类型为`HtmlHelper`。所以你调用它的扩展方法：

```
@Html.SOME_EXTENSION_METHOD_THAT_IS_BROUGHT_INTO_SCOPE_BY_A_USING_DIRECTIVE(...) 
```

当然，扩展方法只不过是你也可以像这样调用的静态方法（这是错误的，请永远不要调用这样的扩展方法 - 这不是扩展方法的设计目的和方式）：

```
@HtmlHelpers.ActionImage(Html, "Account/Register", "/images/home/gettingstarted.png", "Edit", "GettingStarted") 
```

注意我是如何`Html`作为静态方法的第一个参数传递的。但永远不要使用它。

# ruby - 阻止或将请求重定向到 Selenium 中的特定路径或域

> ID：14247341
> 
> 赞同：4
> 
> 时间：2013-01-09T22:04:31.253
> 
> 标签：ruby, testing, selenium, proxy, capybara

我通过 Capybara 使用 Selenium 来自动化使用 Cucumber 运行的测试。我正在加载一些引用 CDN 内容的页面。我对创建不必要的请求并无缘无故地访问 CDN 没有兴趣。我想将 Selenium 配置为以某种方式忽略对该域的请求。

Celerity 有这样的方法：

```
Browser.ignore_pattern("regex pattern") 
```

这将忽略任何创建匹配的请求。我想以某种方式复制此功能。有没有办法覆盖 DNS 以转到 0.0.0.0 或其他方式来配置内部 Selenium 代理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:04:29.723

您应该可以使用[https://github.com/jarib/browsermob-proxy-rb](https://github.com/jarib/browsermob-proxy-rb)上的 browsermob-proxy-rb gem 将您的 CDN 列入黑名单。

以下内容大部分是从 github 列表的 README 中窃取的：

```
require 'selenium/webdriver'
require 'browsermob/proxy'

server = BrowserMob::Proxy::Server.new("/path/to/download/browsermob-proxy") #=> #<BrowserMob::Proxy::Server:0x000001022c6ea8 ...>
server.start

proxy = server.create_proxy #=> #<BrowserMob::Proxy::Client:0x0000010224bdc0 ...>

profile = Selenium::WebDriver::Firefox::Profile.new #=> #<Selenium::WebDriver::Firefox::Profile:0x000001022bf748 ...>

# This is the line I added
proxy.blacklist(/path.to.CDN.com/)

profile.proxy = proxy.selenium_proxy

driver = Selenium::WebDriver.for :firefox, :profile => profile

driver.get "http://www.yoursite.com" 
```

# java - org.apache.commons.io.FileUtils.readFileToString 和文件路径中的空白

> ID：14247344
> 
> 赞同：5
> 
> 时间：2013-01-09T22:04:51.793
> 
> 标签：java, url

我正在尝试在 Windows 7 上使用 org.apache.commons.io 2.4 版将文件读取为字符串。

```
String protocol = url.getProtocol();
  if(protocol.equals("file")) {
  File file = new File(url.getPath());
  String str = FileUtils.readFileToString(file);
} 
```

但它失败了：

```
java.io.FileNotFoundException: File 'C:\workspace\project\resources\test%20folder\test.txt' does not exist 
```

但如果我这样做：

```
String protocol = url.getProtocol();
  if(protocol.equals("file")) {
  File file = new File("C:\\workspace\\resources\\test folder\\test.txt");
  String str = FileUtils.readFileToString(file);
} 
```

我工作正常。因此，当我手动输入带有空格/空格的路径时，它可以工作，但是当我从 url 创建它时，它不会。

我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T22:10:53.173

试试这个：

```
File file = new File(url.toURI()) 
```

顺便说一句，既然您已经在使用 Apache Commons IO（对您有好处！），为什么不使用流而不是文件和路径呢？

```
IOUtils.toString(url.openStream(), "UTF-8"); 
```

我正在使用[`IOUtils.toString(InputStream, String)`](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#toString(java.io.InputStream,%20java.lang.String)). 请注意，我显式传递编码以避免操作系统依赖性。你也应该这样做：

```
String str = FileUtils.readFileToString(file, "UTF-8"); 
```

# entity-framework - 实体框架 5 与命名外键一对一但使用属性

> ID：14247351
> 
> 赞同：2
> 
> 时间：2013-01-09T22:05:12.857
> 
> 标签：entity-framework, entity-framework-5

是否可以仅使用属性来完成此操作？

我需要 Class2 表有自己的 Id 主键和一个名为 Class2Id 的列，它是 Class1.Id 的外键。

```
public class Class1
{
    public virtual int Id { get; set; }
    public virtual Class2 Class2 { get; set; }
}

public class Class2
{
    public virtual int Id { get; set; }
    public virtual Class1 Class1 { get; set; }        
} 
```

我可以使用流畅的映射使其工作：

```
modelBuilder.Entity<Class1>()
  .HasRequired(x => x.Class2)
  .WithRequiredPrincipal(x => x.Class1)
  .Map(x => x.MapKey("Class1Id")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:25:39.270

根据 Julia Lerman 的“Programming Entity Framework: Code First”一书，这应该是可能的。配置取决于它是可选的 1-1 关系还是必需的 1-1 关系。它是通过使用完成的

> [钥匙]

和

> [外键]

应用于依赖端的数据注释。本书包含以下示例：

```
public class PersonPhoto
{
  [Key]
  [ForeignKey("PhotoOf")]
  public int PersonId { get; set; }
  public byte[] Photo { get; set; }
  public string Caption { get; set; }
} 
```

# javascript - 如何在 iframe 内打开弹出窗口？

> ID：14247352
> 
> 赞同：0
> 
> 时间：2013-01-09T22:05:14.600
> 
> 标签：javascript, iframe, popup, frames, window.open

简而言之，如何在 iframe 内打开弹出窗口？无论我在父窗口还是 iframe 中使用 window.open，弹出窗口都会加载在父窗口之上。是否可以打开一个新窗口，使其仅限于 iframe？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:11:54.393

无法打开新窗口以使其仅限于`iframe`. [可以使用JavaScript lightbox](http://en.wikipedia.org/wiki/Lightbox_%28JavaScript%29)实现与您要求的功能相似的功能。

# asp.net-mvc-3 - 未捕获的类型错误：无法调用未定义的方法“删除”

> ID：14247354
> 
> 赞同：2
> 
> 时间：2013-01-09T22:05:18.440
> 
> 标签：asp.net-mvc-3, knockout.js, knockout-mapping-plugin, knockout-2.0

我正在尝试将 knockout.js 与 MVC3 一起使用，但我不断收到错误消息：

> 未捕获的类型错误：无法调用未定义的方法“删除”

设置是我有一个 UL 列表，我需要添加和删除：

```
<ul data-bind="foreach: Interviewees">
   <li>
       <div>
           <a data-bind="click: $root.removeInterviewee" class="xOut"></a>
        </div>
       <div>
          <h2>
              <span data-bind="text: FirstName"></span>
               <span data-bind="text: LastName"></span>
          </h2>
      </div>
   </li>
</ul> 
```

这是包含淘汰赛内容的 javascript 部分：

```
function SomeThingee(Id, SomeThingeeId, firstName, lastName, title, email) {
        this.Id = Id;
        this.SomeThingeeId = SomeThingeeId;
        this.FirstName = firstName;
        this.LastName = lastName;
        this.Title = title;
        this.Email = email;
    }

    var viewModel = ko.validatedObservable({
        addSomeThingee: function () {
            if (!viewModel.isValid()) {
                viewModel.errors.showAllMessages();
                return false;
            } else {
                var newSomeThingee = new SomeThingee(this.Id(), 0, this.FirstName(), this.LastName(), this.Title(), this.Email());

                $.ajax({
                    url: '@Url.Action("AddSomeThingee")',
                    type: "POST",
                    data: ko.toJSON(newSomeThingee),
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        newSomeThingee.SomeThingeeId = result.message; 
                    },
                    error: function (result) {

                    }
                });

                    this.SomeThingees.push(newSomeThingee);
                }
        },
        removeSomeThingee: function (item) {
            this.SomeThingees.remove(item);
        }
    });

    $(function () {
        var jsonModel = '@Html.Raw(JsonConvert.SerializeObject(this.Model))';
        var mvcModel = ko.mapping.fromJSON(jsonModel);

        var myViewModel = new viewModel();
        var g = ko.mapping.fromJS(myViewModel, mvcModel);

        ko.applyBindings(g, document.getElementById("someDiv"));

    }); 
```

此行发生错误：

```
this.SomeThingees.remove(item); 
```

注意 SomeThingees 集合是由模型本身提供的。add 方法工作得很好，但 remove 方法不起作用，并给我上面列出的错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T22:24:14.113

问题是当`click`绑定调用时`$root.removeInterviewee`，`this`被设置为数据项（`$data`）而不是视图模型（`$root`）。有几种方法可以解决这个问题。可能最简单的方法是`bind`在绑定中的函数引用上使用。

```
<a data-bind="click: $root.removeInterviewee.bind($root)" class="xOut"></a> 
```

另请参阅此[Github 问题](https://github.com/SteveSanderson/knockout/issues/378)以进行进一步讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T13:32:34.120

我遇到了同样的问题，问题在于绑定调用设置为数据项（$data）而不是视图模型（$root）。我已经改变`<button data-bind="click: $root.(your delete function).bind($root)"></button>`并为我工作！谢谢迈克尔·贝斯特

# .net - 在 ServiceStack Razor 的部分中使用 TextBoxFor

> ID：14247357
> 
> 赞同：2
> 
> 时间：2013-01-09T22:05:32.267
> 
> 标签：.net, servicestack

我想在继承自 ViewPage 的部分中使用 TextBoxFor 帮助程序，但它会静默失败，没有错误。

在 Rockstar 项目中，我创建了一个像这样的部分：

```
@inherits ViewPage<Rockstar>
@Html.TextBoxFor(x => x.FirstName) 
```

并将这一行插入 Rockstars.cshtml

```
@Html.Partial("Partial") 
```

这应该工作吗？

# wcf - wcf 安全内网 nettcpbinding 客户端非域账户 - 选项

> ID：14247361
> 
> 赞同：1
> 
> 时间：2013-01-09T22:06:03.593
> 
> 标签：wcf, wcf-security, nettcpbinding

WCF 服务托管在 IIS 7.0 上。WCF 客户端是在本地系统帐户下运行的 Windows 服务。服务和客户端都托管在 Intranet 中。我使用的绑定是具有传输安全性的 netTcpBinding。由于 Streaming，无法使用消息安全性。由于部署考虑，不能使用证书。在这种情况下，我有哪些选择可以确保最佳安全性？

# javascript - innerHTML 不显示

> ID：14247368
> 
> 赞同：3
> 
> 时间：2013-01-09T22:06:34.083
> 
> 标签：javascript

很抱歉问了这么一个微不足道的问题（只是学习 JS 的工作原理），但我几乎没有什么东西让我头疼。也许我很累，只是看不到我在做什么，但为什么下面的内容不起作用 - 即在“打印”div 的正文中打印的 totalBits 的值？如果我 alert() 它显示值但不使用 innerHTML。

```
<html>
<head>
<title></title>
<script type="text/javascript">

function answer(sentence){

var bitsOfString = sentence.split(" ");
var numOfBits = bitsOfString.length;
return numOfBits;
}

var sentence = prompt("OK, say something!")
var totalBits = answer(sentence);
var div = document.getElementById("print");
div.innerHTML = totalBits;

</script>
</head>
<body>
<div id="print"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T22:09:28.743

因为您在将元素呈现到页面之前调用它。加载元素后移动脚本，或者您可以调用代码窗口 onload/document ready。

```
<html>
  <head>
    <title></title>    
  </head>
  <body>
    <div id="print"></div>
    <script type="text/javascript">

      function answer(sentence) {    
        var bitsOfString = sentence.split(" ");
        var numOfBits = bitsOfString.length;
        return numOfBits;
      }

      var sentence = prompt("OK, say something!")
      var totalBits = answer(sentence);
      var div = document.getElementById("print");
      div.innerHTML = totalBits;

    </script>

  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T22:09:02.673

看看你的错误控制台。您应该得到`div is null`一个错误，因为该元素尚未被解析。

您需要将脚本块放在元素*之后*`div`或推迟脚本的执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:09:14.143

您的 JavaScritpt 很可能在 DOM 准备好之前执行。

换句话说，将您的 javascript 包装在您在`document.onload`函数中操作 div 的地方，或者如果您乐于使用 jQuery：`$(function(){});`

你可以看到它在这里工作：http: [//jsfiddle.net/c8tyg/](http://jsfiddle.net/c8tyg/)

PS 我不喜欢移动`<script>`块，因为恕我直言 JavaScript 应该可以工作，无论你如何在页面上加载它。您正在操纵 DOM - 尊重游戏 - 等待 DOM 加载。

# iphone - 将触摸从手势识别器传递到表格视图

> ID：14247369
> 
> 赞同：2
> 
> 时间：2013-01-09T22:06:39.583
> 
> 标签：iphone, ios, objective-c, uitableview, uigesturerecognizer

我有一个`UIViewController`包含`UITableViewContoller`禁用交互的子视图。我目前正在使用一个`UIPanGestureRecognizer`拖动父级并在其 y 原点被拖动超过某个 y 坐标时`UIViewController`启用。`UITableViewController`

现在，一旦`UITableViewController`启用，我需要移开手指并重新点击才能开始控制它。一旦达到启用的阈值，有没有办法将焦点从手势识别器切换到表格视图，所以当用户继续滚动时，它将开始影响表格视图？

# c# - 使用 XmlAnyAttribute 时反序列化 xml 的 value 字段没有值

> ID：14247370
> 
> 赞同：0
> 
> 时间：2013-01-09T22:06:39.940
> 
> 标签：c#, .net, xml-serialization

这是 XML 示例，但使用不同的方法来定义属性：

```
<TestXML>
   <TestData attr1="MyAttr" attr2="1" DateAdded="">25</TestData>
</TestXML> 
```

现在我的班级定义：

```
public class TestXML() {
   [XmlElement("TestData")]
   public IntegerValue value {get; set;}
}

public class IntegerValue() {
   public int value {get; set;}
   [XmlAnyAttribute]
   public string[] XAttributes {get; set;}
} 
```

现在反序列化的代码：

```
string xml = "<TestXML><TestData attr1=\"MyAttr\" attr2=\"1\" DateAdded=\"\">25</TestElement> </TestXML>"
using (StringReader sr = new StringReader(xml)) {
   XmlSerializer serializer = new XmlSerializer(typeof(TestXML));
   TestXML myxml = (TestXML)serializer.Deserialize(sr);
} 
```

产生以下结果：

```
myxml
   value     |  0
   XAttributes  {string[7]}
     [0] "MyAttr"
     [1] "1"
     [2] "" 
```

xml 格式正确。无法使用 XMLAnyAttribute 获取要反序列化的值。想要获取名称以及属性的值，但到目前为止还没有找到该方法的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:18:05.993

您可以简单地更改`string[] XAttributes`为`XmlAttribute[] XAttributes`这将返回整个属性，以便您可以访问名称和值

```
public class IntegerValue
{
   public int value {get; set;}

   [XmlAnyAttribute]
   public XmlAttribute[] XAttributes { get; set; }
} 
```

我的测试：

```
public class TestXML
{
    [XmlElement("TestData")]
    public IntegerValue value { get; set; }
}

public class IntegerValue
{
    public int value { get; set; }

    [XmlAnyAttribute]
    public XmlAttribute[] XAttributes { get; set; }
}

XmlSerializer serializer = new XmlSerializer(typeof(TestXML));
using (FileStream stream = new FileStream(@"C:\StackOverflow.xml", FileMode.Open))
{
    TestXML myxml = (TestXML)serializer.Deserialize(stream);
} 
```

结果：

![在此处输入图像描述](../Images/948778e500683d91c314e22ceb629208.png)

注意：您发布的 xml 无效，结束标签`TestData`is `TestElement`that won't work

```
<TestXML>
   <TestData attr1="MyAttr" attr2="1" DateAdded="">25</TestElement>
</TestXML> 
```

它应该是

```
<TestXML>
   <TestData attr1="MyAttr" attr2="1" DateAdded="">25</TestData>
</TestXML> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:17:52.150

未设置 value 属性，因为您需要将其定义为 XML 文本。试试这个：

```
public class IntegerValue() {
  [XmlText]
  public int value {get; set;}
  [XmlAnyAttribute]
  public string[] XAttributes {get; set;}
} 
```

请注意，其 ac# 约定在属性装饰中不包含字符串“Attribute”。所以

# sql-server-2008 - 加粗 SSRS 中的特定文本

> ID：14247372
> 
> 赞同：2
> 
> 时间：2013-01-09T22:06:56.497
> 
> 标签：sql-server-2008, ssrs-2008, reporting-services

我的存储过程中有一列，其中包含以下数据：

> abcs,defs,CA(5,6);wsdf,kdh,CA(7,8)

现在我只希望括号中的数据是粗体的，其他的都是规则的，就像这样：

> abcs,defs,CA( **5,6** );wsdf,kdh,CA( **7,8** )

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T23:47:06.403

创建自定义代码函数以加粗文本：右键单击报表表面的非设计部分，选择`Report Properties...`并单击`Code`选项卡。输入以下代码：

```
Function BoldText(Text As String) As String
  return Text.Replace("(", "(<b>").Replace(")", "</b>)")
End Function 
```

转到您的字段单元格并将值的表达式从仅字段值更改为使用字段值调用此函数：

```
=Code.BoldText(Fields!FieldToBold.Value) 
```

现在，这一位是关键 - 在您的单元格中，单击它显示的位置`<<Expr>>`使其突出显示，然后右键单击它并选择`Placeholder Properties...`。在`General`选项卡上选择单选按钮以激活`HTML - Interpret HTML tags as styles`。

现在括号之间的任何内容都将加粗。

**更新 - 更改字体颜色**

您还可以使用`<font>`HTML 标记更改字体的颜色（以下示例将括号之间的任何内容变为红色和粗体）：

```
Function BoldText(Text As String) As String
  return Text.Replace("(", "(<font color=Red><b>").Replace(")", "</b></font>)")
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-07T21:39:17.973

我相信您需要使用占位符来完成此操作。

[来了](http://www.sqlchick.com/entries/2010/10/31/using-different-formats-within-a-single-textbox-in-ssrs.html/)！一个很好的教程。

# python - Python None 比较：我应该使用“is”还是==？

> ID：14247373
> 
> 赞同：261
> 
> 时间：2013-01-09T22:06:58.557
> 
> 标签：python, comparison, nonetype

当我比较时我的编辑器会警告我`my_var == None`，但在我使用时没有警告`my_var is None`。

我在 Python shell 中进行了测试，并确定两者都是有效的语法，但我的编辑器似乎说这`my_var is None`是首选。

是这样吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2013-01-09T22:08:04.063

### 概括：

`is`当您想要检查对象的*身份*时使用（例如检查是否`var`为`None`）。`==`当您想检查*相等性*时使用（例如`var`等于`3`？）。

### 解释：

您可以拥有`my_var == None`将返回的自定义类`True`

例如：

```
class Negator(object):
    def __eq__(self,other):
        return not other

thing = Negator()
print thing == None    #True
print thing is None    #False 
```

`is`检查对象*身份*。只有 1 个对象`None`，所以当你这样做时`my_var is None`，你正在检查它们是否实际上是同一个对象（不仅仅是*等效*对象）

换句话说，`==`是检查等价性（从对象到对象定义），而`is`检查对象身份：

```
lst = [1,2,3]
lst == lst[:]  # This is True since the lists are "equivalent"
lst is lst[:]  # This is False since they're actually different objects 
```

* * *

## 回答 #2

> 赞同：159
> 
> 时间：2013-01-09T22:10:46.273

`is`在将任意对象与单例对象进行比较时，通常首选`None`它，因为它更快且更可预测。`is`总是按对象身份进行比较，而`==`做什么取决于操作数的确切类型，甚至取决于它们的顺序。

此建议得到[PEP 8](https://www.python.org/dev/peps/pep-0008)的支持，它[明确指出](https://www.python.org/dev/peps/pep-0008/#programming-recommendations)“与 None 等单例的比较应该始终使用`is`or `is not`，而不是相等运算符。”

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-09T22:11:07.670

`is`PEP 8 定义在比较单例时最好使用运算符。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2021-04-09T14:15:02.743

我最近遇到了可能出错的地方。

```
import numpy as np
nparray = np.arange(4)

# Works
def foo_is(x=None):
    if x is not None:
        print(x[1])

foo_is()
foo_is(nparray)

# Code below raises 
# ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()
def foo_eq(x=None):
    if x != None:
        print(x[1])

foo_eq()
foo_eq(nparray) 
```

我创建了一个函数，它可以选择将一个 numpy 数组作为参数，如果包含它，它会发生变化。如果我使用不等式运算符测试它是否包含`!=`，则会引发 ValueError （参见上面的代码）。如果我使用`is not none`，代码可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-26T23:08:42.207

“==”与“is”不同的另一个例子。当您从数据库中提取信息并检查值是否存在时，结果将是值或无。

看看下面的 if 和 else。当数据库返回“无”时，只有“是”有效。如果你用 == 代替，if 语句将不起作用，它会直接转到 else，即使结果是“无”。希望我能说清楚。

```
conn = sqlite3.connect('test.db')
c = conn.cursor()
row = itemID_box.get()

# pull data to be logged so that the deletion is recorded
query = "SELECT itemID, item, description FROM items WHERE itemID LIKE '%" + row + "%'"
c.execute(query)
result = c.fetchone()

if result is None:
    # log the deletion in the app.log file
    logging = logger('Error')
    logging.info(f'The deletion of {row} failed.')
    messagebox.showwarning("Warning", "The record number is invalid")
else:
    # execute the deletion
    c.execute("DELETE from items WHERE itemID = " + row)
    itemID_box.delete(0, tk.END)
    messagebox.showinfo("Warning", "The record has been deleted")
    conn.commit()
    conn.close() 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2021-05-18T19:15:01.490

我们可以以打印功能为例。看这里：

```
print(print())
print(None) 
```

两者都输出无：

```
None
None 
```

`is`指的是实际的东西，无论它们是对象none。打印不是对象none。

```
print(None is print)
print(None is None) 
```

现在我们得到了想要的结果。

```
False
True 
```

PEP 8 也提到了这一点，说“与像 None 这样的单例的比较应该总是用 is 或 not 来完成，而不是相等运算符。”

`is`也更快。

# xcode - Cordova 2.1 和 ChildBrowser 可以在模拟器中使用，但不能在手机上使用

> ID：14247374
> 
> 赞同：1
> 
> 时间：2013-01-09T22:07:06.127
> 
> 标签：xcode, cordova, ios6, childbrowser

我正在使用 Xcode 4.5.1、Cordova/Phonegap 2.1 和 ChildBrowser 插件构建应用程序。我有以下 jquery 可以使用 ChildBrowser 打开所有外部链接。

```
$('a[href^="http"]').live('tap', function(e){
    e.preventDefault();
    var url = $(this).attr("href");
    window.plugins.childBrowser.showWebPage(url, { showNavigationBar: true, showLocationBar: true, showAddressBar: true });
}); 
```

在 iPhone 6.0 模拟器中，这完全符合我的要求。弹出子浏览器窗口并加载 url。并且工具栏按钮显示在子浏览器窗口的底部，允许您关闭子浏览器，将您返回到您离开它的应用程序。

问题是当安装在运行 iOS 6 的 iphone 上时，url 会加载到子浏览器窗口中，但该窗口周围没有镶边。没有用于关闭子浏览器窗口的工具栏或“完成”按钮。因此，返回应用程序的唯一方法是关闭应用程序并重新启动它。我在网上搜索了任何遇到此问题的人，但我一无所获，所以我假设这是我做错的事情，因为以前似乎没有其他人遇到过这个问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:16:04.140

从我刚刚发现的情况来看，这可能是 2.1 中的一个错误（[http://community.phonegap.com/nitobi/topics/ios6_childbrowser_issue_with_phonegap_2_1_0](http://community.phonegap.com/nitobi/topics/ios6_childbrowser_issue_with_phonegap_2_1_0)），您可以使用 2.2 还是 2.3？2.3 现在将 childbroswer 内置为“inAppBrowser”

[http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:36:19.490

在互联网上搜索线索后，community.phonegap.com 上的人们根本没有任何回应。[我在这里](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/i-soyoNaIHE)遇到了我的问题的答案。

问题是对 childbrowser.js 文件的引用。虽然文件名本身都是小写的。我从指南中复制的参考资料如下所示：

```
<script src="ChildBrowser.js"></script> 
```

通过更改对小写版本的引用

```
<script src="childbrowser.js"></script> 
```

一切都在手机和模拟器中完美运行。

# sharepoint - SharePoint Designer 2007：使用查询字符串参数时无法过滤列

> ID：14247376
> 
> 赞同：1
> 
> 时间：2013-01-09T22:07:23.093
> 
> 标签：sharepoint, sharepoint-2007

我有一个DVWP。我无法使列上的过滤正常工作（`the option for sort and filtering on column is selected`）。

在 Common Data View Tasks 下，我有 2 个筛选条件。一个条件具有静态值……另一个是查询字符串参数。

表单显示正确过滤的数据，但是当我尝试对列使用过滤时没有显示任何内容（只是排序选项，而不是过滤器）。

我已阅读其他帖子并决定尝试删除过滤条件并启用该`Add XSLT Filtering`选项并在那里添加条件。同样，表单显示正确过滤的数据，但是当我转到列过滤器时，现在它显示所有记录，而不仅仅是表单上的记录（仅基于过滤条件结果）。

请帮忙！

谢谢！

# php - PHP system() 引发命令未找到错误

> ID：14247378
> 
> 赞同：2
> 
> 时间：2013-01-09T22:07:25.823
> 
> 标签：php, shell, command-line, tesseract

尝试运行此脚本：

```
<?php

   $src  = "./tmp/image1.jpg";
   $dest = "./tmp/image1";
   $out  = "";

   // ob_start();
   $out  = system("tesseract $src $dest");
   // ob_end_clean();

   die($out);
?> 
```

它显示一个空白脚本并显示错误日志：sh: ***tesseract: command not found***

虽然这个命令在 shh 上工作得很好......

知道为什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T22:09:35.593

您需要在磁盘上提供 tesseract 命令的完整路径（通常`/usr/bin/tesseract`，但这可能会因您的特定平台/发行版而异），因为 PHP 执行命令的上下文不会设置相关的默认路径向上。

要找出命令所在的位置，只需`which tesseract`通过 shell 使用。（只要它在不使用完整路径的情况下实际可用。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T22:08:59.397

当以 WWW/PHP 用户身份运行时，“tesseract”路径可能不在 PATH 环境中。尝试使用它的完整路径。

# text - delphi应用程序忽略了txt文件的第1行，为什么？

> ID：14247387
> 
> 赞同：0
> 
> 时间：2013-01-09T22:08:38.523
> 
> 标签：text

我有一个 delphi prog，它可以读取我多年来创建的数千个 .txt 脚本文件。我不得不做一些大规模的改变，所以使用了一个搜索和替换程序，它本身就花了几个小时！现在的问题是所有 txt 文件的第一行似乎以某种方式搞砸了 - 对我来说它看起来很好但是 delphi 程序没有读取它并且 TortoiseSVN 将它记录为更改的行！

到底发生了什么，我该如何解决？到目前为止，我不得不删除所有文件并重新制作它们。删除该行并重写不起作用 - 即使 Crtl+A 并粘贴旧文件内容也不起作用！好像标题已损坏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:19:01.723

会不会是尾线的问题？（windows/UNIX/Mac 不同，例如 \n 或 \n\r ）使用能够显示特殊字符的编辑器。我认为您可以使用乌龟差异，切换正确的选项。否则，请尝试使用记事本++，例如

# asp.net-mvc - 使用 ASP.net MVC 从不同目录路由静态文件，无需更改 IIS 并进行身份验证

> ID：14247389
> 
> 赞同：2
> 
> 时间：2013-01-09T22:08:46.830
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing, httpmodule, mvcroutehandler

让我为我的应用程序的单个用户存储内容：

*   C:\文件{GUID}\

这些文件可能类似于：

*   C:\文件{GUID}\bunny.jpg
*   C:\Files{GUID}\unicorn.html

最终用户应该看到一个“友好”的 url。

http://domain.com/files/{GUID}/bunny.jpg

该 url 必须以某种方式通过控制器或 httpmodule 或 thingIdontknow 才能被授权查看该文件。这些权限可能每天都在变化，因此需要经常检查文件的权限。

从我一直在阅读的内容来看，这是完全可能的，但我不确定接下来要编写什么代码，或者是否有人对此有任何见解。HttpModule 还是控制器？我对需要发生什么感到困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T22:20:08.037

> 该 url 必须以某种方式通过控制器或 httpmodule 或 thingIdontknow 才能被授权查看该文件。这些权限可能每天都在变化，因此需要经常检查文件的权限。

*你不知道*的东西有个名字。它称为授权操作过滤器。

首先让我们假设您已经注册了一个自定义路由来提供这些文件：

```
routes.MapRoute(
    "MyImagesRoute",
    "files/{id}/{name}",
    new { controller = "Files", action = "Index" }

    // TODO: you could constrain the id parameter to be a GUID.
    // Just Google for a Regex that will match a GUID pattern and put here
    // as route constraint
); 
```

然后当然是相应的控制器来为他们服务：

```
public class FilesController: Controller
{
    public ActionResult Index(Guid guid, string name)
    {
        var path = @"C:\files";
        var file = Path.Combine(path, guid.ToString(), name);
        file = Path.GetFullPath(file);
        if (!file.StartsWith(path))
        {
            // someone tried to be smart and send
            // files/{Guid}/..\..\creditcard.pdf as parameter
            throw new HttpException(403, "Forbidden");
        }

        // TODO: adjust the mime type based on the extension
        return File(file, "image/png");
    }
} 
```

不幸的是，在这个阶段没有什么可以阻止用户 ALPHA 请求用户 BETA 的文件，对吧？这就是你想要处理的场景，不是吗？

所以让我们编写一个自定义的 Authorize 属性来保护这个控制器动作：

```
public class MyAuthorizeAttribute: AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            // The user is not authenticated or doesn't have 
            // permissions to access this controller action
            return false;
        }

        // at this stage we know that there's some user authenticated

        // Let's get the Guid now from our route:
        var routeData = httpContext.Request.RequestContext.RouteData;

        var id = routeData.Values["id"] as string;
        Guid guid;
        if (!Guid.TryParse(id, out guid))
        {
            // invalid Guid => no need to continue any further, just deny access
            return false;
        }

        // Now we've got the GUID that this user is requesting

        // Let's see who this user is:
        string username = httpContext.User.Identity.Name;

        // and finally ensure that this user
        // is actually the owner of the folder
        return IsAuthorized(username, guid);
    }

    private bool IsAuthorized(string username, Guid guid)
    {
        // You know what to do here: hit your data store to verify
        // that the currently authenticated username is actually
        // the owner of this GUID
        throw new NotImplementedException();
    }
} 
```

然后让我们用这个授权属性来装饰我们的控制器动作：

```
public class FilesController: Controller
{
    [MyAuthorize]
    public ActionResult Index(Guid guid, string name)
    {
        // at this stage we know that the currently authenticated user
        // is authorized to access the file.

        var path = @"C:\files";
        var file = Path.Combine(path, guid.ToString(), name);
        file = Path.GetFullPath(file);
        if (!file.StartsWith(path))
        {
            // someone tried to be smart and send
            // files/{Guid}/..\..\creditcard.pdf as parameter
            throw new HttpException(403, "Forbidden");
        }

        var file = Path.Combine(@"c:\files", guid.ToString(), name);
        // TODO: adjust the mime type based on the extension
        return File(file, "image/png");
    }
} 
```

# javascript - JavaScript 中是否有速度端口

> ID：14247394
> 
> 赞同：0
> 
> 时间：2013-01-09T22:09:01.910
> 
> 标签：javascript, velocity, vtl

我知道 apache velocity 可用于 Java 和 .NET。是否还有 JavaScript 的端口？我的目标是在浏览器中翻译 VTL 模板，而不需要往返于 Web 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:19:30.273

您可能想尝试[jsVelocity](https://github.com/vapour/jsVelocity)。它看起来并不支持所有 Velocity 功能，但这是一个开始。

# objective-c - 如何从主应用程序委托访问 viewcontroller 属性？

> ID：14247396
> 
> 赞同：0
> 
> 时间：2013-01-09T22:09:05.170
> 
> 标签：objective-c, delegates, controller, refresh, xcode4.5

我的项目是一个带有标签栏控制器和 3 个视图控制器的窗口。第一个视图控制器有一个日期选择器。我使用当天 ( `[NSDate date]`) 作为选择器的最大限制。

问题是我无法使用较新的日期刷新该选择器（例如，假设我在几天后运行该应用程序）。

在研究了这个论坛之后，我发现我必须在这个方法中进行刷新（在委托文件中）：`- (void)applicationDidBecomeActive:(UIApplication *)application`

但是我无法从那里创建对第一个视图控制器的正确引用。我试图使用一个指针，`[self.window.rootViewController.tabBarController.viewControllers objectAtIndex:0]`但它似乎没有指向视图控制器。

有人对这个问题有任何想法吗？

这是代码：

```
//
//  PNAppDelegate.m
//

#import "PNAppDelegate.h"
#import "PPPViewController.h"
#import "IGPreviaViewController.h"
#import "IGUsgViewController.h"

@implementation PNAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    PPPViewController *pppvc = [[PPPViewController alloc] init];

    IGPreviaViewController *igpvc = [[IGPreviaViewController alloc] init];

    IGUsgViewController *iguvc = [[IGUsgViewController alloc] init];

    UITabBarController *tabBarController = [[UITabBarController alloc] init];
    NSArray *viewControllers = [NSArray arrayWithObjects:pppvc, igpvc, iguvc, nil];
    [tabBarController setViewControllers:viewControllers];

    [[self window] setRootViewController:tabBarController];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{

    PPPViewController *pppvc = [self.window.rootViewController.tabBarController.viewControllers objectAtIndex:0];

    [pppvc.dumPicker setMaximumDate:[NSDate date]];

   // Here I don't know how to proceed in order to refresh the picker in the first viewcontroller

}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end

//
//  PPPViewController.m
//

#import "PPPViewController.h"
#import "IdadeGestacional.h"

@implementation PPPViewController

@synthesize dumPicker,idadeGest,dataParto,periodoParto,dum;

-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nil bundle:nil];
    if (self) {
        UITabBarItem *tbi = [self tabBarItem];
        [tbi setTitle:@"IG/DPP"];

        UIImage *i = [UIImage imageNamed:@"calendario.png"];

        // Put that image on the tab bar item
        [tbi setImage:i];

    }
    return self;
}

-(void)viewDidLoad
{
    [super viewDidLoad];

   // cria o dumPicker

    dum = [self acertaData:[NSDate date]];

    dumPicker = [[UIDatePicker alloc]initWithFrame:CGRectMake(0, 80, 0, 0)];
    [dumPicker setTransform:CGAffineTransformMakeScale(0.8, 0.8)];
    [dumPicker setDatePickerMode:UIDatePickerModeDate];
    [dumPicker setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"pt_BR"]];

    [dumPicker setMaximumDate:[NSDate date]];

    NSDate *minDate = [[NSDate alloc] initWithTimeInterval:(-300*24*60*60) sinceDate:[NSDate date]];
    [dumPicker setMinimumDate:minDate];
    [dumPicker addTarget:self action:@selector(changeDum) forControlEvents:UIControlEventValueChanged];

    [self.view addSubview:dumPicker];

    [idadeGest setText:@""];
    [dataParto setText:@""];
    [periodoParto setText:@""];

}

-(void)changeDum
{    

   // Define a DUM (data inicial)
    NSDate *dataInicial = [[NSDate alloc]init];

    if ([[NSTimeZone localTimeZone] isDaylightSavingTime]) {
        dataInicial = [[dumPicker date] dateByAddingTimeInterval:(60*60)];
    }
    else {
        dataInicial = [dumPicker date];
    };

    dum = [self acertaData:dataInicial];

    // Calcula a IG
    IdadeGestacional *IG = [[IdadeGestacional alloc] initWithDataInicial:dum dataFinal:[self acertaData:[NSDate date]]];
    [IG calculaIG];
    [IG display];

    // Mostra a IG
    NSString *IGLabel = @"";
    if (IG.semanas)
    {
        if (IG.dias)
            IGLabel = [NSString stringWithFormat:@"%ds%dd",IG.semanas,IG.dias];
        else IGLabel = [NSString stringWithFormat:@"%ds",IG.semanas];
    } else if (IG.dias) IGLabel = [NSString stringWithFormat:@"%dd",IG.dias];

    [idadeGest setText:IGLabel];

    // Calcula a DPP
    NSDate *dpp = [[NSDate alloc] initWithTimeInterval:(280*24*60*60) sinceDate:dataInicial];

    // Mostra a DPP
    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"dd/MM/yyyy"];

    [dataParto setText:[df stringFromDate:dpp]];

    // Calcula o PPP
    NSDate *pppi = [[NSDate alloc] initWithTimeInterval:(266*24*60*60) sinceDate:dataInicial];
    NSDate *pppf = [[NSDate alloc] initWithTimeInterval:(294*24*60*60) sinceDate:dataInicial];

    // Mostra o PPP
    NSString *PPParto = [NSString stringWithFormat:@"%@ a %@",[df stringFromDate:pppi],[df stringFromDate:pppf]];
    [periodoParto setText:PPParto];

}

-(NSDate *)acertaData:(NSDate *)dataBruta
{

    unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit ;

    NSDateComponents *comps = [[NSCalendar currentCalendar] components:unitFlags fromDate:dataBruta];

    NSDate *novaData = [[NSCalendar currentCalendar] dateFromComponents:comps];

    [self mostraData:novaData];

    return novaData;
}

-(void)mostraData:(NSDate *)dataBruta
{
    unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit | NSTimeZoneCalendarUnit | NSCalendarCalendarUnit;
    NSDateComponents *comps = [[NSCalendar currentCalendar] components:unitFlags fromDate:dataBruta];

    NSLog(@"nova data");
    NSLog(@"%d %d %d %d %d %d %@ %@",comps.year,comps.month,comps.day,comps.hour,comps.minute,comps.second,comps.timeZone.abbreviation,comps.calendar.calendarIdentifier);
    NSLog(@"%@",comps.timeZone.name);
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:27:11.740

为什么要在应用程序委托中而不是在视图控制器中执行此操作？`AppDelegate`负责应用程序范围的任务（因此它采用了委托方法）。如果您需要在视图控制器中刷新视图，请在视图控制器中进行——这就是 MVC 设计模式的重点。

在 a 的情况下`UITabBarController`，我会在`viewWillAppear`. 在此方法中，您可以更新`maximumDate`属性的值。

**更新：**如果在重新激活应用程序时被调用`viewWillAppear:`或`viewDidAppear:`似乎没有被调用，您可以在视图控制器内订阅 AppDelegate 通知。Apple 的委托范例遵循一种政策，即他们倾向于广播与委托方法匹配的通知。举个例子：有一个 NSNotification 叫做`UIApplicationDidBecomeActiveNotification`. 您可以通过以下方式订阅此通知`viewWillAppear:`：

```
- (void)viewWillAppear:(BOOL)animated {
   [super viewWillAppear:animated];
   [[NSNotificationCenter defaultCenter] addObserver:self 
                                            selector:@selector(applicationDidBecomeActive:) 
                                                name:UIApplicationDidBecomeActiveNotification 
                                              object:nil];
}

- (void)applicationDidBecomeActive:(NSNotification *)note {
   self.datePicker.maximumDate = [NSDate date];
} 
```

只要确保删除这个观察者`viewWillDisappear:`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T22:15:05.503

在您的 PPPViewController 头文件和实现文件中，创建一个名为 `- (void)refreshPicker;`

在您实施此方法时，请像这样设置您的 dumPicker 的 maximumDate：

```
- (void)refreshPicker
{
    [self.dumPicker setMaximumDate:[NSDate date]];
} 
```

使用通知。在 applicationDidBecomeActive 方法中，可以调用

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"refreshPicker" object:nil]; 
```

在您的 PPPViewController 的 viewDidLoad 方法中，您可以通过添加以下代码行来添加观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(refreshPicker) object:nil]; 
```

# jquery - jQueryUI 对话框裁剪内容？

> ID：14247398
> 
> 赞同：0
> 
> 时间：2013-01-09T22:09:13.500
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

这是一个演示问题的[小提琴。](http://jsfiddle.net/eqga3/)

首先，我显示一个固定大小的 jQueryUI 对话框。然后我[通过动画](https://stackoverflow.com/questions/6875270/animate-jquery-ui-dialog-auto-resize)将它放大到一个新的固定大小。然后我在对话框中添加新内容。新内容被原始对话窗口的高度裁剪。唉，我对如何解决这个问题的[研究](https://stackoverflow.com/questions/756325/how-can-i-make-a-jquery-ui-dialog-automatically-grow-or-shrink-to-fit-its-conten)是空白的。

```
$(function() {
  var dg = $("#dialog");
  dg.dialog( {
        height: 200,
        width: 80,
        modal: true,
        draggable: false,
        resizable: false,
        position: 'center'
  });

 dg.dialog("widget").animate({
        width: '400px',
        height: '400px'
    }, {
        duration: 500,
        step: function() {
            dg.dialog('option', 'position', 'center' );
        },
  complete: function( evt ) {
  //big --> font-size: 200px;
  dg.html( "<span class='big'>YA!</span>" );
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:09:07.700

在完整的处理程序中设置底层 DOM 元素的宽度和高度似乎可以解决问题：http: [//jsfiddle.net/SyCu2/](http://jsfiddle.net/SyCu2/)

例如

```
complete: function( evt ) {
      dg.width(400).height(400);
      dg.html( "<span class='big'>YA!</span>" );
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:01:52.350

使用`minHeight`而不是`height`. [http://jsfiddle.net/kGJbj/](http://jsfiddle.net/kGJbj/)

# android - 从 XML 文件中的其他元素列表中过滤某些 Switch 元素

> ID：14247400
> 
> 赞同：0
> 
> 时间：2013-01-09T22:09:14.763
> 
> 标签：android, traversal

我正在创建一个 android 应用程序，其中我有一个包含 Switch、TextView 等多个元素的活动。

无论是否选中，我都需要从所有 Switch 元素中获取值。

如果有人向我展示将多个值传输到不同活动以进行进一步计算的正确方法，那就太好了。

谢谢

这是我的 XML 代码：

```
 <LinearLayout
                android:id="@+id/configSwitchHldr"
                android:layout_marginTop="10dp"
                android:layout_span="2"
                android:gravity="center"
                android:orientation="vertical"
                android:paddingLeft="30dp"
                android:paddingRight="30dp" >

                <TextView 
                    android:text="@string/coreHardware"
                    android:layout_width="fill_parent"
                    android:layout_height="20dp"
                    android:textColor="@color/green"
                    android:layout_marginTop="10dp"
                    android:layout_marginBottom="10dp"
                    />
                <View 
                   android:layout_width="fill_parent"
                   android:layout_height="2dp"       
                   android:background="#363636" />
                <Switch
                    android:id="@+id/switch1"
                    android:layout_width="fill_parent"
                    android:layout_height="14.5sp"
                    android:textOn="ON"
                    android:textOff="OFF"
                    android:text="CPU"              
                    android:paddingLeft="5dp"
                    android:paddingRight="5dp"
                    android:layout_marginTop="10dp"
                    android:layout_marginBottom="10dp"
                    />
                <View 
                   android:layout_width="fill_parent"
                   android:layout_height="1dp"       
                   android:background="#363636" />

                <Switch
                    android:id="@+id/switch2"
                    android:layout_width="fill_parent"
                    android:layout_height="14.5sp"
                    android:textOn="ON"
                    android:textOff="OFF"
                    android:text="Memory" 
                    android:paddingLeft="5dp"
                    android:paddingRight="5dp"
                    android:layout_marginTop="10dp"
                    android:layout_marginBottom="10dp"/>

                <View 
                   android:layout_width="fill_parent"
                   android:layout_height="1dp"       
                   android:background="#363636" />

                <Switch
                    android:id="@+id/switch3"
                    android:layout_width="fill_parent"
                    android:layout_height="14.5sp"
                    android:textOn="ON"
                    android:textOff="OFF"
                    android:text="Storage" 
                    android:paddingLeft="5dp"
                    android:paddingRight="5dp"
                    android:layout_marginTop="10dp"
                    android:layout_marginBottom="10dp"/>

                <View 
                   android:layout_width="fill_parent"
                   android:layout_height="1dp"       
                   android:background="#363636" />

            </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:06:20.317

好的，所以根据您的评论，这是可以做到的：

在您的第一个`Activity`中，您需要一个方法，该方法收集所有开关状态并将它们传递给下一个活动。将参数传递给其他活动可以通过将它们放入`Intent`您发送的新活动中来实现`Activity`。

获取`Switches`状态并将它们传递给新状态的方法`Activity`大致如下所示：

```
Intent i = new Intent(MainActivity.this, NewActivity.class);
i.putExtra("switch1", switch1.isChecked());
i.putExtra("switch2", switch2.isChecked());
i.putExtra("switch3", switch3.isChecked());
startActivity(i); 
```

将其放在 onClickListener 中`Button`，例如：

```
button1 = (Button) findViewById(R.id.button1);
button1.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        Intent i = new Intent(MainActivity.this, NewActivity.class);
        i.putExtra("switch1", switch1.isChecked());
        i.putExtra("switch2", switch2.isChecked());
        i.putExtra("switch3", switch3.isChecked());
        startActivity(i);
    }
}); 
```

现在，当您单击 时，`Button`您将被发送到 NewActivity。

要检索从 MainActivity 传递的参数，您应该在 NewActivity 的 onCreate 方法中执行以下操作：

```
boolean bool1 = getIntent().getExtras().getBoolean("switch1");
boolean bool2 = getIntent().getExtras().getBoolean("switch2");
boolean bool3 = getIntent().getExtras().getBoolean("switch3"); 
```

您可以通过将变量放在布尔数组中来从 MainActivity 传递变量，但在我看来这太过分了。

另请查看此 SO 帖子：[如何在 Android 应用程序中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)- 这些有很多。

# reportviewer - ReportViewer10导出到excel 2007，复制粘贴改颜色

> ID：14247401
> 
> 赞同：1
> 
> 时间：2013-01-09T22:09:17.650
> 
> 标签：reportviewer

我的问题：

我用 Visual Studio 2010（ReportViewer 10，客户端报告）创建了一个报告。然后将我的报告中的一个表格或一些具有背景颜色（例如蓝色）的单元格复制并粘贴到一个新的 excel 文件中（而不是同一个 excel 文件中的另一个选项卡）。蓝色变成红色。

我认为该报告是用 Excel 2003 生成的，我猜。有没有办法告诉它用 excel 2007 导出 excel 文件？

# c# - 使用 lambda 表达式模拟具有多次调用的存储库

> ID：14247406
> 
> 赞同：0
> 
> 时间：2013-01-09T22:09:51.240
> 
> 标签：c#, unit-testing

我正在测试一个递归函数，该函数用于根据数据库中的数据构建树。出于这个问题的目的，只需假设实体有自己的实体 id，然后是其父实体的 id。

在递归函数的每次调用期间，它都会针对存储库运行：

```
 List<MyEntity> children = dsService.GetMany<MyEntity>(x => x.ParentId == currentId) 
```

通常，我只是模拟存储库并设置如下内容：

```
dsService.GetMany<MyEntity>(x => x.ParentId == 1).Returns(new List<MyEntity> { });
dsService.GetMany<MyEntity>(x => x.ParentId == 2).Returns(new List<MyEntity> { myentity, myotherentity}); 
```

但是，NSubstitute（基于快速谷歌搜索，其他模拟框架，但我承认我不是超级彻底）在 LINQ 查询方面存在问题，除非查询完全相同，否则我无法使用它来确定返回什么（相同的变量名、相同的顺序等）。我还看到我可以将第一个函数调用设置为 GetMany（不管参数如何）返回一个东西，第二个返回另一个，等等。

我不太喜欢这两种方法，因为第一种方法假设函数调用/树遍历将始终以完全相同的顺序进行（实际上，当我正在阅读本文时，因为它处于循环中，它会每次都使用 currentId 作为变量名，这样就行不通了，因为无法区分调用），第二个假设变量的顺序，变量的名称等将保持完全相同. 在这些情况下，重构可以/将破坏单元测试。

那么这里最好的方法是什么？有没有可以处理这样的 lambdas 的模拟框架？我最好的方法是创建一个包含列表的假存储库，以便单元测试查询并返回相关结果？完全不同的东西？

# ios - 视图控制器 iOS 6 之间的立方体动画

> ID：14247407
> 
> 赞同：0
> 
> 时间：2013-01-09T22:09:51.147
> 
> 标签：ios, uiview, uiviewcontroller, core-animation

我想创建一个具有 6 个视图的应用程序，例如立方体的侧面，并且能够在每个方向上滑动以移动到立方体的另一侧。

所以我想要一个看起来像正在旋转的立方体的视图控制器之间的动画。

一些旧帖子（例如[立方体结构视图控制器](https://stackoverflow.com/questions/9829504/cube-structure-view-controllers)）提到在 CATransition 中使用 @"cube" 作为过渡类型，并调用 UIViewController 的 transitionFromViewController:toViewController:duration:options:animations:completion 方法来轻松地在两个视图控制器之间制作动画.

但是，iOS 6 文档和头文件没有提到使用 @"cube" 或旧（iOS 5 时代）帖子中提到的任何其他字符串文字。

而且我在 iOS 6 发行说明或 API 差异中找不到任何关于已弃用的内容。

动画有效，但我担心如果我使用它，我的应用程序会被拒绝。

会吗？有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:26:49.227

取自这里：

[http://iphonedevsdk.com/forum/iphone-sdk-development/102300-undocumenten-catransition-type.html](http://iphonedevsdk.com/forum/iphone-sdk-development/102300-undocumenten-catransition-type.html)

“我就这个具体问题询问了 Apple 的工程师。他们说，官方未记录的过渡效果就像任何其他未记录的 API 功能一样，是不允许的。

但是，他们的自动化工具并未设置为使用未记录的转换进行检测，就像他们使用未记录的方法一样，因此您可能会侥幸逃脱，也可能不会。这是一场赌博。”

# javascript - 关闭事件冒泡

> ID：14247408
> 
> 赞同：0
> 
> 时间：2013-01-09T22:10:03.187
> 
> 标签：javascript, events, dom-events, google-closure, google-closure-library

我正在 Google 闭包中开发一个网络应用程序，其结构如下所示：

```
App
  + Control Pane
  |  + Search Box
  |  + Search Button
  + Result Pane
     + Results
     + Next Page Link 
```

实际的组件结构要复杂得多。重要的一点是，整个组件树中有许多不同的组件可以启动某些操作。在此示例中，按 enter in `Search Box`、按`Search Button`或按`Next Page`all 需要进行查询。

这很容易处理。组件树中任何地方的任何孩子都可以做

```
this.dispatchEvent(App.EventType.ACTION, ...) 
```

`App`当事件向上传播时将能够收听它。问题是另一个方向：当`App`从它的查询中接收到数据时，它必须将它推送给所有的孩子。

`App`尝试直接推送到`Search box`and似乎很脆弱`Results`，因为它们在组件树中的位置可能会发生变化。我想做的是触发一个`App.EventType.DATA_RECEIVED`事件并让所有孩子（和子孩子等）听到它。

我能找到的在谷歌关闭中做到这一点的唯一方法是创建一个全局公共单例实例`App`并用作所有`App.EventType.DATA_RECEIVED`事件的源，或者`App`深入到所有子项和子项。

这两者都以自己的方式混乱而脆弱。

有没有一种简单的方法可以在关闭时分派向下冒泡的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:46:04.470

这不是一个非常令人满意的答案，但这是我决定的：

没有好的方法可以在组件树中传递这些*东西*。甚至闭包本身也会遇到这个问题，将`opt_domHelper`树向下传递到每个子组件。

我的建议是`goog.ui.Component`为您的应用程序子类化并创建一个`myapp.Environment`类，其中包含`opt_domHelper`其他环境变量和其他环境变量，例如指定为应用程序事件通道的一个事件侦听器。

这本身不是一个*好的解决方案，但它是所有可能的弊端中最小的一个。*而且，如果您已经尽职尽责地`opt_domHelper`到处传递，那么问题也不会更糟：管道变得更具可扩展性，并且其`opt_domHelper`本身对实现者隐藏（他们现在`environment`改为四处传递）。

# javascript - 以编程方式进行 Chrome 堆快照

> ID：14247411
> 
> 赞同：5
> 
> 时间：2013-01-09T22:10:10.987
> 
> 标签：javascript, google-chrome-devtools, heap-memory

我希望通过外部程序调用 Chrome/Chromium 的堆快照，或者能够将其作为 Chrome 浏览器的快捷方式提供。我查看了调试协议 API，但找不到此功能的任何 API。任何帮助是极大的赞赏。

谢谢，阿什温

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:56:44.580

API 是隐藏的，因为它不稳定。不过你可以使用它。有一个项目[leak-finder-for-javascript](https://code.google.com/p/leak-finder-for-javascript/)拍摄快照并检查闭包库中的泄漏。协议的完整规范在[这里](http://trac.webkit.org/browser/trunk/Source/WebCore/inspector/Inspector.json)。

# ios - 供应门户，付费会员？

> ID：14247414
> 
> 赞同：0
> 
> 时间：2013-01-09T22:10:21.350
> 
> 标签：ios, provisioning-profile

> **可能重复：**
> [在没有苹果开发者程序或越狱的设备上测试 iOS 应用程序](https://stackoverflow.com/questions/4952820/test-ios-app-on-device-without-apple-developer-program-or-jailbreak)

我需要在我的 iPhone 上构建一个应用程序，并且需要下载一个配置文件，我必须支付 99 美元的会员费吗？即使我还没有准备好部署到应用商店？

所以我还在摆弄这个应用程序，还没准备好投入生产，我还要支付 99 美元吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:13:00.180

是的，Apple 不会向未注册 Apple Developer 计划的任何人提供配置文件。事实上，创建/检索配置文件的过程是通过 Apple 的在线开发人员计划网站完成的。

编辑：

这肯定是一个长镜头，但是如果您只是想将应用程序安装到您的设备上，理论上您可以要求注册该程序的朋友或同事将您的 XCode 项目添加到他们的计算机上，为您的设备，然后将应用程序下载到您的设备。但同样，这至少需要有人为 Apple Developer Program 付费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:21:39.677

您必须拥有 iOS 开发者计划（任何类型）的付费会员才能在您的设备上运行应用程序，或提交到 App Store。

有关详细信息，请参阅[Apple 的开发者计划页面](https://developer.apple.com/programs/start/ios/%20%22Apple%27s%20Developer%20Program%20Page)。

# c++ - 我知道在哪里看，也许这是一个无限循环？（C++，使用 VS2012）

> ID：14247416
> 
> 赞同：0
> 
> 时间：2013-01-09T22:10:30.880
> 
> 标签：c++, numbers, infinite-loop

嗯，我先自我介绍一下。我是 Ben，一位来自荷兰的 17 岁“游戏程序员”，他刚刚开始使用 C++ 编程（大约一个月前开始，但现在已经编程了一年）（我正在使用 Microsoft Visual Studio 2012 作为编译器）。现在，我正在“自己学习”，但我仍然使用一本书，那本书名为 Michael Dawson 的“通过游戏编程开始 C++，第三版”。

我刚刚完成了第二章，最后的练习是：“编写一个新版本的猜我的号码程序，玩家和计算机在其中切换角色。也就是说，玩家选择一个数字，计算机必须猜它是什么。”

以下是“猜我的号码”程序的代码：

```
// Guess My Number
// The classic number guessing game

#include <iostream>
#include <cstdlib>
#include <ctime>

using namespace std;

int main()
{
    srand(static_cast<unsigned int>(time(0)));  //seed random number generator

    int secretNumber = rand() % 100 + 1;    // random number between 1 and 100
    int tries = 0;
    int guess;

    cout << "\tWelcome to Guess My Number\n\n";
    do
    {
        cout << "Enter a guess: ";
        cin >> guess;
        ++tries;

        if (guess > secretNumber)
        {
            cout << "Too high!\n\n";
        }
        else if (guess < secretNumber)
        {
            cout << "Too low!\n\n";
        }
        else
        {
            cout << "\nThat's it! You got it in " << tries << " guesses!\n";
        }
    } while (guess != secretNumber);

    return 0;
} 
```

现在，我忙于思考、编程测试，但它根本行不通。看来我陷入了这样的无限循环。但我找不到问题。

这是代码，欢迎使用其他方法来解决此问题，请记住，我不太了解该语言。;)

```
// Guess My Number 2
// The classic number guessing game with a twist

#include <iostream>
#include <cstdlib>
#include <ctime>

using namespace std;

int main()
{
    srand(static_cast<unsigned int>(time(0)));

    int secretNumberComputer = rand() % 100 + 1;
    int secretNumberPlayer;
    int triesPlayer = 0;
    int triesComputer = 0;
    int guessPlayer;
    int guessComputer;
    int tooHighPlayer;
    int tooLowPlayer;
    int correctPlayer;
    int tooHighComputer;
    int tooLowComputer;
    int correctComputer;
    int selectNumberIncorrect;
    int lowerGuessComputer = 101;
    int higherGuessComputer = 0;

    cout << "Welcome to Guess My Number\n\n";   

    do
    {
        cout << "Enter a guess: ";
        cin >> guessPlayer;
        ++triesPlayer;

        tooHighPlayer = (guessPlayer > secretNumberComputer);
        tooLowPlayer = (guessPlayer < secretNumberComputer);
        correctPlayer = (guessPlayer == secretNumberComputer);

        if (tooHighPlayer)
        {
            cout << "Too high!\n\n";
        }
        else if (tooLowPlayer)
        {
            cout << "Too low!\n\n";
        }
        else if (correctPlayer)
        {
            cout << "\nThat's it! You got it in " << triesPlayer << " guesses!\n\n";
            break;
        }
        else
        {
            cout << "Error, check code!\n\n";
            break;
        }
    } while (!correctPlayer);

    cout << "Now it's time for you to pick a number and then the computer will guess.\nEnter a number between 1 and 100: ";

    do
    {
        cin >> secretNumberPlayer;
        selectNumberIncorrect = (secretNumberPlayer > 100 || secretNumberPlayer < 1);
        if (selectNumberIncorrect)
        {
            cout << "\nHey, that isn't a number between 1 and 100! Please pick a number that is: ";
        }
        else
        {
            break;
        }
    } while (selectNumberIncorrect);

    guessComputer = (rand() < lowerGuessComputer && rand() > higherGuessComputer);
    cout << "\n\nNow the computer is going to try to guess your number:" << endl;
    cout << "Computer, take a guess: " << guessComputer << endl;
    ++triesComputer;

    tooHighComputer = (guessComputer > secretNumberPlayer);
    tooLowComputer = (guessComputer < secretNumberPlayer);
    correctComputer = (guessComputer == secretNumberPlayer);
    lowerGuessComputer = (rand() % 100 + 1 && rand() < guessComputer);
    higherGuessComputer = (rand() % 100 + 1 && rand() > guessComputer);

    if (tooHighComputer)
    {
        cout << "Too High!\n\n";
        guessComputer = lowerGuessComputer;
    }
    else if (tooLowComputer)
    {
        cout << "Too Low!\n\n";
        guessComputer = higherGuessComputer;
    }
    else if (correctComputer)
    {
        cout << "\nThat's it! You got it in " << triesComputer << " guesses!\n\n";
    }
    else
    {
        cout << "Error, check code!\n\n";
    }

    do
    {
        cout << "Computer, take a guess: " << guessComputer << endl;
        ++triesComputer;

        if (tooHighComputer)
        {
            cout << "Too High!\n\n";
            guessComputer = lowerGuessComputer;
        }
        else if (tooLowComputer)
        {
            cout << "Too Low!\n\n";
            guessComputer = higherGuessComputer;
        }
        else if (correctComputer)
        {
            cout << "\nThat's it! You got it in " << triesComputer << " guesses!\n\n";
            break;
        }
        else
        {
            cout << "Error, check code!\n\n";
            break;
        }
    } while (!correctComputer);

    if (triesComputer < triesPlayer)
    {
        cout << "You lost against the computer!\n\n";
    }
    else if (triesComputer > triesPlayer)
    {
        cout << "You won!\n\n";
    }
    else
    {
        cout << "It's a tie!\n\n";
    }

    cout << "Thank you for playing! Goodbye!" << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:21:00.823

在此块中，您不会检查计算机的猜测是否正确（分配正确的计算机），因此循环将永远持续下去，除非它第一次猜测正确。

```
do
{
    cout << "Computer, take a guess: " << guessComputer << endl;
    ++triesComputer;

    if (tooHighComputer)
    {
        cout << "Too High!\n\n";
        guessComputer = lowerGuessComputer;
    }
    else if (tooLowComputer)
    {
        cout << "Too Low!\n\n";
        guessComputer = higherGuessComputer;
    }
    else if (correctComputer)
    {
        cout << "\nThat's it! You got it in " << triesComputer << " guesses!\n\n";
        break;
    }
    else
    {
        cout << "Error, check code!\n\n";
        break;
    }
} while (!correctComputer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:18:28.000

您的第二个`do`循环永远不会重新计算计算机的猜测。

即你让计算机在循环之前猜测一个数字*，*然后在`do`循环中你不断检查那个猜测*是*太高还是太低，从不重新计算它的值。它显然永远不会结束。

您需要在第二个循环内进行计算机的猜测计算。

编辑

另外，这个逻辑是不正确的：

```
lowerGuessComputer = (rand() % 100 + 1 && rand() < guessComputer);
higherGuessComputer = (rand() % 100 + 1 && rand() > guessComputer); 
```

猜测将始终为 0 或 1，因为右侧运算的结果是布尔值。事实上，我不知道你想在那里做什么。您在`&&`整数和布尔值之间执行。我也不明白你为什么要计算两种不同的猜测——你应该在给定的较高/较低参数范围内计算一个数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T23:17:33.603

除了 Kevin Tran 写的内容，请检查 cin 的有效输入类型。

想象一下有人输入字符而不是整数。

所以

```
cin >> guessPlayer; 
```

可以写成

```
if (cin >> guessPlayer) {
        // Do you logic here
    }
else {
 cout<<"Enter numbers only. :)";endl;
 continue;
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T22:58:51.730

与其分析您发布的有许多缺陷的代码，不如考虑一下您的程序必须做什么：用户将选择一个随机数，计算机将尝试猜测该数字。

所以，你的程序流程应该是这样的：

计算机选择一个随机数。它打印出来并要求用户选择数字是否太高、太低或正确。（即要求用户输入“1”如果太高，“2”如果太低，或者“3”如果正确）。

如果用户键入“3”，那么显然你已经完成了。

如果它太高，计算机会选择一个新的随机数（小于它最后的猜测）并再次尝试上述逻辑。

如果它太低，计算机会选择一个新的随机数（大于它最后的猜测）并再次尝试上述逻辑。

现在让我们尝试实现一些实现上述内容的代码：

```
using namespace std;

int main()
{
    int range_low = 0;    // The number the user picked is greater than this
    int range_high = 100; // The number the user picked is smaller than this

    srand(static_cast<unsigned int>(time(0)));

    do
    {
        // We want to generate a random number between range_low and range_high. We do this
        // by generating a random number between zero and the difference of "low" and "high"
        // adding it to low and adding one more.           
        int guess = range_low + ((rand() % (range_high - range_low)) + 1);

        cout << "I'm guessing your number is " << guess << "... how did I do?" << endl
             << "    [1: too high, 2: too low, 3: you got it!] ";

        // Now let's see how we did...

        int choice;

        cin >> choice;

        if(choice == 3)
        {
            cout << "Be amazed at my psychic powers! For I am a computer!" << endl;
            break;
        }

        if(choice == 2)
        { 
            cout << "Hmm, ok. I was sure I had it. Let's try again!" << endl;
            range_low = guess;
        }

        if(choice == 1)
        {
            cout << "Really? Ok, ok, one more try!" << endl;
            range_high = guess;
        }
    } while(true);

    return 0;
} 
```

这里有两个练习可以帮助您改善上述情况：

首先，尝试将这段代码的逻辑与您的代码的逻辑进行比较，看看您的代码有何不同——尝试理解为什么它是错误的。尝试使用笔和纸执行程序会有所帮助，就像您是一台理解 C++ 的计算机一样。

其次，尝试添加代码以确保计算机永远不会将相同的数字猜两次。

# php - 如何从 csv 文件中提取 2 个配对元素并使用 PHP 将它们添加到数组中？

> ID：14247417
> 
> 赞同：0
> 
> 时间：2013-01-09T22:10:42.443
> 
> 标签：php, arrays, csv

我有几个包含产品订单信息的 csv 文件。我的 csv 文件如下所示：

```
order_number,sku,qty,price_per,total_price
12345,55555,25,4,100
12346,33333,10,5,50
12347,55555,20,4,80 
```

我在查找`total_price`所有交易时没有任何问题，但我如何才能找到每个产品的总数？我尝试为每个创建一个数组，但我不知道如何将`sku`和`total_price`元素绑定在一起。

**更新#2**

因为我不能有一个匹配键的数组，而且我无论如何都想在这里结束，我怎样才能得到这样的数组：

```
Array(
      [55555] => 180
      [33333] => 50
     ) 
```

如果有人对我如何制作这个数组有任何想法，那就太好了。谢谢！

**更新#1**

抱歉，我添加了我的代码，这里是：

```
foreach($files as $file){
  $fh = fopen($file, 'rb');
  while($col = fgetcsv($fh)) {
  $csv[] = $col;
  $total = array($col[27])
  }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:50:01.963

这将做你想做的事，即创建一个数组 $totals 对 skus 的总数求和：

```
 $totals = array();
   foreach($files as $file) {
        $fh = fopen($file, 'rb');
        while($col = fgetcsv($fh)) {
          $csv[] = $col;
          $total = array($col[27])
          $totals[$col[1]] += $col[27];
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:35:46.507

当前答案不会产生您所追求的数组：

```
Array(
      [55555] => 100
      [33333] => 50
      [55555] => 80
     ) 
```

因为这无法做到——55555 不能作为密钥使用两次。另一种方法是使用以下形式的数组：

```
Array(
          [12345] => array("sku"=>55555,"total_price"=>100),
          [12346] => array("sku"=>33333,"total_price"=>50),
          [12347] => array("sku"=>55555,"total_price"=>80),
         ) 
```

此代码生成第二个数组：

```
$trans = array();
foreach($files as $file){
    $fh = fopen($file, 'rb');
    while($col = fgetcsv($fh)) {
        $trans[$col[0]] = array("sku"=>$col[0],"total_price"=>$col[27]);
    }
} 
```

假设`$col[0]`是订单并且`$col[1]`是sku。

# string - python 3中不可调用的字符串

> ID：14247418
> 
> 赞同：0
> 
> 时间：2013-01-09T22:10:44.907
> 
> 标签：string, python-3.x

我在做 Learn Python the Hard Way（第 2 版，LPTHW）的第 16 次练习时遇到了一个奇怪的问题。
我首先输入了代码，复制了它，当我在控制台上执行脚本（使用 python ex16.py test.txt）时，会出现相同的消息：

```
File "ex16.py", line 19, in <module>  
line1 = input("line 1: ")  
TypeError: 'str' object is not callable 
```

代码是：

```
from sys import argv

script, filename = argv

print("We're going to erase %r." % filename)
print("If you don't want that, hit CTRL-C (^C).")
print("If you do want that, hit RETURN.")

input = ("?")

print("Opening the file...")
target = open(filename, 'w')

print("Truncating the file. Goodbye!")
target.truncate()

print("Now I'm going to ask you for three lines.")

line1 = input("line 1: ")
line2 = input("line 2: ")
line3 = input("line 3: ")

print("I'm going to write these to the file.")

target.write(line1)
target.write("\n")
target.write(line2)
target.write("\n")
target.write(line3)
target.write("\n")

print("And finally, we close it.")
target.close() 
```

这是因为 LPTHW 是为 Python 2.7 而我使用 Python 3.3 造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:14:12.200

`input`您在这里隐藏了内置函数：

```
input = ("?") 
```

等号分配给一个名为 的变量`input`，它隐藏了内置`input()`函数。删除等号，您的代码将起作用：

```
input("?") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:16:11.847

```
input = ("?") 
```

注释掉上述内容并重试脚本。

# iphone - iOS设备空闲时奇怪的崩溃？

> ID：14247423
> 
> 赞同：0
> 
> 时间：2013-01-09T22:11:02.550
> 
> 标签：iphone, ios, xcode, core-data

我正在构建一个使用 Core Data 的应用程序，一切都很好，除了一件事。如果我让应用程序闲置，它会突然抛出一个 SIGTRAP 错误，没有调试提示，也没有提示它为什么这样做。

我怀疑它与设备自动保存到它的 UIManagedDocument 时有关，因为这是唯一可以在它自己的后台运行的功能。假设是这样，是否有人对我至少可以找出发生了什么有任何想法？

**编辑：**

在了解了异常断点是什么之后（大声笑），我在 NSManagedObjectContext 队列中得到了以下错误堆栈：0_cxa_begin_catch。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:17:25.860

您是否尝试过在更新后立即提交更改以查看问题是否发生，而不是依赖自动保存功能？

# maven - 如何使用 maven 自动附加 JavaFX2 javadoc jar？

> ID：14247426
> 
> 赞同：2
> 
> 时间：2013-01-09T22:11:10.537
> 
> 标签：maven, javafx-2, javadoc, classification

我的 pom.xml 中有对 jfxrt.jar 的依赖，作为系统范围之一：

```
<dependency>
    <groupId>com.oracle</groupId>
    <artifactId>javafx</artifactId>
    <version>${java.fx.version}</version>
    <scope>system</scope>
    <systemPath>${javafx.abs.dir}</systemPath>
</dependency> 
```

问题是我还想附上这个 jar 的 javadoc。所以我去下载了javafx2 javadoc，把它打包成一个jar，使用安装文件将它安装在maven中，并使用javadoc作为分类器。结果 jar 的名称为 javafx-2.2.4-javadoc.jar。如您所知，主 jar 的名称为 jfxrt.jar。

```
<dependency>
    <groupId>com.oracle</groupId>
    <artifactId>javafx</artifactId>
    <version>${java.fx.version}</version>
    <classifier>javadoc</classifier>
</dependency> 
```

当我调用 mvn dependency:resolve -Dclassifier=javadoc 我得到：

```
[INFO] The following files have NOT been resolved:
[INFO]    com.oracle:javafx:java-source:javadoc:2.2.4 
```

我错过了什么？

问候， 奥勒良

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:00:11.290

好吧，我猜您不希望 javadoc 作为依赖项，您可能只希望 IDE 显示 JavaDoc。我刚刚在 NetBeans 中尝试了以下操作，并且成功了：

*   选择一个引用的 JavaFX 类并按 CTRL+SPACE 以显示 JavaDoc
*   弹出窗口提供了配置 JavaDoc 的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:20:22.617

不要将系统依赖项用于二进制文件，只需像使用 javadoc 一样将其安装：安装文件到本地存储库中。然后它应该开始工作

# javascript - IE 9 错误 getElementbyId：需要对象

> ID：14247439
> 
> 赞同：1
> 
> 时间：2013-01-09T22:11:49.353
> 
> 标签：javascript, vbscript

出于某种原因，下面的 VBS 在 IE 8 中就像一个魅力，但在我的两台笔记本电脑上的 IE9 中，我在`.getElement`.

请问我该如何解决这个问题。

```
WScript.Quit Main

Function Main
  Set IE = WScript.CreateObject("InternetExplorer.Application", "IE_")
  IE.Visible = True
  IE.Navigate "http://desistream.tv/en/index.shtml"
  Wait IE
  With IE.Document
    .getElementByID("login_username").value = "myuser"
    .getElementByID("login_password").value = "mypass"
    .getElementByID("frmLogin").submit
  End With
End Function

Sub Wait(IE)
  Do
    WScript.Sleep 500
  Loop While IE.ReadyState < 4 And IE.Busy 
  Do
    WScript.Sleep 500
  Loop While IE.ReadyState < 4 And IE.Busy 
End Sub

Sub IE_OnQuit
  On Error Resume Next
  WScript.StdErr.WriteLine "IE closed before script finished."
  WScript.Quit
End Sub 
```

**编辑**

这是我到目前为止在 JScript 中得到的

```
var WshShell = WScript.CreateObject("WScript.Shell");
WshShell.Run("Chrome www.desistream.tv", 10, true);
WScript.Sleep(500); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:13:21.443

您需要使用正确的名称。您给出的名称是 Name 属性，而不是 ID，因此：

```
.getElementByID("login_username").value = "myuser"
.getElementByID("login_password").value = "mypass" 
```

应该：

```
.getElementByID("username").Value = "myuser"
.getElementByID("pass").Value = "mypass" 
```

# jquery - JQuery 在我的 Google Chrome 扩展程序、内容脚本中不起作用？

> ID：14247443
> 
> 赞同：3
> 
> 时间：2013-01-09T22:12:03.163
> 
> 标签：jquery, google-chrome-extension, content-script

正如 chrome 扩展开发教程中提到的，我可以在我的`manifest.json`文件中包含 jQuery，以便在内容脚本中使用它，如下所示：

```
"content_scripts": [
    {
      "matches": ["http://www.google.com/*"],
      "css": ["mystyles.css"],
      "js": ["jquery.js", "myscript.js"]
    }
  ], 
```

我这样做了。但是当我打开 javascript 控制台并单击我的扩展程序的浏览器操作图标时，我看到错误：“未捕获的 ReferenceError：$ 未定义”。

我该怎么办！？我不明白出了什么问题。

* * *

来自 OP 的更新，最初作为答案发布：

根据要求，这是我的完整清单和内容脚本示例。清单.json：

```
"name": "My Extension",
"version": "1.0",
"manifest_version": 2,

"browser_action": {
"default_icon": "icon.png",
"default_popup": "popup.html",
"default_title": "My Extension"
},

"background": {"page": "background.html"},
"content_scripts": [{
"matches": ["http://*/*","https://*/*"],
"js": ["jquery-1.8.3.js","content.js"]
}],

"permissions": ["tabs", "http://*/*", "https://*/*"] 
```

内容脚本片段：

```
var message = $('body').width();
chrome.extension.sendMessage (message); 
```

* * *

* * *

回复 rsanchez 的回答。我将尝试详细解释。众所周知，我们可以打开两个 javascript 控制台。第一个与扩展的 popup.html 相关联，第二个与当前打开的网页相关联。我在内容脚本和 popup.html 中包含的脚本中有以下代码片段（例如）

```
var = bodyWidth$('body').width(); 
console.log(bodyWidth); 
```

当我打开与当前打开的网页关联的控制台时，我收到上面提到的错误，但是当我打开与扩展的 popup.html 关联的 js 控制台时，我可以看到控制台中显示的正文宽度。这意味着 popup.html 中包含的脚本不是指 jQuery 库和内容脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:22:30.297

Google Chrome 不支持`jquery.js`清单中的外部文件。
您必须[下载 jquery](http://code.jquery.com/jquery-1.8.3.min.js)并将其放在扩展文件夹中。然后，您可以将其添加到`manifest.json`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:41:59.513

如果你想在包含在的脚本中使用 jQuery `popup.html`，你需要`jquery.js`在`popup.html`你的脚本之前包含。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-15T16:21:13.123

您需要参考下面的 jquery.js 文件，类似于内容脚本 js 文件。它对我有用。

```
chrome.windows.getCurrent( function(currentWindow) {
  chrome.tabs.query({active: true, windowId: currentWindow.id}, function(activeTabs){
    chrome.tabs.executeScript(
      activeTabs[0].id, {file: 'jquery.min.js', allFrames: true}
    );
    chrome.tabs.executeScript(
      activeTabs[0].id, {file: 'select_links.js', allFrames: true}
    );
  });
  console.log(currentWindow.id);
}); 
```

# android - 像素大小相同但屏幕大小和分辨率不同

> ID：14247447
> 
> 赞同：1
> 
> 时间：2013-01-09T22:12:21.627
> 
> 标签：android, android-layout, layout, screen-resolution, screen-size

我有一个 android 项目，其中包含用于大屏幕和 mdpi 的布局和资源（资源位于文件夹“layout”、“drawable”和“drawable-mdpi”中）。布局主要是相对的，但一些边距以绝对 dp 值给出。

屏幕在具有上述规格（大/mdpi：又名设备 1）和 480x800 像素分辨率的设备上看起来非常完美。现在，我有另一个设备，它具有相同的 480x800 像素分辨率，但由于屏幕更小，它的屏幕尺寸正常和 hdpi（又名设备 2）。设备 2 上的屏幕看起来非常混乱（元素重叠等）

由于两个设备上的像素分辨率相同，因此应该可以轻松地为设备 2 创建完美贴合的屏幕。如果我不关心在设备 2 上物理上看起来更小的元素，那么仅在物理上“缩放”我的布局（以适应设备 2）的方法是什么？

只是将 drawable-mdpi 复制到 drawable-hdpi 会有所帮助，但仍然存在问题。布局中的绝对 dp 边距是问题吗？是否应该将它们替换为像素相关的并且一切正常？

一般来说，当我想在具有不同像素分辨率的设备上使用最初为特定像素分辨率创建的设计并且我不太关心元素看起来更小或更大时，最佳实践是什么？

在我的情况下，我基本上只是想“缩放”原始设计并且我不太关心垂直尺寸（因为主视图无论如何都是可滚动的）。

# ios - 将IOS应用上传到应用商店。似乎冻结和互联网停止工作

> ID：14247449
> 
> 赞同：16
> 
> 时间：2013-01-09T22:12:38.673
> 
> 标签：ios, xcode, upload

在 Xcode 中，我创建了应用程序的存档。验证没问题。然后当我单击分发时，我会得到“您的应用程序正在上传”并显示进度条。酒吧永远不动，几分钟后我的互联网中断了。我需要重新启动路由器才能恢复互联网。

有一次我收到此错误“发生 SSL 错误，无法与服务器建立安全连接”

有没有人经历过这种情况或知道发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-20T10:24:27.077

**我也遇到了这个问题：“*您的应用程序正在上传卡住*”**

**我的回答是：**

***要么从管理器中删除派生数据，要么不通过 Xcode 上传，而是使用 Application Loader 尝试通过它***。

我通过 Appplication Loader 选择的步骤是：

**第 1步：**点击 Distribution 按钮，通过 Ad-Hoc Deployment 制作 .ipa 文件。

**Step2：**从 Xcode 的菜单栏找到 -> Open Developer Tool -> Application Loader。

**Step3：**然后在Application Loader中上传那个.ipa文件。

**

## 或其他解决方案

**

**通过 XCode 上传：**

**步骤 1：**首先通过单击管理器的验证按钮来验证您的存档文件。

**Step2：**然后通过 Oraganiser 将其上传到 App Store。*这样你也可以解决这个问题*

**这是我的答案。很高兴能帮助你 ：）：）**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-31T21:13:08.293

苹果使用 java 吗？我的 Mac 上网没有问题。任何应用程序都可以下载/上传。除了 xcode 的组织者的分发或应用程序加载程序阻止整个互联网和调制解调器停止工作一段时间。

很明显不是mac问题。但苹果的上传系统策略似乎并不好。他们必须解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T22:14:57.653

我听说一些用户在运行旧版本的 Java 时会遇到问题。如果您无法更新，或者更新无法解决问题，您可以尝试：

```
sudo ln -s CurrentJDK /System/Library/Frameworks/JavaVM.framework/Versions/1.5

sudo ln -s CurrentJDK /System/Library/Frameworks/JavaVM.framework/Versions/1.5.0 
```

[（这里](https://stackoverflow.com/questions/10026248/submit-application-not-possible)有其他类似的解决方法。）

这也可能是 Internet 连接问题。

无论哪种方式，您都可以尝试[使用 Application Loader 上传您的应用程序](https://stackoverflow.com/questions/7924085/how-to-submit-an-ios-app-without-xcode)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-26T09:06:39.753

*   我更新了我的旧 Java 版本（从 21 到 51）。仍然冻结我的互联网。
*   我使用 Organizer 验证了我的存档。仍然冻结我的互联网。
*   我尝试使用 Application Loader 上传 IPA。仍然冻结我的互联网。
*   我删除了管理器中的所有旧档案。仍然冻结我的互联网。

最后，我通过 iPhone 的 Internet 将 Mac 连接到 Internet。在简历中，我通过另一个提供商将我的 Mac 连接到 Internet。**这解决了我的问题**

听起来我的陆地 ADSL 提供商对 AppStore 有一些问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-20T22:51:22.427

这将与你的mac上的防火墙有关，它可能会一起阻止java。转到设置、安全和隐私，然后转到防火墙。一旦在那里转到防火墙选项，然后应该有一个允许java通过防火墙的选项。希望对我有帮助:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-27T10:17:07.153

这是一个非常老的问题，但如果你们中的任何人仍在寻找解决方案，我停止使用 Xcode 将我的应用程序上传到应用程序商店。相反，我使用的是 Transporter (by Apple)，它似乎可以解决冻结问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-18T02:18:42.593

以上建议都不适合我。可能真正的原因是物理原因，并且与 Application Loader 使用 Internet 的方式有关。我与 Netgear 调制解调器/路由器有 ADSL2 连接，根据每个设备的网络接口的 MAC 地址为家里的每个设备分配一个固定的 IP 地址。我注意到当 Application Loader 正在上传时，我的 Windows PC 无法连接到互联网。但是，如果在 Mac mini 中我使用 Safari 进行各种操作，例如看视频，我的 Windows PC 可以访问互联网。

更奇怪的是，当应用程序加载器上传时，调制解调器/路由器很容易失去与互联网的连接，正如我从调制解调器的 LED 灯中看到的那样。在上传 20 MB 文件的任何过程中，连接都会随机丢失。

于是我在家里关掉了Windows PC、iPad、iPhone和Android设备，所以Mac mini是唯一使用互联网的设备，Application Loading终于可以一口气成功上传应用了。

我的猜测是，我的家庭电话线有一些噪音，并且 Application Loader 正在积极使用互联网，尤其是上行链路，因此对调制解调器造成压力，然后导致其他设备（如我的 Windows PC）失去连接，甚至无法解析主机。当 Safari 将视频上传到 App Store 时，没问题。

所以我的工作解决方案是让 Mac 成为唯一使用互联网的设备，因为互联网连接已经处于很差的状态，有噪音，接近失去连接的边缘。

# sql - ASP 文件中的 EOF 两次不起作用

> ID：14247450
> 
> 赞同：0
> 
> 时间：2013-01-09T22:12:38.940
> 
> 标签：sql, asp-classic

当我只使用以下一段代码时，我的代码运行良好，但是当我添加另一段时，它的结果没有显示出来。当 EOF 在同一页面上运行两次时，它似乎无法工作。如果有人可以提供帮助，将不胜感激。

```
<% while (NOT con.EOF) %>
    CODE HERE
<%con.MoveNext()
 Wend %> 
```

代码：

```
<% if not con.BOF then %>
<div style="margin-top:1em">

<form action="dbresults.htm" method="get">

      <p>Company name:<br/>
      <select name="abn">
        <option label="All companies" value="all"></option>
        <% while (NOT con.EOF) %>
       <option label="<%=con("legal")%>" value="<%=con("abn")%>"></option>
    <%con.MoveNext()
                      Wend %>
  </select>
  </p>
 <p>Categories for Creative Design:<br/>
  <select name="cat">
    <option label="All categories" value="all"></option>
    <option label="Strategic brand, marketing and communications advice" value="a"></option>
    <option label="Graphic design and layout" value="b"></option>
    <option label="Forms design" value="c"></option>
    <option label="Web design and development" value="d"></option>
    <option label="Authoring services" value="e"></option>
    <option label="Editorial services" value="f"></option>
    <option label="Translation services" value="g"></option>
    <option label="Photography and film services" value="h"></option>
    <option label="Scanning and digitisation services" value="i"></option>
    <option label="Multimedia editing services" value="j"></option>
  </select>
</p>
<input type="submit" value="Search" />
</form>
<br /><hr />

<table style="font-size:.9em;" class="contentTable">
      <tr>
            <th>ABN:</th>
            <th>Company Name:</td>
      </tr>
  <% while (NOT con.EOF) %>
      <tr>
            <td><%=con("abn")%></th>
            <td><a href="dbcomp.htm?abn=<%=con("abn")%>&cat=all">         
 <%=con("legal")%></a></td>
      </tr>
 <%
   con.MoveNext()
Wend
  %>
 </table>
</div>
 <% else %>
 <p>No records match your query.</p>
  <p><a href="dbtest.htm">Return to search page</a></p>
 <%
 end if
 con.close
 %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:17:49.213

在您的第一个 WHILE 循环 ( `while (NOT con.EOF)`) 之后，您的记录集留在 EOF，因此您的第二个循环不会做任何事情。您需要在第二次循环之前重新定位记录集中的光标。使用`con.MoveFirst()`,`con.MovePrevious()`等来重新定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:16:44.440

`con.MoveFirst()`如果要遍历同一记录集，则需要在完成第一个循环后使用。

# git - 如何按关键字/标签对 git 存储库进行分组

> ID：14247455
> 
> 赞同：7
> 
> 时间：2013-01-09T22:13:06.270
> 
> 标签：git, github, bitbucket

如何按关键字、标签或属性对多个 git 存储库进行分组？您是否必须在某些外部工具中管理存储库，或者是否可以使用 git 客户端来查找具有特定属性的所有存储库？

例如，Project1 是为客户端 X 设计的，它是为 iPad 构建的，它包含一个 jQuery 插件，并且是一个响应式布局的实验。Project2 是为 Android 构建的，并具有其他几个属性。

在典型的项目管理软件中，我可能会为每个项目创建标签和关键字，这样我就可以找到所有的 jQuery 项目，或者所有的 Android + iPad 项目。

如果没有外部项目管理软件，你能做到这一点吗？您可以直接在 git 中执行此操作，还是使用现有的 git repo 管理器（如 GitHub 或 Bitbucket）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T22:17:13.737

对于 github，您可以使用[gitrep](http://gitrep.com/)（外部 oauth 应用程序），它允许您通过标签分配来组织已加星标的存储库。它就像 del.icio.us 但用于代码。

这就是它的样子：

![在此处输入图像描述](../Images/f9bda0241347b472fbae8fa0d9759946.png)

顺便说一句，屏幕截图上的标签是自动分配的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-31T22:09:00.410

刚刚宣布了另一种将回购组合在一起的替代方案（2017 年 1 月 31 日；在 OP 提出问题 4 年后）：“[介绍**主题**](https://github.com/blog/2309-introducing-topics)”。

> 主题是在 GitHub 存储库之间创建基于主题的连接并允许您按类型、技术等探索项目的标签。

[![https://cloud.githubusercontent.com/assets/5679180/22481693/02b5bfb2-e7ab-11e6-8499-33d33c240621.png](../Images/a547fa247bda9f996a682ad587cb97cb.png)](https://i.stack.imgur.com/Gmmd6.png)

> 单击您感兴趣的主题以查找相关存储库。
> 向您的存储库添加主题也将帮助其他用户发现您的项目。

[在主题的官方文档页面上](https://help.github.com/articles/about-topics/)查看更多信息。
你可以：

*   [添加主题](https://help.github.com/articles/classifying-your-repository-with-topics/)：
    [![https://help.github.com/assets/images/help/repository/add-topic-form.png](../Images/a9b0013882c3939bea3acf36f651fa10.png)](https://i.stack.imgur.com/2Xn8D.png)
*   [按主题搜索存储库](https://help.github.com/articles/searching-repositories/#search-by-repository-topic)：例如，[`topic:jekyll`](https://github.com/search?utf8=%E2%9C%93&q=topic%3Ajekyll&type=Repositories&ref=searchresults).

# javascript - KendoUI 窗口在页面滚动时固定位置

> ID：14247458
> 
> 赞同：0
> 
> 时间：2013-01-09T22:13:17.727
> 
> 标签：javascript, css, kendo-ui

我有一个带有滚动条的长页面。当我打开模态 kenoWindow 并滚动页面时，窗口会离开查看区域。如何强制窗口保持原位？我想使它的位置固定：

> ```
> div.k-window
> {
>     position:fixed !important;
> } 
> ```

但是如果我尝试移动窗口，它会向下跳（取决于页面的滚动位置）。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:42:07.397

有一种更简单/更好的方法。下面的代码片段将使图像在屏幕上居中，并在距顶部 20% 的位置，即使您滚动：

```
$('#window').data('kendoWindow').center();

$('#window').closest(".k-window").css({
       position: 'fixed',
       margin: 'auto',
       top: '20%'
    }); 
```

与 position:fixed 结合使用，您应该会发现它的行为符合您的要求，并且代码更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T18:39:22.513

我有这个解决方案，但它涉及 jQuery 位置

`var kendo_wnd = $("#window") .kendoWindow({ title: "Title of Window", modal: true, visible: false, resizable: false, width: 500, open: function (e) { var currentWindow = $(this.element); currentWindow.closest(".k-window").position({ my: "center", at: "center", of: window }).css("position", "fixed"); // Some Code; } }).data("kendoWindow");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:52:27.613

我已经让它在页面滚动事件上重新定位窗口。

```
var fixedPosWindows = null;
var currentWindowScrollPos;

function FixWindowPos(kwin) {
    if (fixedPosWindows === null) {
        fixedPosWindows = [];
        currentWindowScrollPos = $(window).scrollTop();
        $(window).scroll(function () {
            var top = $(window).scrollTop();
            var diff = top - currentWindowScrollPos;
            for (var i = 0; i < fixedPosWindows.length ; i++) {
                var w = fixedPosWindows[i].parent();
                w.css("top", parseInt(w.css("top"), 10) + diff + "px");
            }
            currentWindowScrollPos = top;
        });
    }
    fixedPosWindows.push(kwin);
} 
```

然后我为每个想要固定位置的窗口调用该函数：

```
var w = $("#window").kendoWindow();
FixWindowPos(w); 
```

如果您销毁一个窗口，它不会从阵列中删除。因此，如果它是一个长期存在的页面，其中有很多被破坏和重新创建的窗口，它可能会有一些性能问题。但在大多数情况下，这不是问题。

**编辑：** 这里是 jsfiddle：http: [//jsfiddle.net/mahmoodvcs/GXwfN/](http://jsfiddle.net/mahmoodvcs/GXwfN/)

有更好的主意吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-22T12:21:27.837

我喜欢 KakashiJack 的解决方案，但最终简化了一点。使用 Kendo 的内置 center 函数而不是 JQuery 的位置。

[在http://docs.telerik.com/kendo-ui/web/window/overview#initialize-window-center-and-configure-button-click-action](http://docs.telerik.com/kendo-ui/web/window/overview#initialize-window-center-and-configure-button-click-action)使用剑道示例

```
$(document).ready(function(){
    var win = $("#window").kendoWindow({
        height: "200px",
        title: "Centered Window",
        visible: false,
        width: "200px",
        open: function (e) {$(this.element).closest(".k-window").css("position", "fixed")}
    }).data("kendoWindow");
});

$("#openButton").click(function(){
    var win = $("#window").data("kendoWindow");
    win.center();
    win.open();
}); 
```

# java - 将文件分发到多个文件夹而不是单个文件夹的原因

> ID：14247463
> 
> 赞同：1
> 
> 时间：2013-01-09T22:13:35.810
> 
> 标签：java, file, directory

我正在审查一个用 Java 编写的遗留应用程序的代码，一个内容交付服务器。他们有一个文件存储库，其中包含的文件都以其内容的 MD5 哈希十六进制命名。

```
7ABC1FBF6109EAB64DF6682158317181.dat 
```

这些文件有数千个。存储库文件结构如下：

```
C:/base/resources/repository/{First two digits of hex MD5 hash}/{MD5 hash hex}.dat 
```

前任：

```
C:/base/resources/repository/7A/7ABC1FBF6109EAB64DF6682158317181.dat 
```

假设没有业务逻辑需要它（我告诉你没有），是否有任何理由可以验证这样做。应用程序获取文件请求并以文件中的内容（由哈希映射）进行响应。

我真的什么都想不出来。

该应用程序在 Linux 机器上运行，我不知道他们使用的是哪个发行版或什么文件系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:16:51.487

通过哈希的属性

```
{First two digits of hex MD5 hash}/{MD5 hash hex}.dat 
```

是没有意义的。在任何文件系统中，目录都应该在逻辑上将事物组合在一起，但根据定义，共享相同前缀的两个散列项之间没有逻辑关系。我的猜测是有人厌倦了一次在目录中看到太多文件，所以这可能与性能有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:17:31.600

当单个目录包含大量文件时，某些文件系统调用会变得非常慢，尤其是在 Windows 上。而且管理它们也更加困难，因为简单地列出它们的内容太慢并且返回的条目太多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:24:58.047

文件管理工具之类的 GUI 工具可能会挂起，或者如果该文件夹也是远程的（NAS、SAMBA），则可能需要很长时间才能简要查看内容。当然，应用程序可以更好地按日期或其他不那么随机的方式对文件进行分组。

# perl - 使用 Perl Text::CSV 解析带有特殊字符的字段

> ID：14247476
> 
> 赞同：5
> 
> 时间：2013-01-09T22:14:54.900
> 
> 标签：perl

我正在使用该[`Text::CSV`](https://metacpan.org/module/Text%3a%3aCSV)模块将行解析为制表符分隔值文件中的各个字段。

字符串中的特殊字符的示例是

```
"CEZARY Å?UKASZEWICZ, PAWEÅ? WIETESKA","BÜRO FÜR" 
```

我的代码如下：

```
my $file = $ARGV[0] or die "Need to get TSV file on the command line\n";

my $csv = Text::CSV->new({sep_char => "\t"});

open(my $data,'<', $file) or die "Could not open '$file' $!\n";

while (my $line= <$data>) {

       if($csv->parse($line)){
            my @curr_arr = $csv->fields();

        }
} # end of while

close $data; 
```

以上是我的代码的一些重要部分。我得到的错误如下：

```
cvs_xs error : 2026 - EIQ - Binary Character inside quoted field, binary off @pos 15 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T22:31:21.013

```
my $csv = Text::CSV->new({ binary => 1, sep_char => "\t"}); 
```

# java - OnKeyListener 仅在模拟器中工作

> ID：14247478
> 
> 赞同：0
> 
> 时间：2013-01-09T22:15:02.827
> 
> 标签：java, android, boolean

嗨堆栈的人......

我在让我的 onKeyListener 工作时遇到了一些问题。基本上，正如您在下面看到的，我想在按钮单击以及 EditText 框上的 onKeyListener 上开始意图。

Button click (public void sendip) 工作正常，onKeyListener (听回车键) 在模拟器中工作正常。但是，一旦我尝试在实际的 android 设备上按“Enter”键，它就不起作用了。

无论如何摆脱任何想法......将不胜感激......

```
package com.smarte.smartipcontrol;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnKeyListener;
import android.view.inputmethod.EditorInfo;
import android.widget.EditText;
import android.widget.TextView;

public class IPEntry extends Activity implements OnKeyListener {
public final static String ACTUALSMARTIP = "com.smarte.smartipcontrol.ACTU_IP";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.act_ipentry);
    savediP =(EditText)findViewById(R.id.serverIpAddress);
    savediP.setOnKeyListener(this);
}

protected void onResume() {
    super.onResume();
    SharedPreferences prefs = getPreferences(0); 
    String restoredText = prefs.getString("text", null);
    if (restoredText != null) {
        savediP.setText(restoredText, TextView.BufferType.EDITABLE);

        int selectionStart = prefs.getInt("selection-start", -1);
        int selectionEnd = prefs.getInt("selection-end", -1);
        if (selectionStart != -1 && selectionEnd != -1) {
            savediP.setSelection(selectionStart, selectionEnd);
        }
    }
}

protected void onPause() {
    super.onPause();
    SharedPreferences.Editor editor = getPreferences(0).edit();
    editor.putString("text", savediP.getText().toString());
    editor.putInt("selection-start", savediP.getSelectionStart());
    editor.putInt("selection-end", savediP.getSelectionEnd());
    editor.commit();
}

private EditText savediP;

//@Override
//public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    //getMenuInflater().inflate(R.menu.act_ipentry, menu);
    //return true;
//}

public boolean onKey(View view, int keyCode, KeyEvent event) {

 if (keyCode == EditorInfo.IME_ACTION_SEARCH ||
  keyCode == EditorInfo.IME_ACTION_DONE ||
  event.getAction() == KeyEvent.ACTION_DOWN &&
  event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {

  if (!event.isShiftPressed()) {
   Log.v("AndroidEnterKeyActivity","Enter Key Pressed!");
   switch (view.getId()) {
   case R.id.serverIpAddress:
    Intent intent = new Intent(this, IPControl.class);
    EditText ipaddress = (EditText) findViewById(R.id.serverIpAddress);
    String actu_ip = ipaddress.getText().toString();
    intent.putExtra(ACTUALSMARTIP, actu_ip);
    startActivity(intent);
    break;
   }
   return true; 
  }                

 }
 return false; // pass on to other listeners. 

}

/** Called when the user clicks the SendIP button */
public void sendip (View view) {
    Intent intent = new Intent(this, IPControl.class);
    EditText ipaddress = (EditText) findViewById(R.id.serverIpAddress);
    String actu_ip = ipaddress.getText().toString();
    intent.putExtra(ACTUALSMARTIP, actu_ip);
    startActivity(intent);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:38:09.307

我相信您可以通过为您的 edittext 提供 xml 属性来解决您的问题`android:singleLine="true"`

# html - Css 中的 Sticky Footer 妨碍了容器，或者创建了额外的空间

> ID：14247479
> 
> 赞同：0
> 
> 时间：2013-01-09T22:15:03.317
> 
> 标签：html, css

Soooooo 我在 Css 中制作了一个粘性页脚。它不像我想要的那样工作。页脚粘在底部，但我也想要页面的 100% 高度。这不起作用，我已经尝试了很多。目前，页脚妨碍了容器，并且它们重叠。如果我给容器`margin-bottom: 70px;`，当内容非常小时，它会创建额外的不需要的空间，从而产生不必要的滚动条。

这是我的代码：

```
<html><head>

<style type='text/css'>

body {
    font-family: 'Open Sans', sans-serif;
    font-size: 20px;
}

html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

.container {
    margin-left: auto;
    margin-right: auto;
    text-align: left;
    width: 800px;
    height: auto !important;
    min-height: 100%;
}

.bold-show {
    font-family: Helvectica, sans-serif;
    font-size: 96px;
    background-color: rgba(0, 0, 0, 0.95);
    color: #eeeeee;
    padding: 50px;
}

#footer {
    position: relative;
    height: 70px;
    width: 100%;
    text-align: center;
    display: table;
    margin-top: -70px;
    background-color: rgba(0, 0, 0, 0.9);
    color: #eeeeee;
}

#footer div {
    display: table-cell;
    vertical-align: middle;
}

</style>

</head><body>

<div class='container'>
    <div class='bold-show'>
    Donuts. Food for thought. This is my place, this fox will guide you. Random filler text for the win.
    </div>
</div>

<div id='footer'>
    <div>
        We support a free and open internet. 
    </div>
</div>

</body></html> 
```

此外，这不是实际的站点。只是测试以在真实站点上实施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:51:37.900

我认为这就是您正在寻找的：

```
<div id="wrapper">
  <header></header>
  <div id="main"></div>
  <footer></footer>
</div>

body, html, #wrapper { height: 100%;  } /* Create space for elements to be 100% */
#wrapper { display: table; } /* Create a table-structure */
#wrapper > * { display: table-row; } /* All direct children behave as rows */
#wrapper > header, 
#wrapper > footer { min-height: 100px; } /* These must be at least 100px */
#main { height: 100%; } /* Let the mid section fill up the remaining space */ 
```

# validation - 约束 Date 属性的正确方法是什么？

> ID：14247485
> 
> 赞同：0
> 
> 时间：2013-01-09T22:15:22.420
> 
> 标签：validation, grails

以下约束是不可靠的，因为`new Date()`只会[评估一次](http://grails.org/doc/latest/ref/Constraints/max.html)，给您留下一个陈旧的最大日期。

```
class Foo {
    Date date

    static constraints = {
        date max: new Date()
    }
} 
```

那么如何可靠地约束日期呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T22:46:19.743

假设日期不能大于当前的验证日期：

```
static constraints = {
    date(validator: { val, obj -> val <= new Date() })
} 
```

Grails[验证器](http://grails.org/doc/latest/ref/Constraints/validator.html)

# asp.net-mvc-4 - SimpleMembershipProvider 创建奇怪的表名

> ID：14247487
> 
> 赞同：0
> 
> 时间：2013-01-09T22:15:32.413
> 
> 标签：asp.net-mvc-4, security, entity-framework-5, simplemembership

因此，当表名类似于“webpages_UsersInRoles”时，我真的不在乎 SimpleMemberProvider 创建的表名。 *但是*，当它创建名称为“DOMAIN\user.webpages_UsersInRoles”的表时，我确实遇到了问题。

我骗你不是这正在发生。有谁知道这是什么原因造成的？？

背景信息：我正在使用带有 Visual Studio 2012 的 IIS Express。这个特定的项目使用 EF5 和 MVC4 并启用了迁移。

当我通过以下方式启动网络应用程序时，正在创建 SimpleMembership 表

`WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);`

在`InitializeSimpleMembershipAttribute`MVC4 给你的默认值内。

我希望这是足够的信息，但如果没有让我知道，我可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:02:30.917

因此，连接到 SQL Server 的用户似乎有一个与之关联的方案。在 SQL Management Studio 中手动添加表“table_1”时，表名变为 DOMAIN\user.table_1。

# qt - openGL（Qt）正确绑定+同时两个旋转

> ID：14247489
> 
> 赞同：0
> 
> 时间：2013-01-09T22:15:40.177
> 
> 标签：qt, opengl, rotation, glsl, shader

我正在尝试获得一些 openGL 经验，但现在我面临“1.5”问题;)。第一个问题/问题是如何“同时”在两个方向上进行旋转？我想绘制一个可在 x 轴和 y 轴上移动的坐标系。但我只能在 x 轴或 y 轴上移动。我无法弄清楚如何同时做这两个。

我的另一半问题并不是真正的问题，但是正如您所看到的，当我移动鼠标时，我一直在绑定我的着色器。有没有更好的方法可以做到？

```
void GLWidget::mouseMoveEvent(QMouseEvent *event)
{
    differencePostition.setX(event->x() - lastPosition.x());
    differencePostition.setY(event->y() - lastPosition.y());

    shaderProgram.removeAllShaders();
    shaderProgram.addShaderFromSourceFile(QGLShader::Vertex, "../Vector/yRotation.vert");
    shaderProgram.addShaderFromSourceFile(QGLShader::Fragment, "../Vector/CoordinateSystemLines.frag");
    shaderProgram.link();
    shaderProgram.bind();
    shaderProgram.setAttributeValue("angle", differencePostition.x());

    //shaderProgram.release();
    //shaderProgram.addShaderFromSourceFile(QGLShader::Vertex, "../Vector/xRotation.vert");
    //shaderProgram.addShaderFromSourceFile(QGLShader::Fragment, "../Vector/CoordinateSystemLines.frag");
    //shaderProgram.link();
    //shaderProgram.bind();
    //shaderProgram.setAttributeValue("angle", differencePostition.y());

    updateGL();
}

void GLWidget::mousePressEvent(QMouseEvent *event)
{
    lastPosition = event->posF();
} 
```

xRotation.vert

```
#version 330
in float angle;
const float PI = 3.14159265358979323846264;
void main(void)
{
    float rad_angle = angle * PI / 180.0;
    vec4 oldPosition = gl_Vertex;
    vec4 newPosition = oldPosition;
    newPosition.y = oldPosition.y * cos(rad_angle) - oldPosition.z * sin(rad_angle);
    newPosition.z = oldPosition.y * sin(rad_angle) + oldPosition.z * cos(rad_angle);
    gl_Position = gl_ModelViewProjectionMatrix * newPosition;
} 
```

yRotation.vert

```
#version 330
in float angle;
const float PI = 3.14159265358979323846264;
void main(void)
{
    float rad_angle = angle * PI / 180.0;
    vec4 oldPosition = gl_Vertex;
    vec4 newPosition = oldPosition;
    newPosition.x = oldPosition.x * cos(rad_angle) + oldPosition.z * sin(rad_angle);
    newPosition.z = oldPosition.z * cos(rad_angle) - oldPosition.x * sin(rad_angle);
    gl_Position = gl_ModelViewProjectionMatrix * newPosition;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:30:52.930

同时在多个方向上旋转需要矩阵的组合（通常称为[通用旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix#General_rotations)）

如果您更感兴趣，有几个站点会显示如何生成此矩阵。

至于你的第二个问题，着色器通常在 init 部分初始化。

示例：[http ://doc-snapshot.qt-project.org/5.0/qtopengl/cube-mainwidget-cpp.html](http://doc-snapshot.qt-project.org/5.0/qtopengl/cube-mainwidget-cpp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:36:14.847

您只需要调用 shaderProgram.bind(); 每次你想用你的着色器绘制一个对象之前。加载和链接通常只在程序的初始化中完成一次。仅调用 shaderProgram.setAttributeValue 您的 mouseMoveEvent 方法。

**编辑** 解决旋转问题的一种快速方法是编写一个着色器，它一个接一个地进行两个旋转。*在*变量中添加第二个并使用 setAttributeValue 方法设置两者。

```
#version 330
in float angleX;
in float angleY;
const float PI = 3.14159265358979323846264;
void main(void)
{
    float rad_angle_x = angleX * PI / 180.0;
    vec4 oldPosition = gl_Vertex;
    vec4 newPositionX = oldPosition;
    newPositionX.y = oldPosition.y * cos(rad_angle_x) - oldPosition.z * sin(rad_angle_x);
    newPositionX.z = oldPosition.y * sin(rad_angle_x) + oldPosition.z * cos(rad_angle_x);

    float rad_angle_y = angleY * PI / 180.0;
    vec4 newPositionXY = newPositionX;
    newPositionXY.x = newPositionX.x * cos(rad_angle_y) + newPositionX.z * sin(rad_angle_y);
    newPositionXY.z = newPositionX.z * cos(rad_angle_y) - newPositionX.x * sin(rad_angle_y);
    gl_Position = gl_ModelViewProjectionMatrix * newPositionXY;
} 
```

这样你就不需要知道矩阵乘法。

# iphone - FBRequest 获取参数问题

> ID：14247492
> 
> 赞同：0
> 
> 时间：2013-01-09T22:15:49.537
> 
> 标签：iphone, ios, objective-c, facebook-graph-api

我想获取有关用户的应用程序信息。他的名字、年龄、位置、性别、头像和其他资料。

现在我正在使用：

```
-(void)facebookOpenSession{
FBRequest *me = [FBRequest requestForMe];
[me startWithCompletionHandler:^(FBRequestConnection *connection,
                                 id result,
                                 NSError *error) {
    NSDictionary *resultDic = (NSDictionary<FBGraphUser> *) result;
    facebookData = [[NSMutableDictionary alloc]initWithDictionary:resultDic];

    FBRequest *pic = [FBRequest requestForGraphPath:@"me/?fields=picture"];
    [pic startWithCompletionHandler:^(FBRequestConnection *connection,
                                     id result,
                                     NSError *error) {
        NSDictionary *resultDic = (NSDictionary<FBGraphUser> *) result;

        NSDictionary *dic = [resultDic objectForKey:@"picture"];
        NSDictionary *dic2 = [dic objectForKey:@"data"];
        NSString *imgUrl = [dic2 objectForKey:@"url"];
        NSLog(imgUrl);
    }];
}]; 
```

}

我为用户个人资料和图像发出了两个请求，我想知道我是否只能拨打一个电话？如果我想获得其他信息，我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:19:04.820

你注释代码的方式对我来说有点奇怪，所以我像这样重写它：

```
if (FBSession.activeSession.isOpen) {
    [[FBRequest requestForMe] startWithCompletionHandler:
     ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
         if (!error) {
             self.nameString = user.name;
             self.profileImage.profileID = user.id;
             self.userName = user.username;
         }
     }];
} 
```

它实际上并不比我编写它的方式复杂得多。

快乐编码！

**由于注释而添加到代码：**

您需要从 Facebook 获取输出。对于图像，您的代码应如下所示：

```
FBProfilePictureView *profileImage.profileID = user.id; 
```

`user.id`一旦您发起一个`FBRequest`.

您并没有真正将 the 转换`FBProfilePictureView`为 a `UIImageView`，而是将 the 设置为您创建`FBProfilePictureView`的 a 的子视图。`UIView`

另外，您需要设置图片裁剪：

```
profileImage.pictureCropping = FBProfilePictureCroppingSquare; 
```

`FBProfilePictureCroppingSquare`是您拥有的几个选择之一。阅读[Facebook Developer](https://developers.facebook.com/docs/reference/ios/3.0/class/FBProfilePictureView)中的文档以查看您的选项。

# jquery - jquery在调整大小之前保存宽度

> ID：14247503
> 
> 赞同：0
> 
> 时间：2013-01-09T22:16:38.013
> 
> 标签：jquery

如何在此代码中添加一个子句，在每次调整大小之前将先前的宽度保存到变量中？

```
 $(window).on('load resize', function() {           
      var w = $(window).width();
      var h = $(window).height();

      $('#right1').css('top' , w > 1250 ? -120 : -73 );  

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:19:38.817

```
var oldW = $(window).width();
var oldH = $(window).height();

$(window).on('load resize', function () {
  var w = $(window).width();
  var h = $(window).height();

  $('#right1').css('top', w > 1250 ? -120 : -73);

  //Finish what you want with oldH and oldW.... 
  oldH = h;
  oldW = w;
}); 
```

# java - 如何继续使用 Java 创建网站

> ID：14247504
> 
> 赞同：1
> 
> 时间：2013-01-09T22:16:42.110
> 
> 标签：java, html, web

我知道这个问题对某些人来说听起来很奇怪，但我对如何开始创建网站感到非常困惑。我知道 Java、HTML5 并且对 CSS 和 Javascript 也有一些了解。请帮助我了解我应该采取哪些步骤？任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T22:26:34.167

首先，如果您对 Java 还不是很满意，我建议您选择一本好的 Java 书籍（例如 Thinking in Java -[第 3 版是免费在线的，是一个很好的起点！](http://www.mindview.net/Books/TIJ/)） - 恕我直言，最好是使用适当的（和最新的）书籍开始，然后只需搜索教程并从中学习。

其次，如果您已经熟悉 Java，您应该研究 Servlet 以及它们是如何运行的。您需要设置一个服务器（通常在您的本地主机上）并在该服务器上运行您的 Java Web 应用程序以用于学习和测试目的。[一个这样的服务器是 Tomcat，通过安装XAMPP](http://www.apachefriends.org/en/xampp.html)包很容易开始使用它（假设你在 Windows 上） 。稍后，如果您仍然感兴趣，那么开始使用 Web 应用程序框架（例如著名的[Spring](http://www.springsource.org/) ）是相当重要的——它极大地减轻了整体工作量。

稍后您可以使用[Google App Engine](https://developers.google.com/appengine/)等服务发布您的网站并使其在互联网上可用。

只记得一次迈出一步！如果您一次忙于做太多事情（例如，尝试这个项目时对 Java 和 HTML 的知识都不太清楚），事情会变得非常混乱，非常快。相信我，这种事发生在我身上很多次了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T22:18:08.583

最基本的技术是 JSP 和 Servlet。但是，您需要一个 Web 服务器来将它们编译成 HTML。 [Tomcat](http://tomcat.apache.org/)是一个非常流行的 Web 服务器。您想了解有关 Web 框架的更多信息。我推荐[条纹](http://www.stripesframework.org/display/stripes/Home)

# javascript - 输入按钮 onclick 事件未触发

> ID：14247509
> 
> 赞同：1
> 
> 时间：2013-01-09T22:16:52.717
> 
> 标签：javascript, html, events, javascript-events

我对 Javascript 还很陌生，正在尝试构建一个简单的照片查看器、幻灯片应用程序。我可能在代码中存在我还不知道的错误/错误做法。幻灯片按钮上的事件触发，我可以在控制台中看到输出，但是随机幻灯片按钮上的事件不会触发。

HTML5 片段

```
<form>
   <div id="controls">
       <input type="button" id="slideshow" value="Slide Show" />
       <input type="button" id="randomSlideshow" value="Random Slide Show" />
   </div>
</form>
<script src="js/PhotoViewer.js"></script>
</body> 
```

JS 片段

```
var photosArrayGlobal = new Array();
var photoIndexGlobal = 0;
var displayGlobal;

window.onload = main;

function main() {
  "use strict";
  document.getElementById("slideshow").onclick = getArrayPhotosNames;

  document.getElementById("randomSlideshow").onclick = randomize(photosArrayGlobal);

  displayGlobal = document.getElementById("myImage");

  document.getElementById("nextSlide").onclick = function () {
    displayGlobal.setAttribute("src", photosArrayGlobal[1]); //Test value, image 2
  };
}

function getArrayPhotosNames() {
  var folderName = document.getElementById("photoFolder").value;
  var commonName = document.getElementById("commonName").value;
  var startNum = document.getElementById("startNum").value;
  var endNum = document.getElementById("endNum").value;
  var j = 0;

  if (startNum > endNum) {
    alert("Invalid Numbers");
  }

  var nameArray = new Array();

  for (var i = startNum; i <= endNum; i++) {
    nameArray[j] = folderName + commonName + i + ".jpg";
    j++;
  }

  photosArrayGlobal = nameArray.slice();
   console.log(photosArrayGlobal);

  return nameArray;
}

function randomize(dataArray) {
  var i = dataArray.length;
  var j, tempi, tempj;
  if (i === 0) {
    return false;
  }

  while (--i) {
    j = Math.floor(Math.random() * (i + 1));
    tempi = dataArray[i];
    tempj = dataArray[j];
    dataArray[i] = tempj;
    dataArray[j] = tempi;
  }
 console.log(dataArray);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:18:53.247

`onclick`处理程序需要一个函数，但您将函数返回的值传递给它（`randomize()`恰好是`undefined`）。将其更改为以下内容：

```
document.getElementById("randomSlideshow").onclick = function() {
    randomize(photosArrayGlobal);
}; 
```

# android - 在代码中访问 weight 属性

> ID：14247513
> 
> 赞同：0
> 
> 时间：2013-01-09T22:17:14.330
> 
> 标签：android

我的布局 xml 文件中有以下代码

```
 <RelativeLayout
    android:id="@+id/contentTextViewLayout"
    android:layout_weight="9"
    android:layout_width="fill_parent"
    android:layout_height="0dip">
    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</RelativeLayout> 
```

如何在我的代码中获取 RelativeLayout 的 layout_weight 属性的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:27:47.453

为什么不直接获取相对布局的宽度，然后将 edittext 的宽度设置为布局宽度的百分比。

```
int i = relativelayout.getWidth();
int x = //any number, depending on how wide you what your text view
textview.setWidth(i/x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:31:45.943

您必须使用[RelativeLayout.LayoutParams](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

尝试以下操作：

```
RelativeLayout r = ((RelativeLayout)(findViewById(R.id.contentTextViewLayout))); 
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
params.weight = 1.0f;
r.setLayoutParams(params); 
```

params.weight = 1.0f 可以根据您的需要进行更改。

# .net - 网格中自定义控件的 ActualWidth 和 ActualHeight 为零，即使在测量/排列之后

> ID：14247519
> 
> 赞同：0
> 
> 时间：2013-01-09T22:17:36.477
> 
> 标签：.net, xaml, windows-8, actualwidth, actualheight

我有一个带有自定义控件 GameView 的 Win8 应用程序，我在我的页面上实例化了 3 次（作为 gvMap、gvOurBase 和 gvEnemyBase），并将其放入网格中。我需要获取控件的实际大小，以便可以设置 RenderTransform 并以适当的缩放比例渲染所有内容。

但是，每当我尝试获取控件的`ActualWidth`or`ActualHeight`时，我总是得到零。即使我等到页面加载并在我的控件上调用 Measure and Arrange 也会发生这种情况。

如何获得控件的大小？或者当他们在网格中时我不允许这样做吗？是否有另一种方法可以让我执行不依赖于控件大小的 RenderTransform？我希望每个控件显示整个游戏地图的特定部分 - gvMap 显示整个地图，gvOurBase 显示玩家拥有城市的地图部分，而 gvEnemyBase 显示敌人拥有城市的地图部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:01:04.973

这可能会发生。我建议`MyControl.RenderSize.Width`而不是`MyControl.ActualWidth`. 在动态数据绑定产生的布局中，`Actual`并不总是填充值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:25:22.757

显然我需要实际覆盖`MeasureOverride`我的自定义控件类。哎呀！

# iphone - 在当前 ViewController 后面实例化 View

> ID：14247521
> 
> 赞同：0
> 
> 时间：2013-01-09T22:17:40.190
> 
> 标签：iphone, uiview, uiviewcontroller, subview

我想实例化一个 viewController 并将其放在当前显示的视图后面。然后移动原始视图的框架以显示其后面的视图。

我不能先创建底部视图并在顶部添加顶部视图。我将创建多个底部视图，内存无法一次处理整个堆栈。

我已经遇到的问题。

*   添加子视图并将其发送到后面意味着移动原始视图的框架移动整个视图，而不是显示新视图。
*   实例化新视图并调用`presentViewController`释放原始视图（如果我以模态方式添加它）

任何人都可以帮忙吗？或者引导我一个方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:14:09.277

公平地说，您要从 vc1 过渡到 vc2，您想要的是vc2 在 vc1 下方并且 vc1 滑开以显示它*的外观吗？*

如果是这样，那么从 sdk 的角度来看，这在不做任何不寻常或危险的事情的情况下是可行的。诀窍是执行正常的实例化和呈现步骤，但在 vc1 中，在呈现 vc2 之前，将一个看起来像 vc1 的 UIImage 交给它。Vc2 在该图像出现之前将其自身覆盖，然后将图像滑开以显示其自身。

以下是步骤：

1）在vc1上，实现本文中的[方法](https://stackoverflow.com/questions/3710127/ioshow-to-make-a-snapshot-of-the-current-views-state)。它捕获视图的图像。

2）有一些动作让你想展示vc2，这样做......

```
- (void)presentVc2:(id)sender {
    UIImage *image = [self makeImage];  // it was called makeImage in the other post, consider a better name
    MyViewController2 *vc2 = [[MyViewController2 alloc] initWithNibName:@"MyViewController2" bundle:nil];
    vc2.presentationImage = image;  // more on this later

    // this line will vary depending on if you're using a container vc, but the key is
    // to present vc2 with NO animation
    [self presentViewController:vc2 animated:NO completion:^{}];
} 
```

3) 在 MyViewController2 上创建一个名为 presentationImage 的 UIImage 属性并将其设置为 public。然后在 MyViewController2 ...

```
// before we appear, cover with the last vc's image
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:self.presentationImage];
    imageView.frame = self.view.bounds;
    imageView.tag = 128;
    [self.view addSubview:imageView];
}

// after we appear, animate the removal of that image
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    UIImageView *imageView = (UIImageView *)[self.view viewWithTag:128];
    [UIView animateWithDuration:0.5 animations:^{
        imageView.frame = CGRectOffset(imageView.frame, -self.frame.size.width, 0); 
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:27:58.160

您可以简单地将顶视图的内容放入一个新的 UIView ，其框架等于您的视图控制器的视图框架。然后将底部视图粘贴在容器视图下方。然后，移动容器视图将移动其所有内容，但保持底部视图完好无损。

# shell - 修改目录而不更改时间戳

> ID：14247523
> 
> 赞同：1
> 
> 时间：2013-01-09T22:17:53.420
> 
> 标签：shell

有没有办法在不更改 B 时间戳的情况下将文件 A 复制到目录 B 中？如果是，那是什么？

编辑：

更大的目标：我正在研究我一年多前写的一些代码。我发现我所做的某些事情总是会让我未来的自己感到困惑。我想在那里添加一个 README 文件来解释问题。但我想保留上次在该目录中工作的时间。

最后：

感谢您的两个答案。我最终做了“touch -r B/newestoldfile B”，这对我的目的来说已经足够好了。尽管就像有人指出的那样，这并不是在所有情况下对我的问题的确切答案。我对两个答案都投了赞成票，但不得不选择接受。我选择了简要提到 -r 选项的那个:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:26:39.393

捕获B目录的旧mtime。然后移动文件，然后使用`touch`命令用您存储的旧 mtime 重写 B 目录的 mtime。

```
old_mtime=$(stat -c%Y B)
mv A B
touch -d"$(date --date="@$old_time")" B 
```

我们使用`@$old_time`创建`$old_time`自纪元以来的秒数表示的日期，这就是`stat`给我们的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T22:20:46.540

您可以在复制之前从目录中获取时间戳，`stat -c %Y`然后使用`touch`命令修改之后的时间戳。

如果您只想将时间戳从目录 A 复制到 B ：

```
touch -r A B 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:45:15.180

当你编码时，你应该使用像[Git](http://git-scm.com/)、[Mercurial](http://mercurial.selenic.com/)或[Subversion](http://subversion.apache.org/)这样的源代码控制系统。它允许您创建项目文件的存储库，编辑文件，注册版本并注释您所做的更改，最终将编辑的文件合并到项目中，使用分布式系统将其托管在云中。

其他人已经参考您提到的方法正确回答了，但我想给您一个更好的建议，使用您将来最好使用的另一种解决方案。

# git - 在 Git 中进行标记，它是如何工作的？

> ID：14247524
> 
> 赞同：0
> 
> 时间：2013-01-09T22:17:53.077
> 
> 标签：git, github

如果我在 git 的同一个 repo 中有 4 个分支并且我创建了一个标签，那么该标签是否存在于所有分支或仅存在于单个分支上？在 GitHub 中，它说每个分支上都有一个 1.0.0 标签，我无法在命令行的任何其他分支上创建另一个 1.0.0 标签，因为它“已经存在”。标签是否一次保存所有分支的状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T22:21:34.137

其中`git`，轻量级标记只是指向**特定提交的****唯一名称**。

 **`git`也有`tag`对象的概念，它允许你也输入一条消息，并可能用 GPG 签名。然而，归根结底，这些仍然只是指向一个特定的提交。

轻量级标签几乎与分支相同，只是它不是为更改而设计的，而分支会前进并经常更改。

* * *

轻量级标签只是`.git/refs/tags/`目录中的一个文件。它的内容是一个单一的提交 ID。

```
[jason@step MyProject]$ cat .git/refs/tags/Version-4.9.2
77035b7a66427662f1096444eeb319ba9ab1080b 
```**

# url - Internet Explorer 不显示 URL 中的中文字符

> ID：14247525
> 
> 赞同：10
> 
> 时间：2013-01-09T22:17:54.893
> 
> 标签：url, encoding, utf-8

我正在研究从 URL 显示（使可读）字符的要求。

*   当我使用谷歌浏览器时，它会以中文显示参数——即使它们被编码为 UTF-8。

*   当我使用 Mozilla Firefox 时，它会以中文显示参数——即使它们被编码为 UTF-8。

*   当我使用 Internet Explorer 时，它会显示以 UTF-8 编码的参数。

注意 URL 被编码为 UTF-8；我知道，因为当我从他们三个复制 URL 并将其粘贴到 Notepad++ 时，他们三个显示以下内容：

> /%E6%89%93%E5%BC%80%E7%9B%AE%E5%BD%95/%E7%9B%B8%E6%9C%BA/%E6%95%B0%E7%A0% 81%E7%9B%B8%E6%9C%BA/%E5%B0%8F%E5%9E%8B%E6%95%B0%E7%A0%81%E7%9B%B8%E6%9C%BA /PowerShot-A480/p/1934793

难道 Mozilla Firefox 和 Google Chrome 的人有这种改进，可以使编码的字符串可读，也许 IE 的人不支持？或者，有什么方法可以用 IE 激活它？

顺便说一句...转到查看 >> 编码 >> Unicode (UTF-8) 会处理页面内的文本，但不会对 URL 中的文本产生任何影响。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-23T13:24:22.717

我写了一篇关于[Internet Explorer 不显示非 ASCII 字符的解码版本并使用 IRI](http://shades-of-orange.com/post/2013/10/24/IRIs-and-URIs;-or-Internet-Explorer-does-not-decode-encoded-non-ASCII-characters-in-its-address-bar)解决问题的博客文章。

截止到今天，我们的情况如下：

1.  HTML5 支持[IRI](http://en.wikipedia.org/wiki/Internationalized_Resource_Identifier)，即支持 Unicode 字符的[URI](http://en.wikipedia.org/wiki/Uniform_resource_identifier)
2.  HTTP 不支持[IRI](http://en.wikipedia.org/wiki/Internationalized_Resource_Identifier)，但所有主要浏览器都负责将[IRI](http://en.wikipedia.org/wiki/Internationalized_Resource_Identifier)转换为有效（编码）[URI](http://en.wikipedia.org/wiki/Uniform_resource_identifier)以检索指定的资源（页面）。
3.  IE在锚标签的属性中支持[IRI](http://en.wikipedia.org/wiki/Internationalized_Resource_Identifier)`href` ，并在其地址栏中正确显示它们，就像您手动输入 URL 时一样（键盘 ;-)）。
4.  如果您选择对您的[IRI](http://en.wikipedia.org/wiki/Internationalized_Resource_Identifier)进行百分比编码从而使其成为[URI](http://en.wikipedia.org/wiki/Uniform_resource_identifier)，则 IE 不会将该[URI](http://en.wikipedia.org/wiki/Uniform_resource_identifier)解码回[IRI](http://en.wikipedia.org/wiki/Internationalized_Resource_Identifier)。

因此，您可以尝试以下方法：

1.  使用 UTF-8 保存 HTML 文件。这允许您将任何 Unicode 字符插入其中。
2.  不要在 HTML 页面的链接中对 URL 进行百分比编码**。**只需使用这样的链接：`<a href="http://zh.wikipedia.org/wiki/亦思巴奚兵乱">亦思巴奚兵乱&lt;/a>`

[在 W3C: An Introduction to Multilingual Web Addresses](http://www.w3.org/International/articles/idn-and-iri/)中也可以找到关于该主题的精彩文章。

# jquery - Chrome 扩展：在消息事件触发时从内容脚本打开一个 jquery UI 对话框

> ID：14247528
> 
> 赞同：4
> 
> 时间：2013-01-09T22:18:07.227
> 
> 标签：jquery, jquery-ui, google-chrome-extension, content-script

我正在尝试从我的 chrome 扩展中打开一个 jquery 对话框。有几篇关于此的帖子，并非所有帖子都与我的需求相关。

我发现[这个](https://stackoverflow.com/questions/13740912/chrome-ext-content-script-that-creates-jquery-dialog-need-to-ignore-iframes)声称有一个工作代码。我试图在我的扩展中使用该方法但没有成功。

在我的后台扩展中，我向内容脚本发送一条消息，如下所示：

```
chrome.tabs.query({active: true, currentWindow: true}, function(tabs){ 
  chrome.tabs.sendMessage(tabs[0].id, {action: "open_dialog_box"}, function(response)     {
  });
}); 
```

并且在内容脚本中，我几乎按原样放置了我复制的代码（对不起，但只是为了确定，我想尽可能地接近原件，以找出我在搞砸什么不过）：

```
chrome.extension.onMessage.addListener(function(msg, sender, sendResponse){

  if (msg.action == 'open_dialog_box') {
    alert("Message recieved!");

  var layerNode= document.createElement('div');
  layerNode.setAttribute('id','dialog');
  layerNode.setAttribute('title','Basic dialog');
  var pNode= document.createElement('p');
  console.log("pNode created"); 
  pNode.innerHTML  = "something";

  layerNode.appendChild(pNode);
  document.body.appendChild(layerNode);

  jQuery("#dialog").dialog({
  autoOpen: true, 
  draggable: true,
  resizable: true,
  height: 'auto',
  width: 500,
  zIndex:3999,
  modal: false,
  open: function(event, ui) {
    $(event.target).parent().css('position','fixed');
    $(event.target).parent().css('top', '5px');
    $(event.target).parent().css('left', '10px');
  }

}); 
```

现在，警报弹出，所以我知道消息已到达，但对话框没有打开。

你能建议这里有什么问题吗？

**编辑：**

根据 Brock 的要求，这是我的清单：

```
{
"name": "Dialog test",
"version": "1.1",

"background": 
{ 
    "scripts": ["contextMenus.js"]
},

"permissions": ["tabs", "<all_urls>", "contextMenus"],

"content_scripts" : [
    {
        "matches" : [ "http://*/*" ],
        "js": ["jquery-1.8.3.js", "jquery-ui.js"],
        "css": [ "jquery-ui.css" ],
        "js": ["openDialog.js"]
    }
],

"manifest_version": 2
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T23:16:49.650

在清单中，您设置了`js`两次属性：

```
"js": ["jquery-1.8.3.js", "jquery-ui.js"],
"css": [ "jquery-ui.css" ],
"js": ["openDialog.js"] 
```

这会覆盖第一个值，因此永远不会为您的内容脚本加载 jQuery 和 jQuery-UI。

清单的那一部分应该是：

```
"js":  ["jquery-1.8.3.js", "jquery-ui-1.9.2.custom.min.js", "openDialog.js"],
"css": ["jquery-ui-1.9.2.custom.css"] 
```

* * *

* * *

**老问题：**

1.  该代码使用一个`massage`未在任何地方定义的变量。您应该会在控制台中看到指出这一点的错误以及可能还有其他问题。

2.  由于您没有列出清单，请验证 jQuery 和 jQuery-UI 是否已下载到扩展文件夹并在`manifest.json`.

# jquery - 如何向 scrollTop() 函数添加填充

> ID：14247533
> 
> 赞同：7
> 
> 时间：2013-01-09T22:18:22.147
> 
> 标签：jquery, jquery-animate, scrolltop

我有一个带有 div 列表的父 div。
在父 div 中，我还在父 div 的顶部添加了固定定位的 div。
根据我所说的一些行动：

```
$('#parent').animate({       
                    scrollTop: $("#" + itemId).offset().top  - $('#parent').offset().top + $('#parent').scrollTop()
                     }, 500); 
```

这成功滚动到一个 div 并将其放在顶部。
问题是当搜索到的 div 位于顶部时，我看不到它，因为它位于固定 div 下方。

```
<div id="parent">
<div id="fixedDiv" style="position: fixed;
z-index: 999;
background: #000;
width: 300px;">
... some elements ...
</div>
<ul>
... list of divs...
</div> 
```

是否有一些解决方案可以滚动到从父级顶部填充的 div？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-07-04T19:50:33.397

这就是我使用的，用于具有 10px 上填充的平滑滚动：

```
$('body').animate({scrollTop: $('#div').offset().top-10},1000); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T22:32:08.957

```
- $('#fixedDiv').height() 
```

在 scrollTop 行的末尾会做:)

# visual-studio-2012 - Visual Studio 2012：我可以在远程调试器中启动 .NET 4.5 应用程序（而不仅仅是附加）吗？

> ID：14247537
> 
> 赞同：2
> 
> 时间：2013-01-09T22:18:33.753
> 
> 标签：visual-studio-2012, .net-4.5, remote-debugging

平台：* Visual Studio 2012 * C# WPF 应用程序 * Visual Studio 2012 远程调试器工具。

我在 64 位系统上的 .NET 4.5 应用程序在[很早的阶段就崩溃了](https://stackoverflow.com/questions/14246144)。我在（远程）64 位系统上运行 Visual Studio 2012 远程调试。我可以从我的开发计算机与 Visual Studio 2012 连接，一切都很好。

我的问题是我需要附加到一个进程才能远程调试。在我可以附加到进程之前，应用程序已经崩溃。基本上我想在`WainWindow.xaml.cs`（它是一个 WPF 应用程序）的第一行设置断点。

是否有机会远程启动应用程序并直接附加到进程？

# javascript - 如何使用 JavaScript 切换元素的边距？

> ID：14247539
> 
> 赞同：-3
> 
> 时间：2013-01-09T22:18:39.400
> 
> 标签：javascript, html, toggle

我正在尝试通过更改边距将 div 移动到一边，然后通过过渡移动回来。我有一个按钮，我想切换它的边距。div 向右移动，但是当我再次单击时，它并没有移回原来的位置。这就是我所拥有的：

HTML

```
<div id="movingdiv">
<a href="#" onclick="toggle()">Click Me!</a>
</div> 
```

CSS

```
#movingdiv {
overflow: hidden;
left: 0;
top: 0;
right: 0;
bottom: 0;
background-color: gray;
-webkit-transition-duration: 0.3s;
-moz-transition-duration: 0.3s;
-o-transition-duration: 0.3s;
transition-duration: 0.3s;
} 
```

JavaScript

```
function toggle () {

var el = document.getElementById("movingdiv");
if ( el.style.marginLeft="250px" ) {

    el.style.marginLeft="250px";

}

else {

    el.style.marginLeft="0px";

}

} 
```

这是在行动： [http ://codepen.io/dakoder/pen/nfimJ](http://codepen.io/dakoder/pen/nfimJ)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T22:24:39.380

您正在分配，而不是检查相等性。此外，您的`else`病情和`if`病情混合在一起。将其更改为以下内容：

```
if ( el.style.marginLeft==="250px" ) {
    el.style.marginLeft="0px";
} else {
    el.style.marginLeft="250px";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:24:50.110

改成

```
if ( el.style.marginLeft==="250px" ) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:24:55.520

```
if ( el.style.marginLeft="250px" ) { 
```

这是分配，而不是比较。如果您想切换边距，请使用 === 或 !==（这似乎是您的意图）。

# restkit - 在成功回调中访问响应数据

> ID：14247540
> 
> 赞同：12
> 
> 时间：2013-01-09T22:18:40.773
> 
> 标签：restkit

有没有办法使用对象管理器访问请求成功块中的响应数据？

```
[objectManager postObject:[User class] path:@"/users" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
  NSLog(@"success");
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
  NSLog(@"failure");
}]; 
```

似乎应该有某种方法可以使用映射或操作来获取此信息，例如 NSData 或其他东西。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-11T04:34:44.277

您可以从 RKObjectRequestOperation *操作中获取此信息

```
operation.HTTPRequestOperation.response
operation.HTTPRequestOperation.responseData
operation.HTTPRequestOperation.responseString 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-22T12:53:32.947

尝试这个

```
[objectRequestOperation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {

// parse the response---       
 NSDictionary *myDic = [NSJSONSerialization JSONObjectWithData:operation.HTTPRequestOperation.responseData options:NSJSONReadingMutableLeaves error:nil];
  NSLog(@"=======:%@",myDic);
   NSLog(@"MY email============ %@ ",[myDic objectForKey:@"Email"]);      
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        RKLogError(@"Operation failed with error: %@", error);
    }]; 
```

# makefile - MKDIR_P 未在 Makefile 中定义

> ID：14247550
> 
> 赞同：2
> 
> 时间：2013-01-09T22:19:12.310
> 
> 标签：makefile, autotools, autoconf

我有一个无法安装的客户站点。问题的根源在于变量 MKDIR_P 从未扩展。环顾四周，这似乎是一个棘手的问题，它在不同版本的 autotools 中出现，尽管这个站点有 autoconf 2.69，而且我能找到的示例问题（和解决方案）都不是最近的版本。有没有人知道如何针对不同版本的自动工具编写可移植或至少有点可移植的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:36:25.893

这应该不是必需的，但您应该能够在配置时简单地定义它：

```
./configure MKDIR_P='mkdir -p' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T15:53:33.127

显然，SLES 11 SP2 (1.10.1) 附带的 automake 版本中存在错误。降级 automake 解决了这个问题，尽管我不记得该站点的版本。该问题不会持续到更高版本的 automake 中，因此进一步升级也应该可以解决问题。

# javascript - Javascript Date（）毫秒差异不加起来

> ID：14247552
> 
> 赞同：3
> 
> 时间：2013-01-09T22:19:18.080
> 
> 标签：javascript, function, date

我创建了[这个 JSFiddle 来说明我的问题](http://jsfiddle.net/DanEvans/RxVeG/)。

在这个例子中，似乎 10 - 00 = 8。

一个简单的问题：为什么#ha 包含 8？我误解了什么吗？

```
var a4 = new Date(2012,00,00,00,00,00,0010);
var b4 = new Date(2012,00,00,00,00,00,0000);
var c4 = a4-b4;
var d4 = document.getElementById("ha");
d4.innerHTML=c4; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T22:20:41.120

当整数文字以它开头时，`0`它被解释为*八进制*文字，而不是十进制文字。文字与文字`0010`具有相同的值`8`。删除前导零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:23:23.940

在数字上使用前导 0 是向处理器发出的信号，表明您正在使用八进制（以 8 为基数）数字，就像 0x 表示十六进制一样。

```
0010 - 0 == 010 == 8 in base ten
10 - 0 == 10 == 10 in base ten
0x10 - 0 == 0x10 == 16 in base ten 
```

# jquery - jQuery页面滚动使用每个或循环函数

> ID：14247559
> 
> 赞同：0
> 
> 时间：2013-01-09T22:19:47.147
> 
> 标签：jquery

所以基本上这是我的页面滚动代码，但我使用变量每个 div 元素如何使用任何循环函数最小化此代码？谢谢！

```
var canvas = $('.div1');
var canvas2 = $('.div2');
var win = $(window);

win.bind('scroll', function(){

    //div1
    var pos = canvas.offset();
    var total = pos.top + canvas.height();
    win.top = win.scrollTop();
    var d = win.height() / 2 + win.top;

    if( pos.top < d && !(total < d) )
    $('.div1').addClass('active');  }
    else
    $('.div1').removeClass('active');

    //div2
    var pos2 = canvas2.offset();
    var total2 = pos2.top + canvas2.height();
    win.top = win.scrollTop();
    var d2 = win.height() / 2 + win.top;

    if( pos2.top < d2 && !(total2 < d2) ){ 
    $('.div2').addClass('active');}
    else
    $('.div2').removeClass('active');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:38:15.197

在这些行中，使用[`.each`](http://api.jquery.com/each/)迭代和[`.toggleClass( className, switch )`](http://api.jquery.com/toggleClass/)语法：

```
var $w = $(window),
    $canvases = $('.div1, .div2');

$w.scroll(function() {
    var d = $w.height() / 2 + $w.scrollTop();
    $canvases.each(function() {
        var $this = $(this),
            ptop = $this.offset().top,
            total = ptop + $this.height();
        $this.toggleClass('active', ptop < d && total >= d);
    });
}); 
```

`active`将类添加到`$canvases`对象内穿过视口垂直中心的元素应该可以正常工作。

[**小提琴**](http://jsfiddle.net/ympBr/)

# google-apps-marketplace - Google Marketplace 应用安装流程

> ID：14247563
> 
> 赞同：0
> 
> 时间：2013-01-09T22:20:27.787
> 
> 标签：google-apps-marketplace

安装 Google Marketplace 应用程序时，流程通常以管理员在 Google 上的应用程序设置中结束，并选择立即登录。有没有办法让用户实际使用该应用程序（即无需单击链接登录即可开始使用该应用程序）？用户是否可以在可选设置中被发送到应用程序而不返回 Google 上的应用程序设置页面而不会导致其他问题？

一些[文档](https://developers.google.com/google-apps/marketplace/lifecycle)说：

> 我们强烈建议管理员通过一系列简短的线性操作并迅速返回 Google，以便其他用户可以开始使用该应用程序。

~~我尝试对此进行测试，但似乎在安装和显示在 Google 的“更多”下拉列表中的应用程序之间存在一些滞后（我尝试安装另一个应用程序并最终出现在最后一页但该应用程序仍然没有出现在另一个帐户中。已经几个小时了，但它仍然不存在）因此很难判断它是否只是缓慢或实际上没有安装在其他用户的帐户上。~~

抱歉，最后一部分具有误导性。这不是关于链接没有立即显示的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T21:16:26.613

Google Apps Marketplace 的新体验让您可以让用户进入应用程序，而不是管理控制台。现在有一个弹出窗口供应用程序请求权限并同意条款，然后用户最终进入应用程序。一步安装。谷歌干得好。

# backbone.js - Laravel 4 和 Backbone 不能很好地配合使用——JSON 格式不正确

> ID：14247568
> 
> 赞同：1
> 
> 时间：2013-01-09T22:20:42.123
> 
> 标签：backbone.js, laravel

我正在尝试从 Laravel 路由返回 JSON 输出。这是我的路线：

```
Route::get('main-contact-count', function() {
    $mc = MainContact::where('flag', '=', '1')->count();
    return Response::json(['count' => $mc]);
}); 
```

如果我查看 Firebug 中的响应选项卡，我会回来：

```
{"count":9} 
```

JSON 编码缺少方括号。这个 JSON 不同于 Laravel 从资源丰富的控制器返回的 JSON。它有方括号。Backbone 可以很好地解析它。Backbone 没有正确解析上述 JSON。如果您在`console.log`收藏时查看长度和型号，它们都为零。但是，您可以深入到对象中，并且可以找到`count`设置为 9 的属性。

如何从 Laravel 中获取正确的 JSON？

只是为了好玩和咯咯笑，我发布了我的 Backbone，以防我在那里做一些奇怪的事情：

```
App.Collections.Count = Backbone.Collection.extend({
        model: App.Models.Count,
        initialize: function(models, options) {
            this.fetch({
                success: function(data, options) {
                    // console.log(data.models);
                }
            });
            if (options) {
                this.url = this.url || options.url;
            }
        }
    });

    App.Views.Count = Backbone.View.extend({
        tagName: 'span',
        className: 'leadCount',
        template: _.template($('#contactCount').html()),
        initialize: function() {

        },
        render: function() {
            this.$el.html(this.template(this.collection.toJSON()));
            return this;
        }
    }); 
```

在我的路线中：

```
var mc = new (App.Collections.Count.extend({ url: 'main-contact-count' }))();
var mcv = new (App.Views.Count.extend({ collection: mc }))(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:04:45.413

您的服务发送的 JSON 响应是单个 JSON 对象 ( `{...}`) 您的集合无法解析它，因为它需要一个 JSON 对象数组 ( `[{...}, {...}]`)。

如果我正确理解了您的代码，`/main-contact-count`则它是一项专门的服务，其功能是返回和单一数据：联系人计数。如果是这种情况，`Backbone.Collection`可能不是正确的解决方案。集合是为了……嗯，东西的集合。

您应该只使用一个模型：

```
App.Models.Count = Backbone.Model.extend({
    url:'main-contact-count'
});

var countModel = new App.Models.Count();
countModel.fetch({success: function(model, resp) {
    var count = model.get('count');
}); 
```

或者更好的是，完全放弃 Backbone，只使用 jQuery 获取数据：

```
$.getJSON('main-contact-count', function(response) {
    var count = response.count;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:03:27.680

尝试：

```
return Response::json(array(array('count' => $mc)); 
```

# spring-data - 我将如何在 Spring Data 中使用 MongoRepository 执行 $push？

> ID：14247573
> 
> 赞同：8
> 
> 时间：2013-01-09T22:20:54.120
> 
> 标签：spring-data, spring-data-mongodb

我有一个这样的MongoDB结构：

```
record = { 'field': 'value', 
           'field2': 'value2',
           'events' : [ { 'event1': 1 }, { 'event2' : 2 }]
         } 
```

我正在使用 Spring Data MongoDB 包来访问这些数据。将主要写入数据，所以我想使用本机“$push”功能将“事件”添加到“记录”，但我似乎无法弄清楚如何在不获取的情况下使用 MongoRepository整个记录，然后将其推送并保存回来？

在使用 MongoRepository 时，您永远不会真正拥有具体的实现。Spring 根据注解或方法本身的名称处理所有事情

**更新**

正确的方法是在存储库上实现自定义方法，然后使用 MongoTemplate 手动完成吗？

例子：

**FooRepository.java**

```
public interface FooRepository extends
    CrudRepository<Foo, ObjectId>,
        AppointmentWarehouseRepositoryCustom {
} 
```

**FooRepositoryCustom.java**

```
public interface AppointmentWarehouseRepositoryCustom {
    public void pushMethod();
} 
```

**FooRepositoryImpl.java**

```
public class FooRepositoryImpl implements
    AppointmentWarehouseRepositoryCustom {

    @Autowired
    protected MongoTemplate mongoTemplate;

    public void pushMethod() {
        // Push methods here. 
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T17:07:47.457

是的，您必须在存储库上实现自定义方法，您的`push`方法将是这样的：

```
public class FooRepositoryImpl implements
    AppointmentWarehouseRepositoryCustom {

    @Autowired
    protected MongoTemplate mongoTemplate;

    public void pushMethod(String objectId, Object... events) {
        mongoTemplate.updateFirst(
            Query.query(Criteria.where("id").is(objectId)), 
            new Update().pushAll("events", events), Foo.class);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-30T16:38:34.530

你可以这样做，但我遇到了一个问题，“_class”字段没有被保留。推送对象本身是通过配置的转换器运行的，但由于某种原因，该推送对象的“_class”字段未写入。但是，如果我自己注入转换器并将对象写入 DBObject，则“_class”字段会被保留并写入。因此变成：

```
public class FooRepositoryImpl implements
AppointmentWarehouseRepositoryCustom {

@Autowired
protected MongoTemplate mongoTemplate;

public void pushMethod(String objectId, Object event) {
    DBObject eventObj = new BasicDBObject();
    converter.write(event, eventObj);
    mongoTemplate.updateFirst(
        Query.query(Criteria.where("id").is(objectId)), 
        new Update().push("events", eventObj), Foo.class);
  }
} 
```

# r - 将数字转换为日期

> ID：14247577
> 
> 赞同：6
> 
> 时间：2013-01-09T22:21:05.977
> 
> 标签：r

我有一张表，其中一列是格式为`20130109`或 YearMonthDay 的日期，没有间距。

我正在尝试绘制这些点，并且由于这个奇怪的间距，最终在图中出现了很大的差距，因此想要将这些数字转换为日期。

我一直在尝试使用`as.Date(as.character(20130107), "%y%m%d")`，但总是返回一个`NA`.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T22:22:27.437

您需要`%Y`（4 位数年份）而不是`%y`（2 位数年份）：

```
> as.Date(as.character(20130107), "%Y%m%d")
[1] "07-01-2013" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-15T15:09:34.553

使用润滑脂

```
library(lubridate)

parse_date_time(as.character(20130107), "%Y%m%d") 
```

如果您只想提取日期的某些元素，使用 strftime 很容易。例如，只是年份：

```
strftime(parse_date_time(as.character(20130107), "%Y%m%d"), "%Y") 
```

# regex - 根据文件名使用 bash 和 Perl 批量重命名文件

> ID：14247582
> 
> 赞同：5
> 
> 时间：2013-01-09T22:21:36.727
> 
> 标签：regex, linux, perl, bash, shell

我正在寻找仅在当前目录中批量重命名文件并从文件名末尾删除某些字符串。

样本：

```
foo-bar-(ab-4529111094).txt
foo-bar-foo-bar-(ab-189534).txt
foo-bar-foo-bar-bar-(ab-24937932201).txt 
```

输出应如下所示：

```
foo-bar.txt
foo-bar-foo-bar.txt
foo-bar-foo-bar-bar.txt 
```

我想删除`-(ab-2492201)`每个文件名末尾的字符串，因为知道数字的长度可能会有所不同。

Perl 正则表达式优于模块，并且不使用任何实用程序，并且对于 bash oneliner 命令是高度优选的。

如何在 Linux 上的 Perl 和 Bash Shell 中实现这一点？有兴趣了解这两种解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T22:26:52.400

尝试：

```
$ rename 's/-\(ab-\d+\)(?=\.txt$)//' *.txt 
```

有一个`rename`用 Perl 编写的命令。它的第一个参数是描述如何转换文件名的 Perl 代码。`s///`您可以在自己的 Perl 程序或单行程序中使用相同的命令。

如果这不起作用，请尝试`prename`代替`rename`; 在某些系统上安装了一个不同的、非基于 Perl 的`rename`命令，在这种情况下，可能会调用 Perl 命令`prename`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T22:28:27.080

在 bash 中，您可以编写如下内容：

```
for file in *-\(ab-[0-9]*\)*; do
    newfile="${file/-(ab-[0-9]*)/}"
    mv "$file" "$newfile"
done 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-24T17:36:44.510

# 使用 Perl 正则表达式重命名文件

使用`find`,`perl`和`xargs`, 你可以使用这个单线

```
find . -type f | perl -pe 'print $_; s/input/output/' | xargs -n2 mv 
```

没有调用的结果`mv`应该只是

```
OldName NewName
OldName NewName
OldName NewName 
```

# 它是如何工作的？

1.  `find . -type f`输出文件路径（或文件名......您可以在这里控制正则表达式处理的内容！）
2.  `-p`打印要由正则表达式处理的文件路径，`-e`执行内联脚本
3.  `print $_`首先打印原始文件名（独立于`-p`）
4.  `-n2`每行打印两个元素
5.  `mv`获取上一行的输入

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T22:38:20.930

当您说*在*当前目录下时，您是指*在*当前目录中，还是在当前目录及其后代中或下方的任何地方？

`File::Find`是后者的一种简单方法，并且是核心模块，因此不需要安装。像这样：

```
use strict;
use warnings;

use autodie;

use File::Find;

find(\&rename, '.');

sub rename {
  return unless -f;
  my $newname = $_;
  return unless $newname =~ s/-\(ab-[0-9]+\)(\.txt)$/$1/i;
  print "rename $_, $newname\n";
} 
```

**更新**

*该程序将仅在当前目录中*使用给定的文件名模式重命名所有文件。

请注意，初始`open`循环仅用于创建用于重命名的示例文件。

```
use strict;
use warnings;

use autodie;

open my $fh, '>', $_ for qw(
  foo-bar-(ab-4529111094).txt
  foo-bar-foo-bar-(ab-189534).txt
  foo-bar-foo-bar-bar-(ab-24937932201).txt
);

for (glob '*.txt') {
  next unless -f;
  my $newname = $_;
  next unless $newname =~ s/-\(ab-[0-9]+\)(\.txt)$/$1/i;
  print "rename $_, $newname\n";
  rename $_, $newname;
} 
```

**输出**

```
rename foo-bar-(ab-4529111094).txt, foo-bar.txt
rename foo-bar-foo-bar-(ab-189534).txt, foo-bar-foo-bar.txt
rename foo-bar-foo-bar-bar-(ab-24937932201).txt, foo-bar-foo-bar-bar.txt 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T05:53:22.977

检查这个：

```
ls -1 | nawk '/foo-bar-/{old=$0;gsub(/-\(.*\)/,"",$0);system("mv \""old"\" "$0)}'

> ls -1 foo*
foo-bar-(ab-4529111094).txt
foo-bar-foo-bar-(ab-189534).txt
foo-bar-foo-bar-bar-(ab-24937932201).txt

> ls -1 | nawk '/foo-bar-/{old=$0;gsub(/-\(.*\)/,"",$0);system("mv \""old"\" "$0)}'

> ls -1 foo*
foo-bar-foo-bar-bar.txt
foo-bar-foo-bar.txt
foo-bar.txt
> 
```

有关详细说明，请查看[此处](http://theunixshell.blogspot.com/2013/01/bulk-renaming-of-files-in-unix.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-09T22:29:18.763

一个更简单、更短（更好？:)）`rename`正则表达式：

```
rename 's@-\(.*?\)@@' foo*.txt 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-08T07:44:47.567

仅使用 perl 的另一种方法：

```
perl -E'for (<*.*>){ ($new = $_) =~ s/(^.+?)(-\(.+)(\..*$)/$1$3/; say  $_." -> ".$new}' 
```

（`say ...`很适合测试，只需将其替换为`rename $_,$new`or `rename($_,$new)`）

1.  `<*.*>`读取当前目录中的每个文件
2.  `($new = $_) =~`保存以下替换`$new`并`$_`保持原样
3.  `(^.+?)`将此匹配保存在 $1 和非贪婪匹配中，从一开始直到...
4.  `(-\(.+)`找到序列“-( ...anything...”。（此匹配将保存在 $2 中）
5.  `(\..*$)`保存最后一个“。”中的所有内容 (句点) 在行尾 ($) 之前直到并包括行尾 -> 到 $3
6.  用生成的字符串替换匹配项`$1$3`

（您也可以针对特定目录执行此操作`perl -E'for (</tmp/my/directory/*.*>){ .....`

# ruby-on-rails-3 - rails 3 使用 where 子句从两个模型创建索引

> ID：14247583
> 
> 赞同：0
> 
> 时间：2013-01-09T22:21:36.197
> 
> 标签：ruby-on-rails-3, model-view-controller, controller

快速导轨部分，假设我有两个模型用户和角色，我想根据某个角色创建用户的索引/列表，我该如何在我的控制器中构建它

是不是像

```
#first create the association
@user = role.build

#then build the index based on a Role of role_id = 2
@userrole = @user.where(@user.role_id == 2) 
```

我知道这是伪代码，但这是正确的吗？什么是正确的导轨代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:26:12.153

```
roles = Role.where(id: [1, 2])
users = User.where(role_ids: roles.collect(&:ids)) 
```

这只是一个示例，因为显然如果我们已经知道 ID，我们就不需要第一个查询，但是如果我们的角色有一个可编辑的列（例如），我们可以这样做：

```
roles = Role.where(editable: true)
users = User.where(role_ids: roles.collect(&:ids)) 
```

如果我们想订购这些，我们可以简单地添加：

```
users = User.where(role_ids: roles.collect(&:ids)).order("created_at DESC") 
```

# python - 如何在不明确列出列的情况下从 pandas DataFrame 中选择具有一个或多个空值的行？

> ID：14247586
> 
> 赞同：298
> 
> 时间：2013-01-09T22:22:05.290
> 
> 标签：python, pandas, null, nan

我有一个约 300K 行和约 40 列的数据框。我想找出是否有任何行包含空值 - 并将这些“空”行放入单独的数据框中，以便我可以轻松地探索它们。

我可以明确地创建一个面具：

```
mask = False
for col in df.columns: 
    mask = mask | df[col].isnull()
dfnulls = df[mask] 
```

或者我可以这样做：

```
df.ix[df.index[(df.T == np.nan).sum() > 1]] 
```

有没有更优雅的方法（定位带有空值的行）？

* * *

## 回答 #1

> 赞同：468
> 
> 时间：2013-01-09T22:33:07.177

[更新以适应现代`pandas`，这`isnull`是一种方法`DataFrame`。]

您可以使用`isnull`and`any`构建一个布尔系列并使用它来索引到您的框架中：

```
>>> df = pd.DataFrame([range(3), [0, np.NaN, 0], [0, 0, np.NaN], range(3), range(3)])
>>> df.isnull()
       0      1      2
0  False  False  False
1  False   True  False
2  False  False   True
3  False  False  False
4  False  False  False
>>> df.isnull().any(axis=1)
0    False
1     True
2     True
3    False
4    False
dtype: bool
>>> df[df.isnull().any(axis=1)]
   0   1   2
1  0 NaN   0
2  0   0 NaN 
```

* * *

[对于老年人`pandas`：]

您可以使用函数`isnull`而不是方法：

```
In [56]: df = pd.DataFrame([range(3), [0, np.NaN, 0], [0, 0, np.NaN], range(3), range(3)])

In [57]: df
Out[57]: 
   0   1   2
0  0   1   2
1  0 NaN   0
2  0   0 NaN
3  0   1   2
4  0   1   2

In [58]: pd.isnull(df)
Out[58]: 
       0      1      2
0  False  False  False
1  False   True  False
2  False  False   True
3  False  False  False
4  False  False  False

In [59]: pd.isnull(df).any(axis=1)
Out[59]: 
0    False
1     True
2     True
3    False
4    False 
```

导致相当紧凑：

```
In [60]: df[pd.isnull(df).any(axis=1)]
Out[60]: 
   0   1   2
1  0 NaN   0
2  0   0 NaN 
```

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2017-06-22T14:15:37.523

```
def nans(df): return df[df.isnull().any(axis=1)] 
```

然后当你需要它时，你可以输入：

```
nans(your_dataframe) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-08-20T20:21:46.383

如果你想通过一定数量的空值列来过滤行，你可以使用这个：

```
df.iloc[df[(df.isnull().sum(axis=1) >= qty_of_nuls)].index] 
```

所以，这里是一个例子：

您的数据框：

```
>>> df = pd.DataFrame([range(4), [0, np.NaN, 0, np.NaN], [0, 0, np.NaN, 0], range(4), [np.NaN, 0, np.NaN, np.NaN]])
>>> df
     0    1    2    3
0  0.0  1.0  2.0  3.0
1  0.0  NaN  0.0  NaN
2  0.0  0.0  NaN  0.0
3  0.0  1.0  2.0  3.0
4  NaN  0.0  NaN  NaN 
```

如果要选择具有空值的两列或多列的行，请运行以下命令：

```
>>> qty_of_nuls = 2
>>> df.iloc[df[(df.isnull().sum(axis=1) >=qty_of_nuls)].index]
     0    1    2   3
1  0.0  NaN  0.0 NaN
4  NaN  0.0  NaN NaN 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-11-21T18:07:43.503

少了 4 个字符，但多了 2 毫秒

```
%%timeit
df.isna().T.any()
# 52.4 ms ± 352 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)

%%timeit
df.isna().any(axis=1)
# 50 ms ± 423 µs per loop (mean ± std. dev. of 7 runs, 10 loops each) 
```

我可能会用`axis=1`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-08T23:02:08.970

`.any()`并且`.all()`非常适合极端情况，但不是在您寻找特定数量的空值时。这是一种非常简单的方法来做我相信你问的事情。它非常冗长，但很实用。

```
import pandas as pd
import numpy as np

# Some test data frame
df = pd.DataFrame({'num_legs':          [2, 4,      np.nan, 0, np.nan],
                   'num_wings':         [2, 0,      np.nan, 0, 9],
                   'num_specimen_seen': [10, np.nan, 1,     8, np.nan]})

# Helper : Gets NaNs for some row
def row_nan_sums(df):
    sums = []
    for row in df.values:
        sum = 0
        for el in row:
            if el != el: # np.nan is never equal to itself. This is "hacky", but complete.
                sum+=1
        sums.append(sum)
    return sums

# Returns a list of indices for rows with k+ NaNs
def query_k_plus_sums(df, k):
    sums = row_nan_sums(df)
    indices = []
    i = 0
    for sum in sums:
        if (sum >= k):
            indices.append(i)
        i += 1
    return indices

# test
print(df)
print(query_k_plus_sums(df, 2)) 
```

输出

```
 num_legs  num_wings  num_specimen_seen
0       2.0        2.0               10.0
1       4.0        0.0                NaN
2       NaN        NaN                1.0
3       0.0        0.0                8.0
4       NaN        9.0                NaN
[2, 4] 
```

然后，如果你像我一样想要清除这些行，你只需写下：

```
# drop the rows from the data frame
df.drop(query_k_plus_sums(df, 2),inplace=True)
# Reshuffle up data (if you don't do this, the indices won't reset)
df = df.sample(frac=1).reset_index(drop=True)
# print data frame
print(df) 
```

输出：

```
 num_legs  num_wings  num_specimen_seen
0       4.0        0.0                NaN
1       0.0        0.0                8.0
2       2.0        2.0               10.0 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-06T07:17:08.657

```
df1 = df[df.isna().any(axis=1)] 
```

参考链接：（[在 pandas 数据框中显示具有一个或多个 NaN 值的行](https://stackoverflow.com/questions/43424199/display-rows-with-one-or-more-nan-values-in-pandas-dataframe)）

# c# - 在墨卡托地图中很好地包裹大圆弧

> ID：14247588
> 
> 赞同：0
> 
> 时间：2013-01-09T22:22:14.897
> 
> 标签：c#, bing-maps, great-circle, mercator

我正在使用 Bing Map Tiles 和 C#。这是一个 Silverlight 应用程序。在我的应用程序中，我在墨卡托地图上的位置之间绘制了大圆线。一切正常，直到圆圈试图环绕地图。例如，纽约市和东京之间的一个大圆弧与 GC 弧一起给了我一条水平线（我认为它是环绕地球的线）。我想消除这条水平线。

任何建议将不胜感激？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:43:28.750

一种可能的解决方案是将几何图形拆分为两个几何图形，在 +180° 经度的子午线上拆分。通过这种方式，您将能够在没有水平线的情况下绘制它。

# c++ - 从 DirectShow 中的麦克风收到的原始数据获取响度级别

> ID：14247589
> 
> 赞同：-1
> 
> 时间：2013-01-09T22:22:19.187
> 
> 标签：c++, audio, directshow

如何从 DirectShow 中从麦克风接收的原始数据中获取响度级别？

IMediaSample 以字节为单位保存数据。以及我如何读取这些字节并得到一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:37:06.140

响度是一种听觉品质，而不是物理公式。它有很多很多定义。

它也是一个时间值。因此，该值在此期间会发生变化。

我记得我几年前见过的最简单的实现，就是简单地在幅度的最大值上设置一个时间。但是幅度的对数**肯定会**更好地接近耳朵的灵敏度。

您还可以考虑信号的功率（信号*信号......但也有更多的定义考虑了频谱分量......）。

这是厨房食谱。选择最简单的。

**编辑**：看来我的回答太快太模糊了，我可能弄错了音量和响度。[这篇维基百科文章](http://en.wikipedia.org/wiki/Loudness)指出有用于测量响度的单位。[宋](http://en.wikipedia.org/wiki/Sone)和[方](http://en.wikipedia.org/wiki/Phon)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:53:36.427

您需要处理数据以计算原始字节的响度。其中一种方法在[BS.1770 中定义：测量音频节目响度和真实峰值音频电平](https://www.itu.int/rec/R-REC-BS.1770/en)规范的算法并描述了所涉及的算法。

# angularjs - AngularJS - 单击时更改列表中的类

> ID：14247598
> 
> 赞同：0
> 
> 时间：2013-01-09T22:23:21.967
> 
> 标签：angularjs

我刚刚开始使用 Angular，并且仍在尝试了解它是如何工作的。我有 2 个关于 ng-repeat 列表的问题。我将首先发布我的代码。

HTML

```
<div class="row">
    <div class="span2">
        <ul class="nav nav-pills nav-stacked">
            <li ng-repeat="class in classes | orderBy:orderProp" ng-class="activeClass">
                <a ng-click="loadRoster(class)">{{class.class_name}}</a>
            </li>
        </ul>
    </div>
    <div class="span2">
        <ul class="nav nav-pills nav-stacked">
            <li ng-repeat="student in students | orderBy:orderProp">
                <a ng-click="enterPassword(student)">{{student.student_name}}</a>
            </li>
        </ul>
    </div>
</div> 
```

控制器

```
function ClassListCtrl($scope, $http) {
    $scope.loadedList=[];
    $scope.students=[];
    $scope.activeClass='';
    $scope.orderProp = 'alphabetical';

    $http.get('data/class.json').success(function(data) {
        $scope.classes = data;
    });

    $scope.loadRoster=function(classlist){
        $scope.selectedClass=classlist;
        $scope.activeClass='active';
        if($scope.loadedList[classlist.class_id]== undefined){
            $http.get('data/class_'+classlist.class_id+'.json').success(function(data){
                $scope.loadedList[classlist.class_id]=data;
                $scope.students=data;
            });
        }
        $scope.students=$scope.loadedList[classlist.class_id];
    }

    $scope.studentClick=function(student){

    }
} 
```

好的，这可以很好地提取数据。我可以点击一个班级，它会加载该班级的学生。为了减少 AJAX 调用，我存储了那些被单击的类，如果再次单击该类，它将从内存中获取它而不是进行调用。这很好，因为班级名单大部分是静态的。

我试图让它加载一个**默认**的类名册（按字母顺序排列的第一个）并将该列表项标记为活动的。

其次，当他们单击一个列表项时，我想将该列表项更改为活动状态，并将其他项的类更改为空。我也不知道该怎么做。就目前而言，现在没有一个是活跃的，但是当我点击一个时，所有的都变得活跃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T23:06:16.060

在 Html ng-class 中，如果 class_id 与 $scope.activeClass 匹配，则将 li 的类设置为“活动”

```
<li ng-repeat="class in classes | orderBy:orderProp" ng-class="{'active':class.class_id == activeClass}"> 
```

在控制器中调用 $scope.loadRoster 时将 $scope.activeClass 设置为传递给函数的类的 class_id

```
$scope.loadRoster=function(classlist){
    $scope.selectedClass=classlist;
    $scope.activeClass=classlist.class_id; 
```

对于您的默认活动类，只需将 $scope.activeClass 设置为该类的 class_id

# javascript - Javascript中有多维数组类型吗？

> ID：14247604
> 
> 赞同：1
> 
> 时间：2013-01-09T22:23:56.263
> 
> 标签：javascript, arrays

我过去在[Microsoft Small Basic](http://en.wikipedia.org/wiki/Microsoft_Small_Basic)中编程过，它可以有这样的数组：

```
Array[1][1] = "Hello"
Array[1][2] = "Hi"
Array[1][2] = "Hey" 
```

现在，在 Javascript 中，我知道如何创建单个数组 ( `var Array = New Array()`)，但是有没有像上面那样的数组类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T22:24:44.940

JavaScript 中没有真正的多维数组。但是您可以像您所做的那样创建一个数组数组。

JavaScript 的数组只是具有特殊`length`属性和不同原型链的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T22:26:57.663

是的，您需要创建一个`array`of `arrays`：

```
var x = new Array(3);
x[0] = new Array(3);
x[1] = new Array(3);
x[2] = new Array(3);

x[0][0] = "Hello";
etc. 
```

请记住，索引是从零开始的。

*编辑*

或者：

```
var x=[];
x[0] = [];
x[1] = [];
x[2] = [];
...
x[0][0] = "Hello";

etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:27:21.127

最简单的方法是只声明一个数组，然后用一堆其他数组初始化它。例如：

```
var mArray = [
  [1,2,3],
  [4,5,6]
  ];

window.alert(mArray[1][1]); //Displays 5 
```

正如其他人所指出的，这 *实际上*并不是标准意义上的多维数组。它只是一个*恰好*包含其他数组的数组。您可以轻松地拥有一个包含 3 个其他数组、一个 int、一个字符串、一个函数和一个对象的数组。JavaScript 就是这么酷。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T22:28:13.117

你可以做到这一点：

```
var o = [[1,2,3],[4,5,6]]; 
```

您还可以使用 javascript 中的对象是字典这一事实：

```
var o;
o["0"] = {'0':1, '1':2, '1':3};
var x = o["0"]["1"]; //returns 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T22:29:20.083

您可以像这样在 JS 中静态创建数组：

```
var arr = [
   [1, 2, 3, 4], 
   [8, 6, 7, 8]
]; 
```

请注意，由于这不是一个真正的“多维数组”，只是一个“数组数组”，“内部数组”不必是相同的长度，甚至是相同的类型。像这样：

```
var arr = [
   [1, 2, 3, 4], 
   ["a", "b"]
]; 
```

# c# - linq to xml 查询：尝试检索子元素时未设置对象引用错误

> ID：14247606
> 
> 赞同：0
> 
> 时间：2013-01-09T22:24:04.270
> 
> 标签：c#, linq-to-xml

我正在尝试检索所有子元素，但获取 System.Collections.ListDictionaryInternal。对象引用未设置为对象错误的实例。

我的 c# 代码根据传递的 test_id 和 category_id 检索所有问题：-

```
public static List<Questions> GetQuestion_Catgy(int test_id, int ctgy_id)
        {
            try
            {
                XDocument data = XDocument.Load(docurl);
                return (from exm in data.Descendants("test_details")
                        where exm.Attribute("id").Value.Equals(test_id.ToString())
                        from ctgy in exm.Descendants("category")
                        where ctgy.Attribute("id").Value.Equals(ctgy_id.ToString())
                        orderby (int)ctgy.Attribute("id")
                        select new Questions
                        {
                            quesID = Convert.ToInt32(ctgy.Attribute("id").Value),
                            quesSTRING = ctgy.Attribute("ques").Value,
                            quesRATE = Convert.ToInt32(ctgy.Attribute("rating").Value),
                            quesOPT1 = (string)ctgy.Element("opt1").Value,
                            quesOPT2 = (string)ctgy.Element("opt2").Value,
                            quesOPT3 = (string)ctgy.Element("opt3").Value,
                            quesOPT4 = (string)ctgy.Element("opt4").Value,
                            quesANS = Convert.ToInt32(ctgy.Element("ans").Value),
                            quesIMG = (string)ctgy.Element("img").Value
                        }).ToList();
            }
            catch (Exception ex)
            {
                throw new ArgumentException(ex.Data + "\n" + ex.Message);
            }
        } 
```

我的 xml

```
<test_details id="1" name="test exam" time="30" marks="100" difficulty="1">
    <category id="1" name="HTML">
      <question id="1" ques="what is HTML ?" rating="5">
        <opt1>Markup Language</opt1>
        <opt2>Scripting Language</opt2>
        <opt3>Server-Side Lanugae</opt3>
        <opt4>Client-Side Language</opt4>
        <ans>1</ans>
        <img>null</img>
      </question>
      <question id="2" ques="what is LMTH ?" rating="5">
        <opt1>Markup Language</opt1>
        <opt2>Scripting Language</opt2>
        <opt3>Server-Side Lanugae</opt3>
        <opt4>Client-Side Language</opt4>
        <ans>2</ans>
        <img>null</img>
      </question>
    </category>
    <category id="2" name="C#" />
  </test_details> 
```

![在此处输入图像描述](../Images/2fdc728c57de2cf7883e2baf9efe4992.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:34:57.363

`ques`如果您想访问该属性 ，您似乎需要对“问题”元素再降低一层。`ctgy`不会有`ques`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:28:16.397

```
ctgy.Attribute("ques").Value
ctgy.Attribute("rating").Value 
```

没有这样的属性。

在做类似的事情之前做一个空检查

```
(string)ctgy.Element("opt2").Value, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:31:54.317

您的错误在这一行：

```
from ctgy in exm.Descendants("category") 
```

这些`exm`元素与您的类别处于同一级别。您需要替换`exm`为`data`.

例子：

```
from ctgy in data.Descendants("category") 
```

# javascript - iframe 中的输入元素无法获得焦点

> ID：14247607
> 
> 赞同：0
> 
> 时间：2013-01-09T22:24:12.507
> 
> 标签：javascript, jquery, html, css, jquery-1.8

在我的一个网页上，有一个包含表单元素的 iframe。出于某种原因，这些输入元素不能按预期方式工作：

*   如果单击文本字段，则不会获得焦点，并且不会将键入的文本放入其中。
*   如果相同的文本字段有 onclick="this.focus();" 设置，它按预期工作。
*   单选按钮按预期工作。
*   包含 iframe 的元素按预期接收点击事件。
*   我无法在 iframe 中标记文本。

这不会发生在所有浏览器中。

它发生在：

*   IE >= 9
*   火狐18.0
*   铬 22.0.1229.94
*   歌剧 12.12

它不会发生在：

*   即 < 9

这里发生了什么，以及如何解决它？

**编辑：**这似乎是一个 jQuery 问题。它在使用 jQuery 1.8 时发生，但在使用 jQuery 1.7 时不会发生（不同版本之间没有区别）。

# java - 在 Eclipse 中运行 JUnit 测试后，我可以将结果导出为 XML 格式。如何使用 JUnit 命令行获取该 xml 文件？

> ID：14247610
> 
> 赞同：4
> 
> 时间：2013-01-09T22:24:22.507
> 
> 标签：java, xml, unit-testing, testing, junit

我有在 Eclipse 中使用 JUnit 插件运行的 Java 单元测试。在 eclipse 中完成所有测试后，我可以将结果导出为 .xml 格式，我用它来将结果上传到测试结果跟踪工具中。

现在我在使用命令行运行 JUnit 测试的 AIX 系统中运行相同的测试。

我的命令是

```
java org.junit.runner.JUnitCore com.rsa.qa.sae.test.testClassName 
```

现在我想在一个类似的 XML 文件中获得这些测试的结果。

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T05:08:44.187

基本 JUnit 库不生成报告。运行 JUnit 的各种库（[Ant](http://ant.apache.org/manual/Tasks/junit.html)、Eclipse 等）。

如果您不能/不会使用这些工具，那么您需要通过实现 a 来自己生成报告[`RunListener`](http://junit.sourceforge.net/javadoc/org/junit/runner/notification/RunListener.html)，并创建自己的 main 方法将其注册到`JUnitCore`. 使用它，您可以以您想要的任何形式生成 XML。

类似的问题：

*   [生成 JUnit 报告使用的 XML 文件](https://stackoverflow.com/questions/9062412/generate-xml-files-used-by-junit-reports)
*   [从命令行生成 JUnit 报告](https://stackoverflow.com/questions/12445582/generating-junit-reports-from-the-command-line)

# sql - 用于比较由数字和文本组成的字符串的 SQL

> ID：14247611
> 
> 赞同：1
> 
> 时间：2013-01-09T22:24:27.253
> 
> 标签：sql, postgresql, sorting, postgresql-9.2, natural-sort

我需要比较 2 个包含数字和可能文本的字符串。例如我有这张桌子：

```
编号 | 标签 1 | 标签 2 |
1 | 12/小时 | 1 |
2 | 4/A | 41/天 |
3 | 13/A | 三楼 |
4 | 8/A | 8/B |
..

```

我需要确定方向，以便如果 Label 1 < Label2 则 Direction 为 W（与），否则为 A（反对）。所以我必须构建一个以这种方式呈现数据的视图：

```
编号 | 方向  
1 | 一个 |   
2 | W |
3 | 一个 |
4 | W |
..

```

我正在使用 postgres 9.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:44:07.233

```
WITH x AS (
   SELECT id
         ,split_part(label1, '/', 1)::int AS l1_nr
         ,split_part(label1, '/', 2)      AS l1_txt
         ,split_part(label2, '/', 1)::int AS l2_nr
         ,split_part(label2, '/', 2)      AS l2_txt
   FROM t
   )
SELECT id
      ,CASE WHEN (l1_nr, l1_txt) < (l2_nr, l2_txt)
       THEN 'W' ELSE 'A' END AS direction
FROM   x; 
```

我将这两个部分分开[`split_part()`](http://www.postgresql.org/docs/current/interactive/functions-string.html)并检查一个临时行类型以检查哪个标签更大。

两个标签相等或其中一个为 NULL 的情况尚未定义。

[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)不是必需的，只是为了使其更易于阅读。

[-> sqlfiddle](http://sqlfiddle.com/#!12/c364b/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:43:17.580

您可以尝试以下方法：

```
SELECT id, CASE WHEN regexp_replace(label_1,'[^0-9]','','g')::numeric <
                     regexp_replace(label_2,'[^0-9]','','g')::numeric
                THEN 'W'
                ELSE 'A'
           END
FROM table1 
```

`regexp_replace`从字符串中删除所有非数字字符将字符串`::numeric`转换为`numeric`.

详细信息：[`regexp_replace`](http://www.postgresql.org/docs/current/static/functions-string.html)，[模式匹配](http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP)，[`CASE WHEN`](http://www.postgresql.org/docs/current/static/functions-conditional.html)

# java - 渲染中的Libgdx游戏逻辑？

> ID：14247613
> 
> 赞同：8
> 
> 时间：2013-01-09T22:24:29.167
> 
> 标签：java, libgdx

我正在学习 Libgdx 并且有一些关于在渲染方法期间更新我的游戏逻辑的问题。

理想情况下，我希望将我的游戏逻辑和渲染分开。这样做的原因是，如果我在系统上具有高 FPS，我的游戏循环会“运行”得更快。

我正在寻找的是保持体验不变并可能限制我的更新..如果有人可以向我指出如何a）通过 DeltaTime 限制我的渲染更新 b）通过 Deltatime 限制我的游戏逻辑更新的教程。

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-16T17:08:21.323

重新阅读您的问题后，我认为您缺少的技巧（基于您的评论，即在更高刷新率的系统上运行会导致您的游戏逻辑运行得更快），是您实际上根据“delta " 渲染的时间。Andrei Bârsan 在上面提到了这一点，但我想我会详细说明一下如何使用 delta。

例如，在我的游戏的 render() 中，我首先调用我的 entityUpdate(delta)，它更新和移动游戏中的所有对象，按时间“delta”移动的距离缩放（它不渲染它们，只是移动它们的位置变量）。然后我调用 entityManageCollisions(delta)，它解决了由更新引起的所有冲突，最后我调用 entityDraw(batch, delta)，它使用 delta 获取精灵动画的正确帧，并实际在屏幕上绘制所有内容。

我使用实体/组件/系统模型的变体，因此我一般处理我的所有实体，并且我上面提到的那些方法调用本质上是“系统”，它们作用于具有某些组件组合的实体。

因此，总而言之，将 delta（传递给 render() 的参数）传递到您的所有逻辑中，这样您就可以根据自上次调用以来经过的时间量来缩放事物（将实体移动适当的距离）。这要求您根据实体的单位/秒设置速度，因为您正在传递一个值来缩放它们，只需几分之一秒。一旦你做了几次，并试验了结果，你就会处于良好的状态。

另请注意：这将使您在交互式调试会话中发疯，因为增量计时器自上次渲染调用以来一直在累积时间，导致您的实体飞过整个屏幕（并超出 - 为您测试这些边界！）因为它们通常获得亚秒级更新，但最终可能会超过 30 秒（或者无论您花多长时间查看单步调试器的内容），所以在我的渲染（）的最顶部，我有一行说`delta = 0.016036086f;`（该数字是来自我的开发工作站的样本 detla，并且似乎给出了不错的结果 - 您可以通过在测试运行期间将其写入控制台来捕获视频系统的典型增量，并使用该值代替，如果您喜欢) 我对要部署的构建进行注释，但在调试时未注释，因此每一帧都会将游戏向前移动一个一致的量，无论我在调试器中花费多长时间查看事物。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T22:39:38.250

到目前为止的答案是没有使用并行线程 - 我过去自己也有过这个问题，并且有人建议我不要使用它 -[链接](http://www.badlogicgames.com/forum/viewtopic.php?f=11&t=2716&p=13910&hilit=render+loop+logic#p13910)。一个好主意是首先运行世界更新，然后如果帧中没有足够的时间来进行渲染，则跳过渲染。尽管如此，应该使用增量时间来保持一切顺利并防止滞后。

如果使用这种方法，明智的做法是防止发生超过 X 次连续跳帧，因为在（不太可能，但可能，取决于与渲染相比有多少更新逻辑）的情况下，更新逻辑持续时间超过为一帧分配的总时间，这可能意味着您的渲染永远不会发生 - 这不是您想要的。通过限制您跳过的帧数，您可以确保更新可以顺利运行，但您也可以保证当有太多逻辑需要处理时游戏不会死机。

# ios - NSLayoutConstraint 并设置一个视图 X 像素从顶部纵向和 Y 像素从顶部横向

> ID：14247619
> 
> 赞同：5
> 
> 时间：2013-01-09T22:24:53.440
> 
> 标签：ios, objective-c, nslayoutconstraint

想要一个表格视图在纵向时从顶部向下显示 300 像素，而在横向时从顶部显示大约 175 像素。

我似乎无法弄清楚我需要的 VFL 逻辑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T04:00:21.897

像许多自动布局问题一样，是的，您可以按照您的要求做，但这远非显而易见。如果我真的需要精确的 300pt 或 175pt，我也可能会想调整旋转的顶部约束。

但是，如果您想知道如何在不处理轮换事件的情况下执行此操作，您可以：

1.  设置所需的最小上边距 175；

2.  设置较低优先级的首选上边距 300（横向不会满足）；和

3.  不太明显，您还需要一个所需的最小高度（这样在横向中，它会知道不满足较低优先级的请求以使上边距为 300）。

例如，您可以使用（显然用对您有意义的任何内容替换我的底部边距 5，但相应地调整 tableview 的最小高度）：

```
@"V:|-(>=175)-[tableView(>=120)]-5-|" 
```

结合：

```
@"V:|-(300@500)-[tableView]" 
```

（显然，水平轴也会受到限制，但为了简洁起见，我省略了这些限制。）

诚然，这有点不吸引人，也必须精确地指定最小表格高度，但我没有其他方法可以告诉自动布局在什么情况下它应该优雅地不满足可选的 300pt 顶部空间。

* * *

您也可以使用 的*y = mx + b*公式来做到这一点`constraintWithItem`。是的，我知道您问过如何使用 Visual Format Language 执行此操作，但如果您使用`constraintWithItem`，则不必指定最小表格高度，而是可以像这样设置上边距：

```
constraint = [NSLayoutConstraint constraintWithItem:self.tableView
                                          attribute:NSLayoutAttributeTop
                                          relatedBy:NSLayoutRelationEqual
                                             toItem:self.tableView.superview
                                          attribute:NSLayoutAttributeBottom
                                         multiplier:multiplier
                                           constant:constant]; 
```

显然，诀窍是如何确定`multiplier`和`constant`以便您获得 300 pt 纵向和 175 pt 横向。做一点代数，你会发现你可以计算这些值如下：

```
CGFloat multiplier = (300.0 - 175.0) / (superviewPortraitHeight - superviewLandscapeHeight);
CGFloat constant = 175.0 - superviewLandscapeHeight * multiplier; 
```

（同样，我假设您将指定其他约束，以便不会对 tableview 进行模糊定义，例如设置左侧、右侧和底部约束，这可以在可视格式语言中完成。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T22:35:51.750

我不认为无论如何都可以将其设置为执行特定距离，而无需在旋转回调方法中的代码中更改它。如果您为 IB 中的约束创建一个 IBOutlet（我们称之为 con1），并且该约束的初始值为 300，那么在旋转回调方法中您可以更改该常量。

self.con1.constant = 175;

**编辑后：**

这有效：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

    if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight) {
        con1.constant = 175;
    }else{
        con1.constant = 300;
    }
} 
```

# ios - 使用未声明的标识符：ASIdentifierManager

> ID：14247625
> 
> 赞同：20
> 
> 时间：2013-01-09T22:25:39.170
> 
> 标签：ios, ios6, admob, undeclared-identifier

我正在使用以下代码来显示用于 admob 测试应用程序的唯一标识符。

这是我的 applicationDidFinishLaunching ...

```
// Print IDFA (from AdSupport Framework) for iOS 6 and UDID for iOS < 6.
if (NSClassFromString(@"ASIdentifierManager")) {
    NSLog(@"GoogleAdMobAdsSDK ID for testing: %@" ,
          [[[ASIdentifierManager sharedManager] advertisingIdentifier] UUIDString]);
} else {
    NSLog(@"GoogleAdMobAdsSDK ID for testing: %@" ,
          [[UIDevice currentDevice] uniqueIdentifier]);
} 
```

构建“使用未声明的标识符：ASIdentifierManager”时出现错误

我链接了 AdSupport 框架，并且可以访问声明标识符管理器的文件，但它仍然无法识别？

我已经清理了构建文件夹，重新启动了 xCode 相同的结果。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-10T08:05:01.050

您是否从框架中导入了标头？

```
#import <AdSupport/ASIdentifierManager.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T01:43:17.257

感谢您的回答！如果它是一个框架添加开始路径。修复我的错误的示例是：

```
#import "CoreMotion/CMMotionActivityManager.h" 
```

我不正确，因为我只添加了 .h 文件。

```
#import "CMMotionActivityManger.h"  ---  This was incorrect and generated an error. 
```

# javascript - 使用 jQuery 进行值的 Javascript 高效搜索数组

> ID：14247628
> 
> 赞同：6
> 
> 时间：2013-01-09T22:25:50.890
> 
> 标签：javascript, jquery, arrays, search, object

我的 JavaScript 知识在这里存在差距。我想在对象值数组中搜索特定值并返回它。

在我编写 JavaScript 的这一年里，我一直在这样实现它：

```
var itemClicked = (function(){

  var retval;

  //Note self.inventory.itemsArray is an array of JS objects

  $(self.inventory.itemsArray).each(function(i){
    if(parseInt(this.id) === parseInt(idOfItem)){
      retval = this;
      return false;
    }
  });

  return retval;

})(); 
```

它有效，但我确信有任何更优雅的方式。请告诉我！

**编辑 - 解决方案**

感谢@gdoron，他的回答如下。

```
var myVar = $(self.owner.itemsArray).filter(function(){
   return parseInt(this.id) == parseInt(recItemID);
}).get(0); 
```

注意：`.get(0)`在末尾添加是因为 myVar 被包装为 jQuery 对象。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T22:27:16.727

用于此的本机 jQuery 函数是[`filter`](http://api.jquery.com/filter)：

```
$(data).filter(function(){
    return this.id == "foo";
}); 
```

它比您拥有的代码更短，更重要的是更具可读性。
关于效率，它会迭代集合中的所有元素以找到尽可能多的匹配项，但我几乎不相信它会成为您应用程序的瓶颈，**不要专注于微优化**。

我建议您阅读 Eric Lipper 的博客，了解[哪个更快](http://ericlippert.com/2012/12/17/performance-rant/)。

您也可以[`grep`](http://api.jquery.com/jQuery.grep/)按照@Mattias Buelens 的建议使用：

```
$.grep(data, function(ele){
    retun ele.id == "foo";
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T22:42:16.830

使用 jQuery`$.grep( )`函数的另一种选择

```
var arr = $.grep( self.inventory.itemsArray, function ( n ) { 
    return n.id == idOfItem;
}); 
```

上面返回一个匹配数组元素的数组。`arr[0]`如果您只想要第一个，如果它存在，则很容易返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:37:27.473

尽管我不确定该函数实际上应该做什么（由于外部上下文的变量），但以下循环应该更有效

```
var itemClicked = (function(){

  var i, array = self.inventory.itemsArray, length = array.length;

  for( i=0; i < length; i++) {

    if(parseInt(array[i].id) === parseInt(idOfItem)){
      return array[i];
    }

  }

  return undefined;

})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T22:38:40.977

> 它是一组 Javascript 对象

然后根本不要使用jQuery。至少，使用[`$.each`](http://api.jquery.com/jQuery.each)而不是围绕数组构建包装器对象。尽管如此，一个简单的 for 循环更短且性能更高：

```
var itemClicked = (function(idnum) {
    var arr = self.inventory.itemsArray;
    for (var i=0, l=arr.length; i<l; i++)
        if (parseInt(arr[i].id, 10) === idnum)
            return arr[i];
})( parseInt(idOfItem, 10) ); 
```

您不妨考虑立即将 id 属性存储为数字，因此您无需每次都转换它。

# paypal - 贝宝 10400 错误。订单总数缺失

> ID：14247629
> 
> 赞同：0
> 
> 时间：2013-01-09T22:25:50.080
> 
> 标签：paypal

我正在使用一个框架来处理 PayPal。此代码在 Sandbox 上运行良好，但是当我尝试使用实时模式付款时，它向我显示：

```
Array
(
    [TIMESTAMP] => 2013%2d01%2d09T22%3a21%3a12Z
    [CORRELATIONID] => a6af5582b727d
    [ACK] => Failure
    [VERSION] => 94%2e0
    [BUILD] => 4181146
    [L_ERRORCODE0] => 10400
    [L_SHORTMESSAGE0] => Transaction%20refused%20because%20of%20an%20invalid%20argument%2e%20See%20additional%20error%20messages%20for%20details%2e
    [L_LONGMESSAGE0] => Order%20total%20is%20missing%2e
    [L_SEVERITYCODE0] => Error
) 
```

我不知道我做错了什么。API 密钥是正确的。该框架将这些变量发送到 PayPal。

```
 $padata =   '&CURRENCYCODE='.urlencode($PayPalCurrencyCode).
            '&PAYMENTACTION=Sale'.
            '&ALLOWNOTE=1'.
            '&PAYMENTREQUEST_0_CURRENCYCODE='.urlencode($PayPalCurrencyCode).
            '&PAYMENTREQUEST_0_AMT='.urlencode($ItemTotalPrice).
            '&PAYMENTREQUEST_0_ITEMAMT='.urlencode($ItemTotalPrice). 
            '&L_PAYMENTREQUEST_0_QTY0='. urlencode($ItemQty).
            '&L_PAYMENTREQUEST_0_AMT0='.urlencode($ItemPrice).
            '&L_PAYMENTREQUEST_0_NAME0='.urlencode($ItemName).
            '&L_PAYMENTREQUEST_0_NUMBER0='.urlencode($ItemNumber).
            '&AMT='.urlencode($ItemTotalPrice).             
            '&RETURNURL='.urlencode($PayPalReturnURL ).
            '&CANCELURL='.urlencode($PayPalCancelURL); 
```

我希望你能帮助我

这是所有代码：

如果我 "echo" $padata 一些值是空的，比如 "AMT"。

```
&TOKEN=EC-2TW28437TX702052X&PAYERID=T9FV73NEH3UU2&PAYMENTACTION=SALE&AMT=&CURRENCYCODE=MXN 
```

现在代码：

```
<?php $articulo = "Proceso Finalizado"; ?>
<?php include ('header.php'); ?>
<div id="contenido">
<?php
session_start();
include_once("config.php");
include_once("paypal.class.php");

if($_POST) //Post Data received from product list page.
{
    //Mainly we need 4 variables from an item, Item Name, Item Price, Item Number and Item Quantity.
    $ItemName = $_POST["itemname"]; //Item Name
    $ItemPrice = $_POST["itemprice"]; //Item Price
    $ItemNumber = $_POST["itemnumber"]; //Item Number
    $ItemQty = $_POST["itemQty"]; // Item Quantity
    $ItemTotalPrice = ($ItemPrice*$ItemQty); //(Item Price x Quantity = Total) Get total amount of product; 

    //Data to be sent to paypal
    $padata =   '&CURRENCYCODE='.urlencode($PayPalCurrencyCode).
                '&PAYMENTACTION=Sale'.
                '&ALLOWNOTE=1'.
                '&PAYMENTREQUEST_0_CURRENCYCODE='.urlencode($PayPalCurrencyCode).
                '&PAYMENTREQUEST_0_AMT='.urlencode($ItemTotalPrice).
                '&PAYMENTREQUEST_0_ITEMAMT='.urlencode($ItemTotalPrice). 
                '&L_PAYMENTREQUEST_0_QTY0='. urlencode($ItemQty).
                '&L_PAYMENTREQUEST_0_AMT0='.urlencode($ItemPrice).
                '&L_PAYMENTREQUEST_0_NAME0='.urlencode($ItemName).
                '&L_PAYMENTREQUEST_0_NUMBER0='.urlencode($ItemNumber).
                '&AMT='.urlencode($ItemTotalPrice).             
                '&RETURNURL='.urlencode($PayPalReturnURL ).
                '&CANCELURL='.urlencode($PayPalCancelURL);  
        $padatafin = $padata;
        //We need to execute the "SetExpressCheckOut" method to obtain paypal token
        $paypal= new MyPayPal();
        $httpParsedResponseAr = $paypal->PPHttpPost('SetExpressCheckout', $padata, $PayPalApiUsername, $PayPalApiPassword, $PayPalApiSignature, $PayPalMode);

        //Respond according to message we receive from Paypal
        if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"]))
        {

                // If successful set some session variable we need later when user is redirected back to page from paypal. 
                $_SESSION['itemprice'] =  $ItemPrice;
                $_SESSION['totalamount'] = $ItemTotalPrice;
                $_SESSION['itemName'] =  $ItemName;
                $_SESSION['itemNo'] =  $ItemNumber;
                $_SESSION['itemQTY'] =  $ItemQty;

                if($PayPalMode=='sandbox')
                {
                    $paypalmode     =   '.sandbox';
                }
                else
                {
                    $paypalmode     =   '';
                }
                //Redirect user to PayPal store with Token received.
                $paypalurl ='https://www'.$paypalmode.'.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token='.$httpParsedResponseAr["TOKEN"].'';
                header('Location: '.$paypalurl);

        }else{
            //Show error message
            echo '<div style="color:red"><b>Error : </b>'.urldecode($httpParsedResponseAr["L_LONGMESSAGE0"]).'</div>';
            echo '<pre>';
            print_r($httpParsedResponseAr);
            echo '</pre>';
        }

}

//Paypal redirects back to this page using ReturnURL, We should receive TOKEN and Payer ID
if(isset($_GET["token"]) && isset($_GET["PayerID"]))
{
    //we will be using these two variables to execute the "DoExpressCheckoutPayment"
    //Note: we haven't received any payment yet.

    $token = $_GET["token"];
    $playerid = $_GET["PayerID"];

    //get session variables
    $ItemPrice      = $_SESSION['itemprice'];
    $ItemTotalPrice = $_SESSION['totalamount'];
    $ItemName       = $_SESSION['itemName'];
    $ItemNumber     = $_SESSION['itemNo'];
    $ItemQTY        = $_SESSION['itemQTY'];
    $nombre2        = $_SESSION['nombre'];
    $apellidos2     = $_SESSION['apellidos'];
    $edad2          = $_SESSION['edad'];
    $sexo2          = $_SESSION['sexo'];
    $telefono2      = $_SESSION['telefono'];
    $celular2       = $_SESSION['celular'];
    $email2         = $_SESSION['email'];
    $dir2           = $_SESSION['dir'];
    $colonia2       = $_SESSION['colonia'];
    $cp2            = $_SESSION['cp'];
    $ciudad2        = $_SESSION['ciudad'];
    $pais2          = $_SESSION['pais'];
    $confirmacion   = urldecode($httpParsedResponseAr["TRANSACTIONID"]);
    $fecha          = date("j, n, Y"); 
    $cantidad       = $_SESSION['itemQTY'];

    $padata =           
                        '&TOKEN='.urlencode($token).
                        '&PAYERID='.urlencode($playerid).
                        '&PAYMENTACTION='.urlencode("SALE").
                        '&AMT='.urlencode($ItemTotalPrice).
                        '&CURRENCYCODE='.urlencode($PayPalCurrencyCode);
                                    echo '<pre>';
            print_r($padata);
            echo '</pre>';

    //We need to execute the "DoExpressCheckoutPayment" at this point to Receive payment from user.
    $paypal= new MyPayPal();
    $httpParsedResponseAr = $paypal->PPHttpPost('DoExpressCheckoutPayment', $padata, $PayPalApiUsername, $PayPalApiPassword, $PayPalApiSignature, $PayPalMode);

    //Check if everything went ok..
    if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"])) 
    {
            echo '<h2>Transacción Exitosa</h2>';

            $con = mysql_connect("localhost","cruxcong","gress12AdT");
            if (!$con)
              {
                die('Could not connect: ' . mysql_error());
              }
            mysql_select_db("pagopaypal", $con);
            mysql_query("SET NAMES 'utf8'");
            mysql_query("INSERT INTO asistentes (confirmacion, fecha, paquete, Cantidad, nombre, apellidos, edad, sexo, telefono, celular, email, dir, colonia, cp, ciudad, pais)
            VALUES ('".urldecode($httpParsedResponseAr["TRANSACTIONID"])."','$fecha','$ItemName','$cantidad','$nombre2','$apellidos2','$edad2','$sexo2','$telefono2','$celular2','$email2','$dir2','$colonia2','$cp2','$ciudad2','$pais2')");
            mysql_close($con);

                /*
                //Sometimes Payment are kept pending even when transaction is complete. 
                //May be because of Currency change, or user choose to review each payment etc.
                //hence we need to notify user about it and ask him manually approve the transiction
                */

                if('Completed' == $httpParsedResponseAr["PAYMENTSTATUS"])
                {
                    echo '¡El pago ha sido hecho! tu número de confirmación es: <div style="color:red"><b>' .urldecode($httpParsedResponseAr["TRANSACTIONID"]).'</b></div> El cual deberás de presentar junto con una identificación oficial para tener acceso al congreso.';
                }
                elseif('Pending' == $httpParsedResponseAr["PAYMENTSTATUS"])
                {
                    echo 'Transacción Completada, pero el pago todavía está pendiente! Necesitas autorizarlo manualmente en tu <a target="_new" href="http://www.paypal.com">Cuenta de PayPal</a>.<br /><br /> Tu número de confirmación es: <div style="color:red"><b>' .urldecode($httpParsedResponseAr["TRANSACTIONID"]).'</b></div> El cual deberás de presentar junto con una identificación oficial para tener acceso al congreso, una vez que hayas confirmado el pago.';
                }

                echo "<p><b>IMPRIME ESTA DOCUMENTO COMO COMPROBANTE DE PAGO</b></p>";
                echo "<form><input type=\"button\" name=\"imprimir\" value=\"Imprimir\" onclick=\"window.print();\"> </form> <br />";
                $con = mysql_connect("localhost","cruxcong","gress12AdT");
            if (!$con)
              {
                die('Could not connect: ' . mysql_error());
              }
            mysql_select_db("pagopaypal", $con);
            mysql_query("SET NAMES 'utf8'");
            $result = mysql_query("SELECT * FROM asistentes WHERE confirmacion='".urldecode($httpParsedResponseAr["TRANSACTIONID"])."'");
            while($row = mysql_fetch_array($result))
              {     
              echo "<b>Fecha de compra: </b>".$row['fecha']."<br>";   
              echo "<b>Paquete: </b>".$row['paquete']."<br>";
              echo "<b>Cantidad de boletos: </b>".$row['Cantidad']."<br><br>";  
              echo "<b>Nombre: </b>".$row['nombre'] . " " . $row['apellidos']."<br>";
              echo "<b>Edad: </b>".$row['edad']."<br>";
              echo "<b>Sexo: </b>".$row['sexo']."<br>";
              echo "<b>Teléfono: </b>".$row['telefono']."<br>";
              echo "<b>Celular: </b>".$row['celular']."<br>";
              echo "<b>Email: </b>".$row['email']."<br>";
              echo "<b>Dirección: </b>".$row['dir']."<br>";
              echo "<b>Colonia: </b>".$row['colonia']."<br>";
              echo "<b>Código Postal: </b>".$row['cp']."<br>";
              echo "<b>Ciudad: </b>".$row['ciudad']."<br>";
              echo "<b>País: </b>".$row['pais'];

              echo "<br>";
              }
            mysql_close($con);

            //echo '<br /><b>Stuff to store in database :</b><br /><pre>';

                $transactionID = urlencode($httpParsedResponseAr["TRANSACTIONID"]);
                $nvpStr = "&TRANSACTIONID=".$transactionID;
                $paypal= new MyPayPal();
                $httpParsedResponseAr = $paypal->PPHttpPost('GetTransactionDetails', $nvpStr, $PayPalApiUsername, $PayPalApiPassword, $PayPalApiSignature, $PayPalMode);

                if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"])) {

                    /* 
                    #### SAVE BUYER INFORMATION IN DATABASE ###
                    $buyerName = $httpParsedResponseAr["FIRSTNAME"].' '.$httpParsedResponseAr["LASTNAME"];
                    $buyerEmail = $httpParsedResponseAr["EMAIL"];

                    $conn = mysql_connect("localhost","MySQLUsername","MySQLPassword");
                    if (!$conn)
                    {
                     die('Could not connect: ' . mysql_error());
                    }

                    mysql_select_db("Database_Name", $conn);

                    mysql_query("INSERT INTO BuyerTable 
                    (BuyerName,BuyerEmail,TransactionID,ItemName,ItemNumber, ItemAmount,ItemQTY)
                    VALUES 
                    ('$buyerName','$buyerEmail','$transactionID','$ItemName',$ItemNumber, $ItemTotalPrice,$ItemQTY)");

                    mysql_close($con);
                    */

                    //echo '<pre>';
                    //print_r($httpParsedResponseAr);
                    //echo '</pre>';
                } else  {
                    echo '<h2>No se ha podido realizar la transacción</h2>';
                    echo '<p>Asegúrate de haber seleccionado correctamente un paquete, o bien que tu tarjeta de débito, crédito o cuenta de PayPal tenga fondos suficientes para realizar la transacción</p>';

                }

    }else{  
            echo '<pre>';
            print_r($padata);
            echo '</pre>';

            echo "<br /><br />";
            print_r($httpParsedResponseAr);
            echo '<div style="color:red"><b>Error : </b>'.urldecode($httpParsedResponseAr["L_LONGMESSAGE0"]).'</div>';
            echo '<pre>';
            print_r($httpParsedResponseAr);
            echo '</pre>';
    }
}
?>
</div>
</div>
</body>
</html>
<?php session_destroy(); ?> 
```

# sql - 假设我有 max(pid)=1001 如果我想显示通过 +1 到最大值的 1002 的值，那么我该怎么做

> ID：14247632
> 
> 赞同：0
> 
> 时间：2013-01-09T22:26:19.753
> 
> 标签：sql

假设我有`max(pid)=1001`，如果我想显示 1002 的值，它通过 +1 变为最大值，那么我该怎么做

这是我想要选择 max(pid) 并希望将其显示到文本框中的整个代码

```
public PatientRegistration()
    {
        InitializeComponent();
        string connectionstring = "DATABASE=hmanagmentsystem;UID=root;PASSWORD=;SERVER=localhost";
        con = new MySqlConnection(connectionstring);
        con.Open();
    }

  private void PatientRegistration_Load(object sender, EventArgs e)
    {

        MySqlCommand command = new MySqlCommand("select max(pid) from patientreg",con);
        int cmd=Int32.Parse(command.ExecuteScalar().ToString());
        con.Close();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:32:01.217

怎么样：

```
MySqlCommand command = new MySqlCommand("select max(pid) + 1 from patientreg", 
    con); 
```

更全面：

```
string connectionString;
public PatientRegistration()
{
    InitializeComponent();
    connectionString = "DATABASE=hmanagmentsystem;UID=root;PASSWORD=;SERVER=localhost";
}

private void PatientRegistration_Load(object sender, EventArgs e)
{
    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        conn.Open;

        using (SqlCommand = new SqlCommand("select max(pid) + 1 from patientreg",conn))
        {
            // this assumes an asp:TextBox called IDTextBox
            IDTextBox.Text = command.ExecuteScalar().ToString();
        }
    }
} 
```

# http - HTTP Basic 中的密码可以是可选的吗？

> ID：14247637
> 
> 赞同：0
> 
> 时间：2013-01-09T22:26:47.397
> 
> 标签：http, soa, basic-authentication

我想使用 HTTP Basic auth 在专用网络中的受信任服务之间进行无密码身份验证。使用基本身份验证时是否可以完全省略密码字段？我应该研究更好的身份验证机制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:16:27.663

在 HTTP Basic auth 中，用户名和密码使用冒号连接，然后以 base64 编码，生成的标头如下所示：

```
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

Basic 部分指定基本身份验证，第二部分是 base64 编码的令牌。它不必是用户名/密码组合，而可以是带有空白密码的用户名，或单独的用户名。在解码授权标头时，您只需要注意这一点。

# ios - 为什么在 ARC 中发送消息会导致保留周期警告，但属性集不会？

> ID：14247642
> 
> 赞同：12
> 
> 时间：2013-01-09T22:27:12.197
> 
> 标签：ios, objective-c, memory, memory-management, automatic-ref-counting

```
[self.foo setBlock:^{
    [self doSomething]; // causes warning
}]; 
```

相对

```
[self.foo setBlock:^{
    self.bar = baz;     // does not cause warning
}]; 
```

警告是“`self`在此块中强烈捕获可能会导致保留周期。”

两者都不会导致强有力的参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:02:58.383

这是一个编译器错误，您应该向 Apple 提交错误报告。

两者都是一样的，`a.b = c`只是写法不同而已`[a setB: c]`。如果编译器处理一个与另一个不同，这是一个错误。

# twitter-bootstrap - 如何使 Google Plus 徽章具有响应性？

> ID：14247643
> 
> 赞同：4
> 
> 时间：2013-01-09T22:27:13.667
> 
> 标签：twitter-bootstrap, responsive-design, google-plus

目前，Google Plus 徽章会自动响应宽度的变化：[https ://developers.google.com/+/plugins/badge/](https://developers.google.com/+/plugins/badge/)

我们的新网站设计使用 Bootstrap 进行响应式布局，我们如何才能使其具有响应性？

这是我们当前的徽章代码：

```
<!-- Place this tag where you want the badge to render. -->
<div class="g-plus" data-width="230" data-href="//plus.google.com/102018846923934084444" data-rel="publisher"></div>

<!-- Place this tag after the last badge tag. -->
<script type="text/javascript">
  (function() {
   var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
   po.src = 'https://apis.google.com/js/plusone.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})();
</script> 
```

如您所见，默认宽度为 230 像素。有点困惑如何干净地做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-01T19:48:12.470

这对我有用。万一我们只有一个g级徽章。

```
<div id="google-badge" style="width: 100%">
    <!-- Place this tag where you want the widget to render. -->
    <div class="g-person" data-href="//plus.google.com/104771303799616655833" data-rel="author" data-width="180"></div>
    <!-- Place this tag after the last widget tag. --><script type="text/javascript">
    window.___gcfg = {lang: 'de'};

    // just put this in here
    document.getElementsByClassName('g-person')[0].setAttribute('data-width', document.getElementById('google-badge').clientWidth);

    (function () {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://apis.google.com/js/platform.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();
    </script>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:27:34.990

您可以使用“静态”徽章选项，而不是使用小部件，它基本上只是一个链接和一个图像。小部件代码在呈现后不会监听其属性的更新。此外，徽章小部件上的高度和宽度具有可能最终导致徽章无法呈现的约束，具体取决于在响应式布局中如何计算宽度/高度。

你会失去静态徽章的动态功能，比如人们可以立即将你添加到一个圈子而不离开，但它确实为你提供了对布局的更多控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T19:41:22.690

这就是我所做的...

使用 twitter 的引导脚手架类，我创建了多个徽章，这些徽章根据浏览器所处的“模式”（例如台式机、平板电脑或手机）呈现。

[Twitter Bootstrap 脚手架](http://twitter.github.com/bootstrap/scaffolding.html "Twitter Bootstrap 脚手架")

那行得通！

# haskell - 剥离左/右字符串（和 chomp）

> ID：14247647
> 
> 赞同：6
> 
> 时间：2013-01-09T22:27:32.243
> 
> 标签：haskell

我没有发现如何在 Haskell 中删除字符串（删除前导/尾随字符），并且没有地方可以找到这样的`strip`或`chomp`函数（如果我错了，请纠正我）。

我要做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T22:39:59.320

看看[`Data.Text`](http://hackage.haskell.org/packages/archive/text/0.11.2.3/doc/html/Data-Text.html)。任何使用 Prelude 列表的东西，例如`String`s，通常表现不佳，尤其是像`stripR`. 一些人认为这是过去的错误，因为它已经感染了许多（否则是明智的）接口，因为使用字符单链表 ( `String`) 处理文本数据的效率低下。

您要查找的功能依次为：`dropWhile`, `dropWhileEnd`, `dropAround`, `stripStart`, `stripEnd`, `strip`.

请注意，没有基于字符相等性的剥离的特定功能。`dropX`除非它是一个*非常*常用的谓词，否则你并没有真正从谓词中获得任何好处`Data.Char.isSpace`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T22:38:22.020

首先，您应该使用`Text`(from the `text`package) 而不是`String`，因为`text`效率更高。

另外，`text`已经有了这个功能：

```
-- Remove leading and trailing white space from a string.
strip :: Text -> Text 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T22:39:39.267

更通用的方法是将谓词传递给`strip`函数，因此可以`stripL isSpace`例如删除所有前导空格。

然后`stripL`将只是`dropWhile`.

为了剥离末端，一个可能更有效的版本使用`foldr`,

```
stripR :: (a -> Bool) -> [a] -> [a]
stripR pred = foldr keepOrDrop []
  where
    keepOrDrop c xs
        | pred c    = case xs of
                        [] -> []
                        _  -> c:xs
        | otherwise = c:xs 
```

它可以在不遍历整个输入列表的情况下开始产生输出，并且如果没有长时间运行的元素满足谓词作为输入，那么它是有效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T22:27:32.243

这里有 3 个函数和 3 个 currified 别名函数可以通过：

```
stripL :: Char -> String -> String
stripL x = dropWhile (==x)

stripR :: Char -> String -> String
stripR x = reverse . stripL . reverse

strip :: Char -> String -> String
strip x = stripL x . stripR x

chompL :: String -> String
chompL = stripL ' '

chompR :: String -> String
chompR = stripR ' '

chomp :: String -> String
chomp = strip ' ' 
```

你怎么看？是否可以将此类功能添加到`Data.String`？

# c# - ArcObject IWMSServiceDescription.get_LayerDescription C# 错误

> ID：14247650
> 
> 赞同：0
> 
> 时间：2013-01-09T22:27:50.337
> 
> 标签：c#, .net, arcgis, esri, wms

我的目标是使用 ESRI 的 ArcObject API for .NET 连接到 WMS 服务并在我的应用程序地图上显示一个图层。

这是我正在努力解决的代码部分：

```
...

String url = "some value";
String layerTitle = "another value";

...

PropertySet props = new PropertySet();
props.SetProperty("URL", url);

WMSConnectionName connectionName = new WMSConnectionName();
connectionName.ConnectionProperties = props;

WMSMapLayer mapLayer = new WMSMapLayer();
(mapLayer as IDataLayer).Connect(connectionName as IName);

IWMSGroupLayer groupLayer = (IWMSGroupLayer)mapLayer;
IWMSServiceDescription serviceDescription = groupLayer.WMSServiceDescription;
IWMSLayerDescription layerDescription = serviceDescription.get_LayerDescription(0);

groupLayer.CreateWMSLayer(layerDescription);
groupLayer.get_Layer(0).Visible = true;

ILayer layer = (ILayer)groupLayer;
layer.Name = "WxOverlays " + layerTitle;
layer.Visible = true; 
```

在运行时我遇到：

> System.Runtime.InteropServices.COMException (0x8000FFFF)：提供的命令在 ESRI.ArcGIS.GISClient.IWMSServiceDescription.get_LayerDescription（Int32 索引）的命令池中不存在

google 搜索显示 ArcObject API 中的一些类似方法会引发相同的异常，因为它们在 C# 中不受支持。有没有人遇到过这个？有人看到解决方法吗？不幸的是，我被困在使用 C# 中，所以使用 Java 或可能从 ESRI 获得更好支持的东西是不可能的。

# php - dojo dojo.behavior 值未发布

> ID：14247652
> 
> 赞同：0
> 
> 时间：2013-01-09T22:28:02.103
> 
> 标签：php, dojo, javascript-framework

当我运行以下代码段并单击“提交”时，不会发布“价格”；有什么我忘记了吗？

```
<?php
var_dump($_POST);
?> 
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="libs/dijit/themes/claro/claro.css"> 
<script>dojoConfig = {async: true}</script>
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.3/dojo/dojo.js"></script> 
</head> 
<body class="claro">
<form id="myform" method="post" action="index.php"> 
  <input class="cif" name="price" type="text" value="125.10" />
  <input type="submit" value="submit" name="submit">
</form>
<script type="text/javascript">
require(["dojo/ready", "dijit/form/NumberTextBox", "dojo/behavior"],
   function(ready, box, behavior){
      ready(function(){     
         behavior.add({
           '.cif': function(node) { //assumes "found"
              new box({constraints: {pattern: "###,###.00"}, value: dojo.number.format(node.value, {places:2})},node);                          
         }
      });
      behavior.apply();
   });      
});
</script>
</body>
</html> 
```

对不起这个新手问题

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T10:59:39.843

最近我遇到了类似的问题，我只找到了这个结果，但没有答案。但是今天我弄明白了，所以我会分享我的知识。

当您创建一个新的小部件框时，您还需要定义“名称”属性，否则该小部件将生成隐藏输入，而在发布时不需要“名称”属性。

更改此行：

```
new box({constraints: {pattern: "###,###.00"}, value: dojo.number.format(node.value, {places:2}), name: "price"},node); 
```

特里克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:54:23.387

代替：

```
var_dump($_POST); 
```

和：

```
var_dump($_POST['price']); 
```

# node.js - AppFog node.js 客户端无法加载 socket.io

> ID：14247654
> 
> 赞同：1
> 
> 时间：2013-01-09T22:28:05.410
> 
> 标签：node.js, socket.io, appfog

我刚刚将一个 node.js 站点部署到 AppFog。当我转到“http://localhost:8080”时，它在本地运行良好，但是当我到达 AppFog 上的那个时：http://bandwithfriends.aws.af.cm/[我](http://bandwithfriends.aws.af.cm/)收到以下 Chrome 控制台错误：

```
XMLHttpRequest cannot load http://localhost:8080/socket.io/1/?t=1357769454152\. Origin http://bandwithfriends.aws.af.cm is not allowed by Access-Control-Allow-Origin. 
```

**服务器代码：**

```
var app = require('http').createServer(handler),
    io = require('socket.io').listen(app),
    static = require('node-static'); // for serving files

// This will make all the files in the current folder
// accessible from the web
var fileServer = new static.Server('./');

app.listen(process.env.VCAP_APP_PORT || 8080);

io.configure('development', function(){
  io.set('transports', ['xhr-polling']);
}); 
```

**客户代码 index.html：** 我包括这样的 socket.io：

```
<script src="/socket.io/socket.io.js"></script> 
```

**客户端代码 script.js：**

```
var url = 'http://localhost:8080';
var socket = io.connect(url); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T02:12:04.837

我所要做的就是删除客户端代码上的 url：

```
var socket = io.connect(); 
```

希望这可以帮助其他有同样问题的人！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T06:08:20.003

您的客户端和服务器端都是错误的。

在客户端；进行此更改：

```
var url = io.connect('http://<your domain name>');
//For example: var url = io.connect('http://shash7.ap01.aws.af.cm'); 
```

在服务器端，您需要像这样实现 socket.io：

```
var app = require('express')()   , server =
require('http').createServer(app)   , io =
require('socket.io').listen(server);

server.listen(80); 
```

上面的代码取自 socket.io 站点。他们改变了 socket.io 在 0.9 版本中监听的方式，所以使用上面的版本。

除此之外，一切看起来都很好。告诉我你是否仍然无法解决这个问题。

# mysql - Mysql CHECK 约束

> ID：14247655
> 
> 赞同：15
> 
> 时间：2013-01-09T22:28:06.487
> 
> 标签：mysql, sql

> **可能重复：**
> [MySQL 中的 CHECK 约束不起作用](https://stackoverflow.com/questions/2115497/check-constraint-in-mysql-is-not-working)

我是学生，现在我必须弄清楚支票的含义。我们有一个小代码：

```
CHECK (CHAR_LENGTH(PLZ) = 4) 
```

现在我必须找出它到底在做什么。问题是我在互联网上找不到任何东西（或者我使用谷歌做的事情完全错误）。我创建了这段代码来测试它：

```
CREATE TABLE Test(
    ID CHAR(4),
    CHECK (CHAR_LENGTH(ID) = 4)
);

INSERT INTO Test(ID) VALUES ('12345'); 
```

问题是，无论我是否删除带有 CHECK 约束的行，我都找不到任何区别。现在我问你？我用不用有什么区别。

# php - PHP AES256 加密 => RNCryptor RNDecryptor 返回空白/HMAC 不匹配

> ID：14247657
> 
> 赞同：1
> 
> 时间：2013-01-09T22:28:13.523
> 
> 标签：php, ios, encryption, aes, rncryptor

使用 PHP 5.4 (mcrypt)、RNCryptor 2、iOS 6。

[PHP 函数使用https://github.com/rnapier/RNCryptor/wiki/Data-Format](https://github.com/rnapier/RNCryptor/wiki/Data-Format)中引用的所有标头创建 base64 。

PHP 解密函数可以解密来自 RNEncryptor 的 base64 字符串，下面的 PHP 加密函数按预期返回数据。

在下面的 PHP Encrypt 函数中使用带有 base64 的 RNDecryptor 时，不会返回任何数据，如下面的 XCode 输出所示。

PHP函数：

```
function encrypt($data, $key)
{
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

    $salt = '12345678';

    $_key = $this->pbkdf2('SHA1', $key, $salt, 10000, 32, true);

    $ciphertext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $_key, $data, MCRYPT_MODE_CBC, $iv);

    $hmac = $this->pbkdf2('SHA1', $key, $salt, 10000, 32, true);

    $data = mb_convert_encoding(chr(1).chr(0).$salt.$salt.$iv.$ciphertext.$hmac, "BASE64", "UTF-8");

    return $data;
} 
```

PHP 函数调用：

```
encrypt('My Data', 'mykey'); 
```

IOS：

```
NSError * error;
NSData *decryptedData = [RNDecryptor decryptData:[NSString base64DataFromString:@"AQBpcGhvbmU2MmlwaG9uZTYyrYk2rJnaoywktnx6TZ4X3YKgYuEHCL1EHv+/MqIvQMq5BmZOyMJr QSRs9P4uxShsOJOg67VYniUGhHbFNTSl1Q=="]
                                    withPassword:@"mykey"
                                           error:&error];

NSLog(@"data = %@, %@", decryptedData, error); 
```

XCode 输出：

> 数据 = <>, (null)

这是在我在 RNDecryptor -finish 中注释掉 HMAC 验证时完成的，一旦取消注释这些部分，我会收到 HMAC 不匹配错误

> 数据=（空），错误域=net.robnapier.RNCryptManager 代码=1“HMAC 不匹配”用户信息=0x1e564280 {NSLocalizedDescription=HMAC 不匹配}

```
if (self.hasHMAC) {
  NSMutableData *HMACData = [NSMutableData dataWithLength:self.HMACLength];
  CCHmacFinal(&_HMACContext, [HMACData mutableBytes]);

  if (![HMACData isEqualToData:self.inData]) {
    [self cleanupAndNotifyWithError:[NSError errorWithDomain:kRNCryptorErrorDomain
                                                        code:kRNCryptorHMACMismatch
                                                    userInfo:[NSDictionary dictionaryWithObject:@"HMAC Mismatch"
                                                                                         forKey:NSLocalizedDescriptionKey]]];
    return;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:07:18.260

`mb_convert_encoding()`将进行base64转换，但会输出*分块*的base64。

PHP base64 解码器将接受分块和非分块，但 iOS ......？

也许您只需要编码：

```
$data = base64_encode(chr(1).chr(0).$salt.$salt.$iv.$ciphertext.$hmac); 
```

您可能想查看[iOS/PHP kCCDecodeError](https://stackoverflow.com/questions/12300147/ios-php-kccdecodeerror) 以了解其他实现。

最后，从[RNCryptor Wiki](https://github.com/rnapier/RNCryptor/wiki/Data-Format) Data Format 中，我看到了（连同[Stack Overflow 上 PHP 实现](https://stackoverflow.com/questions/13000843/retrieve-iv-from-rncryptor-aes-256-header-in-php/13785706#13785706)的链接）

> HMAC 是使用密文和 HMACKey（上图）和 SHA-256 PRF 生成的。

...但是您附加的 HMAC 在我看来实际上是 HMACKey，而不是 HMAC ...？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T00:37:49.823

问题是由于不正确的 HMAC（正在传递 HMAC 密钥）和 PHP 加密需要对要加密的数据进行 PKCS7 填充（也不是 IV）。

最终的 PHP 函数...

```
function AES256Encrypt($data, $key)
{
    $block = mcrypt_get_block_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    $pad = $block - (strlen($data) % $block);
    $data .= str_repeat(chr($pad), $pad);

    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

    $keySalt = '12345678';
    $hmacSalt = '12345678';

    $_key = $this->pbkdf2('SHA1', $key, $keySalt, 10000, 32, true);
    $_hmacKey = $this->pbkdf2('SHA1', $key, $hmacSalt, 10000, 32, true);

    $ciphertext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $_key, $data, MCRYPT_MODE_CBC, $iv);

    $data = base64_encode(chr(1).chr(0).$keySalt.$hmacSalt.$iv.$ciphertext.hash_hmac('SHA256',$ciphertext,$_hmacKey, true));
    return $data;
} 
```

# java - JFreeChart PeriodAxis :29 分钟分数

> ID：14247663
> 
> 赞同：4
> 
> 时间：2013-01-09T22:28:48.300
> 
> 标签：java, jfreechart

我正在尝试在图表中使用 PeriodAxis 来绘制一些时间序列数据。第一个数据点出现在 2012-01-08 19:00:00，最后一个数据点出现在 2012-01-09 19:00:00。

绘制图表时，刻度标签从 19:29 开始，到 19:29 结束。我希望他们从 19:00 开始并相应地结束——也就是说，我不想要 :29 分钟的分数。我尝试使用 setStandardTickUnits() 将刻度标签增量设置为 1 小时增量，但这并没有改变任何东西。我似乎找不到任何其他方法可以让我更改刻度单位。

![在此处输入图像描述](../Images/5a1c80a6d745e150a6b518ce8b988ecc.png)

**示例代码：**

```
PeriodAxis domain = new PeriodAxis(null, new Hour(19, new Day(8, SerialDate.JANUARY, 2012)),
            new Hour(19, new Day(9, SerialDate.JANUARY, 2012)));
domain.setAutoRangeTimePeriodClass(Hour.class);
PeriodAxisLabelInfo[] periodLabels = new PeriodAxisLabelInfo[2];
periodLabels[0] = new PeriodAxisLabelInfo(Hour.class, new SimpleDateFormat("HH:mm"));   
periodLabels[1] = new PeriodAxisLabelInfo(Day.class, new SimpleDateFormat("MMM dd, yyyy"));
domain.setLabelInfo(periodLabels);

domain.setLowerMargin(0);
domain.setUpperMargin(0);
TickUnits tu = new TickUnits();
tu.add(new DateTickUnit(DateTickUnit.HOUR, 1));

domain.setAutoTickUnitSelection(true);
domain.setStandardTickUnits(tu); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:06:51.677

在您的情况下，图表从 19:00 开始，tickUnit 为 1 小时。

这里的问题是`PeriodAxis`将水平轴分为 24 个周期，每个周期由一个`org.jfree.data.time.Hour`对象表示。然后它会在期间的中间显示一个标签：19:29、20:29...

为了得到你想要的，你可以使用 a`DateAxis`而不是`PeriodAxis`，或者使用`"hh:00"`日期格式，它将用 00 替换分钟。

# javascript - 在调整大小时制作可变宽度的 KineticJS 阶段或更新阶段

> ID：14247665
> 
> 赞同：3
> 
> 时间：2013-01-09T22:28:50.937
> 
> 标签：javascript, jquery, canvas, svg, kineticjs

我创建了一个小的 KineticJS 动画，你可以在这个地址看到：

[http://sandbox-ben.kimbiaservices.com/kineticjs/index.html](http://sandbox-ben.kimbiaservices.com/kineticjs/index.html)

我想找到一种方法让这个动画始终设置为窗口宽度的 100%。（这将是另一个元素的“背景”区域。）

我可以通过从 jQuery 将宽度设置为 $(window).width() 来进行初始设置（可能还有其他方法可以做到这一点，但已经使用了 jQuery），但我不知道如何重绘/在调整大小或方向更改时重置舞台。

那么，有没有办法执行以下任何操作来完成此操作：

1.  我可以以某种方式将舞台设置为可变宽度（100％）吗？（我假设答案是否定的，但即使答案是肯定的，我也不确定动画是否能够相对缩放。）
2.  我可以清除动画并在调整大小或方向更改时重新创建它吗？这听起来效率不高，当我尝试在调整大小和方向更改时使用 layer.remove() 时，它几乎挂起浏览器。
3.  或者有没有一种简单的方法可以将此图像转换为 SVG 文件，然后使用 jQuery SVG 来完成同样的事情？（假设一切仍然适用于调整大小和方向变化。）
4.  或者还有什么我没有想到的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T22:55:09.900

我想我找到了解决方案。尝试检测的问题`.on('resize')`是调整窗口大小的行为会导致事件触发无数次，这会拖累浏览器。

受到这个答案的启发：[Detect when a window is resized using JavaScript ?](https://stackoverflow.com/questions/2996431/detect-when-a-window-is-resized-using-javascript) -- 我能够创建一个 jQuery 事件，在调整大小完成时检测（或多或少）。完成后，我清空容器元素并重新启动初始绘制脚本。下面的代码可以解决问题：

```
$(window).on('resize',function(){
    if(this.resizeTO) clearTimeout(this.resizeTO);
    this.resizeTO = setTimeout(function(){
        $(this).trigger('resizeEnd');
    },500);
});

$(window).on('resizeEnd orientationchange',function(){
    $('#container').empty();
    RunHeaderAnim();
}); 
```

# sql-server - 带有唯一键的 INSERT+SELECT

> ID：14247667
> 
> 赞同：0
> 
> 时间：2013-01-09T22:29:14.197
> 
> 标签：sql-server

以下 T-SQL 语句不起作用，因为`[key]`它必须是唯一的，并且语句`MAX`中的调用`SELECT`似乎只被调用一次。换句话说，它只是增加一次键值并尝试一遍又一遍地插入该值。有没有人有办法解决吗？

```
INSERT INTO [searchOC].[dbo].[searchTable]
([key],
 dataVaultType,
 dataVaultKey,
 searchTerm)
SELECT (SELECT MAX([key]) + 1 FROM [searchOC].[dbo].[searchTable]) AS [key]
  ,'PERSON' as dataVaultType
  ,[student_id] as dataVaultKey
  ,[email] as searchTerm
FROM [JACOB].[myoc4Data].[dbo].[users]
WHERE [email] != '' AND [active] = '1'
AND [student_id] IN (SELECT [userID] FROM [JACOB].[myoc4Data].[dbo].[userRoles] 
WHERE ([role] = 'STUDENT' OR [role] = 'FACUTLY' OR [role] = 'STAFF')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:53:16.103

如果您可以使键列成为可能是最简单的 IDENTITY 列。这允许 SQL Server 生成增量值。

或者，如果您确定要找到自己的方式来生成密钥，那么我上个月写的一篇博文可能会有所帮助。尽管它使用复合键，但它向您展示了在单个 INSERT 语句中安全地为每个新行生成一个新值并且在许多同时写入者（其中许多示例不处理）

[http://colinmackay.co.uk/2012/12/29/composite-primary-keys-include-identity-like-column/](http://colinmackay.co.uk/2012/12/29/composite-primary-keys-including-identity-like-column/)

顺便说一句，您在 SELECT 的每一行上获得相同的 MAX(Key) 值的原因是这发生在读取表时。因此，对于 SELECT 语句返回的所有行，MAX(key) 将始终相同。除非您为任何 SELECT 语句添加某种 GROUP BY 子句，否则任何 MAX(columnName) 函数将为返回的每一行返回相同的值。

此外，所有聚合函数都是确定性的，因此对于每个等效的输入集，它将始终具有相同的输出。因此，如果您的键集是 1、5、9，那么它将始终返回 9。

# wordpress - 如何阻止搜索引擎搜索 pdf？

> ID：14247668
> 
> 赞同：0
> 
> 时间：2013-01-09T22:29:14.253
> 
> 标签：wordpress, indexing, search-engine

我在 WordPress 中建立了一个网站，并仅为会员设置了用户登录。因此，任何拥有该用户名和密码的人都可以在登录后查看该页面。其他人只需继续查看该站点即可。所以我得到了这个工作，除了客户之外，所有的人都输入了诸如 PDF 之类的信息，供用户在该页面上查看，并且这个客户正在网络上搜索 PDF 包含的名称，并且它不应该被公众访问，但仅限于那些谁已登录。有什么方法可以将 PDF 设置为私密的，搜索引擎不会搜索到该 PDF。如果我可以将其设置为不仅没有链接的人可以查看它，只有那些登录的人可以查看它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:45:44.757

解决方案 1：密码保护

使用 HTTP 基本身份验证保护站点是阻止其他任何人访问该站点的最佳方法。但是，当您进行演示观众测试时，这并不总是可能的。

解决方案 2：`Robots.txt`

谷歌提供的另一个解决方案是使用 Robots.txt 文件告诉机器人不要抓取或列出结果中的页面。但这并不总是一个解决方案。Google 的 Matt Cuts 已确认，如果 Google 认为相关，Google 可能会包含来自此类网站的页面。

```
User-agent: *
Disallow: / 
```

添加您的文件名以禁止

解决方案 3：使用 .htaccess RewriteCond

所以解决方案是阻止谷歌和其他类似的机器人访问你的网站。为此，请将以下代码放入您的 htaccess.xml 中。

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} AltaVista [OR]
RewriteCond %{HTTP_USER_AGENT} Googlebot [OR]
RewriteCond %{HTTP_USER_AGENT} msnbot [OR]
RewriteCond %{HTTP_USER_AGENT} Slurp
RewriteRule ^.*$ "http\:\/\/htmlremix\.com" [R=301,L] 
```

将最后一行中的 URL 更改为您的主站点，以便在有人链接到您被阻止的站点时您的站点获得 SEO 排名。

解决方案 4：请求 Google 删除

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=164734&from=61062&rd=1](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=164734&from=61062&rd=1)

解决方案 5：您可能想通过的其他工具很少

[http://www.debianhelp.co.uk/htaccessweb.htm](http://www.debianhelp.co.uk/htaccessweb.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:34:01.183

使用 robots.txt 文件来告诉爬虫不要查看您的 pdf 文件 像这样：

```
User Agent: *
Disallow: /*.pdf$ 
```

看[这里](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-25T16:04:06.633

在 robots.txt 文件中添加

> 用户代理： *不允许：/* .pdf$

一段时间后，根据搜索引擎更新索引您的网站的速度。访问[https://pdflookup.com](https://pdflookup.com)输入您的 PDF 标题进行检查。您的 PDF 不会显示在搜索结果中。

# linux - Bash 到 Batch 的转换

> ID：14247671
> 
> 赞同：1
> 
> 时间：2013-01-09T22:29:21.193
> 
> 标签：linux, windows, bash, batch-file, glob

在制作了一个创建目录的 bash 文件，然后将文件从一个目录传输到每个创建的目录之后，我很好奇如何在批处理文件中执行此操作。

这是 bash 代码：

```
#!/bin/bash
# For each item in file named in $1, make a directory with this name.
#   and copy all files named in file $2 from templates folder to new directory

for user in `cat $1`
do
  if [ -d $user ]
  then 
    echo Directory $user already exists
    rm -r $user
   echo $user has been deleted
  fi   

  mkdir $user
    echo Directory $user created

  for file in `cat $2`
  do
    cp /home/student/Desktop/OS/templates/$file $user
    chmod 700 $user/$file
  done
  echo Directory for $user set up
done 
```

任何投入将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:33:55.213

虽然我不了解 Bash，但我认为我的 Batch 版本的程序是精确的：

```
@echo off
rem For each line in file named in %1, make a directory with this name.
rem   and copy all files named in file %2 from templates folder to new directory
for /F "delims=" %%u in (%1) do (
   if exist "%%u" (
      echo Directory %%u already exists
      rd /S /Q "%%u"
      echo %%u has been deleted
   )
   md "%%u"
   echo Directory %%u created
   for /F "delims=" %%f in (%2) do (
      copy "/home/student/Desktop/OS/templates/%%f" "%%u"
      rem chmod not exist in Batch
   )
) 
```

但是，我会修改以前的程序，以便只读取一次模板文件并将其行存储在一个数组中：

```
@echo off
rem For each line in file named in %1, make a directory with this name.
rem   and copy all files named in file %2 from templates folder to new directory
setlocal EnableDelayedExpansion
set temp=0
for /F "delims=" %%f in (%2) do (
   set /A temp+=1
   set template[!temp!]=%%f
)
for /F "delims=" %%u in (%1) do (
   if exist "%%u" (
      echo Directory %%u already exists
      rd /S /Q "%%u"
      echo %%u has been deleted
   )
   md "%%u"
   echo Directory %%u created
   for /L %%i in (1,1,%temp%) do (
      copy "/home/student/Desktop/OS/templates/!template[%%i]!" "%%u"
      rem chmod not exist in Batch
   )
) 
```

安东尼奥又名“Aacini”

# c# - RibbonComboBox 将其 DataContext 更改为 {DisconnectedItem}

> ID：14247672
> 
> 赞同：1
> 
> 时间：2013-01-09T22:29:27.830
> 
> 标签：c#, wpf, ribbon

我正在开发一个 WPF 项目，并且正在尝试一种非常奇怪的行为。

我已将 a 添加`RibbonComboBox`到功能区，`RibbonGallery`其中有一个`RibbonGalleryCategory`具有与元素数组绑定的 a 。

```
<rb:RibbonComboBox Name="xComboBox" Label="List:" >
       <rb:RibbonGallery SelectedValue="{Binding SelectedValue, Mode=TwoWay}">
              <rb:RibbonGalleryCategory ItemsSource="{Binding List}" />
       </rb:RibbonGallery>
</rb:RibbonComboBox> 
```

到目前为止，一切正常，当我运行程序时，RibbonComboBox 具有预期的项目。

当我将容器窗口的大小调整为非常小的尺寸时，问题就开始了，在这样做并重新调整大小之后，ComboBox 是**空**的！

我不知道为什么会这样，我做错了什么吗？

我试图看看发生了什么，所以，我在`Items`属性中添加了一个事件，`RibbonGalleryCategory`如下所示：

```
public RibbonView()
    {
        InitializeComponent();

        RibbonGallery gallery = xComboBox.Items[0] as RibbonGallery;

        RibbonGalleryCategory galleryCat = gallery .Items[0] as RibbonGalleryCategory;

        ((INotifyCollectionChanged)galleryCat.Items).CollectionChanged += new NotifyCollectionChangedEventHandler(RibbonView_CollectionChanged);
    }

    void RibbonView_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        Dispatcher.BeginInvoke(new Action(() =>
            {
                switch (e.Action)
                {
                    case NotifyCollectionChangedAction.Add:
                        MessageBox.Show("Collection has changed >>>> Add");
                        break;
                    case NotifyCollectionChangedAction.Move:
                        MessageBox.Show("Collection has changed >>>> Move");
                        break;
                    case NotifyCollectionChangedAction.Remove:
                        MessageBox.Show("Collection has changed >>>> Remove");
                        break;
                    case NotifyCollectionChangedAction.Replace:
                        MessageBox.Show("Collection has changed >>>> Replace");
                        break;
                    case NotifyCollectionChangedAction.Reset:
                        MessageBox.Show("Collection has changed >>>> Reset");
                        break;
                }
            }), System.Windows.Threading.DispatcherPriority.Background, null);
    } 
```

如您所见，我展示了集合中的变化，因此，在运行程序并调整窗口大小后，我的小测试告诉我集合已“**重置**”！

有谁知道为什么会这样？？如何防止 RibbonComboBox 丢失数据？

先感谢您。

**编辑：**

更多信息：我刚刚注意到一些事情，在调整容器窗口的大小后，RibbonComboBox 将其 DataContext 更改为一个名为“ **`{DisconnectedItem}`**”的对象。我做了一些研究，发现[了这一点](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/36aec363-9e33-45bd-81f0-1325a735cc45/#611fccf2-737f-4309-a793-4001488b23aa)。但我仍然不知道如何防止它。

有谁知道如何避免控件丢失其 DataContext （这使组合框丢失其数据）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:31:09.527

我意识到这个[文档](http://msdn.microsoft.com/en-us/library/system.collections.specialized.notifycollectionchangedaction(v=vs.95).aspx)没有什么可以提供的，但是看到 Orion Edwards 在[这个](https://stackoverflow.com/questions/224155/when-clearing-an-observablecollection-there-are-no-items-in-e-olditems)链接底部的回答。

**基本上“发生了一些戏剧性的事情！”**

正如他所建议的那样，也许在重新调整大小时从头开始重建列表将是诀窍。

# jquery - Highchart 插件不接受系列数据的数组？

> ID：14247673
> 
> 赞同：1
> 
> 时间：2013-01-09T22:29:32.240
> 
> 标签：jquery, plugins, highcharts

我一直在玩 highchart 插件，它真的很棒。直到我尝试制作饼图。

由于某种原因，饼图要求给定系列的数据格式为

```
 data:[ 
       ["NAME", VALUE],
       ["NAME", VALUE],
       ["NAME", VALUE]
      ] 
```

其中 name 是一个字符串，value 是一个整数或浮点数。所以我在 jquery 中创建了一个数组。但是，当我运行脚本时，页面上没有显示任何内容。当我将数据硬编码到插件中时，它可以工作。但是，当我尝试使用数组时，我却没有。我在 firebug 中检查了控制台，我可以看到数组在那里并且格式正确。我不知道为什么 Highcharts 插件没有看到它。

这是我的代码，也许我遗漏了什么？

```
var dataarray = [];
var referaltype = dataset.referals[month];
$.each(referaltype.code, function(key, value) {
    var wantvalue = parseInt(referaltype.number[key]);
    var wantkey = value;
    dataarray[wantkey] = wantvalue;
    delete dataarray[key];
});
console.log(dataarray);
makepiechart(dataarray, month, year); 
```

这是我构建要在插件中使用的数组的地方。数据看起来与我预期的差不多。“名称”：值

这是插件

```
function makepiechart(dataarray,month,year){
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'piechartcontainer',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'Type of referals '+month
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
            percentageDecimals: 1
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            //name: ,
            data: [dataarray]
        }]
    });
} 
```

但是，调用插件时没有任何反应。我也不完全确定为什么。有没有人知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:05:52.003

我发现我做错了什么。series 选项需要一个字符串而不是一个数组：-P

```
 var datastring = "";
    var referaltype = dataset.referals[month];
    $.each(referaltype.code, function(key, value) {
        var wantvalue = parseInt(referaltype.number[key]);
        var wantkey = value;
        datastring += "['"+wantkey+"',"+wantvalue+"]";
    });
    console.log(dataarray);
    makepiechart(dataarray, month, year); 
```

# django - 使用 init.d 和自定义配置文件在 Ubuntu 12.04 上启动 nginx

> ID：14247674
> 
> 赞同：0
> 
> 时间：2013-01-09T22:29:37.467
> 
> 标签：django, ubuntu, nginx

我有一个特定于我目前正在处理的项目的 nginx 配置（准确地说是 Django）。

看起来在 Ubuntu 上启动 nginx 的“正确”方式是

```
sudo /etc/init.d/nginx start 
```

但是，我想提供一个自定义配置文件。通常我会通过以下方式做到这一点：

```
sudo nginx -c /my/project/config/nginx.conf 
```

查看`init.d/nginx`文件，命令似乎没有`start`传入任何参数，所以我不能这样做

```
sudo /etc/init.d/nginx start -c /my/project/config/nginx.conf 
```

解决我的问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:29:47.057

init.d 不再适合在 Ubuntu 上使用，您应该使用 Upstart。将它放在 /etc/init/nginx.conf 中，您将能够使用`sudo start nginx`and启动/停止它`sudo stop nginx`：

```
description "nginx http daemon"
author "George Shammas"

start on (filesystem and net-device-up IFACE=lo)
stop on runlevel [!2345]

env DAEMON=/usr/local/nginx/sbin/nginx -c /my/project/config/nginx.conf
env PID=/usr/local/nginx/logs/nginx.pid

expect fork
respawn
respawn limit 10 5

pre-start script
    $DAEMON -t
    if [ $? -ne 0 ]
            then exit $?
    fi
end script

exec $DAEMON 
```

# javascript - 从方法中查询 Windows 8 应用程序中的 DOM

> ID：14247678
> 
> 赞同：1
> 
> 时间：2013-01-09T22:30:15.067
> 
> 标签：javascript, dom, windows-8, winjs

即使在阅读了 MSDN 文档和以下在线指南之后，我仍然在为此苦苦挣扎：

[码福斯特](http://codefoster.com/post/2012/03/15/Selecting-Elements-in-a-Windows-8-HTML-App.aspx)

[斯蒂芬·沃尔特](http://stephenwalther.com/archive/2012/02/23/metro-query-selectors.aspx)

我认为我的问题很容易解决，而我只是在以错误的方式思考某些事情。基本上我正在查询我的网络服务并成功运行以下方法。然后我试图将结果绑定到我的列表视图。现在，我使用的`publicMembers.itemlist`是在文档顶部声明的硬编码值，只是为了确保在使用查询结果之前可以实际绑定到列表。暂时忽略第 2 行。

成功方法：

```
_lookUpSuccess: function xhrSucceed(Result) {
        var response = JSON.parse(Result.responseText);
        listView = document.querySelector("#termTest");
        ui.setOptions(listView, {
            itemDataSource: publicMembers.itemList,
            itemTemplate: document.querySelector(".itemtemplate"),
        })

     }, 
```

现在，`document.querySelector`我没有使用 ，而是尝试使用`WinJS.Utilities.id`and `WinJS.Utilities.query`，但两者都不起作用。这不会破坏我的代码并引入错误，但它也不会绑定到列表视图，所以我认为我在查询正确的 DOM 元素时遇到了问题。但是，如果我将它添加到脚本的顶部，完全相同的代码确实可以工作，只有当我将它放在这个方法中时它才会停止工作。

编辑：还要澄清一下，当我调试时`publicMembers.itemList`存储我期望它们的值。

请指出我是否解释得不好，我会尝试改进我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T00:20:42.773

我没有使用过 WinJS.UI.setOptions，而是使用了另一种设置数据源的方式。你能看看它是否有效吗？

```
_lookUpSuccess: function xhrSucceed(result) {
    var response = JSON.parse(result.responseText);
    listView = document.querySelector("#termTest");

    listView.winControl.itemDataSource = publicMembers.itemList;
 }, 
```

这将假定您将 itemTemplate 定义为`data-win-options`ListView 的 HTML 元素属性的一部分。`listView.winControl.itemTemplate = document.querySelector(".itemtemplate")`如果您更喜欢以编程方式设置它，您也可以这样做。

# ios - 隐藏通过 iOS 应用程序呼叫的电话号码

> ID：14247693
> 
> 赞同：-3
> 
> 时间：2013-01-09T22:31:40.950
> 
> 标签：ios, objective-c, core-telephony

我想让用户通过我的应用程序拨打电话。有没有办法隐藏被叫号码，从而保护隐私？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:53:21.687

我认为这是不可能的，因为它可能被用于恶意目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:36:32.077

如果您希望隐藏拨打电话的人的隐私，您可以在拨号时在号码上使用 *67 前缀。基本上，只需将 *67 添加到数字的开头即可。大多数美国运营商都支持这一点。

# join - Ormlite Join 没有外键异常

> ID：14247696
> 
> 赞同：1
> 
> 时间：2013-01-09T22:31:47.957
> 
> 标签：join, foreign-keys, ormlite

我在连接工作时遇到问题，两个表定义如下：

```
public class Student { 
    @ForeignCollectionField(eager = true, columnName = STUDENT_INSTANCE_COLLECTION_NAME)
    private ForeignCollection<StudentInstance> studentInstances;

    ...
}

public class StudentInstance {
    public static final String STUDENT_ID_COLUMN = "student_id";
    public static final String REGISTER_ID_COLUMN = "register_id";

    @DatabaseField(generatedId = true)
    private int id;

    @DatabaseField(canBeNull = false, foreign = true)
    private Student student;

    @DatabaseField(canBeNull = false, foreign = true)
    private Register register;

   ...

} 
```

活动代码：

```
public List<Student> getStudents( int registerId ) {
    QueryBuilder<StudentInstance, Integer> studentInstanceQb =  studentInstanceDao.getDAO().queryBuilder();
    studentInstanceQb.where().eq(StudentInstance.REGISTER_ID_COLUMN, registerId);
    QueryBuilder<Student, Integer> studentQb =  getDAO().queryBuilder();    
    studentQb.join(studentInstanceQb).query();
} 
```

当我运行代码时，我得到了异常：

> getStudents 上的错误：java.sql.SQLException：在 com.beardedhen.roster.db.entity.StudentInstance 类中找不到外部类 com.beardedhen.roster.db.entity.Student 字段，反之亦然

这可能是一个愚蠢的错误，但我已经用它击中了一堵完整的砖墙。

谢谢你的帮助，

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:30:13.110

看看 QueryBuilder。matchJoinedFields()，异常来自哪里。您将看到当前 (4.42) 实现如何检查表并查找连接的列以进行连接。

# html - 链接不显示链接

> ID：14247705
> 
> 赞同：0
> 
> 时间：2013-01-09T22:32:33.047
> 
> 标签：html, css

我创建了一个导航菜单，想知道为什么当我将鼠标悬停在包含链接的 li 项目上时，链接不显示？

这是我的包含链接的 Html

```
<ul id="nav">
            <li class="nav-button" id="home"><a href="Index.html"></a></li>
            <li class="nav-button" id="whatIs1031"><a href="whatIs1031.html"></a></li>
            <li class="nav-button" id="exchange1031"><a href="exchangeRequ.html"></a></li>
            <li class="nav-button" id="typesOfExchange"><a href="typesOfExchange.html"></a></li>
            <li class="nav-button" id="whyCLX"><a href="howToStart.html"></a></li>
            <li class="nav-button" id="howToStart"><a href="whyCLX.html"></a></li>
            <li class="nav-button" id="resources"><a href="resources.html"></a></li>
            <li class="nav-button" id="faq"><a href="fAQs.html"></a></li>
            <li class="nav-button" id="fee"><a href="fees.html"></a></li>
            <li class="nav-button" id="contactUs"><a href="contactUs.html"></a></li>
        </ul> 
```

这是我的css，其中包含对显示每个列表项的精灵的引用。

```
#home, #home, #whatIs1031, #exchange1031, #typesOfExchange, #h-typesOfExchange, #whyCLX, #h-whyCLX, #howToStart, #resources, #h-resources, #faq, #h-faq, #fee, #h-fee, #contactUs, #h-contactUs{
    background: url(http://i1287.photobucket.com/albums/a634/debuggingfool/nav_zps03a73d67.png) no-repeat;
    width: 225px;
    height: 30px;
}

#home:hover{
    background-position: -222px 0;
}

#home{
    background-position: 0 0;
}

#whatIs1031{
    background-position: 0 -36px;
}

#whatIs1031:hover{
    background-position: -223px -36px;
}

#exchange1031{
    background-position: 0 -72px;
}

#exchange1031:hover{
    background-position: -224px -73px;
}

#typesOfExchange{
    background-position: 0 -111px;
}

#typesOfExchange:hover{
    background-position: -226px -112px;
}

#whyCLX:hover{
    background-position: -227px -150px;
}

#whyCLX{
    background-position: 0 -150px;
}

#howToStart{
    background-position: 0 -190px;
}

#howToStart:hover{
    background-position: -230px -189px;
}

#resources:hover{
    background-position: -230px -226px;
}

#resources{
    background-position: 0 -227px ;
}

#faq{
    background-position: 0 -264px ;
}

#faq:hover{
    background-position: -230px -263px ;
}

#fee{
    background-position: 0 -302px ;
}

#fee:hover{
    background-position: -231px -300px ;
}

#contactUs{
    background-position: 0 -341px ;
} 
```

编辑：这是关于代码笔的演示页面[http://codepen.io/Austin-Davis/pen/Fdhej](http://codepen.io/Austin-Davis/pen/Fdhej)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:34:35.620

在标签中`<a></a>`尝试输入链接的名称... xD

```
<a>name of link</a> 
```

或者，如果您喜欢没有文本的字段，请使用标签`<li>`内的标签`<a>`

```
<a href="www.google.com"><li class="nav-button"></li></a> 
```

请参阅此[示例 jsfiddle](http://jsfiddle.net/HxByH/1/)

问候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T22:37:46.990

锚标记 ( `<a>`) 是内联元素。由于它们没有任何内容，因此它们不会被渲染，而您只有背景。

用信息填充它们（例如链接的实际名称而不是精灵）或使用不间断的空间实体`&nbsp;` **和** `display: block`锚标记。您也可以将这两种技术结合起来。

编辑：既然你问了一个[具体的例子](http://codepen.io/anon/pen/tDldm)：

```
#nav a { display:block; } 
```

```
<ul id="nav">
    <li class="nav-button" id="home">
        <a href="Index.html">&nbsp;</a>
    </li>
    <li class="nav-button" id="whatIs1031">
        <a href="whatIs1031.html">&nbsp;</a>
    </li>
    <!-- ... -->
</ul> 
```

但是，我相信这仍然不是最好的解决方案。我会想出一些谎言：

```
#nav a {
    display: block; 
    padding-left: 15px; /* adjust this value to your image */
    background: url(sprite_a.png) no-repeat;  /* off-image */
}
#nav a:hover{
    background: url(sprite_b.png) no-repeat;  /* on-image */
} 
```

```
<ul>
  <li><a href="Index.html">Home</a></li>
  <li><a href="whatis1031.html">What is a 1031 exchange?</a></li>
  <li><a href="exchangeRequ.html">1031 Exchange Requirements</a></li>
  <!-- ... -->
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:52:05.773

首先，您的链接没有 CSS 样式，也没有内容，因此没有大小，只有您的列表元素有大小。对于将样式应用于它们的链接，它应该如下所示：

```
<li class="nav-button"><a id="fee" href="fees.html"></a></li> 
```

对于没有显示图像的问题，这对我来说绝对没问题。除了在 css 中引用错误的最后一项：

```
#h-contactUs 
```

应该：

```
#contactUs; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T11:26:03.337

```
<ul id="nav">

    <li class="nav-button"> <a href="Index.html">Index</a></li>
    <li class="nav-button"> <a href="whatIs1031.html">whatIs1031</a></li>
    <li class="nav-button"> <a href="exchangeRequ.html">exchange1031</a></li>
    <li class="nav-button"> <a href="typesOfExchange.html">typesOfExchange</a></li>
    <li class="nav-button"> <a href="howToStart.html">howToStart</a></li>
    <li class="nav-button"> <a href="whyCLX.html">whyCLX</a></li>
    <li class="nav-button"> <a href="resources.html">resources</a></li>
    <li class="nav-button"> <a href="fAQs.html">faq</a></li>
    <li class="nav-button"> <a href="fees.html">fee</a></li>
    <li class="nav-button"> <a href="contactUs.html">contactUs</a></li>

</ul> 
```

这允许您将鼠标悬停在、单击并被发送到指定按钮已链接到的“href”链接。

# python - 如何在 Python 中更改按钮大小？

> ID：14247709
> 
> 赞同：31
> 
> 时间：2013-01-09T22:33:08.263
> 
> 标签：python, python-3.x, tkinter

我在学校做一个简单的项目，我需要制作六个不同的按钮来点击。按钮必须有不同的尺寸，但我找不到怎么做。我使用以下方法制作了按钮：

```
def __init__(self, master):
    super().__init__(master)
    self.grid()
    self.button1 = Button(self, text = "Send", command = self.response1)   
    self.button1.grid(row = 2, column = 0, sticky = W) 
```

我想像这样的东西：

```
self.button1.size(height=100, width=100) 
```

会工作，但它没有，我无法找到如何在任何地方做到这一点。

我正在使用 Python 3.3。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-09T22:41:10.757

在 Tkinter 中配置按钮（或任何小部件）是通过调用配置方法 [“config”来完成的](http://effbot.org/tkinterbook/button.htm#reference)

改变一个按钮的大小叫`button1`你简单的调用

```
button1.config( height = WHATEVER, width = WHATEVER2 ) 
```

如果您知道初始化时想要什么大小，可以将这些选项添加到构造函数中。

```
button1 = Button(self, text = "Send", command = self.response1, height = 100, width = 100) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-28T19:10:03.083

我一直使用`.place()`我的 tkinter 小部件。 [地方语法](https://www.tutorialspoint.com/python/tk_place.htm)

您可以通过更改关键字参数来指定它的大小！

当然，`.place()`如果你想改变它，你将不得不再次打电话。

如果您想知道，可以在 python 3.8.2 中使用。

# git - 检索 Git 中特定提交的子提交列表

> ID：14247713
> 
> 赞同：24
> 
> 时间：2013-01-09T22:33:46.280
> 
> 标签：git

我想知道是否有一种有效的方法来检索给定提交的孩子。尽管[在 Git 中引用提交的子项中](https://stackoverflow.com/questions/1761825/referencing-the-child-of-a-commit-in-git)讨论了一种方法，但它的效率非常低。

我认为这将是在 Git 中完成的一件简单的事情，但显然，事实并非如此。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-09T22:38:55.363

`git rev-list`可以显示孩子，但这些孩子必须可以从您提供的提交中访问。假设您想显示可以从您的仓库中的所有分支访问的所有孩子，您可以使用类似

```
git rev-list --all --not $COMMIT^@ --children | grep "^$COMMIT" 
```

这应该输出一个看起来像的行

```
$COMMIT $child1 $child2 $child3 ... 
```

为方便起见，您可以将命令添加为 git 别名：

```
children = "!f() { git rev-list --all --not $1^@ --children | grep $(git rev-parse $1); }; f" # reachable children of a ref 
```

* * *

语法`$COMMIT^@`可能会令人困惑，因此我将对其进行解释。希望`$COMMIT`是不言自明的。然后是`^@`，它扩展到引用提交的所有父级。所以`$COMMIT^@`意思是“所有的父母`$COMMIT`”。由于它跟在`--not`标志后面，因此它指示`rev-list`在遇到 . 的任何父级后停止处理`$COMMIT`。这基本上只是一种优化，因为任何可访问的提交`$COMMIT`都不可能是子级。

* * *

注意：此答案的先前版本说`tail -1`而不是`grep "^$COMMIT"`. 这可能在一个简单的测试存储库中起作用（这就是我最初说它的原因），但是`$COMMIT`如果您有任何不包含`$COMMIT`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-19T04:04:26.833

我使用以下别名（基于[@Lily Ballard 的回答](https://stackoverflow.com/a/14247783/5353461)：

```
# Get all children of current or specified commit-ish
children = "!bash -c 'c=${1:-HEAD}; set -- $(git rev-list --all --not \"$c\"^@ --children | grep $(git rev-parse \"$c\") ); shift; echo $*' -" 
```

*   没有争论 - 给所有的孩子`HEAD`
*   带有`commit-ish`- 给出该对象的所有子对象

# html - 跨浏览器@media 查询来检测视网膜显示？

> ID：14247714
> 
> 赞同：0
> 
> 时间：2013-01-09T22:33:45.920
> 
> 标签：html, css, retina-display

到目前为止，我只能找到以下媒体查询：

```
@media 
(-webkit-min-device-pixel-ratio: 2), 
(min-resolution: 192dpi) { 
    /* Retina-specific stuff here */
} 
```

然而，它似乎只支持 webkit 浏览器，（至少）-moz- 和 -ms- (-o-) 浏览器是否有类似的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:58:23.463

您可以做什么而不是检测设备像素比或最小分辨率，您可以检测设备宽度，即屏幕尺寸的分辨率，而不是视口宽度，即浏览器尺寸的分辨率。首先，在尝试定位特定设备时，这会为您提供正确的媒体查询，并且要检测您需要使用的“视网膜”设备：

```
@media screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) {
/* code goes here */
} 
```

这将设置媒体查询以识别像 iDevice 上的视网膜显示一样缩放的设备，并帮助仅定位它们以避免其他设备接收这些 css 样式。

让我知道这是否适合你。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-09T22:38:13.393

没有*视网膜显示器*这样的东西。我有一个 MacBookPro，Apple 标记为“视网膜”（所以我明白你认为你的意思是什么），但这个词完全是虚构的，实际上没有任何意义。

因此，您将无法检测到它，就像您无法检测到严格定义的“高性能游戏计算机”一样。

# java - 类路径中的远程 jar

> ID：14247716
> 
> 赞同：5
> 
> 时间：2013-01-09T22:34:01.730
> 
> 标签：java, classpath, classloader, remoteobject

对不起，也许这个问题太傻或已经回答了，但我找不到。

我想知道是否有一些已知的 Java 类加载器能够接受类路径中的远程文件，即像 CLASSPATH="http://somewhere.net/library.jar:..." 这样的条目。

请注意，我不是在谈论小程序或 Java Web Start。考虑一个可以使用不同后端（例如 MySQL、Oracle）的应用程序，我想根据用户的后端偏好在 shell 脚本中准备类路径，并让类加载器下载所需的jar（本例中的 jdbc 驱动程序）来自分发服务器。我也不是在谈论 Maven（用户只是获得二进制发行版，我不想强​​迫他们从源代码构建他们需要的东西）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:39:39.703

是`SystemClassLoader`一个[`URLClassLoader`](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)。你可以试试，我把它留给你：

```
Method method = URLClassLoader.class.getDeclaredMethod("addURL", new Class[]{URL.class});
method.setAccessible(true);
method.invoke(ClassLoader.getSystemClassLoader(), new Object[]{new URL("http://somewhere.net/library.jar")});  
Class.forName("your.remote.ClassName"); 
```

让我知道 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:39:41.040

您可以使用[URLClassLoader](http://docs.oracle.com/javase/6/docs/api/java/net/URLClassLoader.html)，但它每次都会下载文件，并且会使代码更加复杂。

如果您已经在使用 shell 脚本，为什么不简单地使用 curl 下载 jar 并将其放在类路径中？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-16T09:25:16.150

类加载是一个[复杂的过程](https://docs.oracle.com/javase/8/docs/technotes/tools/findingclasses.html)。在所有平台上的所有运行时环境中，常规类路径 ClassLoader 可能是 URLClassLoader，但我认为不一定必须如此。

添加类路径条目的一种方法是将[Class-Path:](https://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)属性添加到 jarfile 的`META-INF/MANIFEST.MF`文件中，并使用 URLClassLoader 解析该属性的空格分隔值。（Maven 将它的一些类路径条目作为 URI 添加到 jarfile 清单中`file://`，这意味着`http://`或者`https://`也可以工作。）因此，即使您无法在某些运行时环境中的正常 Java 类路径中获得基于 URL 的类路径条目，您也应该能够通过在清单文件中指定 URL 来让它们工作。

（我不熟悉 Java WebStart 的工作原理，但也许这也使用了基于 URL 的类路径条目？）

# applescript - 在automator中使用苹果脚本执行键盘快捷键

> ID：14247720
> 
> 赞同：4
> 
> 时间：2013-01-09T22:34:22.883
> 
> 标签：applescript

我第一次在 automator 中使用苹果脚本。我希望脚本在以前启动的应用程序中执行键盘快捷键。

```
on run
activate application "MacCaption"
tell application "MacCaption"
    keystroke "x" using command down

end tell 
```

我得到语法错误预期的行尾，但在*使用*的单词上找到了标识符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:52:09.740

您的问题是`keystroke`必须通过系统事件。任何一个：

```
tell app "System Events"
    keystroke "x" using command down
end tell 
```

或者

```
tell app "System Events"
    tell process "MacCaption"
        keystroke "x" using command down
    end tell
end tell 
```

没有真正的区别，但您需要系统事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:48:16.480

尝试：

```
tell application "System Events" to keystroke "x" using command down 
```

# git - 将 git 提交应用于未添加的工作树？

> ID：14247721
> 
> 赞同：13
> 
> 时间：2013-01-09T22:34:30.060
> 
> 标签：git

假设我有 8 次提交和一个分支（主）的线性 git 历史记录：

```
1 -> 2 -> 3 -> 4 -> 5 -> 6 -> 7 -> [8=master] 
```

我想将 master 移到 4 （我可以用`git branch -f master 4`）：

```
1 -> 2 -> 3 -> [4=master] -> 5 -> 6 -> 7 -> 8 
```

现在工作树处于状态 4。

我现在想将更改应用`4 -> 8`到我的工作树作为补丁。

也就是说，在不影响 .git 文件夹的状态的情况下，我想将未暂存的更改应用`4->8`到我的工作树。在此之后，工作树应该处于状态 8，但提交状态和主分支应该处于状态 4。

另一种说法：假装在将 master 移动到 4 之后，我手动将 4->8 更改到我的工作树，而没有将它们添加到索引中。结果应该是一样的。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-28T21:34:25.463

我知道我迟到了，但对于其他人来说，我认为最简单的方法是：

`git cherry-pick --no-commit 4..8`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T22:58:10.027

```
git format-patch 4..8 | xargs git apply 
```

[编辑：下面评论中的下一个跳过制作单个补丁文件]

```
git diff 4..8 | git apply 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T22:47:42.903

在您的情况下，如果您实际上并不关心“未分级”位，那么最简单的事情可能就是

```
git checkout 8 -- . 
```

这将更新您的树和索引以匹配提交 8，而不会更改您的提交历史。然后您可以`git reset`放弃索引更改。

如果您确实希望保持索引文件不受干扰，则稍微复杂一些，因为 git 总是从索引更新工作树。你可以做类似的事情

```
GIT_INDEX_FILE=/tmp/foo git checkout 8 -- . 
```

这将使用该路径`/tmp/foo`作为此命令的临时索引文件。之后您可能想删除此文件。

* * *

在更复杂的情况下，您想要重新应用实际上不会让您回到提交 8 的精确状态的补丁，您可以使用`git cherry-pick --no-commit commit1 commit2 ...`按顺序应用提交。当然，这仍然会修改索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T00:08:36.867

```
 git checkout master@{1} -- . 
```

是你所需要的全部。它读取“签出 master 前一次指向的提交的文件”。结帐`git reflog`以查看其工作原理。

此外，您不应该像以前那样强行重新创建分支。这将允许 git 跟踪 master 曾经指向的所有地方。利用

```
git stash -u 
```

如果您在工作目录中有一些工作。然后

```
git reset --hard master^^^^ 
```

或者

```
git reset --hard master~4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-05T15:27:18.767

```
git cherry-pick master~4 master~5 master~6 master~7 master~8 
```

你的工作树必须是干净的

```
git help cherry-pick 
```

# android - Android MapView - 取消 animateTo 的追索权

> ID：14247724
> 
> 赞同：1
> 
> 时间：2013-01-09T22:34:49.080
> 
> 标签：android, android-mapview, runnable

我有`MapView`一个回调，我想动画到地图上的一个点，并运行一些代码。

```
mapController.animateTo(geoPoint, new Runnable() 
{
    @Override
    public void run() 
    {
        // run some code
    }
}); 
```

它在[文档](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/MapController#animateTo%28com.google.android.maps.GeoPoint,%20java.lang.Runnable%29)中说：“如果并且当动画达到其自然结束时，此回调将在 UI 线程上运行。如果动画中止，则不会运行回调。”

似乎有一种情况我必须处理动画中止的情况。如果发生这种情况，我想运行一些不同的代码。

有没有检测动画是否中止的好方法？

# javascript - 将javascript中的完整日期字符串转换为yyyymmdd

> ID：14247726
> 
> 赞同：1
> 
> 时间：2013-01-09T22:34:57.050
> 
> 标签：javascript, date, date-format

想知道是否有人可以建议我可以将以下字符串格式化为不同格式的另一个字符串

从此-> var dateString = "2013 年 1 月 8 日 7:00:00 PM PST"

至此 -> dateString = "20130108"'

如果我也有这样做的话，我不介意将其转换为 Date 对象，但希望最终结果是一个字符串。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:40:36.573

```
var date = new Date(dateString);
var year = date.getFullYear(), month = (date.getMonth() + 1), day = date.getDate();
if (month < 10) month = "0" + month;
if (day < 10) day = "0" + day;

var properlyFormatted = "" + year + month + day; 
```

编辑：或如上面 Fiz 建议的那样，以下内容：

```
var date = new Date(dateString);
var properlyFormatted = date.getFullYear() + ("0" + (date.getMonth() + 1)).slice(-2) + ("0" + date.getDate()).slice(-2); 
```

# java - 从抛出异常的方法中恢复

> ID：14247731
> 
> 赞同：1
> 
> 时间：2013-01-09T22:35:16.503
> 
> 标签：java, exception

我对java esp相当陌生。到一些编码实践。我有一个方法抛出 a`NullPointerException`并且调用方法捕获它的情况。

```
try {
    String test = Class.method(arg)
}    
catch (Exception ex) {
    ...
}

public String method(arg){
String str;
...
if(str == null) throw(exception)
return str;
} 
```

现在里面的一些方法`Class.method(arg)`抛出 a`NullPointerException`并且它被上面的 catch 捕获（如上）。相反，我想做类似的事情：

```
if (test == null) { do something else } 
```

在 try 块内。

处理这个问题的最佳方法是什么？我可以删除 throw inside 方法并使其返回 null 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:36:40.437

您应该在任何异常情况下捕获异常`method(arg)`并返回。`null`

示例程序：

```
public class Test1 {

    public static void main(String[] args) {
        try{
            String test = method("1");
            if(test==null){
                //do something else
            }
        }catch(Exception e){

        }

    }

    private static String method(String str) throws Exception{
            if(str.equals("1")) return null;
            else if(str.equals("2")) throw new Exception("My Exception");
            else return str;          
    }

} 
```

现在您可以将方法更改为这样的东西，这完全取决于您的要求：

```
 private static String method(String str) throws Exception{
        try{
            if(str.equals("1")) return null;
            else if(str.equals("2")) throw new Exception("My Exception");
            else return str;
        }catch(Exception e){
            return null;
        }

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T22:41:48.307

期待一个空指针异常有一些不好的气味。`method`难道不可以在不等待异常的情况下添加一个空测试并返回商定的结果吗？

所以而不是

```
 public String method(String arg) {
   try {
     return arg.toString();
   } catch (NullPointerException npe) {
     return null;
   }
 } 
```

你真的应该做

```
 public String method(String arg) {
   if (arg == null) {
     return null;
   }

   return arg.toString();
 } 
```

一个相当大的选择是抛出除 NPE 之外的异常来提示问题 - 因为返回`null`通常是一个坏主意：

```
 public String method(String arg) {
   if (arg == null) {
     throw new IllegalArgumentException("Passing null is illegal");
   }

   return arg.toString();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:39:55.330

```
try{
    Class.method(arg);
} catch ( NullPointerException npe ) {
    //do something else
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T22:41:11.520

您可以为以下内容指定一个 catch 子句`NullPointerException`：

```
try {
    String test = Class.method(arg)
}
catch (NullPointerException ex) {
    // test == null
    // do something
}
catch (Exception ex) {
    // ?
} 
```

但是您可能不想在`catch`子句中放置太多逻辑/行为，因此请考虑在`if`块之外放置一个类似于您建议的`try-catch`块：

```
try {
    String test = Class.method(arg)
}
catch (NullPointerException ex) {
    // At least log the exception; never swallow exceptions. NEVER.
    System.out.println(ex);
}
catch (Exception ex) {
    // ?
}
if(test != null) {
    // do something
}
else {
    // do something else
 } 
```

# python - Python：语法错误：关键字 arg 之后的非关键字

> ID：14247732
> 
> 赞同：43
> 
> 时间：2013-01-09T22:35:18.003
> 
> 标签：python

当我运行以下代码时

```
def regEx1():
  os.chdir("C:/Users/Luke/Desktop/myFiles")
  files = os.listdir(".")
  os.mkdir("C:/Users/Luke/Desktop/FilesWithRegEx")
  regex_txt = input("Please enter the website your are looking for:")
  for x in (files):
    inputFile = open((x), encoding = "utf8", "r")
    content = inputFile.read()
    inputFile.close()
    regex = re.compile(regex_txt, re.IGNORECASE)
    if re.search(regex, content)is not None:
      shutil.copy(x, "C:/Users/Luke/Desktop/FilesWithRegEx") 
```

我收到以下错误消息，它指向 for 循环后的第一行。

```
 ^

SyntaxError: non-keyword arg after keyword arg 
```

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-09T22:36:57.070

这就是它所说的：

```
inputFile = open((x), encoding = "utf8", "r") 
```

您已指定`encoding`为关键字参数，但指定为`"r"`位置参数。关键字参数之后不能有位置参数。也许你想做：

```
inputFile = open((x), "r", encoding = "utf8") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-10T02:42:14.930

To really get this clear, here's my for-beginners answer: You inputed the arguments in the **wrong order.**
A keyword argument has this style:

```
nullable=True, unique=False 
```

A fixed parameter should be defined: True, False, etc. A non-keyword argument is different:

```
name="Ricardo", fruit="chontaduro" 
```

This syntax error asks you to first put `name="Ricardo"` and all of its kind (non-keyword) **before** those like `nullable=True.`

[python](/questions/tagged/python "show questions tagged 'python'") [keyword](/questions/tagged/keyword "show questions tagged 'keyword'")[non-keyword](/questions/tagged/non-keyword "show questions tagged 'non-keyword'")[syntax-error](/questions/tagged/syntax-error "show questions tagged 'syntax-error'")

# javascript - IE8中的jQuery ajax调用失败

> ID：14247735
> 
> 赞同：0
> 
> 时间：2013-01-09T22:35:28.687
> 
> 标签：javascript, jquery, ajax, internet-explorer-8

我有一个脚本可以从我的服务器上的另一个页面获取内容并返回文本。除了 IE8 及以下版本之外，所有主流浏览器都可以正常工作，它什么也没做。任何帮助将非常感激。

```
$.ajax({
  url: clickedURL,
  dataType: "html",
  cache: false,
  dataFilter: function(data, type) {
    if (type==="html") {
        return data.replace(/<script.*?>([\w\W\d\D\s\S\0\n\f\r\t\v\b\B]*?)<\/script>/gi, '');
    }
    return data;
    },
    success: function(html) {
      var divContent = $("<div/>").append(html).find(".ajax-specific").html();
      $(".single-course").html(divContent);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:39:56.373

在 IE 中打开 JS 调试，检查失败的地方。如果没有帮助，请使用一些 HTTP 调试器（例如[Fiddler](http://www.fiddler2.com/fiddler2/)）来检查请求/响应。也许其中有问题。

# auto-increment - 子 ID 的自动增量

> ID：14247738
> 
> 赞同：0
> 
> 时间：2013-01-09T22:35:49.187
> 
> 标签：auto-increment

我需要为[http://www.myownmealplanner.com](http://www.myownmealplanner.com)创建一个具有类似结构的瓷砖表：

```
id user_id sub_tile_id
1   1   1
2   1   2
3   1   3
4   2   1
5   2   2
6   2   3
7   3   1
8   3   2
9   3   3 
```

等等。我不能只为新用户创建新表，因为我使用的是 cakephp，这需要为每个新表创建新的模型、视图和控制器。如何从每个新用户 ID 开始将 sub_tile_id 转换为 auto_increment？

# java - 寻找 Java 的碰撞检测库

> ID：14247742
> 
> 赞同：0
> 
> 时间：2013-01-09T22:36:05.707
> 
> 标签：java, collision-detection

我正在寻找一个支持边界框、旋转和缩放的库。我遇到了很多关于不在任一轴上旋转的边界框的信息，但是我确实需要旋转和缩放。

我知道 jBullet 有它，但是 jBullet 需要额外的动态链接库才能运行，我不太喜欢。我想这将是我的第二选择。

文档也是受欢迎的，但是我认为这显然很难实现，而且我的时间有限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:33:45.860

您可能想看看[Java 3D](http://java3d.java.net/)。它包括 3D 碰撞检测。我根本没有查看源代码，但我很确定它不是纯 Java。我相信该发行版包含相当多的本机代码，因为不同的环境有不同的下载二进制文件。

[您可以在此处](http://www.java-tips.org/other-api-tips/java3d/collision-detection-with-java3d.html)查看 Java 3D 碰撞检测示例。

# ios - UIViewController 控制器无法识别委托

> ID：14247745
> 
> 赞同：2
> 
> 时间：2013-01-09T22:36:17.657
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我第一次创建 UIControlerView 似乎从未激活过代表。请告诉我哪里出错了。

谢谢！顺便说一句，我通过从情节提要中拖动来创建 IBOutlet ......

。H

```
#import <UIKit/UIKit.h>

@interface CollectionController : UIViewController<UICollectionViewDelegate,UICollectionViewDataSource>

@property (weak, nonatomic) IBOutlet UICollectionView *controllerTableView;

@end 
```

.m

```
#import "CollectionController.h"
#import "CollectionVIewCell.h"

@interface CollectionController ()

@end

@implementation CollectionController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [[self controllerTableView]setDelegate:self];
    [[self controllerTableView]setDataSource:self];
    // Do any additional setup after loading the view.
}
-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{
    return 10;
}

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView{
    return 1;
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *cellIdentifier=@"Cell";
    CollectionVIewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];

    cell.labelDisplay.text=@"hi";
    //set up data in images

    return cell;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:54:03.380

尝试`UICollectionView`在 xib 中而不是在代码中连接您的委托和数据源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:45:54.833

您的 controllerTableView 是否有可能由于“弱”属性而被释放？尝试使用“强”，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:04:51.600

我在这里推错了，应该是

```
CollectionController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"CollectionController"];
    [self.navigationController pushViewController:controller animated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-13T17:53:57.853

检查这个继承模块是否被选中 [![在此处输入图像描述](../Images/24389e2886e3c47b55782c7469ef79dd.png)](https://i.stack.imgur.com/af2x5.png)

# breeze - 0.8.42/日期错误

> ID：14247747
> 
> 赞同：0
> 
> 时间：2013-01-09T22:36:27.220
> 
> 标签：breeze

在实体上读取空日期存在问题。（直到现在才发现实际上是否仅适用于空值或一般情况下）

这种方法似乎是问题所在（不确定）：（breeze.debug.js，l. 610）

```
function isDate(o) {
    return classof(o) === "date" && !isNaN(o.getTime());
} 
```

o 这里没有方法`getTime()`。我无法进一步追踪问题。由于承诺单步执行代码效果不佳。

**编辑：**我从 0.8.34 更新，它仍在工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:52:48.777

好的，这是一个涉及空日期的本地实体查询的错误。它已在 v 0.84.3 中修复，现在可[在此处](http://www.breezejs.com/documentation/download)获得。

谢谢萨沙！

# r - 使用 ggplot2 在 R 中创建特定图表

> ID：14247750
> 
> 赞同：-1
> 
> 时间：2013-01-09T22:36:33.543
> 
> 标签：r, graph, ggplot2

我正在尝试使用 ggplot 和 R 创建图表。

该图表显示了每人一天中的 git 提交次数。有几个人，所以我希望图表看起来像这样：

![在此处输入图像描述](../Images/ab365936f9a4fcd64fc724c102606893.png)

示例行：

```
Name,5am,6am,7am,8am,9am,10am,11am,12pm,1pm,2pm,3pm,4pm,5pm,6pm,7pm,8pm,9pm,10pm,11pm,12am,1am,2am,3am,4am
Tommy Hilfiger,6,11,4,12,15,43,94,77,52,82,83,93,73,56,43,25,19,13,8,17,1,11,12,6 
```

但是，我在 R 上非常坚持这样做。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:57:26.727

假设您的数据框（df）如下所示：

```
Time    Commits    Name
1am     3          Hilfiger
2am     5          Hilfiger
3am     1          Hilfiger
1am     1          Nike
2am     2          Nike
3am     3          Nike 
```

我认为这段代码应该可以工作：

```
ggplot(df, aes(x=Time,y=Commits)) + geom_bar() + facet_wrap(~ Name) 
```

我从我的手机上写下了这个答案，明天当我可以访问 R 时，我会仔细检查我的答案。

# php - mod_rewrite - 为干净的 url 和不干净的 url 编写正则表达式

> ID：14247753
> 
> 赞同：0
> 
> 时间：2013-01-09T22:36:48.967
> 
> 标签：php, apache, mod-rewrite

如果我有一个 mod 重写代码如下：

```
RewriteRule ^/(\w+)/?$ index.php?id=$1 
```

我是 mod-rewrites 的新手，我想知道用户是否输入了干净的 url 而不是不干净的，例如

[http://example.com/1000/](http://example.com/1000/)

进入浏览器而不是

[http://example.com/index.php?id=1000](http://example.com/index.php?id=1000)

我仍然可以请求 1000 的 $_GET[] 变量吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:48:55.777

试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/? index.php?id=$1           [L,QSA] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T22:42:49.900

我`RewriteRule ^/(\w+)/?$ index.php?id=$1`和你一样使用......而且我向你保证它有效..你启用了Mod Rewrites吗？

```
$ sudo a2enmod rewrite
$ sudo service apache2 restart 
```

# ios - 实现 iOS Facebook App 照片查看器

> ID：14247758
> 
> 赞同：4
> 
> 时间：2013-01-09T22:37:22.263
> 
> 标签：ios, facebook, uiviewcontroller, core-animation

在 iOS Facebook 应用程序中，当您点击照片时，照片会占据整个屏幕，然后您可以向上或向下拉动照片以关闭视图。拉动照片可以让您看到下面的屏幕。

我很好奇实现这一点的最佳方法，因为我不完全确定这是否是视图控制器之间的实际转换，或者只是一些在当前视图控制器中呈现子视图的花哨动画。

前者会很有趣，以维护视图控制器范式并保持所有内容的分隔。如果是后者，封装的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T18:46:49.437

在我看来，无论哪种方式你都可以做到这一点，但我认为你可能应该将其作为自定义模态转换来追求。在点击图像会导致它转换到图像视图（我认为它是一个模态视图控制器）时，在我看来，当您查看图像时，在 y 轴上的某个阈值内向上或向下滑动图像只是移动，但是一旦您越过中心上方或下方的某个点，它就会告诉视图控制器在用户释放拖动时关闭，假设拖动已完成高于或低于中心的该阈值。拖动手势还导致模态视图控制器本身的不透明度根据拖动到中心的距离而淡化。当用户确实在阈值之外释放拖动时，自定义转换调整图像的大小并将其动画化回它在主视图控制器中的位置。我认为这也可以在自定义转换中完成，但是，我没有亲自尝试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:43:40.767

我找到了一些熟悉的，你可以从这里学习如何实现

[https://github.com/Kalvar/ios-KRImageViewer](https://github.com/Kalvar/ios-KRImageViewer "KRImageViewer")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T18:39:01.747

我需要类似的东西，另外我想要一些可以与 CocoaPods 一起使用的东西。我最终找到了 UIPhotoGallery ( [https://github.com/ethan605/UIPhotoGallery](https://github.com/ethan605/UIPhotoGallery) )。它在 CocoaPods 存储库中，它有多种实现类型，最重要的是，文档是可以理解的。您可能需要添加的唯一一件事是关闭滑动手势，但这不应该太难添加到这个库中。

作为旁注，我尝试了 ios-KRImageViewer，但因为我发现它有问题并且不在 Pods 存储库中，所以将其关闭。

# java - 无法为 Mysql 连接找到合适的驱动程序

> ID：14247762
> 
> 赞同：0
> 
> 时间：2013-01-09T22:37:42.527
> 
> 标签：java, mysql, connection

经过长时间但不成功的休眠尝试，我决定使用本机 mysql 连接来完成我的项目。我收到“找不到合适的驱动程序”错误，这是我的代码的必要部分：

```
 static public Connection DatabaseConnection() {
    Connection conn = null;
    String url = "jdbc:mysql://localhost:3306/mobil";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root";
    String password = "thisPasswordShouldntBeHere";

    try {
        Class.forName(driver).newInstance();
        conn = DriverManager
                .getConnection(url , userName, password);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return conn;
} 
```

我已将 mysql 连接器添加到我的项目的构建路径中。在这部分代码中，我得到了导致空指针异常的空值； `conn = DriverManager.getConnection(url , userName, password);`

堆栈跟踪 =

```
java.sql.SQLException: No suitable driver found for jdbc:msql://localhost:3306/mobil
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at DAO.DatabaseConnection.DatabaseConnection(DatabaseConnection.java:19)
    at DAO.LogIn.SaveDatabase(LogIn.java:48)
    at DAO.LogIn.RegisterUsers(LogIn.java:18)
    at Test.main(Test.java:14)
Exception in thread "main" java.lang.NullPointerException
    at DAO.LogIn.SaveDatabase(LogIn.java:63)
    at DAO.LogIn.RegisterUsers(LogIn.java:18)
    at Test.main(Test.java:14)
java.lang.NullPointerException 
```

# ruby-on-rails - Rails：如何根据多对多关系中的额外字段进行查询？

> ID：14247766
> 
> 赞同：1
> 
> 时间：2013-01-09T22:38:07.317
> 
> 标签：ruby-on-rails, many-to-many, associations

我对如何根据连接表中存在的额外字段查询多对多关系很感兴趣。最好通过一个例子来询问。

我有一个模型**User**和一个模型**Group**。

多对多关系称为**Groupization**。它有一个额外的字段**'active_user'**。我想查询一个组中所有活跃的用户。

如果我做：

`@user.groupizations.find_all_by_active_user(true)`- 给我一个分组列表；但是，我会寻找用户列表。也许我需要做一些映射？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:44:48.640

您可以通过将关联加入查询来执行此操作，然后在关联表的范围内进行搜索：

```
User.joins(:groupizations).where(:groupizations => {:active_user => true}) 
```

请注意，如果多个分组满足此条件，这将返回重复的行。要获得不同的用户，您可以执行以下操作之一：

*   添加对`.select("DISTINCT users.*")`某些 ORDER 子句的调用`.order("users.id")`（根据需要更改排序列）
*   添加这样的 GROUP BY 子句：`.group("users.id")`. 对于非 MySQL 数据库，您可能需要更具体，并在分组中包含所有列：

    `.group(User.column_names.map{|c| "users.#{c}"}.join(','))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:59:26.007

对于连接表上的额外字段，您应该使用 has_many :through 而不是 has_many_to_many。它使用相同的 API 做更多事情

```
class User
  has_many :groupizations
  has_many :groups, through: groupization

  scope :active, joins(:groupizations).where("groupizations.active_user='1'")
end

# controller
@active_users = User.active 
```

# javascript - Android中的按键功能

> ID：14247767
> 
> 赞同：2
> 
> 时间：2013-01-09T22:38:08.347
> 
> 标签：javascript, android, dom-events

我有一个小问题。我在我的 JavaScript 中使用这个函数。该功能在我电脑上的所有浏览器中运行良好。但它不适用于我的 Android 平板电脑。谁能告诉可能是什么问题？下面是函数：

```
function keypress(e,obj) {
    getCodeVal(e,keyCode,obj);
    document.myMain.txtRequest.value="123";
    obj.value="444";
} 
```

```
<INPUT id=txtRequest onkeydown="return keypress(event, this)" 
 onkeyup="keyup(event, this)" onpaste="return false;" maxLength=21 name=request> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T06:22:38.700

我猜 onkeypress 事件根本没有触发！尝试绑定“输入”事件而不是按键

```
inputElement.addEventListener("input", keypress) 
```

您可能需要修改按键功能代码。

# c - 存储在不是 EOF 的变量中的值是什么？

> ID：14247768
> 
> 赞同：0
> 
> 时间：2013-01-09T22:38:07.827
> 
> 标签：c

以下代码中比较的值是多少？

```
while ((c = getchar()) != EOF)
        if ( c == '\n') 
```

`'\n'`由于单引号，我知道这是一个常量变量。我知道它代表ASCII表上字符的数值，对吧？那等于 110。但是什么

`((c = getchar()) != EOF)`返回？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T22:42:55.877

关键是`c`必须是`int`：

```
int c;

while ((c = getchar()) != EOF) { char read_value = c; /* ... */ } 
```

假设 an`int`可以保存比 a 更多的值`char`，或者至少比系统的窄多字节编码使用的值更多*，并在读取更多数据失败时`getchar`返回一个特殊常量。`EOF`否则，保证您可以转换`c`为 a`char`并获得读取的字符的值。

`c`将自己声明为是一个常见的错误`char`，在这种情况下，循环可能永远不会终止，因为您可能无法捕获特殊值`EOF`，否则会有一个完全有效的字符与 无法区分`(char)EOF`。

[*) 例如，如果 a`char`和 an`int`在给定平台上都是 32 位宽，那将非常好，只要窄流只能返回值在 [-128, 128) 范围内的单位，并且你可以使用`-200`as `EOF`。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T22:42:09.573

在 c 中，赋值操作返回右值，它是等号右侧的值。所以在这种情况下，c=getchar() 返回字符是什么或 EOF。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:47:48.613

你的问题是：

> 但什么是：`((c = getchar()) != EOF)`回报？

该表达式`((c = getchar()) != EOF)`是一个逻辑（或“布尔”）表达式 - 它是“真”或“假”。具体来说，它会测试某些东西是否不等于常数“EOF”。

“某事”是表达式`(c = getchar())`。这是一项任务；它调用`getchar()`函数并将返回值分配给变量`c`。赋值的值就是赋值的值；因此，整个表达式导致以下情况发生：

1.  `getchar()`叫做
2.  它的返回值被赋值给`c`
3.  然后将该值与常数进行比较`EOF`
4.  如果值不等于，`EOF`则`while`语句继续运行。

# c++ - 在 C/C++ 中将数组转换为矩阵？

> ID：14247769
> 
> 赞同：4
> 
> 时间：2013-01-09T22:38:09.770
> 
> 标签：c++, c, arrays, multidimensional-array

如果我有一个内部使用 3x3 矩阵的函数，但由于 API 限制，必须将其传递给由九个元素组成的连续数组，有没有办法将数组本质上转换为二维数组？

以下方法不起作用，但希望它传达了我想要做的事情。

我知道像 Eigen 这样的软件包使这变得微不足道，但不幸的是，在这种情况下它不是我的选择。

```
void transpose_3x3( double x[3][3] ) {
    ...
}

void foo( double x[9], double y[3][3] ) {

    transpose_3x3(y)  // OK    

    double *my_x[3][3] = &x[0];

    transpose_3x3(&my_x);  // How?

} 
```

**编辑**

感谢 Daniel 向我展示了正确的演员阵容目标，我能够使用 C++ reinterpret_cast 函数来完成这项工作。虽然 union 和 memcpy 解决方案有效，但单一的显式转换似乎是最直接的解决方案，恕我直言。

```
#include <iostream>

void print_matrix( double x[3][3] ) {

    for(unsigned int i=0; i< 3; i++) {
        for(unsigned int j=0; j<3; j++) {
            std::cout << x[i][j] << "  ";
        }
        std::cout << std::endl;
    }
}

int main() {

    double a[9] = { 1, 2, 3, 4, 5, 6, 7, 8, 9};    
    double (*b)[3] = reinterpret_cast<double (*)[3]>(a);  

    print_matrix(b);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T22:41:33.600

我想不出一种方法来进行明确的演员表。

但是你可以只是 memcpy 它。调用 memcpy 并不像你想象的那么愚蠢。编译器经常会看到 2 位数据实际上代表相同的东西，并且 memcpy 是固定大小并优化实际副本。

我必须说我从来没有尝试过像你正在做的矩阵这么大的东西，但我不明白为什么它不起作用。

**编辑**：事实上，我想我会试一试。我写了以下代码：

```
void transpose_3x3( double (*x)[3][3] ) 
{
    const double t01    = (*x)[0][1];
    const double t02    = (*x)[0][2];
    const double t12    = (*x)[1][2];
    (*x)[0][1] = (*x)[1][0];
    (*x)[0][2] = (*x)[2][0];
    (*x)[1][0] = t01;
    (*x)[1][2] = (*x)[2][1];
    (*x)[2][0] = t02;
    (*x)[2][1] = t12;
}

void foo() 
{
    double x[9] = { 1.0f, 2.0f, 3.0f,
                    4.0f, 5.0f, 6.0f,
                    7.0f, 8.0f, 9.0f };

    double y[3][3];
    memcpy( y, x, sizeof( double ) * 9 );

    transpose_3x3( &y );

    printf( "%f, %f, %f\n", y[0][0], y[0][1], y[0][2] );
    printf( "%f, %f, %f\n", y[1][0], y[1][1], y[1][2] );
    printf( "%f, %f, %f\n", y[2][0], y[2][1], y[2][2] );
} 
```

并使用 VS2010 以发布模式构建它。

生成的程序集如下：

```
void foo() 
{
00E11000  push        ebp  
00E11001  mov         ebp,esp  
00E11003  and         esp,0FFFFFFC0h  
00E11006  sub         esp,0B8h  
    double x[9] = { 1.0f, 2.0f, 3.0f,
00E1100C  fld1  
00E1100E  push        esi  
00E1100F  fstp        qword ptr [esp+2Ch]  
00E11013  push        edi  
00E11014  fld         qword ptr [__real@4000000000000000 (0E12138h)]  
                    4.0f, 5.0f, 6.0f,
                    7.0f, 8.0f, 9.0f };

    double y[3][3];
    memcpy( y, x, sizeof( double ) * 9 );

    transpose_3x3( &y );

    printf( "%f, %f, %f\n", y[0][0], y[0][1], y[0][2] );
00E1101A  sub         esp,18h  
00E1101D  fstp        qword ptr [esp+50h]  
00E11021  mov         ecx,12h  
00E11026  fld         qword ptr [__real@4008000000000000 (0E12130h)]  
00E1102C  lea         esi,[esp+48h]  
00E11030  fstp        qword ptr [esp+58h]  
00E11034  lea         edi,[esp+90h]  
00E1103B  fld         qword ptr [__real@4010000000000000 (0E12128h)]  
00E11041  fst         qword ptr [esp+60h]  
00E11045  fld         qword ptr [__real@4014000000000000 (0E12120h)]  
00E1104B  fstp        qword ptr [esp+68h]  
00E1104F  fld         qword ptr [__real@4018000000000000 (0E12118h)]  
00E11055  fstp        qword ptr [esp+70h]  
00E11059  fld         qword ptr [__real@401c000000000000 (0E12110h)]  
00E1105F  fst         qword ptr [esp+78h]  
00E11063  fld         qword ptr [__real@4020000000000000 (0E12108h)]  
00E11069  fstp        qword ptr [esp+80h]  
00E11070  fld         qword ptr [__real@4022000000000000 (0E12100h)]  
00E11076  fstp        qword ptr [esp+88h]  
00E1107D  rep movs    dword ptr es:[edi],dword ptr [esi]  
00E1107F  fstp        qword ptr [esp+10h]  
00E11083  fstp        qword ptr [esp+8]  
00E11087  fld         qword ptr [esp+90h]  
00E1108E  fstp        qword ptr [esp]  
00E11091  mov         esi,dword ptr [__imp__printf (0E120A0h)]  
00E11097  push        offset string "%f, %f, %f\n" (0E120F4h)  
00E1109C  call        esi  
    printf( "%f, %f, %f\n", y[1][0], y[1][1], y[1][2] );
00E1109E  add         esp,4  
00E110A1  fld         qword ptr [esp+0C8h]  
00E110A8  fstp        qword ptr [esp+10h]  
00E110AC  fld         qword ptr [esp+0B0h]  
00E110B3  fstp        qword ptr [esp+8]  
00E110B7  fld         qword ptr [__real@4000000000000000 (0E12138h)]  
00E110BD  fstp        qword ptr [esp]  
00E110C0  push        offset string "%f, %f, %f\n" (0E120F4h)  
00E110C5  call        esi  
    printf( "%f, %f, %f\n", y[2][0], y[2][1], y[2][2] );
00E110C7  fld         qword ptr [esp+0D4h]  
00E110CE  add         esp,4  
00E110D1  fstp        qword ptr [esp+10h]  
00E110D5  fld         qword ptr [__real@4018000000000000 (0E12118h)]  
00E110DB  fstp        qword ptr [esp+8]  
00E110DF  fld         qword ptr [__real@4008000000000000 (0E12130h)]  
00E110E5  fstp        qword ptr [esp]  
00E110E8  push        offset string "%f, %f, %f\n" (0E120F4h)  
00E110ED  call        esi  
00E110EF  add         esp,1Ch  
} 
```

您会注意到没有 memcpy。实际上，它所做的只是手动将矩阵从 x 复制到 y 中，然后以转置方式打印它。基本上它很有趣，看看编译器会做些什么来优化事情......

**编辑2**：当然，在看到稻田的出色回应后，我会想得更远一点，我觉得你可以直接解决这个问题

```
transpose_3x3( (double (*)[3][3])&x ); 
```

没有 memcpy 或 union 可以工作：D

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T22:54:35.320

好吧，这有点脏，但你可以使用 a `union`with cast。有人会因为这个告诉我，但我还是会发布它=）

```
#include <iostream>

using namespace std;

typedef union {
    double linear[9];
    double square[3][3];
} Matrix;

void transpose_3x3( double x[3][3] )
{
    for( int i = 0; i < 3; i++ ) {
        for( int j = 0; j < 3; j++ ) {
            cout << i << "," << j << ": " << x[i][j] << endl;
        }
    }
}

void foo( double x[9], double y[3][3] )
{
    transpose_3x3( y );
    transpose_3x3( ((Matrix*)x)->square );
}

int main()
{
    double x[9] = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };
    double y[3][3] = { {1, 2, 3}, {4, 5, 6}, {7, 8, 9} };
    foo( x, y );
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T01:12:15.420

```
void transpose_3x3( double x[3][3] ) {
    ...
} 
```

请注意，`3`忽略第一个维度。类型`transpose_3x3`是真的

```
void transpose_3x3(double (*)[3]) 
```

这告诉我们如何继续，您必须转换`x`为 a ，一个指向三个s`double (*)[3]`数组的指针。`double`

```
void foo(double x[9], double y[3][3]) {
    // Note that the actual types of the parameters are
    // double *x
    // double (*y)[3]

    transpose_3x3(y);
    transpose_3x3((double(*)[3])x);
} 
```

当然，`x`如果传入的元素短于 9 个元素，则传递演员表会造成严重破坏`x`，但如果`y`太短也会出现这种情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-21T00:15:55.150

您可以定义指向矩阵的指针，如下所示：

```
int (*matrix)[M][N]; 
```

如果你有一个数组 M*N，那么我们基本上可以创建一个指向对象 M*N 的指针：C 支持的本机矩阵不是多维的。

```
int array[M*N]
int (*matrix)[M][N] = (int (*)[M][N]) array; 
```

如果要访问矩阵中的元素，则可以创建一个函数来简化重复性工作。

```
int get(int (*matrix)[M][N], int i, int j) { return (*matrix)[i][j]; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T22:42:52.433

由于您已经为 C++ 添加了标签，我建议您编写自己的矩阵类，它通过提供辅助函数来访问具有 {x, y} 参数以及 {contiguous x} 参数的数据。

您编写的代码不是您通常在用 C++ 编写的程序中看到的，因为您可以实现相同的逻辑，并且更干净、更安全。

# coq - 有效使用 Coq 提示数据库的最佳实践

> ID：14247771
> 
> 赞同：4
> 
> 时间：2013-01-09T22:38:12.780
> 
> 标签：coq

“你问的问题似乎很主观，很可能会被关闭。”

嗯，我知道，但还是觉得值得在这里问。

* * *

我被多次告知我应该使用提示数据库和自动，因为它是有史以来最好的东西。然而，有几次我尝试使用它，我对琐碎的细节感到非常恼火。这是不断发生的一件事。

```
Section Annoying.

Variable T : Type.
Variable P : T -> Prop.

Axiom notP : forall x, ~ P x.
Hint Resolve notP.

Goal forall (x : T), P x -> False.
intros x.
auto. (* nothing... *)
replace (P x -> False) with (~ P x) by reflexivity.
(* fold not. does not work, don't know why either but that is not the point here... *)
auto.
Qed.

End Annoying. 
```

* * *

因此，我的问题是：人们如何使用提示数据库而不遇到这样的麻烦。是否有有效提示数据库的商品经验法则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T09:00:51.420

auto 通过将未修改的定理应用于目标来工作。它通过对其形状的句法观察来寻找要应用的定理。所以你的定理 notP 将只适用于形式的目标

〜P ...

P x -> False 形式的目标在语法上不是这种形式。事实上，自动策略的工作方式如下：首先尽可能多地使用介绍，然后尝试应用定理。所以你的目标变成了

```
H : P x
=========
 错误的

```

然后它尝试应用可以证明为 False 的定理。不幸的是，它只尝试应用不需要猜测实例的定理（可以与策略一起使用的定理适用并且不需要“with”扩展）。因此，auto 永远不会使用具有“forall a, P a -> False”形式的语句的定理，因为 apply 会抱怨它确实知道如何实例化 a。

因此，良好的 auto 候选证明是您可以通过仅使用 intros 和 apply 来完成的证明，没有展开或 apply 的实例......没有手动将定理应用于参数，并且在每一步，最右边的公式 (在箭头的末尾）定理使用谓词作为出现在目标结论中的谓词。

您烦人的示例有效，因为在某些时候主要公式的目标是“〜P x”，因此主要符号不是，并且 auto 在其表中针对该主要符号具有引理 notP。

这是一个运行良好的示例：

```
变量 my_le : nat -> nat -> Prop.

假设 my_le_n : forall x, my_le x x。

假设 my_le_S : forall xy, my_le xy -> my_le x (S y)。

提示解决 my_le_n my_le_S。

引理托托：my_le 10 14。
证明。
汽车。
Qed。

```

在 Hint 命令之后，auto 在其表中有两个词条“my_le_n”和“my_le_S”，当目标主符号为 my_le 时使用。在查看“my_le 10 14”时，它会依次尝试这两个引理。第一个失败，但第二个应用并产生一个新目标“my_le 10 13”，这可以重复几次，直到自动管理应用“my_le_n”。因此，auto 探索了一个可能性树，其中分支来自以下事实，即可能有几个定理适用于给定目标。另外，分支的长度限制为 5，因此 my_le 10 15 不会被 auto 解决。您可以通过为 auto 提供数字参数来更改分支的长度。所以“auto 20”将解决“my_le 10 15”和其他类似情况。

# php - 在 Jquery 上下文中获取 MySQL/PHP 数据

> ID：14247774
> 
> 赞同：0
> 
> 时间：2013-01-09T22:38:18.080
> 
> 标签：php, mysql, jquery

**所以这是我的问题：**
我有这个 jquery 块，它几乎可以为圆环图命令数据

```
var data = [
    { label: "Country1",  data: 12},
    { label: "Country2",  data: 27},
    { label: "Country3",  data: 85},
    { label: "Country4",  data: 64},
    { label: "Country5",  data: 90},
    { label: "Country6",  data: 112}
    ]; 
```

但是，我需要不要对这些数据进行硬编码，而是使用 MySQL/PhP 和通常的查询从我的数据库中动态加载：

```
$st = $this->db->dbh->query("SELECT COUNT(USER_COUNTRY) AS value, USER_COUNTRY FROM USER GROUP BY USER_COUNTRY"); 
```

我需要某种循环来激怒结果，将每个国家分配给一个*标签：*，一个*数据*值......

然而，我完全不知道如何做到这一点。我有一种感觉，我可能需要 ajax，但我对此一无所知。在网上找不到任何相关的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:41:26.493

您需要使用某种序列化格式（最有可能是 JSON）在客户端和服务器之间交换数据。这并不直接需要 ajax，除非您希望它在前端异步加载。

查看使用 php`json_encode`将 json 数据输出到模板中，您可以在模板中使用 Jquery 选择包含序列的元素。或者，您可以只使用一个 url 端点来回显 json 并使用 Jquery 的`.getJSON`方法作为使用 ajax 的快捷方式。

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# java - 使用 VLC 命令行获取网络摄像头列表

> ID：14247778
> 
> 赞同：4
> 
> 时间：2013-01-09T22:38:22.233
> 
> 标签：java, vlc

**如何使用 VLC 命令行获取网络摄像头列表？**

如果我使用 FFmpeg，我可以写：

```
$ ffmpeg -list_devices true -f dshow -i dummy 
```

并获取名称网络摄像头列表，我可以在脚本中使用这些名称从该网络摄像头获取视频。

**我如何使用 VLC 做同样的事情？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:10:43.460

AFAIK，这不可能通过 VLC 本身来实现。您可能必须通过您的操作系统来执行此操作。虽然，可能有一个插件可以做到这一点。

这篇博客文章包含一个讨论在 Ubuntu Linux 上执行类似操作但涉及必须物理插入相机的部分： [http ://clusterbleep.net/blog/2010/07/13/webcam-recording-using-vlc-on -linux/](http://clusterbleep.net/blog/2010/07/13/webcam-recording-using-vlc-on-linux/)

但是，在这个 Stackoverflow 问题中有更深入的处理，关于如何通过操作系统获取摄像机列表。它为每个主要操作系统列出了一系列其他文章： [如何在 linux ( ubuntu ) 上获取视频捕获设备 (网络摄像头) 的列表？(C/C++)](https://stackoverflow.com/questions/4290834/how-to-get-a-list-of-video-capture-devices-web-cameras-on-linux-ubuntu-c)

# oracle - 如何从plsql存储过程返回集合类型

> ID：14247779
> 
> 赞同：2
> 
> 时间：2013-01-09T22:38:35.110
> 
> 标签：oracle, plsql

我在 PL/SQL 中有以下存储过程：

```
CREATE OR REPLACE PROCEDURE sample_procedure AS 
DECLARE 
    TYPE list_of_names_t 
      IS TABLE OF emp.emp_index%TYPE; 
    ignoreIndexes LIST_OF_NAMES_T := List_of_names_t();
BEGIN
-- Logic here which fills the values in the collection ignoreIndexes   
END; 
```

从外部调用此存储过程时，如下所示：

```
 SET SERVEROUTPUT ON
    EXEC sample_procedure
    -- Line YY 
```

@ Line YY，我想从`ignoreindexes`存储过程中准备的集合中没有索引的 emp 表中检索记录。

1）如何将`ignoreindexes`存储过程中创建的嵌套表返回给外界，以便我可以使用该表中的索引

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T00:47:47.830

首先，它们的类型需要在过程外部声明，以便类型定义对过程外部的代码可见。您可以在 SQL 中声明类型

```
CREATE TYPE list_of_names_t
    AS TABLE OF NUMBER; 
```

或者你可以在 PL/SQL 中声明它

```
CREATE OR REPLACE PACKAGE types_package
AS
  TYPE list_of_names_t
    IS TABLE OF emp.emp_index%type;
END; 
```

然后，您的过程将不得不使用并返回 SQL 类型

```
CREATE OR REPLACE PROCEDURE sample_procedure( 
  p_ignore_indexes OUT list_of_names_t 
) 
AS 
BEGIN
  -- Logic here which fills the values in the collection p_ignore_indexes 
END; 
```

或 PL/SQL 类型

```
CREATE OR REPLACE PROCEDURE sample_procedure( 
   p_ignore_indexes OUT types_package.list_of_names_t 
) 
AS 
BEGIN
  -- Logic here which fills the values in the collection p_ignore_indexes 
END; 
```

当然，如果您的代码的目的是返回一个集合，那么编写函数比编写过程更有意义

```
CREATE OR REPLACE FUNCTION sample_function
  RETURN types_package.list_of_names_t
AS 
  ignore_indexes types_package.list_of_names_t;
BEGIN
  -- Logic here which fills the values in the collection ignore_indexes 
  RETURN ignore_indexes;
END; 
```

当您调用该过程时，您会执行类似的操作

```
DECLARE
  l_ignore_indexes types_package.list_of_names_t;
BEGIN
  l_ignore_indexes := sample_function; 
  -- Do something with l_ignore_indexes
END; 
```

或者

```
DECLARE
  l_ignore_indexes types_package.list_of_names_t;
BEGIN
  sample_procedure( l_ignore_indexes );
  -- Do something with l_ignore_indexes
END; 
```

# ios - 我的通知代码有什么问题？

> ID：14247784
> 
> 赞同：1
> 
> 时间：2013-01-09T22:39:12.697
> 
> 标签：ios, objective-c, uilocalnotification, repeatingalarm

注意：下面有更新。

我在上一个问题中询问过如何为每小时重复间隔指定一分钟。但是，我有两个答案要求我尝试使用日期组件，我做到了。这里是：

```
[[UIApplication sharedApplication] cancelAllLocalNotifications];
NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar] ;
NSDateComponents *componentsForReferenceDate = [[NSDateComponents alloc] init];
[componentsForReferenceDate setHour:hour];
[componentsForReferenceDate setMinute:0];
[componentsForReferenceDate setSecond:0];

 NSDate *fireDateOfNotification = [calendar dateFromComponents: componentsForReferenceDate];
 // Create the notification
 UILocalNotification *notification = [[UILocalNotification alloc] init] ;

 notification.fireDate = fireDateOfNotification;
 notification.timeZone = [NSTimeZone localTimeZone] ;
 notification.alertBody = [NSString stringWithFormat: @"You are missed!"] ;
 notification.alertAction = @"View";
 notification.userInfo= [NSDictionary dictionaryWithObject:[NSString stringWithFormat:@"Some information"] forKey:@"information"];
 notification.repeatInterval= NSHourCalendarUnit ;
 notification.soundName = @"Appnotifisound.wav";
 notification.applicationIconBadgeNumber = 1;
 [[UIApplication sharedApplication] scheduleLocalNotification:notification] ; 
```

该代码在我看来是正确的，它应该像我被告知它应该在每小时开始时触发一个通知一样工作。然而，事实并非如此！代码是完整的，我已经设置了属性并正确地合成了它，即使 NSCalendar 在那里。它可以完美地构建和运行，但是，它永远不会在我的模拟器上每小时触发一次通知！？我只是无法理解似乎有什么问题。如果您需要更多信息或复制代码的其他部分以帮助我查找缺少的内容，请告诉我。谢谢你。

更新：如果可能是问题，这是我对小时进行编码的方式..

```
NSCalendar *calendar1 = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar1 components:(NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:[NSDate date]];
hour = [components hour];
min =[components minute];
sec =[components second];
NSLog(@"hour is %i",hour);

NSLog(@"min is %i",min);

NSLog(@"sec is %i",sec);
 if (hour < 24) {
     hour=hour+1;
     } else {
         hour=0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T23:15:40.623

让我难过的事情：当应用程序在前台时，你不会看到通知。您需要点击模拟器上的主页按钮以将应用程序置于后台，否则，要在应用程序处于活动状态时查看某些内容，请实现应用程序委托协议方法：`- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification`在您的应用程序中并让该方法显示某些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:59:38.750

当我复制这段代码时它对我有用，除了我没有设置你的声音并且你没有展示你如何设置“小时”所以我硬编码它。这是输出。

> 2013-01-09 17:57:17.968 TestStackOverflow[3322:11303] fireDate = 0001-01-01 06:17:32 +0000 2013-01-09 17:57:17.993 TestStackOverflow[3322:11303] +++scheduledLocalNotifications ( "{fire date = Monday, January 1, 1, 1:00:00 AM GMT-05:17:32, time zone = America/Toronto (EST) offset -18000, 重复间隔 = NSHourCalendarUnit, 重复计数 = UILocalNotificationInfiniteRepeatCount,下一次开火日期 = 2013 年 1 月 9 日，星期三，东部标准时间下午 6:17:32，用户信息 = {\n 信息 = \"一些信息\";\n}}"

# bash - gpg 仅加密文件夹中的某些文件

> ID：14247801
> 
> 赞同：2
> 
> 时间：2013-01-09T22:40:18.300
> 
> 标签：bash, gnupg

一个文件夹里有 15 个文件，都是 gz 扩展名。我只想加密其中的 12 个并跳过 3 个文件。有没有办法做到这一点？所有文件名都不同，并且可能以也可能不以相同的字母开头。目前正在做：

```
gpg -r 'name' --encrypt-files  $source/*.gz 
```

假设文件名是apple.gz、alabama.gz、butter.gz、cake.gz、dog.gz、eagle.gz、oregon.gz、somename.gz；

我想用一个 gpg 命令加密除 alabama.gz 和 somename.gz 之外的所有文件；我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T00:11:22.870

如您所知（根据您发布的内容），鲍勃的回答是错误的说您不能使用单个命令加密多个文件。

您几乎可以使用自己的命令行了；你只需要一点shell技巧，例如：

```
gpg -r recip --encrypt-files $(ls $source/*.gz | egrep -v 'alabama|somename') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-28T17:55:22.467

实际上，如果要加密文件夹中的所有文件，可以使用单个命令加密多个文件。

```
gpg -r 'name' --encrypt-files *.gz 
```

工作得很好。如果您想跳过这两个文件，Ryan 的回答是正确的。

斯科特

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-09T23:22:05.260

您不能使用单个`gpg`命令加密多个文件。但是，您可以将`tar`它们全部归档，然后加密结果。有关更多信息，请参阅UNIX 站点上的[类似问题。](https://unix.stackexchange.com/q/43846/20450)

在任何情况下，您都需要列出要包含的文件。

# mysql - 如何在复制该表时锁定 InnoDB 表以防止更新？

> ID：14247803
> 
> 赞同：3
> 
> 时间：2013-01-09T22:40:35.160
> 
> 标签：mysql, locking, innodb

我想暂时锁定一个表以防止其他并发进程对其进行更改。这样做的原因是这个表将被复制到一个临时表，改变，然后复制回来（原来的实际上被删除了，新的表被重命名了）。然后在这一切完成之后，我想解锁表，并希望在锁定恢复期间尝试过任何事情。

我还需要能够从已锁定的表中读取以构建新表。

这是我尝试过的，但它似乎不起作用。

```
$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME, DB_PORT);

$mysqli->autocommit(false)

// create a table to hold parts to keep
$q1 = "CREATE TABLE new_table LIKE my_table;";
$res1 = $mysqli ->query($q1);       

// Lock table to avoid concurrent update issues
$q2 = "LOCK TABLE my_table WRITE;";
$res2 = $mysqli ->query($q2);           

// Insert data to keep into new table   
$q3 = "INSERT INTO new_table SELECT * FROM my_table WHERE some_id IN (SELECT ID FROM table2)";
$res3 = $mysqli ->query($q3);

// drop original table
$q4 = "DROP TABLE my_table;";
$res4 = $mysqli ->query($q4);

// rename new table
$q5 = "RENAME TABLE new_table TO my_table;";
$res5 = $mysqli ->query($q5);

$mysqli ->commit(); // commit changes and re-enable autocommit

$q = "UNLOCK TABLES;";
$res = $mysqli ->query($q); 
```

为了测试，使用 PHPmyadmin，我发出了“SET AUTOCOMMIT=0; LOCK TABLE my_table WRITE;” 查询，然后尝试从 my_table 中删除某些内容，我能够这样做。我想阻止这个。此外，在发出 lock 语句后，程序的其余部分将失败并且没有任何改变。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T22:50:40.440

对不起，答案很长，但这需要分多个部分来回答。

**1\. 关于锁定 InnoDB 表`LOCK TABLES`的一般情况**

与 InnoDB 一起使用`LOCK TABLES`确实有效，并且可以在下面的示例中使用连接到同一服务器的 MySQL CLI 的两个实例（由`mysql-1`和表示`mysql-2`）来演示。由于对客户的影响，通常应该在任何类型的生产环境中避免它，但有时它可能是唯一的选择。

创建一个表并用一些数据填充它：

```
mysql-1> create table a (id int not null primary key) engine=innodb;
Query OK, 0 rows affected (0.02 sec)

mysql-1> insert into a (id) values (1), (2), (3);
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0 
```

锁定表：

```
mysql-1> lock tables a write;
Query OK, 0 rows affected (0.00 sec) 
```

尝试插入 from `mysql-2`，这将挂起等待锁：

```
mysql-2> insert into a (id) values (4); 
```

现在从以下位置解锁表`mysql-1`：

```
mysql-1> unlock tables;
Query OK, 0 rows affected (0.00 sec) 
```

最后`mysql-2`解除阻塞并返回：

```
Query OK, 1 row affected (6.30 sec) 
```

**2.使用phpMyAdmin进行测试**

您使用 phpMyAdmin 的测试方法无效，因为 phpMyAdmin 在来自其 Web 界面的查询之间不保持与服务器的持久连接。为了使用任何类型的锁定`LOCK TABLES`，`START TRANSACTION`等等，您需要在持有锁定时保持连接。

**3\. 锁定工作期间需要的所有表**

MySQL 锁定表的方式，一旦您使用`LOCK TABLES`显式锁定任何内容，您将无法访问在`LOCK`...`UNLOCK`会话期间未显式锁定的任何其他表。在上面的示例中，您需要使用：

```
LOCK TABLES my_table WRITE, new_table WRITE, table2 READ; 
```

（我假设`table2`在子选择中使用的不是错字。）

**4\. 原子表交换使用`RENAME TABLE`**

此外，我应该注意，使用`DROP TABLE`后跟替换现有表`RENAME TABLE`会导致该表不存在的短暂时刻，这可能会使期望它存在的客户感到困惑。通常这样做要好得多：

```
CREATE TABLE t_new (...);
<Populate t_new using some method>
RENAME TABLE t TO t_old, t_new TO t;
DROP TABLE t_old; 
```

这将执行两个表的原子交换。

# php - 无法在选择框中显示详细信息列表

> ID：14247805
> 
> 赞同：0
> 
> 时间：2013-01-09T22:40:37.353
> 
> 标签：php, jquery, ajax, mysqli

在`addstudentsession.php`我下面有一个下拉菜单，其中包含考试列表，我还有一个空的多选框和一个空的多选框：

```
 //FROM VIEW SOURCE:

        <select name="session" id="sessionsDrop">
        <option value="">Please Select</option>
        <option value='20'>EWYGC - 10-01-2013 - 09:00</option>
        <option value='22'>WDFRK - 11-01-2013 - 10:05</option>
        <option value='23'>XJJVS - 12-01-2013 - 10:00</option>
        <option value='21'>YANLO - 11-01-2013 - 09:00</option>
        <option value='24'>YTMVB - 12-01-2013 - 03:00</option>
        </select> </p> 

    //FROM CODE:

    $studentSELECT = "";  
    $studentSELECT .= '<select name="studenttextarea" id="studentselect" size="6">';
    $studentSELECT .= '</select>'; 

//AJAX CODE:

         $(document).ready( function(){

        $('#sessionsDrop').change( function(){
            var search_val = $(this).val();
            $.post("addedstudents.php", 
            {studenttextarea : search_val}, 
            function(data){
   if (data.length>0){ 
     $("#studentselect").html(data); 
   } 
)}; 
```

现在假设发生的是，当从下拉菜单中选择考试时，将激活 ajax 调用并导航到单独的 php 页面，在该页面中运行查询以查看当前有多少学生在评估中. 如果没有 0 个学生，则表示该评估中没有学生，否则它将显示考试中每个学生的别名和姓名。

但我遇到的问题是，如果我选择一个我知道目前有学生在评估中的评估，它仍然会显示评估中没有学生的消息，而不是实际显示学生的别名和姓名列表。我的问题是为什么它可以列出评估中的学生，而只是继续显示没有学生的消息？

我知道查询是正确的，因为我已经在 phpmyadmin 中测试了查询并且它工作正常。是`addedstudents.php`下面代码中的问题：

```
$session = isset($_POST['session']) ? $_POST['session'] : '';

$studentactive = 1;

$currentstudentqry = "
SELECT
ss.SessionId, st.StudentId, st.StudentAlias, st.StudentForename, st.StudentSurname
FROM
Student_Session ss 
INNER JOIN
Student st ON ss.StudentId = st.StudentId
WHERE
(ss.SessionId = ? and st.Active = ?)
ORDER BY st.StudentAlias
";

$currentstudentstmt=$mysqli->prepare($currentstudentqry);
// You only need to call bind_param once
$currentstudentstmt->bind_param("ii",$session, $studentactive);
// get result and assign variables (prefix with db)

$currentstudentstmt->execute(); 

$currentstudentstmt->bind_result($dbSessionId,$dbStudentId,$dbStudentAlias,$dbStudentForename,$dbStudentSurname);

$currentstudentstmt->store_result();

$studentnum = $currentstudentstmt->num_rows();   

$studentSELECT = "";     

if($studentnum == 0){

$studentSELECT .= "<option disabled='disabled' class='red' value=''>No Students currently in this Assessment</option>"; 

}else{   

while ( $currentstudentstmt->fetch() ) {

$studentSELECT .= sprintf("<option disabled='disabled' value='%s'>%s - %s s</option>", $dbStudentId, $dbStudentAlias, $dbStudentForename, $dbStudentSurname) . PHP_EOL; 
}

}

echo $studentSELECT; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:13:40.253

在`$.post()`你发送`studenttextarea`，但在`addedstudents.php`你检查`isset($_POST['session'])`，所以`$session ==''`。

更改其中一个`$.post()`=>

```
 {session : search_val}, 
```

**或者**

`addedstudents.php`=>

```
$session = isset($_POST['studenttextarea']) ? $_POST['studenttextarea'] : ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:04:14.370

看起来您没有设置 $_POST['session']

使用 firebug 查看 AJAX 页面返回的内容，并转储您的 $_POST 数据。看起来您只是在“studenttextarea”中发帖。

# udp - 如何在 scapy 中多次发送一个 udp 数据包？

> ID：14247806
> 
> 赞同：3
> 
> 时间：2013-01-09T22:40:44.503
> 
> 标签：udp, scapy

如何在 scapy 中多次发送一个 udp 数据包？我需要多次发送有效的 udp 数据包。scapy 中是否有任何特定的方法或功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T13:52:50.897

干得好：

```
sendp(p, iface=eth0, inter=1 , count=x ) 
```

`p`您的数据包或数据包列表在哪里，并且`count`是重复发送操作的次数。

还要检查相应的文档[scapy.sendrecv 命名空间参考](http://fossies.org/dox/scapy-2.3.1/namespacescapy_1_1sendrecv.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-04T21:28:23.340

创建ip包

```
i=IP()
i.dst="destination ip " 
```

创建 udp 数据包

```
u=UDP()
u.dport="destination port" 
```

现在发送

```
while(1)
{
send(i/u)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-24T11:08:00.057

使用这一行，您的数据包将在循环中连续发送：

`send(packet, loop=1)`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-19T06:48:24.017

您可以在正常循环中进行。创建了有效的 UDP 数据包，然后将发送函数放入一个简单的循环中，如下所示：

```
for packet in range(No. of time you want to send the packet):
      send(Your UDP packet) 
```

希望有帮助

# ssl - 使用 PKCS#11 HSM 验证 SSL Web 请求

> ID：14247807
> 
> 赞同：3
> 
> 时间：2013-01-09T22:40:48.337
> 
> 标签：ssl, webrequest, pkcs#11

我正在尝试向我编写的站点发出 Web 请求，该站点要求客户端提供证书以进行身份​​验证。

具体来说，我正在尝试编写一个可以发出 Web 请求的 C#（或 Visual C++）应用程序，但在我的 HSM 上使用证书和私钥。

我意识到这里有一个类似的问题，但它没有收到我需要的答案。

我已经可以：

*   P/Invoke 我的本机 pkcs#11 库（一个 DLL）、登录、在 HSM 上查找/创建对象
*   使用 pkcs#11 界面，我可以阅读找到 HSM 上的 X509 证书

我不能：

*   从 HSM 导出私钥。它不可导出。

所以我需要一种从我的应用程序发出 Web 请求并说“对于握手，使用我的 HSM 上的 X509 和 Private Key 对象”的方法。

请不要建议我“检查”诸如 NCryptoki、Bouncy Castle 等之类的东西——我已经可以使用它们来制作我的 Windows 应用程序。与 HSM 通信。我需要的是如何制作 Windows 应用程序。在 HSM 上的凭据上下文下发出 Web 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-27T11:03:36.010

当您通过本机调用获得证书时，`pkcs#11`您没有附加私钥。私钥进行解密，所以我们需要它。要解决这个问题，您有两个选择：

1.  几乎所有设备在安装过程中都会注册一个加密服务提供者。例如，您可以`RSACryptoServiceProvider`在该提供程序上包装 a 并将其分配给`PrivateKey`您的证书的属性。

2.  某些设备驱动程序将 HSM 中的证书与个人证书存储同步。如果您从 Windows 商店中选择证书，它将自动附加一个加密服务提供程序。所以丢失的私钥问题消失了。您需要做的就是将证书添加到`ClientCertificates`集合中。

你可以想象我会推荐第二种选择（如果有的话）。

# sql - 如何将一行与两个sql行合并

> ID：14247808
> 
> 赞同：0
> 
> 时间：2013-01-09T22:40:50.660
> 
> 标签：sql, sql-server

这可能很简单，但我无法让它工作。希望我能得到一些帮助。

我有一个返回以下数据的选择语句

```
Id  Name  Phone  msg     File
1    A    null   null     f1 
```

另一个选择语句

```
Id     Name   Phone   msg      File
NULL   NULL    123   nothing     f1
NULL   NULL    156   nothing1    f1 
```

如何将以上内容合并为

```
Id     Name   Phone   msg      File
1       A      123   nothing     f1
1       A      156   nothing1    f1 
```

我尝试在 File 上使用 max 和 group by。任何帮助表示赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:46:53.483

```
Select s1.ID,s1.Name,s2.Phone,s2.msg,s2.File
from s1
Join s2 on s1.file=s2.file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:44:20.833

询问：

[**SQLFIDDLE示例**](http://sqlfiddle.com/#!3/ef91e/6)

```
SELECT t1.[Id],
       t1.[Name],
       t2.[Phone],
       t2.[msg],
       t2.[File]
FROM Table1 t1
JOIN Table2 t2 ON t1.[File]=t2.[File] 
```

结果：

```
| ID | NAME | PHONE |      MSG | FILE |
---------------------------------------
|  1 |    A |   123 |  nothing |   f1 |
|  1 |    A |   156 | nothing1 |   f1 | 
```

# iis - 我无法解决的 Windows Server 2003 权限以挽救我的生命

> ID：14247810
> 
> 赞同：1
> 
> 时间：2013-01-09T22:40:54.687
> 
> 标签：iis, permissions, hosting

我有一台旧的 Windows 2000 服务器在 DSL 线路的壁橱中运行。它为几个用户做少量的网络、邮件和 ftp。它在那里待了将近10年。

它开始蓝屏，我确定尝试修复它可能太麻烦了，它已经运行了很长时间，虽然我最初设置了它，但我很难记住这个该死的东西。

所以无论如何，没什么特别的，它有几个只有静态页面的网站，几个有可浏览目录的网站和一个丢弃 FTP 文件的用户。没什么大不了的，它一直在无人看管的情况下运行。

因此，当它失败时，我有一台装有服务器 2003 的小型 PC 并且正在运行，但并未使用。我取出旧服务器硬盘并将其放入带有服务器 2003 的较新硬盘中。我将 inetpub 目录复制到新服务器上，就像它们没有更改一样。我从 windows server 2003 更改了 inetpub 的名称，它们仍然存在，但被替换了。

我经历并设置了与以前相同的主机。带有主机标头的基于名称的托管。Mailenable 用于邮件和第三方 FTP 服务器。这一切似乎都奏效了。嗯，有点。诚然，这不是操作系统的全新安装，它是过去某个时候某人的打印服务器。

所以无论如何。这就是我所拥有的。

一方面，那里有一些正在建设的页面，所以在可浏览的子目录前面会有一些东西。他们有一个 jpg 和一个 gif 图像。

当您浏览该网站时，jpg 加载正常，但 gif 没有，它是一个占位符，当您右键单击占位符并选择您得到的查看图像时 您无权查看此页面

您无权使用您提供的凭据查看此目录或页面。

请尝试以下方法：

> 如果您认为您应该能够查看此目录或页面，请联系网站管理员。
> 
> 单击刷新按钮以使用不同的凭据重试。
> 
> HTTP 错误 401.1 - 未经授权：由于凭据无效，访问被拒绝。互联网信息服务 (IIS)

所以权限，我想。

在我处理它之前，我得到了类似“错误主机名”的东西。我终于弄清楚了所有这些（就它而言），现在我有一个纯粹的错误。

我需要这些东西来与匿名互联网用户合作。我创建了一个用户 internet_guest 并为其提供了访客和用户成员资格。但我不确定那是匿名互联网用户使用的用户。这可能是 gif 问题之后的问题的一部分，也就是说。

在我的一生中，我无法重置允许 gif 图像工作的权限，所以我用 jpg 版本替换了它们，它们现在可以工作了。但很明显，这台服务器在提供 gif 时存在问题，这是我需要解决的问题。

另一个问题是我有一个我想要浏览的目录，但它不是，尽管在旧服务器上它是。同一域上的另一个目录确实是可浏览的。如果我知道有什么区别，那该死的。权限在我看来是一样的。

据我所知，虽然该目录（我从旧计算机的磁盘中复制）有一些标有 VTI 的目录，但没有安装 FPSE，但我不知道这些目录是干什么用的。我将它们埋在另一个目录中只是为了摆脱，但我的研究表明它们可能是首页服务器扩展的一部分，在删除/安装 Windows 组件时未安装。我读到了 FPSE 可以更改权限而您无法更改权限的地方，这与我的症状有关。

任何人都可以推荐的故障排除步骤？

# ruby-on-rails - Rails：字体真棒不下载

> ID：14247811
> 
> 赞同：3
> 
> 时间：2013-01-09T22:41:02.210
> 
> 标签：ruby-on-rails, twitter-bootstrap, twitter-bootstrap-rails, font-awesome

我只是`bundle update`在我的项目中运行，并且 Font-Awesome 不再工作了。

我尝试了 font-awesome-sass-rails 和 twitter-bootstrap-rails （也包括 font awesome），并且我在它们中都有相同的行为：而不是图标，而是显示一个正方形。

我检查了编译的 CSS，并尝试下载字体：

```
@font-face {
  font-family: "FontAwesome";
  src: url(/assets/fontawesome-webfont.eot);
  src: url(/assets/fontawesome-webfont.eot?#iefix) format("embedded-opentype"), url(/assets/fontawesome-webfont.woff) format("woff"), url(/assets/fontawesome-webfont.ttf) format("truetype");
  font-weight: normal;
  font-style: normal;
} 
```

所以我尝试下载 myapp/assets/fontawesome-webfont.woff，它成功了。我只是不明白这里有什么问题。

我的`application.css.scss`：

```
*
 *= require_self
 *= require bootstrap-datepicker
 *= require_tree .
 */

@import "bootstrap";
body {
  padding-top: 60px;
}
@import "bootstrap-responsive";
@import "font-awesome";

@font-face {
  font-family: 'Pontano Sans';
  font-style: normal;
  font-weight: 400;
  src: local('Pontano Sans'), local('PontanoSans-Regular'), url(/assets/pontanosans.woff) format('woff');
}

*{
  font-family: 'Pontano Sans', sans-serif !important;
}

.table tbody tr:hover {
  cursor: pointer;
}

// rest of file... 
```

例如，pontano-sans 按预期工作。

我的 Gemfile（只是资产组）：

```
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'bootstrap-sass'
  gem 'font-awesome-sass-rails'
  gem 'libv8', :platforms => :ruby
  gem 'therubyracer', '>= 0.11.1', :require => 'v8', :platforms => :ruby
  gem 'uglifier', '>= 1.0.3'
  gem 'turbolinks'
  gem 'mousetrap-rails'
  gem 'jquery-turbolinks'
  gem 'spinjs-rails'
  gem 'ajaxspin'
  gem 'chosen-rails'
  gem 'jquery-rails'
  gem 'turbo-sprockets-rails3'
  gem 'bootstrap-datepicker-rails'
end 
```

我在这里做错了什么？

提前致谢。

* * *

编辑！

看起来像一个错误：[https ://github.com/littlebtc/font-awesome-sass-rails/issues/22](https://github.com/littlebtc/font-awesome-sass-rails/issues/22)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T23:45:52.077

我建议改变方法：在 下创建一个新目录`app/assets`，命名为`fonts`. 然后将字形图像复制到那里并将其包含到`application.rb`文件中的资产中，如下所示：

```
config.assets.paths << Rails.root.join("app", "assets", "fonts") 
```

之后，您应该将您的重命名`font-awesome.css`为`font-awesome.css.scss.erb`并更改其中的`@font-face`声明，如下所示：

```
@font-face {
  font-family: "FontAwesome";
  src: url('<%= asset_path('fontawesome-webfont.eot')%>');
  src: url('<%= asset_path('fontawesome-webfont.eot?#iefix')%>') format('eot'), url('<%=    asset_path('fontawesome-webfont.woff')%>') format('woff'), url('<%= asset_path('fontawesome-webfont.ttf')%>') format('truetype'), url('<%= asset_path('fontawesome-webfont.svg#FontAwesome')%>') format('svg');
 font-weight: normal;
 font-style: normal;
 } 
```

此解决方案包括删除 gem `'font-awesome-sass-rails'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:24:12.053

好吧，这是一个[错误](https://github.com/littlebtc/font-awesome-sass-rails/issues/22)。

现在我正在使用我自己的存储库分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T21:36:23.970

错误和[这里](https://github.com/rails/sass-rails/issues/139#issuecomment-14686906)是这个的原因。尝试使用

```
@import "font-awesome.css"; 
```

代替

```
@import "font-awesome"; 
```

# php - 限制 CPU 负载或设置进程优先级

> ID：14247816
> 
> 赞同：5
> 
> 时间：2013-01-09T22:41:14.873
> 
> 标签：php, cpu

这不是我第一次从主机收到过多的 CPU 负载警告。该代码只是一些带有 mysql 查询的随机 php 脚本，没什么特别的。（表格没什么特别的，最多几百行，如果需要，我总是限制它们。

我不介意它运行 0.15 秒而不是 0.05 秒，那么有没有办法可以控制进程优先级或限制 cpu 负载？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T22:43:13.553

如果这是长时间运行的守护进程或程序，请添加[`sleep()`](http://php.net/sleep)/ [`usleep()`](http://php.net/usleep)。**一个小的睡眠会大大减少你的 CPU 使用率**。

以下代码会消耗大量cpu

```
while(...){
//do stuff
} 
```

因为你没有给 CPU 空间来做其他任务。将其更改为

```
while(...){
   //do stuff
    sleep(1);
} 
```

这将大大降低您的 CPU 使用率。**CPU 的 1 秒是做其他任务的大量时间**。

要多睡`0.1`一秒 ( `0.15 - 0.05`)，请使用 usleep()。

```
usleep(100000); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T23:14:52.010

原则上，在 Unixish 系统（Linux、BSD 等）上，您可以使用该[`proc_nice()`](http://php.net/proc_nice)函数来更改进程优先级，如下所示：

```
proc_nice( 20 );  // now this process has very low priority 
```

但是，这里有几个主要的警告使其在实践中不太有用：

*   在 PHP 7.2.0 之前，Windows 根本不支持它。
*   您只能增加美观度，而不能减少它（甚至不能恢复到原来的值）。
*   这种友好一直持续到 PHP 进程退出，如果您将 PHP 作为 FastCGI 进程运行，或者更糟糕的是，作为 Web 服务器扩展运行，这可能是一个问题。
*   由于上述问题，`proc_nice()`即使在技术上支持它的系统上，也可能出于安全原因被禁用。

* * *

如果您的虚拟主机允许，您可以尝试做的是为长时间运行的任务[启动一个后台进程](https://stackoverflow.com/questions/45953/php-execute-a-background-process)，以便您的网络服务器可以在它运行时恢复为请求提供服务。您甚至可以使用[`nice`](http://linux.die.net/man/1/nice)shell 命令降低后台进程的优先级，如下所示：

```
exec( "nice nohup php -f slow_script.php < /dev/null > output.txt 2>&1 &" ); 
```

慢速脚本完成后，您可以通过下载`output.txt`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-30T14:07:35.880

除了 Ilmari Karonen 的回答：

如果您想增加或减少当前进程的友好度，请`renice`与当前进程 ID 一起使用：

```
function custom_proc_nice($priority) {

  exec("renice +$priority ".getmypid());

} 
```

如果你想防止 PHP 进程退出后继续保持友好，你需要一个关闭函数：

```
function exit_func(){

  // Restore priority
  proc_nice(0);
}

register_shutdown_function('exit_func'); 
```

**资源**

[http://php.net/manual/en/function.proc-nice.php](http://php.net/manual/en/function.proc-nice.php)

# javascript - 咕噜声 usemin 和 requirejs

> ID：14247817
> 
> 赞同：2
> 
> 时间：2013-01-09T22:41:17.337
> 
> 标签：javascript, requirejs, gruntjs

我使用 grunt usemin 插件来编译我的 requirejs 文件。在我的 html 页面中，我有以下代码段：

```
<!-- build:js ../dist/app.min.js -->
<script data-main="js/modules/app" src="../lib/js/requirejs/requirejs.js"></script>
<!-- endbuild --> 
```

这是我的咕噜声文件：

```
/*global module:false*/
module.exports = function(grunt) {

  // Project configuration.
  grunt.initConfig({
    pkg: '<json:package.json>',
    //run jshint, the busterjs tests and compile the handlbar templates every time a file changed
    watch: {
      files: ['Gruntfile.js', 'dev/js/*.js', 'test/**/*.js', 'dev/templates/*.hbs'],
      tasks: ['jshint', 'buster', 'handlebars']
    },
    //hint all the js files
    jshint: {
      files: ['Gruntfile.js', 'dev/js/*.js', 'test/*.js'],
      options: {
        camelcase: true,
        curly: true,
        immed: true,
        newcap: true,
        noarg: true,
        noempty: true,
        nonew: true,
        quotmark: 'single',
        trailing: true,
        maxdepth: 3,
        browser: true,
        asi: true,
        debug: true,
        eqnull: true
      }
    },
    handlebars: {
      compile: {
        files: {
          'dev/templates/templates.js': 'dev/templates/*.hbs'
        }
      }
    },
    //
    gruntContribCopy: {
      dist: {
        files: {
          'dist/index.html': 'dev/index.html'
        }
      }
    },
    //use the original index.html, as this the task which collect the files to compile
    // relative to the index.html
    'useminPrepare': {
      html: 'dev/index.html'
    },
    // use the copy in dist folder as this is where it replace the path to file relative to the passed file
    usemin: {
      html: ['dist/index.html'],
      css: ['dist/*.css']
    },
    //just uglify the concatenated the files
    uglify: {
      dist: {
        files: {
          'dist/prod.min.js': 'dist/prod.min.js',
          'dist/lib.min.js': 'dist/lib.min.js'
        }
      }
    },
    //create md5 file names for all minified sources
    md5: {
      compile: {
        files: {
          'dist': 'dist/*.min.*'
        },
        //overide the pathes in the index.html with the new md5 name
        options: {
          callback: function(newPath, oldPath, content) {
            var fs = require('fs')
            fs.unlink(oldPath);
            var file = fs.readFileSync('dist/index.html', 'utf8');
            var replacedData = file.replace(oldPath.replace('dist/', ''), newPath.replace('dist/', ''));
            fs.writeFileSync('dist/index.html', replacedData);

          }
        }
      }
    },
    //create a manifest file for all js and css files
    manifest: {
      generate: {
        src: [
          '*.js',
          '*.css'
        ],
        options: {
          basePath: 'dist/',
          network: ['*', 'http://*', 'https://*']
        }
      }
    },
    buster: {
      test: {
        config: 'test/buster.js'
      },
      server: {
        port: 1111
      }
    },
    bower: {
      install: {
        //just run 'grunt bower:install' and you'll see files from your Bower packages in lib directory
      }
    },
    connect: {
      server: {
        options: {
          port: 9001,
          keppalive: true
        }
      }
    },
    requirejs: {

    }
  });

  grunt.loadNpmTasks('grunt-buster');
  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.loadNpmTasks('grunt-contrib-jshint');
  grunt.loadNpmTasks('grunt-contrib-copy');
  grunt.renameTask('copy', 'gruntContribCopy');
  grunt.loadNpmTasks('grunt-usemin');
  grunt.loadNpmTasks('grunt-contrib-requirejs');
  grunt.loadNpmTasks('grunt-contrib-concat');
  grunt.loadNpmTasks('grunt-contrib-mincss');
  grunt.loadNpmTasks('grunt-contrib-uglify');
  grunt.loadNpmTasks('grunt-contrib-manifest');
  grunt.loadNpmTasks('grunt-md5');
  grunt.loadNpmTasks('grunt-contrib-handlebars');
  grunt.loadNpmTasks('grunt-contrib-connect');

  grunt.loadNpmTasks('grunt-bower-task');

  grunt.registerTask('dist',
    ['gruntContribCopy', 'useminPrepare', 'usemin', 'requirejs', 'concat', 'uglify', 'md5', 'manifest']);

}; 
```

当我运行该`dist`任务时，一切正常，但 requirejs 任务退出：

```
Running "requirejs:out" (requirejs) task
Error: Missing either a "name", "include" or "modules" option
    at Function.build.createConfig (/Users/akoeberle/grunt_example/node_modules/grunt-contrib-requirejs/node_modules/requirejs/bin/r.js:22690:19) 
```

但就在 usmin 任务记录此之前：

```
requirejs: {
  out: 'dist/app.min.js',
  name: 'dev/js/modules/app'
} 
```

因此，据我了解，usemin 任务正在`gruntConfig`使用我的 html 页面中构建块中的数据更新，它似乎找到并设置了 requirejs 的选项。那么这里出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T21:40:25.753

似乎是usemin 中的一个[错误](https://github.com/yeoman/grunt-usemin/issues/15)，因为当前版本不支持 requirejs 任务的多任务版本。

# javascript - Javascript 可交换计算字段

> ID：14247821
> 
> 赞同：0
> 
> 时间：2013-01-09T22:41:35.347
> 
> 标签：javascript, forms, field

我正在开发一个“计算器”（游戏），您可以在其中单击表单输入按钮，然后将数字自动添加到“总计”输入中。但是 - 我需要三个（或更多）“总”窗口。我想通过单选按钮交换您正在使用的“总窗口”。

我让它与一个“总窗口”一起工作 - 但我不确定如何交换我计算中使用的字段。

可能很简单 - 但我是 javascript 和语法的新手......

```
<script language="javascript" type="text/javascript">
/* Visit http://www.yaldex.com/ for full source code
and get more free JavaScript, CSS and DHTML scripts! */
<!-- Begin
function BetWIN(form) {
var MyField = eval(form.InputWIN.value)
}

function BetPLACE(form) {
var MyField = eval(form.InputPLACE.value)
}

function BetSHOW(form) {
var MyField = eval(form.InputSHOW.value)
}

function a_plus_b(form) {
a=eval(form.MyField.value)
b=eval(form.b.value)
z=a+b
form.MyField.value = z
}

function a_plus_c(form) {
a=eval(form.MyField.value)
c=eval(form.c.value)
z=a+c
form.MyField.value = z
}

function a_plus_d(form) {
a=eval(form.MyField.value)
d=eval(form.d.value)
z=a+d
form.MyField.value = z
}

function a_plus_e(form) {
a=eval(form.MyField.value)
e=eval(form.e.value)
z=a+e
form.MyField.value = z
}

function a_plus_f(form) {
a=eval(form.MyField.value)
f=eval(form.f.value)
z=a+f
form.MyField.value = z
}

function a_plus_g(form) {
a=eval(form.MyField.value)
g=eval(form.g.value)
z=a+g
form.MyField.value = z
}

function a_plus_h(form) {
a=eval(form.MyField.value)
h=eval(form.h.value)
z=a+h
form.MyField.value = z
}

// End -->
</script>

<FORM NAME="Calc">
<TABLE BORDER=4>
<TR>
<TD align="center"></TD>
<TD align="center"><input type="radio" name="BetSelector" value="InputWin"   onclick="BetWIN(this.form)" checked="checked" /> WIN<br /><INPUT TYPE="text"   NAME="InputWIN" Size="16" value="0" /></TD>
<TD align="center"><input type="radio" name="BetSelector" value="InputPLACE" onclick="BetPLACE(this.form)" /> PLACE<br /><INPUT TYPE="text" NAME="InputPLACE" Size="16" value="0" /></TD>
<TD align="center"><input type="radio" name="BetSelector" value="InputSHOW"  onclick="BetSHOW(this.form)" /> SHOW<br /><INPUT TYPE="text"  NAME="InputSHOW" Size="16" value="0" /></TD>
</TR>

<tr>
    <td colspan="4">
        <INPUT TYPE="button" NAME="b" VALUE="1"     OnClick="a_plus_b(this.form)" class="ChipB">
        <INPUT TYPE="button" NAME="c" VALUE="5"     OnCLick="a_plus_c(this.form)" class="ChipC">
        <INPUT TYPE="button" NAME="d" VALUE="25"    OnClick="a_plus_d(this.form)" class="ChipD">
        <INPUT TYPE="button" NAME="e" VALUE="100"   OnClick="a_plus_e(this.form)" class="ChipE">
        <INPUT TYPE="button" NAME="f" VALUE="500"   OnCLick="a_plus_f(this.form)" class="ChipF">
        <INPUT TYPE="button" NAME="g" VALUE="1000"  OnClick="a_plus_g(this.form)" class="ChipG">
        <INPUT TYPE="button" NAME="h" VALUE="5000"  OnClick="a_plus_h(this.form)" class="ChipH">
    </td>
</tr>
</TABLE>
</FORM> 
```

我开始了一个 jsfiddle：http: [//jsfiddle.net/bigfatdesigns/eSAPk/](http://jsfiddle.net/bigfatdesigns/eSAPk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:16:06.937

旁注：如果您使用 jQuery，它将简化字段之间的交互

要指定要使用的总计，您只需将以下行添加到 a_plus_X 函数中以指定要使用的总计。

使用 jQuery 调用的代码

```
var TotalField = "#total_" + $(':radio[name="BetSelector"]:checked').val();

$(TotalField).val() = calculation(); 
```

# wcf - 将 multipleSiteBindingsEnabled 设置为 true 时如何设置 WCF 应用程序

> ID：14247822
> 
> 赞同：0
> 
> 时间：2013-01-09T22:41:37.027
> 
> 标签：wcf, servicebus, webhttprelaybinding

我正在尝试制作一个侦听服务总线的 WCF 应用程序。以下用于在 Web.config 中定义服务的代码段在设置为时`multipleSiteBindingsEnabled`有效`false`：

```
 <service behaviorConfiguration="MyServiceTypeBehavior"
    name="WcfService3.Service1">
    <endpoint address="https://namespace.servicebus.windows.net/WebHttpService"
    behaviorConfiguration="sharedSecretClientCredentials"
    binding="webHttpRelayBinding"
    bindingConfiguration="WebHttpRelayEndpointConfig"
    name="RelayEndpoint"
    contract="WcfService3.IService1"/>
  </service> 
```

当`multipleSiteBindingsEnabled`设置为 时`true`，我将配置更改为以下内容：

```
 <service behaviorConfiguration="MyServiceTypeBehavior"
    name="WcfService3.Service1">
    <host>
      <baseAddresses>
        <add baseAddress="https://namespace.servicebus.windows.net/" />
      </baseAddresses>
    </host>
    <endpoint address="WebHttpService"
    behaviorConfiguration="sharedSecretClientCredentials"
    binding="webHttpRelayBinding"
    bindingConfiguration="WebHttpRelayEndpointConfig"
    name="RelayEndpoint"
    contract="WcfService3.IService1"/>
  </service> 
```

这会导致以下错误： `Could not find a base address that matches scheme https for the endpoint with binding WebHttpRelayBinding. Registered base address schemes are [http].`

为了将 https 注册为方案，我还需要为该服务声明什么吗？请注意，我确实将绑定的安全模式设置为传输。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:35:31.720

将 multipleSiteBindingsEnabled 设置为 true 将与使用中继端点不兼容。这是因为中继端点需要端点配置（服务总线中继端点）上的绝对地址，而 multipleSiteBindingsEnabled 需要具有相对地址的端点才能工作。

您想通过将 multipleSiteBindingsEnabled 设置为 true 来完成什么？

# android - 我的 Android OpenGL 着色器代码有什么问题

> ID：14247824
> 
> 赞同：0
> 
> 时间：2013-01-09T22:41:46.930
> 
> 标签：android, opengl-es, shader

当我添加这行代码时，我的程序崩溃了：

```
uniform short colors[262144][3]; 
```

我在这里做错了多少事情？

1.  你可以在着色器中使用短裤吗？
2.  你可以在着色器中使用二维数组吗？
3.  数组太大了吗？
4.  我的声明语法不正确吗？

我正在尝试将这样的数组传递到每个像素片段着色器中，但现在我只是看看这条线是否有效并且我的程序崩溃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:10:53.217

您不能在 GLSL 中使用多维数组，也不能使用短裤。

您可以像这样模仿多维数组的功能：

```
uniform float colors[50*3];

// Then access it like this

float t = colors[row * 50 + column]; 
```

我想你也想发送太多数据，我个人会使用纹理或缓冲区来传递那么多数据。

这是一个很好的答案，它解释了这些方法[https://stackoverflow.com/a/7958008/139927](https://stackoverflow.com/a/7958008/139927)

# activemq - 我可以直接在 ActiveMQ 实例上托管 Camel 上下文吗？

> ID：14247829
> 
> 赞同：0
> 
> 时间：2013-01-09T22:42:06.780
> 
> 标签：activemq

换句话说，ActiveMQ 是否内置了 Camel，我可以直接在 ActiveMQ 进程上配置路由和处理程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:21:24.847

是的，请参阅：[这个易于查找的文档页面（Google 是您的朋友）。](http://activemq.apache.org/enterprise-integration-patterns.html)

# cloudbees - 软件在 mvn deploy 期间导致连接中止

> ID：14247831
> 
> 赞同：0
> 
> 时间：2013-01-09T22:42:12.863
> 
> 标签：cloudbees

尝试在我的 cloudbees 存储库上部署时出现此错误。

```
[INFO] --- maven-deploy-plugin:2.5:deploy (default-deploy) @ my-portal ---
Downloading: dav:https://repository-myproject.forge.cloudbees.com/snapshot/com/myproject/my-portal/0.0.3-SNAPSHOT/maven-metadata.xml
9 janv. 2013 23:05:13 org.apache.commons.httpclient.auth.AuthChallengeProcessor selectAuthScheme
INFO: basic authentication scheme selected
Uploading: https://repository-myproject.forge.cloudbees.com/snapshot/com/myproject/my-portal/0.0.3-SNAPSHOT/myproject-portal-0.0.3-20130109.220513-1.war
9 janv. 2013 23:05:14 org.apache.commons.httpclient.auth.AuthChallengeProcessor selectAuthScheme
INFO: basic authentication scheme selected
9 janv. 2013 23:06:54 org.apache.commons.httpclient.HttpMethodDirector executeWithRetry
INFO: I/O exception (java.net.SocketException) caught when processing request: Software caused connection abort: socket write error 
```

该文件是一个大约 20MB 的战争文件。如果我从工作中的笔记本电脑、家中的计算机通过 maven deploy 命令甚至使用cyberduck 进行部署，也会发生同样的错误。有时会在上传 1.5MB 或 5MB 后发生，但并不总是相同。

文件大小有限制吗？我设置了欧洲 URL，但不知道它是否重要。有什么提示吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:31:00.870

这个错误不是文件大小限制引起的，而是forge上的错误。如果再次发生这种情况，请联系 support@cloudbees.com。

不知道您所说的“欧洲网址”是什么意思

# php - php，相同的数据，相同的计算，不同的结果

> ID：14247840
> 
> 赞同：0
> 
> 时间：2013-01-09T22:43:00.040
> 
> 标签：php

我有以下代码。最后我把我在服务器上的结果放在评论中。希望有人可以解释为什么结果不同，尽管计算是相同的。

```
<?php 
date_default_timezone_set('UTC'); 

function formatHourToTime($input){ 
    if (strpos($input, '.') !== false){ 
            $array = explode(".",$input); 
    } 
    elseif (strpos($input, ':') !== false){ 
            $array = explode(":",$input); 
    } 
    elseif (strpos($input, ',') !== false){ 
            $array = explode(",",$input); 
    } 
    elseif ($input >= '0' & $input < '24'){ 
            $array = array($input); 
    } 
    else { 
            $time = false; 
            exit(); 
    } 
    $time = $array[0]*3600+$array[1]*60+$array[2]; 
    return $time; 
} 

$matin_d = 0; //midnight timestamp 0.00 
$matin_f = 10800; //ts de 3h00 
$soir_d = 79200; //ts de 22h00 
$soir_f = 82799; //ts de 23h59:59 

function nightwork($start, $end){ 

    if ($start < $matin_f && $end > $soir_d) $totalheures = ($matin_f - $start)/2 + ($end - $soir_d)/2+100000; 
    elseif ($start < $matin_f && $end < $matin_f) $totalheures = ($end - $start)/2+200000; 
    elseif ($start >= $soir_d && $end > $soir_d) $totalheures = ($end - $start)/2+300000; 
    elseif ($start < $matin_f) $totalheures = ($matin_f-$start)/2+400000; 
    elseif ($end>$soir_d) $totalheures = ($end-$soir_d)/2+500000; 
    else $totalheures = 0+600000;  

    return $totalheures; 
} 

$start = formatHourToTime('07:39:00')*1; 

$end = formatHourToTime('08:00:00')*1; 
$shiftnw = nightwork($start, $end); 
if($start >= $soir_d && $end > $soir_f) $bool = 'true'; 
else $bool = 'false'; 
//même code que la fonction nightwork 
    if ($start < $matin_f && $end > $soir_d) $totalheures = ($matin_f - $start)/2 + ($end - $soir_d)/2+100000; 
    elseif ($start < $matin_f && $end < $matin_f) $totalheures = ($end - $start)/2+200000; 
    elseif ($start >= $soir_d && $end > $soir_d) $totalheures = ($end - $start)/2+300000; 
    elseif ($start < $matin_f) $totalheures = ($matin_f-$start)/2+400000; 
    elseif ($end>$soir_d) $totalheures = ($end-$soir_d)/2+500000; 
    else $totalheures = 0+600000;  

echo $start.' '.$end.'<br>'; 
echo $totalheures. ' ' .$shiftnw;  
//$totalheures is calculated following the script
//while $shiftnw is calculated by calling the function having the same lines 
// prints : 
// 27540 28800 
// 600000 300630 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:49:12.487

看来问题是在`nightwork()`函数中您无权访问这些变量：

```
$matin_d = 0; //midnight timestamp 0.00 
$matin_f = 10800; //ts de 3h00 
$soir_d = 79200; //ts de 22h00 
$soir_f = 82799; //ts de 23h59:59 
```

而您确实可以在脚本末尾计算的全局范围内访问它们。

您还需要将这些值放在函数中，将它们作为参数传递给函数，将它们声明为`global`函数内部，或者将它们定义为常量，以便它们可用于脚本的所有区域，而不管范围如何。

# jquery - jQuery：仅在图像存在时插入图像

> ID：14247842
> 
> 赞同：0
> 
> 时间：2013-01-09T22:43:13.350
> 
> 标签：jquery, image, url, file-exists

我正在使用 jQuery 将图像和文本块插入到我的文档中，但我只想包含实际存在的图像（图像路径是一个变量，`img_url`可能会或可能不会引用现有图像）。

这是我的代码的简化版本：

```
var text = data.html,
    image = '<img class="myimage" src="' + img_url + '" />';

var imageTest = $("<img>");
    imageTest.attr('src', img_url).load(function() {
        alert("image exists");
    }).error(function() {
        alert("image doesn't exist");
        imageTest.remove();
    });

if (imageTest.length) {
    $("#content").html(image + text);   
} else {
    $("#content").html(text);
} 
```

虽然我确实根据图像是否存在得到了正确的警报，但`imageTest.length`总是评估为`1`，所以我仍然最终将图像始终插入到`#content`中，即使它已损坏。

我哪里错了？`imageTest.remove()`如果加载失败，应该删除图像元素，因此它的长度应该是`0`，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:50:03.110

你可以这样做

```
var imageTest = $("<img>");
imageTest.attr('src', img_url).load(function() {
     alert("image exists");
     $("#content").html(image + text); // <-- move it here - if loaded successfully add it
}).error(function() {
     alert("image doesn't exist");
     imageTest.remove(); // <-- don't need this since it's not even in the dom
     $("#content").html(text); // <-- move it here - if failed then just add text
}); 
```

虽然我注意到您可能会得到 [Object object].. 您可以使用 append 代替，否则您必须将对象转换为 String

```
var text = "test text";
var imageTest = $("<img>");
imageTest.attr('src', 'http://dummyimage.com/300').load(function () {
  alert("image exists");
  $("#content").empty().append(imageTest).append(text); // <-- move it here - if loaded successfully add it
}).error(function () {
  alert("image doesn't exist");
  imageTest.remove(); // <-- don't need this since it's not even in the dom
  $("#content").html(text); // <-- move it here - if failed then just add text
}); 
```

[小提琴](http://jsfiddle.net/wirey00/4Ef2z/)

或者将其转换为字符串

```
var text = "test text";
var imageTest = $("<img>");
imageTest.attr('src', 'http://dummyimage.com/300').load(function () {
  alert("image exists");
  var img = $('<div/>').append(imageTest.clone()).html(); // get it as a String
  $("#content").html(img + text); // <-- move it here - if loaded successfully add it
}).error(function () {
  alert("image doesn't exist");
  imageTest.remove(); // <-- don't need this since it's not even in the dom
  $("#content").html(text); // <-- move it here - if failed then just add text
}); 
```

[小提琴](http://jsfiddle.net/wirey00/ZgzPc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:52:12.473

根据 jquery doumentation ， .remove() 仅将匹配的元素从 dom 中删除，但对象本身仍然存在。你可以重新附加它

```
$('#example').append(imageTest); 
```

你必须重置 imageTest

```
imageTest = []; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T22:47:22.520

它始终存在的原因是，如果图像不驻留在服务器上，它将返回 404，实际上 404 确实存在。JQuery 无法检测到服务器端的东西。您应该使用 PHP 或您使用的任何服务器端语言来检测它是否存在。

# ravendb - 无法对本地网络上的 RavenDB 服务器进行身份验证

> ID：14247843
> 
> 赞同：2
> 
> 时间：2013-01-09T22:43:14.513
> 
> 标签：ravendb

我正在尝试从**Server1连接到****Server2**上的 RavenDB 。

 **在**Server2**上，我创建了一个新用户“RavenDBUser”，并授予他们对 RavenDB 安装中数据库目录的读/写访问权限。

我在端口 8080 上将 RavenDB 作为 Windows 服务运行。

在**Server1**上，我已将应用程序的连接字符串设置为：

```
Url=http://server2:8080;Database=MyDatabase;Domain=server2;user=RavenDBUser;password=mypassword; 
```

当我运行我的应用程序时，我得到一个 403，禁止错误。

但是，我*可以*从**Server1**连接到 RavenDB Studio，并在以“RavenDBUser”身份验证后查看“MyDatabase”。

错误详情如下：

> [WebException：远程服务器返回错误：(403) Forbidden.] System.Net.HttpWebRequest.GetResponse() +8522396
> Raven.Client.Connection.HttpJsonRequest.ReadJsonInternal(Func 2 operation, String operationUrl, Boolean AvoidThrowing, T& result) +194 Raven.Client.Connection.ReplicationInformer.ExecuteWithReplication（String 方法，String primaryUrl，Int32 currentRequest，Int32 currentReadStripingBase，Func 2 操作）+138 Raven.Client.Indexes.AbstractIndexCreationTask.Execute（IDatabaseCommands databaseCommands，DocumentConvention documentConvention）+86 Raven。 Client.Indexes.IndexCreation.CreateIndexes（ExportProvider catalogToGetnIndexingTasksFrom，IDatabaseCommands databaseCommands，DocumentConvention 约定）+108`1 getResponse) +805
> Raven.Client.Connection.HttpJsonRequest.ReadResponseJson() +587
> Raven.Client.Connection.ServerClient.DirectPutIndex(String name, String operationUrl, Boolean overwrite, IndexDefinition definition) +774 Raven.Client.Connection.<>c__DisplayClass50.<PutIndex>b__4f(String operationUrl) +36
> Raven.Client.Connection.ReplicationInformer.TryOperation(Func``2 operation) +526
> Raven.Client.Connection.ServerClient.ExecuteWithReplication(String method, Func`
> 
> MyApp.CMSRegistry.InitializeStore() +380 MyApp.CMSRegistry..ctor() +66

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:23:16.960

似乎缺少的部分是您必须在 RavenDB 系统数据库配置中显式启用 Windows 用户/组。

可以在页面下方约 3/4处的[http://ravendb.net/docs/studio/multi-database](http://ravendb.net/docs/studio/multi-database)找到不太容易找到的文档。**

# jquery - 使用带有哈希和参数的 url 导航到使用 jquery 的页面

> ID：14247848
> 
> 赞同：1
> 
> 时间：2013-01-09T22:43:48.670
> 
> 标签：jquery, url, parameters, hashtag

我正在使用 jquerymobile。

在页面内部，可以称之为`page1.aspx`我有不同的部分，如页眉、内容、页脚和导航

因此，如果我想打开该部分，则在其他页面中导航一些 href`page2.aspx`必须看起来像`href="page1.aspx#navigate"`

但是我怎么能做同样的事情但添加参数呢？像`href="page1.aspx#navigate?param1=2&param2=3`，这可能还是语法如何？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T22:47:10.330

查询参数应位于 URL 中的主题标签之前，否则查询参数将被计为主题标签的一部分。这是你想要的：

```
href="page1.aspx?param1=2&param2=3#navigate" 
```

作为参考，这里是规范：

[https://www.rfc-editor.org/rfc/rfc3986](https://www.rfc-editor.org/rfc/rfc3986)

请参阅第 #4.2 节，它讨论了如何构建相对链接。

# powershell - 调用 powershell.exe 给出参数设置错误

> ID：14247854
> 
> 赞同：1
> 
> 时间：2013-01-09T22:44:33.303
> 
> 标签：powershell, command-prompt

我正在尝试使用 CMD.exe 调用提升的 powershell 脚本来执行任务。当我尝试添加开关以便捕获错误时

Start-Process：无法使用指定的名称参数解析参数集。InvalidArgument AmbiguousParameterSet

我知道 -RedirectStandardError 是有效的，那么这里发生了什么？

```
set Command1='C:\users\administrator\desktop\DoStuff.ps1'
set Output='C:\Users\nadministrator\desktop\output.txt'
powershell.exe -NoProfile "start-process powershell.exe -wait -RedirectStandardError %Output% -argumentlist %Command1% -verb RunAs" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T23:24:42.197

当您遇到参数集问题时，运行此命令以查看哪些参数在哪些参数集中可用：

```
C:\PS> Get-Command Start-Process -Syntax

Start-Process [-FilePath] <string> [[-ArgumentList] <string[]>] [-Credential
<pscredential>] [-WorkingDirectory <string>] [-LoadUserProfile] [-NoNewWindow]
[-PassThru] [-RedirectStandardError <string>] [-RedirectStandardInput <string>]
[-RedirectStandardOutput <string>] [-Wait] [-WindowStyle <ProcessWindowStyle>]
[-UseNewEnvironment] [<CommonParameters>]

Start-Process [-FilePath] <string> [[-ArgumentList] <string[]>]
[-WorkingDirectory <string>] [-PassThru] [-Verb <string>] [-Wait] [-WindowStyle
<ProcessWindowStyle>] [<CommonParameters>] 
```

从这里你可以看到 -Verb 和 -RedirectStandardOutput 不在同一个参数集中，这意味着它们的使用是互斥的。

# javascript - Safari 和 iPhone 和 HTML Select 和 jQuery Mobile -- 从 javascript 中关闭“自定义选择控件”？

> ID：14247859
> 
> 赞同：1
> 
> 时间：2013-01-09T22:44:43.600
> 
> 标签：javascript, iphone, html, jquery-mobile, mobile-safari

[Safari 开发者库](https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html#//apple_ref/doc/uid/TP40006482-SW17)说：

> 如果您在网页中使用 select HTML 元素，iOS 会显示一个自定义选择控件，该控件已针对使用手指作为输入设备选择列表中的项目进行了优化。

这就是我要询问的“自定义选择控件”（我将其称为“本机”控件），并且在引用的页面中有一张很好的图片，包括“上一个”、“下一个”和“完成”纽扣。

我有一个选择列表：

```
<select id="selected_item_selector">
<option value="1">first item</option>
<option value="2">second item</option>
<option value="#">Add a new item</option>
<select> 
```

和 javascript 说：

```
$(function() {
    var sel = $('#selected_item_selector');
    sel.change(function(e) {
        var selectedItemForm = $('#select_item_form'),
            id = $(this).val(),
            href = '/add-item.html';
        if(id == '#') {
            document.location.href = href;

        }
        /* do something with the id */
    });
    if(sel.val() == '#') {
        /* never have the "add" option selected */
        sel.val(0);
    }
}); 
```

所以一切都按预期工作，代码没有问题！！！！

这是问题所在：当浏览器导航到新页面时，“自定义选择控件”保持打开状态，提示与当前浏览器中的页面无关的操作。

这是我想要的解决方案：告诉我如何在卸载页面或加载新页面时从我的 javascript 代码中关闭“自定义选择控件”（又名“本机”控件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:16:50.770

从`select`应该做的伎俩中移除焦点：

`sel.blur();`

# css - 我的网站有 Firefox 不支持/识别的字体

> ID：14247860
> 
> 赞同：0
> 
> 时间：2013-01-09T22:44:44.977
> 
> 标签：css, fonts, cross-browser

我的网站没有显示适当的字体 PT Sans.ttc。我检查了其他浏览器，它工作正常。

www.farmap-ux.com。下面是CSS代码。

```
@font-face
{
font-family: PT Sans;
font-family: font-family: 'PT Sans', sans-serif;
src: url("http://fonts.googleapis.com/css?family=PT+Sans")
} 
```

所以它适用于我所说的一切（Chrome，Safari，甚至 Opera！）有什么想法吗？我试图找到字体的 .woff 文件，但我认为它不在我的字体书中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T22:50:02.673

也许是因为您的`@font-face`声明根本无效。它应该是这样的：

```
@font-face
{
    font-family: 'PT Sans';
    font-style: normal;
    font-weight: 400;
    src: local('PT Sans'), local('PTSans-Regular'), url(http://themes.googleusercontent.com/static/fonts/ptsans/v4/LKf8nhXsWg5ybwEGXk8UBQ.woff) format('woff');
} 
```

不过最好还是使用google提供的CSS文件：

```
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans"> 
```

如果您想坚持使用 CSS 导入，请使用

```
@import url(http://fonts.googleapis.com/css?family=PT+Sans); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:49:45.777

你真的应该检查你的CSS！语法离正确还有几英里远。

另外，`http://fonts.googleapis.com/css?family=PT+Sans`已经是一个css文件了！您应该做的是使用标签将其直接放入`<head>`您的 html 中。`link`

看一下这个例子：[http](http://www.w3schools.com/tags/tag_link.asp) ://www.w3schools.com/tags/tag_link.asp ，或者只是将以下内容添加到您的 html 文件中，如前所述。

```
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=PT+Sans"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:55:51.597

按照[Google Webfonts](http://www.google.com/webfonts#UsePlace%3ause/Collection%3aPT+Sans)的指示应该可以解决您的问题。

首先，确保包含引用字体文件所需的 Google CSS。`LINK`您可以选择在 HTML中包含标签、`@import`在 CSS 中包含指令或某些 Javascript。我推荐使用该`LINK`标签以获得最大的浏览器兼容性：

```
<link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'> 
```

将此 CSS 添加到您的网站时，Google 会自动确定您的浏览器使用的正确字体类型。并非所有浏览器都使用 WOFF 文件。旧版本的 IE 使用 EOT 文件，一些浏览器更喜欢 SVG 或 TTF。Google 能够嗅探浏览器类型并根据需要修改包含的 CSS。

包含 Google 的 CSS 后，您只需在 CSS 中引用您希望字体出现的字体系列。

```
font-family: 'PT Sans', sans-serif; 
```

这是唯一需要的 CSS。删除您链接的所有其他 CSS……如其他答案中所述，您的 CSS 有一些错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-09T22:50:32.200

尝试：

```
@font-face {
  font-family: 'PT Sans';
  font-weight: normal;
  src: url("http://fonts.googleapis.com/css?family=PT+Sans");
} 
```

# ruby-on-rails - SAX 用 Nokogiri HTML 解析器解析一堆死去的总统？

> ID：14247861
> 
> 赞同：0
> 
> 时间：2013-01-09T22:44:47.800
> 
> 标签：ruby-on-rails, ruby, nokogiri

我想在“美国总统[名单](http://en.wikipedia.org/wiki/List_of_Presidents_of_the_United_States)”维基页面上解析美国总统。

我可以用一堆 XPath 和循环来做到这一点。但是 SAx 解析是如此之快，我想学习如何实现它。

Nokogiri 文档给了我一个 HTML SAX 解析示例：

```
class MyDoc < Nokogiri::XML::SAX::Document
 def start_element name, attributes = []
   puts "found a #{name}"
 end
end

parser = Nokogiri::HTML::SAX::Parser.new(MyDoc.new)
parser.parse(File.read(ARGV[0], 'rb')) 
```

但是我使用哪些方法来定义我想要抓取的所有 HTML 元素及其内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T01:04:00.163

使用 SAX，您必须在解析器中为每个“事件”定义回调方法。您必须自己跟踪状态。它非常粗糙。例如，要从页面获取总统姓名，您可以这样做：

```
class MyDoc < Nokogiri::XML::SAX::Document
  def start_element name, attributes = []
    if name == "li"
      @inside_li = true
    end
  end

  def characters(chars)
    if @inside_li
     puts "found an <li> containing the string '#{chars}'"
    end
  end

  def end_element name
    if name == "li"
      puts "ending #{name}"
      @inside_li = false
    end
  end
end 
```

以上可以被认为是陈述的粗略等价物：

```
doc.xpath('//li').map(&:text) 
```

从以下输出开始：

```
ending li
found an <li> containing the string 'Grover Cleveland'
ending li
found an <li> containing the string 'William McKinley'
ending li
found an <li> containing the string 'Theodore Roosevelt' 
```

到目前为止一切顺利，但是，它也输出了很多杂乱无章的内容，以：

```
found an <li> containing the string 'Disclaimers'
ending li
found an <li> containing the string 'Mobile view'
ending li
found an <li> containing the string '
                        '
found an <li> containing the string '
                    '
ending li
found an <li> containing the string '
                        '
found an <li> containing the string '
                    '
ending li 
```

因此，为了使这一点更精确并且不获取您不关心的元素，您必须通过向,等添加更多子句来`li`跟踪您所在的容器元素。如果您有相同的嵌套元素名称，您必须自己跟踪计数器，或者实现一个堆栈来推送和弹出您看到的元素。它变得非常混乱非常快。`if``start_element``characters`

SAX 最适合您不关心 DOM 的过滤器，您只需进行一些基本的转换。

相反，请考虑使用单个 XPath 语句，例如

```
doc.xpath("//table[contains(.//div, 'Presidents of the United States')]//ol/li").map(&:text) 
```

这表示“查找包含带有“美国总统”字样的 div 的表，并从其中的所有有序列表项中返回文本”。这可以在 SAX 中完成，但是会产生很多混乱的代码。

上述 XPath 的输出：

```
["George Washington", "John Adams", "Thomas Jefferson", "James Madison", "James Monroe", "John Quincy Adams", "Andrew Jackson", "Martin Van Buren", "William Henry Harrison", "John Tyler", "James K. Polk", "Zachary Taylor", "Millard Fillmore", "Franklin Pierce", "James Buchanan", "Abraham Lincoln", "Andrew Johnson", "Ulysses S. Grant", "Rutherford B. Hayes", "James A. Garfield", "Chester A. Arthur", "Grover Cleveland", "Benjamin Harrison", "Grover Cleveland", "William McKinley", "Theodore Roosevelt", "William Howard Taft", "Woodrow Wilson", "Warren G. Harding", "Calvin Coolidge", "Herbert Hoover", "Franklin D. Roosevelt", "Harry S. Truman", "Dwight D. Eisenhower", "John F. Kennedy", "Lyndon B. Johnson", "Richard Nixon", "Gerald Ford", "Jimmy Carter", "Ronald Reagan", "George H. W. Bush", "Bill Clinton", "George W. Bush", "Barack Obama"] 
```

# ruby-on-rails-3 - 在 rails 3 中只获取一个数据库列

> ID：14247863
> 
> 赞同：0
> 
> 时间：2013-01-09T22:44:47.860
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, typeahead

如何获取数据库表中仅一列的数据，例如标题？我想在末尾有一个字符串数组，用于引导输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:40:22.193

为此有一种特殊的方法：[采摘](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pluck)

```
Post.pluck :title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:02:52.917

如果您的数据库模型称为“Post”并且列是“title”，那么

```
Post.select(:title).all.map(&:title) 
```

将为您提供所有标题的数组。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T22:55:41.290

这应该有效：

```
def get_titles
  Yourcolumn.all.each do |i|
    @titles += i.title
  end
  return @titles
end 
```

# sql-server - SQL 将列名和数据类型与列值结合起来

> ID：14247864
> 
> 赞同：4
> 
> 时间：2013-01-09T22:44:52.490
> 
> 标签：sql-server, tsql, sql-server-2012, unpivot

我正在为我的 DBMS 使用 Sql Server 2012。

在我的数据库中，我有一个与一系列目录表相关的产品表。这些目录表代表各种产品类别。这个想法是，虽然所有产品都有某些共同的属性（我们的内部标识符、供应商、成本等），但产品的细节会有所不同（家具的描述方式与描述数字产品的方式不同） .

此外，每个产品都有一个父实体。父母可能有多个孩子（或在这种情况下的产品）。

我的任务是为给定的父 ID 列表选择产品和相关信息，并将该信息填充到 XML 文档中。

我目前正在使用的表是：

*   产品
*   产品_数码
*   产品中心_家具

Product 与 Product_Id 上的 PRODUCT_DIGITAL 具有 PK/FK 关系。PRODUCT 与 PRODUCT_FURNITURE 存在相同类型的关系。

如果产品看起来像这样：

```
PRODUCT_ID -- PRODUCT_CATEGORY -- PARENT_ID -- PARENT_TYPE -- DELIVERY_IN_DAYS
100           DIG                 1            1              7
101           DIG                 1            1              8
102           DIG                 1            1              1
103           DIG                 2            1              2
104           DIG                 2            1              1 
```

PRODUCT_DIGITAL 看起来像这样：

```
PRODUCT_ID -- PRODUCT_TYPE -- PRODUCT_NAME -- PRODUCT_MNEMONIC
100           A               IMG1            IMAWTRFL
101           B               SND1            SNDENGRV
102           B               SND2            SNDHRSLF
103           A               IMG2            IMGNBRTO
104           B               SND3            SNDGTWNE 
```

最后，我想要如下所示的结果集：

```
PRODUCT_CATEGORY -- PRODUCT_ID -- PRODUCT_TYPE -- PARENT_ID -- DELIVERY_IN_DAYS -- PROD_EXTENSION_NAME -- PROD_EXTENSION_TYPE -- PROD_EXTENSION_VALUE
DIG                 100           A               1            7                   PRODUCT_NAME           STRING                 IMG1
DIG                 100           A               1            7                   PRODUCT_MNEMONIC       STRING                 IMAWTRFL
DIG                 101           B               1            8                   PRODUCT_NAME           STRING                 SND1
DIG                 101           B               1            8                   PRODUCT_MNEMONIC       STRING                 SNDENGRV
DIG                 102           B               1            1                   PRODUCT_NAME           STRING                 SND2
DIG                 102           B               1            1                   PRODUCT_MNEMONIC       STRING                 SNDHRSLF
DIG                 103           A               2            2                   PRODUCT_NAME           STRING                 IMG2
DIG                 103           A               2            2                   PRODUCT_MNEMONIC       STRING                 IMGNBRTO
DIG                 104           B               2            1                   PRODUCT_NAME           STRING                 SND3
DIG                 104           B               2            1                   PRODUCT_MNEMONIC       STRING                 SNDGTWNE 
```

我最初的搜索将我带到了 UNPIVOT - 但到目前为止，我还无法理解它。我最终做的是创建一个临时表并在通行证中更新它，然后重新加入产品表以进行最终选择：

```
create table #tbl(product_id int, prod_extension_name varchar(100), prod_extension_type varchar(100), prod_extension_value varchar(1000))

insert into #tbl
select p.product_id, c.column_name, 
case c.data_type
when 'varchar' then 'string'
else data_type end as data_type
, null
from dbo.product p, information_schema.columns c
where c.table_name = 'PRODUCT_DIGITAL'
and c.column_name in ('PRODUCT_NAME','PRODUCT_MNEMONIC')

update #tbl
set prod_extension_value = p.product_name
from dbo.product p
where #tbl.product_id = p.product_id
and #tbl.colname = 'PRODUCT_NAME'

update #tbl
set prod_extension_value = p.product_mnemonic
from dbo.product p
where #tbl.product_id = p.product_id
and #tbl.colname = 'PRODUCT_MNEMONIC'

select p.product_category, p.product_id, pd.product_category, #tbl.prod_extension_name, #tbl.prod_extension_type, #tbl.prod_extension_value
from dbo.product p inner join dbo.product_digital pd on p.product_id = pd.product_id
inner join #tbl on p.product_id = #tbl.product_id
order by product_id 
```

有人可以指出一个更好的方法来做到这一点吗？似乎我应该能够更快地做到这一点，而不必进行多次更新等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T23:58:28.723

我认为这会做你想要的。这实现了`UNPIVOT`函数然后从`information_schema.columns`视图中获取列信息得到结果：

```
select product_id,
  product_category,
  parent_id,
  delivery_in_days,
  PROD_EXTENSION_NAME,
  case when c.data_type = 'varchar' 
      then 'STRING' else null end as PROD_EXTENSION_TYPE,
  PROD_EXTENSION_VALUE
from
(
  select 
    p.product_id,
    p.product_category,
    p.parent_id,
    p.delivery_in_days,
    PRODUCT_NAME,
    PRODUCT_MNEMONIC
  from product p
  left join product_digital pd
    on p.product_id = pd.product_id
) src
unpivot
(
  PROD_EXTENSION_VALUE
  for PROD_EXTENSION_NAME in (PRODUCT_NAME, PRODUCT_MNEMONIC)
) up
inner join 
(
  select c.column_name, c.data_type
    from information_schema.columns c
    where c.table_name = 'PRODUCT_DIGITAL'
      and c.column_name in ('PRODUCT_NAME','PRODUCT_MNEMONIC')
) c
  on up.PROD_EXTENSION_NAME = c.column_name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/61e51/20)

结果是：

```
| PRODUCT_ID | PRODUCT_CATEGORY | PARENT_ID | DELIVERY_IN_DAYS | PROD_EXTENSION_NAME | PROD_EXTENSION_TYPE | PROD_EXTENSION_VALUE |
-----------------------------------------------------------------------------------------------------------------------------------
|        100 |              DIG |         1 |                7 |        PRODUCT_NAME |              STRING |                 IMG1 |
|        100 |              DIG |         1 |                7 |    PRODUCT_MNEMONIC |              STRING |             IMAWTRFL |
|        101 |              DIG |         1 |                8 |        PRODUCT_NAME |              STRING |                 SND1 |
|        101 |              DIG |         1 |                8 |    PRODUCT_MNEMONIC |              STRING |             SNDENGRV |
|        102 |              DIG |         1 |                1 |        PRODUCT_NAME |              STRING |                 SND2 |
|        102 |              DIG |         1 |                1 |    PRODUCT_MNEMONIC |              STRING |             SNDHRSLF |
|        103 |              DIG |         2 |                2 |        PRODUCT_NAME |              STRING |                 IMG2 |
|        103 |              DIG |         2 |                2 |    PRODUCT_MNEMONIC |              STRING |             IMGNBRTO |
|        104 |              DIG |         2 |                1 |        PRODUCT_NAME |              STRING |                 SND3 |
|        104 |              DIG |         2 |                1 |    PRODUCT_MNEMONIC |              STRING |             SNDGTWNE | 
```

编辑#1：如果您想动态执行这种类型的转换，那么您将需要使用动态 SQL。为此，您将使用以下内容。

首先，您需要获取列列表`UNPIVOT`：

```
select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('PRODUCT_DIGITAL') and
               C.name not in ('PRODUCT_ID', 'PRODUCT_TYPE') -- include the items you DO NOT want to unpivot
         for xml path('')), 1, 1, '') 
```

最终脚本将是：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('PRODUCT_DIGITAL') and
               C.name not in ('PRODUCT_ID', 'PRODUCT_TYPE')
         for xml path('')), 1, 1, '')

select @cols = stuff((select ', '''+C.name + ''''
         from sys.columns as C
         where C.object_id = object_id('PRODUCT_DIGITAL') and
               C.name not in ('PRODUCT_ID', 'PRODUCT_TYPE')
         for xml path('')), 1, 1, '')

set @query 
  = '  select
          product_id,
          product_category,
          parent_id,
          delivery_in_days,
          PROD_EXTENSION_NAME,
          case when c.data_type = ''varchar'' 
              then ''STRING'' else null end as PROD_EXTENSION_TYPE,
          PROD_EXTENSION_VALUE
        from 
        (
          select 
            p.product_id,
            p.product_category,
            p.parent_id,
            p.delivery_in_days,
            PRODUCT_NAME,
            PRODUCT_MNEMONIC
          from product p
          left join product_digital pd
            on p.product_id = pd.product_id
        ) src
        unpivot
        (
          PROD_EXTENSION_VALUE
          for PROD_EXTENSION_NAME in ('+ @colsunpivot +')
        ) up
        inner join 
        (
          select c.column_name, c.data_type
          from information_schema.columns c
          where c.table_name = ''PRODUCT_DIGITAL''
            and c.column_name in ('+@cols+')
        ) c
          on up.PROD_EXTENSION_NAME = c.column_name'

exec(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!6/61e51/34)。这将产生与原始版本相同的结果，但它是动态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:00:14.397

我可能会急于求成，但您说您的最终输出应该是 XML。虽然我没有包括您的所有要求，但这样的东西是否适合您的要求？（我想我可能过度简化了你的要求）

```
;WITH PRODUCT (PRODUCT_ID, PRODUCT_CATEGORY, PARENT_ID, PARENT_TYPE, DELIVERY_IN_DAYS) AS
(
    SELECT 100, 'DIG', 1, 1, 7  UNION ALL
    SELECT 101, 'DIG', 1, 1, 8  UNION ALL
    SELECT 102, 'DIG', 1, 1, 1  UNION ALL
    SELECT 103, 'DIG', 2, 1, 2  UNION ALL
    SELECT 104, 'DIG', 2, 1, 1
)
,PRODUCT_DIGITAL (PRODUCT_ID, PRODUCT_TYPE, PRODUCT_NAME, PRODUCT_MNEMONIC) AS
(
    SELECT 100, 'A', 'IMG1', 'IMAWTRFL' UNION ALL
    SELECT 101, 'B', 'SND1', 'SNDENGRV' UNION ALL
    SELECT 102, 'B', 'SND2', 'SNDHRSLF' UNION ALL
    SELECT 103, 'A', 'IMG2', 'IMGNBRTO' UNION ALL
    SELECT 104, 'B', 'SND3', 'SNDGTWNE'
)

SELECT   P.PRODUCT_CATEGORY
        ,P.PRODUCT_ID
        ,P.PARENT_TYPE
        ,P.PARENT_ID
        ,P.DELIVERY_IN_DAYS
        ,PD.PRODUCT_NAME
        ,PD.PRODUCT_MNEMONIC
FROM PRODUCT            P
JOIN PRODUCT_DIGITAL    PD  ON P.PRODUCT_ID = PD.PRODUCT_ID
FOR XML PATH 
```

# c# - 使用复选框在 GridView 中选择多行：程序不提取数据

> ID：14247868
> 
> 赞同：0
> 
> 时间：2013-01-09T22:45:07.863
> 
> 标签：c#, gridview, checkbox

尝试从 GridView 控件的多行中选择和提取数据时，我的代码中遇到了一个奇怪的错误/错误。

**背景：** 简而言之，我有一个 GridView 项目，其中填充了“签入”的不同设备项目的行，并且可以从我们的系统中签出。我希望用户能够选择多个项目并一次签出，而不是执行 X 次。

我在每一行上使用一个复选框来执行此操作，如下所示：http: [//i.imgur.com/fPYV2.png](http://i.imgur.com/fPYV2.png)

底部有一个按钮可以从我们的数据库中检查设备。

**代码：** 我用来生成 ASPX 页面的代码是：

```
<asp:GridView ID="grdEquipment" runat="server" AutoGenerateColumns="false" ShowHeaderWhenEmpty="true" CssClass="table table-bordered">
    <Columns>
        <asp:TemplateField HeaderText="Select">
            <ItemTemplate>
                <asp:CheckBox ID="chkMultiSelect_Out" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField HeaderText="Equipment Name" DataField="Name" />
        <asp:BoundField HeaderText="Category" DataField="Category.Name" />
    </Columns>
    <EmptyDataTemplate>
        There is no equipment to display.
    </EmptyDataTemplate>
</asp:GridView>
<div class="well">
    <asp:Button ID="btnCheckOut" runat="server" CssClass="btn btn-small btn-inverse" Text="Check Out" OnClick="btnCheckOut_Click" />
</div> 
```

这可以正常工作并编译没有问题。

运行按钮以检查所有内容的代码是：

```
protected void btnCheckOut_Click(object sender, EventArgs e)
    {
        int checkoutNumber = 0;
        //string id = (sender as Button).Attributes["data-id"].ToString();

        SortedBindingList<Tracker.Business.Equipment> eqList = Tracker.Business.EquipmentList.FetchAll();

        foreach (GridViewRow row in this.grdEquipment.Rows)
        {
                CheckBox chkMultiSelect_Out = (CheckBox)row.FindControl("chkMultiSelect_Out") ;
                if (chkMultiSelect_Out.Checked)
                {
                    checkoutNumber++;
                    Tracker.Business.Equipment equip = Tracker.Business.Equipment.GetByIdentification(Int32.Parse(row.ID.ToString()));
                    eqList.Add(equip);
                }

        }

        //If checkoutNumber is 0, do nothing.
        //If checkoutNumber is 1, launch popup for only 1 item
        //If checkoutNumber is more than 1, launch popup for multiple items.
        if (checkoutNumber == 0)
        {
            Response.Redirect("~/Equipment/CheckInOut/Default.aspx");
        }
        else if (checkoutNumber == 1)
        {

        }
        else if (checkoutNumber > 1)
        {

        }
    } 
```

现在，很明显，这段代码还没有完成。我正在调试，以使我的生活更轻松。重要的代码是 foreach 循环，我在其中检查控制项的每一行，并查看它是否被检查。

**问题：** 当我运行代码并选中一些复选框进行测试时，它会查看所有行，并且所有行都具有“Checked = false”作为属性。更糟糕的是，我后来发现它甚至没有从行中获取数据，如下面的屏幕截图所示：http: [//i.imgur.com/clRuk.png](http://i.imgur.com/clRuk.png)

文字应该是“擎天柱”或“开关#1”，但它不是！当我运行代码时，两者都被检查，但代码只看到错误的检查项目。

代码为每一行运行foreach循环，即3行，它运行循环3次。所以它看到每一行，但它没有提取数据......

我应该从哪里开始寻找？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:42:55.127

我解决了我的问题。正如[Tim Schmelter](https://stackoverflow.com/users/284240/tim-schmelter)所说，我在每次点击时都会回发页面，因此我将代码更改为仅在页面加载时对 gridview 表进行数据绑定，而不是在回发时。现在工作！

# java - 使用“new double”时的编译时间错误

> ID：14247872
> 
> 赞同：-1
> 
> 时间：2013-01-09T22:45:46.917
> 
> 标签：java, syntax, compiler-errors

我已经创建了一个哈希表，我正在尝试使用枚举来打印出键和值。当我尝试编译代码时，我不断收到一个编译时错误，说我需要在新的双精度中放入一个“[”，我已经放入哈希表中。

编译前：toys.put("Race Car", new double (29.99));

编译时错误说我需要这样放置：

Toys.put("Race Car", new double [29.99]);

我究竟做错了什么？

```
public static void main(String[] args)  {
  Hashtable toys = new Hashtable();
  Enumeration toyName;
  String getToyName;
  double priceOfToy;
  toys.put("Race Car", new double(29.99));
  toys.put("Toy Bear", new double(15.99));
  toys.put("Action Figure", new double(9.99));
  //Show prices of each toy
  toyName = toys.keys();
  //Uses hasMoreElements method from enumeration to check what is in the hashtable
  while (toyName.hasMoreElements())  {
    //uses nextElement method from enumeration interface to 
    getToyName = (String) toyName.nextElement();
    System.out.println(getToyName +  "is now priced at " + toys.get(getToyName));
  } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:48:53.543

Java 集合不能保存原始类型。你需要改变

```
toys.put("Race Car", new double(29.99)) 
```

到

```
toys.put("Race Car", new Double(29.99)) 
```

它使用`Double`包装器类型。

您也可以简单地使用自动装箱

```
toys.put("Race Car", 29.99) 
```

请注意，我没有测试最后一个以确保它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:47:07.733

`double`是原始类型。改用包装类`Double`。由于泛型的限制，集合不能保存原始类型的值，您必须使用包装器。

编译器显示此警告是因为它假设您想要实例化一个数组，这可以使用`new double [22]`.

此外，如果您使用 Java 1.5 或更高版本，您可以只使用原始值代替包装器值，它们将自动转换为包装对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:47:28.993

Map 只接受对象，不接受原语，double 是原语，Double 是 Object。并考虑为您的集合使用泛型类型：

```
Hashtable<String, Double> toys = new Hashtable<String, Double>();     
     toys.put("Race Car", new Double(29.99));
      toys.put("Toy Bear", new Double(15.99));
      toys.put("Action Figure", new Double(9.99));} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T22:48:25.527

包装 a 的类`double` 是`Double`（大写很重要）。

所以：

```
toys.put("Race Car", new Double(29.99)); 
```

或者，由于 Java 5，支持自动装箱（自动将双精度转换为双精度），所以

```
 toys.put("Race Car", 29.99d)); 
```

完全一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T22:49:30.113

要么使用`Double`类

```
toys.put("Race Car", new Double(29.99));
toys.put("Toy Bear", new Double(15.99));
toys.put("Action Figure", new Double(9.99)); 
```

或 java 原语`double`

```
toys.put("Race Car", 29.99);   // Java 1.5 or higher, makes use of inboxing
toys.put("Toy Bear", 15.99);
toys.put("Action Figure", 9.99); 
```

Java 原语不是类，也没有构造函数。

# wpf - 嵌入在 ContentControl 中的交互触发器

> ID：14247877
> 
> 赞同：4
> 
> 时间：2013-01-09T22:46:06.810
> 
> 标签：wpf, silverlight, xaml, styles, contentcontrol

因此，为了让问题保持简单，我需要例如数十次使用这样的东西；

```
 <Rectangle>
        <i:Interaction.Triggers>
             <i:EventTrigger EventName="MouseLeftButtonDown">
                  <ei:ChangePropertyAction TargetName="AnotherObjectOnTheView"
                                           PropertyName="Visibility"
                                           Value="Visible" />                           
             </i:EventTrigger>                        
        </i:Interaction.Triggers>
   </Rectangle> 
```

除了显然我不想在我需要的任何地方粘贴几十次。所以我试着把它们放在一个`ContentControl`像这样的东西中；

```
<Style x:Key="MyThingy" TargetType="ContentControl">
        <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ContentControl">
                <Rectangle>
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonDown">
                            <ei:ChangePropertyAction TargetName="AnotherObjectOnTheView"
                                                     PropertyName="Visibility"
                                                     Value="Visible" />                                         
                        </i:EventTrigger>                        
                    </i:Interaction.Triggers>
                </Rectangle>                    
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

有了这个想法，我可以通过调用模板来替换每个实例的所有内容；

```
<ContentControl Style="{StaticResource MyThingy}"/> 
```

除了问题是，当嵌入时`ContentControl`，交互触发器似乎不会触发。它会很好地显示模板项目，但似乎忽略了触发器？

所以问题是，为什么附加到模板项的触发器被忽略，或者，有没有更好的方法来完成我想要的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T23:05:52.623

不是`Interaction.Triggers`没有被调用 - 他们被调用，`ChangePropertyAction`这是有问题的。

例如，这将正常工作：

```
 <Style x:Key="MyThingy" TargetType="ContentControl">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ContentControl"> 
                    <Rectangle Fill="Red">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseLeftButtonDown">
                                <ei:ChangePropertyAction TargetObject="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                                                 PropertyName="Visibility"
                                                 Value="Collapsed" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </Rectangle>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

请注意，我所做的唯一更改是 1\. 使矩形变为红色（以便您可以更好地看到它何时消失）和 2\. 使触发器在单击按钮后立即隐藏矩形。

那么为什么我的代码有效？因为`TargetName`我没有使用 using ，而是使用`TargetObject`并绑定到模板化父级。您不能通过名称定位模板中的元素，它是一个不同的名称范围，据我所知，TargetName 在样式中根本不起作用，仅在 ControlTemplate.Triggers 中

# javascript - 如何防止加载加载此 ajax 请求中的所有数据？

> ID：14247905
> 
> 赞同：0
> 
> 时间：2013-01-09T22:48:07.907
> 
> 标签：javascript, jquery, ajax

我正在用 Ajax 练习小例子。我想在 div#testID 容器的下拉列表中更新更新选择的选项。但它正在将整个页面加载到 div 我该如何防止这种情况。在我一直在使用的示例代码下方。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>

<form acttion="" method="post" name="DispalyForm">
    Dispaly: <select name="SelectFilter" class="filter">
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
    </select>
</form>
<div id="testID">#SelectFilter#</div>

<script type="text/javascript">
    $(function() {
        $('.filter').change(function() {
            $('form[name=DispalyForm]').submit();
        });
        $('form[name=DispalyForm]').submit(function(event) {
            var data = $(this).serialize();
            $.ajax({
                url : window.location,
                type : "POST",
                data : data,
                dataType : "html",
                success : function(data) {
                    $('#testID').html(data);
                }
            });
            event.preventDefault();
        });
    });
</script> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:05:17.743

要练习 ajax 示例，请使用服务器端返回数据的其他文件。：

例如在“PHP”中： test.php ：该文件检查请求是否已发布，返回“SelectFilter”的数据。

```
 if ($_REQUEST['post']){
      echo $_REQUEST['SelectFilter']; 
  } 
```

您的 html 文件：-您的基本 html 文件

```
<form action="" method="post" name="DispalyForm">
    Display: <select name="SelectFilter" class="filter">
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    </select>
</form>
<div id="testID">#SelectFilter#</div>

<script type="text/javascript">
$(function() {
    $('.filter').change(function() {
        $('form[name=DispalyForm]').submit();
    });
    $('form[name=DispalyForm]').submit(function(event) {
        var data = $(this).serialize();
        $.ajax({
            url : "test.php
,
            type : "POST",
            data : data,
            dataType : "html",
            success : function(data) {
                $('#testID').html(data);
            }
        });
        event.preventDefault();
    });
}); 
```

您当前正在做的另一件事，dataType 为“html”，因此它将向您发送完整的页面。您还可以使用 json 作为最佳实践来获取必要的数据：

示例 json：

```
 {
  "requestedValue": "test"
  } 
```

在 js 中，你只需要：

```
 $('#testID').html(data.requestedValue); 
```

# matlab - Matlab -- random walk with boundaries, vectorized

> ID：14247906
> 
> 赞同：3
> 
> 时间：2013-01-09T22:48:10.173
> 
> 标签：matlab, vectorization

Suppose I have a vector J of jump sizes and an initial starting point X_0\. Also I have boundaries 0, B (assume 0 < X_0 < B). I want to do a random walk where X_i = [min(X_{i-1} + J_i,B)]^+. (positive part). Basically if it goes over a boundary, it is made equal to the boundary. Anyone know a vectorized way to do this? The current way I am doing it consists of doing cumsums and then finding places where it violates a condition, and then starting from there and repeating the cumsum calculation, etc until I find that I stop violating the boundaries. It works when the boundaries are rarely hit, but if they are hit all the time, it basically becomes a for loop.

In the code below, I am doing this across many samples. To 'fix' the ones that go out of the boundary, I have to loop through the samples to check...(don't think there is a vectorized 'find')

```
% X_init is a row vector describing initial resource values to use for
% each sample

% J is matrix where each col is a sequence of Jumps (columns = sample #)
% In this code the jumps are subtracted, but same thing

X_intvl = repmat(X_init,NumJumps,1) - cumsum(J);
X = [X_init; X_intvl];
for sample = 1:NumSamples
    k = find(or(X_intvl(:,sample) > B, X_intvl(:,sample) < 0),1);
    while(~isempty(k))
        change = X_intvl(k-1,sample) - X_intvl(k,sample);
        X_intvl(k:end,sample) = X_intvl(k:end,sample)+change;
        k = find(or(X_intvl(:,sample) > B, X_intvl(:,sample) < 0),1);
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:08:10.127

Interesting question (+1).

I faced a similar problem a while back, although slightly more complex as my lower and upper bound depended on t. I never did work out a fully-vectorized solution. In the end, the fastest solution I found was a single loop which incorporates the constraints at each step. Adapting the code to your situation yields the following:

```
%# Set the parameters
LB = 0; %# Lower bound
UB = 5; %# Upper bound
T = 100; %# Number of observations
N = 3; %# Number of samples
X0 = (1/2) * (LB + UB); %# Arbitrary start point halfway between LB and UB

%# Generate the jumps
Jump = randn(N, T-1);

%# Build the constrained random walk
X = X0 * ones(N, T);
for t = 2:T
    X(:, t) = max(min(X(:, t-1) + Jump(:, t-1), UB), 0);
end
X = X'; 
```

I would be interested in hearing if this method proves faster than what you are currently doing. I suspect it will be for cases where the constraint is binding in more than one or two places. I can't test it myself as the code you provided is not a "working" example, ie I can't just copy and paste it into Matlab and run it, as it depends on several variables for which example (or simulated) values are not provided. I tried adapting it myself, but couldn't get it to work properly?

**UPDATE:** I just switched the code around so that observations are indexed on columns and samples are indexed on rows, and then I transpose `X` in the last step. This will make the routine more efficient, since Matlab allocates memory for numeric arrays column-wise - hence it is faster when performing operations down the columns of an array (as opposed to across the rows). Note, you will only notice the speed-up for large `N`.

**FINAL THOUGHT:** These days, the JIT accelerator is very good at making single loops in Matlab efficient (double loops are still pretty slow). Therefore personally I'm of the opinion that every time you try and obtain a fully-vectorized solution in Matlab, ie no loops, you should weigh up whether the effort involved in finding a clever solution is worth the slight gains in efficiency to be made over an easier-to-obtain method that utilizes a single loop. And it is important to remember that fully-vectorized solutions are sometimes *slower* than solutions involving single loops when `T` and `N` are small!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-18T09:04:38.720

I'd like to propose another vectorized solution.

So, first we should set the parameters and generate random `Jumpls`. I used the same set of parameters as *Colin T Bowers*:

```
% Set the parameters
LB = 0; % Lower bound
UB = 20; % Upper bound
T = 1000; % Number of observations
N = 3; % Number of samples
X0 = (1/2) * (UB + LB); % Arbitrary start point halfway between LB and UB

% Generate the jumps
Jump = randn(N, T-1); 
```

But I changed generation code:

```
% Generate initial data without bounds
X = cumsum(Jump, 2);

% Apply bounds
Amplitude = UB - LB;
nsteps = ceil( max(abs(X(:))) / Amplitude - 0.5 );
for ii = 1:nsteps
    ind = abs(X) > (1/2) * Amplitude;
    X(ind) = Amplitude * sign(X(ind)) - X(ind);
end

% Shifting X
X = X0 + X; 
```

So, instead of `for` loop I'm using [`cumsum` function](http://www.mathworks.com/help/matlab/ref/cumsum.html) with smart post-processing.

**N.B.** This solution works significantly slower than *Colin T Bowers*'s one for tight bounds (`Amplitude < 5`), but for loose bounds (`Amplitude > 20`) it works much faster.

# java - 是否可以在 JavaFX 应用程序中嵌入 Swing 组件？

> ID：14247911
> 
> 赞同：1
> 
> 时间：2013-01-09T22:48:45.030
> 
> 标签：java, swing, components, embed, javafx

我听说有人为其中一个创建自己的自定义库的传闻，但我还没有为自己找到一个。我需要它，因为我需要为我的应用程序安装另一个正在运行的小程序（在 Swing 中的 JPanel 中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T23:04:21.477

不，至少不是以官方支持的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T23:28:15.373

[ThingsFX 3rd 方库](https://github.com/thingsfx/ThingsFX/tree/master/src/main/java/com/thingsfx/widget/swing)中有SwingView来执行此操作。

我从来没有尝试过，所以我不能推荐或反对它。

ThingsFX 有一个[网站](http://thingsfx.com/)。

这是使用 ThingsFX 在 JavaFX 舞台上呈现的 Swing 组件的[屏幕截图。](http://rkennke.wordpress.com/2011/10/27/embedding-swing-components-within-javafx-2-scenes/)

![东西外汇](../Images/6b97d5cb40e27951658b174b0a195e13.png)

# php - Apache 返回没有样式的页面，只有文本和图像

> ID：14247912
> 
> 赞同：0
> 
> 时间：2013-01-09T22:48:47.943
> 
> 标签：php, html, css, apache

我正在处理一些我不理解的奇怪行为。

所以如果我输入：

```
http://localhost/site/index.php 
```

http服务器会返回一个完全没有问题的页面，index.php后面的斜线会生成一个没有任何样式的页面！

```
http://localhost/site/index.php/ 
```

我该如何解决这个问题？

下面的 CSS 链接不起作用，为什么？

```
<link rel="stylesheet" type="text/css" href="/css/fonts.css" /> 
```

这将适用于斜线，但如果我在斜线之后添加一些东西，那么我会得到所有没有样式的网站。

```
<link rel="stylesheet" type="text/css" href="http://localhost/site/index.php/css/fonts.css" /> 
```

编辑：

使用此功能在 href 上添加完整路径后，所有请求的 url 都可以：

```
function baseUrl(){
    return ("http://".$_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']));
} 
```

无论如何，我已经在 .acccess 中添加了一些规则，所以现在我不能在 index.php 之后输入斜杠，但是如果我在斜杠之后输入一些东西，一切都会崩溃:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:51:39.027

Apache 没有任何问题。您的文档使用的是相对 URL。

例如，您指定`href="myimage.png"`而不是`/myimage.png`

更改基本 URL 会破坏这些相对 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:51:39.953

这可能是您的 css 中的绝对路径和相对路径存在问题`<link />`。确保使用绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:51:42.397

检查您的`<link />`标签`href`属性和`<img />`标签`src`属性是否带有`/`：

坏的：

```
<link rel="stylesheet" type="text/css" href="css/style.css" />
<img src="img/image.png" /> 
```

好的：

```
<link rel="stylesheet" type="text/css" href="/css/style.css" />
<img src="/img/image.png" /> 
```

这样您就可以确定浏览器将计算正确的路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T22:54:08.110

这可能与您如何定义对 CSS、图像等的引用有关。如果它们被定义为相对路径，那么您可能本质上是在错误的目录中寻找它们。

您可能将 Apache 设置为忽略尾部斜杠（并且只提供 index.php 而不是在 index.php 目录中查找索引文件）。然而，客户端浏览器不知道这一点，并认为它正在引用名为 index.php 的目录中的某些内容并查找与该目录相关的这些文件。

要更正此问题，您应该将 Apache 配置为不忽略尾部斜杠（并给出适当的 404 错误），或者实施重写规则来清理尾部斜杠。

# python - 如何使用 Python Tornado 在 HTTP 上实现“tail”？

> ID：14247918
> 
> 赞同：3
> 
> 时间：2013-01-09T22:49:28.470
> 
> 标签：python, tornado

我正在尝试使用 Python 在 HTTP 上实现类似“tail -f”的东西。目前，我正在尝试使用 Tornado，但它一次只处理一个连接，即使我执行异步请求也是如此。

```
import socket
import subprocess

import tornado.gen as gen
import tornado.httpserver
import tornado.ioloop
import tornado.iostream
import tornado.options
import tornado.web

from tornado.options import define, options

define("port", default=8888, help="run on the given port", type=int)
define(
    "inputfile",
    default="test.txt",
    help="the path to the file which we will 'tail'",
    type=str)

class MainHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    @gen.engine
    def get(self):
        print "GOT REQUEST"
        inputfile = open(options.inputfile)
        p = subprocess.Popen(
            "./nettail.py",
            stdin=inputfile,
            stdout=subprocess.PIPE)
        port_number = int(p.stdout.readline().strip())

        self.write("<pre>")
        self.write("Hello, world\n")
        self.flush()

        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM, 0)
        stream = tornado.iostream.IOStream(s)
        yield gen.Task(stream.connect, ("127.0.0.1", port_number))
        while True:
            data = yield gen.Task(stream.read_until, "\n")
            self.write(data)
            self.flush()

def main():
    tornado.options.parse_command_line()
    application = tornado.web.Application([
        (r"/", MainHandler),
    ])
    http_server = tornado.httpserver.HTTPServer(application)
    http_server.listen(options.port)
    tornado.ioloop.IOLoop.instance().start()

if __name__ == "__main__":
    main() 
```

我开始的过程是一个简单的“尾巴”，它输出到一个套接字。

```
import random
import socket
import sys
import time

#create an INET, STREAMing socket
s = socket.socket(
    socket.AF_INET, socket.SOCK_STREAM)

# Open the connection.
try:
    for attempt_number in xrange(5):
        port_number = random.randint(9000, 65000)
        try:
            s.bind(("localhost", port_number))
        except socket.error:
            continue
        # We successfully bound!
        sys.stdout.write("{0}".format(port_number))
        sys.stdout.write("\n")
        sys.stdout.flush()
        break

    #become a server socket
    s.listen(5)

    # Accept a connection.
    try:
        (clientsocket, address) = s.accept()

        while True:
            line = sys.stdin.readline()
            if not line:
                time.sleep(1)
                continue
            clientsocket.sendall(line)
    finally:
        clientsocket.close()

finally:
    s.close() 
```

./nettail.py 按我的预期工作，但 Tornado HTTP 服务器一次只处理一个请求。

我想使用长时间运行的持久 HTTP 连接来执行此操作，因为它与旧版浏览器兼容。我知道 Web Sockets 是在现代浏览器中完成的。

编辑：我在 Linux 和 Solaris 上运行它，而不是 Windows。这意味着我*可以*在文件上使用 tornado.iostream，而不是通过套接字程序。尽管如此，这还没有记录在案，所以我为每个连接启动了一个套接字程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:00:48.863

在进行了一些调试之后，事实证明这个尾部服务器并没有阻塞，毕竟。

我试图在打开 Firefox 的两个窗口的情况下测试并发连接，但 Firefox 在手动停止第一个窗口之前不会开始获取第二个窗口。我猜 Firefox 不喜欢有两个并发的 HTTP 连接来获取相同的资源。

打开一个 Firefox 窗口和一个 Chromium 窗口，我可以看到推送到两个选项卡的“尾部”输出。

谢谢你的帮助。@abarnert 的评论特别有帮助。

编辑：

在即将发布的 Tornado 2.4.2 版本中，实现了[“管道”IOStream](https://tornado.readthedocs.org/en/latest/iostream.html#tornado.iostream.PipeIOStream)。使用这个和常规的“tail”大大简化了代码。

```
import subprocess

import tornado.httpserver
import tornado.ioloop
import tornado.iostream
import tornado.options
import tornado.web

from tornado.options import define, options

define("port", default=8888, help="run on the given port", type=int)
define(
    "inputfile",
    default="test.txt",
    help="the path to the file which we will 'tail'",
    type=str)

class MainHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
        print "GOT REQUEST"
        self.p = subprocess.Popen(
            ["tail", "-f", options.inputfile, "-n+1"],
            stdout=subprocess.PIPE)

        self.write("<pre>")
        self.write("Hello, world\n")
        self.flush()

        self.stream = tornado.iostream.PipeIOStream(self.p.stdout.fileno())
        self.stream.read_until("\n", self.line_from_nettail)

    def on_connection_close(self, *args, **kwargs):
        """Clean up the nettail process when the connection is closed.
        """
        print "CONNECTION CLOSED!!!!"
        self.p.terminate()
        tornado.web.RequestHandler.on_connection_close(self, *args, **kwargs)

    def line_from_nettail(self, data):
        self.write(data)
        self.flush()
        self.stream.read_until("\n", self.line_from_nettail)

def main():
    tornado.options.parse_command_line()
    application = tornado.web.Application([
        (r"/", MainHandler),
    ])
    http_server = tornado.httpserver.HTTPServer(application)
    http_server.listen(options.port)
    tornado.ioloop.IOLoop.instance().start()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:16:32.960

我最近创建了这个作为实验。对我有多个连接有用吗？

```
class TailHandler(BaseHandler):
    @asynchronous
    def get(self):
        self.file = open('data/to_read.txt', 'r')
        self.pos = self.file.tell()

        def _read_file():
            line = self.file.read()
            last_pos = self.file.tell()
            if not line:
                self.file.close()
                self.file = open('data/to_read.txt', 'r')
                self.file.seek(last_pos)
                pass
            else:
                self.write(line)
                self.flush()

            IOLoop.instance().add_timeout(time.time() + 1, _read_file)
        _read_file() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T23:02:38.900

你不应该在处理程序中有这样的阻塞调用。

```
 port_number = int(p.stdout.readline().strip()) 
```

您需要使用[select](http://docs.python.org/2/library/select.html)或类似的机制来避免阻塞调用

编辑：好的，我去检查了文档。您应该使用他们的[iostream](http://www.tornadoweb.org/documentation/iostream.html)来读取`p`

# c# - 如何从 .NET 中的存储过程返回 oracle 输出参数

> ID：14247921
> 
> 赞同：20
> 
> 时间：2013-01-09T22:49:31.810
> 
> 标签：c#, .net, oracle

我在尝试从 SP 取回数据时遇到严重问题。我试图这样做：

```
OracleCommand ora_cmd = new OracleCommand("a6r1.PR_ABC_P_ALTA_TARJETA_PAYWARE", ora_conn);
                    ora_cmd.BindByName = true;
                    ora_cmd.CommandType = CommandType.StoredProcedure;

                    int success= new int();

                    ora_cmd.Parameters.Add("Lc_Param_Issuer", OracleDbType.Varchar2, issuer, ParameterDirection.Input);
                    ora_cmd.Parameters.Add("Ln_Param_Valid_Product", OracleDbType.Varchar2, DropDownListProducto.SelectedValue.ToString(), ParameterDirection.Input);
                    ora_cmd.Parameters.Add("Ln_Param_Total", OracleDbType.Int32, parsed, ParameterDirection.Input);
                    ora_cmd.Parameters.Add("Lc_Param_User", OracleDbType.Varchar2, user, ParameterDirection.Input);
                    ora_cmd.Parameters.Add("Lc_Encrypted_Password", OracleDbType.Varchar2, pass, ParameterDirection.Input);
                    ora_cmd.Parameters.Add("Lc_Exito", OracleDbType.Int32, success, ParameterDirection.Output);
                    ora_cmd.Parameters.Add("Lc_Error", OracleDbType.Varchar2, errorMessage, ParameterDirection.Output); 
```

但它没有向变量 sucess 或 errorMessage 返回任何内容。我究竟做错了什么？有没有更好的办法？直接在 Oracle 上执行时效果很好。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T23:22:35.800

看来您不能使用现有变量作为输出参数，请尝试这种方式

```
ora_cmd.Parameters.Add("Lc_Exito", OracleDbType.Int32).Direction = ParameterDirection.Output;

ora_cmd.ExecuteNonQuery();

if (ora_cmd.Parameters["Lc_Exito"].value == 0) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-03T18:00:28.870

我还没有找到它在一个地方记录整个过程的任何地方，所以在将我的头撞到墙上并将其敲出之后，这是我想出的版本，使用 OP 代码中的一个输出参数：

```
OracleParameter param = new OracleParameter();
param = ora_cmd.Parameters.Add("Lc_Exito", OracleDbType.Int32, ParameterDirection.Output);  // can assign the direction within the parameter declaration
param.Size = 25;  // failed for me if I did not have this - should be the same as the DB field, if exporting a value from the database

ora_cmd.ExecuteNonQuery();

int myLc_ExitoValue = int.Parse(param.Value);  // might not need to parse, and might need a .ToString() on param.Value if you do - I was using strings so not sure about OP's exact case 
```

然后需要设置存储过程以接受`OUT`参数，并且您必须在过程中分配给它：

```
create or replace procedure PR_ABC_P_ALTA_TARJETA_PAYWARE(Lc_Exito OUT number)
  as
  begin
    Lc_Exito := 123;
  end;
 / 
```

显然，这忽略了所有其他正在发送的参数和其他“输出”参数 - 想要简化它。但这显示了在调用 C# 中的存储过程之前、期间和之后如何设置所有内容，以及如何设置`OUT`参数并获取存储过程的值。

# perl - 如何在 perl 中使用数据输入创建测试

> ID：14247924
> 
> 赞同：1
> 
> 时间：2013-01-09T22:49:45.497
> 
> 标签：perl, testing

我已经开始编写一个可以用来汇总数据的模块。我是测试新手，虽然我已经阅读了我能找到的内容并在谷歌上搜索，但我找不到关于如何最好地测试需要一些输入数据才能有意义的方法和子程序的建议（假设我会使用大约 100 行制表符分隔的文本文件）。

我应该只在分发中包含文本文件吗？我已经检查了 Text::CSV ，这就是它在那里完成的方式。

有什么建议吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:14:51.877

我建议结合使用[Test::More](http://search.cpan.org/perldoc?Test%3a%3aMore)作为您的测试框架和嵌入内联数据。

`Test::More`是 Perl 中的标准测试工具包；几乎您可能会发现的所有测试工具都使用它。它带有许多方便的内置测试功能。

通常，您通过将预期值与子程序或工具实际给出的值进行比较来进行测试。最常见的方法是使用`is`例程进行直接比较。它的格式如下所示：

```
is($got, $expected, $test_name); 
```

例如，假设我们创建了一个 POW 函数，并希望确保它正常工作：

```
sub pow { my ($n, $p) = @_;  return $n ** $p; } 
```

我们将通过以下方式检查：

```
is( pow(2, 3), 8, "2^3 is 8" );
is( pow(2, 4), 16, "2^4 is 16" );
is( pow(3, 3), 27, "3^3 is 27" ); 
```

然后归结为以对您有用的格式获取您需要的数据。小数据可能会使用 Heredocs 与您的测试函数调用一起加载：

```
my $test1 = <<'END_DATA1';
... (your data here
END_DATA1

my $test2 = <<'END_DATA2';
... (your second dataset here
END_DATA2 
```

或者，如果您需要检查一个大数据集的多个部分，您可以考虑将其全部放入`__DATA__`块中：

```
while (my $line = <DATA>) { ... } # read from the DATA handle

# ... your script above here; everything below __DATA__ is read from the handle
__DATA__  
... ( your data set here ) 
```

例如，如果你想确保你的子程序正确地读入一行，它可能是这样的：

```
use strict;
use warnings;
use Test::More;

use Your::Lib;  # load your library with your routines in it

use Test::More tests => 5; # how many checks you will perform, in case it dies

my $lib = your_lib_function(\*DATA);  # say, it loads from a file handle maybe?

is( $lib->key1(), 'value', "Key 1 was read correctly.");
is( $lib->key2(), 'value2', "Key 2 was read correctly.");
is( $lib->key3(), 'value3', "Key 3 was read correctly.");
is( $lib->key4(), 'value4', "Key 4 was read correctly.");
is( $lib->key5(), 'value5', "Key 5 was read correctly.");

__DATA__
{
    "Key" : "value",
    "Key2" : "value2",
    "Key3" : "value3",
    "Key4" : "value4",
    "Key5" : "value5",
} 
```

查看[`Test::More`](http://search.cpan.org/perldoc?Test%3a%3aMore)有关此框架如何工作的更多详细信息。祝你好运！:)

# javascript - 切换 CSS 样式

> ID：14247929
> 
> 赞同：-2
> 
> 时间：2013-01-09T22:50:10.490
> 
> 标签：javascript, jquery, html, css

我有 2 个表单允许用户更改他们的电子邮件地址和另一个表单来更改他们的密码。

目前，它们是隐藏的，但我希望有 2 个链接显示每个表单。

我尝试过使用`toggleClass`，但我喜欢它，所以一旦有人在显示更改电子邮件地址表单时单击更改密码链接，我希望它隐藏它，然后显示密码表单，反之亦然。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:55:18.550

为什么不直接向另一个表单添加（或删除）一个类，而不是切换它？

```
$('a.email-link').on('click',function() {
    $('form.email-form').toggleClass('hidden');
    $('form.password-form').addClass('hidden');
}); 
```

# java - 按对象中的值对对象进行排序

> ID：14247930
> 
> 赞同：0
> 
> 时间：2013-01-09T22:50:13.620
> 
> 标签：java, android, arrays, sorting

我有一个对象数组，这些对象都存储了多个值。我将它们放在一个对象数组中。

```
class PlayerScores {

String playerName;
   int pos=0;
   int played=0;
   int win=0;
   int draw=0;
   int lose=0;
   int goalsFor=0;
   int goalsAgainst=0;
   int goalDifference=0;
   int points=0;

   public PlayerScores() {
   }
} 
```

这些存储在数组中：

```
Player Scores[] playersObjects = new PlayerScores[int];

            playersObjects[i] = new PlayerScores(); 
```

我想搜索'playersObject []'然后在一个新的对象数组中排序，其中最高点首先在数组中，其余的按降序排列。我不确定如何对对象中的单个值进行排序。

任何帮助将不胜感激，

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T22:58:59.453

您可以使用[`Arrays.Sort`](http://developer.android.com/reference/java/util/Arrays.html#sort%28T%5b%5d,%20int,%20int,%20java.util.Comparator%3C?%20super%20T%3E%29)并提供自定义[`Comparator`](http://developer.android.com/reference/java/util/Comparator.html). 像这样的东西应该工作：

```
public class PlayerScoresComparator implements Comparator<PlayerScores> {
    @Override
    public int compare(PlayerScores lhs, PlayerScores rhs) {
        return lhs.points - rhs.points;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T23:28:25.770

作为 kabuko 建议的替代方案，您可以使用 PlayerScore 对象的[ArrayList](http://developer.android.com/reference/java/util/ArrayList.html)，同时实现[Comparable](http://developer.android.com/reference/java/lang/Comparable.html)接口并向 PlayerScore 类添加 compareTo(PlayerScore another) 方法，如下所示：

```
public class PlayerScores implements Comparable<PlayerScores> {
  [...]

public int compareTo(PlayerScore another) {
  //example of a method to calculate which ogject is "greater".
  //See Comparable documentation for details. You will need to implement proper logic
  return getHighScore() - another.getHighScore(); 
} 
```

然后您将能够通过 Collections.sort() 对 ArrayList 进行排序：

```
ArrayList<PlayerScores> scores = new ArrayList<PlayerScores>();
[...] //Populate scores list
Collections.sort(scores) 
```

如果您无论如何都必须使用 ArrayList，例如，如果您要将它附加到 ListView，这将很有用。

# sql - 我可以在创建表时使项目的 item.cost 成为 product.price * product.quantity

> ID：14247931
> 
> 赞同：0
> 
> 时间：2013-01-09T22:50:23.203
> 
> 标签：sql, plsql, nested-table

我希望该项目的 item.cost 将是 product.price * product.quantity..

当我表项时我该怎么做？

有我的 SQL 代码：

```
create or replace type Product as Object(
product_code char(6);
product_name varchar2(6);
description clot(500);
price number(6,2);
constraint uniq_product_code primary key(product_code)
);
/

CREATE TYPE Products IS TABLE OF Product;

CREATE or replace type object Item  as Object(
item_code char(6);
quantity number(6);
cost number(11,2);
products Product;
constraint uniq_item_code primary key(item_code)
);
NESTED TABLE products STORE AS item_product;
/

Create  type Items is Table of Item;

CREATE or replace TYPE Contact_detail AS OBJECT (
   email    varchar2(30);
   address  VARCHAR2(50);
   telephone   varchar2(20);
);
/

Create or replace table Order(
order_number char(6);
order_name varchar2(6);
customer_contact_details Contact_detail;
date date;----
Items Item;
constraint uniq_order_number primary key(order_number)
);
NESTED TABLE Items STORE AS order_item;
/ 
```

此外，我将制作一个 PL/SQL 以允许用户输入来自用户的信息以插入到 Order 表中。如何自动检测物品的数量。数量 n, 2<=n<=10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:23:51.253

将成员函数添加到 Item 对象类型以计算值。

# java - Java - 为继承特定接口的所有类添加功能

> ID：14247932
> 
> 赞同：1
> 
> 时间：2013-01-09T22:50:29.117
> 
> 标签：java, generics, inheritance, interface, generic-collections

很抱歉，我无法更深入或更抽象地描述我的问题。我觉得解释我的问题的最好方法是通过这个非常具体的例子。

我想定义一个函数“readCollection”，它会解析一个字符串，并根据我调用函数的方式给我一个特定类型的特定集合。

例如，我想这样使用它：

```
ArrayList<Foo> fb = readCollection("Foo1\n Foo2\n Foo3\n"); 
```

或者

```
LinkedList<Bar> fb = readCollection("Bar1\n Bar2\n Bar3\n"); 
```

当然，我已经为每个类定义了一个接口，该接口具有用于读取一个实例（“Bar..”）的“读取”方法。

我陷入了两个问题之间：

- 自然函数 readCollection 应该是静态函数，但接口不能有静态方法。

- 方法 readCollection 应该返回 Foo 或 Bar 等类型的新对象，但我“无法实例化该类型”，这通常在我定义 readCollection 的类中定义。

- 假设该方法不是静态定义的，我不能在不引用该类型的特定对象的情况下调用它，由于前一点我不能这样做。

如何编写我的方法而不为每个 Foo 和 Bar 等复制它？

我似乎自己找到了解决方案，但它非常丑陋和讨厌。

我现在有

```
public interface Readable<T> {
    public T read(String str); } 
```

和

```
public class ReadCollection<T extends Readable<T>> {
    public Collection<T> read(File file, Collection<T> ts, T t) {
        ...
        ts.add(t.read(strLine));
        ...
        return ts; 
} } 
```

和

```
public class Bars extends ReadCollection<Bar>{
    ...
    public static void main(String[] args) {
    new Bars().read(new File("fake/path"), new ArrayList<Bar>(), new Bar()); } 
```

在这里，我发送了一个 ArrayList 的新实例，以将结果返回给 Bar，以便引用方法“读取”。我看不出我怎么能避免这种情况。

请告诉我有更好的方法。在某个地方，我希望我事后感到非常愚蠢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:58:58.203

考虑将解析/构造与对象本身分开。在许多情况下，这两者是非常不同的关注点。

你走在正确的轨道上，但我建议：

1.  不要让你的元素类型从`Readable`接口继承
2.  `Readable`将接口重命名为`Reader`
3.  `Reader`为您要解析的每种类型 实现一个。
4.  更新方法的签名`ReadCollection.read`以采用 a`Reader`而不是 a`T`

然后，您将拥有：

```
public class ReadCollection<T,C extends Collection<T>> {
    public C read(File file, C ts, Reader<T> reader) {
        ...
        ts.add(reader.read(strLine));
        ...
        return ts; 
    } 
} 
```

这为您提供了一个很好的关注点分离，应该可以解决您列出的所有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:53:59.913

API 应该通过接口定义。

共享实现应该通过抽象基类。

那么如何使用抽象基类而不失去接口的好处呢？

简单的！只需让抽象基类实现接口即可。

然后任何需要共享功能的类都可以扩展抽象基类，但您不必将自己束缚在任何特定的实现中，例如，这对于编写单元测试将很方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:12:01.807

我很高兴能够告诉您，在您的评论 (@stevevls) 和朋友的帮助下，我自己找到了最终和最佳答案。

我现在有

```
public interface Reader {
    public Reader read(String str); } 
```

所以我删除了通用参数，shich 是不必要的

```
public class ReadCollection { // no generic class!
public static <R extends Reader, C extends Collection<R>> // generic static function! 
        C readColl(File file, Class<? extends C> collClass, Class<? extends R> readClass) {
    C ts = collClass.newInstance()
        Reader t = readClass.newInstance()
        ...
        ts.add(readClass.cast(t.read(strLine)));
        ...
        return ts; 
} } 
```

而且，现在我可以从任何地方调用该函数：

```
ArrayList<Point> l = ReadCollection.readColl(new File("examples/ex1.csv"), ArrayList.class, Point.class); 
```

（假设 Point 实现 Reader / 具有读取方法...）

无需发送新实例，更重要的是：无需在任何地方扩展 ReadCollection 类。

读取方法不能是静态的，导致它在接口Reader中定义的问题仍然存在。这就是我使用 readClass.newInstance() 等的原因。

我仍然认为这个解决方案不再那么难看。

你们同意这是一个好的解决方案吗？

# ruby-on-rails - Ruby on Rails：如何在不切换视图的情况下创建对象

> ID：14247935
> 
> 赞同：0
> 
> 时间：2013-01-09T22:50:41.310
> 
> 标签：ruby-on-rails

我对 Rails 非常陌生，所以我认为我的问题很简单。我本质上在视图页面上有一个对象提交按钮（因此为指定的对象运行创建和保存）但是在选择按钮时我根本不希望视图改变（所以只保留已加载的同一页面）。我在我的对象控制器中编辑创建操作时遇到问题，因此视图不会发生任何事情（这甚至可能吗？或者是每个操作都必须出现一个新视图的想法）。

感谢你的帮助！丽莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:58:06.653

这可以通过在控制器中创建一个动作来完成，

```
class YourController < ApplicationController

   def index
   end

   def youraction
   end
end 
```

，然后在 routes.rb 中设置一个路由到它

然后只需将您的表单设置为指向该网址并添加

```
remote: true 
```

表单标签的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T23:06:38.360

所以你想存储对象并且你不想改变 URL。

在您的创建操作中，在保存对象之后。重定向到该视图。

所以像：

```
$   if @object.save
    redirect_to :action => "index"
    # or
    # redirect_to object_path # you can set this in config/routes.rb
    # or
    # redirect_to :action => "show", :id => @object.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T02:59:31.463

您可以通过使用 ajax 请求来做到这一点：

在你的控制器中创建一个动作来创建你想要的对象：

```
class SomeController < ApplicationController
  def index
    #this is your view controller
  end

  def youraction
    #create an object
    render :nothing => true
  end
end 
```

然后将您的按钮与执行 ajax 请求的 javascript 函数绑定：

HTML

```
<button id="submit_button">Submit</button> 
```

Javascript

```
$(document).ready(function (){
  $('#submit_button').click(function(){
    $.ajax({
      url: 'url_to_the_controller/youraction',
      type: 'POST'
      success: function (){
        alert('success');
      },
      error: function (){
        alert('error');
      }
    });
  });
} 
```

# c# - 从自我跟踪实体迁移到 DBContext

> ID：14247937
> 
> 赞同：2
> 
> 时间：2013-01-09T22:51:12.530
> 
> 标签：c#, entity-framework, persistence, dbcontext, self-tracking-entities

我读过自我跟踪实体 (STE) 现已弃用，Microsoft 将不再投资于这些实体。

我目前正在开发一个 n 层应用程序，其中客户端代码正在对 WCF 服务进行方法调用以获取自跟踪实体。在我的客户端代码中没有 DBContext 这样的东西：它只处理实体本身。

由于自我跟踪实体在其内部具有更改跟踪器代码，因此客户端代码可以轻松使用它们，并且很容易将更改实际推送回数据库。

我已经尝试过 EF4 DBContext Generator t4 模板，但它们会生成**不知道持久性的**实体，因此，我的客户端代码无法使用它们来跟踪它对 STE 所做的更改。

是否可以从这样的项目迁移到基于 DBContext 的项目而无需重写大量客户端代码以及 WCF 服务代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:20:30.280

[EF 5.x](http://visualstudiogallery.msdn.microsoft.com/a3ac10a5-9365-4096-bb58-d9a1ba71db8f?SRC=VSIDE)有STE Generator 模板，其信息页面显示：

> 我们不再建议在新应用程序中使用 STE 模板，它仍可用于支持现有应用程序。访问 N 层应用程序页面，了解我们为 N 层方案推荐的其他选项。

这回答了你的问题。如果您想在不重写应用程序的情况下使用 STE，您应该使用模板和`ObjectContext`. 理论上你可以使用，因为你可以从现有的（通过构造函数）`DbContext`创建一个新的实例。我不确定它对 STE 有什么好处。`DbContext``ObjectContext`

MS 将 WCF 数据服务及其客户端上下文视为 STE 的替代品。

# python - 如何在python中拥有会员功能

> ID：14247938
> 
> 赞同：-4
> 
> 时间：2013-01-09T22:51:15.057
> 
> 标签：python, membership

嗨，我想知道如何制作一个即使关闭 shell 也能记住用户名和密码的程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:17:13.073

我认为最好的方法是将用户名和密码哈希的组合存储在数据库中。我最熟悉使用 SQL 数据库，这对你有用。

为了详细说明密码散列的概念，您*永远不*应该以明文形式存储密码——使用[hashlib 对](http://docs.python.org/2/library/hashlib.html)它们进行散列。散列函数接受输入字符串并确定性地将其转换为固定长度的字符混杂。给定输入，很容易确定散列，但给定散列，很难确定创建它的输入。

因此，您需要在用户首次设置密码时对其进行哈希处理，将哈希值保存在数据库中，然后对用户在登录时提供的输入进行哈希处理以检查是否匹配。

说了这么多，如果你真的想从头开始实现一个*安全的身份验证系统，你可能会不知所措。*即使是非常优秀的程序员也可能没有意识到安全方面的许多细微差别，许多框架都内置了这种类型的功能是有原因的。

但是，如果这只是一个理论练习，或者是学习一些编程技术的一种方式，那么我将首先查看有关使用 Python 与 SQL 数据库交互的教程。

# plugins - 针对多个平台的解决方案的综合安装程序解决方案

> ID：14247942
> 
> 赞同：0
> 
> 时间：2013-01-09T22:51:28.393
> 
> 标签：plugins, windows-installer, outlook-addin

我正在开发一个 Outlook 插件解决方案，该解决方案涉及插件本身和一个协同工作的 Windows 应用程序。

1.  该插件针对多个版本的 Outlook - 2007、2010 和 2013。
2.  Windows 应用程序为 x86 和 64 位处理器使用不同的库。
3.  当然，插件和应用程序都有依赖关系。

除了纯安装之外，我还想让自动更新成为可能。它可以像 Windows 应用程序中的自定义代码一样简单，以检查预定义位置的更新。但我想知道我的选择。

我现在想到的解决方案，我想请 SO 社区评估如下：

1.  为每个应用程序和配置组合单独的 Windows 安装项目（生成 MSI 文件）（这可能是多达 8 个不同的 msi 文件）
2.  一个常见的引导程序项目，检测当前系统配置并安装先决条件和选定的 msis。
3.  MSI 不会嵌入先决条件，只有 uber-installer/bootstrapper 会有这些。

我错过了什么吗？这个解决方案可行吗？是否有第三方替代 Windows 安装项目可以让我的生活更轻松？功能齐全的安装盾可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:10:28.367

如果这实际上对某人有帮助，我采用的解决方案是令人难以置信的可定制安装程序解决方案： Tarma 的[InstallMate 7](http://www.tarma.com/)。

您可以从他们的网站上找到更多信息，但让我感兴趣的功能是：

1.  内置对 x86 和 x64 的支持
2.  可定制的先决条件
3.  Tarma还提供了独立的更新工具，大大简化了自动更新。
4.  价格！忘记在其他地方的类似功能上花费 5K。

# python - 在 python 2.7 中使用列表推导将对象值列表连接到字符串中

> ID：14247948
> 
> 赞同：1
> 
> 时间：2013-01-09T22:51:59.510
> 
> 标签：python, map, list-comprehension

我有一个对象列表。在一行中，我想创建一个字符串，其中包含列表中每个对象的特定变量，用逗号分隔。

现在我可以使用列表理解和映射的组合来实现这一点，如下所示：

```
','.join(map(str, [instance.public_dns_name for instance in instances])) 
```

或使用 lambda：

```
','.join(map(str, [(lambda(i): i.public_dns_name)(instance) for instance in instances])) 
```

每个实例对象都有一个返回主机名的“public_dns_name”变量。这会返回一个像这样的字符串：

```
host1,host2,hos3,host4 
```

是否可以仅使用列表理解来实现相同的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:54:05.140

你不能*只*使用列表推导，你仍然需要使用`join`.

使用生成器表达式更有效

```
','.join(str(instance.public_dns_name) for instance in instances) 
```

列表理解如下所示：

```
','.join([str(instance.public_dns_name) for instance in instances]) 
```

不同之处在于它在加入之前在内存中创建整个列表，而生成器表达式将在加入组件时创建它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:54:22.933

我不确定您所说的“仅列表理解”是什么意思，您`join`最终仍应使用，但该过程可能远没有那么复杂：

```
','.join(str(instance.public_dns_name) for instance in instances) 
```

无需在这里创建 lambda 函数。请记住，它`join`需要任何*可迭代*的，因此您不必创建一个列表只是为了将它传递给`join`.

# jquery - iPhone jQuery 显示/隐藏与自动滚动幻灯片的冲突

> ID：14247949
> 
> 赞同：0
> 
> 时间：2013-01-09T22:52:05.210
> 
> 标签：jquery, iphone

iPod 和 iPhone（4,4S，可能是 5）似乎存在问题。我们有一个使用 Flex Slider 的自动滚动幻灯片。我有一个切换触发器来显示和隐藏我们的菜单（div）。当菜单切换打开并且幻灯片自动滚动到下一个图像时，菜单关闭。在我的 Android 手机（Android OS 4.1）上，它似乎工作得很好。

似乎 iDevices 的 Javascript 存在问题。这是一个正确的假设吗？有人对我的问题有可能的想法或解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:17:28.540

找到了罪魁祸首。我将代码包装在 $(window).resize 函数中，以检测屏幕大小以在屏幕大小超过 480 像素时显示菜单。这似乎解决了我的问题。我把它从调整大小中拿出来。
下面是我的原始代码。不要使用它。这是为了不做什么。如果有人对如何解决它有任何想法，那可能会有所帮助，但这似乎行不通。似乎它会导致我的自动滚动 Flex 滑块或任何其他动画滑块之间发生冲突。

//菜单显示隐藏

```
 $(window).load(function(){
var $window = $(window);
var $topNav = $('#mainNavTop');
var $utilContent = $('#utilityContent');
function checkWidth() {
    var windowsize = $window.width();
 if(windowsize < 480){
    $('#mainNavTop,#utilityContent').css('display','none');
    $('.mobileNavIcon').click(function(event){
        event.preventDefault();
        $topNav.toggle();
        $(this).toggleClass('active');
    });

    $('.mobileSearchIcon').click(function(event){
        event.preventDefault();
        $utilContent.toggle();
        $(this).toggleClass('active');
    });
}
    else{
    $('#mainNavTop,#utilityContent').css('display','block');
    }
 }
// Execute on load
checkWidth();
// Bind event listener
$(window).resize(checkWidth);
}); 
```

# java - 有没有办法在服务器端在 node.js 中运行 Java Applet？

> ID：14247951
> 
> 赞同：1
> 
> 时间：2013-01-09T22:52:07.173
> 
> 标签：java, javascript, node.js, applet

有没有办法在服务器端在 node.js 中运行 Java Applet？

听起来可能很疯狂，但我正在寻找一种在我的 node.js 应用服务器上运行第三方 Java 小程序的方法。

它用于进行我不愿意迁移到 JavaScript 代码的奇怪计算。这有可能吗？有什么建议么？我需要根据请求参数将此计算的结果作为网页发送给用户。

我最初在考虑如何在 node.js 和独立运行的 Java Applet 之间进行通信。谷歌了一下，但没有成功。有人可以建议如何更好地 google 或指出一些好的资源吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:41:24.637

使用 JNI 对您没有帮助，因为小程序不会在无头环境中运行。小程序直接依赖于 AWT，因此需要 GUI 环境才能运行。

假设小程序的许可证问题允许您重用代码，那么我的解决方案是[反编译](https://stackoverflow.com/questions/272535/how-do-i-decompile-java-class-files)小程序的类并使用生成的 java 创建一个带有 main 的普通 java 类，它将运行所需的计算并返回结果。

除非代码被混淆，否则理解反编译的代码相对简单，并且应该相对轻松地适应您想要做的事情。

一旦你的 java 代码从命令行运行，你就可以使用[node-java](https://github.com/nearinfinity/node-java)项目从 node.js 调用 java 代码并得到你的结果。

# android - 在片段和活动之间进行通信 - 最佳实践

> ID：14247954
> 
> 赞同：65
> 
> 时间：2013-01-09T22:52:27.020
> 
> 标签：android, android-fragments, android-activity, communication

这个问题主要是就处理我的应用程序的最佳方式征求意见。我有一个活动正在处理三个片段。片段 A 有一个可点击的照片元素，片段 B 有 4 个可点击的元素和按钮。单击照片时，另一个片段仅显示详细信息。我正在使用 ActionBarSherlock。

![截屏](../Images/994cc0bf6ac44aa0cf2d6161a5481ed5.png)

前进和后退按钮需要分别将照片更改为下一个或上一个姿势。我可以将照片和按钮保留在同一个片段中，但想将它们分开，以防我想在平板电脑中重新排列它们。

我需要一些建议——我应该把片段 A 和 B 结合起来吗？如果没有，我需要弄清楚如何为 3 个可点击项目实现接口。

我考虑过使用 Roboguice，但我已经在使用 SherlockFragmentActivity 进行扩展，所以这是不行的。我看到提到了 Otto，但是我没有看到关于如何包含在项目中的好的教程。您认为最佳设计实践应该是什么？

我还需要帮助弄清楚如何在片段和活动之间进行通信。我想在应用程序中保留一些“全局”数据，例如姿势 ID。除了股票 android 开发人员的信息之外，我还能看到一些示例代码吗？这并不是那么有帮助。

顺便说一句，我已经将有关每个姿势的所有信息存储在 SQLite 数据库中。那是容易的部分。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2014-08-19T20:38:10.500

在 Activity 和 Fragment 之间进行通信的最简单方法是使用接口。这个想法基本上是在给定的片段 A 中定义一个接口，并让活动实现该接口。

一旦它实现了那个接口，你就可以在它覆盖的方法中做任何你想做的事情。

接口的另一个重要部分是您必须从片段中调用抽象方法并记住将其转换为您的活动。如果没有正确完成，它应该捕获 ClassCastException。

[简单开发人员博客](http://simpledeveloper.com/how-to-communicate-between-fragments-and-activities/)上有一个很好的教程，介绍了如何做这种事情。

我希望这对你有帮助！

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-09T23:13:49.483

在 Fragment 之间进行通信的建议方法是使用由主 Activity 管理的回调\侦听器。

我认为这个页面上的代码很清楚：http: [//developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

您还可以参考 IO 2012 Schedule 应用程序，该应用程序旨在成为事实上的参考应用程序。可以在这里找到： [http ://code.google.com/p/iosched/](http://code.google.com/p/iosched/)

此外，这是一个包含很好信息的 SO 问题： [如何在片段之间传递数据](https://stackoverflow.com/questions/5194548/how-to-pass-data-between-fragments)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-09-03T17:48:14.173

它由一个回调接口实现：

> 首先，我们要做一个接口：

```
public interface UpdateFrag {
     void updatefrag();
} 
```

> 在活动中执行以下代码：

```
UpdateFrag updatfrag ;

public void updateApi(UpdateFrag listener) {
        updatfrag = listener;
} 
```

> 从必须在 Activity 中触发回调的事件：

```
updatfrag.updatefrag(); 
```

> 在 Fragment 中实现接口，`CreateView`执行以下代码：

```
 ((Home)getActivity()).updateApi(new UpdateFrag() {
        @Override
        public void updatefrag() {
              .....your stuff......
        }
 }); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-08-10T15:33:29.407

an`Activity`和`Fragment`s之间的通信有多种选择，但经过大量阅读和经验，我发现可以这样恢复：

*   `Activity`想和孩子交流`Fragment`=> 只需在你的类中编写公共方法`Fragment`，然后让`Activity`他们调用
*   `Fragment`想要与父母沟通`Activity`=> 这需要更多的工作，正如官方 Android 链接[https://developer.android.com/training/basics/fragments/communicating](https://developer.android.com/training/basics/fragments/communicating)所建议的那样，定义`interface`一个将由 执行`Activity`，并且将为任何`Activity`想要与之通信的人建立合同`Fragment`。例如，如果您`FragmentA`想要与`activity`包含它的任何对象进行通信，则定义`FragmentAInterface`which 将定义`FragmentA`调用`activities`决定使用它的方法的方法。
*   A`Fragment`想与其他人交流`Fragment`=> 这是您遇到最“复杂”情况的情况。由于您可能需要将数据从 FragmentA 传递到 FragmentB，反之亦然，这可能导致我们定义 2 个接口，它们`FragmentAInterface`将由. 这将开始使事情变得混乱。并想象一下，如果您还有更多的地方，甚至父母也想与他们交流。好吧，这个案例是为 the and it's建立共享的完美时机。更多信息在这里[https://developer.android.com/topic/libraries/architecture/viewmodel](https://developer.android.com/topic/libraries/architecture/viewmodel)。基本上，您需要定义一个`FragmentB``FragmentAInterface``FragmentA``Fragment``activity``ViewModel``activity``fragment``SharedViewModel`类，它包含您想要在它们之间共享的所有数据，`activity`并且它们之间`fragments`需要在它们之间进行数据通信。

这种`ViewModel`情况最终使事情变得非常简单，因为您不必添加额外的逻辑来使代码变得肮脏和混乱。此外，它还允许您将数据的收集（通过对 SQLite 数据库或 API 的调用）与`Controller`(`activities`和`fragments`) 分开。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-06-22T08:14:13.467

我做了一个注释库，可以为你做演员。看一下这个。 [https://github.com/zeroarst/callbackfragment/](https://github.com/zeroarst/callbackfragment/)

```
@CallbackFragment
public class MyFragment extends Fragment {

    @Callback
    interface FragmentCallback {
       void onClickButton(MyFragment fragment);
    }    
    private FragmentCallback mCallback;

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.bt1
                mCallback.onClickButton(this);
                break;
            case R.id.bt2
                // Because we give mandatory = false so this might be null if not implemented by the host.
                if (mCallbackNotForce != null)
                mCallbackNotForce.onClickButton(this);
                break;
        }
    }
} 
```

然后它会生成片段的子类。只需将其添加到 FragmentManager。

```
public class MainActivity extends AppCompatActivity implements MyFragment.FragmentCallback {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        getSupportFragmentManager().beginTransaction()
            .add(R.id.lo_fragm_container, MyFragmentCallbackable.create(), "MY_FRAGM")
            .commit();
    }

    Toast mToast;

    @Override
    public void onClickButton(MyFragment fragment) {
        if (mToast != null)
            mToast.cancel();
        mToast = Toast.makeText(this, "Callback from " + fragment.getTag(), Toast.LENGTH_SHORT);
        mToast.show();
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-08T13:45:57.177

在活动、片段、服务等之间有多种通信方式。最明显的一种是使用接口进行通信。但是，这不是一种有效的沟通方式。您必须实现侦听器等。

我的建议是使用事件总线。事件总线是一种发布/订阅模式的实现。

您可以订阅活动中的事件，然后可以在片段等中发布该事件。

在我[的博客文章](http://gunhansancar.com/ease-communication-between-activities-fragments-services/)中，您可以找到有关此模式的更多详细信息，以及[一个示例项目](https://github.com/gunhansancar/eventbus-example/tree/master)来展示其用法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-06-04T22:30:23.090

**谷歌推荐方法**

如果您查看[此页面](https://developer.android.com/guide/fragments/communicate#kotlin)，您会看到 Google 建议您使用和`ViewModel`之间共享数据。`Fragment``Activity`

添加此依赖项：

```
implementation "androidx.activity:activity-ktx:$activity_version" 
```

首先，定义`ViewModel`您将用于传递数据的对象。

```
class ItemViewModel : ViewModel() {
    private val mutableSelectedItem = MutableLiveData<Item>()
    val selectedItem: LiveData<Item> get() = mutableSelectedItem

    fun selectItem(item: Item) {
        mutableSelectedItem.value = item
    }
} 
```

其次，实例化`ViewModel`里面的`Activity`.

```
class MainActivity : AppCompatActivity() {
    // Using the viewModels() Kotlin property delegate from the activity-ktx
    // artifact to retrieve the ViewModel in the activity scope
    private val viewModel: ItemViewModel by viewModels()
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        viewModel.selectedItem.observe(this, Observer { item ->
            // Perform an action with the latest item data
        })
    }
} 
```

三、实例化`ViewModel`里面的`Fragment`.

```
class ListFragment : Fragment() {
    // Using the activityViewModels() Kotlin property delegate from the
    // fragment-ktx artifact to retrieve the ViewModel in the activity scope
    private val viewModel: ItemViewModel by activityViewModels()

    // Called when the item is clicked
    fun onItemClicked(item: Item) {
        // Set a new item
        viewModel.selectItem(item)
    }
} 
```

您现在可以编辑此代码以创建新的观察者或设置方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-09T23:08:20.323

我不确定我是否真的了解您想要做什么，但建议在片段之间进行通信的方法是使用 Activity 的回调，而不是直接在片段之间进行通信。见这里[http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-07T13:52:55.657

您可以在片段中创建一个带有函数声明的公共接口，并在活动中实现该接口。然后您可以从片段中调用该函数。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-16T11:17:58.153

我正在使用 Intents 将操作传达回主要活动。主要活动是通过覆盖 onNewIntent(Intent intent) 来监听这些。例如，主要活动将这些动作转换为相应的片段。

所以你可以做这样的事情：

```
public class MainActivity extends Activity  {

    public static final String INTENT_ACTION_SHOW_FOO = "show_foo";
    public static final String INTENT_ACTION_SHOW_BAR = "show_bar";

   @Override
   protected void onNewIntent(Intent intent) {
        routeIntent(intent);
   }

  private void routeIntent(Intent intent) {
       String action = intent.getAction();
       if (action != null) {               
            switch (action) {
            case INTENT_ACTION_SHOW_FOO:
                // for example show the corresponding fragment
                loadFragment(FooFragment);
                break;
            case INTENT_ACTION_SHOW_BAR:
                loadFragment(BarFragment);
                break;               
        }
    }
} 
```

然后在任何片段中显示 foo 片段：

```
Intent intent = new Intent(context, MainActivity.class);
intent.setAction(INTENT_ACTION_SHOW_FOO);
// Prevent activity to be re-instantiated if it is already running.
// Instead, the onNewEvent() is triggered
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);
getContext().startActivity(intent); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-12-29T12:26:51.130

有最新的技术可以在没有任何接口的情况下将片段与活动通信，请按照步骤 1- 在 gradle 中添加依赖项

实现 'androidx.fragment:fragment:1.3.0-rc01'

# c# - Graphics.DrawImage 速度

> ID：14247956
> 
> 赞同：0
> 
> 时间：2013-01-09T22:52:44.893
> 
> 标签：c#, performance, bitmap, gdi, drawimage

在我的程序中，我正在编写一个基本的图像编辑器。其中一部分允许用户绘制一个矩形区域，然后我弹出一个显示，显示该区域缩放了 3 倍左右（他们可以使用鼠标滚轮进一步调整）。如果他们右键单击并拖动此图像，它将在原始图像上移动缩放区域，基本上充当放大镜。

问题是，即使在相对较小的位图上，我也看到了一些严重的性能问题。如果显示缩放区域的位图在 400x400 左右，它的更新速度仍然与鼠标移动的速度一样快，并且非常平滑，但是如果我将鼠标滚轮缩放到 450x450 左右，它会立即开始分块，每秒只有大约 2 次更新，如果说。我不明白为什么这么小的增加会导致如此巨大的性能问题......就像我已经达到了一些内部内存限制或其他东西。被缩放的源位图的大小似乎并不重要，只是缩放位图的大小。

问题是我使用的是 Graphics.DrawImage 和 PictureBox。阅读这个站点，我发现这两种方法的性能通常都不是很好，但是我对 GDI 的内部工作原理知之甚少，无法提高我的速度。我希望你们中的一些人可能知道我的瓶颈在哪里，因为我可能只是以糟糕的方式使用这些工具，或者不知道有更好的工具来代替它。

这是我的鼠标事件和相关功能的一些片段。

```
private void pictureBox_MouseDown(object sender, MouseEventArgs e)
    {

        else if (e.Button == System.Windows.Forms.MouseButtons.Right)
        {
            // slide the zoomed part to look at a different area of the original image
            if (zoomFactor > 1)
            {
                isMovingZoom = true;
                // try saving the graphics object?? are these settings helping at all??
                zoomingGraphics = Graphics.FromImage(displayImage);
                zoomingGraphics.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighSpeed;
                zoomingGraphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.Low;
                zoomingGraphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighSpeed;
                zoomingGraphics.PixelOffsetMode = PixelOffsetMode.HighSpeed;
            }
        }
    }

private void pictureBox_MouseMove(object sender, MouseEventArgs e)
    {
        if (isMovingZoom)
        {
            // some computation on where they moved mouse ommitted here

            zoomRegion.X = originalZoomRegion.X + delta.X;
            zoomRegion.Y = originalZoomRegion.Y + delta.Y;
            zoomRegionEnlarged = scaleToOriginal(zoomRegion);

            // overwrite the existing displayImage to prevent more Bitmaps being allocated
            createZoomedImage(image.Bitmap, zoomRegionEnlarged, zoomFactor, displayImage, zoomingGraphics);
        }
    }

private void createZoomedImage(Bitmap source, Rectangle srcRegion, float zoom, Bitmap output, Graphics outputGraphics)
    {
        Rectangle destRect = new Rectangle(0, 0, (int)(srcRegion.Width * zoom), (int)(srcRegion.Height * zoom));

            outputGraphics.DrawImage(source, destRect, srcRegion, GraphicsUnit.Pixel);

        if (displayImage != originalDisplayImage && displayImage != output)
            displayImage.Dispose();
        setImageInBox(output);
    }

// sets the picture box image, as well as resizes the window to fit
    void setImageInBox(Bitmap bmp)
    {
        pictureBox.Image = bmp;
        displayImage = bmp;
        this.Width = pictureBox.Width + okButton.Width + SystemInformation.FrameBorderSize.Width * 2 + 25;
        this.Height = Math.Max(450, pictureBox.Height) + SystemInformation.CaptionHeight + SystemInformation.FrameBorderSize.Height * 2 + 20;
    }

private void pictureBox_MouseUp(object sender, MouseEventArgs e)
    {
        else if (e.Button == System.Windows.Forms.MouseButtons.Right)
        {
            if (isMovingZoom)
            {
                isMovingZoom = false;
                zoomingGraphics.Dispose();
            }
        }
    } 
```

正如你所看到的，我不是每次想要绘制东西时都声明一个新的位图，我正在重用一个旧的位图（以及位图的图形对象，尽管我不知道调用 Graphics. FromImage 反复）。我尝试添加秒表来对我的代码进行基准测试，但我认为 DrawImage 将功能传递给另一个线程，因此该函数声称可以相对快速地完成。`Dispose`当我不使用它们时，我会尝试使用所有的 Bitmap 和 Graphics 对象，并避免在`MouseMove`事件期间重复调用来分配/取消分配资源。我正在使用 a`PictureBox`但我认为这不是问题所在。

任何帮助加速此代码或教我 DrawImage 中发生的事情都非常感谢！我修剪了一些多余的代码以使其更美观，但如果我不小心修剪了一些重要的东西，或者没有展示我如何使用可能导致问题的东西，请告诉我，我会修改邮政。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:00:42.187

我处理此类问题的方法是在接收到 Paint 事件时，将整个图像绘制到内存位图，然后将其 BLT 到窗口。这样一来，所有的视觉闪光都被消除了，*看起来*很快，即使实际上不是。

更清楚地说，我不从鼠标事件处理程序中进行任何绘画。我只是设置了主 Paint 处理程序所需的内容，然后执行 Invalidate。所以绘制发生在鼠标事件完成之后。

* * *

补充：要在评论中回答汤姆的问题，我就是这样做的。请记住，我并没有声称它很快，只是它*看起来*很快，因为它看起来是`_e.Graphics.DrawImage(bmToDrawOn, new Point(0,0));`瞬时的。它只是从一个图像到下一个图像。用户看不到窗口被清除然后重新粉刷，一件一件的事情。它提供与双缓冲相同的效果。

```
 Graphics grToDrawOn = null;
    Bitmap bmToDrawOn = null;

    private void DgmWin_Paint(object sender, PaintEventArgs _e){
        int w = ClientRectangle.Width;
        int h = ClientRectangle.Height;
        Graphics gr = _e.Graphics;

        // if the bitmap needs to be made, do so
        if (bmToDrawOn == null) bmToDrawOn = new Bitmap(w, h, gr);
        // if the bitmap needs to be changed in size, do so
        if (bmToDrawOn.Width != w || bmToDrawOn.Height != h){
            bmToDrawOn = new Bitmap(w, h, gr);
        }
        // hook the bitmap into the graphics object
        grToDrawOn = Graphics.FromImage(bmToDrawOn);
        // clear the graphics object before drawing
        grToDrawOn.Clear(Color.White);
        // paint everything
        DoPainting();
        // copy the bitmap onto the real screen
        _e.Graphics.DrawImage(bmToDrawOn, new Point(0,0));
    }

    private void DoPainting(){
        grToDrawOn.blahblah....
    } 
```

# excel - 将动态系列添加到 Excel 图表

> ID：14247958
> 
> 赞同：0
> 
> 时间：2013-01-09T22:52:56.080
> 
> 标签：excel, excel-formula

我有下表：

```
 Label_1          Labe1_2       ...      Label_n
DATE_1            1
DATE_2                             2               
...
DATE_n                                                 3 
```

需要根据上表创建堆积条形图，其中行和列可以是动态的。我看到了一些可以处理动态行的示例，并且使用偏移量可以正常工作。

我是非常新的 excel 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:15:48.993

您可以使用与创建动态范围名称相同的方式来执行此操作。此链接包含您需要的所有信息，而不是尝试自己解释。[http://www.decisionmodels.com/optspeedf.htm](http://www.decisionmodels.com/optspeedf.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:55:28.787

我使用数据透视图克服了这个障碍！感谢尼克的尝试。

# iphone - iPhone ios6 滚动到顶部，除非页面底部可见（ajax 表）

> ID：14247959
> 
> 赞同：1
> 
> 时间：2013-01-09T22:53:01.880
> 
> 标签：iphone, ajax, ipad, codeigniter

在我的网页上，我使用 ajax 加载一些优惠。问题出现在 ios6... 除非页面底部可见，否则只要我向下滚动到可用优惠，浏览器就会跳转到页面顶部。这在 ios6 的 chrome 和移动 safari 中都发生了相同的情况。如果我很快滚动到“弹跳”页面底部，它就会停留。一旦我向上滚动并且底部不再可见，它就会跳到顶部。

任何人都知道如何围绕这个进行编码，以便滚动正常工作？

# javascript - 如何删除右键单击上下文菜单 chrome 和 firefox

> ID：14247960
> 
> 赞同：3
> 
> 时间：2013-01-09T22:53:07.403
> 
> 标签：javascript, google-chrome, firefox, safari

正如标题所暗示的，我正在寻找可以添加到我的 wordpress 网站中的脚本，该脚本可以删除右键单击上下文菜单，例如复制、复制电子邮件地址、复制图像位置等。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:07:46.617

有一个可以附加到许多对象的`event`调用。`oncontextmenu`. .

例如 。. .

> [http://jsfiddle.net/Atn6e/](http://jsfiddle.net/Atn6e/)

您必须创建自己的上下文菜单来替换您要覆盖的菜单。

# php - 无法将数据写入sql表，

> ID：14247961
> 
> 赞同：0
> 
> 时间：2013-01-09T22:53:12.630
> 
> 标签：php, mysql, sql, database, pdo

我正在尝试使用 PHP 从我的网站将一些信息写入 SQL 数据库。我可以访问数据库进行登录，但是我无法从我的网站向其中写入任何内容。此外，我无法查看任何连接错误。

表格页面：

```
<?php
    $dbh = new PDO('mysql:host='.$hostname.';dbname='.$dbname, $user, $pass);

if (!$dbh)  {  die('Could not connect: ' . mysql_error());  }else echo 'connected';echo '<br>';
if(isset($_COOKIE['username'])) 
?>  
        <div id="imagel">
        <img class="imagel" src="../images/logos/logo2.jpg" width="300" height="300" alt="studio table" />
        </div>
        <div id="textr">

        <form name="tableofevents" method="post" action="adminhome.php">
        Name of Event(Maximum of 83 characters): <input type="text" name="noe"/>
        <br>
        Event Description (Maximum of 288 characters): <input type="text" name="eventdescription"/>
        <br>
        Date of Event: <input type="text" name="date"/>
        <br>
        Ticket Price: <input type="text" name="price"/>
        <br>
        <input type="submit" name="submit" text="submit"/>
        </form> 
```

处理页面：

```
<?php

$hostname = 'localhost';
$user='******';
$pass='***********';  
$dbname='sth420';
$handler = new PDO('mysql:host='.$hostname.';dbname='.$dbname,$user,$pass);

$dbh = mysql_connect ($hostname.';dbname='.$dbname, $user, $pass);

if (!$dbh)  {  die('Could not connect: ' . mysql_error());  }
else echo 'connected';echo '<br>';

if(isset($_COOKIE['username'])) 
{
    $username=$_COOKIE['username'];
    $password=$_COOKIE['password'];

    $sql='SELECT * FROM Users WHERE ID=:id';   
    $results = $handler->prepare($sql);
    $results->execute([':id' => $username]);
    $row = $results->fetch();
    if($row!=null)

    {
        $pword = $row['Password'];
        if($pword == $password)
        {
            if(isset($_POST['submit']))
            {
                $noe=$_POST['noe'];
                $ed=$_POST['eventdescription'];
                $date=$_POST['date'];
                $price=$_POST['price'];

                    $sql='INSERT INTO ismievents ( title, evtdesc, dandt, price ) VALUES(0, :noe, :eventdescription, :date, :price)';
                    mysql_error()
                    $results = $handler->prepare($sql);
                    $results->execute([':noe' => $noe, ':eventdescription' => $ed, ':date' => $date, ':price' => $price]);
                    $handler = null;
                    header('Location: events.html');

            }
        }
    }
}
if (!mysql_query($sql,$dbh))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($dbh);
require_once('adminhome.html');

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:55:49.280

您正在混合 PDO 和`mysql_connect()`. 这是无效的，因为它们是不兼容的 API。删除所有对您的 PDO 语句的引用`mysql_*()`并仅坚持使用。您基本上复制了每个 PDO 语句，但调用不正确，`mysql_query()`但您不应该有任何`mysql_connect(), mysql_query(), mysql_error(), mysql_fetch_*()`.

请参阅[有关 PDO 准备语句的手册](http://php.net/manual/en/pdo.prepared-statements.php)以查看许多示例。

我在这里看到列数不匹配。您列出 4 列，但`VALUES ()`列表包含 5：

```
// Prepared statemetn looks ok...
$sql='INSERT INTO ismievents ( title, evtdesc, dandt, price ) VALUES(0, :noe, :eventdescription, :date, :price)';
// But this is meaningless here...
mysql_error() 
```

我还注意到您正在使用 PHP 5.4 数组文字，例如：

```
$results->execute([':noe' => $noe, ':eventdescription' => $ed, ':date' => $date, ':price' => $price]); 
```

希望您实际上是在 PHP 5.4 中运行此代码。

确实，您需要将此代码带回绘图板上，以清除 PDO 和`mysql_*()`. 之后，您将能够缩小其他问题的范围。

最后一点，将*密码*存储在`$_COOKIE`. 成功登录后，将登录状态存储在`$_SESSION`.

# drupal - 在 page.tpl.php drupal 7 中显示页面视图

> ID：14247963
> 
> 赞同：0
> 
> 时间：2013-01-09T22:53:18.750
> 
> 标签：drupal, drupal-7, drupal-theming

我有一个名为 page--advertsindex.tpl.php 的文件。现在我要做的是在 page.tpl.php 的内容区域内显示该页面。

page--advertsindex.tpl.php 包含需要在 page.tpl 的内容区域中呈现的 HTML，但是当我导航到 my_drupal_site/advertsindex 时它当前所做的只是显示页面的 html--advertsindex，而不是页面.tpl.php 文件和内容区域中的页面--advertsindex..

我怎样才能做到这一点？还是有不同的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:56:47.290

Any`page--<identifier>.tpl.php`将用于**代替**`page.tpl.php`url 。`/identifier`这是设计和该系统的全部目的。这也可以扩展到更深的路径：`page--foo-bar-baz.tpl.php`对于`/foo/bar/baz`.

如果您希望某些内容出现在 上`/identifier`，您有两种选择：有条件地包含该内容或复制该内容。选择什么取决于你的情况。

有条件地包括：内部`page.tpl.php`：

```
<div class="footer">
  <?php if (arg(0) == "advertsindex"): ?>
    <?php print theme("advertsindex_disclaimer"); ?>
  <?php endif; ?>
</div> 
```

覆盖：引入一个`page--advertsindex.tpl.php`：

```
<div id="content">
  <?php print $content ?>
</div> 
```

什么时候选择什么：

仅在以下情况下使用条件包含或条件渲染：

*   要包含或排除的内容很小且共享。像 `[大 20+ 行的首页 HTML][普通 HTML] 这样的模式非常糟糕。
*   要包含的内容需要引入各种花哨的新变量。像这样的模式真的很糟糕。Drupals 主题系统是推送（主题从模块中获取变量）并且从不拉取（主题在模块处请求参数）。

在所有其他情况下，您将使用覆盖。是的，这将包括很多重复，但这是设计使然，并被认为是 Drupal 的默认做法。为避免不得不修改 20 多个文件中的某些 HTML，请尽可能晚地“拆分”或“复制”它们。

一个经验法则是条件应该只有几行，并且永远不需要父级中不可用的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:35:33.880

如果**advertsindex**是您的内容类型之一，那么您必须创建 node--advertsindex.tpl.php 文件而不是 page--advertsindex.tpl.php。或者如果您不想在 page.tpl.php 页面中显示某些内容，那么最好将 page.tpl.php 的所有代码复制到 YOUR-Custom_page.tpl.php 并将您的代码放在 YOUR- 的内容部分中Custom_page.tpl.php。

我认为它有帮助。

# python - Python：如何在两个模块之间共享一个变量

> ID：14247974
> 
> 赞同：3
> 
> 时间：2013-01-09T22:54:15.280
> 
> 标签：python

我查看了其他一些解决问题的线程，但不太明白。

假设我有一个包含共享变量的配置文件：

### 配置文件

```
flag = False 
```

### 测试1.py

```
import config
while(1):
    config.flag = True
    print config.flag 
```

### 测试2.py

```
import config
while(1):
    config.flag = False
    print config.flag 
```

如果现在我运行`Test1.py`and ，我可以在输出中`Test2.py`看到切换吗？`'True'` `'False'`我现在不关心同步，只要它可以访问共享变量，就可以了。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T22:59:58.240

不会。只要您在不同的进程中运行这两个实例，内存就不会被神奇地共享。

您正在启动两个不同的 (Python) 进程。这些进程导入配置模块。简而言之，这只是在 config.py 中加载代码的一种形式。进程之间没有进一步的通信。

（附带说明，config.py 中的代码仅在第一次被解释，它被编译并保存在单独的 config.pyc 中，加载速度更快。下次编辑 config.py 时，将重新创建 config.pyc） .

还有其他选择：

*   使用线程
*   使用其他形式的内存共享，例如管道。

线程示例：

# 配置文件

```
flag = False 
```

# 测试.py

```
import thread
import time

import config

def test1():
    while 1:
        config.flag = True
        time.sleep(0.7)
        print 'test1:', config.flag
        time.sleep(1)

def test2():
    while 1:
        config.flag = False
        time.sleep(1.1)
        print 'test2:', config.flag
        time.sleep(1)

thread.start_new(test1, ())
test2() 
```

发布您尝试这样做的原因可能会有所帮助。多线程是一个困难的话题。这个问题可能有用：[https ://stackoverflow.com/questions/4690518/multithreading-in-python](https://stackoverflow.com/questions/4690518/multithreading-in-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T23:05:00.613

不，config.flag 不会在 Test1.py 和 Test2.py 之间共享。Test1.py 和 Test2.py 将在 Python 解释器的不同实例上运行。每个解释都将 config.py 加载到它自己的内存中。

一种选择是使用[线程](http://docs.python.org/2/library/threading.html)在同一个 Python 实例上运行 Test1.py 和 Test2.py。

另一种选择是存储并持续从磁盘加载值，可能通过将其保存在文本文件中或使用[SQLite](http://docs.python.org/2/library/sqlite3.html)。

# d3.js - 如何从具有空值的csv中绘制连续折线图？

> ID：14247981
> 
> 赞同：0
> 
> 时间：2013-01-09T22:55:10.573
> 
> 标签：d3.js

我有一个 CSV 文件，其中包含以不同速度测量的值。我想将其显示为带有多条连续线的单个图表。

以下是记录的数据示例：

```
"date","Value button A","Temperature room1","temperature room2","Hygrometry","CO2 room1"
2012/12/22-11:34,,21.6,,40,390.08
2012/12/22-11:35,,21.6,,40,390.08
2012/12/22-11:36,,21.6,19.7,40,390.08
2012/12/22-11:37,,21.6,,40,390.08
2012/12/22-11:38,,21.6,,40,390.08
2012/12/22-11:55,,22,,40,390.08
2012/12/22-11:56,,22,,40,390.08
2012/12/22-11:57,,22.1,19.9,39,390.08
2012/12/22-11:58,,22.1,,39,390.08
2012/12/22-12:11,,22.3,,39,390.08
2012/12/22-12:12,,22.3,,39,390.08
2012/12/22-12:13,,22.3,,39,390.08
2012/12/22-12:14,,22.3,19.8,40,390.08
2012/12/22-12:37,,22.7,,39,390.08
2012/12/22-12:38,,22.7,,39,390.08
2012/12/22-12:39,,22.7,20.2,39,390.08 
```

我的图表应该有带日期的 x 轴和带值的 y 轴。

正如您在此处看到的，“温度室 2”值仅在温度变化时存储。

有没有办法用这些数据显示连续线而不必填充 CSV 数据的空单元格？

# ios - 使用 AVMutableComposition 组合视频和音频

> ID：14247985
> 
> 赞同：8
> 
> 时间：2013-01-09T22:55:44.727
> 
> 标签：ios, avfoundation, avmutablecomposition

我有一个奇怪的问题。在我的应用程序中，我使用下面的代码组合了多个音频和视频文件。一旦我将生成的视频从设备下载到计算机并使用 Quick Time 播放，生成的视频似乎可以正常工作，但每当我尝试使用 UIWebView 或 AVPLayer 播放新合成的视频时，我只能看到合并视频文件的第一部分。

此外，当我尝试使用 MPMoviePlayerController 播放时，它会挂在“正在加载”上。

我可以听到所有作品的音频。为了清楚起见，我有两个数组：1-带有音频文件路径的音频片段[song1，song2，song3]；2-带有视频文件路径的moviePieces [movie1,movie2,movie3]；合并这些文件后，我只能看到movie1，但可以听到song1 + song2 + song3。PS歌曲和电影长度不同（相差小于0.2s）。任何帮助将不胜感激。提前谢谢你， Janusz

```
-(void)putFilesTogether{
AVMutableComposition *mixComposition = [AVMutableComposition composition]; 
AVMutableCompositionTrack *videoCompositionTrack =[[AVMutableCompositionTrack alloc]init];
AVMutableCompositionTrack *audioCompositionTrack =[[AVMutableCompositionTrack alloc]init];

NSLog(@" movie  %@ audio %@ ", moviePieces, audioPieces);

NSError * error;
for(int i=0;i<moviePieces.count;i++)
{
    NSFileManager * fm = [NSFileManager defaultManager];
    NSString * movieFilePath;
    NSString * audioFilePath;
    movieFilePath = [moviePieces objectAtIndex:i];
    audioFilePath = [audioPieces objectAtIndex:i];

    if(![fm fileExistsAtPath:movieFilePath]){
        NSLog(@"Movie doesn't exist %@ ",movieFilePath);
    }
    else{
        NSLog(@"Movie exist %@ ",movieFilePath);
    }

    if(![fm fileExistsAtPath:audioFilePath]){
        NSLog(@"Audio doesn't exist %@ ",audioFilePath);
    }
    else{
        NSLog(@"Audio exists %@ ",audioFilePath);
    }

   NSURL *videoUrl = [NSURL fileURLWithPath:movieFilePath];
   NSURL *audioUrl = [NSURL fileURLWithPath:audioFilePath];

    AVURLAsset *videoasset = [[AVURLAsset alloc]initWithURL:videoUrl options:nil];
     AVAssetTrack *videoAssetTrack= [[videoasset tracksWithMediaType:AVMediaTypeVideo] lastObject];

    AVURLAsset *audioasset = [[AVURLAsset alloc]initWithURL:audioUrl options:nil];
    AVAssetTrack *audioAssetTrack= [[audioasset tracksWithMediaType:AVMediaTypeAudio] lastObject];

    videoCompositionTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

    audioCompositionTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

    CMTime tempTime = mixComposition.duration;

    [audioCompositionTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioasset.duration) ofTrack:audioAssetTrack atTime:tempTime error:&error];

    [videoCompositionTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoasset.duration) ofTrack:videoAssetTrack atTime:tempTime error:&error];

    if(error)
    {
        NSLog(@"Ups. Something went wrong! %@", [error debugDescription]);
    }
}

NSDate *now = [NSDate dateWithTimeIntervalSinceNow:0];
NSString *caldate = [now description];

float ran = arc4random()%1000;
NSString * pathToSave = [NSString stringWithFormat:@"Output%@%f.mp4",caldate,ran];
pathToSave =[DOCUMENTS_FOLDER stringByAppendingPathComponent:pathToSave];
NSURL *movieUrl = [NSURL fileURLWithPath:pathToSave];

AVAssetExportSession *exporter =[[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetPassthrough];

exporter.outputFileType=AVFileTypeQuickTimeMovie;
exporter.outputURL=movieUrl;
exporter.shouldOptimizeForNetworkUse=YES;

CMTimeValue val = mixComposition.duration.value;

CMTime start=CMTimeMake(0, 600);
CMTime duration=CMTimeMake(val, 600);
CMTimeRange range=CMTimeRangeMake(start, duration);
exporter.timeRange=range;

[exporter exportAsynchronouslyWithCompletionHandler:^{
    switch ([exporter status]) {
        case AVAssetExportSessionStatusFailed:{
            NSLog(@"Export failed: %@ %@", [[exporter error] localizedDescription],[[exporter error]debugDescription]);
            NSString * message = @"Movie wasn't created. Try again later.";
            [self performSelectorOnMainThread:@selector(dismissMe:) withObject:message waitUntilDone:NO];
            break;}
        case AVAssetExportSessionStatusCancelled:{ NSLog(@"Export canceled");
            NSString * message1 = @"Movie wasn't created. Try again later.";
            [self performSelectorOnMainThread:@selector(dismissMe:) withObject:message1 waitUntilDone:NO];
            break;}
        case AVAssetExportSessionStatusCompleted:
        {
            NSString * message = @"Movie was successfully created.";
            CMTime duration = mixComposition.duration;

            [self saveData:duration ofPath:pathToSave];
            [self cleanFiles];
            [self performSelectorOnMainThread:@selector(dismissMe:) withObject:message waitUntilDone:NO];
        }
    }}]; 
```

}

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-13T10:48:21.213

问题在于：

```
videoCompositionTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

audioCompositionTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid]; 
```

它们需要移到 for 循环体之外。

# wordpress - 列出最近 6 个帖子的议程页面，按月分组（dsc）

> ID：14247988
> 
> 赞同：0
> 
> 时间：2013-01-09T22:56:10.200
> 
> 标签：wordpress, class, posts

我可以使用一些帮助吗？我比 PHP 的菜鸟还差。

我正在尝试创建一个从特定类别（议程）请求帖子的循环。我需要来自特定月份的 6 个帖子，按 2 行 3 列堆叠，如下图所示。

[http://imageshack.us/scaled/landing/833/schemeq.jpg](http://imageshack.us/scaled/landing/833/schemeq.jpg)

我试图合并代码并使其工作，但我不知道我做错了什么。任何帮助都会很棒。

```
<?php $count = 0; ?>
<?php for ($i=1; i<12; $i++)
{
    $month=$i;
    $nQuery = new WP_Query("monthnum=$month&order=DSC&posts_per_page=6" );
    if (nQuery->have_posts()) : while (nQuery->have_posts()) : nQuery->the_post();

<div class="box<?php if( $count%3 == 0 ) { echo "'-1'; }; $count++; ?> post">
            <a href="<?php the_permalink(); ?>" class="alignleft" > 
            <?php if ( has_post_thumbnail() ) { the_post_thumbnail('postfeatured'); } else { ?> <img src="/wp/wp-content/uploads/2012/12/thumb_featured.jpg" alt="<?php the_title(); ?>" />
    <?php } ?> </a>
            <div class="entry-meta">
                <?php twentyten_posted_on(); ?>
                <span class="comments-link"><?php comments_popup_link( __( '0', 'twentyten' ), __( '1', 'twentyten' ), __( '%', 'twentyten' ) ); ?></span>
            </div><!-- .entry-meta -->
            <h2><span class="entry-title"><a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a></span></h2>
            <div class="entry-summary">
                <?php the_excerpt(); ?>
            </div><!-- .entry-summary -->
</div>
}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:09:40.850

你现在得到什么结果？很简单，您可以使用 CSS 处理列。另外，我在您的查询中没有看到任何`cat`论点。

# ruby-on-rails - 运行 Autotest 时在任何源中都找不到 ZenTest-4.7.0

> ID：14247993
> 
> 赞同：0
> 
> 时间：2013-01-09T22:56:52.637
> 
> 标签：ruby-on-rails, autotest

运行自动测试时，出现错误`Could not find ZenTest-4.7.0 in any of the sources`。看完[这篇文章](https://stackoverflow.com/questions/7767292/could-not-find-zentest-4-6-0-in-any-of-the-sources)后，我删除了 gemfile.lock，运行 'bundle install'，然后尝试重新运行 autotest。现在我得到了错误`Could not find rake-10.0.3 in any of the sources`。仅供参考，我正在使用 RBENV，并且我在运行我的应用程序时没有其他问题（rails c、rails s、rake，...）。这是我的 gem 文件（顺便说一句，两个“丢失的”文件都出现在 gemfile.lock 中）：

```
source 'http://rubygems.org'

gem 'rails', '3.1.3'

gem 'rake'

gem 'pg', '0.13.2'

# Sidekiq handles background jobs, using threading
gem 'sidekiq', '>= 2.6.1'
# Need the following gems for sidekiq/web
gem 'slim'
# if you require 'sinatra' you get the DSL extended to Object
gem 'sinatra', :require => nil

gem 'heroku-api'    # Need the API for scaling sidekiq

gem 'json'

gem 'premailer'   

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',  '3.1.4'
  gem 'coffee-rails', '~> 3.1.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
gem 'bcrypt-ruby', '~> 3.0.0'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# Bundle the extra gems:
gem 'mechanize'
gem 'nokogiri'
gem 'spreadsheet'
gem 'xml-simple'
gem 'faker', '~> 0.3.1'

# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
group :development do
  gem 'rspec-rails'
    gem 'ruby-debug19'
end

group :test do
    gem 'rspec-rails'
    gem 'ZenTest'
  gem 'shoulda-matchers'
  gem 'webrat', '0.7.1'
    gem 'factory_girl_rails'
    gem 'ruby-debug19'
end

gem 'geoip'
gem 'thin'

gem 'htmlentities' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:31:48.213

我不是 100% 确定，但我认为你只是这样做：

```
gem install ZenTest 
```

并且可能

```
gem install autotest-rails 
```

从您的应用程序目录中。这些家伙不是由您的 gemfile 和 bundler 管理的

# ruby-on-rails - 在使用 When 和 Capistrano 时，在任何源中都找不到 rake 10.0.3

> ID：14247996
> 
> 赞同：4
> 
> 时间：2013-01-09T22:57:20.130
> 
> 标签：ruby-on-rails, rake, capistrano, bundler, whenever

我正在尝试在 3.2.8 上通过我的 Rails 应用程序使用 Capistrano 时使用 gem，使用 RVM 和该 Rails 版本的 gemset。

我收到以下错误：**在任何源中都找不到 rake-10.0.3 (Bundler::GemNotFound)**

这是错误的输出（我登录了一个文件）：

```
/home/some_user/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/spec_set.rb:90:in `block in materialize': Could not find rake-10.0.3 in any of the sources (Bundler::GemNotFound)
    from /home/some_user/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/spec_set.rb:83:in `map!'
    from /home/some_user/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/spec_set.rb:83:in `materialize'
    from /home/some_user/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/definition.rb:113:in `specs'
    from /home/some_user/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/definition.rb:158:in `specs_for'
    from /home/some_user/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/definition.rb:147:in `requested_specs'
    from /home/some_user/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/environment.rb:23:in `requested_specs'
    from /home/some_user/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:11:in `setup'
    from /home/some_user/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler.rb:116:in `setup'
    from /home/some_user/.rvm/gems/ruby-1.9.3-p286@global/gems/bundler-1.2.1/lib/bundler/setup.rb:17:in `<top (required)>'
    from /home/some_user/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /home/some_user/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /home/some_user/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /home/some_user/some_user/config/boot.rb:6:in `<top (required)>'
    from /home/some_user/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/some_user/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from script/rails:5:in `<main>' 
```

我在使用 Rake 10.0.2 时也遇到了错误（我进行了**捆绑更新**并获得了 Rake 10.0.3，然后将其留待测试）。另外，我注意到捆绑器正在搜索@global，而我认为它应该搜索gemset（称为@r328，位于/home/some_user/.rvm/gems）。

.rvmrc（位于项目内部）

```
source ~/.profile
rvm use 1.9.3@r328
rvm_trust_rvmrcs_flag=1 
```

。轮廓

```
if [ -n "$BASH_VERSION" ]; then
    # include .bashrc if it exists
    if [ -f "$HOME/.bashrc" ]; then
    . "$HOME/.bashrc"
    fi
fi

# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/bin" ] ; then
    PATH="$HOME/bin:$PATH"
fi
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

schedule.rb（用于测试）

```
set :output, "#{path}/log/cron.log"

every 1.minute do
  runner "MenuOrder.send_resume(2)"
end 
```

部署.rb

```
set :whenever_command, "bundle exec whenever"
require "whenever/capistrano" 
```

宝石列表的输出

```
actionmailer (3.2.8)
actionpack (3.2.8)
active_utils (1.0.5)
activeadmin (0.5.0)
activemerchant (1.29.3, 1.28.0)
activemodel (3.2.8)
activerecord (3.2.8)
activeresource (3.2.8)
activesupport (3.2.8)
arbre (1.0.1)
arel (3.0.2)
authorize-net (1.5.2)
bcrypt-ruby (3.0.1)
bourbon (3.0.1, 2.1.2, 2.1.1)
builder (3.0.4)
bundler (1.2.1)
capistrano (2.13.5)
carrierwave (0.8.0, 0.7.1, 0.7.0)
chronic (0.9.0)
cocaine (0.4.2)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.4.0)
daemon_controller (1.1.0)
daemons (1.1.9)
delayed_job (3.0.4)
delayed_job_active_record (0.3.3)
devise (2.2.0, 2.1.2)
erubis (2.7.0)
execjs (1.4.0)
fastercsv (1.5.5)
fastthread (1.0.7)
formtastic (2.2.1)
has_scope (0.5.1)
highline (1.6.15)
hike (1.2.1)
i18n (0.6.1)
inherited_resources (1.3.1)
journey (1.0.4)
jquery-rails (2.1.4, 2.1.3)
json (1.7.6, 1.7.5)
kaminari (0.14.1)
mail (2.4.4)
meta_search (1.1.3)
mime-types (1.19)
money (5.1.0)
multi_json (1.5.0, 1.3.7, 1.3.6)
mysql2 (0.3.11)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.6.2)
net-ssh-gateway (1.1.0)
nokogiri (1.5.6, 1.5.5)
orm_adapter (0.4.0)
paperclip (3.4.0, 3.3.1)
passenger (3.9.1.beta, 3.0.19, 3.0.18)
polyamorous (0.5.0)
polyglot (0.3.3)
rack (1.4.3, 1.4.1)
rack-cache (1.2)
rack-raw-upload (1.1.1, 1.1.0)
rack-ssl (1.3.2)
rack-test (0.6.2)
rails (3.2.8)
railties (3.2.8)
rake (10.0.3, 10.0.2, 0.9.2.2)
rdoc (3.12)
recaptcha (0.3.4)
responders (0.9.3)
rich (1.4.1, 1.3.1)
rmagick (2.13.1)
rubygems-bundler (1.1.0)
rvm (1.11.3.5)
sass (3.2.5, 3.2.3, 3.2.1)
sass-rails (3.2.5)
sprockets (2.1.3)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.12)
tzinfo (0.3.35, 0.3.34)
uglifier (1.3.0)
warden (1.2.1)
whenever (0.8.1) 
```

我尝试使用捆绑更新，删除 Gemfile.lock 并进行捆绑安装，卸载所有 rake gem（10.0.3 和 10.0.2）并使用捆绑安装安装 gem，但没有任何效果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T06:39:10.613

您可以使用

```
bundle install --path vendor/cache 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T20:18:25.317

我为解决这个问题所做的有点棘手：

1.  删除所有版本的 Rake
2.  删除 Gemfile.lock
3.  运行捆绑安装
4.  手动安装 Rake：gem install rake --version=10.0.2

现在它正在工作，但由于某种原因它没有写入日志文件。我会修复它并发布更新。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-08T09:54:02.860

只是`bundle install`为我工作。我认为这是因为我更新了 Ruby，但后来忘记运行 bundler。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T20:47:19.907

这个问题实际上是由于**BUNDLE_PATH**覆盖 rvm gemset 设置并将下载的文件存储在其他地方，无论何时运行**bundle install**。要解决此问题，您可以删除 .bundle 文件夹或从 .bundle/config中删除**BUNDLE_PATH行。**完成后只需重新运行 bundle install 就可以了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T06:38:13.750

那么这就是您在运行 rake 任务或将 rake 任务设置为使用 cron 时遇到的错误？如果您认为它是什么宝石，我知道有很多关于何时不工作的讨论，因为 Capistrano 实际上改变了一些内部结构并且他们一直在慢慢修复它们，但他们还没有发布宝石的更新。

搜索他们的问题，看看是否能找到与您相关的内容：

[https://github.com/javan/whenever/issues](https://github.com/javan/whenever/issues)

# eclipse - eclipse 和 maven 全局中央存储库

> ID：14247997
> 
> 赞同：4
> 
> 时间：2013-01-09T22:57:43.267
> 
> 标签：eclipse, maven

![图片](../Images/728b1a5efe5189d78c761cf467f7e334.png)你好！

我的问题与 eclipse 和 maven 集成、maven 存储库和中央镜像的全局索引更新有关。

测验是：
假设我没有指定任何特殊镜像，也没有指定 {
maveninstallationfolder}\conf\settings.xml和 {user-home}.m2\settings.xml

那么，为什么或如何 eclipse ' *maven repositories* ' 选项卡决定在
*repo.maven.apache.org/maven2*
或
*repo1.maven.org/maven2*
获取中心 ？

当我单击“*重新加载设置*”按钮时，哪个 settings.xml 正在重新加载 Eclipse？

我问这个是因为我有两个不同的 Eclipse 安装（工作中的“靛蓝”，家里的“朱诺”）。
在家里，当我点击“*更新索引*”时，它工作正常。它从中央镜像*repo.maven.apache.org*
更新它 在工作中，做同样的操作它总是无法尝试从*repo1.maven.org*更新它（我不知道我也不关心是否因为防火墙或代理问题）
我想知道如何更改它并强制它从一个或另一个获取它。

我附上一张图片来澄清

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:08:51.323

如果您有首选的中央存储库，或者您使用的是公司 maven 代理（如 nexus 或 artifactory），则可以在用户 settings.xml 中进行设置。您可能必须创建此文件。这通常在`~/.m2`linux 或`c:\Users\YourUser\.m2`Win7 或`c:\Documents and Settings\YourUser\.m2`WinXP (IIRC) 上。请注意，这与您的本地存储库基本文件夹相同。

当我在没有设置的机器上创建新的 settings.xml 时，我会转到 maven2 文档网页，找到那里的示例 settings.xml 并将其复制到我创建的新文件中。

有一个全局`settings.xml`输入，`$M2_HOME\conf`但它通常不会从默认值更改。它确实记录了您可以添加到您的所有部分，`settings.xml`因为它们具有相同的部分。（如果您在 MyEclipse 或 maven eclipse 插件之类的东西中使用 maven 的嵌入式版本，我不知道他们把它放在哪里。）

对于另一个问题，如果您需要将 Maven 配置为使用公司代理来离开公司网络到 maven Central，您可以将该信息放在您的用户`settings.xml`文件中——与您创建用于设置要使用的 URL 的文件相同。

您可能在两台机器上运行不同版本的 Maven。这将解释中央的不同名称。但这两个名字都指向同一个地方。

# javascript - 在 HTML/Javascript 中播放随机音频

> ID：14247998
> 
> 赞同：3
> 
> 时间：2013-01-09T22:57:54.110
> 
> 标签：javascript, jquery, html, audio, event-listener

我试图弄清楚如何连续播放随机音频片段，一个接一个，而不用让它们在使用 jquery 的 HTML 页面上重叠。我有在计时器上播放随机声音片段的代码，但有时它们会重叠，有时声音之间会有停顿。我已经研究过`ended`和其他 EventListeners 但我真的不知道我在做什么。这是我的代码的一部分：

```
<html>
    <audio id="audio1">
        <source src="cnn.mp3"></source>
    </audio>
    <audio id="audio2">
        <source src="sonycrackle.mp3"></source>
    </audio>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript">
            $(document).ready(function(){
                    $('audio').each(function(){
                            this.volume = 0.6;
                    });
            var tid = setInterval(playIt, 2000);
            });

            function playIt() {
                    var n = Math.ceil(Math.random() * 2);
                    $("#audio"+n).trigger('play');
            }; 
```

有没有办法在上一个声音播放后立即连续播放这些声音？FWIW 我有很多声音片段，但我只是在上面显示两个以供参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:42:15.713

所以我涉猎了一下，这是一个完整的纯 JavaScript 解决方案。

应该是跨浏览器的，没有测试过（/lazy）。如果你发现错误，请告诉我

```
var collection=[];// final collection of sounds to play
var loadedIndex=0;// horrible way of forcing a load of audio sounds

// remap audios to a buffered collection
function init(audios) {
  for(var i=0;i<audios.length;i++) {
    var audio = new Audio(audios[i]);
    collection.push(audio);
    buffer(audio);
  }
}

// did I mention it's a horrible way to buffer?
function buffer(audio) {
  if(audio.readyState==4)return loaded();
  setTimeout(function(){buffer(audio)},100);
}

// check if we're leady to dj this
function loaded() {
  loadedIndex++;
  if(collection.length==loadedIndex)playLooped();
}

// play and loop after finished
function playLooped() {
  var audio=Math.floor(Math.random() * (collection.length));
  audio=collection[audio];
  audio.play();
  setTimeout(playLooped,audio.duration*1000);
}

// the songs to be played!
init([
  'http://static1.grsites.com/archive/sounds/background/background005.mp3',
  'http://static1.grsites.com/archive/sounds/background/background006.mp3',
  'http://static1.grsites.com/archive/sounds/background/background007.mp3'
]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:02:56.100

一些快速的建议是将属性 preload="auto" 添加到音频元素并将脚本更改为 $(window).onload 而不是文档就绪。Document ready 在 html 就位时触发，但不一定在音频和其他资产（如图像）已加载时触发。

您还可以考虑在新的 Web 音频 API 中使用 AudioBuffer 接口，它被描述为“此接口代表内存驻留的音频资产（用于一次性声音和其他短音频剪辑）。” 这听起来像你需要的。我相信您遇到的部分问题（音频元素的随机暂停/延迟/声音故障）是开发它的原因之一。

在这里阅读更多：

[https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#AudioBuffer](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#AudioBuffer)

不幸的是，据说在接下来的 6（ish）个月内，只有 Chrome 和最新的 Safari 支持 Firefox 支持，而且还没有关于 IE 支持的消息。