# StackOverflow 问答 12516000-12516999

# javascript - 3状态切换按钮

> ID：12516001
> 
> 赞同：0
> 
> 时间：2012-09-20T15:33:04.757
> 
> 标签：javascript, html

我在使用按钮切换时遇到了一些问题，到目前为止，我已经研究了 10 个小时，盯着我的屏幕。我用 3 个按钮进行了切换，以播放和暂停音频并再次播放。但问题是（顺便说一下，音频效果很好）。启动时直接显示“关闭”和“暂停”按钮。当单击两者之一时，会出现音频“打开”按钮。当点击这两个按钮时，再次返回，这里是完整的脚本（除了音频播放部分，但已经有效）感谢您的所有帮助。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Naamloos document</title>

<script>
function showHide(elementid){
if (document.getElementById(elementid).style.display == 'none'){
document.getElementById(elementid).style.display = '';
} else {
document.getElementById(elementid).style.display = 'none';
}
}

function hideShow(elementid){
if (document.getElementById(elementid).style.display == ''){
document.getElementById(elementid).style.display = 'none';
} else {
document.getElementById(elementid).style.display = '';
}
}
</script>

</head>

<body>

<img id="off" src="images/general/sound-off.png" width="40" height="32" onClick="javascript:hideShow('on'); javascript:hideShow('off'); javascript:showHide('pause'); javascript:playAudio()" alt="on">

<img id="on" src="images/general/sound-on.png" width="40" height="32" onClick="javascript:showHide('off'); javascript:showHide('pause'); javascript:hideShow('on'); javascript:pauseAudio()" style="display:none;" alt="off">

<img id="pause" src="images/general/sound-pause.png" width="40" height="32" onClick="javascript:hideShow('on'); javascript:hideShow('pause'); javascript:hideShow('off'); javascript:playAudio()" alt="on">

</body>
</html> 
```

到目前为止，这很有效，但奇怪的是同时显示这两个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:45:31.580

首先，在我看来，您的两个函数正在做同样的事情。他们正在切换`display`图像的属性。在这两种情况下，如果`display`设置为 ''，它就会设置为 'none'。如果`display`设置为“无”，则设置为“”。

其次，我认为问题在于您正在**切换**它们。如果您只想一次显示一个，则需要将一个设置为显示，另外两个设置为隐藏。如果您每次都切换它们，那么隐藏的两个将始终同时更改为显示。

我认为它应该看起来更像这样：（[示例](http://jsfiddle.net/FW23E/)）

```
<script type="text/javascript">
function hide(elementID)
{
    document.getElementById(elementID).style.display = 'none';
}

function show(elementID)
{
    document.getElementById(elementID).style.display = '';
}
</script>

<img id="off" src="images/general/sound-off.png" width="40" height="32" onClick="show('on'); hide('off'); playAudio();" alt="on">
<img id="on" src="images/general/sound-on.png" width="40" height="32" onClick="show('pause'); hide('on'); pauseAudio();" style="display:none;" alt="off">
<img id="pause" src="images/general/sound-pause.png" width="40" height="32" onClick="show('on'); hide('pause'); playAudio();" style="display:none;" alt="on"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:38:31.140

您可以使用 jQuery 切换，具有多个事件。见[http://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

```
$("#button").toggle(
  function() {
    $(this).css("background-image","url(one.png)");
  },   
  function() {
    $(this).css("background-image","url(two.png)");
  },   
  function() {
    $(this).css("background-image","url(three.png)");
  }
}); 
```

修改它以更改 src 属性将是微不足道的

```
$(this).attr('src', ...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-11T16:53:58.657

你可以尝试这样的事情：

```
<button id="b_music" onclick="_js_ToggleAudio();">
Music
</button>

<script>
var toggle1 = 0; //define global variable outside the function where to store the toggle state
function _js_ToggleAudio() {
    if (toggle1 === 0) {
        document.querySelector('#b_music').style.color = 'orange'; //play music
        toggle1 = 1;
    }
    else if (toggle1 === 1) {
        document.querySelector('#b_music').style.color = 'red'; //pause music
        toggle1 = 2;
    }
    else if (toggle1 === 2) {
        document.querySelector('#b_music').style.color = 'black'; //stop music
        toggle1 = 0;
    }
}
</script> 
```

演示：[https ://jsfiddle.net/eliz82/vLy072nq/](https://jsfiddle.net/eliz82/vLy072nq/)

# c# - 将应用程序配置为在提升和非提升特权下运行

> ID：12516011
> 
> 赞同：2
> 
> 时间：2012-09-20T15:33:24.243
> 
> 标签：c#, winforms, uac

前几天，我遇到了一个应用程序，当你运行它时，它会出现 UAC 屏幕并请求以管理员权限运行。在 UAC 屏幕上单击“是”可以正常运行应用程序。有趣的是，如果您单击“否”，应用程序仍会运行，而不是退出，而是在有限的用户帐户中运行（当然，功能较少）。

我的问题是，如何配置我的 C# 应用程序来执行此操作？我知道我的应用程序可以有一个应用程序清单以提升的权限运行，但是我如何复制我刚才解释的那种行为呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:16:32.187

要使用*不同*的提升应用程序执行此操作，您可以使用“启动器”（或启动器是“普通”应用程序）。

如果您想要三个应用程序，您可能有一个 WinForms 启动器，例如：

```
[STAThread]
static void Main()
{
    const int ERROR_CANCELLED = 1223;
    try
    {
        Process.Start("el.exe");
        // ran el in elevated node...
    }
    catch (Win32Exception ex)
    {
        if (ex.NativeErrorCode == ERROR_CANCELLED)
        {
            Process.Start("normal.exe");
        }
    }
} 
```

如果您正在执行两个应用程序，则可以执行以下操作：

```
[STAThread]
static void Main()
{
    const int ERROR_CANCELLED = 1223;
    try
    {
        Process.Start("el.exe");
        // ran el in elevated node...
    }
    catch (Win32Exception ex)
    {
        if (ex.NativeErrorCode == ERROR_CANCELLED)
        {
            // "continue" as un-elevated app.
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:42:37.973

您可以将所有代码保存在一个应用程序中。应用程序清单不要求应用程序运行提升，它使用`asInvoker`级别。

当应用程序启动时，它会尝试重新启动提升自身。我的意思是它用`runas`动词开始了另一个过程。如果成功，那么第一个实例就存在了。

如果提升不成功，那么它会继续以有限的功能运行。

* * *

但是考虑一下用户体验：

并非世界上的每个人都以管理员身份工作。对于他们来说，提升看起来不像是点击`Continue`按钮，UAC 会要求他们提供管理员的用户名和密码。

从这个角度来看，微软推荐的方法效果很好：作为普通用户运行，直到你*真的*需要提升。所有高程点都应在 UI 中清楚地标记。您仍然可以使用同一个 exe 文件来运行非提升和提升的实例，但您必须实现一种通信机制，以便非提升的实例可以提供所有数据来执行用户请求的操作。一旦你启动了提升的实例，你可以保持它运行并退出非提升的实例，这样就可以在没有提升的情况下执行其他操作。

因此这意味着*更多的努力*，但*更好的用户体验*。

# sql - SQL Server 2008 项目转换禁用 Visual Studio 中的 T-SQL 代码识别

> ID：12516014
> 
> 赞同：0
> 
> 时间：2012-09-20T15:33:31.780
> 
> 标签：sql, database, visual-studio-2010

我创建了一个 sql server 2008 数据库项目。当我编辑默认的 Script.PostDeployment.sql（或任何 .sql）脚本时，VS 中的 Transact-SQL 编辑器工具栏会突出显示并处于活动状态，并且我没有编译错误。当我右键单击该项目并单击“转换为 SQL Server 数据库项目”时，我开始收到错误，并且我的 Transact-SQL 编辑器不再突出显示/处于活动状态。我得到的一个错误，例如在 Script.PostDeployment.sql 中，它说 :r .\myscript.sql 命令无效，因为 :r 不是有效的语法。这是一个新项目（尽管我尝试使用工具栏导入数据库，但也无法识别任何表 .sql 文件）。我缺少什么步骤，以便在转换后将 .sql 文件识别为具有活动 T-SQL 编辑器工具栏的合法 transact-sql？

我目前的方法是：使用 SQL 2008 R2，在 Visual Studio 2010 w/最新的 SP 中我这样做：

*   创建 SQL Server 2008 数据库项目
*   添加部署后文件
*   添加部署后参考线
*   编译，测试ok
*   通过右键单击转换为 SQL Server 数据库项目
*   现在发生语法错误；T-SQL 编辑器工具栏显示为灰色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:53:06.647

显然，转换将 .sql 文件的默认编辑器从“Transact-SQL 编辑器”更改为“Microsoft SQL Server 数据工具 - 数据库项目，编辑器选择器”。要修复，请右键单击项目中的 .sql 文件。转到“打开方式...”并将默认编辑器设置回“Transact-SQL 编辑器”。现在所有文件都将正确打开，语法错误将消失，工具栏处于活动状态。

# azure - 用于模拟的 Windows Azure

> ID：12516018
> 
> 赞同：2
> 
> 时间：2012-09-20T15:33:41.700
> 
> 标签：azure, simulation, montecarlo

我们正在考虑使用 Windows Azure 进行模拟。大约 100 个 VM 节点，每个节点都在处理它的问题集并将结果报告给主节点。

我已经从 Web UI 创建了 VM 实例。为了使其工作，我们需要使用 Azure API 来启动服务器并在完成后关闭它们。

有没有人有这样的经验？我正在寻找建议，陷阱等。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:02:15.763

你肯定可以做到，我已经帮助其他人在数百个节点上实现了它。查看 Windows Azure Rest API 来配置您的角色，如此[处](http://msdn.microsoft.com/en-us/library/windowsazure/ee460799.aspx)所述。虽然其他人可能有其他想法，但我认为一般步骤如下：

1.  创建主机或 webrole 以使用 REST API 管理您的角色
2.  创建一个工作角色实例并根据需要使用它来克隆多个实例
3.  使用 REST API 启动和关闭辅助角色，并在需要时更新实例计数
4.  根据您的要求，使用[Azure Boot Strapper](http://bootstrap.codeplex.com/)引导 VM

基于 Azure REST 的服务管理 API 可以在 Web 应用程序或独立应用程序中工作，因此您还可以拥有一个 Web 角色，以便在世界任何地方实现它。这样，您根本不需要任何本地组件，因为它将完全是云解决方案。如果您在创建网络角色方面需要任何帮助，我当然可以提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:04:20.670

[您可以使用服务管理 REST API](http://msdn.microsoft.com/en-us/library/windowsazure/ee460799.aspx)配置虚拟机（[在 NuGet](http://nuget.org/packages/WindowsAzure.ServiceManagement.Library)上还有一个托管 API ）。

但在您的情况下，您可能需要考虑使用云服务 (PaaS)。使用云服务，您只需构建应用程序、打包并部署它。然后使用门户或管理 API，您可以简单地配置实例数量。甚至还有一个命令行工具 ( [csmanage.exe](http://code.msdn.microsoft.com/windowsazure/Windows-Azure-CSManage-e3f1882c) )，它允许您通过服务配置更改实例的数量。

# c - 未定义对名为“full_adder(BIT A, BIT B, BIT Ci, BIT *Co)”的函数的引用

> ID：12516019
> 
> 赞同：0
> 
> 时间：2012-09-20T15:33:45.260
> 
> 标签：c, undefined-reference

我是一名 CS 学生，学习如何用 C 编程。我有 3 个文件和一个 Makefile。我有

> 逻辑.c 逻辑.h main.c

logic.c 的顶部是：

```
 #include "logic.h" 
//use this function in 4 bit adder 
//BIT full_adder(BIT A, BIT B, BIT Ci, BIT *Co);
int adder(int O1, int O2,  BIT carryIn, BIT *carryOut){
printf("in adder");
return 0x0;
}

BIT full_adder(BIT A, BIT B, BIT Ci, BIT *Co){ 
BIT S = FALSE; 
    //implementation of if else's based on Truth Table <br>
    if((A==FALSE)&&(B==FALSE)&&(Ci==FALSE)){ 
        S=FALSE; 
        *Co = FALSE; 
    } <br>
    return S; 
} 
```

main.c 的顶部是：

```
 #include "logic.h"
BIT full_adder(BIT A, BIT B, BIT Ci, BIT *Co); 
```

在 main.c 我有我的主要功能，在主要功能的底部我有：

```
 assert((full_adder(FALSE,FALSE,FALSE,&Co)==FALSE) && (Co==FALSE));
        adder(FALSE,FALSE,FALSE,&Co2);   
    return 0; 
```

我收到错误消息：

```
 main.o: In function 'main': main.c:158: undefined referenceto 'full_adder' 

collect2: ld returned 1 exit status <br>
make: *** [pa3] Error 1 <br>
./bscript: line 3: pa3: command not found 
```

这是家庭作业，但我在这个问题上花了很多时间，正在寻求帮助。我有正确的加法器返回类型，full_adder，并且我在 logic.c 和 main.c 的顶部声明了该函数。

没有回答我的问题的问题是：

*   [对函数的未定义引用](https://stackoverflow.com/questions/6423340/undefined-reference-to-a-function)
*   [“未定义的函数引用”错误](https://stackoverflow.com/questions/11277344/undefined-reference-to-function-error)

任何帮助表示赞赏。

编辑： logic.c 正在编译，它确实创建了一个 logic.o 文件。

编辑：我的教授说我不能编辑 logic.h

编辑：生成文件：

```
# Makefile template for CS 270 (specialized for PA3) 

# List of files
C_SRCS      = main.c logic.c
C_OBJS      = main.o logic.o
C_HEADERS   = logic.h
OBJS        = ${C_OBJS} 
EXE         = pa3 

# Compiler and loader commands and flags
GCC         = gcc
GCC_FLAGS   = -g -std=c99 -Wall -O0 -c
LD_FLAGS    = -g -std=c99 -Wall -O0
# Target is the executable
pa3 : $(OBJS)
    @echo "Linking all object modules ..."
    $(GCC) $(LD_FLAGS) $(OBJS) -o $(EXE)
    @echo ""
# Recompile C objects if headers change
${C_OBJS}:      ${C_HEADERS}
# Compile .c files to .o files
.c.o:
    @echo "Compiling each C source file separately ..."
    $(GCC) $(GCC_FLAGS) $<
    @echo ""

# Clean up the directory
clean:
    @echo "Cleaning up project directory ..."
    rm -f *.o $(EXE) core a.out
    @echo "" 
```

编辑：我用脚本编译我的代码：

```
#!/usr/bin/sh
make
pa3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:50:57.427

首先，将定义与声明分开：

逻辑.h：

```
#ifndef _LOGIC_H_
#define _LOGIC_H_

/* Define BIT as before */

int adder(int O1, int O2,  BIT carryIn, BIT *carryOut);
BIT full_adder(BIT A, BIT B, BIT Ci, BIT *Co);

#endif 
```

逻辑.c：

```
#include <stdio.h>
#include "logic.h"

int adder(int O1, int O2,  BIT carryIn, BIT *carryOut){
  printf("in adder");
  return 0x0;
}

BIT full_adder(BIT A, BIT B, BIT Ci, BIT *Co){
  BIT S = FALSE;
  //implementation of if else's based on Truth Table
  if((A==FALSE)&&(B==FALSE)&&(Ci==FALSE)){
    S=FALSE;
    *Co = FALSE;
  }

  return S;
} 
```

主.c：

```
#include "logic.h"

int main(int argc, char* argv[]) {
  /* Do your stuff */
  return 0;
} 
```

现在事情已经到了它们应该在的地方，并且您`logic.h`向编译器提供了所需的信息。

你`makefile`不应该只需要这三个文件的任何花哨的东西。

这需要通过以下方式完成`makefile`：

```
gcc -c -o main.o main.c
gcc -c -o logic.o logic.c
gcc -o main main.o logic.o 
```

（你的逻辑问题`full_adder`留给你解决......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:53:10.050

我已经看到链接器根据目标文件的顺序找不到/查找函数。在您的 makefile 中，您可能想尝试更改顺序：

```
C_OBJS      = logic.o main.o 
```

> 我在 logic.c 和 main.c 的顶部声明了该函数。

函数原型

```
BIT full_adder(BIT A, BIT B, BIT Ci, BIT *Co); 
```

应该只出现一次，在 logic.h 中。

您得到的错误来自链接器。

您可能只想尝试在 Makefile 之外编译/链接它：

```
gcc -c logic.c
gcc -o main main.c logic.o 
```

# jquery-ui - jQueryUI 自动完成功能在 IE9 上无法正常工作

> ID：12516021
> 
> 赞同：0
> 
> 时间：2012-09-20T15:33:52.637
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我在我的网站上将这段代码用于我的`jQueryUI Autocomplete`功能，

```
$( "#find" ).autocomplete({
            minLength: 1,
            source: function(request, response) {
                        var results = $.ui.autocomplete.filter(locations, request.term);
                        response(results.slice(0, 10));
                    },
            focus: function( event, ui ) {
                $( "#find" ).val( ui.item.value );
                return false;
            },
            appendTo: "#results",
            open: function(){
                var position = $("#results").position(),
                                left = position.left, top = position.top;

                        $("#results > ul").css({left: (left + 15) + "px",
                                                                top: (top + 30) + "px", width: (206) + "px" });
            },

            select: function( event, ui ) {
                $( "#find" ).val( ui.item.value );
                $(":header.title").html(ui.item.value);
                var new_url = ui.item.href; // instead of adding 'statistics', by using location.hash, it wont be necessary unlike using pushState()
                location.hash = new_url;
                return false;
            }
        })
        .data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.label + "<br />" + item.desc + "</a>" )
                .appendTo( ul );
        }; 
```

`Firefox`实际上，这在和上工作得很好`Chrome`，它的行为就像它在[此处](http://jqueryui.com/demos/autocomplete/custom-data.html)给出的示例中的行为一样，我只是根据我想要的复制和修改它。但是`IE9`，`item.desc`在其他浏览器上显示的内容在 上不可见`IE9`。我认为从修复开始的代码是最后一部分，即附加自动完成建议的部分。有人可以帮我吗？干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T06:39:13.887

创建一个新的 css 类来覆盖现有的 jquery ui 自动完成 "position":"absolute"

```
.ui-autocompelte{
"position": "absolute"
....
....
} 
```

新的 CSS 类

```
.ui-autocomplete-ie9-fix { position: relative !important; } 
```

并在 $("#find").autocompelte({ ........ ....... }); 之后应用这个 css 类

```
if (!$.browser.msie || ($.browser.msie && $.browser.version != 9)) {
        $("ul.ui-autocomplete").addClass("ui-autocomplete-ie9-fix");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T21:20:17.073

您需要升级`bgiframe.min.js`到更高版本（3.0 可以正常工作） [https://github.com/brandonaaron/bgiframe](https://github.com/brandonaaron/bgiframe)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-03T21:47:27.083

在头标签之后添加下面的标签

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

# sql-server-ce - 如何在 wp7 芒果上使用 linq2sql 数据库，同时保持可混合性？

> ID：12516024
> 
> 赞同：0
> 
> 时间：2012-09-20T15:33:58.857
> 
> 标签：sql-server-ce, mvvm-light, design-time, sql-server-ce-3.5, blendability

我正在尝试使用 MVVM Light 和 SQL Server CE 作为数据库来创建一个 WP7 应用程序。为此，我使用 sqlmetal.exe (1) 生成了一个数据上下文。

如果我在手机上运行该应用程序，这可以正常工作。但是当试图显示设计时数据时，我无法`DataContext`在我的设计时代码中创建一个实例。这可以做到吗？我尝试的另一种方法是创建一个实例`Table<MyDataObject>`，但 System.Data.Linq.Table 没有构造函数。

所以我的问题是，是否有可能以某种方式`DataContext`从代码创建我的实例，或者是否有另一种方法可以在不丢失设计时数据的情况下与我的数据库交互。

(1) 实际上，我使用了一种不同的方法，使用库项目能够直观地设计并将设计器文件复制到我的 WP7 项目中。如果我是正确的，结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:04:47.413

经过多次失败的尝试，我无法找到一种以编程方式模拟`DataContext`对象的方法。所以我以不同的方式解决了我的问题。

我创建了一个服务接口来从数据库中查询数据。对于 SQL CE 数据库中的每个表，我必须手动创建一个函数。

```
public interface IPayDataService {
    IQueryable<Account> GetAccounts();
    IQueryable<User> GetUsers();
    IQueryable<PayEntry> GetEntries();
} 
```

在实际数据对象中，传递了相应的表。在设计时对象中，我在代码中创建对象并返回`IQueryable`via `AsQueryable()`。通过使用`IQueryable`，我确保查询保持优化（在本例中为 Linq2Sql）。

虽然这不太理想并且需要更多的手动代码编写，但我设法让设计时数据再次工作。

# android - Google Analytics Mobile Android 只是没有显示所有数据

> ID：12516025
> 
> 赞同：1
> 
> 时间：2012-09-20T15:34:01.297
> 
> 标签：android, google-analytics

[在这里](http://www.youtube.com/watch?v=_-B9mNAmzTI)观看 IO 的视频后，我设法安装了 API 以及 EasyTracker。我只有两个活动，而 ActivityTwo 是由另一个活动创建的。我 @Override 我的两个 onStart() 活动并插入两个活动（当然有不同的文本）：

```
EasyTracker.getTracker().trackPageView("/ActivityOne"); 
```

我还在几个地方添加了一些这样的事件：

```
EasyTracker.getTracker().trackEvent("Operation", "Back to start", null, 0); 
```

我收到了实时数据，但只有一个活动/页面，而不是另一个。没有一个事件发生。我在这里到底做错了什么？

# jquery - Jquery Mobile - 从提交搜索

> ID：12516026
> 
> 赞同：0
> 
> 时间：2012-09-20T15:34:06.193
> 
> 标签：jquery, forms, jquery-mobile

我正在使用 JQuery mobile 并有一个搜索按钮

```
 <form class="search">
        <input type="search" name="search" id="search-basic" value="" />
    </form> 
```

当我提交表单时，它会自动重新加载最后带有`?search=xxx`字符串的页面，`mob.site.com/?search=wibble`例如。

我实际上需要搜索功能来简单地加载一个新页面，`mob.site.com/search?search=wibble`而不是在同一页面上加载，我找不到如何做到这一点。

有没有一种简单的方法来覆盖默认目标函数？

ta

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:39:24.270

您应该可以添加 action="/search"

```
<form action="/search" class="search">
    <input type="search" name="search" id="search-basic" value="" />
</form> 
```

# ruby - 红宝石，正则表达式，句子

> ID：12516033
> 
> 赞同：0
> 
> 时间：2012-09-20T15:34:21.217
> 
> 标签：ruby, regex

我目前正在构建一个代码生成器，旨在在我编写模板和/或翻译后为我生成样板，无论我使用什么语言。

我对 Ruby 中的正则表达式有疑问。正则表达式旨在选择介于`{{{`and之间的任何内容`}}}`，因此我可以根据需要生成函数。

我的正则表达式目前是：

```
/\{\{\{(([a-zA-Z]|\s)+)\}\}\}/m 
```

我的测试数据集是：

```
{{{Demande    aaa}}} => {{{tagadatsouintsouin    tutu}}} 
```

结果是：

```
[["Demande aaa", "a"], ["tagadatsouintsouin tutu", "u"]] 
```

每次正则表达式选择最后一个字符两次。这不是我想要的，我需要更像这样的东西：

```
/\{\{\{((\w|\W)+)\}\}\}/m 
```

但这也有一个缺陷，结果是：

```
[["Demande aaa}}} => {{{tagadatsouintsouin tutu", "u"]] 
```

鉴于，我希望得到：

```
[["Demande aaa"],["tagadatsouintsouin tutu"]] 
```

如何更正这些正则表达式？我可以使用两组分隔符，但它不会教我任何东西。

编辑 ：

您所有的正则表达式都针对我的数据样本运行，所以你们都明白了。

正则表达式可能是矫枉过正，可能是矫枉过正我的目的。所以我有两个问题。

首先，正则表达式是否保持相同的缩进？这应该能够处理整个功能。

其次，是否有更适合该任务的东西？

详细说明此工具的用途。我很无聊在 php - symfony 中编写样板代码。所以我希望根据模板生成这个。

我的意图是以这种方式构建一些视图、一些控制器，甚至是模型的一部分。

实际示例：在我的模型中，我希望根据对象属性的类型生成一些函数。例如，我有正确显示货币的功能。所以我需要根据我的属性构建 corect 函数，然后放入 m 输出文件中。

所以有些翻译本身需要翻译。

所以一个虚构的例子：

```
{{{euro}}} => {{{ function getMyAttributeEuro()
 {
   return formating($this->get[[MyAttribute]]);
 } }}} 
```

为了储存我的翻译，我应该使用正则表达式吗，比如

我希望构建一些有点聪明的东西，这样它就可以构建大部分没有错误的基本代码。所以我可以编写有趣的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:38:30.070

您的一组捕获括号太多。

```
/\{\{\{([a-zA-Z\s]+)\}\}\}/ 
```

此外，您不需要`/m`修饰符，因为您的正则表达式中没有点 ( `.`)，其行为会受到它的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:43:52.770

我偏爱：

```
data = '{{{Demande    aaa}}} => {{{tagadatsouintsouin    tutu}}}'
data.scan(/\{{3}(.+?)}{3}/).flatten.map{ |r| r.squeeze(' ') }
=> ["Demande aaa", "tagadatsouintsouin tutu"] 
```

或者：

```
data.scan(/\{{3}(.+?)}{3}/).flatten.map{ |r| [ r.squeeze(' ') ] }
=> [["Demande aaa"], ["tagadatsouintsouin tutu"]] 
```

或者：

```
data.scan(/\{{3}(.+?)}{3}/).map{ |r| [ r[0].squeeze(' ') ] }
=> [["Demande aaa"], ["tagadatsouintsouin tutu"]] 
```

如果您需要子阵列。

我不太愿意尝试正则表达式中的一切可能。我更喜欢让它简短而甜美，然后在找到我想要的东西后完善输出。这是一个维护问题，因为正则表达式让我头疼，几年前我不再认为它们是男子气概的东西。正则表达式是一个非常有用的工具，但它们往往被视为每个问题的答案，而事实并非如此。

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。

——[杰米·扎温斯基](http://regex.info/blog/2006-09-15/247)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:40:11.393

您想要非捕获组`(?:...)`，但这是另一种方式。

```
/\{\{\{(.*?)\}\}\}/m 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T15:36:47.033

只是一个镜头

```
/\{\{\{([\w\W]+?)\}\}\}/ 
```

为您的正则表达式添加非贪婪

[在这里](http://rubular.com/r/RuMfHiVB8F)这似乎工作

# audio - ffmpeg 如何转换其他格式的音频文件？

> ID：12516035
> 
> 赞同：1
> 
> 时间：2012-09-20T15:34:28.287
> 
> 标签：audio, ffmpeg

我下载音频文件，我需要将他转换为 .mp3、.wav、.ogg.、acc 格式。我的脚本：

```
if($ext=='wav'){
    shell_exec("ffmpeg -i $infile -acodec libmp3lame -ab 320 $outfile_mp3");
    shell_exec("ffmpeg -i $infile -acodec libvorbis -ab 320 $outfile_ogg");
    shell_exec("ffmpeg -i $infile -acodec libfaac -ab 320 $outfile_aac");
}
elseif($ext=='mp3'){
    shell_exec("ffmpeg -i $infile -ab 256 $outfile_wav");
    shell_exec("ffmpeg -i $infile -ab 256 $outfile_ogg");
    shell_exec("ffmpeg -i $infile -ab 256 $outfile_aac");
    move_uploaded_file($tmp, $path.$name2.'mp3');
}
elseif($ext=='ogg'){
    shell_exec("ffmpeg -i $infile -acodec libmp3lame $outfile_mp3");
    shell_exec("ffmpeg -i $infile $outfile_wav");
    shell_exec("ffmpeg -i $infile -acodec libfaac $outfile_aac");
}
elseif($ext=='aac'){
    shell_exec("ffmpeg -i $infile -acodec libmp3lame $outfile_mp3");
    shell_exec("ffmpeg -i $infile -acodec libvorbis $outfile_ogg");
    shell_exec("ffmpeg -i $infile -acodec libmp3lame $outfile_wav");
} 
```

请帮我转换文件：

1.  如何将**.mp3**格式的文件转换为 .wav、.ogg、.acc 格式
2.  如何将**.wav**格式的文件转换为 .mp3、.wav、.acc 格式
3.  如何将**.ogg**格式的文件转换为 .mp3、.ogg、.acc 格式
4.  如何将**.acc**格式的文件转换为 .mp3、.ogg、.wav 格式

我想获得良好音质的音频文件...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:23:42.943

**首先**你需要在你的代码中使用' **2>&1** '，例如

```
shell_exec("ffmpeg -i $infile $outfile_wav 2>&1"); 
```

**其次**，如果您有错误“输出流的编解码器不受支持”，您需要在您的主机中为 ffmpeg 安装 libfaac.dll 库。

享受=)

# xcode - Xcode Git 子模块提交问题

> ID：12516042
> 
> 赞同：0
> 
> 时间：2012-09-20T15:35:10.470
> 
> 标签：xcode, git, commit, git-submodules

**我做了什么**

*   我在我的应用程序中创建了一个名为“父级”的新单页应用程序项目。
*   我创建了一个名为“child”的新静态库项目，并将其作为 git 子模块添加到我的父项目文件夹中。
*   我已经通过从子模块目录中的查找器将子项目文件拖到 Xcode 窗口中的父项目 -> 父项目文件树中，将子项目导入到父项目中。

**现在是我的问题**

*   当我想通过 File -> Source Control -> Commit 进行提交时，我选择文件输入我的消息并进行提交，一切正常。

*   现在，当我对我的子项目进行更改并尝试以相同的方式提交时，xcode 让我知道它成功提交

*   现在尝试从文件 -> 源代码管理 -> 拉取，我的子项目是可选择的，但我的父项目有“未提交的更改”。

*   所以我回到提交界面，我看到了上次提交时应该提交的项目。特别是我的子模块项目的文件夹。

**我做了什么来解决这个问题**

我在父项目文件夹的命令行中使用 git： git add 。git commit -am "核心已被修改"

当我使用它时，我可以从拉取界面访问我的存储库，确认所有更改都已提交。

**真正的问题**

我的公司希望仅使用 Xcode SCM 工具来实现这一点。问题似乎与使用“子模块”有关如何在不使用命令行的情况下使其工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:09:20.787

我们有同样的问题。这就像 XCode 中的一个小错误。我们目前的解决方法与您提到的相同，唯一的解决方案是修复错误或增强 XCode 支持的方式

我们的工作流程如下所示：

- 使用 XCode 提交子模块更改 - 使用 XCode 提交主要更改 - 使用 CLI ( git commit ) 提交主目录更改 - 使用 XCode 推送主和子模块

我们希望这个小错误将来可以直接在 XCode 中修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:37:18.113

当您在子模块中提交时，它会显示为父模块中的更改。

解决方案是先对子模块进行更改，然后将更改提交给父模块。这样，您对子模块的所有更改都将捆绑到父项目提交中。

# java - 为什么两个看起来相同的excel文件的MD5哈希值不同

> ID：12516044
> 
> 赞同：4
> 
> 时间：2012-09-20T15:35:16.977
> 
> 标签：java, selenium, md5

我有两个保存在不同位置的 excel 文件。一个是直接从浏览器下载的，另一个是使用 selenium 驱动下载的。我手动检查了两个文件，两者完全相同。但是为这两个文件生成的 MD5 哈希值会有所不同。如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:53:28.937

MD5 是一个散列函数。人们使用散列函数来验证文件、流或其他资源的完整性。当涉及到散列函数时，当您验证文件的完整性时，您正在验证位级别的文件是否相同。

这样做的后果是，当您在按位级别比较具有完整性约束的文件时，散列函数可以完美地工作。

但是，鉴于 Excel 电子表格的性质。如果在按位级别从文档中添加、删除或移动一位，那么该文件的哈希将完全不同。（并非总是如此，但不要担心。）

由于 Excel 的驱动程序与 selenium 使用的驱动程序完全不同，尤其是考虑到 selenium 可能对文件进行的压缩和其他更改/优化，因此 - 当然 - 哈希将有所不同。

我的建议：首先：将文件拉入`diff`并找出这两个文件之间的不同之处。如果两个文件的哈希值不同，那么这些文件也不同，这几乎（但不完全）是不言而喻的。

其次：编写一个驱动程序来比较这些电子表格中的**信息**以验证文档的完整性（并且您可以获取该信息的哈希值），而不是在逐位级别上验证文件。

我建议将两者都导出为 CSV 并逐行比较两者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T15:47:07.257

MD5 算法完整地计算文件，包括存储在文件中的元数据（文件名、日期等），因此两个文件的“主要内容”可以相同但某些字节不同。

很难确定文件的哪个部分对 MD5 检查真正感兴趣。

如果您在 Windows 上尝试这种工具，并且只对 Excel 文件感兴趣：[http ://www.formulasoft.com/download.html](http://www.formulasoft.com/download.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-17T16:34:04.647

您确定元数据包含在哈希中吗？对此进行一些研究是明智的。

如果这是真的，您将永远找不到匹配的哈希，因为时间戳匹配的可能性非常低，您还可以将文件名更改一千次，并且哈希将是相同的。此外，当 AV 扫描文件时，它会更改访问的时间戳属性，如果元数据包含在不断被 AV 扫描的机器上的哈希中，那么您的哈希将不断变化。

# c# - 你建议我用什么来静态创建字符串值的集合？

> ID：12516048
> 
> 赞同：1
> 
> 时间：2012-09-20T15:35:34.537
> 
> 标签：c#, asp.net-mvc, .net-4.0

这是我现在做的事情，声明`Roles`允许访问我的控制器操作方法的字符串：

```
[Role(Roles="Regular User, Accounting, Administrator")]
public ActionResult ChangeAvatar()
{
    if (User.Identity.IsAuthenticated)
    {
        var user = _userRepository.FindUserByEmail(User.Identity.Name);
        var model = new ChangeAvatarModel();
        model.CurrentAvatarUrl = user.AvatarUrl;

        return View(model);
    }

    return RedirectToAction("Login", "Account");
} 
```

我不想将其写成`Roles`字符串，因为我可能会输入错误并导致意外错误。我宁愿把它们写一次就完成了。

你建议我在这个用例中使用什么？一个`dictionary<enum, string>`？

```
[Role(Roles=DefinedRoles.Accounting)] // Would return string: "Regular User, Account"
public ActionResult ChangeAvatar()
{
    if (User.Identity.IsAuthenticated)
    {
        var user = _userRepository.FindUserByEmail(User.Identity.Name);
        var model = new ChangeAvatarModel();
        model.CurrentAvatarUrl = user.AvatarUrl;

        return View(model);
    }

    return RedirectToAction("Login", "Account");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:50:51.267

您可以使用静态常量类：

```
public static class DefinedRoles
{
    public const string Accounting = "Regular User, Accounting, Administrator";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:58:08.923

目前正在试验这种方法，到目前为止一切顺利..

```
public class StringEnum
{
    private static IDictionary<string, StringEnum> _items = new Dictionary<string, StringEnum>();

    public static readonly StringEnum Type1 = new StringEnum("TYPE1");
    public static readonly StringEnum Type2 = new StringEnum("TYPE2");

    private string _value;

    private StringEnum(string value)
    {
        _value = value;
        _items.Add(_value, this);
    }

    public static implicit operator StringEnum(string value)
    {
        return _items[value];
    }

    public static implicit operator string(StringEnum typeSafeValue)
    {
        return typeSafeValue._value;
    }

    public override bool Equals(object obj)
    {
        return obj.ToString() == _value;
    }

    public override int GetHashCode()
    {
        return base.GetHashCode();
    }

    public override string ToString()
    {
        return _value;
    }
} 
```

可以像这样使用：

```
StringEnum type = StringEnum.Type1 
```

# java - 如何调整任何屏幕尺寸的 JFrame 和 JInternal 帧？

> ID：12516050
> 
> 赞同：0
> 
> 时间：2012-09-20T15:35:49.860
> 
> 标签：java, swing, screen, jframe, jinternalframe

我正在开发一个以*JFrame*开头的 Swing 应用程序，但所有其他框架都包含为*JInternalFrames*，当我将它安装在不同的计算机中时，我面临一些严重的屏幕尺寸问题，我使用以下方法来设置 JFrame 完整屏幕

```
 Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
    setBounds(0, 0, screenSize.width, screenSize.height);
    JFrame.setExtendedState(JFrame.MAXIMIZED_BOTH); 
```

但我观察到没有区别。我还想用屏幕大小调整 JInternalFrames。如果您有任何建议或解决方案，请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:42:32.460

您应该像这样设置框架扩展状态：

```
frame.setExtendedState(frame.getExtendedState() | JFrame.MAXIMIZED_BOTH); 
```

您将需要一个组件侦听器来侦听框架扩展以适应屏幕并调整大小更改。

```
 frame.addComponentListener(new ComponentAdapter() {
        @Override
        public void componentResized(ComponentEvent event) {
            Dimension d = frame.getContentPane().getSize();
            // code to save frame size or calculate internal frame sizes
            frame.validate();
        }
    }); 
```

# c# - Error_No_Token 通过添加打印机驱动程序

> ID：12516051
> 
> 赞同：1
> 
> 时间：2012-09-20T15:35:50.673
> 
> 标签：c#, api, token

我正在尝试使用 Windows API 函数 AddPrinterDriver 添加打印机驱动程序。始终生成 Win32 错误 1008（尝试引用不存在的令牌。）。我的代码如下所示

```
[DllImport("Winspool.drv")]
static extern bool AddPrinterDriver(string Name, Int32 Level, [in] ref DRIVER_INFO_3 DriverInfo);
[StructLayout(LayoutKind.Sequential)]
public struct DRIVER_INFO_3
{
    public Int32 cVersion;
    public string Name;
    public string Environment;
    public string DriverPath;
    public string DataFile;
    public string ConfigFile;
    public string HelpFile;
    public string DependentFiles;
    public string MonitorName;
    public string DefaultDataType;
}     
//....................... 
DRIVER_INFO_3 di = new DRIVER_INFO_3();
//......................
AddPrinterDriver(Environment.MachineName, 3, ref di); 
```

在添加打印机驱动程序之前，我还尝试通过“ImpersonateSelf”获取令牌。但错误 1008 坚持。

# java - 通过 SOAP 服务向 JIRA 进行身份验证时安全密码存储

> ID：12516053
> 
> 赞同：3
> 
> 时间：2012-09-20T15:35:53.963
> 
> 标签：java, security, soap, passwords, jira

我正在用 Java 编写一个应用程序，它需要在调用该服务上的方法之前登录到远程 SOAP 服务 (JIRA)。

我已经查看了如何执行此操作的示例，例如[http://www.j-tricks.com/1/post/2010/8/jira-soap-client.html](http://www.j-tricks.com/1/post/2010/8/jira-soap-client.html)，但是我担心我需要把某个时刻在内存中的密码。

我读过我应该将密码存储为 char[] 但我仍然担心将密码存储在明文中。

我应该如何存储客户端用于登录 SOAP 服务的密码？我应该如何阅读它并将其传递给 JIRA？

*编辑* 此应用程序将使用 Spring，因此密码可能存储在 bean 配置文件中而不是代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:10:07.037

这是我最终决定的。

首先，一些澄清。

*   密码被加密并存储在数据库中。
*   密码是静态填充的（由 DBA）。
*   这是加密和解密的练习，因此不适用散列算法，例如 MD5。

我研究了用 SQL 加密和用 Java 解密的方法，但没有一个特别好。因此，我决定采用以下方法。

*   当 DBA 填充密码时，他们在输入密码（例如插入 creds(user,password) 值 ('bob',encrypt('password')) 时运行 DBMS 特定的加密方法（例如 MySQL 的 encrypt）；
*   检索密码的SQL，作为属性传递给spring应用程序，包括解密（例如，从凭据中选择用户，解密（密码））。

除此之外，这是一个用户管理和锁定数据库的练习。例如，只有某些人 (DBA) 获得完全访问权限，而应用程序使用只读用户。

希望这对将来的其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:43:31.413

SOAP 登录方法返回一个可用于会话的字符串令牌，因此无需在使用后将密码存储在内存中。但我认为你在谈论长期使用。应用程序通常会有一个配置页面以允许设置更永久的身份验证，然后每次重新配置连接时都需要输入密码。

# haskell - 状态单子组成的问题

> ID：12516057
> 
> 赞同：0
> 
> 时间：2012-09-20T15:36:06.753
> 
> 标签：haskell, state, monads, composition

[我正在尝试http://www.haskell.org/haskellwiki/State_Monad#Complete_and_Concrete_Example_1](http://www.haskell.org/haskellwiki/State_Monad#Complete_and_Concrete_Example_1)给出的示例

这如何使解决方案可组合超出了我的理解。这是我尝试过的，但我得到如下编译错误：

```
Couldn't match expected type `GameValue -> StateT GameState Data.Functor.Identity.Identity b0'
            with actual type `State GameState GameValue'
In the second argument of `(>>=)', namely `g2'
In the expression: g1 >>= g2
In an equation for `g3': g3 = g1 >>= g2
Failed, modules loaded: none. 
```

这是代码：请参阅最后几行

```
module StateGame where
import Control.Monad.State

type GameValue = Int
type GameState = (Bool, Int)

-- suppose I want to play one game after the other
g1 = playGame "abcaaacbbcabbab"
g2 = playGame "abcaaacbbcabb"
g3 = g1 >>= g2

m2 = print $ evalState g3 startState

playGame :: String -> State GameState GameValue
playGame []     = do
    (_, score) <- get
    return score

playGame (x:xs) = do
    (on, score) <- get
    case x of
         'a' | on -> put (on, score + 1)
         'b' | on -> put (on, score - 1)
         'c'      -> put (not on, score)
         _        -> put (on, score)
    playGame xs

startState = (False, 0)

main str = print $ evalState (playGame str) startState 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:47:03.823

```
g1 = playGame "abcaaacbbcabbab"
g2 = playGame "abcaaacbbcabb"
g3 = g1 >>= g2 
```

`g1`并且`g2`都是 type `State GameState GameValue`。但`(>>=)`有类型

```
(>>=) :: Monad m => m a -> (a -> m b) -> m b 
```

因此它的第二个参数必须是一个函数。如果第一个参数是`g1`，则函数必须具有类型

```
GameValue -> State GameState b 
```

那是错误消息中的“预期类型”。但是`g2`有一个不同的类型，那就是“实际类型”。

您在定义中想要的组合子`g3`是`(>>) :: Monad m => m a -> m b -> m b`,

```
g3 = g1 >> g2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:51:02.573

有两种方法可以组合您的两个游戏。第一种选择是在第一场比赛之后运行第二场比赛，从一个新鲜的状态开始。你这样做使用：

```
main = do
    print $ evalState g1 startState
    print $ evalState g2 startState 
```

或者，您可以让第二场比赛从第一场比赛结束的地方开始。你这样做使用：

```
g3 = do
    g1
    g2 
```

...这只是语法糖：

```
g3 = g1 >> g2 
```

...并运行它：

```
main = print $ evalState g3 startState 
```

# php - php - 时间戳 - 天之间的间隔并不总是 86400 秒 - 为什么？

> ID：12516059
> 
> 赞同：3
> 
> 时间：2012-09-20T15:36:14.770
> 
> 标签：php, timestamp

时间戳的补充问题[- php递增时间戳错误](https://stackoverflow.com/questions/12511325/php-incrementing-time-stamp-error)

虽然接受该类 DateTime 可能会为我的原始查询提供解决方案，但时间戳中仍然存在无法解释的差异。我真的很想了解这种差异，是否还有其他此类时间戳“调整”以及它们是如何产生的。

请考虑以下几点：

```
/*
 * test time stamp variances
 */

$time_Stamp_1 = mktime(0,0,0,10,15,2012);echo "15/10/12: " . $time_Stamp_1;
$time_Stamp_2 = mktime(0,0,0,10,16,2012);echo "<br/>16/10/12: " . $time_Stamp_2 . "increment= " . ($time_Stamp_2 - $time_Stamp_1); 
$time_Stamp_3 = mktime(0,0,0,10,17,2012);echo "<br/>17/10/12: " . $time_Stamp_3 . "increment= " . ($time_Stamp_3 - $time_Stamp_2);
$time_Stamp_4 = mktime(0,0,0,10,18,2012);echo "<br/>18/10/12: " . $time_Stamp_4 . "increment= " . ($time_Stamp_4 - $time_Stamp_3);
$time_Stamp_5 = mktime(0,0,0,10,19,2012);echo "<br/>19/10/12: " . $time_Stamp_5 . "increment= " . ($time_Stamp_5 - $time_Stamp_4);
$time_Stamp_6 = mktime(0,0,0,10,20,2012);echo "<br/>20/10/12: " . $time_Stamp_6 . "increment= " . ($time_Stamp_6 - $time_Stamp_5);
$time_Stamp_7 = mktime(0,0,0,10,21,2012);echo "<br/>21/10/12: " . $time_Stamp_7 . "increment= " . ($time_Stamp_7 - $time_Stamp_6);
$time_Stamp_8 = mktime(0,0,0,10,22,2012);echo "<br/>22/10/12: " . $time_Stamp_8 . "increment= " . ($time_Stamp_8 - $time_Stamp_7);
$time_Stamp_9 = mktime(0,0,0,10,23,2012);echo "<br/>23/10/12: " . $time_Stamp_9 . "increment= " . ($time_Stamp_9 - $time_Stamp_8);
$time_Stamp_10 = mktime(0,0,0,10,24,2012);echo "<br/>24/10/12: " . $time_Stamp_10 . "increment= " . ($time_Stamp_10 - $time_Stamp_9);
$time_Stamp_11 = mktime(0,0,0,10,25,2012);echo "<br/>25/10/12: " . $time_Stamp_11 . "increment= " . ($time_Stamp_11 - $time_Stamp_10);
$time_Stamp_12 = mktime(0,0,0,10,26,2012);echo "<br/>26/10/12: " . $time_Stamp_12 . "increment= " . ($time_Stamp_12 - $time_Stamp_11);
$time_Stamp_13 = mktime(0,0,0,10,27,2012);echo "<br/>27/10/12: " . $time_Stamp_13 . "increment= " . ($time_Stamp_13 - $time_Stamp_12);
$time_Stamp_14 = mktime(0,0,0,10,28,2012);echo "<br/>28/10/12: " . $time_Stamp_14 . "increment= " . ($time_Stamp_14 - $time_Stamp_13);
$time_Stamp_15 = mktime(0,0,0,10,29,2012);echo "<br/>29/10/12: " . $time_Stamp_15 . "increment= " . ($time_Stamp_15 - $time_Stamp_14); 
```

报告：

```
15/10/12: 1350255600
16/10/12: 1350342000increment= 86400
17/10/12: 1350428400increment= 86400
18/10/12: 1350514800increment= 86400
19/10/12: 1350601200increment= 86400
20/10/12: 1350687600increment= 86400
21/10/12: 1350774000increment= 86400
22/10/12: 1350860400increment= 86400
23/10/12: 1350946800increment= 86400
24/10/12: 1351033200increment= 86400
25/10/12: 1351119600increment= 86400
26/10/12: 1351206000increment= 86400
27/10/12: 1351292400increment= 86400
28/10/12: 1351378800increment= 86400
29/10/12: 1351468800increment= 90000 
```

因此：

```
> 15/10/2012 1350255600 + 604800 does increment 1 week to 22/10/2012 ..
> 22/10/2012 1350860400 + 604800 does not increment 1 week to 29/10/2012
> because although this results in 1351465200 which should be 29/10/2012
> you can see from the above that it resolves to 28/10/2012 because for
> some unexplained reason an extra hour 3600sec has been added to the
> time stamp for 29/10/2012. 
```

我想知道，因为从我对文档的阅读中 mktime 应该创建一个与 strtotime 或 DateTime 一样有效的时间戳。

确实使用类 DateTime 方法 getTimestamp

28/10/2012 = 1351378800 29/10/2012 = 1351468800 增加 90000

因此，又一次增加了一个小时，这意味着我在这个假设中是正确的。

显然，班级可以处理这个问题。但是到目前为止，没有任何地方提到过这样一个事实，即无论生成时间戳如何增加时间戳都可能导致问题......因此必须使用 DateTime 类或其他方法来避免诸如此类的问题遭遇。

如果我必须转换你使用类的代码，就这样吧。但我想知道为什么这是必要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T15:39:59.457

由于夏令时，28/10/12[在您的时区中有一个额外的小时](http://www.timeanddate.com/time/dst/2012.html)。28/10 午夜和 29/10 午夜之间有 25 小时。

您还会发现春天有 23 小时的一天。

如果这不是您所期望的，请将时区更改为没有 DST 的时间。UTC 是一种选择：

```
php > echo mktime(0,0,0,10,29,2012) - mktime(0,0,0,10,28,2012);
90000
php > ini_set('date.timezone', 'UTC');
php > echo mktime(0,0,0,10,29,2012) - mktime(0,0,0,10,28,2012);
86400 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:44:13.297

我要试一试。10 月 29 日正好是夏令时前 1 周（除非您所在的国家/地区有不同的夏令时）。但是后退 1 小时会导致一天多出 1 小时。

# android - 如何在Android中实现鱼眼效果？

> ID：12516061
> 
> 赞同：3
> 
> 时间：2012-09-20T15:36:27.653
> 
> 标签：android

我正在尝试在 Android 中的位图图像上实现鱼眼效果。是否有现有的库或算法可以提供帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-10T08:20:48.897

我推荐你使用 Android Media Effects API。如果您想对效果进行更多控制（或针对较旧的 Android 版本），您还可以直接使用 opengl 将鱼眼效果应用于您的照片。有关该主题的一些教程：http: [//www.learnopengles.com/android-lesson-four-introducing-basic-texturing/](http://www.learnopengles.com/android-lesson-four-introducing-basic-texturing/)。学习 opengl 将使您能够对照片应用各种效果，着色器代码可以在互联网上轻松找到（例如：[https](https://github.com/BradLarson/GPUImage/tree/master/framework/Source) ://github.com/BradLarson/GPUImage/tree/master/framework/Source ）

这是鱼眼效果的着色器代码：

```
private static final String FISHEYE_FRAGMENT_SHADER =
        "precision mediump float;\n" +
        "uniform sampler2D u_Texture;\n" +
        "uniform vec2 vScale;\n" +
        "const float alpha = float(4.0 * 2.0 + 0.75);\n" +
        "varying vec2 v_TexCoordinate;\n" +
        "void main() {\n" +
        "  float bound2 = 0.25 * (vScale.x * vScale.x + vScale.y * vScale.y);\n" + 
        "  float bound = sqrt(bound2);\n" +
        "  float radius = 1.15 * bound;\n" +
        "  float radius2 = radius * radius;\n" +
        "  float max_radian = 0.5 * 3.14159265 - atan(alpha / bound * sqrt(radius2 - bound2));\n" + 
        "  float factor = bound / max_radian;\n" + 
        "  float m_pi_2 = 1.570963;\n" +
        "  vec2 coord = v_TexCoordinate - vec2(0.5, 0.5);\n" +
        "  float dist = length(coord * vScale);\n" +
        "  float radian = m_pi_2 - atan(alpha * sqrt(radius2 - dist * dist), dist);\n" +
        "  float scalar = radian * factor / dist;\n" +
        "  vec2 new_coord = coord * scalar + vec2(0.5, 0.5);\n" +
        "  gl_FragColor = texture2D(u_Texture, new_coord);\n" +
        "}\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:38:56.750

看看适用于 Android 的 OpenCV：

[http://opencv.org/platforms/android.html](http://opencv.org/platforms/android.html)

而这个答案：

[如何通过openCV模拟鱼眼镜头效果？](https://stackoverflow.com/questions/1927145/how-to-simulate-fisheye-lens-effect-by-opencv)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T05:10:55.543

也许更简单的解决方案是使用[Android Media Effects API](http://developer.android.com/reference/android/media/effect/package-summary.html)。但是，它仅适用于 API 14 及更高版本。

# solr - 在 solr 3.6 中获取与 geohash 字段的距离

> ID：12516062
> 
> 赞同：1
> 
> 时间：2012-09-20T15:36:31.943
> 
> 标签：solr, geospatial, geohashing

是否可以在具有多个值的 geohash 字段上从 geodist() 过滤器返回距离？

geosort 和 geodist 过滤器工作正常，但我试图获取查询点与结果中返回的位置之间的距离。

我试过[http://wiki.apache.org/solr/SpatialSearch#Returning_the_distance](http://wiki.apache.org/solr/SpatialSearch#Returning_the_distance) 第二种方法是： //localhost:8983/solr/select?indent=true&fl=name,store&sfield=store&pt=45.15,-93.85&sort =score%20asc&q={!func}geodist()

但它返回奇怪的结果，用 2 个位置测试它返回分数 9979.032，实际上两个点之间的距离约为 33,000 公里？

它使用什么单位返回分数字段中的距离？我假设公里，但它没有意义，或者结果是假的，我不知道

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:19:58.777

Solr 3 不支持多值地理空间字段。你应该特别忽略“GeoHash”字段类型；顺便说一下，它已从 Solr 4 的示例模式中删除。要在 Solr 3 中获取多值地理空间字段（包括排序），您需要使用我开发的插件[SOLR-2155](https://github.com/dsmiley/SOLR-2155)。Solr 4 具有基于该技术的空间场。

# qt - 是否可以将 QPainter 捕获为视频？

> ID：12516064
> 
> 赞同：1
> 
> 时间：2012-09-20T15:36:40.587
> 
> 标签：qt, whiteboard

我想制作一个白板并将白板作为视频流分享给其他人，我想知道这是否可能，以及可以使用哪个库？

# javascript - 如何仅用 javascript 替换字符串中最后出现的数字？

> ID：12516065
> 
> 赞同：0
> 
> 时间：2012-09-20T15:36:40.373
> 
> 标签：javascript, regex

你会如何改变这个：

```
a-10-b-19-c 
```

变成这样的东西：

```
a-10-b-20-c 
```

在 Javascript 中使用正则表达式？

它还应该改变这一点：

```
a-10-b-19 
```

进入这个：

```
a-10-b-20 
```

到目前为止，我发现的唯一解决方案是：

*   反转原始字符串->`"c-91-b-01-a"`
*   找到第一个数字（带`\d+`）->`"91"`
*   反转它->`"19"`
*   变成一个数字（parseInt）->`19`
*   加 1 ->`20`
*   再次把它变成一个字符串（toString）->`"20"`
*   再次反转->`"02"`
*   用这个新号码替换原来的匹配 ->`"c-02-b-01-a"`
*   反转字符串->`"a-10-b-20-c"`

我希望 SO 上的某个人有*更简单*的方法来做到这一点……有人吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:47:29.823

这是一个简单的方法。

```
var str = 'a-10-b-19-c';
str = str.replace(/(\d*)(?=(\D*)?$)/, +str.match(/(\d*)(?=(\D*)?$)/)[0]+1); 
```

`+str.match`找到 19，加 1 并返回 20。`+`确保答案是 int。`str.replace`找到 19 并将其替换为`str.match`返回的 20。

解释

*   `(\d*)`- 匹配任何数字
*   `(?=...)`- 积极的前瞻，不会改变正则表达式的位置，但确保该模式进一步存在。
*   `(\D*)?$`- 它不是必须的，但可以多次匹配任何不是数字的东西，然后匹配字符串的结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:12:05.817

这是一个更简单的：

```
str.replace(/(.*\D)(\d+)/, function(s, pfx, n) {return pfx + ((+n) + 1)}) 
```

或者

```
str.replace(/.*\D(\d+)/, function(s, n) {return s.slice(0, -n.length) + ((+n) + 1)}) 
```

如果数字是字符串中的第一件事，这些都不会起作用，但是这个会：

```
(' ' + str).replace(/.*\D(\d+)/,
                    function(s, n) {
                      return s.slice(1, -n.length) + ((+n) + 1)
                    }) 
```

（为什么 Javascript 需要三个不同的子字符串函数？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:13:06.643

```
//replaces last digit sequences with 20
'a-10-b-19-c'.replace(/\d+(?!.*\d+)/, '20') 
```

`/`--> 正则表达式的开始

`\d+`--> 匹配任何数字（一个或多个）

`(?!.*\d+)`--> 否定前瞻断言，我们无法找到任何未来（一个或多个）数字

`/`--> 正则表达式结束

编辑：只需重新阅读关于添加，

可以使用匹配，例如：

```
 var m ='a-10-b-19-c'.match(/\d+(?!.*\d+)/);
    'a-10-b-19-c'.replace(/\d+(?!.*\d+)/, parseInt(m[0]) + 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T15:41:50.790

这是我能想到的最简单的方法：

```
var str = 'a-10-b-19-c';
var arr = str.split('-');
arr[3] = parseInt(arr[3]) + 1;
str = arr.join('-'); 
```

**编辑解释：**

该`split()`方法采用参数（在本例中为连字符）并在它找到的每个实例处将其分解为一个数组。如果你`arr`在这部分运行后输入你的 JavaScript 控制台，你会得到`["a", "10", "b", "19", "c"]`

我们知道这里需要更改第 4 项，索引 3 可以通过`arr[3]`. 这个数组的每一部分都是一个字符串。如果您尝试将字符串增加 1，它只会将字符串与 1 连接起来（JS 使用`+`for 加法和连接），因此您需要`parseInt()`在进行加法之前将其设为整数。

然后我们使用该`join()`方法将数组重新粘合成一个字符串！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T15:44:33.453

试试这个：

```
var str='a-10-b-19-c';
var pattern=/\d+/g;
var matches=pattern.exec(str);
var last=matches[0];
while((matches=pattern.exec(str))!=null)
{
    last=matches[0];
}
var newStr=str.replace(last, parseInt(last)+1);
console.log(newStr); 
```

代码输出`a-10-b-20-c`

# jquery-mobile - 离线 Web 应用程序的 jQuery 移动问题

> ID：12516073
> 
> 赞同：1
> 
> 时间：2012-09-20T15:37:10.033
> 
> 标签：jquery-mobile, parameters, offline, cache-manifest

我正在使用 jQuery mobile 开发一个应用程序，它将使用 HTML5 离线功能（缓存清单等）。

基本程序供现场技术人员在没有互联网连接的平板电脑上查看/修改他们的订单。我正在使用本地浏览器数据库来存储订单。

我有一个可以查看任何订单的 orders.html 页面 - 但是要向它传递参数，我不能使用 GET 参数，因为程序处于脱机状态，我无法在清单中列出每个订单。

所以我必须使用哈希参数 - 例如`orders.html#o4572`。但是 jQuery mobile 不能很好地使用这个方案——它使用散列参数作为它自己的方案。当我打开`list.html`并且有一个链接时`orders.html#o4572`- 它会将链接变成`list.html#o4752`并保持在同一页面上。

我可以通过设置关闭 jQuery mobile 的链接处理，`$.mobile.linkBindingEnabled = false;`但这会阻止所有 ajax 导航 - 你失去了漂亮的转换，并且弹出对话框不再“正常工作”，你必须手动进行。并且可能还有其他问题。

这是让它正常工作的唯一方法吗？我刚开始使用 jQuery mobile，所以我觉得我错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:47:03.323

在使用 jquery mobile 时，除了选择页面之外，您确实不应该使用散列参数。
进行的标准方法是通过 javascript 传递您的参数`file.html?parameter=value`并检索该值。
然后，您可以使用 js 函数处理此值，例如，如果您在线，该函数可以使用 ajax 调用检索数据，或者如果您离线，则可以从本地存储中读取数据。这可以通过绑定`changepage`事件来完成，如果您想根据与参数关联的数据动态生成页面，或者`pageinit`如果您想在页面显示后更改页面（例如填写表单元素），则可以通过绑定事件来完成)

或者，如果使用缓存清单阻止您使用 ?parameter=value 语法，您可以使用以下方法： - 将目标链接编写为`file.html#pagename_itemvalue` - 绑定 pagechange 事件以覆盖默认行为，而是解析目标值，检索`pagename`和`itemvalue`，并生成/访问您要显示的内容。[您可以在此页面](http://jquerymobile.com/test/docs/pages/page-dynamic.html)上看到一个示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:46:51.463

[我使用jquery-mobile-router](https://github.com/azicchetti/jquerymobile-router)插件和具有*离线*模式的单页应用程序做了类似的事情，但是对于多页应用程序它应该工作相同，因为对于多页应用程序，JQM的默认行为（`ajax-enabled`设置为）`true`是它拉入第二页并将其附加到当前页面的DOM。

使用 JQM 路由器，你应该能够做这样的事情

```
var router;

var orderHandlerRoute = function (eventType, matchObj, ui, page, evt) {
  var params = router.getParams(matchObj[1]);
  //use your params to pull data from localStorage  
};

router =  new $.mobile.Router({
     'orders.html(?:[?/](.*))?' : {handler: "orderHandler", events: 'bs'}
     , {orderHandler: orderHandlerRoute }
   }); 
```

# class - Matlab：分类KNN类对象的矩阵

> ID：12516074
> 
> 赞同：1
> 
> 时间：2012-09-20T15:37:15.550
> 
> 标签：class, matlab, object, vector, matrix

对于分类，我正在为 MATLAB 中的分类器构建多个模型。我`ClassificationKNN`为此使用课程。我非常想在一个矩阵中存储多个模型（或此类的对象）。通常，您可以使用花括号 ({}) 在矩阵内访问和创建矩阵。我的循环如下所示：

```
models = []
for i = 1:length(x)
    models = [models, {ClassificationKNN.fit(x,y)}]
end 
```

不幸的是，这会返回一个大小为 (1,3) 的矩阵模型，但所有单元格都是空的，这意味着模型丢失了……如何确保每个模型都存储在矩阵中？我需要这样做，因为我需要稍后在计算中使用所有模型，并且矩阵中的位置很重要......有
什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:02:07.847

你想要一个模型的单元阵列，对吧？看起来确实是这样，如果可行，试试这个：

```
models = {}
for ii = 1:length(x)
    models = [models, {ClassificationKNN.fit(x,y)}]
end 
```

`ClassificationKNN.fit(x,y)`此外，您每次都使用相同的参数循环调用，这只是一个测试，还是一个示例的伪代码。正如评论所说，最好预先分配如下：

```
models = cell(length(x),1);
for ii = 1:length(x)
    models{ii} = ClassificationKNN.fit(x,y);
end 
```

但是，无论哪种方式都可能很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:34:09.567

感谢 macduffs 的帖子，我终于弄清楚发生了什么。在阅读他的提议时，我意识到如果获得对象的单元格数组，那确实应该是正确的方法。
尝试后，在变量编辑器中打开数组时再次显示为空。我尝试调用数组中的第一个单元格以查看它是否确实为空，而实际上不是。它返回了我存储在其中的对象。这意味着问题得到了回答。
然后我恢复到我自己的方法，看看它是否也有效并且确实有效。当调用一个单元格时，它也返回一个对象。

底线：不要相信变量编辑器^^。

# xslt - XSLT - 从结果中删除子标签

> ID：12516076
> 
> 赞同：0
> 
> 时间：2012-09-20T15:37:26.233
> 
> 标签：xslt

我正在寻找返回特定 XML 标记的内容`<para>`而不返回其子标记`<bridgehead>`或`<sliceXML>`结果。我正在使用[http://xslttest.appspot.com/](http://xslttest.appspot.com/)测试以下内容，一如既往，非常感谢任何帮助。

我的 XML

```
<para>
    <bridgehead>Galaxy Zoo</bridgehead>
        <sliceXML>Galaxy</sliceXML>
        The human eye is far better at identifying characteristics of galaxies 
        than any computer. So Galaxy Zoo has called for everyday citizens to 
        help in a massive identification project. Well over a hundred thousand 
        people have helped identify newly discovered galaxies. Now you can, too.
</para> 
```

我的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:sparql-results="http://www.w3.org/2005/sparql-results#" version="1.0">

<xsl:template match="/">
    <xsl:call-template name="results"/>
    <xsl:message>FROM simpleHMHTransform XSLT8</xsl:message>
</xsl:template>
<xsl:template name="results">

 <xsl:for-each select="//para">
        <xsl:call-template name="para"/>
  </xsl:for-each>
</xsl:template>

<xsl:template name="para">
    <div id="para">
        <xsl:value-of select="."/>
    </div>
</xsl:template>

</xsl:stylesheet> 
```

我目前的结果

```
<?xml version="1.0" encoding="UTF-8"?><div xmlns:sparql- results="http://www.w3.org/2005/sparql-results#" id="para">
    Galaxy Zoo
        Galaxy
        The human eye is far better at identifying characteristics of galaxies 
        than any computer. So Galaxy Zoo has called for everyday citizens to 
        help in a massive identification project. Well over a hundred thousand 
        people have helped identify newly discovered galaxies. Now you can, too.
</div> 
```

我**想要**的结果

```
<?xml version="1.0" encoding="UTF-8"?><div xmlns:sparql-results="http://www.w3.org/2005/sparql-results#" id="para">
        The human eye is far better at identifying characteristics of galaxies 
        than any computer. So Galaxy Zoo has called for everyday citizens to 
        help in a massive identification project. Well over a hundred thousand 
        people have helped identify newly discovered galaxies. Now you can, too.
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:44:11.027

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:sparql-results="http://www.w3.org/2005/sparql-results#" version="1.0">

<xsl:template match="para">
    <div id="para"><xsl:copy-of select="text()"/></div>
</xsl:template>

</xsl:stylesheet> 
```

# javascript - 有人可以为我解释这个退货声明吗？

> ID：12516077
> 
> 赞同：0
> 
> 时间：2012-09-20T15:37:43.990
> 
> 标签：javascript

我有一个在[这个 Stackover 答案](https://stackoverflow.com/a/4219164/1261316)中使用的 return 语句，我不太明白。这里是：

```
return maxWidth > $this.width() || maxHeight > $this.height(); 
```

以某种方式返回某物是什么意思？

*一旦我知道它是什么，我会在回答后编辑这个问题的标题:)*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T15:40:12.403

它相当于：

```
if (maxWidth > $this.width() || maxHeight > $this.height()) {
  return true;
} else {
  return false;
} 
```

换句话说，如果其中一个`maxWidth`大于`width()`of`$this` **或者** `maxHeight`大于`height()`of `$this`，它就会返回`true`；否则，它将返回`false`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T15:42:07.763

它返回`boolean`。

```
return maxWidth > $this.width() || maxHeight > $this.height(); 
```

认为，

```
maxWidth = 300 
$this.width() = 200
maxHeight = 400
$this.height() = 500 
```

所以它返回

```
(300>200 || 400>500) ==> (T || F) ==> TRUE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:41:10.043

在该特定示例中，代码正在检查最大的子维度是否超过父维度，维度是宽度和高度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T15:44:58.810

它被称为[短路评估](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators#Logical_AND_%28.26.26%29)，在这种情况下将返回一个布尔值。如果

```
maxWidth > $this.width() 
```

是真的，它会返回`true`，而不评估第二个测试。否则它将返回评估结果

```
maxHeight > $this.height(). 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T15:38:56.797

如果 的维度之一`$this`（创建为 的 jQuery 包装器对象`$(this)`）小于某些变量，则返回 true。

在您链接的代码中，这也可以检测溢出作为最大孩子`maxWidth`的`minWidth`尺寸：如果一个孩子比这个大，那么它就会溢出这个。

看看[宽度](http://api.jquery.com/width/)函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T15:39:12.013

它是一个布尔值，所以如果宽度或高度的最大值大于实际宽度，那么你就得到了。

# mysql - MySQL跨多个表计数并获得单个值

> ID：12516078
> 
> 赞同：0
> 
> 时间：2012-09-20T15:37:44.957
> 
> 标签：mysql, select, count, inner-join, union-all

想象一下：t1 = 1 t2 = 3 t3 = 5

我需要在每个表上运行单独的选择，并以单个数量报告计数，即：

```
 select * 
   from (select count(*) from t1)
          + (select count(*) from t2)
          + (select count(*) from t3); 
```

我的最终结果应该是 = 9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:41:13.773

你很接近; 你可以写：

```
 select (select count(*) from t1)
        + (select count(*) from t2)
        + (select count(*) from t3)
 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:43:32.700

```
select 
    (select count(*) from t1)
    + (select count(*) from t2)
    + (select count(*) from t3); 
```

# sql - Tsql - 有没有一种有效的方法来查询这个？

> ID：12516079
> 
> 赞同：1
> 
> 时间：2012-09-20T15:37:46.210
> 
> 标签：sql, tsql

有没有一种有效或简单的方法来查询这个？例如最小化服务器负载。谢谢！

数据库表

```
qId     WKDT    WK_ENDT                  SUM_LVL_Sort  ADOCD  ocd  OfficeName     WKLY_AVG  WeekCode
------  ------  -----------------------  ------------  -----  ---  -------------  --------  --------
201112  201110  2011-10-28 00:00:00.000  19.00         NULL   NAT  NATION         2.23      n
201112  201110  2011-10-28 00:00:00.000  13.00         NULL   F09  SAN FRANCISCO  2.20      n
201112  201111  2011-11-25 00:00:00.000  19.00         NULL   NAT  NATION         2.39      n
201112  201111  2011-11-25 00:00:00.000  13.00         NULL   F09  SAN FRANCISCO  2.14      n
201112  201112  2011-12-30 00:00:00.000  19.00         NULL   NAT  NATION         2.37      n
201112  201112  2011-12-30 00:00:00.000  13.00         NULL   F09  SAN FRANCISCO  2.18      n 
```

这是我需要的布局

```
WK_ENDT                  adocd  ocd  OfficeName     SUM_LVL_Sort  10    11    12
-----------------------  -----  ---  -------------  ------------  ----  ----  ----
2011-10-07 00:00:00.000  NULL   F09  SAN FRANCISCO  13.00         2.2   2.14  2.18
2011-10-07 00:00:00.000  NULL   NAT  NATION         19.00         2.23  2.39  2.37 
```

tql查询

```
 select TOP 1 (WK_ENDT),
     ,SUM_LVL_Sort
     ,ADOCD     as adocd
     ,Alias   as ocd
     ,OfficeName
     ,(select WKLY_AVG from kpi.dbo.tb_ssi_rzli where SUM_LVL_Sort = 19.00 and RIGHT(wkdt,2) = '10' and weekcode = 'n'  ) as [10]
     ,(select WKLY_AVG from kpi.dbo.tb_ssi_rzli where SUM_LVL_Sort = 19.00 and RIGHT(wkdt,2) = '11' and weekcode = 'n'  ) as [11]
     ,(select WKLY_AVG from kpi.dbo.tb_ssi_rzli where SUM_LVL_Sort = 19.00 and RIGHT(wkdt,2) = '12' and weekcode = 'n'  ) as [12]
from kpi.dbo.tb_ssi_rzli
where SUM_LVL_Sort = 19.00 and right(qId,2) = '12' and WeekCode = 'n'
order by WK_ENDT desc 
```

bluefeet 的查询结果

```
WK_ENDT                  SUM_LVL_Sort  adocd  ocd  OfficeName  10    11    12
-----------------------  ------------  -----  ---  ----------  ----  ----  ----
2011-12-30 00:00:00.000  19.00         NULL   NAT  NATION      NULL  NULL  2.37
2011-11-25 00:00:00.000  19.00         NULL   NAT  NATION      NULL  2.39  NULL
2011-10-28 00:00:00.000  19.00         NULL   NAT  NATION      2.23  NULL  NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:49:33.763

你试过这个：

```
select  (WK_ENDT),
     ,SUM_LVL_Sort
     ,ADOCD   as adocd
     ,Alias   as ocd
     ,OfficeName
     , CASE WHEN RIGHT(wkdt,2) = '10' THEN WKLY_AVG END As [10]
     , CASE WHEN RIGHT(wkdt,2) = '11' THEN WKLY_AVG END As [11]
     , CASE WHEN RIGHT(wkdt,2) = '12' THEN WKLY_AVG END As [12]
from kpi.dbo.tb_ssi_rzli
where SUM_LVL_Sort = 19.00 
    and right(qId,2) = '12'
    --and RIGHT(wkdt,2) IN ('10', '11', '12')
    and WeekCode = 'n'
order by WK_ENDT desc 
```

~~编辑试试这个，看起来你想根据月份获取值：~~

~~`select TOP 1 (WK_ENDT), ,SUM_LVL_Sort ,ADOCD as adocd ,Alias as ocd ,OfficeName , CASE WHEN month(wkdt) = '10' THEN WKLY_AVG END As [10] , CASE WHEN month(wkdt) = '11' THEN WKLY_AVG END As [11] , CASE WHEN month(wkdt) = '12' THEN WKLY_AVG END As [12] from kpi.dbo.tb_ssi_rzli where SUM_LVL_Sort = 19.00 and right(qId,2) = '12' and WeekCode = 'n' order by WK_ENDT desc`~~

# java - EclipseLink 或 Derby 在意外行引发异常

> ID：12516082
> 
> 赞同：0
> 
> 时间：2012-09-20T15:37:53.337
> 
> 标签：java, jpa, eclipselink, derby

我正在尝试通过eclipselink（JPA）在derby中执行插入/更新和提交。我在执行过程中遇到以下异常。

```
java.lang.IllegalArgumentException: Precision exceeds 31 digits!
    at org.apache.derby.client.am.Utils.computeBigDecimalPrecision(Unknown Source)
    at org.apache.derby.client.net.NetStatementRequest.computeProtocolTypesAndLengths(Unknown Source)
    ..
    ..
   at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:788)
   at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:863)
   ..
   at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:430)
   at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getResultList(EJBQueryImpl.java:714)
   at com.rw.util.RWCommonFactory.getCommonCodeSet(RWCommonFactory.java:194)
   at com.rw.what.RWTransaction.setProcessedStatusCode(RWTransaction.java:218) 
```

RWCommonFactory.getCommonCodeSet 包含

```
public RWCommonCodeSet getCommonCodeSet(String name, String value){
 Query query = manager.createNamedQuery(RWCommonCodeSet.FIND_CODE_NAME_CODE_VALUE);
 query.setParameter("codeName", name.trim());
 query.setParameter("codeValue", value.trim());
 List l = query.getResultList();
 if(l.isEmpty()){
    return null;
 }
 else{
    return (RWCommonCodeSet) l.get(0);
 }
 } 
```

**RWCommonCodeSet**是一个不包含任何小数列的实体表，但此处获取精度超出异常。

同样在此执行中，我确实保留了一些其他包含**DECIMAL(31,5)**列的实体。

我尝试启用 Derby 日志和 Eclipse 链接日志，但我无法从该日志中得到正确的错误。

我怎样才能得到实际的错误位置。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:54:19.457

您的查询没有问题。我认为，对于`Unknown Source`，您的实体不使用`@Entity`，不要配置 in `persistence.xml`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-14T21:37:02.797

好的，我追踪到了。我在数据库中有 DECIMAL(10,3) 并试图坚持 BigDecimal 偶尔从 double 初始化。我有

```
new BigDecimal(2006.3) 
```

代替

```
new BigDecimal("2006.3") 
```

第一个显然不适合 DECIMAL(10,3)。

# c# - Parallel.For 能否针对运行时间非常短的操作进行优化？

> ID：12516084
> 
> 赞同：3
> 
> 时间：2012-09-20T15:37:53.740
> 
> 标签：c#, .net, parallel-processing, task-parallel-library

我知道为短期运行任务提供细粒度控制的任务，但我有一种情况，使用 foreach 循环更自然。问题是，是否有可能告诉 Parallel.For 期望短期运行的操作并使用尽可能多的线程来最大限度地利用 CPU？

如果不是，那么您建议使用什么方法进行并行化：

```
bool [,] grid = new bool [1000, 1000];
for (int y=0; y<1000; y++)
    for (int x=0; x<1000; x++)
        // Ignore the bounds error. This is just to illustrate a very short operation.
        grid[x, y] |= grid[x-1, y+1]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T15:44:06.593

> 问题是，是否有可能告诉 Parallel.For 期望短期运行的操作并使用尽可能多的线程来最大限度地利用 CPU？

是的，您可以通过自己制作`Partitioner<T>`和处理分区来做到这一点。有关详细信息，请参阅[如何：加速小型循环体](http://msdn.microsoft.com/en-us/library/dd560853.aspx)。

但是，在您的情况下，最好只并行化外部循环，并将内部循环留在每个外部`Parallel.For`循环主体内部。这将为每个工作项提供足够的指令，使其可能充分使用处理器。

话虽如此，在这种情况下，.NET 可能不会做得很好`Parallel.For`——至少在没有一些额外工作的情况下不会。通过将值并行分配给*同一个数组*，由于隐式数组边界检查，您将引入[错误共享，它从同一位置（就在数组开始之前）读取。](http://en.wikipedia.org/wiki/False_sharing)

有多种方法可以解决这个问题 - 例如，一种选择可能是从多维数组切换到锯齿状数组。通过正确的索引和循环，这可以减少对“共享”数组的写入次数。另一种选择是使用不安全的代码和指针而不是直接数组访问，因为这避免了边界检查，但需要非常仔细的编码。

# c++ - 自定义分配器和默认成员

> ID：12516085
> 
> 赞同：5
> 
> 时间：2012-09-20T15:37:56.523
> 
> 标签：c++, allocator

为什么[这段代码](http://gcc.godbolt.org/#%7B%22version%22%3A3%2C%22filterAsm%22%3A%7B%22labels%22%3Atrue%2C%22directives%22%3Atrue%2C%22commentOnly%22%3Atrue%7D%2C%22compilers%22%3A%5B%7B%22source%22%3A%22%23include%20%3Ccstdlib%3E%5Cn%23include%20%3Clist%3E%5Cn%5Cntemplate%20%3C%20typename%20Type%20%3E%5Cnclass%20Allocator%20%7B%5Cnpublic%3A%5Cn%5Ctusing%20value_type%20%3D%20Type%3B%5Cnpublic%3A%5Cn%20%20%20%20template%20%3C%20typename%20Other%20%3E%5Cn%20%20%20%20struct%20rebind%20%7B%20using%20other%20%3D%20Allocator%3C%20Other%20%3E%3B%20%7D%3B%5Cnpublic%3A%5Cn%5CtType%20*%20allocate(%20std%3A%3Asize_t%20n%20)%20%7B%20return%20std%3A%3Amalloc(%20n%20)%3B%20%7D%5Cn%5Ctvoid%20deallocate(%20Type%20*%20p%2C%20std%3A%3Asize_t%20)%20throw%20(%20)%20%7B%20std%3A%3Afree(%20p%20)%3B%20%7D%5Cn%7D%3B%5Cn%5Cnint%20main(%20void%20)%20%7B%5Cn%5Ctstd%3A%3Alist%3C%20void%20*%2C%20Allocator%3C%20void%20*%20%3E%20%3E%20list%3B%5Cn%5Ctreturn%200%3B%5Cn%7D%5Cn%22%2C%22compiler%22%3A%22%2Fusr%2Fbin%2Fclang%2B%2B%22%2C%22options%22%3A%22-std%3Dc%2B%2B11%20-march%3Dnative%22%7D%5D%7D)不编译？

```
#include <cstdlib>
#include <list>

template < typename Type >
class Allocator {
public:
    using value_type = Type;
public:
    template < typename Other >
    struct rebind { using other = Allocator< Other >; };
public:
    Type * allocate( std::size_t n ) { return std::malloc( n ); }
    void deallocate( Type * p, std::size_t ) throw ( ) { std::free( p ); }
};

int main( void ) {
    std::list< void *, Allocator< void * > > list;
    return 0;
} 
```

它似乎需要指针、引用、指针常量和引用常量类型。但是，根据[cppreference](http://en.cppreference.com/w/cpp/concept/Allocator) ，这些成员都是可选的。似乎 STL 没有使用 allocator_trait （我正在使用 -std=c++11 进行编译，所以它应该很好）。

任何想法 ？

[编辑] 在铿锵声中，错误是：

```
user@/tmp > clang++ -std=c++11 test.cc
In file included from test.cc:2:
In file included from /usr/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/list:63:
/usr/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/stl_list.h:449:40: error: no type named 'pointer' in 'Allocator<void *>'
      typedef typename _Tp_alloc_type::pointer           pointer;
              ~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~
test.cc:17:46: note: in instantiation of template class 'std::list<void *, Allocator<void *> >' requested here
    std::list< void *, Allocator< void * > > list;
                                             ^
In file included from test.cc:2:
In file included from /usr/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/list:63:
/usr/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/stl_list.h:450:40: error: no type named 'const_pointer' in 'Allocator<void *>'
      typedef typename _Tp_alloc_type::const_pointer     const_pointer;
              ~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~
/usr/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/stl_list.h:451:40: error: no type named 'reference' in 'Allocator<void *>'
      typedef typename _Tp_alloc_type::reference         reference;
              ~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~
/usr/lib/gcc/i686-pc-linux-gnu/4.7.1/../../../../include/c++/4.7.1/bits/stl_list.h:452:40: error: no type named 'const_reference' in 'Allocator<void *>'
      typedef typename _Tp_alloc_type::const_reference   const_reference;
              ~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~
4 errors generated. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:51:45.923

这是 GCC 的 C++ 标准库中的一个错误。

使用列表时，它们没有通过 allocator_traits 正确包装对分配器的访问。

但是，它们确实正确实现了向量。如果您使用`std::vector`而不是`std::list`.

# android - 自定义视图未执行 onDraw()

> ID：12516087
> 
> 赞同：0
> 
> 时间：2012-09-20T15:38:05.210
> 
> 标签：android, ondraw, invalidation, custom-view

我创建了一个名为 CustomViewVisual1 的自定义视图，它在 Particle 类的屏幕对象上绘制。我在扩展 Activity 的名为 LayoutCanvas 的类中使用此自定义视图。LayoutCanvas 中的 onTouch() 或 onProgressChanged() 事件似乎都不会导致我的视​​图重绘，即使我调用了 invalidate 并且也尝试了 postInvalidate()。我的对象的值发生了变化，但我没有重绘！老实说，我是 Android 新手，不知道如何设计我的类以及在哪里实现什么的任何好的做法，所以如果有人对我想要实现的目标有更好的解决方案，请告诉我。提前致谢！

这是粒子类：

```
 public class Particle {
    Rect rect = new Rect();
    float similarity;
    Point p = new Point();
    float x;
    float y;

    float tx = 240;
    float ty = 320;

    Matrix transform = new Matrix();

    float r;
    Paint _paint = new Paint();
    Paint tempp = new Paint();

    Particle(){}

    Particle(int width, float similarity){
        this.similarity = similarity;
        x = MyMath.map(similarity, 0, 1, 0, width/2);
        //y = MyMath.myRandom(-20, 20);
        y = 0;
        //p.set((int) MyMath.map(similarity, 0, 1, 0, width/2), (int)MyMath.myRandom(0, 360));
        p.set((int)x, (int)y);
        r = MyMath.myRandom(0, 360);
        //recalculateCoordinates();
        _paint.setColor(Color.WHITE);
        tempp.setColor(Color.GREEN);
        //rotate(r);

    }

    public void display(Canvas canvas, Paint paint, float scale){
        //canvas.drawLine(canvas.getWidth()/2, 0, canvas.getWidth()/2, canvas.getHeight(), _paint);
        //canvas.drawLine(0, canvas.getHeight()/2, canvas.getWidth(), canvas.getHeight()/2, _paint);
        canvas.save();
        canvas.translate(canvas.getWidth()/2, canvas.getHeight()/2);
        //canvas.translate(tx, ty);
        canvas.rotate(r);
        //canvas.scale(scale, scale);
        paint.setColor(colorize());
        canvas.drawRect(-p.x, p.y, -p.x+10, p.y+10, paint);
        canvas.restore();

        canvas.save();
        canvas.translate(canvas.getWidth()/2, canvas.getHeight()/2);
        canvas.drawLine(0, 0, 200, 0, tempp);
        canvas.drawText("0'", 100, 8, tempp);
        canvas.restore();

        canvas.save();
        canvas.translate(canvas.getWidth()/2, canvas.getHeight()/2);
        canvas.rotate(45);
        canvas.drawLine(0, 0, 200, 0, tempp);
        canvas.drawText("45''", 100, 8, tempp);
        canvas.restore();

        canvas.save();
        canvas.translate(canvas.getWidth()/2, canvas.getHeight()/2);
        canvas.rotate(90);
        canvas.drawLine(0, 0, 200, 0, tempp);
        canvas.drawText("90'", 100, 8, tempp);
        canvas.restore();

        canvas.save();
        canvas.translate(canvas.getWidth()/2, canvas.getHeight()/2);
        canvas.rotate(180);
        canvas.drawLine(0, 0, 200, 0, tempp);
        canvas.drawText("180'", 100, 8, tempp);
        canvas.restore();
    }

    public int colorize(){
        return Color.argb(100, Math.round(255-MyMath.map(similarity, 0, 1, 0, 255)), 0, Math.round(MyMath.map(similarity, 0, 1, 0, 255)));
    }

    public void rotate(float degrees){
        transform.setTranslate(120, 160);
        transform.setRotate(degrees, 0, 0);

        // Create new float[] to hold the rotated coordinates
        float[] pts = new float[2];

        // Initialize the array with our Coordinate
        pts[0] = p.x;
        pts[1] = p.y;

        // Use the Matrix to map the points
        transform.mapPoints(pts);

        p.set((int)pts[0], (int)pts[1]);
        // NOTE: pts will be changed by transform.mapPoints call
        // after the call, pts will hold the new cooridnates

        // Now, create a new Point from our new coordinates
        //Point newPoint = new Point((int)pts[0], (int)pts[1]);

        // Return the new point
        //p.set(newPoint.x, newPoint.y);
        //return newPoint;
    }

    public void translate(int x, int y){
        tx = x;
        ty = y;
    }

    public void recalculateCoordinates(){
        x = (float) ( (x * android.util.FloatMath.cos(r) ) - (y * android.util.FloatMath.sin(r) ) );
        y = (float) ( (x * android.util.FloatMath.sin(r) ) - (y * android.util.FloatMath.cos(r) ) );
    }
    /**
     * @return the similarity
     */
    public float getSimilarity() {
        return similarity;
    }

    /**
     * @param similarity the similarity to set
     */
    public void setSimilarity(float similarity) {
        this.similarity = similarity;
    }

    /**
     * @return the x
     */
    public float getX() {
        return x;
    }

    /**
     * @param x the x to set
     */
    public void setX(float x) {
        this.x = x;
    }

    /**
     * @return the y
     */
    public float getY() {
        return y;
    }

    /**
     * @param y the y to set
     */
    public void setY(float y) {
        this.y = y;
    }

    /**
     * @return the r
     */
    public float getR() {
        return r;
    }

    /**
     * @param r the r to set
     */
    public void setR(float r) {
        this.r = r;
    }

    public Point getP() {
        return p;
    }

    public void setP(Point p) {
        this.p = p;
    }
    } 
```

这是 CustomViewVisual1 类：

```
 public class CustomViewVisual1 extends View implements Runnable{
    int width;
    int height;
    int x = 0; 
    int y = 0;
    int canvasScale = 1;
    int countDraw = 0;

    Thread t = null;
    boolean isItOK = false;

    Paint paint;
    Particle[] p = new Particle[500];

    public CustomViewVisual1(Context context){
        super(context);
        initView();
    }

    public CustomViewVisual1(Context context, AttributeSet attrs) {
        super(context, attrs);
        initView();
    }

    private void initView() {
        // TODO Auto-generated method stub
        paint = new Paint();

        Random r = new Random();
        for (int i = 0; i < p.length; i++) {
            p[i] = new Particle(width, r.nextFloat());
        }
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        // TODO Auto-generated method stub
        super.onSizeChanged(w, h, oldw, oldh);
        width = w;
        height = h;
        x = width/2;
        y = height/2;
        initView();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        //canvas.translate(width/2, height/2);
        canvas.drawARGB(255, 0, 0, 0);
        canvas.scale(canvasScale, canvasScale);
        for (int i = 0; i < p.length; i++) {
            p[i].display(canvas, paint, canvasScale);
        }

        paint.setColor(Color.WHITE);
        canvas.drawCircle(x, y, 20, paint);
        /*
        paint.setColor(Color.CYAN);
        canvas.drawRect(0, 0, width, 10, paint);
        paint.setColor(Color.GREEN);
        canvas.drawRect(0, height-10, width, height, paint);
        paint.setColor(Color.YELLOW);
        canvas.drawRect(0, 0, 10, height, paint);
        paint.setColor(Color.MAGENTA);
        canvas.drawRect(width-10, 0, width, height, paint);
        */
        countDraw++;
        Log.d("How many draw = ", ""+countDraw);
    }

    public float getCanvasScale() {
        return canvasScale;
    }

    public void setCanvasScale(int canvasScale) {
        this.canvasScale = canvasScale;
    }

    public void pause() {
        isItOK = false;
        while (true) {
            try {
                t.join();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            break;
        }
        t = null;
    }

    public void resume() {
        isItOK = true;
        t = new Thread(this);
        t.start();
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
    }
    } 
```

这是 LayoutCanvas 类：

```
 public class LayoutCanvas extends Activity implements OnTouchListener{

    RelativeLayout rl;
    SeekBar sb;
    CustomViewVisual1 cView;

    /*
     * (non-Javadoc)
     * 
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_layout_canvas);

        cView = new CustomViewVisual1(this);
        cView.setOnTouchListener(this);

        rl = (RelativeLayout) findViewById(R.id.lay_canvas);
        rl.setOnTouchListener(this);
        rl.setOnLongClickListener(new OnLongClickListener(){
            @Override
            public boolean onLongClick(View v) {
                // TODO Auto-generated method stub
                Log.d("on long touch", "keep touching");
                return false;
            }});

        sb = (SeekBar) findViewById(R.id.sb_activity_layout_canvas);
        sb.setOnSeekBarChangeListener(new OnSeekBarChangeListener(){

            @Override
            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
                Log.d("in progress changed", "before if() "+progress);
                if(progress > 0 && progress <=10){ 
                    Log.d("in progress changed", "in if() " + progress);
                    cView.setCanvasScale(progress);
                    cView.invalidate();
                }
            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub

            }});

    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        Log.d("on touch", "Just touched");
        cView.x = (int) event.getX();
        cView.y = (int) event.getY();
        Log.d("cView x = ", ""+cView.x);
        Log.d("cView y = ", ""+cView.y);
        cView.invalidate();
        return false;
    }

    } 
```

这是布局 .xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:id="@+id/lay_canvas">

        <SeekBar
            android:id="@+id/sb_activity_layout_canvas"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_above="@+id/button1"
            android:layout_alignParentLeft="true"
            android:max="10" />

         <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_toLeftOf="@+id/button2"
            android:text="Button" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:text="Button" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_toRightOf="@+id/button2"
            android:text="Button" />

        <com.anvil.thesis.CustomViewVisual1
            android:id="@+id/myView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/sb_activity_layout_canvas"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:56:16.143

好的，问题是您有两个自定义视图实例。第一个是在您调用`setContentView(R.layout.activity_layout_canvas);`并且布局文件膨胀时创建的。此实例被添加到您的视图层次结构中。您明确创建的第二个

```
cView = new CustomViewVisual1(this);
cView.setOnTouchListener(this); 
```

但是，这个永远不会添加到您的视图层次结构中。因此，当`onTouch`您调用`cView.invalidate();`它时，它不会绘制，因为它`cView`实际上不在屏幕上。

你需要做的是`cView`参考使用这样的布局膨胀的自定义视图：

```
cView = (CustomViewVisual1)findViewById(R.id.myView1); 
```

# javascript - 节点js发送方法

> ID：12516094
> 
> 赞同：0
> 
> 时间：2012-09-20T15:38:31.217
> 
> 标签：javascript, node.js

我试图用谷歌搜索这个问题，但找不到一个像样的问题。我正在寻找一种方法来完成这项工作：

```
 var testFunction = function() {
    console.log("it works");
  }

  send("testFunction"); 
```

我不知道该怎么做。我知道这在红宝石中有效。

# deployment - 如何在战争开始时复制文件

> ID：12516098
> 
> 赞同：0
> 
> 时间：2012-09-20T15:38:40.170
> 
> 标签：deployment, tomcat6, grails-2.0

我有一个 Word 文档和 PDF 的编号，需要在我的 Grails 应用程序启动时复制到文件存储中。

我想我可以利用 BootStrap.groovy 来检查现有文件，如果没有找到则复制。但是，我不知道将文件包含到 WAR 文件中的最佳实践。

我怎样才能复制这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:56:13.307

我不知道这是否是最佳实践，但是我们已经将所有内容`external files`放入`web-app`目录中。即我们有目录`reports`，`pdf`除此之外`css`还有`images`目录。所有这些文件都打包并部署到war文件中。

# perl - 在 CentOS 上更改主机名的脚本

> ID：12516099
> 
> 赞同：0
> 
> 时间：2012-09-20T15:38:45.143
> 
> 标签：perl, hostname

我曾经使用`curl`HTTP 获取请求从服务器中提取主机名，并且工作正常。我需要我的脚本来修改`/etc/sysconfig/network`文件，这样我就不必重新启动系统来应用主机名。

到目前为止，这是我的代码：

```
#!/usr/local/bin/perl

use strict;
use warnings;
use Sys::Hostname;

my $curl = `curl http://100.10.10.10/hostname`; # Get correct hostname 
my $host = hostname;

if ($curl ne $host) {
   # Need to modify the /etc/sysconfig/network file to replace hostname or add it.
} 
```

编辑：我的实际问题：我用新主机名修改该文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:25:21.053

我猜你想要的是

```
my $host = qx{hostname}; 
```

代替

```
my $host = hostname; 
```

另外，您为什么不手动进行更改（即，打开 /etc/hosts 或您要编辑和编辑的任何文件，只需确保`$>`is 0... 脚本以 root 用户身份运行）。

# javascript - 对 iPad 和其他所有东西使用不同的视口元标记？

> ID：12516102
> 
> 赞同：1
> 
> 时间：2012-09-20T15:38:52.897
> 
> 标签：javascript, html, meta

我在我的网站上使用这个元标记：

```
 <meta name="viewport" content="width=device-width, initial-scale=.5"> 
```

这种规模使事情在 iPhone 上完美运行（我知道这是非正统的......不使用 1），但是当用户代理是 iPad 时，我想做的是提供以下服务：

```
 <meta name="viewport" content="width=device-width, initial-scale=1"> 
```

只是想知道你们中是否有人对我如何做到这一点有聪明的想法？非常感谢！

# javascript - jquery impromptu - 在处理异步 AJAX 响应之前保持提示打开

> ID：12516113
> 
> 赞同：0
> 
> 时间：2012-09-20T15:39:30.000
> 
> 标签：javascript, jquery, impromptu

**简而言之**
，我想在用户单击“确定”按钮后进行一些异步服务器端验证（使用 AJAX）。如果验证失败，我想在提示符上显示错误消息而不关闭它。

**细节**

我正在使用即兴版本 3.1。我找不到 3.1 的文档，所以检查了[4.0.1 版本的文档](http://trentrichardson.com/Impromptu/index.php)，有两种方法可以做到这一点 -

> 返回 false 或 event.preventDefault() 以保持提示打开

我检查过，因为我使用的是旧版本，所以事件变量在这样的函数内部不可用 -

```
$.prompt('Example 2',{ buttons: { Ok: true, Cancel: false }, submit: submitCertificationPrompt } });

function submitCertificationPrompt(e,v,m,f)
{
 //e is not available in case of version 3.0.1
} 
```

我现在无法升级到最新版本，因为我们对 3.1 版插件代码进行了一些自定义。

所以，我只剩下使用这种`return false`方式了。我检查了这是否有效-

```
 $.prompt('Example 2',{ buttons: { Ok: true, Cancel: false }, submit: submitCertificationPrompt } });

    function submitCertificationPrompt()
    {
       return false;
    } 
```

但是，由于我必须等到收到 AJAX 响应，所以我尝试使用这样的 javascript 回调函数，但它没有像我预期的那样工作 -

```
$.prompt('Example 2',{ buttons: { Ok: true, Cancel: false }, submit: function(){ submitCertificationPrompt(function(bool){ return bool; }) } });

function submitCertificationPrompt(callback)
{
    //I will do an AJAX call here and the prompt should stay open if the response reads validation error. So, I will callback false in that case

    callback(false);
} 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T12:19:08.197

你需要做一个小的改变，只需添加一个参数 async: false，你在哪里调用 ajax，如下所示

```
 $.ajax(
                        {
                            type: 'POST',
                            url: '/Path/TestPost',
                            async: false,
                            data: form.serialize(),
                            success: function(data) { 
```

}

更多信息：[在执行 jquery Ajax/MVC 帖子时保持即兴“向上”](https://stackoverflow.com/questions/1277976/keep-impromptu-up-while-performing-a-jquery-ajax-mvc-post)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:46:32.977

好吧，我不太确定你在做什么，但利用 $.ajax 正在实现[jQuery 延迟接口](http://api.jquery.com/category/deferred-object/)的事实：

```
$.ajax({
    // the opts for the call.
    // see the documentation.
}).promise().then(function()
{
    // this gets executed when the ajax call comes back with an OK HTTP code like 200
    // perform console.log(arguments) here to see what you get.
}, function()
{
    // this gets executed when the ajax call comes back with an ERROR HTTP code like 500
    // perform console.log(arguments) here to see what you get.
}).always(function()
{
    // this gets always executed.
    // perform console.log(arguments) here to see what you get.
}); 
```

# knockout.js - 使用淘汰赛根据下拉列表中的选定值隐藏/显示问题

> ID：12516123
> 
> 赞同：2
> 
> 时间：2012-09-20T15:40:06.570
> 
> 标签：knockout.js

好吧，我是一个被淘汰的菜鸟。很难弄清楚一个非常简单的问题。我有一个与淘汰赛 observableArray 相关的下拉列表。还有一个与另一个 observableArray 相关的问题列表。问题应根据下拉列表的选定值隐藏/显示。

在你看小提琴之前，请阅读以下内容。
我硬编码了“EnvId() === 1”只是为了让它工作。我已经尝试了各种函数和 ko.computed（在“问题”和“viewModel”中）用“CurrentEnviron（）”之类的东西替换“1”，但是因为我没有把它们从小提琴中删除想要影响任何人的回答。好的，这是[小提琴](http://jsfiddle.net/acsteitz/bxBKq/)。

我发现了很多其他问题，它们非常**接近**，但差异很大，以至于我无法使用答案。抱歉，如果确实有重复，我只是使用了错误的搜索词并且找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:07:46.923

为了能够使用该选项绑定，您需要确保您还`value`对其应用绑定以标记选择了哪个项目。然后，您可以使`questions`数组成为一个计算的 observable，它会根据所选值返回一个过滤问题的数组。

```
Environment Type: <select id="qEnv" data-bind="value: selectedEnvironment, options: envTypes, optionsCaption: 'Select...', optionsValue: 'envId', optionsText: 'envName'"></select> 
```

还要确保使用您创建的映射数组初始化可观察数组。不要像以前那样更换它们。（虽然在这种情况下它并不重要，因为数组没有被修改）

```
function viewModel() {
    var self = this;

    // initialize the array with the mapped array
    self.envTypes = ko.observableArray(ko.utils.arrayMap(environments, function(item) {
        return {
            envName: item.Text,
            envId: item.EnvId
        };
    }));

    // this tracks our selected environment value
    self.selectedEnvironment = ko.observable();

    // return a filtered array where the items match the selected environment
    self.questions = ko.computed(function () {
        return ko.utils.arrayFilter(quests, function (item) {
            return item.EnvId == self.selectedEnvironment();
        });
    });
} 
```

您可能希望根据问题数组是否为空来显示问题或消息，因此您必须调整测试。

```
data-bind="if: questions().length" 
```

环境具有重复`EnvId`值，因此我更新了这些值并添加了`optionsCaption`绑定以增加效果。

[更新的小提琴](http://jsfiddle.net/jeff1203/bxBKq/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T01:01:21.990

如果有人感兴趣，可以使用映射插件进行压缩。还修复了原始小提琴中的错误。

[http://jsfiddle.net/jgerstorff/bxBKq/25/](http://jsfiddle.net/jgerstorff/bxBKq/25/)

# .net - VB.net 中的 myObject.MyField 和 myObject.MyField() 有什么区别？

> ID：12516125
> 
> 赞同：0
> 
> 时间：2012-09-20T15:40:10.777
> 
> 标签：.net, vb.net

我偶然发现了这个问题：

`myObject`的类有一个公共字段`MyField`，其类型是`Decimal?`

我不小心访问了该字段，就好像它是具有此代码的属性：

```
myObject.MyField() 
```

代替

```
myObject.MyField 
```

我从编译器得到以下错误：`Structure 'Decimal?' cannot be indexed because it has no default property`

[MSND 上有关此错误的](http://msdn.microsoft.com/en-us/library/fst9zcwd%28v=vs.80%29.aspx)文档非常短，我只是不明白它的含义。

**Q：如果有一个是什么意思，`myObject.MyField()`如果有，为什么我不能在我的领域使用？**

注意：我的问题现已解决，但我想了解...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:50:38.557

`()`您可以使用VB.NET访问数组的元素。错误消息告诉您，`Structure 'Decimal?' cannot be indexed`因为它不能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:42:12.520

在这种情况下，它是索引运算符，就像`[]`在 C# 中一样。

更准确地说，在 VB.NET 中它被称为“默认属性”，而在 C# 中它被称为“索引器”。

有关更多详细信息，请参见[此处。](http://msmvps.com/blogs/manoj/archive/2004/10/15/15891.aspx)

# slideshow - 使用 knitr 生成的视频与 pandoc & slidy

> ID：12516128
> 
> 赞同：1
> 
> 时间：2012-09-20T15:40:14.917
> 
> 标签：slideshow, knitr, rstudio, pandoc

我正在使用 Rstudio & Knitr (Ubuntu 12-04) 在 Rmd (markdown) 中编写幻灯片。我生成了一些带有块选项的视频，这些视频`fig.show='animate'`可以通过 knitr 生成的 HTML 很好地看到。

然后我使用 pandoc 生成滑动的 HTML 代码，但随后视频不显示，并显示以下消息：

> 找不到支持的视频格式和 MIME 类型

有谁知道如何使这些视频与 slidy 配合使用？

# vim - 如何有效管理 vim 中的选项卡/缓冲区？

> ID：12516130
> 
> 赞同：8
> 
> 时间：2012-09-20T15:40:19.090
> 
> 标签：vim, tabs, buffer

这就是我使用 vim 选项卡的方式：

![在此处输入图像描述](../Images/3e56375ef4a1490635d1d459766a30a5.png)

我有快捷方式来向左/向右`<ctrl>j` `<ctrl>k`移动标签，以及在标签之间移动`<ctrl>h`, `<ctrl>l`。根据对[这个问题](https://stackoverflow.com/questions/102384/using-vims-tabs-like-buffers)的回答，我做错了。那么如何有效地使用缓冲区呢？不断列出隐藏的缓冲区以知道要切换到哪个缓冲区似乎并不是一种改进。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T16:06:59.653

在 Vim 中处理缓冲区的方法没有对错之分。首先，学习和理解缓冲区、窗口和标签页之间的区别。然后采用适合您的风格。[http://www.vim.org/](http://www.vim.org/)上有很多“缓冲区管理”插件，但您也可以只使用内置命令`:buffer`，例如文件完成。

如果您只坚持“每个选项卡一个文件”规则（例如在浏览器中），您将失去窗口拆分的好处，并且您仍然偶尔会遇到预览和快速修复窗口形式的拆分，并且在为了使用差异模式。

我主要使用标签页来分隔不同的工作区（我只运行了一个 GVIM 实例）；有时我会在不同的选项卡中以不同的排列方式打开同一组缓冲区，例如 Eclipse 等 IDE 中的*透视图。*

# magento - magento - 将 BLOCKTYPE 添加到静态块

> ID：12516131
> 
> 赞同：0
> 
> 时间：2012-09-20T15:40:22.700
> 
> 标签：magento, plugins, block

好的，所以我安装了一个插件。使用它的唯一选项是将此代码放在 CMS 页面中：{{block type="ve_easyslide/list" template="ve/easyslide.phtml"}}。

首先，这些代码块叫什么，它有什么作用？

其次，我怎么能在静态块中使用它？当我现在尝试将它放在静态块中时，它只会在 ym 网站上显示代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:32:48.887

它被称为魔术变量。
即
`{{block type="catalog/product_list" template="catalog/product/list.phtml"}}`
相当于布局的 XML：
`<block type="catalog/product_list" template="catalog/product/list.phtml" />`
您可以在示例中的 catalog.xml 中找到它。
类型属性指向类 - 在这个例子中它`Mage_Catalog_Block_Product_List`和模板，嗯，指向模板文件:)

您可以在静态块中使用相同的代码，但请确保在所见即所得编辑器关闭时插入代码。

# sql - 用于 xml 路径的 T-sql

> ID：12516134
> 
> 赞同：0
> 
> 时间：2012-09-20T15:40:27.290
> 
> 标签：sql, tsql, xpath

我有一个具有以下结构 OrderItems 的表

```
 OrderId  ProductName  UnitPrice
      1      Harley         1.0
      1      Gloves         0.25
      2      Gloves         0.25

 By doing a select I would like to obtain something similar with :
<Order>
<OrderItem>
<OrderId>1</OrderId><ProductName>Harley</ProductName><UnitPrice>1.0</UnitPrice>
</OrderItem>
<OrderItem>
<OrderId>1</OrderId><ProductName>Gloves</ProductName><UnitPrice>0.25</UnitPrice>
</OrderItem>
</Order>

and 
<Order>
<OrderItem>
<OrderId>2</OrderId><ProductName>Gloves</ProductName><UnitPrice>0.25</UnitPrice>
</OrderItem>
</Order> 
```

目前我被困在

```
SELECT 
  t2.OrderId, t2.ProductName, t2.UnitPrice  
       FROM OrderItems t2,OrderItems t1 where t2.OrderId = t1.OrderId
        FOR XML PATH('OrderItem') , ROOT('Order') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:01:08.737

这

```
DECLARE @OrderItems TABLE (OrderID INT, ProductName VARCHAR(50), UnitPrice MONEY)
INSERT @OrderItems VALUES (1, 'Harley', 1.0), (1, 'Gloves', 0.25), (2, 'Gloves', 0.25)

SELECT  (   SELECT  OrderID, ProductName, UnitPrice
            FROM    @OrderItems t2
            WHERE   t2.OrderID = t1.OrderID
            FOR XML PATH('OrderItem'), TYPE
        ) 
FROM    (SELECT DISTINCT OrderID FROM @OrderItems) t1 
FOR XML PATH('Order') , ROOT('Orders') 
```

给出这个输出

```
<Orders>
  <Order>
    <OrderItem>
      <OrderID>1</OrderID>
      <ProductName>Harley</ProductName>
      <UnitPrice>1.0000</UnitPrice>
    </OrderItem>
    <OrderItem>
      <OrderID>1</OrderID>
      <ProductName>Gloves</ProductName>
      <UnitPrice>0.2500</UnitPrice>
    </OrderItem>
  </Order>
  <Order>
    <OrderItem>
      <OrderID>2</OrderID>
      <ProductName>Gloves</ProductName>
      <UnitPrice>0.2500</UnitPrice>
    </OrderItem>
  </Order>
</Orders> 
```

我想这就是你所追求的。

**[SQL小提琴](http://www.sqlfiddle.com/#!3/8adcf/1)**

# php - 清理单词数组

> ID：12516137
> 
> 赞同：0
> 
> 时间：2012-09-20T15:40:42.963
> 
> 标签：php

我有一个函数可以剥离 html 并将单词放在一个数组中，然后使用 array_count_values。我试图报告每个单词的出现次数。输出的数组很乱。我试图清理它，但我无处可去。我想删除电话号码，并且出于某种原因将短语放在一起。第一个数组似乎也为空，但 isset() 或 empty() 似乎并没有取消它。

```
$body = $this->get_response($domain);
                $body = preg_replace('/<body(.*?)>/i', '<body>', $body);
                $body = preg_replace('#</body>#i', '</body>', $body);

                $openTag = '<body>';
                $start = strpos($body, $openTag);
                $start += strlen($openTag);

                $closeTag = '</body>';
                $end = strpos($body, $closeTag);

                // Return if cannot cut-out the body
                if ($end <= $start || $start === false || $end === false) {
                    $this->setValue('');
                    return;
                }

                $body = substr($body, $start, $end - $start);
                $body = preg_replace(array(
                       '@<script[^>]*?>.*?</script>@si',    // Strip out javascript
                       '@<style[^>]*?>.*?</style>@siU',     // Strip style tags properly
                       '@<![\s\S]*?--[ \t\n\r]*>@',         // Strip multi-line comments including CDATA
                       '/style=([\"\']??)([^\">]*?)\\1/siU',// Strip inline style attribute
                       ), '', $body);

                $body = strip_tags($body);
                $body = array_filter(explode(' ', $body), create_function('$str', 'return strlen($str) > 2;'));
                $body = array_map('trim', $body);
                $words = $body;

                $i = 0;

                $words = array_count_values($words);

                foreach($words as $word){

                    if (empty($word)) unset($words[$i]);
                    $i++;

                }

                echo "<pre>";
                    print_r($words);
                    echo "</pre>"; 
```

输出

```
Array
(
    [] => 28
    [333.444.5555] => 1
    [facebook] => 2
    [twitter] => 2
    [linkedin] => 2
    [youtube

                googleplus] => 1
    [About

    History
    Our] => 1
    [Mission
    Who] => 1
    [This
     That
     Other] => 1
    [Us

English

    FA
    Football] => 1
    [Media
    Pay] => 2
    [Per] => 4
    [Think
    Fast] => 2
    [Marketing
    Design] => 1
    [Consulting

Case] => 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:18:17.767

恐怕`explode(' ', $body)`还不够，因为空格不是唯一的空白字符。试试`preg_split`吧。

```
$body = array_filter(preg_split('/\s+/', $body), 
            create_function('$str', 'return strlen($str) > 2;')); 
```

# javascript - JScrollPane 动态高度

> ID：12516138
> 
> 赞同：1
> 
> 时间：2012-09-20T15:40:46.813
> 
> 标签：javascript, jquery, wordpress, jscrollpane

可以在[此处](http://igcstonedev.hingeweb.com/stone-tiles/mosaic-herring-bone/)找到引用的演示页面。

我正在尝试确定一种方式，即在单击父类别（例如：Stone Tiles、Stone Sinks）时，JScrollPane 将重新确定当前高度并根据需要进行调整。不幸的是，我这样做的尝试还没有奏效。

[我在这里](http://jscrollpane.kelvinluck.com/dynamic_content.html)引用了示例，它提供了以下功能（进行刷新）......

```
api.reinitialise(); 
```

我试图将这个功能设置为由类别父母触发，就像这样......

```
var pane = $('.menuwrap')
pane.jScrollPane();
var api = pane.data('jsp');
var i = 1;

$("li.expandable.parent").click(function() {
api.reinitialise();
}); 
```

不幸的是，虽然我能够验证点击正在呈现，但函数 (api.reinitialize) 似乎没有工作。我希望一双新鲜的眼睛可以为我指明正确的方向。:-)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:16:50.523

问题是 api.reinitialise 在单击后立即执行，并且 li 元素还没有展开，所以当 jscroll 窗格去重新计算高度时它会出错。您可以尝试添加延迟，但最好的解决方案是将 api.reinitialise() 绑定到列表完成扩展后触发的事件。我不确定您如何在 li 中扩展 div，但如果它使用 .animate，您可以将 api.reinitialise 绑定到动画完成事件。

还注意到并非所有的父 li 都有与它们相关联的类父类。我希望您希望窗格在所有主要 li 元素的展开和折叠时重新初始化。

希望有帮助！

干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:49:21.653

您可以做的是默认扩展您的内部 div，然后使用 jquery 关闭它们，而不是直接在 CSS 中。

所以不要这样做：

```
.mydiv.closed {display:none} 
```

将元素绘制到页面后，在您的 jquery 中执行此操作：

```
$('.mydiv.closed').hide(); 
```

这将在必要的高度加载 jscrollpane，然后折叠您想要最初隐藏的内容。

# javascript - 如何从 iframe 中获取内容类型？

> ID：12516146
> 
> 赞同：1
> 
> 时间：2012-09-20T15:41:12.873
> 
> 标签：javascript, jquery, content-type

有没有办法在附加的加载事件处理函数中获取 iframe 内容的内容类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:50:46.740

我认为这应该使用 jquery 完成工作

```
$('iframe').contents().contentType 
```

在加载事件中，*这*应该指向 iframe dom 所以

```
$(this).contentType 
```

应该管用

# sql - 将标量值函数加入表，将 SVF 生成的列作为输入

> ID：12516151
> 
> 赞同：0
> 
> 时间：2012-09-20T15:41:27.223
> 
> 标签：sql, sql-server, sql-server-2005

我有一个被调用的标量值函数，它在表中给出了一个新的列值，现在我想将这个新列值加入到我在 sql server 2005 中作为派生表添加的新表的列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:37:46.593

您当然可以在 a 中使用该函数`JOIN`，如下所示：

```
SELECT {fieldlist}
FROM {tablename} a
    JOIN {tablename} b ON b.{fieldname} = dbo.{functionname}({parameters}) 
```

但是，正如 Joe 所说，一个代码示例会使这在理论上变得不那么理论化，并且对社区的其他人更有用。

# maven - Maven2：多重继承或配置文件选择

> ID：12516153
> 
> 赞同：0
> 
> 时间：2012-09-20T15:41:38.593
> 
> 标签：maven, maven-2

我有一个包含许多子模块的主/子 pom 项目。对于一些子模块，我有一系列只有他们需要承担的任务，基本上是读取一个属性文件来配置一个 jboss 部署位置。

目前，我已将构建部分复制到几个 POM 中，现在开始敲响警钟。我真的应该写一次并多次使用它。

这让我走上了哲学的道路。

a) 我相信我可以在主 POM 中创建一个配置文件，并在运行子 POM 时启用此配置文件，从而使用父 POM 中定义的功能。这使当前结构代替了 1 个父级：许多子级。它还提出了一个问题，我是否真的可以在子 POM 中激活该配置文件，以便在子 POM 上进行构建的人不必使用 -P 命令行选项？

b) 我可以将现有的父/主 POM 更改为祖父，并将主 POM 继承到新的父 pom 中，将属性读取/jboss 部署设施添加到这个新父级。然后，需要此功能的子 POM 将从新的 Parent 继承，给我一个祖父-父-子继承。这意味着进行构建的人不需要以另一个级别的继承为代价记住命令行。

问题是，哪种方法是“行家之道”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:57:56.910

不幸的是，Maven 不支持选项 a)。我有类似的情况要解决并尝试了 child-enables-profile-defined-in-parent 位，但发现它不起作用；[StackOverflow 其他地方的详细信息](https://stackoverflow.com/a/9994436/944849)。

我不知道是否有官方的最佳做法，因为我之前打猎时没有找到。我使用了祖父母/父母/孩子 POM 和`<pluginManagement>` [配置](http://maven.apache.org/pom.html#Plugin_Management)的组合。

我会`<pluginManagement>`先在你的父母 POM 中尝试。如果这不能完全满足需要，额外的 POM 级别可能会起作用。祝你好运！

# json - 相同的“解析数据时出错 org.json.JSONException”错误仍在跟踪我

> ID：12516157
> 
> 赞同：0
> 
> 时间：2012-09-20T15:41:58.317
> 
> 标签：json, parsing-error

我正在使用 AsyncTask 来显示通过 PHP 和 JSON 从数据库提供的数据，所以当我尝试用完我的应用程序时，我得到了那个错误：

```
09-20 15:31:51.330: E/Buffer Error(4484): Error converting result java.lang.NullPointerException
09-20 15:31:51.330: E/JSON Parser(4484): Error parsing data org.json.JSONException: End of input at character 0 of 
```

这是我的 Java 类：

```
package com.androidhive.dashboard;

import android.app.Activity;
import android.app.ListActivity;
import android.os.Bundle;
import androidhive.dashboard.R;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class PlacesActivity extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> productsList;

    // url to get all products list
    private static String url_all_products = "http://192.168.1.74/test/focus.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_PRODUCTS = "products";
    private static final String TAG_PID = "pid";
    private static final String LIB_ART = "LibArt";
    private static final String COD_ART = "CodArt";

    // products JSONArray
    JSONArray products = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.places_layout);

        // Hashmap for ListView
        productsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllProducts().execute();

        // Get listview
        ListView lv = getListView();

    }//onCreate finish

 // Response from Edit Product Activity
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        // if result code 100
        if (resultCode == 100) {
            // if result code 100 is received 
            // means user edited/deleted product
            // reload this screen again
            Intent intent = getIntent();
            finish();
            startActivity(intent);
        }
    }

        /**
         * Background Async Task to Load all product by making HTTP Request
         * */
        class LoadAllProducts extends AsyncTask<String, String, String> {

            /**
             * Before starting background thread Show Progress Dialog
             * */
            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(PlacesActivity.this);
                pDialog.setMessage("Loading products. Please wait...");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(false);
                pDialog.show();
            }

            /**
             * getting All products from url
             * */
            protected String doInBackground(String... args) {
                // Building Parameters
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                // getting JSON string from URL
                JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

                // Check your log cat for JSON reponse
                Log.d("All Products: ", json.toString());

                try {
                    // Checking for SUCCESS TAG
                    int success = json.getInt(TAG_SUCCESS);

                    if (success == 1) {
                        // products found
                        // Getting Array of Products
                        products = json.getJSONArray(TAG_PRODUCTS);

                        // looping through All Products
                        for (int i = 0; i < products.length(); i++) {
                            JSONObject c = products.getJSONObject(i);

                            // Storing each json item in variable
                            String id = c.getString(TAG_PID);
                            String LibArt = c.getString(LIB_ART);
                            String CodArt = c.getString(COD_ART);

                            // creating new HashMap
                            HashMap<String, String> map = new HashMap<String, String>();

                            // adding each child node to HashMap key => value
                            map.put(TAG_PID, id);
                            map.put(LIB_ART, LibArt);
                            map.put(COD_ART,CodArt);

                            // adding HashList to ArrayList
                            productsList.add(map);
                        }
                    } 
                } catch (JSONException e) {
                    e.printStackTrace();
                }

                return null;
            }

            /**
             * After completing background task Dismiss the progress dialog
             * **/
            protected void onPostExecute(String file_url) {
                // dismiss the dialog after getting all products
                pDialog.dismiss();
                // updating UI from Background Thread
                runOnUiThread(new Runnable() {
                    public void run() {
                        /**
                         * Updating parsed JSON data into ListView
                         * */
                        ListAdapter adapter = new SimpleAdapter(
                                PlacesActivity.this, productsList,
                                R.layout.list_item, new String[] { COD_ART,TAG_PID,
                                        LIB_ART},
                                new int[] { R.id.codart ,R.id.pid, R.id.libart });
                        // updating listview
                        setListAdapter(adapter);
                    }
                });

            }

        }

} 
```

这里是 PHP 文件：

```
<?php
require 'FastJSON.class.php';

$db = mssql_connect ('HPWALID', '', '');
$ret = mssql_select_db ('Focus', $db) or die ('Echec lors de la connexion: '.mysql_error ());
$result = mssql_query("SELECT * FROM TabStock");
if (mssql_num_rows($result) > 0) {
    // looping through all results
    // products node
    $response["products"] = array();

    while ($row = mssql_fetch_array($result)) {
        // temp user array
        $product = array();
        $product["CodArt"] = $row["CodArt"];
        $product["LibArt"] = $row["LibArt"];
        $product["pid"] = $row["pid"];      

        // push single product into final response array
        array_push($response["products"], $product);
    }
    // success
    $response["success"] = 1;

    // echoing JSON response
    $var = FastJSON::encode($response);
    echo $var;
} else {
    // no products found
    $response["success"] = 0;
    $response["message"] = "No products found";

    // echo no users JSON
   // echo json_encode($response);
   $var = FastJSON::encode($response);
   echo $var;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:26:25.567

如果您使用的是模拟器，请将您的 IP 地址（192.168.1.74）更改为（10.0.2.2）

# php - 根据选择框值选择数据库表（php + Ajax）

> ID：12516159
> 
> 赞同：1
> 
> 时间：2012-09-20T15:42:04.343
> 
> 标签：php, ajax

好吧，这让我发疯了，我似乎根本找不到解决方案！

基本上我的页面上有两个选择框，但是我希望根据第一个选择框的值从 mysql 数据库中填充第二个选择框。

例如，如果我从第一个选择框中选择值“misc”，则第二个选择将填充我数据库中的 misc 表！（第二个选择框将在第一个选择框选择更改时通过 ajax 刷新）

我唯一的问题是我想不出一种将第一个选择框的值存储在 php 变量中的方法，因此可以在我的函数中使用它来填充第二个选择框（由 ajax 刷新）

多谢你们

```
<form action="scripts/tp/process.php" method="post" enctype="multipart/form-data">
     Select teleport here:
     <select name="selectmate" id="Testid" onchange='Ajax();'>
        <option value="Misc">Misc...</option>
        <option value="Stunt">Stunt</option>
        <option value="deathmatches">Deathmatches</option>
        <option value="Car"> Car </option>
        <option value="Races">Races </option>
    </select>
    <br/>
    <label for="file">Filename:</label>
    <input name="file" type="file"/>
    <br/>
    <label for="Name">Teleport name:</label>
    <input type="text" name="Name" id="Name"/>
    <br/>
    <label for="Tp"> Teleport command:</label>
    <input type="text" name="Tp" id="Tp"/>
    <br/>
    <label for="Info">teleport infomation</label>
    <input type="text" name="Info" id="Info"/>
    <br/>
    <input type="submit" name="submit" value="Submit"/>
</form>
<h2>Delere entry here!</h2>
<form action="scripts/misc/miscdelete.php" method="post" enctype="multipart/form-data">
    <select name="deletemisc">
        <?php
        ListDatabase($value);
        ?>
    </select>
    <input type="submit" name="delete" value="Delete"/>
</form> 
```

我需要将第一个选择框的值存储在变量 $value 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:09:53.650

```
$("#Testid").change(function () {
    var val = $("#Testid option:selected").text();
    // here your ajax request
    // Fill second select here:
    var deletemisc = $("#deletemisc");
    $("#deletemisc > option").remove();
    $.post("/path/to/script", { selected_val: val}, function(result) {
        $.each(result, function (item) {
            deletemist.append($("<option />").val(item.val).text(item.text));
        })
    });
});​ 
```

“/path/to/script” - 必须返回 json vals 数组。

# c - /usr/bin/ld: 错误: 找不到 -lecl

> ID：12516162
> 
> 赞同：0
> 
> 时间：2012-09-20T15:42:11.420
> 
> 标签：c, gcc, compiler-errors, common-lisp, ecl

我正在尝试编译[嵌入 ECL 的 C 程序示例，其中包含对 C 函数的回调。](http://vwood.github.com/embedded-ecl.html) [github](https://gist.github.com/662109)。我已经通过克隆 ECL repo安装了[ECL (Embeddable Common Lisp)](http://ecls.sourceforge.net/)`git clone git://git.code.sf.net/p/ecls/ecl ecl`，然后使用`$ make`and `# make install`，安装似乎没问题，至少[ECL Developers' Guide: 2.6 Compiler examples](http://ecls.sourceforge.net/ecldev/Compiler-examples.html)编译得很好。

尝试编译[ecldemo.c](https://gist.github.com/662109)时`gcc ecldemo.c -lecl`出现以下错误：

```
/usr/bin/ld: error: cannot find -lecl
/tmp/ccRk8Q48.o:ecldemo.c:function foo: error: undefined reference to 'ecl_make_integer'
/tmp/ccRk8Q48.o:ecldemo.c:function bar: error: undefined reference to 'ecl_make_integer'
/tmp/ccRk8Q48.o:ecldemo.c:function ecl_call: error: undefined reference to 'ecl_make_simple_base_string'
/tmp/ccRk8Q48.o:ecldemo.c:function ecl_call: error: undefined reference to 'si_string_to_object'
/tmp/ccRk8Q48.o:ecldemo.c:function ecl_call: error: undefined reference to 'si_safe_eval'
/tmp/ccRk8Q48.o:ecldemo.c:function init: error: undefined reference to 'cl_boot'
/tmp/ccRk8Q48.o:ecldemo.c:function init: error: undefined reference to 'cl_shutdown'
/tmp/ccRk8Q48.o:ecldemo.c:function init: error: undefined reference to 'ecl_make_simple_base_string'
/tmp/ccRk8Q48.o:ecldemo.c:function init: error: undefined reference to 'si_string_to_object'
/tmp/ccRk8Q48.o:ecldemo.c:function init: error: undefined reference to 'ecl_def_c_function'
/tmp/ccRk8Q48.o:ecldemo.c:function init: error: undefined reference to 'ecl_make_simple_base_string'
/tmp/ccRk8Q48.o:ecldemo.c:function init: error: undefined reference to 'si_string_to_object'
/tmp/ccRk8Q48.o:ecldemo.c:function init: error: undefined reference to 'ecl_def_c_function'
/tmp/ccRk8Q48.o:ecldemo.c:function main: error: undefined reference to 'ecl_make_simple_base_string'
/tmp/ccRk8Q48.o:ecldemo.c:function main: error: undefined reference to 'si_string_to_object'
/tmp/ccRk8Q48.o:ecldemo.c:function main: error: undefined reference to 'si_safe_eval'
/tmp/ccRk8Q48.o:ecldemo.c:function main: error: undefined reference to 'cl_print'
/tmp/ccRk8Q48.o:ecldemo.c:function main: error: undefined reference to 'cl_equal'
collect2: error: ld returned 1 exit status 
```

我想知道这个错误行：

```
/usr/bin/ld: error: cannot find -lecl 
```

在我看来，它`gcc`以某种方式解释`-lecl`为源文件，而不是应有的选项`-l library`（搜索名为 的库`library`）。`-l`在和`ecl`( )之间留一个空格`gcc ecldemo.c -l ecl`没有帮助，输出是相同的 ( `cannot find -lecl`)。

由于`ecl.h`位于`/usr/local/include/ecl/`并`ecldemo.c`包含在其中`#include "ecl/ecl.h"`，我尝试使用以下`-L`选项添加库目录：

`gcc -L /usr/local/include/ecl ecldemo.c -l ecl`

...但无济于事，同样的错误`usr/bin/ld: error: cannot find -lecl`仍然存​​在。

任何想法可能导致此错误以及如何解决此错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T15:44:57.180

你的`-L`选择是错误的。您需要告诉它在哪里可以找到*库*，而不是在哪里可以找到头文件。该库很可能被称为`libecl.so`或`libecl.a`类似的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-03T03:24:12.830

不要指定`-lecl`并`-L...`直接使用`ecl-config`：

```
gcc `ecl-config --cflags` ecldemo.c -o ecldemo `ecl-config --libs` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:49:04.643

基于[http://ecls.sourceforge.net/ecldev/Compiler-examples.html](http://ecls.sourceforge.net/ecldev/Compiler-examples.html)

```
;;; Invoking external command: gcc -o "libmyecl.so" -L"/usr/lib/ecl/" "myecl.o" "hello.o"  -Wl,–rpath,/usr/lib/ecl/ -shared   -lecl -lgmp -lgc -ldl -lm 
```

我想你需要

```
gcc -L/usr/lib/ecl ecldemo.c -lecl 
```

# git - git：查找“他们的”中不存在的“我的”最旧的提交

> ID：12516169
> 
> 赞同：3
> 
> 时间：2012-09-20T15:42:30.500
> 
> 标签：git, branch, git-branch

我希望能够在我的 git-graph 中找到上游不存在的最长路径。这条路的一端显然是 HEAD，所以这很容易。另一端是我最旧的提交，上游不存在。我不知道如何找到这个。

图表

```
[otherguy]   H--I--J   
            /       \
[master]   A--B--C--M1--D--E--M2--F--G
              \      \             \
[mine]         H---I--M3---J---K---M4--M--HEAD 
```

我想要一个命令，它会将我指向 H（或 B），给定`HEAD`和`master`. 请注意，一个简单的`git merge-base master HEAD`给我 F。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T17:05:29.150

这应该合理地工作：

```
git rev-list --topo-order --reverse mine ^master | head -1 
```

使用您的设置副本进行测试，它会打印您标记为“H”的提交。我不是 100% 相信它会在所有可能的情况下找到“最远”的路径，或者这样的概念甚至是明确定义的，因此您可能希望在依赖它之前在对您很重要的情况下对其进行测试。

（请注意，`-1`通常指定限制`git rev-list`输出的选项不能与 很好地结合`--reverse`，因此`head -1`需要。）

* * *

更新：

一些解释：

*   `git rev-list mine ^master`请求可从 访问的提交`mine`，但不能从`master`。在您的情况下，我们请求所有以 开头的提交`HEAD`，不包括那些可以从 到达`G`的提交，它给出了提交列表`(M, M4, K, J, M3, I, H)`，我们选择最后一个。

*   `--topo-order`需要确保提交的拓扑顺序（提交始终出现在其父级之前），而不是默认的时间顺序。我们还指定`--reverse`，因为我们需要最后一个。

*   `commit1 ^commit2`也可以拼写，当是 的后代`commit2..commit1`时，这是首选语法。在这种情况下，我们已经分道扬镳了，所以更清楚地说明我们想要什么。也允许多个排除项，例如。这适用于所有采用范围的 git 命令，并记录在[手册](http://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html)中。`commit1``commit2``mine``master``git log branch1 ^branch2 ^branch3`[`git rev-parse`](http://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:06:08.420

这主要等同于问题»哪些提交可以从（我的）HEAD 访问，但不能从 master 访问？« 要回答这个问题，请使用提交范围`master..HEAD`。您想要此列表中最旧的提交，因此通过 tail: 管道输出`git rev-list master..HEAD|tail -n1`。

如果您的提交时间戳未按时间顺序排列，您可能必须指定`--topo-order`rev-list 选项。

# ruby-on-rails - 自动识别 Rails 中不再使用的 Ruby Gems

> ID：12516171
> 
> 赞同：0
> 
> 时间：2012-09-20T15:42:44.643
> 
> 标签：ruby-on-rails, ruby, gem, bundler

是否可以自动识别 Rails 项目中不再使用的 Ruby gem？

例如，如果一位开发人员将 gem 'nokogiri' 添加到 Gemfile 中，以实现功能上的一部分，但现在已经删除了依赖于该 gem 的代码。我希望将我的整个项目移植到 jRuby，因此删除我们不再是一个非常明智的起点的 gem。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:04:09.700

通常宝石以特定的方式使用，因此对于每个宝石，您都必须手动查找模式。

例如，如果我必须确定是否使用了 Nokogiri，我会用它`git grep`来查找 Nokogiri 的出现（我假设你使用 git）：

```
git grep Nokogiri 
```

如果没有返回任何内容，您可能没有使用它。

另一种方法是，如果您有一个测试套件，只需将其删除并查看是否有问题。并非万无一失，但如果您有良好的测试，它应该是一条非常安全的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:22:33.523

在 ruby​​forge 上有一个名为[gem_unused](https://rubygems.org/gems/gem_unused)的 gem 。它向“gem”添加了一个“未使用”命令。但是，我无法对此进行测试，因为它似乎在我的系统上失败了。（我是 Rails 世界的新手，所以也许这是其他人可以解决的问题。我在维护者的 github 上提出了一个问题）

# jquery - jquery ajax 的仅 Chrome 错误：未捕获的 TypeError：无法读取 null 的属性“数据”

> ID：12516173
> 
> 赞同：0
> 
> 时间：2012-09-20T15:42:53.137
> 
> 标签：jquery, ajax

我正在尝试从 youtube api 返回结果。我的代码如下：

```
function Vget(strt){

$.get("https://gdata.youtube.com/feeds/api/videos", { q: "soccer, 'start-index':strt,     'max-results':"5", v:"2",alt:"jsonc" },
 function(dta){
 var dt= $.parseJSON(dta);
var res= dt.data.items;
var tr=  dt.data.totalItems;

if ( (dt.data) && tr>0){
  for (i=0;i<5;i++){
 //do something with results
  }

}
})
} 
```

但是“var res=dt.data.items;”这一行 在 Chrome 中给我一个错误：“未捕获的 TypeError：无法读取 null 的属性‘数据’”。

Firebug 没有显示任何错误...

**编辑：**

我尝试注释掉“var dt= $.parseJSON(dta);” 并将“dt.data”替换为“dta.data。并直接使用 dta 对象。这在 Chrome 上效果很好，但随后 Firefox 给出了一个错误：“dta.data in undefined”！

**编辑 2**：这是返回的 json 的样子：

```
{"apiVersion":"2.1","data":{"updated":"2012-09-20T16:45:14.080Z","totalItems":153820,"startIndex":1,"itemsPerPage":2,"items":[{"id":"PO2b3cggqs0","uploaded":"2009-05-04T05:50:37.000Z","updated":"2012-09-20T03:28:49.000Z","uploader":"jbtdotcom","category":"Music","title":"Zebra - Official Video","description":"Official video clip for the JBT song, 'Zebra' from the album 'Sunrise Over Sea'. www.johnbutlertrio.com","thumbnail":{"sqDefault":"http://i.ytimg.com/vi/PO2b3cggqs0/default.jpg","hqDefault":"http://i.ytimg.com/vi/PO2b3cggqs0/hqdefault.jpg"},"player":{"default":"https://www.youtube.com/watch?v=PO2b3cggqs0&feature=youtube_gdata_player","mobile":"https://m.youtube.com/details?v=PO2b3cggqs0"},"content":{"5":"https://www.youtube.com/v/PO2b3cggqs0?version=3&f=videos&app=youtube_gdata","1":"rtsp://v8.cache2.c.youtube.com/CiILENy73wIaGQnNqiDI3ZvtPBMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp","6":"rtsp://v3.cache1.c.youtube.com/CiILENy73wIaGQnNqiDI3ZvtPBMYESARFEgGUgZ2aWRlb3MM/0/0/0/video.3gp"},"duration":240,"rating":4.9585986,"likeCount":"4351","ratingCount":4396,"viewCount":1114536,"favoriteCount":5266,"commentCount":638,"accessControl":{"comment":"allowed","commentVote":"allowed","videoRespond":"moderated","rate":"allowed","embed":"allowed","list":"allowed","autoPlay":"allowed","syndicate":"allowed"}},{"id":"fljKx9nvrL4","uploaded":"2012-01-19T14:00:00.000Z","updated":"2012-09-20T06:03:17.000Z","uploader":"rhettandlink","category":"Entertainment","title":"Dope Zebra - Rhett & Link (Official Original Video) LMFAO","description":"This zebra is dope. Extended song on iTunes: dft.ba ** Official T-SHIRT: dft.ba Featured in LMFAO's Sorry For Party Rockin' music video and in their American Idol live performance on 4/19/12 and Billboard Music Awards on 5/20/12\. You might have also spotted him on America's Got Talent...","thumbnail":{"sqDefault":"http://i.ytimg.com/vi/fljKx9nvrL4/default.jpg","hqDefault":"http://i.ytimg.com/vi/fljKx9nvrL4/hqdefault.jpg"},"player":{"default":"https://www.youtube.com/watch?v=fljKx9nvrL4&feature=youtube_gdata_player","mobile":"https://m.youtube.com/details?v=fljKx9nvrL4"},"content":{"5":"https://www.youtube.com/v/fljKx9nvrL4?version=3&f=videos&app=youtube_gdata","1":"rtsp://v1.cache7.c.youtube.com/CiILENy73wIaGQm-rO_Zx8pYfhMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp","6":"rtsp://v1.cache6.c.youtube.com/CiILENy73wIaGQm-rO_Zx8pYfhMYESARFEgGUgZ2aWRlb3MM/0/0/0/video.3gp"},"duration":109,"aspectRatio":"widescreen","rating":4.958495,"likeCount":"55842","ratingCount":56427,"viewCount":4658199,"favoriteCount":32961,"commentCount":12834,"accessControl":{"comment":"allowed","commentVote":"allowed","videoRespond":"denied","rate":"allowed","embed":"allowed","list":"allowed","autoPlay":"allowed","syndicate":"allowed"}}]}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:47:55.963

尝试将json写入控制台并检查数据的格式..

```
function(dta){
 console.log(dta); // Before Parsing
 var dt= $.parseJSON(dta);
 console.log(dt);  //After Parsing 
```

看起来您没有正确访问数据

# sharepoint - 如何从 SharePoint 服务器获取可用的 ADFS 服务器和领域？

> ID：12516174
> 
> 赞同：0
> 
> 时间：2012-09-20T15:42:54.363
> 
> 标签：sharepoint, authentication, adfs

从浏览器中，如果我有一个 ADFS (STS)，当我尝试访问 SharePoint 网站时，我可以从 HTTP 响应中的重定向中获取 ADFS URL 和领域以进行身份​​验证。如果我在 SharePoint 站点上配置了 1 个以上的 STS 服务器，系统将提示我 (Home Realm Discovery) 提供可用的领域和 ADFS 服务器，以选择在哪里进行身份验证。

但是有没有办法从 SharePoint 以编程方式获取这些（不是通过 HTTP 重定向或网页提示），例如 SOAP API 或 REST API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:13:17.807

没有 ADFS 直接 API。

[Windows PowerShell 中](http://technet.microsoft.com/en-us/library/ee892329.aspx)有AD FS 2.0 Cmdlet 。

您想要的是“Get-ADFSClaimsProviderTrust”。

您可以从例如 C# 访问 PowerShell。然后你只需要解析出响应。

# c - 在 ANSI C 中不引入额外变量的情况下对原始值赋值的测试结果

> ID：12516179
> 
> 赞同：0
> 
> 时间：2012-09-20T15:43:08.443
> 
> 标签：c

我想知道我是否可以在不引入新示例的情况下同时分配一个值并检查它是否在 C 条件表达式中发生了变化。考虑`test`以下示例中固定的函数（我不想更改其参数或返回值）。`main`我在打印的例程中搜索条件的变体，`"works"`因为测试例程的值`n`增加了 1。即我想与 nsing 的旧值进行比较。同时它应该打印`"works not"`如果`n`不会被测试增加。我想知道这是否有可能利用评估顺序或其他东西的规则，即不引入存储值的新变量`n`。

```
#include <stdlib.h>
#include <stdio.h>

int test(int n)
{    
    return n + 1;    
}

int main()
{    
  int n;

  if ((n = test(n)) == n) {
     printf("works not\n");
  } else {
     printf("works\n");
  }

  return 0;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:46:08.987

简短的回答：不，你不能。有关更长的解释，请查看[序列点](http://en.wikipedia.org/wiki/Sequence_point)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:44:21.953

不，你不能这样做，这是未定义的行为，因为在赋值和比较之间没有序列点。

# javascript - 重新加载/刷新页面是否会重新下载任何 ajax/javascript 脚本/文档？

> ID：12516180
> 
> 赞同：0
> 
> 时间：2012-09-20T15:43:09.283
> 
> 标签：javascript, html, caching, scripting, reload

我有一个通过 Jquery 的 GET ajax 调用加载 javascript 文件和文本文件的网页。我的问题是：如果我在该页面上有一个链接将您发送到同一页面但带有 url 变量（即 www.mysite.com -> www.mysite.com?id=10），它是否会重新下载整个javascript 文件和文本文档，还是将它们保存在缓存中？如果它正在重新下载文本文件，有没有办法将它保存在缓存中并在每次后续重新加载时从缓存中调用它（在缓存中检查它并在它存在时调用它）？

我问是因为我不想让用户每次都重新下载文件，因为我有指向同一页面的链接。

是的，我知道我最好让它动态化，这样页面就不必刷新了。但是，为了这个问题，请假设它必须以这种方式设置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:45:08.043

每个文件都以单独的方式缓存。如果其他文件的 URL 没有更改，您更改父文件的 URL 的事实不会强制重新加载其他文件。

所以不用担心：当您查看另一个 SO 问题时，您不会再次下载图像和 js 文件。

如果您的问题与父文件有关，即直接加载的文件，是的，如果您更改 URL，则会重新加载。你无法避免这一点。但是您可以通过将大部分内容（js、图像）放在 URL 不变的单独文件中来使其变得非常小且微不足道。

# spring - 如何获取字符串值并将其保存在数据库中

> ID：12516182
> 
> 赞同：0
> 
> 时间：2012-09-20T15:43:12.320
> 
> 标签：spring, hibernate

我正在使用弹簧形式标签和休眠..

我的jsp页面有以下代码：

```
<tr><td><form:input path="userEnteredHostNameString" size="30" maxlength="200"/></td>
<td><form:input path="userEnteredDirectoryString" size="30" maxlength="200"/></td>
<td><form:input path="userEnteredUserNameString" size="20" maxlength="20"/></td>
<td><form:input path="userEnteredPasswordString" size="20" maxlength="20"/></td></tr> 
```

我的 location.java 中的 getter 和 setter

```
public String getUserEnteredHostNameString() {
        return userEnteredHostNameString;
    }
    public void setUserEnteredHostNameString(String userEnteredHostNameString) {
        if (userEnteredHostNameString!=null) userEnteredHostNameString = userEnteredHostNameString.toUpperCase();
        this.userEnteredHostNameString = userEnteredHostNameString;
    }
    public String getUserEnteredDirectoryString() {
        return userEnteredDirectoryString;
    }
    public void setUserEnteredDirectoryString(String userEnteredDirectoryString) {
        if (userEnteredDirectoryString!=null) userEnteredDirectoryString = userEnteredDirectoryString.toUpperCase();
        this.userEnteredDirectoryString = userEnteredDirectoryString;
    }
    public String getUserEnteredUserNameString() {
        return userEnteredUserNameString;
    }
    public void setUserEnteredUserNameString(String userEnteredUserNameString) {
        if (userEnteredUserNameString!=null) userEnteredUserNameString = userEnteredUserNameString.toUpperCase();
        this.userEnteredUserNameString = userEnteredUserNameString;
    }
    public String getUserEnteredPasswordString() {
        return userEnteredPasswordString;
    }
    public void setUserEnteredPasswordString(String userEnteredPasswordString) {
        if (userEnteredPasswordString!=null) userEnteredPasswordString = userEnteredPasswordString.toUpperCase();
        this.userEnteredPasswordString = userEnteredPasswordString;
    } 
```

在我的控制器中，我有以下代码：

```
FtpScanEvents f = new FtpScanEvents();
        if(location.getUserEnteredHostNameString()!=null){
            f.setHostName(location.getUserEnteredHostNameString());
            }
        if(location.getUserEnteredDirectoryString()!=null){
            f.setDirectory(location.getUserEnteredDirectoryString());
            }
        if(location.getUserEnteredUserNameString()!=null){
            f.setUserName(location.getUserEnteredUserNameString());
            }
        if(location.getUserEnteredPasswordString()!=null){
            f.setPassword(location.getUserEnteredPasswordString());
            }
        ftpDao.save(f); 
```

FtpScanEvents 表具有`hostName, directory, username, password, locationId, idx, Id`列..

ftpscanevents 的 hbm 映射文件：

```
<hibernate-mapping package="ca.ups.tundra.model">
    <class name="FtpScanEvents" table="FTP_SCAN_EVENTS">
        <id name="id" type="long">
            <generator class="native"/>
        </id>
        <property name="hostName" type="string" column="HOSTNAME" length="200"/>
        <property name="directory" type="string" column="DIRECTORY" length="200"/>
        <property name="userName" type="string" column="USERNAME" length="20"/>
        <property name="password" type="string" column="PASSWORD" length="20"/>
        <many-to-one name="location" class="Location" cascade="all">
            <column name="ID" not-null="true" />
        </many-to-one>
    </class>
</hibernate-mapping> 
```

保存（e实体）代码..

```
@Override
    @Transactional(propagation = Propagation.MANDATORY)
    public void save(E entity) {
        if(entity == null)
            throw new NullArgumentException("entity");
        Session s = sessionFactory.getCurrentSession();
        s.saveOrUpdate(entity);
    } 
```

当涉及到`ftpDao.save(f);`程序终止并且控制台中没有错误时..任何建议都非常感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:01:11.953

In the save method, I was missing a property. Added that property with a if condition and it worked!

# android - 如何使 arrayAdapter 显示多个数组的内容？

> ID：12516183
> 
> 赞同：1
> 
> 时间：2012-09-20T15:43:17.047
> 
> 标签：android, multidimensional-array, android-listview, android-arrayadapter

我有一个多维arrayList.eg

```
arrayList 0 --> {startdate, duration, status}
          1 --> {startdate, duration, status}
          2 --> {startdate, duration, status} 
```

我已经捆绑了这个数组并将其发送到下一个 Activity。在这个活动中，我可以将 arrayList 的第一个索引传递给适配器并显示数据（虽然它显示了 5 次而不是一次，但另一个问题）。

我的问题是如何将多个数组传递给适配器或让适配器迭代多个数组？

在下面的片段数组中是多维数组。我已经硬编码了 position(0) 以传递给适配器。我如何将内部的其他 7 个数组传递给适配器。

```
public class GetRota extends Activity {

    private static final String TAG = GetRota.class.getSimpleName();
    ListView listView;
    Intent intent;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.getrotalayout);

        listView = (ListView)findViewById(R.id.rotalist);
        intent = this.getIntent();
        Bundle bundle = intent.getBundleExtra("rotaArrayBundle");

        @SuppressWarnings("unchecked")
        ArrayList array =  (ArrayList) bundle.get("rotaArray");             
        String record = array.get(0).toString();
        String[] itemsInRecord = record.split(",");
        String[] recordItem = new String[5];

       for(int x = 0; x < itemsInRecord.length; x++){

           Log.e(TAG, "token = " + itemsInRecord[x]);
           recordItem[x] = itemsInRecord[x];
      }

       MySimpleArrayAdapter arrayAdapter = new MySimpleArrayAdapter(this, recordItem);
       listView.setAdapter(arrayAdapter);

    }// end of onCreate

    private class MySimpleArrayAdapter extends ArrayAdapter<String> {
          private final Context context;
          private final String[] values;

          public MySimpleArrayAdapter(Context context, String[] values) {
            super(context, R.layout.rotarowlayout, values);
            this.context = context;
            this.values = values;
          }

          @Override
          public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View rowView = inflater.inflate(R.layout.rotarowlayout, parent, false);
           TextView startTime = (TextView)rowView.findViewById(R.id.rowstarttime);
           TextView duration = (TextView)rowView.findViewById(R.id.rowduration);
           TextView status = (TextView)rowView.findViewById(R.id.rowstatus);
           TextView name = (TextView)rowView.findViewById(R.id.rowclientname);

           startTime.setText("Start Time: " + values[0]);
           duration.setText("Duration:" + values[1]);
           status.setText("Status:" + values[2]);
           name.setText("Client:" + values[3] + values[4]);

            return rowView;
          }
        }   
    }// end of GetRota 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:20:24.980

通过从 BaseAdapter 扩展来编写自己的适配器，然后将值数组传递给适配器，而不是传递 ArrayList 本身。您可以使用位置值访问 getView 中的正确索引。这就是您的代码的样子

```
private class MySimpleArrayAdapter extends BaseAdapter {
      private final Context context;
      private final ArrayList array;

      public MySimpleArrayAdapter(Context context, ArrayList array) {
        this.context = context;
        this.array = array;
      }

    public int getCount() {
        return array.size();
    }

    public Object getItem(int position) {
        return array.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

      @Override
      public View getView(int position, View convertView, ViewGroup parent) {
        String[] values = array.get(position).toString();
        View rowView;

        if (convertView == null) { // if it's not recycled, initialize some
                                // attributes
            rowView = new View(context);
            // get layout from gridview_item.xml
            rowView = inflater.inflate(R.layout.rotarowlayout, parent, false);
        } else {
            rowView = (View) convertView;
        }

       TextView startTime = (TextView)rowView.findViewById(R.id.rowstarttime);
       TextView duration = (TextView)rowView.findViewById(R.id.rowduration);
       TextView status = (TextView)rowView.findViewById(R.id.rowstatus);
       TextView name = (TextView)rowView.findViewById(R.id.rowclientname);

       startTime.setText("Start Time: " + values[0]);
       duration.setText("Duration:" + values[1]);
       status.setText("Status:" + values[2]);
       name.setText("Client:" + values[3] + values[4]);

        return rowView;
      }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:47:05.697

您需要继承 BaseAdapter 并使用它来对数据执行任何操作。 [这是一篇](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)关于创建自定义适配器的文章。

# r - 在R中访问一定范围的矩阵元素

> ID：12516186
> 
> 赞同：4
> 
> 时间：2012-09-20T15:43:34.980
> 
> 标签：r, loops, for-loop, matrix

我有一个矩阵，我想在其中将某些特定元素归零。

例如，假设我的矩阵是：

```
m <- matrix(1:100, ncol=10) 
```

然后我有两个向量指示要保留哪些元素

```
m.from <- c(2, 5, 4, 4, 6, 3, 1, 4, 2, 5)
m.to   <- c(7, 9, 6, 8, 9, 5, 6, 8, 4, 8) 
```

因此，例如，我将在第 1 行中保留元素 3:6，并将元素 1:2 和 7:10 设置为 0。对于第 2 行，我将保留 6:8 并将其余元素设为零，依此类推。

现在，我可以轻松做到：

```
for (line in 1:nrow(m))
    {
    m[line, 1:m.from[line]] <- 0
    m[line, m.to[line]:ncol(m)] <- 0
    } 
```

这给出了正确的结果。

然而，在我的具体情况下，我在一个 ~15000 x 3000 矩阵上运行，这使得使用这种循环的时间非常长。

如何加快此代码的速度？我虽然使用`apply`，但是如何访问 m.from 和 m.to 的正确索引？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T22:38:27.493

这是一个简单的面向矩阵的解决方案：

```
m[col(m) <= m.from] <- 0
m[col(m) >= m.to] <- 0
m
      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]    0    0   21   31   41   51    0    0    0     0
 [2,]    0    0    0    0    0   52   62   72    0     0
 [3,]    0    0    0    0   43    0    0    0    0     0
 [4,]    0    0    0    0   44   54   64    0    0     0
 [5,]    0    0    0    0    0    0   65   75    0     0
 [6,]    0    0    0   36    0    0    0    0    0     0
 [7,]    0   17   27   37   47    0    0    0    0     0
 [8,]    0    0    0    0   48   58   68    0    0     0
 [9,]    0    0   29    0    0    0    0    0    0     0
[10,]    0    0    0    0    0   60   70    0    0     0 
```

（我想我也可能在这个上赢得 R 高尔夫奖。）我的参赛作品是：

```
m[col(m)<=m.from|col(m)>= m.to]<-0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T16:18:38.220

最好的解决方案是预先计算所有要替换的索引，然后用单个赋值操作替换它们。

由于 R 以[列优先顺序](http://en.wikipedia.org/wiki/Row-major_order)存储矩阵，我发现更容易考虑要在矩阵的转置版本中替换的元素序列。这就是我在下面使用的。但是，如果这两个调用`t()`成本太高，我相信您可以找到一种巧妙的方法来计算未转置矩阵的索引——也许使用包含行和列索引的两列矩阵。

```
## Your example
m <- matrix(1:100, ncol=10)
m.from <- c(2, 5, 4, 4, 6, 3, 1, 4, 2, 5)
m.to   <- c(7, 9, 6, 8, 9, 5, 6, 8, 4, 8)

## Let's work with a transposed version of your matrix
tm <- t(m)

## Calculate indices of cells to be replaced
i <- (seq_len(ncol(tm)) - 1) * nrow(tm)
m.to   <- c(1, m.to + i)
m.from <- c(m.from + i, length(m))
ii <- unlist(mapply(seq, from = m.to, to = m.from))

## Perform replacement and transpose back results
tm[ii] <- 0
m <- t(tm)
#       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
#  [1,]    0    0   21   31   41   51    0    0    0     0
#  [2,]    0    0    0    0    0   52   62   72    0     0
#  [3,]    0    0    0    0   43    0    0    0    0     0
#  [4,]    0    0    0    0   44   54   64    0    0     0
#  [5,]    0    0    0    0    0    0   65   75    0     0
#  [6,]    0    0    0   36    0    0    0    0    0     0
#  [7,]    0   17   27   37   47    0    0    0    0     0
#  [8,]    0    0    0    0   48   58   68    0    0     0
#  [9,]    0    0   29    0    0    0    0    0    0     0
# [10,]    0    0    0    0    0   60   70    0    0     0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T17:39:09.787

一个`sapply`版本。

```
m <- matrix(1:100, ncol=10)
m.from <- c(2, 5, 4, 4, 6, 3, 1, 4, 2, 5)
m.to   <- c(7, 9, 6, 8, 9, 5, 6, 8, 4, 8)

t(sapply(1:nrow(m), function(i) replace(m[i,], c(1:m.from[i], m.to[i]:ncol(m)), 0 )))   

     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]    0    0   21   31   41   51    0    0    0     0
 [2,]    0    0    0    0    0   52   62   72    0     0
 [3,]    0    0    0    0   43    0    0    0    0     0
 [4,]    0    0    0    0   44   54   64    0    0     0
 [5,]    0    0    0    0    0    0   65   75    0     0
 [6,]    0    0    0   36    0    0    0    0    0     0
 [7,]    0   17   27   37   47    0    0    0    0     0
 [8,]    0    0    0    0   48   58   68    0    0     0
 [9,]    0    0   29    0    0    0    0    0    0     0
[10,]    0    0    0    0    0   60   70    0    0     0 
```

经过时间尚未测试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T20:51:52.697

这个选项构造了一个两列矩阵索引元素被替换，并且不需要矩阵转置，所以*应该*很难被击败，speedwise

```
## Your data
m <- matrix(1:100, ncol=10)
m.from <- c(2, 5, 4, 4, 6, 3, 1, 4, 2, 5)
m.to   <- c(7, 9, 6, 8, 9, 5, 6, 8, 4, 8)

## Construct a two column matrix with row (ii) and column (jj) indices
## of cells to be replaced
ii <- rep.int(1:ncol(m), times = (m.from + (ncol(m) - m.to + 1)))
jj <- mapply(seq, from = m.from + 1, to = m.to - 1)
jj <- unlist(sapply(jj, function(X) setdiff(1:10,X)))
ij <- cbind(ii, jj)

## Replace cells
m[ij] <- 0
#       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
#  [1,]    0    0   21   31   41   51    0    0    0     0
#  [2,]    0    0    0    0    0   52   62   72    0     0
#  [3,]    0    0    0    0   43    0    0    0    0     0
#  [4,]    0    0    0    0   44   54   64    0    0     0
#  [5,]    0    0    0    0    0    0   65   75    0     0
#  [6,]    0    0    0   36    0    0    0    0    0     0
#  [7,]    0   17   27   37   47    0    0    0    0     0
#  [8,]    0    0    0    0   48   58   68    0    0     0
#  [9,]    0    0   29    0    0    0    0    0    0     0
# [10,]    0    0    0    0    0   60   70    0    0     0 
```

# android - 如果在 onResume() 中运行，那么在 onCreate() 中运行的方法会是多余的吗？

> ID：12516188
> 
> 赞同：2
> 
> 时间：2012-09-20T15:43:40.900
> 
> 标签：android, android-activity

看起来 onResume() 中发生的任何事情都不必放在 onCreate 中，因为 onResume() 总是在 onCreate() 之后运行？我问这个是因为我有一个算法，每次用户回到主要活动时都必须执行该算法。如果它已经在 onResume() 中，那么我是否必须在 onCreate() 中拥有它？

![在此处输入图像描述](../Images/fc5dda35fa7942c595a52264891b85a7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:45:02.183

你是对的。`onResume`总是在 之后调用`onCreate`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:45:03.000

不，你不需要它。onResume 总是在 onCreate 之后调用，所以如果 onCreate 运行，onResume 也会运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:48:19.753

基本上是这样。但是您需要考虑暂停/恢复和启动/停止对您的应用程序意味着什么。此外，当您在 OnCreate 中时，尚未创建活动，就像在 onStart 中一样。这可能会对您寻求使用/更改的活动的属性产生影响。

# jquery - 在 MVC 远程返回后触发 jQuery

> ID：12516189
> 
> 赞同：-1
> 
> 时间：2012-09-20T15:43:41.007
> 
> 标签：jquery, model-view-controller, validation

在返回 MVC Remote 的结果后，有什么方法可以触发一些 jQuery 吗？

我有这样的设计：

```
<div class="wrapper"><div class="inner1">
<div class="inner2">Message</div></div></div> 
```

如果有错误，我需要将其更改为：

```
<div class="wrapper error"><div class="inner1 error">
<div class="inner2 error">Message</div></div></div> 
```

当远程验证返回时，它会显示消息，但我想触发一些 jQuery 将类添加到需要的 div 中。希望这是有道理的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:15:28.570

或者，您可以将 div 包装在条件中，并且仅在错误时显示所有内容？

```
<%= if model.invalid? %>
  Add error divs here with MSG within
<% end %> 
```

或者，如果您的 div 比显示的更复杂，请在错误时填写单独的 div 类，空白表示无错误或“错误”表示失败，然后使用模板语言将其放入元素类中，例如

```
<div class="<%= errror_class %>"> 
```

显然为您的模板语言调整代码。

对于仅使用 js 的解决方案，请使用语言和框架对其进行标记，以让合适的人查看它，因为大概您正在寻找一种设置成功后回调的方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:49:45.123

由于帖子中没有太多信息，所以在这里有点冒险。

我假设您使用的是 jQuery Validate 插件。

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

如果您查看它的选项，您将看到一个名为`invalidHandler`. 您应该能够挂钩此事件以更新元素上的类。

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T15:45:31.213

```
jQuery('.inner1').addClass('error'); 
```

和

```
jQuery('.inner1').removeClass('error'); 
```

为了相反的效果

# r - 在 R 的不同源文件中调试函数

> ID：12516192
> 
> 赞同：5
> 
> 时间：2012-09-20T15:43:48.887
> 
> 标签：r, rstudio

我正在使用 RStudio，我希望能够在特定行停止代码执行。

这些函数在第一个脚本文件中定义并从第二个脚本文件中调用。

我使用将第一个文件源到第二个文件中`source("C:/R/script1.R")`

我使用从头到尾运行：从第二个脚本开始运行，该脚本具有函数调用，并在第一个脚本中突出显示函数定义所在的行。

然后我用它`browser()`来查看变量。然而，这并不理想，因为涉及到一些大型矩阵。有没有办法让这些变量出现在 RStudio 的工作区中？

此外，当我使用 run from line to end 重新启动时，它只会运行到被调用的第一个脚本文件的末尾，它不会返回调用函数并完成第二个文件的运行。

如何在 RStudio 中实现这些目标？

好的，这是一个简单的例子，下面的函数加法器是在一个脚本中定义的

```
adder<-function(a,b) {  
  browser()
  return(a+b)
 } 
```

我比电话来自第二个脚本

```
x=adder(3,4) 
```

在第二个脚本中调用 adder 时，在第一个脚本中启动 browser()。从这里我可以使用 get("a") 来获取 a 的值，但是 a 和 b 的值没有出现在 RStudio 的工作区中？

在此处的示例中，这并不重要，但是当您有几个大型矩阵时，它确实很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:53:53.253

您所说的 RStudio 工作区是 R 会话中的全局环境。每个函数都存在于自己的小环境中，不会将其局部变量暴露给全局环境。因此`a`在 RStudio 的对象检查器中不存在。

这是一种很好的编程实践，因为它可以将较大脚本的各个部分相互屏蔽，从而减少不必要的交互量。例如，如果您`i`在一个函数中用作计数器，这不会影响`i`另一个函数中计数器的值。

您可以使用任何常用功能检查`a`您何时处于浏览器会话中。例如，

```
head(a)
str(a)
summary(a)
View(a)
attributes(a) 
```

调用后的一种常见策略`browser`是获取当前（父）环境中所有变量的摘要。养成每次使用 停止代码时`browser`立即`ls.str()`在命令行键入的习惯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T21:18:27.400

如果您分配数据，`.GlobalEnv`它将显示在 RStudio 的“工作区”选项卡中。

```
> adder(3, 4)
Called from: adder(3, 4)
Browse[1]> a
[1] 3
Browse[1]> b
[1] 4
Browse[1]> assign('a', a, pos=.GlobalEnv)
Browse[1]> assign('b', b, pos=.GlobalEnv)
Browse[1]> c
[1] 7
> a
[1] 3
> b
[1] 4 
```

# matlab - MATLAB - 可能使用某种类型的 varargout 从函数中干净地读取变量......？

> ID：12516202
> 
> 赞同：1
> 
> 时间：2012-09-20T15:44:27.387
> 
> 标签：matlab, variables

我有函数 f1 必须包含子函数，所以我不能使用另一个脚本：

```
function vars = f1()

    a = 1;
    b = 'hello';
    c = {[1 2 3]};

    currvars = whos;    %all variable info
    for k = 1:size(currvars, 1)
        eval(['vars.(currvars(k).name) = ' currvars(k).name ';']);
    end

end 
```

我在脚本中调用该函数，然后使用 genvarname() 和 eval() 在脚本中创建变量：

```
vars = f1();
varnames = genvarname(fieldnames(vars));
for k = 1:size(varnames(:),1)    %Creates vars with the struct's fieldnames.
    eval([varnames{k} ' = vars.' varnames{k} ';']);
end
clearvars vars varnames 
```

我想以某种方式将变量创建过程放入一个函数中，同时仅将所有变量读出给调用它的脚本，但我不想为输出分配一百个不同的变量名。有人对如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:55:32.680

不要创建无数个自动命名的变量。这是愚蠢且非常糟糕的编程风格。相反，学习使用数组。多维数组、元胞数组、结构数组。

或者，做你已经做过的事情，然后被迫找到一个你正在寻找的组合。

任你选。评估是邪恶的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:09:37.073

归功于罗迪...

```
#Old semi-"global" variables:

function vars = f1()

    a = 1;
    b = 'hello';
    c = {[1 2 3]};
    currvars = whos;    %all variable info
    for k = 1:size(currvars, 1)
       eval(['vars.(currvars(k).name) = ' currvars(k).name ';']);
    end

end

#Function to assign variables to the calling script's/function's workspace. Variable names are determined by the single structure's fieldnames:
function setvars(func)

    vars = func;
    protected = {'If needed, put variable names you do not want here'};
    names    = fieldnames(vars);
    newnames = genvarname(names, protected);
    for k = 1:numel(newnames)
        assignin('caller', newnames{k}, vars.(names{k}));
    end

end

#Script call:

setvars(f1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:58:06.647

您可以返回具有“更正”字段名的结构：

```
function output = someFunc

    vars = f1();

    protected = { %# some list of varnames you don't want
    };

    names    = fieldnames(vars);
    newnames = genvarname(names, protected);

    for k = 1:numel(newnames)
        output.(newnames{k}) = vars.(names{k});            
    end

end 
```

如果你然后使用

```
output = someFunc;
varnames = fieldnames(output);
for k = 1:numel(fieldnames)
    eval([varnames{k} ' = output.' varnames{k} ';']);
end 
```

在您想要变量名称的脚本/函数中，您有一种相对干净的方法来锁定函数中的所有内容，`someFunc`而无需预先定义所有输出变量名称。

您也可以一步完成：

```
function someFunc2

    vars = f1();

    protected = { %# some list of varnames you don't want
    };

    names    = fieldnames(vars);
    newnames = genvarname(names, protected);

    for k = 1:numel(newnames)
        assignin('caller', newnames{k}, vars.(names{k}));
    end

end 
```

这意味着您只需调用该函数

```
someFunc2; 
```

在您的脚本中，然后该函数定义并分配*脚本工作区中的*所有变量。

向前迈出了一小步，但仍然向前:)

# tomcat - 我可以配置 TeamCity 的内置 TomCat 服务器来提供静态 html 文件吗？

> ID：12516207
> 
> 赞同：3
> 
> 时间：2012-09-20T15:44:51.310
> 
> 标签：tomcat, teamcity

我想在我们的合流页面中包含最后一次 FxCop 和覆盖率运行的结果。我已经让团队城市将报告作为 html 输出到我选择的位置，但我不能使用 file:// 协议将 html 文件包含在汇合中，只能通过 http。

我可以配置内置于 Tomcat 服务器的 TeamCity 以提供（未经授权）我已导出的 html 文件吗？那么当 build 将 html 文件替换为新版本时，confluence 页面会自动更新吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:30:06.443

所以我想我想通了。似乎它配置为仅处理 .html 请求，因此通过将文件重命名为`fxcop-report.htm`并将其直接放在 TeamCity\webapps\ROOT 目录中，我可以使用标准`http:\\teamcityurl\fxcop-report.htm`调用来获取文件。

看来我必须对 FxCop 生成的 html 的内容进行一些调整，因为 confluence 嵌入的内容似乎只是 FxCop 页面的主体，所以我没有 javascript 函数，但我认为我可以处理它。

# javascript - javascript如何创建流体拖动和滚动

> ID：12516216
> 
> 赞同：1
> 
> 时间：2012-09-20T15:45:15.167
> 
> 标签：javascript, jquery, mouseevent

我想创建一个拖动和滚动效果：

```
-> mouse down
-> drag and mouse move
-> the window will scroll according to the amount of mouse move
-> mouse up
-> scroll stops 
```

现在，我遇到的问题是当我拖动和移动时，窗口 DOM 元素会抖动。

我添加了一个偏移检查，它减轻了抖动问题，但没有解决。

谁能帮我？

以下是主要代码，完整的 jsFiddle 位于：http: [//jsfiddle.net/mifeng/sGvA4/1/](http://jsfiddle.net/mifeng/sGvA4/1/)

```
container.mousedown(function(e) {

    mouseX = e.pageX;
    mouseY = e.pageY;

    console.log("CON: " + conX + "," + conY);
    console.log("DOWN: " + mouseX + "," + mouseY);

    container.mousemove(function(e) {
        //console.log("INNER-DOWN: " + mouseX + "," + mouseY);

        offsetX = e.pageX - mouseX;
        offsetY = e.pageY - mouseY;

        // offset check
        if (offsetX > 10 || offsetX < -10 || offsetY > 10 || offsetY < -10) {
            conX -= offsetX;
            conY -= offsetY;

            window.scrollTo(conX, conY); // scrollTo

            mouseX = e.pageX;
            mouseY = e.pageY;
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:49:58.387

这里有 2 个插件可以满足您的需求。

[http://archive.plugins.jquery.com/project/Dragscrollable](http://archive.plugins.jquery.com/project/Dragscrollable)

[http://azoff.github.io/overscroll/](http://azoff.github.io/overscroll/)

# c# - 如何控制 .Net 在命名空间冲突中选择哪个程序集？

> ID：12516218
> 
> 赞同：6
> 
> 时间：2012-09-20T15:45:27.810
> 
> 标签：c#, .net, namespaces, conflict, il

由于某种原因，我需要（忍受我）使用 WinRT 版本的 System.Text.Encoding 命名空间。我可以手动添加对程序集的引用等，但它仍将使用 mscorlib 的实现。而且我显然无法完全删除 mscorlib。

如何强制我的项目使用 WinRT 的 System.Text.Encoding.dll 而不是 mscorlib？

基本上，我需要它来生成这段 IL：

```
call class [System.Text.Encoding]System.Text.Encoding [System.Text.Encoding]System.Text.Encoding::get_UTF8() 
```

而不是这个：

```
call class [mscorlib]System.Text.Encoding [mscorlib]System.Text.Encoding::get_UTF8() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T15:54:11.640

您需要为引用起别名。为此，请转到解决方案资源管理器并选择要别名的引用。查看属性并编辑别名字段以添加唯一别名。

![具有自定义别名 myalias 的属性中的别名字段](../Images/93b48afc482f5adc450872cc84873f7e.png)

定义唯一别名后，您可以编辑代码以添加`extern alias`声明。

```
extern alias myalias; 
```

最后，您通过别名引用类型，如（本示例别名 System.dll）：

```
myalias::System.Diagnostics.Trace.WriteLine("I referenced this via my alias."); 
```

这现在针对您想要的确切引用，即使其他引用也提供具有相同名称和命名空间的类型。

有关别名的更多信息，请参阅[StackOverflow](https://stackoverflow.com/a/286645/23234)关于[What use is the Aliases property of assembly references 的](https://stackoverflow.com/questions/286632/what-use-is-the-aliases-property-of-assembly-references-in-visual-studio-8)答案。

# arrays - 如何将元素添加到特定索引，然后将所有其他元素上移一个

> ID：12516221
> 
> 赞同：0
> 
> 时间：2012-09-20T15:45:42.463
> 
> 标签：arrays, collections, element

我需要写一个

```
public void add(int index, int element) 
```

所以如果我有一个这样的数组：

> ```
>  element: 9 1 2 3  
>      index:   0 1 2 3 4 
> ```

并且参数是 add(1,8) 得到：

> ```
>  element: 9 8 1 2 3 
>     index:   0 1 2 3 4 
> ```

有什么好方法可以做到这一点？

这是我目前正在使用的：

```
for (int i = actualSize; i >= 0; i--)
       {
           if (i != index)
           {
               data[i] = data[i-1];
           }
           else if (i == index)
               data[i] = element;
       } 
```

但是如果调用： add(1, 8) ，我会得到以下输出：

> ```
>  element: 9 8 1 2  
>      index:   0 1 2 3 4 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:17:11.767

可能是这样的：

```
for (int i = actualSize-1; i>0 && i>index; i--)
{
    data[i] = data[i-1];
}
data[index] = element; 
```

但这取决于空元素的含义，例如初始数组末尾的那个。

尾随的将被覆盖，但是，无论它们是什么意思，其他位置的那些“空值”将像正常值一样移动。这可能是也可能不是你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:57:53.103

我认为您的功能存在逻辑错误。是否要移动插入索引下方的元素？看起来这就是你正在做的事情。

您的循环的以下内容如何：

```
// make sure that extra space for data[] is allocated

for (int i = maxIndexBeforeInsert; i >= insertAtThisIndex; i--)
{
    data[i+1] = data[i];
}

data[insertAtThisIndex] = element; 
```

# c# - LINQ：将其嵌套到单个查询中

> ID：12516222
> 
> 赞同：2
> 
> 时间：2012-09-20T15:45:47.387
> 
> 标签：c#, linq, linq-to-entities

我知道在 SO 和其他地方有大量的[LINQ](http://politicalhumor.about.com/library/jokes/bljokebushbrazilian.htm)嵌套查询示例，但这对我来说没有意义。如果有人能像我五岁一样解释这一点，我将不胜感激。这都是伪混淆，所以请耐心等待这个人为的例子。

我有一个具有这些的 EF 模型：

```
public class Car(){
  public String Vin {get; private set;}
  public string Type {get; private set;}
  public List<Option> Options {get; set;}
}

public class Option(){
  public string Name { get; set; }
} 
```

我从存储库中获取了集合`IQueryable<Car> cars`。

很简单。目标是：

1.  列出所有汽车类型（比如“卡车”、“SUV”、“小型货车”等）
2.  在这些类型中的每一个下，都有一个存在于该类型汽车上的选项名称的子列表。
3.  在每个选项下，列出具有该选项且属于该类型的每辆汽车的 VIN。

所以列表看起来像：

*   卡车
    *   拖车挂钩
        *   vin1
        *   葡萄酒8
    *   卡车螺母
        *   vin2
        *   VIN3
        *   vin4
    *   枪架
        *   vin1
    *   折叠后座
        *   vin2
        *   VIN3
*   小型货车
    *   旋转座椅
        *   vin6
    *   DVD播放机
        *   vin6
        *   VIN10
    *   折叠后座
        *   vin6
        *   VIN10
*   越野车
    *   折叠后座
        *   葡萄酒9
        *   vin5

你可能明白了。我知道我可以按类型对汽车进行分组，如下所示：

```
from c in cars
group by c.Type into g 
```

但我认为我需要做的是将结果分组`Vin`并`Option`分组为 Type。我也觉得我可能需要

```
cars.SelectMany(c => c.Options)
    .Select(o => o.Name)
    .Distinct(); 
```

获取唯一选项名称的列表，但我不确定 a）这是执行此操作的最有效方法以及 b）如何将其合并到我的分组查询中。我真的不明白如何编写嵌套分组查询来完成此操作 - 第一组是外部组还是内部组？

我对此的理解低于补救措施，所以请再次：像我五岁一样解释。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:03:06.950

这个 linq-to-entities 查询可以解决问题

```
var query = from c in cars
            group c by c.Type into g
            select new {
              Type = g.Key,
              Options = from o in g.Options.SelectMany(x => x.Options).Distinct()
                        select new {
                          o.Name,
                          Vins = from c in cars
                                 where c.Options.Any(x => x.Name == o.Name)
                                 where c.Type == g.Key
                                 select c.Vin
                        }
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:08:52.853

这不会很漂亮，我不确定 L2E 会处理这个问题，您可能需要从数据库中选择整个列表并在 L2O 中执行此操作：

```
var result = cars.GroupBy(c => c.Type)
            .Select(c => new {
               Type = c.Key,
               Options = c.SelectMany(x => x.Options)
                           .GroupBy(x => x.Name)
                           .Select(x => new {
                                  Option = x.Key ,
                                  Vins = c.Where(y => y.Options.Any(z => z.Name == x.Key)).Select(z => z.Vin)
                           })
            }); 
```

现场示例（仅模拟卡车，但适用于所有人）：[http ://rextester.com/OGD12123](http://rextester.com/OGD12123)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T16:01:02.567

这肯定不是一个微不足道的查询。

我会这样做：

```
cars.SelectMany(c => c.Options.Select(o => new { Car = c, Option = o.Name }))
    .GroupBy(x => x.Car.Type)
    .Select(x => new
                 {
                     Type = x.Key,
                     Options = x.GroupBy(y => y.Option, y => y.Car.Vin)
                                .Select(y => new { Option = y.Key,
                                                   Cars = y.ToList() } )
                 }); 
```

此查询执行以下操作：

1.  我们稍微改变了我们处理的数据，使其更易于处理：您希望拥有汽车上方的选项。这意味着最终结果将有每辆车可能在多个选项下，所以我们真正需要的是 (Option, Car) 元组的列表。

    我们通过

    ```
    cars.SelectMany(c => c.Options.Select(o => new { Car = c, Option = o.Name })) 
    ```

    这基本上是说：为每辆汽车和每个选项选择一个新的匿名类型，其中汽车和选项名称作为属性。让我们将该匿名类型命名为 Ano1。

    结果将是一个`IEnumerable<Ano1>`.

2.  此平面数据现在按汽车类型分组。这意味着对于每种汽车类型，我们都有一个 Ano1 实例列表。所以我们现在有一个组列表，每个组都有一个 Ano1 实例列表。

3.  在这个组列表中，我们发出一个选择。对于每个组（= 汽车类型），选择返回一个新的匿名类型，其中包含汽车类型的属性 - 这样信息不会丢失 - 以及选项的属性。

4.  上一步中的选项最终将是一个匿名类型列表，具有 Option 和 Cars 属性。为了获取这些数据，我们通过 Option 对我们的所有 Ano1 实例进行分组，并选择汽车的 VIN 作为组内的元素。这些组现在转换为一个新的匿名类型，其中一个属性用于选项名称，一个属性用于汽车。

查询不是微不足道的，解释也是如此。请询问是否有不清楚的地方。

# xml - 在多个输入文档上运行单个样式表并将其所有输出放在一个文件中

> ID：12516231
> 
> 赞同：1
> 
> 时间：2012-09-20T15:46:17.727
> 
> 标签：xml, xslt, xslt-2.0, saxon

我正在尝试在多个输入文档上运行单个样式表，并将其相应的输出写入单个输出文件。

有没有人在 XSLT 1.0 或 2.0 中这样做过？

我的样式表中也有多个通道，这会使实现变得更加棘手吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:52:57.497

这在一定程度上取决于您要如何识别多个输入文档。如果要处理目录中的所有文件，2.0 的 collection() 函数可能会很有用（Saxon 和可能的其他处理器提供了一种将 collection() 映射到文件存储目录的方法）。或者，有时最好有一个主目录文件，一个带有指向所有其他文件的链接的 XML 文件，在这种情况下，您可以提供目录作为主要样式表输入，并使用 doc() 函数来跟踪链接。

没有理由说多次传球会很困难。我有一个应用程序，其中目录不仅标识输入文件，而且还指示每个文件的文件类型，因此第一个转换取决于文件类型，然后无论文件类型如何，都应用第二个标准转换。这些主题的许多变化是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:31:43.543

只需按照所需顺序将所有转换作为单个转换的一部分执行。

# c# - 标签在一台 PC 上可见但在另一台 PC 上不可见的原因是什么？

> ID：12516232
> 
> 赞同：0
> 
> 时间：2012-09-20T15:46:19.123
> 
> 标签：c#, .net, text, label, splash-screen

我正在关注[此处发布的教程，该教程已在](http://www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C?)[此处](http://www.mahingupta.com/mahingupta/blog/post/2009/07/26/Winforms-splash-screen-Great-work-by-Tom.aspx)针对 .NET 3.5 进行了更新。我正在使用 .NET 4.0，启动画面在我的笔记本电脑和我同事的笔记本电脑上都运行良好。但是如果我们移动到我们的测试电脑，由于某种原因，标签不会出现在启动表单上。我们在其中放置了一个记录器，我可以看到标签设置为可见，它正在获取更新的文本，并且它具有正大小。

什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:36:00.577

大约一周前我遇到了这个问题。在我的情况下，文本的颜色是系统颜色，在系统之间有所不同，请尝试更改颜色。这可能不是你的问题，但它肯定会导致同样的问题。

编辑：回答您在评论中提出的问题，应该有一个 autosizemode ，您可以尝试不同的模式，直到找到最适合的模式，根据我的经验，昨天，没有一个和 DPI 效果最好。

注意：我的答案基于 .net 3.5 VB，但据我所知，它们非常相似，两段都应该能够提供帮助。

# c# - 查找所有匹配项

> ID：12516235
> 
> 赞同：0
> 
> 时间：2012-09-20T15:46:31.727
> 
> 标签：c#, .net, mongodb

我在使用 MongoDb 时遇到了一些麻烦。

假设我有一个 MyObject 集合，其中：

```
MyObject
{
    public Guid Guid { get;set; }
    public List<BsonValue> Identifiers { get;set; }
    public List<string> Tags { get;set; }
} 
```

现在我插入一堆对象，其标识符设置如下：

```
new List<BsonValue>{"A"} *
new List<BsonValue>{"D"}
new List<BsonValue>{"A", "B"} *
new List<BsonValue>{"C", "D"}
new List<BsonValue>{"A", "B", "C"} *
new List<BsonValue>{"A", "B", "C", "D"} 
```

现在我带来了一个包含以下值的测试用例：

```
"A", "B", "C" 
```

我想检索上面标有 * 的记录...我玩弄了 Query.In 但我收到一个错误*Cannot deserialize Guid from BsonType ObjectId*

一点额外的清晰度：

我已经设法通过代码实现了我想要的。但是，如果有人能指出我更简单的方法，我会很高兴。然而，这将是可行的。

```
var query = new List<BsonValue>{"A","B","C"};

var results = collection.FindAs<MyObject>(Query.In("Identifiers", query));
var valid = results.Where(r => !r.Identifiers.Except(a).Any()).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:31:35.233

```
var query = new List<BsonValue>{"A","B","C"};

var results = collection.FindAs<MyObject>(Query.In("Identifiers", query));
var valid = results.Where(r => !r.Identifiers.Except(a).Any()).ToList(); 
```

# c++ - C++ 中按钮的简单信号

> ID：12516239
> 
> 赞同：2
> 
> 时间：2012-09-20T15:46:43.197
> 
> 标签：c++, function-pointers, signals-slots

我一直在研究一些信号/插槽的实现，它们毫无例外都非常复杂，有些甚至依赖于 MOC 和额外的代码生成，比如 Qt 的那些。

我意识到存在诸如威胁安全之类的问题，但是对于一个简单的单线程场景，采用简单的方法是否有问题，例如：

```
typedef void (*fPtr)();

class GenericButton
{
public:
    GenericButton() : funcitonToCall(nullptr) {}
    void setTarget(fPtr target) {
        funcitonToCall = target;
    }

    void pressButton() {
        if (funcitonToCall) funcitonToCall();
    }

private:
    fPtr funcitonToCall;
};

void doSomething(){
    std::cout << "doing something..." << std::endl;
}

void doSomethingElse(){
    std::cout << "doing something else..." << std::endl;
}

int main(){
    GenericButton myButton;
    myButton.setTarget(doSomething);
    myButton.pressButton();
    myButton.setTarget(doSomethingElse);
    myButton.pressButton();
} 
```

仍然可以链接其他几个方法并在目标 void 函数中传递数据。那么，为什么在单击按钮时执行一些代码这样微不足道的事情会变得如此复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:55:11.217

这是一个非常明智的解决方案，但不要仅限于函数指针。使用`std::function`它可以让你绑定东西、调用对象的成员函数、使用 lambdas 并且仍然在有意义的地方使用函数指针。例子：

```
#include <iostream>
#include <functional>

using namespace std::placeholders;

class GenericButton
{
public:
    typedef std::function<void()> fPtr;
    GenericButton() : funcitonToCall(nullptr) {}
    void setTarget(fPtr target) {
        funcitonToCall = target;
    }

    void pressButton() {
        if (funcitonToCall) funcitonToCall();
    }

private:
    fPtr funcitonToCall;
};

struct foo {
    void doSomething() const {
        std::cout << "doing something in a foo..." << std::endl;
    }

    static void alternative(int i) {
        std::cout << "And another, i=" << i << "\n";
    }
};

void doSomethingElse() {
    std::cout << "doing something else..." << std::endl;
}

int main() {
    GenericButton myButton;
    foo f;
    myButton.setTarget(std::bind(&foo::doSomething, &f));
    myButton.pressButton();
    myButton.setTarget(doSomethingElse);
    myButton.pressButton();
    myButton.setTarget(std::bind(foo::alternative, 666));
    myButton.pressButton();
    myButton.setTarget([](){ std::cout << "Lambda!\n"; });
    myButton.pressButton();
} 
```

C++ 中几乎总是有比函数指针更好的解决方案。

如果您没有`std::function`/`std::bind`总是有替代方案来促进这项工作，您可以推出自己的`std::function`替代方案而无需太多工作，如果您想做这样的事情，这将是值得的。

大多数现有的信号/槽机制都可以追溯到诸如此类的事情`boost::bind`不可行的时候。那些日子已经一去不复返了，您可以获得一些标准和更灵活的东西，而不仅仅是一个函数指针。

# java - 我可以使用 Izpack 5 安装一个文件，而不是它是由 izpack 构建的 install.jar 的一部分吗

> ID：12516240
> 
> 赞同：2
> 
> 时间：2012-09-20T15:46:43.897
> 
> 标签：java, izpack, winrun4j

我的安装 widget.zip zipfile 包含以下内容：

*   32位Java
*   安装.jar
*   小部件安装程序.exe
*   小部件安装程序.ini
*   小部件安装程序.ico

总结一下：

*   32bitJava 是从 Oracle 下载的 32 位 JRE
*   install.jar 是 Izpack 创建的安装程序
*   widgetinstaller.* 由 winrun4j 创建，为安装程序提供 exe 包装器。

因此，通过此设置，我可以安装我的应用程序，而无需用户安装 Java 运行时。

**然而**，一旦安装，实际的应用程序还需要一个 java 运行时才能实际运行。因此，目前 32bitJava 的副本作为 izpack 安装的一部分包含在内，即它存在于 install.jar 中并在安装时安装。

但这意味着我有两个 JVM 副本，并且因为 32bitJava 比我的实际应用程序大，所以我的下载量太大了。

那么如何在安装期间/之后将 32bitJava 文件夹复制到安装中，而不必将其包含在 install.jar 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T11:09:59.927

您想为 JVM 做一个“松散”的包。一个松散的包不需要包含它安装的文件，因此它可以将文件从 zip 复制到适当的位置，而不是使用嵌入在 jar 中的文件。

```
<pack id="java" name="java" required="yes" preselected="yes" loose="true">
  ...
  <executable ...>
    <!-- something appropriate to install java -->
  </executable>
</pack> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T22:36:16.520

将文件打包到自解压存档/zip 中，作为解压缩过程的一部分，将文件解压缩到您需要的位置。

在 Wikipedia 上有更多关于自解压档案的信息：[http ://en.wikipedia.org/wiki/Self-extracting_archive](http://en.wikipedia.org/wiki/Self-extracting_archive)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T21:47:28.247

如何创建一个小型的安装后实用程序来将可执行文件复制到该位置？您可以在一个小的 shell 脚本（或 Windows 上的批处理文件）中创建它，甚至可以在一个小的 C++ 实用程序中创建它，该实用程序只是将 JVM 复制到您需要的位置。这样，在安装实用程序后，您将触发安装后代码，并将 JVM 复制到所需位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:36:47.887

与其被迫在 install.jar 中包含 java 安装，不如让 install.jar 安装您的程序并在此处包含一个链接： [http ://www.java.com/inc/BrowserRedirect1.jsp ?locale=en](http://www.java.com/inc/BrowserRedirect1.jsp?locale=en) ? 那是下载当前版本的java的链接。

要创建这样的链接，请右键单击 > 新建 > 快捷方式，将链接粘贴到第一个对话框中，单击下一步，然后将其命名为“Java 安装”。这最多会为您的包添加 4 kb，并且仍然允许您安装 java（但是，用户必须手动单击它）

我正在使用浏览器重定向 URL，因为它根据他们的计算机（操作系统和处理器位）识别 java 人需要什么

# sql-server - 使用 T-SQL 解析 XML 会返回任何内容

> ID：12516241
> 
> 赞同：1
> 
> 时间：2012-09-20T15:46:50.223
> 
> 标签：sql-server, xml, tsql, xml-parsing

我编写了一个 Web 服务和一个 Web 方法，它以 xml 格式返回我的类（DOVIZ_RETURN）的列表，如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
<ArrayOfDOVIZ_RETURN xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/">
    <DOVIZ_RETURN>
        <dovizAdi>AMERİKAN DOLARI</dovizAdi>
        <dovizKodu>USD</dovizKodu>
        <dovizAlis>1.7928</dovizAlis>
        <dovizSatis>1.8014</dovizSatis>
    </DOVIZ_RETURN>
    <DOVIZ_RETURN>
        <dovizAdi>KANADA DOLARI</dovizAdi>
        <dovizKodu>CAD</dovizKodu>
        <dovizAlis>1.8321</dovizAlis>
        <dovizSatis>1.8404</dovizSatis>
    </DOVIZ_RETURN>
</ArrayOfDOVIZ_RETURN> 
```

我正在使用存储过程成功调用此服务。我得到这个xml。但是当我用下面的 sql 解析这个 xml 时，它返回任何行只返回列标题；请看下面：

```
ALTER PROCEDURE GET_DOVIZ_KUR_RESULT_FROM_SERVIS

AS
    declare @obj int
    declare @servisUrl varchar(200)
    declare @response xml

    SET @servisUrl='http://localhost/DovizKurTestApp/DovizKurService.asmx/GET_DOVIZ_KUR'

    EXEC sp_OACreate 'MSXML2.ServerXMLHttp', @obj OUT
    EXEC sp_OAMethod @obj,'Open',NULL,'GET',@servisUrl,false
    EXEC sp_OAMethod @obj,'send'
    EXEC sp_OAGetProperty @obj, 'responseText', @response OUT

    create table #DOVIZ_KUR (dovizKurList xml)
    insert into #DOVIZ_KUR select @response 

    SELECT
    a.b.value('dovizAdi[1]', 'Varchar(100)') DovizAdi,
    a.b.value('dovizKodu[1]', 'Varchar(100)') DovizKodu,
    a.b.value('dovizAlis[1]', 'Varchar(100)') DovizAlis,
    a.b.value('dovizSatis[1]', 'Varchar(100)') DovizSatis
    FROM #DOVIZ_KUR
    CROSS APPLY dovizKurList.nodes('/ArrayOfDOVIZ_RETURN/DOVIZ_RETURN') AS a(b)

    EXEC sp_OADestroy @obj

RETURN 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:57:40.487

这是因为名称空间包含在 XML 中。

你可以试试这个

```
SELECT  
    a.b.value('declare namespace MI="http://tempuri.org/"; MI:dovizAdi[1]', 'Varchar(100)') DovizAdi, 
    a.b.value('declare namespace MI="http://tempuri.org/"; MI:dovizKodu[1]', 'Varchar(100)') DovizKodu, 
    a.b.value('declare namespace MI="http://tempuri.org/"; MI:dovizAlis[1]', 'Varchar(100)') DovizAlis, 
    a.b.value('declare namespace MI="http://tempuri.org/"; MI:dovizSatis[1]', 'Varchar(100)') DovizSatis 
FROM @DOVIZ_KUR d
    CROSS APPLY dovizKurList.nodes('
    declare namespace MI="http://tempuri.org/";
    /MI:ArrayOfDOVIZ_RETURN/MI:DOVIZ_RETURN') AS a(b) 
```

**或者甚至更好**

```
;WITH XMLNAMESPACES('http://tempuri.org/' as MI)
SELECT  
    a.b.value('MI:dovizAdi[1]', 'Varchar(100)') DovizAdi, 
    a.b.value('MI:dovizKodu[1]', 'Varchar(100)') DovizKodu, 
    a.b.value('MI:dovizAlis[1]', 'Varchar(100)') DovizAlis, 
    a.b.value('MI:dovizSatis[1]', 'Varchar(100)') DovizSatis 
FROM @DOVIZ_KUR d
    CROSS APPLY dovizKurList.nodes('/MI:ArrayOfDOVIZ_RETURN/MI:DOVIZ_RETURN') AS a(b) 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/4563/0)

# asp.net-mvc - 如何检查是否 对不显眼的 javascript 有效

> ID：12516245
> 
> 赞同：0
> 
> 时间：2012-09-20T15:47:04.113
> 
> 标签：asp.net-mvc, asp.net-mvc-validation

我有一个在客户端加载 div 的表单。我有带有所有验证属性的硬编码文本框控件，类似于从服务器加载时呈现的内容。在 div 里面有提交按钮，但是当我单击提交时，会显示表单上的所有验证消息。我只需要显示 div 元素验证消息。ajax 模式下的 Telerik Grid 控件执行类似的操作，即，在客户端附加带有硬编码验证属性的文本框，但它只对网格而不是整个表单进行验证。我想我在这里遗漏了一些东西。

```
$('#div').valid() --> doesn't work
$('#form').valid() --> works 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:44:13.873

# html - Windows 8 Flexboxes - 启用溢出的嵌套 Flexboxes

> ID：12516246
> 
> 赞同：1
> 
> 时间：2012-09-20T15:47:05.207
> 
> 标签：html, css, windows-8, flexbox

我正在尝试在 Windows 8 商店应用程序中创建一个水平灵活的屏幕，其中有几个水平延伸的组（包含在外部 Flexbox 中），以及垂直列出的组下的各个字段，根据需要从屏幕底部包裹到顶部（包含在一系列内部 Flexbox 中）。这是与分组的 Windows 8 ListView 类似的布局，但是因为我正在显示与单个数据项相关的字段，并且某些部分将在页面的其他位置包含 ListView，所以我不能使用列表视图来显示数据。

每当内部 Flexbox 部分换行到新列时，我都会遇到问题：放置在换行 Flexbox 之后的 Flexbox 出现在一个列宽之外，而不是前一部分的列宽多少。这在以下屏幕截图中进行了说明：

![不是我希望 flexbox 看起来的样子](../Images/59f2ec9ac495f6bd1cb2bbc5a3b40d93.png)

跟我想的不太一样！我想要的如下所示（通过手动设置溢出部分的边距创建。）

![大大改进的弹性盒](../Images/246226ae190d1cdc9fe51c13a7da814c.png)

该页面的 HTML 如下：

```
<section aria-label="Main content" role="main">            

  <div class="main-container">  

    <div id="n1" class="inner-container">
      <div class="element"></div>
      .. And so on 
```

至于CSS：

```
.test section[role=main] {    
    overflow-x: scroll;
    overflow-y: hidden;
    -ms-overflow-style:-ms-autohiding-scrollbar;
}

.main-container {
    display: -ms-flexbox;
    /*We will put a slight margin at the bottom of the page to keep elements from appearing too low*/
    height: calc(100% - 60px);
}

.inner-container {
    display: -ms-flexbox;
    -ms-flex-direction: column;
    -ms-flex-wrap: wrap;
    margin-right: 50px;
}

.element {
    border:solid;
    width:150px;
    height:150px;
}

#n1 .element {
    background-color:red;
}

#n2 .element {
    background-color:green;
}

#n3 .element {
    background-color:blue;
}

#n4 .element {
    background-color:goldenrod;
} 
```

**有什么方法可以通过我拥有的弹性框设置来实现我在第二张图片中的目标吗？如果没有，是否有另一种方法可以让页面上的内容水平地跑到需要的地方？**我希望应用程序像网格视图一样流畅灵活，但正如我所提到的，我无法使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:20:04.280

这是我最终使用的最终方法：

```
var groups = document.querySelectorAll(".inner-container");

for (var i = 0; i < groups.length; i++) {
  var group = groups[i];
  //The scroll width is the width of the actual content of our flex box. 
  //If we set the div's CSS width to the scroll width, the box will push other flex box elements correctly.
  group.style.width = group.scrollWidth + "px";
} 
```

我相信这在大多数情况下都应该有效，但除了我的之外，我还没有真正测试过它。再一次，如果有人有更好的解决方案，那将会很有趣！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:13:53.407

我的问题是我得到了一个高度和一个变窄的内容框。

我的解决方案：

```
var groups = element.querySelectorAll('.contentBox');
for (var i = 0; i < groups.length; i++) {
    var group = groups[i];
    var tempwidth = 0;
    while (group.childNodes[1].scrollHeight > group.scrollHeight) {
        tempwidth = tempwidth + 100;
        group.childNodes[1].style.width = tempwidth + 'px';
    }
} 
```

# java - 比较java对象时出现isEmpty问题

> ID：12516251
> 
> 赞同：-1
> 
> 时间：2012-09-20T15:47:30.767
> 
> 标签：java, object, is-empty

当前，如果创建的员工详细信息对象为空，则我有此 NULL 对象供员工详细信息传递

```
public static final EmployeeDetails NULL = new EmployeeDetails(); 
```

但我现在想删除它并使用我的常规 EmployeeDetails 对象。

我正在检查 EmployeeDetails obj 是否为空`if(!EmployeeDetails.NULL.equals(empDetails))`

但现在我没有那个对象，所以我不能那样做。我尝试过这种方式，但出现错误说 isEmpty 未定义。

```
if(!empDetails.isEmpty()) 
```

有人能告诉我我想用这个做什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:57:30.833

`isEmpty()`未定义，因为您没有定义它。此功能不包含在您直接从 Object 获得的少数方法中，并且无论如何，您自己的对象的空条件应该由您定义，因为只有您知道内部结构。

当然，这完全取决于您需要什么，因为一个人可以`isEmpty()`通过进行简单的空检查来将方法视为有效，而其他人可以逐个字段检查。

在您的情况下，只需在您的类中定义一个 isEmpty 方法。例如：

```
public boolean isEmpty() {
    //your condition here, for example, I take an EmployeeDetails object
    //as empty if it has no employee associated (assuming you can associate
    //an employee to it).
    return employee == null;
} 
```

请记住定义您何时认为此对象为空，并在编写方法时牢记这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:53:48.300

添加一个方法 public boolean isEmpty() { // Implementation } ... 在此处添加您的逻辑以找出空对象，例如您之前的代码正在检查所有属性的默认值以找出空对象

# jquery - 使用已排序的数组对 DIV 进行排序

> ID：12516253
> 
> 赞同：1
> 
> 时间：2012-09-20T15:47:43.697
> 
> 标签：jquery

我是新来的，对 Javascript 和 Web 编程很陌生（实际上我知道一点 Java 不是用于 Web 的）。所以这是我有一个字符串数组（更具体的专辑名称）的问题，我实际上根据专辑名称对这个数组进行了排序。现在我已经对这个数组进行了排序，我的下一步是对代表每个专辑的 DIV 进行排序，但我实际上不知道如何使用 JQuery 来完成。以下是我的 DIV 在页面中的分布方式：

```
<div id="products" >
   <div class="line">
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
   </div>
   <div class="line">
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
   </div>
   <div class="line">
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
   </div>
   <div class="line">
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
      <div id="product-Album-name"></div>
   </div>
</div> 
```

我的目标是使用 id="product-Album-name" 对所有 DIV 进行排序。有什么建议么？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:14:50.150

[我在jsfiddle](http://jsfiddle.net/sgeYq/1/) [http://jsfiddle.net/sgeYq/1/](http://jsfiddle.net/sgeYq/1/)中重新创建了一个场景。它使用 jQuery 和您预先排序的专辑列表，并`<div id='{alnumname}'>albumname</div>`在每个部分中创建按 4 个专辑分组的`<div class='line'>...</div>`部分。您可以`index % 4`按组修改按顺序更改的金额。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T15:49:12.607

首先，我看到您的元素 ID 不是唯一的。根据 HTML 标准，ID 在您的文档中应该是唯一的。为什么不使用类来代替。

```
<div class="products" >
   <div class="line">
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
   </div>
   <div class="line">
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
   </div>
   <div class="line">
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
   </div>
   <div class="line">
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
      <div class="product-Album-name"></div>
   </div>
</div> 
```

此外，由于所有 div 都是相同的，如果没有明显差异，如何对其进行排序

# ios - 重用 CGRect 不起作用

> ID：12516254
> 
> 赞同：1
> 
> 时间：2012-09-20T15:47:47.850
> 
> 标签：ios, xcode4, cgrect

我在 ipod touch 2G 中重用 CGrects 时有一个奇怪的行为，但在 3G 4G 中没有。当我在插入设备的情况下从 XCode4 运行应用程序时，它工作得很好，但是当我归档应用程序并通过 iTunes 或通过 Web 服务器上传它时，就会出现奇怪的行为。如果我去编辑方案，选择存档并选择构建配置：调试，通过网络服务器上传应用程序，它工作正常。

我的代码是这样的

```
//this code works perfect
CGRect pos = self.toolBar.frame;
pos.origin.y = 0;
self.toolBar.frame = pos;

//this code fails, to fix it I need to create a new CGRect (CGRect pos2)
//or assign an CGRectMake to pos
pos = self.picker.frame;
pos.origin.y = self.toolBar.frame.size.height;
self.picker.frame = pos; 
```

是什么导致了这个问题。如何比较这些构建配置（调试 - 发布）

已编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:07:09.697

从 XCode 运行与存档之间的主要区别在于 DEBUG 与 RELEASE 构建，特别是在您的发布构建中启用的编译器优化。

您可能会看到与 armv6 处理器相关的 LLVM 编译器优化错误，我也遇到过类似的事情。尝试从 LLVM 切换到 GCC 编译器。这能解决您的问题吗？

此外，如果您升级到 XCode 4.5，您会发现 ARMV6 已被弃用，因此您也可以选择放弃对这些旧设备的支持并与 Apple 保持同步。

# apache - SVN。ACL 具有相同名称的不同存储库

> ID：12516256
> 
> 赞同：3
> 
> 时间：2012-09-20T15:47:56.397
> 
> 标签：apache, svn, configuration, acl

我有一个 SVN 服务器在带有 Apache dav-svn 模块的 Ubuntu 服务器上运行，可以通过 http 访问它。

我有几个客户的项目，所以我在 /var/svn 上创建了一个树结构

```
/var/svn/client_1
/var/svn/client_1/project_1
/var/svn/client_1/project_2
...
/var/svn/client_2
/var/svn/client_2/project_1
/var/svn/client_2/project_2 
```

每个项目都是一个新的存储库，当我需要创建一个新项目时，我执行以下操作

在客户端文件夹中创建一个新的存储库

> svnadmin 创建 /var/svn/client_X/project_Y

在 dav_svn_conf 上创建一个新条目

```
<Location /client_X>
  DAV svn
  SVNParentPath /var/svn/client_X

  AuthType Basic
  AuthName "Subversion Repository"
  AuthUserFile /etc/apache2/dav_svn.passwd
  Require valid-user
  AuthzSVNAccessFile /etc/apache2/svn-acl.txt
</Location> 
```

所以此时我可以通过以下方式访问： [https ://my_svn_server.com/client_x/project_y](https://my_svn_server.com/client_x/project_y)

在 /etc/apache2/svn-acl.txt 文件中，我可以完全控制所有存储库

```
[/]
my_user=rw 
```

现在我想让客户访问他拥有的项目，但我做不到。如果我使用存储库名称，他可以访问其他客户端的所有存储库

```
[project_1:/]
client_user=rw 
```

他可以访问client_1/project_1和client_2/project_1

我想做以下事情：

```
[client_1:/]
client_user=rw 
```

我该怎么做？我应该改变创建存储库的方式吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:29:28.900

I would recommend not using SVN's ACL and instead use Apache/HTTP Auth to manage the URL space with `Location` rules and simple `Allow` and `Deny`

# objective-c - iOS SDK 自定义 pin 图像在 MapView 上随机更改

> ID：12516258
> 
> 赞同：0
> 
> 时间：2012-09-20T15:48:01.423
> 
> 标签：objective-c, ios, mapkit, mkannotationview

我有一个使用 MapView 的应用程序，我正在上面添加自定义引脚注释。一切正常，但有时会显示另一张图像，我不知道为什么。我从 JSON API 获取数据，它们绝对正确（数据库几个月以来没有更改）。这是我在模型类上用来获取图像资源的函数：

```
+ (UIImage *)pinImageForType:(VTStationType)type {

    NSString *imageName = nil;

    switch (type) {
        case kVTStationTypeOffstreetParking:
            imageName = @"PinGarage.png";
            break;

        case kVTStationTypeOnstreetParking:
            imageName = @"PinStreet.png";
            break;

        case kVTStationTypeCarwash:
            imageName = @"PinCarwash.png";
            break;

        case kVTStationTypeParkAndRide:
            imageName = @"PinPR.png";
            break;

        default:
            return nil;
        }

    NSLog(@"Image name: %@", imageName);
    return [UIImage imageNamed:imageName];
} 
```

整个代码中没有其他方法可以获取图片资源。有趣的是，有时图像会发生变化，而我在日志中看不到此方法的调用。在我看来，这可能是某种记忆问题。能否请你帮忙？谢谢。

**编辑**

这是 viewForAnnotation 委托方法：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {

if ([annotation isKindOfClass:[MKUserLocation class]]) {

    return nil;

} else if ([annotation isKindOfClass:[VTParkingZoneAnnotation class]]) {

    NSLog(@"viewForAnnotation - ParkingZone - %@", annotation);
    return [self parkingOrStationAnnotationView:annotation];

} else if ([annotation isKindOfClass:[VTStationAnnotation class]]) {

    NSLog(@"viewForAnnotation - Station - %@", annotation);
    return [self parkingOrStationAnnotationView:annotation];

} else if ([annotation isKindOfClass:[VTCalloutAnnotation class]]) {

    return [self calloutAnnotationView:annotation];

} else {

    return nil;

}
} 
```

这是我创建视图的方法。calloutAnnotationView 是一个不同的注解，我们可以忽略它。这是parkingOrStationAnnotationView的方法：

```
- (MKAnnotationView *)parkingOrStationAnnotationView:(id<MKAnnotation>)annotation {

MKAnnotationView *pinView = (MKAnnotationView *)[self.mapView dequeueReusableAnnotationViewWithIdentifier:@"AnnotationView"];

if (pinView) {
    pinView.annotation = annotation;
    return pinView;
}

pinView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"AnnotationView"];
pinView.canShowCallout = NO;

if ([annotation isKindOfClass:[VTParkingZoneAnnotation class]]) {

    pinView.image = ((VTParkingZoneAnnotation *)annotation).parkingZone.pinImage;

} else if ([annotation isKindOfClass:[VTStationAnnotation class]]) {

    pinView.image = ((VTStationAnnotation *)annotation).station.pinImage;

}

return pinView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T10:22:10.717

在parkingOrStationAnnotationView 中，即使重用现有的annotationView，也应该设置图像。

# r - 在 ezANOVA 函数中动态定义因变量和自变量

> ID：12516260
> 
> 赞同：5
> 
> 时间：2012-09-20T15:48:03.183
> 
> 标签：r, anova

我想在循环中对多个因变量运行`ezANOVA`包`ez`并将结果保存到多个变量中。每个因变量都在同一数据框的单独列中。

```
all.dependent.variables <- c("dv1", "dv2")

for(dependent.variable in all.dependent.variables){
  assign(paste(dependent.variable, ".aov.results", sep = ""),
    ezANOVA(aov.data,
      dv = dependent.variable,
      wid = subject,
      within = .(factor1, factor2),
      return_aov = TRUE))
} 
```

这是一个示例数据框：

```
aov.data <- structure(list(subject = structure(c(10L, 11L, 12L, 1L, 2L, 3L, 
4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 
7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 
10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 
6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 
9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 
6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 
9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 
6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 
9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 
6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 
9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 
6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 
9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 
6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 
9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 
6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 
9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 
3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 
6L, 7L, 8L, 9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 
9L, 10L, 11L, 12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L), .Label = c("1", "2", 
"3", "4", "5", "6", "7", "8", "9", "10", "11", "12"), class = "factor"), 
dv1 = c(650.2, 773.7, 686.4, 436.2, 625.3, 714.2, 892.6, 921.5, 
711.2, 670.2, 725.8, 592.8, 672.7, 731.1, 707.2, 475.1, 645.4, 
786.7, 949.5, 925.8, 715.5, 745.4, 750.8, 579.1, 683.3, 707.6, 
693.7, 492.4, 698.8, 666.9, 914.4, 853.8, 724.4, 718.8, 872.9, 
616.9, 706.4, 766.2, 676.2, 500, 753.8, 712.7, 1012.2, 947.8, 
695.3, 735.6, 843.7, 596.1, 738.3, 705.2, 718.2, 534.1, 805.3, 
814.1, 969.4, 1010.7, -999, 714.4, 815.4, 645.4, 835.4, 830.7, 
776.7, 543.7, 757.2, 841.5, 1107.8, 915.8, -999, 707.4, 809.7, 
671.1, 638.1, 726.7, 660.2, 455.7, 623.5, 716.1, 922.1, 804.5, 
718.2, 674.6, 797.4, 572, 676.7, 726.6, 690.7, 498.8, 624.3, 
764.1, 889.5, 823.4, 672.9, 701.8, 750.4, 557.2, 656.1, 701, 
655.1, 472.7, 658.8, 660.6, 860.9, 811.3, 672.5, 681.7, 849.6, 
571.2, 694, 777.5, 661.3, 488, 670.4, 725.3, 938.1, 862.7, 
616.4, 732.2, 845.9, 582.4, 694.2, 694.6, 743.8, 480.5, 736.7, 
740.9, 988.1, 827.5, 812.4, 725.5, 844.2, 628, 779.3, 770.3, 
686.9, 494.3, 681.5, 850.5, 990.7, 810.1, 692.3, 779.7, 779.8, 
590.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
618.6, 713.9, 609.6, 468.6, 554.3, 580.8, 864.1, 843.3, 662.8, 
645.5, 714.6, 555.5, 670.7, 759.3, 652.2, 468.1, 613.5, 712.3, 
910.7, 782.4, 723.3, 742.8, 775.5, 553.2, 695.3, 726.2, 591.2, 
479.2, 626.1, 643.3, 821.5, 753.9, 818.2, 655.8, 754.4, 592.9, 
703.5, 792.5, 635, 485.3, 644.1, 667.9, 891.3, 780.9, 699.1, 
725.1, 716, 587.2, 706.5, 754.6, 694.3, 485.5, 745.5, 649.3, 
808.4, 780.5, 773.8, 676.3, 687.5, 685.3, 910.4, 821.5, 738.5, 
525, 689.6, 758.4, 1021.5, 792, 789.3, 740.5, 722.8, 717.1, 
653.3, 743.6, 620.3, 460.1, 575.3, 647.1, 849.3, 647, 691.2, 
596.4, 714.6, 531.6, 678.7, 754.7, 600.4, 463.8, 560.8, 636.6, 
844.3, 766.6, 725.3, 628.7, 784.4, 547.9, 630.3, 656.7, 705.3, 
443.3, 607, 630.7, 861.5, 754.4, 770.8, 664.5, 728.3, 546.4, 
741.5, 694, 620.4, 459.3, 587.9, 626.2, 893.8, 756.1, 731.8, 
680.2, 836.4, 566.7, 619.4, 686.4, 704, 445.3, 652.7, 735.3, 
839.4, 833.4, 763.7, 614.5, 794.4, 562.5, 713.2, 735.4, 655.4, 
501.1, 635.6, 661.2, 880.6, 747.8, 807.8, 757.7, 772.4, 560.1, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 662.7, 
682.5, 590.1, 443.6, 623.2, 656.6, 852.6, 676.8, 646.6, 646, 
677.6, 518, 664, 665.4, 609.8, 464.2, 696.5, 661, 894.7, 
661.1, 659.6, 657.8, 713.4, 531.5, 739.5, 695.1, 656.5, 498.4, 
648.1, 710, 897.8, 685, 671.3, 657, 767.5, 545.3, 808.6, 
697.5, 667.2, 463.4, 695.3, 652.4, 857.2, 690.3, 766.1, 696.1, 
690.5, 558.8, 746, 708.4, 690, 515.5, 788.8, 929.6, 802.1, 
619.5, 510.8, 654.1, 811.8, 706.5, 977.8, 697.9, 700.9, 497.9, 
700.9, 811.5, 969.3, 723, 886, 815.7, 757.5, 639.5, 688.4, 
704, 617.8, 435.2, 628.8, 603.3, 865.3, 661.6, 645.9, 598.1, 
646.8, 477.2, 646.8, 760.8, 634.3, 452.2, 600.1, 648.2, 923.8, 
625.5, 676.9, 647.3, 688.6, 513.2, 591.9, 641.6, 632.6, 469.6, 
606.4, 610.9, 835.1, 667.8, 599.7, 581.2, 704.4, 502.9, 746.9, 
684.1, 689.3, 475.9, 692, 689, 824.9, 625.9, 696.4, 706.3, 
715.3, 510.9, 650.9, 640.1, 663.5, 471.6, 682.3, 683.2, 831.9, 
702, 685, 624.6, 698.2, 521.6, 759.8, 730.6, 661.1, 473.2, 
644.4, 738.7, 932.5, 685.1, 816, 722.1, 783.3, 526.2, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), dv2 = c(2.941, 
2.941, 5.882, 0, 0, 2.941, 8.824, 23.529, 35.294, 8.824, 
17.647, 5.882, 2.941, 2.941, 2.941, 0, 0, 8.824, 8.824, 44.118, 
29.412, 8.824, 2.941, 5.882, 5.882, 0, 5.882, 5.882, 0, 2.941, 
23.529, 20.588, 17.647, 8.824, 8.824, 11.765, 2.941, 2.941, 
8.824, 17.647, 0, 5.882, 26.471, 14.706, 47.059, 0, 17.647, 
14.706, 23.529, 0, 23.529, 38.235, 17.647, 52.941, 61.765, 
55.882, 94.118, 5.882, 41.176, 55.882, 17.647, 23.529, 35.294, 
32.353, 20.588, 44.118, 55.882, 44.118, 85.294, 17.647, 41.176, 
55.882, 0, 0, 0, 0, 0, 5.882, 5.882, 0, 29.412, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 5.882, 0, 32.353, 0, 5.882, 0, 0, 0, 0, 
0, 0, 2.941, 5.882, 0, 20.588, 0, 0, 0, 2.941, 0, 0, 0, 0, 
0, 11.765, 2.941, 35.294, 0, 0, 0, 2.941, 0, 5.882, 0, 0, 
20.588, 29.412, 8.824, 55.882, 0, 2.941, 5.882, 0, 0, 5.882, 
2.941, 2.941, 2.941, 14.706, 0, 52.941, 0, 11.765, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.941, 
0, 0, 5.882, 5.882, 29.412, 32.353, 5.882, 5.882, 0, 2.941, 
0, 5.882, 0, 0, 0, 11.765, 41.176, 23.529, 5.882, 5.882, 
0, 17.647, 5.882, 17.647, 2.941, 2.941, 8.824, 26.471, 26.471, 
44.118, 11.765, 11.765, 26.471, 2.941, 0, 5.882, 0, 0, 8.824, 
17.647, 23.529, 44.118, 2.941, 5.882, 11.765, 20.588, 5.882, 
17.647, 26.471, 17.647, 55.882, 47.059, 55.882, 61.765, 5.882, 
32.353, 55.882, 41.176, 2.941, 38.235, 35.294, 0, 76.471, 
50, 67.647, 76.471, 14.706, 55.882, 55.882, 5.882, 2.941, 
0, 0, 0, 0, 2.941, 0, 35.294, 0, 2.941, 0, 5.882, 0, 0, 0, 
0, 8.824, 8.824, 2.941, 20.588, 0, 0, 0, 5.882, 2.941, 0, 
0, 0, 0, 2.941, 0, 35.294, 2.941, 0, 0, 0, 0, 2.941, 0, 0, 
2.941, 0, 0, 38.235, 0, 2.941, 0, 8.824, 2.941, 0, 0, 0, 
32.353, 26.471, 17.647, 41.176, 2.941, 0, 0, 2.941, 2.941, 
5.882, 0, 0, 11.765, 8.824, 0, 55.882, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.941, 0, 5.882, 
0, 0, 0, 5.882, 11.765, 26.471, 8.824, 2.941, 2.941, 2.941, 
0, 8.824, 0, 0, 0, 11.765, 2.941, 11.765, 0, 8.824, 0, 8.824, 
2.941, 11.765, 5.882, 2.941, 2.941, 26.471, 20.588, 26.471, 
0, 2.941, 17.647, 11.765, 0, 2.941, 0, 2.941, 17.647, 20.588, 
20.588, 26.471, 8.824, 5.882, 11.765, 35.294, 14.706, 32.353, 
41.176, 5.882, 44.118, 52.941, 47.059, 73.529, 17.647, 50, 
47.059, 35.294, 11.765, 32.353, 50, 8.824, 73.529, 76.471, 
47.059, 82.353, 14.706, 47.059, 41.176, 0, 0, 0, 2.941, 0, 
0, 14.706, 2.941, 8.824, 0, 0, 0, 8.824, 2.941, 0, 0, 0, 
5.882, 0, 2.941, 2.941, 0, 5.882, 0, 8.824, 0, 2.941, 0, 
0, 2.941, 2.941, 2.941, 11.765, 5.882, 0, 0, 2.941, 0, 2.941, 
0, 0, 2.941, 2.941, 0, 17.647, 5.882, 2.941, 0, 5.882, 5.882, 
11.765, 0, 0, 8.824, 32.353, 0, 44.118, 2.941, 5.882, 0, 
2.941, 5.882, 11.765, 0, 0, 8.824, 17.647, 2.941, 50, 8.824, 
5.882, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0), factor1 = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L), .Label = c("level1", "level2", "level3"), class = "factor"), 
factor2 = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("level1", "level2", "level3"
), class = "factor")), .Names = c("subject", "dv1", "dv2", 
"factor1", "factor2"), row.names = c(NA, 540L), class = "data.frame") 
```

这种方法的问题是 R 将索引解释`dependent.variable`为数据框中列的说明符，`aov.data`因此返回以下错误：

> “dependent.variable”不是提供的数据框中的变量。

我试过用`eval()`or包装索引，`print()`但无济于事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T21:19:02.180

另一个不好的解决方案：

```
lapply(all.dependent.variables, function(i) {
  eval(parse(text=
    paste0('ezANOVA(data=aov.data,
                    dv=', i,',
                    wid=subject,
                    between=.(factor1, factor2),
                    return_aov = TRUE)')
  ))
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T16:42:47.443

好的，这绝对不是你的错……`ezANOVA`在内部做了一些聪明的评估工作，这让你很困惑。这是一个看起来很有效的可怕咒语，但最好是（1）联系包维护者，看看他们是否能找到一种更优雅地修复内部结构的方法；(2) 考虑您是否可以使用更标准的 anova 评估器，它不会做太多内部混乱......

```
fitlist <- lapply(all.dependent.variables,
       function(x) {
           e1 <- expression(ezANOVA(aov.data,
               dv = x,
               wid = subject,
               within = .(factor1, factor2),
               return_aov = TRUE))
           ## now force evaluation of the "dv" component of the call
           e1[[1]][["dv"]] <- eval(e1[[1]][["dv"]])
           eval(e1)
       }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-12T11:50:21.413

遵循上述建议，这是如何使 ezanova 参数在循环中被接受的更通用的解决方案。我想没有人需要了解如何将函数放入循环中，因此我不会讨论这个。这是我举个例子的通用解决方案。

```
df<-data.frame(id=rep(seq(1,80),each=81,1),
               IV1=rep(LETTERS[1:3],each=1,2160),
               IV2=rep(LETTERS[4:6],each=3,720),
               IV3=rep(LETTERS[7:9],each=9,240),
               IV4=rep(LETTERS[10:12],each=27,80),
               DV1=rnorm(2160,mean=10,sd=1),
               DV2=rnorm(2160,mean=20,sd=1),
               DV3=rnorm(2160,mean=20,sd=1),
               DV4=rnorm(2160,mean=20,sd=1),
               stringsAsFactors=FALSE)
dv="DV1";wid="id";within="IV1";within_full=NULL;between=NULL;within_covariates=NULL;between_covariates=NULL;observed=NULL;diff=NULL;reverse_diff=FALSE;type=3;white.adjust=FALSE;detailed=TRUE;return_aov=TRUE

a<-function(argument) {
  result<-argument
  if(isTRUE(argument))
    result<-"TRUE"
  if(isFALSE(argument))
    result<-"FALSE"
  if(is.null(argument))
    result<-"NULL"
  if(length(argument)>1){
    result<-toString(argument)
    result<-paste0(c(".(",result,")"),collapse = " ")
  }
  return(result)
}
ez_text<-paste("ez::ezANOVA(\tdata=df,\n",
               "\t\tdv=",a(dv),",\n",
               "\t\twid=",a(wid),",\n",
               "\t\twithin=",a(within),",\n",
               "\t\twithin_full=",a(within_full),",\n",
               "\t\tbetween=",a(between),",\n",
               "\t\twithin_covariates=",a(within_covariates),",\n",
               "\t\tbetween_covariates=",a(between_covariates),",\n",
               "\t\tobserved=",a(observed),",\n",
               "\t\tdiff=",a(diff),",\n",
               "\t\treverse_diff=",a(reverse_diff),",\n",
               "\t\ttype=",a(type),",\n",
               "\t\twhite.adjust=",a(white.adjust),",\n",
               "\t\tdetailed=",a(detailed),",\n",
               "\t\treturn_aov=",a(return_aov),")")
cat(ez_text)
ez<-eval(parse(text=ez_text))
ez 
```

生成的数据应该模拟平衡因子设计，但是这个例子并不完美，因为数据必须被聚合，因为只使用了一个 IV。然而，我认为这个函数将在任何投入其中的情况下运行。

一个完全成熟的函数如下所示

```
rm(list=ls())
df<-data.frame(id=rep(seq(1,80),each=81,1),
               IV1=rep(LETTERS[1:3],each=1,2160),
               IV2=rep(LETTERS[4:6],each=3,720),
               IV3=rep(LETTERS[7:9],each=9,240),
               IV4=rep(LETTERS[10:12],each=27,80),
               DV1=rnorm(2160,mean=10,sd=1),
               DV2=rnorm(2160,mean=20,sd=1),
               DV3=rnorm(2160,mean=20,sd=1),
               DV4=rnorm(2160,mean=20,sd=1),
               stringsAsFactors=FALSE)

dv="DV1";wid="id";within="IV1";within_full=NULL;between=NULL;within_covariates=NULL;between_covariates=NULL;observed=NULL;diff=NULL;reverse_diff=FALSE;type=3;white.adjust=FALSE;detailed=TRUE;return_aov=TRUE

report_factorial_anova<-function(df,dv,wid,within=NULL,within_full=NULL,between=NULL,within_covariates=NULL,between_covariates=NULL,observed=NULL,diff=NULL,reverse_diff=FALSE,type=3,white.adjust=FALSE,detailed=TRUE,return_aov=TRUE) {
  options(contrasts=c("contr.sum","contr.poly"))
  result<-emf<-list()
  post_hoc<-omnibus<-data.frame()
  column_design<-unique(c(wid,within,within_full,between,within_covariates,between_covariates))
  df<-plyr::ddply(df,column_design,plyr::numcolwise(mean,na.rm=TRUE))

  for(dependent in dv) {
    a<-function(argument) {
      result<-argument
      if(isTRUE(argument))
        result<-"TRUE"
      if(isFALSE(argument))
        result<-"FALSE"
      if(is.null(argument))
        result<-"NULL"
      if(length(argument)>1){
        result<-toString(argument)
        result<-paste0(c(".(",result,")"),collapse = " ")
      }
      return(result)
    }
    ez_text<-paste("ez::ezANOVA(\tdata=df,\n",
                   "\t\tdv=",a(dependent),",\n",
                   "\t\twid=",a(wid),",\n",
                   "\t\twithin=",a(within),",\n",
                   "\t\twithin_full=",a(within_full),",\n",
                   "\t\tbetween=",a(between),",\n",
                   "\t\twithin_covariates=",a(within_covariates),",\n",
                   "\t\tbetween_covariates=",a(between_covariates),",\n",
                   "\t\tobserved=",a(observed),",\n",
                   "\t\tdiff=",a(diff),",\n",
                   "\t\treverse_diff=",a(reverse_diff),",\n",
                   "\t\ttype=",a(type),",\n",
                   "\t\twhite.adjust=",a(white.adjust),",\n",
                   "\t\tdetailed=",a(detailed),",\n",
                   "\t\treturn_aov=",a(return_aov),")")
    cat(ez_text)
    ez<-eval(parse(text=ez_text))
    if(!is.null(ez$`Levene's Test for Homogeneity of Variance`)){
      ez$`Levene's Test for Homogeneity of Variance`<-data.frame(Effect=ez$ANOVA$Effect,ez$`Levene's Test for Homogeneity of Variance`,check.names=FALSE)
      names(ez$`Levene's Test for Homogeneity of Variance`)[which("p"==names(ez$`Levene's Test for Homogeneity of Variance`))]<-"p[Levene]"
    }
    ez$ANOVA<-data.frame(dv=dependent,sjstats::anova_stats(ez$aov))
    # influence<-influence.measures(unlist(ez$aov))
    # influence_measures<-data.frame(df$id,influence$infmat,influence$is.inf,check.names=FALSE)
    names(ez$ANOVA)[which("term"==names(ez$ANOVA))]<-"Effect"
    result_omnibus<-Reduce(function(x,y) merge(x,y,by="Effect",all=TRUE,sort=FALSE,no.dups=FALSE),ez[names(ez)!="aov"])
    result_omnibus[,grep("<.05",names(result_omnibus))]<-NULL
    names(result_omnibus)<-gsub(".x","",names(result_omnibus),fixed=TRUE)
    names(result_omnibus)<-gsub(".y","",names(result_omnibus),fixed=TRUE)
    ez$omnibus<-result_omnibus
    omnibus<-plyr::rbind.fill(omnibus,result_omnibus)
    rm(result_omnibus)
    iv<-unique(c(within,within_full,between))
    for(i in 1:length(iv))
      emf[[i]]<-combn(iv,i)
    for(cf in emf)
      for (rcf in 1:nrow(cf)) {
        means<-emmeans::emmeans(ez$aov,formula(paste("~",paste(as.character(cf[rcf,]),collapse="*"))))
        paired_comparison<-data.frame(dv=dependent,graphics::pairs(means))
        post_hoc<-plyr::rbind.fill(post_hoc,paired_comparison)
      }
    result[[dependent]]<-ez
  }
  result<-list(omnibus=omnibus,post_hoc=post_hoc,object=result)
  return(result)
}

report_factorial_anova(df=df,dv=c("DV1","DV2"),wid="id",within=c("IV1","IV2"),within_full=c("IV1","IV2"),between=NULL,within_covariates=NULL,between_covariates=NULL,observed=NULL,diff=NULL,reverse_diff=FALSE,type=3,white.adjust=FALSE,detailed=TRUE,return_aov=TRUE)
report_factorial_anova(df=df,dv=c("DV1","DV2"),wid="id",within=c("IV1","IV2"),within_full=c("IV1","IV2"),between=NULL,within_covariates="DV3",between_covariates=NULL,observed=NULL,diff=NULL,reverse_diff=FALSE,type=3,white.adjust=FALSE,detailed=TRUE,return_aov=TRUE)
report_factorial_anova(df=df,dv=c("DV1","DV2"),wid="id",within=NULL,within_full=NULL,between=c("IV1","IV2"),within_covariates=NULL,between_covariates=NULL,observed=NULL,diff=NULL,reverse_diff=FALSE,type=3,white.adjust=FALSE,detailed=TRUE,return_aov=TRUE)
report_factorial_anova(df=df,dv="DV1",wid="id",within=NULL,within_full=NULL,between=c("IV1","IV2"),within_covariates=NULL,between_covariates=NULL,observed=NULL,diff=NULL,reverse_diff=FALSE,type=3,white.adjust=FALSE,detailed=TRUE,return_aov=TRUE)
report_factorial_anova(df=df,dv="DV1",wid="id",within="IV3",within_full="IV3",between=c("IV1","IV2"),within_covariates=NULL,between_covariates=NULL,observed=NULL,diff=NULL,reverse_diff=FALSE,type=3,white.adjust=FALSE,detailed=TRUE,return_aov=TRUE)
report_factorial_anova(df=df,dv="DV1",wid="id",within=c("IV1","IV2","IV3","IV4"),within_full=c("IV1","IV2","IV3","IV4"),between=,within_covariates=NULL,between_covariates=NULL,observed=NULL,diff=NULL,reverse_diff=FALSE,type=3,white.adjust=FALSE,detailed=TRUE,return_aov=TRUE) 
```

# php - 检查以插入或更新表

> ID：12516261
> 
> 赞同：1
> 
> 时间：2012-09-20T15:48:10.387
> 
> 标签：php, mysql, database

请参见下面的代码，它检查表中是否存在数据，如果不存在则插入它，否则更新表。

正如您所看到的，它看起来有点乱 - 有没有改进代码逻辑或更小的东西？我有几张桌子需要做同样的事情。

```
foreach ($sheet as $data) {
    // Get Phone ID
    $dataPhoneID = mysql_escape_string($data['handset']['phone_id']);

    if (isset($stocks[$dataPhoneID])) {
        $stockPhone = $stocks[$dataPhoneID ];
        $phoneName = mysql_escape_string($stockPhone['description']);
        $stock = mysql_escape_string($stockPhone['stock']);

        $SQL = "SELECT * FROM phone_affiliate WHERE affiliate_id = 1 AND affiliate_phone_id = '$dataPhoneID'";
        $q = mysql_query($SQL);
        if (mysql_num_rows($q) == 0) {
            $SQLInsert = "INSERT INTO phone (name) VALUE('$phoneName')";
            if (mysql_query($SQLInsert)) {
                $phone_id = mysql_insert_id();
                $SQLInsert = "INSERT INTO phone_affiliate (phone_id, affiliate_id, affiliate_phone_id, stock) ";
                $SQLInsert .= "VALUE('$phone_id', '1', '$dataPhoneID', '$stock')";
                mysql_query($SQLInsert) or die(mysql_error());
            }
        } else {
            $row = mysql_fetch_assoc($q);
            $phone_id = $row['phone_id'];
            $SQLUpdate = "UPDATE phone_affiliate set stock = '$stock' WHERE affiliate_id = 1 AND phone_id = $phone_id";
             mysql_query($SQLUpdate) or die(mysql_error());
        }

      // Similar code block above for other tables.
    }
} 
```

注意：我知道 PDO，但我没有时间在现有系统上替换它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T15:49:57.857

使用 mysql 的[REPLACE INTO](http://dev.mysql.com/doc/refman/5.0/en/replace.html)或[INSERT... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。例如：

```
foreach ($sheet as $data) {
    // Get Phone ID
    $dataPhoneID = mysql_escape_string($data['handset']['phone_id']);

    if (isset($stocks[$dataPhoneID])) {
        $stockPhone = $stocks[$dataPhoneID ];
        $phoneName = mysql_escape_string($stockPhone['description']);
        $stock = mysql_escape_string($stockPhone['stock']);

        $SQLInsert = "INSERT INTO phone_affiliate (affiliate_id, affiliate_phone_id, stock) ";
        $SQLInsert .= "VALUES ('1', '$dataPhoneID', '$stock') ";
        $SQLInsert .= "ON DUPLICATE KEY UPDATE stock = '$stock'";
        mysql_query($SQLInsert);
        if (mysql_insert_id()) {
            $SQLInsert = "INSERT INTO phone (name) VALUE('$phoneName')";
            mysql_query($SQLInsert);
            $phone_id = mysql_insert_id();
            $SQLUpdate = "UPDATE phone_affiliate set phone_id = $phone_id WHERE affiliate_id = 1 AND affiliate_phone_id = $dataPhoneID_id";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:51:09.073

您也可以使用 INSERT IGNORE 构造

# php - 将表值加载到对象变量中而不进行映射

> ID：12516265
> 
> 赞同：0
> 
> 时间：2012-09-20T15:48:20.190
> 
> 标签：php, orm, doctrine, doctrine-orm

我有以下数据模型

```
Product: id, description, price
ProductExtraField: id, name
ProductExtraFieldData: product_id, extra_field_id, value 
```

我想使用这个数据模型，这样我的应用程序的用户就可以动态地向产品添加额外的属性。假设添加属性“颜色”。当他们这样做时，将在`ProductExtraField`表中创建一行，其值如下：*6, 'Color'*。现在可以将此属性的值添加到那里的产品中。当这样做时，将在`ProductExtraFieldData`表中创建一个新行，其值如下：*4, 6, 'Green'*。现在我想在一个名为`Product`. 我使用以下代码：

```
<?php
use Doctrine\Common\Collections\ArrayCollection;

/** @Entity @Table(name="product") **/  
class Product

    public function __construct() {
        $this->extraFieldData = new ArrayCollection();
        $this->extraField = new ArrayCollection();
    }

    /** @Id @Column(name="id", type="integer") @GeneratedValue **/
    private $id;
    /** @Column(name="description", type="string") **/
    private $description;
    /** @Column(name="price", type="float") **/
    private $price;

    /**
     * @OneToMany(targetEntity="ProductExtraFieldData", mappedBy="product", cascade={"persist"})
     * @JoinColumn(name="product_id", referencedColumnName="id")
     * @var extraFieldData[]
     **/
    protected $extraFieldData = null;

     /**
     * @OneToMany(targetEntity="ProductExtraField", mappedBy="??????")
     * @var extraField[]
     **/
    protected $extraField = null; 
```

当然最后几行是不正确的。我不知道如何加载这些数据。我希望每个产品都可以使用额外字段的名称。我认为`$extraField`甚至应该是静态的。如何配置 Doctrine 来加载这些值？保留类中的`$extraField`值`Product`不是必需的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:10:34.210

可能是这样的结构：

**产品**

*   ID
*   描述
*   ETC...

**ProductExtraField**

*   product_id
*   extra_field_id
*   价值

**外场**

*   ID
*   标签
*   （还有什么？类型？）

因此，您`Product`将有一个 OneToMany 映射`ProductExtraField`，该映射将`ManyToOne`映射到`ExtraField`. 允许您使用代码，例如...

```
$extraValues = array();
foreach ($product->getExtraFields() as $productExtraField) {
    $extraValues[$productExtraField->getExtraField()->getLabel()] = $productExtraField->getValue();
}

// builds array such as array('colour' => 'blue', 'size' => 'small) 
```

# jquery - 没有 GQuery 的 Jquery + gwt

> ID：12516267
> 
> 赞同：0
> 
> 时间：2012-09-20T15:48:21.180
> 
> 标签：jquery, gwt

我正在尝试将 Jquery 库添加到我的项目中，然后添加tipsy.js 以及使用工具提示做一个“插件”。

问题是我已经在我的 gwt.xml 文件中添加了 js，但我仍然无法将“$”调用到 jQuery

我的 gwt.xml 文件是：

```
<module ... 
  <!-- jquery and plugins -->
  <script src="/javascripts/jquery.min.js"></script>
  <script src="/javascripts/tipsy.js"></script> 
```

js中调用的方法是：

```
public static native void allClassName(String className) /*-{
  $wnd.jQuery(className).tipsy({trigger: 'focus', gravity: 'w'});
}-*/; 
```

但我总是得到这个错误：

在 java.lang.Thread.run(Thread.java:680) 引起：com.google.gwt.core.client.JavaScriptException: (TypeError): Object [object Window] 在 com.google 没有方法 'jQuery'。 gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:248) 在 com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136) 在 com.google.gwt.dev.shell.ModuleSpace。 com.google.gwt.dev.shell.ModuleSpace.invokeNativeVoid(ModuleSpace.java:289) 的调用Native(ModuleSpace.java:561) com.google.gwt.dev.shell.JavaScriptHost.invokeNativeVoid(JavaScriptHost.java:107)在 netagenda.ui.gwt.client.gin.ClientGinjectorImpl.com$gwtplatform$mvp$client$HandlerContainerImpl_automaticBind_methodInjection_ ***_* _**(ClientGinjectorImpl.java) 在 netagenda.ui.gwt.client.gin.ClientGinjectorImpl.memberInject_Key$type$netagenda$ui$gwt$client$pages$backend$customers$presenter$CustomerPagePresenter$_annotation$$none$$(ClientGinjectorImpl.java :1395) 在 netagenda.ui.gwt.client.gin.ClientGinjectorImpl.create_Key$type$netagenda$ui$gwt$client$pages$backend$customers$presenter$CustomerPagePresenter$_annotation$$none$$(ClientGinjectorImpl.java:1408 ) 在 netagenda.ui.gwt.client.gin.ClientGinjectorImpl.get_Key$type$netagenda$ui$gwt$client$pages$backend$customers$presenter$CustomerPagePresenter$_annotation$$none$$(ClientGinjectorImpl.java:1421) 在netagenda.ui.gwt.client.gin.ClientGinjectorImpl.access$12(ClientGinjectorImpl.java:1419) 在 netagenda.ui.gwt.client.gin.ClientGinjectorImpl$13$1.onSuccess(ClientGinjectorImpl.java:2768) 在 com.google.gwt 。核。client.GWT.runAsync(GWT.java:255)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:10:10.407

我已经解决了将文件添加到 home.html 文件中的问题：

```
 <!-- jquery and plugins -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">  </script>
    <script src="http://onehackoranother.com/projects/jquery/tipsy/javascripts/jquery.tipsy.js"></script> 
```

之后是我使用 gwt 调用插件的方法：

```
 public static native void allClassName(String className) /*-{
      $wnd.jQuery(className).tipsy({trigger: 'focus', gravity: 'w'});
    }-*/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T10:46:04.643

在 GWT 的最新版本中，您无法在模块中添加 javascript 文件，您需要以这种方式注入您的 EntryPoint：

在您的 EntryPoint 类中：

```
ScriptInjector.fromString(PluginClientBundle.INSTANCE.plugins().getText())
        .setWindow(ScriptInjector.TOP_WINDOW)
        .inject(); 
```

你的 Bundle 类

```
public interface PluginClientBundle extends ClientBundle {
  static final PluginClientBundle INSTANCE = GWT.create(PluginClientBundle.class);

   @Source("resource/js/jquery-plugin.min.js")
   TextResource plugins();
} 
```

# c# - 检索特定的 Active Directory 属性

> ID：12516271
> 
> 赞同：8
> 
> 时间：2012-09-20T15:48:45.900
> 
> 标签：c#, active-directory

我正在使用内置的 .NET System.DirectoryServices.ActiveDirectory 来访问 Active Directory 域控制器。

我正在尝试从服务器枚举用户属性的集合——不是值，而是任何用户的可修改设置列表。

本质上，这是来自 Active Directory 中“属性编辑器”的可写属性的镜像：

![ADUC 用户属性](../Images/b50ecc61db12327ca1a3de2ffcf79cec.png)

我尝试使用以下代码获取此数据：

```
 ActiveDirectorySchema currSchema = ActiveDirectorySchema.GetSchema(directoryContext);

    ActiveDirectorySchemaClass userSchema = currSchema.FindClass("user");

    ReadOnlyActiveDirectorySchemaPropertyCollection userProperties = userSchema.GetAllProperties(); 
```

但这会返回**许多**根本不在此对话中的属性，但我不知道是什么让这些属性独一无二/特别。

我也试过 FindClass("person");

有没有办法做到这一点？

# 更新

根据要求，如果我提出上述要求，我会得到以下结果：

**使用 FindClass("person")**

```
cn    
instanceType      
nTSecurityDescriptor      
objectCategory    
objectClass   
adminDescription      
adminDisplayName      
allowedAttributes     
allowedAttributesEffective    
allowedChildClasses   
allowedChildClassesEffective      
attributeCertificateAttribute     
bridgeheadServerListBL    
canonicalName     
createTimeStamp   
description   
directReports     
displayName   
displayNamePrintable      
distinguishedName     
dSASignature      
dSCorePropagationData     
extensionName     
flags     
fromEntry     
frsComputerReferenceBL    
fRSMemberReferenceBL      
fSMORoleOwner     
isCriticalSystemObject    
isDeleted     
isPrivilegeHolder     
isRecycled    
lastKnownParent   
managedObjects    
masteredBy    
memberOf      
modifyTimeStamp   
mS-DS-ConsistencyChildCount   
mS-DS-ConsistencyGuid     
msCOM-PartitionSetLink    
msCOM-UserLink    
msDFSR-ComputerReferenceBL    
msDFSR-MemberReferenceBL      
msDS-Approx-Immed-Subordinates    
msDS-AuthenticatedToAccountlist   
msDS-EnabledFeatureBL     
msDS-HostServiceAccountBL     
msDS-IsDomainFor      
msDS-IsFullReplicaFor     
msDS-IsPartialReplicaFor      
msDS-KrbTgtLinkBl     
msDS-LastKnownRDN     
msDS-LocalEffectiveDeletionTime   
msDS-LocalEffectiveRecycleTime    
msDs-masteredBy   
msDS-MembersForAzRoleBL   
msDS-NC-RO-Replica-Locations-BL   
msDS-NCReplCursors    
msDS-NCReplInboundNeighbors   
msDS-NCReplOutboundNeighbors      
msDS-NcType   
msDS-NonMembersBL     
msDS-ObjectReferenceBL    
msDS-OIDToGroupLinkBl     
msDS-OperationsForAzRoleBL    
msDS-OperationsForAzTaskBL    
msDS-PrincipalName    
msDS-PSOApplied   
msDS-ReplAttributeMetaData    
msDS-ReplValueMetaData    
msDS-RevealedDSAs     
msDS-RevealedListBL   
msDS-TasksForAzRoleBL     
msDS-TasksForAzTaskBL     
msSFU30PosixMemberOf      
name      
netbootSCPBL      
nonSecurityMemberBL   
objectGUID    
objectVersion     
otherWellKnownObjects     
ownerBL   
partialAttributeDeletionList      
partialAttributeSet   
possibleInferiors     
proxiedObjectName     
proxyAddresses    
queryPolicyBL     
replPropertyMetaData      
replUpToDateVector    
repsFrom      
repsTo    
revision      
sDRightsEffective     
seeAlso   
serialNumber      
serverReferenceBL     
showInAdvancedViewOnly    
siteObjectBL      
sn    
structuralObjectClass     
subRefs   
subSchemaSubEntry     
systemFlags   
telephoneNumber   
url   
userPassword      
uSNChanged    
uSNCreated    
uSNDSALastObjRemoved      
USNIntersite      
uSNLastObjRem     
uSNSource     
wbemPath      
wellKnownObjects      
whenChanged   
whenCreated   
wWWHomePage 
```

**使用 FindClass("user")**

```
cn    
instanceType      
nTSecurityDescriptor      
objectCategory    
objectClass   
objectSid     
sAMAccountName    
accountExpires    
accountNameHistory    
aCSPolicyName     
adminCount    
adminDescription      
adminDisplayName      
allowedAttributes     
allowedAttributesEffective    
allowedChildClasses   
allowedChildClassesEffective      
altSecurityIdentities     
assistant     
attributeCertificateAttribute     
audio     
badPasswordTime   
badPwdCount   
bridgeheadServerListBL    
businessCategory      
c     
canonicalName     
carLicense    
co    
codePage      
comment   
company   
controlAccessRights   
countryCode   
createTimeStamp   
dBCSPwd   
defaultClassStore     
department    
departmentNumber      
description   
desktopProfile    
destinationIndicator      
directReports     
displayName   
displayNamePrintable      
distinguishedName     
division      
dSASignature      
dSCorePropagationData     
dynamicLDAPServer     
employeeID    
employeeNumber    
employeeType      
extensionName     
facsimileTelephoneNumber      
flags     
fromEntry     
frsComputerReferenceBL    
fRSMemberReferenceBL      
fSMORoleOwner     
garbageCollPeriod     
gecos     
generationQualifier   
gidNumber     
givenName     
groupMembershipSAM    
groupPriority     
groupsToIgnore    
homeDirectory     
homeDrive     
homePhone     
homePostalAddress     
houseIdentifier   
info      
initials      
internationalISDNNumber   
ipPhone   
isCriticalSystemObject    
isDeleted     
isPrivilegeHolder     
isRecycled    
jpegPhoto     
l     
labeledURI    
lastKnownParent   
lastLogoff    
lastLogon     
lastLogonTimestamp    
legacyExchangeDN      
lmPwdHistory      
localeID      
lockoutTime   
loginShell    
logonCount    
logonHours    
logonWorkstation      
mail      
managedObjects    
manager   
masteredBy    
maxStorage    
memberOf      
mhsORAddress      
middleName    
mobile    
modifyTimeStamp   
mS-DS-ConsistencyChildCount   
mS-DS-ConsistencyGuid     
mS-DS-CreatorSID      
msCOM-PartitionSetLink    
msCOM-UserLink    
msCOM-UserPartitionSetLink    
msDFSR-ComputerReferenceBL    
msDFSR-MemberReferenceBL      
msDRM-IdentityCertificate     
msDS-AllowedToDelegateTo      
msDS-Approx-Immed-Subordinates    
msDS-AuthenticatedAtDC    
msDS-AuthenticatedToAccountlist   
msDS-Cached-Membership    
msDS-Cached-Membership-Time-Stamp     
msDS-EnabledFeatureBL     
msDS-FailedInteractiveLogonCount      
msDS-FailedInteractiveLogonCountAtLastSuccessfulLogon     
msDS-HABSeniorityIndex    
msDS-HostServiceAccountBL     
msDS-IsDomainFor      
msDS-IsFullReplicaFor     
msDS-IsPartialReplicaFor      
msDS-KeyVersionNumber     
msDS-KrbTgtLinkBl     
msDS-LastFailedInteractiveLogonTime   
msDS-LastKnownRDN     
msDS-LastSuccessfulInteractiveLogonTime   
msDS-LocalEffectiveDeletionTime   
msDS-LocalEffectiveRecycleTime    
msDs-masteredBy   
msDS-MembersForAzRoleBL   
msDS-NC-RO-Replica-Locations-BL   
msDS-NCReplCursors    
msDS-NCReplInboundNeighbors   
msDS-NCReplOutboundNeighbors      
msDS-NcType   
msDS-NonMembersBL     
msDS-ObjectReferenceBL    
msDS-OIDToGroupLinkBl     
msDS-OperationsForAzRoleBL    
msDS-OperationsForAzTaskBL    
msDS-PhoneticCompanyName      
msDS-PhoneticDepartment   
msDS-PhoneticDisplayName      
msDS-PhoneticFirstName    
msDS-PhoneticLastName     
msDS-PrincipalName    
msDS-PSOApplied   
msDS-ReplAttributeMetaData    
msDS-ReplValueMetaData    
msDS-ResultantPSO     
msDS-RevealedDSAs     
msDS-RevealedListBL   
msDS-SecondaryKrbTgtNumber    
msDS-Site-Affinity    
msDS-SourceObjectDN   
msDS-SupportedEncryptionTypes     
msDS-TasksForAzRoleBL     
msDS-TasksForAzTaskBL     
msDS-User-Account-Control-Computed    
msDS-UserPasswordExpiryTimeComputed   
msExchAssistantName   
msExchHouseIdentifier     
msExchLabeledURI      
msIIS-FTPDir      
msIIS-FTPRoot     
mSMQDigests   
mSMQDigestsMig    
mSMQSignCertificates      
mSMQSignCertificatesMig   
msNPAllowDialin   
msNPCallingStationID      
msNPSavedCallingStationID     
msPKI-CredentialRoamingTokens     
msPKIAccountCredentials   
msPKIDPAPIMasterKeys      
msPKIRoamingTimeStamp     
msRADIUS-FramedInterfaceId    
msRADIUS-FramedIpv6Prefix     
msRADIUS-FramedIpv6Route      
msRADIUS-SavedFramedInterfaceId   
msRADIUS-SavedFramedIpv6Prefix    
msRADIUS-SavedFramedIpv6Route     
msRADIUSCallbackNumber    
msRADIUSFramedIPAddress   
msRADIUSFramedRoute   
msRADIUSServiceType   
msRASSavedCallbackNumber      
msRASSavedFramedIPAddress     
msRASSavedFramedRoute     
msSFU30Name   
msSFU30NisDomain      
msSFU30PosixMemberOf      
msTSAllowLogon    
msTSBrokenConnectionAction    
msTSConnectClientDrives   
msTSConnectPrinterDrives      
msTSDefaultToMainPrinter      
msTSExpireDate    
msTSExpireDate2   
msTSExpireDate3   
msTSExpireDate4   
msTSHomeDirectory     
msTSHomeDrive     
msTSInitialProgram    
msTSLicenseVersion    
msTSLicenseVersion2   
msTSLicenseVersion3   
msTSLicenseVersion4   
msTSLSProperty01      
msTSLSProperty02      
msTSManagingLS    
msTSManagingLS2   
msTSManagingLS3   
msTSManagingLS4   
msTSMaxConnectionTime     
msTSMaxDisconnectionTime      
msTSMaxIdleTime   
msTSPrimaryDesktop    
msTSProfilePath   
msTSProperty01    
msTSProperty02    
msTSReconnectionAction    
msTSRemoteControl     
msTSSecondaryDesktops     
msTSWorkDirectory     
name      
netbootSCPBL      
networkAddress    
nonSecurityMemberBL   
ntPwdHistory      
o     
objectGUID    
objectVersion     
operatorCount     
otherFacsimileTelephoneNumber     
otherHomePhone    
otherIpPhone      
otherLoginWorkstations    
otherMailbox      
otherMobile   
otherPager    
otherTelephone    
otherWellKnownObjects     
ou    
ownerBL   
pager     
partialAttributeDeletionList      
partialAttributeSet   
personalTitle     
photo     
physicalDeliveryOfficeName    
possibleInferiors     
postalAddress     
postalCode    
postOfficeBox     
preferredDeliveryMethod   
preferredLanguage     
preferredOU   
primaryGroupID    
primaryInternationalISDNNumber    
primaryTelexNumber    
profilePath   
proxiedObjectName     
proxyAddresses    
pwdLastSet    
queryPolicyBL     
registeredAddress     
replPropertyMetaData      
replUpToDateVector    
repsFrom      
repsTo    
revision      
rid   
roomNumber    
sAMAccountType    
scriptPath    
sDRightsEffective     
secretary     
securityIdentifier    
seeAlso   
serialNumber      
serverReferenceBL     
servicePrincipalName      
shadowExpire      
shadowFlag    
shadowInactive    
shadowLastChange      
shadowMax     
shadowMin     
shadowWarning     
showInAddressBook     
showInAdvancedViewOnly    
sIDHistory    
siteObjectBL      
sn    
st    
street    
streetAddress     
structuralObjectClass     
subRefs   
subSchemaSubEntry     
supplementalCredentials   
systemFlags   
telephoneNumber   
teletexTerminalIdentifier     
telexNumber   
terminalServer    
textEncodedORAddress      
thumbnailLogo     
thumbnailPhoto    
title     
tokenGroups   
tokenGroupsGlobalAndUniversal     
tokenGroupsNoGCAcceptable     
uid   
uidNumber     
unicodePwd    
unixHomeDirectory     
unixUserPassword      
url   
userAccountControl    
userCert      
userCertificate   
userParameters    
userPassword      
userPKCS12    
userPrincipalName     
userSharedFolder      
userSharedFolderOther     
userSMIMECertificate      
userWorkstations      
uSNChanged    
uSNCreated    
uSNDSALastObjRemoved      
USNIntersite      
uSNLastObjRem     
uSNSource     
wbemPath      
wellKnownObjects      
whenChanged   
whenCreated   
wWWHomePage   
x121Address   
x500uniqueIdentifier 
```

# 澄清返回的数据

*用户模式*

![用户模式](../Images/c1136f030736eddf93c47188a51b37f3.png)

*用户属性*

![用户属性](../Images/621f3d15a5b28cd7d948737f3870ffb1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:07:52.390

允许为对象修改的属性列表存储在属性**allowedAttributesEffective**中。

它将显示进行查询的安全上下文的属性。

查看此博客文章了解[更多信息](http://blogs.msdn.com/b/spatdsg/archive/2007/11/06/handy-queries-to-ask-active-directory.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:36:10.393

“但这会返回许多根本不在此对话中的属性，但我不知道是什么让这些属性独一无二/特别。”

Windows 服务器带有预定义的 AD 架构。这是唯一/特殊值的基本列表。例如，如果您安装了 Exchange 服务器，则 Exchange 将向列表中添加一大堆额外的唯一/特殊属性，因为它会将 Exchange AD 架构附加到您的基本 Windows AD 架构。本质上，基本 Windows AD 安装将向您显示您保证的架构对象，所有其他对象都是可选的，具体取决于您的网络上的配置和安装的软件。

我强烈建议使用 adsi 编辑器管理单元进行此类编程： [http](http://technet.microsoft.com/en-us/library/cc773354%28v=ws.10%29.aspx) ://technet.microsoft.com/en-us/library/cc773354%28v=ws.10%29.aspx 。这将帮助您了解可以将哪些魔术字符串放入 FindClass 并将调用作为参数，并允许您在进入代码之前通过 C# 调用确定从 AD 返回的内容。

# r - 手动将特殊字符添加到 pdf

> ID：12516273
> 
> 赞同：3
> 
> 时间：2012-09-20T15:48:50.580
> 
> 标签：r, pdf, utf-8, pdf-generation

我有一个使用 R 生成的 pdf（一个简单的折线图），并且只与纯文本流一起存储。用于生成图表的数据已经丢失，我想通过编辑 pdf 来修改轴标签。

我发现这一行：

```
/F2 1 Tf 12.00 0.00 -0.00 12.00 238.73 18.72 Tm (**Error Rate**) Tj 
```

这似乎控制了我想要的轴标签（当前显示“错误率”）。改成这样说：

```
/F2 1 Tf 12.00 0.00 -0.00 12.00 238.73 18.72 Tm (**Different Label**) Tj 
```

确实会导致轴标签更改为“不同标签”。

现在，我希望新标签是“Mu”。如，希腊字母 Mu。我知道这是可能的，因为我可以在 R 中生成带有希腊字母的轴标签中的 pdf。

我的第一个想法是使用 vim trigraph ctrl+km* 手动输入 Mu 的 UTF-8 字符，也可以通过字符映射等，给出：

```
/F2 1 Tf 12.00 0.00 -0.00 12.00 238.73 18.72 Tm ( μ ) Tj 
```

如果我在执行此操作后尝试写入文件，我会收到一条错误消息“xyz 行中的转换错误”，其中 xyz 是修改后的行。打开保存的 pdf 会显示一个“？” 为轴标签。

pdf如何编码mu？如何相应地修改标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T16:02:17.130

PDF 文件是二进制文件，在大多数情况下将它们修改为文本文件会损坏它们。为了保持文件有效，您需要更新外部参照表（有关更多详细信息，请参阅 PDF 规范）。如果整个文件的字节数发生变化，您将需要更新外部参照表的每个条目以使文件保持有效。另一种选择可能是一起删除外部参照表，并通过另一个可以为您“猜测”它的工具传递生成的文件。过去我[用 ghostscript](https://superuser.com/a/282056/78499)做过这个，效果很好。

关于字体的问题，/F2 对应的是哪个字体？它是否部分嵌入在 PDF 文件中？如果是，您可能在文件中没有添加字符 μ 所需的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T16:23:45.870

我试过这个：

```
pdf("testmu.pdf",compress=FALSE)
plot(1:10,1:10,xlab="abc",ylab=expression("LABEL "*mu))
dev.off() 
```

并在结果文件中找到以下块：

```
BT
/F2 1 Tf 0.00 12.00 -12.00 0.00 10.28 235.40 Tm (LABEL ) Tj
ET
BT
/F6 1 Tf 0.00 12.00 -12.00 0.00 10.28 276.09 Tm (m) Tj
ET 
```

所以我怀疑如果你使用

```
/F6 1 Tf 12.00 0.00 -0.00 12.00 238.73 18.72 Tm ( m ) Tj 
```

在您上面的示例中，它应该可以工作。我不知道 R 是否总是定义`F6`（符号字体），所以你可能还需要按照这些思路修改一些东西：

```
13 0 obj
<< /Type /Font /Subtype /Type1 /Name /F6 /BaseFont /Symbol
>> 
```

**编辑**：正如在另一个答案中所指出的，以及它下面的评论，看来您还需要通过（我认为）搜索手动更新外部参照计数`xref`，找到一个像

```
xref
0 13 
```

并增加第二个值...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T08:07:38.917

正如@yms 指出的那样，PDF 通常在文本编辑器中*不可*编辑，因为它们很可能包含二进制数据*，并且*如果在 PDF 中插入或删除字符，则需要更新外部参照表。如果您*必须*编辑 pdf，请使用qpdf[编辑](http://qpdf.sourceforge.net/)[PDF](http://qpdf.sourceforge.net/files/qpdf-manual.html#ref.qdf)。

# php - 将一个复制到另一个文本框并更改字母

> ID：12516278
> 
> 赞同：2
> 
> 时间：2012-09-20T15:49:04.603
> 
> 标签：php, javascript, textbox, copy

我使用此脚本从一个文本框复制到另一个文本框。当我在方框 A 中写下将在方框 B 中复制的内容进行更改时，我不知道该怎么做。exp。字母 A 是 001，字母 E 是 002，字母 V 是 008。我不在乎它是 php 还是 JavaScript。

感谢您的时间和帮助

```
<html>
<head>
<script type="text/javascript">
    function copy_data(val){
     var a = document.getElementById(val.id).value
     document.getElementById("copy_to").value=a
    }

    </script>
</head>
<body>
From:&nbsp;&nbsp;&nbsp; <input type="text" name ="a" id="copy_from" onkeyup="copy_data(this)"/><br>
To:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="text" name ="b" id="copy_to"/><br>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:15:05.890

一种方法是使用 JavaScript 函数，使用对象将特定字符映射到要插入的特定代码（在这种情况下，字符`a`映射到`001`，依此类推）：

```
var keysToCodes = {
    'a': '001',
    'b': '002',
    'c': '003',
    'd': '004'
};

function transferAndAmend(source, target, e) {
    if (!source || !target) {
        return false;
    }
    else {
        var e = e || window.event,
            keynum = window.event ? e.keyCode : e.which,
            key = String.fromCharCode(keynum),
            char = keysToCodes[key] ? keysToCodes[key] : key;
        target.value += char;
    }
}

var source = document.getElementById('one'),
    target = document.getElementById('two');

source.onkeypress = function(e) {
    transferAndAmend(this, target, e);
};​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2faYy/2/)。

这是在 Windows XP 上的 Chrome 21 和 IE 7 中经过测试的，并且似乎可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:15:22.370

[这](http://codepen.io/anon/pen/fljBt)是使用您的代码的 javacript 替换函数的一个小示例，它可能是您正在寻找的。

刚刚改变：

```
document.getElementById("copy_to").value=a 
```

至：

```
document.getElementById("copy_to").value=a
    .replace(/a/g, '001') // the letter/string, you code
    .replace(/b/g, '002') // ... 
```

# c# - 表达式转换

> ID：12516279
> 
> 赞同：2
> 
> 时间：2012-09-20T15:49:07.497
> 
> 标签：c#, entity-framework, lambda, expression-trees

我对 Expressions 仍然有点陌生，并且很难解决这个问题。这可能更像是 EF 上的 Lambda 表达式问题，但我希望有人能至少指出我正确的方向：

我正在尝试执行以下操作：

```
internal static IQueryable<TSource> WithSecurity<TSource>(thisIQueryable<TSource> source, Expression<Func<Security.Access, TSource, bool>> predicate, params MyRoles[] roles)
{

    DL.MyContext ctx = Csla.Data.DbContextManager<DL.MyContext>.GetManager().DbContext;

    var accessData = ctx.Access.Where(e => roles.Contains((MyRoles)e.Role_ID));

    Expression x = predicate asLambdaExpression;

    source =
        from c in source
        where accessData.Any(predicate)
        select c;

    return source;
} 
```

在 where 子句中，显然存在一个问题，因为谓词是 type `Expression<Func<Security.Access, TSource, bool>>`，但 Any 是 expecting `Expression<Func<Security.Access, bool>>`。任何有关如何转换的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:30:02.077

我认为您正在寻找的是 Compile 方法：

```
var compiledPredicate = predicate.Compile();
source = 
    from c in source 
    where accessData.Any(ad => compiledPredicate(ad, c)) 
    select c; 
```

请注意，编译是一个有点昂贵的操作，因此如果在典型场景中使用相同的表达式频繁调用此方法，请考虑缓存来自 Compile() 的结果。

# c++ - 如何使用 STL 中的 slist？

> ID：12516282
> 
> 赞同：2
> 
> 时间：2012-09-20T15:49:12.283
> 
> 标签：c++, stl, linked-list

我是 STL 的新手。我发现`slist`（单链表）不是标准 C++ 标准的一部分。那么如何在我的程序中使用它呢？

我下载了[slist.h](http://www.sgi.com/tech/stl/Slist.html)并粘贴在

```
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include 
```

但它要求我在 VS9 或 Windows SDK 的包含文件夹中找不到`algobase.h`其他头文件（`alloc.h`, ）。`stl_slist.h`怎么办？请帮忙。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T15:53:47.913

该容器称为[`std::forward_list`](http://en.cppreference.com/w/cpp/container/forward_list). 它是新标准库的一部分。

# abap - 为什么选择屏幕参数的值转换为大写？

> ID：12516290
> 
> 赞同：3
> 
> 时间：2012-09-20T15:49:34.670
> 
> 标签：abap

我有一个默认值为的输入字段`Test 1`：

```
PARAMETERS: gv_inp1 TYPE string DEFAULT 'Test 1' ,
            gv_inp2 TYPE string DEFAULT 'Test 2',
            gv_inp3 TYPE string DEFAULT 'Test 3'. 
```

问题是该值在编写时被转换为大写：

```
gv_txt1 = gv_inp1.
WRITE /: gv_txt1. 
```

结果：`TEST 1`

我希望在没有任何更改的情况下拥有这些值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T15:58:44.517

您必须在参数声明中添加“LOWER CASE”。例如：

```
PARAMETERS:
    lv_para TYPE STRING LOWER CASE DEFAULT 'Test 1'. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:03:23.230

这是参数的正常行为，除非您`LOWER CASE`像这样指定添加：

`PARAMETER: gv_inp1 TYPE string DEFAULT 'Test 1' LOWER CASE.`

# wpf - WPF 给出不正确的大小值

> ID：12516292
> 
> 赞同：3
> 
> 时间：2012-09-20T15:49:40.530
> 
> 标签：wpf, window, size, width, resolution

我有一个 WPF 应用程序，我试图在其中获取 WindowsFormsHost 控件的屏幕抓取。为此，我正在做一个 Graphics.CopyFromScreen。在我们测试过的大多数盒子上都可以完美运行，但是我们有一台机器无法获取正确的尺寸值。WPF 给出的宽度和高度与控件的实际宽度和高度不匹配。窥探时，控件的 ActualWidth 和 ActualHeight 也会显示不正确的值。更进一步，当我窥探主窗口（最大化）时，我得到 1550 的 ActualWidth 和 840 的 ActualHeight，但我的屏幕分辨率是 1920x1080。我会理解边框、边距等会偏离几个像素，但是让 WPF 告诉我我的最大化窗口的宽度比实际屏幕短 370 像素，这是没有意义的。

以下是用于捕获控件图像的代码：

```
public static Bitmap CreateBitmapFromVisual(this FrameworkElement target)
{
    Rect bounds = VisualTreeHelper.GetDescendantBounds(target);
    if (bounds.Width == 0 && bounds.Height == 0)
        return null;

    System.Windows.Point p0 = target.PointToScreen(bounds.TopLeft);
    System.Drawing.Point p1 = new System.Drawing.Point((int) p0.X, (int) p0.Y);
    Bitmap image = new Bitmap((int)bounds.Width, (int)bounds.Height);
    Graphics imgGraphics = Graphics.FromImage(image);
    imgGraphics.CopyFromScreen(p1.X, p1.Y, 0, 0, new System.Drawing.Size((int) bounds.Width, (int) bounds.Height));
    return image;
} 
```

这是一张可以更好地描述我在说什么的图片：

![在此处输入图像描述](../Images/c994d77ffd71a94e3d97f9e145d8e161.png)

如您所见，snoop 表示 WindowsFormsHost 的实际宽度和实际高度为 486x336。我记录的任何调试信息都说同样的话。但是，当我打印屏幕并裁剪到绘图中的控件时，实际尺寸为 608x423，相差很大。

作为进一步的更新，看起来 wpf 给出的宽度大约是实际宽度的 80%。对于控件和窗口都是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:06:15.480

您是否查看过显示器的 DPI 设置？

为此，请转到控制面板 - 显示并选择设置自定义文本大小 (DPI)。在打开的对话框中，您将看到比例为百分比。如果未设置为 100%，请尝试此操作。这可能是你的问题。

# javascript - 如何在 Emberjs 中将数组观察者添加到数组控制器

> ID：12516293
> 
> 赞同：1
> 
> 时间：2012-09-20T15:49:46.917
> 
> 标签：javascript, ember.js, firebase

这是我的问题，我希望使用 Array 控制器更新视图控制器，我通过 rest API 更新它。但是，当控制器中的数组内容发生更改时，我似乎找不到动态更新视图的方法。

如何将数组观察者添加到此代码中？

我正在使用 JavaScript、emberjs API 和 Firebase 来实现数据持久性。

```
Sept.ResultsController = Em.ArrayController.extend({});

    Sept.ResultsController.reopenClass({
        content : [],
        find : function(){
            $.ajax({
                    url : "gamma.firebase.com/blablab.json",//changed for a privacy purpose
                    dataType : 'jsonp',
                    context : this,
                    success : function(response){
                        var i = 0;
                        for (var item in response){
                            for (var items in response[item]){
                                this.content = response;
                                i++;
                            }
                        }
                    }
                },this);
            return this.content;
        }
    });

    Sept.ResultsView = Em.View.extend({
        templateName: 'results',
        contentBinding: 'Sept.ResultsController'
    }); 
```

# c# - 删除wsdl中的端口号

> ID：12516296
> 
> 赞同：2
> 
> 时间：2012-09-20T15:50:04.633
> 
> 标签：c#, .net, wcf, wsdl

我需要删除我的 WCF 服务的 wsdl 文件中的端口号。

我使用 IWsdlExportExtension 和 IEndpointBehavior 来做到这一点，但它总是以原始端口号结束。

注意：如果我修改所有 uri 而不仅仅是删除端口号，则 wsdl 将使用新的 uri 进行修改。

有人知道这是.net 框架的错误还是功能？

如果这是另一种方式呢？我听说有一个 KB 正在纠正这个问题，但我找不到它。

编辑：我找到了[KB](http://archive.msdn.microsoft.com/KB971842)，但我不想使用它，因为它没有经过全面测试。

# c++ - qt多线程：计算积分

> ID：12516299
> 
> 赞同：0
> 
> 时间：2012-09-20T15:50:28.573
> 
> 标签：c++, multithreading, qt

我需要使用[梯形规则](http://en.wikipedia.org/wiki/Trapezoidal_rule "梯形规则")和多线程计算积分。

我正在使用我使用[java 池线程示例](http://www.ibm.com/developerworks/library/j-jtp0730/ "java池线程示例")编写的池线程。

```
#ifndef POOL_H
#define POOL_H
#include <QObject>
#include <QThread>
#include <QWaitCondition>
#include <QMutex>
#include <QQueue>
#include "poolworker.h"
#include "segment.h"

class Segment;
class PoolWorker;

class Pool: public QObject
{
    Q_OBJECT
public:
    explicit Pool(QObject *parent = 0);
    Pool(int nThreads);
    void execute(Segment *s);
    static QWaitCondition con;
    static QMutex poolMutex;
    static QQueue<Segment*> segmentQueue;
private:
    int nThreads;
    QVector<PoolWorker*> workers;
};

#endif // POOL_H

#include "pool.h"

QWaitCondition Pool::con;
QQueue<Segment*> Pool::segmentQueue;
QMutex Pool::poolMutex;

Pool::Pool(QObject *parent) :
    QObject(parent)
{
}

Pool::Pool(int nThreads)
{
    this->nThreads = nThreads;
    for (int i = 0; i < nThreads; i++)
    {
        workers.push_back(new PoolWorker());
        workers[i]->start();
    }
}

void Pool::execute(Segment *s)
{
    poolMutex.lock();
    segmentQueue.enqueue(s);
    con.wakeOne();
    poolMutex.unlock();
}

#ifndef POOLWORKER_H
#define POOLWORKER_H

#include <QThread>
#include <QMutex>
#include "segment.h"
#include "pool.h"

class PoolWorker : public QThread
{
    Q_OBJECT
public:
    explicit PoolWorker(QObject *parent = 0);
    void run();
    static QMutex mutex;
signals:

public slots:

private:

};

#endif // POOLWORKER_H

#include "poolworker.h"

QMutex PoolWorker::mutex;

PoolWorker::PoolWorker(QObject *parent) :
    QThread(parent)
{
}

void PoolWorker::run()
{
    Segment *temp;
    forever
    {
        mutex.lock();
        while(Pool::segmentQueue.isEmpty())
        {
            Pool::con.wait(&mutex);
        }

        temp = Pool::segmentQueue.dequeue();
        mutex.unlock();
        temp->doWork();
    }
} 
```

每个区间都被放入一个容器“Segment”中，该容器也计算积分。
`Sab = 0.5*(b-a)*(f(a)+f(b))`
`m = (a+b)/2.0`
`Sam = 0.5*(m-a)*(f(a)+f(m))`
`Smb = 0.5*(b-m)*(f(b)+f(m))`
如果 和 之间的差`Sab`小于`Sam+Smb`，`Eps`那么我`Sab`使用 来添加积分和`Manager::addSum`。如果它不低，我对`am`和执行相同的算法`mb`。等等

```
#ifndef SEGMENT_H
#define SEGMENT_H

#include <QObject>
#include <cmath>
#include "manager.h"
#include <QDebug>

class Segment : public QObject
{
    Q_OBJECT
private:
    double a,b,Sab,Sam,Smb,m,Eps;
    double f(double x);
public:
    explicit Segment(QObject *parent = 0);
    Segment(double a, double b);
    void doWork();
signals:

public slots:
};

#endif // SEGMENT_H

#include "segment.h"

Segment::Segment(QObject *parent) :
    QObject(parent)
{
}

Segment::Segment(double a, double b)
{
    this->a = a;
    this->b = b;
    Eps = 0.001;
}

void Segment::doWork()
{
    Sab = 0.5*(b-a)*(f(a)+f(b));
    m = (a+b)/2.0;
    Sam = 0.5*(m-a)*(f(a)+f(m));
    Smb = 0.5*(b-m)*(f(b)+f(m));
    if (fabs(Sab - (Sam + Smb)) <= Eps)
    {
        Manager::addSum(Sab);
        qDebug() << "Reached Eps on interval a= " << a << ",b = " << b
                 << ", return S+= " << Sab;
        Manager::inc();
    }
    else
    {
        Manager::threadPool->execute(new Segment(a,m));
        Manager::threadPool->execute(new Segment(m,b));
    }
}

double Segment::f(double x)
{
    return pow(x,3.0) - 4.0*pow(x,2.0) + 6.0*x - 24.0;
} 
```

Manager 类将所有内容联系起来：它创建池，包含总和并通过在第一个间隔调用池上的 execute 来开始计算。它还有一个用于调试目的的计数器。

```
#ifndef MANAGER_H
#define MANAGER_H

#include <QObject>
#include <QThread>
#include <QQueue>
#include <QVector>
#include "segment.h"
#include "pool.h"

class Pool;

class Manager : public QObject
{
    Q_OBJECT
private:
    static double sum;
    static int i;
    static QMutex mutex;
public:
    explicit Manager(QObject *parent = 0);
    static Pool *threadPool;
    static void addSum(double add);
    static void inc();
    double viewSum();
    int viewCount();
    void doSetup(QThread &thread);
signals:

public slots:
    void doWork();
};

#endif // MANAGER_H

#include "manager.h"

double Manager::sum = 0;
int Manager::i = 0;
Pool* Manager::threadPool = new Pool(10);
QMutex Manager::mutex;

Manager::Manager(QObject *parent) :
    QObject(parent)
{
}

void Manager::addSum(double add)
{
    mutex.lock();
    sum += add;
    mutex.unlock();
}

void Manager::inc()
{
    i++;
}

double Manager::viewSum()
{
    return sum;
}

int Manager::viewCount()
{
    return i;
}

void Manager::doSetup(QThread &thread)
{
    connect(&thread,SIGNAL(started()),this,SLOT(doWork()));
}

void Manager::doWork()
{
    threadPool->execute(new Segment(4.5,12.0));
} 
```

在 main 中，我创建了管理器、管理器的线程并显示结果。

```
#include <QCoreApplication>
#include <QDebug>
#include <QThread>
#include <QTimer>
#include "manager.h"

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    Manager man;
    QThread manThread;
    man.doSetup(manThread);
    man.moveToThread(&manThread);
    manThread.start();
    manThread.wait(2500);
    qDebug() << "integrate(x^3 - 4*x^2 + 6*x - 24) from 4.5 to 12.0 = " 
             << man.viewSum();
    qDebug() << "i =" << man.viewCount();
    manThread.quit();
    QTimer::singleShot(1000, &a, SLOT(quit()));
    return a.exec();
} 
```

它在大约一半的时间内正确计算了积分。另一半我得到的数字比预期的要大（这会有所不同）。当我得到一个更大的数字时，我注意到一些间隔被计算了两次。如果我没记错的话，我已经使代码线程安全，所以我不明白这是怎么发生的。我对多线程编程很陌生，所以我可能对互斥锁做错了什么？或者也许我从 Java 池的过渡是错误的？
另一件事是在 main.cpp 我不确定如何正确显示结果，因为我不知道积分何时完成计算。我在包含管理器的线程上使用了 wait(2500) 函数，但这不是一个真正好的方法，因为计算时间可能因不同的 PC 和不同的函数而异。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:09:14.200

你锁错了。在您指向的 Java 示例中，相同的锁（`queue`本身）用于入队（in `execute`）和出队（在工作线程中）。这样，队列操作实际上是线程安全的。不幸的是，在您的代码中，您使用了两个不同的锁。`Pool::poolMutex`对于 enque (in `execute`) 和`PoolWorker::mutex`对于 deque (在 PoolWorker 线程中)。这样，您只为线程之间的 deque 保护队列，但 deque 和 enque 可以同时发生。你`Pool::poolMutex`是没用的，因为`execute`它只被一个线程调用，所以它只被一个线程锁定和解锁。您只需要对 enque 和 deque 使用一个相同的互斥锁。通过构造函数将`Pool::poolMutex`传入 PoolWorker 并锁定它而不是`PoolWorker::mutex`.

因此，当您入队并且某个线程刚刚完成工作时，它将立即出队（因为队列不为空），而不是等待您的`wakeOne`. 然后`wakeOne`，您将启动另一个线程。我对这两个线程如何获取相同的工作（而不是崩溃）没有明确的解释，但是如果您只使用 Java 原始代码中的一个锁，您的代码肯定会更好地工作。

# iphone - 如何在 iPhone 5 中支持自定义图形

> ID：12516302
> 
> 赞同：2
> 
> 时间：2012-09-20T15:50:38.273
> 
> 标签：iphone, ios, uiimage, ios6

如何在 iPhone 5、4 英寸显示屏中支持自定义图形。
我知道对于默认值，它需要添加 -568h 前缀，并且当我的状态栏被隐藏并且我的背景图像大小为 640 x 1136 像素时它可以工作。但是，当我需要为小于 1136 像素的屏幕添加自定义背景时，它不起作用。
那么如何在新的 Retina 显示器中支持自定义图形呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T18:54:01.463

你可以使用我的三个`#define`s：

```
#define isPhone568 ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568)
#define iPhone568ImageNamed(image) (isPhone568 ? [NSString stringWithFormat:@"%@-568h", image] : image)
#define iPhone568Image(image) ([UIImage imageNamed:iPhone568ImageNamed(image)]) 
```

只需为您的图像添加 -568h@2x.png 符号，并使用它`iPhone568ImageNamed`来获取标准名称或 iPhone 5/新 iPod 的名称。

# c++ - 将输入流中的固定数量的元素复制到向量中

> ID：12516303
> 
> 赞同：3
> 
> 时间：2012-09-20T15:50:45.273
> 
> 标签：c++, stl

给定以下程序：

```
#include <vector>
#include <iostream>

using namespace std;

int main()
{
    unsigned n;
    vector<double> xvec;

    cin >> n;
    while (xvec.size() < n)
    {
        double x;
        cin >> x;
        xvec.push_back(x);
    }

    return 0;
} 
```

有没有办法，使用 STL，在没有显式 while 循环的情况下编写它（例如，使用 copy() 算法和插入器？）。

当在运行时读取元素的数量时，我还没有找到一种方法来执行此操作（如变量'n'，here）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:59:23.057

这是将 s 复制`n` `double`到向量中的一种方法：

```
#include <vector>
#include <iostream>
#include <algorithm>
#include <iterator>

int main()
{
    unsigned n;
    std::vector<double> xvec;

    std::cin >> n;
    xvec.reserve(n);
    std:generate_n(std::back_inserter(xvec), n,
      []() { double d; std::cin >> d; return d; });

    std::copy(xvec.begin(), xvec.end(),
      std::ostream_iterator<double>(std::cout, " "));

    std::cout << "\n";

    return 0;
} 
```

* * *

**注意**：这种替代方法`std::copy_n`不起作用：

```
std::copy_n(std::istream_iterator<double>(std::cin),
    n,
    std::back_inserter(xvec)); 
```

这实际上读取`n+1`元素，但只读取`n`它们的副本（至少在 g++ 4.6.3 上）。

* * *

**注 2**：将答案限制为 C++98，这是一种可能的解决方案：

```
double GetD() { double d; std::cin >> d; return d; }
...
std:generate_n(std::back_inserter(xvec), n, GetD); 
```

# asp.net - 从各种电子邮件站点访问联系人

> ID：12516305
> 
> 赞同：0
> 
> 时间：2012-09-20T15:50:48.790
> 
> 标签：asp.net, .net

我如何访问与我的任何 gmail/yahoo/rediff 帐户相关联的各种联系人或者我可以从那里将收件箱加载到我的网站。就像 gmail 从其他站点导入联系人或从其他站点加载电子邮件一样。我经历了线程[如何从网站中的各种电子邮件服务提供商导入电子邮件联系人？](https://stackoverflow.com/questions/1932590/how-to-import-email-contacts-from-various-email-service-providers-in-a-website)但找不到使用此 API 的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:02:31.767

只需在[此处](http://openinviter.com/download.php)下载通用 API 。假设您有一些基本的 php 理解，您只需使用 API 中的类来获取电子邮件列表。[在此处](http://openinviter.com/documentation/OpenInviter/gmail.html)查看 gmail 的文档。

希望这可以帮助，

# mysql - 使用查询从单个或多个 Mysql 数据库中查找文本

> ID：12516307
> 
> 赞同：0
> 
> 时间：2012-09-20T15:50:50.557
> 
> 标签：mysql, database, search, full-text-search

有没有办法使用 mysql 查询从单个或多个数据库中查找文本。 **注意：**我知道可以将数据库下载到文件中并进行搜索，但我想知道是否可以使用 mysql 查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:14:32.150

除了检查每个数据库中每个表中的每一列的大量 SELECT 语句的 UNION 之外，我认为没有任何方法可以做到这一点。

```
SELECT col1
FROM db1.table1
WHERE col1 LIKE '%text%'

UNION ALL

SELECT col2
FROM db1.table1
WHERE col2 LIKE '%text%'

UNION ALL

SELECT col1
from db1.table2
WHERE col1 LIKE '%text%'

UNION ALL

select col1
from db2.table1
WHERE col1 LIKE '%text%'

and so on 
```

# ios - MonoTouch 的虚拟内存问题

> ID：12516311
> 
> 赞同：1
> 
> 时间：2012-09-20T15:51:01.487
> 
> 标签：ios, xamarin.ios

我们有一个使用 MonoTouch 和 UIWebView 构建的混合 Web/Native 应用程序。应用程序将加密的图像存储在磁盘上，然后由 UIWebView 请求，动态解密（通过 NSUrlProtocol），然后显示在应用程序中。

一切正常，直到我们有大约 27-30 张图像，此时我们收到内存警告，然后应用程序崩溃。

使用 Instruments 分析应用程序，我们看到我们的实际内存约为 55MB，但我们的虚拟内存约为 800 MB，这似乎相当高。此外，我们的物理记忆似乎在接近尾声时飙升。

![应用程序的内存配置文件](../Images/6ba495891d86e63e9b88e59585ef551a.png)

我意识到这可能是我们的应用程序的一个问题，但是我们不知道如何诊断这个问题。如果有人有任何想法，将不胜感激。

我们尝试了几件事：

*   Monotouch Profiler（仅显示 ~ 2mb 使用量）
*   GC.Collect() （没有变化）

谢谢，詹姆斯

# asp.net-mvc - 具有延迟加载的 EF。无法删除记录

> ID：12516314
> 
> 赞同：1
> 
> 时间：2012-09-20T15:51:03.453
> 
> 标签：asp.net-mvc, entity-framework

当我尝试删除我的教师记录时收到以下错误。

> DELETE 语句与 REFERENCE 约束“FK_dbo.Department_dbo.Teacher_TeacherID”冲突。冲突发生在数据库“MySchoolBook”、表“dbo.Department”、列“TeacherID”中。该语句已终止。

我的老师模型：

```
public class Teacher : Person
{
    [Key]
    public Guid TeacherID { get; set; }

    public Guid? AccountID { get; set; }

    public virtual ICollection<Classroom> Classrooms { get; set; }

    public virtual Office Office { get; set; }
} 
```

我的部门型号：

```
public class Department
{
    [Key]
    public Guid DepartmentID { get; set; }

    [Display(Name = "Administrator")]
    public Guid? TeacherID { get; set; }

    [Required(ErrorMessage = "Name is required.")]
    public String Name { get; set; }

    public virtual Teacher Administrator { get; set; }
    public virtual ICollection<Classroom> Classrooms { get; set; }
} 
```

我的数据库上下文：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

            modelBuilder.Entity<Department>()
                .HasOptional(d => d.Administrator);
        } 
```

编辑：

我想要发生的是当我删除我的教师记录时，我部门的教师 ID 列变为 NULL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:05:59.800

> 我想要发生的是当我删除我的教师记录时，我部门的教师 ID 列变为 NULL。

您必须手动设置`TeacherID`为。`null`EF 不会为您执行此操作：

```
using (var context = new MyContext())
{
    var teacher = context.Teachers
        .SingleOrDefault(t => t.TeacherID == teacherToDeleteID);

    if (teacher != null)
    {
        var departments = context.Departments
            .Where(d => d.TeacherID == teacherToDeleteID);
        foreach (var department in departments)
            department.TeacherID = null;

        context.Teachers.Remove(teacher);

        context.SaveChanges();
    }
} 
```

**编辑**

您可以尝试删除循环并仅将部门加载到上下文中。当您删除教师时，自动关系修复可能会将`TeacherID`FK设置为`null`，但我不确定：

```
using (var context = new MyContext())
{
    var teacher = context.Teachers
        .SingleOrDefault(t => t.TeacherID == teacherToDeleteID);
    if (teacher != null)
    {
        context.Departments.Where(d => d.TeacherID == teacherToDeleteID).Load();
        context.Teachers.Remove(teacher);
        context.SaveChanges();
    }
} 
```

# java - jQuery serialize() 可以使用 & 以外的其他分隔符吗？

> ID：12516323
> 
> 赞同：0
> 
> 时间：2012-09-20T15:51:32.800
> 
> 标签：java, javascript, jquery

我正在寻找一些不错的解决方案。我的页面上有几个文本字段，我使用 jQuery 序列化方法通过 Ajax 发送这些文本字段。这个序列化的字符串在我的 java 方法中解析为带有 key = 'nameOfTextfield' nad value = 'valueInTextfield' 的 hashmap

例如，我有这个 String ***stdSel=value1&stdNamText=value2&stdRevText=value3***并且一切正常。

```
String[] sForm = serializedForm.split("&");
Map<String, String> fForm = new HashMap<String, String>();
for (String part : sForm) {
  String key = null;
  String value = null;
  try {
    key = part.split("=")[0];
    value = part.split("=",2)[1];
    fForm.put(key, value);
  //if textfield is empty
  } catch(IndexOutOfBoundsException e) {
    fForm.put(key, "");
  }
} 
```

但是当某些文本字段中出现＆符号时，此方法将失效，例如此***stdSel=value1&stdNamText=value2&stdRevText=val&&ue3***。我的想法是，我将在序列化字符串中替换＆符号作为分隔符，用于某些其他字符或更多字符。这是可能的好主意还是有更好的方法？

问候 Ondrej

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:56:28.333

与号*被*序列化函数转义，因此它们不会破坏 URL。

您需要对从 URL 获得的字段进行转义是

```
value = URLDecoder.decode(value,"UTF-8"); 
```

但是，正如... Pointy 所指出的，如果您使用的是 Web 框架而不是仅使用 vanilla java.net java，那么您可能不必这样做。

# java - 设计一个 Web 应用程序：业务逻辑应该放在哪里？

> ID：12516325
> 
> 赞同：2
> 
> 时间：2012-09-20T15:51:44.990
> 
> 标签：java, multithreading, performance, tomcat

有一个 Web 应用程序的设计，我不确定如何评估它的好坏。
想法如下：
您在 Tomcat 中部署了一个 Web 应用程序（非平凡的），它接受客户端请求。我猜这个负载可能是Tomcat可以处理的。
现在实际处理不在容器内完成，而是委托给另一个进程，它通过单个`TCP`连接连接。所以这里本质上发生的是多路复用。
即客户端请求由客户端并发发送，这些请求作为消息发送到另一个进程以处理（我猜该进程本身将是多线程的）但*通过一个连接*。
我从一位同事那里听过类似的设计（在另一个平台上），性能非常好，但从我的角度来看，这在使用单个 TCP 连接方面存在瓶颈。
尽管我在多线程方面经验丰富，但我并不真正了解或使用过异步方法（nio 等），我想知道这是否适合这一类。
有没有人使用多路复用作为大型项目的一部分（至少是这种方式）？这是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:38:33.487

我同意你的看法。这是一个瓶颈和糟糕的设计。如果第二个 TCP 服务器可以是多线程的并且一次处理多个客户端，那么您当然应该以这种方式实现它，就像另一个 TCP 服务器（例如 Tomcat 本身）一样，并使用多个连接到它。

# ruby-on-rails - 更多红宝石方法来计算符合条件的对象

> ID：12516327
> 
> 赞同：1
> 
> 时间：2012-09-20T15:52:03.230
> 
> 标签：ruby-on-rails, ruby, activerecord

这是我现在正在做的事情：

```
def get_counts
  products = Product.all
  a_count, b_count, c_count = 0, 0, 0
  products.collect{ |p| a_count+=1 if p.some_attribute == 'a' }
  products.collect{ |p| b_count+=1 if p.some_attribute == 'b' }
  products.collect{ |p| c_count+=1 if p.some_attribute == 'c' }
  return a_count, b_count, c_count
end 
```

这对我来说感觉非常糟糕。我尝试使用注入，但无法让它按我想要的方式工作。有没有人有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:58:19.717

改进@xdazz 的答案

```
def get_counts
  Product.where(some_attribute: ['a','b','c']).
          count(group: "some_attribute")
end 
```

这将返回以下形式的哈希：

```
{'a' => 3, 'b' => 4, 'c' => 5} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:55:07.140

```
def get_counts
  return Product.where(:some_attribute => 'a').count, Product.where(:some_attribute => 'b').count, Product.where(:some_attribute => 'c').count
end 
```

如果您只需要一个查询，请使用 group by。

# python - python - 展平和解压列表

> ID：12516329
> 
> 赞同：1
> 
> 时间：2012-09-20T15:52:17.463
> 
> 标签：python, sqlite, flatten

这是我的一些代码，它们真的很难看，我希望有人能告诉我如何让它变得更好。我隐约知道如何修复此代码，但在实践中无法获得任何改进。

```
list1 = ([1, 10])
array2 = numpy.ones((1,3))
array3=numpy.ones((1,2))

conn = sqlite3.connect("a.db")
c = conn.cursor()
c.execute("insert into a_table values(?, ? , ?, ?, ?, ?, ?)", (list1[0], list1[1], array2[0][0], array2[0][1], array2[0][2], array3[0][0], array3[0][1])) 
```

#

我认为我需要做的是将list1、array2 和array3 附加到一个列表中，然后以某种方式将其展平。然后以某种方式用一个命令将整个列表解压缩到表中......谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T16:04:08.510

您可以使用[ravel](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html#numpy-ravel)制作`array2`一`array3`维：

```
In [149]: import itertools

In [150]: list(itertools.chain(list1, array2.ravel(), array3.ravel()))
Out[150]: [1, 10, 0, 1, 2, 0, 1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:56:13.390

刚刚通过将数组转换为一维列表来构建一个新列表：

```
c.execute("insert into a_table values(?, ? , ?, ?, ?, ?, ?)", 
    list1 + list(array2[0]) + list(array3[0])) 
```

或者，您可以使用[`.ravel()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html)创建一维数组：

```
c.execute("insert into a_table values(?, ? , ?, ?, ?, ?, ?)", 
    list1 + list(array2.ravel()) + list(array3.ravel())) 
```

如果参数的数量是可变的，您也可以生成占位符参数：

```
from itertools import chain
params = list(chain(list1, array2.ravel(), array3.ravel()))

c.execute("insert into a_table values(%s)" % (', '.join(('?',) * len(params),),
    params) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:41:20.597

我认为，如果您不循环执行此操作， itertools.chain() 不会为您带来任何好处。根据您的输入，这是一些简单的事情：

```
list1=([1,10])
array2 = numpy.ones((1,3))
array3 = numpy.ones((1,2))

args=list1 + list(*array2) + list(*array3)
# [1, 10, 1.0, 1.0, 1.0, 1.0, 1.0]
conn = sqlite3.connect("a.db")
c = conn.cursor()
c.execute("insert into a_table values(?, ? , ?, ?, ?, ?, ?)",*args) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:02:04.477

```
>>> from itertools import chain
>>> master_l = list(array2)+list(array3)
>>> list1.extend(chain(*master_l)
... )
>>> list1
[1, 10, 1.0, 1.0, 1.0, 1.0, 1.0]

>>> c.execute("insert into a_table values(?, ? , ?, ?, ?, ?, ?)",list1) 
```

# sql - 如何在没有事务的情况下回滚

> ID：12516331
> 
> 赞同：10
> 
> 时间：2012-09-20T15:52:27.890
> 
> 标签：sql, sql-server-2008, rollback

我犯了一个巨大的错误，我执行了这个查询：

```
update Contact set ContaPassword = '7FD736A3070CB9766' 
```

我忘记了`WHERE`条款，所以它更新了所有用户的密码。:(

有没有办法可以在此查询之前恢复数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T18:12:20.510

如果您在 BEGIN TRANSACTION / ROLLBACK 之外运行更改，则无法撤消更改。这就是为什么我开始任何类型的生产数据更新：

```
BEGIN TRANSACTION

-- report the bad or undesired data condition before-hand
SELECT ...

-- change the data
INSERT/UPDATE/DELETE ...

-- ensure we changed a reasonable number of records; may not be accurate if table has triggers
SELECT @@ROWCOUNT

 -- get the data condition afterwards and be sure it looks good.
SELECT ...

-- always start with this enabled first
ROLLBACK

-- don't do this until you are very sure the change looks good
-- COMMIT 
```

Martin Smith 指出了[Brent Ozar 在 dba.stackexchange.com](https://dba.stackexchange.com/questions/995/how-do-i-get-back-some-deleted-records/998#998)上关于这个主题的这篇出色的帖子。在完全恢复模式下，可以检查日志文件以查看发生了什么变化。

此外，正如 Oded 所指出的，如果您有备份，那么恢复原始数据并不难。您可以在某处恢复备份并复制原始数据。

# ruby-on-rails - 退款状态 NO_API_ACCESS_TO_RECEIVER，贝宝响应

> ID：12516334
> 
> 赞同：1
> 
> 时间：2012-09-20T15:52:38.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paypal, paypal-adaptive-payments

我在我的 rails 应用程序中使用这个 gem 进行付款：

[https://github.com/jpablobr/active_paypal_adaptive_payment](https://github.com/jpablobr/active_paypal_adaptive_payment)

我无法退款，我在响应日志中收到下一条消息：

```
...refund_status="NO_API_ACCESS_TO_RECEIVER">]> response_envelope=#<Hashie::Rash ack="Success".... 
```

我正在使用`pay_key`退款。

**它可能修复这个错误吗？**

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:33:10.363

好的，问题是，对于接收者授予向 API 调用者退款的权限：

登录 www.paypal.com（对于 Sandbox：www.sandbox.paypal.com - 确保您已经登录[https://developer.paypal.com](https://developer.paypal.com)）并使用接收者帐户登录。转到配置文件 -> API 访问 -> 授予 API 权限 -> 在第三方权限用户名文本框中输入 API 调用者（例如：May6_1307031077_biz_api1.paypal.com），然后单击查找按钮 -> 启用“为特定交易发出退款”复选框并单击添加按钮。

这就是接收者可以向 API 调用者授予权限的方式。

启用此功能后，退款应该会起作用。

成立于[https://www.x.com/developers/paypal/forums/adaptive-payments-api/adaptive-refund-notprocessed](https://www.x.com/developers/paypal/forums/adaptive-payments-api/adaptive-refund-notprocessed)

## 已编辑......

您可以在[https://www.x.com/devzone/articles/paypal-permissions-and-advantages-integrating-permissions-api](https://www.x.com/devzone/articles/paypal-permissions-and-advantages-integrating-permissions-api)上看到如果您需要使用 Api 制作此功能，您可以使用此 gem：

[https://github.com/moshbit/paypal_permissions](https://github.com/moshbit/paypal_permissions)

非常感谢你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T15:18:47.363

我遇到了完全相同的问题，我的问题无法通过接受的解决方案来解决。我的问题是我从商家账户向卖家账户汇款并试图退款交易，但（目前）无法从个人账户授予 API 权限以允许退款交易通过。我刚打电话给 Paypal，他们说无法完成我试图做的退款，但由于我只需要退款用于测试目的（以确保我的商家帐户中总是有钱），他们建议我相反，只需将等额付款从我的个人账户发送回我的商家账户。我希望这可以帮助别人。

# compilation - 未找到 org.apache.hadoop.classification.InterfaceAudience 的 Cloudera Hadoop 类文件

> ID：12516336
> 
> 赞同：5
> 
> 时间：2012-09-20T15:52:45.627
> 
> 标签：compilation, hadoop, javac, cloudera, word-count

这是我在尝试编译此 WordCount.java 文件时遇到的错误。

```
$javac -classpath /usr/lib/hadoop/hadoop-common-2.0.0-cdh4.0.1.jar:/usr/lib/hadoop/client/hadoop-mapreduce-client-core-2.0.0-cdh4.0.1.jar -d ~/wordcount /usr/lib/hadoop/wordcount_classes/WordCount.java
/usr/lib/hadoop/hadoop-common-2.0.0-cdh4.0.1.jar(org/apache/hadoop/fs/Path.class): 

warning: Cannot find annotation method 'value()' in type 'LimitedPrivate': class file for org.apache.hadoop.classification.InterfaceAudience not found
1 warning 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T13:23:20.277

将[hadoop-annotations-2.0.0-cdh4.0.1.jar](https://repository.cloudera.com/content/groups/public/org/apache/hadoop/hadoop-annotations/2.0.0-cdh4.0.1/hadoop-annotations-2.0.0-cdh4.0.1.jar)添加到类路径

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T04:46:30.883

我如何解决此问题的步骤：

1.  我创建了一个名为 wordcount ( `/home/cloudera/wordcount`) 的目录。
2.  添加`WordCount.java`到`/home/cloudera/wordcount`目录。
3.  在目录中，我运行了以下命令：

    ```
    javac \
    -cp /usr/lib/hadoop/\*:/usr/lib/hadoop/client-0.20/\*:/usr/lib/hadoop/lib/\* \
    WordCount.java 
    -d /home/cloudera/wordcount/wordcount_classes 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-23T07:47:35.907

对于 Hadoop 版本 2.6.0，您需要添加以下 jar：

javac -classpath $HADOOP_HOME/share/hadoop/common/hadoop-common-2.6.0.jar:$HADOOP_HOME/share/hadoop/common/lib/hadoop-annotations-2.6.0.jar:$HADOOP_HOME/share/hadoop/ mapreduce/hadoop-mapreduce-client-core-2.6.0.jar /path_to_your_java_file/WordCount.java

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-20T17:00:49.313

hadoop-2.6.x 中的快速（但不建议用于生产）是

Unix/MacOS

```
$ javac -classpath .:$(mapred classpath):$CLASSPATH -d ~/wordcount /usr/lib/hadoop/wordcount_classes/WordCount.java 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-11T14:42:02.733

如果你有它，请从 pom 中评论以下依赖项

```
 <dependency>
        <groupId>org.apache.hive</groupId>
        <artifactId>hive-exec</artifactId>
        <version>1.2.1</version>
    </dependency> 
```

然后启用 hadoop-annotations

# android - Android 布局：如何处理动态生成的调查表

> ID：12516337
> 
> 赞同：2
> 
> 时间：2012-09-20T15:52:47.707
> 
> 标签：android, forms, android-layout

我需要开发一个调查应用程序。

用户将首先做出一些选择，然后将显示适当的问题列表。

由于我有超过 2000 个问题的列表可供选择，因此不可能为每种类型的调查创建 XML 布局。这个想法是遍历存储问题的本地 SQLite 数据库，并仅显示满足用户开始时设置的参数的问题。

在 Java 中运行时创建布局是唯一的解决方案吗？我想将应用程序视图与应用程序逻辑分开。问题将有多种类型（多项选择、单选按钮、下拉菜单...）

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:03:49.753

您可以为 xml 中的每种问题类型创建一个模板，然后在运行时对其进行扩充并填写正确的信息。这将使您无需接触代码即可重新设计外观。

# c# - 将用户控件包装在更新面板中时的一次处理

> ID：12516338
> 
> 赞同：1
> 
> 时间：2012-09-20T15:52:56.180
> 
> 标签：c#, asp.net

使用会话状态中的值初始化控件的传统方法如下 -

```
if (!IsPostBack)
        {
            if (Session["sessionId"] != null)
            {
                //initialize controls
            }
        } 
```

**当用户控件包含在更新面板**中时，会出现意外行为。

我需要第一次从会话状态填充用户控件文本框值。并且这些控件值的后续加载应该从 viewState 填充。

你如何处理这种情况。您认为**Page.IsAsync**会对此有所帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:23:21.587

`IsPostback``true`即使从控件触发回发，属性也会返回，放置在 UpdatePanel 中。因此，可以`IsPostBack`在第一页加载时使用属性进行控件初始化。

顺便说一句，`Page.IsAsync`属性用于完全不同的目的，而不是用于检测异步回发。如果您需要从 UpdatePanel 检测异步回发，请检查`ScriptManager.IsInAsyncPostBack`属性

# java - 如何获取对匿名对象 2 级的引用

> ID：12516339
> 
> 赞同：3
> 
> 时间：2012-09-20T15:53:01.923
> 
> 标签：java, gwt

我有这样的代码：

```
TextBox txt = new TextBox(){
  public void onLoad(){
    this.addFocusHandler(new FocusHandler(){
      //some codes here
      //if I use "this" keyword, it refers to the handler, but how can I get a reference to the textbox?
    });
  }
}; 
```

问题嵌入位置。

* * *

**编辑：**

关于答案，创建预定义参考适用于这种情况，但这显然失去（或至少减少）匿名对象/函数的好处。

我希望在不创建新参考的情况下找到一种方法。而只是从该范围获取参考。

* * *

在所有答案之后，这是一个结论：

*   反射在 GWT 中不起作用。（至少我没有成功）`obj.getClass()`工作，但其他人喜欢`getMethods()`或`getEnclosingClass()`不工作。
*   获取引用的方法可以是在正确的范围内声明引用，也可以是获取更高级别的对象引用并向下引用。我更喜欢后者只是因为您不需要创建新变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:31:10.330

```
TextBox txt = new TextBox(){
    public void onLoad(){
        final TextBox finalThis = this;
        this.addFocusHandler(new FocusHandler(){
             finalThis.doSomething();
        );
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:30:35.417

Java 中非静态内部类（匿名或命名）的封闭实例可用作*ClassName* .this，即

```
TextBox txt = new TextBox(){
  public void onLoad(){
    this.addFocusHandler(new FocusHandler(){
      doSomethingCleverWith(TextBox.this);
    });
  }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T22:32:23.453

这在过去对我有用。它也适用于客户端js。这里是更详细的参考 [Java中Class.this和this有什么区别](https://stackoverflow.com/questions/5666134/what-is-the-difference-between-class-this-and-this-in-java)

```
public class FOO {

    TextBox txt = new TextBox(){
          public void onLoad(){
            this.addFocusHandler(new FocusHandler(){

                @Override
                public void onFocus(FocusEvent event) {
                    FOO.this.txt.setHeight("100px");
                }
            });
          }
        };

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:04:04.243

这可能对您有用：

```
TextBox txt = new TextBox(){
    public void onLoad(){
        final TextBox ref = this;
        this.addFocusHandler(new FocusHandler(){

            public void doSomething(){ 
                //some codes
                ref.execute();
            }
        });
    }
}; 
```

但我更喜欢将内部类迁移到命名类：

```
public class Test {

    public void demo(){
        TextBox txt = new TextBox(){
            public void onLoad(){
                this.addFocusHandler(new DemoFocusHandler(this));
            }
        };
    }
} 
```

外部焦点处理程序：

```
public class DemoFocusHandler extends FocusHandler {

    private TextBox textBox;

    public DemoFocusHandler(TextBox textBox){
        this.textBox = textBox;
    }

    public void doSomething(){ 
        //some codes
        textBox.execute();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T07:18:37.887

如果 gwt 支持反射，您可以按照以下方式做一些事情：

```
final TextBox txt = new TextBox() {
   public void onLoad() {

      final Object finalThis  = this;

      this.addFocusHandler(new FocusHandler() {

         @Override
         public void onFocus(FocusEvent event) {
           try {
            Method method= finalThis.getClass().getMethod("getVisibleLength");
            method.invoke(finalThis);
           } catch (Exception e) {
            e.printStackTrace();
           } 
        }
    });
  }
}; 
```

没有反思，现有的答案是你最好的选择。有两个 gwt 反射项目[gwt 反射](http://gwtreflection.sourceforge.net/#overview "gwt反射")和[gwt-preprocessor](http://code.google.com/p/gwt-preprocessor/)都处于测试阶段，我还没有尝试过。

# .net - 如何指定对 Oracle.DataAccess 的引用的版本

> ID：12516344
> 
> 赞同：0
> 
> 时间：2012-09-20T15:53:15.777
> 
> 标签：.net, oracle11g, odac

我已经安装了 2 个版本的 ODAC（Oracle 数据访问客户端），所以我可以看到 GAC 中有两个程序集。现在我正在尝试使用旧版本 4.112.2.0，但无论我怎么做，使用的版本始终是最新版本（4.112.3.0）。我什至尝试使用以下代码获取程序集：

```
Assembly asb = Assembly.LoadFrom(@"Oracle.DataAccess.dll");
Console.WriteLine(asb.FullName); 
```

但是，我还是看到了“4.112.3.0”……这是什么问题？

感谢您提前提供任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:12:51.957

1.  像往常一样将正确版本的 ODAC 添加到项目中（右键单击引用文件夹并转到添加引用）。选择并添加适当的 DLL。
2.  现在右键单击解决方案资源管理器中的引用并转到“属性”
3.  向下滚动到“特定版本”并将“假”更改为“真”

这将导致 Visual Studio 查找您添加的特定版本，并忽略任何更高版本。确保属性窗口中列出的版本是正确的，并且不要忘记确保运行适用的进程可以访问您添加的路径。

# sql - 更新具有重复行的表中的列

> ID：12516346
> 
> 赞同：1
> 
> 时间：2012-09-20T15:53:19.780
> 
> 标签：sql

在更新具有重复行的表中的列时遇到问题。我有一个表“tab1”，它的数据看起来像这样。

```
标识 col2 col3 col4 col5 col6 col7  
1 xim M gtt tif 1 2  
2 白色 M abc png 0 25  
2 白色 M abc jpeg 0 25  
3 gtc V ftt gif 4 72  

```

此表包含重复的 Id，但仅在 col5 中有所不同。该表包含大约 4000 行我想更新 col5 以使输出看起来像这样..

```
标识 col2 col3 col4 col5 col6 col7  
1 xim M gtt tif 1 2  
2 白色 M abc png,jpeg 0 25  
3 gtc V ftt gif 4 72  

```

有没有办法使用更新语句更新此表，我是否必须为此更新创建一个临时表..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:11:47.893

我同意 njk 和 Tony 发表的评论。对数据库进行非规范化不是一个好主意，但也许您的最终目标不是那么明显，并且组合图像扩展名适合您的特定需求。

这可以满足您的要求。我确信也有一种方法可以使用 XML 来完成，而无需在函数中使用光标......

```
use tempdb
go

create table tmp (
  id int, 
  col2 varchar(10), 
  col3 varchar(10), 
  col4 varchar(10), 
  col5 varchar(255), 
  col6 int, 
  col7 int
)
go

insert into tmp values
(1, 'xim', 'M', 'gtt', 'tif', 1, 2),
(2, 'white', 'M', 'abc', 'png', 0, 25),
(2, 'white', 'M', 'abc', 'jpeg', 0, 25),
(2, 'white', 'M', 'abc', 'gif', 0, 25),
(3, 'gtc', 'V', 'ftt', 'jpeg', 4, 72),
(3, 'gtc', 'V', 'ftt', 'tif', 4, 72),
(3, 'gtc', 'V', 'ftt', 'png', 4, 72),
(3, 'gtc', 'V', 'ftt', 'gif', 4, 72)
go

create function fnConcatCol5 (@id int) returns varchar(255) as
begin
  declare @rtn varchar(255) = '', @val varchar(10)

  declare cr cursor local for
    select col5 from tmp where id = @id

  open cr
  fetch next from cr into @val

  while @@fetch_status = 0
  begin
    set @rtn = @rtn + @val + ','
    fetch next from cr into @val
  end

  close cr
  deallocate cr

  set @rtn = left(@rtn, datalength(@rtn) - 1)

  return @rtn
end
go

-- it is more efficient to split up the 'distinct' and function call
-- into separate SQL statements so the function is only run *one* time
-- for each unique id

select distinct id, col2, col3, col4, col6, col7 
into #temp
from tmp

select id, col2, col3, col4, dbo.fnConcatCol5(id) as col5, col6, col7
from #temp
go

drop table tmp, #temp
go
drop function fnConcatCol5
go 
```

返回的数据如下所示：

```
id    col2    col3    col4    col5                col6    col7
----- ------- ------- ------- ------------------- ------- ----
1     xim     M       gtt     tif                 1       2
2     white   M       abc     png,jpeg,gif        0       25
3     gtc     V       ftt     jpeg,tif,png,gif    4       72 
```

# git - 在 git pull 期间指定哪个文件

> ID：12516348
> 
> 赞同：0
> 
> 时间：2012-09-20T15:53:23.790
> 
> 标签：git, version-control

我对“git”的经验非常少。git 存储库中有一个子目录，我想要`pull`那个子目录，但是在 command `git pull <file-name>`中，我应该指定哪个文件名。我`.git`在目录中看不到任何文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:56:29.810

您不能只检索 git 存储库的子文件夹 - 您总是需要`git clone`整个存储库。

谁告诉你，你可以`git pull <filename>`告诉你一些错误。的语法`git pull`是：

```
git pull [options] [<repository> [<refspec>...]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:57:20.697

你不能这样做。Git不像svn。

实现类似功能的一种可能方法是将该目录作为不同的 git 存储库，并将其用作两个存储库上的 git 子模块。

查看 git book 的这一部分以获取更多信息： http: [//git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

# jsf - 在 JSF 中如何控制访问和权限？

> ID：12516349
> 
> 赞同：23
> 
> 时间：2012-09-20T15:53:25.450
> 
> 标签：jsf, jsf-2, servlet-filters, login-control

我想在用户登录我的系统后控制访问。

例如：

```
administrator : can add, delete and give rights to employee
employee : fill forms only
... 
```

所以在知道用户有哪些权限之后，检查数据库，我想限制这个用户可以看到和做的事情。有一种简单的方法可以做到这一点吗？

**编辑**

```
@WebFilter("/integra/user/*")
public class LoginFilter implements Filter {

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {    
        HttpServletRequest req = (HttpServletRequest) request;
        Authorization authorization = (Authorization) req.getSession().getAttribute("authorization");

        if (authorization != null && authorization.isLoggedIn()) {
            // User is logged in, so just continue request.
            chain.doFilter(request, response);
        } else {
            // User is not logged in, so redirect to index.
            HttpServletResponse res = (HttpServletResponse) response;
            res.sendRedirect(req.getContextPath() + "/integra/login.xhtml");
        }
    }

    // You need to override init() and destroy() as well, but they can be kept empty.

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {

    }

    @Override
    public void destroy() {
    }
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-21T00:03:50.687

嗯，这是一个相当广泛的主题。当您开始使用自制身份验证时，我将针对自制授权的答案。

* * *

如果模型设计合理，Java/JSF 中的角色检查本身就相对简单。假设单个用户可以具有多个角色（在现实世界的应用程序中经常出现这种情况），您最终希望得到类似的结果：

```
public class User {

    private List<Role> roles;

    // ...

    public boolean hasRole(Role role) {
        return roles.contains(role);
    }

} 
```

```
public enum Role {

    EMPLOYEE, MANAGER, ADMIN;

} 
```

这样您就可以在 JSF 视图中按如下方式检查它：

```
<h:selectManyCheckbox value="#{user.roles}" disabled="#{not user.hasRole('ADMIN')}">
    <f:selectItems value="#{Role}" />
</h:selectManyCheckbox> 
```

```
<h:commandButton value="Delete" rendered="#{user.hasRole('ADMIN')}" /> 
```

在你的过滤器中：

```
String path = req.getRequestURI().substring(req.getContextPath().length());

if (path.startsWith("/integra/user/admin/") && !user.hasRole(Role.ADMIN)) {
    res.sendError(HttpServletResponse.SC_UNAUTHORIZED);
} 
```

* * *

最困难的部分是将这个 Java 模型转换为健全的 DB 模型。根据具体的业务需求，有几种不同的方法，每种方法都有自己的（缺点）优势。或者您可能已经有一个数据库模型，您必须在该模型上建立您的 Java 模型（因此，您需要自底向上设计）？

无论如何，假设您使用的是 JPA 2.0（您的问题历史至少证实了这一点）并且您可以自顶向下设计，最简单的方法之一是将`roles`属性映射为[`@ElementCollection`](http://docs.oracle.com/javaee/6/api/javax/persistence/ElementCollection.html)一个`user_roles`表格。由于我们使用的是`Role`枚举，`role`所以不需要第二个表。同样，这取决于具体的功能和业务需求。

在通用 SQL 术语中，该`user_roles`表可能如下所示：

```
CREATE TABLE user_roles (
    user_id BIGINT REFERENCES user(id),
    role VARCHAR(16) NOT NULL,
    PRIMARY KEY(user_id, role)
) 
```

然后将其映射如下：

```
@ElementCollection(targetClass=Role.class, fetch=FetchType.EAGER)
@Enumerated(EnumType.STRING)
@CollectionTable(name="user_roles", joinColumns={@JoinColumn(name="user_id")})
@Column(name="role")
private List<Role> roles; 
```

这基本上就是您在`User`实体中需要更改的所有内容。

* * *

除了自制身份验证（登录/注销）和授权（角色检查）之外，还有 Java EE 提供的[容器管理身份验证](http://docs.oracle.com/javaee/6/tutorial/doc/bncas.html)，您可以使用它[登录`j_security_check`或`HttpServletRequest#login()`](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0/2207147#2207147)，[过滤 HTTP 请求`<security-constraint>`in`web.xml`](https://stackoverflow.com/questions/6079469/java-ee-login-page-problem/6079648#6079648)，[检查登录用户`#{request.remoteUser}`](https://stackoverflow.com/questions/8374368/how-to-check-if-is-user-logged-in/8375301#8375301)及其[角色`#{request.isUserInRole('ADMIN')}`](https://stackoverflow.com/questions/6524788/how-to-properly-use-isuserinrolerole/6526525#6526525)， ETC。

然后有几个 3rd 方框架，例如[PicketLink](http://picketlink.org)、[Spring Security](http://static.springsource.org/spring-security/site/)、[Apache Shiro](http://shiro.apache.org/)等。但这都是不可能的 :)

# sql - 将数据转置为多列

> ID：12516357
> 
> 赞同：4
> 
> 时间：2012-09-20T15:53:53.087
> 
> 标签：sql, sql-server, pivot

我有很多客户，每个客户都有 67 条记录。

该记录包含活动、日期、ID、标志和许多其他列。

我希望活动名称成为这些活动标题下方的标题和日期。

我正在尝试使用下表进行更多解释。这是当前的输出：

```
Client  Activity    Date 
1       A           21/15
1       B           5/5/2012
1       C           51/3115
1       D           54/6/84
2       A           8/6/99
2       B           1/1/2011
2       C           8/4
2       D           9/81/1
3       A           6/51/8
3       B           1/61/8
3       C           1/31
3       D           3/2/1 
```

我希望它是：

```
Client      A       B         C         D
1           21/15   5/5/2012  51/31/15  54/6/84
2           8/6/99  1/1/2011  8/4       9/81/1
3           6/51/8  1/61/8    1/31      3/2/1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T16:05:25.137

您将需要为此使用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能。如果您知道要转换的列数，则可以通过静态数据透视对其进行硬编码：

```
select *
from
(
  select client, activity, dt
  from yourtable
) x
pivot
(
  max(dt)
  for activity in ([A], [B], [C], [D])
) p 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d7ff9/1)

如果您的列数未知，请使用动态版本：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(activity) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT client,' + @cols + ' from 
             (
              select client, activity, dt
              from yourtable
            ) x
            pivot 
            (
                max(dt)
                for activity in (' + @cols + ')
            ) p '

execute(@query) 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d7ff9/2)

最后，这也可以通过`CASE`语句和聚合函数来完成（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d7ff9/3)）：

```
select client,
  max(case when activity = 'A' then dt end) as A,
  max(case when activity = 'B' then dt end) as B,
  max(case when activity = 'C' then dt end) as C,
  max(case when activity = 'D' then dt end) as D
from yourtable
group by client 
```

# c# - 在 C# 中在“小于”和“大于”符号之间使用类名的目的是什么？

> ID：12516358
> 
> 赞同：16
> 
> 时间：2012-09-20T15:53:57.120
> 
> 标签：c#, class, generics, declaration

我不明白以下类声明：

```
public abstract class Class1 <TDomainServiceContract, TDomainService>
{
   ...
} 
```

我知道`TDomainServiceContract` and `TDomainService`是什么，但为什么在`<`and`>`符号之间使用它们？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-20T16:03:26.513

`<`和之间的参数`>`是泛型类型参数。泛型，在一个非常高的层次上，允许你设计一个类，它不知道它的一个或多个参数、属性或方法的*特定类型。*用文字解释有点困难，但泛型最常见的用途是在集合中。

在泛型之前，大多数开发人员使用诸如`ArrayList`跟踪对象集合之类的东西。这样做的缺点是安全。因为您可以将 any`object`放入 a 中`ArrayList`，这意味着您必须将对象转换回预期的类型（使代码不那么干净），并且您没有什么能阻止您添加*不是*那种类型的对象的东西（即我可以有一个`ArrayList`我可能期望只包含`string`对象的东西，但我可能——不小心——放入了一个`int`或一个`DbConnection`等），直到运行时你的演员失败时你才会发现。

```
ArrayList myStrings = new ArrayList();

myStrings.Add("foo");
myStrings.Add("bar");
myStrings.Add(1); // uh-oh, this isn't going to turn out well...

string string1 = (string)myStrings[0];
string string2 = (string)myStrings[1];
string string3 = (string)myStrings[2]; // this will compile fine but fail at 
                                       // runtime since myStrings[2] is an int, 
                                       // not a string 
```

在引入泛型之后，我们得到了`List<T>`类。这是一个接受单个泛型类型参数的单个类，即您希望列表包含的对象的类型。这样，我可以拥有 a`List<string>`或 a `List<int>`，a）不需要强制转换，因为索引器分别返回`string`and `int`，并且 b）在编译时是安全的，因为我知道除了 a`string`或 an `int`（再次分别）可以被列入那些名单。

```
List<string> myStrings = new List<string>();

myStrings.Add("foo");
myStrings.Add("bar");
myStrings.Add(1); // this will not compile, as an int is not a string 
```

泛型的意义在于说您不关心您正在使用的对象的*实际类型是什么，但您的类的使用者可能会关心。*换句话说，列表如何存储 a `string`、 an `int`、 a`DbConnection`等的机制是相同的，但是泛型使得来自类的使用者的这种类型信息不会丢失在您的抽象中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T15:57:25.287

这些是[泛型类型参数](http://msdn.microsoft.com/en-us/library/0zk36dx2.aspx)。

他们的意思是该类是一个泛型类，在您的示例中对类型有约束 - 两者都需要`DomainContext`或从它派生的类。

有关详细信息，请参阅MSDN 上的[泛型简介（C# 编程指南）](http://msdn.microsoft.com/en-us/library/0x6a29h6.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:58:02.207

这表明在使用该类时，您可以`TDomainServiceContract`为该实现提供任何类型`DomainContext`。所以让我们假设一个这样的类：

```
public class MyDomainContext : DomainContext
{
    ...
} 
```

我可以在创建这样的新类时使用该类`Class1`：

```
var o = new Class1<MyDomainContext, MyDomainService>(); 
```

因为它实现了`DomainContext`. 对于`TDomainService`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T16:00:41.410

另一种看待它的方式是在一个更简单的例子中。例如：

```
List<String> myStrings = new List<String>();
myStrings.Add("One");
//Etc. 
```

在此示例中，您只是确定将与该类一起使用的数据类型。你的例子中的类似情况。

# javascript - 带有下拉菜单的 jquery ui 图标按钮的任何示例

> ID：12516359
> 
> 赞同：0
> 
> 时间：2012-09-20T15:53:57.930
> 
> 标签：javascript, jquery, jquery-ui, frontend

我想实现像我附加的图像一样的视觉效果。我正在使用 jquery UI，并且相信之前一定有人这样做过。所以有人可以向我展示一些这种效果的现有例子吗？

![我要实现的效果](../Images/ff3ecef74d02d29af8aae79e2c10bc86.png)

Jquery Ui 按钮位于[http://jqueryui.com/demos/button/icons.html](http://jqueryui.com/demos/button/icons.html)，但没有进一步说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:51:03.690

使用在该`icons`选项内定义主要和次要的按钮选项。

在页面上的源代码中，您可以看到：

```
.button({
    icons: {
        primary: "ui-icon-gear",
        secondary: "ui-icon-triangle-1-s"
    },
    text: false
}); 
```

请注意该`text: false`选项，以便不会显示按钮内的任何文本。但是，您需要在`<button>`标签内放置一些文本，否则它不会有正确的高度。`<button>&nbsp;</button>`可以正常工作。

# java - 在 JBoss 5.1 中使用 JDBC 处理 Oracle 存储过程 IN OUT 游标

> ID：12516360
> 
> 赞同：1
> 
> 时间：2012-09-20T15:54:05.090
> 
> 标签：java, stored-procedures, jdbc, cursor, jboss5.x

我在尝试为使用 JDBC 为 Oracle DB 调用的存储过程处理 IN OUT 游标时遇到了很多问题。您可以在下面看到我是如何调用/尝试调用存储过程并处理输出的。相同的代码（在注释掉的部分稍作修改）成功地使用内联 SQL 选择语句有效地完成了相同的事情，但我们希望在 Java Web 服务之外隐藏数据库的结构和使用，理想情况下. 另外，该方法存在性能问题。

我发现一些关于网络的非常晦涩的论坛帖子解释说这要么不能使用带有 IN OUT 游标的 JDBC 来完成，要么 JBoss 最终处理此 DataSource 连接的方式存在一些基本问题（请参阅下面的更新）。

根据我转换可调用语句结果的方式的各种排列，我看到 nullPointerException 或以下内容：

“引用光标无效”

存储过程参数定义为：

```
PROCEDURE "MYSTOREDPROC" (
cursor1 IN OUT MYPACKAGE.MYREFCURSOR,
parm1              IN VARCHAR2,
parm2              IN VARCHAR2) IS

public static final String CALL_TO_STORED_PROCEDURE = 
    "{ call MYSTOREDPROC(?, ?, ?) }";

conn = getConnection();

stmt = conn.prepareCall(CALL_TO_STORED_PROCEDURE );         
// Register the Out Parameter Type (Oracle Cursor)
stmt.registerOutParameter(1, OracleTypes.CURSOR);

// Set the Input Parameters
stmt.setString(2, p1);
stmt.setString(3, p2);

//result = stmt.executeQuery();
stmt.execute();
result = (ResultSet)stmt.getObject(1);

while (result.next()) { // dostuff } 
```

我尝试了其他方法来准备通话，例如：

```
//stmt = conn.prepareCall(CALL_TO_STORED_PROCEDURE , ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
//stmt = conn.prepareCall(CALL_TO_STORED_PROCEDURE , ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY); 
```

**更新：**

使用下面的条件，我可以将连接转换为特定于 oracle 的连接，并从该连接句柄准备存储过程调用，但在尝试时我仍然收到**(java.sql.SQLException: ORA-01001: invalid cursor)**引用执行可调用语句的结果。

```
if(conn instanceof org.jboss.resource.adapter.jdbc.WrappedConnection) {
WrappedConnection wc = (WrappedConnection)conn;
oconn = (oracle.jdbc.OracleConnection)wc.getUnderlyingConnection(); 
```

在这一点上，我有点在黑暗中摇摆。这可能与 Jboss 5.1 完全相关吗？我必须想象有某种方法可以让它工作，但我对 PL/SQL 和游标的概念知之甚少，甚至不知道这里可能出了什么问题。

# android - onItemClickListener 崩溃

> ID：12516365
> 
> 赞同：0
> 
> 时间：2012-09-20T15:54:29.523
> 
> 标签：android, listview, android-arrayadapter

> **可能重复：**
> [带有 AutocompleteTextView 和 onclicklistener 的 ArrayAdapter 自定义](https://stackoverflow.com/questions/12511393/arrayadapter-custom-with-autocompletetextview-and-onclicklistener)

我正在努力理解我的 Android 应用程序中发生的事情，该应用程序使用了一个很好的自定义自动完成类。特别是我提出休息请求，获取数据，填充 ArrayList（我需要更多信息），使用过滤器并显示建议列表（根据服务器响应是正确的）。但是，当我单击项目时，我的应用程序崩溃了。建议？？

这是我的适配器类：

```
package xxx;

import java.util.ArrayList;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.Filterable;
import android.widget.TextView;

public class AutoCompleteCustomAdapter extends ArrayAdapter<Intervento>  implements Filterable {

    static class ViewHolder{
         private TextView  textName;
    }

    private ArrayList<Intervento> arrayListIntervento;
    private int              layout;

    public ArrayList<Intervento> getArrayListIntervento() {
        return arrayListIntervento;
    }

    public void setArrayListIntervento(ArrayList<Intervento> arrayListIntervento) {
        this.arrayListIntervento = arrayListIntervento;
    }

    @Override
      public int getCount() {
        return arrayListIntervento.size();
      }

    @Override
    public Intervento getItem(int index) {
        return arrayListIntervento.get(index);
    }

     @Override
        public Filter getFilter() {
         Filter myFilter = new Filter() {
                @SuppressWarnings("unchecked")
                @Override

                protected void publishResults(CharSequence contraint, FilterResults results) {
                    if(results != null && results.count > 0) {
                        arrayListIntervento = (ArrayList<Intervento>)results.values;
                        notifyDataSetChanged();
                    }
                    else {
                        notifyDataSetInvalidated();
                    }
                }

                @Override
                protected FilterResults performFiltering(CharSequence arg0) {
                    FilterResults filterResults = new FilterResults();
                    if(arg0 != null) {
                        try {
                            arrayListIntervento = new InterventoController().execute("http://192.168.1.162:8080/.../InterventoHasSinonimoName/{interventohassinonimo_interventoNomeIntervento}/1/interventos", arg0.toString()).get();
                        }
                        catch(Exception e) {
                            e.printStackTrace();
                        }
                        // Now assign the values and count to the FilterResults object
                        filterResults.values = arrayListIntervento;
                        filterResults.count = arrayListIntervento.size();
                    }
                    return filterResults;
                }
            };
            return myFilter;
     }

    @Override
    public View getView(int position, View contentView, ViewGroup viewGroup) {

        View       view = null;
        ViewHolder viewHolder = null;

        if(contentView==null){
            LayoutInflater inflater =  (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.suggest_list, viewGroup, false);

            if (view != null) {
                viewHolder = new ViewHolder();
                viewHolder.textName = (TextView) view.findViewById(R.id.nomeIntervento);
                view.setTag(viewHolder);
                Intervento intervento = arrayListIntervento.get(position);
                if(intervento!=null){
                    viewHolder.textName.setText(intervento.getNome());
                }
            }
        }else {
            view = contentView;
            viewHolder = (ViewHolder) contentView.getTag();
        }

        if (viewHolder != null) {
            Intervento intervento = arrayListIntervento.get(position);
            if(intervento!=null){
                viewHolder.textName.setText(intervento.getNome());
            }
        }

        return view;

    }

    public AutoCompleteCustomAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);

        this.arrayListIntervento= new ArrayList<Intervento>();
        this.layout=textViewResourceId;
    }

} 
```

在我的活动中，我调用：

```
autoCompleteTextView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> listView, View view, int position, long id) {
                Intervento intervento = ((Intervento) listView.getAdapter().getItem(position));
                Integer idIntervento = intervento.getIdintervento();
                //autoCompleteTextView.setText(intervento);
            }
        }); 
```

这是日志猫：

```
09-20 15:14:27.885: E/AndroidRuntime(941): FATAL EXCEPTION: main
09-20 15:14:27.885: E/AndroidRuntime(941): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0
09-20 15:14:27.885: E/AndroidRuntime(941):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
09-20 15:14:27.885: E/AndroidRuntime(941):  at java.util.ArrayList.get(ArrayList.java:304)
09-20 15:14:27.885: E/AndroidRuntime(941):  at it.stasbranger.clinigomobile.AutoCompleteCustomAdapter.getItem(AutoCompleteCustomAdapter.java:42)
09-20 15:14:27.885: E/AndroidRuntime(941):  at it.stasbranger.clinigomobile.AutoCompleteCustomAdapter.getItem(AutoCompleteCustomAdapter.java:1)
09-20 15:14:27.885: E/AndroidRuntime(941):  at it.stasbranger.clinigomobile.MainActivity$2.onItemClick(MainActivity.java:90)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AutoCompleteTextView.performCompletion(AutoCompleteTextView.java:868)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AutoCompleteTextView.access$500(AutoCompleteTextView.java:91)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AutoCompleteTextView$DropDownItemClickListener.onItemClick(AutoCompleteTextView.java:1157)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AdapterView.performItemClick(AdapterView.java:292)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AbsListView$1.run(AbsListView.java:3168)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.os.Handler.handleCallback(Handler.java:605)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.os.Looper.loop(Looper.java:137)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-20 15:14:27.885: E/AndroidRuntime(941):  at java.lang.reflect.Method.invokeNative(Native Method)
09-20 15:14:27.885: E/AndroidRuntime(941):  at java.lang.reflect.Method.invoke(Method.java:511)
09-20 15:14:27.885: E/AndroidRuntime(941):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-20 15:14:27.885: E/AndroidRuntime(941):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-20 15:14:27.885: E/AndroidRuntime(941):  at dalvik.system.NativeStart.main(Native Method) 
```

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:10:25.097

我的 2 美分价值：

arrayListIntervento 似乎是空的：

```
IndexOutOfBoundsException: Invalid index 1, size is 0 
```

也许它没有正确填充。public void setArrayListIntervent maybye应该像这样克隆：

```
public void setArrayListIntervento(ArrayList<Intervento> arrayListIntervento) {
    this.arrayListIntervento = arrayListIntervento.clone(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:27:31.323

首先，您必须`implements Filterable`从您的类 Adapter 中删除...因为 get Filter() 方法只是在 ArrayAdapter 类中实现。您如何将 AutoCompleteCustomAdapter 声明为活动？是最终声明吗？

# c# - 创建可重用代码的过程

> ID：12516366
> 
> 赞同：-1
> 
> 时间：2012-09-20T15:54:32.030
> 
> 标签：c#, enterprise-library, static-libraries, code-reuse

我有许多 C# 应用程序需要我编写的新编码的安全协议。有许多与协议相关的类，如果有适当的文档，则协议调用者此时无需查看代码。

[我认为这个过程是在查看Microsoft 的 Designing for Extensibility](http://msdn.microsoft.com/en-us/library/ms229028%28v=vs.100%29.aspx)之后创建一个类库，但我以前从未这样做过。有人可以概述从创建库到实施库的正确过程吗？如果答案不是创建类库，有人可以提供参考详细过程，包括要求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:03:59.750

1.  创建一个新项目。
2.  在 Visual Studio 中使用“类库”作为项目的类型。（您也可以在项目属性中创建后将项目更改为此类型）。
3.  将您的课程放入该项目中。
4.  其他项目则需要引用它。如果他们在同一个解决方案中，只需“添加参考”并从“项目”选项卡中选择其他项目。如果不在同一个解决方案中：
    1.  `Build`类库。
    2.  转到该项目的 bin -> 调试文件夹
    3.  将 .dll 文件放在某个公共位置（可能是 GAC）。
    4.  从需要使用它的所有项目中添加对该 .dll 文件的引用。

# google-analytics - 将 _trackEvent 中的 url 过滤到 Google Analytics

> ID：12516368
> 
> 赞同：1
> 
> 时间：2012-09-20T15:54:39.763
> 
> 标签：google-analytics

我可以完成发送一个等于“myPage”的页面参数吗

```
_trackEvent(category, action, opt_label, opt_value, opt_noninteraction) 
```

与中相同的方式

```
_gaq.push(['_trackPageview', 'myPage'); 
```

正如我们所见，在 中没有“页面”参数`trackEvent`，但在`trackPageview`. 这会导致我的事件绑定到实际页面（实际上是 index.php），并将“pageview”页面绑定到“myPage”。

如果无法从我网站上的 JavaScript 同步这些页面，有没有办法在 Google 的仪表板中进行同步？

我知道我可以使用 .htaccess 或 web.config（在 ISS 中）来摆脱 ExpressionEngine 中的 index.php，但首先我需要尝试使用 Google 的框架。

# java - android file.exists 无法正常工作

> ID：12516371
> 
> 赞同：2
> 
> 时间：2012-09-20T15:54:48.440
> 
> 标签：java, android, file, exists

在我的 android 应用程序中，我遇到了`file.exists`功能问题。下面是我获取两个变量的函数。`from`是文件的完整路径，并且`to`是我必须复制文件的目录路径。例如 `from == "/mnt/sdcard/Media/Image/Abstact wallpapers/abstraction-360x640-0033.jpg";`和 `to == "/mnt/sdcard";`

```
public static boolean copyFile(String from, String to) {    
            File sd = Environment.getExternalStorageDirectory();
            if (sd.canWrite()) {
                int end = from.toString().lastIndexOf("/") - 1;
                String str1 = from.toString().substring(0, end);
                String str2 = from.toString().substring(end+2, from.length());
                File source = new File(str1, str2);
                File destination= new File(to, str2);
                if (source.exists()) {
                    FileChannel src = new FileInputStream(source).getChannel();
                    FileChannel dst = new FileOutputStream(destination).getChannel();
                    dst.transferFrom(src, 0, src.size());
                    src.close();
                    dst.close();
                }
            }
            return true;
        } catch (Exception e) {
            return false;
        }
    } 
```

当我调试它时，`if (source.exists())`返回 false 但我的具有此路径的文件存在。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T16:17:42.857

问题在于您创建`File` `source`.

其中存在一个错误，它会生成一个带有错误目录的文件。

因此，当您调用`.exists`它时根本不会，因为您指的是错误的文件路径

> **公共字符串子字符串（int start，int end）**
> 
> 自：API 级别 1 返回一个字符串，该字符串包含该字符串的字符子序列。返回的字符串共享此字符串的支持数组。
> 
> 参数开始第一个字符的偏移量。结束最后一个字符的偏移量。返回一个包含从开始到结束的字符的新字符串 - 1

你误用了`substring`. 它从头到尾获取子字符串-1。你自己有-1，所以实际上你已经从文件夹目录中把它变成了-2。

如果您删除额外的 -1 并将下一个子字符串的开头减少 1，它应该可以工作。

```
int end = from.toString().lastIndexOf("/") ;
String str1 = from.toString().substring(0, end);
String str2 = from.toString().substring(end+1, from.length()); 
```

**编辑：**

一种改进的方法是使用这些`File`方法

```
File source = new File(from); //creates file from full path name    
String fileName = source.getName(); // get file name
File destination= new File(to, fileName ); // create destination file with name and dir. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:21:23.767

到目前为止看不到任何真正的错误，请确保您在文件系统、fileOutputStream 或 FileChannel#close 上的代码同步可能无法足够快地完成您需要的操作，因为文件系统缓存了一些数据。

看看：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileDescriptor.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileDescriptor.html)

当我主要复制少量数据时，我遇到了这样的问题。

# asp.net - 为上传的文件添加增量编号

> ID：12516372
> 
> 赞同：0
> 
> 时间：2012-09-20T15:54:51.527
> 
> 标签：asp.net, vb.net, file-upload

每次上传文件时，我都需要在文件末尾添加一个增量数字。我几乎可以正常工作。

请检查以下代码：

```
Dim intVersion As Integer = 1
   While (System.IO.File.Exists(strDestinationPath))
       Dim temp As Integer = ourFilename.LastIndexOf(".")
       Dim temp2 As String = ourFilename.Substring(temp)
       ourFilename = ourFilename.Replace(temp2, "_" & intVersion & temp2)
       strDestinationPath = System.Configuration.ConfigurationManager.AppSettings("WebLocalContentDir") & "\VisualID\" & ourFilename
       intVersion += 1
   End While 
```

如果我上传文件 3 次，它会保存为，

第一次：VDFGH 第二次：VDFGH_1 第三次：VDFGH_1_2（预期输出为 VDFGH_2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:18:27.480

```
Dim intVersion As Integer = 1
While (System.IO.File.Exists(strDestinationPath))
   Dim temp As Integer = ourFilename.LastIndexOf(".")
   Dim temp2 As String = ourFilename.Substring(temp)
   dim tempFileName as string = ourFilename.Replace(temp2, "_" & intVersion & temp2)
   strDestinationPath = System.Configuration.ConfigurationManager.AppSettings("WebLocalContentDir") & "\VisualID\" & tempFileName
   intVersion += 1
End While 
```

很确定这会奏效。您正在更改原始文件名字符串，然后每次都对其进行修改。

# architecture - 架构、大量方法与长参数列表

> ID：12516373
> 
> 赞同：5
> 
> 时间：2012-09-20T15:55:04.473
> 
> 标签：architecture, language-agnostic

我们正在尝试在 3 层架构的情况下尽可能清晰和干净地做事。

但是我们系统的复杂性让我们对最好的方法感到困惑。

如果我们使用大量通过服务层的函数链，并使用较小的参数列表，那么就所做的事情而言，这似乎很清楚，但感觉就像在这些方法中重复了很多功能。

但是，如果我们使用较少的方法，并且有大量参数列表来更改方法中的功能，这似乎会失控。

我们目前的选择是拥有更多功能，因为这比内部包含大量逻辑流的单片功能更容易管理。这显然意味着更小块更易于管理的代码。

只是我们经常听到有关 DRY 的消息，所以感觉方法内部有一些重复。但它似乎更灵活。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T17:23:06.703

我认为最好提供2个例子来说明你的意思。这听起来像以下之一：

1.  你的设计很糟糕。
2.  您的交互/行为分布在许多对象中。
3.  您错误地使用了 DI\design 模式。
4.  您的代码实际上是程序性的，而不是面向对象的。

因为您没有提供任何示例，所以我将简要介绍所有这些选项。

**1\. 你的设计不好。**

**3\. 您错误地使用了 DI\design 模式。**

也许你应该以不同的方式拆分你的代码，也许你应该使用 DI 或者重新审视你是如何使用它的。也许您应该应用一些设计模式来使问题易于管理。

**2\. 你的交互/行为分布在许多对象中。** 考虑使用 DCI [http://alexsmail.blogspot.com/2012/09/dci.html](http://alexsmail.blogspot.com/2012/09/dci.html)来解决这个问题。

**4\. 你的代码实际上是程序性的，而不是面向对象的。** 我看到程序员用 Java 编写的代码经常编写程序代码。它有许多*调整*方法执行的参数。解决方案将是重新设计您的代码并（重新）培训您的程序员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:05:32.267

我真的相信，对于企业应用程序来说，没有什么比一个好的分层架构更好的了，它有良好的意图揭示类和方法的名称，以及在整个解决方案中应用的一些设计模式。遵循这条规则，使用长方法是矛盾的，因为它们可能会违反单一责任原则，因此它们不会用名字来表达他们真正在做什么。如果您想使用 DRY 原则，只需保持您的方法和类的简洁、简短和清晰，并应用一些设计模式以在整个解决方案中重用它们。

我建议阅读领域驱动设计 (Eric Evans) 和清洁代码 (Robert C. Martin) 以详细了解这种“代码哲学”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T15:58:15.240

大多数人更喜欢较小的方法签名而不是大的方法签名。它使推理方法变得更容易（更不用说测试它们了！），但是你不应该用它来证明违反 DRY 原则的合理性。

有什么理由不能有小的方法签名并将常见的复制代码分解到内部帮助方法中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:20:03.100

这通常是强耦合应用程序的症状。要从 A 到 B，您必须转十五圈，然后再往回走。

减少耦合的一个好方法是引入领域事件。例如，当创建用户时，您将生成一个名为`UserCreated`when 的域事件，该事件被该类订阅`SendWelcomeEmail`，`NotifyAdminsOfNewUser`或者`SendIntroductionaryOffer`

关键是任何人都可以对事件采取行动，这有效地降低了复杂性，因为您不必再​​强耦合您的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T16:02:09.857

我假设“很多方法”执行相同的功能，唯一不同的是参数。

我的方法是使用一些对象传递数据，类似于将参数传递给对象`GridBagLayout`中的 a 的方式`GridBagConstraints`。例如，对于一个搜索查询，我传递了一个包含所有可能条件的 bean“过滤器”，方法中的代码很长但并不复杂（“是否指定了条件 X -> 将 X 过滤器添加到查询中”）并且可以很容易地划分在一些辅助函数中。

# image - 在vb6中将图片大小调整为固定大小

> ID：12516376
> 
> 赞同：0
> 
> 时间：2012-09-20T15:55:13.467
> 
> 标签：image, image-processing, vb6, picturebox

我试图创建一个调整图像大小并将它们加载到图片框的函数......

到目前为止，我已经这样做了：

```
Function ResizeImage(Picture As ImageFile, Width As Integer, Height As Integer) As ImageFile
    Dim ratioWidth, ratioHeight, ratio As Double
    Dim newWidth, newHeight As Integer
    Dim img As ImageFile
    Set img = Picture

    'Calgulate AspectRatio
    ratioWidth = (Width / Picture.Width)
    ratioHeight = (Height / Picture.Height)

    'Choose the smaller ratio
    If ratioWidth > ratioHeight Then
        ratio = ratioHeight
    Else
        ratio = ratioWidth
    End If

    'Calgulate newWidth and newHeight
    newWidth = Picture.Width * ratio
    newHeight = Picture.Height * ratio

    'Return resized image
    ResizeImage = img.ARGBData.Picture(newWidth, newHeight)
End Function 
```

函数称为：

```
picResim.Picture = LoadPicture(PicturePath) 'Show picture first
Set PrintImg = New ImageFile                'Create a background picture
PrintImg.LoadFile PicturePath               'to process on
picResim.Picture = ResizeImage(PrintImg, 40, 30) 'Show resized picture 
```

但是正如您所看到的，我需要进行大量调试，我做错了什么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:30:39.520

我不确定您为什么将图像放入 PictureBox 中，然后将另一个图像放入其中，但也许这会对您有所帮助？

```
Option Explicit
'Needs reference to:
'Microsoft Windows Image Acquisition Library 2.0

Private Function ResizeImage( _
    ByVal Original As WIA.ImageFile, _
    ByVal WidthPixels As Long, _
    ByVal HeightPixels As Long) As WIA.ImageFile

    'Scale the photo to fit supplied dimensions w/o distortion.
    With New WIA.ImageProcess
        .Filters.Add .FilterInfos!Scale.FilterID
        With .Filters(1).Properties
            '!PreserveAspectRatio = True by default, so just:
            !MaximumWidth = WidthPixels
            !MaximumHeight = HeightPixels
        End With
        Set ResizeImage = .Apply(Original)
    End With
End Function

Private Sub cmdBrowse_Click()
    Dim imgPhoto As WIA.ImageFile

    With dlgOpen
        .FileName = ""
        'Other CommonDialog properties were set at design-time.
        On Error Resume Next
        .ShowOpen
        If Err.Number = cdlCancel Then Exit Sub
        On Error GoTo 0

        Set imgPhoto = New WIA.ImageFile
        imgPhoto.LoadFile .FileName
    End With

    With Picture1
        Set imgPhoto = ResizeImage(imgPhoto, _
                                   ScaleX(.ScaleWidth, .ScaleMode, vbPixels), _
                                   ScaleY(.ScaleHeight, .ScaleMode, vbPixels))
        Set .Picture = imgPhoto.FileData.Picture
    End With
End Sub 
```

# fluent-nhibernate - 流畅映射中hasman中子对象属性的Where子句

> ID：12516377
> 
> 赞同：1
> 
> 时间：2012-09-20T15:55:16.807
> 
> 标签：fluent-nhibernate, parent-child, has-many, fluent-nhibernate-mapping

我想通过 HasMany 映射中子级的属性来限制列表。

我有一个`Customer`像这样的对象：

```
public class Customer
{
    public virtual int CustomerId { get; set; }
    public virtual IList<RecurringPayment> Recurring { get; set; }
} 
```

然后我的反复出现

```
public class RecurringPayment
{
    public virtual int RecurringPaymentId{ get; set; }
    public virtual ItemBase OriginalItem { get; set; }
} 
```

`ItemBase`有一个类型鉴别器，但这不相关。这是部分：

```
public class ItemBase
{
    public virtual int ItemId { get; set; }
    public virtual ItemStatus Status { get; set; }
} 
```

`ItemStatus`是一个枚举

所以，让我们向后看一下映射。首先项目

```
public sealed class ItemBaseMap : ClassMap<ItemBase>
{
    public ItemBaseMap()
    {
        //omit the non-important parts

        Map(x => x.Status, "Status").CustomType<ItemStatus>();
    }
} 
```

现在，定期付款

```
public sealed class RecrringPaymentMap: ClassMap<RecurringPayment>
{
    public RecrringPaymentMap()
    {
        //omit the non-important parts

        References<ItemBase>(x => x.OriginalItem, "OriginalItemId");
    }
} 
```

最后，我的客户映射。

```
public sealed class CustomerMap: ClassMap<Customer>
{
    public CustomerMap()
    {
        //omit the non-important parts

        HasMany<RecurringPayment>(x => x.Recurring)
                .KeyColumn("CustomerId")
                .Where("OriginalItem.Status != 6")
                .Inverse()
                .Fetch.Subselect();
    }
} 
```

我的问题来自`HasMany`我的客户映射中的 where 子句。如果我在上面使用字符串 where 子句。我收到一个错误：

> System.Data.SqlClient.SqlException：无法绑定多部分标识符“OriginalItem.Status”。

如果我切换它并使用 linq 执行 where 子句，因为`.Where(y => y.OriginalItem.Status != ItemStatus.Deleted)`我得到一个不同的错误：

> System.InvalidOperationException：从范围“”引用的“Namespace.RecurringPayment”类型的变量“y”，但未定义

那么，如何将我的定期付款列表限制为仅包含未删除原始项目的那些（状态 6）？

# c# - 如何跨 AppDomains 发送 XElement 对象

> ID：12516382
> 
> 赞同：1
> 
> 时间：2012-09-20T15:55:37.683
> 
> 标签：c#, appdomain

我有一个从不同的 dll 文件加载外部程序集的应用程序。我正在将程序集加载到之前创建的另一个域。所有程序集都返回 XElement 对象，我需要将此对象用于主 AppDomain 中的其他方法，但 XElement 对象没有 Serializable 属性，这就是我无法按原样发送此对象的原因。从外部库中获取 XElement 对象非常重要。我尝试为此使用序列化，但每次我都失败了。

我尝试创建一些包装类。此类仅从 XElement 创建流，我尝试在主域中从该流中读取，但当时该流已关闭。

如果有人能帮我解决这个问题，我会很高兴。先谢谢了。

```
private XElement CallModule(string modulePath, string moduleName, 
  Dictionary<string, string> parameters)
{
  AppDomainSetup moduleDomainSetup = new AppDomainSetup();
  moduleDomainSetup.ApplicationBase = AppDomain.CurrentDomain.RelativeSearchPath;
  AppDomain moduleDomain = 
    AppDomain.CreateDomain("moduleDomain", null, moduleDomainSetup);

  try
  {
     Module remoteobj =  (Module)moduleDomain.CreateInstanceFromAndUnwrap(
       HttpContext.Current.Request.MapPath(modulePath),
       moduleName + "." + moduleName);
     Module.WrappedStream remoteResult = 
       remoteobj.Execute(queryString["command"], parameters);

     XElement res = XElement.Load(remoteResult.Stream);
     return res;
  }
  catch (Exception ex)
  {
    throw ex;
  }
  finally
  {
    AppDomain.Unload(moduleDomain);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:01:38.453

您可以使用[XElement.Save](http://msdn.microsoft.com/en-us/library/bb538479.aspx)将其保存到 TextWriter 或 Stream

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:17:04.823

您不能使用 XElement 跨 AppDomain 边界。潜在原因 - XElement 可以表示必须跨 AppDomain 边界编组的巨大对象树/大量数据。

虽然您可以让您的代码工作（即通过保存到流和重新加载），但这可能不是最好的主意。您将丢失元素（即父级）的上下文，并且您可能会无意中序列化/反序列化大量数据。考虑以这样一种方式进行重构，即在创建 XElement 的新 AppDomain 中处理 XElement 的数据，然后将自定义对象（可序列化或通过 ref 编组）返回到主 AppDomain。

笔记：

*   我假设您的示例代码只是示例，创建/拆除 AppDomain 以调用单个方法并不是地球上最快的事情。如果它是一次性操作可能完全没问题，但如果它以任何非平凡的频率重复，请确保检查性能是否符合您的目标。
*   你不需要`catch`/`throw`如果你只需要`finally`（再次假设实际代码超过`throw`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:28:17.873

```
Module remoteobj =  (Module)moduleDomain.CreateInstanceFromAndUnwrap(
       HttpContext.Current.Request.MapPath(modulePath),
       moduleName + "." + moduleName);
     Module.WrappedStream remoteResult = 
       remoteobj.Execute(queryString["command"], parameters);

     XElement res = XElement.Load(remoteResult.Stream);
     return res; 
```

与其尝试序列化 XElement，是否可以序列化 modulePath、moduleName 和参数，然后使用 modulePath、moduleName 和参数重新创建 XElement 对象。

你也可以用命令模式试试这个吗？

# php - 我相信 jquery 增量导致错误的数字被插入到数据库中

> ID：12516387
> 
> 赞同：2
> 
> 时间：2012-09-20T15:55:56.247
> 
> 标签：php, jquery

我希望在数据库表中显示正确的问题编号，但问题是它通过 +1 显示不正确的问题编号。

假设我有 4 行，我在第 2 行和第 4 行使用文件输入来上传文件，那么这意味着问题编号应该是 2 和 4，这意味着表格应该如下所示：

```
ImageId    SessionId  QuestionId
01               AAA        2
02               AAA        4 
```

但相反，它的问题编号只加了 1，这意味着它的显示如下：

```
ImageId    SessionId  QuestionId
01               AAA        3
02               AAA        5 
```

我认为问题在于我没有正确增加问题编号。谁能看到我在下面的代码中做错了什么，它插入了错误的问题编号？

下面是代码：

```
var qnum = 1; //question number starts at 1
var qremain = <?php echo (int)$_SESSION['textQuestion']; ?>; //the full number of questions

var $qid = $("<td class='qid'></td>" ).text(qnum);
var $image = $("<td class='image'></td>");    

var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
        "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "<label><input type='button' name='imageClear' class='imageClear' value='Clear File'/></label>" +
    "</p></form>"); 

$tr.append($qid);
$tr.append($image);

$('.num_questions').each( function() {

    var $this = $(this);

    var $questionNumber = $("<input type='hidden' class='num_questionsRow'>").attr('name',$this.attr('name')+"[]")
                   .attr('value',$this.val());

    $qid.append($questionNumber);                             

    ++qnum;
    $(".questionNum").text(qnum);
    $(".num_questions").val(qnum);

    --qremain;
    $(".questionRemain").text(qremain);
}); 
```

`$('.num_questions').each( function() {`工作是这样的：

*   当用户打开页面时，qnum（问题编号）从顶部的“1”开始
*   当用户添加表格行时，它将从顶部获取问题编号“1”并将其显示在添加的行中，并且顶部的 qnum（问题编号）递增，因此它现在状态为 2
*   当用户添加另一行时，它将从顶部获取问题编号“2”并将其显示在添加的行中，并且顶部的 qnum（问题编号）递增，因此现在显示 3。
*   等等等等……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:02:48.237

为什么不开始`var qnum = 0;`呢？大多数增量功能都可以！

**编辑**

您`++qnum`在使用`.text`和`.val`显示行中的值之前递增。之后尝试递增。您的每个功能都将以：

```
$(".questionNum").text(qnum);
$(".num_questions").val(qnum);
++qnum;

$(".questionRemain").text(qremain);
--qremain; 
```

# android - Android Accelerometer 正在输出 Null（零）值

> ID：12516393
> 
> 赞同：0
> 
> 时间：2012-09-20T15:56:17.903
> 
> 标签：android, null, return, accelerometer, acceleration

嘿，伙计们，我目前正在开展一个项目，该项目将访问加速度计并将其绘制成我的代码当前无法正常工作的情况，我不确定原因，任何帮助将不胜感激。

该程序需要记录数据 30 秒，然后输出一个图表，但它始终为所有 3 个轴输出 0 值。

编码：

```
public class AccelerometerData extends Activity implements SensorEventListener {

public float _x;
public float _y;
public float _z;

boolean senseA = false; 

int Time = 30;
int samplerate=10;
int sampleSize=(Time*1000)/samplerate;
public double[] X = new double[sampleSize];         
public double[] Y = new double[sampleSize];
public double[] Z = new double[sampleSize];

Sensor accelerometer;
SensorManager sm;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    sm=(SensorManager)getSystemService(SENSOR_SERVICE);
    accelerometer=sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    sm.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_FASTEST);

    final Timer updateTimer = new Timer();
    updateTimer.scheduleAtFixedRate(new TimerTask(){
        public void run(){
            if (senseA= true){
                for (int i = 0; i < sampleSize; i++){
                    X[i] = _x;                                          
                    Y[i] = _y;
                    Z[i] = _z;                                                  
        }

            }                                                       
        }
    }, 0, samplerate);

  }

public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub

}

public void onSensorChanged(SensorEvent event) {
    // TODO Auto-generated method stub
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER){
        _x = event.values[0];
        _y = event.values[1];
        _z = event.values[2];
        senseA = true;
        }

} 
```

}

输出值如下：

```
AccelerometerData data= new AccelerometerData();

double[] dataX =  data.X;   

double[] dataY =  data.Y;

double[] dataZ =  data.Z;

int length = data.sampleSize; 
```

提前感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:33:06.833

您从加速度计读取的代码看起来不错。

但是，您无法启动 Activity

```
AccelerometerData data= new AccelerometerData(); 
```

相反，您可以使用 Intent 启动 Activity，例如

```
startActivity(new Intent(this, AccelerometerData.class)); 
```

此外，您存储加速度计值的方式看起来很假。我假设您想将第 i 个读数存储在 X、Y、Z 数组中的第 i 个位置。相反，您正在使用最新值覆盖数组的所有元素。

# asp.net-mvc - 为什么在创建自定义 MediaTypeFormatter 时出现“无法更改访问修饰符”

> ID：12516394
> 
> 赞同：0
> 
> 时间：2012-09-20T15:56:24.247
> 
> 标签：asp.net-mvc, mediatypeformatter

我试图创建一个自定义`MediaTypeFormatter`.

但是编译的时候报这个错误：

```
cannot change access modifiers when overriding 'public' inherited member 
'System.Net.Http.Formatting.MediaTypeFormatter.CanReadType(System.Type) 
```

如何在不覆盖`CanReadType` `CanWriteType`、`ReadFromStreamAsync`和的情况下创建一个`WriteToStreamAsync`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:57:51.817

[`CanReadType`](http://msdn.microsoft.com/en-us/library/system.net.http.formatting.mediatypeformatter.canreadtype%28v=vs.108%29.aspx)并且[`CanWriteType`](http://msdn.microsoft.com/en-us/library/system.net.http.formatting.mediatypeformatter.canwritetype%28v=vs.108%29.aspx)是抽象方法，因此您必须重写它们才能创建自定义媒体类型格式化程序。只要确保在覆盖它们时不要更改公共的访问修饰符，因为错误消息告诉您。您可能制作了它们`protected`或其他东西：

```
public override bool CanReadType(Type type)
{
    throw new NotImplementedException();
}

public override bool CanWriteType(Type type)
{
    throw new NotImplementedException();
} 
```

# ajax - 如何从 p:dataTable 本身对 p:dataTable 进行 ajax 更新？

> ID：12516397
> 
> 赞同：7
> 
> 时间：2012-09-20T15:56:36.867
> 
> 标签：ajax, jsf-2, datatable, primefaces

```
<h:form id="formId">
   <p:wizard id="wizardId">
      <p:tab id="tabId">
         <p:dataTable id="tableId">
           <p:column>
             <h:commandLink value="remove" update=""/>
           </p:column>
         </p:dataTable>
      </p:tab>
   </p:wizard>
</h:form> 
```

我只需要更新`<p:dataTable>`没有整个表格。我尝试使用`@form`, `@parent`, `:formId:wizardId:tabId:tableId`，但它们都没有按我的意愿工作。当我使用`@form`时，它正在检查我不需要做的验证。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T16:48:16.470

首先，这确实不会与 a 一起使用`<h:commandLink>`，仅仅是因为它根本不支持该`update`属性。也许您实际上打算使用`<p:commandLink>`?

一旦你修复了`<h:commandLink>`a `<p:commandLink>`，然后前往这个答案：[如何找出组件的客户端 ID 以进行 ajax 更新/渲染？找不到从“bar”引用的表达式“foo”的组件，](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)以了解如何在 JSF ajax 中引用组件。

阅读该答案后，您应该发现数据表位于此特定代码片段中，由`:formId:tableId`. 因此，总而言之，应该执行以下操作：

```
<p:commandLink value="remove" update=":formId:tableId" /> 
```

请注意，在 PrimeFaces 3.3 之前，`<p:dataTable>`在某些复杂的 UI 组合中的 ajax 更新中存在一个错误。这在 PrimeFaces 3.4 中已[修复。](http://blog.primefaces.org/?p=2119)如果您确实遇到了这个问题并且无法升级到 PrimeFaces 3.4，那么您需要将表格包装在一些中`<h:panelGroup id="tablePanelId">`，然后使用`update=":formId:tablePanelId"`。

# jquery - function(){ 和 function(e){ 之间的区别

> ID：12516398
> 
> 赞同：3
> 
> 时间：2012-09-20T15:56:51.973
> 
> 标签：jquery

function(){ 和 function(e){ 有什么区别？在整个网络上，我在很多地方都看到过，例如，

`$('element').bind(function(){});`

和

`$('element').bind(function(e){});`.

但是谁能清楚地区分这一点？这样我就可以理解了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T15:58:23.547

我认为[文档](http://api.jquery.com/bind/)很好地解释了它。两者都可以接受，但如果您需要访问[事件](http://api.jquery.com/category/events/event-object/)对象，那么您应该传递该参数。否则，它们在功能上是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T15:58:58.087

不同之处在于事件对象被传递给事件函数。**[您可以在此处](http://api.jquery.com/category/events/event-object/)**找到事件对象的详细信息

*   `$('element').bind(function(){})`不提供其中的事件对象。

*   `$('element').bind(function(e){})`提供事件对象可用于确定 e.target 导致事件的源，并提供 stopPropagation() 等方法。

**[现场演示](http://jsfiddle.net/rajaadil/yQGWa/1/)**

在现场演示中，您将无法在没有事件对象的情况下获得被点击的 td 的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:59:05.897

第二种形式允许您使用与事件关联的[Event 对象。](http://api.jquery.com/category/events/event-object/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T15:59:09.590

`e`只不过是从调用代码（jQuery）传递给处理程序的事件对象。但是您可以选择是否要在处理程序中使用它。

基本上它是可以使用的，但是是否将它包含在你的处理函数中取决于你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T15:59:10.680

实际上没有区别，除了您将能够访问第二条语句中的“e”对象，它是发送者对象（导致函数被激活的元素）。

# maven - 使用 Maven 2 生成 Websphere 7 存根

> ID：12516408
> 
> 赞同：1
> 
> 时间：2012-09-20T15:57:39.603
> 
> 标签：maven, maven-2, websphere, stubs

有谁知道如何使用 Maven 2 为 websphere 7 生成 rmi 存根？我找到了一个 websphere 6 maven 插件，但不确定它是否兼容并且它已经很旧了。

# java - Java 类名中的 $ 有什么作用

> ID：12516412
> 
> 赞同：11
> 
> 时间：2012-09-20T15:57:47.327
> 
> 标签：java, class, gson

我最近看到了谷歌库 Gson 的源代码，看到了一些非常奇怪的东西（IMO）。在 com.google.gson.internal 包中有 2 个以“$”开头的类。

例如

```
public final class $Gson$Types { ... } 
```

美元符号对开发有影响，还是只是对外部开发人员说“请不要使用，因为它是一个内部类”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T16:01:05.897

您可以在标识符中使用任何货币符号或连续字符。

通过使用 $，它表明它是生成的，例如由构建生成的，或者仅供内部使用。

[Java 代码中特殊字符的用途](http://vanillajava.blogspot.co.uk/2012/08/uses-for-special-characters-in-java-code.html)

[隐藏代码](http://vanillajava.blogspot.co.uk/2012/09/hidden-code.html)

如果您与生成的类发生冲突，它只会导致问题，例如

```
class A {
     class B {
     }
}
class A$B {
} 
```

报告

```
error: duplicate class: A.B 
```

编译器生成的类不以 a 开头，`$`这可能是这样做的原因。

在 Windows 7 上，可以出现在类中的特殊字符是

```
public static void main(String... args) throws IOException {
    for (char ch = 0; ch < Character.MAX_VALUE; ch++) {
        if (Character.isJavaIdentifierStart(ch) && !Character.isLetter(ch))
            System.out.println("interface " + ch + " { }");
    }
}

interface $ { }
interface _ { }
interface ¢ { }
interface £ { }
interface ¤ { }
interface ¥ { }
interface € { } 
```

Java 允许使用其他特殊字符，但不支持作为文件名。这可能取决于操作系统，也可能取决于语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:00:47.317

从编译器/运行时的角度来看，它只是一个构成名称一部分的字符，例如 the`G`或`s`. 它没有任何特定的语义含义。

但是，[语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)确实暗示您应该避免`$`自己在标识符中使用该字符：

> 标识符是 Java 字母和 Java 数字的无限长度序列，其中第一个必须是 Java 字母。
> 
> ...
> 
> “Java 字母”包括大写和小写 ASCII 拉丁字母`A`- `Z`( `\u0041`- `\u005a`) 和 az ( `\u0061`- `\u007a`)，以及出于历史原因的 ASCII 下划线 ( `_`, or `\u005f`) 和美元符号 ( `$`, or `\u0024`)。该`$`字符应仅用于机械生成的源代码中，或者很少用于访问遗留系统上预先存在的名称。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T16:34:26.513

不，这是非常错误的，谷歌不应该这样做。$ 符号专门保留为嵌套类中的分隔符。许多代码，包括 JDK，都依赖于这个约定（几乎每个人都遵守）。谷歌顽皮的命名习惯会破坏这些代码。

# database - 是否可以使用 Couchbase 在内存中预加载/预缓存数据？

> ID：12516417
> 
> 赞同：1
> 
> 时间：2012-09-20T15:57:56.310
> 
> 标签：database, caching, memory, preload, couchbase

我们假设我们有 16GB 的信息，我们可以使用大约 8GB 的​​内存。

该信息被划分为子集。这些子集中的每一个都代表一种货币（美元、欧元等）。存储的数据只是过去 5 年的键值对（time_in_ms-currency 价格）。

我们将拥有大约 80 种不同的货币，并且我们知道哪些货币会被要求最多：美元、欧元等。还有其他一些很少被要求的货币。

我读过一些关于 Couchbase 预热的内容，但它似乎会影响数据库的所有数据。

是否可以在 couchbase 中选择性地预加载我们想要的数据（美元、欧元 - 最流行的货币）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:56:54.717

我看到三个明显的步骤：

*   创建具有 8GB 内存配额的存储桶
*   加载所有数据。在这种情况下，您将有相当低的“活跃文档居民比率 %”，显然低于 50%
*   一旦读取了最常用/请求的数据，couchbase 就会为您将其放入内存中。这听起来像手动预热，但它会有所帮助。亚毫秒级的延迟值得这样做。否则，您的用户会为您这样做。

# javascript - 调用之间的Javascript清除堆栈？

> ID：12516424
> 
> 赞同：0
> 
> 时间：2012-09-20T15:58:22.463
> 
> 标签：javascript

我对这段代码有一个奇怪的问题

```
Moonbeam.Input.KeyboardState = function Moonbeam_Input_KeyboardState() {
    this._keys = new Array(2);
    this._resetKeys(); 
    } 

    Moonbeam.Input.KeyboardState.prototype = {

    _resetKeys: function Moonbeam_Input_KeyboardState$_resetKeys() {
        this._keys.clear();
    },

    _SetKeys: function Moonbeam_Input_KeyboardState$_SetKeys(keysPressed) {
        this._resetKeys();
        this._keys = keysPressed;
    }
} 
```

我调用 _SetKeys 函数并传入一个值，在 this._resetKeys(); KeysPressed 包含值，在 this._keys = KeysPressed 行上，从调用 _resetKeys() 返回后，keysPressed 不包含值。

这不是我所期望的行为，但 javascript 不是我的专长。

谁能告诉我这是我做错了什么？

这就是 javascript 的工作方式吗？如果是，我看不出你如何进行递归。

我也尝试添加行 var _keysPressed = keysPressed; 在 _SetKeys 函数中调用 this._resetkeys() 之前，但这也失去了它的价值。

在调用另一个函数期间如何让我的值保持不变？

斯图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:10:11.450

首先，代码有点多余。这是代码的简化版本，带有工作演示。

[http://jsfiddle.net/qz7q6/](http://jsfiddle.net/qz7q6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:33:45.120

当您将数组（或对象参数）传递给函数时，它不会被复制，函数接收对该数组的引用。当你这样做时`this._keys = keysPressed;`，`_keys`包含相同的引用。当您稍后执行时`this._keys.clear();`，您正在修改该数组。

我怀疑正在发生的事情是您使用`_setKeys()`与上一次调用相同的数组进行调用。因此，当它调用时`this._resetKeys()`，它会清除该数组。

您要么需要根据需要创建新数组，要么在将它们作为参数接收时复制它们，或者将它们作为值返回。

# symfony - 为子域配置路由 - Symfony2

> ID：12516428
> 
> 赞同：0
> 
> 时间：2012-09-20T15:58:29.890
> 
> 标签：symfony, routing, subdomain

我试图让我的网页有两个子域，我想知道如何配置路由以将不同的捆绑包分配给子域：

```
www.my-web-page.com        =================>    DummyDemoBundle
customer.my-web-page.com   =================>    DummyCustomerBundle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:56:39.647

主机路由从 SF 2.2 开始可用。请检查一下。虽然我正在寻找以子域为变量的路由。这个剂量似乎还没有得到支持。

# android - 如何在具有向后兼容性的 iOS6 中从完整模式网站打开本机地图

> ID：12516429
> 
> 赞同：1
> 
> 时间：2012-09-20T15:58:29.593
> 
> 标签：android, html, ios, google-maps, ios6-maps

需要从移动网站打开 iPhone 和/或 android 手机上的本地地图应用程序。目前，我只需打开 maps.google.com 链接即可完成此操作。

自从 iOS6 发布以来，这似乎不再起作用。是否有任何标准化或至少众所周知的方法来完成在大多数平台上打开原生地图？

如果没有，我可以检查移动操作系统在每部手机上做一些特殊的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T06:09:33.390

为了支持在最新的 iOS 版本中打开本机地图应用程序，您必须检查设备类型，因为 iOS 6 设备会将用户定向到谷歌地图网站，而不是他们的本机应用程序。

检测设备的最佳方法是通过 User-Agent HTTP 标头。整个网络都记录了前端 javascript 设备检测或后端设备检测。如何进行检测取决于您自己的实现。

您可以继续使用 maps.google.com 来处理除 iOS 6 以外的所有内容，我相信 Apple 已在其[Map Links](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)文档中记录了他们的 iOS6 Maps URL 方案。

苹果地图链接的一个例子是

```
<a href="http://maps.apple.com/maps?daddr=San+Francisco,+CA&saddr=cupertino">Directions</a> 
```

# php - 使用表单上传服务器文件

> ID：12516430
> 
> 赞同：1
> 
> 时间：2012-09-20T15:58:37.553
> 
> 标签：php

我有一个非常简单的表单，但我的情况不同。我不想从计算机浏览。我的文件位于我的服务器上，所以我如何浏览表单字段中的服务器文件。如果我无法浏览，我可以提供任何位置以便它可以再次上传到我的服务器，但在不同的位置和所有不同的参数，所以我不想使用移动方法。

我不想像使用远程 url 方法那样使用远程 url 上传方法我无法检查文件类型，如果可以使用 curl 进行检查，那么我的表单处理脚本也不接受该链接，因为它不是有效的文件格式。任何想法排序出这个问题会有很大帮助

我不希望用户使用表单提交这些文件

```
 <form action="fup.php" enctype="multipart/form-data" method="POST">
  File to upload: <input type="file" name="upfile"><br>
  Notes about the file: <input type="text" name="note"><br>
  <br>
  <input type="submit" value="Press"> to upload the file!
   </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:09:40.153

你不能。

如果您希望用户实际将文件从您的服务器复制/移动到同一台机器的另一个路径，您必须：

1.  使用浏览器对话框提示用户，让他们从远程目录中选择文件；
2.  将此类路径发送到您的服务器，您将在其中验证数据[例如，仅接受来自给定目录的存档，以免与文件系统混淆]；
3.  一旦您选择了路径，您可以检查 MIME 类型 / 等，然后复制/移动存档并用操作结果回复客户端。

如果您的脚本“不能接受链接”，请更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:36:52.487

这一点我还不清楚。我不确定您为什么要使用 HTML 来执行此操作，而不是直接在服务器上修改文件。

我也不确定您在每个文件上修改了哪些详细信息：

*   你在修改什么样的细节？
*   这些详细信息存储在哪里？
*   如果文件是通过表单提交上传的，您将如何修改这些详细信息？

作为一个起点，让我给你一个我最初建议的例子，然后你可以确切地告诉我为什么它不适合你。

**fup.php：**

```
<?php
    if ($_POST["submit"] === "Press")
    {
        $file = {$_POST["upfile"]};
        $notes = $_POST["note"];

        $path = "/path/to/folder";

        // EDIT: Checking to make sure extension is mp3
        if (strtolower(pathinfo("{$path}/{$file}", PATHINFO_EXTENSION)) !== "mp3")
            sys_back("Unavailable mp3 format");

        `cp {$path}/{$file} /path/to/new/folder/{$file}`;
        // do something with $notes
    }
?>
<form action="fup.php" method="POST">
    File to upload:
    <select name="upfile">
<?php   $files = scandir("/path/to/folder");
        foreach ($files as $file)
            echo "\t\t<option>{$file}</option>\n";
?>  </select><br />
    Notes about the file: <input type="text" name="note"/><br />
    <br />
    <input type="submit" name="submit" value="Press" /> to upload the file!
</form> 
```

由于您提到您将逐个浏览 10,000 个文件，因此默认情况下自动选择下一个文件的下拉列表可能会有所帮助，因此您不必每次都查看 10,000 个项目列表时间。您可以通过将`foreach`循环更改为更像这样的方式来做到这一点：

```
$selectNext = false;
foreach ($files as $file)
{
    echo "\t\t<option". ($selectNext ? " selected" : "") .">{$file}</option>\n";
    $selectNext = ($file === $_POST["upfile"]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:24:54.317

您可以使用浏览服务器图像`classic file manager`

我也将它用于相同的目的

[http://github.com/simogeo/Filemanager/archives/master](http://github.com/simogeo/Filemanager/archives/master)

# javascript - 从表单中清除选中的单选按钮值

> ID：12516433
> 
> 赞同：0
> 
> 时间：2012-09-20T15:58:43.337
> 
> 标签：javascript, jquery

我有这段代码代表几个单选按钮。

```
<label>Tipologia Pdv: </label>
<input type="radio" name="tipologia_pdv" id="tipologia_pdv" value="Iper" style="width:40px;" /><span > Iper</span>
<input type="radio" name="tipologia_pdv" id="tipologia_pdv"
value="Super" style="width:40px;" /><span > Super</span> 
```

然后，我有这个清除值的代码，但它不适用于单选按钮：

```
 $("#tipologia_pdv").val(''); 
```

现在，我将如何在此处清除选中的值？我用这个分配检查的值，它可以工作：

```
var js_tipologia_pdv = $('input:radio[name=tipologia_pdv]:checked').val(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:00:57.020

```
$('#tipologia_pdv').attr('checked', false); 
```

道具也可以

```
$('#tipologia_pdv').prop('checked', false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:15:31.897

我看到两个单选按钮具有相同的 ID。ID应该是唯一的..

选中的属性与 val 属性不同。要取消选中它，您必须这样做

```
var js_tipologia_pdv = $('input:radio[name=tipologia_pdv]:checked');

 js_tipologia_pdv.prop('checked', false); 
```

检查[小提琴](http://jsfiddle.net/sushanth009/AWuWe/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:01:52.950

```
$("#tipologia_pdv").prop("checked", false); 
```

[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

# scala - Play framework - Scala，Method被定义了两次

> ID：12516436
> 
> 赞同：6
> 
> 时间：2012-09-20T15:58:51.620
> 
> 标签：scala, playframework, playframework-2.0, playframework-2.1

我想将多个 URL 映射到一个重载的控制器方法中，如下所示。但我收到错误“方法帐户被定义两次”。那么，是否有可能在 scala - play 框架中做到这一点？

```
GET     /order/:userId             controllers.Application.account(userId)       
GET     /order/:userId/:date       controllers.Application.account(userId, date) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T16:44:22.030

由于反向路由的工作方式，您需要指定两个参数才能`account`像这样使用。这是一个有效的示例：

在 Application.scala 中：

```
def account(userId: String, date: String) = Action {
  Ok(userId + " and " + date)
} 
```

在路线：

```
GET /order/:userId           controllers.Application.account(userId, date="")
GET /order/:userId/:date     controllers.Application.account(userId, date) 
```

# apache - 带有 CA 捆绑包的 apache 工作人员出现问题（错误（20）：无法获取本地颁发者证书）

> ID：12516446
> 
> 赞同：2
> 
> 时间：2012-09-20T15:59:22.950
> 
> 标签：apache, ssl-certificate, httpd.conf, pki

在我们的设置中，我们有数千名用户使用 apache（httpd-2.2.3-65.el5_8，mod_ssl-2.2.3-65.el5_8）在运行 rhel 5.8 的 linux 服务器上运行。我们的用户使用 PKI 登录系统。服务器上有 5 个 CA。当我们使用 apache prefork 模型时，一切正常。但是，当我们切换到 worker 模型时，大多数请求都可以正常处理，但是我们在`ssl_error_log`文件中遇到了很多错误，例如：

“[错误] 证书验证：错误 (20)：无法获取本地颁发者证书”

如果我们使用单个 CA 运行工作模型，我们不会收到此错误。使用 prefork 模型时不会出现此错误。带有 worker 的 CA 捆绑不会发生这种情况`ThreadsPerChild=1`。只有 worker ( `ThreadsPerChild>1`) 与 ca 捆绑包而不是单个 CA 的组合会导致这种情况发生。

这是我们在 apache 配置文件中的 worker 配置：

```
<IfModule worker.c>
ServerLimit     250
StartServers         20
MaxClients         2050
MinSpareThreads     20
MaxSpareThreads     50
ThreadsPerChild     10
MaxRequestsPerChild  0
</IfModule> 
```

并且 prefork 设置是：

```
<IfModule prefork.c>
StartServers       8
MinSpareServers    5
MaxSpareServers   20
ServerLimit     2048
MaxClients      2048
MaxRequestsPerChild  4000
</IfModule> 
```

与使用 prefork 相比，使用 worker 运行多个 CA 是否存在已知问题，或者我们是否需要正确调整 worker 配置以获得所需的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:05:39.370

我敢打赌它是特定于工人的，而不取决于配置，而是工人的设计理念。有可能它是用 apache 2.4 修复的。您是否将整个链与每个证书保存在同一个文件中，或者您在单独的文件中使用虚拟主机证书和 CA 链？AFAIR 可以对 CA 证书使用两个指令，或者其他单个指令指向包含 vhost 证书和链的文件。

总而言之 - 如果有帮助，它将重新组织证书文件中的数据而不是配置。无论如何，您使用单独的 CA 证书很奇怪，您可能应该解决它，创建一个最高级别的 CA（例如提供者（您的）CA），并为低于某个级别的各种网站颁发证书，可能在链的中间使用 CA . 这样一来，您就有可能撤销特定 CA 的所有证书——这就是专业、大型认证公司和组织通常采用的方式。当您报告使用单线程/单 CA 时未显示问题时，我想您可以这样做。

个人祝贺使用 X509 身份验证/授权，很好有人使用它:)

# javascript - 我怎样才能拥有一个表现得像锚但不是锚的 HTML 元素？

> ID：12516447
> 
> 赞同：2
> 
> 时间：2012-09-20T15:59:28.690
> 
> 标签：javascript, jquery, html, anchor

简而言之，我有一个希望用户能够点击的大框。当他们单击它时，它会导航到某个 URL。所以...一个链接。

（这个框里面确实有一个带有相应 HREF 的链接，但我希望*整个框*都可以点击）

有几个原因，让实际的锚点和盒子一样大对我的 HTML 布局来说真的很乱，而且我在盒子里有一堆块等等，所以我试图找到一个替代方案。

现在，我正在做的是：

```
$(box).click(function(){
  window.location.href = $(this).find("a.lnkWhatever").attr("href");
}); 
```

哪个有效......有点......但它不是一个链接，你不能按Ctrl +单击它以在新选项卡中打开它，右键单击不会为你提供通过链接获得的不错选项等。 .

我*可以*尝试看看当他们单击时是否碰巧按下了 Ctrl，但我觉得我总是会有一些令人憎恶的东西，以某种奇怪的方式或其他方式工作得不好......

有没有更好的方法来做到这一点，我错过了？

注意：我知道我可以将链接设置为一个大盒子，通常我会这样做，但在这种情况下，它*确实*有问题，我不需要这样做

谢谢！
丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:09:40.530

你总是可以把`a`元素变成盒子。使用 css 显示它块。[这是一个 JSFiddle 演示](http://jsfiddle.net/jasonmerino/y9Qxa/)。

注意：仅单击演示不会像代码所示那样加载 Google。JSFiddle 在这里做了一些奇怪的事情，但是如果你 Ctrl + 单击它，它的行为与预期的一样。

或者！（因为你说这样做有问题）

您可以捕获`click`和`contextmenu`事件，找出触发了哪个事件并基于此更改操作。您可以使用一些类似于[此演示](http://jsfiddle.net/jasonmerino/zKCZF/3/)的代码来完成此操作。

您将附加到锚点的 JavaScript 如下所示：

```
$('a').on('click contextmenu', function (event) {
    if (event.type === 'contextmenu') {
        //execute what code you want
    }
    else {
        // this would automatically navigate to your link
        // so you could theoretically leave off the else portion
        // it just seemed like a nice place to leave this explanation
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:16:50.743

如果框是相对定位的，您可以创建一个绝对定位的锚点作为 div 内的第一个元素，并将其大小设置为 100%。[例子](http://jsfiddle.net/GQfVC/)

编辑 - 固定链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T11:42:39.030

在内部锚点上尝试设置：

```
display: block; 
width: 100%;
height: 100%; 
```

可能您可能还需要`position: relative;`在父容器上设置

见[JsFiddle](http://jsfiddle.net/5n5536n1/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:35:15.630

你可以试试这样的

**JS**

```
$(document).ready(function() {
    $('#mydiv').click(function(e) {
        var a = $(this).find('a');
        if (e.ctrlKey) {
            a.attr('target', '_blank');
        }
        a[0].click();
    });
})​ 
```

**HTML**

```
<div id='mydiv'>
        hi world <br />
        <a href='http://www.google.com'>Google</a>
        Hello <br />
        blah
    </div>​ 
```

[演示](http://jsfiddle.net/6uHhu/)

但是我不确定是否`.click()`是跨浏览器。您可能需要考虑不同的浏览器

# pyqt - Pyinstaller：如何为简单的 Pyside + QML 应用程序包含 QML 文件？

> ID：12516448
> 
> 赞同：3
> 
> 时间：2012-09-20T15:59:32.343
> 
> 标签：pyqt, pyqt4, qml, pyinstaller, qt-quick

我无法使用 Pyinstaller 生成 exe。我最大的问题应该是“包括 qml 文件”。我尝试了很多，但仍然失败。希望有人能告诉我应该如何编写规范文件以包含 QML。

一般来说，我想要的是从我的 Pyside+QML 应用程序创建一个 Windows exe。但是怎么做？

主文件

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import sys
from PySide.QtCore import *
from PySide.QtGui import *
from PySide.QtDeclarative import QDeclarativeView

# Create Qt application and the QDeclarative view
app = QApplication(sys.argv)
view = QDeclarativeView()
# Create an URL to the QML file
url = QUrl('view.qml')
# Set the QML file and show
view.setSource(url)
view.setResizeMode(QDeclarativeView.SizeRootObjectToView)
view.show()
# Enter Qt main loop
sys.exit(app.exec_()) 
```

视图.qml

```
import QtQuick 1.0

Rectangle {
    width: 200
    height: 200
    color: "red"

    Text {
        text: "Hello World"
        anchors.centerIn: parent
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-04T02:36:56.927

不确定 PySide，但从 2.1 开始的 PyInstaller 支持 PyQt5。我假设一般程序是相似的。

对于 PyQt5，将 qml 文件放入资源文件中，然后使用 pyrcc5 (pyside-rcc) 进行编译。然后导入生成的 python 模块，PyInstaller 会将其视为任何其他模块。

也可以直接包含 qml 文件。通过做这样的事情：

```
extrafiles = [('myfile.qml', os.path.join('path', 'to', 'myfile.qml'), 'DATA')]

...

coll = COLLECT( exe,
               a.binaries + extralibs,
               a.zipfiles,
               a.datas + extrafiles,
               ... 
```

您可能还需要从 .qml 返回的 qml 目录中打包 qml 库`qmake -query QT_INSTALL_QML`。

# facebook - 如何将外部脚本加载到我的 Chrome 扩展程序中？

> ID：12516452
> 
> 赞同：3
> 
> 时间：2012-09-20T15:59:50.787
> 
> 标签：facebook, google-chrome-extension, content-security-policy

我正在尝试从我的 Chrome 扩展程序中弹出一个带有 Facebook 登录示例代码的选项卡。到目前为止，我在这个例子中使用了直接的教程代码。

该选项卡正确打开，但是，由于跨站点安全策略问题，facebook 的 javascript 无法加载，而且我也收到了内联脚本错误 - 这似乎很奇怪（除非动态添加的元素具有触发错误的内联脚本信息？）

我在哪里可以学习如何正确地做这种事情？

错误：

```
Refused to load script from 'https://connect.facebook.net/en_US/all.js' because of Content-Security-Policy.
Refused to execute inline script because of Content-Security-Policy. 
```

背景.js：

```
chrome.tabs.create({url: 'popup.html'}) 
```

popup.html: //来自 facebook api 文档的登录代码示例

```
 <head>
    <title>Facebook Client-side Authentication Example</title>
    <script type="text/javascript" src="popup.js"></script>
  </head>
  <body>
    <div id="fb-root"></div>
    <script>

    </script>

    <h1>Facebook Client-side Authentication Example</h1>
      <div id="auth-status">
        <div id="auth-loggedout">
          <a href="#" id="auth-loginlink">Login</a>
        </div>
        <div id="auth-loggedin" style="display:none">
          Hi, <span id="auth-displayname"></span>  
        (<a href="#" id="auth-logoutlink">logout</a>)
      </div>
    </div>

  </body>
</html> 
```

popup.js://facebook dev 的示例代码

```
// Load the SDK Asynchronously
(function (d) {
    var js, id = 'facebook-jssdk',
        ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {
        return;
    }
    js = d.createElement('script');
    js.id = id;
    js.async = true;
    js.src = "https://connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));

// Init the SDK upon load
window.fbAsyncInit = function () {
    FB.init({
        appId: '', // App ID
        channelUrl: '//' + window.location.hostname + '/channel', // Path to your Channel File
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true // parse XFBML
    });

    // listen for and handle auth.statusChange events
    FB.Event.subscribe('auth.statusChange', function (response) {
        if (response.authResponse) {
            // user has auth'd your app and is logged into Facebook
            FB.api('/me', function (me) {
                if (me.name) {
                    document.getElementById('auth-displayname').innerHTML = me.name;
                }
            })
            document.getElementById('auth-loggedout').style.display = 'none';
            document.getElementById('auth-loggedin').style.display = 'block';
        } else {
            // user has not auth'd your app, or is not logged into Facebook
            document.getElementById('auth-loggedout').style.display = 'block';
            document.getElementById('auth-loggedin').style.display = 'none';
        }
    });

    // respond to clicks on the login and logout links
    document.getElementById('auth-loginlink').addEventListener('click', function () {
        FB.login();
    });
    document.getElementById('auth-logoutlink').addEventListener('click', function () {
        FB.logout();
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T21:42:46.467

[http://developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)将是一个好的开始，HTML5Rocks 上[的“内容安全策略简介”也是如此。](http://html5rocks.com/en/tutorials/security/content-security-policy/)

在这种情况下，您似乎需要将[https://connect.facebook.net](https://connect.facebook.net)列入白名单；您可以通过添加`"content_security_policy": "script-src 'self' https://connect.facebook.net; object-src 'self'"`到您的`manifest.json`文件来做到这一点。

内联脚本错误可能是由于 中的空`script`标签`popup.html`，但也可能是由于 Facebook 的脚本正在注入页面。只有一种方法可以找出... :)

# .htaccess - 为空时重定向到主页

> ID：12516459
> 
> 赞同：0
> 
> 时间：2012-09-20T16:00:41.067
> 
> 标签：.htaccess, redirect

我的页面可以正常工作，但是当我遇到如下情况时：

```
www.mysite.com
www.misite.com/
www.miste.com/index.php 
```

我需要它重定向到 www.mysite.com/home/ （并将其显示给用户）。

我可以使用 .htaccess 做到这一点吗？

我的 .htaccess 文件：

```
RewriteEngine On
Options +FollowSymLinks

RewriteCond %{HTTP_HOST} !^www [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !index.php
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1/ [L,R=301]

RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ index.php?par=$1

ErrorDocument 404 index.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:19:57.487

假设您的问题中没有错别字：

```
www.mysite.com
www.misite.com/
www.miste.com/index.php 
```

并且所有三个域都指向同一个文档根。你想要这样的东西：

```
RewriteCond {HTTP_HOST} ^(www\.)?(mysite|misite|miste)\.com$ [NC]
RewriteRule ^(index\.php)?$ http://www.mysite.com/home/ [L,R=301] 
```

# javascript - jquery中的全局变量

> ID：12516460
> 
> 赞同：0
> 
> 时间：2012-09-20T16:00:42.420
> 
> 标签：javascript, jquery

在 jQuery 中是否可以创建一个设置变量的函数，然后我可以在另一个函数中访问该变量。即我需要一个可以在页面上的任何位置访问的全局变量。

例子

```
$.fn.getRedemptionID = function(){
  var myVar = data.DATA[0].item1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:02:31.443

1）全局变量不好。

2) 是的：

```
// explicit global (preferred)
$.fn.getRedemptionID = function(){
  window.myVar = data.DATA[0].item1;
}

// implicit global
$.fn.getRedemptionID = function(){
  myVar = data.DATA[0].item1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:02:26.417

只需这样做：

```
var myGlobalVar = null;

$.fn.getRedemptionID = function(){
  myGlobalVar = data.DATA[0].item1;
} 
```

然后您可以在任何地方访问 myGlobalVar :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:02:37.660

jQuery 仍然是 JavaScript，并且仍然可以像 JavaScript 一样使用。即，如果您在任何块之外声明某些内容，则它是全局的并且可以在任何地方访问。

例如

```
var global = 42;
$(document).ready(function() {
    global = $('#something').val();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:15:42.170

更好的方法是使用闭包，以下列方式保存变量值：

```
var application = (function(){
    var my_var;

    return {
        get_var: function(){
            return my_var;
        },
        set_var: function(value){
            my_var = value;
        }
    }
})();

application.set_var(34);
application.get_var; 
```

这比使用全局变量要好。

# objective-c - CDVInvokedUrlCommand 崩溃应用程序中的 NSMutableArray

> ID：12516464
> 
> 赞同：0
> 
> 时间：2012-09-20T16:00:54.740
> 
> 标签：objective-c, cordova

好的，所以在 Cordova 2.1 CDVInvokedUrlCommand.m 中有一个函数 -(void)legacyArguments 对 URL 有一定的用途。我的问题是，当变量 _arguments 设置为 nil 时，Cordova 中的代码会调用 legacyArguments，并使应用程序崩溃。尝试检查 _arguments == nil 是否总是返回 false（无论是 nil 还是有值），并且 [_arguments count] 也会使应用程序崩溃。

使应用程序崩溃的行是...

```
NSMutableArray* newArguments = [NSMutableArray arrayWithArray:_arguments]; 
```

现在要修复它，我只需要检查以确保 _arguments 不为零，但我找不到可靠的方法。也许有一种“安全”的方式来进行上述调用，或者有另一种方式来检查 _arguments，如果它为 nil 就不会导致应用程序崩溃？

编辑：因为它被要求......

```
-[__NSCFConstantString count]: unrecognized selector sent to instance 0x8ee98
2012-09-20 11:04:59.825 EESEmployee[50307:15b03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString count]: unrecognized selector sent to instance 0x8ee98'
*** First throw call stack:
(0xf4c012 0x262de7e 0xfd74bd 0xf3bbbc 0xf3b94e 0x1ad30 0x66dcd 0x665fe 0x669d9 0x26416b0 0x13e0035 0xecff3f 0xecf96f 0xef2734 0xef1f44 0xef1e1b 0x314a7e3 0x314a668 0xd165c 0x2ce6 0x2c15)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:13:14.943

遇到此错误的任何其他人，在 CDVInvokedUrlCommand 中添加检查将允许您继续调试，但要“修复”问题，您需要按照[此处](https://github.com/apache/incubator-cordova-ios/blob/master/guides/Cordova%20Plugin%20Upgrade%20Guide.md)的说明将 Cordova/Phonegap 项目的插件升级到 2.1

就我个人而言，如果它收到非法消息，我会留下检查并让它显示一条消息（而不是在不提供任何信息的情况下关闭整个应用程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:39:36.357

新命令与旧命令的用途是什么？我从...改变

```
-(void)getToken:(NSMutableArray *)arguments withDict:(NSMutableDictionary *)options 
```

对这个……

```
-(void)getToken:(CDVinvokedUrlCommand*)command 
```

然后设置一个回调ID

```
self.callbackID = [arguments pop]; 
```

由于我现在不使用参数，callbackID 在哪里？

# vba - VBA MSXML2 对象是否支持使用 PAC 文件？

> ID：12516469
> 
> 赞同：0
> 
> 时间：2012-09-20T16:01:05.873
> 
> 标签：vba, pac

我正在编写一个 VBA Excel 加载项，它使用 MSXML2 对象通过 http 检索数据。不是严格意义上的网络浏览器；它恰好在端口 80 上使用 http 协议。

我知道如果用户的 Internet Explorer 设置为使用代理服务器，那么这将自动获取他们的代理设置。

一位用户问我对“Proxy.PAC”文件的支持，我对此一无所知。
经过一番谷歌搜索，这看起来像是在浏览器级别上使用的东西。

如果用户有 PAC 文件，MSXML2 文件能否使用此信息正确引导其请求？
这是自动支持的吗？
还是我需要添加一些额外的 VBA 代码？还是 PAC 文件的概念仅适用于适当的浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:24:13.713

我实际上能够了解更多关于 PAC 文件的信息，并自己做了一个实验。看起来 MSXML2 对象实际上确实尊重 PAC 文件逻辑，所以答案是“无需采取任何措施”。

# java - java中的网格包布局

> ID：12516472
> 
> 赞同：0
> 
> 时间：2012-09-20T16:01:28.280
> 
> 标签：java, swing, gridbaglayout

我必须有问题地编辑网格包布局，结果很奇怪。
预期：
| 一个 | | 乙|
| -- | | C |
| D | | -- |

结果：
| 一个 | | 乙|
| D | | C |

A 和 C 的高度为 2 这就是 gridbag 的工作原理吗？有没有强迫它？

我的程序有两列和 n 行。它支持宽度为 2，但只有在第一列时才生效。如果在第二行，它的作用就像宽度为 1。

`gbc.gridx = 0;
gbc.gridy = 0;
gbc.gridheight = 1;
gbc.gridwidth = 1;
gbc.weighty = 1;
gbc.fill = GridBagConstraints.BOTH;
gbc.insets = new Insets(7, 7, 7, 7);
gbc.weightx = 0.5;
gbc.anchor = GridBagConstraints.NORTH;`

组件由用户添加，用户确定`width`and `height`。和值取决于添加`gridx`和`gridy`放置的其他组件。

网格袋布局适用于
*_ _
|A|B|
|_|C|
当 C 的高度为 2 时，它似乎不喜欢它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:25:44.343

现在问题已经澄清：

```
protected static final Insets entryInsets = new Insets(0, 10, 4, 10);
protected static final Insets spaceInsets = new Insets(10, 10, 4, 10);

protected void createPartControl() {
    panel = new JPanel();
    panel.setLayout(new GridBagLayout());

    int gridy = 0;
    gridy = createTextFields(gridy);
}

protected int createTextFields(int gridy) {
    JLabel a = new JLabel("A");
    a.setHorizontalAlignment(SwingConstants.LEFT);
    addComponent(panel, a, 0, gridy, 1, 2, spaceInsets,
            GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

    JLabel b = new JLabel("B");
    b.setHorizontalAlignment(SwingConstants.LEFT);
    addComponent(panel, b, 1, gridy++, 1, 1, spaceInsets,
            GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

    JLabel c = new JLabel("C");
    c.setHorizontalAlignment(SwingConstants.LEFT);
    addComponent(panel, c, 1, gridy++, 1, 1, entryInsets,
            GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

    JLabel d = new JLabel("D");
    d.setHorizontalAlignment(SwingConstants.LEFT);
    addComponent(panel, d, 0, gridy++, 2, 1, entryInsets,
            GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

    return gridy;
}

protected void addComponent(Container container, Component component,
        int gridx, int gridy, int gridwidth, int gridheight, 
        Insets insets, int anchor, int fill) {
    GridBagConstraints gbc = new GridBagConstraints(gridx, gridy,
            gridwidth, gridheight, 1.0D, 1.0D, anchor, fill, insets, 0, 0);
    container.add(component, gbc);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:02:29.957

确保您正在设置`GridbagConstraints.BOTH`您正在使用的对象的`fill`属性。`GridbagConstraints`否则，您将无法在多行上拥有组件。

```
GridbagConstraints c = new GridbagConstraints();
c.fill = GridbagConstraints.BOTH; 
```

# c# - VS 在哪里获取旧的程序集引用元数据

> ID：12516473
> 
> 赞同：2
> 
> 时间：2012-09-20T16:01:32.967
> 
> 标签：c#, dll, reference, version, .net-assembly

我尝试在 VS 中引用 dll 库，但它不断给出以下消息：（尝试加载的程序集是我根本不引用的旧版本。但它仍然保存在某个地方，它阻止我引用较新的 dll 版本）

> 无法加载文件或程序集 '......，Version=......，Culture=neutral，PublicKeyToken=............' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

它从哪里获得版本号、密钥令牌...等以便我可以更改或删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:12:09.203

编译器从参考程序集中获取 [AssemblyVersion]，该程序集位于项目的 References 节点中。显然在运行时它会找到该 DLL 的*另一个*版本。

像这样射脚的方法并不多，在您的开发机器上，您可以通过将引用的 Copy Local 属性设置为 True 来确保获得相同的版本。注意一个 .config 文件，它故意告诉 CLR 寻找其他地方。如果这发生在测试机器上，那么您部署项目的方式就有问题。如果您不知道 DLL 可能来自何处，请使用 Fuslogvw.exe 并记录所有绑定以跟踪 CLR 如何定位 DLL。

# c++ - c++ using 指令的范围

> ID：12516476
> 
> 赞同：5
> 
> 时间：2012-09-20T16:01:49.320
> 
> 标签：c++, namespaces, c++11, standards, using-directives

从 c++11 标准的第 7.3.4.2 节：

> *using-directive*指定指定命名空间中的名称可以在*using-directive*出现在*using-* directive 之后的范围内使用。在非限定名称查找 (3.4.1) 期间，名称看起来好像它们是在最近的封闭命名空间中声明的，其中包含*使用指令*和指定命名空间。[注：在此上下文中，“包含”是指“直接或间接包含”。——尾注]

第二句和第三句究竟是什么意思？请举例。

这是我试图理解的代码：

```
namespace A
{
    int i = 7;
}
namespace B
{
    using namespace A;
    int i = i + 11;
}
int main(int argc, char * argv[])
{
    std::cout << A::i << " " << B::i << std::endl;
    return 0;
} 
```

~~它打印“7 7”而不是“7 18”，如我所料。~~

抱歉打错了，程序实际上打印了“7 11”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T22:17:38.917

您的代码中的`using`语句无关紧要。在评估`B::i`初始化程序时已经在范围内。`B::i`您可以通过删除`using`语句来简单地证明这一点；您的代码应该以相同的方式编译和运行。在任何情况下， 的值`B::i`最终都是未定义的，因为它取决于未初始化的值（即`B::i`初始化器被评估时的值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T13:37:06.727

消除未定义的行为：

```
namespace A
{
    int i = 7;
}
namespace B
{
    using namespace A;
    int tmp = i + 11;
    int i = tmp;
}
#include <iostream>
int main()
{
    std::cout << A::i << " " << B::i << std::endl;
    return 0;
} 
```

该标准的含义是在线

```
 int tmp = i + 11; 
```

该名称`i`出现在“*最近的封闭命名空间中，其中包含使用指令和指定的命名空间*”；*using-directive*出现在指定`namespace B`的命名空间为`namespace A`; 最近的封闭命名空间是*全局命名空间*，因此`i`显示为`::i`. 这意味着如果名称`i`已经存在于全局命名空间中，则代码是不明确的。

对于更复杂的示例：

```
namespace A {
    namespace B {
        namespace C {
            int i = 4;
        }
    }
    namespace D {
        using namespace B::C;
        namespace E {
            int j = i;
        }
    }
} 
```

在行`int j = i`，`i`出现在 using 指令（即`A::D`）和指定的命名空间（`A::B::C`）最近的封闭命名空间中，即`A`. 因此，在`A::D`using 指令之后的 inside 以及 inside `A::D::E`，非限定名称`i`可以指`A::B::C::i`出现为`A::i`、遮蔽 any `::i`、与 any 冲突`A::i`以及被 any`A::D::i`或`A::D::E::i`(within `A::D::E`) 遮蔽：

```
int i = 1;                // shadowed by A::B::C::i appearing as A::i
namespace A {
    int i = 2;            // conflicts with A::B::C::i appearing as A::i
    namespace B {
        int i = 3;        // irrelevant
        namespace C {
            int i = 4;    // nominated; appears as A::i
        }
    }
    namespace D {
        int i = 5;        // shadows A::B::C::i appearing as A::i
        using namespace B::C;
        namespace E {
            int i = 6;    // shadows A::B::C::i appearing as A::i
            int j = i;
        }
    }
} 
```

请注意，仅仅因为名称在非限定名称查找期间*出现* `A::i`，并不意味着它确实*存在*；限定名称`A::i`将继续仅引用实际名称`A::i`（如果存在）。

# android - 从每个类别中至少选择一个？

> ID：12516485
> 
> 赞同：7
> 
> 时间：2012-09-20T16:02:14.233
> 
> 标签：android, database, sqlite, random

[SQLFiddle 链接](http://www.sqlfiddle.com/#!5/edd1b/1/0)

我有一个 SQLite 数据库，里面有一堆测试/考试问题。每个**问题**属于一个**问题类别**。

我的表如下所示：
![so_questions 表](../Images/54912754db1e3207bcb8fcd22c532518.png)

 **我要做**的目标是选择 5 个随机问题，但结果必须****至少**包含每个类别中的一个。目标是从每个类别中随机选择一组问题。**

 **例如，输出可以是问题 ID`1, 2, 5, 7, 8`或`2, 3, 6, 7, 8`或`8, 6, 3, 1, 7`。

**ORDER BY category_id, RANDOM()**
我可以通过执行下面的 SQL 从 SQLite 获取随机的问题列表，但是我如何确保结果包含来自我的每个类别的问题？

![SELECT ORDER BY category_id，随机](../Images/54d5a2457669b795406a18999f3bc167.png)

基本上，我正在寻找这样的东西[，](https://stackoverflow.com/questions/5633619/select-2-products-from-each-category-in-mysql) SQLite 版本。

我想只得到 5 个结果，但每个类别都有一个（或多个），结果集中表示所有类别。

**Bounty**
添加了赏金，因为我很好奇是否可以仅在 SQLite 中完成此任务。我可以在 SQLite+Java 中做到这一点，但有没有办法只在 SQLite 中做到这一点？:)

[SQLFiddle 链接](http://www.sqlfiddle.com/#!5/edd1b/1/0)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T21:01:25.923

答案的关键在于结果中有两种问题：对于每个类别，必须*限制*一个问题来自该类别；和一些剩余的问题。

首先，受限问题：我们只从每个类别中选择一条记录：

```
SELECT id, category_id, question_text, 1 AS constrained, max(random()) AS r
FROM so_questions
GROUP BY category_id 
```

（此查询依赖于 SQLite 3.7.11（在 Jelly Bean 或更高版本中）中引入的功能：在查询`SELECT a, max(b)`中，保证的值`a`来自具有最大值的记录`b`。）

我们还必须得到非约束问题（过滤掉已经在约束集中的重复项将在下一步发生）：

```
SELECT id, category_id, question_text, 0 AS constrained, random() AS r
FROM so_questions 
```

当我们将这两个查询与 组合`UNION`然后按 分组时`id`，我们将所有重复项放在一起。然后选择`max(constrained)`确保对于具有重复项的组，仅保留受约束的问题（而所有其他问题无论如何每组只有一条记录）。

最后，该`ORDER BY`子句确保首先出现受限问题，然后是一些随机的其他问题：

```
SELECT *, max(constrained)
FROM (SELECT id, category_id, question_text, 1 AS constrained, max(random()) AS r
      FROM so_questions
      GROUP BY category_id
      UNION ALL
      SELECT id, category_id, question_text, 0 AS constrained, random() AS r
      FROM so_questions)
GROUP BY id
ORDER BY constrained DESC, r
LIMIT 5 
```

* * *

对于较早的 SQLite/Android 版本，我还没有找到不使用临时表的解决方案（因为受约束问题的子查询必须多次使用，但不会保持不变，因为`random()`）：

```
BEGIN TRANSACTION;

CREATE TEMPORARY TABLE constrained AS
SELECT (SELECT id
        FROM so_questions
        WHERE category_id = cats.category_id
        ORDER BY random()
        LIMIT 1) AS id
FROM (SELECT DISTINCT category_id
      FROM so_questions) AS cats;

SELECT ids.id, category_id, question_text
FROM (SELECT id
      FROM (SELECT id, 1 AS c
            FROM constrained
            UNION ALL
            SELECT id, 0 AS c
            FROM so_questions
            WHERE id NOT IN (SELECT id FROM constrained))
      ORDER BY c DESC, random()
      LIMIT 5) AS ids
JOIN so_questions ON ids.id = so_questions.id;

DROP TABLE constrained;
COMMIT TRANSACTION; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T16:06:40.180

基本上你正在寻找的是**选择 top N max values**。我早上花了 3-4 个小时来搜索它。（我仍然没有成功，你可能需要再等几个小时）。

对于临时解决方案，您可以使用**group by**选项，如下所示，

String strQuery = "SELECT * FROM so_questions group by category_id;";

输出如下，

![在此处输入图像描述](../Images/d32cef0ca13269c1e3764b547ea06183.png)

将返回您的确切要求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T07:06:22.387

因为它是 sqlite（因此是本地的）：在你有 5 个答案和四个不同的类别之前查询会有多慢，每次迭代都删除重复的类别行。

我认为，如果每个类别都具有相同的代表性，那么您需要超过 3 次迭代的可能性很小，而迭代次数仍应低于 1 秒。

它在算法上并不好，但对我来说，在 SQL 语句中使用 random() 无论如何在算法上并不好。**

# php - 无法通过 cURL 发布到 Facebook 墙上

> ID：12516487
> 
> 赞同：0
> 
> 时间：2012-09-20T16:02:15.820
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试通过 cURL 发布消息，但我不断收到错误消息：

```
{"error":{"message":"(#1500) The url you supplied is invalid","type":"OAuthException","code":1500}} 
```

这是我的代码：

```
$this->msgData['message'] .= 'Test Message';
$this->msgData['link'] = 'test Link';
$this->msgData['name'] = 'Ny test Name';
$this->msgData['access_token'] = 'myaccesstoken';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://graph.facebook.com/'.$this->page_id.'/feed');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);

// execute and close
$return = curl_exec($ch);
curl_close($ch); 
```

我知道离线访问令牌已被弃用，但您仍然可以通过在应用设置中禁用“删除离线访问权限”来使用它。

我在网上进行了研究，但找不到太多信息为什么会失败。当它说提供的 URL 无效时，它意味着什么 URL？是 CURL URL 的“链接”吗？

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:19:26.020

我无法将此添加为评论，因为我没有足够高的声誉，因此很抱歉将其发布为答案；但是，您正在运行的 PHP 版本是否设置为处理 SSL？由于 Open Graph 需要 https，您可能需要告诉 cURL 如何处理它。查看此问题的公认答案： [使用 cURL PHP 发布到 Facebook 用户的墙上](https://stackoverflow.com/questions/5814158/post-to-a-facebook-users-wall-with-curl-php)

您可能特别想尝试添加的行是：

```
`curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt（$ch，CURLOPT_SSL_VERIFYHOST，2）；`

```

# login - 多平台注册登录

> ID：12516489
> 
> 赞同：0
> 
> 时间：2012-09-20T16:02:17.850
> 
> 标签：login, cross-platform, oauth-2.0, facebook-login

我渴望看到一些关于登录系统的建议。假设公司公司很少 (10) 个站点具有相同的登录凭据。已经基于 WIF 实现了单点登录。让我们暂时忽略 WIF。我想带一些登录和注册系统。

可以通过列表中的任何一个（facebook、twitter、linkedin、google 等）进行注册和登录。当然，现在我已经使用 ASP.net 4.0 框架完成了这项工作，并且仅支持 asp.net 应用程序。

我正在寻找一些解释，以便为所有 10 个站点和任何平台（例如 .Net、Classic ASP、PHP）带来“通用注册和登录系统”。

有人可以对上述内容发表一些总体看法。

最后我期待做一个单一的登录系统，它可以很容易地与任何平台的任何新站点集成。

任何建议和想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:11:08.450

我认为 facebook 是一个不错的选择，他们有与 facebook 合作的 sdk 并处理您需要的大部分内容，这是优势。

但是在您的 10 个站点和未来站点中，您可能拥有用户角色和权限。您将必须实施会员资格，然后当用户使用 facebook 登录时，在您的系统中创建用户。

但是使用 facebook 登录会带来新的用户名和可能的新电子邮件，这些可能与您在当前应用程序中拥有的用户无关。

Facebook, oauth-2.0 如果你必须做角色，这由你的应用程序管理。

# xslt - xslt umbraco 选择节点类型

> ID：12516492
> 
> 赞同：1
> 
> 时间：2012-09-20T16:02:23.917
> 
> 标签：xslt, select, umbraco, nodes

我从 umbraco 的一个入门套件中复制了一个日历。我在结构所在的事件日历中使用日历

```
 events page (has calendar)
      - event1
       -event2
       -event3 
```

但是我遇到的问题是当我将日历宏添加到另一个页面时没有事件，我怀疑这是因为选择器正在寻找子节点。

我认为代码是

```
 <xsl:variable name="eventsToday" select="count($currentPage//* [@isDoc and name()='Event' 
```

我真正想要的是选择“事件”类型的所有节点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:39:06.713

我想你想要的是：

```
<xsl:variable name="eventsToday" select="count($currentPage//event [@isDoc]" /> 
```

我还使用以下变体：

```
<xsl:for-each select="umbraco.library:GetXmlNodeById($rootNode)/descendant::event [@isDoc]">
  -- do something --
</xsl:for-each> 
```

# php - 解析 MySQL 结果集并合并到折叠数组

> ID：12516497
> 
> 赞同：1
> 
> 时间：2012-09-20T16:02:34.780
> 
> 标签：php, sql-server

我有以下结果集

```
ID SUBID DATA

1 0  Question1

1 1  Option1

1 2  Option2

2 0  Question1

2 1  Option1

2 2  Option2
... 
```

我真的想要一个看起来像这样的数组

```
$item_data[1][1] = ID 1
$item_data[1][2] = Question1 <br> Option1 <br> Option2

$item_data[2][1] = ID 2
$item_data[2][2] = Question2 <br> Option1 <br> Option2 
```

我绞尽脑汁尝试循环和字符串连接中的循环，但我无法让我的结果集看起来像这样

我试图将它放入一个数组中，这样我就可以输出数据 - 数据保持在一起很重要，但不同的 ID 彼此分离

未使用 SubID - 由于我无法更改的 db 设计，该表看起来像这样

```
select iseg.item_id ,iseg.item_subid, iseg.item_data from items i
    inner join  item_data iseg on iseg.item_id = i.item_id
union all
select iseg.item_stg_id ,iseg.item_subid, iseg.item_data from items_stg i
    inner join  item_data_stg iseg on iseg.item_stg_id = i.item_stg_id
    order by iseg.item_id desc, iseg.item_subid 
```

Item 数据需要在连接前先在 PHP 中解析

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:13:04.580

```
//adjust fetch method accordingly
$item_data = array();
while ($row = $result->fetch()) {
   if (!isset($item_data[$row->ID])) {
      $item_data[$row->ID] = array(1 => 'ID ' + $row->ID, 2 => '');
   }
   $item_data[$row->ID][2] .= ($item_data[$row->ID][2] ?
      ' <br> ' : '') . $row->DATA;
} 
```

正如您所描述的那样，这应该创建数组，但这对我来说有点奇怪。 `SUBID`根本不习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:16:52.257

您还可以使数据库以对您来说可能更容易的格式返回数据：

```
SELECT id, group_concat(data)
FROM my_table
GROUP BY id 
```

会像这样返回你一行：

```
1      Im data 1,Im data 2,Im data 3 
```

这对您来说可能更容易处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:18:15.330

假设`$resultset`是你的 mysql 结果集，你可以这样做：

```
while( $row = mysql_fetch_array($resulset)) {
    if (!isset($arr[$row['ID']])) {
       $arr[$row['ID']][1]  = 'ID ' . $row['ID'];
       $arr[$row['ID']][2]  = 'Im data '.$row['ID'].' <br>';
    } else {
       $arr[$row['ID']][2] .= 'Im data '.$row['ID'].' <br>';
    } 
}
foreach ($arr as &$ar) { //remove last <br> from elements
    $ar[2] = substr($ar[2], 0, -4);
}

var_dump($arr); //to check the output 
```

在您的示例中，每个 ID 只有三行，但我上面的代码允许具有相同 ID 的任意数量的行，因此如果这种情况发生，这可能很重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:12:39.510

让我们假设你有结果`$result`在 php

现在您可以拥有如下数据：-

```
$i=0;
while($row = mysql_fetch_assoc($result)){
    //You can use SUBID.
    if($row['SUBID']==0) { 
        $i++;
        $item_data[$i][1]=$row['ID'];
        $item_data[$i][2]="";
    }

    $item_data[$i][2].+=$row['DATA']."<br>";
} 
```

编辑 --- ---- 我会建议使用 mysql 电源作为 @Alain 在[这里的回答中建议](https://stackoverflow.com/a/12516719/1537696)

# css - 调整屏幕大小以适应分辨率

> ID：12516501
> 
> 赞同：0
> 
> 时间：2012-09-20T16:02:48.033
> 
> 标签：css, html

我已经上传了网站 mrandmrsmagic.com，虽然它在最大化时看起来很好，但最小化时只显示了一半（我拿走了滚动条，因为它在最大化时会显示，所以它可能有一些松散的东西。 ）。网站本身，自从我在 Photoshop 中对它们进行切片以来，我使用了 5 个不同的背景图像（自从我从头开始构建网站已经有一段时间了，所以编码可能非常混乱。）下面是我用于的 5 个 div 的 css身体。

```
#body {
width: 1024px;
height: 583px;
marin: 0;
padding: 0;
position: relative;
left: 448px;
top: -128px;
background: url(../images/body_02.jpg) no-repeat left top;
}

#body2 {
width: 1024px;
height: 583px;
position: relative;
left: 448px;
top: -128px;
background: url(../images/body2_02.jpg) no-repeat left top;
}

#body3 {
width: 1024px;
height: 583px;
position: relative;
left: 448px;
top: -128px;
background: url(../images/body3_02.jpg) no-repeat left top;
}

#body4 {
width: 1024px;
height: 583px;
position: relative;
left: 448px;
top: -128px;
background: url(../images/body4_02.jpg) no-repeat left top;
}

#body5 {
width: 1024px;
height: 583px;
position: relative;
left: 448px;
top: -128px;
background: url(../images/body5_02.jpg)  no-repeat left top;
}

#body6 {
width: 1024px;
height: 583px;
position: relative;
left: 448px;
top: -128px;
background: url(../images/body6_02.jpg)
} 
```

我尝试去掉高度并将宽度设置为 100%，但后来它没有得到纠正，它几乎使它变得更糟。那么有没有办法切换css，我可以在哪里保留5个div？也许我应该只制作一个初始 div 标签，然后为身体制作 5 个类标签。那可能吗？任何和所有的帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:34:08.607

嗯，有很多东西要学习建立网站。所以首先，这是一个很好的努力。您的问题是您已通过像素的绝对值定位所有内容，因此无论屏幕尺寸如何，左侧总会有一个边距。而不是通过你可以做得更好的一切来说服你，我会给你这个。

[jsFiddle](http://jsfiddle.net/bCgUb/19/)

它的布局与您的一样，但简单且中间对齐。它更小，因此您可以在示例中看到它。我会鼓励你玩，打破和修复它，以了解不同的属性如何影响布局。还可以查找有关 HTML 和 CSS 的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:43:38.190

将这些图像作为 s 的背景并没有使您受益`<div>`，而且您可能会通过使用定位来加剧这种麻烦。无需为您重新编码整个事情，这是一个“更好”的方法：

CSS

```
<style>
    /* Make your main components all the same width, and center them within <body>. Their heights will expand as needed */
    #header, #cssmenu, #content { width:1024px; margin:0 auto }
    #cssmenu { ... } /* Looks like what you have will work fine */
    /* #body1/2/3/4....not needed */
</style> 
```

HTML

```
<body>
    <div id="header">...</div>
    <div id="cssmenu">...</div>
    <!-- img elements exist for a reason :-) don't be scared -->
    <div id="content"><img src="body2.jpg"></div>
</body> 
```

# php - 如何检查本地服务器是否可以通过php访问？

> ID：12516504
> 
> 赞同：0
> 
> 时间：2012-09-20T16:03:00.210
> 
> 标签：php, webserver

我的网站在公共网络服务器 A 上运行，该服务器在我的 Intranet 上看不到我的本地服务器 B。在我的浏览器中，如果我在办公室，我可以在浏览器的地址字段中访问我的 Intranet。我还可以在从我的 Web 服务器 A 构建的页面上显示位于本地服务器 B 中的图像。但是，如果我在服务器 A 上运行的 php 中使用 file_exists(服务器 B 上的文件)，则它不起作用，因为 php 脚本正在运行在看不到服务器 B 的服务器 A 上。

我需要检测浏览器是否可以访问服务器 B（在办公室或通过 vpn 建立隧道），以便我可以决定是显示/下载服务器 B 上的本地文件还是 Web 服务器 A 上的文件。我该怎么做?

我还需要该函数来查看是否可以调用我的星号服务器以在我的 pabx 上进行调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:10:16.910

如果我理解你是正确的，这个[http://php.net/manual/en/function.get-headers.php](http://php.net/manual/en/function.get-headers.php)可能会有所帮助。您可以“ping”远程服务器上的任何文件，检查返回的标头，如果返回的代码是 200 - 服务器是可访问的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:31:02.620

当您访问服务器 A 时，脚本可以评估您的地址（您的办公室地址）并知道它位于一组可以显示来自服务器 B 的图像的地址中。如果您从办公室外部访问服务器 A，那么脚本可以设置为不显示来自 B 的图像。

您可以在

```
while(list($key, $val) = each($_SERVER))
{
    $$key = $val;
    printf("%s = %s  \n",$key, $val);
} 
```

当然，建议的解决方案是查看上面的 HTTP 标头并评估是否

[0] => HTTP/1.1 200 OK

尝试访问服务器 B 时是否存在也可以解决问题，但是您需要对您可能已经从 IP 知道的服务器进行失败的访问将失败。

承认，这是一个“硬编码”场景，因为您需要了解服务器 A 上的 IP 是正确的 - 这可能会改变。在这种情况下，客户端中的 javascript 解决方案可能会更加流畅。

# c# - 如何在 Newtonsoft JSON.Net 中组合来自两个 JObject 的两个数组？

> ID：12516510
> 
> 赞同：0
> 
> 时间：2012-09-20T16:03:25.630
> 
> 标签：c#, json.net

我有两个运行`JObject.FromObject()`过的类似 JSON 对象。

在每个对象中都有一个带有其他对象数组的属性，如下所示：

## 文件1

```
{
  "Title": "Alpha",
  "data": [
    {
      "Id": "Fox2",
      "Field": "King6",
      "Value": "Alpha",
      "Description": "Tango"
    }
  ]
} 
```

## 文件2

```
{
  "Title": "Bravo",
  "data": [
    {
      "Id": "Kilo",
      "Field": "Echo",
      "Value": "Romeo",
      "Description": "Jester"
    }
  ]
} 
```

我有两个这样的对象，并试图将数据字段从一个添加到另一个 - 基本上将数据从一个“数据”属性的数组添加到另一个。

最终结果应该是这样的：

```
{
  "Title": "Alpha",
  "data": [
    {
      "Id": "Fox2",
      "Field": "King6",
      "Value": "Alpha",
      "Description": "Tango"
    },
    {
      "Id": "Kilo",
      "Field": "Echo",
      "Value": "Romeo",
      "Description": "Jester"
    }
  ]
} 
```

我试图在不反序列化和组合字符串等的情况下做到这一点。

我已经尝试过这种变化：

```
var data = JObject.FromObject(doc1);
var editData = JObject.FromObject(doc2);

foreach (var editItem in editData.Property("data").Children())                                
   {
      data.Property("data").Add(editItem.Children());
   } 
```

但是，我不断收到这样的错误：

> Newtonsoft.Json.Linq.JProperty 不能有多个值

.

我应该如何尝试组合数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:30:26.180

为什么不包含`"Title": "Bravo",`在最终对象中？

我会这样做：

```
var j1 = (JObject)JsonConvert.DeserializeObject(json1);
var j2 = (JObject)JsonConvert.DeserializeObject(json2);

var jArray = new JArray(j1, j2);
var str = jArray.ToString(); 
```

**编辑**

```
var final = JsonConvert.SerializeObject( 
                new {Title=j1["Title"], data=j1["data"].Union(j2["data"])},
                Newtonsoft.Json.Formatting.Indented); 
```

# soap - 在 Powershell 中使用 Soap complexType 以保持 Soap 服务热

> ID：12516512
> 
> 赞同：6
> 
> 时间：2012-09-20T16:03:35.910
> 
> 标签：soap, powershell, wsdl

我正在编写一个 powershell 脚本，该脚本将每 10 分钟 ping 一次soap web 服务，以保持其热度和活力，从而提高性能。我们在 IIS 中尝试了多种技术，使用应用程序池空闲超时，并且只为 wsdl 生成 http req。但似乎我们必须向 sql 服务器发出真正的请求，否则 90 分钟的空闲时间会使其因需求而变慢。

我必须构建一个相当复杂的搜索对象才能进行智能搜索，从而保持服务层缓存和热。Soap 请求应如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:fund="http://www.example.com/cmw/fff/fund" xmlns:tcm="http://www.example.com/cmw/fff/">
   <soapenv:Body>
     <fund:Get>
        <!--Optional:-->
        <fund:inputDTO>
           <fund:Fund>
              <fund:Identity>
                 <fund:Isin>SE9900558666</fund:Isin>
                 <fund:FundBaseCurrencyId>SEK</fund:FundBaseCurrencyId>
              </fund:Identity>
           </fund:Fund>
           <fund:InputContext>
              <tcm:ExtChannelId>Channelman</tcm:ExtChannelId>
              <tcm:ExtId>Rubberduck</tcm:ExtId>
              <tcm:ExtPosReference>Rubberduck</tcm:ExtPosReference>
              <tcm:ExtUser>Rubberduck</tcm:ExtUser>
              <tcm:LanguageId>809</tcm:LanguageId>
           </fund:InputContext>
        </fund:inputDTO>
     </fund:Get>
   </soapenv:Body>
</soapenv:Envelope>` 
```

我尝试使用 new-WebServiceProxy ，它在[powershellguy 的这个例子](http://thepowershellguy.com/blogs/posh/archive/2009/05/15/powershell-v2-get-weather-function-using-a-web-service.aspx)中工作得非常优雅。我从 technet 构建[自己的对象作为这个例子](http://social.technet.microsoft.com/wiki/contents/articles/7804.powershell-creating-custom-objects-en-us.aspx*/)。

到目前为止，我尝试的 powershell 代码是这样的：

```
$fundSrvc = New-WebServiceProxy -uri http://myColdServer:82/WSFund.svc?wsdl -NameSpace "tcm"
# all the type are now defined since we called New-WebServiceProxy they are prefixed
# with ns tcm
[tcm.FundInput] $myFundGoofer = new-object tcm.FundInput 
[tcm.Fund] $myFund = new-object tcm.Fund
[tcm.Context] $myInputContext = new-object tcm.Context
[tcm.FundIdentity] $myFundIdentity = New-Object tcm.FundIdentity
# Use these commands to get member of the objects you want to investigat
# $myFundGoofer |Get-Member
# $myFund |Get-Member
# $myInputContext |Get-Member
# $myFundIdentity |Get-Member
$myFundIdentity.Isin="SE9900558666"
$myFundIdentity.FundBaseCurrencyId="SEK"
$myInputContext.ExtChannelId="ChannelMan"
$myInputContext.ExtId="RubberDuck"
$myInputContext.ExtPosReference="RubberDuck"
$myInputContext.ExtUser="RubberDuck"
$myInputContext.LanguageId="809"
$myFund.Identity=$myFundIdentity

$myFundGoofer.Fund = $myFund
$myFundGoofer.InputContext = $myInputContext

#Tada
$fundSrvc.Get($myFundGoofer) 
```

错误消息对我来说没有意义。它听起来像：`Cannot convert the "tcm.FundInput" value of type "tcm.FundInput" to type "tcm.FundInput"`

```
Cannot convert argument "0", with value: "tcm.FundInput", for "Get" to type "tcm.FundInput": "Cannot convert the "tcm.FundInput" value of type "tcm.FundInput" to type "tcm.FundInput"."
At C:\scripts\Service-TestTCM6.ps1:31 char:14
+ $fundSrvc.Get <<<< ($myFundGoofer)
    + CategoryInfo          : NotSpecified: (:) [], MethodException
    + FullyQualifiedErrorId : MethodArgumentConversionInvalidCastArgument 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T10:04:46.000

我按照 Christian 的链接（应该归功于他，但我不知道该怎么做）提供并使用了默认命名空间。所以现在我不需要每次都重新启动 powershell。也许有另一种解决方案可以在每次调用后杀死fundSrvc 对象。但我放弃了，继续使用默认创建的疯狂长命名空间。

这是有效的解决方案：

```
#note no -Namespace argument  
$fundSrvc = New-WebServiceProxy -uri "http://myColdServer/WSFund.svc?wsdl"

#get autogenerated namespace
$type = $fundSrvc.GetType().Namespace
$myFundGooferDt = ($type + '.FundInput')
$myFundDt = ($type + '.Fund')
$myInputContextDt = ($type + '.Context') 
$myFundIdentityDt = ($type + '.FundIdentity') 
# Create the Objects needed
$myFundGoofer = new-object ($myFundGooferDt) 
$myFund = new-object ($myFundDt) 
$myInputContext = new-object ($myInputContextDt)
$myFundIdentity = New-Object $myFundIdentityDt
# Assign values
$myFundIdentity.Isin="SE9900558666"
$myFundIdentity.FundBaseCurrencyId="SEK"
$myInputContext.ExtChannelId="ChannelMan"
$myInputContext.ExtId="RubberDuck"
$myInputContext.ExtPosReference="RubberDuck"
$myInputContext.ExtUser="RubberDuck"
$myInputContext.LanguageId="809"
$myFund.Identity=$myFundIdentity

$myFundGoofer.Fund = $myFund
$myFundGoofer.InputContext = $myInputContext

#Tada
$fundSrvc.Get($myFundGoofer) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-15T23:36:33.080

您的原始技术是正确的，您只需要在 New-WebServiceProxy 上还包含 -class 参数。将其余代码保持原样。

我昨天在使用 PowerShell 的 Web 服务时遇到了这个确切的问题。我还通过发现自动生成的命名空间来让它工作，但这对我来说有点太老套了。

然后我找到了这里提到的解决方案：[https ://groups.google.com/d/msg/microsoft.public.windows.powershell/JWB5yueLtrg/k0zeUUxAkTMJ](https://groups.google.com/d/msg/microsoft.public.windows.powershell/JWB5yueLtrg/k0zeUUxAkTMJ)

```
$newWebService = New-WebServiceProxy -uri "http://<server>/webservices/services.php?wsdl" -NameSpace "Service" -Class "<classname>" 
```

# assembly - 将数组写入磁盘文件的汇编程序

> ID：12516518
> 
> 赞同：0
> 
> 时间：2012-09-20T16:04:03.700
> 
> 标签：assembly, x86, masm, irvine32

`CreateOutputFile`我正在尝试使用,`WriteToFile`和`CloseFile`Irvine32 过程将双字数组写入磁盘文件。这是我的代码。

```
INCLUDE Irvine32.inc

.data

     count = 45 
     BUFFER_SIZE = 188
     filename BYTE "Fibonacci.txt",0
     fileHandle DWORD ?
     array DWORD 47 DUP(?)
     num1 = 1
     num2 = 1
     temp1 DWORD ?
     temp2 DWORD ?
.code

     main PROC
     mov edx,OFFSET filename
     call CreateOutputFile

     mov fileHandle,eax
     mov esi,0
     mov array[esi],num1
     mov eax,array[esi]
     mov temp1,eax
     add esi,4 
     mov array[esi],num2
     mov eax,array[esi]
     mov temp2,eax
     add esi,4
     mov ecx, count

L1:

     mov eax,0
     mov ebx,0
     mov eax,temp1
     mov ebx,temp2
     add eax,ebx
     mov array[esi],eax
     mov temp1,ebx
     mov temp2,eax
     add esi,4
     loop L1

     mov eax,fileHandle
     mov edx,OFFSET array
     mov ecx,BUFFER_SIZE
     call WriteToFile

     mov eax,fileHandle
     call CloseFile
     exit
main ENDP

END main 
```

我每次调试后，都成功创建了一个文本文件，但是却变成了文本文件中一些无法识别的代码。我认为它应该是以十六进制显示的数组。

我真的不知道我哪里出错了。请帮我！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-25T17:08:51.690

“无法识别的代码”是 188 个字节，代表 CPU 内部格式中的 47 个值，称为“DWORD”。该文件是`array DWORD 47 DUP(?)`. 对于人类可读的格式，例如十进制字符串，它们必须在斐波那契循环 (L1) 内或使用新循环（梯形图在下面显示为 L2）中一个接一个地进行转换。WinApi 包含一个可用作转换例程的函数：[`wsprintf`](https://msdn.microsoft.com/library/windows/desktop/ms647550.aspx). 由于 Irvine32 库声明了此函数，因此无需其他情况即可使用。

例子：

```
INCLUDE Irvine32.inc

.data

    count = 45
    BUFFER_SIZE = 188
    filename BYTE "Fibonacci.txt",0
    fileHandle DWORD ?
    array DWORD 47 DUP(?)
    num1 = 1
    num2 = 1
    temp1 DWORD ?
    temp2 DWORD ?

    decimalstring BYTE 16 DUP(0)    ; String for WriteFile
    fmt BYTE "%u",13,10,0           ; Format string for wsprintf ("%u\r\n")

.code

main PROC

    mov edx,OFFSET filename
    call CreateOutputFile

    mov fileHandle,eax
    mov esi,0
    mov array[esi],num1
    mov eax,array[esi]
    mov temp1,eax
    add esi,4
    mov array[esi],num2
    mov eax,array[esi]
    mov temp2,eax
    add esi,4
    mov ecx, count

L1:
    mov eax,0
    mov ebx,0
    mov eax,temp1
    mov ebx,temp2
    add eax,ebx
    mov array[esi],eax
    mov temp1,ebx
    mov temp2,eax
    add esi,4
    loop L1

    mov ecx, LENGTHOF array     ; Number of elements (DWORD's) in array
    mov esi, 0                  ; First index
L2:
    push ecx                    ; Preserve loop counter

    ;convert number to string
    push array[esi]             ; Argument for format string
    push OFFSET fmt             ; Pointer to format string ("%d")
    push OFFSET decimalstring   ; Pointer to buffer for output
    call wsprintf               ; Irvine32.inc / Smallwin.inc / User.lib / User.dll
    mov ecx, eax                ; Length of the stored string into ECX for WriteToFile
    add esp, (3*4)              ; CCALL calling function! Adjust the stack.

    mov eax, fileHandle
    mov edx, OFFSET decimalstring
    call WriteToFile

    pop ecx                     ; Restore loop counter
    add esi, 4                  ; Next DWORD
    loop L2

    mov eax,fileHandle
    call CloseFile
    exit
main ENDP

END main 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-04T22:09:13.220

这是一个老问题，但要查看您在文件上写入的数据，您需要使用 HEX 编辑器工具查看文件的 HEX 代码。我尝试调试你的代码并用十六进制编辑查看它，你的数组就在那里。您可以从此处下载 Hexedit：[http](http://www.hexedit.com/) ://www.hexedit.com/ 或使用任何其他允许您以十六进制模式查看文件的工具。

# c# - 将datareader绑定到asp图表控件

> ID：12516519
> 
> 赞同：2
> 
> 时间：2012-09-20T16:04:06.193
> 
> 标签：c#, asp.net, mschart

本质上，我有一个数据读取器，理论上它将调用一个存储过程，并将返回的查询绑定到图表。

这是我想绑定到图表的数据：

```
ForecastDesc    Previous    Current Budget  Forecast 4  Forecast 7 
Period1 966025.79   1466872.95  1000000.00  0.00    0.00
Period2 1051175.09  1489785.15  1000000.00  0.00    0.00
Period3 1205352.26  1552806.49  1000000.00  0.00    0.00
Period4 1261483.84  1544562.06  1000000.00  50.00   0.00
Period5 1298918.58  1681396.55  1000000.00  45.00   0.00
Period6 1314396.68  1611695.58  10000000.00 50.50   0.00
Period7 1465150.48  1622354.24  1000000.00  50.50   123.00
Period8 1426084.73  1632609.46  1000000.00  50.50   0.00
Period9 1395144.09  370334.88   1000000.00  50.50   0.00
Period10    1347280.57  0.00    1000000.00  50.50   0.00
Period11    1374741.53  0.00    1000000.00  50.50   0.00
Period12    1331704.11  0.00    1000000.00  50.20   0.00
Period13    1367272.27  0.00    1000000.00  50.70   0.00 
```

我的vb代码如下：

```
 Protected Sub YearList_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles YearList.SelectedIndexChanged

    Chart1.Visible = True

    mySqlConn = New SqlConnection
    mySqlConn.ConnectionString = "Server=" + dbServerName + "; Database=" + dbCatalogName + "; Trusted_Connection=True;"

    pSql = New SqlCommand

    pSql.Connection = mySqlConn
    pSql.CommandType = CommandType.StoredProcedure
    pSql.CommandText = "dbo.[sp_DW_Transpose_BudgetForecast]"

    pSql.Parameters.Add("@seg1", SqlDbType.NVarChar)
    pSql.Parameters.Add("@seg2", SqlDbType.NVarChar)
    pSql.Parameters.Add("@seg3", SqlDbType.NVarChar)
    pSql.Parameters.Add("@year", SqlDbType.NVarChar)

    pSql.Parameters("@seg1").Value = Seg1.SelectedItem.Text
    pSql.Parameters("@seg2").Value = Seg2.SelectedItem.Text
    pSql.Parameters("@seg3").Value = Seg3.SelectedItem.Text
    pSql.Parameters("@year").Value = YearList.SelectedItem.Text

    pSql.Connection.Open()
    pReader = pSql.ExecuteReader(CommandBehavior.CloseConnection)

    While pReader.Read()
        Chart1.DataBindTable(pReader)
    End While

    pReader.Close()
    pReader = Nothing

    mySqlConn.Close()

End Sub 
```

当我的 Web 程序准备好创建图表时，我收到以下错误：

```
Server Error in '/' Application.

Specified method is not supported.

Description: An unhandled exception occurred during the execution of the current web          request. Please review the stack trace for more information about the error and where it   originated in the code. 

Exception Details: System.NotSupportedException: Specified method is not supported.

Source Error: 

Line 111:
Line 112:        While pReader.Read()
Line 113:            Chart1.DataBindTable(pReader)
Line 114:        End While
Line 115:

Stack Trace: 

[NotSupportedException: Specified method is not supported.]
 System.Data.Common.DbEnumerator.Reset() +65
 System.Web.UI.DataVisualization.Charting.ChartImage.GetDataSourceMemberNames(Object     dataSource, Boolean usedForYValue) +2363
 System.Web.UI.DataVisualization.Charting.ChartImage.DataBindTable(IEnumerable dataSource, String xField) +59
 System.Web.UI.DataVisualization.Charting.Chart.DataBindTable(IEnumerable dataSource) +36
 Forecasting.WebForm1.YearList_SelectedIndexChanged(Object sender, EventArgs e) in 
 System.Web.UI.WebControls.ListControl.OnSelectedIndexChanged(EventArgs e) +113
 System.Web.UI.WebControls.DropDownList.RaisePostDataChangedEvent() +143
     System.Web.UI.WebControls.DropDownList.System.Web.UI.IPostBackDataHandler.RaisePostDataChangedEvent() +10
 System.Web.UI.Page.RaiseChangedEvents() +135
 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean    includeStagesAfterAsyncPoint) +4867

 Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET    Version:4.0.30319.1 
```

无论如何，我不确定 Databindtable 是否是我应该使用的正确方法，甚至可能是 Databindcrosstable。我已经盯着这个问题看了四天了，现在我呼吁您的专业知识来指导我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:27:30.983

我相信问题是您正在调用`.DataBindTable()`并传入 a `DataReader`，但 DataReader*没有*实现`IEnumerable`，因此有关该方法的错误不受支持。尝试将数据转储到`DataTable`or`DataSet`并将其作为参数传递给`.DataBindTable()`

[Chart.DataBindTable 方法](http://msdn.microsoft.com/en-us/library/dd455374%28v=vs.100%29.aspx)

# entity-framework - 将仅具有更改字段的部分对象发送到 Web API 和实体框架

> ID：12516526
> 
> 赞同：3
> 
> 时间：2012-09-20T16:04:22.900
> 
> 标签：entity-framework, asp.net-web-api, model-binding

WebApi 和 EF POCO 可以很好地协同工作。我一直在思考的一个问题是，随着时间的推移，某些对象会变得非常大。它们可以有很多属性映射回数据库中的列。有了这些对象，一次更新一个或两个以上的字段是很少见的，所以这就引出了一个问题，为什么要求所有字段都完成从客户端到服务器再到数据库的完整行程。

一些 JavaScript 框架提供了是否将所有字段或仅更改的字段发送回服务器的选项，因此客户端干净且简单。

从我所看到的来看，服务器端更具挑战性。序列化程序将介入并尝试将一些 json 或 xml 映射到一个类型。例如，JSON.NET 可以很好地处理缺失值，前提是对象中的相应属性可以为空。

另一方面，将反序列化模型重新附加到实体框架是事情变得棘手的地方。控制器的默认 WebApi 模板在一行中完成：

```
db.Entry(user).State = EntityState.Modified; 
```

这显然将整个对象设置为已修改。当然可以将单个属性设置为修改而不是整个对象，我认为这意味着 EF 更聪明一些，并且只将修改后的属性发送回 SQL UPDATE 中。

所以这里的问题是，我怎么知道哪些属性被更新了？我只在我的控制器方法中得到一个对象，所以我不能询问序列化器它引入了哪些属性（即使对于给定的序列化器来说这是可能的）。如果我有一个属性列表，那么我可以将当​​前值及其状态设置为在 EF 中进行修改，并希望这会导致我的干净数据库查询。

另一个可能更明显的选择是首先从数据库中检索我要更新的对象，然后仅在检索到的对象上逐个修改更改的属性，或者如果 EF 支持它，也许我可以将未附加的对象传递给它让它自己做。这并不是一个理想的选择，因为它确实意味着整个数据库读取，其中练习的重点是效率。我们要做的是用客户端的 http 效率和带宽来换取服务器上的命中率和数据库效率。

所以对我来说，如果我想在服务器上执行此操作，我似乎处于困境和艰难的境地。WebApi 和 EF 完成了大部分工作，但以灵活性为代价。我正在寻找我没有提到的选项或角度，希望有一个简单的解决方案不会抛弃这两种伟大技术中的任何一种。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T17:35:45.463

> 我如何知道更新了哪些属性？

我想你不会得到这些信息。默认序列化程序不希望您想知道任何细节。他们的功能是给你一个对象，他们正是这样做的。如果您想了解详细信息，您必须自己进行反序列化 - 这意味着编写您的反序列化器或在操作中接受原始消息并解析它。

您还可以尝试将一些跟踪硬编码到实体本身并“记录”在反序列化期间设置了哪些属性，但它是否会工作取决于序列化程序，因为如果反序列化也设置了这些值，它将无用。

当您使用整个实体时，EF 和 WebAPI 一起工作。一旦开始使用部分数据传输，您必须将自己的逻辑放入游戏中。

# jquery - jquery 工具，两个对相同库的引用以使脚本工作

> ID：12516528
> 
> 赞同：0
> 
> 时间：2012-09-20T16:04:24.763
> 
> 标签：jquery, reference

我有一个 Wordpress 主题，它的一些功能取决于 jquery 库 jquery.tools。在我的头文件中：

```
//header.php

<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
<script type="text/javascript">

  $(document).ready(function(){
         $("#trigger-button-53").tooltip({effect:'slide'});
  })
</script>

<script type="text/javascript">

  $(document).ready(function(){
$('#accordion-slider').kwicks({  
    max : 750,  
    spacing : 1
});  
  });
</script> 
```

在我的自定义 functions.php 文件中：

```
// functions.php
<?php
function my_scripts_method() {

    wp_enqueue_script('tools', 'http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js', '', '', true );  
    $kwicks_url = get_template_directory_uri().'/js/jquery-kwicks-1.5.1.js';
    wp_enqueue_script('jquery-kwicks', $kwicks_url, '', '', true);
    wp_enqueue_script('jquery', "https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js", '', '', true );
}    

add_action('wp_enqueue_scripts', 'my_scripts_method'); // For use on the Front end (ie.    Theme)

?> 
```

两种方法都返回： [http ://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js?ver=3.4.2](http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js?ver=3.4.2)

就目前而言，以这种方式，我所有的 javascript 方法都具有魅力。但我在参考

```
http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js 
```

两次让它全部工作？如果我在 header.php 文件中省略了直接引用，即使这两种方法都成功加载了库，我的脚本也不会工作。此外，我们不应该在 WP 主题（具体为子主题）的头文件中粘贴对脚本的直接引用，因为这是不好的做法。您可能已经注意到我在使用

```
my_scripts_method(); 
```

但如果我将它们加载到标题中没有区别。稍微切线，我假设：

```
wp_enqueue_script( 
 $handle
,$src
,$deps
,$ver
,$in_footer 
); 
```

$handle 可以是任何字符串，即

```
wp_enqueue_script('fried-egg', 'http://example.com/path/to/jquery.js');    
wp_enqueue_script('tools', 'http://example.com/path/to/jquery.js'); 
```

同样有效吗？

WTF的继续？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:11:21.027

确保仅*在*jQuery 工具之前加载 jQuery。如果您之后加载 jQuery，任何对 jQuery 插件的引用都将被新版本的 jQuery 覆盖。这就是为什么您必须包含 jQuery 工具两次（一次在 jQuery 被覆盖之前，删除对 j​​Query 工具的引用，然后在再次包含 jQuery 之后再次）。

```
wp_enqueue_script('jquery', "https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js", '', '', true );
wp_enqueue_script('tools', 'http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js', '', '', true );  
$kwicks_url = get_template_directory_uri().'/js/jquery-kwicks-1.5.1.js';
wp_enqueue_script('jquery-kwicks', $kwicks_url, '', '', true); 
```

# visual-c++ - 使用 MSVC 2010 命令行工具编译 ATL 程序需要哪些选项？

> ID：12516529
> 
> 赞同：1
> 
> 时间：2012-09-20T16:04:34.273
> 
> 标签：visual-c++, atl

我正在尝试使用 Windows SDK 7.1 中的 MS 命令行工具构建 ATL 程序。我已经安装了 Windows Driver Kit 7.1.0 以获得 ATL 头文件和库，并且大部分情况下我都成功了。我可以使用 MSBuild 或用于 nmake 的自定义 makefile 为 x86 系统完美构建它，但是当我尝试为 x64 构建它时，我收到以下错误：

```
<project>\include\atl71\atlplus.h(21): error C3360: 'ATL4': cannot create IAttributeHandler [<project>.vcxproj]
<project>\include\atl71\atlplus.h(21): fatal error C1903: unable to recover from previous error(s); stopping compilation [<project.vcxproj]
  0 Warning(s)
  2 Error(s) 
```

真正令人讨厌的是，使用完全相同的解决方案文件和配置，Visual Studio 可以很好地构建 x64 版本。显然我遗漏了一些东西，因为所有这些工具都使用相同版本的 cl.exe 来执行实际编译......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T12:20:42.860

我使用完整的 DevStudio IDE 遇到了同样的问题。我所做的和你完全一样（将 Win32 设置复制到 x64 目标平台）我配置管理器，但一直收到同样烦人的消息。我通过不使用可在项目属性页面中选择的 WinSDK v7.1 工具链来修复它：具体来说，在“配置属性”节点中的“常规”项中。该属性称为“平台工具集”（同样，所有这些都在 IDE 中），我将下拉列表中的选择从 Windows7.1SDK 更改为 v100。后者声称使用 DevStudio-only 工具和实用程序来构建几乎所有内容（例如 HTML Help Compiler 仍然是外部的）。

我希望这个花絮可能有助于引导你朝着正确的方向前进。祝你好运！

S.肖恩·斯塔格纳

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T10:01:39.617

使用以下脚本创建一个批处理文件，然后运行它：

```
pause
setx DevEnvDir %%VSINSTALLDIR%%\Common7\IDE\
setx Framework35Version v3.5
setx FrameworkDir C:\Windows\Microsoft.NET\Framework\
setx FrameworkVersion v4.0.30319
setx LIBPATH %%FrameworkDir%%%%FrameworkVersion%%;%%FrameworkDir%%%%Framework35Version%%
setx PATH ""
setx PATH "%%DevEnvDir%%;%%VSINSTALLDIR%%\VC\Bin;%%VSINSTALLDIR%%\Common7\Tools;%%FrameworkDir%%%%FrameworkVersion%%;%%FrameworkDir%%%%Framework35Version%%;%%VSINSTALLDIR%%\VC\VCPackages;%%PATH%%"
setx VC_PROJECT_ENGINE_NOT_USING_REGISTRY_FOR_INIT 1
setx VCINSTALLDIR %%VSINSTALLDIR%%\Bin\
setx VS100COMNTOOLS ""
setx VSINSTALLDIR "D:\Program Files\Microsoft Visual Studio 10.0" 
```

# django - 没有模型的美味加法器

> ID：12516530
> 
> 赞同：1
> 
> 时间：2012-09-20T16:04:36.630
> 
> 标签：django, tastypie

我想做一个基于 Tastypie 的 API 加法器。这是它的工作原理......用户将发布到他们想要添加的两个号码并使用 Tastypie + Django 我想在返回给用户时包含添加的号码。

我没有兴趣将它放入 mySQL 数据库。

```
class Adder(resource):
    class Meta:
    authorization = Authorization()
    authentication = Authentication()

    def hydrate(self,bundle):
        _a = bundle.data['first_number']
        _b = bundle.data['second_number']

        self.create_response(request, return_dict)
        return bundle 
```

Tastypie 的文档似乎确实围绕着模型（原因很明显）。

但是我很好奇 create_response 是否可以从 hydrate 方法中调用，以及调用 hydrate 方法是否是处理发布数据的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:42:36.243

我可能会跳过更细粒度的东西，如 hydrate、apply_sorting、build_filters 等。

我假设没有 api 后面的对象，您正在使用类似列表的 url `/api/v1/add_stuff/`，并假设您正在接受 POST 请求。如果这些假设是错误的，您可以通过更改为 post_detail、get_list 等来进行调整。

```
def post_list(self, request, **kwargs):
    _a = request.POST.get('first_number', None)
    _b = request.POST.get('second_number', None)
    if None in (_a, _b):
        raise HttpBadRequest()
    return self.create_response(request, {'result': _a + _b}) 
```

请注意，我认为这段代码可以工作，但我还没有测试过。它旨在提供一个起点。

[Tastypie 文档的这一部分](http://django-tastypie.readthedocs.org/en/latest/resources.html#flow-through-the-request-response-cycle)描述了调用各种方法的顺序，并且在页面底部有一个完整的 API 参考，因此您可以查看期望的参数以及它们应该返回的参数。

编辑：

这种情况的流程将如下所示：

1.  在`dispatch`中，检查请求 uri。根据是否请求了详细信息或列表 uri (`/api/v1/add_stuff/<pk>/`或 `/api/v1/add_stuff/`)，将处理委托给`dispatch_detail`或 `dispatch_list`。这也是身份验证、授权和限制检查发生的地方。

2.  在`dispatch_list`中，检查请求方法并将调用委托给名为 的方法`'%s_list' % request.METHOD.lower()`。为了回答您的评论，这些是神奇的方法名称。如果请求方法是 POST，则`dispatch_list`查找名为的方法 `post_list`，如果未定义适当的处理程序，则会引发错误。

# css - IE7：用百分比边距阻止表内

> ID：12516531
> 
> 赞同：0
> 
> 时间：2012-09-20T16:04:47.197
> 
> 标签：css, internet-explorer-7

我希望有一个解决这个 IE7 问题的方法。我在 jsfiddle 上举了一个例子：

[http://jsfiddle.net/fCqm6/](http://jsfiddle.net/fCqm6/)

如果您在 IE 中切换到 IE7 模式，您会注意到单元格内的块一直位于右侧。但是我希望它保持在中间位置（就像 Chrome 或当前的 IE 版本一样）。

如果我将框的宽度设置为固定值，则框的位置会完全不同。但是如果可能的话，我需要将宽度和边距都设置为百分比（最终结果是一种时间线，其中动态元素需要根据它们的持续时间进行定位和拉伸）

是否有任何破解或解决方法，以便这些百分比边距在除 javascript 之外的表格内工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:45:04.293

好吧，我自己想通了：

通过在表格单元格和设置宽度为 100% 的框之间添加一个 div，IE7 可以正确呈现框：

[http://jsfiddle.net/fCqm6/1/](http://jsfiddle.net/fCqm6/1/)

# java - HTTP GET 检索压缩文件

> ID：12516532
> 
> 赞同：2
> 
> 时间：2012-09-20T16:04:50.053
> 
> 标签：java, http, zip, gzip

我开发了一个 HTTP 通信对象，用于通过 GET 请求下载文件。

这在下载文本文件时工作得很好。但是，下载 zip、gz 或 tar.gz 等压缩文件似乎会下载该文件，但该文件无效。

在 zip 的情况下，我收到一条消息，说它试图在文件开头之前移动指针。在 .tar.gz 的情况下，消息是 file.tar 中的数据错误。文件坏了。

在所有情况下，我使用的下载链接都允许从 URL 进行完整且正确的下载。然而，基于 Java 代码的下载会导致文件失效，但它是无效的。

代码如下：

```
public class HTTPCommunicationGet {

    private URIBuilder sendData;
    private URI target;
    private HttpGet getConnection;

    public HTTPCommunicationGet(String url, TreeMap<String, String> components) {
        super(url, components);
    }

    public HTTPCommunicationGet(String url, String queryString) {
        super(url, queryString);
    }

    protected void defineSendData() throws URISyntaxException, IOException {
        this.sendData = new URIBuilder(new URI(this.getUrl()));
        if (this.getComponents() != null && this.getComponents().size() > 0) {
            for (Map.Entry<String, String> component : this.getComponents().entrySet()) {
                this.sendData.setParameter(component.getKey(), component.getValue());
            }
        }
    }

    protected void retrieveRemoteData() throws IOException, MalformedURLException, URISyntaxException, DataMapHTTPGetException {

        this.target = this.sendData.build();
        this.getConnection = new HttpGet(target);
        HttpResponse response = client.execute(this.getConnection);
        if (response.getStatusLine().toString().toUpperCase().contains("200 OK")) {
            this.setResponse(response.getStatusLine().toString(), "Data Retrieved");
            BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            String line = "";
            while ((line = rd.readLine()) != null) {
                this.remoteData.append(line);
            }
        } else {
            String message = String.format("%s: Provider connection exception; response returned was not 200 OK", this.target.toASCIIString());
            this.setResponse(response.getStatusLine().toString(), message);
            DataMapHTTPGetException ex = new DataMapHTTPGetException(target.toString(), message);
            throw ex;
        }
    }

    public void downloadFiles(String localFile) throws DataMapConnectionException, FileNotFoundException, IOException, URISyntaxException {
        // check that we have remoteData set
        this.defineSendData();
        this.retrieveRemoteData(); // everything is bubbled up to the controller class that is calling this.

        File localMetaFile = new File(localFile);
        switch (this.archiveMetaFile(localMetaFile)) {
            case -1:
                IOException ex = new IOException(String.format("The file %s could not be moved", localFile));
                throw ex;
            //break;
            case 0:
                infoLog.info(String.format("%s: this file did not already exist", localFile));
                break;
            case 1:
                infoLog.info(String.format("%s: this file was found and successfully archived to the processed directory", localFile));
                break;
        }

        BufferedWriter fileWriter = new BufferedWriter(new FileWriter(localFile));
        fileWriter.write(this.remoteData.toString());
        fileWriter.close();
    }
} 
```

如您所见，这是在对象初始化后通过 downloadFiles 调用的。我已经删除了本示例不需要的代码，例如 archiveMetaFile 方法。

非常感谢任何关于为什么这不适用于压缩文件的指针。

干杯内森

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T16:08:42.913

问题很可能是您使用的是 a[`BufferedReader`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)而不是 InputStream。阅读器用于文本数据并强制进行字符编码，而 InputStreams 可以处理原始二进制数据。

尝试改用a [`BufferedInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedInputStream.html)。使用任何 Reader 类都会损坏二进制数据。

# jquery - jQuery - 一次触发两次 setInterval() 的函数？

> ID：12516535
> 
> 赞同：0
> 
> 时间：2012-09-20T16:05:13.967
> 
> 标签：jquery, setinterval

我有一个 jQuery 函数，用于`setInterval()`慢慢输入一个短语——就像短语“string one”一样，每个字符都会在设定的毫秒数后打印到屏幕上。

问题是，在我的代码中，我一个接一个地对函数进行了两次调用，并且它们重叠，因为它似乎`setInterval()`不会停止正常的代码流。很难解释，[这是我的 jsFiddle](http://jsfiddle.net/abluescarab/ymxu5/)，它显示了会发生什么。

这是我的功能：

```
function type(text) {
    if(intv == null) {
        var textArray = text.split("");
        var length = textArray.length - 1;
        var i = 0;

        $("#div").append('<p class="text' + n + '"></p>' + "\n"); // creates a paragraph to print every character to (n is a global var)

        intv = setInterval(function() {
            if(i <= length) {
                var a = textArray[i];
                $('#div .text' + n).text($('#div .text' + n).text() + a); // appends the character to the paragraph created above
                i++;
            }
            else {
                alert("stopping interval..."); // just lets me know when the interval is stopping
                clearInterval(intv);
                intv = null;
                n++;
            }
        }, 60);
    }
    else {
        alert("the interval is not null"); // lets me know if the previous setInterval has stopped firing
    }
} 
```

我是这样称呼它的：

```
type("string one");
type("string two"); 
```

问题是“弦一”和“弦二”最终同时触发，或者开始无限循环，或者只有第一个有效。

我真的不知道是否有办法解决这个问题，我的搜索没有任何结果。我不知道这是否是一个普遍的问题。有没有办法让第二根琴弦在第一根琴弦完成之前不触发？

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:14:37.957

`setInterval`实际上只安排一个间隔每隔这么多毫秒运行一次。之后，一切仍然有效，因此您可以使用页面上的其他模块（如果您无法使用，那将毫无用处）。

如果您确实想等到间隔 #1 完成，您可以调用您传递的函数。就像是：

```
function type(text, functionIfDone) {
// ...
            clearInterval(intv);
            functionIfDone();  // call the function now because the interval is over 
```

像这样使用它：

```
type("string one", function() {
    type("string two");
}); 
```

* * *

如果您不想使用回调，那么您可以使用一些处理排队的辅助函数：http: [//jsfiddle.net/pZtje/](http://jsfiddle.net/pZtje/)。

```
var currentInterval;
var intervals = [];

var startInterval = function(func, time) {
    intervals.push({
        func: func,
        time: time
    });
    checkQueue();
};

var checkQueue = function() {
    if(currentInterval == null) {
        var item = intervals.shift();
        if(item) {
            currentInterval = setInterval(item.func, item.time);
        }
    }
};

var stopInterval = function() {
    clearInterval(currentInterval);
    currentInterval = null;
    checkQueue();
};

// Usage:

var i = 0;
function foo() {
    console.log(i);
    i++;
    if(i === 3) {
        i = 0;
        stopInterval();
    }
}

startInterval(foo, 1000);
startInterval(foo, 1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:40:35.247

看看这里：http: [//jsfiddle.net/ymxu5/12/](http://jsfiddle.net/ymxu5/12/)

首先，设置一个函数队列来跟踪我们的位置：

```
function Queue(){
    this._fns = [];
    this._args = [];
    this._running = false;
    var that = this;

    this.add = function(fn){
        console.log(fn.name + " added");
        that._fns.push(fn);
        var args = Array.prototype.slice.call(arguments, 1);
        that._args.push(args);

        if (!that._running)
            that.next();

        return that;
    },
    this.next = function(){        
        if (that._fns.length == 0){
            that._running = false;
        }
        else{
            that._running = true;
            that._fns.shift().apply(that, that._args.shift());
        }
    }
}; 
```

然后，您需要调整您的方法以使用`queue.next();`. 我已经设置了`Queue`对象来调用每个函数，改变了对象的上下文`this`，`Queue`这就是`var queue = this;`使用的原因。

```
function type(text){
    var queue = this;
    var $con = $("<p>").appendTo("#div");

    var typeText = function(con, txt, cursor){
        if (cursor < txt.length){
            con.text(con.text() + txt[cursor]);
            setTimeout(function(){
                typeText(con, txt, cursor + 1);
            }, 60);
        }
        else{
            setTimeout(function(){
                queue.next();
            }, 250);
        }
    };
    typeText($con, text.split(""), 0);
}

function flicker(sel){
    var queue = this;

    // note that this will cause issues if "sel" selects multiple things
    // because it will create multiple callbacks with jQuery, and `next` will
    // be called once for each item in "sel"
    $(sel).fadeOut("fast", function(){
        $(this).fadeIn("fast", function(){
            queue.next();
        });
    });
} 
```

您将希望在`Queue`整个范围内都可以访问对象。我在这里使它成为全球性的：

```
var q = new Queue();
var senNum = 0;

$(function(){    
    $("#button").click(function(){
        q.add(type, "Sentence " + (++senNum)).add(flicker, "p:nth-child("+senNum+")");
    });        
}); 
```

我还冒昧地使该`add`方法可链接，因此您可以像上面一样使用它。​</p>

下面是一个使用一些方法来创建类似控制台的界面的示例：

[http://jsfiddle.net/ymxu5/15/](http://jsfiddle.net/ymxu5/15/)

# objective-c - -iOS 6 中的 [UITableView setStyle:] 使应用程序崩溃（但在 iOS 5.1 中没有）

> ID：12516537
> 
> 赞同：1
> 
> 时间：2012-09-20T16:05:22.947
> 
> 标签：objective-c, ios, ios5, ios6, ios5.1

由于某些原因，我们有时必须将属性从 a 设置为`NSDictionary`a `UIView`。
一切都很好，直到 iOS 6 发布。现在`-[UITableView setValue:value forKey:@"style"]`正在崩溃应用程序。在 iOS 6 中它会调用`setValue:forUndefinedKey:`，但在 iOS 5.1 中它不会调用（然后一切正常）。我知道`style` `UITableView`' 的属性是只读的，但是......为什么？我有自己的实现，`setValue:forUndefinedKey:`但我不想以某种方式过滤这些属性（这很难）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T16:07:26.057

> 我知道样式 UITableView 的属性是只读的，但是……为什么？

因为苹果决定这样做，而且他们可能有一个很好的理由。不要尝试设置只读属性，它们会使您的应用程序崩溃。

# tsql - SQL 查找日期不唯一的记录

> ID：12516541
> 
> 赞同：2
> 
> 时间：2012-09-20T16:05:28.303
> 
> 标签：tsql

我有一个表，其中每天导入一个文件，不幸的是，它是在没有约束的情况下创建的，所以我必须找到可能连续两天导入相同记录的问题。

因此，我想编写一个查询，它会告诉我何时多次导入具有特定“标题日期”的记录（标题日期每天应该是唯一的）。我用于导入日期的字段是日期时间“dataDate”字段。我的标题日期字段称为“headerDate”，也是一个日期时间字段，我的表是 tblCases。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:07:40.220

这将为您提供多行的日期：

```
SELECT headerDate
FROM tblCases
GROUP BY headerDate
HAVING COUNT(*) > 1 
```

当然，这是可扩展的，可以为您提供在表中为您指定的任何列重复的行：

```
SELECT headerDate, col1, col2, col3, ...
FROM tblCases
GROUP BY headerDate, col1, col2, col3, ...
HAVING COUNT(*) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:22:09.210

如果您想要有关 dataDate 的详细信息，那么

```
select * 
FROM tblCases
where headerDate in 
(
    SELECT headerDate
    FROM tblCases
    GROUP BY headerDate
    HAVING COUNT(*) > 1
)
order by headerDate, dataDate 
```

# selenium - 如何仅获取元素 ID - 使用 Selenium WebDriver 2

> ID：12516542
> 
> 赞同：15
> 
> 时间：2012-09-20T16:05:30.403
> 
> 标签：selenium, webdriver, selenium-webdriver

编辑：我也试过这个

```
 var webElements1 = (Driver.FindElements(By.XPath("//*[@id='ctl00_ContentPlaceHolder1_Control1_lstCategory']//input"))).ToList(); 
```

我得到空文本

我试图找到一种方法来从我得到的列表中获取 ID，下面是我的代码和我的屏幕打印照片。

//WebDriver 获取文本列表

下面的代码返回了正确的记录数，但它只是给了我，`Text`但我追求`Text`的`Id`是一个特定的`Text`

我试过这个：

```
var webElements1 = (Driver.FindElements(By.XPath("//*[@id='ctl00_ContentPlaceHolder1_Control1_lstCategory']/tbody/tr/td/span"))).ToList(); 
```

这

```
var webElements2 = (Driver.FindElements(By.XPath("//*[@id='ctl00_ContentPlaceHolder1_Control1_lstCategory']/tbody/tr/td"))).ToList(); 
```

还有这个...

```
var webElements3 = (Driver.FindElements(By.XPath("//*[@id='ctl00_ContentPlaceHolder1_Control1_lstCategory']"))).ToList(); 
```

行的所有代码给了我正确的回报，但没有 ID。

这是我的页面的打印屏幕：

![在此处输入图像描述](../Images/4cf77f5de5ddd46e365db6c334ceb4a0.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T16:26:58.190

使用以下方法获取所有元素后，循环运行以获取所有元素的 id：

```
List<WebElement> element = driver.findElements(By.XPath("//*[@id='ctl00_ContentPlaceHolder1_Control1_lstCategory']//input")));

for(WebElement ele:elements)
{

        ele.getAttribute("id");     // for getting id of each element

        ele.getText();              //for getting text of each element

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:52:59.683

1）我将尝试分享我选择解决您的问题的方法的想法：

```
getElementsByTagName('input');//returns array of elements 
```

2）使用js执行器获取元素的属性，特别是ID，遍历getElementsByTagName（'input'）返回的整个数组并获取他们的ID。//我用来查找颜色属性的代码示例：

```
public String jsGetColor(String cssSelector){

    JavascriptExecutor js = (JavascriptExecutor) driver;
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append("var x=$(\'"+css+"\');");
    stringBuilder.append("return x.css('color')");
    String res= (String) js.executeScript(stringBuilder.toString());
    return res;

} 
```

这只是我的假设如何尝试。希望它能以某种方式帮助你）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-19T15:50:24.710

如果您只需要一个 id：

```
String id = driver.findElement(By.xpath("//*[contains(text(), 'Your text')]")).getAttribute("id"); 
```

# apache - Apache2 在同一台服务器上托管两个站点

> ID：12516544
> 
> 赞同：0
> 
> 时间：2012-09-20T16:05:31.963
> 
> 标签：apache, svn, ubuntu

我试图在同一个站点上托管颠覆和维基。

我在 /etc/apache2/sites-available 中创建了两个文件

在“颠覆”

我有

```
<VirtualHost -myserverIP-:80>
        ServerAdmin webmaster@localhost
        ServerName  svn.example.com
        DocumentRoot /var/svn/repos
        <Location /svn/repos>
                DAV svn
                SVNPath /var/svn/repos
      AuthType Basic
      AuthName "Subversion Repository"
      AuthUserFile /etc/apache2/passwords
      Require valid-user
        </Location>

</VirtualHost> 
```

在“维基”中我有

```
<VirtualHost -myserverIP-:80>
        ServerAdmin webmaster@localhost
        ServerName wiki
        ServerAlias -myserverIP-

        DocumentRoot /home/www/wiki/html
        <Directory /home/www/wiki/html>
                AllowOverride None
                Options -Indexes -MultiViews -SymLinksIfOwnerMatch +FollowSymLinks
                Order allow,deny
                allow from all
        </Directory>

        <Location /wiki>
        </Location>

        <DirectoryMatch "^/home/www/wiki/html/(data|conf|bin|inc)/">
            Order allow,deny
            Deny from all
            Satisfy All
        </DirectoryMatch>

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        ErrorLog /home/www/wiki/logs/error.log
        CustomLog /home/www/wiki/logs/access.log combined

</VirtualHost> 
```

但是现在，当我浏览到服务器的 IP 地址时，我得到了 /var/svn/repos 目录的内容，而当我刚刚获得 wiki 页面时，我得到了 wiki 索引页面。我实际上可以去 -IPaddress-/svn/repos 并查看 SVN 存储库，但是 -IPaddress-/wiki 不起作用。

感谢您的提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:22:33.163

您的两个虚拟主机都在同一台机器上的 80 端口上。Apache 只能猜测您要使用哪一个。它正在猜测颠覆之一并浏览到指定的 DocumentRoot。您需要区分虚拟主机，或使用服务器名称而不是 IP 浏览到服务器。

相反，您可以在其他虚拟主机中设置 SVN 位置。

还可以考虑使用 /etc/apache2/mods-available/dav_svn.conf，具体取决于您的操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:35:01.943

> 但是现在，当我浏览到服务器的 IP 地址时，我得到了 /var/svn/repos 目录的内容，而当我刚刚获得 wiki 页面时，我得到了 wiki 索引页面。我实际上可以去 -IPaddress-/svn/repos 并查看 SVN 存储库，但是 -IPaddress-/wiki 不起作用。

当您向 apache 发出请求并且您使用的主机名未由任何`ServerName`或`ServerAlias`任何虚拟主机定义时，apache 返回***默认***虚拟主机，该虚拟主机始终是文件中的第一个虚拟主机（或名称为最小的词典顺序，例如`00-default_vhosts.conf`)。在您的情况下，您的 SVN 虚拟主机是第一位的，因此它是“默认”虚拟主机。如果您将 2 换成另一个将是“默认”虚拟主机。

# c++ - Openframeworks - 通过 OpenGL 调用从其中心旋转图像

> ID：12516550
> 
> 赞同：0
> 
> 时间：2012-09-20T16:05:53.763
> 
> 标签：c++, opengl, openframeworks

我正在使用 openframeworks （通过 OpenGL 渲染），我正在尝试从它的中心旋转图像。

我知道我应该使用`ofRotate()`，`ofTranslate()`但我自己还没有设法弄清楚。这是我到目前为止所尝试的：

```
ofPushMatrix();
ofRotate(ofRandom(10),0.0,0.0,1.0);
leafImg.draw(100,100);
ofPopMatrix(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T17:40:51.130

无需做太多数学运算，您可以使用嵌套坐标系偏移图像，以便在旋转时从中心旋转。简而言之，您将这样做：

1.  将坐标系移动到图像的中心
2.  从那里旋转
3.  在该坐标系内更深一层并向后平移图像大小的一半，因此您偏移回“0,0”

在代码中，这将是：

```
ofPushMatrix();
    ofTranslate(leafImg.width/2, leafImg.height/2, 0);//move pivot to centre
    ofRotate(ofGetFrameNum() * .01, 0, 0, 1);//rotate from centre
    ofPushMatrix();
        leafImg.draw(-leafImg.width/2,-leafImg.height/2);//move back by the centre offset
    ofPopMatrix();
ofPopMatrix(); 
```

我使用缩进让坐标系嵌套的方式更加明显。

它与以下内容相同：

```
ofPushMatrix();
    ofTranslate(leafImg.width/2, leafImg.height/2, 0);//move pivot to centre
    ofRotate(ofGetFrameNum() * .01, 0, 0, 1);//rotate from centre
    ofPushMatrix();
        ofTranslate(-leafImg.width/2,-leafImg.height/2,0);//move back by the centre offset
        leafImg.draw(0,0);
    ofPopMatrix();
ofPopMatrix(); 
```

如您所见，旋转到中心相当简单。在您的空闲时间尝试找出如何针对任意点旋转。

在幕后有一些线性代数在进行，但是 push/pop 矩阵调用基本上会为您处理基本的矩阵乘法。您仍然需要了解和练习使用 pushMatrix/popMatrix 调用。虽然是Processing，但原理完全一样，语法也很相似，所以推荐这篇文章：[2D Transformations](http://processing.org/learning/transform2d/)

# c++ - 为什么要调用这个构造函数？

> ID：12516560
> 
> 赞同：2
> 
> 时间：2012-09-20T16:07:04.550
> 
> 标签：c++

我对以下程序为何调用第一个构造函数感到困惑。

```
class A  
{  
public:  
        A(const char *c="\0")  
        {  
                cout<<"Constructor without arg";  
        }  
        A(string c)  
        {  
                cout<<"New one";  
        }  

};  

int main()  
{  
        A a="AMD";  
        return 0;  
} 
```

输出是 `Constructor without arg`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T16:08:09.327

`"AMD"`是 a `const char[]`，它被隐式转换为`const char*`，因此第一个构造函数 [ `A(const char *c="\0")`] 是最佳匹配。

请注意，这`A(const char *c="\0")`不是*没有参数的构造函数*，它是一个将单个参数作为参数的构造函数，并且在未指定`const char*`a 时具有可选的默认值。`const char*`在这种情况下，您传递了 a `const char*`，因此它使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:08:52.293

因为字符串文字的类型`const char[]`是隐式转换的类型，`const char*`而不是用户定义的转换`std::string(const char*)`（这不是`string`构造函数的真正签名，但足以解释此解释）。

另外：初始化不是赋值。这就是为什么首先调用构造函数而不是构造函数的原因`operator=`。

C++11 中赋值的首选语法是`A a{"ASDF"};`. 它使事情更加统一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:08:44.397

您使用 const char * 调用构造函数，因为这就是“AMD”。它不是一个字符串。如果你把 A a(string("AMD")) 它会工作。

# c# - 仅在服务器中出现编译错误：基类包含字段“MyControl_1”，但其类型（MyControl）不兼容（ASP.MyControl_ascx）

> ID：12516562
> 
> 赞同：3
> 
> 时间：2012-09-20T16:07:06.253
> 
> 标签：c#, asp.net, user-controls, webforms, asp.net-2.0

我很绝望。

我们在 ASP.NET (webforms) 中有一个带有 Framework 2.0 的小项目。我对 UserControl (ASCX) 进行了一些维护。我是我的开发机器，但是当我将文件上传到服务器时，会抛出这个异常：

> 基类包含字段“MyControl_1”，但其类型（MyControl）与控件类型（ASP.MyControl_ascx）不兼容

我几乎尝试了所有方法：

*   [http://chanmingman.wordpress.com/2011/09/07/the-base-class-includes-the-field-mycontrol_1-but-its-type-mycontrol-is-not-compatible-with-the-type- of-control-asp-mycontrol_ascx/](http://chanmingman.wordpress.com/2011/09/07/the-base-class-includes-the-field-mycontrol_1-but-its-type-mycontrol-is-not-compatible-with-the-type-of-control-asp-mycontrol_ascx/)
*   [http://support.microsoft.com/kb/919284](http://support.microsoft.com/kb/919284)

这仅发生在生产服务器中。我试图将 ASCX 包装在命名空间中：

代码：

```
namespace MyControl {
   ...
} 
```

澳交所：

```
Inherits="MyControl.Control" 
```

使用该控件的 ASPX：

```
<%@Import Namespace="MyControl" %>
<%@ Register Src="Controls/SomeControl.ascx"  TagName="SomeControl" TagPrefix="uc2" %>
<uc2:SomeControlID="Control1" runat="server" /> 
```

编译模式没有使用固定的程序集命名，我无法更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:51:16.133

我有一个类似的问题。我找到了解决方法 - 更改用户控件声明。

您的生产服务器可能会运行一个 Web 应用程序。Web 应用程序期望用户控件中的声明具有某种格式。您可能已将基于文件的项目中其他地方构建的用户控件放置到 Web 应用程序中？

`CodeBehind="MyControl.ascx.vb"`使用 Web 应用程序用户控件（默认情况下） ，您可以获得`AppName.MyControl`.

使用基于文件的项目，您将获得`CodeFile="MyControl.ascx.vb`和继承`MyControl`.

我更改了用户控件中的声明，直到它起作用。看起来您可能需要在进行更改并重新编译后向生产服务器提供新的 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:14:47.833

确保如果您有一个`page`已经包含任何内容的内容`usercontrol`将被更新以发布，在这种情况下，您将发布`Usercontrol`并为两者`Page`进行预编译`dlls`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T15:54:53.000

我去了 OP 提供的页面： https: [//support.microsoft.com/en-us/kb/919284?wa=wsignin1.0](https://support.microsoft.com/en-us/kb/919284?wa=wsignin1.0)

第二个建议对我有用：

> 方法 2：重新排序应用程序中的文件夹

因此，最后，我将所有控件放在同一个子文件夹中，并且效果很好。它可能不是每个人的选择，但值得一试。

# ios - HTTP POST 到 SPARQL 服务器，返回空 HTTP 200

> ID：12516563
> 
> 赞同：1
> 
> 时间：2012-09-20T16:07:07.193
> 
> 标签：ios, http, post, sparql, openframeworks

我正在向[http://api.artsholland.com/sparql?apiKey=27b6abd4129fc9ced3aa5390fd4fb15b发送 HTTP POST 请求](http://api.artsholland.com/sparql?apiKey=27b6abd4129fc9ced3aa5390fd4fb15b)

使用此查询：

```
 string query =
"PREFIX ah: <http://purl.org/artsholland/1.0/>  "
"PREFIX data: <http://data.artsholland.com/>  "
"PREFIX nub: <http://resources.uitburo.nl/>  "
"PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns/>  "
"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema/>  "
"PREFIX owl: <http://www.w3.org/2002/07/owl/>  "
"PREFIX dc: <http://purl.org/dc/terms/>  "
"PREFIX foaf: <http://xmlns.com/foaf/0.1/>  "
"PREFIX xsd: <http://www.w3.org/2001/XMLSchema/>  "
"PREFIX time: <http://www.w3.org/2006/time/>  "
"PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos/>  "
"PREFIX vcard: <http://www.w3.org/2006/vcard/ns/>  "
"PREFIX osgeo: <http://rdf.opensahara.com/type/geo/>  "
"PREFIX bd: <http://www.bigdata.com/rdf/search/>  "
"PREFIX search: <http://rdf.opensahara.com/search/>  "
"PREFIX fn: <http://www.w3.org/2005/xpath-functions/>  "
"PREFIX gr: <http://purl.org/goodrelations/v1/>  "    
"SELECT ?v ?p ?date ?title ?desc ?modified ?type ?genre  "
"WHERE {  "
    "?v a ah:Venue .  "
    "?p dc:modified ?modified .  "
    "?e ah:venue ?v .  "
    "?e ah:production ?p .  "
    "OPTIONAL {{  "
        "?p dc:title ?title .  "
    "}}  "
    "OPTIONAL {{  "
        "?p ah:shortDescription ?desc .  "
    "}}  "
    "OPTIONAL {{  "
        "?p ah:productionType ?type .  "
    "}}  "
    "OPTIONAL {{  "
        "?p ah:genre ?genre .  "
    "}}  "
    "?v geo:geometry ?geometry .  "
    "FILTER (search:distance(?geometry, \"POINT(4.890        52.3764)\"^^<http://rdf.opensahara.com/type/geo/wkt>) < 2000 *  "  "0.00000898315284) .  "
    "?e time:hasBeginning ?date .  "
    "FILTER (?date >= \"2012-09-06T00:00:00Z\"^^xsd:dateTime) .  "
    "FILTER (?date <= \"2012-09-06T23:59:59Z\"^^xsd:dateTime) .  "
    "} ORDER BY ?v  "
    "LIMIT 100  "; 
```

使用这些表单字段：

```
ofxHttpForm form;
form.action = action_url;
form.method = OFX_HTTP_POST;
form.addFormField("query", query);
form.addFormField("output", "json");
httpUtils.addForm(form); 
```

我得到了 200 OK 的回复，但没有尸体。我已经多次调整查询，但仍然没有有效的返回:(

使用的库是[https://github.com/arturoc/ofxHttpUtils](https://github.com/arturoc/ofxHttpUtils)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:09:25.223

我使用演示密钥和您的密钥在同一个端点（使用端点的 Web 界面）上尝试了您的 SPARQL 查询，但得到了 HTTP 500 内部服务器错误（而不是空的 HTTP 200 响应）。

当我使用正确的命名空间并将块中的“{{”替换为“{”时，我确实得到了结果`OPTIONAL`。Web 界面预定义的命名空间是

```
PREFIX ah: <http://purl.org/artsholland/1.0/>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX dc: <http://purl.org/dc/terms/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX time: <http://www.w3.org/2006/time#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX vcard: <http://www.w3.org/2006/vcard/ns#>
PREFIX osgeo: <http://rdf.opensahara.com/type/geo/>
PREFIX bd: <http://www.bigdata.com/rdf/search#>
PREFIX search: <http://rdf.opensahara.com/search#>
PREFIX fn: <http://www.w3.org/2005/xpath-functions#>
PREFIX gr: <http://purl.org/goodrelations/v1#>
PREFIX gn: <http://www.geonames.org/ontology#> 
```

你必须使用这些（注意其中`#`的`/`一些，这很重要）。

# actionscript-3 - 动作脚本，日期构造函数误读月份

> ID：12516564
> 
> 赞同：0
> 
> 时间：2012-09-20T16:07:11.870
> 
> 标签：actionscript-3

这就是我调用构造函数的方式：

日期 registerDate = new Date("2012","09","20","09","49","25","325");

这是输出：

2012 年 10 月 20 日星期六 09:49:25 GMT-0600

“09” = 十月？

我从 xml 中的 java web 服务获取这些参数，这就是为什么它们是字符串，但是，我得到与 int 值相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:10:24.320

这是[设计使然](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Date.html#Date%28%29)，我认为：

> **日期（）构造函数**
> 
> 公共函数日期（年或时间值：对象，月：数字，日期：数字 = 1，小时：数字 = 0，分钟：数字 = 0，秒：数字 = 0，毫秒：数字 = 0）

```
...  
month:Number — An integer from 0 (January) to 11 (December).
... 
```

换句话说，它从 0 开始计算月份，所以是的，10 月是 9。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:13:00.843

这不是错误，请查看文档。在日期中，月份的值介于 0 和 11 之间，0 表示一月，11 表示十二月。我希望这对你有帮助。

[http://livedocs.adobe.com/flash/9.0_es/ActionScriptLangRefV3/Date.html](http://livedocs.adobe.com/flash/9.0_es/ActionScriptLangRefV3/Date.html)

# .net - ASP.NET MVC 填充空列表 在视图中

> ID：12516573
> 
> 赞同：2
> 
> 时间：2012-09-20T16:07:44.567
> 
> 标签：.net, asp.net-mvc, razor

我希望填充一个`List<string>`最初完全为空但在视图中填充的对象。

该对象提供硬盘上图像的 URL，以便系统可以搅动它们并对其执行某些逻辑。

目前我正在对解决方案进行硬编码，并且只添加*一个*字符串：

```
@Html.LabelFor(m => m.ImageUrlCollection[0], "Upload Image")
@Html.TextBoxFor(m => m.ImageUrlCollection[0]) 
```

任何人都可以看到一个明显的解决方法吗？同样，列表最初是空的，我现在没有最大数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:00:20.697

我建议您查看[以下文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)，该文章说明了如何实现这一目标的一个很好的例子。这是[对 Razor](https://stackoverflow.com/a/12384710/29407)和主视图模型的改编，而不是直接使用集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:26:32.117

据我了解，您试图用 jquery/javascript 填充列表然后提交表单？看看**Darin Dimitrov的** [例子](https://stackoverflow.com/questions/4872192/checkboxlist-in-mvc3-0)。您所需要的只是创建具有强名称的输入，为名称中的每个元素设置索引，提交表单后，您可以将填充的列表保存在数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:09:35.620

我认为您可以执行以下操作：

在控制器中：

```
yourModel.ImageUrlCollection = new List<string>;
//if you want you can yourModel.ImageUrlCollection.Add(new string("First Image"));
View(yourModel); 
```

在你看来，你做你所做的，并以你想要的方式填充列表。

请让我知道这是否有帮助。

# powershell - 在多台远程机器上获取服务

> ID：12516574
> 
> 赞同：5
> 
> 时间：2012-09-20T16:07:45.147
> 
> 标签：powershell

我只能获取命令以在文本文件中返回第一台计算机上的服务。对于这个任务，有没有比 for-each 更好的方法？

```
Get-Service *vault* -ComputerName (Get-Content c:\users\sean\desktop\js.txt) | select name,status,machinename | sort machinename | format-table -autosize 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T16:15:29.920

不带`get-content`. 尝试这个：

```
Get-Service *vault* -ComputerName c:\users\sean\desktop\js.txt | select name,status,machinename | sort machinename | format-table -autosize 
```

如果这不起作用，请尝试：

```
$Computers = Get-Content c:\users\sean\desktop\js.txt
Get-Service *vault* -computername $Computers | Select name,status,machinename |sort machinename |format-table -autosize 
```

如果您渴望单线，请尝试以下操作：

```
Get-Content c:\users\sean\desktop\js.txt | Get-Service *vault* | Select name,status,machinename |sort machinename |format-table -autosize 
```

我会先尝试顶部的。我会测试，但我现在无法访问任何可以进行适当测试的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-14T22:37:50.753

```
$Computers = get-content .\desktop\test.txt
$Service = "Vault"

foreach ($computer in $computers) {
   $computer 

   $Servicestatus = get-service -name $Service -ComputerName $computer

}

$Servicestatus | select-object Name,Status,MachineName | format-table -Autosize 
```

这对我有用，它为我提供了文本文件中的每台计算机，它会查找服务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-08T14:59:53.783

这就是我使用的。我从 AD 中的 OU 获取计算机列表。

```
Import-Module ActiveDirectory

$ou = "OU=Servers,DC=Domain,DC=com"

$servers = Get-ADComputer -Filter * -SearchBase $ou | select-object -expandproperty name

Foreach ($server in $servers){

    $Data = Get-Service -ServiceName *IIS*,*TomCat*,*httpd* -ComputerName $server | select machinename,name | sort machinename | format-table -AutoSize 

    Write($Data) | Out-File .\WebServices.txt -Append

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-27T12:18:40.560

遵循旧版本 PowerShell 的内存限制限制，我需要刷新我的代码：

**旧代码：** gwmi win32_service -computer $allcomputers | Select-Object __SERVER,Name,state,startmode,StartName

**新代码：**

`$servers = Get-Content "computers.txt" Foreach ($servers in $servers) {

Get-WmiObject -Class WIN32_service -ComputerName $server | Select-Object __SERVER,Name,state,startmode,StartName | Export-Csv -path "Report.CSV" -NoTypeInformation -Append

}`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-10T14:18:31.460

```
$servers = Get-Content .\servers.txt
Foreach ($server in $servers) {
  "$server"
  Get-Service -ComputerName $Server -name -like "*vault*"
  "-------------------"
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-15T23:06:59.120

您可以通过以下方式获取 AD 域中所有服务的列表：

```
Get-ADComputer -Filter {OperatingSystem -Like “Windows 10*”} | ForEach-Object {Get-WmiObject -Class Win32_Service -Computer $_.Name} 
```

更多有用的示例（获取文本文件中列出的所有计算机的服务列表等）： [https ://www.action1.com/kb/list_of_services_on_remote_computer.html](https://www.action1.com/kb/list_of_services_on_remote_computer.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-18T07:30:04.750

`Get-Service -ComputerName ...`在 PowerShell 2.0 中有一个错误，它只返回第一台计算机。这在较新版本中已修复，因此如果您升级到 PowerShell 3.0 或更新版本，您的原始代码将可以正常工作。

作为一种解决方法，使用 foreach 循环`Get-Service`为每台计算机运行一次：

```
Get-Content c:\users\sean\desktop\js.txt |
ForEach-Object { Get-Service -Name *vault* -ComputerName $_ } |
Select-Object -Property Name, Status, MachineName |
Sort-Object -Property MachineName |
Format-Table -AutoSize 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-05-13T18:03:50.583

尼克的解决方案对我完全不起作用。我最终写了一个快速而肮脏的作品：

```
$servers = Get-Content .\servers.txt
Foreach ($server in $servers) {
"$server"
Get-Service *vault*
"-------------------"
} 
```

# ruby-on-rails - 如何为给定日期时间的每个日期创建一个哈希/时间数组

> ID：12516577
> 
> 赞同：0
> 
> 时间：2012-09-20T16:07:53.817
> 
> 标签：ruby-on-rails, ruby, date

我在具有以下格式的表中有一个包含日期时间的列：

```
2012-10-30 08:00:00 UTC 
```

我如何创建一个按日期收集时间的数组或哈希：

```
2012-10-30
  8:00
  9:00
  13:00 
2012-11-02
  8:00
  9:00 
```

最后我希望有这样的网络输出：

```
October 30, 2012
  8:00   <reserve button>
  9:00   <reserve button>
  13:00  <reserve button>

November 2, 2012
  8:00   <reserve button>
  9:00   <reserve button> 
```

如果我可以正确设置数组，我可以找出 html 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:22:30.110

从表中获取所有可用的时间戳，例如：

```
available_times = SomeTable.select(:some_column).order(:some_column).all 
```

按日期构建哈希：

```
@result = available_times.inject({}) do |m, timestamp| 
  date = timestamp.to_date
  m[date] ||= []
  m[date] << timestamp
  m
end 
```

@result 将是一个带有可用时间的日期哈希。

您现在可以在视图中执行此操作：

```
<% @result.each do |date, timestamps| -%>
  <div><%= date.strftime("%B %-d, %Y") %></div>
   <% timestamps.each do |timestamp| -%> 
     <%= timestamp.strftime("%k:%M") %>  <input id='<%= timestamp.to_f%>' type='button' value='Reserve Button'/>
     <br/>
   <% end -%>
<% end -%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:30:20.683

```
sample = ["2012-10-28 08:30:00 UTC", 
          "2012-10-28 09:00:00 UTC", 
          "2012-11-30 09:15:00 UTC", 
          "2012-11-30 08:00:00 UTC"]

sample.each_with_object(Hash.new{ |h, k| h[k] = [] }) do |d, h|
  date = DateTime.parse(d)
  h[date.strftime("%B %-d, %Y")] << date.strftime("%k:%M")
end
# => {"October 28, 2012"=>["8:30", "9:00"], "November 30, 2012"=>["9:15", "8:00"]} 
```

# php - 为什么这个 PDOStatement 不能正确执行？

> ID：12516578
> 
> 赞同：3
> 
> 时间：2012-09-20T16:07:55.257
> 
> 标签：php, pdo

我还有其他可以正常执行的 PDO 语句，但是这个语句搞砸了。

```
$sth = $dbh->prepare( 'SELECT * FROM `post` LIMIT ?,?' );
$sth->execute( array( 0, 10 ) ); 
```

以上不工作，但以下工作：

```
$sth = $dbh->prepare( 'SELECT * FROM `post` LIMIT 0,10' );
$sth->execute( array( 0, 10 ) ); 
```

那么，当第一种方法应该给出相同的响应时，为什么不显示我的任何结果呢？

* * *

这就是我现在所拥有的

```
$start = 0;
$perpage = 10;

$sth = $dbh->prepare( 'SELECT * FROM `post` LIMIT ?,?' );
$sth->bindValue(1, $start, PDO::PARAM_INT);
$sth->bindValue(2, $perpage, PDO::PARAM_INT);
$sth->execute(); 
```

这也行不通

```
$sth = $dbh->prepare( 'SELECT * FROM `post` LIMIT ?,?' );
$sth->bindParam(1, 0, PDO::PARAM_INT);
$sth->bindParam(2, 10, PDO::PARAM_INT);
$sth->execute(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:12:23.817

问题很可能是 PDO 会将任何输入解释为字符串。你可以试试

```
$sth = $dbh->prepare( 'SELECT * FROM `post` LIMIT :low,:high' );
$sth->bindValue(':low', 0, PDO::PARAM_INT);
$sth->bindValue(':high', 10, PDO::PARAM_INT);
$sth->execute(); 
```

或者

```
$low = 0;
$high = 10;
$sth = $dbh->prepare( 'SELECT * FROM `post` LIMIT :low,:high' );
$sth->bindParam(':low', $low, PDO::PARAM_INT);
$sth->bindParam(':high', $high, PDO::PARAM_INT);
$sth->execute(); 
```

资料来源：[如何在 LIMIT 子句中应用 bindValue 方法？](https://stackoverflow.com/questions/2269840/php-pdo-bindvalue-in-limit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:08:12.857

不确定您是否看到了这个[问题](https://stackoverflow.com/questions/2269840/php-pdo-bindvalue-in-limit)，但您是否尝试过将您发送的值转换为整数？

```
$start = 0;
$perpage = 10;

$sth = $dbh->prepare( 'SELECT * FROM `post` LIMIT ?,?' );
$sth->bindValue(1, (int)$start, PDO::PARAM_INT);
$sth->bindValue(2, (int)$perpage, PDO::PARAM_INT);
$sth->execute(); 
```

或者它说要这样做：

```
$start = 0;
$perpage = 10;

$sth = $dbh->prepare( 'SELECT * FROM `post` LIMIT ?,?' );
$sth->bindValue(1, intval($start), PDO::PARAM_INT);
$sth->bindValue(2, intval($perpage), PDO::PARAM_INT);
$sth->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:11:50.667

这是因为“准备”并使用数组参数执行认为您的数据默认是字符串。所以他们用''逃避他们。问题在于，当您处理限制时，这些引号会触发错误。解决方案是 bindValue

```
$sth = $dbh->prepare( 'SELECT * FROM `post` LIMIT :number OFFSET :start' );
$sth->bindValue("number",10, PDO::PARAM_INT);
$sth->bindValue("start",0,PDO::PARAM_INT);
$sth->execute(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T17:25:58.960

什么数据库？MySQL？SQL 服务器？甲骨文？

在 MySQL 中，带有`LIMIT`子句的 PDO 应该像 GlaciesofPacis 的帖子一样工作。但是，如果您使用的是 SQL SERVER，则您没有使用正确的语法。引用自[StackOverflow](https://stackoverflow.com/questions/216673/emulate-mysql-limit-clause-in-microsoft-sql-server-2000)问题：

```
$query = "
DECLARE @Sort
SET ROWCOUNT :startRow
SELECT @Sort = SortColumn FROM Table ORDER BY SortColumn
SET ROWCOUNT :pageSize
SELECT ... FROM Table WHERE SortColumn >= @Sort ORDER BY SortColumn
";

$dbh->prepare($query);
$sth->bindParam(':startRow',0, PDO::PARAM_INT);
$sth->bindParam(':pageSize',10, PDO::PARAM_INT);
$sth->execute(); 
```

# c - 对 %c 和 ASCII 代码感到困惑

> ID：12516580
> 
> 赞同：1
> 
> 时间：2012-09-20T16:07:58.967
> 
> 标签：c, ascii, asciiencoding

为什么会`printf("%c ", 2293552);`打印`0`？

ASCII 值是从 0 到 127 我知道这一定是一些循环的东西，但我想要一个清楚的解释。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:10:32.573

数字`2293552`对应`0x22ff30`。当`printf`将其解释为 ASCII 时，它会忽略包含 的最后八位之外的所有位`0x30`，即`'0'`.

来自 C99 标准：

> 7.19.1.6.8 -- `%c`：如果不存在`l`长度修饰符，则将 int 参数转换为`unsigned char`，并写入结果字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:11:00.483

可能`%c`只使用参数的低位字节，即`2293552 & 255 = 48 = '0'`.

# javascript - 如何访问包含在 jquery 文件上传插件中上传的文件列表的数组/对象？

> ID：12516581
> 
> 赞同：1
> 
> 时间：2012-09-20T16:08:03.637
> 
> 标签：javascript, jquery, ajax, forms, file-upload

我已经在我正在开发的 Rails 站点上设置了一个表单，并配置了 jquery 文件上传插件。上传表单工作正常。可以选择多个文件，并且所有 ajax 上传功能都可以正常工作。

我遇到的问题是我需要为用户提供一种方法来“取消暂存”他们选择上传的文件。我设置插件的方式允许用户选择或拖放文件，当文件被添加到表单时，它们被添加到暂存区域（见下文）。我需要做的是允许用户“取消暂存”或从表单中删除文件。

基本上我需要一种访问和删除 jquery 文件上传表单中引用的文件的方法。

我正在使用基本的 jquery 文件上传插件，没有 jquery 文件上传附带的所有可选脚本。这是 jquery 文件上传 repo 的链接：[https ://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

[![截屏](../Images/630a1853f30dbca29e8fc300fdf18d06.png)](https://i.stack.imgur.com/3DTnw.png)

这是配置 jquery 文件上传插件的 JavaScript（此代码包含在文档就绪函数中）：

```
// initalize and configure the jQuery File Uploader
$('#fileupload').fileupload({
  uploadTable: $('.file-upload-list'),
  downloadTable: $('#photo'),
  dropZone: dropZone,
  sequentialUploads: true,
  autoUpload: false,
  maxFileSize:10000000,
  dataType: 'text',

  ... some code removed

  // when the user drags a file into the upload area
  drop: function (e, data) {
    $('.file-upload-table').show();
    $.each(data.files, function (index, file) {
      $('.file-upload-list').append('<li>' + file.name + '<a href="" class="close cancel"></a></li>');
});
  autoResizeColorbox();
  },

  // when the user selects a file normally
  change: function (e, data) {
    $('.file-upload-table').show();
    $.each(data.files, function (index, file) {
      $('.file-upload-list').append('<li>' + file.name + '<a href="" class="close cancel"></a></li>');
});
  autoResizeColorbox();
  },

  ... some code removed
}); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T21:51:29.313

我遇到了同样的问题并找到了答案。如果提交回调返回 false，则不会上传相应的文件。

# c++ - 宏重定义警告

> ID：12516584
> 
> 赞同：0
> 
> 时间：2012-09-20T16:08:08.863
> 
> 标签：c++, macros, warnings, visual-studio-2012, wdk

我正在将一个 Windows 驱动程序项目`VS 2005`从`VS 2012`. 许多宏重新定义警告会在以下位置生成`VS 2012`-

```
....

1>C:\WINDDK\7600.16385.1\inc\api\sal.h(707): warning C4005: '__format_string' : 
                                                                macro redefinition
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\sal.h(2860) : 
                                       see previous definition of '__format_string'

..... 
```

它与 VS 2005 一起编译得很好，`sal.h`因为它没有宏`__format_string`和其他。但是，`sal.h`VS 2012 附带的有这些宏。因此，驱动程序与 VS 2012`sal.h`的标准之间存在冲突。`sal.h`

```
#define __format_string                            // With DDK
#define __format_string    _Printf_format_string_  // On VS 2012 
```

我不能忽略标准标题，因为它们在构建过程中使用。

```
....
1> Note: including file:  C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\string.h
1> Note: including file:  C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\crtdefs.h
.... 
```

没有`#if`关于这些宏的指令，`sal.h`因此我可以`#undef`在 VS 2012 中使用它。这个问题有什么解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:25:14.993

您不应该在驱动程序代码中包含 VS 标准头文件，它们不是供内核使用的。仅使用 WDK 标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:33:31.297

好吧，如果我正确理解了您想要的内容，您需要做的就是添加

```
#ifdef __format_string 
#undef __format_string
#endif 
```

在重新定义之前。

# android - 位图大小更改

> ID：12516585
> 
> 赞同：0
> 
> 时间：2012-09-20T16:08:12.630
> 
> 标签：android

我有一个包含图像的 ImageView。此图像通过按钮单击旋转，但有时它会变小或恢复其原始大小。我不知道是什么原因造成的。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    //tablelayout here

     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true" 
        android:layout_centerVertical="true"
        android:orientation="vertical" >
    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:maxWidth="200dp" 
        android:maxHeight="200dp"
         /> 
    </LinearLayout>
</RelativeLayout> 
```

初始设置：

```
 iv = (ImageView)findViewById(R.id.imageView1);
        int id = getResources().getIdentifier("landolt", "drawable", getPackageName());
        iv.setImageResource(id);

        myImg = BitmapFactory.decodeResource(getResources(), R.drawable.landolt);
        matrix = new Matrix();

        size = 200;

        randomize = new Random();
        random = randomize.nextInt(8) + 1;
        rotate = getAngle(random);  //function created by me
        matrix.postRotate(rotate);
        rotatedBitmap = Bitmap.createBitmap(myImg, 0, 0, myImg.getWidth(), myImg.getHeight(), matrix, true);
        iv.setImageBitmap(rotated); 
```

所以图像被旋转，代码没有大小变化。

按钮点击旋转：

```
 btn1.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        if (rotate == -90)
                        {
                          //rotate back to original direction
                            old_rotate = -rotate;
                            matrix.postRotate(old_rotate);
                          //next rotation
                            random = randomize.nextInt(8) + 1;
                            rotate = getAngle(random);
                            matrix.postRotate(rotate);
                            rotatedBitmap = Bitmap.createBitmap(myImg, 0, 0, myImg.getWidth(), myImg.getHeight(), matrix, true);
                            iv.setLayoutParams(new LinearLayout.LayoutParams(size, size));
                            iv.setImageBitmap(rotated);
                        }
                    }
                    }); 
```

当我启动活动时，图像以其原始大小出现，有时更小。当我单击一个按钮时，图像会变小或变大到其原始尺寸。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:42:40.287

我想通了为什么图像不断变化的大小。旋转时，它在 imageView 中根本没有足够的位置。我在这个[链接](https://stackoverflow.com/questions/8923920/how-to-rotate-the-image-without-changing-its-size)上找到了我的问题的解决方案。

# javascript - Chrome 控制台：重新加载页面

> ID：12516592
> 
> 赞同：33
> 
> 时间：2012-09-20T16:08:33.337
> 
> 标签：javascript, google-chrome

有没有办法从 chrome 开发者控制台的命令行重新加载 chrome 页面（比如单击 F5）？

我已经厌倦了搜索，但没有效果......

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-09-20T16:10:24.850

```
location.reload() 
```

[那很简单...]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-28T08:48:32.860

尝试

```
history.go() 
```

这可能是最短的方法

# javascript - 带有 jquery 的全屏图像滑块

> ID：12516594
> 
> 赞同：0
> 
> 时间：2012-09-20T16:08:34.320
> 
> 标签：javascript, jquery, image, jquery-ui, jquery-plugins

我必须制作一个类似于[http://issuu.com/eb_magazine/docs/ebmag_31/1](http://issuu.com/eb_magazine/docs/ebmag_31/1)的演示网站。该网站是用 Flash 编码的，但我想使用 javascript 和 jQuery 来完成。我想我需要分两部分来做这件事，首先是一个简单的图像滑块，用于在图像之间滑动。我想我可以为此使用任何 jQuery Image 滑块插件。我们单击图像的第二部分，它以带有缩放选项的全屏图像滑块打开。我不知道可以使用哪个插件。这甚至可能与jQuery有关吗？请为此建议任何插件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:19:43.870

我认为[http://www.turnjs.com/](http://www.turnjs.com/)是您查询的最佳解决方案。

> Turn.js 是一个 JavaScript 库，它将利用 HTML5 的所有优点使您的内容看起来像一本真正的书籍或杂志。基于 HTML5 的新用户界面让 Web 变得更漂亮；turn.js 最适合基于 HTML5 的杂志、书籍或目录。

这是一个示例代码：

```
<div id="flipbook">
    <div class="hard"> Turn.js </div> 
    <div class="hard"></div>
    <div> Page 1 </div>
    <div> Page 2 </div>
    <div> Page 3 </div>
    <div> Page 4 </div>
    <div class="hard"></div>
    <div class="hard"></div>
</div>
<script type="text/javascript">
    $("#flipbook").turn({
        width: 400,
        height: 300,
        autoCenter: true
    });
</script> 
```

# asp.net - Asp.Net 母版页视图模型

> ID：12516597
> 
> 赞同：0
> 
> 时间：2012-09-20T16:08:49.483
> 
> 标签：asp.net, master-pages, viewmodel

我有一个实现母版页并运行视图模型的 ASP.Net 应用程序。

当我在我的页面中实现模型时它工作正常，但是当我尝试在我的母版页中实现它时它没有数据绑定？

这是一个示例：

```
<li visible="<%# Model.TabVisible %>">
Misc Tab
</li> 
```

所以我的问题是为什么这不是数据绑定，页面生命周期中的什么事件我应该手动调用 Databind 方法？Page_Load 不这样做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:28:15.117

我是个白痴。您需要在 ListItem 标记中包含 runat="server" 。我真的需要睡一会儿。

# php - 在我的 ajax [object object] 中返回的 SQL 错误或 PHP 错误

> ID：12516602
> 
> 赞同：0
> 
> 时间：2012-09-20T16:09:13.183
> 
> 标签：php, jquery, mysql

单击模式窗口内的按钮时，将调用 ajax。所以我有一个按钮，然后它会弹出一个带有是或否按钮的模式窗口，如果单击是，它将触发这个 ajax 并将数据发送到我的 php.ini。它实际上在我的数据库中保存或更新我的表，但是当它返回时它在我的 ajax 中返回一个 [object object]。

这是php

```
// get data
$selGuest = $_POST["selGuest"];

include("openDB.php");

//3.) insert a record

$insertintoCanceled = "insert into tbl_canceled "
        ."(reserved_id, guest_id, checkin, checkout, type_id, numAdults, numChildren, transacstatus, amountDue)"
        ."("
        ."SELECT * FROM tbl_bookings where reserved_id = " .$selGuest
        .")";
if(!mysql_query($insertintoCanceled, $con))//if it fails
    {
    echo json_encode(array('msg'=>'Error')) //error msg goes here
    die('Error: ' . mysql_error() . "\n");//show the mysql error

    }
echo json_encode(array('msg'=>'Successfully updated')) //success msg goes here

include("closeDB.php");
?> 
```

这是我的ajax

```
var canceldata_json = {
            'selGuest': selGuest,
    };
    $.ajax({
            type: "POST",
            data: canceldata_json,
            dataType:'json',
            url: "./php/cancelBooking.php",
            success: function(msg) {
                    alert("guest information updated real")
                    $('#confirmDialog').fadeOut('slow');

            },
            error:function(msg){
            alert(msg)
            }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:14:45.610

它正在解析您返回的 JSON。改为这样做：

```
alert(msg.msg); 
```

# c - 添加 request_mem_region 后，我的驱动程序每次第一次访问都会失败，并显示“忙碌”消息

> ID：12516603
> 
> 赞同：4
> 
> 时间：2012-09-20T16:09:15.863
> 
> 标签：c, linux, memory-management, linux-kernel, linux-device-driver

好吧，这对我来说真的很奇怪。我有一个模拟的 CAN 总线驱动程序，它是一个 Linux 内核模块。然后我有一个在用户空间运行的测试应用程序，它通过打开文件描述符和发送`ioctl()`消息来访问驱动程序。

现在 CAN 总线驱动程序只是我一直采用的在 x86 平台上运行的东西（它在我们的嵌入式 Coldfire 系统上运行）。在嵌入式系统上，它必须使用`request_mem_region()`/`ioremap()`才能访问内存 I/O 区域，我**不需**要这样做，但我想尽可能多地保持代码通用。

以下是一些有用的定义：

```
#define MCF_MBAR    0x10000000

extern unsigned int Base[];
extern unsigned int can_range[];

  //This is the CAN registers on coldfire, just unused on my x86 desktop
Base[minor] = (MCF_MBAR + 0x1c0000); 
can_range[minor] = 0x180; 
```

然后在初始化期间我们这样做：

```
if(NULL == request_mem_region(Base[minor], can_range[minor], "CAN-IO")) {
    return -EBUSY;
}

can_base[minor] = ioremap(Base[minor], can_range[minor]); 
```

现在，如果我理解正确的话……我们在这里所做的只是请求保留一系列未分配的内存地址，如果我们成功，让我们可以访问它们。

我通过以下方式检查了当前映射的地址`cat /proc/iomem`：

```
00000000-0000ffff : reserved
00010000-0009fbff : System RAM
0009fc00-0009ffff : reserved
000a0000-000bffff : Video RAM area
000c0000-000c8fff : Video ROM
000e2000-000e6fff : Adapter ROM
000f0000-000fffff : reserved
000f0000-000fffff : System ROM
00100000-1ffeffff : System RAM
00200000-0071038b : Kernel code
0071038c-00ad8a7f : Kernel data
00b58000-00c52fff : Kernel bss
                          <--  101C0000-101C0180 : This is where I'd be mapping memory
1fff0000-1fffffff : ACPI Tables
e0000000-e0ffffff : 0000:00:02.0
e0000000-e0bfffff : vesafb
f0000000-f001ffff : 0000:00:03.0
f0000000-f001ffff : e1000
f0400000-f07fffff : 0000:00:04.0
f0400000-f07fffff : vboxguest
f0800000-f0803fff : 0000:00:04.0
f0804000-f0804fff : 0000:00:06.0
f0804000-f0804fff : ohci_hcd
f0806000-f0807fff : 0000:00:0d.0
f0806000-f0807fff : ahci
fee00000-fee00fff : Local APIC
fffc0000-ffffffff : reserved 
```

看起来没有什么东西在使用那个内存，所以我想我在这里还可以。所以我成功地加载了我的内核模块，去运行我的测试程序并且它失败了，再次运行它并且它可以工作。每次在新加载后运行它，它都会失败......第二次，第三次，第 n 次，它会工作：

```
mike@linux-4puc:~> ./a.out 
  Starting driver test
  Error 'Device or resource busy' opening CAN device
mike@linux-4puc:~> ./a.out 
  Starting driver test
  We opened successfully 
```

这是我非常简单的用户空间程序的一部分：

```
int fd;
char* dev = "/dev/can0";

printf("Starting driver test\n");

if ((fd = open(dev, O_RDWR)) < 0) {
    printf("Error '%s' opening CAN device", strerror(errno));
    close(fd);
    return -1;
} 
```

关于为什么会发生这种情况的任何想法？如果我`request_mem_region()`从驱动程序中删除代码一切正常，所以我认为我只是在做一些愚蠢的事情......但为什么它会以它的方式失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:00:07.850

我有点惊讶这对你有用。`request_mem_region()`传递的值在`0x101C0000`系统 RAM 的物理地址范围内，`0x00100000`: `0x1ffeffff`。我猜想（初始）错误返回表明内核已经将此物理内存区域安装到其内存池中。当驱动程序错误退出（或模块卸载时）时，它是否会尝试进行适当的清理和调用`release_mem_region()`，这可能会成功`request_mem_region()`实现下一次复飞？

通常，您会提供一个*未*`request_mem_region()`使用的地址范围（即内核当前*未知*），因为驱动程序正在使该物理地址范围“可用”（即声明一个物理地址范围以映射到虚拟地址）空间）。

 **如果你使用类似的东西会发生什么

```
#define MCF_MBAR    0x90000000 
```

假设物理地址空间真的没有使用？

顺便说一句，如果您的驱动程序`release_mem_region()`在第一次使用后调用，那么驱动程序有一个错误。驱动程序应该只释放它实际获得的资源。如果`request_mem_region()`返回错误，则永远不会获取内存资源。因此没有理由调用`release_mem_region()`（并且驱动程序总是会在 期间得到分配错误`_init()`）。如果您检查一些正常运行的 Linux 设备驱动程序，您可能会发现精心设计的错误退出方案（使用`goto`语句）来解开例程中分配的资源，并在代码`_init()`中释放之前进行有效性检查。`_exit()`**

# android - ListFragment 作为 DialogFragment

> ID：12516626
> 
> 赞同：1
> 
> 时间：2012-09-20T16:10:45.317
> 
> 标签：android

是否可以显示`ListFragment`为`Dialog`？或者没有办法，我应该在自己内部实现自己的`ListView`、空的`TextView`和不确定的？`ProgressBar``DialogFragment`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-08T00:46:09.637

另外一个选项：

构建对话框片段：

```
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;    

public class ListDialogFragment extends DialogFragment {

    private OnListDialogItemSelect listener;
    private String title;
    private String[] list;

    public ListDialogFragment(OnListDialogItemSelect listener, String[] list, String title) {
        this.listener=listener;
        this.list=list;
        this.title=title;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        return new AlertDialog.Builder(getActivity())
                .setTitle(title)
                .setCancelable(false)
                .setItems(list, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int item) {

                        listener.onListItemSelected(list[item]);
                        getDialog().dismiss(); 
                        ListDialogFragment.this.dismiss();

                    }
                }).create();

    }

    public interface OnListDialogItemSelect{
        public void onListItemSelected(String selection);
    }

} 
```

在您的片段活动中，如下所示：

```
public class YourActivity extends FragmentActivity implements OnListDialogItemSelect{

    private void showCountryFragment(){
         FragmentManager fm = getSupportFragmentManager();
         ListDialogFragment newFragment = new ListDialogFragment(this,getCountries(),"Country:");
         newFragment.show(fm, "country_picker");
    }

    @Override
    public void onListItemSelected(String selection) {
        _bt_country.setText(selection);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:35:07.997

我不太确定它是否适用于 ListFragment 但我们可以通过将主题应用于清单文件中的活动来将活动显示为对话框：

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

请尝试使用您的 ListFragment，并让我知道它是否有效。

谢谢你。

# php - DOMPDF生成空白pdf

> ID：12516627
> 
> 赞同：1
> 
> 时间：2012-09-20T16:10:49.700
> 
> 标签：php, html, pdf-generation, dompdf

我正在使用 DOMPDF 库 0.6.0 beta 3 使用 PHP 生成 pdf 文件。我的一些 html 可以正确处理为 PDF，而有些则不能。下面是一个不能的例子。我已经通过 w3c html 验证器验证了我的 html。我可以做些什么来解决这个问题？

```
<?php
  require_once("dompdf/dompdf_config.inc.php");
    $html = "<!DOCTYPE html>
            <html>
              <head>
              <title></title>
                      <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
              </head>
             <body>
                 <p>Algarve Bird Watching Festival About to Begin</p>
                 <p><span style='font-family:calibri;font-size:11pt'>&nbsp;</span></p>
                 <p>Test Title</p>
                 <p>Lorem ipsum sit dolor amet<sup>th</sup> Lorem ipsum sit dolor amet </p>
                 <p>Lorem ipsum sit dolor amet</p>
                 <p>Lorem ipsum sit dolor amet </p>
                 <p>Lorem ipsum sit dolor amet <a href='http://www.test.com'>test</a>
                  Lorem ipsum sit dolor amet &nbsp; 
                  </p>
    <p><span style='font-family:calibri;font-size:11pt'>&nbsp;</span></p>
             </body>
             </html>";

    $dompdf = new DOMPDF();
    $dompdf->load_html($html);
    $dompdf->set_paper("a4", "portrait");
    $dompdf->render();
    $dompdf->stream();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:15:49.460

检查你的双引号：

```
$html = '<!DOCTYPE html>
        <html>
          <head>
          <title></title>
                  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
          </head>
         <body>
             <p>Algarve Bird Watching Festival About to Begin</p>
             <p><span style="font-family:calibri;font-size:11pt">&nbsp;</span></p>
             <p>Test Title</p>
             <p>Lorem ipsum sit dolor amet<sup>th</sup> Lorem ipsum sit dolor amet </p>
             <p>Lorem ipsum sit dolor amet</p>
             <p>Lorem ipsum sit dolor amet </p>
             <p>Lorem ipsum sit dolor amet <a href="http://www.test.com">test</a>
              Lorem ipsum sit dolor amet &nbsp; 
              </p>
<p><span style="font-family:calibri;font-size:11pt">&nbsp;</span></p>
         </body>
         </html>'; 
```

* * *

## 编辑

此外，DOMPDF 可能不知道字体 calibri。

* * *

## 编辑

您没有`<title>`标签内容。这可能是原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T15:13:19.933

您不能在传递给 DOM PDF 的 html 字符串中传递单引号。

您的 html 字符串需要有双引号。

如果您使用表格，则不要使用 thead 或 tbody。

这是我遇到的另一个问题。

基本上，如果 DOM PDF 认为一个 html 字符串被破坏，它会在没有警告的情况下退出。

# c++ - c ++将字符串传递给可变参数

> ID：12516631
> 
> 赞同：4
> 
> 时间：2012-09-20T16:11:01.383
> 
> 标签：c++, string

```
#define LOG(format,...) Logger::Log(format,__VA_ARGS__)
#define STRIP(netIp) GeneralUtils::inet_ntop_(netIp)
string GeneralUtils::inet_ntop_(unsigned int netIp){
    char strIP[INET_ADDRSTRLEN];
    in_addr sin_addr;
    sin_addr.s_addr = netIp;
    inet_ntop(AF_INET, &sin_addr.s_addr, strIP, sizeof strIP);
    return string(strIP);
} 
```

致电时：

```
LOG("src %s dst %s" ,STRIP(src_ip_)); 
```

我得到编译错误：

```
cannot pass objects of non-trivially-copyable type ‘std::string {aka struct std::basic_string<char>}’ through ‘...’ 
```

我知道 varargs 是 c 兼容的，所以我不能向它发送字符串。有没有简单的方法绕过它？像这样修复它是否正确：

```
#define STRIP(netIp) GeneralUtils::inet_ntop_(netIp).data() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T16:13:02.943

您可以通过`const char *`而不是`std::string`. 你可以`std::string`通过调用`c_str()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T16:13:56.780

```
#define STRIP(netIp) GeneralUtils::inet_ntop_(netIp).data() 
```

是**错误**的，它将调用未定义的行为，因为它不包含终止零。采用

```
#define STRIP(netIp) GeneralUtils::inet_ntop_(netIp).c_str() 
```

反而。

# c++ - 对话框变量 -- 没有向 DoDataExchange() 添加条目

> ID：12516632
> 
> 赞同：1
> 
> 时间：2012-09-20T16:11:01.620
> 
> 标签：c++, mfc, dynamic-data-exchange

在 C# 工作多年后，我又回到了我编写的旧 MFC 应用程序。但看起来我需要对一些事情进行复习。

我在现有对话框中添加了一个复选框控件。然后我使用类向导添加类型的非控制变量`bool`。变量按预期创建。

但是，我看到该`DoDataExchange()`方法中没有添加任何条目。当我尝试手动添加它时：

```
DDX_Check(pDX, IDC_PRINT_SUMMARY, m_bPrintSummary); 
```

我收到 IntelliSense 错误：

> “int &”类型的引用（非 const 限定）不能用“bool”类型的值初始化

**1.**为什么`DoDataExchange()`我添加变量时没有为我创建条目？

**2.**如果`DDX_Check()`期望 和`int &`，为什么类向导默认键入`bool`复选框值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:15:01.337

复选框可以是三个值之一，因此需要 int。

`BST_CHECKED`- 按钮被选中。

`BST_INDETERMINATE`- 按钮呈灰色，表示状态不确定（仅当按钮具有 BS_3STATE 或 BS_AUTO3STATE 样式时适用）。

`BST_UNCHECKED`- 按钮被清除

至于为什么它不自动编辑 DoDataExchange，这可能是你的类的 C++ 格式的问题。

# regex - 注册前脸书

> ID：12516633
> 
> 赞同：0
> 
> 时间：2012-09-20T16:11:02.710
> 
> 标签：regex, facebook-graph-api, screen-scraping, extract

我正在尝试使用正则表达式从 facebook 中提取一些信息。这是一个示例链接： [https](https://graph.facebook.com/210989592315921) ://graph.facebook.com/210989592315921 我对正则表达式感兴趣，以便从该字符串中提取喜欢的数量。

例如，我尝试过这个表达式：

```
"likes":\s[0-9]$ 
```

提前感谢您对此事的任何建议，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:21:09.103

您应该遵循“@Hope I help”评论并使用 json 解析器。您不能确定文本的格式是否始终相同：

你总是要在`:`和数字之间有一个空格吗？

顺便说一句，这是您要查找的错误，您当前的正则表达式匹配单个数字，而不是多位数字，您应该使用类似：`[0-9]+`并且可能删除`$`示例中不正确的内容，因为您有一个逗号号码后。

# json - 无法在 Sencha 应用程序中显示来自 JSON 响应的 Wordpress 自定义字段（可能很容易）

> ID：12516636
> 
> 赞同：0
> 
> 时间：2012-09-20T16:11:09.377
> 
> 标签：json, wordpress, extjs, sencha-touch-2

我正在使用 Sencha Architect，我正在尝试从使用 Wordpress JSON API 创建的这个 JSON 响应中获取自定义字段值：

[JSON 响应](http://theojai.net/?json=get_recent_posts&post_type=deals&custom_fields=wpcf-deal-business-owner,wpcf-deal-expiry,wpcf-deal-rules)

我已经创建了一个模型，但我只是不确定在 JSON 响应中的每个 custom_fields 的“映射”字段中输入什么内容。有什么想法吗？

这是我的煎茶模型。我在最后三个映射区域中放置了什么？：

```
Ext.define('Ojai.model.Deal', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            {
                name: 'Title',
                mapping: 'title'
            },
            {
                name: 'Business',
                mapping: 'custom_fields.wpcf-deal-business-owner'
            },
            {
                name: 'Expiry',
                mapping: 'wpcf-deal-expiry'
            },
            {
                name: 'Terms',
                mapping: 'wpcf-deal-rules'
            }
        ]
    }
}); 
```

# c# - 在 ASP.net 中是否最好尽快关闭数据上下文？

> ID：12516637
> 
> 赞同：0
> 
> 时间：2012-09-20T16:11:09.840
> 
> 标签：c#, asp.net, database, performance, datacontext

鉴于此代码：

```
/// <summary>
/// Add to view count of this article
/// </summary>
public static void IncrementViewCount(int articleID)
{
    using (var db = new MainContext())
    {
        var q = (from c in db.tblArticles where c.ID == articleID select c).SingleOrDefault();
        if (q != null)
        {
            q.Views ++;
            db.SubmitChanges();

            if (q.Views == 500)
            {
                // Call function
            }
        }
    }
} 
```

用以下方式写它更好吗：

```
/// <summary>
/// Add to view count of this article
/// </summary>
public static void IncrementViewCount(int articleID)
{
    var newViews = 0;
    using (var db = new MainContext())
    {
        var q = (from c in db.tblArticles where c.ID == articleID select c).SingleOrDefault();
        if (q != null)
        {
            newViews = q.Views + 1;
            q.Views = newViews;
            db.SubmitChanges();
        }
    }
    if (newViews == 500)
    {
        // Call function
    }
} 
```

请注意，在示例 #2 中，using 块在较早的时间点关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:14:56.593

根据您的“功能”需要多长时间并且您不需要上下文，第二个更好。

**读这个**

> 我们实施 IDisposable 有几个原因：
> 
> 如果应用程序逻辑需要在预期使用或有效 DataContext 之后保留实体，则可以通过调用 Dispose 来强制执行该合同。该实体中的延迟加载程序仍将引用 DataContext，并且如果任何代码尝试导航延迟属性，则将尝试使用它。这些尝试都会失败。Dispose 还强制 DataContext 转储其物化实体的缓存，以便单个缓存实体不会意外地使通过该 DataContext 物化的所有实体保持活动状态，否则会导致看似内存泄漏的情况。
> 
> 自动关闭 DataContext 连接的逻辑可能会被欺骗，使连接保持打开状态。DataContext 依赖于枚举查询的所有结果的应用程序代码，因为到达结果集的末尾会触发连接关闭。如果应用程序使用 IEnumerable 的 MoveNext 方法而不是 C# 或 VB 中的 foreach 语句，则可以提前退出枚举。如果您的应用程序遇到连接未关闭的问题并且您怀疑自动关闭行为不起作用，您可以使用 Dispose 模式作为解决方法。您不需要它们。

### 更多信息

*   [处理 DataContexts](http://csharpindepth.com/ViewChapterNotes.aspx?Chapter=12&Edition=1)

# java - Android 应用程序：页面停止工作

> ID：12516638
> 
> 赞同：0
> 
> 时间：2012-09-20T16:11:11.027
> 
> 标签：java, php, android, multithreading

我正在开发一个简单的 Android 应用程序并收到“应用程序停止工作”错误。

当我退出我的`preOnExecute`方法时似乎会发生错误，但是如果我注释掉该应用程序无论如何都会落在下一个代码段上。

测试：打开屏幕/活动，有 5 个预填充的文本框和一个按钮。如果我单击该按钮，代码会命中一个在“OnPreExecute”中打开一个对话框的类，并且它在执行此方法时失败。

它可能与后台线程不喜欢 UI 上发生的事情有关，但我不知道。

知道如何解决这个问题吗？

请参阅下面的代码

```
package android22.app.namespace;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.webkit.ConsoleMessage;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;
import android22.voter.namespace.appSubmitAnswerActivity.GetQuestionDetails;
import android22.voter.namespace.appSubmitAnswerActivity.SaveAnswerDetails;

public class appCreateQuestionActivity extends Activity  {

    //controls

       EditText editTextTitle;
       EditText editTextQuestionString;
       EditText editTextA1;
       EditText editTextA2;
       EditText editTextA3;
       EditText editTextA4;
       EditText editTextA5;
       Button buttonSubmitQuestion;

       // Progress Dialog 
       private ProgressDialog qDialog; 

       // JSON parser class 
       JSONParser jsonParser = new JSONParser(); 

       // single question url 
       private static final String url_insert_question_details = "http://xxx.xxx.xxx.xxx/voter/Voter_Db_CreateNewQuestion.php"; 

       // JSON Node names
       private static final String TAG_SUCCESS = "success";
       private static final String TAG_QUESTION = "question";
       private static final String TAG_QID = "Qid";
       private static final String TAG_TITLE = "Title";
       private static final String TAG_QUESTIONSTRING = "QuestionString";
       private static final String TAG_A1 = "A1";
       private static final String TAG_A2 = "A2";
       private static final String TAG_A3 = "A3";
       private static final String TAG_A4 = "A4";
       private static final String TAG_A5 = "A5";

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.createquestion);

        // save button 
        buttonSubmitQuestion = (Button) findViewById(R.id.btnCreate); 
        /*Set Control Listeners */

        buttonSubmitQuestion.setOnClickListener(new View.OnClickListener() { 

           @Override
            public void onClick(View view) {           

                // starting background task to update question 
              new SaveQuestionDetails().execute();
            } 
        }); 

    }

    class SaveQuestionDetails extends AsyncTask<String, String, String> {

           /**
            * Before starting background thread Show Progress Dialog
            * */
           @Override
           protected void onPreExecute() {
               super.onPreExecute();
               qDialog = new ProgressDialog(VoterCreateQuestionActivity.this);
               qDialog.setMessage("Saving ...");
               qDialog.setIndeterminate(false);
               qDialog.setCancelable(true);
               qDialog.show();  
           }

           /**
            * Saving question
            * */
           protected String doInBackground(String... args) {

               String Title = editTextTitle.getText().toString();
               String Question = editTextQuestionString.getText().toString();
               String A1 = editTextA1.getText().toString();
               String A2 = editTextA2.getText().toString();
               String A3 = editTextA3.getText().toString();
               String A4 = editTextA4.getText().toString();
               String A5 = editTextA5.getText().toString();

               // Building Parameters
               List<NameValuePair> params = new ArrayList<NameValuePair>();
               params.add(new BasicNameValuePair(TAG_QID, "1"));
               params.add(new BasicNameValuePair(TAG_TITLE, Title));
               params.add(new BasicNameValuePair(TAG_QUESTION, Question));
               params.add(new BasicNameValuePair(TAG_A1, A1));
               params.add(new BasicNameValuePair(TAG_A2, A2));
               params.add(new BasicNameValuePair(TAG_A3, A3));
               params.add(new BasicNameValuePair(TAG_A4, A4));
               params.add(new BasicNameValuePair(TAG_A5, A5));

               // sending modified data through http request
               // Notice that update question url accepts POST method
               JSONObject json = jsonParser.makeHttpRequest(url_insert_question_details,
                       "POST", params);

               // check json success tag
               try {
                   int success = json.getInt(TAG_SUCCESS);

                   if (success == 1) {
                       // successfully updated
                       Intent i = getIntent();
                       // send result code 100 to notify about question update
                       setResult(100, i);
                       finish();
                   } else {
                       // failed to update question
                   }
               } catch (JSONException e) {
                   e.printStackTrace();
               }

               return null;
           }

           /**
            * After completing background task Dismiss the progress dialog
            * **/
           protected void onPostExecute(String file_url) {
               // dismiss the dialog once question updated
               qDialog.dismiss();
           }
       }
} 
```

我得到以下 LogCat

```
09-20 16:03:15.703: D/gralloc_goldfish(658): Emulator without GPU emulation detected.
09-20 16:20:39.298: W/dalvikvm(658): threadid=12: thread exiting with uncaught exception (group=0x409961f8)
09-20 16:20:39.463: E/AndroidRuntime(658): FATAL EXCEPTION: AsyncTask #1
09-20 16:20:39.463: E/AndroidRuntime(658): java.lang.RuntimeException: An error occured while executing doInBackground()
09-20 16:20:39.463: E/AndroidRuntime(658):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
09-20 16:20:39.463: E/AndroidRuntime(658):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-20 16:20:39.463: E/AndroidRuntime(658):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-20 16:20:39.463: E/AndroidRuntime(658):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-20 16:20:39.463: E/AndroidRuntime(658):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-20 16:20:39.463: E/AndroidRuntime(658):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-20 16:20:39.463: E/AndroidRuntime(658):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-20 16:20:39.463: E/AndroidRuntime(658):  at java.lang.Thread.run(Thread.java:856)
09-20 16:20:39.463: E/AndroidRuntime(658): Caused by: java.lang.NullPointerException
09-20 16:20:39.463: E/AndroidRuntime(658):  at android22.voter.namespace.AppCreateQuestionActivity$SaveQuestionDetails.doInBackground(VoterCreateQuestionActivity.java:109)
09-20 16:20:39.463: E/AndroidRuntime(658):  at android22.voter.namespace.AppCreateQuestionActivity$SaveQuestionDetails.doInBackground(VoterCreateQuestionActivity.java:1)
09-20 16:20:39.463: E/AndroidRuntime(658):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
09-20 16:20:39.463: E/AndroidRuntime(658):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-20 16:20:39.463: E/AndroidRuntime(658):  ... 4 more
09-20 16:20:41.493: E/WindowManager(658): Activity android22.voter.namespace.AppCreateQuestionActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@416e3798 that was originally added here
09-20 16:20:41.493: E/WindowManager(658): android.view.WindowLeaked: Activity android22.voter.namespace.AppCreateQuestionActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@416e3798 that was originally added here
09-20 16:20:41.493: E/WindowManager(658):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:343)
09-20 16:20:41.493: E/WindowManager(658):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:245)
09-20 16:20:41.493: E/WindowManager(658):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:193)
09-20 16:20:41.493: E/WindowManager(658):   at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:118)
09-20 16:20:41.493: E/WindowManager(658):   at android.view.Window$LocalWindowManager.addView(Window.java:537)
09-20 16:20:41.493: E/WindowManager(658):   at android.app.Dialog.show(Dialog.java:274)
09-20 16:20:41.493: E/WindowManager(658):   at android22.voter.namespace.AppCreateQuestionActivity$SaveQuestionDetails.onPreExecute(VoterCreateQuestionActivity.java:101)
09-20 16:20:41.493: E/WindowManager(658):   at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
09-20 16:20:41.493: E/WindowManager(658):   at android.os.AsyncTask.execute(AsyncTask.java:511)
09-20 16:20:41.493: E/WindowManager(658):   at android22.voter.namespace.VoterCreateQuestionActivity$1.onClick(AppCreateQuestionActivity.java:81)
09-20 16:20:41.493: E/WindowManager(658):   at android.view.View.performClick(View.java:3480)
09-20 16:20:41.493: E/WindowManager(658):   at android.view.View$PerformClick.run(View.java:13983)
09-20 16:20:41.493: E/WindowManager(658):   at android.os.Handler.handleCallback(Handler.java:605)
09-20 16:20:41.493: E/WindowManager(658):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-20 16:20:41.493: E/WindowManager(658):   at android.os.Looper.loop(Looper.java:137)
09-20 16:20:41.493: E/WindowManager(658):   at android.app.ActivityThread.main(ActivityThread.java:4340)
09-20 16:20:41.493: E/WindowManager(658):   at java.lang.reflect.Method.invokeNative(Native Method)
09-20 16:20:41.493: E/WindowManager(658):   at java.lang.reflect.Method.invoke(Method.java:511)
09-20 16:20:41.493: E/WindowManager(658):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-20 16:20:41.493: E/WindowManager(658):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-20 16:20:41.493: E/WindowManager(658):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:30:10.657

错误是由第 109 行引起的：

```
String Title = editTextTitle.getText().toString(); 
```

这是一个 NullPointerException。最有可能的原因是类成员变量`editTextTitle`未在任何地方初始化。您通常会在您的 中初始化那些`onCreate()`，一段时间后，通过使用相关控件 ID`setContentView()`调用。`findViewById()`

也就是说，“这里有一大段代码，请帮我调试”类型的问题在 StackOverflow 上是不受欢迎的。您可以通过在 AsyncTask 方法中放置一个断点并单步执行每个方法来轻松发现错误。那，或者仔细阅读 LogCat 中的异常跟踪。

编辑：LogCat 中的以下几行是相关的：

```
09-20 16:20:39.463: E/AndroidRuntime(658): Caused by: java.lang.NullPointerException
09-20 16:20:39.463: E/AndroidRuntime(658):  at android22.voter.namespace.AppCreateQuestionActivity$SaveQuestionDetails.doInBackground(VoterCreateQuestionActivity.java:109) 
```

行号就在那里。异常被捕获并重新抛出了几次 - 这是典型的。但要找到最终原因，您需要在堆栈跟踪中查找您的代码。

# c# - c# 资源 (resx) 继承

> ID：12516643
> 
> 赞同：0
> 
> 时间：2012-09-20T16:11:27.860
> 
> 标签：c#, asp.net

我在我的*asp.net*应用程序上使用资源，需要使键/值对在客户端上可用。我已经能够通过使用 HttpHandler 将它们用于特定***资源文件***，但标准继承不适用于我正在使用的代码。

* * *

基本*PM.resx*文件包含以下内容

```
key: a value: AAAAAA
key: b value: BBBBBB
key: c value: CCCCCC 
```

* * *

*PM.pt.resx*文件包含以下内容

```
key: a value: ptptpt 
```

* * *

当我在我的浏览器上有一种文化`pt`或编码时，我希望得到以下返回，因为该`pt`文件中只有一个条目，并且基本文件包含其余的键/值对。

```
key: a value: ptptpt
key: b value: BBBBBB
key: c value: CCCCCC 
```

但我只得到以下内容。

```
key: a value: ptptpt 
```

* * *

我用来生成 JavaScript 的 c# 代码如下。

```
public void ProcessRequest(HttpContext context)
    {
        ResourceManager rm = new ResourceManager("Resources.PM", System.Reflection.Assembly.Load("App_GlobalResources"));
        Thread.CurrentThread.CurrentCulture = new CultureInfo("pt-BR");//for testing culture change
        //ResourceSet resourceSet = rm.GetResourceSet(CultureInfo.CurrentUICulture, true, true);
        ResourceSet resourceSet = rm.GetResourceSet(Thread.CurrentThread.CurrentCulture, true, true);

        string r = string.Empty;

        if (resourceSet != null)
        {
            foreach (DictionaryEntry entry in resourceSet)
            {
                string resourceKey = entry.Key.ToString();
                object resource = entry.Value.ToString();
                r += "\"" + entry.Key.ToString() + "\": \"" + entry.Value.ToString() + "\", ";
            }
        }

        r = "var q = {" + r + " culture: \"" + Thread.CurrentThread.CurrentCulture.ToString() + "\"};";
        r += "console.log(q);$.each(q, function(k, v){console.log(k + \": \" + v)});";
        context.Response.Write(r);
    } 
```

如何让继承在代码中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:22:24.650

我已经找到了我的问题的解决方案。我创建了两个`ResourceSets`；一个用于默认语言（用于默认资源），另一个用于当前语言（用于特定语言的资源）。然后我创建了一个`dictionary`字符串，首先添加了语言特定的键/值对，然后是默认的键/值对。如果已经存在特定语言的密钥，则不会添加默认语言。

```
public void ProcessRequest(HttpContext context)
    {
        string responseString = string.Empty;
        CultureInfo currentCulture = CultureInfo.CurrentUICulture;

        ResourceManager rm = new ResourceManager("Resources.PM", System.Reflection.Assembly.Load("App_GlobalResources"));

        CultureInfo defaultCulture = new CultureInfo("en-US");

        ResourceSet currentRS = rm.GetResourceSet(currentCulture, true, true);
        ResourceSet defaultRS = null;

        if (defaultCulture != currentCulture)
        {
            defaultRS = rm.GetResourceSet(defaultCulture, true, true);
        }

        Dictionary<string, string> translations = new Dictionary<string, string>();

        if (currentRS != null)
        {
            foreach (DictionaryEntry entry in currentRS)
            {
                try {
                    translations.Add(entry.Key.ToString(), entry.Value.ToString());
                }
                catch (Exception e) { }
            }
        }

        if (defaultRS != null)
        {
            foreach (DictionaryEntry entry in defaultRS)
            {
                try {
                    translations.Add(entry.Key.ToString(), entry.Value.ToString());
                }
                catch (Exception e){}
            }
        }

        foreach (KeyValuePair<String, String> entry in translations)
        {
            responseString += "\"" + entry.Key.ToString() + "\": \"" + entry.Value.ToString() + "\", ";
        }

        responseString = "var translations = {" + responseString + " culture: \"" + currentCulture.ToString() + "\"};";
        context.Response.Write(responseString);

        Compress(context);
        //SetHeadersAndCache(absolutePath, context);
    } 
```

注意：我没有在这里说明转义我的键和值对。这是我必须在我的代码中跟进的事情。

我希望这对其他人有所帮助！

# search - Xcode4 - 检查项目中是否使用了翻译后的值

> ID：12516649
> 
> 赞同：1
> 
> 时间：2012-09-20T16:12:29.247
> 
> 标签：search, xcode4, localization, localizable.strings

是否可以检查我的项目中是否使用了翻译后的值。

例如，我想自动检查例如

```
/* 
Localizable.strings
*/
"THOUSAND"="Thousand";
"VALUE"="value"
... 
```

在我的项目中某处使用（在以下宏中：NSLocalizedString(@"THOUSAND",@"");）？

我可以通过一个又一个的搜索值来做到这一点，但是假设有 1000 个值？所以自动这样做会节省很多时间:-D

BR & THX，迈贝克

# audio - iPhone 的 OPUS 音频编解码器编码

> ID：12516650
> 
> 赞同：9
> 
> 时间：2012-09-20T16:12:32.490
> 
> 标签：audio, voip, codec

最近发布的 OPUS Audio 编解码器（libopus？）可以编译为在移动设备上运行（阅读 iPhone/Android）吗？

我已经搜索并得出结论，文档说明它在 ARM 设备上运行，但是在尝试编译库后，交叉编译时总是失败。

是我弄错了还是目前不支持此类设备？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T11:51:56.803

我缺少的一件事是主机，它原来是“arm-apple-darwin”，现在它工作正常。

```
./configure --host=arm-apple-darwin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T07:43:37.060

对我来说，它直接建立在 Xcode 上。无需使用交叉编译器。我正在为 iOS 编译它。

# jquery - jquery .animate div消失

> ID：12516651
> 
> 赞同：0
> 
> 时间：2012-09-20T16:12:34.473
> 
> 标签：jquery, html, jquery-animate

我正在尝试实现一个 jQuery .animate 调用来切换几个 div 的高度。其中一个 div 我想像现在一样消失，但另一个 div 我想保持可见。我怎样才能做到这一点？这是我到目前为止所拥有的：

```
<div 
    ...  
    onClick="$('#divDetails').animate({height:'toggle'},'slow');
    $('#divContents').animate({marginTop:'toggle',display:'block'},'slow');">
    ...
</div> 
```

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:16:40.287

如果您要使用，`jQuery`请将事件绑定到`jQuery-way`. 例子：

```
$(document).ready(function() {
    $('div').on('click', function() {
        $('#divDetails').toggle('slow');
        $('#divContents').animate({marginTop:'toggle',display:'block'},'slow');
    }
} 
```

# java - Spring Integration @Transactional 回滚许多数据库操作

> ID：12516654
> 
> 赞同：2
> 
> 时间：2012-09-20T16:12:39.183
> 
> 标签：java, spring, hibernate, rollback, transactional

我的问题很简单，**我想回滚由调用我的服务方法引起的所有数据库更改。**我有正确注释的问题。我不确定该放在`@Transactional`哪里以及应该将 Propagation 设置为`REQUIRES_NEW`or `MANDATORY`。我将粘贴我编写的代码，除了`SQLException`抛出的事实之外，*它不会回滚 db changes*。

编码：

```
@Service
public class SwapInsertService {

    @Autowired
    MyDao myDao;

    @Transactional(propagation = Propagation.REQURIES_NEW, rollbackFor = SQLException.class)
    public void insertToManyTables(MyData data) throws SQLException {

        insertToSpecificTables(data);
        myDao.insertTwo(data);
    }

    @Transactional(propagation = Propagation.MANDATORY)
    public void insertToSpecificTables(MyData data) throws SQLException {

        myDao.insertOne(data);
    }
}

@Repository
public class MyDaoImpl implements MyDao {

    @Transactional(propagation = Propagation.MANDATORY)
    public void insertOne(MyData data) throws SQLException {

        // INSERT
    }

    @Transactional(propagation = Propagation.MANDATORY)
    public void insertTwo(MyData data) throws SQLException {

        // throws SQLException 
    }
} 
```

让我们假设`insertTwo`throws `SQLException`。我想回滚所有以前的插入。**我究竟做错了什么？**

**我的理解：**

`Propagation.REQURIES_NEW`创建新的交易。 `Propagation.MANDATORY`支持当前事务。

`insertTwo`抛出错误，`insertToManyTables`回滚一切，瞧。不幸的是，这并不容易。

**编辑**：重要的是要提到我正在使用`CGLIB`代理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T17:08:17.650

在 spring 特定的 xml 中检查数据源配置中的 AUTO_COMMIT 是否设置为 false

# ruby-on-rails - 从 tutorial_category 转到教程。我需要使用联接还是包含？

> ID：12516659
> 
> 赞同：0
> 
> 时间：2012-09-20T16:13:00.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个看起来像这样的教程模型：

```
class Tutorial < ActiveRecord::Base
  attr_accessible :content, :title
  has_many :tutorial_categories
end 
```

和一个看起来像这样的 tutorial_category 模型：

```
class TutorialCategory < ActiveRecord::Base
  attr_accessible :name, :tutorial_id
  belongs_to :tutorial
end 
```

当我通过类似的方式知道 tutorial_category 时`@tutorial_category = TutorialCategory.find(params[:id])`

如何获取属于该教程类别的所有教程。换句话说，一旦我知道@tutorial_category.name，我想要所有设置了相同tutorial_category.name 的教程。

我需要使用连接或包含来执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:20:51.160

首先，您在这里使用了错误的关系类型。您正在尝试`many to many`使用设置建模关系`many to one`。我会像下面这样设置你的模型。这假设您有一个`categories_tutorials`使用字段`category_id`和调用的连接表`tutorial_id`。另请注意，我更改了您的类别模型的名称，因为它非常接近传统的 Rails 连接表语法。

```
class Tutorial < ActiveRecord::Base
  attr_accessible :content, :title
  has_and_belongs_to_many :categories
end

class Category < ActiveRecord::Base
  attr_accessible :name
  has_and_belongs_to_many :tutorials
end 
```

要查找给定类别的所有教程，您现在可以执行以下操作：

```
a = Category.find(:params[:id])
tutorials = a.tutorials 
```

# html - 在 IE9 中更改边框颜色崩溃布局

> ID：12516661
> 
> 赞同：1
> 
> 时间：2012-09-20T16:13:03.973
> 
> 标签：html, css, internet-explorer-9

我在 IE9 中有这种奇怪的行为，当我在用户输入（或）上更改`border-color`a时，布局将崩溃`<input>``:hover``:focus`

我想要一个表格，其中标签位于左侧，`min-height`如果标签更宽，则输入字段应位于下一行。这对我很有用（虽然不是所有 Firefox 的小提琴，但在我的开发中，但这不是问题）

我在 IE9 中对其进行了测试，然后一些输入字段将通过`margin-left`值 n 鼠标悬停跳转到右侧。

我把它分解了，如果我降低标签的底部边距（这里从 5px 到 4px），我可以让它不发生，但错误不应该首先出现

如果我不更改边框颜色，我也不会出错。奇怪的！

这是一个示例： http:
[//jsfiddle.net/HerrSerker/9ktvX/](http://jsfiddle.net/HerrSerker/9ktvX/)（在 IE9 中检查）

这是 IE9 中的已知错误吗？我应该写信给微软吗？

* * *

## 编辑

我更新了小提琴。
如果我通过 jQuery 更改边框颜色，则不会出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:27:39.710

如果您将输入字段中的字体大小更改为 px，它会修复它...由于自适应单位，似乎有问题？ [http://jsfiddle.net/9ktvX/3/](http://jsfiddle.net/9ktvX/3/)

```
input {
    ...
    font-size: 13px;
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:56:21.930

尽量避免“浮动”属性。你可以得到相同的布局`display:inline-block;`

# jquery - 向 JSON 数组添加值

> ID：12516665
> 
> 赞同：-1
> 
> 时间：2012-09-20T16:13:06.117
> 
> 标签：jquery, json, append

所以我有一个看起来像这样的数组

```
[{"subbasinID":"1"},{"subbasinID":"2"}, etc....] 
```

我需要在每条记录中添加更多值。如何添加到现有数组，使其看起来像这样

```
[{"subbasinID":"1","test":"1","name":"john"},{"subbasinID":"2","test":"0"}] 
```

我会知道我需要添加的下一个组的名称和值。我假设我必须确定我想要的记录，然后通过查找 subbasinID 来追加。不知道怎么做！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:17:35.883

你所拥有的是一个对象列表（数组）。您所需要的只是迭代对象并向其添加元素。

```
var t = [{"subbasinID":"1"},{"subbasinID":"2"}/*, etc....*/]
t[0]["name"] = "John"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:23:08.177

这里的 json 对象是一个数组。所以你可以像 2D 数组一样访问这些值并操作它。

```
 var json = [{"subbasinID":"1","test":"1","name":"john"},{"subbasinID":"2","test":"0"}]

  json[0]["test"] = "1" ;   OR   json[0].test = "1"

   json[0]["name"] = "john"

    json[1]["test"] = "0" ; 
```

一旦您知道要添加的字段的名称，您就可以提出一种通用的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:17:08.790

不确定我是否完全理解您的问题，但在 JavaScript 中添加对象非常简单。如果您愿意，可以使用 jQuery `.each`，但这也不是必需的：

```
for (var x = 0; x < arrayVar.length; x++) {
   arrayVar[x].test = test;
   if (name) {
      arrayVar[x].name = name;
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T16:56:03.407

这是另一个通过找到 ID 并添加它。

```
var arr = [{"subbasinID":"1"},{"subbasinID":"2"}];

$.each(arr, function(i, arrVal)  {    
   if (arrVal.subbasinID === "1") {    
      arrVal.test = "1";
      arrVal.name = "john";
   }    
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T16:15:26.547

假设您确实有一个“JSON 数组”而不仅仅是一个 javascript 数组，最简单的方法是

1.  将其解析为 javascript 数组
2.  添加您的价值观
3.  再次将其序列化为 JSON

像这样 ：

```
var obj = JSON.parse(str);
obj[0]['test']='1';
...
str = JSON.stringify(obj); 
```

如果您不确定“JSON”术语，我建议您这样做：[http ://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-17T13:57:13.367

您可以使用 splice 函数在 JSON 数组中添加和删除项目。第一个 0 是您要添加的位置（使用 0 表示第一个位置），第二个是您指定的是否要删除项目。

```
dataArray.splice(0, 0,
{id: "7", name: "Douglas Adams", type: "comedy"}); 
```

# asp.net - 如何强制按钮执行完整回发而不是异步回发

> ID：12516667
> 
> 赞同：5
> 
> 时间：2012-09-20T16:13:15.457
> 
> 标签：asp.net, user-controls, asynchronous-postback

在 ASP.NET 4.0 Web 应用程序中，我有一个由 UpdatePanel 包装的用户控件（请参见下面的代码）。

```
<asp:UpdatePanel ID="UpdatePanel5" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <UC:MyCustomCtrl ID="customCtrl" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

显然，这对于在我的用户控件中导致回发的每个 ASP.NET 控件都非常有用，因为它使它异步发生。**但是**，有一个过程不适用！

我在用户控件中有一个 ASP.NET 按钮（创建报告），它向服务器发出异步请求。然后，服务器创建一个 Excel 电子表格，然后将该电子表格放在 HttpResponse 中以发送回客户端的浏览器，以便他们可以打开/保存它。但是，此时它会爆炸，因为对服务器的请求是异步的，显然您不能在异步请求期间将二进制文件放入 HttpResponse 中。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T16:47:49.340

在用户控件的`Page_Load`方法中将此按钮注册为同步回发控件：`ScriptManager.GetCurrent(Page).RegisterPostBackControl(CreateReportButton);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:20:17.553

利用更新面板中的触发器来引用自定义控件和在控件内的报告按钮上注册的事件，例如

```
<Triggers>
     <asp:PostBackTrigger ControlID="customCtrl" EventName="ReportButtonClicked" />
</Triggers> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T13:57:15.953

类似于埃里克的回答。我没有尝试过这个，但它可能会工作......

```
<asp:UpdatePanel ID="UpdatePanel5" runat="server">
    <ContentTemplate>
        <UC:MyCustomCtrl ID="customCtrl" runat="server" />
    </ContentTemplate>
    <Triggers>
        <asp:PostBackTrigger ControlID="customCtrl$btnID" />
    </Triggers>
</asp:UpdatePanel> 
```

不久前我为验证控件做了类似的事情，所以它在这里也可以工作似乎是合乎逻辑的。

使用您的 DOM 查看器（我使用 Chrome 的元素检查器）并查看按钮的“名称”是什么（不是 ID）。从包含整个用户控件名称的部分开始，使用其余部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:20:37.413

您可以将触发器添加到允许完整回发的 UpdatePanel。这是一个例子

```
<asp:UpdatePanel ID="UpdatePanel5" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <UC:MyCustomCtrl ID="customCtrl" runat="server" />
    </ContentTemplate>
    <Triggers>
        <asp:PostBackTrigger ControlID="btnID" />
    </Triggers>
</asp:UpdatePanel> 
```

# mongodb - Mongoexport：使用 -q 指定日期的问题

> ID：12516669
> 
> 赞同：2
> 
> 时间：2012-09-20T16:13:27.420
> 
> 标签：mongodb, date, export

我在使用 mongoexport 和使用日期的查询时遇到问题。这里的问题和答案几乎和我的情况一模一样，但我不知道为什么它对我不起作用： [How do I dump data for a given date](https://stackoverflow.com/questions/5191186/how-do-i-dump-data-for-a-given-date)

根据那里的答案，我的查询结构如下：

./mongoexport -d 数据库 -c 集合 -f _id,zooniverse_user_id -q '{"created_at":{"$lt":new Date(1296540000)}}' --csv >users_before_feb_eleven.csv

我使用这个日期/纪元时间转换器将 ISODate("2011-02-01T00:00:00z") 转换为 1296540000：

[http://www.esqsoft.com/javascript_examples/date-to-epoch.htm](http://www.esqsoft.com/javascript_examples/date-to-epoch.htm)

我没有收到任何错误，但它导出“0 条记录”（我应该得到大约 10,000 条记录。）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:20:02.950

您的纪元日期值不正确，使用 mongo shell：

```
foo:PRIMARY> new Date(1296540000)
ISODate("1970-01-16T00:09:00Z") 
```

您基本上使用的是秒，但它是毫秒，因此您想乘以 1000（或仅添加三个零），如下所示：

```
foo:PRIMARY> new Date(1296540000000)
ISODate("2011-02-01T06:00:00Z") 
```

# pagination - 分页 [+next+] 不适用于 MODx CMS 模板

> ID：12516678
> 
> 赞同：0
> 
> 时间：2012-09-20T16:14:00.433
> 
> 标签：pagination, modx, ditto, modx-templates

我很难让分页功能与 [[Ditto? ... ]] 在 MODx CMS 中。

我在页面中显示了文档，限制设置为 5。我的其他分页模板占位符的输出似乎正在工作，但`[+next+]`链接没有加载下一组 5 个文档（按日期降序排列）。

这是我的模板代码：

```
[[Ditto?
    &parents=`13`
    &tpl=`ArticleListChunk`
    &display=`5`
    &&removeChunk=`Comments`
    &paginate=`1`
    &extenders=`summary,dateFilter`
    &paginateAlwaysShowLinks=`0`
    &dateFormat=`%F %D %Y`
]]

<p>Showing <strong>[+start+]</strong> - <strong>[+stop+]</strong> of <strong>[+total+]</strong> Articles</p>
<ul class="clearfix">
    <li>[+previous+]</li>
    <li>Page <strong>[+currentPage+]</strong> of [+totalPages+]</li>
    <li>[+next+]</li>
</ul> 
```

我得到的输出是：

```
Showing 1 - 5 of 17 Articles

Page 1 of 4
Next > 
```

如您所见，输出是正确的，但是当我单击“下一步”链接时，生成的 URL 是`.../news.html?start=5`但页面的内容保持不变（即显示了最新的 5 个文档！）。

这就是我从客户那里继承这个项目时模板和功能的样子，而且我以前从未使用过 MODx CMS——有人可以帮我吗？

我有办法用参数或其他东西更新 SQL 偏移量吗？我已经浏览了[Ditto / MODx 的所有 Wiki 页面，](http://wiki.modxcms.com/index.php/Ditto_2.1_parameters)但找不到我需要的或我不应该做的事情！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:35:48.020

我认为您需要调用 ditto uncached [[!Ditto? *属性*]]

这只是一个猜测。

看起来你正在使用EVO？检查缓存语法，您可能还需要在末尾加上感叹号。[[！同上？*属性*！]]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:48:57.737

经过大量搜索后，我[在 MODx 论坛上找到了一个帖子，为](http://forums.modx.com/thread/40884/solved---blog-caching)我指明了正确的方向。

结果证明在页面/文档的设置中启用了缓存（doh！）。我禁用了它，现在它工作正常！

但是，我没有在 Ditto 的参数字符串中设置无缓存令牌（'！'），包括 Sean 的答案，我的研究表明这是可取的和/或必需的。我以前没有使用过 MODx，所以我不能肯定地说，但它似乎没有这个对我有用！

感谢@SeanKimball，因为您的回答让我走上了正确的道路。

# java - 哈希映射 如何替换对象的 1 个值？

> ID：12516682
> 
> 赞同：7
> 
> 时间：2012-09-20T16:14:25.150
> 
> 标签：java, object, map, hashmap

```
Map<String, Data> map = new HashMap<String,Data>();
map.put("jan", new Data("RED","M4A1",5,0,0)); 
```

如何更改 Data 对象的值 RED？，而无需使用密钥从地图中获取所有信息并将其放回，如下所示：

```
map.put("jan" new Data("Blue",
      map.get("jan").Brand,
      map.get("jan").Storage,
      map.get("jan").Sold,
      map.get("jan").Bought)); 
```

那么如何更改数据对象的 1 个值而不是全部重做呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T16:16:35.177

这取决于是否`Data`可变。例如，您可以编写：

```
Data data = map.get("jan");
data.setColor("Blue"); 
```

不要忘记地图只包含对对象的*引用*，因此如果您更改对象内的数据，那么如果稍后有人从地图中获取引用，就会看到这种变化。

或者如果它是不可变的，它可能有一个`withColor`方法，所以你可以写：

```
Data data = map.get("jan");
map.put("jan", data.withColor("Blue")); 
```

如果不了解您的`Data`类型（我希望这不是您班级的真名），就很难再说什么了。

（我也希望你的班级没有真正的 Pascal 大小写字段，我希望这些字段是私有的，但那是另一回事......）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T16:17:56.210

假设`Data`是可变的，您可以设置该`"RED"`字段：

```
Map map = new HashMap();
map.put("jan", new Data("RED","M4A1",5,0,0));
// Later...
map.get("jan").setColor("BLUE"); 
```

如果`Data`不是可变的，那么您唯一的选择是`put`写入新值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:17:13.123

假设`Data`有一个`setter`for`color`属性：

```
public class Data {
  private String color;

  public void setColor(String color) {
    this.color = color;
  }
} 
```

您可以只`get`需要所需的`Data`对象并设置其属性：

```
Data data = map.get("jan");
data.setColor("blue"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T16:17:18.177

为您的班级添加适当的二传手`Data`，例如

```
class Data {
    setColor(String color){...}
}

map.get("jan").setColor("BLUE"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T16:48:02.657

**请找到代码片段：**

```
Map<String, Data> map = new HashMap<String,Data>();

public class Data{

private String color;

  public void setColor(String color) {
    this.color = color;
  }

public String getColor() {
    return this.color;
  }

publicData(String color){
this.setColor(color);
}
}

map.put("jan", new Data("RED","M4A1",5,0,0)); 
```

**现在你可以这样做：**

```
Data data = map.get("jan");
data.setColor("black"); 
```

**这将起作用。**

这里的数据类只包含一个字段，即颜色。您可以添加更多字段。谢谢

# reporting-services - 当标量轴的间隔设置为 1 时，图表栏不调整属性大小

> ID：12516688
> 
> 赞同：1
> 
> 时间：2012-09-20T16:14:42.210
> 
> 标签：reporting-services, ssrs-2012

当我创建一个 Microsoft SQL Server Reporting Services 2012 条形图并将水平轴类型设置为标量且间隔设置为 1 时，呈现的条形大小与轴标签大小不匹配。

在下面的示例中，12 年 9 月 1 日应显示值 1，12 年 9 月 5 日应显示值 52。但是，条形跨度太宽。每个跨越三个日期标签，而不仅仅是一个。

如何限制图表的条形以使其宽度合适？

谢谢！

![条形图演示问题](../Images/486b1ba2a41ed9ef8863e933431894e1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:04:10.090

我遇到了同样的问题，我将 MaxPixelPointWidth 更改为一个值，在我的情况下为 15，这解决了我的问题。

```
(Chart Series properties=>CustomAttributes=>MaxPixelPointWidth) //Mari 
```

# javascript - 这个javascript值得用来加速页面加载吗？

> ID：12516692
> 
> 赞同：1
> 
> 时间：2012-09-20T16:14:45.690
> 
> 标签：javascript, jquery

我编写了这段代码，通过根据分辨率加载更小分辨率的图片来加快页面加载速度……

```
window.onload = function() {
    bannerRes();
    function bannerRes() {
        var x = $(window).width();
        var y = $("#banner");
        if(x<=1920) {
            y.css('backgroundImage', 'url(team_banner_1920.jpg)');
        } else {
            y.css('backgroundImage', 'url(team_banner_2560.jpg)');
        };
    };
    $(window).resize(function() {
        bannerRes();
    });
}; 
```

但我不确定它是否值得使用，或者是否会出现任何问题。请问有什么意见吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:35:44.313

看起来您正在实施自适应图像解决方案。

W3C 中对这个话题进行了很多讨论，因此请注意，“专家”正在研究这个话题。

如果您在移动设备上向 iOS Retina 显示屏交付内容，情况会变得更加棘手。因为它们需要“双密度”。并有效地使您的图像维护加倍，并以 JS 代码维护跨设备的体验。

问题是，如果您必须在几年后为每一个可能出现的新设备更新代码，这可能会成为维护的噩梦。

最初的解决方案是使用@media-query，这将使您能够维护 CSS 中的图像，并简化您的 JS。

W3C 悬而未决的一个有趣话题是一个`<picture/>`标签，它可以在 dom 属性级别提供响应能力。从而避免了 css 和 JS 的足迹。但这在这一点上还有待观察。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:25:53.873

您可以尝试使用 jquery 的动画调整图像大小...然后您将在服务器上只有一个图像，您可以相应地调整它的大小...

这个[问题](https://stackoverflow.com/questions/5870655/image-resizing-with-jquery-animate)有关于如何做到这一点的答案......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:21:35.393

只有你能判断它是否值得。

众所周知，谷歌将页面加载速度纳入其排名算法，所以如果这是您的担忧，那么它可能是有效的。

您的网站有很多流量吗？用户可能会有很多不同的屏幕分辨率吗？你能从你的网站统计中推断出类似的东西吗？即你有来自广泛分布的屏幕分辨率的点击吗？

所以，简而言之，它真的不可能在这里回答。如果您在网站上提供了更多细节，那么可能会进行推断，但即便如此，您最好还是自己尝试一些指标。

# mysql - 保证递增的时间戳 ID

> ID：12516700
> 
> 赞同：0
> 
> 时间：2012-09-20T16:15:23.357
> 
> 标签：mysql

我可以将主键设置为精确到秒的时间戳。但仅当插入新行至少相隔 1 秒时，它才能按预期工作。我可以将分辨率提高到微秒，但我想知道它是否过度杀伤和减慢速度。

我想要时间戳，因为它们很容易按时排序，但我不关心超过一秒的处方。

生成它们的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:24:10.153

这完全取决于您希望处理的查询。

您实际上可以同时使用它们`TIMESTAMP`和一些代理主键；像往常一样，后者将是 auto_incremented，对于某些排序查询，前者也可以被索引：

```
CREATE TABLE sometable (
  sometable_id INT NOT NULL AUTO_INCREMENT,
  ...
  ts TIMESTAMP,
  PRIMARY KEY (sometable_id),
  KEY (ts)
); 
```

...或者您可以完全删除代理键而无需`PRIMARY KEY`-w 使用单个`INDEX`覆盖`TIMESTAMP`列（请记住，`INDEX`!= `UNIQUE`）。

不过，我会使用第一种方法；它更加灵活和可扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:27:41.497

如果您希望 MySQL 自动生成时间戳，您可以使用默认值定义时间戳列，同时仍使用 AUTO INCREMENT 数字作为主键：

```
create temporary table tbl (
    id int auto_increment primary key,
    ts timestamp default current_timestamp
    -- other columns follow...
); 
```

要插入新数据，只需省略`id`and的值`ts`：

```
insert into tbl values ();

select * from tbl;
+----+---------------------+
| id | ts                  |
+----+---------------------+
|  1 | 2012-09-20 18:24:21 |
+----+---------------------+ 
```

如果您经常搜索或排序，请务必在时间戳列上定义索引...

# jquery - 在jquery中调用函数？

> ID：12516710
> 
> 赞同：0
> 
> 时间：2012-09-20T16:15:51.210
> 
> 标签：jquery

```
// Explicit global
$.fn.getRedemptionID = function(){
window.varMy = data.DATA[0].item1;
} 
```

如何调用上述函数来获取变量 varMy ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:19:36.727

从你之前的问题来看，我认为你基本上希望将 var 返回到调用部分..然后你可以写如下，

```
$.fn.getRedemptionID = function(){
   return data.DATA[0].item1;
} 
```

并打电话，

```
var myVar = $(selector).getRedemptionID(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:17:39.770

附加的函数`$.fn`是 jQuery 插件。它们需要在 jQuery 对象上调用。

例如：

```
$('#myDiv').getRedemptionID(); 
```

# javascript - 是什么导致警报复选框显示附加复选框？

> ID：12516711
> 
> 赞同：2
> 
> 时间：2012-09-20T16:15:59.620
> 
> 标签：javascript, textarea, onkeypress

我有一个`textarea`，而且我的`onkeypress`作品在命中时也很好。

但是，如果我继续尝试输入第 256 个字符，我的警告框最终（第 2 次或第 3 次）也会打印出一些`checkbox`我没有写的内容。它说

`[] Prevent this page from creating additional dialogs`

我对浏览器（Firefox）或Javascript是否正在这样做感到困惑。这是代码。

```
function warnOverDescLen()
{
var misc_text = document.forms["InvGenPayDonation"]["TransDesc"].value;

  if(255 < misc_text.length)
  {
    alert("You cannot enter more than 255 characters.");
    return false;
  }

  return true;
}
.
.
.
<textarea rows="4" cols="60" name="TransDesc" id="TransDesc" 
onkeypress="return warnOverDescLen();" ></textarea> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:21:41.947

浏览器添加了该功能，以防止网站因一连串（线程锁定）弹出消息而烦扰用户。

为避免此问题，我建议您在文本框附近的小标签中显示消息（“您不能输入超过 255 个字符。”），而不是使用`alert`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:25:54.167

它是浏览器，询问您是否要禁用重复的警报消息。这在某些开发中很有帮助，例如，如果无限循环正在显示警报消息。这提供了一种忽略这种情况的方法。否则，它是用户审美特征。

# firefox-addon - 将 NPAPI 插件打包到 Firefox 附加组件中

> ID：12516713
> 
> 赞同：1
> 
> 时间：2012-09-20T16:16:07.153
> 
> 标签：firefox-addon, npapi, xpi

我正在尝试将 npapi 打包到我正在编写的 firefox 插件中。如果我将插件安装到 ~/Library/Internet Plug-ins/ 它一切正常，但我不能让它与 xpi 一起安装。我在插件目录的根级别有插件，但我不知道如何告诉 firefox 用 xpi 安装它。

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:41:47.393

将插件作为或类似的方式放入您的 XPI 包中`plugins/plugin.dylib`正是您需要做的。Firefox 不会做任何特别的事情来安装这个插件，它会留在扩展目录中——但它应该在那里被拾取。您可以打开`about:plugins`页面（或插件管理器的插件选项卡）查看插件是否真的安装。

另一件事很重要：您的安装清单（`install.rdf` ) 需要包含以下行：

```
<em:unpack>true</em:unpack> 
```

这建议 Firefox 在安装时解压缩您的 XPI 包。默认情况下，它将作为单个压缩文件而不是目录安装 - 但是不能从压缩文件加载插件。

有关更多详细信息，请参阅[文档](https://developer.mozilla.org/en-US/docs/Shipping_a_plugin_as_a_Toolkit_bundle)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:54:54.703

遗憾的是，新的 firefox SDK 不允许自动安装 npapi 插件。“可引导”的附加组件不是有效的插件源。据我所知，bootstrapable 意味着它们只是从将元​​素动态注入浏览器的脚本中加载的。您需要使用旧的叠加方法，您只需定义叠加或其他内容，但老实说，我从未使用过旧方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T15:28:38.883

如果您想将插件添加到 SDK 插件中，恐怕这是不可能的，正如 msfeldstein 指出的那样。即使您创建插件目录并在 中设置，如果设置 `<em:unpack>true</em:unpack>`了`install.rdf`，firefox 也不会加载插件`<em:bootstrap>true</em:bootstrap>`。

作为一种解决方法，您可以按照[此处](https://developer.mozilla.org/en/docs/Multiple_Item_Packaging)所述制作一个捆绑 xpi，其中包含您的插件和另一个仅作为插件容器的 xpi。这样您就可以同时安装 sdk 插件和插件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-25T12:48:11.870

我使用本指南：[http](http://devilsworkshop.org/shortest-tutorial-for-firefox-extensiontoolbar-development/) ://devilsworkshop.org/shortest-tutorial-for-firefox-extensiontoolbar-development/ ，使用插件示例[http://pub.rtcamp.com/firefox/extensions/googbar.zip](http://pub.rtcamp.com/firefox/extensions/googbar.zip)（更改压缩到 xpi)。对于 npPlugin.dll 创建文件夹 plugins 并将您的插件库放在那里。

# php - 使用 php 验证 youtube url 的问题

> ID：12516714
> 
> 赞同：0
> 
> 时间：2012-09-20T16:16:33.013
> 
> 标签：php, validation, youtube-api

我正在尝试验证从表单字段中获取的 youtube 网址。无论我输入什么，我设置它的方式都没有发现任何错误。我使用 getVideoId() 从有效的 url 中提取视频 ID。

```
 if ($_POST['video_url'] != null && $_POST['video_url'] != 'Youtube URL') {
        $vid_url = $_POST['video_url'];
        $video_id = getVideoId($vid_url);
        $headers = get_headers('http://gdata.youtube.com/feeds/api/videos/' . $video_id);
          if (strpos($headers[0], '200')) {
            $video_url = $vid_url;
          } else {
            $output .= 'This is not an existing youtube video<br/>';
          }
    } 
```

$output 设置为 null ，我在处理表单之前检查它，该表单适用于我如何验证其他字段，所以只是这种方法失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T18:18:47.533

您可以使用 cURL 做到这一点

```
$curr_curl = "http://gdata.youtube.com/feeds/api/videos/".$video_id."?alt=json&v=2";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $curr_curl);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
$code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

if($code == 200) {
    echo "Valid URL";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:55:34.747

我在用于从 gmail 帐户获取电子邮件的 php 脚本中使用以下代码，我将不胜感激所提供的任何改进！

```
function checkForYouTube($body,$androidid){
$searchArg = "http://www.youtube.com/watch?v";
$pos = strpos($body,$searchArg);
if ($pos){
    $url = substr($body,$pos,100);
    $pos1 = strpos($url,"&");
    $url = substr($url,0, $pos1);
    $pos = strrpos($url,"=");
    $movieId = trim(substr($url,$pos+1));
    if (substr($movieId,0,2)=="3D")$movieId = substr($movieId,2);
    $url = $searchArg."=".$movieId;
    $comment = "(Movie=".$url.")".$comment;
    $inc = insertfamilypicture ($androidid,$comment,$url);
    sendYouTubeMovie($androidid, $movieId, $inc);
    return true;
}
return (false); 
```

}

返回使电子邮件能够被删除。对于 Android 用户来说，这似乎是一种获取 YouTube“分享”的粗略方法。

用例是一个永远在线的平板电脑，适用于不太懂电脑的老年人，这将使他的家人可以使用有趣的 YouTube，从智能手机或 YouTube 应用程序“共享”它们。

有没有人有更好的方法来识别带有 YouTube 网址的电子邮件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:50:42.327

如果没有有效的视频 ID，则 $video_id 为空白。如果你试试：

```
$headers = get_headers('http://gdata.youtube.com/feeds/api/videos/');
echo $headers[0]; 
```

你会看到它返回 200。

```
$headers = get_headers('http://gdata.youtube.com/feeds/api/videos/SOMETHINGINVALID');
echo $headers[0]; 
```

返回一些描述的 4xx。

您需要捕获这两种情况：

```
if ($_POST['video_url'] != null && $_POST['video_url'] != 'Youtube URL') {
    $vid_url = $_POST['video_url'];
    $video_id = getVideoId($vid_url);
    if ($video_id) {
        $headers = get_headers('http://gdata.youtube.com/feeds/api/videos/' . $video_id);
        if (strpos($headers[0], '200')) {
            $video_url = $vid_url;
          } else {
              $output .= 'This is not an existing youtube video<br/>';
          }
    } else {
          $output .= 'This is not an existing youtube video<br/>';
    }
} 
```

# .htaccess - 添加 301 重定向到 wp 站点（使用现有规则）

> ID：12516720
> 
> 赞同：0
> 
> 时间：2012-09-20T16:16:53.560
> 
> 标签：.htaccess

我被要求将两个页面重定向到不同的 url。它正在工作，除了由于现有的 WP 重写规则，我在 url 的末尾有一个尾随反斜杠。我需要重定向这些页面，但对于不重定向的页面保持 WP 规则不变。以下是现有的 WP 规则：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

我想补充：

```
Options +FollowSymLinks
RewriteEngine on

Redirect 301 /*old url* http://*new url*/about.html
Redirect 301 /*old url* http://*new url*.com/tour.html 
```

当我这样做时，它重定向到： new url.com/tour.html/ 并且尾随反斜杠导致了问题

我是一个完全的.htaccess 新手。谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:26:57.083

这是 mod_alias 和 mod_rewrite 相互干扰的情况，因为它们都是 URI 文件映射管道的一部分，所以一旦 mod_alias 完成它的事情（`Redirect`指令）并标记要重定向的 URI，mod_rewrite 然后执行它的事情并重写URI。因此，在 URI 文件映射管道的末尾，您得到了 301 重定向，但 URI 被 mod_rewrite 破坏了。

您可以坚持使用 mod_rewrite 并使其完全不应用 wordpress 规则。您还需要在 wordpress 规则之前添加重定向，因此*在**添加之前*`# BEGIN WordPress`：

```
RewriteEngine On
RewriteRule ^/?old_url http://new_url/about.html [L,R=301]
RewriteRule ^/?old_url2 http://new_url/tour.html [L,R=301] 
```

# android - 将文本视图数组动态添加到线性布局

> ID：12516732
> 
> 赞同：2
> 
> 时间：2012-09-20T16:17:44.407
> 
> 标签：android, layout, textview

我试图添加一个我定义为公共变量的文本视图数组，但是当我运行应用程序时，它一进入 for 循环就会强制关闭。这是代码：

```
LinearLayout myLayout = (LinearLayout) findViewById(R.id.my_layout);
            LayoutParams lp = new LayoutParams( LayoutParams.WRAP_CONTENT,    LayoutParams.WRAP_CONTENT);
            pairs=new TextView[num_match+1];
            for(int l=1;l<=num_match;l++)
            {
                pairs[l].setTextSize(15);
                pairs[l].setLayoutParams(lp);
                pairs[l].setId(l);
                pairs[l].setText(m1[l]+" - "+m2[l]);
                myLayout.addView(pairs[l]);
            } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T16:26:44.867

您需要创建新的 TextViews 以放入 TextView 数组，并且您正在跳过第一个索引 ( `pairs[0]`)，这将在以后导致麻烦：

```
pairs=new TextView[num_match];
for(int l=0; l<num_match; l++)
{
    pairs[l] = new TextView(this);
    pairs[l].setTextSize(15);
    pairs[l].setLayoutParams(lp);
    pairs[l].setId(l);
    pairs[l].setText(m1[l + 1]+" - "+m2[l + 1]);
    myLayout.addView(pairs[l]);
} 
```

* * *

根据您的评论，我包含了这个简单的工作示例来帮助您：

```
public class Example extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        LinearLayout myLayout = (LinearLayout) findViewById(R.id.my_layout);
        LayoutParams lp = new LayoutParams( LayoutParams.WRAP_CONTENT,    LayoutParams.WRAP_CONTENT);
        TextView[] pairs=new TextView[4];
        for(int l=0; l<4; l++)
        {
            pairs[l] = new TextView(this);
            pairs[l].setTextSize(15);
            pairs[l].setLayoutParams(lp);
            pairs[l].setId(l);
            pairs[l].setText((l + 1) + ": something");
            myLayout.addView(pairs[l]);
        }

    }
} 
```

随着布局`main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/my_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T16:24:24.027

我认为您需要`pairs[l]`在使用它之前进行初始化，如下所示：

```
 for(int l=1;l<=num_match;l++)
    {
        pairs[l] = new TextView();
        //...
    } 
```

否则它将有 NullPointerException，并按描述折叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:25:35.630

为什么有一个`array of TextViews`？你可以用 替换它`ListView`吗？

我认为这将是一个更好的方法。试试[这个](https://stackoverflow.com/questions/6584906/how-to-insert-textview-dynamically-in-list-view)。

# ruby - Sinatra 的中间件出错

> ID：12516733
> 
> 赞同：1
> 
> 时间：2012-09-20T16:17:51.443
> 
> 标签：ruby, sinatra, rack, middleware

在我的 Sinatra 应用程序中，我创建了以下中间件，以确保传入的请求在查询字符串中包含参数“token”

```
class CheckMandatoryParams
  def initialize(app)
    @app = app
  end
  def call(env)
    # Get token from query string
    h = Hash[*env["QUERY_STRING"].split('&').map {|s| s.split('=')}.flatten]
    token = h["token"]

    # Do not authorize request unless both parameters are not null
    if token.nil? then
      Log.instance.error("CheckMandatoryParams - token not provided")
      [401, {"Content-Type" => "text/plain", "Content-Length" => body.length.to_s}, ["Unauthorized"]]
    else
      Log.instance.debug("CheckMandatoryParams - token provided")
      @app.call(env)
    end
  end
end 
```

在参数存在的情况下，下一个应用程序是调用，一切正常。
如果参数不在查询字符串中，则不会发送响应，我会收到一个巨大的 html 文件，指示在 ' [401, {"Content-Type" => "text/plain", "Content -Length" => body.length.to_s}, ["Unauthorized"]]' 但我不知道出了什么问题。

任何想法？

**更新**

这样工作得更好:)

```
body = "Unauthorized"
[401, {"Content-Type" => "text/plain", "Content-Length" => body.length.to_s}, [body]] 
```

我没有设法使用以下代码检索参数：

```
request = Rack::Request.new(env)
token = request.params["token"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:48:57.060

看起来“body”变量可能未定义。重写代码的一种可能方法如下：

```
class CheckMandatoryParams

  def initialize(app)
    @app = app
  end

  def call(env)
    request = Rack::Request.new(env)
    token = request.params["token"]
    if token.nil?
      [401, {"Content-Type" => "text/plain", "Content-Length" => request.body.length.to_s}, ["Unauthorized"]]
    else
      @app.call(env)
    end
  end

end 
```

# sql-server - HierarchyID - 获取节点列表的所有子节点

> ID：12516743
> 
> 赞同：1
> 
> 时间：2012-09-20T16:18:40.500
> 
> 标签：sql-server, sql-server-2008, hierarchyid

两张表：

```
Team
----
TeamID    int
TeamNode  hierarchyid

TeamUser
--------
TeamID    int
UserID    int 
```

我有一个查询来获取用户所属的直接团队：

```
SELECT * 
FROM 
Team INNER JOIN TeamUser
ON Team.TeamID = TeamUser.TeamID
WHERE
TeamUser.UserID = 123 
```

接下来我想从上述查询的结果集中找到节点的所有子节点。我知道我可以`IsDescendantOf()`用来获取一个节点的所有子节点，但不确定如何使用它来获取节点列表的所有子节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:23:26.727

关于您给出的至少一个示例，有一个先前的问题：`IsDescendantOf()`

[SQL Server Hierarchy 类型方法 IsDescendantOf 可以接受多个输入值吗？](https://stackoverflow.com/questions/10460236/can-sql-server-hierarchy-type-method-isdescendantof-accept-multiple-input-values)

# asp.net - asp.net中的水晶报告 - 页面不断加载

> ID：12516744
> 
> 赞同：0
> 
> 时间：2012-09-20T16:18:44.673
> 
> 标签：asp.net, vb.net, crystal-reports, windows-server-2003, crystal-reports-xi

我是水晶报告的新手。我已经有这个问题很长一段时间了，似乎无法解决它。我正在做的是运行报告并在响应中发回生成的 PDF。

问题是，当我从浏览器运行 asp.net 页面（运行报告）时，它第一次或第二次运行良好，但在那之后，浏览器一直在等待，我没有得到任何回复服务器，甚至没有错误！它只是保持加载很长时间。我什至重新安装了服务器，但仍然遇到同样的问题。在此页面的初始测试期间，我没有遇到此问题。

水晶报表是不可预测的，我不确定这是因为报表没有正确关闭还是连接不正确。

Windows Server 2003 - IIS 这是 vb.net 页面 -

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        Dim connectionInfo As New ConnectionInfo

        connectionInfo.ServerName = "UID=abc;PWD=abc;Driver= {SQL Server};Server=" & Page.Request.QueryString("server") & ";Database=" & Page.Request.QueryString("database")

    Using report As New ReportDocument
            report.Load(Server.MapPath("/report/Crystal/test.rpt"))
            report.FileName = Server.MapPath("/report/Crystal/test.rpt")

            SetDBLogonForReport(connectionInfo, report)

            report.SetParameterValue("param1",  Page.Request.QueryString("param1"))     

            Dim oStream As New MemoryStream()
            oStream = report.ExportToStream(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat)

            Response.Clear()
            Response.Buffer = True
            Response.ContentType = "application/pdf"
            Response.BinaryWrite(oStream.ToArray())
            report.Close()
    End Using

        Response.Flush()
        Response.End()

    End Sub

    Private Sub SetDBLogonForReport(ByVal connectionInfo As ConnectionInfo, ByVal reportDocument As ReportDocument)

        Dim tables As Tables
        tables = reportDocument.Database.Tables

        For Each table As CrystalDecisions.CrystalReports.Engine.Table In tables

            Dim tableLogonInfo As New TableLogOnInfo

            tableLogonInfo = table.LogOnInfo
            tableLogonInfo.ConnectionInfo = connectionInfo
            table.ApplyLogOnInfo(tableLogonInfo)

        Next

    End Sub 
```

```
</div>

</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:57:11.857

首先，将报告连接调用放在 Page_Init() 事件中，而不是 Page_Load() 中。在 .NET 2005 之前，可以将其放在 Page_Load() 中。但是现在他们改变了内存的管理方式，这可能会给您带来随机错误，具体取决于 CrystalReportViewer 的内存状态。将它放在 Page_Init() 中始终是安全的。

其次，我要做的是删除代码： CrystalReportViewer1.DataBind();

我还将删除 RefreshReport() 调用 b/c，当您将报表对象分配给它时，它会自动刷新。但拥有它并没有什么坏处。无论哪种方式，绝对摆脱 .DataBind() 调用。

希望这些更改将使您的应用程序恢复工作。

有关更多详细信息，请查看下面的链接我一年前遇到了同样的问题。希望对你有帮助 [链接](http://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=12112)

# windows-xp - MSI，修复运行，但我不知道为什么

> ID：12516746
> 
> 赞同：0
> 
> 时间：2012-09-20T16:19:07.380
> 
> 标签：windows-xp, windows-installer, installshield

我有一个使用 Installshield 2012 Pro 维护的 MSI 包。

该软件包是几年前创建的，需要定期维护，因为我们的开发团队会发布新版本的应用程序安装。此 MSI 已在许多地方使用，在许多机器上都没有问题。

在一个客户位置，他们在 20 台机器上安装了大约 20 个应用程序副本。每台机器的构造完全相同。由于未知原因，与该应用程序相关的注册表项会定期丢失。不是所有的，选择一两个......相同的条目总是丢失。

到目前为止，我们未能追踪确切的根本原因，但是我们的一位支持工程师注意到当他们打开应用程序快捷方式时出现了 MSI 修复对话框。在此之后，注册表项丢失了。

在注册表项丢失的每个实例中，我们都从 c:\Windows\Installer 目录中删除了 MSI。在我们也进行了此更改的机器上，到目前为止，注册表更改并没有再次消失。

这让我认为 MSI 在修复过程中以某种方式删除了选定的注册表项，但我不明白如何。

*   与被删除的条目相同的键下至少有 50 个注册表条目。（这些是由应用程序而不是安装程序创建的）
*   MSI 包在安装过程中根本不插入任何密钥
*   根本没有自定义操作
*   我在整个 MSI 中只设置了一个密钥文件，这是针对安装在 Windows\system32 中的组件
*   没有任何快捷方式是“广告”

从安装程序目录中删除 MSI 和没有进一步发生之间似乎有明确的联系，但我看不到我的 MSI 中的什么可能导致特定注册表项消失。

我意识到这对我的 MSI 或客户系统来说是主观的，所以我尽可能一般地问：

*   考虑到上述情况，为什么Windows会启动MSI修复功能
*   考虑到上述情况，MSI 可以更改注册表吗
*   是否有安装后的 MSI 来禁用此 MSI 的自动修复功能？
*   我应该如何更改 MSI 以确保不会发生自动修复？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:17:39.827

首先证明汽车维修是否与您的产品有关。检查导致 Windows Installer 启动自动修复的组件 ID 的应用程序事件日志。然后，如果它是您的安装程序的一部分，请找出原因。

您的 MSI 似乎不太可能更改注册表。尽管您没有具体说没有 RemoveRegistry 表条目，但很难想象有任何意外潜入。

只有一些不好的方法可以禁用自动修复（一些是全局的，一些涉及不注册您的安装程序）。避开他们。

首先弄清楚是什么问题。然后想办法解决它。例如，如果在步骤 1 中您确定触发自动修复的组件是您安装的一部分，则可能在发生这种情况的机器上设置[日志记录策略](http://support.microsoft.com/kb/223300)，以便您可以获得详细的 MSI 日志。

# android-intent - 打算启动电子邮件不显示 Exchange 邮件 (Outlook) 作为选项

> ID：12516747
> 
> 赞同：0
> 
> 时间：2012-09-20T16:19:11.183
> 
> 标签：android-intent, outlook

我使用以下代码从这里开始发送电子邮件：

[Android：使用电子邮件意图发送电子邮件，可以在发送前更改消息吗？](https://stackoverflow.com/questions/6273949/android-using-email-intent-to-send-email-possible-to-alter-message-just-before)

代码如下：

```
private void sendEmail(String recipient, String subject, String message) { 
try { 
    final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
    emailIntent.setType("plain/text"); 
    if (recipient != null)  emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{recipient}); 
    if (subject != null)    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject); 
    if (message != null)    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, message); 

    startActivity(Intent.createChooser(emailIntent, "Send mail...")); 

} catch (ActivityNotFoundException e) { 
    // cannot send email for some reason 
} 
```

}

在我的手机 (HTC Desire) 上进行测试时，我没有选择使用我的 Exchange/Outlook 电子邮件（请注意，例如，当我单击网络上的电子邮件链接时我会这样做）。

相反，我得到了“Gmail”和“Evernote - Create Note”的选项（很奇怪）。

该代码在 Gmail 中按预期工作，这很棒，但我需要它才能在 Outlook 中工作。有人知道问题是什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:03:25.903

抱歉，但我问了这个问题两次（每个帖子之间已经过了一段时间，我忘记了我已经问过了！）。

无论如何，在这里找到了解决方案： [如何通过 Intents 打开电子邮件程序（但只有一个电子邮件程序）](https://stackoverflow.com/questions/3312438/how-to-open-email-program-via-intents-but-only-an-email-program)

*更改 MIME 类型就是答案，这就是我在我的应用程序中所做的以更改相同的行为。我用了 intent.setType("message/rfc822");*

像梦一样工作！

# c# - 删除除给定索引号之外的所有元素

> ID：12516753
> 
> 赞同：3
> 
> 时间：2012-09-20T16:19:27.217
> 
> 标签：c#, linq

我有以下列表，如何使用 linq 从给定索引号中删除所有元素：

```
 List<string> a = new List<string>();
        a.Add("number1");
        a.Add("number2");
        a.Add("number3"); 
```

如何使用 linq 删除除索引号 = 2 的元素之外的所有元素。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T16:21:40.217

LINQ 不是关于*删除*东西 - 它是关于*查询*。

不过，您可以调用[`RemoveRange`](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)从列表中删除一系列项目。所以：

```
a.RemoveRange(0, 2); 
```

将只留下“number3”。

或者您可以根据 dasblinkenlight 的回答创建一个新列表。如果您能告诉我们更多关于您想要实现的目标以及您认为 LINQ 是解决方案的原因，我们或许可以为您提供更多帮助。

编辑：好的，现在我们有更明确的要求，您*可以*使用 LINQ：

```
var newList = a.Where((value, index) => index != 2)
               .ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T16:28:10.637

假设您有要保留的索引列表，您可以使用`Where`with`index`进行过滤：

```
 var indexList = new[] {2};
 var result = a.Where((s, index) => indexList.Contains(index)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T16:21:28.880

“删除除 X 之外的所有内容”的等效操作是“保留 X”。最简单的方法是在 index 处构造一个包含单个元素的新列表`2`，如下所示：

```
a = new List<string>{a[2]}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T16:30:14.213

尽管@dasblinkenlight 的答案是更好的选择，但这里是 linq（或至少一次迭代）

```
a.Where((item,index) => b1 == 2); 
```

或返回单个字符串对象而不是 IEnumberable

```
a.Where((a1,b1) => b1 == 2).First(); 
```

# android - 难以复制屏幕布局问题

> ID：12516755
> 
> 赞同：1
> 
> 时间：2012-09-20T16:19:30.517
> 
> 标签：android, android-layout, android-emulator

我的应用程序中有一个设置标签页。它适用于所有用户，除了使用 HTC WildFire 手机的用户。

我已经实施了 Android 建议的所有良好实践，为不同的屏幕尺寸和屏幕密度提供多种资产。

但是对于这个用户来说，当他打开“设置”标签页时，该标签占据了大部分屏幕，并带有一个大框，而实际设置显示在底部的空间非常小。

我没有 HTC Wildfire 手机。有没有办法，我可以创建与 HTC Wildfire 屏幕完全匹配的模拟器并复制此问题？

专家意见表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:28:38.687

也就是说，该设备是我们最坏情况下的平台。无论我们尝试什么，我们都无法克服它的一些怪癖。我记得奇怪的 ListView 分隔符，图像周围的边框 - 还有其他东西。

所以它可能只是设备。但我们也确实设法在具有相应（低）分辨率的模拟器上进行了很多调整。是的，您应该创建一个。

# asp.net - 如何将数据库表中存在的日期填充到 Calender asp.net？

> ID：12516757
> 
> 赞同：-1
> 
> 时间：2012-09-20T16:19:33.810
> 
> 标签：asp.net, sql, database, c#-4.0, calendar

我在数据库中的表有以下列 id ， eventstart ， eventend ， eventname

我正在尝试将事件名称和事件开始日期绑定到日历单元格中的事件发生日期

但是我不能这样做

以下是我的代码片段

```
 protected void myCal_DayRender1(object sender, DayRenderEventArgs e)
{
    DataSet ds = new DataSet();

    SqlDataAdapter cmd = new SqlDataAdapter("Select * FROM event", con);
    cmd.Fill(ds, "Table");
    if (!e.Day.IsOtherMonth)
    {
        foreach (DataRow dr in ds.Tables[0].Rows)
        {
            if ((dr["eventstart"].ToString() != DBNull.Value.ToString()))
            {
                DateTime dtEvent = (DateTime)dr["eventstart"];
                if (dtEvent.Equals(e.Day.Date))
                {

                    Label lbl = new Label();
                    lbl.BorderColor = System.Drawing.Color.Black;
                    lbl.BorderStyle = BorderStyle.Double;
                    lbl.Width = 100;
                    lbl.Height = 100;
                    lbl.BackColor = System.Drawing.Color.BlanchedAlmond;
                    lbl.Text = TextBoxName.Text + "" + TextBoxStart.Text + "" + TextBoxEnd.Text;
                    e.Cell.Controls.Add(lbl);

                }
            }
        }
    }
    else
    {

      }

} 
```

请帮助某人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:51:59.970

好的，从头再来一次。现在我想我明白了。您的问题可能是由于将日期与时间进行比较引起的。要仅获取没有时间的日期，您可以使用`dt.Date`如下所示。由于性能原因，您可以考虑在页面加载时加载所有数据。

```
DataSet ds = new DataSet();        

protected void Page_Load(object sender, EventArgs e)
{
    //get data
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        SqlDataAdapter adapter = new SqlDataAdapter();
        adapter.SelectCommand = 
            new SqlCommand("select * from event", connection);
        adapter.Fill(ds);
    }
}

protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
{        
    //mark dates in calendar
    foreach (DataRow dr in ds.Tables[0].Rows)
    {           
        DateTime dt = (DateTime)dr.Field<DateTime?>("eventstart");

        if (e.Day.Date == dt.Date)           
            {    
                e.Cell.BackColor = System.Drawing.Color.Yellow;

                //add event lable to day
                Label lbl = new Label();
                lbl.BorderColor = System.Drawing.Color.Black;
                lbl.BorderStyle = BorderStyle.Double;
                lbl.BackColor = System.Drawing.Color.BlanchedAlmond;
                lbl.Text = "Event text";
                e.Cell.Controls.Add(lbl);            
            }
    }
} 
```

# c# - 如何在团队基础构建中运行涉及文件系统的测试？

> ID：12516764
> 
> 赞同：1
> 
> 时间：2012-09-20T16:19:45.973
> 
> 标签：c#, build, tfs

我有一组单元测试，我想在 Team Foundation Build 中运行。这些测试从文件系统中读取一组文件，并检查错误。我无法将测试文件数据移动到我的测试 DLL 中，因为重点是检查安装程序中随附/捆绑的这些文件是否有效。

当我在本地运行测试时，这很好，因为测试的 DLL 依赖于这些文件，因此，Visual Studio 在构建测试 DLL 时将它们复制过来。但是，当在构建服务器上运行时，构建服务器会将测试 DLL 连同它直接或间接引用的程序集（如在其元数据中声明）一起复制到不同的目录中。结果，测试找不到被测文件，因为它们没有被声明为“依赖程序集”（也不能）。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:35:46.987

在`.testsettings`对话框中有一个称为部署的类别。如果启用此功能，您可以添加要随构建一起部署的文件和/或目录。

假设您使用的是 MSTest，此外，您在`[Microsoft.VisualStudio.TestTools.UnitTesting.DeploymentItem(path)]`将使用依赖项的测试方法上放置了一个属性，每个文件一个。

例如：

```
[TestMethod]
[DeploymentItem("TestData/file1.xml")]
[DeploymentItem("TestData/file2.xml")]
public void IntegrationTestMethod()
{
    //...
} 
```

# java - 在java中更改整数的值

> ID：12516767
> 
> 赞同：1
> 
> 时间：2012-09-20T16:20:04.537
> 
> 标签：java, count, int, redefine

我开始用java编程，我想做一些游戏和其他需要*改变变量*的东西，尤其是整数。让我给你举个例子。

```
 int Score = 0;

    if(coinCollected = 1){
        int Score = 1
    } 
```

现在当然这将返回'int Score has been defined'，或者其他什么，但我不希望它这么说，因为我想重新定义变量。我在 if 语句之前尝试过@Override，但也没有用。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T16:21:19.930

我认为您想更新该值，如果是，则无需重新定义。

```
int Score = 0;

if(coinCollected == 1){
    // change the value
    Score = 1;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T16:22:27.100

您不想*重新定义*变量。您想为其分配一个新值。

所以只需从第二次出现中删除“int”，它看起来像`score = 1`.

顺便说一句，Java 风格约定状态变量名称以小写字母开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:22:23.983

所以你不必再次定义分数。你的代码应该看起来像这样 int Score = 0;

```
if(coinCollected == 1){
    Score = 1
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T17:36:06.553

```
if(coinCollected = 1) 
```

在上面的语句中，您将值 1 分配给名为 coinCollected 的变量，但这不是您想要做的，您希望将值 1 与名为 coinCollected 的变量的值进行比较。

**例如：**

`if(coinCollected == 1)`

现在在下面的代码中，您重新声明了变量 Score。

```
{

    int Score = 1
} 
```

**更正的代码：**

```
int Score = 0;

if(coinCollected == 1){
     Score = 1
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-20T16:22:07.400

使用不同的范围，或重用现有的`score`或最好使用不同的名称。

```
{
    int score = 0;

} // scope of Score has ended.

if(coinCollected == 1) {
    int score = 1;

} 
```

# objective-c - 哪个 UIViewController 叫 popViewControllerAnimated:？

> ID：12516768
> 
> 赞同：0
> 
> 时间：2012-09-20T16:20:06.620
> 
> 标签：objective-c, uiviewcontroller, pushviewcontroller, popviewcontrolleranimated

假设我有3个`UIViewControllers`A，B，C。

现在假设我从 A 调用 B 或 C。不是使用 segue，而是在代码中实例化它们并将它们推送到`navigationController`.

在 B 或 C 完成后，他们调用`popViewControllerAnimated:`并因此返回到 A。

在这一点上，我想访问 B 或 C 的属性，这取决于它们中的哪一个实际上是我使用的最后一个。

`UIViewController`如果最后一个是 B 型或 C 型，是否有任何方法或属性可以为我提供信息？

我知道我可以为 B 和 C 定义一个协议并将 A 设置为`delegate`，但我正在寻找其他东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:37:13.720

尽管每次都设置起来很不方便，但委托模式*是*解决这个问题的正确方法。也就是说，快速到达那里的最快、最简单的方法可能只是保留对您在 A 的实例变量或属性中推送的最后一个 viewController 的引用，然后在`-viewWillAppear:`. 但是一旦事情开始变得复杂，确保这个属性总是正确的，最终可能比设置一个简单的委托更多的工作。

# disqus - 如何强制对所有评论进行审核

> ID：12516771
> 
> 赞同：0
> 
> 时间：2012-09-20T16:20:11.593
> 
> 标签：disqus

有什么办法可以强制将**所有**评论加入审核队列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:35:35.587

[审核您的社区](http://help.disqus.com/customer/portal/articles/466238-moderating-your-community)，“评论预审核”：

> 可以在您论坛的设置 > 版主页面中找到预审核选项。您可以选择预先审核所有评论或访客个人资料发表的评论。您还可以选择筛选包含链接的评论，以控制垃圾邮件发送者并防止发布不适当的链接。
> 
> 虽然此选项当前在 Disqus 2012 论坛设置中不可用，但可以使用指南启用它，[如何启用 Disqus 2012 中缺少的设置](http://help.disqus.com/customer/portal/articles/708758-settings-missing-from-disqus-2012)。有关 Disqus Classic 和 Disqus 2012 之间差异的更多信息，请参阅[Disqus 2012 简介和常见问题解答](http://help.disqus.com/customer/portal/articles/526768-introducing-disqus-2012-and-f-a-q-)。

# iphone - 按字母顺序从 RSS 对 iPhone TableView 进行排序

> ID：12516779
> 
> 赞同：0
> 
> 时间：2012-09-20T16:20:44.490
> 
> 标签：iphone, xml, uitableview, rss

我正在尝试将我的播客视图从通过 pubDate 排序更改为按字母顺序排序。当前用于解析日期的 RSS 的代码是：

```
 NSMutableArray *entries = [NSMutableArray array];
        [self parseFeed:doc.rootElement entries:entries];

        [[NSOperationQueue mainQueue] addOperationWithBlock:^{

            for (RSSEntryDirectory *entry in entries) {

                int insertIdx = [_allEntries indexForInsertingObject:entry sortedUsingBlock:^(id a, id b) {
                    RSSEntryDirectory *entry1 = (RSSEntry *) a;
                    RSSEntryDirectory *entry2 = (RSSEntry *) b;
                    return [entry1.articleDate compare:entry2.articleDate];
                }];

                [_allEntries insertObject:entry atIndex:insertIdx];
                [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:insertIdx inSection:0]]
                                      withRowAnimation:UITableViewRowAnimationRight];

            }

        }]; 
```

如何将其更改为仅按其他条目属性之一按字母顺序执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:48:59.400

我认为您可以替换比较行：

```
return [entry1.articleDate compare:entry2.articleDate]; 
```

通过类似的方式（假设它是 NSString 对象）：

```
return [entry1.articleTitle localizedCaseInsensitiveCompare:entry2.articleTitle]; 
```

# javascript - Javascript 计算器结果闪烁

> ID：12516783
> 
> 赞同：1
> 
> 时间：2012-09-20T16:21:15.427
> 
> 标签：javascript, function, calculator, displaytag

我的代码：“已编辑，在所有变量前添加了“var”，谢谢。我尝试删除 <form>，但这样做时它不起作用。

```
<head>
<title>Calculator</title>
<script language="javascript">
function calculate()
{
var v=parseInt(document.forms[0].txt1st.value);
var w=parseInt(document.forms[0].txt2nd.value);
var x=parseInt(document.forms[0].txt3rd.value);
var y=703;
var z = (v/w/x*y).toFixed(3);
document.getElementById("display").innerHTML=z;
}

</script>
</head>
<body>
<form name="cal" method="post" action="">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><input name="txt1st" type="text" id="txt1st"></td>
<td><input name="txt2nd" type="text" id="txt2nd"></td>
<td><input name="txt3rd" type="text" id="txt3rd"></td>
<td>x 703</td>
</tr>
</table>
<button onclick="calculate()">Calculate</button>
<div id="display"></div>
</body> 
```

当我单击“计算”按钮时，结果显示在 div 中，但仅在一瞬间消失。请记住，我对 JavaScript 非常陌生。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:23:34.093

您正在提交表单，因此页面正在刷新。

添加`return false;`到`calculate`函数的末尾以防止表单提交。

# regex - 由于基于正则表达式的替换过多，程序挂起

> ID：12516786
> 
> 赞同：2
> 
> 时间：2012-09-20T16:21:20.980
> 
> 标签：regex, string, replace

在我的输入文件中，我需要根据各种条件使用正则表达式进行大量字符串操作（查找/替换）。就像，如果内容的一个块满足条件，我需要转到上一个块并在该块中进行替换。

出于这个原因，我将内容拆分为许多子字符串，以便我可以回到上一个块（这里是上一个子字符串）；并进行正则表达式替换。但是如果文件内容更多（或者可能是，子字符串的数量超过），程序会挂在中间。

这是代码片段。

```
string content = string.Empty;
string target_content = string.Empty;
string[] active_doc_nos;
byte[] content_bytes;
FileInfo input_fileinfo = new FileInfo(input_file);
long file_length = input_fileinfo.Length;
using (FileStream fs_read = new FileStream(input_file, FileMode.Open, FileAccess.Read))
{
    content_bytes = new byte[Convert.ToInt32(file_length)];
    fs_read.Read(content_bytes, 0, Convert.ToInt32(file_length));
    fs_read.Close();
}
content = ASCIIEncoding.ASCII.GetString(content_bytes);
if (Regex.IsMatch(content, "<\\?CLG.MDFO ([^>]*) LEVEL=\"STRUCTURE\""))
{
    #region Logic-1: TWO PAIRS of MDFO-MDFC-s one pair following the other
    content = Regex.Replace(content, "(<\\?CLG.MDFO)([^>]*)(LEVEL=\"STRUCTURE\")", "<MDFO_VALIDATOR>$1$2$3");
    string[] MDFO_Lines = Regex.Split(content, "<MDFO_VALIDATOR>");
    active_doc_nos = new string[MDFO_Lines.GetLength(0)];
    active_doc_nos[0] = Regex.Match(MDFO_Lines[0], "ACTIVE DOC=\"([^>]*)\"\\s+").ToString();
for (int i = 1; i < MDFO_Lines.GetLength(0); i++)
{
    active_doc_nos[i] = Regex.Match(MDFO_Lines[i], "ACTIVE DOC=\"([^>]*)\"\\s+").ToString();
    if (Regex.IsMatch(MDFO_Lines[i - 1], "(<\\?CLG.MDFC)([^>]*)(\\?>)(<\\S*\\s*\\S*>)*$"))
    {
        MDFO_Lines[i - 1] = Regex.Replace(MDFO_Lines[i - 1], "(<\\?CLG.MDFC)([^>]*)(\\?>)(<\\S*\\s*\\S*>)*$", "<?no_smark?>$1$2$3$4");
        if (Regex.IsMatch(MDFO_Lines[i - 1], "^<\\?CLG.MDFO ([^>]*) ACTION=\"DELETED\""))
        {
            MDFO_Lines[i - 1] = Regex.Replace(MDFO_Lines[i - 1], "^<\\?CLG.MDFO ([^>]*) ACTION=\"DELETED\"", "<?no_bmark?><?CLG.MDFO $1 ACTION=\"DELETED\"");
        }
        if (active_doc_nos[i] == active_doc_nos[i - 1])
        {
            MDFO_Lines[i] = Regex.Replace(MDFO_Lines[i], "^<\\?CLG.MDFO ([^>]*) " + active_doc_nos[i], "<?no_smark?><?CLG.MDFO $1 " + active_doc_nos[i]);
        }
    }
}
foreach (string str_piece in MDFO_Lines)
{
   target_content += str_piece;
}
byte[] target_bytes = ASCIIEncoding.ASCII.GetBytes(target_content);
using (FileStream fs_write = new FileStream(input_file, FileMode.Create, FileAccess.Write))
{
    fs_write.Write(target_bytes, 0, target_bytes.Length);
    fs_write.Close();
} 
```

我还有其他选择来完成这项任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:38:12.990

很难说没有看到你的数据，但我怀疑你的一些正则表达式的这部分可能是罪魁祸首：

```
(<\\S*\\s*\\S*>)* 
```

因为`\S`也可以匹配`<`and `>`，因为一切都是可选的，并且因为你有嵌套的量词，所以这部分正则表达式可能会导致灾难性的回溯。

如果用 替换这些部件会`(?>(<\\S*\\s*\\S*>))*`怎样？

# c# - 试图在 Windows 窗体应用程序中读取或写入受保护的内存

> ID：12516793
> 
> 赞同：1
> 
> 时间：2012-09-20T16:21:39.493
> 
> 标签：c#, winforms, access-violation, deferred-execution

作为前言，我查看了通过搜索此错误（其中 25 个左右）匹配的每个 StackOverflow 问题，但似乎都没有解决我遇到的问题。

我正在构建一个继承自 System.Windows.Form 的 PermissionsDialog。在调用的方法中，`dialogPermissions.ShowDialog()`我从数据库中检索一些 Role 对象并将它们加载到几个 ListBox 中。那工作得很好，但现在我需要使用这个伪代码过程覆盖我添加到列表框中的角色对象的属性之一：

*   遍历角色列表
*   使用从配置文件列表中查找匹配项`List<T>.Find()`
*   在个人资料上查找属性
*   建立一个新的角色并根据需要设置名称属性
*   将角色添加到 PermissionsDialog 的角色列表

所有这一切都很顺利，但是当我调用`dialogPermissions.ShowDialog()`底层框架代码时会抛出 AccessViolationException。

这是我认为相关的代码：

```
List<UserProfile> userProfiles = new List<UserProfile>();
List<Role> allRoles = new List<Role>();
dialogData.AllRoles = new List<Role>();

using (var objectContext = this.SiteContext.CreateObjectContext())
{
    userProfiles = rs.UserProfiles.FindAll().ToList();
    allRoles = rs.Roles.FindAll();
}

foreach (Role role in allRoles.Where(role => role.BuiltInId == (int)BuiltInRoleId.UserProfileRole)) {
    var userProfile = userProfiles.Find(up => role.Id == up.Id);

    var roleToAdd = new Role {
        BuiltInId = role.BuiltInId,
        Description = role.Description,
        DirectoryEntry = role.DirectoryEntry,
        Id = role.Id,
        IsBuiltInRole = role.IsBuiltInRole,
        Name = null != profile ? profile.DisplayName:role.Name
    };
    dialogData.AllRoles.Add(roleToAdd);
} 
```

我怀疑这在某种程度上是一个延迟执行问题，但`ToList()`在调用之前通过调用 dialogData.AllRoles来触发执行`ShowDialog()`并不能解决问题。当我用常量字符串替换 profile.DisplayName 时，我没有收到错误消息。

任何线索在这里的封面下发生了什么，或者如何找出正在发生的事情，或者如何以不同的方式解决问题以便我可以避免它？欢迎所有建议;-)

**结论**

所以这是实际的问题，我认为：

将 Role 的 Name 属性设置为 null 就可以了，但是当对话框尝试从 Role 创建 ListBoxItem 并将 Role.Name 属性用于 ListBoxItem 的 Content 属性（它是一个 Object）时，这不能设置为 null 并在构建对话框的框架代码中抛出。检查以确保我在那里有一个值可以解决问题。

似乎抛出一个奇怪的异常，但你有它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:33:31.977

您测试 profile != null，但不测试 profile.DisplayName != null 所以这是从您的样本中首先想到的。

标准异常查找器是转到 Debug\Exceptions 并选中“抛出时中断”框，以便您可以看到抛出异常时的所有状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:53:12.923

您可以盯着这段代码一周，却永远找不到 AccessViolationException 的原因。托管代码不会因像这样的处理器故障而死亡。

您需要从实际异常中挖掘出尽可能多的信息。这首先需要您启用非托管代码调试，以便您可以看到本机代码中的堆栈帧。项目+属性，调试选项卡，勾选“启用非托管代码调试”选项。

接下来，您要确保您拥有任何本机 Windows DLL 的 .pdb 文件。包括用于 Active Directory 的那些，在这种情况下有点可疑。工具 + 选项、调试、符号并启用 Microsoft 符号服务器。如果您有旧版本的 Visual Studio，它不能简单地单击复选框，请按 F1。

重现崩溃，调用堆栈应该很好地提示您怀疑什么本机代码。如果您无法解决问题，请将其发布在您的问题中。

# java - PHP cURL POSTFIELDS 到 RESTful 服务

> ID：12516802
> 
> 赞同：0
> 
> 时间：2012-09-20T16:22:14.070
> 
> 标签：java, php, xml, web-services, rest

我正在开发一个项目，并且在如何使用 php curl 将数据发布到 java restful webservice 方面遇到了一些困难。

**SQL：**

```
DROP DATABASE IF EXISTS POST_TESTE;
CREATE DATABASE POST_TESTE;
USE POST_TESTE;

CREATE TABLE GRAU  (
ID_GRAU             TINYINT         UNSIGNED        NOT NULL,
DESCRICAO_GRAU      VARCHAR(20)     NOT NULL
);

ALTER TABLE GRAU ADD CONSTRAINT PK_GRAU PRIMARY KEY (ID_GRAU);
ALTER TABLE GRAU CHANGE ID_GRAU ID_GRAU TINYINT UNSIGNED NOT NULL AUTO_INCREMENT;

INSERT INTO GRAU (DESCRICAO_GRAU) VALUES ('CET');
INSERT INTO GRAU (DESCRICAO_GRAU) VALUES ('Licenciatura');
INSERT INTO GRAU (DESCRICAO_GRAU) VALUES ('Pós-Licenciatura');
INSERT INTO GRAU (DESCRICAO_GRAU) VALUES ('Pós-Graduação');
INSERT INTO GRAU (DESCRICAO_GRAU) VALUES ('Mestrado');
INSERT INTO GRAU (DESCRICAO_GRAU) VALUES ('Doutoramento'); 
```

在 Netbeans 中，刚刚创建了一个名为“Teste”的 web 应用程序，然后从数据库中创建了 restful webservices，我在其中选择了上面创建的表。创建了 2 个包，第一个（实体）有一个与表 vars 相关的类，第二个（服务）与提供的服务相关。

所以我们的消费服务 url 是 http://localhost:8080/Teste/resources/entity.grau

**Grau.java：**

```
@Entity
@Table(name = "grau")
@XmlRootElement
@XmlType(propOrder={"idGrau", "descricaoGrau"})
@NamedQueries({
    @NamedQuery(name = "Grau.findAll", query = "SELECT g FROM Grau g"),
    @NamedQuery(name = "Grau.findByIdGrau", query = "SELECT g FROM Grau g WHERE g.idGrau = :idGrau"),
    @NamedQuery(name = "Grau.findByDescricaoGrau", query = "SELECT g FROM Grau g WHERE g.descricaoGrau = :descricaoGrau")})
public class Grau implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @NotNull
    @Column(name = "ID_GRAU")
    private Short idGrau;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 20)
    @Column(name = "DESCRICAO_GRAU")
    private String descricaoGrau; 
```

**GrauFacadeREST.java ：**

```
@Stateless
@Path("entity.grau")
public class GrauFacadeREST extends AbstractFacade<Grau> {

@PersistenceContext(unitName = "TestePU")
private EntityManager em;

public GrauFacadeREST() {
    super(Grau.class);
}

@POST
@Override
@Consumes({"application/xml", "application/json"})
public void create(Grau entity) {
    super.create(entity);
}

@PUT
@Override
@Consumes({"application/xml", "application/json"})
public void edit(Grau entity) {
    super.edit(entity);
} 
```

还有更多的服务被开发出来，比如 GET、DELETE 服务，但我只想了解这两个。

我已经开发了一个带有一个输入文本的基本 html，它将数据发布到 .php，这个 .php 的目标是捕获信息并将其发布到例如**create**方法，以向表中添加新的 grau。

**teste.html：**

```
<html><body>
<form action="teste.php" method="post">
        <input type="text" name="text1" /></br>
    <input type="submit" value="Submeter" />
</form>
</body></html> 
```

**teste.php：**

```
<?php

$var=$_POST['text1'];

$xml = new SimpleXMLElement('<graus/>');
$teste = $xml->addChild('grau');
$teste -> addChild('idGrau', '7');
$teste -> addChild('descricaoGrau', $var);
$teste1 = $xml->addChild('grau');
$teste1 -> addChild('idGrau', '8');
$teste1 -> addChild('descricaoGrau', $var);

//$xml="<graus><grau><idgrau>7</idgrau><descricaograu>asdf</descricaograu></grau><grau><idgrau>8</idgrau><descricaograu>asdf</descricaograu></grau></graus>";

/* $xml = array(
        "idgrau" => '7',
        "descricaograu" => $var,
);
*/

print($xml->asXML());

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://localhost:8080/Teste/resources/entity.grau/');
//curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
//curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/xml'));
curl_setopt($ch, CURLOPT_POSTFIELDS, $xml);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$data=curl_exec($ch); 

if (curl_errno($ch)){
    echo curl_error($ch);
    exit;
}   
var_dump($data);
curl_close($ch);

?> 
```

我已经以不同的方式尝试了这个，改变发送后域，在后域中注入数组等等，仍然说同样的错误：

HTTP 状态 400 - 错误请求 客户端发送的请求在语法上不正确（错误请求）。

当用户使用 findAll() 方法时，这是一个通过 .php 开发的响应式 xml。

```
<graus>
    <grau>
        <idGrau>1</idGrau>
        <descricaoGrau>CET</descricaoGrau>
    </grau>
    <grau>
        <idGrau>2</idGrau>
        <descricaoGrau>Licenciatura</descricaoGrau>
    </grau>
    <grau>
        <idGrau>3</idGrau>
        <descricaoGrau>Pós-Licenciatura</descricaoGrau>
    </grau>
    <grau>
        <idGrau>4</idGrau>
        <descricaoGrau>Pós-Graduação</descricaoGrau>
    </grau>
    <grau>
        <idGrau>5</idGrau>
        <descricaoGrau>Mestrado</descricaoGrau>
    </grau>
    <grau>
        <idGrau>6</idGrau>
        <descricaoGrau>Doutoramento</descricaoGrau>
    </grau>
</graus> 
```

如果有人可以帮助我，我将不胜感激，因为我已经浪费了很多时间尝试这个并且仍然不明白如何去做。

# mysql - 如果某些条件为真，如何简单地返回一列？

> ID：12516805
> 
> 赞同：1
> 
> 时间：2012-09-20T16:22:23.760
> 
> 标签：mysql, sql

我有一个名为 A 的表：

```
DATETIME_START || DATETIME_END || VALUE 
 --------------------------------------- 
2012-07-23     || 2013-07-23   ||  coffee  
2011-13-11     || 2013-01-09   ||  airport 
```

我要做的就是 - 如果请求的时间在`DATETIME_START`and之间`DATETIME_END`，只需返回`VALUE`。

我试过：

```
SELECT 
IF (NOW() BETWEEN A.DATETIME_START AND A.DATETIME_END, VALUE,NULL)
FROM A 
```

但发生的事情是我得到了`"IF (NOW() BETWEEN A.DATETIME_START AND A.DATETIME_END, VALUE,NULL)"`结果中的字符串！

**（我不想把条件放在 WHERE 中）**

这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:24:49.707

```
SELECT VALUE FROM A
WHERE NOW() BETWEEN A.DATETIME_START AND A.DATETIME_END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:25:31.637

您是否正在寻找这个：

```
SELECT
    CASE 
        WHEN NOW() BETWEEN A.DATETIME_START AND A.DATETIME_END THEN VALUE
        ELSE NULL
    END
FROM A 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T17:26:19.310

列名将是您实际选择的任何内容。假设您的选择看起来像这样：

```
SELECT
    IF (NOW() BETWEEN A.DATETIME_START AND A.DATETIME_END, ColumnA, ColumnB) 
```

当您可能从 2 列中获取结果时，结果集列名称应该是什么？

您甚至可能没有从任何列中进行选择：

```
SELECT
    IF(0 < 1, 'True', 'False') 
```

在您的特定情况下，您实际上并不需要 IF 语句，但是当您的 SELECT 中确实有条件或函数时，您可以使用 [Alias](http://en.wikipedia.org/wiki/Alias_%28SQL%29) 自己确定列名。

```
SELECT
    IF(0 < 1, 'True', 'False') AS YourName
  # or
    IF(0 < 1, 'True', 'False') AS `Your name with spaces` 
```

# objective-c - 在 AnnotationView 中自动调整 UINavigationBar 的大小

> ID：12516807
> 
> 赞同：0
> 
> 时间：2012-09-20T16:22:28.143
> 
> 标签：objective-c, cocoa-touch, uinavigationbar

在我的应用程序中，我有一个 TabbarController。其中一个选项卡会打开一个启动 iPhone 相机的视图。此 CameraView 是由另一家公司开发的 SDK 的一部分。所以我不能修改这个CameraView的类。我的问题是我必须在这个 CameraView 中实现一个 UINavigationBar。我已经通过 annotationView 解决了这个问题（这个导航栏不是由导航控制器处理的）：

```
[self.annotationView addSubview:navbar]; 
```

除了自动调整大小问题外，一切都很好。如果我将手机切换到横向模式，导航栏太短了。我已经尝试设置 Autoresizingmask 但这没有帮助。您有什么想法可以强制导航栏自动调整大小吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:50:03.343

尝试手动调整导航栏的框架，而不是使用自动旋转。

```
-willRotateFromInterfaceOrientation:(UIInterfaceOrientation)fio toInterfaceOrientation:(UIInterfaceOrientation)tio
{
    if(tio == UIInterfaceOrientationLandscape)
        //set navbar frame 
    else
    //...
} 
```

# mysql - MySQL按多列排序，忽略最后按指令排序

> ID：12516810
> 
> 赞同：1
> 
> 时间：2012-09-20T16:22:45.153
> 
> 标签：mysql, sql-order-by, tinyint

使用以下查询时：

```
SELECT id, rater_id, product_id, is_valid  
FROM `ratings` 
WHERE (`ratings`.element_id = 3151) 
ORDER BY id DESC, product_id DESC, is_valid ASC; 
```

我希望结果集首先按 id 排序，然后按 product_id 排序，然后按 is_valid 排序。实际发生的是结果集确实是有序的，但结果中的 is_valid 列似乎是按 DESC 排序的，而不是按 ASC 排序的。尝试同时使用 ASC 和 DESC，但结果集保持不变。

```
+------------------+--------------+------+-----+---------+----------------+
| Field            | Type         | Null | Key | Default | Extra          |
+------------------+--------------+------+-----+---------+----------------+
| id               | int(11)      | NO   | PRI | NULL    | auto_increment |
| user_id          | int(11)      | NO   | MUL | NULL    |                |
| product_id       | int(11)      | YES  | MUL | NULL    |                |
| value            | tinyint(4)   | YES  | MUL | NULL    |                |
| rater_id         | int(11)      | YES  |     | NULL    |                |
| comment          | varchar(350) | YES  |     | NULL    |                |
| created_at       | datetime     | YES  |     | NULL    |                |
| updated_at       | datetime     | YES  |     | NULL    |                |
| element_id       | int(11)      | YES  | MUL | NULL    |                |
| is_valid         | tinyint(1)   | YES  | MUL | 0       |                |
+------------------+--------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:34:25.580

该`id`字段是 [唯一自动增量] 主键。这意味着无论值`product_id`和`is_valid`有什么， 的顺序`id`都会使其他两个排序规则无用。

我认为您可能不理解该`ORDER BY`子句作为嵌套排序而不是作为列值的独立排序。

# python - 如何找到输入的除数？

> ID：12516811
> 
> 赞同：0
> 
> 时间：2012-09-20T16:22:55.210
> 
> 标签：python, python-3.x

> 编写一个程序，将整数 N 作为输入并打印出（在一行上）N 的所有除数。输入验证：如果 N 是负数（严格小于零），您的程序应显示错误消息并保持要求一个有效的 N（参见下面的示例运行）。
> 
> 样品运行：

```
 Enter N: 10
 The divisors of N are: 1 2 5 10 
```

我知道如何输入所有内容，我只是坚持如何做除数部分。我会使用某种嵌套循环还是可以使用 sum_math 类型的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:08:54.027

这个任务听起来像家庭作业。这就是为什么我将提出的解决方案不使用任何内置函数的原因。

为了找到给定数字 n 的所有除数，您应该遍历直到 sqrt(N) 的所有数字，如果给定数字`i`除以 n(ie `n%i == 0`)，您应该将数字`i`和`(n/i)`除数相加。之后对数组进行排序。如果 n 是完全平方（那么`i`和`n/i`是同一件事），请特别注意。

希望这可以帮助。

# vhdl - 脉冲后 产生持续 10 个时钟周期的时钟

> ID：12516812
> 
> 赞同：0
> 
> 时间：2012-09-20T16:23:01.917
> 
> 标签：vhdl

我正在尝试从 100 MHz 信号创建一个仅持续 10 个时钟周期的时钟。时钟将从脉冲信号中启用。

- 每次脉冲信号进入 1 个时钟 2 时，跟随 100 MHz 时钟 1 10 个周期

*   我正在使用 VHDL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:52:21.853

你的意思是一个100 MHz的时钟作为输入？

假设是这样，小型状态机和计数器将是解决此问题的好方法。状态机可能有 2 个状态：*idle*和*count*。如果脉冲信号为高电平，下一个状态逻辑会将状态从*空闲*变为*计数。*在计数状态下，计数器将递增，当计数器达到 10 时，状态将移回*idle*。当处于*计数*状态时，输出逻辑会将时钟信号转发到输出。*空闲*时，输出将为“0”。

有关制作状态机的更多信息：[如何在 VHDL 中实现状态机](http://vhdlguru.blogspot.com/2010/04/how-to-implement-state-machines-in-vhdl.html)

有关制作计数器的更多信息：[VHDL 中的计数器](http://quartushelp.altera.com/11.1/mergedProjects/hdl/vhdl/vhdl_pro_counters.htm)

clock_input 是作为输入的 100 MHz 时钟，clock_generated 是输出。

输出逻辑将涉及多路复用器：

```
clock_generated <= clock_input when state=count else '0'; 
```

# android - 如何以编程方式设置 android 应用程序徽标和启动器图标

> ID：12516814
> 
> 赞同：3
> 
> 时间：2012-09-20T16:23:06.240
> 
> 标签：android

是否可以动态设置徽标和启动器图标而不是在清单中指定

```
<application
android:icon="@drawable/ic_launcher"
android:logo="@drawable/app_logo"
android:label="@string/app_name"
android:hardwareAccelerated="true"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T16:31:19.363

调用`setIcon()`并`setLogo()`在`ActionBar`运行时更改它们。

编辑：从 API 级别 14 开始工作。

# css - 使用 Bootstrap 将悬停效果剪辑到父级

> ID：12516817
> 
> 赞同：4
> 
> 时间：2012-09-20T16:23:18.113
> 
> 标签：css, twitter-bootstrap, jcarousellite

我正在尝试使用 Bootstrap 和我自己的 CSS 来创建悬停效果。问题是父容器轮播正在剪裁我的悬停效果。

我想要的外观是这样的（将鼠标悬停在具有长描述的项目上）：

[http://www.ebay.com/sch/Other-/26261/i.html?rt=nc&_dmd=2](http://www.ebay.com/sch/Other-/26261/i.html?rt=nc&_dmd=2)

这就是我现在的尝试：

![在此处输入图像描述](../Images/30d28e06767852c939ec5da22757a367.png)

这就是我想要实现的目标：

![在此处输入图像描述](../Images/f8a72137ab714651ae97e15270cbd173.png)

我试过覆盖父溢出元素无济于事。

悬停效果需要：

*   轮播中所有图像的大小相同
*   覆盖它下面的任何内容

这是小提琴：[小提琴](http://fiddle.jshell.net/rboarman/bZ4yD/1/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:50:37.363

如果您使用的是 Bootstrap，为什么不直接使用 Popover？：

```
$('.thumb-hover').popover({
  title: "This is a title",
  content: "This is a test",
  trigger: 'hover',
  placement: 'bottom'
}); 
```

## [JSFiddle](http://fiddle.jshell.net/mmfansler/Zr3EN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:47:17.573

由于插件已经使用它，因此玩溢出似乎并不容易。

`overflow`您可以通过将 X 和 Y 都设置为可见来获得一些有趣的结果： [demo (jsfiddle)](http://jsfiddle.net/Sherbrow/bZ4yD/4/)

```
.carousel-container:hover {
    overflow-y: visible!important;
    overflow-x: visible!important;
} 
```

但是，X 溢出破坏了插件风格。

但它在谷歌浏览器上根本不起作用，所以我的建议是不要使用这个插件。

* * *

使用另一个插件你会遇到几乎相同的问题，因为[CSS overflow-x: visible; 和溢出-y：隐藏；导致滚动条问题](https://stackoverflow.com/q/6421966/1478467)

[使用 Bootstrap Carousel 演示 (jsfiddle)](http://jsfiddle.net/Sherbrow/bZ4yD/6/)

* * *

也许您应该考虑使用一些（自制？）JavaScript，因为轮播无论如何都需要它。

# ruby-on-rails - 在 Rails 中过滤来自预加载的结果

> ID：12516818
> 
> 赞同：0
> 
> 时间：2012-09-20T16:23:19.647
> 
> 标签：ruby-on-rails, eager-loading

我有一个盒子，它有很多隔间，其中包含许多属于一个类别的项目。项目是多态的（：itemable），因为它们可以属于没有隔间的盒子——这可能是我的困难。

我可以在 Box 控制器中为 DB 中的所有 Box 调用所有 Items：

```
@category_items = Item.includes(:category).group("categories.name").sum("quantity * value") 
```

但是如何将这些过滤到仅属于当前 Box id 的那些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:41:24.407

尝试

```
compartment_ids = %(SELECT id FROM compartments WHERE box_id = :box_id)

@category_items = Item.includes(:category).where("(itemable_type = 'box' AND itemable_id = :box_id) OR (itemable_type = 'compartment' AND itemable_id IN (#{compartment_ids}))", :box_id => box_id).group("categories.name").sum("quantity * value") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:04:22.570

尝试以下方式：

```
@category_items= Item.includes(:category).filter(params[:box], [:box_id,:compartment_id, "categories.name"]) 
```

# jakarta-ee - EAR 项目具有多个 WAR 文件以扩展应用程序

> ID：12516824
> 
> 赞同：2
> 
> 时间：2012-09-20T16:23:41.357
> 
> 标签：jakarta-ee, jsf-2, war, ear

我正在开发一个大小可以变得单一的应用程序。我想将应用程序分解为模块化的 Web 组件，并根据需要将它们打包在一起。

例如，假设我有以下 Web 项目：

```
web-app-main.WAR
web-app-feature-1.WAR
web-app-feature-2.WAR 
```

*web-app-main.WAR*将包含所有部署通用的 bean 和页面。现在假设我有一个**客户 #1**已为*web-app-feature-1.WAR 付费*，而**客户 #2**为两者付费。我想要以下内容：

```
Client #1
EAR
  web-app-main.WAR
  web-app-feature-1.WAR
  ejb-client1.JAR

Client #2
EAR
  web-app-main.WAR
  web-app-feature-1.WAR
  web-app-feature-2.WAR
  ejb-client2.JAR 
```

我需要两个功能 WAR 来简单地充当主 WAR 的扩展。这意味着任何 JSF 导航和页面、或控制器、会话数据等都可用于任何功能 WAR，反之亦然。此外，上下文根的整个问题都出现了。

据我了解，我想要完成的事情是不可能的。你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:30:24.083

确实，这是不可能的。实际上，您不应将“功能”（模块）打包为松散的 WAR，而应打包为最终`/WEB-INF/lib`包含在 WAR 中的 JAR。WAR 应该代表一个独立运行的 Web 应用程序。

有关正确的项目设置和配置详细信息，请参阅此答案：[Structure for multiple JSF projects with shared code](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code/8320738#8320738)。

# android - 如何禁用依赖 jar 从库项目导出到常规项目

> ID：12516825
> 
> 赞同：0
> 
> 时间：2012-09-20T16:23:42.857
> 
> 标签：android, amazon-s3, shared-libraries, autobahn

我的情况是我有一个使用 Amazon AWS android libr jars（在 libs 文件夹内）的 Android 项目（常规）。我最近克隆了 Autobahn (https://github.com/tavendo/AutobahnAndroid)，我自己使用这个库项目。问题是亚马逊库使用杰克逊，它包含在 aws jar 核心罐中。由于 Autobahn 也有这种依赖性，我在生成 apk 时遇到以下异常：

java.lang.IllegalArgumentException：已添加：Lorg/codehaus/jackson/Base64Variant；

由于我无法修改亚马逊库，有什么办法可以告诉 Autobahn 项目不要将杰克逊库依赖项“导出”到我自己的项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:30:26.760

> 问题是亚马逊图书馆使用杰克逊，它包含在 aws jar core jars

:: 发牢骚，发牢骚 ::

> 有什么方法可以告诉 Autobahn 项目不要将 jackson libs 依赖项“导出”到我自己的项目中？

不是我知道的。但是您可以让 Autobahn 的分叉依赖于 AWS JAR，并摆脱它自己的 Jackson 副本。不过，这假设亚马逊的嵌入式 Jackson 是完整的并且与 Autobahn 兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:28:43.667

[https://autobahn.s3.amazonaws.com/android/autobahn-0.5.0.jar](https://autobahn.s3.amazonaws.com/android/autobahn-0.5.0.jar)上的 JAR是纯库，仅包含 Autobahn 类，没有引用 Jackson。

存档[https://autobahn.s3.amazonaws.com/android/autobahn-0.5.0.zip](https://autobahn.s3.amazonaws.com/android/autobahn-0.5.0.zip)包含 - 为了方便起见 - Autobahn 和 Jackson JAR。

当您使用来自 GitHub 的 Autobahn 源时，它将包含项目文件（加上示例等），然后设置对 Jackson 的依赖。

您可以从源代码构建您自己的 JAR，方法是转到 repo 中的 Autobahn 目录并执行`ant jar`. 然后，只将该 JAR 放入您的项目中。那应该行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T21:11:50.057

我遇到了一个非常相似的问题 Unable to execute dex: Multiple dex files defined Lorg/codehaus/jackson/Base64Variant using Google Drive api's and Google Spreadsheet api's。这可能会有所帮助。

尝试了所有常用的 Eclipse 修复方法，清理、重建、启动/停止 Eclipse、新工作区等。

如果您使用的是 Eclipse，这就是我无需管理 .jar 即可解决的方法。

1）在Eclipse中，右键单击您的项目属性

2）点击Java编译器

3) 点击建筑

4) 单击配置工作区设置

5) 单击启用项目特定设置

6）点击输出文件夹

7）点击“重建其他人修改的类文件”

希望这可以帮助。

# mysql - mysql触发器中的程序可以工作吗？

> ID：12516829
> 
> 赞同：2
> 
> 时间：2012-09-20T16:24:02.870
> 
> 标签：mysql, sql

可以从触发器中执行存储过程和 sql 查询吗？

**过程加查询**

```
SET @tmp = (SELECT fvalue FROM ftable WHERE id=2);

SET @SQL = CONCAT('INSERT INTO ',@tmp,' VALUES (''buhambug'')');
PREPARE stmt FROM @SQL;
EXECUTE stmt; 
```

如果是这样，规则和示例链接是什么？我一直找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:36:13.090

是的，您可以像这样从触发器调用存储过程：

```
Create trigger foo after insert on table for each row
 BEGIN
  call your_procedure(params);
 END$$ 
```

注意结束分隔符。如果`;`也是触发器内部的默认分隔符，那么它将不起作用，因为 MySQL 将单独处理每个命令并抛出错误。您希望触发器内的整个代码一起执行。因此，在定义触发器之前声明一个不同的分隔符，例如**$$**`Delimiter $$` ，通过. 然后，`;`将在触发器内正常工作。通过**$$**终止触发器后，不要忘记恢复默认分隔符。

# xcode - Mac OSX 10.7.4，Xcode 4.4.1，没有 头文件？

> ID：12516830
> 
> 赞同：5
> 
> 时间：2012-09-20T16:24:07.033
> 
> 标签：xcode, arrays, include, g++

我正在编写一个程序，它将使用 C++ 标准库的数组容器来保存一些对象。但是，每当我尝试在我的程序中包含以下代码行时：

```
#include <array> 
```

我在编译时收到以下错误：

```
75-143-76-177:soft jeffersonhudson$ g++ mms.cpp -o mms
mms.cpp:5:17: error: array: No such file or directory 
75-143-76-177:soft jeffersonhudson$ 
```

注释掉#include 让我编译得很好。当然，我忽略了一些简单的事情？我已经在 Xcode 中安装了“命令行工具”，我还缺少什么吗？

编辑：

我在我的电脑上找到了数组的位置

```
/usr/clang-ide/lib/c++/v1 
```

知道了，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T16:29:50.220

`<array>`在 C++11 中提供，需要提供`-std=c++11`标志来启用它，并为`-stdlib=libc++`对应的库提供标志。但是Xcode提供的g++太老了，对C++11的支持不多。你能切换到clang吗？

```
clang++ -std=c++11 -stdlib=libc++ mms.cpp -o mms 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T19:22:14.420

从外观上看，您使用的不是 LLVM 的 libc++，而是 GCC 的 libstdc++。

要`std::array`在后一种情况下使用，请使用：

```
#include <tr1/array> 
```

如果您想使用 libc++ 和 C++11，请按照 KennyTM 的建议 (+1) 更改您的编译器标志。

# javascript - javascript 哈希键 hasOwnProperty

> ID：12516833
> 
> 赞同：1
> 
> 时间：2012-09-20T16:24:17.927
> 
> 标签：javascript

在 Javascript 中查找哈希中的所有值，我看到了以下代码：

```
var myHash = {};
myHash['one'] = 1;
myHash['two'] = 2;
for (var key in myHash) {
    if (myHash.hasOwnProperty(key)) {
        //do something
    }
} 
```

在这里检查 hasOwnProperty 有什么意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:26:36.787

关键是要确保它`key`是直接定义的属性，`myHash`而不是通过原型链继承的属性。Using`in`不会自动过滤掉继承的属性，所以你可以自己做。

但是，正如其他人所说，您的特定示例没有必要。

**来源：** [`hasOwnProperty`在 MDN 上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:27:40.123

如果 myHash 是具有可枚举属性的对象的新实例，则可能更重要，因此不会列出方法和其他继承的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:28:21.340

在那种特殊情况下没有区别，但是如果 myHash 具有“*继承*”属性，那么这些属性也会被循环，而无需检查 hasOwnProperty。

这很可能是一种预防措施，甚至是一种复制粘贴，编码人员不必担心检查是否每一行都是必要的，只要它有效。

# php - 在 php 中访问 wordpress 管理设置

> ID：12516834
> 
> 赞同：1
> 
> 时间：2012-09-20T16:24:19.717
> 
> 标签：php, wordpress

在 wordpress 管理员中，您可以在设置>阅读下设置“博客页面最多显示”

是否有可能获得在我的主题中使用的价值？我是否也可以在不通过管理员的情况下从我的主题页面更改其默认设置？（例如将其设置为 20）

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:29:36.643

我认为您对 感兴趣`get_option( 'posts_per_page' );`，它基本上告诉您要在`wp_options`表中查找什么。[您可以在此处](http://codex.wordpress.org/Option_Reference)找到详细信息。

此外，如果您想更改此选项，可以使用[this](http://codex.wordpress.org/Function_Reference/update_option)来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:30:00.283

您正在寻找的选项是 posts_per_page ，您会得到它：

```
$posts_per_page = get_option("posts_per_page"); 
```

您可以通过使用主题页面上的选项过滤器有条件地更改默认设置，如下所示：

```
<?php 
    function override_posts_per_page($originalValue){
        if(/* put your page conditional here */)
            return 20;
        else
            return $originalValue;
    }
    add_filter('option_posts_per_page', 'override_posts_per_page', 10, 1);
?> 
```

# php - PHP：如何获得具有特定键的多维数组的总和？

> ID：12516836
> 
> 赞同：0
> 
> 时间：2012-09-20T16:24:30.980
> 
> 标签：php

我想知道如何获取多维数组的一些键值的总和，知道一些键是变量；这是一个例子：

数组可以这样写：

`$array[$dim1][$dim2][$dim3][$dim4] = $variable_value;`

$dim1, 2, 3 和 4 是有维度的数组，我们不知道 $dim1, 2, 3 和 4 的名称。

我们想要每个维度的所有 $variable_value 的总和，但我们不能这样做，`array_sum($array[$dim1][$dim2][$dim3][$dim4])`因为 $dim 是未知的。

我需要找到的算法必须允许我对总和应用过滤器，例如“获取所有 $variable_value 的总和，其中 $dim3 = $variableX ...”，所以像这样的函数：

```
function array_sum_filter($array, $dimension, [$filter_on_key_value]) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:28:50.577

使用 for/foreach 循环遍历多维数组和 if 语句来检查 $dim3 = $variableX...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:30:33.247

您可以尝试使用`RecursiveArrayIterator`和`RecursiveIteratorIterator`

```
$sum = 0;
$specific = 0;
$array = array();
$array["A"]["B"]["C"]["D"] = 5;
$array["A"]["B"]["K"]["D"] = 3;
$array["A"]["C"] = 2;

$array_obj = new RecursiveIteratorIterator(new RecursiveArrayIterator($array));
foreach ( $array_obj as $key => $value ) {
    $sum += $value;

    if ($key == "D")
        $specific += $value;
}

echo $sum, PHP_EOL;
echo $specific, PHP_EOL; 
```

输出

```
 10
 8 
```

# php - php 中的基本自动加载和命名空间

> ID：12516837
> 
> 赞同：4
> 
> 时间：2012-09-20T16:24:42.797
> 
> 标签：php, autoload

我正在更新我不久前编写的框架。我想采用新标准，例如命名空间和使用自动加载功能。

现在我的框架有一个非常基本但功能强大的自动加载功能，如下所示：

```
protected function runClasses()
{
    $itemHandler = opendir( V_APP_PATH );
    while( ( $item = readdir( $itemHandler ) ) !== false )
    {
        if ( substr( $item, 0, 1 ) != "." )
        {
            if( !is_dir( $item ) && substr( $item, -10 ) == ".class.php" )
            {
                if( !class_exists( $this->registry->$item ) )
                {
                    require_once( V_APP_PATH . $item );
                    $item  = str_replace( ".class.php", "", $item );
                    $this->registry->$item = new $item( $this->registry );
                }
            }
        }
    }   
} 
```

正如您在代码中看到的那样，此函数仅限于单个文件夹，但它的优点是将类加载到我的注册表中，允许我通过执行类似于`$this->registry->Class->somevar`我的功能的操作来访问其他文件中的特定类需要。

我需要/想要完成的是使用自动加载器功能，但该功能不限于单个文件夹，而是能够浏览多个文件夹并实例化所需的类。

我只有一些测试文件，这是我当前的文件结构：

![文件结构](../Images/2135eab5bdc0ea0c80e5ecc720ac217b.png)

对于 MyClass2 我有：

```
namespace model;
Class MyClass2 {
    function __construct() {
        echo "MyClass2 is now loaded!";
    }
} 
```

对于 MyClass1 我有：

```
Class MyClass1 {
function __construct() {
         echo "MyClass1 is now loaded!<br />";
    }
} 
```

对于自动加载，我有：

```
function __autoload( $className ) {
    $file = $className . ".php";
    printf( "%s <br />", $file );
    if(file_exists($file)) {
        require_once $file;
    }
}

$obj = new MyClass1();
$obj2 = new model\MyClass2(); 
```

我的问题是设置方式，它找不到 MyClass2 的文件，所以我想知道我做错了什么，其次，有没有像我的第一个“自动加载”函数一样不需要指定命名空间的方法在自动加载文件中并将其分配给我的注册表？

抱歉这么长的问题，但非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T10:39:00.597

我在这里看到两件事。

第一个使您的问题有点复杂。您想使用命名空间，但您当前的配置是通过文件系统进行的。到目前为止，类定义文件的文件名不包含命名空间。所以你不能像你实际做的那样继续。

第二个是您没有 PHP 自动加载所涵盖的内容，您只需加载一组定义的类并将其注册到注册表。

我不确定您是否需要在这里自动加载 PHP。当然，将两者结合在一起看起来很有希望。解决第一点可能会帮助你解决后面的问题，所以我建议先从它开始。

让我们让隐藏的依赖关系更加明显。在您当前的设计中，您拥有三样东西：

1.  在注册表中注册对象的名称。
2.  包含类定义的文件名。
3.  类本身的名称。

2\. 和 3\. 的值合二为一，您从文件名中解析类本身的名称。正如所写，名称空间现在使这变得复杂。解决方案很简单，您可以从包含此信息的文件中读取，而不是从目录列表中读取。一个轻量级的配置文件格式是 json：

```
{
    "Service": {
        "file":  "test.class.php",
        "class": "Library\\Of\\Something\\ConcreteService"
    }
} 
```

这现在包含三个所需的依赖项，以通过名称将类注册到注册表中，因为文件名也是已知的。

然后，您允许在注册表中注册类：

```
class Registry
{
    public function registerClass($name, $class) {
        $this->$name = new $class($this);
    }
} 
```

并为 json 格式添加一个加载器类：

```
interface Register
{
    public function register(Registry $registry);
}

class JsonClassmapLoader implements Register
{
    private $file;

    public function __construct($file) {

        $this->file = $file;
    }

    public function register(Registry $registry) {

        $definitions = $this->loadDefinitionsFromFile();

        foreach ($definitions as $name => $definition) {
            $class = $definition->class;
            $path  = dirname($this->file) . '/' . $definition->file;

            $this->define($class, $path);

            $registry->registerClass($name, $class);
        }
    }

    protected function define($class, $path) {

        if (!class_exists($class)) {
            require($path);
        }
    }

    protected function loadDefinitionsFromFile() {

        $json = file_get_contents($this->file);
        return json_decode($json);
    }
} 
```

这里没有什么神奇之处，json文件中的文件名是相对于它的目录的。如果尚未定义类（此处触发 PHP 自动加载），则需要该类的文件。完成后，该类将通过其名称注册：

```
$registry = new Registry();
$json     = new JsonClassmapLoader('path/registry.json');
$json->register($registry);

echo $registry->Service->invoke();  # Done. 
```

这个例子也很简单，而且很有效。这样第一个问题就解决了。

第二个问题是自动加载。当前的变体和您以前的系统也确实隐藏了其他内容。有两件核心的事情要做。一种是实际加载类定义，另一种是实例化对象。

在您的原始示例中，从技术上讲，自动加载不是必需的，因为在注册表中注册对象时，它也是实例化的。您这样做也是为了将注册表分配给它。我不知道您是否只是因为这个而这样做，或者这是否只是以这种方式发生在您身上。你在你的问题中写下你需要那个。

因此，如果您想将自动加载带入您的注册表（或延迟加载），这会有所不同。由于您的设计已经搞砸了，让我们继续在上面添加更多魔法。您希望将注册表组​​件的实例化推迟到第一次使用它的那一刻。

在注册表中，组件的名称比它的实际类型更重要，这已经是非常动态的并且只是一个字符串。为了推迟组件创建，类不是在注册时创建，而是在访问时创建。这可以通过使用`__get`需要一种新型注册表的功能来实现：

```
class LazyRegistry extends Registry
{
    private $defines = [];

    public function registerClass($name, $class)
    {
        $this->defines[$name] = $class;
    }

    public function __get($name) {
        $class = $this->defines[$name];
        return $this->$name = new $class($this);
    }
} 
```

用法示例再次完全相同，但是注册表的类型已更改：

```
$registry = new LazyRegistry();
$json     = new JsonClassmapLoader('path/registry.json');
$json->register($registry);

echo $registry->Service->invoke();  # Done. 
```

所以现在具体服务对象的创建被推迟到第一次访问。然而，这仍然不是自动加载。类定义的加载已经在 json 加载器中完成。已经使事物变得充满活力和魔力不会因此而产生，但事实并非如此。我们需要一个自动加载器，每个类都应该在第一次访问对象时启动。例如，我们实际上希望能够在应用程序中包含可能永远不会被注意到的烂代码，因为我们不在乎它是否被使用。但是我们不想把它加载到内存中。

对于自动加载，您应该知道[`spl_autoload_register`](http://php.net/spl_autoload_register)哪些允许您拥有多个自动加载功能。这通常有用的原因有很多（例如，假设您使用第三方软件包），但是这个名为`Registry`您的动态魔术盒，它只是完成这项工作的完美工具。一个直接的解决方案（并且不做任何过早的优化）是为我们在注册表定义中的每个类注册一个自动加载器函数。这需要一种新类型的加载器，而自动加载器函数只是两行代码左右：

```
class LazyJsonClassmapLoader extends JsonClassmapLoader
{
    protected function define($class, $path) {

        $autoloader = function ($classname) use ($class, $path) {

            if ($classname === $class) {
                require($path);
            }
        };

        spl_autoload_register($autoloader);
    }
} 
```

用法示例也没有太大变化，只是加载器的类型：

```
$registry = new LazyRegistry();
$json     = new LazyJsonClassmapLoader('path/registry.json');
$json->register($registry);

echo $registry->Service->invoke(); # Done. 
```

现在你可以偷懒了。这意味着，实际上要再次更改代码。因为您想要远程将这些文件实际放入该特定目录的必要性。啊等等，这就是你要的，所以我们把它留在这里。

否则，请考虑使用可在首次访问时返回实例的可调用对象来配置注册表。这通常会使事情变得更加灵活。自动加载 - 如图所示 - 独立于如果您实际上可以离开基于目录的方法，那么您不再关心代码被打包的具体位置（http://www.getcomposer.org/）。

完整的整个代码示例（不带`registry.json`and `test.class.php`）：

```
class Registry
{
    public function registerClass($name, $class) {
        $this->$name = new $class($this);
    }
}

class LazyRegistry extends Registry
{
    private $defines = [];

    public function registerClass($name, $class) {
        $this->defines[$name] = $class;
    }

    public function __get($name) {
        $class = $this->defines[$name];
        return $this->$name = new $class($this);
    }
}

interface Register
{
    public function register(Registry $registry);
}

class JsonClassmapLoader implements Register
{
    private $file;

    public function __construct($file) {

        $this->file = $file;
    }

    public function register(Registry $registry) {

        $definitions = $this->loadDefinitionsFromFile();

        foreach ($definitions as $name => $definition) {
            $class = $definition->class;
            $path  = dirname($this->file) . '/' . $definition->file;

            $this->define($class, $path);

            $registry->registerClass($name, $class);
        }
    }

    protected function define($class, $path) {

        if (!class_exists($class)) {
            require($path);
        }
    }

    protected function loadDefinitionsFromFile() {

        $json = file_get_contents($this->file);
        return json_decode($json);
    }
}

class LazyJsonClassmapLoader extends JsonClassmapLoader
{
    protected function define($class, $path) {

        $autoloader = function ($classname) use ($class, $path) {

            if ($classname === $class) {
                require($path);
            }
        };

        spl_autoload_register($autoloader);
    }
}

$registry = new LazyRegistry();
$json     = new LazyJsonClassmapLoader('path/registry.json');
$json->register($registry);

echo $registry->Service->invoke(); # Done. 
```

我希望这会有所帮助，但这主要是在沙盒中玩，你迟早会粉碎它。您真正想了解的是控制反转、依赖注入以及依赖注入容器。

您拥有的注册表是某种气味。这一切都充满了魔力和活力。您可能认为这对于开发或系统中的“插件”（它很容易扩展）很酷，但是您应该保持其中的对象数量较少。

Magic 可能很难调试，因此您可能需要先检查 json 文件的格式是否对您的情况有意义，以防止出现第一手配置问题。

还要考虑传递给每个构造函数的注册表对象不是一个参数，而是代表动态数量的参数。这迟早会开始产生副作用。如果您使用注册表过多，那么越快越好。这些副作用会让你花费很多维护成本，因为设计上这已经有缺陷了，所以你只能通过努力工作、对回归进行大量集成测试等来控制它。

不过，亲身经历，只是一些看法，不是你后来告诉我的，我没注意到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T09:25:32.180

对于您的第二个问题：不鼓励使用 __autoload，应将其替换为 spl_autoload_register。自动加载器应该做的是拆分命名空间和类：

```
function __autoload( $classname )
{    
  if( class_exists( $classname, false ))
    return true;

  $classparts = explode( '\\', $classname );
  $classfile = '/' . strtolower( array_pop( $classparts )) . '.php';
  $namespace = implode( '\\', $classparts );

  // at this point you have to decide how to process further

} 
```

根据您的文件结构，我建议基于命名空间和类名构建绝对路径：

```
define('ROOT_PATH', __DIR__);

function __autoload( $classname )
{    
  if( class_exists( $classname, false ))
    return true;

  $classparts = explode( '\\', $classname );
  $classfile = '/' . strtolower( array_pop( $classparts )) . '.php';
  $namespace = implode( '\\', $classparts );

  $filename = ROOT_PATH . '/' . $namespace . $classfile;
  if( is_readble($filename))
    include_once $filename;
} 
```

我采用了 PSR0 方法，其中命名空间是路径的一部分。

# html - 如何在我的 ios 应用程序中使用 HTML 标签作为本机标签

> ID：12516840
> 
> 赞同：1
> 
> 时间：2012-09-20T16:24:58.640
> 
> 标签：html, uiwebview, uiscrollview, custom-controls

我必须制作一个自定义控件，在其中我必须将 HTML 标记格式化为本机标记。假设我写：

```
label.text = @"&lt;b&gt;&lt;i&gt;Hello World&lt;/i&gt;&lt;/b&gt; 
```

然后它应该`Hello World`以粗体和斜体格式打印。对于一般的 HTML 标签，我必须这样做`&lt;p&gt;,&lt;br&gt;,&lt;u&gt;,&lt;a href&gt;,&lt;img&gt;`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:29:48.317

最简单的方法是使用 UIWebView（因为您可以将 HTML 放在那里。）您可以使 UIWebView 的背景透明，以使其更好地与您的应用程序集成。

在 IOS 中显示格式化文本的替代方法是使用 CoreText。Apple 有一个关于如何在[此处使用 CoreText 的示例](http://developer.apple.com/library/ios/#samplecode/SimpleTextInput/Introduction/Intro.html)

# php - 使用 imagick 将 .psd 和 .ai 转换为 PNG/JPG

> ID：12516842
> 
> 赞同：20
> 
> 时间：2012-09-20T16:25:06.097
> 
> 标签：php, imagemagick, imagick, psd

我正在为数字资产管理器创建缩略图，使用 imagemagick 执行此操作的最佳方法是什么？

那里有好的资源吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-20T18:43:14.477

我解决了它，并将与世界分享！它将 .ai、.psd、.jpg、.png、.gif 转换为缩略图。

这是一个需要 4 个参数的函数：

$dir - 要保存到的目录。
$tmpName - 命名文件的名称，不包括扩展名。
$fileType - 不言自明。
$size - 大或小。

```
function thumbGenerator($dir,$tmpName,$fileType,$size){
    $saveFileType = "png";
    $imagePath = $dir.$tmpName.".".$fileType;
    $image = new Imagick();
    $image->readimage($imagePath);
    if($fileType == "psd"){
        $image->setIteratorIndex(0);
    }
    $dimensions = $image->getImageGeometry();
    $width = $dimensions['width'];
    $height = $dimensions['height'];
    if($size == "large"){
        $maxWidth = 720;
        $maxHeight =720;
    }
    if($size == "small"){
        $maxWidth = 250;
        $maxHeight =250;
    }
    if($height > $width){
        //Portrait
        if($height > $maxHeight)
            $image->thumbnailImage(0, $maxHeight);
            $dimensions = $image->getImageGeometry();
            if($dimensions['width'] > $maxWidth){
                $image->thumbnailImage($maxWidth, 0);
            }
    }elseif($height < $width){
        //Landscape
        $image->thumbnailImage($maxWidth, 0);
    }else{
        //square
        $image->thumbnailImage($maxWidth, 0);
    }
    if($size == "large"){
        $image->writeImage($dir . $tmpName."-lg.".$saveFileType);
    }
    if($size == "small"){
        $image->writeImage($dir . $tmpName."-sm.".$saveFileType);;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-24T15:47:27.640

@Jason - 感谢分享。以下是一些更简洁、更易于维护/扩展代码的技巧。同样，这在很大程度上取决于您的要求。另外，我实际上并没有运行此代码，因此请原谅任何拼写错误。

$dir - 要保存到的目录。
$tmpName - 命名文件的名称，不包括扩展名。
$fileType - 不言自明。
$size - 大或小。**您可以考虑为缩略图采用像素宽度值，而不是为预定义宽度使用字符串。假设您将来需要在页面的新部分中使用更大的缩略图（即“小”缩略图的 500 像素的 Retina-ready 图标）。您最好在代码的新部分而不是在共享 thumbGenerator 函数中定义大小**

```
function thumbGenerator($dir,$tmpName,$fileType,$size){
    $saveFileType = "png";
    $imagePath = $dir.$tmpName.".".$fileType;
    $image = new Imagick();
    $image->readimage($imagePath);
    if($fileType == "psd"){
        $image->setIteratorIndex(0);
    }
/* Simplify this code section below
    $dimensions = $image->getImageGeometry();
    $width = $dimensions['width'];
    $height = $dimensions['height'];
*/      
    list($width,$height) = $image->getImageGeometry();  // <--- new code
 /* Use $size for the pixel width/height instead and remove the code below
    if($size == "large"){
        $maxWidth = 720;
        $maxHeight =720;
    }
    if($size == "small"){
        $maxWidth = 250;
        $maxHeight =250;
    }
*/
    if($height > $width){
        //Portrait
        if($height > $size) 
            $image->thumbnailImage(0, $size);
            $dimensions = $image->getImageGeometry();
            if($width > $size){  // <--- use the previously created $width variable
                $image->thumbnailImage($size, 0);
            }
/* Don't need this duplicate code.

    }elseif($height < $width){
        //Landscape
        $image->thumbnailImage($maxWidth, 0);
 */
    }else{
        // square or landscape
        $image->thumbnailImage($maxWidth, 0);
    }
/*  DRY - do not repeat yourself - Simplify it and use the pixel width in the image name
    if($size == "large"){
        $image->writeImage($dir . $tmpName."-lg.".$saveFileType);
    }
    if($size == "small"){
        $image->writeImage($dir . $tmpName."-sm.".$saveFileType);;
    }
*/
$image->writeImage($dir . $tmpName."-".$size.".".$saveFileType);;
} 
```

# sql - ssis 包 ado 目标数据转换警告

> ID：12516845
> 
> 赞同：0
> 
> 时间：2012-09-20T16:25:24.460
> 
> 标签：sql, sql-server, ssis

我正在处理 ssis 包，我正在从 .xml 文件中获取值到 ado .net 目标

但是当我在表中输入值时出现以下错误：

> 由于将数据类型为“DT_I8”的输入列“Copy of swaps_Id”中的数据插入到数据类型为“DT_I4”的外部列“swaps_id”，可能会发生潜在的数据丢失。如果这是有意的，另一种进行转换的方法是在 ADO NET 目标组件之前使用数据转换组件

我已经使用`Data conversion transformation editor`了然后也得到了以上错误

应该纠正什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:40:00.060

此警告意味着数据`Copy of swaps_Id`是 64 位整数，您尝试将其插入目标表中的 32 位整数列。你应该做什么取决于你的数据。

1.  如果您确定列中的数据在 32 位有符号整数范围内（-2^31 (-2,147,483,648) 到 2^31-1 (2,147,483,647)），您可以保持原样（永远不会发生数据截断，bur 警告会留）或做数据转换或更改`Copy of swaps_Id`列数据类型
2.  如果不是，您应该将目标数据表中的列数据类型更改为 64 位整数（`bigint`在 Sql Server 中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T23:14:38.503

这仅仅意味着您的源数据类型大于您的目标可以处理的数据类型。在数据转换转换中，您可能希望将列转换为 DT_I8 数据类型，以使该警告消失。

# javascript - 无法在 Sencha-Touch2 中使用 Ext.Ajax 运行 javascript？

> ID：12516848
> 
> 赞同：3
> 
> 时间：2012-09-20T16:25:40.733
> 
> 标签：javascript, html, ajax, extjs, sencha-touch-2

我在 Sencha-Touch 中使用 htmlPanel.js[来](https://stackoverflow.com/questions/9156991/load-an-html-file-into-a-panel)显示本地 html 内容。我可以使用普通的 html 标签加载 html 内容，但不能加载 javascript。

下面是我使用的 htmlPanel.js：

```
Ext.define('HTMLPanel', {
    extend: 'Ext.Panel',

// We are using Ext.Ajax, so we should require it
    requires: ['Ext.Ajax'],
    config: {
        listeners: {
            activate: 'onActivate'
        },

// Create a new configuration called `url` so we can specify the URL
        url: null        
    },

    onActivate: function(me, container) {
        Ext.Ajax.request({
// we should use the getter for our new `url` config
            url:    'htmlTest.html',//this.getUrl(),
            method: "GET",
            success: function(response, request) {
// We should use the setter for the HTML config for this
//Ext.Msg.alert('Alert', 'Success!!!', Ext.emptyFn);    
                me.setHtml(response.responseText);                
            },
            failure: function(response, request) {
//Ext.Msg.alert('Alert', 'Failure!!!', Ext.emptyFn);    
                me.setHtml("failed -- response: " + response.responseText);
            }
        });
    }
}); 
```

下面是我的htmlTest.html：

```
<!DOCTYPE html>
<html>
    <body>

        <canvas id="myCanvas">Your browser does not support the HTML5 canvas tag.</canvas>

        <script type="text/javascript" charset="utf-8">
            var c=document.getElementById('myCanvas');
            var ctx=c.getContext('2d');
            ctx.fillStyle='#FF0000';
            ctx.fillRect(0,0,640,1280);
        </script>

        <h1>This is some text in a paragraph.</h1>

    </body>
</html> 
```

下面是我的 index.js：

```
Ext.application({
    name: 'SampleLoad',
    launch: function () {
        //loadURL('htmlTest.html');
        Ext.Viewport.add({
                        url:    'htmlTest.html',
            xclass: "HTMLPanel",

        });

        // Add the new HTMLPanel into the viewport so it is visible
        Ext.Viewport.add(HTMLPanel);
    }
}); 
```

我可以看到文本“这里有一些文本。”，但看不到我尝试使用 javascript 创建的画布。

有没有需要指定的配置？还是其他原因？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T12:14:13.907

问题是 HTML 被植入到 DOM 中，但脚本没有被执行。这是分配给innerHtml 的情况，也可能是setHtml()。

您可以通过在拼接 HTML 后立即在渲染元素中显式执行脚本来解决此问题。您的 htmlPanel.js 将如下所示：

```
...
// We should use the setter for the HTML config for this
//Ext.Msg.alert('Alert', 'Success!!!', Ext.emptyFn);    
                me.setHtml(response.responseText);  
                var scriptArray = me.renderElement.dom.getElementsByTagName("script");   
                for(var i=0;i<scriptArray.length;i++) {  
                   eval(scriptArray[i].text);  
                }              
            },
... 
```

# symfony - 为 FOS UserBundle 扩展 UserProvider

> ID：12516853
> 
> 赞同：7
> 
> 时间：2012-09-20T16:26:06.600
> 
> 标签：symfony, fosuserbundle, symfony-2.1

我正在使用 Symfony2 构建一个站点，它将是一个白标签类型的站点，其中多个域映射到同一台服务器。所以coolsite.customer1.com 和aservice.customer2.com 将映射到同一个站点，但需要在最终用户看来不同。我已经解决了域问题，并将独特的配置作为服务加载。

通过 FOS UserBundle 设置并使用自定义用户（其中​​存储了 domain_id）运行，注册、登录等工作正常，除了来自 domain1 的用户也可以登录到 domain2。这在 FOS UserBundle 中是预期的。我需要对捆绑包进行修改，以便它只对分配给他们的域上的用户进行身份验证。

我创建了一个 userProvider，它扩展了 FOS 中的原始 userProvider，并覆盖了 loadUserByUsername 方法来检查域。见下文：

```
use FOS\UserBundle\Security\UserProvider as FOSProvider;
use Symfony\Component\DependencyInjection\ContainerInterface;
use FOS\UserBundle\Model\UserManagerInterface;
use Me\CoreBundle\Models\Core;

class UserProvider extends FOSProvider {

    /**
     *
     * @var ContainerInterface 
     */
    protected $container;

    public function __construct(UserManagerInterface $userManager, ContainerInterface $container) {
        parent::__construct($userManager);
        $this->container = $container;
    }

    /**
     * {@inheritDoc}
     */
    public function loadUserByUsername($username)
    {
        $core = $this->container->get('me_core');
        /* @var $core Core */

        $user = $this->findUserBy(array(
            'username'=>$username,
            'domain_id'=>$core->getDomainMap()->getId(),
        ));

        if (!$user) {
            throw new UsernameNotFoundException(sprintf('Username "%s" does not exist.', $username));
        }

        return $user;
    }

    public function findUserBy(array $criteria) {
        return $this->userManager->findUserBy($criteria);
    }

} 
```

我已经使用以下内容配置了服务。

```
services:
  me.security.authentication.userprovider:
    class:  Me\UserBundle\Security\UserProvider
    arguments:
      - @fos_user.user_manager
      - @service_container 
```

我的 security.yml 看起来像这样：

```
security:
    providers:
        me.security.authentication.userprovider:
            id: fos_user.user_provider.username

    encoders:
        FOS\UserBundle\Model\UserInterface: sha512

    firewalls:
        main:
            pattern: ^/
            form_login:
                provider: fos_userbundle
                csrf_provider: form.csrf_provider
            logout:       true
            anonymous:    true

    access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/_wdt, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/public, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/, role: ROLE_ADMIN }
        - { path: ^/, role: ROLE_USER }

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: ROLE_ADMIN 
```

当我尝试访问该站点时发生的情况是一个例外。“ **ServiceNotFoundException：服务“security.authentication.manager”依赖于不存在的服务“security.user.provider.concrete.fos_userbundle”。** “

我的修改基于[这个食谱食谱](http://symfony.com/doc/2.0/cookbook/security/custom_provider.html)

有任何想法吗？我对此感到非常困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T20:22:07.543

我能够让它工作。原来我需要使“id”与我正在使用的服务的名称相同。注释行是捆绑包中的原件。

```
security:
    providers:
        me.security.authentication.userprovider:
            id: me.security.authentication.userprovider
        #fos_userbundle:
            #id: fos_user.user_provider.username 
```

# javascript - 在不更改或具有固定高度/宽度的情况下替换内容 我想保持元素相同的大小和元素内的替代文本。文本和替代文本可以是任意长度。我目前通过猜测文本将在元素中的长度来截断替代文本（但不考虑可能具有多行的原始文本）。如果一切都是单行并且用户不调整窗口大小，它可以正常工作。 $(window).resize(findCELLSIZE);触发太频繁（每次我替换元素时），所以我没有使用它来重新计算宽度和高度。 我有 HTML（简化）为： 问问题 user626963 问问题 2012-09-20T16:26:27.413 660 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我想保持元素相同的大小和元素内的替代文本。文本和替代文本可以是任意长度。我目前通过猜测文本将在元素中的长度来截断替代文本（但不考虑可能具有多行的原始文本）。如果一切都是单行并且用户不调整窗口大小，它可以正常工作。 $(window).resize(findCELLSIZE);触发太频繁（每次我替换元素时），所以我没有使用它来重新计算宽度和高度。 我有 HTML（简化）为：

| first | second | third |
| --- | --- | --- |
| Blah | Blah Blah | Blah |

使用简化的 jQuery/javascript 为： var DESCRIPTIONheight = []; var DESCRIPTIONwidth = 0; function findCELLSIZE () { $("#main tbody tr").each(function() { var thatwidth = $(this).find('td:nth-child(2)').width(); if (thatwidth >= DESCRIPTIONwidth) { DESCRIPTIONwidth = thatwidth+1; } }); $(".special").each(function () { $(this).closest('tr').height(''); DESCRIPTIONheight.push($(this).height()+1); }); } findCELLSIZE(); //$(window).resize(findCELLSIZE); function flashEXPRESS() { $(".special").each(function (index) { var next = $(this).data('text').split(/,\.,/)[0]; var temp = ''; if (next != $(this).data('text')) { temp = $(this).data('text').split(/^(.+?),\.,/)[0] +',.,'; } temp = temp + $(this).html(); var mytextlength = next.match(/>(.*?)<\/span>$/i); if(mytextlength) { if (mytextlength[1].length*7 > DESCRIPTIONwidth) { mytextlength[1] = mytextlength[1].substring(0,Math.floor(DESCRIPTIONwidth/7)); next = next.replace(/>(.*?)<\/span>$/i,'>'+mytextlength[1]+''); } } $(this).html(next); $(this).width(DESCRIPTIONwidth); $(this).data('text', temp); $(this).closest('tr').height(DESCRIPTIONheight[index]); }); } var flashEXPRESSid = 0; flashEXPRESSid = setInterval(flashEXPRESS,1000); 这是一个小提琴我的代码在 IE8 中运行，但不是 Firefox 15（jQuery 写入 html5 数据属性肯定有问题） 所有的 CSS 建议都没有完全起作用（实际的表格更复杂：它可能是表格、IE8 或两者兼而有之）。解决方案是不更改元素，而是使元素具有相同的大小、具有更大 z-index 的位置。更新了小提琴... 为了保持浏览器中立，我将不得不弄清楚为什么 jQuery 的位置和大小没有在不同的浏览器中标准化... javascriptjquery 4 1 回答 1 This answer is useful 0 所有的 CSS 建议都没有完全起作用（实际的表格更复杂：它可能是表格、IE8 或两者兼而有之）。解决方案是不更改元素，而是使元素具有相同的大小、具有更大 z-index 的位置。更新了小提琴... 为了保持浏览器中立，我将不得不弄清楚为什么 jQuery 的位置和大小没有在不同的浏览器中标准化... 于 2012-09-23T02:20:05.867 回答 Related 2 google-chrome - 如何通过命令行安装 crx Chrome 扩展？ 3 c# - 如何从阅读和排序 C# 中跳过第一行 2 ios - iOS6 向具有角半径的容器 UIView 添加阴影 1 php - wp 电子商务折扣 - 如果产品在类别中 1 triggers - 异常表 table1 正在发生变化，触发器/函数可能在 Oracle 中看不到错误 6 java - 在java中将函数作为参数传递 1 xpages - XPages RichText 宽度属性 1 linq-to-sql - 是否有在通用 F# 查询中使用谓词函数的简单实现 6 android - Android：淡入淡出视图 1 javascript - 查询表未提交 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12516857
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, jquery

我想保持元素相同的大小和元素内的替代文本。文本和替代文本可以是任意长度。我目前通过猜测文本将在元素中的长度来截断替代文本（但不考虑可能具有多行的原始文本）。如果一切都是单行并且用户不调整窗口大小，它可以正常工作。 `$(window).resize(findCELLSIZE);`触发太频繁（每次我替换元素时），所以我没有使用它来重新计算宽度和高度。

我有 HTML（简化）为：

```
<table id='main'>
   <thead>
     <th width='100'>first</th>
     <th>second</th>
     <th width='100'>third</th>
   </thead>
   <tbody>
     <tr>
       <td>Blah</td>
       <td class='special' data-text="<span class='highlight'>different BLAH1</span>,.,<span class='highlight2'>short BLAH2</span>">Blah Blah</td>
       <td>Blah</td>
   </tbody>
</table> 
```

使用简化的 jQuery/javascript 为：

```
var DESCRIPTIONheight = [];
var DESCRIPTIONwidth = 0;
function findCELLSIZE () {
   $("#main tbody tr").each(function() { 
       var thatwidth = $(this).find('td:nth-child(2)').width();
       if (thatwidth >= DESCRIPTIONwidth) { DESCRIPTIONwidth = thatwidth+1; }
   });
   $(".special").each(function () {
       $(this).closest('tr').height('');
       DESCRIPTIONheight.push($(this).height()+1);
   });
}
findCELLSIZE();
//$(window).resize(findCELLSIZE);
function flashEXPRESS() {
    $(".special").each(function (index) {
      var next = $(this).data('text').split(/,\.,/)[0];
      var temp = '';
      if (next != $(this).data('text')) {
         temp = $(this).data('text').split(/^(.+?),\.,/)[0] +',.,';
      }
      temp = temp + $(this).html();
      var mytextlength = next.match(/>(.*?)<\/span>$/i);
      if(mytextlength) {
         if (mytextlength[1].length*7 > DESCRIPTIONwidth) { 
           mytextlength[1] = mytextlength[1].substring(0,Math.floor(DESCRIPTIONwidth/7));
           next = next.replace(/>(.*?)<\/span>$/i,'>'+mytextlength[1]+'</span>');
         }
      }
      $(this).html(next);
      $(this).width(DESCRIPTIONwidth);
      $(this).data('text', temp);
      $(this).closest('tr').height(DESCRIPTIONheight[index]);
   });
}
var flashEXPRESSid = 0;
flashEXPRESSid = setInterval(flashEXPRESS,1000); 
```

[这是一个小提琴](http://jsfiddle.net/GBkrc/9/)我的代码在 IE8 中运行，但不是 Firefox 15（jQuery 写入 html5 数据属性肯定有问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T02:20:05.867

所有的 CSS 建议都没有完全起作用（实际的表格更复杂：它可能是表格、IE8 或两者兼而有之）。解决方案是不更改元素，而是使元素具有相同的大小、具有更大 z-index 的位置。[更新了小提琴...](http://jsfiddle.net/GBkrc/14/) 为了保持浏览器中立，我将不得不弄清楚为什么 jQuery 的位置和大小没有在不同的浏览器中标准化...

# lotus-notes - 使用 EmbeddedObject 从 lotus notes api 中提取附件，在系统文件夹中创建 eo*tm 文件

> ID：12516858
> 
> 赞同：3
> 
> 时间：2012-09-20T16:26:27.190
> 
> 标签：lotus-notes, lotus-domino, lotus

我正在尝试使用 EmbeddedObjects 提取附件，我能够提取附件但在系统临时文件夹中创建 em*tm 临时文件。

```
 EmbeddedObject embeddedObject=document.getAttachment(attachmentName);
 InputStream inputStream=embeddedObject.getInputStream();
 .....
 ......
 inputStream.close();
 embeddedObject..recycle();
 document..recycle(); 
```

关闭输入流后，它不会从系统临时文件夹中删除临时文件。我的代码中是否有任何问题或 Lotus Notes 的设置问题。

你能帮我吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:40:23.510

这是一个常见问题，它与对象的不正确关闭/回收（丢失或乱序）有关。E0*TM 文件将在对象存活时创建，并在回收时清理。

如果它们是正确的，则检查是否有任何正在运行的防病毒软件阻止删除。

以下示例代码我用来测试这个之前的作品，所以与你的比较。

```
 try { 

   System.out.println("Start"); 
   String path = "test.txt";    

   Session session = getSession();  
   AgentContext agentContext = session.getAgentContext();   

   System.out.println("Get DB");    
   Database db = session.getCurrentDatabase();  

   System.out.println("View + doc");    
   View vw = db.getView("main");    
   Document doc = vw.getFirstDocument();    

   System.out.println("Embedded object");   
   EmbeddedObject att = doc.getAttachment(path);    
   InputStream is = att.getInputStream();   
   ByteArrayOutputStream fos = new ByteArrayOutputStream(); 

   byte buffer[] = new byte[(int) att.getFileSize()];   
   int read;    
   do { 
    read = is.read(buffer, 0, buffer.length);   
    if (read > 0) { 
     fos.write(buffer, 0, read);    
    }   
   } while (read > -1); 

   fos.close(); 
   is.close();

   // recycle the domino variables  
   doc.recycle();   
   vw.recycle();    
   db.recycle();    
   att.recycle();   

  } catch (Exception e) {   
   e.printStackTrace(); 
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:34:03.837

我的建议是首先注释掉您在帖子中表示的所有代码

```
.....
...... 
```

临时文件是否仍然落后？如果是这样，它看起来像是 8.x 的 Notes 后端类中的一个错误，需要向 IBM 报告。

如果不是，则注释掉的代码中的某些内容会阻止 close() 调用成功。InputStream 是一个抽象类，因此您可能正在将 inputStream 绑定到另一种必须关闭的流对象，以防止文件保持打开状态。

# c# - 读取 LiveDeviceID.xml 以获取密码

> ID：12516859
> 
> 赞同：1
> 
> 时间：2012-09-20T16:26:31.860
> 
> 标签：c#, xml, dynamics-crm

我正在尝试连接到 CRM Dynamics On-line，如果我从控制台运行以下命令以获取用户名和密码，我可以到达那里。

```
deviceregistration.exe /operation:show 
```

显然，如果我能以编程方式读取包含信息的 XML，那就更好了。然而，文件的内容被可怕地加密，看起来像这样。

```
<Data version="1">
  <User username="1kz9u5e4t4br4nah8sm61coc" type="Logical">
    <Pwd>
      AQAAANCMnd8BFdERjHoAwE/Cl+sBAAAASLr2v6+hUU2goUw2ivLu9AAAAAACAAAAAAA 
      QZgAAAAEAACAAAABvPcbpZtXzDjyRoQAm19c71KA3J6TpyU0rieu4WY/1OgAAAAAOgA
      AAAAIAACAAAAAT5Aunf6PBWDRp7UPKYrcP33tniAfAHf1MzEjcUAvVKSAAAAArJkRAv
      Ml+cgNy8fUscH//u41scGezSw+OOvOkpn86r0AAAADLmCwYMLVw+Qo5hPwxnlawMW7s
      0fvMJJkM1UiyfBQ49nJOF7v0pa32DtFFluDsjGv4Yddj7j+FtNiYNxmvzc0l
    </Pwd>
  </User>
</Data> 
```

如何使用 C# 获取真实数据？请注意，我知道如何访问该文件、读取其内容并处理获取两个感兴趣的字符串的 XML 结构。它**从加密版本变成了普通版本，**这就是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:06:51.663

CRM SDK 包含文件 sdk\samplecode\cs\helpercode\deviceidmanager.cs。如果您想连接 Dynamics CRM On-Line，此文件应该会有所帮助。

```
 ClientCredentials credentials = new ClientCredentials();
    credentials.UserName.UserName = userName;
    credentials.UserName.UserName = userName;
    credentials.UserName.Password = password;

    IServiceManagement<IOrganizationService> orgServiceManagement = ServiceConfigurationFactory.CreateManagement<IOrganizationService>(new Uri(organizationUrl));

    AuthenticationCredentials authCredentials = new AuthenticationCredentials();
    authCredentials.ClientCredentials = credentials;
    authCredentials.SupportingCredentials = new AuthenticationCredentials();
    authCredentials.SupportingCredentials.ClientCredentials = Microsoft.Crm.Services.Utility.DeviceIdManager.LoadOrRegisterDevice();
    AuthenticationCredentials tokenCredentials = orgServiceManagement.Authenticate(authCredentials);
    var organizationTokenResponse = tokenCredentials.SecurityTokenResponse;

    OrganizationServiceProxy _serviceProxy;
    IOrganizationService _service;
    using (_serviceProxy = new OrganizationServiceProxy(orgServiceManagement, organizationTokenResponse))
    {
        _service = (IOrganizationService)_serviceProxy;

        WhoAmIResponse response = (WhoAmIResponse)_service.Execute(new WhoAmIRequest());
        Console.WriteLine(response.UserId.ToString());
    } 
```

# c# - 使用 Ilmerge 在 .NET 中组合多个 dll

> ID：12516866
> 
> 赞同：1
> 
> 时间：2012-09-20T16:26:52.323
> 
> 标签：c#, ilmerge

请问如何使用 ILMerge 将多个 dll 合并为一个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T16:30:21.190

您可以从命令行运行它，如下所示：

```
ilmerge /out:Merged.dll Lib1.dll Lib2.dll 
```

# java - JavaFX ListView & ContextMenu - getSelectedItem() 返回 null

> ID：12516871
> 
> 赞同：1
> 
> 时间：2012-09-20T16:27:04.087
> 
> 标签：java, event-handling, javafx-2

我想在 listView 的行上使用上下文菜单项。在 listView 的 MOUSE_CLICKED 事件的事件处理程序中，getSelectionModel().getSelectedItem() 返回选中的项目，没关系。但是，当我处理 contextMenuItem 的 onAction 事件时，它返回 null。但是，以图形方式选择了该项目。有没有办法在第一次事件处理后“保留”选择？

这是代码的相关部分：

```
 ListView<Text> nameList = new ListView<>();
    final ContextMenu cCm = new ContextMenu();
    MenuItem cItem = new MenuItem("someText");
    cCm.getItems().add(cItem); 
```

...

```
nameList.addEventHandler(MouseEvent.MOUSE_CLICKED, new EventHandler<MouseEvent>() {

        @Override
        public void handle(MouseEvent e) {
            if (e.getButton() == MouseButton.SECONDARY) {
                    //its OK here:
                    System.out.println(nameList.getSelectionModel().getSelectedItem().getText());
                    cCm.show(nameList, e.getScreenX(), e.getScreenY());
            }
        }
    });

    cItem.setOnAction(new EventHandler<ActionEvent>() {

        @Override
        public void handle(ActionEvent e) {
            final Stage dialog = new Stage();
            dialog.initModality(Modality.WINDOW_MODAL);
            //nullPointerException on the following:
            Text t = new Text(nameList.getSelectionModel().getSelectedItem().getText());
            //showing dialog, etc. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-21T05:42:30.363

我几乎创建了您所做操作的精确副本，并且我的实现有效：

```
private void initRandomCardListView() {
    populateRandomList();
    final ContextMenu randomListContextMenu = new ContextMenu();
    MenuItem replaceCardMenuItem = new MenuItem("Replace");
    replaceCardMenuItem.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent event) {
            replaceRandomCard();
        }
    });
    randomListContextMenu.getItems().add(replaceCardMenuItem);

    randomCardList.addEventHandler(MouseEvent.MOUSE_CLICKED, new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent event) {
            if (event.getButton().equals(MouseButton.SECONDARY)) {
                randomListContextMenu.show(randomCardList, event.getScreenX(), event.getScreenY());
            }
        }
    });
}

private void replaceRandomCard() {
    System.out.println("jobs done");
    System.out.println("card selected: " + randomCardList.selectionModelProperty().get().getSelectedItem().toString());
    System.out.println("card index: " + randomCardList.getSelectionModel().getSelectedIndex());
    System.out.println("card index: " + randomCardList.getSelectionModel().getSelectedItem().toString());
} 
```

我没有任何空指针异常。总体而言，您的实现看起来不错。您的列表视图中的项目很可能有问题。

# elasticsearch - Club-Mate 不适合 Elasticsearch 中的 Club-Mate

> ID：12516872
> 
> 赞同：0
> 
> 时间：2012-09-20T16:27:05.803
> 
> 标签：elasticsearch

这是我的堆栈：

*   导轨 3.2.6
*   MongoID ~> 2.5
*   轮胎 0.4.2
*   弹性搜索服务器

我有几千种产品要在弹性搜索中建立索引。这是我的映射：

```
mapping do
    indexes :name, analyzer: 'snowball', boost: 100
    indexes :description, analyzer: 'snowball'
end 
```

不幸的是，搜索结果非常糟糕。通过搜索“club-mate”，第一个结果是“club-mate-c”。第二个结果是“club-mate”。为什么“club-mate”不适合“club-mate”。搜索结果按 _score 排序。没有其他的。

我感谢任何形式的反馈。我确信这只是一个配置问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:44:48.587

您几乎没有提供有关您要索引哪些数据、数据的统一程度或查询方式的信息。

一个可能的问题是，这些术语在您的数据集中并不常见，`club`并且`mate`在您的分片中分布不均。

默认情况下，每个分片单独考虑词频，因此如果在一个分片上你有`club`, `mate`3 次，而在另一个分片上你有`club`, `mate`,`c`一次，那么第二个分片可能会考虑`club`并且`mate`比第一个分片更相关。

通常，在大量数据的情况下，词频甚至会出现问题，因此这不再是一个问题。但是，使用少量数据，您可以看到这样的问题。

解决方案：

*   使用单个分片而不是默认的 5 个（如果您总是要拥有少量数据，那么这是更好的选择）
*   索引更多数据
*   添加`search_type=dfs_query_then_fetch`到您的搜索参数中，这将在运行查询之前检查所有分片中的术语频率

**注意：**默认`search_type`为`query_then_fetch`而不是`dfs_query_then_fetch`因为通常情况下，您将有足够的数据来确保均匀的词频，并且它表现更好。

您可以添加`explain=1`搜索参数以查看每个文档的分数是如何计算的，这应该可以更清楚地说明问题。

# jquery - 设置偏移量

> ID：12516873
> 
> 赞同：0
> 
> 时间：2012-09-20T16:27:07.003
> 
> 标签：jquery, html-lists, offset

> **可能重复：**
> [使用 jQuery .offset() 获取和设置位置](https://stackoverflow.com/questions/4613261/get-and-set-position-with-jquery-offset)

是否可以在 li 上设置偏移量？

我有 3`<li>`里面`<ul>`

我想用 jquery 改变他们的位置。我希望能够根据 cookie 中存储的值设置它们的位置。

例如：

```
$('#saved3').offset({left: $.cookie("moved3left")});
$('#saved3').offset({top: $.cookie("moved3top")}); 
```

如果我*提醒*cookies，它会提醒正确的值......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:32:21.087

尝试：

```
$('#saved3').offset({
  top: +$.cookie("moved3top"),
  left: +$.cookie("moved3left")
}); 
```

# php - 如果它满足php中的某些条件，如何为多维数组中的每个数组添加一个键？

> ID：12516874
> 
> 赞同：0
> 
> 时间：2012-09-20T16:27:08.127
> 
> 标签：php, arrays, multidimensional-array, foreach, nested-loops

可以说我有一个像这样的数组：

```
$东西=数组
(
    [test1] => 某事
    [test2] => 某事
    [信息] => 是的
    [数组] => 数组
        (
            [test1] => 别的东西
            [test2] => 别的东西
            [信息] => 也许
            [数组] => 数组
                (
                    [test1] => 某事
                    [信息] => 是的
                )

        )
)

```

我如何编写一个函数，该函数通过`$thing`并向每个称为“有效”的部分添加一个键，`TRUE`其值为“信息”的值为“是”，`FALSE`否则为“是”？

我基本上希望最终数组看起来像：

```
$final = 数组
(
    [test1] => 某事
    [test2] => 某事
    [信息] => 是的
    [有效] => TRUE //添加这个
    [数组] => 数组
        (
            [test1] => 别的东西
            [test2] => 别的东西
            [信息] => 也许
            [有效] => FALSE //添加这个
            [数组] => 数组
                (
                    [test1] => 某事
                    [信息] => 是的
                    [有效] => TRUE //添加这个
                )

        )

)

```

我正在为管理站点地图的 codeigniter 编写一个库，并提供简单的方法来获取页面的面包屑和导航树，但我被困在我需要做这样的事情的地方。

我想不通的主要问题是： **如何遍历数组并为每个部分添加一个键？数组中也可以有无限数量的数组。**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:44:17.960

```
function setInfoTrueFalse($array){
    if(isset($array['info']) && $array['info']=='yes'){ 
        $array['valid']=TRUE;
    }else{
        $array['valid']=FALSE;
    }
    foreach($array as $key => $val){ # if we don't know the name of possible arrays, loop though
        if(is_array($val)){
            # loop one layer deeper if we have another array, could combine with the 'info' check if yes to that means this array exists and is an array
            $array[$key]=setInfoTrueFalse($array[$key]);
        }
    }
    return $array;
}

$final=setInfoTrueFalse($thing); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:33:51.803

这感觉就像您在添加冗余信息。为什么你不能重用数组中的数据——即

```
[info] => yes 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:48:57.887

你可以用这个

```
$thing = Array
(
        "test1" => "something",
        "test2" => "something",
        "info" => "yes",
        "array" => Array
        (
                "test1" => "something else",
    "test2" => "something else",
    "info" => "maybe",
                "array" => Array
                (
                        "test1" => "something",
                        "info" => "yes"
                )
        )
);

function validPush($array)
{
    foreach ($array as $key => $value)
    {
        if(is_array($value))
           $array[$key] = validPush($value);

        if($key == "info")
            $array['valid'] = ($value == "yes") ? true : false ;
    }
    return $array;
}

var_dump(validPush($thing)); 
```

输出

```
array
  'test1' => string 'something' (length=9)
  'test2' => string 'something' (length=9)
  'info' => string 'yes' (length=3)
  'array' => 
    array
      'test1' => string 'something else' (length=14)
      'test2' => string 'something else' (length=14)
      'info' => string 'maybe' (length=5)
      'array' => 
        array
          'test1' => string 'something' (length=9)
          'info' => string 'yes' (length=3)
          'valid' => boolean true
      'valid' => boolean false
  'valid' => boolean true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:35:10.680

为什么不将值添加到第一个数组并认为它对其余数组有效。

编辑：做一个递归调用，传递 $array 取决于你有多少维数组，这里是 3。

```
function add_array( $array) {  
    $array['info'] = 'yes';
 return $arr;
} 
```

称呼：

```
 $final = add_array(add_array(add_array($final))); 
```

# java - Java：如何在双缓冲下绘制游戏背景？

> ID：12516875
> 
> 赞同：1
> 
> 时间：2012-09-20T16:27:11.727
> 
> 标签：java, performance, graphics, background

我在java中有一个游戏，我的所有对象都绘制在一个双缓冲区上，想绘制一个背景，但不希望每帧都重绘背景，我怎么只画一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:41:25.317

您可以在 a 上创建背景`BufferedImage`，这样您就不必每帧都重新创建背景。但是，您必须每帧都绘制背景。这是标准的 Java 动画。

# macos - 捆绑 dylibs，headerpad_max_install_names 不起作用

> ID：12516877
> 
> 赞同：8
> 
> 时间：2012-09-20T16:27:17.580
> 
> 标签：macos, cocoa, bundle, libraries

我有另一个 OSX 应用程序问题。我想在我的最终应用程序中捆绑几个 dylib，应用程序和其他 dylib 都需要它们。

我使用 install_name_tool 更改了它的引用，但是某些库无法正确更改，出现以下错误：

install_name_tool：更改安装名称或 rpath 无法重做：aLibrary.dylib（适用于架构 x86_64），因为不适合较大的更新加载命令（必须重新链接程序，您可能需要使用 -headerpad 或 -headerpad_max_install_names）

所以我在xcode项目的链接器标志上添加了headerpad_max_install_names选项标志（Project Properties-Build Settings-Linking-Other Linker Flags）。我还在构建日志中验证了是否包含选项标志，并且正确包含了选项标志。

但是在最后一个 dylibs 中仍然有同样的错误。

有没有办法将所有需要的库捆绑在一个独特的框架中？还是我在构建过程中做错了什么？

希望我清楚主要问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T19:35:21.877

我有同样的问题，使用 C++ 和 Code::Blocks，我通过从 g++ 切换到 clang++ 来修复它

# python - assertRaises 失败，即使是可调用的也会引发所需的异常（python，unitest）

> ID：12516881
> 
> 赞同：13
> 
> 时间：2012-09-20T16:27:34.150
> 
> 标签：python, unit-testing

我有以下测试代码检查函数中引发的异常。我希望测试能够通过，但会显示失败。这是测试代码：

```
import unittest

# define a user-defined exception
class MyException(Exception):
    def __str__(self):
        return repr("ERROR: Just raised my exception!")

# this is my main class with a method raising this exception
class MyMainObject(object):

    def func(self):
        raise MyException()

# the test class
class TestConfig(unittest.TestCase):

    def test_1(self):

        other = MyMainObject()
        self.assertRaises(MyException, other.func())

# calling the test
if __name__ == '__main__':    
    unittest.main() 
```

在`other.func()`assert 语句中调用时，`MyException`会引发（可以轻松检查）。所以，`assertRaises`测试应该通过测试，因为`other.func()`失败`MyException`，但是：

```
....
MyException: 'ERROR: Just raised my exception!'

----------------------------------------------------------------------
Ran 1 test in 0.001s

FAILED (errors=1) 
```

我看不出有什么问题，所以我希望能就这个问题提供一些意见。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-20T16:31:40.983

`assertRaises`为您调用该函数。通过自己调用它，在可以测试它*之前* 引发异常。`assertRaises`

将您的代码更改为：

```
self.assertRaises(MyException, other.func) 
```

它会正常工作。或者，您可以`assertRaises`用作上下文管理器（python 2.7 及更高版本）：

```
with self.assertRaises(MyException):
    other.func() 
```

用作上下文管理器`assertRaises`有一个额外的优势，您现在可以检索异常实例并对其执行进一步的测试：

```
with self.assertRaises(MyException) as raises_cm:
    other.func()

exception = raises_cm.exception
self.assertEqual(exception.args, ('foo', 'bar')) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T16:31:38.690

由于语言的规则，在输入被调用函数的代码之前对参数进行评估（这通常是一件好事）。因此，`assertRaises`无法捕获在评估参数期间发生的异常。解决方法（在多个 API 中）是您*将一个可调用*对象传递给诸如 之类的方法`assertRaises`，这样他们就可以在他们可以控制的地方对其进行评估并且可以捕获异常。如果整个参数是一个方法调用，绑定方法的魔力可以让您非常优雅地陈述这一点，而不会`lambda`或这样愚蠢：

```
self.assertRaises(MyException, other.func) # <- note, no parentheses after func 
```

# objective-c - iOS - AFNetworking 的 JSON 解析

> ID：12516886
> 
> 赞同：0
> 
> 时间：2012-09-20T16:27:44.013
> 
> 标签：objective-c, ios, json, parsing, afnetworking

我正在尝试从服务器解析 JSON，但是每当我使用 AFNetworking 解析器不起作用时，它会返回整个 JSON 而不是将其分离。

我玩弄了 JSON 并注意到了这个 .NET 安全功能

```
 {"d":[JSON INSIDE]} 
```

JSON INSIDE = 包含 3 个数据对象的我的 JSON 数据，此处未显示。导致默认 JSON Parser 仅将整个 JSON 返回为 1。如果我删除 {"d":}，它会正确解析为多个部分。但是，服务器返回的数据不能删除 d。AFNetworking 中是否有任何地方可以告诉它忽略 d 部分并仅处理括号内的 [JSON] ？

谢谢，艾伦

更新：在获得“d:”中的数据后，我试图再次重新解析，但我在 NSJSonSerialization 行上获得了 SigAbort。

```
 NSString *innerData = [JSON objectForKey:@"d"];
    NSLog(@"Inner Description %@", innerData);

    NSError *jsonParsingError = nil;
    NSDictionary *requestDictionary = [NSJSONSerialization JSONObjectWithData:[innerData dataUsingEncoding:NSUTF8StringEncoding] options:0 error:&jsonParsingError]; 
```

我正在解析的 JSON 示例：

```
{"d":[{"__type":"RequestSearchedInfo:#ChangeControlService.DataContracts","Description":"testing prod ","DueDate":"","Priority":{"__type":"ComponentInfo:#ChangeControlService.DataContracts","Id":2,"Name":"Medium"},"RequestId":368,"Requestor":{"__type":"ComponentInfo:#ChangeControlService.DataContracts","Id":5863,"Name":"A Person's Name"},"SentDate":"8\/31\/2012 4:28:11 PM","Status":{"__type":"StatusInfo:#ChangeControlService.DataContracts","Id":27,"IsEndState":false,"Name":"Pending Approval"},"System":{"__type":"ComponentInfo:#ChangeControlService.DataContracts","Id":11,"Name":"Internal-Testing"}},{"__type":"RequestSearchedInfo:#ChangeControlService.DataContracts","Description":"testing prod ","DueDate":"","Priority":{"__type":"ComponentInfo:#ChangeControlService.DataContracts","Id":2,"Name":"Medium"},"RequestId":367,"Requestor":{"__type":"ComponentInfo:#ChangeControlService.DataContracts","Id":5863,"Name":"A Persons Name"},"SentDate":"8\/31\/2012 4:27:40 PM","Status":{"__type":"StatusInfo:#ChangeControlService.DataContracts","Id":2,"IsEndState":false,"Name":"Pending Review"},"System":{"__type":"ComponentInfo:#ChangeControlService.DataContracts","Id":11,"Name":"Internal-Testing"}},{"__type":"RequestSearchedInfo:#ChangeControlService.DataContracts","Description":"testin","DueDate":"08\/03\/2012","Priority":{"__type":"ComponentInfo:#ChangeControlService.DataContracts","Id":3,"Name":"High"},"RequestId":29,"Requestor":{"__type":"ComponentInfo:#ChangeControlService.DataContracts","Id":5863,"Name":"A Persons Name"},"SentDate":"8\/2\/2012 1:58:34 PM","Status":{"__type":"StatusInfo:#ChangeControlService.DataContracts","Id":22,"IsEndState":false,"Name":"Acceptance Certification passed, Request to be Closed"},"System":{"__type":"ComponentInfo:#ChangeControlService.DataContracts","Id":11,"Name":"Internal-Testing"}}]} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T17:55:24.800

我只是想通了...感谢所有回复的人。杰弗里和道具

我只需要做

```
id innerJSON = [JSON objectForKey:@"d"]; 
```

谢谢！艾伦

# linux - 堆叠linux文件夹内容以显示为一个文件夹

> ID：12516887
> 
> 赞同：2
> 
> 时间：2012-09-20T16:27:45.597
> 
> 标签：linux, directory, hyperlink

有谁知道是否有办法通过指针或链接或其他方式使一个文件夹的内容显示为一个文件夹？因此，例如，如果在 Linux 中我有类似的文件夹

```
/home/2012/
/home/2011/
/home/2010
....
/home/1990/ 
```

我想知道是否可以“堆叠”所有内容以使其看起来好像它们都在一个文件夹中

```
/home/masterlist/ 
```

我想知道是否通过创建链接或某种方式。你知道这是否可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:31:43.870

1.  创建目录`/masterlist/`
2.  cd 进入那个目录
3.  运行这个命令：

    ```
    find ../[12][0-9][0-9][0-9] -type f -exec ln -s {} \; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:34:06.413

您正在寻找的可能是某种联合文件系统。看这里

[http://en.wikipedia.org/wiki/UnionFS](http://en.wikipedia.org/wiki/UnionFS)

实际上这是一个相当先进的功能，如果你喜欢它，你可能会对“Plan 9”操作系统主题感兴趣 :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:33:19.760

你也可以试试 UnionFS

[http://en.wikipedia.org/wiki/Unionfs](http://en.wikipedia.org/wiki/Unionfs)

# mysql - 用于大型日志表的 MySQL 存储引擎

> ID：12516888
> 
> 赞同：3
> 
> 时间：2012-09-20T16:27:46.317
> 
> 标签：mysql, performance, innodb, myisam

（我已经看到[了这个问题](https://stackoverflow.com/questions/8349752/mysql-storage-engine-for-log-table)，但对于我想问的内容还不够具体。）

我正在设置一个大型（一百 GB 左右）日志表，平均记录大小为 100-200 字节和几个索引（索引？）。插入速率约为每秒 100-200 条记录。我将在这张表上运行分析查询，可能不是所有的查询都能找到合适的索引，所以它们可能会运行很长时间并查找大量数据。

1.  你会推荐什么存储引擎？（基本上是 MyISAM 与 InnoDB。）
2.  如果使用 MyISAM，长查询会阻塞插入吗？
3.  表大小是一个问题（不是一个大问题，但仍然）。在这方面，一个引擎比另一个更有效吗？
4.  在性能方面，它们如何比较？
5.  在这种情况下，我还有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T16:58:17.660

如果你使用 INSERT 和 UPDATE 高性能使用 InnoDB 而不是 MyISAM 更好。如果在 INSERT / UPDATE 使用 MyISAM 之前使用更多的 SELECT 语句。InnoDB 支持 ACID（原子性、一致性、隔离性和持久性），因此 SELECT 和 JOIN 越多，速度越慢，但插入速度更快。

EYE：如果你需要交易这样的支付网关，你应该使用 InnoDB 有交易支持

# c# - 在 InvokeMember 调用期间引发 NotSupportedException

> ID：12516889
> 
> 赞同：0
> 
> 时间：2012-09-20T16:27:52.603
> 
> 标签：c#, .net-cf-3.5

我正在使用**.NET CF 3.5**创建 dll 并从 exe 调用 DLL 的公共成员。Dll代码如下：

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Text;

namespace DllPoc
{
    public class DllCheck
    {
        public String ReturnString()
        {
            return "Hello DLL";
        }
    }
} 
```

exe代码是：

```
public partial class Form1 : Form
{
    String _AppPath;
    String _AppImage;
    String _AppName;

    public Form1()
    {
        InitializeComponent();
        //ReadAppLoaderXML();
        //StartApp();

        Assembly assembly = Assembly.LoadFrom("\\test\\DllPoc.dll");
        Type type = assembly.GetType("DllPoc.DllCheck");
        var obj = Activator.CreateInstance(type);
        String s = (String)type.InvokeMember("RetrurnString",
                           BindingFlags.InvokeMethod | BindingFlags.Instance | 
                           BindingFlags.Public, null, obj, null);
        MessageBox.Show(s);
        // Exit
        Application.Exit();
    }
} 
```

在执行该行时：

```
String s = (String)type.InvokeMember("RetrurnString",
                            BindingFlags.InvokeMethod | BindingFlags.Instance | 
                            BindingFlags.Public, null, obj, null); 
```

抛出 NotSupportedException。

这是正确的程序吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:30:31.967

从文档中[`Type.InvokeMember`](http://msdn.microsoft.com/en-us/library/66btctbe.aspx)，例外部分：

> *   NotSupportedException
>     .NET Compact Framework 当前不支持此方法。

对我来说似乎很清楚，.NET CF 不支持它，这就是你正在使用的。

我真的*希望*这`RetrurnString`无论如何都行不通，而且你会想要`ReturnString`.

获取方法 ( )`Type.GetMethod`然后调用`Invoke`. `MethodInfo`我在那里没有看到相同的限制...

# javascript - ASP.NET MVC JSON 实体框架 - 保存数据

> ID：12516890
> 
> 赞同：2
> 
> 时间：2012-09-20T16:27:54.610
> 
> 标签：javascript, sql, json, asp.net-mvc-3, entity-framework

我有一个 asp.net MVC3 应用程序，试图将数据保存到 MS SQL 表（实体框架）。
这是表格：

```
public class CasesProgress
    {
        public virtual long ID { get; set; }
        public virtual long Learner_ID { get; set; }
        public virtual long Course_ID { get; set; }
        public virtual long StudyCase_ID { get; set; }
        public virtual long CaseList_ID { get; set; }
        public virtual bool Viewed { get; set; }
    } 
```

这是我的控制器：

```
public ActionResult StoreProgress(long Learner_ID, long Course_ID, long StudyCase_ID, long CaseList_ID)
    {
        CasesProgress casesprogress = new CasesProgress();
        casesprogress.Learner_ID = Learner_ID;
        casesprogress.Course_ID = Course_ID;
        casesprogress.StudyCase_ID = StudyCase_ID;
        casesprogress.CaseList_ID = CaseList_ID;
        casesprogress.Viewed = true;
        db.CasesProgresses.AddObject(casesprogress);
        db.SaveChanges();
        return Json(new { success = true });
    } 
```

这是我的Javascript：

```
 function StoreProgress1() {
        $.ajax({
            url: '/Home/StoreProgress',
            type: 'POST',
            data: {
                LearnerID: "211",
                Course_ID: "6",
                StudyCase_ID: "19",
                CaseList_ID: "2"
            },
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                alert(data.success);
            },
            error: function () {
                alert("error");
            }
        });
    } 
```

我什至没有进入控制器中的断点就收到错误消息。任何想法，我都是新手。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:30:41.963

尝试改变：

```
LearnerID: "211" 
```

至（如模型中）：

```
Learner_ID: "211" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:02:15.613

问题出在这一行：

内容类型：'应用程序/json；字符集=utf-8',

我删除了它并且它起作用了。感谢所有的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:34:44.710

除了上述答案之外，请检查您是否已将`[HttpPost]`属性应用于您的操作。

# magento - 升级 1.7 magento 冲突

> ID：12516896
> 
> 赞同：0
> 
> 时间：2012-09-20T16:28:19.313
> 
> 标签：magento, upgrade, conflict

我通过 ssh 升级到 Magento 1.7 失败了。有谁知道解决方案？

这是输出：

谢谢！

```
root@****:/var/www/vhosts/****.nl/httpdocs# ./mage install http://connect20.magentocommerce.com/community Mage_All_Latest --force
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/imap.ini on line 1 in Unknown on line 0
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/mcrypt.ini on line 1 in Unknown on line 0
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/imap.ini on line 1 in Unknown on line 0
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/mcrypt.ini on line 1 in Unknown on line 0
PHP Fatal error:  Allowed memory size of 33554432 bytes exhausted (tried to allocate 17158657 bytes) in /var/www/vhosts/****.nl/httpdocs/downloader/lib/Mage/Archive/Abstract.php on line 45
Checking dependencies of packages
Package community/Mage_Core_Adminhtml failed: Detected Mage_Core_Adminhtml conflict of versions: 1.6.0.0-1.6.1.0 and 1.6.1.0-1.7.0.0
Package community/Mage_Core_Modules failed: Detected Mage_Core_Modules conflict of versions: 1.6.0.0-1.6.1.0 and 1.5.0.1-1.6.0.0
Installing package community/Mage_All_Latest 1.6.0.0
Package community/Mage_All_Latest 1.6.0.0 installed successfully
Installing package community/Lib_Varien 1.7.0.0
Package community/Lib_Varien 1.7.0.0 installed successfully
Installing package community/Lib_Google_Checkout 1.5.0.0
Package community/Lib_Google_Checkout 1.5.0.0 installed successfully
Installing package community/Lib_Js_Mage 1.7.0.0
Package community/Lib_Js_Mage 1.7.0.0 installed successfully
Installing package community/Lib_Phpseclib 1.5.0.0
Package community/Lib_Phpseclib 1.5.0.0 installed successfully
Installing package community/Mage_Locale_en_US 1.7.0.0
Package community/Mage_Locale_en_US 1.7.0.0 installed successfully
Installing package community/Lib_Mage 1.7.0.0
Package community/Lib_Mage 1.7.0.0 installed successfully 
```

//////// 更新 /////////

我增加了 php.ini 中的 memory_limit 并再次尝试。结果现在更好了，只有一个冲突在顶部。

该网站仍然无法正常工作。它向我展示了安装向导。我试图以这种方式下载它。但是，当我继续时，它会将我重定向到相同的下载页面..

我有备份。;)

```
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/imap.ini on line 1 in Unknown on line 0
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/mcrypt.ini on line 1 in Unknown on line 0
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/imap.ini on line 1 in Unknown on line 0
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/mcrypt.ini on line 1 in Unknown on line 0
Checking dependencies of packages
Package community/Lib_ZF failed: couldn't connect to host
Package community/Mage_Core_Modules failed: Detected Mage_Core_Modules conflict of versions: 1.6.0.0-1.6.1.0 and 1.5.0.1-1.6.0.0
Installing package community/Mage_All_Latest 1.6.0.0
Package community/Mage_All_Latest 1.6.0.0 installed successfully
Installing package community/Lib_Varien 1.7.0.0
Package community/Lib_Varien 1.7.0.0 installed successfully
Installing package community/Lib_Google_Checkout 1.5.0.0
Package community/Lib_Google_Checkout 1.5.0.0 installed successfully
Installing package community/Lib_Js_Mage 1.7.0.0
Package community/Lib_Js_Mage 1.7.0.0 installed successfully
Installing package community/Lib_Phpseclib 1.5.0.0
Package community/Lib_Phpseclib 1.5.0.0 installed successfully
Installing package community/Mage_Locale_en_US 1.7.0.0
Package community/Mage_Locale_en_US 1.7.0.0 installed successfully
Installing package community/Lib_Mage 1.7.0.0
Package community/Lib_Mage 1.7.0.0 installed successfully
Installing package community/Lib_Js_Prototype 1.7.0.0.3
Package community/Lib_Js_Prototype 1.7.0.0.3 installed successfully
Installing package community/Interface_Adminhtml_Default 1.6.0.0
Package community/Interface_Adminhtml_Default 1.6.0.0 installed successfully
Installing package community/Interface_Frontend_Default 1.6.0.0
Package community/Interface_Frontend_Default 1.6.0.0 installed successfully
Installing package community/Interface_Install_Default 1.6.0.0
Package community/Interface_Install_Default 1.6.0.0 installed successfully
Installing package community/Mage_Downloader 1.6.0.0
Package community/Mage_Downloader 1.6.0.0 installed successfully
Installing package community/Mage_Centinel 1.6.0.0
Package community/Mage_Centinel 1.6.0.0 installed successfully
Installing package community/Interface_Frontend_Base_Default 1.6.0.0
Package community/Interface_Frontend_Base_Default 1.6.0.0 installed successfully
Installing package community/Phoenix_Moneybookers 1.3.0
Package community/Phoenix_Moneybookers 1.3.0 installed successfully
Installing package community/Find_Feed 1.1.0
Package community/Find_Feed 1.1.0 installed successfully
Installing package community/Mage_Compiler 1.6.0.0
Package community/Mage_Compiler 1.6.0.0 installed successfully
Installing package community/Magento_Mobile 1.5.0.0.21.0
Package community/Magento_Mobile 1.5.0.0.21.0 installed successfully
Installing package community/Mage_Core_Adminhtml 1.6.0.0
Package community/Mage_Core_Adminhtml 1.6.0.0 installed successfully
Starting to download Lib_Js_Calendar-1.51.1.tgz ...
...done: 24,627 bytes
Installing package community/Lib_Js_Calendar 1.51.1
Package community/Lib_Js_Calendar 1.51.1 installed successfully
Starting to download Lib_Js_Ext-1.6.0.0.tgz ...
...done: 267,847 bytes
Installing package community/Lib_Js_Ext 1.6.0.0
Package community/Lib_Js_Ext 1.6.0.0 installed successfully
Starting to download Lib_LinLibertineFont-2.8.14.0.tgz ...
...done: 1,430,498 bytes
Installing package community/Lib_LinLibertineFont 2.8.14.0
Package community/Lib_LinLibertineFont 2.8.14.0 installed successfully
Starting to download Lib_Js_TinyMCE-3.3.7.0.tgz ...
...done: 909,906 bytes
Installing package community/Lib_Js_TinyMCE 3.3.7.0
Package community/Lib_Js_TinyMCE 3.3.7.0 installed successfully
Package installed: community/Mage_All_Latest 1.6.0.0
Package installed: community/Lib_Varien 1.7.0.0
Package installed: community/Lib_Google_Checkout 1.5.0.0
Package installed: community/Lib_Js_Mage 1.7.0.0
Package installed: community/Lib_Phpseclib 1.5.0.0
Package installed: community/Mage_Locale_en_US 1.7.0.0
Package installed: community/Lib_Mage 1.7.0.0
Package installed: community/Lib_Js_Prototype 1.7.0.0.3
Package installed: community/Interface_Adminhtml_Default 1.6.0.0
Package installed: community/Interface_Frontend_Default 1.6.0.0
Package installed: community/Interface_Install_Default 1.6.0.0
Package installed: community/Mage_Downloader 1.6.0.0
Package installed: community/Mage_Centinel 1.6.0.0
Package installed: community/Interface_Frontend_Base_Default 1.6.0.0
Package installed: community/Phoenix_Moneybookers 1.3.0
Package installed: community/Find_Feed 1.1.0
Package installed: community/Mage_Compiler 1.6.0.0
Package installed: community/Magento_Mobile 1.5.0.0.21.0
Package installed: community/Mage_Core_Adminhtml 1.6.0.0
Package installed: community/Lib_Js_Calendar 1.51.1
Package installed: community/Lib_Js_Ext 1.6.0.0
Package installed: community/Lib_LinLibertineFont 2.8.14.0
Package installed: community/Lib_Js_TinyMCE 3.3.7.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:42:33.327

您的 php cli php.ini 文件可以通过一些注意来消除这些警告并超过 32MB？的记忆。

至于手头的问题，为什么不使用 gui 安装一个新的 Magento 构建超过 1.6 db？它将自我更新，向表中添加列等等。

然后，您可以针对 vanilla 1.7 安装运行数据库检查，并修补多年来收集的数据库的任何问题。

最后，您可以将模块和主题放回原处。

这是一条升级路径，而不是您希望的简单点击几下！只需确保您已备份所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:30:01.983

找到了解决方案！Mage 是一个由 phpcli 运行的 PHP 脚本，而不是普通的 php。phpcli 的 memory_limit 默认为 32MB。所以 phpcli 处理另一个 php 配置。（不知道，我和服务器不太相似）

增加 /etc/php5/cli/php.ini 中的 memory_limit 后升级工作

# symfony - Symfony 2 和 Doctrine 2 - 使用“fetch”连接返回空数组

> ID：12516899
> 
> 赞同：1
> 
> 时间：2012-09-20T16:28:25.507
> 
> 标签：symfony, doctrine-orm

我有一个带有 yml 映射的实体“BlogPosts”：

```
type: entity
table: blog_posts
id:
  id:
    type: integer
    generator: { strategy: AUTO }
fields:
  body:
    type: text
  created_at:
    type: datetime
manyToMany:
  replies:
    targetEntity: BlogPosts
    inversedBy: replyTo
    orderBy: {"id": "DESC"}
    orphanRemoval: true
    joinTable:
      name: blog_post_replies
      joinColumns:
        reply_to_id:
          referencedColumnName: id
      inverseJoinColumns:
        reply_id:
          referencedColumnName: id
  replyTo:
    targetEntity: BlogPosts
    mappedBy: replies
manyToOne:
  user:
    targetEntity: User
    inversedBy: posts
    joinColumns:
      user_id:
        referencedColumnName: id
        nullable: false 
```

问题是，当我尝试使用 JOIN 获取数据时，结果为空。

```
 $query = $em->createQuery("SELECT p, rl FROM <Bundle>:BlogPosts p JOIN p.replies rl WHERE p.user = 1");
    $posts = $query->getResult(); // Returns empty array 
```

但它在没有连接的情况下完美运行：

```
 $query = $em->createQuery("SELECT p FROM <Bundle>:BlogPosts p WHERE p.user = 1");
    $posts = $query->getResult(); // Works as intended 
```

我错过了什么？我真的很绝望:(

编辑：刚刚发现，它只返回有回复的帖子。我如何选择所有帖子，如果有回复，也回复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:42:11.757

所以我发现了问题！而不是 JOIN 我使用了 LEFT JOIN：

```
$query = $em->createQuery("SELECT p, rl FROM <Bundle>:BlogPosts p LEFT JOIN p.replies rl WHERE p.user = 1");
$posts = $query->getResult(); // Now it works like a charm! 
```

所以现在 MySQL 将结果加入到博客文章中！使用简单的 JOIN 时，它会尝试将帖子加入回复中，如果帖子没有，则结果将为空！

# .net - 'System.ComponentModel.DataAnnotations.dll' 可用于 Android 和 iOS？

> ID：12516900
> 
> 赞同：9
> 
> 时间：2012-09-20T16:28:26.923
> 
> 标签：.net, database, xamarin.ios, xamarin.android, data-annotations

尝试为 Android 编译 VelocityDB 时收到附加的错误消息。正如 VelocityDB 支持所说，它确实需要数据注释。

引用的“System.ComponentModel.DataAnnotations.dll”是否可用于 Android 和 iOS？

谢谢约瑟夫

错误消息：“加载程序集时出现错误 1 ​​异常：System.IO.FileNotFoundException：无法加载程序集‘System.ComponentModel.DataAnnotations，版本=4.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35’。也许它不存在于Mono for Android 配置文件？文件名：“System.ComponentModel.DataAnnotations.dll”在 Monodroid.Tuner.MonoDroidResolver.Resolve（AssemblyNameReference 参考，ReaderParameters 参数）在 Xamarin.Android.Tasks.ResolveAssemblies.AddAssemblyReferences（List`1 程序集，AssemblyDefinition程序集）在 Xamarin.Android.Tasks.ResolveAssemblies.Execute()"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T16:22:28.967

Xamarin.iOS 6.4.x（稳定版）与 6.3.x 测试版一样，基于 Mono 3.0 并附带`System.ComponentModel.DataAnnotations.dll`.

最新版本的 Xamarin.Android 也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:28:26.657

Xamarin 目前不发货`System.ComponentModel.DataAnnotations.dll`（2012 年 9 月）。

我们很快会在 Mono 2.12 上重新定位产品，它对 .NET 4[.5] 有更好的支持，这将使我们能够在未来发布更多的程序集（但我不能说**是否**或**何时** `System.ComponentModel.DataAnnotations.dll`可用） .

然而 Mono 是一个开源项目。的源代码`System.ComponentModel.DataAnnotations.dll`可在 github 上获得，因此您今天可以尝试针对 MonoTouch（或 Android 的 Mono）提供的 BCL 构建此程序集。如果你这样做了，请与我们分享你的发现！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-09T16:59:43.543

我试图从 VS 2012 中添加 System.ComponentModel。我仍然没有在 VS 的程序集/框架下可用的 dll。

我最终做的是在我的 MBP 上的 Xamarin Studio 中打开项目。然后我能够添加参考。我关闭了 MBP 上的 XS 并在我的虚拟机上重新打开了 VS 中的项目，并且参考就在那里。该解决方案编译良好并在模拟器中运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T19:03:07.283

No, they are not currently available. Someone from Xamarin might be able to comment on their future inclusion in either product.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-20T12:22:11.280

在应该跟踪此问题的 Xamarin 上打开了此错误

[https://bugzilla.xamarin.com/show_bug.cgi?id=12053](https://bugzilla.xamarin.com/show_bug.cgi?id=12053)

# jquery-mobile - Symfony 2 和 jQuery 移动版 1.1.1

> ID：12516902
> 
> 赞同：1
> 
> 时间：2012-09-20T16:28:30.060
> 
> 标签：jquery-mobile, symfony, symfony-2.1

我使用 Symfony 2.1 和 jQuery Mobile 1.1.1 创建了一个简单的页面。我的整个页面都在防火墙后面。

登录后，菜单显示良好，但窗口位置栏中的 URL 是 localhost/mobile/web/app_dev.php/loginCheck（这是 Symfony 的 login_check URL）。当我使用我的一个菜单按钮导航到另一个页面时，一切正常，但是当我按下新页面标题中的后退按钮时，它会尝试返回 loginCheck 页面，这当然会失败，因为 loginCheck是无效路由。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:09:52.470

正如我在评论中提到的，如果我将表单指定为

```
<form method="post" action="{{ path('login_check') }}" data-ajax="false"> 
```

一切都按预期工作。然而，我认为这应该被视为一种解决方法。

# vb.net - Datagridview.DataPropertyName = System.Data.DataColumn.?

> ID：12516904
> 
> 赞同：0
> 
> 时间：2012-09-20T16:28:32.837
> 
> 标签：vb.net, datagridview, datacolumn, system.data

我有一个列列表

```
Dim ListCol As List(Of System.Data.DataColumn)
            For Each Col As System.Data.DataColumn In Grid.Columns
                ListCol.Add(Col)
            Next 
```

我需要列的用户友好名称，而不是列的实际名称，而是显示给用户的名称。

```
Dim rr As Report.ReportRow() = Settings.Report.Select("rField = '" & ListCol.Item(i).DataPropertyName & "' AND rIsDefault = true") 
```

除非它是 datagridview 对象，否则我无法访问 datapropertyname。我假设我需要将其转换为 datagridview，但我希望找到一种 System.data.Datacolumn 方法，该方法将返回与我要求 datagridview.DataPropertyName 相同的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:32:31.883

我想你实际上是在寻找[`System.Data.DataColumn.Caption`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.caption.aspx). 这使您可以为列设置一个用户友好的名称。

# gwt - 在 GWT 中调整 TextInputCellCustom 的大小

> ID：12516905
> 
> 赞同：0
> 
> 时间：2012-09-20T16:28:34.227
> 
> 标签：gwt, gwt2

我有一个包含数量输入单元格的表格。即使我已经设置了列宽，我也无法更改 TextInputCellCustom 的默认大小。

有没有办法调整 TextInputCellCustom 的大小？也许通过css，但我不知道如何。

我的代码是这样的：

```
private Column<PpmpItem, String> getQ1QuantityColumn() {
   if (q1QuantityColumn == null) {
      final TextInputCellCustom inputCell = new TextInputCellCustom();
      q1QuantityColumn = new Column<PpmpItem, String>(inputCell) {
         @Override
         public String getValue(PpmpItem object) {
            return Integer.toString(object.getQ1Qty());
         }
      };
      FieldUpdater<PpmpItem, String> fieldUpdater = new QuantityFieldUpdater(1);
      q1QuantityColumn.setFieldUpdater(fieldUpdater);
   }
   return q1QuantityColumn;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T06:17:11.290

将此样式添加到您的表中：

```
.myTable td input {
    width:  100%;
} 
```

# arrays - 在未知长度的数组中查找 x 的位置

> ID：12516906
> 
> 赞同：-4
> 
> 时间：2012-09-20T16:28:38.220
> 
> 标签：arrays, algorithm, search, sorting, find

给定一个无限数组（未知数组长度），并且在这个无限数组中有 n 个整数元素。n（已排序元素的数量）是未知的。在 log n 时间内找到整数 i 在这个无限数组中的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T16:34:00.203

log n 表示一直将数组除以 2，直到找到它，就像在二进制搜索中一样……所以你需要知道 n 的值。

C#代码：

调用函数的代码：

```
int position = findInteger(array, 0, searchedValue); 
```

功能：

```
public int findInteger(int[] array, int position, int searchValue)
{
    if(array[position] = searchValue)
        return position;
    else if (array[position] > searchValue)
        position = position / 2;
    else // array[position] < searchValue
        position = (array.Count() + position)/2;
    findInteger(array, position, searchValue);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T17:22:46.490

从问题陈述来看，似乎存在一个长度不定的数组 A，其中至少存在 n 个条目并按排序顺序排列。我们将假设前 n 个条目是按升序排列的正整数，并且如果 j >= n 则访问 A[j] 返回 nil。一开始，n 是未知的。给定 i，问题是确定 j 使得 A[j] == i（或者如果不`j<n`存在，则返回 nil）。

1.  设置 k=0，L=1。
2.  如果是真的，请执行第 3 步。
3.  设置 k = L 和 L = 2*L。如果 A[L] 为 nil，则进入第 4 步。如果 A[L] > i，则进入第 5 步。否则继续（在第 2 步的 while 循环中）。
4.  现在`k < n < L`。在 A[k:L] 中进行二进制搜索以找到最后一个非零条目 A[n-1]；设置 L=n-1; 然后转到第 5 步。
5.  现在 A[L] >= i。在 A[k:L] 中进行二分搜索以找到 i。如果找到则返回其索引，否则返回 nil。

要看到所述方法是 O(ln n) 有界的，请注意它最多使用`2*lg(n)`步骤来找到 n（或 L 使得 A[L] > i），然后最多`lg(n)`使用步骤在 A[k 中找到 i :L]，其中 lg(n) = ln(n)/ln(2)。

如果假设当 j >= n 时访问 A[j] 不会返回 nil，而是返回一个“随机数”，那么这种方法就失效了；一方面，它可能会找到 A[j] == i 但 j > n; 另一方面，O(ln n) 时间界限可能不成立，或者仅在概率上成立；该算法需要重新表述以检测 A[L] 值序列的减少；如果 A 满足 A[n+1] > A[n] > A[n-1]，那么无论如何都无法确定 n。

# scala - Akka TypedActor 与为 Actor 类编写我自己的静态接口

> ID：12516910
> 
> 赞同：28
> 
> 时间：2012-09-20T16:29:03.213
> 
> 标签：scala, akka, actor, typedactor

我已经使用 Akka 和 Scala 大约一个月了，我对用消息替换显式接口感到有些困扰。考虑以下简单的 Akka Actor：

```
case class DoMyHomework()
class Parent extends Actor {
  def receive = {
    case d: DoMyHomework => // do nothing
  }
} 
```

向此参与者发送 DoMyHomework 消息的参与者或非参与者代码，如下所示：

```
ActorRef parent = ...
parent.ask(DoMyHomework) 
```

不知道结果会是什么。答案的类型是什么？我会得到答案吗？我可以例外吗？等等。

修复似乎是记录案例类......但是如果其他一些演员也收到相同的案例类怎么办。那么接收该消息的文档应该在actor本身中。

为了稍微清理一下，我想到了以下操作：

```
trait SomeoneSmarter {
  def wouldYouDoMyHomework: Future[Boolean] 
}
class Parent extends Actor with SomeoneSmarter {
  case class DoMyHomework()
  def wouldYouDoMyHomework = {
    (self ? DoMyHomework()).mapTo(Boolean)
  }
  def receive = {
    case d: DoMyHomework =>
      // TODO: If I'm busy schedule a false "No way" reply for a few seconds from now.
      // Just to keep their hopes up for a while. Otherwise, say sure right away.
  }
} 
```

所以，我和同事聊起这件事，其中一个反应是“你不忠于演员模型”。

首先，我非常感谢长期使用 Actors 的人们提供的一些指导。所有的消息都会变得笨拙吗？您最终是否将消息传递隐藏在接口后面？

我提议的演员仍然可以选择在他们之间发送消息，订阅事件流，所有你期望从 Akka 得到的东西。该界面为您提供了一种久经考验的方式来了解您在说什么。它有助于在 IDE 中进行编码等等。为什么演员的用户需要知道它是演员（除非它也是演员并且与演员紧密耦合）？

我得到的另一个反应是“看起来你想要一个 TypedActor”。但是在阅读了有关 TypedActor 的内容后，我并不相信。当然，TypedActor 为我省去了创建这些内部消息的麻烦。但是，至少从 [http://doc.akka.io/docs/akka/snapshot/scala/typed-actors.html](http://doc.akka.io/docs/akka/snapshot/scala/typed-actors.html)的代码示例中，我得到的印象是 TypedActor 仅作为一个块周围的代理工作您想要封装的代码，或使线程安全，或者根本不直接从当前线程调用。您编写的代码只是实现和接口。您不会弄乱参与者本身（代理） - 例如，如果您希望您的实现定期工作或订阅事件流，或做任何与接口无关的事情。

我还阅读了[http://letitcrash.com/post/19074284309/when-to-use-typedactors](http://letitcrash.com/post/19074284309/when-to-use-typedactors)并没有发现该示例更具启发性。我可能只是不了解 TypedActor（并不是说我声称已经真正了解 Actors）。

提前感谢您的帮助。

皮诺

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-30T21:10:39.740

## 演员封装

让我先回应一个我认为非常重要的观点。你说：

> 为什么演员的用户需要知道它是演员（除非它也是演员并且与演员紧密耦合）？

Actors 是与传统 OO 完全不同的编程范式，主要区别在于一切都是异步的，因此永远不会有真正的“返回值”。这意味着隐藏它是演员的事实通常是一个坏主意，例外情况请参阅[我的 TypedActors 博客文章](http://letitcrash.com/post/19074284309/when-to-use-typedactors)。Actor 最好的一点是它们被完全封装在 Akka 后面，`ActorRef`而不是 OO 语言的弱封装。为了充分利用它，请`ActorRef`尽可能公开 s，这使客户端代码有机会以最合适的方式使用它们（可能正在使用`tell`或`ask`取决于上下文）。

## 构建您的消息

当编写一个actor时，你应该把关于这个actor的所有东西都放在一个地方，包括接口契约描述。它可能看起来像这样：

```
object Parent {
  /**
   * Send this message to make your parent do your homework … yeah, right ;-)
   */
  case object DoHomework
}

/**
 * This actor will do your homework if asked to.
 * 
 * ==Actor Contract==
 * 
 * ===Inbound Messages===
 *  - '''DoHomework''' will ask to do the homework
 * 
 * ===Outbound Messages===
 *  - '''HomeworkResult''' is sent as reply to the '''DoHomework''' request
 * 
 * ===Failure Modes===
 *  - '''BusinessTripException''' if the parent was not home
 *  - '''GrumpyException''' if the parent thinks you should do your own homework
 */
class Parent extends Actor {
  …
} 
```

## 与 TypedActor 的区别

使用普通的无类型 Actor 可以让您充分利用 Actor 模型的功能，包括动态改变行为，并且不会试图将自己限制在“同步”调用的超时保护笼子中（简而言之，TypedActor 在以下情况下最有用）使用幕后的演员实现传统的同步接口）。我同意 IDE 对消息类型的支持会很好，但这是一个工具问题（我一直在与 ScalaIDE 团队讨论添加一些魔法，但这必须等到它能够获得优先权）。将有关参与者的所有属性定义在一个地方是重要的部分。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T13:01:53.333

免责声明：我不是 Akka/Actors 专家。我已经使用 Actors 和 Akka 大约 18 个月了，但我仍在尝试围绕某些概念进行思考，尤其是在不使用 Akka 时。

对于您想知道 Akka 未来的返回类型的特定且狭窄的情况，是的，您应该使用 TypedActor。有几次我使用 TypedActors，它们被用来为不属于 Actor 系统的模块提供 API。也就是说，我在 Akka 之上构建了一个系统，该系统在 Akka 网络内完成了大部分工作，但在 Akka 网络之外有一个或两个模块需要访问 Akka 网络提供的功能。最值得注意的是一个调用 Akka 网络的 Scalatra 前端，并在响应其客户端之前对 Akka 网络返回的值进行了一些处理。然而，TypedActor 实际上只是 Akka 网络的前端。我将 TypedActor 用作外部（Akka 网络外部）模块的 API 前端，作为另一种关注点分离。

一般来说，我同意那些告诉你“你不忠于演员模型”试图强制查看其返回类型的观点。在其最纯粹的形式中，也是我取得最大成功的方式，Actor 模型是使用 fire and forget 语义实现的。这些消息不会变得笨拙，并且在许多情况下它们有助于组织我的代码并定义工作边界。将它们放在自己的包装中确实有帮助。

如果我要实现您描述的功能，它将如下所示：

```
trait SomeoneSmarter {

  def wouldYouDoMyHomework : Boolean 

}

class Response()
case class NoWay() extends Response
case class Sure() extends Response

class ActorNetworkFrontEnd extends Actor {

  def receive = {
    case d: DoMyHomework =>
      busy match {
        case true => sender ! NoWay()
        case false => sender ! Sure()
      }
  }
}

case class SomeoneSmarter(actorNetworkFrontEnd:ActorRef) extends SomeoneSmarter {

  def wouldYouDoMyHomework : Boolean = {
    val future = actorNetworkFrontEnd ? DoMyHomework()
    val response = Await.result(future, timeout.duration).asInstanceOf[Response]
    response match {
      case NoWay() => false
      case Sure() => true
    }
  }

} 
```

请记住我写 willYouDoMyHomework 的方式，它会在等待答案时阻塞。但是，有一些聪明的方法可以异步执行此操作。有关更多信息，请参阅[http://doc.akka.io/docs/akka/2.0.3/scala/futures.html](http://doc.akka.io/docs/akka/2.0.3/scala/futures.html)。

另外，请记住，一旦您的消息进入 Akka 网络，您就可以进行所有很酷的缩放和远程处理，而您的 TypedActor API 的用户永远不必知道。

这样做确实会在大型项目中增加一些复杂性，但如果您认为它是分离为外部模块提供 API 的责任，甚至可能将该责任转移到另一个包中，那么它很容易管理。

好问题。我迫不及待地想听到更有经验的 Akka 开发人员的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:57:46.173

计算的 Actor 模型与面向对象的编程有很大的相似之处。OO 是关于控制的间接转移。当您调用方法（发送消息）时，您将失去对消息的控制。当然，静态编程语言在所有类型检查方面都对您有所帮助，但除此之外，您不知道消息会发生什么。地狱，也许该方法永远不会返回，尽管返回类型清楚地表明它会（抛出异常，活锁，你的名字......）！同意，当您使用 Java 甚至更好的 Scala 时，放弃静态类型是很糟糕的，但这并不是说您没有得到任何好处。动态类型为您提供松散耦合。例如，不需要创建额外的接口来为您的测试引入一个模拟actor；`ActorRef`是您唯一需要的 API。

# ajax - jQuery 在第一个 ajax 函数调用完全完成后继续另一个 ajax 函数

> ID：12516912
> 
> 赞同：17
> 
> 时间：2012-09-20T16:29:17.313
> 
> 标签：ajax, jquery

我在 2 个不同的函数中有 2 个 ajax 调用。我想用 .click 来调用这两个函数。func1 将数据插入到数据库中，然后 func2 是检索数据所以我的问题是如何等到 func1 完全完成然后它只执行 func2。

我尝试了 .delay()，它有效，但我认为这是一个愚蠢的解决方案。

```
 $("#updateLocation").click(function(e){
      e.preventdefault;
        func1();
        func2();
      });
      return false;
    });

    function func1(){
      $.ajax({
        url:'',
      });
});

    function func2(){
      $.ajax({
        url:'',
      });
})； 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-20T16:32:05.183

三种方式：

在 func1 成功时调用 func2：

```
 function func1() {
       $.ajax({ ... }).done(func2);
    } 
```

当 funky 完成时，使用`Deferred`API 调用 func2：

```
 e.preventDefault();
    $.when(func1).then(func2); 
```

使 func1 同步（不推荐）：

```
 function func1() {
       $.ajax({url: '', async: false});
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T16:33:44.527

由于 Ajax 调用是异步的，因此应用程序在 ajax 调用完成之前不会“暂停”，而是立即开始下一次调用。

JQuery 提供了一个处理程序，当调用成功时调用它，如果在调用过程中发生错误，则另一种处理程序。

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  },
  error :function(jqXHR, textStatus, errorThrown)
  {
     alert("something went wrong");
  }
}); 
```

您将希望从成功处理程序中调用您的第二个 AJAX 函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T16:31:23.383

在 func1->ajax->succes 回调中移动 func2

```
$("#updateLocation").click(function(e) {
    e.preventdefault;
    func1();
    //func2();
});
return false;
});

function func1() {
    $.ajax({
        url: '',
        success: function() { /* other stuff */
            func2();
        }
    });
});

function func2() {
    $.ajax({
        url: '',
    });
})； 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T16:31:12.297

您可以将选项“async”设置为 false（对于第一个 ajax 调用）。

这意味着函数 2 将在函数 1 收到响应后被调用，即完成它的执行。

```
 function func1(){
      $.ajax({
        url:'',
        async: false
      });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-20T16:31:28.270

func1 成功调用 fun2

```
function func1(){
  $.ajax({
    url:'',

    success:function(){
         func2();
    }  
  }) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-14T15:01:03.653

您还可以将函数作为参数传递，如下所示：

```
var secondFunc = function (func) {

    //Do ajax req or smt
    func("answer", "params");

};
var firstFunc = function() {

    secondFunc(
        function (answerFromFunc2, paramsFromfunc2) {

            var a = answerFromFunc2;
            var b = paramsFromfunc2;

        }
    );

    //Do smt after the function request to the server is done
    var doSmt = "another func or variable";

};
firstFunc(); 
```

# oracle - 如何在运行时从用户那里获取输入

> ID：12516930
> 
> 赞同：13
> 
> 时间：2012-09-20T16:30:23.623
> 
> 标签：oracle, oracle10g, user-input

我想在 Oracle 10g PL/SQL 块中获取用户的运行时输入（即与用户的交互通信）。是否可以？

```
declare
x number;
begin
x=&x;
end 
```

此代码给出错误为

> & 不能在 oracle 10g 中使用

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-20T16:52:14.407

要读取用户输入并将其存储在变量中以供以后使用，您可以使用 SQL*Plus 命令`ACCEPT`。

```
Accept <your variable> <variable type if needed [number|char|date]> prompt 'message' 
```

例子

```
accept x number prompt 'Please enter something: ' 
```

然后您可以`x`在 PL/SQL 块中使用该变量，如下所示：

```
declare 
  a number;
begin
  a := &x;
end;
/ 
```

使用字符串示例：

```
accept x char prompt 'Please enter something: '

declare 
  a varchar2(10);
begin
  a := '&x';   -- for a substitution variable of char data type 
end;           -- to be treated as a character string it needs
/              -- to be enclosed with single quotation marks 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-19T14:04:05.813

你也可以试试这个，它会起作用的：

```
DECLARE
  a NUMBER;
  b NUMBER;
BEGIN
  a := &aa; --this will take input from user
  b := &bb;
  DBMS_OUTPUT.PUT_LINE('a = '|| a);
  DBMS_OUTPUT.PUT_LINE('b = '|| b);
END; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-30T14:56:37.860

```
 a number;
    b number;
    begin
    a:= :a;-- instead of "&" use ":" here 
    b:= :b;
    if a>b then
    dbms_output.put_line('Large number is '||a);
    else
    dbms_output.put_line('Large number is '||b);
    end if;

end; 
```

实际上，当我尝试此操作时，它运行良好，实际上“&”给出了错误，因此您可以使用“：”。

希望你得到答案:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-23T08:59:11.187

那是因为您使用以下行来分配错误的值。

```
x=&x; 
```

在 PL/SQL 中，分配是使用以下方法完成的。

**`:=`**

所以你的代码应该是这样的。

```
 declare
    x number;
    begin
    x:=&x;
-- Below line will output the number you received as an input
    dbms_output.put_line(x);
    end;
    / 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-27T03:51:31.777

```
declare
a number;
b number;
begin
a:= :a;
b:= :b;
if a>b then
dbms_output.put_line('Large number is '||a);
else
dbms_output.put_line('Large number is '||b);
end if;
end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-23T06:25:15.733

```
`DECLARE
c_id customers.id%type := &c_id;
c_name customers.name%type;
c_add customers.address%type;
c_sal customers.salary%type;
a integer := &a` 
```

这里**c_id customers.id%type := &c_id;** 语句输入表中已定义类型的 c_id 并声明**整数：= &a**只需在变量 a 中输入整数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-04T06:11:38.927

```
SQL> DECLARE
  2     a integer;
  3     b integer;
  4  BEGIN
  5     a:=&a;
  6     b:=&b;
  7     dbms_output.put_line('The a value is : ' || a);
  8     dbms_output.put_line('The b value is : ' || b);
  9  END;
 10  / 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-30T11:35:07.507

您可以使用它来获取和打印提示值：

```
 set SERVEROUTPUT ON;

   /
     accept v_x number prompt 'Please enter something: '
    declare 
            v_x NUMBER;
    begin
            v_x := &v_x;
            dbms_output.put_line('the entered value was : '  ||  v_x); 
    end;

    / 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-02T01:37:42.977

如果您尝试在 livesql 中执行此操作，请阅读此内容。据我所知，这在 livesql 上是不可能的。我真的想不出一个用例，但无论如何，您可以在 livesql 中记录反馈，团队将查看请求。

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2015-09-26T04:32:07.747

试试这个

```
declare 
  a number;
begin
  a := :a;
dbms_output.put_line('Inputed Number is >> '|| a);
end;
/  

OR

declare 
  a number;
begin
  a := :x;
dbms_output.put_line('Inputed Number is >> '|| a);
end;
/ 
```

* * *

## 回答 #11

> 赞同：-7
> 
> 时间：2013-02-12T17:54:46.463

它非常简单

写吧：

//首先创建一个名为test的表......

```
create table test (name varchar2(10),age number(5)); 
```

//当您运行上面的代码时，将创建一个表......

//现在我们必须插入一个名字和一个年龄..

确保将通过打开一个寻求我们帮助在其中输入值的表单来插入年龄

```
insert into test values('Deepak', :age); 
```

//现在运行上面的代码，你会得到“插入1行”的输出...

/现在运行选择查询以查看输出

```
select * from test; 
```

//仅此而已..现在我认为没有人对接受用户数据有任何疑问...

# javascript - 如何在点击时更改按钮图像？

> ID：12516933
> 
> 赞同：0
> 
> 时间：2012-09-20T16:30:28.517
> 
> 标签：javascript, html, button, pressed

我正在使用图像和 href 来创建按钮。代码如下所示：

```
<a href="http://www.zive.sk"><img src="res/images/zive.png" alt="Zive.sk" id="ziveCircle"></a> 
```

如果用户按下按钮，有什么方法可以更改图像 src？也许某些事件处理程序将确定用户已按下图像？它应该充当普通按钮，因此当用户按下它并按住它时，它应该更改图像 src，当他释放按钮时，应该加载 href（正常按钮行为）。

**PS：**我不能为此使用css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:36:20.820

这会将按钮的图像更改为您的 StackOverflow gravatar 图标（相应地更改 URL）：

**HTML**：

```
<a id="zive-anchor" href="javascript:void(0);">
    <img id="zive-img" src="res/images/zive.png" alt="Zive.sk" id="ziveCircle">
</a>​ 
```

**Javascript**：

```
document.getElementById('zive-anchor').onclick=function () {
    document.getElementById('zive-img').src = 
    "http://www.gravatar.com/avatar/ca2a5b453d7e221f50929cbf6d688e59?s=32&d=identicon&r=PG";
};​ 
```

**JSF中**：

[http://jsfiddle.net/CsCSC/](http://jsfiddle.net/CsCSC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:10:06.283

我找到了一个解决方案，使用了一些 Hope I Helped 脚本。这是代码：

```
function buttons(){
document.getElementById('zive-anchor').onmousedown=function () {
    document.getElementById('ziveCircle').src = 
    "res/images/zivePressed.png";
};
document.getElementById('zive-anchor').onmouseout=function () {
    document.getElementById('ziveCircle').src = 
    "res/images/zive.png";
};
}; 
```

这是HTML：

```
<div data-role="page" id="homepage">
        <div id="selectCircle">
            <a href="feeds.html#page1" rel="external" id="zive-anchor"><img src="res/images/zive.png" alt="Zive.sk" id="ziveCircle"></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T04:12:41.680

```
function play()
{

var player= document.getElementById("audio");

if(player.paused)

player.play();

else
player.pause(); 

change();

}

function change()
{

var imag = document.getElementById("play")

if(imag.src.match('Play'))
imag.src="pause.jpg";

else
imag.src="Play.jpg";

} 
```

# grep - 我怎样才能递归地grep，但只能在具有某些扩展名的文件中？

> ID：12516937
> 
> 赞同：1223
> 
> 时间：2012-09-20T16:30:34.553
> 
> 标签：grep

我正在编写[`grep`](https://en.wikipedia.org/wiki/Grep)某些目录的脚本：

```
{ grep -r -i CP_Image ~/path1/;
grep -r -i CP_Image ~/path2/;
grep -r -i CP_Image ~/path3/;
grep -r -i CP_Image ~/path4/;
grep -r -i CP_Image ~/path5/; }
| mailx -s GREP email@domain.com 
```

如何将结果限制为仅扩展**`.h`**和**`.cpp`**？

* * *

## 回答 #1

> 赞同：1679
> 
> 时间：2012-09-20T16:35:49.843

只需使用`--include`参数，如下所示：

```
grep -inr --include \*.h --include \*.cpp CP_Image ~/path[12345] | mailx -s GREP email@domain.com 
```

那应该做你想做的事。

从下面[的 HoldOffHunger 答案](https://stackoverflow.com/questions/12516937/how-can-i-grep-recursively-but-only-in-files-with-certain-extensions/35280826#35280826)中获取解释：

*   `grep`： 命令

*   `-r`: 递归

*   `-i`: 忽略大小写

*   `-n`：每个输出行前面都有其在文件中的相对行号

*   `--include \*.cpp`: all *.cpp: C++ 文件（用 \ 转义，以防万一你有一个文件名中带有星号的目录）

*   `./`: 从当前目录开始。

* * *

## 回答 #2

> 赞同：383
> 
> 时间：2016-02-08T22:46:38.147

Some of these answers seemed too syntax-heavy, or they produced issues on my Debian Server. This worked perfectly for me:

```
grep -r --include=\*.txt 'searchterm' ./ 
```

...or case-insensitive version...

```
grep -r -i --include=\*.txt 'searchterm' ./ 
```

*   `grep`: command

*   `-r`: recursively

*   `-i`: ignore-case

*   `--include`: all *.txt: text files (escape with \ just in case you have a directory with asterisks in the filenames)

*   `'searchterm'`: What to search

*   `./`: Start at current directory.

Source: [PHP Revolution: How to Grep files in Linux, but only certain file extensions?](https://phprevolution.blogspot.com/2018/08/how-to-grep-files-in-linux-but-only.html)

* * *

## 回答 #3

> 赞同：82
> 
> 时间：2015-07-23T19:38:01.333

```
grep -rnw "some thing to grep" --include=*.{module,inc,php,js,css,html,htm} ./ 
```

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2012-09-20T16:33:57.310

采用：

```
find . -name '*.h' -o -name '*.cpp' -exec grep "CP_Image" {} \; -print 
```

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2015-12-11T15:14:33.987

There isn't any `-r` option on HP and Sun servers, but this way worked for me on my HP server:

```
find . -name "*.c" | xargs grep -i "my great text" 
```

`-i` is for case insensitive search of string.

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2016-08-17T09:24:51.033

Since this is a matter of *finding* files, let's use `find`!

Using GNU find you can use the `-regex` option to find those files in the tree of directories whose extension is either `.h` or `.cpp`:

```
find -type f -regex ".*\.\(h\|cpp\)"
#            ^^^^^^^^^^^^^^^^^^^^^^^ 
```

Then, it is just a matter of executing `grep` on each of its results:

```
find -type f -regex ".*\.\(h\|cpp\)" -exec grep "your pattern" {} + 
```

If you don't have this distribution of find you have to use an approach like [Amir Afghani's](https://stackoverflow.com/a/12516997/1983854), using `-o` to concatenate options (*the name is either ending with `.h` or with `.cpp`*):

```
find -type f \( -name '*.h' -o -name '*.cpp' \) -exec grep "your pattern" {} +
#            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

* * *

And if you really want to use `grep`, follow the syntax indicated to `--include`:

```
grep "your pattern" -r --include=*.{cpp,h}
#                      ^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2018-01-31T02:37:22.730

This answer is good:

```
grep -r -i --include \*.h --include \*.cpp CP_Image ~/path[12345] | mailx -s GREP email@domain.com 
```

But it can be updated to:

```
grep -r -i --include \*.{h,cpp} CP_Image ~/path[12345] | mailx -s GREP email@domain.com 
```

Which can be simpler.

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2017-02-05T17:30:47.077

The easiest way is:

```
find . -type  f -name '*.extension' 2>/dev/null | xargs grep -i string 
```

Add `2>/dev/null` to kill the error output.

To include more file extensions and grep for password throughout the system:

```
find / -type  f \( -name '*.conf' -o -name "*.log" -o -name "*.bak" \) 2>/dev/null |
xargs grep -i password 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-05-10T13:57:11.520

[`ag`](https://geoff.greer.fm/ag/) (the silver searcher) has pretty simple syntax for this

```
 -G --file-search-regex PATTERN
          Only search files whose names match PATTERN. 
```

so

```
ag -G *.h -G *.cpp CP_Image <path> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-11-10T02:09:07.317

你应该为每个“-o -name”写“-exec grep”：

```
find . -name '*.h' -exec grep -Hn "CP_Image" {} \; -o -name '*.cpp' -exec grep -Hn "CP_Image" {} \; 
```

或按 ( ) 分组

```
find . \( -name '*.h' -o -name '*.cpp' \) -exec grep -Hn "CP_Image" {} \; 
```

选项“-Hn”显示文件名和行。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-03-13T11:17:57.860

Here is a method I normally use to find **.c** and **.h** files:

```
tree -if | grep \\.[ch]\\b | xargs -n 1 grep -H "#include" 
```

Or if you need the line number as well:

```
tree -if | grep \\.[ch]\\b | xargs -n 1 grep -nH "#include" 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-10-09T20:44:09.433

If you want to filter out extensions from the output of another command e.g. "git":

```
files=$(git diff --name-only --diff-filter=d origin/master... | grep -E '\.cpp$|\.h$')

for file in $files; do
    echo "$file"
done 
```

# ruby-on-rails - 生产中的工作进程，queue_classic

> ID：12516942
> 
> 赞同：2
> 
> 时间：2012-09-20T16:30:59.473
> 
> 标签：ruby-on-rails, background-process

我在我的 Rails 应用程序中使用 queue_classic gem（https://github.com/ryandotsmith/queue_classic，http://railscasts.com/episodes/344-queue-classic [）](http://railscasts.com/episodes/344-queue-classic)运行工作进程的最佳方式是什么在生产环境中的我的 vps 上？分离屏幕会话是个好主意吗？如果重启，我应该在重启时添加 cron 条目吗？也许有更简单的方法可以做到这一点？

谢谢你的任何想法。

# c++ - 将字符读入数组

> ID：12516946
> 
> 赞同：2
> 
> 时间：2012-09-20T16:31:18.217
> 
> 标签：c++, arrays, ifstream

首先，我只是一个初学者，这是我的第一`C++`堂课

说，如果我有一个名为 的数组`result[500]`，我已经有一个名为 的输入流`ifstream`，我如何将所有内容（基本上它们都是数字和运算符以及两者之间的空格，但我们只想要数字和运算符）存储到数组中。

例如文件是：

```
 3   4   2   1  -  5 
```

会来到

```
result[]= {3,4,2,1,-,5} 
```

有人可以帮我解决这个问题吗？

提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T16:33:52.387

看`std::fstream`：

1.  阅读：

    ```
    std::ifstream ifs("data.txt");
    for (int i = 0; i < N; ++i)
    {
        ifs >> array[i];
    } 
    ```

2.  存储：

    ```
    std::ofstream ofs("data.txt");
    for (int i = 0; i < N; ++i)
    {
        ofs << array[i] << " ";
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:34:03.333

您必须使用 for 循环来迭代所有元素并将它们一一转储到 cout 附加任何您希望的格式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:36:28.557

如果您`READ_FROM_STREAM`用流式阅读代码替换，那么应该或多或少地做到这一点。

```
int i = 0;
int x = 0;
while(x = atoi(READ_FROM_STREAM)) {
  array[i++] = x;
} 
```

您可能还应该检查那个`i<MAX_ARR_SIZE`或类似的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T16:37:28.113

1.  阅读每一行
2.  分割空白分隔符上的每一行
3.  将元素存储在 stl 列表中
4.  使用 std::sort 对元素进行排序

这些行中的每一行都是关键字，您可以在互联网上搜索并自己找到解决方案，这样您就可以学习 c++

祝你好运

# reporting-services - 报表提供程序表中不存在 RDP 字段

> ID：12516949
> 
> 赞同：2
> 
> 时间：2012-09-20T16:31:24.723
> 
> 标签：reporting-services, report, axapta, dynamics-ax-2012

我收到的错误是：

> 无法执行查询。报表提供程序表 SMADispatchSheetReportTmp 中不存在字段 SMADispatchSheetReportTmp.1.District。

District 字段位于 SMADispatchSheetReportTmp 表中。我需要采取哪些步骤来查找此错误的根源或进行更正？

如果需要更多信息，请提出问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T21:30:03.443

它是 1000 个 SRSS 错误之一，但最终没有出现在[Troubleshooting Report Definition Issues](http://technet.microsoft.com/en-us/library/gg731894.aspx)中。

使用谷歌的魔力似乎其他人也有[同样的问题](http://www.pedia.dk/viewtopic.php?f=20&t=25)。

去重启你的 SSRS 服务。

# php - 使用 TINYMCE 的 JUST BOIL ME 插件的路径错误 -- php

> ID：12516952
> 
> 赞同：1
> 
> 时间：2012-09-20T16:31:33.107
> 
> 标签：php, jquery

希望你能帮我解决我的问题。我使用**JUSTBOILME**作为**TINYMCE**文本编辑器的图像上传器。我将它合并到 PHP 中。我的问题是，当我尝试使用just煮我插件将图像上传到tinymce的文本编辑器时出现错误。我遇到错误......“**上传路径似乎无效**。” 我已将 is_allowed 设置为 true。我正在使用本地主机。为此使用 localhost 有什么问题吗？提前谢谢你..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:12:53.503

这实际上取决于您的网站是否在子文件夹中。如果您进一步向下查看 config.php 页面，您将看到一个`$_SERVER['DOCUMENT_ROOT']`作业。我在我的索引页面上回应了这一点，这导致我需要在行中包含我的子文件夹`$config['img_path'] = '/subFolderName/images/uploads';`确保你没有尾部斜杠

# c++ - 在 Python 中公开 C++ 单例

> ID：12516954
> 
> 赞同：1
> 
> 时间：2012-09-20T16:31:36.243
> 
> 标签：c++, python, boost-python

我正在尝试用 boost::python 包装一个 C++ 单例：

```
class EigenSolver {
    private:
        static EigenSolver* _self;
        static int _refCount;
    protected:
        EigenSolver();
        ~EigenSolver();

    private:
        EigenSolverOptions _options;
        BasicTypes::Array<double> eigenValues;
        BasicTypes::RegularArray <double> eigenVectors;

    public:
        // singleton initialization, returns unique instance
        static EigenSolver* Instance() {
            if (!_self) _self = new EigenSolver();
            return _self;
        }
        // singleton memory free
        void FreeInst() {
            _refCount--;
            if (!_refCount) {
                delete this;
                _self = NULL;
            }
        }
}; 
```

包装代码：

```
py::class_<EigenSolver, boost::shared_ptr<EigenSolver>, boost::noncopyable>
    ("EigenSolver", py::no_init)
    .def("Instance", &EigenSolver::Instance, py::return_internal_reference<>()) 
```

当我尝试编译库时，出现未解决的外部符号错误：

```
error LNK2001: unresolved external symbol 
"private: static class UTILS::EigenSolver * UTILS::EigenSolver::_self" 
(?_self@EigenSolver@UTILS@@0PEAV12@EA)
PythonBindingsSolverLib.lib
What is the right way to wrap a C++ singleton class? 
```

使用 boost::python 包装 C++ 单例类的正确方法是什么？

在此先感谢，伊万。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:52:27.590

[使用C++ Singleton 设计模式](https://stackoverflow.com/questions/1008019/c-singleton-design-pattern)问题中提供的实现解决了该问题：

```
py::class_<EigenSolver, boost::shared_ptr<EigenSolver>, boost::noncopyable>
    ("EigenSolver", py::no_init)
    .add_property("instance", py::make_function(&EigenSolver::Instance, 
    py::return_value_policy<py::reference_existing_object>()))
; 
```

# syntax - 如何在 coco 中返回数组？

> ID：12516959
> 
> 赞同：0
> 
> 时间：2012-09-20T16:31:51.650
> 
> 标签：syntax, coco

以下函数在[coco](http://satyr.github.com/coco/)中返回一个对象：

```
->
  a: "1"
  b: "2" 
```

下一个将导致多个语句并返回最后一个的结果（如预期的那样）：

```
->
  "a"
  "b" 
```

如何在不使用括号的情况下返回数组？我正在尝试这个：

```
->
  * "a"
  * "b" 
```

但是现在它也再次编译成多个语句。

coco现在可以了吗？

@matyr：或者有可能吗？

*更新*：我目前正在使用以下语法，但它不是那么干净：

```
-> []=
  "a"
  "b" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:17:05.300

无论如何，有人提出这个问题，这是完全有效的：

```
->
 * a
   b 
```

# java - 基于另一个类创建一个类的实例

> ID：12516962
> 
> 赞同：4
> 
> 时间：2012-09-20T16:32:06.067
> 
> 标签：java, class, inheritance, instance

在Java中，我有类`X`和接口`Y`，然后是一组类`A1`..然后扩展`X`和实现`Y`。然后我为每个类`A1..An` （即`A1'..An'`）制作一个包装器/适配器。

现在，在客户端类中，我收到了接口( )`C`的实例列表。`Y``ArrayList < Y >`

在这个地方，对于列表中的每个实例，我想根据列表中的实例创建一个类的新实例`Ax'`（来自`A1'..An'`）`Y`。用于`A1`制作`A1'`等。

`if`我的疑问是，如果没有……`else if`和（实例）构造，我怎么能做到这一点。我可以在这里以某种方式使用继承吗？

我正在检查一些设计模式，但我找不到如何根据哪个实例是另一个类来创建类的解决方案。

任何帮助和建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:36:42.667

```
for(Y y : ArrayList < Y >)  
{  
   y.getClass().newInstance();  
} 
```

如果我正确理解了你的问题......

**编辑**

```
abstract class X implements Y 
{
    Y getInstance();
}

class A1 extends X
{
    void someMethod()
    {
        getInstance(); // return instance of A1_
    }
}

class A1_ extends A1
{
    Y getInstance()
    {
        return new A1_();
    }
} 
```

**编辑2**

如果你想在孩子中获取父母的实例，你可以这样做

```
this.getClass().getSuperclass().newInstance(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T17:08:21.383

首先，您需要一种将适配器 (A' [1] .. A' [n] ) 与具体实例 (A [1] .. A [n] ) 相关联的方法。最好使用`Map<Class<?>, Constructor<?>>`. 一个好方法是围绕它编写一个注册表：

```
public class AdapterRegistry {
    private static final Map<Class<?>, Constructor<?>> adapterMap =
            new HashMap<Class<?>, Constructor<?>>();

    public static void register(Class<?> interfaceClass, Class<?> concreteClass, Class<?> adapterClass) 
            throws NoSuchMethodException {
        // Check for the constructor
        Constructor<?> constructor = adapterClass.getConstructor(interfaceClass);
        adapterMap.put(concreteClass, constructor);
    }

    public static <T, V extends T> T wrap(V v) {
        Class<?> concreteClass = v.getClass();
        try {
            Constructor<?> constructor = adapterMap.get(concreteClass);
            if (constructor != null) {
                return (T) constructor.newInstance(v);
            }
        } catch (Exception ex) {
            // TODO Log me
        }
        return null;
    }
} 
```

然后只需创建适配器即可：

```
public class Adapter implements Y {
    private Y innerY;

    public Adapter(Y innerY) {
        this.innerY = innerY;
    }

    // Implement Y
} 
```

并注册您的适配器：

```
AdapterRegistry.register(Y.class, A1.class, Adapter1.class);
AdapterRegistry.register(Y.class, A2.class, Adapter1.class);
AdapterRegistry.register(Y.class, A3.class, Adapter2.class);
// ...
AdapterRegistry.register(An.class, AdapterM.class); 
```

请注意，如果您愿意，可以像这样为同一个类注册多个适配器。这样，如果以相同方式处理具体类的子集，您只需为所有这些类注册相同的适配器。

接下来，获取包装器：

```
for (Y y : yList) {
    Y adapter = AdapterRegistry.wrap(y);
    // Do something with the adapter
} 
```

这有一定的限制：

*   您必须在每个适配器中都有一个构造函数，该构造函数*通过其接口*获取具体对象。
*   接口必须具有您要更改的方法（如果您将`Y`其用作 的类型`innerY`，则可以更改它以便可以访问非接口方法，但是您必须进行强制转换）。

`AdapterRegistry`由于使用了泛型，因此您也可以在程序的其他部分使用您的。

让我知道代码是否有任何问题，而您无法弄清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:42:40.013

```
for(Y y : ArrayList < Y >)  
{  
  Class<?> clazz = Class.forName(y.getClass().getName()+"Adapter");
  YAdapter ya = (YAdapter)clazz.newInstance();
} 
```

混合两个答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T16:45:25.843

创建`HashMap<Class<Y>, Class<?>>`. 对于每个 An 和 A'n，创建关系：`map.put(An.class, A'n.class)`。

然后，对于`obj`ArrayList 中的每个，获取 A' class: `Class aa=map.get(obj.getClass())`。然后创建类 aa 的实例，或者使用`aa.newInstance()`（然后`obj`通过 setter 传递），或者使用使用反射的构造函数（并`obj`作为参数传递）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T16:38:14.643

您可以使用`Class.forName()`方法来创建包装器。A1..AN 类和包装器类名之间的映射可以硬编码存储在属性或 XML 文件中，或者如果您想使用放置在 A1...AN 类上的注释。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-26T14:17:37.977

在这种情况下避免 if/else-chains 的一个标准解决方案是让类实现一些接口，该接口包含一个方法，该方法使对象知道自己要做什么 - 即按照您的建议使用继承。

具体类知道它们自己的具体类型、如何复制自己等，但您在循环中不知道这些 - 因此将创建新具体类的责任转移到具体类本身是有意义的。

我要做的是向`Y`创建新实例的接口添加一个新方法。例如，如果您只想获取列表中实例的副本，则可以将“复制”工厂方法添加到`Y`：

```
public interface Y {
    ...
    public Y copy();
    ...
} 
```

的每个实现都`Y`必须实现复制方法。它知道如何复制自己。例子：

```
public class MyClass implements Y {
    ...
    public MyClass copy() {
        return new MyClass(...);
    }
    ...
} 
```

因此，在遍历列表时创建新实例就变成了这样：

```
List<Y> ys = ...get list from somewhere...;
for (Y y : ys) {
    Y copy = y.copy();
    ...
} 
```

请注意，这种方法不需要反射或其他技巧。

还要注意，循环不必知道任何关于具体类的信息——它只需要知道接口`Y`。特定于具体类的所有代码都保存在具体类本身中。这使得使用它们的代码更简单（避免了 instanceof + if/else 链）。

除了复制方法，您当然还可以创建更高级的方法，也许可以使用一些参数。如果对象不仅必须复制自己，而且必须根据某些输入以某种特殊方式创建自己的新实例，这可能会很有用。

（注意：这种复制方法可能会让你想起“克隆”，但由于 Java 中的克隆很糟糕，这通常是一种更好的方法）

注意：我假设`Ai'`wrappers 和`Ai`extends `Y`。

注意：如果您不能对 进行更改`Y`，但可以更改适配器类，则可以创建一个新接口`Y'`，该接口扩展`Y`并由适配器类实现，并使用 a`List<Y'>`代替`List<Y>`您在循环中迭代的接口。

# r - 更改强制转换中的默认分隔符

> ID：12516967
> 
> 赞同：5
> 
> 时间：2012-09-20T16:32:26.973
> 
> 标签：r, reshape, reshape2

当 cast (dcast) 分配新的列标题时，是否可以更改默认分隔符？

我正在将文件从长转换为宽，我得到以下标题：

```
value_1, value_2, value_3,... 
```

在重塑中，您可以像我希望的那样分配“sep”参数（sep=""）和列标题输出：

```
value1, value2, value3,... 
```

但是，对于超过 200,000 行的数据框，reshape 需要几分钟，而 dcast 需要几秒钟。dcast 还按我想要的顺序输出列，而 reshape 没有。有什么简单的方法可以使用 dcast 更改输出，还是我需要手动更改列标题？

例如：

```
example <- data.frame(id=rep(c(1,2,3,4),4),index=c(rep(1,4),rep(2,4),rep(1,4),rep(2,4)),variable=c(rep("resp",8),rep("conc",8)),value=rnorm(16,5,1))
dcast(example,id~variable+index) 
```

该示例给出了列标题：

```
conc_1, conc_2, resp_1, resp_2 
```

我希望列标题阅读：

```
conc1, conc2, resp1, resp2 
```

我试过了：

```
dcast(example,id~variable+index,sep="") 
```

dcast 似乎完全忽略了 sep ，因为给出一个符号也不会改变输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:17:19.413

您不能，因为该选项未合并到`dcast`. 但是在运行后执行此操作相当简单`dcast`。

```
casted_data <- dcast(example,id~variable+index)

library(stringr)
names(casted_data) <- str_replace(names(casted_data), "_", ".")

> casted_data
  id   conc.1   conc.2   resp.1   resp.2
1  1 5.554279 5.225686 5.684371 5.093170
2  2 4.826810 5.484334 5.270886 4.064688
3  3 5.650187 3.587773 3.881672 3.983080
4  4 4.327841 4.851891 5.628488 4.305907

# If you need to do this often, just wrap dcast in a function and 
# change the names before returning the result.

f <- function(df, ..., sep = ".") {
    res <- dcast(df, ...)
    names(res) <- str_replace(names(res), "_", sep)
    res
}

> f(example, id~variable+index, sep = "")
  id   conc1   conc2   resp1   resp2
1  1 5.554279 5.225686 5.684371 5.093170
2  2 4.826810 5.484334 5.270886 4.064688
3  3 5.650187 3.587773 3.881672 3.983080
4  4 4.327841 4.851891 5.628488 4.305907 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-08T00:53:41.640

data.table 包（开发版本 1.9.5）中的 dcast 现在具有“sep”参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-30T09:35:40.430

根据[dbetebenner 提供的信息](https://stackoverflow.com/a/31281824/1916449)和另一个[使用`data.table`改进`dcast`功能](https://stackoverflow.com/a/30517531/1916449)的示例，您的示例变为：

```
> library(data.table)
> dcast(setDT(example), id ~ variable + index, sep="")
   id    conc1    conc2    resp1    resp2
1:  1 5.113707 5.475527 5.938592 4.149636
2:  2 4.261278 6.138082 5.277773 5.907054
3:  3 4.350663 4.292398 6.277582 4.167552
4:  4 5.993198 6.601669 5.232375 5.037936 
```

`setDT()`通过引用转换列表和`data.frames`to 。`data.tables`

使用`data.table`v1.9.6 测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T17:22:30.267

一种选择：

```
example <- data.frame(example,by=paste(example$variable,example$index,sep=""))
dcast(example,id~by) 
```

# spring-mvc - Spring MVC获取包含点和斜杠的PathVariables

> ID：12516969
> 
> 赞同：3
> 
> 时间：2012-09-20T16:32:34.770
> 
> 标签：spring-mvc

我想匹配表单的 URL `http://host/10.39284/LKJF283/23332/dd`（其中路径始终以 10\. 开头，其余部分将是点、斜杠、字母和数字的混合）并将整个内容存储在 10\. 之后（包括 10.）到 PathVariable 中。

我在想我可以用这样的正则表达式来做到这一点：

```
@RequestMapping(value="/{key:10\.+}", method=RequestMethod.GET)
    public String summary(@PathVariable String key, Model model) {
} 
```

但这给了我一个错误，说“无效的转义序列”。知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:40:59.800

这就是我让它工作的方式。据我所知，Spring 无法处理 URL 中不打算用作路径分隔符的斜杠。因此，我改为使用此处找到的 url 重写过滤器：[http](http://www.tuckey.org/urlrewrite/) ://www.tukey.org/urlrewrite/ 。

我在我的 web.xml 中启用了它

```
<filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

然后将此添加到我的 WEB-INF/urlrewrite.xml

```
<urlrewrite>
    <rule>
       <from>^/(10\..*)$</from>
       <to>/keysummary?key=$1</to>
    </rule>
</urlrewrite> 
```

并像这样写了我的控制器

```
@RequestMapping(value="/keysummary", method=RequestMethod.GET)
public String DOISummary(@RequestParam("key") String key, Model model) {
} 
```

# eclipse - 为什么 maven 在 gae:deploy 期间寻找丢失的目录？

> ID：12516970
> 
> 赞同：1
> 
> 时间：2012-09-20T16:32:34.947
> 
> 标签：eclipse, google-app-engine, maven, gae-eclipse-plugin, maven-gae-plugin

**目标**

*   设置 maven 以将 google app engine 应用程序部署到登台服务器。

**问题**

*   Maven 正在为 appengine-java-sdk 寻找本地存储库中不存在的目录

**环境**

*   日蚀朱诺
*   平方米 1.2.0
*   嵌入式 Google App Engine Java SDK 1.7.2（但我使用的是 .m2 存储库中的 1.6.6）

**日志输出**

```
[INFO] Updating Google App Engine Server...
[DEBUG] execute AppCfg [--sdk_root=/home/jbanger/.m2/repository/com/google/appengine/appengine-java-sdk/1.6.6/appengine-java-sdk-1.6.6, --compile_encoding=UTF-8, --disable_prompt, update, /home/jbanger/work/projects/hgt/catalog/target/catalog-0.0.1-SNAPSHOT]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 8.909s
[INFO] Finished at: Thu Sep 20 12:20:15 EDT 2012
[INFO] Final Memory: 11M/165M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal net.kindleit:maven-gae-plugin:0.9.4:deploy (default-cli) on project catalog: Execution default-cli of goal net.kindleit:maven-gae-plugin:0.9.4:deploy failed: An API incompatibility was encountered while executing net.kindleit:maven-gae-plugin:0.9.4:deploy: java.lang.ExceptionInInitializerError: null
[ERROR] -----------------------------------------------------
[ERROR] realm =    plugin>net.kindleit:maven-gae-plugin:0.9.4
[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
[ERROR] urls[0] = file:/home/jbanger/.m2/repository/net/kindleit/maven-gae-plugin/0.9.4/maven-gae-plugin-0.9.4.jar
[ERROR] urls[1] = file:/home/jbanger/.m2/repository/net/kindleit/gae-runtime/1.7.1/gae-runtime-1.7.1.pom
[ERROR] urls[2] = file:/home/jbanger/.m2/repository/com/google/appengine/appengine-api-1.0-sdk/1.7.1/appengine-api-1.0-sdk-1.7.1.jar
[ERROR] urls[3] = file:/home/jbanger/.m2/repository/org/apache/geronimo/specs/geronimo-jta_1.1_spec/1.1.1/geronimo-jta_1.1_spec-1.1.1.jar
[ERROR] urls[4] = file:/home/jbanger/.m2/repository/org/apache/geronimo/specs/geronimo-jpa_3.0_spec/1.1.1/geronimo-jpa_3.0_spec-1.1.1.jar
[ERROR] urls[5] = file:/home/jbanger/.m2/repository/javax/jdo/jdo2-api/2.3-eb/jdo2-api-2.3-eb.jar
[ERROR] urls[6] = file:/home/jbanger/.m2/repository/javax/transaction/transaction-api/1.1/transaction-api-1.1.jar
[ERROR] urls[7] = file:/home/jbanger/.m2/repository/org/datanucleus/datanucleus-core/1.1.5/datanucleus-core-1.1.5.jar
[ERROR] urls[8] = file:/home/jbanger/.m2/repository/com/google/appengine/orm/datanucleus-appengine/1.0.10/datanucleus-appengine-1.0.10.jar
[ERROR] urls[9] = file:/home/jbanger/.m2/repository/org/datanucleus/datanucleus-jpa/1.1.5/datanucleus-jpa-1.1.5.jar
[ERROR] urls[10] = file:/home/jbanger/.m2/repository/com/google/appengine/appengine-tools-sdk/1.7.1/appengine-tools-sdk-1.7.1.jar
[ERROR] urls[11] = file:/home/jbanger/.m2/repository/org/codehaus/plexus/plexus-archiver/2.2/plexus-archiver-2.2.jar
[ERROR] urls[12] = file:/home/jbanger/.m2/repository/org/codehaus/plexus/plexus-io/2.0.4/plexus-io-2.0.4.jar
[ERROR] urls[13] = file:/home/jbanger/.m2/repository/org/codehaus/plexus/plexus-utils/3.0.7/plexus-utils-3.0.7.jar
[ERROR] urls[14] = file:/home/jbanger/.m2/repository/javax/transaction/jta/1.1/jta-1.1.jar
[ERROR] urls[15] = file:/home/jbanger/.m2/repository/org/apache/ant/ant/1.7.1/ant-1.7.1.jar
[ERROR] urls[16] = file:/home/jbanger/.m2/repository/org/apache/ant/ant-launcher/1.7.1/ant-launcher-1.7.1.jar
[ERROR] urls[17] = file:/home/jbanger/.m2/repository/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.jar
[ERROR] urls[18] = file:/home/jbanger/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.11/plexus-interpolation-1.11.jar
[ERROR] urls[19] = file:/home/jbanger/.m2/repository/junit/junit/3.8.1/junit-3.8.1.jar
[ERROR] Number of foreign imports: 1
[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]
[ERROR] 
[ERROR] -----------------------------------------------------: Unable to find /home/jbanger/.m2/repository/com/google/appengine/appengine-java-sdk/1.6.6/appengine-java-sdk-1.6.6/lib/opt/tools/appengine-local-endpoints/v1
[ERROR] -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal net.kindleit:maven-gae-plugin:0.9.4:deploy (default-cli) on project catalog: Execution default-cli of goal net.kindleit:maven-gae-plugin:0.9.4:deploy failed: An API incompatibility was encountered while executing net.kindleit:maven-gae-plugin:0.9.4:deploy: java.lang.ExceptionInInitializerError: null
-----------------------------------------------------
realm =    plugin>net.kindleit:maven-gae-plugin:0.9.4
strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
urls[0] = file:/home/jbanger/.m2/repository/net/kindleit/maven-gae-plugin/0.9.4/maven-gae-plugin-0.9.4.jar
urls[1] = file:/home/jbanger/.m2/repository/net/kindleit/gae-runtime/1.7.1/gae-runtime-1.7.1.pom
urls[2] = file:/home/jbanger/.m2/repository/com/google/appengine/appengine-api-1.0-sdk/1.7.1/appengine-api-1.0-sdk-1.7.1.jar
urls[3] = file:/home/jbanger/.m2/repository/org/apache/geronimo/specs/geronimo-jta_1.1_spec/1.1.1/geronimo-jta_1.1_spec-1.1.1.jar
urls[4] = file:/home/jbanger/.m2/repository/org/apache/geronimo/specs/geronimo-jpa_3.0_spec/1.1.1/geronimo-jpa_3.0_spec-1.1.1.jar
urls[5] = file:/home/jbanger/.m2/repository/javax/jdo/jdo2-api/2.3-eb/jdo2-api-2.3-eb.jar
urls[6] = file:/home/jbanger/.m2/repository/javax/transaction/transaction-api/1.1/transaction-api-1.1.jar
urls[7] = file:/home/jbanger/.m2/repository/org/datanucleus/datanucleus-core/1.1.5/datanucleus-core-1.1.5.jar
urls[8] = file:/home/jbanger/.m2/repository/com/google/appengine/orm/datanucleus-appengine/1.0.10/datanucleus-appengine-1.0.10.jar
urls[9] = file:/home/jbanger/.m2/repository/org/datanucleus/datanucleus-jpa/1.1.5/datanucleus-jpa-1.1.5.jar
urls[10] = file:/home/jbanger/.m2/repository/com/google/appengine/appengine-tools-sdk/1.7.1/appengine-tools-sdk-1.7.1.jar
urls[11] = file:/home/jbanger/.m2/repository/org/codehaus/plexus/plexus-archiver/2.2/plexus-archiver-2.2.jar
urls[12] = file:/home/jbanger/.m2/repository/org/codehaus/plexus/plexus-io/2.0.4/plexus-io-2.0.4.jar
urls[13] = file:/home/jbanger/.m2/repository/org/codehaus/plexus/plexus-utils/3.0.7/plexus-utils-3.0.7.jar
urls[14] = file:/home/jbanger/.m2/repository/javax/transaction/jta/1.1/jta-1.1.jar
urls[15] = file:/home/jbanger/.m2/repository/org/apache/ant/ant/1.7.1/ant-1.7.1.jar
urls[16] = file:/home/jbanger/.m2/repository/org/apache/ant/ant-launcher/1.7.1/ant-launcher-1.7.1.jar
urls[17] = file:/home/jbanger/.m2/repository/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.jar
urls[18] = file:/home/jbanger/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.11/plexus-interpolation-1.11.jar
urls[19] = file:/home/jbanger/.m2/repository/junit/junit/3.8.1/junit-3.8.1.jar
Number of foreign imports: 1
import: Entry[import  from realm ClassRealm[maven.api, parent: null]]

-----------------------------------------------------

    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:225)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-cli of goal net.kindleit:maven-gae-plugin:0.9.4:deploy failed: An API incompatibility was encountered while executing net.kindleit:maven-gae-plugin:0.9.4:deploy: java.lang.ExceptionInInitializerError: null 
```

**更多日志数据**

```
-----------------------------------------------------

    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)
    ... 20 more
Caused by: java.lang.ExceptionInInitializerError
    at com.google.appengine.tools.util.Logging.initializeLogging(Logging.java:35)
    at com.google.appengine.tools.admin.AppCfg.main(AppCfg.java:86)
    at net.kindleit.gae.EngineGoalBase.runAppCfg(EngineGoalBase.java:242)
    at net.kindleit.gae.UpdateGoal.execute(UpdateGoal.java:39)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    ... 20 more
Caused by: java.lang.IllegalArgumentException: Unable to find /home/jbanger/.m2/repository/com/google/appengine/appengine-java-sdk/1.6.6/appengine-java-sdk-1.6.6/lib/opt/tools/appengine-local-endpoints/v1
    at com.google.appengine.tools.info.SdkInfo._getLibs(SdkInfo.java:76)
    at com.google.appengine.tools.info.SdkInfo.getLibsRecursive(SdkInfo.java:69)
    at com.google.appengine.tools.info.SdkImplInfo.<clinit>(SdkImplInfo.java:44)
    ... 25 more
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException 
```

**我尝试过的事情/更多信息**

*   本来appengine java sdk是1.6.5的，所以我搬到了1.6.6，问题还是一样。
*   lib/opt/tools 在 sdk 主页中，但 appengine-local-endpoints 不存在（请参阅 /home/jbanger/.m2/repository/com/google/appengine/appengine-java-sdk/1.6.6/appengine- java-sdk-1.6.6/lib/opt/tools/appengine-local-endpoints/v1)
*   当我使用 Eclipse 使用 gae-archetype-jsp 创建新的 maven 项目时，我看到 eclipse 在 .m2 存储库中创建了 sdk 目录（可能是通过 maven）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:52:45.657

我找到了解决办法。我将 maven-gae-plugin 版本回滚到 0.9.2。

# c - OpenGL GLDeleteTextures() 无法删除第一个纹理

> ID：12516975
> 
> 赞同：2
> 
> 时间：2012-09-20T16:32:44.433
> 
> 标签：c, opengl

我在代码 (C) 的开头设置了许多纹理。每个纹理都正确生成（没有错误），我将纹理名称作为 GLuint 存储在图像结构中以供以后使用。在程序结束时，GLuint 被传递回 GLdeleteTextures() 并且程序退出。

问题是我在第一次尝试使用 GLDeleteTextures() 时不断收到错误消息。对 GLDeleteTextures() 的所有后续调用都不会产生错误。

错误（来自 gluErrorString）状态为“无效枚举”。

额外信息。通过调用 glBindTexture(GL_TEXTURE_2D, NULL) 在删除之前所有纹理都未绑定。所有纹理名称 (GLuint) 在创建时都经过验证，它们与删除时使用的名称相同。删除时纹理的顺序无关紧要，这是第一次调用删除的问题。

当前的解决方法。我发现在第一个纹理上重复 glDeleteTextures() 有效，例如...

```
glDeleteTextures(1,&MyImage->texName);   // Will produce 'invalid enumerant'

glDeleteTextures(1,&MyImage->texName);   // This time it will work! 
```

我通过在第二次删除后生成新纹理并比较纹理名称来仔细检查上面的代码。在第二次调用后纹理确实被删除并正确放回系统。

我有红皮书，它对纹理删除有点模糊。是否有一组必须执行的明确步骤才能正确删除纹理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:38:35.870

错误不`glDeleteTextures()`在于来自`glEnable(GL_ALPHA)`。

# android - 从 URL 解析 JSON 数组

> ID：12516978
> 
> 赞同：0
> 
> 时间：2012-09-20T16:32:58.560
> 
> 标签：android, json, parsing

我有这个 JSON 数组：

```
[{"id":"101","title":"Oferta 1"},{"id":"102","title":"Oferta 2"},{"id":"103","title":"Oferta del Mes"},{"id":"104","title":"Promoci\u00f3n Facebook"}] 
```

我需要解析这个 JSON，但是当我解析它时，我只接收

```
{"id":"101","title":"Oferta 1"} 
```

这是我的代码：

```
try {
    JSONObject json = JSONfunctions.getJSONfromURL("URLOFJSON");
    Log.i("log_tag", json.toString()); 
    String jsonvalues =  json.getString("id");

    Log.i("log_tag", jsonvalues);  
}
catch (Exception ex)
{
    Log.e("log_tag", "Error getJSONfromURL "+ex.toString());           
} 
```

我该如何解决这个问题？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:54:25.997

问题是你正在获取一个 jsonObject，获取一个 json 数组并从中检索 json 对象虚拟代码

```
JSonArray ja;
int resultCount = ja.length();
for (int i = 0; i < resultCount; i++)
{
    JSONObject resultObject = ja.getJSONObject(i);
    String id = resultObject.getString("id");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:07:02.477

要从 json 数据中获取数据，请使用以下代码行。

```
String my_info = investors.getProfileAbout(user_id).toString();
            LinearLayout about =(LinearLayout) findViewById(R.id.prof_about);
            about.setVisibility(View.VISIBLE);
            try {
                JSONArray array = new JSONArray(my_info);
                for (int i = 0; i < array.length(); i++) {
                    JSONObject row = array.getJSONObject(i);
                    //id = row.getInt('id');
                    String type1 = row.getString("type");
                    String person_marks = row.getString("follwed");
                    String total_posts = row.getString("totalpost");
                    String componsated = row.getString("ipost");
                    String mods = row.getString("mods");
                    String  doj = row.getString("bday");

                    String avatar = row.getString("avatar");

                   TextView type = (TextView) findViewById(R.id.mebership);
                   type.setText(type1);

                   TextView marks = (TextView) findViewById(R.id.marks);
                   marks.setText(person_marks);

                   TextView total_pos = (TextView) findViewById(R.id.total_posts);
                   total_pos.setText(total_posts);

                   TextView componsated_posts = (TextView) findViewById(R.id.componsated_posts);
                   componsated_posts.setText(componsated);

                   TextView moderating = (TextView) findViewById(R.id.moderating);
                   moderating.setText(mods);

                   TextView user_name = (TextView) findViewById(R.id.profile_username);
                   user_name.setText(extras.getString("user_name"));

                   ImageView userProfilePic = (ImageView) findViewById(R.id.user_profile_img);
                   userProfilePic.setImageBitmap(mySession.downloadImage(avatar));

                   TextView dob = (TextView) findViewById(R.id.dob);
                    dob.setText(doj);
                }

                } catch (Exception e) {
                Log.e("Exception", "Exception when parsing response JSON."+e.getMessage());
                } 
```

有关更多详细信息，请单击此处[http://grabcodes.blogspot.com](http://grabcodes.blogspot.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:57:41.610

我用这段代码解决了。

```
URL urlws = new URL(
                "URLOFFJSON");
        URLConnection tc = urlws.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                tc.getInputStream()));
        String line;

        while ((line = in.readLine()) != null) {
            JSONArray ja = new JSONArray(line);
            for (int i = 0; i < ja.length(); i++) {
                JSONObject jo = (JSONObject) ja.get(i);
                Log.i("log_tag", jo.toString());
            }
        } 
```

这样我就可以获得网络服务 JSONArray

谢谢大家

# javascript - 如何使用 JQuery 获取可见区域中的元素

> ID：12516980
> 
> 赞同：1
> 
> 时间：2012-09-20T16:33:06.563
> 
> 标签：javascript, jquery, html, scroll, scrollto

我需要知道如何获得在浏览器视图中可见的第一个元素。

我正在实现一个自定义滚动条。但是，当用户使用鼠标滚动时，我的自定义滚动条会混乱。滚动后我需要在浏览器的可见区域中找到可见的 div，这样我才能滚动到正确的元素。

这是我的页面的结构：

```
<div class="page">

    <div id="scroller" class="news-scroller">
         <div ><span id="up"></span></div>
         <div ><span id="down"></span></div>
    </div>

    <div class="news">
    </div>
    <div class="news">
    </div>
    ....
</div> 
```

我正在使用滚动条#up 和#down 滚动到上一个或下一个 div.news。（我使用 scrollTo 插件）但是在使用鼠标滚动后，我需要了解哪个 div.news 是页面中第一个可见元素以重置我的自定义滚动条。

这是我的代码以防万一：

```
var current = $(".news").eq(0);

$("#down").click(function(){
    if(current.next().size() > 0)
    {
        current = current.next();
        $.scrollTo("#"+current.attr("id"), 800);     

    }
    else  if(current.next().size() <= 0)
    {
        return
    }
});

$("#up").click(function(){
    if(current.prev().size() > 0)
    {
        current=current.prev();
        $.scrollTo("#"+current.attr("id"), 800);
    }
    else  if(current.prev().size() <= 0)
    {
        return;
}
}); 
```

这是示例页面[。](http://xycomm.linkmesrl.com/site/news)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:53:21.490

以下代码将告诉您元素是否完全可见。

```
function isElementVisisble(element) {
          element = $(element);
           var parent = $(window);
        var containerLeft = parent.parent().scrollLeft();
        var containerRight = containerLeft + parent.parent().width();
        var elemLeft = element.offsetLeft;
        var elemRight = elemLeft + $(element).width();
        if (elemLeft < containerLeft || elemRight > containerRight) {
            return false;
        }
         return true;
    } 
```

您可以使用

```
 var firstVisibleElem;
    jQuery("*").each(function(){
        if(isElementVisisble(this)){
             firstVisibleElem= this;
              return false;
         }
    }); 
```

# azure - 从 Azure 下载上传的 cspkg 文件

> ID：12516983
> 
> 赞同：8
> 
> 时间：2012-09-20T16:33:23.663
> 
> 标签：azure

我可以从 Azure 下载我上传的 cspkg（而不是重新上传新包）吗？

情景是——

我需要将文件添加到现有网站中 - 比如说一张图片。

我 rdp 并手动添加；但是，当我的实例表现异常时，Azure 会重新创建一个新实例并清除我的文件。

（理想情况下，我应该将它们存储在存储中，但问题不在于那个。）

感谢您的意见！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:06:00.040

**[以下段落不正确]**

目前没有任何 API 或机制可以直接从已上传的 Windows Azure 门户下载完全相同的 CSPKG。当您失去 Windows Azure 项目/解决方案时，这肯定是 Windows Azure 用户的一项重大要求。

**[编辑-更正上段]**

使用[“获取包”](http://msdn.microsoft.com/en-us/library/windowsazure/jj154121.aspx) REST API，您可以将包从特定部署下载到您的 Azure 博客存储。如果您决定编写自己的 C# 应用程序以使用 REST API，则示例在[这里](http://msdn.microsoft.com/en-us/library/windowsazure/gg651127.aspx)。如果您不想编写 API，而只是使用 REST 调用下载包，则有一些工具，我使用了[BURP（基于 Java）](http://portswigger.net/burp/downloadfree.html)，如我的博客中[所述](http://blogs.msdn.com/b/avkashchauhan/archive/2012/05/16/windows-azure-management-using-burp-java-based-gui-tool-and-rest-api.aspx)。您可以使用博客中的信息来设置连接到 Azure 门户，然后使用文档中的 REST 调用来获取包。

接下来，即使您下载了 CSPKG（或拥有 CSPKG 的本地副本），您仍然无法通过直接向其中添加或删除任何内容来对其进行编辑，因为这会破坏 CSPKG 包的完整性，并且您将在上传时遇到错误。必须使用 CSPACK 工具创建包。

您的 approot 所在的 Drive E:\ 确实包含您的大部分编译代码，因此如果您可以在本地下载它并想出一个想法来构建一个新的项目表单（???），那可能是一个选择。如果包是直接使用 CSPACK 工具创建的，并且从驱动器 E:\ 下载文件并重新创建包确实有效，但是如果项目的复杂应用程序包含源代码和编译的代码文件，即 ASP.NET/MVCx 应用程序，则很难.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-06T17:55:06.297

我遇到了类似的问题，

我所做的是，

使用[`Get-Package`](http://msdn.microsoft.com/en-us/library/windowsazure/jj154121.aspx)REST API 调用在存储容器中存储`cspkg`和文件。`cscfg`

**记住这个存储容器应该在同一个订阅下，否则 Get-Package REST API 调用会失败。**

然后我使用 AzCopy ( [http://blogs.msdn.com/b/windowsazurestorage/archive/2012/12/03/azcopy-uploading-downloading-files-for-windows-azure-blobs.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/12/03/azcopy-uploading-downloading-files-for-windows-azure-blobs.aspx) ) 从存储容器到我的本地磁盘。

即使在不同的订阅下，您也可以使用 AzCopy 从一个 StorageContainer 复制到另一个。

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-04T03:01:36.867

使用[Windows Azure 服务管理库](https://www.nuget.org/packages/WindowsAzure.ServiceManagement.Library)NuGet 包，获取包的 C# 代码变为：

```
private static X509Certificate2 GetCertificate(string storeName, string thumbprint)
{
    var store = new X509Store(storeName);
    store.Open(OpenFlags.ReadOnly);
    return store.Certificates.Find(X509FindType.FindByThumbprint, thumbprint, true)[0];
}

public static void ExportPackage(X509Certificate2 certificate, string subscriptionId, string serviceName, string deploymentName, string containerUri)
{
    var managementService = ServiceManagementHelper.CreateServiceManagementChannel("WindowsAzureEndPoint", certificate);

    try
    {
        managementService.GetPackage(
            subscriptionId,
            serviceName,
            deploymentName,
            containerUri,
            true /*overwriteExisting*/);
    }
    catch (Exception ex)
    {
        System.Net.WebException exception = ex.InnerException as System.Net.WebException;
        if (exception != null)
        {
            string responseText;

            using (var reader = new System.IO.StreamReader(exception.Response.GetResponseStream()))
            {
                responseText = reader.ReadToEnd();
                Console.WriteLine("ERROR:" + exception);
                Console.WriteLine(responseText);
            }
        }
    }
} 
```

然而，我的问题是，无论我作为 containerUri 传入什么，我都会返回 400 Bad request - Parameter value 'something.blob.core.windows.net/somecontainer'; 为参数“ContainerUriString”指定的无效。

**更新：**我的问题是由于属于不同订阅的存储容器 - 这显然不起作用。我确保容器属于同一个订阅，瞧！

**更新**：此代码假定以下 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<startup> 
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5.1" />
</startup>
<system.serviceModel>
    <bindings>
        <webHttpBinding>
            <binding name="WindowsAzureServiceManagement_WebHttpBinding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00">
                <readerQuotas maxStringContentLength="1048576" maxBytesPerRead="131072"/>
                <security mode="Transport">
                    <transport clientCredentialType="Certificate"/>
                </security>
            </binding>
        </webHttpBinding>
    </bindings>
    <client>
        <endpoint name="WindowsAzureEndPoint" address="https://management.core.windows.net" binding="webHttpBinding" bindingConfiguration="WindowsAzureServiceManagement_WebHttpBinding" contract="Microsoft.Samples.WindowsAzure.ServiceManagement.IServiceManagement" />
    </client>
</system.serviceModel>
</configuration> 
```

或者，对于 LinqPad 用户，您可以按如下方式配置 Web 服务内联：

```
 var b = new WebHttpBinding(WebHttpSecurityMode.Transport);
        b.Security.Transport.ClientCredentialType = HttpClientCredentialType.Certificate;
        var address = new EndpointAddress("https://management.core.windows.net");
        var managementService = ServiceManagementHelper.CreateServiceManagementChannel(b, address.Uri, certificate); 
```

典型用途：

```
X509Certificate2 certificate = GetCertificate("My", "NNNNNNNNNNNNN");
ExportPackage(certificate,
            "00000000-0000-0000-0000-000000000000",
            "yourservice",
            "00000000000000000000000000000000",
            "https://yourstorage.blob.core.windows.net/container"); 
```

# java - Java按字符读取文本文件-unicode 254和255突然出现

> ID：12516985
> 
> 赞同：0
> 
> 时间：2012-09-20T16:33:28.223
> 
> 标签：java, file, unicode, text-files, bufferedreader

从下面的代码中，我读取了一个包含字符“a”（unicode 97）的文本文件

```
int ini ; 
    // Buffered Reader Text file read per character
    while((ini=jer.read())!=(-1)){
        char inp = (char)ini;
        System.out.println(inp);
        if (listahan.containsKey(inp)) {
                listahan.put(inp,listahan.get(inp) + 1);
            } else {
                listahan.put(inp, 1);
            }
    }
// ENHANCED FOR LOOP FOR DISPLAYING IN CONSOLE
for (Map.Entry<Character, Integer> e : listahan.entrySet()){
    System.out.printf("%1d.) %-15s : %-3d%n", ctr++, e.getKey(), e.getValue());

} 
```

输出是：

```
1.)                 : 1  // (must be a null)
2.) a               : 1  
3.) þ               : 1  
4.) ÿ               : 1 
```

为什么输出不像这个？：

```
1.) a                 :1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T16:37:17.767

您遇到了一个[字节顺序标记](https://en.wikipedia.org/wiki/Byte_order_mark)，即 U+FEFF，即，当作为单独的字节读取时，相当于 254 和 255。

这（连同 null 的出现）可能意味着文件以[UTF-16](https://en.wikipedia.org/wiki/UTF-16)或[UCS-2](https://en.wikipedia.org/wiki/UCS-2)（又名宽字符串、wchar、...）编码。如果您不知道这意味着什么，我建议您阅读 unicode 编码。为此，我推荐伟大的文章[The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)](http://www.joelonsoftware.com/articles/Unicode.html)。

# ios - iphone 5 4 英寸

> ID：12516986
> 
> 赞同：6
> 
> 时间：2012-09-20T16:33:29.267
> 
> 标签：ios, xcode

> **可能重复：**
> [如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

我正在使用 Xcode 创建一个应用程序。我注意到使用 xcode 4.5，您的故事板可以适应 iphone 5 的屏幕尺寸。如果我创建两个具有不同屏幕尺寸的独立故事板，但将控制器链接到同一个 .h 文件，我如何告诉程序根据设备加载哪个故事板？

例如：对于 ipad，当我运行时，它会自动选择正确的故事板

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-21T05:26:33.220

当前标记的答案对我不起作用，因此我创建了以下方法来检查当前设备是否具有 4 英寸显示屏。

```
- (BOOL)hasFourInchDisplay {
    return ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568.0);
} 
```

由于这是 iPhone 上 4 英寸显示屏的已知高度，因此它是一个很好的指标。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T17:55:45.323

## 在您的初始化中添加此代码：

```
if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
     if([UIScreen mainScreen].bounds.size.height == 568.0)){
             //move to your iphone5 storyboard
             [UIStoryboard storyboardWithName:(NSString *) bundle (NSBundle *)];
  }
     else{
             //move to your iphone4s storyboard
             [UIStoryboard storyboardWithName:(NSString *) bundle (NSBundle *)];
  }
} 
```

.h（头文件）保存初始化。在放置括号 {} 之后和括号内初始化您的数据结构，例如 IBOutlet、int、string。将您的方法放在外面，例如`IBAction`or `void`。

# php - 我无法摆脱的 Magento 系统日志错误

> ID：12516991
> 
> 赞同：0
> 
> 时间：2012-09-20T16:33:31.983
> 
> 标签：php, magento

我的 system.log 中有两个问题，我正在解决一些问题。该站点似乎运行良好，但我非常想从日志中删除这些持续错误。

* * *

> **注意**：未定义的变量：在第 17 行的 /var/www/... 中排序

```
// line 17
$merchantnumber = $standard->getConfigData('merchantnumber', $order ? $order->getStoreId() : null); 
```

* * *

> **警告**：在第 267 行的 /var/www/... 中除以零

```
// line 267
"vat" => (float)round((string)((round($order->getBaseShippingInclTax(),2)-round($order->getBaseShippingAmount(),2))/round((string)$order->getBaseShippingAmount(),2))*100, 2) 
```

* * *

**更新**

```
// line 258-281 
                $items = $order->getAllItems();
    foreach ($items as $itemId => $item)
    {
        $invoice["lines"][] = array
        (
            "id" => $item->getSku(),
            "description" => $item->getName(),
            "quantity" => round($item->getQtyOrdered(), 0),
            "price" => $item->getBasePrice()*100,
            "vat" => (float)round((string)((round($item->getBasePriceInclTax(),2)-round($item->getBasePrice(),2))/round((string)$item->getBasePrice(),2))*100, 2)
        );
    }

    $invoice["lines"][] = array
    (
        "id" => $order->getShippingMethod(),
        "description" => $order->getShippingDescription(),
        "quantity" => 1,
        "price" => $order->getBaseShippingAmount()*100,
        "vat" => (float)round((string)((round($order->getBaseShippingInclTax(),2)-round($order->getBaseShippingAmount(),2))/round((string)$order->getBaseShippingAmount(),2))*100, 2)
    );

    return json_encode($invoice);
} 
```

*抱歉，我之前发布了错误的代码，在查看错误日志时我很困惑，因为在 Item 和 Order 部分都出现了相同的（Devider）错误。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:48:05.077

在第一种情况下，您可以尝试将该行更改为

```
$merchantnumber = $standard->getConfigData('merchantnumber', (isset($order) && $order) ? $order->getStoreId() : null); 
```

在第二种情况下，我无法确切知道如果什么`"vat"`时候`$order->getBaseShippingAmount()`是 0 应该去什么值。我怀疑你需要做类似的事情

```
if (!$order->getBaseShippingAmount()) {
   return;
} 
```

要添加到第 267 行上方的某个位置，但是如果没有看到代码就很难确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T17:01:17.543

不幸的是，Magento 代码似乎经常依赖 PHP 对被认为是*通知的**逻辑*错误的容忍度。

 *```
 $merchantnumber = $standard->getConfigData('merchantnumber', $order ?
   $order->getStoreId() : null); 
```

如果`$order`未设置，我们希望使用 NULL 而不是订单的商店 ID：

```
 $merchantnumber = $standard->getConfigData('merchantnumber',
   isset($order) ? $order->getStoreId() : null); 
```

在第二个文件中：

**更新**检查您是否指的是`$order`or `$item`。如果它在一个循环中，它可能是后者。

```
"vat" => (float)round((string)((round($item->getBaseShippingInclTax(),2)-round($item->getBaseShippingAmount(),2))/round((string)$item->getBaseShippingAmount(),2))*100, 2) 
```

VAT% 是从 ShippingInclTax（即 ShippingAmount + VAT）中反向计算的。只有当 getBaseShippingAmount() 为零时，计算才会崩溃。

为了解决这个问题，我们应该有：

```
 'vat' => (0 == round($item->getBaseShippingAmount(),2)) ? 0 :
          (float)round((string)(
 (round($item->getBaseShippingInclTax(),2)
 -round($item->getBaseShippingAmount (),2)
 )/round((string)$item->getBaseShippingAmount(),2)
 )*100,2), 
```

...我对所有这些`round`s 并不满意，但它们可能在那里，以便打印帐户“检查”到最后一位小数，并避免奇怪的结果，例如 10.33 + 10.33 + 9.33 = 30.00 而不是 29.99。

我会写

```
 'vat' => (0 == $item->getBaseShippingAmount()) ? 0
        : round(
             100.0*(
               $item->getBaseShippingInclTax()/$item->getBaseShippingAmount()
               -1.0
             )
          ,2), 
```

但即使它在数学上更合理，我担心结果可能与 Magento 在其他地方打印的结果不“匹配”。

If you're using `$order` in a loop (meaning you've got the same value whatever the item), you'd be better advised in calculating VAT before the loop and then use it inside.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:38:01.727

**通知不是错误**。您可以选择忽略它，也可以`order`使用以下命令检查变量是否存在`isset`：

```
 ...er', isset($order) ? $... 
```

**应始终避免除以零，**因为答案通常是未定义的（至少在数学上是未定义的）。在尝试进行除法*之前*，请检查分母是否不为零。*