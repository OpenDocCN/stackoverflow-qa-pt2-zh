# StackOverflow 问答 15432000-15432999

# php - yii phpunit 测试，覆盖范围内的视图

> ID：15432001
> 
> 赞同：10
> 
> 时间：2013-03-15T12:05:02.857
> 
> 标签：php, unit-testing, yii, phpunit, code-coverage

我的 Yii 应用程序在控制器、模型、组件、模块中获得了 phpunit 覆盖，但没有任何视图。问题是 phpunit 中的代码覆盖率加载器在准备覆盖率报告期间包含视图文件。带有表单的视图调用`$this->beginWidget`会导致崩溃，因为没有 $this 上下文。

视图实际上并没有重要的代码或逻辑，但它们仍然有一些条件甚至循环要调用`renderPartial`，因此最好也覆盖视图代码。

这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T18:12:53.940

您是否尝试过扩展[CWebTestCase](http://www.yiiframework.com/doc/api/1.1/CWebTestCase)？通常，在编写单元测试时，您有提供必要数据的装置和东西 - 但是对于 Web 应用程序的视图测试和“功能”测试，通常最容易模仿浏览器并让它在 Web 应用程序上执行操作如果用户实际使用它。目前，这种模仿最容易用 Selenium 完成（在我看来）。

Yii[功能测试指南和](http://www.yiiframework.com/doc/guide/1.1/en/test.functional)[Selenium 文档](http://docs.seleniumhq.org/docs/)是一个很好的起点。还有[这本书](https://rads.stackoverflow.com/amzn/click/com/1847199585)使用了 selenium（我不确定最新版本是否有，但我知道上一版本的出版日期：2010 年 8 月 11 日有），Larry Ullman 的[Yii 书](http://yii.larryullman.com/toc.php)将有关于测试和当他完成那一章时，在功能测试中使用 Selenium。

希望这可以帮助！

**更新以进一步解释[CWebTestCase](http://www.yiiframework.com/doc/api/1.1/CWebTestCase)**

CWebTestCase 扩展了[PHPUnit_Extensions_SeleniumTestCase](http://www.phpunit.de/manual/3.2/en/selenium.html)，它直接实现了一个功能测试基础，您可以在 phpunit 中使用它来测试视图、测试视图内的小部件创建、断言文本存在、“单击”链接等。这些测试仍然从命令运行虽然他们要求在运行测试时启动 Selenium-RC 服务器并且他们需要配置有效的浏览器。一个有效的浏览器可以用尽可能少的代码来配置，就像`setUp()`函数内部的以下代码一样：

```
$this->setBrowser('*firefox /usr/lib/firefox/firefox-bin'); 
```

声明 CWebTestCase 不能提供代码覆盖率是不正确的，因为 CWebTestCase 扩展了 PHPUnit_Extensions_SeleniumTestCase，它提供了[文档](http://www.phpunit.de/manual/3.2/en/selenium.html)中引用的以下内容：

> PHPUnit_Extensions_SeleniumTestCase 可以为通过 Selenium 运行的测试收集代码覆盖率信息：
> 
> 复制`PHPUnit/Extensions/SeleniumTestCase/phpunit_coverage.php`到您的网络服务器的文档根目录。在您的网络服务器的 php.ini 配置文件中，配置
> 
> `PHPUnit/Extensions/SeleniumTestCase/prepend.php`和 `PHPUnit/Extensions/SeleniumTestCase/append.php`
> 
> 分别为`auto_prepend_file`和`auto_append_file`。在扩展的测试用例类中`PHPUnit_Extensions_SeleniumTestCase`，使用

`protected $coverageScriptUrl = 'http://host/phpunit_coverage.php';`

> `phpunit_coverage.php`配置脚本的 URL 。

# bash - 基于变量抑制输出

> ID：15432002
> 
> 赞同：0
> 
> 时间：2013-03-15T12:05:02.640
> 
> 标签：bash

我有一个带有可选详细参数的脚本。根据它的值，我想抑制输出（在下面的示例中是 pushd，但实际上是其他，主要是 git 命令）。例子：

```
verb=1
# pushd optionally outputs path (works but too long)
if [ $verb ]; then
  pushd ..
else
  pushd .. > /dev/null
fi
popd > /dev/null  # the same if.. would be needed here 
```

我正在寻找的是一些东西：

```
push .. $cond  # single line, outputing somehow controlled directly
popd $cond     # ditto 
```

有人可以帮忙吗？谢谢，

汉斯-彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:13:04.203

您可以将输出重定向到其定义取决于的函数`$verb`：

```
#! /bin/bash

verb=$1

if [[ $verb ]] ; then
    verb () {
        cat
    }
else
    verb () {
        :     # Does nothing.
    }
fi

echo A | verb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:20:48.233

使用不同的文件描述符重定向到：

```
if (( $verb ))
then
    exec 3>&1
else
    exec 3>/dev/null
fi

push .. >&3
popd >&3 
```

这样，条件只在开始时测试一次，而不是每次进行重定向时。

# java - 以编程方式更改图像源

> ID：15432004
> 
> 赞同：0
> 
> 时间：2013-03-15T12:05:06.017
> 
> 标签：java, android

当我尝试使用以下方法更改图像的来源时：

```
img.setBackgroundResource(R.drawable.anfex2011); 
```

或者

```
img.setImageResource(R.drawable.anfex2011); 
```

我得到错误：

```
03-15 13:56:56.215: E/AndroidRuntime(30733): FATAL EXCEPTION: main
03-15 13:56:56.215: E/AndroidRuntime(30733): java.lang.IllegalStateException: Could not execute method of the             activity
03-15 13:56:56.215: E/AndroidRuntime(30733):    at android.view.View$1.onClick(View.java:3691)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at android.view.View.performClick(View.java:4211)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at android.widget.CompoundButton.performClick(CompoundButton.java:105)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at android.view.View$PerformClick.run(View.java:17267)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at android.os.Handler.handleCallback(Handler.java:615)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at android.os.Looper.loop(Looper.java:137)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at java.lang.reflect.Method.invokeNative(Native Method)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at java.lang.reflect.Method.invoke(Method.java:511)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at dalvik.system.NativeStart.main(Native Method)
03-15 13:56:56.215: E/AndroidRuntime(30733): Caused by: java.lang.reflect.InvocationTargetException
03-15 13:56:56.215: E/AndroidRuntime(30733):    at java.lang.reflect.Method.invokeNative(Native Method)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at java.lang.reflect.Method.invoke(Method.java:511)
03-15 13:56:56.215: E/AndroidRuntime(30733):    at android.view.View$1.onClick(View.java:3686)
03-15 13:56:56.215: E/AndroidRuntime(30733):    ... 12 more
03-15 13:56:56.215: E/AndroidRuntime(30733): Caused by: java.lang.NullPointerException
03-15 13:56:56.215: E/AndroidRuntime(30733):    at com.TLC.aelminingsolutions.MainActivity.onClickLists(MainActivity.java:675)
03-15 13:56:56.215: E/AndroidRuntime(30733):    ... 15 more 
```

我究竟做错了什么？

**编辑：** 这是更多代码：

```
 @SuppressWarnings("deprecation")
        public void onClickLists(View v)
    {       
        switch (v.getId())
        {
    case R.id.radCoalMiningShallow :
    { 
        ImageView img =  (ImageView) findViewById(R.id.img);
        img.setBackgroundDrawable(R.drawable.anfex2011);
        //img.setImageDrawable(R.drawable.anfex2011);
        break;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:06:17.727

试试这个，图片`OnTouchListener()`

```
 img.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View arg0, MotionEvent arg1) {

            switch (arg1.getAction()) {
                case MotionEvent.ACTION_DOWN: {
                    imgTicket.setImageResource(R.drawable.hticket);
                    break;
                }
                case MotionEvent.ACTION_UP: {
                    imgTicket.setImageResource(R.drawable.ticket);
                    break;
                }
                case MotionEvent.ACTION_CANCEL:{
                    imgTicket.setImageResource(R.drawable.ticket);
                    break;
                }
                }
                return true;
            // TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:12:34.043

你初始化你的imageview了吗？

```
ImageView img = (ImageView) findViewById(R.id.ImageView1);
img.setImageResource(R.drawable.anfex2011); 
```

这是你的图像名 - anfex2011？

# python - 在 Python 中安装包时出现异常

> ID：15432010
> 
> 赞同：4
> 
> 时间：2013-03-15T12:05:13.043
> 
> 标签：python, django, python-2.7

在 Python 中安装软件包时出现此异常。卸载python并再次安装但没有

```
C:\Users\ramasastri.g\Desktop\pycrypto-2.6>python setup.py install
running install
running build
running build_py
running build_ext
warning: GMP or MPIR library not found; Not building Crypto.PublicKey._fastmath.

building 'Crypto.Random.OSRNG.winrandom' extension
C:\Program Files\Microsoft Visual Studio 10.0\VC\BIN\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -Isrc/ -Isrc/inc-msvc/ -IC:\Python27\include -IC:\Python27\PC /Tcsrc/winrand.c /Fobuild\temp.win32-2.7\Release\src/winrand.obj
winrand.c
c:\python27\include\pyconfig.h(68) : fatal error C1083: Cannot open include file: 'io.h': No such file or directory
error: command '"C:\Program Files\Microsoft Visual Studio 10.0\VC\BIN\cl.exe"' failed with exit status 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:10:48.467

可能您缺少 c++ 编译器。

[我从这里](http://www.voidspace.org.uk/python/modules.shtml)使用预打包的版本安装了它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T12:24:26.007

我的问题是在 virtualenv 中。我无法安装某些软件包并得到相同的致命错误 c1083。我正在尝试 Visual Studio 和 PTVS。仅安装 Microsoft Visual C++ Compiler for Python 2.7 [https://www.microsoft.com/en-us/download/details.aspx?id=44266](https://www.microsoft.com/en-us/download/details.aspx?id=44266)并不足以修复错误，尽管它是必需的。

我在这里找到了解决方案[http://blog.ionelmc.ro/2014/12/21/compiling-python-extensions-on-windows/](http://blog.ionelmc.ro/2014/12/21/compiling-python-extensions-on-windows/)

virtualenv 安装的 setuptools 太旧了（3.6）。您需要删除它并重新安装，但在 Visual Studio 解决方案资源管理器的“安装 python 包”窗口中，不要使用“setuptools”作为模块名称来安装使用“setuptools>=6.0”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-24T08:36:10.740

收到相同的错误消息，发现原因是虽然我已经使用 Visual Studio 和 Python 的路径正确设置了 PATH 变量，但我忘记添加 C:\Windows\System32 路径。

# oracle11g - oracle 11G表存在但不可用

> ID：15432012
> 
> 赞同：1
> 
> 时间：2013-03-15T12:05:16.767
> 
> 标签：oracle11g

我正在运行 Oracle 11G。假设我有名为 TEST_TABLE 的表。我可以在运行时看到它：

```
SQL> SELECT TABLE_NAME FROM ALL_TABLES WHERE TABLE_NAME='TEST_TABLE';

TABLE_NAME
------------------------------
TEST_TABLE 
```

但是当我尝试获取表格内容时出现错误：

```
SQL>  SELECT * FROM table (TEST_TABLE);
SELECT * FROM table (TEST_TABLE)
                  *
ERROR at line 1:
ORA-00904: "TEST_TABLE": invalid identifier 
```

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:14:05.477

```
SELECT * FROM table (TEST_TABLE); 
```

这就是使用表*函数*的语法。相当[高级的话题](http://www.oracle-base.com/articles/misc/pipelined-table-functions.php)，不是你要找的。

要访问表，只需执行

```
SELECT * FROM TEST_TABLE; 
```

# c# - 模型活页夹 - 如何使可选

> ID：15432022
> 
> 赞同：1
> 
> 时间：2013-03-15T12:05:36.930
> 
> 标签：c#, asp.net-mvc-4, .net-4.5

我希望属性**DateOfBirth**相对于模型绑定器是可选的

```
public class RegisterModel
{
    [Required]
    public int MP_CustomerID { get; set; }

    [Required]
    [DataType(DataType.Password)]     
    public string Password { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Compare("Password")]
    public string PasswordConfirm { get; set; }

    [Required(AllowEmptyStrings = true, ErrorMessage="This is the error message")]
    public DateTime DateOfBirth { get; set; }

    public int NoOfVehicles { get; set; }
} 
```

我已经尝试一起删除该属性，但它仍然根据需要对其进行分类。

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T12:06:42.720

你应该让它可以为空

```
public DateTime? DateOfBirth { get; set; } 
```

# java - 如何使用公共文件上传流api上传文件

> ID：15432024
> 
> 赞同：8
> 
> 时间：2013-03-15T12:05:39.593
> 
> 标签：java, jsp

我正在关注公共文件上传站点中提供的关于流 API 的示例。我一直在试图弄清楚如何获取上传文件的文件扩展名，如何将文件写入目录，最糟糕的是编写示例注释的人在哪里`// Process the input stream...`这让我想知道它是否如此微不足道，以至于我是唯一一个不知道怎么做的人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T12:46:17.370

在您的 HTML 文件中使用它：

```
<form action="UploadController" enctype="multipart/form-data" method="post">  
  <input type="file">  
</form> 
```

在`UploadController`servlet 中，在`doPost`方法内部：

```
 boolean isMultipart = ServletFileUpload.isMultipartContent(request);

    if (isMultipart) {
        FileItemFactory factory = new DiskFileItemFactory();
        ServletFileUpload upload = new ServletFileUpload(factory);

    try {
        List items = upload.parseRequest(request);
        Iterator iterator = items.iterator();
        while (iterator.hasNext()) {
            FileItem item = (FileItem) iterator.next();

            if (!item.isFormField()) {
                String fileName = item.getName();

                String root = getServletContext().getRealPath("/");
                File path = new File(root + "/uploads");
                if (!path.exists()) {
                    boolean status = path.mkdirs();
                }

                File uploadedFile = new File(path + "/" + fileName);
                System.out.println(uploadedFile.getAbsolutePath());
                item.write(uploadedFile);
            }
        }
    } catch (FileUploadException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T15:54:46.223

这是一个 Servlet，它可以执行您希望它执行的操作。

```
package rick;
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;
import org.apache.commons.fileupload.*;
import org.apache.commons.fileupload.util.*;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import javax.servlet.annotation.WebServlet; 
@WebServlet("/upload4")
public class UploadServlet4 extends HttpServlet{
  protected void doPost(HttpServletRequest request, HttpServletResponse response) 
         throws ServletException, IOException {
       PrintWriter out = response.getWriter();
       out.print("Request content length is " + request.getContentLength() + "<br/>"); 
       out.print("Request content type is " + request.getHeader("Content-Type") + "<br/>");
       boolean isMultipart = ServletFileUpload.isMultipartContent(request);
       if(isMultipart){
                  ServletFileUpload upload = new ServletFileUpload();
           try{
               FileItemIterator iter = upload.getItemIterator(request);
               FileItemStream item = null;
               String name = "";
               InputStream stream = null;
               while (iter.hasNext()){
                                     item = iter.next();
                                     name = item.getFieldName();
                                     stream = item.openStream();
                  if(item.isFormField()){out.write("Form field " + name + ": " 
                                           + Streams.asString(stream) + "<br/>");}
                  else {
                      name = item.getName();
                      System.out.println("name==" + name);
                      if(name != null && !"".equals(name)){
                         String fileName = new File(item.getName()).getName();
                         out.write("Client file: " + item.getName() + " <br/>with file name "
                                                    + fileName + " was uploaded.<br/>");
                         File file = new File(getServletContext().getRealPath("/" + fileName));
                         FileOutputStream fos = new FileOutputStream(file);
                         long fileSize = Streams.copy(stream, fos, true);
                         out.write("Size was " + fileSize + " bytes <br/>");
                         out.write("File Path is " + file.getPath() + "<br/>");
                      }
                  }
               }
           } catch(FileUploadException fue) {out.write("fue!!!!!!!!!");}
       } 
  }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-04T20:23:56.343

所有这些答案的问题在于它没有回答原始问题！

正如它所说的“处理输入流”，它真的让你感到困惑下一步该做什么。昨晚我一直在看这个问题，试图从一个答案中找到提示，但什么也没有。我去尝试了其他网站，什么都没有。

问题是，我们所做的超出了文件上传的范围，这就是问题所在。

我们现在正在使用 Java.IO InputStream

```
 InputStream stream = item.openStream(); 
```

现在我们使用那个“流”。

[https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=+writing+a+java+inputstream+to+a+file](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=+writing+a+java+inputstream+to+a+file)

在这里，您可以找到您所需要的各种答案。它是如此模糊，这很愚蠢，并且看起来你必须对 Commons 做一些额外的事情，但实际上它不是 Commons InputStream 它是 Java.io 的！

在我们的例子中，我们获取给定的流并通过读取字节数据上传到新文件

该站点还有许多可能有用的选项[http://www.jedi.be/blog/2009/04/10/java-servlets-and-large-large-file-uploads-enter-apache-fileupload/](http://www.jedi.be/blog/2009/04/10/java-servlets-and-large-large-file-uploads-enter-apache-fileupload/)

我希望这对那些对 FileUploading 感到困惑和不熟悉的人有所帮助，因为我在写这个答案之前几分钟才弄清楚这一点。

这是我将文件保存到根驱动器的代码。

```
 try {
            System.out.println("sdfk");

            boolean isMultipart = ServletFileUpload.isMultipartContent(request);

// Create a new file upload handler
            ServletFileUpload upload = new ServletFileUpload();

// Parse the request
            FileItemIterator iter = upload.getItemIterator(request);

            while (iter.hasNext())
            {
                FileItemStream item = iter.next();
                String name = item.getFieldName();
                InputStream stream = item.openStream();

                    System.out.println("File field " + name + " with file name "
                            + item.getName() + " detected.");
                    // Process the input stream
                    File f = new File("/"+item.getName());

                 System.out.println(f.getAbsolutePath());

                FileOutputStream fout= new FileOutputStream(f);
                BufferedOutputStream bout= new BufferedOutputStream (fout);
                BufferedInputStream bin= new BufferedInputStream(stream);

                int byte_;

                while ((byte_=bin.read()) != -1)
                {
                     bout.write(byte_);
                }

                bout.close();
                bin.close();

            }       

        } 
        catch (FileUploadException ex)
        {
            Logger.getLogger(UploadServlet.class.getName()).log(Level.SEVERE, null, ex);
        }
        response.sendRedirect("/plans.jsp"); 
```

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:01:36.260

有一个很棒的“图书馆”可以为你做这件事。它实际上只是一个过滤器的代码示例，它将拦截多部分类型的任何表单帖子，并让您可以访问文件、文件名等......您可以在您的普通 servlet 发布方法中处理这些内容。

[http://balusc.blogspot.com/2007/11/multipartfilter.html](http://balusc.blogspot.com/2007/11/multipartfilter.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-10T18:20:52.497

我在这里[http://www.javamonamour.org/2015/10/web-application-for-file-upload-with.html](http://www.javamonamour.org/2015/10/web-application-for-file-upload-with.html)给出了一个完整的工作示例（WebLogic 的 Eclipse 项目，但您可以轻松地将其调整为 Tomcat ）。

否则只需 git clone [https://github.com/vernetto/WebFileUploaderStreaming](https://github.com/vernetto/WebFileUploaderStreaming)。一个完整的工作示例胜过一千个代码片段。

# android - 如何在这里使用 sharedPreferences？

> ID：15432035
> 
> 赞同：1
> 
> 时间：2013-03-15T12:06:20.490
> 
> 标签：android, sharedpreferences

我有一些设置值的微调器，其中四个。我希望他们在启动之间保留当前设置。当您在微调器中选择一个值时，它不应保存该值，直到按下 updateSettings 按钮。我该怎么做？

这是一些代码，在 onCreate 我使用默认值制作微调器：

```
 mBaudSpinner = (Spinner) findViewById(R.id.bannerBaudSpinner);
    ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(
            this, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mBaudSpinner.setAdapter(adapter);
    String[] tempArray = SlickUSB2Serial.BAUD_RATES;
    for (int i = 0; i < tempArray.length; i++) {
        adapter.add(tempArray[i]);
    }
     mBaudSpinner.setSelection(SlickUSB2Serial.BaudRate.BAUD_9600.ordinal());

    mDataSpinner = (Spinner) findViewById(R.id.bannerDataSpinner);
    adapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mDataSpinner.setAdapter(adapter);
    tempArray = SlickUSB2Serial.DATA_BITS;
    for (int i = 0; i < tempArray.length; i++) {
        adapter.add(tempArray[i]);

    }
    mDataSpinner
            .setSelection(SlickUSB2Serial.DataBits.DATA_8_BIT.ordinal());

    mParitySpinner = (Spinner) findViewById(R.id.bannerParitySpinner);
    adapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mParitySpinner.setAdapter(adapter);
    tempArray = SlickUSB2Serial.PARITY_OPTIONS;
    for (int i = 0; i < tempArray.length; i++) {
        adapter.add(tempArray[i]);

    }
    mParitySpinner.setSelection(SlickUSB2Serial.ParityOption.PARITY_NONE
            .ordinal());

    mStopSpinner = (Spinner) findViewById(R.id.bannerStopSpinner);
    adapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mStopSpinner.setAdapter(adapter);
    tempArray = SlickUSB2Serial.STOP_BITS;
    for (int i = 0; i < tempArray.length; i++) {
        adapter.add(tempArray[i]);

    }
    mStopSpinner
            .setSelection(SlickUSB2Serial.StopBits.STOP_1_BIT.ordinal()); 
```

如果我单击 updateSettings，则运行此代码：

```
else if (v == mUpdateSettings) {
            if (mSelectedAdapter == null) {
                return;
            }

            mSelectedAdapter.setCommSettings(BaudRate.values()[mBaudSpinner
                    .getSelectedItemPosition()], DataBits.values()[mDataSpinner
                    .getSelectedItemPosition()],
                    ParityOption.values()[mParitySpinner
                            .getSelectedItemPosition()],
                    StopBits.values()[mStopSpinner.getSelectedItemPosition()]);

   } 
```

我正在尝试将这样的偏好用于一个微调器作为示例，它是否在正确的轨道上？

```
 SharedPreferences prefs;
         prefs = PreferenceManager.getDefaultSharedPreferences(this);
         SharedPreferences.Editor prefEditor = prefs.edit();
         prefEditor.putString("savedValue",mBaudSpinner.getSelectedItem().toString());
         prefEditor.commit();
         String username = prefs.getString("savedValue", String.valueOf(SlickUSB2Serial.BaudRate.BAUD_9600.ordinal()));
         mBaudSpinner.setSelection(Integer.parseInt(username)); 
```

你是做什么的，我是否将 sharedPrefs 的东西设为全局，以便它可以在 onCreate 和按钮单击侦听器中使用？然后将设置微调器默认值的行更改为以下示例：

```
String username = prefs.getString("savedValue", String.valueOf(SlickUSB2Serial.BaudRate.BAUD_9600.ordinal()));
             mBaudSpinner.setSelection(Integer.parseInt(username)); 
```

然后把其他关于在按钮监听器中保存值的东西？我正在尝试这个，但状态没有保存并且总是默认为错误的值。我做的对吗？

**编辑**

这些行似乎没有正确设置默认值，这是为什么呢？

```
prefs = PreferenceManager.getDefaultSharedPreferences(this);
         String username = prefs.getString("savedValue", Integer.toString(SlickUSB2Serial.BaudRate.BAUD_9600.ordinal()));
         mBaudSpinner.setSelection(Integer.parseInt(username)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:03:04.413

看，当你打电话时：

```
 mBaudSpinner.getSelectedItem() 
```

你有一个对象并将其转换为字符串。你打电话时 ：

```
 mBaudSpinner.setSelection(Integer.parseInt(username)) 
```

你得到字符串并转换为int。但是，`setSelectionshould`接收一个 int 位置和 getSelectedItem 返回一个对象而不是项目位置。

# tridion - 如何在 Tridion 2011 sp1 中配置 WebDAV

> ID：15432036
> 
> 赞同：2
> 
> 时间：2013-03-15T12:06:21.050
> 
> 标签：tridion, tridion-2011

我们正在使用 Tridion 2011 SP1。我们正在使用 NTLM 身份验证。我们正在为 WebDAV 映射网络驱动器，当我们输入 CMS url/webdav 并按下一步时，它会抛出错误“您输入的文件夹似乎无效。请选择另一个”。我们在 SDL Tridion 2011 网站 webdav 文件夹下检查了 IIS。我认为我们缺少某些配置，任何人都可以帮助我们解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:19:28.593

常见错误。我猜你是在服务器本身上这样做的？您必须向 Windows 添加一些额外的东西才能支持 Webdav 文件夹（我相信“桌面体验功能”）。

从实际的客户端机器而不是服务器本身尝试它，通常不需要在 Tridion 端进行任何更改以使其工作。

**如果您使用的是 Windows XP**，请注意默认的 webdav 客户端已损坏，它会尝试将您的 url 从 转换`http://servername/webdav/`为`\\servername\webdav`. 如果是这种情况，请先从 MS Office 应用程序中打开它（它将使用比 XP 更好的 office webdav 客户端），然后从资源管理器中的“我的网络”列表中打开快捷方式。

从 Windows 7 连接到 Tridion webdav 一直对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T07:35:43.513

为了找到您必须按照 Nuno Linhares 建议安装 DesktopExperience 功能的路径

# java - java NIO 中的 socketChannel.register() 是否与 close() 方法同步？

> ID：15432038
> 
> 赞同：0
> 
> 时间：2013-03-15T12:06:23.417
> 
> 标签：java, sockets, asynchronous, nio, channel

在 openJDK(jdk-6u23) 中，AbstractSelectableChannel.register() 的实现如下：

它首先检查此通道是否打开。然后使用 reg lock 进行注册工作。但是如果我们在 isOpen() 测试和同步块之间调用 close 方法，通道将被关闭。然后我们将注册一个 CLOSED带有选择器的频道……但这对吗？

```
public final SelectionKey register(Selector sel, int ops,
                   Object att)
throws ClosedChannelException
{
if (!isOpen())
    throw new ClosedChannelException();
if ((ops & ~validOps()) != 0)
    throw new IllegalArgumentException();
synchronized (regLock) {
    if (blocking)
    throw new IllegalBlockingModeException();
    SelectionKey k = findKey(sel);
        if (k != null) {
            k.interestOps(ops);
    k.attach(att);
        }
    if (k == null) {
    // New registration
    k = ((AbstractSelector)sel).register(this, ops, att);
    addKey(k);
    }
        return k;
    }
} 
```

# python - 如何通过掩码过滤字符串中的符号？

> ID：15432044
> 
> 赞同：0
> 
> 时间：2013-03-15T12:06:39.333
> 
> 标签：python, regex

如何通过掩码过滤字符串中的符号？

例如，我有简单的字符串：

```
"tes!@#$%^&*(())___+t" "test1" "test3N" 
```

例如，如何删除不在“a-zA-Z”中的符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T12:08:52.700

简单，在正则表达式中使用否定字符类：

```
import re

re.sub('[^a-zA-Z]', '', inputstring) 
```

`[....]`表示一个字符类。通常，班级中的任何内容都匹配。通过在开始时添加`^`插入符号，您可以否定课程；任何*不在*课堂上的东西都匹配。

结果：

```
>>> import re
>>> re.sub('[^a-zA-Z]', '', '"tes!@#$%^&*(())___+t" "test1" "test3N"')
'testtesttestN' 
```

# mysql - 如何将此 MySQL 查询转换为 Django 查询？

> ID：15432049
> 
> 赞同：0
> 
> 时间：2013-03-15T12:06:47.467
> 
> 标签：mysql, django, django-queryset

我有一个这样的查询：

```
select files_id, count(DISTINCT shared_user_id) FROM fileupload_share GROUP BY files_id; 
```

我想在 Django 查询中进行转换。像这样尝试：

```
count = Share.objects.filter(users_id=request.user.id).values_list('shared_user_id').distinct().count() 
```

但没有按要求的输出给我一个组。我希望输出在列表中返回，例如

```
count = [1, 2, 3, 1] 
```

模型.py：

```
class Share(models.Model):
    users = models.ForeignKey(User)
    files = models.ForeignKey(File)
    shared_user_id = models.IntegerField()
    shared_date = models.TextField()

class File(models.Model):
    users = models.ForeignKey(User)
    file_name = models.CharField(max_length=100)
    type = models.CharField(max_length=10)
    source = models.CharField(max_length=100)
    start_date = models.TextField()
    time_overview = models.CharField(max_length=55)
    end_date = models.TextField()
    duration = models.TextField()
    size_overview = models.IntegerField()
    size = models.TextField()
    flag = models.TextField()
    flag_r = models.TextField() 
```

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:42:10.103

尝试这样的事情：

```
files = File.objects.filter(users_id=request.user.id).annotate(count=Count('share__shared_user_id') 
```

那么你应该有

```
for f in files:
    print f.file_name, f.count 
```

# php - php尝试上传文件：“没有这样的文件或目录”

> ID：15432050
> 
> 赞同：0
> 
> 时间：2013-03-15T12:06:50.413
> 
> 标签：php, upload

我想将文件上传到现有文件夹中`/media/images/avatars/`，但收到以下错误：`No such file or directory`. 我究竟做错了什么？如果这很重要，我正在使用 Ubuntu。

**这是我的代码：**

```
if (!empty($_FILES['file']['name']))
{
    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/gif")
      || ($_FILES["file"]["type"] == "image/jpeg")
      || ($_FILES["file"]["type"] == "image/png")
      || ($_FILES["file"]["type"] == "image/pjpeg"))
      && ($_FILES["file"]["size"] < 64000)
      && in_array($extension, $allowedExts))
    {
        if ($_FILES["file"]["error"] > 0)
        {
            echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
        }
        else
        {
            if (file_exists("/media/images/avatars/" . $_FILES["file"]["name"]))
            {
                echo $_FILES["file"]["name"] . " already exists. ";
            }
            else
            {
                move_uploaded_file($_FILES["file"]["tmp_name"],
                "/media/images/avatars/" . $_FILES["file"]["name"]);
            }
        }
        $ins['avatar'] = $_FILES["file"]["name"];
    }
    else
    {
        echo "Invalid file";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:14:54.993

> /media/images/avatars/ 是现有文件夹

我很确定你错了。尽管使用*文件系统*根目录的绝对路径，但
您很可能指的是*Web 服务器目录。*

 *因此，您必须在路径前添加*文档根*路径，您可以在`$_SERVER['DOCUMENT_ROOT']`配置良好的服务器上的变量中找到该路径*

# git - git reset --hard origin/master 是什么意思？

> ID：15432052
> 
> 赞同：312
> 
> 时间：2013-03-15T12:06:57.020
> 
> 标签：git, version-control, git-reset

我做了一个`git pull`并得到了一个错误：

> 以下工作树文件将被合并覆盖... 请在合并之前移动或删除它们。

为了解决这个问题，我做了以下事情：

```
git fetch
git reset --hard origin/master 
```

现在，当我这样做时`git pull`，它会说一切都是最新的。我想知道当我运行这些命令时到底发生了什么。我知道`git fetch`从远程存储库中获取更改而不将它们合并到我的本地存储库中。

是什么意思`git reset --hard origin/master`？它是如何工作的？

* * *

## 回答 #1

> 赞同：592
> 
> 时间：2013-03-15T12:17:04.137

```
git reset --hard origin/master 
```

说：扔掉我所有分阶段和非分阶段的更改，忘记我当前本地分支上的所有内容，并使其与`origin/master`.

在运行命令之前，您可能想问这个问题。通过使用与“硬重置”相同的词来暗示破坏性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-07-16T11:43:03.513

在较新版本的 git (2.23+) 中，您可以使用：

```
git switch -C master origin/master 
```

`-C`与 相同`--force-create`。相关[参考文档](https://git-scm.com/docs/git-switch#Documentation/git-switch.txt---force-createltnew-branchgt)

# html - 将 src="dataUrl" 的图像复制到 Office 应用程序

> ID：15432065
> 
> 赞同：3
> 
> 时间：2013-03-15T12:07:36.337
> 
> 标签：html, canvas, base64, data-url

如果图像使用数据 URL，则尝试将图像复制到剪贴板似乎无法正常工作。（在 IE9、Chrome 25.0.1364.152 上测试）

我似乎能够通过“Data-Url”图像进行绘画。粘贴到 Word/Excel 失败。除非使用粘贴特殊选项。

示例：[JsFiddle](http://jsfiddle.net/Dw9sD/2/)

尝试保存在画布元素上呈现的图像时，使用 Data-url 作为源是一种常见的情况。通过首先将图像保存到磁盘可以解决问题。有没有办法让这些图像直接复制到单词，而不是使用粘贴特殊选项？

检查 IE9 中的图像属性向我们展示：

```
Protocol: Unknown protocol
Type: Not Available
Size: Not Available 
```

而正常图像

```
Protocol: HTTP
Type: JPEG Image
Size: 12897 bytes 
```

我认为这些属性通常来自请求中的标头。有没有办法为 data-url 图像设置这些属性？我认为设置这些属性后应该可以直接粘贴到Word中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:43:13.457

在 MS Word 中，有一种方法，

对象>>插入对象>>新位图对象>>然后在新窗口中粘贴并关闭相同的，

工作方式与油漆相同，但在 word 中提供了选项，效果很好，

对于 Excel，我相信同样会起作用，

我希望这能满足您的需求。

在同一个应用程序中，您的工作将完成

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-20T12:40:45.653

让我以快捷键的形式总结一下 Lars 的回答：

1.  按`Ctrl + Alt + V`;
2.  用或键选择**位图；**`Up``Down`
3.  按`Enter`。

而已！

# android - 在 sqlite/android 中添加用户定义函数

> ID：15432069
> 
> 赞同：1
> 
> 时间：2013-03-15T12:07:48.423
> 
> 标签：android, android-ndk, user-defined-functions, android-sqlite

在 SQLlite/Android 中添加 UDF[如何将扩展加载到 SQLite？](https://stackoverflow.com/questions/6663124/how-to-load-extensions-into-sqlite/8322827#8322827)首先必须执行 sqlite3_enable_load_extension 以防止我在 myfunc.c 中进行的“未经授权的访问”

```
#include <sqlite3.h>
#include <jni.h>
#include <stdlib.h>

jstring
Java_com_test_abc_SQLiteOpenHelper_enableExtension(JNIEnv* env, jobject thiz, sqlite3 *db)
{
    sqlite3_enable_load_extension(db, 1); //errorline, without any infos
    return (*env)->NewStringUTF(env, "enableExtension done");
} 
```

爪哇

```
package com.test.abc;
....
public class MyOpenHelper extends SQLiteOpenHelper {
    ...
    @Override
    public void onOpen(SQLiteDatabase db) {
        super.onOpen(db);
        enableExtension(db);
    }
    public native String enableExtension(SQLiteDatabase db);
} 
```

没有成功。从 Java 到 C 的 JNI 调用永远不会回来，没有错误行它可以工作。有谁知道这里出了什么问题？最好的代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T16:13:16.323

从 Java 中，您可以获得使用 Android 集成 sqlite 库创建/初始化的 sqlite db。然后你将它传递给与你的自定义 sqlite 库一起工作的 jni 代码，它不是相同的版本，并且这个数据库连接没有用它初始化。即使它有效，您也可以在自定义 sqlib 上设置标志，而不是在 Android 集成库上设置标志。您必须一直使用您的自定义库，按照此处的说明更改包： [http ://www.sqlite.org/android/doc/trunk/www/index.wiki](http://www.sqlite.org/android/doc/trunk/www/index.wiki)

# ruby - 哪个是使用 selenium-webdriver 处理等待和睡眠之间错误的更好选择？

> ID：15432073
> 
> 赞同：0
> 
> 时间：2013-03-15T12:07:57.490
> 
> 标签：ruby, selenium-webdriver

我们有时使用`sleep(10)`或有时如下：

```
wait = Selenium::WebDriver::Wait.new(:timeout => 10) # seconds
element = wait.until { driver.find_element :name => "search" }
element = driver.find_element :name => "search" 
```

根据我的说法，`wait`我们设置了最大超时，在此期间，如果找到元素 ( `<10 seconds`)，我们将移至下一行，或者如果再次找不到，我们将移至下一行，但在 10 秒后，如我之前设置的那样。

但是`sleep()`我们必须等待程序必须等待`10 seconds`是否在该持续时间内加载了所需的元素。

两者通常用于`element not found`基本防止错误。

现在我的问题是——

*   *`wait`和 之间还有什么区别`sleep`吗？*

*   *哪一个更好的设计可以减少出错的机会？*

*   *有没有更好的实现来处理这种情况，我们可以`element not found`有效地处理这种错误而不会导致程序失败？*

***编辑***

对于最后一个问题，我发现了一个最小风险代码，如下所示：

```
while true

 # do nothing

next if !(driver.title.include? "Buyer Home")

 driver.find_element(:link, "search").click
 break

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:21:38.123

`wait.until`与`sleep`进入下一行不同。`wait.until`如果在指定的时间范围内未找到块（例如查找元素），则将引发异常。

这两种方法减少错误的机会相同。如果您的睡眠或超时设置为 30 秒并且页面需要 35 秒来加载元素，则两者都会遇到错误（尽管对于不同的行）。关键`wait.until`是，如果页面加载只需要 5 秒，您不必总是等待 30 秒。

我不确定哪种实现会比`wait.until`. 如果未找到该元素，则程序应该失败。立即失败而不是等到稍后运行依赖于该字段的某些东西时更有意义。

**更新**

根据评论，我会重写

```
while true
  # do nothing
  next if !(driver.title.include? "Buyer Home")

  driver.find_element(:link, "search").click
  break
end 
```

作为

```
wait = Selenium::WebDriver::Wait.new(:timeout => 10) # seconds
wait.until { driver.title.include? "Buyer Home" }
driver.find_element(:link, "search").click 
```

# jquery - 更改段落中随机字母的颜色

> ID：15432075
> 
> 赞同：4
> 
> 时间：2013-03-15T12:08:04.013
> 
> 标签：jquery, css, arrays, each

我想在单击按钮时将段落中某些随机字符的颜色更改为红色。请找到我的代码。我在这方面有一些错误。

```
$('input').click(function(){

   var para = $('#para');
   var position = Math.floor(Math.random()*100);
   var character = [];

   var i=0
   while ( i <= 30 )
   {
      character[i] = para.html().substr(position*(i+1), 1);
      i++;
   }

   $.each(character, function() {
     character.css('color','red');
   });

}); 
```

首先，我创建了一个数组，其中包含段落中的 30 个随机字母。接下来，我曾经`each()`遍历数组中的每个元素以应用 css 属性。但是在控制台窗口中弹出一个错误说对象没有方法'css'

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:17:13.717

首先，CSS 方法仅适用于 jquery 对象。您在字符数组中有字符串。css 方法不适用于字符串。

其次，您的每个方法都写错了。应该是这样的

```
$.each(character, function(index, value) {
    // Do something
}); 
```

对于您的问题陈述，更改字符串中某些随机字符的颜色。这是[小提琴](http://jsfiddle.net/blunderboy/XdRRG/1/)。试试这个。

这是代码：

```
$('input').click(function(){

var para = $('#para');
var charArray = $('span', para);

// case: No span (Initial String)
if (charArray.length === 0) {
    var html = para.html();
    var newArr = [];
    var len = html.length;
    for (var i=0; i<len; i++) {
        newArr.push('<span>' + html[i] + '</span>');
    }
    html = newArr.join('');
    para.html(html);
    charArray = $('span', para);
}

// Reset all spans
$.each(charArray, function(i, value) {
    value.style.color = '';
});

var paralen = charArray.length;

for (var i=0; i<30; i++) {
    var pos = Math.floor(Math.random()*100);
    pos = pos % paralen;
    charArray[pos].style.color = 'red';
}

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:21:29.237

您需要查看[$.each](http://api.jquery.com/jQuery.each)的文档。一个可能的解决方案：

```
$('input').click(function() {

    var $para = $('#para');
    var position = Math.floor(Math.random()*100);
    var character = [];

    for ( var i=0; i <= 30; i++ ) {
        character[i] = $("<span>" + $para.text().substr(position*(i+1), 1) 
                                  + "</span>");
        character[i].css('color', 'red');
    }

    $para.empty();

    $.each(character, function(idx, val) {
        $(val).appendTo($para);
    });
}); 
```

# php - 覆盖父类和子类之间的受保护变量

> ID：15432077
> 
> 赞同：0
> 
> 时间：2013-03-15T12:08:11.157
> 
> 标签：php

```
abstract class BaseController
{
    protected $arctica, $database, $content, $cacheTime;

    function __construct($arctica)
    {
        $this->arctica = $arctica;
        $this->config = $arctica->config;
        $this->database = $arctica->database;
    }

class Controller extends BaseController
{
    protected $cacheTime = 2;
    protected $database = 'override'; //trying to override database var

    function __construct($arctica)
    {
        parent::__construct($arctica);
    }

    function Run()
    {
                    var_dump($this->database); //A class instance, not string('override')
        $this->load('homepage');
    }
} 
```

我想问一些关于这门课的事情。

**Q1：**如果我想到达`$database variable of child class`，我该如何到达？

**Q2：**我怎样才能确保`$database variable in parent class`不能被子类改变/覆盖，即使是在自己？（$database 应该是一个保持数据库实例的常量，因此 Controller 子级不应该触摸它。）现在就是这样，但我不知道为什么。

**Q3：**如何为我创建的变量添加更多参数？就像受保护的 $var `protected const $var`对我来说更有意义。它只是 PHP 不支持，还是 OOP 根本不支持？（也许它受支持，我不知道如何？）

**Q4：**如果我在父类中定义了一个方法，我可以不使用$this来访问它吗？喜欢`load('homepage')`。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:15:51.320

`$arctica`您的代码从对象中取出数据库信息。那里的信息被使用，既不是抽象类中的受保护变量，也不是扩展类。

如果您希望受保护的变量继续存在，您必须创建自己的版本`__construct()`来更改它。大概是这样的：

```
public function __construct($arctica) {
    parent::__construct($arctica);
    $this->database = "override";
} 
```

Q1：你确实达到了。

Q2：不可能使用受保护的变量强制执行。只需不要编写执行此操作的代码。您可以使用 getter 和 setter 来实现此目的。

Q3：PHP 不支持这个。

Q4：不。如果在对象内部使用 PHP 总是需要`$this`在它自己的实例上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:13:34.943

> Q1：如果我想访问子类的 $database 变量，我该如何访问它？

如果已声明`protected`，则可以`$this->database`从父级或子级访问它。

如果是`private`，您可以通过 访问它`$this->database`，但只能从父级访问。

> Q2：如何确保父类中的 $database 变量不能被子类更改/覆盖，即使在自己中？

你可以声明它`private`。但是，在我看来，使用`private`是一种代码味道。您应该将它们设为两个独立的类，并通过组合将它们组合起来。

> Q3：如何为我创建的变量添加更多参数？

不明白你的意思。

> Q4：如果我在父类中定义了一个方法，我可以不使用$this来访问它吗？像加载（'主页'）。

你不能。这就是 PHP 的工作原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:17:08.767

**A1** :`BaseController`无法访问其子类的属性。`BaseController`甚至不知道它有孩子。您可以制作它`abstract`并强制其子级实现 getter，以便`BaseController`可以通过 getter 访问属性值。

**A2** : 使`database`只能`BaseController` `private`访问`BaseController`它。然后定义一个受保护的getter，`BaseController`以便子类可以`database`通过getter而不是直接访问。

**A3**：PHP 没有像`final`Java 那样的关键字。PHP 知道该关键字`const`，但这与“一次编写后不再编写”具有不同的含义。查找手册`const`。

**A4** : 不，又是语言限制。没有`$this`PHP 就不会知道你想要访问一个方法或属性。您可能想要访问全局函数或局部变量（将被创建）。

# mysql - mysql 每周日活动安排

> ID：15432079
> 
> 赞同：4
> 
> 时间：2013-03-15T12:08:17.020
> 
> 标签：mysql

您好我正在尝试在 Mysql 上创建活动时间表并将其设置为每周日 00:00 工作

```
CREATE
    EVENT `reset_column`
    ON SCHEDULE EVERY 1 WEEK STARTS '2013-03-17 03:00:00'
    DO BEGIN

    END */$$
DELIMITER ; 
```

这行得通，但我只想找到另一种方法来告诉它在每周开始时准确地执行（例如每个星期天的时间表）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T12:54:01.960

```
ON SCHEDULE
  EVERY 1 WEEK
  STARTS CURRENT_DATE + INTERVAL 6 - WEEKDAY(CURRENT_DATE) DAY 
```

# asp.net - 如何在 asp.net.vb 中提交按钮？

> ID：15432082
> 
> 赞同：2
> 
> 时间：2013-03-15T12:08:24.480
> 
> 标签：asp.net, vb.net

我目前正在学习在 asp.net 中编程，我正在写信寻求以下问题的帮助：

我正在尝试执行以下连接，但是当我单击浏览器中的连接按钮时，没有任何反应。

**aspx.vb 代码：**

```
 Imports System.Data
  Imports System.Data.SqlClient
  Imports System.Configuration

Partial Class _Default
Inherits System.Web.UI.Page

' Public Sub Button1(ByVal sender As Object, ByVal e As System.EventArgs)
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim connectionString As String
    Dim connection As SqlConnection
    connectionString = ConfigurationManager.ConnectionStrings("SQLDbConnection").ToString
    connection = New SqlConnection(connectionString)
    Try
        connection.Open()
    Catch ex As Exception
        MsgBox("Not working")
    End Try
    If connection.State = 1 Then
        MsgBox(" working")
    End If
End Sub
End Class 
```

asp.net 代码：

```
 <%@ Page Language="VB" AutoEventWireup="false" CodeFile="Default.aspx.vb" Inherits="_Default" %>

  <!DOCTYPE html>

  <html xmlns="http://www.w3.org/1999/xhtml">
  <head id="Head1" runat="server">
  <title></title>
  </head>
 <body>
  <form id="form1" runat="server">
  <div>
    <asp:Button ID="Button1" runat="server" Text="Button"  />

 </div>
 </form>
 </body>
</html> 
```

我尝试在 asp.net 代码中添加“Onclick =”submit”，但它一直出现错误。
非常感谢您的帮助。感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T12:11:21.803

有两种方法可以连接此按钮事件。第一个将通过修改您的签名以添加`Handles`关键字在代码后面：

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click 
```

第二个将在 html 端通过定义要分配给函数本身的 onClick 事件

```
<asp:Button ID="Button1" runat="server" Text="Button" onClick="Button1_Click" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:16:59.400

[**只需使用Handles**](http://msdn.microsoft.com/en-us/library/6k46st1y%28v=vs.80%29.aspx)像这样修改您的 VB.Net 代码：

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
     ' Your code here
End Sub 
```

# performance - Grails 应用程序分析和性能调优

> ID：15432084
> 
> 赞同：2
> 
> 时间：2013-03-15T12:08:26.347
> 
> 标签：performance, tomcat, grails, profiling

我目前在 Tomcat 上运行的 Grails 应用程序存在一些性能问题。在单页加载期间，我看到 java 进程的 CPU 使用率相当高（大约 20%），我担心这不会很好地扩展。

我看过 Java Melody 和 Grails Profiler 插件。然而，这些工具似乎只告诉我我已经知道的——哪些页面的加载速度比其他页面慢。

我还检查了与 MySQL 的连接数，虽然有很多查询，但它们似乎几乎是立即执行的。此外，MySQL 进程从未出现在使用任何有意义的 CPU 时间的顶部，所以我不认为这是减速的根源。

我需要知道的是我的代码中的哪些方法或函数运行时间最长，以便我可以评估它们以查看它们是否可以重写。到目前为止，我已经尝试手动禁用页面的某些部分来测试加载时间。但是，如果有一个工具可以帮助我指出有问题的代码，那就容易多了。有这样的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:37:49.737

You should not do performance testing in development mode (if you want to test production mode performance).

It's recommended to do performance testing in the appserver container you will be using for production (for example Tomcat).

If you really want to do quick performance testing, you can use the "grails prod run-war" command to do it. In that case you will have to add Grails JVM parameters to BuildConfig.groovy file

```
grails.tomcat.jvmArgs = ["-server", "-noverify", "-Xms512m", "-Xmx1024m", "-XX:PermSize=96m", "-XX:MaxPermSize=256m", "-Djava.net.preferIPv4Stack=true"] 
```

Start Grails in production mode with this command

```
grails prod run-war 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:30:00.443

我会推荐带有 tc 服务器的 SpringSource InSight

[http://www.springsource.org/insight](http://www.springsource.org/insight)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:12:34.980

我在 tomcat 上的 grails 应用程序也有类似的问题。所以我回到了码头——码头似乎效果更好。

根据新的 gails 发布信息，他们修复了一些 tomcat 问题，因此项目升级也可以解决您的问题。

*   [http://grails.org/doc/2.1.3/guide/introduction.html#whatsNew21](http://grails.org/doc/2.1.3/guide/introduction.html#whatsNew21)
*   [http://www.eclipse.org/jetty/](http://www.eclipse.org/jetty/)

# .net - 从浏览器可靠地检测 .NET Framework 可用性/版本

> ID：15432091
> 
> 赞同：1
> 
> 时间：2013-03-15T12:08:39.730
> 
> 标签：.net, browser

我知道为什么这可能是不可能的，而且我知道 BrowserHawk 和 minimumdotnet.com，它们显然都依赖于 IE 的用户代理，但我还是会问，因为 SO 是最大的智囊团，我非常需要。

有什么方法*可以通过浏览器*检测 Windows 客户端上安装了哪些 .NET Framework（如果有）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:11:03.453

如您所知，仅当浏览器在用户代理字符串中专门提供它时。据我所知，唯一能做到这一点的浏览器是 Internet Explorer（可能还有一些模仿 IE 的机器人），在任何其他情况下你都不能依赖它。

# javascript - event.pageX - this.offsetLeft = -1 in chrome 如果边距为 0 auto

> ID：15432096
> 
> 赞同：1
> 
> 时间：2013-03-15T12:09:04.597
> 
> 标签：javascript, css, google-chrome, margin

我想在画布上获取鼠标坐标，该坐标位于中心。

如果身体宽度是均匀的，它可以按预期工作，否则我可以得到 -1 作为结果。

看看这个：

![-1 结果](../Images/a1117c59c360c0567580b94524f064fc.png)

（箭头代表光标） [http://jsbin.com/ibumar/1/](http://jsbin.com/ibumar/1/)

原因可能与四舍五入有关。你会建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T17:56:00.563

如果我检查过`this.getBoundingClientRect().left`，我发现它可以有一半的价值，比如： `0.5`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T12:43:46.040

我认为这与Chrome有关。我使用 Firefox（在 Ubuntu 中），我没有遇到问题。我放大了一点，我仍然无法得到它（错误）。在 Chrome 中我试过了，它也向我展示`-1`了。

控制台输出 Chrome：（最接近）

```
e.pageX   this.offsetLeft
912       913 
```

控制台输出 Firefox：（最接近）

```
913       913 
```

# java - ognl 'in' 语句未按预期运行

> ID：15432098
> 
> 赞同：1
> 
> 时间：2013-03-15T12:09:09.740
> 
> 标签：java, struts2, ognl

我有以下代码：

```
<s:iterator value="primaryDataSources" var="includedPrimaryDataSource">
    <s:property value="%{includedPrimaryDataSource in primaryDataSources}"/>
</s:iterator> 
```

primaryDataSources 是在我的操作类中初始化的 ArrayList：

```
List<String> primaryDataSources = new ArrayList<String>(Arrays.asList(new String[]{"SE", "QBP", "Olympic", "J&B"})); 
```

当我像这样单独输出 primaryDataSources 时：

```
 <s:property value="%{primaryDataSources}"/> 
```

它输出 [SE, QBP, Olympic, J&B]

我希望'in' ognl 语句总是返回真，但它总是假的......知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:16:01.707

您缺少`#`引用您的`includedPrimaryDataSource`,标签`%{...}`内也不需要。`<s:property>`

```
<s:iterator value="primaryDataSources" var="includedPrimaryDataSource">
    <s:property value="#includedPrimaryDataSource in primaryDataSources"/>
</s:iterator> 
```

# c# - 在 Nhibernate 中使用本机 SQL Server 函数？

> ID：15432100
> 
> 赞同：0
> 
> 时间：2013-03-15T12:09:32.763
> 
> 标签：c#, .net, sql, linq, nhibernate

我正在构建一个通过 Nhibernate 查询数据库的 WPF 应用程序。

我有一个 SQL Server 数据库，其中有一个表`xuser`，其中有一个`xflag`存储用户权限的标志 ()。

现在我有这个 SQL 查询来提取超级用户或管理员：

```
select * 
from xuser 
where (CONVERT(int,xflag) & 2 > 0 ) or (CONVERT(int,xflag) & 1 > 0 ) 
```

在哪里`2 = flag_administrators`和`1 = flag_superusers`

如果没有 SQL 函数`CONVERT`，此查询将无法正常工作并出现错误：

> *数据类型 numeric 和 int 在 '&' 运算符中不兼容。*

现在在我的 WPF c# nhibnernate 应用程序中，我查询：

```
var xadmins= session.Query<Xuser>()
                    .Where(p => (p.Xflag & (int)Flag.FLAG_SUPERUSER)>0).ToList<string>(); 
```

此查询不适用于相同的 SQL 错误。

我想在这个 Linq2Nhibernate 查询中使用 T-SQL 函数。我怎样才能做到这一点？

最大的问题是这个应用程序必须使用方言`MsSql2008`或`Oracle`方言。如果我`Convert`在这里使用函数，当我将 db 更改为 时`Oracle`，此函数会出错。最好的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T00:09:43.750

您可以将 xflag 的映射指定为公式，以便将其转换为 int，即

```
<property name="Xflag" formula="CONVERT(int,xflag)"/> 
```

或者对于 Fluent NHibernate

```
Map(x => x.Xflag).Formula("CONVERT(int,xflag)"); 
```

然后，您可以使用您的表达式来获取所有超级用户而无需演员：

```
var xadmins= session.Query<Xuser>()
                .Where(p => (p.Xflag & Flag.FLAG_SUPERUSER)>0).ToList<string>(); 
```

当然，这具有特定于 SQL Server 的缺点。要使这适用于 Oracle，您需要使用映射：

```
<property name="Xflag" formula="to_number(xflag)"/> 
```

为了解决这个问题，可以在两个数据库中创建一个用户定义的函数来执行转换，这样映射就会变成：

```
<property name="Xflag" formula="xflag_conversion(xflag)"/> 
```

Oracle UDF 类似于以下内容。

```
CREATE FUNCTION xflag_conversion(xflag IN CHAR) 
  RETURN NUMBER 
   BEGIN  
  RETURN(to_number(xflag)); 
END; 
```

SQL Server UDF 将是：

```
CREATE FUNCTION xflag_conversion (@xflag CHAR)
  RETURNS INT
  AS
  BEGIN
    RETURN CONVERT(int,xflag)
  END 
```

但不保证 UDF 的准确性，因为我没有测试过它们。

最后，这里有一个您可能感兴趣的关于查询标志信息的相关问题：[How to query flags stored as enum in NHibernate](https://stackoverflow.com/questions/2805661/how-to-query-flags-stored-as-enum-in-nhibernate/5989231#5989231)。

# prolog - 回溯时自动撤回的 Prolog 数据库

> ID：15432101
> 
> 赞同：5
> 
> 时间：2013-03-15T12:09:33.000
> 
> 标签：prolog

是否有任何支持可伸缩数据库的 Prolog 实现？我的意思是当序言引擎通过该谓词调用回溯时，数据库会自动撤回由 assert() 谓词调用插入的事实？换句话说，我希望在回溯时“自动”隐式撤回。

类似的东西可以表示为

```
my_assert(Fact):- assert(Fact).
my_assert(Fact):- retract(Fact), fail. 
```

但这在通过切割回溯时无法正常工作（！）

或者可以使用 Prolog 的“表格”风格以某种方式实现这个目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:05:26.243

我不知道任何原生支持您想要的 Prolog 实现。[您可以在setup_call_cleanup/3](http://www.swi-prolog.org/pldoc/man?predicate=setup_call_cleanup/3)之上使用延续传递样式实现类似的东西：

```
% assert Fact while seeking Goal then retract Fact
assert_then(Fact, Goal) :-
  setup_call_cleanup(assert(Fact), Goal, retract(Fact)).

:- dynamic whom/1.
example :-
    assert_then(whom(world), hello).
hello :-
    whom(Whom),
    format('Hello ~w~n', [Whom]). 
```

这有点难看，但应该与回溯、异常和剪切一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:35:57.753

这个库可能对你有用[https://github.com/tef/nomads](https://github.com/tef/nomads)

它使用各种 prolog 术语重写技巧来模拟向所有包含断言事实的谓词添加附加参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-07T00:05:05.473

在 SWI-Prolog 中，可**回溯的断言**可以使用内置的谓词来实现[`undo/1`](https://www.swi-prolog.org/pldoc/doc_for?object=undo/1)：

```
b_assertz(Term) :-
    assertz(Term, Ref),
    undo(erase(Ref)). 
```

**没有**剪切的例子：

```
?- between(1,2,X), b_assertz(p(X)), between(3,4,Y), b_assertz(p(Y)), listing(p).
:- dynamic p/1.

p(1).
p(3).

X = 1,
Y = 3 ;
:- dynamic p/1.

p(1).
p(4).

X = 1,
Y = 4 ;
:- dynamic p/1.

p(2).
p(3).

X = 2,
Y = 3 ;
:- dynamic p/1.

p(2).
p(4).

X = 2,
Y = 4.

?- p(X).
false. 
```

**切割**示例：

```
?- between(1,2,X), b_assertz(p(X)), !, between(3,4,Y), b_assertz(p(Y)), listing(p).
:- dynamic p/1.

p(1).
p(3).

X = 1,
Y = 3 ;
:- dynamic p/1.

p(1).
p(4).

X = 1,
Y = 4.

?- p(X).
false. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-19T13:16:19.933

Necro，但我有同样的问题，我尝试了 nb_setval 和 b_setval 的组合。它似乎适用于更简单的情况，但我还没有在更难的情况下进行测试。主要区别在于您不能直接查询 b_assert'ed 事实，而必须使用 b_query。

```
:- dynamic b_asserted/2.

:- nb_setval(b_assert_nbc, 0), nb_setval(b_assert_bc, 0).

b_assert(What):-
    b_assert_maintain_consistency,
    b_getval(b_assert_nbc, NBC),
    AssertId is NBC+1,
    assert(b_asserted(AssertId, What)),
    nb_setval(b_assert_nbc, AssertId),
    b_setval(b_assert_bc, AssertId).

b_query(What):-
    b_assert_maintain_consistency,
    b_asserted(_, What).

% The overhead
b_assert_maintain_consistency:-
    nb_getval(b_assert_nbc, NBC),
    b_getval(b_assert_bc, BC), % BC < NBC if backtracking happened
    b_assert_restore_consistency(BC, NBC).

b_assert_restore_consistency(C, C):- !.
b_assert_restore_consistency(BC, NBC):-
    BC1 is BC+1,
    (between(BC1, NBC, DeleteMe), retract(b_asserted(DeleteMe, _)), fail; true),
    nb_setval(b_assert_nbc, BC). 
```

如果这可行，奖金将是找出 b_retract。也许我们 b_assert(b_retracted(What)) 并在 b_query 中重放断言和撤回？

# boost - 如何使用 listS 作为顶点容器为提升图创建 PropertyMap？

> ID：15432104
> 
> 赞同：3
> 
> 时间：2013-03-15T12:09:38.417
> 
> 标签：boost, boost-graph

我有一个提升图定义为

```
typedef boost::adjacency_list<boost::setS, boost::listS,
        boost::undirectedS, CoordNode, CoordSegment> BGraph;
typedef boost::graph_traits<BGraph>::vertex_descriptor  VertexDesc;
BGraph _graph; 
```

我想知道同一个图的连通分量

```
 int num = boost::connected_components(_graph, propMap); 
```

我已经尝试使用创建所需的可写属性映射（propMap）

```
typedef  std::map<VertexDesc, size_t> IndexMap;
IndexMap mapIndex;
boost::associative_property_map<IndexMap> propMap(mapIndex);
VertexIterator di, dj;
boost::tie(di, dj) = boost::vertices(_graph);
for(di; di != dj; ++di){
    boost::put(propMap, (*di), 0);
} 
```

但这不起作用；我得到编译错误。

如果顶点容器是 vecS，它会更容易，因为一个简单的数组或向量就足够了。但是，如果我将 listS 作为顶点容器，我应该将什么传递给这个函数？

如何创建必要的可写属性映射？有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-05T07:19:46.460

作品！

```
typedef boost::adjacency_list
    <boost::setS, boost::listS,
        boost::undirectedS, 
        boost::no_property,
        boost::no_property> Graph;
    typedef boost::graph_traits<Graph>::vertex_iterator VertexIterator;
    typedef boost::graph_traits<Graph>::vertex_descriptor   VertexDesc;
    typedef std::map<VertexDesc, size_t> VertexDescMap; 

Graph graph;

...

VertexDescMap idxMap;
boost::associative_property_map<VertexDescMap> indexMap(idxMap);
VertexIterator di, dj;
boost::tie(di, dj) = boost::vertices(_graph);
for(int i = 0; di != dj; ++di,++i){
    boost::put(indexMap, (*di), i);
}

std::map<VertexDesc, size_t> compMap;
boost::associative_property_map<VertexDescMap> componentMap(compMap);            
boost::associative_property_map<VertexDescMap>& componentMap;

boost::connected_components(_graph, componentMap, boost::vertex_index_map(indexMap)); 
```

# stringtemplate - StringTemplate4 :: 模板调用内的模板调用

> ID：15432109
> 
> 赞同：1
> 
> 时间：2013-03-15T12:10:08.220
> 
> 标签：stringtemplate, stringtemplate-4

我试图调用一个模板，将调用另一个模板的结果作为参数传递，但我似乎无法让它工作。这是一个缩小范围的示例：

文件中的以下模板组：

```
echo(foo) ::="<foo>"
boo() ::= << <echo("zoo")> >> 
```

使用以下 Java 代码调用时：

```
STGroup stg = new STGroupFile("thefile.stg");
ST boo = stg.getInstanceOf("boo");
System.out.println(boo.render()); 
```

按预期生产**动物园。**

但是，当我尝试用返回相同的模板替换**“动物园”文字时，** **ST**在解析期间抱怨：

### 不起作用：

```
echo(foo) ::="<foo>"
zoo() ::= "zoo"
boo() ::= << <echo( <zoo()>  )> >> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:46:48.363

代替：

```
boo() ::= << <echo( <zoo()> )> >> 
```

利用：

```
boo() ::= << <echo(zoo())> >> 
```

似乎 < > 只需要在调用外部模板的地方使用一次。

# apache - 尝试密码保护 .htaccess 文件时出错

> ID：15432113
> 
> 赞同：-1
> 
> 时间：2013-03-15T12:10:22.077
> 
> 标签：apache

仅出于测试目的，我正在尝试在 localhost 上对我的 .htaccess 文件进行密码保护。
我使用放置在以下位置的在线工具生成了一个 .htpasswd 文件

我的 .htaccess 文件位于-->

```
wamp/www/magentocustmod/.htaccess 
```

有以下内容-->

```
AuthName "Restricted Area" 
AuthType Basic 
AuthUserFile /mypass/.htpasswd
require valid-use 
```

但是当我运行 localhost/magentocustmod 时，在给出正确的用户名和密码后，我会弹出一个询问密码和用户名的窗口，消息来了

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 admin@localhost 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T13:11:48.513

最后它对我有用 .htaccess 文件中的代码如下。

```
AuthName "Restricted Area" 
AuthType Basic 
AuthUserFile /wamp/www/mypass/.htpasswd    
require valid-user 
```

保存文件时请记住正确保存文件，否则这些文件将保存为 .htaccess.txt 和 .htpasswd.txt。

谢谢

# c# - 如何创建一个列表 来自列表的组件 物品？

> ID：15432120
> 
> 赞同：1
> 
> 时间：2013-03-15T12:10:37.147
> 
> 标签：c#, struct

我创建了一个结构：

```
 public struct ProductShortInfo
            {
                public Guid Id { get; set; }

                public string Code { get; set; }

                public string Name { get; set; }

                public string PhotoUrl { get; set; }

                public string DownloadUrl { get; set; }
            }

public string PopulateStruct()
{
    List<ProductShortInfo> productShortData;

    using (SomeService service = new SomeService())
    {
         productShortData = service.populateShortData();
    }

    List<Guid> guidsFromProductShortData = //NEED SOLUTION
} 
```

我想隔离返回的 ID 以供稍后在列表中使用，但我无法找出正确的方法。我真的不认为 foreach 循环是一种非常优雅的方式。可能有一个内置的方法可以做到这一点。

编辑：不到 5 分钟后找到了解决方案。林克。

列出 productShortDataIds = (从 productShortData 中的数据中选择 datas.Id).ToList();

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T12:12:26.763

您可以使用 LINQ[投影](http://msdn.microsoft.com/en-us/library/bb548891.aspx)结构列表：

```
List<Guid> guids = productShortData.Select(p => p.Id).ToList(); 
```

# html - 9 岁儿童的网站创建选项

> ID：15432122
> 
> 赞同：6
> 
> 时间：2013-03-15T12:10:43.637
> 
> 标签：html, css

我 9 岁的女儿刚刚告诉我，她正在开发一个网站来消除全球变暖。她招募了几个学校的朋友加入团队，正在游说动物园使用他们的一只企鹅作为吉祥物，并刚刚为该网站注册了一个域名。

好吧，我对这项技术了解一点，但不想与创意设计方面和实现它的 HTML/CSS 有任何关系（除了说“亲爱的，这看起来很棒！”）。

有什么适合年龄的廉价软件来创建 HTML/CSS 的建议吗？一个选项是 wordpress 之类的东西，但是，它带来了一堆我可能不想要的包袱。或者可能是其他一些应用程序，它只创建基本的 HTML 和 CSS，我可以将它们合并在一起。我想她现在不想学习 HTML，只是制作漂亮的图片。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:32:19.177

这真的取决于项目。但是当我想到一个 9 岁的孩子时，我会尽可能简单。

甚至像 Joomla 和 Wordpress 这样的 CMS 也会提供太多的选择。

在这种情况下，您可以尝试使用 Google 协作平台 ( [https://sites.google.com/](https://sites.google.com/) )。编辑和创建站点非常容易，几乎不需要预知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:34:04.590

Microsoft FrontPage、CoffeeCup 视觉网站设计师、Web Easy Professional

但很难推荐给一个 9 岁的孩子。可以试试[约拉](https://www.yola.com/)

# c - 在 free() 之后使用指针

> ID：15432123
> 
> 赞同：6
> 
> 时间：2013-03-15T12:10:47.820
> 
> 标签：c, linux

在我的测试中，我发现可以在 free() 之后使用指针。我有以下代码：

```
typedef struct{

    int module_id;
    int adc_id;
    struct config_line * pnext;

} config_line;
config_line * create_list()
{

config_line * phead = (config_line *) malloc(sizeof(config_line));
phead->pnext=NULL;
phead->module_id = 1;
phead->adc_id = 2;

printf("module_id=%d adc_id=%d\n",phead->module_id, phead->adc_id);

free(phead);

printf("module_id=%d adc_id=%d\n",phead->module_id, phead->adc_id);

phead->module_id = 2;
phead->adc_id = 5;

printf("module_id=%d adc_id=%d\n",phead->module_id, phead->adc_id);
} 
```

这段代码的输出是：

```
module_id=1 adc_id=2
module_id=0 adc_id=2
module_id=2 adc_id=5 
```

为什么在 free(phead) 之后我可以访问（读取和写入）指针？为什么没有分段错误？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-15T12:12:49.160

因为使用无效指针会调用未定义的行为。这意味着行为是......嗯......***未定义。***它没有**义务**崩溃。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-15T12:14:39.860

当您调用时，指向`free(phead)`的内存正在被释放，但 的值保持不变，从而使指针*悬空*。访问已释放的内存会产生**未定义的行为**。`phead``phead``phead`

 ***`NULL`释放指针指向的内存后，分配给指针是一个好习惯：

```
free(phead);
phead = NULL; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-15T12:16:19.753

因为内存仍然映射到您的进程中，但没有分配。C 程序中有两个级别的内存管理：首先，内核为您提供可以写入的页面。如果进程需要更多已映射的内存，则必须从内核（sbrk）请求更多。虽然这是大块的，所以 malloc 为你将它分成块，根据需要请求更多的页面，但尽可能使用已经分配给程序的内存。free 不能返回页面，直到所有使用它的分配都被释放。

所以，内核给你的内存访问违规（SIGSEGV）是相当粗略的，并且不能拾取大多数内存错误，只有从内核的角度来看是致命的事情。您可以随意丢弃 malloc 的跟踪数据，在大多数分配结束后和多次释放后阅读，等等。

不过，永远不要犯内存错误。使用非常严格的 VM 使用 valgrind 运行您的应用程序，以检查所有错误并立即压缩它们。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-15T12:31:46.293

为什么鸡头被砍掉了还能继续乱跑乱跳？请注意，这并不*总是*发生。有些鸡可能会立即停止移动，而[另一些鸡可能会继续奔跑数月](http://en.wikipedia.org/wiki/Mike_the_Headless_Chicken)。当它发生时，它发生是因为它发生了。这是否意味着我们应该砍掉我们的宠物的头？

就像砍掉我们的宠物的头一样，使用已释放的内存是个坏主意。这并不意味着它会产生负面结果；您的程序可能会继续在您的机器上按预期运行，而`if (fubar)`（其中*fubar*是您的无效指针）可能足以导致您的程序在*其他*实现上出现故障。

实现定义（或不​​定义）行为的这种想法自由正式称为*未定义行为*；行为是未定义的，因为 C 标准，一组规定 C 实现应该如何表现的文档，*没有定义行为*。因此，就像砍掉我们的宠物的头一样，我们应该避免*所有*未定义的行为。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-15T13:10:18.527

因为释放内存（指针）只是将该内存放回空闲内存池中。内存不仅会消失，它的内容也不会被清除，直到再次分配并写入该内存。

因此，在内存被释放后访问内存是非常有可能的。就像您想象的那样不是一个好主意，因为它可以随时分配和修改。***

# html5-canvas - 放入容器后如何隐藏笔划

> ID：15432125
> 
> 赞同：0
> 
> 时间：2013-03-15T12:10:50.040
> 
> 标签：html5-canvas, kineticjs

我有一个关于突出显示图像的问题。当我单击图像时，笔触样式必须可见，当我将光标移离图像时，笔触样式必须不可见。 [我用这个代码作为参考](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/) 在这个例子中，你能解决吗？我可以隐藏锚点，但我不能隐藏笔画。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:26:16.180

不需要时将描边颜色设置为透明。

```
 var anchor = new Kinetic.Circle({
      stroke: 'transparent',
      ...

    anchor.on('mouseover', function() {
      this.setStroke('#666');
      ...

    anchor.on('mouseout', function() {
      this.setStroke('transparent');
      ... 
```

# ios - ios 中 Facebook SDK 3.2 中的注销问题

> ID：15432126
> 
> 赞同：1
> 
> 时间：2013-03-15T12:10:50.143
> 
> 标签：ios, facebook

我在我的 iphone 应用程序中使用 Facebook SDK 3.2，我使用 FBLoginView 从 Facebook 登录和注销。和两个按钮：第一个在用户的墙上发布内容，第二个在朋友的墙上发布内容。在这两个中我都在使用 FBWebDialog。当用户启动应用程序登录页面打开（在 safari 中）并且一切正常。

但我面临以下问题：

如果用户想使用另一个 facebook id 登录，则没有选项可以这样做，第一个用户必须从他在 safari 中的第一个 facebook 帐户注销，当他返回应用程序时，用户才会获得 Facebook 登录页面登录再次。

当用户点击 FBLoginView 时，它将打开 safari，但在点击 loginView 后，如果用户想在不登录的情况下返回应用程序，则没有选项可以这样做。

在发布操作时，我使用的是 FBWebDialog，如果我没有登录并尝试打开 FBWebDialog，那么在对话框中它会显示 Facebook 登录页面首先登录，但在输入 Facebook 的用户信息和密码后，它会显示一条消息“发生错误。请稍后再试。” 在对话框中，如果我们点击“确定”按钮，它会显示用户已登录，但不会显示共享内容的页面。真是奇怪的行为。

任何帮助将不胜感激。

# actionscript-3 - 通过引用传递在 actionscript 中不起作用

> ID：15432131
> 
> 赞同：0
> 
> 时间：2013-03-15T12:11:03.247
> 
> 标签：actionscript-3

我将对象传递给一个类并对对象进行一些更改，但实际对象保持不变。

例如：

```
public class Xclass
{
   public var counter:int=1;
}

private function mymethod(x:Xclass):void
{
   x.counter = 10;
} 
```

从这个方法出来后，计数器的值仍然是 1 而不是 10。

我的代码有什么问题吗？或者是否有任何其他方式通过引用传递对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:21:01.600

它在 AS3 中工作正常，看看下面的代码：

主类：

```
package
{
    import flash.display.Sprite;

    public class TesteCake extends Sprite
    {
        public function TesteCake()
        {
            var xclass:XClass = new XClass();
            trace(xclass.getCounter());

            changeCounterXClass(xclass);
            trace(xclass.getCounter());
        }

        private function changeCounterXClass(xclass:XClass):void{
            xclass.setCounter(10);
        }
    }

} 
```

它是 XClass.as （这个类在其他 .as 文件中）

```
package
    {
        public final class XClass
        {
            private var counter:int = 1;

            public function setCounter(value:int):void{
                counter = value;
            }

            public function getCounter():int{
                return counter;
            }
        }
    } 
```

我希望这可以帮助你！

# c++ - 在 OpenCV 中确定图像的数据类型

> ID：15432134
> 
> 赞同：0
> 
> 时间：2013-03-15T12:11:09.777
> 
> 标签：c++, opencv

我正在读取 Ipl 格式的图像，然后将其转换为 Mat 格式。然后我尝试显示图像的行数、列数、通道数和深度。前三个的结果与预期的一样，但是深度的结果是：

代码行：cout<<" "<<"深度="<

结果：深度 = 0

谁能告诉我这是什么意思？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:18:11.720

[depth](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-depth)是一个标志（#defined int in `types_c.h`），打印它使用例如：

```
const char* depthToStr(int depth) {
  switch(depth){
    case CV_8U: return "unsigned char";
    case CV_8S: return "char";
    case CV_16U: return "unsigned short";
    case CV_16S: return "short";
    case CV_32S: return "int";
    case CV_32F: return "float";
    case CV_64F: return "double";
  }
  return "invalid type!";
} 
```

并像这样使用：`cout << "depth = " << depthToStr(mat.depth()) << endl;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:17:35.717

该[文档](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-depth)可以告诉您它的含义：

> 该方法返回矩阵元素深度的标识符（每个单独通道的类型）。例如，对于 16 位有符号 3 通道数组，该方法返回 CV_16S。

你应该看看它，它非常有用。

# android - libGDX：用一些枢轴打结的吊绳

> ID：15432138
> 
> 赞同：1
> 
> 时间：2013-03-15T12:11:18.380
> 
> 标签：android, libgdx

我正在尝试在 libGDX 中制作一条在其下端有一些物体的吊绳，绳索应该像[Box2D 中的吊绳](http://www.emanueleferonato.com/2009/10/05/basic-box2d-rope/)

我做了很多研究，libGDX 有它的[ropeJoint](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/physics/box2d/joints/RopeJoint.html)方法但是如何使用它来制作绳子？

请帮助，这将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T15:39:09.027

我从回答类似问题 [libGDX: Hanging Rope开始](https://stackoverflow.com/questions/15433047/libgdx-hanging-rope?answertab=active#tab-top)

并添加了一些代码来添加一些缺失的代码并修复锚点中的一些问题，我认为以下代码适合目标问题：

```
 BodyDef ropeStartDef = new BodyDef();
    int EACH_RING_DISTANCE = 10
    ropeStartDef.type = BodyType.StaticBody;
    ropeStartDef.position.set(m_camera.viewportWidth/2,m_camera.viewportHeight );
    Body ropStartBody = m_world.createBody(ropeStartDef);
    PolygonShape ropeStartShape = new PolygonShape();
    ropeStartShape.setAsBox(5, 5);
    ropStartBody.createFixture(ropeStartShape, 0);
    ropeStartShape.dispose();
    //----------------------------
    RevoluteJointDef jd = new RevoluteJointDef();
    Body prevBody = ropStartBody;
    int angle = -90;
    Vector2 position = ropeStartDef.position;
    BodyDef previousbodyDefinition= ropeStartDef;
    for(int i=0; i<5; i++)
        {
            BodyDef bd = new BodyDef();
            bd.type = BodyType.DynamicBody;
            bd.angle = angle-MathUtils.PI/2;
            bd.position.set(position.x + i*MathUtils.cos(angle)*EACH_RING_DISTANCE, 
                            position.y + i*MathUtils.sin(angle)*EACH_RING_DISTANCE);
            Body body = m_world.createBody(bd);
            FixtureDef eachRingFD;
            eachRingFD = new FixtureDef();
            CircleShape chainCircleshape =new CircleShape();
            chainCircleshape.setRadius(4);
            eachRingFD.density = 2;
            eachRingFD.shape =chainCircleshape;
            body.createFixture(eachRingFD);

            Vector2 anchor = new Vector2(bd.position.x - MathUtils.cos(angle)*EACH_RING_DISTANCE/2f, 
                                         bd.position.y - MathUtils.sin(angle)*EACH_RING_DISTANCE/2f);
            jd.initialize(prevBody, body, anchor);
            //-----------------------added based on http://www.emanueleferonato.com/2009/10/05/basic-box2d-rope/
                RevoluteJointDef joint = new RevoluteJointDef();
                joint.initialize(prevBody, body, anchor);
                m_world.createJoint(joint);

            //------------------------end of added
            prevBody = body;
            previousbodyDefinition = bd;
        } 
```

# iphone - 为 UITableViewCell 加载自定义 xib 文件时应用程序崩溃

> ID：15432141
> 
> 赞同：-1
> 
> 时间：2013-03-15T12:11:23.867
> 
> 标签：iphone, ios, uitableview

当我尝试加载自定义 UITableViewCell 应用程序崩溃时。我以前做过很多次，这次我用同样的方法。导致崩溃的部分代码被注释（//这部分导致崩溃）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CustomTableCell";

    CustomTableCell *cell = (CustomTableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

       // This part is causing crash
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomTableCell" owner:nil options:nil];

        cell = [topLevelObjects objectAtIndex:0];

    }

     return cell;

} 
```

有 CustomTableCell.h、CustomTableCell.m 和 CustomTableCell.xib。

CellIdentifier 是 CustomTableCell 并且 nib 名称没有空格问题。

错误截图： ![在此处输入图像描述](../Images/fef3bd7c5fcaa5ae3ae21baffbacfabf.png)

什么可能是崩溃的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:43:55.073

您是否在课堂上检查了自定义单元的连接而不是文件的所有者。? ![在此处输入图像描述](../Images/935dee5a47a2b5a5d0301828adbf8f0e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:17:34.553

试试下面的代码：

```
#import "customCell.h"

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   // Configure the cell.
   static NSString *CustomCellIdentifier = @"customCell";
   customCell *cell = (customCell *)[tableView dequeueReusableCellWithIdentifier: CustomCellIdentifier];

   if (cell == nil)
   {
      NSArray *nib;
      nib = [[NSBundle mainBundle] loadNibNamed:@"customCell" owner:self options:nil];

      for (id oneObject in nib)
          if ([oneObject isKindOfClass:[customCell class]])
             cell = (customCell *)oneObject;

      cell.lbl.text = @"Hello";
   }
   return cell;
} 
```

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:22:22.600

试试这个。。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   CustomTableCell *cell;
   cell = (CustomTableCell *)[tableView dequeueReusableCellWithIdentifier:@"CustomTableCell"];

   NSArray *nib;
   for (UIControl *subview in cell.contentView.subviews) {
      [subview removeFromSuperview];
   }

   if(cell == nil)
   {
       nib = [[NSBundle mainBundle] loadNibNamed:@"CustomTableCell" owner:self options:nil];

       for(id oneobject in nib)
       {
          if([oneobject isKindOfClass:[CustomTableCell class]])
          {
             cell = (CustomTableCell *)oneobject;
          }
       }
   }
} 
```

希望能帮助到你..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:36:51.763

到目前为止，代码看起来还不错。可能的问题是，您没有将 xib 链接到编辑器中的自定义类。如果是这样，您可能会遇到问题，即某些链接的 Outlets 不存在（或者，这取决于错误）。

您可以在“自定义类”下的编辑器中链接您自定义的表格视图单元格。通过单击自定义单元格上的 xib 文件编辑器来执行此操作（在左侧部分中，您可以找到“对象”部分，在此下方，您应该找到表格视图单元格）。如果您打开了属性编辑器，请单击第三个选项卡（这样您就可以看到，您可以在其中设置自定义类。输入您的类的名称（在您的情况下，它的“CustomTableCell”）。单击右边的右箭头对输入的类进行验证，如果您的自定义类存在。重新编译（可选 make a clean），它应该可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T12:42:52.040

解决了。

我为自定义单元创建了新的 xib 文件，现在一切正常。

# c# - 使用 WSI 将类别映射到 ASPDNSF 中的制造商

> ID：15432144
> 
> 赞同：0
> 
> 时间：2013-03-15T12:11:32.923
> 
> 标签：c#, xml

我正在使用 WSI 服务将数据导入 ASPDNSF 我有以下

```
 sb.AppendLine("<Mappings AutoCleanUp=\"true\">");
        sb.AppendLine("<Entity EntityType=\"Manufacturer\" ID=\"" + ManufacturerID + "\" />");

        if (Category != null)
            sb.AppendLine("<Entity EntityType=\"Category\" ID=\"" + Category.CategoryID + "\" />");
        sb.AppendLine("")
        sb.AppendLine("</Mappings>"); 
```

目前所有产品都添加到制造商，但在产品/类别下没有显示我希望有人能够指出我认为我需要使用的正确方向

```
<Mappings AutoCleanup="boolean">

<Entity EntityType="Manufacturer|Distributor|Category|Section|Genre|Vector" Name="string" XPath="string" ID="integer" GUID="uniqueidentifier" DisplayOrder="integer"/> 
```

这是xml格式

这是完整的字符串生成器

```
public string ToXML()
    {
        StringBuilder sb = new StringBuilder();
        sb.AppendLine("<AspDotNetStorefrontImport SetImportFlag=\"true\" Verbose=\"true\" AutoLazyAdd=\"true\">");
        sb.AppendLine("<Product Action=\"" + Action.ToString() + "\" EnsureDefaultVariant=\"true\" SKU=\"" + SKU + "\"" + (GUID != null ? " GUID=\"" + GUID + "\"" : "") + " Name=\"" + System.Web.HttpUtility.HtmlEncode(Name) + "\">");
        sb.AppendLine("<Name>" + System.Web.HttpUtility.HtmlEncode(Name) + "</Name>");
        sb.AppendLine("<Summary>" + System.Web.HttpUtility.HtmlEncode(Name) + "</Summary>");
        sb.AppendLine("<SeAltText>" + System.Web.HttpUtility.HtmlEncode(Name) + "</SeAltText>");
        sb.AppendLine("<ProductType ID=\"" + ProductTypeID + "\" />");
        sb.AppendLine("<Price>" + Price + "</Price>");
        sb.AppendLine("<Display>");
        sb.AppendLine("<XmlPackage>" + ConfigurationManager.AppSettings["XMLPackage"] + "</XmlPackage>");
        sb.AppendLine("</Display>");
        sb.AppendLine("<SKU>" + SKU + "</SKU>");
        sb.AppendLine("<Description>" + System.Web.HttpUtility.HtmlEncode(Description) + "</Description>");
        sb.AppendLine("<Published>" + InStock.ToString() + "</Published>");
        sb.AppendLine("<Images>");
        sb.AppendLine("<ImageFilenameOverride>" + ImageName + "</ImageFilenameOverride>");
        sb.AppendLine("</Images>");

        sb.AppendLine("<Mappings AutoCleanUp=\"true\">");
        sb.AppendLine("<Entity EntityType=\"Manufacturer\" ID=\"" + ManufacturerID + "\" />");

        if (Category != null)
            sb.AppendLine("<Entity EntityType=\"Category\" ID=\"" + Category.CategoryID + "\" />");
        sb.AppendLine("")
        sb.AppendLine("</Mappings>");

        sb.AppendLine("<Variants AutoCleanup=\"true\">");
        sb.AppendLine("<Variant Action=\"Add\" Name=\"" + System.Web.HttpUtility.HtmlEncode(Name) + "\">");
        sb.AppendLine("<IsDefault>true</IsDefault>");
        sb.AppendLine("<Name>" + System.Web.HttpUtility.HtmlEncode(Name) + "</Name>");
        sb.AppendLine("<Description>" + System.Web.HttpUtility.HtmlEncode(Description) + "</Description>");
        sb.AppendLine("<Price>" + Price + "</Price> ");
        sb.AppendLine("<Images>");
        sb.AppendLine("<ImageFilenameOverride>" + ImageName + "</ImageFilenameOverride>");
        sb.AppendLine("</Images>");
        sb.AppendLine("<MSRP>" + (SalesListPrice ?? OrigListPrice) + "</MSRP>");
        sb.AppendLine("<Cost>" + Cost + "</Cost>");

        sb.AppendLine("</Variant>");
        sb.AppendLine("</Variants>");
        sb.AppendLine("</Product>");
        sb.AppendLine("</AspDotNetStorefrontImport>");
        return sb.ToString();
    }
} 
```

}

任何帮助表示赞赏

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T16:50:15.750

麦克风，

您指定的类别是否存在？我没有使用 id 指定映射的经验，但使用 XPath 属性取得了很大成功。

```
<Entity EntityType="Category" Name="" XPath="/Products/NewCategoryName/" /> 
```

你曾经能够解决这个问题吗？

# java - XML 转换导致 FileNotFoundException

> ID：15432145
> 
> 赞同：3
> 
> 时间：2013-03-15T12:11:35.557
> 
> 标签：java, xml, xslt, solaris

由于缺乏信息，我发布的较早问题已关闭。
如果我在这里遗漏了什么，请告诉我。转换器似乎正在将 file:/ 添加到我的文件路径的开头。

我在 Solaris 环境中工作，以下是应用转换时发生的情况：

```
DOMSource sourcexml = new DOMSource(doc);
StreamResult resultxml = new StreamResult(new File("file.xml"));
transformer.transform(sourcexml, resultxml); 
```

我得到的例外是：

```
javax.xml.transform.TransformerException: java.io.FileNotFoundException: file:/opt/origenate/or_dev87/apps/documentarchive/file.xml (No such file or directory) 
```

请注意，该文件存在于 /opt/origenate/or_dev87/apps/documentarchive/file.xml 中，但转换器对象正在寻找 file:/opt/origenate/or_dev87/apps/documentarchive/file.xml。

为什么它附加文件：/？无论如何我可以删除它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T12:17:10.960

尝试执行以下代码：

```
DOMSource sourcexml = new DOMSource(doc);
StreamResult resultxml = new StreamResult(new File("file.xml").getAbsolutePath());
transformer.transform(sourcexml, resultxml); 
```

# windows - 如何摆脱 Windows 8 蓝牙文件传输的确认？

> ID：15432147
> 
> 赞同：2
> 
> 时间：2013-03-15T12:11:46.587
> 
> 标签：windows, windows-8, bluetooth, file-transfer

我们的照片亭运行我们自己的专有软件来订购图片，它们运行的​​是 Windows 8。以前在 Windows XP 上运行相同的软件，我们可以使用蓝牙文件传输，以便客户可以从他们的手机/平板电脑发送图片它会出现在我们的软件正在观看的计算机上的文件夹中。现在我们更新到了Windows 8，遇到了一个问题：每次Windows即将接收传入的图片时，都会出现确认提示。但是，此确认提示显示在我们软件的背景中，并且从未见过。我们需要的是让计算机通过蓝牙自动接受传入的文件。这在以前版本的 Windows 中是可能的。我们如何在 Windows 8 中摆脱这个提示？（配对设备不是解决方案，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T09:55:31.720

使用 BlueSoleil 10，我能够替换 Windows 蓝牙堆栈并摆脱确认消息。您可以在这里获得 BlueSoleil：http: [//www.bluesoleil.com/](http://www.bluesoleil.com/)不幸的是它不是免费的。此外，它与所有蓝牙 USB 加密狗不兼容，因此我建议您进行一些研究以确保兼容性。

# android - 自定义键盘的自定义布局

> ID：15432148
> 
> 赞同：0
> 
> 时间：2013-03-15T12:11:51.600
> 
> 标签：android, android-layout, android-widget

我不知道我是否做错了，但这就是我想做的：

我设计了一个带有 12 个按钮（3 列，4 行）的简单键盘，我想让它成为标准。我的意思是在我的任何布局中我只想写

```
<my.own.Keypad>
  ....
</my.own.Keypad> 
```

键盘负责设置 12 个按钮和所有内容。

我想我必须扩展一个布局，但我不确定。我在网上找不到任何帮助。

**我的主要问题是我不知道这是否是好方法！**

请给我任何可以让我走上好路的关键字或提示！

非常感谢，

朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:32:51.120

你可以这样做。

1.  制作一个单独的布局，其中包含 12 个按钮的布局。

假设布局 xml 文件的名称是 keypad.xml

1.  现在在任何其他布局中，只要您希望您的键盘布局执行此操作

    < 包括
    android:layout_width="fill_parent" android:layout_height="wrap_content"
    layout="@layout/keypad" />

这将包括您想要的任何布局的键盘布局。

让我知道它是否对您有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:55:00.023

你可以用任何适合你的方式来做到这一点。这是一个例子

示例的第一个代码用于您的活动

```
Button keypad1_button = (Button) findViewById(R.id.key1_button);

keypad1_button.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        myMethod(v);
    }
}); 
```

//你的方法应该在按钮按下事件上调用

```
public void  myMethod(View v) {
    // write your logic here
} 
```

第二种方法是直接将其写入 xml 文件以调用 myMethod(v)

这是代码：在你的 keypad.xml 布局中假设你有一个按钮

```
< Button
                        android:id="@+id/key1_button"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                        
                        android:text="KEY 1"
                        android:onClick="myMethod"
                        /> 
```

这两种方法都可以。尝试一下

# c# - 多次延迟执行与一次检索

> ID：15432154
> 
> 赞同：2
> 
> 时间：2013-03-15T12:12:19.553
> 
> 标签：c#, linq-to-sql

在以下情况下最快的解决方案是什么：

我有一个对象列表，我需要排除与表中的行匹配的任何对象（SQLCE）。

以下是伪代码的两种方式。

```
DataContext dc = new DataContext();
var dbOjbToExclude = dc.Tables.Where(..).Select(r=>r);
foreach (var item in myOriList)
{
     if (!dbObjToExclude.Any(r=>r.prop1==item.prop1 && r.prop2==item.prop2))
         //add item to a new collection
} 
```

上面，我猜数据库查询对循环中的每个项目运行多次？我只检查对象的许多属性中的两个。另一种方法是仅获取具有这两个属性的对象的数据对象集合，并检查该集合是否匹配：

```
DataContext dc = new DataContext();
var dbOjbToExclude = dc.Tables
                           .Where(..)
                           .Select(r=> new HelperObj {r.prop1,r.prop2})
                           .ToList<HelperObj>();
foreach (var item in myOriList)
{
     if (!dbObjToExclude.Any(r=>r.prop1==item.prop1 && r.prop2==item.prop2))
     //add item to a new collection
} 
```

哪个更快？就像我说的，这是 sqlce 和 linq to sql 的组合，所以我很想知道哪个更好，性能方面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T16:34:02.883

我不认为多次通话和一次通话之间的区别。在这两种情况下，对数据库的查询都将发生在 foreach 循环需要结果列表的地方。不同之处在于第一个查询将返回整个表，但第二个查询将只返回您要求的几个字段。所以我会说第二个会更有效率。

# unix - 在匹配行之前显示文件名

> ID：15432156
> 
> 赞同：320
> 
> 时间：2013-03-15T12:12:25.243
> 
> 标签：unix, grep

如何`grep`在其输出中的匹配行之前显示文件名？

* * *

## 回答 #1

> 赞同：477
> 
> 时间：2013-03-15T12:38:23.930

尝试这个小技巧来哄骗`grep`它认为它正在处理多个文件，以便它显示文件名：

```
grep 'pattern' file /dev/null 
```

还要获取行号：

```
grep -n 'pattern' file /dev/null 
```

* * *

## 回答 #2

> 赞同：339
> 
> 时间：2013-03-15T12:41:41.817

如果您有选择`-H`并且`-n`可用（`man grep`是您的朋友）：

```
$ cat file
foo
bar
foobar

$ grep -H foo file
file:foo
file:foobar

$ grep -Hn foo file
file:1:foo
file:3:foobar 
```

选项：

> -H, --with-文件名
> 
> 打印每个匹配的文件名。当有多个文件要搜索时，这是默认设置。
> 
> -n，--行号
> 
> 在其输入文件中使用从 1 开始的行号为每行输出添加前缀。（-n 由 POSIX 指定。）

`-H`是 GNU 扩展，但`-n`由[POSIX 指定](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/grep.html)

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2017-02-24T22:42:04.350

没有必要的伎俩。

```
grep --with-filename 'pattern' file 
```

带行号：

```
grep -n --with-filename 'pattern' file 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-22T16:35:24.667

怎么样，我设法实现了这一点，部分归功于这篇文章。

您想在多个具有模式（例如`filename=logfile.DATE`）的目录中查找多个文件，例如具有不同名称但模式（例如）的日志`/logsapp1, /logsapp2`。每个文件都有一个您想要 grep 的模式（例如`"init time"`），并且您想要拥有`"init time"`每个文件的 ，但知道它属于哪个文件。

```
find ./logsapp* -name logfile* | xargs -I{} grep "init time" {} \dev\null | tee outputfilename.txt 
```

然后`outputfilename.txt`会是这样的

```
./logsapp1/logfile.22102015: init time: 10ms
./logsapp1/logfile.21102015: init time: 15ms
./logsapp2/logfile.21102015: init time: 17ms
./logsapp2/logfile.22102015: init time: 11ms 
```

一般来说

```
find ./path_pattern/to_files* -name filename_pattern* | xargs -I{} grep "grep_pattern" {} \dev\null | tee outfilename.txt 
```

解释：

`find`命令将根据模式搜索文件名

然后，管道`xargs -I{}`将`find`输出重定向到`{}`

这将是输入`grep ""pattern" {}`

`grep`然后是显示文件名的技巧`\dev\null`

最后，将输出写入文件`tee outputfile.txt`

这在`grep`9.0.5 版本 1989 中对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-02T19:44:48.620

这是对先前解决方案的轻微修改。我的示例在 bash 脚本中查找 stderr 重定向： `grep '2>' $(find . -name "*.bash")`

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2016-03-28T23:57:25.890

```
grep 'search this' *.txt 
```

帮助我搜索所有 .txt 文件（当然，输入您自己的搜索值）。

# php - Jquery 静态菜单到 Wordpress 菜单

> ID：15432158
> 
> 赞同：2
> 
> 时间：2013-03-15T12:12:29.400
> 
> 标签：php, javascript, jquery, wordpress, menu

就在几天前，我得到了一个很棒的脚本，它基本上允许我的静态站点上的菜单项根据菜单中有多少列表项而缩小和扩展。现在我已经开始着手将网站转换为 Wordpress 安装，但由于我不熟悉 Javascript，我无法让它工作。

它不会运行脚本，只会运行基本的 Wordpress PHP。

这是**脚本**：

```
$(document).ready(function() {      
  li_count = $('#main-navigation li').length;
  div_size = $('#main-navigation').width();
  new_li_font_size = (div_size/10)/li_count+'px';
new_li_width = 100/li_count+'%';
  $('#main-navigation li').css('font-size', new_li_font_size);
  $('#main-navigation li').css('width', new_li_width);
  console.debug(new_li_size);
}); 
```

这是我**以前的导航**：

```
<nav id="main-navigation">
<ul>
    <li><a href="index.html">Hjem</a></li>
    <li><a href="butikker-single.html">Butikker</a></li>
    <li><a href="kampanjer.html">Kampanjer</a></li>
    <li><a href="#">Åpningstider</a></li>
    <li><a href="#">Om torvgårdens ting og tang</a></li>
</ul>
</nav><!-- END #main-navigation --> 
```

这是我**目前的导航**：

```
<nav id="main-navigation" role="navigation">
            <ul>
                <?php wp_nav_menu( array( 'theme_location' => 'header-menu' ) ); ?>
            </ul>
        </nav><!-- END #main-navigation --> 
```

我一直在查看脚本，我认为这可能与 php 中没有更多 li-tags 的事实有关，但考虑到我没有使用 jQuery 的经验，我可能错了。有人能帮我吗？:)

以防万一，这是我想到的 jQuery 的实现：

```
<?php wp_enqueue_script("jquery"); ?>
    <?php wp_head(); ?>
    <script type="text/javascript" src="<?php bloginfo("template_url"); ?>/js/menu.js"></script> 
```

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:50:42.590

要添加脚本，`WordPress`您可以`wp_enqueue_script`在`functions.php`文件中使用

```
function load_menu_js() {
    wp_enqueue_script(
        'menu_js',
        get_template_directory_uri() . '/js/menu.js',
        array('jquery')
    );
}
add_action('wp_enqueue_scripts', 'load_menu_js'); 
```

上面的代码将`script`在页面的 head 部分添加，您不需要手动`<script>`添加`menu.js`标签，这是推荐的方式。

你也应该使用

```
(function ($) {
    $(document).ready(function() {      
        // code goes here
    });
})(jQuery); 
```

`wp_head()`在您用于加载文件后删除脚本标签，`menu.js`并更改以下代码

```
<nav id="main-navigation" role="navigation">
        <ul>
            <?php wp_nav_menu( array( 'theme_location' => 'header-menu' ) ); ?>
        </ul>
</nav> 
```

to（`wp_nav_menu()`生成一个`ul`填充`li`标签）

```
<nav id="main-navigation" role="navigation">
    <?php wp_nav_menu( array( 'theme_location' => 'header-menu' ) ); ?>
</nav> 
```

另请记住，旧版浏览器`nav`不`html5`支持标签，您可以使用它`<div id="main-navigation"></div>`来代替。

# for-loop - (%*) 在批处理 for 循环中是什么意思？

> ID：15432159
> 
> 赞同：3
> 
> 时间：2013-03-15T12:12:30.047
> 
> 标签：for-loop, batch-file

在声明中

```
FOR %%A IN (%*) DO Something 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:13:22.773

它包含批处理文件的所有参数。所以这会遍历每个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:16:38.807

引用[使用批处理参数](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/batch.mspx?mfr=true)

> Cmd.exe 提供批处理参数扩展变量 %0 到 %9。在批处理文件中使用批处理参数时，%0 将替换为批处理文件名，%1 到 %9 将替换为您在命令行中键入的相应参数。[...] `%*`批处理参数是对传递给批处理文件的所有参数（不包括 %0）的通配符引用。

# php - 用于 HTML 表单的 PHP

> ID：15432162
> 
> 赞同：-1
> 
> 时间：2013-03-15T12:12:35.520
> 
> 标签：php, html, forms, strcmp, strlen

我将以下下拉列表作为 HTML 表单的一部分：

```
Print Options:<br/><select name="printopts">
              <option selected=""></option>
              <option value="Print Longest Answer">Print Longest Answer</option>
              <option value="Print Sorted Order">Print Sorted Order</option>
              </select> 
```

如果用户选择“打印最长答案”或 strcmp($str1, $str2) 如果用户选择“打印排序顺序”，我需要我的 php 脚本来执行 strlen() 函数。

我了解这些功能是如何工作的，我只是不确定在我的脚本中的何处或如何调用它们。任何帮助都会很棒！干杯!

更新：到目前为止，这是我的脚本/表单。它从一些验证检查开始，但我试图弄清楚如何在这些验证检查发生后让下拉框执行 strlen() 和 strcmp() 函数。

```
<?php
if (isset ($_POST['answer1'], $_POST['answer2'], $_POST['printopts'])) {
  $errors = array () ;

  $answer1 = $_POST['answer1'];
  $answer2 = $_POST['answer2'];
  $printopts = $_POST['printopts'];

  if (empty($answer1) || empty($answer2) || empty($printopts))  {
    $errors[] = 'All fields are required';
    } else {

      if (strlen($answer1) < 4 ) {
          $errors[] = 'Answer 1 is too short! Please Re-enter';
      }
      if (strlen($answer1) > 6 ) {
          $errors[] = 'Answer 1 is too long! Please Re-enter';
      }
      if (strlen($answer2) < 4) {
          $errors[] = 'Answer 2 is too short! Please Re-enter';
      }
      if (strlen($answer2) > 6) {
          $errors[] = 'Answer 2 is too long! Please Re-enter';
      }
      if (is_numeric($answer1)) {
          $errors[] = 'Answer 1 must only contain letters. Please Re-enter';
      }
      if (is_numeric($answer2)) {
          $errors[] = 'Answer 2 must only contain letters. Please Re-enter';
      }

    if (!empty($errors)) {
        foreach ($errors as $error) {
          echo '<strong>', $error,  '</strong><br/>';
        }
    } 

    else {
          echo 'Thank you for your answers!';
    }
    }

}
?>

<form action="test.php" method="post">
              <p>
              Answer 1:<br/><input type="text" name="answer1"/><br/>
              Answer 2:<br/><input type="text" name="answer2"/><br/>
              Print Options:<br/><select name="printopts">
              <option selected=""></option>
              <option value="Print Longest Answer">Print Longest Answer</option>
              <option value="Print Sorted Order">Print Sorted Order</option>
              </select>
              <br/>
              </p>
              <p><input type="submit" value="Submit" /></p>
              </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:16:47.320

```
function do_print($str1, $str2) {

if ($_GET['printopts'] == "Print Longest Answer") {

   strlen();

} else {

  strcmp($str1,$str2);

}

 } 
```

表单提交后执行do_print。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:17:02.793

对，首先你需要在<form> html标签和方法参数中设置action='myscript.php'（例如：method='get'）。所以它是这样的：

```
<form action='myscript.php' method='get'>
...
</form> 
```

然后在 myscript.php 中，您将需要检查您的 php 代码：

```
if($_GET['printopts']=='Print Longest Answer') {
     //do your strlen here
} else {
     //do strcmp here
} 
```

# c# - 从 appDelegate monoTouch 推送到 viewController

> ID：15432173
> 
> 赞同：0
> 
> 时间：2013-03-15T12:13:06.383
> 
> 标签：c#, ios, xamarin.ios

我正在尝试设置一个入门 viewController。在 appDelegate 中，我想创建一个检查 NSUserDefaults 的 if 条件，如下所示：

```
public override bool FinishedLaunching (UIApplication application, NSDictionary launchOptions)
        {

            if (NSUserDefaults.StandardUserDefaults.StringForKey ("LaunchWatcher") != null) {

            } else {

            }

            return true;
        } 
```

如果 LaunchWatcher 不为空，appDelegate 应该推送到 NewTrackTraceViewController。如果为 null，则为 TrackTraceViewController。如何使用 C# 执行此操作？推送到视图控制器的正确代码是什么？

像这样的东西：

```
if (NSUserDefaults.StandardUserDefaults.StringForKey ("LaunchWatcher") != null) {

this.PresentViewController(NewTrackTraceViewController, animated, null);

            } else {

this.PresentViewController(TrackTraceViewController, animated, null);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:11:57.650

您必须构造视图控制器，然后构造导航控制器，并将其分配给窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:57:07.030

看看这里：

[Monotouch 从初始屏幕导航](https://stackoverflow.com/questions/15323332/monotouch-navigate-from-splash-screen/15324565#15324565)

它基本上是你必须做的。只需使用顶视图控制器。

# c# - MessageBox - 两个按钮做同样的事情？

> ID：15432174
> 
> 赞同：-1
> 
> 时间：2013-03-15T12:13:06.353
> 
> 标签：c#, winforms

我想要它，以便一个名为“退出”的菜单项显示一个消息框，询问用户是否真的希望退出，但无论他们单击是还是否，它仍然会退出程序。

```
private void Exit_Click(object sender, EventArgs e)
    {
        // Shows a prompt asking the user if they really want to exit
        DialogResult dQuit;

        dQuit = MessageBox.Show("Do you really wish to exit?",
                                 "Exit?",
                                 MessageBoxButtons.YesNo,
                                 MessageBoxIcon.Question);

        // If 'Yes' button is clicked, close the program
        if (dQuit == DialogResult.Yes)
        {
            Application.Exit();

        }
        else
        {
            // Else, close the dialog box and return to the menu screen
            this.DialogResult = System.Windows.Forms.DialogResult.No;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:15:10.520

您正在使用代码关闭表单本身

```
this.DialogResult = System.Windows.Forms.DialogResult.No; 
```

在你的`else`街区。

您无需执行任何操作即可关闭 MessageBox；每当用户单击其中一个按钮时，它就会自动关闭。在 MessageBox 已经关闭之前，该`MessageBox.Show`方法不会返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:27:56.717

你可以试试这个`else`：

```
 if (MessageBox.Show("Do you really wish to exit?", "Exit?", MessageBoxButtons.YesNo) == DialogResult.Yes)
   {
     Application.Exit();
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:54:36.147

```
 MessageBox.Show("Do you really wish to exit?", "Exit?", MessageBoxButtons.YesNo);
 Application.Exit(); 
```

我强烈反对这样做，因为它不利于用户可用性

# sql - sql查询在连接或子查询的帮助下返回输出

> ID：15432181
> 
> 赞同：-4
> 
> 时间：2013-03-15T12:13:33.607
> 
> 标签：sql, sql-server

我有两张桌子

```
Table1                               Table2
id     Name                     id   table1id      Name
1       A                        1     1            a
2       B                        2     1            aa
3       C                        3     1            aaa
                                 4     2            b
                                 5     2            bb 
```

我想输出为 Name1 Name2

```
A          a
           aa
           aaa
B          b
           bb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:19:24.570

尝试这个 ：

```
Declare @Table1 table
(id int ,name varchar(10))

Insert into @Table1
values
(1,'A' ),
(2,'B'),
(3,'C' )

Declare @Table2 table
(id int,tableid int ,name varchar(10))

Insert into @Table2
values
(2, 1,'aa'),
(3, 1,'aaa'),
(4, 2 ,'b'),
(5,2,'bb')

;With cte(Name1,Name2,rn) as
(Select t1.name ,t2.name,
  row_number() over ( partition by t1.name order by  t1.id) as rn 
  from @table1 as t1 inner join @Table2 as T2
  on t2.tableid=t1.id
)
Select case when rn=1 then name1 else '' end as c1,
name2
from cte 
```

# xml - 从 xml 文档元素中检索单个属性值

> ID：15432185
> 
> 赞同：0
> 
> 时间：2013-03-15T12:13:37.397
> 
> 标签：xml, vb.net

我有一个具有以下结构的 xml 文档

```
<?xml version="1.0" encoding="utf-8" ?>
<CoordinateData>
  <Continent name="Australia">
    <Country name="Australia">
    <Marker custid="1">     
        <LocationName>Port of Brisbane</LocationName>
        <Longitude>153.1678</Longitude>
        <Latitude>-27.3832</Latitude>       
    </Marker>
    <Marker custid="1">     
        <LocationName>Port of Newcastle</LocationName>
        <Longitude>151.7833</Longitude>
        <Latitude>-32.9333</Latitude>       
    </Marker>  
    </Country>
  </Continent>
  <Continent name="North America">
  <Country name="Canada">
        <Marker custid="2">     
            <LocationName>Port of Toronto</LocationName>
            <Longitude>79.3724</Longitude>
            <Latitude>43.633</Latitude>     
        </Marker>
        <Marker custid="2">     
            <LocationName>Port of Vancouver</LocationName>
            <Longitude>122.422</Longitude>
            <Latitude>45.386</Latitude>     
        </Marker>  
    </Country>
  </Continent>
</CoordinateData> 
```

我正在尝试填充大陆名称的下拉列表，通过访问名称属性并填充列表以绑定到下拉列表，仅检索那些在 xml 文件中具有元素的大陆名称。

我似乎得到了正确的语法，但我不断收到对象引用错误。这是我最新的迭代，它也不起作用。我将“大陆”传递给函数

```
Public Shared Function GetContinentList(ByVal nodestring As String) As List(Of String)
    Dim doc As New XmlDocument()

    doc.Load(Hosting.HostingEnvironment.MapPath(xmlfilepath_InjectLocation))      
    Dim list As List(Of String) = (From attribute As XmlAttribute In   doc.DocumentElement(nodestring).Attributes() Select (attribute("name").Value)).ToList()

    Return list
End Function 
```

工作功能；

```
Public Shared Function GetContinents() As List(Of String)
    Dim doc As New XmlDocument()
    doc.Load(Hosting.HostingEnvironment.MapPath(XmlfilepathInjectLocation))
    Return (From node As XmlNode In doc.SelectNodes("//Continent/@name") Select node.InnerText).ToList()

End Function 
```

现在，一旦我选择了一个大陆，我就会尝试访问国家属性这是我最近的尝试，似乎都返回了 0 个项目。

```
Public Shared Function GetContinentSubItems(ByVal continentname As String) As List(Of String)
    Dim doc As New XmlDocument()
    doc.Load(Hosting.HostingEnvironment.MapPath(XmlfilepathInjectLocation))
    Return (From node As XmlNode In doc.SelectNodes("///Country/@name") Where doc.SelectSingleNode("CoordinateData/Continent").Attributes("name").Value = continentname Select node.InnerText.ToList()
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:03:53.283

这是一个有点老的学校，但它工作并且非常可读/可维护......

```
Public Function GetContinents() As List(Of String)
    Dim doc As New XmlDocument
    doc.Load("c:\yourfile.xml")
    Dim ReturnValue As New List(Of String)
    For Each node As XmlNode In doc.SelectNodes("//Continent")
        ReturnValue.Add(node.Attributes("name").Value)
    Next
    Return ReturnValue
End Function 
```

# ajax - angularjs 为某些请求停止 ajax 微调器

> ID：15432186
> 
> 赞同：1
> 
> 时间：2013-03-15T12:13:39.283
> 
> 标签：ajax, angularjs, angularjs-service

我已经使用 transformRequest 和 responseInterceptors 设置了一个 ajax 微调器，如下所示 [http://jsfiddle.net/zdam/dBR2r/](http://jsfiddle.net/zdam/dBR2r/)

```
 angular.module('SharedServices', [])
    .config(function ($httpProvider) {
        $httpProvider.responseInterceptors.push('myHttpInterceptor');
        var spinnerFunction = function (data, headersGetter) {
            // todo start the spinner here

            alert('start spinner');
            return data;
        };
        $httpProvider.defaults.transformRequest.push(spinnerFunction);
    })
// register the interceptor as a service, intercepts ALL angular ajax http calls
    .factory('myHttpInterceptor', function ($q, $window) {
        return function (promise) {
            return promise.then(function (response) {
                // do something on success
                // todo hide the spinner
                alert('stop spinner');
                return response;

            }, function (response) {
                // do something on error
                // todo hide the spinner
                alert('stop spinner');
                return $q.reject(response);
            });
        };
    })

angular.module('project', ['mongolab', 'SharedServices']).
  config(function($routeProvider) {
    $routeProvider.
      when('/list', {controller:ListCtrl, template:'list.html'}).
      when('/edit/:projectId', {controller:EditCtrl, template:'detail.html'}).
      when('/new', {controller:CreateCtrl, template:'detail.html'}).
      otherwise({redirectTo:'/list'});
  });

function ListCtrl($scope, Project) {
  $scope.projects = Project.query();
}

function CreateCtrl($scope, $location, Project) {
  $scope.save = function() {
    Project.save($scope.project, function(project) {
      $location.path('/edit/' + project._id.$oid);
    });
  }
}

function EditCtrl($scope, $location, $routeParams, Project) {
  var self = this;

  Project.get({id: $routeParams.projectId}, function(project) {
    self.original = project;
    $scope.project = new Project(self.original);
  });

  $scope.isClean = function() {
    return angular.equals(self.original, $scope.project);
  }

  $scope.destroy = function() {
    self.original.destroy(function() {
      $location.path('/list');
    });
  };

  $scope.save = function() {
    $scope.project.update(function() {
      $location.path('/list');
    });
  };
}

// This is a module for cloud persistance in mongolab - https://mongolab.com
angular.module('mongolab', ['ngResource']).
    factory('Project', function($resource) {
      var Project = $resource('https://api.mongolab.com/api/1/databases' +
          '/angularjs/collections/projects/:id',
          { apiKey: '4f847ad3e4b08a2eed5f3b54' }, {
            update: { method: 'PUT' }
          }
      );

      Project.prototype.update = function(cb) {
        return Project.update({id: this._id.$oid},
            angular.extend({}, this, {_id:undefined}), cb);
      };

      Project.prototype.destroy = function(cb) {
        return Project.remove({id: this._id.$oid}, cb);
      };

      return Project;
    }); 
```

但我不会为一些 ajax 调用停止/隐藏 ajax 微调器。就像自动完成 ajax 调用一样。

有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:14:56.540

我从 angularjs google grops 找到了一个解决方案，

[https://groups.google.com/d/msg/angular/K8F_6K1C_GI/cOOEJPQC79cJ](https://groups.google.com/d/msg/angular/K8F_6K1C_GI/cOOEJPQC79cJ)

正如詹姆斯摩根在那里所说，在 $rootScope 中放置一个标志并在显示微调器之前检查它。

```
angular.module('SharedServices', [])
.config(function ($httpProvider) {
    $httpProvider.responseInterceptors.push('myHttpInterceptor');
    var spinnerFunction = function (data, headersGetter) {
        // todo start the spinner here
        // check $rootScope flag
        rootscope = angular.element(document).injector().get('$rootScope');
        if(rootscope.spinner == null || rootscope.spinner != false)
           alert('start spinner');
        else
           rootscope.spinner = true; // reset for other requests

        return data;
    };
    $httpProvider.defaults.transformRequest.push(spinnerFunction);
}) 
```

希望这对其他人有帮助。

# java - 无法解析的日期：“15-03-2013”

> ID：15432190
> 
> 赞同：0
> 
> 时间：2013-03-15T12:14:00.250
> 
> 标签：java, date

```
String dateString = request.getParameter("pickerDate"); //dateString "15-03-2013"
SimpleDateFormat format = new SimpleDateFormat("dd-MM-yyyy");
format = new SimpleDateFormat("dd-MMM-yy");
Date sdf = null;
try {
    Date date = format.parse(dateString);
    System.out.println(format.format(date));
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我从日期选择器获取日期。但是我得到了一个无法解析的异常。有关如何转换字符串“15-03-2013”​​以将其作为日期存储在数据库中的任何帮助？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T12:25:02.083

您正在`SimpleDateFormat`用第二个覆盖您的第一个。

```
SimpleDateFormat format = new SimpleDateFormat("dd-MM-yyyy");
format = new SimpleDateFormat("dd-MMM-yy"); 
```

第二个是寻找`MMM`，即三个字符的月份名称。只需删除第二行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:27:14.050

你只需要清理你的代码。试试这个：

```
 String dateString = "15-03-2013";
    SimpleDateFormat format = new SimpleDateFormat("dd-MM-yyyy");

    try {
        Date date = format.parse(dateString);
        System.out.println(date);
    } catch (ParseException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:26:12.003

问题是这一行：

```
format = new SimpleDateFormat("dd-MMM-yy"); 
```

这是替换之前的行 - 删除它，您的代码应该可以工作。

前面的行是您传入的有效格式：

```
SimpleDateFormat format = new SimpleDateFormat("dd-MM-yyyy"); 
```

# sql-server - Sync Framework 的连接速度要求

> ID：15432191
> 
> 赞同：2
> 
> 时间：2013-03-15T12:14:02.510
> 
> 标签：sql-server, client-server, microsoft-sync-framework

我正在设计一个系统，我必须使客户端数据库与服务器数据库保持同步。有一个中央服务器（SQL Server 2008 有 20 个表）和大约 30 个客户端（SQL Server 或 SQL Server CE）。客户不需要所有 20 个表，但 10 个是一个合理的猜测。这本质上是一个医疗系统，最多可以处理 1200 名患者，所以它不是一个庞大的系统。系统将部署在互联网并不总是可用的非常偏远的地区，所以我需要一些数据库同步技术。一旦互联网可用，客户端数据库将与服务器同步。在阅读了可用技术之后，我倾向于使用 Microsoft Sync。

我的问题是关于 Microsoft Sync Framework 的连接速度要求。客户端将部署在非常偏远的地区。互联网将在短时间内可用，互联网速度将非常慢（假设下载速度为 20KB/秒 Max）。

我担心 Sync Framework 在这种互联网速度下的性能。是否有任何基准可以让我了解不同连接速度值的估计同步时间？当互联网速度如此缓慢（例如 20KB/秒）时，使用 Sync Framework 是否有意义。慢速是否只会影响完成同步所需的时间，还是还有其他缺点？

我之前没有使用数据库同步技术的经验。这是我第一次做这种性质的事情。如果我遗漏了一些重要的东西，或者在这种情况下这不是正确的方法，请随时分享您的想法和想法。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:36:01.567

您应该可以将 Sync Framework 用于您的任务。同步的持续时间将取决于必须从服务器上传/下载到服务器的更改数量。在您的情况下，如果您不能保证完成整个同步所需的连接，您将不得不使用 Batching in Sync Framework 将您的同步分解成更小的块。

您可以以此为起点：http: [//blogs.msdn.com/b/sync/archive/2010/09/24/how-to-sync-large-sql-server-databases-to-sql-天蓝色的.aspx](http://blogs.msdn.com/b/sync/archive/2010/09/24/how-to-sync-large-sql-server-databases-to-sql-azure.aspx)

要测试执行同步事务可能需要多长时间，请设置一个测试方案，然后您可以启用 Sync Framework 中的跟踪组件来跟踪同步过程：http: [//msdn.microsoft.com/en-us/library/ cc807160.aspx](http://msdn.microsoft.com/en-us/library/cc807160.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:22:24.213

影响性能的不仅是更改的数量，还有大小。10 行更改可以使每行 5k 或包含 1MB blob。

如果通过批处理是指设置内存数据缓存大小，它也不会批处理更改的应用程序，它会通过网络批量发送更改。

sync fx 就像任何其他数据库应用程序一样，您应该考虑锁定、并发性等...

在繁忙的系统上，如果必须等待锁被释放，同步将需要时间。

# jquery - Ruby On Rails 中带有幻灯片的 jQuery

> ID：15432193
> 
> 赞同：0
> 
> 时间：2013-03-15T12:14:04.830
> 
> 标签：jquery, css, ruby-on-rails, ajax

我正在尝试用 jQuery 制作幻灯片。**我有一个数组中的照片，**但我不知道如何创建幻灯片。我看过' [http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/) '但我不知道该怎么做。

并在视图>布局>应用程序

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.2.72.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#shuffle').cycle({ 
    fx:     'shuffle', 
    delay:  -4000 
});
}); 
```

**查看我有这个的照片（但这会一次显示所有照片）：**

```
 <div id="shuffle">
    <% @building.building_photos.each do |photo| %>
      <%= link_to (image_tag (photo.photo.url)), @building %>
    <% end %>

  </div> 
```

更新 1（源代码）

```
<!DOCTYPE html>
<html>
<head>
  <title>Welcome to koshbay</title>
  <link href="/assets/all.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/about.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/addphotos.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/admin.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/buildings.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/contact.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/forrent.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/forsale.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/projectproperties.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/rended.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/rented.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/scaffolds.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/seeits.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/sessions.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/sold.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/soon.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/store.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/users.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/application.js?body=1" type="text/javascript"></script>
 <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/jrails.js" type="text/javascript"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.2.72.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#shuffle').cycle({ 
    fx:     'shuffle', 
    easing: 'easeOutBack', 
    delay:  -4000 
});
});

</script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="hCMHawSL0iZidEaHMt8D7T1YhYAuwpzXCdvtwyHxiC0=" name="csrf-token" />
</head>
<body id="store" >
    <div id="banner" >
     <img alt="Welcome" src="/assets/welcome.jpg" />
     Welcome to KTIMABAY

     </div>

     <div id="side" >     

     <a href="/">Home</a>   <br/>
     <a href="http://www..../faq" >Questions</a><br />
     <a href="/about/index">About</a><br/>
      <a href="/contact/index">Contact</a>  <br/>   

      <a href="/sessions/new">Login</a> <br/>
     <br />

     </div>
     <div id="main" >
     <p id="notice"></p>

<p>
 <div id="shuffle">
      <a href="/buildings/27"><img alt="House-exterior-design-wallpaper-actrists-bollywood" src="/system/building_photos/photos/000/000/017/original/House-exterior-design-wallpaper-actrists-bollywood.jpg?1363274173" /></a>
      <a href="/buildings/27"><img alt="House-interior-design-8" src="/system/building_photos/photos/000/000/018/original/House-Interior-Design-8.jpg?1363274173" /></a>
      <a href="/buildings/27"><img alt="Jesse-james-home-bad-feng-shui-bedroom" src="/system/building_photos/photos/000/000/019/original/jesse-james-home-bad-feng-shui-bedroom.jpg?1363274173" /></a>

  </div>
<p>
  <b>Title:</b>
  lefkeri
</p>

<p>
  <b>Status:</b>
  For Rent
</p>

<p>
  <b>Description:</b>
  2 bedrooms
</p>

<p>
  <b>Price:</b>
   € 500.0
</p>

<form action="/seeits/27?building_id=27" class="button_to" method="post"><div><input type="submit" value="I want to see it" /><input name="authenticity_token" type="hidden" value="hCMHawSL0iZidEaHMt8D7T1YhYAuwpzXCdvtwyHxiC0=" /></div></form>

 </div>
 </body>
 </html> 
```

关于如何做到这一点的任何想法（我第一次必须使用 jQuery，因此我不知道该怎么做）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:06:36.130

首先添加缺少`});`的关闭`document ready`

接下来要么`easing: 'easeOutBack'`在你的循环插件调用中删除

[**或从此处**](http://gsgd.co.uk/sandbox/jquery/easing/)找到的此链接添加缓动库[](http://gsgd.co.uk/sandbox/jquery/easing/)

# android - Ndk-build 不允许链接到 gnu stl

> ID：15432195
> 
> 赞同：0
> 
> 时间：2013-03-15T12:14:06.937
> 
> 标签：android, boost, android-ndk, cocos2d-x

我正在使用 NDK 和 Boost 库以及作为 Cocos2d-x 游戏引擎一部分的库来开发一个 Android 项目。我认为我遇到的问题是链接库和使用 NDK 的简单问题，但为了完整性，我提到了 Boost 和 cocos2d-x。

当我使用 ndk-build 构建我的项目时，我的所有代码似乎都可以很好地编译为目标文件，这表明 g++ 可以找到我正在使用的所有库头。我相信，当链接开始时，G++ 会爆炸，因为它试图构建将我的代码和库绑定在一起的共享库。

可以在此处找到包含错误的构建日志：http: [//txtup.co/tMtJ](http://txtup.co/tMtJ)

出现的第一个错误，

C:/Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.7/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.7/../../.. /../arm-linux-androideabi/bin/ld.exe：错误：无法打开 ./obj/local/armeabi/libgnustl_static.a：权限被拒绝

似乎很有说服力，因为 libgnustl_static.a 应该包含所有函数的实现，例如 'std::string::operator+'，g++ 说它在该错误之后找不到引用。

libgnustl_static.a 在构建期间被复制到 ./obj/local/armeabi 中，所以我知道我的 makefile 至少在某个时候知道该库。我猜想这发生在“权限被拒绝”错误之前，但我不能确定。

下面是我想成为所有这些编译的最终产品的 libgame.so 库的 android.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_LDLIBS += -L$(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/4.7/libs/armeabi

LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

FILE_LIST := $(wildcard $(LOCAL_PATH)/../../Classes/*.cpp)
LOCAL_SRC_FILES := $(FILE_LIST:$(LOCAL_PATH)/%=%)

LOCAL_SRC_FILES += hellocpp/main.cpp

LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes \
            $(LOCAL_PATH)/../../../cocos2dx/platform/third_party/android/prebuilt/libboost_serialization/include/ \
$(LOCAL_PATH)/../../../cocos2dx/platform/third_party/android/prebuilt/libboost_serialization/include/boost/archive \
$(LOCAL_PATH)/../../../cocos2dx/platform/third_party/android/prebuilt/libboost_serialization/include/boost/serialization                

LOCAL_WHOLE_STATIC_LIBRARIES := boost_1_53_serialization cocos2dx_static cocosdenshion_static cocos_extension_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,libboost_serialization) \
$(call import-module,CocosDenshion/android) \
$(call import-module,cocos2dx) \
$(call import-module,extensions) 
```

makefile 是否有某些原因无法找到或使用 libgnustl_static？或者库如何复制到更改权限的工作目录中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:18:00.607

我们在 cocos2d-x 中有使用 gnustl 的示例。

尝试基于您的 *.mk 文件（Android.mk 和 Application.mk）： [https ://github.com/cocos2d/cocos2d-x/tree/master/samples/Cpp/HelloCpp/proj.android/jni](https://github.com/cocos2d/cocos2d-x/tree/master/samples/Cpp/HelloCpp/proj.android/jni)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T14:55:37.060

这是一个错误，`gcc/NDK`它在 Linux、Cygwin 和 Windows（非 Cygwin）上的表现略有不同。

如果您将运行`ndk-build V=1`并将其传输到日志文件（例如`ndk-build V=1 &> logfile`）。你会看到一堆你的对象正在编译，再往下一点你会看到它们被链接，然后是链接错误的“爆炸”——这些错误将与 libgnustl 有关。现在查看导致错误的命令。在 NDK r8d 之前，libgnustl_static 被复制`$(NDK_ROOT)`到您的 objs 目录并从那里链接，现在您应该看到它*在*那里，但由于 gcc 原因我不会让您感到厌烦，它必须在（或接近）末尾。

这是我为修复它所做的...

*   `APP_STL := gnustl_static`从**Application.mk**中删除“”行（它在 NDK 中损坏，在 Linux Cygwin、Windows 上的损坏略有不同）
*   `$(LOCAL_LDLIBS)`在您的**Android.mk**文件中添加一行内容：“

    $(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/libgnustl_static.a

    "

*   **还在Android.mk**中添加两行代码，

    LOCAL_C_INCLUDES := $(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/4.6/include LOCAL_C_INCLUDES += $(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/include

上述将完成`APP_STL := gnustl_static`您的**Application.mk**中应该有的“”。

# c++ - 侦听 UDP 端口

> ID：15432197
> 
> 赞同：2
> 
> 时间：2013-03-15T12:14:11.420
> 
> 标签：c++, udp

我需要连接到端口 500 并打印通过的数据。有人可以指出我正确的方向吗？也许是一个示例程序..

错过了一部分..使用boost asio..

我将 c/c++ 与以下代码一起使用：

```
 int z;
  struct sockaddr_in portList;
  int len_inet;
  int s;
  char dgram[512];
  time_t td;
  struct tm tm;
  s = socket(AF_INET,SOCK_DGRAM,0);
  if ( s == -1 ) {
    strerror(errno);
  }
  memset(&portList,0,sizeof portList);
  portList.sin_family = AF_INET;
  portList.sin_port = htons(500);
  portList.sin_addr.s_addr =  inet_addr("127.0.0.1");

  if ( portList.sin_addr.s_addr == INADDR_NONE ) {
    strerror(errno);
  }
  len_inet = sizeof portList;

  z = bind(s, (struct sockaddr *)&portList, len_inet);
  if ( z == -1 ) {
    strerror(errno);
  }

  for (;;) {
    z = recv(s, dgram, sizeof dgram, 0);
    if ( z < 0 ) {
      strerror(errno);
    }
    std::cout << dgram << std::endl;
  } 
```

但我得到的只是垃圾值，例如：

```
����҉ 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：-6
> 
> 时间：2013-03-15T13:20:48.447

看beej的socket编程指南

> [http://beej.us/guide/bgnet/](http://beej.us/guide/bgnet/)

# visual-studio-2010 - Visual Studio 可扩展性：输出中的自定义跟踪“源”

> ID：15432200
> 
> 赞同：1
> 
> 时间：2013-03-15T12:14:24.043
> 
> 标签：visual-studio-2010, visual-studio-extensions

在 VS 包中，如何在此`Output`下拉列表中为我的跟踪消息创建单独的条目？

![显示来自：构建、调试等的输出](../Images/8bdccb383d2dd3ca68df57da0b93a153.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:33:25.093

说明写[在](http://msdn.microsoft.com/en-us/library/bb168598%28v=vs.100%29.aspx)备注部分。You`QueryService(typeof(SVsOutputWindow))`它为您提供了`IVsOutputWindow`可用于与之交互的界面。

您可以动态创建窗格或预先注册它们。如果你想预先注册它们，你可以在注册表中粘贴一些键来注册一个。假设您正在部署为 .vsix 扩展名，您可以手动将这些键添加到 .pkgdef 中，或者使用 VisualGit 的[ProvideOutputWindowAttribute](https://github.com/pvginkel/VisualGit/blob/master/VisualGit.Package/Attributes/ProvideOutputWindow.cs)之类的东西，它实现了一个 ProvideOutputWindowAttribute，您只需将其与您的其余部分一起放在您的 Package 类上 *属性。

# android - 无法在我的自定义 ArrayAdapter 中访问 R.layout.mylayoutname

> ID：15432201
> 
> 赞同：6
> 
> 时间：2013-03-15T12:14:26.110
> 
> 标签：android, android-layout, android-arrayadapter, layout-inflater, custom-adapter

我正在尝试为我的类别列表创建一个自定义适配器。出于某种原因，当我尝试为它充气时，我无法访问我的 category_item 布局。这是我的代码：

```
public class CategoryAdapter extends ArrayAdapter<Category> {

    LayoutInflater mInflater;
    List<Category> list;

public CategoryAdapter(Context context, int resource, int textViewResourceId, List<Category> objects) {
    super(context, resource, textViewResourceId, objects);

    mInflater = LayoutInflater.from(context);
    list = objects;
}

public View getView(int position, View convertView, ViewGroup parent) {

    final ViewHolder holder;

    if(convertView==null){

        convertView=mInflater.inflate(***resource***, null);
        holder = new ViewHolder();

    }

    return convertView;
}

// Declaring new class ViewHolder
class ViewHolder{
    TextView category_name;
} 
```

它说`resource`我应该能够访问我的 category_item.xml 布局 - R.layout.category_item。但由于某种原因，我没有在列表中看到它，我无法访问它。事实上，我在列表中看不到我的任何布局。

为什么会发生，如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T12:23:31.663

导入您的`packagename.R`文件，它将工作。您可能导入了`android.R`. 由于您的资源存在于您的应用程序包中，只需更正它即可。

android.R 指的是sdk资源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T12:18:40.237

有可能你导入了android资源包`android.R`

确保你导入了你的包资源`com.yourpackagename.R`。这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T12:19:58.320

检查您的代码，我认为您已在代码中导入`android.R`。去掉它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-17T15:28:41.833

Project -> Clean 这将重新生成该 R 文件，这也应该可以工作。

# java - 从泛型方法调用非泛型方法

> ID：15432209
> 
> 赞同：0
> 
> 时间：2013-03-15T12:14:56.243
> 
> 标签：java, generics

我有一些针对特定对象 EX 重载的非通用方法：

```
protected boolean internalAdd(IP4BlockObject block) {...}
protected boolean internalAdd(IP4NetworkObject network) {...} 
```

我想写一种方法

```
protected <T extends AbstractEntityObject>boolean internalAdd(T t) {} 
```

我可以从这个方法调用非泛型方法（不使用 instanceof 运算符；））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:23:19.027

不，那将是编译时错误。

> 类型中的方法 internalAdd(IP4BlockObject) 不适用于参数 (T)

因为您的类型方法：

```
protected boolean internalAdd(IP4BlockObject block) {...}
protected boolean internalAdd(IP4NetworkObject network) {...} 
```

对于你来说，`protected <T extends AbstractEntityObject>boolean internalAdd(T t) {}`你会得到`t`T 的类型。所以如果你打电话：

```
internalAdd(t); 
```

这会给你编译时错误，因为`internalAdd()`只有 expect`IP4BlockObject`或`IP4NetworkObject`.

**注意：**如果所有这些方法都在同一个类上，那么`internalAdd(t);`将再次调用您的泛型方法，因此您最终将陷入无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:46:12.807

我想`IP4BlockObject`和`IP4NetworkObject`扩展`AbstractEntityObject`，你想使用抽象引用在一些重载方法之间分派？我是这样，我真的不明白为此使用通用方法的目的。你为什么不这样声明这个方法：

```
boolean internalAdd(AbstractEntityObject object) {} 
```

然后您需要为给定对象选择所需的方法。`instance of`如果不使用运算符或某些多态方法给出派生类的类型，则没有直接的方法可以做到这一点，例如。作为`enum`.

如果您想摆脱这种情况，您可以重写代码并允许派生类自己选择所需的方法，方法是使用某个接口调用它们的多态方法。但这真的值得吗？

# java - 触发链接但不更改页面内容

> ID：15432214
> 
> 赞同：0
> 
> 时间：2013-03-15T12:15:26.810
> 
> 标签：java, javascript, redirect

是否可以触发 2 个链接，但实际上只有一个被加载？我需要“注销”而不是加载，而是以某种方式在后台触发（隐藏），这样他就可以执行“注销”功能。

```
script type="text/javascript">
  window.location.href='logout.html';
  window.location.href='index.html';
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:22:16.783

使用 ajax 来实现这一点。没有必要加载您要执行的每个 url。这就是现代网页的设计方式。谷歌更多关于 ajax。

您可以使用[jquery ajax](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
            type: "GET",
            url: redirecturl,
            async: true,
            success: function (response) {
                // called when the call executes successfully
            },
            error: function (response) {
                // called when the call cant execute successfully
            }
        }); 
```

# opengl - 如何相对于全局平面镜像对象

> ID：15432215
> 
> 赞同：0
> 
> 时间：2013-03-15T12:15:28.403
> 
> 标签：opengl

我正在渲染几个按层次排序的对象，其中大多数只知道其父对象的相对坐标系：

```
room()
{
    glPushMatrix();
    glMultMatrix(...);

    glBegin();
    ...
    glEnd();

    box();
    glPopMatrix();
}

box()
{
    glPushMatrix();
    glMultMatrix(...);

    glBegin();
    ...
    glEnd();

    line();
    glPopMatrix();
}

line()
{
    glPushMatrix();
    glMultMatrix(...);

    lineEntitiy();
    //mirror with respect to a global plane
    lineEntity();

    glPopMatrix();
}

lineEntity()
{
    glBegin();
    ...
    glEnd();
} 
```

我现在想在一个已知的全局平面上镜像这些对象之一（`line`在`lineEntity`这个例子中）；我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:11:15.503

理想情况下，停止使用 OpenGL 的矩阵堆栈。没有认真的程序使用它，大多数都滚动他们自己的矩阵数学并且只使用 glLoadMatrix 加载最终结果，或者在现代 OpenGL 程序中将其加载到矩阵统一中。与流行的看法相反，OpenGL 矩阵函数并非永远不会被 GPU 加速。

通过不绑定到固定函数 OpenGL 的矩阵堆栈，您可以利用变换层次结构的任何步骤并插入其他变换，例如镜像变换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:11:31.260

如果您不使用旧的/已弃用的 GL 矩阵函数，这可能会更容易，因为您可以更好地控制空间矩阵之间的转换。

不过原理是一样的：

将当前模型变换矩阵与反映有关平面的矩阵预乘。您的平面需要位于适当的空间中，因此如果（如旧 GL 方案中的传统方法）您将视图矩阵和模型矩阵连接在一起，则需要考虑相机变换。

所以你有的是这样的：

```
Matrix = View * Model 
```

你需要：

```
Matrix' = View * Reflect * Model 
```

因此，您要么需要将这些转换分开，要么执行以下操作：

```
Matrix' = (View * Reflect * InverseView) * (View * Model) 
```

后半部分是当前的 ModelView 矩阵，前半部分是您当前视图的常量。中间的`InverseView * View`部分将取消，从而产生正确的变换。然而，这确实涉及一些有效的冗余数学，包括矩阵求逆，并希望证明为什么执行您自己的矩阵运算并直接产生您需要的变换会更好。

# python - 是否应该在每个响应上设置 cookie 标头？

> ID：15432219
> 
> 赞同：6
> 
> 时间：2013-03-15T12:15:42.967
> 
> 标签：python, http, session, pyramid

假设您正在实施会话。

您检查浏览器是否提供会话 cookie。如果是，您验证 cookie 并找到与会话关联的用户，然后继续处理请求。

如果您没有找到会话 cookie，则创建一个新会话并将 cookie 发送到您希望在后续请求中接收的浏览器。

现在我的问题是：如果您确实在请求中找到了会话 cookie，您会在响应中**重新发送**相同的 cookie。在什么情况下这是对的？

注意：我作为 Pyramid (Python) 程序员提出这个问题，因为 Pyramid 实现在每次响应时都会无条件地发送会话 cookie。（[去代码](https://github.com/Pylons/pyramid/blob/master/pyramid/session.py)）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T12:23:32.037

通常，您不需要在每个响应上都设置 cookie。浏览器已经拥有 cookie，只要它仍然有效，它就会继续发送到服务器。

具体来说，每个请求都会设置一个 Pyramid 会话 cookie，因为它包含一个签名和时间戳记的秘密，该秘密可以与正常的 cookie 过期机制分开过期。通过在Pyramid 每次更新嵌入的时间戳时设置一个*新的 cookie 以显示会话仍然是新鲜的。*换句话说，cookie 集每次都是不同的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T12:26:16.973

对于*会话*cookie（如浏览器会话 cookie，客户端将在关闭后立即销毁）我可能不会这样做。它并没有取得任何特别的成就，并且像这样不断重复自己是浪费带宽（尽管是少量）。

> > 这里有一块饼干。
> < 谢谢！
> > 不，真的，吃一块饼干。
> < 那不是同一个饼干吗？
> > 说真的，吃这个饼干。
> <请停止。

只有在更改某些内容时再次发送 cookie 才有意义。因此，对于具有绝对到期时间的 cookie，您可能希望每隔一段时间更新该到期时间。显然，如果您要更改存储在 cookie 中的值，您还将再次发送标头。

我通常是一名 PHP 开发人员，PHP 原生会话也执行此操作（每次无条件发送）。我想这样做的原因是a）它更容易实现和b）它试图解释行为不正常的用户代理，可能忽略到期时间或未能将cookie写入客户端持久存储或<插入其他奇怪此处的行为>。

如果每个人都正确实现了 2109/2965，那么绝对没有理由多次设置语义相同的 cookie。但是，如果人们真的阅读标准，开发人员的生活会不会很枯燥？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-23T17:31:41.680

并非一切都是浏览器。例如，在分布式系统中，您可以从一个节点登录并使用同一会话从其他节点访问服务（如果您有一千个节点，您不想从每个节点登录）现在假设其中一个节点注意到cookie 即将过期，它会更新 cookie。其他节点不会知道更改，并且会再次更新 cookie 或使用旧的。在任何一种情况下，您的整个系统都会停止工作，除非您进行一些复杂的节点间消息传递。您可以针对这种情况实施 JWToken 之类的东西，但它有其自身的缺点（例如无法注销），因此它并不总是可以接受的。除了浏览器不理解 jwtokens。

# c# - 可比的 不实施

> ID：15432227
> 
> 赞同：4
> 
> 时间：2013-03-15T12:16:17.847
> 
> 标签：c#, icomparable

我已经从 using 更改`IComparable`为`IComparable<Artist>`但是我收到了错误

> “RecordCollection.Artist”未实现接口成员“System.IComparable.CompareTo(object)”

```
class Artist : IComparable<Artist> 
```

我添加了一个 CompareTo 方法。

不知道这个错误是什么意思，任何描述我为什么会得到这个错误的帮助都会很棒。

```
class Artist : IComparable<Artist>
{
    private String Name;
    private int NoMem;

    public Artist(string Name, int NoMem)
    {
        this.Name = Name;
        this.NoMem = NoMem; 
    }

 public int CompareTo(Artist other)
    {
        if (other == null) return 1;
        else
            return 0;
    }
} 
```

新艺术家 AVL 树

```
 AVLTree<Artist> treeAVL = new AVLTree<Artist>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:38:18.703

您必须确保您定义的项目`Artist`编译时没有错误。否则，您的其他项目将不会接受更改，并且仍然认为`Artist`implements`IComparable`而不是`IComparable<T>`. 那是您收到编译时错误的时候：

> “RecordCollection.Artist”未实现接口成员“System.IComparable.CompareTo(object)”

也没有技术需要实施`CompareTo(object)`，它不会解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:34:05.577

如果您复制并粘贴了该错误，看起来您应该`CompareTo`像这样实现：

```
public int CompareTo(object other)
{
    if (other == null) return 1;
        else
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:34:11.497

消息：

> “RecordCollection.Artist”未实现接口成员“System.IComparable.CompareTo(object)”

清楚地表明它认为你的类仍然声明它在`IComparable`某个地方实现。您可能想找到它（它可能在不同的文件中`partial class`）。但是，我个人认为包含非类型化支持是正确的。我只想补充：

```
int IComparable.CompareTo(object obj)
{
    return CompareTo(obj as Artist);
} 
```

# java - 如何将数据插入此实体对象？

> ID：15432229
> 
> 赞同：0
> 
> 时间：2013-03-15T12:16:29.203
> 
> 标签：java, entity

这是我的实体类

```
package entity;

import java.io.Serializable;
import java.util.Date;
import java.util.List;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;

@Entity
@Table(name = "RESERVATION")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Reservation.findAll", query = "SELECT r FROM Reservation r"),
    @NamedQuery(name = "Reservation.findByReservationid", query = "SELECT r FROM Reservation r WHERE r.reservationid = :reservationid"),
    @NamedQuery(name = "Reservation.findByReservationdate", query = "SELECT r FROM Reservation r WHERE r.reservationdate = :reservationdate")})
public class Reservation implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 10)
    @Column(name = "RESERVATIONID")
    private String reservationid;
    @Column(name = "RESERVATIONDATE")
    @Temporal(TemporalType.DATE)
    private Date reservationdate;
    @OneToMany(mappedBy = "loginid")
    private List<Reservation> reservationList;
    @JoinColumn(name = "LOGINID", referencedColumnName = "LOGINID")
    @ManyToOne
    private Reservation loginid;

    public Reservation() {
    }

    public Reservation(String reservationid) {
        this.reservationid = reservationid;
    }

    public String getReservationid() {
        return reservationid;
    }

    public void setReservationid(String reservationid) {
        this.reservationid = reservationid;
    }

    public Date getReservationdate() {
        return reservationdate;
    }

    public void setReservationdate(Date reservationdate) {
        this.reservationdate = reservationdate;
    }

    @XmlTransient
    public List<Reservation> getReservationList() {
        return reservationList;
    }

    public void setReservationList(List<Reservation> reservationList) {
        this.reservationList = reservationList;
    }

    public Reservation getLoginid() {
        return loginid;
    }

    public void setLoginid(Reservation loginid) {
        this.loginid = loginid;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (reservationid != null ? reservationid.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {

        if (!(object instanceof Reservation)) {
            return false;
    }
        Reservation other = (Reservation) object;
        if ((this.reservationid == null && other.reservationid != null) || (this.reservationid != null && !this.reservationid.equals(other.reservationid))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "entity.Reservation[ reservationid=" + reservationid + " ]";
}

} 
```

我应该如何将数据插入到这个表中？？？我的桌子

ReservationID VARCHAR(10)
loginid VARCHAR(20)（来自 members 表的外键）
TourID VARCHAR(10)（来自 tourpackage 表的外键）
ReservationDate DATE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:32:44.233

仅通过查看实体就不确定您正在使用的框架

如果您使用 EJB3

您可以使用`EntityManager`并调用该`Persist(entity)`方法来保存实体

如果您使用的是原始 Hibernate

获取`Session`和使用`save`方法

会话 -> org.hibernate.Session

# php - 在 Codeigniter 中更改页面的 URL

> ID：15432230
> 
> 赞同：0
> 
> 时间：2013-03-15T12:16:29.977
> 
> 标签：php, javascript, html, codeigniter, url

这是交易：我有一个用户登录的登录表单。如果验证通过，他们将被重定向到

```
example.com/members/landing 
```

我怎样才能将其更改为仅`example.com/landing`. 有没有办法改变浏览器上显示给用户的url，而在后面，form_open 有不同的调用方法

例如：如上所述，代码形式为

```
<?php echo form_open(members/landing); ?> 
```

但浏览器必须显示登陆或任何东西....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:54:36.237

在 config/routes.php 中：

```
$route['landing'] = '/members/landing'; 
```

这样做是将任何请求发送`example.com/landing`到 `example.com/members/landing`控制器。那么你的表格：

```
<?php echo form_open('/landing'); ?> 
```

应该按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:34:22.797

您正在使用 codeigniter，编辑您的 routes.php 并更改默认控制器；或者如果您只需要显示自定义 URL，您可以使用 .htaccess 文件。

# validation - 之间的区别 属性和 标签

> ID：15432234
> 
> 赞同：2
> 
> 时间：2013-03-15T12:16:40.407
> 
> 标签：validation, jsf

`<h:inputXxx validator>`使用属性和`<f:validator>`标签有什么区别？

```
<h:inputText ... validator="someValidator"> 
```

```
<h:inputText ...>
    <f:validator validatorId="someValidator" /> 
```

我什么时候应该使用哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:46:12.387

该`validator`属性允许您引用独立的托管 bean 方法，而不仅仅是验证器 ID，如下所示：

```
<h:inputSomething validator="#{bean.validate}" /> 
```

使用`validate(FacesContext context, UIComponent component, Object value)`支持 bean 类中的方法而不需要`Validator`实现。

允许您在`<f:validator>`输入上注册多个验证器，而不是仅通过`validator`属性注册一个。

使用哪一个取决于具体的功能要求。只需选择需要最少代码量的代码，这样您就可以得到干净的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:47:13.477

假设我们这里有 Spring Configs。

然后在第一种情况下，“fooValidator”将是一个`<beanId>`，并且将调用相应的类（即验证器类）并进行验证。

在第二种情况下，应该类似于`"#{someBean.validationMethod}"`. 在这种情况下，将调用验证方法。

第一个是好方法。因为在这种情况下，我们的验证器类扩展了 JSF 的默认 Validator 接口并实现了 validate() 方法。

第二个很好，如果您想自定义验证过程。

First 将在您的页面呈现时被调用，并且不太确定 second。但我认为，这也是在渲染时调用的。

# ios - 在我的 iOS 应用程序中恢复应用程序购买方法

> ID：15432235
> 
> 赞同：1
> 
> 时间：2013-03-15T12:16:43.050
> 
> 标签：ios, objective-c, xcode, in-app-purchase

这些是我实施 IAP 的第一步，所以请放轻松。我必须在我的应用程序上实现恢复应用程序按钮，但我不知道从哪里开始/修改

这是我的 IAP 课程

```
#import "IAPHelper.h"

@implementation IAPHelper
@synthesize productIdentifiers = _productIdentifiers;
@synthesize products = _products;
@synthesize purchasedProducts = _purchasedProducts;
@synthesize request = _request;

- (id)initWithProductIdentifiers:(NSSet *)productIdentifiers {
    if ((self = [super init])) {

        // Store product identifiers
        _productIdentifiers = [productIdentifiers retain];

        // Check for previously purchased products
        NSMutableSet * purchasedProducts = [NSMutableSet set];
        for (NSString * productIdentifier in _productIdentifiers) {
            BOOL productPurchased = [[NSUserDefaults standardUserDefaults] boolForKey:productIdentifier];
            if (productPurchased) {
                [purchasedProducts addObject:productIdentifier];
                NSLog(@"Previously purchased: %@", productIdentifier);
            }
            NSLog(@"Not purchased: %@", productIdentifier);
        }
        self.purchasedProducts = purchasedProducts;

    }
    return self;
}

- (void)requestProducts {

    self.request = [[[SKProductsRequest alloc] initWithProductIdentifiers:_productIdentifiers] autorelease];

    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];

    _request.delegate = self;
    [_request start];
}

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {

    NSLog(@"Received products results..."); 
    NSLog(@"Invalid ...%d", [response.invalidProductIdentifiers count]); 

    if([response.invalidProductIdentifiers count]>0)
    {
        return;
    }

    self.products = response.products;
    self.request = nil;

    SKProduct * proUpgradeProduct = [self.products count] == 1 ? [[self.products objectAtIndex:0] retain] : nil;
    if (proUpgradeProduct)
    {
        NSLog(@"Product title: %@" , proUpgradeProduct.localizedTitle);
        NSLog(@"Product description: %@" , proUpgradeProduct.localizedDescription);
        NSLog(@"Product price: %@" , proUpgradeProduct.price);
        NSLog(@"Product id: %@" , proUpgradeProduct.productIdentifier);
    }

    [[NSNotificationCenter defaultCenter] postNotificationName:kProductsLoadedNotification object:_products];    
}

- (void)recordTransaction:(SKPaymentTransaction *)transaction {    
    // TODO: Record the transaction on the server side...    
}

- (void)provideContent:(NSString *)productIdentifier {

    NSLog(@"Toggling flag for: %@", productIdentifier);

    [[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:productIdentifier];
    [[NSUserDefaults standardUserDefaults] synchronize];
    [_purchasedProducts addObject:productIdentifier];

    [[NSNotificationCenter defaultCenter] postNotificationName:kProductPurchasedNotification object:productIdentifier];

}

- (void)completeTransaction:(SKPaymentTransaction *)transaction {

    NSLog(@"completeTransaction...");

    [self recordTransaction: transaction];
    [self provideContent: transaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];

}

- (void)restoreTransaction:(SKPaymentTransaction *)transaction {

    NSLog(@"restoreTransaction...");

    [self recordTransaction: transaction];
    [self provideContent: transaction.originalTransaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];

}

- (void)finishTransaction:(SKPaymentTransaction *)transaction wasSuccessful:(BOOL)wasSuccessful
{
    // remove the transaction from the payment queue.
    [[SKPaymentQueue defaultQueue] finishTransaction:transaction];

    NSDictionary *userInfo = [NSDictionary dictionaryWithObjectsAndKeys:transaction, @"transaction" , nil];
    if (wasSuccessful)
    {
        // send out a notification that we’ve finished the transaction
        [[NSNotificationCenter defaultCenter] postNotificationName:kInAppPurchaseManagerTransactionSucceededNotification object:self userInfo:userInfo];
    }
    else
    {
        // send out a notification for the failed transaction
        [[NSNotificationCenter defaultCenter] postNotificationName:kInAppPurchaseManagerTransactionFailedNotification object:self userInfo:userInfo];
    }
}

- (void)failedTransaction:(SKPaymentTransaction *)transaction {

    if (transaction.error.code != SKErrorPaymentCancelled)
    {
        // error!
        [self finishTransaction:transaction wasSuccessful:NO];
    }
    else
    {
        // this is fine, the user just cancelled, so don’t notify
        [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
    }
}

- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                [self completeTransaction:transaction];
                break;
            case SKPaymentTransactionStateFailed:
                [self failedTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:
                [self restoreTransaction:transaction];
            default:
                break;
        }
    }
}

- (void)buyProductIdentifier:(NSString *)productIdentifier {

    NSLog(@"Buying %@...", productIdentifier);

    SKPayment *payment = [SKPayment paymentWithProductIdentifier:productIdentifier];
    [[SKPaymentQueue defaultQueue] addPayment:payment];

}

- (void)dealloc
{
    [_productIdentifiers release];
    _productIdentifiers = nil;
    [_products release];
    _products = nil;
    [_purchasedProducts release];
    _purchasedProducts = nil;
    [_request release];
    _request = nil;
    [super dealloc];
}

@end 
```

我一直在阅读一些东西，但在“updatedTransactions”部分，我在添加 SKPaymentRestore 时遇到了一些问题。

有人可以给我一些建议吗？感谢阅读/帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-11T12:34:35.997

使用 RMStore 进行应用内购买。用于应用内购买的轻量级 iOS 库。RMStore 将块和通知添加到 StoreKit，以及收据验证、内容下载和交易持久性。一站式服务，没有外部依赖。将此添加到恢复按钮中。恢复交易

```
 [[RMStore defaultStore] restoreTransactionsOnSuccess:^{
    NSLog(@"Transactions restored");
    } failure:^(NSError *error) {
      NSLog(@"Something went wrong");
     }]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:45:36.993

只需在您的恢复按钮上添加此代码单击

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

# wix - 自定义 WiX FeaturesDlg - 实时更改 WiX UI

> ID：15432236
> 
> 赞同：0
> 
> 时间：2013-03-15T12:16:46.400
> 
> 标签：wix, wix-extension

我想自定义 WiX FeaturesDlg，以便如果选择了特定的服务器功能，用户可以单击按钮并设置用于服务的用户凭据。我已经制定了一个解决方案，但是我注意到“选择用户”按钮不会在用户更改功能时启用/禁用 - 只有当用户单击返回然后单击下一步返回到对话框时才会重新评估. 有没有办法可以在功能更改发生时重新评估条件？

```
<?xml version="1.0" encoding="utf-8"?>
<!--
    Copyright (c) Microsoft Corporation.  All rights reserved.

    The use and distribution terms for this software are covered by the
    Common Public License 1.0 (http://opensource.org/licenses/cpl1.0.php)
    which can be found in the file CPL.TXT at the root of this distribution.
    By using this software in any fashion, you are agreeing to be bound by
    the terms of this license.

    You must not remove this notice, or any other, from this software.
-->
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <UI>
            <Dialog Id="NewFeaturesDialog" Width="370" Height="270" Title="!(loc.FeaturesDlg_Title)" TrackDiskSpace="yes">
              <Control Id="Tree" Type="SelectionTree" X="20" Y="55" Width="330" Height="121" Property="_BrowseProperty" TabSkip="no" Text="!(loc.FeaturesDlgTree)"></Control>            
                <Control Id="Back" Type="PushButton" X="156" Y="243" Width="56" Height="17" Text="!(loc.WixUIBack)" />
                <Control Id="Install" Type="PushButton" ElevationShield="yes" X="212" Y="243" Width="80" Height="17" Hidden="yes" Text="!(loc.FeaturesDlgInstall)">
                    <Condition Action="show">NOT Installed AND ALLUSERS</Condition>
                    <Condition Action="default">NOT Installed</Condition>
                    <Publish Event="SpawnWaitDialog" Value="WaitForCostingDlg">!(wix.WixUICostingPopupOptOut) OR CostingComplete = 1</Publish>
                    <Publish Event="EndDialog" Value="Return"><![CDATA[OutOfDiskSpace <> 1]]></Publish>
                    <Publish Event="SpawnDialog" Value="OutOfRbDiskDlg">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND (PROMPTROLLBACKCOST="P" OR NOT PROMPTROLLBACKCOST)</Publish>
                    <Publish Event="EndDialog" Value="Return">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="EnableRollback" Value="False">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="SpawnDialog" Value="OutOfDiskDlg">(OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 1) OR (OutOfDiskSpace = 1 AND PROMPTROLLBACKCOST="F")</Publish>
                </Control>
                <Control Id="InstallNoShield" Type="PushButton" ElevationShield="no" X="212" Y="243" Width="80" Height="17" Hidden="yes" Text="!(loc.FeaturesDlgInstall)">
                    <Condition Action="show">NOT Installed AND NOT ALLUSERS</Condition>
                    <Condition Action="default">NOT Installed</Condition>
                    <Publish Event="SpawnWaitDialog" Value="WaitForCostingDlg">!(wix.WixUICostingPopupOptOut) OR CostingComplete = 1</Publish>
                    <Publish Event="EndDialog" Value="Return"><![CDATA[OutOfDiskSpace <> 1]]></Publish>
                    <Publish Event="SpawnDialog" Value="OutOfRbDiskDlg">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND (PROMPTROLLBACKCOST="P" OR NOT PROMPTROLLBACKCOST)</Publish>
                    <Publish Event="EndDialog" Value="Return">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="EnableRollback" Value="False">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="SpawnDialog" Value="OutOfDiskDlg">(OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 1) OR (OutOfDiskSpace = 1 AND PROMPTROLLBACKCOST="F")</Publish>
                </Control>
                <Control Id="Change" Type="PushButton" ElevationShield="yes" X="212" Y="243" Width="80" Height="17" Hidden="yes" Text="!(loc.FeaturesDlgChange)">
                    <Condition Action="show">Installed AND ALLUSERS AND (ADDLOCAL OR REMOVE)</Condition>
                    <Condition Action="default">Installed</Condition>
                    <Publish Event="EndDialog" Value="Return"><![CDATA[OutOfDiskSpace <> 1]]></Publish>
                    <Publish Event="SpawnDialog" Value="OutOfRbDiskDlg">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND (PROMPTROLLBACKCOST="P" OR NOT PROMPTROLLBACKCOST)</Publish>
                    <Publish Event="EndDialog" Value="Return">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="EnableRollback" Value="False">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="SpawnDialog" Value="OutOfDiskDlg">(OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 1) OR (OutOfDiskSpace = 1 AND PROMPTROLLBACKCOST="F")</Publish>
                </Control>
                <Control Id="ChangeNoShield" Type="PushButton" ElevationShield="no" X="212" Y="243" Width="80" Height="17" Hidden="yes" Text="!(loc.FeaturesDlgChange)">
                    <Condition Action="show">Installed AND (NOT ALLUSERS OR (NOT ADDLOCAL AND NOT REMOVE))</Condition>
                    <Condition Action="default">Installed</Condition>
                    <Publish Event="EndDialog" Value="Return"><![CDATA[OutOfDiskSpace <> 1]]></Publish>
                    <Publish Event="SpawnDialog" Value="OutOfRbDiskDlg">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND (PROMPTROLLBACKCOST="P" OR NOT PROMPTROLLBACKCOST)</Publish>
                    <Publish Event="EndDialog" Value="Return">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="EnableRollback" Value="False">OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 0 AND PROMPTROLLBACKCOST="D"</Publish>
                    <Publish Event="SpawnDialog" Value="OutOfDiskDlg">(OutOfDiskSpace = 1 AND OutOfNoRbDiskSpace = 1) OR (OutOfDiskSpace = 1 AND PROMPTROLLBACKCOST="F")</Publish>
                </Control>
                <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="!(loc.WixUICancel)">
                    <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
                </Control>
                <Control Id="BannerBitmap" Type="Bitmap" X="0" Y="0" Width="370" Height="44" TabSkip="no" Text="!(loc.FeaturesDlgBannerBitmap)" />
                <Control Id="BannerLine" Type="Line" X="0" Y="44" Width="370" Height="0" />
                <Control Id="BottomLine" Type="Line" X="0" Y="234" Width="370" Height="0" />
                <Control Id="Description" Type="Text" X="25" Y="23" Width="280" Height="15" Transparent="yes" NoPrefix="yes" Text="!(loc.FeaturesDlgDescription)" />
                <Control Id="Title" Type="Text" X="15" Y="6" Width="210" Height="15" Transparent="yes" NoPrefix="yes" Text="!(loc.FeaturesDlgTitle)" />
                <Control Id="ItemDescription" Type="Text" X="20" Y="180" Width="330" Height="24" Transparent="yes" NoPrefix="yes" Text="!(loc.FeaturesDlgItemDescription)">
                    <Subscribe Event="SelectionDescription" Attribute="Text" />
                </Control>
                <Control Id="ItemSize" Type="Text" X="20" Y="209" Width="330" Height="24" Transparent="yes" NoPrefix="yes" Text="!(loc.FeaturesDlgItemSize)">
                    <Subscribe Event="SelectionSize" Attribute="Text" />
                </Control>
                <Control Type="PushButton" Id="SelectUser" Width="56" Height="17" X="292" Y="188">
                    <Text>Select User</Text>
                  <Condition Action="disable"><![CDATA[NOT (&ServerComponents=4 OR NOT &ServerComponents=3)]]></Condition>
                  <Condition Action="enable"><![CDATA[ (&ServerComponents=4 OR &ServerComponents=3)]]></Condition>
                </Control>
            </Dialog>
        </UI>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:16:28.007

Windows Installer 本机 UI 中存在某些限制（竞争条件），例如您所看到的。如果您将“选择用户”功能移动到下一个对话框，它将正确评估。

# c# - 为我的数据创建 MVC ViewModel

> ID：15432246
> 
> 赞同：0
> 
> 时间：2013-03-15T12:17:02.107
> 
> 标签：c#, asp.net-mvc

我对这个 MVC 东西还是新手，所以我对 MVC 视图模型的理解是正确的。它们本质上是直接与视图交互的模型，而常规模型可能与视图交互，也可能不与视图交互。所以我有两个类 UserModel 和 ArticleModel。显示所有用户信息的最佳方式是什么，加上其中一篇文章的描述，我会为此创建一个视图模型吗？我是否只是创建一个返回 UserModel 和 ArticleModel 实例的视图模型，还是有更好的方法？

我目前的课程：

```
public class UserModel
{
    public int UserId { get; set; }
    public String FirstName { get; set; }
    public String LastName { get; set; }
    public DateTime CreatedDate { get; set; }
}

public class ArticleModel
{
    public int ArticleId { get; set; }
    public String Title { get; set; }
    public String Description { get; set; }
    public DateTime AddDate { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:19:59.503

你似乎有正确的想法。通常，您会希望将视图模型传递给您的视图，尤其是在这种需要来自两个或多个实体模型的数据的情况下。在这个站点上，我们经常看到人们通过 ViewBag 或 ViewData 发送实体模型，然后发送一些其他数据，并且不可避免地，他们的问题的解决方案是使用视图模型。

视图模型可能如下所示：

```
public class ViewModel
{
    public int UserId { get; set; }
    public String FirstName { get; set; }
    public String LastName { get; set; }
    public DateTime CreatedDate { get; set; }
    public String Description { get; set; }
} 
```

这个扁平化版本对于在视图模型级别而不是实体模型级别添加数据注释很有用。当您可能希望在一个视图中需要一个字段但在另一个视图中不需要时非常方便。

或者像这样

```
public class ViewModel
{
   public UserModel UserModel { get; set; }
   public String Description { get; set; }
} 
```

你*可以*这样做

```
public class ViewModel
{
   public UserModel UserModel { get; set; }
   public ArticleModel ArticleModel { get; set; }
} 
```

但是你会向视图发送多余的数据，随着他们的应用程序范围的扩大，这通常会给人们带来问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:22:41.857

需要遵循的一些规则和最佳实践：-

*   所有视图都是强类型的
*   对于每个 ViewModel 类型，都定义了一个强类型视图
*   View 决定了 ViewModel 的设计。只有渲染视图所需的内容才会通过 ViewModel 传入。
*   ViewModel 仅包含与 View 相关的数据和行为

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T15:22:19.587

通常，使用视图模型是一种很好的做法。使用它们有几个优点。我认为 viewmodel 的很多细节，你可以在互联网上找到，也可以在堆栈溢出上找到。
因此，让我举一个例子或一个起点，
假设我们有一个视图模型；

```
public class CategoryViewModel
{
    [Key]
    public int CategoryId { get; set; }
    [Required(ErrorMessage="* required")]
    [Display(Name="Name")]
    public string CategoryName { get; set; }
    [Display(Name = "Description")]
    public string CategoryDescription { get; set; }
    public ICollection<SubCategory> SubCategories { get; set; }
} 
```

现在，如果你想在你的存储库项目中使用它。你可以做这样的事情；

```
public List<CategoryViewModel> GetAllCategories()
{
    using (var db =new Entities())
    {
        var categoriesList = db .Categories
            .Select(c => new CategoryViewModel()
            {
                CategoryId = c.CategoryId,
                CategoryName = c.Name,
                CategoryDescription = c.Description
            });
        return categoriesList.ToList<CategoryViewModel>();
    };
 } 
```

如你看到的。在视图模型的情况下，您需要使用投影（因为我已将我的实体投影到视图模型）。
现在，在您的控制器中，您可以轻松访问它们并将其传递给视图本身；

```
ICategoryRepository _catRepo;
    public CategoryController(ICategoryRepository catRepo)
    {
        //note that i have also used the dependancy injection. so i'm skiping that
        _catRepo = catRepo;
    }
    public ActionResult Index()
    {
        //ViewBag.CategoriesList = _catRepo.GetAllCategories();
           or
        return View(_catRepo.GetAllCategories());
    } 
```

现在，您的视图应该是类型`CategoryViewModel`（强类型）

```
@model IEnumerable<CategoryViewModel>
@foreach (var item in Model)
{
    <h1>@item.CategoryName</h1>
} 
```

我希望这能给你一个起点。如果您需要我提供更多信息，请告诉我：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:19:26.223

通常，正在创建具有相似结构的类。因此，视图模型是从视图中填充的，并且从视图模型中我们手动更新模型。

您可以手动将属性从视图模型复制到模型，或者使用反射或使用自动映射器等 API 进行复制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T12:22:08.327

您可以创建一个视图模型，其中包含视图所需的所有属性和集合，以视图所需的正确格式显示数据。此视图模型由您的控制器通过使用 UserModel 和 ArticleModel 实例构建。这可能意味着在视图模型中您拥有模型中没有的属性，反之亦然。

现在，在您的情况下，您的模型似乎已经为您的视图设计，在这种情况下，您可以在视图模型中使用它们的实例；以避免不必要的映射。

最重要的规则是，在视图中应该很容易使用其视图模型的属性并显示它们，也许应用一些基本格式（例如日期）。

根据您提供的信息，我只会将您的视图模型中的现有模型用作属性，因为您可能需要显示所有这些模型并且避免额外的映射。

# excel - 将多个工作表保存到不同的工作簿并使用 VBA 将它们附加到 Outlook

> ID：15432247
> 
> 赞同：0
> 
> 时间：2013-03-15T12:17:02.103
> 
> 标签：excel, vba, outlook

我需要一个宏来完成以下工作：

我有一个 6 张工作簿。每个都有不同的名字。工作表名称为 ENT、GHD、T3 等。

我想复制每张工作表的内容并将其保存到具有不同名称以及日期 n 时间戳的不同工作簿中。

例如，表 ENT 必须保存为 XYZ 报告日期时间。Xlsx 和此文件需要附加到 Outlook。

同样，对于 GHD，文件名应该是 ABC Report DATE TIME。XLSX。对于 T3 表和其余 3 张表也是如此。所有这些文件都将邮寄给不同的人。

这些新文件的问题必须保存到创建它的原始文件的文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:12:46.700

所以你想遍历如下的工作表：

```
for Each xSheet In activeworkbook.worksheets 
```

然后使用工作表名称和工作簿路径调用 saveas 方法

```
xsheet.saveas activeworkbook.path & xSheet.Name & " Report " & vba.forma(now, "dd mmm yyyy hhmmss"), xlnormal 
```

然后你想创建一个 Outlook 邮件项目，设置收件人、主题和附件，然后发送它......

这样您就可以开始了，然后您只需在引用中添加对 Outlook 应用程序的引用即可使用这些对象...

高温高压

菲利普

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T05:23:52.553

```
Sub COMEON()
  Dim onePublishObject As PublishObject
  Dim oneSheet As Worksheet
  Dim scriptingObject As Object
  Dim outlookApplication As Object
  Dim outlookMail As Object
  Dim htmlBody As String
  Dim htmlFile As String
  Dim textStream, fil As String
  Dim dummy As Workbook

  Today = Format(Now(), "dd-mm-yyyy")

  Set dummy = ActiveWorkbook
  Set scriptingObject = CreateObject("Scripting.FileSystemObject")
  Set outlookApplication = CreateObject("Outlook.Application")
  For Each oneSheet In ActiveWorkbook.Worksheets

                                                        Dim StrBody As String
                                                        StrBody = " THIS IS A TEST" & " " & UCase(oneSheet.Name) & " " & "XYZ," & vbNewLine & _
                                                        vbNewLine & _
                                                        "Please FIND ATTACHED <B>'XYZ REPORT'<B>"

    Application.DisplayAlerts = False
    Sheets(oneSheet.Name).Copy
    ActiveWorkbook.SaveAs dummy.Path & "\" & oneSheet.Name & ".xlsx"
    ActiveWorkbook.Close
    Application.DisplayAlerts = True
    Set outlookMail = outlookApplication.CreateItem(0)
    With outlookMail
        .htmlBody = StrBody & htmlBody
        .attachments.Add dummy.Path & "\" & oneSheet.Name & ".xlsx"
        .Display
        .Subject = "XYZ Report" & " " & UCase(oneSheet.Name) & " " & "(" & Today & ")"

    End With
  Next oneSheet
End Sub 
```

# windows-7 - 用于重新启动后台打印程序的批处理文件会删除桌面图标，有人吗？

> ID：15432251
> 
> 赞同：1
> 
> 时间：2013-03-15T12:17:05.770
> 
> 标签：windows-7, printing, batch-file

谁能解释这里发生了什么？

如果这是在我们域中的机器上运行而没有将其提升为管理员，它会删除所有桌面图标。我不知道如何或为什么？

```
@echo off
net stop spooler
IF NOT exist C:\Windows\System32\spool\PRINTERS\*.shd echo NO DOCUMENTS IN QUEUE ONCE THE SPOOLER HAS STARTED TRY PRINTING AGAIN
IF NOT exist C:\Windows\System32\spool\PRINTERS\*.shd msg * NO DOCUMENTS IN QUEUE ONCE THE SPOOLER HAS STARTED TRY PRINTING AGAIN
IF exist C:\Windows\System32\spool\PRINTERS\*.shd del C:\Windows\System32\spool\PRINTERS\*.shd
IF exist C:\Windows\System32\spool\PRINTERS\*.spl del C:\Windows\System32\spool\PRINTERS\*.spl echo PRINTER QUE CLEARED PLEASE TRY PRINTING AGAIN msg * PRINTER QUE CLEARED PLEASE TRY PRINTING AGAIN
net start spooler
pause 
```

任何建议将不胜感激，因为它在今天早上引起了一个轻微的问题，我需要一个解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:09:03.397

问题是您的命令没有按您的意愿组合。之后的所有内容都`del`将被删除——最明显的是之前`net start spooler`包含虚假星号的行。所以本质上你正在调用`del *`，它会删除当前工作目录（表面上是你的桌面）中的所有内容。

如果您希望作为匹配条件的结果发出多个命令`if`，请使用括号和新行。

```
@echo off
net stop spooler
IF NOT exist C:\Windows\System32\spool\PRINTERS\*.shd (
    echo NO DOCUMENTS IN QUEUE ONCE THE SPOOLER HAS STARTED TRY PRINTING AGAIN
    msg * NO DOCUMENTS IN QUEUE ONCE THE SPOOLER HAS STARTED TRY PRINTING AGAIN
) else (
    del C:\Windows\System32\spool\PRINTERS\*.shd
)
IF exist C:\Windows\System32\spool\PRINTERS\*.spl (
    del C:\Windows\System32\spool\PRINTERS\*.spl
    echo PRINTER QUE CLEARED PLEASE TRY PRINTING AGAIN
    msg * PRINTER QUE CLEARED PLEASE TRY PRINTING AGAIN
)
net start spooler
echo Press any key to exit.
pause>NUL 
```

# sql - 不同的表而不是行

> ID：15432255
> 
> 赞同：-5
> 
> 时间：2013-03-15T12:17:14.683
> 
> 标签：sql, database, optimization

我想知道哪种方案更快？

第一种方案：一个表用户，列：cust_id，name，surname（有 100 000 行）

第二种方案：100 000 个由 cust_id 命名的表（每个表中只有一行）

我不问应该怎么做——我知道第二个例子不是很聪明——但我想知道哪个查询更快？查询是否更快

```
select name from users where cust_id = 194923
-> one result: John Doe 
```

或者

```
select name from users_194923
-> one result: John Doe 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:21:33.687

`100 000 tables`真的吗？不要那样做！

显然第二个更快，因为您知道它是什么表并且只有一条记录。但这里有个问题，如果你想搜索 5 个人怎么办？你是怎样做的？如果您不知道该人的存储位置怎么办？

数据库服务器旨在存储大量记录（*不是每个表一个记录*）。

如果您关心记录的搜索，只需在您要经常搜索的列上定义一个索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T13:27:43.317

只是一个快速的练习：

您认为服务器处理 a 时会发生什么`select * from table_123456`？发生了各种各样的魔术，但服务器仍然需要确保表是否`table_123456`存在。在大多数数据库服务器中，验证一个名为存在的表与在一个索引良好的表中`table_123456`验证一个行是否存在的时间尺度大致相同。`id=123456`例如，SQL Server 将表的名称保存在名为`sys.tables`.

想象一下，编写一个返回所有名为“Peter”的用户的查询将是多么有趣。比较这两种方法是[错误](http://en.wikipedia.org/wiki/Wronger_than_wrong)的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T13:02:10.523

您关于第二个模式的问题无关紧要或逻辑较少，因为您无法处理包含 10000 个表的数据库，每个表包含 1 条记录。您必须使用架构 1 ar，它是相关的并在其中显示了一些逻辑。谢谢

# winforms - 为 MS Chart 自定义 x 轴 MS C# Chart 标签

> ID：15432257
> 
> 赞同：1
> 
> 时间：2013-03-15T12:17:18.470
> 
> 标签：winforms, charts

我试图在 x 轴上标记条形图的每个数据点。现在，正如您在附图中看到的那样，仅标记了 4 条（2012 年 4 月 1 日、2012 年 7 月 1 日、2012 年 10 月 1 日、1/12013）。我使用 System.Windows.Forms.DataVisualization.Charting.Axis 的“间隔”属性，但无济于事。任何帮助表示赞赏。谢谢。![在此处输入图像描述](../Images/5ccd5eb83d728bfb5cdf7d01e312c567.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:02:14.213

`LabelStyle`尝试直接在轴上而不是轴上设置间隔。

```
chart1.ChartAreas[0].AxisX.LabelStyle.Interval = 1; 
```

# javascript - mraid 未定义

> ID：15432260
> 
> 赞同：2
> 
> 时间：2013-03-15T12:17:25.863
> 
> 标签：javascript, mraid

我一直在尝试制作符合 mraid 的广告，但还没有走多远。根据官方文档，可以在[这个链接](http://www.iab.net/media/file/IAB_MRAID_v2_FINAL.pdf)找到，添加一个简单的

`<script src='mraid.js'></script>`

应该足够了。然而，情况似乎并非如此。我复制了以下示例代码来测试 mraid 对象的存在，但它只是保持未定义。确切的 FireBug 错误是：

> ReferenceError: mraid 未定义

我正在尝试执行以下（非常简单的）代码：

```
if(mraid.getState() !='ready'){
console.log("MRAID NOT READY");} 
```

有没有人有这个问题的经验？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T14:07:42.973

是的，它没有那么简单，而且规范也不完全清楚。

mraid.js 由您从任何广告平台注入。

它看起来像这样：

应用程序 -> 广告 SDK -> MRAID 广告

广告 SDK 实例化 UIWebView 并注入 mraid.js 以使其可用。然后你上面的脚本标签找到它，加载它，其他一切都从那里自行解决。

您的选择是：

1.  制作你自己的 mraid.js 用于测试目的，它有足够的规范来方便 /testing
2.  启动一个为您执行上述操作的移动广告服务器 SDK，然后对其进行测试
3.  结帐[http://webtester.mraid.org](http://webtester.mraid.org)这将使您避免上述一些

2是最精确的。1 和 3 让您走得更远，但没有什么能比得上应用程序中的真实事物与实际广告服务器的 sdk 处理事物。

# sql-server-2008 - SSIS 包显示 vsjitdebugger 出错

> ID：15432261
> 
> 赞同：2
> 
> 时间：2013-03-15T12:17:27.700
> 
> 标签：sql-server-2008, debugging, ssis

我有一个 SSIS 包，它由调度程序在命令行中通过 DTSExec 使用以下参数启动：

```
"C:\Program Files\Microsoft SQL Server\100\DTS\Binn\DTExec.exe" /F "PackageName.dtsx" /Conf "Production.dtsConfig" /Set "\Package.Variables[User::ParamPromptForValues].Properties[Value]";"False" 
```

有时包会失败（在生产中）并启动 vsjitdebugger，这会使包执行挂起。

问题：如何防止包显示 vsjitdebugger？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:10:09.747

听起来您的包中的某些内容是（a）调用[System.Diagnostics.Debugger.Launch()](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.launch.aspx)或（b）抛出未处理的异常。我从来没有遇到过任何库存 SSIS 组件的这种情况，所以我会怀疑包中的任何定制或第三方组件。

[这篇 MSDN 博客文章](http://blogs.msdn.com/b/shawnfa/archive/2004/07/15/184490.aspx)提出了一些可能的注册表调整。

# javascript - call 方法和 Array.prototype.slice.call 的使用

> ID：15432266
> 
> 赞同：0
> 
> 时间：2013-03-15T12:17:35.420
> 
> 标签：javascript

```
if (!Function.prototype.bind) {
  Function.prototype.bind = function (oThis) {
    if (typeof this !== "function") {
      // closest thing possible to the ECMAScript 5 internal IsCallable function
      throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
    }

    var aArgs = Array.prototype.slice.call(arguments, 1), 
        fToBind = this, 
        fNOP = function () {},
        fBound = function () {
          return fToBind.apply(this instanceof fNOP && oThis
                                 ? this
                                 : oThis,
                               aArgs.concat(Array.prototype.slice.call(arguments)));
        };

    fNOP.prototype = this.prototype;
    fBound.prototype = new fNOP();

    return fBound;
  };
} 
```

我正在查看绑定函数的源代码，我只是在想他们为什么要这样做，`Array.prototype.slice.call`而我可以直接对我的`arguments`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:19:25.077

因为[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)不是纯 JavaScript 数组，而是*类数组对象*。因此，为了对其进行更改，您必须使用将其转换为真正的数组`Array.prototype.slice.call`。

来自**MDN**：

> 该`arguments`对象不是数组。它类似于 Array，但除了 之外没有任何 Array 属性`length`。

# node.js - 对象在 node.js 响应中没有得到新的响应值

> ID：15432267
> 
> 赞同：0
> 
> 时间：2013-03-15T12:17:36.773
> 
> 标签：node.js, express

我有以下内容：

```
var myObject={name:"name"};
var options={
hostname:'www.google.com',
port:80,
method:'GET'
};

var req=http.request(options,function(res){

  res.on('data', function (chunk) {
    myObject.serverResponse=chunk;
    console.log(myObject);
  });

});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);

}); 
```

req.end();

在控制台中我没有得到 serverResponse 键/值对。我刚刚收到原始对象。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:39:28.170

```
var req = http.request(options, function (res) {
  var serverResponse = '';
  res.on('data', function (chunk) {
    serverResponse += chunk;
  });
  res.on('end', function () {
    try {
      myObject.serverResponse = JSON.parse(serverResponse);
      console.log(myObject);
    } catch (err) {
      console.log(err);
    }
  });
}); 
```

# jqgrid - 当行在JqGrid中处于内联编辑模式时，jquery选择器访问最后一个单元格（最后一行的最后一列）

> ID：15432268
> 
> 赞同：1
> 
> 时间：2013-03-15T12:17:37.060
> 
> 标签：jqgrid

想要在 jqGrid 中最后一个单元格的 tab 键按下添加 keydown 事件以添加新行。当行处于内联模式时，请帮助我仅将 keydown 事件附加到网格的最后一个单元格。这是获取 lastrow 的选择器

```
var lastRow = $('#grid>tbody>tr.jqgrow:last'); 
```

1.  如何指定最后一行的最后一列选择器。
2.  请建议是否可以像这样动态绑定事件。
3.  这个绑定事件代码放在哪个地方比较好，比如loadComplete。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:51:49.937

你得到最后一行怎么样`loadcomplete`，然后在最后一列添加一个类。然后，您可以向它添加一个 jQuery 事件处理程序来侦听 tab 键以触发添加新记录功能。

您将如何执行此操作的粗略概述：

获取行的 ID：

```
var rowIds = $(grid).jqGrid('getDataIDs').length; 
```

如果您知道最后一列名称，您可以使用它，否则您可以获得`colNames`数组的长度。

```
var lastCol = $(grid).jqGrid('getGridParam', 'colNames').length; 
```

然后只需通过以下方式将一个类设置为最后一行中的最后一个列：

```
$(grid).jqGrid('setCell', rowIds, lastCol, "", 'TabTriggerClass'); 
```

从那里你应该在最后一行的最后一列上有一个类，你只需绑定一个事件处理程序，然后是 add 函数等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:49:57.340

这就是我使用您的解决方案的方式

```
var bindEventToLastCell = function(){
    jQuery(".TabTriggerClass").on('keydown', function(e){
        if (e.which == 9 && jQuery(e.currentTarget).hasClass('TabTriggerClass')) {

            $(this).removeClass('TabTriggerClass');
            $(this).off(e);
            //Performing other actions
        }
    });
};

var addTabTriggerClassToLastCell = function(grid) {
    var lastRowId = jQuery('#' + jQuery(grid).attr('id') + '>tbody>tr.jqgrow:last').attr('id');
    var lastCol = getLastEditableColumnIndex(grid);
    grid.setCell(lastRowId, lastCol, "", 'TabTriggerClass');
}; 
```

# r - R中函数的运算符重载 - 奇怪的行为

> ID：15432273
> 
> 赞同：8
> 
> 时间：2013-03-15T12:17:57.930
> 
> 标签：r, oop, class, function, reference-class

不幸的是，像`(f+g)(3)`f 和 g 都是一元函数这样的事情在 R 中不起作用。因此，我尝试通过以下方式重载一元函数的“+”运算符：

```
"+.function" = function(e1, e2){
  return(function(x) e1(x) + e2(x))
} 
```

但是，如果我尝试使用它，这将无济于事。编码

```
 a = function(x) 2*x
 (a+a)(2) 
```

`+.function`产生与 if甚至没有定义相同的错误。

玩了一段时间后，我发现实际上有可能以这种方式添加函数：如果函数是引用类的成员函数，那就行了！即，以下代码（连同上面的“+”定义）

```
clsA = setRefClass("clsA", 
  methods = list(
    b = function(x) 2*x
  ))

inst_a = clsA$new()
(inst_a$b + inst_a$b)(2) 
```

返回“8”（如预期的那样）。因此，对于我的问题，我已经有了某种解决方法。现在我的问题是：

这种奇怪行为的原因是什么？为什么不`+.function`关心“普通”函数而是类成员函数？有谁知道如何将运算符“扩展”到常用功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T12:38:58.620

如果您重新定义 的类`a`，例如 like `class(a)<-"ownfunction"`(或更好`class(a)<-c("ownfunction","function")`的 ，并制作您的`"+.function"`as `"+.ownfunction"`，那么就`(a+a)(2)`可以了。

~~似乎`function`该类以某种特殊方式处理：如果您运行`debug("+.function");(a+a)(2)`，您会看到它`"+.function"`甚至没有被调用。~~

编辑：见评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T12:27:58.087

作为一种解决方法，您可以像这样定义一个[特殊的运算符](http://cran.r-project.org/doc/manuals/R-lang.html#Special-operators)( `%...%`)：

```
"%+%" <- function(e1, e2) {
  return(function(x) e1(x) + e2(x))
}

a <- function(x) 2*x
(a %+% a)(2) # == 8 
```

# shell - 使用期望运行命令

> ID：15432275
> 
> 赞同：2
> 
> 时间：2013-03-15T12:18:03.773
> 
> 标签：shell, expect

我创建了一个 shell 脚本，它将自动登录到远程机器。
但我还需要与此脚本一起自动执行命令或 shell 脚本。
我需要对用于在远程机器中创建目录（例如！）的 shell 脚本进行哪些修改？

```
#!/usr/bin/expect
set login "root"
set addr "10.3.2.0"
set pw "root"

spawn ssh -t $login@$addr
expect "$login@$addr's password:"
send "$pw\r"
interact 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:41:40.237

您可以简单地在脚本中添加语句：

```
#!/usr/bin/expect
set login "root"
set addr "10.3.2.0"
set pw "root"

spawn ssh -t $login@$addr
expect "$login@$addr\'s password:"
send "$pw\r"
expect "~" ; # put here string from your server prompt
send "mkdir some_dir\r"
interact 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T17:24:29.870

或者，如果您没有有关提示的信息，那么如何`spawn`可以一一调用带有以下命令的命令`interact`：

```
spawn command1
interact
spawn command2
interact
spawn command3
interact 
```

# macos - 使用 if 循环在字符串的单词中搜索单词（bash-mac 终端）

> ID：15432276
> 
> 赞同：-1
> 
> 时间：2013-03-15T12:18:05.093
> 
> 标签：macos, bash, if-statement, compare

我想知道如何在 Mac 上的终端上工作，如何找到字符串中是否存在单词。想象有一个变量“a”包含一个包含单词和空格的字符串，一个变量“b”包含一个单词。我想通过 if 来检查单词“b”是否包含在“a”中，或者包含在“a”的一个单词中。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:23:34.567

您可以使用模式匹配`==`in `[[ ... ]]`：

```
#!/bin/bash
a='I was wondering how, working on terminal on a Mac, can I find if a word is present inside a string.'
b=Mac
if [[ $a == *$b* ]] ; then
    echo Found.
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:42:27.490

使用`grep`

```
$ a='I was wondering how, working on terminal on a Mac, can I find if a word is present inside a string.'
$ b='Mac'
$ c='xxx'

$ grep -q $b <<< $b
$ echo $?
0

$ grep -q $c <<< $c
$ echo $?
1 
```

从`man grep`

> ```
> -q, --quiet, --silent
>          Quiet;   do   not  write  anything  to  standard  output.   Exit
>          immediately with zero status if any match is found 
> ```

要将其放入 if 语句中，请使用

```
if grep -q foo <<< $string; then
    echo "It's there"
fi 
```

或者，如果您更喜欢正则表达式解决方案：

```
string='My string';

if [[ $string =~ .*My.* ]]
then
   echo "It's there!"
fi 
```

或者，使用案例陈述：

```
case "$string" in 
  *My*)
           echo match
    ;;
esac 
```

# php - 谷歌图表 API - 我如何从正文中初始化它？

> ID：15432277
> 
> 赞同：0
> 
> 时间：2013-03-15T12:18:07.203
> 
> 标签：php, api, google-api

这是使用 google API 构建饼图的方式：

[https://google-developers.appspot.com/chart/interactive/docs/basic_preparing_data](https://google-developers.appspot.com/chart/interactive/docs/basic_preparing_data)

一切看起来都很简单，但是如果我通过 php 函数将数据放入 html 文档的正文中，我该如何实现呢？

我的数据看起来像这样......数据集1：

```
male:4
female:2
?:15 
```

数据集 2：

```
Array
(
    [26] =&gt; 2
    [] =&gt; 15
    [18] =&gt; 1
    [28] =&gt; 1
    [22] =&gt; 1
    [21] =&gt; 1
) 
```

那么如何在 google API javascript 中获取这些变量`var data` 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:26:17.030

无需帮助，我只是将脚本粘贴到正文中并通过 php 回显所需的数据。

# python - python - 多层感知器，反向传播，无法学习 XOR

> ID：15432283
> 
> 赞同：3
> 
> 时间：2013-03-15T12:18:25.893
> 
> 标签：python, neural-network, backpropagation, perceptron, multi-layer

我正在尝试使用反向传播实现多层感知器，但我仍然无法教他 XOR，我也会经常遇到数学范围错误。我在书籍和谷歌中查找学习规则和错误反向传播方法，但我仍然不知道我的错误在哪里

```
def logsig(net):
    return 1/(1+math.exp(-net))

def perceptron(coef = 0.5, iterations = 10000):
    inputs = [[0,0],[0,1],[1,0],[1,1]]
    desiredOuts = [0,1,1,0]
    bias = -1
    [input.append(bias) for input in inputs] 
    weights_h1 = [random.random() for e in range(len(inputs[0]))]
    weights_h2 = [random.random() for e in range(len(inputs[0]))]
    weights_out = [random.random() for e in range(3)]
    for itteration in range(iterations):
        out = [] 
        for input, desiredOut in zip(inputs, desiredOuts):
              #1st hiden neuron
            net_h1 = sum(x * w for x, w in zip(input, weights_h1)) 
            aktivation_h1 = logsig(net_h1)
              #2st hiden neuron
            net_h2 = sum(x * w for x, w in zip(input, weights_h2))
            aktivation_h2 = logsig(net_h2)
              #output neuron
            input_out = [aktivation_h1, aktivation_h2, bias]
            net_out = sum(x * w for x, w in zip(input_out, weights_out))
            aktivation_out = logsig(net_out)            
              #error propagation        
            error_out = (desiredOut - aktivation_out) * aktivation_out * (1-    aktivation_out)
            error_h1 = aktivation_h1 * (1-aktivation_h1) * weights_out[0] * error_out
            error_h2 = aktivation_h2 * (1-aktivation_h2) * weights_out[1] * error_out
              #learning            
            weights_out = [w + x * coef * error_out for w, x in zip(weights_out, input_out)]
            weights_h1 = [w + x * coef * error_out for w, x in zip(weights_h1, input)]
            weights_h2 = [w + x * coef * error_out for w, x in zip(weights_h2, input)]            
            out.append(aktivation_out) 
    formatedOutput = ["%.2f" % e for e in out]
    return formatedOutput 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:37:43.943

我注意到的唯一一件事是您正在更新`weights_h1`and `weights_h2`with`error_out`而不是`error_h1`and `error_h2`。换句话说：

```
weights_h1 = [w + x * coef * error_h1 for w, x in zip(weights_h1, input)]
weights_h2 = [w + x * coef * error_h2 for w, x in zip(weights_h2, input)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T16:37:20.173

数学范围错误可能来自 math.exp(-net) 计算，因为 net 是一个很大的负数。

# powershell - 如何在 NuGet PowerShell 安装中从项目中删除和删除文件夹？

> ID：15432284
> 
> 赞同：1
> 
> 时间：2013-03-15T12:18:28.060
> 
> 标签：powershell, powershell-2.0, nuget, nuget-package

我试图在安装 NuGet 包的 PowerShell 期间从项目中删除和删除文件。我有下面的代码将其从项目中删除，但我不知道如何通过管道将其从磁盘中删除。我该怎么做呢？

```
$project.ProjectItems.Item("Test123").Remove() | Select-Object | Get-ChildItem -Recurse | Remove-Item -force -recurse 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:17:40.183

看起来[`Remove`](http://msdn.microsoft.com/en-us/library/envdte.projectitem.remove.aspx)你应该打电话而不是打电话[`Delete`](http://msdn.microsoft.com/en-us/library/envdte.projectitem.delete.aspx)。

从文档中`Remove`

> 从集合中移除项目项。

来自`Delete` *强调我的文档*

> 从其项目**及其存储**中删除该项目。

# python - 根据圆的面积更改 numpy 数组中的值

> ID：15432294
> 
> 赞同：4
> 
> 时间：2013-03-15T12:19:01.037
> 
> 标签：python, algorithm, numpy, computational-geometry

**语境**

我需要测量python中组合圆的面积。我想出了使用 numpy 数组的方法。首先，我用零填充一个网格（numpy 数组），网格中的每个位置对应于 0.5cm 的长度。然后我将圆心放到网格上，并在网格中将此值更改为 1。我知道圆的半径，所以我可以计算圆的面积，因为我知道圆的面积，我将网格中的零更改为落在圆的区域内。然后我计算网格中的频率并用它来计算组合圆的面积，因为我知道网格中每个位置的长度我可以计算面积。这是目前一种非常粗粒度的方法，一旦我确定了算法，我计划将其更改为更细粒度的方法。

**例子**

如果您查看我在下面发布的图片，它可以更好地描述我的想法。我的网格上有两个圆圈（红线），圆圈的中心标有蓝色方块，圆圈占据的区域为浅橙色。我想将标有橙色的区域更改为一个。我目前可以将橙色方块水平和垂直更改为圆心，但中心的对角线框给我带来了麻烦。

![在此处输入图像描述](../Images/fecdb0c3ff633d35ee8ab0aad957a1f0.png)

**当前代码**

```
class area():

    def make_grid(self):
        '''
        Each square in the grid represents 0.5 cm
        '''
        import numpy as np
        grid = np.zeros((10,10))
        square_length = 0.5
        circles = {'c1':[[4,2],1.5],'c2':[[5,6],2.0]}

        print grid
        for key,val in circles.iteritems():
            grid[val[0][0]][val[0][1]] = 1
            area = int((val[1] - square_length)/0.5)            
            for i in xrange(1,area+1):
                grid[val[0][0]][val[0][1]+i] = 1 # Change column vals in +ve direction
                grid[val[0][0]][val[0][1]-i] = 1 # Chnage column vals in -ve direction
                grid[val[0][0]+i][val[0][1]] = 1 # Chnage row vals in +ve direction 
                grid[val[0][0]-i][val[0][1]] = 1 # Chnage row vals in -ve direction

        print ''
        print grid 
```

在上面的字典中，键是圆的名称，值中的第一个元素是圆心坐标，第二个元素是圆的半径。

代码输出：

```
[[ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0.]
 [ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0.]
 [ 0\.  0\.  1\.  0\.  0\.  0\.  1\.  0\.  0\.  0.]
 [ 0\.  0\.  1\.  0\.  0\.  0\.  1\.  0\.  0\.  0.]
 [ 1\.  1\.  1\.  1\.  1\.  0\.  1\.  0\.  0\.  0.]
 [ 0\.  0\.  1\.  1\.  1\.  1\.  1\.  1\.  1\.  1.]
 [ 0\.  0\.  1\.  0\.  0\.  0\.  1\.  0\.  0\.  0.]
 [ 0\.  0\.  0\.  0\.  0\.  0\.  1\.  0\.  0\.  0.]
 [ 0\.  0\.  0\.  0\.  0\.  0\.  1\.  0\.  0\.  0.]
 [ 0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0\.  0.]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:42:28.650

根据@Jaime 的评论更新。

我可能会从这样的事情开始。要点是正确计算圆内的像素。

```
import numpy as np
import matplotlib.pyplot as plt

grid = np.zeros((10,10), dtype=np.bool)
square_length = 0.5
circles = {'c1':[[4,2],1.5],'c2':[[5,6],2.0]}

# Generate arrays of indices/coordiates so we can do the
# calculations the Numpy way, without resorting to loops
# I always get the index order wrong so double check...
xx = np.arange(grid.shape[0])
yy = np.arange(grid.shape[1])

for val in circles.itervalues():
    radius = val[1]
    # same index caveat here
    # Calling Mr Pythagoras: Find the pixels that lie inside this circle
    inside = (xx[:,None] - val[0][0]) ** 2 + (yy[None, :] - val[0][1]) ** 2 <= (radius ** 2)
    # do grid & inside and initialize grid with ones for intersection instead of union
    grid = grid | inside 

plt.imshow(grid)
plt.show() 
```

如果您在交叉点之后，请注意您的圆心是`sqrt(17) ~= 4.123..`分开的单位，并且两个半径的总和达到，`3.5`因此实际上没有重叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:33:42.847

您只是从中心直接左右搜索。为了从中心获得对角线的正方形，您可能必须使用[勾股定理](http://en.wikipedia.org/wiki/Pythagorean_theorem)。使用该定理，您可以通过使用相对于圆心的水平和垂直偏移作为边长来找到正方形的斜边。然后，您可以将斜边与半径进行比较，如果斜边是两者中较短的一个，则将平方值加一。

半径的使用也有点奇怪，因为它不是以正方形的中间为中心。这使得半径为 2 的圆的直径为 3.5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T13:02:13.850

您可以使用蒙特卡罗方法找到重叠区域的面积。这样会更准确。 [http://www.chem.unl.edu/zeng/joy/mclab/mcintro.html](http://www.chem.unl.edu/zeng/joy/mclab/mcintro.html)

找到正方形的边界，然后用随机数填充，并为每个随机数检查随机数是否在圆内。

```
if (np.sqrt((xx - val[0][0]) ** 2 + (yy - val[0][1]) ** 2) <= radius) :inside=inside+1 
```

面积=圆内的像素总数/生成的像素总数*正方形的面积

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:58:41.623

您可以使用[Floodfill 算法](http://en.wikipedia.org/wiki/Flood_fill)，稍微修改停止条件：同时考虑颜色和到圆心的距离

小面积区域的 PS Hack 方法：绘制实心圆并计算颜色像素...

# c# - 如何水平对齐多个 Gridview 控件？

> ID：15432296
> 
> 赞同：0
> 
> 时间：2013-03-15T12:19:14.037
> 
> 标签：c#, asp.net, webforms

我想让 2 个或更多控件（例如 gridview 控件）水平对齐。
可选：我想在同一行（水平）中有 1 个 gridview 控件和 1 个 Image 控件。

我尝试了以下控件..

```
 MultiView: Only vertical alignment possible  
  WebPartZone: It looked good in design mode, but gave me an error (something with the App_Data folder) and I think there must be a more simple approach. 
```

我可以水平有 2 个图像控件。但为什么不能有 2 个网格视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:23:03.757

尝试将它们作为两个单独的 div .... 像这样：

```
<div style="float:left; position:relative;">
    <asp:GridView ID="GridView1" runat="server">
    </asp:GridView>
</div>
<div style="float:right; position:relative;">
    <asp:GridView ID="GridView2" runat="server">
    </asp:GridView>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:28:58.527

尝试按照 mikeshorts 所述将您的 Grid 视图放入 Div 或使用另一种方式，如使用表。

```
<table>
<tr>
<td>
<asp:GridView ID="GridView1" runat="server">
    </asp:GridView>
</td>
<td>
<asp:GridView ID="GridView2" runat="server">
    </asp:GridView>
</td>
</tr>
</table> 
```

或者您只使用**Horizo​​ntalAlign**属性，例如

```
<asp:GridView ID="GridView1" runat="server"  HorizontalAlign="Left" >
    </asp:GridView>
    <asp:GridView ID="GridView2" runat="server"  HorizontalAlign="Right" >
    </asp:GridView> 
```

我希望它对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:25:24.730

[嗨，请查看这篇文章http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.horizo](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.horizontalalign.aspx) ​​ntalalign.aspx

希望它对你有帮助。

# http - 伏地魔 HTTP 服务

> ID：15432297
> 
> 赞同：2
> 
> 时间：2013-03-15T12:19:16.810
> 
> 标签：http, voldemort

`Voldemort`有一个`HTTP`端口，假设可用于通过`HTTP`[1] 接受请求。谁能提供如何使用此服务的示例？我尝试将我的浏览器指向端口，但没有成功。

`[1]: https://github.com/voldemort/voldemort/blob/master/src/java/voldemort/server/http/HttpService.java`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T19:55:17.420

http 服务提供`/admin`, `/read-only/mgmt`，`/server-status`这些都可以在您的浏览器中查看。它也有`/stores`，但我不知道它的用途（它需要一个 POST，所以在浏览器中查看它没有意义）。

/ 上什么都没有，这就是为什么你在访问 youripaddress:port 时什么也看不到的原因。

[通过查看第 100 行](https://github.com/voldemort/voldemort/blob/master/src/java/voldemort/server/http/HttpService.java#L100)，您可以看到所有这些都列在您引用的 java 文件中。

# java - 如何让一年的四个季度相对于日期

> ID：15432309
> 
> 赞同：1
> 
> 时间：2013-03-15T12:19:47.460
> 
> 标签：java, hibernate

我正在使用 hibernate 开发 java swing 应用程序。我想在一年中每个季度的 jasperreport 结果中显示（我有数据库日期，所以我将提取与我数据库中这些日期相对应的年份）我找到了一些解决方案，但我认为这不是一个很好的解决方案，这是简单的方法：

```
select * from dbcheques.Cheque
where YEAR(dateEncaissement) = '2013'
and (MONTH(dateEncaissement) = 7
or MONTH(dateEncaissement) = 8 or MONTH(dateEncaissement) >= 9) 
```

这将返回该年的第三季度，其他季度几乎相同的查询只是数字变化：

**第一季度**

```
and (MONTH(dateEncaissement) = 1 or MONTH(dateEncaissement) = 2
or MONTH(dateEncaissement) >= 3) 
```

**对于第二季度**

```
and (MONTH(dateEncaissement) = 4 or MONTH(dateEncaissement) = 5
or MONTH(dateEncaissement) >= 6) 
```

**最后一个季度**

```
and (MONTH(dateEncaissement) = 10 or MONTH(dateEncaissement) = 11
or MONTH(dateEncaissement) = 12) 
```

这是界面：

！（[http://hpics.li/7ca6010](http://hpics.li/7ca6010)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:30:54.233

如果您的问题是“如何获取给定季度（1、2、3 或 4）的值”，那么您可以简单地使用

```
where ((MONTH(dateEncaissement) - 1) DIV 3) + 1 = <quarter> 
```

如果要从表中选择行，包括每行的四分之一，则在 select 子句中使用相同的技巧：

```
select *, (((MONTH(dateEncaissement) - 1) DIV 3) + 1) as quarter from ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-07T05:54:15.317

# tl;博士

查询当前季度：

```
String sql = 
 "SELECT … 
  FROM … 
  WHERE 
    dateCol_ >= ? 
    AND
    dateCol_ < ?
  ;"

YearQuarter yq = YearQuarter.now( ZoneId.of( "America/Montreal" ) );
myPreparedStatement.setObject( 1 , yq.atDay( 1 );
myPreparedStatement.setObject( 2 , yq.plusQuarters(1).atDay( 1 ); 
```

# java.time

[JB Nizet](https://stackoverflow.com/a/15432543/642706)的答案是正确的。

另一种选择是使用 java.time 类及其扩展，即[ThreeTen-Extra](http://www.threeten.org/threeten-extra/)项目来确定 Java 中的日期。该项目添加了类[`Quarter`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Quarter.html)和[`YearQuarter`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html).

## `YearQuarter`

确定一个季度意味着确定一个日期。确定日期意味着指定时区。对于任何给定的时刻，日期在全球范围内因区域而异。

```
ZoneId z = ZoneId.of( "America/Montreal" );
YearQuarter yq = YearQuarter.now( z ); 
```

你可以做数学，加法和减法。

```
YearQuarter yqNext = yq.plusQuarters( 1 ); 
```

## `LocalDate`

您可以查询该季度的第一个和最后一个日期，以获取`LocalDate`对象。该类[`LocalDate`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)表示没有时间和时区的仅日期值。

```
LocalDate firstDay = yq.atDay( 1 );
LocalDate lastDay = yq.atEndOfQuarter(); 
```

通常在日期时间工作中更好地使用半开放方法来定义时间跨度作为开始是*包容性*的，结束是*排斥*性的。此方法用于此答案顶部的查询。

```
LocalDate startOfNextQuarter = yq.plusQuarters( 1 ).atDay( 1 ); 
```

# 数据库

如果您的 JDBC 驱动程序符合 JDBC 4.2 及更高版本，您可能能够`LocalDate`通过`PreparedStatement`对象的`setObject`方法传递对象。

如果没有，请回退到使用[`java.sql.Date`](https://docs.oracle.com/javase/8/docs/api/java/sql/Date.html)该类。添加到旧类的新方法有助于转换。

```
java.sql.Date d = java.sql.Date.valueOf( firstDay ); 
```

# iphone - tableViewController 上的pickerView

> ID：15432310
> 
> 赞同：-3
> 
> 时间：2013-03-15T12:19:50.017
> 
> 标签：iphone, xcode

我有一个 UITableViewController，我正试图在它上面放一个 UIPicker。

我制作了一个调用此方法的按钮：

```
-(void)editTimeClicked:(UIButton *)button{

    PickerViewController *pickerVC = [[PickerViewController alloc] initWithNibName:@"PickerViewController" bundle:nil];

    UIView *pickerView = pickerVC.view;
    pickerView.frame = CGRectMake(0, 200, 320, 216);
    [self.view addSubview:pickerView];
} 
```

在我调用它之后，选择器就坐在我想要它的位置 - 直到现在一切都很完美。

但是当我尝试滚动选择器时，应用程序崩溃了。

我没有在滚动上运行的委托方法……它可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:35:40.483

为此不需要不同的xib。

尝试这个 ：：

在 .h 文件中

```
@property(nonatomic,retain) UIPickerView *pickerView; 
```

在 .m 文件中

```
pickerView = [[UIPickerView alloc]initWithFrame:CGRectMake(x, y, w, h)];
pickerView.showsSelectionIndicator = YES;
pickerView.delegate = self;
pickerView.dataSource = self;

......

[self.tableView addSubview:pickerView]; 
```

选择器视图方法::

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
}

- (void)pickerView:(UIPickerView *)pickerView1 didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
}

-(CGFloat)pickerView:(UIPickerView *)pickerView widthForComponent:(NSInteger)component {
}

-(UIView *)pickerView:(UIPickerView *)pickerView1 viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {
} 
```

希望你能理解。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:22:23.440

你需要添加 `<UIPickerViewDataSource, UIPickerViewDelegate>`你的`.h file` ，也`delegate and datasource of UIPickerView`像自我一样给予，

```
pickerView.delegate = self; 
pickerView.dataSource = self; 
```

并实现`delegate and datasource of UIPickerView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:30:01.513

解决了，没有使用另一个笔尖的选择器，而是以编程方式创建它。

# php - 使用 finderQuery 的 CakePHP 2.3 模型关联适用于 Model->read() 但不适用于 Model->find()

> ID：15432312
> 
> 赞同：0
> 
> 时间：2013-03-15T12:19:55.063
> 
> 标签：php, mysql, cakephp, model-associations, cakephp-2.3

我几乎可以让 Cake 在这里做我想做的事，但并不完全，我认为这是因为我的知识存在差距。

我已将英国邮政编码的数据库表导入到我的 cakePHP 应用程序中。这是结构：

```
CREATE TABLE IF NOT EXISTS `postcodes` (
  `ref` varchar(6) NOT NULL DEFAULT '',
  `area` varchar(50) NOT NULL DEFAULT '',
  `uk_region` varchar(4) NOT NULL,
  `lat` decimal(6,4) NOT NULL DEFAULT '0.0000',
  `long` decimal(5,4) NOT NULL DEFAULT '0.0000',
  PRIMARY KEY (`ref`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

这是该表中 CSV 格式的一行。

```
"AB10","Aberdeen","SCOT","57.1350","-2.1170" 
```

“帐户”和“订单”需要能够从“邮政编码参考”中查找这些详细信息

[因此，在阅读了这篇文章http://www.visuallizard.com/blog/2009/02/19/210](http://www.visuallizard.com/blog/2009/02/19/210)之后，我想出了这个（我将只展示 Account 模型）：

```
class Account extends AppModel {
    public $hasOne = array('Postcode' => 
        array(
          'className' => 'Postcode', 
          'finderQuery' => 'SELECT Postcode.* FROM accounts, postcodes AS Postcode WHERE accounts.id = {$__cakeID__$} AND accounts.postcode_ref = Postcode.ref', 'foreignKey' => false
));

} 
```

现在，如果我执行其中“16”是测试帐户 ID 的其中任何一个：

```
$this->Account->read(null, 16);
$this->Account->find('first', array('conditions' => array('Account.id' => 16))); 
```

检索数据一切都很好。但是，如果我这样做：

```
$this->Account->find('all', array('conditions' => array('Account.id' => 16))); 
```

我得到了一个结果正确但 2,821 次的数组；这是有多少个邮政编码条目。

将其从 $hasOne 更改为 $hasMany 也只返回一次结果，但它在 $result['Postcode'][0] 内，因为所有 hasMany 查询都是如此，我相信你们中的一些人会这样可以理解。

关于我在这里做了什么的任何线索？我是否误解了什么或者这是一个 CakePHP 错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:29:07.067

你最好的选择是“扭转”这种关系；帐户*属于*邮政编码。由于一个帐户只能有一个邮政编码，基本上它“属于”一个邮政编码，每个邮政编码（区域）可以有（包含）多个帐户。

您似乎已经为您的帐户表中的 foreignKey 字段正确命名，但请务必指定“ref”作为 Postcode 模型中的主键。关系将如下所示；

```
Account extends AppModel {
    public $belongsTo = array(
        // additional settings are probably not
        // required because postcode_ref follows the
        // CakePHP conventions, so foreignKey will
        // automatically be detected
        'Postcode',
    );

} 
```

和邮政编码模型：

```
Postcode extends AppModel {
    // Important because of non-standard PK name
    public $primaryKey = 'ref';

    public $hasMany = array(
        'Account',
    );
} 
```

这应该可以工作

# ssl - 反向代理：如何将（加密的）SSL 流量中继到（解密的）TCP 连接？

> ID：15432316
> 
> 赞同：1
> 
> 时间：2013-03-15T12:20:06.253
> 
> 标签：ssl, tcp, proxy, embedded, reverse-proxy

我的问题如下：

我目前有以下网络布局：

```
Embedded Client <-> TCP <-> Server:PortA 
```

在 TCP 之上，有一个专有的二进制协议。我们希望以最少的努力添加安全传输。因此，我们将修改客户端以在 TCP 之上使用 SSL。但是，如果可能的话，我们希望保持服务器不变。所以想法是，使用实现以下目标的代理：

```
Embedded Client <-> SSL <-> Proxy:PortB <-> TCP <-> Server:PortA 
```

代理将具有必要的 SSL 证书。问题是，是否有任何软件允许这种与 HTTP 无关的反向代理？我知道有一些代理，如[mod_proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)、[Squid](http://www.squid-cache.org/)或[NginX](http://wiki.nginx.org/Main)，但据我所知，唯一支持 HTTP 或一些定义明确的其他协议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:28:07.570

听起来 stunnel 正是您想要的。

# c++ - C ++从双精度数组中减去平均值

> ID：15432319
> 
> 赞同：2
> 
> 时间：2013-03-15T12:20:16.720
> 
> 标签：c++, arrays

我有一个包含大约 10'000 个元素的 double* 数组，必须从中减去平均值。这必须做很多事情。

现在我已经完成了它的愚蠢：

```
double mt = 0;
for (int i=0; i<n; i++) {mt += array[i];}
mt /= n;
for (int i=0; i<n; i++) {array[i] -= mt;} 
```

其中数组：double & n 的大数组是该数组的大小。我敢肯定有办法用一些花哨的字符来实现它，这会更快，我希望你们能帮助我。

干杯麻姑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:14:39.530

嗯似乎没有什么在低级别实现。

无论如何，谢谢你的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:23:15.040

您的解决方案对我来说看起来不错。

您可以使用[`std::transform`](http://www.cplusplus.com/reference/algorithm/transform/)，但我相信它不会使其更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:31:32.797

您可以通过保留 total_value 的活动副本来跳过每次均值的计算。如果您必须递归地从同一张表中减去平均值，那么您可以使用以下公式并找到总数。

new_total = old_total - n * prev_mean; new_mean = new_total / n;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:24:08.777

如果您必须经常这样做，那么为什么不保留一个运行总数和数组中的项目数呢？

然后计算平均值的总和将是复杂度 O(1)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T12:24:12.757

这可以以更短的方式完成，但性能不会明显更好。使用`std::accumulate`来自 `<algorithm>`：

```
double mean = std::accumulate(array, array + n)/double(n); 
```

但是，您可以做的是记住第一次计算它，然后在下一次迭代中简单地`(mt * n)`从总和中减去（假设您在问题中显示的是迭代之间发生的修改。

# mysql - 使用 UPDATE 查询的奇怪结果

> ID：15432323
> 
> 赞同：0
> 
> 时间：2013-03-15T12:20:32.393
> 
> 标签：mysql, sql-update

我一生都无法弄清楚这里发生了什么。我希望在以下查询中更新`rand_id`table 中的记录 5394560`entities`以匹配`rand_id`table 中相同记录的`unique_ids`。相反，它会更新到 9?!?!?

```
mysql> update entities, unique_ids SET entities.rand_id = unique_ids.rand_id where entities.id=5394560;
Query OK, 1 rows affected (2.74 sec)
Rows matched: 1  Changed: 1  Warnings: 0 
```

检查结果：

```
mysql> select * from entities where id=5394560;
+---------+------------------+---------+---------------------+
| id      | name             | rand_id | created_at          |
+---------+------------------+---------+---------------------+
| 5394560 | Andorra la Vella |       9 | 2013-03-15 13:58:38 |
+---------+------------------+---------+---------------------+
1 row in set (0.00 sec)

mysql> select * from unique_ids where id=5394560;
+---------+----------+
| id      | rand_id  |
+---------+----------+
| 5394560 | 26543652 |
+---------+----------+
1 row in set (0.00 sec) 
```

我在这里错过了一些完全简单和愚蠢的东西吗？！？！？两个表中的两列都在使用`int(11)`，所以我认为数据类型的最大值不是问题，但我可能是错的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:23:39.067

您缺少两个表之间的任何连接。**基本上实体**和**unique_ids**之间的关系 没有定义

尝试添加一些“WHERE entity.something=unique_ids.somethingelse”，其中某物和某物是每个相关表中的列名。

我相信这是您的解决方案（请注意末尾的“AND ...”部分）：

```
update entities, unique_ids 
SET entities.rand_id = unique_ids.rand_id 
where entities.id=5394560 
    AND unique_ids.id=entities.id; 
```

# jqplot - jqplot 垫不工作

> ID：15432328
> 
> 赞同：0
> 
> 时间：2013-03-15T12:20:45.637
> 
> 标签：jqplot

我有以下代码来绘制来自 json/ajax 请求的数据

```
function plotit(data){
        $.jqplot.config.enablePlugins = true;
        $("#jqplot-chart1").empty();
           plot1 = $.jqplot('jqplot-chart1', data,{ 
               axesDefaults: { pad: 1.2},
                title: 'data',
                animate: true,
                animateReplot: true,
                 axes: {
                    xaxis: {
                          label: "---",
                          tickOptions: {formatString: '%d-%m-%Y'}, // ex 02-09-2002,23:09:55 - %d
                          renderer: $.jqplot.DateAxisRenderer
                        },
                        yaxis: {
                            label: "Y "
                        }
                },
                cursor:{ 
                    zoom: true,
                    showTooltip : true,
                    constrainZoomTo : 'x',
                    showVerticalLine : true
                }
          } 
    ); 
    } 
```

这是 json 响应数据的示例：

```
[[["2013-03-02 00:00:00","2"],["2013-03-01 00:00:00","72"],["2013-02-28 00:00:00","26"],["2013-02-27 00:00:00","67"],["2013-02-26 00:00:00","48"],["2013-02-25 00:00:00","50"]]] 
```

但是当我绘制基本上我有两个问题：-第一个是情节顶部和最大值之间的填充很大，我想动态调整情节的高度（图中的红色箭头）第二个是右边最后一个值附在绘图的边框上（图中蓝色箭头）！[绘图结果][1]

谁能帮我 ？

这是解释问题的图像：

[http://img7.imageshack.us/img7/963/sanstitrebtt.png](http://img7.imageshack.us/img7/963/sanstitrebtt.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:02:07.313

您可以使用以下方法在渲染后获取 dataBounds 值：

```
var minY = plot2.axes.yaxis._dataBounds.min;
var maxY = plot2.axes.yaxis._dataBounds.max; 
```

（您可以使用 xaxis 类似地获得 minX 和 maxX。）

然后你可以要求 jqplot 使用这个边界来绘制精确的范围：

```
plot2.axes.yaxis.min = minY;
plot2.axes.yaxis.max = maxY; 
```

（再次对 xaxis 执行类似操作）；

最后，重新绘制图表：`plot2.replot();`

根据您的数据值，您的最​​终图表具有界限。

PS：您也可以使用**plot2.yaxis._numberTicks**或 plot2.yaxis.numberTicks 处理 numberTicks （不确定哪个有效）

[在此处](https://stackoverflow.com/questions/15150667/automatic-sizing-of-jqplot-bar-graph-for-varying-data-range/15156180#15156180)查看类似的帖子

# jquery-selectors - jQuery - 获取在父元素中单击的元素的 id

> ID：15432331
> 
> 赞同：0
> 
> 时间：2013-03-15T12:20:52.743
> 
> 标签：jquery-selectors

不知道怎么命名这个（我给它命名似乎没有多大意义——如果你觉得有需要就修复它！）。

无论如何，我有一个包含一些链接的 div，我需要获取被点击的链接的 id。

HTML：

```
<div id="pagination">
    <br>
    <a href="#" id="firstPage">First Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="#" id="prevPage">Prev Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;
    <label id="currentPage">2</label>&nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="#" id="nextPage">Next Page</a>&nbsp;&nbsp;|&nbsp;&nbsp;
    <a href="#" id="lastPage">Last Page</a>
</div> 
```

我试着这样做：

```
$('#pagination a').click(function() {
    console.log( $('#pagination a').index(this) );
}); 
```

#pagination div 是在 jQuery 中动态生成的，所以我也尝试了：

```
$('#pagination a').on('click', function() {
    console.log( $('#pagination a').index(this) );
}); 
```

但是在任何一种情况下单击链接时，我都没有在控制台中得到任何输出。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:24:37.057

在 jQuery 事件处理程序内部，`this`总是指触发事件的元素：

```
$('#pagination a').click(function() {
    console.log($(this).attr('id'));
}); 
```

或者简单地说：

```
$('#pagination a').click(function() {
    console.log(this.id);
}); 
```

# jquery - 未捕获的类型错误：对象 [object Object] 没有方法“tagsInput”

> ID：15432334
> 
> 赞同：0
> 
> 时间：2013-03-15T12:20:58.623
> 
> 标签：jquery

我的 php 代码就像

```
<div class="field">                 
    <label  style="float: none;">Recipients (by username):</label>
    <?=form_error('to')?>
    <input id="to" name="to" type="text" value="<?=$form_to?>" class="taglist"  />
</div> 
```

我已经包含**jquery.tagsinput.css**

我还添加了脚本

```
$('.taglist').tagsInput({
        'height':'27px',
        'width':'400px',
        'defaultText':'add recepient',
    }); 
```

但我在控制台中收到以下错误：

**未捕获的类型错误：对象 [object Object] 没有方法“tagsInput”**

任何想法..可能是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:23:54.510

看起来你忘了添加 tagsinput js 脚本..（显然是 jquery.js）

在这里添加这个`<head>`标签

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script src="http://xoxco.com/projects/code/tagsinput/jquery.tagsinput.js"></script> 
```

或者

如果您已经下载了该文件，那么.. 为您的 taginputs js 文件提供正确的路径..

```
<script src="path/to/your/file/jquery.tagsinput.js"></script> 
```

# android - Google Maps V2 Galaxy Note 2 上的空白地图

> ID：15432335
> 
> 赞同：2
> 
> 时间：2013-03-15T12:20:58.820
> 
> 标签：android, google-maps-android-api-2

我在我的 Android 应用程序中使用 Google Maps API V2。正如您在屏幕截图中看到的那样，我有 FragmentPager 并且有一个片段，其中包括谷歌地图 v2。在设备 Galaxy Note 2 上，我无法显示地图内容。在其他设备上，地图工作没有任何问题，并显示添加的标记和线条。如您所见，它仅显示我的活动的背景图像。还有一个问题是地图内容仅显示在地图按钮的后面。

关于解决方案的任何想法？

谢谢。

![Galaxy Note 2 地图 v2 问题](../Images/9f3c044e1606d061c7cccac98eefa82b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:49:20.310

出现此问题是因为您使用了片段寻呼机并且您无法移动地图片段。我在我的应用程序中遇到了类似的问题。所以如果你想使用寻呼机，唯一的办法就是使用 Map v1。

# java - 如何在 Ui-Binder 中定义占位符？

> ID：15432336
> 
> 赞同：1
> 
> 时间：2013-03-15T12:20:59.387
> 
> 标签：java, gwt, uibinder

我想创建一个EditPanel，基本上都是一样的，只有一些`TextBox`字段不同。

因此，我想我会创建一个`Widget`，使用 ui-binder 定义布局等，并使其具有某种可以放置小部件的占位符。但是我该怎么做呢？

```
<g:FlowPanel>
<g:Label text="This is an edit panel" />

<<place here my dynamic widget that I want to pass into that class>>

<g:Button text="save" />
<g:Button text="cancel" />
<g:Button text="reset" />
<g:Label text="some more fixed text" />
</g:FlowPanel> 
```

你明白我想要做什么。但是我怎样才能创建另一个`FlowPanel`包含一些`TextBox`字段并将其放入`EditPanel`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:36:25.940

`empty` `panel`在那里定义一个

```
<g:HorizontalPanel ui:field="dynamicContentPanel"> </g:HorizontalPanel> 
```

在 中定义`view`。

```
@UiField
HorizontalPanel  dynamicContentPanel; 
```

使用 `dynamicContentPanel`.add( `yourDynamicWidget`);

# javascript - d3.js 箭头有向图：动态添加节点/链接

> ID：15432350
> 
> 赞同：1
> 
> 时间：2013-03-15T12:22:01.227
> 
> 标签：javascript, graph, d3.js, directed-graph

我尝试使用[这个](http://bl.ocks.org/mbostock/1153292)箭头力有向图示例（基于 d3.js）

我想动态添加节点/链接到图表，而不重新启动动画。

我不是 javascript 专家，也不是 d3.js 专家，但无论我尝试做什么，我都无法创建一个动态添加更多链接的 AddLinks(links) 方法。

我设法做的最好的事情是动态添加链接，但那些不知道图形其余部分的存在。

我当然知道我的问题是什么。我分别使用了两次“强制”方法，但我找不到如何与已经存在的“强制”接口......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:28:33.597

明确说明的[文档`force.start()`](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-start)

> 此外，每当节点或链接发生变化时，都应该再次调用它。

因此，做您想做的事情的方法是将链接添加到原始力布局，然后重新启动模拟。如果您不重新启动，这些链接将不会被考虑在内，并且模拟的结果会看起来很奇怪。

您当然可以尝试通过在重新启动之前将节点的位置设置为当前模拟结束时的位置来使模拟看起来没有重新启动。

# parameters - 如果设置了get参数，如何在genshi中测试？

> ID：15432359
> 
> 赞同：0
> 
> 时间：2013-03-15T12:22:19.403
> 
> 标签：parameters, get, trac, genshi

有没有办法在 genshi 中测试是否设置了某些 get url 参数？

似乎没有这方面的文档。

如果 url 中存在参数错误，我只需要在模板错误消息中呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:25:04.073

Genshi 只是 Trac 背后的 XHTML 渲染引擎。

[在IRequestHandler](http://trac.edgewall.org/wiki/TracDev/PluginDevelopment/ExtensionPoints/trac.web.api.IRequestHandler)中评估您的 GET 请求属性是有意义的，即准备/提供数据和模板，并将渲染和提交都传递给请求客户端。

此外，使用 trac.web.chrome 中的 *add_notice* 或 *add_warning**以*类似 Trac 的样式（侵入性最小的方式）向用户呈现消息。

# scala - 为什么我得到 NullPointerException 缺少隐式而不是 Akka 的编译错误？

> ID：15432360
> 
> 赞同：1
> 
> 时间：2013-03-15T12:22:21.637
> 
> 标签：scala, compilation, akka

这是一个最小的例子

```
package org.example

import akka.actor._
import akka.pattern.ask
import akka.util.duration._
import akka.util.Timeout

class Counter extends Actor {
  def receive = {
    case _  => sender ! "hi"
  }
}

object AkkaProjectInScala extends App {
  val system = ActorSystem("AkkaProjectInScala")

  val counter = system.actorOf(Props[Counter])

  // this will raise NullPointerException    
  (counter ? "i just came to say hello") onSuccess {
    case x => println("He said " + x)
  }

  implicit val timeout = Timeout(5 seconds)
  system.shutdown()
} 
```

这看起来很奇怪，因为当我在控制台中尝试这样的事情时，隐式会引发编译错误

```
scala> def magic(a: Int)(implicit b: Int) = a + b
magic: (a: Int)(implicit b: Int)Int

scala> magic(3)
<console>:9: error: could not find implicit value for parameter b: Int
              magic(3) 
```

使用 Akka 时是否会发生其他一些魔术，从而阻止编译器在编译时检测到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:45:37.367

发送消息时超时尚未初始化。所有`val`都按照它们在源代码中出现的顺序进行初始化。不属于方法主体的代码是构造函数代码，包括“独立”代码，例如您的消息发送代码和`timeout`. 所以隐式在初始化之前就被引用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:00:29.770

您没有说明您使用的版本，但我猜它不是 Akka 2.1，因为持续时间已移至`scala.concurrent`. 但是，使用 Scala 2.10.1-RC3 和 Akka 2.1 时，当我尝试编译您的代码时，它会抱怨缺少 ExecutionContext （可以使用 导入`import scala.concurrent.ExecutionContext.Implicits.global`）。此外，它没有在 ask-pattern 之后定义的超时编译。解决编译问题后，它对我来说很好。所以，我建议你使用最新版本。

这里又是工作代码 - 使用 Akka 2.1

```
import scala.concurrent.duration._

import akka.actor._
import akka.dispatch._
import akka.util.Timeout
import akka.pattern.ask
import scala.concurrent.ExecutionContext.Implicits.global

class Counter extends Actor {
  def receive = {
    case _  => sender ! "hi"
  }
}

object AkkaProjectInScala extends App {
  val system = ActorSystem("AkkaProjectInScala")

  val counter = system.actorOf(Props[Counter])
  implicit val timeout = Timeout(5 seconds)

  val future = (counter ? "i just came to say hello") 
  future onSuccess {
    case x => println("He said " + x)
  }

  system.shutdown()
} 
```

# angularjs - 在angularjs中刷新标题页

> ID：15432370
> 
> 赞同：2
> 
> 时间：2013-03-15T12:22:35.480
> 
> 标签：angularjs

在angularjs中登录后我必须刷新header.html。调用登录时，整个页面被刷新并初始化标题，但登录后只加载内容而不是标题。我该怎么做才能刷新标题。

## 索引.html

```
<div class="container-holder" ng-controller="mainCtrl">
    <div class="container">
        <div ng-include src='"elements/header.html"'></div>
        <div ng-view class="clearfix"></div>                     
    </div>
</div> 
```

我必须刷新 header.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-26T08:17:36.353

当我开始使用 AngularJS 时，我为此苦苦挣扎了好几天。仅适用于新手...如果您的页眉/页脚位于应用程序视图之外，则不会在路线更改时刷新。您必须在页眉/页脚指令中添加显式事件侦听。基本上，您使用 rootScope.$on('login-chnaged-event', function() {}); 监听登录更改事件。

在此您必须设置范围变量，例如 isLoggedIn 或 loggedInUser 信息。只要登录状态发生变化，您的登录服务就应该触发 login-changed-event。这是由更新标头指令的范围变量的指令监听的......最终将重新呈现标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T22:49:56.027

如果您想更改标题模板，您可以使用 ng-switch 即：

```
<div ng-switch on="login">
   <div ng-switch-when="true">Logged in!</div>
   <div ng-switch-default>Not Logged in</div>
</div> 
```

在您的控制器中，您只需要切换一个名为 $scope.login 的布尔变量

# javascript - 如何检查事件是否被触发一次？

> ID：15432371
> 
> 赞同：0
> 
> 时间：2013-03-15T12:22:37.017
> 
> 标签：javascript, jquery, dom

我在 jQuery 中有这样的代码：

```
$("#something").click(function() {  
}; 
```

在函数内部，我想检查是否`#something`在短时间内仅单击一次，如果两次或更多，则像一次一样。

我试过这段代码：

```
if(!event.detail || event.detail == 1) { do_something; } 
```

它适用于除 Firefox 之外的大多数浏览器。我知道为什么，但没有找到任何解决方案。我尝试`preventDefault`了`dblclick`事件，但它在 Chrome 中不起作用...

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:26:56.310

您可以使用`event.timeStamp`来确定两个事件之间的时间。

```
$("#something").click(function( event ) {  
    this.lastClick = this.lastClick || 0;

    if( event.timeStamp - this.lastClick > 200 ) {
        // do something
        alert('click');
    } else {
        // last click occured below 200ms, set out `lastClick` to the current timestamp
    }

    this.lastClick = event.timeStamp;
}); 
```

我这里有点草率，存储`lastClick`在 DOM 元素上的对象表示。您可能希望将该变量放在应用程序的更高范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:26:57.843

有流氓的方式来做到这一点。

有一个全局变量，

在 click 事件中，增加它。

`$(this)`当累积足够多的点击时，使用对象从元素中移除点击事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:29:16.010

我正在修改你的代码，

```
var counter =0;
$("#something").click(function() {  
counter++;
//alert("Clicked : " + counter);
}; 
```

我希望这是知道点击次数的最简单方法。

如果想控制点击，只需检查 if

```
if(counter >= 1) {...} 
```

我认为这会做:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T12:40:00.963

使用 .dblclick() (JQUERY) - 双击使用 .click() (JQUERY) - 单击

如果 1,2 次点击足以完成您的任务 - 使用它们。

祝你好运。

# android - afreechart Android eclipse esample

> ID：15432373
> 
> 赞同：2
> 
> 时间：2013-03-15T12:22:38.960
> 
> 标签：android, eclipse, charts

我正在尝试使用 AFreeChart 在我的活动中显示图表，我已经检查了很多互联网文档，但我没有找到任何完整的示例，我的意思是如何构建图表并在我的布局中显示它，我需要显示它抱怨一个 GUI（就像我的 GUI 中的图像一样），你正在使用 eclipse（android 4.2）。

有谁知道如何在 android 中使用 AfreeChart？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T00:09:10.073

好的，因为这是一篇较旧的帖子，我不确定您是否能够找到这个问题的答案。这是在您的活动中显示免费图表所需要做的事情。

1.  创建一个扩展 ImageView 的自定义视图，类似于 blelow

    ```
    public class ChartView extends ImageView
    {
        private Bitmap              bitmap;
        private RectShape           rectArea;
        private Canvas              canvas;
        private AFreeChart          chart;

        public ChartView( Context context, AttributeSet attributeSet )
        {
            super(context, attributeSet);
        }

        public ChartView( Context context )
        {
            super(context);
            intChart();
        }

        private void intChart()
        {
            //Setting different width and height based on the orientation.
            if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)
            {
                bitmap = Bitmap.createBitmap(400, 200, Bitmap.Config.ARGB_8888);
                rectArea = new RectShape(0.0, 0.0, 400, 200);
            }
            else
            {
                bitmap = Bitmap.createBitmap(200, 200, Bitmap.Config.ARGB_8888);
                rectArea = new RectShape(0.0, 0.0, 200, 200);
            }
        }

        public void drawChart( AFreeChart chart )
        {
            canvas = new Canvas(bitmap);
            this.chart = chart;             
            this.chart.draw(canvas, rectArea);
            setImageBitmap(bitmap);
        }

        @Override
        protected void onDraw( Canvas canvas )
        {
            super.onDraw(canvas);               
        }
    } 
    ```

2.  创建一个活动，如下所示，您就可以开始了。我假设您已经创建了要传递给视图的 AFreeChart 对象。

    ```
     public class ChartActivity extends Activity
        {
            @Override
            protected void onCreate( Bundle savedInstanceState )
            {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.chart);

                ViewGroup viewGroup = (ViewGroup)getWindow().getDecorView().findViewById(android.R.id.content);

                ChartView chartView = new ChartView(this);

                chartView.drawChart(ChartFactory.createChart()/*Returns AFreechart object*/);       

                viewGroup.addView(chartView);

            }
        } 
    ```

3.  图表.xml

    ```
     <?xml version="1.0" encoding="utf-8"?>
            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

            </LinearLayout> 
    ```

希望这可以帮助

# mysql - 如何同时执行两个查询？

> ID：15432379
> 
> 赞同：0
> 
> 时间：2013-03-15T12:23:13.600
> 
> 标签：mysql

我正在尝试一次/或一个接一个地执行多个查询，但它失败了。为什么会这样，这是我构建代码的方式：

```
$query="
INSERT INTO ptb_users (user_id,
id,
first_name,
last_name,
email )
VALUES('NULL',
'NULL',
'".$firstname."',
'".$lastname."',
'".$email."'
)";
mysql_query($query) or die();
$result = mysql_query("UPDATE ptb_users SET user_id=id");

$query="INSERT INTO ptb_profiles (id,
user_id,
display_name )
VALUES('NULL',
'NULL',
'".$username."'
)";
mysql_query($query) or die();
$result = mysql_query("UPDATE ptb_profiles SET id=user_id"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:25:53.753

您应该真正使用 PDO 和准备好的语句，不再支持 mysql_* 。它会让你的生活更轻松，尤其是重复陈述。

否则，你的错误是什么？

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:29:34.923

对变量使用不同的名称`$query`和`$result`

它应该是

```
$query="INSERT INTO ptb_users (user_id,id,first_name,last_name,email )VALUES('NULL','NULL','".$firstname."','".$lastname."','".$email."')";
$result = mysql_query($query) or die();
$result1 = mysql_query("UPDATE ptb_users SET user_id=id");

$query2="INSERT INTO ptb_profiles (id,user_id,display_name )VALUES('NULL','NULL','".$username."')";
$result2 = mysql_query($query2) or die();
$result3 = mysql_query("UPDATE ptb_profiles SET id=user_id"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:29:42.973

您正在尝试插入`'NULL'`我猜是 auto_increment 列的字段。您应该从查询中省略它们：

```
$query = "INSERT INTO ptb_users (first_name, last_name, email )
            VALUES('".$firstname."', '".$lastname."', '".$email."')"; 
```

即使 null 应该存在，根据您对表的实现/定义，它们也不应该包含在其中，`'`因为这意味着字符串 NULL，而不是值。

# javascript - IE8 和 IE9 中 jquery 上传器 (blueimp) 的多个文件选择问题

> ID：15432383
> 
> 赞同：0
> 
> 时间：2013-03-15T12:23:19.577
> 
> 标签：javascript, jquery

我使用从[blueimp](https://github.com/blueimp/jQuery-File-Upload)上传的 jquery 文件。

我在 IE8 和 IE9 中遇到问题（我讨厌它 :)）与多个文件选择。

jquery 文件上传框架适用于 HTML5。

我使用的一个简单的 HTML 代码：

```
<form>
   <input type="file" name="files[]" multiple>
</form> 
```

在标题中我放了以下javascripts：

```
<script src="jquery.fileupload.js"  type="text/javascript"></script>
<script src="jquery.iframe-transport.js"  type="text/javascript"></script>
<!--[if lt IE 10]><script src="html5shiv.js"></script><![endif]--> 
```

当然，在 Firefox 和 Chrome 中可以完美运行，但在 IE8-IE9 中即使我放了`html5shiv.js`文件也不能。

你知道任何解决方法吗？或者我必须使用支持多种环境的框架，如 Flash、Silverlight ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:43:20.023

您的请求是跨域的吗？

使用 iframe 传输插件的跨域文件上传需要重定向回源服务器以检索上传结果。

# xml - 用 SQL 查询替换 Xml 列中的属性名称

> ID：15432392
> 
> 赞同：2
> 
> 时间：2013-03-15T12:23:40.453
> 
> 标签：xml, sql-server-2008

我需要在以下 XML 示例中将属性名称“TimeStamp”替换为“Timestamp”：

```
<CMD CommandID="6000">
   <DATA>
      <ReportData Key="10000">
         <Event TimeStamp="2013-03-07 15:42:49.000" Name="ABC" />
         <Event TimeStamp="2013-03-07 15:42:50.000" Name="DEF" />
         <Event TimeStamp="2013-03-07 16:22:03.000" Name="GHI" />
      <ReportData>
   <DATA>
<CMD> 
```

它存储在 SQL Server 2008 数据库中的`XML`类型列中。

我尝试过这样的事情，但它是不正确的：

```
DECLARE @variable NVARCHAR(20) = 'Timestamp'

UPDATE MyDatabase.dbo.MyTable
SET MyXmlColumn.modify('replace value of (/CMD/DATA/ReportData/Event/@TimeStamp) with sql:variable("@variable") ') 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:48:36.973

您可以使用[替换](http://msdn.microsoft.com/en-us/library/ms186862.aspx)。

```
update MyDatabase.dbo.MyTable
set MyXMLColumn = replace(cast(MyXMLColumn as nvarchar(max)), '<Event TimeStamp="', '<Event Timestamp="') 
```

# node.js - node.js 中是否有类似 Monitor for deferreds (Q) 的东西？

> ID：15432393
> 
> 赞同：1
> 
> 时间：2013-03-15T12:23:42.757
> 
> 标签：node.js, logging, monitoring, deferred, q

我想查看所有未解决的状态（如果可能，所有延迟日志：初始化、未解决、已解决/拒绝状态）。有什么机制吗？

像：`Q.getAllDeferreds()`，或`Q.getLog()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:41:03.900

假设“q” ...

请参阅“使用延迟”部分中的“进度通知”部分和有关“deferred.notify”的部分 -[这里](https://github.com/kriskowal/q)。

但请注意，它说（正如人们所期望的那样）“并非所有承诺都会实现进度通知”，因此除非您的工作模块提供通知，否则在承诺消费方面您无能为力。您可以在 a 中设置进度处理程序`.then()`，但除非模块调用，否则它不会触发`deferred.notify()`。

当然，如果工作模块是您自己构建的（或者在您的控制之下），那么您可以对其进行修改以提供通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:47:04.670

延迟实现（我是作者）提供了诸如未解决的承诺监控和承诺“使用统计”之类的东西，请查看[https://github.com/medikoo/deferred#monitoring-unresolved-promises](https://github.com/medikoo/deferred#monitoring-unresolved-promises)

# asp.net - 无法使用 firefox 浏览托管在 Visual Studio 开发服务器中的页面

> ID：15432394
> 
> 赞同：0
> 
> 时间：2013-03-15T12:23:51.937
> 
> 标签：asp.net, visual-studio-2010, firefox

我正在使用 ASP.net 4.0 开发一个 Web 应用程序。

当我使用 IE8 浏览它时，它看起来都是正确的。

但是当我尝试使用 FireFox 19.0 浏览它时，它说：

```
 Connection refused
 Description: Connection refused. 
```

它给出了 502 错误，并且在 chrome 中也给出了类似的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:35:31.020

使用 VS 嵌入式服务器时，请记住它只接受`http://localhost:<port>/`从运行它的机器输入的连接。

也许仔细检查您没有使用机器名称或任何不同于 localhost 的 Firefox 或 chrome。

# php - 将 MySQL 结果集转换为 JSON 数组以使用 Google GCM API 的问题

> ID：15432397
> 
> 赞同：0
> 
> 时间：2013-03-15T12:24:01.233
> 
> 标签：php, mysql, google-cloud-messaging

我正在开发一个应用程序，我必须在其中集成 GCM 功能。收件人的 device_id 存储在 MySQL 数据库中，然后通过 CURL 检索并发送到 Google GCM API url。问题是我这样做时收到错误消息：

```
 Recipients_Id field is not a JSON Array. 
```

php代码是：

```
 //get the recipients gcm_ids
     if (isset($_POST["deviceid"]) && isset($_POST["message"]) && isset($_POST["recipient_id"])) {
      require_once __DIR__ . '/db_connect.php';
include_once './GCM.php';
$gcm = new GCM();
 // connecting to db
$db = new DB_CONNECT();
 $device_id=$_POST['deviceid'];
$recipient_id=$_POST['recipient_id'];
$get_details=mysql_query("select id,name from gcm_users where gcm_regid='$device_id' ");
$row_details=mysql_fetch_array($get_details);
$user_name=$row_details["name"];
 $user_id=$row_details["id"];
$recipients_gcm_ids=mysql_query("SELECT  gcm_regid from gcm_users where id='$recipient_id'");
$rec_gcm1=array();
 while($row = mysql_fetch_assoc($recipients_gcm_ids))
 {array_push($rec_gcm1,$row);}
$recipients_gcm=array();
$recipients_gcm=json_encode($rec_gcm1);
$message = array("price" => $message1);
$result = $gcm->send_notification($recipients_gcm, $message);

//The class that sends the message to the Google API url
         class GCM {

//put your code here
// constructor
function __construct() {

}

/**
 * Sending Push Notification
 */
public function send_notification($Recipients_Id, $message) {
    // include config
    include_once './config.php';

    // Set POST variables
    $url = 'https://android.googleapis.com/gcm/send';

    $fields = array(
        'Recipients_Id' => $Recipients_Id,
        'data' => $message,
    );

    $headers = array(
        'Authorization: key=' . GOOGLE_API_KEY,
        'Content-Type: application/json'
    );
    // Open connection
    $ch = curl_init();

    // Set the url, number of POST vars, POST data
    curl_setopt($ch, CURLOPT_URL, $url);

    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    // Disabling SSL Certificate support temporarly
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

    // Execute post
    $result = curl_exec($ch);
    if ($result === FALSE) {
        die('Curl failed: ' . curl_error($ch));
    }

    // Close connection
    curl_close($ch);
    echo "Result Is:".$result;
} 
```

我知道这个问题与这行代码有关：

```
 $result = $gcm->send_notification($recipients_gcm, $message); 
```

但是，除了使用“json_encode”函数之外，我还不知道我将使用什么方法在 PHP 中创建 JSON 数组。也许还有另一种方法可以规避：

```
 "Not a JSON Array" error  ? 
```

顺便说一下 print_r($recipients_gcm) 的输出是：

```
 [{"gcm_regid": "ABCDEFGH12y63i4455u65y4i4p4yu4t3i3zzttyuuiioo"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:59:31.320

我在代码中看到了几个问题：

您正在向您的 send_notification 函数发送一个 reg id 的 json 字符串。相反，您应该发送一个 reg id 数组。尝试取出这两行并改用数组`$rec_gcm1`。

```
$recipients_gcm=array();
$recipients_gcm=json_encode($rec_gcm1); 
```

改为：

```
$result = $gcm->send_notification($rec_gcm1, $message); 
```

接下来，在 send_notification 函数中，更改`$fields`为：

```
$fields = array(
    'registration_ids' => $Recipients_Id,
    'data' => $message,
); 
```

即更改您的`Recipients_Id`密钥，`registration_ids`否则 Google GCM 服务器将无法解析它。

# python - 对掩码数组进行操作，然后对同一数组的不同部分进行操作

> ID：15432399
> 
> 赞同：0
> 
> 时间：2013-03-15T12:24:07.567
> 
> 标签：python, numpy, matplotlib, mask

所以我试图在 matplotlib 中实现一个符号样式的颜色比例，我通过将我的值缩放到 0-1 区域然后使用自定义颜色条刻度和标签来做到这一点。

我正在使用掩码将我的值分成三个部分，但它并没有像我预期的那样工作；

我首先这样做：

```
negMask = ma.masked_greater_equal(Z, -10**thresh, copy=True).mask
posMask = ma.masked_less_equal(Z, 10**thresh, copy=True).mask
linMask = ma.masked_outside(Z, -10**thresh, 10**thresh, copy=True).mask 
```

为了得到我想要的三个面具。然后我开始缩放到 0-1 区域：

```
sizeNeg = int(np.ceil(log10(-minZ)) - thresh)
sizePos = int(np.ceil(log10(maxZ)) - thresh)
sizeLin = 2
totSize = sizeNeg + sizePos + sizeLin

Z.mask = negMask
Z = (-np.log10(-Z) - thresh) / totSize 
```

如果我停在这里并绘制它，那么它的行为与预期一样，这是情节的一小部分：

![在此处输入图像描述](../Images/040843e605c1a08faf209b67c3ae4a31.png)

您可以在其中看到它绘制负值，但不是正值 - 因为它们被掩盖了。

因此，我将掩码更改为正值掩码；

```
Z.mask = posMask
Z = (np.log10(Z) - thresh + sizeNeg + sizeLin) / totSize 
```

但是当我这样做时，之前被屏蔽的所有值现在都只是`1.0`. 那里的数据不见了。

这是我的意思的一个例子：

```
$ python
Python 2.6.6 (r266:84292, Sep 11 2012, 05:25:09) 
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy as np
>>> from numpy.ma import masked_where as mw
>>> a = np.arange(0,10,1)
>>> a = mw(False, a)
>>> a
masked_array(data = [0 1 2 3 4 5 6 7 8 9],
             mask = False,
       fill_value = 999999)

>>> mask1 = mw(a>4,a).mask
>>> mask2 = mw(a<6,a).mask
>>> mask1
array([False, False, False, False, False,  True,  True,  True,  True,  True], dtype=bool)
>>> mask2
array([ True,  True,  True,  True,  True,  True, False, False, False, False], dtype=bool)
>>> a.mask = mask1
>>> a
masked_array(data = [0 1 2 3 4 -- -- -- -- --],
             mask = [False False False False False  True  True  True  True  True],
       fill_value = 999999)

>>> a = np.log10(a)
__main__:1: RuntimeWarning: divide by zero encountered in log10
>>> a
masked_array(data = [-- 0.0 0.301029995664 0.47712125472 0.602059991328 -- -- -- -- --],
             mask = [ True False False False False  True  True  True  True  True],
       fill_value = 999999)

>>> a.mask = mask2
>>> a
masked_array(data = [-- -- -- -- -- -- 1.0 1.0 1.0 1.0],
             mask = [ True  True  True  True  True  True False False False False],
       fill_value = 999999) 
```

在屏蔽数组上使用`np.log10`会破坏屏蔽值，因此当您取消屏蔽它们时，它们只是 all `1.0`。

我知道我可以将我的数组分成三个单独的数组，每个区域一个，但是之后我如何再次组合它们呢？

# visual-studio - 打开 .csproj 文件时，Visual Studio Express 2012 抱怨“未安装 Web 项目组件”

> ID：15432401
> 
> 赞同：0
> 
> 时间：2013-03-15T12:24:11.367
> 
> 标签：visual-studio, components

我刚刚为 Windows 桌面安装了 Windows Visual Studio Express 2012。我现在正在尝试打开一个`.csproj`文件。这样做时，我收到投诉：

> 未安装 Web 项目组件。无法升级项目：[文件].csproj

这是什么意思？如何安装“Web 项目组件”？更一般地说，我如何安装“组件”？它们是什么，它们在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:27:04.097

是的，您没有安装 Web 组件，我遇到了同样的问题

链接： http: [//www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-web](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-web)

# arrays - Codeigniter - 将表单输入信息传递给控制器 并在下一个视图中显示

> ID：15432403
> 
> 赞同：1
> 
> 时间：2013-03-15T12:24:25.500
> 
> 标签：arrays, codeigniter, post, view, controller

这个问题可能是重复的，但我找不到我正在寻找的确切答案。

我有两种形式和两个控制器。

我想将数据输入到第一个控制器视图中。在该页面上将数据提交给第二个控制器并将其显示在该控制器视图上。

现在，我尝试将表单输入数据插入到控制器中的数组中，然后将其作为视图中的普通变量进行访问，但没有运气。

**我的第一种形式的控制器**

```
function new_order_details() 
  {
      $this->load->view('sales/new_order_details');
  } 
```

**我的输入表单视图：new_order_details'**

```
<form id="sales_order_details" action="/sales/new_blank_order_lines" method="post">
<input type="text" id="customer" />
<input type="submit" name="blank_order" id="blank_order" value="Continue">
</form> 
```

**我的第二种形式的控制器**

```
function new_blank_order_lines() 
  {
     $data = array(
    'customer' =>$this->input->post('customer')
       );
      $this->load->view('sales/new_blank_order_lines',$data);
  } 
```

**以及我想在哪里显示数据的视图**

```
<?php echo "--".$customer."--"; ?> 
```

上面的输出是变量 $customer 为空。

任何想法，将不胜感激。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:29:48.303

它是空的，因为您没有在视图文件中为客户输入字段提供名称参数。

编写html如下

```
<input type="text" id="customer" name="customer" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:33:50.203

您的输入缺少名称 attr ..

```
<input type="text" id="customer" name="customer"/>
                            //----^^^^^^^----- here 
```

然后将该值与您提供给控制器的名称一起发布

# colors - 处理中的当前填充颜色

> ID：15432404
> 
> 赞同：3
> 
> 时间：2013-03-15T12:24:30.907
> 
> 标签：colors, processing

在处理中，我可以调用`fill(myRGBValue)` 设置填充颜色。有没有办法让我查询当前的填充颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:35:58.500

当然，[只需使用类似的东西](http://processing.github.io/processing-javadocs/core/processing/core/PGraphics.html)：

```
int fillColor = g.fillColor; 
```

`g`是默认渲染器的名称。您还可以使用`g.strokeColor`. 这两者都考虑到`noFill()`和`noStroke()`。

请注意，尽管这可能仅适用于 Java 版本的 Processing，而不是 P5.js，后者在底层工作方式不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-14T16:07:36.700

如果要保持程序兼容，请使用以下内容：

// 实用程序

```
private static color currentFillColor = 0xFFFFFFFF;
private static color currentStrokeColor = 0xFF000000;

void setFill(color c)
{
  currentFillColor = c;
  fill(c);
}

color getFill()
{
  return currentFillColor;
}

void setStroke(color c)
{
  currentStrokeColor = c;
  stroke(c);
}

color getStroke()
{
  return currentStrokeColor;
} 
```

# jquery - 使用jQuery Ajax处理xml文件

> ID：15432408
> 
> 赞同：0
> 
> 时间：2013-03-15T12:24:43.050
> 
> 标签：jquery, xml-parsing

我是使用 jQuery 解析 Ajax 和 Xml 的新手，我有一点问题。我不想在这里从非本地 xml 文件中检索数据：[http](http://www.velib.paris.fr/service/carto/carto.xml) ://www.velib.paris.fr/service/carto/carto.xml 。在 Ajax 中，我编写了以下代码：

```
$.ajax({
    type: 'GET' ,
    url: 'http://www.velib.paris.fr/service/carto/carto.xml' ,      
    success: function(xml) {
        console.log('Success') ;
        console.log(xml) ;            
    } ,
    error: function() {
        console.log('Error') ;
    }
}) ; 
```

但是，“console.log(xml) 正在返回一个带有 html 标签的字符串。然而，它显然是 xml（通过扩展名，当你转到我上面提到的页面时）。也许我做错了什么，所以我需要帮助，请:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:30:40.710

传递`dataType: "xml"`给ajax调用，这样jQuery就可以将响应文本解析为xml，并将结果传递给成功回调

```
$.ajax({
    type: 'GET' ,
    url: 'http://www.velib.paris.fr/service/carto/carto.xml' ,      
    dataType: 'xml',
    success: function(xml) {
        console.log('Success') ;
        console.log('Success found maker: ' + jQuery(xml).find('marker').length) ;
        console.log(xml) ;            
    } ,
    error: function() {
        console.log('Error') ;
    }
}) ; 
```

# jquery - IE8 中的 jQuery 脚本错误

> ID：15432410
> 
> 赞同：0
> 
> 时间：2013-03-15T12:24:44.563
> 
> 标签：jquery, internet-explorer

在我的应用程序中，当我们将鼠标悬停在行上时，会显示弹出窗口。它在Firefox浏览器中工作正常，但在IE8中显示以下错误，

`'attr(..)' is null or not an object`

我的实际代码是，

```
var diamondinfo = "Test Content";
jQuery('#row').attr('title',diamondinfo); 
```

# php - UITextField 通过 PHP 发布到 MySQL

> ID：15432413
> 
> 赞同：0
> 
> 时间：2013-03-15T12:24:51.537
> 
> 标签：php, iphone, mysql, xcode

我正在尝试通过 php-form 发布这 4 个文本字段，然后将其插入我的数据库中。

```
IBOutlet UITextField *who;
    IBOutlet UITextField *what;
    IBOutlet UITextField *where;
    IBOutlet UITextField *contact; 
```

Xcode中的post方法是：

```
- (IBAction)post:(id)sender
{
    NSLog(@"%@", who);
    NSLog(@"%@", what);
    NSLog(@"%@", where);
    NSLog(@"%@", contact);
    // create string contains url address for php file, the file name is post.php, it receives parameter :name
    NSString *strURL = [NSString stringWithFormat:@"http://website.com/post.php?who=%@&what=%@&where=%@&contact=%@",who, what, where, contact];

    // to execute php code
    NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

    // to receive the returend value
    NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

    NSLog(@"%@", strResult);
} 
```

我的 post.php 文件如下所示：

```
<?php header("Location: feed.php"); ?>
<?php 

define ( 'DB_NAME','database_name');
define ( 'DB_USER','user');
define ( 'DB_PASSWORD','root');
define ( 'DB_HOST','localhost');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

if (!link) {
die('Could not connect: ' .mysql_error());
}

$db_selected = mysql_select_db(DB_NAME, $link);

if (!$db_selected) {
die('Can\'t use ' . DB_NAME . ': ' . mysql_error());
}

$value1 = $_REQUEST['who'];
$value2 = $_REQUEST['what'];
$value3 = $_REQUEST['where'];
$value4 = $_REQUEST['contact'];

$sql = mysql_query("INSERT INTO content VALUES ('','".mysql_real_escape_string($value1)."','".mysql_real_escape_string($value2)."', '".mysql_real_escape_string($value3)."','".mysql_real_escape_string($value4)."')") or die(mysql_error());

 if (!mysql_query($sql)) {
die('Error: ' . mysql_error());
}
    echo "You've just posted your text!";
mysql_close();
?> 
```

但是当我尝试从应用程序发布时，没有任何反应......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:28:04.390

为什么`<?php header("Location: feed.php"); ?>`在代码的顶部？这会将您重定向到另一个页面。

和

```
if (!mysql_query($sql)) {
  die('Error: ' . mysql_error());
} 
```

第二次执行查询。做：

```
if (!$sql) {
  die('Error: ' . mysql_error());
} 
```

反而。

# c++ - 通过 new 赋值一个复杂的构造函数

> ID：15432417
> 
> 赞同：4
> 
> 时间：2013-03-15T12:25:12.083
> 
> 标签：c++, constructor

我有一个困惑。以下是代码片段。

我想创建一个包含五个类对象的动态数组，`new`但我想运行一个循环来使用循环计数器分配构造函数的第一个参数。就像是。

```
class A {
    public:
        A(int _x, int _y):x(_x),y(_y) {}
    private:
        int x,y;
};

int main() {
    A* a = new A[5];   //compiler error
    for(i=0;i<5;i++) {
        a[i] = A(i, 10);
    }
} 
```

有人可以告诉我这样做的正确语法是什么，因为我没有简单的构造函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T12:27:48.863

这条线

```
A* a = new A[5]; 
```

要求它`A`是默认可构造的。因此，一个简单的选择是将默认构造函数添加到`A`：

```
 A(): x(), y() {} // zero-initializes x and y 
```

请注意，在 C++ 中，通常倾向于`std::vector<A>`在这种情况下使用 a 。它需要所有内存管理的情况，因此不需要显式调用`new`和`delete`。它也可以动态调整大小。这将构造一个`std::vector<A>`具有五个默认构造对象的`A`对象：

```
std::vector<A> a(5); 
```

尽管您可能想创建一个空的并将值循环推入其中。

```
std::vector<A> a;
for(i=0;i<5;i++) {
    a.push_back(A(i, 10));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T12:35:09.127

```
A* a = new A[5]; 
```

尝试使用您的类中不存在的默认构造函数来构造`5`类型的对象。你应该实现它：`A``A`

```
class A {
    public:
        A() : x_(0), y_(10) { }                 // default constructor
        A(int x, int y) : x_(x), y_(y) { }
    private:
        int x_;
        int y_;
}; 
```

但请注意，最好使用`std::vector`这个动态分配的数组来代替：

```
std::vector<A> a(5); 
```

它还使用默认构造函数构造`5`类型的对象:)`A`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:29:32.343

由于您没有不带参数的构造函数，您可以这样做：

```
A(int _x = 0, int _y = 0):x(_x),y(_y) {} 
```

或者

```
A() : x(0), y(0) {} 
```

而不是 for 循环写

```
for(i=0;i<5;i++) {
    a[i].set(i, 10);
} 
```

用合适的方法`set`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:29:31.770

你有两个选择：

*   要么使用`A** a = new A*[5]`and `a[i] = new A(i, 10)`，也就是说一个指针数组，`A`而不是对象数组。

*   或者包含一个默认构造函数`A(): x(0), y(0) {}`，或者只是将默认参数添加到您现有的构造函数中。

您当前的编译器错误是因为`new A[5]`构建 5 个连续`A`的 s 并为此分配`5 * sizeof(A)`内存字节并调用 5 次默认构造函数`A`（没有任何参数的构造函数），但是此默认构造函数在您的 A 类中不可用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T12:29:48.293

这里的问题是您没有默认构造函数。当您调用 new 时，它需要以某种方式创建对象，而不能。如果 C++11 是一个选项，您必须提供一个（即初始化`x`和`y`零）或使用[初始化列表。](http://en.cppreference.com/w/cpp/utility/initializer_list)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T12:35:36.870

如果您不想定义默认构造函数，那么试试这个，

```
int main() 
{    
    A* a[5];
    for(int i=0;i<5;i++) {
      a[i] = new A(i, 10);
    }
} 
```

# jquery - 小书签 - 如果未加载，则加载 jquery 和 jquery UI，检查最低版本并以正确的顺序

> ID：15432420
> 
> 赞同：0
> 
> 时间：2013-03-15T12:25:22.387
> 
> 标签：jquery, jquery-ui, bookmarklet

我正在创建一个需要 jquery 和 jquery ui 的小书签，并且无法使健壮/灵活的版本正常工作（已搜索 SO 和各种博客），但他们似乎只检查一个文件是否已加载（例如 jQuery）或仅加载 jQuery 和其他按顺序排列文件，而不检查它们是否首先加载。

我真的很喜欢这一个：

```
(function(){

    // the minimum version of jQuery we want
    var v = "1.8.2";

    // check prior inclusion and version
    if (window.jQuery === undefined || window.jQuery.fn.jquery < v) {
        var done = false;
        var script = document.createElement("script");
        script.src = "http://ajax.googleapis.com/ajax/libs/jquery/" + v + "/jquery.min.js";
        script.onload = script.onreadystatechange = function(){
            if (!done && (!this.readyState || this.readyState == "loaded" || this.readyState == "complete")) {
                done = true;
                initMyBookmarklet();
            }
        };
        document.getElementsByTagName("head")[0].appendChild(script);
    } else {
        initMyBookmarklet();
    }

    function initMyBookmarklet() {
        (window.myBookmarklet = function() {
            $('body').append('hello world');
        })();
    }

})(); 
```

它为 jQuery 设置了最低版本，并且仅在需要时加载。但是我如何也用 jQuery UI 来解决这个问题呢？例如，设置一个最小版本并仅在需要时加载它并确保它们以正确的顺序加载。

任何指针将不胜感激，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:07:35.070

你在正确的轨道上......加载jquery后再次检查jquery ui

```
(function(){
    var addScript = function (path, callback) {
        var done = false;
        var script = document.createElement("script");
        script.src = path;
        script.onload = script.onreadystatechange = function(){
            if (!done && (!this.readyState || this.readyState == "loaded" || this.readyState == "complete")) {
                done = true;
                if (callback) {
                    callback ();
                }
            }
        };
        document.getElementsByTagName("head")[0].appendChild(script);
    };

    var initMyBookmarklet = function () {
        (window.myBookmarklet = function() {
            $('body').append('hello world');
        })();
    }

    var checkForJQueryUI = function () {
        if (condition for jquery ui) {
            addScript("http://jquery-ui-path-goes-here/file.js", initMyBookmarklet);
        } else {
            initMyBookmarklet();
        }
    };

    var checkForJQuery = function () {
        // the minimum version of jQuery we want
        var v = "1.8.2";
        // check prior inclusion and version
        if (window.jQuery === undefined || window.jQuery.fn.jquery < v) {
            addScript("http://ajax.googleapis.com/ajax/libs/jquery/" + v + "/jquery.min.js", checkForJQueryUI);
        } else {
            checkForJQueryUI();
        }
    };

    checkForJQuery();
})(); 
```

# php - 无法在 Magento 中获取订单的所有项目？

> ID：15432422
> 
> 赞同：0
> 
> 时间：2013-03-15T12:25:25.763
> 
> 标签：php, magento

我正在开发一个页面`module`，`magento`其中我在页面上显示所有订单，并且与每个订单一起显示完整的订单信息，包括针对该订单购买的产品。我可以显示所有订单，但我不明白其中包含多个产品的订单仅显示单个产品，当我在“销售下的订单”中检查此内容时，即“销售”->“订单”，则显示超过 1 个产品那里。

**这是我的代码：**

```
public function indexAction()
{
    $model = Mage::getModel('sales/order');
    $product_model = Mage::getModel('catalog/product');

    $collection = $model->getCollection()
    ->addFieldToFilter('status', array("in" => array('complete','closed','pending','holded','payment_review','pending_payment','pending_paypal','processing')));

    $data = array();
    $orderArr = array();

    $records = 0;
    foreach($collection as $order)
    {
        $data[$records]['order_data']['shipping_address'] = $order->getShippingAddress()->getData(); // get shipping details
        $data[$records]['order_data']['billing_address'] = $order->getBillingAddress()->getData(); // get billing details

        $data[$records]['order_data']['order_total'] = $order->getGrandTotal(); // get total amount
        $items_obj = $model->loadByIncrementId($order['increment_id']); // get all items
        $items = $items_obj->getAllItems();

        $data[$records]['order_data']['order_id'] = $order['increment_id']; 

        $i = 0;
        $productData = array();
        $orderProductArr = array();
        foreach($items as $itemId => $item)
        {  
            $_product = $product_model->load($item->getProductId()); // getting product details here to get description

            $taxClassId = $_product->getData("tax_class_id");
            $taxClass = $_product->getData("tax_class_name");

            $taxRate = $order['tax_amount'];

            $orderProductArr[$i]['web_id'] = $item->getProductId();
            $orderProductArr[$i]['quantity'] = $item->getQtyToInvoice();
            $orderProductArr[$i]['price'] = $item->getPrice();
            $orderProductArr[$i]['description'] = $_product->getDescription();
            $orderProductArr[$i]['currency'] = $order['order_currency_code'];
            $orderProductArr[$i]['tax_id'] = $taxClassId;
            $orderProductArr[$i]['tax_amt'] = $taxRate;
            $orderProductArr[$i]['total_amt'] = ($item->getPrice()*$item->getQtyToInvoice())+($taxRate);

            $productData[$i]['title'] = $item->getName();
            $productData[$i]['web_product_id'] = $item->getProductId();
            $productData[$i]['price'] = $item->getPrice();
            $productData[$i]['product_sku'] = $item->getSku();
            $productData[$i]['tax_class'] = $taxClassId;
            $productData[$i]['description'] = $_product->getDescription();

            $tax_arr[$i]['tax_id'] = $taxClassId;
            $tax_arr[$i]['tax_class'] = $taxClassId;
            $tax_arr[$i]['tax_amt'] = $taxRate;

            $i++;
        }

        $data[$records]['order_data']['product_details'] = $orderProductArr;
        $data[$records]['order_data']['order_product_details'] = $productData;
        $data[$records]['order_data']['tax_arr'] = $tax_arr;
        $data[$records]['order_data']['shipping_amount'] = $order->getShippingAmount();
        $data[$records]['order_data']['order_details'] = $order->toArray();
        unset($orderProductArr);
        unset($productData);
        $records++;
    }

     echo "<pre>";
     print_r($data);
     echo "</pre>";

} 
```

谁能帮我解决这个问题？

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:06:35.307

我在我的模块中使用了这个。它可能会帮助你。

**加载 Magneto 订单和产品集合**

```
$resource_model = Mage::getResourceModel('sales/order_collection');
$product_model = Mage::getModel('catalog/product'); 
```

**循环通过订单收集**

```
 $records = 0;
    $productData = array();
    $orderProductArr = array();

    foreach($resource_model as $all_orders)
    {  
        if($all_orders['status']!="canceled" && $all_orders['status']!="fraud")
        {   
            $i = 0;
            $items = $all_orders->getAllVisibleItems();

            foreach($items as $item)
            {
                $_product = $product_model->load($item->getProductId()); // getting product details here to get description

                $taxClassId = $_product->getData("tax_class_id");
                $taxClass = $_product->getData("tax_class_name");

                $taxRate = $order['tax_amount'];

                $orderProductArr[$i]['web_id'] = $item->getProductId();
                $orderProductArr[$i]['quantity'] = $item->getQtyToInvoice();
                $orderProductArr[$i]['price'] = $item->getPrice();
                $orderProductArr[$i]['description'] = $_product->getDescription();
                $orderProductArr[$i]['currency'] = $order['order_currency_code'];
                $orderProductArr[$i]['tax_id'] = $taxClassId;
                $orderProductArr[$i]['tax_amt'] = $taxRate;
                $orderProductArr[$i]['total_amt'] = ($item->getPrice()*$item->getQtyToInvoice())+($taxRate);

                $productData[$i]['title'] = $item->getName();
                $productData[$i]['web_product_id'] = $item->getProductId();
                $productData[$i]['price'] = $item->getPrice();
                $productData[$i]['product_sku'] = $item->getSku();
                $productData[$i]['tax_class'] = $taxClassId;
                $productData[$i]['description'] = $_product->getDescription();

                $tax_arr[$i]['tax_id'] = $taxClassId;
                $tax_arr[$i]['tax_class'] = $taxClassId;
                $tax_arr[$i]['tax_amt'] = $taxRate;

                $i++;
                unset($items);
            }    
            $data[$records]['order_data']['product_details'] = $orderProductArr;
            $data[$records]['order_data']['order_product_details'] = $productData;
            $data[$records]['order_data']['tax_arr'] = $tax_arr;
            unset($orderProductArr);
            unset($productData);
            unset($tax_arr);
            $records++;
        }    
    } 
```

# html - Html5 缓存清单无法正常工作

> ID：15432426
> 
> 赞同：0
> 
> 时间：2013-03-15T12:25:31.490
> 
> 标签：html, offline-caching, cache-manifest

我开始使用离线网络应用程序。

我为一个测试站点制作了一个缓存清单，但我无法让它工作。

我尝试在离线时将它从 index.html 重定向到 offline.html 但它只是下载 index.html 并显示它。

这是我的缓存清单：

```
CACHE MANIFEST

FALLBACK:
./ ./offline.html 
```

在 index.html 里面只有一行：

```
Hello this is a test, you are online 
```

这是offline.html

```
<html manifest='cmanifest'>
<head></head>
<body>you are offline now</body>
</html> 
```

**更新**

现在我有这个问题：

我添加了一个链接，该链接在联机时应转到一个站点，而在脱机时应转到另一个站点，但它始终只加载 online.html。

我的 index.html 现在是这样的：

```
<html>
<a href='online.html'>Ir a online.html</a>
</html> 
```

我的缓存是这样的：

```
CACHE MANIFEST

#v2

FALLBACK:
./online ./offline.html

NETWORK:
* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:41:58.247

好的，我自己找到了解决方案。

我缺少这一行：

```
NETWORK:
* 
```

# c# - 两个版本的单声道一个接受证书，另一个不接受？

> ID：15432430
> 
> 赞同：1
> 
> 时间：2013-03-15T12:25:40.780
> 
> 标签：c#, ubuntu, mono, certificate

我有两台机器，每台都运行不同版本的单声道：

机器 1：Mono JIT 编译器版本 2.10.5 (Debian 2.10.5-1ubuntu0.1) 机器 2：Mono JIT 编译器版本 2.10.8.1 (Debian 2.10.8.1-1ubuntu2.2)

我决定使用 允许所有证书`ServicePointManager.ServerCertificateValidationCallback = Validator;`，其中`Validator`是：

```
public bool Validator (object sender, X509Certificate certificate, X509Chain chain,     SslPolicyErrors sslPolicyErrors)
{
    return true;
} 
```

机器 1 运行良好并接受证书

但是机器 2 抛出了一个大错误，我认为这可能是一个证书问题

有任何想法吗？

大错误：

```
Unhandled Exception: System.Net.WebException: Error getting response
stream (ReadDone1): ReceiveFailure ---> System.IO.IOException: EndRead
failure ---> System.Net.Sockets.SocketException: Connection reset by
peer   at System.Net.Sockets.Socket.EndReceive (IAsyncResult result)
[0x00000] in <filename unknown>:0    at
System.Net.Sockets.NetworkStream.EndRead (IAsyncResult ar) [0x00000]
in <filename unknown>:0    --- End of inner exception stack trace --- 
at System.Net.Sockets.NetworkStream.EndRead (IAsyncResult ar)
[0x00000] in <filename unknown>:0    at
Mono.Security.Protocol.Tls.SslStreamBase.InternalReadCallback
(IAsyncResult result) [0x00000] in <filename unknown>:0    --- End of
inner exception stack trace ---   at
System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult)
[0x00000] in <filename unknown>:0    at
System.Net.HttpWebRequest.GetResponse () [0x00000] in <filename
unknown>:0    at CRMOnlineSOAPRequests.CRMHelper.GetSOAPResponse
(System.String url, System.String soapEnvelope) [0x00000] in <filename
unknown>:0    at CRMOnlineSOAPRequests.CRMHelper.createEntity
(System.String[] keyValuesOneDimensionalArray) [0x00000] in <filename
unknown>:0    at CRMCreateEntity.Program.Main (System.String[]
keyValuesOneDimensionalArray) [0x00000] in <filename unknown>:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.Net.WebException: Error
getting response stream (ReadDone1): ReceiveFailure --->
System.IO.IOException: EndRead failure --->
System.Net.Sockets.SocketException: Connection reset by peer   at
System.Net.Sockets.Socket.EndReceive (IAsyncResult result) [0x00000]
in <filename unknown>:0    at System.Net.Sockets.NetworkStream.EndRead
(IAsyncResult ar) [0x00000] in <filename unknown>:0    --- End of
inner exception stack trace ---   at
System.Net.Sockets.NetworkStream.EndRead (IAsyncResult ar) [0x00000]
in <filename unknown>:0    at
Mono.Security.Protocol.Tls.SslStreamBase.InternalReadCallback
(IAsyncResult result) [0x00000] in <filename unknown>:0    --- End of
inner exception stack trace ---   at
System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult)
[0x00000] in <filename unknown>:0    at
System.Net.HttpWebRequest.GetResponse () [0x00000] in <filename
unknown>:0    at CRMOnlineSOAPRequests.CRMHelper.GetSOAPResponse
(System.String url, System.String soapEnvelope) [0x00000] in <filename
unknown>:0    at CRMOnlineSOAPRequests.CRMHelper.createEntity
(System.String[] keyValuesOneDimensionalArray) [0x00000] in <filename
unknown>:0    at CRMCreateEntity.Program.Main (System.String[]
keyValuesOneDimensionalArray) [0x00000] in <filename unknown>:0 
```

# c# - 如何在 C# 中派生两 个抽象类

> ID：15432431
> 
> 赞同：2
> 
> 时间：2013-03-15T12:25:41.683
> 
> 标签：c#, .net, c#-4.0, interface

我有应用程序结构 -

```
public abstract class a 
{
}
//defined in a.dll
public abstract class b
{
}
//defined in b.dll

//Above 2 DLL reference added in main project where I want to derive both of this abstract classee like

public abstract class proj : a, b
{
} 
```

我能够推导出其中任何一个，但不能同时推导出两者。所以请指导我丢失的东西或我所做的错误编码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T12:27:12.383

您不能使用 C# 进行多重继承。但是，您可以通过使用[接口](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2012/87d83y5b(v=vs.110)?redirectedfrom=MSDN)来实现这一点。

```
public interface Ia 
{

}

public interface Ib 
{

}

public abstract class MainProject : Ia, Ib  
{

} 
```

C# 接口只允许方法、属性、事件和索引器的签名。您必须在`proj` (MainProgram) 类中定义这些的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:26:59.507

```
public abstract class proj : a, b 
```

这是做不到的。C# 不允许多重继承。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:27:12.400

而不是从多个抽象类派生（这在 C# 中是非法的），而是从两个接口（根据定义是抽象的）派生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T12:27:36.450

您不能同时从两个类派生。您应该改用接口。

```
public interface IFirstInterface
{
}
public interface ISecondInterface
{
}

public abstract class Proj : IFirstInterface, ISecondInterface
{
} 
```

现在继承自的类`Proj`仍然需要实现两个接口中定义的所有方法和属性。

# qt5 - QT5 QPlatformNativeInterface 和 HWND

> ID：15432432
> 
> 赞同：16
> 
> 时间：2013-03-15T12:25:52.037
> 
> 标签：qt5, hwnd, qtgui, wid

[在使用 Qt5（来自 WId）的 Windows 上获取 HWND](https://stackoverflow.com/questions/14048565/get-hwnd-on-windows-with-qt5-from-wid)的答案之一中，建议使用**QPlatformNativeInterface**来恢复本机窗口处理程序。

要访问 QT 标头，尽管该示例使用其完整路径：

```
#include <QtGui/5.0.0/QtGui/qpa/qplatformnativeinterface.h> 
```

当然，这作为最终解决方案是不可接受的。有没有办法使用 QT 的默认包含系统来包含**QPlatformNativeInterface ？**

请注意，两者都没有

```
#include <QPlatformNativeInterface> 
```

有效（在默认 QT 构建期间不会生成此文件）

也不

```
#include <QGuiApplication> 
```

有效（仅包含 **QPlatformNativeInterface**的前向声明）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T19:14:16.203

您可以使用

```
QT += gui-private 
```

在您的项目文件中，如在[示例插件](http://qt.gitorious.net/qt/qtbase/blobs/HEAD/src/plugins/platforms/minimal/minimal.pro)中，然后只是

```
#include <qpa/qplatformnativeinterface.h> 
```

应该工作（至少对我有用）。

这些 API 确实是私有的，但如果你必须使用它们，我想这比`#ifdef`为每个版本添加一个更好。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-29T17:47:46.087

对于 CMake，你必须使用这个：

```
find_package(Qt5Gui)
include_directories(${Qt5Gui_PRIVATE_INCLUDE_DIRS}) 
```

然后对源文件使用正常的包含：

```
#include <qpa/qplatformnativeinterface.h> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:47:14.617

**通过更多搜索， QPlatformNativeInterface**目前似乎是私有的，并且 当这个库稳定时将作为[Qt 平台抽象的一部分公开。](http://wiki.qt.io/Qt-Platform-Abstraction)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-04T10:56:43.563

实际上 winId() 应该可以正常工作，但是您应该记住一个事实（在您链接到的答案中没有提到），这个 HWND 将在 UPON 请求中生成。这就是 Qt 的工作方式，它使用所有者绘制工具并且不为所有内容创建标准窗口句柄（例如，您可以从 MSDN 中看到您的 Spy），但是一旦您要求 HWND，它就会创建一个适当的实体和向您返回一个有效的 HWND，因此它将对 Spy 可见（您可以在任何标准小部件上尝试此操作）

# javascript - Javascript函数执行范围

> ID：15432443
> 
> 赞同：1
> 
> 时间：2013-03-15T12:26:50.613
> 
> 标签：javascript, function

在 Javascript 中，据说函数是使用定义函数时有效的范围执行的。它与调用函数时的作用域无关。

它到底是什么意思？有人可以用简单的例子解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:31:17.397

下面的输出是 A 因为`foo`是在 的范围内*定义*的，所以它使用`function a`的变量也是在 的范围内定义的变量。`data``function a`

即使在where范围内*调用*了该函数，它也不输出 B 。`function b``data = "B"`

```
<div id="output"></div>
<script>
  var data = "global";

  function a() {
    var data = "A";
    function foo() {
       document.getElementById('output').innerHTML = data;
    }
    return foo;
  }

  function b() {
    var data = "B";
    var func = a();
    func();
  }

  b();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:37:09.287

```
// Global variables are on every scope chain
var global = 'global'

// Function variables are only on a function's scope chain
function bar() {
  var fn = 'fn';

  // foo called from here where fn is avaialble as a local variable
  foo(); // undefined

  return function() {
    alert(fn)
  }
}

function foo() {
  // foo can access global because it's on its scope chain
  alert(global);

  // Can't access fn because it's on bar's scope chain
  // so returns undefined
  alert(typeof fn);    
}

// the function returned by bar has access to fn
var f = bar(); // global

f(); // fn 
```

# javascript - 代理缓存承诺

> ID：15432444
> 
> 赞同：1
> 
> 时间：2013-03-15T12:26:52.320
> 
> 标签：javascript, html, proxy, promise, session-storage

我有一组像这样连接到服务器的承诺：

```
function getSomething(data, moreData, evenMoreData){
    var dfd = new jQuery.Deferred();
    Dajaxice.myProject.getSomethong(function(data){
        dfd.resolve(data.result);
    }, {'data': data, 'moreData': moreData, 'evenMoreData':evenMoreData});
    return dfd.promise();
} 
```

我想定义一个叫做缓存的代理函数，像这样工作：

```
cache(getSomething, [data, moreData, evenMoreData]) 
```

这个函数应该返回承诺。如果在 cashe 中找到 'getSomething' 结果，则该承诺将立即解决，否则，将返回原始 'getSomething' 承诺。

我开始写一个函数：

```
function cache(funct, args){
    if(Modernizr.sessionstorage){
        var dfd = new jQuery.Deferred();
        var hash = SHA256(WHAT?????);
        var cache = sessionStorage[hash];
        if(cache)
            dfd.resolve(cache);
        else{
           funct.apply(null, args).then(function(result){
              sessionStorage[hash] = result;
              dfd.resolve(result);
           });    
        }
       return dfd.promise();  
     }
    return funct.apply(null, args);
} 
```

问题是：我应该如何计算存储密钥？（即我应该用什么代替什么？？？）

# excel - 复制数据集特定部分的宏 - 无法正常工作

> ID：15432445
> 
> 赞同：0
> 
> 时间：2013-03-15T12:26:54.023
> 
> 标签：excel, vba

我有一个宏，它扫描位于“我们的数据”表中某处的特定标题。当它找到标头时，它会复制标头和数据范围，直到最后一个值。之后，它应该将其复制到第一个空行中的“计算”表中。但是，当搜索到的标题旁边有一些其他值时，此代码无法正常工作。然后它抓住了一切。

*示例：我想查找“公司类型”。在“我们的数据”表中，它看起来像这样：*

```
|Target Profile Breakdown | Company Type | NAICS Description | NAICS code |
|                         |              |                   |            |
|                         |              |                   |            |
|                         |              |                   |            | 
```

*然后代码将所有 4 个数据集（目标配置文件细分、公司类型、NAICS 描述、NAICS 代码）复制到“计算”表。* 我的代码中的错误在哪里？

**代码：**

```
Sub testing()
Sheets("Our Data").Activate
  Dim rngAddress As Range
  Set rngAddress = Range("A1:ZZ66666").Find("Company Type")
  If rngAddress Is Nothing Then
    MsgBox "Company Type column was not found."
    Exit Sub
  End If
  Range(rngAddress, rngAddress.End(xlDown)).CurrentRegion.Copy
  Sheets("Calculations").Activate
Range("IV1").Select
Selection.End(xlToLeft).Select
ActiveCell.Offset(0, 1).Select
ActiveSheet.Paste
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:30:35.953

请`CurrentRegion`从您的代码中删除，这应该可以解决您的问题。

# silverlight-4.0 - Silverlight 转换器显示两位小数

> ID：15432451
> 
> 赞同：1
> 
> 时间：2013-03-15T12:27:07.157
> 
> 标签：silverlight-4.0, decimal, ivalueconverter

我想在带有两位小数的文本框中显示一个小数。当页面加载时，文本框中的值显示为两位小数 ("0.00") 。当我将值更改为 10 时，它只显示为 10。我怎样才能将其显示为“10.00”

以下是我的转换器。

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {

        decimal convertedBudget;
        if (value == null)
        {
            convertedBudget = 0.0M;
        }
        else
        {
            convertedBudget = (decimal)value;
        }
        return string.Format("{0:#,0.00}", Math.Round(convertedBudget, 2));
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        decimal convertedBudget = 0;
        if(value!=null && !string.IsNullOrEmpty(value.ToString()))
        {
           convertedBudget =  System.Convert.ToDecimal(value.ToString());
        }
        return Math.Round(convertedBudget, 2);
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:48:21.983

您不需要`ValueConverter`这个，只需绑定`TextBox.Text`到您的并在其自身`decimal`上使用字符串格式。**如果您想在输入文本后更新值，则捕获适当的事件并进行更改。**`TextBox`

 **```
<UserControl x:Class="SilverlightApplication2.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400"
xmlns:local="clr-namespace:SilverlightApplication2">
<UserControl.DataContext>
    <local:VM x:Name="VM"/>
</UserControl.DataContext>
    <Grid x:Name="LayoutRoot" Background="White">
    <TextBox Text="{Binding MyValue, Mode=TwoWay, StringFormat=\{0:0.00\}}" LostFocus="TextBox_LostFocus_1" />
    <Slider HorizontalAlignment="Left" Margin="75,189,0,0" VerticalAlignment="Top" Value="{Binding MyValue, Mode=TwoWay}" Width="293"/>
</Grid> 
```

* * *

```
public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();
    }

    private void TextBox_LostFocus_1(object sender, RoutedEventArgs e)
    {
        var v = (VM)this.DataContext;
        v.MyValue = Convert.ToDecimal(((TextBox)sender).Text);
    }
} 
```

* * *

```
public class VM : INotifyPropertyChanged
{
    public VM()
    {

    }

    private decimal myValue;
    public decimal MyValue
    {
        get { return myValue; }
        set { myValue = value; OnChanged("MyValue"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnChanged(string pName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(pName));
    }
} 
```**

# ios - Admob ARC 崩溃

> ID：15432452
> 
> 赞同：1
> 
> 时间：2013-03-15T12:27:12.237
> 
> 标签：ios, crash, automatic-ref-counting, admob

我的应用程序崩溃。所有崩溃都是不同的，但总是与 Admob 有关。

我通过将所有 Admob 代码放在一个单一`.m`文件中并制作它来解决 90% 的问题`-fno-objc-arc` （当我离开应用程序并返回时，大多数崩溃与 iOS 5.1 相关。例如 SSO 登录或只是按下主页按钮 + 插页式广告。它已修复禁用 ARC单个文件。）

但是应用程序仍然崩溃。更难复制。

```
+[GADJavaScriptController sharedInstance]: unrecognized selector sent to class 0x283b90
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[GADJavaScriptController sharedInstance]: unrecognized selector sent to class 0x283b90'
*** First throw call stack:
(0x31df788f 0x3664c259 0x31dfa92f 0x31df9915 0x31d54650 0x1c4210 0x1c3cf0 0x34e2960d 0x31dcba33 0x31dcb699 0x31dca26f 0x31d4d4a5 0x31d4d36d 0x357ab439 0x329aee7d 0xa9cdb 0xa9c38)
terminate called throwing an exception(lldb) 
```

BTW`GADJavaScriptController sharedInstance`在谷歌上返回零结果。

我使用最新的 Admob 6.3.0

Admob 是否至少支持 ARC 项目`-fno-objc-arc`？

如果我在 Admob 中遇到此类错误，我会犯什么错误？

我确信我没有做多余`release`的电话。

**更新**发生了另一个可能与第一个有关的崩溃。根据我尚未测试的[修复。](https://groups.google.com/forum/#!msg/google-admob-ads-sdk/UwP-91EQ1-0/8fC3_XZ46PQJ)

![NSURLConnectionLOader 崩溃 ss](../Images/1a6faaf268cb9b18eba19dfaa8672a11.png)

# c++ - 模板化成员函数不接受任何类型的参数？

> ID：15432457
> 
> 赞同：0
> 
> 时间：2013-03-15T12:27:36.747
> 
> 标签：c++, templates, arguments, template-function

我有以下课程：

```
template<class TYPE, class IDENTIFIER>
class Parameter
{
    TYPE typeValue;
    IDENTIFIER ID;
};

template<class IDENTIFIER>
class ParameterSystem
{
    template<typename TYPE>
    void AddParameter(Parameter<TYPE, IDENTIFIER> parameter, TYPE value);
}; 
```

但是，每当我尝试使用 AddParameter 时，它都会说没有函数重载与参数列表匹配。我尝试了各种可能的组合。例如：

```
typedef unsigned int               ResourceIndex; //I use unsigned ints to reference resources in my other(resource system)
typedef unsigned int               DefaultParameterID;
typedef Parameter<ResourceIndex, DefaultParameterID>     ResourceParameter; 
```

所以我像这样使用它：

```
ParameterSystem<DefaultParameterID> parameterSystem;
ResourceParameter param;
//do some stuff with param;
parameterSystem.AddParameter<ResourceIndex>(param, param.typeValue); //here it gives the error 
```

这不起作用，Intellisense 告诉我它与参数列表不匹配，即使它匹配。参数列表应该是 (Parameter, unsigned int) 就是这样。我做错了什么？（对于感兴趣的人，AddParameter 所做的是它获取 typeValue 的值并将其设置为参数系统内 Map 中的 void 指针，然后将该值的映射键与参数的 ID 同步，并且参数也有句柄到它的父参数系统，所以从它的 ID 和类型检查 + 类型转换它总是可以在系统中获取响应它的 ID 的参数值，但这不应该与我认为的问题相关......）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T12:41:04.580

尝试在函数参数列表中的模板类型之前添加“typename”：

```
void AddParameter(typename Parameter<TYPE, IDENTIFIER> parameter, TYPE value) {...} 
```

# java - Java - 使用带有代理的 Socket

> ID：15432459
> 
> 赞同：3
> 
> 时间：2013-03-15T12:27:45.393
> 
> 标签：java, sockets, networking, proxy

我正在使用套接字通过 HTTP 连接到网站和 API（我知道，使用 URL 类可以更轻松地完成此操作，但我有一些理由选择这种方式）。

现在我想实现一个隐私功能，所以所有的连接都应该通过代理重定向。但我在这样做时遇到了问题。

[出于测试目的，我从免费代理列表](http://www.freeproxylists.net/)网站上寻找并选择了一个免费代理。我为我的测试程序选择了一个正常运行时间较长的设备，但到目前为止还没有成功。

我的源代码：

```
URL url = new URL("someurl");
InetSocketAddress address = new InetSocketAddress("202.77.110.22", 8080); 
java.net.Proxy javaProxy = new Proxy(Proxy.Type.SOCKS, address);
Socket server = new Socket(javaProxy);
server.connect(new InetSocketAddress(url.getHost(), url.getPort())); 
```

我想通过代理“202.77.110.22:8080”连接到 URL。如果我使用 Eclipse 执行代码，我必须等待大约五分钟，然后收到以下错误：

> SocketException：来自 SOCKS 服务器的格式错误的回复

使用 Proxy.Type.HTTP 而不是 Proxy.Type.SOCKS 时，我收到以下错误消息：

> IllegalArgumentException - 代理无效

我知道这个问题（形式）已经在 Stackoverflow 上被问过，但没有一个答案对我有帮助。也许我选择了不受支持的代理？它在使用 Apache HttpComponents 测试它时工作。

所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-15T03:28:28.543

在 Java 8 之前，原始**TCP 套接字**连接只能通过 SOCKS 代理工作——这就是你得到[`IllegalArgumentException - Invalid Proxy`](https://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html). 只有在 Java 8 中才添加了通过 HTTP 代理的原始套接字连接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-21T17:55:51.840

我认为你需要摆脱这条线：

```
InetSocketAddress address = new InetSocketAddress("202.77.110.22", 8080); 
```

并更改此行：

```
java.net.Proxy javaProxy = new Proxy(Proxy.Type.SOCKS, address); 
```

到：

```
java.net.Proxy javaProxy = new Proxy(Proxy.Type.SOCKS, "202.77.110.22:8080"); 
```

因为您不能将代理指定为“InetSocketAddress”。这是两个不同的东西。

# servlets - Java Servlet 和 ImageIO 错误

> ID：15432462
> 
> 赞同：4
> 
> 时间：2013-03-15T12:27:55.220
> 
> 标签：servlets, thread-safety, javax.imageio, dicom, dcm4che

我正在尝试编写一个 WebApplication 来查看一些 DICOM 文件。我的想法是通过调用我的 servlet 将 DICOM 文件即时转换为 JPEG。我使用 dcm4che 2.0.27 来转换文件。

servlet 被称为

```
<img src="pathToServlet/PathToDICOMFile">. 
```

问题：当我有很多标签（当然是针对不同的 DICOM 文件）时，有时我会遇到 java.util.ConcurrentModificationException 类型的异常

这是方法，我的servlet正在调用：

```
void convertFile(String path, OutputStream to) throws IOException {
    File myDicomFile = new File(path);

    BufferedImage myJpegImage = null;
    ImageIO.scanForPlugins();
    Iterator<ImageReader> iter = ImageIO.getImageReadersByFormatName("DICOM");

    ImageReader reader = (ImageReader) iter.next();

    DicomImageReadParam param = (DicomImageReadParam) reader.getDefaultReadParam();

    ImageInputStream iis = ImageIO.createImageInputStream(myDicomFile);
    reader.setInput(iis, false);
    myJpegImage = reader.read(0, param);
    iis.close();
    ImageIO.write(myJpegImage, "JPEG", to);

    to.close();

} 
```

"path" 是 dicom 文件的绝对路径，"out" 只是 response.getOutputStream()。

可以在 3 个地方抛出异常：

1.  ImageIO.getImageReadersByFormatName("DICOM");
2.  myJpegImage = reader.read(0, param);
3.  ImageIO.write(myJpegImage, "JPEG", to);

这是调用 ImageIO.getImageReadersByFormatName("DICOM") 时抛出的堆栈跟踪：

```
java.util.ConcurrentModificationException
at java.util.HashMap$HashIterator.nextEntry(HashMap.java:806)
at java.util.HashMap$ValueIterator.next(HashMap.java:835)
at javax.imageio.spi.PartialOrderIterator.<init>(PartiallyOrderedSet.java:177)
at javax.imageio.spi.PartiallyOrderedSet.iterator(PartiallyOrderedSet.java:85)
at javax.imageio.spi.SubRegistry.getServiceProviders(ServiceRegistry.java:759)
at javax.imageio.spi.ServiceRegistry.getServiceProviders(ServiceRegistry.java:451)
at javax.imageio.spi.ServiceRegistry.getServiceProviders(ServiceRegistry.java:507)
at javax.imageio.ImageIO.getImageReadersByFormatName(ImageIO.java:708)
at example.project.dicomtest.myDicomConverter.ConvertHelper.convertFile(ConvertHelper.java:32)
at example.project.dicomtest.myDicomConverter.GetImage.doGet(GetImage.java:40)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:185)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEnginateValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

是因为 ImageIO 不是线程安全的吗？我能做些什么来解决这个问题？非常感谢您的帮助和问候！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T12:48:42.890

这两行：

```
ImageIO.scanForPlugins();
Iterator<ImageReader> iter = ImageIO.getImageReadersByFormatName("DICOM"); 
```

只需在应用程序加载或 servlet 初始化时执行一次。特别是，第一行`ImageIO.scanForPlugins()`确实改变了 ImageIO 类内部使用的共享数据。这可能是您的并发修改异常的原因。考虑将这两行移至 servlet 过滤器或 servlet 的`init(ServletConfig)`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:37:43.943

使用同步方法来防止并发修改会有所帮助。阅读这个问题

stackoverflow.com/questions/9884148/use-of-synchronized-method-in-affable-bean-shopping-cart

# c# - 正则表达式模式或算法在 C# 中获取部分字符串

> ID：15432467
> 
> 赞同：1
> 
> 时间：2013-03-15T12:27:59.163
> 
> 标签：c#, .net, regex

我想要一个简单的解决方案来获取 C# 中的字符串的一部分。
字符串结构类似于 C++ 块。

`class aaa{ void bbb(){ ccc {...} text1 } text2}`

我想要的字符串是获取指定的代码块，如下所示。

`string.blocks.second() :` 应该返回：
`{ ccc {...} text1 }`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:30:01.343

由于您在谈论源代码，因此您应该查看类似 C 的语言解析器。它们在这里讨论：[C#的解析器](https://stackoverflow.com/questions/81406/parser-for-c-sharp)

# iphone - 在图像上创建一个图层并通过触摸调整其坐标

> ID：15432468
> 
> 赞同：8
> 
> 时间：2013-03-15T12:28:03.193
> 
> 标签：iphone, ios, objective-c, opencv, opengl-es

我需要在图像上创建一个图层并调整图层以适合图像并获取图层的坐标。

我需要通过触摸和捏合来调整图层。

示例图像如下。我需要在 ios 中执行此操作，我可以得到任何想法吗？

![在此处输入图像描述](../Images/0abfad42817896013800e7893085ffc7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:08:47.870

使用 coreImage 的人脸检测 API 检测人脸的边界，以及左眼、右眼和嘴巴的 CGPoint。如图所示，使用贝塞尔路径针对每个面部特征绘制一条紫色线路径。

如果您想更精确，最好使用 openCV 来检测每个面部特征的边缘。

# java - 当用户触摸屏幕时如何避免关闭我的进度对话框？

> ID：15432476
> 
> 赞同：38
> 
> 时间：2013-03-15T12:28:17.540
> 
> 标签：java, android

我正在开发一个 android 项目，该项目在用户下载文件时显示进度对话框。

但是当用户触摸屏幕时，进度对话框会在没有等待 100% 的情况下被关闭。我已经尝试过使用它：

```
 public boolean onTouchEvent(MotionEvent e) {
        return true;
    } 
```

但它不起作用。

我怎样才能避免这种情况？

**更新 1：**

似乎 setCancelable(false) 工作正常。非常感谢您的回答，但是当下载持久并且用户决定放弃时，这是不可能的，因为我已经停用了后退键码：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

我怎么能弄清楚这个？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-03-15T12:30:59.523

采用`dialog.setCancelable(false);`

例子 ：

```
 ProgressDialog dialog = new ProgressDialog(WiFiFinderActivity.this);
        dialog.setMessage("please wait...");
        dialog.show();
        dialog.setCancelable(false);
        dialog.setCanceledOnTouchOutside(false); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-15T12:35:19.437

您不想使用此覆盖功能..您只需设置

```
final Dialog dialog=new Dialog(dialogactivity.this);
dialog.setCancelable(false);
dialog.setCanceledOnTouchOutside(false); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T12:31:44.313

你可以使用这条线

```
dialog.setCanceledOnTouchOutside(false); 
```

或者

```
dialog.setCancelable(false); 
```

根据您的要求

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T12:31:15.023

试试`myDialog.setCancelable(false);`。我不确定进度对话框是否具有与 AertDialog 相同的方法，但可能值得一试。

编辑（为您的更新添加）：尝试使用以下内容：

```
myDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            //do your canceling stuff here
        }
    }); 
```

您是在 AlertDialog 中执行此操作还是在使用 AlertDialog.Builder？

如果您使用的是 AlertDialog.Builder ，则应使用以下内容：

```
AlertDialog myProgressDialog = myDialog.create();
myProgressDialog.show(); 
```

然后你应该可以`myProgressDialog.dismiss();`在你的 NegativeButton onClick 中使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-09T12:52:42.397

将此方法添加到您的进度对话框：

```
progressDialog.setCanceledOnTouchOutside(false); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-22T10:53:59.870

在进度对话框中使用此方法：此代码可以正常工作。

```
 progressDialog.setCanceledOnTouchOutside(false); 
```

# php - php中的诺基亚csv文件导入问题

> ID：15432478
> 
> 赞同：0
> 
> 时间：2013-03-15T12:28:21.847
> 
> 标签：php, csv, import

```
Title,"First name","Middle name","Last name","address"
Mr.,"prince","M","Kachhadiya","A-42,AdarshNagar-2     c.g Road, " 
```

地址字段的值类似于**“A-42,AdarshNagar-2 ChhpraBhatha Road”，**该值之间有逗号（，），csv文件默认字段分隔符是逗号（，），因此它将假定**A-42**和**AdarshNagar-2 cg Road**作为不同的字段值。我该如何解决？

我的PHP代码：

```
while (($data = fgetcsv($handle, 0, ",")) !== FALSE) {
       // Code for parse csv data
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:32:44.433

使用 fgetcsv() 从文件中读取。参考[http://www.w3schools.com/php/func_filesystem_fgetcsv.asp](http://www.w3schools.com/php/func_filesystem_fgetcsv.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:21:04.593

```
Title,"First name","Middle name","Last name","address"
Mr.,"prince","M","Kachhadiya","A-42,AdarshNagar-2    c.g Road,"

//You can't split the strings using CSV functions so better do some manual work

//All csv values are quoted with double quotes so split the string like this

//**If file size is minimum use this function**

$data = file_get_contents('<file_path>');

$parsed_string = explode('",', $data);

$cnt = count($parsed_string);

for($i=0; $i<$cnt; $i++)
{   
    $value = substr($parsed_string,1);
}

//**If file size is maximum use this**

$file = fopen("<file path>","r");

while(! feof($file))
  {
    $data = fgets($file);

    $parsed_string = explode('",', $data);

    $cnt = count($parsed_string);

    for($i=0; $i<$cnt; $i++)
    {

        $value = substr($parsed_string,1);
    }
  }

fclose($file); 
```

# regex - 正则表达式匹配 2-999 但不匹配 1

> ID：15432479
> 
> 赞同：0
> 
> 时间：2013-03-15T12:28:25.040
> 
> 标签：regex, jmeter

我需要一个匹配 2 及以上所有值的正则表达式，但不匹配 1（我不会在我的“待测试”数据中遇到零）。我正在尝试 [2-9]+，但它当然会跳过 10-19 的所有内容。并添加一个 1 没有工作:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T12:29:33.940

将其解析为数字，然后进行检查。正则表达式很酷，但它们不是金锤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:32:55.383

这行得通吗？

```
'[2-9]|[0-9]{2,3}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:30:08.697

你试过了吗：

```
[1-9][0-9]?[0-9]|[2-9] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:31:44.643

正则表达式在这里不是正确的解决方案，因为将其解析为数字然后进行数字比较会快得多：

```
if number > 1 and number < 1000 then do something 
```

但是，如果您确实需要一个有效的正则表达式，这应该可以解决问题：

```
^[0-9]{2,3}$|^[2-9]{1}$ 
```

# oracle11g - DMP 文件压缩 - Oracle EXPDP

> ID：15432489
> 
> 赞同：0
> 
> 时间：2013-03-15T12:28:39.383
> 
> 标签：oracle11g

我正在使用 Oracle 11g。这里我使用 EXPDP 导出数据库。我的数据库 dmp 文件大约为 50 GB。所以我的生产服务器空间不足。所以我在我的 EXPDP 命令中尝试了 COMPRESSION = "ALL"。运行此程序时，我得到类似“未启用”的信息。

这里是 EXPDP 命令。

```
for /f "tokens=2,3,4 delims=/ " %%a in ('date /t') do set fdate=%%c%%a%%b
EXPDP username/password@sid COMPRESSION=ALL DIRECTORY=EXPDP_CUSTOM_DIR TABLESPACES=USER DUMPFILE = user.dmp 
```

我是否需要更改此中的任何内容..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:14:13.967

您需要获得 Advanced Compression Option 的许可才能使用此功能。否则，数据泵的导出压缩选项非常少。使用较旧的导出，您可以通过压缩程序管道输出，但我认为这里不可能。

您可能会考虑指定最大文件大小（例如 1GB）并在转储文件名称中包含一个替换变量，这样您就可以生成一堆较小的文件，并有一个 cron 作业监视它们并在它们导出过程释放它们时立即压缩它们.

# iphone - 在 .m 文件中为 Objective C 接口声明实例变量（在发布模式下）

> ID：15432496
> 
> 赞同：2
> 
> 时间：2013-03-15T12:28:55.780
> 
> 标签：iphone, ios, macos, cocoa

我可以构建以下代码进行调试，但不能在 xcode 中为 OS X 目标发布：

myclass.h：

```
@interface myclass : NSObject

@property (nonatomic,copy) NSString *name;

@end 
```

我的班级.m：

```
@implementation myclass {
    NSString *_name;
}

@synthesize name = _name;

@end 
```

任何想法为什么？在 iOS 上，它为发布和调试而构建。

我知道将实例变量声明移动到 .h 会起作用，但我的意图是隐藏实现细节（当然，真正的类比这个例子更复杂）。在构建 64 位应用程序时，我已经在 Mountain Lion 上的最新 xcode 版本（4.6，构建 4H127）上尝试过这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:33:31.967

一种方法是使用类扩展。在你的`.m`文件中，写

```
@interface myclass ()
{
    NSString *_name;
}
@end 
```

上面你的`@implementation`for `myclass`。

另一方面，您实际上不需要声明支持您的属性的实例变量。如果你只是写

```
@property (nonatomic, copy) NSString *name; 
```

在您的类声明（以 开头`@interface myclass : NSObject`和结尾的代码`@end`）中，将自动为您生成一个支持`NSString *`ivar `_name`，您将能够在`myclass`. 你甚至不需要写`@synthesize name = _name;`。此外，如果你想使用一个变量名而不是`_name`支持你的属性`name`，你不需要声明 ivar；相反，您可以使用`@synthesize`

```
@synthesize name = m_Name; 
```

在你的班级里`@implementation`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T12:43:15.463

实现块中的实例变量需要现代的 Objective-C 运行时。请参阅[Objective-C 功能可用性指数](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/index.html)。可能是该版本针对不支持现代运行时的 OS X 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:38:37.640

您没有`name`在此处指定属性“”的对象类型：

```
@property (nonatomic,copy) name; 
```

用这个

```
@property (nonatomic,copy) NSString *name; 
```

# python - python：如何从代码对象中获取源代码？

> ID：15432499
> 
> 赞同：6
> 
> 时间：2013-03-15T12:29:02.903
> 
> 标签：python, decompiling

假设我们有一个 python 字符串（不是文件，字符串，没有文件）

```
TheString = "k=abs(x)+y" 
```

好？现在我们将字符串编译成一段python字节码

```
Binary = compile( TheString , "<string>" , "exec" ) 
```

现在的问题是：假设我不知道代表原始字符串对象的字符串 TheString ，我如何从 Binary 获得？

很快：与 compile() 相反的功能是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T12:31:13.920

没有源代码，只能近似代码。您可以使用[module](http://docs.python.org/2/library/dis.html)*反汇编*编译后的字节码，然后将源代码重构为近似值：[`dis`](http://docs.python.org/2/library/dis.html)

```
>>> import dis
>>> TheString = "k=abs(x)+y"
>>> Binary = compile( TheString , "<string>" , "exec" )
>>> dis.dis(Binary)
  1           0 LOAD_NAME                0 (abs)
              3 LOAD_NAME                1 (x)
              6 CALL_FUNCTION            1
              9 LOAD_NAME                2 (y)
             12 BINARY_ADD          
             13 STORE_NAME               3 (k)
             16 LOAD_CONST               0 (None)
             19 RETURN_VALUE 
```

从反汇编中我们可以看到有 1 行，其中一个名为的函数`abs()`正在调用一个名为 的参数`x`。结果被添加到另一个名称`y`中，结果存储在`k`.

像[`uncompile6`](https://pypi.python.org/pypi/uncompyle6)（建立[在许多其他人的工作之上](https://github.com/rocky/python-uncompyle6/blob/master/HISTORY.md)）这样的项目就是这样做的；反编译 python 字节码并从中重建 Python 代码。

# task - 如何清理 celery_taskmeta？

> ID：15432500
> 
> 赞同：7
> 
> 时间：2013-03-15T12:29:04.293
> 
> 标签：task, celery, django-celery

我一直在阅读 django-celery 试图找到一种清理 celery_taskmeta 的本地方法，因此该表在生产环境中不会增长太多。

什么也找不到。我应该做一个命令来处理这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T07:36:43.613

*我没有使用 django-celery，所以我的答案可能不完整。*

后端有一个方法可以让你强制清理 celery_taskmeta ：在 celery.backends.base.BaseBackend 中，你可以找到方法 cleanup()

所以，当我需要强制清理时，我有 3 种方法：

1.  在生产者端使用 AsyncResult
2.  在消费者端使用任务
3.  芹菜节拍任务

## 在生产者方面

```
# Launch a task
my_task = add_a_task() # use the Task.delay() method for example
# my_task is a celery.result.AsyncResult instance
# Retrieve backend and call cleanup
my_task.backend.cleanup() 
```

## 在消费者方面

```
from celery import Task
from .celery_app import my_celery_app

# Class for a task
@my_celery_app.task()
class CopyTask(Task):
    # A Task instance got a backend property

    def run(self,**kwargs):
        """ Running method of the task """
        # Do something
        pass

    def force_cleanup(self):
        """ Force cleanup. """
       self.backend.cleanup() 
```

请注意，在任务本身中调用清理似乎非常安静。

## 用 celerybeat 任务

第三种选择是使用清理后端 celery_taskmeta 的 celerybeat 任务。这是我可能选择的一个。

celery beat 基本上是一个调度器，你可以运行你想要的任务。所以你可以有一个专门的任务，比如这个：

```
from celery import Task
from .celery_app import my_celery_app

# Class for a task
@my_celery_app.task()
class CleanupTask(Task):
    # A Task instance got a backend property

    def run(self,**kwargs):
        """ Running method of the task """
        # Cleanup here
        self.backend.cleanup() 
```

设置芹菜节拍，就像 crontab 作业一样有[据可查](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-30T20:39:27.980

我有一个运行执行此 SQL 语句的 Django 命令的 cronjob：

```
"truncate table celery_taskmeta" 
```

在 0.47 毫秒内删除了 50.000 条记录。

# soapui - LoadRunner Web 服务测试和 SAML 令牌

> ID：15432501
> 
> 赞同：1
> 
> 时间：2013-03-15T12:29:11.637
> 
> 标签：soapui, saml, loadrunner

我想通过在 SoapUI 中创建 SOAP 请求并将其粘贴到 web_custom_request() 中的常规 LoadRunner Web 虚拟用户中来加载测试 Web 服务。这应该是直截了当的，并在此处进行了描述：http: [//www.jds.net.au/tech-tips/web-services-with-a-web-vuser/](http://www.jds.net.au/tech-tips/web-services-with-a-web-vuser/)

当 Web 服务位于 Security 之后并且需要 SAML 令牌来接受请求时，就会出现问题。我已经设法在 SoapUI 中通过我项目中的开发人员的一些自定义生成了这个 SAML 令牌，并且测试在那里工作（在 SAML 令牌的持续时间内）

我的理由是，我可以将这个带有 SAML 令牌的肥皂请求粘贴到 LoadRunner 中，它应该可以工作。但是，此 SAML 令牌将过期，然后我的测试将停止工作。

有没有办法在 LoadRunner 中生成 SAML 断言/wsse 标头？

一般来说，LoadRunner 如何处理 SAML 令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:45:53.343

如果服务器提供令牌，那么您必须在 LoadRunner 脚本中的服务调用之前包含对有效令牌字符串的单独调用，并关联令牌字符串。

我采用相同的方法在 LR 中测试 Web 服务，有时会有所帮助，而不是从使用 LR 的空白脚本开始记录 SOAPUI 进行服务调用。然后将为您捕获对服务器的早期调用，以获取会话 ID 和令牌等内容。并不总是有效，取决于您的服务和服务器设置，但它在过去很有帮助。

# css - Div 不会进入包装器？

> ID：15432504
> 
> 赞同：0
> 
> 时间：2013-03-15T12:29:18.540
> 
> 标签：css, html, wrapper

我在使用 div 时遇到了一些问题，我的网站有一个包装器大小，`height: 100%;`这个包装器包含各种 div，如标题、滑块和内容 div。唯一的问题是内容 div 出于某种神秘的原因被推出包装器 div。

```
html {
    overflow-y:                         scroll;
    height:                             100%;
    position:                           relative;
}

a {
    outline:                            none;
}

img {
    width:                              100%;
    border:                             none;
    -moz-border-radius:                 20px;
    border-radius:                      20px;
}

body {
    width:                              100%;
    height:                             100%;
    background-color:                   yellow;
    margin:                             0px 0px 0px 0px;
}

.wrapper {
    width:                              87%;
    height:                             100%;
    background-color:                   red;
    margin:                             0 auto;
}

.header {
    width:                              100%;
    height:                             150px;
    background-color:                   green;
    float:                              left;
    overflow:                           hidden;
}

.logo {
    width:                              7%;
    height:                             114px;
    margin:                             18px 0% 18px 3%;
    float:                              left;
    background-image:                   url("..//img/logo.png");
    background-size:                    100%;
    background-repeat:                  no-repeat;  
}

.slogan {
    width:                              30%;
    height:                             100px;
    background:                         orange;
    margin:                             25px 13% 25px 13%;
    float:                              left;
}

.nav {
    width:                              31%;
    height:                             150px;
    background-color:                   purple;
    float:                              left;
    margin:                             0% 3% 0% 0%;
}

.search {
    width:                              100%;
    height:                             50%;
    background:                         blue;
    float:                              left;
}

.menu {
    width:                              100%;
    height:                             50%;
    float:                              left;
    background:                         grey;
}

.slider-container {
    width:                              100%;
    height:                             100%;
    background-color:                   white;
}

.main-content {
    width:                              100%;
    height:                             100px;
    background-color:                   pink;
    float:                              left;
}

.column {
    width:                              31%;
    height:                             auto;
    background-color:                   orange;
    float:                              left
}

/* SLIDER */

.caption {
    width:                              500px;
    background-image:                   url("..//img/caption-bg.png");
    background-size:                    100%;
    position:                           absolute;
    z-index:                            99;
    overflow:                           hidden;
    margin-top:                         7%;
    margin-left:                        5%;
    -moz-border-radius:                 20px;
    border-radius:                      20px;
}

.caption-text {
    max-width:                          460px;
    overflow:                           hidden;
    margin:                             20px;
}

.wrapper .slider-container #slideshow { 
    float:                              left;
    position:                           relative; 
    width:                              100%;
}

.wrapper .slider-container #slideshow > div { 
    position:                           absolute; 
} 
```

[您可以在http://k2stuc.nl/test/](http://k2stuc.nl/test/)看到现场演示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:48:36.130

我不明白你的问题100％。但是我看到了一个问题，幻灯片背后的导航是因为您的幻灯片`.wrapper .slider-container #slideshow > div`已设置为`position:absolute`.

尝试将`.slider-container`高度设置为固定高度。否则幻灯片将在内容之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:50:10.590

你在漂浮不应该漂浮的东西

即`.header`, `.main-content`, `#slideshow`- 这些都不需要浮动 - 正文不应该有`height:100%;`

以像素为单位给出`.slide-container`固定高度而不是百分比..执行上述操作将解决您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:38:10.433

设置它`height: 100%`的`<body>`高度为视口的 100%。

现在，视口与浏览器窗口一样高`inner-height`；当您调整浏览器本身的大小时，这种情况会发生变化。

, 的任何直接子级都将`<body>`继承`height: 100%`视口的高度。

这就是许多“视差”网站如何做他们的事情的一部分。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T12:34:29.730

我认为问题出在滑块 div 有`height:100%`

# java - 在servlet java中将字符串转换为Mysql时间戳

> ID：15432505
> 
> 赞同：2
> 
> 时间：2013-03-15T12:29:18.723
> 
> 标签：java, mysql, apache, java-server

嗨，我正在使用 apache servlet 中的 get 方法传递我的日期时间字符串，它就像这样

```
http://localhost:8084/example/Time_ser?date=15/03/2013%2004:14:30%20PM 
```

我正在使用

```
String time=request.getParameter("date"); 
```

获取日期值.....

下面给出了我将字符串转换为时间戳的java代码

```
DateFormat formatter = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss aa");
java.util.Date date = (java.util.Date)formatter.parse(time);
Timestamp timets = new Timestamp(date.getTime()); 
```

但它显示这样的错误

```
java.text.ParseException: Unparseable date: "15/03/2013 04:14:30 PM" 
```

我做错了什么请帮助我.......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:30:06.093

使用`/`not`-`因为您的日期格式为`15/03/2013 04:14:30 PM`.

```
DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss aa"); 
```

# c# - Java 包无法编译，但该包中的某些类可以被其他项目使用

> ID：15432509
> 
> 赞同：0
> 
> 时间：2013-03-15T12:29:32.520
> 
> 标签：c#, java

我对 Java 很陌生（但有多年的 C#.NET 经验）。

是否存在 Java/JRE 和 C#/.NET 之间最重要差异的比较？

在 Java“解决方案”中发现了“奇怪”行为。我的工作区中有几个项目。其中一个包无法编译。但是这个包还包含其他项目使用的类，没有问题。

所以在我看来，即使一个类没有在包中编译，该包中的其他类也可以被其他项目使用？

包是否可以与 .NET 中的程序集 (.dll) 相媲美？在 .NET 中，当类无法编译时，不会生成 .dll。

对我来说另一件奇怪的事情是 .class 文件也被检入到源代码控制系统中。也许这就是为什么可以使用从不可编译包中分类的原因。将 .class 文件签入源代码管理真的有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:36:54.580

> Does it really make sense checking in .class files to source control?

In general the consensus is that source control is for source code and other inputs to the compilation process. Sometimes you might want to include a dependency (e.g. a 3rd party dll), but there's rarely a good reason to include your own output files.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:34:58.993

我正在做相反的事情，学习 C# 并有一些 java 经验。我会说 java 中的包与 .NET 中生成的 .dll 文件有点不同。java中的包被编译成单独的类文件。因此，如果一个 java 源文件没有在包中编译，您可以使用在该包中编译的其他类（只要您正在使用的其他类之一不需要未编译的类）。我会说将 .class 文件签入源代码管理是没有意义的。我只想签入java源文件。

您可能想查看包生成的文件夹结构，这将使您了解正在输出的内容。通常，如果您的包是 com.mycompany.myapp，则它的工作原理是这样的，那么您将拥有 com/mycompany/myapp 的文件夹结构，并且在 myapp 文件夹中，您将看到类文件。我相信其他人可以提供更多详细信息，但我希望这对您有所帮助。

# java - java校验和目录

> ID：15432515
> 
> 赞同：0
> 
> 时间：2013-03-15T12:29:41.270
> 
> 标签：java, validation, file-io, directory

我试图从概念上弄清楚在尝试验证目录结构从源到目标的传输时要采用什么方法。功能示例，我想将 /usr/mystuff 移动到某个网络服务器 ///usr/mystuff （不一定必须是网络传输）。所以我面临的问题是验证目标与源的结构、文件等完全相同。

我已经研究了一段时间，我正在尝试提出“最好的方法”，到目前为止我的想法是......

1) 邮编目录树，MD5 邮编。文件 io 将目录结构复制到新位置，Zip that，MD5 new zip，比较源和目标的 MD5。这看起来很麻烦，而且可能效率不高。

我不需要任何编码示例，我只是在寻找一些关于如何完成对相同结构的验证的输入。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:52:46.613

[你的问题听起来和这个](https://stackoverflow.com/questions/3010071/how-to-calculate-md5-checksum-on-directory-with-java-or-groovy?rq=1)很相似。压缩和计算 MD5 听起来像是一项昂贵的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:37:33.697

我发现 ant 构建中的“校验和”任务非常有用......

...

```
<checksum todir="${basedir}/md5">
<fileset dir="${remotedir}">
    <include name="**/**/**"/>
    <exclude name="md5/**"/>
    <exclude name="reports*.xml"/>
    <exclude name="user/*.*"/>
    <exclude name="temp/*.*"/>
    <exclude name="WEB-INF/lib/test.jar"/>  
    </fileset>
</checksum> 
```

...

在此处查看文档

[http://ant.apache.org/manual/Tasks/checksum.html](http://ant.apache.org/manual/Tasks/checksum.html)

# r - 多项式根

> ID：15432529
> 
> 赞同：1
> 
> 时间：2013-03-15T12:30:19.553
> 
> 标签：r, matlab

我对多项式有一个小问题：

```
z²+alpha1*z + alpha2 = 0 
```

我需要在 |z| 的根中找到 alpha1 和 alpha2 的值 < 1\. R 或 Matlab 中是否有任何程序能够做到这一点？问题是 alpha 值是未知的。我需要找到多项式的根 <= |1| 的允许区域

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:39:21.543

类似于 R 中的 matlab 解决方案，

```
 polyroot(c(1,alpha1,alpha2)) 
```

**在这里编辑**一种以图形方式获取值的方法`alpha`，它可以用来获得关于合理值的直觉。这里的想法是：

*   选择 aplha1 的范围
*   选择一个范围的 alpha2
*   对于 alpha1 和 alpha2 的每个组合，计算根。计算模块 (||)，如果 > 1 我们将其删除。
*   我们得到一个包含 4 列的值网格： alpha1,alpha2,norm1,norm2 其中所有的范数都 <1
*   我绘制 alpha1 与 alpha2 以获得区域......

所以代码

```
## I choose alpha1 in interavl [-1,1]
alpha1 <- seq(-1, 1, length=200)
## I choose alpha2 in interavl [-2,2]
alpha2 <- seq(-2, 2, length=200)
dat <- expand.grid(data.frame(alpha1,alpha2))
## for each combination of (alpha1,alpha2)
## i compute the module of the roots 
## I replace |roots|> 1 by NA
ll <- apply(dat,1,function(x) {
  rr =Mod(polyroot(c(1,x['alpha1'],x['alpha2'])))
  res <- ifelse(rr>1,NA,rr)
  if (length(res)==1) res <- rep(res,2)
  if (length(res)==0) res <- rep(NA,2)
  else res
  })
dat <- na.omit(cbind(dat,t(ll)))
## finally i plot the result
library(lattice)
xyplot(alpha2~alpha1,data=dat) 
```

![在此处输入图像描述](../Images/b5fc19a95d18b7fe2c5c43414ca3c9f2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:45:02.043

@Jonel_R，您的问题可以通过分析解决。

首先，我将重命名您的变量以使其更易于键入。我还会使用一些符号滥用...

我们希望找到满足该属性`(a, b)`的根的值。`z^2 + a z + b == 0``|z|<=1`

根由 给出`(-a +- sqrt(d))/2`，其中`d = a^2 - 4b`

有3种可能。两个实不同根、一个实根或两个复共轭根。

中间情况发生在 时`d = 0`，即`b = a^2 / 4`。这是`a vs. b`平面上的抛物线。然而，并非该抛物线中的所有点都生成根满足 的多项式`|z|<=1`。在这种情况下，根是简单`-a/2`的，所以我们必须添加条件`-1 <= a/2 <=1`，即`-2 <= a <= 2`。

现在让我们考虑第一种情况。`a vs. b`平面中产生具有两个不同实根的多项式的点位于抛物线*下方*，即它们必须满足`b < a^2/4`。附加条件是`|z| = |(-a +- sqrt(d))/2| <= 1`。

条件可以写为`-1 <= (-a +- sqrt(d))/2 <= 1`，其中`+-`表示两个根都必须满足条件。解决这个问题，我们得到：
`a-2 <= sqrt(d) <= a+2`&`a-2 <= -sqrt(d) <= a+2`

由于两者`sqrt(d)`和都`-sqrt(d)`必须位于区间`[a-2, a+2]`和`d > 0`中，因此该区间的内部必须包含零。这意味着`-2 < a < 2`。

条件可以合并为： `a-2 <= -sqrt(d) < 0 < sqrt(d) <= a+2`

平方给出： `(a-2)^2 >= d`&`d <= (a+2)^2`

`d <= a^2 - 4a + 4`&`d <= a^2 + 4a + 4`

`-4b <= -4a + 4`&`-4b <= +4a + 4`

`b >= a-1`&`b >= -a-1`

这意味着`b`必须位于线`b = a-1`和之上`b=-a-1`。另外，`a`必须在`[-2,2]`. 而且，当然，我们必须拥有`b < a^2/4`. 哇...

现在是最后一种情况：复根。这更容易。既然`d < 0`，根是`-a/2 +- i * sqrt(-d)/2`。这个的绝对值是`a^2/4 - d/4`。这等于`b`，简单地说。所以条件是`b <= 1`，并且一如既往地`b`位于抛物线之上。

就是这样......非常有趣的问题。:-)

您可以尝试以下测试功能：它将用蓝色绘制实根和红色复根的点。

```
test <- function(x=2, n=10000)
{
    plot(c(-x,x), c(-x,x), type="n")

    plot(function(a) (a^2)/4, from=-x, to=x, add=T)

    plot(function(a) a-1, from=-x, to=x, add=T)

    plot(function(a) -a-1, from=-x, to=x, add=T)

    a <- runif(n, -x, x)

    b <- runif(n, -x, x)

    for( i in 1:n )
    {
        if( all(abs(polyroot(c(b[i],a[i],1))) <= 1) )
        {
            col <- ifelse(b[i] < 0.25*a[i]^2, "blue", "red")

            points(a[i], b[i], pch=".", col=col)
        }
    }
} 
```

`polyroot`顺便说一句： is的语法`polyroot(c(C, B, A))`给出了`Ax^2 + Bx + C`. 我相信@agstudy 的回复弄错了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:38:08.107

在matlab中：

```
roots(1,alpha1,alpha2) 
```

见[http://www.mathworks.se/help/matlab/ref/roots.html](http://www.mathworks.se/help/matlab/ref/roots.html)

# javascript - 无法连接到 CloudFoundry 上的 TCP 服务器（localhost node.js 工作正常）

> ID：15432530
> 
> 赞同：2
> 
> 时间：2013-03-15T12:30:20.750
> 
> 标签：javascript, node.js, tcp, cloud-foundry

我无法连接到在 CloudFoundry 上运行的 TCP 服务器示例。在本地 node.js 安装上运行我的 app.js 文件时，它工作得很好。具体来说，当我使用 vmc push 运行 CloudFoundry 时，服务会启动并且不会崩溃。一些 IP 连接到它，断开连接，据我所知，该服务继续运行。

我只是无法使用“telnet”或“nc”连接到它（请注意，当定向到 localhost node.js 服务器时，这两个都可以正常工作。

这失败了：

```
> nc themagicsandbox2.cloudfoundry.com 8124 
```

这有效

```
> nc localhost 8124
hello from TCP server! (intended reply) 
```

我的代码在这里提交，Cloud Foundry stdout.log 在它下面提交。

代码：

```
myTrace('loaded'); // myTrace prepends timestamp to text and sends to console.log

var tcpServer = require('net').createServer(function(sock) { //'connection' listener
    sock.on('connect', function() {
        myTrace('client ' + sock.remoteAddress + ':' + sock.remotePort +' connected');
        sock.write('hello from TCP server!\r\n');
        sock.pipe(sock);
      });

    sock.on('end', function() {
        myTrace('client disconnected');
      });
  });

tcpServer.listen(8124, process.env.VCAP_APP_HOST || "localhost");

tcpServer.on('listening', function() {
      myTrace('server is listening - bound!');
    });

tcpServer.on('error', function(err) {
     myTrace('server err: ' + err);
     if (err.code == 'EADDRINUSE') {
       myTrace('Address in use, retrying ...');
       setTimeout(function() {
           tcpServer.close(function (err) {
               myTrace('server.close: ' + err);
             });
           tcpServer.listen(SLIDEIN_TCP_PORT, process.env.VCAP_APP_HOST || "localhost");
         }, 1000);
     }
  });

tcpServer.on('close', 
          function() {
            myTrace('server has closed');
             }); 
```

标准输出日志（CloudFoundry）：

```
Getting file contents... OK

Fri Mar 15 2013 11:59:02 GMT+0000 (UTC) loaded
Fri Mar 15 2013 11:59:02 GMT+0000 (UTC) server is listening - bound!
Fri Mar 15 2013 11:59:03 GMT+0000 (UTC) client 172.30.50.10:31840 connected
Fri Mar 15 2013 11:59:03 GMT+0000 (UTC) client disconnected 
```

标准输出（本地主机 node.js）：

```
Fri Mar 15 2013 12:57:39 GMT+0100 (CET) loaded
Fri Mar 15 2013 12:57:39 GMT+0100 (CET) server is listening - bound!
Fri Mar 15 2013 12:57:53 GMT+0100 (CET) client 127.0.0.1:52260 connected
Fri Mar 15 2013 12:57:59 GMT+0100 (CET) client disconnected
Fri Mar 15 2013 12:58:00 GMT+0100 (CET) client 127.0.0.1:52261 connected
Fri Mar 15 2013 12:58:01 GMT+0100 (CET) client disconnected 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:42:17.857

这是因为请求使用主机头路由到您的应用程序，netcat 或 telnet 都不会发送。向其中任何一个发出请求时，您可能会从路由器返回 504。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:09:53.827

我认为问题在于您的 TCP 客户端和 cloudFoundry 应用程序之间存在代理或 HTTP 重定向器。

Dan Highman 的回答是，重定向由 HOST 'header' 控制是基于这样一个事实，即重定向器假定您的客户端正在使用 HTTP 协议并具有 'host' 标头记录以允许它确定您使用哪个 cloudFoundry 应用程序想谈谈。

我想您是在问如何获得与应用程序的非 HTTP TCP 连接。我也没有想通。VCAP_APP_HOST 环境变量提供了一个私有 IP 地址（即在私有 10.0.0.0 子网中），因此这对于从公共 Internet 到云主机没有用处。（这对于由同一云主机网络提供服务的应用程序之间的通信可能很有用。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T15:39:12.973

我试图通过使用单向的 UDP 来解决这个问题，它涵盖了该服务器的需求，它可以使用仅接收协议来接收数据。

但是，UDP 永远不会在 CloudFoundry.com 上工作，因为端口没有打开。

请参阅此处的评论线程： [只有 HTTP 和 HTTPS 端口对应用程序在 Cloud Foundry 上使用是开放的](https://stackoverflow.com/questions/11756517/may-i-open-a-port-on-cloud-foundry)

所以看来我又回到了通过 HTTP 向这个服务器发送数据，摆脱 HTTP 握手是首先编写这个 TCP 服务器的根本原因。

# file - 如何在检票口上显示下载文件的链接？

> ID：15432531
> 
> 赞同：0
> 
> 时间：2013-03-15T12:30:21.017
> 
> 标签：file, hyperlink, download, wicket

我看过一些检票口教程，经历了类似的问题，但无法得到我的答案。你能给我一个简单的例子，说明如何在页面上放置链接，并且用户可以在点击链接时下载文件？

我将从数据库表（blob 列）中检索文件。问题是，我需要将链接放在页面上（上面有文件名），而无需访问数据库。当它被点击时，我将检索文件并且用户可以下载它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:53:18.783

我认为最好的解决方案是扩展[Wicket DownloadLink](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/markup/html/link/DownloadLink.html)。 StackOverflow 上有多个关于这个问题的问题......[示例](https://stackoverflow.com/questions/7646270/how-to-use-wickets-downloadlink-with-a-file-generated-on-the-fly) 但我真的不认为在不查询数据库的文件名的情况下创建下载链接是可行的。当然，如果您需要链接中的文件名......或类似的东西，您只会遇到这个问题......您总是可以创建一个静态名称的链接，例如：没有文件名的“下载文件”，你会不需要查询数据库。

# javascript - 拖放错误

> ID：15432538
> 
> 赞同：1
> 
> 时间：2013-03-15T12:30:33.847
> 
> 标签：javascript, jquery, css

**更新：找到关于错误[http://bugs.jqueryui.com/ticket/5718](http://bugs.jqueryui.com/ticket/5718)的这张票。我尝试了 position:absolute 但它破坏了 html 上的数据**

我已经在我的应用程序中实现了拖放来对数据进行排序。拖动数据时，必须与其他数据对齐。但是在下图中。

![在此处输入图像描述](../Images/885696375fe6d8bf44282459b26c12ff.png)

请注意，当我拖动 Internet 时，它会出现在顶部。

拖动时必须与其他对齐。如何解决这个问题？有没有办法让数据在拖动时必须在光标中，而不是在顶部？

**以下是拖放的代码：**

```
 <script>
    var addPositions = function() {
        $('.dropenv, .dropcat').each(function() {
            var position = 0;
            $(this).children().each(function() {
                $(this).data('position', position);
                position++;
            });
        });
    };

    $(document).ready(function() {
        addPositions();

        $(".dropenv").sortable({
            connectWith: "tbody.env-data",
            dropOnEmpty: true,
            handle: '.env-handle',
            start: function(event, ui) {
                parentID = ui.item.parent().siblings('tr').attr('id');
            },
            stop: function(event, ui) {
                datas = new Array();
                var i = 0;

                ui.item.closest('tbody').children('tr').each(function() {
                    datas[i] = $(this).attr('id');
                    i++;
                });

                $.ajax({
                    type: "POST",
                    data: { 
                        'cat_id': parentID,
                        'env[]': datas, 
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    }, 
                    url:"/envelopes/sort/",
                    contentType: "application/json;charset=utf-8",
                    dataType: "json",
                    success: function(data) { 
                        notify('', data, { autoClose: true, delay: 1000 });
                    },
                    error: function(ts) { 
                        notify('', ts.responseText, { autoClose: true, delay: 1000 });
                    }
                });
            }
        });

        $( ".dropcat").sortable({
            connectWith: "tbody.cat-data",
            dropOnEmpty: true,
            handle: '.cat-handle',
            update: function(){
                datas = new Array();
                var i = 0;

                $('.dropcat tr.masterList').each(function() {
                    datas[i] = $(this).attr('id');
                    i++;
                });

                $.ajax({
                    type: "POST",
                    data: { 
                        'cat[]': datas, 
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    }, 
                    url:"/envelopes/categories/sort/",
                    contentType: "application/json;charset=utf-8",
                    dataType: "json",
                    success: function(data) { 
                        notify('', data, { autoClose: true, delay: 1000 });
                    },
                    error: function(ts) { 
                        notify('', ts.responseText, { autoClose: true, delay: 1000 });
                    }
                });
            }
        });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:46:47.357

找到了答案：`overflow:auto`

```
<table class="simple-table responsive-table" style="overflow:auto"> 
```

# javascript - 使用内置 javascript-mode 的 var 块的 JavaScript 缩进

> ID：15432541
> 
> 赞同：1
> 
> 时间：2013-03-15T12:30:43.377
> 
> 标签：javascript, emacs, elisp

我得到以下信息：

```
 var 
   a = 5,
   b = 6, 
   c = foo();
   /* code continues */ 
```

我想：

```
 var 
       a = 5,
       b = 6,
       c = foo();
   /* OUTDENT, code continues */ 
```

我知道[如何让 js-mode 正确缩进继续（复合？） var 声明？](https://stackoverflow.com/questions/7337649/how-to-get-js-mode-to-properly-indent-continued-compound-var-declarations)js2-mode 有一些技巧可以完成它。我想知道如何使用 javascript-mode （内置的，进入 emacs 24）来做到这一点。"var" 应该缩进一级，直到 var 之后的第一个分号。逗号优先样式不应该改变这一点。

理想情况下，我可以将它放在我的 init.el 中，然后我可以将它同步到我正在使用的每台计算机上。那可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:22:51.067

1.  放在`a = 5`与 相同的行`var`。否则，没有支持此的模式。

2.  使用 Emacs 中继。这样做的缩进代码是最近才`js2-mode`提交的，对于. 或者，只需使用最近发布的 Emacs，然后从 Emacs 源代码树复制到.`js-mode``24.3``js.el``load-path`

# c# - C#中的翻转位图函数

> ID：15432546
> 
> 赞同：2
> 
> 时间：2013-03-15T12:31:07.137
> 
> 标签：c#, graphics, bitmap, gdi+

作为一种练习，我尝试在 C# 中使用不安全的代码和指针翻转位图，但**问题是**我得到的是原始位图而不是翻转的位图，似乎该函数什么也没做，所以我想知道有什么问题我的代码！

请记住，我想翻转`pictureBox1.Image`并将其设置为`pictureBox2.Image`

```
 private bool Flip_H()
    {
        try
        {
            b = new Bitmap(pictureBox1.Image);
            bmdata = b.LockBits(new Rectangle(0, 0, b.Width, b.Height),ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb);
            int offset = bmdata.Stride - b.Width * 3;
            byte back_up;
            int BGRwidth = b.Width * 3;
            unsafe
            {
                byte* p = (byte*)bmdata.Scan0;
                for (int y = 0; y < b.Height; y++)
                {
                    for (int x = 0; x < BGRwidth / 2; x += 3)
                    {
                        back_up = p[x];
                        p[x] = p[BGRwidth - x - 3];
                        p[BGRwidth - x - 1] = back_up;
                        back_up = p[x + 1];
                        p[x + 1] = p[BGRwidth - x - 2];
                        p[BGRwidth - x - 2] = back_up;
                        back_up = p[x + 2];
                        p[x + 2] = p[BGRwidth - x - 1];
                    }
                    p += offset;
                }
            }
            b.UnlockBits(bmdata);
            pictureBox2.Image = b;
            return true;
        }
        catch
        {
            return false;
        }
    } 
```

我已经用`GetPixel()`and`SetPixel()`函数完成了这个，但是你知道它们太慢了，所以我正在尝试用指针改进我的代码！

**问题是`Offset`参数！感谢所有帮助过的人**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:57:20.277

您的问题是您从未在 Y 方向上前进。您始终只更改第一条扫描线上的像素，因此其余的不会更改。发生这种情况是因为您这样做`p += offset`但您定义`offset`为：

```
int offset = bmdata.Stride - b.Width * 3; 
```

您应该将 offset 定义为：

```
 int offset = bmdata.Stride; 
```

由于您要添加步幅宽度（以字节为单位）以到达下一个扫描线。

* * *

您的交换代码中也存在错误。你有：

```
back_up = p[x + 0];
p[x + 0] = p[BGRwidth - x - 3];
p[BGRwidth - x - 1] = back_up;  // Error!

back_up = p[x + 1];
p[x + 1] = p[BGRwidth - x - 2];
p[BGRwidth - x - 2] = back_up;

back_up = p[x + 2];
p[x + 2] = p[BGRwidth - x - 1];
    // Missing! 
```

你应该有：

```
back_up = p[x + 0];
p[x + 0] = p[BGRwidth - x - 3];
p[BGRwidth - x - 3] = back_up;

back_up = p[x + 1];
p[x + 1] = p[BGRwidth - x - 2];
p[BGRwidth - x - 2] = back_up;

back_up = p[x + 2];
p[x + 2] = p[BGRwidth - x - 1];
p[BGRwidth - x - 1] = back_up; 
```

# hadoop - Hadoop 数据集 Map Reduce DataJoin

> ID：15432549
> 
> 赞同：1
> 
> 时间：2013-03-15T12:31:10.603
> 
> 标签：hadoop, mapreduce, inner-join

**代码**

我尝试在 Action Book 中运行 Hadoop 的 DataJoin 示例。

```
import java.io.DataInput;
import java.io.DataOutput;
import java.io.IOException;
// import org.apache.commons.logging.Log;
// import org.apache.commons.logging.LogFactory;
import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.mapred.FileOutputFormat;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.TextInputFormat;
import org.apache.hadoop.mapred.TextOutputFormat;
import org.apache.hadoop.util.GenericOptionsParser;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.io.Writable;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.contrib.utils.join.*;

public class MultiDataSetJoinMR extends Configured implements Tool
{
    public static class MapClass extends DataJoinMapperBase
    {
        protected Text generateInputTag(String inputFile)
        {
            String datasource = inputFile.split("-")[0];
            return new Text(datasource);
        }
        protected Text generateGroupKey(TaggedMapOutput aRecord)
        {
            String line = ((Text) aRecord.getData()).toString();
            String[] tokens = line.split(",");
            String groupKey = tokens[0];
            return new Text(groupKey);
        }
        protected TaggedMapOutput generateTaggedMapOutput(Object value)
        {
            TaggedWritable retv = new TaggedWritable((Text) value);
            retv.setTag(this.inputTag);
            return retv;
        }
    }
    public static class Reduce extends DataJoinReducerBase
    {
        protected TaggedMapOutput combine(Object[] tags, Object[] values)
        {
            if (tags.length < 2) return null;
            String joinedStr = "";
            for (int i=0; i<values.length; i++)
            {
                if (i > 0) joinedStr += ",";
                TaggedWritable tw = (TaggedWritable) values[i];
                String line = ((Text) tw.getData()).toString();
                String[] tokens = line.split(",", 2);
                joinedStr += tokens[1];
            }
            TaggedWritable retv = new TaggedWritable(new Text(joinedStr));
            retv.setTag((Text) tags[0]);
            return retv;
        }
    }
    public static class TaggedWritable extends TaggedMapOutput
    {
        private Writable data;

        public TaggedWritable() {
            this.tag = new Text();
        }

        public TaggedWritable(Writable data)
        {
            this.tag = new Text("");
            this.data = data;
        }

        public Writable getData()
        {
            return data;
        }
        public void write(DataOutput out) throws IOException
        {
            this.tag.write(out);
            this.data.write(out);
        }
        public void readFields(DataInput in) throws IOException
        {
            this.tag.readFields(in);
            this.data.readFields(in);
        }
    }
    public int run(String[] args) throws Exception
    {

        Configuration conf = getConf();
        JobConf job = new JobConf(conf, MultiDataSetJoinMR.class);
        String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
        if (otherArgs.length != 2)
        {
            System.err.println("Usage: wordcount <in> <out>");
            System.exit(2);
        }

        Path in = new Path(args[0]);
        Path out = new Path(args[1]);
        FileInputFormat.setInputPaths(job, in);
        FileOutputFormat.setOutputPath(job, out);
        job.setJobName("DataJoin");
        job.setMapperClass(MapClass.class);
        job.setReducerClass(Reduce.class);
        job.setInputFormat(TextInputFormat.class);
        job.setOutputFormat(TextOutputFormat.class);
        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(TaggedWritable.class);
        job.set("mapred.textoutputformat.separator", ",");
        JobClient.runJob(job);
        return 0;
    }
    public static void main(String[] args) throws Exception
    {
        int res = ToolRunner.run(new Configuration(),
                new MultiDataSetJoinMR(),
                args);
        System.exit(res);
    }
} 
```

**运行命令**

./hadoop jar MultiDataSetJoin.jar /home/project/dataset /home/project/out

**错误**

但我面临以下问题。

```
15 Mar, 2013 4:29:45 PM org.apache.hadoop.metrics.jvm.JvmMetrics init
INFO: Initializing JVM Metrics with processName=JobTracker, sessionId=
15 Mar, 2013 4:29:45 PM org.apache.hadoop.mapred.JobClient configureCommandLineOptions
WARNING: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).
15 Mar, 2013 4:29:45 PM org.apache.hadoop.mapred.FileInputFormat listStatus
INFO: Total input paths to process : 2
15 Mar, 2013 4:29:45 PM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Running job: job_local_0001
15 Mar, 2013 4:29:45 PM org.apache.hadoop.mapred.FileInputFormat listStatus
INFO: Total input paths to process : 2
15 Mar, 2013 4:29:45 PM org.apache.hadoop.mapred.MapTask runOldMapper
INFO: numReduceTasks: 1
15 Mar, 2013 4:29:45 PM org.apache.hadoop.mapred.MapTask$MapOutputBuffer <init>
INFO: io.sort.mb = 100
15 Mar, 2013 4:29:45 PM org.apache.hadoop.mapred.MapTask$MapOutputBuffer <init>
INFO: data buffer = 79691776/99614720
15 Mar, 2013 4:29:45 PM org.apache.hadoop.mapred.MapTask$MapOutputBuffer <init>
INFO: record buffer = 262144/327680
15 Mar, 2013 4:29:45 PM org.apache.hadoop.mapred.LocalJobRunner$Job run
WARNING: job_local_0001
java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:354)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:307)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:177)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    ... 5 more
Caused by: java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:34)
    ... 10 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    ... 13 more
Caused by: java.lang.NullPointerException
    at MultiDataSetJoinMR$MapClass.generateInputTag(MultiDataSetJoinMR.java:31)
    at org.apache.hadoop.contrib.utils.join.DataJoinMapperBase.configure(DataJoinMapperBase.java:60)
    ... 18 more
null15 Mar, 2013 4:29:46 PM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO:  map 0% reduce 0%
15 Mar, 2013 4:29:46 PM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Job complete: job_local_0001
15 Mar, 2013 4:29:46 PM org.apache.hadoop.mapred.Counters log
INFO: Counters: 0
Exception in thread "main" java.io.IOException: Job failed!
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1252)
    at MultiDataSetJoinMR.run(MultiDataSetJoinMR.java:123)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at MultiDataSetJoinMR.main(MultiDataSetJoinMR.java:128)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

从日志跟踪中，我可以确定 inputFile 变量在下面的方法中获得空值，

```
protected Text generateInputTag(String inputFile)
{
    String datasource = inputFile.split("-")[0];
    return new Text(datasource);
} 
```

我不知道它从哪里被调用以及如何修复它。谁能帮帮我

# c# - Avifile32，无法使用 AviManager 打开文件

> ID：15432561
> 
> 赞同：0
> 
> 时间：2013-03-15T12:31:44.107
> 
> 标签：c#, avi

我遇到了 AviManager 库的问题。我想创建一个 AVI 文件来存储视频，但我一直在这一行收到错误：

```
_aviManager = new AviManager(@"c:\\Recordings\\test.avi", false); 
```

查看库，此方法如下所示：

```
public AviManager(String fileName, bool open){
        Avi.AVIFileInit();
        int result;
        if(open){ //open existing file

            result = Avi.AVIFileOpen(
                ref aviFile, fileName,
                Avi.OF_READWRITE, 0);
        }else{ //create empty file

            result = Avi.AVIFileOpen(
                ref aviFile, fileName,
                Avi.OF_WRITE | Avi.OF_CREATE, 0);

        }
        if(result != 0) {
            throw new Exception("Exception in AVIFileOpen: "+result.ToString());
        }
    } 
```

因为文件当前不存在，所以应该进入else部分，新建一个文件。它创建文件，但随后崩溃，因为结果采用了 value `-2147205009`。我的问题是，它为什么要这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T13:08:57.607

我遇到了同样的问题，这在我的情况下是由未正确处理的流引起的（因此一旦打开“* .avi”文件就被锁定，然后每次打开尝试都以这个错误结束）。

为避免这种情况，请确保以正确的顺序关闭/处理所有 AVI 对象：正确：

```
aviManager.Close();
newStream.GetFrameClose(); 
```

并删除所有“nulling”，如 aviManager=null; 等从代码末尾（它在我的机器上引起了一些随机问题）。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T13:56:25.210

问题可能出在路径上。文件夹`C:\Recordings`是在创建`test.avi`文件之前创建的吗？尝试先在系统中创建路径：

```
if(!Directory.Exists(path))
   Directory.CreateDirectory(path); 
```

在哪里

```
path = @"c:\Recordings" 
```

（使用“\\”和“@”是不必要的，因为反斜杠以任何一种方式都被转义了。）

# c# - System.Data.DataRowView 而不是实际值

> ID：15432563
> 
> 赞同：0
> 
> 时间：2013-03-15T12:31:44.280
> 
> 标签：c#

我有以下代码。当我运行程序并使用参数（例如 223）运行一次存储过程，然后使用参数（例如 315 ant）运行它，然后再次使用参数运行时，我得到了 System.Data.DataRowView” 而不是实际值。你能帮我下面的吗？

```
private void GetServers()
    {
        IDBManager dbManager = new DBManager (DataProvider.SqlServer);
        dbManager.ConnectionString = @"Data Source=server; Initial Catalog=base;  Integrated Security = SSPI;";

        try
        {
            dbManager.Open();
            dbManager.CreateParameters(1);
            dbManager.AddParameters(0,"@report_id", (txtReportID.Text));
            DataSet ds = new DataSet("Servers");
            ds = dbManager.ExecuteDataSet(CommandType.StoredProcedure, "sp_get_servers_from_report_test");              
            if (ds.Tables[0].Rows.Count > 0)
            {

                chkdListBoxServers.DataSource = ds.Tables[0];
                chkdListBoxServers.DisplayMember = "Servers";
                chkdListBoxServers.ValueMember = "server_name";                 
            }
            else
            {
                MessageBox.Show("No servers or incorrect report id");
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
        finally
        {
            dbManager.Dispose();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:59:00.303

我想`chkdListBoxServers.DisplayMember = "server_name";`会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:35:17.843

用此代码替换

```
//DataSet ds = new DataSet("Servers"); //delete this

            var ds = dbManager.ExecuteDataSet(CommandType.StoredProcedure, "sp_get_servers_from_report_test"); 
```

# r - 更改数据框的列类型

> ID：15432566
> 
> 赞同：8
> 
> 时间：2013-03-15T12:31:49.863
> 
> 标签：r, dataframe

我有一个包含大量值的数据框。数据框如下

```
> datedPf
            date ticker quantity
96828 2013-01-11    ABT      700
96829 2013-01-11    AMD     9600
96830 2013-01-11    AMG      600
96831 2013-01-11   AGCO      800
96832 2013-01-11      A     1300
etc... 
```

“ticker”和“quantity”列的类型是`factor`. 我分别使用`class(datedPf$ticker)`和发现了这个`class(datedPf$quantity)`。但是“日期”列的类型是`date`. 我想将该类型更改为`factor`. 我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-15T12:44:19.577

`datedPf$date = as.factor(datePf$date)`但你确定这是你想做的吗？

# zend-framework - Bcrypt() 与 Zend Framework 1.12.x

> ID：15432568
> 
> 赞同：1
> 
> 时间：2013-03-15T12:32:15.343
> 
> 标签：zend-framework, zend-framework2, bcrypt

是否有可能`Bcrypt()`在 Zend Framework 1.12.x 中使用？

我找到`Zend\Crypt\Password\Bcrypt`了 Zend 2.1.3 版，但 1.12.x 版没有类似的东西。

一般会问： Zend 版本 1.12.x[是否](http://framework.zend.com/manual/2.1/en/modules/zend.crypt.password.html)有处理密码的替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:02:34.260

您可以实现自己的 AuthAdapter，但有人为您完成了任务并将 ZF2 BcCrypt 适配器反向移植到 Zend Framework 1.1x。

你可以在 gitHub 上获得它：[BcCrypt Zend Framework 1.x](https://github.com/rumeau/zf1-authadapter-dbtablebcrypt)

# php - Windows 特定的 CSS 选择器或代码片段

> ID：15432569
> 
> 赞同：-2
> 
> 时间：2013-03-15T12:32:16.230
> 
> 标签：php, html, css, linux, windows

我正在*Ubuntu*下用 PHP 开发一个网站，我刚刚开始在跨平台环境下测试它。我注意到，一些**CSS规则在***Windows*下看起来不一样（可能是由于它的字体渲染方法），所以我决定优化我的**CSS**代码以在*Windows*上也能正常工作。我不想在其他操作系统下松散当前的样子，所以简单的代码替换不是解决方案。我正在寻找一些**CSS 选择器**，例如浏览器选择器，但适用于操作系统，尤其是*Windows*. 是否有可能，或者我需要使用多个 CSS 文件或一些 javascript 来执行此操作？我也想保持内容 SEO 友好。感谢您的阅读！

*编辑：*我在这个网站上使用@font-face。我有问题的项目，使用这些字体。

该站点在*Ubuntu*下的每个浏览器中看起来都一样。问题出在*Windows*下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:36:49.843

不，纯 CSS 是不可能的。
这是一个有趣的解决方法[http://rafael.adm.br/css_browser_selector/](http://rafael.adm.br/css_browser_selector/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:42:09.680

没有适用于操作系统的 CSS 选择器，仅适用于浏览器。您需要使用 JS 来检测操作系统并以此为基础您的 CSS - 例如：

```
<script type="text/javascript">

var mactest=navigator.userAgent.indexOf("Mac")!=-1 //Logic test for OS

var mac_css='/style/macstyle.css' //mac css
var pc_css='/style/pcstyle.css'   //pc css

document.write('<link rel="stylesheet" type="text/css" href="'+ (mactest? mac_externalcss : pc_externalcss) +'">')

</script> 
```

# rabbitmq - 开源 ESB 中的 RabbitMQ

> ID：15432571
> 
> 赞同：1
> 
> 时间：2013-03-15T12:32:22.330
> 
> 标签：rabbitmq, esb

是否有开箱即用的开源 ESB 支持 RabbitMQ？
似乎基于 Apache Camel 的 ESB 可以与 Apache Qpid 非 RabbitMQ 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T14:24:15.223

从 2.12 版开始，Camel 现在有一个[rabbitmq 组件](http://camel.apache.org/rabbitmq.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T18:58:02.210

[WSO2 ESB](http://wso2.com/products/enterprise-service-bus/)支持基于[RabbitMQ](http://www.rabbitmq.com/)的 AMQP 传输。[本](http://docs.wso2.org/wiki/display/ESB460/RabbitMQ+AMQP+Transport)文档解释了如何配置这个基于 RabbitMQ 的 AMQP 传输。该文档本身还包含一些示例以供试用。

# mysql - Mysql如何在一对多关系中返回对孩子的测试

> ID：15432574
> 
> 赞同：0
> 
> 时间：2013-03-15T12:32:32.557
> 
> 标签：mysql, sql, database, left-join, one-to-many

我有一个由两个表组成的数据库：

```
categories
products 
```

这两个表之间是一对多的关系，因此每个产品都可以通过“category_id”列链接到一个且只有一个类别。

产品类别有一个名为“状态”的列。

**这是我的问题**：我想返回所有类别并将两列附加到结果表中。

1）第一列将统计该类别中的产品数量。（解决了）

2) 第二列将计算 products.'status'="on sale" 的产品数量。

到目前为止我的代码（不起作用！）：

```
SELECT a.*, COUNT(b.`category_id`) AS product_count, COUNT(c.`category_id`) AS status_count
FROM `categories` AS a 
LEFT JOIN `products` AS b ON ( b.`category_id` = a.`id` )
LEFT JOIN `products` AS c ON ( c.`status` = 'on sale' AND c.`category_id` = a.`id`)
GROUP BY a.`id`
ORDER BY  a.`name` ASC; 
```

以下代码仅返回产品计数列（有效！）：

```
SELECT a.*, COUNT(b.`category_id`) AS equation_count
FROM `categories` AS a 
LEFT JOIN `products` AS b ON ( b.`category_id` = a.`id` )
GROUP BY a.`id`
ORDER BY  a.`name` ASC; 
```

谢谢，尼古拉 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:35:58.380

无需额外的`JOIN`. 您可以使用`CASE`表达式来获取每个类别的 status = 'on sale' 的产品数量。就像是：

```
SELECT 
  a.id,
  a.name, 
  COUNT(b.`category_id`) AS product_count, 
  SUM(CASE WHEN b.status = 'on sale' THEN 1 ELSE 0 END) AS status_count
FROM `categories` AS a 
LEFT JOIN `products` AS b ON b.`category_id` = a.`id` 
GROUP BY a.`id`, a.name
ORDER BY  a.`name` ASC; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/19367/3)

* * *

由于您使用的是 MySQL，因此您可以使用`SUM(b.status = 'on sale')`. 这是因为在 MySQL 中将布尔值隐式转换为 0 和 1，对于 products 表中没有条目的那些类别，用 0`IFNULL`替换：`null`

```
SELECT 
  a.id,
  a.name, 
  COUNT(b.`category_id`) AS product_count, 
  IFNULL(SUM(b.status = 'on sale'), 0) AS status_count
FROM `categories` AS a 
LEFT JOIN `products` AS b ON b.`category_id` = a.`id` 
 GROUP BY a.`id`, a.name
ORDER BY  a.`name` ASC; 
```

[**更新的 SQL Fiddle 演示**](http://sqlfiddle.com/#!2/19367/5)

# java - 尽可能大地展开 JPanel

> ID：15432575
> 
> 赞同：0
> 
> 时间：2013-03-15T12:32:33.920
> 
> 标签：java, swing, user-interface, jpanel, layout-manager

我有一个`JTabbedPane`，我在其中插入一个扩展名`JPanel`，我在其中插入一个`JSplit`。

我的问题是面板自动设置为可能的最小尺寸，即足以绘制内部组件的尺寸，如图所示。![啊啊啊](../Images/950c8e2c9835988c49bf13a9a41376ec.png)

相反，我希望它尽可能大。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:38:56.960

确保组成选项卡的组件使用 a `BorderLayout`，默认情况下`JPanel`使用 a`FlowLayout`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T12:43:43.760

设置`JPanel`布局`null`并添加其他所需大小的组件。希望它会奏效！

# css - 以访客身份登录时，Sharepoint Masterpage 不同？

> ID：15432576
> 
> 赞同：2
> 
> 时间：2013-03-15T12:32:36.290
> 
> 标签：css, sharepoint, sharepoint-2007, master-pages, sharepoint-designer

使用 sharepoint 2007，我为我的公司创建了一个新的母版页，并发布了我使用的所有必要文件。但是，当我登录时，这可以正常工作，如果我使用访问者用户登录，则反映不同。我去过母版页设置并修改了不同的设置，但没有运气。请有人可以帮助我解决可能导致这种情况的原因吗？

还请您提供我可以用来设置 Web 部件样式的源。我想为主要内容区域和右侧区域/面板上的 webpart 应用边框，应用不同的容器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:58:55.013

网站访问者看不到“草稿”中的项目，包括母版页。确保它已发布并获得批准。

能够将右侧区域与主区域分开设置样式的最简单方法是在页面布局的相关部分周围添加分类 div。

# image - 从图像中获取 x%

> ID：15432582
> 
> 赞同：0
> 
> 时间：2013-03-15T12:32:48.250
> 
> 标签：image, matrix

我想知道一种简单的方法来随机获取图像（位图图像​​）的 5% 像素并将它们保存在另一个位图图像或数组中或其他任何东西中。

在 C# 中是否有这样的方法，或者我应该尝试遍历图像并随机选择数组 [] [] 中 5% 的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:08:44.083

反正我是用我自己的方法做到的。我用随机生成的 x 和 y 坐标遍历图像的像素，并从原始图像中选择了所有像素数的 x%。我将这些像素复制到另一个位图图像。

# jsf - 如何让两个 Primefaces 元素（如 MeterGaugeChartModel）彼此相邻？

> ID：15432583
> 
> 赞同：1
> 
> 时间：2013-03-15T12:32:49.097
> 
> 标签：jsf, primefaces

我有两个`MeterGaugeChartModel`来自 Primefaces。目前一个在另一个下面，但我希望它们彼此相邻。我怎样才能做到这一点？

```
<p:panel header="Capacity Charts">
  <p:meterGaugeChart id="CPUchart" value="#{chartBean.meterGaugeModelCPU}"
                     showTickLabels="false" labelHeightAdjust="110" intervalOuterRadius="130"
                     seriesColors="66cc66, 93b75f, E7E658, cc6666" style="width:400px;height:250px"
                     title="CPU" label="percentage (%)"/>
  <p:meterGaugeChart id="RAMchart" value="#{chartBean.meterGaugeModelRAM}"
                     showTickLabels="false" labelHeightAdjust="110" intervalOuterRadius="130"
                     seriesColors="66cc66, 93b75f, E7E658, cc6666"
                     style="width:400px;height:250px"
                     title="RAM" label="percentage (%)"/>
</p:panel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:06:54.563

我认为您正在寻找@kolossus 提出的解决方案。在[Primefaces 的展示网站上，](http://www.primefaces.org/showcase/ui/home.jsf)您可以找到许多此类解决方案的示例，例如第[一个示例](http://www.primefaces.org/showcase/ui/pprUpdate.jsf)。

```
<p:panel header="Capacity Charts">
    <h:panelGrid columns="2">
        <p:meterGaugeChart id="CPUchart" ... />
        <p:meterGaugeChart id="RAMchart" ... />
    </h:panelGrid>
</p:panel> 
```

这会将 的所有子元素添加`panelGrid`到下一列。因此，添加另一个`<p:meterGaugeChart />`会将其添加到下面行的第一列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:54:15.173

首先，@kolossus 提出了一个优秀的 JSF 风格的解决方案：将你的组件封装在一个面板网格中。我也会这样做。

如果你不想要任何*额外的*JSF 组件，你可以使用一个非常简单的 CSS：添加`float:left`到两个仪表组件并添加一个额外的`<div style="clear:both">`：

```
<p:panel header="Capacity Charts">
    <p:meterGaugeChart id="CPUchart" style="float:left;" ... />
    <p:meterGaugeChart id="RAMchart" style="float:left;" ... />
    <div style="clear:both"></div>
</p:panel> 
```

# python - 将 NetCDF 转换为 GRIB2

> ID：15432587
> 
> 赞同：8
> 
> 时间：2013-03-15T12:32:58.813
> 
> 标签：python, netcdf, grib, cdo-climate

我知道有像[wgrib2](http://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/)这样的软件可以将文件`grib`和`grib2`格式转换为`NetCDF`文件，但我需要另辟蹊径： from `NetCDF`to `grib2`，因为这里的当地气象局只能使用`grib2`格式的网格数据。

似乎一种解决方案可能是在 Python 中，使用[NetCDF4-Python 库](http://code.google.com/p/netcdf4-python/)（或其他）来读取`NetCDF`文件并使用[pygrib](http://code.google.com/p/pygrib/)来编写`grib2`.

有没有更好的办法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-02T11:37:51.353

经过更多研究，我最终使用了英国气象局的“Iris”包（[http://scitools.org.uk/iris/docs/latest/index.html](http://scitools.org.uk/iris/docs/latest/index.html)），它可以读取 NetCDF 以及 OPeNDAP、GRIB 和几个其他格式，并允许保存为 NetCDF 或 GRIB。

基本上代码如下所示：

```
import iris

cubes = iris.load('input.nc')       # each variable in the netcdf file is a cube
iris.save(cubes[0],'output.grib2')  # save a specific variable to grib 
```

但是如果您的 netcdf 文件不包含足够的元数据，您可能需要添加它，您也可以使用 Iris 来添加它。这是一个完整的工作示例：

[https://github.com/rsignell-usgs/ipython-notebooks/blob/master/files/Iris_CFSR_wave_wind.ipynb](https://github.com/rsignell-usgs/ipython-notebooks/blob/master/files/Iris_CFSR_wave_wind.ipynb)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T10:30:07.193

还可以使用气候数据运算符 (cdo's) 来完成这项任务 - [https://code.zmaw.de/projects/cdo/wiki](https://code.zmaw.de/projects/cdo/wiki)

但需要安装所有附加库的软件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-07T20:25:07.393

我知道上面提到了 CDO，但我认为给出完整的命令会很有用

```
cdo -f grb2 copy in.nc out.grb 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T18:24:48.763

ECMWF 有一个基于命令行的工具来执行此操作：[https ://software.ecmwf.int/wiki/display/GRIB/grib_to_netcdf](https://software.ecmwf.int/wiki/display/GRIB/grib_to_netcdf)

# sql - 在 SQL 中获取日期的周数

> ID：15432591
> 
> 赞同：1
> 
> 时间：2013-03-15T12:33:01.187
> 
> 标签：sql, date, week-number, database-agnostic

有没有办法使用独立于数据库的 SQL 来获取日期的周数？

例如，要获取我使用的日期的月份：

```
SELECT EXTRACT(MONTH FROM :DATE) 
```

但 EXTRACT 函数不知道 SQL92 中的周数。

请注意我想要一个**独立于数据库**的解决方案这一事实！不要将此误解为有关 MS SQL Server 的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:31:54.857

似乎没有一个标准的 SQL 函数可以从日期中提取周数 - 请参阅[此处](http://users.atw.hu/sqlnut/sqlnut2-chp-4-sect-4.html)以比较不同的 SQL 方言如何从日期字段中提取不同的日期部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:55:42.650

你可以试试这个。

声明@date datetime select @date='2013-03-15 00:00:00' select 'Week No: '+ convert(varchar(10),datepart(wk,@date)) as weekno

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:57:55.303

试试这个： `SELECT DATENAME(yy,GETDATE())+RIGHT(DATENAME(wk,GETDATE()),2)`

要了解 DATENAME，请点击此链接：[sqltutorials.blogspot.be/2007/05/sql-datename.html](http://sqltutorials.blogspot.be/2007/05/sql-datename.html)，右侧为[suite101.com/article/sql-functions-leftrightsubstrlengthcharindex-a209089](http://suite101.com/article/sql-functions-leftrightsubstrlengthcharindex-a209089)。有一些例子可以更好地理解 ;-) 它可以在 MS 和其他 sql 服务器上正常工作 ;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T14:30:11.757

我发现的最好的主意是

```
SELECT ROUND(((DAY(NOW())-1)/7)+1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T13:53:32.007

我看到的唯一与数据库无关的解决方案是获取从今天到 1 月 1 日之间的天数。年。然后将其除以 7 并四舍五入。从 1 月 1 日到今天有 73 天，这给出了 10.43 作为周数。ISO 周数是 11。

更正：当前一周的最后一天与当前时间的 1 月 1 日之间的天数。年。在这种情况下，ISO 周为 10，并且 68/7 = 10（四舍五入）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-26T08:28:52.807

```
select (DATEPART(yyyy , CAST(GETDATE() AS datetime)) * 100 + 
        DATEPART(ww , CAST(GETDATE() AS datetime))) as week 
```

# android - 在Android上获取图像的文件路径

> ID：15432592
> 
> 赞同：25
> 
> 时间：2013-03-15T12:33:02.720
> 
> 标签：android, image, path, camera

我有一个可以制作图片并上传的应用程序。上传需要照片的文件路径，但我无法获取。

这是我的代码：

```
public void maakfoto (View v) {

    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, mImageCaptureUri);
    startActivityForResult(cameraIntent, CAMERA_REQUEST);

}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  

        Bitmap photo = (Bitmap) data.getExtras().get("data"); 
        imageView.setImageBitmap(photo);
        knop.setVisibility(Button.VISIBLE);
        System.out.println(mImageCaptureUri);
    }  
} 
```

请帮我获取文件路径。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-15T12:50:24.477

发布到 Twitter 需要图像在设备上的实际路径才能在发布请求中发送。我发现获得实际路径非常困难，而且我经常会走错路。

为了解决这个问题，一旦你有了`Bitmap`，我就用它来从使用`getImageUri()`. 随后，我使用`tempUri`Uri 实例来获取设备上的实际路径。

这是生产代码，经过自然测试。;-)

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {
        Bitmap photo = (Bitmap) data.getExtras().get("data"); 
        imageView.setImageBitmap(photo);
        knop.setVisibility(Button.VISIBLE);

        // CALL THIS METHOD TO GET THE URI FROM THE BITMAP
        Uri tempUri = getImageUri(getApplicationContext(), photo);

        // CALL THIS METHOD TO GET THE ACTUAL PATH
        File finalFile = new File(getRealPathFromURI(tempUri));

        System.out.println(mImageCaptureUri);
    }  
}

public Uri getImageUri(Context inContext, Bitmap inImage) {
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
    String path = Images.Media.insertImage(inContext.getContentResolver(), inImage, "Title", null);
    return Uri.parse(path);
}

public String getRealPathFromURI(Uri uri) {
    Cursor cursor = getContentResolver().query(uri, null, null, null, null); 
    cursor.moveToFirst(); 
    int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA); 
    return cursor.getString(idx); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:37:02.023

`mImageCaptureUri.getPath();`通过以下方式尝试：

```
if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  

            //Get your Image Path
            String Path=mImageCaptureUri.getPath();

            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            imageView.setImageBitmap(photo);
            knop.setVisibility(Button.VISIBLE);
            System.out.println(mImageCaptureUri);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:36:47.470

为了拍照，您必须确定要保存图像的路径，并将其作为额外的 Intent 传递，例如：

```
private void capture(){
    String directoryPath = Environment.getExternalStorageDirectory() + "/" + IMAGE_DIRECTORY + "/";
    String filePath = directoryPath+Long.toHexString(System.currentTimeMillis())+".jpg";
    File directory = new File(directoryPath);
    if (!directory.exists()) {
        directory.mkdirs();
    }
    this.capturePath = filePath; // you will process the image from this path if the capture goes well
    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra( MediaStore.EXTRA_OUTPUT, Uri.fromFile( new File(filePath) ) );
    startActivityForResult(intent, REQUEST_CAPTURE);                

} 
```

*我只是从我给出的另一个答案中复制了上述部分。*

但是要警告您，您应该注意设备之间的图像捕获行为有很多不一致之处。

这是我在某些 HTC 设备上遇到的问题，它会保存在我经过的位置和默认位置，导致设备上出现重复图像： [在拍摄相机意图照片后删除图库图像](https://stackoverflow.com/questions/6390163/deleting-a-gallery-image-after-camera-intent-photo-taken)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:50:40.340

我在单击按钮时执行此操作。

```
private static final int CAMERA_PIC_REQUEST = 1;

private View.OnClickListener  OpenCamera=new View.OnClickListener() {

            @Override
            public void onClick(View paramView) {
                // TODO Auto-generated method stub

                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                NewSelectedImageURL=null;
                //outfile where we are thinking of saving it
                Date date = new Date();
                SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH-mm-ss");

                String newPicFile = RecipeName+ df.format(date) + ".png";

                String outPath =Environment.getExternalStorageDirectory() + "/myFolderName/"+ newPicFile ;
                File outFile = new File(outPath);               

                CapturedImageURL=outFile.toString();
                Uri outuri = Uri.fromFile(outFile);
                cameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, outuri);            
                startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);  

            }
        }; 
```

您可以从变量**CapturedImageURL获取最近捕获的图像的 URL**

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  

    //////////////////////////////////////
    if (requestCode == CAMERA_PIC_REQUEST) {  
        // do something  

         if (resultCode == RESULT_OK) 
         {
             Uri uri = null;

             if (data != null) 
             {
                 uri = data.getData();
             }
             if (uri == null && CapturedImageURL != null) 
             {
                 uri = Uri.fromFile(new File(CapturedImageURL));
             }
             File file = new File(CapturedImageURL);
             if (!file.exists()) {
                file.mkdir();
                sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+Environment.getExternalStorageDirectory())));
            }

         }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T12:59:39.450

使用该函数获取抓图路径

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  
            Uri mImageCaptureUri = intent.getData();
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            imageView.setImageBitmap(photo);
            knop.setVisibility(Button.VISIBLE);
            System.out.println(mImageCaptureUri);
           //getImgPath(mImageCaptureUri);// it will return the Capture image path
        }  
    }

public String getImgPath(Uri uri) {
        String[] largeFileProjection = { MediaStore.Images.ImageColumns._ID,
                MediaStore.Images.ImageColumns.DATA };
        String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
        Cursor myCursor = this.managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                largeFileProjection, null, null, largeFileSort);
        String largeImagePath = "";
        try {
            myCursor.moveToFirst();
            largeImagePath = myCursor
                    .getString(myCursor
                            .getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));
        } finally {
            myCursor.close();
        }
        return largeImagePath;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-05T06:35:03.857

你可以在 Kotlin 中这样做 如果你将来需要 kotlin 代码

```
val myUri = getImageUri(applicationContext, myBitmap!!)
val finalFile = File(getRealPathFromURI(myUri))

fun getImageUri(inContext: Context, inImage: Bitmap): Uri {
    val bytes = ByteArrayOutputStream()
    inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes)
    val path = MediaStore.Images.Media.insertImage(inContext.contentResolver, inImage, "Title", null)
    return Uri.parse(path)
}

fun getRealPathFromURI(uri: Uri): String {
    val cursor = contentResolver.query(uri, null, null, null, null)
    cursor!!.moveToFirst()
    val idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA)
    return cursor.getString(idx)
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-05-16T13:07:34.800

要获取 android 中所有图像的路径，我使用以下代码

```
public void allImages() 
{
    ContentResolver cr = getContentResolver();
    Cursor cursor;
    Uri allimagessuri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
    String selection = MediaStore.Images.Media._ID + " != 0";

    cursor = cr.query(allsongsuri, STAR, selection, null, null);

    if (cursor != null) {
        if (cursor.moveToFirst()) {
            do {

                String fullpath = cursor.getString(cursor
                        .getColumnIndex(MediaStore.Images.Media.DATA));
                Log.i("Image path ", fullpath + "");

            } while (cursor.moveToNext());
        }
        cursor.close();
    }

} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-04-01T11:22:47.047

简单通过意图优先

```
Intent i = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(i, RESULT_LOAD_IMAGE); 
```

你会在你的onActivityResult上得到图片路径

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
            Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };
            Cursor cursor = getContentResolver().query(selectedImage,filePathColumn, null, null, null);
            cursor.moveToFirst();
            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);
            cursor.close();
            ImageView imageView = (ImageView) findViewById(R.id.imgView);
            imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
        }
    } 
```

# c - 如何在gdb中返回主函数

> ID：15432594
> 
> 赞同：1
> 
> 时间：2013-03-15T12:33:05.713
> 
> 标签：c, gdb

我正在使用 gdb 进行调试，出现分段错误，然后我想在 main 函数中设置另一个断点并从头开始运行程序，尽管我已经完成了当前运行并且它显示“程序不是正在运行”

当我输入“列表”时

它显示了一个库文件的代码片段，这意味着目前我不在主函数中

如果我重新运行程序，即使我在 main() 开头设置断点它仍然会出现分段错误，这意味着程序正在库文件中运行

那么如何返回 main() 函数呢？谢谢！

提示：我正在使用 libpcap.h，并且在编译时我有一个“-lpcap”选项

顺便说一句，当我使用 break 9 在 9 处设置断点时，gdb 将程序运行到第 11 行？这种不准确有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:35:14.180

只需重新发出[`run`](http://sourceware.org/gdb/current/onlinedocs/gdb/Starting.html#Starting)命令。您将丢失程序状态，但不会丢失似乎与您需要的断点相匹配的断点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:22:40.763

“顺便说一句，当我使用 break 9 在 9 处设置断点时，gdb 将程序运行到第 11 行” - 从这里以及您提供的其他信息来看，听起来源代码可能与gdb 将地址映射到源代码行。你有没有机会编辑程序？你有没有重新编译它并重新启动gdb？您是否看到任何类似于“可执行文件比源代码更新”的警告？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T09:05:58.217

> 如果我重新运行程序，即使我在 main() 开头设置断点它仍然会出现分段错误，这意味着程序正在库文件中运行

实际上，这意味着您要么未能在`main`函数上设置断点，要么程序执行未达到`main`并出现分段错误。尝试以下步骤：

1.  `-g`使用调试信息（ gcc 选项）从头开始重建程序。重置断点并注意来自 gdb 的任何警告。
2.  如果程序仍然崩溃并设置断点，`main`请查看堆栈跟踪（`bt`gdb 中的命令）。它可能以前发生过`main`，您不会`main`在堆栈跟踪中看到。

# vba - 如何更改我的代码以将值放入数组

> ID：15432597
> 
> 赞同：0
> 
> 时间：2013-03-15T12:33:22.383
> 
> 标签：vba, excel

我遵循了一些数组教程，但是我在 VBA 中的代码对于我来说很难将其更改为我的基本知识的数组。

任何人都可以帮忙吗？

这是我的代码：

```
Sub InternExtern()

Dim source, addrescell, destination As Range
Dim Sourcevalue As String

For Each source In Range("E6", Range("E" & Rows.Count).End(xlUp))
 If source.Value <> "" Then
    For Each addrescell In Range("address_table_names").Rows
             If addrescell.Cells(1).Value <> "" And InStr(source.Offset(0, 23).Value, "Extern") = 0 Then
               SourceName = addrescell.Cells(1).Value
               Sourcevalue = addrescell.Cells(1, 4).Value
                    If InStr(UCase(source), UCase(SourceName)) <> 0 Then
                      If InStr(Sourcevalue, "10.") <> 0 Or InStr(Sourcevalue, "192.168.") <> 0 Or IsInternal(addrescell.Offset(0, 3).Value) Then
                       source.Offset(0, 23) = "Intern"
                       Else: source.Offset(0, 23) = "Extern"
                      End If
                    End If
                      If InStr(source, "-ext-") <> 0 Or InStr(source, "any") <> 0 Or InStr(source, "-EXT-") <> 0 Then
                      source.Offset(0, 23) = "Extern"
                      End If
                      If InStr(source, "any") <> 0 And InStr(source.Offset(0, -1).Value, "FW-Peering") = 0 Then
                      source.Offset(0, 23) = "Intern"
                      End If

            End If
            Next addrescell
End If
Next source 
```

我将列值添加到数组中的目标是让它更快。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:57:03.257

我不太明白将某些东西放入数组中会有什么帮助。你得有时间再把它拿出来。

您可以尝试在循环运行时禁用`Application.ScreenUpdating`并`Application.Calculation`在最后将其重新打开。

```
Application.ScreenUpdating = False
Application.Calculation = xlManual
' your loop
Application.ScreenUpdating = True
Application.Calculation = xlAutomatic 
```

如果您可以解释代码在做什么或您想做什么，我们可能会提供更多帮助。使用@sehe 建议的工作表函数可能是一个更好的解决方案。

**更新**

只需查看您指向 codereview 的链接，其中一个答案表明创建工作表的数组副本并将修改后的数组重新应用于工作表相当简单快捷。以前没见过，很酷的东西。

~~虽然数组可能更快，但我认为在您的情况下，它们只会增加很多额外的复杂性，因为您使用的对象方法在您将其转换为数组时不会存在。~~

假设您将单元格地址添加到数组中（否则您没有工作表的上下文）

`Array(1).Offset(0,1) = <not going to happen>`

`Range(Array(1)).Offset(0,1) = <going to work>`

所以你会回到对象来做你的事情，除非你有很多数组，这可能是多余的，也可能是多余的。

~~由于我不能 100% 确定您的功能的目标是什么，所以这可能根本没有帮助！我认为您的内部 for 循环可能有一些额外的（不需要的）迭代。如果在标记的部分`'HERE`基本上意味着您已经完成了该迭代，您可以退出循环并转到下一个父循环。~~

```
For Each source In Range("E6", Range("E" & Rows.Count).End(xlUp))
    If source.Value <> "" Then
        For Each addrescell In Range("address_table_names").Rows
            If addrescell.Cells(1).Value <> "" Then ' vba doesn't shortcircuit
                If InStr(source.Offset(0, 23).Value, "Extern") = 0 Then
                    SourceName = addrescell.Cells(1).Value
                    Sourcevalue = addrescell.Cells(1, 4).Value
                    If InStr(UCase(source), UCase(SourceName)) <> 0 Then
                        If InStr(Sourcevalue, "10.") <> 0 Or InStr(Sourcevalue, "192.168.") <> 0 Or IsInternal(addrescell.Offset(0, 3).Value) Then
                            source.Offset(0, 23) = "Intern"
                            ' HERE
                            Exit For
                        Else
                            source.Offset(0, 23) = "Extern"
                            ' HERE
                            Exit For
                        End If
                    End If
                    If InStr(source, "-ext-") <> 0 Or InStr(source, "any") <> 0 Or InStr(source, "-EXT-") <> 0 Then
                        source.Offset(0, 23) = "Extern"
                        ' HERE
                        Exit For
                    End If
                    If InStr(source, "any") <> 0 Then ' again, no shortcircuit
                        If InStr(source.Offset(0, -1).Value, "FW-Peering") = 0 Then
                            source.Offset(0, 23) = "Intern"
                            ' HERE
                            Exit For
                        End If
                    End If
                End If
            End If
        Next addrescell
    End If
Next source 
```

[有关`shortcircuit-ing`](https://stackoverflow.com/questions/7015471/does-the-vba-and-operator-evaluate-the-second-argument-when-the-first-is-false), 嵌套 if 的信息比使用更快`and`，而不是光速，但可以节省一次比较。如果您正在进行大量迭代，它可以加起来（无论如何）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:43:23.257

我建议用它制作一个工作表函数：

*   一个有用的例子是[http://www.aspfree.com/c/a/braindump/building-complex-user-defined-functions-with-visual-basic-applications-in-excel/](http://www.aspfree.com/c/a/braindump/building-complex-user-defined-functions-with-visual-basic-applications-in-excel/)
*   （遗憾的是很难找到更好的文档，将尝试找到更多）

这样，您只需在计算列中键入公式

```
 =InternExtern(E6) 
```

并且只有在进行完全重新计算、重新编译 VBA 项目或源值更改时才会重新计算单元格！

# sql - 即使代码块在单独执行时运行良好，创建 SQL 过程也会产生编译错误

> ID：15432602
> 
> 赞同：0
> 
> 时间：2013-03-15T12:33:41.037
> 
> 标签：sql, oracle, plsql

我试图在一个过程中运行这段代码。

```
DECLARE sharedpool FLOAT;
BEGIN
select bytes/1024/1024 into sharedpool from v$sgastat where pool='shared pool' and name like '%free memory';
insert into tempstats1(stat,cdate) values(sharedpool,sysdate);
commit;
END; 
```

当像这样运行时，它会成功执行并更新表。我想将此块添加到一个过程中并安排一个作业来定期运行它。

```
CREATE OR REPLACE PROCEDURE temp_insert1 IS
DECLARE sharedpool FLOAT;
BEGIN
select bytes/1024/1024 into sharedpool from v$sgastat where pool='shared pool' and name like '%free memory';
insert into tempstats1(stat,cdate) values(sharedpool,sysdate);
commit;
END; 
```

如果我运行它，它会显示一个警告，该过程是用编译错误创建的。为什么它不能正确编译？有人可以解释我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:41:44.520

尝试`DECLARE`从您的存储过程中删除：

```
CREATE OR REPLACE PROCEDURE temp_insert1
IS
   sharedpool   FLOAT;
BEGIN
   SELECT bytes / 1024 / 1024
     INTO sharedpool
     FROM v$sgastat
    WHERE pool = 'shared pool' AND name LIKE '%free memory';

   INSERT INTO tempstats1 (stat, cdate)
        VALUES (sharedpool, SYSDATE);

   COMMIT;
END; 
```

来自@DavidAldridge 评论：

您可以像这样删除变量声明：

```
CREATE OR REPLACE PROCEDURE temp_insert1
    IS      
    BEGIN

       INSERT INTO tempstats1 (stat, cdate)
       SELECT bytes / 1024 / 1024, SYSDATE
         FROM v$sgastat
        WHERE pool = 'shared pool' AND name LIKE '%free memory';

       COMMIT;
    END; 
```

# ibm-mobilefirst - 在 Worklight 适配器中更改 HTTP URL

> ID：15432608
> 
> 赞同：0
> 
> 时间：2013-03-15T12:33:52.773
> 
> 标签：ibm-mobilefirst, jsonstore

我需要为 worklight 创建一个 HTTP 适配器，但 url 必须通过参数以编程方式提供。

1）我能够传递用户/密码，但不能传递 url。有没有办法做到这一点？

我还尝试创建自己的 java 适配器来调用 REST API，它在我测试适配器时有效，但似乎我的响应不是工作灯的预期格式。我收到了这个错误：

2) BAD_PARAMETER_EXPECTED_DOCUMENT_OR_ARRAY_OF_DOCUMENT。

我的 Java 适配器返回一个 JSONArtifact (JSONObject)，但似乎工作灯希望将其嵌入到另一个 JSONObject 中，例如 {"array":{...}}。有没有办法将 JSONObject 转换为 worklight 预期的格式。

```
    导入 org.apache.wink.json4j.JSON；
    导入 org.apache.wink.json4j.JSONArtifact；
    导入 org.apache.wink.json4j.JSONException；

private Header headerUserAgent = new Header("User-Agent", "Mozilla");
private Header headerAccept = new Header("Accept", "application/json");

私有字符串主机名；
私有字符串 baseURL；

受保护的MyHttpClient（字符串用户名，字符串用户密码，字符串主机名，字符串baseURL）{
    极好的（）;
    凭据 defaultcreds = new UsernamePasswordCredentials(userName,
            用户密码）;
    this.getState().setCredentials(AuthScope.ANY, defaultcreds);
    this.hostName = 主机名；
    this.baseURL = baseURL;
}

私有 GetMethod getGetMethod(String url) 抛出 URIException {
    GetMethod httpMethod = new GetMethod(new HttpsURL("https://"+hostName+baseURL+url).getEscapedURI());
    addCommonHeaders(httpMethod);
    返回http方法；
}
私有 JSONArtifact getResponseAsJSONObject(InputStream inputStream) 抛出 IOException {
    InputStreamReader reader = new InputStreamReader(inputStream);
    尝试 {
        JSONArtifact json = JSON.parse(reader);
        返回 json；
    } 捕捉（NullPointerException e）{
        // TODO 自动生成的 catch 块
        e.printStackTrace();
    } 捕捉（JSONException e）{
        // TODO 自动生成的 catch 块
        e.printStackTrace();
    }
    返回空值；
         }

```

适配器：

```
    函数getResponse（用户，密码）{
        var client = new com.itdove.mypackage.MyHttpClient(user,password,"myurl","mybaseurl");
        返回 {
            数组：client.executeGet("mypath")
        };
    }

```

它适用于此，但此解决方案不提供服务 url 作为参数：

```
    函数getResponseAdapters（路径，用户名，密码）{

        变量输入 = {
            方法：'get'，
            返回内容类型：'json'，
            标题：{
                '用户代理'：'Mozilla'，
                '授权': '基本'+Base64.encode(用户名+':'+密码),
            } ,
            路径：“/资源/”+路径
        };

        返回 WL.Server.invokeHttp(输入);
    }

    函数getResponse（用户名，密码）{
        返回 getMySCAWSAdapters（路径、用户名、密码）；
    }

```

收藏

```
                vAPPArrayAdapterOptions = {
                    名称：'myResponseAdapter',
                    代替： ''，
                    消除： ''，
                    添加： ''，
                    加载： {
                        程序：'getResponse'，
                        参数：[“用户”，“密码”]，
                        键：'数组'
                    },
                    接受：功能（数据）{
                        返回（data.status === 200）；
                    }
                },

    ...
                    vAPPArray = wlJsonStore.initCollection(
                            "vAPPArray",
                            vAPPArraySearchFields，
                            {适配器：vAPPArrayAdapterOptions，
                            onSuccess: initCollectionSuccessCallback,
                            onFailure: initCollectionFailureCallback,
                            加载：真}）；

```

非常感谢多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:29:09.990

找到了解决方案：

首先，我使用的是 apache wink JSONArtifact 而不是 com.ibm.json.java.JSONArtifact！

其次我修改了我的收集器实现方法如下添加状态（不确定是否需要）

```
函数getResponse（用户，密码，主机名）{
    var client = new com.itdove.mypackage.IWDHttpClient(user,password,hostname,"mypath");
    返回 {
        数组：client.executeGet("mymethod"),
        状态码：client.getStatusCode()，
        statusReason：client.getStatusReason()
    };
}

```

在 myCollector.js 中，在调用我的 initCollection 之前，我将用户、密码、主机名设置如下。

```
        参数 = [ settings.json.user, settings.json.password, settings.json.hostname ];
        myAdapterOptions.load["params"] = 参数；

```

# jquery-mobile - 如何在 MobiScroll 中设置 24 小时格式？

> ID：15432616
> 
> 赞同：3
> 
> 时间：2013-03-15T12:34:18.820
> 
> 标签：jquery-mobile, mobiscroll

我正在使用最新版本的[MobiScroll](http://mobiscroll.com/)日期时间插件，我需要在没有 AM/PM 的情况下以 24 小时格式显示日期，所以我这样做就像

```
$('#datetime-start, #datetime-end').mobiscroll().datetime({
    minDate: new Date(now.getFullYear(), now.getMonth(), now.getDate()),
    display: 'modal',
    animate: 'pop',
    mode: 'mixed',
    // 2013-03-15 11:26:17
    dateFormat: 'yy-mm-dd',
    timeFormat: 'HH:ii:ss',
    timeWheels: 'hhii'
}); 
```

但是还有 12h 格式...有没有办法设置 24 格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T12:47:13.150

您的 timeWheels 属性不正确，将其更改为：

```
$('#datetime-start, #datetime-end').mobiscroll().datetime({
    minDate: new Date(now.getFullYear(), now.getMonth(), now.getDate()),
    display: 'modal',
    animate: 'pop',
    mode: 'mixed',
    // 2013-03-15 11:26:17
    dateFormat: 'yy-mm-dd',
    timeFormat: 'HH:ii:ss',
    timeWheels: 'HHii'
}); 
```

所以改变这个：

```
timeWheels: 'hhii' 
```

对此：

```
timeWheels: 'HHii' 
```

# android - 从字符串将 AM/PM 设置为时间选择器对话框？

> ID：15432617
> 
> 赞同：2
> 
> 时间：2013-03-15T12:34:18.963
> 
> 标签：android, timepicker

我有一个 TextView，其中时间以格式显示`10:00 PM`当用户单击该视图时，必须将相同的时间设置为`TimePicker`对话框。我可以将`Hour`and设置`Minutes`为 Picker，但在`AM/PM`部分中。我总是`AM`知道用户是否设置`AM`或`PM`. 如何解决？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:43:13.760

我遇到了这种类型的类似问题。

可能是因为您可能已将`hour`元素设置为以下方式

```
hour = String.valueOf(cal.get(Calendar.HOUR)); 
```

尝试将其更改为

```
hour = String.valueOf(cal.get(Calendar.HOUR_OF_DAY)); 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:44:54.860

您首先以 24 小时格式将数据提供给时间选择器。稍后设置

```
public void setIs24HourView (false); 
```

那会为你做的..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T12:26:41.560

```
 //String selectedtime ="03:15 PM"

         //convert time 12 hrs to 24 hrs
        SimpleDateFormat displayFormat = new SimpleDateFormat("HH:mm");
           SimpleDateFormat parseFormat = new SimpleDateFormat("hh:mm a");
           Date date = null;
        try {
            date = parseFormat.parse(selectedtime);
              System.out.println(parseFormat.format(date) + " = " + displayFormat.format(date));
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        String twentyfourhrstime=displayFormat.format(date);

         //split hrs and min
        String[] parts111 = twentyfourhrstime.split(":");
        String part11 = parts111[0]; // 004
        String part22 = parts111[1];

        System.out.println("value11>>>>"+part11);
        System.out.println("value22>>>>"+part22);
        hour = Integer.parseInt(part11);
        min =Integer.parseInt(part22); 
```

并将小时和最小值设置为 timepicker..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:43:57.910

```
private Calendar calendar_date=null;
private TimePicker timePicker;

calendar_date = Calendar.getInstance();
timePicker= (TimePicker)dialog.findViewById(R.id.timePicker1);
timePicker.setOnTimeChangedListener(new OnTimeChangedListener() {
        @Override
        public void onTimeChanged(TimePicker picker, int hour, int minute) {
            calendar_date.set(datePicker.getYear(), datePicker.getMonth(), datePicker.getDayOfMonth(), hour, minute);
            Log.i("TIME", getHourIn12Format(hour)+":"+minute+" "+getAMPM(calendar_date));
        }
    });

private int getHourIn12Format(int hour24) {
    int hourIn12Format = 0;
    if(hour24==0)
        hourIn12Format = 12;
    else if(hour24<=12)
        hourIn12Format = hour24;
    else
        hourIn12Format = hour24-12;
    return hourIn12Format;
}

private String getAMPM(Calendar calendar) {
    return (calendar.get(Calendar.AM_PM)==(Calendar.AM))? "AM":"PM";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T12:46:15.677

试试这个，希望能解决你的问题

```
Date date = Calendar.getInstance().getTime();
SimpleDateFormat formatter = new SimpleDateFormat("MMM,dd,yyyy hh:mm a");
String mDay_time = formatter.format(date); 
```

更多[时间模式语法](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

# php - mail() php : 没有发件人工作，有发件人不工作

> ID：15432618
> 
> 赞同：0
> 
> 时间：2013-03-15T12:34:20.453
> 
> 标签：php, email, sender

我有一个联系表格，带有 mail() 功能。很长一段时间它工作正常。现在突然不行了。我已经检查过了，但一切都是正确的。但是，如果我删除 sender 参数，它会起作用，而使用 sender 参数它就不起作用：

```
mail($destinatario_1,$oggetto_1,$messaggio_1,''); 
```

作品

反而：

```
mail($destinatario_1,$oggetto_1,$messaggio_1,'From: "My Name" <thisisanexample@gmail.com> \r\n'); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:37:55.097

试试这个：

```
mail($destinatario_1, $oggetto_1, $messaggio_1, "From: My Name <thisisanexample@gmail.com>"); 
```

请注意，我留下的`\r\n`应该只是`\n`在大多数服务器上，并且必须用双引号而不是单引号，并且“我的名字”不应该用引号引起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:37:53.710

邮件服务器可以配置为在设置某些信息时不接受邮件。PHP`mail()`函数或多或少直接与本地邮件服务器对话并将邮件传递给它。邮件服务器是否接受它并不是通信的真正部分，并且无法被 PHP 脚本检测到。

请咨询您的网络托管公司，了解是否有任何限制。

# ios - contentsOfDirectoryAtPath 返回 null (iOS)

> ID：15432623
> 
> 赞同：1
> 
> 时间：2013-03-15T12:34:26.083
> 
> 标签：ios, objective-c, nsfilemanager

我无法显示目录中的所有文件。我确实在与所有应用程序文件相同的文件夹中创建了一个名为“saves”的目录。

我使用这段代码：

```
NSError *error = nil;
NSArray *imageFiles = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:@"saves" error: &error];

NSLog(@"FILES: %@", imageFiles); 
```

任何人都可以帮助我，因为这段代码记录了“null” - 所以假装文件夹中没有任何东西，但是在文件夹中我创建了一个目录和两个空文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T06:59:44.013

```
NSError *error = nil;
NSArray *imageFiles = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:@"saves" error:    &error];

Not sure what ypou expect this to do...
NSLog(@"FILES: %@", imageFiles);

try this
NSLog(@"Image file count %d", [imageFiles count]);

for ( int i - 0; i <= [imageFiles count] - 1; i++)
{
  NSLog(@"file name : %@", [imageFiles objectAtIndex:i]);
} 
```

代码未经测试，但我想你明白了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:39:21.187

```
NSString *documentDirPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 
```

检查测试目录中的文件：

```
 NSArray *filePaths = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[documentDirPath stringByAppendingPathComponent:@"test"] error:nil]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:09:31.137

在我看来，您正在尝试将文件保存在主包中。您是在模拟器上还是在实际设备上执行此操作？您无法将文件保存在设备上的主包中。

# javascript - JS/Jquery - 在 json 选择器中使用变量

> ID：15432627
> 
> 赞同：1
> 
> 时间：2013-03-15T12:34:45.073
> 
> 标签：javascript, jquery, json

从这样的 json 源中选择数据时，我需要使用变量。使用 jquery 检索 json `getJSON()`。

```
"prices":[{
    "fanta":10,
    "sprite":20,
}]

var beverage = fanta;
var beverage_price = data.prices.beverage; 
```

现在`beverage_price = 10`

```
var beverage = sprite;
var beverage_price = data.prices.beverage; 
```

现在`beverage_price = 20`

当我尝试像示例中那样做时，脚本会尝试在价格中查找饮料条目。

非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:44:30.217

您可以像这样访问它：

```
var beverage = 'fanta';
var beverage_price = data.prices[0][beverage]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:05:49.980

正如评论中提到的[VisioN](https://stackoverflow.com/users/1249581/vision)`data.prices`是一个数组，您需要访问它的第一个元素，`[0]`其中包含价格`{ "fanta":10, "sprite":20}`

这是工作示例：http: [//jsfiddle.net/2E8AH/](http://jsfiddle.net/2E8AH/)

否则，您可以制作`data.prices`如下对象：（如果它在您的控制范围内）

```
var data = {
    "prices" : 
        {
            "fanta":10,
            "sprite":20,
        }
}; 
```

并且可以在没有`[0]`这样的情况下访问：http: [//jsfiddle.net/Y8KtT/1/](http://jsfiddle.net/Y8KtT/1/)

# android - 无法在屏幕方向上显示全部项目

> ID：15432628
> 
> 赞同：1
> 
> 时间：2013-03-15T12:34:46.240
> 
> 标签：android, orientation

我为该应用程序设计了一个屏幕。

这是我的xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bghomescreen" >

    <TableLayout
        android:id="@+id/tlmaintable"
        android:layout_width="match_parent"
        android:layout_height="304dp"
        android:layout_marginTop="100dp" 
        android:orientation="vertical">

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="60dp" >

        <Button
        android:id="@+id/btnsearchbylocation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:background="@drawable/btn_bg_location" />

         <Button
        android:id="@+id/btnsearchbycuisine"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:background="@drawable/btn_bg_cuisine1" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:layout_marginTop="80dp">

        <Button
        android:id="@+id/btnquickbite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:layout_marginLeft="10dp"
        android:background="@drawable/btn_bg_quickbite" />

         <Button
        android:id="@+id/btnadvancesearch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:layout_marginLeft="10dp"
        android:background="@drawable/btn_bg_cuisine"/>    
        </TableRow>

    </TableLayout>

</LinearLayout> 
```

当我运行我的应用程序时，我可以在横向模式下看到所有项目，但是当我将其转换为纵向模式时，我只能看到表格视图的第一行。我无法看到其他人。

我正在使用尺寸为 480x800 的屏幕。

有人可以帮帮我吗。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:38:15.930

尝试添加：

```
android:orientation="vertical" 
```

在线性布局中：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/bghomescreen" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:39:03.350

最好的方法是为您的屏幕创建一个单独的横向布局..这将为您解决问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:43:22.207

为横向和纵向创建单独的布局。
对于横向，您可以在`layout-land`文件夹中写入 xml，对于垂直写入相同的 xml，根据纵向视图在`layout-port`文件夹中具有相同的名称。
当您更改方向时，布局将自动调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T13:08:56.447

我不知道为什么这不起作用我还计算了高度和边距等等，但我也想知道为什么它会这样

但是我在 Eclipse 中尝试了您的代码，并找到了一种替代方法，如果对您有帮助，请尝试此方法

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:gravity="center">

    <TableLayout
        android:id="@+id/tlmaintable"
        android:layout_width="match_parent"
        android:layout_height="304dp"
        android:orientation="vertical" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="60dp" >

            <Button
                android:id="@+id/btnsearchbylocation"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp" />

            <Button
                android:id="@+id/btnsearchbycuisine"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="80dp" >

            <Button
                android:id="@+id/btnquickbite"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp" />

            <Button
                android:id="@+id/btnadvancesearch"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp" />
        </TableRow>
    </TableLayout>

</RelativeLayout> 
```

# javascript - 删除级联 JayData

> ID：15432634
> 
> 赞同：0
> 
> 时间：2013-03-15T12:35:11.247
> 
> 标签：javascript, sqlite, web-sql, jaydata

在我之前的问题之后[，](https://stackoverflow.com/questions/15388657/basic-data-storage-with-jaydata)`ON DELETE CASCADE`有没有办法与 JayData 具有与（MySQL）相同的行为？

如果我删除一个测试，我希望删除所有链接的章节和检查。我试过这段代码：

```
myDB.onReady(function(){
    myDB.Tests.filter(function(test) { return test.Name == this.Name; }, {Name: myTest.Name}).forEach(function(test){
        console.log('Starting to remove '+test.Name);
        myDB.Tests.remove(test);
        myDB.saveChanges(function() {
            console.log(test.Name+' removed');
        });
    });
}); 
```

但它不会删除孩子。它可以与上下文的声明联系起来`Chapters`吗`Checks`？JayData 可能不将他们视为孩子，而是将其视为独立实体。

我还在某处看到使用 SQLite 进行级联操作需要一些配置。我猜 JayData 会处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:51:46.740

JayData 中没有这样的功能。WebSQL/sqlite 内置了这个函数，但 indexedDb 没有。我们可以在 indexedDb 中实现它，但没有人要求它。如果您需要它，请将其添加到我们的待办事项或在 github 上创建问题。

# sql-server - SQL Server hierarchyid - 在两个现有兄弟节点之间插入新节点

> ID：15432635
> 
> 赞同：1
> 
> 时间：2013-03-15T12:35:11.907
> 
> 标签：sql-server, tsql, sql-server-2008-r2, hierarchy

假设我在 SQL Server (2008 R2) 中有一个[hierarchyid](http://technet.microsoft.com/en-us/library/bb677173%28v=sql.105%29.aspx)列。假设我的表中已经有以下节点：

```
/1/
/1/1/
/1/2/ 
```

我想创建一个插入语句，在“/1/1/”和“/1/2/”之间插入，创建节点“/1/1.1/”。但是，我不想硬编码'/1/1.1/'。我想基于知道'/1/1/'和'/1/2/'的插入语句。这将是一个存储过程，因此如果在插入语句之前需要一些 T-SQL 是可以的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:43:19.197

弄清楚了。原来答案在于 GetDescendant 方法。在父 '/1/' 上调用它，传递 '/1/1/' 和 '/1/2/' 作为参数，返回 '/1/1.1/'。

# windows-phone-7 - 在 Windows Phone 7.1 / 可移植类库中使用 System.Lazy

> ID：15432636
> 
> 赞同：2
> 
> 时间：2013-03-15T12:35:12.653
> 
> 标签：windows-phone-7, windows-phone-8, portable-class-library

我有一个 Windows Phone 7.1 项目，其中包含针对 SL4、.Net4.5、WP7.5、商店应用程序的便携式类库，但这不可用：http: [//msdn.microsoft.com/en-us/library/ dd642331.aspx](http://msdn.microsoft.com/en-us/library/dd642331.aspx)

它说它应该在.Net 4.5中可用。当然我可以自己编程，但我更喜欢使用框架提供的功能。

如果我更改为 Windows Phone 8（并删除 SL4），它是可用的。有什么技巧可以让它针对 WP7.5 / SL4 工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:52:46.767

您需要自己为 WP7.5 和 SL4 实现它。但是，您可以使其在已经支持它的平台（即 .NET 4.5、WP8 等）上使用内置版本（因此您可以与使用“官方”版本的其他库共享它.

基本上，将您的实现创建为针对您想要的所有平台的 PCL。然后针对支持 System.Lazy 的平台创建另一个 PCL。第二个库应该与第一个库具有完全相同的程序集标识，但它应该使用 TypeForwardedToAttribute 转发到该类型的现有版本，而不是类型的实现。

然后，针对更广泛平台的 PCL 可以使用您创建的第一个程序集，而针对特定平台的项目或针对更窄平台的 PCL 可以引用第二个程序集。通过将它们打包到 NuGet 包中，您可以轻松地从正确的项目中引用正确版本的程序集。

# prestashop - 通过插件在“我的个人信息”页面显示自定义文本

> ID：15432646
> 
> 赞同：0
> 
> 时间：2013-03-15T12:35:34.363
> 
> 标签：prestashop

我想使用 Prestashop 中的插件在客户帐户的“我的个人信息”页面上显示一些自定义文本。我不知道该怎么做？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:38:50.280

不可能通过插件或模块来做到这一点，因为 prestashop 没有为该页面/位置提供任何 HOOK。但是你可以通过一些工作来做到这一点。我正在考虑您正在使用 prestashop 1.5 ，所以让我们使用它。

1）首先在管理员创建一个cms页面并记下它的id。让我们考虑它的 id 是 10。 2) 现在打开文件**override/controllers/front/IdentityController.php**。在这个类文件中创建一个如下所示的函数。

```
public function initContent()
{
    parent::initContent();
    $identityCmsPage = new CMS(10, $this->context->language->id_lang);
    $this->context->smarty->assign('identityCmsPage', $identityCmsPage);

} 
```

之后，在您的主题文件夹**主题/您的主题/indentity.tpl中打开文件**

并显示该 cms 页面内容，例如

```
{$identityCmsPage->content} 
```

您将在那里拥有该 cms 页面内容。

**注意：此代码未经测试，可能有错误。如果有，请相应调整。**

# excel - wraptext 给定单元格中的超链接

> ID：15432650
> 
> 赞同：2
> 
> 时间：2013-03-15T12:35:41.767
> 
> 标签：excel, vba

我正在尝试将文本包装在超链接单元格中，但无法使其正常工作。我收到“对象不支持此属性”错误。我意识到格式不正确，但找不到正确的语法。如果您有指向网站或建议的链接，我们将不胜感激。谢谢！

```
With wbk.Sheets(1)
Set rngResults = .Range("A" & .Rows.Count).End(xlUp).Offset(1, 0)
    bingo = fld.Path & "\" & fl.Name
    ActiveSheet.Hyperlinks.Add Anchor:=rngResults, Address:=bingo, SubAddress:=aCell.Address, TextToDisplay:=strJackpot
    .WrapText = True
End With 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:08:30.153

`WrapText`与范围一起使用，而不是超链接或工作表，因此您需要完全限定它。

将行更改`.WrapText = True`为以下内容以使其工作：

```
rngResults.WrapText = True 
```

# jquery - 当我尝试使用 jquery 添加样式时出错

> ID：15432652
> 
> 赞同：0
> 
> 时间：2013-03-15T12:35:50.127
> 
> 标签：jquery

我收到此错误：

> Uncaught SyntaxError: Unexpected token ILLEGAL

当我运行此代码时：

```
$('.field table[border!="0"] td').css({
border: 1px solid black,
color: red
}); 
```

我看不出错误是什么。

更新：

```
$('.field table[border!="0"] td').css({
border-width: '1px',
border-style: 'solid'
}); 
```

错误是：

> Uncaught SyntaxError: Unexpected token -

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:37:32.983

将值括在引号中

```
$('.field table[border!="0"] td').css({
'border': '1px solid black',
'color': 'red'
}); 
```

# python - 如何重新排列 python pandas 数据框？

> ID：15432659
> 
> 赞同：13
> 
> 时间：2013-03-15T12:36:02.737
> 
> 标签：python, row, pandas, sequence, dataframe

我从 .csv 文件中读取了以下数据框，其中“日期”列是索引。日期在行中，列显示当天小时的值。

```
> Date           h1 h2  h3  h4 ... h24
> 14.03.2013    60  50  52  49 ... 73 
```

我想像这样安排它，以便有一个带有日期/时间的索引列和一个带有序列值的列

```
>Date/Time            Value
>14.03.2013 00:00:00  60
>14.03.2013 01:00:00  50
>14.03.2013 02:00:00  52
>14.03.2013 03:00:00  49
>.
>.
>.
>14.03.2013 23:00:00  73 
```

我正在尝试使用两个循环来遍历数据框。在熊猫中有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T13:13:10.457

我不是最擅长日期操作，但可能是这样的：

```
import pandas as pd
from datetime import timedelta

df = pd.read_csv("hourmelt.csv", sep=r"\s+")

df = pd.melt(df, id_vars=["Date"])
df = df.rename(columns={'variable': 'hour'})
df['hour'] = df['hour'].apply(lambda x: int(x.lstrip('h'))-1)

combined = df.apply(lambda x: 
                    pd.to_datetime(x['Date'], dayfirst=True) + 
                    timedelta(hours=int(x['hour'])), axis=1)

df['Date'] = combined
del df['hour']

df = df.sort("Date") 
```

* * *

一些解释如下。

从...开始

```
>>> import pandas as pd
>>> from datetime import datetime, timedelta
>>> 
>>> df = pd.read_csv("hourmelt.csv", sep=r"\s+")
>>> df
         Date  h1  h2  h3  h4  h24
0  14.03.2013  60  50  52  49   73
1  14.04.2013   5   6   7   8    9 
```

我们可以使用`pd.melt`将小时列变成具有该值的一列：

```
>>> df = pd.melt(df, id_vars=["Date"])
>>> df = df.rename(columns={'variable': 'hour'})
>>> df
         Date hour  value
0  14.03.2013   h1     60
1  14.04.2013   h1      5
2  14.03.2013   h2     50
3  14.04.2013   h2      6
4  14.03.2013   h3     52
5  14.04.2013   h3      7
6  14.03.2013   h4     49
7  14.04.2013   h4      8
8  14.03.2013  h24     73
9  14.04.2013  h24      9 
```

摆脱那些`h`s：

```
>>> df['hour'] = df['hour'].apply(lambda x: int(x.lstrip('h'))-1)
>>> df
         Date  hour  value
0  14.03.2013     0     60
1  14.04.2013     0      5
2  14.03.2013     1     50
3  14.04.2013     1      6
4  14.03.2013     2     52
5  14.04.2013     2      7
6  14.03.2013     3     49
7  14.04.2013     3      8
8  14.03.2013    23     73
9  14.04.2013    23      9 
```

将两列合并为日期：

```
>>> combined = df.apply(lambda x: pd.to_datetime(x['Date'], dayfirst=True) + timedelta(hours=int(x['hour'])), axis=1)
>>> combined
0    2013-03-14 00:00:00
1    2013-04-14 00:00:00
2    2013-03-14 01:00:00
3    2013-04-14 01:00:00
4    2013-03-14 02:00:00
5    2013-04-14 02:00:00
6    2013-03-14 03:00:00
7    2013-04-14 03:00:00
8    2013-03-14 23:00:00
9    2013-04-14 23:00:00 
```

重新组装和清理：

```
>>> df['Date'] = combined
>>> del df['hour']
>>> df = df.sort("Date")
>>> df
                 Date  value
0 2013-03-14 00:00:00     60
2 2013-03-14 01:00:00     50
4 2013-03-14 02:00:00     52
6 2013-03-14 03:00:00     49
8 2013-03-14 23:00:00     73
1 2013-04-14 00:00:00      5
3 2013-04-14 01:00:00      6
5 2013-04-14 02:00:00      7
7 2013-04-14 03:00:00      8
9 2013-04-14 23:00:00      9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:29:03.637

您总是可以抓取每小时的 data_array 并将其展平。您将使用每小时频率生成一个新的 DatetimeIndex。

```
df = df.asfreq('D')
hourly_data = df.values[:, :]
new_ind = pd.date_range(start=df.index[0], freq="H", periods=len(df) * 24)
# create Series.
s = pd.Series(hourly_data.flatten(), index=new_ind) 
```

我假设 read_csv 正在解析“日期”列并使其成为索引。我们更改为“D”的频率，以便在`new_ind`您缺少天数时正确排列。缺失的日子将被填满`np.nan`，您可以用`s.dropna()`.

[笔记本链接](http://nbviewer.ipython.org/5183385)

# jquery - 如何使用 jQuery 找到最近元素的属性？

> ID：15432661
> 
> 赞同：1
> 
> 时间：2013-03-15T12:36:17.020
> 
> 标签：jquery, dom, jquery-selectors, tree-traversal

我有以下标记：

```
<div class="span6">
             <form> 
                <fieldset>
                    <label>Name:</label>
                    <input type="text" class="success field span6" placeholder="Name" name="name" id="name"> <i id="name" class="check"></i>
                    <label>Email:</label>
                    <input type="text" class="field span6" placeholder="Email" name="email" id="email" > <i id="email" class="check"></i>
                    <label>Message:</label>
                    <i id="message" class="check"></i><textarea class="field span9" rows="8" placeholder="Message" name="message" id="message"></textarea>
                    <label class="checkbox">
                    </label>
                    <button type="submit" class="btn disabled">Send Message</button>
                </fieldset>
            </form>
        </div>
    </div> 
```

以及以下 jQuery：

```
 $('input,textarea').keyup(function(){
       console.log($(this).closest(".check").attr("id"));
    }); 
```

我返回的值是未定义的。当标签在输入之前或之后（即，如果所有标签都在我将使用 $().next() 之后），我如何找到类 '.check' 的元素的 id 属性的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:38:52.157

尝试

```
var check = $(this).next(".check");
if(!check.length){
    check = $(this).prev(".check");
}
console.log(check .attr("id")); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/hpSC2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:37:38.563

使用`next`if 输入和`prev`if textarea....；试试这个

```
var checkID='';
 $('input,textarea').keyup(function(){
   if($(this).is("input")){
     checkID=$(this).next(".check").attr("id");
   }else{
     checkID=$(this).prev(".check").attr("id");
   }
      console.log(checkID);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T13:10:38.760

首先你的 html 不正确，记住属性 ID 必须是唯一的。

然后，你可以去父级（即表单标签）找到你想要的子级，像这样：

```
$('input,textarea').keyup(function(){
   console.log($(this).parents("form").find(".check").attr("id"));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:38:03.150

试试这个

```
$('input,textarea').keyup(function(){
       console.log($(this).find().closest(".check").attr("id"));
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T12:41:45.933

您使用最接近（）错误。Closest 获取最近的父级。最好的方法是回到它的父母那里去取孩子。Find 和 first 在这种情况下都可以使用

```
console.log($(this).parent().first(".check").attr("id")); 
```

# ruby - 如何检查（是否在单击下拉列表后），下拉列表是使用 Selenium Webdriver 和 Ruby 填充的

> ID：15432668
> 
> 赞同：0
> 
> 时间：2013-03-15T12:36:46.253
> 
> 标签：ruby, selenium-webdriver

我想检查单击下拉菜单是否会填充下拉菜单。以下是我的网页代码 -

```
<div class="selectWrapper">
 <div class="mask"></div>
   <select selected="15" name="timezone_id">
     <option -1100="" value="67">Samoa Standard Time (GMT-11)</option>
     .
     .
     .
     . 
```

通过以下代码，单击下拉菜单并获得所有选项-

```
driver.find_element(:name, "timezone_id").click (actually we need not to click to get     all options)
options = time_zone.find_elements(:tag_name => "option")

timezone_options = options.map do |option|
  option.text
end 
```

但是我们如何确保下拉列表是否被填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:21:44.817

AFAIK，我认为您唯一可以检查的是通过在选项元素上使用 getAttribute 来检查导致某些元素在下拉列表中不可见的属性。因此，例如，如果您为某个元素标记了 display:none，则检查每个元素的该属性。

# javascript - Firebug 以红色显示 HTTP 302 错误（apache 错误日志中没有错误）

> ID：15432669
> 
> 赞同：0
> 
> 时间：2013-03-15T12:36:46.340
> 
> 标签：javascript, iphone, firebug, http-status-code-302, http-error

我在移动版网站上遇到问题，我`302 Found`在 Firefox 上的 Firebug 中收到一条 HTTP 消息，但该消息是红色的。我正在欺骗 Firefox 来切换用户代理字符串以模仿 iPhone，这让我可以在桌面上调试移动网站。

问题是我不明白为什么我的请求会得到一个空白响应，*特别是*当我在 Apache 错误日志中没有收到任何错误时。

对于这个问题，我应该把注意力集中在哪里？我在共享后端功能的桌面网站上没有这个问题——它只发生在移动设备上。

我在控制台中也没有收到任何 JavaScript 错误。

![302 萤火虫](../Images/a7c9433845a2a61385d3a31ad7c52496.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:08:16.753

状态码 302 表示浏览器应该打开不同的 URL。查看标题，然后您会看到“位置：”旁边的 URL。也许那个 URL 有问题。

桌面版本不会发生这种情况的原因可能是不需要重定向（只有移动站点位于不同的 URL），或者只有移动版本的重定向是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T13:46:48.930

我相信这个错误/警告是由交叉协议（HTTP-> HTTPS）的混合引起的，而且 Firefox 的 Firebug 插件将这种情况显示为红色（让你相信发生了错误）。

我的调查使我相信在以这种方式跨协议时使用 JSONP 而不是 JSON 会有所帮助。

# sql-server - 获取 SQL 中两个日期之间的周末数

> ID：15432675
> 
> 赞同：3
> 
> 时间：2013-03-15T12:36:54.857
> 
> 标签：sql-server, sql-server-2005

我需要将 sql 中日期之间的周末数作为函数获取。我已经尝试过，但在逻辑的某个地方卡住了。

```
CREATE FUNCTION fnc_NumberOfWeekEnds(@dFrom DATETIME, @dTo   DATETIME)

RETURNS INT AS

BEGIN

   Declare @weekends int

   Set @weekends = 0

   While @dFrom <= @dTo Begin

      If ((datepart(dw, @dFrom) = 1))    

                  Set @weekends = @weekends + 1

                  Set @dFrom = DateAdd(d, 1, @dFrom)

   End

   Return (@weekends)

END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:21:05.937

我用几个边缘案例尝试了这个逻辑，它似乎有效。

```
SELECT DATEDIFF(d, @dFrom, @dTo)/7+1
    + CASE WHEN DATEPART(dw,@dFrom) IN (1,7) THEN -1 ELSE 0 END
    + CASE WHEN DATEPART(dw,@dTo) IN (1,7) THEN -1 ELSE 0 END 
```

您可以根据要如何处理开始或结束日期在周末的情况来更改 CASE 语句。就我而言，如果开始或结束日期是星期六或星期日，我不包括周末。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:32:21.180

尝试用这个替换 if 语句：

```
If ((datepart(dw, @dFrom) = 1) OR (datepart(dw, @dFrom) = 7)) 
```

您还应该检查周末以获得结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-20T10:14:23.457

```
DECLARE @date_from DATETIME,
@date_to DATETIME

/*TEMPORARY TABLE*/
DECLARE @DATES AS TABLE (
GDate DATETIME
)
SELECT @date_from ='2019-09-10'
SELECT @date_to ='2019-10-10'

/*DATE GENERATED*/
WITH dates
AS (
SELECT @date_from AS dt

UNION ALL

SELECT DATEADD(D, 1, dt)
FROM dates
WHERE dt < @date_to
)

/*INSERTED DATES INTO TEMP TABLE */
INSERT INTO @DATES
SELECT CONVERT(DATETIME, dt) AS Gdate FROM dates

/*Get Records from temp table*/
SELECT Gdate FROM @DATES 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-10T11:36:11.617

使用下面的逻辑来计算开始日期和结束日期之间的星期六或星期日的数量。

```
CREATE FUNCTION dbo.WEEKEND_COUNT
(
@Start_Date datetime,
@End_Date datetime
)
RETURNS int   
AS   
BEGIN
    Declare @count int = 0;
    while @Start_Date<=@End_Date
        Begin
        IF DatePart(WEEKDAY,@Start_Date) =  1 or DatePart(WEEKDAY,@Start_Date) =  7
        SET @count=@count+1
        SET @Start_Date=DateAdd(d,1,@Start_Date)
        END

return @count 
END 
```

--使用下面来计算周六和周日的数量

```
Select dbo.WEEKEND_COUNT('Your start date','your end date') 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-15T14:01:31.357

这将为您提供两个日期之间的星期日数

```
SELECT DateDiff(ww, @dFrom, @dTo) as NumOfSundays 
```

# html - 做一个必须定义类型？

> ID：15432682
> 
> 赞同：0
> 
> 时间：2013-03-15T12:37:16.173
> 
> 标签：html, button, semantics

使用按钮标签时，是否必须定义 type 属性，还是仅具有语义？

```
<button>Click Me</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:38:06.850

不，您不必指定它，它默认为 value `submit`。

请参阅[HTML 4.x 规范](http://www.w3.org/TR/html4/interact/forms.html#h-17.5)：

```
type        (button|submit|reset) submit -- for use as form button --
                                  ^^^^^^ default value 
```

与显示 #REQUIRED 而不是给出默认值的表单的 action 属性进行比较。

```
action      %URI;          #REQUIRED -- server-side form handler -- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:05:05.460

正如@Quentin 的回答所解释的，该`type`属性不是必需的，默认为`submit`. HTML5 对此没有任何改变。但是，情况稍微复杂一些。

如果元素出现在任何`form`元素之外，上述仍然适用，但没有要提交的表单。HTML5 通过描述功能来澄清这一点，以便清楚地表明，如果没有“表单所有者”（封闭`form`元素或与具有 HTML5 属性的`form`元素显式关联的`button`元素），则没有任何动作——除非使用脚本编程， 当然。

实际上，这意味着在`form`元素之外，`button`元素默认为`type=button`功能性的。这意味着如果一个默认的`button`元素`type`改变了它的上下文（例如，被包裹在一个`form`元素中），它的功能也会改变。因此，为了清楚和安全起见，最好明确指定`type`属性，例如`<button type=button>`or `<button type=submit>`。

# java - izpack & launch4j：卸载程序无效

> ID：15432685
> 
> 赞同：1
> 
> 时间：2013-03-15T12:37:28.857
> 
> 标签：java, maven, izpack, launch4j

将我的 izpack 安装程序包装在 launch4j 生成的 EXE 中时，除了卸载程序信息之外，一切正常。使用 JAR 安装程序，只要我在安装程序中点击“退出”，“uninstaller.jar”就会被填充，在窗口实际关闭之前需要几秒钟。但是，当使用打包的 EXE 安装程序时，窗口会立即关闭，并且“uninstaller.jar”文件仍为 2KB 大小且无效。

有没有人有这方面的经验？感谢您的建议和问候

帕斯卡

PS：这是我的完整 POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>ch.diction</groupId>
    <artifactId>dataexchange-viewer</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>Diction data exchange viewer</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <java.version>1.7</java.version>
        <java.minimum_version>1.7.0</java.minimum_version>
        <swixml.version>2.5.20110919</swixml.version>
        <swingx.version>1.6.1</swingx.version>
        <izpack.plugin.version>5.0.0-beta11</izpack.plugin.version>
        <izpack.compiler.version>5.0.0-beta11</izpack.compiler.version>
    </properties>

    <build>
        <sourceDirectory>src/main/java</sourceDirectory>
        <testSourceDirectory>src/test/java</testSourceDirectory>
        <outputDirectory>target/main</outputDirectory>
        <testOutputDirectory>target/test</testOutputDirectory>
        <resources>
            <resource>
                <targetPath>ch/diction/dataexchange/viewer/resources</targetPath>
                <directory>src/main/resources</directory>
                <excludes>
                    <exclude>izpack/*</exclude>
                </excludes>
            </resource>
        </resources>
        <testResources>
            <testResource>
                <targetPath>ch/diction/dataexchange/viewer/resources</targetPath>
                <directory>src/test/resources</directory>
            </testResource>
        </testResources>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>ch.diction.dataexchange.viewer.system.Runner</mainClass>
                        </manifest>
                    </archive>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.bluestemsoftware.open.maven.plugin</groupId>
                <artifactId>launch4j-plugin</artifactId>
                <version>1.5.0.0</version>
                <executions>
                    <execution>
                        <id>l4j-gui</id>
                        <phase>package</phase>
                        <goals>
                            <goal>launch4j</goal>
                        </goals>
                        <configuration>
                            <headerType>gui</headerType>
                            <outfile>target/${project.artifactId}.exe</outfile>
                            <jar>target/${project.artifactId}-${project.version}-jar-with-dependencies.jar</jar>
                            <classPath>
                                <mainClass>ch.diction.dataexchange.viewer.system.Runner</mainClass>
                            </classPath>
                            <icon>src/main/resources/img/diction-favicon.ico</icon>
                            <jre>
                                <minVersion>${java.minimum_version}</minVersion>
                            </jre>
                        </configuration>
                    </execution>
                    <execution>
                        <id>l4j-installer</id>
                        <phase>install</phase>
                        <goals>
                            <goal>launch4j</goal>
                        </goals>
                        <configuration>
                            <headerType>gui</headerType>
                            <outfile>target/${project.artifactId}-setup.exe</outfile>
                            <jar>target/${project.artifactId}-${project.version}.jar</jar>
                            <classPath>
                                <mainClass>com.izforge.izpack.installer.bootstrap.Installer</mainClass>
                            </classPath>
                            <icon>src/main/resources/img/diction-favicon.ico</icon>
                            <jre>
                                <minVersion>${java.minimum_version}</minVersion>
                            </jre>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.izpack</groupId>
                <artifactId>izpack-maven-plugin</artifactId>
                <version>${izpack.plugin.version}</version>
                <configuration>
                    <baseDir>target</baseDir>
                    <installFile>src/main/resources/izpack/install.xml</installFile>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>izpack</goal>
                        </goals>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>org.codehaus.izpack</groupId>
                        <artifactId>izpack-compiler</artifactId>
                        <version>${izpack.compiler.version}</version>
                    </dependency>
                </dependencies>
            </plugin>
        </plugins>
    </build>

    <repositories>
        <repository>
            <id>google-swixml2</id>
            <url>http://swixml2.googlecode.com/svn/mavenrepo</url>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>ch.diction</groupId>
            <artifactId>dataexchange-base</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>org.swixml</groupId>
            <artifactId>swixml</artifactId>
            <version>${swixml.version}</version>
        </dependency>
        <dependency>
            <groupId>org.swinglabs</groupId>
            <artifactId>swingx</artifactId>
            <version>${swingx.version}</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.izpack</groupId>
            <artifactId>izpack-compiler</artifactId>
            <version>${izpack.compiler.version}</version>
            <type>pom</type>
        </dependency>
    </dependencies>
</project> 
```

还有我的 izpack install.xml：

```
<izpack:installation version="5.0" xmlns:izpack="http://izpack.org/schema/installation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://izpack.org/schema/installation http://izpack.org/schema/5.0/izpack-installation-5.0.xsd">
    <info>
        <appname>Diction Data Exchange Viewer</appname>
        <appversion>0.0.1</appversion>
        <appsubpath>Diction/data-exchange-viewer</appsubpath>
        <javaversion>1.7</javaversion>
    </info>

    <guiprefs width="800" height="600" resizable="no">
        <modifier key="useHeadingPanel" value="yes" />
        <splash>../src/main/resources/izpack/diction_logo_rgb.jpg</splash>
    </guiprefs>

    <locale>
        <langpack iso3="eng" />
    </locale>

    <resources>
        <res src="../src/main/resources/izpack/registry-spec.xml" id="RegistrySpec.xml" />
    </resources>

    <listeners>
        <listener classname="RegistryInstallerListener" stage="install" />
        <listener classname="RegistryUninstallerListener" stage="uninstall" />
    </listeners>

    <panels>
        <panel classname="TargetPanel" />
        <panel classname="InstallPanel" />
    </panels>

    <packs>
        <pack name="Diction Data Exchange" required="yes">
            <description>Diction Data Exchange</description>
            <file src="dataexchange-viewer.exe" targetdir="$INSTALL_PATH" override="true" />
        </pack>
    </packs>

    <natives>
        <native name="COIOSHelper.dll" type="3rdparty" stage="both" />
    </natives>

</izpack:installation> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T12:35:01.947

我使用 izpack 5.0.0-rc1 创建了一个工作卸载程序。所以这个错误现在在 izPack 中得到了修复。

# linux - Shell - 抑制单个命令的输出

> ID：15432689
> 
> 赞同：9
> 
> 时间：2013-03-15T12:37:37.143
> 
> 标签：linux, shell, makefile

我有一个`rm *.o`命令`Makefile`来删除编译期间生成的所有目标文件。`.o`但是，如果某些文件不存在，则会输出一些错误信息。那么如何抑制错误信息输出呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T12:48:17.893

在 的上下文中`make`，比输出更重要的是，您不希望将结果`rm`视为失败。有两种方法可以处理它：

```
clean:
    -rm *.o    2> /dev/null
    rm -f *.o  2> /dev/null 
```

第一种方法是在命令前面加上减号，这`make`表示忽略返回码。这是首选的`make`特定方式。第二种是使用`-f`标志，它只特定于`rm`.

最重要的是，您可以选择是否抑制输出`2> /dev/null`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T12:40:25.767

在极少数情况下，可能还需要将输出重定向到`/dev/null`. 你可能想要做`rm *.o > /dev/null 2>&1`. 该`> /dev/null`部分将 stdout 发送到`/dev/null`，并`2>&1`表示将 stderr 发送到 stdout 要去的任何地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T12:39:41.590

`rm -f *.o`

或者

`rm *.o >& /dev/null`

# css - 聊天的 CSS 溢出值

> ID：15432691
> 
> 赞同：2
> 
> 时间：2013-03-15T12:37:40.283
> 
> 标签：css, overflow

我构建了一个聊天应用程序，但我认为溢出属性存在问题。我希望当用户连接到聊天时向他显示最后一条消息，而无需他向下滚动到最后一条消息。当用户通过以下方式连接聊天时默认它显示第一条消息，用户必须向下滚动。我的CSS是：

```
.chat{
  height: 175px;
  width: 488px;
  margin: 0 auto;
  background-color: #000;
  padding: 20px 40px;
  border: solid 1px black;
  overflow: auto;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T12:42:17.583

你不能纯粹用css来做这件事，你需要使用javascript。

```
var chatDiv = document.getElementsByClassName('chat')[0]; //I assume you only have one chat box!
chatDiv.scrollTop = chatDiv.scrollHeight; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T12:39:42.087

默认`overflow`情况下发生在右侧或底部。为此，您必须使用其他一些技术。

一种是：使用包装器并将您的聊天消息绝对放置在底部：

```
<div id="wrapper">
    <div id="chat"></div>
</div> 
```

使用CSS：

```
#wrapper{
    position: relative;
    height: 175px;
    width: 488px;
    overflow: hidden;
}

#chat{
    position: absolute;
    bottom: 0;
} 
```

# asp.net - 如何将自定义设置的两个部分添加到 app.config 并将它们读入 asp.net 中的类？

> ID：15432697
> 
> 赞同：0
> 
> 时间：2013-03-15T12:37:52.103
> 
> 标签：asp.net, vb.net, app-config, custom-sections

我需要在 app.config 中存储 2 个设置部分，并根据初始化类时传递的值，我将加载其中一个设置部分。

这是我理想中需要实现的目标：

**班级**

```
Public Class SiteSettings

    Sub New(ByVal Id As Integer)
            If Id = 1 Then
                'Load in group1 settings.
                'Ideally the settings will be available as properties
            Else
                'Load in group2 settings
            End If
    End Sub
    ...
End Class 
```

**代码**

```
Dim objSettings = New SiteSettings(Id)

'just to demo what I'm trying to achieve
response.Write(objSettings.setting1) 
```

**应用程序配置**

```
<siteSettings>
    <section name="group1">
        <setting1 value="abc" />
    </section>
    <section name="group2">
        <setting1 value="xyz" />
    </section>
</siteSettings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:52:33.357

在您自己的设置中阅读应该不难。有很多代码用于阅读自定义配置设置 - 只需查看此页面上“相关”下的链接即可。如果您的设置对象是可序列化的，您可以使用自定义设置支持从 app.config 检索实例。

如果您想实例化一个对象并将所有设置读取逻辑封装在构造函数中，您可能必须为您的实际自定义配置设置编写一个包装器，如下所示：

```
public interface ISettings
{
     int Setting1 { get; set; }
}

[Serializable]
public class ActualSettings : ISettings
{
    public int Setting1 { get;set;}
}

public class SettingsAdapter : ISettings
{
    private ISettings settings;
    public SettingsAdapter(int id)
    {
        if(id == 1)
            settings = // code to retrieve instance #1 from app.config
        else
            settings = // code to retrieve instance #2 from app.config
    }

    public int Setting1 { 
       get { return settings.Setting1; }
       set { settings.Setting1 = value; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:35:16.000

这可能超出了 app.config 文件所支持的范围。但是，您当然可以在应用程序目录中包含您自己的 xml 文件，并使用 XPath 对其进行解析，以按照您的描述加载您的设置。

# jakarta-ee - Java EE NamedQuery 和 JOIN 语句 - 导致 EJB 异常

> ID：15432702
> 
> 赞同：2
> 
> 时间：2013-03-15T12:38:05.990
> 
> 标签：jakarta-ee, exception, ejb, named-query

我有一个名为很多的实体，如下所示：

```
public class Lots implements Serializable {

private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private int lotId;

@ManyToOne
private Boats boats;

private int numCrates;

.... 
```

我还有一个名为 Boats 的实体：

```
public class Boats implements Serializable {

private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private int boatId;

@ManyToOne
private Users user;

private String name; 
```

我正在尝试在很多上创建一个命名查询，如下所示：

```
@NamedQueries({
@NamedQuery(name = "FindUsersByLot", query = "SELECT b FROM Lots b JOIN Boats a ON     (b.boats.boatId = a.boatId) WHERE a.user = :user")    
}) 
```

但这会导致 EJB 异常。

如何在命名查询中进行 JOIN？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T13:07:16.667

首先，当您询问为什么会出现异常时，请发布堆栈跟踪。但是，我认为问题在于，`SQL`当您应该思考时，您仍在思考`JPQL`。试试这个：

```
@NamedQuery(name = "FindUsersByLot", query = "SELECT b FROM Lots b JOIN b.boats a WHERE a.user = :user") 
```

说明 - 您假设每条`Lots`记录都将包含一`boatId`列，这可能是也可能不是。在`@ManyToOne`JPA 中，提供者可能会选择将关系存储在`Boats`一边。至于我为什么要这样写查询，看看[这个](http://docs.oracle.com/javaee/6/tutorial/doc/bnbuf.html#bnbup)。

# database - MVVM数据库删除方法

> ID：15432710
> 
> 赞同：0
> 
> 时间：2013-03-15T12:38:09.030
> 
> 标签：database, mvvm, csla

我想从我从数据库生成的模型中删除一些项目，如下所示：

```
 db = new TestDBEntities();
        foreach (var item in db.Farbe)
        {
            _model.Add(new Farbe { FarbauswahlNr = item.FarbauswahlNr, Kurztext = item.Kurztext, Ressource = item.Ressource,Vari1 = Convert.ToBoolean(item.Var1) ,Vari2 = item.Vari2 });
        } 
```

我在 RadGridView 中显示此模型，并通过在鼠标上按 Rightcklick 选择和索引来删除，如下所示：

```
 public void ExecuteDelete(object obj)
        {

            farbliste.Model.Remove(SelectedIndex);

            ListeAktualisieren();

        } 
```

现在的问题是我如何从我的数据库中删除一些东西，因为如果我只是从我的模型中删除它不会工作，这也不是我想要的。

顺便说一句，有些变量用德语命名，对不起......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:58:02.140

你必须保存你的上下文。您在第一个代码块中的上下文是 db。

所以：

```
 db = new TestDBEntities();

 db.entity.Remove(db.entity.Find(SelectedIndex));

 db.SaveChanges(); 
```

实体是来自实体框架的表/对象的名称。我还建议包装这是 db 的 using 块

# c++ - 代码无法在 VS 2008 中编译代码，但在 2003 年运行良好

> ID：15432720
> 
> 赞同：0
> 
> 时间：2013-03-15T12:38:26.690
> 
> 标签：c++, visual-studio-2008

我已将变量初始化为

```
OvXplBase::UTF16Char_t const *qName 
```

当我简单地使用 strlen 作为`(strlen(qName)+1))`; 这段代码给出了一个错误

> “无法将参数 1 从 'const OvXplBase::UTF16Char_t *' 转换为 'const wchar_t *'”

只需在 VS 2008 中将 qname 显式类型转换为 (tchar *)，进行编译，但它会在一段时间后将运行时错误抛出为“访问冲突读取内存”。

这段代码在 2003 年完美运行，我尝试在 VS 2008 中进行各种 unicode 设置。所以你们能指导我，我还能做些什么来使这段代码正常工作。

或者我应该如何将此 UTF16Char_t * 转换为 wchar_t* 以便此代码完美运行。

问候， 极客

# javascript - 带有滚动窗格但没有滚动条的可滚动区域

> ID：15432721
> 
> 赞同：0
> 
> 时间：2013-03-15T12:38:33.867
> 
> 标签：javascript, html, css, facebook, scrollbar

我正在查看一些 Facebook 照片。我观察到这件事，当您单击图像时，它会以模态叠加的形式打开。背景仍然模糊可见，滚动窗格仍然存在，但滚动条消失了。谁能告诉我该怎么做？我的意思是，将 body 的溢出设置为隐藏将使整个滚动窗格消失。这里有滚动窗格，但没有滚动条..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:37:18.477

我认为您正在寻找的是在不使用时会淡出的类似 osx 的滚动条。

看到[带有 jQ​​uery 的 Lion-like 滚动条？](https://stackoverflow.com/questions/6863748/lion-like-scrollbar-with-jquery)

# javascript - 在 JavaScript 中自动增加一个计数器

> ID：15432724
> 
> 赞同：1
> 
> 时间：2013-03-15T12:38:36.923
> 
> 标签：javascript, jquery

我想在页面加载时自动将计数器从 0 设置为给定值。最近我找到了一个，但它适用于按钮单击。

```
var amount=parseInt($('#amount').val());
var i = parseInt($('#count').val());
var tim;

function run(){
    tim = setInterval(function(){
        if(i>=amount){clearInterval(tim); return;}
        $('#count').val(++i);
    },100);        
}

$('#runner').click(function(){         
    run();
}); 
```

查看 >> [**JS fiddle DEMO**](http://jsfiddle.net/LNE48/2/)

我还想在其中添加一个重置按钮，每次单击时都会从 0 再次运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:47:52.667

这[是更新的 Jsfiddle 演示](http://jsfiddle.net/zaheerahmed/LNE48/6/)

html:

```
<input type="hidden" value="10000" id="amount"/>
<input type="text" value="0" id="count"/>
<input type="button" value="Start" id="starter"/>
<input type="button" value="Stop" id="stopper"/>
<input type="button" value="reset" id="resetter"/> 
```

脚本：

```
<script type="text/javascript">
  var amount=parseInt($('#amount').val());
    var i = parseInt($('#count').val());
    var tim;

    function run(){
        tim = setInterval(function(){
            if(i>=amount){clearInterval(tim); return;}
            $('#count').val(++i);
        },100);        
    }
    run();

    $('#stopper').click(function(){        
        clearInterval(tim);
    });

   $('#resetter').click(function(){    
     clearInterval(tim);    
     i=0;
     $('#count').val(i);
     run();
    });

    $('#starter').click(function(){        
      clearInterval(tim);
      run();
   });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:39:25.487

使用准备好的文件：

```
$(document).ready(function() {
   run();
}); 
```

`count`您可以通过分配为 0来重置计数器。

```
<input id="resetCount" type="button" />

function reset() {
    $('#count').val(0);
} 

$("#resetCount").click(function() {
   reset();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:40:06.877

你可以在onload中调用一个函数你可以在那里做

像

```
 <script>
  run();
 </script> 
```

每当页面加载时都会调用 run() 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:40:33.420

只需在文档中调用您的 run 方法即可：

```
$(document).ready(function() {  
  run();
}); 
```

# tridion - 在设计选项卡的 RTF 字段中启用样式

> ID：15432726
> 
> 赞同：0
> 
> 时间：2013-03-15T12:38:43.933
> 
> 标签：tridion, tridion-2011

我们正在使用 Tridion 2011 SP1。有没有办法在 RTF 字段的设计选项卡中启用样式？我们有预览选项卡，但编辑们发现它是一项额外的活动，可以单击预览选项卡并查看外观。在 Tridion 5.3 中的设计选项卡中也应用了样式。我们在 RTF 字段中有 2 个段落，但是当我们在设计选项卡中检查它时，我们看不到段落格式，而是将`<p>`标签视为`</br>`标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:27:51.523

现在 Tridion 有自己的[堆栈交换站点。](http://tridion.stackexchange.com)[这里](https://tridion.stackexchange.com/questions/405/modify-the-wysiwyg-editor.)有这个问题的答案

由于您也来自 Tridion 社区，所以我想请您加入它。到时候那里见 ：-）

谢谢

# android - 我的 ADT 插件已更新，但 eclipse 无法识别它

> ID：15432735
> 
> 赞同：1
> 
> 时间：2013-03-15T12:39:08.910
> 
> 标签：android, eclipse, eclipse-plugin

我更新了 Android SDK 并安装了 API 17。我还将 ADT 插件更新为 21.1.0。但是我面临一个问题：当我打开 eclipse 时，会不断出现一条消息：

> Android SDK 需要 Android Developer Toolkit 版本 21.1.0 或更高版本。当前版本是：21.0.1.v201....（和另一个数字..）。请将 ADT 更新到最新版本。

我单击`Check for updates`--> 然后出现一条消息：`No updates found` 并出现另一条消息：`No repository found at jar:file:/C:(...)/ADT-21.1.0.zip!/`。

我无法启动 avd，因为所有应用程序都有错误。

我还尝试通过下载 zip 文件手动安装它`ADT-21.1.0 -> Help -> Install New Software... -> Add -> Archive`....（这是我首先更新插件的方式），但它说一切都已更新！有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T12:50:05.020

我不知道原因，但以下内容在同样的情况下帮助了我。

*   转到帮助 -> 安装新软件
*   使用（如果不存在则添加）Android 开发者工具更新站点（[http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)）
*   **取消选中**“在安装过程中联系所有更新站点以查找所需软件”选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:57:16.887

我以前遇到过这个问题 - 通过使用更新的 Eclipse 和新安装的 ADT 解决了这个问题（像 Serkan 建议的那样安装它，而不是使用市场）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T03:51:38.937

问题是它正在寻找您的 c 驱动器上不存在的更新存储库。它卡在 c 上，因为您加载了一个 zip。通过帮助安装软件然后单击可用的软件站点并删除本地驱动器来修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T18:29:44.807

[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/) 该网站是 https 而不是 http。因此，进行必要的更改，它应该可以工作

# ajax - jQuery $.ajax post 显示部分结果

> ID：15432736
> 
> 赞同：0
> 
> 时间：2013-03-15T12:39:10.020
> 
> 标签：ajax, jquery, jquery-post

是否可以从 $.ajax 帖子中获得部分结果并写入 div？

我的js代码

```
$('#submit').livequery('click', function(event) { 
    event.preventDefault();
    $('#loading').show();
    var myvar= $("#myvar").val();
    $.ajax({
        type: "POST",
        url: "process.php",
        cache: false,
        data: ({'myvar':myvar}),
        success: function(data){
            $('#loading').hide();
            $('#main_content').html(data);
        },
    });
    return false;  
}); 
```

来自 process.php 的代码

```
function send($string = "") {
echo $string;
echo str_pad('', 4096)."\n";
@ob_flush();
@flush();
}
for($i=1;$i<=10;$i++){
send($i);
sleep(5);
} 
```

可以在 #main_content 上显示如下结果：

*   显示 1 -> 等待 -> 显示 2 -> 等待 .....

现在我在处理完成后得到所有结果：12345678910

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:43:00.293

PHP 代码在服务器上运行，因此不会像您要求的那样影响客户端浏览器的行为。完成您想要的方法是将所有信息从 PHP 传递到您的浏览器并在 jQuery 或 javascript 中处理逻辑。发送所有信息并将其存储在一些变量/数组中，然后在 POST 之后，拆分信息并将其显示给浏览器，并使用如下所示的超时回调：

```
setTimeout(function() {
  // Do something after 5 seconds
}, 5000); 
```

# json - 如何从 AJAX 调用返回的数据中访问 JSON 对象属性？

> ID：15432737
> 
> 赞同：0
> 
> 时间：2013-03-15T12:39:10.153
> 
> 标签：json, ajax, object

我正在对这个 php 文件进行 AJAX 调用：

```
<?php 
    $result = array('error' => "Please enter a valid name");
    echo  json_encode($result)
?> 
```

在我的 javascript 文件中，我有：

```
$.ajax({
    type:"POST",
    url:"/controller/common/review_processing.php", 
    data:dataString, 
    success:function (data) {
        var returned_data = data;
        console.log(returned_data); <---This outputs {"error":"Please enter a valid name"} 
        console.log(returned_data.error); <---This outputs undefined
    }

}); 
```

我的数据似乎被正确编码为 JSON 对象，但是当我尝试访问特定属性时，我得到一个未定义的结果。

我想要的是`console.log(returned_data.error)`输出：

> 请输入一个有效的名字

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:38:33.220

请试试 ：

```
$.ajax({
    type:"POST",
    url:"/controller/common/review_processing.php", 
    data:dataString,
    dataType: "json", <--response itself will be handled as JSON
    success:function (data) {
        var returned_data = data;
        console.log(returned_data); <---This outputs {"error":"Please enter a valid name"} 
        console.log(returned_data.error); 
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:45:55.527

试试用这个...

```
$.map(data.d, function (item) {
  console.log(item.error);
}); 
```

# mysql - 用于注册和登录系统的用户表结构与电子邮件

> ID：15432742
> 
> 赞同：0
> 
> 时间：2013-03-15T12:39:21.900
> 
> 标签：mysql, indexing, database-design, login, registration

我想知道什么是用户表的最佳表结构和索引（通过电子邮件和密码登录）以获得最佳性能。我不想使用用户名。我想使用用户电子邮件使用唯一索引（以获得更好的性能）登录。

也许最好的性能将是电子邮件和密码的唯一索引。

问题是我希望将电子邮件索引为唯一以更快地登录。但在这种情况下，不良用户可以阻止另一个用户注册知道他的电子邮件。

我能想到的唯一想法是在一个独特的列中使用某种独特的电子邮件和密码哈希。但我想知道它是如何做到最好的。

我的用户表索引结构的一部分（数据库是 MySQL）

```
user_id   - PRIMARY
email     - UNIQUE
password
verified   (after verify email) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:03:16.733

简单的解决方案：

发送带有取消注册链接的验证邮件（我没有注册）

# android - Facebook SDK v3.0 请求对话框不发送应用程序请求

> ID：15432743
> 
> 赞同：1
> 
> 时间：2013-03-15T12:39:23.227
> 
> 标签：android, facebook

我正在使用适用于 Facebook 的 Android SDK v3.0 向朋友发送使用我的应用程序的请求。我使用在[这里](https://developers.facebook.com/docs/howtos/androidsdk/3.0/send-requests/)看到的代码打开 Facebook 的 Dialog 应用程序并向用户的朋友发出请求。

使用以下代码显示并发送请求后。我现在收到“请求已发送”祝酒词，但从未发送过请求。

```
private void sendRequestDialog() {
    Bundle params = new Bundle();
    params.putString("message", "MESSAGE");
    params.putString("app_id", "APPID");

    WebDialog requestsDialog = (
        new WebDialog.RequestsDialogBuilder(LoginActivity.this,
            Session.getActiveSession(),
            params))
            .setOnCompleteListener(new OnCompleteListener() {

                @Override
                public void onComplete(Bundle values,
                    FacebookException error) {
                    if (error != null) {
                        if (error instanceof FacebookException) {
                            Toast.makeText(LoginActivity.this.getApplicationContext(), 
                                "Request cancelled", 
                                Toast.LENGTH_SHORT).show();
                        } else {
                            Toast.makeText(LoginActivity.this.getApplicationContext(), 
                                "Network Error", 
                                Toast.LENGTH_SHORT).show();
                        }
                    } else {
                        final String requestId = values.getString("request");
                        if (requestId != null) {
                            Toast.makeText(LoginActivity.this.getApplicationContext(), 
                                "Request sent",  
                                Toast.LENGTH_SHORT).show();
                        } else {
                            Toast.makeText(LoginActivity.this.getApplicationContext(), 
                                "Request cancelled", 
                                Toast.LENGTH_SHORT).show();
                        }
                    }   
                }

            })
            .build();
    requestsDialog.show();
} 
```

在 Request Dialog 的显示过程中，从 Logcat 获取以下日志：

```
03-15 17:18:51.944: W/dalvikvm(2842): disableGcForExternalAlloc: false
03-15 17:18:53.759: V/chromium(2842): external/chromium/net/base/bandwidth_metrics.h:96: [0315/171853:INFO:bandwidth_metrics.h(96)] Bandwidth: 1500.13Kbps (avg 2275.13Kbps)
03-15 17:18:54.124: W/dalvikvm(2842): disableGcForExternalAlloc: false
03-15 17:18:58.019: W/dalvikvm(2842): disableGcForExternalAlloc: true
03-15 17:18:58.629: W/dalvikvm(2842): disableGcForExternalAlloc: false
03-15 17:18:58.684: W/dalvikvm(2842): disableGcForExternalAlloc: true
03-15 17:18:59.314: W/dalvikvm(2842): disableGcForExternalAlloc: false
03-15 17:18:59.369: W/dalvikvm(2842): disableGcForExternalAlloc: true
03-15 17:18:59.949: W/dalvikvm(2842): disableGcForExternalAlloc: false
03-15 17:18:59.954: W/dalvikvm(2842): disableGcForExternalAlloc: true
03-15 17:19:00.534: W/dalvikvm(2842): disableGcForExternalAlloc: false
03-15 17:19:00.539: W/dalvikvm(2842): disableGcForExternalAlloc: true
03-15 17:19:01.329: W/dalvikvm(2842): disableGcForExternalAlloc: false
03-15 17:19:03.459: W/dalvikvm(2842): disableGcForExternalAlloc: true
03-15 17:19:03.984: W/dalvikvm(2842): disableGcForExternalAlloc: false
03-15 17:19:04.019: W/dalvikvm(2842): disableGcForExternalAlloc: true
03-15 17:19:04.189: W/dalvikvm(2842): disableGcForExternalAlloc: false
03-15 17:19:06.269: W/dalvikvm(2842): disableGcForExternalAlloc: false
03-15 17:19:10.869: I/NONPRIME(2842): <CallBackProxy> Send to WebViewClient. 
```

请指出我正确的方向...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-06T18:29:28.430

从这个 Facebook[开发者](https://developers.facebook.com/docs/howtos/requests/#user_to_user)页面：“用户到用户请求仅适用于 Canvas 应用程序”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T15:07:52.123

在 facebook 开发者帐户的应用程序设置中添加一个画布框架，然后添加以下代码以发送应用程序请求。如果在活动中用 YourActivityName.this 替换 getActivity() 如果在片段中不需要替换任何东西

```
Bundle params = new Bundle();
            params.putString("message",
                    "Join CConnect To feel Better Experience Of Meetings And Calls");

            WebDialog requestsDialog = (new WebDialog.RequestsDialogBuilder(
                    getActivity(), Session.getActiveSession(), params))
                    .setTheme(
                            android.R.style.Theme_Translucent_NoTitleBar_Fullscreen))
                    .setOnCompleteListener(new OnCompleteListener() {

                        @Override
                        public void onComplete(Bundle values,
                                FacebookException error) {
                            if (error != null) {
                                if (error instanceof FacebookOperationCanceledException) {
                                    Toast.makeText(
                                            getActivity()
                                                    .getApplicationContext(),
                                            "Request cancelled",
                                            Toast.LENGTH_SHORT).show();
                                } else {
                                    Toast.makeText(
                                            getActivity()
                                                    .getApplicationContext(),
                                            "Network Error", Toast.LENGTH_SHORT)
                                            .show();
                                }
                            } else {
                                final String requestId = values
                                        .getString("request");
                                if (requestId != null) {
                                    Toast.makeText(
                                            getActivity()
                                                    .getApplicationContext(),
                                            "Request sent", Toast.LENGTH_SHORT)
                                            .show();
                                } else {
                                    Toast.makeText(
                                            getActivity()
                                                    .getApplicationContext(),
                                            "Request cancelled",
                                            Toast.LENGTH_SHORT).show();
                                }
                            }
                        }

                    }).build();
            requestsDialog.show(); 
```

# html - 从电子邮件表格生成的不需要的加号登录消息？

> ID：15432744
> 
> 赞同：1
> 
> 时间：2013-03-15T12:39:25.207
> 
> 标签：html, forms, email

我的网站上有一个电子邮件表格，

但是，当消息出现在电子邮件应用程序的新消息窗口中时，加号 (+) 将出现，而不是空格。

askhaksdasda+akjsdhaksdhasda+asjdaksdas

我该如何解决？

# .net - 使用 WebClient 和浏览器在 DBPedia 中产生不同的结果

> ID：15432749
> 
> 赞同：2
> 
> 时间：2013-03-15T12:39:35.893
> 
> 标签：.net, c#-4.0, rdf, sparql, dbpedia

我想提取一些存在于[DBPedia](http://www.dbpedia.org)中的信息。因此，我使用 .NET 的**System.Net.WebClient**编写了一个应用程序，它获取 url 并以**N-Triples**格式（纯文本）返回 url 的内容。

[为url](http://dbpedia.org/data/Communications_in_Afghanistan.ntriples)（与应用程序）提取数据的结果是：

```
<http://dbpedia.org/resource/AfghanistanCommunications> <http://dbpedia.org/ontology/wikiPageRedirects> <http://dbpedia.org/resource/Communications_in_Afghanistan> . <http://dbpedia.org/resource/AfghanistanCommunications>   <http://www.w3.org/ns/prov#wasDerivedFrom>  <http://en.wikipedia.org/wiki/AfghanistanCommunications?oldid=74466499> . <http://dbpedia.org/resource/AfghanistanCommunications>   <http://xmlns.com/foaf/0.1/isPrimaryTopicOf>    <http://en.wikipedia.org/wiki/AfghanistanCommunications> . <http://dbpedia.org/resource/AfghanistanCommunications>  <http://www.w3.org/2000/01/rdf-schema#label>    "AfghanistanCommunications"@en . 
```

但是，当我使用浏览器查看[url](http://dbpedia.org/data/Communications_in_Afghanistan.ntriples)时，我得到的内容与我提取的内容截然不同。

我用 Fiddler 检查了请求，然后：

> webClient.Headers.Add(HttpRequestHeader.UserAgent, "Mozilla/4.0 (兼容; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");

DBPedia 是否将应用程序检测为机器人并返回的数据比真正的浏览器少，还是我错过了其他东西？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:19:45.833

您的应用程序要求的当然是：

```
http://dbpedia.org/data/AfghanistanCommunications.ntriples 
```

但是您的 Web 浏览器显示的是：

```
http://dbpedia.org/data/Communications_in_Afghanistan.ntriples 
```

如果您的 Web 浏览器访问[http://dbpedia.org/resource/AfghanistanCommunications](http://dbpedia.org/resource/AfghanistanCommunications)或[http://dbpedia.org/page/AfghanistanCommunications](http://dbpedia.org/page/AfghanistanCommunications)，您将被重定向到[http://dbpedia.org/page/Communications_in_Afghanistan](http://dbpedia.org/page/Communications_in_Afghanistan)，除非要求特定格式。重定向的原因是因为维基百科有一个从[http://en.wikipedia.org/wiki/AfghanistanCommunications](http://en.wikipedia.org/wiki/AfghanistanCommunications)到[http://en.wikipedia.org/wiki/Communications_in_Afghanistan](http://en.wikipedia.org/wiki/Communications_in_Afghanistan)的重定向。您可以在应用程序中获得的三元组中看到：

```
<http://dbpedia.org/ontology/wikiPageRedirects> 
```

# c# - 使用日期和事件进行优化

> ID：15432752
> 
> 赞同：0
> 
> 时间：2013-03-15T12:39:45.177
> 
> 标签：c#, javascript, asp.net, algorithm

这是一个很难解释的问题，但我会尽力而为。

我有一个活动日历。其中有非工作日。当事件的任何部分在非工作日登陆时，其天数将延长至工作日。看这里：

我有一个橙色的 1 天活动。 ![在此处输入图像描述](../Images/d6a6614143dd0385090091812c243334.png)

当它被拖到非工作日时，它会延伸：

![在此处输入图像描述](../Images/2e022400f3abdce1df0497bf9e980085.png)

这很好用而且很好用。这是问题所在。我一次只显示 2 周的日历。因此，首先，我获取开始、结束或落在该范围内的可见事件。然后，我获取该范围的非工作日并将非工作日动态添加到其长度中。

这是问题所在：

假设有一个从 1 月 28 日开始到 1 月 29 日结束的活动。这意味着它不会被获取。但由于非工作日，它会在 2 月 6 日结束，可以说。好吧，因为我没有在第一步中获取它，所以从 2 月 4 日到 15 日我不会看到它。这本质上是我的问题。

天真的解决方案是获取所有事件和所有非工作日，然后动态预先计算所有结束日期，然后过滤那里的可见日期。但这会很快变得非常昂贵。

但我想不出任何其他解决方案。它需要是动态的。有没有人对我如何以非 O(N^2) 方式解决这个问题有任何创造性的想法。只是一个解决方案的概要将非常有帮助。如果需要，我不介意修改数据库。

目前，时间表具有开始日期和小时数。我动态计算事件的长度，因为不同的员工工作时间不同，这就是我不能有静态结束日期的原因。

# maven - 用于版本管理的 Maven 插件

> ID：15432757
> 
> 赞同：4
> 
> 时间：2013-03-15T12:39:54.973
> 
> 标签：maven

我正在寻找一种管理我的 Maven 项目版本的可能性。

我的 maven 项目中有一些 maven 模块，其中一些模块依赖于这些模块中的其他模块。

我想为每个模块或依赖项定义全局使用的版本。

这有可能吗？

就像是

```
globalVersion=2.0

<groupId>test</groupId>
<artifactId>test</artifactId>
<version>${globalVersion}</version> 
```

但正如我所说，不是在每个单独的 pom 中。我的意思是我的 maven 模块中的所有 pom 都是全局的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T12:50:22.697

（我假设您的所有模块都有一个通用的父 pom。）

在父 pom 中定义一个属性：

```
<properties>
    <globaleVersion>1.0.0</globalVersion>
</properties> 
```

[`<dependencyManagement>`](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)并在父 pom 中定义一个部分：

```
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>test</groupId>
            <artifactId>test</artifactId>
            <version>${globalVersion}</version>
        </dependency>
        <dependency>
            <groupId>A</groupId>
            <artifactId>A</artifactId>
            <version>${globalVersion}</version>
        </dependency>
    </dependencies>
 </dependencyManagement> 
```

并且在你的模块中定义依赖而不指定版本（maven会从父的dependencyManagement部分找到它）

```
 <dependencies>
        <dependency>
            <groupId>test</groupId>
            <artifactId>test</artifactId>
        </dependency>
        <dependency>
            <groupId>A</groupId>
            <artifactId>A</artifactId>
        </dependency>
    </dependencies> 
```

# c# - 执行创建 Excel 的 C# 方法时 Fitnesse 引发的错误

> ID：15432760
> 
> 赞同：0
> 
> 时间：2013-03-15T12:40:07.047
> 
> 标签：c#, ui-automation, fitnesse

我有一个用 C# 开发的应用程序测试框架，它在每个步骤之后将结果存储在 Excel 文件中。在解决方案中执行时，一切正常。但是，当我将解决方案与 Fitnesse 集成并调用该方法时，会引发错误。我在下面的 Fitness 添加了堆栈跟踪。

代码段在这里：

```
public class ExcelReports : IReporter
{
    private Excel.Application xlReport;
    public ExcelReports()
    {
        xlReport = new Excel.Application();
        Excel.Workbook xlWorkbook = xlReport.Workbooks.Add();
        ***xlWorkbook.SaveAs(ExecutionContext.RESULTFILE);***
    }
  } 
```

报错在 xlWorkbook.SaveAs(ExecutionContext.RESULTFILE)

我正在为 .NET 4.0 版本使用 fit 和 fitsharp dll。

```
 System.Reflection.TargetInvocationException: Exception has been thrown by the
    target of an invocation. ---> System.Reflection.TargetInvocationException:
    Exception has been thrown by the target of an invocation. --->
    System.Runtime.InteropServices.COMException: Microsoft Excel cannot access the file
   'C:\0452CB00'. There are several possible reasons:
    • The file name or path does not exist.
    • The file is being used by another program.
    • The workbook you are trying to save has the same name as a currently open 
    workbook.
    at Microsoft.Office.Interop.Excel._Workbook.SaveAs(Object Filename, Object    
    FileFormat, Object Password, Object WriteResPassword, Object ReadOnlyRecommended, 
    Object CreateBackup, XlSaveAsAccessMode AccessMode, Object ConflictResolution, 
    Object AddToMru, Object TextCodepage, Object TextVisualLayout, Object Local)
    at EF.UIAutomation.Commons.ExcelReports..ctor() in
           C:\EF.Automation\EF.UIAutomation.PageLibrary\Libraries\EF.UIAutomation.Commons.Reports.cs:l ine 25

    at EF.UIAutomation.Launcher.Program.Test() in
    C:\EF.Automation\EF.Automation\Program.cs:line 26

     --- End of inner exception stack trace ---
     at fitSharp.Machine.Model.TypedValue.ThrowExceptionIfNotValid()
     at fitSharp.Fit.Operators.CompareDefault.Compare(TypedValue actualValue, Tree`1
     expected)
     at fitSharp.Machine.Engine.ProcessorBase`2.<>c__DisplayClass3.
     <>c__DisplayClass5.b__2(CompareOperator`1 o)

     at fitSharp.Machine.Engine.Operators`2.Do[O](CanDoOperation`1 canDoOperation, 
     DoOperation`1 doOperation)
     at fitSharp.Machine.Engine.ProcessorBase`2.
     <>c__DisplayClass3.b__0(OperationLogging logging)
     at fitSharp.Machine.Engine.ProcessorBase`2.DoLoggedOperation[R](String
     startMessage, Func`2 operation)
     at fitSharp.Machine.Engine.ProcessorBase`2.Compare(TypedValue instance, Tree`1
     parameters)
     at fitSharp.Fit.Operators.CheckDefault.Check(CellOperationValue actualValue, 
     Tree`1 expectedCell)
     --- End of inner exception stack trace ---
     at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, 
     Signature sig, Boolean constructor)
     at System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[]
     parameters, Object[] arguments)
     at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, 
     Binder binder, Object[] parameters, CultureInfo culture)
     at System.RuntimeType.InvokeMember(String name, BindingFlags bindingFlags, Binder
     binder, Object target, Object[] providedArgs, ParameterModifier[] modifiers,
     CultureInfo culture, String[] namedParams)
     at fitSharp.Machine.Engine.MethodMember.TryInvoke(Object[] parameters)
     at fitSharp.Machine.Engine.ReflectionMember.Invoke(Object[] parameters)
     at fitSharp.Machine.Engine.ProcessorBase`2.Operate[O](Object[] parameters)
     at fitSharp.Fit.Engine.CellProcessorExtension.Check(CellProcessor processor, 
     Object systemUnderTest, Tree`1 memberName, Tree`1 parameters, Tree`1 expectedCell)
     at fitSharp.Fit.Service.CheckBinding.Do(Tree`1 cell)
     at fitSharp.Fit.Service.Binding.Do(Tree`1 cell)
     at fit.ColumnFixture.DoCell(Parse cell, Int32 column) 
```

# css - 背景和电话间隙

> ID：15432764
> 
> 赞同：1
> 
> 时间：2013-03-15T12:40:12.470
> 
> 标签：css, cordova, background

我在 phonegap 上的背景有一些问题

我有一个三星galaxy tab 2，它可以正常工作，但在我的htc野火上我有问题你有我的css

```
html, body {
    height: 100%;
    width: 100%;
}

.ui-page{
    background: url('../img/bg.jpg') 0 0 no-repeat fixed !important;
    background-size: auto 100%;
    height: 100%;
    width: 100%;
    font-family: MankSans;
    background-position:fixed;
    background-color:#102a3e;
} 
```

在 htc 上，屏幕底部有一点空白，但我的背景大小是自动 100%。

第二个问题，当我滚动背景停留在顶部并且我有一个白色背景时，背景不固定。我尝试添加颜色，但我总是有白屏

谢谢你的帮助

# python - 具有多个表的时间表 Web 抓取 (Python)

> ID：15432765
> 
> 赞同：1
> 
> 时间：2013-03-15T12:40:14.207
> 
> 标签：python, google-app-engine, google-cloud-datastore, web-scraping, beautifulsoup

我只是在寻找有关 python 网络抓取的一些信息。我正在尝试从此时间表中获取所有数据，[并且](http://goo.gl/TOqrE)我希望将课程链接到其开启时间。查看 html 有多个表（表中的表）。我打算将 Google App Engine 与 Python 一起使用（也可能是 BeautifulSoup）。关于解决此问题的最佳方法的任何建议是？

谢谢

更新：

我已经设法使用以下代码从表中提取所需的数据：

```
import urllib
from lxml import etree
import StringIO

url = "http://ttcache.dcu.ie/Reporting/Individual;Locations;id;lg25? 
template=location+Individual&weeks=20&days=1-5&periods=1-30&Width=0&Height=0"
result = urllib.urlopen(url)
html = result.read()

parser = etree.HTMLParser()
tree   = etree.parse(StringIO.StringIO(html), parser)

xpath = "//table[2]/tr/td//text()"

filtered_html = tree.xpath(xpath)

print filtered_html 
```

但是我得到很多这些`u'\xa0', u'\xa0', '\r\n', '\r\n'`字符分散在整个解析的文本中。关于如何对抗这些有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:47:35.430

可用于解析 HTML 的最佳库是 lxml，它基于 libxml2。虽然它是为 XML 解析而设计的，但它也有一个 HTML 解析器，它对标签汤的处理比 BeautifulSoup 好得多。由于解析器在 C 中，它也快得多。

您还可以访问 XPath 以查询 HTML dom，libxml2 支持 XPaths 中的正则表达式匹配，这对于网络抓取非常有用。

libxml2 和 lxml 得到很好的支持，您会发现所有主要发行版上都有它们的软件包。如果您使用的是 2.7，Google App 引擎似乎也支持它[https://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/docs/python/tools/libraries27)

编辑：

你得到的字符是由于页面上有很多空的表格单元格，所以你的 xpath 经常匹配空白字符（它们是不间断的空格）。您可以使用正则表达式跳过那些没有非空格字符的文本节点，如下所示：

```
xpath = "//table[2]/tr/td//text()[re:match(., '\\S')]"

filtered_html = tree.xpath(
    xpath,
    namespaces={"re": "http://exslt.org/regular-expressions"}) 
```

命名空间位只是告诉 lxml 你想使用它的正则表达式扩展。

# c# - 如何使用单选按钮创建 OpenFileDialog？

> ID：15432773
> 
> 赞同：4
> 
> 时间：2013-03-15T12:41:01.210
> 
> 标签：c#, wpf, winforms, radio-button, openfiledialog

有人可以告诉我如何创建一个带有 Radiobuttons 的 OpenFileDialog 窗口，如下所示：

![在此处输入图像描述](../Images/150eb67d06525dc9ca3493c8395b1b43.png)

感谢您的回答！

# python - lxml findall div 和 span 标签

> ID：15432775
> 
> 赞同：0
> 
> 时间：2013-03-15T12:41:21.493
> 
> 标签：python, html-parsing, lxml

如何找到所有 div 和 span 标签并保留订单。使用 BeautifulSoup 非常简单：`soup.findAll(name=['span', 'div'])`，但我最近切换到 lxml，因为它比 BeautifulSoup 快得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:58:39.543

```
import lxml.html
from lxml.cssselect import CSSSelector
content = result.read()
page_html = lxml.html.fromstring(content)

elements = page_html.xpath('//*[self::div or self::span]') 
```

或者

```
sd_selector = CSSSelector('span,div')
elements = sd_selector(page_html) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:55:55.370

```
import lxml.html as LH
content = '''\
<tr>
<div>idend</div>
<span>Green<\span>
<tr>
'''
root = LH.fromstring(content)
for tag in root.xpath('//*[self::div or self::span]'):
    print(tag) 
```

产量

```
<Element div at 0xb751f23c>
<Element span at 0xb751f11c> 
```

# directory - 木偶同步目录

> ID：15432777
> 
> 赞同：1
> 
> 时间：2013-03-15T12:41:25.767
> 
> 标签：directory, centos, puppet

仍然不起作用在/etc/puppet/manifests/site.pp

```
file { "/home/render/installation/":  
 ensure => "directory",  
 owner  => "render",  
 group  => "render",  
 recurse => "true",  
 mode   => "0750",  
 source => "puppet:///files/installation/",  
 } 
```

客户端上的目录仍然为空

```
ls /etc/puppet/files/installation/
1  2  3  4  5 
```

在日志中的傀儡客户端上

3 月 21 日 12:28:12 lw-003 puppet-agent[28098]: (/File[/home/render/installation/]) 无法使用“eval_generate”生成其他资源：服务器上的错误 400：未授权调用搜索/file_metadata/files/installation with {:checksum_type=>"md5", :recurse=>true, :links=>"manage"}

3 月 21 日 12:28:12 lw-003 puppet-agent[28098]: (/File[/home/render/installation/]) 无法评估：服务器上的错误 400：无权调用 /file_metadata/files/ 上的查找安装无法检索 puppet:///files/installation 的文件元数据：服务器上的错误 400：无权调用 find on /file_metadata/files/installation Mar 21 12:28:12 lw-003 puppet-agent[28098]：在 0.28 秒内完成目录运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T14:15:25.927

我有同样的问题，并在谷歌上找到了这个问题。我不得不更改清单文件的路径（modulename/manifests/init.pp）：

```
"puppet:///files/installation/", 
```

至：

```
"puppet:///modules/files/installation/", 
```

没有 /modules/ 的符号在 2.7 中已弃用，并且在较新的版本中不再支持：

```
DEPRECATION NOTICE: Files found in modules without specifying 'modules' in file path will be deprecated in the next major release.  Please fix module 'modulename' when no 0.24.x clients are present 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:54:20.197

* * *

试试这个例子，

```
 file {
    "/scratch/usern/testmod" :
      ensure => directory,
      source => "puppet:///files/testmod",
      recurse => true,
      owner => "usern",
      group => "groupn",
      mode => "0775",
      backup => false,
  } 
```

您必须指定“文件”，如果您正在执行递归复制，请指定“recurse => true”。这可能是您问题的解决方案。

“fileserver.conf”应如下所示：

```
]# cat /etc/puppet/fileserver.conf
   [files]
     path /etc/puppet/files
     allow * 
```

# android - Android - SharedPreference 的最后修改

> ID：15432779
> 
> 赞同：0
> 
> 时间：2013-03-15T12:41:33.527
> 
> 标签：android, date, sharedpreferences, last-modified

有没有办法找出来？

我的想法是读取设置文件的最后修改日期，但据我所知，这在无根手机上是不可能的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:53:38.937

我突然想到了一个想法，但我不确定这是否能很好地实施。在提交`SharedPreference`总是更新密钥`last_modified`时，使用`System.currentTimeMillis()`. 如果您的应用程序有任何最终提交（假设您每次在`onDestroy`方法上提交任何数据），那么您只能保存`last_modified`then. 否则你必须每次更新它。这绝对是开销。

# html - 在本地主机上没有填充，但在网络服务器上？

> ID：15432781
> 
> 赞同：0
> 
> 时间：2013-03-15T12:41:37.810
> 
> 标签：html, css, styles, padding

我只是对目前发生的事情有一个简短的问题。将css设置上传到网络服务器时，css设置必须与一个浏览器中的localhost相同吗？

我做了一个截图来说明我的意思：

这是网络服务器上的样子：

![网络](../Images/dd55f64fe218999edd97b84f756eac4f.png)

这里是本地主机上的内容：

![当地的](../Images/41c03621bb8ebfb4f5da09ddc0675352.png)

我将在网络服务器上上传一个 css 文件，当我查看我的本地主机页面进行预览时，我会以这种方式看到它。它是完全相同的文件，也是相同的浏览器（safari、chrome、firefox）。通过调用 webservers 页面，为输入字段添加了填充，这正是 css 中的内容：

```
input[type="text"],[type="password"] {
    color: #ccc;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 10px;
    width: 170px;
    height: 15px;
    line-height: 10px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    -webkit-border-radius: 5px;
    padding-left:5px;
    pading-right:5px;
    padding-top:3px;
    padding-bottom:2px;
    outline:none;
} 
```

在本地主机上查看它时没有任何填充？我使用重置 css 文件，但不认为这会导致这种现象。那怎么可能呢？

我想提到的唯一区别是，在 localhost 上，由于 php 的 error_reporting 和通知消息，整个身体向下延伸。

文档类型是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:19:41.543

我认为 padding-right 有错误`pading-right:5px;`

另外，您使用的代码很好，但有时可能会发生一些伪代码不起作用，因此在 CSS 中定义时直接使用更好。像这样..

```
 input[type="text"],input[type="password"] {
    color: #ccc;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 10px;
    width: 170px;
    height: 20px;
    line-height: 14px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    -webkit-border-radius: 5px;
    padding:3px 5px;   
    outline:none;
} 
```

尝试用此代码替换并回复，如果不是 wokring :)

# c# - 使用 C# 代码声明 ComboBox 对象时的问题

> ID：15432788
> 
> 赞同：0
> 
> 时间：2013-03-15T12:41:54.380
> 
> 标签：c#, silverlight, combobox, windows-phone-8

我正在使用 silverlight 为窗口电话制作程序。

我有一个小问题，它是关于创建一个组合框。

我可以使用 xaml 创建它，但我应该使用 c# 代码声明它。

问题是在创建组合框的新实例并向其中添加项目后，组合框不会出现！！

编码：

```
 TextBlock tb = new TextBlock();
        tb.Text = "Select your arrival status";

        tb.Margin = new Thickness(5.0);
        tb.FontSize = 20;
        tb.Foreground = new SolidColorBrush(Colors.White);

        ComboBox cb = new ComboBox();
        ObservableCollection<string> testList = new ObservableCollection<string>();
        testList.Add("Hi");
        testList.Add("Hi1");
        testList.Add("Hi2");
        cb.DataContext = testList;
        cb.Height = 50;
        cb.Width = 200;
        cb.Foreground = new SolidColorBrush(Colors.White);

        panel.Children.Add(tb);
        panel.Children.Add(cb); 
```

从代码中可以看出，我已经声明了一个 TextBlock 和一个 Combobox 对象。TextBox 对象出现，而 Combobox 不出现。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:48:16.943

你需要给它分配一个位置。您的组合框很可能位于您的文本框下方。要么使用设计器和 xaml 创建它们两个，要么确保为它们分配 x,y 坐标。使用 Margin 属性以及 Horizo​​ntalAlignment 和 VerticalAlignment。

# ruby-on-rails-3 - Rails belongs_to 关联不起作用

> ID：15432789
> 
> 赞同：0
> 
> 时间：2013-03-15T12:41:56.690
> 
> 标签：ruby-on-rails-3, activerecord

这是我的课程模型

```
class Course < ActiveRecord::Base
  attr_accessible :longdescription, :shortdescription, :title, :published_at
  has_many :lessons,  :foreign_key => 'course_id'
end 
```

这是我的课程模型

```
class Lesson < ActiveRecord::Base
  belongs_to :course, :class_name => 'Course'
  attr_accessor :course_id
  attr_accessible :description, :title, :course_id
end 
```

我创建了属于课程的课程。课程创建成功

```
 Lesson.create(:title => "testing", :description => "causing problems", :course_id => 1) 
```

但是当我获取课程记录时，我得到了 course_id=nil。任何帮助？？？

```
<Lesson id: 8, title: "testing", description: "causing problems", course_id: nil, created_at: "2013-03-15 12:56:36", updated_at: "2013-03-15 12:56:36"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:02:59.430

`attr_accessor :course_id`在您的`Lesson`模型中删除。这将覆盖活动记录的默认行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:03:10.513

您需要删除`attr_accessor :course_id`模型中的行。如果你有这一行，它会在你的模型中创建以下与默认定义的方法冲突

```
def course_id
  @course_id
end

def course_id=(cid)
  @course_id = cid
end 
```

# iphone - 在为 `tableHeaderView` 设置动画时为 `UITableView` 标头设置动画

> ID：15432792
> 
> 赞同：3
> 
> 时间：2013-03-15T12:42:01.347
> 
> 标签：iphone, ios, uitableview, core-animation

对于“[如何调整 UITableView 的 tableHeaderView？ ”的答案，我在](https://stackoverflow.com/questions/341256/how-to-resize-a-tableheaderview-of-a-uitableview/15416193#15416193)[github](https://github.com/besi/ios-quickies/#resizetableheaderviewanimated)上创建了一个小项目，它向 a 添加了一个标题视图，`UITableView`并为新添加的标题视图和它下面的单元格设置了动画。

但是，一旦我添加标题单元格，我就会遇到令人讨厌的 UI 故障，因为标题不会与以下单元格一起动画`UITableView`：

当我添加标题时，会发生以下步骤：

1.  **问题**：最上面的标题跳转到原始位置
2.  The`tableHeaderView`和`UITableViewCell`s 一起动画到它们的最终位置。

所以我的问题是，我如何确保标题也有动画。

您可以在此处看到效果，其中`Section-1`位于最终位置，而单元格和标题视图仍在动画中：

![标头故障](../Images/6c032c5359b98538556fa957a0faf902.png)

这是我做动画的方法：

```
- (void) showHeader:(BOOL)show animated:(BOOL)animated{

    CGRect closedFrame = CGRectMake(0, 0, self.view.frame.size.width, 0);
    CGRect newFrame = show?self.initialFrame:closedFrame;

    if(animated){
        // The UIView animation block handles the animation of our header view
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.3];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        // beginUpdates and endUpdates trigger the animation of our cells
        [self.tableView beginUpdates];
    }

    self.headerView.frame = newFrame;
    [self.tableView setTableHeaderView:self.headerView];

    if(animated){
        [self.tableView endUpdates];
        [UIView commitAnimations];
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T22:50:56.593

这将解决它，但我不确定您是否需要`beginUpdates`and`endUpdates`在本课程的另一部分。因为`dataSource`在这个例子中你并没有真正改变。

```
- (void)showHeader:(BOOL)show animated:(BOOL)animated {

    CGRect closedFrame = CGRectMake(0, 0, self.view.frame.size.width, 0);
    CGRect newFrame = show?self.initialFrame:closedFrame;

    if(animated){
        // The UIView animation block handles the animation of our header view
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.3];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        // beginUpdates and endUpdates trigger the animation of our cells
        //[self.tableView beginUpdates];
    }

    self.headerView.frame = newFrame;
    [self.tableView setTableHeaderView:self.headerView];

    if(animated){
        //[self.tableView endUpdates];
        [UIView commitAnimations];
    }
} 
```

# ios - 即使在 iPhone 未连接到 Internet 后仍收到设备令牌

> ID：15432793
> 
> 赞同：3
> 
> 时间：2013-03-15T12:42:05.237
> 
> 标签：ios, push-notification, apple-push-notifications, devicetoken

我正在测试我的 iOS 应用程序，我发现一件有趣的事情，即使我的手机处于飞行模式并且我也关闭了 WIFI，我的应用程序能够在注册推送通知后接收设备令牌。

即使在从 iPhone 中删除应用程序及其相关证书后，我也尝试过。

但得到了相同的结果。

怎么可能，有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:51:52.687

这是来自 APNS 编程指南：

> 通过在每次启动应用程序时请求设备令牌并将其传递给提供者，您可以帮助确保提供者拥有设备的当前令牌。如果用户将备份还原到为其创建备份的设备或计算机之外的设备或计算机（例如，用户将数据迁移到新设备或计算机），他或她必须至少启动一次应用程序才能使其恢复再次收到通知。如果用户将备份数据恢复到新设备或计算机，或重新安装操作系统，则设备令牌会更改。此外，永远不要缓存设备令牌并将其提供给您的提供商；始终在需要时从系统获取令牌。 **如果您的应用程序之前已注册，则调用 registerForRemoteNotificationTypes: 会导致操作系统立即将设备令牌传递给委托，而不会产生额外的开销。**

这意味着如果您的应用程序已注册推送通知，则调用`registerForRemoteNotificationTypes`不会访问 APNS 服务器。

您卸载该应用程序的事实并没有从 APNS 取消注册它。您可以通过在卸载应用程序后立即调用反馈服务来向自己证明这一点。在这种情况下，您不会从反馈服务中获取设备令牌，因为 APN 服务不知道您卸载了该应用程序。只有在您卸载应用后向设备发送通知时，APN 服务才会知道应用已被卸载。

# c++ - cvSnakeImage() OpenCV API 示例/文档

> ID：15432797
> 
> 赞同：2
> 
> 时间：2013-03-15T12:42:14.230
> 
> 标签：c++, opencv, image-processing, computer-vision, feature-detection

**任何人都可以向我推荐有关如何使用 cvSnakeImage() 的任何教程/文档。**

我已参考[此](http://opencv.willowgarage.com/documentation/c/video_motion_analysis_and_object_tracking.html#snakeimage)链接，但未提供示例。

我想使用这个 cvSnakeImage() 在图像上执行活动轮廓模型。

![图片](../Images/3cff10d6bf432a12660a5fe31924f90b.png)

阈值化后的图像是眼睛，黑色的东西是眼睛瞳孔。我想使用**cvSnakeImage()**检测（绘制圆形）此图像中的眼睛瞳孔（某种约束，我只能使用此函数）。

C++平台

**任何人都可以向我推荐有关如何使用 cvSnakeImage() 的任何教程/文档。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:55:32.743

C++ 示例的链接：

*   [C++ 示例代码](http://download.andol.info/cvsnakeimage.cpp)

# c# - 替换通用列表中的两个字节

> ID：15432804
> 
> 赞同：7
> 
> 时间：2013-03-15T12:42:28.540
> 
> 标签：c#, .net

我想用一个字节替换我中那些神奇的 2 字节包中的`List<byte>`每一个：

> { 0xF8, 0x00 } -> 替换为 0xF8
> { 0xF8, 0x01 } -> 替换为 0xFB
> { 0xF8, 0x02 } -> 替换为 0xFD
> { 0xF8, 0x03 } -> 替换为 0xFE

例如：

```
List<byte> message 
    = new List<byte> { 0xFF, 0xFF, 0xFB, 0xF8, 0x00, 0xF8, 0x01, 0xF8, 0x02, 0xF8, 0x03, 0xFE };

// will be converted to:

List<byte> expected 
    = new List<byte> { 0xFF, 0xFF, 0xFB, 0xF8, 0xFB, 0xFD, 0xFE, 0xFE }; 
```

* * *

到目前为止，这是我的解决方案，它有效，但我不喜欢它，因为它的可读性很差：

```
public static void RemoveEscapeSequences(List<byte> message)
{
    // skipped parameter checks
    for (int index = 0; index < message.Count - 1; ++index)
    {
        if (message[index] == 0xF8)
        {
            // found an escaped byte, look at the following byte to determine replacement
            switch (message[index + 1])
            {
                case 0x0:
                    message[index] = 0xF8;
                    message.RemoveAt(index + 1);
                    break;
                case 0x1:
                    message[index] = 0xFB;
                    message.RemoveAt(index + 1);
                    break;
                case 0x2:
                    message[index] = 0xFD;
                    message.RemoveAt(index + 1);
                    break;
                case 0x3:
                    message[index] = 0xFE;
                    message.RemoveAt(index + 1);
                    break;
            }
        }
    }
} 
```

是否有更短的解决方案以提高可读性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:49:33.457

你可以做这样的事情 - 但它会稍微慢一些：

```
public static void RemoveEscapeSequences(List<byte> message)
{
    var replaceBytes = new Dictionary<byte, byte>()
    {
        {0x00, 0xF8}, {0x01, 0xFB}, {0x02, 0xFD}, {0x03, 0xFE}
    };

    // skipped parameter checks
    for (int index = 0; index < message.Count - 1; ++index)
    {
        if (message[index] == 0xF8)
        {
            if(replaceBytes.ContainsKey(message[index + 1]))
            {
                message[index] = replaceBytes[message[index + 1]];
                message.RemoveAt(index + 1);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:53:38.590

您可以使用以下扩展方法：

```
public static IEnumerable<byte> Escape(this IEnumerable<byte> source)
{
    if (source == null)     
        throw new ArgumentNullException("source");

    using (var enumerator = source.GetEnumerator())
    {
        while (enumerator.MoveNext())
        {
            byte current = enumerator.Current;

            if (current != 0xF8)
            {
                yield return current;
                continue;
            }

            if (!enumerator.MoveNext())
                yield return current;

            byte next = enumerator.Current;

            switch (next)
            {
                case 0x00: yield return 0xF8; break;
                case 0x01: yield return 0xFB; break;
                case 0x02: yield return 0xFD; break;
                case 0x03: yield return 0xFE; break;
                default:
                    yield return current;
                    yield return next;
                    break;
            }
        }
    }
} 
```

用法：

```
List<byte> result = message.Escape().ToList();

foreach(var b in message.Escape())
     Console.Write("0x{0:x} ", b); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:58:34.297

这是一个非常简单/易于理解的版本，它也应该很有效：

```
private static List<byte> ComputeBytes(List<byte> input)
{
    byte magicValueFirstByte = 0xF8;
    var secondByteToBeReplaced = new List<byte> { 0x00, 0x01, 0x02, 0x03 };
    var replacements = new List<byte> { 0xF8, 0xFB, 0xFD, 0xFE };

    var output = new List<byte>();
    for (int i = 0; i < input.Count; i++)
    {
        var currentValue = input[i];
        if (currentValue == magicValueFirstByte && i < input.Count - 1)
        {
            int index = secondByteToBeReplaced.IndexOf(input[i + 1]);
            if (index >= 0)
            {
                // Then when must replace
                output.Add(replacements[index]);

                // Skip next item
                i++;

                continue;
            }
        }

        // Won't replace value, so add current one
        output.Add(currentValue);
    }

    return output;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T13:20:22.287

为什么不将替换字节放在一个小数组中？

```
private static byte[] EscapeBytes = new byte[]
{
    /* 0x00 */ 0xF8,
    /* 0x01 */ 0xFB,
    /* 0x02 */ 0xFD,
    /* 0x03 */ 0xFE
}; 
```

然后你可以简单地索引数组：

```
public static List<byte> RemoveEscapeSequences(List<byte> message)
{
    List<byte> result = new List<byte>(message.Count);
    bool escape = false;
    foreach (byte value in message)
    {
        if (escape)
        {
            escape = false;
            // Replace the byte. NOTE 1!
            result.Add(EscapeBytes[value]);
        }
        else if (value == 0xF8)
        {
            // Started an escape sequence.
            escape = true;
        }
        else
        {
            // Just add the byte.
            result.Add(value);
        }
    }
    return result;
} 
```

通过将字节添加到容量已经足以容纳结果的新列表中，您甚至可以获得更高的性能和更多的可读性。

**注 1**：当`0xF8`转义字节后的字节不在 0 和 3 之间时，`IndexOutOfRangeException`会发生 an。如果您关心，您将不得不添加一个小检查以查看字节值是否在范围内，并决定如果不是则做什么（不替换字节，删除转义，抛出异常）。

# iphone - 应用内购买在 iOS 5 中不起作用

> ID：15432805
> 
> 赞同：2
> 
> 时间：2013-03-15T12:42:30.643
> 
> 标签：iphone, ios, objective-c, ios5

我已经成功地在我的应用程序中集成了应用程序购买。我已经按照[本](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)教程进行应用程序购买。它在 iOS 6 上运行良好。但是当我尝试在 ios 5.1 模拟器上测试它时，比每次我尝试登录购买产品时都要好我只是得到以下错误。

**事务错误：发生未知错误**

是的，当我在 ios 5.1 模拟器上测试它时，我的 mac 键盘也无法正常工作，我必须从模拟器键盘输入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T12:45:36.183

您无法在 iOS5 模拟器中可靠地测试应用内购买。您需要在设备上对其进行测试。

并且键盘不能用于应用内购买登录曾经非常烦人。

# java - 相对路径 FileNotFoundException

> ID：15432808
> 
> 赞同：2
> 
> 时间：2013-03-15T12:42:33.177
> 
> 标签：java, path, log4j, relative-path

我在项目上创建了两个不同的java项目依赖于其他和

像 A 项目和 B 项目 A 项目有日志文件夹，在 log4j.xml 我已经给出了日志文件的相对路径现在我在 B 项目中使用 A 项目作为 api 并且我在调用 B 时创建了 B 项目的可执行 jar正在给我 FileNotFoundException。

请建议我......

```
log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: ..\Framework\logs\log.log (The system cannot find the path specified)
    at java.io.FileOutputStream.openAppend(Native Method)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at org.apache.log4j.FileAppender.setFile(FileAppender.java:273)
    at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:152)
    at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:206)
    at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:247)
    at org.apache.log4j.xml.DOMConfigurator.parseAppender(DOMConfigurator.java:210)
    at org.apache.log4j.xml.DOMConfigurator.findAppenderByName(DOMConfigurator.java:140)
    at org.apache.log4j.xml.DOMConfigurator.findAppenderByReference(DOMConfigurator.java:153)
    at org.apache.log4j.xml.DOMConfigurator.parseChildrenOfLoggerElement(DOMConfigurator.java:415)
    at org.apache.log4j.xml.DOMConfigurator.parseRoot(DOMConfigurator.java:384)
    at org.apache.log4j.xml.DOMConfigurator.parse(DOMConfigurator.java:783)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:666)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:616)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:602)
    at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:460)
    at org.apache.log4j.LogManager.<clinit>(LogManager.java:113)
    at com.netapp.ca.framework.logger.LogImpl.<init>(LogImpl.java:35)
    log4j:ERROR Either File or DatePattern options are not set for appender [allLog].
log4j:ERROR setFile(null,true) call failed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:13:38.447

目前尚不清楚您要做什么，但简单来说，Log4J 似乎找不到您在`log4j.xml`配置中指定的日志文件。

在为 Log4J 指定日志目录时最好使用绝对路径，但如果您坚持使用相对路径，请确保您绝对确定哪个目录是您的应用程序的“工作目录”。

您可以使用以下代码记录应用程序的工作目录（将其放入 Java 可执行文件`main`方法中）：

```
System.out.println(System.getProperty("user.dir"));
```

知道工作目录后，您可以更新`log4j.xml`配置中的日志文件路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:08:27.847

我认为您是从 jar 执行的，因此（当然）路径是错误的，因为您无法（通常）将日志文件保存在 jar 中。

我遇到了同样的问题，并编写了以下方法来接收我的应用程序可以工作的路径：

```
String applicationPath = this.getClass().getProtectionDomain().getCodeSource().getLocation().getPath();
applicationPath = applicationPath.replace('\\', '/');
if (applicationPath.startsWith("file:")) applicationPath = applicationPath.substring(5);
if (applicationPath.contains(".jar")) {
    String[] parts = applicationPath.split("/");
    applicationPath = applicationPath.replaceAll(parts[parts.length - 1], "");
} 
```

我不知道您的应用程序的结构，但我认为这段代码可以帮助您。只需将“applicationPath”写入控制台，您就知道路径出了什么问题。我敢打赌，这就像罐子问题。

# ruby-on-rails - 在 Rails 3 中修改 respond_to

> ID：15432809
> 
> 赞同：0
> 
> 时间：2013-03-15T12:42:39.813
> 
> 标签：ruby-on-rails, respond-to

这是前提：

我有一个名为 Rules 的模型，它有一个相应的控制器和视图。我希望用户能够从他们的仪表板创建一个新规则，它有一个单独的视图和控制器。

仪表板有三个选项卡，分别称为“规则”、“规则集”和“游戏”。每个选项卡都有自己的部分，所以对于规则，我使用的是 _rules.erb 部分，看起来像这样

```
<div id="dashboard-rules" class="dashboard-panel ui-nav-panel">
  <%= button_to'Create A Rule', '#', id: "create-rule-btn", class: "btn btn-primary" %>

  <div id="create-rule-form-container">
  </div>

...

</div> 
```

使用 jQuery，我正在加载由规则控制器控制的新规则页面的内容，就像这样......

```
$('#create-rule-btn').click (e) ->
    e.preventDefault()
    $('#create-rule-form-container').load('/rules/new.html .form-horizontal') 
```

这仅从 rules/new.html 加载表单。我的问题是，当我单击“保存规则”按钮时，它会重定向到 /rules URL。然后要么显示错误，要么说“规则已成功保存”。我希望它不要重定向并在仪表板中显示错误......再次，不要重定向到 /rules URL。

这是我的规则创建操作，我认为需要修改，我只是不确定如何：

```
def create
  @rule = Rule.new(params[:rule])

  respond_to do |format|
    if @rule.save
      format.html { redirect_to @rule, notice: 'Rule was successfully created.' }
      format.json { render json: @rule, status: :created, location: @rule }
    else
      format.html { redirect_to :controler => "dashboard"}
      format.json { render json: @rule.errors, status: :unprocessable_entity }
    end
  end
end 
```

我知道我必须摆弄 respond_to 是如何工作的，我只是不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:08:40.237

请记住，您需要在创建操作中设置您在仪表板中设置的所有变量，以便以下操作起作用。这是因为您正在渲染与仪表板相同的模板，因此您需要再次设置变量。

```
if @rule.save
  format.html { redirect_to dashboard_path, notice: 'Rule was successfully created.' }
  format.json { render json: @rule, status: :created, location: @rule }
else
  # initialize the variables needed on the dashboard here
  format.html { render template: 'dashboard/index' }
  format.json { render json: @rule.errors, status: :unprocessable_entity }
end 
```

另一种解决方案是通过 ajax 提交表单，并在保存规则时刷新页面。

更新：快速js解决方案

在创建规则的表单中，添加以下内容

```
form_for @rule, html: { remote: true } do |f| 
```

这将通过 ajax 提交表单。在您的控制器中，`format.js`在每个之后添加一行`format.json`

```
format.json { ... }
format.js 
```

然后创建一个`app/views/rules/create.js.erb`（或haml）文件。在文件中，你可以添加任何你想要的js，所以添加以下内容

```
<% if @rule.errors.any? %>
  # add js here to append the errors in the page
<% else %>
  window.location.reload
<% end %> 
```

# asp.net - 单元测试：真实数据库与模拟

> ID：15432810
> 
> 赞同：1
> 
> 时间：2013-03-15T12:42:40.623
> 
> 标签：asp.net, asp.net-mvc, entity-framework, unit-testing, moq

我正在对我们团队正在构建的 asp.net MVC 3 Web 应用程序进行单元测试。

问题是我们必须模拟很多东西，而我们的单元测试并没有涵盖所有的网络服务器和数据库相关的东西。

例子：

我有一个带有以下代码的方法：

```
public List<Useraccount> GetUseraccounts(Company company)
{
    return company.Useraccounts.ToList<Useraccount>();
} 
```

我的开发人员抱怨说他必须注入一个他自己准备的假公司对象。他想从数据库中获得一个真实的对象。

我的问题：是否可以在单元测试中使用真正的数据库（也可以是 SQLite/SQLExpress 或其他东西）？这有用吗？优缺点都有什么？

如果没有真正的数据库，我们需要模拟太多的对象。例如，我们无法验证此类调用是否有效：

```
Useraccount useraccount = UnitOfWork.UseraccountRepository.Get(u => u.EnableCode == enableCode && u.IsEnabled == false).Single<Useraccount>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:26:11.907

针对真实数据库的测试是集成测试，而不是单元测试。您仍然可以以与单元测试相同的方式运行集成测试 - 也就是说，通过 nunit 或 mstest 或其他方式运行它们，并通过构建服务器上的命令行或类似方式运行它们 - 但还有一些额外的步骤：

1.  您需要设置测试数据，将其注入数据库，运行测试，然后再次删除测试数据。在理想情况下，您会在集成测试运行开始时创建一个测试数据库，然后运行所有测试，然后在所有集成测试完成后将其删除。不过，这可能是不切实际的。

2.  您的集成测试将比单元测试运行得慢得多。通过运行它们来为此做好准备，例如，在构建服务器作业中每晚运行。

在使用 SqlLite 或其他方面，我会说不要使用您在现实世界中使用的确切类型的数据库，否则它不是一个值得信赖的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:52:06.847

尝试使用[Effort](http://effort.codeplex.com/)工具。[Effort](http://effort.codeplex.com/)是一个强大的工具，可以方便地为基于实体框架的应用程序创建自动化测试。它基本上是一个 ADO.NET 提供程序，它在轻量级进程内主内存数据库而不是传统的外部数据库上执行所有数据操作。它还提供了一些直观的帮助器方法，可以很容易地将此​​提供程序与现有的 ObjectContext 或 DbContext 类一起使用。对现有代码的简单添加可能足以创建可以在没有外部数据库存在的情况下运行的数据驱动测试。

# c# - 为什么 JsonResult 返回更改后的 Json（使用 \" 而不是 "）？

> ID：15432812
> 
> 赞同：0
> 
> 时间：2013-03-15T12:42:45.627
> 
> 标签：c#, asp.net-mvc, json, serialization

我在 WebApi 控制器中编写了以下操作：

```
public JsonResult GetData()
    {
        _client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

        var item = new Item();
        item.GenerateData();

        var jsonMediaTypeFormatter = new JsonMediaTypeFormatter
            {
                UseDataContractJsonSerializer = true
            };

        var jsonSerializer = new JsonSerializer();

        var serializedData = jsonSerializer.Serialize(jsonMediaTypeFormatter, item);

        var jsonResult = new JsonResult
        {
            ContentType = "application/json",
            Data = serializedData,
            JsonRequestBehavior = JsonRequestBehavior.AllowGet,
        };

        return jsonResult;
    } 
```

该行： var serializedData = jsonSerializer.Serialize(jsonMediaTypeFormatter, item);

将数据序列化为 Json，因此我有：

```
{"Class":{"Valid":{"From":"\/Date(1363302000000+0100)\/","To":"\/Date(43017433200000+0100)\/"},"Code":3,"Id":3,"Name":"Class3"}, 
```

等等..（不是完整的Json）

但是 JsonResult 返回的 Json 不同：

```
{"ContentEncoding":null,"ContentType":"application\/json","Data":"{\"Class\":{\"Valid\":{\"From\":\"\\\/Date(1363302000000+0100)\\\/\",\"To\":\"\\\/Date(43017433200000+0100)\\\/\"},\"Code\":3,\"Id\":3,\"Name\":\"Class3\"}, 
```

注意文本中的*“”*。为什么会这样？如何更改它？我无法弄清楚..

**编辑** *JsonSerializer* JsonSerializer 是我的助手类，它使用 DataContractJsonSerializer 将数据序列化为 Json，其代码如下：

```
public class JsonSerializer
{
    public string Serialize<T>(MediaTypeFormatter formatter, T value)
    {
        // Create a dummy HTTP Content.
        Stream stream = new MemoryStream();
        var content = new StreamContent(stream);

        // Serialize the object.
        formatter.WriteToStreamAsync(typeof(T), value, stream, content, null).Wait();

        // Read the serialized string.
        stream.Position = 0;
        return content.ReadAsStringAsync().Result;
    }
} 
```

我想要的是它的执行结果——并且没有被改变——返回给用户

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:45:09.203

`JsonResult`已经将您放入`Data`的任何内容序列化为 JSON。

您的代码在设置之前手动序列化为 JSON `Data`，这会导致输出包含双序列化对象（`item`首先手动序列化为 JSON 字符串，然后使用 JSON 规则*再次*序列化该字符串 - 这是第二个序列化正在逃避您的引号）。

虽然从技术上讲，我们不能排除双重序列化是故意进行的可能性，但很可能您应该做的是

```
var jsonResult = new JsonResult
    {
        ContentType = "application/json",
        Data = item,
        JsonRequestBehavior = JsonRequestBehavior.AllowGet,
    }; 
```

如果您不想序列化两次但需要手动序列化，请`ContentResult`改用：

```
return new ContentResult
       {
           ContentType = "application/json",
           Content = serializedData,
       }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:45:45.910

双引号被转义。这既是预期的也是期望的行为——它可以防止字符串（如保存 JSON 数据的字符串）过早关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:21:49.560

`Json()`为什么不直接使用为您构建结果对象的内置方法？

```
public JsonResult GetData()
{
    _client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

    var item = new Item();
    item.GenerateData();

    return Json(item);
} 
```

如果您需要详细控制序列化的完成方式，您可以[创建自己的`JsonResult`类版本并覆盖`Execute()`](https://stackoverflow.com/a/6884503/38055). 该帖子还建议为您的控制器创建一个覆盖该`Json()`方法的基类，但我宁愿创建一个扩展方法`Controller`- 一方面，这不会对您的控制器提出任何基类要求，另一方面如果您需要它，它不会隐藏默认行为：

```
public static class ControllerExtensions
{
     public static JsonResult DataContractJson(this Controller ctrl, object data) {
         return new DataContractJsonResult { Data = data };
     }
} 
```

[这个答案](https://stackoverflow.com/a/9404233/38055)（与上述相同的问题）似乎完全完成了您正在做的事情 - 选择一个可以处理数据协定属性的 JSON 序列化程序。

# c++ - C++11 智能指针总是而不是 new/delete？

> ID：15432820
> 
> 赞同：5
> 
> 时间：2013-03-15T12:42:54.433
> 
> 标签：c++, performance, c++11, new-operator, smart-pointers

在 C++11 中，我们应该始终使用`unique_ptr`or`shared_ptr`代替`new`/`delete`吗？性能如何，智能指针慢得多？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T12:49:35.083

`unique_ptr`与使用原始指针相比，不（不应该）有任何运行时开销。`shared_ptr`确实有一些内存和时间开销（多少取决于实现）。如果您确实需要行为类似于 a 的东西，那么这里的*实际*开销很容易为零`shared_ptr`（也就是说，您认为没有其他实现会更快或更高效）。

这并不是说你永远不会在你的代码中使用 new/delete，但这不是你会一直做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:02:47.883

我更喜欢 shared_ptr 来处理原始内存，因为-

1) 它遵循[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)和[Counted body](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Counted_Body) idioms。

2) 保证对象被销毁，即使发生异常也会释放内存。

3) 不再需要决定何时新建/删除。

# eclipse - 告诉 Eclipse 一个项目已经在 Git 版本控制之下

> ID：15432822
> 
> 赞同：0
> 
> 时间：2013-03-15T12:43:02.010
> 
> 标签：eclipse, git, egit

如果我在 Eclipse 中有一个项目，使用`git clone`（或创建`git init`）签出，但没有通过签出`Import > Git > Projects from Git`，是否可以在不删除/移动项目并再次签出的情况下告诉 Eclipse？

# java - 在休眠中运行子查询时出现意外的令牌错误

> ID：15432823
> 
> 赞同：0
> 
> 时间：2013-03-15T12:43:08.597
> 
> 标签：java, hibernate

我正在尝试在休眠中运行子查询，但我得到了

```
nested exception is org.hibernate.hql.ast.QuerySyntaxException: unexpected token: 
where near line 1, column 183 
```

首先这里是SQL中的查询

```
select * 
from OS_Historystep hs1
where step_name = '011' 
and finish_date = (select max(finish_date) 
                      from OS_Historystep hs2 
                      where hs2.step_name = hs1.step_name
                      and hs2.ref_id = hs1.ref_id); 
```

为什么我收到此错误？这是我的休眠查询

```
StringBuffer query2 = new StringBuffer();
    query2.append(" from ");
    query2.append(WflWorkflowHistoryStep.class.getName());
    query2.append(" hs1 where hs1.stepName = " + workFlowStepName);
    query2.append(" and hs1.finishDate = (select max(hs2.finishDate) from "
            + WflWorkflowHistoryStep.class.getName() + " hs2 )");
    query2.append("where hs2.stepName = hs1.stepName and hs2.refId = hs1.refId");

    try {

        historyStepList = getHibernateTemplate().find(query2.toString());

    } catch (Exception e) {

        String message = e.getMessage();
        System.out.println();

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:50:12.870

如果你这样写出你的查询：

```
 from WflWorkflowHistoryStep hs1 
where hs1.stepName = ?
  and hs1.finishDate=(select max(hs2.finishDate) from WflWorkflowHistoryStep hs2)
                                                                                ^
where hs2.stepName = hs1.stepName and hs2.refId = hs1.refId
^^^^^ 
```

你看到你有两个 where 子句。我认为您可能打算将支架放在其他地方。

此外，使用参数 ( `?`) 而不是连接字符串，否则您将面临 HQL 注入攻击。

# mysql - TimeStamp 字段和 mysql curdate 有什么区别

> ID：15432825
> 
> 赞同：0
> 
> 时间：2013-03-15T12:43:09.087
> 
> 标签：mysql, timestamp

我正在工作，我的朋友告诉我使用`curdate()`on`mysql query`来获取`current date`服务器的...我告诉他我正在使用`Time_Stamp`字段作为日期/时间。
现在我开始思考，这两种方式有很大的不同吗？一个比另一个好？或者有什么东西使它不是`good practice`？还有一个`now()`也可以使用。我只是想了解它是如何工作的，或者哪个是最好的以及为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:47:23.917

精简版：

```
NOW() = CONCAT(CURDATE(), ' ', CURTIME());
CURDATE() = DATE(NOW()); 
```

一些解释：

`NOW()`获取日期 ( `CURDATE()`) 和时间 ( `CURTIME()`)。

所以如果我们反过来做，`CURDATE() = DATE(NOW())`.

关于`timestamp`，在[MySQL 数据类型](http://kimbriggs.com/computers/computer-notes/mysql-notes/mysql-data-types-50.file)中我们可以看到`timestamp`是 3 个字节，`datetime`而是 8 个字节。

# php - 如何在出售前保护一些 php 文件的安全

> ID：15432826
> 
> 赞同：-1
> 
> 时间：2013-03-15T12:43:12.827
> 
> 标签：php, joomla2.5, encryption, ioncube

我要出售我的产品，其中包含 joomla 站点的许可证密钥验证。所以我需要加密我的一些 php 文件以防止黑客攻击。我从早上开始就一直在搜索，但没有找到任何解决方案。试过对于 ioncube 软件。它加密文件。但它无法为我的服务器解密。防止某些文件被黑客攻击的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:47:10.930

所有的保护都可以被打破，你只能尽最大努力让诚实的人保持诚实，让那些不太在意的人不想碰你的代码。

Ioncube 可能是一个很好的解决方案。它在您的服务器上不起作用的原因可能是因为您根本没有包含该模块。

Ioncube 的另一个替代品是[Zend Guard](http://www.zend.com/en/products/guard/)。使用 Zend Guard 时，需要在服务器上安装[Zend Optimizer](http://www.zend.com/en/products/guard/runtime-decoders)，即运行时解码器。大多数产品都带有此功能，以提供更好的保护，而不是简单地在磁盘上编码文件并对其进行解码，这很容易被破解。

如果您的主要问题是再分发，请照此编写您的许可证，使其成为法律问题而不是代码问题。这就是为什么我们有律师来编写软件许可协议的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:49:13.277

IonCube 是伟大的恕我直言。您是否在服务器上安装了 IonCube Loader？

在这里获取：http: [//www.ioncube.com/loaders.php](http://www.ioncube.com/loaders.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:54:07.810

你可以让其他人更难。 [http://blog.builtbyprime.com/php/tiny-php-a-fun-php-minifier](http://blog.builtbyprime.com/php/tiny-php-a-fun-php-minifier) 如果我在你那里，这是我唯一会做的事情。

# vhdl - 未初始化的输入信号 isim

> ID：15432830
> 
> 赞同：0
> 
> 时间：2013-03-15T12:43:16.610
> 
> 标签：vhdl, hdl

我被以下情况困住了

我正在为 uart 设计一个 vhdl 项目。有两个组件，即 uart_rx.vhd 和 uart_tx.vhd。

我想 uart_tx 最初在接收到值“0”以发出信号时进入标记状态：准备就绪。信号就绪未初始化，即就绪 = 'U'。

uart_tx 等待来自 uart_rx.vhd 的输入。一旦 uart_tx 从 uart_rx 接收到“0”，FSM 就会转到 Start 而不是 Mark。

## 这是我使用的算法：

```
if ready = o
    state <= Mark
else
    state <= Start 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:29:02.307

编写一个测试平台和一个准备就绪的初始化：

```
signal ready : std_logic := '0'; 
```

# c# - 在 SSIS 变量中从数据库中设置文件路径以进行日志记录

> ID：15432836
> 
> 赞同：0
> 
> 时间：2013-03-15T12:43:40.247
> 
> 标签：c#, variables, logging, ssis

我的数据库表中有一些路径，如下所示：

```
ID          PATHXML              PATHPICT               PATHSONG
1         D:\XML\Here        D:\Picture\Image      D:\Blur\Song2
2         D:\XML\File        D:\Picture\X-Files    D:\IRONMAIDEN\Fearofthedark 
```

我想打开登录 SSIS 并将此日志结果保存到 PathSong 例如。D:\Blur\Song2\eventlog.log

我创建了一个变量来获取这条路径。但是当我使用这个变量创建一个表达式时，它不起作用。那么我能做些什么来解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:47:35.867

访问（数据流任务的）脚本组件中的包变量与访问脚本任务中的包变量不同。对于脚本组件，您首先需要打开脚本转换编辑器（右键单击组件并选择“编辑...”）。在“脚本”选项卡的“自定义属性”部分中，您可以输入（或选择）要在只读或读写基础上提供给脚本的属性：![在此处输入图像描述](../Images/c4ca82a72cc5be9ffb9047b0093b7b0f.png)

然后，在脚本本身中，变量将作为变量对象的强类型属性提供：

```
// Modify as necessary
public override void PreExecute()
{
    base.PreExecute();
    string thePath = Variables.FilePath;
    // Do something ...
}

public override void PostExecute()
{
    base.PostExecute();
    string theNewValue = "";
    // Do something to figure out the new value...
    Variables.FilePath = theNewValue;
}

public override void Input0_ProcessInputRow(Input0Buffer Row)
{
    string thePath = Variables.FilePath;
    // Do whatever needs doing here ...
} 
```

一个重要的警告：如果您需要写入包变量，您只能在`PostExecute()`方法中执行此操作。

关于代码片段：

```
IDTSVariables100 varCollection = null;
this.VariableDispenser.LockForRead("User::FilePath");
string XlsFile;

XlsFile = varCollection["User::FilePath"].Value.ToString(); 
```

varCollection 被初始化为 null 并且永远不会设置为有效值。因此，任何取消引用它的尝试都会失败。

# android - Android 模拟器：显示 GPU 过度绘制

> ID：15432837
> 
> 赞同：1
> 
> 时间：2013-03-15T12:43:41.653
> 
> 标签：android, emulation, gpu

自从我读过[这篇](http://www.curious-creature.org/docs/android-performance-case-study-1.html)文章以来，我一直在尝试创建一个可以使用“显示 GPU Overdraw”的模拟器。

我按照[这里](https://twitter.com/SmoleyPoleyOley/status/275377396985765889)和[那里](http://developer.android.com/tools/devices/emulator.html)的提示进行操作，但是在新工具中，当创建新的 AVD 时，我找不到启用 GPU 仿真的方法。这可能就是为什么我在模拟器中看不到 GPU Overdraw 的原因，尽管在模拟器的开发人员设置中有“显示 GPU 过度绘制”（注意：我通过 eclipse 运行模拟器并带有“-gpu on”选项）

那么有没有人能够拥有一个模拟器来显示 GPU Overdraw？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T12:54:30.857

它也适用于模拟器。

确保在设置 AVD 时启用了“使用主机 GPU”，并且您*需要*运行 Android 4.2。以前的 Android 版本不包含该功能。

除此之外，只需在开发者选项中启用“显示 GPU Overdraw”设置，然后重新启动您要分析的应用程序即可。

您需要确保应用程序启用了硬件加速，否则它不会被 GPU 绘制，因此您无法显示 GPU 过度绘制。或者，在 Android 设备的开发人员设置中使用“强制 GPU 渲染”选项。

这是运行 Android 4.2 并启用该选项的模拟器的屏幕截图：

![在此处输入图像描述](../Images/50c2b35f17e17b95889dccad19331373.png)

这是我的 AVD 设置，如果你想看看：

![在此处输入图像描述](../Images/8197529ba7d4aa503650558741e3fe08.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:31:12.167

您必须编译为在 AndroidManifest 上至少有一个 minVersion=4 并编译为 target=14

# java - Axis2 1.4.1 可以调用带有 net.pipe//host... 的端点吗？

> ID：15432841
> 
> 赞同：1
> 
> 时间：2013-03-15T12:44:01.647
> 
> 标签：java, web-services, url, pipe, axis

我们有一个使用 Axis2 1.4.1 框架的 Web 服务客户端，目前我们只使用类似`http://...`. 但是现在我们必须将其更改为所谓的`net.pipe`URL。

是否可以仅配置此新`net.pipe`URL 或者此 Axis2 框架版本无法实现？

# java - 如何在静态 main 中使用非静态方法（观察者方法）

> ID：15432843
> 
> 赞同：1
> 
> 时间：2013-03-15T12:44:07.203
> 
> 标签：java, oop, design-patterns

想在静态主要中使用非静态方法，但我不能。我知道这个问题，但是因为我使用 INotificationObserver，所以我不能将 registerObserver 设为静态。所以我可以解决我的问题。

我怎么解决这个问题 ？？谢谢 。

非静态变量 this 不能从静态上下文中引用

**测试**

```
 public class PushTest implements INotificationObserver{    
   NotificationService ns = NotificationService.getInstance(); 

    public static void main(String[] args) {         
        try {                        
            ns.registerObserver(this); // How can i register ??? 
```

**界面**

```
public interface INotificationSubject {
    public  void registerObserver(INotificationObserver o);
    public void removeObserver(INotificationObserver o);
    public void notifyObserver(PushedNotification notification);
} 
```

**通知服务 **

```
public class NotificationService implements  INotificationSubject{

    protected static final Logger logger = Logger.getLogger(NotificationService.class);
    private volatile static NotificationService uniqueFactory;
      private ArrayList observers;

    private NotificationService() {
      observers = new ArrayList();
    }
    public static NotificationService getInstance() {
        if (uniqueFactory == null) {
            synchronized (NotificationService.class) {
                if (uniqueFactory == null) {
                    uniqueFactory = new NotificationService();
                }
            }
        }
        return uniqueFactory;
    }

    public static INotification GetNotificationObject(DeviceTypes Types) {
        INotification messageSender = null;

        if (Types == Types.IOS) {
            messageSender = new IosNotification();
        }

        return messageSender;
    }

    public void registerObserver(INotificationObserver o) {
        observers.add(o);
    }

    public void removeObserver(INotificationObserver o) {
        int i =
                observers.indexOf(o);
        if (i >= 0) {
            observers.remove(i);
        }
    }

    public void notifyObserver(PushedNotification notification) {
        for (int i = 0; i < observers.size(); i++) {
            INotificationObserver observer = (INotificationObserver) observers.get(i);
            observer.update(notification);
        }
    }

    public void messageSendInfo(PushedNotification notification) {
        notifyObserver(notification);
    }

    public void showSentInfo(PushedNotification notification) {
        messageSendInfo(notification);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:47:06.973

你需要一个实例：

```
INotificationObserver ino = new PushTest();
ns.registerObserver(ino); 
```

因此，您不需要该`ns`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:47:03.127

典型的解决方案是在 main 方法中初始化你的类：

```
public class PushTest implements INotificationObserver{
    NotificationService ns = NotificationService.getInstance();

    public static void main(String[] args) {         
        PushTest pushTest = new Pushtest();
        ... 
```

等等等等

# hp-ux - 常见问题：表格显示在邮件内容中，而不是作为附件

> ID：15432852
> 
> 赞同：0
> 
> 时间：2013-03-15T12:44:40.103
> 
> 标签：hp-ux, mailx

要求是从 UNIX 服务器发送报告。我有一个要在报告上显示的数据列表，比如说来自数据库。我正在使用 sendexchange 发送邮件。它始终以纯文本格式发送，并且数据未正确对齐显示。我已经用固定宽度分隔了所有列，但我仍然没有正确对齐数据。

这是我的设置：

1.  我正在使用 HP-UX
2.  我只有 sendexchange、mailx 和邮件实用程序来发送邮件
3.  我不想将数据显示为附件，而是显示在邮件的内容中。
4.  邮件内容应为：

内容 - 报告描述（可能是标题）

在此之下，详细信息应在表格中

该表由一个包含列名的标题和保存数据的行组成

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:05:00.933

这里有两个问题。一是电子邮件的实际内容，二是如何在收件人的显示器上显示。不幸的是，您只能控制第一个。

下面是我的做法：通过使用 perl 而不是 shell 脚本创建邮件的内容，您可以`format`根据自己的选择来对齐数据。您可以选择使文本居中、向右或向左调整，以及围绕小数点调整数字，如有必要，可以填充它们。

做`man perlform`或`perldoc perlform`获取完整信息，如果您需要帮助确定如何让它看起来像您想要的那样，请在上面发布问题！

**回到介绍：** 您仍然不能保证邮件看起来很好的原因是收件人可能会更改他们自己的电子邮件客户端，这将影响邮件的显示方式 - 例如，即使您确实将所有内容设置为对齐正确使用等宽字体，收件人可能会选择以 Arial 格式查看它，这**会**弄乱格式。

# openmp - 私有的 OpenMP FORTRAN 问题

> ID：15432853
> 
> 赞同：0
> 
> 时间：2013-03-15T12:44:41.793
> 
> 标签：openmp, fortran90

在下面的代码中，当我将变量“ *aa* ”作为私有传递时，结果变得很糟糕。该代码工作正常，它是如何发布的，但是当我替换该行时

```
 !$OMP PARALLEL PRIVATE(iii,iter,y,i,yt) SHARED(bb) 
```

和

```
 !$OMP PARALLEL PRIVATE(aa,iter,y,i,yt) SHARED(bb) 
```

代码无法正常工作。

```
 !!!!!!!! module 
      module common
      use iso_fortran_env
      implicit none
      integer,parameter:: dp=real64
      real(dp):: aa,bb

       contains

      subroutine evolve(y,yevl)
      implicit none
      integer(dp),parameter:: id=2
      real(dp),intent(in):: y(id)
      real(dp),intent(out):: yevl(id)
        yevl(1)=y(2)+1.d0-aa*y(1)**2
        yevl(2)=bb*y(1)
      end subroutine evolve

      end module common

      use common
      implicit none
      integer(dp):: iii,iter,i
      integer(dp),parameter:: id=2
      real(dp),allocatable:: y(:),yt(:)
      integer(dp):: OMP_GET_THREAD_NUM, IXD

       allocate(y(id)); allocate(yt(id)); y=0.d0; yt=0.d0; bb=0.3d0
       !$OMP PARALLEL PRIVATE(iii,iter,y,i,yt) SHARED(bb)
         IXD=OMP_GET_THREAD_NUM()
       !$OMP DO
        do iii=1,20000; print*,iii  !! EXPECTED THREADS TO BE OF 5000 ITERATIONS EACH
          aa=1.d0+dfloat(iii-1)*0.4d0/2000.d0
            loop1: do iter=1,10 !! THE INITIAL CONDITION LOOP
               call random_number(y)!! RANDOM INITIALIZATION OF THE VARIABLE
                loop2: do i=1,70000  !! ITERATION OF THE SYSTEM
                    call evolve(y,yt)
                    y=yt
                enddo loop2     !! END OF SYSTEM ITERATION
              write(IXD+1,*)aa,yt  !!! WRITING FILE CORRESPONDING TO EACH THREAD
            enddo loop1 !!INITIAL CONDITION ITERATION DONE
         enddo
        !$OMP ENDDO
        !$OMP END PARALLEL
        end 
```

可能是什么问题？当我从“ *iii* ”生成“ *aa* ”时工作正常，但当我将它作为私有变量传递时却不行。提前感谢您的任何意见或建议。

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:52:42.620

`aa`是一个模块变量。模块变量可以共享（默认）或`threadprivate`. OpenMP 标准文档中的示例 A.32.2f 说明*当在构造的动态范围内访问模块变量时，未指定访问的是原始变量还是私有线程副本*。这不是`threadprivate`变量的情况，因为它们总是存储在线程本地存储中，无论是否在并行区域的词法范围内使用。

如果您将模块变量声明为私有然后将其访问到子例程中，会发生很多情况。最有可能发生的情况取决于编译器对代码进行的分析。一些编译器可能会检测到模块子例程仅在并行区域内被调用，因此会`aa`引用每个线程的私有副本。其他编译器可能决定始终访问原始模块变量。另一方面，如果子例程在调用子例程中被内联，那么它可能引用`aa`在调用上下文中使用的相同（例如，私有版本 if`aa`被声明`private`）

以下是在默认优化级别如何`gfortran`处理的示例：`PRIVATE(iii,aa,iter,y,i,yt)`

```
; aa is declared as a global symbol in the BSS section
    .globl  __common_MOD_aa
    .bss
    .align 8
    .type   __common_MOD_aa, @object
    .size   __common_MOD_aa, 8
__common_MOD_aa:
    .zero   8

; Here is how evolve accesses aa
    ...
    movsd   __common_MOD_aa(%rip), %xmm2
    ...

; Here is how the assignment to aa is done inside the parallel region
    ...
    movsd   %xmm0, -72(%rbp)
    ... 
```

私有`aa`被实现为自动变量并存储在线程的堆栈中，同时`evolve`使用`aa`来自模块的值。因此这个运算符：

```
aa=1.d0+dfloat(iii-1)*0.4d0/2000.d0 
```

只改变`aa`线程内部的值，而`evolve`使用并行区域外部的原始值`aa`。

在高优化级别内`-O3` `gfortran`联`evolve`到并行区域和...

```
...
mulsd   __common_MOD_aa(%rip), %xmm2
... 
```

内联代码也指`aa`模块中的全局值，即两个优化级别之间的行为是一致的。

这同样适用于英特尔 Fortran。

正确的做法是声明`aa`是`threadprivate`和**不**把它放在一个`private`子句中：

```
module common
use iso_fortran_env
implicit none
integer,parameter:: dp=real64
real(dp):: aa,bb
!$OMP THREADPRIVATE(aa)
...
 !$OMP PARALLEL PRIVATE(iii,iter,y,i,yt) SHARED(bb)
   IXD=OMP_GET_THREAD_NUM()
   !$OMP DO
   do iii=1,20000; print*,iii  !! EXPECTED THREADS TO BE OF 5000 ITERATIONS EACH
     aa=1.d0+dfloat(iii-1)*0.4d0/2000.d0
... 
```

Now both the parallel region and `evolve` will use a private to each thread copy of `aa`. As access to threadprivate variables is usually slower than access to normal private (stack) variables, on 64-bit x86 systems it might make more sense to pass the value of `aa` as an argument to `evolve` instead as suggested by @Bálint Aradi.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:29:59.827

您应该尝试仔细分析您的变量，特别是考虑哪些变量会同时在不同线程上具有不同的值，因为这些变量必须声明为 OMP 私有。在您的情况下，两个变量都`aa`必须`iii`是 OMP 私有的。变量`iii`，因为它是循环中的计数器，分布在线程上，并且`aa`因为它获得的值取决于`iii`.

编辑：由于每个线程都调用`evolve`子程序本身并且`evolve`应该使用`aa`（我猜）的线程特定值，因此您还应该传递`aa`给您的子程序，而不是使用模块变量`aa`。

例程应如下所示：

```
subroutine evolve(y, aa, yevl)
  integer(dp),parameter:: id=2
  real(dp),intent(in):: y(id), aa
  real(dp),intent(out):: yevl(id)
    yevl(1)=y(2)+1.d0-aa*y(1)**2
    yevl(2)=bb*y(1)
  end subroutine evolve 
```

以及主程序中的相应调用：

```
call evolve(y, aa, yt) 
```*

# objective-c - 自动调整 UITextView 的大小

> ID：15432857
> 
> 赞同：1
> 
> 时间：2013-03-15T12:44:50.210
> 
> 标签：objective-c, resize, uitextview

我是 iOS 开发的初学者，我无法自动调整 UITextView 的大小。

我创建了一个主从应用程序。在我的 DetailViewController.xib 上，我添加了一个 ScrollView，其中包含一个标题标签、一个图像和一个在此图像下的 TextView，以便放置用户发布的描述。
问题是描述取决于我的 WebService 返回的内容，所以我需要自动调整它的大小。

这是我的代码：

```
- (void)configureView
{
    ...
    self.detailDescriptionTextView.text = [self.detailItem valueForKey:@"adDescription"];

    CGRect frame = self.detailDescriptionTextView.frame;
    frame.size.height = self.detailDescriptionTextView.contentSize.height;
    self.detailDescriptionTextView.frame = frame;
) 
```

问题是 TextView 正确获取了内容，但它根本没有调整大小..我寻找了一段时间的答案，大多数答案都是我尝试过的......

谢谢你的帮助。

编辑：我意识到了一些事情。为了在描述下放一些元素，我在Interface Builder中放了一个很小的TextView用于描述，是不是有问题？如果是，我怎么能把其他元素放在这个TextView下，因为Interface Builder上没有更多空间了？

编辑2：我终于成功了。似乎问题在于我通过 Interface Builder 创建了 TextView。通过以编程方式创建它，它运行良好。如果它可以帮助某人，这是我的代码：

```
UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(20, 195, 280, 10)];
textView.text = [self.detailItem valueForKey:@"adDescription"];
textView.font = [UIFont fontWithName:@"Hevlatica" size:14];
[self.scrollView addSubview:textView];
CGRect descriptionFrame = textView.frame;
descriptionFrame.size.height = textView.contentSize.height;
textView.frame = descriptionFrame; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:52:44.273

首先使用计算内容高度

```
NSString *content = @"Hello how are you.";
CGSize size = [content sizeWithFont:[UIFont systemFontOfSize:14]
              constrainedToSize:CGSizeMake(yourWidth, MAX_HEIGHT)
                  lineBreakMode:UILineBreakModeWordWrap]; 
```

然后设置 textView 的框架

```
[self.textView setFrame:CGRectMake(5, 30, 100, size.height + 10)]; 
```

或者

将内容添加到您的文本视图，然后尝试这个

```
CGRect frame = self.textView.frame;
frame.size.height = self.textView.contentSize.height;
self.textView.frame = frame; 
```

希望这可以帮助 ！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:50:14.803

```
 CGSize constraint = CGSizeMake(690.0, 2000.0);
 int h=10;
 CGSize size_txt_overview1 = [[self.detailItem valueForKey:@"adDescription"] sizeWithFont:[UIFont fontWithName:@"Helvetica" size:18] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
frame.size.height = size_txt_overview1.height;
self.detailDescriptionTextView.frame = frame; 
```

# xaml - Phone8点击时如何更改按钮背景颜色

> ID：15432858
> 
> 赞同：1
> 
> 时间：2013-03-15T12:44:50.953
> 
> 标签：xaml, windows-phone-8

我正在尝试覆盖按钮的背景颜色而不是 phoneAccentColor 我在 app.xaml 中编写样式代码，例如

```
 <Style x:Key="ButtonStyle" TargetType="Button">
        <Setter Property="FontSize" Value="25"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="FontWeight" Value="Light"/>
        <Setter Property="Height"  Value="75"/>
        <Setter Property="Width" Value="440"/>
        <Setter Property="Background" Value="{StaticResource blueBackground}"/>
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Grid Background="Transparent">

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource blueBackground}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="White"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                        </VisualStateGroup>
                     </VisualStateManager.VisualStateGroups>
                 </Grid>
            </ControlTemplate>
        </Setter.Value>
            </Setter>
    </Style> 
```

现在即使我没有点击我也看不到按钮我该如何更改它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:53:27.077

您可以尝试使用模板的完整副本吗？只需更改颜色即可。

```
<Style x:Key="ButtonStyle1" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
        <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilySemiBold}"/>
        <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
        <Setter Property="Padding" Value="10,3,10,5"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates"/>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="0" Margin="{StaticResource PhoneTouchTargetOverhang}">
                            <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# c# - 在运行时更改 web/app.config

> ID：15432866
> 
> 赞同：0
> 
> 时间：2013-03-15T12:45:23.937
> 
> 标签：c#, asp.net, wcf

当我更改 C# 项目的 web 或 app.config 中的字段时，该值是否会自动输入到程序中，而不会在程序中重新启动或中断？每次请求该字段时，程序总是从配置文件中获取，还是被程序缓存在某处。这是如何运作的？

我想要一种情况，我会更改配置中的值，并希望应用程序立即自动提取该值。更改，程序立即提取该值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:48:17.917

ASP.NET 监视 web.config 文件，并在发现更改时回收 AppDomain。它将等待当前请求被处理，并将任何新的请求排队。

所以是的，更改将被应用程序提取，但不是立即也不是没有中断（尽管这取决于您对“立即”的定义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:48:27.677

您应该通过代码更改 web.config，因为它会导致 AppDomain 重新启动。您应该创建一个新的 xml 文件以通过代码进行设置和更改。

# jquery - 如何在 IE7 或 IE8 中获取 jQuery ajax 结果数据？

> ID：15432867
> 
> 赞同：0
> 
> 时间：2013-03-15T12:45:24.497
> 
> 标签：jquery, ajax, internet-explorer-8, internet-explorer-7

在我的控制器中，我的代码是这样的，

```
int resultCount = 3;
mav.addObject("resultCount", resultCount); 
```

* * *

我的jsp代码是这样的，

```
$.ajax({
     url: ....,
     type: 'POST',
     data: ....,
     success: function( result ) {
         if(result.resultCount != null){
               *// here, I can see resultCount(3)  in Chrome or IE9 
               // but it's undefiend in IE7 or IE8*
         }
     },
     error : function(error){
     } 
```

我的问题是如何在 IE7 或 IE8 中获得 resultCount。

当我控制台或警告结果时，它包含 resultCount ("resultCount":3)。

我可能会问一个愚蠢的问题，但请给我任何想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:49:14.290

尝试添加`dataType:'json'`：

```
$.ajax({
    url: ....,
    type: 'POST',
    data: ....,
    dataType: 'json',
//  ^^^^^^^^^^^^^^^
    success: function (result) {
        if (result.resultCount != null) {
            * // here, I can see resultCount(3)  in Chrome or IE9 
            // but it's undefiend in IE7 or IE8*
        }
    },
    error: function (error) {
    } 
```

# php - PHP用动态值替换文本字符串中的标签/占位符/标记

> ID：15432868
> 
> 赞同：0
> 
> 时间：2013-03-15T12:45:30.957
> 
> 标签：php, arrays, variables, replace

基本上，我想要实现的是`{SOME_TAG}`用“文本”动态替换。
我的想法是读取所有标签，例如`{SOME_TAG}`，将它们放入数组中。
然后将数组键转换为类似的变量`$some_tag`，并将它们放入数组中。

所以，这就是我走了多远：

```
//Some code goes here
$some_tag = "Is defined somewhere else.";
$different_tag = 1 + $something;
Some text {SOME_TAG} appears in different file, which contents has been read earlier.
//Some code goes here 

preg_match_all('/{\w+}/', $strings, $search);
$search = str_replace(str_split('{}'),"",$search[0]);
$search = array_change_key_case( array_flip($search), CASE_LOWER);
...some code missing here, which I cant figure out. 
```

替换数组应该是这样的

```
$replace = array($some_tag, $different_tag);
//Then comes replacing code and output blah blah blah.. 
```

如何使数组`$replace`根据`$search`数组动态包含变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T13:11:21.187

为什么不采用以下方式：

```
<?php

$replace = array(
  '{TAG_1}' => 'hello',
  '{TAG_2}' => 'world',
  '{TAG_3}' => '!'
);

$myString = '{TAG_1} {TAG_2}{TAG_3}{TAG_3}';

echo str_replace(array_keys($replace), array_values($replace), $myString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:18:09.700

如果我理解正确：

您正在尝试创建一个可自定义的文档，使用 {TAGS} 来表示可以用动态信息填充的可替换区域。在用动态信息替换 {TAGS} 的某个时间点，您希望将动态信息存储在自动生成的基本变量名称中，如 $tags。

我不确定为什么要将这些标签转换为基本变量，而不是将它们完全用作数组键。我想指出，这代表了一个安全或功能漏洞——如果有人将 {REPLACE} 作为标签放入您的文档会发生什么？你的替换数组会被动态数据覆盖，你的整个程序就会崩溃。要么就是这样，要么整个替换数组都会被转储到 {REPLACE} 中，从而产生一个非常混乱的文档，其中可能包含您不希望它们包含的数据。也许你已经解决了这个问题——我没有这里的所有背景——但我想我会指出风险因素。

至于更好的解决方案，除非您通过 $tags 而不是直接使用 $replace 数组来解决某些特定需求，否则我喜欢@Emissary的回答。

# html - 如何使用媒体查询定位平板电脑而不是 IE9

> ID：15432870
> 
> 赞同：8
> 
> 时间：2013-03-15T12:45:36.300
> 
> 标签：html, css, responsive-design, media-queries

我发现 IE9 正在为我的网站采用平板电脑样式。

```
@media (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : portrait),
       (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : landscape)
{
    /* tablet styles */
} 
```

当浏览器的宽度为 1024px 时，上面的媒体查询在 IE9 中应用。

经过一些研究，我发现了以下问题/解决方案，它解释了为什么会发生这种情况。

[媒体查询在 IE9 中不起作用](https://stackoverflow.com/questions/6418139/media-query-not-working-in-ie9)

> 据我所知，归结为 IE9 没有解释“min-device-width”和“max-device-width”。
> 
> 根据[http://msdn.microsoft.com/library/ms530813.aspx](http://msdn.microsoft.com/library/ms530813.aspx)它不支持这些属性，只支持“最小宽度”和“最大宽度”。
> 
> 此外，[http://www.w3.org/TR/css3-mediaqueries/#error-handling](http://www.w3.org/TR/css3-mediaqueries/#error-handling) 声明浏览器应该忽略它无法识别的属性。IE9 似乎并非如此。

我还发现了这个问题：[Common breakpoints for media queries on a responsive site](https://stackoverflow.com/questions/8564752/good-widths-for-media-queries-on-responsive-site)，但它没有给我一个解决方案。

如何将我的样式表仅应用于平板电脑而不应用于 IE9 等 1024 像素宽度的桌面浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:36:24.877

您需要在`<head>`文档中添加此元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

然后在你的css中你可以替换：

*   `min-device-width`和`min-width`
*   `max-device-width`与`max-width`.

# java - 奇怪的Java代码

> ID：15432873
> 
> 赞同：3
> 
> 时间：2013-03-15T12:45:36.803
> 
> 标签：java, reflection

我找到了下面的代码片段：

```
import java.lang.reflect.Field;
public class Test {
    public static void main(String[] args) {
        System.out.println("Inside main");
    }
    static {
        try {
            Field value = String.class.getDeclaredField("value");
            value.setAccessible(true);
            value.set("Inside main", value.get("Inside static bolck"));
        } catch (Exception e) {
            throw new AssertionError(e);
        }
    }
} 
```

根据我的理解，输出应该是`Inside static bolck`，但输出是`Inside stat`相同的字符长度`Inside main`。
*如果我增加 Inside main 的长度，输出长度也会增加。
有人可以解释一下吗？我对反射没有太多的了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:49:19.810

在我的 JDK 上，`String`还有一个`count`成员，需要更新以反映新的长度。

还有一个`offset`字段，可能需要也可能不需要更新（可能不是这种情况）。

最后，有一个`hash`字段，在您更改后将不再正确`value`。

由于此代码依赖于特定实现的未记录细节`String`，因此它非常脆弱且高度不可移植。例如（帽子提示@assylias），[Oracle 已经删除了JDK 7u6 中的`count`and`offset`](https://stackoverflow.com/questions/704319/how-the-substring-function-of-string-class-works/13386284#13386284)字段。如果您要从 7u5 升级到 7u6，那么您的代码会突然出现不同的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:59:30.993

代码对 String 类的实际实现做出假设，例如，该类有一个名为“value”的字段。

由于 String 类的内部状态不是 API 或语言规范的一部分，因此不同供应商的 VM 甚至同一供应商的不同 VM 版本之间的实际实现会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:03:06.200

`"Inside main"` 在 value[] 中包含 11 个字符（value[] 是 String 类中的私有字段）
String`value[]`在您定义 String 的第一个位置被初始化`"Inside main"`。现在您正在`value[]`使用反射更改字符串中的私有实例变量的值，然后它必须仅适合字符串中的 11 个字符`Inside static bolck`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T13:13:53.980

当您更改“Inside main”时，您可以`value.get()`将字符串 <=“Inside main”。将 -“Inside main”更改为“Inside main (8 个空格)”并打印

```
"Inside static bolck" 
```

# php - PHP - 如何显示具有最小值-最大值的列

> ID：15432881
> 
> 赞同：1
> 
> 时间：2013-03-15T12:45:55.270
> 
> 标签：php

我有这个简单的定价表。我想从列*$przoff*插入另外 2 列显示 MIN 和 MAX 值。这是一个屏幕截图，显示了列的外观：

![在此处输入图像描述](../Images/bff92c097f79feb901d4335cabf8fb75.png)

```
<?php
$i=0;
while ($i < $num) {

    $cod=mysql_result($result,$i,"cod_int");
    $name=mysql_result($result,$i,"nome");
    $conf=mysql_result($result,$i,"conf");
    $type=mysql_result($result,$i,"tipo");
    $cconf=mysql_result($result,$i,"cost");
    $cunit=mysql_result($result,$i,"costo_prod");
    $incqta=mysql_result($result,$i,"incid_qta");

    $inconf=($cconf*$incqta/100)+($cunit*$incqta/100);

    if ($cunit > 0 && $cunit <= 0.2500) {
        $incprd=$cunit*10/100; }
    elseif ($cunit > 0.2500 && $cunit <= 0.5000) {
        $incprd=$cunit*5/100; }
    else {
        $incprd=0; }

    $przoff=($cconf+$cunit+$inconf+$incprd);
?>

<tr>
/* TABLE CONTENT */
</tr>

<?php $i++; } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:03:17.390

在使用相同过程打印表格之前找到最小值和最大值。然后在表格中打印。

过程1：

```
<?php
$i = 0;
while ($i < $num) {
    $cunit  = mysql_result($result, $i, "costo_prod");
    $incqta = mysql_result($result, $i, "incid_qta");

    $inconf = ($cconf * $incqta / 100) + ($cunit * $incqta / 100);

    if ($cunit > 0 && $cunit <= 0.2500) {
        $incprd = $cunit * 10 / 100;
    } elseif ($cunit > 0.2500 && $cunit <= 0.5000) {
        $incprd = $cunit * 5 / 100;
    } else {
        $incprd = 0;
    }

    $przoff = ($cconf + $cunit + $inconf + $incprd);

    if ($i == 0) {
        $min_val = $przoff;
        $max_val = $przoff;
    } else {
        if ($przoff < $min_val) {
            $min_val = $przoff;
        }
        if ($przoff > $max_val) {
            $max_val = $przoff;
        }
    }
    ?>

    <?php
    $i++;
}

$i = 0;
while ($i < $num) {

    $cod    = mysql_result($result, $i, "cod_int");
    $name   = mysql_result($result, $i, "nome");
    $conf   = mysql_result($result, $i, "conf");
    $type   = mysql_result($result, $i, "tipo");
    $cconf  = mysql_result($result, $i, "cost");
    $cunit  = mysql_result($result, $i, "costo_prod");
    $incqta = mysql_result($result, $i, "incid_qta");

    $inconf = ($cconf * $incqta / 100) + ($cunit * $incqta / 100);

    if ($cunit > 0 && $cunit <= 0.2500) {
        $incprd = $cunit * 10 / 100;
    } elseif ($cunit > 0.2500 && $cunit <= 0.5000) {
        $incprd = $cunit * 5 / 100;
    } else {
        $incprd = 0;
    }

    $przoff  = ($cconf + $cunit + $inconf + $incprd);
    $min_val = $min_val;
    $max_val = $max_val;
    ?>

    <tr>
        /* TABLE CONTENT */
    </tr>

    <?php
    $i++;
}
?> 
```

过程2：

```
<?php
$min_val = "";
$max_val = "";

$i = 0;
while ($i < $num) {

    $cunit  = mysql_result($result, $i, "costo_prod");
    $incqta = mysql_result($result, $i, "incid_qta");

    $inconf = ($cconf * $incqta / 100) + ($cunit * $incqta / 100);

    if ($cunit > 0 && $cunit <= 0.2500) {
        $incprd = $cunit * 10 / 100;
    } elseif ($cunit > 0.2500 && $cunit <= 0.5000) {
        $incprd = $cunit * 5 / 100;
    } else {
        $incprd = 0;
    }

    $przoff = ($cconf + $cunit + $inconf + $incprd);

    if ($przoff < $min_val || empty($min_val)) {
        $min_val = $przoff;
    }
    if ($przoff > $max_val || empty($max_val)) {
        $max_val = $przoff;
    }
    ?>

    <?php
    $i++;
}

$i = 0;
while ($i < $num) {

    $cod    = mysql_result($result, $i, "cod_int");
    $name   = mysql_result($result, $i, "nome");
    $conf   = mysql_result($result, $i, "conf");
    $type   = mysql_result($result, $i, "tipo");
    $cconf  = mysql_result($result, $i, "cost");
    $cunit  = mysql_result($result, $i, "costo_prod");
    $incqta = mysql_result($result, $i, "incid_qta");

    $inconf = ($cconf * $incqta / 100) + ($cunit * $incqta / 100);

    if ($cunit > 0 && $cunit <= 0.2500) {
        $incprd = $cunit * 10 / 100;
    } elseif ($cunit > 0.2500 && $cunit <= 0.5000) {
        $incprd = $cunit * 5 / 100;
    } else {
        $incprd = 0;
    }

    $przoff  = ($cconf + $cunit + $inconf + $incprd);
    $min_val = $min_val;
    $max_val = $max_val;
    ?>

    <tr>
        /* TABLE CONTENT */
    </tr>

    <?php
    $i++;
}
?> 
```

唯一的区别是最小值和最大值初始化。

# jquery - 隐藏活动 div 在点击 div 之外

> ID：15432883
> 
> 赞同：0
> 
> 时间：2013-03-15T12:46:00.067
> 
> 标签：jquery, html

这是我的jQuery：

```
$(document).ready(function() {
$('#our_location').click(function(){

    $('#locations').show();

    });

$('#locations a').click(function(){
    $('#f_w').hide();

    var id = $(this).attr('id');

$.ajax({
       type: "POST",
       url: "map_response.php",
       data: ({id: id}),
       success: function(response){
        //alert(response);
        $('#map_n_vilage').html(response);
        $('#map_n_vilage').show();
        $('.villages').show();
       }
   });

    });

}); 
```

当我单击链接时，会打开`#our_location`一个 div `#locations`。`#locations`当我单击ajax 中的任何锚标记并`#map_n_vilage`显示 div 时...现在我想要的是，如果我单击除这些 div 之外的任何其他东西，我所有的这些 div 都应该消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:50:29.920

创建一个隐藏 div 的函数：

```
function hideDivs() {
   $('.villages').hide();
   $('#map_n_vilage').hide();
   $('#locations').hide();
} 
```

您可以将此附加到任何被单击的 div 的新处理程序，并且仅执行`hideDivs`名称不等于`villages`, `map_n_village`, `locations`。您还可以使用选择器检查它们是否可见`:visible`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:59:27.777

通常由于事件冒泡，每当点击 html 页面上的任何内容时，body 也会收到一个点击事件。所以是这样的：

```
$("body").click(function(e) {
  if (e.target.id != "your-main-div-id") {
    //hide whatever div you want to hide
   }
 }); 
```

main-div-id 应该是一些控件的 id，如果被点击，你不想隐藏你的 div。您甚至可以删除该部分，但我认为您将需要它。

# ajax - 在 AJAX 调用后检索 DOM 值

> ID：15432885
> 
> 赞同：0
> 
> 时间：2013-03-15T12:46:01.863
> 
> 标签：ajax, perl, dom

我想从 Perl 检查一些 DOM 值（我不想手动使用浏览器和调试器）。

这些 DOM 值是在 AJAX 调用之后加载的，这些值之一的示例函数将是：

```
<script language="javascript">
    try {   
        var openValue = FComma(fnRound(Symbol[24],2));
        if (openValue == "0.00") document.write('n/a');
        else document.write(openValue);

    } catch (exception) {}
</script> 
```

我不能直接从 AJAX 得到它。我想知道在 AJAX 调用完成后是否有可能获取 DOM 值。此调用仅在开始时完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:31:47.627

尝试使用[WWW::Scripter](https://metacpan.org/module/WWW%3a%3aScripter)：

```
use WWW::Scripter;
$w = new WWW::Scripter;

$w->use_plugin('Ajax');  # packaged separately

$w->get('http://some.site.com/that/relies/on/ajax');
$w->eval(' alert("Hello from JavaScript") ');
$w->document->getElementsByTagName('div')->[0]->....

$w->content; # returns the HTML content, possibly modified
             # by scripts 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T00:02:49.880

我会做的（呃，试试，因为我不确定这会做你想要的）是：使用安装了 Web Developer 附加组件的 Firefox。页面加载完毕并完成 AJAX 内容后，转到 Web Developer 的 View Source 菜单并选择 View Generated Source；将源代码复制/粘贴到您的编辑器和/或 Perl 脚本中，然后用它做您想做的事情。

# testing - 负载测试完成后自动生成报告 TFS2010, TFS2012

> ID：15432886
> 
> 赞同：1
> 
> 时间：2013-03-15T12:46:03.323
> 
> 标签：testing, tfs, visual-studio-2012, load-testing

Visual Studio 2012 中是否有内置的可能性来设置计划的负载测试运行并生成报告，并将当前测试运行与之前的测试运行进行比较？

# javascript - 如果存在 2 个或更多相等的结果，则将 select2 建议限制为 1

> ID：15432889
> 
> 赞同：2
> 
> 时间：2013-03-15T12:46:07.000
> 
> 标签：javascript, jquery, json, coffeescript, jquery-select2

我在 /api/searches 文件上有这个 json：

```
[{"id":"513dbb61a61654a845000005","text":"ingeniero agrónomo"},{"id":"513a11d4a6165411b2000008","text":"ingeniero agrónomo"}] 
```

我正在使用 select2 来显示结果。

这是我的 select2 设置：

```
$('#query_txt').select2
    width: 'resolve'
    minimumInputLength: 3
    tags: false
    showSearchBox: true
    maximumSelectionSize: 1
    closeOnSelect: true
    multiple: false
    ajax:
      url: "/api/searches"
      quietMillis: 100
      dataType: 'json'
      data: (term, page) -> {q: term}
      results: (data, page) ->
        results: data 
```

如果我在输入中输入单词`ingeniero agrónomo`select2 建议两个结果，您可以在下一张图片中看到：

![在此处输入图像描述](../Images/2f5def0c0a1251af03f55b8746da5977.png)

我想要，如果`2`json 中存在或更多结果相等，则限制为`1`select2**建议**

**如果存在 2 个或更多相等的结果，我如何将 select2 建议限制为 1 个？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:02:00.680

您需要做的是更新结果函数以处理从数据函数输出的数组并删除重复的文本、未经测试的代码，但是应该这样做：

```
$('#query_txt').select2
    width: 'resolve'
    minimumInputLength: 3
    tags: false
    showSearchBox: true
    maximumSelectionSize: 1
    closeOnSelect: true
    multiple: false
    ajax:
      url: "/api/searches"
      quietMillis: 100
      dataType: 'json'
      data: (term, page) -> {q: term}
      results: (data, page) ->
        indexes = []
        uniques = []
        i = 0
        while i < data.length
          if indexes[data[i].text] is `undefined`
            indexes[data[i].text] = "defined"
            uniques.push
              id: data[i].text
              text: data[i].text
          i++
        results: uniques 
```

# cloud-foundry - 如何在 Cloud Foundry 服务器中添加 3rd 方 jar

> ID：15432890
> 
> 赞同：0
> 
> 时间：2013-03-15T12:46:09.007
> 
> 标签：cloud-foundry

我是 Cloud Foundry 的新手，我创建了一个帐户，并创建了一个 Java 应用程序。现在我需要将第 3 方 jar 和 lib 添加到 tomcat/lib 文件夹，并将 lib 添加到该服务器的环境变量中。

这在云代工中可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:12:57.363

要执行您想做的事情，而不是将您的应用程序部署为 Java 应用程序，您必须与自定义 Tomcat 一起进行独立部署。看看这里的解释： http: [//blog.cloudfoundry.com/2012/05/11/running-standalone-web-applications-on-cloud-foundry/](http://blog.cloudfoundry.com/2012/05/11/running-standalone-web-applications-on-cloud-foundry/)

如果您需要任何其他帮助，请告诉我。

谢谢， - Hitesh

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:33:22.267

您可以在正常添加新的 3rd 方 jar 后为您的应用程序创建一个新的 War 文件，然后重新部署应用程序。这将更新您在 cloudfoundry 上的应用程序。

让我知道这是否是您想要的。

谢谢， - Hitesh

# android - Anddengine中基于时间的碰撞检测？

> ID：15432893
> 
> 赞同：0
> 
> 时间：2013-03-15T12:46:14.540
> 
> 标签：android, andengine

我正在创建一个移动的球与一个洞相撞的游戏。然后将球从现场移走。我成功地实现了这个使用

```
if (ball.collidesWith(hole)) {
    //remove ball
} 
```

但我需要一个计时器延迟，如果球与孔碰撞持续 3 秒，则将球移走，否则不会。谁能告诉我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:55:45.270

使用计数器将毫秒添加到类中的私有变量中。

```
if (ball.collidesWith(hole)) {
   counter+=elapsedtime; //add time since last call
}else
   counter=0;
} 
```

在您的更新方法中包括：

```
if(counter>=3000)
{
//remove ball
} 
```

# c++ - 如何检测用于测量水位的白色仪表板？

> ID：15432896
> 
> 赞同：4
> 
> 时间：2013-03-15T12:46:24.327
> 
> 标签：c++, matlab, opencv, image-processing, wolfram-mathematica

我从事一个需要使用白色仪表板测量水位的项目。目前我的方法是：

1.  分割白色仪表板。
2.  对着仪表板测量水位。

但我被困在分割仪表板。我避免使用基于颜色的分割，因为我需要它不受光线变化的影响，所以我使用形态学操作来检测边缘。我有这张图片：

![在此处输入图像描述](../Images/acd6f67a54d7af54847f9ba7849d6258.png) ![在此处输入图像描述](../Images/32d8c85d5ede730676d9b2316a6ed99a.png)

形态学运算的结果似乎很有希望。白色量规板上的边缘比其他的更锋利。但我仍然不知道如何正确分割电路板。你能推荐一种算法来分割电路板吗？或者请建议您是否有不同的算法来测量水位。

这是我的代码：

```
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

int main()
{
    cv::Mat src = cv::imread("image.jpg");
    if (!src.data)
        return -1;

    cv::Mat bw;
    cv::cvtColor(src, bw, CV_BGR2GRAY);
    cv::medianBlur(bw, bw, 3);

    cv::Mat dilated, eroded;
    cv::dilate(bw, dilated, cv::Mat());
    cv::erode(bw, eroded, cv::Mat());
    bw = dilated - eroded;

    cv::imshow("src", src);
    cv::imshow("bw", bw);
    cv::waitKey();
    return 0;
} 
```

我正在使用 C++，但我对 Matlab/Mathematica 中的其他实现持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:47:31.237

你为什么要分割仪表板呢？您只想在图像中找到它，仅此而已。您无需查找段的相对位置。5 总是介于 4 和 6 之间。

您可能已经注意到，您可以通过寻找具有高对比度级别的区域来找到仪表板的大致位置。使用`matchTemplate`您可以找到确切的位置。（考虑到摄像头是固定的，或许可以跳过第一步`matchTemplate`直接调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:45:08.623

如果相机确实是静止的，您可以使用这种快速而肮脏的方法：

```
im= rgb2gray(imread('img.jpg'));
imr=imrotate(im,1);
a=imr(100:342,150);
plot(a) 
```

![在此处输入图像描述](../Images/e259acce4939be03ef8c09abdbadd93b.png)

图中显示的最小值在指标范围内从 10（左）到 1（右）。您可以使用峰值检测器来定位它们的位置并插入它们之间的水位。所以，没有真正需要花哨的图像处理......

# css - 可调整大小的固定位置元素；响应式，相对定位的内容

> ID：15432897
> 
> 赞同：1
> 
> 时间：2013-03-15T12:46:28.597
> 
> 标签：css, css-position, resizable

我有一个固定的 div`#summary`可以改变高度。它需要始终显示在窗口顶部。在它下面我有内容`#catalogueContainer`，当上面的固定 div 改变高度时我需要重新定位。我需要能够使用窗口滚动条滚动。

我知道将 div 保持在窗口顶部的唯一方法`#summary`是给它一个固定的位置。这样做时，与它没有关系，所以当改变高度`#catalogueContainer`时我不能使用 CSS 重新定位。`#summary`我能想到的唯一方法是让一些 javascript 监听摘要的重新大小并指定`#catalogue`.

1.  这听起来是最有效的解决方案吗？代码和注释如下。
2.  在 Chrome 中，当我滚动窗口时，#summary 的背景图像会被留下，但当我滚动时，所有其他内容都固定在浏览器窗口的顶部。

有关解决此问题的任何建议吗？

```
#summary {
    position:fixed;
    top:0px;
    left:275px;
} 
```

`#summary`内部有可调整大小的元素，并改变高度。这需要始终显示在窗口顶部。

```
#right {
    position:relative;
    left:275px;
    top:300px;
} 
```

`#right`是以下所有内容的容器元素。

中有许多目录`#catalogueContainer`，都在同一个地方，但一次只能看到一个。

```
#catalogueOne {
    position:relative;
} 
```

`#catalogueOne`必须是`relative`因为里面有`position:absolute`元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:41:25.263

您可以将摘要和目录放在一个容器中（然后将其放在顶部）。然后他们只需要有一个 100% 的宽度和浮动：左。当摘要改变高度时，目录将被向上或向下推。

您还可以使用 jQuery 并使用根据摘要高度放置目录的功能。两者都需要有一个固定的位置。

# python - 如何从代码而不是 Google App Engine 上的文件呈现 django 模板

> ID：15432900
> 
> 赞同：6
> 
> 时间：2013-03-15T12:46:38.297
> 
> 标签：python, django, google-app-engine, django-templates, webapp2

我正在编写一个将一些 html 呈现给 Django 模板的 Google App Engine webapp。我想使用文件或仅使用一些与文件中的非常相似的 json 来呈现模板。是否可以使用 Django 将其呈现为读取并存储在数据库中的文件？oldAPI.HTML 只是 api.html 的旧版本，但有一些小的变化。将 Django 渲染到 api-html 文件可以正常工作。

我知道您不能在 GAE 上存储文件，我如何动态使用 Django 呈现存储在内存中的 HTML？

```
path = ""
oldAPI = APIVersion().get_by_key_name(version)
if oldAPI is None:
    path = os.path.join(os.path.dirname(__file__), "api.html")
template_values = {
            'responseDict': responseDict,
            }
        if path:
            self.response.out.write(template.render(path, template_values))
        else:
            self.response.out.write(template.render(oldAPI.html,template_values)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T21:45:08.997

为了“在内存中”渲染模板，您需要做一些事情：

# 应用引擎设置

首先，您需要确保为 Django 正确设置了所有内容。[第三方库页面上](https://developers.google.com/appengine/docs/python/tools/libraries#Django)有很多信息，但为了您的利益，我会将其包含在此处。

在`main.py`, 或（无论您的脚本处理程序是什么）中，您都需要添加以下行：

```
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'

from google.appengine.dist import use_library
use_library('django', '1.2') # Change to a different version as you like 
```

不要忘记包括`django`在你的`app.yaml`：

```
libraries:
    - name: django
      version: "1.2" 
```

# 代码设置

其次，您需要创建一个`Template`对象，如[Google App Engine 模板文档](https://developers.google.com/appengine/docs/python/gettingstarted/templates)中所述。例如：

```
from google.appengine.ext.webapp import template

# Your code...
template_string = "Hello World"
my_template = template.Template(template_string)

# `context` is optional, but will be useful!
# `context` is what will contain any variables, etc. you use in the template
rendered_output = template.render(context)

# Now, do what you like with `rendered_output`! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:00:33.317

您可以使用 Django 从文本中实例化模板`template.Template(my_text)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:13:37.307

不幸的是，没有（*内置*）方法可以这样做，但您可以从函数[google.appengine.ext.webapp.template._load_user_django](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/webapp/template.py#95)（使用 Python 2.5 的 GAE）或[google.appengine.ext.webapp.template._load_internal_django](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/webapp/template.py#138)（ GAE with Python 2.7）并编写您自己的包装器覆盖设置和渲染，就像 GAE 源代码一样。

# android - 没有数据连接时将制造商添加到 Google Maps V3

> ID：15432910
> 
> 赞同：0
> 
> 时间：2013-03-15T12:47:12.637
> 
> 标签：android, google-maps, google-maps-api-3

我处于这样一种情况，即使由于没有连接而没有显示地图（屏幕只是空白，没有可用的功能），我仍然想将标记和折线添加到谷歌地图上。

这可能吗？

似乎如果没有数据并且没有加载地图，则什么都没有显示？

**提前致谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:12:12.220

此处描述了此问题：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=5017](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5017)

似乎有一种不使用 ACCESS_NETWORK_STATE 的解决方法。

他们可能会在下一个版本中完全修复它。

# java - Java解密

> ID：15432917
> 
> 赞同：0
> 
> 时间：2013-03-15T12:47:27.987
> 
> 标签：java, javax.crypto

我有一个问题

```
javax.crypto.Cipher 
```

当我写这行代码时

```
 Cipher cipher;
    byte[] bytes = null;

    try
    {
        cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.DECRYPT_MODE, generateAESKey128b(key));
        bytes = cipher.doFinal(input.getBytes("UTF-8"));
    }
    catch (NoSuchAlgorithmException e)
    {
        e.printStackTrace();
    }
    catch (NoSuchPaddingException e)
    {
        e.printStackTrace();
    }
    catch (InvalidKeyException e)
    {
        e.printStackTrace();
    }
    catch (UnsupportedEncodingException e)
    {
        e.printStackTrace();
    }
    catch (IllegalBlockSizeException e)
    {
        e.printStackTrace();
    }
    catch (BadPaddingException e)
    {
        e.printStackTrace();
    } 
```

控制台给我这个错误

```
javax.crypto.IllegalBlockSizeException 
Input length must be multiple of 16 when    
decrypting with padded cipher
at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
at com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)
at javax.crypto.Cipher.doFinal(DashoA13*..)
at it.unitn.se.gym.backend.utils.Security.AES128Decode(Security.java:109)
at it.unitn.se.gym.backend.utils.Security.decode_AES128_Base64(Security.java:96)
at it.unitn.se.gym.backend.WebService.main(WebService.java:42)
Exception in thread "main" java.lang.NullPointerException
at it.unitn.se.gym.backend.utils.Security.decode_AES128_Base64(Security.java:97)
at it.unitn.se.gym.backend.WebService.main(WebService.java:42) 
```

前两行代码是正确的，但是当我将 byte[] 类型的属性“text”传递给 doFinal 函数时，它给了我错误。

有人能告诉我为什么吗？

解决了：

好的，问题解决了

```
byte[] encrypted = UniversalBase64Encoder.decode(input);
Cipher cipher = Cipher.getInstance("AES");
cipher.init(Cipher.DECRYPT_MODE, generateAESKey128b(key));
byte[] originalBytes = cipher.doFinal(encrypted); 
```

这是我写的正确代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:19:52.643

问题是您试图解密一个未加密的字符串，这样做违反了解密算法的假设（其输入大小始终是 16 的倍数）。

这是一个加密然后解密字符串的代码块。请注意，当打印加密字符串时，它的长度为 16 个字节，即使输入字符串不是。加密算法在加密之前填充输入字符串以使其成为 16 字节的倍数。该 16 字节长的加密字符串现在是用于解密的有效输入。

这个假设（加密的结果将是一个均匀的大小）是非常标准的。它不仅使解密/加密算法更易于编写，而且还可以防止攻击者知道您加密的内容的长度。

```
byte[] keyBytes = new byte[16];
keyBytes[0] = 1;
SecretKeySpec key = new SecretKeySpec(keyBytes, "AES");
String input = "hello";
Cipher cipher;
byte[] bytes = null;
cipher = Cipher.getInstance("AES");
cipher.init(Cipher.ENCRYPT_MODE, key);
bytes = cipher.doFinal(input.getBytes("UTF-8"));

System.out.println("Encoded: "+Arrays.toString(bytes));

cipher.init(Cipher.DECRYPT_MODE, key);
byte[] decoded = cipher.doFinal(bytes);

System.out.println("Decoded: "+new String(decoded, "UTF-8")); 
```

# jsf - 避免直接访问 JSF 页面的源代码

> ID：15432925
> 
> 赞同：1
> 
> 时间：2013-03-15T12:47:54.587
> 
> 标签：jsf

当我请求`/personal/faces/public/login.xhtml`时，它可以正常工作，但是当我没有请求时`/personal/public/login.xhtml`，`/faces`我获得了页面的原始源代码。

我想避免人们可以看到页面的源代码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:08:48.257

发生这种情况是因为您已在 web.xml 的配置中`/faces/*`指定。`FacesServlet`因此，任何与指定的 url 模式不匹配的请求文件都将作为常规文件提供，`GET`请求将配置更改为以下内容，以确保所有与 JSF 相关的请求都通过 FacesServlet：

```
 <servlet-mapping>
       <servlet-name>Faces Servlet</servlet-name>
       <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping> 
```

这可确保在返回客户端之前处理**所有具有 .xhtml 扩展名的文件。**

虽然上述解决方案可能会解决眼前的问题，但您遇到的问题指向更深层次的安全问题。它表明任何使用浏览器的人都可以从您的 Web 应用程序部署以及可能的文件系统的其他部分请求和下载工件。这是您需要调查的安全漏洞。选项因您的应用服务器而异

# c++ - 找不到新线程：通用错误 64 位 Ubuntu

> ID：15432930
> 
> 赞同：0
> 
> 时间：2013-03-15T12:48:14.407
> 
> 标签：c++, linux, gcc, gdb

我知道围绕这个主题有一些主题，但是没有一个对我有帮助。

我正在尝试使用 GDB 调试我的应用程序，但我得到了错误

```
 [debug]Cannot find new threads: generic error 
 [debug][Thread debugging using libthread_db enabled] 
```

在函数 dlopen("my_lib.so", RTLD_LAZY);

奇怪的是，当我在 32 位架构的 Ubuntu 下编译时，它曾经可以工作。现在，我搬到了一台安装了 64 位 ubuntu 的新机器上，**但是**，我提供了编译选项 -m32 以便应用程序仍然在 32 位下编译。请不要告诉我尝试在 64 位下编译它，因为有几个原因不这样做。

我已按照[此](https://stackoverflow.com/questions/2702628/gdb-cannot-find-new-threads-generic-error)主题的说明进行操作，但仍然没有。

有人有不同的建议吗？

**编辑：** 32 位机器上的 GCC 版本是 4.4.4，GDB 是 7.2 在 64 位机器上，GCC 的版本是 4.6.1，GDB 是 7.3

这有什么影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:43:28.740

请设置这个

```
LD_PRELOAD=/lib/x86_64-linux-gnu/libpthread.so.0 gdb --args ./app 
```

# html - 如果另一个不存在，则展开一个 div

> ID：15432934
> 
> 赞同：1
> 
> 时间：2013-03-15T12:48:16.717
> 
> 标签：html, css, asp.net-mvc-3, razor

我有两个如下所示的 div。一个固定宽度，另一个应扩展到可用的其余部分。

```
 <style type="text/css">
    #ads
    {
        float: right;
        width: 200px;
    }
    #content-panel
    {
        float: left;
        width: 100%;
    }
</style>
<div style="width: 100%; overflow: hidden; clear: both;">
    @if (Resources.Ads.ClassA == "true")
    {
        <div id="ads">
            <div>
                <img src="../../Content/img/Ads/xlpar.gif" />
            </div>
        </div>
    }
    <div id="content-panel">
        @Html.Action("Elanat", "Home")
        @Html.Action("Latest", "AdsCatalog")
        <div class="article-wrapper">
            <div class="article-titlebar">
                <h4>
                    @Resources.CommonRes.WellcomeTitle</h4>
            </div>
            <div class="article-content">
                @Html.Raw(Resources.CommonRes.welcome)
            </div>
        </div>
        @Html.Action("Latest", "News")
        @Html.Partial("VisitCounterDisplay")
    </div>
</div> 
```

我想检查一个值，如果（真）应该显示广告 div，并且 content-div 应该像其他可用的一样。当 if(false) 不应该显示 ad-div 时。并且内容 div 的宽度必须为 100%。但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:08:51.307

为什么不根据是否有广告向内容面板添加一个类：

```
<div id="content-panel" class="@Html.Raw(Resources.Ads.ClassA == "true" ? "withAdd" : "withoutAdd")> 
```

那么您可以将相关样式应用于相关类

如果`Resources.Ads.ClassA`是一个布尔值，你也可以这样做`if (Resources.Ads.ClassA) {}`

# hibernate - Grails Hibernate 加入返回太多对象的问题

> ID：15432936
> 
> 赞同：0
> 
> 时间：2013-03-15T12:48:17.423
> 
> 标签：hibernate, grails-orm

我刚开始使用 Hibernate，遇到了以下事情：

我有一个域类

```
class Certificate{
    String name
    Vendor vendor
} 
```

和一个查询：`"select cf from Certificate as cf left join cf.vender as vn"`

奇怪的是，这个查询返回了两个对象：
`[Certificate [name=APS, vendor=HP], Vendor [name=HP]]`

而没有连接的相同查询返回一个：
`[Certificate [name=APS, vendor=HP]]`

如何在第一个查询中指定我只`Certificate`需要返回？我以为这`select cf`就够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:56:47.420

你可能想要

```
left join fetch cf.vender 
```

这将与他们的供应商一起加载证书。

# sql - PL/SQL 使用参数包含引号

> ID：15432939
> 
> 赞同：0
> 
> 时间：2013-03-15T12:48:18.550
> 
> 标签：sql, plsql

我编写了一个包含参数类型 varchar2 的过程，我从应用程序中传递的字符串就像“'O'、'H'、'Y'”，我的查询如下。

```
select * from table_name t where t.productname in (parameter) 
```

查询不返回任何数据。如何处理？

我尝试使用双或三个单引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:51:29.643

尝试像这样设置参数**'O，H，Y'**

[在这里](http://www.williamrobertson.net/documents/comma-separated.html)你可以看到一些例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:33:36.110

如果您尝试将过程作为参数传递，那么您应该什么也得不到或错误。众所周知，您只能传递一个返回值的函数。您需要添加代码和示例以帮助您获得更多帮助。你到底在传递什么（）？

```
-- Correct syntax to pass parameters in your case --
select * from table_name t where t.productname in ('O', 'H', 'Y')
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:36:09.320

要在 sql 查询中传递单引号，请使用两次单引号。简单的！

你可以有：

```
select * from table_name t where t.productname in ('''O''', '''H''', '''Y''') 
```

要对此进行测试，您可以使用：

```
SELECT 'Schindler''s List' AS fname FROM dual; 
```

并看到您可以轻松地将单引号传递给查询。

双引号在这里无关紧要。我们可以直接在 SQL 字符串文字中使用双引号，例如

```
SELECT 'He said, "Give me my teddy bear!"' AS dilogue FROM dual; 
```

# camera - Ogre3D Camera、RenderWindow和Viewport的理解

> ID：15432954
> 
> 赞同：1
> 
> 时间：2013-03-15T12:49:14.400
> 
> 标签：camera, coordinates, viewport, ogre, ogre3d

在浏览教程时，我看到正在使用 Ogre::Camera::getCameraToViewportRay 方法。我试图了解它的作用。

首先，我想象一个视口被放置在 3D 场景中的某个位置，比如电视对象的屏幕上。我可以很容易地想象如何将视口上的 2D 坐标转换为场景的 3D 坐标，然后从相机位置点通过 VP 上的该点发出射线。

但是当VP在RenderWindow（在我的显示器上）上时，我无法理解它是如何完成的。我的意思是，场景中的渲染窗口在哪里，场景中渲染窗口的VP上的点在哪里？渲染窗口的 VP 上的点如何转换为场景的 3D 点？

感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:39:48.887

视口显示您通过相机看到的内容，但视口位于相机前面。

有一个 stackoverflow 帖子，其中包含有关相机和视口关系的信息以及一个漂亮的视觉插图：[https ://stackoverflow.com/a/7125486/2168872](https://stackoverflow.com/a/7125486/2168872)

相机到视口光线是一条世界空间光线，从您的相机开始并在某个点与视口相交，例如您的鼠标光标指向的位置。

# entity-framework - EF 中的列名无效

> ID：15432956
> 
> 赞同：2
> 
> 时间：2013-03-15T12:49:16.740
> 
> 标签：entity-framework, code-first

我有一种情况，EF 试图从表“VideoClip”中获取我没有要求它获取的字段值。

![显示表 NewsItemVideoClip、NewsItem、VideoClip 和 Video 的数据库模式](../Images/b9e4c3dc5a472a1e8f3069041db9d012.png)

生成的完整查询如下所示：

```
SELECT 
[Project1].[Id] AS [Id], 
[Project1].[NewsItemId] AS [NewsItemId], 
[Project1].[VideoClipId] AS [VideoClipId], 
[Project1].[DisplayOrder] AS [DisplayOrder], 
[Project1].[Video_Id] AS [Video_Id]
FROM ( SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[NewsItemId] AS [NewsItemId], 
    [Extent1].[VideoClipId] AS [VideoClipId], 
    [Extent1].[DisplayOrder] AS [DisplayOrder], 
    [Extent1].[Video_Id] AS [Video_Id]
    FROM [dbo].[NewsItemVideoClip] AS [Extent1]
    WHERE [Extent1].[NewsItemId] = @p__linq__0
)  AS [Project1]
ORDER BY [Project1].[DisplayOrder] DESC 
```

但是，我的`NewsItemVideoClip`实体类如下所示：

```
public class NewsItemVideoClip : Entity
{
    public virtual int NewsItemId { get; set; }
    public virtual int VideoClipId { get; set; }
    public virtual int DisplayOrder { get; set; }
    public virtual NewsItem NewsItem { get; set; }
    public virtual VideoClip VideoClip { get; set; }
} 
```

映射：

```
public class NewsItemVideoClipEntityMapping
    : EntityTypeConfiguration<NewsItemVideoClip>
{
    public NewsItemVideoClipEntityMapping()
    {
        //configure key and properties
        HasKey(c => c.Id);

        this.HasRequired(x => x.NewsItem)
            .WithMany(x => x.NewsItemVideoClips)
            .HasForeignKey(x => x.NewsItemId);

        this.HasRequired(x => x.VideoClip)
            .WithMany(x => x.NewsItemVideos)
            .HasForeignKey(x => x.VideoClipId);

        //configure table map
        ToTable("NewsItemVideoClip");
    }
} 
```

LINQ 查询：

```
public IList<NewsItemVideoClip> GetVideoClips(int newsItemId)
{
    var query = from nvc in _newsItemVideoClipRepository.GetAll()
                where nvc.NewsItemId == newsItemId
                orderby nvc.DisplayOrder descending
                select nvc;

    var newsItemVideoClips = query.ToList();
    return newsItemVideoClips;
} 
```

EF怎么给我：`Invalid column name 'Video_Id'`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T05:10:30.953

根据您的图表，VideoClip 有一个 VideoId，我猜这是您对 Video 的预期外键。Video_Id 将是在没有映射的情况下外键的默认外键名称，否则会命名它。所以可能需要一个`.HasForeignKey(x => x.VideoId);`到你的**VideoClip**映射。

# android - 在 GoogleMap 上滑动抽屉

> ID：15432961
> 
> 赞同：11
> 
> 时间：2013-03-15T12:49:25.737
> 
> 标签：android, google-maps, google-maps-android-api-2, slidingdrawer

首先，我知道 SlidingDrawer 已被弃用，但我还没有找到任何替代品，所以无论如何我都在使用它：3（如果有人知道它的替代品，请分享！）

所以我的活动中有一个 GoogleMap（实际上是一个片段，但没关系），并且在同一个屏幕上有一个不错的 SlidingDrawer。它工作正常，但是当我在地图上打开或关闭滑动抽屉时，它开始表现得很奇怪。看起来地图想要留在滑动抽屉前面。当抽屉完全打开时，它会回到前面，一切正常。

有解决方法吗？我快疯了！

这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/window"
    >
        <fragment
            android:id="@+id/hackedmap"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            class="com.google.android.gms.maps.SupportMapFragment" />

<SlidingDrawer
        android:id="@+id/drawer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:content="@+id/drawercontent"
        android:handle="@+id/drawerhandle"
        android:orientation="horizontal" 
        >

        <LinearLayout
            android:id="@id/drawerhandle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#00000000"
            android:gravity="center" >

            <ImageView
                android:id="@+id/slidingHandle"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:adjustViewBounds="true"
                android:scaleType="fitEnd"
                android:src="@drawable/sliding_handle" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/drawercontent"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:background="#DD000000"
            android:gravity="center_horizontal|top"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/selectednet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_margin="4dp"
                android:text="Select a network:"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#02bceb" />

            <ListView
                android:id="@+id/passivelist"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:choiceMode="singleChoice" >
            </ListView>
        </LinearLayout>
    </SlidingDrawer>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-26T08:29:03.833

将地图放在相对布局内。地图前面的视图具有相同的度量。

例子：

```
<RelativeLayout
       android:layout_width="match_parent"
       android:layout_height="wrap_content" >

                            <include
                                android:layout_width="wrap_content"
                                android:layout_height="250dp"
                                android:layout_weight="1"
                                layout="@layout/general_map_fragment" />

                             <View
                                 android:id="@+id/imageView123"
                                 android:layout_width="match_parent"
                                 android:layout_height="250dp"
                                 android:background="@color/transparent" />

                        </RelativeLayout> 
```

# javascript - 在加载网页之前获取屏幕分辨率的方法

> ID：15432971
> 
> 赞同：1
> 
> 时间：2013-03-15T12:31:53.953
> 
> 标签：javascript

我想知道识别屏幕分辨率的不同方法。

喜欢

桌面分辨率

平板电脑分辨率

手机等；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:43:33.527

初学者...如果没有加载页面，您将无法执行任何查询或任何内容。除此之外，还有几种方法可以检查您的屏幕分辨率。您可以使用 CSS 媒体查询或 JavaScript。

请参阅下面的链接以获取更多信息。

*   [http://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)
*   [http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

在线还有其他可用资源，因此只需进行一些额外的搜索，您就可以开始使用了。

# jquery - 单击它后从#id 中删除 jQuery 事件（或防止第二次单击）

> ID：15432982
> 
> 赞同：5
> 
> 时间：2013-03-15T12:50:29.423
> 
> 标签：jquery, ajax, modal-dialog, jquery-ui-dialog

伙计们！

我真的在尽我所能来解决下面的问题，但是几个小时后我看不到正确的路径！让我解释：

*   我有一个元素 a-href (#opener)，单击它时会触发一个 jQueryUI 模态对话框，该对话框通过 ajax 加载 div (#target) 内的 URL。
*   一切都很完美，但我希望这发生一次！
*   加载模态窗口后，我能够为我的#opener a-href 设置一个类（.deactivated）并删除 id（#opener）以防止再次触发该操作，但是它不起作用...... a-href 保持可点击状态，并在我点击它时多次打开模式窗口（#target）！
*   我找到的唯一解决方案是从 DOM 中完全删除 a-href --- 使用 $(this).fadeOut(); ---，但这真的很难看，因为我的链接#opener 就这样消失了。

有任何想法吗？非常感谢你。G。

```
<script>
$(document).ready(function() {
    $('#opener').click (function() {

        $('#target').load ('http://my.url', function(){
            $('#target').dialog({
                title: 'My Title',
                draggable: true,
                dialogClass:'My Class',
                modal: true,
                hide: { effect: 'fade', speed: 'fast' },
                show: { effect: 'fade', speed: 'fast' },
                closeOnEscape: true,
                closeText: 'Close',
                beforeClose: function(event, ui) { 
                   'window.location.reload(true)'
                },
            });//end dialog   
        });
        $(this).addClass('.deactivated');
        $(this).removeAttr('id');
    });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T12:54:09.793

从元素中删除 ID 不会删除绑定在该元素上的任何处理程序（除非您使用了“事件委托”）。

[`.one`](http://api.jquery.com/one/)使用（而不是`.on`或 obsolete ）绑定 click 事件`.bind`，然后在第一次触发后自动取消绑定处理程序：

```
$('#opener').one('click', ...) 
```

或者在点击处理程序中禁用事件：

```
$('#opener').on('click', function() {
    ...
    $(this).off('click').addClass('.deactivated');
}); 
```

注意：始终使用较新的`.on`(or `.one`) 和`.off`函数而不是`.bind`, or`.click`等​​是一种很好的做法。它使事件处理代码更加一致，并避免与如何`.click`用于*注册*事件处理程序或（不带参数）*触发*事件处理程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T12:53:05.740

**描述**

> .one()，将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

```
$('#opener').one('click',function(){
     //your code
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T12:54:13.103

您可以使用该[`.one()`](http://api.jquery.com/one/)函数设置一个仅触发一次的事件处理程序，然后将其自身删除：

```
$('#opener').one('click', function(event) {
    // your code here
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T12:55:02.503

使用`one`：

```
$('#opener').one("click", function() {

}); 
```

[http://api.jquery.com/one/](http://api.jquery.com/one/)

# c# - 类型来自 PropertyInfo.PropertyType 的泛型类实例

> ID：15432986
> 
> 赞同：4
> 
> 时间：2013-03-15T12:50:42.010
> 
> 标签：c#, generics, reflection, propertyinfo

我有如下课程：

```
public class SampleClassToTest<T>
{
    public static Fake<T> SomeMethod(string parameter)
    {
        // some code
    }

    public static Fake<T> SomeMethod(string parameter, int anotherParameter)
    {
        //some another code
    }
}

public class Fake<T>
{
    // some code
} 
```

我想以这种方式使用它们：

```
SampleClassToTest<MyClass>.SomeMethod("some parameter"); 
```

我遇到的问题如下：我只能使用反射从 PropertyInfo 实例中获取“MyClass”类型，所以我有

```
Type propertyType = propertyInfo.PropertyType; 
```

我怎样才能做到这一点？有任何想法吗？

**UPD。** 我正在尝试将 Type 传递给泛型方法。是的，这就是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:04:40.060

你需要做：

```
typeof(SampleClassToTest<>).MakeGenericType(propertyType)
       .GetMethod("SomeMethod", new Type[] {typeof(string)})
       .Invoke(null, new object[] {"some parameter"}); 
```

丑陋。

如果有帮助*的*`Type`话，我建议提供一个接受实例的非通用 API ；这里的好处是通用 API 可以通过使用`typeof(T)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:04:54.617

看起来你想要：

```
Type propertyType;
Type classType = typeof(SampleClassToTest<>).MakeGenericType(propertyType);

MethodInfo method = classType.GetMethod("SomeMethod", BindingFlags.Static | BindingFlags.Public, null, new[] { typeof(string) }, null);
object fake = method.Invoke(null, new object[] { "some parameter" }); 
```

# file - 如何在 java 7 中写入字节数少于 myByteArray.length 的文件

> ID：15432988
> 
> 赞同：1
> 
> 时间：2013-03-15T12:50:44.950
> 
> 标签：file, bytearray, java-7

Java 7 有一个新的`nio.file`包可以更有效地写入文件

简单看一下java教程就知道这是写新文件的正常方式。很简单。

```
Files.write(Path path, byte[] bytes, OpenOption... options) 
```

我唯一的讽刺是我有一个长度为 1000 的 byte[] 并且只想写该数组的 800 个字节。我不必复制数组吗？

# wordpress - 使用 wordpress 将图像移动到另一个 div

> ID：15432991
> 
> 赞同：0
> 
> 时间：2013-03-15T12:50:55.957
> 
> 标签：wordpress, image

我是 Wordpress 的新手，这是我的第一个 Wordpress 网站，所以请多多包涵。

这是我的 index.php：

```
<?php get_header(); ?>
   <div id="content">
        <section id="posts">
                <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
                <section class="post">
                    <h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?>        </a></h2>
                    <div class="holder">

                    </div>
                    <p><?php the_content(); ?></p>
                </section>
                <?php endwhile; else: ?>
     <p><?php _e('Nothing here, sorry.'); ?></p>
     <?php endif; ?>
        </section>
        <aside>
            <?php get_sidebar(); ?>
        </aside>
         <div style="clear:both"></div>
        </div>   
        <div class="push"></div>
    </div>
</div>  
    <?php get_footer(); ?> 
```

基本上，我想要的是从帖子中找到第一张图片，并将其放在 .holder div 中。它应该类似于 jQuery 中的 detach() 和 append() 工作。

我知道我应该使用过滤器和操作，但我不知道如何开始，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:14:53.877

在您的文件 functions.php 中：

```
<?php function catch_that_image() {
global $post, $posts;
$first_img = '';
ob_start();
ob_end_clean();
$output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i', $post->post_content, $matches);
$first_img = $matches [1] [0];

if(empty($first_img)){ 
 //Defines a default image
 $first_img = "/images/default.jpg";
}
return $first_img;
}
?> 
```

并在您的文件 index.php 中放置：

```
<div class="holder">
   <img src="<?php echo catch_that_image() ?>" />
</div> 
```

# javascript - 预期行尾等，但发现未知令牌。- AppleScript 编辑器

> ID：15432996
> 
> 赞同：2
> 
> 时间：2013-03-15T12:51:24.473
> 
> 标签：javascript, ios, applescript, applescript-objc, applescript-studio

场景是，我要将一些文本传递给 LabelWriter 打印机。它是一个用于检查的示例。但是在编译时本身就会出错。

```
 tell application "AppleScript Runner"

OPEN “COM1:9600,n,8,1” FOR OUTPUT AS #1 
PRINT #1, “HELLO WORLD”

end tell 
```

错误：预期行尾等，但发现未知令牌

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:17:16.373

添加到原子牙刷的评论。

这是我的一个旧 Applescripts 的一个片段，它使用内置的命令行 [ *efax* (fax) [1](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/fax.1.html)程序与调制解调器进行通信。

```
set phone_num to "0207000000"
set thecall to do shell script "efax -v0 -d /dev/cu.modem -a TDT" & phone_num 
```

我还使用内置的命令行程序[Screen](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/screen.1.html)从图腾蓝牙调制解调器接收数据。（我没有手头的片段。在我需要挖掘的旧 Mac 上）

但在您开始尝试之前，您应该阅读[Applescript 基础知识](http://developer.apple.com/library/mac/#documentation/applescript/conceptual/applescriptlangguide/introduction/ASLR_intro.html)。